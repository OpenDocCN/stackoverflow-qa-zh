# StackOverflow 问答 11691000-11691999

# url - 有没有简单的方法在java中获取URL

> ID：11691005
> 
> 赞同：0
> 
> 时间：2012-07-27T15:30:52.923
> 
> 标签：url, request.querystring

我正在为网站制作电子邮件验证链接。当用户注册并填写完他们的个人数据（并且通过了所有检查）时，他们会被发送到一个 jsp 页面，说明一封电子邮件已发送到他们作为用户名输入的地址，并带有一个链接以单击以验证电子邮件地址。所以这部分一切都很好，我生成了链接（现在只使用我的本地主机），它看起来像这样作为示例`http://localhost:9999/javawork/msc/validate/?6FRQ8RAT&u=1s3w1Iih64egX01188HT`。当他们单击链接时，它会转到 jsp 页面`index.jsp`在验证文件夹中。此时我需要获取整个 URL 并将其发送到函数以确保 URL 格式正确（出于安全目的）。如果通过并且格式没问题，我需要在“？”之后立即获取 8 位代码。还有'u'的值。然后，我将这些值发送到一个函数，检查它们是否与我们数据库中的内容匹配，如果匹配，我会使用验证日期更新数据库记录，以便我们知道他们已经验证了他们的电子邮件地址。

所以我的问题是首先，如何抓取整个 URL 以检查格式，其次，如何抓取 8 位代码和 'u' 的值？我一直在网上查找，所有示例都需要创建多个函数或类，并使用 URL 类。他们都希望我创建一个 URL 对象的实例并使用整个 URL 对其进行初始化。但它不是静态 URL，每个注册用户都会有所不同，因为它会生成一个随机的 8 位代码进行检查，而“u”的值是来自数据库的屏蔽用户 ID。我不明白它如何要求您初始化整个 URL 以获取值，当您在从 URL 获取值之前不知道值是什么时。

有没有一种简单的方法来获取值和整个 URL？即使我可以在“？”之后获取所有内容，我也知道基本 URL，并且可以构建一个新字符串来检查格式是否可以从“？”中获取 之后。请帮忙处理那部分。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:51:10.377

接口 HTTPServletRequest 包含一个方法[getRequestURL](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL%28%29)，它返回一个[StringBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)，您可以使用它来检查整个 URL 的格式。你可以在一个jsp页面中得到它：

```
<%=request.getRequestURL()%> 
```

如果您使用上面指定的请求格式，那么您的第二个问题：

> 如何获取 8 位代码和“u”的值？

可以通过操纵 StringBuffer 在 ? 和 & 用于 8 位代码。或者使用另一种请求方法， [ServletRequest.getParameter(java.lang.String name)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)

但是，要获取每个参数，我不确定它最终将如何处理 8 位代码的未命名参数。让我知道情况如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T16:17:39.077

不要将 8 位代码视为未命名的参数。将其视为没有值的参数。

request.getParameterNames() 将为您提供 8 位代码以及“u”。所以你可以像这样循环： String code = "";

```
for(String paramName : request.getParameterNames()) {
    if(!paramName.equalsIgnoreCase("u"))
        code = paramName;
} 
```

# c# - 如何将值传递给 MVC Razor 中的链接

> ID：11691009
> 
> 赞同：-2
> 
> 时间：2012-07-27T15:31:10.287
> 
> 标签：c#, html, asp.net-mvc-3, razor

我是 MVC Razor 的新手，我有这个问题

前任：

我想将一个值传递给 id，所以这就是我所做的：

```
<a href="https://ag.de/goto.asp?id=@Model.LinkDirect"></a> 
```

谁能告诉我这是对还是错？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:38:02.760

如果您使用 @Razor 语法并希望将其嵌入到没有空格的字符串中，则需要在剃刀代码周围使用括号。

假设您传入了正确填充的模型，请尝试以下操作：

```
<a href="https://ag.de/goto.asp?id=@(Model.LinkDirect)">My direct link</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:34:24.477

在打开和关闭锚标记之间添加文本，如下所示：`<a href="https://ag.de/goto.asp?id=@(Model.LinkDirect)">Click here</a>`

# html - 居中内嵌块图像

> ID：11691014
> 
> 赞同：0
> 
> 时间：2012-07-27T15:31:32.870
> 
> 标签：html, css, centering

我需要一些帮助将一些图像居中

HTML：

```
<div id="thumbs" class="navigation">
<ul class="thumbs noscript">
<li>
    <a class="thumb" href="#">
        <img src="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg" />
    </a>
</li>
<li>
    <a class="thumb" href="#">
        <img src="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg" />
    </a>
</li>
<li>
    <a class="thumb" href="#">
        <img src="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg" />
    </a>
</li>
<br>
<li>
    <a class="thumb" href="#">
        <img src="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg" />
    </a>
</li>
<li>
    <a class="thumb" href="#">
        <img src="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg" />
    </a>
</li> 
```

CSS：

```
ul.thumbs {
    clear: both;
    padding-left: 0px;
}

ul.thumbs li {
    display: inline-block;
    /*float: left;*/
    padding: 0;
    margin: 5px 10px 5px 0;
    list-style: none;
}

a.thumb {
    padding: 2px;
    display: block;
    border: 1px solid #ccc;
}

ul.thumbs li.selected a.thumb {
    background: #DAA12F;
}

a.thumb:focus {
    outline: none;
}

ul.thumbs img {
    border: none;
    display: block;
    height: 120px;
    width: 120px;
    margin: 0px auto;
} 
```

我需要将图像集中在一起，以便它们保持对齐。我试过使用：

```
ul.thumbs {
    text-align:center;
} 
```

但由于每行有不同数量的图像，它们会不对齐

感谢您的帮助，这让我发疯

**编辑：**我以为我找到了一个使用此作为指南的解决方案：[http](http://www.tightcss.com/centering/center_variable_width.htm) ://www.tightcss.com/centering/center_variable_width.htm但如果图像超过行，它们不再居中。最初我放了一个 br 标记来分解行并解决了问题，但是我使用的 JS 库不能很好地处理列表项之间的 br 标记。任何建议（您可以在此处查看问题[http://jsfiddle.net/HvZva/26/](http://jsfiddle.net/HvZva/26/)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:38:28.353

有两种解决方案，一种是您希望图像居中，另一种是您的图像应该左对齐，但在页面上居中。

**中心块，左对齐图像** 为此，您需要将以下内容添加到您的 css（或参见：http: [//jsfiddle.net/HvZva/20/](http://jsfiddle.net/HvZva/20/)）

```
ul.thumbs{
margin:0 auto;
width:416px;
} 
```

我所做的基本上是告诉浏览器这个无序列表的两边应该有相等的边距。但由于这个对象的标准宽度为 100%，我们也需要指定它，在本例中为 416px。

**居中对齐图像**

如果这是静态内容，一种简单的方法是添加一个包含每一行的中心类的 div，然后添加“text-align:center;” 对于那些 div，这将起到作用。

注意：有一种新方法可以使块居中，但将图像向左对齐。但这涉及到box flex模型和css 3，还没有被浏览器实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:39:43.357

应用`text-align: center;`到 .thumbs.noscript ul 修复它在 jsfiddle

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:45:58.523

您可以给父元素一个宽度并应用`margin-left: auto; margin-right: auto;`

[http://jsfiddle.net/HvZva/13/](http://jsfiddle.net/HvZva/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-17T02:55:39.400

```
ul.thumbs {
    display:inline-block;
    text-align:center;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-27T15:40:43.240

像这样的东西？[http://jsfiddle.net/HvZva/11/](http://jsfiddle.net/HvZva/11/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-27T15:41:32.757

我可能误解了你的问题，但你想要的是这样的吗？ [http://jsfiddle.net/HvZva/12/](http://jsfiddle.net/HvZva/12/)

# c++ - GStreamer 插件与 GStreamermm(C++)

> ID：11691016
> 
> 赞同：6
> 
> 时间：2012-07-27T15:31:39.820
> 
> 标签：c++, plugins, binding, gstreamer

我正在尝试使用 GStreamermm 绑定在 C++ 中编写一个 gstreamer 插件。现在，有一个很好的插件编写指南（http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/），网上有各种示例和模板，但对于 gstreamermm，几乎没有文件的数量。

我知道我可以使用 C 和 C++ 的混合，但使用 C++ 绑定似乎更加优雅。

简单地将 gstreamer pwg 中的示例“翻译”为 gstreamermm 是一种死胡同。gstreamer 需要使用相当多的宏来定义类型，我看不到直接的 gstreamermm 转换。此外，我对 gstreamer 的经验很少，而且绝对没有使用 gobj 的经验（到目前为止）。

有人能把我放在正确的轨道上吗？即使是最小的例子或解释也可以。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:25:08.710

几天前我在 gtkmm 邮件列表上问过这个问题，得到了以下答案（来自 José Alburquerque）：

> 目前，唯一有可能（可能不存在）使用 gstreamermm 开发的插件是应用程序专用的插件。如果可能，这些插件将使用 Gst::Plugin::register_static()[1] 方法注册，而不是您上面描述的过程。
> 
> [1] [http://developer.gnome.org/gstreamermm/unstable/classGst_1_1Plugin.html#ac0728bb285ae1bed9298c0f9ea522ad9](http://developer.gnome.org/gstreamermm/unstable/classGst_1_1Plugin.html#ac0728bb285ae1bed9298c0f9ea522ad9)
> 
> 理论上，可以扩展其中一个 gstreamermm 基类 [2] 并在 Gst::Plugin::SlotInit 插槽（回调）中调用 Gst::ElementFactory::register_element()[3] 方法，以便元素工厂生成可以创建这些元素。然后可以在同一个 Gst::Plugin::SlotInit 槽中使用 Gst::Registry::add_feature()[4] 将该工厂添加到注册表中。
> 
> [2] [http://developer.gnome.org/gstreamermm/unstable/group__GstBaseClasses.html](http://developer.gnome.org/gstreamermm/unstable/group__GstBaseClasses.html)
> 
> [3] Gst::ElementFactory::register_element() 方法是一种尚未实现但会包装 gst_element_register() 函数的方法。这将是即将发布的版本的一部分。
> 
> [4] [http://developer.gnome.org/gstreamermm/unstable/classGst_1_1Registry.html#ae1f9a1ddd60ef5a7e1f8cddf14ec404f](http://developer.gnome.org/gstreamermm/unstable/classGst_1_1Registry.html#ae1f9a1ddd60ef5a7e1f8cddf14ec404f)
> 
> 我没有对此进行测试，也不知道它是如何工作的（或者它是否真的会），但如果我必须这样做，我会尝试这样做。但是，我认为目前用 C 编写插件更容易，但这只是让事情变得更容易的问题。

# vb.net - 在文本框中输入按钮的文本

> ID：11691017
> 
> 赞同：1
> 
> 时间：2012-07-27T15:31:40.720
> 
> 标签：vb.net, button, textbox

继我的上一个问题[按钮之后，用户可以重新命名，这个](https://stackoverflow.com/q/11690108/1557944)问题得到了快速的回答并提供了很多帮助。

目前我已经得到了这个代码，我需要在 100 个按钮上拥有它。

我需要知道的是如何使用按钮中的文本将它们放入需要它们的不同文本框中。

```
 If Label4.Text = "Admin" Then
        With DirectCast(sender, Button)
            .Text = InputBox("Button Name", "Button Name", .Text)
        End With
    Else
        Me.TransactionBindingSource.AddNew()

        Product_NameTextBox.Text = >>>>>>Button name<<<<<<<<
        Try
            Me.ProductTableAdapter.FillByProductName(Me.Database1DataSet.Product, Product_NameTextBox.Text)
        Catch ex As System.Exception
            System.Windows.Forms.MessageBox.Show(ex.Message)
        End Try

        ProductTextBox.Text = >>>>>>>Button2.Text<<<<<<<<
        GroupTextBox.Text = GroupTextBox1.Text
        AmountTextBox.Text = AmountTextBox1.Text
        PriceTextBox.Text = PriceTextBox1.Text
        TimeTextBox.Text = TimeOfDay
        DateTextBox.Text = DateString

        Me.Validate()
        Me.TransactionBindingSource.EndEdit()
        Me.TransactionTableAdapter.Update(Me.Database1DataSet)

        Timer2.Enabled = True
        TransNameLB.Items.Add(>>>>>>>Button2.Text<<<<<<<<)
        TransPriceLB.Items.Add(PriceTextBox.Text)

        Dim sum As Double
        For x As Integer = 0 To TransPriceLB.Items.Count - 1
            sum += Val(TransPriceLB.Items.Item(x).ToString)
        Next
        TextBox1.Text = sum.ToString

        QTYDrinksTB.Text = TransNameLB.Items.Count
    End If

End Sub 
```

除了 之间的位之外，一切都有效`>>> <<<`，我需要在其中获取单击的按钮并将按钮中的文本返回到文本框/列表框中。

我有 100 个需要此代码的按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:55:32.570

您`With DirectCast(sender, Button)`从上一个问题中使用，它也可以用来帮助您的其他部分。例如：

```
If Label4.Text = "Admin" Then
    With DirectCast(sender, Button)
        .Text = InputBox("Button Name", "Button Name", .Text)
    End With

Else
    Me.TransactionBindingSource.AddNew()

    With DirectCast(sender, Button)

    Product_NameTextBox.Text = .Text

    Try
        Me.ProductTableAdapter.FillByProductName(Me.Database1DataSet.Product, Product_NameTextBox.Text)
    Catch ex As System.Exception
        System.Windows.Forms.MessageBox.Show(ex.Message)
    End Try

    ProductTextBox.Text = .Text
    GroupTextBox.Text = GroupTextBox1.Text
    AmountTextBox.Text = AmountTextBox1.Text
    PriceTextBox.Text = PriceTextBox1.Text
    TimeTextBox.Text = TimeOfDay
    DateTextBox.Text = DateString

    Me.Validate()
    Me.TransactionBindingSource.EndEdit()
    Me.TransactionTableAdapter.Update(Me.Database1DataSet)

    Timer2.Enabled = True
    TransNameLB.Items.Add(.Text)
    TransPriceLB.Items.Add(PriceTextBox.Text)

    End With

    Dim sum As Double
    For x As Integer = 0 To TransPriceLB.Items.Count - 1
        sum += Val(TransPriceLB.Items.Item(x).ToString)
    Next
    TextBox1.Text = sum.ToString

    QTYDrinksTB.Text = TransNameLB.Items.Count
End If 
```

# c# - OleDbDataAdapter 不会从服务器中的 excel 中读取所有数据但在本地系统中工作正常

> ID：11691018
> 
> 赞同：3
> 
> 时间：2012-07-27T15:31:44.167
> 
> 标签：c#, asp.net, excel, oledb, oledbdataadapter

我在使用 C# 从 excel（它包含超过 30,000 行）读取数据时遇到问题。当我在本地系统中测试时，它工作正常，即它从 excel 复制所有行，但是当我在生产服务器中部署和运行时，它只读取大约 12,000 行）。

我也尝试过使用 BulkCopy，但也是如此。它与网络服务器有什么关系（我的网络服务器是 windows server 2008）？

请帮助我。谢谢

```
protected void ImportFromExcelToTempCompetitionTable(string filename)  
{
    string strConn = "Provider=Microsoft.ACE.OLEDB.12.0; " + "Data Source=" + filename + ";" + "Extended Properties=Excel 12.0";

    OleDbDataAdapter cmdOle;

 cmdOle = new OleDbDataAdapter("SELECT [StringColA], [StringColB], [NumberCol1], [NumberCol2] from  [XYZSheet]", strConn);

    try
    {
     Boolean blnSuccess = false;
        DataSet ds = null;
        ds = new DataSet();
        cmdOle.Fill(ds);
    if (ds.Tables[0].Rows.Count > 0)
        {
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            //*****************
            using (cnn = new SqlConnection(util.GetConnectionString()))
            {

                string sqlQuery = "INSERT INTO tbl_XYZ(StringColA, StringColB, NumberCol1,NumberCol2) values (@StringColA, @StringColB, @NumberCol1, @NumberCol2)";
                cmd = new SqlCommand(sqlQuery, cnn);
                cmd.CommandType = CommandType.Text;
                SqlParameter StringColA= new SqlParameter("@StringColA", SqlDbType.VarChar, 500);
                StringColA.Value = dr["StringColA"].ToString();
                cmd.Parameters.Add(StringColA);
                SqlParameter StringColB= new SqlParameter("@StringColB", SqlDbType.VarChar, 500);
                StringColB.Value = dr["StringColB"].ToString();
                cmd.Parameters.Add(StringColB);
                SqlParameter NumberCol1= new SqlParameter("@NumberCol1", SqlDbType.Decimal, 25);
                NumberCol1.Value = dr["NumberCol1"].ToString();
                cmd.Parameters.Add(NumberCol1);
                SqlParameter NumberCol2= new SqlParameter("@NumberCol2", SqlDbType.Decimal, 25);
                NumberCol2.Value = dr["NumberCol2"].ToString();
                cmd.Parameters.Add(NumberCol2);

                try
                {
                    cnn.Open();
                    cmd.ExecuteNonQuery();
                    blnSuccess = true;
                }
                catch (Exception ex)
                {

                }
                finally
                {
                    if (blnSuccess)
                    {
                        cmd.Dispose();
                        cnn.Close();
                    }
                }

            }
            //*****************
        }
    }        

    }
    catch (Exception ex)
    {

    }
    finally
    {

    }

} 
```

# c++ - 为什么这会调用默认构造函数？

> ID：11691021
> 
> 赞同：80
> 
> 时间：2012-07-27T15:31:50.367
> 
> 标签：c++, syntax, most-vexing-parse

```
struct X
{
    X()    { std::cout << "X()\n";    }
    X(int) { std::cout << "X(int)\n"; }
};

const int answer = 42;

int main()
{
    X(answer);
} 
```

我本来希望这可以打印

*   `X(int)`, 因为`X(answer);`可以解释为从`int`to的转换`X`, 或
*   什么都没有，因为`X(answer);`可以解释为变量的声明。

但是，[它会打印`X()`](http://ideone.com/QZDO1)，我不知道为什么`X(answer);`要调用默认构造函数。

奖励积分：我必须更改什么才能获得临时声明而不是变量声明？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-27T15:36:22.150

> 什么都没有，因为 X(answer); 可以解释为变量的声明。

你的答案隐藏在这里。如果你声明一个变量，你调用它的默认 ctor（如果非 POD 和所有这些东西）。

在您的编辑中：要获得一个临时的，您有几个选择：

*   [`(X(answer));`](http://liveworkspace.org/code/0d8f045cd715a27f126d26591098fc72)
*   [`(X)answer;`](http://liveworkspace.org/code/87e18d40ffc27e49e0a07c9c05f1a775)
*   [`static_cast<X>(answer)`](http://liveworkspace.org/code/9619098847d97f1809fb02adb219ab5d)
*   [`X{answer};`](http://liveworkspace.org/code/c78c002e32755e18b3c03eaac6951e85)(C++11)
*   [`[]{ return X(answer); }();`](http://liveworkspace.org/code/d3393ff9bb3f302c3e9facfba22f1c64)（C++11，可能会产生复制）
*   [`void(), X(answer);`](http://liveworkspace.org/code/c803c5e68bf825d87e83cfa5294ee701)
*   [`X((void(),answer));`](http://liveworkspace.org/code/ee2160ded0abd7dea87b2e743861af08)
*   [`true ? X(answer) : X();`](http://liveworkspace.org/code/d29e7f10fceadca7ec24fef163b8afb6)
*   [`if(X(answer), false){}`](http://liveworkspace.org/code/6eff0bb82d0c27334322ce22761e3ea2)
*   [`for(;X(answer), false;);`](http://liveworkspace.org/code/160fa87d472ebe74c3f5c2b44d7ff706)
*   [`X(+answer);`](http://liveworkspace.org/code/6914b3dbc2b6821e5bc51467dab97420)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-07-27T15:36:00.833

括号是可选的。你说的`X answer;`和 是一样的，是声明语句。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-27T15:39:42.100

如果你想声明一个 X 类型的变量，你应该这样做：

```
X y(answer); 
```

# iphone - 为什么 UIScrollView 不称它为委托？

> ID：11691022
> 
> 赞同：0
> 
> 时间：2012-07-27T15:31:52.253
> 
> 标签：iphone, xcode, delegates, uiscrollview, uiscrollviewdelegate

问题是我在 Xib 制作了一个新的 UIScrollView，然后将委托链接到所有者.. 一些委托如何调用.. 任何线索？或 UIScrollView 的简单示例

对不起，我是一个新的 ios 开发人员，提前感谢..

编码 ：

在标题

```
@interface stageViewController : UIViewController<UIScrollViewDelegate> 
```

在.m

```
#pragma mark drag delegate
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
    NSLog(@"scrollViewDidScroll");
}                                              // any offset changes
- (void)scrollViewDidZoom:(UIScrollView *)scrollView{
    NSLog(@"scrollViewDidZoom");
}

// called on start of dragging (may require some time and or distance to move)
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
    NSLog(@"scrollViewWillBeginDragging");
}

- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset{
    NSLog(@"scrollViewWillEndDragging");
}

- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView{
    NSLog(@"scrollViewWillBeginDecelerating");
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{
    NSLog(@"scrollViewDidEndDecelerating");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:35:07.727

写`scrollView.delegate = self;`如果你务实地做到了。如果你有你`ScrollView`的，`XIB`那么**ctrl+drag**从你的`scrollView`到你的`File's Owner`，然后设置它的代表。

# ios - 应用程序不会在 iOS 设备上调整大小

> ID：11691028
> 
> 赞同：0
> 
> 时间：2012-07-27T15:32:23.933
> 
> 标签：ios, actionscript-3, flash, air

我正在使用 AIR 3.3/Flash CS5.5 为 iOS 和 Android 编写应用程序。现在我遇到了问题，该应用程序不会在 iOS 设备上调整大小（在 ipod touch 4 上测试）。

这是我的代码：

```
 public function Main() {
            this.addEventListener(Event.ADDED , Init, false, 0, true);
        }

        private function Init(e:Event) {
            this.removeEventListener(Event.ADDED , Init);

            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            stage.addEventListener(Event.RESIZE , Resize, false, 0, true);
        }

        private function Resize(e:Event) {
            stage.removeEventListener(Event.RESIZE, Resize);

            var stageheight = Math.min(stage.fullScreenHeight, Screen.mainScreen.visibleBounds.height);
            var stagewidth = Math.min(stage.fullScreenWidth, Screen.mainScreen.visibleBounds.width);

            stage.stageHeight = Math.min(stagewidth, stageheight);
            stage.stageWidth = Math.max(stagewidth, stageheight);

            scaleFactor = stage.stageHeight / APP_ORG_HEIGHT;

            NativeApplication.nativeApplication.systemIdleMode = SystemIdleMode.KEEP_AWAKE;
        } 
```

它适用于 Android 设备，但不适用于我的测试设备。

这是我的xml设置：

```
 <initialWindow>
    <systemChrome>standard</systemChrome>
    <transparent>false</transparent>
    <visible>true</visible>
    <fullScreen>true</fullScreen>
    <aspectRatio>landscape</aspectRatio>
    <renderMode>gpu</renderMode>
    <autoOrients>false</autoOrients>
  </initialWindow>
  <android>
    <manifestAdditions>
      <![CDATA[<manifest android:installLocation="auto">
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>
</manifest>]]>
    </manifestAdditions>
  </android>
  <iPhone>
    <InfoAdditions>
      <![CDATA[<key>UIDeviceFamily</key><array><string>1</string></array><key>UIPrerenderedIcon</key><true/><key>UIApplicationExitsOnSuspend</key><true/>]]>
    </InfoAdditions>
    <requestedDisplayResolution>high</requestedDisplayResolution>
  </iPhone> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:23:53.537

尝试更改为

```
 public function Main() {
        if(stage) Init();
        addEventListener(Event.ADDED_TO_STAGE, Init);
    }

    private function Init(e:Event = null) {
        if(e != null) this.removeEventListener(Event.ADDED_TO_STAGE, Init);
        ... 
```

您可能没有收到添加的事件，因为在连接事件侦听器时，`DisplayObject`可能已经在舞台上。在这种情况下，最好有条件地测试是否`stage`可用。如果是，那么继续做这项工作。否则，请等到对象已添加到舞台。

我还将`Event.RESIZE`在更改舞台缩放模式和舞台对齐之前添加事件处理程序。

最后，您可能会在应用程序初始化期间收到多个调整大小事件。但是您的代码现在编写的方式，它只会为第一次执行，这可能不是“最终”大小。您可能想要重写您的调整大小处理程序，以便可以多次调用它——看起来还不错。

# sql - 模式匹配sql算法

> ID：11691029
> 
> 赞同：2
> 
> 时间：2012-07-27T15:32:24.977
> 
> 标签：sql, sql-server

```
Table 1
Account ID   Account name 
Missing      Agreete NV.

Table 2 
Account ID   Account name 
XXX4546778   Agreete 
```

我必须根据查看两个表中的帐户名称的最佳匹配来填充表 1 中的所有帐户 ID。

我想过，patindex 和 soundex。

考虑一下，我在考虑比较完整字符串，如果不匹配则比较完整字符串 -1 ，如果不匹配则比较完整字符串 -2 直到得到匹配。

然而，一定有人想出了模式匹配 sql 算法，它会以低错误率做到这一点。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:59:08.587

也许我错过了您的问题的重点，但在我看来，您与您所说的完全匹配

```
update t1
set [account id] = t2.[account id]
from table1 t1
inner join table2 t2 on t1.[account name] = t2.[account name]
where t1.[account id] = 'missing' 
```

你有部分匹配

```
update t1
set [account id] = t2.[account id]
from table1 t1
inner join table2 t2 on t1.[account name] like t2.[account name] + '%'
where t1.[account id] = 'missing' 
```

按这个顺序跑...

# javascript - 居中 div 块但不在最后一行

> ID：11691030
> 
> 赞同：5
> 
> 时间：2012-07-27T15:32:25.303
> 
> 标签：javascript, css

除了最后一行之外，我真的很想保持 div 块居中。

其他人已经创建了这个小提琴来证明我的问题。即使调整窗口大小，您也可以看到结果面板中的块如何保持居中。我希望有类似的行为但是如果最后一行包含的块少于上面的行，那么最后一行不应该居中而是左对齐。

这是小提琴：http: [//jsfiddle.net/zbbHc/1/](http://jsfiddle.net/zbbHc/1/)

有人可能会问为什么我不只使用 float:left。这样做的问题是，如果没有为包装器指定固定宽度，我找不到使用该方法将块居中的方法。我试图让一切都尽可能地流动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:56:31.563

试试这个小提琴[http://jsfiddle.net/zbbHc/45/](http://jsfiddle.net/zbbHc/45/)

不确定，但我认为这是我们单独使用 CSS 可以做到的最大程度。

*更新：（*这不会在所有情况下都有效，检查下面的代码在所有情况下都有效[我猜]）

**HTML**

```
<div class="wrapper">
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB hide"></div>
    <div class="iB hide"></div>
</div> 
```

**CSS** ​</p>

```
.wrapper {
    width: 100%;
    background: red;
    text-align: center;
    text-align-last: left;
}

.iB {
    display:inline-block;
    width: 200px;
    height: 100px;
    background: green;
}
.iB.hide {
   visibility:hidden; 
} 
```

​</p>

**这是使用 jQuery 的快速而肮脏的方法。这将自动添加不可见元素**

在这里[摆弄 http://jsfiddle.net/fD6fn/](http://jsfiddle.net/fD6fn/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="lib/jquery-1.6.2.min.js"></script>
<style>
.wrapper {
    width: 100%;
    background: red;
    text-align: center;
    text-align-last: left;
}

.iB {
    display:inline-block;
    width: 200px;
    height: 100px;
    background: green;
}
.iB.hide {
   visibility:hidden; 
}
​
</style>
</head>

<body>
<div class="wrapper" id="wrapper">
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
    <div class="iB"></div>
</div>
<script language="javascript">
function findHiddenElementCount() {
var $wrapper = $("#wrapper"),
    itemWidth = "200",
    count = "",
    itemCount = 7; 

    count = $wrapper.width()/itemWidth;

// Some wild logic below, can be optimized.
return parseInt(count) - (itemCount - (parseInt(itemCount/parseInt(count)) * parseInt(count))) ;
}

function addInvisibleElements() 
{
    // Delete invisible items
    $("#wrapper .iB.hide").remove();

    var c = findHiddenElementCount();

    for(var i = 0; i < c;i++)
    {
        $("#wrapper").append('<div class="iB hide"></div>');
    }

}

$(window).bind("resize",addInvisibleElements); // resize handler

$(document).ready(addInvisibleElements); // take care during page load

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:49:49.570

为什么不用百分比？[http://jsfiddle.net/zbbHc/38/](http://jsfiddle.net/zbbHc/38/)这就是大多数流体布局通常的工作方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:13:57.817

当您说“如果”最后一行的块较少时，您的意思是它是动态内容吗？如果您知道它将有一个，那么您可以将其相对于其自身宽度一半的值（以及任何边距等）进行定位

```
.iB:last-child{
   position:relative;
   left:-100px;
   background:blue;
} 
```

[http://jsfiddle.net/zbbHc/54/](http://jsfiddle.net/zbbHc/54/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T17:08:13.383

可以使用表格来执行此操作（尽管我倾向于避免使用表格）。表格单元格的尺寸由它们的内容决定（当然，您可以添加自己的尺寸或最大/最小尺寸）。您可以有一个包含一列的表，并且（尽管这不是最佳做法）将 div 嵌入到表中（每个 div 都是一个块）。

表格的宽度将是流动的，因为它将基于最宽单元格的宽度（因此，块将很好地排列并且看起来非常整洁），并且您可以硬编码或编写脚本（当然，我建议scripting) 一种样式/方法，用于检查最后一行是否包含较少的块，如果确实如此，则仅将该单元格的 text-align 设置为左​​对齐。

这个解决方案可能需要一些改进，但它可能是一个好的开始，这取决于你将它用于什么。

# ios - XCode 4.4 iOS 5.1 模拟器问题

> ID：11691035
> 
> 赞同：13
> 
> 时间：2012-07-27T15:32:40.750
> 
> 标签：ios, objective-c, xcode, ios5, xcode4.4

我将我的 mac book 更新为山狮，并将 Xcode 更新为 4.4 版本。在之前的版本中，我关闭 iOS 模拟器没有问题，Xcode 自动停止了构建过程，但现在如果我关闭 iOS 模拟器，Xcode 中的构建过程仍在运行，我必须强制退出 Xcode，因为它会冻结。

有谁认识这个错误，或者你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:36:29.630

作为一种解决方法，我注意到 Running (⌘ + R) 然后 Bulding (⌘ + B) 产品成功启动了新的模拟器实例，尽管旧实例仍然被冻结。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:39:43.833

当这在 XCode 3.1 或其他版本开始发生在我身上时，我只是恢复到做我曾经做过的事情。

在 iOS SIMULATOR 中关闭或后台应用程序之前，请按 XCODE 中的 STOP 按钮。

然后关闭 iOS 模拟器。

# java - 是否可以在 Eclipse 运行时环境中定义码头服务器？

> ID：11691036
> 
> 赞同：1
> 
> 时间：2012-07-27T15:32:45.317
> 
> 标签：java, eclipse, rest, jetty

我使用 eclipse WTP 创建了一个 REST WS 应用程序。到目前为止，我使用 Tomcat 7 来部署我的应用程序。我可以将 Tomcat 定义为服务器运行时环境。现在我想使用 jetty 来部署该应用程序，我下载了 jetty 8 并且我有 eclipse Indigo .. 尝试以我为 Tomcat 所做的方式定义码头，但它不起作用，因为可用的适配器适用于 jetty6 并且当我尝试使用此适配器运行我的应用程序，我收到一条消息说 `the server does not suport version 3.0 of J2EE Web module specification`

如何从 Eclipse 在码头上运行我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:14:42.227

jetty 6 只支持 jsp/servlets **2.5**规范，所以你需要使用 jetty8 和 servlets/jsp 3.0 支持

使用 maven 像这样添加 jetty 8

```
<dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-server</artifactId>
        <version>${jetty.revision}</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-webapp</artifactId>
        <version>${jetty.revision}</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlet</artifactId>
        <version>${jetty.revision}</version>
    </dependency> 
```

例如，码头版本是 8.1.5.v20120716

# python - 在 opensuse 上安装 pyodbc 时出错

> ID：11691039
> 
> 赞同：1
> 
> 时间：2012-07-27T15:32:53.860
> 
> 标签：python, pyodbc, opensuse

当我尝试使用“python setup.py build install”安装pyodbc时，它会出现一些错误，如下所示：

gcc -pthread -fno-strict-aliasing -DNDEBUG -march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g - fwrapv -fPIC -DPYODBC_VERSION=3.0.3 -I/usr/include/python2.6 -c /root/Desktop/pyodbc-3.0.3/src/sqlwchar.cpp -o build/temp.linux-i686-2.6/root /Desktop/pyodbc-3.0.3/src/sqlwchar.o -Wno-write-strings 在 /root/Desktop/pyodbc-3.0.3/src/sqlwchar.cpp:2 包含的文件中：/root/Desktop/pyodbc- 3.0.3/src/pyodbc.h:41:20：错误：Python.h：没有这样的文件或目录 /root/Desktop/pyodbc-3.0.3/src/pyodbc.h:42:25：错误：floatobject。 h：没有这样的文件或目录/root/Desktop/pyodbc-3.0.3/src/pyodbc.h:43:24：错误：longobject.h：没有这样的文件或目录/root/Desktop/pyodbc-3.0.3/ src/pyodbc.h:44:24: 错误: boolobject.h: 没有这样的文件或目录

还有几行类似的反馈，在回复的最后是这样的：

/root/Desktop/pyodbc-3.0.3/src/pyodbccompat.h:106：错误：预期为“，”或“；” 在“{”令牌错误之前：命令“gcc”失败，退出状态为 1

我已经四处寻找解决方案，每个人都说安装 python-devel 就可以了，但是我在没有 python-devel 的 64 位 opensuse 上工作，但它在 32 位上不起作用，我在互联网上的任何地方都找不到适用于 python2.6.0-8.12.2 的正确版本......所以我很困惑，请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:28:44.720

`error: Python.h: No such file or directory`

我遇到了同样的错误，在安装了正确版本的 python-devel 后清除了，这对于 64 位确实存在：

```
rpm -qa | grep python-devel
python-devel-2.6.6-36.el6.x86_64
[root@lga-vertdev01 test]# rpm -qi python-devel
Name        : python-devel                 Relocations: (not relocatable)
Version     : 2.6.6                             Vendor: CentOS
Release     : 36.el6                        Build Date: Thu 21 Feb 2013 07:02:48 PM EST
Install Date: Tue 12 Mar 2013 08:00:53 AM EDT      Build Host: c6b9.bsys.dev.centos.org
Group       : Development/Libraries         Source RPM: python-2.6.6-36.el6.src.rpm
Size        : 466338                           License: Python
Signature   : RSA/SHA1, Sat 23 Feb 2013 12:39:13 PM EST, Key ID 0946fca2c105b9de
Packager    : CentOS BuildSystem <http://bugs.centos.org>
URL         : http://www.python.org/
Summary     : The libraries and header files needed for Python development
Description :
The Python programming language's interpreter can be extended with
dynamically loaded extensions and can be embedded in other programs.
This package contains the header files and libraries needed to do
these types of tasks. 
```

如果要开发 Python 扩展，请安装 python-devel。还需要安装 python 包。您可能还想安装包含 Python 文档的 python-docs 包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:28:38.143

我没有找到解决 Python 头文件（它们是 python-devel 包的一部分）的方法。他们需要编译包。

*也许*某处有一个 64 位版本的预编译蛋，这就是它的安装方式。

为什么不愿意安装 python-devel？

# asp.net-mvc-3 - 当我添加文件夹“App_Code”时，Asp.Net MVC 抛出错误

> ID：11691040
> 
> 赞同：0
> 
> 时间：2012-07-27T15:32:57.040
> 
> 标签：asp.net-mvc-3, html-helper, app-code

今天，我发现了一个非常好的功能，让我能够添加 cshtml 助手。为了能够做到这一点，我必须将 cshtml 文件放在名为“App_Code”的文件夹中，然后添加到如下所示的代码中：

```
@using System.Security.Policy

@helper jQuery(){
   if (System.Diagnostics.Debugger.IsAttached)
   {
        <script src="@Url.Content("~/Scripts/JQuery/jquery-1.7.2.js")" type="text/javascript"></script>
   }
   else
   {
        <script src="@Url.Content("~/Scripts/JQuery/jquery-1.7.2.min.js")" type="text/javascript"></script>
   }
} 
```

问题是在仅添加一个文件的此文件夹后，当我尝试在浏览器中访问页面时，我收到服务器错误。

*“网络错误：500 内部服务器错误 - http://localhost/[端口]...*

我已经将代码放入我项目的其他文件夹中。

我必须将所有代码移动到“App_Code”文件夹中，还是有什么技巧可以保留我现有的结构但使用这个新的“App_Code”文件夹？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:40:02.800

您不能在助手中使用助手，因此它们不像您最初想象的那样有用:-)

`Html`这些辅助函数中`Url`不存在类似的东西。因此，如果您需要使用它们，则必须将它们作为参数传递：

```
@using System.Web.Mvc
@using System.Security.Policy

@helper jQuery(UrlHelper urlHelper)
{
   if (System.Diagnostics.Debugger.IsAttached)
   {
        <script src="@urlHelper.Content("~/Scripts/JQuery/jquery-1.7.2.js")" type="text/javascript"></script>
   }
   else
   {
        <script src="@urlHelper.Content("~/Scripts/JQuery/jquery-1.7.2.min.js")" type="text/javascript"></script>
   }
} 
```

并在调用时将当前 UrlHelper 的实例传递给它：

```
@Foo.jQuery(Url) 
```

# c# - 线程池饥饿

> ID：11691041
> 
> 赞同：2
> 
> 时间：2012-07-27T15:33:00.420
> 
> 标签：c#, asp.net, sql-server, asynchronous, sqlcommand

我的问题与在负载增加时阻塞的 aspx.net 4.0 Web 服务器有关。通过阻塞，我的意思是请求是由客户端发送的，但响应会在大约 45 秒后返回。这在开发和生产环境中是可重现的。这 45 秒似乎是恒定的，我在调用 Constructor() 和`void Render(HtmlTextWriter writer)`. 我在一个页面上使用了几个 SqlDataSource 和自定义控件`SqlCommand.BeginExecuteReader(...)`，总共使用了 6 个。如果我用`BeginExecuteReader`/`EndExecuteReader`模式停用控件，我可以消除这个问题。所以我假设最终其中一个 BeginExecute 调用被阻塞，直到线程池中的线程可用。

我打印调试消息并识别出一种模式，其中总是在返回阻塞的请求之前打印一堆线程退出消息：

> 线程 'GetMolFileAsync' (0x1ba4) 已退出，代码为 0 (0x0)。
> 
> 线程“GetMolFileAsync”(0x27d0) 已退出，代码为 0 (0x0)。
> 
> 线程 '' (0x23c) 以代码 0 (0x0) 退出。
> 
> 线程“GetCompoundDepositionInfo”(0x1e88) 已退出，代码为 0 (0x0)。
> 
> 线程“GetMolFileAsync”(0x2758) 已退出，代码为 0 (0x0)。
> 
> 0x43 27/07/2012 15:09:42 45 ==>**阻塞线程耗时 45 秒**
> 
> 0x5F 27/07/2012 15:10:27 0 ==>**正常行为，在几毫秒内处理**
> 
> ...

这是向数据库发起请求的方法

```
public static IAsyncResult GetCompoundDepositionInfoAsync(object sender, EventArgs e, AsyncCallback callback, object state)
    {
        GetCompoundVersionInfoAsyncParameters parameters = (GetCompoundVersionInfoAsyncParameters)state;
        IAsyncResult res = null;

        parameters.cmd = new System.Data.SqlClient.SqlCommand("www.GetCompoundDepositionInfo", new System.Data.SqlClient.SqlConnection(parameters.connectionstring));
        parameters.cmd.CommandType = System.Data.CommandType.StoredProcedure;
        parameters.cmd.Parameters.AddWithValue("@CompoundID", parameters.CompoundID);
        try
        {
            parameters.cmd.Connection.Open();
            res = parameters.cmd.BeginExecuteReader(callback, parameters, System.Data.CommandBehavior.CloseConnection);
        }
        catch (Exception ex)
        {
            if (parameters.cmd.Connection.State == System.Data.ConnectionState.Open)
            {
                parameters.cmd.Connection.Close();
            }
            throw new Exception("Exception in calling GetCompoundDepositionInfoAsync()", ex);
        }
        return res;
    } 
```

这是回调函数

```
public void GetCompoundDepositionInfoCallback(IAsyncResult result)
    {
        gmdTools.GmdCompound.GetCompoundVersionInfoAsyncParameters param = (gmdTools.GmdCompound.GetCompoundVersionInfoAsyncParameters)result.AsyncState;

        System.Threading.Thread.CurrentThread.Name = "GetCompoundDepositionInfo";
        using(System.Data.SqlClient.SqlCommand command = param.cmd)
        using(System.Data.SqlClient.SqlDataReader reader = command.EndExecuteReader(result))
        {
            try
            {
                if (reader.Read())
                {
                    lblDeposited.Text = string.Concat("at ", reader.GetDateTime(0).ToShortDateString(), " by ", reader.GetString(1));
                }
            }
            finally
            {
                if (reader != null)
                {
                    reader.Close();
                    command.Connection.Close();
                }
            }
        }
    } 
```

这是将它们粘合在一起的代码......

```
Page.RegisterAsyncTask(new PageAsyncTask(
                new BeginEventHandler(gmdTools.GmdCompound.GetCompoundLastChangeInfoAsync)
                , new EndEventHandler(GetCompoundLastChangeInfoCallback)
                , new EndEventHandler(GetCompoundInfoAsyncTimeout)
                , new gmdTools.GmdCompound.GetCompoundVersionInfoAsyncParameters()
                {
                    connectionstring = Properties.Settings.Default.GmdConnectionString,
                    CompoundID = CompoundId,
                }, true
            )); 
```

由于我已经花了几个小时查看此代码，因此我将不胜感激任何反馈。

**更新** 这 45 秒是默认的`Page.AsyncTimeout`，可以使用`Async="true" AsyncTimeout="10"`语句更改为 10 秒。尽管我通过添加适当的索引极大地提高了站点的整体性能，但客户端有时必须等待这段时间，然后服务器才会发送响应。在这种情况下，不会`AsyncTimeout`调用任何处理程序。我假设页面注册了所有异步操作，但最终无法识别某些异步操作已成功完成，因此在呈现页面之前等待 AsyncTimeout 秒。对此有何评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:38:23.190

您是否在连接字符串中使用[async=true](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)属性。这是使用 SqlClient 的真正异步操作所必需的。如果可能的话，您可以在 .Net 4.5 上使用 Task async 功能尝试此操作，代码如下所示。

```
public async Task GetCompoundDepositionInfoAsync(CancellationToken cancellationToken)
{
    parameters.cmd = new System.Data.SqlClient.SqlCommand("www.GetCompoundDepositionInfo", new System.Data.SqlClient.SqlConnection(parameters.connectionstring));
    parameters.cmd.CommandType = System.Data.CommandType.StoredProcedure;
    parameters.cmd.Parameters.AddWithValue("@CompoundID", parameters.CompoundID);
    using (var connection = new SqlConnection(parameters.connectionstring))
    using (var command = new SqlCommand(query, connection))
    {
        await connection.OpenAsync(cancellationToken);
        using (var reader = await command.ExecuteReaderAsync(cancellationToken))
        {
            if (await reader.ReadAsync(cancellationToken))
            {
                lblDeposited.Text = string.Concat("at ", reader.GetDateTime(0).ToShortDateString(), " by ",     reader.GetString(1));
            }
        }
    }
} 
```

并在 page_load()

```
RegisterAsyncTask(new PageAsyncTask(GetCompoundDepositionInfoAsync)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:59:37.617

考虑到查询返回的选择或行，它可能是数据库，它选择多于还是少于千分之一？MS SQL将在选择通过1000行返回1000行时更改其操作方式。如果您使用 SQL 探查器运行查询，您会得到表扫描吗？如果您运行内置 sp 来确定缺失的索引，它是否会返回对这些表的索引请求？你的统计数据是最新的吗？对此的线索是恢复的备份会快速运行查询，因为当您恢复备份时，会更新统计信息。您的（所有/每个）表上是否有聚集索引？

这个答案也可能是相关的[Entity Framework MVC Slow Page Loads](https://stackoverflow.com/questions/10415070/entity-framework-mvc-slow-page-loads/10415288#10415288)

# xml - 如何创建一个 xml 模式，该模式将从 xml 文件中获取数据并将行转换为列？

> ID：11691045
> 
> 赞同：0
> 
> 时间：2012-07-27T15:33:27.487
> 
> 标签：xml, excel

我有一个从数据库中提取的 XML 文件，并且使用 Excel 创建多行以显示个人的不同数字，我希望将这些行转置为多列。因此，当有人看着那个人时，他们只需向右滚动即可查看数字。

目前，每一行在数字左侧的一列中由 1-27 组织，我希望将这些作为列中的标题，下面有相应的数字。

这是数据库正在输出的 XML 文件的示例。

```
<B15C>
    <PP nbr="1">
        <AMT>55555</AMT>
        </PP>
        <PP nbr="2">
            <AMT>4561</AMT>
        </PP>
        <PP nbr="3">
            <AMT>5646354</AMT>
        </PP>
        <PP nbr="4">
            <AMT>321546</AMT>
        </PP>
        <PP nbr="5">
            <AMT>221321</AMT>
        </PP>
        <PP nbr="27">
            <AMT>3110.41</AMT>
        </PP>
</B15c> 
```

这是输出此数据的模式部分的示例

```
<xs:element name="B15C">
<xs:complexType>
    <xs:sequence>
        <xs:element maxOccurs="unbounded" name="PP">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="AMT" type="xs:decimal" />
                </xs:sequence>
                <xs:attribute name="nbr" type="xs:unsignedByte" use="required" />
            </xs:complexType>
        </xs:element>
    </xs:sequence>
</xs:complexType>
</xs:element> 
```

我是 XML 新手，所以我什至不确定这是否可以完成。如果除了使用 VBA 或手动更改 XML 文件之外，还有其他选择吗？

我有图片，但由于我是新用户，网站不允许我发布它们，对不起！

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:08:06.683

模式描述 XML 文件并验证它是否符合描述。它永远不会更改文件（除了以微不足道的方式，例如通过添加默认值）。

您想要将一个 XML 文件转换为另一个。用于此的工具是 XSLT。

您已经根据列和行描述了您的 XML，但是当我查看它时，我看到的只是元素。为了帮助您将其转换为不同的 XML 文件，我们需要知道您希望该 XML 文件看起来像什么 - 就 XML 而言，而不是“行和列”，这是 XML 外部的概念。

# sql - OVER ORDER BY 中的多个列

> ID：11691046
> 
> 赞同：10
> 
> 时间：2012-07-27T15:33:30.833
> 
> 标签：sql, sql-server, sql-order-by, row-number

有没有办法在 OVER ORDER BY 子句中指定多个列？

```
SELECT ROW_NUMBER() OVER(ORDER BY (A.Col1)) AS ID FROM MyTable A 
```

以上工作正常，但尝试添加第二列不起作用。

```
SELECT ROW_NUMBER() OVER(ORDER BY (A.Col1, A.Col2)) AS ID FROM MyTable A 
```

> ',' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-27T15:35:59.170

问题是列名周围的额外括号。这些都应该有效：

```
-- The standard way
SELECT ROW_NUMBER() OVER(ORDER BY A.Col1) AS ID FROM MyTable A
SELECT ROW_NUMBER() OVER(ORDER BY A.Col1, A.Col2) AS ID FROM MyTable A

-- Works, but unnecessary
SELECT ROW_NUMBER() OVER(ORDER BY (A.Col1), (A.Col2)) AS ID FROM MyTable A 
```

此外，当您提出 SQL 问题时，您应该始终指定要查询的数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:36:13.507

没有括号。

```
SELECT ROW_NUMBER() OVER(ORDER BY A.Col1, A.Col2) AS ID FROM MyTable A 
```

# php - 从 Magento 导出发票

> ID：11691050
> 
> 赞同：1
> 
> 时间：2012-07-27T15:33:38.597
> 
> 标签：php, api, magento, export-to-csv, invoices

我一直在尝试以特定格式导出我们所有的发票，以便导入 Sage 会计。我无法通过 Dataflow 导出，因为我需要导出客户 ID（奇怪的是它不可用）以及几个静态字段来表示税码等......</p>

这让我可以选择使用 API 导出数据并将其写入 CSV。我采用了一个我找到的示例脚本（抱歉不记得在哪里归功于它......）并进行了一些修改并提出了以下内容：

```
<?php
    $website = 'www.example.com';
    $api_login = 'user';
    $api_key ='password';

function magento_soap_array($website,$api_login,$api_key,$list_type,$extra_info){
$proxy = new SoapClient('http://'.$website.'/api/soap/?wsdl');
$sessionId = $proxy->login($api_login, $api_key);

$results = $proxy->call($sessionId,$list_type,1);

if($list_type == 'order_invoice.list'){
    /***  INVOICES CSV EXPORT START ***/
    $filename = "invoices.csv";
    $data = "Type,Account Reference,Nominal A/C Ref,Date,Invoice No,Net Amount,Tax Code,Tax Amount\n";
    foreach($results as $invoice){
        foreach($invoice as $entry => $value){
            if ($entry == "order_id"){
                $orders = $proxy->call($sessionId,'sales_order.list',$value);
            }
        }
        $type = "SI";
        $nominal = "4600";
            $format = 'Y-m-d H:i:s';
            $date = DateTime::createFromFormat($format, $invoice['created_at']);
        $invoicedOn = $date->format('d/m/Y');
        $invoiceNo = $invoice['increment_id'];
            $subtotal = $invoice['base_subtotal'];
            $shipping = $invoice['base_shipping_amount'];
        $net = $subtotal+$shipping;
        $taxCode = "T1";
        $taxAmount = $invoice['tax_amount'];

        $orderNumber = $invoice['order_id'];
        foreach($orders as $order){
            if ($order['order_id'] == $orderNumber){
                $accRef = $order['customer_id'];
            }    
        }
        $data .= "$type,$accRef,$nominal,$invoicedOn,$invoiceNo,$net,$taxCode,$taxAmount\n";
    }
    file_put_contents($_SERVER['DOCUMENT_ROOT']."/var/export/" . $filename, "$header\n$data");

    /***  INVOICES CSV EXPORT END ***/    
}else{
        echo "nothing to see here";
    }/***  GENERIC PAGES END ***/
}/*** END function magento_soap_array ***/

if($_GET['p']=="1")
{
magento_soap_array($website,$api_login,$api_key,'customer.list','Customer List');
}
else if($_GET['p']=="2")
{
magento_soap_array($website,$api_login,$api_key,'order_creditmemo.list','Credit Note List');
}
else if($_GET['p']=="3")
{
magento_soap_array($website,$api_login,$api_key,'sales_order.list','Orders List');
}
else if($_GET['p']=="4")
{
magento_soap_array($website,$api_login,$api_key,'order_invoice.list','Invoice List');
}
?> 
```

这似乎工作正常，但它非常慢，我不禁认为必须有更好、更有效的方法来做到这一点……</p>

有人有什么想法吗？

谢谢

马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:35:46.860

我想放假；会好的。因为只有一个带有 order_id 的键，所以不需要在找到 order_id 键后循环。

```
if ($entry == "order_id"){
    $orders = $proxy->call($sessionId,'sales_order.list',$value);
    break;
} 
```

并且您可以收集所有呼叫并以多路呼叫为例进行呼叫：

```
$client = new SoapClient('http://magentohost/soap/api/?wsdl');

// If somestuff requires api authentification,
// then get a session token
$session = $client->login('apiUser', 'apiKey');

$result = $client->call($session, 'somestuff.method');
$result = $client->call($session, 'somestuff.method', 'arg1');
$result = $client->call($session, 'somestuff.method', array('arg1', 'arg2', 'arg3'));
$result = $client->multiCall($session, array(
     array('somestuff.method'),
     array('somestuff.method', 'arg1'),
     array('somestuff.method', array('arg1', 'arg2'))
));

// If you don't need the session anymore
$client->endSession($session); 
```

[资源](http://www.magentocommerce.com/api/soap/introduction.html)

# android - 无法在片段中使用调用曾经想过我导入相应的库

> ID：11691052
> 
> 赞同：0
> 
> 时间：2012-07-27T15:33:50.437
> 
> 标签：android

所以这里是我对导入片段库（v4.jar）目的的理解。因为开发者想要使用和遵循新的 Fragment 的编码方式，但是这样会导致在运行 android 2.xx 的旧设备上出现兼容性问题，因此，在使用 Fragment 的项目中，开发者必须导入 v4.x 版本。 jar 库，以便旧设备知道哪些片段 API 并能够在应用程序中调用它们。如果这是正确的，我想在导入库后，android:minSdkVersion 应该能够设置为旧版本，例如 8（市场的 93%），而不是 l0，因为项目已经导入了库。

但是当我使用片段中的方法时，例如，实例化方法，我得到了这个错误：

调用需要 API 级别 11（当前最低为 8）：android.app.Fragment#instantiate

很明显，sdk 想让我将我的 android:minSdkVersion 切换到 11，但是导入库的目的是什么？通过这样做，在 android 2.xx 上运行的旧设备将无法使用此应用程序。有人可以解释这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:47:58.883

听起来您正在导入错误的`Fragment`库。

这个需要 API 级别 11（Android 3.0）：http: [//developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

这个，在支持库中可用，需要 API 级别 4（Android 1.6）：http: [//developer.android.com/reference/android/support/v4/app/Fragment.html](http://developer.android.com/reference/android/support/v4/app/Fragment.html)

此外，您应该知道您需要使用`FragmentManager`支持库中的可用功能。

`Fragment`在 Android 3.0+ 上使用支持 API 没有任何缺点。

# jquery - jQuery 选择器 by data-id - 从数组中选择多个 id

> ID：11691054
> 
> 赞同：0
> 
> 时间：2012-07-27T15:33:58.800
> 
> 标签：jquery, jquery-selectors

在显示项目列表的模式表单上，我想标记已选择的项目。有没有办法一次选择几个元素提供一个 id 数组？

例子：

```
$('.searchable').find('[role~=item]') 
```

返回

```
<tr role=​"item character" data-id=​"1">​…​&lt;/tr>​
<tr role=​"item character" data-id=​"2">​…​&lt;/tr>​
<tr role=​"item character" data-id=​"3">​…​&lt;/tr>​
<tr role=​"item character" data-id=​"4">​…​&lt;/tr>​ 
```

但我想标记已经选择的项目，将它们添加为“选定”类。我得到了一个数组中的选定项目。示例：数组 = [1,3]

有没有办法做这样的事情：

```
$('.searchable').find('[role~=item][data-id=array') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:40:02.490

您可以使用 each 遍历数组并在数组中的每个元素中执行操作，

```
 jQuery.each(array, function(i, item) {
     $(item).data("id");  
 }; 
```

或者你可以尝试这样的事情，

```
var filtered = $('.searchable').find(function(){
   if(array.indexOf(this.val(), 0)
        return $(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:49:35.433

```
var Array = [1,3], 
    elems;

$.each(Array, function(i,e) {
    elems.add( $('[role~=item][data-id="'+e+'"]', '.searchable') );
});

elems.addClass('highlight'); 
```

# javascript - 只执行一次jquery animate

> ID：11691055
> 
> 赞同：5
> 
> 时间：2012-07-27T15:34:07.020
> 
> 标签：javascript, jquery

我有以下功能：

```
$('.link1').click(function(){
    $("#div2").slideUp(function(){$("#div1").slideToggle();});
    $('html, body').animate({scrollTop: '600px'}, 800);
}); 
```

它切换一个 div 并向下滚动页面。问题是每次用户切换页面时再次向下滚动......我怎么能只在第一次点击时运行这个动画功能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T15:37:16.450

使用标志或设置数据属性以确保滚动动画仅在第一次单击时出现。

```
var flag=true;

$('.link1').click(function(){
    $("#div2").slideUp(function(){$("#div1").slideToggle();});
    if (flag) {
        $('html, body').animate({scrollTop: '600px'}, 800);
        flag = false;
    }
}); 
```

我猜`#div2`应该仍然切换，但它不应该在每次点击时滚动？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:36:57.633

jQuery .one() [http://api.jquery.com/one/](http://api.jquery.com/one/)

```
$('.link1').one( 'click', function(){
    $("#div2").slideUp(function(){$("#div1").slideToggle();});
    $('html, body').animate({scrollTop: '600px'}, 800);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:36:38.523

使用该`.one`函数绑定只触发一次的事件。

```
$('.link1').one('click', function(){
    $("#div2").slideUp(function(){$("#div1").slideToggle();});
    $('html, body').animate({scrollTop: '600px'}, 800);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T03:04:05.220

以下适用于 JQuery。

> **使用的 CSS：**

```
.cpos {
    position: relative;
    top: -1.65em;
    left: 1.8em;
} 
```

> **使用的 JQuery：**

```
var p=null; /* Initialize variable p. */
p=$("b").detach(); /* Detach every possible <b>b</b>-tags. */
var p=$("<b>Console loaded!</b>").addClass("cpos"); /* Do anything, like adding class. */
p.appendTo("#container"); /* Append new data to the anchor container. */ 
```

也许您可以在制作动画时将其用作参考。;)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-27T15:36:48.650

您可以在处理程序末尾取消绑定该单击处理程序，使其不再触发：

```
$('.link1').off('click'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-27T15:37:10.817

使用标志

```
var noRun = 0
$('.link1').click(function(){
    if(noRun==1) {
      return
     }
     noRun = 1  
    $("#div2").slideUp(function(){$("#div1").slideToggle();});
    $('html, body').animate({scrollTop: '600px'}, 800);
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-27T15:37:19.890

您可以保存一个简单的“令牌”来检查是否是第一次以这种方式触发点击：

```
$('.link1').click(function(){ 
    if(!$(this).data('isFirstTime')) {
        $("#div2").slideUp(function(){$("#div1").slideToggle();}); 
        $('html, body').animate({scrollTop: '600px'}, 800); 
        $(this).data('isFirstTime', true);
    }
}); 
```

这应该可以防止进一步点击

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-27T15:38:35.980

这应该这样做

```
(function(){
    var first=true;
    $('.link1').click(function(){
        if (first){
            first=false;
            $("#div2").slideUp(function(){$("#div1").slideToggle();});
            $('html, body').animate({scrollTop: '600px'}, 800);
        }
    });
})(); 
```

# xml - 如何在 SOAP UI 中传递参数

> ID：11691060
> 
> 赞同：1
> 
> 时间：2012-07-27T15:34:18.580
> 
> 标签：xml, soap, soapui

我正在尝试将 SOAP api 与 SOAPUI 一起使用。WSDL 中描述的“get”操作如下所示：

```
 <soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:MarketingCenter" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
       <soapenv:Header/>
       <soapenv:Body>
          <urn:Get soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
             <Authentication xsi:type="urn:Authentication">
                <!--You may enter the following 6 items in any order-->
                <Username xsi:type="xsd:string">myUserName</Username>
                <Password xsi:type="xsd:string">mypassword</Password>
                <CustomerId xsi:type="xsd:int">29833</CustomerId>
                <Level xsi:type="xsd:int">0</Level>
                <Source xsi:type="xsd:string">?</Source>
                <Options xsi:type="xsd:int">0</Options>
             </Authentication>
             <Method xsi:type="xsd:string">keyword.list</Method>
             <Arguments xsi:type="urn:ArrayOfKeyValuePairs" soapenc:arrayType="urn:KeyValuePair[]"/>
          </urn:Get>
       </soapenv:Body>
    </soapenv:Envelope> 
```

但是，当我运行此操作时，会出现以下错误：

```
 <SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns4="urn:MarketingCenter">
   <SOAP-ENV:Body>
      <ns4:GetResponse>
         <return xsi:type="ns4:GetResponseData">
            <Data xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="xsd:anyType[0]" xsi:nil="true"/>
            <Status>
               <ErrorCode xsi:type="xsd:int">1</ErrorCode>
               <ErrorString xsi:type="xsd:string">One or more of the arguments were invalid</ErrorString>
               <ErrorDetails xsi:type="xsd:string">One or more of the arguments were invalid</ErrorDetails>
            </Status>
         </return>
      </ns4:GetResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我不确定我应该在哪里，但参数列表，或者如何格式化这个列表。我确实意识到他们想要一个参数数组，但是我应该把这个数组放在哪里？无论我应该在哪里输入其他值，都会有一个“？”，所以我不确定在哪里输入这个 argumentw 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:40:29.793

希望您在这里输入实际值：

```
<Authentication xsi:type="urn:Authentication">
    <!--You may enter the following 6 items in any order-->
    <Username xsi:type="xsd:string">myUserName</Username>
    <Password xsi:type="xsd:string">mypassword</Password>
    <CustomerId xsi:type="xsd:int">29833</CustomerId>
    <Level xsi:type="xsd:int">0</Level>
    <Source xsi:type="xsd:string">?</Source>
    <Options xsi:type="xsd:int">0</Options>
</Authentication> 
```

参数列表只是`Username`, `Password`,`CustomerId`等。而不是`myUserName`,`mypassword`放入服务所期望的任何内容。

据，直到...为止：

```
<Arguments xsi:type="urn:ArrayOfKeyValuePairs" soapenc:arrayType="urn:KeyValuePair[]"/> 
```

这可能看起来像：

```
<urn:Get>
    ...
    <Arguments xsi:type="urn:ArrayOfKeyValuePairs" soapenc:arrayType="urn:KeyValuePair[5]">
        <KeyValuePair>
            <Key xsi:type="xsd:string">foo</Key>
            <Value xsi:type="xsd:string">bar</Value>
        </KeyValuePair>
        <KeyValuePair>...</KeyValuePair>
        <KeyValuePair>...</KeyValuePair>
        <KeyValuePair>...</KeyValuePair>
        <KeyValuePair>...</KeyValuePair>
    </Arguments>
</urn:Get> 
```

其中的内容取决于服务如何定义该类型（根据 WSDL只是一个`<Key>`元素和一个元素）。`<Value>`确保方括号 ( `[5]`) 中的数字与`<KeyValuePair>`元素的数量相匹配。

# algorithm - 如何有效地分割图像？

> ID：11691069
> 
> 赞同：0
> 
> 时间：2012-07-27T15:34:44.430
> 
> 标签：algorithm, opencv, computer-vision, image-segmentation

我搜索了一种在不同部分分割图像的解决方案（特别是显着性图（见图））。我知道一些解决方案，例如Pedro F. Felzenszwalb[的基于图形的分割](https://cs.brown.edu/people/pfelzens/papers/seg-ijcv.pdf)，但是对于大图像，我的实现非常慢。还有其他解决方案吗？ [![地图](../Images/af42aa14ad21bc8d907e9ae1d39508ea.png)](https://i.stack.imgur.com/X5vOP.jpg)

问候，命运

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:18:41.807

命运，

这种细分的具体目标是什么？您是否只是想在静止图像中创建单独的区域？您是否正在寻找对象并分割图像以找到 ROI 以供以后工作？

您对细分目标越具体，您可以越具体地定制您的代码。通过阈值化对图像进行二值化，或通过特征检测将其分成更小的块，可以显着加快代码速度。

我能想到的在 OpenCV 库中实现的唯一其他通用图像分割算法是分水岭算法。您可以在文档中找到它，或者查看 Laganiere 的 OpenCV 2 计算机视觉应用程序编程手册，其中包含关于这两种算法的优秀教程。

# java - Apache Camel 条件路由

> ID：11691074
> 
> 赞同：10
> 
> 时间：2012-07-27T15:35:01.753
> 
> 标签：java, routing, cxf, apache-camel, apache-karaf

我有一个有两个操作的服务。

```
RegisterUser
UpdateUser 
```

我有骆驼溃败：

```
<camel:route id="myRoute">
    <camel:from uri="cxf:bean:myListenerEndpoint?dataFormat=POJO&amp;synchronous=true" />            
    <camel:bean ref="processor" method="processMessage"/>
    <camel:to uri="xslt:file:resources/service/2.0.0/UserRegistration.xsl"/>
    <camel:to uri="cxf:bean:myTargetEndpoint"/>
</camel:route> 
```

在我的处理器 bean 中，当我指定时：

```
RegisterUser registerUser = exchange.getIn().getBody(RegisterUser.class); 
```

我得到了注册用户对象。一切正常。问题是我希望骆驼有条件地路由我的请求，例如：

如果服务操作是`RegisterUser`我想将消息路由到我的特定 bean，如果服务操作是`UpdateUser`我想将消息路由到另一个 bean。

我曾尝试使用骆驼 xPath，但它似乎不起作用。

```
<camel:route id="myRoute">
    <camel:from uri="cxf:bean:myListenerEndpoint?dataFormat=POJO&amp;synchronous=true" />  
    <camel:choice>
        <camel:when>
            <camel:xpath>
                //RegisterUser
            </camel:xpath>
            <camel:bean ref="processor" method="processMessage"/>
            <camel:to uri="xslt:file:resources/service/2.0.0/UserRegistration.xsl"/>
        </camel:when>
    </camel:choice>                        
    <camel:to uri="cxf:bean:myTargetEndpoint"/>
</camel:route> 
```

我正在寻找如何设置骆驼以路由到不同的目标，但没有找到任何东西。也许有人知道问题出在哪里？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T20:45:40.100

所需操作的信息将在消息的标题中。

您要查找的标头称为“操作名称”

所以这是一个例子：

```
<camelContext xmlns="http://camel.apache.org/schema/blueprint">
    <route id="example">
        <from uri="cxf:bean:myListenerEndpoint?dataFormat=POJO&amp;synchronous=true" />
        <log message="The expected operation is :: ${headers.operationName}" />
        <choice>
            <when>
                <simple>${headers.operationName} == 'RegisterUser'</simple>
                    <bean ref="processor" method="processMessage"/>
                <to uri="xslt:file:resources/service/2.0.0/UserRegistration.xsl"/>
            </when>
            <when>
                <simple>${headers.operationName} == 'UpdateUser'</simple>
                <!-- Do the update user logic here -->
                <bean ref="processor" method="updateUser" />
            </when>
        </choice>
    <to uri="cxf:bean:myTargetEndpoint"/>
    </route>
</camelContext> 
```

（请注意，该示例使用的是 apache aries 蓝图 - 但对于 spring，除了命名空间之外，它将是相同的）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T18:31:13.513

尝试为此使用[骆驼简单](http://camel.apache.org/simple.html)表达式而不是xpath...

```
<when><simple>${body} is 'com.RegisterUser'</simple><to uri="..."/></when> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-27T18:32:29.163

Spring XML route 就我而言，我使用入站 Jetty EP。我检查请求中的参数。输入 URL [http://localhost:8080/srv?alg=1](http://localhost:8080/srv?alg=1)

```
 <choice id="_choice1">
    <when id="_when1">
        <simple>${in.header.alg} == '1'</simple>
        <log id="_log10" message="LOG ALG 1"/>
    </when>
    ...
    <otherwise id="_otherwise1">
        <setFaultBody id="_setFaultBody1">
            <constant>Return message about ERROR</constant>
            </setFaultBody>
    </otherwise>
</choice> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-25T12:21:27.723

```
final CamelContext context = exchange.getContext();
if (isAlive) {
    context.startRoute("table-reader-route");
    log.info("starting dailycase route= " + response);
} else {
    context.stopRoute("table-reader-route");
    log.info("stoping dailycase route= " + response);
} 
```

# iphone - iOS facebook sdk 如何下载相册、个人资料照片数据

> ID：11691075
> 
> 赞同：5
> 
> 时间：2012-07-27T15:35:03.010
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我想让我的 iPhone 应用程序用户查看并从他们的 facebook 个人资料照片中选择，下载照片以用作个人资料图片。我目前正在使用 Facebook SSO SDK 并成功登录并访问 Graph 信息。尝试访问照片信息（成功 SSO 登录后）使用

```
[facebook requestWithGraphPath:@"me/albums"]; 
```

但我只是得到一个空的数据对象作为回报。我试过使用[Facebook API explorer](https://developers.facebook.com/tools/explorer)，它非常有帮助，它确实为我提供了 /picture 和 /photos 和 /albums 的数据。出于某种原因，使用 requestWithGraphPath 和我/相册、我/图片或我/照片时，我没有得到相同的数据。只是简单的“我”可以正常工作，但没有给我任何图片信息。谁能告诉我我做错了什么？

注意：这是 API 参考：[Facebook Graph API](https://developers.facebook.com/docs/reference/api/user/)

我确实让图片配置文件像这样工作：

```
[facebook requestWithGraphPath:@"me?fields=picture"]; 
```

更新：真的我想要所有的个人资料照片，这是一个相册，所以我需要知道如何通过 iOS 访问相册。我现在已经成功获取的头像。

我根据API为相册添加了权限“user_photos”和“friends_photos”：

```
 NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_likes",
                            @"user_birthday",
                            @"email",
                            @"publish_stream",
                            @"publish_actions",
                            @"user_photos",
                            @"friends_photos",
                            nil];
    [facebook authorize:permissions]; 
```

当我说我得到空数据时，这是返回的 JSON 结果（在 request:didLoad: 中）：

```
 {
    data =     (
    );
} 
```

从我的日志文件输出：

```
- (void) request:(FBRequest *)request didLoad:(id)result{
    NSLog(@"%@",result);

} 
```

最后说明：最终起作用的是使用另一台设备，它更新了我的权限，然后一切都开始工作了！我最好的猜测是模拟器和我的 iPhone 没有更新我的 facebook 权限，所以我被拒绝访问照片并获得一个空的数据数组。

这个 SO 问题也有很大帮助：[如何在 iPhone SDK 中获取 Facebook 相册的照片？](https://stackoverflow.com/questions/4921945/how-to-get-photos-of-a-facebook-album-in-iphone-sdk?rq=1)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:25:08.663

为了未来的观众，我将回答我自己的问题，因为我还没有收到其他人的完整答案。

首先，您必须拥有正确的权限，无论是`"user_photos"`还是`"friends_photos"`。然后你必须确保你的测试设备更新你的权限——我认为重启设备是最终为我做的。

完成此操作后，您可以在通过 SSO 登录后，使用以下调用获取专辑的 JSON 列表：

```
[facebook requestWithGraphPath:@"me/albums" andDelegate:self]; 
```

这将为 JSON 数组（在 key 下`data`）提供有关每个专辑的各种信息，包括 ID。要获取特定相册 ID（例如“123456789”）的照片列表，请执行以下操作：

```
NSString * albumId = @"123456789";
NSString * path = [NSString stringWithFormat:@"%@/photos", albumId];
[facebook requestWithGraphPath:path andDelegate:self]; 
```

您的响应当然会通过您可以处理 JSON 数据的`FBRequestDelegate`方法来实现。`request:didLoad`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:38:44.530

下载 FBGraph Api 文档文件夹，然后将其添加到您的文件夹中。并阅读 facebook 开发者网站[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)上的说明。

这是示例代码 -[示例代码](http://github.com/reallylongaddress/iPhone-Facebook-Graph-API)

在此您将获得用户个人资料图片`UIAlertView`。你可以把它显示在你想要的地方。

# tridion - 我可以为自己的目的获得 SDL Tridion 虚拟机而无需支付许可费用吗？

> ID：11691078
> 
> 赞同：3
> 
> 时间：2012-07-27T15:35:30.607
> 
> 标签：tridion, tridion-2011

是否可以让我自己学习 SDL Tridion VMware？我在论坛的某个地方（在 Nuno 的一篇帖子中）看到过可能是 stackoverflow 或 tridon 论坛，如果我为 SDL 项目工作，我可以从 SDL Tridion 获得 VMWare。

我咨询了 SDL 客户支持，但他们没有提供任何服务 :-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T16:11:47.070

这是一个常见问题，我在 2 年前写了一篇关于在此处获取个人开发环境的博客：

[http://www.urbancherry.net/blogengine/post/2010/02/06/The-Fifth-Environment.aspx](http://www.urbancherry.net/blogengine/post/2010/02/06/The-Fifth-Environment.aspx)

据我所知（如@Ram 和@Nuno 所说），如果不是员工、合作伙伴、客户或 SDL Tridion MVP，目前无法获得评估许可证

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T16:10:38.443

正如我在博客中所说，这是获得 Tridion 许可证的方法：

*   您为[SDL](http://www.sdl.com/)（SDL 员工）工作
*   您为[SDL (WCM) 合作伙伴工作](http://www.sdl.com/community/partner/partner-programs/tridion-partners/)
*   您为 SDL (WCM) 客户工作
*   您是[SDL Tridion MVP](https://sdltridionworld.com/community/mvp_award/index.aspx)

所以，选项没有改变。如果上述任何一项适用于您，您可以获得许可证。

努诺

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T15:59:43.693

您可以构建自己的 VM 来探索您是 SDL Tridion 合作伙伴还是为满足客户需求而工作。在这两种情况下，您都需要许可证（通过合作伙伴协议/客户许可证合同）。除了 Tridion 许可证，您还需要拥有非 tridion 软件（如 VMware、Windows 操作系统等）的许可证。

这是一篇关于如何构建 VM 的文章： [https ://www.sdltridionworld.com/articles/sdltridion2011/tutorials/creating-development-vm-1.aspx](https://www.sdltridionworld.com/articles/sdltridion2011/tutorials/creating-development-vm-1.aspx)

此外，如果您是合作伙伴，您可以与您的 SDL 联系人交谈，看看您是否可以获得销售 VM 映像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T07:35:53.597

我在博客上写过与 Chris 和 Nuno 类似（相同）的想法。

*   [+1 到第五个 Tridion 环境](http://www.createandbreak.net/2011/11/matching-software-licensing-to-sdlc.html#fifth)
*   阅读[如何开始](http://www.createandbreak.net/2011/11/how-to-get-to-play-with-sdl-tridion.html)获取链接组和招聘人员的一些潜在客户

还可以考虑将[培训](http://www.sdl.com/services/education-certification/training-product/)作为熟悉软件的至少一种临时方式。SDL[有时会提供折扣](http://www.createandbreak.net/2012/05/train-and-untrained-which-are-you.html)。

# matlab - 三维向量的Matlab乘积

> ID：11691079
> 
> 赞同：4
> 
> 时间：2012-07-27T15:35:35.020
> 
> 标签：matlab, matrix, matrix-multiplication

我希望我的问题有一个非常简单的解决方案。我只是找不到它：

假设您有两个向量（一个是列向量，一个是行向量）A、B：

```
A = [1,2,3]
B = [4;5;6] 
```

如果我们将它们相乘如下，我们得到一个矩阵：

```
>> B*A
ans =
 4     8    12
 5    10    15
 6    12    18 
```

现在我的问题是：我有两个大小的 3D 矩阵`m × n × p`和`m × n × q`

想象沿着维度**m**和**n**我们有像素，并且对于每个像素我们有一个向量（长度 p 或 q）。现在我想要的是**为每个相应的像素**乘以两个图像的向量，这样对于每个像素，我得到一个**矩阵**，因此最终得到一个 4D 矩阵。

我如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T05:46:17.937

Matlab 中的循环不再是值得害怕或避免的*事情*。

当然，在使用它们时应该非常小心，但是，JIT 可以处理多种循环，甚至可以在内置函数之外提高性能。

考虑以下测试用例：

```
clc

m = 512;   n = 384;
p = 5;     q = 3;

A = rand(m,n,p); % some sample data
B = rand(m,n,q); % some sample data

%% non-loop approach

tic
A2 = reshape(A,[],p);
B2 = reshape(B,[],q);
C2 = arrayfun(@(ii) A2(ii,:)'*B2(ii,:),1:m*n,'uni',false);
C0 = permute(reshape(cell2mat(C2),p,q,m,n),[3 4 1 2]);
toc

%% looped approach, simplest

tic
C = zeros(m,n,p,q);
for mm = 1:m
    for nn = 1:n        
        C(mm,nn,:,:) = ...
            squeeze(A(mm,nn,:))*squeeze(B(mm,nn,:)).';
    end
end
toc

% check for equality
all(C0(:) == C(:))

%% looped approach, slightly optimized

tic
C = zeros(m,n,p,q);
pp = zeros(p,1);
qq = zeros(1,q);
for mm = 1:m
    for nn = 1:n
        pp(:) = A(mm,nn,:);
        qq(:) = B(mm,nn,:);
        C(mm,nn,:,:) = pp*qq;
    end
end
toc

% check for equality
all(C0(:) == C(:))

%% looped approach, optimized

tic
C  = zeros(p,q,m*n);
A2 = reshape(A,[],p);
B2 = reshape(B,[],q);
for mn = 1:m*n
    C(:,:,mn) = A2(mn,:).'*B2(mn,:);
end
C = permute(reshape(C, p,q,m,n), [3,4,1,2]);
toc

% check for equality
all(C0(:) == C(:)) 
```

结果：

```
Elapsed time is 3.955728 seconds.
Elapsed time is 21.013715 seconds.
ans =
     1
Elapsed time is 1.334897 seconds.
ans =
     1
Elapsed time is 0.573624 seconds.
ans =
     1 
```

无论性能如何，我还发现最后一个案例比非循环案例更直观和可读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:29:22.520

通过一些[重塑](http://www.mathworks.nl/help/techdoc/ref/reshape.html)，[arrayfun](http://www.mathworks.nl/help/techdoc/ref/arrayfun.html)和[permute](http://www.mathworks.nl/help/techdoc/ref/permute.html)：

```
m=5;
n=4;
p=3;
q=2;
A=randi(10,m,n,p); %some sample data
B=randi(10,m,n,q); %some sample data

A2=reshape(A,[],p);
B2=reshape(B,[],q);
C2=arrayfun(@(ii) A2(ii,:)'*B2(ii,:),1:m*n,'uni',false);

C=permute(reshape(cell2mat(C2),p,q,m,n),[3 4 1 2]); 
```

分解：

*   前两个 reshape 将 A 和 B`mxnx(p or q)`矩阵更改为`(m*n)x(p or q)`格式
*   这样arrayfun 可以轻松地循环遍历它们以计算行的向量积
*   然后 cell2mat，reshape 和 permute 将结果改回`mxnxpxq`格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:37:58.077

我使用rody_o的解决方案并对其进行了修改以摆脱重塑和置换：

```
C  = zeros(m*n, p, q);
A2 = reshape(A,[],p);
B2 = reshape(B,[],q);
for mn = 1:m*n
    C(mn,:,:) = A2(mn,:).' * B2(mn,:);
end 
```

# c# - 单元测试将参数传递给基本构造函数

> ID：11691082
> 
> 赞同：1
> 
> 时间：2012-07-27T15:35:39.170
> 
> 标签：c#, unit-testing, abstract-base-class

我有以下代码：

```
 using System;
        using NUnit.Framework;
        using Rhino.Mocks;

        public class A
        {
        }

        public class B
        {
        }

        public interface IStatementExecutor
        {
            void Exec(string statement);
        }

        public abstract class Foo<T>
        {
            private readonly IStatementExecutor _statementExecutor;
            private readonly string _targetSegment;

            protected Foo(IStatementExecutor statementExecutor, string targetSegment)
            {
                _statementExecutor = statementExecutor;
                _targetSegment = targetSegment;
            }

            public void Update(T item)
            {
                _statementExecutor.Exec("sp_" + _targetSegment + "Update");
            }
        }

        public class Bar : Foo<A>
        {
            public Bar(IStatementExecutor statementExecutor)
                : base(statementExecutor, "ATable")
            {
            }
        }

        public class Baz : Foo<B>
        {
            public Baz(IStatementExecutor statementExecutor)
                : base(statementExecutor, "BTable")
            {
            }
        }

        [TestFixture]
        public class Foo_Tests
        {
            [Test]
            public void Update_CallsStatementExecutorWithTableName()
            {
                const string tableName = "TestTable";
                var mockStatementExecutor = MockRepository.GenerateMock<IStatementExecutor>();
                mockStatementExecutor.Expect(m => m.Exec("sp_" + tableName + "Update"));
                var sut = MockRepository.GeneratePartialMock<Foo<A>>(mockStatementExecutor, tableName);
                var testModel = new A();

                sut.Update(testModel);

                mockStatementExecutor.AssertWasCalled(m => m.Exec("sp_" + tableName + "Update"));
            }
        } 
```

我已经对基类进行了单元测试`Foo<T>`。由于已经涵盖了基类，我不想为派生类`Bar`和`Baz`.

我在派生类中唯一真正关心的是正确的字符串`target`是否传递给基类。

我正在努力解决如何在不破坏派生类封装或编写冗余单元测试的情况下对其进行单元测试。

所以，问题是，我如何测试正确的值是否从派生类传递给基类的`target`参数？

（如果您的答案是“使用组合...”，请使用从上面修改的代码示例进行备份。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:01:57.110

认为我更有可能通过 Bar 和 Baz 上的其他方法进行测试，因为如果您将 ZTable 而不是 BTable 放在那里，您会期望会发生一些不好的事情

您可以向 Foo 添加一个方法，该方法将返回曾经传递给它的内容

然后在创建后代之后调用它并根据预期值进行验证。

或者你可以做类似的事情

```
public class Bar : Foo<A>     
{         
  private static String _tableName = "ATable";
  public String  TableName {get {return _tableName;}}
  public Bar() : base(_tableName)         
  {         
  }     
} 
```

然后你可以测试 testBar.TableName

另一个选项是 T 是具有 TableName 属性的结构或类，那么您不需要 Bar 和 Baz 后代，只是为了这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:44:25.710

您的 Foo 和 Bar 单元测试方法可以调用包含通用测试代码的辅助方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:50:52.700

您可以通过多种方式做到这一点。一种方法是使用像 TypeMock 这样的模拟框架来有效地模拟基于的类，从而从 TypeMock 获取有关内部变量的更多信息。

但是，从您的帖子中并不清楚，*为什么*基类在 bar 类的特定原因中使用很重要。这不清楚，因为您无法对其进行测试。即没有可以监控的外部行为以保证以预期的方式`Bar`使用`Foo`。您*可以*重定向控制台输出，然后监视该输出以进行验证。但是，我认为这并不是您真正想要的。

您应该提供一个更可测试的示例；不只是输出文本的东西，还有你可以通过测试观察到的真实行为。

# android - Android活动抽象方法调用

> ID：11691084
> 
> 赞同：0
> 
> 时间：2012-07-27T15:35:44.700
> 
> 标签：android, abstract-class, android-activity

我有一个名为 BaseActivity (extends Activity) 的抽象类，它有一个函数

公共抽象无效 onLocationChanged();

所有其他活动都扩展了这个类。当我调用 BaseActivity 的 onLocationChanged() 方法时，我希望实现此方法的所有其他类都会调用它们的 onLocationChanged() 方法或至少调用当前位于堆栈顶部的活动，但似乎只有一个活动调用方法，它不是堆栈顶部的方法。

有人可以帮忙吗？

这是我的代码的相关部分：

```
abstract class BaseActivity extends FragmentActivity {
public static MyLocation location = null;
 @Override
 protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     if (location == null) {
         location = new MyLocation(this);
     }
 }
 public abstract void onLocationChanged();
}

public class MyLocation {
    BaseActivity parrent;
    public MyLocation(BaseActivity act) {          
        public MyLocation(BaseActivity act) {       
        this.parrent = act;      
    }
   public void refreshMyLocation() {
     /*location get refreshed here*/
     this.parrent.onLocationChanged();
   }
}

public class MainActivity extends BaseActivity {
 @Override
 public void onStart() {
         BaseActivity.location.refreshMyLocation();
 }

 public void onLocationChanged() {
   /*some stuff*/
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:40:47.990

您正在调用在基本活动实例上更改的位置，而不是一次全部更改。没有你的代码，我不知道是哪一个。但简单地在基类中声明一个方法并不意味着它将在每个实现它的类上调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:52:19.750

I dont understand why do you want to do that. I think you should need a Serivice that implements onLocationChanged and communicates with activities via Handler or BroadcastReceiver.

# .net - Web Scraping --- 处理此指令时发生错误

> ID：11691087
> 
> 赞同：0
> 
> 时间：2012-07-27T15:35:50.013
> 
> 标签：.net, vb.net, web-scraping

我正在尝试在以下[网站](http://iso-ne.com/sys_ops/op_frcstng/7day_frcst/index.html)上抓取表格：

它给了我`"[an error occurred while processing this directive]"`

它一直工作到昨天并开始抛出错误。我在代码中尝试过`"URLDownloadToFile"`，但都抛出了同样的错误。`"HTTPResponseStream"``VB.net`

有什么想法吗？我不是在服务器端编程。这是一个简单的网络/屏幕抓取。

添加代码片段 -

```
 Dim web_address As String
    'web_address = "http://iso-ne.com/sys_ops/op_frcstng/7day_frcst/index.html"
    web_address = "http://iso-ne.com/sys_ops/op_frcstng/csvdocs/seven_day_forecast2012-07-27-10-13.csv"

    'Dim myReq As HttpWebRequest = WebRequest.Create(web_address)
    'Dim myReq_response As Net.HttpWebResponse
    'myReq_response = myReq.GetResponse()
    'Dim sr As IO.StreamReader = New StreamReader(myReq_response.GetResponseStream) 'Imports System.IO
    Dim strng As String
    'strng = sr.ReadToEnd()

    Dim fileDownloadReq As HttpWebRequest
    Dim fileDownloadResponse As HttpWebResponse
    ' fileDownloadReq = Net.HttpWebRequest.Create(web_address)
    'fileDownloadReq.Method = "get"
    ' fileDownloadResponse = fileDownloadReq.GetResponse

    'Get the data from the page
    'Dim stream As StreamReader = New StreamReader(fileDownloadResponse.GetResponseStream())
    'strng = stream.ReadToEnd()
    'fileDownloadResponse.Close()

    Dim genscapeDataFile As Long
    Dim raw_file_path As String
    raw_file_path = "C:\NEPOOL\ISONE_Seven_day_Raw.csv"
    genscapeDataFile = URLDownloadToFile(0, web_address, raw_file_path, 0, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:52:05.893

这是托管网页中的错误，而不是您的代码中的错误。每当您遇到此类莫名其妙的问题时，如果可能，您应该直接导航到该页面，并验证它是否按预期工作。

如果您确实在 IE 中导航到此页面，您将看到相同的错误消息。

# c# - 不一致的上下文状态

> ID：11691089
> 
> 赞同：1
> 
> 时间：2012-07-27T15:35:57.290
> 
> 标签：c#, linq, c#-4.0, linq-to-entities

我目前正在运行一个具有非常长的 Linq 事务的应用程序。一切都必须在这一事务中发生，我不确定对象是否或在何处相互干扰。

当我尝试保存更改时，我看到此警告出现：

> System.InvalidOperationException：对数据库的更改已成功提交，但在更新对象上下文时发生错误。ObjectContext 可能处于不一致的状态。内部异常消息：AcceptChanges 无法继续，因为对象的键值与 ObjectStateManager 中的另一个对象冲突。在调用 AcceptChanges 之前确保键值是唯一的。

根据我在谷歌上搜索的内容，人们发现了很多一次性的解决方案（很少与冲突的键有关），而且他们通常不会发布提示是什么（当然总比没有好）。

我不清楚的是如何找出这个问题的原因？

我在不同的地方更新了很多记录，让它们超出了范围。我猜.NET 编译器知道如何在不让它们通过 GC 的情况下跟踪这些对象，因此它可以在最后提交所有内容。并且所有更改似乎最终都在数据库后记中。

例子：

```
 // create new A, SA for new incoming tasks
            SF_SUB_AREA sa = null;
            SF_AREA a = null;
            if (isNewSA)   // new SA
            {
                areaID = MakeSalesForceGUID();
                a = new SF_AREA
                {
                    ID = areaID,
                    DESCRIPTION = t.DESCRIPTION,
                    CU_NUMBER = Convert.ToString(t.CU_NUMBER),
                    FC = t.FC,
                    PROJECT = cp.ID,
                    DELETE_FLAG = "I"
                };
                ctx.SF_AREA.AddObject(a);

                SAID = MakeSalesForceGUID();
                sa= new SF_SUB_AREA
                {
                    ID = SAID,
                    PROJECT_REGION = t.CR,
                    AREA = areaID,
                    DELETE_FLAG = "I"
                };
                ctx.SF_SUB_AREA.AddObject(sa);
            }
            else       // old SA
            {
                List<SF_AREA> lia = (from a2 in ctx.SF_AREA
                                             join a2 in ctx.SF_SUB_AREA on a2.ID equals sa2.AREA
                                             where sa2.ID == t.SUB_AREA
                                             select ct2).ToList();
                if ((lia != null) && (lia.Count > 0))
                {
                    a = lia[0];
                    a.DELETE_FLAG = "U";
                    a.CLIENT_UNIT_NUMBER = Convert.ToString(t.CU_NUMBER);
                    a.DESCRIPTION = t.DESCRIPTION;
                    a.FC = t.FC;
                    a.PROJECT = cp.ID;
                } // TODO: throw an error here for else block

                List<SF_SUB_AREA> lisa = (from sa2 in ctx.SF_SUB_AREA
                                                              where sa2.ID == t.SUB_AREA
                                                              select sa2).ToList();
                if ((lisa != null) && (lisa.Count > 0))
                {
                    sa = lisa[0];
                    sa.PROJECT_REGION = t.AREA;
                    sa.AREA = lisa[0].AREA;
                    sa.DELETE_FLAG = "U";
                }
            }
            ...
            ctx.SaveChanges(); // left out the try/catch 
```

目前我只是在每次提交某些内容时创建新的上下文，但我不知道这是否可取。

```
 foreach (SF_MOVE_ORDER mo in liMO ) {
                using (SFEntitiesRM ctx2 = new SFEntitiesRM())  // new context for every MO since it goes into an unknown state after every commit
                {
                    List<SF_CLIENT_PROJECT> liCP = (from cp in ctx2.SF_CLIENT_PROJECT
                                                    where cp.ID == mo.CLIENT_PROJECT
                                                    select cp).ToList();
                    if ((liCP != null) && (liCP.Count > 0))
                    {
                        PerformMoveOrder(mo, liCP[0], ctx2);
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:44:05.873

通常出现这样的错误，最好从保存一个对象开始，然后一次构建一个复杂的对象。这样，您就可以开始找出问题所在。它最终可能会出现在您甚至没有预料到的对象图的某个位置。但我不会继续在上下文中抛出整个 LINQ 更新。将其分解为较小的保存并将其重建为大图，您会发现错误。

# mysql - 创建具有可变表名的mysql表

> ID：11691090
> 
> 赞同：0
> 
> 时间：2012-07-27T15:35:56.630
> 
> 标签：mysql

我正在尝试创建一个平台，可以在其中从 php 创建表并将其命名为提交者键入的变量。我这里的代码会导致 mysql 语法错误。我相信这是括号放置的问题，但我尝试过的每一种组合都不成功，有人能弄清楚吗？我去掉了不正确的括号以减少混淆

```
 <?php

if (isset($_POST['submit']))
{ 
$name=$_POST['name'];

mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());

mysql_query("CREATE TABLE '$name'(
id INT NOT NULL AUTO_INCREMENT,
PRIMARY KEY(id),
name VARCHAR(30),
age INT)")
or die(mysql_error());  

echo "Table Created!";

?>   <html><form method='POST'>..........</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:57:27.530

在 SQL 文本中的表名周围使用反引号：

```
mysql_query("CREATE TABLE `$name`( 
```

反引号是 MySQL 中标识符的默认分隔符。（注意：可以启用其他分隔符，但您并不想去那里。）

如果标识符是保留字，包含空格等，则需要反引号。（反引号在很多情况下可以省略，但在不需要时使用它们并没有错。基本上，想想规则作为“总是在标识符周围使用反引号”，并在方便时省略它们并且您确定它们不是必需的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:41:57.883

这可能有效：

```
if (isset($_POST['submit']))
{ 
$name=$_POST['name'];

mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());

mysql_query("CREATE TABLE ".$name."(
id INT NOT NULL AUTO_INCREMENT,
PRIMARY KEY(id),
name VARCHAR(30),
age INT)")
or die(mysql_error());  

echo "Table Created!";
}
?> 
```

我已经对其进行了测试，没有任何问题......它创建了具有这种结构的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:42:04.307

改成 ：`mysql_query("CREATE TABLE ".$name."(`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:43:34.547

您不要单引号表名。将它放在反引号中，以便它可以处理与保留字或字符匹配的名称。像这样

```
mysql_query("CREATE TABLE `$name`(
id INT NOT NULL AUTO_INCREMENT,
PRIMARY KEY(id),
name VARCHAR(30),
age INT)") 
```

您也可以不使用其他建议的答案之类的反引号，但如果您不想先检查表名与一堆 MySQL 保留字，这会更可靠。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T16:43:23.577

除非您完全信任输入数据，否则验证 $name 以 [防止 SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)非常重要。

# java - Java中的对象与扩展

> ID：11691095
> 
> 赞同：2
> 
> 时间：2012-07-27T15:36:09.733
> 
> 标签：java, object, extends

我可能错了，因为我对 Java 没有太多经验，但这里有一个问题。

我有一个包含许多方法的类（基本上它是一个简单的库）。

我创建了这个类的一个对象让我们说`MyLibrary obj = new MyLibrary(parameters);`

这些参数为库正确运行设置了任何必要的功能。

然后我可以打电话`obj.getSomething`//`obj.setSomething`等等`obj.createSomething`等等...

在我的主课中，我真的只需要一个这种库对象。

现在...不将它用作对象对我来说是否更有用，而是将其作为`extends`然后在库中创建一个函数，就像我会手动调用的构造函数一样？

* * *

**编辑：**

一类与MyLibrary 的关系非常密切。基本上，我有很多类做类似的事情，但有一些不同的更高层功能。所以我分离了**必须**在所有这些类中的方法。

它似乎与`shape`class 和`triangle`, `circle`, `square`example 非常相似。所以`MyLibrary`类似于`shape`包含所有基础的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:39:01.260

您所描述的非常类似于*实用程序类*，类似于 Java 的[`Collections`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html). 该类只有`static`方法和一个私有构造函数来防止实例化。这是 Java 中众所周知的惯用模式 - 您可以使用它来创建自己的方法组，以提供相关功能。

您根本不应该扩展甚至实例化实用程序类。从 Java-5 开始，您可以静态导入它们，这样您就可以使用它们的方法而无需显式引用它们的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:39:20.450

`extends`当您需要继承层次结构时使用。将您的代码放在两个单独的类中似乎更合乎逻辑，就像您现在拥有它一样。

此外，如果您的“库类”做了多个不相关的事情，它可能应该分成多个类 - 每个任务一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T15:40:05.793

你真的应该只`extends`在你有*is-a*关系时使用。所以，你可以想，我的主类**是**MyLibrary 还是我的类应该**有**一个 MyLibrary。

从您描述的问题来看，听起来 MyLibrary 是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:41:26.450

由于您提供的细节有限，您可能需要考虑[Singleton 模式](http://en.wikipedia.org/wiki/Singleton_pattern)。

`extends`只应在一个对象需要继承另一个对象的特性和功能时使用，因为它们非常密切相关。例如，如果您有一个`Shape`类，那么您将扩展`Shape`为 create `Circle`、`Square`和`Triangle`。在使用之前，`extends`您应该了解更多关于继承以及何时应该使用和不应该使用它的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T15:41:31.660

我会把它作为一个`static`类来使用。类似于数学类的 javas MATH 类[API](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)。您可以只使用该类的方法而不创建它的对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T15:42:24.307

好吧，如果您的课程执行实用功能，那么您应该将所有方法标记为`static`并使用类似的操作

```
MyLibrary.doSomething();
MyLibrary.createSomething();
MyLibrary.getSomething(); 
```

但这不允许您在类中保留一些数据成员，如果您保留它们，它们也将是静态的。

我认为这不`extends`适合你的情况。

此外，如果您只想保留一个对象，那么您应该查看`Singleton`只能为其创建一个实例的 A 类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T15:54:45.953

假设您只是在使用`MyLibrary`并且可能不会更改它，您应该使用使整个事物成为 Singleton 的包装器，正如[Code-Guru](https://stackoverflow.com/a/11691200/792725)已经提出的那样。

```
public class MyLibraryWrapper {
    private static MyLibrary instance = null;

    private MyLibraryWrapper() {}

    public static MyLibrary getInstance() {
        if (instance == null)
            instance = new MyLibrary();
        return instance; 
```

所以在你的代码中你会使用

```
MyLibraryWrapper.getInstance().getSomething(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-27T18:09:46.247

在 java 1.5 或更高版本中创建单例的最佳方法是使用 ENUM。

```
public enum Test { 
    INSTANCE;
} 
```

INSTANCE 是 Test 类的唯一实例。

# c++ - DOMElement 没有名为 'getFirstElementChild xercesc C++ 的成员

> ID：11691099
> 
> 赞同：1
> 
> 时间：2012-07-27T15:36:18.693
> 
> 标签：c++, xml, xerces-c

我正在编写一个名为 .xml 的解析器文件`GetConfig.cpp`。这是我的“GetConfig.h”头文件：

```
#include <xercesc/dom/DOM.hpp>
#include <xercesc/dom/DOMDocument.hpp>
#include <xercesc/dom/DOMDocumentType.hpp>
#include <xercesc/dom/DOMElement.hpp>
#include <xercesc/dom/DOMImplementation.hpp>
#include <xercesc/dom/DOMImplementationLS.hpp>
#include <xercesc/dom/DOMNodeIterator.hpp>
#include <xercesc/dom/DOMText.hpp>
#include <xercesc/dom/DOMNode.hpp>

#include <xercesc/parsers/XercesDOMParser.hpp>
#include <xercesc/util/XMLUni.hpp>
#include <xercesc/util/PlatformUtils.hpp>
#include <xercesc/util/XMLString.hpp> 
```

但是，当我尝试编译程序时，我得到：

```
/home/pribeiro/sandbox/GetConfig.cpp:372: error: 'class xercesc_2_2::DOMElement' has no member named 'getFirstElementChild'
/home/pribeiro/sandbox/GetConfig.cpp:381: error: 'class xercesc_2_2::DOMElement' has no member named 'getFirstElementChild'
/home/pribeiro/sandbox/GetConfig.cpp:392: error: 'class xercesc_2_2::DOMElement' has no member named 'getFirstElementChild'
/home/pribeiro/sandbox/GetConfig.cpp:396: error: 'class xercesc_2_2::DOMElement' has no member named 'getNextElementSibling' 
```

我不知道为什么我会得到那个......在那个声明中我使用：

```
DOMElement *volume = dynamic_cast<xercesc::DOMElement*>
                                        (volManager);
while(volume){
    // to the parsing here
 volume = volume->getNextElementSibling();
} 
```

我不确定......也许与版本有关`xercesc`？当我编译它时，`xercesc 3.1`它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T08:14:49.767

这些功能是在 Xerces 3 中引入的

您会在 Xerces 3 API 文档中看到它们：

[http://xerces.apache.org/xerces-c/apiDocs-3/classDOMElement.html](http://xerces.apache.org/xerces-c/apiDocs-3/classDOMElement.html)

但不在 Xerces 2 API 文档中：

[http://xerces.apache.org/xerces-c/apiDocs-2/classDOMElement.html](http://xerces.apache.org/xerces-c/apiDocs-2/classDOMElement.html)

字符串“getFirstElementChild”在 Xerces 3.1.1 源代码中出现了 31 次，但在 Xerces 2.8.0 源代码中根本没有出现：

```
erik@ubuntu:/tmp$ file=http://archive.apache.org/dist/xerces/c/2/sources/xerces-c-src_2_8_0.tar.gz
erik@ubuntu:/tmp$ curl -s $file | tar xfz - -O | grep getFirstElementChild | wc -l
0
erik@ubuntu:/tmp$ file=http://archive.apache.org/dist/xerces/c/3/sources/xerces-c-3.1.1.tar.gz
erik@ubuntu:/tmp$ curl -s $file | tar xfz - -O | grep getFirstElementChild | wc -l
31
erik@ubuntu:/tmp$ 
```

# extjs - EXTJS 4.1 如何在不重新加载 TreeStore 的情况下删除过滤器

> ID：11691100
> 
> 赞同：0
> 
> 时间：2012-07-27T15:36:21.113
> 
> 标签：extjs, filter, tree, extjs4, extjs4.1

我有一个 TreeStore 填充来自 Json 的数据。我正在对其应用过滤器。

`if ( !filter.filterFn(node) ) { node.remove(); }`

对于第一次搜索尝试，一切正常，但在第二次尝试中，并非所有数据都用于搜索。为了使用所有数据，我需要为存储执行 .load() 。但在这种情况下，将发送对服务器的请求并应用过滤器。有没有办法实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:20:11.920

我不确定我是否完全遵循您的问题，但我认为您想在应用新过滤器之前删除早期的过滤器。

您可以在调用之前添加一行以添加过滤器。

像这样的东西：

```
yourTreeStore.filters.clear(); 
```

（您要添加过滤器`yourTreeStore`的参考在哪里）`Ext.data.TreeStore`

# c++ - 使用旧 GLIBC 版本检测堆栈溢出

> ID：11691106
> 
> 赞同：2
> 
> 时间：2012-07-27T15:36:40.903
> 
> 标签：c++, linux, embedded

我们怀疑我们在多线程程序中遇到了堆栈溢出。然而，由于它是一个嵌入式应用程序，我们一直无法让 valgrind 等为它工作。此外，我们受限于使用不支持 flag 的 GCC 版本 v4.0.0 和 GLIBC v2.3.2 `-fstack-protector-all`。

在这种情况下，我们如何检测我们看到的分段错误是否是堆栈溢出的结果？我们将所有线程的堆栈大小增加了一倍，这解决了问题，但我们希望确定这是一个真正的修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:16:40.360

你有核心文件吗？您应该能够检查堆栈跟踪（通过在 GDB 或核心文件中运行代码）并查看崩溃时是否存在非常深的调用堆栈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:45:57.413

你可以自己解决这个问题。如果您将程序设置为使用您分配的堆栈，则可以添加一个“保护页”来捕获对给定堆栈末尾后第一页的读取和写入。然后，您可以安装一个信号处理程序来捕获信号并告诉您段错误是否是由该保护页面中的访问引起的。

这是我能做的最小的例子，它展示了如何做到这一点：

```
#include <stdio.h>
#include <ucontext.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/mman.h>
#include <malloc.h>
#include <signal.h>

static char *guard = NULL;
static const int pagesize = getpagesize();

static void handler(int sig, siginfo_t *info, void *ctx) {
  if ((char*)info->si_addr >= guard && (char*)info->si_addr - guard <= pagesize) {
    write(2, "stack overflow\n", 15);
  }
  write(2, "sigsegv caught\n", 15);
  _exit(-1);
}

static void install_handler() {
  // register sigsegv handler:
  static struct sigaction act;

  act.sa_sigaction = handler;
  sigemptyset(&act.sa_mask);
  act.sa_flags=SA_SIGINFO|SA_ONSTACK;

  // give the signal handler an alternative stack
  static char stack[4096];
  stack_t ss;
  ss.ss_size = sizeof(stack);
  ss.ss_sp = stack;
  if (sigaltstack(&ss, 0)) {
    perror("sigaltstack");
    fprintf(stderr,"failed to set sigstack\n");
    exit(-1);
  }

  if (sigaction(SIGSEGV, &act, NULL)) {
    perror("sigaction");
    fprintf(stderr,"failed to set handler\n");
    exit(-1);
  }
}

static int overflow() {
  return overflow() + 1;
}

static void test()
{
    install_handler();
    puts("start test");
    // real code that might overflow
    // test non-overflow segv
    //*(char*)0 = 0;
    // test overflow
    overflow();
    puts("finish test");
}

int main()
{
    // create a stack and guard page:
    const int pagesize = getpagesize();
    char *st1=(char*)memalign(pagesize,1+(pagesize*4));
    guard = st1+(pagesize*4);
    if (mprotect(guard, pagesize, PROT_NONE)) {
      perror("mprotect");
      fprintf(stderr,"failed to protect guard page: %p \n", guard);
      return -1;
    }

    ucontext_t ctx[2];
    getcontext(&ctx[1]);
    ctx[1].uc_stack.ss_sp = st1;
    ctx[1].uc_stack.ss_size = 4*pagesize;
    ctx[1].uc_link = &ctx[0];
    makecontext(&ctx[1], test, 0);

    swapcontext(&ctx[0], &ctx[1]);
    return 0;
} 
```

除了使用您自己的堆栈来运行您的代码之外，您还必须为要传递的信号提供另一个堆栈，否则信号传递本身将由于保护页而失败。

# php - 来自另一个 php 文件的 php 变量

> ID：11691107
> 
> 赞同：0
> 
> 时间：2012-07-27T15:36:43.197
> 
> 标签：php, variables

周围有很多版本，但我无法正确...

我需要将变量从一个 php 脚本文件传输到另一个。

`script1.php`有变量：

```
$t1 =  $_POST['t1'];
$t2 =  $_POST['t2']; 
```

我需要在另一个脚本文件中使用这些变量 -`script2.php`

如何访问`script2.php`文件中的这些变量？

好的。我将发布所有脚本。

script1.php 或实际上 getImage.php 如下

```
<?php 
$today = date("Ymd_His"); 

$t1 =  $_POST['t1']; //mazais nosaukums
$t2 =  $_POST['t2']; //lielais nosaukums

$c1 =  $_POST['c1'];  //kjeksis
$c2 =  $_POST['c2'];  //kjeksis 
$c3 =  $_POST['c3'];  //kjeksis 
$c4 =  $_POST['c4'];  //kjeksis 

$mazais =  $_POST['mazais'];    //maza bilde atseviskji
$lielais =  $_POST['lielais'];    //maza bilde atseviskji    

$response = "";

$error_response = "error.php";
$succes_response = "nextstep.php";

$etikjete = base64_decode($_REQUEST['png']);
if ($handle1 = fopen("render/".$today.'.png', 'w+')) {
    if (!fwrite($handle1, $etikjete) === FALSE) {
        fclose($handle1);
        $response .= "Success etikjete! "; 
    } else {
        $response .=  "fwrite error etikjete! ";
        $error = true;
    }
} else {
    $response .=  "fopen error etikjete! ";
    $error = true;    
}

if($mazais){
    $etikjete = base64_decode($mazais);
    if ($handle1 = fopen("render/".$today.'_mazais.png', 'w+')) {
        if (!fwrite($handle1, $etikjete) === FALSE) {
            fclose($handle1);
            $response .= "Success mazais! "; 
        } else {
            $response .=  "fwrite error mazais! ";
            $error = true;
        }
    } else {
        $response .=  "fopen error mazais! ";
        $error = true;    
    } 
}      
if($lielais){
    $etikjete = base64_decode($lielais);
    if ($handle1 = fopen("render/".$today.'_lielais.png', 'w+')) {
        if (!fwrite($handle1, $etikjete) === FALSE) {
            fclose($handle1);
            $response .= "Success lielais! "; 
        } else {
            $response .=  "fwrite error lielais! ";
            $error = true;
        }
    } else {
        $response .=  "fopen error lielais! ";
        $error = true;    
    } 
}
if($error){
         echo $error_response;
} else {
        echo $succes_response;
}
?> 
```

这里的 script2.php 被称为 nextstep.php ，在这个 nextstep.php 中，我需要将 getImage.php 中的变量保存到数据库中。nextstep.php 到目前为止是这样但不起作用。与 db 的连接没问题，如果我在 nextstep.php 上设置不同的自变量，那么它们将存储到 db 中。

```
<?php 

include 'getImage.php';

// Connects to your Database
mysql_connect("localhost", "user", "pass") or die(mysql_error()) ;
mysql_select_db("myDB") or die(mysql_error()) ;

//Writes the information to the database
mysql_query("INSERT INTO jos_orders (maza_bilde,liela_bilde,mazais_nosaukums,lielais_nosaukums)
VALUES ('$t1', '$c2', '$mazais', '$lielais')") ;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:48:18.413

这些怎么样：

1.  会话 - 将您的数据存储到会话变量中，以便可以将其检索到您网站的任何页面。当您关闭浏览器时，数据将被清除。

    session_start();

    ```
    $_SESSION['t1'] = $_POST['t1'];

    $_SESSION['t2'] = $_POST['t2']; 
    ```

    1.  获取变量 = 通过 URL 传递变量

page2.php?t1=somevars&t2=somevars

```
$t1 = $_GET['t1'];

$t2 = $_GET['t2']; 
```

3.$_COOKIE[] - [http://www.w3schools.com/php/php_cookies.asp](http://www.w3schools.com/php/php_cookies.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:54:01.487

您想从不同的脚本访问变量，因此您似乎正在重定向脚本，否则所有全局变量都可以从我们知道的任何脚本访问。所以解决方案可以是会话，否则如果你只是做一些插入、更新或删除操作，我建议你将它提交到同一页面并包含一个文件传递一个操作值，从包含的文件中检查它，根据该操作执行操作并重定向。另一种解决方案是构建一个小的mvc应用程序看看一些mvc应用程序的代码希望你能理解。希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:38:17.880

您可以在`$_SESSION[]`

检查一下： [将表单数据存储为会话变量](https://stackoverflow.com/questions/3791414/storing-form-data-as-a-session-variable)

# vba - 一个程序会在其最后一行中找到具有最小值的列并将其在第一行中的值分配给一个变量？[Excel VBA]

> ID：11691113
> 
> 赞同：0
> 
> 时间：2012-07-27T15:37:03.693
> 
> 标签：vba, excel, excel-2010

在我发布的最后一个帖子中，我得到了很多非常有用的建议，但效果不太好，所以我想我会在这方面得到更多帮助。

所以我有一个看起来像这样的图表。假设左上角的值 1 在单元格 A1 中：

```
x=    1    2    3    4    5    6    7    8

      4    3    2    1    2    3    4    5

      9    8    7    6    7    8    9    10

      8    7    6    5    4    3    2    1

Sum= 21   18   15   12   13   14   15    16 
```

第一行由从 1 到 8 的 x 值组成。第二行、第三行和第四行是使用方程式中第一行中的 x 值得出的值。第五行是第二行、第三行和第四行的总和。

我需要我的程序做的是，使用 VBA，遍历 Sum 行，第 5 行，并检测最小值。在这种情况下，它将是 12。然后应该将该列的 x 值分配给变量 X-Min。最后，它应该将 X-Min 左侧和右侧的 x 值分配给它们自己的变量 X-Left 和 X-Right。

所以对于这个例子，它将遍历求和行并找到最小值为 12。因此对于该列，它将转到第 1 行，并将值 4 分配给 X-Min。然后它会向左偏移并分配 X-Left = 3，然后向右偏移并分配 X-Right = 5。

这似乎真的很简单，但我遇到了很多问题。

在我上一篇文章中，我发现在求和行上使用 MIN() 函数会找到最小值。然后 MATCH() 函数可以给出该值所在的列号。此时，由于我知道 x 值都在第一行，我可以使用 ADDRESS() 函数并使用 MATCH() 函数的结果，获得我想要的 X-Min 值的地址。使用 INDIRECT() 函数，我可以将该地址的值分配给 X-Min。

我有几个问题。首先，我无法让它在 VBA 中实际工作。我不断收到数据不匹配错误。其次，我不确定如何使用此方法来查找和分配 X-Left 和 X-Right 的值。我正在考虑使用地址输出，然后向左和向右偏移，但我也不断收到数据不匹配错误。

我想我的主要问题是我不确定如何实际制作这些输出内容，一旦完成，就以我需要的方式*使用输出。*

我对 VBA 很陌生，其中很多内容开始让我有些摸不着头脑。我了解每个部分单独执行的操作，但是当它们聚集在一起并给我错误时，我并不完全理解为什么。

例如，在使用 VBA 之前，我试图让它在 excel 电子表格中工作，这样我就知道我在做什么。投入：

```
=CELL(ADDRESS(5,MATCH(MIN(A5:H5),A5:H5,0))) 
```

进入单元格的公式给了我一个#VALUE！错误。

我只是很困惑，希望能得到帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:56:27.087

我刚刚看到您为此发布了一个新问题。继续我在上一个解决方案中的评论并适应您的新请求，您可以修改旧代码来执行此操作

```
Sub Sample()
    '~~> This will give you the value from row 1 in the same column
    MsgBox Cells(1, Range(Application.Evaluate("=CELL(""address"",INDEX(A4:H4,MATCH(MIN(A4:H4),A4:H4,0)))")).Column).Value
    '~~> This will give you the value from row 1 in immediate left column
    MsgBox Cells(1, Range(Application.Evaluate("=CELL(""address"",INDEX(A4:H4,MATCH(MIN(A4:H4),A4:H4,0)))")).Column - 1).Value
    '~~> This will give you the value from row 1 in immediate right column
    MsgBox Cells(1, Range(Application.Evaluate("=CELL(""address"",INDEX(A4:H4,MATCH(MIN(A4:H4),A4:H4,0)))")).Column + 1).Value
End Sub 
```

**跟进**

```
Sub Sample()
    Dim Counter As Long

    Counter = Application.InputBox(Prompt:="Please enter a number", Type:=1)

    If Counter = False Or _
    Counter > ActiveSheet.Rows.Count -2 Then Exit Sub

    '~~> This will give you the value from row 1 in the same column
    MsgBox Cells(1, Range(Application.Evaluate("=CELL(""address"",INDEX(" & Counter + 2 & ":" & Counter + 2 & _
    ",MATCH(MIN(" & Counter + 2 & ":" & Counter + 2 & ")," & Counter + 2 & ":" & Counter + 2 & ",0)))")).Column).Value

    '~~> This will give you the value from row 1 in immediate left column
    '~~> You will have to put an error check here if the current column is 1
    MsgBox Cells(1, Range(Application.Evaluate("=CELL(""address"",INDEX(" & Counter + 2 & ":" & Counter + 2 & _
    ",MATCH(MIN(" & Counter + 2 & ":" & Counter + 2 & ")," & Counter + 2 & ":" & Counter + 2 & ",0)))")).Column - 1).Value

    '~~> This will give you the value from row 1 in immediate right column
    '~~> You will have to put an error check here if the current column is the same as total columns count
    MsgBox Cells(1, Range(Application.Evaluate("=CELL(""address"",INDEX(" & Counter + 2 & ":" & Counter + 2 & _
    ",MATCH(MIN(" & Counter + 2 & ":" & Counter + 2 & ")," & Counter + 2 & ":" & Counter + 2 & ",0)))")).Column + 1).Value
End Sub 
```

# java - Android 全球高分教程？

> ID：11691116
> 
> 赞同：0
> 
> 时间：2012-07-27T15:37:08.750
> 
> 标签：java, android

有谁知道在android中设置全球高分的好教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T19:26:02.727

Swarm 也是一个很棒的简单选择。实施是一件轻而易举的事。 [http://swarmconnect.com](http://swarmconnect.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:41:37.447

试试[ScoreNinja](http://scoreninja.appspot.com/)

（[https://stackoverflow.com/a/5513631/1426079](https://stackoverflow.com/a/5513631/1426079)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T17:07:00.913

我不知道具体的教程，但是一个简单的高级方法是这样的：

```
-Server will hold the high score values
-User will play and achieve a score
-User then downloads the current high score from server
-If current score is higher, replace database value. 
```

当然，它变得比这更复杂。您需要一些方法来确保对高分的并发访问最终不会将错误的高分写入服务器。但我认为独立研究这些观点将是一个好的开始。不确定您是想自己做这件事，还是只是找一个服务来为您实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:25:12.787

尝试[解析](http://parse.com)。

他们基本上会为您处理一切。

# android - 警告：“整数常量对于长类型来说太大了”......但它是一个 uint64_t？

> ID：11691121
> 
> 赞同：3
> 
> 时间：2012-07-27T15:37:18.623
> 
> 标签：android, c, types, android-ndk

我正在将[libbtbb](http://sourceforge.net/projects/libbtbb/)交叉编译到 Android，并且收到大量警告说：

```
jni/libbtbb/bluetooth_packet.h:67: warning: integer constant is too large for 'long' type 
```

但是，当我深入研究文件时，这指向以下行：

```
static const uint64_t sw_matrix[] = {
    0xfe000002a0d1c014, 0x01000003f0b9201f, 0x008000033ae40edb, 0x004000035fca99b9,
    0x002000036d5dd208, 0x00100001b6aee904, 0x00080000db577482, 0x000400006dabba41,
    0x00020002f46d43f4, 0x000100017a36a1fa, 0x00008000bd1b50fd, 0x000040029c3536aa,
    0x000020014e1a9b55, 0x0000100265b5d37e, 0x0000080132dae9bf, 0x000004025bd5ea0b,
    0x00000203ef526bd1, 0x000001033511ab3c, 0x000000819a88d59e, 0x00000040cd446acf,
    0x00000022a41aabb3, 0x0000001390b5cb0d, 0x0000000b0ae27b52, 0x0000000585713da9}; 
```

类型是 uint64_t，而不是“long”......但它似乎是指指定像*0xfe000002a0d1c014*这样的常量。在这种情况下，我不确定应该如何指定它，或者我是否可以忽略这些警告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T15:47:17.200

将`ULL`后缀添加到 64 位整数常量或将它们包含在`UINT64_C`来自`stdint.h`.

```
static const uint64_t sw_matrix[] = {
    0xfe000002a0d1c014ULL, /* etc. */ }; 
```

或者

```
#include <stdint.h>

static const uint64_t sw_matrix[] = {
    UINT64_C(0xfe000002a0d1c014), /* etc. */ }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:42:35.360

在 1989/1990 版本的 C 标准中，十六进制整数常量的类型是该列表中第一个可以表示其值的类型：

*   `int`
*   `unsigned int`
*   `long int`
*   `unsigned long int`

那个版本的语言没有`long long`或没有`unsigned long long`类型。

1999 版标准，此列表更改为：

*   `int`
*   `unsigned int`
*   `long int`
*   `unsigned long int`
*   `long long int`
*   `unsigned long long int`

看起来您正在使用 gcc，默认情况下它会识别带有一些 GNU 特定扩展的 C89/C90。我的理解是它提供类型`long long`和`unsigned long long`扩展，但不会改变整数常量的语义。

如果您使用参数调用 gcc `-std=c99`，它将（尝试）符合 C99 标准，并且警告应该消失（无需更改源代码）。

如果您想修改您的源代码，使其在没有警告的情况下编译`-std=c99`，则添加`ULL`后缀将导致常量的类型为`unsigned long long`，这*可能*与类型相同`uint64_t`，但不能保证。使用`UINT64_C()`宏可确保它们的类型正确，但它有点冗长。

# objective-c - 使用新的内存分配复制 NSObject

> ID：11691125
> 
> 赞同：0
> 
> 时间：2012-07-27T15:37:24.257
> 
> 标签：objective-c, memory-management, nsobject

我有一个包含 NSObject 的 NSMutableArray。我想复制它，但是当我修改原始数组时，副本也是。我试图像这样实现copyWithZone：

```
-(id) copyWithZone: (NSZone *) zone 
```

{

```
Play *playCopy = [[Play allocWithZone: zone] init];

[playCopy setName:name];

[playCopy setAValues:aValues];

return playCopy; 
```

}

我在 viewController 中调用这个函数：

```
NSMutableArray *aTmpPlay = [[NSMutableArray alloc] initWithArray:aPlays copyItems:YES]; 
```

我需要做什么 ？我如何才能检索对象的值而不是引用？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:44:13.110

本质上，您仍在分配为名称和值分配的内存的引用，因此，它仍然指向相同的对象。在分配名称和 aValues 之前调用 copy。

```
[playCopy setName:[name copy]];
[playCopy setAValues:[aValues copy]]; 
```

# facebook - 创建 Facebook 客户端 - 选择应用程序集成类型和 OAuth 流程

> ID：11691129
> 
> 赞同：0
> 
> 时间：2012-07-27T15:37:47.163
> 
> 标签：facebook, oauth, client

我喜欢将内容从我们的内容管理系统分发到多个在线渠道，例如网站、推特、linkedin 以及最后但并非最不重要的 Facebook。编辑可以创建项目，并最终在工作流程之后将它们分配到不同的渠道中。

当然，网站没问题（它仍然是一个 CMS，不是吗）。Twitter 集成相当简单。但现在我喜欢用 Facebook 创建一个连接器。

方法是这样的。

*   创建 Facebook 应用程序：TheCMSFacebookConnector
*   授予它在墙上写字、创建活动、添加照片集等的权限。客户购买 CMS
*   在 CMS 管理器中，有一个操作可将 TheCMSFacebookConnector 应用程序连接到客户（公司）的 Facebook 帐户
*   执行 OAuth 舞蹈并存储 accesstoken 和 accesstoken 秘密

从现在开始，我们使用 REST API 将内容添加到客户的公司墙上。这正是我为 Twitter 集成所做的方式。

但.........

## 选择正确的集成类型

当我创建 Facebook 应用程序时，Facebook 要求我说明该应用程序如何与 Facebook 集成。似乎最适合的集成类型是 Native iOS App 或 Native Android App。事实上，CMS 也可以充当原生应用程序。**有人知道我必须选择哪种应用集成类型吗？**. 是否还有其他重要的参数需要以不同的方式设置？

## 选择身份验证流程

第二个问题是关于 OAuth 的舞蹈。如果我们在客户之间分发 CMS，他们会在他们的 DMZ 中使用自己的（主要是）公司 URL 托管 CMS Manager 环境，或者更好的是，他们在 LAN 中托管 CMS 服务器，在 DMZ 中托管发布服务器（我们提供一些工具同步这些服务器）

当我进行 OAuth 舞蹈时，CMS 管理器（它是一个 Web 应用程序）拥有自己的 URL。因此，在应用程序的定义中，我无法为应用程序域命名一个唯一值。从“OAuth 舞蹈”代码中，重定向 URL 似乎与应用程序域有连接，并且不能以动态方式设置。**那么对于“OAuth 舞蹈”来说，唯一有效的方法是客户端是真的吗？身份验证流程**？

希望有人可以帮助我，尤其是第一个问题。提前致谢

E.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:07:41.293

> 那么对于“OAuth dance”来说，唯一有效的方法是客户端身份验证流程是真的吗？

不一定——您总是可以将应用程序域中的地址设置为redirect_uri，然后将其重定向到CMS用户的网址（通过redirect_uri中的GET参数或类似的东西）。

# scala - 为逐步数据存储添加和扩展通用 writer trait 的最佳方法

> ID：11691131
> 
> 赞同：2
> 
> 时间：2012-07-27T15:37:48.093
> 
> 标签：scala, design-patterns, generics, dependency-injection, store

我需要在我的程序（H2、SQLite、NEO4J、Text 等）中存储/写入有关不同和多种数据支持的信息。我一一创建导出器，因此接口需要易于扩展。

我制作模拟程序，所以我需要在每一步存储信息（需要 db 对象，以及要存储的各种数据）。

我的第一个想法是使用具有通用方法的依赖注入模式，`initializeWriter()`如下所示：`stepWriter()``closeWriter()`

```
trait OutputWriter {  Simulation =>

  def path:String

  def initializeWriter()
  def stepWriter()
  def closeWriter()
} 
```

需要实现 writer 的用户扩展了这个特性，并覆盖了方法。'database val' 通常包含由 initializeWriter 初始化后的 DB 对象。数据对象包含我想写的所有可能的数据。

我在 OutputWriter 和 Simulation 之间存在依赖关系，因为实际上我需要从模拟访问对象和函数来编写最终结果。我认为这不是一个非常好的解决方案，并且鉴于@x3ro 的答案，这是一个更好的解决方案，可以消除这些依赖关系，从而为作者提供一些更好的通用 DATA 对象。

我的问题是在这种情况下，如果我需要添加一些复杂的信息以将此 DATA 正确写入数据库，我可以将包含例如 sqlquery 或其他特定编写器命令的特定代码放在哪里？

所以，此时我的问题是：

1 - 我创建了一个 Data 对象，其中包含要在模拟的每个步骤中写入的数据。这个数据对象的结构是一样的，只是结果值移动了。

2 - 任何输出或多输出写入器，其中包含正确写入输出的所有方法：TextWriter、SQLITEWriter 等。

3 - 使 (1) -> (2) 之间的关系的代码的特定部分。将double的indexedSeq写入文本文件没有问题，但是写入SQL数据库，我需要给表的写入器结构，查询以插入数据等。

我的第一个想法是将此代码设置到 Writer 方法的 stepWriter() 中，但也许有更好的解决方案，因为我认为在这里**我打破了 writer 的通用性**

```
object DB
object MyData

trait DBWriter extends OutputWriter {

 val database:DB = DB

 def initializeWriter() = { ... }
 def stepWriter(dataToWrite:MyData) = { ... }

 } 
```

之后，如果我需要导出我的模拟，我会添加这样的好作者：

```
new Simulation (...) with DBWriter {
  override def path = "my-path-for-db"

  initializeWriter()

  // computation loop 
 (0 until 50){ var result:MyData= computeData() ; stepWriter(result) }

  closeWriter()

} 
```

还有其他模式（在文献中或根据您的经验）您经常使用更强大或更灵活的模式来做到这一点？

非常感谢您的经验回报，SR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:47:05.840

我认为您在示例中介绍的内容不属于“依赖注入”（DI）类别。这是因为 DI 旨在减少代码库中的依赖关系，并且您的类/特征实际上都相互依赖：

[![](../Images/fe5da1f70295af54a66a9ad909b2fdf5.png)](https://i.stack.imgur.com/RmOAR.png)

如果你想了解更多关于依赖注入的信息，我建议你阅读[这篇关于依赖注入的文章。](https://martinfowler.com/articles/injection.html)

* * *

### 可能的问题

至于您的示例，问题在于您的 Simulation 依赖于`DBWriter`，并且您需要更改实现才能使用其他编写器。模拟应该只取决于`OutputWriter`特征。

另一个问题似乎是`stepWriter()`您的`DBWriter`实现方法需要特定于数据库编写器的参数，因此不是通用的（并且根本不符合特征`OutputWriter`）。

第三个问题是你的`OutputWriter`特质实际上取决于模拟，我真的找不到原因。为了尽可能保持`OutputWriter`通用和可重用，你不应该让它依赖于`Simulation`. 您添加此依赖项的原因是什么？

* * *

### 我的方法

我将进行以下更改以增强您的依赖情况。

**使 OutputWriter 和 DBWriter 通用**：您`OutputWriter`实际上应该只是一个接口，如下所示：

```
trait OutputWriter {
    def initializeWriter()
    def stepWriter(dataToWrite:Data)
    def closeWriter()
} 
```

**使 DBWriter 成为一个实际的类**：

```
class DBWriter(database:DB) extends OutputWriter {
    def initializeWriter() { ... }
    def stepWriter(dataToWrite:Data) { ... }
    def closeWriter() { ... }
} 
```

**实例化时将编写器传递给模拟**：

```
object Foo extends App {
    val database:DB = ...
    val writer:OutputWriter = new DBWriter(database)

    new Simulation(..., writer)
} 
```

像这样，您将能够简单地更改传递给`Simulation`构造函数的编写器，甚至可以同时使用多个编写器！这也允许编写器通过外部配置文件进行配置（请参阅上面提到的依赖注入文章）。

* * *

## 解决您编辑中的问题

> 1 - 我想编写模拟的每个步骤的数据。这个数据的结构是一样的，只是结果值移动了。例如，模拟步骤返回相同的 indexedSeq[Double]，其中包含不同的值以在每一步写入输出。
> 
> 2 - 任何输出或多输出写入器，其中包含正确写入输出的所有方法：TextWriter、SQLITEWriter 等。
> 
> 3 - 使 (1) -> (2) 之间的关系的代码的特定部分。将double的indexedSeq写入文本文件没有问题，但是写入SQL数据库，我需要给表的写入器结构，查询以插入数据等。

将 SQL 逻辑放在您的 DBWriter 中是完全可以的（然后我会调用它`SimulationSQLWriter`）。这当然会使实际的实现不那么通用，但这一定不是一件坏事。始终使您的代码尽可能通用，但尽可能具体，这样您就不必增加很多复杂性来使代码通用，而您根本不需要通用。

**始终保持合理的时间、精力和收益比例！**

现在看一个具体的例子`SimulationSQLWriter`：

```
class SimulationSQLWriter(database:DB, table:String) extends OutputWriter {
    def initialize() { ... }
    def stepWriter(dataToWrite:Data) {
        val preparedData = prepareDataForInsertion(dataToWrite)
        insertIntoDatabase(preparedData)
    }
    def closeWriter() { ... }

    def prepareDataForInsertion(dataToWrite:Data) = { ... }
    def insertIntoDatabase(preparedData:<whatever type you need>) = { ... }
} 
```

`prepareDataForInsertion`可以准备给定的数据并将其放入，例如，将 SQL 字段名称映射到值的映射，或此类映射元素的列表。然后可以将该结果放入`insertIntoDatabase`中，根据传递给构造函数的参数将其插入到`database`表中`table`。

# android - 仅 Android4 的股票浏览器输入文本的奇怪行为

> ID：11691132
> 
> 赞同：9
> 
> 时间：2012-07-27T15:37:51.593
> 
> 标签：android, html, css, forms, input

不知道有没有人看到这个bug。请注意，这只发生在 Android 4.x 普通浏览器上。它已在 Android 4 上的 Chrome、以前版本的股票浏览器、iOS、Blackberry OS6 和 7、Playbook 上成功测试过...

查看[http://www.hello-gurus.com/labs/sandbox/plain-form.html](http://www.hello-gurus.com/labs/sandbox/plain-form.html) 它在模拟器中运行良好（参见[http://cl.ly/image/1z3G1T2y2p2c](http://cl.ly/image/1z3G1T2y2p2c)）但在最新版本中完全错误GalaxyTag（见[http://cl.ly/image/1O123A3d0y3q](http://cl.ly/image/1O123A3d0y3q)）

正常行为应该是文本停留在右侧。左侧的填充使文本与标签重叠。输入为 100% 宽度，因此活动区域位于整个宽度上。这就是它在其他所有浏览器上的工作方式，Android 股票只有在焦点时才会在左侧对齐！另外，即使输入具有透明背景，它也会消失：S 更糟糕的是，有时它的值会在模糊 x_X 上变空

这让我疯了！任何解决方案或任何我可以尝试的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T00:22:50.577

我遇到了一个类似的问题，即在 Android 设备上聚焦输入字段时会出现幽灵字段。输入字段的这个 CSS 解决了我的问题：

```
input[type='text'] { -webkit-user-modify: read-write-plaintext-only; } 
```

可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:53:36.290

这很奇怪。你试过调整你的css吗？可以使用不同的方法实现相同的所需布局。

例子：

对于您的标签：

*   消除 - `position:absolute;`
*   添加 - `display:inline-block;`
*   改变 - `width:25%;`

对于您的输入：

*   改变 - `width:70%;`

我设置了类似的东西（静态内容），它似乎对我有用。

# vba - 保护电子表格时出现 Excel VBA 验证错误

> ID：11691136
> 
> 赞同：1
> 
> 时间：2012-07-27T15:38:02.463
> 
> 标签：vba, excel, excel-2010

我试图确保输入到 Excel 电子表格命名范围内的数据是有效的。为此，我为范围中的“A”列定义了一个静态验证列表，并为该列启用了下拉列表。根据用户选择的选项，我在运行时在“B”列中添加了一个验证对象，其中包含受“A”列中的条目约束的条目列表。根据 A 列和 B 列中的条目，“C”列中的单元格会自动填充。

在启用电子表格保护之前，这可以正常工作。此时，尝试从“B”列的下拉列表中选择一个选项会产生以下错误：

“您尝试更改的单元格或图表受到保护，因此是只读的。......”

然而

*   在添加工作表保护之前，相关范围内的所有单元格都已解锁。
*   该代码在更新“B”列中的验证对象之前显式删除保护，然后在添加验证对象后替换它。
*   从“B”列的下拉列表中选择列表项时，错误消息会在任何工作表事件发生之前立即触发，从而无法捕获或调试错误。

我在电子表格和单独的代码模块中都有代码，两者都包含在下面。任何想法将不胜感激

这是 Worksheet_Change() 事件中的代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
   Dim strNm As String

  ' there will be multiple named ranges eventually. We need to be able to distinguish
  ' among the various ranges so that our code executes only against the data we expect
  ' to manipulate - not random cells
  If Not Intersect(ActiveCell, ActiveWorkbook.Names("DBAddRange").RefersToRange) Is Nothing Then  
     Dim rng As Range

     Set rng = ActiveWorkbook.Names("DBAddRange").RefersToRange

     If Target.Column = 1 Then
        If FLAG_CHANGE_IN_PROGRESS = True Then Exit Sub
        FLAG_CHANGE_IN_PROGRESS = True
        Dim VldnList As String

        VldnList = getVldtnList(Target.Value)

        unlockSS ActiveSheet
        Range("B" & Target.row).Clear
        Range("B" & Target.row).Select
        With Range("B" & Target.row).Validation
           .Delete
           .Add Type:=xlValidateList, Operator:=xlValidateList, Formula1:=VldnList
           .IgnoreBlank = False
           .InCellDropdown = True
        End With

        lockSS ActiveSheet
        Range("B" & Target.row).Select
        FLAG_CHANGE_IN_PROGRESS = False
     ElseIf Target.Column = 2 Then
        If FLAG_CHANGE_IN_PROGRESS = True Then Exit Sub
           FLAG_CHANGE_IN_PROGRESS = True
           unlockSS ActiveSheet
           Dim dbHost As Variant
           Dim hNmRng As Range
           Set hNmRng = ActiveWorkbook.Names("valid_lookups").RefersToRange
         dbHost = Application.VLookup(Target.Value, hNmRng, 2, False)

         Range("C" & Target.row).Value = dbHost
         lockSS ActiveSheet
         FLAG_CHANGE_IN_PROGRESS = False
      End If
   End If

   If Not Intersect(ActiveCell, ActiveWorkbook.Names("HostAddRange").RefersToRange) Is Nothing Then

   End If
End Sub 
```

外部模块中的代码：

```
Sub lockSS(ByVal sheet As Sheet1)
   sheet.Protect Password:=[NOT SHOWN], UserInterfaceOnly:=True, DrawingObjects:=False
   Application.EnableEvents = True
End Sub

Function getVldtnList(ByVal dbName As String)
   Dim vrtmatchRow As Variant
   Dim rng As Range

   If dbName = "" Then
      getVldtnList = ""
      Exit Function
   End If

   ' this is a pre-defined range having entries for:
   ' DB Name   - Column 1
   ' DB CI ID  - Column 2
   ' DB Host   - Column 3

   Set rng = ActiveWorkbook.Names("valid_db_nms").RefersToRange

   ' find the value of the first row in the range that matches the value
   ' of the dbName parm. NOTE: the final 0 parm tells the match function
   ' to find an exact match.
   vrtmatchRow = Application.Match(dbName, rng, 0)

   If IsError(vrtmatchRow) Then
      ' NOTE: we should NEVER get here due to the way cell validation is set up.
      MsgBox "The value entered was not found in the list of valid database values. See xxx for help", vbRetryCancel, "Invalid Entry"
   Else
      Dim row As Long
      Dim strListVals As String

      Set rng = ActiveWorkbook.Names("valid_db_info").RefersToRange
      row = vrtmatchRow

      Do
         If Len(strListVals) > 0 Then strListVals = strListVals + ","
         strListVals = strListVals + rng.Cells(row, 2).Value
         row = row + 1
      Loop While (rng.Cells(row, 1).Value = dbName)
   End If

   getVldtnList = strListVals
End Function

Sub unlockSS(ByVal sheet As Sheet1)
   sheet.Unprotect Password:=[NOT SHOWN]
   Application.EnableEvents = False
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:26:27.413

清除范围也会重置“锁定”复选框，因此您每次都需要重置它

`Range("B" & Target.row).Clear`

# iphone - Prevent app from shutting down when device is rebooted

> ID：11691138
> 
> 赞同：0
> 
> 时间：2012-07-27T15:38:05.987
> 
> 标签：iphone, ios, ipad

When I restart the device my app is on it won't preserve the state it had once I open up the app again, it will be as if it's the first time I open, losing the session and having to re-login, how can I make my app preserve its state even through a device reboot? Like Twitter does, for example.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:15:26.123

I'll try a bit more formal answer based on the comments you added above. I'll start by saying that [the link](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html) Tim posted is something you should familiarize yourself with.

When your app is running, it's in the Foreground state. When you "exit" an app with the Home button, you're not really quitting it; you're just pushing it to the Background state. after a few seconds in background state, the OS automatically moves the app to the Suspended state. If you come back within a few minutes, your app is still in memory, so the OS just puts it back on the screen the way it was.

However, if you leave the app alone for a while and use other apps, the OS can--at any time and without warning--purge your app from memory. This is known as the "Not Running" state. Now, when the open the app again, it has to start from scratch. Obviously, the same thing happens when the device restarts--all apps are purged from memory.

The trick, then, is to save essential information about the app state whenever it enters the background state. You can use the app delegate's `didEnterBackground` method, or register for the `UIApplicationDidEnterBackgroundNotification` and invoke a method in your active view controller (or any other class, for that matter). Either way, you should save whatever state information you can.

How do you save this information? There are several strategies. For a simple app, perhaps you can register a few setting as NSUserDefaults. Or maybe you can write out a file containing whatever data the user was working on. It's really up to you.

Then, whenever the app launches, check for the presence of that saved data (however you chose to write it out), and set up the UI accordingly. To the user, it will appear as though the app never quit, which is exactly what Apple wants them to think.

# ruby-on-rails - 如何从嵌套表单正确创建嵌套属性项？

> ID：11691147
> 
> 赞同：0
> 
> 时间：2012-07-27T15:38:38.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, nested-attributes

与此[railscast](http://railscasts.com/episodes/196-nested-model-form-revised)类似，我正在尝试为嵌套属性创建一个表单。在我的应用程序中，节点可以附加问题。我希望一种表单能够为节点和问题设置属性。这是在模型中定义的：

节点.rb

```
...
has_many :questions
accepts_nested_attributes_for :questions 
```

我不确定如何准确地创建可以接受问题的表单。目前是这样的：

```
 <%= f.fields_for @node.questions do |builder| %>
  <%= render 'question_form', f: builder %>    
  <% end %> 
```

然后问题表单呈现相关字段。

Node 控制器当前依赖于正确传递的属性：nodes_controller.rb

```
def new
@node = current_user.nodes.build 
//also tried building a question

def create
@node = current_user.nodes.new(params[:node])
@node.save... 
//anything else needed? 
```

如何获得表格以成功创建问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:48:05.780

```
@node = current_user.nodes.new(params[:node]) 
```

应该

```
@node = current_user.nodes.create(params[:node]) 
```

假设 current_user 变量已初始化，并且您已使用 attr_accessible 将表单中保存的所有属性标记为“可批量分配”，它应该可以工作

请注意，该`new`方法只是创建一个对象而不将其保存到数据库中。`create`将其保存到数据库。

# xml - XSD 验证 xs:date 和 xs:dateTime 的错误格式

> ID：11691158
> 
> 赞同：3
> 
> 时间：2012-07-27T15:39:18.113
> 
> 标签：xml, xsd

当我像下面这样设置**年份部分（20512 或类似的东西）时，XSD 仍然验证 XML。**

任何的想法。

这是一个缺陷还是我必须使用给定模式的**simpleType**？

谢谢

**XSD**

```
<xs:attribute name="date" type="xs:date" />

<xs:attribute name="timestamp" type="xs:dateTime" /> 
```

**XML**

```
<store date="20512-07-11" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="items.xsd">

<store timestamp="20512-07-11T21:50:16" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="items.xsd"> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T21:54:54.493

抱歉，但为什么您认为 20512-07-11 是无效日期？天文学家可能非常热衷于维护显示日食将在该日期发生的数据。

如果您想将日期限制在特定范围内，例如在 2100 年之前，那么您应该使用从 xs:date 派生的 simpleType，它使用 maxExclusive facet 来限制值的范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:57:19.627

这**不是**您的验证器的缺陷（顺便说一句，您应该指出您正在使用哪个验证器）。其他验证器（错误）的行为方式与您预期的一样；例如，.NET 会抱怨`The value '20512-07-11' is invalid according to its datatype 'http://www.w3.org/2001/XMLSchema:date' - The string '20512-07-11' is not a valid XsdDateTime value.`

请参阅XSD 规范的[这一部分](http://www.w3.org/TR/xmlschema-2/#deviantformats)，第 D3.3 节，其中明确指出您的值是有效的。

# android - 按下时更改文本颜色

> ID：11691164
> 
> 赞同：1
> 
> 时间：2012-07-27T15:39:25.383
> 
> 标签：android

我列表的行有一个自定义选择器。此选择器的背景在未按下时为颜色 A，在按下时为颜色 B。未按下列表项时，项目布局上的 TextView 为 B 色，以便并列。

但是，我希望在按下行时将文本颜色更改为颜色 A，以与新的背景颜色并列。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:52:53.197

您可以使用 textColor drawable 设置文本样式：

```
<style name="listLabel">
  <item name="android:textSize">16sp</item> 
  <item name="android:textColor">@drawable/list_selector_text</item> 
</style> 
```

和 drawable/list_selector_text 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_focused="true" android:state_pressed="true" android:color="@color/white" /> 
  <item android:state_focused="true" android:color="@color/offwhite" /> 
  <item android:state_pressed="true" android:color="@color/white" /> 
  <item android:color="@color/black" /> 
</selector> 
```

# android - Android NDK：JNI“主要”处理消息？

> ID：11691167
> 
> 赞同：0
> 
> 时间：2012-07-27T15:39:31.930
> 
> 标签：android, multithreading, android-ndk, java-native-interface

我正在尝试构建一个 Android 应用程序，该应用程序使用现有的 C 库进行一些后台操作（即进行一些无线电扫描、调到电台等）。作为一个独立的 C 可执行文件，主循环可以处理来自较低级别（硬件组件）的消息处理。我的理解是使用JNI，不需要main函数，因为

1）创建一个共享库并

2）只要加载它的java线程还活着，共享库就“活着”。

所以假设 C 库使用多个线程：那么通常在初始主循环中完成的消息处理应该在哪里完成？是否像调用与 JNI 函数一起声明的 C 函数一样简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:20:43.310

Re 2) library 在内存中持久化的意思是“活着的”。但它自己不做任何事情。如果即使没有通过 JNI 调用任何函数，您也需要该库“做某事”，那么您当然需要一个单独的本机线程。您可以在常规 JNI 函数调用（init 方法或`JNI_OnLoad`用于该目的）中创建线程并启动消息循环。当 JNI 函数调用返回时，它将继续运行。然后，您还需要一个拆卸方法来停止线程并将其拆卸（`JNI_OnUnload`可用于此）

# windows-phone-7 - 我可以从 Windows Phone 7 应用程序中的资源 dll 访问字符串值吗？

> ID：11691168
> 
> 赞同：0
> 
> 时间：2012-07-27T15:39:34.233
> 
> 标签：windows-phone-7, localization

好的，所以我已经成功地使用 msdn[教程为我的 WP7 应用程序的标题创建了一个本地化资源库](http://msdn.microsoft.com/en-us/library/ff967550%28v=vs.92%29.aspx)

因此，应用程序标题存储在资源库 AppResLib.dll 内的字符串表中。可使用以下代码从 WMAppManifest.xml 文件访问此资源字符串：

@AppResLib.dll,-200

我想知道是否可以从我的应用程序中的类访问应用程序标题字符串？我的谷歌搜索似乎表明这是不可能的。无法使用[此处](https://stackoverflow.com/questions/3411377/get-the-windows-phone-7-application-title-from-code)概述的解决方案，因为它只返回字符串“@AppResLib.dll,-200”。

我认为唯一的解决方案是在本地化字符串资源文件中再次定义应用程序标题，如此处所示[，](http://msdn.microsoft.com/en-us/library/ff637520%28v=vs.92%29.aspx)我不想这样做。

任何帮助将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:48:52.660

我正在使用本地化资源，但它是一个资源文件，我想在我的所有应用程序（在我的 c# 类和 XAML 中）中调用我的标签、标题和其他文本资源。

如果你想要教程（法语，对不起）在[这里](http://blogs.msdn.com/b/pierreca/archive/2010/09/21/internationalisez-votre-application-windows-phone-7.aspx)（你想用[谷歌翻译](http://translate.google.com)来翻译所有英文页面）

# ruby-on-rails - 如何更改 ActiveAdmin 的默认 URL？

> ID：11691169
> 
> 赞同：17
> 
> 时间：2012-07-27T15:39:38.397
> 
> 标签：ruby-on-rails, activeadmin

默认情况下，ActiveAdmin 在 /admin 下运行。有什么办法改变吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-19T11:31:01.217

是的。您需要将以下行添加到`config/initializers/active_admin.rb`文件中：

```
config.default_namespace = :your_desired_namespace 
```

这将创建一个`http://yourdomain.name/your_desired_namespace`

请注意，您将需要相应地更新您的路线（`admin_user_path`即将成为`your_desired_namespace_user_path`）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-07T22:44:10.087

或者@Amir 回答。如果您不关心确切的路径，并且只想将路线更改为不太明显的路线，而无需更改路线。在路由文件中，您可以像这样调用 ActiveAdmin：

```
Rails.application.routes.draw do
  scope 'something-else' do
    ActiveAdmin.routes(self)
    get '/', to: 'admin/dashboard#index'
  end
end 
```

然后您的路线将是`/something-else/admin`，您可以访问仪表板`/something-else`。

而且您仍然可以使用常规助手，例如`admin_user_path`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-29T16:57:27.300

仅供参考，如果您想从根路径作为独立应用程序运行 ActiveAdmin，请使用以下命令：

```
config.default_namespace = false 
```

# vb.net - 读取图像的像素值

> ID：11691180
> 
> 赞同：1
> 
> 时间：2012-07-27T15:40:08.123
> 
> 标签：vb.net, image-processing, vb.net-2010

**Q>**如果显示 60*66 PNG 图像的所有 RGB 像素值需要 10-34 秒，那么 Image Viewer 如何立即显示图像？

```
 Dim clr As Integer ' or string
        Dim xmax As Integer
        Dim ymax As Integer
        Dim x As Integer
        Dim y As Integer
        Dim bm As New Bitmap(dlgOpen.FileName)

        xmax = bm.Width - 1
        ymax = bm.Height - 1

        For y = 0 To ymax
            For x = 0 To xmax
                With bm.GetPixel(x, y)
                    clr = .R & .G & .B
                    txtValue.AppendText(clr)
                End With
            Next x
        Next y 
```

# 编辑

```
Dim bmp As New Bitmap(dlgOpen.FileName)
Dim rect As New Rectangle(0, 0, bmp.Width, bmp.Height)
Dim bmpData As System.Drawing.Imaging.BitmapData = bmp.LockBits(rect,Drawing.Imaging.ImageLockMode.ReadWrite, bmp.PixelFormat)
Dim ptr As IntPtr = bmpData.Scan0
Dim bytes As Integer = Math.Abs(bmpData.Stride) * bmp.Height
Dim rgbValues(bytes - 1) As Byte

System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes)

For counter As Integer = 0 To rgbValues.Length - 1
       txtValue.AppendText(rgbValues(counter))
Next

System.Runtime.InteropServices.Marshal.Copy(rgbValues, 0, ptr, bytes)
bmp.UnlockBits(bmpData) 
```

第一个代码需要**10**秒，第二个代码大约需要**34**秒，用于在具有 4 GB RAM 的 AMD A6 3500 上显示 59*66 PNG 图像的文本框中的所有值！

# 从文件读取和写入文本框同时发生时存在问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:59:27.090

问题是，如果您需要访问大量像素，您正在使用的功能 GetPixel 会非常慢。尝试使用[LockBits](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap.lockbits)。您可以使用它几乎立即收集图像数据。

[使用 LockBits 方法访问图像数据](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)。

# ios - 谷歌分析插件PhoneGap onclick

> ID：11691188
> 
> 赞同：0
> 
> 时间：2012-07-27T15:40:53.890
> 
> 标签：ios, cordova

有人对为什么这在 Android 中作为 onclick 事件起作用，但在 iOS 中不起作用有任何想法吗？如果有帮助，我正在使用 Cordova 1.8.1、jQueryMobile 1.1.1 和 jQuery 1.7。

在`onDeviceReady`：

```
var googleAnalytics = window.plugins.googleAnalyticsPlugin;    
googleAnalytics.startTrackerWithAccountID("UA-MyCode");    
googleAnalytics.trackPageview('/MobileiOS'); 
```

这是有效的，我在 Analytics 中看到了。

在`<body onload="onLoad()">`我有一个可以正确导航到页面并且还具有`onclick="googleAnalytics.trackPageview('/TestMobileiOS');"`

分析中没有任何内容。

在`onLoad`：

```
function onLoad(){
    document.addEventListener("deviceready", onDeviceReady, false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:36:20.540

我认为这是一个范围界定问题。您在 onDeviceReady 中声明的“var googleAnalytics”仅限于该函数的范围。

但是，稍后您尝试在不同的范围内使用它。尝试在您的点击处理程序中使用完整的 window.plugins.googleAnalyticsPlugin.trackPageview...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:33:46.527

我在没有插件的 PhoneGap 应用程序中使用 Google Analytics。它工作正常。

您下载“ga.js”文件。

编辑它，用 '"_file:" ' 替换 ' "file:" ' 字符串。

将文件放入项目中，然后将其包含在带有“script”标签的“index.html”中。

然后，您可以像在网站中一样在您的应用中使用 Google Analytics Tracker。 [https://developers.google.com/analytics/devguides/collection/gajs/](https://developers.google.com/analytics/devguides/collection/gajs/)

# c - vsprintf，如何在 linux 上将 void** 转换为 va_list

> ID：11691189
> 
> 赞同：4
> 
> 时间：2012-07-27T15:40:54.037
> 
> 标签：c, printf

我的问题`vsprintf`是我无法直接获取输入参数，我必须先一个一个地获取输入并将它们保存在`void**`，然后将其传递`void**`给`vsprintf()`，这对windows来说很好，但是当我来到64位linux时，gcc无法编译因为它不允许从 to 转换`void**`，`va_list`有没有人可以给我一些帮助，我应该在 linux 下怎么做？

我的部分代码是：

```
void getInputArgs(char* str, char* format, ...)
{
    va_list args;
    va_start(args, format);
    vsprintf(str, format, args);
    va_end(args);
}  

void process(void)
{
    char s[256];
    double tempValue;
    char * tempString = NULL;
    void ** args_ptr =NULL;
    ArgFormatType format;   //defined in the lib I used in the code
    int numOfArgs = GetNumInputArgs();  // library func used in my code

    if(numOfArgs>1)
    {
        args_ptr = (void**) malloc(sizeof(char)*(numOfArgs-1));
        for(i=2; i<numOfArgs; i++)
        {
            format = GetArgType();    //library funcs

            switch(format)
            {
                case ArgType_double:
                    CopyInDoubleArg(i, TRUE, &tempValue);   //lib func
                    args_ptr[i-2] = (void*) (int)tempValue;    
                    break;

                case ArgType_char:
                    args_ptr[i-2]=NULL;
                    AllocInCharArg(i, TRUE, &tempString);  //lib func
                    args_ptr[i-2]= tempString;
                break;
            }
        }
    }

    getInputArgs(s, formatString, (va_list) args_ptr);   /////Here is the location where gcc cannot compile 
} 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:00:38.410

The problem is, your function gets `...`, but you are passing it a `va_list`. `...` is used for a usage like this:

```
 getInputArgs(s, formatString, arg1, arg2, arg3, arg4 /* etc */); 
```

and it won't work with `va_list`. Unfortunately, there is not an easy way to create a `va_list` from different parameters instead of getting it from `...`. See [this question](https://stackoverflow.com/q/3351056/912144) for example.

What you should do is to change the way you want to print to the string.

You can have:

```
char s[256];
int so_far = 0; 
```

And in your for loop instead of something like this:

```
CopyInDoubleArg(i, TRUE, &tempValue);   //lib func
args_ptr[i-2] = (void*) (int)tempValue; 
```

You write:

```
CopyInDoubleArg(i, TRUE, &tempValue);   //lib func
if (so_far < 256)  /* 256 is the maximum length of s */
    so_far += snprintf(s + so_far, 256 - so_far, "%lf", tempValue); 
```

Something along these lines. This way, you create the string one by one, appending each element to the previous, instead of trying to make it all at once.

# xcode - 故事板：Modal Segues 的循环？

> ID：11691192
> 
> 赞同：3
> 
> 时间：2012-07-27T15:41:02.787
> 
> 标签：xcode, ios5, interface-builder, storyboard, uistoryboard

我想使用 Storyboards 实现一些东西，但我不知道实现它的最佳方法。我不想使用导航控制器，因为我不希望导航栏位于顶部。我只想要从一个视图控制器切换到下一个视图控制器的能力。

我有一个**主菜单**视图控制器，它将进入其他视图，并且这些视图可能会进入其他视图......现在，假设链中的最后一个视图有一个“返回菜单”按钮：我应该继续从那个*按钮*到菜单视图控制器？或者我应该以某种方式解雇所有以前的视图控制器？

在用户点击后，我不需要iOS来保存主菜单视图控制器的副本，但我似乎无法找到一种方法来加载一个新的视图控制器并呈现它，而不是拥有一个父级查看“模态”显示它。

*   如果我只是创建一个模态序列循环，它会导致内存泄漏吗？

（例如：*主菜单 --> VC1 --> VC2 --> 主菜单 --> VC3 --> VC4 --> 主菜单...*）

任何帮助都感激不尽。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:06:17.003

每个 segue 都会创建目标视图控制器的一个新实例，因此将 segue 返回主菜单并不是一个好主意。

您最好关闭呈现的视图控制器，但请注意，可以在不显示导航栏的情况下使用导航控制器 - 导航控制器有一个属性，`navigationBarHidden`您可以将其设置为隐藏它。

# iphone - 动画虚拟键盘

> ID：11691193
> 
> 赞同：0
> 
> 时间：2012-07-27T15:41:09.817
> 
> 标签：iphone, objective-c, xcode, ipad

我让我的应用程序检测 iPad 上的方向并相应地重新调整它的位置位置，以便它在纵向和横向上都能正常工作。

我在虚拟键盘方法中遇到的问题是我没有考虑方向：在纵向中，一旦用户点击其中一个文本框，该方法就会抬起视图以为键盘腾出空间并使文本框可见（未覆盖）-但是，当用户处于横向并点击文本框时，动画会将视图侧向而不是向上推动，就好像它仍然是纵向的一样。（同样，如果我将 iPad 倒置，它会将我的视图框架向下推而不是向上推）

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
    CGRect textFieldRect = [self.view.window convertRect:textField.bounds fromView:textField];

    CGRect viewRect = [self.view.window convertRect:self.view.bounds fromView:self.view];
    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
    CGFloat numerator = midline - viewRect.origin.y - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
    CGFloat denominator = (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION) * viewRect.size.height;
    CGFloat heightFraction = numerator / denominator;
    if (heightFraction < 0.0)  {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)   {
        heightFraction = 1.0;
    }

    UIInterfaceOrientation orientation =[[UIApplication sharedApplication] statusBarOrientation];

    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)   {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else    {
        animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;
    // viewFrame.origin.x -= animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];
    [self.view setFrame:viewFrame];
    [UIView commitAnimations];
} 
```

我也有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
} 
```

当设备改变方向时，我应该如何更改方法以正确设置动画？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:49:30.690

检测方向并根据该信息决定将视图移动到哪个方向。

```
if ([UIDevice currentDevice].orientation==UIDeviceOrientationLandscapeLeft)
    viewFrame.origin.x -= animatedDistance;
if ([UIDevice currentDevice].orientation==UIDeviceOrientationLandscapeRight)
    viewFrame.origin.x += animatedDistance;
if ([UIDevice currentDevice].orientation==UIDeviceOrientationPortrait)
    viewFrame.origin.y -= animatedDistance;
if ([UIDevice currentDevice].orientation==UIDeviceOrientationPortraitUpsideDown)
    viewFrame.origin.y += animatedDistance; 
```

# java - 无法将值插入数据库

> ID：11691194
> 
> 赞同：1
> 
> 时间：2012-07-27T15:41:12.740
> 
> 标签：java, jsp, servlets

我已经创建了注册 Jsp 和 Servlet。当我使用表单插入值时，未插入的值以及 Apache 日志上出现一些异常。谁能帮我找到实际的错误。在我的查询或连接中？？？？

```
Jul 27, 2012 9:00:30 PM com.asiahospital.db.DataPersistor registerUser
SEVERE: null
java.sql.SQLException: Column count doesn't match value count at row 1
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:842)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:681)
    at com.example.db.DataPersistor.registerUser(DataPersistor.java:29)
    at com.example.servlet.RegistrationServlet.doPost(RegistrationServlet.java:40)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at [...] 
```

违规方法：

```
public void registerUser(User user) { 
    try { 
        Statement stmt = con.createStatement(); 
        String query = "INSERT INTO user VALUES ('" + user.getUserName()+ "','" 
            + user.getPassword() + "','" + user.getFirstName() + "','"
            + user.getLastName() + "','" + user.getEmail() + "','false')"; 
        stmt.execute(query); 
    } catch (SQLException ex) { 
        Logger.getLogger(DataPersistor.class.getName()).log(Level.SEVERE, null, ex); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:44:33.720

您的查询很可能看起来像这样：

```
INSERT INTO my_table(A, B, C) VALUES ('a', 'b') 
```

或者像这样（my_table 仍然有三列）

```
INSERT INTO my_table VALUES ('a', 'b') 
```

很明显，这是行不通的，因为您必须提供与列一样多的值。根据您的评论，我怀疑这是第二种情况。您有一个预先存在的 SQL 语句，并且有人从您的`user`表中添加/删除了一个列，导致该 SQL 语句无效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:44:24.493

在您的插入语句中，您提供的列数与您指定的值数不同。

例如

插入表 1（A、B、C）值（100、1001、1002、1004）。

=> 3 列！= 4 个值。

# javascript - Javascript 动画

> ID：11691197
> 
> 赞同：1
> 
> 时间：2012-07-27T15:41:21.143
> 
> 标签：javascript, animation

有人会如何编写非常自定义的 javascript 动画，类似于这里的动画：[https ://fiber.google.com/about/](https://fiber.google.com/about/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:48:27.987

好吧，那个特定的网站（至少是兔子动画）使用`Swiffy.js`. Swiffy 将 ActionScript/Flash 转换为 HTML/JSON，然后主要使用 SVG 进行渲染，有效地允许开发人员编写 flash 动画，而不必担心客户端有 flash 插件。这很好，因为截至 2011 年，flash 似乎正在下降。这主要是因为 Apple 专注于 HTML5 而不是 Flash，因此 iDevices 将永远无法查看 Flash。正因为如此，Web 开发人员对嵌入 Flash 犹豫不决，因为他们必须为移动查看器提供第二个选项。

因此，在这种情况下，您的答案是“学习 Flash，然后学习 Swiffy，然后意识到使用另一个 JS 库可以更轻松地完成整个事情”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:50:46.867

他们将 SVG 用于这些动画，在这种情况下，我建议您熟悉[Raphael](http://raphaeljs.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:44:20.583

您也可以下载[Firebug](http://getfirebug.com/)以查看页面代码并探索它，看看您是否可以弄清楚他们是如何创建它的。

这是一个入门的好地方，我认为[10 个 javascript 动画框架](http://sixrevisions.com/javascript/10-impressive-javascript-animation-frameworks/)

你也可以用flash制作并上传动画

# php - Wordpress - 将后端用户限制为某些类别

> ID：11691207
> 
> 赞同：1
> 
> 时间：2012-07-27T15:41:46.480
> 
> 标签：php, wordpress, restriction

我正在寻找一个插件来修改 Wordpress，希望这将限制用户只编辑某些类别、帖子和小部件。有谁知道任何可能有帮助的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:49:07.487

我一直使用这个模块来帮助限制和权限[http://wordpress.org/extend/plugins/advanced-access-manager/](http://wordpress.org/extend/plugins/advanced-access-manager/)

# sql - SQL - 优化大表的日期计算

> ID：11691216
> 
> 赞同：4
> 
> 时间：2012-07-27T15:42:29.963
> 
> 标签：sql, oracle, query-optimization

下面这个查询可以优化吗？

```
select
     max(date), sysdate - max(date)
 from
     table; 
```

查询执行时间 ~5.7 秒

我有另一种方法

```
select
    date, sysdate - date
from
    (select * from table order by date desc)
where
    rownum = 1; 
```

查询执行 ~7.9 秒

在这种特殊情况下，表有大约 17,000,000 个条目。

有没有更优化的方法来重写它？

**更新**：好吧，我尝试了你们中的一些人在数据库开发中建议的提示，尽管子集比原来的要小（大约 1,000,000 条记录）。没有索引，查询的运行速度比使用索引慢。

第一个查询，无索引：~0.56 秒，有索引：~0.2 秒。第二个查询，无索引：~0.41 秒，有索引：~0.005 秒。（这让我感到惊讶，我认为第一个查询会比第二个查询运行得更快，也许它更适合较小的记录集）。

我向 DBA 建议了这个解决方案，他将更改表结构以适应此问题，然后我将使用实际数据对其进行测试。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:45:49.943

日期列上是否有索引？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:47:44.157

该查询非常简单，除了在日期列上添加索引之外，可能无法对其进行优化。这是什么数据库？sysdate 是表的另一列吗？

# c# - TreeView 绑定到 xml 文件

> ID：11691225
> 
> 赞同：0
> 
> 时间：2012-07-27T15:43:10.337
> 
> 标签：c#, asp.net, xml

XML:

```
<Parent Name="Jodi">
<Children Name="xxx" age="20">
<Children Name="zzz" age="21">
</Parent>

<Parent Name="John">
<Children Name="aaa" age="18">
<Children Name="bbb" age="17">
</Parent> 
```

我正在尝试将上述 xml 文件绑定到我的 asp.net 页面上的 TreeView；

ASP.NET：

```
 <asp:XmlDataSource ID="DataSource1" runat="server" DataFile="C:/Parents.xml"></asp:XmlDataSource>
<asp:TreeView ID="tvParents" runat="server">
<DataBindings>
<asp:TreeNodeBinding DataMember="Parent" TextField="#InnerText" />
<asp:TreeNodeBinding DataMember="Children" TextField="#InnerText" />
</DataBindings>
</asp:TreeView> 
```

C＃

```
protected void Page_Load(object sender, EventArgs e)
    {

        tvParents.DataBind();
    } 
```

我正在尝试绑定到树视图，例如：

```
Jodi
  XXX
  ZZZ
John
  aaa
  bbb 
```

我的树视图没有显示在页面上，有没有人可以看看指导一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:47:44.543

您的 IIS 可能无法访问“C:/Parents.xml”。您最好使用 Server.MapPath() 并将文件放置在运行 ASPX 页面的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:48:16.527

您必须在 Treeview 上添加 DataSourceId 属性

```
 <asp:XmlDataSource ID="DataSource1" runat="server" DataFile="C:/Parents.xml"></asp:XmlDataSource>
<asp:TreeView ID="tvParents" runat="server" DataSourceId ="DataSource1">
   <DataBindings>
     <asp:TreeNodeBinding DataMember="Parent" TextField="#InnerText" />
     <asp:TreeNodeBinding DataMember="Child" TextField="#InnerText" />
   </DataBindings>
</asp:TreeView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:28:13.020

我今天遇到了类似的事情-您是否尝试过将孩子的值字段指向属性？

```
<asp:XmlDataSource ID="DataSource1" runat="server" DataFile="C:/Parents.xml">
</asp:XmlDataSource>
<asp:TreeView ID="tvParents" runat="server">
<DataBindings>
<asp:TreeNodeBinding DataMember="Parent" TextField="#InnerText" />
<asp:TreeNodeBinding DataMember="Children" ValueField="Name" TextField="#InnerText" />
</DataBindings>
</asp:TreeView> 
```

# sqlite - 查询以在 sqlite 中按不同单词获取同一行

> ID：11691227
> 
> 赞同：0
> 
> 时间：2012-07-27T15:43:19.807
> 
> 标签：sqlite

我是数据库编程的新手。我必须从不同的单词中获取同一行，例如我有 2 列关键字和关键字中的数据可能有多个单词利润、利润、收入但数据列只有一个条目

**关键词** **数据**

利润，利润，收入 它正在增加

现在，当用户输入利润或利润或收入时，他/她会得到相同的数据“它在增加”

你能提供我查询吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:17:58.217

使用[喜欢](https://www.sqlite.org/lang_expr.html#like)：`SELECT data FROM table WHERE keywords LIKE '%Profit%';`

# c# - 如何在 GotFocus 期间从 WPF RichTextBox 中检索 CaretPosition？

> ID：11691230
> 
> 赞同：1
> 
> 时间：2012-07-27T15:43:39.257
> 
> 标签：c#, .net, wpf, textbox, focus

我有一个 TextBox 和一个 RichTextBox 具有相同的文本。每次我在 RichTextBox 内单击时，TextBox 都应该以相同的插入符号位置聚焦。我的第一个想法是这样的：

```
void richTextBox_GotFocus(object sender, RoutedEventArgs e)
{
     vat textRange = new TextRange(rtfBox.Document.ContentStart, rtfBox.CaretPosition);
     plainTextBox.Focus();
     plainTextBox.CaretIndex = textRange.Text.Length;
} 
```

但问题是 RichTextBox 还不知道事件处理程序中的 CaretPosition。

有什么解决方法吗？

也许与 RichTextBox 子类化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:02:21.153

如果您使用 Dispatcher.BeginInvoke 运行该代码，则应在 WPF 完成确定插入符号位置等之后调用它。

例如

```
private void RichTextBox_GotFocus(object sender, RoutedEventArgs e)
{
    Dispatcher.BeginInvoke(new Action(UpdateTextBoxCaretPosition));
}

void UpdateTextBoxCaretPosition()
{
    var textRange = new TextRange(rtfBox.Document.ContentStart, rtfBox.CaretPosition);
    plainTextBox.Focus();
    plainTextBox.CaretIndex = textRange.Text.Length;
} 
```

# twitter-bootstrap - 我怎么知道哪个链接在 twitter 模态对话框中触发了“显示”事件

> ID：11691237
> 
> 赞同：1
> 
> 时间：2012-07-27T15:44:13.500
> 
> 标签：twitter-bootstrap, modal-dialog

我正在使用香草推特引导程序。我有一个从多个链接打开的模式对话框，并希望根据打开它的链接更改对话框的内容：

```
<a href="test/1" data-toggle="modal" data-target="#editItem">Edit 1</a>
<a href="test/2" data-toggle="modal" data-target="#editItem">Edit 2</a>
<a href="test/3" data-toggle="modal" data-target="#editItem">Edit 3</a> 
```

和

```
<div id="editItem">
     <div class="modal-header">boo</div>
     <div class="modal-body">Loading...</div>
</div> 
```

当他们点击时，我想弄清楚触发href

```
$('#editSupportItem').on('show',function(e) {
   var link = ...magic...
   alert($(link).attr('href'));
}); 
```

由于显示事件在模态对话框上，而不是在链接上，我似乎无法找到一种方法来找出触发元素。观察。我可以直接从链接而不是从数据属性调用模态，但这不会让我很高兴！

# android - 如何在 ListView 上禁用此行为

> ID：11691241
> 
> 赞同：0
> 
> 时间：2012-07-27T15:44:20.563
> 
> 标签：android, android-listview

我正在开发一个带有 ListView 的 Android 2.2 应用程序。

我想禁用这个：

我有一个包含三个列表项的 ListView。当我按下第一个列表并且不释放时，我向下移动通过第二个项目和第三个项目。然后，当我的手指放在第三个项目上时，我松开它。之后，我看到它们都有黑色背景。

如何禁用此效果？

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:46:28.727

在 XML 文件中的 ListView 元素中使用它：

```
android:cacheColorHint="@android:color/transparent" 
```

**但是**，如果您的应用具有纯色背景，则将 cacheColorHint 设置为该颜色，因为将其设置为透明会导致滚动缓慢。例如，如果我有一个绿色背景：

```
android:cacheColorHint="#0F0" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:52:17.630

采用

安卓：cacheColorHint="#00000000"

作为 ListView 属性之一。这将禁用颜色缓存，这将停止做这个黑色的事情。

# asp.net - 你如何解密 ASPXAuth，IV 是什么？

> ID：11691251
> 
> 赞同：2
> 
> 时间：2012-07-27T15:44:37.480
> 
> 标签：asp.net, session, cookies, encryption, .aspxauth

有人知道使用什么密钥和 IV 来加密/解密 ASPXAUTH cookie 吗？我想我已经弄清楚了关键部分。

经过大量阅读和研究（以及此处发布的其他问题），我看到 ASPXAUTH 使用了 FormsAuthentication.Encrypt 和 Decrypt 方法。它们反过来使用您在 web/machine.config 文件的 machineKey 部分中定义的任何算法和密钥。

作为参考，我读过这些文章：http: [//msdn.microsoft.com/en-us/library/ff647070.aspx](http://msdn.microsoft.com/en-us/library/ff647070.aspx) http://www.codeproject.com/Articles/16822/The-Anatomy-of-Forms -验证

如果我使用以下 machineKey（来自在服务器场中部署的 msdn 示例）：

```
 <machineKey
    validationKey="32E35872597989D14CC1D5D9F5B1E94238D0EE32CF10AA2D2059533DF6035F4F"
    decryptionKey="B179091DBB2389B996A526DE8BCD7ACFDBCAB04EF1D085481C61496F693DF5F4"
    decryption="AES"
/> 
```

根据后面的链接，ASPXAUTH 将使用具有上述设置的 AES（在托管代码中实现为 RijndaelManaged）。

我想尝试使用标准 RijndaelManaged 函数解密，但输入需要密钥和 IV。

我假设如果我将它从十六进制转换为字节数组，我可以使用密钥作为密钥，这很容易。

但是，我将什么用作 IV 的输入？我在任何地方都找不到此信息或设置。

# sql-server-2008 - 将密码散列到 SQL 中

> ID：11691253
> 
> 赞同：1
> 
> 时间：2012-07-27T15:44:39.440
> 
> 标签：sql-server-2008, passwords, hash

我在 SQL 中直接像这样散列密码：

```
DECLARE @HashThis nvarchar(4000);
SET @HashThis = 'SecretPizza'

INSERT into Users (UserId,Password)
Values ('CryptTest',HASHBYTES('SHA1', @HashThis)) 
```

结果 ：

![在此处输入图像描述](../Images/d640a9be3bc2fddd42d4ba1ae1f6ff98.png)

当我尝试将`SHA1`算法更改为`SHA2_256`或`SHA2_512`我收到以下错误：

![在此处输入图像描述](../Images/20538fc6a50fc0c4a3eea47f0ea1bfd2.png)

**问题 1** - 这真的应该给我类似中文的字符吗？
**问题 2** - 这些是有效算法，为什么我不能使用它们，为什么加密设置`@HashThis`为空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:59:54.113

问题 1：您得到“类似中文”的字符，因为您将 HASHBYTES 返回的 varbinary 值插入到 nvarchar 列中，因此 SQL Server 试图将字节解释为 Unicode 代码点（字符）。

问题 2：SQL Server 2012 之前不支持 - 请参阅[SQL Server 2008 R2 HASHBYTES SHA2 返回 null](https://stackoverflow.com/questions/10114804/sql-server-2008-r2-hashbytes-sha2-returns-null)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:48:18.330

先做

从对偶中选择 HASHBYTES('SHA2-256', @HashThis)；

看看你得到了什么..

# grails - 在 Grails Spring Security Core Plugin 中设置会话超时

> ID：11691256
> 
> 赞同：11
> 
> 时间：2012-07-27T15:45:15.343
> 
> 标签：grails, spring-security

尽管搜索了插件文档和一般搜索，但我找不到这个答案。我得到的最接近的是[这个](http://www.redtoad.ca/ataylor/2011/01/grails-cross-site-request-forgeries-csrf/)页面的结尾，它似乎描述了设置 Tomcat 超时。插件文档有一整节标题为“Config.groovy 中的配置设置”，有没有办法在不涉及容器设置的情况下为插件配置超时？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T16:07:12.233

该插件没有会话持续时间的设置 - 它只使用为整个应用程序配置的任何内容。您可以通过编辑 web.xml （`grails install-templates`如果您还没有运行）并编辑`src/templates/war/web.xml`. 添加

```
<session-config>
   <session-timeout>30</session-timeout>
</session-config> 
```

在`welcome-file-list`元素之前并将`session-timeout`值设置为您想要的任何分钟数。

# javascript - jqgrid，在编辑表单中填写值的按钮？

> ID：11691258
> 
> 赞同：0
> 
> 时间：2012-07-27T15:45:19.433
> 
> 标签：javascript, jquery, forms, button, jqgrid

我希望在我的 jqgrid 编辑表单中的一个输入字段旁边添加一个按钮。当我单击按钮时，我想在输入字段中输入某个值。我可以处理在字段中插入我想要的文本的代码。我不知道的部分是如何使自定义按钮出现在文本字段旁边。请参阅我的草图，以获取按钮。然后我只需要拥有这个的能力：

```
$('#my_new_button').click(... 
```

![在此处输入图像描述](../Images/0a162431771bcc461a168c9e6e07121e.png)

有谁知道我如何在编辑表单中获得这个自定义按钮？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:14:16.687

是的，我认为它可能，在这个答案中看到家伙首先克隆了提交按钮，然后更改了提交按钮的属性，然后将其添加到你想要的元素之后，在你的情况下，它应该在总的 textBox 之后（获取 Id )，然后编写有关单击时要执行的操作的功能...

[http://www.trirand.com/blog/?page_id=393/help/add-your-own-custom-buttons-to-a-form-edit-dialog-page/](http://www.trirand.com/blog/?page_id=393/help/add-your-own-custom-buttons-to-a-form-edit-dialog-page/)

有了这个答案，您也可能会得到一些帮助，在此他首先更改了提交按钮，然后还添加了一个新的自定义按钮……您可以从中获取该功能..

[如何将自定义按钮添加到 JqGrid 添加/编辑表单？](https://stackoverflow.com/questions/10320523/how-to-add-custom-buttons-to-jqgrid-add-edit-forms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T01:39:21.797

```
//在#member_id之后插入一个链接到编辑表单中

    $.extend($.jgrid.edit, {
        重新创建表格：真，
        宽度：700，
        viewPagerButtons：假，
        beforeShowForm: 函数 ($form) {
            $('检查 ID')
                .click（函数（）{
                    alert("身份证没问题！");
                }).addClass("fm-button ui-state-default ui-corner-all fm-button-icon-left")
                  .insertAfter("#member_id");
        }
    });

//在#member_id之后插入一个链接到添加表单中

    $.extend($.jgrid.new, {
        重新创建表格：真，
        宽度：700，
        viewPagerButtons：假，
        beforeShowForm: 函数 ($form) {
            $('检查 ID')
            .click（函数（）{
                alert("身份证没问题！");
            }).addClass("fm-button ui-state-default ui-corner-all fm-button-icon-left")
              .insertAfter("#member_id");
        }
    });

```

# objective-c - UINavigation 控制器根视图更改

> ID：11691259
> 
> 赞同：4
> 
> 时间：2012-07-27T15:45:23.923
> 
> 标签：objective-c, ios, ios5, uistoryboard, navigationcontroller

我最近遇到了 Storyboards 的一个小问题。我`UINavigationController`与 MainView 有关系`RootViewController`（这个有通向我应用程序其余部分的所有按钮）。但是，我尝试更改，`RootViewController`以便我可以启用持久登录而不是 UIWebview 登录。当我将新的登录表单`ViewController`设置为根时，我的 MainView 上的按钮停止工作。

我也将 设置`UINavigationController`为初始视图控制器。关于必须在这里做什么的任何想法？

我知道我可以简单地在情节提要中使用登录屏幕并以编程方式调用它，将其设置为在布尔条件下前进（loginDidSucceed）。但是，我对为什么在 StoryBoard 中发生这种行为感到困惑。

解决方案参考自：[PresSplash/Login ViewController With StoryBoard](https://stackoverflow.com/questions/11697747/how-to-present-a-splash-login-view-controller-using-storyboards)

感谢您的帮助和努力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:24:42.690

我认为这里的主要问题是按钮的目标是旧的视图控制器实例；当它超出范围时，他们的目标不再存在。

# jquery - jQuery .val() 在 onChange 事件中未定义

> ID：11691261
> 
> 赞同：0
> 
> 时间：2012-07-27T15:45:31.050
> 
> 标签：jquery, jquery-selectors

```
function ddlList_Changed() {
    var ddlList = jQuery('select[name*="ddlList"]');
    var value = jQuery(ddlList).val();
    alert(value);
} 
```

上面显示了每当下拉列表的选择发生更改时显示“未定义”的警报。

我已经阅读过其他情况，即 .val() 未定义，建议在文档准备好/完全加载*后*需要调用 .val() - 但无论如何，这肯定已经过了那个阶段仅在选择更改时被解雇？

注意： ddlList 不为空，它最初选择它没有任何问题。.val() 似乎是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:48:43.967

请提供代码示例（相关的 HTML、JavaScript 事件代码等），以便我们查看错误所在。因为错误的不是选择更改事件或 val() 函数。

此外，您可能不应该一遍又一遍地将 ddlList 重新包装在 jQuery 对象中。

另请注意，当在元素上调用事件处理程序时，该元素被分配给`this`变量 - 无需再次使用 jQuery 选择器找到它。

工作示例：http: [//jsfiddle.net/RCLjy/5/](http://jsfiddle.net/RCLjy/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:56:11.917

```
$('select').change(function(){
     var ddlList = $('select option:selected').val();
     alert(ddlList);                   
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:49:58.293

[http://jsfiddle.net/39hwp/](http://jsfiddle.net/39hwp/)

所有你需要的是：

```
$('select[name*="ddlList"]').change(function () {
    alert($(this).val());     
}); 
```

# jquery - HTML5 加载一个 内容进入主视图包装？

> ID：11691262
> 
> 赞同：1
> 
> 时间：2012-07-27T15:45:36.420
> 
> 标签：jquery, html

我对前端开发并不陌生，但是我遇到了一个我以前从未做过的客户的要求，如果有人能指出我正确的方向，我将不胜感激。

我的 index.html 中有 7 个`<section>`标签。每个部分代表一个站点导航链接。所以“主页”链接将显示“主页部分”等等。并且请求的部分被填充在主要内容视图/包装器中。

通常，我会使用 MVC 框架来实现这个功能。但是，我被要求不要实现 MVC。我的想法是找出单击了哪个导航链接，然后将特定部分加载到 main-content-wrapper 中。

我怎样才能做到这一点，以便相应地调整 main-content-wrapper 的高度，并且如果需要有一个浏览器滚动条？因为有些部分的内容很长。

顺便说一句，main-content-wrapper'溢出已设置为'auto'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:59:52.850

如果您要填充`section`页面上的所有 -s，您可以试试这个 - [http://jsfiddle.net/Fyhm7/](http://jsfiddle.net/Fyhm7/)

**HTML**

```
<a href="#" data-section="#home">Home</a>
<a href="#" data-section="#products">Products</a>
<a href="#" data-section="#contact">Contact</a>

<section id="home">Home</section>
<section id="products">Products</section>
<section id="contact">Contact</section> 
```

**JS**

```
$("a").on("click", function() {
    var id = $(this).data("section");

    $("section:visible").fadeOut(function() {
        $(id).fadeIn();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:52:33.087

我不清楚你在哪一部分遇到了麻烦。你能用ajax动态加载内容吗？像这样的东西（[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('#mycontent').html(data);
  }
}); 
```

如果不允许使用 ajax，那么 iframe 和在 yoru 链接上使用 target 属性怎么样？

或者您只是遇到了 CSS 问题并让动态内容正确溢出？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:14:02.383

这是另一个使用 CSS3 的建议（我知道这可以改进，但我只是快速地做这件事给你一个想法）。

这假设内容已经加载。如果您通过 AJAX 加载，我会以不同的方式进行加载。

**HTML**

```
<nav>
  <a href='#content1'>Content 1</a>
  ...
  <a href='#content7'>Content 7</a>
</nav>
<article id='main-content-wrapper'>
  <section id='content1'>content 1</section>
  ...
  <section id='content7'>content 7</section>
</article> 
```

**CSS**

```
#main-content-wrapper{ 
  max-height: 30em; /* arbitrary for example only */ 
  overflow:auto; /* scroll if over max-height */
}
#main-content-wrapper section:not(:first-child){ display:none; }
#main-content-wrapper section:target{ display:block; } 
```

**JavaScript**（如果你不想要 CSS3 :target - 我还没有测试过这个）

```
var id = location.hash.replace('#','');
if( id.length > 0 ){
  var sections = document.getElementById('main-content-wrapper').getElementsByTagName('section');
  for( var i = sections.length-1; i >= 0; i-- ){
    sections[i].style.display = 'none';
  }
  document.getElementById(id).style.display = 'block';
} 
```

**jQuery版本**

```
if( location.hash.length > 0 ){
  $('#main-content-wrapper content').hide();
  $(location.hash).show();
} 
```

# python - 从 HTML 表单运行 Python 代码

> ID：11691265
> 
> 赞同：3
> 
> 时间：2012-07-27T15:45:48.557
> 
> 标签：python, html, web.py

我正在使用 webpy 制作一个 Web 服务器，现在我有一个简单的表单和一个我写的特殊类。我希望用户能够在表单中编写代码，如果输入是函数调用，则调用用户提交的函数，否则如果输入不是函数调用，则对输入执行任何操作。我相信这必须在模板文件的某个地方实现？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:06:31.527

如果我理解正确，您正在寻找一种在服务器上运行客户端提交的代码并从表单获取输入的方法。

所以假设你有一个看起来像这样的表单模板（注意 textarea 元素的名称）：

```
<form method="POST">
<textarea name="code" />
<input type="submit">
</form> 
```

您需要向页面类添加一个 POST 方法来处理输入并运行代码：

```
class MyPage:
    def POST(self):
        data = web.input()
        eval(data.code) 
```

对于您不完全信任的任何人都可以访问的表单，这*不是*您应该做的事情，因为它可以在您的网络服务器上运行他们想要的任何代码（例如，他们可以轻松尝试并删除所有文件服务器）。但是，如果您对安全风险感到满意或只是在玩玩，请务必阅读 Pythons [eval](http://docs.python.org/library/functions.html#eval)的文档以查看您可以传递给它的其他参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:52:02.227

创建一个 Python cgi 脚本并在您的网络服务器的 cgi-bin 中运行它。[这是一个教程。](http://webpython.codepoint.net/cgi_tutorial)然后脚本可以访问表单的输入并使用它做任何你想做的事情。

# python - Python beautifulsoup - 获取输入值

> ID：11691271
> 
> 赞同：22
> 
> 时间：2012-07-27T15:46:15.040
> 
> 标签：python, beautifulsoup

我有很多这样的表行：

```
<tr>
    <td>100</td>
    <td>200</td>
    <td><input type="radio" value="123599"></td>
</tr> 
```

迭代：

```
table = BeautifulSoup(response).find(id="sometable") # Make soup.

for row in table.find_all("tr")[1:]: # Find rows.
    cells = row.find_all("td") # Find cells.

    points = int(cells[0].get_text())
    gold = int(cells[1].get_text())
    id = cells[2].input['value']

    print id 
```

错误：

```
File "./script.py", line XX, in <module>
id = cells[2].input['value']
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

如何获得输入值？我不想使用正则表达式。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-08-13T10:48:09.713

```
soup = BeautifulSoup(html)
try:
    value = soup.find('input', {'id': 'xyz'}).get('value')
except Exception as e:
    print("Got unhandled exception %s" % str(e)) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-27T15:55:34.030

你想在单元格内找到 <input> 元素，所以你应该像这样在单元格上使用 find/find_all ：

```
cells[2].find('input')['value'] 
```

# sql - SQL：查看用户 ID 的全名（发送至/发送自）

> ID：11691275
> 
> 赞同：0
> 
> 时间：2012-07-27T15:46:32.033
> 
> 标签：sql, sql-server, join, foreign-keys

我有以下表格：

**学生们**

```
StudentID     UserID     FirstName     LastName
1             1          John          Doe
2             3          Peter         Pan
3             5          Mark          Twain 
```

**雇员**

```
EmployeeID     UserID     FirstName     LastName
1              2          Juan          Carlos
2              4          Joe           Reyes
3              6          Ash           Ketchum 
```

**用户**

```
UserID     Username
1          test1
2          test2
3          test3
4          test4
5          test5
6          test6 
```

**留言**

```
MessageID     MessageFrom     MessageTo     Subject
1             1               2             test message
2             4               3             another test message
3             3               5             another test message 
```

我想像这样显示输出

```
MessageID     MessageFrom     MessageTo     Subject
1             John Doe        Juan Carlos   test message
2             Joe Reyes       Peter Pan     another test message
3             Peter Pan       Mark Twain    another test message 
```

Where`MessageFrom`并返回来自用户表`MessageTo`的外键值。`UserID`学生可以向员工发送消息，反之亦然。他们还可以在学生和员工之间发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:00:06.467

我认为这又是[XY 问题](http://www.perlmonks.org/?node_id=542341)。

你为什么把你`Users`的分成两部分？

为什么不这样做（这将解决整个问题）：

```
UserID  |   FirstName   |  LastName | UserName |  Type
-------------------------------------------------------
  1           John          Doe        test1       1
  2           Juan          Carlos     test2       2
  3           Mark          Twain      test3       1 
```

并添加一个表类型

```
TypeId  |   TypeName 
```

* * *

```
 1          Students
  2          Employees 
```

这样，您就有 2 个用户表，而不是 3 个。所有用户和名称都在同一个表中，因为[它应该是](http://databases.about.com/od/specificproducts/a/normalization.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:56:10.137

这应该可以解决问题，因为您不在乎消息是否与学生或员工有关，您可以将这两个表合并。

```
SELECT 
    MessageID,
    (FromTable.FirstName + ' ' + FromTable.LastName) AS MessageFrom,
    (ToTable.FristName + ' ' + ToTable.LastName) AS MessageTo,
    Subject
FROM
    Messages
    INNER JOIN
    (
        (SELECT UserID, FirstName, LastName FROM Students)
        UNION 
        (SELECT UserID, FirstName, LastName FROM Employees)
    ) AS FromTable ON FromTable.UserID = Messages.MessageFrom
    INNER JOIN
    (
        (SELECT UserID, FirstName, LastName FROM Students)
        UNION 
        (SELECT UserID, FirstName, LastName FROM Employees)
    ) AS ToTable ON ToTable.UserID = Messages.MessageTo 
```

# java - 查询特定的 Mongodb 字段

> ID：11691286
> 
> 赞同：0
> 
> 时间：2012-07-27T15:47:33.220
> 
> 标签：java, mongodb

我需要将以下查询转换为 Java 代码

使用 dbName
db.collectionName.find({},{reference:1})

我正在尝试获取键“参考”的值

我尝试了以下方法，但这似乎不是这样

```
 Mongo dbConnection;
        DB dbobject;
        dbConnection = new Mongo("localhost", 27017);
        dbobject = dbConnection.getDB("dbName");
        DBCollection profileCollection = dbobject.getCollection("collectionName");
        BasicDBObject query = new BasicDBObject();
        query.put("{},{reference:1}");
        DBCursor mongocursor =profileCollection.find("{}, {reference:1}");
        try {
            while(mongocursor.hasNext()) {
               System.out.println(mongocursor.next().get("reference"));
            }
        } finally {
            mongocursor.close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:09:32.560

尝试以下

```
basicDBObject uqery = new BasicDBObject();
query.put("reference", 1);
DBCursor cursor = profilecollection.find(query); 
```

您不需要指定 {} ...它是返回所有字段的默认选项

# php - preg_replace 正斜杠后的所有内容 /

> ID：11691290
> 
> 赞同：1
> 
> 时间：2012-07-27T15:47:53.783
> 
> 标签：php

我遇到了这个错误。我试图在字符串中找到 / 之后删除所有字符。

例如“google.com/remove”应该变成“google.com”

```
preg_replace ( '////.*/' , '' , $string); 
```

消息：preg_replace()：未知修饰符 '/'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:57:21.600

试试这个：

```
preg_replace ('/\/(.*)/' , '' , $string); 
```

目前无法测试它，但它应该可以工作......

编辑：快速在线测试，按预期工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:57:51.133

不习惯那样`preg_replace`做。

```
// PHP 5.4
$string = explode('/', $string, 2)[0];

// Before PHP 5.4
$string = array_shift(explode('/', $string, 2)); 
```

# php - 多个get请求完成后调用jquery函数

> ID：11691293
> 
> 赞同：0
> 
> 时间：2012-07-27T15:48:13.797
> 
> 标签：php, jquery

好吧，所以在我的网站上，我的主页加载时使用 .get 方法创建了 4 个轮播。我想知道在每个轮播成功加载后如何调用 js 函数。有时有 3 到 4 个有时没有任何轮播。如果我使用 get 请求任何东西，他们是否会跟踪？

谢谢一堆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:04:53.070

Jquery 最近引入了[Deferred](http://api.jquery.com/category/deferred-object/)对象并使每个 ajax 调用都返回一个作为[promise工作的](http://wiki.commonjs.org/wiki/Promises/A)[jqxhr](http://api.jquery.com/jQuery.ajax/#jqXHR)对象。所有这一切意味着您可以使用如下语法摆脱疯狂情况的回调金字塔：

```
$.when(
    $.get('http://example.com'),
    $.get('http://example.com'),
    $.get('http://example.com')
).done(function(resp1, resp2, resp3){
    console.log(resp1, resp2, resp3);
    alert('all done \o/');
}); 
```

*注意*：`done`仅当所有先前的承诺成功返回时，才会调用函数。对于无论使用什么都运行的回调[always](http://api.jquery.com/deferred.always/)。只捕获错误有[fail](http://api.jquery.com/deferred.fail/)。

# makefile - makfile 变量扩展

> ID：11691294
> 
> 赞同：0
> 
> 时间：2012-07-27T15:48:15.667
> 
> 标签：makefile, gnu-make

我有一些相互使用的库。每当我构建它们中的任何一个时，我都需要定义预处理器定义以确保使用正确的可见性修饰符（例如 Windows 中的 dllimport/dllexport）。

所有库都使用相同的makefile，即它们共享规则、CFLAGS 等。所有这些库仅在输入文件列表上有所不同，其余的makefile 由库共享。

共享的 makefile 有一个包含所有库列表的变量，如下所示：

```
MODULE_LIBS = liba123 libb456 libc999 
```

然后，我需要为每个库启用这些预处理器定义：

```
For liba123: -Da123_EXPORTS
For libb456: -Db456_EXPORTS
For libc999: -Dc999_EXPORTS 
```

这些库中的每一个都存在于它们各自的子文件夹中，这些子文件夹的名称类似于库本身（例如 liba123、libb456 等）。因此，我编写了这个 makefile 技巧，以根据正在编译的文件的路径启用这些 EXPORTS 定义：

%.o: %.c
     $(CC) $(CPPFLAGS) $(CFLAGS) **-D$(filter $(MODULE_LIBS),$(subst lib, ,$(subst /, ,$@)))_EXPORTS** -c - o $@ $<

我必须到处添加那个东西 ('-D$(filter $(MODULE_LIBS),$(subst lib, ,$(subst /, ,$@)))_EXPORTS')，因为我有很多类似的规则。所有这些不同的规则都无能为力，但它们有一个共同点：$(CPPFLAGS)。
问题来了。我可以将“-D$(filter $(MODULE_LIBS),$(subst lib, ,$(subst /, ,$@)))_EXPORTS”添加到 CPPFLAGS 中吗它在哪里使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:09:06.243

我想我会这样做：

```
liba123/%.o : EXPORTS=a123_EXPORTS
libb456/%.o : EXPORTS=b456_EXPORTS
libc999/%.o : EXPORTS=c999_EXPORTS

%.o: %.c
    $(CC) $(CPPFLAGS) $(CFLAGS) -D$(EXPORTS) -c -o $@ $< 
```

但是，如果您愿意，可以将它们放在 CPPFLAGS 中：

```
liba123/%.o : CPPFLAGS+=-Da123_EXPORTS
libb456/%.o : CPPFLAGS+=-Db456_EXPORTS
libc999/%.o : CPPFLAGS+=-Dc999_EXPORTS 
```

# vb.net - vb.net水晶报表查看问题

> ID：11691298
> 
> 赞同：0
> 
> 时间：2012-07-27T15:48:20.067
> 
> 标签：vb.net, crystal-reports-2008

我有一个 vb.net 应用程序，其中包含您可以从中选择的报告列表。
当您选择一个报表时，它会加载数据并在 Crystal Report Viewer 中显示该报表。但是，报告显示太大了，调整它大小的唯一方法是还原屏幕，然后将其还原为全屏。滚动条仅在您向下和向上恢复页面后可见。

查看器的生成代码如下。

```
Me.CrystalReportViewer1.ActiveViewIndex = -1
    Me.CrystalReportViewer1.AutoValidate = System.Windows.Forms.AutoValidate.EnablePreventFocusChange
    Me.CrystalReportViewer1.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle
    Me.CrystalReportViewer1.Cursor = System.Windows.Forms.Cursors.Arrow
    Me.CrystalReportViewer1.DisplayBackgroundEdge = False
    Me.CrystalReportViewer1.Dock = System.Windows.Forms.DockStyle.Fill
    Me.CrystalReportViewer1.EnableDrillDown = False
    Me.CrystalReportViewer1.Location = New System.Drawing.Point(230, 0)
    Me.CrystalReportViewer1.Name = "CrystalReportViewer1"
    Me.CrystalReportViewer1.SelectionFormula = ""
    Me.CrystalReportViewer1.ShowCloseButton = False
    Me.CrystalReportViewer1.ShowGroupTreeButton = False
    Me.CrystalReportViewer1.ShowRefreshButton = False
    Me.CrystalReportViewer1.ShowTextSearchButton = False
    Me.CrystalReportViewer1.Size = New System.Drawing.Size(517, 715)
    Me.CrystalReportViewer1.TabIndex = 1
    Me.CrystalReportViewer1.ToolPanelView = CrystalDecisions.Windows.Forms.ToolPanelViewType.None
    Me.CrystalReportViewer1.ViewTimeSelectionFormula = "" 
```

我这样称呼它：

```
Dim rpt As String
    rpt = ListBox1.Items(ListBox1.SelectedIndex)
    If Not CrystalReportViewer1.ReportSource Is Nothing Then CrystalReportViewer1.ReportSource.dispose()

    Select Case rpt
        Case "Scoot"
            myreport = New graduation
            LoadDatabaseInfo(myreport)
            myreport.SetParameterValue("doop", indrno.Text)
            'myreport.SetParameterValue("dte", indate.Value)
            myreport.SetParameterValue("name", txb.Text)
            CrystalReportViewer1.ReportSource = myreport
            CrystalReportViewer1.Refresh()
            CrystalReportViewer1.Zoom(55) 
```

我该如何解决这个..非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:50:27.877

与其缩放到 55%，不如尝试使用值 1 来适应页面宽度或使用 2 来适应页面（来自[MSDN](http://msdn.microsoft.com/en-us/library/ms226873%28v=vs.80%29.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T13:25:15.037

我能够通过设置窗口的高度和宽度属性来设置像素值来满足我的调整大小需求。

IE

```
 CrystalReportViewer.Width = 1100
  CrystalReportViewer.Height = 1200 
```

需要一些时间才能使您的值正确，但这很有效，而且我没有任何缩放问题。

# eclipse-plugin - eclip 说唱演示源代码

> ID：11691301
> 
> 赞同：0
> 
> 时间：2012-07-27T15:48:35.373
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-rap

我正在阅读 Eclipse RAP 教程、示例和演示。从官方网站我得到了一些演示。知道如何获取该演示的源代码吗？我试图通过 CVS 访问。但是找不到演示源代码。请求您对此提供帮助。

以下是进行演示的站点。

[在此处输入链接描述](http://rap.eclipsesource.com/rapdemo/examples#input)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:42:51.507

我通过 git 得到了它：

[https://github.com/eclipse/rap/tree/master/bundles/org.eclipse.rap.examples](https://github.com/eclipse/rap/tree/master/bundles/org.eclipse.rap.examples)和 [https://github.com/eclipse/rap/tree/master/bundles/org.eclipse.rap。例子.pages](https://github.com/eclipse/rap/tree/master/bundles/org.eclipse.rap.examples.pages)

# c# - JQuery 对话框打开折叠

> ID：11691303
> 
> 赞同：1
> 
> 时间：2012-07-27T15:48:42.520
> 
> 标签：c#, jquery, asp.net, .net-3.5, jquery-dialog

我在一个更大的解决方案中编写了这个代码。关键是将asp:ImageButton 添加到asp:GridView。单击此图像按钮将触发对 JQuery 对话框的 javascript 调用。

此对话框绑定到包含 asp:BulletedList 的 div。

很简单，我让它工作了，但是当我单击按钮并打开对话框时，它显示为仅折叠到标题栏。我可以调整窗口大小并展开窗口以显示内容，但我希望它从一开始就打开到正确的大小。

将 Resizable 选项设置为 false 只会在折叠模式下阻止它，我再也看不到数据了。此外，在 IE 中从呈现的页面打开源代码会显示一个空 div（对话框使用的 div），而对话框折叠到标题栏，但是在我展开窗口并显示我的 BulletedList 数据后，显示源代码通过右键单击项目符号列表仍然显示一个空的 div ...

这是代码，gridview 要大得多，并且使用了项目模板，因为每列都有特定的页眉和页脚，但我取出了所有不相关的东西。

# .ascx 文件

### Javascript：

```
function ShowReferedTasks() {
    $('#litReferedTasks').dialog({
        autoOpen: true,
        modal: true,
        minHeight: 150,
        minWidth: 500,
        resizable: true
    });
} 
```

### 包含触发对话框的按钮的gridview：

```
<ext:GridView ID="gvTaskParameters" runat="server" AutoGenerateColumns="False" DataKeyNames="TaskParameterID"
    ShowFooter="<%# _isAdmin %>" ShowHeaderWhenEmpty="True" ShowFooterWhenEmpty="True"
    EmptyDataText="Aucun paramètre disponible" AllowPaging="True" 
    PagerSettings-Mode="NextPreviousFirstLast" 
    OnPageIndexChanging="gvTaskParameters_PageIndexChanging" OnRowCancelingEdit="gvTaskParameters_RowCancelingEdit"
    OnRowEditing="gvTaskParameters_RowEditing" OnRowDeleting="gvTaskParameters_RowDeleting"
    OnRowUpdating="gvTaskParameters_RowUpdating" OnRowCommand="gvTaskParameters_RowCommand"
    OnRowDataBound="gvTaskParameters_RowDataBound" 
    OnDataBound="gvTaskParameters_DataBound">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:ImageButton ID="ibViewTasks" runat="server" CausesValidation="False" CommandName="ViewTasks"
                    ImageAlign="Middle" ImageUrl="../../js/jquery-ui-1.8.19.custom/development-bundle/demos/images/icon-docs-info.gif" AlternateText="<%$ resources:resource, images_VoirTaches %>"
                    CommandArgument='<%# Eval("TaskParameterID") %>' />
                <%--<input id="ibViewTasks" class="ui-state-default ui-corner-all" type="image" src="../../js/jquery-ui-1.8.19.custom/development-bundle/demos/images/icon-docks-info.gif" value="button" />--%>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</ext:GridView> 
```

### 绑定到对话框的 div：

```
<div id="litReferedTasks" class="" title="Tâches Référées" style="background-color: White; position: absolute;">
    <div style="padding-left: 25px; padding-bottom: 25px; padding-right: 25px;">
        <asp:BulletedList ID="blReferedTasks" runat="server" DisplayMode="Text">
        </asp:BulletedList>
    </div>
</div> 
```

# C# 中的代码隐藏：

```
else if (e.CommandName == "ViewTasks")
            {
                TaskParameterMapManager mgr = new TaskParameterMapManager(DatabaseConnection);
                int id = Convert.ToInt32(e.CommandArgument.ToString());
                var ts = mgr.GetTasks(id).OrderBy(t => t.TaskDescription);                

                this.blReferedTasks.DataSource = ts.ToList();
                this.blReferedTasks.DataTextField = "TaskDescription";
                this.blReferedTasks.DataBind();

                ScriptManager.RegisterStartupScript(this, this.GetType(), "Key_ShowReferedTasks", "ShowReferedTasks();", true);                
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:47:33.627

正如@chris 建议的那样，答案是删除对话框使用的 div 中的“position:absolute”样式标签。

# mercurial - 将 Mercurial 存储库更新为具有特定标签的版本的脚本

> ID：11691310
> 
> 赞同：0
> 
> 时间：2012-07-27T15:49:20.083
> 
> 标签：mercurial

我们自动从远程存储库中提取并执行常规的 Post-Pull 更新。在某些情况下，我们希望存储库不更新到`tip`，而是更新到具有特定标签（标记）的节点。

我错过了一个明显的选择吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:58:25.390

看来这`hg update --rev <tag name>`应该为您解决问题。

# spring - 如何为 Spring 提供来自 bundle 片段的 OSGi 资源？

> ID：11691311
> 
> 赞同：1
> 
> 时间：2012-07-27T15:49:23.703
> 
> 标签：spring, configuration, osgi, fragment

我面临以下问题：我正在使用 Spring 开发 OSGi 包，我希望允许将使用我的包的开发人员通过片段添加 Spring 上下文文件。

这些文件将用于配置我的 Spring beans（一个类似的没有 Spring 的现有示例：*org.apache.log4j*片段中的配置文件）。

我必须使用 Spring 框架有几个原因超出了这个问题的范围，但我不能使用以下指令

```
<import resource="..."/> 
```

因为我什至不确定某些片段在运行时是否可用（它是可选配置），而且我知道如果找不到资源，Spring 会抱怨。理想情况下，我想要这样的东西：

```
<import resource="my_default_configuration.xml"/>
<import resource="my_extended_configuration.xml"
        doesNotComplainIfAbsent="true"
        override="true"/> 
```

你有什么想法可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:45:39.843

我认为正确使用 OSGi 会是一种更好的方法。Spring DM（AKA Gemini Blueprint）允许您通过 OSGi 导入和导出 Spring bean。因此，您的包可以尝试导入与特定接口匹配的所有 bean，使用您的包的开发人员将从他们自己的包中导出。它仍然是可选的，因为如果开发人员选择不提供任何列表，您最终会在捆绑包中得到一个空列表。

# emacs - 在 Emacs 中移动到搜索查找的开始和结束

> ID：11691313
> 
> 赞同：4
> 
> 时间：2012-07-27T15:49:29.473
> 
> 标签：emacs

接受搜索时，如何在搜索字符串的开头或结尾找到点？

所以说你做Cs“foobar”，当我按下RET时，我想把我的光标放在找到的字符串的末尾，如果我按下C-RET，我想把光标放在开头。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:45:45.243

试试这个：

```
(defun my-isearch-exit-other-end ()
  "Exit isearch at the other end"
  (interactive)
  (when isearch-forward (goto-char isearch-other-end))
  (isearch-exit))

(define-key isearch-mode-map (kbd "<C-return>") 'my-isearch-exit-other-end) 
```

# php - 我在哪里丢失了我的对象上下文？

> ID：11691314
> 
> 赞同：1
> 
> 时间：2012-07-27T15:49:29.613
> 
> 标签：php

再试一次。我之前的问题已经被否决了。

我正在通过一个从未通过静态方法实例化的类加载一个类。然而，我正在加载的类应该被实例化，但我怀疑执行永远不会那么远。此类中没有任何静态内容，但 php 不断抛出：

```
**Fatal error: Using $this when not in object context** 
```

这是整个课程：

```
class Config{

    public $_config;

    public function load()
    {
        $modules = array();
        $modules = scandir(MOD);
        $n = count($modules);
        for($i=0;$i<$n;$i++)
        {
            if($modules[$i]==='.'||$modules[$i]==='..'||strpos($modules[$i],'.'))
            { unset($modules[$i]); }

        }
        $modules = array_values($modules);
        $m = count($modules);

        for($i=0;$i<$m;$i++)
        {
            $mod = $modules[$i];
            $this->_config[$mod] = array();// **Error thrown here.**
            $cfgfiles = scandir(MOD.DS.$mod.DS.'config');
            $num = count($cfgfiles);

            for($i=0;$i<$num;$i++)
            {
                if($cfgfiles[$i]==='.'||$cfgfiles[$i]==='..')
                    { unset($cfgfiles[$i]); }
            }

            $cfgfiles = array_values($cfgfiles);
            $k = count($cfgfiles);

            for($j=0;$j<$k;$j++)
            {
                include(MOD.DS.$mod.DS.'config'.DS.$cfgfiles[$j]);
                $modcfg = substr($cfgfiles[$j], 0, -4);
                $this->_config[$mod][$modcfg] = array();
                $this->_config[$mod][$modcfg] = $cfg;
            }

        } 
        return $this->_config;
    }

} 
```

可以在此处找到概述我的问题的更多信息：

[https://stackoverflow.com/questions/11653956/using-this-when-not-in-object-context-but-supposedly-i-am](https://stackoverflow.com/questions/11653956/using-this-when-not-in-object-context-but-supposedly-i-am)

好的，根据要求，这是调用此类的代码，是的，它是一个静态函数。这是我想知道的，但是另一个类中的函数是静态的这一事实似乎对其他类的加载没有任何影响，只有这个。

```
public static function init()
{
    $farray = scandir(SYS);

    for ($i=0;$i<count($farray);$i++)
        { if(strpos($farray[$i],'.php'))
        {
        $item = $farray[$i];
        require (SYS.DS.$item);
        $className = substr($item, 0, -4);
        self::$_names[] = $className;
        $obj = new $className();
        self::$_objs[] = $obj;
        self::$_classes = array_combine(self::$_names, self::$_objs);
        }
    }
}

public static function getClass($class)
{
    if(isset(self::$_classes[$class]))
        { return self::$_classes[$class]; }
    else
        { return false; }
} 
```

好的，我`debug_backtrace()`在 the 之前的行添加了一个，`error($this->_config[$mod]=array())`这就是我得到的，但我不明白它的含义。

```
array(2) 
 { [0]=> array(6) 
{ ["file"]=> string(25) "C:\xampp\htdocs\framework\fw.php" 
["line"]=> int(45) 
["function"]=> string(4) "load" 
["class"]=> string(6) "Config" 
["type"]=> string(2) "::" 
["args"]=> array(0) { } } 

[1]=> array(6) 
{ ["file"]=> string(26) "C:\xampp\htdocs\index.php" 
["line"]=> int(31) 
["function"]=> string(4) "init" 
["class"]=> string(2) "Fw" 
["type"]=> string(2) "::" 
["args"]=> array(0) { } } } 
```

* * *

好的，我已经让所有回答这个问题的人都失望了。事实证明，我确实无意中在 Fw::init 中对 Config::load 进行了静态方法调用。因为我做了很多修改并一直在努力，直到我睡眼惺忪，我不知不觉地结束了同一个课程的两个不同版本，一个在我的服务器上，一个在我的编辑器上。

我现在要去学习如何使用源代码控制应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:57:38.257

这里最有可能发生的事情是您正在`Config::load()`静态调用该方法。这种类型的代码将导致您在问题中引用的错误：

```
Config::load() 
```

`load()`您可以通过实例化一个对象并在实例上调用该方法来修复它。像这样：

```
$config = new Config();
$config->load(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:56:01.987

尝试说明 $_config = array() 开头：

`public $_config = array();`

看看是否有帮助。

它看起来不错，我已经为你更好地隔开它......

```
class Config {

    public $_config = array();

    public function load()
    {
        $modules = array();
        $modules = scandir(MOD);
        $n = count($modules);
        for($i=0; $i < $n; $i++)
        {
            if($modules[$i]==='.' || $modules[$i]==='..' || strpos($modules[$i],'.'))
            { 
                unset($modules[$i]); 
            }
        }
        $modules = array_values($modules);
        $m = count($modules);

        for($i=0; $i < $m; $i++)
        {
            $mod = $modules[$i];
            $this->_config[$mod] = array();// **Error thrown here.**
            $cfgfiles = scandir(MOD.DS.$mod.DS.'config');
            $num = count($cfgfiles);

            for($i=0; $i < $num; $i++)
            {
                if($cfgfiles[$i]==='.' || $cfgfiles[$i]==='..')
                { 
                    unset($cfgfiles[$i]); 
                }
            }

            $cfgfiles = array_values($cfgfiles);
            $k = count($cfgfiles);

            for($j=0; $j < $k; $j++)
            {
                include(MOD.DS.$mod.DS.'config'.DS.$cfgfiles[$j]);
                $modcfg = substr($cfgfiles[$j], 0, -4);
                $this->_config[$mod][$modcfg] = array();
                $this->_config[$mod][$modcfg] = $cfg;
            }

        } 
        return $this->_config;
    }

} 
```

# language-agnostic - 当提到“数字运算”时，“密集”有多密集？

> ID：11691318
> 
> 赞同：4
> 
> 时间：2012-07-27T15:49:39.783
> 
> 标签：language-agnostic

我目前正在阅读/学习 Erlang，并且经常注意到它（真的）不适合“大量计算”。现在我经常遇到这个短语或类似的词，但从来不知道“重”到底是什么意思。

如何确定一项操作是否是计算密集型的？可以在测试前量化吗？

编辑：

计算量、算法复杂度或输入值大小之间是否存在差异。

例如`1000 computaions of 28303 / 4`vs`100 computations of 239847982628763482 / 238742`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:17:21.320

当您具体谈论 Erlang 时，我怀疑您是否总体上想要开发需要使用它进行密集数字运算的应用程序。也就是说——你不需要学习 Erlang 来编写物理引擎。所以不要担心 Erlang 对你来说太慢了。

从 Erlang 到一般问题，这些事情几乎总是归结为相对论。让我们忽略数字运算，问一个关于编程的一般性问题：**多快才足够快？**

那么，*足够快*取决于：

*   你想对应用程序做什么
*   你想多久做一次
*   您的用户期望它发生的速度有多快

如果在某些程序中读取文件需要 1 毫秒或 1000 毫秒 - 1000 毫秒是否被认为“太慢”？

如果必须快速连续读取十个文件 - 是的，可能太慢了。想象一个 XML 解析器只需 1 秒就可以从磁盘读取一个 XML 文件——太可怕了！

另一方面，如果仅当用户每 15 分钟左右手动单击一个按钮时才需要读取文件，那么这不是问题，例如在 Microsoft Word 中。

没有人确切地说*太慢*的原因是因为它并不重要。您的具体问题也是如此。一种语言应该很少（如果有的话）因为“慢”而被回避。

最后但并非最不重要的一点是，如果您在 Erlang 中开发了一些可怕的项目，并且在以后的道路上，意识到那个*dagnabbit！*您确实需要处理这些数字 - 然后您进行研究，找到好的库并以最适合它的语言实现算法，然后与那个小型库进行互操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:52:29.027

我曾经问过一个关于 couch DB mapreduce 中的数字运算的问题：[CouchDB Views：在 map reduce 中可以接受多少处理？](https://stackoverflow.com/questions/10046285/couchdb-views-how-much-processing-is-acceptible-in-map-reduce)

其中一个答案有趣的是：

> 假设您有 10,000 个文档，每个文档需要 1 秒来处理（这比我见过的要高得多）。也就是说，完全构建视图需要 10,000 秒或 2.8 小时。但是，一旦视图完成，查询任何行 (?key=...) 或行切片 (?startkey=...&endkey=...) 与直接查询文档所花费的时间相同。文档计数的查找时间为 O(log n)。
> 
> 换句话说，即使每个文档需要 1 秒来执行映射，也需要几毫秒来获取结果。（当然，视图必须先构建，因为它实际上是一个索引。）

我认为，如果您从这些方面考虑您当前的问题，那么考虑您的问题是一个有趣的角度。关于语言速度/优化的话题：

> 如何确定一项操作是否是计算密集型的？

Facebook 问了这个关于 PHP 的问题，最后写了[HIP HOP](http://developers.facebook.com/blog/post/2010/02/02/hiphop-for-php--move-fast/)来解决这个问题——它将 PHP 编译成 C++。他们说*php 比 C++ 慢得多的原因是因为 PHP 语言都是动态查找*的，因此需要大量处理来处理变量、数组、动态类型（这是减速的根源）等。

所以，你可以问一个问题：*erlang 是动态查找吗？静态类型？编译？*

> 计算量、算法复杂度或输入值大小之间是否存在差异。例如 28303 / 4 的 1000 次计算与 239847982628763482 / 238742 的 100 次计算

因此，话虽如此，您甚至可以将特定类型授予不同类型的数字，这意味着您应该使用正确的类型，这肯定会导致性能提高。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T15:52:46.890

有了这种东西，你看到就知道了！通常这指的是当您选择 int、float、double 等重要的情况时。诸如物理模拟或蒙特卡洛方法之类的事情，您想要进行数百万次计算。

老实说，实际上您只需用 C 语言编写这些位，然后使用您最喜欢的其他语言来运行它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:54:41.400

数字运算的适用性取决于库支持和语言的固有性质。例如，纯函数式语言不允许任何可变变量，这使得实现任何方程求解类型的问题变得非常有趣。Erlang 可能属于这一类。

# ruby-on-rails - 在 Rails SQL 中使用 Like

> ID：11691320
> 
> 赞同：0
> 
> 时间：2012-07-27T15:49:46.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我在 Rails 上使用 LIKE 句子时遇到了一点问题，我知道下一句有效：

```
Brand.find(:all, :joins=>[:cars], :conditions=>["brandname LIKE ?","%ford%"]) 
```

但我可以用任何方法来做这样的事情：

```
Brand.find(:all, :joins=>[:cars], :conditions=>["brandname LIKE '%ford%'"]) 
```

这是因为我已经有一个函数可以返回单个字符串的所有条件，但是我需要支持在字符串中搜索，我真的不知道如何让它工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:00:43.613

我不完全确定我明白你在说什么。您是否尝试将变量传递给条件？

我会稍微重写一下这个查询。

```
Brand.all.joins(:cars).where("brandname LIKE ?", "%#{some_variable}%") 
```

当然，如果您获得大量记录，则选择全部可能对性能不利，因此您可能需要考虑限制它或以某种方式对结果进行分页。

我会推荐[指南](http://guides.rubyonrails.org/active_record_querying.html#array-conditions)。在这种情况下使用数组会很棒

```
Brand.all.joins(:cars).where("brandname LIKE ?", "%#{params[:brand_search]}%") 
```

# c# - 将 Filestream 用于非“本地”的文件路径

> ID：11691322
> 
> 赞同：-2
> 
> 时间：2012-07-27T15:49:49.147
> 
> 标签：c#, asp.net-mvc, image, filestream

所以我有一个图像的文件路径`\DataEntry\Image\RenderOriginalImage\3237319@Research`，我需要从我的 MVC 应用程序中的控制器加载。当我尝试将其正常传递到文件流时，它返回了一个异常

```
Exception Details: System.IO.DirectoryNotFoundException: Could not find a part of the path 'c:\DataEntry\Image\RenderOriginalImage\3237319@Research' 
```

这是有道理的，因为这个图像文件的路径不是本地的，它在网站文件上......有什么想法可以访问这个文件路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:52:55.617

如果文件不在运行代码的服务器上，则无法使用`FileStream`（除非您可以通过 UNC 路径访问它——您没有详细说明）...如果它在其他地方，您将不得不使用不同类型的`Stream`类型来访问数据。如果您提供更多详细信息，有人可以提供更详细的答案。

# c - C中字符串文字中的禁止

> ID：11691324
> 
> 赞同：3
> 
> 时间：2012-07-27T15:49:54.533
> 
> 标签：c

在 K&R 书的第 104 页中，我遇到了这样的声明：

> ```
> char amessage[] = "now is the time"; //an array
> char *pmessage = "now is the time";  //a pointer 
> ```
> 
> 数组中的单个字符可能会更改，但`amessage` 始终引用相同的存储。随后`pmessage`可能会修改指针以指向其他位置，但如果您尝试修改字符串内容，则结果未定义......

那么，这会是他们在两种情况下都意味着的错误吗？

对于数组，

```
amessage[] = "allocate to another address"; //wrong? 
```

对于指针，

```
pmessage[0] = 'n'; //wrong? 
```

我只想知道什么时候违反了这些规则。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:53:52.537

```
/* OK, modifying an array initialized by the 
 * elements of a string literal */
amessage[0] = 'n';

/* not OK, modifying a string literal.
 * String literals are non-modifiable */
pmessage[0] = 'n'; 
```

请注意，在 C 中不能分配数组，因此如果要复制数组，请使用`memcpy`函数或使用`strcpy`函数来复制字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:18:54.300

```
char amessage[] = "now is the time";
/*   ^            ^
     (an array)   (a string literal) */ 
```

当您使用字符串文字以这种方式初始化数组时，您将数组元素的初始值设置为文字本身的初始值。当然，该数组被分配了自己的单独内存。你可以修改它的内容。

```
char *pmessage  = "now is the time";
/*   ^            ^
     (a pointer)  (a string literal) */ 
```

当您使用字符串文字来初始化指针时，您正在使指针指向字符串文字。该字符串文字可以存储在只读存储器中。因此无法修改。指针本身可以修改。

什么是有效的，什么是无效的？

```
amessage[0] = 'n'; /* Valid. Modifying array contents.  */
amessage = pmessage; /* Invalid. You cannot assign to an array.  */
pmessage[0] = 'n'; /* Invalid. You're trying to modify a string literal.  */ 
```

但：

```
pmessage = amessage; /* Valid. You're modifying a pointer. */ 
```

随后：

```
pmessage[0] = 'n'; /* Valid. You just modified pmessage above,
                   and it now points to modifiable memory.  */ 
```

**最后：** [有一个关于这个的 C-FAQ 条目](http://c-faq.com/decl/strlitinit.html)。值得一读。

^(灵感来自[ouah 的回答](https://stackoverflow.com/a/11691396/274261)。我不想对它进行大的编辑。)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T16:25:28.410

将指针用作数组并没有本质上的错误，除非这些指针指向常量数据（并且字符串文字是常量数据）。尽管在语义上不正确，但在过去没有内存保护的情况下，`pmessage[0] = 'n';`实际上会产生不可预测的结果（例如，影响程序中相同文字的所有出现）。在现代操作系统上，由于内存保护到位，这不可能发生。字符串文字和其他常量被放在可执行文件的所谓只读部分中，当可执行文件被加载到内存中以创建进程时，包含只读部分的内存页面被设为只读，即任何更改其内容的尝试都会导致分段错误。

```
char amessage[] = "now is the time"; 
```

实际上是以下内容的语法糖：

```
char amessage[] = { 'n','o','w',' ','i','s',' ','t',
                    'h','e',' ','t','i','m','e','\0' }; 
```

即，它创建一个包含 16 个字符的数组并使用字符串“now is the time”（连同 NULL 终止符）初始化其内容。

另一方面

```
char *pmessage = "now is the time"; 
```

将相同的字符串数据放在只读数据的某处，并将其地址分配给指针`pmessage`。它的工作原理类似于：

```
// This one is in the global scope so the array is not on the stack
const char _some_unique_name[] = "now is the time";

char *pmessage = _some_unique_name; 
```

`_some_unique_name`选择它是为了不与程序中的任何其他标识符发生冲突。通常使用 C 语言不允许但对汇编器和链接器来说可以的符号（例如，像 in 之类的点`string.1634`）。

您可以更改指针的值 - 这将使其指向其他内容，例如指向另一个字符串。但是您不能更改数组名称后面的地址，即`amessage`始终引用最初为其分配的相同数组存储。

You can refer to individual elements of each string using `amessage[i]` or `pmessage[i]` but you can only assign to the elements of `amessage` as they are located in the read-write memory.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T16:11:07.347

如果你这样做：

```
char amessage[] = "now is the time"; //an array
char *pmessage = "now is the time";  //a pointer 
```

你可能真的想这样做：

```
const char *pmessage = "now is the time";  //a pointer 
```

当你的程序被编译时，内存中的某个地方会有“现在是时候”的字节（注意有一个 NULL 终止符）。这将在不断的记忆中。你不应该尝试改变它，如果你做了奇怪的事情可能会导致（究竟会发生什么将取决于你的环境以及它是否存储在只读或读写内存中）。因此，当 K&R 试图启发您如何做事时，实用的方法是使指针指向常量字符串 const，然后如果您尝试更改内容，编译器会抱怨。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T16:22:12.883

```
char amessage[] = "now is the time"; //an array 
```

数组名是一个常数，即数组的地址不能改变，但数组的内容可以改变。

***所以***

```
amessage[0]='n';//valid and it change the first element 
```

**但**

```
amessage="hello";//if you try then it wrong as array address can not be changed 
```

现在看指针部分：-

```
char *pmessage = "now is the time";  //a pointer 
```

因为它是一个指针，所以它可以指向任何地址。但是内存中的地址位置可能是可修改的，也可能是不可修改的。也就是说，它可能是只读的，也可能是允许读写的。

因此，当您尝试使用指针 pmessage 更改内存中的某些数据时，取决于指向内存结果取决于。这里它指向代码部分，所以只读。所以不允许修改。

**所以**

```
pmessage[0]='n';//definitely give you error 
```

# node.js - 使用自定义方法的 Node.js array.sort 导致 RangeError: Max Call Stack Size Exceeded

> ID：11691325
> 
> 赞同：1
> 
> 时间：2012-07-27T15:49:57.070
> 
> 标签：node.js, sorting, coffeescript

所以，我有一个包含 100,000 多个项目的数组，这一行导致它破坏了调用堆栈：

```
@sortedList.sort (a, b) ->
  return if a.value > b.value then -1 else 1 
```

我即将实施一种自定义的某种类型（建议，有人吗？）来解决这个问题，但我只是想确保我没有做一些导致它爆炸的公然愚蠢的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:17:58.527

如果 会发生什么`a.value == b.value`？如果项目相同，[`sort`比较函数应返回零：](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort#Description)

> *   如果`compareFunction(a, b)`小于 0，则排序`a`到比 更低的索引`b`。
> *   如果`compareFunction(a, b)`返回 0，则彼此保持不变`a`，`b`但对所有不同元素进行排序。
> *   如果`compareFunction(a, b)`大于 0，则排序`b`到比 更低的索引`a`。

所以你想要更像这样的东西：

```
if a.value > b.value
  -1
else if a.value < b.value
   1
else
   0 
```

丢失的`a.value == b.value`分支可能会导致`sort`失去理智并在整个地方弄得一团糟；没有`==`分支说*`a`先行`b`**`b`后行`a`*，您不能期望从中得到明智的结果。

# c++ - 如何使用 xerces 向 xml 添加属性？

> ID：11691328
> 
> 赞同：1
> 
> 时间：2012-07-27T15:50:02.307
> 
> 标签：c++, xml, xerces, xerces-c

我目前使用以下代码在 C++ 中使用 xercer 生成了一些 XML：

```
 XMLCh tempAttribute[100];
           XMLString::transcode("ad", tempStr, 99);
           doc = impl->createDocument(0,tempStr ,0);
           root = doc->getDocumentElement();
           XMLString::transcode("imageAd", tempStr, 99);
           element = doc->createElement(tempStr);
           root->appendChild(element); 
```

但是我正在尝试获取顶部“广告”元素中的属性（如下所示），但是我这样做的运气不大，有使用 xerces 经验的人可以请教。

提前致谢！

```
<ad xsi:noNamespaceSchemaLocation="smaato_ad_v0.9.xsd" modelVersion="0.9">
    <imageAd> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:26:19.990

也许您在我之前的回答中没有看到对 setAttribute 的调用，但是您可以通过以下调用为任何元素设置任何属性

```
root->setAttribute(L"modelVersion", L"0.9");
root->setAttribute(L"xsi:noNamespaceSchemaLocation", L"xsi:noNamespaceSchemaLocation"); 
```

其中 root 是指向根元素的指针。

# c# - 使用其路径将图像保存/上传到数据库

> ID：11691331
> 
> 赞同：0
> 
> 时间：2012-07-27T15:50:19.737
> 
> 标签：c#, sql, ado.net

我想通过使用它的路径将图像保存到 sql server DB，我不想将图像保存到我自己想要的时候，当我将图像上传到我的表单时，当我点击一个按钮时这个按钮将图像上传到应用程序文件夹，然后将此图片的路径保存到数据库中，我该怎么做？

2 - 如何将此图片添加到 dataGridView ？

**注意：我使用 C# 作为编程语言。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:55:16.677

可以使用 OpenFileDialog 获取图像文件路径。
这个答案可以帮助您获取文件路径[Extracting Path from OpenFileDialog path/filename](https://stackoverflow.com/questions/439007/extracting-path-from-openfiledialog-path-filename)

1）您可以使用`File.Copy(path, path2)`函数将它们复制到您的应用程序目录：

`string path = Directory.GetCurrentDirectory();`

2）您需要使用位图从其文件路径加载图像：

```
Bitmap myBmp = Bitmap.FromFile("path here"); 
```

然后您可以将其添加到`DataGridView`包含`DataGridViewImageColumn`

```
yourDataGridView.Rows.Add(<column1 value>, <column2 value>, myBmp, <column3 value>, <column4 value>); 
```

# scala - Scala List，可并行化和从 Java 调用

> ID：11691333
> 
> 赞同：3
> 
> 时间：2012-07-27T15:50:25.643
> 
> 标签：scala, scala-collections

我有一个`scala.collection.immutable.List[WeatherData]`

在 Scala 中，我可以把它变成一个并行集合并调用 reduce 方法：

```
val sum = myList.par.reduce(_+_) 
```

我想在 Java 中做同样的事情，但我做不到。首先，Eclipse 告诉我#par() 的签名返回 ParSeq[WeatherData]，但如果我要求 Eclipse 将结果分配给局部变量，它会给我一个`scala.collection.parallel.ParIterable<WeatherData>`.

无论哪种方式，这些接口都没有类似的方法`#reduce(...)`，所以它们没有帮助。

我需要做什么才能`#reduce(...)`从 Java 调用？

干杯，约翰

PS 使用 Scala 2.10 M5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:44:01.477

我写了一些斯卡拉：

```
val data = List(1,2,3)
val par = data.par
val result = par.reduce(_+_)
println(result) 
```

使用 Java Decompiler，显然是这样的：

```
List localList = List..MODULE$.apply(Predef..MODULE$.wrapIntArray(new int[] { 1, 2, 3 }));
ParSeq localParSeq = (ParSeq)localList.par(); 
```

稍微纠正一下，我尝试了这个Java：

```
List localList = List$.MODULE$.apply(Predef$.MODULE$.wrapRefArray(new Integer[] { 1, 2, 3 }));
ParSeq localParSeq = (ParSeq)localList.par(); 
```

就像 Luigi 写的那样，这导致了一个奇怪的`NoSuchMethodException`.

我进入了下一个级别，并使用`javap -verbose`了 ，它给出了这个：

```
29: invokeinterface #40,  1; //InterfaceMethod scala/collection/Parallelizable.par:()Lscala/collection/Parallel; 
```

这让我想知道如果我在 Java 中`Parallelizable`调用之前转换为 a 会发生什么：`par`

```
List localList = List$.MODULE$.apply(Predef$.MODULE$.wrapRefArray(new Integer[] { 1, 2, 3 }));
Parallelizable p = (Parallelizable)localList;       
Parallel p2 = p.par();
Integer result = (Integer) ((ParSeq)p2).reduce(adder);
System.out.println(result); 
```

打印出来`6`，这是正确的:-)

但我不得不承认，我一点也不知道，为什么我要选角。这让我意识到我仍然需要学习很多关于 Java 和 Scala 的知识。

*有谁知道为什么演员阵容会有所不同？*

# c# - 如何从 SortedDictionary 中获取离我的键最近的项目？

> ID：11691342
> 
> 赞同：8
> 
> 时间：2012-07-27T15:51:02.660
> 
> 标签：c#, .net, performance, collections

目前我正在`SortedList<T,U>`对特定数字使用二进制搜索，如果它不存在，我会得到最接近的下限键项。

我看到[插入未排序的数据](https://stackoverflow.com/questions/1376965/when-to-use-a-sortedlisttkey-tvalue-over-a-sorteddictionarytkey-tvalue)相当慢，我经常这样做。

有没有办法用 做类似的事情`SortedDictionary`，或者我应该坚持我的`SortedList`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T21:45:58.913

`SortedList<K, V>`插入数据时非常慢，因为`<=N`每次添加新元素时它都会移动内部数组中的元素。加法的复杂度是`O(N)`。尽管如此，它支持二进制搜索，允许在`O(log N)`.

平衡二叉树是解决问题的最佳数据结构。您将能够执行以下具有对数复杂度的操作：

1.  添加项目`O(log N)`与`O(N)`在`SortedList<K, V>`
2.  删除项目`O(log N)`
3.  搜索项目或其最近的`O(log N)`

在二叉树中寻找元素或其最近的下界很简单：

1.  从根到子垂直遍历树以找到您的密钥。如果 key < 节点，则转到左孩子，否则转到右孩子。
2.  如果找到钥匙，请返回
3.  如果未找到密钥，则最近的左父母将是您正在寻找的那个（最近的下限）
4.  如果没有左父节点，只取最后访问的节点，它是树中最小的节点。

有很多文章描述了如何实现二叉树。不过，我将使用一种 hack 重用 .NET Framework 集合:)

现在，我要向你展示`SortedSet<T>`它本身就是红黑树。它有一个缺点，它无法快速找到最近的节点。但是我们知道在树中搜索的算法（在 1\. 中有描述），它是在`SortedSet<T>.Contains`方法中实现的（在底部反编译*）。现在我们可以使用我们的自定义比较器在遍历期间捕获从根到最后访问的节点的所有节点。之后我们可以使用上面的算法找到最近的下界节点：

```
public class LowerBoundSortedSet<T> : SortedSet<T> {

    private ComparerDecorator<T> _comparerDecorator;

    private class ComparerDecorator<T> : IComparer<T> {

        private IComparer<T> _comparer;

        public T LowerBound { get; private set; }

        private bool _reset = true;

        public void Reset()
        {
            _reset = true;
        }

        public ComparerDecorator(IComparer<T> comparer)
        {
            _comparer = comparer;
        }

        public int Compare(T x, T y)
        {
            int num = _comparer.Compare(x, y);
            if (_reset)
            {
                LowerBound = y;
            }
            if (num >= 0)
            {
                LowerBound = y;
                _reset = false;
            }
            return num;
        }
    }

    public LowerBoundSortedSet()
        : this(Comparer<T>.Default) {}

    public LowerBoundSortedSet(IComparer<T> comparer)
        : base(new ComparerDecorator<T>(comparer)) {
        _comparerDecorator = (ComparerDecorator<T>)this.Comparer;
    }

    public T FindLowerBound(T key)
    {
        _comparerDecorator.Reset();
        this.Contains<T>(key);
        return _comparerDecorator.LowerBound;
    }
} 
```

您会看到找到最近的节点并不比通常的搜索多，即`O(log N)`. 因此，这是解决您问题的最快方法。`SortedList<K, V>`此集合与查找最近的集合一样快，并且与`SortedSet<T>`添加一样快。

怎么样`SortedDictionary<K, V>`？除了一件事之外，它几乎相同`SortedSet<T>`：每个键都有一个值。我希望你也能用`SortedDictionary<K, V>`.

*反编译`SortedSet<T>.Contains`方法：

```
public virtual bool Contains(T item)
{
  return this.FindNode(item) != null;
}

internal virtual SortedSet<T>.Node FindNode(T item)
{
  for (SortedSet<T>.Node node = this.root; node != null; {
    int num;
    node = num < 0 ? node.Left : node.Right;
  }
  )
  {
    num = this.comparer.Compare(item, node.Item);
    if (num == 0)
      return node;
  }
  return (SortedSet<T>.Node) null;
} 
```

# visual-studio-2010 - tlbimp 做了哪些 Visual Studio IDE 不做的事情？

> ID：11691343
> 
> 赞同：0
> 
> 时间：2012-07-27T15:51:03.207
> 
> 标签：visual-studio-2010, com-interop, tlbimp

我有一个用未管理的 C++ 编写的 COM DLL，并使用 VS 2010 编译。我可以使用 regsvr32 注册 DLL，并且可以通过 VBscript 调用它。

当我尝试添加对它的引用时，在创建 C# 客户端时，我没有看到添加引用 -> COM 选项卡中列出的 COM 对象。如果我手动浏览到 DLL 并尝试选择它，它会说 DLL 不是有效的 assmlby 或 COM 组件。

现在，我可以使用 tlbimp 工具生成一个互操作 DLL，并使用它作为对我的 C# 客户端的引用。一切正常。

我的问题是：

1.  为什么通过 regsvr32 注册的原始 COM 未在添加引用对话框的 COM 选项卡中列出？
2.  当我可以从 VBScript 和 C++ 本机代码调用它时，为什么 VS IDE 认为它不是一个有效的 COM？
3.  tlbimp 到底做了哪些 IDE 不能做的事情？
4.  我需要进一步阅读什么来提高我对类型库和互操作性的理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:29:18.170

看起来像一个类型库问题——您的 COM 类可能已正确注册，但您的类型库可能没有。也许您忘记从 DllRegisterServer 函数中调用 RegisterTypeLib？

参考您的问题：

1.  该对话框查找已注册的类型库，而不是 COM 类

2.  VBscript 调用 IDispatch 并且不关心类型库。tlbimp 不关心 IDispatch 并且需要一个类型库

3.  您将 DLL 名称传递给 tlbimp——因此 tlbimp 知道如何获取类型库。相反，VS 是指缺少适当注册数据的注册表

# c++ - PL/SQL 是否可以将选择结果集保存到 clob 中

> ID：11691345
> 
> 赞同：0
> 
> 时间：2012-07-27T15:51:04.243
> 
> 标签：c++, oracle, plsql

因为我的 C++ OCI 包装器只支持绑定 Int/Double/String/Clob 类型的数据。所以我想知道是否有可能让我的存储过程返回一个 clob，它保存来自 SELECT 语句的结果集。

喜欢：

```
 FUNCTION sp(
    in_param VARCHAR2,
  ) RETURN CLOB
  IS
    my_clob  CLOB;
  BEGIN

      my_clob := SELECT col1, col2, col3 FROM s WHERE s.param = in_param;
    RETURN my_clob;

  END sp; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:05:39.490

我有一个带有 CLOB 和 VARCHAR 列的表，这很有效：

```
create or replace
  FUNCTION F_LOB_TEST(in_char  VARCHAR2 ) RETURN CLOB
  IS
    my_clob  CLOB;
  BEGIN
    SELECT FIELD_CLOB 
    INTO   my_clob 
    FROM   LOB_TEST 
    WHERE  FIELD_CHAR=in_char;

    RETURN my_clob;

  END; 
```

为了确保函数返回您在 PL/SQL 中所期望的内容，您可以像这样调用上述函数：

```
select F_LOB_TEST('A') FROM DUAL; 
```

# wpf - 如何捕获与本地化“%”键对应的 KeyEventArgs？

> ID：11691346
> 
> 赞同：1
> 
> 时间：2012-07-27T15:51:05.820
> 
> 标签：wpf

我有一个供应商 wpf 控件阻止我接收 TextInput 和 PreviewTextInput 事件，但它确实让我有 KeyDown 事件。

如何将 KeyEventArgs 映射到本地化键映射（在这种情况下，我键盘上的百分比键是 shift-5，但我认为我不能/不应该依赖它）？

# php - TypeError: data.isbn is undefined

> ID：11691349
> 
> 赞同：0
> 
> 时间：2012-07-27T15:51:19.880
> 
> 标签：php, javascript, mysql, ajax, json

I was receiving the following error:

```
TypeError: data.isbn is undefined 
```

I have since added in the `data.isbn ==null` statement in the following code:

```
$.ajax({
    type: "POST",
    url: "getInventory.php",
    datatype: "json",
    data: ({skuStart: $("#startSkuRange").val(), skuEnd: $("#endSkuRange").val(),
        processDate: $("#processDate").val(), source: $("#source").val()}),
    success: function(data) {
    console.log(data);
    if (data.isbn == null) {
            $("#inventoryUpdate").append('<tr><td>No Records Found</td></tr>');
        } else {
            for(var x=0; x<data.isbn.length; x++) {
                $("#inventoryUpdate").append('<tr><td id="tableSKU">'+data.sku[x]+'</td><td id="tableISBN">'+data.isbn[x]+
                    '</td><td><input type="text" id="tableQuantity" value="'+data.quantity[x]+
                    '"/></td><td><input type="text" id="tableDefect" value="'+data.defect[x]+
                    '"/></td><td><input type="text" id="tableSource" value="'+data.source[x]+
                    '"/></td><td><input type="text" id="tableFeature" value="'+data.feature[x]+
                    '"/></td><td><input type="text  id="tableLocation" value="'+data.location[x]+
                    '"/></td><td><input type="text" id="tableProcessDate" value="'+date.processDate[x]+
                    '"/></td><td><input type="text" id="tableBookType" value="'+data.booktype[x]+
                    '"/></td><td><input type="text" id="tableCreatedBy" value="'+data.created[x]+
                    '"/></td><td><input type="text" id="tableModifiedBy" value="'+data.modified[x]+
                    '"/></td></tr>');
            }

            $("#inventoryUpdate").trigger("update");
        }
    }
});// end of ajax call 
```

This now returns `No Records Found`, however, my *console.log(data)* is showing me that there are 19 isbn's. Can anyone see where the error lies? I am using identical code in another program and it works fine.

**EDIT**: Here is the PHP file that it gets the info from:

```
if(!empty($start) && !empty($end)){
    $result = $conn->query("Select * from inventory where sku >= $start and sku <= $end");
} elseif (isset($start) && isset($end) && isset($source)){
    $result = $conn->query("Select * from inventory where sku >= '$start' and sku <= '$end' and source_id = '$source'");
} elseif (isset($processDate)) {
    $result = $conn->query("Select * from inventory where date_process = '$processDate'");
} else {
    $result = $conn->query("Select * from inventory where sku >= '$start' and sku <= '$end' or source_id = '$source' or date_process = '$processDate'");
}

while($row = $result->fetch_assoc()) {
    $skuArray[$x] = $row['sku'];
    $isbnArray[$x] = $row['isbn13'];
    $qtyArray[$x] = $row['quantity'];
    $defectArray[$x] = $row['defect_id'];
    $sourceArray[$x] = $row['source_id'];
    $featureArray[$x] = $row['feature_id'];
    $locationArray[$x] = $row['location_id'];
    $processDateArray[$x] = $row['date_process'];
    $bookTypeArray[$x] = $row['book_type_id'];
    $createdByArray[$x] = $row['created_by'];
    $modifiedByArray[$x] = $row['modified_by'];

    $x++;
} // end of while loop  

$results = array('sku' => $skuArray,
                 'isbn' =>$isbnArray,
                 'quantity' => $qtyArray,
                 'feature' => $featureArray,
                 'processDate' => $processDateArray,
                 'source' => $sourceArray,
                 'location' => $locationArray,
                 'created' => $createdByArray,
                 'modified' => $modifiedByArray,
                 'booktype' => $bookTypeArray,
                 'defect' => $defectArray,
                 );

$conn->close();
echo json_encode($results); 
```

*console.log(data)* is:

```
{"sku":["10123400","10123401","10123402","10123403","10123404","10123405","10123406","10123407","10123408","10123409","10123410","10123411","10123412","10123413","10123414","10123415","10123416","10123417","10123418"],
 "isbn":["9781416025405","9780072993288","9780534380311","9780495095538","9780781778107","9780205741786","9780673985255","9780618331505","9780321106766","9780495506218","9780321557537","9780534629915","9780312664817","9780198610298","9780323046343","9780323023108","9781439036402","9780132497992","9780538497817"]} 
```

This is one string, but i edited it for easier reading and it does return the rest of the information asked for, but it is a long string and I did not add it for brevity.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:02:02.340

检查*console.log*，`data.isbn`您将确保数据在那里，并且`'TypeError: data.isbn is undefined'`在声明变量但未初始化时给出了javascript。所以它应该是`if(typeof data.isbn == 'undefined')`，我猜`data.isbn`在`null`这种情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:53:18.557

我不确定你能不能`use data.isbn`。它可能必须是`data["isbn"]`，如果在您使用的后端脚本中`json_encode(array(...))`假设它是 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:26:13.407

我建议更改这行代码：

```
if(data.isbn == null ){ 
```

至

```
if(data.isbn === null ){ // triple '=' sign 
```

更多信息：[比较运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:55:20.620

您是否在其中捕获多个对象`data`？

我假设您的回复如下所示：

```
data
     isbn
         0
           sku
           price
         1 
           sku
           price
         ... 
```

是这样吗？

另外，尝试将您的`data`对象作为数组访问，看看它是否会改变结果：

利用：

```
data['isbn'] 
```

代替

```
data.isbn 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T19:39:18.517

好的，所以我觉得自己像个竞争白痴！我有`datatype: "json"`。它需要是`dataType: "json"`。中的“T”`dataType`需要大写。现在一切正常。感谢所有试图帮助我的人。我很感激！

# c# - Hand gesture recognition for sign language using SVM (Support Vector Machine)

> ID：11691350
> 
> 赞同：1
> 
> 时间：2012-07-27T15:51:22.253
> 
> 标签：c#, image-processing, gesture-recognition, feature-extraction, human-computer-interface

I am a student assigned to do a project under **sign Language interpretation**. I have done all segmentation and morphological operations. Further, its time to classify gestures, and i have gone through different journals. I have little doubt that what features suitably satisfy my classification. I have chosen C# as a programming language and **SVM Classifier** for classification. Please list me out some possible features. If possible, well document with complete mathematics.

**Features I have found: Shape Descriptors like *aspect ratio, circularity, spreadness* Hu - Variants and moment Features**

![Hand Segmented Image](../Images/3a82d0ede4bb24cb01a71245982ad5db.png)![Final Edge Detected Image](../Images/5f607b17bd1c9c33c536518171c6e2f7.png)

I have recently found that re-sizing and normalization of an image is done before feature extraction. And they suggest the algorithm like:

*   Resize into certain resolution say 100*100
*   vertical allignment to first principle component of image.
*   lastly, reconstructing boundary box that fits the image.

I am with doubt that what if the finger alignment. **If the training finger is 45 degree aligned with main palm axis and is 10 unit long, what if the testing data appears as it is aligned other than 45 degree and 5 unit long??**

> And Encountered features: Finger count and principal component analysis(PCA). But what does PCA physically means?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:58:40.097

最后，我选择`HU-Moment`了手势识别的特征，因为它是**平移、旋转和比例不变**的，这已经被证明了。对于这一`SVM`部分，我选择`SVM.NET`了`'LIBSVM'`in`JAVA`和`C++`as`C#`作为编程语言的包装器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:30:39.403

一类非常强大的特征是傅立叶描述符。这些特征是为曲线提取的。这些特征计算速度很快，并且在比例、平移和方向方面是不变的。

有关如何计算这些的详细信息，请访问：[http ://demonstrations.wolfram.com/FourierDescriptors/](http://demonstrations.wolfram.com/FourierDescriptors/)

几项研究表明傅立叶描述符在形状分析中的有用性。其中一项研究是 H Kauppinen、T Seppanen 的“在 2D 形状分类中对自回归和基于傅立叶的描述符的实验比较”…… - 模式分析和……，1995

# python - Creating a Scheduled task in Tkinter on Unix

> ID：11691351
> 
> 赞同：2
> 
> 时间：2012-07-27T15:51:24.250
> 
> 标签：python, unix, cron, tkinter, crontab

Through an application I have made with Tkinter, I'm trying to add a command to run a script every week. When the program is closed the command should be in forever place.

I've sifted through the documentation on cron, but there doesn't seem to be a way to edit the crontab without using the shell. Also I've looked through the 'at' command, but that only seems to run once.

My question is - How can one create a weekly recurring task by issuing a single command in Python on Unix?

If not with only 1 command, can I use multiple?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:55:44.033

在大多数现代 Linux 发行版（如 Debian 或 Ubuntu）中，您可以将可执行文件（如 shell 脚本或符号链接）添加到 /etc/cron.weekly 中，它将每周自动运行一次。这是使用`anacron`命令，这在当今相当普遍。

# javascript - jQuery text returns NULL

> ID：11691352
> 
> 赞同：0
> 
> 时间：2012-07-27T15:51:25.390
> 
> 标签：javascript, jquery, html

x.html:

```
<h4> Created: <span id="link-created"></span></h4> --> Date is not printed 
```

Javascript:

```
var create_date = new Date((data.created)*1000); --> data.created is epoch time
$('#link-created').text(create_date); 
```

Any idea why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:55:58.403

jQuery 不喜欢你将非字符串传递给 .text()。试试这个：

```
$('#link-created').text(create_date.toString()); 
```

哦，要确认 data.created 不是问题，您可以这样做（作为测试）：

```
var create_date = new Date(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:55:52.007

看来 data.created 一定不是想出一个数字......

[**js小提琴**](http://jsfiddle.net/39hwp/2/)

其他一切都是正确的。

# android - Shared Preferences doesnt work

> ID：11691353
> 
> 赞同：0
> 
> 时间：2012-07-27T15:51:36.833
> 
> 标签：android, sharedpreferences

I need your help here.. I have the following code:

```
public class GameActivity extends Activity {
TextView test1;
String punkte, points;

@Override
public void onCreate(Bundle savedInstanceState) {
    test1 = (TextView) findViewById(R.id.test1);

    punkte = points;
    SharedPreferences load = getSharedPreferences(punkte, 0);
    points = load.getString("punkte", "0");
    test1.setText(points);
    }    

public void mehrPunkte() {
    punkte = "3";

    SharedPreferences load = getSharedPreferences(punkte, 0);
    points = load.getString("punkte", "0");
    test1.setText(points);

    SharedPreferences save = getSharedPreferences(punkte, 0);
    save.edit().putString("punkte", punkte).commit();
} 
```

But it still shows "0" if i restart the app. What did I do wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:58:33.577

[getSharedPreferences](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)的第一个参数是它的名称，您将它保存到不同的共享首选项中，由`punkte`变量的值指示。试试这个：

```
final private static String SHARED_PREF_ID = "My shared preferences";
@Override
public void onCreate(Bundle savedInstanceState) {
    // ...
    SharedPreferences load = getSharedPreferences(SHARED_PREF_ID, MODE_PRIVATE);
    // ...
} 

public void mehrPunkte() {
    punkte = "3";

    SharedPreferences load = getSharedPreferences(SHARED_PREF_ID, MODE_PRIVATE);
    points = load.getString("punkte", "0");
    test1.setText(points);

    SharedPreferences save = getSharedPreferences(SHARED_PREF_ID, MODE_PRIVATE);
    save.edit().putString("punkte", punkte).commit();
} 
```

此外，使用常量来指示模式，而不是整数文字（MODE_PRIVATE，不是 0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:55:26.577

放入`mehrPunkte();`_`onCreate()`

# javascript - 普通的 $.post() 传递字符串和传递文件有什么区别？

> ID：11691355
> 
> 赞同：0
> 
> 时间：2012-07-27T15:51:49.330
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-plugins

我想知道为什么我不能使用 $.post() 方法在 JQuery 中上传文件？

有没有办法调整请求以处理这个问题？

```
$.post(url, { file: fileName, path: "/uploads" }, function (result) {}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:52:46.760

> 我想知道为什么我不能使用 $.post() 方法在 JQuery 中上传文件？

这是因为为了上传文件，您需要使用[`multipart/form-data`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)协议，这意味着请求正文需要以与 jQuery 使用的标准形式 POST 完全不同的方式呈现：（在正文[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)中由 & 分隔的键/值对） `POST`. 更不用说为了在请求中写入文件内容，您需要访问文件内容，正如您所知，在 javascript 中根本不是这种情况。

但不要失去所有的希望。将来，通过[XmlHttpRequest2](http://www.w3.org/TR/XMLHttpRequest/)和 HTML5，您将能够使用 AJAX 上传文件。

直到这个未来到来（顺便说一下，一旦我们摆脱了 IE<=9，它不应该那么遥远）坚持今天存在的东西：文件上传插件，检测浏览器功能，如果浏览器使用 XHR2支持它和其他一些技术（例如隐藏的 iframe 或 Flash，如果它不支持），并减轻您自己手动执行此操作的负担。

所以继续吧，谷歌，做一个愿望清单：

*   [蓝灵](https://github.com/blueimp/jQuery-File-Upload)
*   [上传](http://www.plupload.com/)
*   [价值 AJAX 上传](http://valums.com/ajax-upload/)
*   [上传](http://www.uploadify.com/)

然后继续玩演示，阅读文档，选择一个适合您的需求并尝试在您的站点中将其付诸实践。如果您遇到一些具体问题，请不要犹豫。

但不幸的`$.post`是，今天不能上传文件。

# jquery - Jquery hide class show individual div

> ID：11691356
> 
> 赞同：0
> 
> 时间：2012-07-27T15:51:51.080
> 
> 标签：jquery

I have a list of divs that are dynamically generated and looks like the following

```
<div class="Foo">
  <div class ="Bar" id ="Something{X}">  // Where {X} is a counter i.e "Something1" , "Something2"
  <p>some stuff</p>
  <form>
    <input />
  </form>
</div> 
```

Now after I dynamically generate all my div's of class foo I do the following

```
$('.Foo').hide(); 
```

Which obviously hides all the div's like I'd expect. However, what I'd like is the ability to click on a link above the div that allows you to unhide that individual div.

Now normally for a class I know I'd just go $('.Foo').show(); and they would ALL show.

However, doing the following does not work.

```
$("#Something1").show(); 
```

Is this something that is allowed by jQuery to hide everything and then show individual items? Or am I going about this wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:54:37.197

您的问题是您隐藏了父容器，该容器保持隐藏状态。

试着隐藏你的“酒吧”

`$('.bar').hide();`

接着`$("something1").show()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:54:51.840

您正在使用类 foo 隐藏父 div；因此，您需要改为显示该 div 。

```
$("#Something1").parent().show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:59:11.367

代替：

```
$(".foo").hide(); 
```

它应该是：

```
$(".bar").hide(); 
```

然后通过以下方式重新打开一个：

```
$("#Something1").show(); 
```

你隐藏了父容器，然后试图打开它的一个子容器，所以你看不到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:57:52.873

```
<p class="showlink">Link to show</p>
<div class="Foo">
  <div class ="Bar" id ="Something{X}">  // Where {X} is a counter i.e "Something1" , "Something2"
  <p>some stuff</p>
  <form>
    <input />
  </form>
</div> 
```

JS

```
$(".showlink").on('click', function() {
    $(this).next('.Foo').show();
}); 
```

# xcode - custom navigation bar in xcode is cutting the image

> ID：11691364
> 
> 赞同：-1
> 
> 时间：2012-07-27T15:52:20.937
> 
> 标签：xcode, xcode4.2

```
/*enter code here */    UIImage *image = [UIImage imageNamed: @"top-bar.png"];
UIImageView *imageview = [[UIImageView alloc] initWithImage: image];

// set the text view to the image view
self.navigationItem.titleView = imageview; 
```

I am using this code for custom navigation bar but the image is cutting out . Although the image width is same as device width.

Any idea, how to solve this.

![enter image description here](../Images/ecb7795a214185cacfd9a88fcf45a6ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:35:23.533

titleView 属性仅涵盖导航的标题区域，而不是完整的导航栏。

# node.js - NodeJS: stdin text not egal

> ID：11691366
> 
> 赞同：0
> 
> 时间：2012-07-27T15:52:24.157
> 
> 标签：node.js

I use `process.stdin.setEncoding('utf8');` But when i listen a event `'data'`, the text isn't egal.

```
process.stdin.on('data', function (text) {
  if (text === 'q') console.log('ouiiiiiiiiii');
  else console.log(text);
}); 
```

I type 'q' but don't display "ouiiiiiiiii", and the text is q... but the `text === 'q'` is to false, why ? thanks

I think it's due to the encoding, but i don't know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:10:18.617

首先，`process.stdin.resume()`在标准输入上设置回调之前调用。另外，请确保将您的`text`变量转换为字符串，因为我相信它是一个`Buffer`对象。

所以，这样的事情应该有效：

```
process.stdin.resume();
process.stdin.setEncoding('utf8');

process.stdin.on('data', function (text) {
 if (text.toString().trim() === 'q') {
   console.log('ouiiiiiiiiii');
 } else {
   console.log(text.toString());
 }
}); 
```

# java - Designing a point system in Spring

> ID：11691367
> 
> 赞同：6
> 
> 时间：2012-07-27T15:52:25.007
> 
> 标签：java, spring, hibernate, achievements

I have a lot of existing data in my database already, and want to develop a points mechanism that computes a score for each user based on what actions they do.

I am implementing this functionality in a pluggable way, so that it is independent of the main logic, and relies on Spring events being sent around, once an entity gets modified.

The problem is what to do with the existing data. I do not want to start collecting points from now, but rather include all the data until now.

What is the most practical way to do this? Should I design my plugins in such a way as to provide for an index() method, which will force my system to fetch every single entity from the database, send an EntityDirtyEvent, to fire the points plugins, for each one, and then update it, to let points get saved next to each entity. That could result in a lot of overhead, right?

The simplest thing would be to create a complex stored procedure, and then make the index() call that stored procedure. That however, seems to me like a bad thing either. Since I will have to write the logic for computing the points in java anyway, why have it once again in SQL? Also, in general I am not a fan of splitting business logic into the different layers.

Has anyone done this before? Please help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:02:02.957

首先让我们区分实现策略和业务规则。

由于您已经拥有数据，请考虑直接从数据中获取结果。这形成了数据域模型。设计数据模型以存储所有数据。然后，创建一组查询、视图和存储过程来访问和更新数据。

一旦有了这些视图，就可以使用 Spring JDBC Template 等数据访问库来获取这些数据并将它们表示为 Java 对象（列表、地图、人员、点表等）。

不管系统的上层发生了什么，到目前为止你已经完成的事情并没有太大的变化。这称为模型。

然后，开发一个规则库或逻辑实现，以确定在什么输入、用户操作、数据条件或所有其他条件下需要什么数据。在数学意义上，这就像一个矩阵。在编程意义上，这将是一组逻辑语句。如果 this and this and this 为真，则获取此数据，否则获取该数据，等等。这包含您系统中的逻辑。因此它被称为“控制器”。

不要将此逻辑移动到查询/存储过程/视图中。

然后最后为此开发一个前端或“控制台”。在最简单的情况下，开发一个控制台输入系统，它接受一个 .. 并显示一组结果。这是您对系统的“视图”。

您最终可以将视图开发为 Web 应用程序。上面的命令行视图仍然可以以 Restful API 服务器的形式存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:41:59.240

你似乎正朝着正确的方向前进。您知道您希望您的“积分”事物与主应用程序分离。由于暗示您已经在使用休眠（通过标签！），您可以利用休眠事件系统（参见[此处](http://docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/events.html)的第 14.2 节）。根据系统的大小/复杂性，您可以在此处插入积分计算（如果它不是大型/复杂系统），或者您可以发布自己的事件以供任何正在侦听的软件接收。

任何一种设计方法的要点都是既不知道也不关心您的点计算。如果您像我猜测的那样尝试创建一个相当通用的插件机制，那么您可以从这个连接点将您自己的事件发布到该系统。然后，如果您在给定的安装/设置中没有插件，则没有人获取/处理事件。如果您在另一个安装/设置中有多个插件，那么它们每个都可以根据收到的事件决定他们需要进行的处理。在“积分插件”的情况下，它会计算它的积分值并存储它。不需要存储过程....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T11:16:48.060

我认为这里需要考虑一个问题：据我所知，数据库中有大量数据，因此仅创建一种机制来计算积分系统的想法可能不是最好的方法。

事实上，如果您不想开始收集积分但包含所有数据，您必须处理和计算您现在拥有的信息。是的，您第一次运行它可能会产生开销，但正如您所说，您需要计算此数据。

另一方面，您可以包含另一种机制来处理实体中的更改并启动能够计算适用于此特定修改的新指向差异的不同进程。

因此，您可以使用一种服务来负责计算指向系统，一种用于单个实体，另一种可能需要更长的时间才能完成，能够计算全局点。甚至，如果您不需要实时计算，您可以创建一个计划作业来负责启动它。

最后，我知道将业务逻辑拆分为两层（Db + Java）不是一个好方法，但有时需要这样做，例如，如果您需要快速回复最终与许多注册表一起使用的请求. 我发现在某些情况下，除了将业务逻辑添加到数据库（作为存储过程等）来管理大量数据并将最终结果返回给浏览器客户端（例如：特定时间的计算过程）之外，别无选择）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T12:10:11.390

您正在尝试完成“引导”。您选择的方法应取决于点计算的复杂程度。如果存储过程或普通更新语句是最简单的解决方案，那就这样做。

如果计算很复杂，请编写一个批处理作业来加载现有数据，可能首先将其排序，然后触发与该数据对应的事件，就好像它们刚刚发生一样。处理事件的代码应该与处理未来事件的代码完全相同，因此除了批处理作业本身之外，您无需编写任何其他代码。

因为你只打算运行这个东西一次，所以选择最简单的解决方案，即使它又快又脏。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T06:48:44.090

有两种不同的方式。一是您已经知道 - 轮询数据库以获取更改的数据。在这种情况下，您可能会在没有更改的情况下访问数据库，并且可能会减慢您的流程。

第二种方法 - 每当数据库发生更改时，数据库将触发该事件。您可以使用 CDC（更改数据捕获）。它将最小化开销。

[您可以在Spring Integration](http://www.springsource.org/spring-integration/)中寻找更多选项

# xml - ColdFusion 的 XML 支持和 Word 文档

> ID：11691368
> 
> 赞同：0
> 
> 时间：2012-07-27T15:52:25.417
> 
> 标签：xml, coldfusion, ms-word, docx

使用 ColdFusion 的新 XML 功能...是否可以在 Word 文档 (docx) 中查找/替换文本？我试图解决这个问题，因为 docx 文档可能有一段文本（要搜索的占位符）分布在多个 w:r（运行）上，这可能难以搜索和替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:09:55.543

我所做的是让 word 文档带有替换词，然后使用 7zip 的 CLI 提取 .docx 文件，因为它只是一个存档，替换单词并重新存档。这已被证明是非常有效的，并且根本不会弄乱 XML。

以下是替换单词“%SENTDATE%”的应用程序的一些示例代码。并非所有变量都在这里，但这应该足以让您入门。

```
<cfset EditFile = Output & "word\document.xml" />

<!--- Extract the New Document --->
<cfexecute name="7za.exe" arguments='x -y "#StartingFile#" -o"#Output#"' outputfile="#Dir#log_Extract.txt" />

<!--- Read in the file --->
<cfset WordDoc = FileRead( EditFile ) />

<!--- Replace Values --->
<cfset WordDoc = Replace( WordDoc, "%SENTDATE%", DateFormat( Now(), "MMMM DD, YYYY" ), "ALL" ) />

<!--- Save File --->
<cfset FileWrite( EditFile, WordDoc ) />

<!--- Delete Archive if it exists --->
<cfif FileExists( NewFile )>
    <cfset FileDelete( NewFile ) />
</cfif>

<!--- Repack Archive --->
<cfexecute name="7za.exe" arguments='a "#NewFile#" "#Output#*"' outputfile="#Dir#log_Archive.txt" />

<!--- Rename Archive --->
<cffile action="rename" source="#NewFile#" destination="#ListFirst( NewFile, "." )#.docx" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:10:42.030

可能吗？是的。

但是，MS 使用的 XML 模式非常冗长。我知道这是多余的，但是 XML 非常复杂。

使用 .NET 操作文档并在 CF 中使用 .NET 集成进行调用可能是一个更好的主意。我相信也有 Java 库，但我不确定它们使用起来是否容易或工作得如何。

# javascript - 将 Javascript 变量放入 html 值

> ID：11691370
> 
> 赞同：1
> 
> 时间：2012-07-27T15:52:29.477
> 
> 标签：javascript, html, backbone.js

我正在使用 Backbone.js，我正在寻找一些东西来将我的数据转换为表单上的隐藏元素以提交，并将数据转换为文本框上的值。

我想要一些“强化战斗”的东西，它可以处理字符串数据上的所有特殊字符并正确处理数字。

有没有人有这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:49:03.193

为确保您可以写出特殊字符，您可以使用 .escape （它是下划线的包装器）将值写入隐藏字段。它会将您的特殊字符转换为 HTML 实体。它对于防止 XSS 攻击也很有用。或者您可以使用 $().text() ，这将逃避一切。

# git - 更改分支似乎删除了一个文件

> ID：11691372
> 
> 赞同：1
> 
> 时间：2012-07-27T15:52:33.510
> 
> 标签：git

我从我们的 git 服务器克隆了一个 repo，然后签出一个跟踪的分支，然后是 git status；git 表示文件被删除。在 repo 中没有做任何工作，只有 git 命令按照这个顺序：

```
git clone <myrepo>
git branch - indicates on master branch
git status - reports working directory is clean
git checkout <release-branch>
git status - shows a file has been deleted 
```

执行`ls <file>`失败，表明文件确实被删除。gitk 显示红色节点表示本地未提交的更改，但在 repo 中没有进行任何更改，只是对分支的结帐。在 gitk 中查看树时，父提交具有该文件。 `git checkout -- <file>`带回文件。

但是，如果我克隆相同的存储库，但包含分支，然后执行状态，则文件存在：

```
git clone -b <release-branch> <myrepo>
git status - reports working directory is clean
ls <file> - shows file exists 
```

这可以由不同系统上的几个不同的人重复。

为什么更改分支会导致该文件被删除？

这是完整的命令行序列和输出（更改名称以保护无辜者）：

```
$ rm -rf test-*

$ git clone <repo> test-master
Cloning into 'test-master'...
remote: Counting objects: 11478, done.
remote: Compressing objects: 100% (5918/5918), done.
remote: Total 11478 (delta 7856), reused 8429 (delta 5558)
Receiving objects: 100% (11478/11478), 7.48 MiB | 183 KiB/s, done.
Resolving deltas: 100% (7856/7856), done.

$ cd test-master

$ git branch
* master

$ git status
# On branch master
nothing to commit (working directory clean)

$ git checkout relbranch
Checking out files: 100% (112/112), done.
Branch relbranch set up to track remote branch relbranch from origin.
Switched to a new branch 'relbranch'

$ git status
# On branch relbranch
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       deleted:    prtbatt.c
#
no changes added to commit (use "git add" and/or "git commit -a")

$ cd ..

$ git clone -b relbranch <repo> test-relbranch
Cloning into 'test-relbranch'...
remote: Counting objects: 11478, done.
remote: Compressing objects: 100% (5918/5918), done.
remote: Total 11478 (delta 7856), reused 8429 (delta 5558)
Receiving objects: 100% (11478/11478), 7.48 MiB | 178 KiB/s, done.
Resolving deltas: 100% (7856/7856), done.

$ cd test-relbranch

$ git branch
* relbranch

$ git status
# On branch relbranch
nothing to commit (working directory clean) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:44:16.670

结果有人在两个不同的分支上创建了两次文件，没有合并（是的，已经发生了必要的公开鞭打），并且在一种情况下使用了所有大写字母，而在另一个分支上使用了所有小写字母。一旦他们意识到错误，他们删除了一个文件并合并，然后去度假。但他们从 Windows 中删除，不区分大小写。当他们进行合并时，它得到了两个副本。从假期回来后，他们在他们的分支上找不到文件，这导致弄清楚发生了什么。重新创建文件并合并后，一切都很好。

# javascript - Expressjs：如何跨路由共享路由中间件

> ID：11691376
> 
> 赞同：5
> 
> 时间：2012-07-27T15:52:44.627
> 
> 标签：javascript, node.js, express, middleware

我已经定义了多个路由中间件，并希望在多个路由/控制器之间共享它们。

这是我的设置：

app.js 需要 ./routes/index.js：

```
// load fs module
var fs = require('fs');

// import routing files
module.exports = function(app){
    fs.readdirSync(__dirname).forEach(function(file) {
        if (file == "index.js") return;
        var name = file.substr(0, file.indexOf('.'));
        require('./' + name)(app);
    });
}; 
```

index.js 在目录中自动加载所有路由。可能的路由文件可能如下所示：

```
module.exports = function(app) {

    app.get('/contacts', function(req, res, next) {
       // routing stuff
    });

}; 
```

现在我得到了路由中间件：

```
function isAuthenticated(req, res, next) {
    if (!req.session.authenticated) return next(new Error('user not authenticated'));
};

function loadUser(req, res, next) {
    var query = User.findById(req.session.user_id);
    query.populate('contacts');
    query.exec(function(err, user) {
        if (err) return next(err);
        req.user = user;
        next();
    });
} 
```

我想像这样使用：

```
var User = require('../models/user');

module.exports = function(app) {

    app.get('/contacts', isAuthenticated, loadUser, function(req, res, next) {
       res.json(req.user.contacts);
    });

}; 
```

我也想避免在所有路由文件中要求它们。

一个可能的解决方案也是：

```
// load fs module
var fs = require('fs');

var routeMiddleware = {
    loadUser: function(req, res, next) { // logic },
    isAuthenticated: function(req, res, next) { // logic },
};

// import routing files
module.exports = function(app){
    fs.readdirSync(__dirname).forEach(function(file) {
        if (file == "index.js") return;
        var name = file.substr(0, file.indexOf('.'));
        require('./' + name)(app, routeMiddleware);
    });
}; 
```

但我认为不是最好的...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T03:53:51.880

我个人会在应用程序中声明共享中间件，而不是在控制器中，即：

路线/home.js：

```
module.exports = function(req, res, next) { \\ Code } 
```

应用程序.js：

```
app.get('/', thisMiddleware, thatMiddleware, require('./routes/home')) 
```

您还可以创建一个堆栈（数组，而不是对象）：

```
theseMiddlewares = [thisMiddleware, thatMiddleware]
app.get('/', theseMiddlewares, require('./routes/home')) 
```

如果这些中间件用于除少数之外的所有路由，您可以执行以下操作：

```
theseMiddlewares = function(req, res, next) {
  if (req.url.match(some_regex_for_urls_to_skip)) next()
  else {
    \\ do stuff...
    next()
  }
} 
```

现在您可以`app.use(theseMiddlewares)`使用该中间件，或者如果它需要以相对于其他中间件的特定顺序发生，您可以使用`app.all('*', theseMiddlewares)`

# jquery - 二维 jQuery 滑块 - CSS 定位

> ID：11691388
> 
> 赞同：0
> 
> 时间：2012-07-27T15:53:05.987
> 
> 标签：jquery, css, slider, html

所以，我正在尝试构建一个二维内容滑块，但我在实现它时遇到了问题。我正在使用 jQuery。

滑块标记的基本思想是：

```
<div id="contentSlider">
    <div class="contentBlock">
        <div class="pictures">
            <ul>
                <li>
                    <img src="img1.jpg" />
                </li>
                <li>
                    <img src="img2.jpg" />
                </li>
                <li>
                    <img src="img3.jpg" />
                </li>
            </ul>
            <div class="absPositionedNavUp></div>
            <div class="absPositionedNavDown></div>
        </div>
        <div class="text">
            <p>
                Blah blah yadda yadda.
                Blah blah yadda yadda.
                Blah blah yadda yadda.
                Blah blah yadda yadda.
            </p>
            <p>
                Blah blah yadda yadda.
                Blah blah yadda yadda.
                Blah blah yadda yadda.
                Blah blah yadda yadda.
            </p>
        </div>
    </div>
    <div class="contentBlock">
        ........
    </div>
    <div class="contentBlock">
        ........
    </div>
</div>
<div class="slideAllContentLeft"></div>
<div class="slideAllContentRight"></div> 
```

我正在尝试做的（并且我已经能够使某些部分正常工作）是：

(1)让图片div在图片之间上下滑动

(2)让contentSlider div在多个contentBlock div之间左右滑动

我目前在：[http ://www.ficreates.com/_SiteDemos/PBL/projects.html](http://www.ficreates.com/_SiteDemos/PBL/projects.html)

我的主要问题是它的 CSS 部分。如何让 div 从左到右排列并在它们之间滑动？你现在可以看到我的代码，大概是那里的 60%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:10:51.307

我解决了这个问题，解决方案如下：

为内容块创建一个容器 div。它的宽度由以下方式设置：jQuery 长度属性（计算内容块的总数）乘以单个内容块的宽度（950 像素）。然后使用 .content_slider div 中的绝对定位将容器 div 从左到右定位。

幻影边框实际上是我在 reset.css 文件中设置的 line-height 的问题（ul 继承了“line-height:1;”）。我用“line-height: 0;”覆盖了它 瞧，单张照片之间不再有 1.5 像素的空间。

*   查看最终产品：[http ://www.ficreates.com/_SiteDemos/PBL/projects.html](http://www.ficreates.com/_SiteDemos/PBL/projects.html)
*   对于 javascript，请访问：[http ://www.ficreates.com/_SiteDemos/PBL/scripts/projWidg.js](http://www.ficreates.com/_SiteDemos/PBL/scripts/projWidg.js)

# xcode - svn:ignore 不忽略 xcuserdata

> ID：11691391
> 
> 赞同：6
> 
> 时间：2012-07-27T15:53:25.433
> 
> 标签：xcode, svn

我是第一次使用 svn:ignore 属性，所以我可能会误解一些东西。

我正在开发一个 iOS 应用程序。我有一个 Xcode 项目，我想忽略 xcuserdata 文件夹。使用 Mac 终端应用程序，我转到 svn 存储库的根目录并尝试使用以下命令忽略该文件夹：

```
svn propset svn:ignore path/to/my/folder/MyProject.xcodeproj/xcuserdata . 
```

如果我使用以下命令检查 svn:ignore 属性：

```
svn propedit svn:ignore . 
```

我懂了：

```
path/to/my/folder/MyProject.xcodeproj/xcuserdatata 
```

我已经提交并更新了，但是我做了一个 svn 状态，我仍然看到带有 ? 在它旁边做标记。有谁知道我做错了什么？我正在使用 svn 版本 1.6.17 (r1128011)。

* * *

编辑添加我的问题似乎类似于这个：[SVN just won't ignore a folder, 尽管 propset svn:ignore](https://stackoverflow.com/q/1689029/472344)，但在我的情况下，我想忽略的文件夹中的所有文件似乎都没有添加到 svn，也没有是我要忽略的文件夹添加到 svn。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T16:14:34.863

我想你想要：

```
svn propset svn:ignore xcuserdata path/to/my/folder/MyProject.xcodeproj 
```

即你想`xcuserdata`在路径上忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T16:37:10.197

有几种方法可以在全球范围内解决此问题。一种是编辑位于 ~/.subversion/config 的 subversion 的配置文件。查找 global-ignores 行，取消注释并将其更改为 xcuserdata，如下所示

```
global-ignores = xcuserdata 
```

保存它，svn status 将不再报告 xcuserdata 文件夹。这会在您的本地计算机上进行更改，并且只会影响您。要使其在存储库本身上影响每个人，请导航到源代码树的根并使用 global-ignores 属性，如下所示

```
svn propset svn:global-ignores xcuserdata . 
```

然后提交更改以使其处于活动状态。

# c# - AwesomiumSharp 如何处理从 Javascript 到 C# 的异步调用

> ID：11691392
> 
> 赞同：1
> 
> 时间：2012-07-27T15:53:34.010
> 
> 标签：c#, javascript, awesomium

我现在正在开发 AwesomiumSharp version1.6.6。并使用 CreateObject 和 SetObjectCallback 在 Javascript 和 C# 之间建立桥梁，然后 Javascript 可以调用 C# 的方法。

众所周知，从 Javascrip 到 C# 的调用是异步的。但是当我连续两次调用 C# 时。只是第一个调用通常由 C# 处理，另一个似乎被忽略了。我想知道 Awesomium 如何处理异步调用。

我只是想保证所有来自Javascript的异步调用都能正常处理，我该如何实现呢？

# java - Selenium Grid：如何获取执行当前测试的节点名称（计算机名称或 IP 地址）

> ID：11691395
> 
> 赞同：6
> 
> 时间：2012-07-27T15:53:48.107
> 
> 标签：java, selenium-grid

我在 Grid Hub 下执行测试，3 个节点在 3 台远程计算机上运行。在我的日志中，我可以看到所有这些节点以随机顺序发布的消息。为了分析日志，我必须按计算机名称对其进行排序。我以以下方式尝试过（Java）：

```
System.getenv().get("COMPUTERNAME") 
```

但是每次它都会返回运行 Hub 的计算机的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-16T21:01:19.213

由于您正在从集线器机器运行网格（可能还有 Jenkins/eclipse），因此 system.getenv() 将从集线器机器而不是节点机器返回信息。

使用 Selenium Grid 2，获取节点名称非常简单，请按照下列步骤操作：

> 1.  从您的网络驱动程序获取会话 ID。

```
Webdriver.getSessionId(); 
```

> 2.  转到以下网址。
>     
>     
>     
>     替换`gridIP`为您的 Grid 集线器机器的 IP 或主机名。
>     
>     
>     
>     替换`mySessionId`为您从上述步骤 1 中获得的会话 ID。

```
http://gridIP:4444/grid/api/testsession?session=mySessionId 
```

> 3.  从 JSON 响应中，您可以从 proxyId 字段中找到 IP 和端口号。
>     
>     
>     
>     下面的示例 JSON 响应（请参阅最后的 proxyId）：

```
{"msg":"slot found !","success":true,"session":"xd1215w5-sw53-4bcc-qwa6-7e1214dd6542","internalKey":"q13b2q5x-a21s-5ggt-b6aw-1w1qzr5k0672","inactivityTime":78,"proxyId":"http://10.10.9.3:7777"} 
```

> 4.  这是执行当前测试的 IP 地址。

```
"proxyId":"http://10.10.9.3:7777" 
```

# html - li:active 时内联列表项改变位置

> ID：11691402
> 
> 赞同：0
> 
> 时间：2012-07-27T15:54:22.587
> 
> 标签：html, css

I have a horizo​​ntal navigation bar that when one of the links are selected the link then becomes bold. 但是，当我单击一个时，它右侧的项目会移动位置，因为字体变大，从而使列表项的宽度变大。有没有办法避免这种情况？我希望文本留在同一个地方。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:11:39.300

两种可能的解决方案：

在元素上设置宽度`a`并使它们成为内联块。

```
​a {
    width: 100px;
    display: inline-block;
} 
```

您只需确保宽度足够宽，允许粗体文本显示而不会中断为两行。

第二种选择：使用文本阴影使其*看起来*粗体。

```
a.bolded {
    text-shadow:0px 0px 1px black;
} 
```

这是一个展示两者的[演示。](http://jsfiddle.net/JKFKC/13/)我有第二个悬停但你可以使用jQuery的添加或删除类[`.toggleClass()`](http://api.jquery.com/toggleClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:55:03.643

在为 case 链接 this 编写 CSS 时，您应该关注两个重要事件。一个是`:hover`，另一个是`:active`。

它们被称为“伪类”，当您将鼠标悬停在元素上（：悬停）和单击元素（：活动）时，它们为您提供设置元素样式的选项。

如果您**将 a 标签的样式设置为与 active 和 hover 相同**（通常只需要 hover ），那么您应该得到相同的结果并且字体大小将保持不变。这是和示例：

```
a, a:hover, a:active { font: normal 13px Arial; text-decoration: none; } 
```

在单个 CSS 行中，您可以将所有样式设置为相同。

*重要提示*：您可以使用 jquery，但不需要它（刚刚看到您在 jsfiddle 上使用它）。

# jquery - 提交表单，至少输入一个文本框值美国电话号码或国际号码 - jQuery Validate Plugin

> ID：11691411
> 
> 赞同：0
> 
> 时间：2012-07-27T15:55:08.053
> 
> 标签：jquery, jquery-plugins, jquery-validate

我喜欢做的是输入**一个**文本框值以提交表单。我有两个文本框，分别是“美国电话号码”和“国际电话号码”。我正在使用复选框来回切换这两个选项。它默认为我们的电话号码字段。

例如：

如果用户没有“美国电话号码”，则用户点击“国际”复选框并切换到“国际电话号码字段”。用户输入他们的“国际电话号码”，表单就可以很好地验证该字段。但是，用户已准备好提交表单，但 WAITTT 未提交表单，因为隐藏的其他字段（即美国电话号码字段）不允许用户提交，因为它正在验证该字段。（见图）。我不希望这种情况发生。

**我的问题是如何确保当用户在其中一个字段或字段中输入值时，表单将提交。**

![图片](../Images/6cf8f90b4d97c99c11d7fc45220c7883.png)

--------------HTML------

```
<form>
  <fieldset class="round shadow">
    <h3> Contact Information</h3>
    <p> Integer sagittis dolor a tellus bibendum tristique facilisis ipsum feugiat. Sed
      lacinia arcu scelerisque leo laoreet </p>
    <p class="field inline"> <span id="txtPhone-container" style="display: none;"> <span id="MainContent_lblPhone">Preferred Phone Number</span><span class="required">*</span><br>
      <input type="text" id="MainContent_txtPhone" name="ctl00$MainContent$txtPhone" class="error">
      <label for="username" generated="true" class="error" style="display: block;">Must acquire their preferred phone number.</label>
      </span> <span id="txtInternationalPhone-container" style="display: inline;"> <span id="MainContent_lblInternationalPhone">International Preferred Phone Number</span><span class="required">*</span><br>
      <input type="text" id="MainContent_txtInternationalPhone" name="ctl00$MainContent$txtInternationalPhone" class="valid">
      </span> <br>
      <input type="checkbox" name="ctl00$MainContent$CheckBox2" id="MainContent_CheckBox2">
      <label for="MainContent_CheckBox2">International</label>
    </p>
    <p class="field inline"> <span id="MainContent_lblEmail">Preferred E-mail Address</span><span class="required">*</span><br>
      <input type="text" id="MainContent_txtEmail" name="ctl00$MainContent$txtEmail" class="valid">
      <label for="MainContent_txtEmail" generated="true" class="error" style="display: none;">Must acquire thier preferred e-mail address.</label>
    </p>
  </fieldset>
  <p>
    <input type="submit" class="btnSave left" id="MainContent_btnSubmit" value="" name="ctl00$MainContent$btnSubmit" oldtitle="Submit" title="" aria-describedby="ui-tooltip-0">
    <input type="submit" class="btnClear left" id="MainContent_btnClear" value="" name="ctl00$MainContent$btnClear" oldtitle="Clear" title="">
  </p>
</form> 
```

-------------jQUERY-----------------

```
$(function () {
$('#MainContent_CheckBox2').change(function () {
    $('#txtPhone-container').toggle(!this.checked);
    $('#txtInternationalPhone-container').toggle(this.checked);
}).change();

//Validator for US Phone Number Format (###-###-####)
$.validator.addMethod("PhoneNumberFormat", function (value, element) {
    return value.match(/^[2-9]\d{2}-\d{3}-\d{4}$/);
});

//Validator for International Phone Number Format (+17034567890 | +17034567890x1234 | +912024553455 | +912024553455x12 | +441237761457)
$.validator.addMethod('InternationalPhoneNumberFormat', function (value) {
    return value.match(/^(\+[0-9]{2,}[0-9]{4,}[0-9]*)(x?[0-9]{1,})?$/);
});

//validate form
jQuery.validator.setDefaults({
    debug: true,
});
$("#frmNewApplicants").validate({
    meta: "validate",
    submitHandler: function () {
        $("#frmNewApplicants").ajaxSubmit()
    },
    rules: {
        ctl00$MainContent$txtPhone: {
            required: true,
            PhoneNumberFormat: true
        },
        ctl00$MainContent$txtInternationalPhone: {
            required: true,
            InternationalPhoneNumberFormat: true
        },
    },
    messages: {
        ctl00$MainContent$txtPhone: {
            required: "Must acquire their preferred phone number.",
            PhoneNumberFormat: "Correct Format: ###-###-####"
        },
        ctl00$MainContent$txtInternationalPhone: {
            required: "ex:+17034567890",
            InternationalPhoneNumberFormat: "ex:+17034567890 or +17034567890x1234"
        }
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:04:19.913

你可以通过使用[依赖回调](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-callback)来解决这个问题。

伪代码：

```
InternationalNumberField is required IF (InternationalCheckBox is clicked)

UsNumberField is required IF (InternationalCheckBox is not clicked) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:16:50.027

这就是你所做的

1.  创建一个变量来存储一个值，该值指示第一个字段是否包含有效的电话号码
    *   只需声明这个变量，并初始化为 false（稍后解释）
    *   例如： `var firstValid = false;`
2.  将单击事件处理程序附加到您的提交按钮以通过以下方式验证页面
3.  检查第一个字段的值（修剪后）是否为空字符串
    *   如果是这样，请转到 4
    *   否则，对值执行验证（确保它是有效的电话号码）
        *   如果它不是有效的电话号码，则显示错误消息并停止（不要提交）
        *   如果它是有效的电话号码，请将指示第一个字段有效的变量设置为 true ( `firstValid = true`)，然后继续执行第 4 步
4.  检查第二个字段的值（修剪后）是否为空字符串
    *   如果是空字符串，检查是否`firstValid == true`
        *   如果是真的，提交
        *   否则，显示错误消息并停止
    *   如果它不为空，则验证它是一个有效的电话号码
        *   如果有效，提交
        *   否则停止并显示错误消息

您可以使用 jQuery.submit() 来执行实际的提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:10:08.100

`ignore: ":hidden"`该插件自 1.9.0 版起就有一个默认值。如果您更新到最新版本，隐藏字段不会使您的表单提交无效。

*   [链接到为版本 >= 1.9.0 设置忽略值的代码行](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L218)
*   [github上关于这个问题的一些讨论](https://github.com/jzaefferer/jquery-validation/issues/189)
*   [显示插件选项的插件文档（参见“忽略”）](http://docs.jquery.com/Plugins/Validation/validate#toptions)

# c++ - 在函数中调用结构的构造函数，C++

> ID：11691416
> 
> 赞同：1
> 
> 时间：2012-07-27T15:55:24.973
> 
> 标签：c++, function, reference, constructor, struct

这是我的问题的大致代码。首先，我们有一个带有构造函数的结构体：

```
struct Pair{
Pair(int a, int b): (first (a) , second (b) ) {}
int first;
int second;
}; 
```

在地图中使用

```
map<string, Pair> mymap; 
```

我想在一个函数中初始化这个地图

```
void f(map<string, Pair>* mymap, string c,int x, int y )
{
(*mymap)[c]=Pair(x,y);
} 
```

但是编译器首先说它找不到合适的构造函数，然后下一行是没有为构造函数提供足够的参数。

我的一个朋友告诉我，我应该这样写函数：

```
void f(map<string, Pair>& mymap, const string& c,int x, int y )
{
  if (mymap.find(c) != mymap.end()) {
    mymap[c] = Pair(x,y);
   }
} 
```

**但他无法解释为什么这里应该使用*Type&而不是**Type* *，我想澄清这一点。**谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:03:04.043

问题是`operator[]`在地图中要求值类型是默认可构造的。如果您不希望您`Pair`的默认可构造，则必须避免使用`operator[]`：

```
void f(map<string, Pair>& mymap, string c,int x, int y )
{
   mymap.insert( std::make_pair(c,Pair(x,y)) );
} 
```

您可能误解了您朋友的建议。问题`operator[]`不在于它需要默认构造函数*，如果*它需要创建一个新元素，而是它需要它*以防万一它可能需要*。也就是说，元素是否事先存在并不重要。

* * *

如果您还打算更新，那么您还需要考虑该选项：

```
void f(map<string, Pair>& mymap, string c,int x, int y )
{
   auto res = mymap.insert( std::make_pair(c,Pair(x,y)) );
   if ( !res.second )
      res.first->second = Pair(x,y);
} 
```

基本上，该`insert`操作返回一对指向键的迭代器和一个布尔值，指示它是否`insert`创建了对象或者它是否已经存在（在这种情况下，映射中的值未修改）。通过存储结果，我们可以测试，如果`insert`没有创建值，我们可以通过返回的迭代器更新它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:01:47.277

在地图上调用`operator[]`将要求您的类型是默认可构造的。您可以通过使用[map::insert](http://en.cppreference.com/w/cpp/container/map/insert)或[map::emplace来避免这种情况](http://en.cppreference.com/w/cpp/container/map/emplace)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T16:03:42.793

您将需要一个默认的contrructor：

```
Pair(): first () , second () {} 
```

这是 map 所需要的，它 在使用不存在的键调用时`operator[]`创建一个默认构造的 -`mapped_type`

~~[和一个实现严格弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)的小于运算符：~~

 ~~```
struct Pair {
  // as before
  bool operator<(const Pair& rhs) const {
     / some code to implement less-than
  }
}; 
```~~ 

~~或者您可以将比较函子或函数实现严格弱排序作为第三个模板参数传递。~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:58:28.653

标准容器需要一个默认构造函数。他们将`operator=`在构建后的某个时候使用 来设置正确的值。

# c# - 当时间在下午时，DateTime.ParseExact 为 sv-SE 文化抛出 FormatException

> ID：11691424
> 
> 赞同：0
> 
> 时间：2012-07-27T15:55:42.660
> 
> 标签：c#, datetime, localization

`DateTime.ParseExact`在瑞典（`sv-SE`）文化的方法中，我观察到一些奇怪的行为。

我的电脑文化是`en-US`，但业务逻辑需要`sv-SE`文化。所以我先把它设置在当前线程上。

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo("sv-SE"); 
```

然后我执行以下操作来解析`DateTime`值。我在这里尝试解析的日期时间是**2012 年 5 月 27 日上午 11:57**。

```
DateTime.ParseExact("270512T11:57", "ddMMyyThh:mm", Thread.CurrentThread.CurrentUICulture); 
```

这工作得很好。

但是当时间从晚上开始时，我得到了例外。当我尝试在**2012 年 5 月 27 日解析值 11:57 PM**的日期时间戳时。

```
DateTime.ParseExact("270512T23:57", "ddMMyyThh:mm", Thread.CurrentThread.CurrentUICulture); 
```

上面的行给出了`FormatException`消息**字符串未被识别为有效的日期时间。**.

这里真的有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:58:52.913

hh 仅是 12 小时制。如果您将格式字符串更改为“ddMMyyTHH:mm”，它应该可以工作。

# ruby - 在 Rails gem 上工作的更好方法

> ID：11691427
> 
> 赞同：0
> 
> 时间：2012-07-27T15:55:46.687
> 
> 标签：ruby, ruby-on-rails-3, gem

嗨，伙计们，有时我工作一个 gem，有时为了开发这个 gem，我需要一个 Rails 应用程序。实际上，当我这样做时，我在**vendor/plugins/my_gem/**目录中创建了我的 gem，并且我在这个目录中完成了所有工作。

可能还有其他方法可以做到这一点，更清洁（这样的插件在 rails 4.0 中不起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:34:44.497

我通常工作的每个自定义 gem 都有一个单独的、版本控制的项目。我通常使用 Bundler 创建 gem，尽管还有其他选项。我将 rake 指定为`my_gem.gemspec`. 在 gem 中编写完代码和规范后，我通常会为其分配一个新版本，然后运行：

```
# cd/to/my_gem
bundle exec rake build # build a gem
ruby -S gem install ./pkg/my_gem-0.0.1.gem # install it locally

# cd/to/app_using_gem/
gem unpack my_gem -v 0.0.1 --target ./vendor/gems # vendorize gem 
```

我认为这种方式比修改代码更干净`vendor/plugins/my_gem/`

# c# - Mono for Android：显示文件选择器？

> ID：11691428
> 
> 赞同：0
> 
> 时间：2012-07-27T15:55:46.993
> 
> 标签：c#, java, android, mono, xamarin.android

我正在尝试使用[Mono for Android将代码从](http://xamarin.com/monoforandroid)[本教程](http://www.dreamincode.net/forums/topic/190013-creating-simple-file-chooser/)移植到 C# 。这是我的代码：

文件布局.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_width="fill_parent">
    <TextView
        android:text="@+id/TextView01"
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textStyle="bold"
        android:layout_marginTop="5dip"
        android:layout_marginLeft="5dip" />
    <TextView
        android:text="@+id/TextView02"
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip" />
</LinearLayout> 
```

FileArrayAdapter.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;

namespace FileChooser
{
    public class FileArrayAdapter : ArrayAdapter<Option>
    {

        private Context c;
        private int id;
        private List<Option> items;

        public FileArrayAdapter(Context context, int textViewResourceId,
                List<Option> objects)
            : base(context, textViewResourceId, objects)
        {

            c = context;
            id = textViewResourceId;
            items = objects;
        }

        public Option getItem(int i)
        {
            return items[i];
        }
        public View getView(int position, View convertView, ViewGroup parent)
        {
            View v = convertView;
            if (v == null)
            {
                LayoutInflater vi = (LayoutInflater)c.GetSystemService(Context.LayoutInflaterService);
                v = vi.Inflate(id, null);
            }
            Option o = items[position];
            if (o != null)
            {
                TextView t1 = (TextView)v.FindViewById(Resource.Id.TextView01);
                TextView t2 = (TextView)v.FindViewById(Resource.Id.TextView02);

                if (t1 != null)
                    t1.Text = o.getName().ToString();
                if (t2 != null)
                    t2.Text = o.getData().ToString();

            }
            return v;
        }

    }

} 
```

活动1.cs：

```
using System;
using System.Collections;
using System.Collections.Generic;
using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Util;
using Android.Views;
using Android.Widget;
using Android.OS;
using Java.IO;
using Environment = Android.OS.Environment;

namespace FileChooser
{
    [Activity(Label = "FileChooser", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : ListActivity
    {
        private File currentDir;
        private FileArrayAdapter adapter;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            currentDir = new File(Environment.RootDirectory.AbsolutePath);
            fill(currentDir);

        }

        private void fill(File f)
        {
            File[] dirs = f.ListFiles();

            Title = ("Current Dir: " + f.Name);
            List<Option> dir = new List<Option>();
            List<Option> fls = new List<Option>();

            try
            {
                foreach (var ff in dirs)
                    if (ff.IsDirectory)
                        dir.Add(new Option(ff.Name, "Folder", ff.AbsolutePath));
                    else
                        fls.Add(new Option(ff.Name, "File Size: " + ff.Length(), ff.AbsolutePath));

                dir.AddRange(fls);

                if (!String.Equals(f.Name, "sdcard", comparisonType: StringComparison.InvariantCultureIgnoreCase))
                    dir.Insert(0, new Option("..", "Parent Directory", f.Parent));

                adapter = new FileArrayAdapter(this, Resource.Layout.FileLayout, dir);
                this.ListAdapter = adapter;

            } 
            catch (Exception e)
            {
                System.Diagnostics.Debug.WriteLine("Error: ", e.Message);

            }

        }

    }
} 
```

我收到以下错误：

```
The program 'Mono' has exited with code 255 (0xff). 
```

我在最后一条语句之后放了一个断点。这是我的局部变量的截图：![在此处输入图像描述](../Images/d6e541d3031f28c661538f5c8c5dcbc9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:17:01.920

我可能会在这里跑题，但前段时间我写了一个简单的轻量级文件选择小部件。

```
package com.skype.widget;
import java.io.File;
import java.util.ArrayList;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

/**
 * General purpose, light-weight file explorer widget.<br>
 * Upon initialization, it will point at the root of the filesystem, at which
 * point you can manipulate it with {@link #browseToLocation(String)}
 * 
 * @author Aleksandar Milenkovic
 */

public class FileBrowser extends ListView implements AdapterView.OnItemClickListener
{
/**
 * Use display mode to toggle between absolute and relative display modes.
 */
public enum DISPLAYMODE
{
    ABSOLUTE, RELATIVE;
}

/**
 * Use work mode to toggle between folder-only and files-and-folders mode.
 */
public enum WORKMODE
{
    FOLDER_ONLY, FILE_AND_FOLDER;
}

public static final String      ROOT        = "/";
public static final String      LOGTAG      = "FileBrowser";

@SuppressWarnings("unused")
private Context                 context;

private final DISPLAYMODE       displayMode = DISPLAYMODE.RELATIVE;
private WORKMODE                workMode    = WORKMODE.FILE_AND_FOLDER;
private ArrayList<String>       directoryEntries;
private File                    currentDirectory;
private ArrayAdapter<String>    mAdapter;

public FileBrowser(Context context)
{
    this(context, null, 0);
}

public FileBrowser(Context context, AttributeSet attrs, int defStyle)
{
    super(context, attrs, defStyle);
    this.context = context;
    //init members
    directoryEntries = new ArrayList<String>();
    mAdapter = new ArrayAdapter<String>(context, R.layout.file_browser_entry, this.directoryEntries);
    this.setAdapter(mAdapter);

    //browse to root
    browseToLocation(ROOT);

    //refresh UI elements
    mAdapter.notifyDataSetChanged();
    setOnItemClickListener(this);
}

public FileBrowser(Context context, AttributeSet attrs)
{
    this(context, attrs, 0);
}

/**
 * This function browses to the root-directory of the file-system.
 * 
 * @param location
 *            the absolute path you want to browse to.
 */
public void browseToLocation(String location)
{
    browseTo(new File(location));
}

/**
 * This function browses up one level according to the field:
 * currentDirectory
 */
private void upOneLevel()
{
    Log.d(LOGTAG, "upOneLevel()");
    if (currentDirectory.getAbsolutePath() == ROOT) return;
    if (this.currentDirectory.getParent() != null) this.browseTo(this.currentDirectory.getParentFile());
}

private void browseTo(final File aDirectory)
{
    Log.d(LOGTAG, "browseTo()");
    if (aDirectory.isDirectory())
    {
        this.currentDirectory = aDirectory;
        fill(aDirectory.listFiles());
    } else
    {
        Log.d(LOGTAG, aDirectory.getAbsolutePath());
    }
}

private void fill(File[] files)
{
    Log.d(LOGTAG, "fill()");
    this.directoryEntries.clear();

    // Add the "." and the ".." == 'Up one level'
    this.directoryEntries.add(".");
    if (this.currentDirectory.getParent() != null) this.directoryEntries.add("..");

    switch (this.workMode)
    {
        case FOLDER_ONLY:
            switch (this.displayMode)
            {
                case ABSOLUTE:
                    for (File file : files)
                    {
                        if (file.isDirectory()) this.directoryEntries.add(file.getPath() + "/");
                    }
                    break;
                case RELATIVE: // On relative Mode, we have to add the current-path to the beginning
                    int currentPathStringLenght = this.currentDirectory.getAbsolutePath().length();
                    for (File file : files)
                    {
                        if (file.isDirectory())
                            this.directoryEntries.add(file.getAbsolutePath().substring(currentPathStringLenght) + "/");
                    }
                    break;
            }
            break;

        case FILE_AND_FOLDER:
            switch (this.displayMode)
            {
                case ABSOLUTE:
                    for (File file : files)
                    {
                        if (file.isDirectory())
                            this.directoryEntries.add(file.getPath() + "/");
                        else
                            this.directoryEntries.add(file.getPath());
                    }
                    break;
                case RELATIVE: // On relative Mode, we have to add the current-path to the beginning
                    int currentPathStringLenght = this.currentDirectory.getAbsolutePath().length();
                    for (File file : files)
                    {
                        if (file.isDirectory())
                            this.directoryEntries.add(file.getAbsolutePath().substring(currentPathStringLenght) + "/");
                        else
                            this.directoryEntries.add(file.getAbsolutePath().substring(currentPathStringLenght));
                    }
                    break;
            }
    }

}

/**
 * Internal onItemClick method that handles browsing and displaying.<br>
 * <b>Make sure to call this at the start of the outer onItemClick.</b>
 */
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
{
    String selectedFileString = directoryEntries.get(arg2);
    Log.d(LOGTAG, "onItemClick() fired!");
    if (selectedFileString.equals("."))
    {
        // Refresh
        browseTo(currentDirectory);
    } else if (selectedFileString.equals(".."))
    {
        upOneLevel();
    } else
    {
        File clickedFile = null;
        switch (displayMode)
        {
            case RELATIVE:
                clickedFile = new File(currentDirectory.getAbsolutePath() + directoryEntries.get(arg2));
                break;
            case ABSOLUTE:
                clickedFile = new File(directoryEntries.get(arg2));
                break;
        }
        if (clickedFile != null) browseTo(clickedFile);
    }
    mAdapter.notifyDataSetChanged();
    this.postInvalidate();
}

/**
 * Gets the current path in absolute form.
 * 
 * @return the absolute path pointing to the current directory.
 */
public String getCurrentPath()
{
    return currentDirectory.getAbsolutePath();
}

/**
 * Method used for setting the work mode of this widget. <br>
 * It can be either {@link WORKMODE#FILE_AND_FOLDER} or {@link WORKMODE#FOLDER_ONLY}
 * @param wm
 * the workmode to use.
 */
public void setWorkMode(WORKMODE wm)
{
    this.workMode = wm;
}

/**
 * Returns the current workmode of this widget.
 * @return
 * {@link #workMode} as {@link WORKMODE} enum
 */
public WORKMODE getWorkMode()
{
    return workMode;
} 
```

}

用法：

```
 final FileBrowser fb = (FileBrowser) dialog.findViewById(R.id.folder_list);
    fb.setWorkMode(FileBrowser.WORKMODE.FOLDER_ONLY);
    fb.setOnItemClickListener(new AdapterView.OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
        {
            fb.onItemClick(arg0, arg1, arg2, arg3);

            txt.setText(fb.getCurrentPath());
            savingPath = fb.getCurrentPath() + "/";
        }
    }); 
```

抱歉，如果那不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:39:57.057

我通过对`FileArrayAdapter.cs`. 我没有实现 ArrayAdapter，而是实现了 BaseAdapter 类。. 切换到正确的基类也让我意识到实现的方法中的大写是错误的。

其中一个棘手的部分是`List<Option> item`将 a转换`Java` `Object`为 GetItem() 方法。

这是修改后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Runtime;

namespace FileChooser
{
    public class FileArrayAdapter : BaseAdapter<Option>
    {

        private Context c;
        private int id;
        private List<Option> items;

        public FileArrayAdapter(Context context, int textViewResourceId,
                List<Option> objects)

        {

            c = context;
            id = textViewResourceId;
            items = objects;
        }

        public override View GetView(int position, View convertView, ViewGroup parent)
        {
            View v = convertView;
            if (v == null)
            {
                LayoutInflater vi = (LayoutInflater)c.GetSystemService(Context.LayoutInflaterService);
                v = vi.Inflate(id, null);
            }
            Option o = items[position];
            if (o != null)
            {
                TextView t1 = (TextView)v.FindViewById(Resource.Id.TextView01);
                TextView t2 = (TextView)v.FindViewById(Resource.Id.TextView02);

                if (t1 != null)
                    t1.Text = o.getName().ToString();
                if (t2 != null)
                    t2.Text = o.getData().ToString();

            }
            return v;
        }

        public override Option this[int position]
        {
            get { return items[position]; }
        }

        public override int Count
        {
            get { return items.Count; }
        }

        public override long GetItemId(int position)
        {
            return position;
        }

    }

} 
```

# biztalk - BizTalk HL7 加速器能否生成符合 HL7 v2XML 的消息

> ID：11691439
> 
> 赞同：0
> 
> 时间：2012-07-27T15:56:11.533
> 
> 标签：biztalk, biztalk-2010, hl7, btahl7

默认情况下，看起来 HL7 加速器从不符合 HL7.org 的 HL7 v2 消息生成 XML（与其 XML v2 XML 模式不匹配）。是否有可能让它生成符合 HL7 v2XML 的 xml？

**编辑：**
我们有将 HL7v2 XML 转换为其他 xml 格式的 xslt 转换。这些由我们平台中的其他工具使用。如果 BTAHL72XRecievePipeline 组件生成符合 HL72 的 XML，我们将能够简单地在 BizTalk 中重新使用这些转换，但由于某种原因，管道生成的 xml 略有不同。我不确定为什么会这样。

如果您查看来自 HL7.org 的标准 HL7 2 XML 规范，则元素名称使用句点而不是 biztalk 模式使用的下划线，并且 biztalk 模式中的元素名称附加了字段/组件的名称，而在在 HL7.org 模式中，字段/组件名称被指定为元素的可选属性。

BTAHL72XReceive/Send 管道似乎需要 BTAHL7 模式，而 BTAHL72XMLRecieve/Send 管道使用 HL7 2 XML 模式。但是，能够使用来自 BTAHL72XReceive/Send 管道的 HL7 2 XML 不是很有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:24:25.823

本文[将](http://msdn.microsoft.com/en-us/library/ee404918.aspx)引导您使适配器与 HL7 v2 XML 模式一起工作。该页面上还有一个指向执行该工作的工具的链接。哦，这是另一篇[支持](http://msdn.microsoft.com/en-us/library/bb981217%28v=bts.10%29.aspx)文章。

# php - php简单关联数组

> ID：11691441
> 
> 赞同：0
> 
> 时间：2012-07-27T15:56:21.633
> 
> 标签：php, arrays, associative

我已经这样做了一百万次，但由于某种原因，我今天无法让它工作......

我有这个关联数组

```
 Array
 (
     [0] => stdClass Object
         (
             [registrantKey] => 106569618
             [firstName] => xxx
             [lastName] => yyy
             [email] => x@x.x

         )

     [1] => stdClass Object
         (
             [registrantKey] => 106975808
             [firstName] => qqq
             [lastName] => ppp
             [email] => aaa@aaa.com

         )
 ...
 ... 
```

我只想得到他们每个人的名字，我使用了一个 foreach 循环，但并没有真正让我得到我想要的。

有任何想法吗？

```
 foreach($array as $key=>$value){
      echo $value['firstName'];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:01:51.240

你也可以这样做：

```
foreach($array as $key=> (array) $value){
     echo $value['firstName'];
} 
```

这会将您的对象类型转换为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:58:10.633

对于这种情况，您的数组元素不是数组而是对象。

因此，它应该是：

```
foreach($array as $key=>$value){
    echo $value->firstName;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:58:13.443

```
foreach($array as $key=>$value){
  echo $value->firstName;
} 
```

你有`stdClass Objects`作为数组元素而不是关联数组，所以你需要选项符号：`$value->firstName`

您还可以`stdClass Object`通过类型转换将其转换为数组：

```
foreach($array as $key=> (array) $value){
  echo $value['firstName'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T15:58:28.340

尝试这个：

```
$value->firstName; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T16:27:14.307

```
<?php 

 $array = (array)$array; 
 $firstNames = array();
 foreach($array as $a)
 {
     $firstNames[] = $a['firstName'];
 }
 print_r($firstNames);

?> 
```

# sql - 如何模拟sql连接？

> ID：11691443
> 
> 赞同：1
> 
> 时间：2012-07-27T15:56:25.033
> 
> 标签：sql, join, nosql

现在我尝试使用 sql 连接算法（[嵌套循环连接](http://en.wikipedia.org/wiki/Nested_loop_join)）来模拟在 nosql 中连接两个（或多个）表的操作。

如果我有两个表 TableA 和 TableB，现在我想加入这些表。首先，我将从这两个表中选择所有记录。并使用两个循环从 TableA 和 TableB 中找到满足连接条件的记录。

但现在我不能像这样处理加入条件：

```
(TableA.id = TableB.id OR TableA.name= TableB.name) AND TableA.age = TableB.age 
```

我可以将包含'（'或'）'的复杂连接条件转换为仅包含 AND ， OR 的单级连接条件。（像这样：TableA.id = TableB.id AND TableA.age = TableB.age OR TableA.name= TableB.name AND TableA.age = TableB.age)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:43:42.480

如果表很大，您可以使用 playOrm 连接每个表的分区。如果表很小，您可以只使用 playOrm 中的连接。我假设你在谈论 nosql。如果表非常大，您将需要使用 map/reduce。playOrm 连接更适用于按帐户或按月或按客户端分区的 OLTP 应用程序，因此您可以拥有无​​限数量的客户端，只需查询您正在处理的客户端的分区。

# java - 根据 W3C XML 模式定义验证 XSD

> ID：11691449
> 
> 赞同：3
> 
> 时间：2012-07-27T15:56:34.490
> 
> 标签：java, xml, validation, xsd, sax

我正在生成一些 XML 模式，并希望确保我们的生成器正在创建有效的 XML 模式文档（不是 XML）。我试图提出验证 XML Schema 文档的代码，但失败得很惨。我没想到会这么复杂。

```
 private void validateXsd( String xsdAsString ) {
    try {
      SAXParserFactory factory = SAXParserFactory.newInstance();
      factory.setValidating(true);
      factory.setNamespaceAware(true);
      factory.setFeature( "http://apache.org/xml/features/validation/schema", true );

      SchemaFactory schemaFactory = SchemaFactory.newInstance( XMLConstants.W3C_XML_SCHEMA_NS_URI );

      URL xmlSchemaXSD = this.getClass().getClassLoader().getResource( "com/metamodel/xsd/XMLSchema.xsd" );
      URL xmlSchemaDTD = this.getClass().getClassLoader().getResource( "com/metamodel/xsd/XMLSchema.dtd" );
      URL xmlSchemaDataTypes = this.getClass().getClassLoader().getResource( "com/metamodel/xsd/datatypes.dtd" );

      // requires that XMLSchema.dtd and datatypes.dtd are present in the same directory with the XMLSchema.xsd.
      factory.setSchema( schemaFactory.newSchema( xmlSchemaXSD ) );

      SAXParser parser = factory.newSAXParser();
      // parser.setProperty( "http://java.sun.com/xml/jaxp/properties/schemaLanguage", "http://www.w3.org/2001/XMLSchema" );

      XMLReader reader = parser.getXMLReader();
      reader.setErrorHandler( new SimpleErrorHandler() );
      reader.parse( new InputSource( IOUtils.toInputStream( xsdAsString ) ) );
    } catch( SAXParseException e ) {
      e.printStackTrace( System.err );
    } catch ( ParserConfigurationException e ) {
      e.printStackTrace( System.err );
    } catch ( SAXException e ) {
      e.printStackTrace( System.err );
    } catch ( IOException e ) {
      e.printStackTrace( System.err );
    }
  } 
```

这段代码非常接近我需要做的，但我收到以下错误。

```
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'jar:file:/r:/as4ot/lib/metamodel.jar!/com/metamodel/xsd/XMLSchema.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:236)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:172)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:382)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:316)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaError(XSDHandler.java:2245)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchema(XSDHandler.java:1590)
    at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:438)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:556)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:523)
    at com.sun.org.apache.xerces.internal.jaxp.validation.xs.SchemaFactoryImpl.newSchema(SchemaFactoryImpl.java:206)
    at javax.xml.validation.SchemaFactory.newSchema(SchemaFactory.java:489)
    at javax.xml.validation.SchemaFactory.newSchema(SchemaFactory.java:521) 
```

我在调用 setSchema(uri) 时使用了 URL，以确保 XMLSchema.dtd 和 datatypes.dtd 是相对的，我希望它们可用，但我不确定如何检查。

我猜它不喜欢 XMLSchema.xsd、XMLSchema.dtd 和 datatypes.dtd 捆绑在我的 jar 中并因此由类加载器加载的事实。无论如何要解决这个问题，以便我可以进入下一个障碍，即*org.xml.sax.SAXParseException：src-resolve：无法将名称“xml：lang”解析为（n）“属性声明”组件。*假设它的行为与我从 jar 外部的目录路径加载 XMLSchema 时的行为相同。

我的目标是：

*   从 jar 中加载 XMLSchema.xsd，以便它与代码一起整齐地打包。
*   克服关于 xml:lang 的下一个错误。

希望我没有要求太多！

谢谢，斯图尔特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:05:48.763

出于几个原因，我不会使用您描述的方法来验证 XSD，最重要的原因是 XSD 作为一种语言很弱，因此它本身并没有捕获完整的规范。因此，您很可能会验证实际上无效的内容。

对于 XSD 验证，您有专门的处理器；Java 有[XSOM](http://xsom.java.net/)；遵循[用户指南](http://xsom.java.net/userguide.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T22:03:38.357

我同意 Petru 的观点，即针对模式文档的模式验证模式并不是一件非常有用的事情，因为它不会检测到模式中的所有错误。确保您的模式有效的唯一真正方法是将其传递给模式处理器。

例如，对于撒克逊

```
Processor p = new Processor(true);
StreamSource ss = new StreamSource(new File('mySchema.xsd');
p.getSchemaManager().load(ss); 
```

会告诉你你的模式是否有效。

# python - 在 pygame 中（甚至一般在 python 中），我将如何创建一个在播放声音时继续执行的循环？

> ID：11691452
> 
> 赞同：4
> 
> 时间：2012-07-27T15:57:04.287
> 
> 标签：python, pygame, audio

在 pygame 中有没有办法判断声音是否已经播放完毕？我阅读了`set_endevent`文档`get_endevent`，但我无法理解它或找到一个例子。

我正在尝试专门执行以下操作：

1.  播放声音
2.  在播放声音时，继续循环迭代
3.  声音播放完毕后，继续前进。

我确实检查了其他被问到的问题——没有找到任何专门针对 python / pygame 的问题。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-10T07:36:05.383

诀窍是，`pygame.mixer.Channel`当您调用`play()`声音 ( `pygame.mixer.Sound`) 的方法时，您会得到一个类型的对象。您可以使用通道的方法测试声音是否播放完毕`get_busy()`。

一个简单的例子：

```
import pygame.mixer, pygame.time

mixer = pygame.mixer

mixer.init()
tada = mixer.Sound('tada.wav')
channel = tada.play()

while channel.get_busy():
    pygame.time.wait(100)  # ms
    print "Playing..."
print "Finished." 
```

这些示例假设您有一个名为“tada.wav”的声音文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T16:18:34.320

您可以使用如下代码：

```
import pygame
pygame.mixer.music.load('your_sound_file.mid')
pygame.mixer.music.play(-1, 0.0)
while pygame.mixer.music.get_busy() == True:
    continue 
```

而且，它不必是 .mid 文件。它可以是 pygame 可以理解的任何文件类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T18:00:51.653

要使用[set_endevent](http://www.pygame.org/docs/ref/music.html#pygame.mixer.music.set_endevent)，您必须执行以下操作：

```
# You can have several User Events, so make a separate Id for each one
END_MUSIC_EVENT = pygame.USEREVENT + 0    # ID for music Event

pygame.mixer.music.set_endevent(END_MUSIC_EVENT)

running = True

# Main loop
while running:
    events = pygame.event.get()
    if events:
        for event in events:
            ...
            if event.type == END_MUSIC_EVENT and event.code == 0:
                print "Music ended"
            ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T06:54:33.677

```
pygame.mixer.pre_init(44100, 16, 2, 4096) # setup mixer to avoid sound lag
pygame.init()
startmusic="resources\snd\SGOpeningtheme.ogg"
pygame.mixer.set_num_channels(64) # set a large number of channels so all the game sounds will play WITHOUT stopping another
pygame.mixer.music.load(startmusic)
pygame.mixer.music.set_volume(0.3)
pygame.mixer.music.play(-1) # the music will loop endlessly 
```

执行上述代码后，音乐将继续播放，直到您根据 pygame 站点信息停止或淡出为止。您可以循环播放您的心声，音乐将继续。如果您需要音乐播放两次，而不是 -1 放 1。然后音乐将播放一次并重复一次。您可以通过执行来检查流是否正在播放`pygame.mixer.music.get_busy()`。如果它返回 True 它是。False 表示它已经完成。

# string - 在批处理脚本中将变量字符串作为命令运行

> ID：11691454
> 
> 赞同：10
> 
> 时间：2012-07-27T15:57:07.377
> 
> 标签：string, batch-file, command-line-arguments

编辑：下面的代码没有任何问题。错误来自其他地方。

命令变量是我要执行的命令。name 变量正在提取计算机名称列表。当我回显！命令！它返回我想要使用的值。那应该运行删除所有机器所需的命令，但是，当我实际运行！command！或 %command%，name 变量未添加且失败。

```
d:
cd "Program Files\admin"
setlocal EnableDelayedExpansion
SET string=%
for /f "tokens=*" %%a in (oldMachines.txt) do (
set name=%%a
set command=sbadmcl.exe AdminUser:admin -AdminPwd:password -Command:DeleteMachine -Machine:!name!
REM echo !name!
REM echo !command!
REM !command!
%command%
)
pause 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T16:48:48.917

`%command%`不会起作用，因为它在解析时被扩展，所以扩展的值是循环执行之前命令的值。

我不知道为什么`!command!`不起作用。通常，在变量中执行代码时，您希望使用正常扩展而不是延迟扩展，因为延迟扩展会限制您可以执行的一些操作。它与 CMD 解析器的工作方式有关。但是我在您的命令中看不到任何会导致延迟扩展问题的内容。

尝试`call %%command%%`

# javascript - JS 和 Wordpress 中未捕获的 SyntaxError

> ID：11691455
> 
> 赞同：1
> 
> 时间：2012-07-27T15:57:18.933
> 
> 标签：javascript, jquery, wordpress

我不太确定为什么我的代码会导致这种情况。

我在标题中有这个 jquery 脚本：

```
<script>
  $(document).ready(function() {
      $('.control').on('click', function(e) {
          e.preventDefault();
          var field = $(this).data('field');
          $('.hider:visible').fadeOut("slow", function() {
              $('#' + field + '-gallery, #' + field + '-tag').fadeIn("slow");
          });
      });

      var randomIndex = Math.floor((Math.random() * 100) + 1) % 3;
      console.log(randomIndex);

      var field = $($('a').get(randomIndex)).data('field');
      $('#' + field + '-gallery, #' + field + '-tag').fadeIn("slow");
  })​;
   </script> 
```

当我重新加载页面时，没有任何反应，因此脚本似乎没有运行。当我在 Chrome 上检查页面时，我看到在名为 (program) 的选项卡中存在此错误，它位于前几行：

```
 if (window.top.require) {
Uncaught SyntaxError: Unexpected token ILLEGAL
    window.top.require("ripple/bootstrap").inject(window, document);} 
```

我不知道我的代码中是什么导致了这个错误。当我拿出我的剧本时，它就消失了。不太确定是 wordpress 还是 jqueryUI 的东西（我已经为另一个插件加载了）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:09:02.360

`)`您在和之间的最后一行有一个非法的不可见字符`;`。

将光标放在 之后`;`，然后开始退格直到删除`)`，然后重新键入它们。

```
 })​;
 //  ^^---between these 
```

您会注意到，在退格时，光标将无法移动一次。那是删除隐形字符的时候。

当从 jsFiddle 或其他类似站点复制/粘贴代码时会发生这种情况。

字符是 unicode `\u200B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:39:55.973

AFAIK，你不知道它来自哪里的脚本代码，是由黑莓模拟器[Ripple](https://developer.blackberry.com/html5/downloads/ripple)生成的，当它插入一个生成的脚本你的 document.documentElement （[见 GitHub](https://github.com/blackberry/Ripple-UI/pull/427/files#L9R20)）。我已经看到这种行为在我的许多项目中导致问题，例如，使用 dataType HTML 插入 ajax 结果并混淆我的选择器，或者结合 jquery 表单插件使我的 ajax 响应更脏（无法链接到它，因为没有足够的声誉）等。我认为它可能会干扰您的javascript？希望能帮助到你。

# excel - 具有可变 excel 连接管理器的 SSIS

> ID：11691456
> 
> 赞同：7
> 
> 时间：2012-07-27T15:57:20.323
> 
> 标签：excel, variables, ssis, connection

我正在尝试使用 SSIS 中的 WMI 事件观察器任务自动执行包。我想要的功能是在将 excel 文件放入某个文件夹时自动执行包。但是，这些 excel 文件将成为填充数据库的连接管理器。

目前 SSIS 不允许我这样做，因为我的 excel 连接管理器在我运行程序时没有路径，并且只有在文件被放入文件夹后才存在。

有没有办法让变量 excel 连接管理器或连接字符串的值成为变量？

另外，如何在表达式中实现这个变量的使用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-30T13:15:46.187

您可以为您的 excel 源的连接字符串使用一个变量：

1.  单击您的 excel 源的连接管理器
2.  在属性窗口中，添加一个表达式(1) ConnectionString(2) 并分配一个变量(3)

![在此处输入图像描述](../Images/bb5cdc9f422e476eed7f287f32eb9fc9.png)

你可以用变量做很多不同的事情。它们经常与`for each loop containers`和结合使用`file system tasks`。你通常会做这样的事情

1.  在变量窗口中创建一个变量
2.  设置一个静态值或在包流期间更改的值
3.  将变量映射到表达式

网上有很多howtos，不妨看看这个来暖和一下：

[http://www.simple-talk.com/sql/ssis/working-with-variables-in-sql-server-integration-services/](http://www.simple-talk.com/sql/ssis/working-with-variables-in-sql-server-integration-services/)

[http://www.rafael-salas.com/2007/03/ssis-file-system-task-move-and-rename.html](http://www.rafael-salas.com/2007/03/ssis-file-system-task-move-and-rename.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:16:39.923

我知道实现这一目标的最快方法是创建一个 excel 连接管理器并通过变量设置其连接字符串。为此，您需要首先通过将连接器指向一个 excel 文件来创建连接器。哪个都没有关系，因为您将在运行时动态设置新文件。然后，选择您的 excel 连接管理器并检查其属性。你有一个`ConnectionString`属性，你可以通过一个表达式来设置它。

![在此处输入图像描述](../Images/111b9e498f6216d78e8831103bcf39de.png)

但是，您必须确保您的包仅在填充了正确的连接字符串**后才使用 Excel 连接器！**有关 SSIS 变量的更多信息，请查看此链接：SSIS[中的变量](http://sqlfool.com/2009/08/getting-started-with-variables-in-ssis/%20Variables%20in%20SSIS)

# java - 使用公钥验证签名

> ID：11691462
> 
> 赞同：11
> 
> 时间：2012-07-27T15:57:31.787
> 
> 标签：java, public-key, verify

我有一个外部服务，它在某些定义的事件后给我回电，并用它的私钥签署他的请求。

我已经存储了如下所示的公钥：

```
-----BEGIN PUBLIC KEY-----
........................................
-----END PUBLIC KEY----- 
```

所以我的工作是通过验证签名来检查请求的内容是否没有被改变。

这是我的算法：

```
// 1 - reading public key :
Scanner scanner = new Scanner( new File( keyPath ) );

//            encodedPublicKey.toString( );
StringBuilder sb = new StringBuilder( );
while ( scanner.hasNextLine( ) )
{
    sb.append( scanner.nextLine( ) );
    sb.append( '\n' );
}

byte[] encodedPublicKey = sb.toString( ).getBytes( "utf-8" );

// 2 - loading public key in a relevant object :
X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec( publicKeyBytes );

KeyFactory keyFactory = KeyFactory.getInstance( "DSA" );

PublicKey publicKey = keyFactory.generatePublic( publicKeySpec );

// 3 - verifying content with signature and content :
Signature sig = Signature.getInstance( "SHA1withDSA" );
sig.initVerify( publicKey );
sig.update( message.getBytes( ) );
ret = sig.verify( sign.getBytes( ) ); 
```

但是现在我的算法在“PublicKey publicKey = keyFactory.generatePublic(publicKeySpec)”处被这条消息停止：

```
java.security.spec.InvalidKeySpecException: Inappropriate key specification: invalid key format 
```

那么如何以 java api 接受的方式加载我的密钥呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T07:45:25.147

其实我已经找到了解决办法。

问题是以正确的方式加载公钥文件。

我已将 bouncycastle 库添加到我的依赖项中：

```
<dependency>
  <groupId>org.bouncycastle</groupId>
  <artifactId>bcprov-jdk15on</artifactId>
  <version>1.47</version>
</dependency> 
```

它提供了 PemReader 允许读取和加载非认证公钥。

这是我的实用程序类：

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLDecoder;
import java.security.InvalidKeyException;
import java.security.KeyFactory;
import java.security.NoSuchAlgorithmException;
import java.security.PublicKey;
import java.security.Signature;
import java.security.SignatureException;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.X509EncodedKeySpec;

import org.bouncycastle.util.io.pem.PemReader;
import org.castor.util.Base64Decoder;

import fr.paris.lutece.portal.service.util.AppLogService;

/**
 * Classe d'aide à l'interfacage avec le service paybox.
 *
 * Toutes les informations parameterables sont sous la forme paybox.*
 */
public final class PayboxUtil
{

    /** The Constant CHARSET. */
    private static final String CHARSET = "utf-8";

    /** The Constant ENCRYPTION_ALGORITHM. */
    private static final String ENCRYPTION_ALGORITHM = "RSA";

    /** The Constant HASH_ENCRIPTION_ALGORITHM. */
    private static final String HASH_ENCRYPTION_ALGORITHM = "SHA1withRSA";

    /**
     * constructeur privé pour classe statique.
     */
    private PayboxUtil(  )
    {
    }

    /**
     * Controle si une signature est bien celle du message à l'aide de la clé
     * publique de l'emmeteur?.
     *
     * @param message le message
     * @param sign la signature
     * @param keyPath le chemin vers la clé publique.
     * @return true si la signature est bien celle du message avec la clé privé
     *         attendue.
     */
    public static boolean checkSign( String message, String sign, String keyPath )
    {
        boolean ret = false;

        try
        {
            ret = PayboxUtil.verify( message, sign, PayboxUtil.getKey( keyPath ) );
        }
        catch ( final FileNotFoundException e )
        {
            AppLogService.error( e );
        }
        catch ( final IOException e )
        {
            AppLogService.error( e );
        }
        catch ( final NoSuchAlgorithmException e )
        {
            AppLogService.error( e );
        }
        catch ( final InvalidKeySpecException e )
        {
            AppLogService.error( e );
        }
        catch ( final InvalidKeyException e )
        {
            AppLogService.error( e );
        }
        catch ( final SignatureException e )
        {
            AppLogService.error( e );
        }

        return ret;
    }

    /**
     * Récupère la clé publique à partir du chemin passé en paramètre.
     *
     * @param keyPath le chemin vers la clé.
     * @return la clé publique
     * @throws NoSuchAlgorithmException the no such algorithm exception
     * @throws IOException Signals that an I/O exception has occurred.
     * @throws InvalidKeySpecException the invalid key spec exception
     */
    private static PublicKey getKey( String keyPath )
        throws NoSuchAlgorithmException, IOException, InvalidKeySpecException
    {
        final KeyFactory keyFactory = KeyFactory.getInstance( PayboxUtil.ENCRYPTION_ALGORITHM );
        final PemReader reader = new PemReader( new FileReader( keyPath ) );
        final byte[] pubKey = reader.readPemObject(  ).getContent(  );
        final X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec( pubKey );

        return keyFactory.generatePublic( publicKeySpec );
    }

    /**
     * effectue la vérification du message en fonction de la signature et de la
     * clé.
     *
     * @param message le message
     * @param sign la signature
     * @param publicKey la clé publique.
     * @return true, if successful
     * @throws NoSuchAlgorithmException the no such algorithm exception
     * @throws InvalidKeyException the invalid key exception
     * @throws SignatureException the signature exception
     * @throws UnsupportedEncodingException the unsupported encoding exception
     */
    private static boolean verify( String message, String sign, PublicKey publicKey )
        throws NoSuchAlgorithmException, InvalidKeyException, SignatureException, UnsupportedEncodingException
    {
        final Signature sig = Signature.getInstance( PayboxUtil.HASH_ENCRYPTION_ALGORITHM );
        sig.initVerify( publicKey );
        sig.update( message.getBytes( PayboxUtil.CHARSET ) );

        final byte[] bytes = Base64Decoder.decode( URLDecoder.decode( sign, PayboxUtil.CHARSET ) );

        return sig.verify( bytes );
    }
} 
```

您只需将签名内容、签名和密钥路径传递给 checkSign 方法，它就可以完成所有工作。

# gitolite - 连接到 Gitolite 的 Mac 上的 Sourcetree 要求进行身份验证

> ID：11691466
> 
> 赞同：1
> 
> 时间：2012-07-27T15:57:53.310
> 
> 标签：gitolite

我们最近设置了 Gitolite 服务器。一切似乎都很好。我可以毫无问题地连接到它。

已经设置了一个新用户，他在 Mac 上并尝试使用 SourceTree。我能让他连接的唯一方法是让他尝试 ssh 到服务器，然后我输入密码（之后退出）。否则，系统会一直要求输入该服务器的密码。

这是正常行为吗？非系统管理员用户如何访问 gitolite？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:05:11.670

[Gitolite](http://sitaramc.github.com/gitolite/master-toc.html)基于[强制命令](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)，即非交互式会话。
所以：

*   永远不要输入密码（假设这里没有密码保护的私钥）。
    （详见“ [gitolite 如何使用 ssh](http://sitaramc.github.com/gitolite/glssh.html) ”）。
*   任何“非系统管理员”都不应获得对 gitolite 服务器本身的访问权限。

所以他所需要的只是一个存储在`~/.ssh`（确保他的`home`和`.ssh`不是组或世界可写的）、在gitolite 服务器文件中注册`gitolite-admin/keys`和发布的公钥。`.ssh/authorized_keys`

从那里开始，如“ [Sourcetree 和 Gitolite](http://www.borborygmus.net/2011/11/sourcetree-and-gitolite/) ”中所述：

> 如果您正在克隆远程 git 存储库，则需要从 Source path/ URL 字段中跳出以激活克隆按钮。
> 届时将验证该网址。
> 
> 该 url 不需要使用 gitolite 的特殊语法，甚至尊重 ssh conf 文件中的主机条目。所以在我的情况下，一个 url`gitolite:workrepo`就足够了。

# apache - 忽略来自内部重定向的请求

> ID：11691467
> 
> 赞同：0
> 
> 时间：2012-07-27T15:57:55.900
> 
> 标签：apache, mod-rewrite

```
RewriteRule ^resources/.+$ - [L]

RewriteRule .? index.php?t=$0 [QSA,L] 
```

会产生 a `500 - Internal Server Error`，因为它会一次又一次地重复相同的规则，因为内部重定向请求被完全视为第一个。这将导致无限链`index.php?t=index.php&t=index.php&t=index.php&[...infinite more...]&t=test.php`

但在我看来，这并没有好多少：

```
RewriteRule ^resources/.+$ - [L]

RewriteCond %{QUERY_STRING} !t=
RewriteCond %{REQUEST_URI} !^index\.php$
RewriteRule .? index.php?t=$0 [QSA,L] 
```

因为现在用户可以输入`index.php?t=test.php`地址，将传递脚本并获得与给定相同的内容`test.php`。我不喜欢那样。

那么如何在没有重复内部重定向问题的情况下执行第一个呢？
当然，标志*VL* - *Very Last*可以解决问题，但遗憾的是它不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:57:55.900

首先，我们看一下赋予规则的所有参数，这些参数可能表明这是否是一个链式请求。这意味着，我们要么 1）需要在链式请求中更改的变量与更改后的 URI 无关，或者 2）相反，一个与更改后的 URI 相关且未更改的变量（因为我们可以将它与其他*确实*改变了）。

问题是，它们几乎都根据应用的`RewriteRules`.

`IS_SUBREQ`(1) 和`THE_REQUEST`(2) 是唯一有趣的变量，但遗憾的是内部重定向不被视为子请求，因此`IS_SUBREQ`消失了。只有`THE_REQUEST`不改变并包含真实的给定路径，所以我们找到了我们的入口点。

考虑到这一点，这里是烦人的复杂解决方案：

```
RewriteEngine On

# Set SCRIPT_URI and SUBREQ
# MUST be the first statements in the file
 # SCRIPT_URI is the original browser-requested path
 # SUBREQ is "true" if the original browser-requested path is not overriden yet

 RewriteCond %{ENV:REQUEST_PARSED} !true
 RewriteCond %{THE_REQUEST} ^\s*\w+\s+(http://[^\s/]+/|/?)([^\s\?]*)[\s\?$]
 RewriteRule .? - [E=SCRIPT_URI:/%2,C]
 RewriteRule .? - [E=REQUEST_PARSED:true]

 RewriteCond %{ENV:SCRIPT_URI} ^(.*?)/\.($|/.*$)
 RewriteRule .? - [E=SCRIPT_URI:%1%2,N]

 RewriteCond %{ENV:SCRIPT_URI} ^(.*?)/[^/]+/\.\.($|/.*$)
 RewriteRule .? - [E=SCRIPT_URI:%1%3,N]

 RewriteCond %{ENV:SCRIPT_URI} ^(.*?)//\.\.($|/.*$)
 RewriteRule .? - [E=SCRIPT_URI:%1/%2,N]

 RewriteCond %{ENV:SCRIPT_URI}#%{REQUEST_URI} !^/*(.*)#/*\1$
 RewriteRule .? - [E=SUBREQ:true]

# SCRIPT_URI and SUBREQ are set now. Actual content follows:

RewriteCond %{ENV:SUBREQ} !true
RewriteRule ^resources/.+$ - [L]

RewriteCond %{ENV:SUBREQ} !true
RewriteRule .? index.php?t=$0 [QSA,L] 
```

# ruby - Rails 3：未知属性

> ID：11691468
> 
> 赞同：0
> 
> 时间：2012-07-27T15:57:56.423
> 
> 标签：ruby, ruby-on-rails-3, rake, rake-task

我想知道是否有人可以给我一些提示，说明为什么在尝试创建我创建的模型（卡）的实例时出现未知属性错误。这是模型类的精简版本和我收到错误的 rake 任务。

卡类：

```
class Card < ActiveRecord::Base
  has_and_belongs_to_many :some_other_model
  belongs_to :some_other_other_model
  attr_accessible :attr1, :attr2, :attr3, :attr4,...,:card_type,...
end 
```

耙任务：

```
task :import_cards => :environment do
  # connect to database
  conn = Mysql2::Client.new(yadda yadda yadda)

  results = conn.query("SELECT attr1, attr2, attr3, attr4,..., card_type, ... FROM that_table;")

  results.each{|row|; Card.create(:attr1 => row['attr1'], :attr2 => row['attr2'], :attr3 => row['attr3'], :attr4 => row['attr4'],..., :card_type => row['card_type'],...);}

  conn.close()
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:07:17.290

看来我有另一个问题。我的数据库已经过时了。列名已从 type 更改为 card_type。

# amazon-web-services - DynamoDB 对字符串数组的条件检查

> ID：11691480
> 
> 赞同：0
> 
> 时间：2012-07-27T15:58:56.047
> 
> 标签：amazon-web-services, nosql, set, conditional, amazon-dynamodb

我可以检查一个元素的一部分是否存在于字符串数组中，或者检查一个查询中是否存在多个元素？所以：

`'aaa:'`1) 元素是否以数组开头`['aaa:1', 'bab:0', 'aab:1']`

2) 元素是否`'aaa:1' OR 'aaa:0'`存在于数组中`['aaa:1', 'bab:0','aab:1']`

如果是这样，请不要执行 API 操作。

这可能吗？文档不清楚 UPDATE_ITEM 是否如此强大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:20:08.003

简短的回答是：两者都没有

长答案是：

*   第 1 点）永远不可能
*   第 2 点）可以使用**扫描操作的****CONTAINS**过滤器来完成，但是......仅适用于单个匹配项。没有“或”的东西。然而，扫描既*慢*又*昂贵*，因此非常不鼓励。

 ****UPDATE_ITEM 条件只允许完全匹配。****

# c# - EditEnding 事件之前的数据表单验证

> ID：11691481
> 
> 赞同：0
> 
> 时间：2012-07-27T15:59:05.720
> 
> 标签：c#, silverlight, dataform

我将 DataForm 与 ria 域服务一起使用，该服务使用名为 country 的表。由于单击确定后数据表单不会自动将新国家/地区添加到表中，因此我已经在 DataForm 的 EditEnding 事件中编写了代码。

但是为什么在 EditEnding 事件之后验证用户输入呢？

如果我添加一个没有名称的新国家/地区，它应该在输入 EditEnding 之前提出验证错误，但此时没有验证错误。触发事件后，我收到验证错误。

如何使用自动验证使我的代码正常工作？

```
private void CountryDataForm_EditEnding(object sender, DataFormEditEndingEventArgs e)
    {
        if (e.EditAction == DataFormEditAction.Commit)
        {
            if (CountryDataForm.Mode == DataFormMode.AddNew)
            {
                if (!CountryDataForm.ValidationSummary.HasErrors)
                {
                    Country item = CountryDataForm.CurrentItem as Country;
                    item.CountryID = Guid.NewGuid();
                    GridData.SubmitChanges();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:14:38.057

好的，我找到了解决方案。我试图在 EditEnding-Event 中提交更改。这应该发生在 DataForm 的 EditEnded-Event 中。

# c++ - 在 ubuntu 中编译 vowpal-wabbit 以在 windows 7 中使用

> ID：11691484
> 
> 赞同：1
> 
> 时间：2012-07-27T15:59:16.493
> 
> 标签：c++, windows, ubuntu, cygwin, vowpalwabbit

我有一`Windows 7`台笔记本电脑，`Ubuntu 12.04`安装在同一台机器上。

我正在尝试从源代码 ( `VowPal Wabbit`) 编译程序。我尝试使用`Cygwin`但没有运气让它工作。我最终安装`Ubuntu 12.04`以获得获得功能正常的编译器的访问权限。

它在`Ubuntu`一边工作，但我很好奇是否有办法将编译后的文件带到`Windows`那里，因为那是我实际做大部分工作的地方。更具体地说，编译的程序会在`Ubuntu`机器上运行`Windows`吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:05:15.240

你应该看看[MinGW](http://www.mingw.org/)：

> MinGW 是“Minimalist GNU for Windows”的缩写，是原生 Microsoft Windows 应用程序的极简开发环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:25:15.547

我意识到已经快一年了。归功于 Chris Quirk、Nick Nussbaum 和其他人，当前版本的 vowpal wabbit (7.x) 应该可以在 Windows 上构建并正常工作。 [该参考](https://github.com/JohnLangford/vowpal_wabbit/blob/master/README.windows.txt)应提供所有必要的详细信息。

**编辑：2017-07-10：** 我还应该注意：库和基本的文件训练和测试功能已经在 Windows 上运行了一段时间。但是，并非本地 Linux 环境中支持的所有功能都可在 Windows 上使用。特别是，`--daemon`选项、网络相关功能（如生成树（`cluster`目录下））以及目录下的一些实用程序`util`尚未在 Windows 上完全移植和/或测试。`vw`开发人员欢迎来自 Windows 用户的拉取请求。

# java - Java 应用程序连接到复制的 mysql 数据库

> ID：11691494
> 
> 赞同：1
> 
> 时间：2012-07-27T15:59:54.933
> 
> 标签：java, mysql, database-replication

我们有一个连接到 mysql 数据库的 java 应用程序。我们现在将通过添加另一个数据库实例将数据库更改为复制模式。这个想法是提供数据库高可用性。应用程序应该能够切换到备用数据库，以防无法连接到主数据库。实现这一点的一种方法是维护 2 组连接，继续监视两个数据库，如果应用程序无法连接到主数据库，则切换到下一组连接并继续。

我的问题是是否有一种通过 mysql 连接器本身切换连接的透明方式？或者是否有任何实用程序可以位于我的应用程序和 mysql 连接器之间并完成这项工作？

澄清一下，我们计划进行主-主复制。写入和读取都经常发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:25:23.860

是的，Connector/J（MySQL JDBC 驱动程序）提供连接故障转移。

不过，设置起来并非易事。这应该让你开始。

[http://dev.mysql.com/doc/refman/5.5/en/connector-j-usagenotes-j2ee-concepts-load-balancing-failover.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-usagenotes-j2ee-concepts-load-balancing-failover.html)

@Mike Brant 的观点很好。如果您的数据不经常写入/经常读取，那么您最好只让您的应用程序写入主 DBMS，并从从 DBMS 池中读取。对应用程序的写入部分和将读取数据的部分使用不同的连接是一种很好的编程习惯。您可以使用负载平衡和故障转移设置只读连接，同时让写入连接指向主节点。

# iphone - Unicode文本在iPhone中的字符串中时字符串的高度

> ID：11691495
> 
> 赞同：4
> 
> 时间：2012-07-27T15:59:55.680
> 
> 标签：iphone, ios, xcode, unicode

当我尝试使用具有 unicode 文本的此函数时，它会根据字体大小返回错误的高度作为其计算高度，但与没有 unicode 的情况相比，表情符号会变得更大并且占用更多的高度。

> [文本 sizeWithFont:[UIFont systemFontOfSize:12.0] constrainedToSize:CGSizeMake(233.0f, 999.0f) lineBreakMode:UILineBreakModeWordWrap];

可以计算字符串中包含 unicode 的真实高度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T19:35:04.190

看看 CoreText 框架。

您可以尝试以下方法：

```
CTFrameSetterRef framesetter = CTFramesetterCreateWithAttributedString(myAttributedString);
CGSize size = CTFramesetterSuggestFrameSizeWithConstraints(frame setter, CFRangeMake(0, stringLength), NULL, CGSizeMake(maxWidth, maxHeight), NULL); 
```

这应该为您提供正确的尺寸。您当然可以使 maxHeight 任意大，以确保字符串适合最大大小。或者您可以将指向 CFRange 的指针作为最后一个参数传递，它会将其设置为能够适合您传递的最大大小的字符串范围。

希望这对你有用:)

# java - Java Transparency rendering error

> ID：11691496
> 
> 赞同：8
> 
> 时间：2012-07-27T16:00:05.627
> 
> 标签：java, swing, transparency, repaint, paintcomponent

I am currently developing a kiosk style Java program to display weather, time, forecast etc. Here is a shot of what the program *should* look like (screenshot taken before the time updated)

![Image showing required output before the graphical error](../Images/ea13b90e72f6408216b6189e6e7a612f.png)

The various sections are created as JPanels with the `paintComponent()` method overridden. They draw in a gradient header and a semitransparent background. However, when I change the content of one of these panels, the previous content is left behind, rather than being removed. An example is shown below:

As you can see, when the time changed from 11:51 to 11:52, the numbers overlapped, and the background became lighter (because the semitransparent background was redrawn over it)

## The Graphical Error

![Image showing the graphical error](../Images/c3bd25e1c8eb08f43818bda532e6f622.png)

What should I do to prevent this overlap? Ultimately, I would prefer to not have to redraw the entire screen when an individual panel updates it's contents. I would prefer to only redraw that particular section. It would be easy to repaint the background, and then all the components within.

# Update

Several answers involve clearing the area to be drawn. Whether I use `g.clear()` or `AlphaComposite.CLEAR` it erases the background image. this can be seen in the following image. Perhaps if I could copy the background before I clear the area, I could repaint that section of the background, then layer the other images appropriately. Thoughts?

![enter image description here](../Images/2f97a3c1ff2d17fc3e7d2acb7adaf76d.png)

# Update 2

An answer was submitted which shows a complete working example of a timer laid over a transparent panel and a background. This is very useful, however, I am not painting my sub-componenets manually. The time, weather icons and temperatures are all JLabels laid out over the semi-transparent panel. I would prefer to not have to paint the individual components manually.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:27:55.550

类似的问题

[![之前的图像](../Images/e575f6e176e216355d3a406edcb0f5b3.png)](https://i.stack.imgur.com/X8iqb.png)

[在这里](https://stackoverflow.com/questions/2163544/re-paint-on-translucent-frame-panel-component/2166500#2166500)解决

[![之后的图像](../Images/518976dd39fb624b4405abf5f72779e5.png)](https://i.stack.imgur.com/Kj8ds.png)

还要注意，“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`。”—<a href="https://www.oracle.com/technetwork/java/index.html#callbacks" rel="nofollow noreferrer">*在 AWT 中绘画和Swing：绘制方法*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:03:49.210

在进行绘画之前，请先[调用 g.clearRect(0,0,w,h)](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#clearRect%28int,%20int,%20int,%20int%29)。这将删除指定区域中的所有内容，并且您不会在前一帧的顶部进行绘制。

您可能需要应用一些双缓冲技术，因为您的屏幕会因为清晰而轻微闪烁。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T23:33:35.803

我很快就把它放在一起了，没什么特别的......

![在此处输入图像描述](../Images/717caea46f0af046b82f19949cbd106f.png)

整个项目由一个 JFrame、一个 BackgroundImagePane 和 ClockPane 组成

ClockPane 看起来像这样（因为您可以重新创建其余部分；））

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.RoundRectangle2D;
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.swing.Timer;

public class ClockPane extends javax.swing.JPanel {

    private Timer tick;

    protected static final SimpleDateFormat SDF = new SimpleDateFormat("HH:mm.ss");

    public ClockPane() {

        setOpaque(false);

        tick = new Timer(500, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {

                repaint();

            }

        });

        tick.setCoalesce(true);
        tick.setRepeats(true);

        setPreferredSize(new Dimension(100, 100));
        setMinimumSize(new Dimension(100, 100));

    }

    @Override
    public void addNotify() {

        super.addNotify();

        tick.start();

    }

    @Override
    public void removeNotify() {

        tick.stop();

        super.removeNotify();

    }

    @Override
    protected void paintComponent(Graphics grphcs) {

        super.paintComponent(grphcs);

        Graphics2D g2d = (Graphics2D) grphcs;

        int width = getWidth() - 1;
        int height = getHeight() - 1;

        Color background = new Color(192, 192, 192, 128);
        Color border = new Color(128, 128, 128);
        RoundRectangle2D backing = new RoundRectangle2D.Float(0, 0, width, height, 20, 20);

        g2d.setPaint(background);
        g2d.fill(backing);
        g2d.setPaint(border);
        g2d.draw(backing);

        String text = SDF.format(new Date());
        FontMetrics fm = g2d.getFontMetrics();
        g2d.setPaint(Color.BLACK);

        int x = (width - fm.stringWidth(text)) / 2;
        int y = ((height - fm.getHeight()) / 2) + fm.getAscent();

        g2d.drawString(text, x, y);

    }

} 
```

有了这个，时钟每半秒左右更新一次，我对重绘没有任何问题

我能想到的唯一有意义的是`setOpaque(false);`

**更新**

这个例子完全是用标签和面板完成的（背景窗格是一个自定义的绘画工作，日期标签也有它的背景，但除此之外）

![正常组件](../Images/0d7827f2e1723598350b0d17665132e9.png)

现在，我把我的一起黑了，所以它不如你的好，但话又说回来，我没有得到报酬；）

```
import core.ui.UIUtilities;
import core.ui.WindowUtilities;
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.swing.Timer;
import javax.swing.UIManager;

public class MainFrame extends javax.swing.JFrame {

    /**
     * Creates new form MainFrame
     */
    public MainFrame() {

        setUndecorated(true);
        WindowUtilities.setOpaque(this, false);

        initComponents();

        Timer timer = new Timer(500, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                lblTime.setText(new SimpleDateFormat("hh:MM:ss").format(new Date()));

            }
        });

        timer.setRepeats(true);
        timer.setCoalesce(true);
        timer.start();

        DateLabel label = new DateLabel();
        label.init();

        NewBackgroundPane backgroundPane = new NewBackgroundPane();
        backgroundPane.setLayout(new BorderLayout());
        backgroundPane.add(label, BorderLayout.NORTH);
        backgroundPane.add(pnlMain);

        add(backgroundPane, BorderLayout.CENTER);

        pack();

        setLocation(UIUtilities.centerOfDefaultScreen(this));

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        pnlMain = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        lblTime = new javax.swing.JLabel();
        lblExtTime = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jPanel4 = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jPanel6 = new javax.swing.JPanel();
        jLabel15 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        jLabel17 = new javax.swing.JLabel();
        jLabel18 = new javax.swing.JLabel();
        jPanel7 = new javax.swing.JPanel();
        jLabel19 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        jLabel21 = new javax.swing.JLabel();
        jLabel22 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        pnlMain.setOpaque(false);
        pnlMain.setLayout(new java.awt.GridBagLayout());

        jPanel2.setOpaque(false);
        jPanel2.setLayout(new java.awt.GridBagLayout());

        lblTime.setFont(lblTime.getFont().deriveFont(lblTime.getFont().getStyle() | java.awt.Font.BOLD, lblTime.getFont().getSize()+18));
        lblTime.setForeground(new java.awt.Color(255, 255, 255));
        lblTime.setText("jLabel1");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        jPanel2.add(lblTime, gridBagConstraints);

        lblExtTime.setFont(lblExtTime.getFont().deriveFont(lblExtTime.getFont().getSize()+6f));
        lblExtTime.setForeground(new java.awt.Color(255, 255, 255));
        lblExtTime.setText("AM EDT");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        jPanel2.add(lblExtTime, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        pnlMain.add(jPanel2, gridBagConstraints);

        jPanel3.setOpaque(false);
        jPanel3.setLayout(new java.awt.GridBagLayout());

        jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/transparentUpdate/Overcast.png"))); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridheight = 2;
        jPanel3.add(jLabel3, gridBagConstraints);

        jLabel4.setFont(jLabel4.getFont().deriveFont(jLabel4.getFont().getSize()+6f));
        jLabel4.setForeground(new java.awt.Color(255, 255, 255));
        jLabel4.setText("<html>Currenctly<br>Overast</html>");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.FIRST_LINE_START;
        jPanel3.add(jLabel4, gridBagConstraints);

        jLabel5.setFont(jLabel5.getFont().deriveFont(jLabel5.getFont().getSize()+12f));
        jLabel5.setForeground(new java.awt.Color(255, 255, 255));
        jLabel5.setText("69");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.LAST_LINE_START;
        jPanel3.add(jLabel5, gridBagConstraints);

        jLabel6.setForeground(new java.awt.Color(255, 255, 255));
        jLabel6.setText("/65");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.LAST_LINE_START;
        jPanel3.add(jLabel6, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        pnlMain.add(jPanel3, gridBagConstraints);

        jPanel4.setOpaque(false);
        jPanel4.setLayout(new java.awt.GridBagLayout());

        jPanel5.setOpaque(false);
        jPanel5.setLayout(new java.awt.GridBagLayout());

        jLabel11.setFont(jLabel11.getFont().deriveFont(jLabel11.getFont().getSize()+4f));
        jLabel11.setForeground(new java.awt.Color(255, 255, 255));
        jLabel11.setText("Today");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        jPanel5.add(jLabel11, gridBagConstraints);

        jLabel12.setForeground(new java.awt.Color(255, 255, 255));
        jLabel12.setIcon(new javax.swing.ImageIcon(getClass().getResource("/transparentUpdate/SmallOvercast.png"))); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridheight = 2;
        jPanel5.add(jLabel12, gridBagConstraints);

        jLabel13.setFont(jLabel13.getFont().deriveFont(jLabel13.getFont().getSize()+4f));
        jLabel13.setForeground(new java.awt.Color(255, 255, 255));
        jLabel13.setText("83");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        jPanel5.add(jLabel13, gridBagConstraints);

        jLabel14.setForeground(new java.awt.Color(255, 255, 255));
        jLabel14.setText("65");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        jPanel5.add(jLabel14, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        gridBagConstraints.insets = new java.awt.Insets(2, 4, 2, 4);
        jPanel4.add(jPanel5, gridBagConstraints);

        jPanel6.setOpaque(false);
        jPanel6.setLayout(new java.awt.GridBagLayout());

        jLabel15.setFont(jLabel15.getFont().deriveFont(jLabel15.getFont().getSize()+4f));
        jLabel15.setForeground(new java.awt.Color(255, 255, 255));
        jLabel15.setText("Sunday");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        jPanel6.add(jLabel15, gridBagConstraints);

        jLabel16.setForeground(new java.awt.Color(255, 255, 255));
        jLabel16.setIcon(new javax.swing.ImageIcon(getClass().getResource("/transparentUpdate/Sunny.png"))); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridheight = 2;
        jPanel6.add(jLabel16, gridBagConstraints);

        jLabel17.setFont(jLabel17.getFont().deriveFont(jLabel17.getFont().getSize()+4f));
        jLabel17.setForeground(new java.awt.Color(255, 255, 255));
        jLabel17.setText("82");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        jPanel6.add(jLabel17, gridBagConstraints);

        jLabel18.setForeground(new java.awt.Color(255, 255, 255));
        jLabel18.setText("64");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        jPanel6.add(jLabel18, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        gridBagConstraints.insets = new java.awt.Insets(2, 4, 2, 4);
        jPanel4.add(jPanel6, gridBagConstraints);

        jPanel7.setOpaque(false);
        jPanel7.setLayout(new java.awt.GridBagLayout());

        jLabel19.setFont(jLabel19.getFont().deriveFont(jLabel19.getFont().getSize()+4f));
        jLabel19.setForeground(new java.awt.Color(255, 255, 255));
        jLabel19.setText("Monday");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        jPanel7.add(jLabel19, gridBagConstraints);

        jLabel20.setForeground(new java.awt.Color(255, 255, 255));
        jLabel20.setIcon(new javax.swing.ImageIcon(getClass().getResource("/transparentUpdate/Cloudy.png"))); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridheight = 2;
        jPanel7.add(jLabel20, gridBagConstraints);

        jLabel21.setFont(jLabel21.getFont().deriveFont(jLabel21.getFont().getSize()+4f));
        jLabel21.setForeground(new java.awt.Color(255, 255, 255));
        jLabel21.setText("83");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        jPanel7.add(jLabel21, gridBagConstraints);

        jLabel22.setForeground(new java.awt.Color(255, 255, 255));
        jLabel22.setText("84");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        jPanel7.add(jLabel22, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
        gridBagConstraints.insets = new java.awt.Insets(2, 4, 2, 4);
        jPanel4.add(jPanel7, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        pnlMain.add(jPanel4, gridBagConstraints);

        getContentPane().add(pnlMain, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {

            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new MainFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JLabel lblExtTime;
    private javax.swing.JLabel lblTime;
    private javax.swing.JPanel pnlMain;
    // End of variables declaration
} 
```

只是为了让生活更轻松，背景窗格

```
import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;

public class NewBackgroundPane extends javax.swing.JPanel {

    /**
     * Creates new form NewBackgroundPane
     */
    public NewBackgroundPane() {
        initComponents();
    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g.create();

        int width = getWidth() - 1;
        int height = getHeight() - 1;

        g2d.setColor(Color.LIGHT_GRAY);
        g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));
        g2d.fillRoundRect(0, 0, width, height, 20, 20);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        setOpaque(false);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );
    }// </editor-fold>
    // Variables declaration - do not modify
    // End of variables declaration
} 
```

如果你仍然无法让它工作，我能想到的唯一其他问题可能与全屏独占模式有关，我还没有测试过：P

# xml - xml 到 xml 复制并替换 [field]

> ID：11691498
> 
> 赞同：0
> 
> 时间：2012-07-27T16:00:09.730
> 
> 标签：xml, xslt, copy

嗨，伙计们，我和他的人有点麻烦我想做一个完整的 xml 副本并替换数据中的一个字段这是我一直在使用的代码，但它只转换第一个字段而不复制xml im 使用带有默认 xsl 转换的 eclipse 来完成这项工作，因为它似乎是我可以正常工作的唯一处理器，这里是 xsl 模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
    <xsl:variable name="replacedURL">
        <xsl:call-template name="string-replace-all">
            <xsl:with-param name="text" select="/hotels/hotel/hotel_link/text()"/>
            <xsl:with-param name="replace" select="'[[PARTNERID]]'"/>
            <xsl:with-param name="by" select="'13252'"/>
        </xsl:call-template>
    </xsl:variable>
    <xsl:value-of select="$replacedURL"/>
</xsl:template>
<xsl:template name="string-replace-all">
    <xsl:param name="text"/>
    <xsl:param name="replace"/>
    <xsl:param name="by"/>
    <xsl:choose>
        <xsl:when test="contains($text, $replace)">
            <xsl:value-of select="substring-before($text,$replace)"/>
            <xsl:value-of select="$by"/>
            <xsl:call-template name="string-replace-all">
                <xsl:with-param name="text" select="substring-after($text,$replace)"/>
                <xsl:with-param name="replace" select="$replace"/>
                <xsl:with-param name="by" select="$by"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

然后这是 xml 的示例

```
<hotel>
<hotel_ref>235128</hotel_ref>
<hotel_name>Afghanistan Dolores test - non bookable</hotel_name>
<hotel_star>2</hotel_star>
<hotel_address>afghanistan test</hotel_address>
<hotel_city>afghanistan</hotel_city>
<hotel_pcode /><hotel_county />
<hotel_country>Afghanistan</hotel_country>
<hotel_description>hotel description text</hotel_description>
 <alternate_description>hotel description text</alternate_description>
 <hotel_directions>kjlaklka</hotel_directions>
 <alternate_directions>kjlaklka</alternate_directions>
<hotel_link> http://www.website.com/en/p[[PARTNERID]]/hotel-reservations/235128_afghanistan-dolores-test-non-bookable-afghanistan.aspx</hotel_link>
<customerrating>0</customerrating>
<PricesFrom>10.0000</PricesFrom>
<MaxPrice>800.00</MaxPrice>
<CurrencyCode>GBP</CurrencyCode>
<images />
<geo_code><lat>34.53824</lat><long>69.18640</long></geo_code>
<hotel_facilities />
<checkin_time>12/07/2011 14:00:00</checkin_time>
<checkout_time>12/07/2011 11:00:00</checkout_time>
 <cancellationpolicy>2 days prior to stay</cancellationpolicy>
<cancellationtext /><accommodation_type /><hotel_appeals />
<hotel_star_accreditor />
<hotel_total_rooms>45</hotel_total_rooms>
<hotel_credit_cards>
<CreditCard><credit_card_id>4</credit_card_id><credit_card_name>American Express</credit_card_name></CreditCard><CreditCard><credit_card_id>5</credit_card_id><credit_card_name>Switch/Maestro</credit_card_name></CreditCard><CreditCard><credit_card_id>1</credit_card_id><credit_card_name>Visa/Delta</credit_card_name></CreditCard><CreditCard><credit_card_id>2</credit_card_id> <credit_card_name>Mastercard</credit_card_name></CreditCard></hotel_credit_cards>  
<hotel_city_taxes><CityTax><Type /><Value /><OptedIn /><IsCityTaxArea /></CityTax>
</hotel_city_taxes> 
</hotel> 
```

整个文件大约 500 兆字节我需要一个特殊的处理器来做到这一点，还是内置在 xsl 转换中的 eclipse 可以完成这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:10:35.387

复制所有内容而只修改一小部分始终是身份模板的情况：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- identity template: copy everything 1:1 -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <!-- ...except for the text in <hotel_link> elements: -->
  <xsl:template match="hotel_link/text()">
    <xsl:call-template name="string-replace-all">
      <xsl:with-param name="text"    select="."/>
      <xsl:with-param name="replace" select="'[[PARTNERID]]'"/>
      <xsl:with-param name="by"      select="'13252'"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="string-replace-all">
    <xsl:param name="text"/>
    <xsl:param name="replace"/>
    <xsl:param name="by"/>
    <xsl:choose>
      <xsl:when test="contains($text, $replace)">
        <xsl:value-of select="substring-before($text,$replace)"/>
        <xsl:value-of select="$by"/>
        <xsl:call-template name="string-replace-all">
          <xsl:with-param name="text" select="substring-after($text,$replace)"/>
          <xsl:with-param name="replace" select="$replace"/>
          <xsl:with-param name="by" select="$by"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

^(（`string-replace-all`模板[取自这个答案](https://stackoverflow.com/a/1069157/18771)。）)

话虽如此，如果您的输入文件为 500 MB，则不应使用 XSLT 转换，因为这会在开始之前在内存中构建输入的完整 DOM。DOM 总是比它所基于的 XML 文档大很多，所以在这里你可能会遇到内存问题。当然，无论如何你都可以尝试。

您应该改为编写一个小型 SAX 解析器。这将更快，内存效率更高。

# java - Eclipse 3.7 Unresolved Gradle Dependency errors

> ID：11691499
> 
> 赞同：0
> 
> 时间：2012-07-27T16:00:20.587
> 
> 标签：java, javafx-2, gradle, eclipse-indigo, build-dependencies

Eclipse info.,

*   Version: Indigo Service Release 2
*   Build id: 20120216-1857

And here's a [link](http://i.imgur.com/YzbuJ.png) to the resulting "Problems" view tab. And I've tried refreshing the Gradle Dependencies, but it's not resolving the errors. And I have JavaFX 2.1 installed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:10:59.707

我解决了“未解决的 gradle 依赖”错误。

## 问题？

`JAVAFX_HOME`缺少环境变量。

## 解决方案

1.  使用路径添加`JAVAFX_HOME`环境变量`%YOUR_INSTALL_PATH%\JavaFX 2.1 Runtime`。
2.  重启机器
3.  在 IDE 中打开项目（例如 Eclipse）
4.  刷新 gradle 依赖项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:11:28.303

该错误意味着无法解析构建脚本中声明的依赖项。换句话说，在构建脚本中声明的任何存储库中都找不到依赖项。`gradle dependencies`应该给出类似的错误。

# wpf - Unable to find resource dictionary file at runtime

> ID：11691503
> 
> 赞同：4
> 
> 时间：2012-07-27T16:00:39.793
> 
> 标签：wpf, themes

I am developing a user control and use it inside an ElementHost. I define the resource dictionary as follows:

```
<UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Themes/Classic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary> 
    </UserControl.Resources> 
```

In my VS explorer, I have this

```
Project (the user control library)
  |_ Themes
       |__ Generic.xaml  (Build Action = Page)
       |__ Classic.xaml  (Build Action = Page) 
```

There's no compilation error and the VS designer seems to pick up the resources defined in Classic.xaml

However, it crashes at runtime with the following exception:

System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Windows.Markup.XamlParseException: 'Set property 'System.Windows.ResourceDictionary.Source' threw an exception.' Line number '16' and line position '18'. ---> System.IO.IOException: Cannot locate resource 'themes/classic.xaml'.

What's going on?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T14:05:30.100

我最终不得不使用包含程序集名称的语法......不要问我为什么

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/assemblyname;component/Themes/Classic.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary> 
</UserControl.Resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:59:37.660

嗨，试试不带斜线，当构建操作是内容或其他时，我们使用斜线，但对于 ResourceDictionary，构建操作是页面。

```
 <ResourceDictionary Source="Themes/Classic.xaml"/>
 <ResourceDictionary Source="Themes/Generic.xaml"/> 
```

我希望这将有所帮助。您必须为这些资源字典设置一些其他名称，因为在同一项目的主题文件夹中 Generic.xaml 被用作默认值，并且无需合并即可访问其资源。

# java - 如何计算为在 Java 中找到答案而完成的谷歌搜索次数？

> ID：11691510
> 
> 赞同：1
> 
> 时间：2012-07-27T16:01:12.723
> 
> 标签：java, google-search

所以我正在制作这个应用程序，其中用户必须使用谷歌搜索找到特定问题的答案，获胜者是在最少搜索次数中找到答案的人。我尝试通过打开一个单独的浏览器 google.com 窗口在 java 中制作这个应用程序。但是这个应用程序有很多错误，例如当用户在新标签/窗口中打开链接或打开新的 google.com 页面或使用任何其他搜索引擎来查找答案时会发生什么。所有这些搜索都不会计入我的应用程序。那么我该如何继续制作这个应用程序呢？

# apache-flex - 如何在 Flex 移动项目的段落中插入 LinkElement？

> ID：11691511
> 
> 赞同：0
> 
> 时间：2012-07-27T16:01:22.647
> 
> 标签：apache-flex, air, adobe, flash-builder

大家好。
我正在开发一个关于 Flex 的移动项目。
一旦我从互联网上得到一个段落，我需要从该段落中识别一个特定的字符串（可能不会只出现一次），并使其可点击以触发 flex 项目中的其他功能。

我知道“LinkElement”有帮助，比如这个网址的内容： [http](http://bbs.9ria.com/forum.php?mod=viewthread&tid=42640) ://bbs.9ria.com/forum.php?mod=viewthread&tid=42640 其中的代码就像

```
var p:ParagraphElement=new ParagraphElement();
var tf:TextFlow=new TextFlow();
var nameLink:LinkElement=new LinkElement();
var nameSpan:SpanElement=new SpanElement();

nameSpan.text="LINK_TEXT";
nameLink.addChild(nameSpan);
p.addChild(nameLink);
//////////////////////////////////////////////////////
tf.addChild(p);
rt.textFlow=tf;
nameLink.addEventListener(FlowElementMouseEvent.CLICK, link_click_handler); 
```

```
<s:RichEditableText editable="false" selectable="false" id="rt/> 
```

但是只有一个简单的链接文本，但我希望在同一行中有其他普通文本（没有链接）。
我想要的效果可以通过html轻松实现，比如：

```
<p>
  unlinked_text1
  <a>linked_text</a>
  unlinked_text2
</p> 
```

我试过简单地在“///////////////”的地方添加另一个未链接的孩子，
但它没有用。
有什么解决办法吗？
这似乎并不难，但我就是做不到。

提前感谢您的任何解决方案，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:26:12.807

对象可以具有`ParagraphElement`以下类型的子对象：`SpanElement`、`LinkElement`、`InlineGraphicElement`和`TCYElement`。

那么为什么不在`SpanElements`包含正常（非链接）文本的段落中添加额外内容：

```
var regularText:SpanElement = new SpanElement();
regularText.text = "this is some regular text";
paragraphElement.addChild(regularText); 
```

如果您已经尝试过，请显示您的代码，以便我们进一步帮助您。

# c++ - 我看到的所有基于 std::move() 的 std::swap() 实现都有问题吗？

> ID：11691512
> 
> 赞同：3
> 
> 时间：2012-07-27T16:01:24.047
> 
> 标签：c++, c++11, swap, move-semantics, move-constructor

> **可能重复：**
> [我可以对移出的对象做什么？](https://stackoverflow.com/questions/7027523/what-can-i-do-with-a-moved-from-object)

例如，请参阅[此代码](http://thbecker.net/articles/rvalue_references/section_04.html)：

```
template<class T> 
void swap(T& a, T& b) 
{ 
    T tmp(std::move(a));
    a = std::move(b); 
    b = std::move(tmp);
} 
```

只是我，还是这里有错误？如果你`move` `a`进入`tmp`，那么不就`a`失效了吗？

即移动分配不应该`a`是`b`一个带有放置的移动构造函数调用`new`吗？
如果不是，那么移动构造函数和移动赋值运算符有什么区别？

```
template<class T>
void swap(T& a, T& b)
{
    T tmp(std::move(a));
    new(&a) T(std::move(b));
    new(&b) T(std::move(tmp));
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T16:11:12.510

当您将数据移出对象时，预期的语义是被移出的对象最终处于*未指定但有效*的状态。这意味着您无法预测对象将处于什么状态，除非它将是一个格式良好的对象。这与“这个对象已经死了并且消失了”不太一样。将数据移出对象并不会结束对象的生命周期——它只是将其状态更改为未指定的状态——因此为该对象分配一个新值是完全安全的。

因此，交换函数的初始版本是安全的。从 a 移动数据后，该对象拥有一些未指定的“安全但不可预测”的值。然后，在将 b 的值移动分配给它时，会覆盖该值。

第二个版本是不安全的，因为在您尝试在它之上构造一个新对象之前， a 的生命周期还没有结束。这会导致未定义的行为。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T16:03:43.880

`a`仍然有效。但是里面的数据`a`将不再可靠。当您移动其资源时，您并没有解除分配`a`，因此将新资源移动到`a`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T16:31:08.580

移动不会使对象无效。相反，它总体上仍处于有效但不确定的状态。特定类别有额外保证；例如，`std::unique_ptr`保证它在被移出后将为空。

保留一个有效对象尤其意味着分配给该对象是非常好的，这就是原始代码所做的。

您自己提出的解决方案被严重破坏：当您在旧对象之上放置构建新对象时，旧对象的生命周期结束。但是，如果类的析构函数有效果，那么省略调用析构函数是未定义的行为。

*此外，如果您确实首先正确调用了析构函数，然后在构造函数*中遇到异常，那么您将遇到麻烦，因为您现在没有需要在范围退出时销毁的有效对象。这是我关于这个主题的一个[相关问题。](https://stackoverflow.com/questions/8829548/can-i-get-a-fresh-start-in-c-without-failing-again)

# javascript - 可以在流星应用程序中使用 nodejs 包吗？

> ID：11691513
> 
> 赞同：14
> 
> 时间：2012-07-27T16:01:28.870
> 
> 标签：javascript, node.js, meteor

是否可以在服务器端的流星应用程序中使用 nodejs 包？这样做会很棒，因为 nodejs 有大量的包。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-27T16:30:59.033

对的，这是可能的。您可以在 Meteor 中使用**npm**模块，因为它基于 Node.js。

这段代码对我很有效，例如：

```
var fs = __meteor_bootstrap__.require('fs'); 
```

**更新：在 Meteor 应用程序中安装 npm 模块**

1.  在您的终端中，将路径更改为您的 Meteor 应用程序目录。
2.  `> cd .meteor/local/build/server`
3.  像这样安装一个 npm 模块`> npm install module_name`。

* * *

**编辑：**对于任何访问这篇文章的人来说，它已经过时了。从 Meteor 0.6.4 开始，您使用`Npm.require`而不是`__meteor_bootstrap__.require`：

```
var fs = Npm.require('fs'); 
```

此外，如果您不使用标准节点包，而是使用来自 npm 存储库的一个，最好创建一个依赖项，以便在您每次创建项目的新实例时自动安装它。为此，请`/packages/someName/package.js`使用以下行创建一个文件：

```
Npm.depends({'packageName': 'packageVersion'}); 
```

# php - 类返回对象混淆

> ID：11691520
> 
> 赞同：0
> 
> 时间：2012-07-27T16:02:00.293
> 
> 标签：php

我被要求创建一个做一些事情的类，然后返回一个具有只读属性的对象。现在我已经创建了这个类，我已经让一切工作 100%，但是当他们说我很困惑'返回具有只读属性的对象'。

这是我的 php 文件的大纲，其中包含该类和一些调用它的额外行等：

```
class Book(){
 protected $self = array();
 function __construct{
  //do processing and build the array
 }

 function getAttributes(){
  return $this->self; //return the protected array (for reading)
 }
}

$book = new Book();

print_r($book->getAttributes()); 
```

我怎样才能返回一个对象或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:05:48.663

您可能正在寻找关键字`final`。Final 意味着对象/方法不能被覆盖。

受保护意味着对象/方法只能由它所属的类访问。

由于`self`是保留关键字，因此您需要更改它以及您的声明。重命名`$self`为`$this->self`和`$data``$this->data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:08:54.817

就像是：

```
Class Book {
    protected $attribute;
    protected $another_attribute;

    public function get_attribute(){
        return $this->attribute;
    }

    public function get_another_attribute() {
        return $this->another_attribute;
    }

    public method get_this_book() {
        return $this;
    }
} 
```

现在这是一个愚蠢的例子，因为 Book->get_this_book() 会返回自己。但这应该让您了解如何在受保护的属性上设置 getter，以便它们是只读的。以及如何 reutrn 一个对象（在这种情况下它返回自己）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:04:34.613

`self`是**PHP 的保留字**。你必须重命名你的变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T16:05:16.087

他们指的是一个具有`private`or`protected`属性的对象，只能由`setters`/访问`getters`。如果您只定义方法，则该属性将是只读的`getter`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T16:11:22.523

只读属性意味着您可以访问它们但不能写入它们

```
class PropertyInaccessible {
  //put your code here
  protected $_data = array();

  public function __get($name) {
    if(isset ($this->_data[$name]))
      return $this->_data[$name];
  }

  public function __set($name, $value) {
     throw new Exception('Can not set property directly');
  }

  public function set($name, $value) {
     $this->_data[$name] = $value;
  }
} 
```

# php - 如何从子域调用ajax请求

> ID：11691523
> 
> 赞同：0
> 
> 时间：2012-07-27T16:02:02.733
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

目前我正在尝试拨打电话`site.com/ajax/countPM`，`jack.site.com`但请求的状态已**取消**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:08:09.927

不幸的是，尽管由于浏览器政策，您在 site.com 上向 jack.site.com 进行了调用，但它落入了“相同域策略”的灰色阴影中，浏览器本质上将这两个域视为不同的域，并且由于该限制，停止了要求。实际上我不确定这只是浏览器的事情，甚至可能处于更高的水平。但底线是，允许 javascript 能够跨域甚至子域进行通信是一个安全风险，因为某些托管概念是子域，其中每个子域相互独立。

这是一个安全风险，因为它真的很容易将东西注入一个伪装成网站的毫无戒心的网站。

无论如何，更简单的解决方法之一是使用某种形式的服务器端脚本。在我的 PHP 案例中，您将使用 cURL 或 Soap 来获取远程域内容的内容，在这种情况下，我猜是 JSON 或 XML 对象，然后从那里将其推送到您的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:15:08.563

（来自 jQuery 的关于 AJAX 调用 的[附加说明部分）](http://api.jquery.com/jQuery.ajax/)*由于浏览器安全限制，大多数“Ajax”请求都受制于同源策略；请求无法从不同的域、子域或协议成功检索数据。*

话虽如此，您确实可以使用 2 个选项来规避跨域 AJAX 策略：

*   如果您正在处理 JSON 数据，您可能会考虑尝试[JSONP](http://api.jquery.com/jQuery.getJSON/) - 这是专门为处理通过类似 AJAX 的调用传递的跨域数据而创建的。
*   创建一个服务器端脚本以充当 AJAX 所在域 (jack.site.com) 的中介或传递，它可以代表您的 AJAX 脚本服务器端进行调用。

如果您需要更多说明，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:15:06.413

这可能对您有用（添加到 jack.site.com）：

```
document.domain = "site.com"; 
```

不确定这一点，但它适用于某些事情。

# javascript - 创建不编号的 d3.js 轴

> ID：11691525
> 
> 赞同：19
> 
> 时间：2012-07-27T16:02:12.950
> 
> 标签：javascript, svg, d3.js, customization

有没有办法在没有任何编号的情况下创建 d3.js 轴？刻度线还可以，但根本没有数字。目前我正在使用下面的代码创建我的 d3.js 轴。提前致谢。

```
 // create Axis
  svg.selectAll("axis")
      .data(d3.range(angle.domain()[1]))
    .enter().append("g")
      .attr("class", "axis")
      .attr("transform", function(d) { return "rotate(" + angle(d) * 180 / Math.PI + ")"; })
    .call(d3.svg.axis()
      .scale(radius.copy().range([0,0]))
      .ticks(1)
      .orient("left"))
    .append("text")
    .style("color", "white") 
      .attr("y", 
        function (d) {
          if (window.innerWidth < 455){
            console.log("innerWidth less than 455: ",window.innerWidth);
            return -(0);
          }
          else{
            console.log("innerWidth greater than 455: ",window.innerWidth);
            return -(0);
          }
        })
      .attr("dy", "0em"); 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-27T16:43:17.977

隐藏刻度标签的最简单方法是通过 CSS：

```
.axis text { display: none; } 
```

或者，您可以使用空字符串作为刻度格式：

```
axis.tickFormat(""); 
```

或者，您可以在创建轴后使用后选择删除文本元素：

```
selection.call(axis).selectAll("text").remove(); 
```

当然，我更喜欢 CSS，因为它是最具声明性的。这里的例子：

*   [http://bl.ocks.org/3048740](http://bl.ocks.org/3048740)

# java - Java 优先队列

> ID：11691526
> 
> 赞同：1
> 
> 时间：2012-07-27T16:02:29.010
> 
> 标签：java, priority-queue

我正在尝试实现 PriorityQueue。这个 PriorityQueue 将保存 Task 类的实例。Task 的这些实例应该以这样一种方式排列，即具有更高“优先级”的实例位于队列的头部。简而言之，实例应该按优先级降序排列。

```
 private static Queue<Task> testQ = new PriorityQueue<Task>(11, new TaskQueueComparator());

    /*** Comparator ***/        
    public class TaskQueueComparator implements Comparator<Task> {

    public int compare(Task task1, Task task2) {
        return task2.priority - task1.priority;
        }        
    }

    /**** Task definition **/       
    public class Task {
        public int priority;
        }

    /**** Code in main() ****/

    Task pe11 = new Task();
    pe11.priority = 3;
    testQ.add(pe11);

    pe11 = new Task();
    pe11.priority = 1;
    testQ.add(pe11);

    pe11 = new Task();
    pe11.priority = 2;
    testQ.add(pe11);

    void displayQueue() {

    int size = testQ.size();

    for (int k = 0; k < size; k++)
    {
        Task p = testQ.poll();
        System.out.format("Task Priority %d \n", p.priority); // The result I am getting is  3 1 2.. I was expecting 3 2 1
    } 
```

如评论中所示，这输出 3,1,2 而不是我期望的 3,2,1。有人可以让我知道我在这里犯了什么错误吗？每次我从/到队列中删除或添加任务时，队列应按优先级降序排列任务。

让我知道。

谢谢乔什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:25:00.890

仅供参考，PriorityQueue 仅在您 poll() 队列时按优先级顺序返回元素。很久以前，当我厌倦了迭代它时，我很难找到这个。此外，它仅在插入时执行比较。因此，如果您在队列中的优先级发生变化，您将获得非常奇怪的行为。

通过将您的代码更改为以下内容：

```
void displayQueue() {
    while (!testQ.isEmpty())
    {   
    Task p = testQ.poll(); // poll, you want to remove the head
    System.out.format("Task Priority %d \n", p.priority);
    }
} 
```

我能够得到：

任务优先级 3

任务优先级 2

任务优先级 1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:15:21.320

起初我认为你的比较器可能没有用“ProcessElements”做正确的事情，但看起来这是一个错字。

这将为我返回“3 3 3”，原样..

您的意思是 .poll() 而不是 peek()？

# c# - 无法使用 Xpath C# 从 FQL 获取内部文本

> ID：11691527
> 
> 赞同：0
> 
> 时间：2012-07-27T16:02:31.333
> 
> 标签：c#, xml, facebook, xpath, facebook-fql

我正在尝试从名为 sharecount 的 XML 标记中获取内部文本，我需要通过 normalized_url 标记来获取它，如下所示：

```
 string ShareCount;
    string Url = "'" + "http://www.example.com/Article.aspx?id=" + GuideID + "'";
    XmlNode Node;
    try
    {
        //return Share count (using Xpath). 
        XmlDoc.SelectSingleNode("fql_query_response/link_stat[normalized_url=" + Url + "]/share_count");
        ShareCount = XmlDoc.InnerText;
        int.TryParse(ShareCount, out Value); //Turn string to int.
        return Value;
    }
    catch
    {
        return 0;
    } 
```

这是XML：

```
<fql_query_response xmlns="http://api.facebook.com/1.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" list="true">
<link_stat>
<url>http://www.example.com/Article.aspx?id=1909</url>
<normalized_url>http://www.example.com/Article.aspx?id=1909</normalized_url>
<share_count>11</share_count>
<like_count>3</like_count>
<comment_count>0</comment_count>
<total_count>14</total_count>
<commentsbox_count>8</commentsbox_count>
<comments_fbid>10150846665210566</comments_fbid>
<click_count>0</click_count>
</link_stat>
</fql_query_response>
<link_stat>
<url>http://www.example.com/Article.aspx?id=1989</url>
<normalized_url>http://www.example.com/Article.aspx?id=1989</normalized_url>
<share_count>11</share_count>
<like_count>3</like_count>
<comment_count>0</comment_count>
<total_count>14</total_count>
<commentsbox_count>8</commentsbox_count>
<comments_fbid>10150846665210566</comments_fbid>
<click_count>0</click_count>
</link_stat>
</fql_query_response> 
```

问题是我得到了返回值：“www.example.com/Article.aspx?id=1132http://www.example.com/Article.aspx?id=190900000101502138970422760”我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:07:58.510

问题是您正在选择单个节点但从根元素获取内容。最重要的是，您有一个根命名空间，因此需要使用 NameSpaceManger 进行搜索。试试这个示例：

```
 string GuideID = "1989";
        string Url = "'" + "http://www.example.com/Article.aspx?id=" + GuideID + "'";

        var XmlDoc = new XmlDocument();

        XmlDoc.Load(new FileStream("XMLFile1.xml",FileMode.Open,FileAccess.Read));
        var nsm = new XmlNamespaceManager(XmlDoc.NameTable);
        nsm.AddNamespace("s", "http://api.facebook.com/1.0/");

        var node = XmlDoc.SelectSingleNode("s:fql_query_response/s:link_stat[s:normalized_url=" + Url + "]/s:share_count", nsm);
        var ShareCount = node.InnerText; 
```

这是具有相同命名空间管理器和 XPathSelector 的 LINQ 方式。

```
XDocument xdoc = XDocument.Load(new FileStream("XMLFile1.xml", FileMode.Open, FileAccess.Read));
        var lnode = xdoc.XPathSelectElements("s:fql_query_response/s:link_stat[s:normalized_url=" + Url + "]/s:share_count",nsm).First();
        var ret = lnode.Value; 
```

# iphone - 使用 Cocos2d 开发 iPhone 游戏：实体被击中时如何产生炫酷的灯光效果？

> ID：11691530
> 
> 赞同：0
> 
> 时间：2012-07-27T16:02:42.733
> 
> 标签：iphone, ios, animation, cocos2d-iphone, particles

考虑到帖子的滥用主题（例如[this](https://stackoverflow.com/questions/7005188/how-to-light-up-a-sprite-in-cocos2d)或[this](https://stackoverflow.com/questions/9492641/color-changing-sprites-cocos2d)），但我仍然没有安静地设法得到我想要的东西。

我正在开发一款射击游戏，我想在敌人（以及玩家）被击中时照亮他们。

如果我运行以下命令，我的精灵不会变白。这是正确的方向吗？

```
-(void) gothitAnimation
{
ccColor3B originalColor = self.color;
id delay = [CCDelayTime actionWithDuration:0.4f];
[self runAction:[CCSequence actions: [CCTintTo actionWithDuration:0.01f red:255 green:240 blue:240], delay, [CCTintTo actionWithDuration:0.01f red:originalColor.r green:originalColor.g blue:originalColor.b] ,  nil]];
} 
```

我试过只运行 CCTintTo 动作，它只适用于不同于白色的颜色。

我找到了 Arodius 的游戏演示，在我看来，玩家飞船在被击中或处于较低能量水平时多次设置为不可见和可见（参见 [此演示](http://www.youtube.com/watch?v=-6fNQBt0Mio)）。敌人在被击中时也会有灯光效果。

关于如何实现这一目标的任何想法？开发人员是否使用了 CCTintTo 操作或其他方式？我知道他在爆炸中使用了 ParticleEffects。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:34:21.763

精灵的默认色调颜色是白色。因此，您不能将其着色为白色或通过着色使精灵看起来更亮。

可以通过间隔设置可见属性打开和关闭来实现闪烁。一种方法是使用 CCBlink 操作。

最好的选择是使用粒子效果。只有在使用 cocos2d 2.0 并为此特定效果编写片段着色器时，才能实现真正的光照效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T17:52:44.787

我最近需要做同样的事情，并且不想处理像素着色器。我想我可以弄乱纹理如何融入场景以从中获得某种白色闪光。

因此，我通过反复将精灵的 Destination glBlend 函数从 GL_ONE_MINUS_SRC_ALPHA 更改为 GL_ONE，然后再返回，找到了一个合理的闪光效果。

这是我的切换方法：

```
-(void)toggleBlendFlash {
    if (sprite_) {
        ccBlendFunc blendFunc = sprite_.blendFunc;
        if (blendFunc.dst == GL_ONE_MINUS_SRC_ALPHA) {
            blendFunc.dst = GL_ONE; //flash white
        } else {
            blendFunc.dst = GL_ONE_MINUS_SRC_ALPHA; //default
        }
        sprite_.blendFunc = blendFunc;
    }
} 
```

这是我的闪烁顺序：

```
CCSequence *sequence =
        [CCSequence actions:
         [CCCallFunc actionWithTarget:targetEnemy selector:@selector(toggleBlendFlash)],
         [CCDelayTime actionWithDuration:0.3],
         [CCCallFunc actionWithTarget:targetEnemy selector:@selector(toggleBlendFlash)],
         [CCDelayTime actionWithDuration:0.2], nil ]; 
```

它可能看起来不适合您的情况，但请试一试！

* * *

编辑 1：此外，请查看这些链接以获取更多信息/资源：

*   [http://digitallybold.com/314/cocos2d-additive-sprite-color-tinting](http://digitallybold.com/314/cocos2d-additive-sprite-color-tinting)
*   [http://www.andersriggelsen.dk/glblendfunc.php](http://www.andersriggelsen.dk/glblendfunc.php)

编辑2：

当然，我刚刚意识到，如果您的精灵在不同的 CCTexture2D 对象之间进行动画处理（例如，您每帧有 1 个文件），那么它会为每一帧重置您的 blendFunc，这意味着您必须为 CCSprite 或创建一个类别或子类CCAnimate 重新应用您的自定义 blendFunc ......所以我想它的解决方案不像我最初想象的那么快。

# iphone - 模拟器在 Xcode 4.4 中不断崩溃

> ID：11691531
> 
> 赞同：3
> 
> 时间：2012-07-27T16:02:55.260
> 
> 标签：iphone, ios, simulator, xcode4.4

当我在 Xcode 4.4 中运行我的应用程序时，模拟器无法打开，“iOS 模拟器意外退出”。不过，它可以在设备上完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:23:40.433

我通过安装 xcode 4.5 和 ios sdk 6 解决了。现在一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:14:33.973

您在模拟器上的构建可能很糟糕，现在正在搞砸。

*   清理你的代码`(Product > Clean in XCode)`
*   重置您的模拟器设置`(iOS Simulator menu > Reset Content and Settings)`

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:08:36.773

我有同样的问题，我只是按照步骤做了，它工作正常

1) 重置你的 iPhone 模拟器

2）清洁构建你的代码

3) 重新启动计算机

它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:24:29.880

我在 Lion 上遇到了同样的问题。升级到山狮后，我没有这样的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T06:53:53.813

重新启动模拟器.....有时某些应用程序仍保留在内存中....否则重新安装它...某些数据可能已损坏... :)

# html - 使 Google 自定义搜索在新标签上显示结果

> ID：11691532
> 
> 赞同：0
> 
> 时间：2012-07-27T16:02:57.880
> 
> 标签：html, css, uisearchbar, google-search, google-search-api

我正在开发一个嵌入了自定义 Google 搜索栏[的网站。](http://widgetsinabottle.com/widget/demo/effect.html#.UBK6qmEe5K3)我的客户想要一个功能，当用户在该搜索框中搜索某些内容时，应该会打开一个新页面，在该页面应该显示他的搜索结果。当前的 Google 搜索栏在其下方显示结果。有什么方法可以更改以在新选项卡中显示结果？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:39:04.227

我建议使用新的 Google 自定义搜索小部件。它提供了一个简单的参数来在新窗口中打开搜索到的项目。您使用的方法已弃用。

```
<gcse:searchbox-only resultsUrl="http://www.example.com" newWindow="true" queryParameterName="search"> 
```

欲了解更多信息，请访问[此](https://developers.google.com/custom-search/docs/widgets#overview)。

# asp.net - ASP.NET 表单身份验证 Cookie 在 WCF REST api 方法中导致 400“错误请求”错误

> ID：11691536
> 
> 赞同：0
> 
> 时间：2012-07-27T16:03:08.233
> 
> 标签：asp.net, forms-authentication

我已经在网上搜索了这个问题的答案，虽然我发现了类似的问题[，](https://stackoverflow.com/questions/9515249/wcf-rest-web-service-request-error-when-using-forms-authentication-and-authoriza)但我还没有找到具体的答案。

我有一个 MVC 网站，它使用 Forms Authentication 来提供登录支持（这基本上是 MVC 中开箱即用的登录支持）。

在同一个域中，我有一个使用单一方法的 WCF REST 服务。

我想要做的是看看我是否可以从服务中利用表单身份验证来查看请求者是否已经通过 MVC 应用程序“登录”。在我发现的其他一些帖子之后，我确保 web.config 文件（wrt Forms Authentication）是相同的（相同的机器密钥等）。

问题出在这里：我可以通过 MVC 站点登录（因此，通过 cookie 获取我的身份验证票证）。当我向我的服务发出 GET 请求时（请记住，在与 MVC 相同的域中），我可以看到“.ASPXAUTH”cookie 随请求一起发送。

但是，我每次都会收到“400 Bad Request”响应。此外，响应的正文指示
“服务器在处理请求时遇到错误......”

其他意见：

*   如果我从请求中删除 .ASPXAUTH cookie（例如使用 Fiddler 或 curl），则请求将毫无问题地通过
*   我可以使用 Fiddler 或 curl 向 MVC 应用程序中的安全页面发送请求，并包含相同的 .ASPXAUTH cookie，这可以按预期工作（响应正文中包含预期内容的 200 响应）。
*   *（奇怪的）我可以在 global.asax.cs 的Application_AcquireRequestState*方法中在我的服务应用程序中设置一个断点，并在我发送请求时点击它。
    *   然后我可以检查*HttpContext.Current.User.Identity*并看到*IsAuthenticated*为真，并且*Name*显示我的预期用户名（通过 MVC 应用程序的初始登录）
*   我的服务方法中的第一个可执行代码行中的断点永远不会被命中。

当然，当我删除 .ASPXAUTH cookie 时，我的服务中的两个断点都会被命中（当然，在这种情况下，身份*没有经过身份验证。*

所以，在我看来：

1.  表单身份验证工作正常，我希望它在我的服务中工作。我可以检测到请求已通过身份验证，并且他们继续使用该信息。
2.  *在*Forms Authentication 完成它的事情之后但*在*我的服务方法被调用之前，我在 ASP.NET 管道中的某个地方崩溃并烧毁。

我没有运气找到任何对类似问题的引用，并且希望有另一双眼睛（或几千双眼睛）来指出我希望是一个非常愚蠢和明显的答案。

（如果有人想查看特定区域的代码，我可以按要求添加。我不想用大量随机代码示例进一步加重已经措辞过度的帖子的负担）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:28:59.287

与其说是问题的答案，不如说是一种解决方法。但是，我认为这是实现基本目标的更合适的方法。

我将该功能移植到基于[ServiceStack](http://www.servicestack.net/)的解决方案中。我的*猜测*是冲突发生在我一直使用的 WCF REST Starter Kit 代码中的某个地方，但我没有进行详尽的分析。

无论如何，在 MVC 站点和我的服务之间利用表单身份验证的基本目标是通过这种新模型实现的。

# oracle - 更新和删除表中的不同行时是否可能出现死锁？

> ID：11691537
> 
> 赞同：9
> 
> 时间：2012-07-27T16:03:27.260
> 
> 标签：oracle

在Oracle 10+ 版本中，对同一张表的更新和删除是否会导致死锁，即使它们同时对同一张表的不同行进行操作？

该表具有由两列组成的主键，并且没有与任何其他表关联/引用的任何 FK。并且与其他表没有父/子关系

我相信，它不会造成死锁，但我的应用程序遇到了问题。

**添加 oracle 跟踪：**

以下死锁不是 ORACLE 错误。这是由于用户在应用程序设计中的错误或发出不正确的 ad-hoc SQL 而导致的死锁。以下信息可能有助于确定死锁：

```
Deadlock graph:
                       ---------Blocker(s)--------  ---------Waiter(s)---------
Resource Name          process session holds waits  process session holds waits
TX-0007003e-0081d6c3        45     790     X            104      20           X
TX-00080043-0085e6be       104      20     X             45     790           X

session 790: DID 0001-002D-000035F9     session 20: DID 0001-0068-000007F6
session 20: DID 0001-0068-000007F6      session 790: DID 0001-002D-000035F9

Rows waited on:
  Session 790: obj - rowid = 0000F0C8 - AAAPDIAAMAAAEfIAAA
  (dictionary objn - 61640, file - 12, block - 18376, slot - 0)
  Session 20: obj - rowid = 0000F0C8 - AAAPDIAAMAAAEfGAAA
  (dictionary objn - 61640, file - 12, block - 18374, slot - 0)

----- Information for the OTHER waiting sessions ----- Session 20:
  sid: 20 ser: 4225 audsid: 57496371 user: 72/RPT_TABLE
    flags: (0x45) USR/- flags_idl: (0x1) BSY/-/-/-/-/-
    flags2: (0x40009) -/-/INC
  pid: 104 O/S info: user: oracle, term: UNKNOWN, ospid: 20798
    image: oracle@caidb10p-node1
  client details:
    O/S info: user: gtsgen, term: unknown, ospid: 1234
    machine: caiapp08p-node0.nam.nsroot.net program: JDBC Thin Client
    application name: JDBC Thin Client, hash value=2546894660
  current SQL:
  delete from RPT_TABLE.TEMP_TABLE_T1 where TEMP_T1_ID=:1

----- End of information for the OTHER waiting sessions -----

Information for THIS session:

----- Current SQL Statement for this session (sql_id=bsaxpc2bdps9q) ----- UPDATE RPT_TABLE.TEMP_TABLE_T1 temp1 SET temp1.CLIENT_ID = (SELECT MIN(INVMAP.CLIENT_ID) FROM LI_REF.REF_CLIENT_MAP INVMAP WHERE INVMAP.F_CODE = :B2 AND INVMAP.AID = temp1.ID AND temp1.R_ID=:B1 )
----- PL/SQL Stack -----
----- PL/SQL Call Stack -----
  object      line  object
  handle    number  name
45887d750        24  procedure RPT_TABLE.T1_UPDATE_StoredProc  

6399ba188         1  anonymous block 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T18:45:26.793

如果您可以使用死锁图更新您的问题，那将是有用的信息。（当您的应用程序遇到死锁时，Oracle 将引发 ORA-00060，并将跟踪文件写入 user_dump_dest。）如果您查看跟踪文件，您会发现一个名为“死锁图”的部分。如果你能把它贴出来，并且把导致死锁的语句和其他涉及死锁的语句贴出来，那么我们就可以开始得出一些结论了。（我要求的所有信息都可以在跟踪文件中找到。）

正如 Alessandro 所提到的，由于父/子关系的子表上的未索引外键，会话锁定同一个表中的不同行可能会死锁。此外，您可能会在更新同一个表的不同行的两个会话上出现死锁，即使该表不是父/子关系的一部分，例如，如果该表缺少 ITL 条目。

再次发布上面要求的信息，我相信我们可以确定您的僵局的根本原因。

****添加于 2012 年 7 月 30 日 ******

 **添加以下内容，现在已经提供了死锁跟踪文件：好的，首先，根据跟踪文件的内容，这是一个简单的死锁，因为会话在他们试图锁定的行上重叠/冲突。尽管您之前评论过死锁位于*不同*的行上，但我在这里告诉您，这种特殊的死锁是由于*相同*行上的行级锁定造成的。

死锁图显示锁的持有模式是“X”（独占），而锁等待的模式是“X”，这告诉我这是简单的行级锁定。

在这种情况下，SID 20 正在执行“从 RPT_TABLE.TEMP_TABLE_T1 中删除，其中 TEMP_T1_ID=:1”并且*已经*锁定了 rowid AAAPDIAAMAAAAEfIAAA。

同时，SID 790 正在执行“RPT_TABLE.T1_UPDATE_StoredProc”，同时已经锁定了 rowid AAAPDIAAMAAAAEfGAAA。

请注意跟踪文件的“等待的行”部分，SID 20 正在等待 SID 790 持有的行，而 SID 790 正在等待 SID 20 持有的行。这是一个经典的僵局。

一些附加信息：

*   入队类型是 TX（参见死锁图），因此，由于未索引的外键，这绝对*不是锁定。*如果它由于未索引的 FK 而被锁定，则入队类型将是 TM，而不是 TX。（至少还有一种涉及 TM 排队的情况，它不是未索引的 FK。所以，不要假设 TM 排队总是意味着未索引的 FK。）

*   正在等待锁定的模式是“X”（独占），因此这是行级锁定。如果等待的模式是“S”（共享），那么它就*不是*行级锁定。相反，它可能是 ITL 短缺或 PK 或英国执法。

希望有帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T17:52:20.323

我不知道您的应用程序中是否包含外键，但它可能是您的锁的来源。如果是这样，请查看以下链接：

[http://docs.oracle.com/cd/E11882_01/server.112/e16508/consist.htm#BABCAHDJ](http://docs.oracle.com/cd/E11882_01/server.112/e16508/consist.htm#BABCAHDJ)

[http://docs.oracle.com/cd/E11882_01/server.112/e16508/datainte.htm#CNCPT1657](http://docs.oracle.com/cd/E11882_01/server.112/e16508/datainte.htm#CNCPT1657)

Oracle 数据库最大限度地提高了父键相对于依赖外键的并发控制。锁定行为取决于外键列是否被索引。如果没有索引外键，那么子表可能会更频繁地被锁定，出现死锁，并发性会降低。出于这个原因，外键几乎总是应该被索引。唯一的例外是永远不会更新或删除匹配的唯一键或主键。

**锁和未索引的外键**

当以下两个条件都为真时，数据库在子表上获取全表锁：

子表的外键列上不存在索引。

会话修改父表中的主键（例如，删除行或修改主键属性）或将行合并到父表中。对父表的插入不会获取子表上的表锁。

**如果这不是您的情况**，请尝试提供有关它的更多信息。告诉我们会话持有/请求的锁类型，并查看系统表 V$LOCK、V$LOCKED_OBJECT、DBA_DDL_LOCKS、DBA_DML_LOCKS 或 V$SESSION_WAIT。**

# jquery - 我正在使用 addClass/removeClass 和“data-”属性来显示/隐藏 div。如何添加下一个/上一个？

> ID：11691540
> 
> 赞同：0
> 
> 时间：2012-07-27T16:03:41.537
> 
> 标签：jquery

我正在尝试制定电子书的模板。这就是我目前所拥有的：http: [//jsbin.com/otakab/2/edit](http://jsbin.com/otakab/2/edit) 但是下一个/上一个不起作用。你能提供工作代码吗？

```
// Following function works
$(function() {
    $(".pageNumbers a").on("click", function(e) {
    //  Add highlight to the element clicked and remove highlighting from its siblings
    $(this).addClass("highlight").siblings().removeClass("highlight");
    //  Make use of our data attribute to show the correct page and hide the siblings
    $($(this).data('page')).show().siblings(".page").hide();                
});

//  Finally, dynamically click first page to start things off for the user 
//and provide proper highlighting and showing of text
  $("#a-1").click();

});

// Following function DOES NOT WORK
$(function() {
$(".direction a").on("click", function(e) {
// Trying to show the next/previous hidden div
$($(this).data('page')).show().siblings(".page").hide();

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:16:13.443

从您的 HTML 中，看起来您需要做的就是添加`e.preventDefault()`到您的`$('a').on('click',...)`代码中：

[http://jsfiddle.net/juQCz/](http://jsfiddle.net/juQCz/)

```
$(".direction a").on("click", function(e) {
    e.preventDefault();
    $($(this).data('page')).show().siblings(".page").hide();
}); 
```

# ruby-on-rails - 使用 ajax 渲染不同的局部 - rails 3

> ID：11691545
> 
> 赞同：0
> 
> 时间：2012-07-27T16:03:56.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery

我正在尝试通过 jQuery ajax 为每个导航选项卡链接获取一个 link_to 来显示不同的部分。

但似乎无法让它工作，它将每个链接重定向到根索引。

我想单击导航菜单中的链接并在配置文件数据 div 中显示该链接的部分： `_grundskola.html.erb`、、、。`_gymnasium.html.erb``_universitet.html.erb`

**例子：**

我知道，例如导航链接“universitet”应该调用操作 def universitet，该操作调用在 div`universitet.js.erb`中呈现部分。`_universitet.html.erb`

**导航菜单 - 在 show.html.erb 中**

```
 <ul class="nav nav-tabs">
  <li><%= link_to "Grundskola", :action => 'grundskola', :remote => true  %></li>
  <li class="active"><%= link_to "Gymnasium", :action => 'gymnasium', :remote => true %></li>
  <li><%= link_to "Universitet & Högskola", :action => 'universitet', :remote => true %></li>    
 </ul> 
```

**用户控制器.rb**

```
def universitet
    respond_to do |format|
      format.js
    end
  end 
```

**universitet.js.rb**

```
$("profile-data").html("<%= escape_javascript(render(:partial => 'universitet')) %>"); 
```

**_universitet.html.erb**

```
<% groups = @user.friends.group_by(&:college_name) %>
<% sorted_groups = groups.sort_by{|key, values| values.count}.reverse %>
<% sorted_groups.each do |collegename, friends| %>
<% next if collegename.blank? %>
<div class="contentbox">
    <div class="box-header">
        <h3><%= collegename %></h3>
        <div class="meta-info">
            <p><i class="icon-map-marker"></i> Malmö</p>
            <p><i class="icon-user"></i><span class="count"> <%= friends.count %></span> vänner</p>
        </div>
    </div>
    <ul class="friends-list">
        <% friends.map do |friend| %>
        <li><%= image_tag(friend.image) %>
            <% end %> 
        </ul> 
    </div>
<% end %> 
```

我得到了错误的链接结构，html 输出：

```
<li><a href="/auth/failure?action=universitet&amp;controller=users&amp;remote=true">Universitet &amp; Högskola</a></li> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:34:13.703

尝试将格式添加到链接

例子

```
<li><%= link_to "Grundskola", {:action => 'grundskola',:format=>:js}, :remote => true  %></li> 
```

# android - android活动意外重复启动

> ID：11691547
> 
> 赞同：1
> 
> 时间：2012-07-27T16:04:02.507
> 
> 标签：android, android-activity

在我的应用程序中，我有一个简单的按钮，可以启动第二个活动，启动一个微调器（如果相关）并执行一些 http 连接工作。第二个活动也可以由运行和侦听蓝牙连接的服务启动。

这个问题没有发生在我的里程碑（2.1-update1）手机上，而是我相信运行 2.3 的同事手机上。当他们按下按钮启动第二个活动（完全忽略服务部分）时，它将多次启动该活动，当他们在第二个屏幕上按回时，他们会降落在第二个屏幕的另一个实例上，而不是回到第一个活动.

我提到这个的服务部分有两个原因，第一个是这个问题在我实现服务时开始发生，第二个是因为我有一个单独的问题，即在服务端没有正确管理客户端，所以当第二个活动通过服务而不是按钮启动时，我会看到这种行为。由于消息被发送给所有客户端（应该只有一个），我看到该服务产生了第二个活动的多次启动。但是再次按下按钮，这个已经修复的服务问题不应该负责。

现在，我已经采取了两件事来防止这种情况再次发生。我已将第二个活动标记为 singleTask (android:launchMode="singleTask")，并注意到我已将第二个活动作为 startActivityForResult 启动，但当它返回时没有设置或使用它。这不会导致任何错误或任何事情，但我将其更改为普通的 startActivity。

我没有物理访问另一部电话，所以我无法将它连接到 logcat 或任何东西，因为它在其他地方的另一个办公室。

另一部手机不再发现问题，但我担心我隐藏了问题而不是真正修复它，并且想知道是否有人可以提供一些见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:28:57.003

我之前遇到过一个问题，不同的手机在启动服务时会出现不同的症状。有些会多次重新启动（终止并启动）服务，而有些则不会。我猜测是因为您朋友的手机多次重新启动服务，因此每次重新启动时都会调用您的活动。

试试这个，你能在你的服务中显示通知吗？如果是这样：

```
startForeground(ID_NOTIFICATION, notification); 
```

这使得服务始终在前台运行，并且不太可能被android杀死。

# android - XML 解析适用于 Android 2.2、2.3 但不适用于 ICS

> ID：11691550
> 
> 赞同：1
> 
> 时间：2012-07-27T16:04:29.350
> 
> 标签：android, xml-parsing, android-4.0-ice-cream-sandwich

我正在使用不适用于 ICS 版本的 Android 的 XML 解析从服务器获取一些数据。请告诉我我做了什么更正，以便我也应该在 ICS 上运行......（它在较低的情况下工作正常版本）。这是我的代码

```
try {
        URL url = new URL(
                "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(url.openStream()));
        doc.getDocumentElement().normalize();
        NodeList nodeList = doc.getElementsByTagName("file");

        namephoto = new String[nodeList.getLength()];
        for (int i = 0; i < nodeList.getLength(); i++) {

            Node node = nodeList.item(i);
            Element fstElmnt = (Element) node;
            NodeList nameList = fstElmnt.getElementsByTagName("file");
            Element nameElement = (Element) nameList.item(0);
            nameList = nameElement.getChildNodes();
            namephoto[i] = ((Node) nameList.item(0)).getNodeValue();

        }
    } catch (Exception e) {
        Log.e("name", "" + e);
    }
    photobitmap = new Bitmap[namephoto.length];

    setPhotoBackground(namephoto[index_photo]); 
```

我的 XML 代码是这样的。

```
<?xml version="1.0"?>
-<root><file>1 a.JPG</file><file>2 b.JPG</file><file>3 c.JPG</file><file>4 d.JPG</file>  </root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:49:20.813

我自己有解决方案。这是与 Android 4.0 以及其他 android 版本兼容的代码...只需像这样更改 for 循环。

```
for (int i = 0; i < nodeList.getLength(); i++) {
            Node name = nodeList.item(i);
            NodeList nodeEle = name.getChildNodes();
            namephoto[i] = ((Node) nodeEle.item(0)).getNodeValue();

        } 
```

# perl - perl中编码检测的正确方法

> ID：11691554
> 
> 赞同：4
> 
> 时间：2012-07-27T16:04:41.373
> 
> 标签：perl, utf-8, encode, cp1251

我有这两个字符串：

```
%EC%E0%EC%E0+%EC%FB%EB%E0+%F0%E0%EC%F3
%D0%BC%D0%B0%D0%BC%D0%B0%20%D0%BC%D1%8B%D0%BB%D0%B0%20%D1%80%D0%B0%D0%BC%D1%83 
```

这是一个分别在 cp-1251 和 utf-8 中的俄语 url 编码短语。我想在我的 utf-8 终端中使用 perl 以俄语查看它们。不幸的是，perl 模块 Encode::Detect（在 url 解码之后）无法检测到第一个示例的 cp-1251。相反，它提出了这个：“x-euc-tw”。

问题是，在这种情况下检测正确编码的正确方法是什么（指定语言环境参数，使用其他模块......）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:29:12.307

`Encode::Detect`，它使用 Mozilla 通用字符集检测器，通过让不同的字符集探测器查看数据来工作。然后探测者报告不同的置信水平，具有最高置信度的探测者获胜。此过程仅取决于输入；它不受语言环境或其他外部设置的影响。在这种情况下，无论出于何种原因，euc-tw 的探测器报告的置信度都高于 windows-1251 的探测器，除了更改数据或修改源代码之外，您无能为力。

您可以尝试使用`Encode::Guess`which 允许指定可供选择的编码列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T17:45:31.077

UTF-8 和 cp1251 是仅有的两个选项吗？cp1251 文本也是有效的 UTF-8 的可能性非常小。（这将是胡言乱语。）所以你可以这样做

```
use Encode qw( decode );
my $decoded = eval { decode('UTF-8', $encoded, Encode::FB_CROAK) }
    // decode('cp1251', $encoded); 
```

这将比编码猜测器准确得多。

# ios - 具有 UIPicker 性能的下拉选择

> ID：11691563
> 
> 赞同：1
> 
> 时间：2012-07-27T16:05:24.687
> 
> 标签：ios, uipickerview

我想使用 UIPicker 来模拟下拉菜单，我找到了这段代码。这是第二个答案。

[UIPickerView 选择和隐藏](https://stackoverflow.com/questions/5347537/uipickerview-select-and-hide)

这正是我锁定的原因，除了一件事。当我点击我的 TextField 激活该方法时，就像作者说我应该做的那样，UIPicker 需要一段时间才能显示出来。我想知道是否有办法使代码更快。

我认为发生这种情况是因为该方法每次都会创建一个 UIPicker，但我不确定。对不起，如果这是一个愚蠢的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:25:46.937

我过去所做的是创建`UIPickerView`as a `property`of my`UIViewController`然后使用该`hidden`属性来显示和关闭它。如果您愿意，甚至可以上下动画，而不仅仅是隐藏它。这样你就不会每次都创建它。如果您必须使用大量数据进行设置或从其他地方提取数据，我可以看到创建需要一段时间。

所以如果我是你，我会先创建它`viewDidLoad`然后隐藏它，直到你准备好使用它，而不是每次都创建它。或使用动画将其带入和带出屏幕。

需要记住的一件事是，您`UIPickerView`每次都使用相同的值，因此您可能希望每次在显示之前将其设置为某种默认值，因此它不仅等于他们在显示时最后输入的任何值。

同样，我会创建工具栏并将其另存为 a `property`，然后同时隐藏或显示它们。

# android - 尝试在 Facebook 的墙上发帖时出现“请求失败”

> ID：11691570
> 
> 赞同：1
> 
> 时间：2012-07-27T16:05:37.617
> 
> 标签：android, facebook

我正在使用 facebook connect with SSO 将用户登录/注册到我的应用程序，并希望在每次登录后要求用户在墙上发帖。

但是，在 requestListener 的 onComplete 上（显示了墙上的帖子对话框，并且用户触摸了分享），我得到了错误的响应。没有在 FB SDK 文档中找到它的含义，但是我的 Wall 上发布了任何内容。响应应该返回一个 JSON 格式的字符串，所以当尝试执行“message = json.getString("message");”时，我得到一个 FacebookError 女巫只是打印“请求失败”......

日志猫：

```
07-27 12:58:09.170: W/FacebookConnect(26086): Activity Started
07-27 12:58:12.300: W/FacebookConnect(26086): User authorized
07-27 12:58:12.300: E/FacebookConnect(26086): onComplete called at facebook.authorize
07-27 12:58:12.300: E/FacebookConnect(26086): Access Token: AAAC1sJLmgzkBAD0M40SQLgluPU...
07-27 12:58:12.860: D/webviewglue(26086): nativeDestroy view: 0x223888
07-27 12:58:13.420: I/SqliteDatabaseCpp(26086): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/androidhive.dashboard/databases/webview.db
07-27 12:58:13.420: I/SqliteDatabaseCpp(26086): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/CachedGeoposition.db, db=/data/data/androidhive.dashboard/databases/webview.db
07-27 12:58:14.670: D/SampleRequestListener(26086): Response: {"id":"1123123","name"...
07-27 12:58:14.680: E/FacebookConnect(26086): JSON {"work":[{"position"...
07-27 12:58:17.150: E/SampleDialogListener(26086): Dialog Success! post_id=1003157...
07-27 12:58:17.720: E/WallPostRequestListener(26086): Got response: false
07-27 12:58:17.720: E/WallPostRequestListener(26086): Facebook Error: request failed 
```

我的代码（WallPostRequestListener 类中发生错误）：

```
public class FacebookConnectActivity extends Activity {
private static final String TAG_JSON = "json";
static Facebook facebook = new Facebook("11111111111111");
AsyncFacebookRunner mAsyncRunner;
private SharedPreferences mPrefs;
JSONObject json;
Context ctx = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.resgatar_produto_layout);
    Log.w("FacebookConnect", "Activity Started");

    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        facebook.setAccessToken(access_token);

    }
    if(expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if(!facebook.isSessionValid()) {

    facebook.authorize(this, new String[] {"email", "user_photos", "user_birthday", "user_hometown", "user_relationships","user_location", "user_work_history", "publish_actions"}, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            Log.w("FacebookConnect", "User authorized");
            Log.e("FacebookConnect", "onComplete called at facebook.authorize");
            Log.e("FacebookConnect", "Access Token: "+facebook.getAccessToken().toString());
            mAsyncRunner = new AsyncFacebookRunner(facebook);
            mAsyncRunner.request("me", new SampleRequestListener());
            Bundle params = new Bundle();
            params.putString("link", "www.qranio.com");
            facebook.dialog(ctx, "feed", params, new SampleDialogListener());
        }

        @Override
        public void onFacebookError(FacebookError error) {
            Log.w("FacebookConnect", "Error authorizing: "+error.toString());
        }

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}   
    });

    }

}

public static  void logoutFB(){
    if(facebook.isSessionValid()){
        facebook.setAccessToken(null);
    }
}

public void startDataProcess(){

    Intent a = new Intent(FacebookConnectActivity.this, FacebookDataProcess.class);
    a.putExtra(TAG_JSON, json.toString());
    startActivity(a);
    finish();
}

public class SampleDialogListener extends BaseDialogListener {

    public void onComplete(Bundle values) {
        final String postId = values.getString("post_id");
        if (postId != null) {
            Log.e("SampleDialogListener", "Dialog Success! post_id=" + postId);
            mAsyncRunner.request(postId, new WallPostRequestListener());
        } else {
            Log.e("SampleDialogListener", "No wall post made"); //Usuario clicou em Cancelar
            startDataProcess();
        }
    }

    public void onCancel(){ //Usuario clicou no X do dialog
        Log.w("FacebookConnect", "Post to Wall Canceled");
        startDataProcess();
    }
}

public class WallPostRequestListener extends BaseRequestListener {

    public void onComplete(final String response, final Object state) {

        Log.e("WallPostRequestListener", "Got response: " + response);
        String message = "<empty>";
        try {
            JSONObject json = Util.parseJson(response);
            message = json.getString("message");
        } catch (JSONException e) {
            Log.e("WallPostRequestListener", "JSON Error in response");
        } catch (FacebookError e) {
            Log.e("WallPostRequestListener", "Facebook Error: " + e.getMessage());
            //Toast.makeText(ctx, "Erro ao postar no Facebook.", Toast.LENGTH_LONG).show();
        }
        //startDataProcess();
    }
}

public class SampleRequestListener extends BaseRequestListener {

    public void onComplete(final String response, final Object state) {
        try {

            // process the response here: executed in background thread
            Log.d("SampleRequestListener", "Response: " + response.toString());
            json = Util.parseJson(response);
            Log.e("FacebookConnect", "JSON " + json.toString());

            //startDataProcess();

            // then post the processed result back to the UI thread
            // if we do not do this, an runtime exception will be generated
            // e.g. "CalledFromWrongThreadException: Only the original
            // thread that created a view hierarchy can touch its views."

        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }

    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
    try{
        mAsyncRunner = new AsyncFacebookRunner(facebook);
        mAsyncRunner.request("me", new SampleRequestListener());
        Bundle params = new Bundle();
        params.putString("link", "www.qranio.com");
        //params.putString("display", "touch");
        facebook.dialog(ctx, "feed", params, new SampleDialogListener());
        Log.e("FacebookConnect", "Authentication authorizeCallback called (onActivityResult)");
        Log.e("FacebookConnect", "Access Token: "+facebook.getAccessToken().toString());
        //facebook.
        //if (facebook.isSessionValid()){

        //}else{
            //Log.e("FacebookConnect", "Invalid facebook session while trying to fetch user data");
        //}*/

    }catch(FacebookError fbe){
        Log.e("FacebookConnect", "onActivityResult FacebookError " + fbe.toString());
    }catch (Exception e){
        Log.e("FacebookConnect", "onActivityResult Exception " + e.toString());
    }

} 
```

}

# gwt - 如何在 Eclipse 中升级到 GWT 2.5

> ID：11691575
> 
> 赞同：7
> 
> 时间：2012-07-27T16:05:46.103
> 
> 标签：gwt, eclipse-juno, gwt-2.5

我正在使用 GWT 2.4 和 Eclipse Juno。[使用https://developers.google.com/web-toolkit/usingeclipse](https://developers.google.com/web-toolkit/usingeclipse)上的说明安装 GWT 。

我想试试 GWT 2.5。

如何从 GWT 2.4 升级到 2.5？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T16:15:11.790

目前，GWT 2.5 仅作为候选版本提供，因此尚未通过通常的 Eclipse 更新站点提供。但是，Eclipse 很容易与任何 GWT 版本一起使用：

*   [从https://developers.google.com/web-toolkit/versions](https://developers.google.com/web-toolkit/versions)下载您需要的 GWT SDK
*   在任何你喜欢的地方提取它
*   在 Eclipse Preferences > Google > Web Toolkit 中，使用“添加...”按钮并导航到 GWT SDK 目录

然后，在每个 Eclipse 项目的属性页面（Project > Properties > Google > Web Toolkit）中，您可以选择一个已安装的 SDK。

# jquery - JQuery Dialog - 为不同的 id 重用代码

> ID：11691577
> 
> 赞同：0
> 
> 时间：2012-07-27T16:05:48.143
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我刚开始使用 Jquery，我想知道是否有办法为多个 id 重用一个对话框。我正在使用该对话框来显示对多个项目的更深入的描述。我现在设置代码的方式是：

```
 $('#NY7C').dialog({
                autoOpen: false,
                width: 800,
                height: 700,
                modal: true,
                draggable: false
            });

            $('#NY7C-open').click(function(){
                $('#NY7C').dialog('open');
                return false;
            });

            $('#NY7R').dialog({ //another dialog that has the same features as #NY7C
            });

            $('#NY7R-open').click(function(){
            }) 
```

在正文中，我使用以下代码打开对话框：

```
<a id="NY7C-open" class="ui-state-default ui-corner-all" href="#">More Info</a>
<a id="NY7R-open" class="ui-state-default ui-corner-all" href="#">More Info</a> 
```

最后，对话框中显示的信息在：

```
<div id="#NY7C">
    //Information for NY7C
</div>
<div id="#NY7R">
    //Information for NY7R
</div> 
```

现在我现在拥有代码的方式有效。但是，我希望能够重用第一个代码，以便可以将它用于多个 ID（例如 NY7C、NY7R、NY7P 等）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:08:03.200

您可以将类添加到类似的对话框

```
<div id="#NY7C" class="dialog">
    //Information for NY7C
</div>
<div id="#NY7R" class="dialog">
    //Information for NY7R
</div> 
```

然后做

```
$('.dialog').dialog({}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:10:11.530

那这个呢...

```
function attachDialog(elementId) {
    $(elementId).dialog({
        autoOpen: false,
        width: 800,
        height: 700,
        modal: true,
        draggable: false
    });

    $(elementId + 'open').click(function() {
        $(elementId).dialog('open');
        return false;
    });

}

attachDialog('#NY7C');
attachDialog('#NY7R');
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:10:28.440

给他们类而不是 id。例如：

```
<a id="NY7C-open" class="dialog-trigger ui-state-default ui-corner-all" href="#">More Info</a>
<a id="NY7R-open" class="dialog-trigger ui-state-default ui-corner-all" href="#">More Info</a>

<div id="#NY7C" class="my-dialog">
    //Information for NY7C
</div>
<div id="#NY7R" class="my-dialog">
    //Information for NY7R
</div> 
```

js将是：

```
$('.my-dialog').dialog({
    autoOpen: false,
    width: 800,
    height: 700,
    modal: true,
    draggable: false
});
$('.dialog-trigger').click(function(){
    var id = this.id;
    var targetId = id.replace('-open','');
    var $target = $('#' + targetId);
    if($target.length){
        $target.dialog('open');
        return false;
    }
}); 
```

# sql - 比较值sql

> ID：11691578
> 
> 赞同：1
> 
> 时间：2012-07-27T16:06:08.070
> 
> 标签：sql, oracle

我有一个表格，我必须在其中报告当前状态以及此状态适用的日期。例子：

```
Status   date
1        26 July
1        24 July
1        22 July
2        21 July
2        19 July
1        16 July
0        14 July 
```

鉴于此，我想将当前状态显示为 1，日期显示为 7 月 22 日> 我不知道该怎么做。

```
Status   date
    1        25 July
    1        24 July
    1        20 July 
```

在这种情况下，我想将状态显示为 1，日期显示为 7 月 20 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:57:29.337

这应该使用非常标准的 SQL 提取您需要的内容：

```
-- Get the oldest date that is the current Status
select Status, min(date) as date
from MyTable
where date > (
    -- Get the most recent date that isn't the current Status
    select max(date)
    from MyTable
    where Status != (
        -- Get the current Status
        select Status -- May need max/min here for multiple statuses on same date
        from MyTable
        where date = (
            -- Get the most recent date
            select max(date)
            from MyTable
        )
    )
)
group by Status 
```

我假设该`date`列是适合正确排序的数据类型（例如，不是字符串，除非您可以转换它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:04:08.907

另一种选择是使用窗口函数`LEAD`（或`LAG`取决于您对结果的排序方式）。在此示例中，我们标记状态随日期变化的行，对结果进行排序并排除除第一个以外的行：

```
with test_data as (
      select 1 status, date '2012-07-26' status_date from dual union all
      select 1 status, date '2012-07-24' status_date from dual union all
      select 1 status, date '2012-07-22' status_date from dual union all
      select 2 status, date '2012-07-21' status_date from dual union all
      select 2 status, date '2012-07-19' status_date from dual union all
      select 1 status, date '2012-07-16' status_date from dual union all
      select 0 status, date '2012-07-14' status_date from dual)

select status, as_of
from (
    select status
    , case when status != lead(status) over (order by status_date desc) then status_date else null end as_of
    from test_data
    order by as_of desc nulls last
    )
where rownum = 1; 
```

**附录：**`LEAD` and函数接受 另外`LAG`两个参数：`offset`and `default`。`offset`默认为 1，默认`default`为 null。默认值允许您确定当您位于结果集的开头或结尾时要考虑的值。在您的状态从未改变的情况下，需要一个默认值。在此示例中，我提供了 -1 作为默认状态，因为我假设状态值不是您预期的集合的一部分：

```
with test_data as (
      select 1 status, date '2012-07-25' status_date from dual union all
      select 1 status, date '2012-07-24' status_date from dual union all
      select 1 status, date '2012-07-20' status_date from dual)

select status, as_of
from (
    select status
    , case when status != lead(status,1,-1) over (order by status_date desc) then status_date else null end as_of
    from test_data
    order by as_of desc nulls last
    )
where rownum = 1; 
```

您可以使用 case 条件（等于/不等于）、前导函数中的 order by 子句以及满足您需求的所需默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:30:37.773

这有点不雅，但它应该工作

```
SELECT status, date
FROM my_table t
WHERE status = ALL (SELECT status
                    FROM my_table
                    WHERE date = ALL(SELECT MAX(date) FROM my_table))
AND date = ALL (SELECT MIN(date) 
                FROM my_table t1
                WHERE t1.status = t.status 
                AND NOT EXISTS (SELECT * 
                                  FROM my_table t2 
                                  WHERE t2.date > t1.date AND t2.status <> t1.status)) 
```

# c# - 我在分配数组时遇到问题？

> ID：11691580
> 
> 赞同：2
> 
> 时间：2012-07-27T16:06:20.687
> 
> 标签：c#

我在处理这段代码时遇到了问题，我不知道如何让它工作。我无法弄清楚对我来说问题是什么，它看起来应该可以工作。两个地方名为 m_nameList 的字符串数组都标记为“非静态字段、方法或属性 'Solutionname.classname.m_nameList' 所需的对象引用”

编码：

```
 public static bool CheckVacantSeats(int seatNumber)
    {            
        if (m_nameList[seatNumber] == null)
      {
          return true;
      }
      return false;
    } 
```

m_nameList 是在此静态布尔之前在构造函数中声明的数组：

```
 public SeatManager(int maxNumberOfSeats)
    {
        m_totNumOfSeats = maxNumberOfSeats;
        m_nameList = new string[m_totNumOfSeats];
        m_priceList = new double[m_totNumOfSeats];
    } 
```

我用这个从另一个类调用 CheckVacantSeat：

```
 bool validSeats = SeatManager.CheckVacantSeats(seatNumber, m_nameList); 
```

我无法弄清楚它有什么问题。所以我需要一些帮助来弄清楚为什么 m_nameList 对我不起作用？

提前致谢！！

//问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:09:20.550

问题是您已将方法标记为静态。由于它是静态的，因此它具有“无”状态，并且无法访问未标记为静态的类成员。

您可以将 m_nameList 标记为静态，但这意味着它的值在所有读取和写入之间共享。m_nameList 看起来像一个简单的查找表，所以也许这就是你想要的？

推荐阅读[静态](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)和[静态类和静态成员](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:09:42.290

您的函数是静态的，但您的变量不是静态的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T16:11:06.460

那么你的调用一开始就错了，你的方法`CheckVacantSeats`只接受一个参数，所以你不能用两个来调用它？？？！

```
CheckVacantSeats(int seatNumber)
SeatManager.CheckVacantSeats(seatNumber, m_nameList); 
```

您的方法也是静态的，因此没有构造函数。

我想你的追求是：

```
SeatManager seatManager = new SeatManager(maxNumberOfSeats);
seatManager.CheckVacantSeats(seatNumber); 
```

**还**

```
public bool CheckVacantSeats(int seatNumber)
    {            
        if (m_nameList[seatNumber] == null)
      {
          return true;
      }
      return false;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T16:15:42.247

您混合了两个概念：使用构造函数初始化的实例和具有静态成员的静态类。您不能期望静态成员方法访问非静态字段。我猜你的`m_nameList`字段也是静态的，否则你的代码甚至不会编译。您应该选择以下任何一种方式：

1.  使所有`SeatManager`的成员非静态；
2.  将`SeatManager`类变成一个所有成员都是静态的静态类。

由于您需要`SeatManager`使用席位总数来初始化 ，因此更好的方法似乎是 No. (1)。然后`SeatManager.CheckVacantSeats()`你会调用一个像`mySeatManager.CheckVacantSeats()`. 即使总是只有一个实例`SeatManager`——单例——这种方法也更好。使用单例，您最终可以得到一个`public static SeatManager Instance { get; set; }`属性`SeatManager`并像这样使用它`SeatManager.Instace.CheckVacantSeats()`：这通常称为[*单例模式*](http://en.wikipedia.org/wiki/Singleton_pattern)。

# c# - Autofac：注册组件并根据解析父级解析

> ID：11691583
> 
> 赞同：13
> 
> 时间：2012-07-27T16:06:29.850
> 
> 标签：c#, dependency-injection, autofac

我想注册一个组件以根据它可能正在解析的类使用参数解析。（这听起来有点令人困惑，所以我将展示一个示例）。

这是一个使用记录器的对象：

```
class MyObject : IMyObject
{
    public ILogger Logger;
    public MyObject(ILogger logger)
    {
        Logger = logger;
    }
} 
```

现在传入的记录器可能因类而异。因此，对于如何在下面执行此操作，我有一个相当完善的想法：

```
class MyLogger : ILogger
{
    public string Name{get; protected set;}

    public static ILogger GetLogger(string className)
    {
        Name = className;
        MyLogger logger;
        // Do something to choose a logger for that specific class
        return logger;
    }
} 
```

因此，当我注册 Logger 时，我希望能够告诉它类名。我希望有一种方法可以做到这一点：

```
ContainerBuilder builder = new ContainerBuilder();

builder.Register<MyLogger>(ctx =>
    {
        string className = //Get resolving class name somehow;
        return MyLogger.GetLogger(className);
    }).As<ILogger>();

builder.Register<MyObject>().As<IMyObject>();

var container = builder.Build();

IMyObject myObj = container.Resolve<IMyObject>();

//myObject.Logger.Name should now == "MyObject" 
```

我想这样做的原因是避免在代码中使用带有 autofac 的记录器注册我实现的每个类。我希望能够在 xml 中注册所有对象，并且只需有一个 LoggerModule 即可添加此注册。

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T16:19:21.070

Here's what I do (ILog is just my own wrapper around log4net):

```
public class LoggingModule : Module
{
    protected override void Load(ContainerBuilder builder)
    {
        builder.Register((c, p) => GetLogger(p.TypedAs<Type>()));
    }

    protected override void AttachToComponentRegistration(
        IComponentRegistry registry, IComponentRegistration registration)
    {
        registration.Preparing +=
            (sender, args) =>
            {
                var forType = args.Component.Activator.LimitType;

                var logParameter = new ResolvedParameter(
                    (p, c) => p.ParameterType == typeof (ILog),
                    (p, c) => c.Resolve<ILog>(TypedParameter.From(forType)));

                args.Parameters = args.Parameters.Union(new[] {logParameter});
            };
    }

    public static ILog GetLogger(Type type)
    {
        return new Log4NetLogger(type);
    }
}

public interface ILog
{
    void Debug(string format, params object[] args);
    void Info(string format, params object[] args);
    void Warn(string format, params object[] args);

    void Error(string format, params object[] args);
    void Error(Exception ex);
    void Error(Exception ex, string format, params object[] args);

    void Fatal(Exception ex, string format, params object[] args);
}

public class Log4NetLogger : ILog
{
    private readonly log4net.ILog _log;

    static Log4NetLogger()
    {
        XmlConfigurator.Configure();
    }

    public Log4NetLogger(Type type)
    {
        _log = LogManager.GetLogger(type);
    }

    public void Debug(string format, params object[] args)
    {
        _log.DebugFormat(format, args);
    }

    public void Info(string format, params object[] args)
    {
        _log.InfoFormat(format, args);
    }

    public void Warn(string format, params object[] args)
    {
        _log.WarnFormat(format, args);
    }

    public void Error(string format, params object[] args)
    {
        _log.ErrorFormat(format, args);
    }

    public void Error(Exception ex)
    {
        _log.Error("", ex);
    }

    public void Error(Exception ex, string format, params object[] args)
    {
        _log.Error(string.Format(format, args), ex);
    }

    public void Fatal(Exception ex, string format, params object[] args)
    {
        _log.Fatal(string.Format(format, args), ex);
    }
} 
```

# spring - 尽管验证失败，JPA 仍然存在对象

> ID：11691587
> 
> 赞同：1
> 
> 时间：2012-07-27T16:06:43.933
> 
> 标签：spring, hibernate, jpa, spring-mvc

我遇到了一个问题，即模型对象正在与数据库合并，尽管我实际上并没有请求它。我正在使用 Spring 3.1.2 和 Hibernate 3.6.6

这是我的模型对象：

```
@Entity
@Table(name = "ModelObject")
@Cacheable(true)
public class ModelObject implements Identifiable, PersonAssociation<MatrixReport> {

private static final long serialVersionUID = 2252419245370455982L;

@Transient
private Map<String, String> allComments = new LinkedHashMap<String, String>();

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "MR_ID")
private Integer id;

@NotNull(groups = { Draft.class, Complete.class })
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fkSubject")
private Person subject;

@NotNull(groups = { Draft.class, Complete.class })
@Column(name = "DateCreated")
private Date created;

@NotNull(groups = { Complete.class })
@Column(name = "DateCompleted")
private Date completed;

@NotNull(groups = { Draft.class, Complete.class })
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fkCompleter")
private Person completer;

@NotNull(groups = { Draft.class, Complete.class })
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fkCompleterGenericAppointment")
private ValidGenericAppointment completerAppointment;

@NotNull(groups = { Draft.class, Complete.class })
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fkCompleterRank")
private ValidRank completerRank;

@NotNull(groups = { Draft.class, Complete.class })
@ManyToOne
@JoinColumn(name = "fkCompleterTerritory")
private ValidTerritory completerTerritory;

@NotEmpty(groups = { Complete.class })
@Column(name = "Comment")
private String comment;

@NotNull(groups = { Draft.class, Complete.class })
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fkAuthenticatedCreator")
private AuthenticatedUserEntity authenticatedCreator;

@NotNull(groups = { Draft.class, Complete.class })
@Column(name = "IsDraft")
private boolean draft;

@NotNull(groups = { Complete.class })
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fkNextAppointment")
private ValidGenericAppointment nextAppointment;

@NotNull(groups = { Complete.class })
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fkUltimateAppointment")
private ValidGenericAppointment ultimateAppointment;

/* getter and setter methods... */

} 
```

这是我的控制器方法，当来自与此模型对象关联的 html 表单的发布请求发出时运行：

```
 @RequestMapping(method = RequestMethod.POST)
        public ModelAndView saveDraftReport(@ModelAttribute("report") @Valid MatrixReport report, BindingResult result,
                Model model, Locale locale) {

            boolean valid;
            // Add the current rank of the completer to the report
            if (report.getCompleter() != null) {
                report.setCompleterRank(report.getCompleter().getOfficer().getCurrentRank().getRank());
            }
            if (report.isDraft()) {
                report.setCompleted(null);
                valid = this.validationUtils.isValid(result, report, locale, Draft.class);
            } else {
                report.setCompleted(new Date());
                valid = this.validationUtils.isValid(result, report, locale, Complete.class);
            }

            if (!valid) {      /* everything up to this point seems to be going as expected - the object is properly validating.  */
                return createMav(result.getModel());
            }

            if (valid && !result.hasErrors() && report.getId() != null) {
                this.matrixReportService.persistReport(report);
                if (!report.isDraft()) {
                    return createMav(result, "redirect:/app/matrix_reports_submitted.jsp?sub=1");
                }
            } else if (valid && !result.hasErrors() && report.getId() == null) {
                report = this.matrixReportService.persistReport(report);
                return createMav(result, "redirect:edit?reportId=" + report.getId());
            }
            return createMav(result.getModel());
        } 
```

“有效”标志设置正确，但无论验证是否失败，对象都会保留。将用户重定向到 JSP 后，该对象似乎正在保存。在页面顶部，我设置了以下 bean 变量：

```
 <c:set target="${requestContext.pictureBean}" property="id" value="${personId}" />
    <c:set var="image" value="${requestContext.pictureBean.pictures[0]}" /> 
```

这些变量需要使用存储库层，并且似乎在访问该层时模型对象正在保存。我感觉问题可能出在事务上，但这并不能解释为什么它只发生在这个模型对象上。为了说明我为什么相信这一点，我在我的模型对象中放置了一个 PreUpdate 侦听器 - 这是其中的 Thread.dumpStack 的结果：

```
java.lang.Exception: Stack trace
    at java.lang.Thread.dumpStack(Thread.java:1223)
    at com.example.model.matrixreport.MatrixReport.preMatrixUpdate(MatrixReport.java:399)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.hibernate.ejb.event.BeanCallback.invoke(BeanCallback.java:37)
    at org.hibernate.ejb.event.EntityCallbackHandler.callback(EntityCallbackHandler.java:94)
    at org.hibernate.ejb.event.EntityCallbackHandler.preUpdate(EntityCallbackHandler.java:79)
    at org.hibernate.ejb.event.EJB3FlushEntityEventListener.invokeInterceptor(EJB3FlushEntityEventListener.java:61)
    at org.hibernate.event.def.DefaultFlushEntityEventListener.handleInterception(DefaultFlushEntityEventListener.java:349)
    at org.hibernate.event.def.DefaultFlushEntityEventListener.scheduleUpdate(DefaultFlushEntityEventListener.java:287)
    at org.hibernate.event.def.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:155)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:219)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:76)
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:467)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    at com.example.repository.PersonManager$$EnhancerByCGLIB$$898c8f79.findById(<generated>)
    at com.example.security.guards.AbstractObjectGuard.findById(AbstractObjectGuard.java:213)
    at com.example.presentation.beans.PersonBean.getPerson(PersonBean.java:51)
    at com.example.presentation.beans.PictureBean.getPictures(PictureBean.java:19)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:985)
    at org.apache.jsp.app.resources.includes.info_005fpanel_jsp._jspx_meth_c_005fset_005f5(info_005fpanel_jsp.java:435)
    at org.apache.jsp.app.resources.includes.info_005fpanel_jsp._jspService(info_005fpanel_jsp.java:111)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
    at org.apache.taglibs.standard.tag.common.core.ImportSupport.acquireString(ImportSupport.java:314)
    at org.apache.taglibs.standard.tag.common.core.ImportSupport.doEndTag(ImportSupport.java:171)
    at org.apache.jsp.app.matrix_005fedit_jsp._jspx_meth_c_005fimport_005f3(matrix_005fedit_jsp.java:1300)
    at org.apache.jsp.app.matrix_005fedit_jsp._jspService(matrix_005fedit_jsp.java:295)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.salvationarmy.commons.filters.ApplicationContextFilter.doFilter(ApplicationContextFilter.java:67)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:99)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:60)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:57)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at net.sf.ehcache.constructs.web.filter.GzipFilter.doFilter(GzipFilter.java:95)
    at net.sf.ehcache.constructs.web.filter.Filter.doFilter(Filter.java:86)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.salvationarmy.commons.filters.ApplicationContextFilter.doFilter(ApplicationContextFilter.java:67)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:113)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636) 
```

有谁知道这里发生了什么？

谢谢。

# javascript - 点击为div添加边框

> ID：11691588
> 
> 赞同：0
> 
> 时间：2012-07-27T16:06:48.330
> 
> 标签：javascript, jquery

我有一个包含多个 div 的网页。当用户点击 body 时，所有 div 元素的边框都会变为红色。但是，当用户单击一个 div 时，只有该 div 的边框会变为蓝色。其他所有 div 元素都将保持红色边框。到目前为止，这是我的代码：

```
$('body').click(function() {
    var $target = $(event.target);
    if (!target.closest($('div')).length) {
        //I want the border of all div on the page to change to red
        $('div'). css('border', '2px solid red');
    } else if (target.closest($('div')).length) {
        //Here just the div that was clicked on will have its border changed to blue
        $(this).css('border', '2px solid blue');
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:16:35.423

试试这个 - [http://jsfiddle.net/74pzJ/4/](http://jsfiddle.net/74pzJ/4/)

```
$('body').on("click", function(e) {
    $("div").css('border', '2px solid red');
    $(e.target).closest("div").css('border', '2px solid blue');
}); 
```

**文档**

*   `on`- [http://api.jquery.com/on/](http://api.jquery.com/on/)
*   `not`- [http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)
*   `css`- [http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:09:02.390

你需要在你的函数中使用 jquery.. 的 event.stopPropagation() 方法

因为您的点击事件正在冒泡到其他 div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:15:15.527

```
$('body').click(function() {
    $('div').css('border', '2px solid red');    
});

$('div').click(function(e){
    $(this).css('border', '2px solid blue');
    e.stopPropagation();
});
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T16:45:21.290

您可以使用以下代码来突出显示像 firebug 这样的 html 标签。也许这对你有帮助。

```
 document.getElementById('clickable_content').addEventListener("mouseover", function(e) {
        e.stopPropagation();
        e.target.addEventListener("mouseout", function (e) {
            e.target.className = e.target.className.replace(new RegExp(" highlight\\b", "g"), "");
        });
        e.target.addEventListener("click",function(e){
            alert(e.target.className); // clicked div or what ever
        });
        e.target.className += " highlight";
    }); 
```

# linux - 将多个数据数组映射到任意固定内存地址

> ID：11691595
> 
> 赞同：0
> 
> 时间：2012-07-27T16:07:25.400
> 
> 标签：linux, mmap, memory-mapping

我正在 64 位 Linux 机器上开发一个程序，该程序需要将多个任意长度的数据数组映射到我无法控制的固定内存地址。我认为 mmap() 与 MAP_FIXED 和 MAP_ANONYMOUS 是要走的路，例如：

```
mmap((void *) 0x401000, 0x18e, PROT_NONE, MAP_ANONYMOUS | MAP_FIXED, -1, 0); 
```

但是，每次我调用此函数时，它都会返回 MAP_FAILED。我已将*fd*设置为 -1，我知道某些系统需要它，地址是我的页面大小 (4096) 的倍数，并且长度是非负数，所以我想知道 0x401000 是否已经存在我的系统使用；我也尝试过 0x402000、0x403000 和 0x404000，结果相同。

关于 mmap()，我是否遗漏了什么，或者有没有办法找出这个地址已经有什么？更好的是，由于我无法控制我需要哪些地址，有没有更好的方法来避免遇到现有映射？

**编辑**：检查后`errno`，我发现我得到的代码是一个无效参数，因此，根据手册页，“我们不喜欢 addr、length 或 offset（例如，它们太大或未对齐）在页面边界上）。” 不过，我还不能弄清楚哪一个是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:53:24.160

鉴于这`0x400000`似乎是我的Debian 系统`.text`上进程的地址（不同），我怀疑您遇到了失败，因为您正在尝试映射现有的东西，正如您所想的那样。不确定（以编程方式）确定哪些段被映射/可用的最佳方法，但您可以首先检查一些“典型”进程，以了解您的系统如何将地址范围分配给程序和库。地址空间随机化也在那里引发了一些额外的皱纹......`amd64``x86``/proc/<pid>/maps`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:35:33.917

这是我很久以前写的一个例子，它确实是固定地址的mmap。它映射帧缓冲区以设置/清除像素：

[http://stromberg.dnsalias.org/~strombrg/pbmonherc.html](http://stromberg.dnsalias.org/~strombrg/pbmonherc.html)

```
videoBase = (unsigned char *) mmap((caddr_t) videoBase, VideoRamLength,
                   PROT_READ | PROT_WRITE,
                   MAP_SHARED | MAP_FIXED,
                   fd, VideoRamStart); 
```

fd 对 /dev/mem 开放。

# php - 未选中的复选框

> ID：11691596
> 
> 赞同：2
> 
> 时间：2012-07-27T16:07:28.717
> 
> 标签：php, javascript, html

我有一个包含复选框的 Web 表单。该表单是动态创建的，因此该表单上可能有多个复选框。我需要知道它是否被检查。问题是未选中的复选框根本没有发布任何内容。

我知道以前有人问过这个问题，但解决方案始终是提供一个带有值的隐藏字段。我遇到的问题是我需要知道它是否被签出，不一定是值。有没有办法做到这一点？我在想我需要使用一些javascript，但不确定如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:11:07.600

您可以创建一个具有相同名称但值为 的隐藏输入`"off"`。确保它位于文档中的复选框之前。例子：

```
<input type="hidden" name="something" value="off" />
<input type="checkbox" name="something" /> 
```

这将提交以下内容：

```
// if the box is unchecked:
something=off
// if the box is checked:
something=off&something=on 
```

由于重复的名称会导致覆盖以前的值（数组除外），因此您将始终得到`$_POST['something']`（`"on"`选中）或`"off"`（未选中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:08:56.367

您需要检查是否`$_POST`设置了索引

```
if (isset($_POST['myCheckBox'])) { ... } 
```

# facebook-like - 社交插件 [ Like Button ] 自定义配色方案

> ID：11691602
> 
> 赞同：0
> 
> 时间：2012-07-27T16:08:10.487
> 
> 标签：facebook-like, facebook-likebox

有什么方法可以将当前的配色方案更改为自定义 Like Button？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:16:40.853

不可以。Like 按钮无法更改，更改其外观的方式违反 Facebook 条款。

# c# - SqlCeSyncScopeProvisioning 过滤器不起作用

> ID：11691605
> 
> 赞同：0
> 
> 时间：2012-07-27T16:08:21.730
> 
> 标签：c#, sql-server-ce, sync, provisioning, microsoft-sync-framework

我试图在同一个表上提供一些范围来同步表中的不同数据集。配置运行良好，没有错误。但是，当我进行同步时，对 SyncOrchestrator.Synchronize() 的调用会超时。

当我只同步一个范围时，似乎所有数据都在同步，而不仅仅是范围过滤器定义的数据。

这是我的其中一个范围的配置代码。每个作用域都在单独的线程中运行，以便它们同时同步。

服务器配置：

```
var remoteLogVariableScopeDescription = new DbSyncScopeDescription(string.Format("{0}_{1}", DatabaseID, scopeName));
remoteLogVariableScopeDescription.Tables.Add(SqlCeSyncDescriptionBuilder.GetDescriptionForTable("TableName", localConnection));
var remoteDatabaseConfiguration = new SqlSyncScopeProvisioning(remoteConnection, remoteLogVariableScopeDescription);
remoteDatabaseConfiguration.ObjectPrefix = string.Format("Sync_{0}", scopeName);
remoteDatabaseConfiguration.Tables["TableName"].AddFilterColumn("Time);
remoteDatabaseConfiguration.Tables["TableName"].FilterClause = [side].Time >= DATEADD(minute, -1, GETDATE());
remoteDatabaseConfiguration.SetCreateTableDefault(DbSyncCreationOption.Skip);
remoteDatabaseConfiguration.SetUseBulkProceduresDefault(true);
remoteDatabaseConfiguration.CommandTimeout = 30;
remoteDatabaseConfiguration.Apply() 
```

本地供应：

```
DbSyncScopeDescription localFrequentScopeDescription = SqlSyncDescriptionBuilder.GetDescriptionForScope(string.Format("{0}_{1}", DatabaseID, scopeName), string.Format("Sync_{0}", scopeName), remoteConnection);
var localDatabaseConfiguration = new SqlCeSyncScopeProvisioning(localConnection, localFrequentScopeDescription);
localDatabaseConfiguration.ObjectPrefix = string.Format("Sync_{0}", scopeName);
localDatabaseConfiguration.SetCreateTableDefault(DbSyncCreationOption.Skip);
localDatabaseConfiguration.Apply(); 
```

我的问题是：我提供的范围过滤器是否可行？您可以同时在同一张表上运行多个范围吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:33:53.860

SQL Sever Compact Edition 不支持筛选器。您在那里所做的任何更改都将同步回服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:10:57.933

正如 Scott 提到的，SqlCeSyncProvider 不支持过滤。

同样，即使您将客户端更改为 SQL Express/Server，GetDescriptionForScope 在返回范围配置时也不包括过滤器配置。

此外，您可以针对同一范围定义多个，但要注意重叠的范围，其中行可能属于多个范围。这可能会导致同步循环。

例如（假设双向同步）

范围 1 过滤器包括第 1 行

范围 2 过滤器还包括第 1 行

您更新服务器上的第 1 行

范围 1 同步并将第 1 行应用于您的客户端

范围 2 同步并检测范围 1 下载和应用的第 1 行（范围 2 不知道范围 1）

所以范围 2 上传并将第 1 行应用到服务器（服务器中的相同行更改返回到服务器）

范围 1 同步并再次从服务器获取第 1 行，依此类推...

# jquery - jQuery流沙问题

> ID：11691606
> 
> 赞同：1
> 
> 时间：2012-07-27T14:27:41.707
> 
> 标签：jquery, plugins, filter, quicksand

所以我在我的新 wordpress 网站上配置[流沙插件](http://razorjack.net/quicksand/)，以便在我的投资组合部分使用它。

我配置了一切，它正在工作。你可以在这里看到它：

[http://www.tipoos.com/new/?page_id=43](http://www.tipoos.com/new/?page_id=43)

**问题：**

我的网站上运行了更多的 jQuery 脚本。例如，将鼠标悬停在图像上时查看投资组合项目缩略图。当我第一次运行页面时，悬停图像正在工作，但是每当我触发排序流沙功能来过滤我的项目时，缩略图上的悬停图像效果就会停止工作，这真的很烦人..

我想这可能与 jQuery 冲突或其他原因有关，但无论我尝试什么都没有用——在任何地方都找不到答案......

这是我的 JavaScript 文件，其中包含站点中的所有脚本，包括流沙设置：[https ://dl.dropbox.com/u/4405634/functions.js](https://dl.dropbox.com/u/4405634/functions.js)

如果有人可以提供帮助，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:46:09.997

您的问题与 Wordpress 无关，而与 jQuery 无关。将 jQuery 作为独立库处理的论坛和问答网站是更好的查看场所。

您还需要学习如何将[Firebug](http://getfirebug.com/)与 Firefox 一起使用，或者使用[Chrome](https://developers.google.com/chrome-developer-tools/docs/overview)、[Safari](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/Safari_Developer_Guide/2SafariDeveloperTools/SafariDeveloperTools.html)或[IE](http://msdn.microsoft.com/en-us/library/ie/gg589507(v=vs.85).aspx)中的开发人员工具来查看您的站点上加载了哪些 JS 和 jQuery 库并解决 JS 冲突错误。

您可能还需要查看[Function Reference/wp enqueue script « WordPress Codex](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)，了解如何在学习 jQuery 时在 WordPress 中加载 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:24:33.193

正如我在对您的问题的评论中提到的那样，您的问题是元素在动画时被克隆，因此它们正在丢失绑定到它们的事件。

[解决方案在他们的文档中](http://razorjack.net/quicksand/docs-and-demos.html#integration)。我相信您也可以通过 jQuery 的[on](http://api.jquery.com/on/)绑定事件来解决它，它取代了`live`将事件绑定到将来可能存在的对象的方法。

# algorithm - 图像的镜像效果，为什么需要按位反转？

> ID：11691608
> 
> 赞同：0
> 
> 时间：2012-07-27T16:08:26.290
> 
> 标签：algorithm

当您尝试“镜像”图像时，从左到右的样式，您可以像这样交换像素：

```
for i:= 0 to width / 2
  for j:= 0 to height
    swap pixel[i][j] with pixel[width-i][j] 
```

但是为什么我们需要对每个 8 位像素（在 C 中存储为 char）进行按位操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:19:43.223

假设一个像素实际上不是一个像素并且代表屏幕中多个可见点，您需要反转这些位，因为您想从左到右读取它们以便完全反转图像。否则，每个较小的结构都会“从右到左”显示，而整个图形“从左到右”显示，结果不是完全反转。

# wif - ClaimTypes.DateOfBirth 应该使用什么格式？

> ID：11691609
> 
> 赞同：2
> 
> 时间：2012-07-27T16:08:31.067
> 
> 标签：wif

我在任何地方都找不到指定的。我*确实*找到了一个带有“5/5/1955”的 Microsoft 示例。是 d/m/y 还是 y/m/d。

我猜我可能应该使用 ISO 8601，但很高兴知道这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:23:45.700

根据[OASIS 规范](http://docs.oasis-open.org/imi/identity/v1.0/os/identity-1.0-spec-os.pdf)，与 URI [http://schemas.xmlsoap.org/ws/2005/05/identity/claims/dateofbirth](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/dateofbirth)关联的类型是`xs:date`，所以它应该是一个普通的 XML 日期格式......这确实是 ISO -8601，根据[XML Schema Part 2](http://www.w3.org/TR/xmlschema-2/#date)。（这谈到了可以表示的日期的时区，这让我觉得有点奇怪，但没关系。）

# javascript - 在 JSP 上显示存储在字符串中的图像

> ID：11691611
> 
> 赞同：0
> 
> 时间：2012-07-27T16:08:37.063
> 
> 标签：javascript, jsp, jstl, jsp-tags, struts-1

我在我的 JSP 上使用下面提到的代码：

```
<%
List eCCategoryList = form.getCategoryList();

//Map<String, String> catNameImgMap = (Map<String, String>) session.getAttribute("catNameImgMap");

Map catNameImgMap = (Map) form.getBlogIdNameMap();

String strImage = "";

Iterator it = eCCategoryList.iterator();

ECircularCategory category = null;

int counter = 0;

while (it.hasNext()) {
    category = (ECircularCategory) it.next();
    strImage = (String) catNameImgMap.get(category.getName());

%> 
```

`strImage`包含我需要在我的 JSP 上显示的图像。我尝试显示如下图像：

```
<img src="<%=strImage%>" alt="Test Image 1" width="270" height="190"/> 
```

但是上面的代码不起作用，只显示了一个简单的空格，没有别的，我需要在我的 JSP 页面上显示图像，每个图像都存储在`strImage`字符串中，我该怎么做？

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:14:43.350

您可以使用 JSTL 标签：

```
<img src="<c:url value="<%=strImage%>"/> alt="Test Image 1" width="270" height="190"/> 
```

这是关于 JSTL的一个很好的[链接。](http://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm)

希望能帮助到你...

# ruby-on-rails - 如何在 new.js.erb 中使用局部变量 f 渲染 RAILS 部分？

> ID：11691612
> 
> 赞同：8
> 
> 时间：2012-07-27T16:08:45.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有一种方法可以在 js.erb 中像这样在 rails 中使用 :remote => true 来呈现 erb 页面：

```
$('#invoice_against_lease').html('$("<%= j render(:file => 'invoice/new.html.erb') %>")'); 
```

我们有一个像这样的部分 _customer_quote_record：

```
 <%= f.input :quote_id, :label => 'Quote#：', :collection => quotes_for_invoice(@customer), :include_blank => true %>
   <%= f.hidden_field :_destroy %> 
```

部分在 html.erb 中呈现，并传递局部变量构建器：

```
<%= f.simple_fields_for :invoice_items do |builder| %>
  <%= render 'customer_quote_record', :f => builder %>
<% end %> 
```

尝试了以下代码：

```
$('#invoice_against_lease').html('$("<%= j render(:file => 'customer_lease_record', :f => f) %>")'); 
```

错误是`"ActionView::Template::Error (undefined local variable or method`f'..."`

有没有办法在 js.erb 中渲染上面的部分？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T18:38:26.620

尝试以下操作：

```
$('#invoice_against_lease').html('$("<%= j render(:partial => 'customer_lease_record', :locals => {:f => f}) %>")'); 
```

这当然假设`f`在您进行此调用的任何地方都定义了它。如果不同，只需更改`:locals => {:f => f}`为`:locals => {:f => "YOUR_VARIALBE"}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-20T23:39:58.537

另一种方法：

`<%=j render "invoice/new", f: f %>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-10T12:47:14.863

看看这个，我找到了解决办法：

在 js.rjs 文件中，我重新生成了 form_for 和 fields_for 帮助器，并将 fields_for 构造函数保存在实例变量`@builder`中，然后将其传递给部分（`locals: {f: @builder...`）

js.rjs：

```
<%
  @expense=Expense.new
  new_expense_detail=@expense.expense_details.build
  form_for(@expense) do |f| 
    f.fields_for(:expense_details,new_expense_detail,:child_index=>@child_index) do |builder| 
      @builder=builder # <<--- New line compared js.rjs
    end
  end
%>

$("#cost_center_group_<%=@child_index%>").html("<%= escape_javascript(render(partial: 'select_costcenter', locals: {f: @builder,child_index: @child_index}))%>"); 
```

# c# - 无法使用 writefile() 与 USB HID 设备成功通信

> ID：11691619
> 
> 赞同：1
> 
> 时间：2012-07-27T16:09:05.417
> 
> 标签：c#, usb, hid

我对 C# 和 windows 编程相当陌生，我正在尝试在 windows xp pc 上的 USB HID 设备和用 c# 编写的应用程序之间建立通信。我已经成功获得了设备路径，并使用它在设备上建立了一个有效的句柄：

```
IntPtr drive = CreateFile(devicePath, GENERIC_READ | GENERIC_WRITE,
               FILE_SHARE_READ | FILE_SHARE_WRITE, IntPtr.Zero,
               OPEN_EXISTING, FILE_FLAG_DELETE_ON_CLOSE, IntPtr.Zero); 
```

这被证明是一个有效的句柄，在测试时会产生一个正整数。创建句柄后，我调用“HidD_GetPreparsedData”和“HidP_GetCaps”，它们会产生一个先前导入的结构（HIDP_CAPS），该结构存储与所连接设备相关的特定数据。接下来，我尝试调用 writefile()：

```
bool success = WriteFile(drive, ref outputReportBuffer, 
               caps.OutputReportByteLength, ref numberOfBytesWritten, 
               IntPtr.Zero); 
```

drive：设备的句柄

outputReportBuffer：要写入的字节数组 [65]

caps.OutputReportByteLength：要写入的字节数，caps是HIDP_CAPS的struct

numberOfBytesWritten：硬编码为 0

IntPtr.Zero：我读过的所有内容都像我所做的那样传递了最后一个参数。在“writefile”的形式参数中，最后一个参数被列为“IntPtr ipOverlapped”，但我无法弄清楚那是什么，除了它应该作为某种形式的 0 传递

WriteFile 是如何导入的：

```
[DllImport("kernel32.dll", SetLastError = true)]
public static extern bool WriteFile(IntPtr hFile, 
ref byte[] lpBuffer, 
uint nNumberOfBytesToWrite,
ref uint lpNumberOfBytesWritten, 
IntPtr ipOverlapped); 
```

当 writefile 被执行时，它什么也不做。我没有收到任何错误，但是在测试时，它显示通信从未建立并且不成功。如果有人可以分享任何知识或提供任何资源来帮助我，我将不胜感激。感谢您的阅读。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:45:45.773

删除声明`ref`中的。`WriteFile`

虽然[http://www.pinvoke.net/](http://www.pinvoke.net/)是 P/Invoke 声明的一个很好的资源，但它是一个 wiki 风格的网站，并且许多声明是错误的（通常它们无法在 x64 机器上工作）。

# ruby - RDoc 文档中的复数

> ID：11691622
> 
> 赞同：1
> 
> 时间：2012-07-27T16:09:19.893
> 
> 标签：ruby, documentation, rdoc

根据[RDoc 文档](http://rdoc.sourceforge.net/doc/)，类名、源文件名和任何包含下划线或前面有哈希字符的方法名都自动被超链接。但是[RDoc 中类名复数的链接](https://github.com/rdoc/rdoc/issues/10)不起作用。因此，在像“A Post has many Comments”这样的句子中，`Post`是链接的，但`Comment`不是。似乎有这样的解决方法

```
A Post has many Comments[class_link:Comment.html]. 
```

但这有点冗长。有没有更好的方法来链接到复数名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:20:55.560

也可以用..

```
Comments[link:Comment.html] 
```

..或者，根据[RDoc 文档](http://rdoc.rubyforge.org/RDoc/Markup.html)

```
Comments[rdoc-ref:Comment] 
```

RDoc 链接的一般格式是`label[url]`或`{label}[url]`，请参阅[RDoc 文档](http://rdoc.rubyforge.org/RDoc/Markup.html)。不幸的是，简单的形式`Comments[Comment]`不起作用，这类似于 MediaWiki 的内部链接语法，人们会在其中写`[[Comment|Comments]]`.

# java - 如何从 HTML 和 javascript 制作 GWT 小部件？

> ID：11691624
> 
> 赞同：2
> 
> 时间：2012-07-27T16:09:21.407
> 
> 标签：java, gwt

我需要使用 HTML 和 javascript 代码制作自定义 GWT 小部件。应该在小部件上调用 javascript 代码，但 javascript 应该接收小部件 DOM 组件作为参数。

此外，小部件的 HTML 必须直接依赖于提供给小部件构造函数的参数。

这样做的“惯用”方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:38:52.547

这很简单。您可以从扩展`Widget`类开始。

要创建 DOM 表示，您需要使用`Document.get()`（或其他旧 api 取决于您喜欢什么）。要调用外部 javascript，您需要使用[JSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)。

此外，您还必须重写`onDetach`和`onAttach`方法，因此您可以在将元素添加到 dom 时通知外部 JS，以及何时外部 JS 应该执行一些清理（如果需要）。

示例代码：

```
public class MyWidget extends Widget{

     public MyWidget(String params) {
         Document document = Document.get();
         DivElement divElement = document.createDiv();
         divElement.setInnerHtml(params);
         setElement(divElement); //important, widget needs to know it's root element
     }

     private static native void doJsMagic(Element element)/*-{ //notifies js about element
         $wnd.doSomething(element);
     }-*/;

     private static native void undoJsMagic(Element element)/*-{ 
        //notifies js that it should do some cleanup (if needed)
        //since it is unaware of GWT widget lifecycle
        $wnd.undoSomething(element)

     }-*/;

     @Override
     public void onAttach() {
        super.onAttach();
        doJsMagic(getElement());
     }

     @Override
     public void onDetach() {
        super.onDetach();
        undoJsMagic(getElement());
     }

} 
```

# iphone - 在uitableview中表示必填字段

> ID：11691626
> 
> 赞同：0
> 
> 时间：2012-07-27T16:09:28.330
> 
> 标签：iphone, ios, ipad, uitableview

我有一个表格视图，其中几乎没有用于数据输入的文本字段和弹出框。我想将其中一些表示为强制性的。我无法弄清楚如何讨厌星号。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:50:56.163

我认为您可以使用自定义 UITableViewCell。这将允许您将几乎任何您想要的东西放入一个单元格中。

这是[从哪里开始](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)。在 SO 和网络上也有大量的例子。

# android - Android - admob 和 SurfaceView 问题

> ID：11691634
> 
> 赞同：0
> 
> 时间：2012-07-27T16:10:01.703
> 
> 标签：android, admob, surfaceview

我正在尝试开始使用 admob，但它似乎比我想象的要难。我只是想编写一个小测试应用程序，在其中我会在表面视图上绘制一些东西并添加一个 admob 示例。

在我的主要活动中，我在 onCreate 方法中执行以下操作：

AndroidFastRenderView 是我对 SurfaceView 的实现。

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        boolean isLandscape = getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;

        int frameBufferWidth = isLandscape ? 480 : 320;
        int frameBufferHeight = isLandscape ? 270 : 430;

        Bitmap frameBuffer = Bitmap.createBitmap(frameBufferWidth,
                frameBufferHeight, Config.RGB_565);

        renderView = new AndroidFastRenderView(this, frameBuffer);
        graphics = new AndroidGraphics(getAssets(), frameBuffer);

        adView = new AdView(this, AdSize.BANNER, "XXX");
        adView.setVisibility(View.VISIBLE);

        FrameLayout layout = new FrameLayout(this);
        FrameLayout.LayoutParams gameParams = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.WRAP_CONTENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);

        FrameLayout.LayoutParams adsParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);

        layout.addView(adView, 0, adsParams);

        layout.addView(renderView, 1, gameParams);
        setContentView(layout);

        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        adView.loadAd(adRequest); 
```

当我这样做时，整个屏幕都充满了 AndroidFastRenderView。但是，当我不添加 AndroidFastRenderView 时，会出现广告。所以我认为问题在于，也许 AndroidFastRenderView 绘制在我的广告上方（也许我对帧缓冲区的大小做错了）或者 AndroidFastRenderView “窃取”了广告的空间。

我希望你明白我的问题是什么，任何人都可以帮助我解决我的问题

你的，卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:21:20.733

您是否尝试过使用 RelativeLayout 而不是 FrameLayout？

```
final int adId = 0x12345;
adView.setId(adId);
RelativeLayout layout = new RelativeLayout(this);

RelativeLayout.LayoutParams adParams =
    new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
                                    RelativeLayout.LayoutParams.WRAP_CONTENT);
adParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
RelativeLayout.LayoutParams gameParams =
    new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
                                    RelativeLayout.LayoutParams.WRAP_CONTENT);
gameParams.addRule(RelativeLayout.BELOW, adId);
layout.addView(adView, adParams);
layout.addView(renderView, gameParams);
setContentView(layout); 
```

# java - 使用 TCP 处理多个线程

> ID：11691636
> 
> 赞同：0
> 
> 时间：2012-07-27T16:10:12.483
> 
> 标签：java, sockets, tcp, network-programming, chat

我正在尝试实现一个聊天应用程序，并在设计上选择使用 TCP 或 UDP 进行对等方之间的消息交换。我想使用 TCP，但遇到以下问题。

问题场景：对等点 A 正在侦听一个众所周知的端口（例如 5555）。当对等体 B 想向对等体 A 发送消息时，它连接到 A 上的端口 5555。对等体 A 接受该连接并启动一个新线程来处理与对等体 B 的通信，以便其他对等体（例如对等体 C）能够连接到对等体 A 的 5555 端口。现在的问题是它不是请求/响应协议，所以我很困惑，如果对等点 A 出于任何原因没有回复对等点 B，那么 B 发送的后续消息将被传递到对等点 A 的 5555 端口？并且对等体 A 将为收到的每条消息创建单独的线程？

使用 UDP 可能会解决这个问题，我不必创建单独的线程来与每个对等方通信，每个人都可以将消息发送到同一个众所周知的端口。但我想使用 TCP 来保证消息将被传递。任何想法什么是处理这个问题的好方法，并且只使用一个线程与一个对等方通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:22:55.700

您描述的问题不会发生，因为 TCP 是一个“连接”协议，这基本上意味着两个对等方必须在其他任何事情发生之前协商通信。之后，TCP 控制数据包的顺序以确保它们以正确的顺序到达目的地。顺便说一句，TCP 代表传输控制协议，因此它非常重视确保您所描述的事情不会发生。UDP根本不是这种情况。

一旦您`ServerSocket`接受了来自客户端的连接`Socket`，协商就已经完成，并且 TCP 流专用于该通信。

创建新的唯一方法是您的客户端通过新的 Socket 发出另一个连接。

但是说服自己的最好方法是在你的应用程序中添加日志并自己尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:23:30.440

您正在混淆*侦听*或服务器、套接字和已*连接*的套接字。

一旦在侦听端接受 TCP 连接，两方之间就有一个全新的全双工套接字，因此它们可以交换数据。监听套接字的唯一目的是接受连接，没有应用程序数据流过这些连接。

您可以将新连接的套接字交给线程，但您当然不必 - 您可以在单个线程中处理许多非阻塞套接字，我相信 Java NIO 包正是为此而创建的。

# asp.net - 在 sql 数据库中保存图像 url 或保存图像文件？

> ID：11691637
> 
> 赞同：0
> 
> 时间：2012-07-27T16:10:12.573
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, database-design

我们可以用 2 种方式保存图像

1.  在服务器中上传图像并将图像 url 保存在数据库中。
2.  将图像直接保存到数据库中

哪一个更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T16:13:45.490

Microsoft Research 有一篇非常好的论文，名为[To Blob 或 Not To Blob](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)。

他们经过大量的性能测试和分析后得出的结论是：

*   如果您的图片或文档的大小通常低于 256K，则将它们存储在数据库`VARBINARY`列中会更有效

*   如果您的图片或文档的大小通常超过 1 MB，则将它们存储在文件系统中会更有效（并且使用 SQL Server 2008 的`FILESTREAM`属性，它们仍处于事务控制之下并且是数据库的一部分）

*   在这两者之间，根据您的使用情况，这有点折腾

如果您决定将图片放入 SQL Server 表中，我强烈建议您使用单独的表来存储这些图片 - 不要将员工照片存储在员工表中 - 将它们保存在单独的表中。这样一来，Employee 表可以保持精简、平均和非常高效，假设您并不总是需要选择员工照片作为查询的一部分。

对于文件组，请查看[文件和文件组架构](http://msdn.microsoft.com/en-us/library/ms179316.aspx)以获得介绍。基本上，您可以从一开始就为大型数据结构创建带有单独文件组的数据库，或者稍后添加一个额外的文件组。我们称之为“LARGE_DATA”。

现在，每当您要创建需要存储`VARCHAR(MAX)`或`VARBINARY(MAX)`列的新表时，您都可以为大数据指定此文件组：

```
 CREATE TABLE dbo.YourTable
     (....... define the fields here ......)
     ON Data                   -- the basic "Data" filegroup for the regular data
     TEXTIMAGE_ON LARGE_DATA   -- the filegroup for large chunks of data 
```

查看有关文件组的 MSDN 介绍，并尝试使用它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:13:42.090

像许多问题一样，答案是“视情况而定”。像 SharePoint 这样的系统使用选项 2。许多工单跟踪系统（我确信 Trac 会这样做）使用选项 1。

还要考虑任何（潜在的）限制。随着容量的增加，您是否会受到数据库大小的限制？这与托管数据库和应用程序特别相关，在这些应用程序中，增加数据库的大小比增加存储分配要昂贵得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:25:57.020

将图像保存到服务器将更好地用于网站，因为这些是您网站的附带问题，例如每个客户的品牌图像 - 如果您正在设置下一个 Flickr，显然答案会有所不同:)。您需要设置一台服务器作为文件服务器，共享 /uploaded_images 目录（或任何您命名的目录），并设置一个定义上传图像的基本 url 的应用程序变量。为什么更好？成本。文件服务器是非常便宜的商品硬件。您可以使用非常便宜的商品（甚至只是消费级）备份软件来备份文件内容。如果您的文件服务器出现故障并且有人丢失了一天上传的图像？谁在乎。他们只是再次上传它们。我们的数据库服务器是一个运行在 SSD SAN 上的企业集群。我们的备份和传输日志通过昂贵的带宽传送到远程站点，甚至在磁带上保存 x 周期。我们将它用于需要 RDBMS 的 ACID（原子性、一致性、隔离性、持久性）优势的所有数据。我们不会将其用于公司徽标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T23:31:26.547

将它们存储在数据库中，除非您有充分的理由不这样做。

将它们存储在文件系统中是过早的优化。

使用数据库，您可以获得参考完整性，您可以一次备份所有内容，集成安全性等。

SQL Anti-Patterns 一书将在文件系统中存储文件称为反模式。

# jquery - 订阅和 AJAX 数据发送后敲除最大调用堆栈

> ID：11691640
> 
> 赞同：1
> 
> 时间：2012-07-27T16:10:21.887
> 
> 标签：jquery, knockout.js, knockout-mapping-plugin

我很难调试我创建的这个无限循环。在 Knockout.js 中，我使用`data-bind="event:{change:save_data}"`标记绑定了几个元素的更改事件。然后在`save_data`函数上，我让它运行一个 ajax PUT 到服务器。

```
var ViewModel = function(config) {
    var self = this;

// initial call to mapping to create the object properties
    ko.mapping.fromJS(config, {}, self);

    self.save_data = function() {
    $('#ajax-console').append('<p>Saving...</p>');          
       $.ajax({
          url: '/echo/json/',
          data: ko.toJS(self),
          type:'put',
          success: function(data) {

            },
          dataType: 'json'
        });
    }

}; 
```

运行它并更改输入或复选框会在 Chrome 中给我以下错误：`RangeError: Maximum call stack size exceeded`.

我究竟做错了什么？显然，AJAX 调用中的某些内容正在更改该字段的值之一。一种解决方法是检测 AJAX 调用是否已经在路由中并且不调用它，但我想了解发生了什么。

这是我的小提琴：

破例：http: [//jsfiddle.net/btV9t/10/](http://jsfiddle.net/btV9t/10/)

工作示例：http: [//jsfiddle.net/btV9t/8/](http://jsfiddle.net/btV9t/8/)

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:28:05.680

因此，当您使用映射插件时，您也需要将其用于`toJS`调用，因为它创建的视图模型与标准不兼容`ko.toJS`。

您的数据线需要如下所示：

```
data: ko.mapping.toJS(self), 
```

这是[工作小提琴](http://jsfiddle.net/tyrsius/btV9t/14/)

# android - ContentValues 条目正在转换为 NULL

> ID：11691642
> 
> 赞同：3
> 
> 时间：2012-07-27T16:10:29.687
> 
> 标签：android, sqlite

我`ContentValues`在程序中输入数据库时​​遇到了一些麻烦，事实证明这很难理解。我有一个`ContentValues`对象，我添加了大约 50 个左右的条目，一切都很好，除了一个存储为“null”的条目。根据 LogCat 输出，我知道进入 的数据`ContentValues`不为空。

**相关代码：**

```
if (database.isOpen() && !database.isReadOnly()) { //Check that the database is open and not read only
    Log.d(TAG, "Entry string: " + data.getEntryString());
    Log.d(TAG, "Key: " + Helper.COLUMN_ENTRY_STRING);

    ContentValues values = new ContentValues(); //Create a new ContentValues object to store key value pairs for insertion
    //Various values.put() calls...
    values.put(Helper.COLUMN_ENTRY_STRING, data.getEntryString()); //Should put the String "Something"

    Log.d(TAG, "Entry string from values: " + values.getAsString(Helper.COLUMN_ENTRY_STRING));
    //Proceed with database insert here
} 
```

LogCat 回应：

```
07-27 08:58:47.909: D/Handler(18020): Entry string: Something 
07-27 08:58:47.909: D/Handler(18020): Key: Entry_String 
07-27 08:58:47.909: D/Handler(18020): Entry string from values: null 
```

我已经检查了几次代码，但我找不到任何解释。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-08T07:57:08.527

我也有这个问题。

我的情况是因为我`ContentValue`在单元测试中使用过。`ContentValue`是一个android组件，它应该在android环境下使用，但我在没有android实现的单元测试中使用它。因此，当我调用`contentValue.put(key, value)`and时`contentValue.get(key)`，由于实现为空，什么也没发生。

我不确定您是在单元测试中运行代码还是在没有 android 实现的情况下运行代码。也许我的解决方案可以给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:09:15.913

好吧，这仍然困扰着我。所以在我的脑海里，我不断地回到`put(String, String)`. 你能通过尝试以下方法让我放心吗？

```
if (database.isOpen() && !database.isReadOnly()) {
    Log.d(TAG, "Entry string: " + data.getEntryString());
    Log.d(TAG, "Key: " + Helper.COLUMN_ENTRY_STRING);

    String entryKey = Helper.COLUMN_ENTRY_STRING;
    String entryValue = data.getEntryString();
    ContentValues values = new ContentValues();
    values.put(entryKey, entryValue);

    Log.d(TAG, "Entry string from values: " + values.getAsString(Helper.COLUMN_ENTRY_STRING));
} 
```

# php - PHP不发送出站邮件

> ID：11691648
> 
> 赞同：1
> 
> 时间：2012-07-27T16:10:49.627
> 
> 标签：php, sendmail

我正在使用 sendmail 包和 php，当我尝试在 PHP 中使用 mail 函数时，它返回 true，但没有发送任何内容。

php配置

```
; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
sendmail_path =/usr/sbin/sendmail -t -i 
```

.php 文件

```
error_reporting(E_ALL|E_STRICT);
ini_set('display_errors', 1);
trace(mail('jamie@domain.tld','Testing','test.')); 
```

邮件日志显示这个

```
mail() on [/var/www/misc/mail.php:5]: To: jamie@domain.tld -- Headers: 
```

通过 CLI 运行 sendmail，如下所示：

```
echo -e "To: jamie@domain.tld\nSubject: Test\nTest\n" | sendmail -bm -t -v 
```

返回“发件人正常”、“收件人正常”

任何人都知道可能导致 php 不发送电子邮件的任何事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T16:14:10.353

PHP 与邮件传递无关。它的工作以将电子邮件移交给指定的 SMTP 代理/服务器开始和结束。如果`mail()`不返回布尔值 FALSE，则 PHP 的工作已经成功，并且不在图片中。

检查您的 SMTP 服务器的日志以了解在移交完成后电子邮件会发生什么情况。邮件很可能被拒绝/灰名单/垃圾邮件过滤到遗忘，因为 PHP 的`mail()`真正打击。

考虑切换到[Swiftmailer](http://swiftmailer.org)或[PHPMailer](http://phpmailer.worxware.com)，这两者都比 mail() 提供了更好的 PHP<->SMTP 交互诊断。

从命令行手动测试意义不大：您的 shell 环境与您的脚本可能在其中执行的网络服务器环境非常不同 - 苹果和橘子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:15:07.927

这可能会产生误导。PHP 将返回 true，因为就*它*而言，它已经完成了它的职责。但它不能保证 SMTP 服务器会接受该请求。

当这种情况发生在我身上一次时，我发现我的主机已经实施了一项新规定，即所有脚本邮件的标题中必须包含一个“发件人”地址，该地址必须是与主机帐户关联的有效地址。

可能值得研究这种可能性。

# asp.net - GetListItems“请求失败，HTTP 状态 401：未经授权”

> ID：11691650
> 
> 赞同：0
> 
> 时间：2012-07-27T16:10:55.880
> 
> 标签：asp.net, sharepoint-2010, impersonation

我在启用了 ssl 的 sharepoint 2010 站点上使用 lists.asmx 启用了未启用 ssl 的 asp.net Web 应用程序。我已将lists.asmx 添加为名为“myref”的Web 参考。

我正在使用的代码如下：

**Web.config 片段**

```
 <system.web>
        <identity impersonate="true"/>
        <authentication mode="Windows"/>
        ..........
    </system.web> 
```

**aspx 代码**

```
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.IO" %>
<%@ Import Namespace="System.Net" %>
<%@ Import Namespace="System.xml" %>
<%@ Import Namespace="myref" %>
<%
Dim xmlDoc As XmlDocument = New System.Xml.XmlDocument()
Dim myQuery As XmlNode = xmlDoc.CreateNode(XmlNodeType.Element, "Query","") 
myQuery.InnerXml = "<Where><Eq><FieldRef Name='_ModerationStatus' /><Value Type='ModStat'>2</Value></Eq></Where>"
Dim myViewFields As XmlNode = xmlDoc.CreateNode(XmlNodeType.Element, "ViewFields","") 
myViewFields.InnerXml ="<FieldRef Name='_Status' /><FieldRef Name='owshiddenversion' />"
Dim myQueryOptions as XmlNode= xmlDoc.CreateNode(XmlNodeType.Element, "QueryOptions","") 
myQueryOptions.InnerXml = "<Folder>my list</Folder>"

Dim mylist As new myref.Lists()
mylist.UseDefaultCredentials = true
mylist.PreAuthenticate = True

Dim ndLists As XmlNode = mylist.GetListItems("my list","",myQuery,myViewFields,100,myQueryOptions,"")
Response.Write(ndLists.outerxml)
%> 
```

如果我使用上面的我得到错误：

```
Line 514:        [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://schemas.microsoft.com/sharepoint/soap/GetListItems", RequestNamespace="http://schemas.microsoft.com/sharepoint/soap/", ResponseNamespace="http://schemas.microsoft.com/sharepoint/soap/", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)] 
Line 515:        public System.Xml.XmlNode GetListItems(string listName, string viewName, System.Xml.XmlNode query, System.Xml.XmlNode viewFields, string rowLimit, System.Xml.XmlNode queryOptions, string webID) { 
Line 516:            object[] results = this.Invoke("GetListItems", new object[] { 
Line 517:            listName, 
Line 518:            viewName, 
```

如果我使用：

```
Dim cache As CredentialCache = New CredentialCache()
cache.Add(New Uri(mylist.Url), "Negotiate", New NetworkCredential("userid", "password", "domain")) 
```

代替

```
mylist.UseDefaultCredentials = true 
```

它工作正常。问题是我想传递访问 asp.net 站点的用户的登录详细信息，而不是硬编码的用户 ID。

如果我直接登录到 asp.net 站点服务器并通过 localhost/sitename/pagename.aspx 直接访问，那么在我的本地计算机上的浏览器上不起作用的相同代码可以使事情复杂化。

检查 Web 服务器上的应用程序事件日志会显示以下网页未显示的额外信息：

> ```
> Thread account name: NT AUTHORITY\NETWORK SERVICE 
> Is impersonating: False 
> ```

在我看来，这似乎表明它试图使用网络服务连接到 Web 服务，而不是登录的用户详细信息，除非您直接登录到服务器。

*   asp.net 应用程序启用了 Windows 身份验证（非匿名）
*   需要将 windows 身份验证传递给 sharepoint Web 服务
*   无法通过本地计算机运行的代码在直接登录到 Web 服务器时可以正常工作
*   在 web.config 文件中启用了模拟（尽管如果您将其关闭，您不会收到任何错误，但您也不会从 sharepoint 获得任何项目）
*   web.config 文件中的身份验证模式在 windows 中设置
*   如果我输出**WindowsIdentity.GetCurrent.name**并禁用**getlistitems**调用，我可以看到它在通过服务器或我的本地计算机访问时肯定有我的详细信息。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:15:17.297

kerberos 委托解决了这个问题。在“委托”选项卡下的 Active Directory 中，选择了**信任**此**计算机以委托给任何服务（仅限 Kerberos）**选项。

在那之后它花了几个小时才真正开始工作（我认为它应该在大约 30 秒内，但由于某种原因需要更长的时间）。

# javascript - 我可以简化许多 $.fn。用 javascript / jQuery 调用？

> ID：11691653
> 
> 赞同：1
> 
> 时间：2012-07-27T16:11:01.560
> 
> 标签：javascript, jquery, datatables

我正在使用数据表，建议将以下内容添加到我的代码中：

```
$.fn.dataTableExt.oStdClasses.sWrapper = 'no-margin last-child';
$.fn.dataTableExt.oStdClasses.sInfo = 'message no-margin';
$.fn.dataTableExt.oStdClasses.sLength = 'float-left';
$.fn.dataTableExt.oStdClasses.sFilter = 'float-right';
$.fn.dataTableExt.oStdClasses.sPaging = 'sub-hover paging_';
$.fn.dataTableExt.oStdClasses.sPagePrevEnabled = 'control-prev';
$.fn.dataTableExt.oStdClasses.sPagePrevDisabled = 'control-prev disabled';
$.fn.dataTableExt.oStdClasses.sPageNextEnabled = 'control-next';
$.fn.dataTableExt.oStdClasses.sPageNextDisabled = 'control-next disabled';
$.fn.dataTableExt.oStdClasses.sPageFirst = 'control-first';
$.fn.dataTableExt.oStdClasses.sPagePrevious = 'control-prev';
$.fn.dataTableExt.oStdClasses.sPageNext = 'control-next';
$.fn.dataTableExt.oStdClasses.sPageLast = 'control-last'; 
```

我不明白这种语法。有人可以解释它在做什么。还有一种方法可以组合所有这些行。前 30 列都是一样的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T16:14:44.043

这段代码正在添加属性`$.fn.dataTableExt`（我相信你可以看到）。这些属性可能用作扩展的配置字符串，作为[DRY](https://en.wikipedia.org/wiki/Don't_repeat_yourself)模式的一部分，因此当需要更改常用值时，不必在十几个地方进行更改。

使用[$.extend](http://api.jquery.com/jQuery.extend/)可以改进此代码：

```
$.extend($.fn.dataTableExt.oStdClasses, {
    sWrapper: 'no-margin last-child',
    sInfo: 'message no-margin',
    sLength: 'float-left',
    ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:14:32.523

不完全是，但您可以将实例保存在变量中，然后用更简单的基础引用它们：

```
var someObject = $.fn.dataTableExt.oStdClasses;
someObject.sWrapper = 'no-margin last-child';
someObject.sInfo = 'message no-margin';
someObject.sLength = 'float-left';
someObject.sFilter = 'float-right';
someObject.sPaging = 'sub-hover paging_';
someObject.sPagePrevEnabled = 'control-prev';
someObject.sPagePrevDisabled = 'control-prev disabled';
someObject.sPageNextEnabled = 'control-next';
someObject.sPageNextDisabled = 'control-next disabled';
someObject.sPageFirst = 'control-first';
someObject.sPagePrevious = 'control-prev';
someObject.sPageNext = 'control-next';
someObject.sPageLast = 'control-last'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T16:15:48.567

至少你可以这样做：

```
$.extend($.fn.dataTableExt.oStdClasses, {

  sWrapper: 'val',
  sInfo: 'val',
  ...

}); 
```

# java - Snakeyaml 加载到 JavaBean 并且如果在地图中找不到属性

> ID：11691659
> 
> 赞同：2
> 
> 时间：2012-07-27T16:11:20.097
> 
> 标签：java, yaml, snakeyaml

我想知道是否可以让snakeyaml 将yaml 文档加载到javabean 中，如果它无法找到文档中条目的匹配项作为javabean 属性，它将把它放入javabean 中的通用映射中。 ..

前任。

```
public class Person {
  private String firstName;
  private String lastName;
  private Map<String, Object> anythingElse;

  //Getters and setters...
} 
```

如果我加载一个看起来像这样的文档：

```
firstName: joe
lastName: smith
age: 30 
```

由于年龄不是 bean 中的属性，我希望将 {age, 30} 添加到anythingElse 地图中。

可能的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:29:26.423

不，这是不可能的。

根据我的经验和尝试，它不起作用。如果您想将文件加载到对象中，那么该对象类中的**所有**属性都必须具有 getter 和 setter（IE 类必须是 JavaBean，请参阅 Wikipedia）。

我使用了您的 Person 类（有关正确的 JavaBeanClass，请参见 wiki 页面）和此代码：[http ://codepaste.net/dbtzqb](http://codepaste.net/dbtzqb)

我的错误消息是：“*第 3 行，第 4 列：无法在类：Person 上找到属性 'age'* ”，从而证明这个简单的程序不能具有“意外”属性。这是我快速而简单的结论。我没有广泛尝试，所以它可能是可能的，但我不知道这样的方式（你必须绕过阅读方法和 JavaBean）。我使用过 YamlBeans ( [https://code.google.com/p/yamlbeans/](https://code.google.com/p/yamlbeans/) )，所以它有点不同，但我发现它更容易工作；]

希望它有所帮助！

**编辑**

很抱歉碰到这个，迟到总比没有好！直到我发布答案后我才看到发布日期。但希望它可以帮助其他寻求帮助的人：3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T15:57:12.340

我没有使用 SnakeYaml 尝试过以下（半笨拙的 hack），但我使用 YamlBeans 让它工作：

基本上，这个想法是定义一个扩展 java.util.Map 的具体实现之一的类。然后定义选择不同值的 getter 和返回其他所有内容的通用 getter：

```
public class Person extends HashMap<String, Object>
{
    public String getFirstName()
    {
        return (String)this.get("firstName");
    }

    public String getLastName()
    {
        return (String)this.get("lastName");
    }

    public Map<String, Object> getExtensions()
    {
        Map<String, Object> retVal = (Map<String, Object>)this.clone();

        retVal.remove("firstName");
        retVal.remove("lastName");

        return retVal;
    }
} 
```

我不确定 SnakeYaml 或 YamlBeans 如何优先考虑您在反省此类时看到的不同类型信息，但 YamlBeans（至少）满足于将信息反序列化到此类中，就好像它是任何其他 Map 一样，并且似乎没有被加法吸气剂弄糊涂了（即不会在“getExtensions”上绊倒）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-25T06:11:10.460

有可能的：

```
import org.yaml.snakeyaml.Yaml;
import org.yaml.snakeyaml.representer.Representer;

public class YamlReader {
    public static <T> T readYaml(InputStream is, Class<T> clazz){
        Representer representer = new Representer();
        // Set null for missing values in the yaml
        representer.getPropertyUtils().setSkipMissingProperties(true);

        Yaml yaml = new Yaml(representer);
        T data = yaml.loadAs(is, clazz);

        return data;
    }
} 
```

# c# - 为什么我会收到此异常？

> ID：11691661
> 
> 赞同：0
> 
> 时间：2012-07-27T16:11:29.843
> 
> 标签：c#, .net, asp.net-mvc-3

我有一个旨在管理 www.example.com 上的小公司的应用程序。我们还有一个演示站点，潜在客户可以在 www.example.com/demo 上查看该系统的工作原理。example.com 网站运行完美，但是当尝试通过演示系统读取/写入位于 www.example.com/demo/fileHere 的文件时，我不断收到此错误：

```
[SecurityException: Request for the permission of type System.Security.Permissions.FileIOPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.] 
```

我尝试将 app.config 应用设置更改为：

```
<appSettings file="./demo" /> 
```

...但这并没有解决它。

**任何解决方案或帮助将不胜感激。** 我试图避免为演示站点提供自己的域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:13:52.870

您收到该异常是因为您正在执行的程序集无权在所需位置进行读/写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:20:14.627

乔恩，

您是否尝试过更明确的语法，即：

```
<appSettings>
  <add key="file" value="http://www.example.com/demo/"/>
</appSettings> 
```

应该没有赔率，但值得一试。但是，我觉得在这种情况下，IIS 无法使用外部资源是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:56:31.620

通过将这行代码更改为：

```
string path = Path.Combine(@"/MyFile/", ViewBag.Name + "/" + file.Name); 
```

到：

```
string path = Path.Combine("~/MyFile/", ViewBag.Name + "/" + file.Name); 
```

我可能是错的，但似乎子域在使用 @"/MyFile/ 时试图从父域打开文件。通过将其替换为 "~/MyFile/" 应用程序指向正确的目录，不再抛出例外。

# sql-server - SQL Server 2008 R2：如何仅对用户“sa”禁用远程访问？

> ID：11691665
> 
> 赞同：3
> 
> 时间：2012-07-27T16:11:55.090
> 
> 标签：sql-server, remote-access

标题说得很好：我可以从 Internet 访问我的 SQL Server，并且我的用户配置了强密码，只能访问他们各自的数据库。

但是我每天都会收到 10000 次以上用户“sa”的登录攻击。

我不需要“sa”远程访问，如何禁用它，只有它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:47:40.250

如果使用 SQL 身份验证重命名 sa 帐户并禁用它，Microsoft 和行业状态的安全实践。确实没有理由将该帐户显式用于应用程序或管理员帐户。大多数公司在涉及安全性时都需要可追溯性，而在 SQL Server 中使用 sa 帐户不允许这样做。

即使您禁用或重命名它，您仍然会看到针对该帐户的攻击，它与领土一起出现。Oracle 在其产品中的默认登录名也会发生同样的事情。脚本小子和其他黑客程序只是被编程来检查这些类型的帐户。

更好的选择可能是向您的网络团队或 ISP 报告网络端的攻击来自何处。他们将能够更好地处理该问题，以阻止通过网络层的流量。只是我的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:23:37.417

据我所知，SQL Server 允许您禁用单个 sql server 登录，但这意味着登录通常被禁用，无论用户尝试连接的机器是什么。所以你要么一般禁用“sa”，要么给登录一个非常强大的密码。您也许可以通过使用登录触发器来模拟所需的行为，该触发器检查用户从哪里连接，如果用户是“sa”，但我认为这对你来说不是一个可行的解决方案，因为你似乎想要得到摆脱来自攻击的许多连接尝试。在任何情况下，您都可能希望从服务器角色“sysadmin”中删除“sa”，以防止可能成功的登录尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:20:08.877

也许[这](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=151103)可能会有所帮助：结合[这个](https://serverfault.com/questions/126511/disable-remote-access-for-one-user-database-in-sql-server-2008)：

# c# - 修改线程中使用的数据

> ID：11691670
> 
> 赞同：0
> 
> 时间：2012-07-27T16:12:16.923
> 
> 标签：c#, multithreading, .net-4.0

好的，所以我的问题是我必须捕获删除和重命名事件（我可以这样做）。并修改线程中的数据以处理此问题，以便删除已删除的文件并更改重命名文件的数据。这是系统的伪代码，只是为了了解它的外观。每当我删除时，系统都会抛出一个异常，但它没有被捕获，所以我一直很难弄清楚如何解决或重写解决方案。另一部分是我将同时运行多个经理，但我想如果我不能让一个工作......那么这是徒劳的。

```
Main
{
    public void Run()
    {
        List<FileInfo> someData = new List<FileInfo>();
        FileWatcher fileWatcher = new FileWatcher(@"C:\USers\user1\Documents");

        fileWatcher.NotifyFilter = NotifyFilter.Last
        fileWatcher.Deleted += new FileSystemEventHandler(OnDelete);
        fileWatcher.EnableRaisingEvents = true;

        Manager aManager = new Manager(someData);
        Thread aThread = new Thread(new ThreadStart(aManager.ExecuteTask));
        aThread.Start();
    }

    static void OnDelete(object sender, Event e)
    {
        aManager.Pause();
        aManager.RemoveData(e.FileInfo);
        aManager.Resume();
    }
}

Manager
{
    ExecuteTask()
    {
        while(someData.Count > 0)
        {
            while (paused) ; // <- This is something I am trying to add
            PreformSubTask(someData[0]);
        }
    }

    PreformSubTask()
    {
        lock (_locker)
        {
            Worker someWorker = new Worker(someData[0]);
            Thread someThread = new Thread(new ThreadStart(worker.ExecuteTask()));
        }

        worker.Join(someSetOfTime);

        lock(_locker)
        {
            someData.RemoveAt(0);
        }
    }

    Pause()
    {
        lock (_locker)
        {
            if (!paused) paused = true;
        }
    }

    Resume
    {
        lock (_locker)
        {
            if (paused) paused = false;
        }
    }

    RemoveData(FileInfo toRemove)
    {
        someData.RemoveAll(sd => sd.Equals(someData));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:15:33.193

您应该使用*线程同步*来保护多个线程之间共享的数据不被损坏。查看`lock`关键字或`Mutex`类。

但是，我真的建议不要重写任务队列/调度并使用现成的东西。

简单地在 OnDelete 处理程序中进行处理有什么问题？

# php - CakePHP/PHP 和 MySQL 数据库模式的重复事件插件

> ID：11691672
> 
> 赞同：0
> 
> 时间：2012-07-27T16:12:22.717
> 
> 标签：php, mysql, cakephp, schema, recurrence

# 介绍

您好，我花了很多时间研究为即将到来的项目中的重复事件找到合适的解决方案。我以前处理过事件和重复事件，但我从未找到或开发出我喜欢的解决方案。所以我正在考虑为 CakePHP 构建一个插件来处理复发。

我有两个用例，我想将此插件/类用于：

1.  重复事件 - 日历或列表视图
2.  定期付款 - 有时我不想使用网关定期付款，或者我想通知即将付款等

我相信还有很多其他用例，但这是我最常遇到的两个，实际上数据库模式和基本源代码应该是相似的，如果不能在各种用例之间完全重用的话，无论如何。

所以我需要帮助的是确定用于重复事件的适当数据库模式。我有两个想法，我认为每个都有其优点和缺点，但需要确定灵活性、可维护性和性能的最佳整体方法。

因此，在任一解决方案中，我都需要能够添加、编辑、删除和列出事件。我希望能够通过编辑或删除事件发生的所有日期或特定日期的选项来编辑重复事件。我想有类似谷歌日历的重复规则/选项。每天，每周，每月，每年等选项。

# 第一个想法

一张名为 events 的表来存储重复发生的事件。在这种方法中，我需要解析重复选项并基本上循环并根据重复选项创建一个单独的事件。例如，如果我想创建一个名为“每周会议”的事件，开始日期为 2012 年 1 月 1 日，结束日期为 2012 年 12 月 31 日，每周一发生，我将在事件表中创建 52 条记录。我认为这种方法更难管理编辑和删除，并且保存事件需要更长的时间，但列出数据应该像查询日期范围一样简单。如果您必须更改该事件的重复发生，这可能是一场噩梦。

```
CREATE TABLE `events` (                                                               
      `id` int(10) unsigned NOT NULL AUTO_INCREMENT,                                      
      `parent_id` int(10) unsigned NOT NULL,                                              
      `start_date` datetime NOT NULL,                                                     
      `end_date` datetime NOT NULL,                                                       
      `title` varchar(150) CHARACTER SET latin1 NOT NULL,                                 
      `description` text CHARACTER SET latin1,                                            
      `created` datetime NOT NULL,                                                        
      `modified` datetime NOT NULL,                                                       
      PRIMARY KEY (`id`)                                                                  
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

# 第二个想法

有多个表来处理重复。这将消除编辑和删除问题，保存也应该更快，但我认为查询数据以获取事件会很复杂（认为 mysql 查询会很复杂）而且速度更慢。我应该提到，这个系统将读取远远超过写入事件。但我想要一个可以重复使用的通用解决方案。我还可以使用缓存来改善阅读，所以这不是一个大问题。使用上面的示例而不是 52 个条目，我们将在事件表中只有一个。

不确定确切的架构有什么想法吗？

提前感谢您的帮助和想法！想了解其他人如何处理重复发生的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:42:49.510

```
CREATE TABLE `events` (
    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `parent_id` int(10) unsigned NOT NULL,
    `title` varchar(150) CHARACTER SET latin1 NOT NULL,
    `description` text CHARACTER SET latin1,
    /** Some fields about how the recurring is applied  **/
   `created` datetime NOT NULL,
   `modified` datetime NOT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `event_occurrences` (
    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `event_id` int(10) unsigned NOT NULL,
    `date` DATE NOT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

如果重复的详细信息、开始或结束字段没有更改，则不需要弄乱 event_occurrences。当修改这些细节中的任何一个`DELETE FROM event_occurrences WHERE event_id=?`，然后有一个方法会为给定的事件 id 生成 event_occurrences。相同的方法可用于创建和修改。

# java - 原子参考

> ID：11691673
> 
> 赞同：0
> 
> 时间：2012-07-27T16:12:35.833
> 
> 标签：java, concurrency, atomicreference

根据文档，我对 AtomicReference.compareAndSet() 方法有一些疑问，它说：

> 如果当前值 == 预期值，则自动将值设置为给定的更新值。

据我了解，`==`运算符正在比较两个对象的地址，如果是这样，它将如何在这样的示例中工作

```
private AtomicReference<AccessStatistics> stats =
    new AtomicReference<AccessStatistics>(new AccessStatistics(0, 0));
public void incrementPageCount(boolean wasError) {
    AccessStatistics prev, newValue;
    do {
        prev = stats.get();
        int noPages = prev.getNoPages() + 1;
        int noErrors = prev.getNoErrors;
        if (wasError) {
           noErrors++;
        }
        newValue = new AccessStatistics(noPages, noErrors);
    } while (!stats.compareAndSet(prev, newValue));
} 
```

在这段代码片段中，jvm 如何知道`AccessStatistics`要在`compareAndSet()`? 事实上，我只是想知道这整个策略是如何工作的，因为 java 根本不允许覆盖`==`？感谢您的任何评论！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:14:18.737

> jvm如何知道要在compareAndSet()中比较AccessStatistics的哪些字段？

它没有。它不是比较对象中的字段。它只是比较文档所说的对象的*引用。*这就是`AtomicReference`课堂的运作方式。[正如您在javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicReference.html#compareAndSet%28V,%20V%29)中提到的那样，它使用`==`而不是`equals()`方法。

> 如果当前值 == 预期值，则自动将值设置为给定的更新值。

所有的`Atomic*`类都有类似的功能。它允许您以原子方式设置值，同时确保另一个线程不会覆盖您的值。您必须指定当前对象引用以`compareAndSet(...)`确保按预期进行更新。

在您的代码片段中，它试图添加到不可变的访问统计对象。所以它获取当前值，添加到它，然后将新的统计信息存储到引用中。如果另一个线程在那段时间之间存储*了它的*统计信息，那么`compareAndSet`它将返回 false 并循环并再次尝试。这解决了竞争条件，而无需`synchronized`阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:14:17.877

JVM 根本不比较字段。它*只是*比较它是否是同一个引用，内存中的同一个指针，或者你想调用的任何东西。

# java - hibernate 和 oracle 序列 GenericGenerator 创建间隙

> ID：11691674
> 
> 赞同：2
> 
> 时间：2012-07-27T16:12:45.377
> 
> 标签：java, oracle, hibernate, spring-mvc, oracle11g

我已经将我的班级映射如下（省略了其他字段，因为只有 ID 很重要）：

```
@Entity
@Table(name = "MODEL_GROUP")
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
public class SettlementModelGroup implements Serializable
{

@Id
@GeneratedValue(generator = "MODEL_GROUP_SEQ", strategy = GenerationType.SEQUENCE)
@GenericGenerator(name = "MODEL_GROUP_SEQ",
        strategy = "sequence",
        parameters = @Parameter(name = "sequence", value = "SEQ_MODEL_GROUP_MODEL_GROUP_ID"))
@Column(name = "MODEL_GROUP_ID", nullable = false)
private Integer modelId;
} 
```

当我保存新对象时：

```
Integer modelGroupId = sessionFactory.getCurrentSession().save( modelGroup );
System.out.println( modelGroupId ); 
```

ID设置为例如`23`，但当我查看数据库时它实际上是`24`。这会导致很多问题，因为我稍后会使用此 ID。知道为什么会出现这种差距吗？

SQL 日志显示一切正常（我是这么认为的）：

```
Hibernate: 
 select
     SEQ_MODEL_GROUP_MODEL_GROUP_ID.nextval 
 from
     dual
Hibernate: 
 insert 
 into
     MODEL_GROUP
     (DOMAIN_ID, DESCRIPTION, NAME, PERIOD_TYPE_ID, MODEL_GROUP_TYPE_ID, STATUS_ID, OWNER_ID, MODEL_GROUP_ID) 
 values
     (?, ?, ?, ?, ?, ?, ?, ?) 
```

触发和序列：

```
CREATE SEQUENCE "SEQ_MODEL_GROUP_MODEL_GROUP_ID" 
  INCREMENT BY 1 
  START WITH 1 
  NOMAXVALUE 
  MINVALUE 1 
 NOCYCLE 
 NOCACHE 
 NOORDER
;

CREATE OR REPLACE TRIGGER "TRG_MODEL_GROUP_MODEL_GROUP_ID" 
BEFORE INSERT 
ON "MODEL_GROUP" 
FOR EACH ROW 
WHEN (NEW."MODEL_GROUP_ID" is NULL)
BEGIN 
    SELECT "SEQ_MODEL_GROUP_MODEL_GROUP_ID".NEXTVAL 
    INTO :NEW."MODEL_GROUP_ID" 
    FROM DUAL; 
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:21:03.670

显然，当 Hibernate 向数据库询问 ID 的 nextValue 时，它​​也会触发 Trigger。因此，当我询问 ID 时，我得到了数字`23`，但是当通过提交事务实际保存到数据库时，它又增加了，所以我得到了`24`. 解决方案在这里描述：

[用于从序列生成 id 的 Oracle 触发器的 HIbernate 问题](https://stackoverflow.com/questions/8002119/hibernate-issue-with-oracle-trigger-for-generating-id-from-a-sequence)

为了使其正常工作，我更改了触发器：

```
CREATE OR REPLACE TRIGGER "TRG_MODEL_GROUP_MODEL_GROUP_ID" 
BEFORE INSERT 
ON "MODEL_GROUP" 
FOR EACH ROW 
WHEN (NEW."MODEL_GROUP_ID" is NULL)
BEGIN 
    SELECT "SEQ_MODEL_GROUP_MODEL_GROUP_ID".NEXTVAL 
    INTO :NEW."MODEL_GROUP_ID" 
    FROM DUAL; 
END; 
```

# objective-c - 我应该使用 [autorelease] 吗？

> ID：11691675
> 
> 赞同：1
> 
> 时间：2012-07-27T16:12:51.200
> 
> 标签：objective-c, memory-management, retain, autorelease

我需要在我的应用程序中快速简单地解析一个 XML 文件。对我来说最好的解决方案似乎是类似于 XML-to-NSDictionary 转换器的东西，然后我可以更容易地挖掘它。

我选择使用这个小类：[http ://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)

但是，我对返回的内容`NSDictionary*`及其在内存中的状态感到困惑。类方法`dictionaryForXMLData`分配并初始化类。`objectWithData`然后关闭并执行繁重的工作`NSDictionary`，将返回给调用者的对象返回。

对我来说令人困惑的部分是`[reader release]`在返回之前（我知道这必须发生，因为`reader`创建的方式）。我的理解`NSDictionary`是所有对象也将被发送`release`消息，这意味着我们返回的对象不应该有保留计数。请注意，该对象是使用便捷方法创建的，并且仅在将其添加到堆栈时才获得保留计数。

如果 return 语句不是`return [rootDictionary autorelease]`. 我看到的问题是不知道什么时候`rootDictionary`会被释放，并且取决于 XML 文件的大小，它可能会阻塞内存？还是我全都错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:21:31.597

他们的做法是不正确的。返回的对象`objectWithData:`可能只是对内部保留的内容的引用`reader`。并且通过 release `reader`，你可能会释​​放`rootDictionary`你之前得到的。根据`XMLReader`类的内部工作，它们返回的东西可能会`objectWithData:`被保留和自动释放；但这是一个实现细节，你不能依赖它（加上 Cocoa 内存管理是本地的，所以你永远不应该关心其他函数的作用）。

正确的做法是保留`rootDictionary`你得到的，然后自动释放它（为了平衡保留，因为你必须在没有所有权的情况下归还它）。

```
+ (NSDictionary *)dictionaryForXMLData:(NSData *)data error:(NSError **)error
{
    XMLReader *reader = [[XMLReader alloc] initWithError:error];
    NSDictionary *rootDictionary = [[[reader objectWithData:data] retain] autorelease];
    [reader release];
    return rootDictionary;
} 
```

# jquery - .innerHTML 在 Internet Explorer 9 上显示表格内容的问题

> ID：11691678
> 
> 赞同：0
> 
> 时间：2012-07-27T16:13:12.570
> 
> 标签：jquery, internet-explorer, html-table, row, innerhtml

是的，关于在 IE 中将 .innerHTML 属性与表格一起使用的问题的另一个主题（在我的例子中是第 9 版，但我相信它与以前的相同）。在这里和谷歌搜索后，我发现了几个关于 innerHTML 和 IE 问题的主题，对我的代码进行了一些更改，但它仍然无法在 IE 中运行。和很多人一样，我首先用 Chrome 和 Firefox 测试了我的代码，它运行良好。然后我在IE上测试了一下，表格的内容没有显示出来。我通过搜索了解到 JQuery 的 .html() ( [http://api.jquery.com/html/](http://api.jquery.com/html/) ) 可能是一个解决方案，但到目前为止我的所有尝试都失败了。

基本上，我想要做的是随机化表格行的外观，当尝试显示其内容时问题就开始了。

我的代码在这里-> [http://jsfiddle.net/jaff/BB2CF/](http://jsfiddle.net/jaff/BB2CF/)如果有人可以帮助我，我将不胜感激！

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:21:46.350

尝试将 jQuerys 更改`.html()`为 jQuerys 的`.append()`. 它工作得更好。

[http://api.jquery.com/append/](http://api.jquery.com/append/)`

# python - 从python中的csv文件更新xml中的字典

> ID：11691679
> 
> 赞同：1
> 
> 时间：2012-07-27T16:13:16.833
> 
> 标签：python, xml, csv, key

好的，所以我有以下 .csv 文件，其中包含：

```
AAC=1|1|1,AAK=1|2|8 
```

我想将该文件写入以下 .xml 文件：

```
<html>
  <A>
    <B>
      <C>
        <D>
          <TYPE>
            <NUMBER>7297</NUMBER>
            <DATA />
          </TYPE>
          <TYPE>
            <NUMBER>7721</NUMBER>
            <DATA>AAC=7|3|8,ABC=1|3|5,DAK=5|1|3,FFK=33</DATA>
          </TYPE>
        </D>
      </C>
    </B>
  </A>
</html> 
```

我想专门将其写入 7721 下的部分，因此更新后的 .xml 文件如下所示：

```
<html>
  <A>
    <B>
      <C>
        <D>
          <TYPE>
            <NUMBER>7297</NUMBER>
            <DATA />
          </TYPE>
          <TYPE>
            <NUMBER>7721</NUMBER>
            <DATA>AAC=1|1|1,AAK=1|2|8,ABC=1|3|5,DAK=5|1|3,FFK=33</DATA>
          </TYPE>
        </D>
      </C>
    </B>
  </A>
</html> 
```

如您所见，如果 .csv 和 .xml 上都已存在该键，那么它只会更新 .xml 文件上的值，但如果 .csv 文件上的键和值都不存在于 . xml 文件，然后它将这些键和值添加到 .xml 文件中。

到目前为止我的代码：

```
element = etree.fromstring(xmlData)

# Find all the TYPE with NUMBER=7721 and DATA
optype_nodes = element.xpath("//TYPE[NUMBER='7721' and DATA]")

for t in optype_nodes:
    d = t.find('DATA')
    d.text = 'csvdata'
print etree.tostring(element) 
```

刚结束导入所有 .csv 内容并完全替换 .xml 内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:50:57.503

首先，让我们编写一个函数，将您的一个字符串（来自 csv 或 xml）转换为字典：

```
def string_to_dict(string):
    # Split the string on commas
    list_of_entries = string.split(',')
    # Each of these entries needs to be split on '='
    # We'll use a list comprehension
    list_of_split_entries = map(lambda e: e.split('='), list_of_entries)
    # Now we have a list of (key, value) pairs.  We can pass this
    # to the dict() function to get a dictionary out of this, and 
    # that's what we want to return
    return dict(list_of_split_entries) 
```

现在我们要获取 csv 数据和 xml 数据的字典：

```
csv_dict = string_to_dict(csv_data)
# csv_dict = {'AAK': '1|2|8', 'AAC': '1|1|1'}
xml_dict = string_to_dict(d.text)
# xml_dict = {'ABC': '1|3|5', 'FFK': '33', 'AAC': '7|3|8', 'DAK': '5|1|3'} 
```

使用[更新](http://docs.python.org/library/stdtypes.html#mapping-types-dict)函数，我们可以将 csv_dict 中的值添加到 xml_dict，覆盖它们相同的地方：

```
xml_dict.update(csv_dict)
# xml_dict = {'ABC': '1|3|5', 'FFK': '33', 'AAC': '1|1|1', 'AAK': '1|2|8', 'DAK': '5|1|3'} 
```

现在我们需要`xml_dict`回到一个字符串。执行此操作的简单方法是：

```
# Let's get a list of key=value strings
list_of_items = ['%s=%s' % (k, v) for k, v in xml_dict.iteritems()]
# Now join those items together
new_xml_text = ','.join(list_of_items)
d.text = new_xml_text 
```

如果你想让它们保持排序，你可以这样做：

```
d.text = ','.join('%s=%s' % (k, xml_dict[k]) for k in sorted(xml_dict.keys())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:38:45.913

我不确定这对您是否可行，这意味着：如果您绑定到问题中包含的 xml 文件结构。如果您可以自由选择结构，您可以利用 XML 并像这样存储数据：

```
<TYPE>
   <NUMBER>7297</NUMBER>
   <DATA />
</TYPE>
<TYPE>
  <NUMBER>7721</NUMBER>
  <DATA>
    <AAC>1|1|1</AAC>
    <AAK>1|2|8</AAK>
    <ABC>1|3|5</ABC>
    <DAK>5|1|3</DAK>
  <DATA>
</TYPE> 
```

这样，您可以更轻松地更新特定值并通过 xpath 访问它们。要为 xml 结构准备检索到的 csvStr，您可以使用 split()：

```
lst = csvStr.split(',')
for dataStr in lst:
    data = dataStr.split('=')
    #data[0]: var name, data[1]: var value 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:47:06.083

所以，想更新`d.text`。一种方法是转换为字典并更新，然后写回 d.text。当您将其写回时，请确保您拥有正确的 csv 订单。我看是字母表。确保是这种情况。因为我们正在转换为字典然后更新，所以我们冒着改变顺序的风险。

```
def get_csv_dict(csv_line):

    return dict([(k,v) for k, v in map(lambda x: x.split('='), csv_line)])

contents = get_csv_dict(d.text)
required_contents = get_csv_dict(csvdata)
contents.update(required_contents) 
```

然后做

```
>>> temp = []
>>> for key in sorted(contents.keys()):
...     temp.append(key + '=' + contents[key])
... 
>>> d.text = ",".join(temp) 
```

你会发现`d.text`你想要的更新。

# java - 使用 JTable 出现不希望的拖放行为

> ID：11691680
> 
> 赞同：2
> 
> 时间：2012-07-27T16:13:20.903
> 
> 标签：java, swing, jtable, drag-and-drop

我正在尝试向我的应用程序添加拖放功能，其中拖动事件的发起者是`JTable`. 我目前正在`JTable`通过调用来使用内置的拖动支持[`setDragEnabled(true)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#setDragEnabled%28boolean%29)。

我面临的问题是，要开始拖动操作，必须先单击表格的一行，然后松开鼠标；只有**第二次**鼠标按下（以及所有后续的鼠标按下）才会生成拖动事件。即使`JTable`失去焦点也会发生这种情况 - 即，一旦执行了第一次左键单击操作，拖放就可以完美运行，**直到我换入新的`TableModel`**. 安装新模型后，需要在表格上单击鼠标左键，然后才能再次开始拖动。

阅读 API 文档`setDragEnabled(boolean)`的含义是这是 L&F 的责任，因此我可能无能为力来解决这个问题。有没有人有什么建议？我正在使用合金 L&F，但不愿意改变它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:10:57.367

我发现了一个 hacky 解决方案，即在按下鼠标时将 a 添加到r 的方法`MouseListener`中：`JTable``TransferHandle``exportAsDrag`

```
 final JTable actionTbl = new JTable();
    actionTbl.addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent evt) {
            // Need to explicitly start a drag operation when the mouse is pressed.
            // Otherwise drags are only started *after* the user has clicked once
            // on the JTable (this could be down to the L&F not doing the right thing).
            actionTbl.getTransferHandler().exportAsDrag(actionTbl, evt, TransferHandler.COPY);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:29:38.423

引用该`setDragEnabled`方法的javadoc

> 启用自动拖动处理后，只要用户在项目（单选模式）或选择（其他选择模式）上按下鼠标按钮，大多数外观（包括 BasicLookAndFeel 的子类）就会开始拖放操作，并且然后将鼠标移动几个像素。

如果我没看错的话，当你使用单选模式时，你应该会得到想要的行为。

如果您需要将该行为与多项选择相结合，您可以选择手动处理桌子上传入的鼠标事件，并在 mouse_down 上调整选择，然后将鼠标事件委托给`JTable`. 所以在伪代码中：

```
protected void processEvent(AWTEvent e) {
  if ( isMouseDownEvent( e ) ){
     adjustSelection( e );
  }
  super.processEvent( e );
} 
```

注意：我没有测试过这个。它仅基于我在 javadoc 中阅读的内容，并且可能会产生一些不需要的副作用，因为它`JTable`本身仍会处理事件并对其做出反应

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T15:53:51.773

Adamski 的解决方案效果很好，但我必须`TransferHandler.COPY`在最后一行更改`TransferHandler.MOVE`为：

```
final JTable actionTbl = new JTable();
actionTbl.addMouseListener(new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent evt) {
        actionTbl.getTransferHandler().exportAsDrag(actionTbl, evt, TransferHandler.MOVE);
    }
}); 
```

# android - Android 连接到云服务器上的 servlet

> ID：11691683
> 
> 赞同：0
> 
> 时间：2012-07-27T16:13:42.960
> 
> 标签：android, servlets, openshift

我在 openshift redhat 服务器上设置了我的服务器和 servlet。我有一个需要使用这些 servlet 的 android 应用程序。

通常在 localhost 上，android 中的 ipaddress 看起来像这样

`http://10.0.2.2:8080/SRD/`

但现在我希望它连接到云服务器，所以我尝试了：

`http://xxx-caffeinepowered.rhcloud.com:8080/SRD/`

但这不起作用。地址应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:11:38.850

只需从您的网址中删除 8080 即可。我们通过端口 80 重定向所有 http 流量

# android - Android PhoneGap 和 CSS translate3d

> ID：11691685
> 
> 赞同：1
> 
> 时间：2012-07-27T16:13:45.923
> 
> 标签：android, css, cordova, iscroll4

我正在尝试将 -webkit-transform: translate3d(0,0,0) 应用于 Android PhoneGap 应用程序中的图像。我正在使用 iScroll4 对图像进行缩放。完全相同的 CSS 在 iOS 上效果很好，但很明显，Android webview 没有正确地将其应用于图像（图像仍然是块状的，并且根本不能很好地缩放）。

奇怪的是，如果我在 Android 浏览器（不在 PhoneGap 中）打开相同的文件，它工作正常。Android 2 和 4 会发生这种情况。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:43:39.570

用于`-webkit-transform:translate(x,y)`改变位置和`-webkit-transform:scale(x,y)`改变大小， translate3D(0,0,0) 更关心硬件加速。

# automake - 如何将 Makefile.am 中“include”指令的效果延迟到 make（避免 Automake 看到“include”）？

> ID：11691687
> 
> 赞同：2
> 
> 时间：2012-07-27T16:13:52.717
> 
> 标签：automake

我的`Makefile.am`包含一个文件（带有各种定义的变量），例如：

```
include make.config

... 
```

问题是这个文件又是由一个工具（即`config.generator.sh`）基于一些输入文件（即`input.dat`）生成的。直接和**错误**的想法是添加一个规则来生成`make.config`：

```
make.config : input.dat
    config.generator.sh input.dat > make.config

include make.config

... 
```

尽管此内容在`automake`没有`automake`. 该`make.config`文件`automake`在我什至有机会执行之前就被包含`make`（并且由于文件尚未生成而失败）：

```
automake: cannot open < make.config: No such file or directory 
```

**有没有办法将`include`指令`make`的效果推迟到运行（可能通过使用另一个指令）？**

可能有一种方法可以在生成任何生成文件之前简单地运行任意命令（即[`AC_CONFIG_COMMANDS*`](http://www.gnu.org/software/autoconf/manual/autoconf-2.67/html_node/Configuration-Commands.html)）。但问题更复杂，因为`config.generator.sh`它应该使用在同一构建过程中又生成的可执行文件（因此存在逻辑上必须由来自同一项目的 makefile 管理的依赖链）。[文档只是确认了逻辑而没有提供替代方案](http://www.gnu.org/software/automake/manual/html_node/Include.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:47:12.277

Automake 的邮件列表中描述了该解决方案[**。**](http://lists.gnu.org/archive/html/automake/2002-01/msg00155.html)

`include`这个想法是在小型常规“包装器”中使用指令，`makefile`并将 Automake-generated 包含`Makefile`在其中（注意大写`M`）。因为`makefile`不是 Automake 模板，所以`include`按预期工作会触发不存在文件的构建。

注意：

*   默认情况下`make`，实用程序将首先搜索`makefile`（而不是搜索`Makefile`），从而使这种方法无缝工作。
*   仍然建议在内部指定所有规则`Makefile.am`并保持“包装器”`makefile`简单。不存在文件的规则自然会来自生成`Makefile`的反正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-27T17:50:30.963

今天将我的 OCaml 项目移动到 Autotools 时，我遇到了同样令人讨厌的问题。我的解决方案是使用`autoconf`'s 替换来解决`automake`。对于上面的示例，我将添加一个替换`configure.ac`：

```
AC_SUBST([include_make_config], ["include make.config"]) 
```

和 adjust ，用变量引用`Makefile.am`替换`include`指令：`autoconf`

```
make.config : input.dat
    config.generator.sh input.dat > make.config

@include_make_config@
... 
```

`automake`不触及`@include_make_config@`线，因此它被带到生成的`Makefile.in`. 接管时`autoconf`，它将变量替换`include make.config`为 final `Makefile`。

*注意：我将它与 OCaml 的`ocamldep`依赖生成器一起使用。*

# c++ - 关于指针 C++ 的误解

> ID：11691689
> 
> 赞同：0
> 
> 时间：2012-07-27T16:14:00.527
> 
> 标签：c++, pointers

看来我对指针有误解，

这是一个例子：（代码可能无法编译，在不同的 PC 上）

```
#include <iostream>

struct Debris{
    long big_data;
    //code
};

struct Explosion{
    Debris *db;
    //code
};

void test(){
    Debris *db = new Debris();
    db->big_data = 10000;

    Explosion *e1 = new Explosion();

    e1->db = db;

    std::cout << "db addr:" << db <<"db value:"<< ++db->big_data <<<="" "explosion's="" db="" addr:"="" e1-="">db << "explosion's db value:" << e1->db->big_data << std::endl;

    //why db and e1->db have different addresses?
    //but the e1->db->big_data is changed by ref.
} 
```

你能解释一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:52:59.873

当我修复`cout`表达式以便编译时，我看到：

```
db addr:0x1378010 
db value:10001 
explosion's=0x1378010 
explosion's db value:10000 
```

我假设您在问为什么值似乎不同，并且您认为在两种情况下都应该相同。正如人们所期望的那样，指针是相同的，因为没有任何东西会改变它们。

这是因为您在同一个表达式中同时修改和使用值，而没有任何东西可以对这些操作进行排序。这给了代码未定义的行为；您可以看到旧值或新值，或者可能会发生完全意想不到的事情。

如果你将它分成两个语句，那么第一个语句将在第二个语句之前排序，你会在每种情况下看到相同的值：

```
std::cout << "db addr:" << db <<" db value:"<< ++db->big_data;
std::cout << " explosion's=" << e1->db << " explosion's db value:" << e1->db->big_data << std::endl;

db addr:0x1720010 
db value:10001 
explosion's=0x1720010 
explosion's db value:10001 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T16:19:53.587

*您增加db*的事实说明了更改。++ 是运算符中的高优先级。如果您的意图是在使用值之前增加 big_data，请添加括号。

# javascript - 在没有框架的情况下从 JavaScript 中的字符串修剪换行符

> ID：11691699
> 
> 赞同：0
> 
> 时间：2012-07-27T16:14:38.927
> 
> 标签：javascript

> **可能重复：**
> [如何在 javascript 中修剪字符串？](http://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

在没有任何框架的情况下使用 JavaScript，您将如何修剪换行符？修剪由 PHP 定义，删除前导和结束换行符，同时保留第一个非空白字符之后的换行符，直到不超过最后一个非空白字符。

默认情况下，大多数人都想知道如何***删除前导/结束换行符以及空白空间，***尽管有些人可能希望保留空白空间，同时只修剪空白换行符。它通常还有助于查看两个工作示例以及当它们都为学习代码的人工作时它们之间的关系，所以我正在寻找修剪空白换行符*和*空白空间。

看看如何在保留空格的同时仅修剪前导/结束换行符（可能包含在主要答案中，也可能不包含在主要答案中）也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:20:13.337

我认为这有效：

```
string.replace(/^\s+|\s+$/g,""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:20:24.943

`trim`通常可以定义为`.replace(/^\s+|\s+$/g,'')`，但由于您只需要垂直空格，因此应该使用`.replace(/^[\r\n]+|[\r\n]+$/g,'')`.

# c# - 通过相对文件路径加载图像

> ID：11691703
> 
> 赞同：0
> 
> 时间：2012-07-27T16:14:44.357
> 
> 标签：c#, image, filepath

所以我有这个文件路径“/DataEntry/Image/RenderOriginalImage/3237319%40Research”，它将返回一个jpg，我需要将它加载到一个流中，这样我就可以使用二进制阅读器将它转换为一个字节[]。任何想法我将如何将该文件路径加载到流中？文件流不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:38:58.973

这里没有足够的信息来给你一个正确的答案。该文件可能在您的磁盘上，也可能不在您的磁盘上，并且可能或可能无法通过 URL 访问。这是一个很大的基础。

如果文件在您的磁盘上，您应该可以使用 Filestream 访问它。如果 Filestream 不起作用，那么您应该在您的问题中提供错误（最好是完整的异常）。

如果文件可以通过 URL 访问，那么您需要使用其他方法访问它。System.Net.Webclient 类通常是一个很好的起点。请注意，您需要给它一个完整的 URL，而不是相对 URL。因此，类似于“http://someserver.example.com/DataEntry/Image/RenderOriginalImage/3237319%40Research”

# c# - ILMerge 能否用于 InstallShield CustomActions 中的 DLL？

> ID：11691707
> 
> 赞同：1
> 
> 时间：2012-07-27T16:15:00.493
> 
> 标签：c#, installshield, custom-action, dotnetzip

我创建了一个依赖于 DOTNETZIP“Ionic.Zip.dll”的 C# dll。此自定义程序集将用作 InstallShield 自定义操作并输入到二进制表中。执行自定义操作时，我在 MSI 日志中收到以下错误信息。

行动 11:59:25：启动 CTSDBExtract2。MSI (s) (20:50) [11:59:25:513]：执行操作：CustomActionSchedule(Action=LaunchCTSDBExtract2,ActionType=1089,Source=BinaryData,Target=m1,) MSI (s) (20:08) [11:59:25:607]：调用远程自定义操作。DLL：C:\Windows\Installer\MSI5F58.tmp，入口点：m1 InstallShield：尝试通过 CLR 4 API 加载... InstallShield：获取元主机... InstallShield：枚举可用运行时... InstallShield：最高可用运行时： v4.0.30319 InstallShield：尝试使用最高运行时... InstallShield：使用最高版本运行时... **InstallShield：CustomActionData 未提供延迟操作请求的属性 MsiHiddenProperties InstallShield：从资源 4097 加载程序集 CTSDBExtract_Merged InstallShield：无法加载托管自定义操作程序集 CTSDBExtract_Merged：找不到资源 4096.4097**

有没有人见过这个，和/或知道这意味着什么以及如何解决它？如果我遗漏了您不确定的任何内容，请告诉我，我很乐意澄清。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:22:44.893

Google DTF 托管的自定义操作。这是一个来自 Microsoft 的开源项目，它将托管的自定义操作封装为非托管的，并且可以与 InstallShield 一起使用。它还具有用于压缩和自提取程序集引用和内容文件的内置功能。

# ios5 - 在外部显示器上显示屏幕

> ID：11691716
> 
> 赞同：0
> 
> 时间：2012-07-27T16:15:21.430
> 
> 标签：ios5, uistoryboard

我在 Github 上查看了一些示例，但所有示例都没有使用情节提要。

我试图在我的应用程序中使用该代码，但我在模拟器的外部设备上看到的只是黑屏。

我现在拥有的代码：

```
if([[UIScreen screens]count] > 1) {

    CGSize maxSize;
    UIScreenMode *maxScreenMode;

    for(int i = 0; i < [[[[UIScreen screens] objectAtIndex:1] availableModes]count]; i++)
    {
        UIScreenMode *current = [[[[UIScreen screens]objectAtIndex:1]availableModes]objectAtIndex:i];
        if(current.size.width > maxSize.width)
        {
            maxSize = current.size;
            maxScreenMode = current;
        }
    }
    UIScreen *externalScreen = [[UIScreen screens] objectAtIndex:1];
    externalScreen.currentMode = maxScreenMode;
    [self myScreenInit:externalScreen];
}

- (void) screenDidConnect:(NSNotification *)notification {
    [self myScreenInit:[notification object]];
}

- (void) myScreenInit:(UIScreen *)connectedScreen {
    CGRect frame = connectedScreen.bounds;
    UIWindow *window = [[UIWindow alloc] initWithFrame:frame];
    window.backgroundColor = [UIColor whiteColor];
    [window setScreen:connectedScreen];
    window.hidden = NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:44:29.750

如果您想看到的不仅仅是黑屏，您需要输入一些内容。一种选择是添加如下内容：

```
UIView *myCustomUIView = [[MyCustomUIView alloc] initWithFrame:frame];
[window addSubview:myCustomUIView]; 
```

然后在视图的 drawRect:(CGRect) 方法中绘制东西。

希望这可以帮助。

# jquery - 带有 JQuery 的 form.submit() 返回字符编码错误消息

> ID：11691717
> 
> 赞同：1
> 
> 时间：2012-07-27T16:15:23.147
> 
> 标签：jquery, html

我想用 jQuery 提交一个表单，但它不起作用。我在 Firebug 中收到这个奇怪的错误消息（德语，抱歉），并假设 html 中有一些奇怪的字符？

> Die Zeichenkodierung des Reintext-Dokuments wurde nicht deklariert。Das Dokument wrd in manchen Browser-Konfigurationen mit verstümmeltem Text dargestellt, wenn das Dokument Zeichen außerhalb des US-ASCII-Bereichs enthält。Die Zeichenkodierung der Seite muss im Transferprotokoll deklariert werden oder die Datei muss eine Byte-Order-Markierung als Kodierungssignatur verwenden。

* * *

谷歌翻译说：

未声明纯文本文档的字符编码。当文档包含 US-ASCII 范围之外的字符时，该文档在某些浏览器配置中显示为乱码。页面的编码必须在传输协议中声明，或者使用文件必须是字节顺序标记作为编码签名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:00:23.513

你显然有一个字符编码问题。尝试在允许您指定字符编码的编辑器中重新保存有问题的 HTML 文档。[以UTF-8](http://en.wikipedia.org/wiki/Utf-8)格式保存 HTML 文件以确保安全。

您还可以使用元标记指定 UTF-8 编码：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

或在 HTML5 中：

```
<meta charset="utf-8" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T07:31:13.547

I had same issue and after few hours of investigating I have noticed that the reason was same path for HTTP Handler and for template.

So basically you cannot register HTTP handler in httpHandlers section in your config:

```
<add verb="POST" path="myHandler.aspx" type="MyProject.HttpHandlers.MyHttpHandler"/> 
```

when you use some template named myHandler.aspx. That error was thrown after I have submitted form even that I haven't called in that place my handler.

# css - CSS webkit-scrollbar 和 safari

> ID：11691718
> 
> 赞同：2
> 
> 时间：2012-07-27T16:15:29.207
> 
> 标签：css, safari, webkit

我尝试使用 CSS 制作类似于 Google 的新滚动条的东西`::-webkit-scrollbar`。在 chrome 中一切正常，在 safari 中则不行。

我的 CSS 是

```
::-webkit-scrollbar{height:16px;overflow:visible;width:16px}
::-webkit-scrollbar-button{height:0;width:0}
::-webkit-scrollbar-track{background-clip:padding-box;box-shadow:inset 1px 0 0 #e6e6e6}
::-webkit-scrollbar-track:hover{background-color:#f3f3f3;box-shadow:inset 1px 0 0 #e6e6e6}
::-webkit-scrollbar-track:active{background-color:#f3f3f3;box-shadow:inset 1px 0 0 #dcdcdc,inset -1px 0 0 #eeeeee}
::-webkit-scrollbar-thumb{background-color:#cccccc;background-clip:padding-box;border:solid transparent;border-width:1px 1px 1px 0px;min-height:28px;padding:100px 0 0;box-shadow:inset 1px 1px 0 #e6e6e6,inset 0 -1px 0 #eeeeee}
::-webkit-scrollbar-thumb:hover{background-color:#999999;box-shadow:inset 1px 1px 1px #c0c0c0}
::-webkit-scrollbar-thumb:active{background-color:#808080;box-shadow:inset 1px 1px 3px #a6a6a6} 
```

我对我的问题做了一些截图：

这是 chrome，没关系：http: [//i.imgur.com/wQMP2.png](http://i.imgur.com/wQMP2.png)

当您尝试用鼠标滚动（不点击它）时，这是 safari：http: [//i.imgur.com/bFiWj.png](http://i.imgur.com/bFiWj.png)

当您通过用鼠标单击滚动条来使用滚动条时，滚动条会起作用，问题仅在于您使用触控板或滚轮时

（我在 Mac 上用 Safari 试过，在 Windows 上用 Safari 没试过）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-16T06:50:13.183

确保将以下属性设置为 auto，以便 webkit-scrollbar 在 IOS 中工作，

-webkit-overflow-scrolling：自动！重要；

!important 是必需的，仅当您覆盖某些预定义的库 CSS 时

否则，-webkit-overflow-scrolling：自动；

会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:54:53.387

Safari 6.0 解决了这个问题

这只是一个错误

# ruby-on-rails - 使用 Rspec 存根 File.open

> ID：11691722
> 
> 赞同：3
> 
> 时间：2012-07-27T16:15:49.360
> 
> 标签：ruby-on-rails, rspec, stubbing

我正在尝试存根 File.open 以测试我拥有的读取 CSV 文件的方法。

这是模型：

```
class BatchTask
  def import(filename)
    CSV.read(filename, :row_sep => "\r", :col_sep => ",")
  end
end 
```

这是规范代码：

```
let(:data) { "title\tsurname\tfirstname\rtitle2\tsurname2\tfirstname2\r"}
let(:result) {[["title","surname","firstname"],["title2","surname2","firstname2"]] }

it "should parse file contents and return a result" do
  File.stub(:open).with("file_name","rb") { StringIO.new(data) }
  person.import("file_name").should == result
end 
```

但是，当我尝试这样做时，我得到（stacktrace）：

```
Errno::ENOENT in 'BatchTask should parse file contents and return a result'
No such file or directory - file_name
/Users/me/app/models/batch_task.rb:4:in `import'
./spec/models/batch_task_spec.rb:10:

Finished in 0.006032 seconds 
```

我一直在用头撞这个，无法弄清楚我做错了什么。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T17:36:11.510

提供一个堆栈跟踪会很有帮助，尽管我会猜测它为什么会发生。另外，我相信您在这里的方法不好，我将详细说明我认为您应该如何测试。

简单地说，我认为`CSV.read`不使用`File.open`. 它可以使用`Kernel#open`或各种其他方式在 Ruby 中打开文件。`File.open`无论如何，您不应该像这样在测试中存根。

有一本很棒的书，叫做[“由测试指导的面向对象的软件增长”](http://www.growing-object-oriented-software.com/)，它有一个需求规则：

> 您控制的类/接口上的仅存根方法

原因很简单。当你在做测试替身（存根）时，主要原因是接口发现——你想弄清楚你的类的接口应该是什么样子，替身为你提供了简洁的反馈。还有一个次要原因 - 在某些情况下，存根外部库往往非常棘手（当库不是非常可存根时）。因此，您可以在此处采用几种不同的方法，我将一一列举：

1.  **您可以在集成中进行测试。**您可以在每个测试中创建文件并传递路径名（这很好）。
2.  **你可以分解你解析的方式。**与其将文件名传递给`CSV.read`，不如在通过 open 时找到一种方法`File`，然后在测试中将其存根。即，让您的代码打开文件而不是`CSV`. 这样你就可以轻松地存根
3.  **`CSV.read`取而代之的是存根。**这可能有点戏剧化，但本质上，您不是在测试代码，而是在测试`CSV`库。它应该已经有自己的测试，无论如何你都不需要测试它。相反，您可以依赖于它的工作原理，并且只是对它的调用存根。

其中，我可能会选择第三个。我不喜欢在我的单元测试中测试依赖项。但是，如果您希望您的测试调用该代码，我建议找到一种方法来执行第二个选项（`CSV.new(file)`应该可以解决问题，但我没有时间调查），如果没有其他方法，最后回退到 #1。

# php - 检查 csv 中的标头并忽略 php 中的标头

> ID：11691723
> 
> 赞同：1
> 
> 时间：2012-07-27T16:15:59.457
> 
> 标签：php, file-upload, csv, fgetcsv

**我想检查 csv 文件是否包含标题并忽略标题。**

我必须检查第一列是否不是字符

csv 文件的格式为：avgTemperature、minTemperature、maxTemperature

> ```
> $f = fopen("./uploads/" .$filename, "r");
> $string = "avgTemperature";
> if (fgetcsv($f)==$string){  
>     // read the first line and ignore it
>     fgets($f);
> } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:19:01.630

我假设您的完整代码使用循环（`while`或`for`）。

因此，您有几个选择。

*   *总是*跳过第一行。
*   使用逻辑测试*标题行*然后跳过。

无论哪种方式，[`continue`](http://php.net/manual/en/control-structures.continue.php)都是关键。

**PHP伪代码：**

```
while (…) {
  if ($row == $header_row) {
    continue;
  }

  // data rows
} 
```

### 更新

在您的情况下，确定第一行是否为标题行的逻辑似乎是一个更好的解决方案。您可以使用以下内容进行测试。

```
if ($row[0] == 'avgTemperature') {
  // header row
} 
```

**注意：**这假设第一列数据是*avgTemperature*并且它的标题是*avgTemperature*。根据需要进行调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:25:17.570

根据您的评论，以及实际数据是温度（即数字数据）的想法，如果您确实有标题，那么它们将是文本字符串而不是数字。因此，您可以执行以下操作：

```
$f = fopen("./uploads/" .$filename, "r");

if(!($data = fgetcsv($f))) {
    return;    //most likely empty file
}

if(!is_numeric($data[0])) {
    //this is your header line - skip it - and read the next line
    $data = fgetcsv($f);
}

while($data) {
    //process a line of data
    ...
    //and read the next line
    $data = fgetcsv($f);
} 
```

**编辑：**最后一个循环的替代版本如下所示：

```
do {
    //process a line of data
    ...
}
while ($data = fgetcsv($f)); 
```

# caching - 如何打开/关闭 Thrust 算法的缓存 L1？

> ID：11691725
> 
> 赞同：0
> 
> 时间：2012-07-27T16:16:12.333
> 
> 标签：caching, gpu, thrust

如何在 cudaFuncCachePreferShared/cudaFuncCachePreferL1 之间切换推力算法，例如关闭排序？

PS 如果您知道，另外一个，如何在 MS VS 2010 中指定编译标志以关闭 cuda 中的 L1 缓存，我必须在哪里写（-Xptxas -dlcm=cg）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:24:17.103

您可以使用`cudaFuncSetCacheConfig`运行时功能来设置您对 L1 缓存或共享内存的偏好。

# r - R multinom() 函数在 100 次迭代后停止，是什么原因？

> ID：11691728
> 
> 赞同：9
> 
> 时间：2012-07-27T16:16:19.033
> 
> 标签：r, statistics, regression

我有相当多的数据，它有 80 列和大约 220, 000 行当我尝试使用`nnet`'s`multinom()`函数对无序多分类数据执行多项逻辑回归时，该函数似乎在 100 次迭代后停止：

```
# weights:  322 (270 variable)
initial  value 807521.728781 
iter  10 value 191523.940813
iter  20 value 163085.728004
iter  30 value 146262.378340
iter  40 value 139398.851395
iter  50 value 134606.101687
iter  60 value 133588.725646
iter  70 value 133253.102380
iter  80 value 133129.328709
iter  90 value 133098.717752
iter 100 value 133095.661773
final  value 133095.661773 
stopped after 100 iterations 
```

我也尝试使用`VGAM`'s`vglm()`但是它给了我以下错误：

```
Error in outer(X, Y, FUN, ...) : allocMatrix: too many elements specified 
```

一个可能的解释是，我的微型 macbook air 无法胜任这项工作，但我想知道，我还有哪些其他替代方法可以对我目前拥有的数据集执行多项逻辑回归？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T16:21:51.597

如果您查看 的文档`multinom()`，您会看到它包含一个`...`用于“nnet 的附加参数”的参数。

然后，查看 的文档[`nnet`](http://cran.r-project.org/web/packages/nnet/nnet.pdf)，您将看到以下用法：

```
nnet(x, y, weights, size, Wts, mask,
linout = FALSE, entropy = FALSE, softmax = FALSE,
censored = FALSE, skip = FALSE, rang = 0.7, decay = 0,
maxit = 100, Hess = FALSE, trace = TRUE, MaxNWts = 1000,
abstol = 1.0e-4, reltol = 1.0e-8, ...) 
```

您遇到的问题是默认`maxit`值为 100。尝试将`maxit=1000`（或任何您想要的）添加到您的`multinom()`参数中。我没有测试过这个（我需要你包括可重现的样本数据），但我认为它会成功。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T16:21:03.033

如果您查看它的帮助，`?multinom`它会说它调用`nnet`并且`...`是`nnet`. 这些参数之一是`maxit`默认为 100。将其作为参数添加到您的最大迭代次数中。

你也可以看看[这个](https://stat.ethz.ch/pipermail/r-help/2008-August/169667.html)关于`vglm`错误的问题。

# sql - (sql server 2005) 如何确定从 GETDATE() 开始的 WEEK 编号

> ID：11691735
> 
> 赞同：-1
> 
> 时间：2012-07-27T16:16:40.277
> 
> 标签：sql, sql-server, sql-server-2005

> **可能重复：**
> [在 MS SQL Server 2005 中获取日期的周数？](https://stackoverflow.com/questions/348880/getting-week-number-off-a-date-in-ms-sql-server-2005)

请假设（我在意大利）所有的星期都以 . 开头`Monday`和结尾`Sunday`。

我想编写一个标量值函数来确定`number of the week`参考`GETDATE()`

预先感谢您的友好合作。

请注意这一点：SELECT 必须与 SET DATEFIRST 命令无关！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:18:50.073

可以用两个内胆吗？

```
 SET DATEFIRST 1;
  SELECT DATEPART( WEEK , GETDATE()) 
```

今天

```
SELECT DATEPART( WEEK , GETDATE()) 
```

返回 30 而

```
SET DATEFIRST 1;
SELECT DATEPART( WEEK , GETDATE()) 
```

返回 31

**Edit** Untested but based on [This Question](https://stackoverflow.com/questions/7330711/isoweek-in-sql-server-2005)您可以使用以下 select 语句获得相当于 SQL Server 2008 `datepart(iso_week, getdate())`（我相信这是您想要的）

```
SELECT ISOWeek = (DATEPART(DY, Th) - 1) / 7 + 1
FROM (SELECT Th = DATEADD(D, 3 - (DATEPART(DW, getdate()) + @@DATEFIRST - 2) % 7, getdate())) s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T17:01:40.363

这是一个小片段，应该可以满足您的需要。

```
DECLARE @firstOfYear DATETIME
SET @firstOfYear = STR(Year(GETDATE()), 4)+'-01-01 00:00:00'
SELECT DATEDIFF(ww, @firstOfYear - ((DATEPART(dw, @firstOfYear) + 5) % 7), GETDATE()) 
```

请记住，如果您想将周开始设置为不同的一天，只需将 更改为`+5`基于 的值`7 - dw`。这是针对 MSSQL 的。

这通过获取一年中的第一天并在当天或之前找到开始一周的日期来工作。然后我们得到传入的任何日期和“第一”周开始之间的周数。如果您想允许传入任何日期，只需将所有`GETDATE`调用替换为您的参数，就可以了。如果您需要一个选择语句：

```
SELECT 
    DATEDIFF(ww, day1 - ((DATEPART(dw, day1) +5) % 7), GETDATE()) 
FROM 
    (SELECT CAST(STR(Year(GETDATE()), 4)+'-01-01 00:00:00' AS DATETIME) day1) d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:18:35.140

```
select datepart(week,getdate()) 
```

更多在[http://msdn.microsoft.com/en-us/library/aa258265(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258265(v=sql.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T16:27:24.823

```
declare @oldDF int
set @oldDF = @@DATEFIRST

set DATEFIRST 1
select DATEPART(WEEK, GETDATE())

set DATEFIRST @oldDF 
```

# java - 如何将参数传递给扩展点构造函数？

> ID：11691743
> 
> 赞同：4
> 
> 时间：2012-07-27T16:17:05.143
> 
> 标签：java, eclipse

Eclipse 在实例化扩展点时调用默认（零参数）构造函数。我想提供一些论据。我找到了使用建议，`IExecutableExtension#setInitializationData`但这似乎需要在 XML 中静态指定参数值。我需要他们是动态的。另一个建议是实施`IExecutableExtensionFactory`，但这似乎是沉重的。（该接口似乎也毫无意义，因为它包含的只是一个`create()`方法。）我可以添加一个方法来在创建后设置值，但是没有它们我的类将无法正常工作，并且它们不应在创建后更改，因此强制它们最好在对象创建时提供。这不可能是一个独特的情况。处理这个的标准方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-28T02:20:56.623

如果论点需要是“动态的”，那么它们从何而来？Eclipse 如何知道要使用哪些值？扩展点对象是在插件激活时创建的，因此此时没有太多可用的上下文。

我认为对你来说最好的选择`IExecutableExtensionFactory`毕竟是使用。您的工厂可以实现`IExecutableExtension`接收 XML 配置数据，然后根据该数据和您可以提供给它的任何其他上下文进行编码以创建对象。

根据您的需要，您可以使用[动态字符串替换变量](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_core_variables_dynamicVariables.html)将某些上下文插入到您的工厂中。另请参阅[Eclipse 插件的 plugin.xml 中的外部化字符串](https://stackoverflow.com/questions/644848/externalizing-strings-in-plugin-xml-for-eclipse-plugin)

# c++ - 提升山狮链接

> ID：11691744
> 
> 赞同：3
> 
> 时间：2012-07-27T16:17:15.647
> 
> 标签：c++, boost, linker, osx-mountain-lion

我正在尝试使用 Xcode V 4.4 在 Mountain Lion 上链接到 boost 1.50 我使用的是 gcc 4.7，所以不应该涉及 Xcode 的东西。每次我尝试链接时，它都会给我这个：

```
/usr/local/bin/g++  -o bin/parse -Lbin `root-config --ldflags`    build/Bcf.o build/Bmf.o build/Boc.o build/EasyBMP.o build/Fei4.o build/Options.o build/RxChannel.o build/TxChannel.o -lboost_program_options -lboost_system -lboost_filesystem  -lboc `root-config --libs` build/parse.o
Undefined symbols for architecture x86_64:
  "start", referenced from:
     -u command line option
     (maybe you meant: boost::property_tree::string_path<std::basic_string<char,    std::char_traits<char>, std::allocator<char> >, boost::property_tree::id_translator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::cstart() const, boost::progress_display::restart(unsigned long) , boost::property_tree::json_parser::json_grammar<boost::property_tree::basic_ptree<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::definition<boost::spirit::classic::scanner<__gnu_cxx::__normal_iterator<char*, std::vector<char, std::allocator<char> > >, boost::spirit::classic::scanner_policies<boost::spirit::classic::skip_parser_iteration_policy<boost::spirit::classic::alternative<boost::spirit::classic::alternative<boost::spirit::classic::space_parser, boost::spirit::classic::confix_parser<boost::spirit::classic::strlit<char const*>, boost::spirit::classic::kleene_star<boost::spirit::classic::anychar_parser>, boost::spirit::classic::alternative<boost::spirit::classic::eol_parser, boost::spirit::classic::end_parser>, boost::spirit::classic::unary_parser_category, boost::spirit::classic::non_nested, boost::spirit::classic::is_lexeme> >, boost::spirit::classic::confix_parser<boost::spirit::classic::strlit<char const*>, boost::spirit::classic::kleene_star<boost::spirit::classic::anychar_parser>, boost::spirit::classic::strlit<char const*>, boost::spirit::classic::unary_parser_category, boost::spirit::classic::non_nested, boost::spirit::classic::is_lexeme> >, boost::spirit::classic::iteration_policy>, boost::spirit::classic::match_policy, boost::spirit::classic::action_policy> > >::start() const )
  "boost::filesystem::detail::status(boost::filesystem::path const&, boost::system::error_code*)", referenced from:
      boost::filesystem::exists(boost::filesystem::path const&) in Bcf.o
  "boost::filesystem::detail::file_size(boost::filesystem::path const&,boost::system::error_code*)", referenced from:
      boost::filesystem::file_size(boost::filesystem::path const&) in Bcf.o
ld: symbol(s) not found for architecture x86_64 
```

Boost 是在更新之后构建的，它之前工作过

我尝试使用 macports 或自制软件构建它，但这破坏了一切......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:13:30.880

这是我用来在 10.8 上构建 Boost 的配方（使用 App Store 中的最新 Xcode），它绝对有效：

1.  下载[http://sourceforge.net/projects/boost/files/boost/1.50.0/boost_1_50_0.tar.bz2/download](http://sourceforge.net/projects/boost/files/boost/1.50.0/boost_1_50_0.tar.bz2/download)

2.  `tar jxvf boost_1_50_0.tar.bz2 && cd "boost_1_50_0/"`

3.  `./bootstrap.sh --prefix=/opt/boost-1.50`

4.  （作为管理员用户）`sudo ./b2 install`

5.  `sudo ln -snf boost-1.50 /opt/boost`

# android - 如何在 Android AndEngine 中执行动画？

> ID：11691747
> 
> 赞同：0
> 
> 时间：2012-07-27T16:17:22.397
> 
> 标签：android, animation, andengine

当我必须在我的场景中移动一些精灵时（例如，向下 100 像素），我正在使用以下代码：

```
Timer timer = new Timer();
for (int i=0; i<10; i++) {
    delay+=frameDelay;
    timer.schedule(new TimerTask() {
            @Override
            public void run() {
                sprite.setPosition(sprite.getX(), sprite.getY()+10);
            }
        },delay);
} 
```

它有效，但我想知道是否有很多正确和/或更快速的可能性来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:48:26.790

或查看可用的各种修饰符 - 向上/向下移动，使用 MoveYModifier - 类似于

```
yourSprite.registerEntityModifier(new MoveYModifier(time, startY, endY, new IEntityModifierListener() {
                @Override
                public void onModifierStarted(final IModifier<IEntity> pModifier, final IEntity pItem) {
                    yourActivity.this.runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            //Do anything here that you want to happen when the Modifier starts - like start a sound playing, etc
                        }
                    });
                }

                @Override
                public void onModifierFinished(final IModifier<IEntity> pEntityModifier, final IEntity pEntity) {
                    yourActivity.this.runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            //Do anything here that you want to happen after the Modifier is through - like stop playing a sound, etc
                            }
                        }
                    });
                }
            }, EaseBounceOut.getInstance())); 
```

EaseBounceOut.getInstance() 只是一个例子——它会导致 Sprite 在最后反弹——还有很多其他的 EaseFunction 可用。

# php - 从 64 位数字转换为 32 位数字

> ID：11691748
> 
> 赞同：7
> 
> 时间：2012-07-27T16:17:26.990
> 
> 标签：php, 32bit-64bit

尝试了很多，只是失败了..

```
$x = 76561198005785475; 
```

我要这个号码，变成这个：

```
$y = 45519747; 
```

那是它的 32 位形式。

* * *

试图解释更多细节：

[http://www.tonymarston.net/php-mysql/converter.php](http://www.tonymarston.net/php-mysql/converter.php)

1）将值 76561198005785475 放在“十进制（输入）”字段中。2) 在“Binary (Base 2)”字段中按“DEC to BIN”。3）从右开始数32并复制。4) 将 32 个字符的二进制数粘贴到“Binary (Base 2)”字段中。5) 在“Binary (Base 2)”字段中按“Bin to Dec”按钮。

好的，现在您可以看到“45519747”号码。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T16:22:13.587

尝试这个：

```
$y = $x & 0xffffffff; 
```

这会将您的 64 位值截断为 32 位值，但请注意，绝对没有办法恢复 64 位值，这是一种破坏性方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-04T06:49:51.803

我尝试了很多解决方案。但是没有人帮助我。最后，以下脚本挽救了我的生命。

```
function intval32bits($value)
{
    $value = ($value & 0xFFFFFFFF);

    if ($value & 0x80000000)
        $value = -((~$value & 0xFFFFFFFF) + 1);

    return $value;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T17:15:40.607

写评论太长了，所以我会在这里发布。

@Kolink 有正确的答案；你想要的是那个操作。但是，请注意，由于您的格式`$x`太大而无法以某种`int`格式存储，因此它将被保存为`float`32 位计算机，并且`float`会遭受精度损失。关于为什么你得到 45519744 而不是正确答案，我最喜欢的理论是你的 32 位计算机失去了最后一位数字的精度。要查看此操作，请在[此处](http://writecodeonline.com/php/)尝试：

```
$x = 76561198005785475;
echo (int)$x; 
```

该站点使用 32 位服务器，它返回 45519744。这说明了精度损失。

另一方面，如果你去[这里](http://sandbox.onlinephpfunctions.com/)运行：

```
$x = 76561198005785475;
$y = $x & 0xffffff; 
```

您会得到正确答案，因为该站点是 64 位的。

如果您想在 32 位机器上进行操作（显然您是这样做的），我建议您使用PHP GMP 扩展中的[gmp_and](http://php.net/manual/en/function.gmp-and.php)。不幸的是，我无法测试它是否有效 - 我将把它留给你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-28T11:38:33.500

I had something similar. I was want to consider Overflow when converting from Int64 to Int32\. this code worked well for me:

```
function intval32bits($value)
{
    $value = ($value & 0xFFFFFFFF);

    if ($value & 0x80000000)
        $value = -((~$value & 0xFFFFFFFF) + 1);

    return $value;
} 
```

# iphone - GEO-提醒启动应用程序

> ID：11691752
> 
> 赞同：0
> 
> 时间：2012-07-27T16:17:57.787
> 
> 标签：iphone, ios, geolocation, reminders, app-launcher

我正在考虑使用 GEO 提醒的应用程序（在 iOS5 中添加的那些，在我离开/到达时在某个位置提醒我）。但我需要使用此功能（实际上，仅使用位置）来获取当前位置并将其与我的应用程序定义的位置进行比较，并检查它是否相同。如果当前位置和定义的位置相同，请启动我的应用程序。

这可能吗？

我希望你能理解我的目的。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:14:01.413

当您设置要监控的区域时，会自动检查当前区域和已定义区域。最好的起点是阅读文档`CLLocationManagerDelegate`，尤其是`startMonitoringForRegion:`. 你想做的事情叫做“地理围栏”。您还可以在[位置感知指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)中找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:24:05.427

虽然您将能够从后台监控您的位置，但请记住，它不会自动启动您的应用程序。您可以使用诸如本地通知之类的东西来提示用户打开应用程序。但是从后台自动启动不是一种选择。至少不是 App Store 批准的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:02:15.257

作为 iPhone 开发的新手，我不知道如何以编程方式为应用程序提供午餐，但我可以帮助您解决到达预定义位置的触发器。这是代码。

1：导入CoreLocation.framework

2：在 viewController.h 文件中放置以下代码

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
@interface ViewController : UIViewController<CLLocationManagerDelegate>
@end 
```

3：inviewController.m

```
#import "ViewController.h"
@interface ViewController (){
CLLocationManager *locationManager;
CLRegion *mexicoBoundary;
}

@end

@implementation ViewController

- (void)viewDidLoad
{
   [super viewDidLoad];

locationManager = [[CLLocationManager alloc] init];
[locationManager setDelegate:self];
[locationManager setDistanceFilter:kCLDistanceFilterNone];

CLLocationCoordinate2D regionCords ;
//19.432608,-99.133208 lat, lon for mexico city
regionCords=CLLocationCoordinate2DMake(19.432608,-99.133208);
//5000 below, is in meters-radius 
mexicoBoundary =
[[CLRegion alloc]initCircularRegionWithCenter:regionCords
                                       radius:5000.0
                                   identifier:@"mexico_Day"];

[locationManager startMonitoringForRegion:mexicoBoundary];

}

-(void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
NSLog(@"%@: %@", @"region entered", region.identifier);

}

-(void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region
{
NSLog(@"%@: %@", @"region exited", region.identifier);
}

- (void)didReceiveMemoryWarning
{
  [super didReceiveMemoryWarning];
  // Dispose of any resources that can be recreated.
}

@end 
```

# c++ - Mac OS X 10.7.4 在 Qt 应用程序中安装帮助工具

> ID：11691754
> 
> 赞同：0
> 
> 时间：2012-07-27T16:17:59.660
> 
> 标签：c++, macos, qt, sign

我正在使用 SMJobBless 功能安装我的辅助工具来启动守护进程，如本文所述 - [http://atnan.com/blog/2012/02/29/modern-privileged-helper-tools-using-smjobbless-plus -xpc/](http://atnan.com/blog/2012/02/29/modern-privileged-helper-tools-using-smjobbless-plus-xpc/)，这里还有 - [http://developer.apple.com/library/mac/#samplecode/SMJobBless/Listings/ReadMe_txt.html](http://developer.apple.com/library/mac/#samplecode/SMJobBless/Listings/ReadMe_txt.html)。几个月前，这一切都很好。并且成功安装了新的辅助工具。但是最近几天（可能在更新到 10.7.4 之后，但它也不适用于其他版本）我在安装帮助工具时遇到了奇怪的问题。用户输入密码到 mac auth 窗口帮助工具后没有安装。我可以看到这个系统日志文本：

7 月 27 日 18:30:28 Illia-Greens-MacBook-Pro 授权主机 [4318]：SFBuiltinEntitled：MyApp.app 无权用于 com.apple.ServiceManagement.daemons.modify 7 月 27 日 18:30:28 Illia-Greens-MacBook- Pro launchdadd[4313] : FAILURE: Job com.bsd.OpenVPNHelper 未在 launchd 中加载。

怎么了？在它工作的前几天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-23T18:09:00.450

也许我的回答对你来说迟了，但我希望它可以帮助其他 Qt 开发人员。我在 Qt 中创建了一个项目来展示如何签名、安装执行特权帮助工具，您可以在此处查看代码：[https ://github.com/mbsanchez/QtPrivilegedHelperExample](https://github.com/mbsanchez/QtPrivilegedHelperExample)

我创建了它，因为没有关于如何使用 Qt 应用程序安装特权帮助工具的文档。

# java - 使用 Java 的 C 语法检查器

> ID：11691758
> 
> 赞同：2
> 
> 时间：2012-07-27T16:18:28.857
> 
> 标签：java, c, api, syntax

对于我的 java 项目，我需要检查用 C 编写的代码是否存在错误和语法……是否有任何 API 或 C 语法和错误检查器的任何其他 Java 实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:21:50.427

您可以在 Java 中调用 C 编译器并解析结果。

一个替代方案可能是[Ideone.com](http://ideone.com/api)，因为他们提供[API](http://ideone.com/api)。

> **什么是ideone？** Ideone 不仅仅是一个 pastebin。它是一个在线编译器和调试工具，允许使用 40 多种编程语言在线编译和运行代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:21:59.220

这非常广泛，但看起来[antlr](http://www.antlr.org/)可能是您需要的工具。有很多可用的[语法](http://www.antlr.org/grammar/list)，包括一个用于 C的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T16:22:36.023

真实答案：

几年前我曾经做过类似的事情......基本上你需要 JFlex 和 CUP 或某种形式的扫描仪/解析器组合。

看一看，我认为我没有上传完成的东西，但你可以从那里拿走它... [http://code.google.com/p/javamicko/](http://code.google.com/p/javamicko/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T16:44:43.207

Coco/R[1] 是 Java 中可用的 LL1 编译器生成器。

您可以自己定义语言（令牌+语法）并解析/检查给定的输入。

[1] [http://ssw.jku.at/Coco/](http://ssw.jku.at/Coco/)

# grails - 如何在 g:select 中为 optionValue 使用 g:render？

> ID：11691761
> 
> 赞同：0
> 
> 时间：2012-07-27T16:18:47.403
> 
> 标签：grails

我有 ag:select 语句，如下所示：

```
<g:select id="gearbox" name="gearbox.id" from="${com.nppc.mes.energyusage.Gearbox.list()}" optionKey="id" optionValue="${ {"${it.gearboxType} - (${it.gearboxRatio})"} }" required="" value="${gearboxVoltageInstance?.gearbox?.id}" class="many-to-one"/> 
```

我添加了一个 optionValue 属性：`optionValue="${ {"${it.gearboxType} - (${it.gearboxRatio})"} }"`

这可以按我的意愿工作。

但是，我想展示我的域对象，Gearboxes 到处都是一样的。我已经创建了一个模板，并且能够在我的 show.gsp 上使用 g:render 标签。

我不知道如何让这样的事情起作用：

`optionValue="<g:render template="/shared/gearbox" model:="[gearbox:it]"/>"`

是否可以使用模板来生成进入 optionValue 的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:47:07.287

你可以绕过它，但对我来说这感觉像是糟糕的设计。

做类似事情的正确方法似乎是在您的 Gearbox 域类中添加一个辅助方法

```
static transients = [ 'renderedValue' ]

def getRenderedValue(){
   "$gearboxType - $gearboxRatio"
} 
```

然后，您可以调用 optionValue="${ it.renderedValue }"。

此外，如果您在域类中指定 toString()，这将用于生成默认呈现值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:46:17.630

标签可以用作 Groovy 代码中的常规函数​​。喜欢：

```
optionValue="${g.render(template: '/shared/gearbox', model: [gearbox: it])}" 
```

# mod-rewrite - mod_rewrite，将带有查询的 URL 更改为完全不同的 URL

> ID：11691763
> 
> 赞同：0
> 
> 时间：2012-07-27T16:18:52.263
> 
> 标签：mod-rewrite

我正在将数据从一个内容管理系统迁移到另一个。旧 URL 和新 URL 之间没有关系，尽管两者都包含查询字符串。我正在尝试设置一组重写，它将广泛的数据类别列表从一个重定向到另一个。

这是一个示例：

旧 rss.php?categoryID=53

新 index.php?module=news&type=user&func=list&tid=1&filter=blogtopic:eq:19

我试过了

RewriteRule ^rss.php\?categoryID=53 index.php?module=news&type=user&func=list&tid=1&filter=blogtopic:eq:19 [L]

但它不匹配。如果我跟着那个

RewriteRule ^rss.php index.php?module=news&type=user&func=list&tid=1 [L]

如果确实匹配，那么我得出结论，旧 URL 中的问号导致了问题。我已经在逃避问号了。我该怎么办？

我最终可能会在我的 .htaccess 文件中得到大约 50 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:35:49.450

您无法匹配 a 中的查询字符串（**?**之后的所有内容）`RewriteRule`，您需要使用 a`RewriteCond`并匹配 `%{QUERY_STRING} var：

```
RewriteCond %{QUERY_STRING} ^categoryID=53$
RewriteRule ^rss\.php$ /index.php?module=news&type=user&func=list&tid=1&filter=blogtopic:eq:19 [L] 
```

`[R=301,L]`或者如果要重定向浏览器，请将括号更改为。

# ios - 表视图上的 EXC_BAD_ACCESS (SIGSEGV)：cellForRowAtIndexPath

> ID：11691765
> 
> 赞同：0
> 
> 时间：2012-07-27T16:18:56.163
> 
> 标签：ios, uitableview, crash

我打开了 NSZombieEnabled，当发生以下情况时，我似乎正在崩溃。

通过标签栏转到“设置”视图控制器，然后从那里进入罪魁祸首视图控制器，然后单击另一个标签（之前不返回设置视图控制器），然后再次单击“设置”标签栏。

这是 tableView:cellForRowAtIndexPath 的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell;
static NSString *CellIdentifier = @"Cell";
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(cell == nil)
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"temp"] autorelease];

cell.selectionStyle = UITableViewCellSelectionStyleGray;

if(indexPath.section == 1 && [PMSessionManager instance].paymentMethods.cards != nil)
{
    if([[PMSessionManager instance].paymentMethods.cards count] > indexPath.row)
    {
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        //Reverse the array if it's in the wrong order
        if([[[[PMSessionManager instance].paymentMethods.cards objectAtIndex:indexPath.row] cardStatus] isEqualToString:@"Secondary"] && indexPath.row == 0)
        {
            NSArray* reversedArray = [[[PMSessionManager instance].paymentMethods.cards reverseObjectEnumerator] allObjects];
            [PMSessionManager instance].paymentMethods.cards = reversedArray;
        }

        PMCardInfo *cardInfo = [[PMSessionManager instance].paymentMethods.cards objectAtIndex:indexPath.row];

        if([cardInfo.cardStatus isEqualToString:@"Primary"] && indexPath.row == 1)
            cardInfo = [[PMSessionManager instance].paymentMethods.cards objectAtIndex:(indexPath.row -1)];

        UILabel *cardLabel =
        [[[UILabel alloc]
          initWithFrame:
          CGRectMake(
                     cell.indentationWidth,
                     0.075 * (tableView.rowHeight - 2 * 14),
                     200,
                     26)]
         autorelease];
        [cell.contentView addSubview:cardLabel];
        cardLabel.text = [NSString stringWithFormat:@"%@", [cardInfo.cardStatus capitalizedString]];
        cardLabel.backgroundColor = [UIColor clearColor];
        cardLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        cardLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];

        NSString *cardTypeString = [NSString stringWithFormat:@"%@", [cardInfo.cardType capitalizedString]];

        CGSize cardTypeStringSize = [cardTypeString sizeWithFont:[UIFont boldSystemFontOfSize:[UIFont systemFontSize]]];

        UILabel *cardTypeLabel =
        [[[UILabel alloc]
          initWithFrame:
          CGRectMake(
                     cell.indentationWidth,
                     0.63 * (tableView.rowHeight - 2 * 14),
                     cardTypeStringSize.width,
                     24)]
         autorelease];
        [cell.contentView addSubview:cardTypeLabel];
        cardTypeLabel.text = [NSString stringWithFormat:@"%@", [cardInfo.cardType capitalizedString]];
        cardTypeLabel.backgroundColor = [UIColor clearColor];
        cardTypeLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        cardTypeLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];

        UILabel *digitsLabel =
        [[[UILabel alloc]
          initWithFrame:
          CGRectMake(
                     cardTypeStringSize.width + 4 + cell.indentationWidth,
                     0.6 * (tableView.rowHeight - 2 * 14),
                     150,
                     26)]
         autorelease];
        [cell.contentView addSubview:digitsLabel];
        digitsLabel.text = [NSString stringWithFormat:@"ending with %@", cardInfo.last4Digits];
        digitsLabel.backgroundColor = [UIColor clearColor];
        digitsLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        digitsLabel.font = [UIFont systemFontOfSize:[UIFont systemFontSize]];

        //Let's make the expiration year just two digits
        if(cardInfo.expYear.length == 4)
            cardInfo.expYear = [cardInfo.expYear substringFromIndex:2];

        UILabel *expirationLabel =
        [[[UILabel alloc]
          initWithFrame:
          CGRectMake(
                     cell.indentationWidth,
                     1.0 * (tableView.rowHeight - 2 * 14),
                     150,
                     26)]
         autorelease];
        [cell.contentView addSubview:expirationLabel];
        expirationLabel.text = [NSString stringWithFormat:@"Expires on %@/%@", cardInfo.expMonth, cardInfo.expYear];
        expirationLabel.backgroundColor = [UIColor clearColor];
        expirationLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        expirationLabel.font = [UIFont systemFontOfSize:[UIFont systemFontSize]];
    }
    else 
    {
        UILabel *cardTypeLabel =
        [[[UILabel alloc]
          initWithFrame:
          CGRectMake(
                     cell.indentationWidth,
                     0.25 * (tableView.rowHeight - 2 * 14),
                     275.0,
                     24)]
         autorelease];
        [cell.contentView addSubview:cardTypeLabel];
        if([[PMSessionManager instance].paymentMethods.cards count] == 2)
            cardTypeLabel.text = @"Swap Primary and Secondary Cards";
        else
            cardTypeLabel.text = @"Add Credit Card";
        cardTypeLabel.textAlignment = UITextAlignmentCenter;
        cardTypeLabel.backgroundColor = [UIColor clearColor];
        cardTypeLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        cardTypeLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];
    }
}
else if(indexPath.section == 0)
{
    if([PMSessionManager instance].paymentMethods.wallet != nil)
    {
        if(indexPath.row == 0)
        {
            NSString *balanceString = [Util numberToCurrencyString:[PMSessionManager instance].paymentMethods.wallet.balance];
            NSString *availableBalanceString = @"Available Balance";

            CGSize balanceStringSize = [balanceString sizeWithFont:[UIFont boldSystemFontOfSize:32.0]];
            CGSize availableBalanceStringSize = [availableBalanceString sizeWithFont:[UIFont boldSystemFontOfSize:[UIFont systemFontSize]]];

            CGFloat textWidth = balanceStringSize.width + 5.0 + availableBalanceStringSize.width;
            CGFloat margin = (275.0 - textWidth)/2;

            UILabel *balanceLabel =
            [[[UILabel alloc]
              initWithFrame:
              CGRectMake(
                         cell.indentationWidth + margin,
                         0.45 * (tableView.rowHeight - 2 * 14),
                         275.0,
                         32)]
             autorelease];
            [cell.contentView addSubview:balanceLabel];
            balanceLabel.text = balanceString;
            balanceLabel.textAlignment = UITextAlignmentLeft;
            balanceLabel.backgroundColor = [UIColor clearColor];
            balanceLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
            balanceLabel.font = [UIFont boldSystemFontOfSize:32.0];

            UILabel *walletBalanceLabel =
            [[[UILabel alloc]
              initWithFrame:
              CGRectMake(
                         balanceStringSize.width + 5 + cell.indentationWidth + margin,
                         0.72 * (tableView.rowHeight - 2 * 14),
                         275.0,
                         24)]
             autorelease];
            [cell.contentView addSubview:walletBalanceLabel];
            walletBalanceLabel.text = availableBalanceString;
            walletBalanceLabel.textAlignment = UITextAlignmentLeft;
            walletBalanceLabel.backgroundColor = [UIColor clearColor];
            walletBalanceLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
            walletBalanceLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];

            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }
        if(indexPath.row == 1)
        {
            UILabel *walletSettingsLabel =
            [[[UILabel alloc]
              initWithFrame:
              CGRectMake(
                         cell.indentationWidth,
                         0.25 * (tableView.rowHeight - 2 * 14),
                         275.0,
                         24)]
             autorelease];
            [cell.contentView addSubview:walletSettingsLabel];
            walletSettingsLabel.text = @"Edit Wallet Settings";
            walletSettingsLabel.textAlignment = UITextAlignmentCenter;
            walletSettingsLabel.backgroundColor = [UIColor clearColor];
            walletSettingsLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
            walletSettingsLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];
        }
    }
    else 
    {
        if(indexPath.row == 0)
        {
            UILabel *learnMoreLabel =
            [[[UILabel alloc]
              initWithFrame:
              CGRectMake(
                         cell.indentationWidth,
                         0.25 * (tableView.rowHeight - 2 * 14),
                         275.0,
                         24)]
             autorelease];
            [cell.contentView addSubview:learnMoreLabel];
            learnMoreLabel.text = @"Learn More";
            learnMoreLabel.textAlignment = UITextAlignmentCenter;
            learnMoreLabel.backgroundColor = [UIColor clearColor];
            learnMoreLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
            learnMoreLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];
        }
        if(indexPath.row == 1)
        {
            UILabel *signUpLabel =
            [[[UILabel alloc]
              initWithFrame:
              CGRectMake(
                         cell.indentationWidth,
                         0.25 * (tableView.rowHeight - 2 * 14),
                         275.0,
                         24)]
             autorelease];
            [cell.contentView addSubview:signUpLabel];
            signUpLabel.text = @"Sign Up for Wallet";
            signUpLabel.textAlignment = UITextAlignmentCenter;
            signUpLabel.backgroundColor = [UIColor clearColor];
            signUpLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
            signUpLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];
        }
    }
}

return cell;
} 
```

使用 NSZombieEnabled，我在日志中收到以下消息：

```
-[PaymentMethodViewController tableView:cellForRowAtIndexPath:]: message sent to deallocated instance 0x404ae00 
```

上面的代码片段来自这个 PaymentMethodViewController。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:18:44.653

这个问题的第一个答案似乎已经解决了这个问题。

[弹出到根视图控制器，没有表视图的动画崩溃](https://stackoverflow.com/questions/5499913/pop-to-root-view-controller-without-animation-crash-for-the-table-view)

# database - 在 Delphi ADO 中如何删除、更新等查询产生的表？

> ID：11691766
> 
> 赞同：0
> 
> 时间：2012-07-27T16:18:58.330
> 
> 标签：database, delphi, ado

我认为我缺少有关使用 SQL 语句和（Delphi 的 ADO）查询组件和/或在（Access 2003）数据库中设置字段之间关系的基本知识。每当我想删除、更新等任何比 SQL.Text="SELECT something FROM aTable" 更复杂的东西时，我都会收到错误消息。

例如，我在名为 Outline 和 Reference 的表之间创建了一个简单的多对多关系。联结或联结表称为注：

```
Outline
  OutlineID (PK)
  etc.

Reference
  RefID (PK)
  etc.

Note
  NoteID (PK)
  OutlineID
  RefID
  NoteText 
```

我在 Access 中的联接上强制执行参照完整性，但没有勾选复选框以级联删除或更新。同时，在德尔福我的 Query.SQL.Text 是

```
SELECT Note.NoteID, Outline.OutlineID, Ref.RefID, Note.NoteText, Ref.Citation, Outline.OutlineText
FROM (Note LEFT JOIN Outline ON Outline.OutlineID=Note.OutlineID)
LEFT JOIN Ref on Ref.RefID=Note.RefID; 
```

最初，我在 SELECT 语句中省略了对键的引用，当我尝试从结果表中删除记录时产生“键列信息不足”错误。我*想*我理解：您必须选择数据库需要执行的任何操作的所有字段。如果它不知道加入了什么，它就不能删除、更新等加入的字段。（这是正确的吗？）

那么，我该如何从这个查询中删除一条记录呢？换句话说，我想 (1) 显示一个显示 NoteText、Citation 和 OutlineText 的网格，(2) 从网格中选择一条记录，(3) 执行一些操作，例如单击 DBNavigator 上的删除按钮，以及 (4) 删除Note 表中与所选记录具有相同 NoteID 和 NoteText 的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T01:46:36.717

James L 和 Hendra 都提供了如何做你想做的事的精髓。以下是实现它的一种方法。

```
procedure TForm1.ADOQuery1BeforeDelete(DataSet: TDataSet);
var
  SQL : string;
begin
  SQL := 'DELETE FROM [Note] WHERE NoteID='+
    DataSet.FieldByName('NoteID').AsString;
  ADOConnection1.Execute(SQL);
  TADOQuery(DataSet).ReQuery;
  Abort;
end; 
```

这将允许 TADOQuery.Delete 正常工作。Abort 是必要的，以防止 TADOQuery 在您删除记录后也尝试删除它。主要缺点是 TADOQuery.ReQuery 不保留光标位置，即当前记录将是第一条记录。

**更新：**

以下尝试恢复游标。我不喜欢第二个 Requery，但在尝试恢复无效书签后似乎有必要恢复 DataSet（由于删除了最后一条记录）。这适用于我有限的测试。

```
procedure TForm1.ADOQuery1BeforeDelete(DataSet: TDataSet);
var
  SQL : string;
  bm : TBookmarkStr;
begin
  SQL := 'DELETE FROM [Note] WHERE NoteID='+
    DataSet.FieldByName('NoteID').AsString;
  bm := Dataset.BookMark;
  ADOConnection1.Execute(SQL);
  TADOQuery(DataSet).ReQuery;
  try
    Dataset.BookMark := bm;
  except
    TADOQuery(DataSet).Requery;
    DataSet.Last;
  end;
  Abort;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:41:46.403

如果您使用的是`TADOTable`，则当您从数据集中删除它们时，组件会处理数据库中的删除`TADOTable`。但是，由于您使用的`TADOQuery`是连接多个表的 a，因此您需要以不同的方式处理数据库删除。

当您创建要删除数据库网格中当前记录的记录时，它会将`TADOQuery`' 的光标滚动到其数据集中的该行。然后您可以使用`TADOQuery.Delete`删除当前记录。如果您为`TADOQuery.BeforeDelete`事件编写代码，您可以在本地删除记录之前从记录中捕获 id 字段，并使用另一个`TADOQuery`或`TADOCommand`组件，您可以创建并执行 SQL 以从数据库中删除记录。

由于删除数据库记录的代码是在`BeforeDelete`事件中，如果发生异常，数据库记录没有被删除，本地删除也会被取消，本地记录也不会被删除--报错被显示（例如，'外键违规'...）。

# macos - MAMP 将其 php.ini 保存在哪里？

> ID：11691767
> 
> 赞同：100
> 
> 时间：2012-07-27T16:18:59.517
> 
> 标签：macos, mamp, php

我最近有一台 Mac，根本不习惯在 Mac 上开发。

我有 MAMP Pro 1.9.6.1。我做了一个定位`php.ini`并得到了这个：

```
$ locate php.ini
/Applications/MAMP/conf/php5.2/php.ini
/Applications/MAMP/conf/php5.3/php.ini
/Library/Application Support/appsolute/MAMP PRO/conf/php.ini
/private/etc/php.ini.default 
```

我把他们所有人的名字都改了。重新启动 MAMP。它顺利加载（我知道很奇怪吗？）。我正在使用 PHP 5.2 版。

所有这些文件现在都是不同的名称（为了消除过程而一一完成）。所以我想重新启动mac。同样，即使所有`php.ini`文件都已移动，MAMP 加载也没有问题。在灯上这个甚至不会加载。但是要么我缺少另一个`php.ini`文件（很可能我不知道如何`updatedb`），MAMP 真的很聪明，只是把它们都拉进去（不太可能），或者它不使用一个。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-07-27T16:20:33.663

**注意：**如果这没有帮助，请查看下面的 Ricardo Martins 的答案。

* * *

在其中创建一个 PHP 脚本`<?php phpinfo() ?>`，从浏览器运行它，然后查找 value `Loaded Configuration File`。这会告诉您`php.ini`PHP 在 Web 服务器的上下文中使用哪个文件。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-04-22T18:58:30.283

我不确定在 MAMP（非 PRO）中是否相同，但 MAMP`php.ini`每次启动时都会覆盖修改后的内容。

就我而言，我需要使用 MAMP 菜单来更改我的`php.ini file`( `File -> Edit Template -> PHP -> PHP 5.xx -> php.ini`)。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-07-08T14:04:13.240

To be clearer (as i read this thread but didn't SEE the solution, also if it was here!), I have the same problem and found the cause: I were modifying the wrong php.ini!

Yes, there are 2 php.ini files in MAMP:

1.  Applications/MAMP/conf/php5.5.10/php.ini
2.  Applications/MAMP/bin/php/php5.5.10/conf/php.ini

The right php.ini file is the second: Applications/MAMP/bin/php/php5.5.10/conf/php.ini

To prove this, create a .php file (call it as you like, for example "info.php") and put into it a simple phpinfo()

```
<?php
echo phpinfo(); 
```

Open it in your browser and search for "Loaded Configuration File": mine is "/Applications/MAMP/bin/php/php5.5.10/conf/php.ini"

The error was here; i edited Applications/MAMP/conf/php5.5.10/php.ini but this is the wrong file to modify! Infact, the right php.ini file is the one in the bin directory.

Take care of this so small difference that caused me literally 1 and a half hours of headaches!

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-09-03T18:56:20.287

您必须编辑的文件位于 MAMP Pro 中，`php.ini`每次启动时都会使用该文件。

*   启动 MAMP PRO
*   编辑`File > Edit Templates > PHP 5.3.2 php.ini`
*   重启 MAMP Pro

你的改变应该坚持。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-08-26T23:44:36.827

我不知道你是否找到了答案，但我不需要 MAMP PRO 来做这件事。只需按照别人所说的走上正确的道路。这有点像...

> MAMP-> bin-> php-> php(你的 php 版本)-> conf-> php.ini

这里的关键是您正在编辑文件的位置。我在编辑ini文件的注释部分时犯了错误。您实际上必须向下滚动到第 472 行，其中显示“display_errors = Off 并将其更改为 On。希望这对任何人都有帮助

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-03-02T13:12:55.237

只需从您的终端运行以下命令，它就会向您显示**加载的配置文件**，这是我发现的最简单的方法。

```
php --ini 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-27T16:39:56.490

如果您使用的是 5.2 版本的 php，请更改 /Applications/MAMP/conf/php5.2/php.ini。如果您使用的是 5.3 php 版本，请编辑 /Applications/MAMP/conf/php5.3/php.ini。

如果您使用的是 OSX Lion 或 OSX Mountain Lion，我建议您使用默认安装的 apache 和 php。

问候！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-25T20:02:57.933

运行 MAMP 服务器后，工具栏中有 php 信息链接 单击后，您将获得有关 php 的所有信息 [![在此处输入图像描述](../Images/c6ae29b1b86a299b114b045e2a961e75.png)](https://i.stack.imgur.com/Du9T0.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-28T22:51:04.847

这取决于您的 MAMP 使用的 PHP 版本。您可以在以下位置找到它：`/Applications/MAMP/conf/apache/httpd.conf`寻找已配置的`php5_module`.

之后，正如之前有人所说，您必须转到`bin`文件夹。在那里你会找到`conf`一个里面有一个文件夹`php.ini`。

例子：`/Applications/MAMP/bin/php/php5.4.10/conf`

狮子座

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-18T17:33:07.753

在浏览完这里的所有解决方案后，找到加载`php.ini`文件的最简单方法是进入`phpinfo`加载的 MAMP 网页，该网页将显示加载的 php.ini 文件。

这还将确认您更改的参数（如 max_file_size）是否已正确更新。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-19T10:38:19.687

可能是在 MAMP PRO (v.4.2.1) 中访问当前加载的 PHP 版本的 PHP.ini 的最快方法：

1.  打开 MAMP 专业版
2.  单击侧边栏“语言”部分下的“PHP”
3.  点击下拉菜单旁边的箭头按钮，您可以选择 PHP 的“默认版本”。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-27T16:26:01.530

我只有 MAMP 的非专业版本，但仅仅因为它加载它并不意味着 PHP 文件被找到/没有错误。

我重命名了我的`php.ini`文件，MAMP 仍然启动，但 Apache 返回了几个错误。

你想在你的`php.ini`文件中改变什么？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-22T08:07:13.407

我已经检查了所有答案，当然我已经使用 phpinfo() 来检查 php.ini 的确切位置。我在 Mac 的菜单栏中没有看到文件选项。我更改了该文件夹中的 php.ini 和 php.ini.temp 文件。没用。

直到我意识到我忘记取消注释修改后的 always_populate_raw_post_data 行。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-04-04T02:30:50.787

在我的 Mac 上，运行 MAMP 我有几个可能是 php.ini 的位置，因此我将 memory_limit 编辑为 2 个可疑文件中的不同值，以测试哪一个影响了实际的 MAMP PHP INFO 页面详细信息。通过这样做，我能够确定这是正确的 php.ini：/Applications/MAMP/bin/php/php7.2.10/conf/php.ini

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-14T12:09:01.577

我也在为此苦苦挣扎。我的更改没有反映在 phpInfo 中。直到我停止服务器然后重新启动它们，我的更改才真正生效。

# delphi - TStoredProc 中的参数数量是否有限制？

> ID：11691774
> 
> 赞同：4
> 
> 时间：2012-07-27T16:19:32.093
> 
> 标签：delphi, delphi-7, bde

TStoredProc ExecProc 调用中参数的数量或参数的总体大小是否有限制？

当前运行的系统仍在使用 BDE 连接到 Oracle，并且最近更改包过程的参数数量开始产生访问冲突。参数计数现在高达 291，并且正在 TStoredProc 的 ExecProc 调用中创建 AV。

如果我们从列表中删除单个参数（任何参数，不必是特定参数）， ExecProc 调用就可以正常工作。

我已经通过代码进行了调试，并且使用 DBTables.pas 中的 TStoredProc.BindParams 过程引发了访问冲突。我设置了几个手表，其中一个是 SizeOf(FRecordBuffer)，当我逐步执行此过程时，该值是 65535。这是 MaxWord (Windows.pas)。我没有看到 DBTables 代码中有任何指定的限制。

调用堆栈是 TStoredProd.ExecProc -> TStoredProc.CreateCursor -> TStoredProc.GetCursor -> TStoredProc.BindParams 并且在遍历 FParams 的 for 循环中引发访问冲突。

在此先感谢，我们需要找到可以查明的东西，以便我们可以避开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:39:28.310

我根本不精通 Oracle SQL，但是由于您正在维护它，我会看看是否可以将带有所有参数的调用更改为单个插入到新的专用表中（有那么多列加上一个自动编号主键），并更改存储过程以将此键作为输入并调用此新记录中的值来完成其工作。这可能只是比找出最大参数数量并尝试在那里找到修复快一点。（虽然这个数字有点奇怪，不是 2 的幂，它很可能是 291……）

# android - 为什么我的应用没有显示在 Google Play 的平板电脑上？

> ID：11691775
> 
> 赞同：39
> 
> 时间：2012-07-27T16:19:37.793
> 
> 标签：android, tablet, google-play

我刚刚发布了适用于手机和平板电脑的应用程序，但它没有出现在平板电脑的 Google Play 中。

检查 Nexus 7 和华硕 eeeePad

这就是我的清单文件中的内容

```
<compatible-screens>
    <!--no small size screens -->

    <!--Only hdpi and xhdpi for normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />

    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />

    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />
</compatible-screens> 
```

使用-sdk 标签

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11" /> 
```

权限

```
<uses-permission android:name="com.android.vending.BILLING" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<permission android:name="com.myapp.something.permission.C2D_MESSAGE" android:protectionLevel="signature" /> 
```

在明确将 uses-feature 标签添加到 false 后，它开始出现在 Asus eeeePad 平板电脑上，但仍然没有出现在 nexus 7 上。这是我在开发者控制台中看到的

此应用程序仅适用于具有这些功能的设备，如您的应用程序清单中所定义。屏幕密度：`LARGE,MDPI LARGE,HDPI LARGE,LDPI LARGE,XHDPI XLARGE,MDPI XLARGE,HDPI XLARGE,LDPI XLARGE,XHDPI NORMAL,MDPI NORMAL,HDPI NORMAL,XHDPI` 所需的设备功能

```
android.hardware.screen.portrait
android.hardware.touchscreen 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-31T17:09:20.450

`<compatible-screens>`最后为带有 in标签的 Nexus 7 添加一个特殊情况对我有用。由于 Nexus 7 具有 tvdpi 密度

```
<compatible-screens>
    <!--no small size screens -->

    <!--all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />

    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />

    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />

    <!-- Special case for Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213" />

</compatible-screens> 
```

更新：

对于 xxhdpi 设备，您可以使用 480 作为 int 值

```
 <screen android:screenSize="normal" android:screenDensity="480" />
     <screen android:screenSize="large" android:screenDensity="480" />
     <screen android:screenSize="xlarge" android:screenDensity="480" />` 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-27T17:14:33.503

[此页面](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions-features)确定您的问题。

当您使用`<uses-feature>`instead of 时`<uses-permission>`，您的应用程序不会被 Market 过滤掉，但希望您在代码级别处理不支持该功能的设备。

`<uses-feature>`对于上面该页面中的任何权限，您可以通过在元素中显式声明具有`android:required="false"`属性的隐含特征来禁用基于隐含特征的过滤。例如，要禁用任何基于 CAMERA 权限的过滤，您可以将此声明添加到清单文件中：

```
<uses-feature android:name="android.hardware.camera" android:required="false" /> 
```

但是，当您指定 时`<uses-permission>`，将过滤所有无权访问该功能的设备。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-27T17:04:07.350

我相信关键在于您的权限。通过说您的应用使用`RECEIVE_SMS`并且`READ_PHONE_STATE`Google Play 使用它来过滤出无法执行这些操作的设备（平板电脑），因为它认为您的应用需要使用这些权限才能工作。根据android开发者网站：

> “为了防止这些应用程序无意中可用，Google Play 假定某些与硬件相关的权限表明默认情况下需要底层硬件功能。例如，使用蓝牙的应用程序必须在一个元素中请求 BLUETOOTH 权限——对于旧版应用程序，Google Play 假定权限声明意味着应用程序需要底层的 android.hardware.bluetooth 功能，并根据该功能设置过滤。”

另外，看看这个：

> 电话 CALL_PHONE android.hardware.telephony CALL_PRIVILEGED android.hardware.telephony MODIFY_PHONE_STATE android.hardware.telephony PROCESS_OUTGOING_CALLS android.hardware.telephony READ_SMS android.hardware.telephony WRITE_APN_SETTINGS android.hardware.telephony WRITE_SMS android.hardware.telephony

你有`RECEIVE_SMS`，`READ_PHONE_STATE`所以你自动拥有`android.hardware.telephony`。你可以通过这样做来解决这个问题

```
<uses-feature android:name="android.hardware.telephony" android:required="false" /> 
```

[所有这些都在这里](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)更深入地解释。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-10-17T00:15:38.843

我必须做所有这三件事才能让它在 Nexus 7 上工作。一旦你上传了你的 apk，你可以通过首先激活新的 apk 来验证设置，转到产品详细信息并搜索支持的设备。如果在“由于您的清单设置而不受支持的设备”下未找到 Nexus 7，那么您很好。

注意：上传 apk 后，Google Play 会将 213 密度转换为 tvdpi。不知道为什么在 Eclipse 清单工具中不是一个选项...

```
<compatible-screens>
    ....
    <screen android:screenSize="large" android:screenDensity="213" />
</compatible-screens>

<uses-feature android:name="android.hardware.camera" android:required="false" />
<uses-feature android:name="android.hardware.telephony" android:required="false" /> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-08-04T19:05:05.270

文档指示我们避免使用

```
<compatible-screens> 
```

请参阅[此处](http://developer.android.com/distribute/essentials/quality/tablets.html#support-screens)
，您应该使用

```
<supports-screens
        android:anyDensity="true"
        android:xlargeScreens="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

此页面上提供的许多其他答案也是有效的答案。我自己实现了它们。感谢大家。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-02T05:32:15.193

根据[developer.android.com](https://developer.android.com/distribute/essentials/quality/tablets.html#support-screens)

> 如果应用程序在清单中声明了 < **compatible-screens** > 元素，则该元素应包含指定应用程序支持的平板电脑屏幕的所有尺寸和密度组合的属性。
> 
> 请注意，如果可能，您应该***避免***在应用程序中使用 < **compatible-screens > 元素。**

* * *

因此，我执行以下任务，

1-**从清单中****删除 < *compatible-screens >***

```
<compatible-screens>
    <!-- all small size screens -->
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />

    <!--all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />

    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />

    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />

    <!-- Special case for Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213" />

    <screen android:screenSize="normal" android:screenDensity="480" />
    <screen android:screenSize="large" android:screenDensity="480" />
    <screen android:screenSize="xlarge" android:screenDensity="480" />

</compatible-screens> 
```

2-**在清单中****添加 < *supports-screens > 属性***

```
 <supports-screens
        android:xlargeScreens="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:anyDensity="true"
    /> 
```

3-**在清单中的 <** ***uses-feature*** **>****中添加 android:required="false" 属性*（根据我的应用程序要求）***

 **```
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.bluetooth" android:required="false"/>
<uses-feature android:name="android.hardware.location.gps" android:required="false"/>
<uses-feature android:name="android.hardware.camera" android:required="false"/>
<uses-feature android:name="android.hardware.nfc" android:required="false"/> 
```

[有关隐含功能要求](https://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)的权限的官方 Android 文档

[ATTRIBUTES](https://developer.android.com/guide/topics/manifest/uses-feature-element.html)中有关于 android:required false 的更详细说明：android:required false

> 当您为某个功能声明 android:required="false" 时，这意味着如果设备上存在该功能，应用程序更喜欢使用该功能，但**如果需要，它被设计为在没有指定功能的情况下运行**（即电话权限平板电脑的情况下）。

* * *

通过进行上述更改，

**支持的 Android 设备列表中添加了超过 2000 种设备**

[![添加了 2000 多台设备](../Images/7197b694d87358272e2a257cf4e3f9a7.png)](https://i.stack.imgur.com/bCqL3.jpg)

我希望这会有所帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-20T07:08:35.560

我从回答这个问题中得到帮助。

[如何使 android Phonegap 可用于平板电脑？](https://stackoverflow.com/questions/13003547/how-to-make-android-phonegap-available-for-tablets?rq=1#13003776)

是的。问题出在权限上。我从 AndroidManifest.xml 中删除了所有权限，而不是测试应用程序并在缺少权限错误时一一添加权限。现在我的应用程序兼容安卓手机和平板电脑。**

# c# - wpf ElementHost 不显示

> ID：11691778
> 
> 赞同：3
> 
> 时间：2012-07-27T16:19:55.087
> 
> 标签：c#, wpf

我对这`ElementHost`件事有很大的问题。有人可以看看我有什么，让我知道发生了什么或为什么没有显示？一切似乎都正常，只是我看不到`ElementHost`屏幕上的显示/刷新（用户控件）。

Test.cs.designer

```
this.TestHost.Dock = System.Windows.Forms.DockStyle.Fill;
this.TestHost.Location = new System.Drawing.Point(5, 5);
this.TestHost.Name = "TestHost";
this.TestHost.Size = new System.Drawing.Size(1139, 213);
this.TestHost.TabIndex = 1;
this.TestHost.Text = "elementHost1";
this.TestHost.Child = this.testview1;
this.TestHost.Visible = true; 
```

测试.cs

```
private void btnTest_Click(object sender, EventArgs e)
{
    LoadView(item);
}

public void LoadView(Person item)
{
    TestHost.Child = this.testview1; //name given when drag/drop .. should still reference wpf TestView xaml

    try
    {
        if (item != null)
        {
            // TestView is WPF xaml/View                
            TestView view = new TestView();
            view = (TestView) TestHost.Child;
            //TestViewModel is a viewmodel

            TestViewModel vm = (TestViewModel) view.DataContext;
            //load items from viewmodel             
            vm.LoadItems(item);
        }   

        TestHost.Visible = true;
    }
    catch(Exception ex)
    {
        ex.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:44:30.683

从您的代码看来，您将 elementhost 子项设置为 Class 而不是它的实例（不会编译）。我的问题是**TestView 实例来自哪里？**

```
TestHost.Child = TestView; 
```

要调试，请在 try/catch 块中更改“ex.ToString()”以显示消息框；如果发生异常，您会注意到它。

# objective-c - 为什么这个基本的 Objective C 块代码不起作用？

> ID：11691780
> 
> 赞同：2
> 
> 时间：2012-07-27T16:19:58.457
> 
> 标签：objective-c, block

我试图了解块的基本原理。我写了这个简单的测试：

```
NSString *(^print_block) () = ^ (NSString *returned_string){
  return @"this block worked!";  
};

NSLog(@"%@", print_block); 
```

我希望控制台输出是`"this block worked!"`，但是我得到了大量的错误号等，以：

```
terminate called throwing an exception 
```

怎么了？

编辑：建议使用答案：

```
NSLog (@"%@", print_block()); 
```

但这也行不通。程序在块定义的开始处终止，控制台只显示`(lldb)`，Xcode 在块定义处放置一个绿色小箭头。箭头写着：

`Thread 1: EXC_BAD_ACCESS (code=1, address=0x5f646e71)`

我尝试了其他不起作用的方法：

```
NSString *(^print_block) () = ^ (NSString *returned_string){
    NSString *return_me = @"this block worked!";
    return return_me;  
};

NSLog(@"%@", print_block); 
```

但至少这不会终止程序。它运行良好。但是控制台输出还是错误的：

`<__NSGlobalBlock__: 0x5a58>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:28:31.203

Vatev 的评论是正确的。当你写：

```
NSLog(@"%@", print_block); 
```

您将块`print_block`作为日志语句中格式字符串的参数传递。您正在尝试打印该块。这可能会导致`[print_block description]`被调用。我不知道块是否实现了一个`-description`方法，但如果没有，那么你会得到一个无法识别的选择器异常。

此外，您声明该块的方式不正确。您不需要在参数列表中包含返回值。

以下代码按您的预期工作：

```
NSString *(^print_block)() = ^{
    return @"this block worked!";  
};

NSLog(@"%@", print_block()); 
```

# php - 如何使用 php 将 rgba 转换为 hex 或 rgb 颜色代码

> ID：11691787
> 
> 赞同：4
> 
> 时间：2012-07-27T16:20:21.520
> 
> 标签：php, rgba

是否可以在 php.ini 中将 rgba 颜色代码转换为十六进制或 rgb 等效颜色代码。我已经烧了很多，但我发现了一些 js 函数，但在 php 中没有。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:51:38.283

当 JavaScript 中有源代码时，将代码迁移到 PHP 中应该不成问题...

RGB 到 HEX（考虑到我们在`$r`, `$g`,`$b`变量中有 R、G、B 颜色）：

```
function toHex($n) {
    $n = intval($n);
    if (!$n)
        return '00';

    $n = max(0, min($n, 255)); // make sure the $n is not bigger than 255 and not less than 0
    $index1 = (int) ($n - ($n % 16)) / 16;
    $index2 = (int) $n % 16;

    return substr("0123456789ABCDEF", $index1, 1) 
        . substr("0123456789ABCDEF", $index2, 1);
}

echo $hex = '#' . toHex($r) . toHex($g) . toHex($b); 
```

没有测试，但应该可以工作。如果您需要 RGBa -> RGB 转换，请告诉我...

# objective-c - NSCache，removeAllObjects 会释放内存使用吗？我正在使用 ARC

> ID：11691789
> 
> 赞同：0
> 
> 时间：2012-07-27T16:20:26.457
> 
> 标签：objective-c, memory-management, nscache

我正在使用在我的应用程序委托上创建并存储的 ARC 和 NSCache。然后我通过应用程序委托从控制器调用它。NSCache 在从 url 加载图像时存储图像，并且内存使用量上升得非常快。当我检查分析器的实际内存使用情况时，我的应用程序甚至达到了 320 MB 的内存使用情况，但在分配时它说它刚刚分配了 20-30 MB。

在我的应用程序委托上，我将缓存设置如下（它是一个 ivar）：

```
cache = [[NSCache alloc] init];
[cache setCountLimit:100];
[cache setTotalCostLimit:1500000];
[cache setEvictsObjectsWithDiscardedContent:YES]; 
```

我实现了一个按钮来试验 NSCache，当我点击它时，它会调用：

```
- (IBAction)eraseCache:(id)sender {
    [[appDelegate cache] removeAllObjects];
} 
```

在分析器上，使用的内存没有下降，但它实际上又开始获取图像，所以我知道删除的对象。如何使用 ARC 随意释放此内存使用量？如何获取缓存的大小以知道何时释放它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:25:05.307

在 ARC 中，一旦没有指向对象的指针，它就会自动释放。如果您拥有的唯一指向该对象的指针在缓存中，那么它们已被释放。

请注意，您实际上不必删除对象；如果将指针分配给新对象（结果它不再指向旧对象），则旧对象将被释放。

```
Ex:
NSArray *array = [NSArray new];
array = [NSArray new]; //the original array gets deallocated because nothing points to it. 
```

从 NSCache 类参考：

> NSCache 类包含各种自动删除策略，确保它不会使用过多的系统内存。如果其他应用程序需要内存，系统会自动执行这些策略。调用时，这些策略会从缓存中删除一些项目，从而最大限度地减少其内存占用。

# iphone - 适用于频繁轮询的应用的免费和付费反向地理编码服务

> ID：11691790
> 
> 赞同：0
> 
> 时间：2012-07-27T16:20:32.260
> 
> 标签：iphone, ios4, geocoding, reverse-geocoding

我正处于应用程序的规划阶段，它需要经常轮询某人的位置。根据您所在的位置，应用程序将受到影响。我不需要存储这些数据，只需要实时使用。

我可以使用免费服务，但其中很多都有使用限制，我觉得我会很快遇到这种应用程序。我可以添加一个签入功能，这样我就不会进行太多轮询，但我希望它是无缝的。编辑-我也不需要显示我只需要知道位置的地图。

我可以使用哪些好的服务？

如果我的应用程序运行良好，如果我的应用程序需要它，我可以转到付费应用程序，但它不会很贵，因为我是一个单一的开发人员。所以也请列出付费的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:20:07.383

我不明白你必须做什么。如果您必须反转地理编码一个精确的坐标，iOS SDK 内置了这个功能。

在 5.0 之前的 iOS 中，您可以使用 MKReverseGeocoder 和 MKReverseGeocoderDelegate 方法，该方法返回给您一个 MKPlacemark。这个对象不是很有用，因为没有足够的信息。

从 iOS 5.0 开始，您可以使用非常强大的 CLGeocoder 对象来检索 CLPlacemark 数组。这个对象存储了很多信息。

您可以在[此处阅读 CLGeocoder 的官方苹果文档](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009573)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T20:30:28.647

也可以看看[Geocoda](http://geocoda.com "地理科达")。它具有全球地理编码数据，对开发人员规模的帐户免费，并且对于任何生产场景价格合理。免责声明：我在 Geocoda 工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:26:04.107

MapBox 提供了设计精美地图并将其集成到 Web 和移动应用程序中所需的一切。

[http://mapbox.com/foursquare/](http://mapbox.com/foursquare/)

# winforms - 如何将 datagridview 定位到搜索到的文本输入

> ID：11691797
> 
> 赞同：1
> 
> 时间：2012-07-27T16:21:13.877
> 
> 标签：winforms, c#-4.0, linq-to-sql, datagridview, find

使用 Windows 表单和 linq to Sql，我将一个 datagridview 绑定到 Products Table，我添加到表单 1 Textbox 以输入搜索到的文本。我想知道如何根据输入的文本定位 datagridview 以查找给定的 ProductName。这里我不想过滤行，我只想在输入每个字符后重新定位数据网格，使用的代码：

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        var searchValue = textBox1.Text.Trim().ToUpper();
        var qry = (from p in dc.Products
                   where p.ProductName.ToUpper().StartsWith(searchValue)
                   select p).ToList();
        int itemFound = productBindingSource.Find("ProductName", searchValue);
        productBindingSource.Position = itemFound;
    } 
```

代码的执行给出了下一个错误： System.NotSupportedException 未处理：

```
int itemFound = productBindingSource.Find("ProductName", searchValue); 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:52:35.520

的[MSDN 文档`BindingSource`](http://msdn.microsoft.com/en-us/library/ms158165.aspx)有答案：

> Find 方法只能在底层列表是实现了搜索的 IBindingList 时使用。此方法只是将请求引用到基础列表的 IBindingList.Find 方法。例如，如果基础数据源是 DataSet、DataTable 或 DataView，则此方法将 propertyName 转换为 PropertyDescriptor 并调用 IBindingList.Find 方法。Find 的行为，例如没有找到匹配项时返回的值，取决于底层列表中方法的实现。

当您在其基础数据源未实现 IBindingList 的 BindingSource 上调用此方法时，您会看到异常（由[IBindingList.FindCore](http://msdn.microsoft.com/en-us/library/ms132695.aspx)的默认实现抛出：

> System.NotSupportedException：不支持指定的方法。

您没有显示将绑定源绑定到的内容，但显然它没有实现此方法。

令人讨厌的是，用于数据源`BindingList<T>`的*推荐*列表类型不提供`FindCore`实现。

如果您使用的是 BindingList，则需要创建自己的自定义类型。这是支持查找的 BindingList 的绝对简单实现的代码：

```
public class FindableBindingList<T> : BindingList<T>
{

    public FindableBindingList()
        : base()
    {
    }

    public FindableBindingList(List<T> list)
        : base(list)
    {
    }

    protected override int FindCore(PropertyDescriptor property, object key)
    {
        for (int i = 0; i < Count; i++)
        {
            T item = this[i];
            if (property.GetValue(item).Equals(key))
            {
                return i;
            }
        }
        return -1; // Not found

    }
} 
```

您可以使用自己的 BindingList 实现做很多事情，例如支持排序。我将我的答案作为支持 find 方法的最低要求。如果您想了解更多信息，请搜索 SortableBindingList。

* * *

要使用此类，请执行以下操作：

```
var qry = (from p in dc.Products
               where p.ProductName.ToUpper().StartsWith(searchValue)
               select p).ToList();    

FindableBindingList<YourType> list = new FindableBindingList<YourType>(qry);

dataGridView1.DataSource = list; 
```

# jquery - Javascript自定义函数错误

> ID：11691799
> 
> 赞同：1
> 
> 时间：2012-07-27T16:21:32.503
> 
> 标签：jquery, arguments, javascript

```
function classChanger(path,changeClass,duration){
    $(path).removeClass(changeClass);
    $(this).addClass(changeClass);
)};

$('.flightDetails .option').classChanger('.flightDetails .option','selected',300); 
```

我正在尝试创建可重用的功能。控制台日志：**TypeError: $(".flightDetails .option").classChanger is not a function**

感谢您的帮助和时间:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:24:01.463

你必须`classChanger`在 jQuery 原型上声明你的：

```
$.fn.classChanger = function(path, changeClass, duration) {
    $(path).removeClass(changeClass);
    return this.addClass(changeClass);
}; 
```

有关更多信息，请阅读[jQuery 插件创作指南](http://docs.jquery.com/Plugins/Authoring)。

* * *

**更新：**正如评论中所指出的，如果您打算`path`和选择器始终相同，您应该`path`完全放弃，而只使用`this`自始至终。

由于您没有确切指定您要做什么，我假设您要删除该类，然后等待`duration`指定然后重新添加该类。如果是这种情况，这里有一些示例代码：

```
$.fn.classChanger = function(changeClass, duration) {
    var $this = this;

    setTimeout(function() {
        $this.addClass(changeClass);
    }, duration);

    return this.removeClass(changeClass);
};

$('.flightDetails .option').classChanger('selected', 300); 
```

这是小提琴：http: [//jsfiddle.net/ur7SN/](http://jsfiddle.net/ur7SN/)

# c++ - 在 C++ 应用程序中保存/加载工作区

> ID：11691801
> 
> 赞同：0
> 
> 时间：2012-07-27T16:21:36.347
> 
> 标签：c++, windows, user-interface

我正在为现有程序添加新功能。它基本上是一个保存/加载工作区功能，用户可以在其中保存窗口的位置，然后通过选择菜单项随时加载所述位置。为了实现这一点，我创建了代码来提取窗口的屏幕坐标并将它们写入文件（如下）：

```
void CMainFrame::SaveWorkspace()
{

RECT ctrlsize;
m_pDialog->GetWindowRect((LPRECT)&ctrlsize);  //obtains location for window
ofstream Workspace("saveone", ios::out);
Workspace << ctrlsize.left << "," << ctrlsize.top << "," << ctrlsize.right << "," << ctrlsize.bottom;

} 
```

这（应该）加载工作区：

```
void CMainFrame::LoadWorkspace()
{

 //Read in the data from the file
int data[3][4];
int r=0;
int a=0;
int b=0;

ifstream infile;

infile.open("saveone");
for(a = 0; a< 3; a++)
{
for(b = 0;b<4;b++)
{
  infile >> data[a][b];
  cout << data[a][b];
}
}

infile.close();

//Now, assign the extracted values
RECT ctrlset;

ctrlset.top = data[0][1];
ctrlset.left = data[0][0];
ctrlset.right = data[2][0];
ctrlset.bottom = data[0][3];
// Finally, reassign the window positions

m_pDialog->SetWindowPos(NULL, ctrlset.left, ctrlset.top, (ctrlset.right - ctrlset.left),     (ctrlset.bottom - ctrlset.top), SWP_SHOWWINDOW);

} 
```

问题：

1) SaveWorkspace 功能零星工作；通常，它不会创建文件。2) LoadWorkspace 功能不起作用。具体来说，只有 data[0][0] 坐标被保存到数组中（文件中的第一个值）。

这似乎是一件相当容易的事情，我有点尴尬，它给我带来了这么多麻烦......

编辑：我已经解决了问题 #1。现在我只需要弄清楚为什么我的阵列不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:38:09.027

你在阅读中至少有两个问题。

1.  你的数组定义是错误的。这是 ：

    数据[2][3]；

这只有 6 个值。但是，在循环中，您正在读取 12 个值。

1.  您在文件中有“，”值。你并没有摆脱它们。也许作为一个简单的解决方案，您可以在编写每个条目后添加一个新行。或者您可以在一行上输入单个矩形的详细信息，然后阅读整行并自己解析各个组件。

# testing - 最后一分钟范围变更？当然为什么不呢？

> ID：11691802
> 
> 赞同：0
> 
> 时间：2012-07-27T16:21:36.543
> 
> 标签：testing, scope, regression, sdlc

有没有人可以发送关于在软件版本中引入最后一分钟要求或范围的危险的文章？常识对吗？然而，忽视常识是人类的天性。

我有一群业务利益相关者声称在前世拥有所有这些“IT/软件工程”经验，但又反复问为什么他们不能在 UAT 期间或有时甚至在 UAT 之后增加范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:31:44.017

并不少见的问题，是的，它发生了。:)

我了解 COST 是固定的，因为客户不愿意为所要求的额外范围支付任何额外费用。那是对的吗？

如果是这种情况，这可能就是您的项目文档的“验收标准”出现的地方。UAT 是否已签署？如果是这样，您手头有一个更好的案例，可以将额外的范围作为一个附加项目，但需要额外的时间和成本。如果您没有明确定义的“接受标准”，您需要说服为什么这是一个额外的努力。

以上纯粹是从业务和成本的角度来看。从工程的角度来看 - 是的，毫无疑问，由于涉及额外的规划、测试和“回归测试”、文档和交付周期，它会带来额外的开销。也许还会根据要添加的附加范围进行代码重构。“支持您的论点，软件项目的额外范围不仅仅是在多层建筑中增加一层，您可以专注于正在添加的新楼层。” 也许您向您的高级管理人员或业务用户（您需要的任何人）解释这一点，以便至少从下一次开始将此类范围更改最小化。（请记住，它们只能在现实世界中最小化，而不能像在理想世界中那样被取消）

稍微偏离你的问题，一天结束 - 必须从所有不同的角度看待一个项目 - 质量，时间和成本，你不能同时满足所有这些。因此，如果您是项目经理，您需要发表自己的意见 - 可能会根据具体情况要求额外的时间或额外的资源。与其在项目结束时受到打击，不如承担责任并立即站出来以更清楚地确定范围和时间。

如果您下次需要更好地处理它，请查看这些合同模型是否对您有帮助 - [http://www.derailleurconsulting.com/blog/three-contract-models-for-scrum-projects](http://www.derailleurconsulting.com/blog/three-contract-models-for-scrum-projects)。

话虽如此，我也承认在某些情况下，作为项目经理，我不得不接受有限的额外范围（无需额外费用），我将“客户满意度和客户保留”放在首位。一旦客户与我们建立了长期关系，我们就更容易在范围界定问题以及如何花费额外的努力等问题上说服客户。一天结束时，我们无法摆脱业务规则和我们正在解决的不仅仅是一个工程问题。

# scala - 如何解析为Scala中的类型

> ID：11691804
> 
> 赞同：1
> 
> 时间：2012-07-27T16:21:48.027
> 
> 标签：scala, parser-combinators

我正在尝试在 Scala 中编写一个解析器，以逐渐建立具体的类型层次结构。我开始：

```
private def word   = regex(new Regex("[a-zA-Z][a-zA-Z0-9-]*")) 
private def quicktoken: Parser[Quicktoken] = "/" ~> word <~ "/" <~ (space?) ^^ { new Quicktoken(_) } 
```

这很好。/hello/ 将被解析为快速令牌

现在我想将 quicktoken 添加到复合表达式中。我有一堂课

```
class MatchTokenPart(word:String,quicktoken:RewriteWord){
} 
```

我本来以为我可以写...

```
private def matchTokenPartContent: Parser[MatchTokenPart] = word<~equals~quicktoken ^^ { case word~quicktoken => new MatchTokenPart(word, quicktoken)} 
```

但它不起作用。它说 word 是 Option[String] 类型和 String 类型的 quicktoken。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:16:30.983

另一个优先级问题：`a <~ b ~ c`被解释为`a <~ (b ~ c)`，而不是`(a <~ b) ~ c`。这是因为以 , 开头的中缀运算符的`<`优先级低于以 , 开头的运算符`~`（参见[语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)6.12.3 中的列表）。

你想要`(word <~ equals) ~ quicktoken`，所以你需要提供括号。

# javascript - 仅在文本框中输入文本时显示 X 按钮

> ID：11691813
> 
> 赞同：2
> 
> 时间：2012-07-27T16:22:34.170
> 
> 标签：javascript, jquery, css

我正在使用[此处](http://viralpatel.net/blogs/clearable-textbox-jquery/)提供的插件通过单击 X 按钮来删除文本框中的文本。如何修改代码以使 X 按钮仅在文本框中输入文本时显示？我尝试在 JavaScript 代码中设置返回值的条件：`if ($('#search').val().length != 0)`但它起作用了。这是我尝试过的代码：

```
$(document).ready(function(){
    if ($('#search').val().length != 0){
        $('#search').clearable();
        $('.divclearable').show();
    }
    else{
        $('.divclearable').hide();
    }
}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:26:18.553

添加`keyup`监听器 -

```
$(function () {
    $("#search").on("keyup", function() {
        if ($('#search').val().length != 0){
            $('#search').clearable();
            $('.divclearable').show();
        }
        else{
            $('.divclearable').hide();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:30:38.517

查看 CSS，按钮似乎是`clearlink`类的一部分。

您只需将`$("a.clearlink").hide()`其隐藏即可。

**这将处理简单按键以外的事件**：

```
$('.divclearable > input').change(
    function() 
    {
        if($(this).val().length == 0)
           $(this).closest('a.clearlink').hide();
        else
           $(this).closest('a.clearlink').show();
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:32:55.633

我不确定当元素的文本被 javascript 更改时是否会触发 jquery 更改事件。

您可能希望将单击事件附加到清除按钮，以便它在清除文本之外隐藏自身。我不确定这是否与您正在使用的库的事件处理程序冲突......

```
$("#search").change(check_input);
$('.divclearable').click(check_input);
check_input = function(){
    if ($('#search').val().length != 0){
        $('#search').clearable();
        $('.divclearable').show();
    }
    else{
        $('.divclearable').hide();
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T16:34:05.670

我会和你谈谈逻辑，你应该自己实现：有一个名为“clearlink”的css类，它显示关闭按钮。修改它并将初始值设置为：显示：无，然后在您的 Jquery 代码中，当您检测到长度更改时，为它提供方法更改显示：无以阻止。或将 clearlink 复制为 clearlink1 并更改元素的类名。

只需在浏览器中使用检查元素功能。

# java - JAX-RS CXF 异常包装

> ID：11691815
> 
> 赞同：1
> 
> 时间：2012-07-27T16:22:37.307
> 
> 标签：java, cxf, jax-rs, cxfrs

我想向 CXF (2.6.1) 添加一个 ExceptionMapper，它不仅可以传达响应代码，而且还以有效负载格式发送异常（我现在使用的是 JSON）。

```
@Provider
public class CustomExceptionMapper
        implements
            ExceptionMapper<MyException>
{
...
@Override
public Response toResponse(MyException mex)
{
//I need something here which can convert mex object to JSON and ship it in response
// I want this to be de-serialized on client

//the following returns the status code
return Response.status(Response.Status.BAD_REQUEST).build();
}
...
} 
```

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:28:45.313

您可能需要使用 @Produces 将您的对象序列化为 JSON，例如：

```
@Produces(MediaType.APPLICATION_JSON) 
```

进而`return Response.ok().entity(OBJECT).build();`

您可以测试服务的方式：

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
WebResource service = client.resource(getBaseURI());
ClientResponse response = service.path(ADDRESS).type("application/json").get(ClientResponse.class);
String s = response.getEntity(String.class);
System.out.println(s); 

private static URI getBaseURI() {
        return UriBuilder.fromUri(SERVER ADDRESS).build();
} 
```

# compression - Lempel-Ziv 76 复杂度

> ID：11691818
> 
> 赞同：0
> 
> 时间：2012-07-27T16:23:03.997
> 
> 标签：compression, complexity-theory, lempel-ziv-76

有人可以向我解释 Lempel-Ziv 76 的复杂性吗？我的印象是您使用字典中字符串的第一个字母进行初始化，然后检查后续块是否存在于前一个子字符串中，每次找到子字符串时都会增加一个字母。如果前一个子字符串中不存在子字符串，则该子字符串称为块，下一个字母成为要搜索的下一个子字符串。

例如，

```
01011010001101110010 
```

`0|1`

因为 1 不在 0 中，所以我们得到`0|1|0`

因为 0 在 01 中，所以我们得到`0|1|01`

因为 01 在 01 中，所以我们得到`0|1|011|0`

因为 0 在 01011 中，所以我们得到`0|1|011|01`

因为 01 在 01011 中，所以我们得到`0|1|011|010`

因为 010 在 01011 中，所以我们得到`0|1|011|0100|0`

依此类推，直到我们`0|1|011|0100|011011|1001|0`得到

如有必要，最后一个字母可以重复。

我究竟做错了什么？因为有人告诉我，对于字符串 1111111，分解为 1|111111。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:50:57.663

我同意你的分解：

> 01011010001101110010 -> 0.1.011.0100.011011.1001.0

我也相信你被告知的是正确的：

> 1111111 -> 1.111111

但是，您如何得出原始分解并不完全正确！因此对分解 1111111 感到困惑。我认为，根据您的推理：

> 1111111 -> 1.11.1111

**我很确定**这是不正确的。

对现有单词（块）序列的扩展并不像检查扩展之前是否显示为先前历史的子字符串那么简单。它归结为Lempel 和 Ziv 在他们的论文*On the Complexity of Finite Sequences 中描述的扩展的**可再现*性概念（我假设这就是您正在研究的内容！）。形成一个扩展，使其成为**不可复制的最短单词*****从以前的历史来看。他们描述的扩展的可再现性概念相当复杂，但归结为能够在以前的历史中找到一个起始位置，您可以从该起始位置顺序复制符号，到历史的结尾，形成扩展。***

 ***从您的原始序列中，假设符号的位置从 1 到 20。第一个符号本身始终是一个单词/块：

> 0。

下一个扩展不能从以前的历史中重现：

> **0.** 1.

下一个扩展是：

> **0.1。**011.

不能为 0 或 01 的原因如下： 0 可以从之前的历史中重现，通过从位置 1 复制一个符号到末尾；01 可通过将两个符号从位置 1 复制到末尾来重现；011 不可重现。

下一个扩展是：

> **0.1.011。**0100。

0 可通过将一个符号从位置 1 复制到末尾来重现；01 可通过将两个符号从位置 1 复制到末尾来重现；010 可通过将三个符号从位置 1 复制到末尾来重现；0100 不可​​重现。

等等。

1111111的分解如下：第一个符号本身就是一个块：

> 1.

下一个扩展是：

> **1.** 111111

1 可通过将一个符号从位置 1 复制到上一个历史记录的末尾来重现。通过将两个符号从位置 1 复制到末尾，可以重现图 11。这就是复杂的地方 - 在这种情况下，当您复制两个符号时，复制的源实际上延伸到了前一个历史记录的末尾！换句话说，**您复制的第二个 1 实际上是将第一个 1 复制到 end 所产生的扩展的一部分**。*同样，由于这种递归复制*过程，111、1111、11111、111111 都是可重现的。然而，由于我们现在已经到达原始序列的末尾，最后一个扩展被认为是 111111。

希望我的解释有点道理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:02:16.747

[本文](http://fma2.math.uni-magdeburg.de/~goeloglu/06c.pdf)不同意你对算法的描述。根据论文，如果它与任何先前的分区都不匹配，则您有一个新分区。您不会像您所做的那样根据整个未分区的先前序列进行分区。因此，对于您的示例（我使用 . 而不是 | 进行分区，因为这样更易于阅读）：

```
01011010001101110010 
```

分为：

    0.1.01.10.100.011.0111.00.10

所以LZ76的重量是9（不是7）。

```
1111111 
```

分为：

```
1.11.111.1 
```

它们都提供了最终分区包含在前一个分区中的示例。因此，定义中的 < r 而不是 <= r。

我没有原始论文，所以我无法检查这篇论文是否弄错了。但是我怀疑他们错误地复制了原始论文中的定义。***

# java - Java Web Start 上的指纹

> ID：11691827
> 
> 赞同：1
> 
> 时间：2012-07-27T16:23:39.943
> 
> 标签：java, security, java-web-start, fingerprint, accesscontrolexception

当我启动我的应用程序时，我收到以下消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.ExceptionInInitializerError
    at com.digitalpersona.onetouch.jni.Matcher.<clinit>(Matcher.java:8)
    at com.digitalpersona.onetouch.processing._impl.DPFPEnrollmentFactoryImpl$EnrollmentImpl.<init>(DPFPEnrollmentFactoryImpl.java:40)
    at com.digitalpersona.onetouch.processing._impl.DPFPEnrollmentFactoryImpl.createEnrollment(DPFPEnrollmentFactoryImpl.java:20)
    at Formularios.CapturaHuella.<init>(CapturaHuella.java:245)
    at Formularios.CapturaHuella$10.run(CapturaHuella.java:561)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "loadLibrary.otmcjni")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkLink(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.digitalpersona.onetouch.jni.MatchingLibrary.<clinit>(MatchingLibrary.java:16)

... 19 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T16:24:37.980

这意味着您没有安装指纹驱动程序：

[http://www.digitalpersona.com/support/downloads/software-updates/reader-engine/](http://www.digitalpersona.com/support/downloads/software-updates/reader-engine/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:32:28.610

*AccessControlException*表明您无权将 DLL otmcjni.dll 加载到**您**的 Java 进程中。

确保您已*签署*JAR 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:27:32.343

通常，当您有一些静态初始化块并且出现问题时会发生这种情况 - 主要是由于 NullPointerException。尝试仔细调试这个初始化块

# c - printf中的*有什么用？

> ID：11691829
> 
> 赞同：3
> 
> 时间：2012-07-27T16:23:52.923
> 
> 标签：c, printf

我有这个代码：

```
#include <stdio.h>
#include <conio.h>
void main()
{
    int n = 5;
    clrscr();
    printf("n=%*d", n);
    getch();
} 
```

我得到的输出是：`n= 5`. 为什么会有空间？它是如何产生的？代码中有什么用`*`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T16:25:47.193

如有疑问，请阅读[文档](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)：

> `*`：
> 
> 宽度未在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。

但是，您似乎用错了。使用它的正确方法是这样的：

```
printf("n=%*d", 2, n); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:26:48.050

有了这个`*`，您可以使用变量设置打印的宽度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T16:36:27.820

[C手册](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)中明确提到了这一点。

[Richard J. Ross III](https://stackoverflow.com/users/427309/richard-j-ross-iii)已经给出了答案。只是再次引用手册中所说的内容。

> *宽度*未在格式字符串中指定，*而是*作为必须格式化的参数之前的附加整数值参数。

考虑这段代码：

```
#include<stdio.h>

main()
{
    int a,b;
    float c,d;

    a = 15;
    b = a / 2;
    printf("%d\n",b);
    printf("%3d\n",b);
    printf("%03d\n",b);

    c = 15.3;
    d = c / 3;
    printf("%3.2f\n",d);
} 
```

输出将是：

```
7
   7
007
5.10 
```

您可以在此处查看该`printf`函数如何用于格式化输出。希望能帮助到你。:)

# javascript - Javascript 应用程序作为具有外部依赖项的 AMD 模块

> ID：11691831
> 
> 赞同：1
> 
> 时间：2012-07-27T16:23:54.413
> 
> 标签：javascript, jquery, requirejs, js-amd, curljs

我正在编写一个应该托管在各种站点上的 Javascript 应用程序。应用程序本身使用 jQuery 和 jQuery UI。我知道`jQuery.noConflict(true)`技巧并目前正在使用它，以免污染全球空间。我的目标是始终将 jQuery 及其任何插件保留在我的应用程序本地，以免与托管站点上的任何内容发生冲突。托管站点应该可以加载自己的 jQuery（可能是不同的版本）并添加一些插件。

现在，我想将应用程序构建为 AMD 模块。我可以要求托管站点使用 AMD 加载器（require.js、curl 等），但我不想要求任何特定的加载器——只要符合 AMD API 的任何东西（是的，我知道它是还没有 100% 准备好）。

有可能吗？我能否以可互操作的方式进行操作，以便托管站点可以使用例如 requirejs、curl 或 Dojo AMD 加载程序？

例如，有了这个：

```
define(['jquery'], function($) {
    var myLocaljQuery = $.noConflict(true);

    ... my app module implementation here ...

}); 
```

如何指定我的应用程序要使用的 jQuery 路径？据我了解，我不能做这样的事情：

```
require.config({
    paths: {
       'jquery' : 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min'
    }
});

define(['require'], function(require) {
    require(['jquery'], function($) {
        var myLocaljQuery = $.noConflict(true);

        ... my app module implementation here ...
    });
}); 
```

因为第一个`require`是全局对象，这是特定于 requirejs 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:25:53.967

在做了更多的研究之后，我认为目前是不可行的。至少一方面 - 模块 ID 在 AMD 上下文中是全局的，所以我不能简单地在我的应用程序中使用“jquery”或“jquery-ui”模块 ID，并确保当有人托管我的应用程序时不会有任何冲突并且想通过 AMD 使用 jQuery（可能是其他版本）。参见例如[这里](https://github.com/cujojs/curl/wiki/Using-curl.js-with-jQuery)：

> curl.js 不能防止与可能将其他版本的 jQuery 加载为 AMD 模块的第三方脚本发生冲突。

据我了解，AMD 旨在将您自己的应用程序中的东西模块化。它对与第三方应用程序的集成没有太多支持，至少在您想要进行一些封装以避免冲突时不支持。

# c# - 从可枚举的内容构造 C# 列表

> ID：11691832
> 
> 赞同：4
> 
> 时间：2012-07-27T16:23:54.293
> 
> 标签：c#, arrays, list, collections, ienumerable

```
var t = new List<byte?[,]>();
var t2 = new byte?[4, 4][];

var r = new List<byte?[,]>(t);
var r2 = new List<byte?[,]>(t2); // error 
```

我认为 C# 列表和数组都是可枚举的，并且可以从可枚举对象构造列表以创建集合的副本。

上面示例的最后一行有什么问题？

编译错误：“List.List(IEnumerable)”的最佳重载方法匹配有一些无效参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:50:39.203

如果`t2`应该是二维数组的数组（列表分配建议如此），那么声明`t2`是错误的。如果认为你在追求：

```
var t = new List<int[,]>();
var t2 = new int[10][,];
for (int i = 0; i < t2.Length; ++i)
{
    t2[i] = new int[4, 4];
}

var r = new List<int[,]>(t);
var r2 = new List<int[,]>(t2); // no error! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:31:41.787

> 上面示例的最后一行有什么问题？

该行引发错误，因为 t2 是`new byte?[4, 4]`二维数组的数组，而 r2 是`List of byte?[,]`二维数组

```
var r2 = new List<byte?[,]>(t2); // error 
```

所以解决方案会像这样传递`list of byte?[,]`一个

```
var r2 = new List<byte?[,]>(new List<byte?[,]>()); 
```

t 也是列表中匹配的二维数组，可以在 r2 中传递

```
var r2 = new List<byte?[,]>(t); 
```

# googletest - Googletest：在测试套件中组合测试

> ID：11691835
> 
> 赞同：3
> 
> 时间：2012-07-27T16:24:06.917
> 
> 标签：googletest

我正在尝试谷歌测试。

以前我一直在使用 Boost 测试，我一直在使用宏 BOOST_AUTO_TEST_SUITE 将我的测试分组到一个测试套件中。

这使得 junit 报告更具可读性。

我没有在 googletest 中找到如何执行此操作或类似操作的提示。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:59:43.260

我使用调用 TEST() 或 TEST_F() 的第一个参数作为“测试套件”标识符，如下所示：

```
TEST(TestSuiteName, shouldExpectTrue) {
    EXPECT_TRUE(true);
}

TEST(TestSuiteName, shouldExpectFalse) {
    EXPECT_FALSE(false);
} 
```

当然，当使用带有 TEST_F() 的夹具类时，您的 TestSuiteName 需要与您的夹具类的名称相匹配，因此有必要为每个测试套件创建一个单独的夹具类。

我知道没有办法将测试套件分解为子套件或类似的东西，但当然，如果你想清理你的 --gtest_filter="someFilter" 选项，你当然可以多次运行测试输出。

# javascript - 部分 jQuery 未执行

> ID：11691840
> 
> 赞同：2
> 
> 时间：2012-07-27T16:24:53.797
> 
> 标签：javascript, jquery

我的问题如下：

当我对此进行测试时，未执行标记为未执行的部分。该点之前的其余代码工作正常，但在那一行之后没有任何反应。

我错过了什么吗？我正在使用 firebug 运行 Firefox，我可以看到 vars（已注册、groupcontracting 和第三方）被定义为 1 或 0 .. 但它们在“未执行”行下方的代码中看不到.

```
$(document).ready(function () {

    $('#restofform').css('display', 'none');
    $('#pharmdata').css('display', 'none');
    $('#form_bottom').css('display', 'none');
    $('#nextsteps').css('display', 'none');
    $('#group_status_message').css('display', 'none');
    $("#Affiliation").css('display', 'none');
    $("#affiliation_note").css('display', 'none');
    $("#AffiliationLabel").css('display', 'none');
    $("#affilitation").css('display', 'none');

    var enrolled;
    var groupcontracting;
    var thirdparty;

    $('#UserNumber').keyup(function check_enrollment() {

        //get the userid
        var userid = $('#UserNumber').val();
        var input_length = $("#UserNumber").val().length;

        function populate(frm, data) {
            $.each(data, function (key, value) {
                $('[id=' + key + ']', frm).val(value);
            });
        }

        if (input_length >= 7) {
            //network enrollment check
            var enlink = "enrollment_check.php?userid =" + userid;
            var gpclink = "group_contracting_check.php?userid =" + userid;
            var bncdlink = "thirdparty_check.php?userid =" + userid;
            $.getJSON(enlink, function (result) {
                console.log(result);

                if (jQuery.isEmptyObject(result)) {
                    //show that the pharmacy is not enrolled
                    $('#enroll_status').addClass('badge badge-inverse');
                    $('#enroll_status').html('Not Enrolled');
                    enrolled = '0';
                    console.log(enrolled);

                } else if (!jQuery.isEmptyObject(result)) {
                    //show that the pharmacy is enrolled
                    $('#enroll_status').addClass('badge badge-success');
                    $('#enroll_status').html('Enrolled');
                    enrolled = '1';
                    console.log(enrolled);
                }
            });
            // end of network enrollment check  

            // group contracting affiliation check
            $.getJSON(gpclink, function (gcresult) {
                console.log(gcresult);

                if (!jQuery.isEmptyObject(gcresult)) {
                    //show that the username is available
                    $('#group_status').addClass('badge badge-success');
                    $('#group_status').html('Group Affiliated');
                    groupcontracting = '1';
                    console.log(groupcontracting);

                } else if (jQuery.isEmptyObject(gcresult)) {
                    //show that the username is NOT available
                    groupcontracting = '0';
                    console.log(groupcontracting);
                }
            });
            // end of group contracting check

            // third party contractual relationship check
            $.getJSON(bncdlink, function (bdresult) {
                console.log(bdresult);

                if (!jQuery.isEmptyObject(bdresult)) {
                    //show that the username is available
                    $('#thirdparty_status').addClass('badge badge-success');
                    $('#thirdparty_status').html('Third Party');
                    thirdparty = '1';
                    console.log(thirdparty);

                } else if (jQuery.isEmptyObject(bdresult)) {
                    //show that the username is NOT available
                    thirdparty = '0';
                    console.log(thirdparty);
                }
            });
            //end of third party check

            // ***********THIS PART IS NOT BEING EXECUTED *************
            // check to see what the variables are set to and display accordingly

            if ((enrolled == '0') && (groupcontracting == '0') && (thirdparty == '0')) {

                // set hidden fields 
                $('input[name=enrolled]').val('0');
                $('input[name=groupcontracting]').val('0');
                $('input[name=thirdparty]').val('0');
                //show and hide appropriate parts of forms
                $('#restofform').css('display', '');
                $('#form_bottom').css('display', '');
                $('#pharmdata').css('display', 'none');
                $('#nextsteps').css('display', '');
                $('#form_continue').attr('disabled', true);
                $('#form_continue').css('display', 'none');
                $('#form_enroll').attr('disabled', false);
                $('#form_enroll').css('display', '');
                // enable form fields
                $('#FirstName').attr('disabled', false);
                $('#LastName').attr('disabled', false);
                $('#EmailAddress').attr('disabled', false);
                $('#HomePhone').attr('disabled', false);
                $('#FaxNumber').attr('disabled', false);
                $('#CompanyName').attr('disabled', false);
                $('#Role').attr('disabled', false);
                $('#Comments').attr('disabled', false);
                //display third party message since the Pharmacy will need to sign with them.
                $('#steps').append('<li>This would be the third party statement, letting the pharmacy know that the third party will be contacting them.</li>');

            } else if ((enrolled == '0') && (groupcontracting == '1') && (thirdparty == '0')) {

                // set hidden fields 
                $('input[name=enrolled]').val('0');
                $('input[name=groupcontracting]').val('1');
                $('input[name=thirdparty]').val('0');
                //show and hide appropriate parts of forms
                $('#restofform').css('display', '');
                $('#form_bottom').css('display', '');
                $('#pharmdata').css('display', 'none');
                $('#nextsteps').css('display', '');
                $('#form_continue').attr('disabled', true);
                $('#form_continue').css('display', 'none');
                $('#form_enroll').attr('disabled', false);
                $('#form_enroll').css('display', '');
                // enable form fields
                $('#FirstName').attr('disabled', false);
                $('#LastName').attr('disabled', false);
                $('#EmailAddress').attr('disabled', false);
                $('#HomePhone').attr('disabled', false);
                $('#FaxNumber').attr('disabled', false);
                $('#CompanyName').attr('disabled', false);
                $('#Role').attr('disabled', false);
                $('#Comments').attr('disabled', false);
                //display third party message since the Pharmacy will need to sign with them.
                $('#steps').append('<li>This would be the third partystatement, letting the pharmacy know that the third party will be contacting them.</li>');
                // show message to Pharmacy that they can enroll, but their group contracting entity will enroll them in products
                $('#steps').append('<li>As a pharmacy currently affiliated with a group contracting entity, you will be able to enroll in the network, but enrollment in the Preferred Network will be handled by your group contracting entity.</li>');

            } else if ((enrolled == '0') && (groupcontracting == '0') && (thirdparty == '1')) {

                // set hidden fields 
                $('input[name=enrolled]').val('0');
                $('input[name=groupcontracting]').val('0');
                $('input[name=thirdparty]').val('1');
                //show and hide appropriate parts of forms
                $('#restofform').css('display', '');
                $('#form_bottom').css('display', '');
                $('#pharmdata').css('display', 'none');
                $('#nextsteps').css('display', '');
                $('#form_continue').attr('disabled', true);
                $('#form_continue').css('display', 'none');
                $('#form_enroll').attr('disabled', false);
                $('#form_enroll').css('display', '');
                // enable form fields
                $('#FirstName').attr('disabled', false);
                $('#LastName').attr('disabled', false);
                $('#EmailAddress').attr('disabled', false);
                $('#HomePhone').attr('disabled', false);
                $('#FaxNumber').attr('disabled', false);
                $('#CompanyName').attr('disabled', false);
                $('#Role').attr('disabled', false);
                $('#Comments').attr('disabled', false);

            } else if ((enrolled == '1') && (groupcontracting == '0') && (thirdparty == '0')) {

                // set hidden fields 
                $('input[name=enrolled]').val('1');
                $('input[name=groupcontracting]').val('0');
                $('input[name=thirdparty]').val('0');
                //show & populate and hide appropriate parts of forms
                $('#restofform').css('display', 'none');
                $('#pharmdata').css('display', '');
                $('#form_bottom').css('display', '');
                $('#nextsteps').css('display', '');
                $('#form_continue').attr('disabled', false);
                $('#form_continue').css('display', '');
                $('#form_enroll').attr('disabled', true);
                $('#form_enroll').css('display', 'none');
                populate('#pharmdata', result); // set as the div the fields are in and NOT the form
                // disable form fields
                $('#FirstName').attr('disabled', true);
                $('#LastName').attr('disabled', true);
                $('#EmailAddress').attr('disabled', true);
                $('#HomePhone').attr('disabled', true);
                $('#FaxNumber').attr('disabled', true);
                $('#CompanyName').attr('disabled', true);
                $('#Role').attr('disabled', true);
                $('#Comments').attr('disabled', true);
                // show message to Pharmacy that they should check their info before proceding
                $('#steps').append('<li>If any of your information needs to be updated, please click <a href="mailto:network@company.com">here</a> to email our network support team.</li>');
                //display third partymessage since the Pharmacy will need to sign with them.
                $('#steps').append('<li>This would be the third party statement, letting the pharmacy know that the third party will be contacting them.</li>');

            } else if ((enrolled == '1') && (groupcontracting == '1') && (thirdparty == '0')) {

                // set hidden fields 
                $('input[name=enrolled]').val('1');
                $('input[name=groupcontracting]').val('1');
                $('input[name=thirdparty]').val('0');
                // show message to Pharmacy that they are good to go and have nothing further to do.
                $('#group_status_message').html('<p class="content-p">As a pharmacy both currently a Network Member and affiliated with a group contracting entity, no further steps are required. You will be enrolled into the Preferred Network by your group contracting entity.</p>');

            } else if ((enrolled == '1') && (groupcontracting == '1') && (thirdparty == '1')) {

                // set hidden fields 
                $('input[name=enrolled]').val('1');
                $('input[name=groupcontracting]').val('1');
                $('input[name=thirdparty]').val('1');
                // show message to Pharmacy that they are good to go and have nothing further to do.
                $('#group_status_message').html('<p class="content-p">As a pharmacy both currently a Network Member and affiliated with a group contracting entity, no further steps are required. You will be enrolled into the Preferred Network by your group contracting entity.</p>');

            } else if ((enrolled == '1') && (groupcontracting == '0') && (thirdparty == '1')) {

                // set hidden fields 
                $('input[name=enrolled]').val('1');
                $('input[name=groupcontracting]').val('0');
                $('input[name=thirdparty]').val('1');
                //show & populate and hide appropriate parts of forms
                $('#restofform').css('display', 'none');
                $('#pharmdata').css('display', '');
                $('#form_bottom').css('display', '');
                $('#nextsteps').css('display', '');
                $('#form_continue').attr('disabled', false);
                $('#form_continue').css('display', '');
                $('#form_enroll').attr('disabled', true);
                $('#form_enroll').css('display', 'none');
                populate('#pharmdata', result); // set as the div the fields are in and NOT the form
                // disable form fields
                $('#FirstName').attr('disabled', true);
                $('#LastName').attr('disabled', true);
                $('#EmailAddress').attr('disabled', true);
                $('#HomePhone').attr('disabled', true);
                $('#FaxNumber').attr('disabled', true);
                $('#CompanyName').attr('disabled', true);
                $('#Role').attr('disabled', true);
                $('#Comments').attr('disabled', true);
                // show message to Pharmacy that they should check their info before proceding
                $('#steps').append('<li>If any of your information needs to be updated, please click <a href="mailto:network@company.com">here</a> to email our network support team.</li>');

            }

        }
    });
    // end of 3rd party contract check
    // end of all checks

}); // document.ready() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:32:10.207

如果您希望注册、组合同和第三方变量在全局范围内，您应该这样定义它们（即在 onready 函数之外）。如果打算将其作为默认值，您还可能希望将这些值显式设置为“0”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:31:45.833

你说的代码没有运行只是因为那些`$.getJSON`函数调用是异步的。

当 JavaScript 引擎到达第一个`if (...)`语句时，还没有任何`$.getJSON`方法返回值，因此 jQuery 很高兴地将其评估为“false”并直接跳过它，就像它应该做的那样。

尝试将该代码块包装在[$.ajaxStop()](http://api.jquery.com/ajaxStop/)包装器中：

```
$(document).ajaxStop(function() {
    // this code will run after all AJAX events have completed
}); 
```

# python - Django OperationalError at / (1045, "Access denied for user 'root'@'localhost' (using password: YES)")

> ID：11691850
> 
> 赞同：1
> 
> 时间：2012-07-27T16:25:28.740
> 
> 标签：python, mysql, django

好吧，它拒绝使用`root`，但我的设置是：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'stroiset74',                      # Or path to database file if using sqlite3.
        'USER': 'stroiset74',                      # Not used with sqlite3.
        'PASSWORD': '*****',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

有趣的是，`manage.py validate`仍然`manage.py syncdb`运行没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T07:09:55.010

我遇到了同样的问题，问题是我有一个带有数据库配置的 local_settings.py。更改了数据库密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-28T14:06:57.307

我通过在项目中全局搜索用户名解决了我的windows10上的问题，我发现settings.py和views.py都包含用户名和密码。

我只更改了settings.py中的配置，在views.py中更改密码后，django工作了。

# android - Android，菜单在顶部？

> ID：11691852
> 
> 赞同：1
> 
> 时间：2012-07-27T16:25:35.400
> 
> 标签：android

我按照以下指南操作：

[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

并创建了一个选项菜单。

但是菜单位于我的应用程序的右上角，我希望它位于底部，就像一个标签菜单。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:29:03.343

默认情况下，较新的设备（例如平板电脑）在右上角有菜单（如弹出式菜单）。较旧的设备底部有菜单（如选项卡式菜单）。他们就是这样。我的应用程序底部有我的 Android 2.2 手机的菜单，但在我的 4.0 平板电脑上，它位于右上角。

所以，回答你的问题 - 你没有做错任何事:)。

# java - 在 Java Web 应用程序中已经存在的会话中设置对象有用吗？

> ID：11691853
> 
> 赞同：2
> 
> 时间：2012-07-27T16:25:39.487
> 
> 标签：java, session

在我们使用 Struts 1 的 Java Web 应用程序中，我们有很多代码基本上是这样做的：

```
HttpSession session = httpServletRequest.getSession();
MyObject myObject = session.getAttribute(MY_OBJECT_KEY);

//code that mutates myObject - setting properties or whatever

session.setAttribute(MY_OBJECT_KEY, myObject); 
```

我的问题：最后一行 session.setAttribute(..) 是否必要？这对我来说似乎毫无意义 - 'myObject' 和 'session.getAttribute(..)' 指的是内存中的同一位置，对吧？那么不需要重新设置会话中的属性吗？这有什么我不知道的吗？该对象未实现文档中提到的 HttpSessionBindingListener。

我觉得我需要仔细检查，因为这是在整个应用程序中完成的，我当然不想仅仅因为我正在清理代码而破坏任何东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:26:58.810

这取决于您所说的“变异”是什么意思。如果在这种情况下“变异”意味着您更改了属性，但没有更改实例，那么不，您最后不需要`setAttribute`。

`myObject`是对基础对象的*引用。*会话有它自己的参考。它们都指向同一个底层对象，因此您将更改同一个实例的属性。

现在，如果你这样做

`myObject = new MYObject();`

那么您需要将新对象传递给会话。在这种情况下，您的引用`myObject`现在指向与会话引用不同的实例。

注意，为什么不写一个单元测试并测试它呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:23:22.803

@emulcahy，我知道这是一篇旧帖子。我只是在研究 Servlet 侦听器时偶然发现了这一点。你找到那些“冗余” setAttribute(s) 的原因了吗？

我想知道是否将它们添加到触发 Servlet 侦听器中的事件。您可能想要检查是否有任何对象实现了 HttpSessionAttributeListener 或 HttpSessionBindingListener。它们可用于在这些会话变量中记录信息。只是一个想法。如果您已经解决了问题，请忽略此消息。

# spring - Mybatis-Spring中如何捕获Sybase RAISERROR？

> ID：11691855
> 
> 赞同：0
> 
> 时间：2012-07-27T16:25:50.550
> 
> 标签：spring, sybase, mybatis, raiserror

我试图从 Sybase 中的存储过程中捕获我的 Java 代码中的错误消息`RAISERROR`，但没有捕获任何内容，即使当我直接调用 proc 时，我可以看到错误被抛出。

我理解Mybatis-Spring

> 将 MyBatis 异常转换为 Spring DataAccessException

因此，我对我的 Mapper 类进行了编码：

```
void insertData(Data toInsert) throws Exception, DataAccessException; 
```

我试图捕捉这两个异常，但没有捕捉到任何东西。

有没有人有任何想法？

谢谢，斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:59:59.287

我发现了如何做到这一点：

```
try {
    myMapper.insertData(data);
}
catch (org.springframework.jdbc.UncategorizedSQLException e) {
    Throwable ee = use.getCause();
    // getMessage on chained exception gets message from RAISERROR
    log.error(ee.getMessage(), e);
} 
```

干杯，斯蒂芬

# java - sudo类型安装软件需要ant脚本

> ID：11691859
> 
> 赞同：0
> 
> 时间：2012-07-27T16:26:12.047
> 
> 标签：java, ant, exec, sudo

我需要编写 Ant 构建脚本来在 linux 环境中安装软件。我写了类似的东西

```
<exec dir="${dir}" executable="/bin/sh">
    <arg value="installsoftware.sh"/>
</exec> 
```

但是我得到的问题是“您必须具有管理员或 root 权限才能执行”。我需要使用 Sudo 运行安装并提供执行 installsoftware.sh 的密码。

有人可以帮助我编写 ant 脚本来调用 sudo 类型的安装吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:47:21.210

如何将表和 sudo 转换为 root 并以 root 身份运行安装，即

```
sudo ant -f /path/to/build.xml install 
```

# ruby - 无法将宝石推送到私人宝石服务器

> ID：11691866
> 
> 赞同：3
> 
> 时间：2012-07-27T16:26:24.607
> 
> 标签：ruby, rubygems, gem

我们正在内部开发一些 gem，并希望将它们托管在本地 gem 服务器上，然后与 bundler 一起使用。当我尝试将 gem 推送到服务器时，我得到 404 for `/api/v1/gems`. 这发生在我们的实际服务器上，当我尝试在我的笔记本电脑上本地运行它时（两者都在 gem v1.8.24 上）。

这是运行 gem 服务器的终端会话：

```
$ gem --version
1.8.24
$ gem server
Server started at http://0.0.0.0:8808
Server started at http://[::ffff:0.0.0.0]:8808 
```

这是我试图推动任意宝石：

```
$ gem --version
1.8.24
$ gem push --host http://127.0.0.1:8808 awesome_print-1.0.2.gem
Pushing gem to http://127.0.0.1:8808...
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
  <HEAD><TITLE>Not Found</TITLE></HEAD>
  <BODY>
    <H1>Not Found</H1>
    `/api/v1/gems' not found.
    <HR>
    <ADDRESS>
     WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) at
     127.0.0.1:8808
    </ADDRESS>
  </BODY>
</HTML> 
```

我需要指定一个命令行选项来告诉`gem server`接受推送吗？还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:10:41.313

它看起来`gem server`只是为了服务于系统上已经存在的宝石。如果您想将 gems 推送到服务器（从命令行或其他方式），您应该查看[Gem in a Box 之](https://github.com/cwninja/geminabox)类的东西，或者只是手动将它们安装到您正在服务的目录中：

```
gem install -i <directory> --ignore-dependencies <path/to/gem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:41:33.990

`gem server`不支持新的 Bundler API 请求。但是，当 Bundler 访问此服务器时，它将回退并获取旧的索引格式 ( `specs.4.8.gz`)。引入 Bundler API 是因为全局 (RubyGems.org) 索引变得太大/太慢 - 这在具有一些 gem 的私有服务器上不会成为问题。如果您遇到问题，建议使用本地服务器上的 GemInABox 或[云中的](https://github.com/cwninja/geminabox)[Gemfury](http://www.gemfury.com)。

# php - 将php变量放入mysql查询

> ID：11691869
> 
> 赞同：2
> 
> 时间：2012-07-27T16:26:36.100
> 
> 标签：php, mysql

如果您不想获得我想要做的事情的完整摘要，请跳到（问题从这里开始）

我正在设置我的新站点并遇到了一个问题。

我基本上想做的是将广告分配到特定国家。因此，例如，如果您来自英国，您将看到我们在英国库存中的广告。

因此，我从 Google 收集了一些关于如何根据 IP 检测用户所在国家/地区的数据。我已经做了一个完美的功能。

```
$ip_address= $_SERVER['REMOTE_ADDR'];

function ip_location($ip){
    $parts = explode('.', $ip);
    $numeric_ip = $parts[3] + (256 * $parts[2]) + (256 * 256 * $parts[1]) + (256 * 256 * 256 * $parts[0]);

    $sql = "SELECT country FROM iptocountry WHERE lower_bound <= $numeric_ip AND upper_bound >= $numeric_ip LIMIT 1";
    $result = mysql_query($sql);
    $country = mysql_result($result, 0);
    return $country;
}

$country = ip_location($ip_address);
echo $country; // Always echos the correct country 
```

**（问题从这里开始）**

所以这个功能很好用。在创建了这个函数之后，我创建了一个 MYSQL 查询，它使用来自该函数的数据来选择一个广告来向用户展示。

这是问题开始的地方。

当我键入此查询时：

```
$sql = "SELECT *  FROM `nuevo__htmlad` WHERE `country` = 'united kingdom' AND `active` = 1 ORDER BY RAND() LIMIT 1"; 
```

使用`country = 'united kingdom'`它工作正常，但当我把`country = '$country'`

没有任何效果，它从不显示广告。

任何人都可以帮助我理解为什么当我将 PHP 变量放入其中时该查询不起作用。这实际上是第一次这么简单的事情让我如此困扰。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:15:31.580

我通过使用 PDO 驱动程序来处理数据库来避免这种情况。这使我可以使用参数并可以轻松地重用 sql 语句。查看[这篇文章](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T19:36:00.447

此处提供的答案中的所有代码都包含 SQL 注入漏洞。您必须转义用户输入。

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T19:31:01.093

在评论中问了几个问题后，结果发现`$country`变量包含和额外的空白空间。

OP 使用`substr_replace ($country , '' , -1)`. 我个人会选择`trim()`：

```
$sql = "SELECT *  FROM `nuevo__htmlad` WHERE `country` = '".trim($country)."' AND `active` = 1 ORDER BY RAND() LIMIT 1"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T16:36:34.940

```
$sql= "SELECT *  FROM nuevo__htmlad WHERE country='$country' AND active=1 ORDER BY RAND() LIMIT 1"; 
```

或者这个也试试这个

```
$sql= "SELECT *  FROM nuevo__htmlad WHERE country='$country' AND active=1 LIMIT 1 ORDER BY RAND()"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-27T16:45:58.573

试试这个：我总是使用这种风格，因为国家是一个字符串

```
$sql= "SELECT *  FROM nuevo__htmlad WHERE country='".$country."' AND active=1 ORDER BY RAND() LIMIT 1"; 
```

# memory - 调用 MPI_Init() 后内存会发生什么变化？

> ID：11691870
> 
> 赞同：3
> 
> 时间：2012-07-27T16:26:42.937
> 
> 标签：memory, mpi

假设我有一些看起来像这样的代码：

```
#include "mpi.h"

int main( int argc, char** argv )
{
    int my_array[10];
    //fill the array with some data

    MPI_Init(&argc, &argv);

    // Some code here

    MPI_Finalize();
    return 0;
} 
```

每个 MPI 实例都会获得自己的 my_array 副本吗？只有0级？他们都没有？以前有任何代码是不好的做法`MPI_Init`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T02:12:58.523

“当我打电话时记忆会发生什么”的简短回答`MPI_Init`是：什么都没有。

`MPI_Init`在调用过程中初始化 MPI 库。不多也不少。在`MPI_Init`调用的时候，所有的 MPI 进程都已经存在，只是它们彼此还不知道，无法通信。

每个 MPI 进程都是一个单独执行的程序。进程不共享内存，并通过传递消息进行通信。

事实上，调用的进程`MPI_Init`甚至可以是完全不同的程序，只要它们传递的消息匹配。这是 MPMD 模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T22:06:56.287

当您运行 mpi 代码时，您在不同的进程中运行相同的代码（它们不能共享内存），因此每个进程都有自己的数组。

数组应该相等，除非您的数据取决于时间（进程不一定同步）、进程排名（我认为排名仅在 init 调用后可用）或任何随机数生成器（有些也可能生成随机种子） .

# c++ - 在 C++ 中将一个对象添加到另一组对象

> ID：11691873
> 
> 赞同：1
> 
> 时间：2012-07-27T16:26:53.123
> 
> 标签：c++, class, object

我正在做 C++ 课程的作业。

我必须创建`operator+=`它将一个对象添加到另一组对象。

那么，如何在这里实现 operator+= 呢？

```
class classNew
{
    anotherClass *my_objects;
public:
    // TODO: classNew(int, char const *)
    classNew operator+=(const anotherClass & rhs);
};

int main()
{
    classNew d1(7, "w");
    anotherClass sgs[5];
    // somehow init sgs[0]..[4]?

    for (int i=0; i<sizeof(sgs)/sizeof(*sgs); ++i)
        d1 += sgs[i];
} 
```

* * *

**更新：**

我有这样的东西

```
newClass newClass::operator+=(const anotherClass& seg){

this->my_objs[n_seg] = seg;

return *this;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:32:55.323

除非您`operator+=`打算修改您正在添加的对象，这将是非常不寻常的，否则我建议对签名进行~~两个~~简单的更改：

```
classNew & classNew::operator+=(const anotherClass& rhs); 
```

你总是希望返回对类的*引用*，否则你会得到一个副本。

你的类中有一个指针`anotherClass`，我假设这实际上是一个指向数组的指针。您只需将传递的内容复制`rhs`到数组中的适当位置，重新分配它并在必要时增加它。如果我的假设不正确，您只需要为您的班级定义任何附加内容。

如果这不是一个任务，我还建议用`std::vector<anotherClass>`.

# java - 关于在java中创建动态数组

> ID：11691885
> 
> 赞同：1
> 
> 时间：2012-07-27T16:28:00.767
> 
> 标签：java, dynamic-memory-allocation

你能告诉我如何创建一个动态数组..!! 原始数组可以声明为

```
int[] myIntArray = new int[3]; 
```

但是这次我知道数组的大小是 3 个元素，但是如果我想创建一个动态数组，我将如何创建它，请告知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:29:52.670

数组必须始终以给定的大小初始化。如果您希望拥有一个“动态”集合，请使用列表，然后在需要时转换为数组。实例化后无法调整数组的大小，而 List 可以（忽略不可修改的列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:35:10.730

您可以使用变量来实例化数组，但一旦实例化，数组将停留在该大小。

```
int[] myArrayInt = new int[arraySizeVariable]; 
```

如果您想要真正动态的东西，那么我建议您改用 ArrayList。

```
List<Integer> myArrayList = new ArrayList<Integer>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T16:32:56.237

ArrayLists 可以动态增长和收缩：

```
ArrayList<Integer> list = new ArrayList<Integer>();

//... 
list.add(5);
list.add(1);

//...
int index = list.indexOf(5);
list.remove(index); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T16:36:33.927

在 Java 中，您可以拥有各种动态的元素组。基本数组 [] 仍然会像在任何其他类似语言中一样是静态的，因此您将需要使用 Collection.java 接口的一些实现。

最基本的一个是 Vector，它只包含一些对象，不一定属于同一类，并且会随着您添加或删除项目而动态增长。如果您希望它们被订购，那么您可以使用 List.java 的实现。如果您希望集合是唯一的，那么您可以使用 Set.java 的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T16:32:19.723

使用 java.lang.reflect.Array

```
public static Object newInstance(Class<?> componentType, int length) {} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-27T16:30:10.440

```
 public int[] createArray(int size){return new int[size];} 
```

好吧，这是一个愚蠢的代码。创建所需大小的数组。它一旦创建就不可扩展。为此，您需要在旧阵列已满时通过复制到更大的阵列来手动扩展。或者更好的是，通过一个名为 的集合来完成它`ArrayList`，当达到某个阈值时，它的容量会加倍。

如果您实现自己的可扩展数组，则与使用 ArrayList 相同：[请参阅](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

> 每个 ArrayList 实例都有一个容量。容量是用于存储列表中元素的数组的大小。它总是至少与列表大小一样大。随着元素被添加到 ArrayList，它的容量会自动增长。除了添加一个元素具有恒定的摊销时间成本这一事实之外，没有指定增长策略的细节。

# javascript - 对方法或属性访问的意外调用。在 JQUERY 中

> ID：11691887
> 
> 赞同：1
> 
> 时间：2012-07-27T16:28:09.160
> 
> 标签：javascript, jquery

我的代码在 IE8 中出现错误

```
$(function(){
 $.ajax({url:"http://localhost/css/register.txt",  
         cache : false,
         success:function(ris){$("<style></style>").appendTo("head").html(ris);//culprit statement
          },
         error:function(){}
                                    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:42:35.200

似乎 jQuery 没有解决关于`<style>`通过`innerHTML`.

我相信这会起作用......

```
$("<style>" + ris + "</style>") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:44:47.720

Internet Explorer 不允许设置`innerHTML`on`<style>`元素。请参阅[如何使用 Javascript 创建 <style> 标记](https://stackoverflow.com/q/524696/1048572)

# javascript - 将单词拆分为音节

> ID：11691888
> 
> 赞同：4
> 
> 时间：2012-07-27T16:28:11.970
> 
> 标签：javascript

如何使用 JavaScript 拆分单词中的音节。有任何API吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:49:12.977

现在，回到建设性，我的建议是你找到几个在线词典网站并查看他们的 API（我知道 dictionary.com 有一个免费的 API），看看你是否可以使用它来访问拆分为音节的单词从查找。

不幸的是，从我读过的内容来看，您确实需要一个已经拆分的单词字典来进行检查，并且那里没有任何独立版本。

成为第一个并将其张贴在某个地方！:)

# c# - 如何将 Xmlnode 写入新的 Xml

> ID：11691889
> 
> 赞同：-1
> 
> 时间：2012-07-27T16:28:17.163
> 
> 标签：c#

我有一个类似的 XML

```
<Books>
<book>
<filename>QA Assurance </filename>
<author>john</author>
</book>
<book>
<filename>Dev CSharp</filename>
<author>pattersons</author>
</book>
</Books> 
```

我需要阅读这个 XMl，我需要创建一个只有 filename="Dev CSharp" 的新我想复制整个节点书并在 C# 中创建一个新的 XML

问候开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:31:07.377

好吧，我会使用 LINQ to XML：

```
XDocument doc = XDocument.Load("original.xml");
XElement book = doc.Descendants("book")
                   .Where(book => (string) book.Element("filename") == "Dev CSharp")
                   .Single();

XElement newDoc = new XElement("Books", book);
newDoc.Save("new.xml"); 
```

# user-interface - 告诉朋友 - 导入联系人 - UI(X) 设计

> ID：11691890
> 
> 赞同：0
> 
> 时间：2012-07-27T16:28:21.483
> 
> 标签：user-interface, user-experience, import-contacts

我正在为我们的网站设计一个告诉朋友的工具，但我被卡住了。

该脚本允许用户导入他自己的联系人并批量发送邀请。由于某些（垃圾邮件和配额）原因，我们确实允许每小时最多发送 30 个邀请。

一个一个添加联系人不是问题，我们让用户知道，不允许超过 30 个联系人....

但是导入联系人很棘手......大多数用户确实有 100 多个，有些甚至 1.000 多个联系人。我该如何呈现这个？我只导入前 30 个联系人吗？问题是我只有电子邮件和联系人姓名，所以我可以为用户提供的唯一过滤器是第一个字母

![现在的样子](../Images/a9469cc2974bc7c0ca9f29168905cf81.png)

* * *

编辑：

好的，对不起，我对图像不清楚，这是翻译版本。这些字段不是用于过滤或搜索，而是用于手动添加联系人....

![在此处输入图像描述](../Images/d304de35a6e6c25e77b8620eb867b8ec.png)

如果我有搜索过滤器/输入......那就太糟糕了。我不想失去用户的兴趣......用户应该能够通过几次点击发送尽可能多的邀请......让他为每个联系人工作会很糟糕......

现在我正在考虑解决问题，如第二张图片所示......通过让用户选择按“页面”（前 30 个，第二个 30 等......）导入联系人列表......所有联系人在导入时被“选中”（成为收件人）......如果需要，用户可以选择从列表中删除任何人......而不是一个一个地检查。

有更好的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:37:58.537

我相信您应该有一个输入字段，并且应该对姓名和电子邮件进行搜索，并且应该获取前几条记录。一旦选择了应该保持固定的用户并且应该继续搜索剩余的联系人。

# asp.net-mvc-3 - MVC 路由问题、区域和 HTML 操作链接

> ID：11691891
> 
> 赞同：0
> 
> 时间：2012-07-27T16:28:24.137
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-areas

我已经找了一段时间了，解决方案看起来应该可以工作，看来我做错了。

我创建了一个用于管理 CMS 端的区域，称为“管理”，因此如果您访问：

/管理/Vinyard

它将为您提供使用 CRUD 脚手架构建的 VinyardController 管理的 vinyards 列表。

在“前端”我有一个浏览控制器和另一个 VinyardController 用于查看 vinyard 的详细信息。

所以有人去

/浏览/葡萄园

它给了他们一个 Vinyards 列表，他们点击一个（这是问题所在）我想要它去

/Vinyard/NameOfVinyard

我的路线是：

```
 routes.MapRoute(
            "Vinyard",
            "Vinyard/{Name}",
            new { controller = "VinyardController", action = "Details", area="root"}
            ); 
```

高于默认路由。Details 是显示 Vinyard 详细信息的方法。

我使用的 HTML.actionlink 是：

```
 @Html.ActionLink(item.Name, "Details", "vinyard" ,new { name = item.VinyardId, area="root" }) 
```

出于某种原因，返回的 a 标签是：/Browse/Details?Length=7

最重要的是，当我尝试浏览到 /vinyard/1 时，它给了我一个 404。

谢谢你的帮助！

更新：如果我浏览到 /vinyard/details/1 它可以正常工作，除了我希望它避开 /details/ 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:31:15.873

使用这个[重载](http://msdn.microsoft.com/en-us/library/dd504972.aspx)

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

因此，将您的代码更改为

```
 @Html.ActionLink(item.Name, "Details", "vinyard" ,
                 new { name = item.VinyardId, area="root" },null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T02:36:12.160

修复。使用 Shyju 修改后的操作链接，但我还删除了 area 属性，并且必须修复地图路由以使其正常工作。

我的 global.ascx 现在看起来像这样：

```
 routes.MapRoute(
            "Vinyard",
            "Vinyard/{id}",
            new { controller = "Vinyard", action = "Details", id=UrlParameter.Optional},
            new[] { "MyNameSpace.Controllers" }
            ); 
```

这两个问题是：我的控制器名称需要是“Vinyard”而不是“VinyardController”，并且我需要在此处和我的区域路由注册中添加名称空间，因为我在两个区域中使用相同的类名。

# svn - 不使用 --reintegrate 与 svn 合并回主干的后果

> ID：11691897
> 
> 赞同：5
> 
> 时间：2012-07-27T16:28:38.583
> 
> 标签：svn

我是颠覆的新手。在过去的一个月里，我做了一些更改并将它们合并到主干。一切似乎都很好 - 我的更改按预期传播。但是今天我在重新阅读有关合并的内容并看到了[这一点](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchemerge.basicmerging.reintegrate)，在将您的更改合并回主干时说以下内容：

> 现在，使用 svn merge 和 --reintegrate 选项将您的分支更改复制回主干。

几段之后：

> 请注意我们这次使用了 --reintegrate 选项。该选项对于将更改从分支重新集成回其原始开发线至关重要 - 不要忘记它！

我想我第一次阅读的内容不够仔细。

所以，我之前的合并回主干似乎犯了一个错误，因为我没有使用 --reintegrate 选项。这有什么后果？有什么我需要解决的吗？

如果它有用，我的工作流程看起来像这样：

1.  从主干复制以创建个人分支。
2.  查看个人分支。
3.  更改和提交。
4.  获取主干的工作副本。
5.  将我的分支合并到主干的工作副本（同样，没有 --reintegrate）。
6.  提交合并。
7.  删除我的分支。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T17:12:38.497

如果您的分支非常短暂，那么您的工作流程很好。

如果它的生命周期更长，您需要定期将主干中的更改合并到您的分支中，以避免与活动的主分支断开连接。

最后，您的功能分支将包含自您创建分支以来主干的所有更改，以及您在分支中开发的新功能。此时，您需要使用该`reintegrate`选项，因为将分支的更改应用到主干是错误的：它会重新应用已经在主干中的更改，因为它们源自主干。

这在 SVN 书籍关于[特性分支](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.commonpatterns.feature)的部分中有很好的介绍。

# php - Magento中调用第二个图片URL实现鼠标悬停图片更改功能

> ID：11691898
> 
> 赞同：0
> 
> 时间：2012-07-27T16:28:41.310
> 
> 标签：php, css, magento, mouseover

**目的：在****Magento**的类别网格视图中实现鼠标悬停时产品图像的自动更改。

我首先道歉，我不是编码员，所以请耐心等待我的愚蠢问题。

我想出了以下代码来实现图像更改功能：

```
<a href="TARGET URL GOES HERE"><img src="URL OF FIRST IMAGE GOES HERE" onmouseover="this.src='URL OF SECOND IMAGE GOES HERE'" onmouseout="this.src='URL OF FIRST IMAGE GOES HERE'" /></a> 
```

但是，我需要先确定产品是否有第二张图片，如果有，我需要调出第二张图片的 URL 才能使该功能正常工作。

我想它需要一段 php 代码来做到这一点。

我很感激任何有问题的人的帮助。

最好的问候梁

**PS：**这里有更多关于页面的信息。变量：

```
<?php
    $_productCollection=$this->getLoadedProductCollection();
    $_helper = $this->helper('catalog/output');
?> 
```

这是调用主/第一个图像的代码位。

```
 <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(170, 255); ?>" width="170" height="255" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:25:12.933

**For Magento**

To get OnMouseOver to change the image and show the default thumbnail in the product grid or list views, add the following code to the list.phtml file of your theme:

```
onmouseover="this.src='<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(135,135) ?>';" 
onmouseout="this.src='<?phpecho $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(135,135) ?>';" 
```

The new code will be:

```
<a href="<?php echo $_product->getProductUrl() ?>"
   title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>"
   class="product-image">
     <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135, 135); ?>"
          width="135" height="135"
          alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>"
          onmouseover="this.src='<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(135,135) ?>';"
          onmouseout="this.src='<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(FALSE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(135,135) ?>';"/>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T02:45:19.007

这可以获得第二张图像，但不能调整它的大小。

```
<?php $_productImage = Mage::getModel('catalog/product')->load($_product->getId());foreach ($_productImage->getMediaGalleryImages() as $image) { $_productGallery = $image->getUrl();break;};echo $_productGallery; ?> 
```

祝你好运！

# xcode - Xcode中的故事板太慢了

> ID：11691903
> 
> 赞同：11
> 
> 时间：2012-07-27T16:29:04.527
> 
> 标签：xcode, performance, uiviewcontroller, storyboard, xcode4.4

我在 Storyboard 中有 150 个 UIViewController 并且在这些视图之间滚动非常慢。我不能轻松地放大和缩小，而且做麦粒肿需要很长时间。

我在 MBPR 上，我安装了 Xcode 4.4

规格：2.3GHz / 16G / 256 我认为这足以处理这样的事情。

是否有任何选项、设置或提示/技巧可以在情节提要中获得如此多的视图并且不要错过表演。

注意：我已经完成了所有可能的解决方案（删除缓存和工作区）。没用。它与 Storyboard 中 UIViewController 的数量有关。

谢谢

**2016 年更新**：只是为了更新这个问题，因为 Xcode 7 中有一个新功能允许您将故事板重构为多个故事板。

**重构故事板** [https://developer.apple.com/library/ios/recipes/xcode_help-IB_storyboard/Chapters/RefactorStoryboard.html](https://developer.apple.com/library/ios/recipes/xcode_help-IB_storyboard/Chapters/RefactorStoryboard.html)

如果您搜索术语“重构故事板”，您会发现很好的教程:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-17T14:54:18.527

将故事板拆分为许多不同的模块（每个模块位于单独的故事板中）被认为是最佳实践。它将消除您遇到的这些性能问题，并且还具有其他优点，例如使其更易于管理（没有大规模的 SVN 冲突等）。

但是，我遇到了另一个导致情节提要滞后的问题。我有大约 25 个视图控制器并且收到了很多延迟 - 但只有当 Xcode 在外部监视器上运行时。

我注意到如果我禁用情节提要的“自动布局”，滞后将完全消失。我恢复了这个更改，然后按照以下过程： -删除一个 ViewController -测试它是否仍然滞后 -如果仍然滞后恢复更改

最终我找到了一个 ViewController，如果删除它就会停止所有延迟。然后我恢复了这个并浏览了视图，看看哪个视图导致了延迟。我最终将其缩小到“UIBarButtonItem”内的“UIButton”。我相信我更改了按钮上的“类型”属性，然后将其更改回来并且延迟停止了。从 SVN 看来，.storyboard 文件中的框架已更改。在此之后，延迟再也没有回来。

TLDR：情节提要滞后并不总是因为情节提要中有太多项目。通过让 Xcode 重新做一些布局，我设法摆脱了滞后问题。

希望我的经验能帮助其他人诊断/解决他们的问题。我工作了大约 0.5 年，才终于真正生气并试图解决这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-30T11:48:40.977

绝对为此使用多个故事板。我不知道使用情节提要有任何限制，但尝试一次渲染所有这些 UI 代码对您的机器来说很难，开发人员也很难理解。

尝试在逻辑上将您的故事板划分为以下类别：“profileSB、feedSB、mapSB、messagesSB、settingsSB”

这里有一些关于创建这些的很好的教程：http:
[//spin.atomicobject.com/2014/02/18/ios-storyboards-xcode5/](http://spin.atomicobject.com/2014/02/18/ios-storyboards-xcode5/)
[http://www.skillmasters.net/main/xcode-using-multiple -故事板/](http://www.skillmasters.net/main/xcode-using-multiple-storyboards/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T07:14:11.060

一个 Storyboard 中的 150 个 ViewController 对我来说听起来很糟糕。如果您真的需要这么多故事板，请尽量减少您的流程或拆分为多个故事板

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-26T12:33:26.760

我有一个`UIStoryboard`10 或更多`UIViewControllers`和额外`ContainerViews`的 . 在布局视图和自定义越来越多之后，`UIStoryboard`变得越来越懒惰。

我的方法是在 single 中设置视图`UIStoryboards`。加载控制器是在我的菜单中完成的，在那里我设置了一个`NSArray`带有所有标识符的`UIViewController`，也必须在里面设置`UIStoryboard`：

![在此处输入图像描述](../Images/214e092be77243f70f000d31d6fac753.png)

加载菜单时，我循环访问`NSArray`并`UIViewControllers`从特定的`UIStoryboard`. 这是我需要为不同的地方实现开关的地方`UIStoryboards`：

```
self.arrayVCAll = [NSMutableArray new];
for ( NSArray *array in _arrayViewControllerAll ){

    NSMutableArray *arrayTemp = [NSMutableArray new];

    for (UIViewController *vc in array ){
        NSString *strViewController = [NSString stringWithFormat:@"%@", vc];
        UIStoryboard *storyboard;

        if( [strViewController isEqualToString:@"CustomOneStoryboard"] ){
            storyboard = [UIStoryboard storyboardWithName:@"FirstVC" bundle:nil];

        } else if( [strViewController isEqualToString:@"CustomTwoStoryboard"] ){
            storyboard = [UIStoryboard storyboardWithName:@"SecondVC" bundle:nil];

        } else {
            storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
        }

        UIViewController *controller = [storyboard instantiateViewControllerWithIdentifier:strViewController];

        MyNavController *nav = [[MyNavController alloc] initWithRootViewController:controller];
        [arrayTemp addObject:nav];
    }

    [self.arrayVCAll addObject:arrayTemp];
} 
```

就我而言，在将首字母`UINavigationController`与我的`UIViewControllers`. 如果没有 initial ，segues 不会推送到 navigationController `UINavigationController`。这就是为什么我`UINavigationController`在每个`UIViewController`（我的 NSArray）上添加了一个，以便`UIStoryboardSegue`正确完成。`UINavigationController`也不需要连接到类，只需将其包含在 中并将`UIStoryboard`其连接到第一个`UIViewController`。

# c++ - C ++使用数组指针与向量？

> ID：11691904
> 
> 赞同：0
> 
> 时间：2012-07-27T16:29:05.960
> 
> 标签：c++, arrays, pointers, vector

> **可能重复：**
> [在 C++ 中使用数组或 std::vectors，性能差距是什么？](https://stackoverflow.com/questions/381621/using-arrays-or-stdvectors-in-c-whats-the-performance-gap)

我只想知道它们中哪个更快并且使用更少的资源？我认为向量更可靠和安全，但指向数组的指针更快。我想重新调整数组的大小（添加新元素，因此将其增加 1 或从中删除元素）。向量有它的功能，而指针需要我创建的。

我不知道该选择哪一个。你有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T16:32:33.917

根据[Bjarne Stroustrup](http://www2.research.att.com/~bs/bs_faq2.html#arrays)的说法，除非您有充分的理由使用数组，否则您应该在数组上使用[向量。](http://www.artima.com/intv/goldilocks.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T16:34:21.380

c++ 标准库已被优化为尽可能快，同时提供必要的功能，因此您不必实现它们。节省时间和担心，只需使用矢量。

如果速度上有任何差异，它们在大局中将可以忽略不计:)

# embedded - 如果 CPU 在 FIQ 中挂起，数据中止？

> ID：11691905
> 
> 赞同：0
> 
> 时间：2012-07-27T16:29:10.037
> 
> 标签：embedded, arm, interrupt

我正在ARM平台上开发嵌入式系统。我只是尝试解决一个随机数据中止问题。当我尝试将有问题的行集中在寄存器映射上进行调试时，另一个问题是行号并不总是固定的。最后发现等待函数调用（只是让CPU挂起指定时间）会引入数据中止问题。

我想知道如果我们做很多事情，比如在 FIQ 或 IRQ 中进行复杂计算，会出现什么问题？它会引入数据中止问题吗？既然 FIQ 应该在服务例程期间禁用所有其他 FIQ 或 IRQ，为什么会引入这些问题呢？

参考

[FIQ和IRQ有什么区别](https://stackoverflow.com/questions/973933/what-is-the-difference-between-fiq-and-irq-interrupt-system)

[如何在基于 arm 的平台上调试随机数据中止问题](https://stackoverflow.com/questions/11474700/how-to-debug-random-data-abort-issue-on-arm-based-platform)

# javascript - jQuery :parent 选择器在 jQuery UI 对话框中无法正常工作

> ID：11691906
> 
> 赞同：1
> 
> 时间：2012-07-27T16:29:11.420
> 
> 标签：javascript, jquery, jquery-ui

我有一个 jQuery UI 对话框，我想在没有标题的情况下呈现。我有这个工作，这不是问题。

我很好奇的是为什么 jQuery`:parent`选择器不会选择对话内容`div`的父级，但`parent()`函数会选择。这是一个工作示例：

**HTML：**

```
<input id="example1" type="button" value="Use :parent selector">
<input id="example2" type="button" value="Use parent() function">

<!-- 
One of many dialogues on the page, but this one needs
the title removed.
-->

<div id="throbber" style="display:none">
    <p>Doing work...be patient....</p>
    <img src="http://i.stack.imgur.com/GUw9u.gif"/>
</div> 
```

**脚本：**

```
$("#example1").bind("click", function() {
    $("#throbber").dialog("destroy"); // for jsfiddle example
    $("#throbber").dialog({
        resizable: false,
        modal: false,
        width: 150
    });

    $("#throbber:parent .ui-dialog-titlebar").hide();
});

$("#example2").bind("click", function() {
    $("#throbber").dialog("destroy"); // for jsfiddle example
    $("#throbber").dialog({
        resizable: false,
        modal: false,
        width: 150
     });

    $("#throbber").parent().find(".ui-dialog-titlebar").hide();
}); 
```

这是jsFiddle中的上述代码：

> [http://jsfiddle.net/kevink/kPMQf/](http://jsfiddle.net/kevink/kPMQf/)

在 chrome 中，如果我在渲染对话框后设置断点，如果我这样做`$("#throbber:parent")`，如预期的那样，它会自行选择：

![在此处输入图像描述](../Images/fb36b5c4994944b634a9bf95a019f26d.png)

如果我尝试选择它`:parent`，它不会，它只是再次选择自己：

![在此处输入图像描述](../Images/a8e73d367868e46f6b12e1491520d6a3.png)

如果我使用`$("#throbber").parent()`，这次它会选择它的父级：

![在此处输入图像描述](../Images/13b6fdbc9e186ffd45b9226a47bbaf1b.png)

这里发生了什么，为什么`:parent`select`#throbber`的父母还`.parent()`没有呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:36:26.700

来自[:parent 选择器的 jQuery 文档](http://api.jquery.com/parent-selector/)：

> 描述：选择作为另一个元素*的父*元素的所有元素，包括文本节点。

因此，当您执行`$("#throbber:parent")`jQuery 的操作时，会找到带有 id 的元素，该元素`#throbber`恰好是另一个元素的父元素（在本例中为`p`and`img`标签）。

[另一方面， .parent()](http://api.jquery.com/parent/)选择当前选择器的父级，因此这样做`$("#throbber").parent()`会找到带有 id 的元素的父级`#throbber`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:35:27.623

[.parent()](http://api.jquery.com/parent/)获取当前匹配元素集中每个元素的父元素，可选地由选择器过滤。

[:parent](http://api.jquery.com/parent-selector/)选择作为另一个元素的父元素的所有元素，包括文本节点。

* * *

`$("#throbber").parent().find(".ui-dialog-titlebar")`从`#throbber` **up**到 parent 然后**下降**到`.ui-dialog-titlebar`。可以访问兄弟姐妹到`#throbber`.

`$("#throbber:parent .ui-dialog-titlebar")`正在检查那是`#throbber` **父母**然后**去**。`.ui-dialog-titlebar`只能访问`#throbber`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:36:14.177

我不认为 :parent 可以以这种方式使用-它只是过滤您已经拥有的选择器以仅匹配作为其他元素的父对象的对象（请参阅：[http](http://api.jquery.com/parent-selector/) ://api.jquery.com/parent-selector/ ）。所以它匹配#throbber 元素，因为它正在寻找名为#throbber 的元素，它是父元素！

# c# - MVC 3 Forms Authentication 在 Internet Explorer 中不起作用，不断重定向到登录页面

> ID：11691913
> 
> 赞同：3
> 
> 时间：2012-07-27T16:29:42.967
> 
> 标签：c#, asp.net-mvc-3, internet-explorer, forms-authentication

我在 ASP.NET MVC 3 中实现了一些可爱的表单身份验证，这在 Chrome 中效果很好。现在是对世界上最糟糕的浏览器 Internet Explorer 进行测试的时候了。我只是简单地登录，每次单击提交按钮时页面都会返回登录页面。凭据是正确的。我已经逐步完成了代码，我正在对页面使用 RedirectToAction，并且没有标记任何错误，它只是直接返回到登录页面。

我应该指出我已经尝试了以下方法：

*   删除了 webmatrix dll 和依赖项
*   删除 System.Web.Helpersn
*   这些都已从 bin、引用和 VS2010 中的 bin_deploayableAssemblies 文件夹中删除

我还在 web.config appsettings 中添加了以下内容：

```
<add key="enableSimpleMembership" value="false" />
<add key="autoFormsAuthentication" value="false" />
<add key="loginUrl" value="~/LoginReg/LogOn"/> 
```

这是我的完整 web.config：

[http://pastebin.com/t6cj6cSb](http://pastebin.com/t6cj6cSb)

我应该指出我的登录页面位于名为：Login Reg 的文件夹中，因此 URL 将是 /LoginReg/LogOn。

这在 chrome 中完美运行，但由于某种原因在 Internet Explorer 中不起作用。

有没有人有任何想法来解决这个非常烦人的问题或有任何有用的文章

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:47:55.870

表单身份验证创建一个 http cookie 来维护请求之间的身份验证状态。确保您在 IE 中启用了 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T20:17:22.313

我为这个问题找到了一个奇怪的解决方案，就我而言，我有一个 MVC3 解决方案，当然我的问题和原帖一样，我所做的很奇怪：

1.  我将 LogOn get/post 方法重命名为`LoginPageView`
2.  当然我为`LoginPageView`Controller动作 创建了对应的VIEW

    ```
    [HttpGet]
    public ActionResult LoginPageView()
    {
        return View();
    } 
    ```

3.  我跑了，我可以重定向到解决方案上的任何其他控制器操作，当然要注意`[Authorize]`我需要的方法的 or not authorize 属性。

4.  问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T10:52:51.763

这是通过向 FilterConfig.cs 文件添加全局过滤器来解决我的问题的解决方案。

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
       filters.Add(new AuthorizeAttribute());
    }
} 
```

现在登录与 Internet Explorer 和 Microsoft Edge 浏览器完美配合。

# .htaccess - 从 url 的末尾删除 .php 文件扩展名。

> ID：11691916
> 
> 赞同：1
> 
> 时间：2012-07-27T16:29:53.550
> 
> 标签：.htaccess, mod-rewrite, file-extension

我试图在我的网络服务器上实现一些非常简单的东西。我希望以 .php 结尾的网址以 / 结尾，例如 www.example.net/something.php 为 www.example.net/something 或 www.example.net/folder/subfolder/something.php 为 www。 example.net/folder/subfolder/something。此外，我不介意我是否有 www.example.net/folder/something.php?something=whatever/。我只关心删除 url 中的最后一个 .php 。我在许多其他代码中都使用过此代码。

```
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule .*[^/]$ $0/ [L,R=301]
RewriteRule (.*)/$ $1.php [L] 
```

但是，这只适用于我的某些页面。例如，它不适用于我的 www.example.com/folder/contactus.php 页面。相反，我得到了我的 404 页面。但它可以完美地在 www.example/folder/faq.php 上运行。此外，我在代码的各个部分中提出了一些 file_get_contents() php 请求。有没有办法定制这些规则，所以内部请求（我的 php 函数）不受影响。基本上，我只希望浏览器显示没有 .php 结尾的 url，而不会影响 .php 文件中保存的其他 php 函数。为了进一步澄清我的意图：我使用字符串处理函数根据我设置的变量从 php 文件中提取特定的文本行。但是根据当前的重写规则，找不到 php 文件，因为扩展名已从文件名中删除（我猜。

```
$file_contents = file_get_contents($filename); 
```

我目前在共享的 Godaddy 主机帐户上使用 linux 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:25:06.293

我认为您需要将 php 检查应用于这两个规则：

```
RewriteCond %{REQUEST_URI} ^(.*)/$
RewriteCond %{DOCUMENT_ROOT}%1.php -f 
RewriteRule (.*)/$ $1.php [L]

RewriteCond {REQUEST_FILENAME}.php -f
RewriteRule .*[^/]$ $0/ [L,R=301] 
```

此外， -f 检查需要在没有尾部斜杠的情况下进行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:59:58.213

尽管我的一个页面使用了失败的获取请求，但以下内容按要求工作。我只是将其更改为发布请求，一切都很好。

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{THE_REQUEST} ^GET\ /([^.\ ]+\.)+php(\?[^\ ]*)?\ HTTP
RewriteRule ^(.+)\.php$ http://www.sitename.net/$1 [R=301,L]
RewriteRule ^([^/]+/)*index/?$ http://www.sitename.net/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ http://www.sitename.net/$1 [R=301,L]
RewriteCond $1 !^([^.]+\.)+([a-z0-9]+)$ [NC]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*[^/])$ /$1.php [L]
RewriteRule (.*)/$ $1.php [L] 
```

一个小问题仍然存在。有些页面附加了斜杠，而另一些则没有。关于强制斜杠的任何线索？

# java - 为什么 "3.5".matches("[0-9]+") 返回 false？

> ID：11691917
> 
> 赞同：0
> 
> 时间：2012-07-27T16:30:01.440
> 
> 标签：java, regex

我使用该方法`String.matches(String regex)`来查找字符串是否与正则表达式匹配

从我的角度来看，正则表达式`regex="[0-9]+"`意味着一个字符串，它至少包含一个介于 0 和 9 之间的数字

但是当我调试`"3.5".matches("[0-9]+")`它返回false。

那么有什么问题呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T16:32:16.190

`matches`确定正则表达式是否匹配*整个*字符串。`true`如果字符串*包含*匹配项，它将不会返回。

要测试字符串是否包含与给定正则表达式的匹配项，请使用`Pattern.compile(regex).matcher(string).find()`.

（您的正则表达式 ,`[0-9]+`将匹配仅包含从 0 到 9 的数字以及至少一个数字的任何字符串。它不会神奇地匹配任何实数。如果您想要匹配任何实数的东西，请查看例如[Javadoc`Double.valueOf(String)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29) , 它指定了用于验证双精度的正则表达式。该正则表达式允许十六进制输入、NaN 和无穷大，但它应该让您更好地了解所需的内容。）

或者，编辑正则表达式，使其直接匹配包含一个或多个数字的任何字符串，例如`.*[0-9]+.*`可以完成这项工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:33:27.720

如果你想匹配十进制数字，你的 reg ex 需要是`\d*\.?\d+`. 如果你也想要底片，那么`\-?\d*\.?\d+`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T16:33:47.537

`.`不是`0-9`并`matches`测试整个字符串。

# c - 无法将 libavformat/ffmpeg 与 x264 和 RTP 同步

> ID：11691921
> 
> 赞同：8
> 
> 时间：2012-07-27T16:30:31.110
> 
> 标签：c, ffmpeg, rtp, x264, libavformat

我一直在开发一些流媒体软件，这些软件使用 H.264 从各种摄像机和网络上获取实时信息。为了实现这一点，我直接使用 x264 编码器（使用“zerolatency”预设）并提供 NAL，因为它们可用于 libavformat 以打包到 RTP（最终是 RTSP）中。理想情况下，此应用程序应尽可能实时。在大多数情况下，这一直运作良好。

然而不幸的是，存在某种同步问题：客户端上的任何视频播放似乎都会显示一些流畅的帧，然后是短暂的停顿，然后是更多的帧；重复。此外，似乎有大约 4 秒的延迟。我尝试过的每个视频播放器都会发生这种情况：Totem、VLC 和基本的 gstreamer 管道。

我把它归结为一个有点小的测试用例：

```
#include <stdio.h>
#include <stdint.h>
#include <unistd.h>
#include <x264.h>
#include <libavformat/avformat.h>
#include <libswscale/swscale.h>

#define WIDTH       640
#define HEIGHT      480
#define FPS         30
#define BITRATE     400000
#define RTP_ADDRESS "127.0.0.1"
#define RTP_PORT    49990

struct AVFormatContext* avctx;
struct x264_t* encoder;
struct SwsContext* imgctx;

uint8_t test = 0x80;

void create_sample_picture(x264_picture_t* picture)
{
    // create a frame to store in
    x264_picture_alloc(picture, X264_CSP_I420, WIDTH, HEIGHT);

    // fake image generation
    // disregard how wrong this is; just writing a quick test
    int strides = WIDTH / 8;
    uint8_t* data = malloc(WIDTH * HEIGHT * 3);
    memset(data, test, WIDTH * HEIGHT * 3);
    test = (test << 1) | (test >> (8 - 1));

    // scale the image
    sws_scale(imgctx, (const uint8_t* const*) &data, &strides, 0, HEIGHT,
              picture->img.plane, picture->img.i_stride);
}

int encode_frame(x264_picture_t* picture, x264_nal_t** nals)
{
    // encode a frame
    x264_picture_t pic_out;
    int num_nals;
    int frame_size = x264_encoder_encode(encoder, nals, &num_nals, picture, &pic_out);

    // ignore bad frames
    if (frame_size < 0)
    {
        return frame_size;
    }

    return num_nals;
}

void stream_frame(uint8_t* payload, int size)
{
    // initalize a packet
    AVPacket p;
    av_init_packet(&p);
    p.data = payload;
    p.size = size;
    p.stream_index = 0;
    p.flags = AV_PKT_FLAG_KEY;
    p.pts = AV_NOPTS_VALUE;
    p.dts = AV_NOPTS_VALUE;

    // send it out
    av_interleaved_write_frame(avctx, &p);
}

int main(int argc, char* argv[])
{
    // initalize ffmpeg
    av_register_all();

    // set up image scaler
    // (in-width, in-height, in-format, out-width, out-height, out-format, scaling-method, 0, 0, 0)
    imgctx = sws_getContext(WIDTH, HEIGHT, PIX_FMT_MONOWHITE,
                            WIDTH, HEIGHT, PIX_FMT_YUV420P,
                            SWS_FAST_BILINEAR, NULL, NULL, NULL);

    // set up encoder presets
    x264_param_t param;
    x264_param_default_preset(&param, "ultrafast", "zerolatency");

    param.i_threads = 3;
    param.i_width = WIDTH;
    param.i_height = HEIGHT;
    param.i_fps_num = FPS;
    param.i_fps_den = 1;
    param.i_keyint_max = FPS;
    param.b_intra_refresh = 0;
    param.rc.i_bitrate = BITRATE;
    param.b_repeat_headers = 1; // whether to repeat headers or write just once
    param.b_annexb = 1;         // place start codes (1) or sizes (0)

    // initalize
    x264_param_apply_profile(&param, "high");
    encoder = x264_encoder_open(&param);

    // at this point, x264_encoder_headers can be used, but it has had no effect

    // set up streaming context. a lot of error handling has been ommitted
    // for brevity, but this should be pretty standard.
    avctx = avformat_alloc_context();
    struct AVOutputFormat* fmt = av_guess_format("rtp", NULL, NULL);
    avctx->oformat = fmt;

    snprintf(avctx->filename, sizeof(avctx->filename), "rtp://%s:%d", RTP_ADDRESS, RTP_PORT);
    if (url_fopen(&avctx->pb, avctx->filename, URL_WRONLY) < 0)
    {
        perror("url_fopen failed");
        return 1;
    }
    struct AVStream* stream = av_new_stream(avctx, 1);

    // initalize codec
    AVCodecContext* c = stream->codec;
    c->codec_id = CODEC_ID_H264;
    c->codec_type = AVMEDIA_TYPE_VIDEO;
    c->flags = CODEC_FLAG_GLOBAL_HEADER;
    c->width = WIDTH;
    c->height = HEIGHT;
    c->time_base.den = FPS;
    c->time_base.num = 1;
    c->gop_size = FPS;
    c->bit_rate = BITRATE;
    avctx->flags = AVFMT_FLAG_RTP_HINT;

    // write the header
    av_write_header(avctx);

    // make some frames
    for (int frame = 0; frame < 10000; frame++)
    {
        // create a sample moving frame
        x264_picture_t* pic = (x264_picture_t*) malloc(sizeof(x264_picture_t));
        create_sample_picture(pic);

        // encode the frame
        x264_nal_t* nals;
        int num_nals = encode_frame(pic, &nals);

        if (num_nals < 0)
            printf("invalid frame size: %d\n", num_nals);

        // send out NALs
        for (int i = 0; i < num_nals; i++)
        {
            stream_frame(nals[i].p_payload, nals[i].i_payload);
        }

        // free up resources
        x264_picture_clean(pic);
        free(pic);

        // stream at approx 30 fps
        printf("frame %d\n", frame);
        usleep(33333);
    }

    return 0;
} 
```

此测试显示白色背景上的黑色线条应该平滑地向左移动。它是为 ffmpeg 0.6.5 编写的，但该问题可以在**0.8**和**0.10**上重现（从我目前测试的结果来看）。我在错误处理方面采取了一些捷径，以使这个示例尽可能短，同时仍然显示问题，所以请原谅一些讨厌的代码。我还应该注意，虽然这里没有使用 SDP，但我已经尝试使用它并获得类似的结果。测试可以编译：

```
gcc -g -std=gnu99 streamtest.c -lswscale -lavformat -lx264 -lm -lpthread -o streamtest 
```

可以直接用gtreamer玩：

```
gst-launch udpsrc port=49990 ! application/x-rtp,payload=96,clock-rate=90000 ! rtph264depay ! decodebin ! xvimagesink 
```

您应该立即注意到口吃。我在 Internet 上看到的一个常见“修复”是将 sync=false 添加到管道中：

```
gst-launch udpsrc port=49990 ! application/x-rtp,payload=96,clock-rate=90000 ! rtph264depay ! decodebin ! xvimagesink sync=false 
```

这会导致播放流畅（并且接近实时），但不是解决方案，仅适用于 gstreamer。我想从源头上解决问题。我已经能够使用原始 ffmpeg 以几乎相同的参数进行流式传输，并且没有任何问题：

```
ffmpeg -re -i sample.mp4 -vcodec libx264 -vpre ultrafast -vpre baseline -b 400000 -an -f rtp rtp://127.0.0.1:49990 -an 
```

很明显我做错了什么。但它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:07:19.097

1）您没有为发送到 libx264 的帧设置 PTS（您可能应该看到“非严格单调 PTS”警告） 2）您没有为发送到 libavformat 的 rtp muxer 的数据包设置 PTS/DTS（我没有100％肯定需要设置，但我想它会更好。从源代码看起来像 rtp 使用 PTS）。3）恕我直言，usleep（33333）很糟糕。它也会导致编码器在这段时间内停止（增加延迟），而您可以在这段时间内编码下一帧，即使您仍然不需要通过 rtp 发送它。

PS顺便说一句，您没有将 param.rc.i_rc_method 设置为 X264_RC_ABR，因此 libx264 将使用 CRF 23 而忽略您的“param.rc.i_bitrate = BITRATE”。在为网络发送进行编码时使用 VBV 也是一个好主意。

# arrays - Fortran 等价于 matlab find - 应用于切片矩阵而无需内存重复

> ID：11691925
> 
> 赞同：8
> 
> 时间：2012-07-27T16:30:40.470
> 
> 标签：arrays, matlab, fortran

我在 matlab 中使用 find 很多命令，我想知道如何在 fortran 中巧妙地翻译它以提取数组的一部分。在 matlab 中，您可以使用逻辑或索引进行切片，但在 fortran 中，您需要索引来切片。我知道内部子程序包等，但从未使用过它们。另外，由于我正在处理大矩阵，我想避免重复内存。我希望在子程序中操作切片矩阵。我在某处读到数组切片没有重复。我不知道这是如何在 matlab 中进行切片的。我也很困惑，因为在 matlab 中，一些分配对你来说是透明的。

我想知道如何重现下面的示例，并确保我没有在内存中复制内容，并且这样做实际上很优雅。否则，我会忘记切片，只发送整个矩阵（因为它是通过引用）并循环遍历索引数组我......

Matlab示例1：简单复现find

```
 v=[1 2 3 4];
  I=find(v==3); 
```

Matlab示例2：

```
m=rand(4,4);
bools=logical([ 1 0 0 1]);
I=find(bools==1); 
% which I could also do like: 
I=1:size(m,1); 
I=I(bools);

  for i=1:length(I)
      % here dealing with m(I(i)),:)  and do some computation
      % etc. 
```

示例 3：只调用 m(I,:) 上的子程序，但直接使用布尔值进行切片

```
 foo( m(bools, :) , arg2, arg3 ) 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T01:55:07.757

Fortran 与 Matlab 没有完全匹配，`find`但您通常可以使用`where`或`forall`，有时同时使用两者来替换它的功能。

例如，给定一个数组`v`，如您在第一个示例中使用的，Fortran 语句

```
where (v==3) do_stuff 
```

将仅对`v`等于 3 的元素进行操作。这不会像那样为您提供这些元素的索引`find`，但大部分用途`find`是用于选择元素以对其进行处理，并且在大多数情况下该`where`构造适用。

如前所述`v`，以及一个索引数组`ix`，在 Fortran 中，它是一个逻辑数组，如下所示：

```
[.true., .false., .false., .true.] 
```

您可以在掩码数组赋值中使用`ix`，只要它的形状与 相同`v`，例如

```
where (ix) v = some_value 
```

`ix`不一定是逻辑数组，它可以是任何类型的数组，如果它是实数数组，您可能有一个表达式，例如

```
where (ix>=0.0) v = some_value 
```

我认为当前的任何 Fortran 编译器都不会复制数组来实现`where`构造。我会让您阅读有关`forall`构造的信息。

也不要忘记，您可以使用数组作为 Fortran 数组的索引，因此表达式

```
v([1,3]) = 0 
```

将元素 1 和 3 设置`v`为 0。当然，如果数组的秩大于 1，则可以使用多个数组索引。

当您开始使用这种索引将数组的非连续部分传递给子程序时，您必须开始担心复制到临时数组中（如果这是您想要担心的事情）。我相信如果您执行类似的操作，编译器可能会制作临时副本

```
call my_subroutine(array(1:12:3, 2:12:4)) 
```

使在运行时不知道数组部分元素索引的子例程能够对它“看到”为连续数组的内容进行操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-13T22:30:40.703

您可以使用带有隐含`do`循环的“pack”：

```
I = pack([(j,j=1,size(v))],v==3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-25T15:34:39.260

Bellow，在 FORTRAN CODE 中，是一个子例程的例子，它相当于 matlab 或 scilab 中的 find。在下面的例子中，我们想要 (a) 找到向量等于 22 的向量的位置 (b) 找到向量中偶数的位置

```
 PROGRAM Principal
     REAL*8 A(8)
     INTEGER n, npos, pos(8)
     n=8
     A = (/ 19, 20, 21, 22, 23, 24, 25, 26 /)
     ! Find the positions of vector A that is equal to 22 
     CALL FindInVector(n,A==22,npos,pos)
     WRITE(*,*) pos(1:npos)

     ! Find the positions of vector A that contains even numbers 
     CALL FindInVector(n,ABS(A/2.d0-INT(A/2.d0))<1.d-2,npos,pos)
     WRITE(*,*) pos(1:npos)

     END PROGRAM Principal 
```

!________________________________________________________________

！查找逻辑向量 TF（真或假）的位置的子程序。第一个 npos 元素包含响应。

```
 SUBROUTINE FindInVector(n,TF,npos,pos)
    ! Inlet variables
    INTEGER,INTENT(IN):: n      ! Dimension of logical vector
    LOGICAL,INTENT(IN):: TF(n)  ! Logical vector (True or False)
    ! Outlet variables
    INTEGER npos                ! number of "true" conditions
    INTEGER pos(n)              ! position of "true" conditions
    ! Internal variables
    INTEGER i                   ! counter
    INTEGER v(n)                ! vector of all positions

    pos = 0                     ! Initialize pos
    FORALL(i=1:n)   v(i) = i    ! Enumerate all positions
    npos  = COUNT(TF)           ! Count the elements of TF that are .True.
    pos(1:npos)= pack(v, TF)    ! With Pack function, verify position of true conditions

    ENDSUBROUTINE FindInVector 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-18T11:23:26.397

我认为更简单的版本是可能的，请参见下面的子例程。该示例说明如何在数组 x 中查找小于 0.1 的值。

```
program test
   real,    dimension(:), allocatable :: x  
   integer, dimension(:), allocatable :: zeros

   x=[1.,2.,3.,4.,0.,5.,6.,7.,0.,8.]
   call find_in_array(x<0.01,zeros)
   write(*,*)zeros

   contains

   subroutine find_in_array(TF,res)

      ! Dummy arguments
      logical, dimension(:),              intent(in)   :: TF    ! logical array
      integer, dimension(:), allocatable, intent(out)  :: res   ! positions of true 
                                                                ! elements
      ! Local arrays
      integer, dimension(:), allocatable  :: pos

      pos=[(i,i=1,size(TF))]
     !pos=[1:size(TF)]  ! valid on Intel compiler
      res=pack(pos,TF)

   end subroutine find_in_array

end program test 
```

# wordpress - 有没有办法（插件）将 html/css/images 等自动插入到每个 wordpress 帖子中？

> ID：11691928
> 
> 赞同：-2
> 
> 时间：2012-07-27T16:30:42.150
> 
> 标签：wordpress, wordpress-theming

有没有办法（插件）将 html/css/images 等自动插入到每个 wordpress 帖子中？我的大多数帖子都将非常相似，因此是否有一个插件可以在每个帖子中自动插入预先编写的 html/css/ ect，而不是我每次都手动输入。

先感谢您 ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:23:47.450

您可以为此编写自己的简单函数，请参见下面的示例：

```
add_filter( 'default_content', 'my_editor_content' );

function my_editor_content( $content ) {
    global $post_type;
    if( $post_type == 'post') { /* Or your custom post type, pages etc. */
        $content = 'Your custom HTML/CSS content here';
    }
    return $content;
} 
```

将其放入`functions.php`，它将成为您创建的每个新帖子/页面/自定义帖子类型的默认内容。

有关可用帖子类型的列表，请参阅**[Codex](http://codex.wordpress.org/Post_Types)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:55:47.913

您可以使用诸如广告注入之类的插件，它可以让您做您需要的事情，而无需更改/修改/添加模板或文件的任何代码

# sharepoint - SharePoint：在同一窗口中打开 Word 文档链接

> ID：11691930
> 
> 赞同：0
> 
> 时间：2012-07-27T16:30:48.737
> 
> 标签：sharepoint, sharepoint-2010, ms-word

SharePoint 2010 字 2007

有谁知道如何在 Word 文档中创建一个链接，该链接在 SharePoint 浏览器窗口中打开，当单击该链接时，它将在同一浏览器窗口中打开第二个 Word 文档？

```
SharePoint 2010 Browser Window 1
   Open Word Doc 1
      Click on link within Word Doc 1
   Word Doc 2 is opened (in the same browser window)
      If I click 'Close' in the 'Word Viewer', Word Doc 2 will close and I am back to Word Doc 1 
```

Word 2007 不喜欢 JavaScript 用 _self 打开一个新窗口。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:47:41.413

这可能更适合[http://sharepoint.stackexchange.com](http://sharepoint.stackexchange.com)

话虽如此，我认为这是您从 TechNet 获得的答案：

[为启用浏览器的文档配置默认打开行为 (Office Web Apps)](http://technet.microsoft.com/en-us/library/ee837425.aspx)

一点 PowerShell，你就会摇摆不定。

# css - 是否可以在 CSS 中设置 JavaFX 静态属性？

> ID：11691931
> 
> 赞同：3
> 
> 时间：2012-07-27T16:30:51.217
> 
> 标签：css, javafx, javafx-2, fxml, javafx-css

[带有 BorderPanel.alignment “静态属性”](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#static_property_elements)的 FXML 示例：

```
<BorderPane>
  <top>
    <Label text="My Label" BorderPanel.alignment="CENTER"/>           
  </top>
</BorderPane> 
```

CSS 支持的版本：

```
<BorderPane stylesheets="Style.css">
   <top>
     <Label text="My Label" styleClass="labelClass"/>           
   </top>
</BorderPane> 
```

Style.css 将是：

```
.labelClass
 {
   -fx-borderpanel-alignement: center
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:01:32.030

对于 JavaFX 版本 2.0 到 2.2 => 不，您不能通过 css 设置静态布局属性。

[您可以在JavaFX jira](http://javafx-jira.kenai.com)中创建一个功能请求，要求在未来的 JavaFX 版本中实现此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-26T13:20:52.457

您可以以编程方式应用它。例如，如果您想将 a 的所有小部件居中`GridPane`，而不是编写`GridPane.halignment="CENTER"`每个小部件的 XML 声明，您可以在 Java 中执行此操作：

```
for(Node node : gridPane.getChildren())
{
    GridPane.setHalignment(node, HPos.CENTER);
} 
```

不幸的是，我认为您不能像在 Android 中那样分解布局:(

# ruby-on-rails - rails基本多态性

> ID：11691932
> 
> 赞同：0
> 
> 时间：2012-07-27T16:30:54.620
> 
> 标签：ruby-on-rails, ruby, polymorphism

我正在尝试创建投票之间的多态关系，可以由用户提交并应用于文章。我的代码

```
class Vote < ActiveRecord::Base
  attr_accessible :value, :voteable_id, :voteable_type
  belongs_to :voteable, :polymorphic => true  
end
class User < ActiveRecord::Base
  has_many :votes, :as => :voteable
end
class Article < ActiveRecord::Base
  has_many :votes, :as => :voteable
end

<Vote id: 1, value: 1, created_at: "2012-07-27 03:13:14", updated_at: "2012-07-27 03:13:14", voteable_id: nil, voteable_type: nil> 
```

[通过http://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)查看 Rails 文档

我觉得我的代码设置正确，但我在正确触发它时遇到了一些麻烦，即，我如何实际创建一个与文章或用户具有正确定义关系的投票对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:25:28.487

votable_type 是字符串吗？下一个示例应该可以正常工作..

```
 @user.votes.new :value => 1
  @user.save 
```

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:12:03.273

我能够完成这项工作，我`voteable_type`错误地设置了属性。

# javascript - 采用 HTML 表单，将信息传递给 Python 脚本

> ID：11691934
> 
> 赞同：0
> 
> 时间：2012-07-27T16:30:59.240
> 
> 标签：javascript, python, html, json, post

我是网络编程的新手，现在，我正在尝试为 python python 程序编写一个网络界面。

我想填写一个简单的表单，点击提交，将数据传递给 python 脚本，让脚本将数据传递回同一个 HTML 文件并在 HTML 文件上显示这些数据。

那么，我该怎么做呢？我完成了 HTML 文件，也完成了我的 python 程序，但两者之间没有通信。我应该使用 cgi 使用 post 到 python 还是应该调用 javascript 创建一个 json 对象，然后将其传递给 python 并让 python 将另一个 json 对象传回给我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:37:04.790

> 我应该使用 post 到 python

使用表格。它很简单而且很有效。[post 和 get](https://stackoverflow.com/questions/46585/when-do-you-use-post-and-when-do-you-use-get)之间的选择取决于您对数据的处理方式。

> 使用 cgi

客户端使用 HTTP 提交给服务器。

服务器如何与 Python 通信取决于许多因素。CGI 具有简单和易于设置的优点（但它不能很好地扩展）。

> 或者我应该调用 javascript 创建一个 json 对象，然后将其传递给 python 并让 python 将另一个 json 对象传回给我？

您可以在表单解决方案的顶部添加类似的内容。（记住要[进步](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不引人注目](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)）。如果你有一个扁平的数据结构，那么使用 JSON 作为输入并没有太大的好处。除非您在客户端处理复杂的数据结构，否则我不会打扰它。

# visual-studio-2010 - VS C++ 中的 ConcurrentDictionary->AddOrUpdate

> ID：11691937
> 
> 赞同：0
> 
> 时间：2012-07-27T16:31:13.617
> 
> 标签：visual-studio-2010, c++-cli, concurrentdictionary

我正在使用 Visual Studio 2010 C++ Express 并且我想向我的 ConcurrentDictionary 添加一个项目：

我有这样的代码：

```
String^ key = gcnew String("key");
int value = 123;
myDictionary->AddOrUpdate(key,value,/*WHAT TO ADD HERE?*/); 
```

AddOrUpdate 方法需要 3 个参数，不像普通的字典 2。

微软网站说它需要这样的论点：

```
public:
TValue AddOrUpdate(
TKey key, 
TValue addValue, 
Func<TKey, TValue, TValue>^ updateValueFactory
) 
```

在微软网站上，我还发现了 C# 中的代码：

```
cd.AddOrUpdate(1, 1, (key, oldValue) => oldValue + 1); 
```

但它在 C++ 中不起作用。我必须把什么作为第三个论点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:45:35.407

第三个参数是一个委托，在您找到的 C# 示例代码中是一个 lambda。但是 C++/CLI 不支持 lambda，因此您必须使用独立方法来完成。

```
static int UpdateFunc(String^ key, int value)
{
    return value + 1;
}

cd->AddOrUpdate("foo", 1, gcnew Func<String^, int, int>(MyClass::UpdateFunc)); 
```

但是，您说“我想向我的 ConcurrentDictionary 添加一个项目”。没有简单的“添加”方法，因为总是有其他线程可能修改了 ConcurrentDictionary。因此，对于如何将内容放入字典有两种选择。

*   AddOrUpdate：添加一个值，或者如果该键已存在，则修改现有值。（将当前值传递给委托，委托返回修改。）
*   GetOrAdd：添加一个值，如果该键已经存在，则检索现有值。（如果键已经存在，则不修改字典。）
*   this[]（索引器，使用方括号）：添加一个值，或者用一个常量值替换现有值。

如果您想要的只是一个简单的“添加”，那么它可能就是您感兴趣的方括号。

```
cd["foo"] = 1; 
```

# wcf - 是否可以配置自定义 DataService 允许冒充？

> ID：11691939
> 
> 赞同：1
> 
> 时间：2012-07-27T16:31:20.223
> 
> 标签：wcf, wcf-data-services, odata, impersonation

在“标准”WCF 服务上，我只需将操作方法​​标记为：

```
[OperationBehavior(Impersonation = ImpersonationOption.Allowed)] 
```

但是对于我的数据服务，一旦打开 DataServiceHost，我就会收到 InvalidOperationException：

```
The service operation 'ProcessRequestForMessage' that belongs to the contract with the 'IRequestHandler' name and the 'http://tempuri.org/' namespace does not allow impersonation. 
```

如何标记“ProcessRequestForMessage”以允许模拟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T17:25:49.273

配置以下行为：

```
<behavior>
  <serviceCredentials useIdentityConfiguration="true" />
  <serviceAuthorization principalPermissionMode="Always" impersonateOnSerializingReply="true" />
</behavior> 
```

另请参阅[WIF 4.5 的 WCF 数据服务；没有为 POST 请求设置主体](https://stackoverflow.com/questions/17384002/wcf-data-service-with-wif-4-5-principal-not-set-for-post-requests)

# php - MySQL遍历拆分字符串的元素并用它们做事

> ID：11691942
> 
> 赞同：0
> 
> 时间：2012-07-27T16:31:34.230
> 
> 标签：php, mysql, stored-procedures

我的 MySQL 社区版 5.1 表中有一个单元格。内容总是特定的数字。如果有多个数字，则以`;`分号分隔。

例如：

```
| Column |
1ar8fj
99dkek;adjidk3;dajdid
divdae;dadjid;
NULL
dkadjcud;dasd;adfkvdo
dkjfakj
... 
```

我需要编写一些代码来获取每个列的值，将其拆分，`;`然后在拆分后使用每个值进行另一个查询，并输出结果。

我知道我可以用 PHP 做到这一点，但我不需要把它做成网页，所以我想知道这是否可以用 MySQL 语法编写？PHP 代码看起来像这样：

```
<?php
    $result = $mysqli->query('select column from table;');
    while ($row = $result->fetch_array($result)){
        $id_numbers = explode($row[0],';');
        foreach($id_numbers as $key => $val){
            // do another query
            $result2 = $mysqli->query('select * from table2 where col_val = "'.$val.'"');
            while ($row2 = $result2->fetch_array($result2){
                echo $row2[0].'<br>';
            }
        }
    }
?> 
```

这可以直接在 MySQL 语法中实现吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:29:00.420

呸。好的。我终于让它工作了，但这是一个存储过程的解决方案，它将字符串作为分隔符的输入，并在给定的名为的表上运行`testtable`

```
--Procedure: sprecursplit

--DROP PROCEDURE IF EXISTS sprecursplit;

DELIMITER |

CREATE PROCEDURE sprecursplit 
(
  IN delim nvarchar(255)
)
BEGIN
  declare tdone tinyint unsigned default(0);
  declare depth int unsigned default(1);
  declare datas nvarchar(255) default('');
  declare done tinyint unsigned default(0);
  declare dlength int unsigned default(1);
  declare hlength int unsigned default(0);
  declare pos int unsigned default(1);
  declare runpos int unsigned default(1);
  declare slice nvarchar(255) default('');

  drop table if exists allsubs;
  create temporary table allsubs(id int unsigned auto_increment, val nvarchar(255), primary key (id))engine = memory;

  while tdone <> 1 do
        if depth <= (select count(*) from testtable) then
           select t.datastring into datas from testtable t where t.id = depth limit 1;
           if length(datas) > 0 then
                set dlength = length(delim);
                set hlength = length(datas);
                set pos = 1;
                set runpos = 1;
                set slice = '';
                set done = 0;
                if hlength > 0 then
                   while done <> 1 do
                         if runpos > hlength then
                            set done = 1;
                         else
                             set pos = locate(delim, substring(datas from runpos));
                             if pos <> 1 then
                                if pos > 1 then
                                   set slice = substring(datas from runpos for (pos - 1));
                                else
                                    set slice = substring(datas from runpos);    
                                end if;
                                insert into allsubs (val) values (slice);
                             end if;
                             if pos = 0 then
                                 set runpos = runpos + hlength;
                             else
                                 set runpos = runpos + pos + dlength - 1;
                             end if;
                         end if;
                   end while;
                end if;
           end if;
           set depth = depth + 1;
        else
            set tdone = 1;
        end if;
  end while;
  select * from allsubs;
  drop table allsubs;
END|

DELIMITER ; 
```

# c# - 如何使用 XmlReader 读取列表中的数据第 2 部分

> ID：11691948
> 
> 赞同：2
> 
> 时间：2012-07-27T16:31:55.083
> 
> 标签：c#, xml

好吧，看来我有这个问题的答案，但我错了。可能是因为我问错了。这是我想要做的：我想获取一个 xml 文档并将其拉入内存。然后，我想随意对该文档运行查询并从中获取信息。每当我需要数据而不将文档再次加载到内存中时，我都想这样做。毕竟，关键是在我需要数据时停止访问磁盘。我一直使用的方法只能工作一次，我需要多次这样做。这是我尝试过的代码：

```
public static class GrabFile
    {
        public static XDocument configData = XDocument.Load(@"myxml.xml");
        public static XmlReader templateReader = configData.CreateReader();
    } 
```

我认为这会将文档复制到内存中，并且我可以随时使用 templateReader 来查询 configData：

```
while (GrabFile.templateReader.Reader())
{
  //get the data I wanted
} 
```

我想我可以把那个while语句放在一个方法中，并创建其他人来做特定的查询，并在我需要信息的时候调用它们。但它只能工作一次。

正如我所说，我对此并不太熟悉，所以可能有一种简单的方法。

此外，另一个线程中的人想要一个关于 xml 文档中内容的示例。那是无关紧要的。关键是我想将文档放入内存，然后根据需要多次查询它，而无需从磁盘访问它并创建另一个阅读器。是的，我想为此使用阅读器。

也许我需要将内存中文件中的指针移回顶部，以便再次读取它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:37:05.220

*为什么*不想创建另一个阅读器？

`GrabFile.configData.CreateReader()`每次需要时调用它是最简单的方法。（这不会再次从磁盘加载它，但每次调用它*都会*创建一个单独的。）`XmlReader`

从文档中`XmlReader`：

> 表示提供对 XML 数据的快速、非缓存、**只进访问的读取器。**

（强调我的。）我没有看到任何关于重置的东西，我也不希望这样做。

鉴于您已经获得了`XDocument`开始的信息，我个人会尝试使用该信息进行所有查询，而不是使用更难使用的方法`XmlReader`，但显然这是您的决定。但是，如果您提供一些理由会有所帮助-正如您所说，您“对此并不太熟悉”，因此值得重新审视您对如何处理更高级别任务的假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:40:44.937

您是否在服务器环境中执行此操作，例如使用 ASP.NET 应用程序？这可能会引入更多步骤，但总体思路是使用静态对象来保存加载到内存中的 XML 文档。就像你所做的一样。这就是它的全部。你能提供更多的上下文吗？

你也不需要使用 XML 阅读器（除非你只想要那种只进的访问）；

```
public static class Globals
{
    public static XDocument ConfigFile = XDocument.Load("C:/somefile.xml");
}

public void SomeOtherFunctionSomewhere()
{
    var configName = Globals.ConfigFile
        .Descendants("someconfigsection")
        .Descendants("configName")
        .First().Value;
} 
```

如果您将程序的配置存储在 XML 文件中 - 考虑将整个配置读取到您在启动时自己创建的内存对象中。这将比每次都查询 XML（即使 XML 已经在内存中）更快地在运行时访问配置部分。下面的人为示例：

```
public class Configuration
{
    //just some made up config settings
    public string Name {get;set;}
    public int Id {get;set;}
    public int XDimension {get;set;}
    public int YDimension {get;set;}
}

class Program
{
    static Configuration Config;
    static void Main(string[] args)
    {
        Config = ReadConfig();
    }

    private static Configuration ReadConfig()
    {
        var config = new Configuration();
        //read entire XML and set properties on the config object
        return config;
    }
} 
```

# mysql - Yii mysql 日期时间为空

> ID：11691949
> 
> 赞同：0
> 
> 时间：2012-07-27T16:32:03.010
> 
> 标签：mysql, yii

Yii 模型有问题，我创建了一个带有两个日期时间列的 MySQL 表。

并使用 gii 创建模型。问题是当我从模型中获取数据时，日期时间字段为空。

```
<?php

/**
 * This is the model class for table "Template".
 *
 * The followings are the available columns in table 'Template':
 * @property string $tmpId
 * @property integer $fanPageId
 * @property string $name
 * @property string $title
 * @property string $description
 * @property string $headerFile
 * @property string $msgNotTlt
 * @property string $msgNotMsg
 * @property string $msgNotImg
 * @property string $msgNotLnk
 * @property string $terms
 * @property string $strProm
 * @property string $endProm
 */
class Template extends CActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Template the static model class
     */
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return 'Template';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
                    array('fanPageId', 'numerical', 'integerOnly'=>true),

                    array('name, title, description, headerFile, msgNotTlt, msgNotMsg, msgNotImg, msgNotLnk, terms', 'length', 'max'=>11),
                    array('strProm, endProm', 'safe'),
                    //array('endProm, strProm', 'type', 'type'=>'datetime', 'datetimeFormat'=>'yyyy/M/d H:m:s'),

                    // The following rule is used by search().
                    // Please remove those attributes that should not be searched.
                    array('tmpId, fanPageId, name, title, description, headerFile, msgNotTlt, msgNotMsg, msgNotImg, msgNotLnk, terms, strProm, endProm', 'safe', 'on'=>'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
        );
    }

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels()
    {
        return array(
            'tmpId' => 'Tmp',
            'fanPageId' => 'Fan Page',
            'name' => 'Name',
            'title' => 'Title',
            'description' => 'Description',
            'headerFile' => 'Header File',
            'msgNotTlt' => 'Msg Not Tlt',
            'msgNotMsg' => 'Msg Not Msg',
            'msgNotImg' => 'Msg Not Img',
            'msgNotLnk' => 'Msg Not Lnk',
            'terms' => 'Terms',
            'strProm' => 'Str Prom',
            'endProm' => 'End Prom',
        );
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('tmpId',$this->tmpId,true);
        $criteria->compare('fanPageId',$this->fanPageId);
        $criteria->compare('name',$this->name,true);
        $criteria->compare('title',$this->title,true);
        $criteria->compare('description',$this->description,true);
        $criteria->compare('headerFile',$this->headerFile,true);
        $criteria->compare('msgNotTlt',$this->msgNotTlt,true);
        $criteria->compare('msgNotMsg',$this->msgNotMsg,true);
        $criteria->compare('msgNotImg',$this->msgNotImg,true);
        $criteria->compare('msgNotLnk',$this->msgNotLnk,true);
        $criteria->compare('terms',$this->terms,true);
        $criteria->compare('strProm',$this->strProm,true);
        $criteria->compare('endProm',$this->endProm,true);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:16:12.180

在您的模型规则中添加两列：

```
array('datetime_1, datetime_2', 'safe'),
array('id, <attributes>, datetime_1, datetime_2', 'safe', 'on'=>'search'), 
```

如果可能，请发布您的代码/模型...

# google-maps-api-3 - Google Earth API - geplugin.exe 消耗所有可用内存

> ID：11691950
> 
> 赞同：1
> 
> 时间：2012-07-27T16:32:07.460
> 
> 标签：google-maps-api-3, memory-leaks, google-earth-plugin

大家下午好。我在网上上下搜索，并没有找到解决这个相当大问题的方法。当我运行与 Google Earth API 接口的应用程序时，geplugin.exe 出现在任务管理器中，并且在与地球进行了几次用户交互（放大/缩小，飞到几个点）后，他们机器上的所有内存最终都被消耗掉了由geplugin。一旦他们关闭我的项目，它就会卸载，但由于业务规范，我无法继续加载/卸载。我的猜测是地球会缓存图像并且不会释放它们。有人找到解决这个困境的办法吗？我在具有大量内存的 Windows 7 上运行 Google Earth v6.2。谢天谢地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:52:14.367

我在谷歌地球插件中看到了内存泄漏。然而，它可能不一样，因为它不是那么激烈。就我而言，我能够确定内存泄漏与 3-D 地形有关。如果我在启用 3-D 地形的情况下运行我的应用程序，则会出现持续的内存泄漏。如果我在禁用 3-D 地形的情况下运行它，内存占用将保持稳定。

要禁用 3-D 地形，您可以使用这样的代码。 **ge.getLayerRoot().enableLayerById(ge.LAYER_TERRAIN, false);**

我的测试是使用插件的 7.0.2.8415 版本完成的。

# java - JMS 客户端应用程序和业务活动监视器

> ID：11691958
> 
> 赞同：0
> 
> 时间：2012-07-27T16:32:45.057
> 
> 标签：java, oracle, jms, weblogic, oracle-bam

我想知道是否有一种方法可以通过客户端应用程序连接到位于 WebLogic 服务器上的业务活动监视器。我想用 BAM 语句替换我的 JMS 生产者/消费者客户端中的日志语句，以便 BAM 更新消息进度/错误？我希望有一个API，但没有成功找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:34:21.643

Oracle BAM 能够使用[来自队列或主题的 XML 消息](http://docs.oracle.com/cd/E15523_01/integration.1111/e10230/bam_intro.htm#CHDCAIFC)作为数据项的输入。这是执行此操作的[BAM 配置文档](http://docs.oracle.com/cd/E15523_01/integration.1111/e10224/bam_ent_msg_sources.htm#SOASE1952)。

由于您的客户端应用程序已经基于 JMS，因此应该很容易让它们将额外的 JMS 消息发送到专用队列以在 BAM 中进行进度监控。

注意事务划分：您必须注意您的 BAM 消息是否应该包含在与常规业务相同的事务中或特定事务中，以避免在业务失败时回滚。

# c++ - OMP - 线程数多于处理器数？

> ID：11691960
> 
> 赞同：7
> 
> 时间：2012-07-27T16:32:48.133
> 
> 标签：c++, c, openmp

默认情况下 OpenMP 指令：

`opm_get_num_threads`给出与处理器/内核等效的线程数.

我有一台 8 核机器，所以它给了我 8 个线程。那是最大值吗？如果我故意指定超过 8 个，我可以获得超过 8 个的线程吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T17:17:02.330

您可以根据需要设置任意数量的线程：

```
int threads = 16;
omp_set_num_threads(threads); 
```

[http://msdn.microsoft.com/en-US/library/e16bady3%28v=vs.80%29](http://msdn.microsoft.com/en-US/library/e16bady3%28v=vs.80%29)

但是请确保您意识到使用更多线程而不是系统中的逻辑核心的缺点。

# xml - XML 架构错误：缺少所需的空白

> ID：11691962
> 
> 赞同：3
> 
> 时间：2012-07-27T16:32:50.003
> 
> 标签：xml, xsd, vb.net-2010, sqlxml, bulk-load

我已经搜索了几个小时，但无法找出问题所在。有人可以帮我吗？在 VB.NET 2010 中执行 SQLXMLBULKLOAD 时出现上述错误。我尝试不断更改我的 xml 声明、我的架构属性，但无法克服此错误。这似乎是微不足道的，但我无法弄清楚。请帮忙

```
 <?xml version="1.0" ?>
     <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sql="urn:schemas-microsoft-com:mapping-schema">
        <xsd:element name="Employees" sql:is-constant="1">
            <xsd:complexType>
                <xsd:sequence maxOccurs="unbounded">
                    <xsd:element name="Employee" sql:relation="the_Employees">
                        <xsd:complexType>
                            <xsd:sequence maxOccurs="unbounded">
                                <!--<xsd:element name="id" type="xsd:integer" />-->
                                <xsd:element name="EmployeeID"sql:field="EmpNo">
                                    <xsd:simpleType>
                                        <xsd:restriction base="xsd:string">
                                            <xsd:whiteSpace value="collapse"/>
                                        </xsd:restriction>
                                    </xsd:simpleType>
                                </xsd:element>
                                <xsd:element name="FirstName"sql:field="FirstName">
                                <xsd:simpleType>
                                    <xsd:restriction base="xsd:string">
                                        <xsd:whiteSpace value="collapse"/>
                                    </xsd:restriction>
                                </xsd:simpleType>
                            </xsd:element>
                            </xsd:sequence>
                        </xsd:complexType>
                    </xsd:element>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </xsd:schema> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T16:36:02.020

您需要在属性之间留一个空格。

就像第 10 行中的这个。

```
<xsd:element name="EmployeeID"sql:field="EmpNo"> 
```

应该

```
<xsd:element name="EmployeeID" sql:field="EmpNo"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:45:07.700

在第 16 行的这个上，你需要一个空格。否则，你很高兴：

`<xsd:element name="FirstName"sql:field="FirstName">`

改成：

`<xsd:element name="FirstName" sql:field="FirstName">`

# javascript - 使用 javascript 从字符串中删除额外或特殊字符时遇到问题

> ID：11691963
> 
> 赞同：0
> 
> 时间：2012-07-27T16:32:50.817
> 
> 标签：javascript, jquery, json, string, eval

我有一个删除额外或特殊字符的功能：

```
function escapeHtml(unsafe) {
return unsafe
     .replace(/\r?\n|\r/g, "")
     .replace(/(\r\n|\n|\r)/gm," ")
     .replace(/\s+/g," ")
     .replace(/&/g, "&amp;")
     .replace(/</g, "&lt;")
     .replace(/>/g, "&gt;")
     .replace(/"/g, "&quot;")
     .replace(/'/g, "&#039;")
     .replace(/!/g, "");
   } 
```

当我调用它时，我的这部分代码看起来像：

```
$(".product_json", data).each(function(){
    var thisH = $(this).html();
    var myNewString = eval( '('+ thisH +')');
    var toBeEscaped = myNewString.item_description;
    var escapedString = escapeHtml(toBeEscaped);
    myNewString.item_description = escapedString;
    myNewString = JSON.stringify(myNewString);
        console.log(myNewString);
//product_json.push( jQuery.parseJSON( myNewString ) );
}); 
```

但是它在控制台中的一些说法：`SyntaxError: unterminated string literal`

此字段中的数据看起来像

```
VINOVO - Lotti TERRENO Hobbystico - Campestre!!! <br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:50:47.473

您`thisH`在此行中分配一个值：

```
var thisH = $(this).html(); 
```

然后在这一行中运行它`eval()`（用括号括起来）：

```
var myNewString = eval( '('+ thisH +')'); 
```

使用调试器检查`thisH`触发 SyntaxError 的时间。用括号括起来是有效的 JavaScript 吗？如果不是，那是你的问题。

# python - 在 Python 中使用随机模块中的选择时出错

> ID：11691964
> 
> 赞同：1
> 
> 时间：2012-07-27T16:32:53.137
> 
> 标签：python, random, error-handling

我正在尝试基于输入数据集构建随机数据集。输入数据集由 856471 行组成，每行中有一对由制表符分隔的值。随机数据集中的任何条目都不能等于输入数据集中的任何条目，这意味着：

如果第 1 行中的对是“Protein1 Protein2”，则随机数据集不能包含以下对：

*   “蛋白质 1 蛋白质 2”
*   “蛋白质 2 蛋白质 1”

为了实现这一点，我尝试了以下方法：

```
data = infile.readlines()
ltotal = len(data)
for line in data:
    words = string.split(line)

init = 0
while init != ltotal:
    p1 = random.choice(words)
    p2 = random.choice(words)
    words.remove(p1)
    words.remove(p2)
    if "%s\t%s\n" % (p1, p2) not in data and "%s\t%s\n" % (p2, p1) not in data:
        outfile.write("%s\t%s\n" % (p1, p2)) 
```

但是，我收到以下错误：

```
Traceback (most recent call last):   File
"C:\Users\eduarte\Desktop\negcreator.py", line 46, in <module>
    convert(indir, outdir)   File "C:\Users\eduarte\Desktop\negcreator.py", line 27, in convert
    p1 = random.choice(words)   File "C:\Python27\lib\random.py", line 274, in choice
    return seq[int(self.random() * len(seq))]  # raises IndexError if seq is empty
IndexError: list index out of range 
```

我很确定这会奏效。我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:34:43.473

`words`循环中的每一行都会覆盖该变量

```
for line in data:
    words = string.split(line) 
```

这很可能不是您想要的。

此外，您的`while`循环是一个无限循环，`words`最终会消耗掉，没有选择`random.choice()`.

**编辑**：我的猜测是你有一个制表符分隔的单词对文件，每行一对，你试图从所有单词中形成随机对，只将那些随机对写入输出文件中不出现在原始文件中。这是一些执行此操作的代码：

```
import itertools
import random
with open("infile") as infile:
    pairs = set(frozenset(line.split()) for line in infile)
words = list(itertools.chain.from_iterable(pairs))
random.shuffle(words)
with open("outfille", "w") as outfile:
    for pair in itertools.izip(*[iter(words)] * 2):
        if frozenset(pair) not in pairs:
            outfile.write("%s\t%s\n" % pair) 
```

笔记：

1.  一对单词由 a 表示`frozenset`，因为顺序无关紧要。

2.  我`set`对所有对使用 a 以便能够测试一对是否在恒定时间内在集合中。

3.  我没有重复使用`random.choice()`，而是只对整个列表进行一次洗牌，然后成对地迭代它。这样，我们不需要从列表中删除已经使用的单词，因此效率更高。（这一变化与前一个变化将方法的算法复杂度从 O(n²) 降低到 O(n)。）

4.  该表达式`itertools.izip(*[iter(words)] * 2)`是一种常见的 Python 习惯用法，可以成对迭代`words`，以防您尚未遇到该表达式。

5.  代码仍然未经测试。

# php - 延迟PHP中的while循环以防止内存耗尽？

> ID：11691968
> 
> 赞同：1
> 
> 时间：2012-07-27T16:33:04.857
> 
> 标签：php

我有一个非常简单的图像调整大小脚本，它循环遍历 1000 个文件夹，每个文件夹中有不同数量的图像。在我的测试服务器上，没有很多图像，所以它运行良好......但是大约有 100K 图像......它会遇到内存问题。php 内存已经设置为 384M，但我宁愿让脚本一次只处理 10 个文件夹，停一下，然后重新开始。我怎样才能在while循环中做到这一点？也许使用睡眠功能？

这里是...

```
class DevTestHelper {

//This will Go through all full size images and resize images into requested folder
function resizeGalleryImages($destFolder, $width, $height, $isCrop = false) {

    $count = 1000;

    $source = JPATH_SITE."/images/gallery/full";
    $dest = JPATH_SITE."/images/gallery/".$destFolder;

    echo 'Processing Images<br>';

    //Loop through all 1000 folders 0 to 999 in the /full dir
    for($i=0; $i < $count;$i++) {
        $iPath = $source.'/'.$i;
        if(is_dir($iPath)) {

                $h = opendir($iPath);
                //Loop through all the files in numbered folder
                while ($entry = readdir($h)) {

             //only read files
                    if ($entry != "." && $entry != ".." &&        !is_dir($entry)) {
              $img = new GImage($source.'/'.$i.'/'.$entry);

                        $tmp = $img->resize($width, $height, true, 3);

                        if($isCrop) {
                            $tmpWidth = $tmp->getWidth();
                            $tmpHeight = $tmp->getHeight();

                            $xOffset = ($tmpWidth - $width) / 2;
                            $yOffset = ($tmpHeight - $height) / 2;

                            $tmp->crop($width, $height, $xOffset, $yOffset, false, 3);
                        }

                        $destination = $dest.'/'.$i.'/'.$entry;

                        if(!$tmp->toFile($destination)) {
                            echo 'error in creating resized image at: '.$destination.'<br>';
                      }

                      flush();
          ob_flush();
          sleep(10);
                      echo $entry ;
                      //echo $entry.'<br>';
            }

                }

            echo 'Processed: '.$i.' Folder<br>';

        }
    } 
```

感谢您的任何建议。

```
/**
* Class to manipulate an image.
*
* @package      Gallery.Libraries
* @subpackage   Media
* @version      1.0
*/
class GImage extends JObject
{
/**
 * The image handle
 *
 * @access  private
 * @var     resource
 */
var $_handle = null;

/**
 * The source image path
 *
 * @access  private
 * @var     string
 */
var $_path = null;

var $_support = array();

/**
 * Constructor
 *
 * @access  public
 * @return  void
 * @since   1.0
 */
function __construct($source=null)
{
    // First we test if dependencies are met.
    if (!GImageHelper::test()) {
        $this->setError('Unmet Dependencies');
        return false;
    }

    // Determine which image types are supported by GD.

    $info = gd_info();
    if ($info['JPG Support']) {
        $this->_support['JPG'] = true;
    }
    if ($info['GIF Create Support']) {
        $this->_support['GIF'] = true;
    }
    if ($info['PNG Support']) {
        $this->_support['PNG'] = true;
    }

    // If the source input is a resource, set it as the image handle.
    if ((is_resource($source) && get_resource_type($source) == 'gd')) {
        $this->_handle = &$source;
    } elseif (!empty($source) && is_string($source)) {
        // If the source input is not empty, assume it is a path and populate the image handle.

        //Andy - Big freaking cockroach: if file is wrong type or doesn't even exist the error is not handled.
        $this->loadFromFile($source);
    }
}

function crop($width, $height, $left, $top, $createNew = true, $scaleMethod = JXIMAGE_SCALE_INSIDE)
{
    // Make sure the file handle is valid.
    if ((!is_resource($this->_handle) || get_resource_type($this->_handle) != 'gd')) {
        $this->setError('Invalid File Handle');
        return false;
    }

    // Sanitize width.
    $width = ($width === null) ? $height : $width;
    if (preg_match('/^[0-9]+(\.[0-9]+)?\%$/', $width)) {
        $width = intval(round($this->getWidth() * floatval(str_replace('%', '', $width)) / 100));
    } else {
        $width = intval(round(floatval($width)));
    }

    // Sanitize height.
    $height = ($height === null) ? $width : $height;
    if (preg_match('/^[0-9]+(\.[0-9]+)?\%$/', $height)) {
        $height = intval(round($this->getHeight() * floatval(str_replace('%', '', $height)) / 100));
    } else {
        $height = intval(round(floatval($height)));
    }

    // Sanitize left.
    $left = intval(round(floatval($left)));

    // Sanitize top.
    $top = intval(round(floatval($top)));

    // Create the new truecolor image handle.
    $handle = imagecreatetruecolor($width, $height);

    // Allow transparency for the new image handle.
    imagealphablending($handle, false);
    imagesavealpha($handle, true);

    if ($this->isTransparent()) {
        // Get the transparent color values for the current image.
        $rgba = imageColorsForIndex($this->_handle, imagecolortransparent($this->_handle));
        $color = imageColorAllocate($this->_handle, $rgba['red'], $rgba['green'], $rgba['blue']);

        // Set the transparent color values for the new image.
        imagecolortransparent($handle, $color);
        imagefill($handle, 0, 0, $color);

        imagecopyresized(
            $handle,
            $this->_handle,
            0, 0,
            $left,
            $top,
            $width,
            $height,
            $width,
            $height
        );
    } else {

        imagecopyresampled(
            $handle,
            $this->_handle,
            0, 0,
            $left,
            $top,
            $width,
            $height,
            $width,
            $height
        );
    }

    // If we are cropping to a new image, create a new GImage object.
    if ($createNew)
    {
        // Create the new GImage object for the new truecolor image handle.
        $new = new GImage($handle);
        return $new;
    } else
    {
        // Swap out the current handle for the new image handle.
        $this->_handle = &$handle;
        return true;
    }
}

  function filter($type)
{
    // Initialize variables.
    $name = preg_replace('#[^A-Z0-9_]#i', '', $type);

    $className = 'GImageFilter_'.ucfirst($name);
    if (!class_exists($className))
    {
        jimport('joomla.filesystem.path');
        if ($path = JPath::find(GImageFilter::addIncludePath(), strtolower($name).'.php'))
        {
            require_once $path;

            if (!class_exists($className)) {
                $this->setError($className.' not found in file.');
                return false;
            }
        }
        else {
            $this->setError($className.' not supported. File not found.');
            return false;
        }
    }

    $instance = new $className;
    if (is_callable(array($instance, 'execute')))
    {
        // Setup the arguments to call the filter execute method.
        $args = func_get_args();
        array_shift($args);
        array_unshift($args, $this->_handle);

        // Call the filter execute method.
        $return = call_user_func_array(array($instance, 'execute'), $args);

        // If the filter failed, proxy the error and return false.
        if (!$return) {
            $this->setError($instance->getError());
            return false;
        }

        return true;
    }
    else {
        $this->setError($className.' not valid.');
        return false;
    }
}

function getHeight()
{
    return imagesy($this->_handle);
}

function getWidth()
{
    return imagesx($this->_handle);
}

function isTransparent()
{
    // Make sure the file handle is valid.
    if ((!is_resource($this->_handle) || get_resource_type($this->_handle) != 'gd')) {
        $this->setError('Invalid File Handle');
        return false;
    }

    return (imagecolortransparent($this->_handle) >= 0);
}

function loadFromFile($path)
{
    // Make sure the file exists.
    if (!JFile::exists($path)) {
        $this->setError('File Does Not Exist');
        return false;
    }

    // Get the image properties.
    $properties = GImageHelper::getProperties($path);
    if (!$properties) {
        return false;
    }

    // Attempt to load the image based on the MIME-Type
    switch ($properties->get('mime'))
    {
        case 'image/gif':
            // Make sure the image type is supported.
            if (empty($this->_support['GIF'])) {
                $this->setError('File Type Not Supported');
                return false;
            }

            // Attempt to create the image handle.
            $handle = @imagecreatefromgif($path);
            if (!is_resource($handle)) {
                $this->setError('Unable To Process Image');
                return false;
            }
            $this->_handle = &$handle;
            break;
        case 'image/jpeg':
            // Make sure the image type is supported.
            if (empty($this->_support['JPG'])) {
                $this->setError('File Type Not Supported');
                return false;
            }

            // Attempt to create the image handle.
            $handle = @imagecreatefromjpeg($path);
            if (!is_resource($handle)) {
                $this->setError('Unable To Process Image');
                return false;
            }
            $this->_handle = &$handle;
            break;
        case 'image/png':
            // Make sure the image type is supported.
            if (empty($this->_support['PNG'])) {
                $this->setError('File Type Not Supported');
                return false;
            }

            // Attempt to create the image handle.
            $handle = @imagecreatefrompng($path);
            if (!is_resource($handle)) {
                $this->setError('Unable To Process Image');
                return false;
            }
            $this->_handle = &$handle;
            break;
        default:
            $this->setError('File Type Not Supported');
            return false;
            break;
    }

    // Set the filesystem path to the source image.
    $this->_path = $path;

    return true;
}

function resize($width, $height, $createNew = true, $scaleMethod = JXIMAGE_SCALE_INSIDE)
{

    // Make sure the file handle is valid.
    if ((!is_resource($this->_handle) || get_resource_type($this->_handle) != 'gd')) {
        $this->setError('Invalid File Handle');
        return false;
    }

    // Prepare the dimensions for the resize operation.
    $dimensions = $this->_prepareDimensions($width, $height, $scaleMethod);
    if (empty($dimensions)) {
        return false;
    }

    //var_dump($dimensions);

    // Create the new truecolor image handle.
    $handle = imagecreatetruecolor($dimensions['width'], $dimensions['height']);

    // Allow transparency for the new image handle.
    imagealphablending($handle, false);
    imagesavealpha($handle, true);

    if ($this->isTransparent()) {
        // Get the transparent color values for the current image.
        $rgba = imageColorsForIndex($this->_handle, imagecolortransparent($this->_handle));
        $color = imageColorAllocate($this->_handle, $rgba['red'], $rgba['green'], $rgba['blue']);

        // Set the transparent color values for the new image.
        imagecolortransparent($handle, $color);
        imagefill($handle, 0, 0, $color);

        imagecopyresized(
            $handle,
            $this->_handle,
            0, 0, 0, 0,
            $dimensions['width'],
            $dimensions['height'],
            $this->getWidth(),
            $this->getHeight()
        );
    } else {

        imagecopyresampled(
            $handle,
            $this->_handle,
            0, 0, 0, 0,
            $dimensions['width'],
            $dimensions['height'],
            $this->getWidth(),
            $this->getHeight()
        );
    }

    // If we are resizing to a new image, create a new GImage object.
    if ($createNew)
    {
        // Create the new GImage object for the new truecolor image handle.
        $new = new GImage($handle);
        return $new;
    } else
    {
        // Swap out the current handle for the new image handle.
        $this->_handle = &$handle;
        return true;
    }
}

function toFile($path, $type = IMAGETYPE_JPEG, $options=array())
{
    switch ($type)
    {
        case IMAGETYPE_GIF:
            $ret = imagegif($this->_handle, $path);
            break;

        case IMAGETYPE_PNG:
            $ret = imagepng($this->_handle, $path, (array_key_exists('quality', $options)) ? $options['quality'] : 0);
            break;

        case IMAGETYPE_JPEG:
        default:
            $ret = imagejpeg($this->_handle, $path, (array_key_exists('quality', $options)) ? $options['quality'] : 100);
            break;
    }

    return $ret;
}

function display() {
    //header('Content-type: image/jpeg');
    imagejpeg($this->_handle,'',100);
}

function _prepareDimensions($width, $height, $scaleMethod)
{
    // Sanitize width.
    $width = ($width === null) ? $height : $width;
    if (preg_match('/^[0-9]+(\.[0-9]+)?\%$/', $width)) {
        $width = intval(round($this->getWidth() * floatval(str_replace('%', '', $width)) / 100));
    } else {
        $width = intval(round(floatval($width)));
    }

    // Sanitize height.
    $height = ($height === null) ? $width : $height;
    if (preg_match('/^[0-9]+(\.[0-9]+)?\%$/', $height)) {
        $height = intval(round($this->getHeight() * floatval(str_replace('%', '', $height)) / 100));
    } else {
        $height = intval(round(floatval($height)));
    }

    $dimensions = array();
    if ($scaleMethod == JXIMAGE_SCALE_FILL)
    {
        $dimensions['width'] = $width;
        $dimensions['height'] = $height;
    }
    elseif ($scaleMethod == JXIMAGE_SCALE_INSIDE || $scaleMethod == JXIMAGE_SCALE_OUTSIDE)
    {
        $rx = $this->getWidth() / $width;
        $ry = $this->getHeight() / $height;

        if ($scaleMethod == JXIMAGE_SCALE_INSIDE)
            $ratio = ($rx > $ry) ? $rx : $ry;
        else
            $ratio = ($rx < $ry) ? $rx : $ry;

        $dimensions['width']    = round($this->getWidth() / $ratio);
        $dimensions['height']   = round($this->getHeight() / $ratio);
    }
    else {
        $this->setError('Invalid Fit Option');
        return false;
    }

    return $dimensions;
}
}

 class GImageFilter extends JObject
{
/**
 * Add a directory where GImage should search for filters. You may
 * either pass a string or an array of directories.
 *
 * @access  public
 * @param   string  A path to search.
 * @return  array   An array with directory elements
 * @since   1.5
 */
function addIncludePath($path='')
{
    static $paths;

    if (!isset($paths)) {
        $paths = array(dirname(__FILE__).'/image');
    }

    // force path to array
    settype($path, 'array');

    // loop through the path directories
    foreach ($path as $dir)
    {
        if (!empty($dir) && !in_array($dir, $paths)) {
            array_unshift($paths, JPath::clean( $dir ));
        }
    }

    return $paths;
}

function execute()
{
    $this->setError('Method Not Implemented');
    return false;
}
}

class GImageHelper
{
function getProperties($path)
{
    // Initialize the path variable.
    $path = (empty($path)) ? $this->_path : $path;

    // Make sure the file exists.
    if (!JFile::exists($path)) {
        $e = new JException('File Does Not Exist');
        return false;
    }

    // Get the image file information.
    $info = @getimagesize($path);
    if (!$info) {
        $e = new JException('Unable To Get Image Size');
        return false;
    }

    // Build the response object.
    $result = new JObject;
    $result->set('width',       $info[0]);
    $result->set('height',      $info[1]);
    $result->set('type',        $info[2]);
    $result->set('attributes',  $info[3]);
    $result->set('bits',        @$info['bits']);
    $result->set('channels',    @$info['channels']);
    $result->set('mime',        $info['mime']);

    return $result;
}

function test()
{
    return (function_exists('gd_info') &&            function_exists('imagecreatetruecolor'));
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:39:05.170

在我看来，您有内存泄漏，`$img`使用`new GImage`它创建时可能会将图像读入您从未释放的内存中。您复制调整大小的图像：

```
$tmp = $img->resize($width, $height, true, 3); 
```

但是下次在循环中，您将使用该变量`GImage`再次创建一个新的。`$img`

是否`GIMage`有某种`close`或`cleanup`功能？如果是这样，请在每个循环结束时`new GImage`再次调用之前执行此操作。

```
closeGImage($img); 
```

* * *

更新：

针对您更新的问题，您似乎可以做以下两件事之一：

*   将第三个参数更改`$img->resize()`为 false，因为这将停止在调整图像大小时创建新的 GImage。

*   编写您自己的图像销毁函数作为 GImage 类的一部分。因为 GImage 基于 GD 库，所以您可以使用该`imagedestroy`函数，[请参见此处](http://www.php.net/manual/en/function.imagedestroy.php)。

* * *

更新 2：

好的，所以从你的评论开始......你想要做的是在 GImage 类中创建一个破坏图像函数，添加以下函数：

```
function closeImage()
{
    imagedestroy($this->_handle);
} 
```

现在在 devtest.php 中 for 循环的底部添加对这个函数的调用：

```
...
ob_flush();
sleep(10);
echo $entry ;

$img->closeImage();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:36:10.380

*   尝试使用[`sleep`](http://php.net/manual/en/function.sleep.php)或[`usleep`](http://php.net/manual/en/function.usleep.php)来避免 CPU 过载。
*   也许`GImage`有一种`dispose()`或`destroy()`方法来避免记忆保留。
*   你也可以做批处理。

# windows-7 - 从命令行更改用于在 Windows 7 上访问 Internet 的网络适配器/接口

> ID：11691969
> 
> 赞同：1
> 
> 时间：2012-07-27T16:33:09.253
> 
> 标签：windows-7, command-line, interface, connection

一般情况：我有 Windows 7 64 位专业版，通过以太网连接网络并插入 USB GSM 调制解调器。问题是有时我的 Internet 提供商会出现一些中断，在此期间我想自动使用 USB 调制解调器。我已经编写了一些 Perl 代码来主动测试连接是否断开，并且可以运行 shell 命令来切换用于 Internet 访问的适配器。

问题是如何从命令提示符更改适配器。我宁愿不给脚本管理权限，但如果这是不可避免的，我可以忍受。

初步环视：

```
C:\Windows\system32>wmic nic get name, index
Index  Name
0      WAN Miniport (SSTP)
1      WAN Miniport (IKEv2)
2      WAN Miniport (L2TP)
3      WAN Miniport (PPTP)
4      WAN Miniport (PPPOE)
5      WAN Miniport (IPv6)
6      WAN Miniport (Network Monitor)
7      Realtek PCIe GBE Family Controller
8      WAN Miniport (IP)
9      Microsoft ISATAP Adapter
10     RAS Async Adapter
11     Teredo Tunneling Pseudo-Interface
12     Microsoft ISATAP Adapter
13     Microsoft 6to4 Adapter 
```

“netstat -rn”显示本地连接适配器的绑定优先级高于调制解调器，这很好。

普通用户使用我的 USB 调制解调器包括为其运行定制的应用程序并单击“连接/断开”按钮。AFAIK 该应用程序没有命令行选项。

在一个方向上，我想出了一种解决方法，它具有保持连接活动的额外优势：Jarek “Shider” Wieczorek 的 AutoConnect 0.1.3.1。AFAIK 它没有命令行选项，但是在配置完成后运行它会建立 GSM 连接，然后重新连接以防万一，这很棒。

现在，当 Internet 访问已恢复时，我坚持一段时间后如何切换回 LAN（这是我的主要，更快地访问网络）。杀死 AutoConnect 后，连接仍然通过调制解调器。我怀疑切换回来可能是一些 netsh 命令，但在帮助中没有发现任何明显的东西。在绝望的尝试中，我想到了使用 devcon.exe 禁用调制解调器，但从 [http://support.microsoft.com/?kbid=311272](http://support.microsoft.com/?kbid=311272)下载的程序 没有运行（我不会引用一些错误，因为它们是实际上与主要问题无关）并且在下载巨大的 Windows Driver Kit 7.1.0 以获得更好的版本之前，我想我会在这里寻求一些建议/解决方案:)

预先感谢您提供有关如何关闭 USB 连接（也许 Windows 会自动使用 LAN）或切换到 LAN 的任何简洁的通用解决方案或小的特定解决方案。

编辑：迟来的，我想出了一个解决方案。假设调制解调器连接的名称为 ABCD，以下将在关闭 AutoConnect 后终止它：

```
rasdial ABCD /disconnect 
```

但是，我仍然认为我提出的整个想法很尴尬，并且很乐意看到一些简洁的方法。谢谢。

# iphone - writing JSON data to disk

> ID：11691970
> 
> 赞同：5
> 
> 时间：2012-07-27T16:33:10.787
> 
> 标签：iphone, objective-c, ios, ipad

What is the easiest way to write a JSON data/NSDictionary and read it back again? I know there's NSFileManager, but is there an open source framework library out there that would make this process easier? Does iOS5 NSJSONSerialization class supports writing the data to disk?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T16:42:36.763

Yup, `NSJSONSerialization` is the way to go:

```
NSString *fileName = @"myJsonDict.dat"; // probably somewhere in 'Documents'
NSDictionary *dict = @{ @"key" : @"value" };

NSOutputStream *os = [[NSOutputStream alloc] initToFileAtPath:fileName append:NO];

[os open];
[NSJSONSerialization writeJSONObject:dict toStream:os options:0 error:nil];
[os close];

// reading back in...
NSInputStream *is = [[NSInputStream alloc] initWithFileAtPath:fileName];

[is open];
NSDictionary *readDict = [NSJSONSerialization JSONObjectWithStream:is options:0 error:nil];
[is close];

NSLog(@"%@", readDict); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T11:11:37.210

It seems you must ensure that the directories in the path exist, otherwise your app will hang and consume 100% of your CPU when using `+ writeJSONObject:toStream:options:error:`. The file itself will be created by the stream.

# c++ - 将 char* 传递给函数 c++

> ID：11691972
> 
> 赞同：-3
> 
> 时间：2012-07-27T16:33:18.230
> 
> 标签：c++, function, char

所以我有这个问题我无法解决:-(在我的.h中我有这个：

```
protected:
   char* _textPath_1;
   FileReader* _reader_3; 
```

在 .cpp 我有：

```
_reader_3 = new FileReader();
_textPath_1 = "foo";
_reader_3->openFile(_textPath_1); 
```

FileReader 有这个：

```
private:
   char* fileName;
public:
   signed int openFile(char* name); 
```

但如果我写这个（只是为了测试）：

```
signed int FileReader::openFile(char* name) {
    std::cout << name << std::endl;
    fileName = name;
    stream.open(fileName, std::ios::in);
    if (!stream.is_open()) {
        FileReader::printErrorOpeningFile(fileName);
        stream.close();
        return -1;
    }
   return 0;
} 
```

fileName 是一个 char *，我需要它获得相同的名称值（foo）。我收到一个错误，我什至无法打印名称，它只是打印一个空行.. 为什么？

编辑：即使使用 strcpy 也无法正常工作。实际上在函数内部我无法打印名称的值，就像它已被“取消初始化”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:45:30.903

您需要为您的文本字符串分配空间`_textPath_1`。试试这个。

```
char myTextString[] = "foo";
_textPath_1 = myTextString; 
```

这将创建一个本地字符数组（字符串），它被初始化为`"foo\0"`. 然后它将该字符串的地址复制到您的 char 指针`_textPath_1`。作为**LOCAL**存储，它只会在本地代码块中有效，一旦您的代码超出其范围，它将无法使用。如果您需要该字符串通过本地代码块，则需要从堆内存中分配它（`new`例如使用），并记住在完成后释放它。

您不能`strcpy`与未分配的指针一起使用，因为`strcpy`期望目标`char*`指向充当目标字符串缓冲区的字符数组。由于您根本没有分配任何字符空间，因此它无法复制`"foo"`到您`_textPath_1`的`strcpy`.

这些和其他乐趣`char*`是为什么`std::string`被发明的。不用担心分配和释放空间，必须使用 strcpy 来复制它的值等等等等。考虑使用`std::string _textPath_1`代替你的`char* _textPath_1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:58:00.320

您必须在调用函数之前分配 _reader_3。

FileReader* _reader_3 = 新的 FileReader；

我假设 fileName 是您的成员变量。在没有初始化的情况下访问指针会导致不可预知的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T17:02:25.130

如果您真的在头文件中定义全局变量：

```
char* _textPath_1;
FileReader* _reader_3; 
```

那你不应该那样做。全局变量应该在头文件中声明，但在实现文件中定义。

* * *

此代码工作正常：

```
#include <iostream>
#include <fstream>

struct FileReader {
    char* fileName;
    std::fstream stream;

    signed int FileReader::openFile(char* name) {
        std::cout << name << std::endl;
        fileName = name;
        stream.open(fileName, std::ios::in);
        if (!stream.is_open()) {
            FileReader::printErrorOpeningFile(fileName);
            stream.close();
            return -1;
        }
        return 0;
    }

    void printErrorOpeningFile(char *) {}
};

int main() {
    char* _textPath_1;
    FileReader* _reader_3;

    _reader_3 = new FileReader();
    _textPath_1 = "foo";
    _reader_3->openFile(_textPath_1);
    delete _reader_3;
} 
```

# mysql - 如何在存储过程中使用准备好的语句分配变量？

> ID：11691977
> 
> 赞同：5
> 
> 时间：2012-07-27T16:33:46.287
> 
> 标签：mysql, prepared-statement, dynamic-sql

我整理了一个简单的存储过程，其中传递了两个参数以使其更具动态性。我在“前两位数和记录计数”部分中使用了一个准备好的语句来完成此操作。

我不确定是否也可以`SET vTotalFT`使用准备好的语句使该部分动态化。

目前我必须对表名和字段进行硬编码。我希望`vTotalFT`根据准备好的动态 SQL 语句分配我的变量，但我不确定语法。这个想法是，当我调用我的过程时，我可以告诉它使用哪个表和哪个字段进行分析。

```
CREATE PROCEDURE `sp_benfords_ft_digits_analysis`(vTable varchar(255), vField varchar(255))
    SQL SECURITY INVOKER
BEGIN

    -- Variables
    DECLARE vTotalFT int(11);

    -- Removes existing table
    DROP TABLE IF EXISTS analysis_benfords_ft_digits;

    -- Builds base analysis table
    CREATE TABLE analysis_benfords_ft_digits
    (
        ID int(11) NOT NULL AUTO_INCREMENT,
        FT_Digits int(11),
        Count_of_Records int(11),
        Actual decimal(18,3),
        Benfords    decimal(18,3),
        Difference Decimal(18,3),
        AbsDiff decimal(18,3),
        Zstat decimal(18,3),
        PRIMARY KEY (ID),
        KEY id_id (ID)
    );

    -- First Two Digits and Count of Records
    SET @s = concat('INSERT INTO analysis_benfords_ft_digits
                        (FT_Digits,Count_of_Records)
                            select substring(cast(',vField,' as char(50)),1,2) as FT_Digits, count(*) as Count_of_Records
                            from ',vTable,'
                            where ',vField,' >= 10
                            group by 1');

    prepare stmt from @s;
    execute stmt;
    deallocate prepare stmt;

    SET vTotalFT = (select sum(Count_of_Records) from
                            (select substring(cast(Gross_Amount as char(50)),1,2) as FT_Digits, count(*) as Count_of_Records
                                from supplier_invoice_headers
                                where Gross_Amount >= 10
                                group by 1) a);

    -- Actual
    UPDATE analysis_benfords_ft_digits
    SET Actual = Count_of_Records / vTotalFT;

    -- Benfords
    UPDATE analysis_benfords_ft_digits
    SET Benfords = Log(1 + (1 / FT_Digits)) / Log(10);

    -- Difference
    UPDATE analysis_benfords_ft_digits
    SET Difference = Actual - Benfords;

    -- AbsDiff
    UPDATE analysis_benfords_ft_digits
    SET AbsDiff = abs(Difference);

    -- ZStat
    UPDATE analysis_benfords_ft_digits
    SET ZStat = cast((ABS(Actual-Benfords)-IF((1/(2*vTotalFT))<ABS(Actual-Benfords),(1/(2*vTotalFT)),0))/(SQRT(Benfords*(1-Benfords)/vTotalFT)) as decimal(18,3)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T17:13:47.903

首先，要使用动态表/列名称，您需要使用字符串/[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)，就像您的第一个查询一样`@s`。接下来，要从`COUNT()`查询内部获取返回值，您需要使用[`SELECT .. INTO @vTotalFT`](http://dev.mysql.com/doc/refman/5.0/en/select-into.html).

以下应该是您所需要的：

```
SET @vTotalFTquery = CONCAT('(select sum(Count_of_Records) INTO @vTotalFT from
                        (select substring(cast(', vField, ' as char(50)),1,2) as FT_Digits, count(*) as Count_of_Records
                            from ', vTable, '
                            where ', vField, ' >= 10
                            group by 1) a);');
PREPARE stmt FROM @vTotalFTquery;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请注意：变量名称已从 更改`vTotalFT`为`@vTotalFT`。没有`@`. 而且，`@vTotalFT`当在查询之外/之前声明该变量时，该变量将不起作用，因此，如果您遇到可能是原因的错误或空结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T09:02:24.390

```
SELECT CONCAT (
        'SELECT DATE(PunchDateTime) as day , '
        ,GROUP_CONCAT('GROUP_CONCAT(IF(PunchEvent=', QUOTE(PunchEvent), ',PunchDateTime,NULL))
       AS `', REPLACE(PunchEvent, '`', '``'), '`')
        ,'
         FROM     tbl_punch
         GROUP BY DATE(PunchDateTime) 
         ORDER BY PunchDateTime ASC
       '
        )
INTO @sql
FROM (
    SELECT DISTINCT PunchEvent
    FROM tbl_punch
    ) t;

PREPARE stmt
FROM @sql;

EXECUTE stmt;

DEALLOCATE PREPARE stmt; 
```

# iphone - 如何禁用代码签名要求

> ID：11691979
> 
> 赞同：0
> 
> 时间：2012-07-27T16:33:49.207
> 
> 标签：iphone, code-signing, archiving

在从 Appstore 收到无效二进制文件的电子邮件后，修复了现在尝试再次存档的问题，Xcode 给出了错误，即 SDK iOS 5.1 中的产品类型应用程序需要代码签名。

那么如何禁用此代码签名。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:51:35.680

在文件/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/SDKSettings.plist

更改 CODE_SIGNING_REQUIRED YES

至

CODE_SIGNING_REQUIRED 否

重启 Xcode

# mamp - 将 MAMP PRO 路径更改为配置文件

> ID：11691980
> 
> 赞同：0
> 
> 时间：2012-07-27T16:33:57.323
> 
> 标签：mamp

我在使用 OS 10.7.4 (Lion) 的 MAC 上运行 MAMP PRO 2.1.1。如何更改配置（php.ini）文件的路径，使其与安装的配置文件的路径相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:05:36.287

使用的路径`php.ini`将基于您在 MAMP 中选择的 PHP 版本。例如，对于 PHP 5.3.4，通常是：

```
/Applications/MAMP/conf/php5.4.3/php.ini 
```

假设您没有更改默认值，您还应该能够访问 MAMP 信息页面：

```
http://localhost:8888/MAMP/ 
```

选择“phpInfo”选项卡并查找“Loaded Configuration File”设置。

# python - Matlab VS Python - eig(A,B) VS sc.linalg.eig(A,B)

> ID：11691981
> 
> 赞同：5
> 
> 时间：2012-07-27T16:34:01.613
> 
> 标签：python, matlab, numpy, scipy, eigenvalue

我有以下矩阵 sigma 和 sigmad：

西格玛：

```
 1.9958   0.7250
    0.7250   1.3167 
```

西格玛：

```
 4.8889   1.1944
    1.1944   4.2361 
```

如果我尝试在 python 中解决广义特征值问题，我会得到：

```
 d,V = sc.linalg.eig(matrix(sigmad),matrix(sigma)) 
```

五：

```
 -1     -0.5614
    -0.4352    1 
```

如果我尝试在 matlab 中解决 ge 问题，我会得到：

```
 [V,d]=eig(sigmad,sigma) 
```

五：

```
 -0.5897    -0.5278
    -0.2564    0.9400 
```

但 d 确实重合。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T16:56:40.490

特征向量的任何（非零）标量倍数也将是特征向量；只有方向有意义，而不是整体规范化。不同的例程使用不同的约定——通常你会看到幅度设置为 1，或者最大值设置为 1 或 -1——并且出于性能原因，某些例程甚至不会在内部保持一致。您的两个不同结果是彼此的倍数：

```
In [227]: sc = array([[-1., -0.5614], [-0.4352,  1\.    ]])

In [228]: ml = array([[-.5897, -0.5278], [-0.2564, 0.94]])

In [229]: sc/ml
Out[229]: 
array([[ 1.69577751,  1.06366048],
       [ 1.69734789,  1.06382979]]) 
```

所以它们实际上是相同的特征向量。将矩阵视为改变向量的算子：特征向量是指向该方向的向量不会被矩阵扭曲的特殊方向，特征值是衡量矩阵扩展或收缩向量多少的因素。

# php - 从数组中获取随机值

> ID：11691983
> 
> 赞同：1
> 
> 时间：2012-07-27T16:34:04.580
> 
> 标签：php, arrays

我有一个输出以下内容的数组：

```
Array ( [roi_data] => Array (
    [0] => Array ( [title] => Test ROI )
    [1] => Array ( [title] => Another ROI ) 
)) 
```

我想将所有带有标题的键组合成一个数组，然后从中回显一个随机值。

我试过使用`array_rand()`，但我只是让这个词`Array`出现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T16:36:26.217

你有一个嵌套数组，所以你需要：

```
$key = array_rand( $array['roi_data']);
echo $array['roi_data'][$key]['title']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T16:38:25.453

你有一个多维数组。当您调用 时`array_rand`，您将从第一层数组中获取一个随机元素——该元素本身就是一个数组。

```
Array (
    [roi_data] => Array (          <-- there is only one element in the top level
        [0] => Array (               <-- there are two elements in this level
            [title] => Test ROI        <-- there is only one element in this level
        ), 
        [1] => Array (
            [title] => Another ROI 
        )
    )
) 
```

因此，如果您想从`roi_data`关卡中获取随机元素，则必须指定：

```
$key = array_rand($myArray['roi_data']);
$item = $myArray['roi_data'][$key];
echo $item['title']; 
```

**文档**

*   `array_rand`- [http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)
*   PHP 数组 - [http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)
*   了解多维数组 - [http://webcheatsheet.com/php/multidimensional_arrays.php](http://webcheatsheet.com/php/multidimensional_arrays.php)

# ruby - 如何检查对象是否不是 Ruby 中的核心类型？

> ID：11691985
> 
> 赞同：2
> 
> 时间：2012-07-27T16:34:15.247
> 
> 标签：ruby, types

在 Ruby 中，确定对象是否属于用户定义、gem 定义或标准库定义的类的最佳方法是什么，而不是核心库中的类（例如 Object、String、Hash、Numeric ， ETC。）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T16:41:38.537

### 预定义列表

```
# Put your own list of classes here...
NATIVES = [ Object, String, Hash, Numeric ]

do_something if NATIVES.include?( my_object.class ) 
```

### 快照类

```
# Before the user can load their own classes, find all existing classes
BUILTINS = ObjectSpace.each_object.select{ |o| o.class==Class }

do_something if BUILTINS.include?( my_object.class ) 
```

这是我在解释器中获取的对象列表：

```
ARGF.class
ArgumentError
Array
BasicObject
Bignum
Binding
Class
Complex
Data
Dir
EOFError
Encoding
Encoding::CompatibilityError
Encoding::Converter
Encoding::ConverterNotFoundError
Encoding::InvalidByteSequenceError
Encoding::UndefinedConversionError
EncodingError
Enumerator
Enumerator::Generator
Enumerator::Yielder
Errno::E2BIG
Errno::EACCES
Errno::EADDRINUSE
Errno::EADDRNOTAVAIL
Errno::EAFNOSUPPORT
Errno::EAGAIN
Errno::EALREADY
Errno::EBADF
Errno::EBUSY
Errno::ECHILD
Errno::ECONNABORTED
Errno::ECONNREFUSED
Errno::ECONNRESET
Errno::EDEADLK
Errno::EDESTADDRREQ
Errno::EDOM
Errno::EDQUOT
Errno::EEXIST
Errno::EFAULT
Errno::EFBIG
Errno::EHOSTDOWN
Errno::EHOSTUNREACH
Errno::EILSEQ
Errno::EINPROGRESS
Errno::EINTR
Errno::EINVAL
Errno::EIO
Errno::EISCONN
Errno::EISDIR
Errno::ELOOP
Errno::EMFILE
Errno::EMLINK
Errno::EMSGSIZE
Errno::ENAMETOOLONG
Errno::ENETDOWN
Errno::ENETRESET
Errno::ENETUNREACH
Errno::ENFILE
Errno::ENOBUFS
Errno::ENODEV
Errno::ENOENT
Errno::ENOEXEC
Errno::ENOLCK
Errno::ENOMEM
Errno::ENOPROTOOPT
Errno::ENOSPC
Errno::ENOSYS
Errno::ENOTCONN
Errno::ENOTDIR
Errno::ENOTEMPTY
Errno::ENOTSOCK
Errno::ENOTTY
Errno::ENXIO
Errno::EOPNOTSUPP
Errno::EPERM
Errno::EPFNOSUPPORT
Errno::EPIPE
Errno::EPROCLIM
Errno::EPROTONOSUPPORT
Errno::EPROTOTYPE
Errno::ERANGE
Errno::EREMOTE
Errno::EROFS
Errno::ESHUTDOWN
Errno::ESOCKTNOSUPPORT
Errno::ESPIPE
Errno::ESRCH
Errno::ESTALE
Errno::ETIMEDOUT
Errno::ETOOMANYREFS
Errno::EUSERS
Errno::EWOULDBLOCK
Errno::EXDEV
Errno::NOERROR
Exception
FalseClass
Fiber
FiberError
File
File::Stat
Fixnum
Float
FloatDomainError
Gem::CommandLineError
Gem::DependencyError
Gem::DependencyRemovalException
Gem::DocumentError
Gem::EndOfYAMLException
Gem::Exception
Gem::FilePermissionError
Gem::FormatException
Gem::GemNotFoundException
Gem::GemNotInHomeException
Gem::InstallError
Gem::InvalidSpecificationException
Gem::LoadError
Gem::OperationNotSupportedError
Gem::RemoteError
Gem::RemoteInstallationCancelled
Gem::RemoteInstallationSkipped
Gem::RemoteSourceException
Gem::SystemExitException
Gem::VerificationError
Hash
IO
IOError
IndexError
Integer
Interrupt
KeyError
LoadError
LocalJumpError
MatchData
Math::DomainError
Method
Module
Mutex
NameError
NameError::message
NilClass
NoMemoryError
NoMethodError
NotImplementedError
Numeric
Object
Proc
Process::Status
Random
Range
RangeError
Rational
Regexp
RegexpError
RubyVM
RubyVM::Env
RubyVM::InstructionSequence
RuntimeError
ScriptError
SecurityError
SignalException
StandardError
StopIteration
String
Struct
Struct::Tms
Symbol
SyntaxError
SystemCallError
SystemExit
SystemStackError
Thread
ThreadError
ThreadGroup
Time
TrueClass
TypeError
UnboundMethod
ZeroDivisionError 
```

# jsp - 如何给参数赋值 ?

> ID：11691997
> 
> 赞同：2
> 
> 时间：2012-07-27T16:34:58.497
> 
> 标签：jsp, jboss, jstl, portlet, jboss-portal

我正在尝试为 <portlet:resourceURL/> 的参数赋值

```
<portlet:resourceURL id="<%=Constants.Color%>" var="<%=Constants.Color%>"/> 
```

此代码不起作用。

```
public class Constants {
    public static final String Color = "Red";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:59:14.753

为了使用 jsp 中的 resourceURL 传递参数，您将执行类似...

```
 <portlet:resourceURL var="varname" escapeXml="false">
        <portlet:param name="paramName" value="paramVal" />
      </portlet:resourceURL> 
```

在您的 portlet 中

```
 request.getParameter("paramName"); 
```

# css - 静态css不显示在快递翡翠中

> ID：11691998
> 
> 赞同：0
> 
> 时间：2012-07-27T16:34:59.847
> 
> 标签：css, node.js, coffeescript, express, pug

为 ilollar 答案编辑（同样的问题）我有 app.coffee ：

```
pp.configure ->
  publicDir = "#{__dirname}/public"

app.set "views", viewsDir
app.set "view engine", "jade"

app.use(stylus.middleware debug: true, src: viewsDir, dest: publicDir, compile: compileMethod)
app.use(express.static(publicDir))

compileMethod = (str, path) ->
  stylus(str)
    .set('filename', path)
    .set('compress', true)

app.get "/pag",(req,res) ->
  res.render "pag",
  title: "test", 
```

在 /stylesheet/pag.jade 中：

```
...
link(rel='stylesheet', href='pag/css/bootstrap.min.css')
... 
```

当我转到“myserver:9090/pag”时，页面没有加载 bootstrap.min.css。我收到以下错误：

```
source :(my folder of proyects)/views/pag/css/bootstrap.min.styl
dest : (my folder of proyects)/public/pag/css/bootstrap.min.css
read : (my folder of proyects)/views/pag/css/bootstrap.min.styl
Error: ENOENT, open '(my folder)/views/pag/css/bootstrap.min.styl' 
```

我哪里错了？我可能错过了一些东西..有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T17:20:16.103

首先，如果你还没有设置 ExpressJS 来提供静态文件，你会想要这样做：

`app.use(express.static(__dirname + '/public'));`

然后，从样式表调用中删除“public”：

`link(rel='stylesheet', href='/pag/css/bootstrap.min.css')`

您将“public”设置为提供静态文件的应用程序根目录，因此无需在调用中指定“public”——“public”现在是根目录。

**更新：**
你的`viewsDir`设置是什么？由于您已将 Stylus 中间件的源设置到该目录，因此它正在寻找`styl`要渲染的位置。

您将“public”设置为目标目录 - 如果您在调用中包含“public”，它只会在 public 下创建另一个公共目录，这不是您想要的。

尝试将项目中的样式表重新组织为如下所示：

```
/stylesheets
  /pag
    /css
      bootstrap.min.styl 
```

然后将您的中间件更改为：

`app.use(stylus.middleware debug:true, src:'/stylesheets', dest: publicDir, compile: compileMethod)`