# StackOverflow 问答 10158000-10158999

# svn - 如何在已安装 Centos 6.2 和 WHM 的 VPS 上设置 SVN 服务器

> ID：10158001
> 
> 赞同：0
> 
> 时间：2012-04-14T22:50:47.690
> 
> 标签：svn, tortoisesvn, centos, vps, whm

背景：
托管 VPS（由 KnownHost 托管），在 Centos 6.2 上使用 WHM/Cpanel。
我正在尝试设置一个 SVN 服务器来帮助我的开发团队保持对代码和其他资产的修订。

我已经让主机支持安装颠覆，但是我有一段时间让 WedDav 工作（用户使用 TortoiseSVN 的 url）。

是否有关于如何在安装了 WHM 的 CentOS 6x 服务器上设置 SVN 的分步教程？

我用谷歌搜索并搜索了 Stackoverflow，但我发现的教程或网站仅涵盖 CentOS 上的 SVN，而不是 WHM。当然，我需要考虑WHM的原因，因为安装WHM时会有一些apache更改，然后我当然会迷路，因为我是linux管理的新手（但是如果解释的话，我会很快接受并不要不介意自己尝试）。

我已经联系了 Knownhost 支持，但他们没有就“第三方”软件做出承诺。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:48:50.897

如果我理解正确，您希望能够使用`http://`协议通过 Apache http 访问 Subversion？那是对的吗？

有一个在线[Subversion 手册，它为您提供有关设置](http://svnbook.red-bean.com/)[Apache http](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html)以充当您的 Subversion 存储库服务器的分步说明。

诀窍不一定是配置文件。诀窍是获取所有 http 模块和正确版本的与 HTTP 一起使用的 Subversion。幸运的是，大多数预编译的命令行客户端现在都可以使用 HTTP。（情况并非总是如此）。但是，您必须确保正确构建 Apache httpd。

您可以在`/etc/httpd/modules`. 确保`mod_dav_svn.so`两者`mod_dav.so`都在那里。如果没有，您可能必须重建 Apache httpd。如果您使用 Windows Active Directory 进行身份验证，则必须确保它`mod_ldap.so`也`authzn_ldap.so`包括在内。您可以在此处找到[LDAP 配置](http://www.yolinux.com/TUTORIALS/LinuxTutorialApacheAddingLoginSiteProtection.html#LDAP)。

配置将在下`/etc/httpd/conf/httpd.conf`和下`/etc/httpd/conf.d/subversion.conf`。这个想法是将 Subversion 配置保存在一个单独的文件中。请注意，如果您使用 LDAP，您可能会在配置中公开密码。您可能需要修改权限和所有权，以防止用户找到与该帐户关联的帐户信息和密码。否则，您可能希望使用只能读取 LDAP 目录但无权访问存储库本身的特殊帐户。

您仍然需要使用`svnadmin create`来创建实际的存储库。再次，请参阅 Subverison 在线手册以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T17:16:37.010

如果允许我的话，

在 Centos6 下，您可能不需要重建任何东西。这是 c6 的全新启动：

```
# rpm -qf /etc/issue     # works for everything but suse
centos-release-6-6.el6.centos.12.2.x86_64
# yum install mod_dav_svn mod_authnz_pam subversion -y

::::::::::::::
/etc/httpd/conf.d/v000.prequel.conf
::::::::::::::
NameVirtualHost *:80

::::::::::::::
/etc/httpd/conf.d/v555_virt_svn.conf
::::::::::::::
<virtualhost _default_:80>
  Servername     svn.corp.com
  serveralias    svn

  Alias     /svn    /data/svn

  <Directory /data/svn>
    Authtype        basic
    AuthName        "Subversion (AD)"
    AuthBasicProvider   PAM
    AuthPamService  system-auth
    Require     valid-user
    #Option     +Indexes
  </Directory>
</Virtualhost>

::::::::::::::
/etc/httpd/conf.d/v999.default.conf
::::::::::::::
<virtualhost _default_:80>
Servername      localhost
</VirtualHost> 
```

我离我想要的地方很近，但我想我已经有点过了你在这里的位置，而且我还没有做过像为企业操作系统手工构建软件那样愚蠢的事情，而我当时需要支持。;-)

# tomcat - 在外部 Tomcat 和 SAP Java 连接器上部署

> ID：10158004
> 
> 赞同：-1
> 
> 时间：2012-04-14T22:51:35.090
> 
> 标签：tomcat, deployment, external, jco

我在带有 SAP 的 VM 上使用 ant 部署我的 JSF 项目，但是当我尝试连接时出现异常：

> JCO.nativeInit()：无法初始化动态链接库 sapjcorfc [本机库 C:\WINDOWS\system32\sapjcorfc.dll 已加载到另一个类加载器中]。

我将从 WEB-INF 文件夹中删除我的 JCo Jar 并将其添加到 tomcat lib 文件夹中。但是当 Jar 文件位于外部 tomcat 上时，如何在 Eclipse 中添加 Jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:08:23.233

您可以将 jar 复制到项目外部的本地目录，并将其添加到类路径中。这应该允许您编译，但不会将 jar 传输到外部 tomcat，因为它位于 lib/ext 文件夹中，因此您的应用可以访问它。

# android - 使用数据库登录系统

> ID：10158007
> 
> 赞同：0
> 
> 时间：2012-04-14T22:51:51.907
> 
> 标签：android

我想使用创建数据库的 SQLLIte 创建简单的登录系统，但光标中出现错误。

我的数据库代码是

```
public static final String KEY_RAWID = "_id";
    public static final String KEY_RAWNAME = "name";
    public static final String KEY_PASSWORD = "password";
    public static final String KEY_EMAIL = "email";
        private static final String DATABASE_NAME = "users_DB";
    private static final String DATABASE_TABLE = "users";
    private dbusers ourhelper;
    private final Context ourcontext;
    private SQLiteDatabase ourDatabase;

    private static class dbusers extends SQLiteOpenHelper {

        public dbusers(Context context) {
            super(context, DATABASE_TABLE, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

            db.execSQL("CREATE TABLE " + DATABASE_TABLE + "(" + KEY_RAWID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " +    KEY_RAWNAME
                    + " TEXT NOT NULL, " + KEY_PASSWORD + " TEXT NOT   NULL, "
                    + KEY_EMAIL + " TEXT NOT NULL);");

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS" + DATABASE_TABLE);
            onCreate(db);
        }

    }

    public Dbinfo(Context c) {
        ourcontext = c;
    }

    public Dbinfo open() {
        ourhelper = new dbusers(ourcontext);
        ourDatabase = ourhelper.getWritableDatabase();
        return this;
    }

    public void close() {
        ourhelper.close();
    } 
```

我在这个函数中有错误

```
public Boolean check(String nameS, String passwordS) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_RAWID, KEY_RAWNAME, KEY_PASSWORD,
                KEY_EMAIL };
        Cursor c = null;
        Boolean check = true;

        c=ourDatabase.rawQuery("SELECT name,password FROM users WHERE name="+nameS,null);

        if (c.getCount() > 0)// && c2.getCount() > 0) {
        {   check = false;
            return check;
        }

        return check; 
```

错误：

```
04-15 00:29:23.302: E/AndroidRuntime(1300): android.database.sqlite.SQLiteException: no such column: khaled: , while compiling: SELECT name,password FROM users WHERE name=khaled 
```

虽然我已经在数据库中添加了数据，并且我检查了数据库中的数据是否添加成功。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:06:07.853

推荐的方式是这样的：

```
c = ourDatabase.rawQuery("SELECT name, password FROM users WHERE name = ?",
  new String[]{nameS}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:59:35.683

nameS 必须用引号引起来：

```
c=ourDatabase.rawQuery("SELECT name,password FROM users WHERE name='"+nameS+"'",null); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-14T23:01:38.697

此行需要更改为：

```
c=ourDatabase.rawQuery("SELECT name,password FROM users WHERE name="+nameS,null); 
```

到

```
c=ourDatabase.rawQuery("SELECT name,password FROM users WHERE name='"+nameS+"'",null); 
```

# c++ - Windows 编程教程中未解析的外部符号 __RTC_*

> ID：10158013
> 
> 赞同：7
> 
> 时间：2012-04-14T22:53:14.800
> 
> 标签：c++, windows, visual-studio-2010, linker-errors

使用 Visual Studio Express 2010，我创建了一个带有 Windows Application 和 Empty Project 选项的 Windows 项目。然后我尝试了MSDN Windows 教程中的[以下代码片段](http://msdn.microsoft.com/en-us/library/ff485843%28v=vs.85%29.aspx)：

```
#include <windows.h>
#include <shobjidl.h> 

int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE, PWSTR pCmdLine, int nCmdShow)
{
    HRESULT hr = CoInitializeEx(NULL, COINIT_APARTMENTTHREADED | 
        COINIT_DISABLE_OLE1DDE);
    if (SUCCEEDED(hr))
    {
        IFileOpenDialog *pFileOpen;

        // Create the FileOpenDialog object.
        hr = CoCreateInstance(CLSID_FileOpenDialog, NULL, CLSCTX_ALL, 
                IID_IFileOpenDialog, reinterpret_cast<void**>(&pFileOpen));

        if (SUCCEEDED(hr))
        {
            // Show the Open dialog box.
            hr = pFileOpen->Show(NULL);

            // Get the file name from the dialog box.
            if (SUCCEEDED(hr))
            {
                IShellItem *pItem;
                hr = pFileOpen->GetResult(&pItem);
                if (SUCCEEDED(hr))
                {
                    PWSTR pszFilePath;
                    hr = pItem->GetDisplayName(SIGDN_FILESYSPATH, &pszFilePath);

                    // Display the file name to the user.
                    if (SUCCEEDED(hr))
                    {
                        MessageBox(NULL, pszFilePath, L"File Path", MB_OK);
                        CoTaskMemFree(pszFilePath);
                    }
                    pItem->Release();
                }
            }
            pFileOpen->Release();
        }
        CoUninitialize();
    }
    return 0;
} 
```

我收到以下错误：

```
1>------ Rebuild All started: Project: Test05, Configuration: Debug Win32 ------
1>  Test05.cpp
1>Test05.obj : error LNK2019: unresolved external symbol @_RTC_CheckStackVars@8 
referenced in function _wWinMain@16
1>Test05.obj : error LNK2019: unresolved external symbol __RTC_CheckEsp referenced in 
function _wWinMain@16
1>Test05.obj : error LNK2001: unresolved external symbol __RTC_Shutdown 
1>Test05.obj : error LNK2001: unresolved external symbol __RTC_InitBase
1>LINK : error LNK2001: unresolved external symbol _wWinMainCRTStartup 
```

这里发生了什么？最好我能说出与 相关的`wWinMain`内容，但它是直接从网站复制的。

编译器对我来说似乎比学习编程更麻烦。在尝试了其他一些（主要是代码块）之后，我决定使用 Visual C++，但由于 Visual C++ 似乎得到了最多的支持（或者至少是大多数用户），我认为这总比没有任何地方好，因为它们都太不直观了初学者。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-08T09:52:24.583

使用“基本运行时检查”时会添加 _RTC_xxx 符号；要禁用它们，您可以继续项目属性，并将配置属性>C/C++>所有选项>基本运行时检查选项设置为“默认”。不过，正如其他答案中提到的那样，看起来您在 C-Runtime 库中不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:33:39.430

我会从[此处](http://msdn.microsoft.com/en-us/library/ff485849%28v=vs.85%29.aspx)的链接下载完整的代码示例，而不是复制和粘贴您链接到的代码片段。项目文件中可能存在未显示的重要编译器/链接器设置。该示例是 VS 2008 解决方案，但我能够将其升级到 2010 解决方案并构建它。但是，当我尝试在 VS 2008 中构建它时，它给了我“致命的链接器错误：找不到‘kernel32.lib’”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:03:52.173

看起来您正在链接的运行时库的版本与您正在编译的运行时库的版本不同。

请确保您在路径中仅安装了一个版本的 Visual Studio。

如果您有多个版本，请尝试临时重命名其他 Visual Studio 安装的根目录，看看这是否会产生任何影响。

# c# - 自托管 Web API 时使用 Ninjects InRequestScope()

> ID：10158015
> 
> 赞同：13
> 
> 时间：2012-04-14T22:53:50.700
> 
> 标签：c#, .net, asp.net-mvc-3, ninject, asp.net-web-api

我正在使用自托管方法创建一个具有 ASP.NET Web API 接口的应用程序。我想使用类似于`InRequestScope()`MVC3 提供的范围。当我在 IIS 上托管 Web API 应用程序时，Ninject.Extension.WebAPI 似乎支持它。但是当我自己托管 WebAPI 时，我会在创建绑定时得到一个新实例`InRequestScope()`。当我自己托管 Web API 时，有什么方法可以使用这个范围？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T00:43:21.180

您可以使用 NamedScope 扩展来定义控制器定义范围并将该范围用于请求范围内的所有内容。最好使用此定义的约定：

```
const string ControllerScope = "ControllerScope"; 
kernel.Bind(x => x.FromThisAssembly()
                  .SelectAllClasses().InheritedFrom<ApiController>()
                  .BindToSelf()
                  .Configure(b => b.DefinesNamedScope(ControllerScope)));

kernel.Bind<IMyComponent>().To<MyComponent>().InNamedScope(ControllerScope); 
```

我建议`INotifyWhenDisposed`为控制器实现，以便请求范围内的对象在请求后立即释放。例如，通过从以下类派生而不是`ApiController`

```
public abstract class NinjectApiController : ApiController, INotifyWhenDisposed
{
    protected override void Dispose(bool disposing)
    {
        base.Dispose(disposing);
        this.IsDisposed = true;
        this.Disposed(this, EventArgs.Empty);
    }

    public bool IsDisposed
    {
        get;
        private set;
    }

    public event EventHandler Disposed;
} 
```

我尝试在接下来的几周内为 WebAPI 自托管提供扩展。

**编辑：**

自托管支持现在由 Ninject.Web.WebApi.Selfhosting [https://nuget.org/packages/Ninject.Web.WebApi.Selfhost/3.0.2-unstable-0提供](https://nuget.org/packages/Ninject.Web.WebApi.Selfhost/3.0.2-unstable-0)

示例：[https ://github.com/ninject/Ninject.Web.WebApi/tree/master/src/Ninject.Web.WebApi.Selfhost](https://github.com/ninject/Ninject.Web.WebApi/tree/master/src/Ninject.Web.WebApi.Selfhost)

# html - MVC 3 在动作之间传递变量

> ID：10158017
> 
> 赞同：0
> 
> 时间：2012-04-14T22:54:03.777
> 
> 标签：html, asp.net-mvc-3

我正在一个需要在操作之间传递变量的网站上工作。变量实际上是`input`字段。这是一些示例标记。

```
<table>
    <tr>
        <td><input type="checkbox" name="major/1" value="1" checked /></td>
    </tr>
    <tr>
        <td><input type="radio" name="major/2" value="1" checked /></td>
        <td><input type="radio" name="major/2" value="2" /></td>
    </tr>
</table>

<a href="/NextPage/2/2">Next Page</a> 
```

我基本上想要那些通过分页系统传递的值，以便最终可以全部使用。我怎么能做到这一点？最好不使用围绕整个页面的表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:12:10.587

将输入表单元素从一个页面传递到另一个页面的唯一方法是通过表单发布。您当然可以通过会话或类似方式传递数据，但这不是在表单元素中传递它们。

我不明白你不愿意使用表格。隐藏字段是表单元素。它们以表格形式使用。这就是他们的目的。您想使用表单元素但不使用表单？这很没有意义。

编辑：

我认为您的问题是您并不真正了解浏览器和服务器的工作方式。它们仅通过 get 和 post 命令进行通信。因此，向服务器发送输入的唯一方法是通过帖子，并且帖子必须包含表单。这就是浏览器发送数据的方式。

您可以通过 javascript 做很多事情，但所有这些事情都比仅仅发布您的帖子要复杂得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:02:10.553

我可以看到两种可能的方法。首先，在回发表单中使用隐藏的输入字段。这将确保来自当前迭代的变量在回发时保存到模型中：

```
@Html.HiddenFor(model=>model.Field1) 
```

第二个是将您需要的任何内容保存到控制器端的 TempData 并在下一次回发时检索它：

```
TempData["tempkey"] = MyModel; 
```

我认为最佳解决方案是否是其中之一（或其他）取决于您的模型和控制器逻辑的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:23:18.190

在不使用表单的情况下完成此操作的最简单方法是使用 jQuery 或 javascript 来获取值并将它们附加为 url 变量，假设这是一种可接受的方法。另一种方法是捕获值，通过 ajax 提前发送它们，并让您的后端在访问链接之前将它们存储为会话变量首先，给链接一个类名以收听...

```
$('.navigation').on('click', '.pagelink', function(e){
    e.preventDefault();

    // url variables method
    var theUrl = ($(this).attr('href')) + '?';
    var ajaxUrl = $(this).attr('href');

    // needed for ajax method
    var theVals = new Object();
    $.each('table input', function() {
        // needed for ajax method
        var theName = $(this).attr('name');
        theVals[theName] = $(this).val();
        // url variables method
        theUrl = theUrl + theName + '=' + $(this).val() + '&';
    });
    // url variables method
    theUrl = theUrl.substr(0, theUrl.length - 2);// removes ending ampersand
    window.location = theUrl;

    // the ajax session method
    $.ajax({
        url : [MVC path to store session variables - ex: /ajax/setsession/],
        type : 'POST',
        data : theVals,
        success : function(data) {
            if(data) {
                // do something with data, like display success message
                window.location = ajaxUrl;
            }
        }
    }); 
```

# java - 在java中写入文件的最快方法

> ID：10158019
> 
> 赞同：2
> 
> 时间：2012-04-14T22:54:23.980
> 
> 标签：java, optimization, file-io, directory-structure

我正在编写一个比较目录结构的应用程序。首先，我编写了一个应用程序，它写入获取有关文件的信息 - 每个文件或目录的一行。

这是我调用方法的解决方案`toFile()`

```
Static PrintWriter pw = new PrintWriter(new BufferedWriter( new FileWriter("DirStructure.dlis")), true);
String line; // info about file or directory
public void toFile(String line) {
    pw.println(line);
} 
```

当然`pw.close()`，最后。

我的问题是，我可以做得更快吗？最快的方法是什么？

编辑：“最快”方式的意思是最快写入文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:12:20.407

Sun 实际上有一个关于这个的[教程。](http://www.oracle.com/technetwork/articles/javase/perftuning-137844.html)根据他们的说法，您可以获得高达 17 倍的速度（在最坏的情况下到最好的情况下）。

他们谈论缓冲、直接缓冲、操作系统和更多有用的话题。
考虑到，正如您所说，您将有很多文件和行，我建议将流压缩/解压缩作为一种方法，但请阅读整个内容（我没有而且只是根据经验回答）。

编辑：
考虑到这是家庭作业，该页面中所有概念的知识肯定会给你的老师留下深刻印象，所以你可以添加一些评论，说明你在做什么，为什么，以及列出替代方案。;)

编辑2：
刚刚看到该行包含的内容。如果文件仅包含该信息，请考虑在下一个文件在队列中时异步创建这些行。也就是说，目录应该是多个目录名称，适当组合等等。请参阅链接的[这部分](http://java.sun.com/developer/technicalArticles/Programming/PerfTuning/#ObtainingFileInformation)快速操作以获取有关文件的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:11:44.380

**Peter Lawrey**写道：
您获取数据的速度几乎肯定会慢 100 倍，因此这对于写作来说可能是件好事。
因此，问题中显示的我的解决方案似乎很好。

# css - 使用 css 将图像缩放到宽度和高度以进行缩放

> ID：10158023
> 
> 赞同：9
> 
> 时间：2012-04-14T22:55:10.987
> 
> 标签：css, image

边界框约为 1000x600，一些图像为 500x100，而另一些为 400x100（极端示例）。现在我想将两者都放大到边界框能够处理的最大尺寸，但要保持它们的比例。

```
img {
  width: 100%;
  height: 100%;
} 
```

不会保持图像按比例缩放。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T23:06:02.600

您可以仅将宽度或仅高度设置为 100%。例如

```
img {
    width: 100%;
} 
```

或者

```
img {
    height: 100%;
} 
```

这将保留图像比例，但图像可能会溢出容器。

这可能不适用于所有浏览器，但适用于最新版本的 Firefox、Chrome 和 Opera。过去我对此有过奇怪的经历，我的解决方案是计算服务器上的新图像大小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T12:07:35.413

直到我阅读了这个线程（[调整视图宽度，使用 CSS 保留图像纵横比](https://stackoverflow.com/questions/10559058/resize-view-width-preserve-image-aspect-ratio-with-css)）和 List Apart 文章（[http://alistapart.com/article/fluid-images](http://alistapart.com/article/fluid-images)）并将它们放在一起之前，我一直遇到困难。

如果你的标记是这样的......

```
<img src="myImg.jpg" /> 
```

...然后简单地说

```
img {
    width:100%
} 
```

应该足够了，因为大多数现代浏览器都意识到大多数人，如果可以选择，不想改变他们图像的方面。但是，如果您的标记包含维度属性，例如...

```
<img src="myImg.jpg" width="400" height="400" /> 
```

...这意味着更好的技术，然后标记将通过 CSS 发光，将图像保持在固定高度但灵活宽度（呃！）除非你用类似...的东西告诉它

```
img {
    width:100%;
    height:inherit;
} 
```

...或者...

```
img {
    width:100%;
    height:auto;
} 
```

两者似乎都起作用并迫使图像恢复正确的方面。

我自己刚刚偶然发现了这个问题（我的 WYSIWIG 编辑器默认为图像添加了暗淡 - 我需要一个简单的解决方案，或者我需要花费数小时破解 JCE 来阻止这种行为）并且尚未对其进行详尽的测试，但它应该给如果你和我有同样的问题，你是一个很好的起点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T22:58:57.623

我不知道是否有办法只用 CSS 来做到这一点。如果你想实现这样的 [目标，](http://jumpshipcontest.com/)那么你可以使用[supersized](https://github.com/buildinternet/supersized)

**或者**，如果您不关心旧浏览器，您可以查看 CSS3`background-size`属性。具体来说，我认为设置`background-size: cover`会解决问题。

**编辑**- 我误解了。您可能真正想要的是`background-size: contain`，但缺点是您可能必须更改您的 html 标记，而不仅仅是您的 css。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T23:39:44.053

我认为这篇[A List Apart](http://www.alistapart.com/articles/fluid-images/)文章可能对您有很大帮助，它讨论了适应其容器并保持纵横比的响应式图像。

本质上，您只需要包含`<img>`并指定该容器的尺寸，而不是应用于该容器`max-width:100%`，`<img>`它就会适应。阅读文章的其余部分以了解强制性的 IE 考虑事项（谢天谢地 IE7+ 支持它）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-18T14:54:18.643

仅设置宽度或高度并不总是有效，因此您也可以设置：

```
img {
  max-width: 100%;
  max-height: 100%;
} 
```

但

它不会将图像扩展到其原始大小

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T23:01:47.763

你不能那样做。您可以编辑图像元素的`width`和`height`属性...

```
<!-- keeps width-height ratio -->
<img src="smiley.gif" alt="Smiley face" height="50" /> 

<!-- keeps width-height ratio -->
<img src="smiley.gif" alt="Smiley face" width="50" />

<!-- does not keep width-height ratio, unless your image is square -->
<img src="smiley.gif" alt="Smiley face" height="50" width="50" /> 
```

您可以将`width`and设置`height`为像素或百分比。请注意，`px`使用像素时**不必**`%`写，但在使用百分比时必须写。所以你可以做类似的事情......

```
<img src="smiley.gif" alt="Smiley face" height="100%" width="100%" /> 
```

...**但这将占用父元素的宽度和高度的 100%**。因此，请确保您知道父元素是什么以及它的尺寸。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-03T07:03:58.910

2020 年对此进行了更新。css 属性`object-fit`可用于以 100% 的宽度和高度显示图像，而不会使图像失真。

```
.wrapper {
  height: 100px;
  width: 100px;
  border: 1px solid;
}

img {
  width: 100%;
  height: 100%;
}

.contain {
  object-fit: contain;
}

.cover {
  object-fit: cover;
}
```

```
<div class="wrapper">
  <img src="https://i.stack.imgur.com/6c39r.jpg" />
</div>
↑ default, bad aspect ratio

<div class="wrapper">
  <img src="https://i.stack.imgur.com/6c39r.jpg" class="contain" />
</div>
↑ <code>object-fit: contain;</code>

<div class="wrapper">
  <img src="https://i.stack.imgur.com/6c39r.jpg" class="cover" />
</div>
↑ <code>object-fit: cover;</code>
```

# c - C字符串函数工作，但在多次调用malloc后失败

> ID：10158024
> 
> 赞同：0
> 
> 时间：2012-04-14T22:55:17.397
> 
> 标签：c, string, memory-management, malloc

最终编辑：这原来是与字符串函数和 malloc 无关的堆栈溢出问题。GDB 输出说问题出在它的位置上方几行，这让我感到困惑，但是当我花时间在 Valgrind 中运行时，我就明白了。

我编写了一个双向广度优先搜索程序，用于在一个非常大的有向图（约 600 万个节点）中查找最短路径。使用 100 个节点的测试输入文件，一切正常。有了完整的输入，就会使用更多的内存，然后程序就会出现分段错误。

GDB 说它在搜索功能开始时出现段错误，当我在`n = sprintf(result, "");`. 这是相关的功能：

```
char *bidirbfs(int x, int y, char *result){
    int n;
    n = sprintf(result, "");
    ... 
```

这是对它的调用和`result`缓冲区的分配：

```
int main (){
    int n=0;
    char *result;
    result = (char *)malloc(sizeof(char)*2000);
    if(result == NULL){
        printf("MALLOC FAILED!"); exit(1);}

    //Methods for initializing graph
    readStructureFromFile(); 
    calcArticlesIn();

    //Search the graph
    result = bidirbfs(1,2, result);
    printf("%s\n", result);
    ...
} 
```

同样，只需少量输入，一切正常。当我使用全尺寸输入时，程序可以正常读取所有内容，但随后会出现段错误。当我改为使用非常相似的 strncpy 调用来清空数组时，我得到了相同的行为，所以这似乎是一个普遍的问题带字符串函数。我不确定会发生什么。

似乎 sprintf 不喜欢它得到的指针，这让我想知道 malloc 是否在做一些奇怪的事情。使用完整输入时，malloc 被调用了 1300 万次*，所以我想知道它是否会因此而表现出奇怪的行为，并用奇怪的东西覆盖字符串缓冲区。同时，我也很犹豫要怪图书馆。

任何想法可能会发生什么？

*可悲的是，我认为这实际上是必要的。图中的每个元素都有一个用于入站边和出站边的数组。在读取输入之前，每个数组的大小都是未知的，因此必须通过 malloc 将其动态分配到正确的大小。

编辑： Valgrind 返回以下内容。我正在努力弄清楚它可能意味着什么，但乍一看它实际上可能是某种堆栈溢出。

```
==27263== Warning: client switching stacks?  SP change: 0xbea50634 --> 0xbb815340
==27263==          to suppress, use: --max-stackframe=52671220 or greater
==27263== Invalid write of size 4
==27263==    at 0x8048D78: bidirbfs (load_data.c:184)
==27263==    by 0x80491CD: main (load_data.c:304)
==27263==  Address 0xbb815348 is on thread 1's stack
==27263== 
==27263== 
==27263== Process terminating with default action of signal 11 (SIGSEGV)
==27263==  Access not within mapped region at address 0xBB815348
==27263==    at 0x8048D78: bidirbfs (load_data.c:184)
==27263==  If you believe this happened as a result of a stack
==27263==  overflow in your program's main thread (unlikely but
==27263==  possible), you can try to increase the size of the
==27263==  main thread stack using the --main-stacksize= flag.
==27263==  The main thread stack size used in this run was 8388608.
==27263== 
==27263== Process terminating with default action of signal 11 (SIGSEGV)
==27263==  Access not within mapped region at address 0xBB81533C
==27263==    at 0x401F4DD: _vgnU_freeres (vg_preloaded.c:58)
==27263==  If you believe this happened as a result of a stack
==27263==  overflow in your program's main thread (unlikely but
==27263==  possible), you can try to increase the size of the
==27263==  main thread stack using the --main-stacksize= flag.
==27263==  The main thread stack size used in this run was 8388608.
==27263== 
==27263== HEAP SUMMARY:
==27263==     in use at exit: 1,021,539,288 bytes in 13,167,791 blocks
==27263==   total heap usage: 13,167,792 allocs, 1 frees, 1,047,874,864 bytes allocated
==27263== 
==27263== LEAK SUMMARY:
==27263==    definitely lost: 0 bytes in 0 blocks
==27263==    indirectly lost: 0 bytes in 0 blocks
==27263==      possibly lost: 0 bytes in 0 blocks
==27263==    still reachable: 1,021,539,288 bytes in 13,167,791 blocks
==27263==         suppressed: 0 bytes in 0 blocks
==27263== Rerun with --leak-check=full to see details of leaked memory
==27263== 
==27263== For counts of detected and suppressed errors, rerun with: -v
==27263== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 12 from 7) 
```

编辑 2：最终解决方案：这是堆栈溢出。在 sprintf 语句之后，我创建了一个数组，其大小与节点数成正比。因为我没有使用 malloc，所以它直接在堆栈上创建，溢出它。更改为使用 malloc 解决了问题，现在一切都按预期运行。感谢大家的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:32:13.410

这是一个猜测，但试试这个简单的改变：

在将内容写入`result`变量的地方，尝试使用

```
n = snprintf(result, 2000, "...", ...); 
```

其中 ... 代表您实际想要写入`result`字符串的内容。

如果你写到`result`'s 分配的末尾，效果将是不可预测的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:51:15.980

在 valgrind 中运行你的程序。看看它说什么。我打赌你会发现输出很有启发性。

# jquery - 出现错误：未捕获的类型错误：对象 .thumbnail 没有方法“悬停”

> ID：10158027
> 
> 赞同：1
> 
> 时间：2012-04-14T22:55:43.037
> 
> 标签：jquery

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        ('.thumbnail').hover(
            function () {
            $('.hovImage').css('display', 'block');
        }, function () {
            $('.hovImage').css('display', 'none');
        });
    });
</script> 
```

我收到错误“未捕获的类型错误：对象 .thumbnail 没有方法‘悬停’”。我无法弄清楚错误来自哪里。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:58:54.947

哦，有你的问题，这是一个语法错误，你错过了`$`：

```
||
VV
$('.thumbnail').hover() 
```

顺便说一句，你可以这样做：

```
$('.thumbnail').hover(
    function () {
    $('.hovImage').show();
}, function () {
    $('.hovImage').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:58:33.420

你在这里忘记了一个`$`：`('.thumbnail').hover(`

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('.thumbnail').hover(
            function () {
            $('.hovImage').css('display', 'block');
        }, function () {
            $('.hovImage').css('display', 'none');
        });
    });
</script> 
```

# javascript - 使用 JavaScript 和 Canvas 绘制形状

> ID：10158030
> 
> 赞同：1
> 
> 时间：2012-04-14T22:55:51.733
> 
> 标签：javascript, html, canvas, shapes

我正在尝试使用 HTML 5 画布和 JavaScript 生成和绘制形状。我试图让它尽可能干燥，但有一些问题。我的代码如下：

```
var sections = {
  "w_end" : {
    "name":"W End",
    "id":"w_end",
    "dimensions": {"move_to":[0,0], "coords":[[0,50], [50,50], [0,50]]}
  }
}
$(document).ready(function() {
  $.each(sections, function(k,v){
    make_shape(k, v);
  })
});

function make_shape(id, attributes) {
  var holder = document.getElementById('room');
  var grid_canvas = document.createElement("canvas");
  holder.appendChild(grid_canvas);
  grid_canvas.setAttribute("id", id);
  var item = grid_canvas.getContext("2d");
  item.fillStyle = "rgb(154,250,50)";
  item.beginPath();
  item.moveTo(attributes.dimensions.move_to[0],attributes.dimensions.move_to[1]);
  $.each(attributes.dimensions.coords, function(k ,v){
    item.lineTo(v[0],v[1]);
  });
  item.fill();
  item.closePath();
} 
```

`lineTo`从 json 中提取值时，这似乎不起作用。我可以在lopp内部切换`lineTo(v[0],v[1])`for ，它会生成一个填充的形状。`lineTo(50,75)`如您所知，我并不擅长 JavaScript。有谁知道这里的问题是什么，并可能就从某种列表生成多个形状提供一些建议？

干杯

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:32:53.557

我玩过你的代码，它完美无瑕。没有绘制三角形，因为不知何故，回到自身的路径什么也没有。只放置前两个顶点就可以了。

```
"dimensions": {"move_to":[0,0], "coords":[[0,50], [50,50]]} 
```

看到这个小提琴：http: [//jsfiddle.net/Nm7UQ/](http://jsfiddle.net/Nm7UQ/)

请注意，我注释掉了`document.ready`.

# objective-c - Objective-C 中的 eval

> ID：10158036
> 
> 赞同：1
> 
> 时间：2012-04-14T22:57:28.280
> 
> 标签：objective-c, dynamic, eval

> **可能重复：**
> [在 Objective-C 2.0 中是否有类似 Matlab 的 eval 语句的东西？](https://stackoverflow.com/questions/1116885/is-there-something-like-matlabs-eval-statement-in-objective-c-2-0)

Objective-C 中是否有 eval 函数（如 lisp、javascript、python、ruby ......）？

我所说的 eval 是一个函数，它可以将任意 Objective-C 代码（可能具有类定义、副作用、自省等）作为字符串（不是块或 NSInvocation 或 IMP 或类似的东西），并评估每个表达式，尊重当前运行时环境状态、副作用、类定义等。

如果没有，是否可以在现有运行时的范围内实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T23:12:29.270

无论是语言还是 Apple 的框架都没有直接支持这样的事情。[然而， LLVM](http://llvm.org/)的目标之一是成为一个可嵌入的编译器套件。我很确定它可以在内存中生成可执行代码。困难的部分是为该代码提供对调用代码的预先存在环境的访问权限。例如，编译引用局部变量或类似内容的代码。

（请注意，iOS App Store 禁止使用这种方法，但它可能在 Mac OS X 上可行。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:03:37.257

绝对不。Objective-C 是一种完全编译的语言。只有解释型语言才能做这种事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:04:50.850

不，代码评估是动态语言的功能。尽管 Objective-C 具有动态特性，甚至 Cocoa 运行时，但它仍然被认为是一种静态语言（通常）。

# c++ - 用于防止重复和语法错误问题的布尔数组？

> ID：10158037
> 
> 赞同：0
> 
> 时间：2012-04-14T22:57:42.007
> 
> 标签：c++, arrays, boolean, duplicates, playing-cards

如果验证为 1，如何生成新的随机数？

我可以再放一个“生成数字行”吗： `cardDrawn=(1+(rand()%52));`

```
#include <iostream>;
#include <cstdlib>;
#include <ctime>;
#include <cmath>;

using namespace std;

int main(){
int deck[52];
bool validate[52]={0};
int hand[5];
int cardDrawn;
int count=0;
int j=0;
bool repeat=0;
string cardNames[52]=   {"Ace of Clubs","2 of Clubs","3 of Clubs","4 of Clubs","5 of Clubs","6 of Clubs","7 of Clubs","8 of Clubs","9 of Clubs","10 of Clubs","Jack of Clubs","Queen of Clubs","King of Clubs",//CLUBS
                        "Ace of Spades","2 of Spades","3 of Spades","4 of Spades","5 of Spades","6 of Spades","7 of Spades","8 of Spades","9 of Spades","10 of Spades","Jack of Spades","Queen of Spades","King of Spades",//SPADES
                        "Ace of Hearts","2 of Hearts","3 of Hearts","4 of Hearts","5 of Hearts","6 of Hearts","7 of Hearts","8 of Hearts","9 of Hearts","10 of Hearts","Jack of Hearts","Queen of Hearts","King of Hearts",//HEARTS
                        "Ace of Diamonds","2 of Diamonds","3 of Diamonds","4 of Diamonds","5 of Diamonds","6 of Diamonds","7 of Diamonds","8 of Diamonds","9 of Diamonds","10 of Diamonds","Jack of Diamonds","Queen of Diamonds","King of Diamonds"//DIAMONDS
                        };//array to hold card abbreviations.

srand(time(0));
for (int i=0; i<52; i++){  // fills arrays with 1-52
deck[i]=i+1;};

cardDrawn=(1+(rand()%52));  //generates first card.
hand[0]=cardDrawn;
validate[cardDrawn]=1;
//cout << "Card 1: " << hand[0];

do{
    cardDrawn=(1+(rand()%52));
    if (validate[cardDrawn]==1)
        {
            //count doesn't update!  :D
        }
    else
        {
            hand[count]=cardDrawn;
            count++;
        }
     }while(count<4);

cout << "Card 1: " << cardNames[hand[0]];
cout << "\ncard 2: " << cardNames[hand[1]];
cout << "\ncard 3: " << cardNames[hand[2]];
cout << "\ncard 4: " << cardNames[hand[3]];
cout << "\ncard 5: " << cardNames[hand[4]];

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:18:34.707

使用一些 STL，您希望达到的效果要容易得多。您可以轻松地将其扩展到绘制的任意数量的牌（在同一副牌中），其复杂性与绘制第一张牌的复杂性相同。

事实上，我添加了 4 名玩家，每人手里有 5 张牌。缩小到只有一名玩家相当容易。我还简化了为每张卡添加名称的过程。

```
#include <algorithm> //random_shuffle
#include <cstdlib> //srand
#include <ctime> //time
#include <iostream> //cout
#include <string> //string
#include <vector> //vector

using namespace std;

int main()
{
    srand (time (NULL)); //so random_shuffle gives different values

    const vector<string> values = {"Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};
    const vector<string> suits = {"Clubs", "Spades", "Hearts", "Diamonds"};

    vector<string> cards; //for names of cards

    for (int suit = 0; suit < 4; ++suit)
    {
        for (int value = 0; value < 13; ++value)
        {
            cards.push_back (values [value] + " of " + suits [suit]); //combine suit and value
        }
    }

    vector<vector<string>> playerHands (4); //4 players' hands

    random_shuffle (cards.begin(), cards.end()); //shuffle cards

    for (auto &hand : playerHands) //for each hand
    {
        for (int card = 0; card < 5; ++card) //for 5 cards
        {
            hand.push_back (cards.back()); //add last card to hand
            cards.pop_back(); //remove last card from deck
        }
    }

    int playerCount = 1; //for player's number
    for (auto hand : playerHands) //for each hand
    {
        cout << "Player " << playerCount << ":\n"; //output player number

        int handCount = 1; //for card's number
        for (auto card : hand) //for each card in hand
        {
            cout << "Card " << handCount << ": " << card << '\n'; //output card
            ++handCount; //increase card number
        }

        ++playerCount; //increase player number
        cout << '\n'; //separate players
    }
} 
```

您也可以在每次牌组用完时生成牌名列表，或者只`cards`为每个牌组使用一个副本 ( `vector<string> currentDeck (cards);`)。

如果这根本无法编译，则需要 C++11 和适当的编译器选项。否则，`for (... : ...)`可以用 替换`std::for_each`，`auto`可以用类型替换，向量初始化器列表可以用不同的构造向量的方法替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:03:46.363

如果您在第二个 for 循环中为迭代变量使用不同的名称，那么`i2`您的问题可能会消失。

但我认为您拥有的代码应该在任何一组范围规则下都被接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:09:30.130

```
j=0;
do{
    cardDrawn = (1 + (rand() % 52));
    if (validate[cardDrawn] == 0)
    {
        hand[j] = cardDrawn;
        validate[cardDrawn] = 1;
        j++;
    }
}while (j<5); 
```

那可能会起作用

啊，我的坏..现在一定没问题

# python - python-读取文件名并建立一个名单

> ID：10158042
> 
> 赞同：1
> 
> 时间：2012-04-14T22:57:59.713
> 
> 标签：python

我想制作一个名单并将所有名称存储在四个文件夹中。我建立

```
namelist = {1:[], 2:[], 3:[], 4:[]} 
```

在方法中，我写

```
for file_name in sorted(os.listdir(full_subdir_name)):
    full_file_name = os.path.join(full_subdir_name,file_name)
    #namelist[level] += blabla... 
```

我想将第一个文件夹中的名称添加到 namelist[1]，从第二个文件夹添加到 namelist[2]。我不知道如何将不同级别的所有名称添加到其中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:25:58.490

我不完全确定这就是您对上述问题的理解。但似乎首先，您要使用`enumerate()`允许您保留四个文件夹的索引*和*名称。但是，我认为您实际上需要一个额外的 for 循环，根据您上面的评论，实际附加每个子文件夹中每个文件的所有内容。以下应该可以解决问题。

另请注意，您的字典键以 开头`1`，因此您需要考虑枚举索引以 0 开头的事实。

```
# Here, enumerate gives back the index and element.
for i,file_name in enumerate(sorted(os.listdir(full_subdir_name))):
    full_file_name = os.path.join(full_subdir_name,file_name)

    # Here, 'elem' will be the strings naming the actual
    # files inside of the folders.

    for elem in sorted(os.listdir(full_file_name)):
        # Here I am assuming you don't want to append the full path,
        # but you can easily change what to append by adding the
        # whole current file path: os.path.join(full_file_name, elem)

        namelist[i+1].append(elem) 
```

# jquery - 在 basicDay 视图中晚上 8 点后不显示 FullCalendar 事件

> ID：10158044
> 
> 赞同：0
> 
> 时间：2012-04-14T22:58:25.680
> 
> 标签：jquery, fullcalendar

我在使用 FullCalendar 时遇到了一件我无法弄清楚的奇怪事情。我不确定这是 FullCalendar 中的一个小问题还是我正在做的事情（可能是后者）。

在 basicDay 视图中，晚上 8:00 之后的事件未显示在我的日历上（即晚上 8:00-9:00 的事件）。如果我将活动开始时间设置为晚上 7:59，它将显示出来。我检查了我的时区，一切都设置为东部时间（纽约）。

另一个奇怪的部分是其他视图正确显示。Month 和 basicWeek 显示删除事件的情况很好，晚上 8:00 之后的任何事件都没有问题。

在此处查看页面（并查看所有代码）：http: [//www.clarksportscenter.com/calendar/](http://www.clarksportscenter.com/calendar/)。导航到的好日期是 4 月 16 日，然后查看深蓝色日期（Aquatics）。专门查找在晚上 8:00-9:00 发生的名为“Open Laps”的事件。它会默认显示在 basicWeek 中，您将能够看到它。如果单击将日历变为 basicDay 并前进到 4 月 16 日，则该事件将消失。有时，如果您逐日向后单击或单击月/周/日视图，则事件会显示，有时则不会。这是有问题的原因是我在主页（http://www.clarksportscenter.com）上也有日历，我不能让它在那里放置事件。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:01:15.980

我无法重现您的问题。

通过 fullcalendar 的基本设置，您的所有事件都显示正确，也没有指定时区：

```
jQuery('#calendar').fullCalendar({
/************** Config ***************/
header: {
    left: 'prev,next today',
    center: 'title',
    right: 'month,agendaWeek,agendaDay'
}
/************** Events ***************/
, eventSources: [
    { // gym
    url: "https://www.google.com/calendar/feeds/--YOUR_SWIM_EVENTS--group.calendar.google.com/public/basic"
    , className: "gym-event"
    // , currentTimezone: 'America/New_York'
    }
]
}); 
```

.... 以及您的活动截图： http: [//tinypic.com/r/lb1ia/5](http://tinypic.com/r/lb1ia/5)

也许更新到 fullcalendar 1.5.3 可以做到这一点？

# java - JSF、JBOSS 显示不正确

> ID：10158049
> 
> 赞同：1
> 
> 时间：2012-04-14T22:59:05.623
> 
> 标签：java, eclipse

我在 JBOSS 6、Eclipse、JSF MOJARRA 中遇到了这个奇怪的问题。

所以这是我的 index.xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
     >

    <!-- 
        Replace path to template, title, header and body
        with actual data.
     -->
    <h:head>
        <title>JSF 2.0 Hello World</title>
    </h:head>
    <h:body>
        <h3>JSF 2.0 Hello World Example - hello.xhtml</h3>
        <h:form>
           <h:inputText value="#{helloBean.name}"></h:inputText>
           <h:commandButton value="Welcome Me" action="welcome"></h:commandButton>
        </h:form>

    </h:body>

</html> 
```

在执行中，我只有页面的标题，没有输入文本，没有按钮。请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:22:05.417

看起来您的页面无法解析。你应该检查你的 faces-config.xml 是否有这行代码

```
 < view-handler>com.sun.facelets.FaceletViewHandler< /view-handler> 
```

（擦除空格）并且您的库必须具有 jsf-facelets.jar 。

# c# - 如何从 Form1 访问 Form3 中的文本框？

> ID：10158051
> 
> 赞同：1
> 
> 时间：2012-04-14T22:59:17.543
> 
> 标签：c#, .net, winforms, visual-studio-2010

在（Form1）我有一个设置按钮，当我点击它时，会显示一个新表单（Form2），使用这些代码行：

```
private void b7_Click(object sender, EventArgs e)
{
    Form3 frm = new Form3();
    frm.Show();

} 
```

在 form3 中，我有 6 个文本框和两个按钮，保存和取消。

![在此处输入图像描述](../Images/146d8974d3f447a1b954a405684e6c70.png)

我要做的是向用户提供此表单，以便他在表单中键入必要的数据，然后单击“保存设置”按钮。在 Form1 中，我想访问这些文本框以获取它们的当前值（当用户单击保存设置时）。我尝试添加一个 Form4 并将其命名为（MiddleForm），我添加了 6 个文本框，在 Form3（上图中的表单）中我写了这些行：

```
private void button2_Click(object sender, EventArgs e)
{
    MiddleForm mf = new MiddleForm();
    mf.textBox1.Text = keywrd1.Text;
    mf.textBox2.Text = keywrd2.Text;
    mf.textBox3.Text = keywrd3.Text;
    mf.textBox4.Text = keywrd4.Text;
    mf.textBox5.Text = keywrd5.Text;

    mf.textBox1.Text = thelink.Text;

    Close();

} 
```

然后我尝试访问从 Form1 传递给 MiddleForm 的值（我需要使用文本框值的表单），在 Form1 中，我写了这些行（仅用于调试目的）

```
MiddleForm mf = new MiddleForm();

MessageBox.Show(mf.textBox1.Text); // to see whether there is something 
```

不幸的是，似乎没有任何东西传递给 mf.TextBox1

![在此处输入图像描述](../Images/68e975e1cb1973beea5ed858bb5add6c.png)

我如何从 Form1 调用 Form3 的当前值（使用保存设置按钮保存）以便在其余代码中使用它们。

有什么帮助请让这个工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T23:06:19.290

在 Form3 中创建 6 个公共属性，如下所示：

```
public partial class Form3 : Form
{
    public string Value1
    {
        get { return this.keywrd1.Text; }
    }

    public string Value2
    {
        get { return this.keywrd2.Text; }
    }

    ...
} 
```

在 Form3 关闭后（但在处置之前），您可以通过属性访问文本值。正如另一个答案中所指出的，使用 ShowDialog 而不是 Show 并在其自己的代码中关闭 Form3 。

```
private void b7_Click(object sender, EventArgs e)
{
    Form3 frm = new Form3();
    frm.ShowDialog();
    string value1 = frm.Value1;
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T23:40:26.580

您可以尝试使用[`ShowDialog`](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)它将创建您`Form`的模型对话框，然后您可以检查[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.dialogresult.aspx)以了解数据是否已保存或`Form`已取消。

IE

```
private void button2_Click(object sender, EventArgs e)
{
    Form3 frm = new Form3();
    if (frm.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        savedSettings = frm.getTextBoxValues();
    }
} 
```

**表格3**

```
public partial class Form3 : Form
{
    string[] textValues = new string[6];

    public Form3()
    {
        InitializeComponent();
    }
    public string[] getTextBoxValues()
    {
        return textValues;
    }

    private void saveSettings_Click(object sender, EventArgs e)
    {
        DialogResult = System.Windows.Forms.DialogResult.OK;
        textValues[0] = textBox1.Text;
        textValues[1] = textBox2.Text;
        textValues[2] = textBox3.Text;
        textValues[3] = textBox4.Text;
        textValues[4] = textBox5.Text;
        textValues[5] = textBox6.Text;
        this.Close();
    }

    private void cancelSettings_Click(object sender, EventArgs e)
    {
        DialogResult = System.Windows.Forms.DialogResult.Cancel;
        this.Close();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T23:52:04.123

`Form3`像这样制作公共属性

```
public string[] Keys
{
    get
    {
        return new string[] { tbKey1.Text, tbKey2.Text, tbKey3.Text,
                              tbKey4.Text, tbKey5.Text};
    }
}

public string Link { get { return tbLink.Text; } } 
```

您`Form1`可以像这样访问这些属性

```
Form3 frm = new Form3();
if (frm.ShowDialog() == DialogResult.OK) {
    string[] keys = frm.Keys; 
    string link = frm.Link; 
} 
```

注意：使用`ShowDialog`and not很重要`Show`，因为`Show`不会等待其他表单关闭。此外，当点击“保存设置”时`Form3`，设置对话框结果

```
DialogResult = DialogResult.OK;
Close(); 
```

这样您就可以`Form1`如上所示将其签入。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-14T23:07:35.400

您应该创建一个公共字段，以提供您希望从表单中获取的值。如果你去 Form1 的源代码，你应该添加这样的东西：

```
public string TextValue1 {
    get {return TextBox1.Text;}
} 
```

现在，您可以使用 Form1.TextBox1 从您的文本框中检索字符串值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-14T23:05:44.997

你需要这样做：

```
var form = Form.ActiveForm as Form3;
String myText = form.txtBoxName.Text; 
```

# java - 将连接从 JDBC 返回到 Java 的主要方法？

> ID：10158053
> 
> 赞同：0
> 
> 时间：2012-04-14T22:59:21.293
> 
> 标签：java, swt

是否可以返回类型连接？并将其用作通过引用传递整个程序的方法？我发现如果将其作为方法传递，它会使数据库交互变得容易得多。

```
public static Connection database(String database, String username, String password) {
        String url = "jdbc:postgresql:" + database;

        //LOAD DRIVER
        try {
            Class.forName("org.postgresql.Driver");
        } 
        catch (ClassNotFoundException e) {
            e.printStackTrace();
        }           

        //CONNECT TO DATABASE
        try {
            Connection conn = DriverManager.getConnection(url, username, password);
            return conn;
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;            
}

public static void main(String[] args) {

    db = database("java_jdbc", "admin", "fake_password_1234");      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:05:54.657

你可以这样做。

只需记住在完成后调用`close()`连接以释放其资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T16:49:19.103

```
package mySystem;

import java.sql.*;
import javax.swing.*;

public class MySqlConnector {

    Connection conn = null;

    public static Connection ConnectDB() {

        try {
            Class.forName("com.mysql.jdbc.Driver"); //register jdbc driver
            Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/inventory_db", "root", "");
            // JOptionPane.showMessageDialog(null, "Connected to db");
            return conn;

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
            return null;
        }

    }

} 
```

# objective-c - 如何使用原型单元格在第一行上方添加标题？

> ID：10158054
> 
> 赞同：2
> 
> 时间：2012-04-14T22:59:21.777
> 
> 标签：objective-c, xcode4

我有一个使用 UITableViewController 中的原型单元格的 iPhone 应用程序。我想在第一行的正上方放置一个标题（上面写着 Prototype Cells）。我该怎么做呢？（忽略第一行的内容......这就是我想要标题所说的）

![在此处输入图像描述](../Images/8f4e04b833dba080591c253efd72e9da.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T23:18:47.757

由于您想使用动态原型单元，而不是静态单元，因此最好在代码中执行此操作。覆盖方法

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section; 
```

在您的表格视图控制器中并返回您想要的每个部分的标题。如果你只打算有一个部分，那么它就像

```
return NSLocalizedString(@"Title for Section", @""); 
```

但是，如果你只有一个部分，那么标记它可能是糟糕的 UI 设计，这取决于你在做什么......

# jquery - 从 1.3.2 升级到 1.7.1 后损坏的 Jquery 代码

> ID：10158056
> 
> 赞同：0
> 
> 时间：2012-04-14T22:59:51.373
> 
> 标签：jquery

我有一段代码在 1.3.2 中工作得很好，但在 1.7.1 中被破坏了，任何人都可以指出如果代码不正确怎么办：

```
(function($){
$.fn.extend({ 
    autoscroll: function(options) {
        return this.each(function() {
            var $this = $(this);
            $this.css({overflow:'hidden'});
            if(options == 'horizontal') $this.mousemove(function(e) {
                var width = $this.width();
                $this.attr({ scrollLeft: ($this.attr('scrollWidth')-width)*(0.5-Math.cos(Math.PI*(e.pageX-$this.offset().left)/width)/2) });
            });
            else if(options == 'vertical') $this.mousemove(function(e) {
                var height = $this.height();
                $this.attr({ scrollTop: ($this.attr('scrollHeight')-height)*(0.5-Math.cos(Math.PI*(e.pageY-$this.offset().top)/height)/2) });
            });
            else if(options == 'both') $this.mousemove(function(e) {
                var width = $this.width(), height = $this.height();
                $this.attr({ scrollLeft: ($this.attr('scrollWidth')-width)*(0.5-Math.cos(Math.PI*(e.pageX-$this.offset().left)/width)/2), scrollTop: ($this.attr('scrollHeight')-height)*(0.5-Math.cos(Math.PI*(e.pageY-$this.offset().top)/height)/2) });
            });
            else $this.mousemove(function(e) {
                var width = $this.width(), height = $this.height();
                $this.attr({ scrollLeft: ($this.attr('scrollWidth')-width)*(0.5-Math.cos(Math.PI*(e.pageX-$this.offset().left)/width)/2), scrollTop: ($this.attr('scrollHeight')-height)*(0.5-Math.cos(Math.PI*(e.pageY-$this.offset().top)/height)/2) });
            });
        });
    }
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:06:45.567

仅用于`attr()`HTML 属性。对于 JS/DOM 属性（例如 scrollWidth、scrollTop）使用[`prop()`](http://api.jquery.com/prop/)

`prop()`已在 v1.6 中引入。

演示：http: [**//jsfiddle.net/doktormolle/uKMWQ/**](http://jsfiddle.net/doktormolle/uKMWQ/)

# ios - 以编程方式将 UIBarButtonItem 添加到 UITabBarController 内的所有导航视图控制器

> ID：10158059
> 
> 赞同：2
> 
> 时间：2012-04-14T23:00:05.123
> 
> 标签：ios

结构如下：

*   看法
*   标签栏控制器
    *   导航控制器
        *   视图控制器
    *   导航控制器
        *   视图控制器
    *   导航控制器
        *   视图控制器
    *   导航控制器
        *   视图控制器
    *   导航控制器
        *   视图控制器
    *   导航控制器
        *   视图控制器

上述控制器已在界面生成器中初始化。

我想要做的是`UIBarButtonItem`为每个导航控制器添加一个权限，但没有任何成功。

这是我尝试过的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor clearColor];
    self.view.opaque = NO;
    self.tabBarController.view.frame = self.view.bounds;

    NSArray *currentViewControllers = self.tabBarController.viewControllers;
    NSMutableArray *updatedViewControllers = [NSMutableArray array];

    for (int i=0; i<currentViewControllers.count; i++) {
        UINavigationController *tempNav = [[UINavigationController alloc]init];
        tempNav = [currentViewControllers objectAtIndex:i];
        UIBarButtonItem *dismissButton = [[UIBarButtonItem alloc] 
                                          initWithTitle:@"Done"                                            
                                          style:UIBarButtonItemStyleBordered 
                                          target:self 
                                          action:@selector(dismissLibraryBrowser)];
        tempNav.navigationItem.rightBarButtonItem = dismissButton;
        [updatedViewControllers addObject:tempNav];
        [dismissButton release];
        [tempNav release];

        NSLog(@"Added controller number %d",i);
    }

    self.tabBarController.viewControllers = [NSArray arrayWithArray:updatedViewControllers];

    [self.view addSubview:tabBarController.view];
} 
```

代码执行没有任何错误，但没有出现按钮。我确定我在这里误解了一些东西。希望得到一些指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:51:50.250

重新创建 viewControllers 和临时数组会使事情稍微复杂化。您只需要操作从笔尖加载的对象

```
[self.tabBarController.viewControllers enumerateObjectsUsingBlock:^(UINavigationController *navigationController, NSUInteger idx, BOOL *stop) {

    UIViewController *rootViewController = [navigationController.viewControllers objectAtIndex:0];

    UIBarButtonItem *rightBarButtonItem  = 
      [[UIBarButtonItem alloc] initWithTitle:@"Done"                                            
                                       style:UIBarButtonItemStyleBordered 
                                      target:self 
                                      action:@selector(dismissLibraryBrowser)];

    rootViewController.navigationItem.rightBarButtonItem = rightBarButtonItem;

 }]; 
```

* * *

至于你的应用程序的结构 - [UITabBarController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)的文档说

> 部署选项卡栏界面时，您必须将此视图安装为窗口的根目录。与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。

所以我建议看看重组一些东西，如果你只是偶尔需要它，为什么不考虑以模态方式展示它呢？

# python - 如何用熊猫创建高低开收盘图表

> ID：10158060
> 
> 赞同：3
> 
> 时间：2012-04-14T23:00:05.740
> 
> 标签：python, pandas

我有一个数据集，如下所示，我可以从文件流式传输到 python。我想使用 pandas 为每分钟创建一个 HLOC 数据图表，使用 asof 方法从时间零开始为 9:46....我还想知道如何将数据流式传输到 pandas 数据帧作为更新。这可能吗？

```
2012-03-15 09:45:00  139.8000
2012-03-15 09:45:11  139.7900
2012-03-15 09:45:22  139.7850
2012-03-15 09:45:33  139.8100
2012-03-15 09:45:44  139.8000
2012-03-15 09:45:55  139.8000
2012-03-15 09:46:06  139.8100
2012-03-15 09:46:16  139.8500
2012-03-15 09:46:27  139.8400
2012-03-15 09:46:38  139.8300
2012-03-15 09:46:49  139.8000
2012-03-15 09:46:59  139.8200
2012-03-15 09:47:10  139.8200
2012-03-15 09:47:21  139.8500
2012-03-15 09:47:32  139.8600
2012-03-15 09:47:42  139.8680
2012-03-15 09:47:53  139.8600
2012-03-15 09:48:04  139.8620
2012-03-15 09:48:15  139.8500
2012-03-15 09:48:25  139.8600
2012-03-15 09:48:36  139.8400
2012-03-15 09:48:47  139.8197
2012-03-15 09:48:58  139.8200
2012-03-15 09:49:08  139.8000
2012-03-15 09:49:19  139.8300
2012-03-15 09:49:30  139.8199
2012-03-15 09:49:41  139.8300
2012-03-15 09:49:52  139.8600
2012-03-15 09:50:02  139.8600
2012-03-15 09:50:13  139.8800
2012-03-15 09:50:24  139.9000
2012-03-15 09:50:35  139.9200
2012-03-15 09:50:45  139.9300
2012-03-15 09:50:56  139.9300
2012-03-15 09:51:07  139.9290
2012-03-15 09:51:18  139.9100
2012-03-15 09:51:28  139.9200
2012-03-15 09:51:39  139.9200
2012-03-15 09:51:50  139.9370
2012-03-15 09:52:01  139.9386
2012-03-15 09:52:11  139.9400
2012-03-15 09:52:22  139.9590
2012-03-15 09:52:33  139.9650
2012-03-15 09:52:44  139.9600
2012-03-15 09:52:54  139.9800
2012-03-15 09:53:05  139.9900
2012-03-15 09:53:16  139.9800
2012-03-15 09:53:27  139.9800
2012-03-15 09:53:37  139.9700
2012-03-15 09:53:48  139.9900
2012-03-15 09:53:59  139.9884
2012-03-15 09:54:10  139.9900
2012-03-15 09:54:20  139.9900
2012-03-15 09:54:31  140.0100
2012-03-15 09:54:42  140.0000
2012-03-15 09:54:53  139.9850
2012-03-15 09:55:03  139.9900
2012-03-15 09:55:14  140.0000
2012-03-15 09:55:25  140.0090
2012-03-15 09:55:36  140.0000
2012-03-15 09:55:47  139.9890
2012-03-15 09:55:57  139.9900
2012-03-15 09:56:08  139.9900
2012-03-15 09:56:19  140.0000
2012-03-15 09:56:30  140.0400
2012-03-15 09:56:40  140.0200
2012-03-15 09:56:51  140.0200
2012-03-15 09:57:02  140.0300
2012-03-15 09:57:13  140.0400
2012-03-15 09:57:23  140.0390
2012-03-15 09:57:34  140.0300
2012-03-15 09:57:45  140.0200
2012-03-15 09:57:56  140.0200
2012-03-15 09:58:06  140.0400
2012-03-15 09:58:17  140.0300
2012-03-15 09:58:28  140.0400
2012-03-15 09:58:39  140.0300
2012-03-15 09:58:49  140.0300
2012-03-15 09:59:00  140.0500
2012-03-15 09:59:11  140.0400
2012-03-15 09:59:22  140.0200
2012-03-15 09:59:32  140.0300
2012-03-15 09:59:43  140.0300
2012-03-15 09:59:54  140.0200
2012-03-15 10:00:05  140.0100
2012-03-15 10:00:15  140.0100
2012-03-15 10:00:26  140.0700
2012-03-15 10:00:37  140.0900
2012-03-15 10:00:48  140.0899
2012-03-15 10:00:58  140.0700
2012-03-15 10:01:09  140.0800
2012-03-15 10:01:20  140.0300
2012-03-15 10:01:31  140.0200
2012-03-15 10:01:41  140.0100
2012-03-15 10:01:52  139.9800
2012-03-15 10:02:03  139.9300
2012-03-15 10:02:14  139.9900
2012-03-15 10:02:25  140.0200
2012-03-15 10:02:35  140.0000
2012-03-15 10:02:46  139.9700
2012-03-15 10:02:57  139.9300
2012-03-15 10:03:08  139.9300
2012-03-15 10:03:18  139.9200
2012-03-15 10:03:29  139.9700
2012-03-15 10:03:40  139.9700
2012-03-15 10:03:51  139.9600
2012-03-15 10:04:01  139.9700
2012-03-15 10:04:12  139.9200
2012-03-15 10:04:23  139.9100
2012-03-15 10:04:34  139.9200
2012-03-15 10:04:44  139.9100
2012-03-15 10:04:55  139.9100
2012-03-15 10:05:06  139.8900
2012-03-15 10:05:17  139.9000
2012-03-15 10:05:27  139.9900
2012-03-15 10:05:38  139.9700
2012-03-15 10:05:49  139.9521
2012-03-15 10:06:00  139.9700
2012-03-15 10:06:10  139.9800
2012-03-15 10:06:21  140.0200
2012-03-15 10:06:32  140.0400
2012-03-15 10:06:43  140.0400
2012-03-15 10:06:53  140.0300
2012-03-15 10:07:04  140.0400
2012-03-15 10:07:15  139.9893
2012-03-15 10:07:26  140.0100
2012-03-15 10:07:36  140.0100
2012-03-15 10:07:47  140.0010
2012-03-15 10:07:58  139.9900
2012-03-15 10:08:09  140.0100
2012-03-15 10:08:19  139.9800
2012-03-15 10:08:30  139.9899
2012-03-15 10:08:41  140.0000
2012-03-15 10:08:52  140.0000
2012-03-15 10:09:03  139.9710
2012-03-15 10:09:13  139.9710
2012-03-15 10:09:24  139.9700
2012-03-15 10:09:35  139.9700
2012-03-15 10:09:46  139.9700
2012-03-15 10:09:56  139.9614
2012-03-15 10:10:07  139.9700
2012-03-15 10:10:18  139.9400
2012-03-15 10:10:29  139.9100
2012-03-15 10:10:39  139.9300
2012-03-15 10:10:50  139.9400
2012-03-15 10:11:01  139.9800
2012-03-15 10:11:12  140.0000
2012-03-15 10:11:22  139.9700
2012-03-15 10:11:33  139.9400
2012-03-15 10:11:44  139.8900
2012-03-15 10:11:55  139.8800
2012-03-15 10:12:05  139.9000
2012-03-15 10:12:16  139.9100
2012-03-15 10:12:27  139.9100
2012-03-15 10:12:38  139.9000
2012-03-15 10:12:48  139.9300
2012-03-15 10:12:59  139.9200
2012-03-15 10:13:10  139.9300
2012-03-15 10:13:21  139.9500
2012-03-15 10:13:31  139.9500
2012-03-15 10:13:42  139.9700
2012-03-15 10:13:53  139.9600
2012-03-15 10:14:04  139.9700
2012-03-15 10:14:14  139.9400
2012-03-15 10:14:25  140.0300 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:39:08.397

在即将发布的 pandas 0.8.0 版本中（当前在 git master 中可用，请报告任何错误），您可以：

```
In [52]: ts.resample('T', how='ohlc')
Out[52]: 
                         open       low     high     close
2012-03-15 09:45:00  139.8000  139.8000  139.800  139.8000
2012-03-15 09:46:00  139.7900  139.7850  139.810  139.8000
2012-03-15 09:47:00  139.8100  139.8000  139.850  139.8200
2012-03-15 09:48:00  139.8200  139.8200  139.868  139.8600
2012-03-15 09:49:00  139.8620  139.8197  139.862  139.8200
2012-03-15 09:50:00  139.8000  139.8000  139.860  139.8600
2012-03-15 09:51:00  139.8600  139.8600  139.930  139.9300
2012-03-15 09:52:00  139.9290  139.9100  139.937  139.9370
2012-03-15 09:53:00  139.9386  139.9386  139.980  139.9800
2012-03-15 09:54:00  139.9900  139.9700  139.990  139.9884
2012-03-15 09:55:00  139.9900  139.9850  140.010  139.9850
2012-03-15 09:56:00  139.9900  139.9890  140.009  139.9900
2012-03-15 09:57:00  139.9900  139.9900  140.040  140.0200
2012-03-15 09:58:00  140.0300  140.0200  140.040  140.0200
2012-03-15 09:59:00  140.0400  140.0300  140.050  140.0500
2012-03-15 10:00:00  140.0400  140.0200  140.040  140.0200
2012-03-15 10:01:00  140.0100  140.0100  140.090  140.0700
2012-03-15 10:02:00  140.0800  139.9800  140.080  139.9800
2012-03-15 10:03:00  139.9300  139.9300  140.020  139.9300
2012-03-15 10:04:00  139.9300  139.9200  139.970  139.9600
2012-03-15 10:05:00  139.9700  139.9100  139.970  139.9100
2012-03-15 10:06:00  139.8900  139.8900  139.990  139.9700
2012-03-15 10:07:00  139.9800  139.9800  140.040  140.0300
2012-03-15 10:08:00  140.0400  139.9893  140.040  139.9900
2012-03-15 10:09:00  140.0100  139.9800  140.010  140.0000
2012-03-15 10:10:00  139.9710  139.9614  139.971  139.9614
2012-03-15 10:11:00  139.9700  139.9100  139.970  139.9400
2012-03-15 10:12:00  139.9800  139.8800  140.000  139.8800
2012-03-15 10:13:00  139.9000  139.9000  139.930  139.9200
2012-03-15 10:14:00  139.9300  139.9300  139.970  139.9600
2012-03-15 10:15:00  139.9700  139.9400  140.030  140.0300 
```

对于 OHLC 图，请看这里： http: [//matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html](http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html)。我计划最终在 pandas 中为此添加一个不错的方法。

# php - cakePHP 中的查看函数不能使用 $id 以外的变量

> ID：10158064
> 
> 赞同：0
> 
> 时间：2012-04-14T23:01:30.203
> 
> 标签：php, cakephp, cakephp-2.0

我正在尝试为我的“文本”控制器中的视图函数传递 $id 以外的变量：

```
public function view($postid = NULL) {
        $this->Text->postid = $postid;
        $this->set('text', $this->Text->read());
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:14:17.387

你在那里做什么？您可以将只读与主键一起使用 - 通常是 id

```
$this->Text->id = $postid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:53:16.200

您的模型的`$primaryKey`属性是否设置为？如果没有，那么就不会像你想要的那样工作。在中，将其添加到您的课程中：`Text``'postid'``$this->Text->read()``app/Model/Text.php`

```
public $primaryKey = 'postid'; 
```

如果您不想更改主键（但您可能应该更改它），也可以执行以下操作：

```
$text = $this->Text->find('first', array(
    'conditions' => array('postid' => $postid),
));
$this->set('text', $text); 
```

另外，尝试在视图中添加类似这样的内容，以查看变量中的实际内容：

```
<pre><?php var_dump($text); ?></pre> 
```

这可能会让你更好地了解正在发生的事情。

最后，这里有一些相关文档：

*   [模型属性](http://book.cakephp.org/2.0/en/models/model-attributes.html)
*   [检索您的数据](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:57:48.677

弄清楚了：

```
public function view($postid = NULL) { 
$post = $this->Text->find('first', array('conditions' => 
                                          array('Text.postid'=>$postid))); 
$this->set('text', $post); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T05:16:39.527

您可以将视图功能自定义为：

```
public function view($name = NULL) {
    $record = $this->Text->findByName($name);        
    $this->set('text', $record);
} 
```

这`name`是一个字符串。该`name`字段应存在于数据库中。通过debugging.debug($record)可以看到$record的内容。

# ruby - 声明式授权 - 如何为控制器中的所有操作设置访问权限？

> ID：10158067
> 
> 赞同：0
> 
> 时间：2012-04-14T23:01:51.497
> 
> 标签：ruby, ruby-on-rails-3, authorization, declarative-authorization

我使用**声明式授权**gem，在我的**authorization_rules.rb**中我有以下规则：

```
 role :admin do
    has_permission_on :users, :to => [manually set up all actions in this controller]
  end 
```

是否存在更优雅的方式来设置相应控制器中所有操作的访问权限？我尝试了这些方法

> ```
>  role :admin do
>     has_permission_on :users, :to => :all
>   end
> 
>   role :admin do
>     has_permission_on :users
>   end 
> ```

但没有什么对我有用。有没有比盲目地输入每一个动作更好的方法来设置控制器中的所有动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T08:39:44.443

这就是我所做的：

```
has_permission_on :controller, :to => [:all] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T20:00:52.377

动作是控制器类的公共方法。下面的代码未经测试，但应该可以帮助您入门。

```
c = MyController
actions = []
c.public_methods(false).each { |m| actions << m.to_sym }

role :admin do
  has_permission_on :users, :to => actions
end 
```

# c - 无法处理 ANSI C 中的字符串复制

> ID：10158068
> 
> 赞同：1
> 
> 时间：2012-04-14T23:01:51.293
> 
> 标签：c

我用 ANSI C 编写了一个程序来删除字符串前面和结尾的双引号，所以`"Hello, world"`会变成`Hello, world`：

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* removeQuotes(char str[]) {
    int i = 1;
    int len = strlen(str) - 2;
    char * tmp = (char*) malloc (sizeof(char) * len);
    for (;i<=len;++i ) {
        tmp[i-1] = str[i];
    }
    return tmp;
}

int main(void) {
    char str[] = "Hello, world";
    char * abc = removeQuotes(str);
    printf("Inside the quotes is: %s length: %d\n"
            "Original is: %s length: %d", abc, strlen(abc), str, strlen(str));
    return 0;
} 
```

在 IDEOne (http://ideone.com/Iybuk) 我得到了正确的答案。但是 GCC 给了我一些奇怪的东西：

```
U→┬↓ length: 22es is: ello, worlESSOR_↑
Original is: Hello, world length: 12 
```

仅当字符串包含空格时才会发生。它适用于“Helloworld”或类似的东西。有什么可靠的方法让它正常工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T23:06:56.790

*   您没有为空终止符分配足够的空间。

*   您不会将空终止符添加到结果的末尾。

*   您的源字符串实际上不包含引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:07:50.423

在 C 中，字符串以空字符结尾，这意味着`'\0'`.

您没有在 中终止字符串`removeQuotes()`，这是正确的版本：

```
char* removeQuotes(char str[]) {
    int i = 1;
    int len = strlen(str) - 2;
    char * tmp = (char*) malloc (sizeof(char) * (len + 1));
    for (;i<=len;++i ) {
        tmp[i-1] = str[i];
    }
    tmp[len] = '\0';
    return tmp;
} 
```

此外，您的字符串实际上不包含引号，并且您不检查您传递的字符串是否`removeQuotes`包含任何引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:08:06.687

在临时字符串中保留一个 '\0'。否则它不会知道它是一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T23:05:25.593

在您的`removeQuotes`函数中，您为结果字符串分配了内存不足，并在缓冲区中写入了一个额外的字符。

该字符串`"Hello world"`实际上不包含任何引号。您必须将其声明为`"\"Hello world\""`您想到的字符串。在任何情况下，由于您的引号删除产生的字符串与输入的字符数相同。你丢失了第一个字符，因为你从不复制它，最后一个字符被写入缓冲区（它会写在那里，破坏内存，即使它是一个引号。

为什么你仍然需要这样做？您是否相信 C 字符串是在字符数组的第一个和最后一个位置使用引号字符创建的？

# xcode - 在 ScrollView 中嵌入 NSOpenGlViews 不会产生预期的滚动行为

> ID：10158077
> 
> 赞同：2
> 
> 时间：2012-04-14T23:03:31.833
> 
> 标签：xcode, cocoa, opengl, nsscrollview, nsopengl

我在滚动视图中嵌入了三个 NSOpenGLView。滚动会产生意外行为。NSOpenGLViews 拒绝被滚动视图的底部剪裁，而是在滚动视图的底部被调整为更小的长度。在某些情况下，NSOpenGlViews 会开始重叠。

# celery - 芹菜延迟的阻塞版本？

> ID：10158084
> 
> 赞同：2
> 
> 时间：2012-04-14T23:04:35.750
> 
> 标签：celery, django-celery

我知道这违背了使用 Celery 的全部目的，但是是否有一个函数会阻塞直到结果返回？

因此，我可以调用这将阻塞并返回结果，而不是`MyTask.delay(some_arg="foo")`我必须四处走动并获取结果吗？`actual_result = MyTask.dont_delay(some_arg="foo")`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T14:48:20.363

AsyncResult.get 阻塞，直到任务准备好，并返回其结果：

[http://ask.github.com/celery/reference/celery.result.html#celery.result.AsyncResult.get](http://ask.github.com/celery/reference/celery.result.html#celery.result.AsyncResult.get)

```
result = MyTask.delay(some_arg="foo")
result.get() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:28:10.863

MyTask.apply 将按照您的要求进行操作。

# c++ - C++ std::iterator 内部不使用 std::vector 或 std::list

> ID：10158085
> 
> 赞同：3
> 
> 时间：2012-04-14T23:04:38.227
> 
> 标签：c++, stl, iterator

我正在尝试（作为练习）在 C++ 中创建一个简单的数值范围类。它将让您遍历均匀间隔的双精度数（如 numpy/Python `arange`）：

**我想做的（但使用迭代器）：**

```
double lower = ..., upper = ..., delta = ...;
for (double val = lower; val < upper; val += delta)
{
   // do something with val
   f(val);
}
// include the last val to guarantee upper is included or exceeded
f(val); // do something with val 
```

**所需的等效迭代器代码：**

```
double lower = ..., upper = ..., delta = ...;
NumericRange nr(lower, upper, delta);
for (NumericRange::const_iterator iter = nr.begin(); iter != nr.end(); iter++)
{
    f(*iter);
} 
```

我希望我的迭代器与 STL 迭代器兼容，这样我就可以重用代码（通过 NumericRange 进行迭代应该等同于通过 std::vector 进行迭代）。

我已经成功地将值存储在 std::vector 中（然后使用 std::vector 的迭代器）。这就是我在网上找到的所有东西都解决了这个问题的方法。但是，实际上没有必要存储整个列表。

**有没有办法避免存储整个值集？是否有一些`iterable`类我可以继承和覆盖`++`,`==`等以获得所需的效果而不存储`std::vector<double>`?**

（我真的很想知道如何在没有 BOOST 的情况下做到这一点，即使它很棒。我问这个是因为我想学习如何（从头开始）*编写*类似 BOOST 解决方案的东西。我绝对知道那部分软件工程的人正在使用其他人创建的工具，但我真的很想了解这些工具是如何设计和构建的。）

**我的可迭代 NumericRange 类（`std::vector<double>`内部使用）：**

```
class NumericRange
{
protected:
  double lower, upper, delta;
  std::vector<double> sorted_range;
public:
  typedef std::vector<double>::const_iterator const_iterator;
  NumericRange()
  {
    lower = upper = delta = std::numeric_limits<double>::quiet_NaN();
    // vector is constructed empty
  }
  NumericRange(double lower_param, double upper_param, double delta_param)
  {
    lower = lower_param;

    upper = upper_param;
    delta = delta_param;
    assert(upper_param > lower_param);

    double val;
    // note: can be much faster without push_back
    for (val = lower_param; val < upper_param; val += delta_param)
      {
    sorted_range.push_back(val);
      }
    // ensure the upper_value is contained or surpassed
    sorted_range.push_back(val);
  }
  // to prevent comparison of the entire vector
  bool operator ==(const NumericRange & rhs) const
  {
    return lower == rhs.lower && upper == rhs.upper && delta == rhs.delta;
  }
  // note: this class doesn't really need to store the values in a
  // vector, but it makes the iterator interface much easier.
  const_iterator begin() const
  {
    return sorted_range.begin();
  }
  const_iterator end() const
  {
    return sorted_range.end();
  }
  double get_lower() const
  {
    return lower;
  }
  double get_upper() const
  {
    return upper;
  }
  double get_delta() const
  {
    return delta;
  }
  size_t size() const
  {
    return sorted_range.size();
  }
  void print() const
  {
    std::cout << "[ " << lower << " : " << upper << ": +=" << delta << " ]" << std::endl;
  }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T23:37:02.360

> 是否有一些可迭代的类我可以继承和覆盖`++`,`==`等以获得所需的效果而不存储`std::vector<double>`?

就在这里。它的名字是`std::iterator<std::input_iterator_tag, double>`。

这是您的开始，使用`int`. 为了节省大脑空间，我使用同一个类来表示范围和迭代器。

```
#include <iterator>
#include <iostream>

struct NumericRange : public std::iterator< std::input_iterator_tag, int >
{
  int current, fini, delta;
  typedef NumericRange iterator;
  typedef iterator const_iterator;
  iterator begin() { return *this; }
  iterator end() { return iterator(fini, fini, delta); }
  iterator& operator++() { current += delta; return *this; }
  iterator operator++(int) { iterator result(*this); ++*this; return result; }
  int operator*() const { return current; }
  NumericRange(int start, int fini, int delta) 
    : current(start), fini(fini), delta(delta)
  {
  }
  bool operator==(const iterator& rhs) {
    return rhs.current == current;
  }
  bool operator!=(const iterator& rhs) {
    return !(*this == rhs);
  }
};

void f(int i, int j) {
  std::cout << i << " " << j << "\n";
}

int main () {
  int lower = 4, upper = 14, delta = 5;
  NumericRange nr(lower, upper, delta);
  for (NumericRange::const_iterator iter = nr.begin(); iter != nr.end(); iter++)
  {
      f(*iter, *nr.end());
  }
} 
```

# c++ - 处理程序捕获的对象是原始对象的副本吗？

> ID：10158086
> 
> 赞同：0
> 
> 时间：2012-04-14T23:04:50.273
> 
> 标签：c++, exception-handling

这段摘录来自 Bjarne 的书：

> 原则上，异常在抛出时会被复制，因此处理程序会获取原始异常的副本。事实上，一个异常在被捕获之前可能会被复制多次。因此，我们不能抛出无法复制的异常。

如果我们通过引用或指针捕获异常，那么这不成立。我对吗？这里的作者是否意味着首先在内部复制抛出的对象，然后将该副本传递给处理程序参数，如果处理程序参数按值传递，则该副本将再次被复制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:15:33.657

无论异常是通过值还是引用捕获，它仍然是对象的副本。我可以推荐阅读 Meyers，更有效的 C++，第 12 项“了解抛出异常与传递参数或调用虚函数有何不同”，这对此有所了解。
即使 catch 处理程序通过引用捕获，该引用也必须是副本，因为原始对象可能已被破坏。
但是请注意，通过指针捕获不涉及复制 - 但抛出者负责确保捕获器获得指针的异常没有被破坏。不推荐使用指针捕捉。这只是 Meyers 通常建议始终通过引用捕获的原因之一，请参阅 Meyers，第 13 条“通过引用捕获异常”以供其他人使用！

# javascript - 为什么使用 Tipsy 会破坏我由 d3 生成的力导向图？

> ID：10158088
> 
> 赞同：0
> 
> 时间：2012-04-14T23:04:55.193
> 
> 标签：javascript, d3.js, tipsy

我正在尝试将 Tipsy 悬停弹出窗口添加到我的 3 个节点的简单力导向图中。

但是，添加 Tipsy javascript 似乎会使我的 javascript 崩溃：http: [//goo.gl/BeYls](http://goo.gl/BeYls)

Chrome Web 开发者控制台说明：

> 未捕获的类型错误：对象 [object SVGCircleElement]、[object SVGCircleElement]、[object SVGCircleElement] 没有方法“tipsy”

我确信没有 Tipsy 代码的应用程序的其余部分可以工作（因为取出第 78-85 行修复了应用程序），并且我已经包含了 javascript 文件。

具体来说，这是我编写的用于将 Tipsy 弹出窗口添加到 DOM 中的每个节点的代码。

```
 node.tipsy({  
    gravity: 'w', 
    html: true, 
    title: function() {
    var d = this.__data__, n = d.name;
        return 'Hi there! My name is <b>' + n + '</b>'; 
    }
  }); 
```

为什么会破？节点不是 DOM 元素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:16:16.197

Tipsy 是一个 jquery 插件。您需要将其应用于 jquery 选择器，而不是 d3 选择器。由于您的圈子具有 css 类“节点”，因此应该可以：

```
$(".node").tipsy({ ... }); 
```

# javascript - 将 javascript 动态添加的元素提交给 Stackoverflow 等控制器方法

> ID：10158089
> 
> 赞同：2
> 
> 时间：2012-04-14T23:05:02.520
> 
> 标签：javascript, asp.net-mvc-3, viewmodel, form-submit, formcollection

简单地说：我想让用户在 JS 中选择一些标签并将其提交给我的控制器。以下是我的建议：

*   为每个插入的标签创建一个隐藏输入，命名约定如下：`Tag123`（123 = 此标签的唯一标识符）并`FormCollection`在我的操作方法中迭代以找出已选择的标签。缺点很明显：使用`FormCollection`而不是`ViewModel`迭代`FormCollection`来获取我想要的数据对我来说似乎很糟糕。
*   创建一个隐藏输入并将每个选定的标签附加到它。这可能会在标签删除时变得混乱，因为我应该从输入的当前值中找到正确的 id 并将其删除。但优点是我只有一个元素，可以将它放在视图模型中，以便在控制器操作中访问它。
*   很想知道是否有人知道 SO 是如何做到的。他们现在有点定义标准。很想知道他们是怎么做到的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:10:14.080

Stack Overflow 只有一个文本输入字段，它通过 JavaScript 的自动完成功能得到了增强。发送到服务器时，该字段以空格分隔，并按名称查找对应的标签。我建议您这样做，因为它是所有选项中最容易访问的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:19:56.037

我有一个网站，可以选择添加标签，就像 SO。
然而，我解决问题的方法导致我为每个添加的标签创建一个输入字段，并在每次添加新输入时增加一个 javascript*索引*变量，然后使用 ViewModel 绑定 a `IList<TagDTO> tags { get; set; }`（表单往往会变得复杂无论如何，时间，所以视图模型几乎总是一个好方法）。这是在页面中创建的 html 隐藏输入的示例：

```
name=tags.Index, value=0
name=tags[0].tagid, value=201
name=tags.Index, value=2
name=tags[2].tagid, value=307 
```

这对我来说有一个很大的优势：国际化标签和可能不允许不存在的标签。
我的意思是每个标签都有一个 ID，在我的数据库“标签”表中，我支持的每种语言都有一个标签名称的列。如：

```
tagid | name_ptBR   | name_en
 201  | animais     | animals
 307  | educacional | educational 
```

这只是我解决问题的方法，但到目前为止效果还不错。

# excel - Matlab Excel文件中的行数

> ID：10158090
> 
> 赞同：5
> 
> 时间：2012-04-14T23:05:11.287
> 
> 标签：excel, matlab, rows

是否有Matlab的命令来获取excel文件中写入的行数？首先，我填写第一行。然后我想在 excel 文件中添加另一行。所以这是我的excel文件： ![在此处输入图像描述](../Images/2b4c6f440009bdbbed9b9cef6cd44035.png)

我试过了：

```
e = actxserver ('Excel.Application');
filename = fullfile(pwd,'example2.xlsx');
ewb = e.Workbooks.Open(filename);
esh = ewb.ActiveSheet;

sheetObj = e.Worksheets.get('Item', 'Sheet1');
num_rows = sheetObj.Range('A1').End('xlDown').Row 
```

但是num_rows = 1048576，而不是1。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T23:27:02.203

如果文件为空，或仅包含一行数据，`.End('xlDown').Row;` 则将移动到工作表的最底部（`1048576`是 Excel 2007+ 工作表中的行数）。

先测试cell`A2`是否为空，`0`如果是则返回。

或`Up`从工作表底部使用

```
num_rows = sheetObj.Cells(sheetObj.Rows.Count, 1).End('xlUp').Row 
```

注意：我不确定 Matlab 语法，所以这可能需要一些调整

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T21:40:24.920

您可以使用 MATLAB 的`xlsread`函数来读取电子表格。这将获得以下字段：

```
[numbers strings misc] = xlsread('myfile.xlsx'); 
```

如果您对or进行`size`检查，这应该会为您提供以下信息：`strings``misc`

```
[rows columns] = size(strings); 
```

对此进行测试，我得到了`rows = 1`，`columns = 10`（假设电子表格中除了“A”之外没有其他内容）。

# java - Android布局文件是否有任何类型的导入？

> ID：10158094
> 
> 赞同：1
> 
> 时间：2012-04-14T23:05:42.567
> 
> 标签：java, android, android-layout, layout

通常在 Android 布局文件中，如果要创建自定义视图，则必须完全限定类的路径。

```
<com.blah.blah.blah.Widget>
    ....
</com.blah.blah.blah.Widget> 
```

无论如何要在 XML 中导入一个类，这样您就不必重复包名称？我的一些包名很长，当一些布局有很多自定义视图时，它只是一个巨大的痛苦。

做事的能力...

```
<import path="com.blah.blah.blah.MyWidget"/>

<MyWidget>
    ...
</MyWidget> 
```

会让我的生活更轻松。

显然，导入标签目前不存在，但有没有办法扩展充气机来添加它？

如果没有，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:29:22.807

> 无论如何要在 XML 中导入一个类，这样您就不必重复包名称？

不，对不起。

> 显然，导入标签目前不存在，但有没有办法扩展充气机来添加它？

理论上，您可以在 上设置一个工厂`LayoutInflater`，它可以在膨胀过程中获得控制，并且可能可以用来完成此操作。但是，这仅适用于`LayoutInflater`您直接使用的，而不适用于系统使用的任何（例如`setContentView()`，默认`Adapter`通货膨胀）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:27:18.573

不幸的是，没有可能这样做。

# python - Nginx：加速图片上传？

> ID：10158096
> 
> 赞同：1
> 
> 时间：2012-04-14T23:05:51.917
> 
> 标签：python, image, nginx

我的 python 应用程序位于 Nginx 实例后面。当我上传图像时，这是我的应用程序的目的之一，我注意到 nginx 首先将图像保存在文件系统中（使用'watch ls -l /tmp'），然后将其交给应用程序。我可以将 Nginx 配置为使用图像 POST 在内存中工作吗？我的目的是避免接触慢速文件系统（服务器在嵌入式设备上运行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:45:45.043

是的，将 设置`proxy_max_temp_file_size`为零，或其他一些相当小的值。另一种选择（这可能是更好的选择）是将 设置`proxy_temp_path`为更快的存储，以便 nginx 可以更好地将应用程序与错误或恶意主机隔离开来。

# eclipse - 是否可以使用纯 Eclipse 手动构建 Flash Builder

> ID：10158098
> 
> 赞同：1
> 
> 时间：2012-04-14T23:06:00.303
> 
> 标签：eclipse, flash, apache-flex, eclipse-plugin, flash-builder

就像问题一样。有没有办法通过安装适当的插件和东西从普通的 Eclipse 开始实现 Flash Builder 的功能？

我正在尝试使用尖端的 Eclipse 版本进行 Adob​​e Air 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:04:10.340

您可以在 Eclipse 中使用 FDT 插件。[http://fdt.powerflasher.com/](http://fdt.powerflasher.com/)

# c++ - STL算法函数模板

> ID：10158104
> 
> 赞同：0
> 
> 时间：2012-04-14T23:06:27.227
> 
> 标签：c++, stl

程序必须在排序数组中找到一个元素并实现这个函数模板：

```
bool find(T *p, T value, int &index=null) 
```

我已经完成了一个部分，但是当我尝试做 Null 部分时，我的所有数字都归零。另外我不知道如何实现索引。有人能帮助我吗。

```
int main()
{
    vector<int> numbers;
    vector<int>::iterator iter;

    for (int x = 0; x < 15; x++)
        numbers.push_back(x);

    cout << "The numbers in the vector are:\n";
    for (iter = numbers.begin(); iter != numbers.end(); iter++)
        cout << *iter << " ";
    cout << endl << endl;

    iter = find(numbers.begin(), numbers.end(), 5);
    cout << *iter << endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:35:06.870

原型是

```
bool find(T *p, T value, int &index=null). 
```

函数调用是

```
iter = find(numbers.begin(), numbers.end(), 5); 
```

从概念上讲，这些匹配吗？是否`end()`返回值？5是指数吗？

# javascript - 在Ruby on Rails的haml视图中将ruby数组传递给javascript代码（jquery）

> ID：10158109
> 
> 赞同：4
> 
> 时间：2012-04-14T23:07:00.793
> 
> 标签：javascript, jquery, ruby-on-rails, ruby

我正在使用 jQuery/javascript 在 haml 模板上显示 Highcharts 图。这是一个片段，显示了 HighCharts 站点中的演示代码中的独立图表：

```
:javascript

  $(document).ready(function() {
    $("#tabs").tabs();
    new Highcharts.Chart({
      chart: {
        renderTo: 'volume_chart'
      },
      title: {
        text: 'Logarithmic axis demo'
      },
      xAxis: {
        tickInterval: 1
      },
      yAxis: {
        type: 'logarithmic',
        minorTickInterval: 0.1
      },
      tooltip: {
        headerFormat: '<b>{series.name}</b><br />',
        pointFormat: 'x = {point.x}, y = {point.y}'
      },
      series: [{            
        data: [1, 2, 4, 8, 16, 32, 64, 128, 256, 512],
        pointStart: 1
      }]
    });
  }); 
```

这工作正常。现在我正在尝试从 show.html.haml 文件中的 ruby​​/rails 数组中设置系列数据，如下所示：

```
...
- data_array        = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512]
...
:javascript

  $(document).ready(function() {
  ...
      series: [{            
        data: "#{data_array}",
        pointStart: 1
      }]
    });
  }); 
```

这给了我以下错误：

```
undefined method `to_js' for [1, 2, 4, 8, 16, 32, 64, 128, 256, 512]:Array 
```

如何将我的 ruby​​/rails 代码中的 data_array 传递给 javascript/jquery 代码？

感谢任何帮助。

谢谢。

巴拉特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T01:14:07.513

```
require 'json'

...

"#{data_array.to_json}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T12:12:33.067

嘿，在 HAML 中不需要使用`to_json`

```
 :javascript
     $(document).ready(function() {
       ...
       series: [{            
         data: #{ruby_array},
         pointStart: 1
       }]
     });
    }); 
```

将完美地工作

# jquery - 仅在按下回车键后尝试在动态表中显示文本框的内容

> ID：10158110
> 
> 赞同：0
> 
> 时间：2012-04-14T23:07:15.823
> 
> 标签：jquery

我在执行以下代码时遇到的问题，它将首先显示文本框的原始内容，然后是我按下的每组键，直到按下“Enter”。因此，如果文本框最初包含“Ice Cream - Pierre's Chocolate Chip”并且我单击文本框以获取焦点并将其替换为“茶”，我将获得 4 个警报框，每个警报框包含以下内容：

1.  冰淇淋 - 皮埃尔的巧克力片
2.  吨
3.  碲
4.  茶

然后，如果我单击不同的行并执行其他操作，我会得到原来的 4 个警报框，然后是新的……它一直在堆积，我不知道为什么？

这是我的 .cs 文件中的一些代码 - 请注意我添加的“OnKeyPress”属性：

```
 public TCell(String celltext,String strTextBox,String strName)
        {
            int iWidth = 0;
            int intRandom =
            iWidth = Convert.ToInt32(strTextBox);
            tblCell = new TableCell();
            TextBox txtItem = new TextBox();
            txtItem.ID = strName;
            txtItem.Text = celltext;
            txtItem.Width = iWidth;
            txtItem.BorderStyle = BorderStyle.None;
            txtItem.CssClass = "cssAdjust trans";
            txtItem.Style.Add("padding", "0px 5px 0px 5px");
            txtItem.Attributes.Add("onKeyPress","captureTable(this.value);");
            txtItem.Attributes.Add("onFocus", "javascript:this.select();");
            tblCell.Controls.Add(txtItem);
        } 
```

然后这里是我按下回车键后显示的功能：

```
 function captureTable(strValue) 
 {
     $(document).keypress(function (e) {
         if (e.which == 13) // Enter has been pressed.
         {
             e.preventDefault();
             document.getElementById("<%=HiddenField1.ClientID %>").value = strValue;
             alert(strValue);
         }
     }); 
```

提前感谢您能给我的任何帮助。我使用“window.event”进行了这项工作，但这将我从我阅读的内容中锁定在 IE 中，我正在尝试为此使用 JQuery。

（更新）：

好的，我使用了下面 kmb385 提供的代码，但我认为我仍然缺少一些东西。我没有出现任何警报，所以我在 '$(".txtHook").keypress(function(e){' 行设置了一个断点，并且在表格文本框内的键输入期间它没有到达它，包括回车键。

这是代码位于 default.apsx 页面中的位置：

```
 <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">

  <script type="text/javascript">

  $(document).ready(function(){ 
    $(".txtHook").keypress(function(e){ 
         if (e.which == 13) // Enter has been pressed.
         {
             e.preventDefault();
             document.getElementById("<%=HiddenField1.ClientID %>").value = $(this).val(); 
             alert(strValue);
         }
     });
  }); 
```

我将 JQuery 包含在网站母版页的正文标记中：

```
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">
            <Scripts>
                <asp:ScriptReference Path="~/Scripts/jquery-1.4.1.min.js" />
            </Scripts>
        </asp:ScriptManager> 
```

（最后更新：）

原来我包含的 JQuery 是不正确的。我将其移至母版页的 head 标记并将代码更改为：

```
<script type="text/javascript" src="../scripts/jquery-1.4.1.min.js"></script> 
```

之后，提供我的 kmb385 的代码开始工作:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:48:49.250

您的原始 javascript 代码将匿名函数绑定到文档上的 keypress 事件，每次在您创建的输入中按下一个键。这导致每次在文档/页面上的任何位置按下一个键时都会触发多个函数。我删除了您对 .cs 文件中 onKeyPress 事件的绑定。同样在cs文件中，我向文本框添加了一个类属性，这样我就可以在jquery中挂钩它。

在 Javascript 中，我使用 jquery 中的类选择器将函数绑定到每个输入的按键事件。该函数获取输入的值并将其分配给隐藏的输入。此代码可能存在问题，因为我不熟悉 .net，如果有，请告诉我，我们可以解决它们。我对以下选择器持怀疑态度，但我猜它是 .net 的东西。

> document.getElementById("<%=HiddenField1.ClientID %>").value

```
public TCell(String celltext,String strTextBox,String strName)
{
    int iWidth = 0;
    int intRandom =
    iWidth = Convert.ToInt32(strTextBox);
    tblCell = new TableCell();
    TextBox txtItem = new TextBox();
    txtItem.ID = strName;
    txtItem.Text = celltext;
    txtItem.Width = iWidth;
    txtItem.BorderStyle = BorderStyle.None;
    txtItem.CssClass = "txtHook cssAdjust trans";
    txtItem.Style.Add("padding", "0px 5px 0px 5px");
    txtItem.Attributes.Add("onFocus", "javascript:this.select();");
    tblCell.Controls.Add(txtItem);
} 
```

Javascript

```
 $(document).ready(function(){
        $(".txtHook").keypress(function(e){
            if (e.which == 13) // Enter has been pressed.
            {
                e.preventDefault();
                document.getElementById("<%=HiddenField1.ClientID %>").value = $(this).val();
                alert(strValue);
            }
        });
    }); 
```

# android - Android 4 ICS 和 Foursquare API

> ID：10158117
> 
> 赞同：0
> 
> 时间：2012-04-14T23:09:00.447
> 
> 标签：android, foursquare

Foursquare API for Android (Java) 在 Ice Cream Sandwich 上无法正常工作，因为[HttpURLConnection 类已更改](http://webdiary.com/2011/12/14/ics-get-post/)。

解决方案是从 DefaultIOHandler 类中删除 setDoOutput 调用，我这样做了，但我现在遇到了另一个问题。问题是如何制作（可行的）jar 文件。我是这样做的：我将[foursquare-api-1.0.0.-sources](http://foursquare-api-java.googlecode.com/files/foursquare-api-1.0.0-sources.jar)文件夹转换为zip 文件，然后将其扩展名重命名为jar。这就是我实际获得 jar 文件的方式，但它不起作用！当我将它放入我的 Android 项目并构建路径时，Android 不知何故不会“注册”它，我无法导入我需要的 Foursquare 类......

有关如何正确执行此操作的一些建议将非常有帮助。如果有人可以提供固定的 Foursquare API，那就更棒了。

# android - Android 创建类似 Spotify 的滑块菜单

> ID：10158119
> 
> 赞同：1
> 
> 时间：2012-04-14T23:09:15.033
> 
> 标签：android, menu, slider

我正在制作一个应用程序，它应该实现一个滑块菜单，就像 Spotify 中的那样（在其中滑动中间的三角形以显示当前播放的歌曲）。问题是我似乎无法找到一种体面的方法来做到这一点。[我用我在这里](http://www.dreamincode.net/forums/topic/270319-how-to-create-a-slide-in-menulist-like-in-facebook-app/)找到的类似 Facebook 的菜单进行了尝试。

然而，这只是为我提供了 2 个线性布局，它们彼此相邻放置，并且在展开菜单时基本上是拉伸或未拉伸的。这会在展开/折叠时产生一些布局问题（所有项目在展开时在线性布局中彼此下方放置，并且在再次折叠菜单时被悄悄地移动到正确的位置）。

另一方面，在 Spotify 中，当菜单展开时，布局似乎是相互重叠的。这似乎是一种更清洁的方式。但是我不知道如何解决这个问题，谷歌并没有真正提供很多答案。不需要物理地向上滑动菜单，只需在单击菜单按钮时通过一些滑动动画将布局相互叠加。

对不起，很长的帖子，似乎有必要指定问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T23:15:04.440

您不需要重新发明视图或做任何花哨的事情来获得此功能。它被称为**[`SlidingDrawer`](http://developer.android.com/reference/android/widget/SlidingDrawer.html)**并且已经在框架中可用。阅读[这个](http://w2davids.wordpress.com/android-damn-that-sliding-drawer/)和[这个](https://mobibear.wordpress.com/2010/07/12/android-slidingdrawer-with-custom-view/)或观看[这个](http://www.youtube.com/watch?v=3OhGkg_XT3o)视频。

# c - C中的get_symbol函数

> ID：10158122
> 
> 赞同：0
> 
> 时间：2012-04-14T23:09:33.830
> 
> 标签：c, symbol-table

我正在构建一个符号表，并且很难编写 get_symbol，它具有 (symbol_table symtab, char sym) 的参数。我必须为 2 个函数 get_symbol 和 set_symbol 编写代码，我在理解什么是符号表以及如何写出这两个函数时遇到了一些麻烦。它说 get_symbol() 有两个参数：符号表和应检索其值的符号名称。如果符号名称是 A、B、C 之一，则应返回符号表中的相应值。如果它不是这些名称之一，则应返回 0。如果有人可以提供帮助，那将非常感谢您的宝贵时间。

symbol_table.c 代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    #include "globals.h"
    #include "symbol_table.h"

    typedef struct symbol_table_s {
            int a,b,c;
    }*symbol_table_rep;

    status init_symbol_table (symbol_table *p_symtab)
    {
    symbol_table_rep st = malloc(sizeof(struct symbol_table_s));
    if (st == NULL)
            return ERROR;
    st->a = st->b = st->c = 0;
    *p_symtab = (symbol_table) st;
    return OK;
    }

    void destroy_symbol_table (symbol_table *p_symtab)
    {
    free(*p_symtab);
    *p_symtab = NULL;
    }
    void set_symbol(symbol_table *p_symtab, char sym, int value)
    {

    /* WRITE CODE FOR THIS */

    }
    int get_symbol (symbol_table symtab, char sym)
    {

    /* WRITE CODE FOR THIS FUNCTION */

    symbol_table_rep symtab;
    if (A,B,C)
    {
            return symbol_table;
    }else{
            return 0;
    }
    }

    symbol_table.h Code:
    #ifndef _SYMBOL_TABLE_H
    #define _SYMBOL_TABLE_H

    #include "globals.h"

    ABSTRACT_TYPE(symbol_table);

    status init_symbol_table   (symbol_table *p_symtab);
    void   destroy_symbol_table(symbol_table *p_symtab);

    void   set_symbol          (symbol_table *p_symtab, char sym, int value);
    int    get_symbol          (symbol_table  symtab,    char sym);

    #endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:50:01.420

您的代码还有许多其他问题，尤其是您将整个符号表按值传递给 get_symbol。你所展示的代码有多少是你写的，有多少样板代码你应该保持原样？

这是一个符号表的实现，其中符号是单个字符，值只是整数，就像您的代码一样。但这支持超过 3 个符号。

```
// symbol_table.h
struct symbol_table;
struct symbol_table* init_symbol_table(void);
void   destroy_symbol_table(struct symbol_table *p_symtab);

void   set_symbol          (symbol_table *p_symtab, char sym, int value);
int    get_symbol          (const symbol_table  *symtab,    char sym);

// symbol_table.c
#include <limits.h>
#include <stdlib.h>
#define ARRAYSIZE(a) (sizeof(a)/sizeof((a)[0]))
struct symbol_table
{
  // On rare systems, UCHAR_MAX == SIZE_MAX, and this array size will not work.
  // Most people will never write code for such a system though.  We'll ignore them. 
  int values[UCHAR_MAX+1];
};

struct symbol_table* init_symbol_table (void)
{
  struct symbol_table *p = malloc(sizeof(struct symbol_table));
  if (p) 
  { 
    size_t i;
    for (i=0; i<ARRAYSIZE(p->values); ++i)
      p->values[i] = 0;
  }
  return p;
}

void destroy_symbol_table(struct symbol_table *p)
{
  free(p);
}

void   set_symbol (symbol_table *p, char sym, int value)
{
  p->values[(unsigned char)sym] = value;
}

int get_symbol (const symbol_table  *p, char sym)
{
  return p->values[(unsigned char)sym];
} 
```

* * *

如果您需要保持函数接口相同（完成相当奇怪的定义`symbol_table`），那么您可以使用一些简单的条件语句来实现`get_symbol`和：语句序列或语句。`set_symbol``if``switch`

如果您对此有困难，请重新阅读课程材料中处理字符类型和`if`. 如果您的课程材料没有涵盖这些内容，那么您应该找到一些其他学习 C 语言的资源；尝试从[Great C 教程中提到的项目开始？](https://stackoverflow.com/questions/768704/great-c-tutorial)

是的，我可以为您编写`get_symbol`代码`set_symbol`，但我相信您正在寻找的帮助更多的是弄清楚如何开始解决问题，而不是在不理解的情况下获得完成的结果。

我认为您需要实现的关键是详细了解计算机需要采取哪些具体操作来返回其中一个符号的值。首先尽可能准确地以任何符号（图表或英语，等等）说明这一点。然后尝试用 C 语言实现这种理解。

这个首先了解解决问题的机制的过程——也就是说，你想让计算机做什么——是学习编程过程的核心。我猜，这种家庭作业旨在提供这种学习经验。但是没有人可以为你做。向您展示已完成的代码可能无济于事，因为它不会让您“啊哈！” 洞察力。

如果你真的完全被卡住了，请从这个实现开始：

```
void set_symbol(symbol_table *p_symtab, char sym, int value)
{
  /* WRITE CODE FOR THIS LATER */
}

int get_symbol (symbol_table symtab, char sym)
{
  return 0;
} 
```

它显然做错了事，但它会编译。然后通过修改它来处理它，为 A、B 和 C 返回一个*固定*值。然后参考你的学习材料，了解如何访问结构的成员。更改代码以始终返回`a`成员的值。然后尝试弄清楚如何区分调用者想要获取 A 或 B 或 C 的值的情况。您可能会发现“人为地”将符号表的成员`a` `b`和设置`c`为某个特征值以确保您返回的是正确的（但请记住稍后删除该代码）。

完成后，开始着手实施`set_symbol`. 到您完成`get_symbol`工作时，`set_symbol`应该很容易。

# sql - SQL Server：行中的空格

> ID：10158125
> 
> 赞同：0
> 
> 时间：2012-04-14T23:09:56.080
> 
> 标签：sql, sql-server, tsql, sqldatatypes

我有这个问题，在我的数据库中，我的文本后面有很多空格，

在我的电子邮件中，我有`"something@mail.com+_________________________________________"`很多空间

我的电子邮件行是`nchar(255)`

这发生在我所有的桌子上

谁能向我解释为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T23:11:51.117

`CHAR`并`NCHAR`会自动用空格填充字符串以满足定义的长度。使用`NVARCHAR(255)`而不是`NCHAR(255)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:21:15.840

你应该使用 nvarchar

> SQL Server 提供两种数据类型来存储字符信息。在大多数情况下，这两种数据类型在您在 SQL Server 中或从应用程序中使用它们的方式上是相同的。不同之处在于 nvarchar 用于存储 unicode 数据，用于在您的数据库表中存储多语言数据。其他语言有一组扩展的字符代码需要保存，并且此数据类型允许此扩展。如果您的数据库不会存储多语言数据，则应改用 varchar 数据类型。原因是 nvarchar 占用的空间是 varchar 的两倍，这是因为需要存储其他语言的扩展字符代码

# python - python中的单例，关闭在装饰器中不起作用

> ID：10158128
> 
> 赞同：2
> 
> 时间：2012-04-14T23:10:32.273
> 
> 标签：python, singleton, closures, decorator

当我在看一些关于 python 中单例的代码时，我决定自己编写。

这是我的第一个代码：

```
def singleton(cls):
    instance = False
    def constructor(*args,**kwargs):
        if not instance:
            instance = cls(*args,**kwargs)
        return instance
    return constructor 
```

但是当我测试它时，解释器告诉我在 if 条件下使用之前必须声明“实例”，最后我想办法如下：

```
def singleton(cls):
    cls._instance = False
    def constructor(*args,**kwargs):
        if not cls._instance:
            cls._instance = cls(*args,**kwargs)
        return cls._instance
    return constructor 
```

它按预期工作：

```
>>> @singleton
>>> class A: pass
>>> a=A()
>>> id(a)
33479456
>>> b=A()
>>> id(b)
33479456 
```

为什么第一个示例中的关闭不起作用。

编辑：错误是

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "singleton.py", line 4, in constructor
    if not instance:
UnboundLocalError: local variable 'instance' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:20:35.950

您的第一个闭包不起作用，因为在您的`constructor`函数内部，您分配了`instance`. 这会`instance`在 内部生成一个本地名称`constructor`，并且您在分配给它之前访问了该本地名称。

在 Python 3 中，您可以使用`nonlocal instance`来声明`instance`. 在 Python 2 中，您无法随意访问该外部`instance`名称。

此外，单例在 Python 中并不常见。为什么不只实例化你的类一次呢？为什么要试图诱使 Python 表现出与它不同的行为？或者创建一个工厂函数来生成要使用的实例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:19:02.200

闭包变量在 Python 中是只读的，因此当您尝试为实例赋值时，Python 无法做到。错误消息有点误导，因为声明了实例，它在闭包内是不可写的。

# ruby-on-rails - rails 3: routes.rb 中的自定义路由

> ID：10158129
> 
> 赞同：0
> 
> 时间：2012-04-14T23:11:21.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想获得用户的链接，例如：`/chicago/123-olegpasko`。在我的助手中：

```
def users_path(user)
  "/#{if user.city; user.city.name; else; "city";end}/#{user.to_param}"
end 
```

如何创建正确的路线？

现在我有类似的东西：

```
match 'dontknow/:id' => 'users#show', :as => :users 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:20:46.073

只需在您的模型中添加以下行：

```
def to_param
  "#{id}-#{name.parameterize}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:29:23.867

查看[有关 friendly_url 的 Railcast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

还要看看[路线演员表](http://railscasts.com/episodes?utf8=%E2%9C%93&search=routes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:48:15.280

解决方案很简单：

```
match ':name/:id' => 'users#show', :as => :users 
```

# ruby-on-rails - 无法在 CommentsController#destroy 中重定向到 Nil（多态关联）

> ID：10158133
> 
> 赞同：4
> 
> 时间：2012-04-14T23:12:03.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, polymorphic-associations

我正在尝试在我的评论控制器中编写我的删除方法。我的评论模型与其他模型具有多态关联，但在这种情况下，我们将只关注旅行。换句话说，@trip = @commentable。

评论被删除得很好，但是`ActionController::ActionControllerError in CommentsController#destroy: Cannot redirect to nil!`当我重定向到 @commentable 时，我不断收到错误消息，这将是评论所属的旅程。

我还在我的创建操作（评论控制器）中重定向到@commentable，当用户创建新评论时它工作得很好。

有小费吗？

查看 (trips/show.html.erb)

```
<% if !@commentable.comments.empty? %>
  <% @commentable.comments.each do |comment| %>
    <!-- Content -->
    <%= link_to comment, :method => :delete do %> delete <% end %>
  <% end %> 
<% end %> 
```

适用于创建操作的评论表单

```
<%= form_for [@commentable, Comment.new] do |f| %>
  <%= f.text_area :content %>
  <div id="comment_submit_button"><%= f.submit "Comment" %></div>
<% end %> 
```

trips_controller.rb

```
def show
  @trip = @commentable = Trip.find(params[:id])
  @comments = Comment.all
end 
```

评论控制器.rb

```
 def create
   @commentable = find_commentable
   @comment = @commentable.comments.build(params[:comment])
   @comment.user_id = current_user.id

   if @comment.save
     redirect_to @commentable
   end
 end

 def destroy
  # @commentable = find_commentable    this line was wrong
   @comment = Comment.find(params[:id]) 
   @commentable = @comment.commentable #this line fixed it
   if @comment.destroy
     redirect_to @commentable
   end
 end

def find_commentable
  params.each do |name, value|
    if name =~ /(.+)_id$/
      return $1.classify.constantize.find(value)
    end
  end
 nil
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T01:21:28.317

想出了解决办法。将在上面的代码中发布解决方案。

```
def destroy
  @comment = Comment.find(params[:id])
  @commentable = @comment.commentable
  if @comment.destroy
    redirect_to @commentable
  end
end 
```

# php - 如何对执行命令行程序的 PHP 类方法进行单元测试？

> ID：10158134
> 
> 赞同：2
> 
> 时间：2012-04-14T23:12:08.100
> 
> 标签：php, git, unit-testing, phpunit

对于我正在开发的 PHP 应用程序，我需要读取当前的 git 修订版 SHA，当然我可以通过使用 shell_exec 或反引号来执行 git 命令行客户端轻松获得。

我显然已经把这个调用放到了它自己的方法中，这样我就可以很容易地为我的其余单元测试隔离和模拟它。所以我的课看起来有点像这样：

```
class Task_Bundle
{

    public function execute()
    {
        // Do things
        $revision = $this->git_sha();
        // Do more things
    }

    protected function git_sha()
    {
        return `git rev-parse --short HEAD`;
    }
} 
```

当然，虽然我可以通过模拟 git_sha 来测试大部分课程，但我很难了解如何测试实际的 git_sha() 方法，因为我看不到为它创建已知状态的方法。我认为单元测试中没有任何真正的价值，它也要求`git rev-parse`比较结果？我想知道至少断言该命令已运行，但我看不到任何方法来获取 PHP 执行的 shell 命令的历史记录——即使我指定 PHP 应该使用 BASH 而不是 SH，历史列表也会出现空的，我想是因为单独的反引号执行是单独的终端会话。

我很想听听有关如何测试它的任何建议，或者是否可以不测试该方法并在将来维护应用程序时小心使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T19:50:25.020

尽管您已经接受了答案，但让我发布一些关于单元测试应该如何工作的内容，因为即使发布的解决方案确实有效并且确实很好，它也有一些倒退。

首先，您不想实际执行您的命令，因为这会测试外部软件。从这一刻起，你就依赖于你无法控制的外部东西（如果我想在我的电脑上测试你的软件会发生什么？我必须安装 git 或任何 git-mock 吗？）。您真正想要做的是查看命令行命令是否正确并且执行良好。

**正如我之前遇到的那样，这就是我所做**的：我创建了一个执行 shell_exec 的类。在任何我想与 shell 交互的地方，我都会注入这个类并使用它。因此，为了进行测试，我可以模拟该类并查看是否执行了正确的方法以及是否设置了正确的参数。

这有很多好处：

*   我有一点与外壳交互。如果将来有任何变化，或者如果我需要在执行命令之前做任何事情，我可以将行为添加到类中。PHP 函数封装得很好。
*   它适用于每台 PC，即使 shell_exec 命令因任何原因不起作用。测试在每台电脑（开发机器、测试服务器、集成服务器）上执行，无需担心外部依赖。

当然，要验证您的软件是否可以作为一个整体运行，您必须进行不模拟任何内容的集成测试。但这是完全不同的情况。单元测试应该确保你的类（或方法）做它需要做的事情。有时这并不明确，因为您可能决定在某处使用真正的类，因为模拟它会导致大量开销。但是，就我而言，如果它依赖于可能未安装或由于某种原因可能无法工作的外部库/软件，它无论如何都不再是单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:29:11.583

至少你可以做一些事情，比如检查返回的字符串是否匹配 /^[abcdef0-9]{7}$/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:24:59.043

我想如果你真的想要，你可以写一个假人`git`并将它的位置添加到你环境的`PATH`. 让它做你需要做的任何验证，然后生成与真实事物一致的输出。如果你愿意，你甚至可以将它转发给真实的东西`git`，但是你不能保证结果。

但是，您必须小心....您希望做得足够好，以使班级可以被愚弄以为它是`git`真的你自己半途而废的 Git 版本。

# php - 我什么时候必须声明 session_start();？

> ID：10158139
> 
> 赞同：15
> 
> 时间：2012-04-14T23:12:33.263
> 
> 标签：php, session, login

所以我是 PHP 的初学者，所以我需要一点帮助。我想弄清楚什么时候开始会议。我应该在用户第一次注册时这样做还是在他们登录时呢？

另外，当我检查会话时，会话是否“通用”意味着它会起作用，还是我必须在所有页面中包含一个文件来检查某人是否有会话？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-14T23:16:05.930

*“用户第一次注册时我应该这样做还是他们登录时呢？”*

**每次**想要获取或设置任何会话信息时都应该这样做。存储在`$_SESSION`数组中的数据只有在会话启动后才可用。

*“另外，当我检查一个会话时，会话是否‘通用’意味着它会起作用，还是我必须在所有页面中包含一个文件来检查某人是否有一个会话？”*

只需调用`session_start()`即可创建会话。如果已创建会话，则将使用该会话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T23:25:50.633

只需在您访问 $_SESSION 变量的每个文件中执行一次 session_start() 。最好是在中心位置进行。例如，包含在每个应用程序文件中的文件。

# php - PHP 5.4.0 - 注册全局变量已弃用

> ID：10158140
> 
> 赞同：3
> 
> 时间：2012-04-14T23:12:46.983
> 
> 标签：php

我在 PHP 网站上的页面上运行说 globals 将在 5.4.0 中贬值。我知道 $MyFormPost 是 $_POST['MyFormPost'] 和 $_GET['MyFormPost'] 的全局变量，但我想知道我们网站的开发方式是否也被视为在 5.4.0 中折旧。

我们有一个类，其内容已发布在下面，我们可以通过我们的应用程序访问所有常见的类。因此，如果我们想访问用户的浏览器信息以查看他们在任何其他类或文件中使用的移动设备，我们只需调用 $gb->BrowserData->get_MobileDevice()。我们是否需要开始改变我们网站的构建方式？

```
$gb = new GlobalData;

global $BrowserData;
$BrowserData = new BrowserType();

if ($gb->BrowserData->get_MobileDevice()=='iPhone') {

} 
```

全球数据类.php

```
<?php
class GlobalData {
        public function __get($name) {
            if (isset($GLOBALS[$name]))
                return $GLOBALS[$name];
        }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:17:47.930

事实并非如此`register_globals`；你不必担心。自 PHP 4.2 起默认关闭，现在是时候删除它了。[这是对`register_globals`实际操作](http://php.net/manual/en/security.globals.php)的描述- 基本上将所有请求变量放入全局变量中。一个*非常*糟糕的主意。

尽管我仍然建议使用`global $somevariable;`将全局变量带入当前范围，而不是使用您正在使用的类。

# delphi - TChromiumFMX - 在运行时创建

> ID：10158146
> 
> 赞同：1
> 
> 时间：2012-04-14T23:14:00.947
> 
> 标签：delphi, delphi-xe2, firemonkey

我目前正在尝试使用 TChromiumFMX 在 Firemonkey 中创建一个基本的 Web 浏览器。我最初发布到该项目的小组，但几周后没有收到任何回复。

尝试在运行时创建 TChromiumFMX 时似乎存在问题。我最初尝试从我的应用程序中创建它。由于这引发了访问冲突错误，然后我尝试了使用导出过程的 DLL 路由。

错误就是这样；异常类：EAccessViolation 异常消息：模块中地址的访问冲突。读取地址 00000000。

第一个地址似乎是随机的，取决于我在代码中所做的更改（稍作调整以尝试修复它，但均无济于事），而第二个地址始终为 00000000。例如；“ChromDLL.dll”中地址 0117B40A 的访问冲突。读取地址 00000000。

代码如下；

```
[Global Variables]
Chrom : TChromiumFMX;

[...]

Procedure Chrom_Create(AlignTo : TAlignLayout; ParentIn :
TFmxObject; DefaultURLIn : String); export;
begin
  Chrom := TChromiumFMX.Create(nil);
  Chrom.Parent := ParentIn;
  Chrom.Align := AlignTo;
  Chrom.Options.CaretBrowsingEnabled := True;
  Chrom.Options.ThreadedCompositingEnabled := True;
  Chrom.Options.EncodingDetectorEnabled := True;
  Chrom.Options.FullscreenEnabled := True;
  Chrom.Options.FileAccessFromFileUrlsAllowed := True;
  Chrom.DefaultUrl := DefaultUrlIn;
end; 
```

那来自 DLL 版本，但我在应用程序版本中编写的代码非常相似，并且也因类似的访问冲突而失败。

此问题仅在 FMX/Firemonkey 组件中出现，而在使用类似代码的 VCL 版本中不会出现（其中 TChromiumFMX 被 TChromium 替换）。

我很好奇是否有人发现了解决此问题的方法？我已经搜索和搜索了几个星期，还没有找到解决方案，甚至在谷歌代码的问题页面上谈论类似问题的人很少。我确实尝试使用“应用程序内”版本的代码将它的所有者和父对象强制分配给一个对象，但同样没有这样的运气。当我告诉它导航到 URL 时，会发生访问冲突。

我确实注意到我必须在创建表单时将“Application.OnIdle”调用为“doOnIdleEvent”并将“FLoading”调用为“False”，以便在设计时创建的初始浏览器窗口能够运行，但我已经当我在运行时创建一个时，我没有做同样的事情。

想法？

**编辑：**修正了一个不应该出现的错字

# javascript - Drupal 7 中的 Javascript：使用 JMpress.js 时发生冲突

> ID：10158150
> 
> 赞同：0
> 
> 时间：2012-04-14T23:15:03.783
> 
> 标签：javascript, jquery-plugins, drupal-7, conflict, impress.js

我正在尝试将 Jmpress.js（impress.js 的一个分支，实际上是一个 jquery 插件）集成到 Drupal 7 中，但我发现了一些问题。

首先，我得到了“$ 不是函数”错误，我设法解决了直接指向 jQuery 而不是使用 $ 的问题，如[其他地方](https://stackoverflow.com/questions/5200053/is-not-a-function)所述。

但是现在我得到了一个公认的功能，这个东西真的很有效（错位的元素，仅在某些情况下操作的键导航），更重要的是我可以在 Firebug 控制台中看到很多错误消息。

在这里，我粘贴其中的一些：

```
$(hashLink).on is not a function
(?)()jmpress.js?m2hr5f (línea 1491)
step = "init"
eventData = Object { settings={...}, current={...}, container=[1], más...}
(?)()jmpress.js?m2hr5f (línea 278)
idx = 2
callback = function()
nodeName()jquery.js?v=1.4.4 (línea 34)
j = [firstSlide(step, eventData), function(), function()]
s = function()
v = function()
callCallback()jmpress.js?m2hr5f (línea 277)
callbackName = "selectInitialStep"
element = "init"
eventData = Object { settings={...}, current={...}, container=[1], más...}
init()jmpress.js?m2hr5f (línea 666)
args = Object { beforeChange=[0], beforeInitStep=[0], initStep=[0], más...}
f()jmpress.js?m2hr5f (línea 800)
(?)()jmpress.js?m2hr5f (línea 810)
idx = 0
element = div#simple
nodeName()jquery.js?v=1.4.4 (línea 34)
j = [div#simple]
s = function()
v = div#simple
toArray()jquery.js?v=1.4.4 (línea 27)
j = function()
s = undefined
jmpress()jmpress.js?m2hr5f (línea 809)
method = undefined
diapos()17 (línea 105)
noConflict()jquery.js?v=1.4.4 (línea 30)
j = function()
inArray()jquery.js?v=1.4.4 (línea 38)
[Parar en este error]   

$(hashLink).on("click"+current.hashNamespace, function(event) { 
```

我现在有点迷茫，因为我已经努力让它工作了将近几天（我开始尝试使用原始的 impress.js，但我放弃了，因为集成 jquery 插件看起来更像可行的选择）。

我还尝试[封装我的代码](https://stackoverflow.com/questions/7937507/how-to-encapsulate-jquery)（这是一个启动 jmpress.js 的非常小的代码），但我想我做错了什么，因为我没有进一步了解它:)

任何帮助/想法将不胜感激。谢谢！

JMpress.js 已正确加载到标头中，我将此代码添加到已发布节点的主体中（PHP 代码过滤器处于活动状态，因此代码不会被剥离）：

```
<script type="text/javascript">
jQuery(function() {
    jQuery('#simple').jmpress();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:00:39.860

问题与 jQuery 版本有关。

[Drupal 7 适用于 jQuery 1.4.4，而http://shama.github.com/jmpress.js/#/home](http://shama.github.com/jmpress.js/#/home)中的 jmpress 示例适用于 jQuery 1.7.1。

例如，该`.on()`函数在 1.7 中被添加到 jQuery ( [http://api.jquery.com/on/](http://api.jquery.com/on/) )

覆盖您要使用此插件的 jQuery 版本。

使用 hook_js_alter 删除不想要的 jQuery 版本并将其替换为 jquery 1.7.1。

请小心，仅在必要时使用它，因为在此更改后，您的 JS 代码的其他部分可能会被破坏。

# ruby-on-rails - 从字符串中提取 - Ruby

> ID：10158152
> 
> 赞同：0
> 
> 时间：2012-04-14T23:15:09.067
> 
> 标签：ruby-on-rails, ruby, regex

我有一个字符串。该字符串是一个 html 代码，它充当我正在创建的博客文章的预告片。整个 html 代码（预告片）存储在数据库中的一个字段中。

我的目标：我希望当用户（Facebook 之类的社交按钮）喜欢某个博客文章时，正确的数据会显示在他的新闻提要上。为了做到这一点，我需要在第一次出现图像时从预告片中提取其中的图像路径`src="i-m-a-g-e--p-a-t-h"`。当用户在预告片中只放一张图片时我成功了，但如果他不小心放了两张或更多图片，整个事情就会崩溃。`<p>`此外，对于描述字段，我需要提取标签内第一次出现的文本。问题还在于用户可以将图像放在第一个标签内。

如果专家能帮助我解决困扰我好几天的问题，我将不胜感激。

可以在这里找到带有正则表达式的文本字符串，用于提取 src：[http ://rubular.com/r/gajzivoBSf](http://rubular.com/r/gajzivoBSf)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:25:53.240

不要尝试自己解析 HTML。让专业人士来做。

```
require 'nokogiri'
frag = Nokogiri::HTML.fragment( your_html_string )
first_img_src = frag.at_css('img')['src']
first_p_text  = frag.at_css('p').text 
```

# list - 编写列表的第一个元素

> ID：10158155
> 
> 赞同：1
> 
> 时间：2012-04-14T23:15:43.207
> 
> 标签：list, recursion, prolog, writing

我尝试在**递归**中编写序言列表的前两个元素..例如：

如果我有

```
List:[a,b,c,d,e,f] 
```

当我进入

```
first_two(F,S,List).
It returns 
F:a, S:b ;
F:b, S:c ;
F:c, S:d ;
F:d, S:e ;
F:e, S:f . 
```

我尝试这样做：

```
first_two(F,S,[F|[S|Tail]]):-first_two(F,S,Tail). 
```

但它失败了..

非常感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:22:02.143

如果您想要的只是前两个，那么您的解决方案非常接近，但不需要递归：

```
first_two( F, S, [F|[S|_]] ). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T06:29:30.460

您忘记了递归的基本情况，即终止条件：

```
first_two(F, S, [F, S|_Tail]).
first_two(F, S, [_|Tail]) :-
    first_two(F, S, Tail). 
```

我还使用友好的语法和间距简化了您的规则。

我更喜欢阅读更简单的代码，不是吗？

# c - 流的概念是否适用于 tcp 和 udp？

> ID：10158156
> 
> 赞同：0
> 
> 时间：2012-04-14T23:15:48.303
> 
> 标签：c, networking, wireshark

我有一个非常大的网络跟踪文件，其中包含 tcp 和 udp 数据包。我想找出跟踪文件中的流。为此，我有一个哈希函数，它接受源 IP 地址、目标 IP 地址、源端口、目标端口和协议。在 TCP 的情况下，我可以理解流意味着具有相同 5 个参数的所有数据包。但是在 UDP 的情况下是什么意思。在 UDP 的情况下，流的概念如何应用？我是数据包处理的新手。一旦我确定了一个流（tcp 和 udp），我如何计算出流的方向。我必须查看 SYN 标志吗？如果是，我该怎么做 UDP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:18:22.140

Netflow 适用于任何协议，包括 TCP 和 UDP。所以要回答你的问题，是的，UDP 数据包应该被视为与 TCP 相同。

如果您进行 Netflow 处理，您可能会发现[此](http://netflow.caligare.com/netflow_v7.htm)规范很有用 - 非常详细且适用于许多版本。我可以确认它是准确的，并且适用于 Cisco 和 Juniper 设备（至少版本 7）

# windows - 使用 Windows cmd 中的 cygwin 在后台运行命令

> ID：10158158
> 
> 赞同：7
> 
> 时间：2012-04-14T23:16:03.813
> 
> 标签：windows, command-line, cygwin

`&`我在我的 Windows 命令行中使用 cygwin，除了能够在后台运行某些东西（即放在命令的末尾）之外，我总是非常愉快地完成了所有事情。

只是为了给你更多的上下文，我希望能够启动一个 Mercurial Web 服务器，并且仍然能够继续使用命令行窗口，甚至在不终止服务器的情况下关闭它。例如：

```
>hg serve &
listening at http://localhost:8000/ (bound to *:8000)
>echo "Still able to do this" 
```

对此有任何解决方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-01T16:39:53.543

我在运行 Apache 时遇到了类似的问题，最后我使用`cygstart`了，就像 CMD 一样`start`：

`cygstart --hide /c/apache/bin/httpd.exe`

`--hide`在这种情况下，由于该选项，它将作为后台进程运行 Apache

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T22:22:41.677

找到了解决方案：

```
start <command> /B 
```

`start`是一个 windows 命令，执行一个`help start`以获得更多信息

或者，对于我的情况

```
hg serve --daemon 
```

或者

```
hg serve -d 
```

会成功的

# java - “类已定义”错误

> ID：10158161
> 
> 赞同：-1
> 
> 时间：2012-04-14T23:16:21.410
> 
> 标签：java, android, eclipse

我有listview应用程序探索城市的每一行指向不同的城市，在每个城市活动中包括按钮，当点击打开新活动时，无限画廊包含该城市的图片，我将无限画廊添加到第一个城市并且工作正常，当我想添加时它到第二个城市，它给了我课堂上的红色标记错误如下：

1- InfiniteGalleryAdapter 类型已定义。

2-类型 InfiniteGallery 已经定义。

我试图以相同的结果更改类名，我删除了 R.java 并 Eclipse 以相同的结果重建它。此外，我从项目属性中取消选中 java builder 并得到相同的红色标记错误。

请任何帮助和建议将不胜感激

谢谢

我的代码：

```
public class SecondCity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
        // Set the layout to use
        setContentView(R.layout.main);
        if (customTitleSupported) {
            getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,R.layout.custom_title); 
            TextView tv = (TextView) findViewById(R.id.tv); 
            Typeface face=Typeface.createFromAsset(getAssets(),"BFantezy.ttf");     
            tv.setTypeface(face);
            tv.setText("MY PICTURES"); 
        }

        InfiniteGallery galleryOne = (InfiniteGallery) findViewById(R.id.galleryOne);
        galleryOne.setAdapter(new InfiniteGalleryAdapter(this));     
    }
}

class InfiniteGalleryAdapter extends BaseAdapter { 
    **//red mark here (InfiniteGalleryAdapter)** 
    private Context mContext;

    public InfiniteGalleryAdapter(Context c, int[] imageIds) { 
        this.mContext = c;
    } 

    public int getCount() { 
        return Integer.MAX_VALUE;
    } 

    public Object getItem(int position) {
        return position;
    } 

    public long getItemId(int position) { 
        return position;
    } 

    private LayoutInflater inflater=null;
    public InfiniteGalleryAdapter(Context a) { 
        this.mContext = a; 
        inflater = (LayoutInflater)mContext.getSystemService ( Context.LAYOUT_INFLATER_SERVICE)
    } 

    public class ViewHolder{ 
        public TextView text; 
        public ImageView image;
    } 

    private int[] images = {
        R.drawable.pic_1, R.drawable.pic_2, 
        R.drawable.pic_3, R.drawable.pic_4, 
        R.drawable.pic_5
    }; 

    private String[] name = {
        "This is first picture (1) " ,
        "This is second picture (2)",
        "This is third picture (3)", 
        "This is fourth picture (4)",
        " This is fifth picture (5)"
    }; 

    public View getView(int position, View convertView, ViewGroup parent) { 
        ImageView i = getImageView(); 

        int itemPos = (position % images.length); 

        try {
            i.setImageResource(images[itemPos]); ((BitmapDrawable) i.getDrawable()).
            setAntiAlias  (true);
        } 

        catch (OutOfMemoryError e) {
            Log.e("InfiniteGalleryAdapter", "Out of memory creating imageview. Using empty view.", e);
        } 

        View vi=convertView; 
        ViewHolder holder; 
        if(convertView==null){ 
            vi = inflater.inflate(R.layout.gallery_items, null); 
            holder=new ViewHolder(); holder.text=(TextView)vi.findViewById(R.id.textView1); 
            holder.image=(ImageView)vi.findViewById(R.id.image); 
            vi.setTag(holder);
        } else {
            holder=(ViewHolder)vi.getTag();
        } 
        holder.text.setText(name[itemPos]); 

        final int stub_id=images[itemPos]; 
        holder.image.setImageResource(stub_id); 

        return vi;
    } 

    private ImageView getImageView() { 

        ImageView i = new ImageView(mContext); 

        return i;
    } 
}

class InfiniteGallery extends Gallery {
    **//red mark here (InfiniteGallery)** 

    public InfiniteGallery(Context context) {
        super(context);
        init();
    } 

    public InfiniteGallery(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public InfiniteGallery(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init(){
        // These are just to make it look pretty
        setSpacing(25);
        setHorizontalFadingEdgeEnabled(false);
    } 

    public void setResourceImages(int[] name){
        setAdapter(new InfiniteGalleryAdapter(getContext(), name));
        setSelection((getCount() / 2));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T06:28:02.833

您正在获得那些红色标记，因为这些课程已经在您之前的课程中定义过。Java 不允许有重复的名称。此外，您似乎正在尝试为每个冗余的 Actvitiy 定义相同的类。

只需从您的 SecondActivity java 文件中完全删除这两个类，因为它们已在先前的活动中定义。我建议您制作一个单独的包，其中定义了 Adapter 和 InfiniteGallery 并保持重复使用。

```
public class SecondCity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
        // Set the layout to use
        setContentView(R.layout.main);
        if (customTitleSupported) {
            getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,R.layout.custom_title); 
            TextView tv = (TextView) findViewById(R.id.tv); 
            Typeface face=Typeface.createFromAsset(getAssets(),"BFantezy.ttf");     
            tv.setTypeface(face);
            tv.setText("MY PICTURES"); 
        }

        InfiniteGallery galleryOne = (InfiniteGallery) findViewById(R.id.galleryOne);
        galleryOne.setAdapter(new InfiniteGalleryAdapter(this));     
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T03:05:36.787

您甚至可能在同一文件夹中的其他文件上定义了具有相同名称的类。这可能会导致此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T00:23:54.773

使用 Ctrl+H -> Java Search -> Search for Type 它会告诉你重复的类在哪里。

# c# - 将系统日期与 SQL 中的日期字段进行比较

> ID：10158162
> 
> 赞同：0
> 
> 时间：2012-04-14T23:16:52.330
> 
> 标签：c#, asp.net

我正在尝试将 SQL Server 中的日期记录与系统日期进行比较。在我的示例中，用户首先注册他的姓名和出生日期，然后将其存储在数据库中。然后，用户只使用他的名字登录 Web 应用程序。登录后，他的名字会显示在`"Welcome "player name`“使用`Sessions`.

除了他的名字之外，我还想显示一条消息，如果他的出生日期与系统日期匹配，则显示“生日快乐”。我尝试过使用`System.DateTime.Now`，但我认为它也在比较年份，而我真正想要的只是日期和月份。我真的很感激任何建议或帮助。

登录页面中的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
  String name = TextBox1.Text;
  String date = System.DateTime.Today.ToShortDateString();
  SqlConnection myconn2 = new 
    SqlConnection(ConfigurationManager.ConnectionStrings["User"].ToString()); 

  SqlCommand cmd2 = new SqlCommand();
  SqlDataReader reader;

  myconn2.Open();
  cmd2 = new SqlCommand("Select D_O_B from User WHERE Username = @username", 
                        myconn2);
  cmd2.Parameters.Add("@username", SqlDbType.NVarChar).Value = name;
  cmd2.Connection = myconn2                           
  cmd2.ExecuteNonQuery();
  reader = cmd2.ExecuteReader();
  while (reader.Read().ToString() == date)
  {
    Session["Birthday"] = "Happy Birthday";
  }
} 
```

注意：我在上面的代码中使用了相同的阅读器，但这里的阅读器使用不同的连接。另外，`reader.Read()`不同于`reader.HasRows`?

Web 应用程序页面中的代码：

```
string date = (string)(Session["Birthday"]); // Retrieving the session
Label6.Text = date; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:24:09.903

您可以替换代码片段以将上面的日期与此日期进行比较

```
object dobVal = null;
while ((dobVal= reader.Read()) != null)
{
  var storedDob = Convert.ToDateTime(dobVal.ToString());

  if(storedDob.Month == DateTime.Now.Month && 
     storedDob.Day == DateTime.Now.Day)
  {
    Session["Birthday"] = "Happy Birthday";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:33:06.013

使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)而不是 ExecuteNonQuery() 和 ExecuteReader()。如果数据库中的 D_O_B 列是日期时间，则可以将结果转换为日期时间。如果 D_O_B 列是 varchar（或类似的），则必须使用 DateTime.Parse() 将字符串转换为 DateTime。然后只需比较 DateTime 实例的 Day 和 Month 部分：

```
DateTime DOB = (DateTime)cmd2.ExecuteScalar();
DateTime Today = DateTime.Now;
if (Today.Month == DOB.Month && Today.Day == DOB.Day)
{
    //Happy Birthday
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:22:28.263

两种方法，在 sql 中，您可以使用附加页面作为参考在月份和日期之间进行日期比较

[sql日期比较（你想做的不好的方式）](http://msdn.microsoft.com/en-us/library/ms186724.aspx)

2）您可以将传入的字符串转换为日期时间，然后将 system.datetime.month 和 system.datetime.day 与 sql [c# 中的转换日期时间进行比较#更好的方法](http://msdn.microsoft.com/en-us/library/system.datetime.month.aspx)

我会选择第二条路

# android - 如何在 Android 中将具有黑色像素的位图转换为另一种颜色？

> ID：10158173
> 
> 赞同：1
> 
> 时间：2012-04-14T23:19:29.163
> 
> 标签：android, colormatrix

我有一个带有一些透明像素的位图，其余部分主要是黑色（一些黑色像素可能有一些半透明像素）。

我需要重新使用这些位图，并希望能够在运行时从这个位图中创建一个遮罩，然后尝试与另一种颜色（如红色、绿色等）的块混合，以便最终结果相同图像但具有红色（并且那些半透明黑色像素变成半透明红色像素的像素）。

我尝试了各种颜色过滤器和 xfermodes，但无法弄清楚。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:51:02.723

如果您不需要高速，您可以通过手动混合像素来使用简单的解决方案。

```
final Bitmap bmp = /* there your bitmap */;

int w = bmp.getWidth();
int h = bmp.getHeight();

for (int x = 0; x < w; x++) {
  for (int y = 0; y < h; y++) {
    int color = bmp.getPixel(x, y);

    // Shift your alpha component value to the red component's.
    color = (color << 24) & 0xFF000000;

    bmp.setPixel(x, y, color);
  }
} 
```

如果您需要更有效的处理，则必须（至少）使用[getPixels](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)方法，或者更可取的是本机处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T09:46:05.700

```
 public void changeColor(Bitmap myBitmap) {

        int [] allpixels = new int [myBitmap.getHeight()*myBitmap.getWidth()];

        myBitmap.getPixels(allpixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(), myBitmap.getHeight());

        for(int i = 0; i < allpixels.length; i++)
        {
            if(allpixels[i] == Color.BLACK)
            {
                allpixels[i] = Color.RED;
            }
        }

        myBitmap.setPixels(allpixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(), myBitmap.getHeight());

    } 
```

# mysql - Mysql cluster 7.2.2 忽略设置和 TABLE IS FULL 错误

> ID：10158177
> 
> 赞同：0
> 
> 时间：2012-04-14T23:20:37.173
> 
> 标签：mysql, config, cluster-computing

这是我的`my.cnf`设置

```
[mysqld]
ndbcluster
#engine_condition_pushdown=0
optimizer_switch=engine_condition_pushdown=off

# IP address of the cluster management node
ndb-connectstring=127.0.0.1

[mysql_cluster]
# IP address of the cluster management node
ndb-connectstring=127.0.0.1

[ndbd default]
NoOfReplicas= 2
MaxNoOfConcurrentOperations= 10000
DataMemory= 320M
IndexMemory= 96M
TimeBetweenWatchDogCheck= 30000
DataDir= /usr/local/mysql-cluster-gpl-7.2.2-osx10.6-x86_64/mysql-cluster
MaxNoOfOrderedIndexes= 512

[MYSQLD DEFAULT]

[NDB_MGMD DEFAULT]

[TCP DEFAULT]

# Section for the cluster management node
[NDB_MGMD]
# IP address of the management node (this system)
id=1
HostName=127.0.0.1

# Section for the storage nodes
[NDBD]
# IP address of the first storage node
id=2
HostName=127.0.0.1
DataDir= /usr/local/mysql-cluster-gpl-7.2.2-osx10.6-x86_64/mysql-cluster

[NDBD]
# IP address of the second storage node
id=3
HostName=127.0.0.1
DataDir= /usr/local/mysql-cluster-gpl-7.2.2-osx10.6-x86_64/mysql-cluster2

# one [MYSQLD] per storage node
[MYSQLD]
[MYSQLD] 
```

我将数据内存设置为 320M，当我运行脚本来填充表时，它会因错误“表 blabla 已满”而停止。我尝试`ndb_mgmd`使用`-f`选项和配置文件的路径运行。`config.ini`我将此文件复制到具有名称但没有结果的 mysql-cluster 文件夹中。

我有：

```
ndb_mgm> ALL REPORT MEMORYUSAGE
Node 2: Data usage is 100%(2560 32K pages of total 2560)
Node 2: Index usage is 74%(1741 8K pages of total 2336)
Node 3: Data usage is 100%(2560 32K pages of total 2560)
Node 3: Index usage is 74%(1741 8K pages of total 2336) 
```

2560*32K=80M。80M 就像默认的 mysql 集群设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:36:09.973

我解决了我的问题。我需要将此配置划分为两个配置文件，一个用于 mysql 服务器并将其放在 data/my.cnf 中：

```
[mysqld]
ndbcluster
#engine_condition_pushdown=0
optimizer_switch=engine_condition_pushdown=off

# IP address of the cluster management node
ndb-connectstring=127.0.0.1

[mysql_cluster]
# IP address of the cluster management node
ndb-connectstring=127.0.0.1 
```

/mysql_cluster/config.ini 文件夹中的集群包的第二个文件：

```
[ndbd default]
NoOfReplicas= 2
MaxNoOfConcurrentOperations= 10000
DataMemory= 320M
IndexMemory= 96M
TimeBetweenWatchDogCheck= 30000
DataDir= /usr/local/mysql-cluster-gpl-7.2.2-osx10.6-x86_64/mysql-cluster
MaxNoOfOrderedIndexes= 512

[MYSQLD DEFAULT]

[NDB_MGMD DEFAULT]

[TCP DEFAULT]

# Section for the cluster management node
[NDB_MGMD]
# IP address of the management node (this system)
id=1
HostName=127.0.0.1

# Section for the storage nodes
[NDBD]
# IP address of the first storage node
id=2
HostName=127.0.0.1
DataDir= /usr/local/mysql-cluster-gpl-7.2.2-osx10.6-x86_64/mysql-cluster

[NDBD]
# IP address of the second storage node
id=3
HostName=127.0.0.1
DataDir= /usr/local/mysql-cluster-gpl-7.2.2-osx10.6-x86_64/mysql-cluster2

# one [MYSQLD] per storage node
[MYSQLD]
[MYSQLD] 
```

# apache - .htaccess 是否应该在源代码控制中进行版本控制？

> ID：10158178
> 
> 赞同：4
> 
> 时间：2012-04-14T23:20:41.293
> 
> 标签：apache, version-control

如果您遵循应用程序在退出版本控制时应“开箱即用”运行的原则，`.htaccess`则应包括在内。不过，这感觉有些不对劲，因为它并没有真正成为应用程序的*一部分*。我很矛盾，谁能让我放心？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T23:25:39.293

我通常会在源代码控制中保留应用程序的 .htaccess，其中包括应用程序运行所需的 Apache 配置，即重写不特定于运行它的服务器的规则、对环境变量的访问等。

以这种方式考虑 - 如果 .htaccess 文件包含应用程序使用的重写规则，则这些规则有效地作为应用程序路由的一部分，因此*是*应用程序的一部分。

如果您正在打包一个应用程序以供其他人下载和使用，您可能应该包含一个骨架 .htaccess 文件，其中包含使应用程序运行所需的规则。如果您的应用程序只打算在您自己的服务器上运行，并且您将所有相关的 Apache 配置保存在 .htaccess 中，而不是 VirtualHost 配置，我会说它确实属于源代码控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T12:38:52.540

这对我们来说也是一个常见问题，我知道你所说的“感觉不对”是什么意思。

但是，对我来说，问题不在于感觉 .htaccess 不是*应用程序的一部分*，因为它的某些部分显然是。问题更多在于该文件将特定于应用程序的代码（路由等）与特定于安装的内容（本地 URL 重写、身份验证/访问规则等）混合在一起。理想情况下，您将版本控制特定于应用程序的规则，而不是特定于安装的规则，但这当然是不可能的，因为两者都需要在同一个文件中。

我可以想到四种管理方法。最佳方案将取决于您的特定情况（并且可能因项目而异）：

1.  如果您控制部署，Michael 的第二个建议是最佳选择。即，将特定于应用程序的代码保留在 .htaccess 文件中，受版本控制，并将任何特定于安装的代码保留在主 Apache VirtualHost 指令中。这提供了完全分离，但如果您无法直接访问主要 Apache 配置或分发给第三方，则不是一个可行的解决方案。
2.  版本控制 .htaccess 文件中特定于应用程序的元素，使用清晰的注释标记，例如`### FOO APPLICATION SETTINGS - DO NOT CHANGE ###`，`### ADD ANY ADDITIONAL LOCAL CONFIG BELOW THIS LINE ####`并且不要对安装特定的任何内容进行版本控制。如果规则足够简单而不会真正引起冲突，这很好，但如果您的骨架文件需要用户修改现有行，则这不是很好，因为您可能最终会遇到合并冲突。如果部署是受版本控制的（至少对于开发版本来说可能是这种情况），它还会冒不必要的编辑进入您的存储库的风险，并且如果不是这样，它会冒本地更改被升级吹走的风险（例如公共zipfile 分发）。
3.  我们决定作为一个很好的替代方案是对一个名为的文件进行版本控制，该文件`.htaccess.sample`可以包含特定于应用程序的规则和（在相关时）用户可能会发现有用的安装特定规则的建议。无论是否使用版本控制，这都易于维护和部署，但会使升级稍微困难一些，因为用户需要手动将任何更改合并到他们的本地`.htaccess`文件中。在我们的案例中，升级总是由开发人员完成，因此这不是一个大问题，假设有适当的差异工具可用。
4.  与 #3 相同，除了您还提供了一个脚本来自动应用任何修改。设置更多的工作，不一定需要更多的维护工作，这取决于你如何实现它（例如，如果它只是替换一些标记之间的代码块），如果你要分发给广泛的用户群，可能值得。例如，这就是 Wordpress 所做的。

# linux - 在 CSV 中用 sed 替换空格（使用 w/postgres 复制命令）

> ID：10158179
> 
> 赞同：0
> 
> 时间：2012-04-14T23:20:45.637
> 
> 标签：linux, postgresql, sed

我在 bash 中遍历一组 CSV 文件，运行：

```
iconv --from-code=ISO-8859-1 --to-code=UTF-8 ${FILE} | \
    sed -e 's/\"//g' | \
    sed -e 's/, /,/g' \
    > ${FILE}.utf8 
```

运行`iconv`以修复 UTF-8 字符，然后第一次`sed`调用删除双引号字符，最后一次`sed`调用应该删除逗号周围的前导和尾随空格。

但是，我在保存的文件中仍然有这样的一行：

```
FALSE,,,, 2.40,, 
```

postgres 中的`COPY`命令有点愚蠢，因此它认为“2.40”不是数值的有效语法。

我在处理 CSV 文件时哪里出错了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:29:25.163

可能正在发生的事情是您有多个空格或多个字段具有空格，因此您会在包含多个空格的行上看到单个成功的尾随空白替换的结果。

顺便说一句，您可以为 sed 提供多个 -e 参数。尝试这个：

```
... | sed -e 's/"//g' -e 's/ *, */,/g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:23:23.687

您的第二个`sed`仅删除尾随空格（实际上，只有一个尾随空格）。这里应该删除前导空格？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:23:51.483

准备 CSV 以完全适合数据类型的一般**替代方法**`text`是将所有数据导入（到带有`text`列的临时表中）并让 PostgreSQL 类型强制机制自动完成一些工作。

`text`特别是，当 a转换为数字类型或日期/时间类型时，会自动修剪前导和尾随空格。尝试：

```
SELECT '   234 '::text::int;
SELECT '    23.4 '::text::float8; -- incl. a leading tab
SELECT '    2012-12-1    '::text::date; -- incl. a leading & trailing tab 
```

因此，如果您有这样的表：

```
CREATE TABLE foo
( id    integer,
  col_a date,
  col_b double precision
); 
```

你可以：

```
CREATE TEMP TABLE foo_tmp  -- dropped automatically at end of session
( id    **text**,
  col_a **text**,
  col_b **text**
);
```

```
COPY foo_tmp FROM '/path/to/foo_file.csv';
INSERT INTO foo
SELECT id::int
      ,col_a::date
      ,col_b::double precision
FROM   foo_tmp; 
```

或者根据需要使用[任何其他 Postgres 函数](http://www.postgresql.org/docs/current/interactive/functions-string.html)来准备字符串。

您只需要一个有效的 CSV 格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T05:34:13.333

做一个这样的构造来删除空格：

```
sed -e ':a; s/, /,/g; ta'
sed -e 's/,[ ][ ]*/,/g' 
```

第一个将递归执行更新，直到找不到匹配的组合。第二个将搜索空间，然后是一组可能的空间。

并且没有必要删除`"`，因为默认情况下 PostgreSQL 在使用时会理解它们[`COPY ... WITH (FORMAT CSV)`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)

# fuelphp - 类别子类别递归

> ID：10158184
> 
> 赞同：0
> 
> 时间：2012-04-14T23:21:39.957
> 
> 标签：fuelphp

我希望如果有人可以通过使用 ORM 或 CRUD 创建类别和子类别来帮助我提供 Fuelphp 无限嵌套的示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:36:07.310

您可以使用我的[嵌套集包](https://github.com/fuel-packages/fuel-nestedsets)在表中创建嵌套集树结构。

# java - ondblclick 函数取消 onclick

> ID：10158185
> 
> 赞同：-1
> 
> 时间：2012-04-14T23:21:56.527
> 
> 标签：java, html, onclick

我对java和html一无所知。我尝试搜索但没有让它工作。我找到了一个适用于 Windows 7 的回收站小工具，我希望它在何时打开回收站文件夹`onclick`并在何时清空`ondplclick`。基本上 bin.html`onclick="openBin();" ondblclick="emptyBin();`调用 bin.js 中的这两个函数

```
function openBin() {
  System.Shell.execute('shell:RecycleBinFolder');
}

function emptyBin() {
    System.Shell.RecycleBin.emptyAll();
} 
```

我希望当双击该小工具时，它会取消`openBin()` 我尝试过`Timeout`、阅读过`queue`但`Eventhandler`无法使其工作的内容。正如我所说，我不是编码员。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:29:58.450

首先，这是如此突兀的 javascript :(。让我伤心的熊猫。

Onclick 事件将始终首先触发，因此您必须重新考虑要做什么。

如果您想不显示打开的 bin 窗口，可以考虑在 onclick 中执行不同的逻辑。我建议 onclick -> opens bin ， onclick with shift -> 清空他。

这只需要添加如果按下 alt 键代码:)

您可以在此处阅读更多关于 javascript 中的键码的信息[http://www.javascriptkit.com/javatutors/javascriptkey2.shtml](http://www.javascriptkit.com/javatutors/javascriptkey2.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:27:03.933

如果有人感兴趣，这是我解决它的方法：

```
function openBin() {
t = true;
if (t) {
setTimeout("if (t) {System.Shell.execute('shell:RecycleBinFolder')}", 400);
}}

function emptyBin() {
t = false;
System.Shell.RecycleBin.emptyAll();
clearTimeout();
} 
```

# javascript - 如何在文本区域的末尾设置光标？

> ID：10158190
> 
> 赞同：20
> 
> 时间：2012-04-14T23:22:28.467
> 
> 标签：javascript, html, firefox, textarea

有没有办法将光标设置在`textarea`元素的末尾？我使用的是 Firefox 3.6，我不需要它在 IE 或 Chrome 中工作。似乎这里的所有相关答案都使用了`onfocus()`事件，这似乎没用，因为当用户单击`textarea`元素中的任何位置时，Firefox 会将光标位置设置到那里。我有一个长文本要显示在 a 中`textarea`，以便它显示最后一部分（使其更容易在最后添加一些内容）。

没有框架或库。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-14T23:39:12.633

可能有很多方法，例如

```
element.focus();
element.setSelectionRange(element.value.length,element.value.length); 
```

[**http://jsfiddle.net/doktormolle/GSwfW/**](http://jsfiddle.net/doktormolle/GSwfW/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T23:48:02.110

自从我没有先查看 jQuery 解决方案就使用 javascript 已经有很长时间了......

话虽如此，使用 javascript 的最佳方法是在 textarea 聚焦时获取当前在 textarea 中的值，并将 textarea 的值设置为获取的值。这在 jQuery 中总是有效的：

```
$('textarea').focus(function() {
    var theVal = $(this).val();
    $(this).val(theVal);
}); 
```

在纯 JavaScript 中：

```
var theArea = document.getElementByName('[textareaname]');

theArea.onFocus = function(){
    var theVal = theArea.value;
    theArea.value = theVal;
} 
```

我可能是错的。有点生锈。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-07-05T09:58:33.763

selectionStart 足以设置初始光标点。

```
 element.focus();
    element.selectionStart = element.value.length; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-14T23:51:41.207

这是一个功能

```
function moveCaretToEnd(el) {
    if (typeof el.selectionStart == "number") {
        el.selectionStart = el.selectionEnd = el.value.length;
    } else if (typeof el.createTextRange != "undefined") {
        el.focus();
        var range = el.createTextRange();
        range.collapse(false);
        range.select();
    }
} 
```

[[演示]](http://jsfiddle.net/ghAB9/6/) [[来源]](https://stackoverflow.com/a/6003829/295264)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-14T23:28:32.570

```
var t = /* get textbox element */ ;

t.onfocus = function () { 
    t.scrollTop = t.scrollHeight; 
    setTimeout(function(){ 
      t.select(); 
      t.selectionStart = t.selectionEnd; 
    }, 10); 
} 
```

诀窍是在浏览器处理完焦点事件*后*使用 setTimeout 更改文本插入（克拉）位置；否则位置将由我们的脚本设置，然后立即由浏览器设置为其他位置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-15T05:39:23.767

```
textarea.focus()
textarea.value+=' ';//adds a space at the end, scrolls it into view 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-12T13:26:23.997

```
(this.jQuery || this.Zepto).fn.focusEnd = function () {
    return this.each(function () {
        var val = this.value;
        this.focus();
        this.value = '';
        this.value = val;
    });
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-10T17:47:16.257

@Dr.Molle 答案是正确的。只是为了增强，U 可以与 prevent-default 结合使用。

[http://jsfiddle.net/70des6y2/](http://jsfiddle.net/70des6y2/)

样本：

```
document.getElementById("textarea").addEventListener("mousedown", e => {
  e.preventDefault();
  moveToEnd(e.target);
});
function moveToEnd(element) {
  element.focus();
  element.setSelectionRange(element.value.length, element.value.length);
} 
```

# iframe - MVC 4 iframe 嵌入在显示移动视图的桌面页面中

> ID：10158195
> 
> 赞同：1
> 
> 时间：2012-04-14T23:23:21.587
> 
> 标签：iframe, redirect, routing, asp.net-mvc-4

我使用 Index.cshtml 和 Index.mobile.cshtml。我的 Index.cshtml 是一个包含 iframe 的移动应用登录页面，用于现场演示移动 Web 应用。Index.mobile.cshtml 是移动网络应用程序本身。

问题是，iframe 不断加载桌面版本本身。据我所知，我无法将 iframe 的用户代理配置为移动类型。它应该可以通过一些路由来解决，但我不知道怎么做！？

**更新**：

我想我找到了解决办法。在 iFrame src 中，我引入了一个 URL 参数 forceMobile=true ：

```
<iframe id="rtnApp" src="/demohcid?forceMobile=true"></iframe> 
```

现在在 HomeController 中，我检查此 URL 参数，如果是 forceMobile，则返回移动视图，即使代理是桌面浏览器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        if (Request.Params["forceMobile"] != null) 
            return View("Index.mobile");
        else {
            return View();
        }
    } 
```

# c++ - cin.getline() 等效于从函数中获取 char 时。

> ID：10158198
> 
> 赞同：0
> 
> 时间：2012-04-14T23:24:01.497
> 
> 标签：c++, arrays, char

据我了解 cin.getLine 得到第一个字符（我认为它是一个指针），然后得到它的长度。我在 cin 为 char 时使用过它。我有一个函数返回指向数组中第一个字符的指针。是否有等效的方法可以将数组的其余部分转换为我可以使用整个数组的字符。我在下面解释了我正在尝试做的事情。该功能工作正常，但如果有帮助，我可以发布该功能。

```
cmd_str[0]=infile();// get the pointer from a function
cout<<"pp1>";
cout<< "test1"<<endl;
//  cin.getline(cmd_str,500);something like this with the array from the function                                                   
cout<<cmd_str<<endl; this would print out the entire array
cout<<"test2"<<endl;
length=0;
length= shell(cmd_str);// so I could pass it to this function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:33:49.867

您可以使用字符串流：

```
char const * p = get_data();  // assume null-terminated

std::istringstream iss(std::string(p));

for (std::string line; std::getline(iss, line); )
{
    // process "line"
} 
```

如果字符数组不是以 null 结尾但具有给定的 size `N`，请`std::string(p, N)`改为说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:30:30.403

首先，如果`cmd_str`是一个数组`char`并`infile`返回一个指向字符串的指针，那么第一个赋值会给你一个错误。它尝试将指针分配给单个字符。

你似乎想要的是`strncpy`：

```
strncpy(cmd_str, infile() ARRAY_LENGTH - 1);
cmd_str[ARRAY_LENGTH - 1] = '\0'; 
```

我确保将字符串终止符添加到数组中，因为如果`strncpy`复制所有`ARRAY_LENGTH - 1`字符，它将*不会*附加终止符。

如果`cmd_str`是一个正确的数组（即声明为`char cmd_str[ARRAY_LENGTH];`），那么您可以在我的示例中使用`sizeof(cmd_str) - 1`而不是。`ARRAY_LENGTH - 1`但是，如果`cmd_str`作为指向函数的指针传递，这将不起作用。

# php - What does the `close()` method of the Mysqli Statement?

> ID：10158202
> 
> 赞同：8
> 
> 时间：2012-04-14T23:25:01.807
> 
> 标签：php, mysqli

Can someone tell me, when you for example update, insert, delete.. should you then close it like [`mysqli_stmt::close();`](http://www.php.net/mysqli_stmt.close) ? I checked PHP manual and don't understand what `close()` actually does.

Example:

```
$stmt = $dbh->prepare("SELECT `user_email` FROM `users` WHERE `user_email` = ? LIMIT 1");
$stmt->execute(array($email));
$stmt->close(); 
```

Next part of my question is, if as an example i had multiple update queries in a **transaction** after every `execute()` for each query i am executing within the **transaction** should i close them individually ? ... because it's a transaction not sure i need to use `$stmt->close();` after each execute(); or just use one `$stmt->close();` after all of them ?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T23:41:43.463

There is no close() method for PDO, instead to close a connection you just set the database variable to null - which will close the connection.

```
$stmt = null; 
```

To answer your second question, you only need to close the connection once. After you've executed all the queries you need to do on the database.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T23:37:14.327

It seems like you are using mysqli close method. The $stmt->close() methode simply just closes closes the the previous opened database connect ([http://www.php.net/manual/en/mysqli.close.php](http://www.php.net/manual/en/mysqli.close.php)).

**EDIT:** If it's PDO you are using, I simply do not understand, why you dont take advantage of the possibility of having named parametres instead of question marks. That is, why a lot of people choose PDO instead of mysqli - you might have a better comprehensive view of the queries/statements.

# java - BufferStrategy 非法状态异常

> ID：10158209
> 
> 赞同：2
> 
> 时间：2012-04-14T23:26:26.800
> 
> 标签：java, awt, illegalstateexception

经过几个小时的尝试解决这个问题，我很难过。我对 Java 有点陌生，可以使用一些帮助。

堆栈跟踪：

```
java.lang.IllegalStateException: Component must have a valid peer
at java.awt.Component$FlipBufferStrategy.createBuffers(Unknown Source)
at java.awt.Component$FlipBufferStrategy.<init>(Unknown Source)
at java.awt.Component$FlipSubRegionBufferStrategy.<init>(Unknown Source)
at java.awt.Component.createBufferStrategy(Unknown Source)
at java.awt.Canvas.createBufferStrategy(Unknown Source)
at java.awt.Component.createBufferStrategy(Unknown Source)
at java.awt.Canvas.createBufferStrategy(Unknown Source)
at com.mime.crystalnova.Display.render(Display.java:148)
at com.mime.crystalnova.Display.run(Display.java:112)
at java.lang.Thread.run(Unknown Source) 
```

错误似乎与这里的这行代码有关：

```
BufferStrategy bs = getBufferStrategy();
if (bs == null) {
    createBufferStrategy(3);
    return;
} 
```

奇怪的是，它在调试时给了我这个错误，然后继续完美运行。通过可运行的 jar 文件启动时它也可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:32:41.113

这可能与您调用时组件不可见有关`createBufferStrategy()`（已经有一段时间了）。稍后尝试调用它。

您的应用程序继续运行的事实可能意味着该组件默认为非缓冲策略。

# html - Blackberry Webwork sdk 错误：无效的应用程序存档 - 资源名称无效

> ID：10158210
> 
> 赞同：1
> 
> 时间：2012-04-14T23:26:27.180
> 
> 标签：html, blackberry-webworks

我正在尝试将我的黑莓应用程序（webwork html5）部署到设备上。

当我从终端运行命令时。

```
./bbwp /Applications/MAMP/htdocs/myapp.zip 
```

我懂了：

[INFO] 解析命令行选项
[INFO] 解析 bbwp.properties
[INFO] 验证应用程序存档
[错误] 无效的应用程序存档 - 资源名称无效（__MACOSX/._config.xml）

我知道 bb webwork sdk 不允许使用 '-' 和 '_' ，所以我重命名了项目中的每个文件以删除那些无效字符。但是我的项目中没有“._config.xml”文件。我有一个 config.xml 文件，它位于项目的根目录。

谢谢你的帮助。

丹尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:37:03.790

最后我解决了这个问题。

就像我之前说的，您必须从所有文件中删除所有字符，例如“-”和“_”。当我在我的 MAC 上将我的 projecto 压缩到 -> myapp.zip 时，它会创建一个名为“__MACOSX”的隐藏文件夹，并且在该文件夹内有很多带有“_”的文件，例如 ._config.xml 。

所以我下载[了 http://www.macupdate.com/app/mac/25497/zipcleaner](http://www.macupdate.com/app/mac/25497/zipcleaner)。该程序从 Finder 创建的 zip 档案中删除 .DS_Store 文件和其他资源信息。

之后，我有一个干净的 .zip，所以我再次编译 .zip：

```
./bbwp /Applications/MAMP/htdocs/myapp.zip 
```

它奏效了！

# php - 根据 ID 添加 CSS 类

> ID：10158211
> 
> 赞同：0
> 
> 时间：2012-04-14T23:26:32.570
> 
> 标签：php, jquery, css, class

我想知道如何使用 jQuery 根据链接中的 ID 将 CSS 类添加到链接中。如果 if 语句为真，我不想将 CSS 类“活动”添加到链接中。并不是说如果声明为真，我不想从链接中的类中删除“pFavorite”，我只想添加活动，比如这个*class="pFavorite active"*我还没有加入 jQuery。我希望我的代码仍然能解释我想要实现的目标。

```
<?php
foreach($statement as $p)
{
    if(array_search($p['id'], explode(",", $_COOKIE['cookie'])))
    {
    ?>
    <script type="text/javascript">
        $("#<?php echo $p['id']; ?>", ".pFavorite").addClass("active");
    </script>
    <a href="#" class="pFavorite" id="<?php echo $p['id']; ?>">IMG HERE</a>
<?php 
    } 
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T23:32:19.890

首先，您的 jQuery 选择器是错误的，您的意思可能类似于

```
$("#<?php echo $p['id']; ?>.pFavorite").addClass("active"); 
```

上面将匹配具有特定 id*和类 pFavorite 的元素，而您的原始选择器将匹配具有类 pFavorite 的所有元素，然后**在其中任何一个中*查找具有指定 id 的元素，没有找到任何东西（因为目标元素*是*拥有该班级的人之一，而不是后代）。

其次，您不需要类选择器，因为您已经在使用 id 选择器并且 id 是唯一的。所以这将进一步简化为

```
$("#<?php echo $p['id']; ?>").addClass("active"); 
```

最后：为什么要在页面加载*后*使用 jQuery 设置类，当您在 PHP 端拥有所需的所有信息时？你可以简单地做

```
if(array_search($p['id'], explode(",", $_COOKIE['cookie']))) {
    // Use htmlspecialchars for all HTML output; you may need to specify
    // additional parameters (see the function documentation)
    printf('<a href="#" class="active pFavorite" id="%s">IMG HERE</a>',
           htmlspecialchars($p['id']));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:37:39.160

为什么不：

```
<?php
foreach($statement as $p) {
    if(array_search($p['id'], explode(",", $_COOKIE['cookie']))) {
        echo('<a href="#" class="pFavorite active" id="' . $p['id'] . '">IMG HERE</a>');
    } 
}
?> 
```

?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-14T23:31:42.410

```
<?php
foreach($statement as $p)
{
    if(array_search($p['id'], explode(",", $_COOKIE['cookie'])))
    {
    ?>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#<?php echo $p['id']; ?>.pFavorite").addClass("active");
        });
    </script>
    <a href="#" class="pFavorite" id="<?php echo $p['id']; ?>">IMG HERE</a>
<?php 
    } 
}
?> 
```

# c - CUDA 反函

> ID：10158212
> 
> 赞同：1
> 
> 时间：2012-04-14T23:26:35.333
> 
> 标签：c, cuda, char, int

我遇到了 CUDA 的问题。我想制作一个小程序来计算字符数组中的字母。

我从文件中读取字母并保存到名为 N 的 int 变量中，读取了多少个字母。之后我malloc。

```
char *b_h, *b_d;
size_t size_char = N * sizeof(char);
b_h = (char *)malloc(size_char); 
```

在 malloc 之后，我再次读取文件并将当前字母分配给 char 数组的元素（它有效）：

```
int j=0;
while(fscanf(file,"%c",&l)!=EOF)
{
    b_h[j]=l;
    j++;
} 
```

之后，我创建了一个 int 变量 (a_h) 作为计数器。

```
int *a_h, *a_d;
size_t size_count = 1*sizeof(int);
a_h = (int *)malloc(size_count); 
```

好的，使用 CUDA：

```
cudaMalloc((void **) &a_d, size_count);
cudaMalloc((void **) &b_d, size_char); 
```

从主机复制到设备：

```
cudaMemcpy(a_d, a_h, size_count, cudaMemcpyHostToDevice);
cudaMemcpy(b_d, b_h, size_char, cudaMemcpyHostToDevice); 
```

设置块并调用 CUDA 函数：

```
int block_size = 4;
int n_blocks = N/block_size + (N%block_size == 0 ? 0:1);
square_array <<< n_blocks, block_size >>> (a_d,b_d,c_d, N); 
```

从函数接收：

```
cudaMemcpy(a_h, a_d, size_count, cudaMemcpyDeviceToHost);
cudaMemcpy(b_h, d_d, size_char, cudaMemcpyDeviceToHost); 
```

并打印计数：

```
printf("\Count: %d\n", a_h[0]); 
```

它不起作用。在 char 数组中，我有一句话： Super testSuper test ; 我正在寻找 'e' 字母，我得到 a_h[0] = 1。问题出在哪里？

CUDA功能：

```
__global__ void square_array(int *a, char *b, int *c, int N)
{
const char* letter = "e";

int idx = blockIdx.x * blockDim.x + threadIdx.x;

if (idx<N) 
{
    if(b[idx] == *letter)
    {
        a[0]++;
    }
}
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:14:09.903

我猜 N 足够小，以至于您的 GPU 能够并行启动所有线程。因此，您为数组中的每个字符启动一个线程。所有同时运行的线程看不到彼此的输出。相反，每个线程读取 a[0] 的值（即 0），并将其增加 1 并存储结果值 (1)。如果这是家庭作业，那将是教授想要传授的基本课程。

当多个线程同时在同一位置存储一个值时，未定义哪个线程将存储其值。在您的情况下，这无关紧要，因为所有存储值的线程都将存储值“1”。

一个典型的解决方案是让每个线程将值 0 或 1 存储在单独的位置（取决于是否存在匹配），然后在单独的步骤中将这些值相加。

您还可以使用原子增加操作。

# f# - deepMacroExpandUntil 发生了什么

> ID：10158221
> 
> 赞同：3
> 
> 时间：2012-04-14T23:27:46.633
> 
> 标签：f#, quotations

FLINQ 和 Quotation Visualizer 示例使用了这个函数，但我在任何地方都找不到它。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T13:39:21.407

该`deepMacroExpandUntil`函数是一个非常简单的实用程序，只做了两件事：

*   `ReflectedDefinition`它用方法的主体替换了所有带有属性的方法调用
*   它减少了 lambda 应用程序，因此`(fun x -> x * x) (1+2)`将成为`(1+2)*(1+2)`

这在编写一些报价处理代码时非常有用，但较新版本的 F# 包含`ExprShape`活动模式，这使得手动编写报价处理变得非常容易。

要实现类似的东西`deepMacroExpandUntil`，你会写这样的东西：

```
open Microsoft.FSharp.Quotations

/// The parameter 'vars' is an immutable map that assigns expressions to variables
/// (as we recursively process the tree, we replace all known variables)
let rec expand vars expr = 
  // First recursively process & replace variables
  let expanded = 
    match expr with
    // If the variable has an assignment, then replace it with the expression
    | ExprShape.ShapeVar v when Map.containsKey v vars -> vars.[v]
    // Apply 'expand' recursively on all sub-expressions
    | ExprShape.ShapeVar v -> Expr.Var v
    | Patterns.Call(body, DerivedPatterns.MethodWithReflectedDefinition meth, args) ->
        let this = match body with Some b -> Expr.Application(meth, b) | _ -> meth
        let res = Expr.Applications(this, [ for a in args -> [a]])
        expand vars res
    | ExprShape.ShapeLambda(v, expr) -> 
        Expr.Lambda(v, expand vars expr)
    | ExprShape.ShapeCombination(o, exprs) ->
        ExprShape.RebuildShapeCombination(o, List.map (expand vars) exprs)
  // After expanding, try reducing the expression - we can replace 'let'
  // expressions and applications where the first argument is lambda
  match expanded with
  | Patterns.Application(ExprShape.ShapeLambda(v, body), assign)
  | Patterns.Let(v, assign, body) ->
      expand (Map.add v (expand vars assign) vars) body
  | _ -> expanded 
```

以下示例显示了函数的两个方面 - 它用函数`foo`体替换函数，然后替换应用程序，因此您最终得到`(10 + 2) * (10 + 2)`：

```
[<ReflectedDefinition>]
let foo a = a * a

expand Map.empty <@ foo (10 + 2) @> 
```

**编辑：**我还将示例发布到[F# snippets](http://fssnip.net/bx)。

# python - 通过Python / Pygame中的迭代形状的不同颜色？

> ID：10158224
> 
> 赞同：3
> 
> 时间：2012-04-14T23:28:33.450
> 
> 标签：python, iteration, pygame

我是 stackoverflow 的新手，但希望能从更高级的程序员那里得到一点见解。下学期我将转专业为计算机科学，并正在参加一个入门课程，学习一些初学者的 Python 编程。我已经完成了下面的程序（任务是通过填写一些教授的代码来制作一个在窗口表面绘制椭圆的程序，一点也不差）但我想添加一些额外的东西：你可以看，我将椭圆的颜色设置为随机的，但在程序完全重新启动之前它保持不变，即所有椭圆都是程序长度的特定颜色。使用按原样编写的代码，我想不出一种方法来改变每个椭圆的颜色。请记住，这一切都是为了好玩，但如果有人 感觉特别有帮助或有创意，我很想知道你要说什么。让我知道我是否可以解释任何事情。谢谢！

* * *

```
import pygame, random, sys

WINDOWWIDTH = 700
WINDOWHEIGHT = 700
BACKGROUNDCOLOR = (150,160,100)
#A different color every run
OVAL_COLOR = (random.randint (0,255),random.randint (0,255),
                    random.randint (0,255))

pygame.init()
windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))
pygame.display.set_caption("Mobile Ovals")

#The draw variable is used later to indicate the mouse is still pressed
ovals = []
completedOvals = []
finished = False
draw = False
startXY = (-1, -1)

while not finished:
    for event in pygame.event.get():
        if event.type == pygame.QUIT or (event.type == pygame.KEYUP and
                    event.key == pygame.K_ESCAPE):
            finished = True

        elif event.type == pygame.KEYDOWN:
            pressed = pygame.key.get_pressed()
            if pressed[pygame.K_F4] and (pressed[pygame.K_LALT] or
                        pressed[pygame.K_RALT]):
                finished  = True

        elif event.type == pygame.MOUSEBUTTONDOWN:
            startXY = event.pos
            draw = True

        elif event.type == pygame.MOUSEBUTTONUP:
            draw = False
            for oval in ovals:
                completedOvals.append (oval)

        if draw == True:
            del ovals [:]

            #The above function ensures only one oval is onscreen at any given time
            endXY = event.pos
            width = (abs(endXY[0]-startXY[0]))
            height = (abs(endXY[1]-startXY[1]))

            #The code below allows the user to drag any direction
            if endXY[0] < startXY[0]:
                left = endXY[0]
            else:
                left = startXY[0]
            if endXY[1] < startXY[1]:
                top = endXY[1]
            else:
                top = startXY[1]

            ovals.append (pygame.Rect (left, top, width, height))

            windowSurface.fill(BACKGROUNDCOLOR)

            for oval in ovals:
                pygame.draw.ellipse(windowSurface, OVAL_COLOR, oval)

            for completedOval in completedOvals:
                pygame.draw.ellipse(windowSurface, OVAL_COLOR, completedOval)

            pygame.display.update()

pygame.quit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:32:42.023

你的问题很简单。你设置`OVAL_COLOR`一次。但是每次引用变量`OVAL_COLOR`时，都不是在创建新的随机颜色，而是在重新使用创建变量时随机生成的 RGB 颜色。

现在，您的程序的结构方式是，您维护一个所有完整椭圆的列表，每次将`draw`变量设置为 true 时您都重新绘制这些椭圆。如果将`OVAL_COLOR`变量放在 for 循环中，每次鼠标移动都会更新颜色，改变正在绘制的椭圆的颜色，以及重新绘制的所有旧椭圆的颜色。

获得新的随机椭圆颜色的解决方案是`OVAL_COLOR`在鼠标按钮按下时设置变量。这样，当您拖动鼠标调整椭圆时，椭圆颜色不会改变。但是，鉴于程序的当前结构，您需要保存分配给已完成椭圆的椭圆颜色，否则每次椭圆颜色都会发生变化。

* * *

当按下鼠标按钮时，我们想要一个新的随机颜色为我们的圆圈。生成一个随机值，每次重新绘制圆时都会使用该值。

```
 elif event.type == pygame.MOUSEBUTTONDOWN:
        startXY = event.pos
        OVAL_COLOR = (random.randint (0,255),random.randint (0,255),
                            random.randint (0,255))
        draw = True 
```

释放鼠标按钮时，保存椭圆的坐标*以及绘制它的颜色*。

```
 elif event.type == pygame.MOUSEBUTTONUP:
        draw = False
        # print len(ovals) # (always ==1)
        completedOvals.append ((ovals[-1], OVAL_COLOR)) 
```

当我们遍历这些完成的椭圆时，每次都用相同的颜色绘制它们。

```
 for (completedOval, color) in completedOvals:
            pygame.draw.ellipse(windowSurface, color, completedOval) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:54:44.537

创建一个简单的`Oval()`类，其中包含它的颜色和大小。

```
import pygame
from pygame.locals import * 

class Oval(object):
    """handle, and draw basic ovals. stores Rect() and Color()"""
    def __init__(self, startXY, endXY):
        self.color = Color(random.randint(0,255), random.randint(0,255), random.randint(0,255))
        self.rect = Rect(0,0,1,1)
        self.coord_to_oval(startXY, endXY)

    def draw(self):
        pygame.draw.ellipse(windowSurface, self.color, self.rect)

    def coord_to_oval(self, startXY, endXY):
        width = (abs(endXY[0]-startXY[0]))
        height = (abs(endXY[1]-startXY[1]))

        #The code below allows the user to drag any direction
        if endXY[0] < startXY[0]:
            left = endXY[0]
        else:
            left = startXY[0]
        if endXY[1] < startXY[1]:
            top = endXY[1]
        else:
            top = startXY[1]

        self.rect = Rect(left, top, width, height)

# main loop
while not finished:
    for event in pygame.event.get():
       # events, and creation:
       # ... your other events here ...

       elif event.type == MOUSEBUTTONDOWN:
            startXY = event.pos
            draw = True

        elif event.type ==MOUSEBUTTONUP:
            # on mouseup, create instance.
            endXY = event.pos
            oval_new = Oval(startXY, endXY)
            completedOvals.append(oval_new)

        # draw them:
        for oval in ovals:
                oval.draw()
        for oval in completedOvals:
                oval.draw() 
```

我大多遗漏了你未完成的椭圆形。是在点击之前显示尺寸吗？

# objective-c - 插入另一个数据库仅插入 1 条记录

> ID：10158225
> 
> 赞同：0
> 
> 时间：2012-04-14T23:28:52.623
> 
> 标签：objective-c, sql, sqlite

我正在尝试从一个表中获取数据并将其移动到另一个表中。首先，我从 db_data 数据库的 Items 表中选择所有记录。然后对于该表中的每条记录，它应该将其插入到 db_information 数据库中的 Items 表中。我只将一条记录写入 db_information 数据库中的 Items 表。我在 db_data 数据库的 Items 表中有 8 条记录。那么为什么它不插入我所有的记录呢？

```
strSQL = @"SELECT GID FROM Items";
chrStmt = [strSQL UTF8String];
if(sqlite3_prepare_v2(db_data, chrStmt, -1, &cmpStmt, NULL) == SQLITE_OK){
    while(sqlite3_step(cmpStmt) == SQLITE_ROW){
        char *val = (char *)sqlite3_column_text(cmpStmt, 0);
        NSString *strVal = [NSString stringWithUTF8String:val];
        strSQL = [NSString stringWithFormat:@"INSERT INTO Items (GID) VALUES ('%@')", strVal];
        chrStmt = [strSQL UTF8String];
        if(sqlite3_prepare_v2(db_information, chrStmt, -1, &cmpStmt, NULL) == SQLITE_OK){
            sqlite3_step(cmpStmt);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:54:42.580

我认为也许你错误地重用了你的变量`strSQL`，`chrStmt`尤其是`cmpStmt`。这在`while`循环条件和主体中都使用。

尝试为其他数据库使用单独的变量。

# c++ - waveOutWrite 与 ASIO 兼容吗？

> ID：10158229
> 
> 赞同：0
> 
> 时间：2012-04-14T23:29:44.043
> 
> 标签：c++, signal-processing, wav, multimedia, asio

我正在编写一个使用低延迟 ASIO 卡获取声音数据的应用程序。低延迟意味着我每批只能得到 128 个样本，采样率为 48k。从 ASIO 卡中，我得到 32 位有符号整数范围内的原始样本。

现在我想听从 ASIO 卡传来的声音，但不是在 ASIO 卡上，而是在 Windows 的默认输出设备上。我正在使用带有 WAVE_FORMAT_PCM 设置的 waveOutWrite，并且具有与 ASIO 输入相同的特性。每次我得到一个新的 128 个样本的长批次时，我都会调用它。现在，因为 Wav 格式不允许 32 位整数样本，我将它们降级为 16 位。

```
HWAVEOUT waveOut;

void startListening(){
    WAVEFORMATEX format;
    format.wFormatTag = WAVE_FORMAT_PCM;
    format.nChannels = 1;
    format.nSamplesPerSec = sampleRate;
    format.nAvgBytesPerSec = sampleRate * 2;
    format.nBlockAlign = 2;
    format.wBitsPerSample = 16;
    format.cbSize = 0;
    MMRESULT result = waveOutOpen(waveOut, WAVE_MAPPER, &format, 0, 0, CALLBACK_NULL);
    if(result != MMSYSERR_NOERROR){
        return;
    }
}

typedef struct{
    short *buffer;
    int length;
    HWAVEOUT waveOut;
} ListenInfo;

void newListeningData(void *buffer, int length){
    ListenInfo *listenInfo = new ListenInfo();
    listenInfo->buffer = new short[length];
    listenInfo->length = length;
    listenInfo->waveOut = *waveOut;
    if(bitrate == 32){
        int *bufferInt = (int *)buffer;
        for(int i = 0; i < length; i++){
            listenInfo->buffer[i] = (bufferInt[i]);
        }
        CreateThread(NULL, 0, &(listen), listenInfo, 0, NULL);
    }
    else if(bitrate == 16){
         memcpy(listenInfo->buffer, (short *)buffer, length * 2);
         CreateThread(NULL, 0, &(listen), listenInfo, 0, NULL);
    }
    else{
        printf("%d: Bitrate is not 16 or 32!\n", index);
    }
}

DWORD WINAPI listen(__in  LPVOID lpParameter){
    ListenInfo *info = (ListenInfo *)lpParameter;
    WAVEHDR header;
    memset(&header, 0, sizeof(WAVEHDR));
    header.dwBufferLength = info->length;
    header.lpData = (char *)(info->buffer);
    MMRESULT result = waveOutPrepareHeader(info->waveOut, &header, sizeof(WAVEHDR));
    result = waveOutWrite(info->waveOut, &header, sizeof(WAVEHDR));
    while(waveOutUnprepareHeader(info->waveOut, &header, sizeof(WAVEHDR)) == WAVERR_STILLPLAYING){
        Sleep(10);
    }
    delete[] info->buffer;
    delete info;
    return 0;
} 
```

问题是我只能听到严重的削波和吱吱声。声音扭曲得面目全非。我知道这不是同步错误，因为我也将样本保存到具有相同特征的 wav 文件中，并且声音以相同的方式失真。

如何将签名的 32 位样本转换为 waveOutWrite 可以播放的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:33:34.150

问题是由于我使用的比特率与我被认为使用的不同。当我用正确的值修改 WAVEFORMATEX 时，它起作用了！

# javascript - 重构 javascript 事件处理程序 - 这是合理的做法吗？

> ID：10158234
> 
> 赞同：0
> 
> 时间：2012-04-14T23:30:34.197
> 
> 标签：javascript, jquery

我继承了一个相对较大的 javascript 应用程序（约 3k 行代码），只是做兼职 javascript。我想将所有 jQuery 事件处理程序放入一个更健全的组织中。我在想这样的事情：

前：

```
$('#click-here').click(function(){
  //a bunch of dom manipulations and with 30 of them makes the app fairly convoluted
}); 
```

后：

```
function result_click(){
  var global_id=$(this).data('global-id');
  alert('here are the results of clicking: ' + global_id);
}

$(document).ready(function(){
  $('#click-here').on('click',result_click);
});
</script>
<div id='click-here' data-global-id='23'>click HERE!</div> 
```

这将是一个相当容易的重构，并且似乎可以更好地构建它。事件处理部分似乎是最失控的。这是一个合理的方法吗？一旦达到这一点，将它变成一个backbone.js 应用程序似乎相当容易。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:24:22.510

是的，最好预先定义函数，然后将函数的引用传递给 click 事件。

# java - Java 字符串在 SQL 中被错误解释

> ID：10158235
> 
> 赞同：0
> 
> 时间：2012-04-14T23:30:45.180
> 
> 标签：java, sql, string, sql-injection

可能有一个字符串[]；该数组在运行时动态存储数据库表列的名称。程序在运行时了解可能的大小。现在把它放在sql查询中。我使用for循环来连接字符串

```
for(int k=0;k<likely.length;k++)
    {
        temp1="\"+likely["+k+"]+\"='Likely' AND ";
        temp=temp.concat(temp1);                
    } 
```

如果大小为 3，则最终温度将如下所示

```
temp = " "+likely[0]+"='Likely' AND "+
    likely[1]+"='Likely' AND "+
    likely[2]+"='Likely' AND " 
```

现在我将sql查询制定为

```
sql ="SELECT * FROM PUNE WHERE"+temp+"Arts_And_Museum='Yes'"; 
```

但期间

```
ps = con.prepareStatement(sql); 
```

该语句的编译方式如下

```
SELECT * FROM PUNE 
WHERE [+likely[0]+]='Likely' 
AND [+likely[1]+]='Likely' 
AND [+likely[2]+]='Likely' AND Arts_And_Museum='Yes' 
```

经过深入调查，我得出结论，它将“”解释为[或]交替..

结果我得到一个错误我应该如何解决这个问题？

我运行一个 for 循环并准备一个字符串我正在尝试编写一个 sql 语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:55:37.383

这就是在处理 SQL 查询时应该使用参数化输入的原因。

```
// conn refers to your database connection
PreparedStatement stmnt = null;
ResultSet rs = null;
try {
    stmnt = conn.prepareStatement("SELECT * FROM tbl WHERE col > '?'");
    stmnt.setInt(1, 300); //set first parameter to 300
    rs = stmnt.executeQuery();
} catch(Exception ex) {
    System.err.println("Database exception: " + ex.getMessage());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:36:53.737

`\`是保留字符。如果要在字符串中输出引号，请使用`\"`.

所以，这段代码：

```
temp1="\"+likely["+k+"]+\"='Likely' AND "; 
```

将返回此字符串：

`"+likely`**1**`]+"='Likely' AND`

看来您的 sql 正在转换`"`为`[`or`]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T23:47:48.863

该符号`\`用于转义。这样做时，您正在转义所有前面的字符。

每当您要求数组中的项目时，您都可以使用`likely[k]`无需`likey["k"]`

这是你应该如何做的。

```
temp1="\\"+likely[k]+"\\='Likely' AND "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T23:56:16.313

只需更改此行：

```
temp1="\"+likely["+k+"]+\"='Likely' AND "; 
```

对此：

```
temp1="\"" + likely[k] + "\"='Likely' AND "; 
```

# javascript - 为什么我的 array.length 返回这么高的数字？

> ID：10158237
> 
> 赞同：1
> 
> 时间：2012-04-14T23:31:08.917
> 
> 标签：javascript, jquery, arrays, string

出于某种原因，我可以将 JSON 对象推送到我的数组“列表”，但是当我调用它的 .length 时，似乎我得到的是字符数而不是项目数。

**更新：查看解决方案的答案。我的脚本没有返回*字符*，它呈指数级循环。**

```
$.getJSON('[omitted].php?callback=?',function(d,item){
    var list = []
    alert('Length: '+d.length) // d consists of 271 JSON objects, d.length = 271
    for (i=0;i<d.length;i++){
        $.each(d,function(){ // for each JSON object we add...
            list.push({'name':this.name,'href':this.href,'img':this.img})
        })
        if (i==d.length){
        alert('Completed - Length: '+list.length) // list.length = 44711\. Why?
        }
    }
}) 
```

请注意，当我使用 alert(list) 时，我看到：

```
[object,Object][object,Object][object,Object] ... 
```

而不是一个数组：

```
[[object,Object][object,Object][object,Object] ... ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:35:19.620

我相信这...

```
$.each(d,function(){ 
```

应该是这个……

```
$.each(d[i],function(){ 
```

否则，`d`对于`d`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:35:36.650

```
//Loop though d
for (i=0;i<d.length;i++){
    //loop through d 
    $.each(d,function(){ // for each JSON object we add...
        list.push({'name':this.name,'href':this.href,'img':this.img})
    })
    if (i==d.length){
    alert('Completed - Length: '+list.length) // list.length = 44711\. Why?
    }
} 
```

你看到问题了吗？

你基本上是这样做的：

```
var list = [];
for (var i=0;i<d.length;i++){
    for (var j=0;j<d.length;j++){
        list.push( {} );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T23:43:28.600

让我们看看 each 语句的基本结构

```
$.each(mixedVar, function(index, item) {
     //Here index, is not an array but singular item's index, so whenever
     // index.length will be applied it will be taken as a variables, that a list/collection/array
}); 
```

同样，您`d`还返回一个项目的索引，它是一个混合变量，既不是列表也不是数组。

# bash - Bash 参数数组操作问题

> ID：10158238
> 
> 赞同：4
> 
> 时间：2012-04-14T23:31:30.203
> 
> 标签：bash

我的第一个 bash 脚本有问题。我在 for 循环中填充了一个数组，当我尝试从中获取一个项目时，我总是得到第一个元素。

```
for (( i = 0; i < ${#*}; i++ )); do
hash=$(md5 -q ${@:$i:1})
modifiedNames[$i]=${@:$i:1}$hash 
done

echo ${modifiedNames[1]} 
```

例如，如果我这样调用我的脚本： ./script.sh file1 file2 我得到 file1[file1hash]

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:04:55.720

我认为你的循环表现得很有趣，因为它应该从 i = 1 开始并转到 i = ${#*}。${@:0:1} 的扩展给出了 file1，${@:1:1} 也是如此。

尝试`for (( i = 1; i <= ${#*}; i++ ))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:08:00.480

您正在遍历从 0 开始的参数数组，这是命令名称。因此，如果您将脚本称为`./script.sh file1 file2`，则：

```
${@} = array(
   [0] = ./script,
   [1] = file1,
   [2] = file2
) 
```

所以你得到：

```
modifiedNamed = array(
   [0] = md5(./script),
   [1] = md5(file1)
) 
```

您应该将`for`循环索引更改为：

```
for (( i = 1; i <= ${#*}; i++ )); do 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T00:11:12.600

`$@`不是一个真正的数组 - 它是一个外壳“特殊参数”，你需要比其他数组更加小心。

您看到的行为的原因是 `${parameter:length:offset}`语法的确切行为是特殊情况 when `parameter`is ，并且该行为与如果是一个真实数组时`@`您会得到的行为不一致。`@`

这是相关文档（我的**粗体**强调）：

> `${`*参数*`:`*偏移*`:`*长度*`}`
> 
> ...如果*参数*是@，则结果是从*offset*开始的*长度* **位置参数**。如果*parameter*是 @，则结果是从*offset开始的**长度*位置参数。...

 *****位置参数**是, `$0`, `$1`, `$2`...，因此使用这种语法，它的行为就好像`$@`包含脚本名称 ( `$0`) 以及脚本的参数 ( `$1`, `$2`, ...)。这与`"$@"`扩展至不一致`"$1" "$2" ...`，但这就是生活。

您应该能够通过创建一个新数组而不是`$@`直接使用来简化事情（并修复脚本），即

```
new_array=("$@")
for (( i = 0; i < ${#new_array}; i++ )); do
    hash=$(md5 -q ${new_array[@]:$i:1})
    modifiedNames[$i]=${new_array[@]:$i:1}$hash 
done

echo ${modifiedNames[1]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T23:43:44.340

实际上，您*得到*的是第二个元素，但是您的循环在 [0] 和 [1] 中放置了相同的值。

我不确定您要做什么，但是迭代参数然后为数组保留一个单独的计数器可能会更容易。

```
n=0
for i in "$@"; do
  . . .
  n=$(($n + 1))
done 
```***

# jsp - 我应该在没有 servlet 的情况下进行编码吗？

> ID：10158240
> 
> 赞同：-1
> 
> 时间：2012-04-14T23:31:43.377
> 
> 标签：jsp, servlets, jstl, taglib

我正在做一个学习项目。有 JDBC。我知道 JSP 转换为 servlet。我看到我可以避免使用 JSP taglibs 的几乎所有 servlet，EL... 我应该这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:52:37.477

简短的回答：没有。

JSP是给视图用的，视图层要尽量哑。

Servlet（或其他框架）用于 Web 层和业务层之间的编组。

业务层（包括几个流行语）是大部分应用程序逻辑应该存在的地方。

分离使测试和扩展变得更加容易。

# javascript - 按键延迟，如何限制只执行一次函数调用？

> ID：10158245
> 
> 赞同：0
> 
> 时间：2012-04-14T23:32:39.090
> 
> 标签：javascript, forms, timer, keyup

我正在设置一个表单以在 Web 应用程序中查找或创建新的城市记录。我需要城市的文本字段来执行以下操作：

1.  收到文本输入后，显示“微调器”，指示计算机正在处理输入。
2.  在用户停止输入 1 秒后，发送 ajax 请求以检查输入。
3.  响应状态（输入是否有效）。

我几乎可以正常工作，但是我有一个主要问题：我编写的延迟脚本有效，但是在延迟结束后，它会在延迟期间发生的每个 keyup 运行一次函数的其余部分。我希望它只运行一次。这是我正在使用的代码（控制台日志事件稍后将替换为其他函数调用）：

```
$(function() {
  locationSelector.initialize();
});

var locationSelector = {

  initialize: function() {
    locationSelector.bindCityName $('input#city_name')
  },

  city: {
    status: function( status ) {
      console.log( "Status message: " + status );
    },
    error: function(message) {
      console.log("Error message: " + message );
    }
  },

  bindCityName: function(selector) {
    selector.on('keyup', function() {
      locationSelector.city.status('loading');
      var timer = null;
      if(timer) {
        window.clearTimeout(timer);
      }
      timer = window.setTimeout(
        function() { locationSelector.getCity( selector ); },
        1000
      );
    });
  },

  getCity: function(selector) {
    if( selector.val() == "" ) {
      locationSelector.city.error('Cannot be blank.');
    } else {
      console.log("AJAX REQUEST");
    }
  }
}; 
```

Why is the `getCity` function is being run once per keyup, and how can I fix that? Also, to be honest I'm very much a javascript novice, so I would appreciate any other suggestions on how to improve this code scaffold.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:50:26.987

For starters, the variable declaration for `timer` needs to be in a scope that lasts from one key event to the next. As it is, it is a local variable that gets recreated from scratch on every key event so you're getting multiple timers going at once.

Move this:

```
var timer = null; 
```

to the global scope or a higher scope that persists from one key event to the next. You can also define the timer variable as a property of location selector if you want:

```
var locationSelector = {
// other properties defined here
    timer: null
} 
```

Then, you can refer to it as `locationSelector.timer`. I'd also suggest that when your timer actually fires that you should set `locationSelector.timer = null` since a timer is no longer active.

It also looks like you'll need to clear the `'loading'` status once you run the ajax.

And, your timer is set for 2 seconds, but you said you want to wait 1 second for no typing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:51:21.200

It looks like the problem is here:

```
var timer = null;  
if(timer) {
    window.clearTimeout(timer);
} 
```

*Timer* gets set to null, so it never gets cleared. I'd suggest declaring *timer* at the top, above initialize, and then setting it to null only after you clear it, or after it gets executed.

# silverlight - Silverlight 挂在 Prism 的 EventAggregator 订阅方法上

> ID：10158252
> 
> 赞同：0
> 
> 时间：2012-04-14T23:33:19.213
> 
> 标签：silverlight, prism, eventaggregator

我在 Silverlight 中使用 Prism 的事件聚合器，并且在订阅时遇到了困难。当代码点击订阅方法时，它只是挂起，永远不会进入下一行代码。如果我分解代码， _eventAggregator.GetEvent() 似乎返回事件的有效实例。代码肯定挂在“订阅”上。我在这里做错了什么？JobCompletedEvent 在另一个库中声明（这是该库的依赖项）。

```
 public void CallMeWhenTheJobIsDone(Action callback)
    {
        if (_jobIsRunning)
            _eventAggregator.GetEvent<JobCompletedEvent>().Subscribe((e) => callback(), ThreadOption.UIThread); 
        else
            callback();
    }

    public class JobCompletedEvent: Microsoft.Practices.Prism.Events.CompositePresentationEvent<JobCompleted>
{ }
public class JobCompleted
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:50:38.193

1）你为什么使用`if (_jobIsRunning)`？**无论如何**你打电话`callback`。

 **2）棱镜只会给你带来事件 - 根据你的问题 - 棱镜**正在**上升并将事件传递给你 - 所以这不是棱镜问题 - 似乎任何调用的`callback`方法都不起作用。

因此，我们需要了解更多关于调用的内容`callback`和另一件事：在 Prism 情况下，您调用`callback`on `ThreadOption.UIThread`ThreadPool 所以 - 在您调用时仔细检查是否有任何其他线程已经锁定了 UI 线程`callback`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:29:23.600

我的问题是我不应该在订阅中使用匿名方法。棱镜似乎不支持它。有些人称这是 Prism 中的错误，我同意 :) 您不仅不能使用匿名方法，而且该方法必须是公共的。

我在谷歌上找到了一些参考资料

[http://greenicicleblog.com/2010/04/28/prism-event-aggregator-more-leaky-than-it-seems/](http://greenicicleblog.com/2010/04/28/prism-event-aggregator-more-leaky-than-it-seems/)

[从不同的 ViewModel 执行相同的 Prism 命令](https://stackoverflow.com/questions/9610257/execute-same-prism-command-from-different-viewmodels)

我怀疑这是在某个地方的 Prism 文档中，我想我只是被它吹走了。如果我设置 keepSubscriberReferenceAlice ，它可以与私有方法或匿名方法一起使用（现在我想这确实有点道理）。有趣的是，在我的沙盒项目中，我什至无法使用使用私有范围代码的匿名方法进行编译。我的实时项目允许它编译但在运行时失败。

编辑：是的，它位于文档 [http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.40%29.aspx](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.40%29.aspx) 页面下方 2/3 处的大黄色框。**

# android - .NET框架之外的Servicestack客户端，实现？

> ID：10158253
> 
> 赞同：3
> 
> 时间：2012-04-14T23:33:34.733
> 
> 标签：android, asp.net, rest, servicestack

我计划在 .NET 之外使用 ServiceStack 提供的 REST 服务。我打算为 java 和 obj-c 编写客户端。这应该很容易，因为它是一个 REST 服务，但是在文档中它似乎另有建议：

> 但是 ServiceStack 包含两个客户端，它们在异常处理等方面针对 ServiceStack 进行了优化。

我将如何使用 Android 实现 ServiceStack 客户端？只需遵循正常的 REST 消费程序？我应该担心任何异常处理问题吗？

此外，身份验证是否会成为问题（我将使用 BasicAuthentication）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T00:34:36.923

ServiceStack Web 服务提供纯 HTTP/REST API，它们本质上只是通过网络传输的序列化 POCO DTO。您可以控制整个 HTTP 输出，因为 ServiceStack 不会在您的序列化有效负载周围添加任何额外的内容。

### 期望纯序列化 DTO

*自以为是*的性质来自 ServiceClients 假设服务只是返回纯序列化 DTO（即没有额外的 cruft），它只是将其按原样反序列化为指定的响应类型。ServiceClient 的独特之处在于它们为您提供了一个强类型的端到端 API，无需任何代码生成，因为您可以重用定义 Web 服务的 POCO DTO。

### 回退到预定义的路线

在 API 中未指定 a`relativeOrAbsoluteUri`的 API，如[Send<TResponse>(dto)](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/ServiceClientBase.cs#L298)，默认情况下将使用 ServiceStack 自动提供的[预定义路由](http://www.servicestack.net/ServiceStack.Hello/#predefinedroutes)，允许您调用 Web 服务，而无需为它们指定任何自定义路由。您当然可以选择使用您的自定义路由，而不是坚持使用允许您指定要使用的 url的[IRestClient](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Service/IRestClient.cs)和[IRestClientAsync API。](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Service/IRestClientAsync.cs)

### 自动错误处理

C# ServiceStack ServiceClients 进行了*优化*，因为按照惯例，ServiceStack Web 服务将在您的 Response DTO 的**ResponseStatus**属性中序列化结构化错误响应（仅当它有一个时）。所有服务客户端所做的只是将错误响应反序列化为类型化的 C# WebServiceException，这使您的 C# 客户端可以对结构化错误进行强类型访问，如[Validation wikipage](https://github.com/ServiceStack/ServiceStack/wiki/Validation)中详细说明的那样。

基本上 ResponseStatus 属性只是一个约定（不是一些反 REST 魔术），您仍然可以控制返回的 HttpStatus 代码和描述。它只是另一个所有 REST 客户端都可以平等访问的纯 DTO 属性 - 这是一个[简单的 JavaScript ss-validation.js](https://github.com/ServiceStack/ServiceStack/blob/master/NuGet/ServiceStack.Host.Mvc/content/Content/js/ss-validation.js#L41)例程，它提取 responseStatus 元数据并将错误注入 Twitter Bootstrap HTML 表单。

# jpa - 属性是对象时的命名查询？

> ID：10158255
> 
> 赞同：3
> 
> 时间：2012-04-14T23:33:39.843
> 
> 标签：jpa, eclipselink, named-query

我想在 JPA 中进行此查询：

```
SELECT * FROM `happyDB`.`users` U WHERE U.party_as_user =1 AND U.party_party_id =2 
```

这工作正常，但我的问题是我`Party`只有一个对象，而不是一个 id，我不能让它工作。

在`Users`我尝试执行命名查询的 -entity 中，我有以下内容：

```
@JoinColumn(name = "pary_party_id", referencedColumnName = "party_id")
@ManyToOne
private Party partyId;

@Column(name = "party_as_user")
private Boolean partyAsUser; 
```

我尝试像使用点符号的对象一样实现它，但这不起作用：

```
@NamedQuery(name = "Users.findByPartyAsUser", query = "SELECT u FROM Users u WHERE u.partyAsUser = :partyAsUser AND u.partyId.partyId = :partyId") 
```

`partyId`-object内部有一个名为的属性`Party`，但它不起作用。是否有任何解决方案，或者我是否必须向 Users-bean 添加一个属性，`private int partyID`并在每次`Party`插入新属性时填充它`Users`？

感谢您的帮助！萨米努尔米

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T13:58:12.237

一般来说，您可以在 JPA 中使用对象作为参数，

```
SELECT u FROM Users u WHERE u.partyAsUser = :partyAsUser AND u.party  = :party

Party party = new Party(id);
query.setParameter("party", party); 
```

但是，如果您使用正确的变量名，您应该可以使用，我猜是，

```
SELECT u FROM Users u WHERE u.partyAsUser = :partyAsUser AND u.party.id  = :id 
```

如果您比对象更了解 SQL，那么您始终可以使用本机 SQL 查询。

# c++ - 对许多函数调用进行错误检查

> ID：10158259
> 
> 赞同：5
> 
> 时间：2012-04-14T23:34:05.950
> 
> 标签：c++, c, recursion, error-handling

有时，当我在 C++/CI 中编程时，最终会多次调用同一个函数，我想知道检查所有这些调用的错误的最有效方法是什么？using`if else`语句占用大量代码并且看起来很丑陋。我想出了自己的检查错误的方法，也许有更好的方法可以使用。

```
int errs[5] = {0};
errs[0] = functiona(...);
errs[1] = functiona(...);
...
errs[5] = functiona(...);
for (int i = 0; i < 5; i++)
{
  if (err[i] == 0)
     MAYDAY!_wehaveanerror();
} 
```

注意：我知道使用`try`and`catch`可能对 C++ 更好，因为它会通过在第一个错误时抛出异常来解决这个问题，但问题是它与许多返回错误代码的函数不兼容，例如视窗 API。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T23:48:11.340

您可以像这样编写一些伪 C++：

```
struct my_exception : public std::exception {
    my_exception(int); /* ... */ };

int main()
{
    try
    {
        int e;
        if ((e = function()) != SUCCESS) { throw my_exception(e); }
        if ((e = function()) != SUCCESS) { throw my_exception(e); }
        if ((e = function()) != SUCCESS) { throw my_exception(e); }
    }
    catch (my_exception & e)
    {
        std::cerr << "Something went wrong: " << e.what() << "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T23:53:32.690

如果...如果函数有机会抛出不同的错误，您还应该添加一个全部捕获。

```
struct my_exception : public std::exception {
    my_exception(int); /* ... */ };

int main()
{
    try
    {
        int e;
        if ((e = function()) != SUCCESS) { throw my_exception(e); }
        if ((e = function()) != SUCCESS) { throw my_exception(e); }
        if ((e = function()) != SUCCESS) { throw my_exception(e); }
    }
    catch (my_exception & e)
    {
        std::cerr << "Something went wrong: " << e.what() << "\n";
    }
    catch (...)
    {
        //Error Checking
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T01:20:41.293

如何处理函数中的检查？

```
void my_function() {
  if (!create_window())
    throw Error("Failed to create window");
}

int main() {
  try {
    my_function();
  } catch (const Error& e) {
    cout << e.msg << endl;
  } catch (...) {
    cout << "Unknown exception caught\n"
  }

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T01:10:40.600

如果你一遍又一遍地调用同一个函数，最简洁的方法可能是使用宏。我会建议类似：

```
#define CHECKERROR(x) if(x == 0) wehaveanerror()

CHECKERROR(function(...));
CHECKERROR(function(...)); 
```

显然，此宏将非常特定于所涉及的特定函数和错误处理程序，因此`undef`在这些调用之后可能会谨慎行事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T01:16:14.627

这样做更老派，但保留原始错误响应，但一旦发生错误就会响应而看起来很难看：

```
#define callcheck(r) if ((r)==0) MAYDAY!_wehaveanerror()

callcheck(functiona(...));
callcheck(functiona(...));
... 
```

# java - 像仙女飞翔一样的随机圆周运动？

> ID：10158267
> 
> 赞同：-1
> 
> 时间：2012-04-14T23:35:38.457
> 
> 标签：java, algorithm, animation, java-2d

我想在java / scala中编写一个代码让仙女在屏幕上飞来飞去，就像小叮当移动时，只有我的游戏是2D的，所以不需要z属性。

我听起来很懒得问这个问题，但任何人都可以参考/写一些代码开始吗？我数学很烂:(我真的需要一些基本的代码或教程才能开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:38:35.223

您可能想制定一条您希望她首先采取的路径（在纸上）......首先绘制一条运动线将帮助您开始对其进行编程。

然后你可以聪明地计算出一些方程式，例如 y = ax2 + bx + c 让她遵循，或者你可以硬编码她路径中的关键点，然后创建一个函数让她穿过一系列关键点（ x 和 y 坐标）。

# ios - 如何最小化 App Store 的批准时间

> ID：10158268
> 
> 赞同：22
> 
> 时间：2012-04-14T23:35:41.653
> 
> 标签：ios, app-store, appstore-approval

我可以做哪些事情和技术来最大程度地减少我的应用程序/更新获得 App Store 批准所需的时间？较小的更新通常需要更少的时间吗？付费应用程序是否比免费应用程序需要更长的时间？二进制文件的大小如何？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-14T23:47:22.740

根据我的经验，一切都需要完全相同的时间。您在队列中排了 6 天，然后他们审核了一个小时左右（更新要少得多），您要么加入，要么被拒绝。如果您被拒绝，无论是什么问题，都需要几天的时间来解决。

因此，减少时间的唯一方法就是不要被拒绝。:) 不过，请认真阅读开发者协议和“这样做，我们将拒绝你”文档。

他们甚至没有在 6 天的“冷静期”期间查看您的应用程序，所以我无法想象您可以做些什么来让它运行得更快。（虽然我听说有紧急情况下的加速更新机制；但我没有这方面的第一手经验）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-03T04:10:29.517

我还不能发表评论，所以我根据我提交新应用程序的经验以及对 iTunesConnect 中现有应用程序的更新，将其发布为对您问题的回答。

不幸的是，除了在应用程序被拒绝时修复应用程序中的问题并尽快重新提交之外，您实际上无法做任何事情来加快该过程。

Apple 允许您申请加急应用程序审核。

[https://developer.apple.com/contact/app-store/?topic=expedite](https://developer.apple.com/contact/app-store/?topic=expedite)

> 请注意：如果您面临情有可原的情况，您可以通过填写下面的表格请求加快您的应用程序的审核。加急审查是在有限的基础上授予的，我们不能保证每个请求都会被批准。

我个人用过两次。曾经因为应用程序中的外观问题而被拒绝。又一次修复了严重的错误，被接受了。我写了一个非常详细的解释我的应用程序做了什么，错误是什么，为什么这个错误对我们（我的和苹果的）客户很重要。

我发现的一件事是免费应用程序与付费应用程序有时需要不同的时间。

例如，我有同一个应用程序的付费和免费版本。我一个接一个地提交了两个更新。首先我提交了免费版，然后我立即提交了付费版。由于某种原因，付费版本进入审核，并在一天后获得批准，而免费版本仍在等待审核，即使我知道我先提交了它。我怀疑免费和付费应用在苹果有不同的“队列”或“优先级”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-15T13:36:53.950

您可以在紧急情况下申请加急审查。我用过一次，大约一两天后更新可用。

然而，他们说，加急审查只会在有限的情况下获得批准。因此，如果不是绝对必要，我不会使用它。

您可以在 iTunes Connect 中申请加急审核。我认为该选项位于“等待审核”的应用程序的详细信息页面上。还有一份清单，在这种情况下，可以给予加急审查。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-15T04:37:37.013

应用程序的批准时间会因其他情况而有所不同，并且可能会因没有明显可预测的原因而有所不同。我已经看到一个简单应用的小更新需要更长的时间来批准，而不是一个具有许多功能的新的大型应用。

最长的应用审查时间似乎是在许多其他开发者提交应用的那几天，一些重要的假期，购物季节，或者苹果刚刚发布一些操作系统更新、应用服务或新设备的时候。有时可以通过避免这些较长的审查时间段来缩短等待时间。有一些服务可以跟踪每周引入的新应用程序的数量。寻找空值。

远离任何违反 Apple App Store 规则或指南的暗示，或任何其他可能被视为有争议的内容，也有助于避免受到长时间（需要额外时间）审查时间的影响。其他因素似乎影响不大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-11T10:31:12.690

看看[苹果评论支持](https://developer.apple.com/support/app-review/)

提交应用程序供审核后，您可以在 iTunes Connect 的“我的应用程序”部分或 iPhone 和 iPad 的 iTunes Connect 应用程序中查看其状态。审核时间可能因应用程序而异。平均而言，50% 的应用程序在 24 小时内完成审核，超过 90% 的应用程序在 48 小时内完成审核。如果您的提交不完整，审核时间可能会进一步延迟，或者您的应用可能会被拒绝。审核完您的应用后，其状态将更新并通知您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-20T10:26:53.580

我尝试为滑雪站的应用程序使用加急审查，因此它会在冬季开始之前可用，但被拒绝了。

您显然需要一个很好的理由，例如重大安全问题等，才能获得快速审查。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-21T20:56:23.497

**步骤1：**

与您的项目相关，请注意涉及的第三方库是什么，并记下是什么导致它在 Apple Store 中被拒绝。

**第2步：**

使您的代码稳定并牢记您无法保留的拒绝点（我的意思是非常稳定，没有警告，没有错误图标的机会，没有错误的机会）。

**第 3 步：**

最后，然后决定送审

这至少会加快你的进程。一旦你被拒绝了，那就太糟糕了，你必须等待更长的时间。（根据经验说）

# python - 安装numpy和matplotlib到linux本地安装的python2.7

> ID：10158269
> 
> 赞同：1
> 
> 时间：2012-04-14T23:35:54.770
> 
> 标签：python, numpy, matplotlib

我通过本地安装了python2.7 linux

```
./configure --prefix=$HOME
make
make install 
```

那么我该如何安装模块 numpy 和 matplotlib 呢？

服务器系统为 Fedora x86_64。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T06:49:08.710

安装分发：

```
 curl -O http://python-distribute.org/distribute_setup.py
 ~/bin/python distribute_setup.py 
```

安装 pip（不是必需的，但很有帮助）：

```
 ~/bin/easy_install pip 
```

安装包：

```
 ~/bin/pip install numpy
 ~/bin/pip install matplotlib 
```

# python - 同时求解方程

> ID：10158270
> 
> 赞同：1
> 
> 时间：2012-04-14T23:36:10.063
> 
> 标签：python, numpy, linear-algebra

我有以下一组方程，我想同时为 X 和 Y 求解它们。有人建议我可以使用 numpy 将这些方程作为线性方程组来求解。这是最好的选择，还是有更好的方法？

```
a = (((f * X) + (f2 * X3 )) / (1 + (f * X) + (f2 * X3 ))) * i
b = ((f2 * X3) / (1 + (f * X) + (f2 * X3))) * i
c = ((f * X) / (1 + (j * X) + (k * Y))) * i
d = ((k * Y) / (1 + (j * X) + (k * Y))) * i
f = 0.0001
我 = 0.001
j = 0.0001
k = 0.001
e = 0 = X + a + b + c
g = 0.0001 = Y + d
h = 我 - 一个

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:45:09.680

正如乔所指出的，这实际上是一个非线性方程组。您将需要比 numpy 单独提供的更多的火力。

非线性方程的求解很棘手，典型的做法是定义一个*目标函数*

F( **z** ) = sum( `e[n]`^2, n=1...13 )

其中**z**是一个向量，其中包含 13 个变量中的每一个变量的值，`a,b,c,d,e,f,g,h,i,X,Y`并且`e[n]`是违反 13 个方程中的每一个的量。例如

```
e[3] = (d - ((k * Y) / (1 + (j * X) + (k * Y))) * i  ) 
```

一旦你有了这个目标函数，你就可以应用非线性求解器来尝试找到 F( **z** )=0的**z 。**这当然对应于您的方程式的解决方案。

常用的求解器包括：

*   Microsoft Excel 中的求解器
*   python 库[scipy.optimize](http://docs.scipy.org/doc/scipy/reference/optimize.html)
*   [在Gnu 科学库](http://www.gnu.org/software/gsl/manual/html_node/Nonlinear-Least_002dSquares-Fitting.html)中拟合例程
*   Matlab的[优化工具箱](http://www.mathworks.com/products/optimization/)

请注意，如果您在尝试运行求解器之前首先更改方程组以消除尽可能多的变量（例如，通过替换找到的任何位置），*所有*`k`这些都会更好地工作。降低的维度有很大的不同。

# java - 在 2 个或更多 HTML 页面中使用 1 个 Applet 的实例

> ID：10158272
> 
> 赞同：1
> 
> 时间：2012-04-14T23:36:12.420
> 
> 标签：java, javascript, html, applet

是否可以在 HTML 页面上使用一个小程序，并且如果我打开另一个调用相同小程序的 HTML 页面来使用我们之前创建的小程序而不是新的小程序实例？我实际上正在创建 5 个 HTML 页面，我希望我的小程序不要每次都破坏和创建新实例。我想每次都使用最后一个实例。几乎每个小程序都需要`init()`方法，当它第一次加载到 HTML 上时。这会为每个页面创建一个新实例。

有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:19:10.710

我很确定这是不可能的。确保同一小程序实例持续存在的唯一方法是在浏览器中保持加载相同的页面。然而，现在保持相同页面加载是相当标准的，但通过 JavaScript 操作 DOM 以各种方式改变其内容。

我工作的产品是一个网站，其中包含一个必须在整个用户会话期间保持加载的小程序，这基本上就是它的工作方式。如果在交互过程中有一些小程序不可见的地方，您可以使用 JavaScript 更改其在页面内的坐标，使其位于窗口的可见边界之外，从而有效地使其消失。

# c# - 按 DateTime 对 DirectorySearcher 查询的结果进行排序

> ID：10158275
> 
> 赞同：3
> 
> 时间：2012-04-14T23:36:48.527
> 
> 标签：c#, sorting, active-directory

我有以下代码：

```
// Declare new DirectoryEntry and DirectorySearcher
DirectoryEntry domainRoot = new DirectoryEntry("LDAP://rootDSE");
string rootOfDomain = domainRoot.Properties["rootDomainNamingContext"].Value.ToString();
DirectorySearcher dsSearch = new DirectorySearcher(rootOfDomain);

// Set the properties of the DirectorySearcher
dsSearch.Filter = "(objectClass=Computer)";
dsSearch.PropertiesToLoad.Add("whenCreated");
dsSearch.PropertiesToLoad.Add("description");
dsSearch.PropertiesToLoad.Add("operatingSystem");
dsSearch.PropertiesToLoad.Add("name");

// Execute the search
SearchResultCollection computersFound = dsSearch.FindAll(); 
```

我想按`whenCreated`属性按降序对结果进行排序，以便最新的计算机对象位于顶部。

我不能简单地做：

```
SortOption sortedResults = new SortOption("whenCreated", SortDirection.Descending);
dsSearch.Sort = sortedResults; 
```

因为服务器返回错误（http://social.technet.microsoft.com/Forums/en-US/winserverDS/thread/183a8f2c-0cf7-4081-9110-4cf41b91dcbf/）

对此进行排序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-23T11:58:31.320

您可以按照 MSDN 中的说明在服务器端进行[操作](https://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.sort(v=vs.110).aspx)：

```
 new DirectorySearcher(entry)
      {
        Sort = new SortOption("cn", SortDirection.Ascending),
        PropertiesToLoad = {"cn"}
      }; 
```

链接的问题线程已解决：

> 我们在 AD Windows 2008 R2 上遇到了同样的问题
> 
> *   应用 kb977180-v2 [http://support.microsoft.com/kb/977180](http://support.microsoft.com/kb/977180)
> *   并添加了密钥 HKLM\System\CurrentControlSet\Services\NTDS\Parameters
> *   添加字符串值“DSA 启发式”</li>
> *   将值设置为 000000000001
> *   重新开始
> *   这个问题解决后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:08:20.040

创建比较器，通过 whenCreated 属性比较 SearchResult 实例

```
public class SearchResultComparer : Comparer<SearchResult>
{
    public override int Compare(SearchResult x, SearchResult y)
    {
        //Compare two SearchResult instances by their whenCreated property
    }
} 
```

然后将所有项目复制到列表中，这将使用此比较器为您排序项目：

```
List<SearchResult> SearchResultList = new List<SearchResult>(computersFound);
SearchResultList.Sort(new SearchResultComparer()); 
```

# java - 如何在 Tomcat 的 web.xml 中为欢迎文件映射过滤器？

> ID：10158280
> 
> 赞同：3
> 
> 时间：2012-04-14T23:37:36.347
> 
> 标签：java, tomcat, mapping, servlet-filters

由于[这个](https://stackoverflow.com/q/3415240/803285)和[这个](https://stackoverflow.com/q/9785254/803285)问题，我创建了一个`Filter`来检查`Cookie`带有请求对象的 s 和相应的请求。现在我想将它映射为就像我在. 假设我有，那么我必须为两者而不是其他任何东西（例如或不允许）映射，我的意思是除了请求之外没有任何东西。我正在使用 Apache Tomcat 7.0.22 容器。`forward``Filter``welcome-file``web.xml`
`welcome-file``index.html``Filter``www.example.com/``www.example.com/index.html``www.example.com/foo/*``www.example.com/*``welcome-file`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:32:03.837

只需将这些添加到您的 web.xml

```
<filter>
  <filter-name>myFilter</filter-name>
  <filter-class>com.examples.myFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>myFilter</filter-name>
  <url-pattern>/index.html</url-pattern>
</filter-mapping> 
```

# html - 如何在 HTML HREF 中组合锚标记和传递的变量？

> ID：10158283
> 
> 赞同：59
> 
> 时间：2012-04-14T23:38:02.317
> 
> 标签：html, anchor, href

假设我在不同页面的某处有一个锚点：

```
<A NAME="blah"> 
```

在我当前所在的页面上，我想在那个不同的页面上去那个锚点，同时还传递一个 GET 参数，例如：

```
<A HREF="otherpage.htm#blah?data=1234">Good Stuff!</A> 
```

这似乎对我不起作用。它加载页面并传递变量但不转到锚点。我已经搜索了关于锚标记的示例，其中有很多，但没有人谈论在 URL 中传递参数的同时跳转到页面中的锚点。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-04-14T23:40:02.233

书签总是放在最后。

```
<A HREF="otherpage.htm?data=1234#blah">Good Stuff!</A> 
```

# c - GDB劣质退出

> ID：10158288
> 
> 赞同：0
> 
> 时间：2012-04-14T23:38:35.637
> 
> 标签：c, debugging, gdb

我正在尝试使用 GDB 的程序，我做了一个“break x”，然后逐步运行。所以当我想退出时，我会说“退出”，它会返回一个“劣质进程将被杀死警告消息”。如果我做'Y'会发生什么。因为我想以某种方式摆脱这个过程。如果我附加一个正在运行的进程并退出会发生什么。会分离还是退出正在运行的进程？不同的来源给出不同的想法。请指教。

另外，当我尝试运行它说的程序时，我正在运行彼得教程中的标准程序。当我执行第 16 行的步骤时，它会出现此错误。

```
 _IO_puts (str=0x40075e "In display():") at ioputs.c:35
 35 ioputs.c: No such file or directory.
     in ioputs.c 
```

程序

```
 14 void display(int z, int *zptr) {
  15        printf("In display():\n");
  **16       printf("   z is %d and is stored at %p.\n", z, &z);**
  17       printf("   zptr points to %p which holds %d.\n", zptr, *zptr);
  18   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:50:51.463

如果在调试器中运行进程并退出调试器，正在运行的程序将被终止（就像使用 SIGKILL 一样）。要正常结束程序，说`continue`（可能有很多忽略）直到程序完成。

如果您*将*调试器附加到正在运行的程序并退出调试器，则调试器将分离并且程序继续运行，除非您事先将其终止。

# glsl - GLSL 混合模式，创建附加透明度

> ID：10158290
> 
> 赞同：3
> 
> 时间：2012-04-14T23:38:41.910
> 
> 标签：glsl, webgl, three.js

我有一个看起来像这样的小着色器，并且效果很好。

```
uniform float beatScale;
varying vec3 vPos;

void main() {

  vec3 normPos = (normalize(vPos) + vec3(1, 1, 1)) / vec3(2, 2, 2);
  float alpha;

  if (normPos.y < beatScale - 0.1) {
    alpha = 0.0;
  } else if (normPos.y < beatScale) {
    alpha = 1.0 - (beatScale - normPos.y) / 0.1;
  } else {
    alpha = 1.0;
  }

  gl_FragColor = vec4(normPos, alpha);    
} 
```

但是我前面的对象的透明部分挡住了后面的对象，剔除了应该渲染的像素。

我很抱歉的尝试是：

```
gl_FragColor = gl_FragColor + vec4(normPos, alpha); 
```

但这似乎并没有改变它。我希望`gl_FragColor`有以前的像素颜色，但没有骰子。

如何将计算的颜色添加到以前的颜色？我不在乎上面是什么，这些都是我可以简单地加在一起的发光的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:53:23.970

如果你正在做加法混合，那么你应该关闭深度写入。

# c++ - 使用 math.h 时“extern”之前的预期初始化程序

> ID：10158298
> 
> 赞同：0
> 
> 时间：2012-04-14T23:40:14.463
> 
> 标签：c++, math.h

该错误将我指向 math.h 文件的第 36 行，我没有弄乱它。SRK.cpp 是唯一需要头文件的文件，但它不会，因此将它包含在头文件中似乎是合乎逻辑的。显然有些事情搞砸了（我个人认为那里有错字或其他简单的错误，但由于错误将我指向 C++ 包含的头文件，我不知道在哪里看）。

头文件.h

```
#ifndef HEADER_H
#define HEADER_H
#include <math.h>
double reducedP(double P, double Pc);
double reducedT(double T, double Tc);
double SRK(double Tr, double Pr, double acc);
#endif 
```

主文件

```
#include <iostream>
#include "header.h"
using namespace std;

int main()
{
    double T = 0;
    double Tc = 0;
    double Tr = 0;
    double P = 0;
    double Pc = 0;
    double Pr = 0;
    double acc = 0;
    double Z = 0;
    cout << "Enter Temperature: ";
    cin >> T;
    cout << "\n";
    cout << "Enter Pressure: ";
    cin >> P;
    cout << "\n";
    cout << "Enter  Critical Temperature: ";
    cin >> Tc;
    cout << "\n";
    cout << "Enter Critical Pressure: ";
    cin >> Pc;
    cout << "\n";
    Tr = reducedT(T,Tc);
    Pr = reducedP(P,Pc);
    cout << "Reduced T,P\t\t\t" << Tr << "\t\t" << Pr <<"\n";
    cout << "Enter accentric factor: ";
    cin >> acc;
    cout << "\n";
    Z = SRK(Tr, Pr, acc);
    cout << "Z is " << Z << "\n"; 
    return 0;
} 
```

SRK.cpp

```
double SRK(double Tr, double Pr, double acc)
#include <math.h>
{
    double alpha;
    double phi = 1;
    double epsilon = 0;
    double omega = 0.08664;
    double psi = 0.42748;
    double Zc = 1/3;
    double a = (1+(0.480 + 1.574*acc - .176*acc*acc)*(1-sqrt(Tr)));
    alpha = pow(a,2);
    cout << "Alpha is " << alpha << "\n";
    double beta = omega*(Pr/Tr);
    cout << "beta is " << beta << "\n";
    double q = (psi*alpha)/(omega*Tr);
    cout << "q is " << q << "\n";
    double Z = 0;
    double test = 0;
    double Z_init = 1;
    while(fabs(Z_init-test)>.00001)
    {
        Z = 1 + beta - (q*beta)*((Z_init - beta)/((Z_init)*(Z_init+beta)));
        cout << "\n" << Z_init << "\n";
        test = Z_init;
        Z_init = Z;
    }
    return (Z);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T23:44:02.950

这：

```
double SRK(double Tr, double Pr, double acc)
#include <math.h>
{ 
```

是无效的。你不能`#include`在函数签名和它的主体之间放置一个系统头文件。

将其更改为：

```
#include <math.h>
double SRK(double Tr, double Pr, double acc)
{ 
```

一般来说，你的`#include`行应该放在`.cpp`文件的顶部，在你的任何代码之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T23:42:16.943

在`SRK.cpp`您必须将 移动`#include <math.h>`到文件的开头。此外，在`header.h`你严格不需要`math.h`，所以你不必包括它。

# python - Python 模块导入失败，原因不明

> ID：10158302
> 
> 赞同：1
> 
> 时间：2012-04-14T23:40:42.733
> 
> 标签：python, import, importerror

我正在尝试在 python 中导入一个包含以下行的模块：

```
#setup.py
def isnumber(pause):
    try:
        float(pause)
        return True
    except ValueError:
        return False 
```

我试图这样称呼它：

```
#program.py
import setup 
```

但我收到以下错误：

```
 Traceback (most recent call last):
  File "C:\Users\rthompson@iingen.unam.mx\ralph\programas\python\scraper\release\program.py", line 4, in <module>
    import setup
  File "C:\Users\rthompson@iingen.unam.mx\ralph\programas\python\lib\setup.py", line 55, in <module>
    download_url="http://www.crummy.com/software/BeautifulSoup/download/"
  File "C:\Users\rthompson@iingen.unam.mx\ralph\programas\python\lib\distutils\core.py", line 140, in setup
    raise SystemExit, gen_usage(dist.script_name) + "\nerror: %s" % msg
SystemExit: usage: program.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: program.py --help [cmd1 cmd2 ...]
   or: program.py --help-commands
   or: program.py cmd --help

error: no commands supplied 
```

setup.py 中的第 55 行对应`return True`于上面的代码。

如果没有 isnumber 函数，导入将按预期工作。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:49:31.293

您决定将您的模块称为“setup.py”。这是一个危险的名称，因为它通常用于 Python 模块的构建/安装脚本，就像您已经拥有的一样。选择一个不同的名称。

# php - 我在哪里可以学习如何进行实时查询？

> ID：10158307
> 
> 赞同：0
> 
> 时间：2012-04-14T23:42:13.037
> 
> 标签：php, jquery, mysql, ajax, json

我正在尝试从 MySql 获取数据，通过 php 解析并在 json 中回显，然后 jquery 将获取新数据并使用新数据更新表。

我有一个包含基本数据的基本表，我只是想为我的用户动态显示我的数据。当他们从下拉菜单中选择一个选项时，表格将使用新信息进行更新。

我可以抓取数据并将其编码为 json。我遇到的问题是 jquery 部分。我不知道如何调用 php json 数据并更新表格。

我发现 datatables.net 和他们的插件远远超出了我的需要。我只需要一个简单的例子，所以我可以从那里开始。有人可以给我看一个做实时查询的简单例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:45:49.330

你试过看看 [http://datatables.net/release-datatables/examples/data_sources/server_side.html](http://datatables.net/release-datatables/examples/data_sources/server_side.html)

更新：

看一眼

[http://ptheart.com/beta/testdatatables.php](http://ptheart.com/beta/testdatatables.php)

让我知道这是否有帮助。

更新：那你应该试试 jqgrid

# objective-c - 在 Cocoa 中创建一个文件夹（包）

> ID：10158310
> 
> 赞同：2
> 
> 时间：2012-04-14T23:43:09.807
> 
> 标签：objective-c, cocoa, directory, nsfilemanager, bundles

我正在尝试使用 Cocoa 以编程方式创建一个文件夹。

我写了一个`NSString`类别，我们在那里有以下功能：

```
- (void)createAsFolder
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError* err = nil;

    [fileManager createDirectoryAtPath:self withIntermediateDirectories:YES attributes:nil error:&err];

    if (err)
    {
        NSLog(@"ERROR : %@",err);
    }
} 
```

因此，简而言之，假设我们有一个`NSString* path = @"/some/path/is/here";`，我们可以简单地通过以下方式创建它：

```
[path createAsFolder]; 
```

**问题是，虽然它对普通文件夹非常有效，但当指定的路径是一个包（即：带扩展名）时，它就不行了。**例如

```
NSString* path = @"/this/is/a/path/to/some/bundle.bun";

[path createAsFolder]; 
```

以上不起作用。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:19:12.850

好的，这是答案（感谢@thundersteele），如果您想将完整的文件树从一个位置复制到另一个位置：

```
NSFileWrapper* w = [[NSFileWrapper alloc] initWithPath:initialPath];

[w writeToFile:destinationPath atomically:YES updateFilenames:YES]; 
```

是的：无论子文件夹是包/捆绑包还是其他任何东西，都绝对没有问题。没那么难吧？就两行。。。哈哈

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:09:11.837

试试`NSFileWrapper`吧。我认为它可以做你想做的事情。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSFileWrapper_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSFileWrapper_Class/Reference/Reference.html)

# c - 在内联汇编中读取非标准大小（IDTR）的寄存器（容易吗？）

> ID：10158312
> 
> 赞同：1
> 
> 时间：2012-04-14T19:58:51.023
> 
> 标签：c, gcc, x86, kernel, inline-assembly

我刚开始尝试了解 linux 内核，并试图找到 IDTR 的位置。*看起来*它应该是一个足够简单的过程，因为汇编语言`lidt`为此目的提供了指令。因此，我认为，我可以提供一个足够大的结构来容纳此寄存器的内容作为输出操作数，如下所示：

```
struct idt_ptr
{
    unsigned short limit;
    unsigned long long base;
} __attribute__((packed));

struct idt_ptr idtp;

int * get_idt() {
    __asm__
    __volatile__(
        "lidt %0;"
        : "=&r"(idtp)
    );
} 
```

这当然行不通。结果是

```
/var/folders/yb/ybzqw8850nz9lzjsc6jf9hkw0000gn/T//ccvNm3SA.s:11:suffix or operands invalid for `lidt' 
```

我*认为*结构的大小是正确的，`short`应该为段地址提供 16 位，`long long`为偏移提供 64 位。问题仅仅是我不能使用结构作为输出目标吗？否则我该怎么办？此外，由于资源（根据我的发现）一直很稀缺，任何人都可以推荐一本关于该主题的好教程或书籍吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T06:14:36.013

这是在 gcc 内联汇编中使用[的示例。](http://wiki.osdev.org/Inline_Assembly/Examples#LIDT)`LIDT`请注意，`LIDT`设置新值`IDTR`而不是读取当前值。你应该`SIDT`用来阅读`IDTR`。这是一个如何在 gcc 内联汇编中执行此操作的[示例。](http://webcache.googleusercontent.com/search?q=cache%3amMssHLOJP5gJ%3awww.ibm.com/developerworks/linux/library/l-ia/index.html+&cd=1&hl=en&ct=clnk&gl=us)

# java - Java-如何调用具有返回类型的方法

> ID：10158327
> 
> 赞同：0
> 
> 时间：2012-04-14T23:45:21.110
> 
> 标签：java

我正在尝试从另一个类调用返回类型方法，但我不断收到错误，即该类的类型未定义。这是我试图调用的代码：

```
 public MyTask() {

    id =   plugin.getServer().getScheduler().scheduleSyncDelayedTask(plugin,this,plugin.getConfig().getInt("StunDuration") * 20);
    if(id == -1)
    {
        plugin.getLogger().warning("BLARG");
    }
   } 
```

我将如何从另一个类中调用该方法？

```
 public class DamageListener implements Listener{
private antirelog plugin;       
public DamageListener (antirelog plugin) {
    this.plugin = plugin;
}
    Player realplayer1;
    Player realplayer2;
    boolean playeradd = false;
    private MyTask task;
    public static boolean isDamaged = false;
    public static boolean timerTask = true;
    static Set<Player> Damagelist = Collections.newSetFromMap(new   WeakHashMap<Player,Boolean>());

 @EventHandler
 public void damage (EntityDamageEvent event) {
Entity victim = event.getEntity();
if (event instanceof EntityDamageByEntityEvent) {
    EntityDamageByEntityEvent edbeEvent = (EntityDamageByEntityEvent) event;
    if(edbeEvent.getDamager() instanceof Player && victim instanceof Player) {
        EntityDamageByEntityEvent edbeEvent1 = (EntityDamageByEntityEvent) event;
        Entity attacker = edbeEvent1.getDamager();
        Player player = (Player) victim;
        realplayer1 = player;
        Player player2 = (Player) attacker;
        realplayer2 = player2;
        if(Damagelist.contains(realplayer1) || Damagelist.contains(realplayer2)) {
            isDamaged = true;
            timerTask = false;
            System.out.println("Cancel");
            MyTask();
        } else {
        Damagelist.add(realplayer1);
        Damagelist.add(realplayer2);            
        isDamaged = true;
        Pause ps = new Pause(plugin);
        MyTask();
        }

            }

    } 
```

这是 MyTask 类。

```
public class MyTask implements Runnable
{

private antirelog plugin;
private int id = -1;

/**
* Generic constructor
* @param Plugin task is associated with
* @return 
*/      
public MyTask (antirelog plugin) {
this.plugin = plugin;
}
public void MyTask() {

     id =   plugin.getServer().getScheduler().scheduleSyncDelayedTask(plugin,this,plugin.getConfig().getInt("StunDuration") * 20);
    if(id == -1)
    {
        plugin.getLogger().warning("BLARG");
    }
   }

/**
* Do stuff when scheduler tells task to run
*/
@Override
public void run()
{
    if (DamageListener.timerTask == true) {
    DamageListener dl = new DamageListener(plugin);
    dl.Then();
    } 
    else if (DamageListener.timerTask == false) {
        plugin.getServer().getScheduler().cancelTask(id);
        DamageListener.timerTask = true;
    }
 }

 /**
 * Remove task from scheduler
 * @return True if successfully stopped. Else false.
 */
 public boolean stopTask()
  {
    if(id != -1)
    {
        plugin.getServer().getScheduler().cancelTask(id);
        return true;
    }
    return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:47:43.947

由于`MyTask()`是构造函数，对于 class `MyTask`，要在另一个类中实例化，它必须以`new`关键字为前缀，如下所示：

```
...
isDamaged = true;
Pause ps = new Pause(plugin);
task = new MyTask(plugin); //Note the `new` keyword
... 
```

也让我们修复一些其他的东西。

```
public MyTask (antirelog plugin)
{
    this.plugin = plugin;
    if (plugin != null) {
        id = plugin.getServer().getScheduler().scheduleSyncDelayedTask(plugin,this,plugin.getConfig().getInt("StunDuration") * 20);
        if (id == -1)
        {
            plugin.getLogger().warning("BLARG");
        }
    }
}

//public MyTask() //Remove the void, this is a constructor
//{
//  this(null); //Call the extended constructor
//} 
```

# javascript - Javascript在循环中将参数传递给onclick函数

> ID：10158337
> 
> 赞同：-1
> 
> 时间：2012-04-14T23:47:40.993
> 
> 标签：javascript, html, loops, closures

有什么想法可以让这个脚本工作吗？

**我有两段：**

```
<p data-color="red">This textarea has a character limit of 50.</p>
<p data-color="blue">This one has a character limit of 40.</p>​ 
```

**还有一些JS：**

```
<script>
var p = document.getElementsByTagName('p'),
    i = p.length;

while (i--) {
    color = p[i].getAttribute('data-color');
    p[i].onclick = function() {
        this.style.color = color;
    };
}​
</script>​ 
```

[演示](http://jsfiddle.net/Daniel_Hug/4DGGz/)

我希望段落在单击时变成指定的颜色。我需要将每个元素的颜色传递给 onclick 函数。

有任何想法吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:51:01.323

```
<script>
var p = document.getElementsByTagName('p'),
    i = p.length;

while (i--) {
    p[i].onclick = function() {
        this.style.color = this.getAttribute('data-color');
    };
}​
</script>​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T23:54:02.357

好的，被否决让我很困扰，所以我又试了一次。纯JS。这就是我想出的。正如所指出的那样，实际上没有办法将颜色作为变量传递给函数。因此，将一个类附加到段落标签并使用该类作为颜色似乎是避免使用 jQuery 并提供非常简单的解决方案的唯一方法。由于示例代码中的所有段落都没有以类开头，这似乎是一个可行的解决方案。[这是我的jsFiddle。](http://jsfiddle.net/lazerblade01/LV9qX/)

# nhibernate - 如何通过 Fluent.NHibernate.Search 集成 SharpArchitecture 和 NHibernate.Search？

> ID：10158342
> 
> 赞同：0
> 
> 时间：2012-04-14T23:48:14.483
> 
> 标签：nhibernate, s#arp-architecture, nhibernate.search

我正在尝试在 SharpArchitecture 应用程序上使用 NHibernate.Search，并使用 FluentNHibernate.Search 映射来维护纯 POCO 域对象。

但我不知道如何设置 NHibernateSession：

在我的 Global.asax.cs 我有这个初始化并且工作正常：

```
NHibernateSession.Init(
    this.webSessionStorage,
    new[] { Server.MapPath( "~/bin/MyBlog.Infrastructure.dll" ) },
    new AutoPersistenceModelGenerator().Generate(),
    Server.MapPath( "~/NHibernate.config" ) ); 
```

然后，[https](https://github.com/trullock/Fluent-NHibernate-Search/wiki) ://github.com/trullock/Fluent-NHibernate-Search/wiki说我需要像这样创建一个 FluentSearch 配置：

```
Configuration nhcfg = FluentSearch.Configure()
    .DefaultAnalyzer().Standard()
    .DirectoryProvider().FSDirectory()
    .IndexBase("~/Index")
    .IndexingStrategy().Event()
    .MappingClass<LibrarySearchMapping>()
    .BuildConfiguration(); 
```

最后在 FluentNHibernate 上配置 NHibernate.Search。

但是，我该怎么做才能将“nhcfg”配置与 NHibernateSession.Init 连接起来？NHibernateSession.Init 和 FluentHibernate.Search 似乎有不兼容的接口。

有没有办法将 SharpArchitecture 应用程序上的 NHibernate.Search 与 FluentHibernate.Search 映射集成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:03:36.580

解决了！

我从 SharpArchitecture 查看了 NHibernateSesssion 实现，并在 NHibernateSession.Init 方法之外提取了会话工厂配置。最后，我添加了调用 NHibernateSession.AddConfiguration 方法的新配置。

注意 NHibernateSession.Init 在内部注册了一些监听器：

```
 c.EventListeners.PreInsertEventListeners = new IPreInsertEventListener[]
                        {
                            new DataAnnotationsEventListener()
                        };
 c.EventListeners.PreUpdateEventListeners = new IPreUpdateEventListener[]
                        {
                            new DataAnnotationsEventListener()
                        }; 
```

问题是 DataAnnotationsEventListener 类在 SharpArch.NHibernate.dll 内部；所以我需要在我的项目中复制这个类。丑陋但有效。

最后 NHibernate 会话初始化如下所示：

```
 var nhConfig = new Configuration();
        nhConfig.Configure( Server.MapPath( "~/NHibernate.config" ) );

        var cnf = Fluently
            .Configure( nhConfig )
            .Mappings( 
                m =>
                   {
                       var mappingAssembly = Server.MapPath( "~/bin/MyBlog.Infrastructure.dll" );
                       var assembly = Assembly.LoadFrom( MakeLoadReadyAssemblyName( mappingAssembly ) );
                       m.HbmMappings.AddFromAssembly( assembly );
                       m.FluentMappings.AddFromAssembly( assembly ).Conventions.AddAssembly( assembly );

                       m.AutoMappings.Add( new AutoPersistenceModelGenerator().Generate() );                   
                   })
            .ExposeConfiguration( c =>
                {   
                    FluentSearch.Configure( c )
                        .DefaultAnalyzer().Standard()
                        .DirectoryProvider().FSDirectory()
                        .IndexBase( "~/Index" )
                        .IndexingStrategy().Event()
                        .Listeners( FluentNHibernate.Search.Cfg.ListenerConfiguration.Default )
                        .MappingClass<SearchMap>()
                        .BuildConfiguration();

                    c.SetListeners( ListenerType.PostInsert, new[] { new FullTextIndexEventListener() } );
                    c.SetListeners( ListenerType.PostUpdate, new[] { new FullTextIndexEventListener() } );
                    c.SetListeners( ListenerType.PostDelete, new[] { new FullTextIndexEventListener() } );

                    c.SetListener( ListenerType.PostCollectionRecreate, new FullTextIndexCollectionEventListener() );
                    c.SetListener( ListenerType.PostCollectionRemove, new FullTextIndexCollectionEventListener() );
                    c.SetListener( ListenerType.PostCollectionUpdate, new FullTextIndexCollectionEventListener() );

                    /*
                    c.EventListeners.PreInsertEventListeners = new IPreInsertEventListener[]
                        {
                            new DataAnnotationsEventListener()
                        };
                    c.EventListeners.PreUpdateEventListeners = new IPreUpdateEventListener[]
                        {
                            new DataAnnotationsEventListener()
                        };
                   */
                })
            .BuildConfiguration();

        NHibernateSession.Storage = this.webSessionStorage;

        NHibernateSession.AddConfiguration(
            NHibernateSession.DefaultFactoryKey,
            cnf.BuildSessionFactory(),
            cnf,
            null); 
```

# c++ - 如何让 linux 命令行程序在 windows 中运行？

> ID：10158344
> 
> 赞同：3
> 
> 时间：2012-04-14T23:48:39.613
> 
> 标签：c++, c, windows, command-line, cygwin

我是一名编程初学者，我一直在 Ubuntu 中使用 C/C++ 工作。当我告诉 cin/cout/cerr 或 printf/scanf 或从命令行获取参数时，这一切都发生在 Ubuntu 的 linux 终端上。

现在，如果我想运行这些相同的程序（非常简单的程序，初学者级别）并在 Windows 中运行它们，我如何从 Windows 命令行运行它们？我之前上的一门课程让我们下载 cygwin 来模拟 windows 中的 linux 命令行，但是如果我只想从普通的 windows 命令行运行程序怎么办？这可能吗，是否需要修改软件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T23:54:13.767

您可以从 linux 交叉编译适用于 Windows 的程序。

在 Ubuntu 上，过程基本上是这样的：

> sudo apt-get install wine mingw32 mingw32-binutils mingw32-runtime

...

> i586-mingw32msvc-g++ -o myProgram.exe myProgram.cpp

容易，对吧？谷歌搜索“ubuntu cross-compile windows”，那里有大量信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T23:50:41.710

完全一样。`cmd`您（几乎）完全像在 Linux 中那样运行和编写命令。

例如，如果您将程序构建为`program`，您将在 Linux 中像这样运行它：

```
./program --option1 -o2 file1 file2 
```

在 Windows 中，首先你必须让输出有一个`.exe`后缀，然后`cmd`你会写：

```
program.exe --option1 -o2 file1 file2 
```

* * *

基本上说，`cmd`是Windows的终端。它远不如 Linux 终端好，但如果不安装额外的软件，这就是你所获得的一切。

* * *

`cin`//和`cout`//使用标准的C 预打开文件，这些文件在 Linux和Windows中都有定义。从 Windows 终端 ( ) 运行应用程序后，您会看到与在 Linux 终端中完全相同的输入/输出。I/O 重定向也非常相似。`cerr``printf``scanf``fprintf(stderr, ...)``stdin``stdout``stderr``cmd`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T23:52:25.053

`cin`和`cout`、 和`printf`和`scanf`在 Windows 中的工作方式与在 Linux 中的工作方式大致相同。（我也很确定`cerr`，但我不是 100% 确定。至少，它在那里并且可以工作。）最大的区别是 Windows 通常不会扩展通配符（类似的东西`*.txt`）在运行程序之前；在大多数情况下，你必须自己做。

基本上，只要应用程序不使用任何特定于 Linux 或 GCC 的东西，您就可以使用您喜欢测试的任何编译器在目标机器上重新编译它。

如果你不想重新编译......好吧......祝你好运。甚至 Cygwin 也不会运行本机 Linux 二进制文件。您需要一台装有 Linux 的虚拟机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T00:03:11.943

好吧，如果您的程序是可移植的并且不使用任何特定于 Linux 的功能，那么您必须在 Windows 上从源代码编译它以使其在 Windows 上工作。

您需要 Windows 的 GCC 工具链来执行此操作，您可以从[TDM-GCC](http://tdm-gcc.tdragon.net/)主页获得该工具链。它的[MinGW](https://en.wikipedia.org/wiki/MinGW)内部和安装程序允许您选择要安装的功能以及安装的目标目录。它还将自身添加到 Windows 路径中，以便可以从 shell 提示符处使用编译器命令。

我必须定期进行交叉编译，它对我来说没有任何问题。如果您的项目使用 Makefile，则必须进行一项更改。对于目标二进制文件，例如`<target>.out`在 linux 中，您必须编辑 Makefile 并将其重命名为，`<target>.exe`以便它在命令行上运行。如果您不使用 Makefiles 而只是在做`gcc <file.c>`，`a.exe`默认情况下会生成 （类似于`a.out`在 Linux 中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T00:23:22.430

假设您有想要在 UNIX 和 Windows 上运行的程序代码：

```
#include <stdio.h>
int main()
{
    printf("Hi\n");
    return 0;
} 
```

当您在 UNIX shell 中键入命令时，它将是这样的。

```
/usr/home/bobby# gcc main.c
/usr/home/bobby# ./a.out
Hi
/usr/home/bobby# 
```

在 Windows 上，您必须首先选择您的开发环境/编译器。无需使用 Cygwin 之类的工具，您可以安装[Windows SDK](http://www.microsoft.com/download/en/details.aspx?id=3138)或[Visual Studio](http://www.microsoft.com/visualstudio/en-us/try)（尽管如果是后者，您可能只想在 GUI 中开发）。

```
Start -> Run -> cmd /k ""C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat"" x86
C:\Windows\system32>cd c:\bobby
C:\bobby>cl main.c
C:\bobby>main.exe
Hi
C:\bobby> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-15T00:58:52.637

当 C 程序被编译成可执行文件时，这是以系统相关的方式完成的。在 Ubuntu 上使用[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)格式，在 Windows 上使用[PE](http://en.wikipedia.org/wiki/Portable_Executable)。

当您启动一个进程时，将读取 ELF 或 PE，提供有关如何分配内存以及将进程的各个部分放在虚拟内存表中的位置的说明/映射。此外，它链接到已经在物理内存中的动态加载的库，它与使用相同库的其他进程共享。或者，如果动态库不存在，则加载它们。（Linux .so、Windows .dll）。如果它有静态库，这些库会被分配并链接在（Linux .a、Windows .lib）中。- 非常简化。

内存限制等是从先前的进程继承的。

环境变量被放入进程的运行环境中。这是路径、参数等。然后`main()`被添加到堆栈中并被调用。

现在调用 main 之前发生的所有事情以及如何解决链接等以及许多其他事情都取决于系统。这就是为什么人们根本无法在 Windows 上运行在 Linux 上编译的可执行文件的原因。

使用`cygwin`一个只是创建一个虚拟环境，其中这些链接等是相同的并且可以工作。一个创建一个ELF环境。

要将其链接到本机 Windows 命令行，必须针对 Windows 进行编译。在这件事上，我看到已经有很多答案了。

ELF 和PE，在不同的系统上，也有不同的方式来处理环境变量等。这些是什么等等。所以文件扩展的处理方式不同。但是，两个正在运行的进程都具有默认流，例如`stderr`,`stdout`和`stdin`. 但是*在*你的 C 代码下面，它们是不一样的。

这就像驾驶柴油车与汽油车。很多是相同的，但在引擎盖下有很多东西是不同的。

请注意，ie 信号在 Windows 上的处理方式不同。

# objective-c - IOS Core 数据获取请求 - 排序

> ID：10158345
> 
> 赞同：3
> 
> 时间：2012-04-14T23:48:44.440
> 
> 标签：objective-c, ios, core-data

我正在使用后台线程来获取按日期排序的有限数量的记录。

一切正常，直到我删除 UI 线程（tableview）中的记录。

```
//this is done in the background thread
NSFetchRequest *frequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"MyEntity" 
                                            inManagedObjectContext:self.managedObjectContext];
[frequest setEntity:entity];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                    initWithKey:@"date"     
                                    ascending:NO];

NSArray *descriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[frequest setSortDescriptors:descriptors];

[frequest setFetchOffset:fetchOffset];    
[frequest setFetchLimit:20];

[frequest setResultType:NSManagedObjectIDResultType];

 NSError *fetchError;
 NSMutableArray *mutableFetchResults = [[self.managedObjectContext executeFetchRequest:frequest 
                                                                               error:&fetchError] mutableCopy]; 
```

后台线程为 NSManagedObjectContextDidSaveNotification 注册并执行以下选择器

```
//this is done in the background thread
-(void) didSavePersistenceStore:(NSNotification *)notification
{
    [self.managedObjectContext mergeChangesFromContextDidSaveNotification:notification];
} 
```

问题：删除一条记录后，后续的抓取结果不再按日期排序。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T11:25:20.290

来自 Apple 文档：

`If you set the value to NSManagedObjectIDResultType, this will demote any sort orderings to “best efforts” hints if you do not include the property values in the request.`

您需要将所有更改写入持久存储或将 includePendingChanges 设置为 NO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:00:47.047

首先，确保您没有使用来自错误线程的 managedObjectContext。您可以调用 performBlock 在适当的上下文中执行此操作。

其次，您用于提取的提取描述符不会持续存在。因此，除非您继续使用相同的排序标准进行获取，否则您不会那样做。

如果您想要这种行为，请使用获取结果控制器。它将维护您对数据库的期望视图。

# iphone - cocos2d CCTableView 示例

> ID：10158347
> 
> 赞同：1
> 
> 时间：2012-04-14T23:48:46.823
> 
> 标签：iphone, objective-c, uitableview, cocos2d-iphone

我目前正在使用 cocos2d 开发一款纸牌游戏。我需要添加一个表格视图（CCtableview），其中包含卡片的图像和它们的相应统计信息。事实证明，互联网上的例子很少 - 有人有我可以效仿的好例子吗？任何帮助将不胜感激 - 非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:38:30.233

看看这个实现，它使用标准的表格视图。

[https://github.com/sapusmedia/Sapus-Tongue/blob/master/Classes/HiScoresNode.m](https://github.com/sapusmedia/Sapus-Tongue/blob/master/Classes/HiScoresNode.m)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-19T01:29:27.047

可能不是最干净的解决方案，但 cctableview 有很多错误，所以我只是编写了自己的实现

# javascript - 在一个按钮上切换两个事件

> ID：10158350
> 
> 赞同：0
> 
> 时间：2012-04-14T23:49:59.703
> 
> 标签：javascript, jquery, events, jquery-events

我正在尝试添加一些功能以便能够在线编辑评论。到目前为止，它非常接近，但我在尝试触发第二个事件时遇到了问题。它第一次工作，但在那之后，失败了。

```
$(function() {
    var $editBtn = $('.js-edit-comment-btn');
    var clicked = false;

    $editBtn.on('click', $editBtn, function() {
        clicked = true;
        var $that = $(this);
        var $form = $that.closest('.js-edit-comment');
        var $commentTextBody = $that.closest('div').find('.js-comment-body');
        var commentText = $commentTextBody.text();
        var $editableText = $('<textarea />');

        if ($that.text() === 'Save Edits') {
            $that.text('Saving...').attr('disabled', true);
        } else {
            $that.text('Save Edits').attr('alt', 'Save your edits');
        }

        // Replace div with textarea, and populate it with the comment text
        var makeDivTextarea = function($editableText, commentText, $commentTextBody) {
            $editableText.val(commentText);
            $commentTextBody.replaceWith($editableText);
            $editableText.addClass('gray_textarea js-edited-comment').width('100%').css('padding', '4px').focus();
        };
        makeDivTextarea($editableText, commentText, $commentTextBody);

        var saveEdits = function($that, $editableText) {
            $that.on('click', $that, function() {
                if (clicked) {
                    var comment = $that.closest('div').find('.js-edited-comment').val();

                    $editableText.wrap('<div class="js-comment-body" />').replaceWith(comment);
                    $that.text('Edit').attr('alt', 'Edit Your Comment').attr('disabled', false);
                    $('#output').append('saved');
                    clicked = false;
                    return false;
                }
            });
        };
        saveEdits($that, $editableText);
        return false;
    });
});​ 
```

[jsfiddle 演示在这里](http://jsfiddle.net/someprimetime/ArXWM/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:55:21.260

您的工作解决方案的Hiya**演示：http:** [//jsfiddle.net/8P6uz/](http://jsfiddle.net/8P6uz/)

`clicked=true`是问题:)) 我已经纠正了另一件小事。`i.e. $('#output') is set to empty before appending another saved hence text **saved** will only appear once.`

*小提示：*如果我建议使用按钮的 ID，或者如果有很多编辑按钮，请尝试使用`this`您已经认为的；我会看看我是否可以写得更干净，但这有时会更晚一些，但这应该可以解决你的问题。：） 请享用！

**jQuery代码**

```
$(function() {
    var $editBtn = $('.js-edit-comment-btn');
    var clicked = false;

    $editBtn.on('click', $editBtn, function() {
        clicked = true;
        var $that = $(this);
        var $form = $that.closest('.js-edit-comment');
        var $commentTextBody = $that.closest('div').find('.js-comment-body');
        var commentText = $commentTextBody.text();
        var $editableText = $('<textarea />');

        if ($that.text() === 'Save Edits') {
            $that.text('Saving...').attr('disabled', true);
        } else {
            $that.text('Save Edits').attr('alt', 'Save your edits');
        }

        // Replace div with textarea, and populate it with the comment text
        var makeDivTextarea = function($editableText, commentText, $commentTextBody) {
            $editableText.val(commentText);
            $commentTextBody.replaceWith($editableText);
            $editableText.addClass('gray_textarea js-edited-comment').width('100%').css('padding', '4px').focus();
        };
        makeDivTextarea($editableText, commentText, $commentTextBody);

        var saveEdits = function($that, $editableText) {
            $that.on('click', $that, function() {
                if (clicked) {
                    var comment = $that.closest('div').find('.js-edited-comment').val();

                    $editableText.wrap('<div class="js-comment-body" />').replaceWith(comment);
                    $that.text('Edit').attr('alt', 'Edit Your Comment').attr('disabled', false);
                    $('#output').text("");
                    $('#output').append('saved');
                    clicked = true;
                    return false;
                }
            });
        };
        saveEdits($that, $editableText);
        return false;
    });
});​ 
```

# javascript - 使用 javascript 在 UpdatePanel 上打开 ModalPopupExtender

> ID：10158356
> 
> 赞同：0
> 
> 时间：2012-04-14T23:50:59.207
> 
> 标签：javascript, jquery, asp.net, ajaxcontroltoolkit, webforms

我正在尝试使用 JavaScript 打开一个 ModalPopup，我已经在 stackoverflow 上进行了搜索，一般建议似乎是使用这样的东西：

```
$('#inputAdd').live("click", function () {
    $('#addRow').show();
    $find('<%=mpeIndications.BehaviorID %>').show();
}); 
```

#inputAdd 是我在 ModalPopup 中的 html 输入图像，它的目标是显示显示 TextBox 的行（#addRow）。但是，当我单击#inputAdd 按钮时，它显示该行，但随后 ModalPopup 隐藏，我认为原因可能是因为有一个包含 ModalPopup 的 UpdatePanel，我是对的吗？在那种情况下，这可能是一个解决方案？我已经将一些代码放在了.ascx 中。谢谢。

```
<table class="content-box">
    <tr>
        <td valign="top">
             <asp:UpdatePanel runat="server" ID="upAppointments">
                  <ContentTemplate>
                        <table>
                            <tr>
                                <td>
                                    <asp:Button runat="server" ID="btnIndicationsHidden" Style="display: none;" />
                                    <asp:Panel runat="server" ID="pnlIndications" CssClass="modalPanel" Style="display: none;">
                                    <table class="content-box">
                                        <tr>
                                           <td>
                                               <table style="width: 100%;">
                                                    <tr>
                                                        <td>
                                                           <asp:Panel runat="server" ID="pnlShowCurrentIndication" Style="padding: 13px 8px 8px 8px">
                                                                <table style="width: 100%; border: 0;">
                                                                <tr>
                                                                    <td style="width: 30%; vertical-align: top;" rowspan="2">
                                                                        <asp:RadioButtonList runat="server" ID="gvProfiles" OnDataBound="gvProfiles_DataBound"
                                                                            DataTextField="Name" DataValueField="Id" Style="white-space: nowrap;" />
                                                                    </td>
                                                                    <td style="padding-left: 10px;" class="contentBox">
                                                                        <table style="width: 100%;">
                                                                            <tbody id="showTable">
                                                                                <tr>
                                                                                    <td id="indicacionestd" runat="server">
                                                                                        Indicaciones:
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>
                                                                                        <asp:BulletedList ID="blIndicaciones" DataTextField="Valor" runat="server">
                                                                                        </asp:BulletedList>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td id="contraindicacionestd" runat="server">
                                                                                        Contraindicaciones:
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>
                                                                                        <asp:BulletedList ID="blContraindicaciones" DataTextField="Valor" runat="server">
                                                                                        </asp:BulletedList>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                            <tbody style="display: none;" id="addRow">
                                                                                <tr>
                                                                                    <td style="text-align: left; white-space: nowrap;" class="colSepGran">
                                                                                        Nombre:
                                                                                    </td>
                                                                                </tr>
                                                                                <tr class="filSepGranRA">
                                                                                    <td class="colSepGran">
                                                                                        <asp:TextBox runat="server" ID="txbName" CssClass="txtNoWidth" Width="150px" ToolTip="Especifique el nombre del perfil"></asp:TextBox>
                                                                                        <act:FilteredTextBoxExtender runat="server" ID="ftbeName" FilterMode="ValidChars"
                                                                                            FilterType="UppercaseLetters, LowercaseLetters, Custom" TargetControlID="txbName"
                                                                                            ValidChars="ñ Ñ ' á é í ó ú Á É Í Ó Ú ü Ü ." />
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="text-align: center; vertical-align: middle;">
                                                                        <table style="width: 100%;">
                                                                            <tr>
                                                                                <td>
                                                                                    &nbsp;
                                                                                </td>
                                                                                <td>
                                                                                    <input type="image" src="../../App_Themes/Theme/Images/AppIcons/add.png/" id="inputAdd"
                                                                                        title="Adicionar perfil">
                                                                                </td>
                                                                                <td>
                                                                                    <input type="image" src="../../App_Themes/Theme/Images/AppIcons/add_document.png"
                                                                                        id="inputAddSimple" title="Adicionar indicación" />
                                                                                </td>
                                                                                <td>
                                                                                    <input type="image" src="../../App_Themes/Theme/Images/AppIcons/edit.png" id="inputEdit"
                                                                                        title="Editar perfil" />
                                                                                </td>
                                                                                <td>
                                                                                    <asp:ImageButton runat="server" ID="imbRemoveProfile" ToolTip="Eliminar perfil" ImageUrl="~/App_Themes/Theme/Images/AppIcons/delete.png" />
                                                                                </td>
                                                                                <td>
                                                                                    &nbsp;
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="2">
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </asp:Panel>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </asp:Panel>
                            <act:ModalPopupExtender ID="mpeIndications" runat="server" PopupControlID="pnlIndications"
                                BackgroundCssClass="modalBackground" TargetControlID="btnIndicationsHidden" CancelControlID="imbCloseIndications"
                                BehaviorID="mpeIndications">
                            </act:ModalPopupExtender>
                        </td>
                    </tr>
                        </table>
                  </ContentTemplate>
             </asp:UpdatePanel>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:57:08.470

然后尝试这种方法：

为 ModalPopup Extender 添加一个隐藏链接以附加到（永远不会使用）

```
<a href="#" style="display:none;visibility:hidden;" 
   onclick="return false" ID="dummyLink" runat="server">dummy</a> 
```

将隐藏链接的 ID 添加到`ModalPopupExtender`

```
<act:ModalPopupExtender ID="mpeIndications" runat="server" PopupControlID="pnlIndications"
     BackgroundCssClass="modalBackground" 
     TargetControlID="dummyLink" 
     CancelControlID="imbCloseIndications"
     BehaviorID="mpeIndications"> 
```

显示模式弹出窗口

```
$find('MyMPE').show(); 
```

[http://www.geekzilla.co.uk/View38736C2B-BAD3-418A-A5B0-DAC4F1A5A83A.htm](http://www.geekzilla.co.uk/View38736C2B-BAD3-418A-A5B0-DAC4F1A5A83A.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:17:04.257

[用 Jquery 建模对话框 Asp.Net](http://lesson8.blogspot.in/2012/02/model-dialog-aspnet.html)

# ruby-on-rails - Omniauth 重定向仅在某些情况下有效（使用端口）

> ID：10158360
> 
> 赞同：0
> 
> 时间：2012-04-14T23:51:03.920
> 
> 标签：ruby-on-rails, ruby, facebook, omniauth

我正在设置omniauth（只是想让facebook 提供商暂时工作）。

我在我的本地计算机上运行 nginx 端口`80`。我将所有请求路由到端口`8080`并在`8080`.

我已经设置了omniauth，但现在事情只在某些情况下进展顺利。

如果我的浏览器点击`http://localhost/auth/facebook`我会收到一条错误消息：

`URI::InvalidURIError, the scheme http does not accept registry part: app_server (or bad hostname?)`

但是，如果我点击了`http://localhost:8080/auth/facebook`，那么 facebook 会给我一条错误消息，例如`Invalid redirect_uri: Given URL is not allowed by the Application configuration."`. 这是有道理的，因为我的网站 url 设置为`http://localhost`not `http://localhost:8080`。

如果我将站点 url 更改为`http://localhost:8080`，那么事情就会开始起作用（至少在授权过程中如此之远）

顺便说一句，导致问题的不仅仅是 localhost 本身。如果我编辑 /etc/hosts 并尝试类似`dev.example.com`的操作，它的行为方式相同，`dev.example.com`但无法正常`dev.example.com:8080`工作。

为什么我不能让它与 just 一起工作`localhost`？nginx 和 webrick 之间的对话方式有问题吗？我无法想象那会是问题所在，但这是我看到的唯一区别，什么有效，什么无效。任何想法为什么会发生 URI 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:11:48.213

您需要为您的 facebook 应用程序编辑域名。进入[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并编辑该应用程序的设置。将站点域和应用程序域设置为您希望允许重定向到的任何域（例如 example.dev）

# google-chrome-devtools - 如何使用 Chrome Web Developer 检查醉酒悬停？

> ID：10158367
> 
> 赞同：0
> 
> 时间：2012-04-14T23:51:53.140
> 
> 标签：google-chrome-devtools, tipsy

我正在尝试检查此页面上出现的 Tipsy 悬停的 div 元素，以更改弹出窗口的宽度。 [https://dl.dropbox.com/u/1531353/Misc/Docudocker/setups/tipsyCrashingApplication/force-html.html](https://dl.dropbox.com/u/1531353/Misc/Docudocker/setups/tipsyCrashingApplication/force-html.html)

但是，当我按下`Shift`++ ，然后将鼠标移动到 Developer Elements 面板时， `Ctrl`Tipsy`C`悬停消失了，所以我不能再检查它了。

如何检查仅在 Chrome Web Developer 中出现悬停效果时出现的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:26:49.773

我正在使用 Win 7。我使用`firebug`& 它表明工具提示正在使用`tipsy.css`尝试导航到您的醉酒 css 并更改`width`属性，尽管我无法让工具提示的底部形状正确。希望能帮助到你![在此处输入图像描述](../Images/9a2216dd4019fbae00547e1f999058b8.png)

# c# - WP7 for 循环限制添加到列表框中的项目数

> ID：10158369
> 
> 赞同：1
> 
> 时间：2012-04-14T23:52:07.153
> 
> 标签：c#, windows-phone-7, loops

我正在尝试使用 for 循环来限制添加到我的列表框中的项目数。我正在使用 webclient 拉下 JSON 数据。数据总是有 24 项，我想将其限制为 4。这是循环：

```
 public void jsonHome_GetDataCompleted(object snder, DownloadStringCompletedEventArgs e)
    {
        NewReleasesCharts homeData = JsonConvert.DeserializeObject<NewReleasesCharts>(e.Result);

        int limit = 4;

        for (int i = 0; i <= limit; i++)
        {
            FeaturedReleases release = homeData.results.featuredReleases[i];

            int releaseID = release.id;
            string releaseName = release.name;
            string releaseImg = release.images.large.url;

            new ReleaseLarge()
            {
                url = releaseImg
            };
            new FeaturedReleases()
            {
                id = releaseID,
                name = releaseName
            };

        }

        this.listRelease.ItemsSource = homeData.results.featuredReleases;        
    } 
```

这有效，但仍显示所有 24 个项目。谢谢您的帮助。

**更新**

这是我的课

```
 public class NewReleasesCharts 
{
    //public Metadata metadata { get; set; }
    public ResultHome results = new ResultHome();
    public IEnumerator<ResultHome> GetEnumerator()
    {
        return this.results.GetEnumerator();
    }
}

public class ResultHome
{
    public List<FeaturedReleases> featuredReleases { get; set; }

    //public List<FeaturedCharts> featuredCharts { get; set; }
    //public List<TopDownloads> topdownloads { get; set; }
    //public List<MostPopularReleases> mostPopularReleases { get; set; }
    //public List<Components> components { get; set; }

    internal IEnumerator<ResultHome> GetEnumerator()
    {
        throw new NotImplementedException();
    }
}

public class FeaturedReleases
{
    public int id { get; set; }
    public string type { get; set; }
    public string name { get; set; }
    public string slug { get; set; }
    public ReleaseImage images { get; set; }
    public List<Artists> artists { get; set; }
}

public class Artists
{
    public int artistid { get; set; }
    public string artistName { get; set; }
}

public class ReleaseImage
{
    //public ReleaseSmall small { get; set; }
    public ReleaseMedium medium { get; set; }
    public ReleaseLarge large { get; set; }
}

public class ReleaseMedium
{
    public int width { get; set; }
    public int height { get; set; }
    public string url { get; set; }
    public string secureUrl { get; set; }
}

public class ReleaseLarge
{
    public int width { get; set; }
    public int height { get; set; }
    public string url { get; set; }
    public string secureUrl { get; set; }
} 
```

和 xml

```
 <ListBox Grid.Row="0" x:Name="listRelease">

                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical" >
                                <toolkit:HubTile Source="{Binding images.large.url}" Margin="10" />
                                <TextBlock Text="{Binding name}" Width="173" />
                                <TextBlock Text="{Binding artists.artistName}" Width="173" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>

                </ListBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:58:29.277

该代码正在创建新对象，但没有将它们添加到列表中。我不确定您要使用哪个对象（ReleaseLarge 或 FeaturedRelease）。尝试对存储在 homeData 中的反序列化 JSON 结果使用 linq。

```
public void jsonHome_GetDataCompleted(object snder, DownloadStringCompletedEventArgs e)
{
    NewReleasesCharts homeData = JsonConvert.DeserializeObject<NewReleasesCharts>(e.Result);

    const int limit = 4;

    this.listRelease.ItemsSource = homeData.results.featuredReleases.Take(limit);
} 
```

# android - 如何从Android上的地址获取纬度和经度？

> ID：10158373
> 
> 赞同：1
> 
> 时间：2012-04-14T23:53:09.927
> 
> 标签：android, google-maps, reverse-geocoding

我是 Android 的初学者，我正在努力创建能够从地址标记特定位置的谷歌地图。

目前，我的以下代码能够标记“帝国大厦”，但不能标记其他代码..:< 我想知道如何从街道地址或完整地址获取纬度和经度，并在地图上标记。

我修改了清单文件以支持谷歌地图视图，如 INTERNET 和 ACCESS_COARSE_LOCATION

谢谢你。

```
package cs2340.kiwi.HelloGoogleMaps;

import java.io.IOException;
import java.util.List;
import java.util.Locale;

import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class HelloGoogleMapsActivity extends MapActivity {
    /** Called when the activity is first created. */
    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

    Geocoder coder = new Geocoder(HelloGoogleMapsActivity.this, Locale.getDefault());

    List<Address> address;
    String strAddress = "empire state building";
    GeoPoint p1 = new GeoPoint(0,0);
    Double latitude;
    Double longitude;
    MapController mc = mapView.getController();

    try {
        address = coder.getFromLocationName(strAddress,5);
        Address location = address.get(0);
        latitude = location.getLatitude() * 1E6;        
        longitude = location.getLongitude() * 1E6;

        p1 = new GeoPoint( latitude.intValue(),
                           longitude.intValue());

        mc.animateTo(p1);    
        mapView.invalidate();
    }
    catch (IOException e){}
    OverlayItem overlayitem2 = new OverlayItem(p1, "Hello", "not working");

    itemizedoverlay.addOverlay(overlayitem2);
    mapOverlays.add(itemizedoverlay);

}
} 
```

这是我的另一堂课

```
package cs2340.kiwi.HelloGoogleMaps;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class HelloItemizedOverlay extends ItemizedOverlay {

private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
      super(boundCenterBottom(defaultMarker));
      mContext = context;
    }

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

protected OverlayItem createItem(int i) {
      return mOverlays.get(i);
}

public int size() {
      return mOverlays.size();
}

protected boolean onTap(int index) {
      OverlayItem item = mOverlays.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:54:15.993

```
http://maps.googleapis.com/maps/api/geocode/json?address=hyderabad&sensor=true_or_false 
```

或者

```
http://maps.googleapis.com/maps/api/geocode/xml?address=hyderabad&sensor=true_or_false 
```

使用任何一个网址只需替换您想要的地址并进行网络访问，然后它将从谷歌服务器返回相关纬度和经度的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:12:33.327

尝试[地理编码服务](https://developers.google.com/maps/documentation/geocoding/)。向该服务发送一个 http 请求，然后读取响应并在地图上放置一个标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T09:44:58.417

要从街道地址或完整地址获取纬度和经度，请执行以下操作：

```
int maxResults = 5;
String address = "Example Road 15";

Geocoder geo = new Geocoder( context, Locale.getDefault() );
List<Address> addresses = geo.getFromLocationName( address, maxResults );

for ( Address a : adresses ) 
   map.addMarker( new MarkerOptions().position( new LatLng( a.getLatitude(), a.getLongitude() ) ).title( "Hello" ).snippet( "Description about me!" ) ); 
```

# objective-c - 设置 PopUpButton 的操作

> ID：10158376
> 
> 赞同：2
> 
> 时间：2012-04-14T23:53:32.453
> 
> 标签：objective-c, xcode, cocoa, nspopupbutton

我以编程方式创建了一个 NSPopUpButton 并为我的选择创建了一个数组，如何为每个单独的数组选择创建一个 setAction？谢谢！

```
NSRect buttonRect = NSMakeRect(1705, 145, 78, 50); 

    //Button Array.  When I pick the choice it closes the diologue box
    NSArray *newArray;
    NSString *color1 = @"Blue Color";
    NSString *color2 = @"Green Color";
    NSString *color3 = @"Clear Color";

    newArray = [NSArray arrayWithObjects: color1, color2, color3, nil];

    NSPopUpButton *button = [[NSPopUpButton alloc] initWithFrame:buttonRect pullsDown:YES];
    [self addSubview:button];
    [button addItemsWithTitles:newArray];
    //want my action for each individual string
    [button setAction:@selector(changeFilterColor)];

-(void) changeFilterColor
{
    NSLog(@"colorChanged");

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:23:40.660

您需要将[`NSMenuDelegate`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSMenuDelegate_Protocol/)协议添加到您的界面（.h 文件）：

```
@interface MyClass : NSObject <NSMenuDelegate> 
```

然后：

```
[[button menu]setDelegate:self]; 
```

创建`NSPopUpButton`. 另外，删除带有`setAction:`.

复制此委托方法：

```
-(void)menu:(NSMenu *)menu willHighlightItem:(NSMenuItem *)item
{
    if ([item.title isEqualToString:@"Blue Color"]) { ... } //etc
} 
```

添加必要的 if 语句以完成比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:54:47.030

另一种选择是使用`setAction`您最初在代码中使用的方法。但是对于您选择调用的选择器，将其设置为接收发送者对象。像这样的东西：

```
-(void)method:(NSMenuItem *)sender 
```

然后您可以验证发件人对象是否有效并从中获取标题。我对此有点警惕`NSMenuDelegate`。

# javascript - 在输入框中输入单个字母后使用 jQuery 触发函数

> ID：10158380
> 
> 赞同：4
> 
> 时间：2012-04-14T23:54:28.087
> 
> 标签：javascript, jquery, keyup

我正在尝试制作一个简单的搜索框。如何在输入框中输入一个字母后触发功能？我用了.keyup，但这似乎没什么用，因为当键入一个变音字符时，该函数被触发了3次。

```
<input id="text" type="text" />
<div></div>
<script>
    $('#text').keyup(function(){
        $('div').append('TEST'+$(this).val());
    });
</script> 
```

除非您键入任何变音字符，否则上述代码可以正常工作：ą、ś、ł、ż、ź、ć 等。

我不能使用 .keypress 或 .keydown ，因为它们会在输入字符之前触发功能。

稍后编辑：

我知道我的示例可能不够清楚，无法理解问题，但是......在我的真实代码中，每次输入字母时，都会执行 SQLite 查询。如果键入变音字符或大写字母，则查询会执行三到两次，这会减慢整个脚本的速度。如果您在计算机网络浏览器中执行脚本不会有很大的不同，但在移动浏览器中存在显着滞后。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:01:13.907

```
var i = 0;    

$('#text').keyup(function(event) {
    i++;
    if(i == 1)
    {
        $('div').append('TEST'+$(this).val());
    }
}); 
```

这对我来说应该有效，您还可以检测到正在输入的特定密钥

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T00:17:58.030

我考虑检查字符串的值与上次更改的时间相比。所以按键不会运行该函数，除非它导致字符串被更改。

[http://jsfiddle.net/82sTJ/1/](http://jsfiddle.net/82sTJ/1/)

# php - CodeIgniter 形式的警告信息？

> ID：10158383
> 
> 赞同：2
> 
> 时间：2012-04-14T23:54:55.917
> 
> 标签：php, codeigniter

我想知道使用 CodeIgniter 显示信息形式警告消息的最佳方式是什么。类似于 CodeIgniter 的表单验证抛出的错误消息，但当显示警告消息时您仍然可以继续执行该操作。

* * *

例如，目前，我正在创建一个允许用户注册活动的系统。管理员可以向系统添加事件。每个事件有两个日期/时间。

*   注册开放时间：这是人们可以开始注册活动的日期和时间
*   活动开始时间：这是活动实际开始的时间

进行验证以确保“注册开放时间”在“活动开始时间”之前 - 如果不是，则会显示错误消息。

然而，对于大约 95% 的活动，“注册开放时间”将在“活动开始时间”前两天。对于其他事件，差异可能要大得多。

如果两个日期之间的差异大于两天，则需要向用户显示警告。即使显示警告消息（不是错误消息），只要验证通过，用户仍应该能够继续他们的操作（例如，向数据库添加新事件）。

* * *

是否有推荐的方法来处理和显示警告消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T08:16:32.843

我使用 flash_messages 来处理这类事情。

我所有的视图都有一个功能，所以每当我需要告诉用户一些事情时——它会显示在任何和所有页面上。

然后，当您处理表单时，您将接受它，但您将测试“警告”。如果找到警告，则使用您的警告消息设置 flash_message。用户接下来看到的任何屏幕都会向他们显示警告。

# java - 盒子布局中的宽度

> ID：10158391
> 
> 赞同：4
> 
> 时间：2012-04-14T23:56:46.477
> 
> 标签：java, swing, layout-manager, boxlayout

这是我的一段代码：

```
pane.setLayout(new BoxLayout(pane, BoxLayout.Y_AXIS));

JPanel a = new JPanel();
a.setAlignmentX(Component.CENTER_ALIGNMENT);
a.setPreferredSize(new Dimension(100, 100));
a.setBorder(BorderFactory.createTitledBorder("aa"));
JPanel b = new JPanel();
b.setAlignmentX(Component.CENTER_ALIGNMENT);
b.setPreferredSize(new Dimension(50, 50));
b.setBorder(BorderFactory.createTitledBorder("bb"));
pane.add(a);
pane.add(b); 
```

如图所示，问题在于第二个面板的宽度：

![在此处输入图像描述](../Images/f8199c2f6db66b2dee5b380a034a90a6.png)我该如何解决？

因为在流布局中它看起来像我想要的： ![在此处输入图像描述](../Images/3f8bf6e9196b5106c337ed483c01d43a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T00:17:12.450

> 如前所述，BoxLayout 关注组件请求的最小、首选和最大尺寸。在微调布局时，您可能需要调整这些尺寸。¹

```
import java.awt.Component;
import java.awt.Dimension;
import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class BoxLayoutDemo {
    private static void createAndShowGUI(){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));

        JPanel a = new JPanel();
        a.setAlignmentX(Component.CENTER_ALIGNMENT);
        a.setPreferredSize(new Dimension(100, 100));
        a.setMaximumSize(new Dimension(100, 100)); // set max = pref
        a.setBorder(BorderFactory.createTitledBorder("aa"));
        JPanel b = new JPanel();
        b.setAlignmentX(Component.CENTER_ALIGNMENT);
        b.setPreferredSize(new Dimension(50, 50));
        b.setMaximumSize(new Dimension(50, 50)); // set max = pref
        b.setBorder(BorderFactory.createTitledBorder("bb"));

        frame.getContentPane().add(a);
        frame.getContentPane().add(b);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                createAndShowGUI();             
            }
        });
    }
} 
```

![在此处输入图像描述](../Images/e68450f3403d89e850cd646246800677.png)

¹[如何使用 BoxLayout：指定组件大小](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html#size)。

# c++ - C++ DLL卸载析构函数？

> ID：10158393
> 
> 赞同：6
> 
> 时间：2012-04-14T23:56:59.707
> 
> 标签：c++, windows, winapi, dll

所以我有一个用 C++ 编写的 DLL。但是，它使用 GlobalAlloc() 分配内存。为了避免内存泄漏，我想跟踪这些分配并在销毁 DLL 时取消分配所有这些分配。

有什么方法可以编写一个在我的 DLL 被卸载时调用的函数？我能想到的一件事是在我的 DLL 中创建一个全局对象并在其析构函数中编写内存释放调用，但这似乎有点过头了。我的另一个想法是仅依靠操作系统在 DLL 卸载时释放内存，但这似乎很脏。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T00:15:33.677

> 有什么方法可以编写一个在我的 DLL 被卸载时调用的函数？我能想到的一件事是在我的 DLL 中创建一个全局对象并在其析构函数中编写内存释放调用

这是可能的，尽管我相信你的对象的析构函数何时被调用是不确定的。

您可能对 感兴趣[`DLL_PROCESS_DETACH`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583.aspx)，尽管您应该避免在 中做任何重要的事情`DllMain`，但在这里释放资源似乎是可以接受的。注意注意事项：

> 当由于 DLL 加载不成功、进程终止或对 FreeLibrary 的调用而从进程中卸载 DLL 时，系统不会使用 DLL_THREAD_DETACH 的各个线程的值调用 DLL 的入口点函数。过程。DLL 仅发送一个 DLL_PROCESS_DETACH 通知。DLL 可以借此机会清理 DLL 已知的所有线程的所有资源。
> 
> 处理 DLL_PROCESS_DETACH 时，仅当动态卸载 DLL（lpReserved 参数为 NULL）时，DLL 才应释放堆内存等资源。如果进程正在终止（lpvReserved 参数为非 NULL），则除当前线程外，进程中的所有线程要么已经退出，要么已通过调用 ExitProcess 函数显式终止，这可能会留下一些进程资源，例如堆处于不一致的状态。在这种情况下，DLL 清理资源是不安全的。相反，DLL 应该允许操作系统回收内存。

您可能需要详细说明*为什么*您的 DLL 可以保留内存，如果您有许多由 DLL 创建的对象，它们应该具有定义的生命周期并在其生命结束时自行清理。

如果它们不是对象（即内存被分配并通过函数返回给调用者），为什么不把责任归还给正在使用你的 DLL 的人呢？他们可以释放内存。终端服务库遵循此模式 ( [`WTSFreeMemory`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383834.aspx))。

如果资源是长期存在的，并且*必须*在库的生命周期内存在，则让使用者控制库的生命周期。写两个函数：`MyFrameworkStartup`和`MyFrameworkShutdown`酌情。Winsock 遵循这种模式（[`WSAStartup`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms742213.aspx)和[`WSACleanup`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741549.aspx)）。

> 我的另一个想法是仅依靠操作系统在 DLL 卸载时释放内存，但这似乎很脏。

[如果进程正在退出，你会没事的](http://blogs.msdn.com/b/oldnewthing/archive/2012/01/05/10253268.aspx)：

> 不用担心释放内存；当进程地址空间被破坏时，它都会消失。不用担心关闭手柄；当进程句柄表被销毁时，句柄会自动关闭。不要尝试调用其他 DLL，因为那些其他 DLL 可能已经收到了它们的 DLL_PROCESS_DETACH 通知，在这种情况下，它们的行为可能与 Delphi 对象的行为异常一样，如果您在其析构函数运行后尝试使用它.

在实施“什么都不做”策略之前，请确保您阅读了整篇文章和评论并理解了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T00:09:26.267

如何/何时分配内存？通常，最明智的选择是尝试保持某种对称性（构造函数分配，析构函数释放。或者在加载 DLL 时分配内存，在卸载 DLL 时释放内存）。

在任何情况下，如果您想在卸载 DLL 时收到通知，请查看[`DllMain`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583.aspx)函数，特别是 DLL_PROCESS_DETACH 参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T00:11:53.380

在卸载 DLL 时[调用 DllMain 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)，并将 fdwReason 设置为 DLL_PROCESS_DETACH。如文档中所述，请确保检查 lpvReserved 的值，并且只有在它为 NULL 时才释放内存；如果[进程正在终止，则不应释放内存](http://blogs.msdn.com/b/oldnewthing/archive/2012/01/05/10253268.aspx)。

# html - 使用流体创建固定高度的水平 div

> ID：10158398
> 
> 赞同：3
> 
> 时间：2012-04-14T23:57:52.930
> 
> 标签：html, css

我正在尝试建立一个基本三行的布局：页眉、内容和页脚 div。最外面的两个 div 的高度是固定的；中心 div 必须是流动的，并适应浏览器屏幕的高度。

![布局示例](../Images/308fc4947126e37cb0383b5f0043811c.png)

有人能指出我正确的方向如何用适当的 CSS 解决这个问题吗？~~现在我还没有对 javascript 解决方案感兴趣。~~ **由于 CSS 没有提供明确的答案，因此 javascript 解决方案非常突出！**

这是我走了多远：

```
<div id='header'>Header</div>
    <div id='content'>
        <div id='innerContent'>
            This is the fluid part
        </div>
    </div>
<div id='footer'>footer</div> 
```

CSS：

```
#header {
    position:absolute;
    top:0px;
    left:0px;
    height:100px;
    z-index:5;
}
#content {
    position:absolute;
    top:0px;
    left:0px;
    height:100%;
    z-index:2;
}
#innerContent {
    margin-top:100px;
    height:100%;
}
#footer {
    height:400px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T01:11:46.427

编辑：对不起，我感到很尴尬。大约一年前我做了类似的事情，但起初我认为不可能将其调整到这种情况。显然是的。

正如我认为其他人已经说过的那样，可以通过绝对定位将页脚 div 放在底部。问题是当内容 div 变大时调整它的位置。由于页脚是绝对定位的，它不会跟随内容 div 的流动，即使内容扩展，它也会保持在同一个位置。

诀窍是将所有内容包装在绝对定位的 div 中。如果内容变大，它将扩展，并且页脚 div 将根据包装器的边框而不是文档的边框定位。

这是代码。尝试在内容 div 中放置一堆`<br />`标签，您会发现一切都在调整。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Layout test</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }

    #wrapper {
        min-height: 100%;
        min-width: 100%;
        position: absolute;
    }

    #header {
        height: 100px;
        background-color: red;
    }

    #content {
        background-color: gray;
        margin-bottom: 50px;
    }

    #footer {
        height: 400px;
        min-width: 100%;
        position: absolute;
        bottom: 0px;
        margin-bottom: -350px;
        background-color: blue;
    }

    </style>
</head>
<body>
    <div id="wrapper">
        <div id='header'>Header</div>
        <div id='content'>
            Content

        </div>
        <div id='footer'>footer</div>
    </div>
</body>
</html> 
```

原来的： ~~可悲的是，css 缺乏一种干净的方式来做到这一点。~~您不知道[视口](http://en.wikipedia.org/wiki/Viewport)高度（称为 h），因此无法计算 h-100-50 您必须构建您的网站，以便*大多数*人会看到 50px 的页脚 div。这样做的方法是为内容 div 设置一个最小高度。

最小高度值必须从某个标准视口高度派生而来。谷歌实验室已经为他们的访问者发布了他们关于视口大小的数据，并在这里做了一个很好的可视化：http: [//browsersize.googlelabs.com/](http://browsersize.googlelabs.com/)

我为我自己的视口设计，它是 620px 高（根据 google ~80% 有这个视口高度）。因此，内容 div 的最小高度应为 620-100-50 = 470 像素。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Layout test</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }

    #header {
        height: 100px;
        background-color: red;
    }

    #content {
        min-height: 470px;
        background-color: gray;
    }

    #footer {
        height: 400px;
        background-color: blue;
    }

    </style>
</head>
<body>
    <div id='header'>Header</div>
    <div id='content'>
        Content
    </div>
    <div id='footer'>footer</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T02:19:12.603

如果我正确理解您的问题，我认为这可能会引导您走向正确的方向。

[http://jsfiddle.net/mikevoermans/r6Saq/1/](http://jsfiddle.net/mikevoermans/r6Saq/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:50:35.200

我会戳一下它。不确定我是否正确阅读了您的屏幕截图，但我将内容 div 的高度设置为 50-100px。

这是我的 jsfiddle：http: [//jsfiddle.net/AX5Bh/](http://jsfiddle.net/AX5Bh/)

我正在使用`min-height`和`max-height`CSS 属性来控制`#innerContent`div。

如果您水平展开结果窗口，您会看到一些文本被突出显示。如果内容大于`#innerContent`div，我已将内容设置为隐藏。你可能想要一些不同的东西。我只用`<em>`标签突出显示文本以证明它`max-height`是有效的。

如果删除除第一句以外的所有文本，您将看到它的高度为 50 像素。

这是浏览器支持`min-height`和的链接`max-height`： http: [//caniuse.com/#search=max-height](http://caniuse.com/#search=max-height)

# javascript - 一次追加到 div

> ID：10158402
> 
> 赞同：0
> 
> 时间：2012-04-14T23:59:21.260
> 
> 标签：javascript, jquery, html, dom

我正在重新审视我一年前在另一个人的帮助下编写的代码。不幸的是，我不再与他们联系以获得更多帮助。基本上它动态地将类添加`tb`到`b`来自`namesToChange`. 现在我要做的是将一些文本附加到`div`with 类`dtxt`节点，但仍然使用下面的代码。我正在使用代码`$('td.pn_adm_jeff').children('div.dtxt').append('zzz');`并且它可以工作，但它会不断地附加不止一次，如下图所示。我该如何让它添加一次并停止？

**照片** [http://img6.imageshack.us/img6/5392/7c23ddb145954aefadb1b9f.png](http://img6.imageshack.us/img6/5392/7c23ddb145954aefadb1b9f.png)

**代码**

```
 function customizefields(a) {
        $('td b').each(function () {
            name = $(this).text();
            if (name.indexOf(" ") != -1) {
                name = name.substring(0, name.indexOf(" "))
            }
            if (a[name]) {
                this.className = a[name].class;
                this.parentNode.className = a[name].img
            }
        })
        $('td.pn_adm_jeff').children('div.dtxt').append('zzz');
    }

    var namesToChange = {
        'Jeff'    :{'class':'pn_adm','img':'pn_adm_jeff'}
    };

    setInterval(function () {
        customizefields(namesToChange)
    }, 1000); 
```

**更新**

```
var needsUpdate = true;

function customizefields(a) {
    $('td b').each(function () {
        name = $(this).text();
        if (name.indexOf(" ") != -1) {
            name = name.substring(0, name.indexOf(" "));
        }
        if (a[name]) {
            this.className = a[name].class;
            this.parentNode.className = a[name].img;
        }
    });
    if (needsUpdate) {
        $('td.pn_adm_jeff').children('div.dtxt').append('testing');
        needsUpdate = false;
    }
}

var namesToChange = {
    'jeff'    :{'class':'pn_adm','img':'pn_adm_jeff'};
};

setTimeout(function () {
    customizefields(namesToChange);
}, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:02:13.510

使用 setTimeout 而不是 setInterval （interval 用于重复定时器任务，timeout 是单个定时器任务）

为了防止某个任务在重复任务中多次出现，有一个简单的修复方法。

```
// global variable
var needsUpdate = true;

// now in the timer task
if (needsUpdate) {
    $('td.pn_adm_jeff').children('div.dtxt').append('zzz');
    needsUpdate = false;
} 
```

那对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:03:12.397

定义一个全局变量来保存输入标志

```
var appended = false;

function appendthestring() {
   if(!appended) $('td.pn_adm_jeff').children('div.dtxt').append('zzz');
   appended = true; 
} 
```

# python - Python 函数签名的 Python 正则表达式

> ID：10158403
> 
> 赞同：1
> 
> 时间：2012-04-14T23:59:28.203
> 
> 标签：python, regex

我尝试编写一个 python 正则表达式，它与简单 python 函数的签名相匹配。喜欢：

```
def _func1_(arg1, arg2): 
```

我创建了这个正则表达式：

```
"def ([^\W\d]+\w*)(\(( *[^\W\d]+\w* *,? *)*\)):" 
```

不幸的是，这并不是很好。在参数列表中，空格可以在变量名中，不必要的逗号可以在参数列表的 and 处，在我的正则表达式中。有人可以帮我解决这个案例的正确正则表达式吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:13:48.973

事实上，我最近为函数头注释写了一个简单的正则表达式（自动格式化我的 CS 类作业）。这是它的要点：

```
"def (\w+)\s*\((.*?)\):" 
```

对于参数，我会放弃使用 re 而是使用`str.split(',')`on capture group `1`。没有必要让它变得比它必须的更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:52:22.993

如果您可以导入函数定义，请使用[AST](http://docs.python.org/dev/library/ast.html)或使用[inspect](http://docs.python.org/dev/library/inspect.html#inspect.getargspec)。

如果除了签名之外您还有更多解析要做，请考虑[pyparsing](http://pyparsing.wikispaces.com/)或[funcparselib](http://code.google.com/p/funcparserlib/)。

如果您仍然需要使用正则表达式，请耐心等待。

```
import re

# Python identifiers start with a letter or _,
#and continue with these or digits. 
IDENT = '[A-Za-z_][A-Za-z_0-9]*'

# Commas between identifiers can have any amout of space on either side.
COMMA = '\s*,\s*'

# Parameter list can contain some positional parameters.
# For simplicity we ignore now named parameters, *args, and **kwargs.
# We catch the entire list.
PARAM_LIST = '\((' + IDENT+'?' + '(?:' + COMMA+IDENT + ')*'+ ')?\)'

# Definition starts with 'def', then identifier, some space, and param list.
DEF = 'def\s+(' + IDENT + ')\s*' + PARAM_LIST

ident_rx = re.compile(IDENT)
def_rx = re.compile(DEF)

def test(s):
    match = def_rx.match(s)
    if match:
        name, paramlist = match.groups()
        # extract individual params
        params = [x.group() for x in ident_rx.finditer(paramlist or '')]
        print s, name, params 
    else:
        print s, 'does not match'

test('def foo(a, b)')
test('def foo()')
test('def foo(a,b,c , d,  e)')
test('deff foo()')
test('def foo(a, 2b)') 
```

请注意，上面的代码无法处理具有默认值的参数，`*args`或者`**kwargs`，或尾随逗号，更不用说`def foo(a, (b, c))`Python 2 中的合法性了。这一切都可以添加，但复杂性会飙升。

因此，除非您的情况相当简单（上面的代码示例是临界的），否则请参阅上面的解析器链接。

# scala - 用 for 和 yield scala 交换数组值

> ID：10158405
> 
> 赞同：8
> 
> 时间：2012-04-14T23:59:43.833
> 
> 标签：scala, for-loop, iteration, swap, yield

我正在尝试使用 for 和 yield 交换数组中的每一对值，但到目前为止我非常不成功。我尝试过的如下：

```
val a = Array(1,2,3,4,5) //What I want is Array(2,1,4,3,5)

for(i<-0 until (a.length-1,2),r<- Array(i+1,i)) yield r 
```

上面给出的片段返回向量 2,1,4,3（省略了 5）

有人可以指出我在这里做错了什么以及如何使用 for 和 yield 获得正确的反转吗？

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-15T06:39:40.540

```
a.grouped(2).flatMap(_.reverse).toArray 
```

或者如果您需要 for/yield （在这种情况下要简洁得多，实际上扩展为相同的代码）：

```
(for {b <- a.grouped(2); c <- b.reverse} yield c).toArray 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-15T00:19:12.163

如果你不使用它会更容易`for/yield`：

```
a.grouped(2)
  .flatMap{ 
    case Array(x,y) => Array(y,x)
    case Array(x) => Array(x)
  }.toArray // Array(2, 1, 4, 3, 5) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-28T21:58:01.073

我不知道 OP 是否正在*为 Impatient 阅读 Scala*，但这是练习 3.3 。

我喜欢地图解决方案，但我们还没有讨论那一章，所以这是我使用所需的 for/yield 的丑陋实现。您可能可以将一些收益逻辑移动到保护/定义中。

```
for( i <- 0 until(a.length,2); j <- (i+1).to(i,-1) if(j<a.length) ) yield a(j) 
```

我是一个 Java 人，所以我没有确认这个断言，但我很好奇地图/分组和迭代器的开销是什么。我怀疑这一切都编译成相同的 Java 字节码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-17T09:17:46.743

另一个简单的收益解决方案：

```
def swapAdjacent(array: ArrayBuffer[Int]) = {
    for (i <- 0 until array.length) yield (
        if (i % 2 == 0)
            if (i == array.length - 1) array(i) else array(i + 1)
        else array(i - 1)
    )
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-20T16:06:34.843

这是我的解决方案

```
 def swapAdjacent(a: Array[Int]):Array[Int] =
    (for(i <- 0 until a.length) yield
      if (i%2==0 && (i+1)==a.length) a(i) //last element for odd length
      else if (i%2==0) a(i+1)
      else a(i-1)
    ).toArray 
```

[https://github.com/BasileDuPlessis/scala-for-the-impatient/blob/master/src/main/scala/com/basile/scala/ch03/Ex03.scala](https://github.com/BasileDuPlessis/scala-for-the-impatient/blob/master/src/main/scala/com/basile/scala/ch03/Ex03.scala)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-11T20:32:46.770

我有我的解决方案，但没有收益。也许有人会发现它很有用。

```
def swap(x: Array[Int]): Array[Int] = {
    for (i <- 0 until x.length-1 by 2){
      var left = x(i)
      x(i) = x(i+1)
      x(i+1) = left
    }
    x
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-07T17:06:54.480

如果你在 Scala 中为不耐烦的人做练习 3.2 和 3.3，这两个都是我的答案。它们与移动的逻辑相同。

```
/** Excercise 3.2 */
for (i <- 0 until a.length if i % 2 == 1) {val t = a(i); a(i) = a(i-1); a(i-1) = t }
/** Excercise 3.3 */
for (i <- 0 until a.length) yield { if (i % 2 == 1) a(i-1) else if (i+1 <= a.length-1) a(i+1) else a(i) } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-26T19:48:08.453

```
for (i <- 0 until arr.length-1 by 2) { val tmp = arr(i); arr(i) = arr(i+1); arr(i+1) = tmp } 
```

我最近开始学习 Scala，**Scala for the Impatient** (1st edition) 一书中的所有解决方案都可以在我的 github 上找到：

第 2 章 [https://gist.github.com/carloscaldas/51c01ccad9d86da8d96f1f40f7fecba7](https://gist.github.com/carloscaldas/51c01ccad9d86da8d96f1f40f7fecba7)

第 3 章 [https://gist.github.com/carloscaldas/3361321306faf82e76c967559b5cea33](https://gist.github.com/carloscaldas/3361321306faf82e76c967559b5cea33)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-14T00:46:50.847

假设数组不为空，这里你去：

```
val swapResult = for (ind <- arr1.indices) yield {
  if (ind % 2 != 0) arr1(ind - 1)
  else if (arr1(ind) == arr1.last) arr1(ind)
  else if (ind % 2 == 0) arr1(ind + 1)
} 
```

# ruby - Ruby 中的蒙特卡罗模拟

> ID：10158406
> 
> 赞同：1
> 
> 时间：2012-04-15T00:00:06.517
> 
> 标签：ruby, statistics, simulation, montecarlo

嘿，我的模拟有问题。

我是 Ruby-Starter，不知道我的代码有什么问题。这只是模拟的一部分：

```
def mean
 mean = self.reduce(:+)/self.length.to_f
 return mean
end

def randn
  begin 
  rg1 = (rand*2)-1 
  rg2 = (rand*2)-1 
  q = rg1**2 + rg2**2
  end while (q == 0 || q > 1)
  p = Math.sqrt((-2*Math.log(q))/q)

  rn1 = rg1 * p
  rn2 = rg2 * p
  return rn1, rn2
 end

monte_carlo = 10
ren1_sim = Array.new
ren2_sim = Array.new

monte_carlo.times {
 (1..20).each{ |i|
 (1..250).each { |j|
  r = randn() 
    ren1= * Math.exp(mu_ren1 + sigma_ren1 * r[0]) 
    # ren1 is an array with prices, mu_ren1 and sigma_ren1 are individual values

    ren2= * Math.exp(mu_ren2 + chol_21 * r[0] + chol_22 * r[1])
    # chol_21 and chol_22 are also individual values

     ren1_sim.push(ren1)
     ren2_sim.push(ren2)
   } 
  }
 }
 puts ren1_sim.mean
 puts ren2_sim.mean 
```

如果没有最后两个 put，我不会得到错误，但是当我想计算数组 ren1_sim 和rent_sim 的平均值时，我会得到错误：

```
 undefined method 'mean' for #<Array:0x2acf318> (NoMethodError) 
```

你知道怎么解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:23:02.837

您正在尝试调用`mean`an `Array`，这不是`Array`. 也许您打算使用[`Statsample::Vector`](http://ruby-statsample.rubyforge.org/statsample/Statsample/Vector.html)，它是 Statsample 的扩展`Array`，并且确实有[`mean`](http://ruby-statsample.rubyforge.org/statsample/Statsample/Vector.html#method-i-mean)？

```
ren1_sim = Statsample::Vector.new
ren2_sim = Statsample::Vector.new 
```

您还可以调用[`to_vector`](http://ruby-statsample.rubyforge.org/statsample/Statsample/VectorShorthands.html#method-i-to_vector)实例`Array`来获取`Statsample::Vector`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T10:20:50.933

您已经`mean`在文件顶部定义了一个方法，但这只是在顶级对象上创建了一个方法，并且您试图在单个数组上调用它。您可以将该代码更改为

```
def mean(array)
  array.reduce(:+)/array.length.to_f
end 
```

然后稍后将您的用法更改为`mean(ren1_sim)`

或更改您的代码，以便将方法添加到数组中，即

```
class Array
  def mean
    self.reduce(:+)/self.length.to_f
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:03:25.817

看看这篇文章来计算数组的平均值

[如何从 Ruby 数组创建平均值？](https://stackoverflow.com/questions/1341271/average-from-a-ruby-array)

# c# - 'Javascript' 是一个意外的标记。预期的标记是 '"' 或 '''。第 5 行，第 18 位

> ID：10158407
> 
> 赞同：1
> 
> 时间：2012-04-15T00:00:39.700
> 
> 标签：c#, xml, rss

我正在尝试加载此页面的 Rss XML 页面：http: [//www.cairo360.com/xml/feeds/rss/Cairo360Events.xml](http://www.cairo360.com/xml/feeds/rss/Cairo360Events.xml)

但我收到了这个错误：“Javascript”是一个意外的标记。预期的标记是 '"' 或 '''。第 5 行，第 18 位。

这是代码：

WebRequest 请求 = WebRequest.Create(new System.Uri("http://www.cairo360.com/xml/feeds/rss/Cairo360Events.xml"));

```
 WebResponse response = request.GetResponse();

    XmlDocument xmlDoc = new XmlDocument();

    xmlDoc.Load(response.GetResponseStream()); 
```

知道我用不同的 Rss xml 页面尝试了这段代码并且它有效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T00:07:17.763

尝试这个

```
WebRequest request = WebRequest.Create(new System.Uri(@"http://www.cairo360.com/xml/feeds/rss/Cairo360Events.xml")); 
```

在 C# 中，字符串中“/”之后的任何内容都是特殊字符。例如“/n”是新行。通过在它表示的字符串双引号前使用“@”，忽略所有特殊转换字符。你也可以这样做。

```
WebRequest request = WebRequest.Create(new System.Uri(@"http:////www.cairo360.com//xml//feeds//rss//Cairo360Events.xml")); 
```

在 C# 中，字符串中的“//”然后变成单个“/”。双“//”告诉编译器没有特殊字符，将其视为单斜杠。

永远不要同时添加“@”和“//”，因为@ 已经忽略了特殊字符，所以“//”确实意味着“//”。

希望这可以帮助。

编辑

也试试这个

```
 XmlTextReader reader = new XmlTextReader("http://www.cairo360.com/xml/feeds/rss/Cairo360Events.xml");

        // Skip non-significant whitespace  
        reader.WhitespaceHandling = WhitespaceHandling.Significant;

        // Read nodes one at a time  
        while (reader.Read())
        {
            // Print out info on node  
            Console.WriteLine("{0}: {1}", reader.NodeType.ToString(), reader.Name);
        } 
```

# java - Android Audio - 流式正弦发生器奇怪的行为

> ID：10158409
> 
> 赞同：9
> 
> 时间：2012-04-15T00:01:10.140
> 
> 标签：java, android, audio, synthesis

第一次在这里海报。我通常喜欢自己找到答案（无论是通过研究还是反复试验），但我在这里被难住了。

**我正在尝试做的事情：** 我正在构建一个简单的 android 音频合成器。现在，我只是实时播放正弦音，UI 中有一个滑块，可以在用户调整时改变音调的频率。

**我是如何构建它的：** 基本上，我有两个线程——一个工作线程和一个输出线程。每次调用它的 tick() 方法时，工作线程只需用正弦波数据填充缓冲区。一旦缓冲区被填满，它会提醒输出线程数据已准备好写入音轨。我使用两个线程的原因是因为 audiotrack.write() 阻塞，并且我希望工作线程能够尽快开始处理其数据（而不是等待音轨完成写入）。UI 上的滑块只是更改工作线程中的一个变量，因此对频率的任何更改（通过滑块）都将被工作线程的 tick() 方法读取。

**什么有效：** 几乎所有东西；线程沟通良好，播放中似乎没有任何间隙或点击。尽管缓冲区大小很大（感谢 android），但响应能力还可以。频率变量确实发生了变化，tick() 方法中缓冲区计算期间使用的中间值也发生了变化（由 Log.i() 验证）。

**什么不起作用：** 出于某种原因，我似乎无法获得可听频率的连续变化。当我调整滑块时，频率会逐步变化，通常与四度或五度一样宽。从理论上讲，我应该听到 1Hz 的微小变化，但我不是。奇怪的是，滑块的变化似乎导致正弦波在谐波系列的间隔中播放。但是，我可以验证频率变量没有捕捉到默认频率的整数倍。

我的音轨设置如下：

```
_buffSize = AudioTrack.getMinBufferSize(sampleRate, AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT);
_audioTrackOut = new AudioTrack(AudioManager.STREAM_MUSIC, _sampleRate, AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT, _buffSize, AudioTrack.MODE_STREAM); 
```

正在填充工作线程的缓冲区（通过 tick()），如下所示：

```
public short[] tick()
{
    short[] outBuff = new short[_outBuffSize/2]; // (buffer size in Bytes) / 2
    for (int i = 0; i < _outBuffSize/2; i++) 
    {
        outBuff[i] = (short) (Short.MAX_VALUE * ((float) Math.sin(_currentAngle)));

        //Update angleIncrement, as the frequency may have changed by now
        _angleIncrement = (float) (2.0f * Math.PI) * _freq / _sampleRate;
        _currentAngle = _currentAngle + _angleIncrement;    
    }
    return outBuff;     
} 
```

音频数据是这样写的：

```
_audioTrackOut.write(fromWorker, 0, fromWorker.length); 
```

任何帮助将不胜感激。我怎样才能获得更渐进的频率变化？我非常有信心我在 tick() 中的逻辑是合理的，因为 Log.i() 验证变量 angleIncrement 和 currentAngle 正在正确更新。

谢谢！

**更新：**

我在这里发现了一个类似的问题：[Android AudioTrack buffering questions](https://stackoverflow.com/questions/3305598/android-audiotrack-buffering-problems) 该解决方案提出必须能够为audioTrack 生成足够快的样本，这是有道理的。我将采样率降低到 22050Hz，并进行了一些经验测试——在最坏的情况下，我可以在大约 6 毫秒内填充我的缓冲区（通过 tick()）。这绰绰有余。在 22050Hz 时，audioTrack 为我提供了 2048 个样本（或 4096 字节）的缓冲区大小。因此，每个填充的缓冲区持续约 0.0928 秒的音频，这比创建数据所需的时间（1~6 毫秒）要长得多。所以，我知道我没有任何问题足够快地生产样品。

我还应该注意到，在应用程序生命周期的前 3 秒内，它运行良好 - 滑块的平滑扫描会在音频输出中产生平滑扫描。在此之后，它开始变得非常不稳定（声音仅每 100Mhz 变化一次），之后，它完全停止响应滑块输入。

我还修复了一个错误，但我认为它没有效果。AudioTrack.getMinBufferSize() 返回允许的最小缓冲区大小（以 BYTES 为单位），我使用这个数字作为 tick() 中的缓冲区长度 - 我现在使用这个数字的一​​半（每个样本 2 个字节）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T08:23:32.343

**我找到了！**

事实证明，这个问题与缓冲区或线程无关。

前几秒钟听起来不错，因为计算的角度相对较小。随着程序的运行和角度的增长，Math.sin(_currentAngle) 开始产生不可靠的值。

所以，我`Math.sin()`用`FloatMath.sin()`.

我也换了 `_currentAngle = _currentAngle + _angleIncrement;`

和

`_currentAngle = ((_currentAngle + _angleIncrement) % (2.0f * (float) Math.PI));`，所以角度总是 < 2*PI。

奇迹般有效！非常感谢您的帮助，执政官机器人！

# ios - iOS TableView Hierarchy 使用 NSArray 和 ARC，如何重新填充数组？

> ID：10158411
> 
> 赞同：0
> 
> 时间：2012-04-15T00:01:21.780
> 
> 标签：ios, xcode, nsarray, tableview

提前致谢。

目前正在开发一个大学应用程序，该应用程序由一个包含两个视图控制器的选项卡栏控制器组成，第一个是无关紧要的，第二个是导航控制器。该导航控制器由一个 tableView 组成，其中包含用户可以选择的各种校园建筑（来自 NSArray）。导航控制器还包含另一个名为 BuildingFloorsViewController 的视图控制器，它本身有另一个表，其中包含所选建筑物的 NSArray 中的各个楼层，称为楼层（一楼、一楼等）。

所以想法是相同的 NSArray（楼层）将根据选择的建筑物重新填充。这是一个坏主意吗？

目前发生的情况是表格采用了前一个表格中的哪一行被选择的形式——这非常有意义，因为表格是在那里启动的。因此，例如，如果我首先选择 London Road 行，它将创建具有 4 个值（+ nil）的数组，但如果我首先选择 Faraday Ring 行，它将创建具有 3 个值（+ nil）的数组。

那么，如何为每个 if 语句条件提供一组不同的值呢？我已经研究过使用可变数组并只是调整值但是还有另一种方法吗？谢谢。

这是 BuildingFloorsViewController.h 的代码

```
#import <UIKit/UIKit.h>

@interface BuildingFloorsViewController : UITableViewController{
    NSArray *floors;
    NSArray *londonRoadFloors;
}
@property (nonatomic, retain) NSArray *floors;
@property (nonatomic, retain) NSArray *londonRoadFloors;

@end 
```

和 BuildingFloorsViewController.m

```
#import "BuildingFloorsViewController.h"

@interface BuildingFloorsViewController ()

@end

@implementation BuildingFloorsViewController
@synthesize floors;
@synthesize londonRoadFloors;

-(void)viewWillAppear:(BOOL)animated {
if([self.title isEqualToString:@"Farady Wing"]){
    floors =[[NSArray alloc]
            initWithObjects:@"First Floor",@"Second Floor",@"Third Floor",nil];
}else if([self.title isEqualToString:@"London Road"]){
    floors =[[NSArray alloc]
            initWithObjects:@"Ground Floor",@"First Floor",@"Second Floor",@"Third Floor",nil];
    }
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
    // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// Return the number of rows in the section.
return [floors count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

cell.textLabel.text=[self.floors objectAtIndex:[indexPath row]]; 
return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
//<#RoomViewController#> *roomViewController = [[<#RoomViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil]; 
```

} @结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:48:05.367

解决！我在某处省略了 [self.tableView reloadData]。我花了一段时间才弄清楚——我不得不回去逐行分析它。

应该是这样的。

```
-(void)viewWillAppear:(BOOL)animated {
if([self.title isEqualToString:@"Farady Wing"]){
    floors =[[NSArray alloc]
            initWithObjects:@"First Floor",@"Second Floor",@"Third Floor",nil];
}else if([self.title isEqualToString:@"London Road"]){
    floors =[[NSArray alloc]
            initWithObjects:@"Ground Floor",@"First Floor",@"Second Floor",@"Third Floor",nil];
    }
[super viewWillAppear:animated];
[self.tableView reloadData];
} 
```

非常感谢社区，感谢您看到这个问题，我希望这对其他人有所帮助。

# javascript - 将指针放在 div 或 javascript 中的其他页面元素上

> ID：10158412
> 
> 赞同：0
> 
> 时间：2012-04-15T00:01:30.627
> 
> 标签：javascript

我想帮助网站访问者浏览我网站上的页面。为此，我想要一个 javascript 自动导航，它将指针放在不同的页面元素上。javascript中有没有办法将指针放在所需的页面元素上：div、button、span ...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:19:59.613

类似的问题在这里问：[Move Mouse Cursor Javascript](https://stackoverflow.com/questions/4804068/move-mouse-cursor-javascript)

基本上，您的选择是使用链接帖子中的方法，或者使用诸如[http://amberjack2.org/](http://amberjack2.org/)之类的库来直观地引导您的用户浏览页面/站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:03:22.007

您不能使用 javascript 移动指针。您只能将焦点设置在您选择的元素上。

# javascript - Javascript 条件在 AJAX 回调中不起作用

> ID：10158415
> 
> 赞同：1
> 
> 时间：2012-04-15T00:01:49.390
> 
> 标签：javascript, ajax, jquery, if-statement

我在 ajax 回调中遇到了一个 IF 条件的小问题：

```
$.ajax(
        {
            type: "POST",
            url: "AjouterAttribut.php",
            data: { val: Valeur, table: Attribut }
        }).done(function(message)
        {
            if (message == '-')
            {
                alert("test");
            } else {
                alert(message);
                var Tableau = jQuery.parseJSON(message);
                $this.prev().find('option').remove();

                for (var i=0; i< Tableau.length; i++)
                {
                $this.prev().append("<option value="+ Tableau[i][0] +">" + Tableau[i][1] + "</option>");
                }
            }
        }); 
```

问题是，当 ajax 函数确实在消息中发送回“-”时，它会直接通过 if 进入 else，并警告“-”。到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:18:47.757

尝试将消息包装在开始/结束标识符中以检查空格，或在 if 语句之前修剪消息。

```
$.trim(message);

alert('|' + message + '|'); 
```

您还可以通过使用控制台而不是警报来节省更多时间。

```
console.log(message); 
```

适用于 Chrome、Firefox、Safari。对于测试，这是我的首选方法。

# geometry - 如何找到向量与三角形边的交点？

> ID：10158416
> 
> 赞同：0
> 
> 时间：2012-04-15T00:01:57.033
> 
> 标签：geometry

我有一个给定顶点 ABC 的三角形。给定一个从 A 开始并与 BC 边相交的向量，我怎样才能找到交点 p？

见图：

![图表](../Images/83cc87ec888cfe515b45cc3e867367f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T00:20:02.583

`B+s(C-B)`将BC 线参数化为`s`from `0`to `1`。对向量执行相同的操作，即 as `A + t(D-A)`，其中 D 是沿向量的任意点，并且 的范围`t`不受限制。

现在将点的坐标表示为 Ax、Ay 等。你必须解方程

`A.x + t(D.x - A.x) == B.x + s(C.x - B.x)`

`A.y + t(D.y - A.y) == B.y + s(C.y - B.y)`

来确定`s`和`t`。那么方程的解在`p = B+s(C-B)`哪里。`s`三角形可能有一个更简单的解决方案，但这应该可行！

# qt4 - 防止可调整大小的父小部件被子小部件调整大小

> ID：10158418
> 
> 赞同：3
> 
> 时间：2012-04-15T00:02:02.770
> 
> 标签：qt4

是否可以在 Qt4 中创建一个大小可以交互更改的小部件（例如，通过单击和拖动边缘），但在添加、删除或调整其子小部件时其大小不会改变？

换句话说，当我用孩子填充小部件时，孩子会根据需要缩小以保持父几何。但是，如果扩展父级，则子级会扩展以填充新空间。

# java - 从 java 程序中编译 .java 文件？

> ID：10158423
> 
> 赞同：2
> 
> 时间：2012-04-15T00:03:07.677
> 
> 标签：java, compilation, runtime, nullpointerexception

我找到了这段代码：

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

if(compiler.run(null, null, null, fileName) != 0) {
    System.err.println("Could not compile.");
    System.exit(0);
} 
```

但是，这会返回 NullPointerException

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at net.foxycorndog.foxy.compiler.Compiler.compile(Compiler.java:25)
at net.foxycorndog.foxy.compiler.Parser.parse(Parser.java:41)
at net.foxycorndog.foxy.Foxy$ActionHandler.actionPerformed(Foxy.java:99) 
```

我读到 JRE 不包括在 java 程序中编译的能力，但 JDK 有。

我不想要一个只能在少数必须手动设置 JDK 库而不是 JRE 路径的计算机上运行的程序。考虑到这一点，是否有解决此问题的方法？

如果可能的话，我也希望它能够跨平台工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T00:05:34.643

JRE 不包含编译器这一事实没有解决方法，而 JDK 包含。如果要使用 Java 编译器，则需要使用 JDK 运行程序。

但是，还有其他方法可以在运行时创建可执行的 Java 代码；有各种*字节码汇编器*可以让您在不使用编译器的情况下动态构建代码。[ASM](http://asm.ow2.org/)是一种坚硬的岩石。[Apache BCEL](http://commons.apache.org/bcel/)是另一个。

# java - Java 7 URL 连接挂起

> ID：10158428
> 
> 赞同：1
> 
> 时间：2012-04-15T00:03:25.773
> 
> 标签：java, java-7

在 Java 7 下执行以下操作时，程序挂起。但是，它不会在 Java 6 下挂起。

```
package pkg;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;

final public class Main
{
    public static void main(String[] args)
    {
        try
        {
            URL url = new URL("http://en.wikipedia.org/wiki/Cancer");
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
            String line;
            while((line = in.readLine())!= null)
            {
                System.out.println(line);
            }
            in.close();
        }
        catch (IOException ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:09:52.830

不保证代码可以在*任何*Java 版本下工作。您可能对特定的 Java 运行时很幸运。问题是您正在尝试缓冲来自网络的输入，这可能会挂起。`BufferedReader`在使用网络连接或使用`System.in`;之前，您必须将缓冲区大小设置为 1（有效地关闭缓冲） 。否则`read()`调用可能会挂起，试图缓冲不可用的输入，并且可能永远不会变得可用。请参阅构造函数的（新）第二个参数`BufferedReader`：

```
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()), 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-28T07:30:41.823

您需要设置 ReadTimeout 以防止连接挂起。

如果连接出现任何问题，Java getInputStream 方法将阻塞，调用它的线程将锁定。

如果 getInputStream 方法超时，con.setReadTimeout 方法会抛出读取超时异常，并节省时间。

```
 URL urlObj = new URL(url);
    con = urlObj.openConnection();
    con.setConnectTimeout(1000);
    con.setReadTimeout(2000);//This is to prevent url connection hangs
    con.setRequestProperty("Connection", "close");
    con.connect();

    BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream())); 
```

# php - 这段代码有什么问题？[MySQL 请求单元信息]

> ID：10158432
> 
> 赞同：-4
> 
> 时间：2012-04-15T00:04:04.677
> 
> 标签：php, mysql

这有什么问题？

```
$result = mysql_query("SELECT * FROM users WHERE username='$username'");
$row = mysql_fetch_row("$result");
$id = $row[2]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T00:05:51.630

```
$row = mysql_fetch_row($result); 
```

当您在双引号字符串中使用变量时，它将被转换为字符串。并且您不能传递 mysql_fetch_result 一个字符串，而只能传递一个 mysql 结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:05:56.017

以下声明：

```
$row = mysql_fetch_row("$result"); 
```

必须是这样的：

```
$row = mysql_fetch_row($result); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T00:07:19.257

请更正这一行 $row = mysql_fetch_row("$result"); 到 $row = mysql_fetch_row($result); 你应该很高兴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T00:09:43.367

您不需要第二行中变量的“s ...尝试在每个步骤中使用 var_dump 进行调试，看看在这些情况下错误出现在哪里。您还可以通过执行此 $result 查看查询是否有任何问题= mysql_query("SELECT * FROM users WHERE username='$username'") or die("查询错误");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T02:51:21.273

尝试这个

```
$result = mysql_query("SELECT * FROM users WHERE username='".$username."'");
$row = mysql_fetch_row($result); 
```

# c++ - 使用 Ptrace 检索系统调用，在第一个之后停止

> ID：10158442
> 
> 赞同：3
> 
> 时间：2012-04-15T00:06:33.503
> 
> 标签：c++, c, linux, kernel, ptrace

我正在尝试检索所有系统调用的数量，并最终检索给定程序使用 ptrace 调用的系统调用的名称。我在一个 64 位系统上，所以我使用 ORIG_RAX * 8 来查找使用 ptrace 的系统调用。我目前只能检索第一个系统调用，示例运行的输出如下。有任何想法吗？

谢谢！

输出：griffinm@well $ g++ mystrace.cc

```
~/cs153/assn2
griffinm@well $ a.out ls
Please wait
The child made a system call 59
a.out  mystrace.cc  mystrace.cc~
Number of machine instructions : 252376
~/cs153/assn2

#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <sys/ptrace.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>
#include <errno.h>
#define ORIG_RAX 120 

int main( int argc, char* argv[])
{
        long long counter = 0;  /*  machine instruction counter */
        int wait_val;           /*  child's return value        */
        int pid; 
    long orig_eax;               /*  child's process id          */

        puts("Please wait");

    switch (pid = fork()) {
    case -1:
            perror("fork");
            break;
    case 0:
            ptrace(PTRACE_TRACEME, 0, 0, 0);

            execvp(argv[1],  NULL);

            break;

    default:
            wait(&wait_val); 

    orig_eax = ptrace(PTRACE_PEEKUSER,
                      pid, ORIG_RAX,
                      NULL);
    printf("The child made a "
           "system call %ld\n", orig_eax);

            while (wait_val == 1407 ) {
                    counter++;

                    if (ptrace(PTRACE_SINGLESTEP, pid, 0, 0) != 0)
                            perror("ptrace");

                    wait(&wait_val);

            }

    }
    printf("Number of machine instructions : %lld\n", counter);
    return 0; 
```

}

```
Update Default Case:
Default:     
            wait(&wait_val); 

            while (wait_val == 1407 ) {
                    counter++;

                    if (ptrace(PTRACE_SYSCALL, pid, 0, 0) != 0)
                            perror("ptrace");
         orig_eax = ptrace(PTRACE_PEEKUSER,
                      pid, 8*ORIG_RAX,
                      NULL);
        cout<<orig_eax<<endl;
                    wait(&wait_val);

            }

    } 
```

编辑：

```
Output:

griffinm@well $ a.out pwd
Please wait
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
-1
/home/csmajs/griffinm/cs153/assn2
-1
-1
-1
-1
-1
-1 
```

我认为 8*Orig_RAX 是问题所在，机器是 64 位的，就像我说的那样。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:06:29.007

您可能希望使用`PTRACE_SYSCALL`而不是`PTRACE_SINGLESTEP`让孩子运行到下一个系统调用，而不仅仅是一条指令。然后您可以使用`PTRACE_PEEKUSER`再次查看它是什么系统调用。

# android - 循环内的动态布局充气机

> ID：10158443
> 
> 赞同：2
> 
> 时间：2012-04-15T00:06:36.017
> 
> 标签：android, android-layout

我想根据来自 parcelable 数组的数据循环在活动中显示*x个 xml 布局。*对于此示例，我已将数组大小更改为固定值 3。

我要膨胀的布局的 xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >
<TextView
    android:id="@+id/tv_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>    
    <RadioGroup android:id="@+id/rg_type"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Yes"
        android:tag="1" />
    <RadioButton
        android:id="@+id/radioButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="No"
        android:tag="0" />
    <RadioButton
        android:id="@+id/radioButton3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Don't Know"
        android:tag="3" />    
</RadioGroup>
</LinearLayout> 
```

父页面的xml为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:orientation="vertical"> 
<LinearLayout 
    android:id="@+id/ll_content"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content">
</LinearLayout>
</LinearLayout> 
```

这是活动的代码：

```
public class PainRecord_FollowUp extends Activity {

LinearLayout llContent;
Context context;
PainDataItem pd_in; //this is the Parcelable extra received

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.painrecord_followup);       

    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        pd_in = extras.getParcelable("m_PainDataItem");
    }        
    LayoutInflater layoutInflator = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout insertPoint = (LinearLayout) findViewById(R.id.ll_content);
    List views = new ArrayList();

    for(int i=0; i<3; i++){
        View view = layoutInflator.inflate(R.layout.row_painrecord_followup, null);
        TextView textView = (TextView) view.findViewById(R.id.tv_title);
        textView.setText("did x help " + i);
        view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        views.add(view);
    }
    for(int i = 0; i<views.size(); i++)
        insertPoint.addView((View) views.get(i));
}
} 
```

它不是将每个布局显示在彼此下方，而是像这样显示：

![在此处输入图像描述](../Images/f381526f4323854e378c040fc61657f3.png)

如果我更改为 LayoutParams.FILL_PARENT，那么只会显示 [0] 循环值。

任何建议都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:11:49.697

将 LinearLayout 方向设置为垂直

```
<LinearLayout
    android:id="@+id/ll_content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:orientation="vertical">
</LinearLayout> 
```

# bash - BASH在没有循环的情况下访问命令行中的下一个“字段”

> ID：10158444
> 
> 赞同：1
> 
> 时间：2012-04-15T00:06:56.770
> 
> 标签：bash, command-line-arguments, field

这似乎是一个愚蠢的问题，但我一直在寻找解决方案，但没有想出一个解决方案。我有一个接受多个参数的脚本，我只是想知道如何拥有一个参数并访问下一个直接参数。我尝试过类似`$i+1`无济于事的东西。下一个参数最终将保存一个目标目录，因此我需要能够访问内容。另请注意，我通过循环中迭代的计数器变量获取参数位置，这就是为什么我不能简单地说`$2`什么。我为这样一个平凡的问题道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T00:11:56.633

```
$ bash -c 'foo=1 ; echo ${@:$((foo+2)):1}' a b c d e f g
d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:10:48.090

如果 i 是一个包含整数的变量，并且您想要 (i+1)st 参数，您可以执行以下操作：

```
eval arg=\$$(( i + 1 )) 
```

现在 arg 包含你想要的参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:31:18.910

它可能不适用于您的情况，但如果您按顺序访问参数，则可以使用内置`shift`命令来切换参数。

不带参数执行`shift`将设置`$1`为`$2`、`$2`to`$3`等，丢弃 的旧值`$1`。给出一个数值参数`shift`将改变那么多步骤。

# javascript - 使用 javascript 更改 -webkit-animation-play-state

> ID：10158448
> 
> 赞同：1
> 
> 时间：2012-04-15T00:08:19.327
> 
> 标签：javascript, css, webkit-animation

嗨，我一直在试图弄清楚如何通过单击另一个 div 将我的 css3 -webkit-animation-play-state 从暂停更改为运行。有谁知道我会怎么做？我假设我需要使用 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:41:53.863

除非您使用 JavaScript，否则我认为您无法做到这一点。使用 JavaScript，您必须获取`style.webkitAnimationPlayState`要更改的元素的 。如果是空字符串，则将其设置为初始值，即`"running"`.

在示例代码中，`clickDiv`是您单击的 div 并且是正在更改`animationDiv`的 div ：`webkit-animation-play-state`

```
clickDiv.addEventListener("click", function(){
    if (animationDiv.style.webkitAnimationPlayState == "paused") {
        animationDiv.style.webkitAnimationPlayState = "running";
    }else if(animationDiv.style.webkitAnimationPlayState == "running" || animationDiv.style.webkitAnimationPlayState == ""){
        animationDiv.style.webkitAnimationPlayState = "paused"; // assuming you want to toggle
    }
    console.log(animationDiv.style.webkitAnimationPlayState);
})? 
```

[**在这里演示**](http://jsfiddle.net/lq_blocco/JCzpd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-22T16:38:27.950

看看 [http://jsfiddle.net/JCzpd/37/](http://jsfiddle.net/JCzpd/37/)

```
var animationDiv = document.getElementById("aD");
var clickDiv = document.getElementById("cD");
clickDiv.addEventListener("click", function(){
    if (animationDiv.style.animation == "") {
animationDiv.style.animation = " anim .5s forwards";
//animationDiv.style.animation = " anim running  .1s infinite";
    }else{
animationDiv.style.animation = ""; // assuming you want to toggle
    }
});
```

```
 #aD{ background-color:green;
 height:30px;
 margin:2px 0 5px 2px;}
 #cD{background-color:blue;}
@keyframes anim{
   0%{ background-color:green;}
  100%{ background-color:red;}
}
#aD:hover{animation: anim 1s infinite;
cursor:pointer;}
```

```
<div id="aD">animated div</div>
<div id="cD">click div</div>
```

更改不同动画的注释行

# string - 如何检查是否在Lua的字符串中找到匹配的文本？

> ID：10158450
> 
> 赞同：68
> 
> 时间：2012-04-15T00:08:22.443
> 
> 标签：string, lua, conditional, string-matching

如果在文本字符串中至少找到一次特定的匹配文本，我需要设置一个条件为真，例如：

```
str = "This is some text containing the word tiger."
if string.match(str, "tiger") then
    print ("The word tiger was found.")
else
    print ("The word tiger was not found.") 
```

如何检查是否在字符串中的某处找到了文本？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-04-15T00:23:47.563

有 2 个选项可以找到匹配的文本；`string.match`或`string.find`。

这两个都对字符串执行正则表达式搜索以查找匹配项。

* * *

## [`string.find()`](http://lua-users.org/wiki/StringLibraryTutorial#search_query1:%7E:text=string.find(s%2C%20pattern%20%5B%2C%20index%20%5B%2C%20plain%5D%5D))

```
string.find(subject string, pattern string, optional start position, optional plain flag) 
```

返回找到的子字符串的`startIndex`& `endIndex`。

该`plain`标志允许忽略模式并将其解释为文字。它不是`(tiger)`被解释为匹配的正则表达式捕获组`tiger`，而是`(tiger)`在字符串中查找。

反过来说，如果你想要正则表达式匹配但仍然想要文字特殊字符（例如`.()[]+-`等），你可以用百分比转义它们；`%(tiger%)`.

*您可能会将其与`string.sub`*

### 例子

```
str = "This is some text containing the word tiger."
if string.find(str, "tiger") then
  print ("The word tiger was found.")
else
  print ("The word tiger was not found.")
end 
```

* * *

## [`string.match()`](http://lua-users.org/wiki/StringLibraryTutorial#search_query1:%7E:text=string.match%20(s%2C%20pattern%20%5B%2C%20index%5D))

```
string.match(s, pattern, optional index) 
```

返回找到的捕获组。

### 例子

```
str = "This is some text containing the word tiger."
if string.match(str, "tiger") then
  print ("The word tiger was found.")
else
  print ("The word tiger was not found.")
end 
```

# ruby - ruby：将二进制字符串表示为 Bignum

> ID：10158451
> 
> 赞同：2
> 
> 时间：2012-04-15T00:08:52.257
> 
> 标签：ruby, pack, bignum, unpack

我需要一个任意长度的二进制字符串的数字表示。这个看似微不足道的任务，却意外地变得复杂起来。到目前为止我能想到的最好的是

```
string.unpack('H*')[0].to_i(16) 
```

但是这个操作缺乏可逆性，因为 unpack 可能会在最高半字节返回前导零：

```
['ABC'].pack('H*') == ['0ABC'].pack('H*') # false 
```

现在我需要检查从整数转换后是否有偶数个半字节，如果需要则用零填充等。这一切都很好而且很清楚，但我简直不敢相信这一定如此复杂。

更新示例：

```
s = "\x01\x1D\x9A".force_encoding 'binary' # "\x01\x1D\x9A"
s.unpack('H*') # ["011d9a"]
s.unpack('H*')[0].to_i(16) # 73114 
```

现在让我们解码：

```
s.unpack('H*')[0].to_i(16).to_s(16) # "11d9a" — notice that leading zero is gone
[s.unpack('H*')[0].to_i(16).to_s(16)].pack('H*') # "\x11\xD9\xA0"
[s.unpack('H*')[0].to_i(16).to_s(16)].pack('H*') == s # false, obviously 
```

换句话说，我们未能解码到与开始时相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:52:42.580

不幸的是，我对 Ruby 的了解为零，但有一个可以检查的想法......

可能是 .to_s(16) 方法转换为具有不同默认编码的字符串，当您在 .pack('H*') 之后进行字符串比较时，这可能很重要？可能这会起作用： [s.unpack('H*')[0].to_i(16).to_s(16)].pack('H*').force_encoding 'binary' == s

否则很难想象带前导零的半字节如何转换为与相同字符串字节不同但从不带零的十六进制半字节转换的字符串字节。

# nuget - How Do You Change an Existing File Via a NuGet Package Install?

> ID：10158457
> 
> 赞同：4
> 
> 时间：2012-04-15T00:09:58.137
> 
> 标签：nuget, nuget-package

Is it possible to change the contents of a file that exists via a NuGet package? Meaning, let's say you make a brand new MVC3 website. You want to install a NuGet package that will update the home page. Maybe change the welcome message and then change the layout to include some new View you've created and update the Home Controller to include a method to return your new View. How would this be done?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:05:58.870

After you've installed the NuGet Package you can manually modify any files you want. Just edit them in VS (or with another editor). The only difference regarding NuGet packages is that your modified files won't be removed if you uninstall/update the package as changes are detected between the original package files and your files. There's going to be a mention of this is the logs.

Update:

NuGet has supports for modifying project files during a package installation through [.transform and .pp files](http://docs.nuget.org/docs/creating-packages/configuration-file-and-source-code-transformations). But this has limitations, .transform files adds content to config files (they can't edit) while .pp files are for new source code files.

You can modify existing source code using [EnvDte CodeModel](http://msdn.microsoft.com/en-us/library/envdte.codemodel.aspx) in PowerShell (i.e. install.ps1). It's a bit more complex though.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T20:19:46.440

If you open up the JQuery NuGet package in NuGet Package Explorer (or just unzip the package) and look at install.ps1 and common.ps1, then you can see an example where they automatically add a line to _references.js for JQuery so that the JQuery API will show up in IntelliSense.

But yes, it is a fairly complex process to automatically update code (especially code that people can edit). The JQuery example involves using a regular expression to look for an existing reference before updating it, and all this does is add/update a one-line comment to a particular file in a known location (and it shouldn't break the build if it goes wrong, since it is just a comment).

I would love to see more examples and even a library of helper functions for things like the OP's request.

Here's one function from common.ps1:

```
function AddOrUpdate-Reference($scriptsFolderProjectItem, $fileNamePattern, $newFileName) {
    try {
        $referencesFileProjectItem = $scriptsFolderProjectItem.ProjectItems.Item("_references.js")
    }
    catch {
        # _references.js file not found
        return
    }

    if ($referencesFileProjectItem -eq $null) {
        # _references.js file not found
        return
    }

    $referencesFilePath = $referencesFileProjectItem.FileNames(1)
    $referencesTempFilePath = Join-Path $env:TEMP "_references.tmp.js"

    if ((Select-String $referencesFilePath -pattern $fileNamePattern).Length -eq 0) {
        # File has no existing matching reference line
        # Add the full reference line to the beginning of the file
        "/// <reference path=""$newFileName"" />" | Add-Content $referencesTempFilePath -Encoding UTF8
         Get-Content $referencesFilePath | Add-Content $referencesTempFilePath
    }
    else {
        # Loop through file and replace old file name with new file name
        Get-Content $referencesFilePath | ForEach-Object { $_ -replace $fileNamePattern, $newFileName } > $referencesTempFilePath
    }

    # Copy over the new _references.js file
    Copy-Item $referencesTempFilePath $referencesFilePath -Force
    Remove-Item $referencesTempFilePath -Force
} 
```

# android - 如何通过 AIDL 从服务返回大字符串？

> ID：10158458
> 
> 赞同：2
> 
> 时间：2012-04-15T00:10:21.293
> 
> 标签：android, aidl

我想在服务中获取 xml 并通过 AIDL 返回该 xml 字符串。今天，我意识到当这个字符串很长时，调用应用程序只会收到一个空值。我测试了一下，发现字符串长度的限制似乎是大约 520000 个字符，接近 512*1024=524288。Java在内部将字符串存储为UTF-16，我认为，但我不确定每个字符在内部（至少）两个字节大，所以这个限制是1MB。

现在，我想知道这个限制是否记录在任何地方，或者之前是否有人遇到过问题。有谁知道我如何轻松返回这么大的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:15:19.280

> 现在，我想知道这个限制是否记录在任何地方，或者之前是否有人遇到过问题。

AFAIK，它没有正式记录，但是 IPC 调用的内容有 ~1MB 的限制，无论是如何完成的（AIDL、广播`Intent`等）或数据是什么（字符串、位图、其他形式的字节数组等）。

> 有谁知道我如何轻松返回这么大的字符串？

使用文件。如果您愿意，可以通过`ContentProvider`and提供文件`openFile()`，将 提供`Uri`给 AIDL 响应中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T16:31:55.143

是的，它是有限的。

不要直接发送字符串，最好的办法是将它存储起来，`SQLite`然后在需要字符串的任何地方调用它。

# javascript - 如何修复长轮询未完成连接错误

> ID：10158459
> 
> 赞同：0
> 
> 时间：2012-04-15T00:10:27.173
> 
> 标签：javascript, firebase

我正在尝试[firebase 教程](http://www.firebase.com/tutorial/)，它在 Firefox 中抛出了这个错误：

```
Resource interpreted as Image but transferred with MIME type text/javascript: "http://www.google-analytics.com/ga.js".
firebase.js:1Uncaught Error: Firebase INTERNAL ERROR:Long-polling connection established, but outstandingConnections is 0\.  Should be 1 now. 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T21:06:57.320

Firebase 刚刚推出了可能已解决此问题的更新。如果您仍然看到问题，您可以再试一次并报告吗？

# encryption - 密钥是如何形成密码的？

> ID：10158460
> 
> 赞同：0
> 
> 时间：2012-04-15T00:10:31.473
> 
> 标签：encryption, stream, block

当用户选择密钥时，该密钥如何转换为密码（块密码或流密码）来加密数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T00:13:11.713

这取决于密码。阅读您正在使用的任何密码的规范。参见例如[http://en.wikipedia.org/wiki/Advanced_Encryption_Standard#Description_of_the_cipher](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard#Description_of_the_cipher)或[http://en.wikipedia.org/wiki/RC4](http://en.wikipedia.org/wiki/RC4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:37:41.330

它没有变成密码。它用作密码算法的输入。大多数情况下，内部有某种子密钥派生（扩展密钥大小以创建更大的内部状态），然后用于对数据执行例如加法、异或等操作，直到没有钥匙。密码本身永远不会改变，只有内部状态会改变。

# c# - 对 n 个关键字和 AND / OR 选项实现 Linq 搜索查询

> ID：10158464
> 
> 赞同：2
> 
> 时间：2012-04-15T00:11:09.497
> 
> 标签：c#, .net, linq

我有一个文本框，它将自由文本作为搜索的输入，并且我有一个`LINQ`要使用这种类型的搜索扩展的查询。

输入可能是这样的`"big blue car"`，应该会导致搜索包含所有这些单词的标题的查询。

还有一个选项可以切换到**“任何单词”**而不是**“所有单词”。**

将此添加到我的`LINQ`查询中的最佳/最简单方法是什么？

查询现在看起来像

```
from b in books
where b.InStore == true && b.Price > 10 && title.Contains()...at this point i want to add the text search. 
select b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:17:25.177

我强烈建议您使用两个查询来完成！

但是看看这个，是不是很酷？

```
var searchAll = true;
var words = List<string>{"big", "blue", "car"};

from b in books
where (...) (searchAll && words.All(x => title.contains(x))) ||
            (!searchAll && words.Any(x => title.Contains(x)))
select b 
```

但是你真的应该用两个不同的查询来完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:19:06.367

我会先将查询和标题拆分成单词，然后检查是否包含。粗剪是

```
string[] queryParts = query.Split(' ');

books.Where(b => b.InStore)
    .Where(b => b.Price > 10)
    .Where(b => queryParts.Any(part => b.Title.Split(' ').Contains(part))) 
```

对于任何查询，以及

```
string[] queryParts = query.Split(' ');

books.Where(b => b.InStore)
    .Where(b => b.Price > 10)
    .Where(b => queryParts.All(part => b.Title.Split(' ').Contains(part))) 
```

对于所有查询。

我们必须将标题拆分为单词，因为默认的[String.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法会查找任何子字符串匹配项，这意味着

```
"ABC DEF".Contains("A") 
```

返回`true`，即使为此我们不希望它这样做。

请注意，这两种解决方案都假定单词总是由空格分隔，这通常不是真的。您的用户可以在单词之间键入制表符，使用引号来分隔单词组（例如“New York”），等等。

# wpf - MVVM 和 ORM 工具

> ID：10158466
> 
> 赞同：2
> 
> 时间：2012-04-15T00:11:23.017
> 
> 标签：wpf, entity-framework, linq-to-sql, mvvm

我很困惑。请任何人指导我。

以 MVVM 模式构建应用程序时是否必须使用任何 ORM 工具（EF 或 Linq2SQL）？

现在我的应用程序使用直接查询返回数据集，例如“从表中选择 *”

我可以使用数据集/数据表来列出然后是可观察的集合吗？或者我们需要 EF 或 L2S。

我很困惑在 MVVM 中启动

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T00:13:42.930

如果这是您想要做的，那么您没有理由不能构建自己的*模型层。*现代设计模式的好处在于它们通常不知道您使用什么来填充每个部分。

我将为您的所有数据访问代码构建特定的、分离的类，以保持第一个*M*分开。

MVVM 和 MVC 等模式的首要原则是将您的各种*关注点*分开。这在很多方面都有帮助 - 具体来说，包括支持您在使用通用模式时使用自己的数据访问（*模型）的能力。*

理想情况下，您将编写您的代码，以便如果您决定在未来迁移到实体框架，您可以这样做而无需对其余代码进行太多更改。而是 - 其余代码没有*任何*更改。

您可以使用*存储库*模式编写数据访问权限，使用自定义类执行您的手写 SQL 并生成 View 和 ViewModel 可以处理的类。由于 Repository 是您的其他代码交互的主要场所，如果您将来切换到 EF 或其他任何东西，您知道您不必更改任何 View 或 ViewModel 代码。

# xcode - 将图像加载到多边形并使用纹理大小进行绘制

> ID：10158467
> 
> 赞同：0
> 
> 时间：2012-04-15T00:11:32.710
> 
> 标签：xcode, opengl, image-processing

我正在尝试使用这个 Nehe Loadraw 在 opengl 中创建一个带有纹理的多边形

```
GLuint LoadTextureRAW( const char * filename, int wrap )
{
GLuint texture;
int width, height;
Byte * data;
FILE * file;

// open texture data
file = fopen( "Data/raw.raw", "rb" );
if ( file == NULL ) return 0;

// allocate buffer
width = 256;
height = 256;
data = malloc( width * height * 3 );

// read texture data
fread( data, width * height * 3, 1, file );
fclose( file );

// allocate a texture name
glGenTextures( 1, &texture );

// select our current texture
glBindTexture( GL_TEXTURE_2D, texture );

// select modulate to mix texture with color for shading
glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );

// when texture area is small, bilinear filter the closest MIP map
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                GL_LINEAR_MIPMAP_NEAREST );
// when texture area is large, bilinear filter the first MIP map
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

// if wrap is true, the texture wraps over at the edges (repeat)
//       ... false, the texture ends at the edges (clamp)
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
                wrap ? GL_REPEAT : GL_CLAMP );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
                wrap ? GL_REPEAT : GL_CLAMP );

// build our texture MIP maps
gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width,
                  height, GL_RGB, GL_UNSIGNED_BYTE, data );

// free buffer
free( data );

return texture; 
```

}

然后创建多边形纹理 = LoadTextureRAW("texture.raw", TRUE);

```
glEnable( GL_TEXTURE_2D );
glBindTexture( GL_TEXTURE_2D, texture );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
glBegin( GL_POLYGON );
glVertex3f( -42.0f, -42.0f, 0.0f );
glTexCoord2f( 0.0f, 0.0f );
glVertex3f(  42.0f, -42.0f, 0.0f );
glTexCoord2f( 1.0f, 0.0f );
glVertex3f(  42.0f,  42.0f, 0.0f );
glTexCoord2f( 1.0f, 1.0f );
glVertex3f( -42.0f,  42.0f, 0.0f );
glTexCoord2f( 0.0f, 1.0f );
glEnd(); 
```

如何更改它以加载任何大小的图像，不仅是 2 的幂，还使用纹理的侧面而不是坐标创建多边形

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:38:27.877

你问了几个不同的问题。

*   如何加载图像？

RAW 与其说是图像数据的二进制转储，不如说是一种“图像格式”。RAW 图像不包含有关它们有多大（或者它们是什么格式）的信息。您应该通过其他方式知道它有多大。

您需要做的是使用适当的[图像加载库](http://www.opengl.org/wiki/Image_Libraries)来加载真实的图像格式。其中一些只是通用图像加载器，但其他一些是为与 OpenGL 集成而设计的，可以自动为您创建纹理。

*   如何加载任意大小的图像？

一个合适的图像加载器有 API 来告诉你图像有多大（以及格式信息）。

请注意，OpenGL 2.0 及更高版本支持非二次幂图像。*`gluBuild2DMipmaps`才不是！*至少，不正确。`gluBuild2DMipmaps`将尝试将任何非二次幂图像缩放为二次幂图像。因此，您需要使用实际的 OpenGL 调用（GLU 并不是真正的 OpenGL 的一部分。它位于 GL 之上），例如[`glTexImage2D`](http://www.opengl.org/wiki/Texture#Texture_Objects).

*   如何以像素精度渲染图像？

[此答案](https://stackoverflow.com/a/7861782/734069)提供了此过程所需的所有信息。

# php - 如何在函数内使用 switch 语句来更改 PHP 中的变量？

> ID：10158471
> 
> 赞同：0
> 
> 时间：2012-04-15T00:12:24.890
> 
> 标签：php, hex, switch-statement, converter, rgb

我正在尝试编写一个 PHP RGB 到 HEX 转换器，并且我正在尝试使用一个函数将 RGB 数字转换为字母，如果它们在 10 到 15 之间（不，我不能使用“十进制（ ）“ 功能）。这就是我现在编码的方式：

```
function convToHex(&$hexInt)
{
    switch($hexInt){
        case 10:
            $hexInt = "A";
            break;
    }
}

//create six hexadecimal variables for "hexMain"

$hex1 = intval($r / 16);
$hex2 = $r % 16;
$hex3 = intval($g / 16);
$hex4 = $g % 16;
$hex5 = intval($b / 16);
$hex6 = $b % 16;

$rgb = "#" . $r . $g . $b;

echo convToHex($hex1); 
```

问题是，当我尝试回显它时，该值仅显示为 0。在不使用“dechex()”的情况下转换“$hex1”、“$hex2”等的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:23:39.940

您的问题出在这一行：

```
echo convToHex($hex1); 
```

如果你想通过引用传递，那么你需要调用函数来改变变量，然后回显它（因为函数不会返回它改变的值），例如

```
convToHex($hex1);
echo $hex1; 
```

...另外，有任何理由不使用类似的东西：

```
function rgb2hex($r, $g, $b) {
  return sprintf("#%02X%02X%02X", $r, $g, $b);
} 
```

或者，如果您想要更接近原始逻辑的东西：

```
function rgb2hex($r, $g, $b) {
  // takes ints $r, $g, $b in the range 0-255 and returns a hex color string
  $hex_digits = "0123456789ABCDEF";
  $hex_string = "";

  $hex_string .= substr($hex_digits, $r / 16, 1);
  $hex_string .= substr($hex_digits, $r % 16, 1);
  $hex_string .= substr($hex_digits, $g / 16, 1);
  $hex_string .= substr($hex_digits, $g % 16, 1);
  $hex_string .= substr($hex_digits, $b / 16, 1);
  $hex_string .= substr($hex_digits, $b % 16, 1);

  return "#" . $hex_string;
} 
```

使用其中任何一个都将涉及以下内容：

```
$r = 12;
$g = 234;
$b = 45;

$hex_string = rgb2hex($r, $g, $b);
echo $hex_string . "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:14:39.433

您需要在函数中返回值（在本例中为 $hexInt）。然后，无需使用参考。

```
function convToHex($hexInt) {
    // do things
    return $hexInt;
}

echo convToHex($hexInt); 
```

# objective-c - NSArray 仅在通过类时更改

> ID：10158472
> 
> 赞同：1
> 
> 时间：2012-04-15T00:13:02.210
> 
> 标签：objective-c, ios

我有一个使用 ARC 的 NSArray 属性的类，没有什么花哨的......

```
#import <Foundation/Foundation.h>
@interface MyClass : NSObject
property(nonatomic, strong) (NSArray *) myArray;
@end

#import "MyClass.h"
@implementation MyClass
@synthesize myArray = _myArray;
@end 
```

如果尝试使用另一个类中的方法来尝试设置该数组，则如果仅传递该数组，则它不会设置它；但是，如果课程通过，它确实设置了，我不确定为什么会这样......

尝试这两种方式的代码如下...

```
MyClass *myClass = [[MyClass alloc] init];
[self setArrayByPassingArray:myClass.myArray];
NSLog (@"%@", myClass.myArray)
//result is null

[self setArrayByPassingClass:myClass];
NSLog (@"%@", myClass.myArray)
//result is test, test2...

-(void)setArrayByPassingArray:(NSArray *)arrayToSet {
arrrayToSet = [[NSArray alloc] initWithObjects: @"test", @"test2", nil];
}

-(void)setArrayByPassingClass:(MyClass *)classWithArrayToSet {
classWithArrayToSet.myArray = = [[NSArray alloc] initWithObjects: @"test", @"test2", nil];
} 
```

我尝试了其他一些仅使用字符串的方法并且字符串没有更改，所以我不确定如果包含它们的类被传递，为什么它们会被更改......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:27:30.327

您`setArrayByPassingArray:`在第一个示例中的方法将新创建的方法分配`NSArray`给它的*参数，该参数**由 value*传递，并在退出方法时立即丢弃。这里发生的是`myArray`在调用`setArrayByPassingArray:`. 该副本不再附加到 的`myArray`成员`MyClass`。

你的第二个例子没有传递一个类 - 它传递了一个类*的实例*，然后它正确地使用点符号来分配`myArray`你实例中的属性。这就是为什么第二个示例有效，而第一个示例无效的原因。

如果您在整个程序中使用`NSMutableArray`而不是`NSArray`，您可以重写您的第一个示例以使其工作：

```
-(void)setArrayByPassingArray:(NSMutableArray *)arrayToSet {
    [arrrayToSet setArray:[[NSArray alloc] initWithObjects: @"test", @"test2", nil]];
} 
```

# c# - 在 Win8 Metro 应用程序中的后退按钮后保持 DataContext 更改

> ID：10158476
> 
> 赞同：0
> 
> 时间：2012-04-15T00:13:51.180
> 
> 标签：c#, wpf, xaml, microsoft-metro, windows-runtime

我正在构建一个 Windows 8 应用程序 (C#/XAML) 并使用该`Frame.Navigate()`属性在页面之间移动。每个页面都有一个 AppBar 图标，它将刷新页面上的数据并设置`DataContext`属性。这有效，并且在按下按钮后 UI 会相应更新。

当我导航到另一个页面时，我看到的问题就会出现，然后单击后退箭头返回上一页。

当`OnNavigatedTo(NavigationEventArgs e)`方法运行时（单击后退箭头后），该`e.Parameter`值是旧值（在我单击刷新按钮之前，`DataContext`已更新）。

除了使用之外，我不知道如何更新参数值`Frame.Navigate(typeof(PageTypeName), paramValue);`，但我不想启动导航操作。

我的问题是两方面的。

1.  如何保持`DataContext`更改，以便当我返回页面时，我设置的值通过`e.Parameter`方法公开`OnNavigatedTo(NavigationEventArgs e)`。

2.  是否有某种参考材料可以解释 Win8 应用程序中的导航生命周期？

...或者我应该以不同的方式做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:55:42.197

我找到了解决方案。

`NavigationCacheMode = Windows.UI.Xaml.Navigation.NavigationCacheMode.Required;`

这告诉框架它应该始终缓存我页面的旧实例，而不是在我导航回它时创建一个新实例。

这样`DataContext`，当我返回页面时，我的新值不会被覆盖。

# rest - 正确的 RESTful 方式来处理不是真正创建或获取某些内容的请求？

> ID：10158479
> 
> 赞同：5
> 
> 时间：2012-04-15T00:14:20.393
> 
> 标签：rest

我正在编写一个只做一件事的小应用程序：获取一些用户提供的数据，对其进行一些分析，然后为该数据返回一个“标签”。我在想客户应该`GET`或者`POST`他们的请求`/getTag`才能得到回复。

当客户端执行此操作时，服务器上没有存储任何内容，因此使用 POST 感觉很奇怪。然而，分析也没有统一的 URI，所以使用 GET 感觉很奇怪，因为它会根据提供的数据返回不同的东西。

用 REST 表示此功能的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:45:56.143

“最好的方法”是做最适合您的应用程序及其需求的任何事情。不知道，这里有一些想法：

1.  `GET`是最合适的动词，因为您没有在服务器上创建或存储任何东西，只是检索服务器提供的东西。

2.  不要`get`像你建议的那样把这个词放在 URI 中。HTTP 已经提供了类似的动词，所以只需使用`/tag`and `GET`it 代替。

3.  您应该为此资源使用易于理解（或“酷”）的 URI，并将数据作为查询参数传递。我不会担心它感觉很奇怪（请参阅[此问题的](https://stackoverflow.com/questions/9234363/rest-search-interface-and-the-idempotency-of-get/)答案以找出原因）。

总而言之，只需`GET`打开`/tag?foo=bar&beef=dead`，就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:42:08.757

POST 可以代表执行一个动作。该操作不必*是*数据库操作。

您真正创建的是一个远程过程。RPC 通常都是 POST。我认为这不适合 REST，但这并不妨碍您使用简单的 URL 和 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T02:52:36.887

在我看来，您或生成原始数据的用户可能希望生成的标签保持不变，不是吗？

如果这是可能的，那么我会将其编写为`POST /tags`并将`/tags/:id`资源 URI 作为 Location: 标头传回。

如果我真的不关心持久化生成的标签，我会考虑“用户生成的数据”是什么以及在幕后进行了多少处理。如果“标签”与传递到系统的任何数据都足够不同，`GET /tag`那么 API 使用者可能会感到困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T08:30:10.867

您可以使用`GET`和`POST`：

*   `GET /tag?data="..." -> 200, tag`

    > GET 方法意味着检索由 Request-URI 标识的任何信息（以实体的形式）。如果 Request-URI 指的是数据生成过程，则生成的数据应作为响应中的实体返回，而不是过程的源文本，除非该文本恰好是该过程的输出。

*   `POST /tag {data: "..."} -> 200, tag`

    > POST 方法执行的操作可能不会产生可由 URI 标识的资源。在这种情况下，200（正常）或 204（无内容）是适当的响应状态，具体取决于响应是否包含描述结果的实体。

根据 HTTP 标准/[方法定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)部分。

如果我是你，我会使用`GET`（并且`POST`仅当你想发送文件时）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T07:06:49.410

我将支持 Brian 的回答：使用`GET`. 如果相同的输入参数返回相同的输出，并且您并没有真正创建任何东西，那么它是一个幂等操作，因此非常适合`GET`.

# python - Python List，如何在 django 模板中拆分它

> ID：10158481
> 
> 赞同：0
> 
> 时间：2012-04-15T00:14:24.020
> 
> 标签：python, django, list, django-templates, django-views

我有一个看起来像这个例子的 python 列表：

```
[[' 1', ' 200', ' 30', ' item a'], [' 1', ' 500', ' 20', ' item b']] 
```

然后将其传递给 django 中的模板。

我正在尝试使用这些数据生成一个表：

每个内部括号（本示例中有 2 个：`[' 1', ' 200', ' 30', ' item a']`和`[' 1', ' 500', ' 20', ' item b']`）需要在表中的新行中。因此，对于此示例，将有 2 行。

内部括号内的每个字段都必须放在表中的一个新列中。所以这个表将有 4 列和 2 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:19:47.807

您需要的基本模板标签是[`for`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)标签：

```
{% if my_list %}
    <table>
    {% for row in my_list %}
        <tr>
        {% for item in row %}
            <td>{{ item }}</td>
        {% endfor %}
        </tr>
    {% endfor %}
    </table>
{% endif %} 
```

我还使用了一个标签，因此如果列表中没有行，`if`您最终不会得到一组空的标签。`table`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:17:38.380

[`{% for ... %}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)

# java - 使用数组中的参数进行可变参数初始化 (Java)

> ID：10158485
> 
> 赞同：1
> 
> 时间：2012-04-15T00:15:02.750
> 
> 标签：java, arrays, parameters, variadic-functions

Antescript：我知道有一个先前的 SO 问题，其标题听起来像是指的是完全相同的问题。它没有。

无论如何，这个问题有点奇怪 - 有很多更好的方法可以解决这里的问题，但我很好奇如何解决我的特殊困境。

假设我有一个方法，它使用*可变参数*来接受任意数量的元素，可能是 type `Integer`。如果我有一个任意长度的整数数组，有没有办法让我使用由所述数组的每个元素组成的逗号分隔的参数列表来调用我的方法？

这是一个简短的人为示例：

```
Integer[] paramList = new Integer {1, 2, 3};
varMethod(paramList[0], paramList[1], paramList[2]);
// varMethod({{for (param : paramList) {param;}}});

public void varMethod(Integer...values) {
    for (Integer value : values) {
        foo(value);
    }
} 
```

那条注释掉的行暗示了我想要做什么。由于`paramList`整数是任意长度的，因此`varMethod`使用显式请求的每个元素（第 2 行）调用将不起作用。我想知道是否有一种方法可以从数组的元素中动态生成逗号分隔的参数列表。

再一次，我意识到在这样的例子中，有更好的方法来解决整个问题，但请注意我已经简化了代码，以便它只与我们在这里讨论的特定问题相关。解决我发布的代码的任何解决方法都不会概括为我真正正在解决的问题，这导致我首先制定了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:18:58.080

我想你只是在寻找：

```
varMethod(paramList); 
```

也许你没有意识到这`Integer...`是一个普通`Integer[]`数组的特殊变体。因此，既然`paramList`已经是一个`Integer[]`数组，您可以直接将它传递给方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:19:47.577

您可以只调用 varMethod(paramList);

# iphone - 按标签编辑标签 iOS

> ID：10158490
> 
> 赞同：3
> 
> 时间：2012-04-15T00:15:21.930
> 
> 标签：iphone, objective-c, ios, cocoa-touch, label

我到处都在寻找这个，但我找不到解决方案......

**我的目标：**我试图在我的故事板中编辑一个标签，而不是专门为该标签创建一个出口（我有 36 个标签）。

**问题：**我尝试了在另一个 Stack Overflow 问题中找到的基本代码行，但没有成功，并且出现错误...

```
UILabel *label = (UILabel *)[self viewWithTag:71]; 
```

错误：`No visible @interface for 'ViewControllerTwo' declares the selector 'viewWithTag:'`

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T00:18:57.257

将您的代码更改为

```
 |
                                    v
UILabel *label = (UILabel *)[self.view viewWithTag:71]; 
```

`UIViewController`没有`viewWithTag:`,`UIView`有

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T00:18:44.723

viewwithTag 是 UIView 上的方法，而不是 UIViewController 上的方法。你可能不得不这样称呼它：

```
UILabel *label = (UILabel *)[self.view viewWithTag:71]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T00:18:29.940

尝试使用`self.view`：

```
UILabel *label = (UILabel *)[self.view viewWithTag:71]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-14T05:49:48.300

正如@Paul.s 所说，`IBOutletCollection`可能是更好的方法。以防万一您需要`IBOutletCollection`：

```
@property (nonatomic, strong) IBOutletCollection(UILabel) NSArray *labels; 
```

或者在 Swift 中：

```
@IBOutlet var imageViews: [UIImageView]! 
```

# java - 如何从另一个字符串输入值到表字符串？

> ID：10158495
> 
> 赞同：-4
> 
> 时间：2012-04-15T00:15:58.310
> 
> 标签：java, string

我这里有东西：

```
String b = "Test";  
String a[] = b; 
```

如何解决这个问题呢？为什么错了？我想输入另一个字符串中的值。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:18:13.073

`String a[]`表示这`a`是一个字符串数组。如果要放入`b`，`a`则需要执行以下操作：

```
String a[] = new String[1]; // creates an array of size 1
a[0] = b; // puts b as the first element in a 
```

或等效地（如果您只想要一个 1 元素数组），

```
String a[] = {b}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:20:43.727

`String[] a`是一个数组。一个数组可以保存许多不同的值，它们都是特定类型的。

在您的示例中，您没有为数组指定大小，这是必需的。

```
String[] a = new String[1];
a[0] = b; 
```

您还可以使用花括号为您希望输入数组的元素数量提供上下文。对于变量，而不是文字，第一种方法工作得很好。

```
String[] a = {"Test"}; 
```

# ms-access - vb 和 Outlook - 仅显示来自使用 vb 代码的联系人的消息（来自访问）

> ID：10158496
> 
> 赞同：1
> 
> 时间：2012-04-15T00:16:24.307
> 
> 标签：ms-access, search, vba, outlook

使用 Office 2010。

在访问中，我有一个包含客户联系信息的表格。

客户电子邮件旁边的按钮**OPENS OUTLOOK并应用过滤器以在****OUTLOOK**中仅显示来自该客户的电子邮件。

```
Private Sub filterOutlook_Click()
   'bit of code here which checks if outlook is open, if not then"
   Shell "Outlook.exe /cleanviews"

   'email of contact field(hyperlink) is retreived
   contactname = Left$([E-mail contact].Value, InStr([E-mail contact].Value, "#") - 1)

   filtermail contactname
End Sub 
```

过滤邮件功能如下：

```
Public Sub filtermail(name As String)

Dim objView As View
Set objView = outlook.ActiveExplorer.CurrentView

    If LenB(name) = 0 Then
        objView.Filter = vbNullString
    Else
        objView.Filter = _ 
        "http://schemas.microsoft.com/mapi/proptag/0x0065001f CI_STARTSWITH '" & name & "'"
    End If

objView.Save
objView.Apply

End Sub 
```

该代码工作正常，但仅将过滤器应用于当前在**OUTLOOK**中打开的文件夹。

如果您有多个帐户，则必须先打开收件箱或已发送文件夹，然后应用过滤器。比较麻烦。

我想将上面的代码替换为可以在 Outlook 中控制搜索栏的代码。 [搜索栏](http://blogs.msdn.com/blogfiles/outlook/WindowsLiveWriter/BetterSearchinginOutlook2010_DFBB/image_4.png)

因此，选择“所有邮件项目”或“所有 Outlook 项目”，按帐户或日期对结果进行排名，并使用以下查询“system.structuredquery.virtual.from:(name)”和“to:(name)”。

手动使用搜索栏会给我想要的结果。我可以跨不同帐户和文件夹查看客户的所有历史记录。但是让它自动化会很棒。

有可能吗，我怎样才能做到这一点。

总而言之：当单击电子邮件旁边的按钮时，打开 Outlook 并显示来自该电子邮件的消息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:07:57.330

找到了：

```
Public Sub filtermail(name As String)

Dim myOlApp As New outlook.Application

    If LenB(name) = 0 Then
        myOlApp.ActiveExplorer.ClearSearch
    Else
        myOlApp.ActiveExplorer.Search "from:(" & name & ") OR to:(" & name & ")", olSearchScopeAllFolders
    End If

Set myOlApp = Nothing
End Sub 
```

需要一些测试，但现在可以使用。要调用函数/子，请参阅第 1 篇文章中发布的代码。

# javascript - 在jquery中单击时如何将轮播项目移动到中间

> ID：10158497
> 
> 赞同：2
> 
> 时间：2012-04-15T00:16:30.610
> 
> 标签：javascript, jquery, css, carousel

如何使轮播中心成为我单击到中间的项目？我到处寻找答案，但它们不是直接的答案......有人可以帮助我吗？

这是我到目前为止所做的：http: [//jsfiddle.net/sp9Jv/](http://jsfiddle.net/sp9Jv/)

HTML：

```
<div id="wrapper">
    <div id="carousel">
        <a href="#" class="prev">prev</a>
        <a href="#" class="next">next</a>

        <div class="viewport">
            <ul>
                <li><a href="#">Un</a></li>
                <li><a href="#">Deux</a></li>
                <li><a href="#">Trois</a></li>
                <li><a href="#">Quatre</a></li>
                <li><a href="#">Cinq</a></li>
                <li><a href="#">Six</a></li>
                <li><a href="#">Sept</a></li>
                <li><a href="#">Huit</a></li>
            </ul>
        </div>
        <!-- viewport -->

    </div>
    <!-- carousel -->
</div>
<!-- wrapper --> 
```

JavaScript：

```
var carousel = $('#carousel'),
    prev = carousel.find('.prev'),
    next = carousel.find('.next'),
    viewport = carousel.find('.viewport'),
    item = viewport.find('li'),
    itemWidth = item.outerWidth(true),
    itemNum = item.length,
    itemList = viewport.find('ul');

itemList.width(itemWidth * itemNum);

var moveCarousel = function(dir) {
    itemList.animate({ left: '-=' + (itemWidth  * dir) + 'px' }, 400);  
};

//prev
prev.on('click', function(e) {
    e.preventDefault();
    moveCarousel(-1);
});

//next
next.on('click', function(e) {
    e.preventDefault();
    moveCarousel(1);
});

//carousel item
item.on('click', 'a', function(e) {
    var self = $(this),
        selfIndex = self.index(),
        distance = itemList.width() / 2,
        selfPos = self.position(),
        selfPosLeft = selfPos.left,
        viewportPosLeft = viewport.position().left;

    e.preventDefault();

    //move item to middle, but it doesn't work... 
    if (selfPosLeft > Math.floor(viewport.width())/3) {
        itemList.animate({ left: '-' + Math.floor(viewport.width())/3 + 'px' }, 400);
    }

    if (selfPosLeft < Math.floor(viewport.width())/3) {
        itemList.animate({ left: Math.floor(viewport.width())/3 + 'px' }, 400);
    }
}); 
```

CSS：

```
#wrapper {
    width: 500px;
    margin: 20px auto;
}
#carousel {
    position: relative;
}
.viewport {
    width: 260px;
    border: 1px solid #6e6e6e;
    height: 80px;
    overflow: hidden;
    position: relative;
    margin-left: 100px;
}
.prev, .next {
    position: absolute;
}
.prev {
    top: 20px;
    left: 0;
}
.next {
    top: 20px;
    right: 0;
}

.viewport ul {
    position: absolute;
}
.viewport li {
    float: left;
    margin-right: 10px;
}
.viewport li a {
    display: block;
    width: 80px;
    height: 80px;
    background: #ddd;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:10:42.323

当您准备好所有项目所需的所有信息后，您可以根据单击的项目计算左侧的值。

这是我的修改：

我已经用这个函数绑定了轮播项目的点击动作，并使用 self 关键字传递了点击的项目。

```
var itemClicked=function(item){
    var itemIndex=$(item).index(),
        newLeft=(itemIndex*itemWidth*-1)+Math.floor(($(viewport).width()/itemWidth)/2)*itemWidth;
    $(itemList).animate({left:newLeft+"px"},400);
}; 
```

您可以在此网址上检查它：http: [//jsfiddle.net/rUZHg/3/](http://jsfiddle.net/rUZHg/3/)

我认为这应该工作，尽管查看元素的数量，同时它计算左侧 0 和中心元素左侧之间的填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:43:14.677

好吧，它很丑，我希望它能给你一些想法。

我创建了一个`currentItem`跟踪中心内容的全局变量。每次轮播移动时都会更新。

我发现的一个非常有用的变量是`selfPosLeft`它告诉我点击了什么。我应该补充一点，这`90`是我通过点击获得的倍数。必须链接到你的 CSS，我不知道如何动态找到这个数字。

请尝试一下:) [http://jsfiddle.net/sp9Jv/4/](http://jsfiddle.net/sp9Jv/4/)

好吧，我在想象，当您拥有超过 3 个项目时，您可以更改代码以计算当前项目与`selfPosLeft`单击项目之间的差异，我将把它留给您 :) 像这样，似乎有效。[http://jsfiddle.net/sp9Jv/5/](http://jsfiddle.net/sp9Jv/5/)

# macos - 在 tmux 模式下丢失 vim 颜色方案

> ID：10158508
> 
> 赞同：249
> 
> 时间：2012-04-15T00:18:07.457
> 
> 标签：macos, vim, tmux, iterm

我正在运行 iterm2，当我处于 tmux 模式时，我在 vim 中设置的颜色方案不会出现。只有我在 iterm 中设置的配色方案。如果我从 shell 运行 vim，colorscheme 看起来是正确的 - 只有当我处于 tmux 模式时。

我已经尝试`:colorscheme molokai`在 vim 中进行设置（请参见下面的屏幕截图）并且它没有改变 - 同样，iterm2 的默认颜色方案仍然存在。

我是否缺少 iterm 或 tmux.conf 的某些设置？我的 dotfles 在 github 上。

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-04-22T01:23:12.650

我有同样的问题。唯一的区别是我使用的`solarize`是 then `molokai`。

为了解决这个问题，我在以下位置设置了一个别名`~/.bashrc`：

```
alias tmux="TERM=screen-256color-bce tmux" 
```

并设置`default-terminal`选项`~/.tmux.conf`：

```
set -g default-terminal "xterm" 
```

最后，`$ source ~/.bashrc`加载新的别名。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2014-03-18T13:53:52.860

我尝试了上述所有解决方案，最终对我有用的是将以下几行放入`.tmux.conf`：

```
set -g default-terminal "xterm-256color" 
```

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2012-04-15T16:33:47.010

正如@romainl 上面提到的，我需要通过添加`-2`标志来强制 tmux 使用 256 种颜色：

```
$ tmux -2 
```

我添加`alias tmux='tmux -2'`到我的 bash_profile，所以，我不会忘记 :)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2014-09-19T18:18:35.603

我才发现为什么我有很多困惑。我和这里的其他人一样，很难让默认终端设置生效。我记得我在后台有一个 tmux 会话。我重新连接了我的会话，关闭了我的进程，并关闭了所有 tmux 进程。下次我重新启动 tmux 时，默认终端设置`.tmux.conf`开始生效。我不知道其他人是否也在这样做，但我建议在修改`.tmux.conf`文件之前关闭所有 tmux 进程。

我的设置可以在我的本地机器（带有 iTerm2 的 OSX 10.9.5）上工作，而无需对`.bashrc`or进行任何修改`.bash_profile`。我所做的只是添加该行`set -g default-terminal "xterm-256color"`并`~/.tmux.conf`重新启动所有 tmux 进程。

我的远程设置（SSH 到 Ubuntu 14.04）以完全相同的方式工作，无需对`.bashrc`. 我只是简单`set -g default-terminal "xterm-256color"`地`~/.tmux.conf`在我的远程机器上添加并重新启动了所有远程 tmux 进程。

你可以`echo $TERM`在 tmux 会话中测试 Vim 看到的内容。它一直说`screen`是值，直到我重新启动所有 tmux 进程，此时它`xterm-256color`按预期反映。

希望有帮助。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-06-10T20:36:22.043

所以这有点陈旧，但值得一提的是，使用屏幕经常会破坏 Home 和 End 键。使用

```
export TERM="xterm-256color" 
```

in 应该保留这些功能并允许配色方案（或电源线）正常工作。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2015-07-06T21:18:51.420

我需要 vim 在 ubuntu 的终端和 cygwin/mintty 的 Windows 上使用 tmux 正确显示。我通过结合这样的答案来实现它。

在 .bashrc 中：

```
alias tmux="tmux -2" 
```

在 .vimrc 中：

```
" use 256 colors in terminal
if !has("gui_running")
    set t_Co=256
    set term=screen-256color
endif

" fix cursor display in cygwin
if has("win32unix")
    let &t_ti.="\e[1 q"
    let &t_SI.="\e[5 q"
    let &t_EI.="\e[1 q"
    let &t_te.="\e[0 q"
endif 
```

基于这个问题的答案，[这个 Vim wiki 页面](http://vim.wikia.com/wiki/256_colors_in_vim)和[这个块光标问题](https://superuser.com/questions/634326/how-can-i-get-a-block-cursor-in-vim-in-the-cygwin-terminal)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-02-26T03:48:43.083

如果有人需要 24 位颜色支持：

Tmux 从 2.2 版开始支持 24 位颜色。如果您的终端支持 24 位颜色，请将您的终端添加到终端覆盖设置。例如，

```
set -ga terminal-overrides ",xterm-256color:Tc" 
```

我的环境清单：

*   macOS Sierra 10.12.3
*   iTerm2 3.0.14（报表终端类型为`xterm-256color`）
*   neovim 0.1.7（通过添加启用 24 位颜色：`xterm-256color`to `.vimrc`）
*   tmux 2.3（添加`set -ga terminal-overrides ",xterm-256color:Tc"`到`.tmux.conf`）

我不需要添加任何其他内容`.bashrc`或`.zshrc`.

希望这会有所帮助。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2017-01-13T02:16:21.370

我已经尝试了上面的所有说明，我发现最重要的是我必须在我的 .bashrc 文件中明确添加以下行。

```
export TERM=screen-256color 
```

我不知道为什么 alias tmux="TERM=screen-256color-bce tmux" 不起作用。我使用 Sierra 10.12.1。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-02-23T04:28:54.910

由于这是 Google 上的第一个结果，并且以上都没有帮助..想要发布此内容，以便有人可能会发现它有帮助

在`.vimrc`：

```
set background=dark
set t_Co=256 
```

高温高压

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-04-01T21:26:09.827

只需要处理这个问题，虽然以前发布的所有答案都有帮助，但在我的情况下它们并没有解决问题。

通过**删除**我的以下行来解决我的问题`.vimrc`：

```
set termguicolors 
```

无论如何，这与另一条指令有关。

现在，在我以前的答案中找到以下行`.tmux.conf`：

```
export TERM="screen-256color" 
```

一切都美好而多彩。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-09-28T19:17:54.257

在 .tmux.conf 中添加以下行适用于 macOS Sierra 10.12.6，

设置 -g 默认终端“screen-256color”

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-10-28T13:18:14.763

如果您使用`tmuxinator`or `mux`，则需要在`.bashrc`or中添加这些`.zshrc`：

```
alias tmux='TERM=screen-256color tmux -2'
alias tmuxinator='TERM=screen-256color tmuxinator'
alias mux='TERM=screen-256color mux' 
```

这些强制在终端中使用 256 色。

然后`tmux`,`tmuxinator`和`mux`command 将全部工作。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-11-10T23:02:25.773

如果你发现自己和我在同一个位置，以上都不起作用..试试这个：

在`.tmux.conf`：

```
set -g default-terminal "xterm" 
```

在 bash 配置中（可能是`.bashrc`或`.bash_profile`）：

```
alias tmux="tmux -2" 
```

然后运行：

```
killall tmux 
```

然后重新启动 tmux

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-12-19T08:33:55.563

我已经删除了 line `set termguicolors`，但它不起作用。`set notermguicolors`而是在`.vimrc`作品中设置。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-06-30T02:49:03.953

在 tmux 手册页中，添加如下标志：

```
tmux -2 
```

该`-2`标志强制 tmux 在 256 色模式下运行。

这对我有用

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-01-03T07:04:05.627

为了设置正确的颜色并消除 Ubuntu 和 Mac 中的渲染问题：

[检查这个](https://superuser.com/questions/399296/256-color-support-for-vim-background-in-tmux/1021078#1021078)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-09-02T03:46:35.417

在我的 .tmux.conf 中使用这两行对我有用，我使用的是带有 Alacritty 的 Ubuntu 20.04。

```
set  -g default-terminal "tmux-256color"
set -ag terminal-overrides ",alacritty:RGB" 
```

在 YodaEmbedding 提供的评论中，在 alacitty 的 repo 上找到了它们：

[https://github.com/alacritty/alacritty/issues/109](https://github.com/alacritty/alacritty/issues/109)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-07-15T13:59:57.447

尝试`TERM`在我的`.tmux.conf`.

我在 tmux 中修复 vim 颜色的解决方案是将这一行添加到`.tmux.conf`：

```
set -g terminal-overrides 'xterm:colors=88' 
```

我不确定为什么需要这个覆盖，因为我`TERM=xterm`和我也将 iTerm 设置为 xterm，但它似乎有效。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-03-06T16:04:12.167

我正在使用 Ubuntu 仿生 18.04.4 LTS 和 tmux 2.6。我有同样的问题，只需将其添加到 .bashrc 即可解决

```
export TERM=screen-256color 
```

当然不要忘记来源它。 `source ~/.bashrc`

或者只是重新启动您的终端

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-08-30T10:54:05.397

*环境*：

Fedora 29 工作站 x86_64，GNOME 终端 3.30.1

VIM - Vi IMproved 8.1（2018 年 5 月 18 日，2019 年 3 月 8 日 09:25:44 编译）

GNU bash，版本 4.4.23(1)-release (x86_64-redhat-linux-gnu)

多路复用器 2.7

vim 正在使用日晒方案。

`.vimrc`

```
...
let g:solarized_termcolors=256
let g:solarized_termtrans=1

syntax enable
set background=dark
colorscheme solarized
... 
```

bash 中的值`$TERM`是：

```
[u@loc ~]$ echo $TERM
xterm-256color
[u@loc ~]$ tput colors
256 
```

* * *

**方法1**：有效。

检查`$TERM`tmux 会话中的值。得到

```
[u@loc ~]$ echo $TERM
screen
[u@loc ~]$ tput colors
8 
```

所以，只需`export TERM=screen-256color`在 tmux 会话中设置。此方法仅适用于会话的当前窗格。

* * *

**方法2**：有效。

创建`~/.tmux.conf`文件并添加`set -g default-terminal "tmux-256color"`到文件中。

或者只是运行`echo "set -g default-terminal \"tmux-256color\"" > ~/.tmux.conf`

然后杀死所有 tmux 会话。

启动一个新会话并检查`$TERM`tmux 会话中的值。得到

```
[u@loc ~]$ echo $TERM
tmux-256color
[u@loc ~]$ tput colors
256 
```

vim 彩色方案适用于所有窗格和所有 tmux 会话。

我也试过`xterm-256color`并`screen-256color`在`~/.tmux.conf`. 它们都可以很好地为 vim 方案着色。

顺便说一句，我的`~/.bash_profile`,`~/.bashrc`和中没有与此设置相关的任何配置`~/.vimrc`。

另请参阅[https://github.com/tmux/tmux/wiki/FAQ#how-do-i-use-a-256-colour-terminal](https://github.com/tmux/tmux/wiki/FAQ#how-do-i-use-a-256-colour-terminal)，[https://github.com/tmux/tmux/wiki/FAQ#为什么你使用屏幕终端描述内部 tmux](https://github.com/tmux/tmux/wiki/FAQ#why-do-you-use-the-screen-terminal-description-inside-tmux)

其他有用的讨论是[tmux #699 中的 Vim 颜色方案更改](https://github.com/tmux/tmux/issues/699)、[256-color-support-for-vim-background-in-tmux](https://superuser.com/questions/399296/256-color-support-for-vim-background-in-tmux/1021078#1021078)、[getting-256-colors-to-work-in-tmux](https://unix.stackexchange.com/questions/1045/getting-256-colors-to-work-in-tmux)、[tmux-term-and-256 -颜色支持](https://unix.stackexchange.com/questions/118806/tmux-term-and-256-colours-support/118903#118903)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-12-11T11:42:58.630

我正在使用 gnome 终端，这解决了问题，但是 (0) 不要忘记：

```
killall tmux 
```

(1) 编辑 .tmux.conf

```
# 24 bit color
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc" 
```

(2) 编辑：.vimrc

```
" Enable true color
if exists('+termguicolors')
  let &t_8f = "\<Esc>[38;2;%lu;%lu;%lum"
  let &t_8b = "\<Esc>[48;2;%lu;%lu;%lum"
  set termguicolors
endif 
```

rinetd 在 tmux repo 问题上发布的解决方案： [https ://github.com/tmux/tmux/issues/1246](https://github.com/tmux/tmux/issues/1246)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-04-19T19:47:08.390

**假设**您已经有与终端匹配的 vim 颜色：

1.  杀死所有正在运行的 tmux 会话`tmux kill-server`

2.  在中为 tmux 创建用户配置文件`~/.tmux.conf`

3.  添加到`.tmux.conf`以下行：
    `set -g default-terminal "tmux-256color"`
    `set -ga terminal-overrides ",xterm-termite:Tc"`

4.  在命令行中运行`echo $TERM`

5.  替换`xterm-termite`为返回的输出`echo $TERM`

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-09-28T01:21:49.257

我使用 Fedora 34。

我将此添加到 .tmux.conf 文件

`set -g default-terminal "xterm-256color"`

然后将其添加到 .vimrc

```
set background=dark
set t_Co=256 
```

# sql - 使用 F# 3.0 进行动态 SQL 查询？

> ID：10158512
> 
> 赞同：4
> 
> 时间：2012-04-15T00:18:25.243
> 
> 标签：sql, f#

我曾尝试使用 FLINQ，但它与 F# 3.0 beta 相比已经过时了。

有人可以给我一些关于如何在 F# 中创建动态 SQL 查询的指示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-30T11:18:38.293

我们最近开发了一个库，`FSharpComposableQuery`旨在支持 F# 3.0 及更高版本中更灵活的查询表达式组合。它旨在作为重载标准查询构建器的直接替代品。

Tomas 的例子可以修改如下：

```
open FSharpComposableQuery

// Initial query that simply selects products
let q1 = 
  <@ query { for p in ctx.Products do 
             select p }  @>

// Create a new query that specifies only expensive products
let q2 = 
  query { for p in %q1 do
          where (p.UnitPrice.Value > 100.0M) } 
```

这只是引用查询表达式并将其拼接到第二个查询中。但是，这会导致带引号的查询表达式，默认`QueryBuilder`可能无法转换为单个查询，因为`q2`计算结果为（等效）表达式

```
query { for p in (query { for p in ctx.Products do 
                          select p }) do
        where (p.UnitPrice.Value > 100.0M) } 
```

其中（如在 Tomas 的原始代码中）可能会通过将所有产品加载到内存中并在内存中进行选择来评估，而我们真正想要的是：

```
query { for p in ctx.Products do
        where (p.UnitPrice.Value > 100.0M) } 
```

这将变成一个 SQL 选择查询。 `FSharpComposableQuery`覆盖`QueryBuilder`以执行此转换以及其他转换。因此，可以更自由地使用引用和反引用来组合查询。

项目主页在这里： http: [//fsprojects.github.io/FSharp.Linq.ComposableQuery/](http://fsprojects.github.io/FSharp.Linq.ComposableQuery/)

在我刚刚提供给另一个（旧）关于动态查询的问题的答案中还有一些讨论：[你如何在 F# 中编写查询表达式？](https://stackoverflow.com/questions/13826749/how-do-you-compose-query-expressions-in-f)

非常欢迎发表评论或提出问题（特别是如果出现问题或您认为应该起作用的东西不起作用）。

[编辑：更新了项目页面的链接，这些页面刚刚更改为删除“实验”一词。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T12:11:27.500

在 F# 3.0 中，查询是自动引用的，因此您不能使用`<@ foo %bar @>`使组合查询成为可能的引号拼接（语法）。您可以通过使用拼接组合查询来编写的大部分内容仍然可以通过从先前的源创建新查询并添加即过滤以“通常的 LINQ 方式”完成：

```
// Initial query that simply selects products
let q1 = 
  query { for p in ctx.Products do 
          select p }

// Create a new query that specifies only expensive products
let q2 = 
  query { for p in q1 do
          where (p.UnitPrice.Value > 100.0M) } 
```

这样，您可以动态添加条件、动态指定投影（使用`select`）并执行其他一些查询组合。但是，您无法像使用显式引用那样获得编写查询的全部灵活性。我想这是 F# 3.0 必须为类似于 C# 中存在的更简单的语法付出的代价。

原则上，您应该能够使用`query.Select`（等）运算符显式编写查询。这将使用显式引用来编写，因此您应该能够使用拼接。但是，我不完全知道翻译是如何工作的，所以我不能给你一个工作样本。像这样的东西应该可以工作（但语法非常难看，所以最好只使用字符串或其他一些技术）：

```
<@ query.Select(Linq.QuerySource<_, _>(ctx.Products), fun prod -> 
     // You could use splicing here, for example, if 'projection' is
     // a quotation that specifies the projection, you could write:
     //   %projection
     prod.ProductName) @>
|> query.Run 
```

F# 3.0 中的查询基于`IQueryable`，因此可以使用与[我为 C# 实现的技巧相同的](http://tomasp.net/blog/dynamic-linq-queries.aspx)技巧。但是，我想某些细节会有所不同，所以我不希望它立即起作用。该想法的最佳实现是在[LINQKit](http://www.albahari.com/nutshell/linqkit.aspx)中，但我认为它不会直接在 F# 中工作。

因此，总的来说，我认为唯一有效的情况是第一个示例 - 您只需通过编写多个查询将其他查询运算符应用于查询。

# jquery - 输入字段中的值保留为用户类型

> ID：10158517
> 
> 赞同：0
> 
> 时间：2012-04-15T00:18:51.093
> 
> 标签：jquery, forms

我正在创建一个输入表单，并且我知道如何在 onfocus onblur 占位符等内容上进行操作。

除了在我的输入字段上分层一个 div 之外，这就是我想要做的..

当用户点击输入字段时（在这种情况下输入网站地址）

如何使 http:// 出现在输入字段中，并且当他们专注于该字段时，文本提示出现在 http:// 之后

所以他们所做的就是输入网站 URL 的其余部分。

例子： ![在此处输入图像描述](../Images/a97fde6ed09d123b8209671beeab0b8e.png)

```
 <fieldset>
     <input type="text" class="requiredField" name="websitename" value="http://" onfocus="if(this.value=='http://')this.value='';" onblur=  "if(this.value=='')this.value='http://';"/>
   </fieldset> 
```

在上面的示例中，http:// 出现在 input 元素中。但是在点击时，它消失了。我想要做的是，提示出现在 http:// 之后，这样你就可以输入他们的网站地址。

也许jQuery可以解决这个问题，很难知道在谷歌上搜索什么来获得一些想法。

我确信我已经看到网站实现了这一点。我不只是想要一张图片，因为在提交时，我仍然希望它解析完整的 URL，而不仅仅是他们实际输入的 www.fsfsdfsfsd.com 位。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:26:42.793

获取值并重新插入值。

```
$('input[name="websitename"]').focus(function() {
    var theVal = $(this).val();
    $(this).val(theVal);
}); 
```

抱歉，已编辑。忘记了右括号。

编辑 2：您可能会看到的部分问题是您的输入有 onfocus 和 onblur ，并且 onfocus 正在清除现有值。删除它并尝试我的脚本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-15T00:44:59.367

如果我理解正确，您需要做的就是删除`onfocus`和`onblur`事件处理程序。在这种情况下，您不需要它们，因为您总是将`input`' 值设置为`http://`. *同时使用占位符和*默认值是没有意义的。

顺便说一句：做占位符的更好方法是使用`placeholder`属性：

```
<input type="url" name="website" placeholder="Your website"> 
```

# appcelerator - Appcelerator Titanium - 如何在屏幕底部放置图像

> ID：10158524
> 
> 赞同：3
> 
> 时间：2012-04-15T00:19:13.793
> 
> 标签：appcelerator, titanium-mobile

我有一个主视图，然后在那个视图上，作为孩子，我有两个标签和一个图像。我希望标签从屏幕顶部一个接一个地流动，我希望图像在底部。我通过在主窗口中设置 layout:'vertical' 来使标签正确流动。但是一旦完成，我似乎无法将图像强制到底部。这是我的代码片段：

```
var self = Ti.UI.createView({
    backgroundColor:'#fff',
    layout:'vertical'
});

var l1 = Titanium.UI.createLabel({                  
    text:quote,
    color:'#000',
    shadowColor:'#ddd',
    shadowOffset:{x:2,y:2},
    font:{fontFamily:'Marker Felt',fontSize:24},
    top:20,
    left:15,
    right:15,
    height:'auto'
});
self.add(l1);

var l2 = Titanium.UI.createLabel({
    text:author,
    color:'#000',
    shadowColor:'#ddd',
    shadowOffset:{x:2,y:2},
    font:{fontSize:16},
    top:10,
        left:15,
        right:15,
    height:'auto',
    textAlign:'right'
});
self.add(l2);

var imgView = Titanium.UI.createImageView({
    image:myimage,
    setBottom:10,
    height:100
});
self.add(imgView); 
```

我尝试设置图像布局，但不起作用。如果我将“self”窗口布局更改为“absolute”，那么我似乎无法让标签一个接一个地清晰流动。第一个标签的高度可变，所以我需要它们相互跟随。

我正在使用钛 1.82。

谢谢。提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:05:47.210

您可能需要添加另一个视图。“基本”视图将在`top:0`和`height: 'auto'`

然后将 imgView 添加到“base” `bottom: 10`（`setBottom`不像你有的那样）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-10T06:07:27.390

只需设置底部：0；位置：固定；我认为这将帮助您设置屏幕底部的图像。如果它仍然无法正常工作，则意味着尝试使用 Html、Css 和 Javascript 进行设计，这将非常容易。

# unix - Unix 进程图混乱

> ID：10158528
> 
> 赞同：4
> 
> 时间：2012-04-15T00:19:54.227
> 
> 标签：unix, process

![在此处输入图像描述](../Images/7a3c63b0cca5e6e063e538e6b8c25d28.png)

你能告诉我 Unix 流程图中的两个红色箭头有什么区别吗？为什么抢占进程直接进入用户运行而不重新调度？我不太明白。为什么 Preempted 和 Ready to Run In Memery 用虚线连接？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:30:48.967

一个被抢占的进程*已*准备好在内存中运行，这就是为什么在此图的 Preempted 和 Ready to Run in Memory 状态之间有一条虚线。CPU 密集型进程通常会在整个时间片内完成工作并使用 CPU，直到在硬件级别触发计时器滴答并导致内核抢占该进程。这并没有使进程准备好运行，因为在抢占进程的行为中，内核保存了上下文切换所需的所有数据结构。

但是，抢占进程不一定准备好在*用户模式下*运行。相反，内核可能会抢占自己，因为当网络数据包到达、磁盘读取完成、计时器滴答声触发或其他一些事件导致抢占时，内核正在做一些工作。如果进程在被抢占时最初在用户模式下运行（我在第一段中描述的情况），那么只要调度程序决定它应该再次运行，它就会返回到用户模式。那是最左边的红色箭头。另一方面，如果进程在内核模式下运行时被抢占，则只要调度程序决定它应该再次运行，它就会返回内核模式。那是另一个红色箭头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:27:41.327

恕我直言，该图是伪造的。僵尸进程应该结束，但没有。否则僵尸进程会累积而他们不会。

# objective-c - 邮件 TabBarItem dismissModalViewControllerAnimated

> ID：10158534
> 
> 赞同：0
> 
> 时间：2012-04-15T00:21:10.783
> 
> 标签：objective-c, uiviewcontroller, uitabbarcontroller, uitabbaritem

我正在动态添加 TabBarItem (Email)。当我完成我的电子邮件时，我正在调用“dismissModalViewControllerAnimated”，但它只是关闭邮件视图。如何卸载视图控制器？

在我的电子邮件视图控制器中，我正在执行以下操作：

```
- (void)viewDidLoad => I would like to unload this view controller
{
    [super viewDidLoad];
    [self showEMail:nil]; => this display and dismisses email (I'm not calling present.. and dismiss... in a row. I'm using delegate methods to present and dismiss, which is fine.)
                              [self presentModalViewController:picker animated:YES];
                              [self dismissModalViewControllerAnimated:YES];

} 
```

选择我的标签栏项目后，它正在加载显示我的邮件模式控制器的视图控制器（可以说是“ABC视图控制器”）。邮件模式控制器被正确解除。但我想在卸载“ABC 视图控制器”后返回之前选择的选项卡项。是否可以？还是我在这里做错了什么？

提前致谢

拉玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T03:02:02.323

拉玛，你的问题很难理解。也许您需要为您呈现的视图控制器使用委托。

在您的代码中，连续调用 [self presentModalViewController...] 和 [self dismissModalViewController...] 没有意义。

您应该首先调用 [self presentModalViewController...]，将呈现视图控制器作为委托（例如，picker.delegate = self）

让模态视图控制器执行其业务，包括退出（如用户点击取消、关闭或其他），然后调用委托方法（类似于 [delegate didFinish...] 或 [delegate didCancel...]

现在轮到呈现视图控制器响应委托方法调用了，您可以在此处关闭模态视图控制器

注意：许多 UIKit 类都采用这种模式，例如 UIAlertView、UIActionSheetView、MPMoviePlayerViewController 等。你应该检查它们并制作你自己的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T12:51:08.567

我通过使用 ViewWiilAppear 方法来显示邮件模式演示者解决了问题。

我在关闭邮件模式演示者后选择标签栏控制器的索引。

self.tabBarController.selectedIndex = 0;

这解决了我的问题。

干杯

# npapi - axWrapper 想要的 NpapiPluginModule::Default = module -- "::Default" 去哪儿了？

> ID：10158535
> 
> 赞同：0
> 
> 时间：2012-04-15T00:21:24.497
> 
> 标签：npapi, firebreath

Firebreath 1.6 -- VC2010 -- FBAXExample -- np_winmain.cpp

我尝试使用 axWrapper，但出现错误。未知的 NpapiPluginModule::Default

```
np_winmain.cpp
...

using namespace FB::Npapi;
FB::Npapi::NpapiPluginModule *module = NULL;

void initPluginModule()
{
    if (module == NULL) {
        module = new NpapiPluginModule();
        NpapiPluginModule::Default = module;
    }
} 
```

我发现了 NpapiPluginModule.h 旧版本 may26, 2010。“静态 NpapiPluginModule *默认；”

```
namespace FB { namespace Npapi {

    class NpapiPluginModule
    {
    public:
        static NpapiPluginModule *Default;
        NpapiPluginModule(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:37:44.117

初始化的工作方式发生了变化；从项目中删除 np_winmain.cpp 和 dllmain.cpp ，它应该可以正常工作。

你知道，与其在stackoverflow上发布这个，你可以在github项目上创建一个问题......我会修复它=]（当我有时间时仍然会）

# mysql - 可以将这 2 个 SQL 查询更改为 1 个吗？

> ID：10158536
> 
> 赞同：1
> 
> 时间：2012-04-15T00:22:28.713
> 
> 标签：mysql

是否可以将这 2 个查询更改为 1 个？

查询 #1：

```
UPDATE  `pvdownloader`.`posts`
SET  `exists` =  'y'
WHERE source = ANY (SELECT source FROM dbdownloader.posts)
  AND `mangacount` = 0
  AND NOT `exists` = 'm' 
```

查询 #2：

```
UPDATE `pvdownloader`.`posts`
SET  `exists` =  'n'
WHERE `exists` = 'u'
  AND `mangacount` = 0 
```

我假设可以用 IF/ELSE 制作这样的东西，但我根本不知道如何使用它：<

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:28:36.880

也许这样的事情会起作用：

```
update
  pvdownloader.posts
set
  exists =
    case
      when source = any(select source from dbdownloader.posts) and mangacount = 0 and exists != 'm' then 'y'
      when exists = 'u' and mangacount = 0 then 'n'
    end
where 
  (source = any(select source from dbdownloader.posts) and mangacount = 0 and exists != 'm')
  or
  (exists = 'u' and mangacount = 0)
; 
```

正如@MostyMostacho 所建议的那样，我冒昧地改变了你的逻辑，没有双重否定。

# java - JFrame的真正方法是什么，在Linux中最小化它

> ID：10158549
> 
> 赞同：0
> 
> 时间：2012-04-15T00:23:54.087
> 
> 标签：java, linux, swing, jframe

我使用正常步骤制作了一个 JFrame，并将*setSize*、*setVisible*和*setResizable*设置为 false。

在windows操作系统下可以正常使用，但是在Fedora Linux下试了一下，发现窗口栏中没有最小化按钮，只有关闭按钮在窗口栏中，所以JFrame在Linux中用于最小化的方式不同?

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:10:58.817

JFrame中有一个简单的跨平台方法来操作框架：

```
frame.setState ( JFrame.ICONIFIED );
frame.setState ( JFrame.MAXIMIZED_BOTH );
frame.setState ( JFrame.NORMAL ); 
```

第一个将框架最小化到操作系统栏，第二个最大化框架，第三个将其返回到正常状态。所有操作都以原生方式完成。

# objective-c - 更改表格单元格背景颜色

> ID：10158550
> 
> 赞同：0
> 
> 时间：2012-04-15T00:24:18.237
> 
> 标签：objective-c, ios

我四处搜索并看到了各种答案，但还没有在这里解决我的问题。我正在尝试将我的 UITableViewCell 背景颜色设置为白色以外的颜色。我有

```
cell.contentView.backgroundColor = [UIColor colorWithRed:0.949 green:0.949 blue:0.949 alpha:1.0]; 
```

但这并不会改变我目前披露指示器的 accesoryView 的背景颜色。我试过了：

```
cell.accessoryView.backgroundColor = [UIColor colorWithRed:0.949 green:0.949 blue:0.949 alpha:1.0]; 
```

无济于事。我也尝试将其设置为清晰并与其他背景颜色混淆。我在这里想念什么？这似乎很容易解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:46:04.693

好吧，这再简单不过了……

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
   cell.backgroundColor = [UIColor colorWithRed:0.949 green:0.949 blue:0.949 alpha:1.0];
} 
```

显然是新手的错误。

# python - 如何在 tkinter 中使用图像作为背景？

> ID：10158552
> 
> 赞同：19
> 
> 时间：2012-04-15T00:24:47.457
> 
> 标签：python, tkinter

```
#import statements
from Tkinter import *
import tkMessageBox
import tkFont
from PIL import ImageTk,Image 
```

导入图像的代码：

```
app = Tk()
app.title("Welcome")
image2 =Image.open('C:\\Users\\adminp\\Desktop\\titlepage\\front.gif')
image1 = ImageTk.PhotoImage(image2)
w = image1.width()
h = image1.height()
app.geometry('%dx%d+0+0' % (w,h))
#app.configure(background='C:\\Usfront.png')
#app.configure(background = image1)

labelText = StringVar()
labelText.set("Welcome !!!!")
#labelText.fontsize('10')

label1 = Label(app, image=image1, textvariable=labelText,
               font=("Times New Roman", 24),
               justify=CENTER, height=4, fg="blue")
label1.pack()

app.mainloop() 
```

此代码不起作用。我想导入背景图像。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-16T20:45:22.077

一种简单的方法是使用`place`图像作为背景图像。这是`place`真正擅长做的事情。

例如：

```
background_image=tk.PhotoImage(...)
background_label = tk.Label(parent, image=background_image)
background_label.place(x=0, y=0, relwidth=1, relheight=1) 
```

然后，您可以像往常一样`grid`或`pack`在父级中的其他小部件。只需确保首先创建背景标签，使其具有较低的堆叠顺序。

注意：如果您在函数内部执行此操作，请确保保留对图像的引用，否则该图像将在函数返回时被垃圾收集器销毁。一种常见的技术是将引用添加为标签对象的属性：

```
background_label.image = background_image 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-27T06:49:00.177

用于设置背景图像的 Python 3 的简单 tkinter 代码。

```
from tkinter import *
from tkinter import messagebox
top = Tk()

C = Canvas(top, bg="blue", height=250, width=300)
filename = PhotoImage(file = "C:\\Users\\location\\imageName.png")
background_label = Label(top, image=filename)
background_label.place(x=0, y=0, relwidth=1, relheight=1)

C.pack()
top.mainloop 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-18T02:58:15.740

你可以使用这个：

```
root.configure(background='your colour') 
```

例子：-

```
import tkinter
root=tkiner.Tk()
root.configure(background='pink') 
```

# c# - 使用不同的 Thread.sleep() 持续时间来控制播放器速度？

> ID：10158553
> 
> 赞同：2
> 
> 时间：2012-04-15T00:24:54.427
> 
> 标签：c#, .net, multithreading, drawing

如果“自行车”列表中的一个对象包含布尔值 isBoosting，我正在尝试更快地绘制线（）。当列表包含两辆自行车时，结果是两辆自行车似乎都在加速，而其中只有一辆自行车“正在加速”。有谁知道为什么？如果对象不包含 isBoosting 的 true 值，线程不应该“移动”更慢吗？

```
foreach (LightBike b in bikes) //draw bikes
{

    if (b.isBoosting && b.boostCounter > 0) //player is boosting
    {
         Thread.Sleep(GAME_SPEED - 5);
         b.boostCounter--;
         if (b.boostCounter == 0)
         {
             b.isBoosting = false;
             b.boostCounter = 20;
         }
    }
    else
    {
        Thread.Sleep(GAME_SPEED);
    }

    canvas.DrawLine(new Pen(b.color, BIKE_SIZE) { EndCap = System.Drawing.Drawing2D.LineCap.Square }, b.location, b.getNextLocation());

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:35:30.243

这有几个问题。

首先，因为它是一个单线程，所以当您休眠一段时间时，线程会被取消调度 - 不会进行渲染（在您的情况下，这意味着既不会绘制“增压”自行车也不会绘制其他自行车）。实际绘制的线总是从 b.location 到 b.getNextLocation()，这对于增压和未增压的自行车（我假设）是相等的。

其次，您将逻辑与渲染代码混合在一起......

确实，您应该将自行车实现为某种模型，并区分模型中的自行车速度和渲染，将其排除在渲染代码之外。

理想情况下，该模型将包含每辆自行车的速度矢量（由一个滴答计数的加速度矢量修改，与渲染周期无关），并且所有渲染都会绘制适当的线。

因此，基本上将您的提升代码放入 b.getNextLocation() 而不是 Draw()，并从绘图代码中删除条件语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:39:29.727

假设有两辆自行车，A 和 B，（不是加速）。让我们经历几个循环​​：

```
A -- wait GAME_SPEED
Redraw A
B -- wait GAME_SPEED
Redraw B
A -- wait GAME_SPEED
Redraw A
B -- wait GAME_SPEED
Redraw B 
```

A 重绘之间的时间 = B 重绘之间的时间 = GAME_SPEED*2。

现在假设 B 正在提升：

```
A -- wait GAME_SPEED
Redraw A
B -- wait GAME_SPEED - 5
Redraw B
A -- wait GAME_SPEED
Redraw A
B -- wait GAME_SPEED - 5
Redraw B 
```

B 重绘之间的时间 = A 重绘之间的时间 = GAME_SPEED*2 - 5。

这只是向您展示了您所观察到的事情发生的原因：每辆自行车都在等待每个人的延迟，而不仅仅是他们自己的。

解决这个问题的唯一方法是有一个“屏幕刷新”延迟，并通过更改对象移动的距离而不是时间延迟来控制速度。

# php - 将数组元素组合成单个字符串

> ID：10158554
> 
> 赞同：-1
> 
> 时间：2012-04-15T00:25:05.570
> 
> 标签：php, arrays

所以这就是我想要做的..

```
$sql="SELECT * FROM `members";
while($rew = mysql_fetch_array($sql)){
    $var[] =",'".$rew['username']."'";
}
print_r ($var) 
```

所以我得到了结果：

```
Array ( [0] => ",'John'", [1] => ",'Mason'", [2] => ",'Greg'", [3] => ",'Paul'" ) 
```

所以现在我希望变量在我回显时显示所有结果。例如：

```
<?php echo $var[1] ?> 
```

结果将是公正的`,'Mason'`。

我如何得到它，以便我可以回显 $var[*] 并获得所有结果。“约翰、梅森、格雷格、保罗”。

很长一段时间以来，我一直试图弄清楚这一点，这让我感到非常沮丧。有人可以帮帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:28:25.870

使用 PHP 的[`implode`](http://php.net/manual/en/function.implode.php)函数。

```
<?php echo implode(",", $var) ?> 
```

并将您的循环代码更改为：

```
$var[] = $rew['username']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:29:34.910

您不能直接在数组上使用 echo 。*您可以使用for*或*foreach*等控制结构循环遍历数组，也可以使用旨在对数组进行操作的内置函数。要获得您正在寻找的输出，请尝试：

```
<?php echo implode(',', $var);?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:30:42.407

这是一个很好的教程：[Tizag - MySQL Fetch Array](http://www.tizag.com/mysqlTutorial/mysqlfetcharray.php)

这应该有效：

```
$query = "SELECT * FROM `members`"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){
    echo $row['username'];
    echo "<br />";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T00:32:48.850

您可以将循环更改为：

```
$var = "";
while($rew = mysql_fetch_array($sql)){
  $var .= ",'" . $rew['username'] . "'";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T01:06:49.800

这是一个简单的衬里，还添加了引号

```
<?php echo "'" . implode("','", $var) . "'"; ?> 
```

如果您使用 pdo，您可以更轻松地获取用户名

```
<?php
$usernames = $db->query("SELECT username FROM members")->fetchAll(PDO::FETCH_COLUMN);
echo "'" . implode("','", $usernames) . "'";
?> 
```

# android - Android：使用意图 setResults 来回传递数据

> ID：10158560
> 
> 赞同：4
> 
> 时间：2012-04-15T00:27:43.587
> 
> 标签：android, android-intent

我正在为 Android 创建一个基于 GPS 的应用程序，并且有 2 个活动 Main 和 LocNames。主要显示我的地图，LocNames 是获取用户想要的来源和目的地。当用户从菜单中选择它时，我想启动 LocNames，用户在框中输入名称，我希望将结果发送回 Main。但我在这样做时遇到了例外。

这是我的 Main 调用 LocNames 的方式：

```
 public boolean onOptionsItemSelected(MenuItem item) 
{
    switch (item.getItemId()) 
    {
        case R.id.showMyLocation:
            showCurrentLocation();
            break;
        case R.id.showRoute:
            Intent getLocationsIntent = new Intent(Main.this, LocNames.class);
            startActivityForResult(getLocationsIntent, 1);
            break;
    } 
```

这是我尝试在 LocNames 的 onClick 中设置结果的方式：

```
public void onClick(View v) 
{
    // TODO Auto-generated method stub
    source = sourceText.getText().toString();
    destination = destinationText.getText().toString();     
    Intent result = new Intent(LocNames.this, Main.class);
    result.putExtra("src", source);
    result.putExtra("dest", destination);
    setResult(RESULT_OK, result);
} 
```

但是当我尝试使用 LocNames 返回的结果时，我的应用程序崩溃了

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
 if(requestCode == 1 && resultCode == RESULT_OK)
    {
        source = data.getStringExtra("src");
        destination = data.getStringExtra("destination");           
    }
} 
```

我以前没有使用 setResults 的经验，但文档说它需要一个 int 和一个意图作为参数，所以我正在为此创建意图，但我在 LocNames 的 OnClick 中得到 NullPointerException。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T00:37:59.480

您不需要特定组件的意图。你只需要一个空的意图。所以更换

```
Intent result = new Intent(LocNames.this, Main.class); 
```

和

```
Intent intent = new Intent(); 
```

# php - htaccess 图像重定向

> ID：10158565
> 
> 赞同：0
> 
> 时间：2012-04-15T00:29:10.910
> 
> 标签：php, .htaccess

我有 2000 万张图片分布在 3 个子域中。这是一个例子：

subdomain3.domainabc.com/images/image5.jpg

我不希望将这些图像移动到我的新服务器/域，也不希望直接链接到它们。相反，我想在 domainxyz.com 上使用我的 htaccess 文件。因此，当调用此图像时，在 domainxyz.com 上：

subdomain3.domainxyz.com/images/image5.jpg

它转到服务器 domainabc.com 并显示正确的图像。这可能吗？这是我放入 domainxyz.com htaccess 文件的内容：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(.+)\.domainxyz\.com$
RewriteRule ^(.*)\.jpg$ http://%1\.domainabc\.com/$1\.jpg [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T00:32:29.997

看看：[外部页面的Mod-rewrite规则？](https://stackoverflow.com/questions/1699861/mod-rewrite-rule-for-external-pages)

隧道是不可能的；只重定向。

# php - 通过会话限制用户

> ID：10158566
> 
> 赞同：0
> 
> 时间：2012-04-15T00:29:18.253
> 
> 标签：php

我希望在我的网站上添加只有具有特定等级的人才能看到的页面，而其他人将被踢到不同的页面。这样做的简单方法是什么？

这就是我现在所拥有的。

```
 <?php  session_start(); 
  $rank=$_SESSION['rank'];
  $loggedinusername=$_SESSION['loggedinusername'];
  $loggedinuseremail=$_SESSION['loggedinuseremail'];
  ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:32:02.227

**对于单个允许的等级**

```
if ($rank != 'allowed_rank') {

    header('Location: some_other_page.php');
    exit;
} 
```

**对于 multiplpe 允许的等级**

```
if (!in_array($rank, array('allowed_rank1', 'allowed_rank2'))) {

    header('Location: some_other_page.php');
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:33:53.770

```
<?php

  session_start();
  if ($_SESSION['rank'] > 1) // or whatever your minimum rank is
  {
     header('Location: highrankpage.php');
  }
  else 
  {
     header('Location: lowrankpage.php');
  }

  exit();

?> 
```

您需要在要保护的每个页面上包含此代码。

# php - 带有图像和文本输入的消息框

> ID：10158579
> 
> 赞同：0
> 
> 时间：2012-04-15T00:32:00.673
> 
> 标签：php, javascript, jquery, plugins

我需要能够显示图像以及两行输入文本。我想知道是否有人知道可以做到这一点的优秀简约插件。它用于代理验证码之类的文本。不会太大。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:35:36.587

我建议使用[jQuery Tools](http://jquerytools.org)，特别是[Overlay](http://jquerytools.org/demos/overlay/index.html)。它看起来像这样：

```
<div id="overlay">
    <div><img src="" id="picture" /></div>
    <div><input type="text /><input type="text" /></div>
    <button class="close">Submit</button>
</div> 
```

使用基本覆盖代码：

```
$("#overlay").overlay({
    closeOnClick: false,
    closeOnEsc: false
}); 
```

然后，您可以使用该`onBeforeClose`事件来执行任何提交操作、验证等（[此处](http://jquerytools.org/documentation/overlay/index.html)的文档）。

如果需要在页面加载后更改图像，可以使用以下内容：

```
$("#picture").attr("src", varWithSource); 
```

如果您需要，您还可以使用 jQuery Tools 的表单工具进行验证，并将其构建为[一个覆盖层内的表单](http://jquerytools.org/demos/combine/html5-form/index.html)。

# java - 将字符串转换为 JNA 的指针

> ID：10158582
> 
> 赞同：5
> 
> 时间：2012-04-15T00:32:07.227
> 
> 标签：java, winapi, jna

我正在尝试使用 JNA 在 Windows 中查询文件的有效权限。最终，我计划使用[GetEffectiveRightsFromAcl 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446637%28v=vs.85%29.aspx)，但要这样做，我需要提供一个指向填充的[TRUSTEE 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379636%28v=vs.85%29.aspx)的指针。JNA 平台（platform.jar）似乎没有定义这个结构，所以我试图自己定义它。这是我到目前为止所拥有的：

```
public static class TRUSTEE extends Structure {
    public TRUSTEE() {
        super();
    }
    public TRUSTEE(Pointer p) {
        super(p);
        read();
    }

    public Pointer pMultipleTrustee;
    public int MultipleTrusteeOperation;
    public int TrusteeForm;
    public int TrusteeType;
    public Pointer ptstrName;
} 
```

我正在尝试填充这样的结构：

```
private TRUSTEE createTrusteeForCurrentUser() {
    TRUSTEE result = new TRUSTEE();
    result.TrusteeForm = TRUSTEE_FORM.TRUSTEE_IS_NAME;
    result.TrusteeType = TRUSTEE_TYPE.TRUSTEE_IS_USER;

    String strName = "CURRENT_USER";
    // How can I set result.ptstrName using strName?
} 
```

[此 Google Groups 线程](http://groups.google.com/group/jna-users/browse_thread/thread/48ab9f7c642c1eb2/058d75cf3fc330a2)建议在调用`String`a 时使用结构中的字段`char *`。但是，我认为这不适合我的情况，考虑到`ptstrName`允许该字段指向不同类型的事物，具体取决于`TrusteeForm`. 所以，我想我需要以某种方式转换 from `String`to `Pointer`。我在 JNA 中找到了[NativeString](http://jna.java.net/javadoc/com/sun/jna/NativeString.html)类，它可以工作，除了它是一个包私有类。

将 Java 转换`String`为本机格式并获得`Pointer`它的推荐方法是什么？我什至为`TRUSTEE`结构使用正确的数据类型吗？我对JNA有点陌生，所以如果我遗漏了一些明显的东西，请原谅。

**更新**

我找到了解决问题的方法，但如果有人有更好的解决方案，我仍然想听听。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T13:37:59.187

假设您想要`char *`在本机端（如果字符串包含非 ascii 字符，您可能需要分配更多内存），

```
String myString = "CURRENT_USER";
Pointer m = new Memory(myString.length() + 1); // WARNING: assumes ascii-only string
m.setString(0, myString); 
```

然后，您可以`m`在需要引用“本机”字符串的任何地方使用。

对于宽字符串 ( `wchar_t *`)，

```
String myString = "CURRENT_USER";
Pointer m = new Memory(Native.WCHAR_SIZE * (myString.length() + 1));
m.setWideString(0, myString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T21:48:22.450

我通过复制包私有`NativeString`类的源代码并在我的项目中创建一个公共副本解决了这个问题。由于在构造函数中使用了包私有方法，我不得不做一个小改动。

**更新：**正如@fragorl 在评论中指出的那样，下面显示的 NativeString 的实现现在已经过时了。

* * *

用法：

```
private static TRUSTEE createTrusteeForCurrentUser() {
    TRUSTEE result = new TRUSTEE();
    result.TrusteeForm = TRUSTEE_FORM.TRUSTEE_IS_NAME;
    result.TrusteeType = TRUSTEE_TYPE.TRUSTEE_IS_USER;
    result.ptstrName = new NativeString("CURRENT_USER",true).getPointer();
    result.write();
    return result;
} 
```

NativeString.java：

```
/** Provides a temporary allocation of an immutable C string 
 * (<code>const char*</code> or <code>const wchar_t*</code>) for use when 
 * converting a Java String into a native memory function argument.  
 *
 * @author  Todd Fast, todd.fast@sun.com
 * @author twall@users.sf.net
 */
public class NativeString implements CharSequence, Comparable {

    private Pointer pointer;
    private boolean wide;

    /** Create a native string (NUL-terminated array of <code>char</code>).<p>
     * If the system property <code>jna.encoding</code> is set, its value will
     * be used to encode the native string.  If not set or if the encoding
     * is unavailable, the default platform encoding will be used. 
     */
    public NativeString(String string) {
        this(string, false);
    }

    /** Create a native string as a NUL-terminated array of <code>wchar_t</code>
     * (if <code>wide</code> is true) or <code>char</code>.<p>
     * If the system property <code>jna.encoding</code> is set, its value will
     * be used to encode the native <code>char</code>string.  
     * If not set or if the encoding is unavailable, the default platform 
     * encoding will be used. 
     * 
     * @param string value to write to native memory
     * @param wide whether to store the String as <code>wchar_t</code>
     */
    public NativeString(String string, boolean wide) {
        if (string == null) {
            throw new NullPointerException("String must not be null");
        }
        // Allocate the memory to hold the string.  Note, we have to
        // make this 1 element longer in order to accommodate the terminating 
        // NUL (which is generated in Pointer.setString()).
        this.wide = wide;
        if (wide) {
            int len = (string.length() + 1 ) * Native.WCHAR_SIZE;
            pointer = new Memory(len);
            pointer.setString(0, string, true);
        }
        else {
            byte[] data = Native.toByteArray(string);
            pointer = new Memory(data.length + 1);
            pointer.write(0, data, 0, data.length);
            pointer.setByte(data.length, (byte)0);
        }
    }

    public int hashCode() {
        return toString().hashCode();
    }

    public boolean equals(Object other) {

        if (other instanceof CharSequence) {
            return compareTo(other) == 0;
        }
        return false;
    }

    public String toString() {
        String s = wide ? "const wchar_t*" : "const char*";
        s += "(" + pointer.getString(0, wide) + ")";
        return s;
    }

    public Pointer getPointer() {
        return pointer;
    }

    public char charAt(int index) {
        return toString().charAt(index);
    }

    public int length() {
        return toString().length();
    }

    public CharSequence subSequence(int start, int end) {
        return CharBuffer.wrap(toString()).subSequence(start, end);
    }

    public int compareTo(Object other) {

        if (other == null)
            return 1;

        return toString().compareTo(other.toString());
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T04:09:07.897

尝试在[http://jna.java.net/javadoc/com/sun/jna/Pointer.html](http://jna.java.net/javadoc/com/sun/jna/Pointer.html)中使用指针类。

# android - 如何在 Android 和 Rails/Apache 之间安全地传递用户名/密码和身份验证令牌

> ID：10158589
> 
> 赞同：0
> 
> 时间：2012-04-15T00:32:47.663
> 
> 标签：android, ruby-on-rails, apache, http, devise

我正在帮助构建一个与 Ruby on Rails 应用程序同步的 Android 应用程序。我们在 Ubuntu 上使用 Android 2.2 和 Rails 3.x 和 Apache。

这对我来说很新鲜。您可以从 Android 设备注册和登录。在这两种情况下，用户名和密码都会发送到服务器。在与 Rails 应用程序和 Android 同步的其他情况下，当用户登录时，会将身份验证令牌标记到 URL 的末尾。这些令牌的创建和身份验证由 Devise 处理。

我的问题是：在 Rails 和 Android 设备之间来回传递用户名、密码和令牌的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:29:02.950

如何使用加密通信，例如 SSL (HTTPS)？为 HTTPS 通信配置 Apache 相当容易，Android 设备也原生支持它。

# android - Android：创建片段工具栏

> ID：10158591
> 
> 赞同：1
> 
> 时间：2012-04-15T00:33:26.720
> 
> 标签：android, toolbar, fragment

我想制作一个持久性工具栏（带有图标），它将片段活动启动到另一个片段中。我按照[本教程](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)进行操作，但我不知道如何将列表视图变成 DetailFragment 显示下的水平工具栏。

我试图向片段添加按钮，但片段的 setContentView 没有等效项。此外，Android 似乎没有任何水平列表视图。

我也查看了 ActionBar，但这似乎并不是我想要的。

一般来说，如何创建一个在 Android 应用程序中启动活动的持久工具栏？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:24:43.333

感谢响应者！我意识到实现片段的 tabhost 解决了我的问题。

这是我发现的一个非常好的教程。我希望它可以帮助别人。 [http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T09:14:28.650

ActionBar 在这里似乎确实是正确的选择

**有一个设置图标的菜单 XML**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto">
   <item android:id="@+id/action_frag1" android:title="@string/action_frag1"
        android:icon="@android:drawable/ic_menu_add"
        android:orderInCategory="450" app:showAsAction="ifRoom" />
    <item android:id="@+id/action_frag2" android:title="@string/action_frag2"
        android:icon="@android:drawable/ic_menu_revert"
        android:orderInCategory="400" app:showAsAction="ifRoom" />
    ...
</menu> 
```

**从 Activity 使用它并响应 Presses**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int id = item.getItemId();
    switch (id) {
        case android.R.id.action_frag1:
            //Here we change the fragment
            FragmentManager fm = getSupportFragmentManager();
            FragmentTransaction tr = fm.beginTransaction();
            tr.replace(R.id.container, Fragment1.newInstance());
            tr.commit();
            break;
        case R.id.action_frag2:
            ... // same thing, but stay DRY
            break;
    }
    return super.onOptionsItemSelected(item);
} 
```

# php - 复选框检查 mysql 表上是否存在值

> ID：10158592
> 
> 赞同：2
> 
> 时间：2012-04-15T00:33:34.137
> 
> 标签：php, html, mysql, forms, checkbox

我有这张桌子，

```
--------------------------------------------
|   products_id   |   related_products_ids |
| ------------------------------------------
|    1            |   2                    |
|    1            |   3                    |
|    1            |   4                    |
-------------------------------------------- 
```

**问题 1**

我有这些复选框，

```
<input value="1" type="checkbox" name="rp_product[]" id="in-category1"> Microsoft IntelliMouse Pro 1
<input value="2" type="checkbox" name="rp_product[]" id="in-category2"> Microsoft IntelliMouse Pro 2
<input value="3" type="checkbox" name="rp_product[]" id="in-category3"> Microsoft IntelliMouse Pro 3
<input value="3" type="checkbox" name="rp_product[]" id="in-category3"> Microsoft IntelliMouse Pro 4 
```

我用这个代码，

```
<?php
echo '<ul id="categorychecklist" class="list:category categorychecklist form-no-clear">';
global $wpdb;
$sql = "SELECT related_products_ids FROM ".TABLE_RELATED_PRODUCTS." where products_id = '" . (int)$HTTP_GET_VARS['pID']."'";
$result = mysql_query($sql);
$row = mysql_fetch_array($result);
$rp_sql = "select products_id, products_name from ".TABLE_PRODUCTS_DESCRIPTION." where products_id !='" . (int)$HTTP_GET_VARS['pID']."' order by products_name";
$rp_1 = mysql_query($rp_sql);
while($rp_2 = mysql_fetch_array($rp_1)) {
    $checked = '';
    if ($row['related_products_ids'] == $rp_2['products_id']) $checked = " checked";
    echo "<li id=\"category-".$rp_2['products_id']."\" class=\"popular-category\"><label class=\"selectit\"><input value=\"".$rp_2['products_id']."\" type=\"checkbox\" name=\"rp_product[]\" class=\"rp_item\"" . $checked . "> <span>".$rp_2['products_name']."</span></label></li>";
}
mysql_free_result($rp_1);
echo '</ul></div></div>';
?> 
```

但是我的 php 代码不起作用，只选中了 1 个复选框。`checked`如果它们的值存在于数据库表中，我如何制作这些复选框？

**问题 2**

我还想按产品ID输出相关产品，

我用这个代码，

```
$sql = "SELECT related_products_ids FROM ".TABLE_RELATED_PRODUCTS." where products_id = '" . (int)$_GET["products_id"]."'";
$result = mysql_query($sql);
$row = mysql_fetch_assoc($result); 
$lst_rp = explode(',', $row['related_products_ids']);
if(mysql_num_rows(mysql_query($sql))){
echo '<ul id="related-products-array">';
foreach($lst_rp as $rp_id) {
    $res = "select p.products_id, products_type, pd.products_name, pd.products_description, p.products_model, p.products_quantity, p.products_image, pd.products_url, p.products_price, p.products_tax_class_id, p.products_date_added, p.products_date_available, p.manufacturers_id from " . TABLE_PRODUCTS . " p, " . TABLE_PRODUCTS_DESCRIPTION . " pd where p.products_status = '1' and p.products_id = '" . $rp_id . "' and pd.products_id = p.products_id and pd.language_id = '" . (int)$languages_id . "'";
    $result1 = mysql_query($res);
    $row1 = mysql_fetch_array($result1);
     if(mysql_num_rows(mysql_query($res))){
       if ($nw_price = tep_get_products_special_price($rp_id)) {
        $products_price1 = '<del>' . $currencies->display_price($row1['products_price'], tep_get_tax_rate($row1['products_tax_class_id'])) . '</del><br><span class="productSpecialPrice">' . $currencies->display_price($nw_price, tep_get_tax_rate($row1['products_tax_class_id'])) . '</span>';
       } else {
        $products_price1 = $currencies->display_price($row1['products_price'], tep_get_tax_rate($row1['products_tax_class_id']));
       }
        echo '<li><a href="'.get_permalink($storepage).'?slug=product_info.php&products_id='.$rp_id.'" target="_blank">'.tep_image(DIR_WS_IMAGES . $row1['products_image'], addslashes($row1['products_name']), null, null, 'hspace="5" vspace="5" height="120" width="120"').'<br>'.$row1['products_name'].'</a><br>'.$products_price1.'</li>';
     } else {
     }

}
echo '</ul>';
} else {
echo 'No related products.';
}
echo '<div style="clear:both;"></div>'; 
```

仅显示一种相关产品。我知道我的代码有问题，我就是想不通。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:42:48.703

最简单的方法是这样做：

```
function isChecked() {
    # perform SQL query
    # if value exists, set $exists to true
    if ($exists) {
        return "checked";
    } else {
        return "";
    }
}

<input type="checkbox" <?php echo isChecked() ?> /> 
```

显然，您需要调整您的代码，也许将整个输入标记放在 php 中的一个循环中，并根据您的查询写入“已检查”或不写入。但关键是：

```
<input type="checkbox" checked /> Checked by default 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T16:02:47.433

```
<a href="http://notfound.stackexchange.com/">`enter code here`
<?php $row9=mysql_query("select * from project_cat where des!=''");?>
Please Select How Did They Do It: <br/>
<?php
$query=mysql_query("select * from addproject where page_name='HOW DID THEY DO IT' order by id desc limit 0,1");
$get=mysql_fetch_array($query);
$check=$get['add_project'];
while($sql9=mysql_fetch_assoc($row9)) {     
    if($check==$sql9['project']) {?>    
    <input type="radio" name="project" value="<?php echo $sql9['project']; ?>" checked="checked" /><?php echo $sql9['project']; ?><br/> 
    <?php } else {?>
        <input type="radio" name="project" value="<?php echo $sql9['project']; ?>"/><?php echo $sql9['project']; ?><br/>    
    <?php } } ?></a> 
```

# api - 网站后端和移动服务层是否应该使用相同的 API？

> ID：10158593
> 
> 赞同：2
> 
> 时间：2012-04-15T00:33:35.260
> 
> 标签：api, rest

我正在做一个涉及网站的项目，然后完成移动应用程序（很可能将使用 Phonegap 或 Sencha 等跨平台工具构建）。

整个应用程序是大量数据驱动的，所有这些都将存储在我们网络服务器上的 MySQL 数据库中。我知道我将设置一个 REST API 作为移动应用程序的服务层，但我不确定 - 我是否也应该将此 API 用于主网站？

在我开始这个项目之前我需要知道这一点，因为如果我真的打算吃我自己的狗粮，那么 API 将是第一要务。

万一这很重要 - API 永远不会暴露给第三方开发人员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T00:36:02.963

当然，为什么不呢？这意味着您将只有一个入口点来测试和监控，它遵循[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，如果您也使用它，它将鼓励更好的 API 设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T00:39:09.180

是的，您应该使用该网站的 API。它简化了您的代码库并鼓励代码重用，因为您只处理一个 API 而不是两个（REST + MySQL）。此外，它使开发人员（包括您！）的生活更轻松，因为一次只需要记住一组 API 调用。

此外，将来您可能会使用 HTML 构建您的移动应用程序（可能使用最近开源并重命名为[Cordova](http://incubator.apache.org/projects/callback.html)的 PhoneGap ）。如果您的网站使用 REST API，您可以更轻松地将 Web 代码移植到 HTML5 移动版。

Nitpick：这不是吃你自己的狗粮的问题。Dogfooding[通常是指](http://blogs.msdn.com/b/oldnewthing/archive/2011/08/02/10191834.aspx)从用户而不是开发人员的角度使用预发布代码，以便更容易发现错误。

# git - git：如何“整合”本地提交

> ID：10158594
> 
> 赞同：8
> 
> 时间：2012-04-15T00:33:43.590
> 
> 标签：git, version-control, git-push, git-commit

当我在处理一些代码时，我喜欢频繁地（甚至是随机地）提交，因为如果我在某个地方搞砸了，我总是可以回滚我的更改。

但是，当我决定将所有更改推送到主存储库时，我不希望人们看到所有随机提交，因为其中一些对他们来说真的毫无意义，而且这会使更改树不必要地长。

在推送之前如何“合并”所有本地提交？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T01:12:22.417

您可以通过变基和压缩您不需要的提交来组合您的提交。

[参考这个： http](http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html) ://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:56:39.020

做一个[交互式 rebase](http://schacon.github.io/gitbook/4_interactive_rebasing.html)，它可以让你在推送之前重新排序、压缩和编辑提交到你心中的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T00:59:47.023

`git rebase -i`

将提示一个交互式编辑器。

将您要合并的所有提交更改为“壁球”

退出编辑器

# bash - 如何让 bash 忽略文件未找到

> ID：10158596
> 
> 赞同：1
> 
> 时间：2012-04-15T00:33:54.387
> 
> 标签：bash, file-not-found

在 (ba)sh 脚本中，如何忽略 file-not-found 错误？

我正在编写一个从标准输入读取（部分）文件名的脚本，使用：

```
read file; $FILEDIR/$file.sh 
```

我需要提供脚本功能来拒绝不存在的文件名。

例如

`$UTILDIR`不包含`script.sh` 用户类型脚本
脚本尝试访问`$UTILDIR/script.sh`并失败为

```
./run.sh: line 32: /utiltest/script.sh: No such file or directory 
```

如何使脚本打印错误，但继续脚本而不打印“正常”错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:48:03.517

```
if [ -e $FILEDIR/$file.sh ]; then
 echo file exists;
else
 echo file does not exist;
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:55:02.120

您可以使用@gogaman 的答案中的代码测试文件是否存在，但您可能更想知道文件是否存在*和可执行*。为此，您应该使用`-x`测试而不是`-e`

```
if [ -x "$FILEDIR/$file.sh" ]; then
   echo file exists
else
   echo file does not exist or is not executable
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T01:19:00.990

根据您对脚本所做的操作，该命令将失败并显示特定的退出代码。如果您正在执行脚本，则退出代码可以是 126（权限被拒绝）或 127（未找到文件）。

```
command
if (($? == 126 || $? == 127))
then
  echo 'Command not found or not executable' > /dev/stderr
fi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T00:57:42.333

在这里，我们可以定义一个仅在文件存在时运行的 shell 过程

```
run-if-present () {
  echo $1 is really there
}

[ -e $thefile ] && run-if-present $thefile 
```

# objective-c - ios 委托默认是什么

> ID：10158597
> 
> 赞同：0
> 
> 时间：2012-04-15T00:34:06.360
> 
> 标签：objective-c, ios, cocoa, delegates

如果不指定委托，是`self`默认委托吗？

另外，如果您有一个`UITextField`，您是否需要确保它知道它是一个`UITextFieldDelegate`还是默认情况下是一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:52:07.023

> 如果您不指定委托，

属于什么对象？由具体对象的实现来决定。

> 自我是默认代表吗？

不，在没有任何其他信息的情况下，代表可能为零。

但是，如果您正在编写一个类实现，并且希望对象将其委托`self`默认设置为，您当然可以这样做。不过，我认为这通常比有用更令人困惑。

如果你想默认做某事，只需检查委托是否为零。（有人总是可以将你的委托设置为 nil，所以无论如何你都必须进行检查。）

> 如果你有一个 UITextField 你需要确保它知道它是一个 UITextFieldDelegate 还是默认情况下它是一个？

`UITextField`没有实现任何方法`UITextFieldDelegate`——或者至少它没有宣传它这样做——所以我不确定你在这里的意思。A`UITextField`本身不能用作 a `UITextFieldDelegate`。

如果您要`UITextField`在协议中子类化并添加方法`UITextFieldDelegate`，那么您可以将其标记为正在实现`UITextFieldDelegate`：

```
@interface MyTextField : UITextField <UITextFieldDelegate> 
```

但这默认情况下不会发生，你必须让它发生。

# asp.net - 将文本框添加到 Gridview

> ID：10158600
> 
> 赞同：0
> 
> 时间：2012-04-15T00:34:58.177
> 
> 标签：asp.net

我正在使用 GridView 从数据源获取数据。我想在 GridView 的每一列的末尾添加一个文本框，即在页脚处我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:28:48.007

您应该了解 BoundField 和 TemplateField 类之间的区别。第一个用于将字段显示为文本，而在 TemplateField 中，您可以自定义显示信息的方式。因此，您应该在一列中使用 BoundField**或**TemplateField（而不是像我认为您正在尝试的那样嵌套在另一个列中），在您的情况下它必须是 TemplateField，因为您想要自定义页脚的显示方式。所以，它应该是这样的：

```
<asp:TemplateField>
    <ItemTemplate>
       <asp:Label ID="lblNumber" runat="server" Text='<%# Bind("Number")%>' />
    </ItemTemplate>
    <FooterTemplate>
        <asp:TextBox ID="txb" runat="server"></asp:TextBox>
    </FooterTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:50:16.153

使用`FooterTemplate`. 例子：

```
<asp:TemplateField>
    <ItemTemplate>
        ...
    </ItemTemplate>
    <FooterTemplate>
        your textboxes go here
    </FooterTemplate>
</asp:TemplateField>
<asp:TemplateField>
    <ItemTemplate>
        ...
    </ItemTemplate>
    <FooterTemplate>
        your textboxes go here
    </FooterTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T04:33:07.783

在中添加文本框`<FooterTemplate>`

```
<asp:TemplateField HeaderText="UnitsInStock">
         <ItemTemplate>
            //your displaying control
         </ItemTemplate>                  
         <FooterTemplate>
              <asp:TextBox id="tb1" Text="Text" runat="server" />
         </FooterTemplate>
      </asp:TemplateField> 
```

在 OnRowDataBound 事件中查找页脚控件：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
   if (e.Row.RowType == DataControlRowType.Footer)
   {
       TextBox tb1 = (TextBox)e.Row.FindControl("tb1");
       //do your stuff 
   } 
} 
```

# python - 为什么 pip 会在我当前的 virtualenv 之外安装 python 包？

> ID：10158602
> 
> 赞同：1
> 
> 时间：2012-04-15T00:35:01.657
> 
> 标签：python, django, virtualenv, pip, django-nonrel

我今天早些时候刚刚安装了 virtualenv，我一直在尝试让 django-nonrel 使用虚拟环境工作。经过数小时的尝试和失败后，我与有人聊天，他认为问题出在 pip 本身。

我用`virtualenv env_name`. 我输入它：

```
source env_name/bin/activate 
```

然后我用 pip 安装一些东西。例如，

```
sudo pip install git+https://github.com/django-nonrel/django-nonrel; 
```

然后我执行 a `pip freeze`，唯一的输出是：

```
wsgiref=0.1.2 
```

谁能明白为什么会发生这种情况？

谢谢，

典范RG

笔记：

*   pip 是 1.1 版。

*   virtualenv 是版本 1..7.1.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:58:41.207

你忘记了 git 扩展

```
$> mkvirtualenv test
(test)> pip install  git+https://github.com/django-nonrel/django-nonrel.git 
(test)> pip freeze
Django==1.3.1
wsgiref==0.1.2 
```

顺便说一句，`sudo`如果您使用 virtualenv，则不需要使用。这个想法是让你的 virtualen 在你有权限的地方，比如 ~/.virtualenvs/

# c - c中的字符与数组

> ID：10158603
> 
> 赞同：1
> 
> 时间：2012-04-15T00:35:22.730
> 
> 标签：c

当 4 产生分段错误时，为什么 1、2 和 3 起作用？（见下文。）

```
char c[10];
char* d; 
```

1.

```
scanf("%s", &c);
printf("%s\n", &c); 
```

2.

```
scanf("%s", c);
printf("%s\n", c); 
```

3.

```
scanf("%s", &d);
printf("%s\n", &d); 
```

4.

```
scanf("%s", d);
printf("%s\n", d); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T01:40:27.743

重复问题中的代码：

```
char c[10];
char* d; 
```

1.

```
scanf("%s", &c);
printf("%s\n", &c); 
```

这可能会按预期工作，但实际上行为是未定义的。

`scanf`使用`"%s"`格式需要类型的参数`char*`。 `&c`是 type `char (*)[10]`，即它是一个指向`char[10]`数组的指针。它指向内存中与 的第 0 个元素的地址相同的位置`c`，但它的类型不同。同样的事情发生在`printf`:`"%s"`格式告诉它期待一个`char*`参数，但你传递给它一个`char(*)[10]`参数。

由于`scanf`是一个可变参数函数，因此除了格式字符串之外，不需要对参数进行类型检查。编译器将（可能）愉快地将`char (*)[10]`值传递给`scanf`，假设它可以处理它。在所有指针具有相同大小、表示和参数传递机制的实现上，它*可能可以。*但是，例如，用于奇异架构的 C 编译器可以轻松地使`char*`指针大于指向更大类型的指针。想象一个 CPU，其本机地址指向一个 64 位字；一个`char*`指针可能由一个字指针加上一个字节偏移量组成。

2.

```
scanf("%s", c);
printf("%s\n", c); 
```

这个更好。 `c`是一个数组，但在这种情况下，数组表达式“衰减”为指向数组第一个元素的指针——这正是格式所要求`scanf`的。`"%s"`同样的事情发生在传递`c`给`printf`. （但仍然存在一些问题；我将在其他示例之后解决这个问题。

3.

```
scanf("%s", &d);
printf("%s\n", &d); 
```

因为`d`is 是单个`char*`参数，`&d`是 type `char**`，并且再次，您传递了错误类型的参数。如果所有指针具有相同的表示（和相同的参数传递机制），并且输入`scanf`足够短，这可能会发生“工作”。它将`char*`对象视为`char`. 如果`char*`是 4 个字节，并且输入字符串的长度不超过 3 个字符，这可能会起作用——就好像您使用了 a`char[4]`并正确编写了调用一样。但这*非常*将字符串直接存储到指针对象中的做法很糟糕，并且存在写入对象末尾的巨大风险，结果不可预测。（这些不可预知的结果包括写入没有用于其他任何事情的内存，这可能*看起来*有效；这就是未定义行为的本质。）

（C 标准允许将任何对象视为字符数组，但在这种情况下，这是一个非常糟糕的主意。）

4.

```
scanf("%s", d);
printf("%s\n", d); 
```

这里的类型都是正确的，但除非你已经初始化`d`指向一个足够大的数组`char`，否则它可能会失败（或者更糟糕的是，看起来“正常”工作，这意味着你有一个微妙的错误会可能稍后会出现）。

现在我们来谈谈我上面提到的其他问题。

例如4，我提到`d`需要指向一个“足够大”的数组。“足够大”有多大？没有答案。 `scanf("%s", ...)`读取以空格分隔的字符序列，其长度没有上限。例如，如果我运行您的程序并按住该`x`键，我可以提供比您提供的任何缓冲区更长的输入字符串，但会产生不可预测的结果（再次出现未定义的行为）。

该`scanf`函数的`"%s"`格式*无法*安全使用（除非您的程序在可以控制标准输入流上显示的内容的环境中运行）。

读取文本输入的一种好方法是使用`fgets`一次读取一行，然后使用其他函数来分析结果。 `fgets`要求您指定输入的最大长度；如果实际输入超过限制，它会被截断并留给以后的调用读取。它不像 那样方便`scanf`，但可以安全地完成。（并且*永远不要*使用该`gets`功能；例如`scanf("%s", ...)`，它不能安全地使用。）

推荐阅读：

[comp.lang.c FAQ](http://c-faq.com/)的第 6 节很好地解释了 C 数组和指针，以及它们如何相关（和不相关）。第 12 节讨论 C 标准 I/O。

（对不起，这个答案太长了；我没有时间把它缩短。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T00:37:26.083

在案例 3 和 4 中，您的**行为未定义。**

*   情况一和二是相同的，因为都指向数组中的第一个元素。
*   情况 3 未定义，因为您在期望指向 char 的指针时给出指向 char 的指针。
*   情况 4 未定义，因为指针`d`未初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T00:39:30.640

3 有效（在许多平台上，如果打开它们会发出警告；从技术上讲，这是未定义的行为），因为您正在滥用指针（将`&d`类型 的`(char **)`，视为`(char *)`并将字符存储在用于指针的内存中） . 4 死，因为未初始化的指针指向一个随机地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T01:25:09.743

这里的重要问题是是否有存储结果的空间。

```
scanf("%s", &c);
printf("%s\n", &c); 
```

有存储吗？是的，您使用的地址是数组第一个元素的地址。该数组存在，因此您可以将结果放在那里。

```
scanf("%s", c);
printf("%s\n", c); 
```

有存储吗？是的。像这样使用，数组折叠成一个指针，它的传递与上面相同。

```
scanf("%s", &d);
printf("%s\n", &d); 
```

有存储吗？是的。它不是适当的类型， ( `char **`, 应该是`char *`)，但它应该与将 char 转换为指针类型并将其存储在声明为指针的变量中没有任何不同。（其他答案说这是未定义的行为。我不认为是，将 a`char`或任何其他整数类型转换为 a`char *`或其他指针类型是明确定义的，如果不明智的话；告诉我标准在哪里说这是未定义的。 )

```
scanf("%s", d);
printf("%s\n", d); 
```

有存储吗？不是你分配的。从技术上讲，可能发生的任何事情都`d`指向内存中不会出现段错误的位置。即使是这样，这也不是你的记忆，你可能会覆盖一些重要的东西，或者它可能会意外改变。你还没有告诉`d`在哪里找到有效的内存指向，所以你在玩指针俄罗斯轮盘赌。

# xcode - xCode draw - 尝试在 CGRect 中保持颜色选择

> ID：10158607
> 
> 赞同：0
> 
> 时间：2012-04-15T00:35:43.683
> 
> 标签：xcode, core-graphics, cgrect

我有一个简单的绘图课。有一个包含颜色选择栏的视图控制器。然后是具有 CGRect 绘制功能的 UIView。

我可以画好，但是当我改变颜色时，所有现有的笔画都会改变。我搞砸了什么？我只想更改新笔画的颜色。

欢迎任何帮助。以下是一些相关的代码片段：

```
- (void)drawRect:(CGRect)rect
{
    [currentColor setStroke]; 

        for (UIBezierPath *_path in pathArray) 
    [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];  
}

#pragma mark - Touch Methods
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    swiped = NO;

    myPath=[[UIBezierPath alloc]init];
    myPath.lineWidth=10;
    UITouch *touch= [touches anyObject];
    [myPath moveToPoint:[touch locationInView:self]];
    [pathArray addObject:myPath];

    if ([touch tapCount] == 2) {
        [self eraseButtonClicked];
        return;
    }

    lastPoint = [touch locationInView:self];
    lastPoint.y -= 20;

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    swiped = YES;

    UITouch *touch = [touches anyObject];   
    CGPoint currentPoint = [touch locationInView:self];
    currentPoint.y -= 20;

    [myPath addLineToPoint:[touch locationInView:self]];
    [self setNeedsDisplay];

    UIGraphicsBeginImageContext(self.frame.size);
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 15.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;

    moved++;    
    if (moved == 10) {
        moved = 0;
    }

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];   
    if ([touch tapCount] == 2) {
        [self eraseButtonClicked];
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:21:45.223

您的 drawRect: 正在以相同的颜色绘制所有路径。当您调用 [currentColor setStroke] 时，您正在为您绘制的所有笔划设置颜色。您还需要维护笔划的颜色，并在每次调用 strokeWithBlendMode 之前重置颜色。

就像是：

```
- (void)drawRect:(CGRect)rect
{
    for( int i=0; i<[pathArray count]; i++) {
        [[colorArray objectAtIndex:i] setStroke];
        [[pathArray objectAtIndex:i] strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
    }
} 
```

每次向 pathArray 添加路径时，您必须确保将 UIColor 对象添加到 colorArray。

您可以`[colorArray addObject:currentColor];`在该行之后添加`[pathArray addObject:myPath];`

# objective-c - XCode/Cocoa Objective-C - 几个问题

> ID：10158611
> 
> 赞同：1
> 
> 时间：2012-04-15T00:36:22.170
> 
> 标签：objective-c, xcode, cocoa

很抱歉这个愚蠢的帖子，但我是 Objective-C 编程和 Cocoa 的新手，有几个问题我找不到答案，我希望有人能启发我。

首先，在 XCode 中，当使用 Interface builder 时，当我想创建一个新对象时，我将该对象拖到我的“资产”中。但是，如果不手动创建新的类文件，我就无法指定方法或任何东西。使用界面构建器的“对象”有什么意义吗？

我为测试事物而构建的第一个应用程序，我将大部分代码放在 AppDelegate 类文件中。研究表明，AppDelegate 的目的只是处理应用程序事件，例如启动和关闭。我把方法放在这个类中是错的吗？它有什么不同吗？

最后，如果我创建了几个类文件，每个类文件都通过构建并链接到类的接口来处理自己的功能，那么我该如何处理“主”文件？在我看来，'main' 文件和 'appdelegate' 类文件在大多数情况下会保持原样吗？

我希望这是有道理的。对于这些听起来很愚蠢的问题，我再次感到抱歉，但我找不到任何答案。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:32:12.000

> 首先，在 XCode 中，当使用 Interface builder 时，当我想创建一个新对象时，我将该对象拖到我的“资产”中。但是，如果不手动创建新的类文件，我就无法指定方法或任何东西。

你当然可以。只需使用检查器设置对象的类。

请注意，您只能将 nib 对象连接到插座或操作。您不能指定任何随机方法，也不应该指定 - 、 和 关键字的全部意义在于`IBOutlet`在`IBOutletCollection`代码`IBAction`中声明这些属性/方法由 nib 使用。

> 使用界面构建器的“对象”有什么意义吗？

是的，但很少。通常您在代码中创建对象并将插座连接到它们。

应用程序的委托是您可能希望在 MainMenu 或 MainWindow nib 中创建的一个对象，如果您以这种方式构建您的应用程序（iOS 模板由于某种原因已更改为远离它）。

> 我为测试事物而构建的第一个应用程序，我将大部分代码放在 AppDelegate 类文件中。研究表明，AppDelegate 的目的只是处理应用程序事件，例如启动和关闭。我把方法放在这个类中是错的吗？

大概。应用程序的委托通常应该只处理与`NS`/`UIApplicationDelegate`协议相关的业务。

另一方面，可以将根视图控制器设置为应用程序的委托，如果这样做有意义的话（并且`NS`/`UIApplicationDelegate`实现代码不是太多）。您必须回答的问题（只有您可以为您的应用程序回答）是您是让根视图控制器成为应用程序的委托还是应用程序的委托成为根视图控制器。如果有疑问，请将它们分开。

> 它有什么不同吗？

长期，是的。[创建一个Big Ball of Mud](http://www.laputan.org/mud/)类非常容易，尤其是在应用程序的委托类中——没有明确定义和明确界定的职责。尽快将炸药带到这样的班级。

> 最后，如果我创建了几个类文件，每个类文件都通过构建并链接到类的接口来处理自己的功能，那么我该如何处理“主”文件？在我看来，'main' 文件和 'appdelegate' 类文件在大多数情况下会保持原样吗？

是的。它们是样板。

如果您没有在应用程序的委托中编写任何代码（或者已经删除了您放入新的和更好描述的类中的所有内容），这样剩下的就是空的方法体或根本没有，您可以安全地删除应用程序的代表。如果您改变主意，以后随时可以再次创建它。

请注意，如果您删除应用程序委托类，您还应该更改 main.m 文件 - 或 MainMenu/MainWindow nib，如果有的话 - 不引用它。如果您的`UIApplicationMain`调用（或任何其他代码）引用了不存在的类，您的应用程序将不会构建，如果您的 MainMenu/MainWindow 笔尖（或任何其他笔尖）引用不存在的类，它将崩溃.

如果你需要，你的应用程序有一个委托并不可耻，但如果你不这样做，删除它和你用于它的类消除了未来在其中填充代码或使用它来存储[三阶全局变量的](http://boredzo.org/blog/archives/2011-03-18/application-delegate-singletons)诱惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T01:05:11.130

1.  在界面构建器中使用对象的目的是将对象的方法连接到 UI 元素。

2.  这部分取决于您的方法正在做什么，但在大多数情况下，应用程序委托类将被单独放置。这不是实际要求（您的程序可以以任何一种方式工作），但它是常见的做法，因为它通常会创建更易于维护的代码。应用程序委托应该只处理应用程序事件（使用其他类来执行任何复杂的逻辑或繁重的工作）。

3.  “主”文件很可能不会改变。我想不出任何理由这样做，但我不会排除某些高级案例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T01:09:01.840

老实说，我只在 IB 中使用过 Object 一次，当时我希望一个单独的对象具有一些 UI 绑定。

关于应用程序委托和主文件，是的，大多数情况下您将保持原样。但是，如果您尝试做一些除了测试应用程序之外的事情，您将需要处理打开的事件，例如，连接到服务器、要求用户进行评论、增加一些启动计数器等等......这些只是示例！

主文件我建议你不要管它，使用提供的面向对象工具。您应该有一个视图控制器层次结构，将您的视图与数据隔离，并使用视图控制器在视图和模型之间进行通信。如果您想了解有关如何组织应用程序的更多信息，请阅读[MVC 。](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

# python - 导入 Confusion Pandas

> ID：10158613
> 
> 赞同：4
> 
> 时间：2012-04-15T00:37:31.670
> 
> 标签：python, pandas

今天之前我有 0.71 只熊猫。我试图更新，我只是运行了网站提供的 .exe 文件。

现在我尝试了“import pandas”，但它给了我一个错误

ImportError: C extensions not built: 如果您已经安装，请确认您没有从源目录导入。

一般来说，我是 python 和 pandas 的新手。任何事情都会有所帮助。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:19:08.580

您是否偶然在`import pandas`包含来自 PyPI 或 GitHub 的源代码的目录中进行操作？或者，您可能缺少在 0.7.1 中未检查的依赖项。如果您不是从源目录导入，您能否编辑 pandas/ **init** .py 文件（在 C:\Python27\Lib\site-packages 中）以在导入后有一个打印语句`pandas._tseries`并向我展示它的内容：

```
try:
    import pandas._tseries as lib
except Exception, e:  # pragma: no cover

    print e # <-- ADD THIS LINE

    if 'No module named' in str(e):
        raise ImportError('C extensions not built: if you installed already '
                          'verify that you are not importing from the source '
                          'directory')
    else:
        raise 
```

如果您可以将其移至首选的[问题跟踪器。](http://github.com/pydata/pandas/issues)谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:23:11.390

有同样的问题。通过检查依赖关系解决 - 确保您安装了 numpy > 1.6.1 和 python-dateutil > 1.5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:03:40.993

我有同样的错误。我自己没有构建熊猫，所以我认为我不应该得到熊猫网站上提到的这个错误。所以我对如何解决这个错误感到困惑。pandas 网站说 matplotlib 是一个*可选*的依赖项，所以我最初没有安装它。但有趣的是，安装 matplotlib 后，错误消失了。我不确定它有什么影响。它发现了一些东西！

# xcode - 将文件拖到 Xcode 4.3.2 中的项目时未更新“编译源”

> ID：10158614
> 
> 赞同：3
> 
> 时间：2012-04-15T00:37:33.350
> 
> 标签：xcode

我只是不确定这是 Xcode 4.3.2 中的错误还是应该是这种方式。

当我升级到 Xcode 4.3.2 并将一些文件拖到新创建的项目中时，它在编译时反复抛出链接器错误。所有必需的框架都已链接。事实证明，当我在 Build Settings - Compile Sources 中手动添加我手动拖到项目中的 .m 文件时，这些错误消失了。

我在以前版本的 Xcode 中做过同样的事情，并且从来不需要自己手动更新编译源。我假设如果将任何 .m 文件拖到项目中，编译源应该会自动更新。

我目前没有任何以前版本的 Xcode 可供我测试它，但我想知道这是否真的是 Xcode 4.3.2 中的一个错误，或者还有什么我遗漏的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:26:34.850

将文件拖到项目上时需要检查“添加到目标”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:24:38.683

第一：雷兔说什么

第二：我在拖动 .m 文件时从未遇到任何问题，但在拖动 SDK 文件（例如 twitter 等）时确实遇到了问题。为此，我不得不在 Build Settings 中更改库搜索路径。

第三：我在其中一个sdk中也遇到了Strip错误，我在这个问题中提到了解决方法：[error in generate archives](https://stackoverflow.com/questions/12642210/error-in-generating-archives/12741793#12741793)

希望信息有所帮助

# c++ - While循环不起作用吗？

> ID：10158616
> 
> 赞同：-3
> 
> 时间：2012-04-15T00:37:49.813
> 
> 标签：c++

在我的程序中。我的 do-while 循环不起作用，我不知道为什么。我想要 do-while 循环做的只是减轻用户在想要输入另一个数字时重新运行程序的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:51:38.603

`string runagain;`您在主循环中声明了两次，这是不必要的。也`double tester`应该在`squarerootfinder`函数中声明，因为您不会在程序的其他任何地方使用它。

`cin`忽略空格，您应该查看 getline 函数。此[链接](http://www.cplusplus.com/reference/string/getline/)提供了如何使用它的示例。在这里使用`cin`是问题的根源。您可以通过简单地添加以下行来测试它：

```
cout<<runagain; 
```

之后直接`cin>>runagain;`。

在这段代码中：

```
 cout << "Enter a whole number to find the square root of it \n";
 cin >> number;
 divisor = number;
 squareroot = squarerootfinder(number, divisor); 
```

您设置`divisor=number;`然后调用`squarerootfinder`但不是使用除数，为什么不这样做：

```
 cout << "Enter a whole number to find the square root of it \n";
 cin >> number;
 squareroot = squarerootfinder(number, number); 
```

因为`divisor`和`number`毕竟是平等的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T00:49:24.363

**尝试这个 ：**

```
#include<iostream>
#include<string>

double tester;
using namespace std;

void stoupper (std::string& s)
{
     std::string::iterator i = s.begin();
     std::string::iterator end = s.end();

     while (i != end) {
          *i = std::toupper((unsigned char)*i);
          ++i;
     }
}

double squarerootfinder (double number, double divisor){
     tester = (number / (divisor * divisor));

     if (divisor == 1) {
          return 1;
     }
     else {
          if (tester != (int)tester) divisor = squarerootfinder(number, divisor - 1);
     }

     return divisor;
}

int main() {
     string runagain;
     double number, divisor, squareroot, insidepart;

     do {    
          cout << "Enter a whole number to find the square root of it \n";
          cin >> number;

          divisor = number;
          squareroot = squarerootfinder(number, divisor);
          insidepart = number / (squareroot * squareroot);

          if (insidepart != 1) {
               cout << squareroot << (char)251 << insidepart;
               cout << endl;
          }
          else {
               cout << squareroot << endl;                  
          }

          cout << "written by Arpan Gupta! \n";
          cout << "Enter run again to run the program again. \n";
          cin >> runagain;

          stoupper(runagain);

     } while (runagain == "RUN AGAIN");    

     return 0;
} 
```

* * *

这个想法是尝试检查用户可能输入的“RUN aGAiN”的任何变体（无论它是全**大写/小写**还是其他......很可能这就是你的问题所在......）

好的，我清理了你的代码...... :-)

* * *

`runagain`编辑：而且，是的：绝对没有理由在你的`do { } while()`循环中重新声明。

# r - 如何用（data.frame）查找表中的值标签替换数据框中的数字代码？

> ID：10158617
> 
> 赞同：4
> 
> 时间：2012-04-15T00:37:57.987
> 
> 标签：r, replace, variable-assignment, dataframe, rename

这是这个问题的后续问题[，](https://stackoverflow.com/questions/10002536/how-do-i-replace-numeric-codes-with-value-labels-from-a-lookup-table)最初是受到[这个问题](https://stackoverflow.com/questions/8433523/creating-a-new-variable-from-a-lookup-table)的启发，但并不完全相同。

这是我的情况。首先我从数据库中提取一些数据，

```
df <- data.frame(id = c(1:6),
                 profession = c(1, 5, 4, NA, 0, 5))
   df
#  id profession
#  1          1
#  2          5
#  3          4
#  4         NA
#  5          0
#  6          5 
```

其次，我提取了一个包含有关职业代码的人类可读信息的键表，

```
profession.codes <- data.frame(profession.code = c(1,2,3,4,5),
                               profession.label = c('Optometrists',
                               'Accountants', 'Veterinarians', 
                               'Financial analysts',  'Nurses'))                 
   profession.codes
#  profession.code   profession.label
#               1       Optometrists
#               2        Accountants
#               3      Veterinarians
#               4 Financial analysts
#               5             Nurses 
```

现在，我想用来自的标签覆盖我的变量，`profession`最好使用包中的标签，但我愿意接受任何智能解决方案。虽然我确实喜欢那层保留 x 的顺序。`df``profession.codes``join``plyr`

我目前是这样做的，

```
# install.packages('plyr', dependencies = TRUE)
library(plyr)

profession.codes$profession <- profession.codes$profession.code
df <- join(df, profession.codes, by="profession")
# levels(df$profession.label)
df$profession.label <- factor(df$profession.label, 
   levels = c(levels(df$profession.label), 
   setdiff(df$profession, df$profession.code)))
# levels(df$profession.label)
df$profession.label[df$profession==0 ] <- 0
df$profession.code <- NULL
df$profession  <- NULL
names(df) <- c("id", "profession")
df
#  id         profession
#  1       Optometrists
#  2             Nurses
#  3 Financial analysts
#  4               <NA>
#  5                  0
#  6             Nurses 
```

这就是我`profession`在不丢失`NA`和 的情况下覆盖的方式`0`。

问题是 0 可能是 17 或任何数字，我想以某种方式解释这一点。此外，如果可能的话，我还想缩短我的代码。

任何帮助将不胜感激。

谢谢，埃里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T01:00:32.537

这是基本的一种方法：

```
df <- data.frame(id = c(1:6),
                 profession = c(1, 5, 4, NA, 0, 5))

pc <- data.frame(profession.code = c(1,2,3,4,5),
                               profession.label = c('Optometrists',
                               'Accountants', 'Veterinarians', 
                               'Financial analysts',  'Nurses'))  

df$new <- as.character(pc[match(df$profession,  
    pc$profession.code), 'profession.label'])
df[is.na(df$new), 'new'] <- df[is.na(df$new), 'profession'] 
df$new <- as.factor(df$new)
df 
```

产生：

```
 id profession                new
1  1          1       Optometrists
2  2          5             Nurses
3  3          4 Financial analysts
4  4         NA               <NA>
5  5          0                  0
6  6          5             Nurses 
```

# python - 可以被所有实例（也包括子类）访问和设置的类属性

> ID：10158621
> 
> 赞同：0
> 
> 时间：2012-04-15T00:38:34.360
> 
> 标签：python

我想设置一个可以由类或其子类的所有实例共享的类属性。任何实例都应该可以设置该属性。

我尝试了以下方法：

```
class A:
    x = 1
    @classmethod
    def setX(cls, val):
        if cls.__bases__:
            cls = cls.__bases__[-1]
        cls.x = val 
```

在单继承的情况下，这似乎工作正常。但是如果我使用多重继承，取决于继承的顺序，它要么工作要么不工作（即，类 A 并不总是最后一个**bases**）。

任何关于稳健实施的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:40:42.773

使用词法作用域：

```
class A(object):
    x = 1
    @classmethod
    def setX(cls, val):
        A.x = val 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T01:20:34.737

IMO，正确的方法是使用类属性。由于属性与对象的 classes 相关联`__dict__`，而不是对象自己的`__dict__`，并且由于您的对象恰好是一个类，因此您必须将其附加到 classes 类，即它的元类：

```
class A(object):

    _x = None

    class __metaclass__(type):

        @property
        def x(cls):
            return A._x

        @x.setter
        def x(cls, val):
            A._x = val

class B(A):
    pass

A.x = 'jim'
B.x = 'joe'

print A.x, B.x 
```

结果：

```
joe joe 
```

此外，您的类必须是新样式类，即它们必须继承自`object`Python 2.x。元类在 Python 3.x 中的定义不同：

```
class MetaA(type):
    """ like ___metaclass__ above """

class A(metaclass=MetaA):

    _x = None

... 
```

# php - 显示图像变量

> ID：10158631
> 
> 赞同：1
> 
> 时间：2012-04-15T00:41:03.353
> 
> 标签：php, mysql, mysqli

我有一个名为 $image 的 php 变量，它保存来自 mySQL 服务器的中等 blob 的内容，我正在尝试使用 PHP5 输出它。

当我只使用代码时：

```
echo $image; 
```

它只是输出一个充满 ASCII 字符的页面。有没有人有什么建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:42:47.860

指定正确的`Content-Type`标题。

```
header('Content-Type: image/png');
echo $image; 
```

# c++ - 忽略几个不同的词.. c++？

> ID：10158633
> 
> 赞同：1
> 
> 时间：2012-04-15T00:41:13.710
> 
> 标签：c++, string

我正在阅读几个文档，并对我读到的单词进行索引。但是，我想忽略常见的大小写单词（a、an、the、and、is、or、are 等）。

这样做有捷径吗？不仅仅是做...

if(word=="and" || word=="is" || etc etc....) 忽略单词；

例如，我可以以某种方式将它们放入 const 字符串中，然后让它检查字符串吗？不确定...谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:47:24.903

[`set<string>`](http://www.cplusplus.com/reference/stl/set/)使用您要排除的单词创建一个，并用于`mySet.count(word)`确定该单词是否在集合中。如果是，则计数将为`1`; 不然的话`0`。

```
#include <iostream>
#include <set>
#include <string>
using namespace std;

int main() {
    const char *words[] = {"a", "an", "the"};
    set<string> wordSet(words, words+3);
    cerr << wordSet.count("the") << endl;
    cerr << wordSet.count("quick") << endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:47:05.633

您可以使用字符串数组，循环遍历并匹配每个字符串，或者使用更优化的数据结构，例如 a[`set`](http://www.cplusplus.com/reference/stl/set/)或 trie。

这是一个如何使用普通数组执行此操作的示例：

```
const char *commonWords[] = {"and", "is" ...};
int commonWordsLength = 2; // number of words in the array

for (int i = 0; i < commonWordsLength; ++i)
{
    if (!strcmp(word, commonWords[i]))
    {
        //ignore word;
        break;
    }
} 
```

请注意，此示例不使用 C++ STL，但您应该使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:52:11.333

如果你想最大化性能，你应该创建一个 trie....

[http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

...停用词...

[http://en.wikipedia.org/wiki/Stop_words](http://en.wikipedia.org/wiki/Stop_words)

没有标准的 C++ trie 数据结构，但是请参阅此问题以了解第三方实现...

[尝试实现](https://stackoverflow.com/questions/1036504/trie-implementation)

如果您对此不感兴趣并想使用标准容器，那么最好使用的是`unordered_set<string>`将停用词放入哈希表中。

```
bool filter(const string& word)
{
    static unordered_set<string> stopwords({"a", "an", "the"});
    return !stopwords.count(word);
} 
```

# perl - 如何为 PSGI / Plack Web 应用程序（在 Perl 中）提供静态文件（图像等）？

> ID：10158638
> 
> 赞同：3
> 
> 时间：2012-04-15T00:42:42.130
> 
> 标签：perl, web-applications, plack, psgi

如何为基于 PSGI / Plack 的 Web 应用程序提供静态文件（图像、javascript、样式表）？

答案可能取决于使用的 Web 服务器，无论是 CGI、FastCGI、mod_psgi 还是像 Starman 这样的纯 Perl。我听说使用 Plack::Middleware::Static 或 Plack::App::File（连同 Plack::App::URLMap）仅用于开发......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T03:27:41.753

就实时部署而言，一个非常简单（且快速）的设置是让 Web 服务器处理静态内容并让 Plack 应用程序处理动态内容。这通常需要您的 Web 服务器配置中至少有 2 个代理。代理 A 到您的静态文件（假设它们通常都在同一个地方）和代理 B 到部署您的 Plack 应用程序的端口。

例如，nginx 配置的一部分可能如下所示。假设 Plack 应用程序在本地端口 5001 上运行，并且您的静态文件在 url [http://mydomainname.com/static下可用](http://mydomainname.com/static)

```
server {
    listen 80;
    server_name mydomainname.com;

    location / {
        proxy_pass http://localhost:5001/;
        proxy_redirect off;
        proxy_set_header   Host             $host;
        proxy_set_header   X-Real-IP        $remote_addr;
        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
        proxy_set_header   X-Forwarded-Port $server_port;
        proxy_set_header   X-Forwarded-Host $host;
    }

    location /static {                                                                                                                                             
        root /path/to/static/files;                                                                                                                         
    }

} 
```

# python - Python-如何从文件中删除列

> ID：10158642
> 
> 赞同：1
> 
> 时间：2012-04-15T00:43:05.750
> 
> 标签：python, file

我想从文件中删除第一列。该文件包含由空格分隔的 3 列，这些列的标题如下：X'、'Displacement' 和 'Force'（请参见图片）。

![数据文件](../Images/292d83ce198e070655a0bda6dd9ec8e0.png)

我想出了以下代码，但令我失望的是它不起作用！

```
f = open("datafile.txt", 'w')
 for line in f:
  line = line.split()
  del x[0]
f.close() 
```

任何帮助深表感谢 ！伊桑

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T00:55:26.637

首先，您正在尝试从一个可写入的文件中读取（通过遍历文件内容）。这会给你一个`IOError`.

其次，不存在命名`x`的变量（您没有在脚本中声明/设置一个）。这将生成一个`NameError`.

第三也是最后一点，一旦您完成（正确）读取和编辑文件中的列，您将需要将数据写回文件中。

为了避免一次将一个（可能很大的）文件加载到内存中，最好从一个文件（逐行）读取并同时写入一个新文件。

像这样的东西可能会起作用：

```
f = open("datafile.txt", "r")
g = open("datafile_fixed.txt", "w")

for line in f:
    if line.strip():
        g.write("\t".join(line.split()[1:]) + "\n")

f.close()
g.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:53:33.237

```
print ''.join([' '.join(l.split()[1:]) for l in file('datafile.txt')]) 
```

或者，如果您想保留空格并且您知道第二列总是从第 10 个字符开始：

```
print ''.join([l[11:] for l in file('datafile.txt')]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T00:54:38.550

一些关于[python i/o](http://docs.python.org/tutorial/inputoutput.html)的阅读可能会有所帮助，但下面的内容应该会让你站起来：

```
with open("datafile.txt", "r") as fin:
    with open("outputfile.txt", "w") as fout:
        for line in fin:
            line = line.split(' ')
            if len(line) == 3:
                del line[0]
                fout.write(line[0] + ' ' + line[1])
            else:
                fout.write('\n') 
```

编辑：固定使用空白行

# sql - 使用最新行连接 3 个表

> ID：10158646
> 
> 赞同：1
> 
> 时间：2012-04-15T00:43:57.780
> 
> 标签：sql, join

我的数据库中有 3 个表：children、family、statuslog

每次孩子签入或签出数据库时，它都会在状态日志中更新。我很久以前就这样做了，但我似乎无法弄清楚如何去做。我想创建一个连接所有 3 个表的新视图，但我只想要状态日志中的最新条目（通过使用最高 id）。

例如，状态日志如下所示：

```
childID     researcher     status     id
1           Dr. A          out        1
1           Dr. A          in         2
1           Dr. B          out        3
1           Dr. B          in         4
2           Dr. C          out        5
2           Dr. C          in         6
3           Dr. B          out        7
3           Dr. B          in         8 
```

这就是我想要做的：

```
SELECT *
FROM children, families, statuslog
WHERE children.familyID = families.familyID AND children.childID = statuslog.childID 
```

显然，这将返回 children+family 元组以及每个日志条目，但我不记得如何只将它与最新的日志条目结合起来。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:04:08.577

使用 max(id) 的聚合查询检索给定 childID 的最后一个 ID。然后将其加入状态日志以检索其他列。

```
SELECT *
FROM children
INNER JOIN families
   ON children.familyID = families.familyID
INNER JOIN 
(
  SELECT childID, researcher, status
    FROM statuslog
    INNER JOIN 
    (
      SELECT childID, max(ID) ID
        FROM statuslog
       GROUP BY childID
    ) lastSL
    ON statuslog.childID = lastSL.childid
   AND statuslog.ID = lastSL.ID
) sl
  ON children.childID = sl.childID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:53:33.197

这似乎是典型[的每组最大 n 个](/questions/tagged/greatest-n-per-group "显示标记为“每组最大数”的问题")，其中较高`id`的被解释为最新的。这个查询应该可以解决问题：

```
select * from (
    select s1.* from statusLog s1
    left join statusLog s2
    on s1.childId = s2.childId and s1.id < s2.id
    where s2.id is null
) final
join children c on c.childId = final.childId
join families f on f.familyId = c.familyId 
```

更正任何语法错误。

# asp.net - Uploadify - MVC3：HTTP 302 重定向错误（由于 asp.net 身份验证）

> ID：10158648
> 
> 赞同：3
> 
> 时间：2012-04-15T00:44:46.247
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, uploadify

我正在使用 uploadify 批量上传文件，但出现 302 重定向错误。我假设这是因为脚本调用中没有传回一些 asp.net 身份验证 cookie 令牌。

我已经在常规的裸骨 mvc3 应用程序中工作，但是当我尝试将其集成到安全的 asp.net mvc3 应用程序中时，它会尝试重定向到帐户/登录。

我有一个身份验证令牌 (@auth)，它确实在视图中以长字符串的形式返回，但我仍然收到 302 重定向错误。

任何想法如何发送 cookie 身份验证数据？

看法：

```
 @{
     string auth = @Request.Cookies[FormsAuthentication.FormsCookieName] == null ? string.Empty : Request.Cookies[FormsAuthentication.FormsCookieName].Value;
     }

<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function () {
        jQuery("#bulkupload").uploadify({
            'uploader': '@Url.Content("~/Scripts/uploadify.swf")',
            'cancelImg': '/Content/themes/base/images/cancel.png',
            'buttonText': 'Browse Files',
            'script': '/Creative/Upload/',
            scriptData: { token: "@auth" }, 
            'folder': '/uploads',
            'fileDesc': 'Image Files',
            'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
            'sizeLimit': '38000',
            'multi': true,
            'auto': true,
              'onError'     : function (event,ID,fileObj,errorObj) {
      alert(errorObj.type + ' Error: ' + errorObj.info);
    }
        });
    }); 
    </script> 
```

控制器：

```
public class CreativeController : Controller
{
    public string Upload(HttpPostedFileBase fileData, string token)
    {
      ...
    }
} 
```

> **更新：**好的，这适用于 IE9，但不适用于 Chrome（Chrome 会抛出 302）。FF 甚至不渲染控件。
> 
> 有人知道如何在 Chrome 和 FF 的最新版本中使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T05:20:36.007

当我尝试将 uploadify 与 asp.net mvc3 一起使用时，我遇到了类似的问题。经过大量谷歌搜索后，我发现这似乎可行。它基本上涉及声明一个自定义属性，然后将身份验证 cookie 显式传递到 Uploadify 的 HTTP Post 并通过自定义属性手动处理 cookie。

首先声明这个自定义属性：

```
/// <summary>
/// A custom version of the <see cref="AuthorizeAttribute"/> that supports working
/// around a cookie/session bug in Flash.  
/// </summary>
/// <remarks>
/// Details of the bug and workaround can be found on this blog:
/// http://geekswithblogs.net/apopovsky/archive/2009/05/06/working-around-flash-cookie-bug-in-asp.net-mvc.aspx
/// </remarks>
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
public class TokenizedAuthorizeAttribute : AuthorizeAttribute
{
    /// <summary>
    /// The key to the authentication token that should be submitted somewhere in the request.
    /// </summary>
    private const string TOKEN_KEY = "authCookie";

    /// <summary>
    /// This changes the behavior of AuthorizeCore so that it will only authorize
    /// users if a valid token is submitted with the request.
    /// </summary>
    /// <param name="httpContext"></param>
    /// <returns></returns>
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        string token = httpContext.Request.Params[TOKEN_KEY];

        if (token != null)
        {
            FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(token);

            if (ticket != null)
            {
                var identity = new FormsIdentity(ticket);
                string[] roles = System.Web.Security.Roles.GetRolesForUser(identity.Name);
                var principal = new GenericPrincipal(identity, roles);
                httpContext.User = principal;
            }
        }

        return base.AuthorizeCore(httpContext);
    }
} 
```

然后声明此 Action 以将身份验证 cookie 传递到您的 ViewData，以便您可以将其传递给 Uploadify 小部件。这也将是您稍后调用以实例化 Uploadify 小部件的操作。

```
 [Authorize]
    public ActionResult UploadifyUploadPartial()
    {
        ViewBag.AuthCookie = Request.Cookies[FormsAuthentication.FormsCookieName] == null
                                 ? string.Empty
                                 : Request.Cookies[FormsAuthentication.FormsCookieName].Value;
        return PartialView("UploadifyUpload");
    } 
```

这是 UploadifyUpload 视图的代码。它基本上是设置 Uploadify 的 JavaScript 的包装器。我复制了我的没有更改，因此您必须根据您的应用程序对其进行调整。需要注意的重要一点是，您通过UploadifyUploadPartial 操作中的 ViewData将 传递`authCookie`到属性中。`scriptData`

```
@if (false)
{
    <script src="../../Scripts/jquery-1.5.1-vsdoc.js" type="text/javascript"></script>
}
@{
    ViewBag.Title = "Uploadify";
}
<script src="@Url.Content("~/Scripts/plugins/uploadify/swfobject.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/plugins/uploadify/jquery.uploadify.v2.1.4.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Scripts/plugins/uploadify/uploadify.css")" rel="stylesheet" type="text/css" />
<script>
    $(document).ready(function () {
        CreateUploadifyInstance("dir-0");
    });
    function CreateUploadifyInstance(destDirId) {
        var uploader = "@Url.Content("~/Scripts/plugins/uploadify/uploadify.swf")";
        var cancelImg = "@Url.Content("~/Scripts/plugins/uploadify/cancel.png")";
        var uploadScript = "@Url.Content("~/Upload/UploadifyUpload")";
        var authCookie = "@ViewBag.AuthCookie";
        $('#uploadifyHiddenDummy').after('<div id="uploadifyFileUpload"></div>');
        $("#uploadifyFileUpload").uploadify({
            'uploader': uploader,
            'cancelImg': cancelImg,
            'displayData': 'percentage',
            'buttonText': 'Select Session...',
            'script': uploadScript,
            'folder': '/uploads',
            'fileDesc': 'SunEye Session Files',
            'fileExt': '*.son2',
            'scriptData'  : {'destDirId':destDirId, 'authCookie': authCookie},
            'multi': false,
            'auto': true,
            'onCancel': function(event, ID, fileObj, data) {
                //alert('The upload of ' + ID + ' has been canceled!');
            },
            'onError': function(event, ID, fileObj, errorObj) {
                alert(errorObj.type + ' Error: ' + errorObj.info);
            },
            'onAllComplete': function(event, data) {
                $("#treeHost").jstree("refresh");
                //alert(data.filesUploaded + ' ' + data.errors);
            },
            'onComplete': function(event, ID, fileObj, response, data) {
                alert(ID + " " + response);
            }
        });
    }
    function DestroyUploadifyInstance() {
        $("#uploadifyFileUpload").unbind("uploadifySelect");
        swfobject.removeSWF('uploadifyFileUploadUploader');
        $('#uploadifyFileUploadQueue').remove();
        $('#uploadifyFileUploadUploader').remove();
        $('#uploadifyFileUpload').remove();
    }
</script>
<div id="uploadifyHiddenDummy" style="visibility:hidden"></div>
<div id="uploadifyFileUpload">
</div> 
```

对于 Uploadify Posts 到的操作，使用新`TokenizedAuthorize`属性而不是`Authorize`属性：

```
 [HttpPost]
    [TokenizedAuthorize]
    public string UploadifyUpload(HttpPostedFileBase fileData)
    {
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(Request.Form["authCookie"]);
        if (ticket != null)
        {
            var identity = new FormsIdentity(ticket);
            if (!identity.IsAuthenticated)
            {
                return "Not Authenticated";
            }
        }
        // Now parse fileData...
    } 
```

最后，要使用我们编写的代码，通过 Html.Action Helper 在您希望托管 Uploadify Widget 的任何 View 上调用 UploadifyUploadPartial Action：

```
@Html.Action("UploadifyUploadPartial", "YourUploadControllerName") 
```

在这一点上你应该很高兴。该代码应该可以在 FF、Chrome 和 IE 9 中运行。如果您有问题，请告诉我。

# javascript - 如何使用 javascript 解析来自 mongoHQ 的对象结果？

> ID：10158651
> 
> 赞同：1
> 
> 时间：2012-04-15T00:45:34.863
> 
> 标签：javascript, json, node.js, mongoose

嘿，我是 nodejs 和 mongoose 的新手，我正在尝试使用我的 mongoHQ 数据库进行简单的登录和注册表格。我已经注册保存数据，并且可以从数据库中提取数据以将对象打印到控制台，但是如何解析用户名和密码位置的对象结果

```
 // Define schema
        var UserSchema = new Schema({ 
            password: {type: String, required: true },
            username: {type: String, required: true }
        });
        var User = mongoose.model('User', UserSchema);
             User.password = req.body.password;
             User.username = req.body.username; 
        console.log("going to find users");
        User.findOne({username: User.username, password: User.password}, function(err, docs){
            console.log(docs.username);
        }); 
```

在这一点上，我想做类似 docs.username 或 docs[0] 之类的事情，有人可以给我一些建议吗？

# c# - 什么是 c# 指针，什么样的任务需要它们？

> ID：10158652
> 
> 赞同：-1
> 
> 时间：2012-04-15T00:45:54.250
> 
> 标签：c#, pointers

我以前从未见过这个 - C# 中的指针：

```
public sealed class String : IComparable, ICloneable, IConvertible, IComparable<string>, IEnumerable<char>, IEnumerable, IEquatable<string> {
    public String(char* value); // <-- string has a constructor that takes a char pointer?
...
} 
```

我很想了解一下。

char 指针是否类似于 C/C++ 中的指针，即与内存位置大小相同的 int 值？

我也想知道是否我缺乏理解指针是为什么我从未完全掌握`ref`关键字的作用，换句话说，它们是否相关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:07:52.093

[指针类型](http://msdn.microsoft.com/en-us/library/y31yhkeb%28v=VS.80%29.aspx)是 C# 语言的一部分。它们的工作方式就像 C 中的指针一样，并允许您使用非托管内存、可[blittable](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx)类型和 blittable 类型数组。它们与 ref/out 参数无关（它们使用托管指针，这是不同的东西）。由于如果使用不当，使用指针会破坏类型安全，因此您只能在[不安全](http://msdn.microsoft.com/en-us/library/chfa2zb8%28v=vs.80%29.aspx)的上下文中使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T01:17:44.250

指针在我的理解中是用于性能优化的，在这里你闯入“不安全”的领域，直接操作内存地址。

根据我的经验，图像处理是您从指针中获得显着好处的领域之一，例如

[http://imrannazar.com/Using-Pointers-in-C](http://imrannazar.com/Using-Pointers-in-C)

[不安全的指针迭代和位图 - 为什么 UInt64 更快？](https://stackoverflow.com/questions/5812990/unsafe-pointer-iteration-and-bitmap-why-is-uint64-faster)

肯定还有其他典型的场景，但是一个普通的C#应用程序一般来说是不需要指针的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T03:49:04.117

C# was designed to simplify memory management to provide programmers which is a quicker and easier way to program. That comes at the cost of performance (and lazy programming) as a garbage disposal has to come by and kill all the broken pointers. For instance, in a game update loop this creates a lot of stuff for the garbage disposal to collect:

```
 Vector3 myVector;
       void update(int x, int y, int z)
       {
             myVector = new Vector3(x, y, x); //This will kill your Xbox 360 with enough objects
       } 
```

In c# everything is held as a reference. This is a bit different from C/C++ where the programmer has different ways referencing data in RAM.

As a way to provide more flexibly to programmers, especially in areas which require high performance, a programmer is allowed to use pointers and references. This is called "unsafe" variables because it is no longer managed by the garbage disposal. In other words, if there is a memory leak, the garbage disposal will not come by and delete it.

Another reason is for compatibility between C#/C++. If you get into interpolating code between the two languages, you will quickly realize that C# needs to know how to provide compatibly for pointers being passed and obtained by the C++ side. So say if I want to pass C++ code a pointer, I pass

```
 someInterpatedFunc(ref myVariable); 
```

Hope that answers some questions :)

# c# - 为对象的每个实例分配一个静态 int 中的数字以提供唯一名称 C#

> ID：10158654
> 
> 赞同：0
> 
> 时间：2012-04-15T00:46:37.897
> 
> 标签：c#, variables, static, instance, counter

我在 C# 中有一个 Foo 类，它有一个字符串名称，我希望每个类都有一个唯一的名称。我想要做的是通过创建一个静态 int 变量来获取名称，然后将其分配给我添加到字符串末尾的本地实例 int 变量。但这不起作用，我怎么能得到我想要的结果。

```
class Foo
{
    static int count = 0;
    int fooNum;
    string name;

    public Foo
    {
        ++count;
        fooNum = count;
        name = "Foo" + fooNum;
        Console.WriteLine(name);
    }
}

int main()
{
   for(int i = 0; i < 5; i++)
   {
      Foo test = new Foo();
   }
} 
```

实际输出：Foo5 Foo5 Foo5 Foo5 Foo5

期望的输出：Foo0 Foo1 Foo2 Foo3 Foo4

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:53:14.047

您的代码无法编译。将其更正为：

```
class Foo
{
    static int count = 0;
    int fooNum;
    string name;

    public Foo()
    {
        ++count;
        fooNum = count;
        name = "Foo" + fooNum;
        Console.WriteLine(name);
    }
}

static void Main(string[] args)
{
    for (int i = 0; i < 5; i++)
    {
        Foo test = new Foo();
    }
} 
```

使它像魅力一样编译和工作。它打印

```
Foo1
Foo2
Foo3
Foo4
Foo5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T01:52:40.977

Mitch 和 Tudor 有正确的例子，但我仍然会指出**为什么**你的代码不起作用：

您的代码不起作用，因为您的`Foo`构造函数中缺少括号，这会导致代码无法编译。如果您忽略此编译器错误，您可能正在运行以前的构建，它会产生您所看到的输出。修复构造函数，您将看到您的代码将按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:53:53.393

此代码按预期工作：

```
namespace ConsoleApplication68
{
    class Program
    {
        static void Main(string[] args)
        {
           for (int i = 0; i < 5; i++) 
           { 
              Foo test = new Foo();
              Console.WriteLine(test.name); 
           } 
        }
    }

    class Foo 
    { 
        private static int count = 0; 
        public string name; 

        public Foo() 
        { 
            int fooNum = ++count; 
            name = "Foo" + fooNum; 
        } 
    } 
} 
```

请注意，我已将 移至`Console.WriteLine()`代码中更正确的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T00:54:09.500

尝试将您的 Foos 收集到一个通用集合中，例如：

```
List<Foo> myFooList; 
```

然后，当您将更多 Foos 添加到列表中时，您可以使用索引号来识别它。

# ruby - Ruby - rails - 如何为视图上呈现的文本/字符串中的 url 创建自动超链接？

> ID：10158655
> 
> 赞同：7
> 
> 时间：2012-04-15T00:47:04.267
> 
> 标签：ruby, ruby-on-rails-3

如何在视图上呈现的文本/字符串中为 url 创建自动超链接？我有一个呈现用户活动日志的页面，在该日志/文本/字符串中有一些随机 url，我想自动超链接以在新的浏览器窗口中打开。ruby rails中有这个`auto_link`，我该如何使用它？

```
text = "User xyz accessed url - http://www.something.com on 04/13/2012 00:13:18GMT"

<%= "#{Text}" %> 
```

我希望它带有指向 url 的超链接。URL 可以是文本中的任何位置。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T00:49:13.080

像这样使用 auto_link：

```
<%= auto_link(text) %> 
```

如果您希望生成的链接打开新的浏览器窗口（或选项卡），请添加如下选项：

```
<%= auto_link(text, :html => { :target => '_blank' }) %> 
```

正如评论中 pjumble 所提到的，`auto_link`从 Rails 3.1 开始，它不再是 Rails 核心的一部分，这个 gem 将它带回来：[https](https://github.com/tenderlove/rails_autolink) ://github.com/tenderlove/rails_autolink感谢 pjumble！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-30T12:44:32.797

为了更快地解析，请尝试[https://github.com/vmg/rinku](https://github.com/vmg/rinku)

```
require 'rinku'
Rinku.auto_link(text, mode=:all, link_attr=nil, skip_tags=nil) 
```

此外，通常需要更多过滤器而不仅仅是链接，例如 Youtube 嵌入式视频。为此用途：[https ://github.com/dejan/auto_html](https://github.com/dejan/auto_html)

# animation - 从 Blender 2.5 中的动画中移除速度缓动

> ID：10158661
> 
> 赞同：2
> 
> 时间：2012-04-15T00:48:54.297
> 
> 标签：animation, blender, blender-2.50

默认情况下，Blender 会为动画添加速度缓动。我需要将其移除以在我的模型上获得一致的旋转速度。如何/在哪里可以修改缓动曲线？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T01:40:01.613

您可以在图形编辑器中编辑关键帧插值。选择您的对象，然后在屏幕左下方的选择框中选择图形编辑器。然后，您可以使用滚轮缩小以查看曲线。您可以通过用鼠标右键单击它们并用左键移动它们来编辑这些点。

![在此处输入图像描述](../Images/f9a01a996edcbe102e96b19e63afd984.png)

# c++ - 遍历二维向量以从内存中删除对象

> ID：10158664
> 
> 赞同：1
> 
> 时间：2012-04-15T00:50:00.813
> 
> 标签：c++, memory-management, vector

我有一个包含对象的二维向量。

```
std::vector<std::vector<List> >   ListPos;

ListPos.clear();

std::vector<List> initPV;
ListPos.push_back(initPV);

List newList;

//... some code to determine where the object needs to go and vector resized to accommodate ...// 

ListPos[ThisY].insert(ListPos[ThisY].begin()+ThisX, newList); 
```

创建对象并根据需要调整向量的大小，我的问题是如何循环遍历向量和`delete`我不使用的任何对象（给定一些位置数据，例如`if(![3][7])`释放内存。

我还可以对向量执行任何操作以释放对象在删除后使用的空间的内存吗？

```
| List | List | List |
-------------------------------
| List | List | Delted | List |
-------------------------------
| Deleted | List | 
```

所以在上面的表示中，我有一个最多 4 列的 3 行向量，所以它说删除的地方就是对象的位置被删除的地方。

我猜，一旦从内存中删除了对象，向量中的空间就会……“零”？

我应该注意，在删除对象的地方说`[2][0]`我需要留下可供另一个对象代替它的位置，但`[2][1]`如果这有意义的话，不能允许代替它。`[2][1]`需要留在`[2][1]`

我尝试了以下（实际代码）

```
for (std::vector<std::vector<List*> >::iterator i = Area::AreaControl.ListPos.begin(); i != Area::AreaControl.ListPos.end();++i) 
{
     for (std::vector<List*>::iterator j = i->begin(); j != i->end();++i)
     {
         if(j != Area::AreaControl.ListPos[0][0]) {
             // Delete
         }
     }
 } 
```

但没有骰子:(

```
 error: conversion from ‘std::vector<List>::iterator {aka __gnu_cxx::__normal_iterator<List*, std::vector<List> >}’ to non-scalar type ‘std::vector<List*>::iterator {aka __gnu_cxx::__normal_iterator<List**, std::vector<List*> >}’ requested
src/Void_OnLoop.cpp:62:73: error: no match for ‘operator!=’ in ‘j != i.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator-> [with _Iterator = std::vector<List>*, _Container = std::vector<std::vector<List> >, __gnu_cxx::__normal_iterator<_Iterator, _Container>::pointer = std::vector<List>*]()->std::vector<_Tp, _Alloc>::end [with _Tp = List, _Alloc = std::allocator<List>, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<List*, std::vector<List> >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = List*]()’
src/Void_OnLoop.cpp:62:73: note: candidates are:
/usr/include/c++/4.6/ext/new_allocator.h:128:5: note: template<class _Tp> bool __gnu_cxx::operator!=(const __gnu_cxx::new_allocator<_Tp>&, const __gnu_cxx::new_allocator<_Tp>&)
/usr/include/c++/4.6/bits/stl_iterator.h:817:5: note: template<class _Iterator, class _Container> bool __gnu_cxx::operator!=(const __gnu_cxx::__normal_iterator<_Iterator, _Container>&, const __gnu_cxx::__normal_iterator<_Iterator, _Container>&)
/usr/include/c++/4.6/bits/stl_iterator.h:811:5: note: template<class _IteratorL, class _IteratorR, class _Container> bool __gnu_cxx::operator!=(const __gnu_cxx::__normal_iterator<_IteratorL, _Container>&, const __gnu_cxx::__normal_iterator<_IteratorR, _Container>&)
/usr/include/c++/4.6/bits/streambuf_iterator.h:200:5: note: template<class _CharT, class _Traits> bool std::operator!=(const std::istreambuf_iterator<_CharT, _Traits>&, const std::istreambuf_iterator<_CharT, _Traits>&)
/usr/include/c++/4.6/bits/basic_string.h:2497:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator!=(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
/usr/include/c++/4.6/bits/basic_string.h:2485:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator!=(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/basic_string.h:2473:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator!=(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/postypes.h:223:5: note: template<class _StateT> bool std::operator!=(const std::fpos<_StateT>&, const std::fpos<_StateT>&)
/usr/include/c++/4.6/bits/stl_vector.h:1297:5: note: template<class _Tp, class _Alloc> bool std::operator!=(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
/usr/include/c++/4.6/bits/allocator.h:137:5: note: template<class _Tp> bool std::operator!=(const std::allocator<_Tp1>&, const std::allocator<_Tp1>&) 
```

正如您可能从我的代码中看出的那样，我不是大师。任何建议都将受到高度赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:13:43.357

在您的第一个代码块中，您定义 a `std::vector<std::vector<List> >`，即 List 向量的向量，在第二个代码块中您循环`std::vector<std::vector<List*> >`，即指向 List 的向量的向量。因此，应用的迭代器是不同的类型，不能相互转换。

我建议对内部和外部向量使用 typedef，以确保您的类型一致。

请记住，通过迭代器擦除元素会使迭代器无效，但会返回一个指向下一个元素的新迭代器。

# android - Android 和线程

> ID：10158665
> 
> 赞同：0
> 
> 时间：2012-04-15T00:50:07.250
> 
> 标签：android, android-layout

我有 2 个关于 android 开发和线程的问题

1）你认为我什么时候应该在android开发中使用线程？

2）如果我让主 UI 线程在显示 toast 之前等待设置某个变量，那么我考虑在一个单独的线程中设置一个 while(true) 循环来不断检查该变量。现在，如果设置了变量，我如何在第一个线程（UI 线程）上调用将显示 toast 的方法

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:56:55.047

在大多数情况下，不需要直接使用线程。用于线程编程的 android 工具很棒，而且易于使用。

您有大约三个选项可以从另一个线程调用 UI 线程：

*   [处理](http://developer.android.com/reference/android/os/Handler.html)程序 - 在 UI 线程的另一个线程上设置处理程序，并在需要时向其发送消息。
*   [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) - 在后台执行主要任务，但在完成之前、期间和之后修改 UI。
*   PerformOnUiThread - 使用可运行对象调用此方法以修改 UI 线程上的 UI。

值得阅读的好文章是[Painless Threading](http://android-developers.blogspot.in/2009/05/painless-threading.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:57:12.573

永远不要有一个`while(true)`连续运行的循环。它会消耗大量资源，并且在您的情况下，完成的很少。

线程适用于（主要）后台任务和资源密集型任务（这样您就不会阻塞 UI 线程）。要创建新线程，请使用以下命令：

```
new Thread(new Runnable(){
    public void run(){
       //do stuff here.
       }
    }
).start(); 
```

您还可以查看 Android AsyncTask 以避免直接使用线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T02:11:06.370

根据您正在使用/使用的应用程序类型，正确使用 Theads 可能是拥有快速响应式 UI 的关键。

关键规则：
如果您需要访问文件系统、网络、图像加载或任何需要不仅仅是简单的值或状态检查的任何内容，请**立即启动并在线程中执行该工作**。正如这里已经说过的，有许多选项可用，尽管我自己通常使用：

```
change_UI_if_needed_to_indicate_click_response();
new Thread(new Runnable(){ 
    do stuff here ; 
}).start() 
```

您还可以像这样使用标准（非内联）线程对象。

这可能是不好的做法，我不知道。无论如何，它对我来说效果很好，并不是你问题的重点。

**如果您想使用标准 Java 在 UI 线程上运行某些东西**，而不是专门允许此类事情的专用 Android 对象，则每个视图都附加了一个 post(Runnable) 方法。对我来说，这是最容易将代码返回到 UI 线程的方法。

```
myView.post(new Runnable{
   codeForUI();
}); 
```

我的一般规则是尽量不要在 UI 线程上运行任何不需要的东西。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T11:22:13.703

如果要防止应用程序出现当前错误或崩溃“应用程序未响应”，则必须使用线程。我在调用网络服务、地理位置时使用它。

好的法语文章：

[http://souissihaythem.blogspot.com/2011/08/application-not-responding.html](http://souissihaythem.blogspot.com/2011/08/application-not-responding.html)

[http://souissihaythem.blogspot.com/2011/08/application-not-responding-solution.html](http://souissihaythem.blogspot.com/2011/08/application-not-responding-solution.html)

# c# - 我将如何在密码框顶部覆盖灰色单词“密码”？

> ID：10158666
> 
> 赞同：3
> 
> 时间：2012-04-15T00:50:08.697
> 
> 标签：c#, windows-phone-7, xaml, passwordbox

您知道如何在许多 WP7 应用程序中为文本框添加“水印”以提示用户应该在其中放入什么内容吗？我想用密码框来做到这一点。使用文本框相当简单，我只是修改了获取和设置焦点事件以正确处理这一切，但在密码框中，文本仅显示为被屏蔽的点（除了最后一个字符，这是一个很好的接触） .

有没有办法做到这一点？我正在考虑在密码框顶部放置一个文本框并将其隐藏在点击或其他东西上，但这看起来很丑陋。

更新：我真的很喜欢 silverlight 工具包中的 PhoneTextBox 控件，但它没有任何密码选项。我真的在寻找具有水印功能的 PasswordBox。但事实证明，它比我希望的要难得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T02:41:22.950

文本框上的“灰色覆盖文本”通常称为`Watermarks`.

[http://www.c-sharpcorner.com/UploadFile/74f20d/create-a-watermark-textbox-effect-from-window-phone-7/](http://www.c-sharpcorner.com/UploadFile/74f20d/create-a-watermark-textbox-effect-from-window-phone-7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T09:13:47.020

简单的方法，只需下载[Silverlight for Windows Phone Toolkit](http://silverlight.codeplex.com)并使用 PhoneTextBox 控件。

[您可以在此处](http://windowsphonegeek.com/articles/Windows-Phone-Toolkit-PhoneTextBox-in-depth)查看控件的使用示例！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T02:16:51.080

所以我最终采用了这种技术：[http ://damianblog.com/2011/01/21/wp7-password-watermark/](http://damianblog.com/2011/01/21/wp7-password-watermark/)

这几乎是我的第一个直觉，它有点俗气，正在研究 silverlight 工具包的人绝对应该在某个时候尝试实现它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T11:16:51.123

这也可能满足您的需求：-

[http://watermarktextbox.codeplex.com/](http://watermarktextbox.codeplex.com/)

# navigation - Prism Navigation：在 UnityContainer 中注册 View/ViewModel 的位置？

> ID：10158667
> 
> 赞同：2
> 
> 时间：2012-04-15T00:50:09.603
> 
> 标签：navigation, prism, unity-container

我正在学习如何使用 Prism Navigation API，它需要通过以下方式在 Unity 容器中注册您的`Views`（或者`ViewModels`如果使用 ViewModel-first）：

```
Container.RegisterType<object, HomeView>("HomeView"); 
```

请参阅[此博客文章](http://blogs.msdn.com/b/kashiffl/archive/2011/03/10/prism-4-region-navigation-with-silverlight-frame-navigation-and-unity.aspx)和[MSDN 文档](http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx)。我看到的例子已经`Bootstrapper`通过`ConfigureContainer()`方法在类中注册了这些类型。但是一些示例在`Module`类中注册类型。我的问题是：**在容器中注册这些类型是否重要？**

我的直觉是，在`Bootstrapper` `ConfigureContainer()`方法中注册将使所有注册类型都可用，`Modules`而在`Module`类中注册将意味着这些类型仅在 that 中注册`Module`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:32:37.177

简短的回答：不，它与您注册的地方无关。

将实例注册到它们所在的库中是唯一合乎逻辑的。Unity 也有一点不同。

**示例 1：** 假设您有 ModuleA 和 ModuleB，并且您将在基础架构中有一个接口。您将此接口注册到 ModuleA 中的实现。然后，您在 moduleB 中解析此实例。它会起作用，因为您已在 moduleA 中配置了它。如果您还没有，那么示例 2 适合您。

**示例 2：** 假设您有一个未注册的 ClassA 类型。你没有在`bootstrapper`or中配置这个，`module`你在这个类上调用了一个解析。Unity 会自动为您执行此操作并解决它，如果他能找到它们，它甚至会解决依赖关系。可能有一个例外。我不确定接口，我相信如果它没有注册到具体的实现，它就无法解决它。

# python - 从python字符串模板中提取变量

> ID：10158669
> 
> 赞同：0
> 
> 时间：2012-04-15T00:50:14.447
> 
> 标签：python, django

对于 python 字符串模板，有一种干净的方法可以提取模板字符串中的变量名。

我实际上希望能够将模板字符串写入文本字段，然后将变量替换为其他看起来更复杂的变量。

因此，例如，我会将用户输入的模板放入变量中

```
t = Template(( request.POST['comment'] )) 
```

评论字符串可能

```
'$who likes $what' 
```

我需要一个变量名称数组，以便可以将字符串转换为类似

```
{{{who}}} likes {{{what}}} 
```

也许还有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:09:56.440

我不知道任何与模板相关的 api，但您可以使用正则表达式：

```
>>> import re
>>> rx = re.compile(r'\$(\w+)')
>>> rx.sub(r'{{{\1}}}', '$who likes $what')
'{{{who}}} likes {{{what}}}' 
```

的第一个参数`rx.sub()`替换第二个参数中每次出现的变量，并`\1`替换为变量的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T01:08:37.500

```
def replaceVars(matchObj):
    return "{{{%s}}}" % matchObj.groups()[0]

c = r"\$(\w+)\s*"

s = "$who likes $what"

converted = re.sub(c, replaceVars, s) 
```

# python - 在 Python < 2.5 中执行三元条件的最佳方法

> ID：10158670
> 
> 赞同：2
> 
> 时间：2012-04-15T00:50:15.107
> 
> 标签：python, python-2.5, ternary

我必须忍受 Python 版本 < 2.5（具体来说是 2.4.3）

似乎从 2.5 开始在 Python 中引入了三元运算符。对于不熟悉的人，Python >= 2.5 中的三元运算符如下所示：

```
def do_ternary(flag):
    return "foo" if flag else "bar" 
```

我想知道一些解决方案来在 Python 的早期版本中模拟这一点。我肯定可以用 if ... else 来做，但我正在寻找更 Pythonic 的东西，我不会因为放在一些生产级代码上而感到羞耻:)

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T01:08:01.533

做所有事情的*正确*`if/else`方法是：

```
(condition and (yes_value,) or (no_value,))[0] 
```

它既可以短路又可以解决何时`yes_value`本身是错误的问题。显然，如果您有理由避免这种混乱，那就这样做吧；在您的示例中，两个条件都是常量表达式，因此您可以执行以下操作：

```
{True: yes_value, False: no_value}[bool(condition)] 
```

或更简洁地说：

```
(no_value, yes_value)[condition] 
```

如果您*确实*需要短路，但您确信 yes_value 永远不会错误，您可以修剪元组：

```
 condition and yes_value or no_value 
```

但这可能仅在`yes_value`实际是常数时才有效。`if:`如果这些都不适合您的口味或需求，只需使用带有中间变量的纯 ol语句

```
if condition:
    result = yes_value
else:
    result = no_value 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T01:17:45.593

实际上，我在网上查找并发现了一个看起来非常优雅的 Pythonic 解决方案：

```
def _if(test):
    return lambda alternative: \
               lambda result: \
                   [delay(result), delay(alternative)][not not test]()

def delay(f):
    if callable(f): return f
    else: return lambda: f

>>> fact = lambda n: _if (n <= 1) (1) (lambda: n * fact(n-1))
>>> fact(100)
93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000L 
```

你觉得这个怎么样？在我看来，它看起来非常干净且易于阅读。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T00:58:26.707

一个常见的技巧是使用列表索引，因为`False`/`True`变成`0`/`1`当需要整数时。如果测试可能是 false-y 或 true-y 而不是布尔值，最好先确保测试是布尔值：

```
["bar", "foo"][bool(flag)] 
```

将产生与您问题中的三元相同的输出。

编辑：Dougal 指出这可能与三元的行为略有不同，因为将评估真值和假值，这可能会产生副作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T00:54:41.130

用于执行此操作的经典“技巧”是：

```
test and true_value or false_value 
```

这在 python 中的工作方式`and`和`or`工作方式一样：

```
x or y   ->    if x is false, then y, else x
x and y  ->    if x is false, then x, else y 
```

[来源](http://docs.python.org/library/stdtypes.html#boolean-operations-and-or-not)

这意味着我们得到大致相同的结果 - 只要`true_value`评估为`True`- 因此，例如，以下内容将*不起作用*：

```
flag and [] or "bar" 
```

`[]`评估为`False`。

我仍然认为这比简单地使用 if/else 块更易读，除非您熟悉它，否则不清楚。

所以我建议使用：

```
if test:
    return true_value
else:
    return false_value 
```

（用分配或任何需要的地方替换返回）。

# c++ - 随机数生成器（rand）不是随机的吗？

> ID：10158673
> 
> 赞同：0
> 
> 时间：2012-04-15T00:50:56.430
> 
> 标签：c++, random

我正在生成迷宫，我只能选择第一列或最后一列。而且我只能选择偶数行（如果您从 1 开始行索引）。我有正确的逻辑，除了迷宫起始位置不是随机的。如果我生成 50 个迷宫，它们都是 20x20，那么所有起始位置都是相同的。任何帮助将不胜感激。谢谢。

```
void Maze::generatePath()
{
    int startingColumn = -1;
    int startingRow = -1;

    srand (time(NULL));

    int side = rand() % 2;
    startingColumn = (width - 1) * side; // will get first or last column

    int row = rand() % height; // 0 -> height - 1

    if(row % 2 == 0) // even, add one, or subtract if last row
    {
        if(row + 1 >= width)
            startingRow = row - 1;
        else
            startingRow = row + 1;
    }
    else
    {
        startingRow = row; // odd, keep it
    }

    grid[startingRow][startingColumn] = ' '; // starting character is blank
} 
```

每次生成新迷宫时，我都会调用此方法。此代码用于获取起始位置。剩下的我还没写。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T00:59:17.500

仅在程序启动时调用`srand`一次。通过在同一秒内一遍又一遍地调用它，您可以不断地将随机数生成器重置为相同的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:59:55.293

如果您需要更好的随机性，您可以使用比时间（NULL）更好的随机种子。例如，它可能是类 unix 系统上的 /dev/random（或更实际地是 /dev/urandom）设备。对于真正的核心案例，可能需要一些基于物理现象的真正随机性。例如这个： http: [//photonics.anu.edu.au/qoptics/Research/qrng.php](http://photonics.anu.edu.au/qoptics/Research/qrng.php)

# qt - Qt/PyQt - 经常将像素图绘制到小部件，部分绘制不正确

> ID：10158674
> 
> 赞同：1
> 
> 时间：2012-04-15T00:51:02.660
> 
> 标签：qt, graph, plot, pyqt, real-time

我正在开发一个基于 Qt 的应用程序（实际上是在 PyQt 中，但我认为这与这里无关），其中一部分涉及将潜在的连续数据流实时绘制到图形上。

我通过创建一个派生的类来实现这一点，该类`QWidget`缓冲传入的数据，并每 30 毫秒绘制一次图形（默认情况下）。在`__init__()`中，a`QPixmap`被创建，并且在 a 的每个刻度上`QTimer`，（1）图形向左移动新数据将占用的像素数，（2）在空间中绘制的矩形，（3）绘制的点，以及 (4)`update()`在小部件上调用，如下（缩减）：

```
 # Amount of pixels to scroll
    scroll=penw*len(points)

    # The first point is not plotted now, so don't shift the graph for it
    if (self.firstPoint()):
        scroll-=1

    p=QtGui.QPainter(pm)
    # Brush setup would be here...

    pm.scroll(0-scroll, 0, scroll, 0, pm.width()-scroll, pm.height())
    p.drawRect(pm.width()-scroll, 0, scroll, pm.height())        

    # pen setup etc happens here...

    offset=scroll

    for point in points:
        yValNew = self.graphHeight - (self.scalePoint(point))

        # Skip first point
        if (not(self.firstPoint())):
            p.drawLine(pm.width()-offset-penw, self.yVal, pm.width()-offset, yValNew)

        self.yVal = yValNew
        offset-=penw

    self.update() 
```

最后，`paintEvent`简单地将像素图绘制到小部件上：

```
 p = QtGui.QPainter(self)
    p.drawPixmap(0, 0, self.graphPixmap) 
```

据我所见，这应该可以正常工作，但是，当数据接收速度非常快（即在每个刻度上绘制整个图表）并且小部件大于某个大小（大约 700 像素）时，一切都到700px 区域的左侧明显滞后。这可能在此视频中得到了最好的展示：http: [//dl.dropbox.com/u/1362366/keep/Graph_bug.swf.html](http://dl.dropbox.com/u/1362366/keep/Graph_bug.swf.html)（由于帧速率低，视频有点滞后，但效果可见）

有什么想法可能导致这种情况或我可以尝试的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:43:04.193

我不是 100% 确定这是否是问题所在，但我想我至少可以做出一些贡献。

`self.update()`是一个异步调用，它会在稍后再次到达主事件循环时引发绘制事件。所以这让我想知道您的绘图是否有问题，因为您修改像素图与实际在paintEvent中使用它之间的同步问题。几乎看起来，要使这个确切的代码正常工作，您需要锁定您的paintEvent，但这听起来很顽皮。

为了快速测试，您可以尝试在调用更新后立即强制事件循环刷新：

```
self.update()
QtGui.QApplication.processEvents() 
```

不确定这是否会解决它，但值得一试。

这实际上可能是使用`repaint()`并导致直接绘制事件的适当情况，因为您正在使用受控帧速率进行“动画”：`self.repaint()`

我注意到一个与你类似的问题，有人试图实时绘制心脏监视器：http: [//qt-project.org/forums/viewthread/10677](http://qt-project.org/forums/viewthread/10677)
也许你可以尝试重组你的代码类似的。他没有将绘画分成两个阶段，而是使用 QLabel 作为显示小部件，将像素图设置到 QLabel 中，并立即绘制整个图形，而不是依赖于对 widget.update() 的调用

# excel - 计算两个条件是否匹配 - EXCEL 公式

> ID：10158675
> 
> 赞同：37
> 
> 时间：2012-04-15T00:51:07.853
> 
> 标签：excel, excel-formula

我有这张表，我想创建一个公式，该公式将根据 column`A` *和*column的真实条件计算值`C`。

示例：如果在列中的`A`值为 M（男性），并且在列`C`中为 YES，则它会计数。

谁能帮我这个公式？

![桌子](../Images/5a8cae00acfd4e1db4352d893da9a3c2.png)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-07T19:20:00.650

在单元格前面添加工作表名称，例如：

```
=COUNTIFS(stock!A:A,"M",stock!C:C,"Yes") 
```

假设工作表名称为“stock”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-07T10:26:21.040

如果您的数据在`A1:C100`当时：

**Excel - 所有版本**

`=SUMPRODUCT(--(A1:A100="M"),--(C1:C100="Yes"))`

**Excel - 2007 年以后**

`=COUNTIFS(A1:A100,"M",C1:C100,"Yes")`

# c++ - 关于 C++ 中的枚举和类以及它们是如何工作的

> ID：10158676
> 
> 赞同：2
> 
> 时间：2012-04-15T00:51:34.620
> 
> 标签：c++, class, enums

我对枚举如何与类一起工作感到困惑..

这是我的测试代码...是的，我知道它不起作用... [http://ideone.com/oy3VH](http://ideone.com/oy3VH)

基本上我有测试功能工作......测试2和3是相同的功能，我只是为了举例目的。

我的困惑在于“testing3”。我想做的是通过调用具有人类可读值的对象来访问 switch 语句。像 PlayAgain 或 Instructions。

现在正如您在第 79 行中看到的那样，这有效.. 但只有在 main 中声明枚举（或我称之为对象的 w/e 范围......

我想做的是没有第二个声明，使用枚举名称..如第 82 行所示？

这可能吗..如果可以的话怎么办？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:54:43.393

在类本身之外使用枚举时，您需要确定枚举的范围。

例如：

```
Func( cEnumtest::PlayAgain ); 
```

其他一些提示：

你的枚举本质上是整数常量。我建议你有一个命名约定，为了代码可读性和清晰起见，将它们与其他代码严格区分开来。

例如：（'k' 代表常量；'c' 通常用于指示类数据类型，这就是为什么 'k' :)

```
enum eGameActions
{
    kActionPlay,
    kActionQuit,
    kActionSaveGame
}; 
```

# php - 试图通过php找到一种根据邮政编码发送分销商电子邮件的方法

> ID：10158682
> 
> 赞同：0
> 
> 时间：2012-04-15T00:52:17.303
> 
> 标签：php, database, html, email, location

我有一个客户是一家烟草公司，在全国各地都有分销商。我正在寻找编写一个脚本，该脚本将允许我区分哪个分销商，哪个州，将电子邮件发送到仅取决于邮政编码属于哪个州。我知道我可以编写脚本的电子邮件部分，但我需要一种方法来查找位置并将该电子邮件专门发送给该分销商。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:01:44.480

谷歌搜索邮政编码数据库应该会对您有所帮助。您可以将其作为表格添加到您自己的数据库中，搜索邮政编码并相应地发送电子邮件......

# python - 通过 tcp 连接到 dbus

> ID：10158684
> 
> 赞同：24
> 
> 时间：2012-04-15T00:52:25.777
> 
> 标签：python, dbus

我写了一个简单的 python 程序来播放和暂停女妖音乐播放器。虽然它在我自己的机器上工作，但我无法在连接到同一路由器 (LAN) 的远程计算机上执行此操作。我编辑了远程机器的 session.conf，添加了这一行：

```
<listen>tcp:host=localhost,port=12434</listen> 
```

这是我的程序：

```
 import dbus

    bus_obj=dbus.bus.BusConnection("tcp:host=localhost,port=12434")
    proxy_object=bus_obj.get_object('org.bansheeproject.Banshee',                              
    '/org/bansheeproject/Banshee/PlayerEngine')

    playerengine_iface=dbus.Interface(proxy_object,
    dbus_interface='org.bansheeproject.Banshee.PlayerEngine')

    var=0

    while (var!="3"):
        var=raw_input("\nPress\n1 to play\n2 to pause\n3 to exit\n")

            if var=="1":
                print "playing..."
                playerengine_iface.Play()

            elif var=="2":
                print "pausing"
                playerengine_iface.Pause() 
```

这就是我尝试执行它时得到的

```
Traceback (most recent call last):
  File "dbus3.py", line 4, in <module>
    bus_obj=dbus.bus.BusConnection("tcp:host=localhost,port=12434")
  File "/usr/lib/python2.7/dist-packages/dbus/bus.py", line 125, in __new__
    bus = cls._new_for_bus(address_or_type, mainloop=mainloop)
dbus.exceptions.DBusException: org.freedesktop.DBus.Error.NoServer: Failed to connect to socket "localhost:12434" Connection refused 
```

我在这里做错了什么？我应该编辑 /usr/lib/python2.7/dist-packages/dbus/bus.py

更新：

好的，这是我添加时的交易

```
<listen>tcp:host=192.168.1.7,port=12434</listen> 
```

到/etc/dbus-1/session.conf，然后重新启动，希望它会在重新启动时开始监听，它永远不会启动。它卡在加载屏幕上，偶尔会出现带有以下文本的黑屏：

```
Pulseaudio Configured For Per-user Sessions Saned Disabled;edit/etc/default/saned 
```

所以，当我去 ctrl+alt+f1 时，将 session.conf 更改为原始状态并重新启动，它可以正常启动。

那是怎么回事？如何让 dbus 守护进程监听 tcp 连接，而不会遇到问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-07T18:35:58.937

我最近需要设置它，并发现诀窍是：*顺序*对于. 您应该确保 TCP 元素首先出现。奇怪，我知道，但确实如此，至少对我而言。（如果我颠倒顺序并将 UNIX 套接字元素放在首位，我会看到*完全相同*的黑屏行为。）`<listen>``session.conf`*`<listen>`*

 *此外，附加 TCP`<listen>`标记是必要的，但还不够。要通过 TCP 进行远程 D-Bus 连接，您需要做三件事：

1.  在 UNIX 上面添加一个`<listen>`标签，类似于：

    ```
    <listen>tcp:host=localhost,bind=*,port=55556,family=ipv4</listen>
    <listen>unix:tmpdir=/tmp</listen> 
    ```

2.  添加一行（在标签正下方就可以了`<listen>`），上面写着：

    ```
    <auth>ANONYMOUS</auth> 
    ```

3.  在这些下面添加另一行，上面写着：

    ```
    <allow_anonymous/> 
    ```

除了您`<auth>`的. 总之，您应该包含一个如下所示的代码段：`<auth>``session.conf``session.conf`

```
<listen>tcp:host=localhost,bind=*,port=55556,family=ipv4</listen>
<listen>unix:tmpdir=/tmp</listen>

<auth>ANONYMOUS</auth>
<allow_anonymous/> 
```

做完这三件事后，你应该可以远程连接到会话总线了。[以下是在D-Feet](http://live.gnome.org/DFeet/)中指定远程连接时的外观：

![D-Feet 屏幕截图](../Images/7b079d17fd8f9cb67d8b5ee3136ab639.png)

请注意，如果您也想连接到系统总线，您需要对 进行类似的更改`/etc/dbus-1/system.conf`，但指定*不同*的TCP 端口，例如 55557。（奇怪的是，在这种情况下，元素顺序似乎无关紧要。）

我在此配置中注意到的唯一奇怪的行为是使用`sudo`（例如`sudo gvim`）运行桌面应用程序往往会产生错误或直接失败，说“没有 D-BUS 守护程序正在运行”。但这是我很少需要做的事情，几乎不重要。

如果您想使用 发送到远程机器`dbus-send`，则需要进行`DBUS_SESSION_BUS_ADDRESS`相应设置，例如，设置为：

```
export DBUS_SESSION_BUS_ADDRESS=tcp:host=localhost,bind=*,port=55556,family=ipv4 
```

即使您要发送到的总线实际上是远程计算机的*系统*总线，只要设置与目标上的 TCP`<listen>`标记匹配，这仍然有效`/etc/dbus-1/system.conf`。（感谢[Martin Vidner](https://stackoverflow.com/users/684133/martin-vidner)的提示。在我偶然发现他对[这个问题](https://stackoverflow.com/questions/3944458/dbus-send-to-remote-machine)的回答之前，我不相信`dbus-send`支持远程操作。）

**更新**：如果您正在使用 systemd（并且想要访问系统总线），您可能还需要添加一行`ListenStream=55557`to `/lib/systemd/system/dbus.socket`，如下所示：

```
[Socket]
ListenStream=/var/run/dbus/system_bus_socket
ListenStream=55557  # <-- Add this line 
```

**更新2：感谢@altagir**指出[最新版本的 D-Bus](https://launchpad.net/ubuntu/+source/dbus/1.6.12-0ubuntu5)将在可用的系统上启用[AppArmor](http://wiki.apparmor.net/index.php/Main_Page)中介，因此您可能还需要添加`<apparmor mode="disabled"/>`到`session.conf`/`system.conf`以使这些说明正常工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-15T23:04:25.350

从 dbus 1.6.12（例如 kubuntu 13.10）开始，您的连接也将被拒绝，除非您添加到 dbus 配置文件（*/etc/dbus-1/mybus.conf*或需要远程访问的接口，即 system.d/ *my.接口.conf* )

```
<apparmor mode="disabled"/> 
```

**更新：**在努力创建允许服务连接到自定义 dbus-daemon 的 apparmor 配置文件之后，由于 DBUS 中的错误，似乎连接总是被拒绝......**所以现在我们必须**在使用 tcp= 时禁用 apparmor。 .. 针对 14.04 的错误修复

[在](https://lists.ubuntu.com/archives/apparmor/2013-November/004681.html)与 Tyler Hicks讨论后，我在[bugs.launchpad.net](https://bugs.launchpad.net/ubuntu/+source/dbus/+bug/1252821)上打开了一个错误：

> AppArmor 中介代码只能通过 UNIX 域套接字检查对等标签。获取标签然后拒绝连接时很可能会看到错误。

注意：dbus < 1.6.12 无法识别禁用标志，因此您需要根据系统打包不同版本的 mydaemon.conf），否则如果没有 apparmor，dbus-daemon 将在启动时失败...我现在使用我的 CMakeLists.txt ：

```
IF(EXISTS "/usr/sbin/apparmor_status")
  install(FILES dbus_daemon-apparmordisabled.conf RENAME dbus_daemon.conf DESTINATION /etc/dbus-1/ )
ELSE (EXISTS "/usr/sbin/apparmor_status")
   install(FILES dbus_daemon.conf DESTINATION /etc/dbus-1/ )
ENDIF(EXISTS "/usr/sbin/apparmor_status") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-29T03:30:00.437

再次感谢@Shorin，另一个仅供参考 - 我必须做这样的事情才能让我的工作：

```
<listen>tcp:host=localhost,bind=0.0.0.0,port=55884</listen> 
```

请注意`bind=0.0.0.0`-`bind=*`对我不起作用，我省略了这`family=ipv4`部分。我在 Ubuntu 12.04 上。我确实在远程机器上使用了 netstat 来确认 dbus 正在侦听端口，并从本地 telnet 以确认端口已打开。

```
netstat -plntu | grep 55884

tcp   0     0 0.0.0.0:55884    0.0.0.0:*     LISTEN    707/dbus-daemon 
```

你必须看到类似的东西`0 0.0.0.0:55884`，而不是类似的东西`0 127.0.0.1:55884`。*

# javascript - CSS JS 显示 none 改变 div

> ID：10158685
> 
> 赞同：0
> 
> 时间：2012-04-15T00:52:34.277
> 
> 标签：javascript, jquery, html, css

我有一个单传呼机。在那个寻呼机中，我有一个设置为`display:none`（div 中的固定侧导航）的项目。

滚动到某个 div 时可以显示它吗？

所以它在代码中开始但不显示，然后当用户滚动到`#about`侧面导航时可以显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:20:22.397

本质上，您需要检查用户是否滚动到或超出了 about 的 div id。首先，您需要建立 div 的当前 Y 值。

```
//cache about div
var about = $('#about');
//this caches the about div position on window load
var aboutPosition = about.position(); 
```

接下来，您需要确定用户滚动了多远。我决定实现这一点的最好方法是使用计时器。您可以使用 scoll 事件，但它对用户浏览器的负担太大，而且计时器在很大程度上无法区分。

```
//generic timer set to repeat every 10 mili(very fast) 
//with a callback to execute the logic
var checkScrollPos = window.setInterval("scrollTopLogic()",10);

function scrollTopLogic(){
    //if about y position is greater than or equal to the 
    //current window scroll position do something
    if(aboutPosition.y >= $(window).scrollTop()){
        $('nav').show();
        //remove timer since it is no longer needed
        window.clearInterval(checkScrollPos);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:02:34.613

您可以捕获 div 的滚动事件并像这样显示元素

```
$("#div").scroll(function() {
   $("#item").show();
}); 
```

# c - 如何逐位打印数字？

> ID：10158688
> 
> 赞同：-6
> 
> 时间：2012-04-15T00:53:29.540
> 
> 标签：c, digits

> **可能重复：**
> [识别给定数字中的数字。](https://stackoverflow.com/questions/981162/identify-the-digits-in-a-given-number)

我需要打印每个数字而不将其转换为字符串。这是可能的？例如：

```
int n = 1234;
int x;

while( ?? ) {
  x = ??
  printf("%d\n", x); 
} 
```

它打印：

```
1
2
3
4 
```

我不知道该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:58:10.277

除非你告诉我这不是家庭作业，否则我不会给出完整的答案。

请注意，这`x / 10`会让您`x`去掉最后一位数字。所以`123 / 10 = 12`,`45 / 10 = 4`等

请注意，这`x % 10`给了你的最后一位数字`x`。所以`123 % 10 = 3`,`45 % 10 = 5`等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T00:58:29.927

这实际上涉及数论/数学方法。例如，您可以将数字 1234 写为`1x10^3 + 2x10^2 + 3x10^1 + 4x10^0`。现在考虑如何使用`%`(mod) 和`/`(integer division) 来提取每个数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T01:00:29.060

如果您知道最大位数，则可以使用 / 和 %

例如，如果你想找到数千个地方，答案是

```
 num =...
int thousands = (num / 1000) % 10 
```

您实际上可以循环执行此操作

# php - 如何增加 apache 进程或并发 php 文件的数量？

> ID：10158696
> 
> 赞同：0
> 
> 时间：2012-04-15T00:54:53.797
> 
> 标签：php, apache, ubuntu, concurrency, daemons

> 问题不在我的服务器上，而是在网络或浏览器中的某个地方……我猜想是某种针对 DDoS 攻击的策略，您不能一次从一个 IP 访问服务器上的多个文件。

我有一个问题问你。我正在测试**四核 ubuntu 服务器**。我安装了**lamp**，**apache**显然正在使用**prefork**（“/usr/sbin/apache2 -l”）。

问题是我不能一次运行超过**6 个 php 文件**。例如，我创建了 10 个 php 守护程序，但其中只有 6 个真正开始做某事……其他人正在等到某事结束。如果我在这些 php 文件运行时从浏览器访问任何 php 文件，浏览器就会挂在那里（继续加载——实际上只是在等待）。

有没有办法增加它？我试图更改**etc/apache2/apache2.conf**文件，以增加 StartServers、MinSpareServers 和 MaxSpareServers，但这没有帮助。我知道服务器可以轻松处理负载。

**任何人都可以回答这个问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:58:31.347

你是如何运行 PHP 的？你在使用 fastcgi、mod_php 等吗？

这：[http](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxclients) ://httpd.apache.org/docs/2.2/mod/mpm_common.html#maxclients可能会对您有所帮助，但限制也可能在您的 PHP 中，具体取决于您的 php.ini 配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T11:05:16.137

我猜你正在寻找你的`"pm.max_children"`指令`/etc/php5/fpm/pool.d/yoursite.conf`

尝试增加它。

# ruby - OS X 中内置的 Ruby 扩展可以在 Linux 上运行吗？

> ID：10158698
> 
> 赞同：0
> 
> 时间：2012-04-15T00:55:25.803
> 
> 标签：ruby, linux, macos, unix, ruby-c-extension

我想为将在 CentOS 服务器上运行的 C（带有 C++ 库）程序制作 Ruby 扩展，但在 Mac 上工作对我来说会更方便（尤其是无需重新安装所有第 3 方库）。

由于它们都是基于 UNIX 的，所以一旦我把它放在 CentOS 上，在 OS X 中创建库会不会把它扔掉，或者我应该只是手动安装 CentOS，然后在那里完成所有工作？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T00:58:51.970

它们之间甚至没有 100% 的源代码兼容性，尽管您可以轻松地坚持对两者都有效的方法。

Linux 和 OS X 之间没有二进制兼容性；甚至基本的目标文件格式也不同（Linux 使用 ELF，OS X 使用 Mach-O）。

# python - 如何从 Python 脚本中捕获 Curl 的输出

> ID：10158701
> 
> 赞同：15
> 
> 时间：2012-04-15T00:56:02.980
> 
> 标签：python

我想使用 curl 查找有关网页的信息，但是在 Python 中，到目前为止我有这个：

```
os.system("curl --head www.google.com") 
```

如果我运行它，它会打印出：

```
HTTP/1.1 200 OK
Date: Sun, 15 Apr 2012 00:50:13 GMT
Expires: -1
Cache-Control: private, max-age=0
Content-Type: text/html; charset=ISO-8859-1
Set-Cookie: PREF=ID=3e39ad65c9fa03f3:FF=0:TM=1334451013:LM=1334451013:S=IyFnmKZh0Ck4xfJ4; expires=Tue, 15-Apr-2014 00:50:13 GMT; path=/; domain=.google.com
Set-Cookie: NID=58=Giz8e5-6p4cDNmx9j9QLwCbqhRksc907LDDO6WYeeV-hRbugTLTLvyjswf6Vk1xd6FPAGi8VOPaJVXm14TBm-0Seu1_331zS6gPHfFp4u4rRkXtSR9Un0hg-smEqByZO; expires=Mon, 15-Oct-2012 00:50:13 GMT; path=/; domain=.google.com; HttpOnly
P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
Server: gws
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
Transfer-Encoding: chunked 
```

我想要做的是能够使用正则表达式匹配其中的 200（我不需要帮助），但是，我找不到将上面的所有文本转换为字符串的方法。我怎么做？我试过了：`info = os.system("curl --head www.google.com")`但`info`只是`0`.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-08-20T13:16:33.200

出于某种原因...我需要使用 curl （没有 pycurl，httplib2 ...），也许这可以帮助某人：

```
import os
result = os.popen("curl http://google.es").read()
print result 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-15T01:02:50.143

试试这个，使用[`subprocess.Popen()`](http://docs.python.org/library/subprocess.html#popen-constructor)：

```
import subprocess
proc = subprocess.Popen(["curl", "--head", "www.google.com"], stdout=subprocess.PIPE)
(out, err) = proc.communicate()
print out 
```

如[文档](http://docs.python.org/library/subprocess.html)中所述：

> subprocess 模块允许您生成新进程，连接到它们的输入/输出/错误管道，并获取它们的返回码。该模块旨在替换其他几个较旧的模块和功能，例如：

```
os.system
os.spawn*
os.popen*
popen2.*
commands.* 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-31T18:44:47.333

```
import os
cmd = 'curl https://randomuser.me/api/'
os.system(cmd) 
```

* * *

# 结果

```
{"results":[{"gender":"male","name":{"title":"mr","first":"çetin","last":"nebioğlu"},"location":{"street":"5919 abanoz sk","city":"adana","state":"kayseri","postcode":53537},"email":"çetin.nebioğlu@example.com","login":{"username":"heavyleopard188","password":"forgot","salt":"91TJOXWX","md5":"2b1124732ed2716af7d87ff3b140d178","sha1":"cb13fddef0e2ce14fa08a1731b66f5a603e32abe","sha256":"cbc252db886cc20e13f1fe000af1762be9f05e4f6372c289f993b89f1013a68c"},"dob":"1977-05-10 18:26:56","registered":"2009-09-08 15:57:32","phone":"(518)-816-4122","cell":"(605)-165-1900","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/38.jpg","medium":"https://randomuser.me/api/portraits/med/men/38.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/38.jpg"},"nat":"TR"}],"info":{"seed":"0b38b702ef718e83","results":1,"page":1,"version":"1.1"}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T02:02:41.750

好吧，有一种更容易阅读但更麻烦的方法。这里是：

```
import os
outfile=''  #put your file path there
os.system("curl --head www.google.com>>{x}".format(x=str(outfile))  #Outputs command to log file (and creates it if it doesnt exist).
readOut=open("{z}".format(z=str(outfile),"r")  #Opens file in reading mode.
for line in readOut:
    print line  #Prints lines in file
readOut.close()  #Closes file
os.system("del {c}".format(c=str(outfile))  #This is optional, as it just deletes the log file after use. 
```

这应该可以满足您的需求。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T01:08:39.410

您可以在 Python 中使用 HTTP 库或 http 客户端库，而不是调用 curl 命令。事实上，您可以安装一个 curl 库（只要您的操作系统上有编译器）。

其他选择是 httplib2（推荐），它是一个相当完整的 http 协议客户端，也支持缓存，或者只是普通的 httplib 或名为 Request 的库。

如果您真的真的只想运行 curl 命令并捕获其输出，那么您可以在此处记录的内置子进程模块中使用 Popen 执行此操作：http: [//docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-15T01:31:56.787

尝试这个：

```
import httplib
conn = httplib.HTTPConnection("www.python.org")
conn.request("GET", "/index.html")
r1 = conn.getresponse()
print r1.status, r1.reason 
```

# php - 如何使用下拉选择过滤页面？

> ID：10158703
> 
> 赞同：0
> 
> 时间：2012-04-15T00:56:25.997
> 
> 标签：php, filter, webpage

我有一个显示人员及其国籍列表的网页。

```
<td><?php echo $row['First_Name'] . " " . $row['Last_Name'] ?></td>

<td><?php echo $row['Country'] ?></td> 
```

我想向页面添加一个控件，允许用户在国家/地区应用过滤器。

关于我应该如何去做的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:14:39.270

您可以链接到该国家/地区 - 例如这样：

```
//Change it, so it fits for your purpose    
<a href="file.php?filter=country">Filter by country</a>. 
```

PHP 可能看起来像这样：

```
<?php

$con = mysql_connect("localhost","user","pass"); 
if (!$con) { 
    die('Could not connect to mysql server');
} 
mysql_select_db("thepoolscene", $con); 

$filterBy = ( isset( $_GET['filter']) ? 'country' : 'ASC');
$result = mysql_query("SELECT * FROM tblPlayers ORDER BY $filterBy");

?> 
```

# bash - 使用 Bash 从文件名中删除连字符

> ID：10158704
> 
> 赞同：2
> 
> 时间：2012-04-15T00:56:32.770
> 
> 标签：bash, shell, rename

我正在尝试创建一个小的 Bash 脚本来从文件名中删除连字符。例如，我想重命名：

CropDamageVO-041412.mpg

至

CropDamageVO041412.mpg

我是 Bash 的新手，所以要温柔 :] 谢谢你的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T01:01:07.830

尝试这个：

```
for file in $(find dirWithDashedFiles -type f -iname '*-*'); do
  mv $file ${file//-/}
done 
```

这是假设您的目录名称中没有破折号。那会打破这个。

这里解释[了](http://tldp.org/LDP/abs/html/string-manipulation.html)`${varname//regex/replacementText}`语法。只需搜索子字符串替换。

此外，如果您的目录或文件名中有空格，这会中断。如果你的文件名中有空格，你应该使用这个：

```
for file in *-*; do
  mv $file "${file//-/}"
done 
```

这样做的缺点是必须在每个包含您要更改的文件的目录中运行，但是，就像我说的，它更健壮一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T00:58:44.420

```
FN=CropDamageVO-041412.mpg
mv $FN `echo $FN | sed -e 's/-//g'` 
```

反引号 (``) 告诉 bash 在其中运行命令并在表达式中使用该命令的输出。sed 部分应用正则表达式从文件名中删除连字符。

或者对当前目录中匹配特定模式的所有文件执行此操作：

```
for i in *VO-*.mpg
do
    mv $i `echo $i | sed -e 's/-//g'`
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T01:00:51.290

```
f=CropDamageVO-041412.mpg
echo "${f//-}" 
```

或者，当然，

```
mv "$f" "${f//-}" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-29T09:55:32.240

从任何字符串中删除连字符的通用解决方案：

```
$ echo "remove-all-hyphens" | tr -d '-'
removeallhyphens
$ 
```

# php - JQmodal弹出不能出现

> ID：10158706
> 
> 赞同：0
> 
> 时间：2012-04-15T00:56:42.007
> 
> 标签：php, jquery, popup, jqmodal

我对 jqmodal 有疑问。那个弹窗不能出现。我的场景是变量警告中的任何数据，都会弹出并显示所有警告数据。这是代码。请帮我。谢谢

```
<link type="text/css" rel="stylesheet" href="<? echo base_url().'css/jqmodal/css/prettify.css'; ?>" />
<script type="text/javascript" language="JavaScript" src="<? echo base_url().'css/jqmodal/';?>js/prettify.js"> </script>
<link type="text/css" rel="stylesheet" href="<? echo base_url().'css/jqmodal/';?>css/jquery.modaldialog.css" />
<script type="text/javascript" language="JavaScript" src="<? echo base_url().'css/jqmodal/';?>js/jquery.js"> </script>
<script type="text/javascript" language="JavaScript" src="<? echo base_url().'css/jqmodal/';?>js/jquery.modaldialog.js"> </script>
<script type="text/javascript" language="JavaScript">
$().ready(function(){
prettyPrint();
});
</script>
if(@$warning != NULL)
{

             ?>
             <div id="jqModal" class="jqmWindow" style="display: none;"></div>
             <script type="text/javascript">

             jQuery().ready(function($){

             $('#jqModal').jqm({onShow:setText}); 
             $('#jqModal').jqmShow();

             function setText(){
                $('#jqModal').text(<?php echo @$warning;?>);
             }

             });
             </script>
             <?php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:30:13.897

嘿 Ayu 我为你构建了一个小演示**Demo** [http://jsfiddle.net/BG42j/](http://jsfiddle.net/BG42j/)

现在，如果您单击视图...在上面的演示中，您将获得我在`setText`函数中设置的文本。休息一下，你可以玩这个演示。**如果这有帮助，请不要忘记接受答案。:) 你的接受率很低:)**

有用的链接： [http ://dev.iceburg.net/jquery/jqModal/](http://dev.iceburg.net/jquery/jqModal/)

所以我认为问题是声明 setText 的方式不正确 /* 触发点击时执行的回调。Show notice */ onShow (callback): 显示对话框时调用。确保显示（设置为可见）对话框。

希望这会有所帮助，祝你有个愉快的经历！干杯

**jQuery代码**

```
$(document).ready(function() {
    $('#dialog').jqm({onShow:setText});
   // $('#dialog').jqm().jqmShow({overlay: 70});
});

var setText =  function(h) {
        /* callback executed when a trigger click. Show notice */
        h.w.text('Warning! foooooo');
        h.w.css('opacity',0.92).slideDown(); 
        }
​ 
```

# android - 如何防止回收的 ListView 项目显示旧内容？

> ID：10158707
> 
> 赞同：5
> 
> 时间：2012-04-15T00:56:46.597
> 
> 标签：android, android-listview

我正在开发一个使用自定义 ResourceCursorAdapter 来显示 TextView 和 CheckBox 的 ListView。TextView 和 CheckBox 从 Cursor 获取它们的状态。我遇到了一些问题，最近的一个问题是，当我滚动某些行时，有些行有来自旧 TextViews 的文本，并且在不应该选择的时候选择了一些 CheckBox。我添加了一条日志行来查看发生了什么，这让我更加困惑。

```
@Override
public void bindView(View v, Context ctx, Cursor c) {
    ViewHolder holder = (ViewHolder)v.getTag();

holder.tv.setText(holder.tvText);           
holder.cb.setChecked(holder.checked);
Log.d(TAG, "in bindView, rowId:" + holder.rowId + " Scripture:" + holder.tvText);   
} 
```

.

```
@Override
public View newView(Context ctx, Cursor c, ViewGroup vg){       

    View v = li.inflate(layout, vg, false);
    ViewHolder holder;

    holder = new ViewHolder();
    holder.tv = (TextView)v.findViewById(to[0]);
    holder.tvText = c.getString(c.getColumnIndex(from[0]));
    holder.cb = (CheckBox)v.findViewById(to[1]);
    holder.rowId = c.getLong(c.getColumnIndex(from[2]));
    holder.checked = (c.getString(c.getColumnIndexOrThrow(from[1])).equals("n")) ?
            false : true;
    holder.cb.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            View rowView = ((View)v.getParent());
            ViewHolder holder = (ViewHolder)rowView.getTag();

            holder.checked = (holder.checked == false) ? true : false;

            smDb.setMemorized(holder.rowId);
            rowView.setTag(holder);
            Log.d(TAG, "check box clicked: " + holder.rowId);
        }});
    Log.d(TAG, "in newView, rowId:" + holder.rowId);
    v.setTag(holder);

    return v;       
} 
```

.

```
static class ViewHolder {
    TextView tv;
    String tvText;
    CheckBox cb;
    boolean checked;
    Long rowId;
} 
```

日志输出

```
in newView, rowId:26
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in newView, rowId:27
in bindView, rowId:27 Scripture:Matthew 6:24
in newView, rowId:28
in bindView, rowId:28 Scripture:Matthew 16:15-9
in newView, rowId:29
in bindView, rowId:29 Scripture:Matthew 25:40
in newView, rowId:30
in bindView, rowId:30 Scripture:Luke 24:36-9
in newView, rowId:31
in bindView, rowId:31 Scripture:John 3:5
in newView, rowId:32
in bindView, rowId:32 Scripture:John 7:17
in newView, rowId:33
in bindView, rowId:33 Scripture:John 10:16
in newView, rowId:34
in bindView, rowId:34 Scripture:John 14:15
in newView, rowId:26
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6
in bindView, rowId:26 Scripture:Matthew 5:14-6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:15:48.230

这是导致您的问题的视图回收。

我不确定这是处理它的最顺畅的方式，但我就是这样做的。我创建了一个数组来保存我的按钮状态信息，然后在我的 getView 方法中使用它来确保即使元素离开屏幕也能保持状态。

我的一个项目的示例，其中我有一个列表适配器，每行上都有按钮，可以有多种状态（文本和颜色）：

```
public class ButtonCursorAdapter extends SimpleCursorAdapter {
    private Cursor c;                       // Passed in cursor
    private Context context;
    private Activity activity;
    public static String[] atdState;       // String array to hold button state
    public static String[] atdRow;         // Matching string array to hold db rowId

    public ButtonCursorAdapter(Context context, int layout, Cursor c,
                    String[] from, int[] to) {
            super(context, layout, c, from, to);
            this.c = c;
            this.context = context;
            this.activity = (Activity) context;
            atdState = new String[c.getCount()];  // initialize button state array
            atdRow = new String[c.getCount()];    // initialize db rowId array
            c.moveToFirst();
            int i = 0;
            while (c.isAfterLast() == false) {
                    if (c.getString(3) == null) {  // if state is null, set to " "
                            atdState[i] = " ";
                    } else {
                            atdState[i] = c.getString(3);  // set state to state saved in db
                    }
                    atdRow[i] = c.getString(0);     // set the rowId from the db
                    i++;
                    c.moveToNext();
            }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null)
                    convertView = View.inflate(context,
                                    R.layout.listlayoutdoublebutton, null);
            final int pos = position;
            View row = convertView;
            c.moveToPosition(position);
            TextView first = (TextView) convertView.findViewById(R.id.ListItem1);
            TextView last = (TextView) convertView.findViewById(R.id.ListItem2);
            Button atdButton = (Button) convertView.findViewById(R.id.attendbutton);
            first.setText(c.getString(1));
            last.setText(c.getString(2));
            atdButton.setText(atdState[position]);  // set the button state
            if (atdState[position].equals("P")) {   // colorize the button depending on state
                    atdButton.getBackground().setColorFilter(0xFF00FF00,
                                    PorterDuff.Mode.MULTIPLY);
            } else if (atdState[position].equals("T")) {
                    atdButton.getBackground().setColorFilter(0xFFFFFF00,
                                    PorterDuff.Mode.MULTIPLY);
            } else if (atdState[position].equals("E")) {
                    atdButton.getBackground().setColorFilter(0xFFFF6600,
                                    PorterDuff.Mode.MULTIPLY);
            } else if (atdState[position].equals("U")) {
                    atdButton.getBackground().setColorFilter(0xFFFF0000,
                                    PorterDuff.Mode.MULTIPLY);
            } else {
                    atdButton.getBackground().clearColorFilter();
            }
            atdButton.setFocusable(true);
            atdButton.setClickable(true);

            atdButton.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                            Button atdButton = (Button) view
                                            .findViewById(R.id.attendbutton);
                            String test = atdButton.getText().toString();
                            if (test.equals(" ")) {
                                    atdButton.setText("P");
                                    atdState[pos] = "P";
                                    atdButton.getBackground().setColorFilter(0xFF00FF00,
                                                    PorterDuff.Mode.MULTIPLY);
                            } else if (test.equals("P")) {
                                    atdButton.setText("T");
                                    atdState[pos] = "T";
                                    atdButton.getBackground().setColorFilter(0xFFFFFF00,
                                                    PorterDuff.Mode.MULTIPLY);
                            } else if (test.equals("T")) {
                                    atdButton.setText("E");
                                    atdState[pos] = "E";
                                    atdButton.getBackground().setColorFilter(0xFFFF6600,
                                                    PorterDuff.Mode.MULTIPLY);
                            } else if (test.equals("E")) {
                                    atdButton.setText("U");
                                    atdState[pos] = "U";
                                    atdButton.getBackground().setColorFilter(0xFFFF0000,
                                                    PorterDuff.Mode.MULTIPLY);
                            } else if (test.equals("U")) {
                                    atdButton.setText("P");
                                    atdState[pos] = "P";
                                    atdButton.getBackground().setColorFilter(0xFF00FF00,
                                                    PorterDuff.Mode.MULTIPLY);
                            }
                    }
            });
            return (row);
    } 
```

}

在我使用 setText 并为我的按钮着色的地方，你会想要 setChecked 或类似的东西，但希望这会为你指明正确的方向。

# javascript - Javascript 变量范围。如何从内部对象函数访问对象变量？

> ID：10158712
> 
> 赞同：2
> 
> 时间：2012-04-15T00:57:13.773
> 
> 标签：javascript

我想知道如何使用 javascript 对象中的函数访问“name”e 变量，如下所示：

```
function myObj() {
    this.vars = {
        name: 'bob',
        age: '42'
    }
    this.functions = {
        sayName: function() {
            alert(this.vars.name);
        }
    }
}

var obj = new myObj();
obj.functions.sayName(); 
```

我在这里想念什么？

如果我传递对自身的引用，我可以获得名称 var，例如：

```
function myObj() {
    this.vars = {
        name: 'bob',
        age: '42'
    }
    this.functions = {
        sayName: function(name) {
            alert(name);
        }
    }
}

var obj = new myObj();
obj.functions.sayName(obj.vars.name); 
```

但这似乎有点多余......想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T01:04:05.930

问题是在您的函数`this.functions.sayName`中，`this`关键字是指`this.functions`而不是当前对象¹。

这是该问题的修复：

```
function myObj() {
    var vars = this.vars = {
        name: 'bob',
        age: '42'
    }
    this.functions = {
        sayName: function() {
            alert(vars.name);
        }
    }
}

var obj = new myObj();
obj.functions.sayName(); 
```

这会在其中创建一个局部变量`myObj`，您可以从任何内部范围访问该变量。它还将该变量作为任何实例化类的属性向外界公开`myObj`，这意味着您仍然可以执行类似的操作

```
obj.vars.name = 'test'; 
```

它仍然会改变对象的内部状态。这可能是您当前设置的最佳解决方案。

¹`this` JavaScript 中关键字的行为很有趣。我推荐Mozilla Developer Network 上[的](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)优秀文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T01:00:13.367

你可以这样做：

```
var thisObj = this;
this.functions = {
    sayName: function() {
        alert(thisObj.vars.name);
    }
} 
```

不确定这是否是最好的解决方案，但它确实有效。如果您在函数内部，Javascript *this总是指内部范围。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T01:03:10.603

只需删除`this`：

```
function myObj() {
    var vars = {
        name: 'bob',
        age: '42'
    };
    this.functions = {
        sayName: function() {
            alert(vars.name);
        }
    };
};

var obj = new myObj();
obj.functions.sayName();​ 
```

[**现场演示**](http://jsfiddle.net/LGDtp/3)

# windows-phone-7 - 刷新 Windows Phone 7 应用隔离存储中的资源

> ID：10158715
> 
> 赞同：0
> 
> 时间：2012-04-15T00:57:56.303
> 
> 标签：windows-phone-7, isolatedstorage, windows-phone

我有一个依赖于应用程序随附的 XML 数据文件的 Windows Phone 应用程序。当应用程序第一次在手机上运行时，我将文件加载到隔离存储中。将文件加载到隔离存储后，应用程序将使用数据的隔离存储版本。在我的应用程序的下一个版本（市场更新）中，XML 文件将包含更多元素，我如何在每次应用程序更新（市场上的新版本）时更新一次数据文件？

我以为我可以更改隔离存储中的文件名，但这会留下垃圾。我还可以在加载 XML 文件时检查异常，但是还有其他更优雅的方法吗？我不想在每次运行我的应用程序时检查隔离存储中的旧文件。

理想的情况是放一段代码，当新版本的应用程序加载到手机上时会执行一次，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:12:02.230

据我所知，在应用程序安装/更新后首次运行时，没有“开箱即用”事件会运行一次。

您必须自己标记运行，就像您已经说明的那样（保存当前版本，在每次运行应用程序时比较版本以查看应用程序是否已更新！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T01:28:27.227

我*想*我现在明白你想要什么了。

1.  将 XML 文件添加为资源。
2.  使用[GetResourceStream](http://msdn.microsoft.com/en-us/library/ms596994.aspx)获取 XML 的内容。

请注意，资源的名称类似于 /DllName;component/Folder/ResourceName

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:41:01.457

这是我所做的：

在我的`DataLayer`类的构造函数方法中，我添加了以下代码：

```
private bool AppIsOld
{
    get
    {
        string storedVersion = GetStoredAppVersion(); //stored previously "seen" version
        string currentVersion = GetCurrentlyRunningAppVersion();
        return !(storedVersion == currentVersion);
    }
}

private string GetCurrentlyRunningAppVersion()
{
    var asm = Assembly.GetExecutingAssembly();
    var parts = asm.FullName.Split(',');
    return parts[1].Split('=')[1].ToString();
} 
```

然后我运行以下检查：

```
if (AppIsOld)
    RefreshResources(); //do whatever to refresh resources 
```

函数代码`GetCurrentlyRunningAppVersion()`取自[这里](https://stackoverflow.com/questions/4153049/get-assembly-version-on-windows-phone-7)。

这个解决方案不是我想到的，因为每次调用类构造函数时它都会运行，而我想要在版本更新时运行一次的东西。

# c# - 404 正在寻找 ~/Account/LogOn

> ID：10158722
> 
> 赞同：1
> 
> 时间：2012-04-15T00:58:41.667
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

这让我很困惑。它工作正常，现在不行了。由于某种原因，我的 AccountController Logon() 方法再也找不到了，我无法理解原因。

我的 Global.asax.cs：

```
 public static readonly ILog Log = LogManager.GetLogger(typeof(MvcApplication));

    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            null,
            "{area}/{controller}/Paginate/{itemsPerPage}/{pageNumber}/{searchString}", // URL with parameters
            new {area = string.Empty, controller = "Home", action="Paginate", searchString = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{area}/{controller}/{action}/{id}", // URL with parameters
            new {area = string.Empty, controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        ControllerBuilder.Current.DefaultNamespaces.Add("C3.WebUI.Controllers");
    } 
```

我注册了 2 个区域，`Admin`并且`Finance`.

我的帐户控制器：

```
using System;
using System.Web.Mvc;
using System.Web.Security;
using C3.WebUI.Models;

namespace C3.WebUI.Controllers
{
    public class AccountController : SecureController
    {

        //
        // GET: /Account/LogOn

        public ActionResult LogOn()
        {
            var model = new LogOnModel();
            return View(model);
        }

        //
        // POST: /Account/LogOn

        [HttpPost]
        public ActionResult LogOn(LogOnModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                if (Membership.ValidateUser(model.UserName, model.Password))
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                    Session["User"] = Membership.GetUser(model.UserName, true);

                    if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                        && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                    {
                        return Redirect(returnUrl);
                    }
                    else
                    {
                        return RedirectToAction("Index", "Home");
                    }
                }
                else
                {
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }

        //
        // GET: /Account/LogOff

        public ActionResult LogOff()
        {
            FormsAuthentication.SignOut();
            Session.Abandon();

            return RedirectToAction("Index", "Home");
        }

        //
        // GET: /Account/Register

        public ActionResult Register()
        {
            return View();
        }

        //
        // POST: /Account/Register

        [HttpPost]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;
                Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }

        //
        // GET: /Account/ChangePassword

        [Authorize]
        public ActionResult ChangePassword()
        {
            return View();
        }

        //
        // POST: /Account/ChangePassword

        [Authorize]
        [HttpPost]
        public ActionResult ChangePassword(ChangePasswordModel model)
        {
            if (ModelState.IsValid)
            {

                // ChangePassword will throw an exception rather
                // than return false in certain failure scenarios.
                bool changePasswordSucceeded;
                try
                {
                    MembershipUser currentUser = Membership.GetUser(User.Identity.Name, true /* userIsOnline */);
                    changePasswordSucceeded = currentUser.ChangePassword(model.OldPassword, model.NewPassword);
                }
                catch (Exception)
                {
                    changePasswordSucceeded = false;
                }

                if (changePasswordSucceeded)
                {
                    return RedirectToAction("ChangePasswordSuccess");
                }
                else
                {
                    ModelState.AddModelError("", "The current password is incorrect or the new password is invalid.");
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }

        //
        // GET: /Account/ChangePasswordSuccess

        public ActionResult ChangePasswordSuccess()
        {
            return View();
        }

        #region Status Codes
        private static string ErrorCodeToString(MembershipCreateStatus createStatus)
        {
            // See http://go.microsoft.com/fwlink/?LinkID=177550 for
            // a full list of status codes.
            switch (createStatus)
            {
                case MembershipCreateStatus.DuplicateUserName:
                    return "User name already exists. Please enter a different user name.";

                case MembershipCreateStatus.DuplicateEmail:
                    return "A user name for that e-mail address already exists. Please enter a different e-mail address.";

                case MembershipCreateStatus.InvalidPassword:
                    return "The password provided is invalid. Please enter a valid password value.";

                case MembershipCreateStatus.InvalidEmail:
                    return "The e-mail address provided is invalid. Please check the value and try again.";

                case MembershipCreateStatus.InvalidAnswer:
                    return "The password retrieval answer provided is invalid. Please check the value and try again.";

                case MembershipCreateStatus.InvalidQuestion:
                    return "The password retrieval question provided is invalid. Please check the value and try again.";

                case MembershipCreateStatus.InvalidUserName:
                    return "The user name provided is invalid. Please check the value and try again.";

                case MembershipCreateStatus.ProviderError:
                    return "The authentication provider returned an error. Please verify your entry and try again. If the problem persists, please contact your system administrator.";

                case MembershipCreateStatus.UserRejected:
                    return "The user creation request has been canceled. Please verify your entry and try again. If the problem persists, please contact your system administrator.";

                default:
                    return "An unknown error occurred. Please verify your entry and try again. If the problem persists, please contact your system administrator.";
            }
        }
        #endregion
    }
} 
```

我在这里的变化很小。

我的 ~Views/Account/LogOn.cshtml：

```
@model C3.WebUI.Models.LogOnModel

@{
    ViewBag.Title = "Log On";
}

<h2>Log On</h2>
@Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.")

@using (Html.BeginForm()) {
    <div>
        <fieldset>
            <legend>Account Information</legend>

            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>
            <p>
                <input type="submit" value="Log On" />
            </p>
        </fieldset>
    </div>
} 
```

据我所知，一切看起来都是正确的。为什么导航到 /Account/LogOn?ReturnUrl=%2f 时出现 404 错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:02:57.293

好吧，没关系，我想通了。

对于我的路线注册，我认为我应该指定该区域作为路线的一部分；这显然是不正确的。一旦我删除了`area`路线注册的部分，一切又恢复了正常。

# ruby - 让一个模块继承自Ruby中的另一个模块

> ID：10158730
> 
> 赞同：29
> 
> 时间：2012-04-15T00:59:42.883
> 
> 标签：ruby, module, inheritance

我正在为 Rails 制作一个小程序，其中包括我在模块内部构建的一些方法`ApplicationHelper`。这是一个例子：

```
module Helper
    def time
        Time.now.year
    end
end

module ApplicationHelper
    # Inherit from Helper here...
end 
```

我知道这一点，`ApplicationHelper < Helper`并且`include Helper`可以在类的上下文中工作，但是对于模块到模块的继承，您将使用什么？谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-15T01:07:06.190

事实上，您*可以*在另一个模块内部定义一个模块，然后**将**其包含在外部模块中。

```
so ross$ cat >> mods.rb
module ApplicationHelper
  module Helper
    def time
      Time.now.year
    end
  end
  include Helper
end

class Test
  include ApplicationHelper
  def run
    p time
  end
  self
end.new.run
so ross$ ruby mods.rb
2012 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-23T13:45:13.227

一个潜在的问题是，如果包含的模块附加了类方法，那么这些方法可能会附加到错误的对象上。

在某些情况下，直接在基类中包含“父”模块可能会更安全，然后使用新方法包含另一个模块。例如

```
module ApplicationHelper
  def self.included(base)
    base.class_eval do
      include Helper
      include InstanceMethods
    end
  end

  module InstanceMethods
    def new_method
      #..
    end
  end

end 
```

新方法没有直接定义，`ApplicationHelper`因为`include Helper`将在方法定义之后运行，导致它们被`Helper`. `class_eval`也可以在块内定义方法

# java - JAVA - 使用数组字符串的 JTable。这些数组在 try{

> ID：10158733
> 
> 赞同：-1
> 
> 时间：2012-04-15T01:00:02.520
> 
> 标签：java, mysql, merge, bind

该程序必须从 MySQL 数据库下载数据。并填写 JList。我想绑定这些数据。

在这里你有一个代码：

```
 Connection connection = null;
        String dbtime;
        String query = "Select * FROM EMP";
        String[] celDatas = null;
        String[] celNames = null;
        try {

            (...)

            Statement stmt = connection.createStatement();
            ResultSet rs = stmt.executeQuery(query);
            ResultSetMetaData rsmd = rs.getMetaData();

            int NumOfCol = rsmd.getColumnCount();
            celNames = new String[NumOfCol];
            celDatas = new String[NumOfCol];

            for(int weq=1; weq<=NumOfCol; weq++) {
                System.out.println(rsmd.getColumnName(weq));
                celNames[weq] = rsmd.getColumnName(weq);
                while (rs.next()) {
                    dbtime = rs.getString(weq);
                    System.out.println(dbtime);
                    celDatas[weq] = dbtime;
                }
                rs = stmt.executeQuery(query);
                System.out.println();
            }
        } catch (ClassNotFoundException e) {

        } catch (SQLException e) {

        }

    final JList source = new JList(celDatas,celNames);
    JScrollPane pane = new JScrollPane(source);
    pane.setSize(f.getSize().width-60,300);
    pane.setLocation(30,20); 
```

如您所见，这些字符串数组位于 try 括号中，这可能是问题的根源。

当我编译我的程序时，它显示：

```
at Application2.run(Application2.java:261)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:682)
at java.awt.EventQueue.access$000(EventQueue.java:85)
at java.awt.EventQueue$1.run(EventQueue.java:643)
at java.awt.EventQueue$1.run(EventQueue.java:641)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:652)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

Application2.java:261 是 celNames[weq] = rsmd.getColumnName(weq);

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:22:43.433

您正在索引`celNames[]`和`cellDatas[]`using ，它通过*inclusive*`weq`迭代值，而数组是 size ，因此您将它们索引到了边界之外。`1``NumOfCol` *`NumOfCol`*

 *相反，像这样索引你的数组：

```
celNames[weq - 1]
celDatas[weq - 1] 
```

顺便说一句，按照惯例，变量名应该以小写字母开头，所以`NumOfCol`应该是`numOfCol`.*

# php - 是否可以让 Mongo PHP 扩展抛出异常，比如 PDO 的 PDO::ERRMODE_EXEPTION？

> ID：10158734
> 
> 赞同：3
> 
> 时间：2012-04-15T01:00:09.740
> 
> 标签：php, mongodb

如果我忽略了错误检查，我更喜欢我的程序尽早失败并严重失败。不幸的是，Mongo 扩展需要我不断检查`MongoDb->lastError()`. 有没有一种简单的方法可以`array(PDO::ATTR_ERRMODE=>PDO::ERRMODE_EXEPTION)`用 Mongo 进行模拟？

最好是不涉及为所有内容编写包装类的东西，我宁愿只在绝对必须的情况下这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:15:11.833

> Mongo 扩展需要我不断检查`MongoDb->lastError()`

所以这里实际发生的事情有点微妙。

默认情况下，MongoDB 以“即发即弃”模式运行。所以它向服务器发送一个写操作（*fire*），然后简单地相信服务器会处理它（*忘记*）。这是所有驱动程序的所有写入的默认配置。

您需要例外，因此您需要在“安全”模式下发布更新。`lastError()`在安全模式下，驱动程序会在将控制权返回给调用者之前自动发出命令。

您可以为各个操作设置安全模式：

```
$collection->insert(array("x" => 1), array("safe" => true)); 
```

驱动程序应该支持在连接级别上设置它，但由于某种原因不支持。所以你必须在`array('safe' => true)`任何地方添加它。

> 最好是不涉及为所有内容编写包装类的东西......

不幸的是，我认为这是不可避免的。“安全”模式只是一个开始。在“安全”模式下，您只能保证在主服务器上提交内存。如果要确保数据在磁盘上，则需要使用“fsync”或“journal”。如果您正在运行副本集并且想要确保数据位于两个位置，则需要使用一些“w”选项。

此外，如果您使用的是 Replica Sets（*10gen 建议所有生产部署*都使用 Replica Sets ），那么当主服务器出现故障时，您将不得不处理异常。通常，您希望重试连接，因为打开新连接会强制建立与新主节点的新连接。

这与许多其他调整一起通常意味着您的代码将因为您需要处理各种异常情况而需要某种类型的包装器类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T08:45:02.010

不，这目前是不可能的。请为此在[http://jira.mongodb.org](http://jira.mongodb.org)提交功能请求。

# ipad - 该网站如何阻止 iPad 上的捏合缩放？

> ID：10158738
> 
> 赞同：0
> 
> 时间：2012-04-15T01:00:35.533
> 
> 标签：ipad, html, mobile, zooming, responsive-design

我在 iPad 上访问了[mobile-apps-news](http://www.mobile-apps-news.com/)并注意到我无法捏合缩放，它使用的是响应式布局 - 但我很好奇他们如何阻止 iOS 下的捏合缩放。这绝对不是 Javascript。

有谁知道他们是怎么做到的？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T01:11:26.173

这是一个移动 safari web-kit 属性。命名的元标记`view port`有能力这样做。它定义了许多参数，其中参数的 `user-scalable = no`值`Content`是您正在寻找的。它可以防止用户仅通过向元标记添加属性来缩放页面。您可以使用相同的标签来指定您的初始比例和最大缩放级别。`<meta name = "viewport" content = "user-scalable = no">`. 有关更多信息，请查看[safari 开发人员指南](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T16:51:25.647

请记住使用正确的语法添加它，同时定义内容：

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
```

# ninject - 使用 ninject 进行 nservicebus saga 属性注入

> ID：10158739
> 
> 赞同：0
> 
> 时间：2012-04-15T01:00:44.193
> 
> 标签：ninject, nservicebus, cqrs

我在配置 NSB 时使用 ninject。这是我的注册方式：

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher, IWantCustomInitialization
{
    #region Implementation of IWantCustomInitialization

    public void Init()
    {
        var kernel = new StandardKernel();

        Configure.With().NinjectBuilder(kernel);

        kernel.Load(new BackendModule());
    }

    #endregion
}
public class BackendModule : NinjectModule
{
    #region Overrides of NinjectModule

    /// <summary>
    /// Loads the module into the kernel.
    /// </summary>
    public override void Load()
    {
        Bind<IEventBus>().To<NsbBus>();
        Bind<IRecordStorageConfig>().To<RegistrationEventStorageConfig>();
        Bind<IRecordStorage>().To<RegistrationRecordStorage>();
        Bind<IRecordStorageFactory>().To<RegistrationRecordStorageFactory>();
        Bind<IAggregateRootFactory>().To<RegistrationFactory>();
    }

    #endregion
} 
```

我需要传奇中的 IAggregateRootFactory。

```
public class RegistrationSaga : Saga<RegistrationSagaData>,
                                IAmStartedByMessages<StartRegistration>,
                                IHandleMessages<CreateRegistration>,
                                IHandleMessages<ValidateRegistration>,
                                IHandleMessages<CancelRegistration>
{
    public RegistrationFactory Factory { get; set; }

    // removed implementation
} 
```

saga 成功启动，命令是处理程序被调用。但是 IAggregateRootFactory 属性注入不起作用。工厂始终为空。我接线错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:09:58.967

我不太确定为什么您的传奇需要在其中包含 RegistrationFactory/IAggregateRootFactory，但这可能不是一个好主意。

# c++ - Qt 和 OpenCV 的高效集成

> ID：10158740
> 
> 赞同：11
> 
> 时间：2012-04-15T01:00:46.427
> 
> 标签：c++, qt, opencv

我正在开发一个交互式应用程序，它需要一次读取和操作几个非常大的图像（一次 25 个图像，总大小约为 350 Mb）。OpenCV 速度非常快，并且处理算法相对容易。但是用 Qt 绘制它们被证明是一个问题。这是我尝试过的两种不太理想的解决方案。

> **解决方案1（太慢）**
> 
> 每次您需要绘制不同的 OpenCV 图像时，将其转换为 a `QImage`并进行绘制。不幸的是，转换需要一段时间，我们无法以交互速度在图像之间切换。
> 
> **解决方案 2（太占用内存）**
> 
> 维护两组图像，一组用于 OpenCV，一组用于 Qt。在适当的时候使用适当的一种。

我可以直接访问 OpenCV 像素数据。我知道图像的宽度和高度，并且我知道像素是 3 字节的 RGB 值。似乎应该可以快速绘制 OpenCV 图像，而无需将其复制到`QImage`（据我所知）仅包含数据副本的容器中。

我需要在哪里寻找从 Qt 中获得这种功能的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T12:37:59.627

我不知道这在 3 个月后现在对你是否有用。但是我有相同类型的应用程序，我必须使用 OpenCV 操作图像流并将其显示在 QT 界面上。在谷歌搜索了很多之后，我遇到了一个非常巧妙的解决方案。使用opengl的glDrawPixels直接在Qt界面上绘制原始图像数据。最好的部分，你不必编写任何额外的转换代码。只是用于设置视口和坐标的 opengl 的基本代码。查看代码，该代码具有一个函数，该函数采用 IplImage* 指针并使用该数据绘制图像。您可能需要稍微调整参数（尤其是 WIDTH 和 HEIGHT 变量）以显示具有特定尺寸的图像。是的，我不知道您使用的是什么构建系统。

我已经实现了一个派生自 QGLWidget 的类 QIplImage 并覆盖了它的 paintGL 方法以将像素数据绘制到框架上。

```
//File qiplimage.h
class QIplImage : public QGLWidget
{
  Q_OBJECT

 public:
    QIplImage(QWidget *parent = 0,char *name=0);
   ~QIplImage();
   void paintGL();
   void initializeGL();
   void resizeGL(int,int);
   bool drawing;

 public slots:
   void setImage(IplImage);

 private:
  Ui::QIplImage ui;
  IplImage* original;
  GLenum format;
  GLuint texture;
  QColor bgColor;
  char* name;
  bool hidden;
  int startX,startY,endX,endY;
  QList<QPointF*> slopes;
  QWidget* parent;
  int mouseX,mouseY;

};
//End of file qiplimage.h

//file qiplimage.cpp
#include "qiplimage.h"
#include <Globals.h>

QIplImage::QIplImage(QWidget *parent) :
    QGLWidget(parent)
{

}
QIplImage::QIplImage(QWidget *parent,char* name): QGLWidget(parent)
{
     ui.setupUi(this);
    //This is required if you need to transmit IplImage over
    // signals and slots.(That's what I am doing in my application
    qRegisterMetaType<IplImage>("IplImage");
    resize(384,288);
    this->name=name;
    this->parent=parent;
    hidden=false;
    bgColor= QColor::fromRgb(0xe0,0xdf,0xe0);

    original=cvCreateImage(cvSize(this->width(),this->height()),IPL_DEPTH_8U,3);
    cvZero(original);
    switch(original->nChannels) {
        case 1:
            format = GL_LUMINANCE;
            break;
        case 2:
            format = GL_LUMINANCE_ALPHA;
            break;
        case 3:
            format = GL_BGR;
            break;
        default:
            return;
}
    drawing=false;
    setMouseTracking(true);
    mouseX=0;mouseY=0;
    initializeGL();

}
void QIplImage::initializeGL()
{
   qglClearColor(bgColor);  
   //glClearColor(0.5f, 0.5f, 0.5f, 1.0f);              
   glDisable(GL_DEPTH_TEST);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
       glOrtho(0,this->width(),this->height(),0.0f,0.0f,1.0f);
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();

   glEnable(GL_TEXTURE_2D);
   glGenTextures(3,&texture);
   glBindTexture(GL_TEXTURE_2D,texture);
   glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
   glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
   glBindTexture(GL_TEXTURE_2D,texture);                glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,this->width(),this->height(),0,GL_BGR,GL_UNSIGNED_BYTE,NULL);
   glDisable(GL_TEXTURE_2D);

}
void QIplImage::setImage(IplImage image){
original=&image;
//cvShowImage(name,original);

updateGL();
}

void QIplImage::paintGL (){
   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glDisable(GL_DEPTH_TEST);
if(!hidden){
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
            glOrtho(0.0f,this->width(),this->height(),0.0f,0.0f,1.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glEnable(GL_TEXTURE_2D);
            glBindTexture(GL_TEXTURE_2D,texture);
            glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,original->width,original->height,0,GL_BGR_EXT,GL_UNSIGNED_BYTE,original->imageData);
    glBegin(GL_QUADS);
            glTexCoord2i(0,1); glVertex2i(0,this->height());
    glTexCoord2i(0,0); glVertex2i(0,0);
            glTexCoord2i(1,0); glVertex2i(this->width(),0);
            glTexCoord2i(1,1); glVertex2i(this->width(),this->height());
    glEnd();
    glFlush();
    }

}

void QIplImage::resizeGL(int width,int height){

    glViewport(0,0,this->width(),this->height());
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();       
    glOrtho(0.0f,this->width(),this->height(),0.0f,0.0f,1.0f);
    glMatrixMode(GL_MODELVIEW);         
    glLoadIdentity();
 } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T04:02:56.607

您可以在 QImage 和 openCV 之间共享数据——它们都有一个使用现有数据的 ctor——由指针提供。

`cv::Mat(int _rows, int _cols, int _type, void* _data, size_t _step=AUTO_STEP)`
`QImage ( uchar * data, int width, int height, int bytesPerLine, Format format)`

如果行最终不是 4 字节的倍数，则填充可能存在问题，但我希望填充在具有相同像素大小的两种类型上对齐 - 至少在相同的硬件上

一个问题是，openCV 默认使用 BGR，这对于 QImage（或任何其他显示器）来说并不是非常理想的。虽然我不确定 QImage::Format_ARGB32_Premultiplied 在使用加速 openGL 渲染 QImage 的 Qt 上是否一定要快得多。

另一种方法是使用 opencv 然后将生成的数据直接复制到 openGL 纹理，然后使用 QGlWidget 显示图像而无需另一个副本。

# html - 如何更改 HTML 文档的“实际编码”？

> ID：10158743
> 
> 赞同：3
> 
> 时间：2012-04-15T01:01:16.773
> 
> 标签：html, character-encoding

我通过 W3C HTML 验证器运行我的网页并收到此错误。

> 编码 ascii 不是正在使用的字符编码的首选名称。首选名称是 us-ascii。(Charmod C024) ✉ 第 5 行，第 70 列：内部编码声明 utf-8 与文档的实际编码不一致 (us-ascii)。

```
<meta http-equiv="content-type" content="text/html;charset=utf-8"> 
```

显然，即使我在元标记中指定了 UTF-8，我也没有“实际”使用 UTF-8。

我如何“实际上”使用 UTF-8？那有什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T05:43:34.660

验证器的 HTML5 模式将编码声明之间的不匹配视为错误。在消息中，“内部编码声明”是指`meta`诸如 的标记`<meta charset=utf-8>`，而“实际编码”（误导性地）是指 HTTP 标头中的编码声明。

根据当前的 HTML 规范（HTML5 只是一个草案），不匹配不是错误，HTTP 标头获胜。

如果您的文档仅包含 Ascii 字符，则没有真正的问题。Ascii 编码的数据也采用 UTF-8 编码，因为在 UTF-8 中，任何 Ascii 字符都表示为单个字节，其值与 Ascii 中的值相同。

这取决于服务器端使用的软件是否以及如何更改 HTTP 标头。如果他们现在指定 charset=ascii，看起来，这不是一个真正的问题，除非在验证中，前提是您只继续使用 Ascii 字符。但它有些奇怪和过时。尝试将那里的编码信息更改为 charset=utf-8。您无需更改实际编码，但如果您稍后添加非 Ascii 字符，请确保通过在创作程序中选择合适的命令或选项将文件保存为 UTF-8 编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T01:02:57.687

在记事本中打开文件，然后`save as`> `UTF-8`（按钮旁边`save`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T01:12:47.817

在类 unix 系统上，您可以使用`iconv`工具将文件从一种编码转换为另一种编码。它也可以从编程语言（例如php）的范围内使用。正确的函数具有相同的名称： [http ://www.php.net/manual/en/function.iconv.php](http://www.php.net/manual/en/function.iconv.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T01:16:11.777

指定编码是一回事。以适当的编码保存文档是另一回事。[在支持UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码
的编辑器中编辑您的文档。最好是没有 BOM 的 UTF-8。[Notepad++](http://notepad-plus-plus.org/)可能是一个好的开始。 也读一读：[UTF-8 一直到](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through).

# jquery - Jquery & CI UNDEFINED 数据 - 来自 $.ajax 的响应

> ID：10158744
> 
> 赞同：0
> 
> 时间：2012-04-15T01:01:24.737
> 
> 标签：jquery, ajax, codeigniter, cart, shopping

我正在尝试做的事情：我正在尝试做一个购物车，它不会在您每次单击某个项目时重新加载页面，而是将所选项目保存在会话中。

因此，在用户单击“添加”后，我会将值添加到我的会话中，然后我将解析 json 数组中的会话值，并将整个“产品列表”附加到购物车中。

问题是由于某种原因，它正在为 data.dados[0].id_prod 打印“未定义”，而它应该打印产品的 id..

所以，这是我的控制器：

```
//get the ajax ‘get’ ...
if (isset($_GET[‘id_prod’]) && !empty($_GET[‘id_prod’]) && isset($_GET[‘qnt’]) && !empty($_GET[‘qnt’])) {

  $ma = $this->loja_model->add_carrinho($_GET[‘id_prod’], $_GET[‘qnt’]);
  $carr = $this->loja_model->list_carrinho();

  if ( isset($carr) && !empty($carr) ) {
    $array[‘data’][‘dados’]=$carr[0];
    $array[‘data’][‘valor’]=$carr[1];
echo json_encode($array);
  }

  } 
```

并在调用 $.ajax 后打印此 json 对象：

```
{“data”:
  {“dados”:

  [
    {“id_prod”:“1”,“id_cat”:“4”,“produto”:“Barco Velho”,“descricao”:“Barco de madeira tipo canoa.”,“valor”:“100.00”,“custo”:“0”,“qnt”:49},
    {“id_prod”:“2”,“id_cat”:“1”,“produto”:“Fusca 68”,“descricao”:“Raridade. Impec?vel. Roda. Trio. Som. Estepe original.”,“valor”:“4000.00”,“custo”:“0”,“qnt”:11},
    {“id_prod”:“3”,“id_cat”:“2”,“produto”:“MonoMoto”,“descricao”:“Moto de uma roda s?”,“valor”:“18000.00”,“custo”:“0”,“qnt”:2}
  ],

  “valor”:84900}
} 
```

这是我的 JS 文件：

```
 $.ajax({
  url:      ‘http://mdk-store.com/loja/index.php/lojavirtual/index’,
  data: data_prod,
  type:    ‘GET’,
  dataType:  ‘json’,
  async: true,
  success: function(data) {
    window.alert(data[0].id_prod);
  }

  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:11:06.940

根据您应该使用的 JSON `data.data.dados[0].id_prod`：.

为了以您期望的方式访问数据，您的 JSON 需要如下所示：

```
[
  {“id_prod”:“1”,“id_cat”:“4”,“produto”:“Barco Velho”,“descricao”:“Barco de madeira tipo canoa.”,“valor”:“100.00”,“custo”:“0”,“qnt”:49},
  {“id_prod”:“2”,“id_cat”:“1”,“produto”:“Fusca 68”,“descricao”:“Raridade. Impec?vel. Roda. Trio. Som. Estepe original.”,“valor”:“4000.00”,“custo”:“0”,“qnt”:11},
  {“id_prod”:“3”,“id_cat”:“2”,“produto”:“MonoMoto”,“descricao”:“Moto de uma roda s?”,“valor”:“18000.00”,“custo”:“0”,“qnt”:2}
] 
```

# c# - 无法自动添加角色

> ID：10158746
> 
> 赞同：1
> 
> 时间：2012-04-15T01:01:44.050
> 
> 标签：c#, asp.net, asp.net-mvc-3, forms-authentication

我的帐户控制器出现以下错误：

```
The role 'roleName' was not found. 
```

但我有两个角色管理员和游戏玩家

我的注册视图中的下拉列表会选择它们：

```
 <label for="roleName">Select Role:</label>
    @Html.DropDownList("roleName")
    @Html.ValidationMessage("roleName") 
```

在我的帐户控制器中，我有以下内容：

```
 //
        // GET: /Account/Register
        [AllowAnonymous]
        public ActionResult Register()
        {
            ViewData["roleName"] = new SelectList(Roles.GetAllRoles(), "roleName");
            return View();
        }

        //
        // POST: /Account/Register

        [HttpPost]
        [AllowAnonymous]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;
                Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    Roles.AddUserToRole(model.UserName, "roleName");
                    FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                    return RedirectToAction("Index", "Home");
                }

                else
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);

        } 
```

我不知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:07:54.283

看起来问题在这里：

```
Roles.AddUserToRole(model.UserName, "roleName"); 
```

我猜你并不是要把“roleName”写成文字。可能*是 model.RoleName*或“User”，还是您的角色提供者中存在的角色？

# c++ - 在向量上使用 std::max_element

> ID：10158756
> 
> 赞同：75
> 
> 时间：2012-04-15T01:03:17.187
> 
> 标签：c++, vector, max, min

我正在尝试使用`std::min_element`并`std::max_element`返回双精度向量中的最小和最大元素。我的编译器不喜欢我目前尝试使用它们的方式，而且我不理解错误消息。我当然可以编写自己的程序来找到最小值和最大值，但我想了解如何使用这些函数。

```
#include <vector>
#include <algorithm>

using namespace std;

int main(int argc, char** argv) {

    double cLower, cUpper;
    vector<double> C;

    // Code to insert values in C is not shown here

    cLower = min_element(C.begin(), C.end());
    cUpper = max_element(C.begin(), C.end());

    return 0;
} 
```

这是编译器错误：

```
../MIXD.cpp:84: error: cannot convert '__gnu_cxx::__normal_iterator<double*, std::vector<double, std::allocator<double> > >' to 'double' in assignment
../MIXD.cpp:85: error: cannot convert '__gnu_cxx::__normal_iterator<double*, std::vector<double, std::allocator<double> > >' to 'double' in assignment 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-04-15T01:05:38.323

`min_element`并`max_element`返回迭代器，而不是值。所以你需要`*min_element...`和`*max_element...`。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-04-15T02:55:22.893

正如其他人所说，[**`std::max_element()`**](http://en.cppreference.com/w/cpp/algorithm/max_element)并[**`std::min_element()`**](http://en.cppreference.com/w/cpp/algorithm/min_element)返回[*迭代器*](http://en.wikipedia.org/wiki/Iterator#C.2B.2B)，需要*取消引用*才能获得*值*。

返回迭代器（而不仅仅是值）的优点是它允许您确定具有最大值（或最小值）值的容器中（第一个）元素的*位置*。

例如（为简洁起见，使用 C++11）：

```
#include <vector>
#include <algorithm>
#include <iostream>

int main()
{
    std::vector<double> v {1.0, 2.0, 3.0, 4.0, 5.0, 1.0, 2.0, 3.0, 4.0, 5.0};

    auto biggest = std::max_element(std::begin(v), std::end(v));
    std::cout << "Max element is " << *biggest
        << " at position " << std::distance(std::begin(v), biggest) << std::endl;

    auto smallest = std::min_element(std::begin(v), std::end(v));
    std::cout << "min element is " << *smallest
        << " at position " << std::distance(std::begin(v), smallest) << std::endl;
} 
```

这产生：

```
Max element is 5 at position 4
min element is 1 at position 0 
```

* * *

## 笔记：

对于大型数据集，按照上面评论中的建议使用[**`std::minmax_element()`**](http://en.cppreference.com/w/cpp/algorithm/minmax_element)可能会更快，但可能会给出稍微不同的结果。我上面示例的*值*将是相同的，但“max”元素的位置将是`9`因为......

> 如果几个元素等价于最大元素，则返回最后一个此类元素的迭代器。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-15T01:05:52.637

min/max_element 将*迭代器*返回到 min/max 元素，而不是 min/max 元素的值。您必须取消引用迭代器才能获取值并将其分配给双精度值。那是：

```
cLower = *min_element(C.begin(), C.end()); 
```

# linux - 是否为 Linux 中的 TCP 连接保留 RTT（往返时间）统计信息？

> ID：10158757
> 
> 赞同：2
> 
> 时间：2012-04-15T01:03:56.773
> 
> 标签：linux, tcp, roundtrip

我绝对知道我可以通过发送一个包并测量响应来测量它，或者我可以使用命令 ping。但是有什么命令或者有什么文件夹可以直接获取吗？由于RTT是TCP链接的一个非常重要的因素。我找不到这样的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:09:21.493

不，因为往返时间不固定。也就是说，在实际发送请求数据包之前，您无法知道响应需要多长时间。你可以有一个想法，你可以积累统计数据，但你不能问“到某某服务器的往返时间是多少”。

# mongodb - 如何使用 10gen c# 驱动程序更新内部属性？

> ID：10158764
> 
> 赞同：2
> 
> 时间：2012-04-15T01:06:06.267
> 
> 标签：mongodb, mongodb-.net-driver, 10gen-csharp-driver

我有这个结构：

```
public class User
{
    public ObjectId Id { get; set; }
    public Location Location { get; set; }
    public DateTime LastAround {get;set;}
}

public class Location
{
    public double Latitude { get; set; }
    public double Longitude { get; set; }
} 
```

我已经尝试了一些事情，但我想更新用户的位置以及他们最后一次出现的时间。

试过这个：

```
userHelper.Collection.Update(
    Query.EQ("_id", userId),
    Update.SetWrapped<Location>("Location", new Location { Latitude = latitude, Longitude = longitude }).Set("LastAround", DateTime.UtcNow)); 
```

还有这个：

```
userHelper.Collection.Update(
    Query.EQ("_id", userId),
    Update.Set("Location.Latitude", latitude)
        .Set("Location.Longitude", longitude)
        .Set("LastAround", DateTime.UtcNow)); 
```

没有任何效果...我该怎么做？

**4/17 更新：**

```
userHelper.Collection.Update(
                Query.EQ("_id", new ObjectId(userId)),
                Update
                    .SetWrapped<Location>("Location", new Location { Longitude = longitude, Latitude = latitude })
                    .Set("LastAround", DateTime.UtcNow)
            ); 
```

在对 lng 和 lat 值进行查询时，它们的值顺序似乎非常重要。我正在做一个 geonear 查询并得到一个奇怪的越界错误。如果您以错误的顺序进行更新，它会将 lats 放在首位，然后您会收到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:00:53.233

您的两个原始更新语句都应该有效。我写了一个小示例程序来演示。

执行此插入语句后：

```
var userId = ObjectId.GenerateNewId();
var user = new User
{
    Id = userId,
    Location = new Location { Latitude = 1.0, Longitude = 2.0 },
    LastAround = new DateTime(2012, 4, 14, 0, 0, 0, DateTimeKind.Utc)
};
collection.Insert(user); 
```

该文档在 mongo shell 中如下所示：

```
> db.test.find()
{ "_id" : ObjectId("4f8c5d33e447ad34b8c7ac84"), "Location" : { "Latitude" : 1, "Longitude" : 2 }, "LastAround" : ISODate("2012-04-14T00:00:00Z") }
> 
```

执行第一种形式的 Update 语句后：

```
collection.Update(
    Query.EQ("_id", userId),
    Update
        .SetWrapped<Location>("Location", new Location { Latitude = 3.0, Longitude = 4.0 })
        .Set("LastAround", new DateTime(2012, 4, 15, 0, 0, 0, DateTimeKind.Utc))); 
```

文档如下所示：

```
> db.test.find()
{ "_id" : ObjectId("4f8c5d33e447ad34b8c7ac84"), "Location" : { "Latitude" : 3, "Longitude" : 4 }, "LastAround" : ISODate("2012-04-15T00:00:00Z") }
> 
```

并且在执行了 Update 语句的第二种形式之后：

```
collection.Update(
    Query.EQ("_id", userId),
    Update
        .Set("Location.Latitude", 5.0)
        .Set("Location.Longitude", 6.0)
        .Set("LastAround", new DateTime(2012, 4, 16, 0, 0, 0, DateTimeKind.Utc))); 
```

文档如下所示：

```
> db.test.find()
{ "_id" : ObjectId("4f8c5d33e447ad34b8c7ac84"), "Location" : { "Latitude" : 5, "Longitude" : 6 }, "LastAround" : ISODate("2012-04-16T00:00:00Z") }
> 
```

因此，Update 语句的两种形式都有效。

完整的程序在这里：

[http://www.pastie.org/3799469](http://www.pastie.org/3799469)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:52:39.003

你的两个选择看起来都不错。

您确定您的 userId 变量具有正确的值吗？可能是更新未找到要更新的匹配文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:35:21.263

我最终做了什么：

```
var userHelper = new MongoHelper<User>();
ObjectId id = new ObjectId(userId);
var user = userHelper.Collection.FindAll().Where(u => u.Id == id).Single();
user.LastAround = DateTime.UtcNow;
user.Location = new Location { Longitude = longitude, Latitude = latitude };
userHelper.Collection.Save(user); 
```

哪个有效。不知道为什么其他方式不会。我想这更像是“SQL”，虽然可能没有最好的性能。:(

# ruby-on-rails - 在 POST 操作中使用关联模型的属性

> ID：10158767
> 
> 赞同：0
> 
> 时间：2012-04-15T01:06:30.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

我有两个模型在 has_one 和 belongs_to 关系中相互关联。当我发布一个新的 :foo 对象（使用 :foo 控制器中的“create”方法）时，我还希望能够使用 :bar 模型的关联属性进行操作，然后将结果返回给用户在不强制用户执行另一个 POST 操作的情况下执行特定操作。这可能吗，还是我需要先发布并保存 :foo 模型才能获得 :bar 模型的属性？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:18:05.890

您可以使用`accepts_nested_attributes_for`模型之一的方法一，更多信息请参考 API 文档。

# javascript - 如何防止光标卡在 css 变换中：在 Firefox 中旋转？

> ID：10158769
> 
> 赞同：4
> 
> 时间：2012-04-15T01:06:43.000
> 
> 标签：javascript, jquery, css

在这段代码中，我试图让用户抓住黑色方块并围绕内圈旋转它。

[http://jsfiddle.net/4CL9H/1/](http://jsfiddle.net/4CL9H/1/)

如果您尝试这样做，您会注意到光标在 Firefox 中大约有 50% 的时间被卡住，从而阻止`$(document).off('mousemove');`执行，除非您再次单击以调用`mouseup`事件处理程序。

这似乎在 IE、chrome 和 safari 中运行良好（如果你快速单击黑色方块会崩溃）但是它在 Firefox 中给我带来了问题。

无论如何我可以改进这段代码，使光标不会卡在 Firefox 中？

**注意** 如果您无法让光标卡住，请尝试单击并按住（不移动）黑框的底角，然后从左到右快速移动光标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:25:35.400

在 mousedown 部分添加 event.preventDefault。

```
$('#container').on('mousedown', '#marker', function(event){
    event.preventDefault();
    $(document).on('mousemove', function(event){
        rotateAroundCircle($('#innerCircle').parent(), event.pageX,event.pageY, $('#marker'));
    });
}); 
```

我相应地修改了你的小提琴并进行了角落测试。似乎工作正常。[新小提琴](http://jsfiddle.net/4CL9H/5/)

# asp.net - 从 VMware Workstation 8 访问主机上的 localhost 进行 ASP.NET 开发测试

> ID：10158771
> 
> 赞同：7
> 
> 时间：2012-04-15T01:07:01.947
> 
> 标签：asp.net, visual-studio-2010, localhost, vmware, vmware-workstation

我在我的 Windows 7 机器上运行 ASP.NET 开发服务器（MS Visual Studio 2010 附带）。我目前正在开发一个 ASP.NET C# Web 应用程序并在 Windows 7 机器上对其进行测试，我需要将我的 Web 浏览器导航到如下地址：

[http://localhost:59215/Default.aspx](http://localhost:59215/Default.aspx)

我还在那个 Windows 7 上安装了 VMware Workstation 8，其他操作系统作为虚拟机。我需要尝试从这些虚拟机加载我的 Web 应用程序，但是当我在那里键入上述地址时，我在浏览器中收到“无法显示页面”错误。请注意，我可以从虚拟机本身访问 Internet，但由于某种原因，无法访问主机上的 localhost。

任何想法如何设置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T04:09:06.533

好，我知道了！

对于那些感兴趣的人，这里是如何：

比如说我在主机上的开发地址是： [http://localhost:59215/Default.aspx](http://localhost:59215/Default.aspx)

下载[这个名为 tcpTrace](http://www.pocketsoap.com/tcpTrace/)的实用程序并在主机上运行它。启动时配置如下：

```
Listen to port #: 80
Destination Server: localhost
Destination Port #: 59215 (which will be different in your case) 
```

单击确定并让 tcpTrace 在主机上运行。

在虚拟机上，将浏览器导航到主机的 IP 地址，例如在我的例子中：http: [//192.168.0.4/Default.aspx](http://192.168.0.4/Default.aspx)

它会起作用的！

PS。要获取主机上的 IP 地址，请在此处运行 ipconfig（在命令提示符窗口中）。您的 IP 将显示在您所连接网络的“IPv4 地址”行中。

PS2。此外，我的 Windows 7（主机）没有附带任何第三方防病毒或防火墙。它有一个内置的 Windows 防火墙和作为 AVP 的 MS Security Essentials。因此，如果您的设置不同，则需要打开传入端口 80。

PS3。说到 VMWare 工作站，虚拟机的网络适配器设置设置为“NAT：用于共享主机的 IP 地址”，因为它在安装时是开箱即用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:53:50.687

**localhost**是**本地**机器（对于操作系统）。

我不确定 VS 开发服务器是否允许外部连接，您可能需要安装 IIS - 无论哪种方式，您都必须打开 Windows 防火墙以允许外部连接。

我不是 VMWare 用户，但每个操作系统都有自己的 IP 地址（？）——这就是您连接到 Windows 7/IIS 映像的方式。`http://the.ip.address.of.the.win7.image/`

# django - 在管理员中使用计算字段

> ID：10158781
> 
> 赞同：2
> 
> 时间：2012-04-15T01:09:40.950
> 
> 标签：django, django-admin

我正在尝试在我的管理页面中使用运行时计算的字段。这很好用，但我想允许基于该字段进行排序。使用 Django 1.5 (dev)，这可能吗？我一直在搜索互联网，但找不到任何表明它*可能*的东西。

```
class Guest(models.Model)
    email = models.CharField(max_length=255)

class Invitation(models.Model)
    guest = models.ForeignKey(Guest)
    created_on = models.DateTimeField(auto_now_add=True)

class GuestAdmin(admin.ModelAdmin):
    list_display = ["email", "latest_invitation_sent_on",]

    def latest_invitation_sent_on(self, o):
        try:
            return o.invitation_set.all().order_by(
                "-created_on")[0].created_on.strftime("%B %d, %Y")
        except IndexError:
            return "N/A" 
```

我希望能够启用排序方式`latest_invitation_sent_on`。有什么我不知道的方法可以很好地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:02:33.097

您应该能够用他们最近的邀请时间注释来宾，然后 order_by 它（order_by 使用数据库进行排序，只要您可以提供有效的数据库字段、表或虚拟它应该可以工作）。

```
class GuestManager(models.Manager):
    def get_query_set(self):
        return super(GuestManager, self).get_query_set().annotate(latest_invite=Max("invitation_set__created_on"))

class Guest(models.Model)
    email = models.CharField(max_length=255)
    objects = GuestManager()    

class Invitation(models.Model)
    guest = models.ForeignKey(Guest)
    created_on = models.DateTimeField(auto_now_add=True)

class GuestAdmin(admin.ModelAdmin):
    list_display = ["email", "latest_invite",] 
```

如果您偶尔只需要`latest_invite`注释一次，则将其移至单独的方法甚至管理器是有意义的。

```
class GuestManager(models.Manager):
    def by_invitations(self):
        return super(GuestManager, self).get_query_set().annotate(latest_invite=Max("invitation_set__created_on")).order_by('-latest_invite')

>>>  Guest.objects.by_invitations() 
```

# c - execve - 没有这样的文件或目录？

> ID：10158782
> 
> 赞同：3
> 
> 时间：2012-04-15T01:09:43.450
> 
> 标签：c, linux, execve

我遇到了一些关于 execve 的问题。我正在尝试制作一个可以像 bash shell 一样运行的 shell，但是我在分叉子执行命令时遇到了问题。这是我为孩子准备的。cmd 是带有用户输入的命令的字符 *。但是，当我运行此程序时，我从 perror 收到此错误：

```
execve error: No such file or directory. 
```

我用一个简单的 ls 尝试了该程序，它应该使 path="/bin/ls" 并执行它（我已经确认这是我的 ls 命令所在的位置）但它仍然抱怨。我究竟做错了什么？谢谢！

```
if(pid == 0)
{
    // Parse the command
    char * word = strtok(cmd, " ");
    char path[128] = "/bin/";
    strcat(path, word);

    // Execute the process
    char * newenvp[] = { NULL };
    char * newargv[] = { path, NULL };
    ret = execve(path, newargv, newenvp);

    if(ret == -1)
        perror("execve error");

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T01:17:46.457

我要做的*第一件事是插入：*

```
printf ("[%s]\n", path); 
```

在调用之前`execve`。这应该确认可执行文件是您认为的那样。

*只要*您输入的输入正确并且可执行文件实际可用，您的代码看起来*就*可以了。例如，下面的完整程序在我的 Debian 机器上运行良好：

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>

int main (int argc, char *argv[]) {
    if (argc > 1) {
        char * word = strtok (argv[1], " ");
        char path[128] = "/bin/";
        strcat (path, word);

        char * newenvp[] = { NULL };
        char * newargv[] = { path, NULL };
        printf ("[%s]\n", path);
        int ret = execve (path, newargv, newenvp);
        if (ret == -1) {
            perror("execve error");
        }
    }
    return 0;
} 
```

当我运行时`./testprog ls`，输出类似于：

```
[/bin/ls]
kidsshares.ods  paxwords    birthdays    homeloantracking.gnumeric
shares2011.ods  backup0.sh  development  lexar
accounts.ods    backup1.sh  photos       testprog.c
testprog 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:30:33.807

如果您不想手动遍历文件系统以找到正确的二进制文件，则有`execlp`（带有额外的*p*）。从手册页：

> 如果指定的 文件名不包含斜杠 (/) 字符，则**execlp** ()、 **execvp** () 和**execvpe () 函数会复制 shell 在搜索可执行文件时的操作。****在PATH**环境变量中指定的以冒号分隔的目录路径名列表中查找该文件。如果未定义此变量，则路径列表默认为当前目录，后跟 confstr(_CS_PATH) 返回的目录列表。（此 confstr(3) 调用通常返回值“/bin:/usr/bin”。） [...]

# javascript - 有没有办法在 JavaScript 中更改图像的色阶？

> ID：10158785
> 
> 赞同：1
> 
> 时间：2012-04-15T01:10:07.980
> 
> 标签：javascript, jquery, html

我想知道是否有办法更改图像色标`JavaScript`？假设您想根据用户的输入使其更暖或更冷。如果在 jquery 或 html5 中有一种方法也可以。任何人都知道如何完成这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:29:25.733

我的猜测是你想改变饱和度。我试过 Pixastic，但它在我的浏览器、Chrome、Opera 和 IE7 中坏了。

至少从演示页面来看，Caman JS 看起来可以提供

[http://camanjs.com/examples](http://camanjs.com/examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T01:21:11.003

HTML 5 的功能比您要找的要多得多。无论如何，CANVAS 容器是我可以说的解决方案，您可以在其中使用图像的颜色、像素。. 看看这个[这个](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)。希望这可以帮助您开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T01:21:41.883

也许不在 jquery 本身中，但有一个非常酷的用于处理图像的 js 库，称为`pixastic`. [http://www.pixastic.com/](http://www.pixastic.com/) 尝试在文档中搜索您需要的选项。

# java - 没有文本的 JToolbar 中的 JButton 中的 AbstractAction

> ID：10158788
> 
> 赞同：3
> 
> 时间：2012-04-15T01:10:46.233
> 
> 标签：java, swing, icons, jbutton, jtoolbar

我的 java swing 应用程序有一些在 JMenuItems 和 JButtons 中使用的 AbstractActions。我想将其中一些放在 JButton 内的 JToolbar 中，但我只想显示图标，而不是文本。是否有最佳实践方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T14:39:03.900

最简单的方法是将共享操作添加到工具栏，这将自动隐藏文本：

```
Action sharedAction = new AbstractAction("some text") {
    ....
} 
sharedAction.putValue(Action.SMALL_ICON, someIcon);
myToolBar.add(sharedAction);
myNormalButton.setAction(sharedAction); 
```

如果由于某种原因您想手动在工具栏中创建按钮，则必须在将按钮添加到工具栏之前将其 hideActionText 属性配置为 true

```
JButton manual = new JButton(sharedAction);
manual.setHideActionText(true);
myToolBar.add(manual); 
```

**更新**

对于[在另一个答案中解决的反向要求，](https://stackoverflow.com/a/17944842/203657)请执行相反的操作，即将属性设置为 false：

```
AbstractButton button = myToolBar.add(sharedAction);
button.setHideActionText(false); 
```

与创建和添加 JButton 相比的优势在于，将按钮配置为适合 JToolBar 并配备所有内部侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T10:42:31.310

在我的例子中，我观察到如果我只是将动作添加到 JToolBar，文本不会出现，因此请确保将动作放在 JButton 中。

```
JToolBar tb = new JToolBar();
tb.add(new JButton(sharedAction)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T02:15:36.310

您可以将键的值设置为[`Action.NAME`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html#NAME)或`null`为空`String`。

```
putValue(Action.NAME, null); 
```

附录：为方便用户，将之前的字符串放入 中`Action.SHORT_DESCRIPTION`，它将成为按钮的`toolTipText`.

# iphone - iOS - UiTableviewCell - 背景图像一次只显示在一个单元格上

> ID：10158789
> 
> 赞同：2
> 
> 时间：2012-04-15T01:10:53.303
> 
> 标签：iphone, ios, uitableview, background-image

我使用 UIAppearance 在我的应用程序中设置表格单元格的背景图像。

```
[[UITableViewCell appearance] setBackgroundView:[ [UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"list_bg.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]]; 
```

但是，当我查看列表时，仅为屏幕上的一个单元格设置背景图像。如果我滚动屏幕，则会在出现在视图中的单元格上设置背景图像，但不会在任何其他可见单元格上设置此背景图像。

有人知道发生了什么吗？我认为通过设置 UITableviewCell 的 UIAppearance ，这种类型的所有实例都会自动获取背景图像。

谢谢

布赖恩

这是我的 cellForRowAtIndexPath 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"plantCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"PlantListCell" owner:self options:nil];
    cell = _plantCell;
    self.plantCell = nil;
}

Plant *plant = [self.fetchedResultsController objectAtIndexPath:indexPath];

UIImageView *thumbnail = (UIImageView *)[cell viewWithTag:1];
thumbnail.image = [UIImage imageNamed:[plant.name stringByAppendingString:@"_S"]];

UILabel *label = (UILabel *)[cell viewWithTag:2];
label.text = plant.name;

UIImageView *set = (UIImageView *)[cell viewWithTag:3];
set.image = [UIImage imageNamed:@"set"];

UIImageView *favourite = (UIImageView *)[cell viewWithTag:4];
favourite.image = [UIImage imageNamed:@"fav"];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T01:49:24.240

是的。这个问题是你告诉 UITableViewCell 类为每个表格视图单元格的背景视图设置一个 UIImageView 。一旦它被设置为一个，它就会从之前的超级视图中移除，并添加到新的 UITableViewCell 中。您没有在每个 tableViewCell 上设置重复的 UIImageViews；您将在每个表格视图单元格上设置一个视图。

因此，它从每个 tableViewCell 设置和取消设置，直到它设置的最后一个。

使用此方法的外观代理将其设置在 UITableViewCell 的每个对象上。

我不会使用外观代理来设置背景视图方法，因为您传递给它的任何视图都是一个视图，一次只能应用于一个单元格。

我的建议是为每个单元独立创建一个视图，或者创建一个子类将其设置为初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:26:05.837

感谢条形码项目。这有点道理，但我不明白为什么苹果会费心让我们设置 UITableviewCell 背景图像，如果它真的不起作用。最后，我通过在 cellForRowAtIndexPath 方法中设置图像来使用一个简单的解决方案。

```
cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"list_bg.png"]]; 
```

它可以正常工作，但如果您有很多表并希望以通用方式设置它，则效果不佳。

干杯

布赖恩

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T13:17:26.790

我通过创建一个名为 CustomizableUITableCell 的基类并为背景图像设置一个 ui 外观值来解决这个问题。然后，每当我创建一个需要自定义背景的单元格时，我都是一个简单的子类 CustomizableUITableCell。

//标题

```
#import <UIKit/UIKit.h>

@interface CustomizableUITableCell : UITableViewCell <UIAppearance>

@property (nonatomic, weak) UIColor *backgroundCellColor UI_APPEARANCE_SELECTOR;

@end 
```

//执行

```
#import "CustomizableUITableCell.h"

@implementation CustomizableUITableCell

@synthesize backgroundCellColor;

#pragma mark - Public Methods.

-(void)setBackgroundCellColor:(UIColor *)backgroundColor
{
    [super setBackgroundColor:backgroundColor];
}

@end 
```

然后，您可以使用外观代理对其进行设置。

```
[[CustomizableUITableCell appearance] setBackgroundCellColor:[UIColor colorWithPatternImage:backgroundImage]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T11:20:17.383

`cell.backgroundView = [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"1.jpg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ];`

这个对我有用..

# java - Java 和 Ruby：OO 中的“一切都是对象”？

> ID：10158791
> 
> 赞同：2
> 
> 时间：2012-04-15T01:11:06.973
> 
> 标签：java, ruby, object

Java 中的一切都是对象吗，就像 Ruby 中的一样？

书籍、教程、所有内容都声明“Ruby 中的所有内容都是对象”，但对于面向对象的语言来说这很常见吗？

对象的一切都是Java，还是面向对象只是一种编程范式，并不意味着一切都是对象或评估对象？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T01:13:32.260

不。

就*值*而言，Java 中的“原始类型”（`int`、`bool`、`float`等）*不是*对象。在 Ruby 中，它们是对象。（在某些 Ruby 实现中，fixnums 在内部是“值类型”以提高性能，但在外部它们可被视为具有方法的“真实”对象）。

此外，还有一些在 Ruby 中是对象但在 Java 中不是对象的东西，例如类。（实际上，Java`Class`也公开了这些，但意义不同。）

有些东西在这两种语言中都不是对象，例如*变量*和*方法*。（虽然在 Ruby 中很容易获得一个代表给定方法的对象。）

无论如何，我认为更大的图景是[面向对象的编程范式](http://en.wikipedia.org/wiki/Object_oriented)提供了*一种*对数据进行分组和对所述数据进行操作的方法。（这通常是通过*实例方法*完成的，就像在 Java 和 Ruby 中一样，尽管它也可以通过*多种调度*和其他语言完成，比如“非 OO”的 Haskell，为这项任务提供了替代方法。）

通常“OO”的定义还包括“继承”、“封装”、“抽象”和其他愚蠢的教科书术语，但不同“OO”语言的用法和模式可能会有很大差异，并且与“非- OO" 语言 ;-)

# java - 按频率排序单词？（最小到最大）

> ID：10158793
> 
> 赞同：4
> 
> 时间：2012-04-15T01:11:12.047
> 
> 标签：java, sorting

有没有人知道如何使用内置`collection.sort`和`comparator<string>`界面按频率（从最小到最大）的顺序对单词列表进行排序？

我已经有一种方法可以获取文本文件中某个单词的计数。现在，我只需要创建一个方法来比较每个单词的计数，然后将它们放入按频率从最低到最高排序的列表中。

任何想法和提示将不胜感激。我在开始使用这种特定方法时遇到了麻烦。

```
public class Parser implements Comparator<String> {

    public Map<String, Integer> wordCount;

    void parse(String filename) throws IOException {
        File file = new File(filename);
        Scanner scanner = new Scanner(file);

        //mapping of string -> integer (word -> frequency)
        Map<String, Integer> wordCount = new HashMap<String, Integer>();

        //iterates through each word in the text file
        while(scanner.hasNext()) {
            String word = scanner.next();
            if (scanner.next()==null) {
                wordCount.put(word, 1);
            }
            else {
                wordCount.put(word, wordCount.get(word) + 1);;
                }
            }
            scanner.next().replaceAll("[^A-Za-z0-9]"," ");
            scanner.next().toLowerCase();
        }

    public int getCount(String word) {
        return wordCount.get(word);
    }

    public int compare(String w1, String w2) {
        return getCount(w1) - getCount(w2);
    } 

        //this method should return a list of words in order of frequency from least to   greatest
    public List<String> getWordsInOrderOfFrequency() {
        List<Integer> wordsByCount = new ArrayList<Integer>(wordCount.values());
        //this part is unfinished.. the part i'm having trouble sorting the word frequencies
        List<String> result = new ArrayList<String>();

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T04:36:00.760

首先，您的用法`scanner.next()`似乎不正确。`next()`每次调用时都会返回下一个单词并移动到下一个单词，因此以下代码：

```
if(scanner.next() == null){ ... } 
```

并且

```
scanner.next().replaceAll("[^A-Za-z0-9]"," ");
scanner.next().toLowerCase(); 
```

会消耗然后扔掉的话。您可能想要做的是：

```
String word = scanner.next().replaceAll("[^A-Za-z0-9]"," ").toLowerCase(); 
```

在`while`循环的开头，以便对单词的更改保存在`word`变量中，而不仅仅是丢弃。

其次，`wordCount`地图的使用稍有破绽。您要做的是检查`word`地图中是否已经存在以决定要设置的字数。为此，`scanner.next() == null`您应该查看地图，而不是检查，例如：

```
if(!wordCount.containsKey(word)){
  //no count registered for the word yet
  wordCount.put(word, 1);
}else{
  wordCount.put(word, wordCount.get(word) + 1);
} 
```

或者你可以这样做：

```
Integer count = wordCount.get(word);
if(count == null){
  //no count registered for the word yet
  wordCount.put(word, 1);
}else{
  wordCount.put(word, count+1);
} 
```

我更喜欢这种方法，因为它更简洁，每个单词只进行一次地图查找，而第一种方法有时会进行两次查找。

现在，要按频率降序获取单词列表，您可以先将地图转换为列表，然后按照[本文](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)`Collections.sort()`中的建议应用。以下是适合您需求的简化版本：

```
static List<String> getWordInDescendingFreqOrder(Map<String, Integer> wordCount) {

    // Convert map to list of <String,Integer> entries
    List<Map.Entry<String, Integer>> list = 
        new ArrayList<Map.Entry<String, Integer>>(wordCount.entrySet());

    // Sort list by integer values
    Collections.sort(list, new Comparator<Map.Entry<String, Integer>>() {
        public int compare(Map.Entry<String, Integer> o1, Map.Entry<String, Integer> o2) {
            // compare o2 to o1, instead of o1 to o2, to get descending freq. order
            return (o2.getValue()).compareTo(o1.getValue());
        }
    });

    // Populate the result into a list
    List<String> result = new ArrayList<String>();
    for (Map.Entry<String, Integer> entry : list) {
        result.add(entry.getKey());
    }
    return result;
} 
```

希望这可以帮助。

**编辑：** 按照@dragon66 的建议更改了比较功能。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:47:53.733

You can compare and extract ideas from the following:

```
public class FrequencyCount {

    public static void main(String[] args) {

        // read in the words as an array
        String s = StdIn.readAll();
        // s = s.toLowerCase();
        // s = s.replaceAll("[\",!.:;?()']", "");
        String[] words = s.split("\\s+");

        // sort the words
        Merge.sort(words);

        // tabulate frequencies of each word
        Counter[] zipf = new Counter[words.length];
        int M = 0;                                        // number of distinct words
        for (int i = 0; i < words.length; i++) {
            if (i == 0 || !words[i].equals(words[i-1]))   // short-circuiting OR
                zipf[M++] = new Counter(words[i], words.length);
            zipf[M-1].increment();
        }

        // sort by frequency and print
        Merge.sort(zipf, 0, M);                           // sorting a subarray
        for (int j = M-1; j >= 0; j--) {
            StdOut.println(zipf[j]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T03:40:51.950

一个解决方案，接近您的原始帖子，并按照 Torious 在评论中的建议进行更正和排序：

```
import java.util.*;

public class Parser implements Comparator <String> {

    public Map<String, Integer> wordCount;

    void parse ()
    {
        Scanner scanner = new Scanner (System.in);

        // don't redeclare it here - your attribute wordCount will else be shadowed
        wordCount = new HashMap<String, Integer> ();

        //iterates through each word in the text file
        while (scanner.hasNext ()) {
            String word = scanner.next ();
            // operate on the word, not on next and next of next word from Scanner
            word = word.replaceAll (" [^A-Za-z0-9]", " ");
            word = word.toLowerCase ();
            // look into your map:
            if (! wordCount.containsKey (word))
                wordCount.put (word, 1);
            else
                wordCount.put (word, wordCount.get (word) + 1);;
        }
    }

    public int getCount (String word) {
        return wordCount.get (word);
    }

    public int compare (String w1, String w2) {
        return getCount (w1) - getCount (w2);
    }

    public List<String> getWordsInOrderOfFrequency () {
        List<String> justWords = new ArrayList<String> (wordCount.keySet());
        Collections.sort (justWords, this);
        return justWords; 
    }

    public static void main (String args []) {
        Parser p = new Parser ();
        p.parse ();
        List<String> ls = p.getWordsInOrderOfFrequency ();
        for (String s: ls) 
            System.out.println (s);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T05:57:53.697

rodions 解决方案是一种泛型地狱，但我没有它更简单 - 只是不同。

最后，他的解决方案更短更好。

乍一看，TreeMap 可能是合适的，但它是按 Key 排序的，对按值排序没有帮助，而且我们不能切换 key-value，因为我们是按 key 查找的。

所以接下来的想法是生成一个HashMap，并使用Collections.sort，但是它不需要Map，只需要Lists进行排序。从一个 Map 中，有 entrySet，它产生另一个 Collection，它是一个 Set，而不是一个 List。那是我采取另一个方向的地方：

我实现了一个Iterator：我遍历entrySet，只返回值为1的Keys。如果值为2，我缓冲它们以备后用。如果 Iterator 用尽，我查看缓冲区，如果它不为空，我将使用缓冲区的迭代器，增加我寻找的最小值，并创建一个新的 Buffer。

Iterator/Iterable 对的优点是，可以通过简化的 for 循环获得值。

```
import java.util.*;

// a short little declaration :) 
public class WordFreq implements Iterator <Map.Entry <String, Integer>>, Iterable <Map.Entry <String, Integer>>
{
    private Map <String, Integer> counter;
    private Iterator <Map.Entry <String, Integer>> it;
    private Set <Map.Entry <String, Integer>> buf;
    private int maxCount = 1; 

    public Iterator <Map.Entry <String, Integer>> iterator () {
        return this;
    }

    // The iterator interface expects a "remove ()" - nobody knows why
    public void remove ()
    {
        if (hasNext ())
            next ();
    } 

    public boolean hasNext ()
    {
        return it.hasNext () || ! buf.isEmpty ();
    }

    public Map.Entry <String, Integer> next ()
    {
        while (it.hasNext ()) {
            Map.Entry <String, Integer> mesi = it.next ();
            if (mesi.getValue () == maxCount)
                return mesi;
            else
                buf.add (mesi);
        }
        if (buf.isEmpty ())
            return null;
        ++maxCount;
        it = buf.iterator (); 
        buf = new HashSet <Map.Entry <String, Integer>> ();     
        return next ();
    } 

    public WordFreq ()
    {
        it = fill ();
        buf = new HashSet <Map.Entry <String, Integer>> ();
        // The "this" here has to be an Iterable to make the foreach work
        for (Map.Entry <String, Integer> mesi : this)
        {
            System.out.println (mesi.getValue () + ":\t" + mesi.getKey ());
        }
    }

    public Iterator <Map.Entry <String, Integer>> fill ()
    {
        counter = new HashMap <String, Integer> ();
        Scanner sc = new Scanner (System.in);
        while (sc.hasNext ())
        {
            push (sc.next ());
        }
        Set <Map.Entry <String, Integer>> set = counter.entrySet ();
        return set.iterator ();
    }

    public void push (String word)
    {
        Integer i = counter.get (word);
        int n = 1 + ((i != null) ? i : 0); 
        counter.put (word, n);
    }

    public static void main (String args[])
    {
        new WordFreq ();
    }
} 
```

由于我的解决方案是从标准输入读取的，因此您可以通过以下方式调用它：

```
cat WordFreq.java | java WordFreq 
```

# django - 如何设置由字符串命名的字段？

> ID：10158799
> 
> 赞同：0
> 
> 时间：2012-04-15T01:12:16.200
> 
> 标签：django, django-models

对于更新模型的视图，我想做这样的事情：

```
for field in ('name', 'parent', 'notes'):
    if request.POST[field]:
        myModel[field] = request.POST.get(field, '') 
```

但是，模型的字段是作为属性 ( `myModel.field`) 访问的，而不是字典项，据我所知，Django 模型中没有 get/set 方法。还有另一种方法可以迭代更新这些属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:14:06.933

[`setattr()`](http://docs.python.org/library/functions.html#setattr)

# iphone - 对或错：无法设置使用 registerNib:forCellReuseIdentifier 加载的单元格的文件所有者：

> ID：10158803
> 
> 赞同：2
> 
> 时间：2012-04-15T01:12:55.233
> 
> 标签：iphone, ios, uitableview

在我的视图控制器中，我正在使用

```
 [self.tableView registerNib:[UINib nibWithNibName:@"MyTableViewCell" bundle:nil] forCellReuseIdentifier:@"MyCellReuseIdentifier"]; 
```

在单元格的笔尖中，我使用了与上面相同的标识符。

我遇到的问题是，虽然我能够将 valueChanged 事件（用于自定义单元格中的控件）连接到我的视图控制器，但`NSInvalidArgumentException, unrecognized selector sent to instance`在与控件交互时却得到了一个。

您是否知道一种以编程方式检查文件所有者是否在 `dequeueReusableCellWithIdentifier`调用后设置的方法`tableView:cellForRowAtIndexPath:`？

干杯，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:02:50.800

我不认为你能做到。您正在尝试使用 xib 文件来定义用于故事板表格的单元格，并将内容链接到视图控制器，并且您在 xib 中有单元格，因为您在多个表格中使用它，是吗？

解决这个问题的唯一方法是在单元子类上创建一个属性来表示视图控制器，并在单元出队时将其设置为视图控制器。这有点笨拙，最后我将很多代码移到了单元格本身，只是将整个模型对象传递给了单元格。它工作得很好，感觉就像一个更干净的设计。

# php - 图像下载而不是显示

> ID：10158804
> 
> 赞同：0
> 
> 时间：2012-04-15T01:12:59.343
> 
> 标签：php, mysql, image

我将图像存储在 mySQL 服务器上作为 mediumblob。当我尝试使用以下代码显示它们时，某些浏览器（例如 safari 和 EI）会下载图像而不是显示它们。有没有办法显示它们独立于浏览器？

```
$query = "SELECT image FROM images WHERE id=?";
$stmt = $dbc->prepare($query);
$stmt->bind_param("i",$id);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($image);
$stmt->fetch();
header("Content-Type: image/jpg");
echo $image; 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T01:19:05.247

尝试`Content-Type: image/jpeg`代替`Content-Type: image/jpg`

`image/jpeg`是 jpeg 图像的正确 MIME 类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T01:25:03.840

尝试发送`Content-Disposition`具有这样值的标头`inline`。

```
$query = "SELECT image FROM images WHERE id=?";
$stmt = $dbc->prepare($query);
$stmt->bind_param("i",$id);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($image);
$stmt->fetch();
header("Content-Type: text/html");
header("Content-Disposition: inline");
echo $image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T01:20:06.567

试试这个

```
$query = "SELECT image FROM images WHERE id=?";
$stmt = $dbc->prepare($query);
$stmt->bind_param("i",$id);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($image);
$stmt->fetch();
header("Content-Type: text/html");
echo $image; 
```

或者

```
$query = "SELECT image FROM images WHERE id=?";
$stmt = $dbc->prepare($query);
$stmt->bind_param("i",$id);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($image);
$stmt->fetch();
header("Content-Type: image/jpg");
echo "<p>".$image."</p>"; 
```

另请注意，如果没有 HTML 内容，某些浏览器会下载图像。你试过其他浏览器吗？

# python - 在 Google Cloud SQL (GAE) Python 应用程序中管理数据库连接的好方法是什么？

> ID：10158805
> 
> 赞同：10
> 
> 时间：2012-04-15T01:13:01.917
> 
> 标签：python, mysql, google-app-engine, webapp2, google-cloud-sql

我只是在学习 Google App Engine，并试图找出一种管理我的数据库与 Google Cloud SQL 实例的连接的好方法（如果你没有使用过 GC-SQL，基本上，它是云中的 MySQL，有一些限制）。

我正在使用带有 webapp2 框架的 python (2.7) GAE 环境来处理请求。我知道常见问题解答说建议对每个请求都建立与数据库的新连接，但我不知道关闭连接的推荐方法是什么。每次我在开发过程中尝试删除表时，GC-SQL 挂起并且“显示进程列表”显示有一堆进程（可能是因为我没有关闭数据库）并且其中一个正在等待锁定（可能是试图删除表的过程）。这很烦人，迫使我重新启动 GC-SQL 实例（我想就像重新启动 mysql-server 服务）。我认为偶尔也会出现数据库故障，这与我并没有真正关闭数据库连接这一事实有关。

因此，例如，我是否应该在我的 webapp2.Requesthandler 子类实例上有一个析构函数来断开与数据库的连接？GAE 对象有时似乎会被缓存，所以这也是需要考虑的事情。我想我可以为每个查询连接/查询/断开连接，但这似乎不是最理想的。

我知道这是一个模糊的问题，但我希望在这方面玩过的人可以给我一些建议。

提前致谢！

**更新：** 我尝试使用 Shay 的答案作为起点，围绕需要光标的方法实现包装器。我收到 GAE 错误。这里有一个新的问题：[App Engine 对 Google Cloud SQL 的连接限制是什么，以及如何最好地重用数据库连接？](https://stackoverflow.com/q/10424442/379037)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T20:10:29.560

这是[入门指南](https://developers.google.com/cloud-sql/docs/developers_guide_python)中 helloworld 示例应用程序的完整示例。它基于[Shay Erlichmen](https://stackoverflow.com/a/10162674/1373093)和[JJC](https://stackoverflow.com/questions/10424442)的片段，但这个版本是线程安全的。

你可以像这样使用它：

```
 @with_db_cursor(do_commit = True)
  def get(self, cursor):
        cursor.execute('SELECT guestName, content, entryID FROM entries') 
```

* * *

应用程序.yaml

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: helloworld.app 
```

* * *

你好世界.py

```
import cgi
import logging
import os
import threading
import webapp2

from google.appengine.api import rdbms

_INSTANCE_NAME = <name goes here>

def _db_connect():
  return rdbms.connect(instance=_INSTANCE_NAME, database='guestbook')

_mydata = threading.local()

def with_db_cursor(do_commit = False):
  """ Decorator for managing DB connection by wrapping around web calls.

  Stores connections and open cursor count in a threadlocal
  between calls.  Sets a cursor variable in the wrapped function. Optionally
  does a commit.  Closes the cursor when wrapped method returns, and closes
  the DB connection if there are no outstanding cursors.

  If the wrapped method has a keyword argument 'existing_cursor', whose value
  is non-False, this wrapper is bypassed, as it is assumed another cursor is
  already in force because of an alternate call stack.
  """
  def method_wrap(method):
    def wrap(self, *args, **kwargs):
      if kwargs.get('existing_cursor', False):
        # Bypass everything if method called with existing open cursor.
        return method(self, None, *args, **kwargs)

      if not hasattr(_mydata, 'conn') or not _mydata.conn:
        _mydata.conn = _db_connect()
        _mydata.ref = 0
        _mydata.commit = False

      conn = _mydata.conn
      _mydata.ref = _mydata.ref + 1

      try:
        cursor = conn.cursor()
        try:
          result = method(self, cursor, *args, **kwargs)
          if do_commit or _mydata.commit:
            _mydata.commit = False
            conn.commit()
          return result
        finally:
          cursor.close()
      finally:
        _mydata.ref = _mydata.ref - 1
        if _mydata.ref == 0:
          _mydata.conn = None
          logging.info('Closing conn')
          conn.close()
    return wrap
  return method_wrap

class MainPage(webapp2.RequestHandler):
  @with_db_cursor(do_commit = True)
  def get(self, cursor):
        cursor.execute('SELECT guestName, content, entryID FROM entries')
        self.response.out.write("""
          <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
          <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
            <head>
               <title>My Guestbook!</title>
            </head>
            <body>""")
        self.response.out.write("""
              <table style="border: 1px solid black">
                <tbody>
                  <tr>
                    <th width="35%" style="background-color: #CCFFCC; margin: 5px">Name</th>
                    <th style="background-color: #CCFFCC; margin: 5px">Message</th>
                    <th style="background-color: #CCFFCC; margin: 5px">ID</th>
                  </tr>""")
        for row in cursor.fetchall():
          self.response.out.write('<tr><td>')
          self.response.out.write(cgi.escape(row[0]))
          self.response.out.write('</td><td>')
          self.response.out.write(cgi.escape(row[1]))
          self.response.out.write('</td><td>')
          self.response.out.write(row[2])
          self.response.out.write('</td></tr>')

        self.response.out.write("""
          </tbody>
            </table>
              <br /> No more messages!
              <br /><strong>Sign the guestbook!</strong>
              <form action="/sign" method="post">
              <div>First Name: <input type="text" name="fname" style="border: 1px solid black"></div>
              <div>Message: <br /><textarea name="content" rows="3" cols="60"></textarea></div>
              <div><input type="submit" value="Sign Guestbook"></div>
            </form>
          </body>
        </html>""")

class Guestbook(webapp2.RequestHandler):
  @with_db_cursor(do_commit = True)
  def post(self, cursor):
    fname = self.request.get('fname')
    content = self.request.get('content')
    # Note that the only format string supported is %s
    cursor.execute('INSERT INTO entries (guestName, content) VALUES (%s, %s)', (fname, content))

    self.redirect("/")

app = webapp2.WSGIApplication(
    [('/', MainPage),
     ('/sign', Guestbook)],
    debug=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-30T18:16:25.650

这是我的方法，它考虑了可能的例外情况。我在生产环境中使用这种方法并且效果很好：

```
 def _create_connection(schema):

    if (os.getenv('SERVER_SOFTWARE') and
        os.getenv('SERVER_SOFTWARE').startswith('Google App Engine/')):
        socket = '/cloudsql/%s' % env.DB_INSTANCE_NAME
        return MySQLdb.connect(unix_socket=socket, user=env.DB_APP_USER,
                               passwd=env.DB_APP_PASS, db=schema)
    else:
        return MySQLdb.connect(host='127.0.0.1', port=3306,
                               user=env.DB_APP_USER, passwd=env.DB_APP_PASS,
                               db=schema)

def with_db(commit=False, schema=env.DB_SCHEMA_NAME):

    def method_wrap(method):
        @functools.wraps(method)
        def wrap(self, *args, **kwds):
            # If needed,a connection pool can be added here.
            connection = _create_connection(schema)

            try:
                cur = connection.cursor()
                self.cur = cur
                self.conn = connection

                result = method(self, *args, **kwds)

                if commit:
                    connection.commit()

            except OperationalError as e:

                logging.error('Operational error.\r\nSQL exception: {},\r\n'
                              'Last Query: {}'.format(e, cur._last_executed))

                if commit and connection.open:
                    connection.rollback()
                raise

            except MySQLError as e:

                try:
                    warns = self.conn.show_warnings()
                    error = self.conn.error()
                except:
                    warns = ""
                    error = ""

                logging.error('Try to rolling back transaction.\r\nSQL exception: {},\r\n'
                              'Last Query: {},\r\nConn warn: {},\r\nError: {}'
                              .format(e, cur._last_executed, warns, error))

                if commit and connection.open:
                    connection.rollback()
                raise

            except Exception as e:
                logging.error('Try to rolling back transaction. Non SQL exception: {0}'.format(e))

                if commit and connection.open:
                    connection.rollback()
                raise

            finally:
                connection.close()

            return result
        return wrap
    return method_wrap 
```

你可以像这样使用它：

```
 @with_db(commit=True)
def update_user_phone(self, user, phone):
    self.cur.execute(_SQL_UPDATE_USER_PHONE, (phone, user.id))

    # add or replace existing user to cache
    user.phone = phone
    self._update_user_cache(user) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T04:21:02.137

我不熟悉 Google Cloud SQL，但您不能使用 WSGI 中间件来打开和关闭连接吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T14:00:17.803

我写了一个装饰器来处理 SQL 连接，请随意火焰 :)

```
# Here is how you use the decorator from below
# the open, commit, and close is done by the decorator 
@need_cursor(do_commit = True)
def get(self, cursor, request): # cursor param is added by the decorator
    execute_sql(cursor, sql) 
```

* * *

```
def need_cursor(do_commit = False):
    def method_wrap(method):
        def wrap(*args, **kwargs):
            conn = os.environ.get("__data_conn")

            # Recycling connection for the current request
            # For some reason threading.local() didn't worked
            # and yes os.environ suppose to be thread safe 
            if not conn:                
                conn = create_connection() # You need to implement this
                os.environ["__data_conn"] = conn
                os.environ["__data_conn_ref"] = 1
            else:
                os.environ["__data_conn_ref"] = 
                    os.environ["__data_conn_ref"] + 1

            try:
                cursor = conn.cursor()
                try:
                    result = method(cursor, *args, **kwargs)

                    if do_commit or os.environ.get("__data_conn_commit"):
                        os.environ["__data_conn_commit"] = False
                        conn.commit()

                    return result                    
                finally:
                    cursor.close()                
            finally:
                os.environ["__data_conn_ref"] = 
                    os.environ["__data_conn_ref"] - 1
                if os.environ["__data_conn_ref"] == 0:
                    os.environ["__data_conn"] = None
                    conn.close()        

        return wrap

    return method_wrap 
```

# spring - 如何从另一个控制器中删除一个控制器的会话属性？

> ID：10158814
> 
> 赞同：2
> 
> 时间：2012-04-15T01:17:02.723
> 
> 标签：spring, session, controller

这是关于两个 Spring 3 控制器之间共享会话的问题。

一个控制器处理实体的显示。它将数据库选择结果缓存在@SessionAttributes 中。另一个控制器处理实体的添加和删除。挑战是在第二个控制器添加或删除实体时删除第一个控制器的会话缓存。

**索引控制器**

```
@Controller
@RequestMapping(value="/fileIndex")
@SessionAttributes(value={IndexController.INDEX_ITEM_LIST})
public class FileIndexController extends IndexController {

if(!model.containsAttribute(IndexController.INDEX_ITEM_LIST)) {
    model.addAttribute(IndexController.INDEX_ITEM_LIST, getFileList(screenObject)); // sql select 
}
screenObject.setPageItemList((List<?>) model.asMap().get(IndexController.INDEX_ITEM_LIST), pageNumber); // page of entities (subset of cached sql select) 
```

**动作控制器 - 删除方法**

```
@RequestMapping(method=RequestMethod.POST, params=ACTION_DELETE)
public ModelAndView delete(@ModelAttribute("screenObject") FileHeaderEditScreenObject screenObject, BindingResult bindingResult, Model model, Locale locale) {

    try {
        fileService.deleteFile(screenObject.getFileId());
    } catch(Throwable t) {
        screenObject.addError(t.getMessage());
    }

    ModelAndView modelAndView=new ModelAndView();
    if(screenObject.getErrorCount()>0) {
        initializeScreenObject(screenObject.getFileId(), screenObject, locale, false);
        modelAndView.setViewName(WebView.FILE_HEADER_EDIT_PAGE.getViewName());
    } else {
        modelAndView.setViewName("redirect:/fileIndex");
    }
    model.asMap().remove(IndexController.INDEX_ITEM_LIST);  // this does not work
    return modelAndView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T07:22:50.357

你可以使用`SessionStatus.setComplete()`.

# c++ - 优先队列 - 二叉堆

> ID：10158823
> 
> 赞同：1
> 
> 时间：2012-04-15T01:20:01.587
> 
> 标签：c++, arrays, map, priority-queue, binary-heap

我正在尝试将优先级队列实现为支持最小二进制堆的排序数组。我试图让 update_key 函数以对数时间运行，但要做到这一点，我必须知道该项目在数组中的位置。有没有办法在不使用地图的情况下做到这一点？如果是这样，怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:29:10.587

如果您真的希望能够更改任意元素的键，那么堆并不是数据结构的最佳选择。它给你的是以下组合：

1.  紧凑的表示（没有指针，只有一个数组和一个隐式索引方案）
2.  对数插入，再平衡
3.  最小（最大）元素的对数去除。
4.  O(1) 访问最小（最大）元素的值。-

1\. 的一个附带好处是缺少指针意味着您对`malloc/free`( `new/delete`) 的调用要少得多。映射（在标准库中表示为平衡二叉树）为您提供了其中两个，添加

1.  任何键的对数`find()`。

因此，虽然您可以将另一个数据结构附加到您的堆中，将指针存储在堆中，然后通过指针取消比较运算符的引用，但您很快就会发现自己在时间和空间上的复杂性是`map`首先使用 a .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:45:54.687

您的查找键功能应在 log(n) 时间内运行。您的更新（更改密钥）应该是恒定的时间。您的删除功能应该在 log(n) 时间内运行。您的插入功能应该是 log(n) 时间。

如果这些假设是真的，试试这个：1）在你的堆中找到你的项目（IE：二分搜索，因为它是一个排序的数组）。2）更新您的密钥（您只是更改一个值，恒定时间） 3）从堆日志（n）中删除该项目以重新堆放。
4）将您的项目插入堆日志（n）。

所以，你会得到 log(n) + 1 + log(n) + log(n) 减少到 log(n)。

注意：这是摊销的，因为如果你必须重新分配你的数组等......这会增加开销。但无论如何，你不应该经常这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T05:10:08.920

这就是数组支持的堆的权衡：您可以获得出色的内存使用（良好的局部性和最小的开销），但您会丢失元素的跟踪。要解决它，您必须增加一些开销。

一种解决方案是这样。堆包含类型为 的对象`C*`。C 是一个具有`int`成员的类`heap_index`，它是堆数组中对象的索引。每当您在堆数组中移动一个元素时，您都必须更新它`heap_index`以将其设置为新索引。

然后，Update_key（以及删除任意元素）是 log(n) 时间，因为找到元素（通过`heap_index`）需要恒定的时间，并且需要 log(n) 时间才能将其冒泡到正确的位置。

# mysql - Django条件计数

> ID：10158825
> 
> 赞同：1
> 
> 时间：2012-04-15T01:20:14.333
> 
> 标签：mysql, django, annotations

我正在查询我标记为“可见”的所有标签的名称：

```
visible_tags = Tag.objects.filter(visible=True,taggit_taggeditem_items__content_type=ContentType.objects.get_for_model(Action)).order_by('name') 
```

我想添加一个名为“action_count”的字段，告诉我有多少动作与此标签相关联：

```
visible_tags = Tag.objects.filter(visible=True,taggit_taggeditem_items__content_type=ContentType.objects.get_for_model(Action)).order_by('name').annotate(action_count=Count('action')) 
```

这有效，只是我现在不仅想知道有多少动作是附属的，还想知道有多少*不完整*的动作与这个标签相关联。

我尝试了以下方法：

```
visible_tags = Tag.objects.filter(visible=True,taggit_taggeditem_items__content_type=ContentType.objects.get_for_model(Action)).order_by('name').filter(action__complete=False).annotate(action_count=Count('action')) 
```

但这并不能完全满足我的需要。 **如何注释不完整操作的计数？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:15:42.767

您可能会得到比预期更多的计数。这是因为链式`.filter`引入了额外的内部连接，非常类似于问题[链式 QuerySet 过滤器是否等同于使用 Django ORM 在单个过滤器中定义多个字段？](https://stackoverflow.com/questions/10072605/are-chained-queryset-filters-equivalent-to-defining-multiple-fields-in-a-single) 因此将第二个过滤器放在第一个过滤器中：

```
visible_tags = Tag.objects.filter(visible=True, taggit_taggeditem_items__content_type=ContentType.objects.get_for_model(Action), 
action__complete=False # Here
).order_by('name').annotate(action_count=Count('action')) 
```

此外，`print queryset.query`要知道 SQL Django 为您生成了什么。

# ios - IOS为委托函数添加观察者（如）scrollViewDidEndDecelerating：

> ID：10158829
> 
> 赞同：0
> 
> 时间：2012-04-15T01:20:35.937
> 
> 标签：ios, object, delegates, uiscrollview

您知道如何将观察者（或通知）添加到标准委托方法调用吗？（我知道这有点奇怪/不是观察者的意图）

我最终试图在 uiscrollview 类别方法中捕捉滚动视图的页面更改。

我可以像这样观察滚动视图的内容偏移量 [self addObserver:self forKeyPath:@"contentOffset" options:(NSKeyValueObservingOptionNew) context:NULL];

，但不是在 contentOffset 更改时收到通知，而是在滚动结束或减速开始时收到通知。

我正在为滚动视图开发一些高级功能（这意味着我已经知道我可以通过分配一个委托来捕捉委托调用）

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:26:04.690

如果您出于某种原因确实需要通知，为什么不实现您希望收到通知的委托方法并从它们中触发您自己的通知呢？

# objective-c - 有什么办法可以禁用“消息为零不引发错误”行为（即我想要错误）？

> ID：10158831
> 
> 赞同：1
> 
> 时间：2012-04-15T01:21:03.847
> 
> 标签：objective-c, ios, xcode

我已经读过在 ObjC 中允许向 nil 发送消息，并且我理解这是该语言的一部分，并且对此存在争议，赞成和反对。我不想就此展开任何讨论。

我只是想知道是否有一种方法`if (presumedInstance != nil)`可以在尝试向 nil 发送消息时出错，而不必总是进行测试？在编码时我没有得到错误并没有帮助我 - 使得更难确定代码缺陷在哪里等等。

也许是 XCode 中的设置或脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:48:44.787

不，没有办法做到这一点。事实上，它是 Objective-C 的一个非常重要的特性。实际上，我认为对您来说进行测试（`if (object)`，与 相同`if (object != nil)`）更重要，因为它迫使您考虑函数和方法的输入和输出，以及应用程序经过的代码路径。一开始可能会令人沮丧，但这是你习惯的事情之一，它让生活变得更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T01:24:39.197

尝试断言怎么样，比如 with `NSAssert`？

> **NSAssert**如果给定条件为假，则生成断言。
> 
> **用法 ：** `NSAssert(condition, desc)`
> 
> **参数 ：**
> 
> *   `condition`:*计​​算结果为 YES 或 NO 的表达式。*
> *   `desc`：*一个 NSString 对象，其中包含描述失败条件的错误消息。*

**参考 ：**

*   [实际上，NSAssert 的意义何在？](https://stackoverflow.com/questions/1375786/whats-the-point-of-nsassert-actually)
*   [苹果开发者文档](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/macro/NSAssert)

# python - 迭代邻居和属性

> ID：10158833
> 
> 赞同：4
> 
> 时间：2012-04-15T01:21:14.713
> 
> 标签：python, networkx

在网络x

`gr.nodes(data=True)`

返回节点列表以及每个节点上存在的属性。是否可以在图中获取所有邻居以及给定节点的属性。

邻居函数不接受任何可选的布尔参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:48:18.437

如果[`adjacency_iter`](http://networkx.lanl.gov/reference/generated/networkx.Graph.adjacency_iter.html)您想迭代它们或者[`adjacency_list`](http://networkx.lanl.gov/reference/generated/networkx.Graph.adjacency_list.html#networkx.Graph.adjacency_list)如果您希望它们作为列表，请使用。

**编辑**

我应该补充一点，这些都不会为您提供节点的属性。但是您可以使用`g.node[n]`.

# image - 我想了解图像是如何组成的

> ID：10158834
> 
> 赞同：1
> 
> 时间：2012-04-15T01:21:27.677
> 
> 标签：image, image-processing

我真的很想了解图像是如何组成的（即位数组，或者，每个像素的颜色是如何组成的，等等）。你能为我指出正确的方向吗？我不确定要搜索什么。

提前非常感谢。

所以我想做的是能够务实地修改图片，即变为黑白，缩放，裁剪等，为此我真的很想了解图像是如何组成的，而不仅仅是找到这些算法在线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:25:56.023

这取决于您有兴趣处理的图像格式。每种格式（或多或少）都以不同的方式组成，并基于此具有一组不同的图像处理能力。

图像上的不同操作集支持不同的图像格式，您想要操作的图像类型也是如此。

提供有关您想对图像做什么的更多详细信息，我相信其他人会过来告诉您哪种格式最好以及如何处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T01:34:34.543

您并不总是需要了解图形格式的低级数学细节（矩阵、量化、傅立叶变换等）来处理图像。对于您想做的所有事情，您可以使用适当的库。例如，在 PHP 库中经常用于处理图像的有：

*   GD - [http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)
*   ImageMagick - [http://php.net/manual/en/book.imagick.php](http://php.net/manual/en/book.imagick.php)

# java - 你可以给java的最大内存？

> ID：10158844
> 
> 赞同：0
> 
> 时间：2012-04-15T01:23:10.617
> 
> 标签：java, minecraft

如果我升级到 64 位，我在 32 位 Ubuntu 系统上运行 minecraft 服务器，我可以为 java 提供的最大内存是多少？我希望它有大约 12 gig 的内存，但我不能在 32 位上做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:26:40.533

实际上，64 位系统可以处理的 ram 数量没有最大值。您只会被计算机的硬件阻止。如果您在命令中使用正确的开关，我认为 java 也没有最大数量的分配 RAM。

[http://en.wikipedia.org/wiki/64-bit](http://en.wikipedia.org/wiki/64-bit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T01:30:39.843

需要明确的是，“硬件”包括分页/交换空间，所以如果您实际上需要 12GB 并且只有 8GB 的​​ RAM，那么您需要确保有 4GB 的备用交换空间才能让 Java 成功分配额外的内存.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T01:30:37.807

来自[Java 调优](http://java.sun.com/performance/reference/whitepapers/tuning.html#section4.1.2)白皮书：

> 对于 32 位进程模型，进程的最大虚拟地址大小通常为 4 GB，尽管某些操作系统将其限制为 2 GB 或 3 GB。最大堆大小通常为 -Xmx3800m (1600m)（对于 2 GB 限制），但实际限制取决于应用程序。对于 64 位进程模型，最大值基本上是无限的。

但事实是，如此巨大的堆内存使用量（12GB）适得其反。运行很长时间后，您的应用程序花费在垃圾收集上的时间将抵消拥有如此多可用内存的效果。

# php - 如何使用 PHP 在 mysql 表中创建动态条目？

> ID：10158846
> 
> 赞同：0
> 
> 时间：2012-04-15T01:23:32.107
> 
> 标签：php, mysql

对不起，我知道这一定是一个基本问题，但我在教科书中找不到答案——我想我没有找对地方。

如果我有一个 mysql 数据库来跟踪成员和成员创建的新页面，我应该使用什么 php 脚本来动态附加我的 mysql 数据库，以便相应地列出新条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:14:44.183

为了使用 PHP 更新数据库，您需要连接到数据库然后发出 SQL 语句 - 在您的情况下，很可能是插入新行的 INSERT 语句。

在 PHP 中有 2 种主要方法可以做到这一点 - 使用内置的 mysql 函数，例如 mysql_connect 和 mysql_query，或者使用 PDO 库。

可以在此处找到使用本机 mysql 函数的示例：[http ://www.tizag.com/mysqlTutorial/mysqlinsert.php](http://www.tizag.com/mysqlTutorial/mysqlinsert.php)

可以在这里找到 PDO 的概述（以及为什么它是本地 mysql 函数的首选解决方案）：http: [//net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-用于数据库访问/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

# javascript - 在 Google Places API 上获取“Uncaught TypeError: Cannot read property 'value' of null”

> ID：10158847
> 
> 赞同：5
> 
> 时间：2012-04-15T01:23:57.647
> 
> 标签：javascript, google-maps-api-3

我目前正在使用 Google Place API 升级我的网站，在我让它工作之前我还有一个问题，我不明白为什么我会收到此错误消息：`Uncaught TypeError: Cannot read property 'value' of null`. 我已经阅读了整个[Places Library](https://developers.google.com/maps/documentation/javascript/places)，甚至“扫描”了整个[示例文件](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)，但我的代码与他们的完全相同。

这是我的代码：

```
var geocoder;
var map;
var myplace = '<?php echo str_replace(" ", "-", utf8_encode($_COOKIE["wrn-myplace"])); ?>';
var myplace_clean = '<?php echo $_COOKIE["wrn-myplace"]; ?>';

geocoder = new google.maps.Geocoder();
geocoder.geocode({'address' : myplace_clean}, function(results, status) {
    if(status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var myplace_center = results[0].geometry.location;

        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });

        var myplaceControlDiv = document.createElement('div');
        var myplaceControl = new MyPlaceControl(myplaceControlDiv, map, myplace_center);

        myplaceControlDiv.index = 2;
        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(myplaceControlDiv);
    } else {
        alert('Funktionen "geocoder" kunde inte användas på grund av följande fel: ' + status);
    }
});

var mapOptions = {
    streetViewControl: false,

    mapTypeControl: true,
    navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
    },

    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.SMALL,
        position: google.maps.ControlPosition.TOP_LEFT
    },

    mapTypeId: google.maps.MapTypeId.ROADMAP
};

map = new google.maps.Map(
    document.getElementById('weather-map'), mapOptions
);

var input = document.getElementById('google-search');
var autocomplete = new google.maps.places.Autocomplete(input);

autocomplete.bindTo('bounds', map);
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    var place = autocomplete.getPlace();
    if(place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
    } else {
        var marker = new google.maps.Marker({
            map: map,
            position: place.geometry.location
        });

        map.setCenter(place.geometry.location);
        map.setZoom(17);
    }
});

var cloudControlDiv = document.createElement('div');
var cloudControl = new CloudControl(cloudControlDiv, map);

cloudControlDiv.index = 1;
map.controls[google.maps.ControlPosition.TOP_RIGHT].push(cloudControlDiv);

var fullscreenControlDiv = document.createElement('div');
var fullscreenControl = new FullscreenControl(fullscreenControlDiv, map);

fullscreenControlDiv.index = 3;
map.controls[google.maps.ControlPosition.TOP_RIGHT].push(fullscreenControlDiv);

var boxText = document.createElement("div");
boxText.style.cssText = 'background-color: #000000; border: 1px solid #ffffff; color: #eaeaea; font-family: Arial; font-size: 11px; padding: 5px 10px 5px 10px;';
boxText.innerHTML = 'Du är här';

var myPopup = {
        content: boxText,
        disableAutoPan: false,
        maxWidth: 300,
        pixelOffset: new google.maps.Size(-100, -100),
        zIndex: null,
        boxStyle: {
            opacity: 0.80,
            width: '200px'
        },
        closeBoxMargin: '3px',
        closeBoxURL: 'http://p.yusukekamiyamane.com/icons/search/fugue/icons/cross-octagon-frame.png',
        infoBoxClearance: new google.maps.Size(1, 1),
        isHidden: false,
        enableEventPropagation: true
};

var cloudLayer = new google.maps.weather.CloudLayer();
cloudLayer.setMap(map);

elevator = new google.maps.ElevationService();
google.maps.event.addListener(map, 'click', getElevation);

map.setZoom(10);

$('#weather-data').load('jquery-fetch/fetch-weatherdata.php?place=' + myplace); 
```

`show_position`在`initialize`函数中调用，这是我的错误消息的“描述”：

```
kK
tK.(anonymous function).dl
(anonymous function)
(anonymous function)%7Bmain,places,weather%7D.js:9
bf.(anonymous function).Hc.c%7Bmain,places,weather%7D.js:24
O%7Bmain,places,weather%7D.js:9
df%7Bmain,places,weather%7D.js:24
hf%7Bmain,places,weather%7D.js:24
(anonymous function)
ef.controls
(anonymous function)%7Bmain,places,weather%7D.js:24
b%7Bmain,places,weather%7D.js:10
bf.(anonymous function).Hc%7Bmain,places,weather%7D.js:24
O%7Bmain,places,weather%7D.js:9
bf.(anonymous function).Hc%7Bmain,places,weather%7D.js:24
af.(anonymous function).ke%7Bmain,places,weather%7D.js:23
bf.(anonymous function).Hc%7Bmain,places,weather%7D.js:24
ff%7Bmain,places,weather%7D.js:24
(anonymous function) 
```

我正在从谷歌调用 JS 文件，如下所示：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key={my API key}&sensor=false&libraries=weather,places"></script> 
```

我该如何解决我的小问题？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T02:39:54.933

现在问题已经解决了。显然，在 DIV 标记中包含文本字段是强制性的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-23T07:58:10.000

得到同样的错误。原来预期 id Places 的元素不存在。检查输入错误的元素 ID，或复制/粘贴代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-02T21:00:07.547

得到同样的错误。原来是因为我为相同的地址字段调用了两次 initAutocomplete。一旦我删除了多余的请求，它就可以正常工作。

# java - Android ProGuard 返回行号

> ID：10158849
> 
> 赞同：40
> 
> 时间：2012-04-15T01:24:18.273
> 
> 标签：java, android, apk, proguard

有没有办法让 ProGuard 返回发生崩溃的行号？我可以使用`retrace`该方法，但通常对于诸如`NullPointerException`存在太多可能性并且在一大段代码中很难确定根本原因，因为您必须检查每个对象及其生命周期以确保没有错误的。如果 ProGuard 可以将其缩小到对我来说是一个行号，那将真的很有帮助。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-15T02:32:20.033

将此行添加到您的 proguard-project.txt 文件中。

```
# will keep line numbers and file name obfuscation
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable 
```

[https://www.guardsquare.com/en/products/proguard/manual/usage](https://www.guardsquare.com/en/products/proguard/manual/usage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-20T06:17:16.003

当您创建一个新的 Android 项目时，它会告诉您哪些行可能需要取消注释：

```
# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

# Uncomment this to preserve the line number information for
# debugging stack traces.
#-keepattributes SourceFile,LineNumberTable

# If you keep the line number information, uncomment this to
# hide the original source file name.
#-renamesourcefileattribute SourceFile 
```

所以，你应该考虑拥有这些：

```
-keepattributes SourceFile,LineNumberTable
-renamesourcefileattribute SourceFile 
```

但是，请注意，出于某种原因，Firebase Crashlytics 团队告诉我这条线路可能会干扰他们的服务：

```
-renamesourcefileattribute SourceFile 
```

因此，如果您使用它，您可能看不到有关崩溃堆栈跟踪的良好信息。

# javascript - 在 keyup 上获取 iframe 的内容

> ID：10158853
> 
> 赞同：1
> 
> 时间：2012-04-15T01:24:57.240
> 
> 标签：javascript, jquery, iframe, contenteditable, onkeyup

我已经看过很多关于此的帖子，但由于某种原因没有一个有效。

我感兴趣的是将我输入的内容放入*contenteditable* `<iframe>`到`<textarea>`and`<div>`中。

这是我的 HTML：

```
<textarea ></textarea>
<iframe></iframe>
<div></div> 
```

这是我的 JS：

```
var iframeBody=$('iframe').contents().find('body');
iframeBody.attr('contenteditable', true);

$(document.body).on( 'keyup', iframeBody, function() {   
  var txt = $(this).html();
  $('div').html(txt);
  $('textarea').val(txt);
}); 
```

如果您想提出建议，这里是 JSfiddle：http: [//jsfiddle.net/nyPAM/21/](http://jsfiddle.net/nyPAM/21/)

任何帮助将不胜感激，这件事让我发疯，

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:36:37.750

试试这个：

```
var iframeBody=$('iframe').contents().find('body');
iframeBody.attr('contenteditable', true);

$(iframeBody).on( 'keyup',function() {
    var txt = $(this).html();
    $('div').html(txt);
    $('textarea').val(txt);
}); 
```

演示：http: [//jsfiddle.net/GtXzz/](http://jsfiddle.net/GtXzz/)

# delphi - 如何拦截（检测）粘贴命令到 TMemo 中？

> ID：10158861
> 
> 赞同：9
> 
> 时间：2012-04-15T01:26:11.757
> 
> 标签：delphi, detect, paste, intercept, memo

如何在将文本粘贴到之前捕获粘贴命令并更改剪贴板的文本`TMemo`，但是，在粘贴之后，剪贴板中的文本必须与更改前相同？

例如，剪贴板有文本`'Simple Question'`，进入的文本`TMemo`是`'Симплe Qуeстиoн'`，然后剪贴板中的文本就像更改之前一样，`'Simple Question'`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-15T01:44:10.120

派生一个从 'TMemo' 继承的新控件以拦截`WM_PASTE`消息：

```
type
  TPastelessMemo = class(TMemo)
  protected
    procedure WMPaste(var Message: TWMPaste); message WM_PASTE;
  end;

uses
  clipbrd;

procedure TPastelessMemo.WMPaste(var Message: TWMPaste);
var
  SaveClipboard: string;
begin
  SaveClipboard := Clipboard.AsText;
  Clipboard.AsText := 'Simple Question';
  inherited;
  Clipboard.AsText := SaveClipboard;
end; 
```

如果您想完全禁止任何粘贴操作，请清空 WMPaste 处理程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-17T15:15:46.577

这是 Sertac 出色答案的替代方法，即覆盖控件的 WndProc：

```
// For detecting WM_PASTE messages on the control
OriginalMemoWindowProc: TWndMethod;
procedure NewMemoWindowProc(var Message: TMessage);
//...

// In the form's OnCreate procedure:
// Hijack the control's WindowProc in order to detect WM_PASTE messages
OriginalMemoWindowProc := myMemo.WindowProc;
myMemo.WindowProc := NewMemoWindowProc;
//...

procedure TfrmMyForm.NewMemoWindowProc(var Message: TMessage);
var
    bProcessMessage: Boolean;
begin
    bProcessMessage := True;
    if (Message.Msg = WM_PASTE) then
        begin
        // Data pasted into the memo!
        if (SomeCondition) then
            bProcessMessage := False;   // Do not process this message any further!
        end;

    if (bProcessMessage) then
        begin
        // Ensure all (valid) messages are handled!
        OriginalMemoWindowProc(Message);
        end;
end; 
```

# python - 将 Xvfb 和 CutyCapt 作为 Python 子进程运行

> ID：10158864
> 
> 赞同：3
> 
> 时间：2012-04-15T01:27:28.877
> 
> 标签：python, subprocess, xvfb, cutycapt

我正在尝试使用[CutyCapt在后台截取屏幕截图](http://cutycapt.sourceforge.net/)

我的应用程序是用 python 编写的，并通过运行一个子进程来调用 CutyCapt。

在本地（Windows）工作得很好，但用于 Windows 的 CutyCapt.exe 不需要 x 服务器。当我尝试在我的 ubuntu 机器上执行我的代码（通过 python 子进程）时，它会抱怨我没有向 Xvfb 提供命令。但是，如果我自己在盒子上运行命令，它就可以正常工作。

适用于盒子的命令：

```
box$ xvfb-run --server-args="-screen 0, 1100x800x24" ./CutyCapt --url=http://www.google.com --out=temp.png 
```

失败的 Python 代码：

```
def url_screengrab(url, **kwargs):
    url, temp_path, filename, url_hash = get_temp_screengrab_info(url)
    args = []
    if sys.platform.startswith("linux"):
        args.append('xvfb-run')
        args.append('--server-args="-screen 0, 1100x800x24"')
    args.append(settings.CUTYCAPT_EXE_PATH)
    args.append('--url=%s' % (url))
    args.append('--out=%s' % (temp_path,))
    subprocess.Popen(args, shell=False)
    return temp_path, filename, url_hash 
```

返回错误：

```
xvfb-run: usage error: need a command to run
box$ 
```

我尝试过的事情： - 使用 call 而不是 Popen - 从屏幕 args 中剥离引号 - 将屏幕 args 分解为列表 - 在执行子进程之前设置 os.environ["DISPLAY"]=":0"

我是否需要从 CutyCapt 命令中拆分 xvfb 进程？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T16:11:33.100

在 Ubuntu 11.10 上，安装了 cutycapt 和 xvfb 软件包，以下工作（至少对我来说......）：

```
import shlex
import subprocess

def url_screengrab(url, **kwargs):
    cmd = '''xvfb-run --server-args "-screen 0, 1100x800x24"
             /usr/bin/cutycapt --url={u} --out=temp.png '''.format(u = url)
    proc = subprocess.Popen(shlex.split(cmd))
    proc.communicate()

url = 'http://www.google.com'
url_screengrab(url) 
```

# database - Google App Engine 实体组写入限制

> ID：10158865
> 
> 赞同：0
> 
> 时间：2012-04-15T01:27:34.447
> 
> 标签：database, google-app-engine

1.  在 High Replication Datastore 的[使用说明](https://developers.google.com/appengine/docs/python/datastore/hr/overview)中，它说实体组被限制为每秒 1 次写入。我对此有点困惑。在另一篇文章的“[了解写入成本](https://developers.google.com/appengine/docs/python/datastore/entities)”部分中，它表明仅存储一个新实体可能会花费 14 次写入。第一篇文章中提到的每秒写入 1 是否与第二篇文章中的等效度量？如果是这样，存储一个基本实体需要 10 秒？我确定这不可能是正确的？

2.  谷歌表示，没有祖先存储的实体（作为根实体）具有最终一致性。这是否意味着如果一个用户在没有祖先的情况下将新实体添加到数据存储区，如果我之后立即进行查询，则不能保证它可用？如果是这样，“最终”到底有多长？可以是几个小时，还是他们只是在说几秒钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:07:12.860

1.  写入限制为每秒向数据存储写入 1 个实体。写入成本是每个实体可能需要更新的索引数量，它们是不同的“写入”——它们可能因实体而异，并且是与“每秒 1 次写入”写入不同的单独度量。

2.  这是正确的。但是请注意，在某些特定情况下，结果非常一致。获取单个实体的按键 GET 查询是高度一致的。祖先查询是 datstore 强一致的另一种情况。“最终”意味着不要指望它。通常是几秒钟，但在特殊情况下，比如 BigTable 平板电脑已满需要拆分，或者平板电脑出现故障需要更换，最终可能意味着更长的时间。我在邮件列表上看到了几个关于查询返回几个小时的旧结果的投诉，但这并不常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:52:45.753

1.  我对此并不完全确定（我会等待尼克约翰逊权衡），但我相信他们指的是每秒 1 次事务提交/写入。数据存储上的事务锁定在实体组级别发挥作用，所以我猜测可以同时工作的（分布式）事务的数量会有限制。

2.  我认为您的理解是正确的 - 这源于 HR 数据存储将您的数据写入几个不同的数据存储，并稍后将它们复制到所有其他数据存储的事实 - 最终。您的第二个查询可能会发送到尚未获得更新的数据存储。不过，从我所看到的情况来看，“最终”只是几秒钟的事情，有时甚至更短。不过，分布式架构的要点是您不依赖于那个时间间隔。

# emacs - Emacs / Cx 3 / 稍宽的竖条

> ID：10158867
> 
> 赞同：3
> 
> 时间：2012-04-15T01:28:20.453
> 
> 标签：emacs

我在 Emacs 中。我有一个带有 Cx 3 的窗口设置（因此有一个垂直条将两个缓冲区分开。）

现在，将两个缓冲区分开的是一个“|” 字符。

对于我的垂直分割，我更喜欢看起来像“|”的东西——即我想要在垂直条的两侧有一个 2 个空格的缓冲区。

有没有一种简单的方法来构建它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:56:03.620

看起来这基本上可以解决问题，尽管您也会在框架的最左侧和右侧获得边距；所以它不是严格的窗口分隔符。

```
(setq-default left-margin-width 2)         
(setq-default right-margin-width 2) 
```

我不确定的部分是它对 minibuffer 的影响。

我尝试`setq`将这些缓冲区本地值设置为`nil`in `minibuffer-setup-hook`，但这并没有解决它。

# django - Django 1.4 - {{ request.user.username}} 不在模板中呈现

> ID：10158871
> 
> 赞同：9
> 
> 时间：2012-04-15T01:29:38.923
> 
> 标签：django, django-templates

在我看来，我可以打印 request.user.username，但是在模板中，{{request.user.username}} 没有出现。为了简单起见，我从函数中删除了逻辑，并导入了 render_to_response 和 RequestContext。

```
from django.shortcuts import render_to_response
from django.template import RequestContext

@login_required
@csrf_protect
def form(request):
    print request.user.username
    data = {}
    return render_to_response('form.html', data, context_instance=RequestContext(request)) 
```

我的猜测是我的 settings.py 有问题。

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
    'src',
) 
```

在此先感谢您的帮助-

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-15T01:34:43.077

如[文档中所述](https://docs.djangoproject.com/en/dev/topics/auth/#id8)，经过身份验证的用户对象存储`user`在模板的变量中。提到的文档包括以下示例：

> 渲染模板`RequestContext`时，当前登录的用户（`User`实例或`AnonymousUser`实例）存储在模板变量中`{{ user }}`：

```
{% if user.is_authenticated %}
    <p>Welcome, {{ user.get_username }}. Thanks for logging in.</p>
{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %} 
```

**编辑：**感谢@buffer，他挖出了这个旧答案，我已经用最新状态更新了它。最初写的时候，在 Django 1.4（2012 年 3 月末发布）之后不到一个月的时间里，它是正确的。但是从 Django 1.5 开始，获取用户名的正确方法是调用[`get_username()`](https://docs.djangoproject.com/en/1.7/ref/contrib/auth/#django.contrib.auth.models.User.get_username)用户模型实例。由于能够交换`User`类（并具有自定义字段作为用户名），因此已添加此功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T01:50:00.717

查看[RequestContext](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)和[TEMPLATE_CONTEXT_PROCESSORS](https://docs.djangoproject.com/en/1.4/ref/settings/#template-context-processors)的文档。

如果你想`request`在你的模板上下文中，那么你需要包含`django.core.context_processors.request`在你的`TEMPLATE_CONTEXT_PROCESSORS`设置中。默认情况下它不存在。

但是，正如 Tadeck 在他的回答中指出的那样，`user`如果您使用默认设置，则已经可用，因为`django.contrib.auth.context_processors.auth`它是`TEMPLATE_CONTEXT_PROCESSORS`.

# c# - 通过 Boo 在 C# 应用程序中使用列表

> ID：10158872
> 
> 赞同：1
> 
> 时间：2012-04-15T01:29:46.163
> 
> 标签：c#, list, embed, boo

```
import EternalDungeon
import System.Collections

static def PlayerActivate():
    for x in range(ED.Mobs.Count):
        if ED.Mobs(x).Pos == ED.player.SpaceInFront():
            ED.Mobs(x).OnHit(ED.Sword)
            break 
```

编译时，我收到错误

`BCE0077: It's not possible to invoke an expression of type 'System.Collections.Generic.List'1[[EternalDungeon.Mob, Eternal Dungeon, Version=1.0.0.0, Culture=Neutral, PublicKeyToken=null]]`

在 (6,15) 和 (7,16)。在 C# 中，我包含这样的程序集，这可能是错误的和奇怪的：

```
 compiler.Parameters.References.Add(Assembly.LoadFile(Directory.GetCurrentDirectory() + @"\Eternal Dungeon.exe";));
        compiler.Parameters.References.Add(Assembly.GetAssembly(typeof(System.Collections.Comparer))); 
```

感谢您提供任何帮助，而且我对 Boo 和“程序集”都很陌生。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:45:51.190

自己解决了这个问题，我混淆了数组列表，

```
 if ED.Mobs(x).Pos == ED.player.SpaceInFront(): 
```

更改为

```
 if ED.Mobs[x].Pos == ED.player.SpaceInFront(): 
```

# c++ - 可以单独声明函数数组的元素吗？

> ID：10158873
> 
> 赞同：0
> 
> 时间：2012-04-15T01:30:01.563
> 
> 标签：c++, arrays, function, allegro

因此，快速总结一下我为什么要这样做：

我正在制作一个太空飞行程序，其中（一旦我在不止一艘飞船上编码）我将能够存储不同的飞船，例如craft[HAB]、craft[AYSE]、craft[ISS] 等等。目前，我只在一艘船上编码，我这样声明：

```
enum craft {HAB, CRAFTMAX};
...
[declaring ship class here]
...
ship craft[CRAFTMAX]; 
```

然而，并不是所有的船都是相同的结构。例如，HAB（Habitat 的缩写）将是一个底部有三个引擎吊舱的圆圈，AYSE 将是一个空间站，其中心有一根管子和对接灯，等等。我正在让这些函数在屏幕上绘制一个矢量。

目前，我已经声明了 ship::draw，我只是用它来绘制 Hab。但是，我希望能够修改每个绘图函数来绘制该船，即craft[AYSE].draw() 将具有与craft[HAB].draw() 不同的声明。

我已经想过，并寻找了不同的方法来做到这一点，但我没有取得太大的成功。我仍然希望能够遍历所有工艺，以便于计算重力和碰撞。但是我猜如果函数是数组的元素时不能单独声明它们，那么单独声明每艘船不会太麻烦，因为最多只有 10 个。

如果您想查看任何其他代码，[这是我的 git 存储库，它正在存储它。](https://github.com/patrickpowns/hax/blob/master/Summative/trying%20again.cpp)它肯定有点杂乱无章，因为它是一个垄断项目，我只看到自己在使用它。

你们中有人尝试过吗？我敢肯定那里一定有几个人！

并提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:43:37.947

我认为通过为 Ship 对象使用基类，然后为不同类型的船舶派生该基类，您会好得多。然后使用一些容器，允许您遍历所有船舶对象并调用相应的函数。像：

```
class Ship {
public:
  virtual void draw() const = 0;
};

class HAB : public Ship {
  virtual void draw() const;
};

class AYSE : public Ship {
  virtual void draw() const;
}; 
```

然后使用像这样的容器：

```
vector<Ship> ships;
ship.insert(HAB());
ship.insert(AYSE());

// to draw
for_each(ships.begin(), ships.end(), mem_fn(&Ship::draw)); 
```

我很快就想出了这个，所以你必须弄清楚细节。您考虑这样做的方式不是很OO，并且在维护方面会遇到问题（想想单点维护）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T01:48:56.187

我不喜欢您的代码的外观 - 使用craft一词作为类型标识符和变量标识符......

但是从您的问题来看，您似乎想使用继承。所以你声明一个

```
class ship {
    // put here all methods that all ships have and that are the same
    // and all data that all ships.
    virtual void Draw( ) = 0; // subclasses of ship are forced to implement their own Draw
    // etc.
    }; 
```

现在，当您想要一个船舶数组时，将其设为船舶指针数组。然后，您可以放入指向子类的指针，并`dynamic_cast`在需要时使用来获取指向子类的指针。但是通过调用`A[4]->Draw()`，您将获得`Draw`适合数组位置 4 中对象的任何例程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T01:50:01.773

您可能想要声明一个基类并将每种类型的船实现为子类。

```
class HAB: public ship{
  //code here
}; 
```

有关继承的更多信息：请参阅[本教程](http://www.cplusplus.com/doc/tutorial/inheritance/)。

冒号表示`HAB`从类继承成员数据和功能`ship`。这样，您可以在每个子类中唯一地定义一些函数，同时仍然让它们与基类共享重要的函数。例如，每种船型都可能具有类似`get_position()`的成员函数，而绘图函数则具体取决于每种船型。

多态性的美妙之处在于您可以将子类称为它们的父类。因此，您可以创建一个`ship *`（发送指针）数组来引用子类数组。

```
ship * array[CRAFTMAX];
array[0]=new HAB; 
```

然而，在使用这种东西之前，您应该真正了解您的指针，因为管理不善会导致内存泄漏。也就是说，您分配内存并且永远不会释放它。

[这个网站](http://www.cplusplus.com/doc/tutorial/polymorphism/)有一些关于多态性的很好的说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T01:50:59.313

OO 方法是创建类型的层次结构，每种类型代表一种飞机类型。使用虚函数为通用接口（在基类中声明）提供不同的实现。

一旦你有了这个，你将需要多态地将对象存储在容器中（即不是对象，而是指向对象的*智能*指针）。( *smart* ) 指针将是基本类型和实际类型的对象。我建议您使用更高级别的容器而不是数组（即`std::vector<std::unique_ptr<ship>>`）

# jakarta-ee - 如何在发送前更改响应

> ID：10158877
> 
> 赞同：0
> 
> 时间：2012-04-15T01:30:29.427
> 
> 标签：jakarta-ee, glassfish

是否可以拦截向客户端发送响应，并在最终发送修改后的响应？我想从基本身份验证响应中删除“WWW-Authenticate”标头，或者在错误的身份验证情况下将错误代码从 401 更改为 403。PS我有同样的问题：[http ://www.java.net/forum/topic/glassfish/glassfish/suppress-www-authenticate-header-if-basic-auth-fails](http://www.java.net/forum/topic/glassfish/glassfish/suppress-www-authenticate-header-if-basic-auth-fails)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:30:08.843

我尝试将过滤器与 HttpServletResponseWrapper 一起使用，但在 JAAS 基本 HTTP 身份验证之前从未调用过我的过滤器。我通过下一个代码解决了烦人的弹出窗口的问题

在 web.xml 中：

```
<error-page>
    <error-code>401</error-code>
    <location>/error.jsp</location>
</error-page> 
```

错误.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <%
        int status = response.getStatus();
        if (status == 401) {
            response.setStatus(403);
        }
        %>
    </body>
</html> 
```

# php - 循环，一组标题和......什么都没有发生

> ID：10158881
> 
> 赞同：0
> 
> 时间：2012-04-15T01:30:53.730
> 
> 标签：php, header, foreach

我正在做一个有文件上传的项目。这些文件被赋予一个随机名称并放置在 web 目录之外。

然后我有一个脚本，它可以根据 URL 中传递的参数来检索这个图像，它工作得很好。

但是，我制作了一组我想传递给浏览器的标题，然后用循环遍历这些标题`foreach`，它们似乎没有设置任何东西。但是，如果我使用它们工作的功能手动设置它们`header`！奇怪！

现在，我不介意使用该`header`函数而不是遍历它们，但是，是否有特定原因导致这不起作用？

我还使用上述方法将所有标头存储在一个数组中，然后在将内容传递到浏览器时对其进行处理，但是，我不能确定它们是否真的被传递，看到上述问题！

我的代码片段：

```
// Expiry date in seconds, in this instance a year
$expiry_date=   ( 60 * 60 * 24 * 365 );
// Our headers
$img_headers=   array(
    'Content-Type : ' . $mime,
    'Cache-Control: no-cache, must-revalidate',
    //'Cache-control: max-age=' . $expiry_date,
    'Expires:' . gmdate( DATE_RFC1123, time() + $expiry_date ),
    'Pragma: ',
    'Last-Modified: ' . gmdate( gmdate( DATE_RFC1123 ), filemtime( $image_path ) ),
    'Content-Length: ' . ( string ) filesize( $image_path ),
    'Content-Disposition: inline; filename="' . $image_name . '"'
);            

/*header( 'Content-Type: ' . $mime, TRUE );
header( 'Cache-Control: no-cache, must-revalidate', TRUE );
header( 'Expires: ' . gmdate( DATE_RFC1123, time() + $expiry_date ) );
header( 'Pragma: ', TRUE );
header( 'Last-Modified: ' . gmdate( gmdate( DATE_RFC1123 ), filemtime( $image_path ) ), TRUE );
header( 'Content-Length: ' . ( string ) filesize( $image_path ), TRUE );*/

// Loop through and set up our headers!
foreach( $img_headers as $new_header )
{
    header( $new_header, TRUE );
}

// Read our image and end the rest of the file execution
return die( readfile( $image_path ) ); 
```

有什么看起来不合时宜的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:37:01.267

这两种方法应该是相同的。也许“内容类型：”中的额外空间导致了问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T01:32:57.947

尝试用以下内容替换你的 foreach 循环，一旦空白导致逻辑错误，我遇到了类似的问题，值得一试。

```
foreach( $img_headers as $new_header )
{
    header( trim($new_header), TRUE );
} 
```

# meteor - Meteor 的运营转型是否即将到来？

> ID：10158888
> 
> 赞同：2
> 
> 时间：2012-04-15T01:33:50.487
> 
> 标签：meteor, operational-transform

鉴于 Meteor 支持对数据对象进行最终一致的离线写入，自动将并发编辑合并到同一个文本字段似乎是很自然的下一步。这可以通过集成一些[操作转换](http://en.wikipedia.org/wiki/Operational_transformation)库（[列表](https://stackoverflow.com/questions/2043165/operational-transformation-library)）来完成，例如[ShareJS](http://sharejs.org/)。

Meteor 团队是否希望在某个时候在核心产品中支持此功能，或者它更有可能作为第三方附加模块出现？

此外，由于 ShareJS 实际上似乎提供了 Meteor 数据架构的基本功能（他们在文档中提到它可以与任意 JSON 对象一起使用），是否有可能使用 ShareJS 进行类似 Meteor 的数据同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:08:52.640

我猜这可能是他们可能添加的东西，或者可以用包来完成。

然而，与此同时：您可以使用 Meteor.methods 公开一个 api，以便与同一字段来回通信。该方法可以对更改进行比较并将其合并到集合中，然后返回客户端计算机上应更改的内容。

# css - Chrome 的表格单元格填充问题

> ID：10158893
> 
> 赞同：1
> 
> 时间：2012-04-15T01:34:59.433
> 
> 标签：css, google-chrome, firefox, html-table, padding

我在 Chrome 中的表格单元格填充有很多问题。似乎如果表格单元格不包含纯文本，则根本不应用填充。

我的标记：

```
<table>
        <tr>
            <th></th>
            <th class="account-picture"></th>
            <th class="account-name">Name</th>
            <th class="account-email">Email</th>
            <th class="account-last">Last Sign in</th>
        </tr>

        <tr>
            <td>
                <fieldset>
                   <ul>        
                       <li><input type="checkbox" id="enabled" name="test[]" value="enabled"></li>
                   </ul>    
                </fieldset>
            </td>

            <td class="account-picture">
                   <div class="online">
                      <img src="http://www.genengnews.com/app_themes/genconnect/images/default_profile.jpg">                           </div>
            </td>
            <td class="account-name">test test test test test test test test test test test test test test test test test test</td>
            <td class="account-email">test test test test test test test test test test test test test test test test test test</td>
            <td class="account-last">15 April 2012 10:19 AM</td>
        </tr>
</table> 
```

CSS：

```
img{ 
    height: 42px;
    width: 42px;
}

td, th{      
    padding: 0 12px;
    vertical-align: middle;
}

.account-picture{
    width: 40px;

}

.account-name{
    min-width: 100px;
}

.account-email{
    min-width: 120px;
}

.account-last{
    min-width: 140px;
}

table{
    table-layout: fixed;
    float: none;
    width: 100%;
    margin-top: 10px;
 }

td, th{      
   word-wrap: break-word;
   padding: 0 12px;
   vertical-align: middle;
}

td:first-child, th:first-child{
  width: 14px;
} 
```

和小提琴：http: [//jsfiddle.net/5mPFk/1/](http://jsfiddle.net/5mPFk/1/)

这就是它在 Firefox 11 中呈现的内容： ![在此处输入图像描述](../Images/a74842e81e04c3351e3c0cd68271c800.png)

铬：18（最新）： ![在此处输入图像描述](../Images/507e8e897281343842c092b498d51ddb.png)

IE9： ![在此处输入图像描述](../Images/0efcff1fc5c2a04347ba6fe64a605d6d.png)

可以看出，IE 和 FF 可以正常工作，但不能使用 chrome。为什么会发生这种情况以及可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:48:39.560

删除`table-layout: fixed`，它似乎工作。

如果`table-layout: fixed`要使用，那么应该使用而不是来定义列宽`width`。`min-width`

不知道为什么只有 Chrome 出现了，但也许它有更好的标准实现。

# vb.net - 无法注册 mozctlx.dll

> ID：10158895
> 
> 赞同：0
> 
> 时间：2012-04-15T01:35:37.670
> 
> 标签：vb.net, windows-7, mozilla, visual-studio-express

我正在尝试注册 mozctlx.dll，以便可以在 VB.Net 中使用该控件。我收到以下错误：

![在此处输入图像描述](../Images/95c9e16959eab170956958a087c6331c.png)

我以管理员身份在 CMD 中运行了 regsvr32 mozctlx.dll，但它仍然无法正常工作。我正在运行 64 位 Windows 7 家庭高级版。

# c# - MonoMac webview，使用 DOM 在 C# 中获取选择（组合框）选定值

> ID：10158896
> 
> 赞同：2
> 
> 时间：2012-04-15T01:35:40.627
> 
> 标签：c#, dom, html-select, selectedvalue, monomac

我正在为 mac osx 开发一个 C# 应用程序（使用 monomac）。在我的应用程序中，我有一个 webview 加载一个包含一些输入的网页，其中一个输入是一个组合框。

问题是，我需要获取组合框的选定值，但我不知道如何在 c# 中做到这一点。

首先，我使用 GetElementById 来获取一个代表我想要的组合框（选择）的 DomElement，它工作正常。这是我的 C# 代码的一部分

```
DomElement comboBox = this.htmlDocument.GetElementById(id);
if(comboBox == null) throw new Exception("ComboBox (" + id + ") could not be found"); 
```

问题是，现在我有了组合框的 DomElement，我找不到获取所选值的方法。在 javascript 中这很容易，因为我会做类似该问题的解决方案->[被选中使用 JavaScript 的下拉列表中的值？](https://stackoverflow.com/questions/1085801/how-to-get-selected-value-of-dropdownlist-using-javascript))

```
var e = document.getElementById("ddlViewBy");
var strUser = e.options[e.selectedIndex].value; 
```

问题是我找不到在 C# 中执行此操作的方法，我不是 DOM 专家，所以我的知识有限，但我尝试了几件事，比如迭代所有元素属性以查看是否存在“selectedIndex” ' 或相关的东西，我也尝试获取 comboBox.Value 属性，但它返回一个空字符串，所以，再次，没有运气..

因此，如果有人知道我该怎么做，我将不胜感激..

# java - 如何使用 java ASM 生成类文件？

> ID：10158898
> 
> 赞同：0
> 
> 时间：2012-04-15T01:36:08.660
> 
> 标签：java, assembly

我努力了

```
 ClassWriter t = new ClassWriter(0);

    t.visitSource("testing.java", null);

    t.visitEnd();

    byte d[] = t.toByteArray();

    FileOutputStream p = null;

    try
    {
        p = new FileOutputStream("testing.class");
    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace();
    }

    try
    {
        p.write(d);
    }
    catch (IOException e)
    {
        e.printStackTrace();
    } 
```

testing.java 中的文本是：

```
public class testing
{
    public static void main(String args[])
    {
        System.out.println("Works!");
    }
} 
```

但是，当我尝试运行类文件时，它给了我这个错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: testing : Unsupported major.minor version 0.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我将如何修复它以便类文件输出“Works！” 到控制台？

**编辑：**

我不希望它必须访问 jdk 文件！（<- 例如 javax.tools）这就是我试图让 ASM 工作的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T21:32:47.617

似乎您正在尝试将 Java 源文件编译为类文件。这可以通过 Java 编译器 - [javac](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)命令行程序或[javax.tools 包](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)中的工具来完成。

ASM 用于不同的目的。ASM 可用于即时创建类文件，无需任何源代码。阅读[ASM 的文档](http://asm.ow2.org/)以了解 Java 字节码以及如何使用 ASM 生成和阅读它。

以下是使用 javax.tools 包编译文件的方式。或者，您可以使用[Process](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)调用命令行工具。检查文档以获取其他参数 - 使用什么类路径，在哪里写入文件等。

```
import javax.tools.JavaCompiler;
import javax.tools.ToolProvider;

public class TestingCompile {
    public static void main(String[] args) {
        JavaCompiler javac = ToolProvider.getSystemJavaCompiler();
        int result = javac.run(null, null, null, "C:\\path\\to\\Testing.java");
        if (result != 0) {
            throw new RuntimeException("compile failed: exit " + result);
        }
    }
} 
```

下面是如何使用 ASM 创建相同的类文件，而不使用源文件。我很确定这不是你想要做的——否则你就不必问这个问题了。;)

这只是[ASMifierClassVisitor](http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/util/ASMifierClassVisitor.html)的输出，因此仍需要将字节写入文件或动态加载到类加载器中。我使用了该`-debug`参数，以便 ASMifier 还显示源文件名和行号（ 和 调用是可选的`visitSource`，`visitLineNumber`因此`visitLocalVariable`如果不需要调试信息，您可以省略它们和相关标签）。

```
import org.objectweb.asm.*;

public class TestingDump implements Opcodes {

    public static byte[] dump() throws Exception {

        ClassWriter cw = new ClassWriter(0);
        FieldVisitor fv;
        MethodVisitor mv;
        AnnotationVisitor av0;

        cw.visit(V1_6, ACC_PUBLIC + ACC_SUPER, "Testing", null, "java/lang/Object", null);

        cw.visitSource("Testing.java", null);

        {
            mv = cw.visitMethod(ACC_PUBLIC, "<init>", "()V", null, null);
            mv.visitCode();
            Label l0 = new Label();
            mv.visitLabel(l0);
            mv.visitLineNumber(1, l0);
            mv.visitVarInsn(ALOAD, 0);
            mv.visitMethodInsn(INVOKESPECIAL, "java/lang/Object", "<init>", "()V");
            mv.visitInsn(RETURN);
            Label l1 = new Label();
            mv.visitLabel(l1);
            mv.visitLocalVariable("this", "LTesting;", null, l0, l1, 0);
            mv.visitMaxs(1, 1);
            mv.visitEnd();
        }
        {
            mv = cw.visitMethod(ACC_PUBLIC + ACC_STATIC, "main", "([Ljava/lang/String;)V", null, null);
            mv.visitCode();
            Label l0 = new Label();
            mv.visitLabel(l0);
            mv.visitLineNumber(3, l0);
            mv.visitFieldInsn(GETSTATIC, "java/lang/System", "out", "Ljava/io/PrintStream;");
            mv.visitLdcInsn("Works!");
            mv.visitMethodInsn(INVOKEVIRTUAL, "java/io/PrintStream", "println", "(Ljava/lang/String;)V");
            Label l1 = new Label();
            mv.visitLabel(l1);
            mv.visitLineNumber(4, l1);
            mv.visitInsn(RETURN);
            Label l2 = new Label();
            mv.visitLabel(l2);
            mv.visitLocalVariable("args", "[Ljava/lang/String;", null, l0, l2, 0);
            mv.visitMaxs(2, 1);
            mv.visitEnd();
        }
        cw.visitEnd();

        return cw.toByteArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T07:01:20.513

我认为问题在于该库希望调用最少的某些方法，并且我相信您没有足够的方法让它生成一个完整的类。

我建议你使用 ASMifier 来生成一些模板。

* * *

您以某种方式损坏了文件。没有0.0版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:16:49.840

您可以从源代码调用 Java 编译器以将任何 Java 源代码编译为类文件。编译器是用 Java 本身编写的，是标准 jdk 版本的一部分。尝试寻找一个名为 javac 的类。

# ios - iOS TableView Reuse 会将大量子视图加载到单元格

> ID：10158899
> 
> 赞同：0
> 
> 时间：2012-04-15T01:36:14.617
> 
> 标签：ios, tableview

我使用以下代码为索引路径处的每一行实现单元格：但问题是当我滚动 tableView 时，单元格会在一行中的一个单元格中加载大量 UIImageView *itemimageview，我尝试使用

```
 for (UIImageView *sView in cell.subviews) {
        [sView removeFromSuperview];
    } 
```

但它会删除一个单元格的所有子视图。如何解决这个问题呢？...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];
    NSUInteger oldRow = [lastIndexPath row];
    static NSString *CheckMarkCellIdentifier = @"CheckMarkCellIdentifier";

    //dequeueReusableCellWithIdentifier --
    // Returns a reusable table-view cell object located by its identifier.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CheckMarkCellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CheckMarkCellIdentifier] autorelease];

    }
    /*
    for (UIImageView *sView in cell.subviews) {
        [sView removeFromSuperview];
    }
    */
    UIImageView *itemimageview=[[UIImageView alloc]initWithFrame:CGRectMake(5, 5, 232, 54)];
    itemimageview.image=[UIImage imageNamed:[tabsImageArray objectAtIndex:row]];

    itemimageview.userInteractionEnabled = YES;
    [cell.contentView addSubview:itemimageview];
    [itemimageview release];

    UIImageView *dictIcon=[[UIImageView alloc]initWithFrame:CGRectMake(30, 18, 30, 30)];
    dictIcon.image=[UIImage imageNamed:@"dictionary_icon.png"];
    dictIcon.userInteractionEnabled = YES;
    [cell.contentView addSubview:dictIcon];
    [dictIcon release];

    UILabel *dictNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(80, 23, 100, 21)];
    dictNameLabel.text = dictName;
    dictNameLabel.textColor = [UIColor whiteColor];
    dictNameLabel.shadowColor = [UIColor blackColor];
    dictNameLabel.backgroundColor = [UIColor clearColor];
    dictNameLabel.userInteractionEnabled = YES;
    [cell.contentView addSubview:dictNameLabel];
    [dictNameLabel release];

    //cell.textLabel.text = [tabsImageArray objectAtIndex:row];
    cell.accessoryType = (row == oldRow && lastIndexPath != nil) ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:41:23.150

考虑运行并检查 [view isKindOfClass:[UIImageView class]] 以检查视图是否是要删除的正确视图类型。

还可以考虑使用 UIView 标记属性标记视图，以便您可以添加一次子视图，然后不必重新创建它们并重用。

以下是您将如何执行此操作：

```
#define ImageViewOneTag 1001
#define ImageViewTwoTag 1002

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)path {
    static NSString *CellID = @"CellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellID];

    UIImageView *imageViewOne = nil;
    UIImageView *imageViewTwo = nil;

    if (cell) {
        // You've caught a reusable cell. Fetch the image views by their tag.

        imageViewOne = (UIImageView *)[cell viewWithTag:ImageViewOneTag];
        imageViewTwo = (UIImageView *)[cell viewWithTag:ImageViewTwoTag];
    } else {
        // You haven't got a reusable cell. Make one, and make and add the image views to the contentView.

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellID];

        imageViewOne = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, 20.0, 20.0)];
        [imageViewOne setTag:ImageViewOneTag];

        imageViewTwo = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 20.0, 20.0, 20.0)];
        [imageViewTwo setTag:ImageViewTwoTag];

        UIView *contentView = cell.contentView;
        [contentView addSubview:imageViewOne];
        [contentView addSubview:imageViewTwo];
    }

    // By this stage, you've either retrieved a reusable cell, or you've made a new one. Either way, imageViewOne and imageViewTwo now have a reference to the views you mean.
    imageViewOne.image = *imageOneForRow*;
    imageViewTwo.image = *imageTwoForRow*;

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T07:21:48.267

我建议您使用自定义表格视图单元格，只需创建一个继承 uitableviewcell 的可可触摸类。

# iphone - CoreDataGeneratedAccessor 方法给出“无法识别的选择器发送到实例”错误

> ID：10158903
> 
> 赞同：2
> 
> 时间：2012-04-15T01:36:59.357
> 
> 标签：iphone, objective-c, ios, core-data

当我调用该方法时：

```
- (void)removeObjectFromMediaAtIndex:(NSUInteger)idx; 
```

这是作为核心数据对象创建的文件中的默认方法之一，我收到`unrecognized selector sent to instance`. 有人知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T02:15:27.310

确保您的 NSManagedObject 子类实例是使用 NSManagedObjectContext 而不是直接创建的。NSManagedObject sublcasses 不是利用@synthesize 作为属性，而是利用@dynamic 关键字，这表明访问器将在运行时创建 - 在这种情况下，由 NSManagedObjectContext 创建。如果您使用诸如 alloc]init] 之类的东西创建对象实例，它们将不存在；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-02T15:13:51.943

这是一个臭名昭著的核心数据错误。它快 2 岁了，但遗憾的是它仍然存在。请参阅这篇文章：[NSOrderedSet 生成的访问器中引发的异常](https://stackoverflow.com/questions/7385439/exception-thrown-in-nsorderedset-generated-accessors)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T02:16:23.020

听起来您可能在没有更改类的情况下更改了数据模型，反之亦然。或者你的一个团队成员可能做到了（我的团队很快就知道了这种危险）。另一种可能性是您使用的参考实际上并不是您认为的类。有时如果你过度释放一个对象，另一个对象会占用之前的内存空间，但它不会是正确的类。

但是，这看起来不像是默认方法。我习惯于看到的默认方法是添加对象、删除对象、更改为新的 NSSet，以及另外一种我无法完全记住的方法。但是，如果您让 CoreData 对象使用 NSArray 来代替，那将是有意义的。

# java - 欧拉计划 3 IndexOutOfBoundsException

> ID：10158908
> 
> 赞同：1
> 
> 时间：2012-04-15T01:39:33.320
> 
> 标签：java, math, indexoutofboundsexception

我正在尝试使用 Eratosthenes 筛法来查找大量的最大素数（Project Euler 中的问题 3）。

我的语法似乎是正确的，我使用的是 Long（不是 int），但我收到以下错误消息：

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    at java.util.ArrayList.rangeCheck(Unknown Source)
    at java.util.ArrayList.get(Unknown Source)
    at problem3.ProblemThree.Factor(ProblemThree.java:49)
    at problem3.ProblemThree.Recursion(ProblemThree.java:37)
    at problem3.ProblemThree.main(ProblemThree.java:83) 
```

我不知道为什么会这样。有人可以告诉我我在这里做错了什么吗？

```
 package problem3;

 import java.util.List;
 import java.util.ArrayList;

 public class ProblemThree 
 {
    //initializing variables and lists
    long factorNo;
    long nowTesting;
    int i;  
    List<Long> allPrimeList = new ArrayList<Long>();
    List<Long> ourPrimes = new ArrayList<Long>();

    ProblemThree(long x)    //constructor; the input "x" is the number whose highest prime factor is being sought
    {
        factorNo = x;     
    }       

    void initialize()   //use the workaround initialization (add 2 to the allPrimesList, set nowTesting to 3). 
                        //If the factorNo is even, add 2 to the primes list
                        //TODO: need more elegant solution 
    {
        allPrimeList.add((long) 2);
        nowTesting=3;
        if(factorNo % 2 == 0) ourPrimes.add((long) 2);
        i = 0;
    }        

    void recursion()    //keep factoring the next nowTesting until the next nowTesting is greater than half of the factorNo
    {
        while (nowTesting <= (factorNo/2))
        {
            nowTesting = factor(nowTesting);
        }
        System.out.println(ourPrimes);
    }

    long factor(long t) //The factorization algorithm. Lists all the factors of long t
    {
        nowTesting = t;

 // Line 49:
     if ((nowTesting % allPrimeList.get(i)) == 0)
        {
            i = 0;
            return (nowTesting + 2);            
        }
        else
            if(i <= allPrimeList.size()) //if we have not yet reached the end of ourPrimeList
            {
                i++;
                return nowTesting;
            }
            else    //if the end of ourPrimeList has been reached without a single modulus==0, this number is a prime
            {
                allPrimeList.add(nowTesting);

                if(factorNo%nowTesting==0) //if the nowTesting is a prime factor of factorNo, it will be perfectly divisible
                {
                    ourPrimes.add(nowTesting);
                }                    
                i=0;
                return (nowTesting+2);   
            }            
    }

    public static void main (String[] args)
    {
        ProblemThree pt = new ProblemThree(600851475143L);
        pt.initialize();
        pt.recursion();
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:21:34.160

感谢大家耐心地浏览我的代码，我意识到这一定非常痛苦:)

我刚刚解决了这个问题。回想起来，我以前的方法似乎非常复杂。这是我使用的最终解决方案，更加优雅，尽管它仍有改进的空间：

```
//second attempt from the ground up!
package problem3;

public class BiggestPrime 
{
    long lInput;
    long factorTest;
    long currentHeight;
    boolean divided;

    public BiggestPrime(long n)
    {
        factorTest = 2;
        currentHeight = n;

        System.out.println("The prime factors of " + n + " are:"); 

        while (factorTest<currentHeight)
        {
            if (divided == true) {factorTest = 2; divided = false;}
            if (factorTest > currentHeight) {System.out.println("factorTest is greater than currentHeight; breaking"); break;}
            if (currentHeight%factorTest==0)
            {
                System.out.println(factorTest); 
                currentHeight /= factorTest; 
                divided = true;
            } 
            else { factorTest = factorTest + 1L; divided = false;}
        }
        if (factorTest == currentHeight)
        {
            System.out.println(factorTest);
        }
        System.out.println("The end"); 

    }

    public static void main (String[] args)
    {
        BiggestPrime bp = new BiggestPrime(600851475143L);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:59:45.780

At line 49, shouldn't you be checking if nowTesting is divisible by i, not the ith element of allPrimes?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T03:04:53.623

一个有趣的方法。当然，没有人应该解决您的欧拉挑战。但是你知道吗，第二次，你输入 'factor' nowTesting 是 3？

```
// The factorization algorithm. Lists all the factors of long t
long factor (final long nowTesting) 
{
    System.out.println ("entering factor: " + nowTesting); 
```

小想法：

```
 allPrimeList.add ((long) 2); 
```

可以写成：

```
 allPrimeList.add (2L); 
```

并且您可能在因素中识别出“长”参数前面的“最终”？如果您将所有未更改的内容标记为final，它有助于推理代码。在实践中，结果是，您的 Javacode 中充斥着“final”修饰符，但事实就是如此。这是好的代码的标志——也许不是好的设计。Final 可能是默认值。

# php - PHP“最大执行时间”

> ID：10158910
> 
> 赞同：1
> 
> 时间：2012-04-15T01:40:04.237
> 
> 标签：php, time, execution, trigonometry

我正在尝试编写我自己的正弦函数实现来获得乐趣，但我不断得到：

```
Fatal error: Maximum execution time of 30 seconds exceeded 
```

我有一个小的 HTML 表单，您可以在其中输入您要查找的 Sin(x) 的“x”值以及要计算的“迭代”次数（您的值的精度），其余的是 PhP。数学基于维基百科上正弦的“系列定义”：-> [http://en.wikipedia.org/wiki/Sine#Series_definition](http://en.wikipedia.org/wiki/Sine#Series_definition) 这是我的代码：

```
<?php

    function factorial($int) {
        if($int<2)return 1;
        for($f=2;$int-1>1;$f*=$int--);
        return $f;
    };

    if(isset($_POST["x"]) && isset($_POST["iterations"])) {
        $x = $_POST["x"];
        $iterations = $_POST["iterations"];
    }
    else {
        $error = "You forgot to enter the 'x' or the number of iterations you want.";
        global $error;
    }

    if(isset($x) && is_numeric($x) && isset($iterations) && is_numeric($iterations)) {

        $x = floatval($x);
        $iterations = floatval($iterations);

        for($i = 0; $i <= ($iterations-1); $i++) {
            if($i%2 == 0) {
                $operator = 1;
                global $operator;
            }
            else {
                $operator = -1;
                global $operator;
            }
        }

        for($k = 1; $k <= (($iterations-(1/2))*2); $k+2) {
            $k = $k;
            global $k;
        }

        function sinus($x, $iterations) {
            if($x == 0 OR ($x%180) == 0) {
                return 0;
            }
            else {
                while($iterations != 0) {
                    $result = $result+(((pow($x, $k))/(factorial($k)))*$operator);
                    $iterations = $iterations-1;
                    return $result;
                }
            }
        }

        $result = sinus($x, $iterations);
        global $result;
    }
    else if(!isset($x) OR !isset($iterations)) {
        $error = "You forgot to enter the 'x' or the number of iterations you want.";
        global $error;
    }
    else if(isset($x) && !is_numeric($x)&& isset($iterations) && is_numeric($iterations)) {
        $error = "Not a valid number.";
        global $error;
    }

?> 
```

我的错误可能来自这一行的无限循环：

```
$result = $result+(((pow($x, $k))/(factorial($k)))*$operator); 
```

但我不知道如何解决这个问题。我在这一行要做的是计算：

```
((pow($x, $k)) / (factorial($k)) + (((pow($x, $k))/(factorial($k)) * ($operator) 
```

迭代：

```
+ (((pow($x, $k))/(factorial($k)) * $operator) 
```

“$i”和“$k”的值相应改变的“$iterations”次数。

我真的被困在这里了！需要一点帮助。先感谢您 ！

顺便说一句：阶乘函数不是我的。我在 PhP.net 评论中找到了它，显然它是最佳阶乘函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:05:59.343

你为什么要在正弦函数之外计算“运算符”和“k”功率。

sin 展开看起来像 = x - x^2/2！+ x^3/3！……

像这样的东西。

还要记住迭代是整数，所以在它上面应用 intval 而不是 floatval。也在网上学习如何使用全局。无论如何，您不需要全局，因为您的“运算符”和功率“k”计算将在正弦函数内。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:01:09.710

这个阶乘函数几乎不是最优的——就速度而言，虽然还不错。至少它不会递归。虽然它简单而正确。超时的主要方面是您经常调用*它*。提高其性能的一种技术是在本地数组中记住先前计算的阶乘值。或者只计算一次。

您的代码有很多可以改进的地方：

*   这个说法：

    而（$迭代！= 0）

如果`$iterations`输入为 0.1 会怎样？或消极。这将导致无限循环。您可以使程序更能抵抗不良输入

```
while ($iterations > 0) 
```

*   计算正弦的公式使用奇数：1、3、5、7；不是每个整数
*   有更简单的方法来计算交替符号。
*   算术表达式过于复杂。
*   `return $result`在循环内，提前终止它。

这是一个经过测试的工作程序，它针对所有这些问题进行了调整：

```
<?php
// precompute the factorial values
global $factorials;
$factorials = array();
foreach (range (0, 170) as $j)
        if ($j < 2)
                $factorials [$j] = 1;
        else    $factorials [$j] = $factorials [$j-1] * $j;

function sinus($x, $iterations)
{
        global $factorials;

        $sign = 1;
        for ($j = 1, $result = 0;  $j < $iterations * 2;  $j += 2)
        {
                $result += pow($x, $j) / $factorials[$j] * $sign;
                $sign = - $sign;
        }
        return $result;
}

// test program to prove functionality
$pi = 3.14159265358979323846264338327950288419716939937510582097494459230781640628620;
$x_vals = array (0, $pi/4, $pi/2, $pi, $pi * 3/2, 2 * $pi);

foreach ($x_vals as $x)
{
        $y = sinus ($x, 20);
        echo "sinus($x) = $y\n";
}
?> 
```

输出：

```
sinus(0) = 0
sinus(0.78539816339745) = 0.70710678118655
sinus(1.5707963267949) = 1
sinus(3.1415926535898) = 3.4586691443274E-16
sinus(4.7123889803847) = -1
sinus(6.2831853071796) = 8.9457384260403E-15 
```

顺便说一句，这执行得非常快：这个输出需要 32 毫秒。

# database - Google App Engine 存储为列表与 JSON

> ID：10158917
> 
> 赞同：0
> 
> 时间：2012-04-15T01:43:21.210
> 
> 标签：database, google-app-engine

我有一个名为 User 的模型，一个用户有一个属性 relatedUsers，它的一般格式是一个整数数组。现在，有时我想检查用户的相关用户数组中是否存在某个数字。我看到了两种方法：

1.  使用带有索引值（或者可能没有）的标准 Python 列表，然后运行一个 IN 查询并查看该数字是否在其中。

2.  获得该用户的密钥后，获取属性 relatedUsers 的值，该值是 JSON 字符串格式的数组。解码字符串，并检查数字是否在其中。

哪个效率更高？数字 1 会比选项 2 花费更多的读取次数吗？并且第 1 次写入的成本会高于第 2 次，因为索引每个值都会花费一次写入。如果我不索引怎么办——那么哪种解决方案会更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:46:48.000

这是您的成本与能力，明智的选择：

1.  将值放在索引列表中会更加昂贵。您将为列表中的每个值产生一次写入的成本，这可能会根据您的用户有多少朋友而爆炸式增长。如果您有某些类型的复合索引，这种成本爆炸可能会更糟。好的一面是您可以对此信息运行查询：例如，您可以查询与特定用户为朋友的用户列表。

2.  这里没有额外的索引或写入成本。问题是您失去了查询功能。

如果您知道您只会检查当前用户的好友列表，请务必使用选项 2。否则您可能需要更仔细地查看您的设计。

# oop - 通用 OO 设计模式

> ID：10158922
> 
> 赞同：4
> 
> 时间：2012-04-15T01:45:31.940
> 
> 标签：oop, design-patterns, delegates, notifications

考虑以下一般程序结构：

*   A 类有一个 B 类的实例作为成员变量
*   B 类有一个包含 C 类实例的集合成员变量
*   A 类中的事件通过 A 简单地告诉 B 事件传播到 C 实例

**关于 C 类实例与 A 类对话的设计模式是什么？**

一种选择是 C 类发布 A 类订阅的通知的实例。另一种选择是将对 A 类的引用传递给“链下”（从 A 到 B，然后从 B 到每个 C）。后一种选择允许 C 的实例直接与 A 对话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T02:07:58.220

如果您的意思是字面上的*设计模式*（即 GoF 种类），那么这些将是一些相关的选项：

*   命令：将回调传递给`C`项目（直接或间接通过 B），以便当他们想要回话时，`A`他们可以简单地调用这个回调——甚至可以有参数
*   迭代器：`B`将其聚合集合的视图直接暴露给`A`; `A`然后`C`直接进行通信
*   中介者：公开`A`和`C`可能订阅的通知；交流是通过发布事件来完成的
*   观察者：你已经建议的第一个选项

另一方面，如果您真的是指*架构*模式，那么典型的选项是：

*   您的第一个选择，`A`订阅`C`事件。乍一看，这似乎不是一个全面的好主意，除非事件一直非常有用，因为它需要`n`对象将指针聚合回回调，在最坏的情况下它们甚至可以只使用一次。
*   传递引用`A`是另一种选择，但如果您要污染`A`方法的公共接口以便`C`在非常特定的场景中回调它，则不是一个好的选择。如果已经公开了合适的接口，它可能非常有效`A`，但请注意，您可能需要在`C`回调之间使用适配器类`A`，以便不紧密耦合`C`到`A`的接口。
*   第三种选择是`A`迭代直接提供的集合（视图）并向实例`B`提供回调；`C`这具有非常松散耦合的优点，并且它将使用最少的内存量，但编码可能有点棘手。

# .net - 从vbnet中的html节点获取数据

> ID：10158923
> 
> 赞同：0
> 
> 时间：2012-04-15T01:45:37.793
> 
> 标签：.net, html, vb.net

我有一个基本的锚节点作为字符串，并希望从中获取 URL 和文本。例如：

```
<a href="http://MyAwesomeWebsite.com/">Go to MyAwesomeWebsite</a> 
```

我想要两个字符串，一个带有：

```
http://MyAwesomeWebsite.com/ 
```

另一个与

```
MyAwesomeWebsite 
```

我该如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:33:17.027

您可以使用正则表达式来提取您想要的文本：

```
 Imports System.Text.RegularExpressions
    Sub Main()
    Dim anchor As String
    anchor = "<a href=""http://MyAwesomeWebsite.com/"">Go to MyAwesomeWebsite</a>"

    Dim href As String = Regex.Match(anchor, "\""[a-z,A-Z,0-9,:,/,.]+\""").Value
    Console.WriteLine(href.Substring(1, href.Length - 2))

    Dim content As String = Regex.Match(anchor, "\>[a-z,A-Z,0-9,:,/,., ]+\<").Value
    Console.WriteLine(content.Substring(1, content.Length - 2))
    Console.ReadKey()
    End Sub 
```

您也可以使用**String**提供的方法，例如**IndexOf**和**Substring**。但是，如果您正在考虑解析其中的很多想法，我建议您使用像[HtmlAgilePack](http://htmlagilitypack.codeplex.com/)这样的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:31:26.857

[Html Agility Pack](http://htmlagilitypack.codeplex.com/)库可以为您解析字符串并返回您想要的任何信息。这里有[很多](https://stackoverflow.com/search?q=Html+Agility+Pack)关于如何使用stackoverflow的相关问题。

另一种方法涉及使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)来查找与所需模式匹配的子字符串。

# c++ - 向上转型不透明指针

> ID：10158925
> 
> 赞同：0
> 
> 时间：2012-04-15T01:47:14.360
> 
> 标签：c++, casting, opaque-pointers

我正在尝试使用 pimpl 成语。特别是，实现类将实现另一个接口：

```
// public_class.h
class PublicClass
{
public:
    /* public interfaces here */
private:
    class _PublicClass_impl;
    friend class _PublicClass_impl;
protected:
    _PublicClass_impl * const _impl;
};

// public_class.cpp
class PublicClass::_PublicClass_impl : public SomeInterface
{
    friend class PublicClass;
    /* all sort of stuff ... */
}; 
```

我的问题是，在以下情况下可以使用哪些演员表？

```
// some_other_class.h
class SomeOtherClass : private PublicClass
{
    void some_function()
    {
        // definition of _PublicClass_impl is unknown
        // thus, _impl is opaque

        SomeInterface * interface = dynamic_cast<SomeInterface *>(_impl); //??
        /* more code ... */
     }
}; 
```

在这种情况下 dynamic_cast 可以正常工作吗？在这种情况下是否可以使用其他类型的演员表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:58:32.683

如果我没记错的话，**您根本不需要任何显式**转换，因为`SomeInterface`它是 的基类`_PublicClass_impl`，并且您始终可以隐式转换为基类。

我实际上尝试在**没有`dynamic_cast`**in GCC (4.5.1) 的情况下编译您的代码，并且确实没有错误或警告（我定义`SomeInterface`为空类）。

不过，一个相关的问题引起了我的兴趣：为什么编译器会考虑`SomeInterface`确实是 的基类这一事实`_PublicClass_impl`，尽管后者在所讨论的点上是不透明的？

我找到的最接近解释的是 §11.2，C++ 标准的第 5 条：

> 如果基类是可访问的，则可以将指向派生类的指针隐式转换为指向该基类的指针（4.10、4.11）。

**如果由于某种原因您仍然想使用显式**强制转换，那么简单的静态转换应该没问题：

```
SomeInterface *interface = static_cast<SomeInterface *>(_impl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:44:39.850

据我所知，没有一种可靠的方式来做你想做的事。reinterpret_cast 或 c 风格的强制转换可能有效（行为未指定），但当它允许您编译时，其他都是未定义的行为。

n3242 的 5.2.7.2（我知道这不是官方标准，但应该很接近）说关于 dynamic_cast(v)，

如果 T 是指针类型，v 应该是指向完整类类型的指针的纯右值，结果是 T 类型的纯右值。如果 T 是左值引用类型，v 应该是完整类类型的左值，并且结果是 T 所引用类型的左值。如果 T 是右值引用类型，则 v 应是具有完整类类型的表达式，结果是 T 所引用类型的 xvalue。

所以 dynamic_cast 不起作用。

static_cast 不起作用，因为这两种类型之间没有定义任何有效的转换。

5.2.10.7 说关于 reinterpret_cast(v)，

指向对象的指针可以显式转换为指向不同对象类型的指针。69 当类型为“指向 T1 的指针”的纯右值 v 转换为类型“指向 cv T2”的指针时，结果为 static_cast(static_cast(v )) 如果 T1 和 T2 都是标准布局类型 (3.9) 并且 T2 的对齐要求不比 T1 严格。将“指向 T1 的指针”类型的纯右值转换为“指向 T2 的指针”类型（其中 T1 和 T2 是对象类型，并且 T2 的对齐要求不比 T1 的对齐要求更严格）并返回其原始类型会产生原始类型指针值。未指定任何其他此类指针转换的结果。

所以 reinterpret_cast 可能会起作用。

最后，不使用强制转换不起作用，因为编译器不知道类型之间的关系。

# android - 按下按钮时的声音

> ID：10158926
> 
> 赞同：0
> 
> 时间：2012-04-15T01:47:26.927
> 
> 标签：android

我似乎找不到我出错的地方，我想要的是按下图像按钮并进入我的第二个活动，然后单击按钮它会发出声音。任何帮助都会很棒

```
package my.solo;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class SoloActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final MediaPlayer mpButtonClick = 
                MediaPlayer.create(this,R.raw.button_click);

        TextView textView = (TextView)findViewById(R.id.text_view);
        textView.setMovementMethod(new ScrollingMovementMethod()); 

        Button next = (Button) findViewById(R.id.imageButton1);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent(SoloActivity.this
                        , model_page.class);
                startActivity(intent);

                mpButtonClick.start();
            }
        }
    )
} 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/pt5"
    android:orientation="vertical" >
    <RelativeLayout android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" >
        <TextView android:id="@+id/text_view"
            android:layout_width="415dp"
            android:layout_height="209dp"
            android:layout_marginLeft="300dp"
            android:layout_marginTop="50dp"
            android:maxLines="300"
            android:scrollbars="vertical"
            android:singleLine="false"
            android:text="@string/disclamer"
            android:textColor="@android:color/secondary_text_dark_nodisable"/>
        <ImageButton android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="98dp"
            android:src="@drawable/stbtn2" 
            android:background="@null"/>
        <TextView android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="35dp"
            android:text="@string/P69"
            android:textSize="25dp"
            android:textStyle="bold"
            android:typeface="serif"/>
    </RelativeLayout>
</LinearLayout> 
```

我已将第二个活动放在 MF 中，所以没关系

[http://imageshack.us/g/638/bugjd.png/](http://imageshack.us/g/638/bugjd.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:53:07.083

您的清单文件中有 model_page 活动吗？

# android - 处理Android中通过Camera获取的位图

> ID：10158927
> 
> 赞同：0
> 
> 时间：2012-04-15T01:47:35.180
> 
> 标签：android, bitmap, android-camera

我从 camera 获得了位图。现在我希望在拍摄的照片中检测人脸。我已经编写了相同的代码。获得 Bitmap 后，我使用 FaceDetector.face 检测图像中的人脸，但每次尝试在模拟器上运行程序时程序都会崩溃。

这是我的代码。

```
public class Main extends Activity {
    /** Called when the activity is first created. */
    final int CAMERA_PIC_REQUEST = 1337; 
    Bitmap new1Bitmap;
    private int imageWidth, imageHeight;
    private int numberOfFace = 1;
    private FaceDetector myFaceDetect; 
    private FaceDetector.Face[] myFace;
    float myEyesDistance;
    int numberOfFaceDetected;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode,Intent data) {
        if (requestCode == CAMERA_PIC_REQUEST) {
            // do something
            new1Bitmap = (Bitmap) data.getExtras().get("data");  // get the Image from Camera
            imageWidth = new1Bitmap.getWidth();
            imageHeight = new1Bitmap.getHeight();
            myFace = new FaceDetector.Face[numberOfFace];
            myFaceDetect = new FaceDetector(imageWidth, imageHeight, numberOfFace);
            numberOfFaceDetected = myFaceDetect.findFaces(new1Bitmap, myFace); 

            ImageView image = (ImageView) findViewById(R.id.imageView1);
            //image.setImageBitmap(new1Bitmap); 
            Canvas canvas = null; 
            canvas.drawBitmap(new1Bitmap, 0, 0, null);
            Paint myPaint = new Paint();
            myPaint.setColor(Color.RED);
            myPaint.setStyle(Paint.Style.STROKE);
            myPaint.setStrokeWidth(5);

            for(int i=0; i < numberOfFaceDetected; i++)
            {
                Face face = myFace[i];
                PointF lEye=new PointF();
                PointF rEye=new PointF();

                PointF myMidPoint = new PointF();
                face.getMidPoint(myMidPoint);
                myEyesDistance = face.eyesDistance();
                canvas.drawCircle((float)(myMidPoint.x-myEyesDistance/2.0), myMidPoint.y, (float)20.0, myPaint);
                canvas.drawCircle((float)(myMidPoint.x+myEyesDistance/2.0), myMidPoint.y, (float)20.0, myPaint);
            }
        }
    }
} 
```

谁能指出这段代码中的错误？

logcat 中的错误

```
04-14 23:12:02.052: E/AndroidRuntime(941): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1337, result=-1, data=Intent { act=inline-data (has extras) }} to activity {live.face.detection/live.face.detection.Main}: java.lang.NullPointerException 
```

谢谢 ！

# asp.net - 添加角色只向用户添加一个

> ID：10158936
> 
> 赞同：1
> 
> 时间：2012-04-15T01:49:21.163
> 
> 标签：asp.net, asp.net-mvc-3, forms-authentication

我的帐户控制器提供了以下代码：

```
// GET: /Account/Register
        [AllowAnonymous]
        public ActionResult Register()
        {
            ViewData["roleName"] = new SelectList(Roles.GetAllRoles(), "roleName");
            return View();
        }

        //
        // POST: /Account/Register

        [HttpPost]
        [AllowAnonymous]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;
                Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    Roles.AddUserToRole(model.UserName, "gamers");
                    FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                    return RedirectToAction("Index", "Home");
                }

                else
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);

        } 
```

我有两个角色

```
gamers and consoleadders 
```

我的问题是，我该如何设置 thsi 代码，以便当用户选择一个角色时，它会被保存，因为它目前只保存一个角色，即游戏玩家。我可以获得可见的角色，但我只能选择`"gamers"`

这是因为这行代码：

```
Roles.AddUserToRole(model.UserName, "gamers"); 
```

我还需要什么，所以当添加用户时，他们可以选择任一角色并将角色设置为该帐户

谢谢

# iphone - UITableView 部分出现在 tableHeaderView

> ID：10158943
> 
> 赞同：2
> 
> 时间：2012-04-15T01:51:42.260
> 
> 标签：iphone, ios, uitableview

我有一个`UITableView`使用该`tableHeaderView`属性添加标题的实例。我观察了`contentOffset`属性的变化，以便能够向相反的方向移动标题，使其在滚动至少一定量时保持在表格的顶部。我想以这种方式拥有它，有两个原因。首先，我希望滚动条覆盖标题。其次，我将带有滚动内容的标题移动大约 100 点，然后将其保持在顶部。

一切都很好，除了一个细节。表格视图部分出现在 `tableHeaderView`. 如何让它们出现在下方？

编辑：如何让 a 的部分出现在视图堆栈`UITableView`中分配的视图下方？`tableHeaderView`

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-16T08:27:36.113

这不是问题的解决方案，但这种方式对我有用：

我只是将标题推送到数组中，将表格视图单元格作为字符串提供，并将它们添加为具有不同单元格标识符的单元格，而不是我使用的单元格。

# jquery - jQuery html(text) 通过 ajax 解析

> ID：10158944
> 
> 赞同：1
> 
> 时间：2012-04-15T01:52:00.570
> 
> 标签：jquery, python, ajax, forms

所以我有一个通过 ajax 发送到 python 脚本的表单。python 脚本正在输出整个 HTML 页面，其中包括内容类型 doctype 等。

现在我需要将python脚本中的一部分响应文本，一个div元素，插入到当前页面的一个div中。

如何解析响应文本并去除所有不必要的垃圾，如 doctype 和 header？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:14:09.153

在您的 ajax 函数中，您可能有一个成功函数或类似的输出数据变量的函数，如果返回的数据是有效的 HTML，只需使用过滤器解析输出，如下所示：

```
$.ajax({
  url: "http://www.mysite.fun/html.py"
//using the new .done() function, works the same with .success
}).done(function ( data ) { 
    var element = $(data).filter(function() {
                      if (this.id=='IdOfMyDiv') return this;
                  });
}); 
```

[小提琴](http://jsfiddle.net/adeneo/ZTmPv/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:17:57.780

在您的成功功能中，您必须像这样过滤结果：

```
success: function(r){
    var divContent = $(r).filter('#myDiv').html();
} 
```

[我在这里](http://jsfiddle.net/marcgrabow/vd2LC/)为您创建了一个工作小提琴。

这是您问题的解决方案，但 jimw 对更改脚本以仅输出内容的评论是正确的，这将是正确的解决方案。

# ios5 - 使用情节提要显示模态视图控制器时如何更改大小？

> ID：10158945
> 
> 赞同：2
> 
> 时间：2012-04-15T01:52:19.560
> 
> 标签：ios5, storyboard, modalviewcontroller

使用故事板，我使用模态样式和表单演示创建到另一个视图控制器的过渡。但始终具有相同的大小。

如何使用情节提要更改此视图控制器大小？我发现了一些几乎可以工作的代码，但我从来没有让 mu modal view controller 居中。 [如何调整 UIModalPresentationFormSheet 的大小？](https://stackoverflow.com/questions/2457947/how-to-resize-a-uipresentationformsheet/4271364#4271364) 请注意，我使用情节提要，并且该代码不适用于情节提要。

你有什么想法或建议吗？

顺便说一句，prepareForSegue os 似乎调用了 BEFORE viewDidLoad，这正常吗？

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:31:23.863

虽然有点晚了。

我以前实现过它。我已经设法让 UIPresentationFormSheet 居中。这是我的代码..

```
[detailView setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[detailView setModalPresentationStyle:UIModalPresentationFormSheet];    
[self presentModalViewController:detailView animated:YES];
detailView.view.superview.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
float heightOfFrame = 200.0f;
float widthOfFrame= 400.0f;
detailView.view.superview.frame = CGRectMake(
    self.view.superview.center.x - (widthOfFrame/2),                                         
    self.view.superview.center.y - (heightOfFrame/2),
    widthOfFrame,
    heightOfFrame
); 
```

希望我在某些方面对您有所帮助。

问候，史蒂夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T13:43:50.870

我最近遇到了同样的问题，并且能够使用此属性更改表单视图的大小：

![在此处输入图像描述](../Images/9da31148d2caedea68946467e7acc2de.png)

# ios - ios如何访问被委托人

> ID：10158947
> 
> 赞同：-1
> 
> 时间：2012-04-15T01:52:55.710
> 
> 标签：ios, delegates

说这`self`是对象`myObject`，我做类似的事情`[self setDelegate:theDelegate]`

从内部`theDelegate`如何访问`myObject`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T02:00:31.463

你不能。委托不需要知道它委托的对象。大多数委托方法都有一个参数，该参数包含一个指向称为委托的实例的指针，以防委托在接收到来自它的消息时需要与委托对象进行交互。这就是你应该做的一切。

`UITextField`示例 -完成编辑后更改实例的背景颜色：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    // textField is a pointer to an instance that called us (the delegate)
    textField.backgroundColor = [UIColor redColor];
} 
```

# java - Need to take each integer from the infile and pass it to a method

> ID：10158951
> 
> 赞同：0
> 
> 时间：2012-04-15T01:54:42.060
> 
> 标签：java, for-loop

I am attempting to read each integer from an infile and passing that on to the method adScore which determines the letter grade, and total count of all the grades and the highest exam score and lowest exam score. But my while loop when doing the for loop isn't pulling in the data from the infile as I am debugging it after the for loop doing a system.out.print. And what returns are just the numbers 0-29 which is my counter in the loop. Can assist me as to what I am doing wrong so that I can pull in the grade scores from the infile?

Regards.

```
 while(infile.hasNextInt())
        {
            for(int i=0; i <30; i++)//<-- it keeps looping and not pulling the integers from the     file.
            {
                System.out.println(""+i);//<--- I placed this here to test what it     is pulling in and it is just counting
                //the numbers 0-29 and printing them out.  How do I get each data    from the infile to store
                exam.adScore(i);//determines the count of A, B, C, D, F grades, total   count, min and max
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:04:25.123

It's printing 0 - 29 because that's what you are telling it to do:

```
System.out.println(""+i) 
```

will print out i, which is simply the integer you are using as the loop counter. You are never actually retrieving the next value from the Scanner object. I'm guessing this is homework, so I won't give you any code, but I will say that you definitely need to be using the nextInt() method of Scanner to retrieve the values from the input file and use that value inside your for-loop.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:03:26.857

Tron's right --- you haven't actually asked the scanner to read the next integer. `Scanner.hasNextInt()` simply tests to see if there's an integer to be read. You're just telling `i` to loop through the values 0-29\. I think you mean to do something like this:

```
while(infile.hasNextInt())
{
    int i = infile.nextInt();
    exam.adScore(i);//determines the count of A, B, C, D, F grades, total count, min and max
} 
```

If you're not sure that every line in the input is an integer, you could do something like this:

```
while(infile.hasNext()) { // see if there's data available
    if (infile.hasNextInt()) { // see if the next token is an int
        int i = infile.nextInt(); // if so, get the int
        exam.adScore(i);//determines the count of A, B, C, D, F grades, total count, min and max
    } else {
        infile.next(); // if not an int, read and ignore the next token
    }
} 
```

# java - 空指针异常 - GPA HH 的 Java 程序

> ID：10158953
> 
> 赞同：2
> 
> 时间：2012-04-15T01:55:30.773
> 
> 标签：java, nullpointerexception

这是为了家庭作业。我已经完成了 90% 的工作，但是 NPE 导致我的程序每次都失败。我尝试了几种方法并阅读了非常详细的说明，这些说明在他希望程序结构方面非常详细，但我仍然无法弄清楚为什么即使在传递数据时它也会给出这个异常。我最初认为这是因为初始测试中没有通过数据。

运行程序的第一个 .java 文件：

```
class TestGPA
{
  public static void main(String[] args)
  {
    if (args.length == 0)
    {
        System.out.println("Please supply grades to find GPA");
        System.exit(0);
    }
    GPA gpa = new GPA(args);
    else
    {
        GPA gpa = new GPA(args);
        gpa.displayResult();
    }
  }
} 
```

很多方法所在的第二个 .java 文件：

```
class GPA
{
String[] courseIdGrades;
String[] courseIds;
char[] grades;
double gpa;
String errorMsg;

GPA(String[] courseIdGrades)
{
    String[] courseIds = new String[courseIdGrades.length];
    char[] grades = new char[courseIdGrades.length];
    processData();
}

void parseInput()
{
    int i = 0;
    while( i < courseIdGrades.length )
    {
        GPAUtil.validateCourseIdGrade(courseIdGrades[i]);
        if(errorMsg != "NO_ERROR")
        {
            break;
        }
        else
        {
            courseIds[i] = courseIdGrades[i].substring(0,5).toUpperCase();
            grades[i] = Character.toUpperCase(courseIdGrades[i].charAt(5));
            i++;    
        }
    }
}

double computeGPA()
{
    int sum = 0;
    for (int i = 0; i < grades.length; i++)
    {
        sum += GPAUtil.gradePoints(grades[i]);
    }
    double gpa = (double) sum / grades.length;
    return gpa;
}

void processData()
{
    parseInput();
    if(errorMsg == "NO_ERROR")
    {
        computeGPA();
    }
    else
    {
        System.out.println("Input error - details are: " + errorMsg);
        System.exit(0);
    }
}

void displayResult()
{
    System.out.println("--------------------");
    System.out.println(" Course ID Grade" );
    System.out.println("--------------------");
    for (int i = 0; i < courseIds.length; i++)
    {
        System.out.println(" " + courseIds[i] + " " + grades[i]);
    }
    System.out.println("--------------------");
    System.out.println(" GPA = " + gpa);
    System.out.println("--------------------");
}
} 
```

第三个 .java 是一个实用程序类：

```
public class GPAUtil
{

public static String[] validDepts = {"CS","EE","ME"};

public static String validateCourseIdGrade(String courseIdGrade)
{
    String errorMsg = "NO_ERROR";

    if (courseIdGrade.length() != 6)
    {
        errorMsg = "Course ID/Grade string invalid, must be 6 char.";
    }

    else
    {
        for(int i = 0; i < 3; i++)
        {
            if(courseIdGrade.substring(0,2).equalsIgnoreCase(validDepts[i]))
            {
                errorMsg = "NO_ERROR";
                break;
            }
            else
            {
                errorMsg = "Dept ID invalid, must be one of: CS, EE, ME";
            }

        }

    }

    return errorMsg;

}

static int gradePoints(char grade)
{
    int points = 0;
    switch(grade)
    {
        case 'A':
            points = 4;
            break;
        case 'B':
            points = 3;
            break;
        case 'C':
            points = 2;
            break;
        case 'D':
            points = 1;
            break;
        default:
            points = 0;
            break;
    }
    return points;
}

} 
```

例外：

```
Exception in thread "main" java.lang.NullPointerException
at GPA.parseInput(GPA.java:19)
at GPA.processData(GPA.java:48)
at GPA.<init>(GPA.java:13)
at TestGPA.main(TestGPA.java:5) 
```

### 输入

根据错误消息，问题出现在 GPA 类中，这行：`while( i < courseIdGrades.length )`这让我相信，通过不传递参数，它解析为 null，因此没有长度，所以我添加了对 null 的检查。但是，当我传递一个参数时，我仍然会收到相同的错误集。我不是在寻求答案，但朝着正确的方向轻推会非常有帮助。

### 我试过的

我尝试重组代码以阅读`while(i < courseIdGrades[i].length())`无济于事，并且还硬编码了一个参数并开始传递它，但仍然得到相同的处理。应该发生的是，如果传递了无效的参数，它应该显示：`Input error - details are: + errorMsg`由`errorMsg`位于`GPAUtil`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:26:59.280

你永远不会初始化`courseIdGrades`. 您只是在初始化`courseIds`并`grades`在您的`GPA`构造函数中。这就是为什么在引用对象时会出现异常。

# sdl - 为什么我会得到：错误：在 DMD2 上编译 SDL2 时未定义标识符 SDL_SetVideoMode

> ID：10158956
> 
> 赞同：2
> 
> 时间：2012-04-15T01:56:59.960
> 
> 标签：sdl, d

我找不到运行 SDL2 的代码示例，当我尝试使用 Derelict SDL2 在 DMD2 上编译以下代码时，出现上述错误。是否有一套新的初始化 SDL2 的程序？

代码是：

```
import std.stdio;
import derelict.sdl2.sdl;
import derelict.sdl2.types;
import derelict.opengl3.gl3;

private import EventHub;

pragma(lib, "DerelictUtil.lib");
pragma(lib, "DerelictGL3.lib");
pragma(lib, "derelictSDL2.lib");

bool running=true;
SDL_Surface *screen;

class App{
    private EventHub ehub;
    private bool virgin=true;
    private int w=1024, h=768, bpp=24;
    private int flags=SDL_GL_DOUBLEBUFFER;//| SDL_FULLSCREEN

    public void init(){
        initSDL();
    }

    private bool initSDL(){
        if(SDL_Init(SDL_INIT_VIDEO)<0){
            SDL_Quit();
            writeln("Error initializing SDL_Video");
            writeln(SDL_GetError());
            return false;
        }
        writeln("fred");

        SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);
        SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);
        SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);
        SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
        SDL_GL_SetAttribute(SDL_GL_MULTISAMPLEBUFFERS, 1);
        SDL_GL_SetAttribute(SDL_GL_MULTISAMPLESAMPLES, 2);
        SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);

        screen=SDL_SetVideoMode(w, h, bpp, flags);

        return true;
    }
}

void main(){
    try{
        DerelictGL3.load();
    }catch(Exception e){
        writeln("Error loading GL3");
    }
    try{
        DerelictSDL2.load();
    }catch(Exception e){
        writeln("Error loading SDL");
    }

    App a=new App();
    a.init();
} 
```

如果 screen=SDL_SetVideoMode(w, h, bpp, flags); 则程序打印“fred”；语句被注释掉，因此 SDL 正在加载和初始化 OK。有没有人有任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T04:28:33.903

SDL 1.3（完成后作为版本 2 发布）没有真正的 SDL_SetVideoMode 函数。（文档中提到了一个兼容性存根，但 Derelict 中可能没有它。）有关更多详细信息，请参阅[迁移指南](http://wiki.libsdl.org/moin.cgi/MigrationGuide)。

# java - 在没有 MediaPlayer 的情况下在 android 上播放实时媒体流

> ID：10158958
> 
> 赞同：3
> 
> 时间：2012-04-15T01:58:24.883
> 
> 标签：java, android, android-mediaplayer, android-audiomanager

我目前正在使用 MediaPlayer 播放来自网络的实时流。问题是 MediaPlayer 缓冲区很大，它坚持在播放前缓冲大约 10 秒。 [Android - ICS 4.0 中的 MediaPlayer 缓冲区大小](https://stackoverflow.com/questions/10060165/android-mediaplayer-buffer-size-in-ics-4-0)

所以我的问题是，是否有另一种方式来播放媒体流（mp3），而不使用 MediaPlayer？也许使用不会有相同缓冲问题的 InputStream 甚至第三方媒体播放器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T06:40:01.017

有很多像 FFMpeg 这样的 3d 派对库，可以轻松处理 mp3 文件并提供更大的灵活性。我建议您使用 FFMpeg 或任何其他多媒体 SDK。

# ios - 导航返回时未调用 UINavigationController 上的 ViewDidAppear

> ID：10158960
> 
> 赞同：1
> 
> 时间：2012-04-15T02:00:05.227
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我有一个`UITabBarController`主机 5 `UINavigationControllers`（我们称它们为 N1 - N5）。每个`UINavigationControllers`都有 UI 元素，这些元素会导致 UITableViewController 被推送到导航堆栈（我`MonoTouch.Dialog` `DialogViewController`用来实现这些`UITableViewControllers`）。让我们称它们为 T1 - T5。

当我在选项卡之间导航时，该`ViewDidAppear`方法会按预期在每个 N1 - N5 上调用。但是当我在 N1 上触摸一个 UI 元素时，这会导致 T1 被推入导航堆栈，然后尝试使用后退按钮返回，N1 的`ViewDidAppear`方法不会被调用。

有趣的是，如果我“切换”到不同的选项卡（比如 N2），然后“切换回”到 N1，`ViewDidAppear`则会正常调用。即使我将 T1 推到导航堆栈上，如果我执行相同的选项卡，N1`ViewDidAppear`仍然会被调用。

N1的`MonoTouch`代码如下所示：

```
public class CalendarPage : UINavigationController
{
    private DialogViewController dvc;

    public override void ViewDidAppear (bool animated)
    {           
        // initialize controls
        var now = DateTime.Today;
        var root = new RootElement("Calendar")
        {
            from it in App.ViewModel.Items
                where it.Due != null && it.Due >= now
                orderby it.Due ascending
                group it by it.Due into g
                select new Section (((DateTime) g.Key).ToString("d")) 
                {
                    from hs in g
                        select (Element) new StringElement (((DateTime) hs.Due).ToString("d"),
                            delegate 
                            {
                                ItemPage itemPage = new ItemPage(this, hs);
                                itemPage.PushViewController();
                            })
                        { 
                            Value = hs.Name
                        }                                                    
                }
        };

        if (dvc == null)
        {
            // create and push the dialog view onto the nav stack
            dvc = new DialogViewController(UITableViewStyle.Plain, root);
            dvc.NavigationItem.HidesBackButton = true;  
            dvc.Title = NSBundle.MainBundle.LocalizedString ("Calendar", "Calendar");
            this.PushViewController(dvc, false);
        }
        else
        {
            // refresh the dialog view controller with the new root
            var oldroot = dvc.Root;
            dvc.Root = root;
            oldroot.Dispose();
            dvc.ReloadData();
        }
        base.ViewDidAppear (animated);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:29:47.600

我弄清楚发生了什么事。`DialogViewController`当在内部（在 ItemPage 中创建）上按下后退按钮时，外部`DialogViewController`（上面的“T1”）现在是第一个响应者，而不是`UINavigationController`（“N1”）。我的困惑源于我关闭了外层的后退按钮，`DialogViewController`所以我假设我一直弹出到`UINavigationController`（N1），而我仍然在`DialogViewController`（T1）。

`ViewDissapearing`我通过在内部`DialogViewController`（在本例中为 ItemPage）上创建一个事件并检查我是否弹出 - 如果是，则调用父控制器的`ViewDidAppear`方法来实现所需的行为（刷新“T1”的内容） 。

```
 actionsViewController.ViewDissapearing += (sender, e) => 
        {
            if (actionsViewController.IsMovingFromParentViewController)
                controller.ViewDidAppear(false);
        }; 
```

请注意，这段代码的有趣之处在于，实际起作用的属性是`IsMovingFromParentViewController`, NOT `IsMovingToParentViewController`（直观地说，这是您在导航返回时会设置的内容）。我想这可能是 MT.Dialog 中的一个错误，但由于反向紧凑的原因无法修复。

我希望这最终能帮助某人......

# c# - 课堂上的错误

> ID：10158961
> 
> 赞同：1
> 
> 时间：2012-04-15T02:00:18.920
> 
> 标签：c#

我是一名IT学生，大二。我们刚刚学会了使用 3 层进行编程，一层用于通过类获取数据，一层用于通过请求处理内容（所有方法都在这里），一层用于程序本身的工作。看到前两个进入类而不是表单，我不知道如何显示错误。

示例：我们需要制作一个带有网络浏览器和其他一些东西的登录系统。所以我在一个类中登录，但是如何检查错误？我不认为这是正常的，甚至不可能做 MessageBox.Show(error); 从一个班级，我只能返回东西，但我希望尽可能返回用户名/ID。

所以简而言之，报告由数据引起的错误的最佳/最被接受的方法是什么，所以来自一个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:26:48.360

您的框架级 API（例如您的层）应该使用异常来处理真正的错误，并返回值来报告非关键错误。

```
public class Login
{
    public bool AccountExists(string name) {
        bool exists;

        // do checking

        return exists;
    }

    public LoginResult Login(string name, string password) {
        // Try login
        // If successful
        return LoginResult.Success;

        // What if the user does not exist?
        return LoginResult.AccountNotFound;

        // What about an error?
        return LoginResult.Error;
    }
}

public enum LoginResult
{
    None,
    AccountNotFound,
    Error,
    Success
} 
```

在上面的示例中，您可以通过返回值报告操作的状态。对于 LoginResult，这甚至可以是一个值类型（结构），其中包含有关结果的更多信息（例如，字符串消息或其他内容）。因为这些类型的操作对非关键性的，所以这里没有必要例外。异常是昂贵的，并且并不总是需要报告错误。

现在让我们谈谈另一种类型的错误。逻辑开发人员错误。这些应该通过抛出异常来处理。以这个例子为例（假设我们有某种类型的 Account 具有 Role 属性）。

```
public class Foo
{
    public bool IsAdmin(Account account) {
        if (account == null) {
            throw new System.ArgumentNullException("You cannot pass a null account!");
        }

        return account.Role == "Admin";
    }
} 
```

作为开发者，我们知道账户不应该为空，所以我们应该检查它，如果是则抛出异常。如果曾经抛出此异常，则它是调用代码中的一个错误，应修复为不传递空值。

现在我已经给出了两个粗略的场景，这如何适用于您的问题？这些是 API。无论您的 UI 层是什么，无论是 WinForm、WPF Window、WebForm 还是其他一些 UI，UI 都只需要使用 API。API 负责报告可供 UI 使用的信息，而 UI 负责以最适合该 UI 的方式显示信息。

框架 API 层不应该负责通过 UI 向用户报告错误。他们应该只负责向可以获取结果的开发人员报告错误，并以某种方式将其连接到 UI 层。例如，您永远不会显示消息框或从框架 API 写入控制台。您将返回一些 UI 可用于显示其自己的消息的结果。

I highly recommend that you read [Framework Design Guidelines](http://search.barnesandnoble.com/Framework-Design-Guidelines/Krzysztof-Cwalina/e/9780321545619?itm=2&usri=framework%20design%20guidelines). It covers a lot of this material and is an extremely great read.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T02:06:03.613

您应该有一个验证数据对象并返回错误信息的类。然后您的前端代码可以要求此类验证数据并显示返回的任何错误消息。

```
var username = GetUserName();
var password = GetPassword();
var validationResult = new Validator().ValidateLogin(username, password);
if(validationResult.ErrorMessage != null) {
    MessageBox.Show(validationResult.ErrorMessage);
} else {
    // Do what you would have done.
} 
```

如果发生任何超出预期逻辑流的错误，它们应该抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T02:19:24.677

那么你可以使用例外。您只需抛出异常，由调用者决定如何处理异常。

```
class Login
{
  public Login()
  {

  }

  public bool CheckLogin(string userName, string password)
  {
   // Do your validation here. 
   If every thing goes fine 
     return True.
   else
     throw Exception("custom message.");
  }

}

class Input  //class which takes input.
{
  Login login = new Login();

  public void TakeInput(string username, string password)
  { 
     try
     {
        login.CheckLogin(username, password);
     }
     catch(Exception ex)
     { 
       MessageBox.show(ex.message);
     } 
  }  

} 
```

# objective-c - 如何限制 UItextfield

> ID：10158964
> 
> 赞同：0
> 
> 时间：2012-04-15T02:02:08.553
> 
> 标签：objective-c, ios4

我喜欢将三个 UItextfield 限制为只有 1 个数字，我使用此代码但它确实有效。

编码：

```
- (BOOL)textField:(UITextField *)numeroIngresa1
shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
 if (range.location >= 1)
 return NO; // return NO to not change text
 return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T02:06:52.993

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];

    NSNumber* candidateNumber;

    NSString* candidateString = [textField.text stringByReplacingCharactersInRange:range withString:string];

    range = NSMakeRange(0, [candidateString length]);

    [numberFormatter getObjectValue:&candidateNumber forString:candidateString range:&range error:nil];

    if (([candidateString length] > 0) && (candidateNumber == nil || range.length < [candidateString length])) {

        return NO;
    }
    else 
    {
        return YES;
    }
} 
```

来源：[Iphone UITextField only integer](https://stackoverflow.com/questions/2719680/iphone-uitextfield-only-integer)

# java - Java中构造函数中的多个可选参数 - 构造函数的指数数量

> ID：10158970
> 
> 赞同：2
> 
> 时间：2012-04-15T02:03:49.740
> 
> 标签：java, design-patterns, constructor

这是我遇到过几次但还没有找到令人满意的答案的事情。这似乎很愚蠢，但在谷歌搜索了一段时间后，我想不出什么好东西。

假设我有一个包含 20 个实例变量的类，每个变量都是可选的（将被初始化或不被初始化）。

现在我希望我的构造函数处理所有情况，如果有几个实例变量很好，我可以创建具有不同签名的构造函数，但这里我有 20 个，所以我需要**2^20=1,048,576 个**构造函数来处理所有案件！这似乎......不是很理想，你不同意吗？

因此，由于使用这种蛮力方法，我基本上必须构造 2^n 个构造函数，其中 n 是实例变量的数量，我想找到一种更好的方法来做到这一点。

我已经看到了这个问题的几个解决方案，但我相信它们都是基于数据的假设，但在我的情况下，这些变量中的每一个都可以随机初始化或不随机初始化，我无法在初始化之前知道这一点。

我正在寻找一些可以应用的设计模式或想法，以使我的代码更加...可维护（不用担心，我没有创建 1M+ 构造函数 :)

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T02:12:11.437

尝试建造者模式：

[http://rwhansen.blogspot.com/2007/07/theres-builder-pattern-that-joshua.html](http://rwhansen.blogspot.com/2007/07/theres-builder-pattern-that-joshua.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T02:15:25.580

将 Bean 模式与 Builder 结合起来。YourObject 在其构造过程中不会出现不一致的状态，但仍需要 20 多个集合操作，并且您可以使 YourObject 不可变（如果您愿意） - 但不是 YourObjectBuilder。

```
public class YourObject {
    private Type field1;
    private Type field2;
    private Type field3;
    ...
    YourObject ( Type field1 , Type field2 , Type field3 ... ) { }
}

public class YourObjectBuilder {
    private Type field1;
    private Type field2;
    private Type field3;
    ...

    public YourObjectBuilder() {
    }

    public YourObject make ( ) {
         return new YourObject ( field1 , field2 , field3 ... ) ;
    }

    public void setField1(Type t) {
        field1 = t;
    }

   public void setField2(Type t) {
        field2 = t;
   }

    public void setField3(Type t) {
        field3 = t;
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T02:09:00.003

```
public class YourObject {
    private Type field1;
    private Type field2;
    private Type field3;
    ...

    public YourObject() {
    }

    public void setField1(Type t) {
        field1 = t;
    }

   public void setField2(Type t) {
        field2 = t;
   }

    public void setField3(Type t) {
        field3 = t;
    }
    ...
} 
```

# linux - 建议：USB 监控编程

> ID：10158975
> 
> 赞同：0
> 
> 时间：2012-04-14T17:16:05.373
> 
> 标签：linux, usb, unix

我需要关于 Linux 中 USB 编程的建议。我必须设计一个 USB 监控程序，它会不断检查 linux cent os 的 USB 端口。一旦连接了 USB 或外部硬盘，该程序就会向特定的人发送一封电子邮件，说明 USB 的详细信息（如大小、安装位置、时间）。当 USB 断开连接时，它会再次向具有相同信息的某个人发送电子邮件。这意味着该程序还将在 syslog/messages 中写入带有程序名称的日志，以便于跟踪。

现在我想问开发这个程序的最佳方法是什么。因为我是这个领域的新手，所以我对此一无所知？我应该使用 perl、bash 脚本还是其他语言？我不知道采用什么是正确的方法，因为该程序将一直运行以检查 USB 端口。我知道一些命令，如 lsusb、fdisk（检查附加的 USB）和 df -h（获取 USB 的详细信息），但不知道如何使用我正在考虑的这些命令来实现。

还有一件事，将来我还需要为 ubuntu 和 Citrix XenServer 修改这个程序，它应该到处都是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:19:49.440

当然你可以在 Perl 中开发一个脚本来做到这一点，看看[Device::USB](http://search.cpan.org/~gwadej/Device-USB-0.35/USB.pm)模块，应该会有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:10:18.783

dmesg 已将其记录在系统日志中。如果您已经以某种方式监视系统日志（例如 syslog-ng），您可以创建一个警报，以便在 dmesg 检测到 USB 更改时向您发送电子邮件。或者您可以编写一个简单的 bash 脚本来监控系统日志文件。

对于初学者，我认为 bash 会更容易（显然 perl 会更强大）。不确定 Citrix Xenserver 是否记录 dmesg。

# c# - RestSharp 可以在不使用多部分内容类型的情况下发送二进制数据吗？

> ID：10158977
> 
> 赞同：10
> 
> 时间：2012-04-15T02:04:52.970
> 
> 标签：c#, restsharp

我一直`AddParameter`在我的 HTTP 请求中包含 XML 主体：

```
request.AddParameter(contentType, body, ParameterType.RequestBody); 
```

但是，这似乎不适用于非字符串主体。`Http.RequestBody`（出于某种原因，RestSharp是一个字符串。）我尝试使用`AddFile()`，但我找不到任何方法来避免将“文件”编码为*multipart/form*，即使我只提供了一个对象。

我一点也不反对用卑鄙的反射来解决这个问题，但我希望避免仅仅为了在 HTTP 请求中发送任意数据而修改源。

**编辑：**关于我试图发送的请求，它们看起来像这样：

```
PUT ... HTTP/1.1
Accept: application/vnd...
Authorization: Basic ...
Content-Type: application/octet-stream

<arbitrary bytes> 
```

理想情况下，我想使用相同的调用来发送不同的内容类型：

```
PUT ... HTTP/1.1
Accept: application/vnd...
Authorization: Basic ...
Content-Type: application/vnd...

<other arbitrary bytes> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-16T23:10:06.860

在最新版本中进行了一些修改，允许使用单个文件而无需创建多部分表单请求。这是一个显示和示例的要点：

[https://gist.github.com/hallem/5faaa6bebde50641e928](https://gist.github.com/hallem/5faaa6bebde50641e928)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T14:56:31.817

我遇到了同样的问题。我必须只上传一个文件并使用特定的内容类型与 REST 接口进行通信。您可以将 Http.RequestBody 修改为 byte[] （以及所有依赖项），但我认为这样更容易：

我修改了 RestSharp，使其仅在文件数 > 1 或文件数 = 1 并且还有正文或其他发布数据集时才使用多部分编码。

您必须从第 288 行修改 Http.cs

```
if(HasFiles) 
```

至

```
if(Files.Count > 1 || (Files.Count == 1 && (HasBody || Parameters.Any()))) 
```

对于 Http.Sync.cs 修改 PreparePostData 从

```
private void PreparePostData(HttpWebRequest webRequest)
{
    if (HasFiles)
    {
        webRequest.ContentType = GetMultipartFormContentType();
        using (var requestStream = webRequest.GetRequestStream())
        {
            WriteMultipartFormData(requestStream);
        }
    }

    PreparePostBody(webRequest);
} 
```

至

```
private void PreparePostData(HttpWebRequest webRequest)
{
    // Multiple Files or 1 file and body and / or parameters
    if (Files.Count > 1 || (Files.Count == 1 && (HasBody || Parameters.Any())))
    {
        webRequest.ContentType = GetMultipartFormContentType();
        using (var requestStream = webRequest.GetRequestStream())
        {
            WriteMultipartFormData(requestStream);
        }
    }
    else if (Files.Count == 1)
    {
        using (var requestStream = webRequest.GetRequestStream())
        {
            Files.Single().Writer(requestStream);
        }
    }

    PreparePostBody(webRequest);
} 
```

如果你使用异步版本，你必须在Http.Async.cs中修改类似上面的代码。

现在你可以像这样使用 RestSharp

```
IRestRequest request = new RestRequest("urlpath", Method.PUT);
request.AddHeader("Content-Type", "application/zip");
request.AddFile("Testfile", "C:\\File.zip");

Client.Execute(request); 
```

AddFile 还提供了用于设置直接 byte[] 数据而不是路径的重载。希望有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-19T18:50:13.510

在撰写本文时最新版本的 RestSharp（104 版）中，修改需要在 Http.Sync.cs 方法 PreparePostData 中，应为：

```
 private void PreparePostData(HttpWebRequest webRequest)
    {

        // Multiple Files or 1 file and body and / or parameters
        if (Files.Count > 1 || (Files.Count == 1 && (HasBody || Parameters.Count>0)))
        {
            webRequest.ContentType = GetMultipartFormContentType();
            using (var requestStream = webRequest.GetRequestStream())
            {
                WriteMultipartFormData(requestStream);
            }
        }
        else if (Files.Count == 1)
        {
            using (var requestStream = webRequest.GetRequestStream())
            {
                Files[0].Writer(requestStream);
            }
        }
        PreparePostBody(webRequest);
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-09T14:44:55.550

我有同样的问题，但我不喜欢分叉代码，我不喜欢迈克尔建议的替代方案，因为文档说“RequestBody：由 AddBody() 使用（不建议直接使用）”。

相反，我用自己的替换了 RestClient.HttpFactory：

```
RestClient client = GetClient();

var bytes = await GetBytes();
client.HttpFactory = new FactoryWithContent { GetBytes = () => new Bytes(bytes, "application/zip") };

var request = new RestRequest();
return await client.ExecutePostTaskAsync(request); 
```

Bytes 和 FactoryWithContent 如下所示：

```
public class Bytes
{
    public Bytes(byte[] value, string type)
    {
        Value = value;
        Type = type;
    }

    public byte[] Value { get; private set; }
    public string Type { get; private set; }
}

public class FactoryWithContent : IHttpFactory
{
    public IHttp Create()
    {
        var http = new Http();

        var getBytes = GetBytes;
        if (getBytes != null)
        {
            var bs = getBytes();
            http.RequestBodyBytes = bs.Value;
            http.RequestContentType = bs.Type;
        }

        return http;
    }

    public Func<Bytes> GetBytes { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-24T10:03:19.960

我遇到过同样的问题。结果发现 RestSharp 的行为有点奇怪。

不工作：

```
request.Parameters.Add(new Parameter() {
  ContentType = "application/x-www-form-urlencoded",
  Type = ParameterType.RequestBody,
  Value = bytes
}); 
```

工作（添加内容类型作为名称）：

```
request.Parameters.Add(new Parameter() {
  Name = "application/x-www-form-urlencoded", // This is the 'funny' part
  ContentType = "application/x-www-form-urlencoded",
  Type = ParameterType.RequestBody,
  Value = bytes
}); 
```

我根据这里的评论尝试了这个解决方案：[https ://github.com/restsharp/RestSharp/issues/901](https://github.com/restsharp/RestSharp/issues/901)

其中指出*“...名称值将用作 Content-Type 标头，而 contentType 值将被忽略。”*

您也不必将该值添加为 Content-Type 参数，但我担心未来的错误修复可能会改变行为，然后需要使用 Content-Type 而不是名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T18:55:20.670

RequestStreamCallback 方法也需要修改 Http.Async.cs。实际上，我正在努力将此修复程序放入 repo 并发布到 Nuget，因为我现在正在帮助维护该项目。这是为此创建的问题的链接：[https ://github.com/restsharp/RestSharp/issues/583](https://github.com/restsharp/RestSharp/issues/583)

# c++ - 重载 << 运算符打印地址

> ID：10158982
> 
> 赞同：-3
> 
> 时间：2012-04-15T02:06:13.660
> 
> 标签：c++, debugging, console, operator-overloading, ostream

**对反对者：**我知道这是一个结构不佳的问题。如果您向下滚动到答案，您会发现我发现了问题的根源。虽然这个问题本身可能没有帮助，但我希望答案能帮助遇到类似运算符重载问题的人。问题是它是什么；我无法确定任何可以使这个问题变得更好的编辑或修订。因此，如果您要投反对票，请同时添加建设性评论。谢谢你。

* * *

我正在运行以下代码

```
myObject o = myObject();
cout << o << endl; 
```

我的 ( `friend`) << 运算符在这里重载：

```
ostream& operator << (ostream& s, myObject o)
{
    s << doStuff(o, s) << endl;
    return s;
} 
```

预期输出：

```
object contents 
```

出于某种原因，实际输出包括内存地址：

```
5452ED48object contents 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:33:18.140

我们无法理解你想做什么......我理解这样的事情：

```
#include <iostream>
using namespace std;

class obj{

    friend ostream&operator<<(ostream &out, const obj o);
public:
    obj(int a);
    int change_data();
private: 
    int s;
    int d;

};

obj::obj(int a)
{
    s = a;
    d = s;
}

int obj::change_data()
{
    return 99;
}

ostream&operator<<(ostream &out, const obj o){
    out << o.s;
    out << " ";
    out << o.d;
}

int main(int argc, char **argv) {
    obj some(1);
    cout << some;
    return 0;
} 
```

输出：

> 1 1

在您看来，您似乎必须了解通过引用传递值，因为当您使用“<<”运算符重载时，您不会返回任何值，而是在参数中返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:17:24.317

很抱歉没有提供足够的细节。原来我应该这样做：

```
doStuff(o, s);
return s; 
```

显然我将所需的输出附加到`s`已经包含地址的 。

# asp-classic - 有没有更简单的方法来做经典的 ASP“相对路径”？

> ID：10158986
> 
> 赞同：4
> 
> 时间：2012-04-15T02:07:52.113
> 
> 标签：asp-classic

现在，我遇到了麻烦。首先我有一个页面，我们称之为“http://blah.com/login”。

这显然是“index.asp”

Main.asp 一行：

```
<!--#include file="resource/menu.asp"--> 
```

页面顶部包括我的菜单所需的所有内容......所以：

资源/menu.htm 的一部分：

```
<div id="colortab" class="ddcolortabs">
<ul>
<li><a href="main.asp" title="Main" rel="dropmain"><span>Main</span></a></li> 
```

...

```
</ul>
</div>
<!--Main drop down menu -->
<div id="dropmain" class="dropmenudiv_a">
<a href="main/announcements.asp">Announcements</a>
<a href="main/contacts.asp">Contact Information</a>
<a href="main/MeetingPlans.asp">Meeting Plan</a>
<a href="main/photos.asp">Photo Gallery</a>
<a href="main/events.asp">Upcoming Events</a>
</div> 
```

假设我点击“公告”（http://blah.com/login/main/announcements.asp）链接......现在我在公告页面！但是等等，我包含了相同的菜单文件。猜猜会发生什么：我被发送到“http://blah.com/login/main/main/announcements.asp 哪个不存在...

我的解决方案：为任何子页面创建一个 menu_sub.asp 包含。但是等一下……这可以工作，但它真的很乱……我该怎么做才能只使用一个主要的“menu.asp”而不是“menu_sub.asp”？使用“/main/announcements.asp”不是一个选项，因为这是一个 Web 应用程序，它将位于每个服务器的不同目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:24:54.790

将此函数添加到您的 menu.asp：

```
 Function GetApplicationPath()
        GetApplicationPath = Mid(Request.ServerVariables("APPL_MD_PATH"), Len(Request.ServerVariables("INSTANCE_META_PATH")) + 6) & "/"
    End Function

    Dim prefix: prefix = GetApplicationPath() 
```

现在使用以下结构在 menu.asp 中构建您的引用：

```
<a href="<%=prefix%>main/announcements.asp">Announcements</a> 
```

这将使这些引用成为绝对引用，但它们会随着网站安装了您的 ASP 应用程序的任何虚拟文件夹路径而适当变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T14:13:52.590

没有灵丹妙药修复。这是我将如何做到这一点。

1.  创建一个单独的包含文件，该文件包含 DIM 并初始化名为 info.asp 的全局变量
2.  在 info.asp 中 DIM 一个名为 strRelativePath 的变量并将其初始化为 ""
3.  在 menu.asp 上方的每个 asp 页面的顶部包含 info.asp 包含
4.  修改 menu.asp 并在所有 url 中包含 <%=strRelativePath%>
5.  在每个 asp 页面中根据需要设置 strRelativePath：

```
 <!--#include file="includes/info.asp"-->
strRelativePath = "Login/"
<!--#include file="resource/menu.asp"--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-28T09:15:59.733

[这里](https://stackoverflow.com/questions/888147/get-virtual-path-for-a-full-path-in-asp-classic)有一个类似的问题，其中评分最高的答案表明您可以使用以下函数找到根：

```
Function ToRootedVirtual(relativePath)
    Dim applicationMetaPath : applicationMetaPath = Request.ServerVariables("APPL_MD_PATH")
    Dim instanceMetaPath : instanceMetaPath = Request.ServerVariables("INSTANCE_META_PATH")
    Dim rootPath : rootPath = Mid(applicationMetaPath, Len(instanceMetaPath) + Len("/ROOT/"))
    ToRootedVirtual = rootPath + relativePath
End Function 
```

然后你可以调用它：

```
ToRootedVirtual("/") 
```

或者

```
ToRootedVirtual("/index.asp") 
```

等从服务器返回根。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T06:43:46.637

您可以使用`Virtual`而不是`File`因为`Virtual`接受来自根目录的绝对路径，而不是相对的`File`.

像这样：

```
 <!--#INCLUDE VIRTUAL="/resource/menu.asp"--> 
```

此外，请确保您的 IIS 设置允许包含，有关详细信息，请参阅此链接：http: [//tech.mikeal.com/blog1.php/server-side-includes-for-html-in-iis7](http://tech.mikeal.com/blog1.php/server-side-includes-for-html-in-iis7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T18:23:49.060

**这可以通过 HTML 基本标记来修复：**

*在每一页的开头添加这个标签：*

```
<base href="http://blah.com/login"> 
```

# arrays - Actionscript 3.0 获取一个类的所有实例？

> ID：10158988
> 
> 赞同：-1
> 
> 时间：2012-04-15T02:08:10.720
> 
> 标签：arrays, flash, actionscript, for-loop, instance

我在一堂课上得到了大量的电影剪辑。除了这个之外，有没有更有效的方法将函数应用于类中的每个实例？

```
var textArray:Array = [
    interludes.interludeIntro.interludeBegin1,
    interludes.interludeIntro.interludeBegin2,
    interludes.interludeIntro.interludeBegin3,
    interludes.interludeIntro.interludeBegin4,
    interludes.interludeIntro.interludeBegin5,
    interludes.interludeIntro.interludeBegin6,
    interludes.interludeIntro.interludeBegin7, 
    //... ... ...  
    interludes.interludeIntro.interludeBegin15
];                                     
for each (var interludeText:MovieClip in interludeBeginText)
{
   interludeText.alpha = 0 //clear all text first
} 
```

同样由于某种原因，这不起作用：

```
interludes.interludeIntro.alpha = 0; 
```

即使我稍后尝试使特定实例可见，它也会永久使该类不可见：

```
interludes.interludeIntro.interludeBegin1.alpha = 1; 
```

我不知道为什么上述方法不起作用。我想将 interludeIntro 类中的每个实例变为不可见，但我想稍后将特定实例变为可见。

（顺便说一句，我不知道如何在这个网站上插入代码，按“代码”没有任何作用，所以请原谅格式错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:30:56.530

我不太确定您在问什么，但可能有用的是，在 ActionScript 中您可以按名称引用属性，例如`myObject["someProperty"]`.

使用它，如果属性遵循某种命名方案，您可以迭代它们，例如：

```
for (var i:int = 1; i <= 15; i ++)
    interludes.interludeIntro["interludeBegin" + i].alpha = 0; 
```

遍历并将它们的`interludes.interludeIntro.interludeBegin1`属性设置为.`...15``alpha``0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:25:46.050

当你这样做时：

```
interludes.interludeIntro.alpha = 0; 
```

您将影片剪辑**及其**所有子项变为不可见。

所以稍后当你这样做时：

```
 interludes.interludeIntro.interludeBegin1.alpha = 1; 
```

您使影片剪辑可见，但由于其父级仍然不可见，因此您什么也看不到。解决方案是循环播放影片剪辑并使它们中的每一个不可见/可见。

```
// Keep the parent visible at all time
interludes.interludeIntro.alpha = 1;

for (var i:int = 0; i < textArray.length; i++) {
    textArray[i].alpha = 0;
}

// Now this will work:
interludes.interludeIntro.interludeBegin1.alpha = 1; 
```

# python - 当我将模型实例保存（）到 MongoDB 数据库时，为什么 Python 会引发异常？

> ID：10158989
> 
> 赞同：2
> 
> 时间：2012-04-15T02:08:18.157
> 
> 标签：python, django, mongodb, django-nonrel

我一直在使用[本教程](http://django-mongodb.org/tutorial.html)来试验并使用 MongoDB 启动我的第一个 Django 应用程序。在教程中，他们构建了一个简单的 Post 类，如下所示：

```
from django.db import models
from djangotoolbox.fields import ListField

class Post(models.Model):
    title = models.CharField()
    text = models.TextField()
    tags = ListField()
    comments = ListField() 
```

很简单。然后他们引导我构建一个 Post 对象：

```
post = Post.objects.create(
...     title='Hello MongoDB!',
...     text='Just wanted to drop a note from Django. Cya!',
...     tags=['mongodb', 'django'],
...     comments=['comment 1', 'comment 2']
... ) 
```

它立即发送我在[这里复制](http://dpaste.com/hold/731874/)的相当长的堆栈跟踪。最后的错误是：

```
TypeError: encoder expected a mapping type but got: {<django.db.models.fields.CharField object at 0x2fc5f10>: 'Hello MongoDB!', <djangotoolbox.fields.ListField object at 0x2fccd10>: ['comment 1', 'comment 2'], '_id': ObjectId('4f8a22f8db0ee4386f000000'), <djangotoolbox.fields.ListField object at 0x2fcc750>: ['django', 'mongodb'], <django.db.models.fields.TextField object at 0x2fcc290>: 'text test'} 
```

它似乎期待完全不同的数据类型，我不知道该去哪里。谷歌搜索没有发现任何用处。任何提示或解决方案都将是一个福音。

谢谢，

典范RG

编辑：我已经意识到，`Post.objects.create()`当我正确地按照教程创建初始对象时，它实际上会出错。因此我有同样的问题，但没有 save() 功能。

编辑：键入`pip freeze`以在我的虚拟环境中显示当前安装的 Python 包给了我：

```
Django==1.3.1
django-mongodb-engine==0.4.0
djangotoolbox==0.9.2
pymongo==2.1.1
wsgiref==0.1.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:57:35.047

我只是使用教程中描述的确切设置进行了尝试，但无法重现：-(

您确定您完全按照安装说明进行操作吗？特别是，您是否使用了完全相同的存储库？

您使用的是哪个版本的 PyMongo？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:37:18.160

save() 通常在对模型对象进行更改或创建模型对象时使用。这个 url 应该可以帮助您进行。[https://docs.djangoproject.com/en/dev/topics/db/queries/](https://docs.djangoproject.com/en/dev/topics/db/queries/)

# ruby-on-rails - 测试我为 Rails 教程应用程序编写的新用户锁定功能

> ID：10158992
> 
> 赞同：2
> 
> 时间：2012-04-15T02:08:47.397
> 
> 标签：ruby-on-rails, railstutorial.org

我已经完成了 Ruby on Rails 教程的第 9 章，并添加了我自己的功能来在用户首次注册时锁定用户，这样管理员必须在新用户之前进入并批准（“解锁”）他们的 id用户有权访问该站点。我添加了一个 :locked 布尔属性，其工作方式与 User 对象的 :admin 属性类似。我现在已经全部工作了，但是我无法为它编写一个简单的测试。我在 user_pages_spec.rb 中添加了以下测试，就在层次结构“分页”-“作为管理员用户”下：

```
describe "as an admin user to unlock new users" do
    let(:admin) { FactoryGirl.create(:admin) }
    let(:locked_user) { FactoryGirl.create(:locked) }
    before do
      sign_in admin
      visit users_path
    end

    it { should have_link('unlock', href: user_path(locked_user)) }
    it { should_not have_link('unlock', href: user_path(admin)) }
end 
```

并支持创建“锁定”用户，将其添加到 factory.rb：

```
factory :locked do
    locked true
end 
```

我可以通过 Firefox 手动确认解锁链接是否显示，但我仍然遇到以下故障：

```
 1) User pages index pagination as an admin user to unlock new users 
     Failure/Error: it { should have_link('unlock', href: user_path(locked_user)) }
       expected link "unlock" to return something
     # ./spec/requests/user_pages_spec.rb:64:in `block (5 levels) in <top (required)>' 
```

我很想知道a）为什么会失败:)，还有b）如何调试这样的问题。我如何判断测试实际上“看到”了什么？正如另一个 stackoverflow 用户所建议的那样，我尝试使用 rails-pry 解决不同的问题，但在这种情况下，我发现它的用途有限。

任何想法或建议将不胜感激。提前致谢！

-马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T03:01:14.177

```
 it { should have_link('unlock', href: user_path(locked_user)) } 
```

乍一看，您需要使用类似`response.body.should have...`or的东西`page.should.have...`。

也`render_views`可能需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:45:40.037

你应该先写测试；）

以您的测试为开始，我一直在努力完成整个过程。我已经到了和你一样的错误的地步。使用 pry-rails gem 并将 binding.pry 放入测试中：

```
it { binding.pry ; should have_link('unlock', href: user_path(locked_user)) } 
```

（在搞砸了很多之后）我从测试复制并粘贴到命令提示符：

```
should have_link('unlock', href: user_path(locked_user)) 
```

并得到错误。将其更改为：

```
should have_link('unlock', href: user_path(User.first)) 
```

作品。在提示符处输入locked_user 会显示用户记录。接下来我输入了 page.body，它显示我的锁定用户甚至没有出现在页面上。（通过输入 User.count 进行确认，发现它是 33，所以它在第 2 页上。）您可能没有这个问题，具体取决于您的测试在规范中的嵌入程度。我意识到我不小心将它嵌入到另一个规范中。当我将它移出（User.count == 2）时，它仍然无法正常工作。我的locked_user 仍然不在页面上。User.all 也不包括用户。Hartl 在第 10 章中提到，

> 这使用了让！（阅读“let bang”）方法代替 let；原因是 let 变量是惰性的，这意味着它们只有在被引用时才会出现。

改变让让！它奏效了。（User.count == 3，这次包括locked_user。）这里是测试块。

```
describe "as an admin user" do
  let(:admin) { FactoryGirl.create(:admin) }
  before do
    sign_in admin
    visit users_path
  end

...

  describe "other users should have an unlock link" do  ## changed the description
    let!(:locked_user) { FactoryGirl.create(:locked) }
    before { visit users_path }

    it { should have_link('unlock', href: user_path(locked_user)) }
  end
end 
```

我的代码还没有解锁任何东西（我需要对此进行另一次测试......）但链接会在它应该出现的时候出现。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T04:57:49.000

你可能想要：

```
let!(:locked_user) { FactoryGirl.create(:locked) } 
```

请注意，我使用`let!()`的是`let()`. 请参阅[rspec 文档](https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/let-and-let)`let()`以获取有关vs的更多信息`let!()`以及此处为何重要。

# javascript - 如何在运行时在javascript中将数组保存在对象中

> ID：10158996
> 
> 赞同：1
> 
> 时间：2012-04-15T02:10:39.257
> 
> 标签：javascript, arrays, object

我想通过循环在运行时将数组保存在对象中。

例如，我在一个数组中输入一个输入，`inp=[2, 7, 20, 15, 19]`我想将它保存在一个`obj={0:2, 1:7, 2:20, 3:15, 4:19}`. 但是，在运行时，我有一个

```
 for(i=0;i<inp.length;i++) 
    { save each element of array into the respective object element } 
```

问题是我必须保存不同长度的数组，这些数组来自用户的输入。

之后我还在对对象进行排序并在我的代码中返回另一个数组中的索引。我只被困在如何在运行时将数组保存在对象中。我搜索了很多开始的线索，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:14:13.083

> 数组已经是一个对象

如果你做一些实验，你会发现：

```
typeof([]) //<--retruns "object" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T02:16:27.730

*   自动分配：（*信用：[我不是](https://stackoverflow.com/users/1106925/am-not-i-am)*）

    ```
    var obj = inp.slice(); 
    ```

*   手动赋值：

    ```
    var obj = {};
    for(var i=0, n=inp.length; i<n; i++) 
       obj[i]=inp[i]; 
    ```

* * *

尽管 Array 在 JavaScript 中从技术上讲是 Object 的子类，但在从 Array 到 Object 的过程中，唯一真正发生的事情是您丢失了在数组创建过程中创建的本机方法（`indexOf`、`concat`、`reverse`等）。建造。