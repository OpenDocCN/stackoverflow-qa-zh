# StackOverflow 问答 11864000-11864999

# c# - 为什么在 IE 中，上传的 PNG 图片被识别为 PJPEG 内容类型（asp.net mvc 3）？

> ID：11864005
> 
> 赞同：0
> 
> 时间：2012-08-08T11:57:14.110
> 
> 标签：c#, asp.net, asp.net-mvc-3

我现在遇到了 IE9 中的奇怪行为。

我有一行用 C# 为 asp.net（使用 mvc 3）应用程序编写的简单代码：

```
 string ct = image.ContentType;
   // image is `HttpPostedFileBase` type 
```

当我在 IE9 中调试时，当我选择*png*文件时`ct`返回。我**没有**将该文件从/重命名为.`image/pjpeg`***`1.jpg``1.jpeg``1.png`***

 ***如果我使用 Firefox/Chrome 作为浏览器进行调试，那么`ct = "image/png"`（这是正确的）

为什么 PNG 文件被视为`image/pjpeg`内容类型？

如何解决这个问题？

或者它是 IE 中的一个错误？***

# algorithm - 为什么快速排序称为尾递归算法？

> ID：11864006
> 
> 赞同：6
> 
> 时间：2012-08-08T11:57:15.007
> 
> 标签：algorithm, complexity-theory, time-complexity, quicksort, tail-recursion

我知道[这个 SO answer 中写](https://stackoverflow.com/questions/33923/what-is-tail-recursion/37010#37010)的尾递归算法是什么。但是，我正在浏览[麻省理工学院的快速排序算法视频，](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/video-lectures/lecture-4-quicksort-randomized-algorithms/)在 18:30 秒，教授说这是尾递归算法。我无法连接这是如何尾递归的。我们没有在递归的任何步骤进行计算，还是我们？你能解释一下为什么这被引用为尾递归算法的例子吗？请在我知道什么是递归算法的前提下回答。我不清楚的部分是为什么它被称为*尾*递归？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T12:25:23.830

尾递归不是逐步计算。它是关于“可以在不构建调用堆栈的情况下评估递归”。什么是[尾递归？](https://stackoverflow.com/questions/33923/what-is-tail-recursion/37010#37010)是这种情况的一个特例。如果你更深入地看这个例子，你会发现

```
def recsum(x):
 if x==1:
  return x
 else:
  return x+recsum(x-1) 
```

1）要成功运行上述代码，需要构建调用栈。但，

```
def tailrecsum(x,running_total=0):
  if x==0:
    return running_total
  else:
    return tailrecsum(x-1,running_total+x) 
```

2）运行上面的代码，由于running_total，你不需要构建调用栈。只需为“原始调用”和递归构建调用堆栈，无需构建调用堆栈，因为评估此函数所需的状态存储在 running_total 中。

而且，关于快速排序，我认为教授可能意味着快速排序可以通过“使用”尾部回避来优化。对于 qsort() 的两个分支部分，我们可以在具有更高项目的一侧（基于枢轴位置）使用尾递归。

![在此处输入图像描述](../Images/abcd8f3686daa60b949455bb8f6cd45b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T12:25:45.957

查看[Quicksort](http://en.wikipedia.org/wiki/Quicksort)的 wiki 页面。有一个尾递归的版本

```
 function quicksort(array, 'left', 'right')

  // If the list has 2 or more items
  if 'left' < 'right'

      // See "Choice of pivot" section below for possible choices
      choose any 'pivotIndex' such that 'left' ≤ 'pivotIndex' ≤ 'right'

      // Get lists of bigger and smaller items and final position of pivot
      'pivotNewIndex' := partition(array, 'left', 'right', 'pivotIndex')

      // Recursively sort elements smaller than the pivot
      quicksort(array, 'left', 'pivotNewIndex' - 1)

      // Recursively sort elements at least as big as the pivot
      quicksort(array, 'pivotNewIndex' + 1, 'right') 
```

根据[尾递归](http://en.wikipedia.org/wiki/Tail_recursion)的定义，最后一个方法调用`quicksort`是它自己，也就是尾递归。但是其他一些实现不是尾递归的。

```
 quicksort(left) + pivot + quicksort(right) 
```

因为最后的**动作**是`quicksort``sorted_left + pivot + sorted_right`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:02:11.087

递归函数的第一步是分区。然后，作为最后一步，您在两个分区上调用递归函数。

来自维基百科：

> 在计算机科学中，尾调用是在另一个过程中作为其最终动作发生的子例程调用。它可能会产生一个返回值，然后由调用过程立即返回。

# rest - Jersey RestFul：如何防止每个用户一个会话

> ID：11864007
> 
> 赞同：3
> 
> 时间：2012-08-08T11:57:23.907
> 
> 标签：rest, servlets, jersey

**我正在使用 RestFul Web Services 。**

我的问题是，为什么框架为每个服务创建多个会话。

**这是我的服务班**

```
@Path("/balances")
public class HelloService {
    @Context
    HttpServletRequest req1;
    @Context
    HttpServletRequest req2;

    public String sayPlainTextHello(String account) {
    HttpSession session1 = req1.getSession(true);
    HttpSession session2 = req2.getSession(true);
    System.out.println("First Session id" + session1.getId());
    System.out.println("second Session id" + session2.getId());
    return "";
    }

} 
```

**上面的输出是**

```
First Session id8D8DEF5AC8D1DEDC59F20AE875EE0B70
second Session id8D8DEF5AC8D1DEDC59F20AE875EE0B70 
```

**这是我的另一个服务类**

```
@Path("/hais")
public class HaiService {
    @Context
    HttpServletRequest req3;
    @Context
    HttpServletRequest req4;
    public String sayPlainTextHello(String account) {
    HttpSession session3 = req3.getSession(true);
        HttpSession session4 = req4.getSession(true);
        System.out.println("For haiiiiiiiiiiis First session id" + session3.getId());
        System.out.println("For haiiiiiiiiiiis  Second session id" + session4.getId());
        return "Testing the hai Service";
    }

} 
```

**上面的输出是**

```
For haiiiiiiiiiiis First session id6DC315D6B833BC16B3EE13C5810B2810
For haiiiiiiiiiiis  Second session id6DC315D6B833BC16B3EE13C5810B2810 
```

**这两个服务类都是在 Single Jersey 客户端中调用的**

**客户端程序是**

```
public static void main(String[] args) {
        try {

            WebResource webResource = client
                .resource("http://localhost:8080/Tes/ajax/balances/");

            WebResource webResource2 = client
            .resource("http://localhost:8080/Tes/ajax/hais/"); 
```

**如您所见，它为每个服务类创建不同的会话标识。**

如果我在第二个服务类中的会话创建过程中提到 false，它会使用 session.getId(); 处理空指针异常；

```
HttpSession session1 = req1.getSession(false);  
HttpSession session2 = req2.getSession(false); 
```

**或者**

```
HttpSession session1 = req1.getSession();  
HttpSession session2 = req2.getSession(); 
```

# django - django grappelli 管理面板菜单

> ID：11864008
> 
> 赞同：0
> 
> 时间：2012-08-08T11:57:28.837
> 
> 标签：django, django-admin, django-grappelli

[我已经从这里](https://github.com/sehmaschine/django-grappelli/)集成了“django-grappelli” 。这个插件改变了我的仪表板和所有的管理设计，但它有没有办法在顶部添加管理面板菜单。我已经检查了 django 管理工具，但 grappelli 可以使用管理工具，但没有任何好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:03:37.607

如果你想在顶部有一个菜单，django-grappelli 目前不支持。从[grappelli 文档](http://django-grappelli.readthedocs.org/en/latest/dashboard_setup.html#dashboard-setup)中：

> **笔记**
> 
> grappelli.dashboard 是 Django 管理工具的简化版本：Grappelli 不提供书签、菜单和自定义 App-Index。

# matlab - matlab：归一化距离图

> ID：11864010
> 
> 赞同：1
> 
> 时间：2012-08-08T11:57:34.600
> 
> 标签：matlab

我正在尝试采用位置网格，然后计算每个像素的归一化距离。我不确定这是否是正确的方法：

```
clear all;
im = imread('test1.png');                   % read in the image
im = im(:,:,1);                                %vectorize image

n = size(im,1);   % No of grids in the X-Y plane

xp(1:n)=1:1:n; % Y-coordinates of the plane where we are interested
yp(1:n)=1:1:n;% X-coordinates of the plane where we are interested

Y(1:n,1:n)=0; % This array is for 1-d to 2-d conversion of coordinates
X(1:n,1:n)=0;

for i=1:n
    Y(i,:)=yp(i); % all y-coordinates value in 2-d form
end
for i=1:n
    X(:,i)=xp(i);% all x-coordinates value in 2-d form
end

Z = zeros(size(X)); % Z dimension is appended to 0

pos = [X(:),Y(:),Z(:)];        %position co-ordinates for x y z dimensions

N = size(pos,1);               % size of position matrix
v = cell(N,1);                 %define cell for storage of x-y plane direction vectors
for j = 1:N
    for i = 1:N
        vecdir(i,:) = pos(i,:) - pos(j,:);               %direction of vectors between each point in the x-y plane
        dist(i,:) = pdist2(pos(i,:),pos(j,:));           %distance between each point in the x-y plane
        norm(i,:) = vecdir(i,:)./(dist(i,:)).^2;         %normalised distance between each point in the x-y plane
    end
    v{j} = vecdir;
    d{j} = dist;
    r{j} = norm;                                         %store normalised distances into a cell array

end

R = cellfun(@isnan,r,'Un',0);
for ii = 1:length(r)
r{ii}(R{ii}) =0;
end 
```

如果我在 3x3 图像（大小（im））中获取第一个像素，我会得到到所有其他像素（以 xyz 位置格式）的归一化距离为：

```
>> r{1}

ans =

         0         0         0
         0    1.0000         0
         0    0.5000         0
    1.0000         0         0
    0.5000    0.5000         0
    0.2000    0.4000         0
    0.5000         0         0
    0.4000    0.2000         0
    0.2500    0.2500         0 
```

我只是想知道我是否以正确的方式这样做（现阶段不太关心效率）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:06:52.610

不是问题的答案，而是对代码的评论：

`xp`、`yp`和`X`的整个初始化`Y`可以使用[meshgrid](http://www.mathworks.nl/help/techdoc/ref/meshgrid.html)更轻松地完成：

```
xp=1:n;
yp=xp;
[X,Y]=meshgrid(xp,yp); 
```

关于问题本身：

```
vecdir(i,:) = pos(i,:) - pos(j,:);               %direction of vectors between each point in the x-y plane
dist(i,:) = pdist2(pos(i,:),pos(j,:));           %distance between each point in the x-y plane
norm(i,:) = vecdir(i,:)./(dist(i,:)).^2;         %normalised distance between each point in the x-y plane 
```

我不会使用“规范”作为变量名，因为它也是一个[函数](http://www.mathworks.nl/help/techdoc/ref/norm.html)

`vecdir`是正确的; `dist`也，但本质上，它应该与`norm(vecdir(i,:),2)`（函数`norm()`，而不是你的变量！）

应用这个产量：

```
vecdir(i,:) = pos(i,:) - pos(j,:);
normvec = vecdir(i,:)./norm(vecdir(i,:),2); 
```

这是 imo[你通常如何规范化 vector](http://en.wikipedia.org/wiki/Unit_vector)。当然，你得到了正确的结果，但`pdist2`由于你已经有了距离向量，所以不需要使用，你只需要对其进行归一化。

# sql - SQL Server：表值函数不适用于子查询

> ID：11864011
> 
> 赞同：2
> 
> 时间：2012-08-08T11:57:35.550
> 
> 标签：sql, sql-server-2005, subquery, user-defined-functions

我有一个由我创建的 SQL Server 表值函数我在下面粘贴了创建脚本

```
CREATE FUNCTION [dbo].[getTableFromString]
(       
    @String AS nvarchar(max)

)
RETURNS @ReturnTable TABLE ( StringValues nvarchar(10)  )   
AS begin 

    if (SELECT CHARINDEX(',', @String)) = 0
        begin
                insert into @ReturnTable (StringValues) values (subString(@String,1,len(@String)));
        end 
    else
        begin 
            while (SELECT CHARINDEX(',', @String)) > 0
            begin 
                insert into @ReturnTable (StringValues) values (subString(@String,1,CHARINDEX(',', @String)-1));
                set @String  = subString(@String,CHARINDEX(',', @String)+1,len(@String));

                if (SELECT CHARINDEX(',', @String)) = 0
                begin
                        insert into @ReturnTable (StringValues) values (subString(@String,1,len(@String)));
                end         
            end 
        end

    return ;
end 
```

我正在使用这个功能，如下所示

```
Select sum(NetSales)
from vwxsalesall
where Company = 'rs'
and storecode = (select cPrimaryStockRoomCode from CompanyMaster.CompanyProfileDetail where cCompanyNo = 'rs' and cSecondaryStockRoomCode = 'R01B')
and trandate >= '2012-01-01'
and trandate <= '2012-01-31'
and ( 
        brand in (  
                    select StringValues from  dbo.getTableFromString(
                                                                    select vIncludedBrandCodes
                                                                    from StockRoomTargetData.MonthlyTarget 
                                                                    where cCompanyNo = 'rs' 
                                                                    and cSecondaryStockRoomCode = 'R01B'
                                                                    and nYear = 2012 
                                                                    and nMonth = 8
                                                                    )  
                 ) 
    ) 
```

不幸的是我收到了这个错误

> 消息 156，级别 15，状态 1，第 10 行
> 关键字“选择”附近的语法不正确。
> 消息 102，级别 15，状态 1，第 16 行
> ')' 附近的语法不正确。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:12:09.587

例如，您需要在子查询周围添加另一组括号

```
select StringValues from  dbo.getTableFromString(( { your-subquery }))

                                                 ^                  ^
                                                 (parenthesis added) 
```

第一组括号在语法上属于 TVF 调用，第二组表示子查询。

现在您的查询：

```
Select sum(NetSales)
from vwxsalesall
where Company = 'rs'
and storecode = (select cPrimaryStockRoomCode from CompanyMaster.CompanyProfileDetail where cCompanyNo = 'rs' and cSecondaryStockRoomCode = 'R01B')
and trandate >= '2012-01-01'
and trandate <= '2012-01-31'
and ( 
        brand in (  
                    select StringValues from  dbo.getTableFromString((
                                                                    select vIncludedBrandCodes
                                                                    from StockRoomTargetData.MonthlyTarget 
                                                                    where cCompanyNo = 'rs' 
                                                                    and cSecondaryStockRoomCode = 'R01B'
                                                                    and nYear = 2012 
                                                                    and nMonth = 8
                                                                    )) 
                 ) 
    ) 
```

# php - 具有自定义条件的购物车规则？

> ID：11864012
> 
> 赞同：4
> 
> 时间：2012-08-08T11:57:38.250
> 
> 标签：php, magento, cart, shopping, magento-rules

我已经制作了一张优惠券 [coupon_code = SWIMFREE]，如果`category`is`swimming equipment`并且`hobby`is`swimming`将折扣 50%。

现在我有关于 3 步结帐的问题。这是描述...

1.  **结帐车**：申请优惠券
2.  **第一步**：送货和账单地址
3.  **第二步**：选择你的爱好（有另一个`sales_flat_quote table`， `sales_flat_quote_hobby`）
4.  **最后一步**：结帐->概述

**我想要的是**：当优惠券应用并且爱好是游泳时，第三步将价格更改为每个产品的价格，优惠券仍然显示在那里。

**爱好步骤后如何截取优惠券？**

* * *

**一步一步的示例案例：**

**1.在购物车上已经添加**

*   泳衣的正常价格是 100 美元（游泳装备类别）
*   Kevlar 的正常价格是 50 美元（射击器材类）
*   优惠券已申请 SWIMFREE，总计为 100 美元（由于优惠券条件）

**2\. 关于运输和计费步骤**

*   送货地址和帐单地址 - 下一个

**3\. 关于爱好步骤**

*   足球爱好已检查（单选按钮）并确认

**4.然后在概述步骤**

*   泳衣的价格是 50 美元（游泳装备类别）
*   Kevlar 的价格是 50 美元（射击器材类）
*   Coupon Applied SWIMFREE，Grand Total 现在是 150 美元（因为爱好不是游泳）

* * *

我有很多产品，我尝试添加新属性，但它与属性无关，因为它在`sales_flat_quote_hobby`

我试图更改`Sales/Model/Quote/Subtotal.php`以设置购物车上的所有产品价格，但它似乎没用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T10:09:30.843

**我自己已经找到了答案：**

可以创建**自定义优惠券****条件**。

 **![优惠券示例](../Images/abcaf4315d3d26a3b0cd75af7572f00a.png)

> 重写 Mage_SalesRule_Model_Rule_Condition_Product

```
 public function validate(Varien_Object $object){
        if ($this->getAttribute() == 'quote_item_with_hobby') {

            $quote = Mage::getSingleton('checkout/cart')->getQuote();
            $hobby= $quote->getHobbyByItemId($object->getId());

            if ($hobby){
                if ($this->getOperator() == '=='){
                    if (strtolower($this->getValue()) == $hobby->getHobby()) return true;
                    else return false;
                }
                else if ($this->getOperator() == '!='){
                    if (strtolower($this->getValue()) == $hobby->getHobby()) return false;
                    else return true;
                }

            }
            return true;
        }

        return parent::validate($object);
    } 
```

此函数将在加载的每个步骤中调用。然后检查如果返回true，则将使用优惠券，如果返回false，则不会使用优惠券。

**感谢所有参与了的人。我很感激。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:22:13.557

您应该实现自定义收集器来收集总计。它可以基于`Mage_SalesRule_Model_Quote_Discount`.
如何创建自定义收集器：请参阅[stackoverflow 答案](https://stackoverflow.com/questions/4363876/how-to-set-custom-grand-total-before-checkout-process-in-magento)，或者您可以查看[本文](http://www.excellencemagentoblog.com/magento-add-fee-discount-order-total)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:30:37.797

是的，这将是我的想法。

您实施了一个新的 salesrule 条件，它提供 50% 的折扣。

每个产品都调用销售规则。那么你需要检查一下，属性是否为游泳，是否设置了爱好。如果是这种情况，您可以从 %-salesrule 复制其余部分

您可以在其中找到要查看的代码`Mage_SalesRule_Model_Validator::process()`

可以在此处找到自我实现条件的示例：[https ://github.com/magento-hackathon/DiscountForATweet/blob/master/app/code/community/Hackathon/DiscountForATweet/Model/Condition/Tweet.php](https://github.com/magento-hackathon/DiscountForATweet/blob/master/app/code/community/Hackathon/DiscountForATweet/Model/Condition/Tweet.php)**

# java - 为每个类对象共享通用处理代码的最简洁有效的方法？

> ID：11864013
> 
> 赞同：1
> 
> 时间：2012-08-08T11:57:42.467
> 
> 标签：java, inheritance, refactoring

我有一系列共享公共代码的类，，，`A`... `B`（`C`总共几十个）。每个类可以有很多实例`A`,,, `B`...。`C`我打算创建一个超类，`Abstract`它将包含该代码。

问题是，常见的东西适用于每个类（而不是每个实例）唯一的对象。这*目前*通过`A`, `B`, `C`... 每个都有一个具有相应值的静态字段来解决。显然，当我将功能重构为 时`Abstract`，需要将其更改为其他内容。

在实践中，它目前看起来像这样（注意实际类型不是`String`，这只是为了演示目的）：

```
public class A implements CommonInterface {

    private static final String specificVar = "A";

    @Override
    public void common() {
        specificVar.contains('');
    }
}
public class B implements CommonInterface {

    private static final String specificVar = "B";

    @Override
    public void common() {
        specificVar.contains('');
    }
} 
```

到目前为止，我想出的最好的想法是在, , , ... 中有一个`Map<Class<? extends Abstract>,K>`（`K`相关类型在哪里）静态字段，每个字段都包含一个静态初始化块，用于将相关值放入映射中。但是，我不相信这是可以做到的最好的。`Abstract``A``B``C`

请注意，我没有使用任何 DI 框架。

那么，就子类中包含的代码而言**，在不牺牲字段访问效率的情况下，重构由公共代码处理的****、****...****中的静态字段的最简洁的方法是什么？`A``B``C`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:05:28.943

也许你想要一个枚举。

```
enum MyInstances implements MyInterface {
    A {
       fields and methods for A
    }, B {
       fields and methods for B
    };
    common fields for all MyInstances 

    common methods for all MyInstances 
}

// To lookup an instance
MyInstances mi = MyInstances.valueOf("A"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:10:01.453

由于您没有展示任何源代码，因此我们无法真正判断使用静态字段是好的还是坏的设计选择。

考虑到子类使用静态字段确实是一个不错的设计选择，在超类中使用公共代码访问它们的第一种方法是调用将在子类中实现的抽象方法。

例子：

```
public abstract class SuperClass {
    public void processCommonLogic() {
        // Common logic

        // Execute specific logic in subclasses
        processSpecificLogic();
    }

    public abstract void processCommonLogic();
}

public class ASubClass extends SuperClass {
    public static int SPECIFIC_SUBCLASS_CONSTANT = 0;

    public void processSpecificLogic() {
        // Specific subclass logic
        doSomethingWith(ASubClass.SPECIFIC_SUBCLASS_CONSTANT);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:10:01.813

您可以使用[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

在您的抽象类中定义一个抽象方法`getValue()`，并在您需要该值的任何地方在您的抽象类中使用。然后，您的每个子类只需要实现 getValue 方法并为该子类返回正确的值。

# php - 检查数据是否在表格行中

> ID：11864018
> 
> 赞同：0
> 
> 时间：2012-08-08T11:57:55.057
> 
> 标签：php

这是我的第一篇文章，所以请耐心等待我在这里输入代码。我试图将一些图像输出到 PDF，并且需要创建一个 if 语句来连续查找数据。

```
$connection = mysql_connect("localhost", "testdb", "********")
    or die ("Unable to connect!");    

// select database  
mysql_select_db("testdb") or die ("Unable to select database!");      

// Select all the rows in the test table
$query = "SELECT * FROM test2 WHERE testid=89";
$result = mysql_query($query);
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

while ($row= mysql_fetch_array($result)) {
    $image = $row[1]; 
    $text = $row[2];
} 
```

这就是我到目前为止所拥有的，基本上我需要一些类似的东西：

```
If (data in row 1) {
    print $image;
} else {
    print $text;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:00:20.200

很难确切地说出您要查找的内容，因为它不是很清楚，但是我*认为*您想要做的是检查是否`$image`有值，如果有，请显示它。如果没有，`$text`则改为显示。

如果是这种情况，请使用[`empty()`](http://php.net/manual/en/function.empty.php). 它会告诉您变量是否为空。

```
if (!empty($image))
 {
   print $image;
 }
else
 {
  print $text;
 } 
```

以下内容被认为是空的：

*   ""（一个空字符串）
*   0（0 为整数）
*   0.0（0 作为浮点数）
*   "0" (0 作为字符串)
*   无效的
*   错误的
*   array() （一个空数组）
*   $var; （声明的变量，但没有值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:59:53.613

看起来你只需要测试 $image 中的数据

```
if(!empty($image))
{
    echo $image;
}
else
{
    echo $text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:00:39.893

```
if( !empty($row[1]) ) { 
   ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:00:45.967

使用 isset 检查变量。

喜欢

```
if(isset($images) !='')
{
echo $images;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T12:00:23.213

尽管您正在使用`mysql_*`已折旧的旧功能，但您几乎就在那里

```
$connection = mysql_connect("localhost", "testdb", "********") or die ("Unable to connect!");    
// select database  
 mysql_select_db("testdb") or die ("Unable to select database!");      
  // Select all the rows in the test table
    $query = "SELECT * FROM test2 WHERE testid=89";
    $result = mysql_query($query);
    if (!$result) {
     die('Invalid query: ' . mysql_error());
    }

while ($row= mysql_fetch_array($result))
// This will only be called if there is a matching result.
{
 echo $row[1]; 
 echo $row[2];
} 
```

编辑：这是一个在 Eclipse 中打开的查询部分的剪切和粘贴：

```
$arrKPIData = Array();
try{
    $dbh = new PDO($this->mySQLAccessData->hostname, $this->mySQLAccessData->username, $this->mySQLAccessData->password);
    $stmt = $dbh->query($sql);
    $obj = $stmt->setFetchMode(PDO::FETCH_INTO, new kpiData);
    $dataCount=0;
    foreach($stmt as $kpiData)
    {
        $arrKPIData[$dataCount]['year']=$kpiData->year;
        $arrKPIData[$dataCount]['month']=$kpiData->month;
        $arrKPIData[$dataCount]['measure']=$kpiData->kpiMeasure;
        $arrKPIData[$dataCount]['var1']=$kpiData->var1;
        $arrKPIData[$dataCount]['var2']=$kpiData->var2;
        $dataCount++;
        unset($stmt);
    }
    unset($dbh);
}
catch(PDOException $e){
    echo 'Error : '.$e->getMessage();
    exit();
}
unset($arrKPIData); 
```

在清理它并将其进一步转换为代码中的类之前，我正在用数据填充一个简单的数组。

# .net - 如何在服务器端配置 WCF 以仅允许 Kerberos？

> ID：11864023
> 
> 赞同：1
> 
> 时间：2012-08-08T11:58:10.867
> 
> 标签：.net, wcf, kerberos

标题几乎说明了一切，我想配置我的 WCF 服务，以便用户只能使用 Kerberos 进行身份验证，而不是 NTLM（用于调试目的）。有什么办法吗？

在客户端，显然是通过设置 clientCredentials/windows/@allowNtlm="false" 来完成的，但服务器似乎没有等效的属性。

我的配置：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="rest">
          <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Xml" automaticFormatSelectionEnabled="false" faultExceptionEnabled="true" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service name="MyService">
        <endpoint address="" binding="webHttpBinding" bindingConfiguration="rss" contract="MyProject.IMyService" behaviorConfiguration="rest" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/MyProject/MyService/"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="rss">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:02:17.990

我认为您可以实现这一点，将您的服务托管在`IIS`- 您可以指定启用的身份验证提供程序，右键单击管理器中的`'Windows Authentification'`项目。只需关闭/打开所需的提供商。`Authentification settings``IIS`

# mongodb - 你可以在 Mongo 中作为 map reduce 进行分组吗？

> ID：11864024
> 
> 赞同：0
> 
> 时间：2012-08-08T11:58:12.153
> 
> 标签：mongodb, mapreduce, pymongo

我有两个系列。“ `people`”与“”相连，`location`如下所示：

```
location_id = ObjectId()

db.people.insert(
{
  _id : ObjectId(),
  name : "Nick",
  location : location_id
});

db.locations.insert(
{
 _id : location_id,
  city : "Cape Town"
}); 
```

我想创建一个直方图，`locations`给出每个人的人数`city`。但我似乎无法使用 Mongo`group`命令来执行此操作，因为它们是不同的集合。使用 map/reduce 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:01:33.507

map-reduce 在这里也无济于事。它还对单个集合进行操作。

在我看来，您正在尝试在这里应用您的关系设计技能。不要那样做。MongoDB 需要一种全新的方法。

如果我是你，我可能会将位置非规范化为人员集合。

```
db.people.insert(
{
  _id : ObjectId(),
  name : "Nick",
  location : {city: "Cape Town"}
}); 
```

这样就可以使用 map-reduce 分析这些数据，因为所有内容都在同一个集合中。

# drupal - 创建新内容时的 Drupal 7 节点关系

> ID：11864026
> 
> 赞同：0
> 
> 时间：2012-08-08T11:58:42.043
> 
> 标签：drupal, drupal-7, entityreference

假设我有 2 种内容类型“艺术家”和“传记”。我可以使用实体引用将一本传记与一位艺术家联系起来（这是一对一的关系）。

现在在创建新艺术家时，我是否可以有一个选项卡或链接来直接添加艺术家传记，而不是必须先创建艺术家，然后再创建传记，然后将其与艺术家链接？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:24:08.963

我不知道实体参考有一个，但如果您可以将其换成[参考](http://drupal.org/project/references)模块，您可以使用适合您的用例的[参考对话框：](http://drupal.org/project/references_dialog)

> 该模块通过添加链接以通过对话框添加、编辑和搜索引用来扩展引用字段，例如用户和节点引用字段。这允许一个工作流，用户可以在创建节点的同时创建对节点的所有引用，这个过程有时会有点倒退，例如，当用户需要为一篇文章创建所有事实时。

如果您要更改为不同的关系模块，还有[内联实体表单](http://drupal.org/project/inline_entity_form)模块：

> 为引用实体的内联管理（创建、修改、删除）提供小部件。

它将引用实体的添加/编辑表单嵌入到主要实体的表单中，以便您可以从同一页面创建多个相关实体。它还支持内置的节点。

# ios - 在 iPhone 和移动设备上显示图表

> ID：11864027
> 
> 赞同：2
> 
> 时间：2012-08-08T11:58:45.270
> 
> 标签：ios, cordova, charts, google-visualization

我有一个 iOS 应用程序，它目前使用 Google Charts 在图表上显示一些数据。我已经看到 2015 年 4 月 Google Image Charts 将被弃用并且将无法使用。还有其他显示图表的方法吗？

此应用程序还具有适用于移动设备（Symbian、BlackBerry、Bada 等）的对应应用程序，因此如果此服务也适用于这些设备，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:24:59.047

您可以查看[DSBarChart](http://dhilipsiva.com/DSBarChart/)。一个简单的 Objective-C 条形图/直方图库。

这是[示例用法](http://dhilipsiva.com/DSBarChart#sample-usage)

正是您正在寻找的。

# asp.net-web-api - 这个 ASP.Net 和 Fiddler 示例有什么问题？

> ID：11864029
> 
> 赞同：3
> 
> 时间：2012-08-08T11:58:45.847
> 
> 标签：asp.net-web-api, fiddler

我正在使用 Visual Studio 2012 RC。我正在使用默认路由并具有以下 Web API 控制器：

```
public class FooController : ApiController
{
    // GET api/foo
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }

    // GET api/foo/5
    public string Get(int id)
    {
        return "value";
    }

    // POST api/foo
    public string Post(string abc)
    {
        Console.WriteLine("value: {0}", abc);
        return "foo" + abc;
    }

    // PUT api/foo/5
    public void Put(int id, string value)
    {
    }

    // DELETE api/foo/5
    public void Delete(int id)
    {
    }
} 
```

我想在 Fiddler 中做一个简单的 POST 测试，所以我有

请求标头
用户代理：提琴手
内容类型：应用程序/json

请求正文
{"abc": "def"}

当我调试请求时，参数 abc 以 null 形式出现，而不是“def”。我的 Fiddler 语法有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:31:04.270

(1) 默认情况下，简单类型取自 URI。要从请求正文中读取简单类型，请将 [FromBody] 属性添加到参数中。

```
public string Post([FromBody] string abc) 
```

(2) '{"abc": "def"}' 定义了一个具有名为 "abc" 属性的对象 - 要发送 JSON 字符串，请求正文应该只是 "def"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:37:37.807

这个答案来自 ASP.Net Web API 站点上的链接 sent [-html-form-data](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1#sending_simple_types)，原来是 Mike 的博客文章（起初我没有意识到这一点）。Web API 团队已经做出了一些与普通 MVC 控制器完全不同的参数绑定决策。

发送“简单类型”的正确语法是

```
public HttpResponseMessage PostSimple([FromBody] string value)
{
// code goes here 
```

在 Fiddler 中，你把

```
=def          //THIS CANNOT HAVE QUOTES AND = IS MANDATORY 
```

好的，下面是与 MVC 工作方式非常不同的部分。

1.  正如 Mike 所说，您必须使用 [FromBody]。
2.  您只能有 1 个参数。如果您想要超过 1 个参数，您有 2 个选择：i) 使用 url 查询参数，而不是请求正文或 ii) 使用复杂对象（即您自己的类）。
3.  请求正文应该是一个简单的 =def 并且不能使用命名参数。

# asp.net-mvc-2 - 如何使用 HostingEnvironment.MapPath() 在服务器上保存文件

> ID：11864033
> 
> 赞同：0
> 
> 时间：2012-08-08T11:58:49.267
> 
> 标签：asp.net-mvc-2, server.mappath

在此代码中，我试图将文本文档保存在服务器/wwwroot 文件夹中。什么都没发生 ：（！

如果我在本地主机上工作并像这样执行相同的例程，一切正常，我可以将文本文档保存在本地电脑上。：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:01:21.487

如果相同的代码在您的开发机器上运行，而在生产环境中运行不正常，则应该是文件夹权限问题。我想您必须更改服务器中的文件夹权限，以便 ASP.NET 可以写入该目录。

查看[此](http://www.asp.net/mvc/tutorials/deployment/deployment-to-a-hosting-provider/Deployment-to-a-Hosting-Provider-Setting-Folder-Permissions-6-of-12)链接，该链接解释了如何执行此操作。

确保您没有向“**所有人**”授予写入/修改权限

# java - 多线程不起作用

> ID：11864035
> 
> 赞同：1
> 
> 时间：2012-08-08T11:58:54.927
> 
> 标签：java, multithreading, user-interface, countdownlatch

我正在尝试使用 GUI 界面运行代码。但是在我继续我的主要方法之前，我需要关闭所有的 GUI 窗口（我需要的一些信息是从 GUI 窗口收集的，如果没有这些信息，我将无法运行我的其余代码）。因此，我决定使用 CountDownLatch 创建两个线程（其中一个是我的主要方法，另一个是处理我的 GUI 内容的类）。但是当我运行我的代码时，它会卡在 GUI 的末尾，并且不会继续执行我的代码。有人知道我的代码有什么问题吗？

```
public static void main (String[] args) throws IOException,InterruptedException{
long start = System.currentTimeMillis();
        double longThreshold, shortThreshold, investment;
        System.out.println("hello");
        CountDownLatch startSignal = new CountDownLatch(1);
        CountDownLatch stopSignal = new CountDownLatch(1);
        ProgrammeSettings mySettings=new ProgrammeSettings(startSignal,stopSignal);
                new Thread(mySettings).start();  // mysettings object is the GUI stuff
        startSignal.countDown();
            stopSignal.await();
        longThreshold = mySettings.getlowerThreshold();
        shortThreshold = mySettings.getupperThreshold();
        investment =mySettings.getinvestment();
        System.out.println("hello");
} 
```

这也是我的 GUI 内容的 CountDownLatch 代码：

```
public class ProgrammeSettings implements Runnable {
private final CountDownLatch startSignal;
private final CountDownLatch stopSignal;

ProgrammeSettings(CountDownLatch startSignal, CountDownLatch doneSignal) {
      this.startSignal = startSignal;
      this.stopSignal = doneSignal;
   }
    public void graphicDesign(){
     // do some GUI stuff 
   }
@Override
public void run() {
    // TODO Auto-generated method stub
    try{
        startSignal.await();
        graphicDesign();
        stopSignal.countDown();
    }
    catch( InterruptedException e){

    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:01:50.947

基本思想确实有效，但您不能在任何线程中运行 GUI 代码；它必须在 Swing 的 UI 线程中运行。

因此，更好的解决方案是在新线程中运行“等待数据输入完成”并让主线程处理 UI。

# android - 从android中的进程id查找进程信息

> ID：11864038
> 
> 赞同：1
> 
> 时间：2012-08-08T11:59:13.463
> 
> 标签：android, process, pid

我正在android中制作应用程序。在该应用程序中，我想从进程 ID 中查找与进程相关的信息。这可能吗？请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T15:11:31.523

不确定您要从 pid 中找到哪些信息，但`ActivityManager`'s`RunningAppProcessInfo`类可能会有所帮助。尝试这样的事情：

```
TextView textProcessInfo = (TextView)findViewById(R.id.processinfo);
int pid = Process.myPid();
ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
for(ActivityManager.RunningAppProcessInfo processInfo : am.getRunningAppProcesses()){
            if(processInfo.pid == pid){
                textProcessInfo.setText("processName="+processInfo.processName+"\n");
            }

        } 
```

这将创建对 的实例的引用`ActivityManager`，然后在运行的 pid 列表中搜索应用程序自己的。然后它将 pid`processName`放在一个`TextView`. 当然还有其他领域和方法；`processName`只是一个例子。请参阅[http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:27:52.953

看看[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)。那里有一些方法可以获取有关进程的信息。

# javascript - Javascript 对象可以有“垃圾收集”回调吗？

> ID：11864044
> 
> 赞同：2
> 
> 时间：2012-08-08T11:59:20.747
> 
> 标签：javascript, android, webview, garbage-collection

我正在编写一个 Android 应用程序，它在大部分 UI 的 WebView 中使用 Javascript。我向 JS 公开了一个简单的接口来创建临时文件。在 Java 中，我提供了一个创建临时文件的函数，它返回一个文件 ID，以及一组函数来操作给定 ID 的临时文件。在 JS 中，我用一个 TempFile 对象包装这些函数，该对象在内部跟踪它自己的 ID。

问题在于 Java 端有一个文件列表，但对 Javascript 中表示它们的对象一无所知。所以当在 JS 中收集一个 TempFile 时，文件对象仍然在 Java 端。是否有一个“oncollect”或这样的回调可以用来告诉 Java 释放与已收集的 TempFile 对应的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:05:47.413

我相当肯定答案是“否”——你不能像使用 Java 的终结器（或`ReferenceQueues`）一样挂接到 JS 垃圾收集过程。

你可以用更声明的方式处理这个问题吗？您的问题似乎暗示您的系统“知道”何时不再需要文件的唯一方法是 GCed（或者换句话说，您的系统根本不知道）。你真的在整个应用程序中引用这些文件吗？好的做法是将这些资源与定义良好的生命周期一起使用，以便创建临时文件的系统部分也负责在完成后销毁它。

在该模型下，当您（显式）销毁 JS 中的文件时，您可以回调 Java 以执行所需的清理。

正如您目前所做的那样，通过简单地删除对它的所有引用来释放资源并不是特别好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:03:23.317

不可以。当您不再需要这些文件时，您需要从 JavaScript 调用 Java 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:03:35.403

Javascript 没有这样的钩子。

您需要为此用例显式创建 close() 函数或此类方法并调用它。

更多信息

[http://forums.mozillazine.org/viewtopic.php?f=19&p=5517055](http://forums.mozillazine.org/viewtopic.php?f=19&p=5517055)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-15T01:34:49.073

# 看着[**`Finalizer`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/FinalizationRegistry)

从**ES12 开始**，您可以找到`FinalizationRegistry`. 使用它来告诉 Java 释放与已收集的 TempFile 对应的文件。

```
const registry = new FinalizationRegistry((fileName) => {
    console.log(fileName);
    // ... here your function to comunicate with Java
});
let tempFileObject;
registry.register(tempFileObject, filename); 
```

在这里，我们创建一个实例`FinalizationRegistry`并将 js 'tempFile' 附加到它使用`.register`. 一旦“tempFile”被垃圾收集，传递给该`FinalizationRegistry`方法的回调函数就与java进行通信。

# 可能重复

[如何实现 JavaScript 对象被垃圾回收时触发的函数？](https://stackoverflow.com/q/6077374/11630806)

# sql-server-2008 - 将行合并到一个 TSQL

> ID：11864049
> 
> 赞同：-1
> 
> 时间：2012-08-08T11:59:37.547
> 
> 标签：sql-server-2008

```
ID | First Name | Last Name |
-----------------------------
1  | Test       | NULL      |
2  | Test       | ABC1      | 
```

我需要将这两行合并为一个以显示，因此“姓氏”中的空值将被第二列中的文本替换，按名字分组。

```
 ID | First Name | Last Name |
 -----------------------------
 1  | Test       | ABC1| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:11:02.813

尝试这个：

```
select min (id),First_Name,MAX(Last_Name)
from your_table
group by First_Name 
```

# python - 在 Fedora 上安装 pyodbc-3.0.6 时出错

> ID：11864052
> 
> 赞同：4
> 
> 时间：2012-08-08T11:59:44.257
> 
> 标签：python, pyodbc

我正在尝试在 Fedora 上安装 pyodbc-3.0.6。

我已经从[这里下载了](http://code.google.com/p/pyodbc/downloads/detail?name=pyodbc-3.0.6.zip)

当我运行它时`python setup.py install`显示以下错误

```
running install
running bdist_egg
running egg_info
writing pyodbc.egg-info/PKG-INFO
writing top-level names to pyodbc.egg-info/top_level.txt
writing dependency_links to pyodbc.egg-info/dependency_links.txt
writing pyodbc.egg-info/PKG-INFO
writing top-level names to pyodbc.egg-info/top_level.txt
writing dependency_links to pyodbc.egg-info/dependency_links.txt
reading manifest file 'pyodbc.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no files found matching 'tests/*'
writing manifest file 'pyodbc.egg-info/SOURCES.txt'
installing library code to build/bdist.linux-x86_64/egg
running install_lib
running build_ext
building 'pyodbc' extension
creating build
creating build/temp.linux-x86_64-2.7
creating build/temp.linux-x86_64-2.7/home
creating build/temp.linux-x86_64-2.7/home/local
creating build/temp.linux-x86_64-2.7/home/local/PENNYWISE
creating build/temp.linux-x86_64-2.7/home/local/PENNYWISE/shivakrishnab
creating build/temp.linux-x86_64-2.7/home/local/PENNYWISE/shivakrishnab/Desktop
creating build/temp.linux-x86_64-2.7/home/local/PENNYWISE/shivakrishnab/Desktop/pyodbc-3.0.6
creating build/temp.linux-x86_64-2.7/home/local/PENNYWISE/shivakrishnab/Desktop/pyodbc-3.0.6/src
gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPYODBC_VERSION=3.0.6 -I/usr/include/python2.7 -c /home/local/user/Desktop/pyodbc-3.0.6/src/buffer.cpp -o build/temp.linux-x86_64-2.7/home/local/user/Desktop/pyodbc-3.0.6/src/buffer.o -Wno-write-strings
gcc: error trying to exec 'cc1plus': execvp: No such file or directory
error: command 'gcc' failed with exit status 1 
```

谁能让我知道如何解决这个问题。

**编辑代码：**

按照以下命令指示安装 g++ 后，当我运行以下命令时

```
python setup.py install 
```

从 pyodbc 下载的文件夹中，我收到以下错误

```
installing library code to build/bdist.linux-x86_64/egg
running install_lib
running build_ext
building 'pyodbc' extension
gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPYODBC_VERSION=3.0.6 -I/usr/include/python2.7 -c /home/local/user/Desktop/pyodbc-3.0.6/src/buffer.cpp -o build/temp.linux-x86_64-2.7/home/local/user/Desktop/pyodbc-3.0.6/src/buffer.o -Wno-write-strings
In file included from /home/local/user/Desktop/pyodbc-3.0.6/src/buffer.cpp:12:0:
/home/local/user/Desktop/pyodbc-3.0.6/src/pyodbc.h:48:17: fatal error: sql.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:01:30.980

您需要安装 g++ 包。`yum install compat-gcc-34-c++` （编辑：似乎他们把它移到了`compat-gcc-34-c++`）

[编辑]

对于第二个问题-您缺少`unixODBC-devel`包。

对于 CentOS，软件包名称是`gcc-c++`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T05:31:05.713

要抑制异常：

> sql.h：CentOS 中没有文件或目录安装 unixODBC-devel.x86_64

对 64 位运行以下命令：

```
yum install unixODBC-devel.x86_64 
```

# model - 一组最不同（感知）的白色背景颜色，也与视障人士有关

> ID：11864053
> 
> 赞同：0
> 
> 时间：2012-08-08T11:59:48.080
> 
> 标签：model, colors

**动机**

有时我需要为出版物中使用的图像提供一些不同的颜色。通常它们是在白纸上绘制的，这意味着我更喜欢在我的图像中选择白色背景颜色。但是，我也想确保色觉障碍的人会尽可能地感知。（主要关注红绿问题，因为它（可能是大多数）分布广泛）由于人类在区分颜色方面受到限制，我会专注于**包含 2 到 10 种不同颜色的集合**。

**选择颜色模型**

一个直接的解决方案是从 HSV 模型中选择色调值，而不是考虑红绿弱点等。由于已经提出了其他颜色模型，专为人性化的视觉感知而设计，例如[https://en.wikipedia.org /wiki/Lab_color_space](https://en.wikipedia.org/wiki/Lab_color_space)我想知道是否有人已经完成了这项工作。

*（我知道形状比颜色更容易区分和感知，因此使用不同图案/形状/纹理的黑白图像可能会产生更好的结果。但是我认为并不总是可以使用这样的纹理，除此之外我想解决尽我所能解决这个颜色问题，所以我在这里问：D）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:27:36.720

使用[http://colorschemedesigner.com/](http://colorschemedesigner.com/)，您可以创建多达四种不同的颜色，并尊重颜色感知的许多障碍。

# android - 正确对齐添加线性布局和 Imageview Via 代码

> ID：11864057
> 
> 赞同：0
> 
> 时间：2012-08-08T11:59:54.690
> 
> 标签：android

我正在尝试通过代码添加一个线性布局和三个 Imageview 作为其子项正确对齐。在这种情况下的任何帮助都会有所帮助。我一直在尝试各种没有成功的策略。提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:03:03.873

```
LinearLayout layout=new LinearLayout(context);
layout.setOrientation(LinearLayout.VERTICAL);
ImageView imageview=new ImageView(context);
layout.addView(imageview); 
```

试试这样..

# php - 如何在php中获取IP地址

> ID：11864059
> 
> 赞同：-1
> 
> 时间：2012-08-08T12:00:00.230
> 
> 标签：php, apache

我在 Windows 7 操作系统上安装了 Apache 服务器 2.2.22、Php 5.4.5 和 Mysql 5.5.27。每件事都运作良好。但我没有得到IP地址。这是我的IP地址收集代码

```
<?php

//Test if it is a shared client
if (!empty($_SERVER['HTTP_CLIENT_IP'])) 
{
    $ip = $_SERVER['HTTP_CLIENT_IP'];
    //Is it a proxy address
} 
elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) 
{
    $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
} 
else 
{
    $ip = $_SERVER['REMOTE_ADDR'];
}
//The value of $ip at this point would look something like: "192.0.34.166"
$ip = ip2long($ip); 
```

任何人都可以帮助我如何获得IP地址。我是否需要更改或修改 Apache httpd.conf 或 php.ini 文件来解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:01:21.557

获取用户IP地址的简单方法

```
<?PHP

function getUserIP()
{
    $client  = @$_SERVER['HTTP_CLIENT_IP'];
    $forward = @$_SERVER['HTTP_X_FORWARDED_FOR'];
    $remote  = $_SERVER['REMOTE_ADDR'];

    if(filter_var($client, FILTER_VALIDATE_IP))
    {
        $ip = $client;
    }
    elseif(filter_var($forward, FILTER_VALIDATE_IP))
    {
        $ip = $forward;
    }
    else
    {
        $ip = $remote;
    }

    return $ip;
}

$user_ip = getUserIP();

echo $user_ip; // Output IP address [Ex: 177.87.193.134]

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:01:07.837

您可以获取服务器 IP，[`$_SERVER['SERVER_ADDR']`](http://php.net/_SERVER)并将`$_SERVER['REMOTE_ADDR']`返回用户正在查看的 IP 地址。

# android - API < 3.0 中的操作栏与 Google 地图兼容性库

> ID：11864064
> 
> 赞同：0
> 
> 时间：2012-08-08T12:00:15.847
> 
> 标签：android, android-fragments, android-mapview, android-fragmentactivity, android-compatibility

我的另一个兼容性问题。

**背景**

我现在有一个适用于所有 API 的应用程序，因为我下载了一个自定义的谷歌地图兼容性支持库，它是 的扩展，`Compatibility Support Library`并允许我在 API 级别 < 3.0 的地图中拥有片段和地图。它通过让我扩展我的活动来`FragmentActivity`做到这一点，因为这个自定义库也是`MapActivity`.

**问题**

我还需要`Action Bar`在我的应用程序中在不同的 API 级别上实现一个选项卡。可以使用`ActionBarSherlock`. 但是，这还涉及`Activity`` by`使用此自定义库下载和扩展我的 FragmentActivity`，这是一个问题，因为我无法使用这两个库版本进行扩展，因此我失去了拥有地图的能力？

**问题**

如何在我的应用程序中同时拥有这两个功能？

如果这不是这样做的方法，我该怎么做？

提前致谢。

**更新**

所以我实现了一个系统，我可以在 api 大于 3.0 的情况下显示操作栏，如果不是，则不显示。

这是代码。

```
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB) {
        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.show();
} else {
        //Do something else
} 
```

**可能的解决方案**

最好的方法是创建一个自定义的*ActionBar 模块*，它只是一组具有一些功能的视图，以使其行为并看起来像一个操作栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:29:36.347

您是否尝试扩展您`FragmentActivity`的 by `SherlockActivity`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:48:42.353

所以这是我想出的解决方案。

`ActionBarSherlock`对我来说不是一个选择，因为我已经在使用允许我一起使用的兼容性库版本，`GoogleMaps`如果`Fragments`我使用该`ActionBarSherlock`库，我将失去此功能。

**我的解决方案**

我决定实现我自己的自定义`ActionBar`，它是`Views`和的组合`TextViews`。

我有一个类扩展`Fragment`（android支持版本）被调用`CCActionBar`，它膨胀了三个名为`CCTab`which extend的自定义对象`TextView`。这三个选项卡（正如它的名称所说）充当我的选项卡，因此当它们被触摸时我们会覆盖它们，将它们传递给我们的`CCActionBar`，然后将其传递给我们`MainActivity`以处理任何导航。

`Custom Action Bar`为了检测由于 API 级别我们是否需要创建它，我使用以下代码。

```
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB) {
   //setup a normal action bar because the api level supports it
} else {
   //setup our custom action bar
} 
```

所以这就是我的解决方案，它可能不是正确的，但它对我有用。

有任何问题请提出。

# android - 解析传入的http post请求java android

> ID：11864070
> 
> 赞同：2
> 
> 时间：2012-08-08T12:00:30.990
> 
> 标签：android, parsing, http-request

我正在使用 Android Web 服务器。当我在模拟器浏览器上访问 localhost:8080 时，它会提供一个带有密码字段的页面/表单。在成功验证密码后，我想将用户重定向到成功/失败页面。读取传入的 http post 请求并解析密码字段以进行验证的最佳方法是什么？任何正确方向的指针都是非常感激。我有一个处理表单提交到的网址的处理程序。处理程序的代码是：

```
import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;

import org.apache.http.HttpEntity;
import org.apache.http.HttpException;
import org.apache.http.HttpRequest;
import org.apache.http.HttpResponse;
import org.apache.http.entity.ContentProducer;
import org.apache.http.entity.EntityTemplate;
import org.apache.http.protocol.HttpContext;
import org.apache.http.protocol.HttpRequestHandler;

import android.content.Context;

public class LoginHandler implements HttpRequestHandler {
private Context context = null;
public LoginHandler(Context context) {
    this.context = context;
}

@Override
public void handle(final HttpRequest request, HttpResponse response,
        HttpContext httpcontext) throws HttpException, IOException {
       HttpEntity entity = new EntityTemplate(new ContentProducer() {
        public void writeTo(final OutputStream outstream) throws IOException {
            String resp = null;
            OutputStreamWriter writer = new OutputStreamWriter(outstream, "UTF-8");
            if(validatePassword()==true){
             resp ="<html><head></head><body><h1>Home<h1><p>Success.</p></body></html>";
            }
            else{resp="<html><head></head><body><h1>Home<h1><p>Login Failed.</p></body></html>";}
            writer.write(resp);
            writer.flush();
        }

    });
    response.setHeader("Content-Type", "text/html");
    response.setEntity(entity);

}
boolean validatePassword(){
boolean pass=false;
//parse request body here and check for the password if true return true/else false
 return pass;
 }

 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T18:40:33.473

环顾四周后，我找到了解决方案。在句柄方法中添加以下内容就可以了。感谢原始海报。[http://www.androiddevblog.net/android/a-bare-minimum-web-server-for-android-platform](http://www.androiddevblog.net/android/a-bare-minimum-web-server-for-android-platform)

```
 if (request instanceof HttpEntityEnclosingRequest) {
HttpEntity entity = ((HttpEntityEnclosingRequest) request).getEntity();
if (entity != null) {
Log.v("RequestBody", EntityUtils.toString(entity, "UTF-8"));
entity.consumeContent();
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:04:52.453

如果这不是您所要求的，我深表歉意，所以如果不是，请告诉我。

您可以使用[JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)返回该密码是否被验证为正确。

例如，如果密码正确，您可以将 HTTP 结果存储为：

```
{"status":200,"confirmed":"true"} 
```

否则为“假”。

当您从 HTTP 发布请求返回时，您可以将此结果存储为字符串，然后从中`JSONObject`提取。例如：

```
// Send the URL to a postRequest function and return the result as a String
String output = makePostRequest(url);

// Parse the String as a JSONObject and receive whether or not the login was confirmed
JSONObject o = new JSONObject(output);
String confirmed = o.getString("confirmed");
if (confirmed.equals("true")) {
    // Password confirmed - redirect user to success page
} else {
    // Password incorrect - redirect user to failure page
} 
```

**注意：**如果您需要了解如何从发布请求中接收响应代码，这里有一些示例代码：

```
String output = {};

// Use bufferedreader and stringbuilder to build an output string (where conn is your HTTPUrlConnection object you used to make the post request    
BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
StringBuilder sb = new StringBuilder();
String line;

// Loop through response to build JSON String
while((line = br.readLine()) != null) {
    sb.append(line + "\n");
}

// Set output from response
output = sb.toString(); 
```

现在`output`是可以转换为 JSONObject 的字符串。

这有什么帮助吗？

* * *

**编辑：**
好的，所以您将获得的字符串格式为`{"password":"somepassword"}`. 要解析这个，试试这个：

```
String s = /* the string in the format {"password":"somepassword"} */
JSONObject o = new JSONObject(s);
String password = o.getString("password");
if (password.equals(random_password_at_beginning_of_webservice) {
    // Password confirmed - redirect user to success page
} else {
    // Password incorrect - redirect user to failure page
} 
```

# mysql - 使用@时出现1064 mysql错误

> ID：11864071
> 
> 赞同：0
> 
> 时间：2012-08-08T12:00:35.783
> 
> 标签：mysql, sql, database

我收到这个 mysql 错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“@password)”附近使用正确的语法

这是针对下面的sql：

```
Update Teacher 
SET TeacherSalt=@salt, TeacherPassword=SHA1(TeacherSalt @password) 
```

我需要改变什么才能让这个 sql 工作？

更新：

需要帮助加盐密码。如果 TeacherPassword 和 TeacherSalt 列如下所示：

```
TeacherPassword     TeacherSalt

cricket01
sachin01
priggy02 
```

然后在我做这个声明之后：

```
Update Teacher 
SET    TeacherSalt = @salt, 
       TeacherPassword = SHA1(CONCAT(@password,@salt)) 
```

然后 TeacherPassword 和 TeacherSalt 列都提供空白行。如何成功加盐密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:03:50.213

不是这样吗？（*删除中的`TeacherSalt`列`SHA1`*）

```
Update Teacher 
SET    TeacherSalt = @salt, 
       TeacherPassword = SHA1(CONCAT(@password,@salt)) 
```

# [*SQLFiddle 示例*](http://sqlfiddle.com/#!2/2e61f/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:14:47.837

我想你想粘盐和密码。例如：

```
UPDATE Teacher 
SET TeacherSalt = @salt, TeacherPassword = SHA1(CONCAT(@salt, @password)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:04:40.493

我认为问题是您需要连接字符串。

```
Update Teacher  
SET TeacherSalt=@salt, TeacherPassword=SHA1(@salt + @password) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:04:01.227

看起来您的语法已关闭，您`TeacherSalt`在该`Password`字段中有一个额外的：

```
Update Teacher 
SET TeacherSalt=@salt, TeacherPassword=SHA1(@password) 
```

根据您的评论，听起来您想要这个：

```
Update Teacher 
SET TeacherSalt=@salt, TeacherPassword=SHA1(CONCAT(@password,@salt)) 
```

# wpf - Windows Charting.Chart 性能

> ID：11864073
> 
> 赞同：0
> 
> 时间：2012-08-08T12:00:43.737
> 
> 标签：wpf, windows, performance, charts

我在 WPF 窗口中有一个 System.Windows.Forms.DataVisualization.Charting.Chart。我正在尝试显示一个包含大约 150 个系列的折线图，每个系列大约有 500 个点，数据是静态的，并且图表不需要特别长的时间来呈现。

问题是托管图表控件的窗口相当迟钝，即在移动/调整大小时。

此外，我在 x 轴上放大到 100 个点的范围，水平滚动，滚动条太慢了，几乎无法使用。

有没有其他人注意到这种图表的性能特别差？

有没有一种简单的方法来实现一种延迟加载，它只会在图表的一部分滚动到视图中时绘制点？

谢谢。

# ruby-on-rails - 如何运行单个 TAGGED 规范

> ID：11864074
> 
> 赞同：1
> 
> 时间：2012-08-08T12:00:43.787
> 
> 标签：ruby-on-rails, ruby, rspec

我知道有多种方法可以在文件中运行单个规范。即只要没有标记规范，这就像一个魅力（即非常慢..）

```
rspec spec/models/event_spec.rb:311 
```

这运行所有标记为慢的规格......

```
rspec -t slow spec/models/event_spec.rb 
```

...但大约需要两年时间才能完成，因为它们真的很慢，而且还有一大堆。

以下所有限制慢速规范运行的尝试最终都会运行指定文件中的所有非标记规范：

```
rspec -t slow -e "A describe block tagged as slow" spec/models/event_spec.rb
rspec -e "A describe block tagged as slow" spec/models/event_spec.rb
rspec -t slow spec/models/event_spec.rb:378 #the line number of the describe block
rspec spec/models/event_spec.rb:378 #the line number of the describe block
rspec -e "A single slow spec" -t slow spec/models/event_spec.rb
rspec -t slow -e "A single slow spec" -t slow spec/models/event_spec.rb
rspec -t slow spec/models/event_spec.rb:466 #a line number of a single slow spec
rspec spec/models/event_spec.rb:466 #a line number of a single slow spec
#It seems the order of the file/path and the options makes no difference..
rspec spec/models/event_spec.rb -t slow -e "A describe block tagged as slow"
rspec spec/models/event_spec.rb -e "A describe block tagged as slow"
rspec spec/models/event_spec.rb:378 -t slow #the line number of the describe block
rspec spec/models/event_spec.rb -e "A single slow spec" -t slow
rspec spec/models/event_spec.rb -t slow -e "A single slow spec"
rspec spec/models/event_spec.rb#466 -t slow #a line number of a single slow spec 
```

这是不可能的还是我做错了什么？

PS Rspec 版本 2.10.1

# 更新

我没有提到在 spec_helper 中 Rspec 已（显然）配置为默认不运行慢速测试，如果所有内容都被过滤，则运行所有测试。（TBH，我认为这是默认行为，这就是我最初没有提到它的原因）

```
RSpec.configure do |config|
  config.mock_with(:rspec)
  config.expect_with(:rspec)
  config.filter_run_excluding(:slow => true)
  config.run_all_when_everything_filtered = true
end 
```

这应该足以测试行为：

```
# -*- encoding : utf-8 -*-
require 'spec_helper'

describe 'Demonstrating tagging issue' do
  describe "some tests that take a very long time to run", slow: true do
    it "slow test 1" do
      puts "it should be slow"
    end
    it "shlow test 2" do
      puts "it should be slow too"
    end
  end
  it "normal test" do
    puts "it should be fast"
  end
end 
```

因此，似乎如果我尝试通过行号或示例名称指定要运行的确切测试，那么它会忽略我试图强制它更改忽略慢速规范的配置默认行为的所有努力。因此一切都会被过滤并然后它运行一切。

# 更新 2

进一步说明我想要实现的目标。我有一个文件，其中有多个示例标记为慢。我不想碰这些标签，我想运行一个缓慢的例子。所以如果从我的 spec_helper.rb 中注释掉这个设置，这一切都是小菜一碟

```
config.filter_run_excluding(:slow => true) 
```

然后任何方法：指定行号，-e cmd 行选项，焦点标记你想使用的任何东西都可以工作。但是，我原以为无需修改配置就可以实现这一目标。现在我越来越确定这实际上是目前最不可能的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:41:05.490

我在您的示例中做了一些调整，我希望它可以按您的意愿工作。

`spec/something_spec.rb:`

```
# -*- encoding : utf-8 -*-
require 'spec_helper'

describe 'Demonstrating tagging issue' do
  describe "run differently slow" do
    it "is slow", slow: true do
      true.should be_true
    end

    it "is not so fast" do
      true.should be_true
    end

    it "normal test" do
      true.should be_true
    end
  end
end 
```

终端：

```
╭─@krasimir.local /private/tmp/rtest ‹ruby-1.9.2@test› 
╰─ rspec -f d --tag true  
Run options: include {:focus=>true, :true=>true}

All examples were filtered out; ignoring {:focus=>true, :true=>true}

Demonstrating tagging issue
  run differently slow
    is slow
    is not so fast
    normal test

Finished in 0.00527 seconds
3 examples, 0 failures

Randomized with seed 57868

╭─@krasimir.local /private/tmp/rtest ‹ruby-1.9.2@test› 
╰─ rspec -f d --tag slow
Run options: include {:focus=>true, :slow=>true}

Demonstrating tagging issue
  run differently slow
    is slow

Finished in 0.00772 seconds
1 example, 0 failures 
```

我用了：

*   Ruby：ruby 1.9.2p320（2012-04-20 修订版 35421）[x86_64-darwin12.0.0]
*   RSpec：2.11.1

# java - JPQL：如何构造 WHERE 子句？

> ID：11864078
> 
> 赞同：0
> 
> 时间：2012-08-08T12:00:51.790
> 
> 标签：java, jpa, jpql

我想在 JPQL 中创建一个命名查询，但我不明白它是如何工作的......

这是我的实体：

```
@Entity
@NamedQueries({ 
    @NamedQuery(name = "Translation.lang", 
                query = "SELECT t FROM Translation t WHERE t.reference.id = :refId AND t.language.lang = :lang")
})
@Table(name = "T_E_TRANSLATION_TRL")
public class Translation implements java.io.Serializable {

@Id
@Column(name = "TRL_ID", unique = true, nullable = false)
@TableGenerator(name="translationSeqStore", 
    table="T_S_APP_SEQ_STORE_AST", 
    pkColumnName="AST_SEQ_NAME",
    valueColumnName = "AST_SEQ_VALUE",
    pkColumnValue = "T_E_TRANSLATION_TRL.TRL_ID", 
    allocationSize=1)
@GeneratedValue(strategy=GenerationType.TABLE, 
    generator="translationSeqStore")            
private Integer id;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "TRL_REF_ID", nullable = false)  
private Reference reference;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "TRL_LAN_ID", nullable = false)  
private Language language;

@Column(name = "TRL_LABEL", nullable = false, length = 4000)    
private String label; 
```

我应该在参考和语言上使用 LEFT JOIN 来选择这些 id 的翻译吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:10:27.807

我想你想要：

```
SELECT t FROM Translation t join fetch t.reference join fetch t.language WHERE t.reference.id = :refId AND t.language.lang = :lang 
```

这将加入（并获取 LAZY 参考和语言）并返回`Translation`s 用于 ID`refId`和语言的参考 lang = `lang`。

# c# - NAudio - 暂停，然后恢复

> ID：11864079
> 
> 赞同：5
> 
> 时间：2012-08-08T12:00:55.847
> 
> 标签：c#, naudio

为什么有时在`waveOut.Pause`我做`waveOut.Resume`音频后开始口吃很严重？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:19:16.263

您需要调用`Play`而不是`Resume`.

# salesforce - 案例触发器失败时的 Salesforce 帐户所有者名称

> ID：11864083
> 
> 赞同：0
> 
> 时间：2012-08-08T12:01:11.690
> 
> 标签：salesforce, apex-code

我编写了一个触发器，将帐户所有者名称放在为该帐户创建的案例上。它在我的 200 批量测试中也可以工作和执行。这是代码：

```
trigger CaseBeforeInsertUpdate on Case (before insert, before update) {

   Set<Id> accountIds = new Set<Id>();
   Set<Id> accountOwnerIds = new Set<Id>(); 

   for (Case c : Trigger.new) {
        if(c.AccountId != null) {
            accountIds.add(c.AccountId);
        }       
   }
   Map<Id,Account> accountMap = new Map<Id, Account>([select Id, OwnerId from Account where Id IN :accountIds]);

   for (Account a : accountMap.values()) {
        if(a.OwnerId != null) {
            accountOwnerIds.add(a.OwnerId);
        }
   }

   Map<Id, User> userMap = new Map<Id,User>([select Name from User where Id IN :accountOwnerIds]);

   if(userMap.size() > 0) {
        for(Case c: Trigger.new) {  
            c.MerchantOwner__c = userMap.get(accountMap.get(c.AccountId).OwnerId).name;
        }
   }

} 
```

偶然我发现了一个错误，我无法弄清楚出了什么问题。如果我转到案例列表视图（即我的打开案例）并选择多个案例并关闭它们，我会收到错误：System.NullPointerException：尝试取消引用更新 MerchantOwner 字段的行的空对象。当我在我的测试类中批量关闭案例时，一切正常..

我最好的猜测是我正在尝试为没有附加帐户的案例执行此操作，但据我所知，我试图通过不首先将这些案例添加到 accountIds Set 来不更新这些案例。

有谁知道我做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:27:56.663

我将更改以下 For 循环：

```
 for(Case c: Trigger.new) {  
        c.MerchantOwner__c = userMap.get(accountMap.get(c.AccountId).OwnerId).name;
    } 
```

至

```
 for(Case c: Trigger.new) {  
        if (c.AccountId != null                                        // Make sure there is an Account linked to the Case
          && accountMap.ContainsKey(c.AccountId)                       // Make sure our Account query captured  it
          && accountMap.get(c.AccountId).OwnerId != null               // Make sure that account has an owner
          && usermap.ContainsKey(accountMap.get(c.AccountId).Ownerid)  // Finally make sure our User query found the owner
        ){
            c.MerchantOwner__c = userMap.get(accountMap.get(c.AccountId).OwnerId).name;
        }
    } 
```

# c++ - 如何在类体中调用模板函数？

> ID：11864088
> 
> 赞同：0
> 
> 时间：2012-08-08T12:01:25.617
> 
> 标签：c++, templates, stl, vector, iterator

我编写了以下函数，它在向量中搜索并在向量中查找指针的位置，如果查找成功，则返回迭代器：

```
template<class InputIterator>
InputIterator MainCore::findDeviceAccordingToIP ( const char * value )
{
    std::vector<Device *>::iterator first,last;
    first = this->devList->begin();
    last = this->devList->end();
    Device *temp;

    for ( ;first!=last; first++){
        temp = *first;

        if ( strcmp(temp->endpoint->IPAddress.c_str(),value) == 0)
        {
            return first;
            break;
        }
    }

    //return false;
} 
```

以上cpp文件中的代码我将以下代码放在* .h文件的MainCore类中：

```
template<class InputIterator>    
InputIterator findDeviceAccordingToIP (const char *value ); 
```

现在，当我调用 i 另一个函数时，例如：

```
this->findDeviceAccordingToIP("192.168.2.11"); 
```

现在我有两个问题：

1.  当我编译它时，我收到以下错误：

    `error: no matching function for call to MainCore::findDeviceAccordingToIP(const char [13])`

2.  我如何得到 return T 而只是布尔值和迭代器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:06:08.137

关于问题1，函数模板的模板参数不依赖于函数参数，所以需要显式指定类型：

```
this->findDeviceAccordingToIP<SomeIteratorType>("192.168.2.11"); 
```

此外，模板代码应该在头文件中或在头文件中包含的文件中。它必须直接或间接地包含在客户端代码中。

[请注意，您可以通过调用std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)和合适的仿函数来替换整个函数。

至于问题2，不清楚你的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:17:50.333

上面回答了第一个问题。

对于第二个问题：

您想要返回两种类型的值（迭代器和布尔值），这在 C++ 中是不可能的。你可以有一些可能性

使迭代器成为引用参数并在此返回结果。使返回值返回真/假，表示搜索成功。

或者

`last`如果您找不到该值，请返回。这可以很容易地像这样编码。

```
template<class InputIterator> InputIterator MainCore::findDeviceAccordingToIP ( const char * value ) 
{     
    std::vector<Device *>::iterator first,last;     
    first = this->devList->begin();     
    last = this->devList->end();     
    Device *temp;      
    for ( ;first!=last; first++)
    {         
        temp = *first;          
        if ( strcmp(temp->endpoint->IPAddress.c_str(),value) == 0)
        {  
            break;         
        }     
    }      

    return first; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:03:36.557

我将其更改为以下函数，而不是迭代器，我将迭代器的内容传递为`Device *`：

```
bool MainCore::findDeviceAccordingToIP (const std::string& _IPAddress, Device * devPtr )
{
    std::vector<Device *>::iterator first,last;
    first = this->devList.begin();
    last = this->devList.end();
    Device *temp;

    for ( ;first!=last; first++){
        temp = *first;

        if ( temp->endpoint->IPAddress == _IPAddress )
        {
            devPtr = *first;
            return true;
        }
    }

    return false;
} 
```

所以我得到布尔结果，并通过 ref 得到向量内容的结果，它工作正常。

# android - Android 中的 JUnit 测试 - DialogFragment

> ID：11864092
> 
> 赞同：0
> 
> 时间：2012-08-08T12:01:41.493
> 
> 标签：android, junit, android-fragments

我在 FragmentActivity 中有一个按钮，按下时应该打开一个 DialogFragment。

我想测试它在 Eclipse 中使用 JUnit for Android 是否有效。

通过 Activity，我可以使用 ActivityMonitor。单击按钮时，如何测试是否打开了正确的 Fragment？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:39:23.747

假设您正在打开您的对话框片段，如下所示：

```
DialogFragment dlg = YourDialogFragment.newInstance(..);
dlg.show(getFragmentManager(), "yourDialogTag"); 
```

您可以通过在测试用例中执行此操作来检查它是否已启动并显示：

```
// Click stuff on the UI-thread
getInstrumentation().waitForIdleSync();
Fragment dialog = getActivity().getFragmentManager().findFragmentByTag("yourDialogTag");
assertTrue(dialog instanceof DialogFragment);
assertTrue(((DialogFragment) dialog).getShowsDialog()); 
```

# hibernate - JPA 在 foreach 中使用 setParameter 设置参数就像只设置了一个参数一样

> ID：11864094
> 
> 赞同：1
> 
> 时间：2012-08-08T12:01:46.127
> 
> 标签：hibernate, jpa, parameters

我需要使用从地图中获取的参数进行查询。

```
public String executeQuery(String string, Map<String, String> params) {         
    try {
        Query query = em.createQuery(string);
        System.out.println(em.createQuery(string).getClass());
        for(String key:params.keySet()) {
            query.setParameter(key, params.get(key));
            System.out.println("query.setParameter("+key+","+ params.get(key)+");");                
        }
        List<?> list = query.getResultList();           
        return list.toString();
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }   
} 
```

以下效果很好：

```
Query query = em.createQuery("select u from User u where u.email=:email or u.name=:name");
query = query.setParameter("email","admin");
query = query.setParameter("name","name1");

List<?> list = query.getResultList();
return list.toString(); 
```

我得到两个用户实例，一个用于管理员，一个用于 name1。但是，当我使用上面的代码设置相同的查询时，我只得到一个结果（通常是后一个参数）。

无论我使用 :name 还是 ?1 都没有关系。foreach 中的每个 setParameter() 都有正确的参数。foreach 块之后的查询有两个参数设置正确 - 我用它来检查它（？1 语法）：

```
"Parameters: "+query.getParameter("name").getName()+ ": "+ query.getParameterValue("name")+", "+query.getParameter("email").getName() +": "+query.getParameterValue("email"); 
```

我使用 Glassfish 3.1.2、Hibernate 4.1.5 SP1、MySQL Community Server 5.5。该方法位于无状态会话 bean 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:49:58.677

问题出在地图中，我从一个字符串中解析参数除以换行符。作为拆分参数，我使用了 \n，它在除最后一个单词之外的所有单词的末尾留下了一些空字符。

我应该使用：

```
String[] lines = parameters.split(System.getProperty("line.separator")); 
```

# magento - Magento - 自定义事件模块 - system.log 中未找到类错误

> ID：11864097
> 
> 赞同：0
> 
> 时间：2012-08-08T12:01:49.557
> 
> 标签：magento, magento-1.5

我正在尝试创建一个自定义模块，该模块将在每次销售发生时捕获订单信息并将其发送到 STOMP 服务器。这个想法是创建一个销售事件的实时仪表板。

我已经创建了模块的通用结构，Magento 能够正确识别它，但是代码没有被执行。我已经追溯到 Varien_Autoload 找不到我的班级的事实。

我的配置如下：

**应用程序/etc/modules/PrettySecrets_SalesEvent.xml**

```
<?xml version="1.0"?>
<config>
    <modules>
        <PrettySecrets_SalesEvent>
            <active>true</active>
            <codePool>local</codePool>
        </PrettySecrets_SalesEvent>
    </modules>
</config> 
```

**应用程序/代码/本地/PrettySecrets/SalesEvent/etc/config.xml**

```
<?xml version="1.0"?>
<config>
    <modules>
        <PrettySecrets_SalesEvent>
            <version>0.0.1</version>
        </PrettySecrets_SalesEvent>
    </modules>
    <global>
        <models>
            <prettysecrets_salesevent>
                <class>PrettySecrets_SalesEvent_Model</class>
            </prettysecrets_salesevent>
        </models>
        <events>
            <checkout_onepage_controller_success_action>
                <observers>
                    <prettysecrets_salesevent>
                        <type>singleton</type>
                        <class>prettysecrets_salesevent/observer</class>
                        <method>doStreamToNode</method>
                    </prettysecrets_salesevent>
                </observers>
            </checkout_onepage_controller_success_action>
        </events>
    </global>
</config> 
```

我相信目录结构对 Magento 来说非常重要：

```
app
 code
  local
   PrettySecrets
    SalesEvent
     etc
      config.xml
     Model
      Observer.php 
```

system.log 显示：

> 警告：包含（PrettySecrets_SalesEvent_Model_Observer.php）：无法打开流：第 93 行的 /chroot/home/.../includes/src/Varien_Autoload.php 中没有此类文件或目录

我还验证了 app/code/local 在我的路径中。另外，我已经使用 Mage::log 插入将它调试到 App.php 中。

任何帮助将不胜感激，因为我实际上是在扯头发。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:20:40.167

伙计，您启用了 Magento 编译器，请禁用此功能，`system > tools > compilation`因为编译会将您的文件复制到`include/src/`文件夹中，之后您的所有更改都不会被 magento 看到（至少在您重新编译之前）

# c++ - 为什么好友成员函数不能自动识别为函数模板？

> ID：11864102
> 
> 赞同：5
> 
> 时间：2012-08-08T12:02:07.653
> 
> 标签：c++

C++ 常见问题解答 35.16

[http://www.parashift.com/c++-faq-lite/template-friends.html](http://www.parashift.com/c++-faq-lite/template-friends.html)

```
#include <iostream>

template<typename T>
class Foo {
public:
  Foo(T const& value = T());
  friend Foo<T> operator+ (const Foo<T>& lhs, const Foo<T>& rhs);
  friend std::ostream& operator<< (std::ostream& o, const Foo<T>& x);
private:
  T value_;
}; 
```

作者声称：

'当编译器在类定义中正确地看到友元行时，就会出现障碍。那时它还不知道友元函数本身就是模板**（为什么？类模板成员函数不是默认的函数模板吗？）**；它假设它们是这样的非模板：'

```
Foo<int> operator+ (const Foo<int>& lhs, const Foo<int>& rhs)
{ ... }  

std::ostream& operator<< (std::ostream& o, const Foo<int>& x)
{ ... } 
```

**为什么上述非模板？这些模板不是通过 int 实例化的吗？**

'当你调用 operator+ 或 operator<< 函数时，这种假设会导致编译器生成对非模板函数的调用，但链接器会给你一个“未定义的外部”错误，因为你从未真正定义过那些非模板函数. '

事实上，要让编译器将上面的内容识别为函数模板，程序员必须明确地这样做，如下所示：

```
template<typename T> class Foo;  // pre-declare the template class itself
template<typename T> Foo<T> operator+ (const Foo<T>& lhs, const Foo<T>& rhs);
template<typename T> std::ostream& operator<< (std::ostream& o, const Foo<T>& x); 
```

谁能解释一下？我觉得这很烦人，不知道为什么编译器不只是通过将 T 替换为“int”来实例化 Foo 类的实例，然后就结束了。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:26:33.520

类模板成员函数是模板的一部分，因此用模板实例化，但朋友不是。考虑非模板情况：

```
struct S {
    friend void foo(S);
}; 
```

注意`void foo(S)`此时不必声明；`friend`声明是说，*如果`void foo(S)`定义*了一个函数，那么该函数将有权访问`S`. 它可能永远不会被真正定义，这很好。

使用模板，情况是一样的：

```
template<typename T> struct S {
    friend void foo(S);
}; 
```

这就是说，对于任何类型`T`，*如果`void foo(S<T>)`定义*了一个函数，那么该函数就可以访问`S<T>`. 通过重载，该函数应该是一个具体的函数：

```
void foo(S<char>) { }
void foo(S<int>) { } 
```

编译器不知道您计划稍后提供可用于所有`T`. 相反，如果已经声明了适当的函数模板，那么如果您通过添加尖括号指定它应该被实例化，它将被实例化。

至于为什么必须前向声明模板，没有理由“模板”必须只有一个声明。考虑：

```
#include <iostream>
template<typename T> struct S;
template<typename T> void foo(S<T>);
template<typename T> void foo(S<T *>);
template<typename T> struct S {
    friend void foo<>(S);
};
template<typename T> void foo(S<T>) { std::cout << "template template friend\n"; }
template<typename T> void foo(S<T *>) { std::cout << "template specialization template friend\n"; }
template void foo(S<void *>);
int main() {
    foo(S<int>());
    foo(S<void *>());
} 
```

这里有 的两个特化`foo`，它们都必须前向声明，以便`friend`可以在它们之间进行选择。

# asp.net-mvc-3 - 如何在 Github 上隐藏实体框架和成员资格的连接字符串，稍后将在 AppHarbor 上使用？

> ID：11864103
> 
> 赞同：1
> 
> 时间：2012-08-08T12:02:09.747
> 
> 标签：asp.net-mvc-3, entity-framework, github, asp.net-membership, appharbor

我知道标题看起来有些混乱，所以让我解释一下。:)

我有一个 MVC 3.0 项目，我为其维护一个公共存储库@github，并说项目利用实体框架和成员资格提供程序（所以这是两个单独的连接字符串）。

我遇到的问题是 MS SQL 数据库的 Sequilizer 的“别名”属性，让我在构建时只指定一个要替换的 connectionString 值。因为我不能以编程方式修改 web.config（并且 web.config 转换不适用，因为它会使我的敏感数据在公共 github 存储库上向世界开放），所以我可以选择我想使用的更多 -> 实体或会员资格（另一种解决方案是让我的一个 connectionStrings 易受攻击）。

由于 MembershipProvider 需要在构建时知道 connectionStringName（一切都在 web.config 中指定），我有点不知道如何去做这一切。

任何帮助表示赞赏！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:41:30.383

好吧，伙计们，我想我终于设置好了一切。

我所做的是，我只将别名用于我的普通连接字符串，它将提供会员资格 - 而我覆盖了 ObjectContext 默认构造函数（在“MyProjectEntities.Designer.cs”中）以使用我的配置变量（名为“EntityFramework”）在包含实体框架 connectionString 的 AppHarbor 上设置，如下所示：

```
public MyProjectEntities() : base(ConfigurationManager.AppSettings["EntityFramework"].ToString(), "eTestHubEntities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    } 
```

经过测试并按我希望的方式工作。:)

# perl - Perl GD 库 - 闪烁的 PNG 输出

> ID：11864111
> 
> 赞同：1
> 
> 时间：2012-08-08T12:02:32.210
> 
> 标签：perl, png, gd, libpng

当我试图从 Perl 的 GD 组件（版本 2.46，[http](http://metacpan.org/pod/GD) ://metacpan.org/pod/GD ）获取 PNG 输出时，使用 ImageMagick 打开时生成的图像会闪烁。同样的行为也可以通过以 GIF 格式导出，**但不能以 JPEG 格式**导出。

我使用的示例代码如下：

```
#!/usr/bin/perl                                                                                                 

use GD;
$width = 750;
$height = 600;
$im = new GD::Image($width,$height);

$white = $im->colorAllocate(255,255,255);
$black = $im->colorAllocate(0,0,0);
@colors = ();
open(RGB,"heatmap.lut") || die "Cannot open LUT file!";
@colorLines = <RGB>;
close RGB;
foreach my $color (@colorLines){
    $color =~ s/[\r\n]//g;
    push @colors, $im->colorAllocate(split(/\t/,$color));
}
$im->transparent($white);
$im->interlaced('false');
$counterY = 0;
for (my $y=0;$y<600;$y+=30){
    $counterX=0;
    for (my $x=0;$x<750;$x+=30){
        $randnum = int(rand(26));
        $im->filledRectangle($x+1,$y+1,$x+29,$y+29,$colors[$randnum]);
        $counterX++;
    }
    $counterY++;
}

open(TOPNG,">test.png") || die;
binmode TOPNG;
print TOPNG $im->png;
close TOPNG; 
```

可以在以下链接中看到显示此闪烁行为的视频：http: [//youtu.be/EErvl8E7ijc](http://youtu.be/EErvl8E7ijc)。它在视频中没有清楚地显示，但有时，我想在这些闪烁之间看到我最初绘制的图像。

**当我通过“ identify** ”命令进一步调查 png 时，我发现它在 PsuedoClass 中，而不是从常规 png 获得的常规 DirectClass 输出。

任何想法为什么会发生这种情况或如何解决？

非常感谢！

更多信息：

我工作的远程服务器：Red Hat Enterprise Linux Server release 6.3 (Santiago)

我用来连接的主机系统： Mac OSX Mountain Lion with XQuartz 2.7.2

libpng 版本：1.5.11

ImageMagick 版本：6.5.4-7 2012-04-10 Q16

**编辑：** `heatmap.lut`文件可以在这里找到：http: [//pastebin.com/vgw5MnTD](http://pastebin.com/vgw5MnTD)

# php - 如何从 mysql_fetch_array 添加值？

> ID：11864113
> 
> 赞同：1
> 
> 时间：2012-08-08T12:02:33.567
> 
> 标签：php, mysql

这是我的代码，但它显示了两个不同的值总和。我有每行的总数，它有 2 个值 100 和 200 。它分别显示 100 和 200。但我想要 100 和 200 的总和。总和= 300 我该怎么做？

```
$result2 = mysql_query("select * from price  where dom='$cat'",$db);
while ($myrow2 = mysql_fetch_array($result2))
{
    echo $myrow2["totalwithper"];
} 
```

这是我的表结构

```
CREATE TABLE `price` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `dom` varchar(255) COLLATE utf8_bin NOT NULL,
  `etiket` varchar(255) COLLATE utf8_bin NOT NULL,
  `pricestandart` int(5) NOT NULL,
  `number` int(5) NOT NULL,
  `totalunper` int(5) NOT NULL,
  `discount` int(5) NOT NULL,
  `totalwithper` int(5) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=20 ;

--
-- Dumping data for table `price`
--

INSERT INTO `price` (`id`, `dom`, `etiket`, `pricestandart`, `number`, `totalunper`, `discount`, `totalwithper`) VALUES
(18, 'Alten Group', 'flayer', 100, 1, 100, 10, 90),
(19, 'Alten Group', 'logo', 100, 2, 200, 15, 170); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T19:55:46.993

在过去的几天里，我一直在尝试使该`array_sum()`功能正常工作，它会打印出每个数字，但不会将它们加在一起。但是有了这段代码，它终于对我有用了。

```
 $sum=0;
 $result2 = mysql_query ("select totalwithper from price  where dom='$cat'",$db);
 while($myrow2=mysql_fetch_array($result2))
 {
    $sum=$sum+ $myrow2["totalwithper"];
 }

 echo "sum : $sum"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:03:55.390

```
SELECT Sum(totalwithper) FROM price  WHERE ... 
```

看：

*   [https://en.wikipedia.org/wiki/Aggregate_function](https://en.wikipedia.org/wiki/Aggregate_function)
*   [https://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum](https://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:05:12.567

试试这个：

```
 $result2 = mysql_query ("select sum(totalwithper) from price  where dom='$cat'",$db);
  $myrow2= mysql_fetch_array($result2);
  do{
     echo $myrow2["totalwithper"];
    }
    while($myrow2=mysql_fetch_array($result2)); 
```

对您的代码进行小幅改写：

```
 $result2 = mysql_query ("select sum(totalwithper) from price  where dom='$cat'",$db);
 while($myrow2=mysql_fetch_array($result2))
        {
         echo $myrow2["totalwithper"];
        } 
```

循环求和

```
 $sum=0;
 $result2 = mysql_query ("select totalwithper from price  where dom='$cat'",$db);
 while($myrow2=mysql_fetch_array($result2))
        {
         $sum=$sum+ $myrow2["totalwithper"];
        }

 echo "sum : $sum"; 
```

在 $sum 你会得到总和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:05:59.383

采用

```
$result2 = mysql_query ("select sum(totalwithper) from price  where dom='$cat'",$db); 
```

# ruby-on-rails - Rails 验收测试 - 运行 Foreman

> ID：11864122
> 
> 赞同：0
> 
> 时间：2012-08-08T12:02:46.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acceptance-testing, faye, foreman

我的应用程序使用 Faye、Redis、Resque 和其他服务正常运行，我每次都是从 Foreman 开始的。现在我正在使用 Capybara+RSpec 编写验收测试，我想知道如何使用 Capybara 启动 Foreman（甚至是 Faye 单独）`spec_helper`来测试实时功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:19:21.947

一种选择是在您的测试中不依赖这些服务。我知道[redis](https://rubygems.org/gems/mock_redis)和[resque](https://rubygems.org/gems/resque_spec)有“模拟”对应物，它们的行为类似于这些服务，而实际上不需要运行它们。有些服务可能没有“模拟”版本（我找不到 Faye 的），所以您可能只需要在后台运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:55:25.980

如果您使用`jenkins`CI 服务器，您可以启动`foreman`之前`rspec`启动。

# javascript - 为什么我在实现自动完成时收到“对象不支持自动完成 jquery 方法”运行时错误？

> ID：11864123
> 
> 赞同：1
> 
> 时间：2012-08-08T12:03:11.127
> 
> 标签：javascript, jquery, autocomplete, runtime-error

我已经意识到，对于我的自动完成，我真的不需要使用 ajax 调用（我见过很多使用 ajax 调用的示例），我可以简单地使用以下内容：

```
$(document).ready(function () {
    var myData = jQuery.parseJSON(getProjects());
    $("#inputSearchProject.ClientID").autocomplete(myData);
}); 
```

其中，`getProjects()`是一个小脚本，`TheProjects`是一个属性，它使用我的自动完成的建议 JSON 字符串进行初始化。

```
<script type="text/javascript">
    function getProjects() {
        return '<%= this.TheProjects %>';
    }
</script> 
```

调试时，我注意到 myData 接收了值，但我仍然收到运行时错误：“Microsoft JScript 运行时错误：对象不支持属性或方法'自动完成'” - 即使我已经搜索过，我还没有找到回答这个问题。

编辑：我已经解决了错误（这是一个愚蠢的错误：）新手错误）

我已将代码更改为：

```
$(document).ready(function () {
     var myData = jQuery.parseJSON(getProjects());
     $("[id$='txtSearchProject']").keypress(function () 
   {
     $("[id$='txtSearchProject']").autocomplete(myData);
  })
 }); 
```

因为我希望仅当它检测到我在输入控件中编写了某些内容时才启动自动完成功能。你有什么建议为什么它不起作用？

* * *

谢谢大家的建议。我已经解决了我的问题，但仅限于我从您那里收到的提示。我将把我的一小段代码放在这里，也许有类似问题的人将来会发现它很有用：

```
$(document).ready(function () {
 var myData = jQuery.parseJSON(getProjects());
 $("[id$='txtSearchProject']").keypress(function () 
  {
       $("[id$='txtSearchProject']").autocomplete({ source: myData});
  })
}); 
```

//我已经添加而不是 .autocomplete(my data) --->.autocomplete({ source: myData})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:04:55.780

您缺少 jQuery UI 脚本文件。

在这里获取：

[http://jqueryui.com/download](http://jqueryui.com/download)

# php - 使用 CakePHP 创建 API

> ID：11864124
> 
> 赞同：5
> 
> 时间：2012-08-08T12:03:16.983
> 
> 标签：php, cakephp

我有一个简单的 CakePHP 应用程序，它允许用户创建和编辑帖子。而且我希望在未来的某个时候将应用程序引入PhoneGap。

因此，我创建了一个 API，它吐出 JSON 以用于 AJAX 请求，但我觉得我做错了，因为我没有使用 REST 或做任何不同的事情，将其与控制器中的其他代码区分开来。

例如（注意：对于这个例子，我错过了将其转换为 JSON 的部分）

```
class ApiController extends AppController {

    function index() {
        $posts= $this->Post->find('all');
        $this->set(compact('posts'));
    }
} 
```

要创建一个 url，如：（`domain.com/api/posts/all`将创建自定义路由来实现这一点）然后我可以使用 AJAX 调用它以在我的移动应用程序中使用。

现在我的问题是使用 REST 做这件事会有什么不同？我是构建应用程序的新手，我的优势在于前端而不是后端开发，所以任何指针，对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:53:28.660

如果您关心的是要忠于其余的校长。

那么，通常有4点需要牢记：

*   Web 服务的基本 URI
*   Web 服务支持的数据的 Internet 媒体类型。
    这通常是 JSON、XML 或 YAML，但也可以是任何其他有效的 Internet 媒体类型。
*   Web 服务使用 HTTP 方法（例如，GET、PUT、POST 或 DELETE）支持的一组操作。
*   API 必须是超文本驱动的

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)。

现在，话虽如此，我建议将上面的代码更改为接近下面的伪代码。

1）资源的存在是关键，将您的帖子视为可以通过 URI 访问的资源集合。（身份验证和授权是您可能还需要处理的其他问题）：

api.domain.com/resources/posts => 这个 URI 指向 Posts 的集合

2) 需要定义您希望使用 HTTP 方法/动词支持的一组操作，例如，我们可能希望通过执行以下操作仅检索集合的一个成员：

api.domain.com/resources/posts/12

以下是可以在此 URI 的传入请求中找到的请求标头和正文：

接受：application/json
内容类型：application/json
请求网址：[http](http://api.domain.com/resources/posts/12)
://api.domain.com/resources/posts/12 请求方法：GET

您的应用程序应该能够处理该类型的请求，而无需在 URI 中规定操作，让我们回到第 (1) 点，

而不是这样写一个URI：

domain.com/api/posts/**全部**

您的 URI 应该这样建模：

resources/posts/12 作为资源/类型/项目从集合中检索一个成员，
资源/帖子作为资源/类型与整个集合一起使用。

以下是代码示例：

通用抽象类在这里你可以实现一些常见的任务。如果您正在使用基于服务的实现，这也可以通过服务来完成。

```
abstract class ResourcesController extends AppController {
}

class PostResourcesController extends ResourcesController {

    /**
     * By the time this method is called in your controller/class, you already know
     * that the HTTP method is GET.
     * 
     * @param Request\$_GET $request A request instance
     * @param int           $postId  The post ID to retrieve
     *
     * @return Response A reponse instance
     */
    function getPost(Request $Request, $postId = null)
    {
      /**
       * Here you can use the request object to get
       * the response content type    
       * the requesting client accepts. Example JSON or XML.
       */

       /**
        * using the $postId you can then query your database  
        * to retrieve a post with that ID or use a sort of 
        * service.
        */

         /**
         * Once you implemented a you logic
         * you can build a response to return.
         */
    }
} 
```

这段代码不完整，但我希望它能让您了解真正的 Restful API 可能是什么样子。

确保
“应用程序可以通过知道两件事与资源交互：资源的标识符和所需的操作”的关键。

希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:58:36.520

在 CakePHP 中打开 REST 基本上将正确的 HTTP 方法路由到操作。因此，GET 请求将被路由到索引或视图操作，DELETE 请求将被路由到删除操作，等等。

这为使用您的 API 的人创建了一个非常简单的端点。然后在调用此端点时，根据 HTTP 方法，Cake 会将其路由到正确的操作（原谅任何 HTTP 请求语法错误）：

```
// single endpoint
http://example.com/api/posts 
```

路由到 /posts/index.json 的 GET 请求

```
GET /api/posts.json HTTP/1.1
Host: example.com 
```

路由到 /posts/edit/1.json 的 POST 请求

```
POST /api/posts/1.json HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Content-Length: 24

data[Post][name]=updated 
```

阅读本文将回答您的大部分问题：[http ://book.cakephp.org/2.0/en/development/rest.html](http://book.cakephp.org/2.0/en/development/rest.html)

# ruby-on-rails - ruby on rails 选择集合，从数组中过滤结果 [enumerable]

> ID：11864125
> 
> 赞同：0
> 
> 时间：2012-08-08T12:03:17.650
> 
> 标签：ruby-on-rails, select, arraycollection

当前，我正在尝试将信息馈送限制在选项选择字段中，以仅显示我选择的标准。使用下面的代码，这似乎有效

```
 = select("schedule", :selected_players, User.where(:team_id => current_user[:team_id]) { |p| [full_name(p), p.id] }, {:include_blank => 'None', :prompt => 'Add Players to Lineup'}, :multiple => "multiple") 
```

问题是此代码显示数组字段类型，即`#<User:0xa559830>`

我如何让它显示实际的用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:06:34.560

在模型中定义`.to_s`方法

喜欢这里 [https://github.com/roolo/mwstt/blob/master/app/models/project.rb#L7](https://github.com/roolo/mwstt/blob/master/app/models/project.rb#L7)

此外，所有映射和搜索逻辑都应作为方法放置在模型中，您只需在视图中调用，或在控制器中准备它！

# objective-c - 表格复选框仅用于一个部分objective-c

> ID：11864129
> 
> 赞同：0
> 
> 时间：2012-08-08T12:03:34.100
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个包含 3 个部分和不同行的 uiTableView，我想将复选框添加到我的第三个部分，

我创建自定义单元格并链接 img 和标签

像这张照片：

![在此处输入图像描述][1]

我的自定义单元格代码是：

**。H**

```
: UITableViewCell
@property (strong, nonatomic) IBOutlet UIImageView *checkBox;
@property (strong, nonatomic) IBOutlet UILabel *absenceCode;

@end 
```

**.m**

```
@synthesize checkBox;
@synthesize absenceCode;

- (id)initWithCoder:(NSCoder *)coder
{
self = [super initWithCoder:coder];
if (self) {
    // Initialization code
      checkBox.image = [UIImage imageNamed:@"emptycheck-box.png"];
}
return self;
} 
```

@结尾

**和 UITableViewController viewDidLoad 的代码**

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSMutableArray *keys = [[NSMutableArray alloc] init];
NSMutableDictionary *contents = [[NSMutableDictionary alloc] init];

NSString *staKey = @"Start";
NSString *endKey = @"End";
NSString *absKey= @"Absence";

[contents setObject:[NSArray arrayWithObjects:@"Time: 08:00 Date: Fri,3 Aug, 2012", nil] forKey:staKey];
[contents setObject:[NSArray arrayWithObjects:@"Time: 17:57 Date: Fri,3 Aug, 2012", nil] forKey:endKey];
[contents setObject:[NSArray arrayWithObjects:@"Red",@"Black",@"Blue", nil] forKey:absKey];

[keys addObject:staKey];
[keys addObject:endKey];
[keys addObject:absKey];

[self setSectionKeys:keys];
[self setSectionContents:contents]; 
```

}

**cellForRowAtIndexPath：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

CheckBoxTableViewCell *cell = (CheckBoxTableViewCell*)[tableView 
dequeueReusableCellWithIdentifier:@"CheckBoxTableViewCell"];

        cell.imageView.image=[UIImage imageNamed:@"emptycheck-box.png"];

cell.checkBox.image = image;
cell.absenceCode.text =@"Redddd";
cell.text =contentForThisRow;
return cell;

 } 
```

请你帮我提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:09:56.393

像下面这样的东西应该做你想要的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
    NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]]; 
    NSArray *contents = [[self sectionContents] objectForKey:key]; 
    NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]]; 

    if (indexPath.section != 2) {
            //Set up default cell here.
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier
            cell.textLabel.text =contentForThisRow;
            return cell;
    }
    else {
            CheckBoxTableViewCell *cell = (CheckBoxTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"CheckBoxTableViewCell"];

            cell.imageView.image=[UIImage imageNamed:@"emptycheck-box.png"];
            cell.checkBox.image = image;
            cell.absenceCode.text =@"Redddd";
            return cell;
    }
} 
```

# sqlite - 如何将 SQLite 数据（由 Android 设备收集）导入 Octave 或 MatLab？

> ID：11864143
> 
> 赞同：3
> 
> 时间：2012-08-08T12:04:30.417
> 
> 标签：sqlite, matlab, signal-processing, octave

我有一些由 Android 手机收集的数据，它以 SQLite 格式存储在 SQLite 文件中。我想使用 MatLab 或 Octave 来处理这些数据（分析它）。SQLite 数据存储为文件。

我想知道您将使用哪些命令将此数据导入 MatLab？也就是说，将其放入向量或矩阵中。我是否需要任何特殊的工具箱或包（如数据库包）来访问 SQL 格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:35:35.527

有[mksqlite](http://mksqlite.berlios.de/mksqlite_eng.html)工具。

我个人使用过它，在为我的 matlab 版本获取正确版本时遇到了一些问题。但在那之后，就没有问题了。您甚至可以直接查询数据库文件以减少导入 matlab 的数据量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T01:12:42.520

尽管*mksqlite*看起来不错，但它不适用于 Octave，并且可能不适合作为长期解决方案。将表导出到 CSV 文件是一种选择，但由于涉及到字符串解析，对于较大的数据集，导入（到 Octave）可能会很慢。

作为替代方案，我最终编写了一个小的 Python 脚本来将我的 SQLite 表转换为 MAT 文件，该文件可以快速加载到 Matlab 或 Octave 中。MAT 文件是平台中立的二进制文件，该方法适用于具有数字和字符串的列。

```
import sqlite3
import scipy.io

conn = sqlite3.connect('my_data.db')
csr = conn.cursor()
res = csr.execute('SELECT * FROM MY_TABLE')
db_parms = list(map(lambda x: x[0], res.description))

# Remove those variables in db_parms you do not want to export

X = {}
for prm in db_parms:
    csr.execute('SELECT "%s" FROM MY_TABLE' % (prm))
    v = csr.fetchall()
    # v is now a list of 1-tuples
    X[prm] = list(*zip(*v))

scipy.io.savemat('my_data.mat', X) 
```

# weblogic - 无法创建 weblogic 12.c 部署。部署创建者为空

> ID：11864150
> 
> 赞同：2
> 
> 时间：2012-08-08T12:05:08.527
> 
> 标签：weblogic

```
weblogic.management.DeploymentException: Deployment could not be created. Deployment creator is null.
Message icon - Warning Errors were encountered while performing this operation. 
```

欢迎任何关于*部署创建者*是什么以及为什么它不能识别简单战争文件的部署的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T17:43:35.210

*如果正在部署的应用程序初始*激活失败（管理控制台中配置更改的“激活”），则会出现此错误。例如，如果您忘记配置所需的数据源等，并且应用程序没有因此而出现一些错误。

如果您看到“部署创建者为空”，剩下的唯一选择是删除应用程序并再次部署它。在不重新部署应用程序的情况下修复配置将无济于事。

应用程序启动成功后，“部署创建者”将不再骚扰您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:47:28.713

您可以通过查看服务器日志来查看失败的根源（应用程序无法启动的原因）。或者，如果在 Eclipse 中部署，请查看控制台 Eclipse=>Console=>"Oracle Weblogic Server at localhost"。

# .net - 为什么 webclient 在第二次调用 VB.NET 时不下载

> ID：11864153
> 
> 赞同：0
> 
> 时间：2012-08-08T12:05:13.887
> 
> 标签：.net, vb.net, multithreading, webclient

```
Public Sub downloadFile(ByVal url As String)
        LogFile.displayMessage("add url=" & url)
        downloadURLs.Enqueue(url)

        If t Is Nothing Then
            LogFile.displayMessage("create new thread")
            t = New Thread(AddressOf ThreadedDownloadFile)
        End If

        If Not t.IsAlive Then
            LogFile.displayMessage("start thread")
            t.Start()
        End If

    End Sub

 Private Sub download()
        LogFile.displayMessage("thread running count=" & downloadURLs.Count)
        If downloadURLs.Count > 0 Then
            Dim client = New WebClient()
            AddHandler client.DownloadFileCompleted, AddressOf downloadFileCompleted
            AddHandler client.DownloadProgressChanged, AddressOf downloadProgressChanged

            Dim url = downloadURLs.Dequeue()
            LogFile.displayMessage("downloading url=" & url)
            url = WebRequest.Create(url).GetResponse.ResponseUri.AbsoluteUri
            Dim fileName = url.Substring(url.LastIndexOf("/") + 1)

            progress = 0
            LogFile.displayMessage("downloading NOW NOW NOW url=" & url)
            client.DownloadFile(New Uri(url), localAddress & fileName)
        End If
        LogFile.displayMessage("thread end")
    End Sub
    Private Sub downloadFileCompleted() 'ByVal sender As Object, ByVal e As DownloadStringCompletedEventArgs)
        LogFile.displayMessage("download complete ") ' & e.Result)

        LogFile.displayMessage("set next download going")
        download()
    End Sub 
```

但在第二轮它会获取 url，然后在下载文件处停止。它也这样做`downloadfileasync`。

我看到很多网页都在讨论这个问题，但没有一个能解决它

有谁知道如何解决这个问题？

额外细节

我确实开始了一个新线程，但无论我如何做，webclient.downloadfile 或 downloadfileasync 等它们第一次看起来都很好，但是在第二次调用时，它们似乎确实会在文件出现时下载，但是永远不会进行进度调用，并且永远不会返回完成。

我试过处理，然后什么都没有，然后重新声明它，甚至在处理后强制垃圾收集，什么都没有。

但它仍然不想工作。

我正在探索自己通过流进行传输

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:03:33.517

我建议该线程仍然处于活动状态，因为您不检查该情况。

尝试如下更改代码以测试我的理论：

```
If Not t.IsAlive Then
    LogFile.displayMessage("start thread")
    t.Start()
else
    LogFile.DisplayMessage("Thread was still active")
End If 
```

我本来以为您每次都想开始一个新线程？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:36:59.347

问题与下载无关，是这段代码：-

 ``Dim wrequest = WebRequest.Create(url) Dim wresponce = wrequest.GetResponse()

```
 'save new url to be returned
    return wresponce.ResponseUri.AbsoluteUri 
````  `我现在在使用后调用 close 和 null 实例。

`'making sure to close off unneeded resources after use wresponce.Close() wresponce = Nothing wrequest = Nothing```

# php - 丹麦语 Æ 被识别为 2 个字母而不是 1 个字母

> ID：11864155
> 
> 赞同：2
> 
> 时间：2012-08-08T12:05:20.673
> 
> 标签：php

我有一个简单的代码，如下所示：

`echo strlen('Grækenland');`

它返回 11 而不是预期的 10

服务器在丹麦，语言环境设置为丹麦，但它仍然返回 11...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:07:36.433

`strlen`是将字符串理解为字节数组并假设一个字节 == 一个字符的朴素 PHP 核心函数之一。使用[`mb_strlen`](http://php.net/mb_strlen)正确的编码参数根据字符串的编码实际计算字符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:08:43.653

```
<?php
  echo mb_strlen('Grækenland', 'utf8');
?> 
```

# android - 如何在android中将透明背景设置为自定义对话框

> ID：11864162
> 
> 赞同：13
> 
> 时间：2012-08-08T12:05:43.047
> 
> 标签：android, dialog

我需要将我的自定义对话框设置为透明的。

示例代码：

```
Dialog dialog;
@Override
protected Dialog onCreateDialog(int id) 
{ 
    switch(id) 
    {
        case 1:
            AlertDialog.Builder builder = null;
            Context mContext = this;
            LayoutInflater inflater = ( LayoutInflater ) mContext.getSystemService( LAYOUT_INFLATER_SERVICE );
            View layout = inflater.inflate( R.layout.about_page, ( ViewGroup ) findViewById( R.id.about_Root ) );
            builder = new AlertDialog.Builder( mContext );
            builder.setView( layout );
            dialog = builder.create();
            break;
    }
    return dialog;
} 
```

如何设置透明对话框。

我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/about_Root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/alert_page_border"
    android:orientation="vertical" >        
    <TextView 
        android:id="@+id/about_Title"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:gravity="center"
        android:layout_weight="1"
        android:textSize="25dip"
        android:textColor="@android:color/white"
        android:textStyle="bold|italic"
        android:text="Welcome" />
</LinearLayout> 
```

代码 Alert_page_border.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">     
    <solid android:color="#3b3b3b" />
    <stroke 
        android:width="3dp"
        android:color="#ffffff" />
    <padding 
        android:left="10dp"
        android:top="10dp"
        android:right="10dp"
        android:bottom="10dp" /> 
    <corners 
        android:radius="2dp" />     
</shape> 
```

示例截图：

![在此处输入图像描述](../Images/c07a15483c0b40a277adf8c926f7f05c.png)

如何避免这种块颜色。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-06T11:01:17.467

使用对话框而不是 AlertDialog

```
final Dialog dialog = new Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
dialog.setContentView(R.layout.splash);
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T12:24:28.453

如果您使用的是 API >= 11，您可以尝试为您的 Dialog 设置一个主题，如下所示：

```
new AlertDialog.Builder(mContext , android.R.style.Theme_Translucent_NoTitleBar_Fullscreen); 
```

或者您可以尝试将背景设置为透明：

```
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(0)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T12:29:49.920

只需创建一个样式并将其应用于您的对话框

```
 <style name="myDialogTheme" parent="@android:style/Theme.Dialog">
        <item name="android:windowBackground">@color/Transparent</item>
        <item name="android:windowIsFloating">false</item>
        <item name="android:windowNoTitle">true</item>
    </style> 
```

然后，使用这个主题创建你的对话框；

```
 Dialog myDialog = new Dialog(this,R.style.myDialogTheme) {
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.about_page);
        }
    }; 
```

希望这将帮助您实现目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T10:04:29.447

你的这个问题准确地描述了我的问题。我尝试了我在这个线程以及其他几个线程中偶然发现的每一个解决方案。没有任何效果。最后我偶然发现了[这个线程](https://stackoverflow.com/q/10484888/1108032)和[相应的答案](https://stackoverflow.com/a/10485055/1108032)。

我必须创建一个自定义对话框类。所以我做到了，它奏效了。实际上，以下样式对我来说就足够了：

`colors.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="transparent_black">#66000000</color>
</resources> 
```

`styles.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="custom_dialog_theme" parent="@android:style/Theme.Translucent">
        <item name="android:windowBackground">@color/transparent_black</item>
        <item name="android:windowIsFloating">true</item>
    </style>
</resources> 
```

对话框类的代码：

```
import android.app.Dialog;
import android.content.Context;

import my.app.com.android.R;

public class CustomDialog extends Dialog {
    public AddBookCustomDialog(final Context context) {
        super(context, R.style.custom_dialog_theme);
        this.setContentView(R.layout.add_book_dialog);
    }
} 
```

以及我如何在活动代码中使用此对话框：

```
CustomDialog customDialog = new CustomDialog(this);
customDialog.show(); 
```

我不知道为什么我必须创建一个自定义类才能考虑到主题。现在我已经实现了我想做的：透明对话框。下一场战斗将是定位正负按钮，只要我不能再使用`AlertDialog.Builder`. 希望我的代码能对你有所帮助。

还要注意 alpha 的低值 - 甚至可以尝试使用 00 以确保您的配置是否有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T12:24:51.567

尝试这个，

```
layout.setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

在此行之后添加上面的代码。

```
View layout = inflater.inflate( R.layout.about_page, ( ViewGroup ) findViewById( R.id.about_Root ) ); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-01T06:14:00.160

用于`dialog.getWindow().setBackgroundDrawable(null)`删除默认背景。

这是供参考的文档：

> ```
> /*** Set the background to a given Drawable, or remove the background. If the
>    * background has padding, this View's padding is set to the background's
>    * padding. However, when a background is removed, this View's padding isn't
>    * touched. If setting the padding is desired, please use
>    * {@link #setPadding(int, int, int, int)}.
>    *
>    * @param d The Drawable to use as the background, or null to remove the
>    *        background
>    */ 
> ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T12:17:58.953

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/a"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" android:background="#00000000">

 <!-- Write your LinearLayout code here -->

 </RelativeLayout> 
```

试试这个代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-10T13:04:29.880

只需删除

来自 Alert_page_border.xml

# java - 英语单词到音节的正则表达式语法规则

> ID：11864167
> 
> 赞同：-1
> 
> 时间：2012-08-08T12:06:13.107
> 
> 标签：java, regex

我正在尝试使用正则表达式将单词转换为音节。转换的正则表达式是什么。我找到了印度尼西亚语：

```
[^aeiou]?[aeiou]((ng|[^aeiou])(?![aeiou]))? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:08:06.663

众所周知，英语是不规则的——你根本无法从拼写中辨别单词的发音。当然，没有任何正则表达式会接近你想要的。

（如果您要对此有合理的了解，则需要有一套规则来将单词标记为音节，以及（大量）例外和特殊情况列表。这绝对不可能一种常规语言，作为一个成熟的程序将非常具有挑战性。）

# javascript - 在 HTML/Javascript 中滚动

> ID：11864168
> 
> 赞同：0
> 
> 时间：2012-08-08T12:06:30.570
> 
> 标签：javascript, css, html

我一直在尝试实现滚动条来滚动画布的内容。

我所做的基本上是为滚动条创建一个`div`溢出设置为的内容，并根据画布内容的宽度/高度创建一个宽度/高度不同的内部。`scroll``div`

`onscroll`当我在两个滚动条中的任何一个上收到事件时，我可以使用`scrollLeft`和`scrollTop`属性来设置移动画布内容需要多少像素。

我注意到虽然垂直滚动条按预期工作，但改变水平滚动条的内部宽度并没有做任何事情。

我的印象是这样的；

```
<div id='outer'>
    <div id='inner'>
    </div>
</div>

<style>
     div#outer {
         width : 500px;
         height : 50px;
         overflow-x : scroll;
     }

     div#inner {
         width : 20000px;
     }
</style> 
```

将创建一个`div`宽度为 500px 的块，带有一个水平滚动条，允许我们滚动内部`div`20000px 的宽度。

但由于某种原因，它不适用于水平滚动条（[示例](http://jsfiddle.net/8medk/12/)），而适用于垂直滚动条（[示例](http://jsfiddle.net/tpSgf/1/)）。

为什么会这样？这与我`style.width`对内部的使用方式有关`div`吗？

我该怎么做才能获得有效的水平滚动条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:17:36.470

如果您提供最小高度或将内容添加到宽度大于容器的内部元素，它会起作用。

```
bar.style.minHeight = '1px'; 
```

[**小提琴**](http://jsfiddle.net/ult_combo/8medk/13/)

出于这个原因，我敢打赌，没有内容（`0px`高度）的块元素的显示方式与元素类似`display:none`。

# javascript - 如何将 mouseover 和 mouseout 功能转换为单击事件

> ID：11864172
> 
> 赞同：1
> 
> 时间：2012-08-08T12:06:46.170
> 
> 标签：javascript, jquery

我想将此功能从 mouseover 和 mouseout 转换为 click 事件 下面是代码。

```
var IdAry=['slide2','slide3','slide4','slide5','slide8','slide9','slide12','slide13','slide14','slide15','slide16'];
window.onload=function() {
 for (var zxc0=0;zxc0<IdAry.length;zxc0++){
  var el=document.getElementById(IdAry[zxc0]);
  if (el){
   el.onmouseover=function() {
     changeText(this,'hide','show')
    }
   el.onmouseout=function() {
     changeText(this,'show','hide');
    }
  }
 }
}
function changeText(obj,cl1,cl2) {
   obj.getElementsByTagName('SPAN')[0].className=cl1;
   obj.getElementsByTagName('SPAN')[1].className=cl2;
} 
```

下面是 HTML 部分

```
<div id="graphics">
                    <img src="images/circle-bg.jpg" alt="" class="circleBg"/>
                    <div class="row1">
                        <a href="#" id="slide1" id="selectedSlide">
                            <span id="span1"></span>
                            <span class="hide"></span>
                        </a>
                        <a href="#" id="slide2">
                            <span id="span1"></span>
                            <span class="hide">At this stage, we sit down together and discuss your life goals and begin to develop a plan for funding them. Without knowing where you want to go, we can't help get you there! This is the time to ask a lot of questions and get to know each other. </span>                      
                        </a>
                        <a href="#" id="slide3">
                            <span id="span1"></span>
                            <span class="hide">We need to know your current income and expenses in order to gain a better understanding of resources that can be applied toward your financial goals. We also determine the appropriate size of your emergency fund. </span>
                        </a>
                        <a href="#" id="slide4">
                            <span id="span1"></span>
                            <span class="hide"></span>                      
                        </a>
                    </div>
                </div> 
```

目前，当用户将鼠标悬停在 id slide1、slide2、slide3.. 等的锚标记上时，它会将类显示添加到一个跨度并隐藏到另一个跨度，反之亦然。

因此，如果可以将此功能转换为单击事件而不是 mouseover 和 mouseout。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:17:57.003

我假设您想在每次点击时切换。

在这里，我在一个单独的函数中进行处理程序分配，以便每个处理程序都可以访问自己的局部变量。

然后我将`"show"`and`"hide"`放在该函数内的一个数组中，每次单击时，数组都会反转，并传递给`changeText`using`.apply`来调用它。

```
var IdAry = ['slide2', 'slide3', 'slide4', 'slide5', 'slide8', 'slide9', 'slide12', 'slide13', 'slide14', 'slide15', 'slide16'];
window.onload = function () {
    for (var zxc0 = 0; zxc0 < IdAry.length; zxc0++) {
        var el = document.getElementById(IdAry[zxc0]);
        if (el) {
            setUpHandler(el);
        }
    }
}

function setUpHandler(el) {
    var state = ["show", "hide"];

    el.onclick = function () {
        changeText.apply(this, this, state.reverse());
    }
    el = null;
}

function changeText(obj, cl1, cl2) {
    obj.getElementsByTagName('SPAN')[0].className = cl1;
    obj.getElementsByTagName('SPAN')[1].className = cl2;
} 
```

* * *

如果您不喜欢每次单击都反转一个短数组的想法，那么您可以这样做......

```
function setUpHandler(el) {
    var ab = true;

    el.onclick = function () {
        ab = !ab
        changeText(this, 
                   ab ? "show" : "hide", 
                   ab ? "hide" : "show");
    }
    el = null;
}

function changeText(obj, cl1, cl2) {
    obj.getElementsByTagName('SPAN')[0].className = cl1;
    obj.getElementsByTagName('SPAN')[1].className = cl2;
} 
```

* * *

或者因为你标记了 jQuery，你可以这样做......

```
$("#" + IdAry.join(",#")).toggle(function() { changeText(this, "hide", "show"); }),
                                 function() { changeText(this, "show", "hide"); })); 
```

* * *

```
var prev;

function changeText(obj, cl1, cl2) {

    obj.getElementsByTagName('SPAN')[0].className = cl1;
    obj.getElementsByTagName('SPAN')[1].className = cl2;

    if (prev && obj !== prev) {
        prev.getElementsByTagName('SPAN')[0].className = "";
        prev.getElementsByTagName('SPAN')[1].className = "";
    }
    prev = obj
} 
```

# geolocation - 如何获取用户的地理位置？

> ID：11864174
> 
> 赞同：5
> 
> 时间：2012-08-08T12:06:54.313
> 
> 标签：geolocation

在许多网站上，我看到打印出我当前所在的城市（例如“Hello to Berlin.”）。他们是怎么做到的？为此需要什么？我想主要部分是这里的 javascript，但是在我自己的应用程序中实现这样的东西需要什么？（或者 Rails 有什么宝石吗？）

另外，我还想问一件事-我对州列表（通常在选择框中）很感兴趣，其中用户选择他的州（比如说德国），根据州值在另一个选择中显示所有地区在德国和选择地区后，将显示所选地区中的各个城市。

是否有可能在任何地方获得这个庞大的州/城市/地区数据库？在我们的应用程序中有类似的东西会很有趣，但我不知道这些列表在哪里......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:18:33.400

您需要一个支持 geolocation api 的浏览器来获取用户的位置（但是，您需要用户的同意（[此处](http://ctrlq.org/maps/address/)的示例）才能这样做（大多数较新的浏览器支持该功能，包括 IE9+ 和大多数移动操作系统的浏览器，包括 Windows Phone 7.5+）。

你所要做的就是使用 JavaScript 来获取位置：

```
if (window.navigator.geolocation) {
    var failure, success;
    success = function(position) {
      console.log(position);
    };
    failure = function(message) {
      alert('Cannot retrieve location!');
    };
    navigator.geolocation.getCurrentPosition(success, failure, {
      maximumAge: Infinity,
      timeout: 5000
    });
} 
```

The `position`object will hold latitude and longitude of the user's position (however this can be highly inaccurate in less densely populated areas on desktop browsers, as they do not have a GPS device built in). To explain further: Here in Leipzig in get an accuracy of about 300 meters on a desktop computer - i get an accuracy of about 30 meters with my cell phone's GPS device.

You can then go on and use the coordinates with the [Google Maps API](https://developers.google.com/maps/documentation/javascript/) (see [here for reverse geocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)) to lookup the location of the user. There are a [few gems for Rails](https://stackoverflow.com/questions/903457/ruby-on-rails-gem-for-google-map-integration), if you want. I never felt the need to use them, but some people seem to like them.

As for a list of countries/cities, we used the data obtainable from [Geonames](http://download.geonames.org/export/dump/) once in a project, but we needed to convert it for our needs first.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:06:40.617

I've found `getCurrentPosition()` to often be inaccurate since it doesn't spend a lot of time waiting on the GPS to acquire a good accuracy. I wrote a small piece of JavaScript that mimics `getCurrentPosition()` but actually uses watch position and monitors the results coming back until they are better accuracy.

Here's how it looks:

```
navigator.geolocation.getAccurateCurrentPosition(onSuccess, onError, {desiredAccuracy:20, maxWait:15000}); 
```

Code is here - [https://github.com/gwilson/getAccurateCurrentPosition](https://github.com/gwilson/getAccurateCurrentPosition)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T09:08:04.810

Correc syntax would be :

```
navigator.geolocation.getCurrentPosition(successCallBack, failureCallBack); 
```

Use :

```
 navigator.geolocation.getCurrentPosition(
        function(position){
            var latitude  = position.coords.latitude;
            var longitude = position.coords.longitude;
            console.log("Latitude : "+latitude+" Longitude : "+longitude);
        },
        function(){
            alert("Geo Location not supported");
        }
    ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-31T22:36:31.490

If you prefer to use ES6 and promises here is another version

```
function getPositionPromised() {
  function successCb(cb) {
    return position => cb(position);
  }

  function errorCb(cb) {
    return () => cb('Could not retrieve geolocation');
  }

  return new Promise((resolve, reject) => {
    if (window.navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(successCb(resolve), errorCb(reject));
    } else {
      return reject('No geolocation support');
    }
  })
} 
```

And you can use it like this:

```
getPositionPromised()
  .then(position => {/*do something with position*/})
  .catch(() => {/*something went wrong*/}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T12:11:47.413

互联网服务提供商购买了大量的 IP 地址，因此您最有可能看到的是您的 IP 回溯到已知的 ISP。他们有一个包含 ISP 及其在世界上的位置的数据库，因此他们可以尝试查看您来自哪里。您可以尝试使用[http://www.ipaddresslocation.org/](http://www.ipaddresslocation.org/)之类的网站来完成您的工作。如果您环顾四周，肯定会有一个站点允许您输入 IP 并获取位置，因此您只需使用访问者的 IP 向该站点发送 POST 请求并从响应中获取位置。

~~或者，您可以尝试查找具有位置以及已分配 IP 范围的哪些块的 ISP 数据库。你可能会为了钱找到一个，但一个免费的可能更难找到。~~ 或者，查看这个免费数据库[http://www.maxmind.com/app/geolite](http://www.maxmind.com/app/geolite)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T12:17:23.320

这是另一个在 PHP 中查找位置的 api，

[http://ipinfodb.com/ip_location_api.php](http://ipinfodb.com/ip_location_api.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-27T18:57:00.887

I have been using geoip.maxmind.com for quite a while and it works 100%. It can be accessed via HTTP requests.

# ruby-on-rails - 回形针 Errno::EACCES（权限被拒绝 - /system）

> ID：11864175
> 
> 赞同：7
> 
> 时间：2012-08-08T12:06:57.527
> 
> 标签：ruby-on-rails, paperclip, ruby-on-rails-3.2

我的生产环境是：ruby 1.9.2-p320，rails 3.2.7，paperclip 3.1.4，mysql，Ubuntu 8.10 x86 64bit。

当我尝试使用回形针上传文件时出现 Errno:EACCES Permission denied /system 错误。不用说在本地不会发生这种情况。我检查了公共目录权限，它是 775，公共/系统权限是 777 以及它的所有内部目录。tmp 目录权限也是：775。此外，用于部署应用程序的用户是 www-data:root

模型的附件设置如下：

```
has_attached_file :fichier,
        :path => "/system/:attachment/:id/:style/:filename",
        :url => "/system/:attachment/:id/:style/:filename" 
```

我不知道为什么我会收到这个错误。有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T13:11:47.917

您的代码不会尝试将上传的文件保存在：

```
/path/to/app/public/system/:attachment/:id/:style/:filename 
```

但在：

```
/system/:attachment/:id/:style/:filename 
```

试试这个：

```
has_attached_file :fichier,
    :path => ":rails_root/public/system/:attachment/:id/:style/:filename",
    :url => "/system/:attachment/:id/:style/:filename" 
```

# java - 创建地图集合以查找文本中出现的单词并将它们求和

> ID：11864176
> 
> 赞同：0
> 
> 时间：2012-08-08T12:07:03.390
> 
> 标签：java

我有文本（可以不时更改），我需要传入主要参数，并且我需要创建 Map 集合来计算放置单词和出现的次数。

```
aaa bbb cccc aaaa

Result 
(aaa,2
bbb,1
ccc,1
.... 
```

在地图收集中做到这一点的最佳方法是什么？

我看到了几个**Multiset**的例子，但我想知道如何在**Map** **集合中做到这一点。**

我已尝试使用以下代码，但在计数器中看不到单词和出现次数

```
 for(String Text:args){
        System.out.println(Text);

        String[] words=Text.split(" ");

        HashMap<String,Integer> counter=new HashMap<String,Integer>();
        for (String w: Arrays.asList(Text)){
          Integer num=counter.get(w);
          if (num!=null)
              counter.put(w,num+1);
          else
              counter.put(w,1);
        }   

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:09:12.593

最好的方法是使用一个用于计算频率的[Multiset 。](http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/Multiset.html)[这](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)是教程。但是，您应该依赖一个名为[guava-libraries 的库](http://code.google.com/p/guava-libraries/)。

# php - php pdo two nealry similar selects

> ID：11864177
> 
> 赞同：1
> 
> 时间：2012-08-08T12:07:07.477
> 
> 标签：php, pdo

I´m trying to get uses to the PHP PDO Syntax. Maybe somone can have a look at this peace of code. It seems it´s a bit much lines for little effort.

I catch a User Post-Input (ID). Know I need for calculation reason the values BejagFlach from all Users (the sum of them) and the single value BejagFlach from the User identified by the ID. Do I need two querys for this like here? or is there are shorter/better way?

```
/* Fetch POST Data */
$User_Num = $_POST['User_Num'];

/* Build query for one User */
$dbSelect =  $objDb->prepare("SELECT BejagFlach,Name FROM Benutzer WHERE lfdNr = :User_Num");
$dbSelect -> setFetchMode(PDO::FETCH_ASSOC);  
$dbSelect->execute(array(':User_Num' => $User_Num));

/* Build query for all Users */
$dbSelect2 =  $objDb->prepare("SELECT BejagFlach FROM Benutzer");
$dbSelect2 -> setFetchMode(PDO::FETCH_ASSOC);  
$dbSelect2->execute();

/* Output + Calculate */    
while($row = $dbSelect->fetch()) {  
    $totalUser +=  $row['BejagFlach'];
    $who = utf8_encode($row['Name']);
}  

/* Output + Calculate */    
while($row = $dbSelect2->fetch()) {  
    $totalAll += $row['BejagFlach'];
} 
```

Kind regards, toni

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:13:59.023

No, it doesn't seem too much?

The only thing I would change, is if you are only after the number of records matched, use [rowCount](http://php.net/manual/en/pdostatement.rowcount.php)

```
<?php
    $sel = $dbh->prepare('select * FROM fruit');
    $sel->execute();

    /* Return number of rows that were deleted */
    print("Return number of rows that were selected:\n");
    $count = $sel->rowCount();
    print("Seleted $count rows.\n");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:14:37.130

Since you need at least your second query, I would do like this so you do only 1request to the database :

```
$dbSelect =  $objDb->prepare("SELECT BejagFlach,lfdNr FROM Benutzer");
$dbSelect -> setFetchMode(PDO::FETCH_ASSOC);  
$dbSelect ->execute();
while($row = $dbSelect->fetch()) {  
    $totalAll +=  $row['BejagFlach'];
    if( $row['lfdNr'] == $UserNom) {
        $totalUser += $row['BejagFlach'];
        $who = utf8_encode($row['Name']);
    }
} 
```

# jquery - jQuery将href添加到字符串

> ID：11864184
> 
> 赞同：0
> 
> 时间：2012-08-08T12:07:40.117
> 
> 标签：jquery

我正在寻找将属性（href）添加到表的 td 中。

我猜jQuery会工作！

我需要帮助请...

网址：`http://mysite`

原表：

```
<table>
    <thead>
        <tr>
            <th>Type</th>
            <th>Name</th>
            <th>Url</th>
        </tr>
    </thead>
    <tbody>
        <tr class='Collection'>
            <td>Collection</td>
            <td>Collection1</td>
            <td>/Collection1</td>
        </tr>
        <tr class='Site'>
            <td>Site</td>
            <td>Site1</td>
            <td>/site1</td>
        </tr>
    </tbody>
</table> 
```

所以结果是：

```
<table>
    <thead>
        <tr>
            <th>Type</th>
            <th>Name</th>
            <th>Url</th>
        </tr>
    </thead>
    <tbody>
        <tr class='Collection'>
            <td>Collection</td>
            <td>Collection1</td>
            <td><a href="http://mysite/Collection1">/Collection1</a></td>
        </tr>
        <tr class='Site'>
            <td>Site</td>
            <td>Site1</td>
            <td><a href="http://mysite/site1">/site1</a></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:16:59.233

假设您的意思是“将链接添加到`td`表中”，请尝试以下操作：

```
$('table tbody tr').each(function() {
    var cell = $('td:last', this),
        url  = $(cell).text();

    $(cell).wrapInner('<a href="' + url + '">');
})​ 
```

演示：http: [//jsfiddle.net/4hMey/1/](http://jsfiddle.net/4hMey/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:17:40.230

给 td 你想改变一个类，这样你就可以用 jQuery 轻松选择它们，然后改变 html 内容。

```
<td class="MYCLASS"><a href="http://mysite/site1">/site1</a></td>

$('.MYCLASS').each(function() {
    var text = $(this).html();
    $(this).html('<a href="http://mysite' + text + '">' + text + '</a>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:27:17.717

如果您总是知道最后一个 td 需要链接，那么您可以执行以下操作：

```
var urlTd = $('table tbody td:last-child');
urlTd.wrapInner('<a href="http://mysite' + urlTd.html() + '" />'); 
```

这是一个显示它工作的[jsFiddle 。](http://jsfiddle.net/ZHLS3/)

# scala - 如何防范重复请求？

> ID：11864188
> 
> 赞同：3
> 
> 时间：2012-08-08T12:07:52.407
> 
> 标签：scala, web-applications, playframework, playframework-2.0

我们在网页游戏中有一个按钮供用户收集奖励。应该只单击一次，在收到请求后，我们会将其标记为在 DB 中收集。

我们已经阻止了客户端中的按钮重复点击。但是，如果人们在短时间内将包裹多次重新发送到我们的服务器，那将无济于事。

我想要的是一种从服务器端阻止它的方法。

我们在服务器端使用 Playframework 2 (2.0.3-RC2)，到目前为止它是无状态的，我很想像这样使用 Set 来保护：

```
if processingSet has userId then BadRequest
else put userId in processingSet and handle request
     after that remove userId from that Set 
```

但是后来我不得不面对像[更新Scala集合线程安全的](https://stackoverflow.com/questions/6867702/updating-scala-collections-thread-safely)问题，并且一旦我们在负载平衡后面有多个服务器，仍然无法阻止用户。

我正在考虑的一种可能性是在 DB 中有一个表来代替上面的 processingSet，但这会导致每个请求 1+ DB 操作，有没有更好的解决方案~？

谢谢~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:26:45.020

在这种情况下，额外的数据库操作是相对“便宜”的解决方案。如果您打算永久保存按钮状态，则应该使用它。

如果按钮仅在一段时间内被禁用（例如直到游戏结束），您也可以考虑使用[缓存 API](http://www.playframework.org/documentation/2.0.2/ScalaCache)，但请记住，这不适用于应该长时间存储的解决方案（它不应该是被视为数据库替代品）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T15:50:22.110

鉴于您使用的是 Mongo，因此没有跨越单独集合的事务，我认为您可能可以使用[原子操作](http://www.mongodb.org/display/DOCS/Atomic+Operations)来实现这个守卫- 即“如果当前更新”，这实际上是 CompareAndSwap。

假设您有一个像“rewards”这样具有“collected”属性的集合，您可以将collected标志更新为true，仅当它当前为false并且该操作没有失败时，您可以继续应用奖励知道对于任何其他请求，相同的操作将失败。

# sql - 两个 sql 表在 word 表中有 197000 行，第二个是 wp_posts 包含 60000 行想要从第一个中减去第二个第二个表？

> ID：11864190
> 
> 赞同：-2
> 
> 时间：2012-08-08T12:08:06.963
> 
> 标签：sql, wordpress

从过去 3 天开始，我在 google 上进行了很多搜索，得到了很多解决方案，但对于小型数据库来说效果不佳；

像下面

```
 SELECT title FROM word o
WHERE NOT EXISTS (SELECT 1
FROM wp_posts c
WHERE c.post_title = o.title) 
```

请为我提供一个有效的解决方案，以便像字典网站一样快速搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:23:13.100

不幸的是 MySQL 不支持`EXCEPT`语法，所以我`LEFT JOIN`在这里使用：

```
SELECT title
FROM word o

/* try joining a wp_post based on title */
LEFT JOIN wp_posts c
       ON c.post_title = o.title

/* LEFT JOIN couldn't join anything? Good for us: */
WHERE c.ID IS NULL /* you can use any NOT NULL field here, not just ID */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:15:52.690

尝试

```
SELECT    title 
FROM      word 

EXCEPT

SELECT    post_title 
FROM      wp_posts 
```

如果这取决于您使用的 DBMS，但是...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:18:28.327

你应该检查加入，也许它可以帮助你

```
SELECT title FROM word o 
INNER JOIN wp_posts wp
ON p.title <> wp.post_title 
```

# javascript - 模板加载事件

> ID：11864192
> 
> 赞同：1
> 
> 时间：2012-08-08T12:08:07.927
> 
> 标签：javascript, html, meteor

我正在使用 Meteor，所以有人可以建议我在显示（未加载）模板后可以处理的事件是什么......？例如，我有一个显示模式弹出窗口的模板。现在我想在模板“显示”（未加载）之后做一些事情。请建议我如何处理相应的事件。我努力了，

```
<template name = "SendMessage">

//modal popup code
{{check}}
</template> 

Template.SendMessage.check = function(){
alert("load");
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:52:49.280

对于从 0.4.0 预览版开始的 Meteor，您可能希望使用[`Template.myTemplate.rendered`](http://docs.meteor.com/#template_rendered)布尔值来跟踪 Template 对象中的状态，如下所示（因此每次更新模板的一部分时都不会调用它）：

```
Template.myTemplate.rendered = function() {
    if(!this._rendered) {
      this._rendered = true;
      alert('load');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:49:39.670

您可以通过这种 hacky 方式实现：

```
Template.SendMessage.check = function(){
   Meteor.defer(function(){ 
         //modal code
   });
}; 
```

或者更hacky

```
Template.SendMessage.check = function(){
  setTimeout(function(){    
         //modal code
   },0);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T14:47:57.093

假设您有一个模板，它只呈现一次，但想在 url 更改时做出反应，例如加载不同的模态等等。如果是这种情况，这是一种可能的方式。

```
Template.PageDetail.onRendered(function(){
    this.autorun(() => { 
        FlowRouter.watchPathChange();
        // do the thing!
        yourFunction();
    })
}) 
```

# iphone - iOS 检查对象是否可以保留

> ID：11864194
> 
> 赞同：0
> 
> 时间：2012-08-08T12:08:18.677
> 
> 标签：iphone, objective-c, ios

我有一个带有 id 参数的方法。我的班级也有一个 id 作为属性。我的问题是在 init 方法中是否有一种方法可以确定是否可以保留传递的参数，以便我可以执行以下操作：

```
someProperty = [idParameter retain]; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:18:47.830

所有 Objective-C 对象（即任何从`NSObject`类继承或实现`NSObject`协议的对象）都实现`retain`. 它由`NSObject`类实现，并且是协议的必需方法，因此您不能拥有无法调用的 Objective-C 对象`retain`。

在这些情况下，您唯一不能调用它的情况是您的类型变量`id`未指向 Objective-C 对象。这将是一个错误，不要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:10:20.083

每个继承自 NSObject 的对象都有一个`respondsToSelector:`方法。（[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)）

因此，您可以编写：

```
if ([idParameter respondsToSelector:@selector(retain)])
    someProperty = [idParameter retain]; 
```

# .net - 无法从 VPN 连接的计算机联系 WCF 服务

> ID：11864200
> 
> 赞同：2
> 
> 时间：2012-08-08T12:08:53.280
> 
> 标签：.net, wcf, vpn

我使用 netTcpBindind 在服务器中创建了 WCF 服务。当我在办公室运行 WCF 客户端时，我能够访问该服务。但我收到错误消息“服务器已拒绝客户端凭据”。当我在家中运行相同的 WCF 客户端时，使用 VPN 连接到我的办公室网络。（具有相同域的办公室笔记本电脑）。注意：我在家和办公室使用同一台笔记本电脑。（域名\迪克森）

这是在服务器中运行的 WCF 服务配置设置。

```
<services>

  <service behaviorConfiguration="DTATDataEngine.DTATServiceBehaviour" name="DTATDataEngine.DTATService">     

    <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
      contract="DTATDataEngine.IDTATService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>        
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
      contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://XXX.XXX.XXX.XXX:8523/DTATService" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="DTATDataEngine.DTATServiceBehaviour">
      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

有人可以帮我解决这个问题！

非常感谢，迪克森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:16:27.183

您的部分在哪里`<bindings>`，更重要的是，`<security>`您的部分在`netTcpBinding`哪里？我猜 net.tcp 的默认安全性是 Transport，它使用 Windows 客户端凭据。

您的工作 PC 登录到域并因此通过身份验证，而您的家庭 PC 仅位于工作组中，无法对域中运行的服务进行身份验证。

# tapestry - 更改挂毯中的默认会话行为

> ID：11864201
> 
> 赞同：0
> 
> 时间：2012-08-08T12:08:55.837
> 
> 标签：tapestry

我目前正在使用 shiro 和 Tapestry-security 插件来管理本机会话和持久化数据。获取会话时一切正常`SecurityUtils.getSubject().getSession()`。然而，这意味着应用程序中充斥着特定于 shiro 的代码片段。由于 shiro 使用 servlet 会话 API，有没有办法以对应用程序透明的方式执行此操作，并希望仍然允许我使用和之类的`@Persist`注释`@SessionState`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:48:53.453

我可能误解了您的问题，但您可以注入请求并使用它来处理会话：

```
@Inject
private HttpServletRequest httpRequest;

httpRequest.getSession(); 
```

这不会阻止您使用`@Persist`or `@SessionState`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:00:16.450

我装饰了 TapestrySessionFactory 以返回一个 shiro 会话，而不是包装的 HttpServletSession。接口并不相同，因此需要一个（非常）简单的强制函数。我得到了我需要的东西：唯一与 shiro 相关的代码由 AppModule 中的几行代码和一个将 org.apache.shiro.session.Session 转换为 org.apache.tapestry5.services.Session 的隔离函数组成。在应用程序的其余部分中，我像以前一样使用会话设施（包括注释），它们都由 shiro 在幕后管理。

# android - Mono for Android - 类型初始化程序 System.Data.Services.Client.TypeSystem 引发的异常

> ID：11864203
> 
> 赞同：1
> 
> 时间：2012-08-08T12:09:03.140
> 
> 标签：android, linker, mono, xamarin.android

运行 Mono for Android 应用时出现错误

System.Data.Services.Client.TypeSystem 的类型初始化程序引发了异常

如果我通过 USB 连接我的设备并从 Visual Studio 运行项目，它工作正常，但如果我创建一个包，对其进行签名，对其进行压缩对齐，然后安装到新设备，则会出现此错误。

似乎是一个链接问题，但我不确定。我的“Mono Android Options”发布设置已将链接设置为“Sdk and Assemblies”，并且未勾选共享运行时。

我真的不知道我还需要在这里添加什么才能得到正确的答案，所以请在投票之前告诉我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:20:26.433

可能是程序集需要链接器删除的东西（例如通过反射），因为它似乎未被应用程序使用。

一个快速的测试方法是将您的项目链接器行为设置为“不链接”，重新构建并再次尝试您的应用程序。

如果它开始工作，那么它是一个错误（即链接器缺少该程序集的一些排除项）并且应该报告给[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)

如果它仍然不起作用，那么它与链接器无关 - 但它仍然可能是一个错误。尝试创建一个小型、独立的测试用例（显示相同的问题）并将其附加到错误报告中。

# php - 通过php显示来自mysql的字段明智记录？

> ID：11864204
> 
> 赞同：0
> 
> 时间：2012-08-08T12:09:05.280
> 
> 标签：php, mysql, record

嗨，我在 mysql 中有这样的表：

![第一张桌子](../Images/bef2bcfc89b9d57c19e37574f33a586b.png)

像这样通过php显示这个：

![第二张桌子](../Images/5a6128259090862eb128f5ade333e90d.png)

现在首先我得到并打印所有的gradeid

```
$qry = "select * from grademaster";  
$result= mysql_query($qry,$link);
$nro=mysql_num_rows($result);
while($row=mysql_fetch_array($result))
{
    $gradeid = $row['gradeid'];
    echo "<th> $gradeid </th>";
    $grdid[] = $gradeid; ////////takes all grades in array
} 
```

然后从下表中获取所有详细信息，但我无法显示顶部的记录，我该如何显示这个请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:57:51.703

只需复制并粘贴它而不是您的代码，然后在浏览器中运行脚本。你会看到桌子。通过 CSS 美化它，你就完成了。

我已经在本地服务器上对其进行了测试，它似乎可以工作。

```
$qry = "select * from grademaster";
$result = mysql_query($qry, $link);

$nro = mysql_num_rows($result);
$table = array();
$rowNum = 0;
while ($row = mysql_fetch_array($result)) {
    $table[$rowNum]['ordid'] = $row['ordid'];
    $table[$rowNum]['orddate'] = date('m/d/Y', strtotime($row['orddate']));
    $table[$rowNum]['1001'] = intval($row['gradeid']) == 1001 ? $row['ordqty'] : '';
    $table[$rowNum]['1002'] = intval($row['gradeid']) == 1002 ? $row['ordqty'] : '';
    $table[$rowNum]['1003'] = intval($row['gradeid']) == 1003 ? $row['ordqty'] : '';
    $table[$rowNum]['1004'] = intval($row['gradeid']) == 1004 ? $row['ordqty'] : '';
    $table[$rowNum]['1005'] = intval($row['gradeid']) == 1005 ? $row['ordqty'] : '';
    $rowNum++;
}

?>
<table>
    <tr>
        <th>ordid</th>
        <th>orddate</th>
        <th>1001</th>
        <th>1002</th>
        <th>1003</th>
        <th>1004</th>
        <th>1005</th>
    </tr>
    <?php foreach ($table as $row): ?>
    <tr>
        <td><?php echo $row['ordid']; ?></td>
        <td><?php echo $row['orddate']; ?></td>
        <td><?php echo $row['1001']; ?></td>
        <td><?php echo $row['1002']; ?></td>
        <td><?php echo $row['1003']; ?></td>
        <td><?php echo $row['1004']; ?></td>
        <td><?php echo $row['1005']; ?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

# android - Phonegap 无法创建媒体播放器

> ID：11864205
> 
> 赞同：0
> 
> 时间：2012-08-08T12:09:06.043
> 
> 标签：android, cordova, notifications, media-player, avd

嗯，尝试使用 phongap 将通知功能添加到我的 Android 应用程序并想使用哔声通知方法

这是完整的例子：

```
function playBeep()
{navigator.notification.beep(3);} 
```

这将在

```
"<p><a href="#" onclick="playBeep(); return false;">Play Beep</a></p>" 
```

但 AVD 引发和异常：

> “无法创建媒体播放器”

有什么建议么 ？？！

谢谢。

# c++ - const_cast 在 C++ 中失败

> ID：11864207
> 
> 赞同：-2
> 
> 时间：2012-08-08T12:09:14.553
> 
> 标签：c++, const-cast

```
CallingClass::CallingFunc()
{
    SomeClass obj;
    obj.Construct(*Singleton::GetInstance()); // passing the listener
    // Singleton::GetInstance() returns a static pointer.
    //Singleton is derived from IListener
}

SomeClass::Construct(const IListener &listener)
{
    IListener* pListener = const_cast<IListener*>(&listener);
} 
```

之后`const_cast` `pListener`为空。是否可以执行这种类型转换？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T12:14:54.233

所以让我看看。你有两阶段初始化，一个 Singleton*和*cast away `const`，*并且*你取消引用一个对象只是为了再次获取它的地址？我的朋友，流浪的 NULL 指针是您*最不关心的问题。*

扔掉它，然后从头开始重新编写。并先拿起一本 C++ 书。

就像你知道的那样，`const_cast`除非它被传递一个，否则不能产生一个空指针。`GetInstance()`必须返回`NULL`以产生这种行为，一旦你取消引用它，它就正式成为 UB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:47:35.360

const_cast 基本上是对编译器的一条指令，以忽略某些东西的 const 性。应避免使用它，因为您正在覆盖编译器保护，并且当您编写尝试更新只读内存的内容时，它可能会导致崩溃。

但是，它实际上不会导致生成任何代码。

因此，如果这样：

```
IListener* pListener = const_cast<IListener*>(&listener); 
```

导致 pListener 为 NULL，然后 &listener 为 NULL，这是不可能的（或者您正在为单例返回空引用，或者您在问题描述中遗漏了某些内容）。

话虽如此，我强烈同意 DeadMG 的回答。

应避免创建一个空对象并对其进行初始化（两阶段构造）。正确创建的对象应该是有效的，如果你有一个 Init 方法，它不是。

应避免从任何事物中删除 constness - 它极有可能产生令人惊讶的行为。

该代码中的去引用和引用的数量会让任何人头疼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:53:03.627

两个问题：

1.  你想在这里达到什么目的？
2.  你对代码有多少控制权？（即你能改变什么？）

不想不友善，我会诚实地说，重新开始可能会更好。这段代码有几个问题：

首先，单例模式应该确保只创建一个特定对象，因此它通常由指针、引用或其派生类返回（即 boost 共享指针等）。尽管它不一定是 const 并且事实上它在这里表明作者不打算以非常量方式使用它。

其次，您将通过引用将此对象传递给函数。没必要。这是单例模式的主要特性（和缺点）之一：您可以从任何地方访问它。所以你可以很容易地写：

```
SomeClass::Construct()
{
    IListener* pListener = const_cast<IListener*>(*Singleton::GetInstance());
} 
```

虽然这仍然不能真正帮助你。它所做的一件事就是让你的界面更清晰一些。你看，当你写`SomeClass::Construct(const IListener&listener)`任何阅读你的人时，你可以合理地暗示这`listener`被视为`const`在函数内，并且通过使用`const_cast`，你已经打破了那个隐含的合同。**这是你不应该使用的一个很好的理由`const_cast`**——至少在这些情况下不应该使用。

**您需要问自己的基本问题是，当您`IListener`是 const 时，为什么需要在 const 内以非 const 方式使用它`Construct`？**单例不应该返回一个 const 对象，或者你的函数不应该需要它是非常量的。

这是一个设计问题，您需要在采取任何进一步措施之前加以解决。

# iphone - 如何使用线程为每一行自动调用一个函数

> ID：11864208
> 
> 赞同：0
> 
> 时间：2012-08-08T12:09:31.377
> 
> 标签：iphone, ios, uitableview, ios4, nsthread

这可能是个愚蠢的问题，但我不确定如何真正解决这个问题。

我有 uitableview 中的项目列表。每个单元格都有 uibutton 和 URL。当一个按钮被点击时，我开始从服务器下载内容。

这如我所愿。现在我需要知道的是如何在调用 viewdidload 后自动为每一行调用下载功能/方法。（无需点击按钮）。

我必须为每一行下载视频、音频和图像文件。

在这个函数中**-(void)downLoad:(id)sender event:(id)event{**我能够找到/获取点击按钮的单元格。所以我可以展示这个单元格的进度。但是自动下载的时候不知道怎么处理这些东西

我知道我必须使用线程概念，但我不知道该怎么做。

请建议我做任何参考/网址/代码

以下是我当前的代码

```
-(void)downLoad:(id)sender event:(id)event{

    self.tblViewDownload.userInteractionEnabled = NO;

    IsRequestCompleted = NO;

    CGPoint touchPosition = [[[event allTouches] anyObject] locationInView:self.tblViewDownload];
    NSIndexPath *indexPath = [self.tblViewDownload indexPathForRowAtPoint:touchPosition];
    UITableViewCell *Cell = [self.tblViewDownload cellForRowAtIndexPath:indexPath];

    progress = [[UIProgressView alloc]initWithProgressViewStyle:UIProgressViewStyleBar];
    progress.frame = CGRectMake(65, 55, 210, 25);
    progress.progress = 0.0;
    [Cell.contentView addSubview:progress];

    UIButton* button = (UIButton*)sender;
    button.hidden=YES;

    if(!self.networkQueue)
        self.networkQueue = [[[ASINetworkQueue alloc] init] autorelease];

    [self.networkQueue cancelAllOperations];
    [self.networkQueue setQueueDidFinishSelector:@selector(queueCompleted:)];
    [self.networkQueue setShowAccurateProgress:YES];
    [self.networkQueue setDownloadProgressDelegate:progress];

    [self.networkQueue setDelegate:self];

    NSDictionary *aDict =[self.myUrlArray objectAtIndex:[indexPath row]];
    NSString *aImgUrl = [aDict objectForKey:@"IMG_URL"];
    NSString *aVideoUrl = [aDict objectForKey:@"VIDEO_URL"];
    NSString *aAudioUrl = [aDict objectForKey:@"AUDIO_URL"];

    NSArray *aPoemArrayUrls = [NSArray arrayWithObjects:aImgUrl,aVideoUrl,aAudioUrl,nil];

    for(NSString* urlString in aPoemArrayUrls)
    {
        NSURL *url = [NSURL URLWithString:urlString];
        ASIHTTPRequest *downloadAFileRequest = [[ASIHTTPRequest requestWithURL:url]retain];
        NSString *Filename = [urlString lastPathComponent];
        NSLog(@"%@ filename",Filename);
        [downloadAFileRequest setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
        [downloadAFileRequest setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:Filename]];
        [downloadAFileRequest setShouldContinueWhenAppEntersBackground:YES];
        [downloadAFileRequest setDelegate:self];
        [downloadAFileRequest setDidFinishSelector:@selector(requestDone:)];
        [downloadAFileRequest setDidFailSelector:@selector(requestWentWrong:)];
        [downloadAFileRequest setShowAccurateProgress:YES];

        [self.networkQueue addOperation:downloadAFileRequest];
        //----
    }

    [self.networkQueue go];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:16:13.933

您可以使用[EGOImageView](https://github.com/enormego/EGOImageLoading/tree/master/EGOImageView)并将 Image Url 分配给它。它将自动管理所有内容

# iphone - 我们如何在表格视图中找到索引路径？

> ID：11864211
> 
> 赞同：0
> 
> 时间：2012-08-08T12:09:36.797
> 
> 标签：iphone, objective-c, ios, xcode

如何找到表格视图的索引路径。我想使用 id（一些数据）删除一行，该 id 作为对象添加到我的表视图的可变数组中。现在我有了可以执行删除功能的自定义方法，如何获取索引路径以便我可以执行删除操作？

蒂亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:13:37.140

我认为这就是您的意思正确吗？：

```
NSIndexPath *selectedIndexPath = [tableView indexPathForSelectedRow]; 
```

如果没有，请详细说明您想要实现的目标。

# linux - linux服务器同时最大用户数限制

> ID：11864212
> 
> 赞同：0
> 
> 时间：2012-08-08T12:09:42.873
> 
> 标签：linux, webserver

我在 linux 服务器上有一个 drupal 网站，我想知道是否有任何方法可以防止用户在限制数量之后访问。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:13:50.673

我认为您应该编辑 httpd.conf 文件并更改 MaxClients。

重启服务器

希望这可以帮助

# android - Android模拟器如何支持其他语言？

> ID：11864220
> 
> 赞同：2
> 
> 时间：2012-08-08T12:10:02.783
> 
> 标签：android, android-emulator

阅读有关“支持不同语言”的 Android 培训 [1] 并运行模拟器后，默认语言为英语。IE：

```
MyProject/
    res/
       values/
           strings.xml
       values-es/
           strings.xml
       values-fr/
           strings.xml 
```

1）我们如何针对其他语言测试模拟器？

2）我们要安装额外的语言来支持吗？

我想以法语和西班牙语查看屏幕。在模拟器的设置中没有这些语言可供选择。

(1) [http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:13:45.227

你用什么模拟器？
在我的模拟器上，我可以通过以下方式更改语言`Settings -> Language & keyboard -> Select Language`

![在此处输入图像描述](../Images/998c578497716bea1b20323b360e3d58.png)

# asp.net - asp.net MVC 3的下拉列表中的多个选择

> ID：11864223
> 
> 赞同：5
> 
> 时间：2012-08-08T12:10:31.427
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, html.dropdownlistfor

我们可以从 razor 下拉列表控件中选择多个项目吗？即对于

**@Html.DropDownListFor(m=>m.Country, CountryList as SelectList,"--Select--")**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T12:22:05.830

你可以试试这样的东西......

```
@Html.ListBoxFor(m=>m.Country, new MultiSelectList(CountryList as SelectList, "CountryID", "Select")) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T12:18:33.413

您只需添加一个`new { "multiple" = "multiple" }`作为函数的最后一个参数 - 这将呈现一个多选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T18:04:01.913

给定一个项目列表（在此示例中具有字段 Id 和名称），您可以从 SelectListItem 列表开始，如下所示：

```
List<SelectListItem> Choices = Items.Select(x => new SelectListItem { Value = Convert.ToString(x.Id).Trim(), Text = x.Name }).ToList();

@Html.ListBox("ListBoxIds", new MultiSelectList(Choices, "Value", "Text")) 
```

在控制器中，您将获得 ListBoxIds 作为选定 Id 的列表。

# java - 将数据库表中的多个键值对添加到 HashMap

> ID：11864224
> 
> 赞同：0
> 
> 时间：2012-08-08T12:10:34.373
> 
> 标签：java

我在下面定义了三个数据库表，括号中提到的列名：

```
Product (ProductID, Price, Last_Updated)

User (UserID, Name, Address, LocationID, Last_Updated)

Location (LocationID, Loc_Name, Last_Updated) 
```

我想使用 Java（JDK 1.5）将所有表的所有列名添加到一个集合中，例如`HashMap`.

我的问题是当输入重复键时，先前的值被覆盖。

我像这样添加它们：

```
Map<String, String> map = new HashMap<String, String>();

map.add("ProductID", "Save the Product ID");
// ...
map.add("Last_Updated", "Save Last_Updated of Product table");
// ...
map.add("LocationID", "Save the LocationID");
// ...
map.add("Last_Updated", "Save Last_Updated of User table."); 
```

现在键`Last_Updated`被新值覆盖`Save Last_Updated of User table.`

但我想要这两个值。

有没有办法在不使用多个`HashMap`结构的情况下实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:18:04.003

如果您想添加具有相同密钥的项目，那么这将是一个可能的解决方案

```
Map<String, List<String>> map = new HashMap<String, List<String>>(); 
```

添加元素时：

```
public void add(String key, String value) {
    if(!map.containsKey(key)) {
        map.put(key, new ArrayList<String>());
    }
    map.get(key).add(value);
} 
```

当你想访问一个元素时，通过 maps`get()`函数你会得到一个字符串列表，这是一个键的值。

**但是，最好使用 Multimap 实现：**

# 番石榴：

[`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)- 您可以在 javadoc 中查看具体实现。

```
Multimap<String, String> map = ArrayListMultimap.create();
map.put("a", "Apple");
map.put("a", "Almonds");
Collection<String> valuesForA = map.get("a"); // List of ("Apple", "Almonds") 
```

# 阿帕奇公地

[`MultiMap`](http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/MultiMap.html)- javadoc中的示例和具体实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:21:02.040

如果您仅限于 JDK 5，但允许使用库，请查看公开可用的 MultiMaps：Guava[有一个](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html)，[Commons Collections也是如此](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/MultiMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:12:53.030

添加表名作为列名的前缀。然后您可以将“Product.Last_Updated”、“User.Last_Updated”和“Location.Last_Updated”分开。
显然，您必须使用未在表或列名称中使用的分隔符；一个 '。' 应该做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:15:55.740

为什么不像[H2](http://www.h2database.com/html/main.html)或 HSQL 等内存数据库中的非规范化表？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T12:45:33.110

使用分隔符。像管道符号 (|) 或点 (.)

# android - ListView 隐藏 EditText

> ID：11864225
> 
> 赞同：1
> 
> 时间：2012-08-08T12:10:40.877
> 
> 标签：android

我是 Android 新手，正在阅读 Wrox 的专业 android 4 应用程序开发书。在本书的第 4 章中，它解释了如何修改现有的文本视图。我面临的问题是我的应用程序中的列表视图隐藏了编辑文本框。它隐藏（可以在后台看到）但仍然可以通过它添加更多内容到列表中。下面是我的主要活动 xml 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<EditText
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/addItemContentDescription"
    android:hint="@string/addItemHint"
    />
<ListView
    android:id="@+id/myListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>
</RelativeLayout> 
```

和我的 todolist_item xml

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.wroxexample.ToDoListItemView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" 
android:padding="10dp"
android:scrollbars="vertical"
android:textColor="@color/notepad_text"
android:fadingEdge="vertical"
/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:17:30.560

您拥有的**第一个选项**是使用[LinearLayout](https://developer.android.com/reference/android/widget/LinearLayout.html)而不是[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<EditText
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/addItemContentDescription"
    android:hint="@string/addItemHint"
    />
<ListView
    android:id="@+id/myListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

RelativeLayout 将允许您相对于其他元素定位元素。

另一方面，LinearLayout 将按照它们在 xml 文件中出现的顺序将元素放在另一个下方。

您拥有的**第二个选项**是保留您的 RelativeLayout，只需将以下标签添加到您的 ListView：

```
android:layout_below="@id/myEditText" 
```

这会将 ListView 定位在 EditText 下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:22:04.797

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<EditText
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/addItemContentDescription"
    android:hint="@string/addItemHint"
    android:layout_alignParentTop="true"
    />
<ListView
    android:id="@+id/myListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/myEditText"/>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T12:27:09.770

蒂莫西比我先到了那里，但我只是多加一点。正如他所说，您可以使用线性布局，或者正如 user1387035 所说，您可以将列表视图设置为位于 editText 下方。

相对布局意味着“我想相对地布置东西”，如果你不告诉东西去哪里，它们只会漂浮到“重力”拉动它们的地方。默认重力是顶部 - 所以我猜你的物品最终都聚集在左上角？

根据经验 - 您是否希望您的物品一个接一个地聚集在一起（水平或垂直）？如果是，则使用线性布局。如果您希望它们被推向不同的方向，请使用相对布局。有一些例外，通常涉及您可以在线性布局中设置的“权重”属性。（这是我不得不使用的一个：[http](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/) ://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/ ）

如果您有一个相对布局并且只使用 layout_below/above 属性，没有任何“alignParentBottom”或其他设置，那么您可能只需要一个线性布局

在你的情况下，我会说你想要蒂莫西的解决方案。如果您想在对象之间稍微分开，可以使用填充/边距将它们分开一点。

至于重力，这里有一篇有用的博客文章，它帮助我了解了 LinearLayout 的重力（以及一般性）：[http://sandipchitale.blogspot.co.uk/2010/05/linearlayout-gravity-and-layoutgravity。 html](http://sandipchitale.blogspot.co.uk/2010/05/linearlayout-gravity-and-layoutgravity.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T12:27:25.877

使用 LinearLayout 和属性`android:layout_weight` [http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:orientation="vertical"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >
   <ListView
    android:id="@+id/myListView"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:entries="@array/testea"
    android:layout_height="wrap_content"/>
<EditText
    android:id="@+id/myEditText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/addItemContentDescription"
    android:hint="@string/addItemHint"
    />

</LinearLayout> 
```

这样 ListView 将增长到仅填充未使用的空间。

# c# - VB6中具有默认值的可选参数

> ID：11864226
> 
> 赞同：1
> 
> 时间：2012-08-08T12:10:40.987
> 
> 标签：c#, vb6

我正在尝试在 VB6 中重新创建以下 C# 代码：

```
private void ChangeTab(string tabName, bool clearAll = true)
{
    Yadyyada(tabName);

    if (clearAll)
    {
        DoMoreStuff();
    }
} 
```

这是我到目前为止所拥有的：

```
Private Sub ChangeTab(ByVal tabName As String, Optional ByVal clearAll As Boolean)

    Yadyyada(tabName)

    If clearAll = True Then
        DoMoreStuff
    End If

End Sub 
```

到目前为止，除了默认参数外还不错。`clearAll`我可以像在 C# 中一样在方法签名中分配默认值 true 还是只需要在方法开始时执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T12:13:49.490

哇，这让我回来了..我能问一下你为什么要在技术方面向后转换吗？

无论如何，您可以使用 Optional 关键字：

```
Private Sub ChangeTab(ByVal tabName As String, Optional ByVal clearAll As Boolean = True) 
```

您的问题是使用 ByVal。根据记忆，除非明确说明，否则 VB6 中的所有内容都是 ByVal。

编辑：我错了。默认是 ByRef.. 已经很久了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T12:15:06.053

是的，你可以做与 C# 相同的事情

```
Private Sub ChangeTab(ByVal tabName As String, Optional ByVal clearAll As Boolean = True) 
    Debug.Print "Value for clearAll=" & clearAll
End Sub 
```

打电话给

```
ChangeTab("AName") 
```

将打印 True

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T12:14:41.747

尝试：

```
Private Sub ChangeTab(ByVal tabName As String, Optional clearAll As Boolean = True)

    Call Yadyyada(tabName)

    If clearAll Then
        DoMoreStuff
    End If

End Sub 
```

请参阅[http://msdn.microsoft.com/en-us/library/aa266305%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa266305%28v=vs.60%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:18:08.520

您可以像这样使用 IsMissing 函数

```
Private Sub ChangeTab(ByVal tabName As String, Optional ByVal clearAll As Boolean)

    Yadyyada(tabName)

    If IsMissing(clearAll) = True Or clearAll = True Then
        DoMoreStuff
    End If

End Sub 
```

我的错！为可选参数设置默认的真值并在代码中检查是最好的解决方案！

```
Private Sub ChangeTab(ByVal tabName As String, Optional ByVal clearAll As Boolean = True)

    Yadyyada(tabName)

    If clearAll = True Then
        DoMoreStuff
    End If

End Sub 
```

# iis - smtp;550 访问被拒绝 - HELO 名称无效（请参阅 RFC2821 4.1.1.1）

> ID：11864227
> 
> 赞同：10
> 
> 时间：2012-08-08T12:10:43.147
> 
> 标签：iis, smtp, iis-7.5

我正在运行 Windows Server 2008 R2，但收到来自几个域的 smtp 邮件被拒绝。

为了测试它，我将一个文本文件放入 C:\inetpub\mailroot\Pickup 目录，如下所示：

```
From: my@emailaddress.com
To: someone@somewhere.com
Subject: testing

This is a test 
```

它将发送到某些域，但有些正在返回：

```
Reporting-MTA: dns;DEDICAT-93I3U5A
Received-From-MTA: dns;DEDICAT-93I3U5A
Arrival-Date: Wed, 8 Aug 2012 12:50:58 +0100

Final-Recipient: rfc822;someone@somewhere.com
Action: failed
Status: 5.5.0
Diagnostic-Code: smtp;550 Access denied - Invalid HELO name (See RFC2821 4.1.1.1) 
```

我知道这可能与服务器（IIS 7.5）上的 smtp 设置有关。有人可以给我一些关于从哪里开始的建议吗？

谢谢，

安迪。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T22:02:59.400

一些 SMTP 服务器要求您使用 HELO 命令发送一个有效的主机名，该主机名也与发出请求的 IP 地址的反向 DNS 相同。

您可以通过旧的 IIS6 管理控制台配置 IIS SMTP 服务器使用的主机名。为此，请选择 SMTP 服务器，右键单击并选择`Properties`，转到选项卡`Delivery`，然后单击按钮`Advanced`。

您的 IP 地址的反向 DNS 通常由您的 ISP 控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T08:17:55.023

FWIW，我在使用 hMailServer 时遇到了同样的问题，并在[此处](http://www.hmailserver.com/forum/viewtopic.php?f=6&t=18710)找到了配置说明。为了其他 hMailServer 用户的利益，这里是您需要设置的字段：

![在此处输入图像描述](../Images/39cc08d1134899760d5fea32405b699c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-03T20:09:14.700

请尝试使用 TLS 启用 SMTP 身份验证

```
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.auth=true 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-25T17:34:15.140

这是问题的解决方案。

在创建会话之前设置`Authorization property`如下。

```
properties.put("mail.smtp.auth", "true"); 
```

# memory-leaks - Microsoft DTV-DVD 视频解码器内存泄漏？

> ID：11864231
> 
> 赞同：1
> 
> 时间：2012-08-08T12:11:03.920
> 
> 标签：memory-leaks, directshow, decoder, samplegrabber

在 AVI 容器视频文件中渲染 h.264 期间，我的应用程序的内存消耗以高速上升，大约 150 Mb/min。

这是我的图表图像的链接：http: [//picturepush.com/public/8926555](http://picturepush.com/public/8926555)

如果使用 LAV 视频解码器 insted - 没有内存泄漏。

首先我建议，泄漏发生在我的代码中，但我只是关闭（在回调开始时设置“返回 S_OK”）两个样本抓取器过滤器 - 泄漏继续。

我也尝试在这样的停止图之后释放每个过滤器，但这没有删除泄漏：

```
if(m_pMediaControl)
{
    HRESULT hr = m_pMediaControl->Stop(); 

    LONG lCount;
    IUnknown* pUnk;
    IAMCollection*  p_Collection;
    hr = m_pMediaControl->get_FilterCollection(reinterpret_cast<IDispatch**>(&p_Collection));
    hr = p_Collection->get_Count(&lCount);
    for (int i=0; i<lCount; i++)
    {
        hr = p_Collection->Item(i, &pUnk);
        pUnk->Release();
    }
    p_Collection->Release();
}
m_pMediaControl.Release(); 
```

对任何建议都会很高兴，如何消除内存泄漏？

我在 graphedit 上创建了不同的图表，并观察了重复播放短（6 秒）h.264 视频文件：

1.  picturepush.com/public/8931745 - 完整图 - +6 Mb 每次播放后都会增长私有字节
2.  picturepush.com/public/8931760 - 带 DMO 转换器，不带采样器 - 无内存泄漏
3.  picturepush.com/public/8931766 - 使用 DMO 转换器，没有采样器，但使用视频渲染器 - 每次播放后 +7 Mb 增长私有字节
4.  picturepush.com/public/8931770 - 只有解码器 - 没有内存泄漏

# java - Java：我需要一种将数据解析为数组的策略

> ID：11864232
> 
> 赞同：1
> 
> 时间：2012-08-08T12:11:02.930
> 
> 标签：java, arrays, parsing

我有一个数据文件，其中每一行代表一条记录，每条记录可能包含一个关键字列表，每个关键字前面都有一个“+”。

```
foo1 foofoo foo foo foo +key1 +key2 +key3
foo2 foo foo foofoo foo 
foo3 foo foofoo foo +key1 key1 key1 +key2 
```

将有零到理论上无限数量的关键字。关键字总是以 + 开头。单个关键字可以是单个单词，也可以是带有空格的短语。我识别关键字的策略：

我想将这些记录读入一个数组，`String keywords[]`. 我`lineBuffer`用来把数据带进来，这就是我到目前为止所拥有的。

```
// PSEUDOCODE
counter = [number of occurences of + in the line];
for(int i=0;i<=counter,i++) {
    Pattern p = [regex reresenting + to the next occurence of + -or- end of line];
    Match pattern;
    keyword[i] = Match.group(1) } 
```

我可能想多了，但是 Java 是否知道在同一行中转到我的模式的下一个实例？查看这几行代码，我的模式匹配器似乎会读取该行，找到关键字的第一个实例并将其`i`多次写入数组。它永远不会 GET 到第二个关键字。

有没有更好的方法来思考这个问题？创建此数组的更好策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:18:54.800

如果您知道`+`键中没有，您可以简单地拆分字符串：

```
String[] ss = s.split(" \\+"); 
```

并丢弃第一个条目（foo fooo ...）。

**编辑**

关于模式/正则表达式问题，您也可以这样做：

```
Pattern p = Pattern.compile(" \\+\\w+");
Matcher m = p.matcher(s);
while (m.find()) {
    String key = m.group().trim().replaceAll("\\+","");
    System.out.println(key);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:19:41.490

[使用Scanner](http://docs.oracle.com/javase/6/docs/api/)很容易做到这一点：

```
Scanner s = new Scanner(line);
int i = 0;
while (s.hasNext()) {
    String token = s.next();
    if (token.startsWith("+")) {
        keyword[i] = token;
        i++;
    }
} 
```

# image - 旋转 jpg 图像文件的最快方法是什么？

> ID：11864236
> 
> 赞同：1
> 
> 时间：2012-08-08T12:11:18.553
> 
> 标签：image, algorithm, delphi, delphi-xe2, jpeg

我正在研究一些批处理例程来管理大型 jpg 文件库。我有一个很好的例程，可以快速将 4mb+ 文件缩小到 40kb+。使用[CCR.Exif](http://delphihaven.wordpress.com/2012/01/16/xe2-update-for-my-image-metadata-readingwriting-library-ccr-exif/)，我可以确定是否需要旋转图像。我的问题是在保存之前我找不到任何代码来旋转图像。我真的需要能够做到这一点，而不会产生将图像带到屏幕上的开销。

我正在使用内置的 jpeg.pas；[我在CodeCentral](http://cc.embarcadero.com/Item/19723)找到了 Gabriel Corneanu 的另一个库，但它还没有针对 DXE2 进行更新。我需要做的就是旋转 90°。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:30:00.220

JPG 是经过压缩的，必须先渲染，然后才能使用图像数据。即使它是不可见的画布，它们仍然需要加载到呈现它们的组件中。然后，您可以使用 Windows API 调用通过直接访问画布来旋转图像。我以前没有*旋转*过图像，但我通过访问画布以其他方式对其进行了操作。

GR32 和 EFG 都是具有多种组件和算法的好站点。这是 EFG 网站上旋转图像的一个示例。代码是 Delphi 3，但对于图像处理它仍然可以正常工作。

[带有源的 EFG 示例](http://www.efg2.com/Lab/ImageProcessing/FlipReverseRotate.htm)

`TImage32`也有一种将图像旋转 90 度的方法。见`TImage32.Bitmap.Rotate90`。 `TImage32`是 GR32 库的一部分，并已针对 Delphi-XE2 进行了更新。

```
svn co https://graphics32.svn.sourceforge.net/svnroot/graphics32/trunk graphics32 
```

另见：[GR32 主页](http://graphics32.org/wiki/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:39:33.120

如果您需要将 JPEG 逐步旋转 90 度，请寻找无损转换。例如 irfanview.com 有一个特殊的插件 DLL，虽然它没有公共 API，但也许你可以向 Irfan 作者索要它或使用调试器和 cff 资源管理器对其进行逆向工程。

很多讨论可能只是通过谷歌搜索，包括讨论它是如何实现的。 [https://www.google.ru/search?client=opera&q=lossless+jpeg+rotation](https://www.google.ru/search?client=opera&q=lossless+jpeg+rotation)

组件目录有类似 [http://www.torry.net/quicksearchd.php?String=jpeg+lossless&Title=No](http://www.torry.net/quicksearchd.php?String=jpeg+lossless&Title=No)

这不适用于比 90 度步长更精细的旋转，但对于正交转弯，请继续 searchign 以进行无损 jpeg 转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:29:49.377

旋转 JPEG 图像的最快方法是为 JPEG 解码器编写一个新的/备用像素泵，从左到右 (x,y) 读取和解码 JPEG 像素，并将它们作为 (y,x) 写入位图内存- 也就是说，在相同的偏移量处每条扫描线写入一个像素，而不是在同一条扫描线上每列写入一个像素的正常模式。

其他任何东西都会对位图数据进行多次传递。

# jquery - 使用单个 append 语句添加多个隐藏字段

> ID：11864237
> 
> 赞同：0
> 
> 时间：2012-08-08T12:11:18.653
> 
> 标签：jquery, forms, append, hidden

```
 jQuery("#replymultiple").append(jQuery("#tickets-expanded input:checkbox[name='ids[]']:checked")); 
```

这是我的代码。使用它，我将一些元素附加到我的#replymultiple 表单中。我希望它们被隐藏起来。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:15:59.563

如果我理解你的问题，我想在调用`append`.

也许：

```
jQuery("#replymultiple").append(jQuery("#tickets-expanded input:checkbox[name='ids[]']:checked"));

$("#tickets-expanded input:checkbox[name='ids[]']").hide(); 
```

或者想要隐藏输入类型

```
jQuery("#replymultiple").append(jQuery("#tickets-expanded input:checkbox[name='ids[]']:checked").attr("type", "hidden")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:14:35.957

只需添加一个简单的函数调用：

```
jQuery("#replymultiple").append(jQuery("#tickets-expanded input:checkbox[name='ids[]']:checked").attr("type", "hidden")); 
```

# java - Java 中 String 的内存高效、低开销替换

> ID：11864239
> 
> 赞同：3
> 
> 时间：2012-08-08T12:11:20.253
> 
> 标签：java, string, memory-efficient

在阅读了[这个老问题](https://stackoverflow.com/questions/231051/is-there-a-memory-efficient-replacement-of-java-lang-string)的答案后，我有点想知道现在是否有任何框架可以比`java.lang.String`.

如果可能的话，我想使用 byte[] 而不是 char[] 来存储表示字符串。

我的`String`（s）将是常量，并且我并不真正需要`java.lang.String`类提供的大量实用程序方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:13:22.857

Java 6 执行此`-XX:+UseCompressedStrings`操作，在某些更新中默认启用。

它不在 Java 5.0 或 7 中。默认情况下它仍列为启用，但在 Java 7 中实际上并不支持。:P

根据您想要做什么，您可以编写自己的类，但如果您只有几个 100 MB 的字符串，我怀疑它不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:39:31.387

这种优化很可能*不值得*它带来的努力和复杂性。要么接受 VM 为您提供的东西（正如 Peter Lawrey 建议的那样），要么竭尽全力开发自己的解决方案（不使用 java.lang.String）。

您自己的 String 类可以实现一个接口 CharSequence。不幸的是，很少有 JRE 方法接受 CharSequence，因此如果您需要将任何“字符串”传递给任何其他 API，请准备好在您的类中经常使用 toString()。

您还可以*破解*String 以更高效的内存（和更少的 GC 友好方式）创建您的字符串。String 有一个（包访问级别）构造函数 String(offset, count, char[])，它*不复制*字符，而只是将 char[] 作为直接引用。您可以将所有字符串放入一个大的 char[] 数组并使用反射构造字符串，这将避免通常由字符串中的 char[] 数组引入的大部分开销。我不能真正推荐这种方法，因为它依赖于 JRE 私有功能。

# nutch - Nutch Parsing 插件和重定向

> ID：11864240
> 
> 赞同：0
> 
> 时间：2012-08-08T12:11:21.720
> 
> 标签：nutch, web-crawler

我正在使用 nutch 2.0，我创建了一个用于解析 html 的插件，它实现了 Parser 并且工作得很好。

问题是我还需要“解析”生成重定向的页面（301,300），以获取 url 和 http 代码。我的插件忽略了重定向的页面。

我有什么想法可以获取这些信息，也许还有其他扩展点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:09:00.720

我已经实现了协议扩展点，现在我可以将重定向和加载时间保存在数据库中。

# c# - 服务器标签格式不正确？

> ID：11864247
> 
> 赞同：1
> 
> 时间：2012-08-08T12:11:41.390
> 
> 标签：c#, asp.net

在将样式添加到段落之前，它工作正常，但是如果我添加样式，我会收到错误，例如服务器标签格式不正确。请查看我的代码

```
<p 
    title='<%# DataBinder.Eval(Container.DataItem, "Title") %>' 
    id="P1" 
    runat="server" 
    style="top:<%# DataBinder.Eval(Container.DataItem, "Tops") %>px; left:<%#DataBinder.Eval(Container.DataItem, "Lefts") %>px; font-size:15px; color:White;">
</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:14:14.103

在服务器绑定控件上，如果要在属性内使用 <%#whatever%>，它们必须使用单引号而不是双引号。IE：

```
<asp:Label id="lbl1" runat="server" Text='<%#Eval("myvalue")%>' /> 
```

或者

```
<p id="p1" runat="server" style='background:<%#Eval("color")%>;'>stuff here</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:22:43.600

只需在样式标签周围使用单引号，以避免与 Eval 部分中的双引号发生冲突。

```
style='top:<%# DataBinder.Eval(Container.DataItem, "Tops") %>px; left:%#DataBinder.Eval(Container.DataItem, "Lefts") %>px; font-size:15px; color:White;">' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:20:13.147

试试这个代码：

```
<p 
    title='<%# DataBinder.Eval(Container.DataItem, "Title") %>' 
    id="P1" 
    runat="server" 
    style='top:<%# DataBinder.Eval(Container.DataItem, "Tops") %>px; left:<%#DataBinder.Eval(Container.DataItem, "Lefts") %>px; font-size:15px; color:White;'>
</p> 
```

# c#-4.0 - 如何通过允许用户使用 C# 在 .NET 4.0 中从我的站点 UI 填写用户名和密码来获取用户身份验证令牌

> ID：11864250
> 
> 赞同：0
> 
> 时间：2012-08-08T12:11:46.953
> 
> 标签：c#-4.0, facebook-graph-api

我创建了一个 Facebook 应用程序并拥有一个应用程序 ID 和应用程序密码。现在我想为用户提供一个简单的 UI，他/她将在其中填写 Facebook 用户名和密码。单击继续按钮，如何获取他/她的身份验证令牌？

因此，将来我将使用保存的令牌来获取特定的用户信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:18:41.187

[拿这个开放ID](https://developers.google.com/accounts/)

[在此处查看答案，](https://stackoverflow.com/q/10371809/1557322)这将对您有所帮助。

您需要通过客户端浏览器上的本地 cookie 存储令牌设置的过程。

这是创建这种应用程序的分步简单的东西

希望对你有帮助

# asp.net - 从 URL 到 QueryString 的无 Cookie 会话

> ID：11864251
> 
> 赞同：2
> 
> 时间：2012-08-08T12:11:52.687
> 
> 标签：asp.net, session, iis

根据 MSDN 上的文档，当您使用 AutoDetect 时，我们目前在 ASP.NET 中遇到无 cookie 会话[问题](http://msdn.microsoft.com/en-us/library/h6bb9cz9.aspx)：

> ASP.NET 确定发出请求的浏览器或设备是否支持 cookie。如果请求浏览器或设备支持 cookie，则 AutoDetect 使用 cookie 来保存用户数据；**否则，在查询字符串中使用标识符**。如果浏览器或设备支持 cookie，但当前禁用 cookie，请求功能仍会使用 cookie。

注意查询字符串部分！现在，如果它确实被添加到 URL 中`&sessionId=yoursessionidhere`，一切都很好，但实际上我得到的是这样的 URL `http://yourserver/folder/(session ID here)/default.aspx`：.

所以我的问题是：我将如何配置 ASP.NET 以使用查询字符串（如它所声称的那样）而不是这种 URL 破坏方法？

**更新：**

我正在添加我们在 web.config 中使用的配置值：

```
<sessionState mode="StateServer" stateConnectionString="tcpip=127.0.0.1:42424" cookieless="AutoDetect" timeout="20" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:50:05.323

在此处阅读此资源[http://forums.asp.net/t/1480365.aspx/1](http://forums.asp.net/t/1480365.aspx/1)您是否在 web.config 中有 cookieless="UseUri" 设置 - 尝试从我收集的内容中删除它可能会有所帮助！一定要告诉我！

此外，可能值得在问题中发布您的配置块。

我做了更多的挖掘，发现这篇文章涵盖了 MVC 源代码中的请求处理 - 使用 URL 中的会话 id 进行路由看起来非常深入 - 请参阅异常的答案代码块[可能的 ASP.NET 错误MVC 3 路由？](https://stackoverflow.com/questions/9089745/possible-bug-with-asp-net-mvc-3-routing)

我会继续找你，但这个让我难住了！我认为你需要在 Hanselmann、Haack 或 Skeet 这样的人面前提出这个问题。

# jquery-ui - jquery datepicker ui - 在下一个上一个之后失去悬停

> ID：11864252
> 
> 赞同：0
> 
> 时间：2012-08-08T12:11:56.600
> 
> 标签：jquery-ui, datepicker, hover

我有一个内联日期选择器设置。我的想法是选定的日期，当您将鼠标悬停在工具提示上时会弹出并显示事件的标题。

我遇到的问题是当跳到下个月时，悬停停止工作，当我点击默认（当前）月份的那些也不起作用。

在示例[http://jsfiddle.net/welovedesign/rn67L/](http://jsfiddle.net/welovedesign/rn67L/)中有 8 月 1 日和 11 日以及 9 月 11 日的事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:55:45.183

创建日历时，仅呈现当前月份的日期。这就是为什么当您单击另一个月份时，`div`当您将鼠标悬停在具有事件的日期上时没有出现。

如果`onChangeMonthYear`您需要为有事件的日期创建 div 并将其与适当的日期相关联（就像您在`beforeShowDay`事件中所做的那样）。

# couchdb - 如何从浏览器上传文件（附件）？

> ID：11864257
> 
> 赞同：12
> 
> 时间：2012-08-08T12:12:20.737
> 
> 标签：couchdb

我没有上传附件以使浏览器正常工作。

[这里](http://japhr.blogspot.de/2010/02/how-to-upload-files-in-couchapp.html)有一些提示，[那里有](http://comments.gmane.org/gmane.comp.db.couchdb.couchapp.general/1376)一些提示。[文档](http://wiki.apache.org/couchdb/HTTP_Document_API#Attachments)非常好，但我无法将其转换为 AJAX 上传。

我正在寻找一个超级简单的 HTML/JavaScript 示例（带或不带 jQuery），说明如何在**不**使用 jquery.couch.app.js 包装器或其他东西的情况下将文件从（相对现代的）浏览器上传到数据库。越简单越好。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T23:06:14.927

好的，这是您的纯 JavaScript 文件上传实现。

基本算法是这样的：

1.  从文件输入元素中获取文件
2.  获取文件名并键入文件对象
3.  获取要附加文件的文档的最新文档修订版
4.  使用获取的修订将文件附加到文档

HTML 部分基本上由一个简单的表单组成，它有两个元素，一个 type 的输入`file`和一个 type 的按钮`submit`。

```
<form action="/" method="post" name="upload">
  <input type="file" name="file" />
  <button type="submit" name="submit">Upload</button>
</form> 
```

现在到 JavaScript 部分。

```
window.onload = function() {
    var app = function() {
        var baseUrl = 'http://127.0.0.1:5984/playground/';
        var fileInput = document.forms['upload'].elements['file'];
        document.forms['upload'].onsubmit = function() {
            uploadFile('foo', fileInput.files[0]);
            return false;
        };

        var uploadFile = function(docName, file) {
            var name = encodeURIComponent(file.name),
            type = file.type,
            fileReader = new FileReader(),
            getRequest = new XMLHttpRequest(),
            putRequest = new XMLHttpRequest();

            getRequest.open('GET',  baseUrl + encodeURIComponent(docName),
                true);
            getRequest.send();
            getRequest.onreadystatechange = function(response) {
                if (getRequest.readyState == 4 && getRequest.status == 200) {
                    var doc = JSON.parse(getRequest.responseText);
                    putRequest.open('PUT', baseUrl +
                        encodeURIComponent(docName) + '/' +
                        name + '?rev=' + doc._rev, true);
                    putRequest.setRequestHeader('Content-Type', type);
                    fileReader.readAsArrayBuffer(file);
                    fileReader.onload = function (readerEvent) {
                        putRequest.send(readerEvent.target.result);
                    };
                    putRequest.onreadystatechange = function(response) {
                        if (putRequest.readyState == 4) {
                            console.log(putRequest);
                        }
                    };
                }
            };
        };
    };
    app();
}; 
```

`submit`基本上，我通过将自己的函数绑定到表单的`onsubmit`事件并返回 false来拦截表单的事件。

在那个事件处理程序中，我用两个参数调用我的主函数。第一个是文档名称，第二个是要上传的文件。

在我的`uploadFile()`函数中，我设置了文件名、文件类型并抓取了一些实例。第一个 HTTP 请求是获取文档当前修订的 GET 请求。如果该请求成功，我通过设置先前获得的修订、正确的内容类型来准备 PUT 请求（实际的上传请求），然后将文件转换为 ArrayBuffer。完成后，我只需发送我刚刚准备好的 HTTP 请求，然后我就放松了。

独立的附件上传方案如下所示：

```
PUT host/database/document/filename?revision=latest-revision 
```

当然，在 HTTP 请求标头中使用正确的内容类型。

*注意：我很清楚我在这里根本没有使用防御性编程，我故意这样做是为了简洁。*

# android - Android Facebook 使用 Graph ApI 创建事件

> ID：11864261
> 
> 赞同：0
> 
> 时间：2012-08-08T12:12:42.877
> 
> 标签：android, facebook-graph-api

我正在尝试使用带有以下代码的 Graph Api 创建一个事件

```
 Bundle params = new Bundle();
 params.putString("name", "Super");
 params.putString("start_time", "2013-02-14T17:30:00");

 Utility.mAsyncRunner.request("me/events", params, "POST",
                             new EvenListener(), null); 
```

但我收到以下 Facebook 错误“；#100 无效参数”。我错过了什么？你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:36:16.420

我相信您的 start_time 不是有效的 ISO-8601 格式。

您需要指定时区偏移量。

编辑：hrmmm 似乎 facebook MIGHT 实际上仍然可以在没有偏移量的情况下接受，但它已被弃用。您可能正在使用更严格的启用 facebook sdk 的未来版本？

虽然我不认为它被新邀请接受

“本地时间（已弃用，例如，'2012-07-04T19:00:00'）：没有任何时区信息的遗留事件。这种格式已被弃用，但由于遗留事件仍在继续返回系统。”

从

[https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# php - PHP 在闭包中使用函数参数

> ID：11864265
> 
> 赞同：1
> 
> 时间：2012-08-08T12:12:56.620
> 
> 标签：php, class, parameters, closures

我有一个构造一组预定义闭包的类。到目前为止一切顺利，但现在我想根据给创建函数的特定参数创建闭包。

例如日期格式化程序。调用者可以指定应该在闭包内使用的格式（作为参数）。我已经尝试在返回的闭包中使 $format 成为全局变量，但不幸的是这并没有帮助..

由于代码比文字清晰 100 倍，因此这里有一个示例。

```
class ClosureCreate {
    public static function getDateFormatter( $format ){
         return function( $value ){
              return date( $format, strtotime( $value ) );
          };
    } 
} 
```

我希望 getDateFormatter 返回一个闭包，该闭包根据 $format（getDateFormatter 的参数）中指定的 $format 格式化给定的 $value（给定闭包）。

这在 PHP 中是可能的，还是我只是要求很多？

# javascript - 使用 $.post 发送数组

> ID：11864269
> 
> 赞同：0
> 
> 时间：2012-08-08T12:13:05.570
> 
> 标签：javascript, jquery, arrays, post

我正在尝试`$.post()`使用包含数据的数组变量执行一个函数，但它接缝我做错了什么，因为它不会去或不可能

```
var parameters = [menu_name, file_name, status, access, parent, classes];
console.log(parameters);

$.post('do.php', { OP: 'new_menu', data: parameters }, function(result) {
     console.log(result);
}, 'json'); //Doesn't work 
```

Firebug 调试：NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数

那么，这将是正确的做法（如果可能的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:20:39.160

我总是使用这样的 $.ajax 形式来解决此类问题：

```
$.ajax({
  url: 'do.php',
  data: {
      myarray: yourarray
  },
  dataType: 'json',
  traditional: true,
  success: function(data) {
     alert('Load was performed.');
  }
}); 
```

通过将数组作为数据传输，传统非常重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:32:28.243

**使用`JSON.stringify()`**
[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

```
$.post('do.php', {
        OP: 'new_menu',
        data: JSON.stringify(parameters)
    },
    function(result) {
        console.log(result);
    },
    'json'
); 
```

然后，在服务器端使用**json_decode()**转换为 php 数组。
[http://php.net/manual/es/function.json-decode.php](http://php.net/manual/es/function.json-decode.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:25:40.837

## 可能是参数数组中的变量

运行您的代码并补充了以下参数：

`var parameters = ['foo','bar'];`

它似乎工作正常。我认为问题一定出在您作为数组的一部分传递的变量中。即，menu_name、file_name、status、access、parent 和 classes 变量是否与您期望的一样？例如，控制台记录它们并查看它们的输出。一个可能是一个不转换为 json 的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:53:11.667

好的，所以在这些 StackOverflow 研究员的帮助下，我设法让它按照我想要的方式工作：

```
var parameters = {
       'name': menu_name.val(),
       'file': file_name.val(),
       'status': status.val(),
       'group': group.val(),
       'parent': parent.val(),
       'classes': classes.val()
};

$.post('do.php', { OP: 'new_menu', data: parameters }, function(result) {
    console.log(result);
}, 'json'); 
```

# javascript - 使用异常变量名测试 javascript 合规性

> ID：11864270
> 
> 赞同：2
> 
> 时间：2012-08-08T12:13:14.887
> 
> 标签：javascript

是否在许多浏览器/渲染引擎上进行过任何测试，以检查它们是否符合与变量名（包括异常字符）相关的 javascript 规范。

例如，如果我使用...

```
π = Math.PI
truth = "Pi should really be "+(2*π)+" and a lot of maths should be re-written" 
```

我知道规范说它应该可以工作 - 但是所有 javascript 解释器都完全遵循规范吗？

如果这适用于 Firefox，我是否可以期望它也适用于 Internet Explorer - 在所有平台上？它也适用于 Rhino 或其他 javascript 解释器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:22:14.197

在[ecmascript 的第一版中](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%201st%20edition,%20June%201997.pdf)，可以追溯到 1997 年 6 月，它们是不允许的：

> 非 ASCII Unicode 字符只能出现在注释和字符串文字中

在可追溯到 1999 年 12 月的[第三版​​ ecmascript中，它们被允许：](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf)

> 标识符、字符串文字、正则表达式文字和注释中允许使用非拉丁 Unicode 字符。

所以任何声称实现> es3的东西都会支持它们。

# php - 如何检测用户是否通过 PHP 断开连接？

> ID：11864272
> 
> 赞同：2
> 
> 时间：2012-08-08T12:13:19.200
> 
> 标签：php

有没有办法检测用户是否与互联网断开连接？当您想发布问题时，stackoverflow 的方式。我想不出任何方法来做到这一点。有人可以对这个主题有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:15:34.757

您可以在关闭窗口时向 PHP 脚本发送 AJAX 请求：

```
window.onbeforeunload = function(){
    // Request goes here
} 
```

或者，您可以使用 websocket 技术（您可以使用[phpDaemon](https://github.com/kakserpom/phpdaemon)）永久连接服务器，这样您就可以知道用户何时与 Internet 或您的站点断开连接，或者定期（使用`setInterval`功能）ping 您的服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:18:02.400

我猜 Stack Overflow 使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)，这是一个 JavaScript 驱动的程序，在浏览器内的客户端执行。此 ajax 设置负责在发布新答案时通知用户，并让他们有机会加载所述新答案而无需重新加载整个页面。

并且这个构造有一种方法来检测与服务器的通信中的错误，它被解释为用户被断开连接，从而导致警告。

但是，这要求用户仍然打开浏览器。JavaScript 和 AJAX 中还有各种其他函数可以在用户关闭页面时执行某些操作，但它们都不被认为**始终有效**。毕竟没有*银弹。*

从服务器端，可以监视用户客户端的 AJAX 的持续 ping-pong，并在该 ping 消失时执行某些操作。比如：用户在过去两分钟内每 5 秒 ping 一次我们，但现在这个 ping 不见了。

主要问题在于 PHP 的原理，每个页面基本上都是独立存在的。当请求被获取时，页面被加载并创建，但在请求结束时，当前页面实例被拒绝存在，就像每个没有保存在其他地方（cookie、会话、数据库）的变量都丢失了一样。

# c# - 如何更改放置在不同 TabControl 页面上的 datadridview 列宽度

> ID：11864275
> 
> 赞同：0
> 
> 时间：2012-08-08T12:13:23.007
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn

我的表单上有一个 TabControl，有两页。每个页面都包含一个datagridview。如果`Form.Load`我从 SQL 数据库填充我的 datagridviews 并更改这些网格的某些列宽。

```
 DataTable GLOBAL_TABLE = new DataTable();
    object[] GLOBAL_PARAMETERS = new object[50];

    private void frmMAIN_Load(object sender, EventArgs e)
    { 
        LOAD_TAB_1();
        LOAD_TAB_2();
    }

    void LOAD_TAB_1()
    {
        //SQLRELATION class contain method that execute stored procedure on server 
        //and return DataTAble
        Array.Clear(GLOBAL_PARAMETERS, 0, GLOBAL_PARAMETERS.Length);
        GLOBAL_PARAMETERS[0] = userID;
        GLOBAL_PARAMETERS[1] = date_1.Date;
        GLOBAL_PARAMETERS[2] = date_2.Date;
        GLOBAL_TABLE = SQLRELATION.GET_PROCEDURE("PROC023", GLOBAL_PARAMETERS, true);
        dgv_MAIN_substitution.DataSource = GLOBAL_TABLE;

        //Here I'm changing my columns width
        foreach (DataGridViewColumn col in dgv_MAIN_substitution.Columns)
        {
            switch (col.Name)
            {
                case "Dummy": col.Width = 30; break;
                case "MOQ": col.Width = 30; break;
                case "Inactive": col.Width = 30; break;
                default: break; 
             }
         }
    }

    void LOAD_TAB_2()
    {
        //The same I'm doing for the second datagridview 
        Array.Clear(GLOBAL_PARAMETERS, 0, GLOBAL_PARAMETERS.Length);
        GLOBAL_PARAMETERS[0] = userID;
        GLOBAL_PARAMETERS[1] = date_1.Date;
        GLOBAL_PARAMETERS[2] = date_2.Date;
        GLOBAL_TABLE = SQLRELATION.GET_PROCEDURE("PROC023", GLOBAL_PARAMETERS, true);
        dgv_MAIN_orders.DataSource = GLOBAL_TABLE;

        //Changing my columns width for second datagrigview
        foreach (DataGridViewColumn col in dgv_MAIN_orders.Columns)
            {
                switch (col.Name)
                {
                    //Error if HERE!
                    case "Status": col.Width = 30; break;
                    case "PO Number": col.Width = 150; break;                        
                    default: col.Width = 40; break;
                }        
             }
      } 
```

我的两个数据网格视图都从数据库中获取数据。对于我的第一个 datagridview，一切正常。但是，当我尝试在第二个 TabPage 上更改第二个 datagridview 的列宽时，我收到一条消息`Object reference not set to an instance of an object`。但为什么？在下面的屏幕截图中，您可以看到第二个 datagridview 的列名存在，但我无法更改它的列宽。

![错误截图](../Images/5b7d68acda0deb41e8a7abad9da00c2d.png)

我做错了什么？我的数据网格不是空的并且包含数据。我应该先激活我的 TabPage 还是其他东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T21:57:07.840

我有同样的问题。显然发生崩溃是因为未显示控件。我在表单的 Shown() 事件中设置了宽度，然后它对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T14:37:01.070

当我自己尝试时，我无法重现您的问题。但是，如果您事先知道列名，我会使用这种方法：

```
dgv_MAIN_substitution.Columns["Dummy"].Width = 30;
dgv_MAIN_substitution.Columns["MOQ"].Width = 30;
dgv_MAIN_substitution.Columns["Inactive"].Width = 30; 
```

和

```
dgv_MAIN_orders.Columns["Status"].Width = 30;
dgv_MAIN_orders.Columns["PO Number"].Width = 150; 
```

这比 foreach 循环和 switch 语句更干净。您可以做的另一件事是设置 Column.AutoSizeMode：

```
dgv_MAIN_orders.Columns["PO Number"].AutoSizeMode = DataGridViewAutoSizeColumnMode.DisplayedCells; 
```

这样它就可以自动调整您的宽度而无需您的干预。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-13T20:35:41.947

当我尝试通过此代码调整列大小时，我遇到了同样的异常：

```
this.DGVproOrder.Columns[0].Width = 86;
this.DGVproOrder.Columns[1].Width = 166;
... 
```

问题是因为我将数据网格视图属性自动大小列模式设置为填充以填充容器，但是当我将其设置回 null 时，一切都很好。

# c# - Ninject ActivationException：激活 IAlertManagement 时出错

> ID：11864279
> 
> 赞同：9
> 
> 时间：2012-08-08T12:13:38.490
> 
> 标签：c#, ninject, tfsbuild, ninject-extensions

我收到以下错误：

```
Test method: BootStrapperTest.Can_Create_Alert_Management_Object threw exception:  Ninject.ActivationException: 
Error activating IAlertManagement No matching bindings are available, and the type is not self-bindable. 

Activation path:   
1) Request for IAlertManagement

Suggestions:    
1) Ensure that you have defined a binding for IAlertManagement.    
2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.    
3) Ensure you have not accidentally created more than one kernel.    
4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.    
5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

这是导致此异常的测试用例：

```
[TestInitialize]
public void Initialize()
{
    BootStrapper.RegisterTypes();
}

[TestMethod]
public void Can_Create_Alert_Management_Object()
{
    IAlertManagement alertManagementService = BootStrapper.Kernel.Get<IAlertManagement>();

    Assert.IsNotNull(alertManagementService);
}

//This is the code that gets called in [TestInitialize]
public static void RegisterTypes()
{
    if (!initialized)
    {
        Kernel.Bind(scanner => scanner.FromAssembliesMatching("MyCompany.MyProduct.*")
                                   .SelectAllClasses()
                                   .BindDefaultInterface());

        Kernel.Unbind(typeof(IWcfServiceClient<>));
        Kernel.Bind(typeof(IWcfServiceClient<>)).ToMethod(ctx =>
                    (ctx.Kernel.Get(typeof(WcfServiceClientProvider<>).MakeGenericType(ctx.GenericArguments)) as IProvider).Create(ctx)); 
    }

    initialized = true;
} 
```

上述错误发生在我的**构建服务器**上的一个单元测试中，但没有发生在我的开发机器上。我有 7 个其他测试几乎与此测试相同，它们在构建服务器和我的开发机器上**通过**，但这是唯一失败的测试。

IAlertManagement 接口来自一个名为**Core**的 dll ，具体类型来自另一个名为**AlertManagement**的 dll 。我的单元测试项目中包含**Core** dll 和**AlertManagement** dll 作为项目引用。我有 7 或 8 个与这种情况相同的其他测试，但这是唯一失败的测试。

任何想法都会不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:41:25.160

发生错误是因为`IAlertManagement`未与任何具体类绑定。尝试手动绑定`IAlertManagement`。

```
public static void RegisterTypes()
{
    if (!initialized)
    {
        Kernel.Bind(scanner => scanner.FromAssembliesMatching("MyCompany.MyProduct.*")
                               .SelectAllClasses()
                               .BindDefaultInterface());

        //Try to add following line
        Kernel.Bind<IAlertManagement>().To<ConcreteImplementationOfIAlertManagement>();

        Kernel.Unbind(typeof(IWcfServiceClient<>));
        Kernel.Bind(typeof(IWcfServiceClient<>)).ToMethod(ctx => (ctx.Kernel.Get(typeof(WcfServiceClientProvider<>).MakeGenericType(ctx.GenericArguments)) as IProvider).Create(ctx)); 
    }

    initialized = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-29T22:13:15.110

我最终通过在我的单元测试项目中添加对解析类型的具体引用来解决这个问题。仅仅添加项目引用是不够的。这就是我这样做的方式：

```
[TestClass]
public class AssemblyInitialize
{
    /// <summary>
    /// Method which gets executed once per unit test session. The purpose of this method is to reference any loosely coupled
    /// assemblies so that they get included in the unit test session. If no code actually references a given assembly, even if its
    /// technically a project reference, it will not be copied to the test output folder.
    /// </summary>
    [AssemblyInitialize]
    public static void InitializeReferencedAssemblies(TestContext context)
    {
        List<Type> looselyCoupledTypes = new List<Type>
                                         {
                                             typeof(AlertManagement),
                                             typeof(Naming),
                                         };

        looselyCoupledTypes.ForEach(x => Console.WriteLine("Including loosely coupled assembly: {0}",
                                                           x.Assembly.FullName));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:14:02.437

1.  我要检查的第一件事是确保包含实现的 DLL`IAlertManagement`被复制到构建服务器上的正确目录，以便测试看到它。

2.  要尝试的另一件事是将内核加载代码移动到`ClassInitialize`函数而不是 a `TestInitialize`，只是为了查看是否存在某种竞争条件或其他相关事物。我在构建服务器上看到了随机错误，因为对象以不同的顺序或比通常发生的更快（在我的情况下涉及 Rx、TPL 和未观察到的异常）。可能是在构建服务器上并行运行的测试多于在桌面上并行运行的测试。

3.  或者可能部分是由于服务器可能正在使用[Server GC](https://stackoverflow.com/questions/5643147/determining-which-garbage-collector-is-running)。我不知道强制它使用 Workstation GC 是否有帮助，但它可能值得一试。

# jquery - jQuery中的切换效果

> ID：11864284
> 
> 赞同：0
> 
> 时间：2012-08-08T12:13:46.277
> 
> 标签：jquery, button, input, toggle

我写了一个代码：

```
$('.Edit').live('click', function() {
    if ($(this).text().valueOf()=="Save"){
        alert('sauvegarder..');
        var id = $(this).attr("id");
        $(".d"+id).prop('enabled', false);
        $(".d"+id).css("background-color","#FFF");
        $(".d"+id).css("border-color","black");
        $(this).text('Save').button("refresh");
    } else if($(this).text().valueOf()=="Edit") {
        alert('editer..');
        var id = $(this).attr("id");
        $(".d"+id).prop('disabled', false);
        $(".d"+id).css("background-color","#FFF");
        $(".d"+id).css("border-color","red");
        $(this).text('Save').button("refresh");
    }
} 
```

它有这个功能：按钮通常处于“编辑”模式，当我点击所有输入元素时，我可以在其中写入内容，同时按钮名称更改为“保存”。当我点击保存时，输入被禁用，我不能再写了。但是当我执行此代码时，它会在同一时间完成，所以我有两个警报和输入保持启用状态。我想要某种切换效果，我想知道它是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:33:17.170

我没有得到什么是`enabled`财产。您也可以链接事件或缓存它。

```
$('.Edit').on('click','.Edit', function() {
    if ($(this).text().valueOf()=="Save"){
        alert('sauvegarder..');
        var id = $(this).attr("id");
        $(".d"+id).prop('disabled', true)
                  .css({"background-color":"#FFF", "border-color":"black"});
        $(this).text('Save').button("refresh");
    } else if($(this).text().valueOf()=="Edit") {
        alert('editer..');
        var id = $(this).attr("id");
        $(".d"+id).prop('disabled', false)
                  .css({"background-color":"#FFF", "border-color":"red"});
        $(this).text('Save').button("refresh");
    }
}​);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:41:24.187

您也可以尝试更改禁用属性的此类代码：

... $(".d"+id).attr('disabled', 'disabled').css(...) ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:45:14.097

```
$('.Edit').live('click', function() {
    var el = $(this);   
        var r = $(".d"+el.attr("id"));
        if (el.hasClass('editMode')){
        el.removeClass('editMode');
                alert('sauvegarder..');
        r.attr("disabled", "disabled").css({
                    "background-color":"#FFF",
                    "border-color":"black"
                });
        el.text('Save').button("refresh");
    } else {
        el.addClass('editMode');
                alert('editer..');
        r.removeAttr("disabled").css({
                    "background-color","#FFF",
                    "border-color","red"
                });
        el.text('Save').button("refresh");
    }
} 
```

# asp.net - 在 ASP.NET Web API 服务中使用 WIF

> ID：11864285
> 
> 赞同：2
> 
> 时间：2012-08-08T12:13:47.260
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, wif

我正在尝试做这样的事情：

1.  我有一个 MVC4 Web 应用程序和一个 Web-API 服务（托管在 azure 中的两个不同角色上）
2.  另一个角色运行 CustomSTS1。
3.  MVC Web 应用信任 CustomSTS1
4.  现在客户登录到他被重定向到 STS 登录页面的站点。
5.  登录后，他将被重定向回 MVC 网站。
6.  从这个网站，客户执行操作，然后调用 web-API 服务。

我在 Web 应用程序中有 SAML 令牌，我将其传递给 WebAPI 服务。

现在，当我尝试在 Web API 端验证 SAML 令牌时，我得到一个

```
Message=ID1032: At least one 'audienceUri' must be specified in the SamlSecurityTokenRequirement when the AudienceUriMode is set to 'Always' or 'BearerKeyOnly'. Either add the valid URI values to the AudienceUris property of SamlSecurityTokenRequirement,  or turn off checking by specifying an AudienceUriMode of 'Never' on the SamlSecurityTokenRequirement. 
```

这没有 Web API 服务信任 CustomSTS1

设置信任后，每当我尝试向 WEB API 服务发出 HTTP Get 请求时，总是会收到 HTTP 401: UNAUTHORIZED。

现在，我的问题是，（我知道我目前的方法肯定是错误的）

1.  如何设置与 CustomSTS1 的信任关系，以便 WebAPI 服务能够代表登录到 MVC 站点的用户执行 ActAS？

或者

1.  这个架构错了吗？
2.  还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:45:31.373

这种方法在概念上是错误的。MVC 应用程序应使用 ActAs 协商 STS 中 Web API 的新令牌。这就是它传统上适用于 SOAP 服务的方式。然而，Web API 正在远离 SAML，因为它是一种依赖于不同 WS-* 规范的复杂格式。如果您想在该级别支持 SSO，OAuth 2.0 正在成为该领域的标准。

另一种方法是在 MVC 应用程序和 Web API 之间建立隐式信任，因此从 MVC 应用程序对 Web API 的所有调用都是通过更标准的 Http 身份验证机制完成的，例如基本身份验证，使用一组特定的凭据，只有MVC 应用程序知道。MVC 应用程序中有关已登录用户的信息作为附加信息传递。

问候，巴勃罗。

# xamarin.ios - MonoTouch.Dialog：如何使用花哨的 GlassButton？

> ID：11864294
> 
> 赞同：1
> 
> 时间：2012-08-08T12:14:10.437
> 
> 标签：xamarin.ios, monotouch.dialog

我想知道 Miguel 的`GlassButton`课程与 MonoTouch.Dialog 结合的最佳用途是什么？是否有一些内置机制可以将带有附加点击处理程序的 StringElement 变成`GlassButton`? 还是我应该制作继承/包含 GlassButton 的自定义视图元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:53:11.847

您可以通过将 UIViews 包装在 UIViewElement 中来将任何 UIViews 添加到 MonoTouch.Dialog，如下所示：

```
 var myWrapper = new UIViewElement (new GlassButton (rect));

 section.Add (myWrapper); 
```

# mysql - sql比较动态计数值

> ID：11864301
> 
> 赞同：0
> 
> 时间：2012-08-08T12:14:41.933
> 
> 标签：mysql, sql, database, count, compare

首先这只是一个测试表，我想学习一些sql查询。我想知道谁和“彼得”一样经常预订同一航班（从慕尼黑开始）。给我正确结果的查询是：

```
SELECT r1.vorname
FROM (
SELECT p1.vorname, count(p1.passnr) as anzahl
FROM passagier p1, teilnehmer t1, abflug a
WHERE a.abflug = 'münchen'
AND t1.flugnr = a.flugnr
AND t1.passnr = p1.passnr
group by p1.passnr ) as r1,
(
SELECT p1.vorname, count(p1.passnr) as anzahl
FROM passagier p1, teilnehmer t1, abflug a
WHERE a.abflug = 'münchen'
AND t1.flugnr = a.flugnr
AND t1.passnr = p1.passnr
group by p1.passnr ) as r2

WHERE r2.vorname = 'peter'
AND r1.vorname != 'peter'
AND r1.anzahl = r2.anzahl 
```

是否有更好的查询来获得相同的结果？

```
--
-- Table structure for table `abflug`
--

CREATE TABLE IF NOT EXISTS `abflug` (
  `flugnr` varchar(30) NOT NULL,
  `zielkrz` varchar(30) NOT NULL,
  `ziel` varchar(30) NOT NULL,
  `abflkrz` varchar(30) NOT NULL,
  `abflug` varchar(30) NOT NULL,
  PRIMARY KEY (`flugnr`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `abflug`
--

INSERT INTO `abflug` (`flugnr`, `zielkrz`, `ziel`, `abflkrz`, `abflug`) VALUES
('ba921', 'fra', 'frankfurt', 'muc', 'münchen'),
('lh807', 'nrt', 'tokyo narita', 'fra', 'frankfurt'),
('lh808', 'fra', 'frankfurt', 'kix', 'osaka kansai'),
('lh809', 'kix', 'osaka kansai', 'fra', 'frankfurt');

--
-- Table structure for table `passagier`
--

CREATE TABLE IF NOT EXISTS `passagier` (
  `passnr` varchar(30) NOT NULL,
  `vorname` varchar(30) NOT NULL,
  `name` varchar(30) NOT NULL,
  PRIMARY KEY (`passnr`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `passagier`
--

INSERT INTO `passagier` (`passnr`, `vorname`, `name`) VALUES
('10118', 'gerhard', 'schröder'),
('10120', 'peter', 'müller'),
('10123', 'angela', 'merkel'),
('10999', 'aryan', 'layes'),
('11000', 'jessica', 'alba');

--
-- Table structure for table `teilnehmer`
--

CREATE TABLE IF NOT EXISTS `teilnehmer` (
  `flugnr` varchar(30) NOT NULL,
  `passnr` varchar(30) NOT NULL,
  `datum` varchar(30) NOT NULL,
  PRIMARY KEY (`flugnr`,`passnr`,`datum`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `teilnehmer`
--

INSERT INTO `teilnehmer` (`flugnr`, `passnr`, `datum`) VALUES
('ba921', '10120', '20.1.2012'),
('ba921', '10120', '23.1.2012'),
('ba921', '10123', '20.1.2012'),
('ba921', '10999', '20.1.2012'),
('ba921', '10999', '23.1.2012'),
('ba921', '11000', '23.1.2012'),
('lh807', '10118', '20.1.2012'),
('lh807', '10120', '20.1.2012'),
('lh807', '10123', '20.1.2012'),
('lh808', '10118', '27.3.2012'),
('lh808', '10120', '23.1.2012'),
('lh808', '10123', '23.1.2012'),
('lh809', '10120', '23.1.2012'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:42:02.843

可能有更有效的方法。以下查询在子查询中计算 Peter 的信息，并将其连接到查询的其余部分：

```
select allp.*
from (SELECT p.passnr, count(p1.passnr) as anzahl
      FROM passagier p join
           teilnehmer t
           on t.passnr = p.passnr join
           abflug a
           on t.flugnr = a.flugnr
      where a.abflug = 'münchen'
      group by p.passnr
     ) allp cross join
     (SELECT count(p1.passnr) as anzahl
      FROM passagier p join
           teilnehmer t
           on t.passnr = p.passnr join
           abflug a
           on t.flugnr = a.flugnr 
      where a.abflug = 'münchen' AND
            p.vorname = 'peter'
      limit 1
     ) peter
where allp.forname <> 'peter' and allp.anzahl >= peter.anzahl 
```

使用“限制”是为了以防万一数据中有多个彼得。

您还可以使用“with”语句来简化这一点：

```
with allp as (
      SELECT count(p1.passnr) as anzahl
      FROM passagier p join
           teilnehmer t
           on t.passnr = p.passnr join
           abflug a
           on t.flugnr = a.flugnr 
      where a.abflug = 'münchen'
     ) allp 
select *
from allp
where allp.forname <> 'peter' and
      allp.anzahl >= (select anzahl from allp where vorname = 'peter' limit 1) 
```

此版本汇总了乘客的所有数据。然后它选择“anzahl”大于彼得的那些。在 mysql 中，第一个版本可能会执行得更好，因为 WHERE 子句中的子查询将（可能）在每一行上进行评估。

# wpf - 如何在 WPF 表单中将内容移动到下一页

> ID：11864302
> 
> 赞同：0
> 
> 时间：2012-08-08T12:14:42.173
> 
> 标签：wpf, wpf-controls

我是WPF的新手，如果有问题请合作。在这里我需要专家的一些想法。

我正在开发一个应用程序，在填写表单上存在的字段后，我必须在 WPF 表单上显示一些内容。在同一个表单上，我还有一个打印选项。

检查此图像。这是我的表单，红色块中的部分是在运行时生成的。当我单击打印按钮时，它只显示纸上的可见部分并跳过剩余部分。

![WPF 表单](../Images/1c12e92dc4efe9d0415585fce558a60f.png)

**问题：** 当我点击打印时，如何将滚动到下一页的表单的剩余部分移动到下一页。

**例如**，在给定的图像中，我们只能看到 2 个完全的靶心和下一个 2 个部分。我如何才能将剩余的部分转移到下一页，只有**当我点击打印时**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:25:03.543

答案很简单：不要依赖你的窗口进行打印，而是构建你想要的视觉效果然后打印它。
例如，您必须有一个函数来动态创建圆圈等，然后将它们添加到面板中。您可能会做的是打印面板。
或者，如果您愿意，您可以动态构建一个新窗口，在其中放置您想要打印的所有数据，然后打印该窗口。这种方法的优点是内容更灵活（如果您想要页眉/页脚），并且您可以轻松查看内容以进行调试。请注意，即使 Window 内容是动态的，您也可以拥有一个用于打印的基本窗口，以避免您使用代码执行过多的 xaml（解释：您可能将 TextBox 绑定到您在 Print Window 的构造函数中设置的 PrintTitle 属性...）。
请注意，未在屏幕上呈现的视觉效果将不会打印。请确保，为了避免常见问题，从这个伟大的网站看这篇文章，打开代码，这里：
[http ://www.switchonthecode.com/tutorials/printing-in-wpf](http://www.switchonthecode.com/tutorials/printing-in-wpf)

编辑（回复评论中的问题）：
1）如果您有固定数量的牛眼，只需为该数字制作一个窗口并打印它，这更容易。
2) 要将视觉效果放在页面而不是行中，您必须依赖页面宽度/高度。重要的是控件的大小与页面的大小。在示例中，他们构建（在 OnRender 中）具有 LineHeight、LineWidth 作为大小的控件。做同样的事情：尝试放置尽可能多的控制线，例如（控制高度 + 边距）*NumberOfControlPerPage < 页面高度。
然后，您必须更改 OnRender 以呈现控件，而不是使用矩形 + 文本制作的行。在 Horizo​​ntal StackPanels 中将您的控件两个两个打包然后将这些 StackPanel 打包到垂直 StackPanel 中，然后进行渲染。您必须跟踪最后呈现控件的每个页面，然后在以下控件处恢复呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:51:27.363

请点击[此](http://books.google.co.in/books?id=nYl7J7z3KssC&pg=PA998&lpg=PA998&dq=documentpaginator%20wpf%20c#&source=bl&ots=V530noZ27x&sig=5WLG-ef7N0bmWchkVsTTVDJla-A&hl=en&sa=X&ei=2WkjULT9H8qIrAequIGYAQ&ved=0CF0Q6AEwBw#v=onepage&q=documentpaginator%20wpf%20c#&f=true)链接。这是我在网络世界中搜索后得到的基本信息。使用此基本详细信息，您可以在 WPF 中对打印进行任何操作

# java - 使用 struts-spring 插件

> ID：11864304
> 
> 赞同：0
> 
> 时间：2012-08-08T12:14:48.597
> 
> 标签：java, spring, model-view-controller, jakarta-ee, struts

在我的项目中他们以这种方式进行映射，我发现类型参数很奇怪，护目镜，阅读了一些 struts spring 插件，任何人都可以给我一点想法为什么它会以这种方式完成，或者这是什么......？ ?

```
<action path="/loginAction"  
          type="org.springframework.web.struts.DelegatingActionProxy"  
          name="loginForm"  
          scope="request"  
          validate="false"  
          input="/showLoginAction.do"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:10:45.013

这使用了一个 spring struts 插件，这意味着您在另一个 XML 文件中有一个名为 /loginAction 的 bean，它处理 URL。

这使得 struts 动作成为 spring 豆类，并以这种方式轻松使用 spring ioc。

XML 文件在 struts-config.xml 文件或其依赖项之一中的某些位置被引用。

问候

菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:29:57.873

查看文档，它将消除您的所有疑问。[http://static.springsource.org/spring/docs/1.1.5/api/org/springframework/web/struts/DelegatingActionProxy.html](http://static.springsource.org/spring/docs/1.1.5/api/org/springframework/web/struts/DelegatingActionProxy.html)

# excel - dde excel 2010 链接并非全部有效

> ID：11864305
> 
> 赞同：2
> 
> 时间：2012-08-08T12:14:52.110
> 
> 标签：excel, vba, windows-7, virtual-machine, dde

我在我的电脑（Windows 7 服务器虚拟机）上安装了一个程序，它将数据导出到 dde ​​excel。导出是非常错误的，因为部分 dde ​​链接在部分时间不起作用等等。

我已经看到了一个[可能的解决方案](http://social.technet.microsoft.com/Forums/en-US/excel/thread/7c8f845d-c4aa-4627-9008-3251d2772536/)，表明可能应该在每次运行之前关闭 dde ​​链接

```
Application.DDETerminateAll 
```

或者

```
 For i = 1 To 1000
        Application.DDETerminate (i) ' Closes all DDE links whose channels might be open
    Next i 
```

我正在寻找解决方案，并认为也许可以修改 dde ​​设置以通过 excel 2010 或 Windows 注册设置来解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:54:10.347

DDE 早就被弃用了。

在 Google 上，您会发现很多关于 DDE 无法在 Windows 7 上运行的问题。
建议的解决方案包括：

*   禁用 UAC。
*   在接收程序的消息过滤器中注册 DDE 消息

    ```
    ChangeWindowMessageFilter(WM_DDE_FIRST, MSGFLT_ADD);
    ...
    ChangeWindowMessageFilter(WM_DDE_LAST, MSGFLT_ADD); 
    ```

*   提升发送程序的权限。

看看有没有适合你的。

# iphone - 如何在目标 C 中对 NSMutableArray 进行排序

> ID：11864309
> 
> 赞同：0
> 
> 时间：2012-08-08T12:15:03.723
> 
> 标签：iphone, ios

我正在开发计时器应用程序。我有一个数组。我想按升序对数组进行排序。假设我在数组中有 5 个元素，例如 10,100,50,30,70。

我想要像 10,30,50,70,100 这样的数组。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T12:19:03.153

```
NSArray *sortedArray = [unsortedArray sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
}]; 
```

编辑：如果元素是数字，则更改返回的类型以及 firstObject 和 secondObject 的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:19:46.097

来自[苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSComparator)

```
NSArray *sortedArray = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {

    if ([obj1 integerValue] > [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if ([obj1 integerValue] < [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T12:20:12.270

利用`sortedArrayUsingComparator`

```
NSArray *arr = @[@3, @2, @6, @1];
NSArray *sorted = [arr sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    if ([obj1 intValue] < [obj2 intValue]) return NSOrderedAscending;
    else return NSOrderedDescending;
}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:42:43.390

```
 NSArray * arr=[[NSArray alloc]initWithObjects:[NSNumber   numberWithInt:10],[NSNumber   numberWithInt:100],[NSNumber   numberWithInt:50],[NSNumber   numberWithInt:30],[NSNumber   numberWithInt:70], nil];
    NSLog(@"Before sorting%@",arr);

    arr = [arr sortedArrayUsingSelector:@selector(compare:)];
      NSLog(@"After sorting%@",arr); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-08T12:19:21.780

```
NSSortDescriptor *aSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"sort" ascending:YES comparator:^(id obj1, id obj2) {

    if ([obj1 integerValue] > [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedDescending;
    }
    if ([obj1 integerValue] < [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}];
self.myList = [NSMutableArray arrayWithArray:[unsortedList sortedArrayUsingDescriptors:[NSArray arrayWithObject:aSortDescriptor]]]; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-08T12:27:11.340

使用此代码：

```
NSArray *sortedArray = [unsortedArray sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
}]; 
```

编辑：如果元素是数字，则更改返回的类型以及 firstObject 和 secondObject 的类型。

# php - 如何在创建 wordpress 主题时包含 css 文件？

> ID：11864314
> 
> 赞同：0
> 
> 时间：2012-08-08T12:15:18.907
> 
> 标签：php, css, wordpress, header, stylesheet

我正在尝试创建一个 wordpress 主题。在学习了一些教程之后，我在 header.php 中写了这个

```
<link href="<?php bloginfo('stylesheet_url');  ?> " rel="stylesheet" type="text/css" media="screen" /> 
```

我在 index.php 所在的文件夹中有一个 CSS 文件，styles.css。我从某个地方奇怪地调用了 CSS，但不是从 style.css 文件。如何让它从styles.css文件中调用它的所有样式？谢谢 ： ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:42:07.167

`bloginfo('stylesheet_url');`检查函数的输出（例如，通过在某处回显）并查看它是否实际指向您的样式表可能是一个好主意。您始终可以使用`bloginfo('stylesheet_directory');`和添加文件名以链接到同一目录中的另一个文件。

# php - 将 LIMIT 转换为 TOP

> ID：11864324
> 
> 赞同：3
> 
> 时间：2012-08-08T12:16:00.590
> 
> 标签：php, mysql, sql, sql-server-2008-r2

在 MySQL 中我们使用`LIMIT`，而在 sql server 中我们必须使用`TOP`而不是`LIMIT`，但我们可以`LIMIT`这样使用：

`Limit X, Y`其中 X 是起点，Y 是持续时间。

现在我怎么能`TOP`像那个例子一样使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:17:13.837

您可以使用 ROW_NUMBER() 函数和 CTE（公用表表达式）

[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

```
with cte as(
select *,ROW_NUMBER() over (order by col1) as rownumber from <table>)
select * from cte where rownumber between x and y 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:20:26.133

你不能在 SQL Server 2012 之前添加[FETCH..OFFSET](http://msdn.microsoft.com/en-us/library/gg699618.aspx)

所以你需要使用 ROW_NUMBER 函数来“分页”。例子：

*   [在 Sql Server 2008 中使用 Row_Number 实现表分页是否存在任何性能问题？](https://stackoverflow.com/q/2308220/27535)
*   [相当于 SQL Server 的 LIMIT 和 OFFSET？](https://stackoverflow.com/q/2135418/27535)

# mysql - 聚合行并创建主键

> ID：11864325
> 
> 赞同：2
> 
> 时间：2012-08-08T12:16:03.047
> 
> 标签：mysql, myisam

我需要解决缺少主键的问题，并且我想就最佳方法获得一些想法。

我们在几个生产数据库上有一个程序，我们每小时将新数据插入总和表。其中五列是键，其他列是不同总和的值。我们使用 ON DUPLICATE KEY UPDATE 在每次插入时添加总和。插入语句看起来像这样：

```
INSERT INTO sums (key1,key2,key3,key4,key5,sum1,sum2) VALUES (..., 13, 42, 3)
ON DUPLICATE KEY UPDATE sum1=VALUES(sum1)+sum1,sum2=VALUES(sum2)+sum2 
```

问题是创建表时未设置主键（不是我的错:)。现在我需要聚合具有相同键的行，然后添加主键。由于缺少主键，该表在一些系统上已经增长到大约 700 000 000 行，所以我需要一些有效的方法来做到这一点。

我想这样做，而不必推迟每小时添加新行。因为在系统现在的工作方式中，保存插入并在以后执行它们将需要大量工作。

我所做的每一项操作都无法将表锁定超过 45 分钟左右。如果我设法先合并一些行，我希望创建实际的主键将花费更短的时间。也许首先为一些键列创建索引会更快，所以我有一个用于聚合行操作的索引？

我也不确定聚合行的最佳方法是什么。任何好的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:48:33.637

首先，将您现有的 sums 表重命名为 sums_old 并创建新的正确 sums 表，这样您就可以保持每小时的流程继续进行。但是，请注意，在您应用汇总数据之前，总和表中的数据将不正确。

现在，应用以下查询来更新表：

```
INSERT INTO sums (key1, key2, key3, key4, key5, sum1, sum2)
SELECT key1, key2, key3, key4, key5, sum1, sum2 FROM sums_old
ON DUPLICATE KEY UPDATE sum1 = VALUES(sum1) + sum1, sum2 = VALUES(sum2) + sum2 
```

但是等等，因为你使用的是 MyISAM，并且你不希望表锁定太久，所以使用 LIMIT 分块执行：

```
INSERT INTO sums (key1, key2, key3, key4, key5, sum1, sum2)
SELECT key1, key2, key3, key4, key5, sum1, sum2 FROM sums_old
ORDER BY some_index
LIMIT 0, 250000
ON DUPLICATE KEY UPDATE sum1 = VALUES(sum1) + sum1, sum2 = VALUES(sum2) + sum2

INSERT INTO sums (key1, key2, key3, key4, key5, sum1, sum2)
SELECT key1, key2, key3, key4, key5, sum1, sum2 FROM sums_old
ORDER BY some_index
LIMIT 250000, 250000
ON DUPLICATE KEY UPDATE sum1 = VALUES(sum1) + sum1, sum2 = VALUES(sum2) + sum2

INSERT INTO sums (key1, key2, key3, key4, key5, sum1, sum2)
SELECT key1, key2, key3, key4, key5, sum1, sum2 FROM sums_old
ORDER BY some_index
LIMIT 500000, 250000
ON DUPLICATE KEY UPDATE sum1 = VALUES(sum1) + sum1, sum2 = VALUES(sum2) + sum2

... 
```

您需要通过一些键来分块进行排序，因此如果您没有，则需要将其添加到 sums_old 表中。

弄清楚什么是好的块大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:32:54.393

我会说尝试这样的事情来聚合它们

```
select key1,key2,key3,k4,key5,
convert(key1 as varchar) + convert(key2 as varchar) + convert(key3 as varchar) + convert(k4 as varchar) + convert(key5 as varchar) as Pk
from sums
group by key1,key2,key3,k4,key5
having distinct(convert(key1 as varchar) + convert(key2 as varchar) + convert(key3 as varchar) + convert(k4 as varchar) + convert(key5 as varchar)) 
```

我不羡慕你，700M是分配的，我想像你想做的那样的操作应该需要分配的时间。

希望这可以帮助

干杯

# c# - 如何在 jQuery 模态对话框中设置我的 Web 表单并使用它？

> ID：11864326
> 
> 赞同：0
> 
> 时间：2012-08-08T12:16:03.187
> 
> 标签：c#, jquery, asp.net, modal-dialog

我有一个 ASP.NET 应用程序，用于`ListView`在“BenutzerListe.aspx”中列出所有搜索用户。客户端用户可以选择一个用户并在一个名为“benutzer.aspx”的额外 Web 表单中显示该用户的属性。在“Benutzer.aspx”中，用户可以更改这些属性。

我想显示这些信息，而不是在第二个 Web 窗体中，而是在由 jQuery 创建的对话框中。我听说我可以在对话框中输入我的“Benutzer.aspx”。

我怎么能做到这一点？

我的想法：

![带有想法模型的屏幕截图](../Images/c21b5b049ca1c883a0ae58dba672b288.png)

aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="~/BenutzerListe.aspx.cs" Inherits="BenutzerListe.BenutzerListe" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <script src="Scripte/jquery-1.7.2.js" type="text/javascript"></script>

     <link href="~/App_Theme/BenutzerListeStyle.css" type="text/css" rel="Stylesheet" />

    <style type="text/css">
        #SuchTabelle
        {
            width: 587px;
        }
    </style>

    <script type="text/javascript">

        $(document).ready(function () {

            $("#Button2").click(function (event) {

                //How I open a Dialog with Benutzer.aspx

            });

    </script>

</head>
<body>
    <form id="form1" runat="server">

    <div class="header">
        <table id="SuchTabelle" runat="server" border="0">

            <tr>
                <th><asp:Label ID="id_SearchUser" runat="server" Text="lblSearchUser"></asp:Label></th>
                <th><asp:TextBox ID="txtBenutzer" runat="server" Width="250px"></asp:TextBox></th>

            </tr>
            <tr>
                <th><asp:Label ID="id_location" runat="server" Text="lblLocation"></asp:Label></th>
                <th><asp:DropDownList ID="dropWerk" runat="server" Width="250px" /></th>
                <th><asp:Button ID="Button2" runat="server" Text="Suchen" 
                                onclick="btnBenutzerSuchen_Click" Width="219px" /></th>
            </tr>

        </table>

        <div id="bild">
            <asp:Image runat="server" ImageUrl="~/App_Theme/lw_logo.jpg" Height="58px" 
                Width="277px" />
        </div>

        <div id="meldung">
            <asp:Label runat="server" ID="lblMeldung"></asp:Label>
        </div>

      </div>

      <div class="bodyList">

        <asp:ListView runat="server" ID="myListView">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0" width="800" cellpadding="0" cellspacing="0">
                <tr style="background-color:#E5E5FE" class="TableClass">
                    <th id="th1" runat="server"><asp:LinkButton ID="lnkBenutzer" runat="server" >id_Benutzer</asp:LinkButton></th>
                    <th id="th2" runat="server"><asp:LinkButton ID="lnkemail" runat="server" >id_Email</asp:LinkButton></th>
                    <th id="th3" runat="server"><asp:LinkButton ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
                    <th id="th4" runat="server"><asp:LinkButton ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
                    <th id="th5" runat="server"><asp:LinkButton ID="lnkTelefon" runat="server" >id_Telefon</asp:LinkButton></th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr class="TableClass">    
                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

              <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </ItemTemplate>

        <AlternatingItemTemplate>

            <tr class="TableClass"> 

                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

                <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </AlternatingItemTemplate>

        </asp:ListView>

        <br />
        <br />

    </div>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:36:30.043

试试这是否有帮助：

[http://msdn.microsoft.com/en-us/library/ie/ms536759(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536759(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:02:29.840

[您可以使用JQUERY UI 对话框](http://jqueryui.com/demos/dialog/)做一些简单的事情：

在您的页面中：

```
<div id="dialog">
<iframe src="Benutzer.aspx"></iframe>
</div> 
```

在您的 jquery 函数中：

```
 $(document).ready(function () {

            $("#Button2").click(function (event) {

               $( "#dialog" ).dialog();

            }); 
```

# php - 注意：未定义的偏移量：

> ID：11864329
> 
> 赞同：0
> 
> 时间：2012-08-08T12:16:20.940
> 
> 标签：php, xml

我完成了代码，它是这样的：

```
<?php
 ini_set('memory_limit', '128M');

    function validate_xml(&$filename)
    {
    libxml_use_internal_errors(true);
    $doc = new DOMDocument('1.0', 'utf-8');
    $xml = file_get_contents($filename); 
    $doc->loadXML($xml); 

    $errors = libxml_get_errors();

    $lines = file($filename);
    $output = fopen('errors.txt', 'a');

    $distinctErrors = array();
    foreach ($errors as $error)
    {
        if (!array_key_exists($error->line, $distinctErrors))
        {
            $distinctErrors[$error->line] = $error->message;
            fwrite($output, "Filename: {$filename}.  Error on line: {$error->line}. {$lines[$error->line-1]}\n");

        }
    }

    fclose($output);

}

if(isset($_POST['SubmitCheck'])) {

        $directory = $_POST['Path'];

        if ( ! is_dir($directory)) {
              exit('Invalid diretory path');
                }
                else
                {
                  echo "The dir is: $directory". '<br />';
                        chdir($directory);

                        foreach (glob("*.xml") as $filename) {  
                        validate_xml($filename);                        
                        }  
              }
        }

        else {

        ?>
        <form id="Form1" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
            Path: <input type="text" name="Path"><br>
            <input type="hidden" name="SubmitCheck" value="sent">
            <input type="Submit" name="Form1_Submit" value="Path">
        </form>
        <?php
        }
?> 
```

它给了我

```
Notice: Undefined offset: 16032 in C:\xampp\htdocs\www\php-xml\nou.php on line 23

Notice: Undefined offset: 16051 in C:\xampp\htdocs\www\php-xml\nou.php on line 23

Notice: Undefined offset: 16060 in C:\xampp\htdocs\www\php-xml\nou.php on line 23

Notice: Undefined offset: 16075 in C:\xampp\htdocs\www\php-xml\nou.php on line 23

Notice: Undefined offset: 16078 in C:\xampp\htdocs\www\php-xml\nou.php on line 23

Notice: Undefined offset: 16101 in C:\xampp\htdocs\www\php-xml\nou.php on line 23

Notice: Undefined offset: 16110 in C:\xampp\htdocs\www\php-xml\nou.php on line 23

Notice: Undefined offset: 16167 in C:\xampp\htdocs\www\php-xml\nou.php on line 23 
```

问题是我有 3 个大 xml（每个 11MB）。当我在 3 个小 xml 上尝试脚本时，它起作用了。也为每个大 xml 单独工作。我不知道该怎么做，我尝试增加 php_ini 的内存限制......仍然不知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:08:20.457

第 23 行中的代码具有无效的偏移量引用 (`{$lines[$error->line-1})。你写了：

```
fwrite($output, "Filename: {$filename}.  Error on line: {$error->line}. {$lines[$error->line-1]}\n"); 
```

我想你想做：

```
$line_text = $lines[ $error->line - 1 ];
fwrite($output, "Filename: {$filename}.  Error on line: {$error->line}. $line_text \n"); 
```

你正在做的方式，PHP引擎解释`$error->line-1`好像`$line-1`是一个属性`$error`而不是算术运算“$line减1”。

# objective-c - 在 iOS 中使用 CG/Quartz 从 PDF 中选择/突出显示/复制行

> ID：11864331
> 
> 赞同：1
> 
> 时间：2012-08-08T12:16:21.687
> 
> 标签：objective-c, ios, pdf, core-graphics, quartz-core

我搜索了很多网站，发现了几个链接，这些链接解释了在 webview 上使用 javascript 实现 pdf 读取/渲染和注释。

我想在 pdf 中突出显示文本，就像它在桌面中所做的那样，复制文本并以短信/电子邮件形式发送，通过在 textviews 中发生的像标注一样的剪切/复制/粘贴。是否有任何链接或来源可以通过该应用程序以相同的方式复制 pdf 文档中的文本？

帮助表示赞赏..！

# php - Symfony2：用于访问存储在数据库中的名称值的几个包

> ID：11864338
> 
> 赞同：2
> 
> 时间：2012-08-08T12:16:44.107
> 
> 标签：php, symfony

我是 Symfony2 的新手，我正在将旧的 Symfony1 应用程序移植到 v2。

在我的旧应用程序中，我在一个很棒的大 YML 文件中定义了我的所有模型。因此，各种“组件”能够引用相同的名称值对（存储在 YML 文件中）。

我现在将功能分解为捆绑包，并且我想完全解耦捆绑包。我仍然需要访问名称值对，但我想集中存储它——这次是在数据库中。

我想保持我的代码干燥，所以想编写代码来访问名称值对一次，以及如何在单独的包中使用它。

我还想提供集中的 CRUD 工具来维护名称值对。

总结一下，我的两个问题如下：

1.  如何提供功能（实现一次）来访问存储在数据库中的名称值对，并使此功能可用于需要它的捆绑包？

2.  为维护名称值对提供 CRUD 功能的最佳方式是什么？（是通过创建另一个捆绑包吗？）我不确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:36:05.627

1.  您可以创建一个 Doctrine 实体并请求您需要的密钥。为了编写 DRY 代码，请使用基本实体并将其扩展到每个对类型：

    **`Pair`实体：**

    ```
    namespace MyBundle\Entity;

    use Doctrine\ORM\Mapping as ORM;

    /**
     * @MappedSuperclass
     */
    class Pair
    {
        /**
         * @Column(type="string", unique=true)
         * @var string
         */
        protected $name;

        /**
         * @Column(type="string")
         * @var string
         */
        protected $value;

        // Getters & setters
        // ...
    } 
    ```

    **`SportPair`实体：**

    ```
    namespace MyBundle\Entity;

    use Doctrine\ORM\Mapping as ORM;

    /**
     * @Entity(repositoryClass="MyBundle\Entity\PairRepository")
     * @Table(name="sport_pairs")
     */
    class SportPair extends Pair
    {
        /**
         * @Id
         * @GeneratedValue(strategy="AUTO")
         * @Column(name="id", type="integer")
         * @var int
         */
        protected $id;
    } 
    ```

    **`Pair`存储库：**

    ```
    namespace MyBundle\Entity;

    use Doctrine\ORM\EntityRepository;

    class PairRepository extends EntityRepository
    {
        private $cache = array();

        public function getValue($key)
        {
            if (!isset($this->cache[$key])) {
                $pair = $this->findOneBy(array('name' => $key));
                if (null !== $pair) {
                    $this->cache[$key] = $pair->getValue();
                }
            }

            return $this->cache[$key];
        }
    } 
    ```

2.  用于`SensioGenerationBundle`生成管理`Pair`实体的 CRUD。

* * *

这就是你应该如何进行：

1.  创建您的应用程序包 ( `MyAppBundle`)。
2.  ***（可选）***创建共享捆绑包 (`MySharedBundle`)
3.  将捆绑包引用到应用程序内核中。
4.  创建`Pair`并`PairRepository`进入`MyAppBundle`.
5.  ***（可选）***将这些类移动到`MySharedBundle`
6.  创建派生对类到`MyAppBundle`.

# php - 从字符串中获取所需的子字符串

> ID：11864343
> 
> 赞同：0
> 
> 时间：2012-08-08T12:17:00.093
> 
> 标签：php, regex

如何从以 . 开头`s` 和结尾的字符串中获取子字符串`/s`。

`$text`可以是以下格式

```
 $text = "LowsABC/s";
 $text = "sABC/sLow";
 $text = "ABC"; 
```

我怎么能得到`ABC`，有时可能会发生`$text`不包含`s`而`/s`只是`ABC`，我仍然想得到的`ABC`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:20:25.173

正则表达式：

```
s(.*)/s 
```

或者当您想要获得最小长度的字符串时：

```
s(.*?)/s 
```

并应用此资源，您可以使用`preg_match`：

```
preg_match( '@s(.*)/s@', $text, $match );
var_dump( $match ); 
```

现在您必须检查是否找到了某些东西，如果没有，则必须将结果设置为整个字符串：

```
if (not $match) {
   $match = $text;
} 
```

使用示例：

```
$ cat 1.php 
<?
$text = "LowsABC/s";
preg_match( '@s(.*)/s@', $text, $match );
var_dump( $match );
?>

$ php 1.php
array(2) {
  [0]=>
  string(6) "sABC/s"
  [1]=>
  string(3) "ABC"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:36:24.077

可能是微不足道的，但是仅仅使用这样的东西怎么样（正则表达式并不总是值得麻烦；））：

```
$text = (strpos($text,'s') !== false and strpos($text,'/s') !== false) ? preg_replace('/^.*s(.+)\/s.*$/','$1',$text) : $text; 
```

# unit-testing - 失去理智 单元测试

> ID：11864356
> 
> 赞同：1
> 
> 时间：2012-08-08T12:17:32.183
> 
> 标签：unit-testing, repository-pattern

因为我不了解单元测试。

我有服务

```
public interface IMyService
{
    public List<Person> GetRandomPeople();
} 
```

然后在我的 MVC 项目中，我实现了这项服务

```
public MyService : IMyService
{
    public List<Person> GetRandomPeople();
    {
         ...the actual logic the get the People here. This is what i want to test ?
    }
} 
```

然后在我的控制器中

```
public HomeController : Controller
{
     IMyService _myService;
     public HomeController(IMyService myService)
     {
         _myService = myService
     }
} 
```

然后在我将使用的操作方法中

```
public ActionResult CreateRandom()
{
    List<Person> people = _myService.GetRandomPeople();
    return View(people)
} 
```

注意：人回购在我的服务中，只是快速输入，所以我有一个回购。

我的问题：我将如何在我的测试项目中测试我的服务实现。我现在真的被困住了，我认为这将是我 TDD 未来的“灯火通明”时刻。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:15:46.107

将服务接口注入控制器的目的是让您可以单独测试**控制器**。为了测试它，你传入一个模拟或假的 IMyService。

根据您的服务实现方式，您可能需要使用集成测试来测试您的**服务。**这些应该与您的单元测试分开（因为您不想连续运行它们）。

例如，假设 IMyService 是使用实体框架实现的。您需要针对数据库实际运行 LINQ to Entities 以对其进行测试。您可以使用本地数据库，可以让 EF 即时创建和填充数据库等。这些不是**单元**测试（它们使用 I/O），但它们仍然很重要。

其他持久性框架可能允许您针对内存中的数据集进行测试。没关系; 我仍然会考虑集成测试（您的代码+框架）并将其与您的单元测试分开。

诀窍是将业务逻辑排除在服务实现之外。将其（尽可能）限制为纯数据访问代码。你想用单元测试来测试你的业务逻辑。

**编辑：**

要解决评论中的问题（“何时需要创建存根”）：

当您有一个要单独测试的类（被测系统或 SUT）并且该类已注入依赖项时，您会创建存根、伪造品、测试替身或模拟（有很多术语）。

这些依赖项将以某种方式是抽象的——接口、抽象类、具有虚拟方法的类、委托等。

您的生产代码将传递具体的实现（例如，访问数据库的类）。您的测试代码将通过测试实现。

您可以传递一个简单的存根实现（只需在您的测试项目中编写一个实现接口并为其成员返回固定值的虚拟类），或者您可以有一个更奇特的实现来检测进行了哪些调用以及传递了哪些参数（一个模拟对象）。你可以手写所有这些。它变得乏味，因此许多测试人员使用模拟对象框架（也称为隔离框架）。其中有很多（对于任何给定的语言通常都有几个）；我倾向于在 .NET中使用[NSubstitute](http://nsubstitute.github.com/)或[Moq 。](http://code.google.com/p/moq/)

学习编写测试需要时间。阅读有关该主题的几本书对我有很大帮助。博客文章可能没有提供足够的背景。[这里的（遗憾地关闭）问题](https://stackoverflow.com/questions/107541/what-is-your-single-favorite-book-or-online-resource-for-getting-started-with-un)中有一些很好的建议。

简短的回答是，当您的测试需要它们时，您会创建存根或模拟。

# sql - SQL - 分组重复和唯一 ID 问题

> ID：11864367
> 
> 赞同：2
> 
> 时间：2012-08-08T12:18:01.390
> 
> 标签：sql, duplicates, grouping

希望有人能指出我正确的方向。我有一点头发拉的时刻。

以下是一些示例数据：

```
ID    SUBID   COL1      COL2      COL2      COL3
1     10001   Test 1    Test 2    Test 3    Test 4
2     10002   Test 1    Test 2    Test 3    Test 4
3     10003   Test 1    Test 2    Test 3    Test 4
4     10004   Test 1    Test 2    Test 3    Test 4
5     10005   Test 5    Test 6    Test 7    Test 8 
```

我需要结果看起来像这样：

```
ID    SUBID   COL1      COL2      COL2      COL3
4     10004   Test 1    Test 2    Test 3    Test 4
5     10005   Test 5    Test 6    Test 7    Test 8 
```

我需要根据 COL1、COL2、COL3 和 COL4 对所有重复项进行分组，这很容易，但我需要从 ID 和 SUBID 列中的分组中输出一个数字，这与来自哪个分组行无关，它只需要一个值。

当我查询数百万行时，性能也是这样做的关键。

希望以上内容有意义，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:21:47.810

您可以使用最小值或最大值来选择一个。它们不会来自同一行，但它“只是一个值”。

```
select min(id), min(subid), col1, col2, col3, col4
from tab
group by col1, col2, col3, col4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:21:12.957

```
select id, subid, COL1, COL2, COL3, COL4
from your_table
where id in (
             select min(id)
             from your_table
             group by COL1, COL2, COL3, COL4
            ) 
```

# javascript - console.log 在 CasperJS 中无法使用 setTimeout 进行评估

> ID：11864373
> 
> 赞同：31
> 
> 时间：2012-08-08T12:18:11.323
> 
> 标签：javascript, casperjs

为什么当我使用`console.log`in时`evaluate`，它可以工作：

```
casper.then(function() {
  this.evaluate( function() {
    console.log('hello'); 
  });
}); 
```

但这不起作用：

```
casper.then(function() {
  this.evaluate( function() {
    setTimeout( function() {console.log('hello');}, 1000);
  });
}); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-14T16:55:39.883

因为您混合了 casperjs 和远程页面环境。该`evaluate`函数将在远程页面环境中执行代码，因此`console.log`调用不会输出任何内容。

如果要捕获**远程** `console.log`呼叫，请监听`remote.message`事件：

```
casper.on('remote.message', function(msg) {
    this.echo('remote message caught: ' + msg);
}) 
```

顺便说一句，[事件文档](http://docs.casperjs.org/en/latest/events-filters.html)非常详尽，[评估](http://docs.casperjs.org/en/latest/modules/casper.html#evaluate)文档也是如此。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-22T18:17:32.243

@NiKo 的回答很关键。

我还建议添加以下内容，因为如果出现错误，您甚至可能无法打印出 console.log() 消息，而是以沉默告终。

```
casper.on( 'page.error', function (msg, trace) {
    this.echo( 'Error: ' + msg, 'ERROR' );
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-25T15:35:32.323

CasperJS 包括[ClientUtils](http://casperjs.readthedocs.org/en/latest/modules/clientutils.html)，可以从远程页面使用它来轻松地登录到 casper 脚本的控制台：

```
__utils__.echo('This message is logged from the remote page to the CasperJS console'); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-06T11:41:37.123

基于@odigity 的回答，这使得 casperjs 死于更熟悉的错误/堆栈跟踪：

```
var util = require('util');

casper.on('page.error', function exitWithError(msg, stack) {
    stack = stack.reduce(function (accum, frame) {
        return accum + util.format('\tat %s (%s:%d)\n',
            frame.function || '<anonymous>',
            frame.file,
            frame.line
        );
    }, '');
    this.die(['Client-side error', msg, stack].join('\n'), 1);
}); 
```

# sql - 在 MS Access 中同时使用 UPDATE、SELECT 和 INSERT INTO 语句

> ID：11864374
> 
> 赞同：-1
> 
> 时间：2012-08-08T12:18:12.180
> 
> 标签：sql, ms-access-2007

我有一个 MS 访问项目，其中交易表每天包含多达 70 条记录。它们在一个参数中很常见，即今天的日期。

开始输入数据的正常方法是转到表格并复制昨天的记录，然后将它们粘贴为新记录，然后将日期从昨天更改为今天的日期。

我需要的是使用 SQL 语句来实现这一点。我可以这么说

步骤1：使用insert into 将新记录输入表中。第 2 步：使用更新语句更改日期。步骤 3：使用 select 语句选择要更改日期的记录。如何结合使用这些语句。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:21:05.360

您需要以下内容：

```
INSERT INTO Table (Field, Field, Field, ADate)
SELECT Field,Field,Field,Date() As ADate
FROM Table WHERE ADate = Date()-1 
```

或者只是将表中日期字段的默认值改为Date()，或者Now()，只插入其他字段。日期将自动填写为今天。

# objective-c - 调用自动释放对象的保留或释放是否有任何意义或价值？

> ID：11864376
> 
> 赞同：0
> 
> 时间：2012-08-08T12:18:14.317
> 
> 标签：objective-c

我有一些关于自动释放功能的问题。

请指教..

Q1) 对自动释放的对象调用保留或释放是否有任何意义或价值？

```
ex1) 
 UIView *viewTest = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 400)] autorelease];
[self.view addSubview:viewTest]; 
```

在这种情况下，将来会释放 viewtest 对象吗？还是需要加一行'[viewTest release];'？

例 2)

```
UIView *viewTest = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 400)] autorelease];
[viewTest release]; 
```

在这种情况下，viewTest 会自动释放吗？

Q2) 自动释放的对象在哪里被销毁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:34:45.890

> Q1) 对自动释放的对象调用保留或释放是否有任何意义或价值？

并非如此，无论如何，当自动释放池耗尽时，对象就会被释放。看看[这个](http://www.informit.com/articles/article.aspx?p=1806938&seqNum=7)

> Q2) 自动释放的对象在哪里被销毁？

自动释放的对象在`NSAutoreleasePool`耗尽时或在`@autoreleasepool`构造结束时被销毁，这基本上做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:36:35.767

`autorelease`被认为适用于例如从方法返回对象的情况，因此调用者不需要在使用后释放它。

你的 ex2 应该会引起问题，因为它确实释放了两次。

当池被耗尽时，自动释放的对象被销毁。

# python - 使用networkx的节点频率

> ID：11864380
> 
> 赞同：0
> 
> 时间：2012-08-08T12:18:26.313
> 
> 标签：python, python-2.7, networkx

我只是在学习python，所以我很感激帮助。我有一个双列数据集，第一列是唯一的 id，第二列是一串项目。我正在使用 networkX 从数据中创建一棵树（见下文）。我需要知道每个级别的项目频率。例如，对于 A (1,2,3,4) 中的路径，每个节点的计数应为 1:4、2:2、3:2 和 4:2。如何获取节点数？

我的数据如下所示：

```
A      1, 2, 3, 4
B      1, 2, 1, 4
C      1, 3, 4, 3
D      1, 4, 3, 2 
```

我到目前为止的代码如下：

```
#create graph
G = nx.MultiGraph()

#read in strings from csv
testfile = 'C:…file.txt'

with open(testfile, "r") as f:
    line = f.readline
    f = (i for i in f if '\t' in i.rstrip())
    for line in f:
        customerID, path = line.rstrip().split("\t")
        path2 =  path.rstrip("\\").rstrip("}").split(",")
        pathInt = list()
        for x in path2:
            if x is not None:
                newx = int(x)
                pathInt.append(newx)
                print(pathInt)
        varlength = len(pathInt)
        pathTuple = tuple(pathInt)
        G.add_path([pathTuple[:i+1] for i in range(0, varlength)])

nx.draw(G)
plt.show() # display 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:59:48.743

首先，您可以更简洁地将字符串列表转换为 int 元组：

```
pathTuple = tuple(int(x) for x in path2 )
G.add_path([path[:i+1] for i in range(0, len(path))]) 
```

为了存储计数数据，我会在 defaultdict 中使用 defaultdict，基本上是一个允许双索引然后默认为 0 的数据结构。

```
import collections
counts = collections.defaultdict(lambda:collections.defaultdict(lambda:0)) 
```

这可以用于这种访问：`counts[level][node]`然后我们可以通过查看每个节点在路径中的位置来计算每个节点在每个级别上出现的频率。

在此之后，您的代码将如下所示：

```
#create graph
G = nx.MultiGraph()

#read in strings from csv
testfile = 'C:…file.txt'

with open(testfile, "r") as f:
    line = f.readline
    f = (i for i in f if '\t' in i.rstrip())
    for line in f:
        customerID, path = line.rstrip().split("\t")
        path2 =  path.rstrip("\\").rstrip("}").split(",")
        pathTuple = tuple(int(x) for x in path2 )
        G.add_path([pathTuple[:i+1] for i in range(0, len(pathTuple))])

        for level, node in enumerate(path):
            counts[level][node]+=1 
```

然后你可以这样做：

```
level = 0
node = 1
print 'Node', node, 'appears', counts[level][node], 'times on level', level
>>> Node 1 appears 4 times on level 0 
```

# ms-access - 联合查询 - > 在 Jet 中重复值时选择一个

> ID：11864385
> 
> 赞同：1
> 
> 时间：2012-08-08T12:18:43.133
> 
> 标签：ms-access, union, jet, duplicate-removal

我正在使用 Access 跨 3 台离线计算机在数据库中填写详细信息。这意味着他们都有一个数据库副本，填写一天的信息，然后手动上传到中央数据库。可怕，但这是唯一的选择。

我有一个预填充的数据库，密钥标识符等都是先前确定的；我们正在为这些条目的空白字段添加信息。（从 3 个关键字段开始，添加了一些信息字段）。用户选择一个条目并对其进行编辑而不是创建一个条目。然后我使用一个脚本来获取每个表并将三个数据库联合到一个表中。用户不会重复工作（这意味着您没有 Jack 在条目 A 上工作，而 Jill 在条目 A 上工作）。

我的问题：**如何让我的联合查询选择所有条目，甚至是未填充的条目，但让已填充的条目优先？（又名通过选择已填写的条目而不是两个未填写的条目来绕过“重复条目”错误？）**

前任：

```
JOHN's DB            JACK's DB              JILL's DB      --->      MASTER DB
A: 1, 1, __          1, 1, __              1, 1, "Yes"              1, 1, "Yes"
B: 1, 2, "No"        1, 2, __              1, 2, __                 1, 2, "No"
C: 1, 3, __          1, 3, __              1, 3, "No"               1, 3, "No" 
```

这样做的方式非常糟糕（即联合离线表），但由于许多其他不可控因素，我们别无选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:46:08.257

怎么样

```
 SELECT Id, Max(Field) 
 FROM ( Select Id, Field FROM John
        Union All ...)
 GROUP BY Id 
```

# hibernate - 休眠条件多表数据检索中的问题

> ID：11864401
> 
> 赞同：2
> 
> 时间：2012-08-08T12:19:52.357
> 
> 标签：hibernate, hibernate-mapping

在这里，我遇到了休眠条件使用的问题，我为多个表创建了条件并添加了限制，但输出与预期不符

我的代码：

```
final Criteria crit = session2.createCriteria(Item.class, "item");   
            crit.createCriteria("itemvalues", "values");   
            crit.createCriteria("categoryitemses", "catItems");   
            crit.createCriteria("catItems.category", "cat");   
            crit.createCriteria("cat.categorytype", "catType");    
            crit.createCriteria("cat.categoryproducts", "catProd");    
            crit.createCriteria("catProd.product", "prod");    
            crit.createCriteria("prod.customer", "cust");   
            crit.add(Restrictions.eq("catType.id", id));   
            crit.add(Restrictions.eq("cust.id", custId));   
            crit.add(Restrictions.eq("values.inputkey", "previewimage"));   
            crit.addOrder(Order.asc("item.id")); 
```

在 Item.java 我有以下属性

```
private Itemtype itemtype;   
private String name;   
private String description;   
private Set<Itemvalue> itemvalues = new HashSet<Itemvalue>(0);   
private Set<Categoryitems> categoryitemses = new HashSet<Categoryitems>(0); 
```

ItemValue 表包含一个字段名称 inputkey，其中包含 previewimage 和 content 等条目，但我只需要检索 previewimage 输入键。

但是在输出中 inputkeys 也带有一些其他值。

我发现 hibernate 生成的查询运行正确并按预期提供输出，但是在查询之后，当我使用 set 检索 itemvalue 时，还会执行其他几个查询

```
final Set<Itemvalue> itemValues = itemList.get(innerIndex).getItemvalues();   
final Iterator<Itemvalue> itemVals = itemValues.iterator();    
while(itemVals.hasNext()) {   
jobj.put("Location", itemVals.next().getValue());    
} 
```

这里在行 itemValues.iterator hibernate 查询中执行了 17 次，因为总输出是 17 个项目，每个项目都获取 itemvalue 但忽略了前面给出的条件

```
crit.add(Restrictions.eq("values.inputkey", "previewimage")); 
```

我在这里缺少什么？任何人都请帮我解决这个问题！

在此先感谢，
卡尔蒂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:49:30.070

您的原始查询使用`Restrictions.eq("values.inputkey", "previewimage")`限制来过滤掉`Item`对象而不是`Itemvalue`对象。

何时`getItemvalues()`调用 Hibernate 集合映射用于检索对象而不是原始查询。如果集合映射没有什么特别之处，则将返回未过滤的相关项值对象集合。

You could try to configure a [filter](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/filters.html) on the collection mapping or just execute a new criteria for each item to retrieve the filtered desired itemvalue collection.

# android - 验证下载的图像

> ID：11864405
> 
> 赞同：0
> 
> 时间：2012-08-08T12:20:13.540
> 
> 标签：android, network-programming, threadpool

我在线程池的帮助下从服务器下载图像。如果图片下载失败，比如本地网络断开，或者服务器下线，我可以通过什么方法来检查下载是否完成以及图片是否有效？目前我不知道它已损坏，直到我访问该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:41:38.943

BitmapFactory 方法将在成功时返回 Bitmap，如果无法解码位图，则返回 null。

# android - Android数据库simplecursoradapter错误

> ID：11864407
> 
> 赞同：0
> 
> 时间：2012-08-08T12:20:18.717
> 
> 标签：android, database, simplecursoradapter

我正在编写一个安卓应用程序。

这是我的 BDHelper 课程：

```
public class BD_Helper extends SQLiteOpenHelper{

private static final String BD_NOMBRE = "BD_PAED.db";
private static final int BD_VERSION = 1;
private static final String TABLA_AUDIT_NOMBRE = "audit";
private static final String TABLA_CONTROLES_NOMBRE = "controles";

private static final String crearAudit = 
                                "CREATE TABLE " + TABLA_AUDIT_NOMBRE + " (" +
                                "_id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                                "usuario TEXT, " +
                                "clave TEXT, " +
                                "userid INTEGER, " +
                                "pin TEXT, " +
                                "tema TEXT, " +
                                "colorFondo TEXT, " +
                                "color TEXT, " +
                                "colorFuente TEXT)";

private static final String crearControles = 
                                "CREATE TABLE " + TABLA_CONTROLES_NOMBRE + " (" +
                                "_id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                                "entryTypeId TEXT, " +
                                "statusTypeId TEXT, " +
                                "momentTypeId TEXT, " +
                                "activityTypeId TEXT, " +
                                "activityDuration TEXT, " +
                                "activityTypeOthers TEXT, " +
                                "intensityTypeId TEXT, " +
                                "measurementTime TEXT, " +
                                "glucosePre TEXT, " +
                                "CHRations TEXT, " +
                                "rapidInsulin TEXT, " +
                                "slowInsulin TEXT, " +
                                "glucosePost TEXT);";

public BD_Helper(Context context){
    super(context, BD_NOMBRE, null, BD_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {       
    db.execSQL(crearAudit);
    db.execSQL(crearControles);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("drop table if exists "+ TABLA_AUDIT_NOMBRE);
    db.execSQL("drop table if exists "+ TABLA_CONTROLES_NOMBRE);
    onCreate(db);
}

} 
```

在其他类中，我正在尝试使用简单的光标适配器来显示控件数据库的信息：

```
private void cargaDatos(){
    String[] from;

    cursor = bdHelper.obtenerControles(entryTypeId);
    startManagingCursor(cursor);

        from = new String[] {BD_ControlesAdapter.CAMPO_MEASUREMENTTIME,BD_ControlesAdapter.CAMPO_ACTIVITYTYPEID};

    int[] to = new int[]{R.id.fila_fecha,R.id.fila_tipo};

    SimpleCursorAdapter controles = new SimpleCursorAdapter(this,R.layout.fila_controles,cursor,from,to,0);
    setListAdapter(controles);

} 
```

但这不起作用，`new SimpleCursorAdapter`抛出一个：

```
IllegalArgumentException: column '_id' does not exist. 
```

如果我检查我的 sqlite 数据库，则此列是在此数据库中完美创建的。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:30:13.427

我担心，您的光标从 obtenerControles() 方法中获取结果集，没有 _id 字段。也就是说，您在查询时可能没有从表中获取 _id。

发布您的 obtenerControles(entryTypeId) 代码或自行检查以确保它将 _id 提取到结果集中。

# c - C中的字符串赋值

> ID：11864410
> 
> 赞同：3
> 
> 时间：2012-08-08T12:20:30.790
> 
> 标签：c, string

我是 C 新手。以下代码中的字符串分配有效：

```
#include<stdio.h>
int main(void){
  char str[] = "string";
  printf("%s\n",str);
} 
```

但在以下情况下不起作用，即使我将索引号提供给`name[]`：

```
#include <stdio.h>
int main(void){
  struct student {
    char name[10];
    int  salary;
  };
  struct student a;
  a.name[10] = "Markson";
  a.salary = 100;
  printf("the name is %s\n",a.name);
  return 0;
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T12:21:29.370

你不可以做这个

```
a.name[10] = "Markson"; 
```

您需要[`strcpy`](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)将字符串`"Markson"`转换为`a.name`.

`strcpy`宣言：

```
char * strcpy ( char * destination, const char * source ); 
```

所以，你需要

```
strcpy( a.name, "Markson" ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T12:24:01.257

您不能分配给数组。两种解决方案：要么复制字符串：

```
strcpy(a.name, "Markson"); 
```

或使用 const char 指针而不是数组，然后您可以简单地分配它：

```
struct {
    const char *name;
    /* etc. */
};

a.name = "Markson"; 
```

或者，如果您希望稍后修改“name”的内容，请使用非 const char 指针：

```
struct {
    char *name;
}

a.name = strdup("Markson"); 
```

（不要忘记在后一种情况下释放 strdup() 分配的内存！）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T12:24:57.560

`char str[] = "string";`是一个声明，您可以在其中为字符串赋予初始值。

`name[10]`标识字符串中的单个字符，因此您可以为其分配单个字符，但不能分配字符串。

在声明之外没有简单的 C 风格字符串赋值。你需要使用`strcpy`它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:33:35.327

因为在一种情况下，您在声明中分配它，而在另一种情况下，您不是。如果你想做等效的写：

```
struct student a = {"Markson", 0}; 
```

# javascript - 创建使用 ajax 更新 iframe 的链接

> ID：11864415
> 
> 赞同：0
> 
> 时间：2012-08-08T12:20:48.357
> 
> 标签：javascript, ajax, iframe, hyperlink

我在这里创建了一个简单的模板：http: [//jsfiddle.net/sfntz/](http://jsfiddle.net/sfntz/)

如何在不重新加载主页的情况下使链接在 iframe 中打开页面？我认为使用 javascript ajax 可以实现这样的事情（我目前还没有编码经验）。

我目前的代码是：

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<style>
    #left-container {
        width: 150px;
        float: left;
    }
    #right-container {
        width: 450px;
        float: left;
    }
</style>

</head>

<body>

    <div id="left-container">
        <a href="">Link to iFrame 1</a><br/>
        <a href="">Link to iFrame 2</a><br/>
        <a href="">Link to iFrame 3</a><br/>
        <a href="">Link to iFrame 4</a><br/>
        <a href="">Link to iFrame 5</a><br/>
    </div>

    <div id="right-container">
        <iframe src="http://www.yahoo.com" style="border:0px #FFFFFF none;" name="myiframe" scrolling="no" frameborder="0" marginheight="0px" marginwidth="0px" height="350px" width="350px">
        </iframe>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:26:39.963

它比您想象的要简单得多：只需命名 iframe 并在链接上设置目标属性：

```
<iframe src="one.html" name="frame" id="frame"></iframe>
<a href="two.html" target="frame">Next Page</a> 
```

使用 jQuery，您可以尝试：

```
<iframe src="one.html" name="frame" id="frame"></iframe>
<a href="javascript:$('#frame').load('two.html');">Next Page</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:37:28.670

你也可以这样尝试：

```
<script>
$(document).ready(function(){
    $('#left-container a').click(function(_e){
       _e.preventDefault();
       $('#iframe_id').attr('src', $(this).attr('href'));
    }); 
});
</script> 
```

只需替换 iFrame 的 SRC，浏览器应该会自动开始加载新源。更新提琴手的最终来源：[更新提琴手](http://jsfiddle.net/sfntz/2/)

# mod-rewrite - httpd/阿帕奇。php。mod_rewrite。软呢帽 17

> ID：11864417
> 
> 赞同：5
> 
> 时间：2012-08-08T12:20:51.633
> 
> 标签：mod-rewrite, configuration, fedora, apache

我正在尝试安装 sweetcron，它需要启用 mod_rewrite。那么，在 Fedora 17 上最简单的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T12:24:38.810

编辑您的`httpd.conf`（默认情况下它位于`/etc/httpd/conf/`）

将选项更改`AllowOverride None`为`AllowOverride All`

之后重新启动您的 Apache 服务器。

* * *

你可以通过一些简单的重定向来测试你的重写引擎：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule (.*) http://stackoverflow.com 
```

# c++ - 搜索 3 级结构（双向）

> ID：11864421
> 
> 赞同：0
> 
> 时间：2012-08-08T12:21:11.680
> 
> 标签：c++, algorithm

[注意] 我尝试编辑您的问题。如果这是正确的，请接受。最初的问题非常模棱两可。

我有一些任务要做。用户可以输入函数的名称，也可以输入类和文件的名称。我必须根据检查表对这个函数名进行一些检查。但是，问题在于检查列表中的检查是针对文件而不是功能描述的。即，它描述了对每个文件中出现的所有类和函数的检查。因此，当用户输入函数名称时，我需要将其映射到正确的文件并找出正确的检查。

您能否建议一些有效的方法来做到这一点？

**编辑：（**尽可能简单，抱歉我的英语不是最好的；））

假设我们有一个应用程序（脚本？），我们想要分析它（是的！我们正在创建类似分析器的东西！:D）但我们不想检查所有内容，只检查几个函数。但是有问题。我们分析器的用户希望以一种有点奇怪的方式提供要分析的函数列表。

所以，他可以给我们： - 函数的名称 - 我们需要分析具有该名称的每个函数（或方法），无论它在哪里（可以在每个文件或每个类或标准库之类的东西中（在这种情况下）我们没有文件名））。- 类的名称 - 我们需要分析这个类中的每个函数/方法，但类本身可以在几个文件中的任何位置（我们可以有相同名称的不同类） - 文件的名称 - 我们需要分析其中的所有内容文件，但可能有几个文件具有相同的名称（因此在每个文件中，我们都需要分析每个函数/方法）。

上面的所有混合，所以如果我们有类（我们称之为“Bar”）和函数（“foo”），我们需要在类“Bar”中分析这个函数“foo”，但仍然可以在任何文件中（在几个文件中可能有几个“Bar”类。如果我们有文件名和函数名，我们需要分析文件中具有该名称的每个函数（无论它是在任何类内部还是外部）（但仍然存在可以是几个同名的文件）。

很少的文件或很少的类并不是真正的问题，因为我已经替换了探查器中的执行功能（是的，探查器本身正在工作）但问题是如何存储函数（以及类和文件）的名称，以便它可以尽可能快尽可能（内存是否很快）来搜索函数应该是配置文件（简而言之：执行函数询问它是否应该分析这个函数或否，我们需要给出答案，在执行函数中我们有函数名称（当然），类名（如果函数是类中的方法）和文件名（如果函数不是来自标准库）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:38:25.450

您可以生成一个 xml 文件来存储您的清单信息。作为 ：

```
<file name="file1"...>
    <class name="class1" ...>
        <func name=" func1" ... />
    </class>
</file> 
```

运行程序时，将 xml 读入内存，每个层次结构构建一个对象，高层次对象包括低层次对象。并构建三个映射列表，第一个'string'是文件或类或func的名称，第二个'object*'是指向xml构建的对象的点。

当你得到一个信息时，你可以使用 map::find 来搜索它。如果找到“object1”，则可以执行在“object1”及其包括对象中定义的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:17:28.723

您可以一次浏览所有文件->类->函数并创建一个映射（哈希映射），其中函数名称作为键，类和文件信息作为值。

用户输入函数名->您通过搜索地图立即获取文件/类名->您查找文件名的规则列表并应用规则。

# eclipse - 使用 Mercurial 和 Eclipse 从提交中删除一些文件

> ID：11864424
> 
> 赞同：1
> 
> 时间：2012-08-08T12:21:29.487
> 
> 标签：eclipse, mercurial, mercurialeclipse

我在 Eclipse 中使用 Mercurial。我做了一个提交，我提交了一些不应该提交的文件。

你知道是否有可能从提交中删除这些文件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:08:30.023

`rollback`（如果它是最近的提交）或`strip`（如果它更旧）会为你做。 [这篇文章](https://stackoverflow.com/q/4760684/612265)有更多关于这些命令的细节。要使用 MercurialEclipse 执行此操作，请在 Eclipse 中右键单击您的项目并执行 Team-->Undo-->Rollback 或 Team-->Undo-->Strip。

如果这些不是选项，您可以删除有问题的文件，然后将其作为单独的变更集提交。当然，这将保留这些文件曾经处于 Mercurial 控制之下的事实。如果这不是可取的，[此页面](http://mercurial.selenic.com/wiki/EditingHistory)列出了更多选项。如果您采用 MQ 路线，则可以在 MercurialEclipse 中通过“Mercurial Patch Queue”视图完成列出的工作流。

# c# - 在给定起点和终点的图中查找哈密顿路径数的程序

> ID：11864427
> 
> 赞同：2
> 
> 时间：2012-08-08T12:21:41.670
> 
> 标签：c#, algorithm, graph-theory, hamiltonian-cycle

给定一个具有 n² 路径节点的图，并且假设起始节点始终位于右上角（A 点），而结束节点始终位于右下角（B 点），我需要编写一个 C# 程序确定给定 n 的从 A 到 B 的哈密顿路径数（假设 n <=10）。换句话说，我需要找到从 A 开始到 B 结束的每条路径，其中每个节点只被访问一次，并且节点之间的移动被限制为左、右、上、下（无对角线）。

例如，如果 n = 5，则一种可能的路径将是此图像中显示的路径：

![图片](../Images/f677a09dde59dbef14fe3f626b73cc98.png)

理想情况下，我想开发一种利用一些启发式的智能算法，但现在我只需要开发一种蛮力方法就可以开始了。我假设我使用广度优先搜索，但我真的不知道从哪里开始使用 C# 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:42:29.583

一些蛮力的事情

构建图表。构建一个图表运行器。缓存所有运行信息。让运行者重新运行图表并从运行信息中排除所有决策。当跑步者不能再跑步时，过滤缓存的数据并计算结果。

在 C# 中实现

安装像 nunit 这样的测试框架。写下你需要的功能列表。

重复直到特征列表为空：

*   选择最小的特征
*   写一个失败的测试
*   编写代码以通过测试
*   确保所有测试通过
*   重构以变得简洁
*   从功能列表中清除项目

完毕

* * *

编辑回答评论中的一些问题

*   [您可以从 Internet 下载 nunit。](http://www.nunit.org/)将其解压缩到您选择的文件夹中。
*   创建一个空的控制台应用程序。
*   探索 NUnit 目录以找到框架，将该框架添加到您的项目中。
*   浏览 NUnit 目录以找到 gui 运行器，将其添加到您的项目中。
*   我们实际上不想使用控制台运行项目，我们只是不想自动创建表单，打开属性并将您的项目重新声明为 Windows 应用程序。
*   用下面的代码替换你的 program.cs。
*   编译并运行。如果出现异常，请在 gui 中单击运行并按 F5
*   恭喜 - 你刚刚使用了 nunit

这是程序：

```
using System;
using NUnit.Framework;
namespace EC_Connect_Test
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            string fullPath = System.Reflection.Assembly.GetAssembly(typeof(Program)).Location;
            NUnit.Gui.AppEntry.Main(new string[] { fullPath });
        }
    }
        public class MathClass
        {
            internal static double Divide(int A, int B)
            {
                if (B == 0) throw new DivideByZeroException();
                return (Double)A / (Double)B;
            }
        }

        [TestFixture]
        class MyFirstTestClass
        {
            [Test]
            public void DividingTwoIntegersResultIsDouble()
            {
                Double expected = 3.3;
                Double actual = MathClass.Divide(33, 10);
                Assert.AreEqual(expected, actual);
            }

            [Test]
            public void DividingByZeroShouldThrow()
            {
                Assert.Throws<DivideByZeroException>(
                    () => { MathClass.Divide(33, 0); }
                );
            }
        }

    } 
```

你也可以从外部启动 Nunit 并将它作为你的调试项目的目录。这样就不会出现异常并且测试变得更容易。

功能列表只是您希望软件执行的操作。在您的情况下，您会以某种形式获得给定的图表。那可能是一个文件或一张纸。因此，一个功能是加载该信息并从中制作图表。你提到的下一个特性是你的程序应该检查 n<=10 并且如果不是这样就拒绝工作，这也是一个特性。另一种是通过给定的接口返回结果。最后同样重要的是能够实际找到所有连接。如果你自己列出这些，你可以选择你认为最简单的一个，然后从那个开始。

测试时不要忘记为已知案例创建端到端测试。所以固定的图表，已知的数字。

使用粗略的假设，您的图表位于文本文件中，其中每行列出与其他行的连接，您可以编写如下测试：

```
 [TestFixture]
    class graphloadingSpex
    {
        String[] lines = new String[] {
        "2,3,4",
        "1",
        "1,4",
        "1,3"
        };

        [Test]
        public void ShouldShowConnectionsAfterLoading()
        {
            Graph tested = new Graph(lines);
            Assert.AreEqual(new String[] { "2", "3", "4" }, tested["1"].GetConnextions());
            Assert.AreEqual(new String[] { "1"}, tested["2"].GetConnextions());
            Assert.AreEqual(new String[] { "1", "4" }, tested["3"].GetConnextions());
            Assert.AreEqual(new String[] { "1", "3" }, tested["4"].GetConnextions());
        }
    } 
```

这不会编译，因为 Graph 还不存在。但是让它编译并通过测试将满足您的第一个功能，您可以通过首先编写测试来继续实现下一个功能。

# paypal - Paypal 自适应付款接收方限制 1-5

> ID：11864428
> 
> 赞同：2
> 
> 时间：2012-08-08T12:21:47.250
> 
> 标签：paypal, paypal-adaptive-payments

在出现许多问题后，我正试图从 Amazon FPS Marketplace 切换到 Paypal（不会涉及它们，不相关）。

我读到 Paypal Adaptive Payments 将链式支付中的接收者数量限制在 1-5 之间，而在并行支付中限制在 2-6 之间。我不太明白这一点，这在市场环境中如何运作？客户可以轻松地将来自不同卖家的 10 种产品放入购物车并结账。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:51:28.943

它是一个限制，你必须悲伤地解决。您需要验证客户购物篮，以便他们一次添加的卖家产品不能超过 5 个。这取决于产品的种类，但老实说，这是相对罕见的，您会从 6 个以上的单独卖家那里得到一个客户结帐。不要误会我的意思……这很烦人。Paypal 应将其增加到至少 10 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T03:54:31.887

据我们所知——是否仍然没有办法提高自适应支付接收方数量的限制？

我希望将其集成到我们的网上商店中，但是，在过去的多次订单中，此限制会使系统失败，因为会有超过 1 个主接收器和 5 个接收器。

我已经通过电子邮件向 Paypal 支持发送了电子邮件，但我还没有收到答复——如果有 Paypal 开发人员在监视此线程，请加入。

该线程最后一次更新是在 2012 年 8 月，我认为在这段时间之后，该请求已经被多次提出。

# php - 我想通过单击一个按钮将 2 个 php 文件链接在一起

> ID：11864430
> 
> 赞同：0
> 
> 时间：2012-08-08T12:21:49.947
> 
> 标签：php, javascript, html

我有 2 个 php 文件，我想通过单击一个按钮来链接这两个文件.. 所以如果我单击第一个 php 文件中的一个按钮，它应该将我转移到第二个 php 文件..

第一个 php 文件，在这里我想点击 s & P Database 按钮​​：

```
<html>
<body>
<h1> My System </h1>
<form action="">

<input type="button" value="S & P Database ">
<input type="button" value="Generate Report  ">
</form>

</body>
</html> 
```

单击按钮时我应该拥有的第二个 php 文件：

```
<html>
<body>
<form action="">
<h4><b>Please choose one of the following options below : </b> </h4>
<input type="radio" name="option" value="search" /> Search<br/>
<input type="radio" name="option" value="open database" /> Open Database<br/>
<input type="radio" name="option" value="administrative page "/> Administrative Page     <br/>
</form>
// This button doesn't appear in the web page =( .. dunno why 
<form action="">
<input type="button" value="Choose ">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:28:12.787

如果我理解正确，您希望在单击第一页上的按钮时将用户重定向到第二页。

要简单地重定向用户，您可以使用按钮的`onclick`：

```
<input type="button" value="S & P Database" onclick="window.location.href='page2.php'" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:27:43.660

```
<input type="button" onClick="window.location='/2nd.php'" value="S & P Database ">​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这会将您重定向到 /2nd.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:28:27.227

简单的放

> 方法=“发布”或方法=“获取”

并在行动中输入第二个文件的名称，在您的情况下将是

> action="2ndfile.php（它的名字是什么）"

也在 cahnage 你的按钮提交

请记住，此操作脚本适用于您的第一个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:31:41.290

您需要在 action 属性中添加指向 php nahdler 的链接

所以它会是`<form action="http://www.website.com/1.php">`

输入类型应该是“图像”或“提交”，按钮不会提交您的表单。

您也可以通过JS提交表单，但我不会在这里描述如何做到这一点。

使用正确的文档结构和文档类型：[http](http://www.rantiev.com/doctypes/) ://www.rantiev.com/doctypes/ 使用验证器检查您的代码：http: [//validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input) 当某些元素消失时，可能是 HTML 有错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T12:31:58.637

做这件事有很多种方法：

2个表格提交到不同的位置

```
<html>
<body>
<h1> My System </h1>
<form action="page2.php" method="get">
    <input type="button" name="pressed" value="S & P Database ">
</form>
<form action="page3.php" method="get">
    <input type="button" name="pressed" value="Generate Report  ">
</form>

</body>
</html> 
```

2个链接到不同的位置

```
<html>
<body>
<h1> My System </h1>
<a href="page2.php?pressed=sp">S & P Database</a>
<a href="page3.php?pressed=report">Generate Report</a>

</body>
</html> 
```

1 个带有按钮名称和值的表单。但是您的脚本（page2.php）也需要检查 $_GET['pressed'] 的值

```
<html>
<body>
<h1> My System </h1>
<form action="page2.php" method="get">
    <input type="button" name="pressed" value="S & P Database ">
    <input type="button" name="pressed" value="Generate Report  ">
</form>

</body>
</html> 
```

但不要忘记 urldecode($_GET['pressed'])) 因为值将被编码。

# html - 具有 100% 图像高度的水平滚动

> ID：11864431
> 
> 赞同：1
> 
> 时间：2012-08-08T12:21:58.307
> 
> 标签：html, css, resize

我目前正在构建一个水平滚动的投资组合。我希望图像是 100% 高和宽度：自动。一切正常（纯 CSS），但如果浏览器窗口小于图像宽度，它就会被压缩。

这是链接：[http ://www.bastards-design.de/wordpress/category/allgemein/portfolio/grafik/#alina](http://www.bastards-design.de/wordpress/category/allgemein/portfolio/grafik/#alina)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:28:09.823

> 如果浏览器窗口小于图像宽度，则会被压缩。

我查看了您的代码并在其中发现了以下 CSS，这会导致图像压缩。如果删除它，图像将不会压缩。

```
img{
   max-width:100%;
} 
```

似乎此规则是从您正在使用的**bootstrap.ccs继承的。**您应该删除此规则或覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:28:20.143

您需要`max-width`从`bootstrap.css` 您当前删除的内容如下：

```
img {
    border: 0 none;
    max-width: 100%;
    vertical-align: middle;
} 
```

不要尝试删除`max-width: 100%;`如下：

```
img {
    border: 0 none;
    vertical-align: middle;
} 
```

这应该有效。

# delphi - 当字符值存储在 Delphi XE2 ShortString 中时，为什么我的反转字符值算法不起作用？

> ID：11864434
> 
> 赞同：0
> 
> 时间：2012-08-08T12:21:59.947
> 
> 标签：delphi, unicode

我有以下代码：

```
user_s.username := EnDecrypt(Edit_username.Text); 
```

功能如下：

```
function EnDeCrypt(const Value : String) : String;
 var
 CharIndex : integer;
begin
 Result := Value;
 for CharIndex := 1 to Length(Value) do
Result[CharIndex] := chr(not(ord(Value[CharIndex])));
end; 
```

变量的类型是：

```
TUser = record
 access: char;
 username: string[25];
 password: string[25];
end; 
```

在 Delphi 2007 中它可以工作，在 Delphi XE2 中它失败了。奇怪的是，如果它是 123456789，它可以很好地加密/解密密码。这个问题必须与 unicode 和短字符串的使用有关。我希望有一些方法可以让它在 Delphi XE2 中也能工作..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T12:23:31.140

将`String`type替换为`AnsiString`和`Char`，`AnsiChar`代码将与 Delphi 2007 中完全相同。（`String[25]`但不应更改。）当然，您不会获得 Unicode 支持。

# android - 在 Android 的适配器中单击后如何更改 MapView 中的标记？

> ID：11864440
> 
> 赞同：0
> 
> 时间：2012-08-08T12:22:23.100
> 
> 标签：android

因此，我正在使用适配器通过 Google 地点 API 为我提供当前位置周围的位置。因此，我在同一布局中同时拥有 MapView 和 ListView。现在，我想将标记位置更改为用户从列表视图中显示的地点列表中选择的任何位置。我无法理解我该如何管理？如何将值从 Adapter 传递给 Activity，以便 MapView 中的标记更改其位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:21:29.910

如果您正在使用片段，则此页面底部有一个示例，说明如何从 ListFragment 执行此操作到单独的“DetailFragment：”

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

但基本上我会做的是使用

```
@Override 
public void onListItemClick(ListView l, View v, int position, long id) {
    // Do something when a list item is clicked
} 
```

获取 ListView 中项目的 id 或位置，并使用该 id 获取 MapView 的相应坐标。如果您将所有数据存储在适配器类中，您可以创建一个名为 getCoords(long id) 或 getCoords(int position) 的方法或类似的方法来调用 onListItemClick。

# java - 将嵌入式数据库打包到 jar 文件中

> ID：11864443
> 
> 赞同：4
> 
> 时间：2012-08-08T12:22:40.023
> 
> 标签：java, database, jdbc, derby

我在我的eclipse项目中创建了一个derby Embedded Database，它在eclipse上运行良好，但是在将项目打包到Runnable jar文件中时，它无法连接数据库。

我做了类似于这个视频 [http://vinayakgarg.wordpress.com/2012/03/07/packaging-java-application-with-apache-derby-as-jar-executable-using-eclipse/](http://vinayakgarg.wordpress.com/2012/03/07/packaging-java-application-with-apache-derby-as-jar-executable-using-eclipse/)

这是我的**Communicate.java**

```
import java.io.File;
import java.security.NoSuchAlgorithmException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Communicate {

private static final String dbURL = "jdbc:derby:imagesDB;create=true";
private static final String tableName = "imageDB";
private static Connection conn = null;
private static Statement stmt = null;

public void insert(String path, String hash, long FileSize,
        String label_name) throws NoSuchAlgorithmException, Exception {
    try {
        stmt = conn.createStatement();
        stmt.execute("insert into " + tableName + " values (\'" + path
                + "\'," + FileSize + ",\'" + hash + "\'" + ",\'"
                + label_name + "\')");
        stmt.close();
    } catch (SQLException sqlExcept) {
        sqlExcept.printStackTrace();
    }
}

public void createConnection() {
    try {
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
        // Get a connection
        conn = DriverManager.getConnection(dbURL);
    } catch (Exception except) {
        except.printStackTrace();
    }
}

public void createTable() throws SQLException {
    Statement st = conn.createStatement();
    st.execute("CREATE TABLE "
            + tableName
            + " (fullPath VARCHAR(512), fileSize INTEGER, md5 VARCHAR(512), label_name VARCHAR(100))");
}

public void indexTable() throws SQLException {
    Statement st = conn.createStatement();
    st.execute("CREATE INDEX imageDBIndex ON imageDB (fullPath, label_name)");
}

public void deleteTable() throws SQLException {
    Statement st = conn.createStatement();
    st.execute("drop table " + tableName);
}

public String searchBySizeAndMD(String file_path, long size, String hash)
        throws SQLException {
    StringBuilder sb = new StringBuilder();
    Statement st = conn.createStatement();
    ResultSet rs = st
            .executeQuery("SELECT fullPath, label_name FROM (SELECT * FROM imageDB im WHERE im.fileSize = "
                    + size + " ) as A WHERE A.md5 = " + "\'" + hash + "\'");
    while (rs.next()) {
        sb.append("Image: (" + rs.getString("fullPath")
                + ") is at label: (" + rs.getString("label_name") + ")\n");
    }
    return sb.toString();
}

public String searchByImageName(String fileName) throws SQLException {
    StringBuilder sb = new StringBuilder();
    Statement st = conn.createStatement();
    ResultSet rs = st
            .executeQuery("SELECT fullPath, label_name FROM imageDB im WHERE im.fullPath like \'%"
                    + fileName + "%\'");
    while (rs.next()) {
        File out_path = new File(rs.getString("fullPath"));
        if (!fileName.equals(out_path.getName())) continue;
        sb.append("Image: (" + out_path.getPath()
                + ") is at label: (" + rs.getString("label_name") + ")\n");
    }

    return sb.toString();
}

public void deleteLabel(String label) throws SQLException {
    Statement st = conn.createStatement();
    st.execute("DELETE FROM " + tableName + " WHERE label_name = \'" + label + "\'");       
}
 } 
```

在这个问题上有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:58:47.083

数据库应该在您运行 jar 的文件夹中。如果不是，请检查文档如何指定`connectionURL`. 如果项目导出到可运行的 jar 文件，请指定不提取的依赖库，只需按原样添加到 jar 或本地 lib 文件夹中。这些库现在`derby.jar`并且`derbytools.jar`应该在类路径或清单类路径中。使用以下代码测试您的

**`Communicate`班级。**

```
import java.io.File;
import java.security.NoSuchAlgorithmException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Communicate {

  private static final String dbURL = "jdbc:derby:imagesDB;create=true";
  private static final String tableName = "imageDB";
  private static Connection conn = null;
  private static Statement stmt = null;

  public void insert(String path, String hash, long FileSize,
                     String label_name) throws NoSuchAlgorithmException, Exception {
    try {
      stmt = conn.createStatement();
      stmt.execute("insert into " + tableName + " values (\'" + path
        + "\'," + FileSize + ",\'" + hash + "\'" + ",\'"
        + label_name + "\')");
      stmt.close();
      System.out.println("Inserted into table "+ tableName+ " values (\'" + path
        + "\'," + FileSize + ",\'" + hash + "\'" + ",\'"
        + label_name + "\')");
    } catch (SQLException sqlExcept) {
      sqlExcept.printStackTrace();
    }
  }

  public void loadDriver() {
    try {
      Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
      System.out.println("Loaded the appropriate driver");
    } catch (Exception except) {
      except.printStackTrace();
    }
  }

  public void createConnection() {
    try {
      // Get a connection
      conn = DriverManager.getConnection(dbURL);
      System.out.println("Connected to and created database ");
    } catch (Exception except) {
      except.printStackTrace();
    }
  }

  public void createTable() throws SQLException {
    Statement st = conn.createStatement();
    st.execute("CREATE TABLE "
      + tableName
      + " (fullPath VARCHAR(512), fileSize INTEGER, md5 VARCHAR(512), label_name VARCHAR(100))");
    System.out.println("Created table "+ tableName);
  }

  public void indexTable() throws SQLException {
    Statement st = conn.createStatement();
    st.execute("CREATE INDEX imageDBIndex ON imageDB (fullPath, label_name)");
    System.out.println("Created index "+ "imageDBIndex");
  }

  public void deleteTable() throws SQLException {
    Statement st = conn.createStatement();
    st.execute("drop table " + tableName);
    System.out.println("Deleted table "+ tableName);
  }

  public String searchBySizeAndMD(String file_path, long size, String hash)
    throws SQLException {
    StringBuilder sb = new StringBuilder();
    Statement st = conn.createStatement();
    ResultSet rs = st
      .executeQuery("SELECT fullPath, label_name FROM (SELECT * FROM imageDB im WHERE im.fileSize = "
        + size + " ) as A WHERE A.md5 = " + "\'" + hash + "\'");
    while (rs.next()) {
      sb.append("Image: (" + rs.getString("fullPath")
        + ") is at label: (" + rs.getString("label_name") + ")\n");
    }
    return sb.toString();
  }

  public String searchByImageName(String fileName) throws SQLException {
    StringBuilder sb = new StringBuilder();
    Statement st = conn.createStatement();
    ResultSet rs = st
      .executeQuery("SELECT fullPath, label_name FROM imageDB im WHERE im.fullPath like \'%"
        + fileName + "%\'");
    while (rs.next()) {
      File out_path = new File(rs.getString("fullPath"));
      if (!fileName.equals(out_path.getName())) continue;
      sb.append("Image: (" + out_path.getPath()
        + ") is at label: (" + rs.getString("label_name") + ")\n");
    }

    return sb.toString();
  }

  public void deleteLabel(String label) throws SQLException {
    Statement st = conn.createStatement();
    st.execute("DELETE FROM " + tableName + " WHERE label_name = \'" + label + "\'");
  }

  public static void main(String[] args)
  {
    Communicate c = new Communicate();
    c.loadDriver();
    try {
      c.createConnection();
      c.createTable();
      c.indexTable();
      c.insert("/some/path", "12323423", 45656567, "label name");
      String s = c.searchBySizeAndMD("/some/path", 45656567, "12323423");
      System.out.println("Search result: "+ s);
      c.deleteTable();
      conn.commit();
      System.out.println("Committed the transaction");

      //Shutdown embedded database
      try
      {
        // the shutdown=true attribute shuts down Derby
        DriverManager.getConnection("jdbc:derby:;shutdown=true");

      }
      catch (SQLException se)
      {
        if (( (se.getErrorCode() == 50000)
          && ("XJ015".equals(se.getSQLState()) ))) {
          // we got the expected exception
          System.out.println("Derby shut down normally");
        } else {
          System.err.println("Derby did not shut down normally");
          System.err.println("  Message:    " + se.getMessage());
        }
      }

    } catch (Exception e) {
      System.err.println("  Message:    " + e.getMessage());
    } finally {
      // release all open resources to avoid unnecessary memory usage

      //Connection
      try {
        if (conn != null) {
          conn.close();
          conn = null;
        }
      } catch (SQLException e) {
        System.err.println("  Message:    " + e.getMessage());
      }
    }
    System.out.println("Communicate finished");
  }

} 
```

**这是输出：**

```
Loaded the appropriate driver
Connected to and created database 
Created table imageDB
Created index imageDBIndex
Inserted into table imageDB values ('/some/path',45656567,'12323423','label name')
Search result: Image: (/some/path) is at label: (label name)

Deleted table imageDB
Committed the transaction
Derby shut down normally
Communicate finished 
```

# javascript - EaselJS 透视图像变换

> ID：11864446
> 
> 赞同：2
> 
> 时间：2012-08-08T12:22:56.920
> 
> 标签：javascript, html, canvas, perspective, easeljs

是否可以在 html5 画布中进行透视图像转换？我现在正在使用 EaselJS，但找不到满足我需求的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-26T12:45:18.620

要实现透视变换，您需要一个在 3D 中平移对象的选项，但就 CreateJS/EaselJS 使用 2D 变换矩阵而言，您不能这样做。

但是，如果您在旅途中使用 Skew 和 Scale，您可以获得类似的外观和感觉。

例如，我让卡片在平面上移动，这为卡片提供了透视图：

```
var aspectRatio = 1.777777777777778;
var canvasHeight, canvasWidth, canvasTop, canvasLeft;
var graphicsLoader;
var stage, frameTick;

var calculateSize = function() {
  if ((window.innerWidth / window.innerHeight) >= aspectRatio) {
    canvasHeight = window.innerHeight;
    canvasWidth = canvasHeight * aspectRatio;
    canvasTop = 0;
    canvasLeft = (window.innerWidth - canvasWidth) / 2;
  } else {
    canvasWidth = window.innerWidth;
    canvasHeight = canvasWidth / aspectRatio;
    canvasLeft = 0;
    canvasTop = (window.innerHeight - canvasHeight) / 2;
  }

  var gameCanvas = document.getElementById('exampleScene');
  gameCanvas.style.width = canvasWidth + "px";
  gameCanvas.style.height = canvasHeight + "px";
  gameCanvas.style.top = canvasTop + "px";
  gameCanvas.style.left = canvasLeft + "px";
};

//load graphics
graphicsManifet = [
    {id: "flatness", src: "https://i.imgur.com/6E1NKLa.png"},
    {id: "card", src: "https://i.imgur.com/CXhpG1X.png"},
];

graphicsLoader = new createjs.LoadQueue(true);
graphicsLoader.loadManifest(graphicsManifet);
graphicsLoader.on("complete", function() {
    initScene();
}, this);

function initScene() {

  stage = new createjs.Stage("exampleScene");
  createjs.Ticker.on("tick", frameTick);

  //draw
  var flatness = new createjs.Bitmap(graphicsLoader.getResult("flatness"));
      flatness.x = 200;

  var card = new createjs.Bitmap(graphicsLoader.getResult("card"));
      card.alpha = 0;

  stage.addChild(
    flatness,
    card
  );

  var animationTime = intervalTime = 800;

  createjs.Tween.get()
    .wait(0)
    .call(function() {
      movePerspective(card, 280, 10, 0);
      card.alpha = 1;
    })
    .wait(intervalTime)
    .call(function() {
      movePerspective(card, 1530, 10, animationTime);
      card.alpha = 1;
    })
    .wait(intervalTime)
    .call(function() {
      movePerspective(card, 1570, 680, animationTime);
      card.alpha = 1;
    })
    .wait(intervalTime)
    .call(function() {
      movePerspective(card, 230, 680, animationTime);
      card.alpha = 1;
    })
    .wait(intervalTime)
    .call(function() {
      movePerspective(card, 280, 10, animationTime);
      card.alpha = 1;
    }).loop = true;

};

function frameTick(e) {
  stage.update(e);
}

movePerspective = function(object, x, y, time) {
    typeof time != "number" ? time = 1000 : "";
    var scales = {
        y: y,
        scaleX : 0.887073905 + y*0.000142045,   //  this numbers I calculated depending
        scaleY : 0.761221624 + y*0.000284091    //  on perspective angle of flatness board
    };
    var skAspect = 0.00673453853 - y * 0.000000654928977;
    var cardSkewX = (6.5991 - skAspect * x);
    var pointskew = {
        x: x,
        skewX: cardSkewX
    };

    createjs.Tween.get(object).to({
        x: pointskew.x,
        y: scales.y,
        skewX: pointskew.skewX,
        scaleX: scales.scaleX,
        scaleY: scales.scaleY
    }, time, createjs.Ease.getPowInOut(3));
};

window.onload = function() {
  window.addEventListener("resize", function() {
    calculateSize();
  });
};

//set framerate
createjs.Ticker.timingMode = createjs.Ticker.RAF_SYNCHED;
createjs.Ticker.framerate = 60;

$(function() {
   calculateSize();
});
```

```
#exampleScene {
    position: absolute;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
<canvas id="exampleScene" width="1920" height="1080"></canvas>
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:01:43.440

我还没有尝试过画架.js，但是每个图像转换都是通过矩阵操作完成的：平移、旋转、倾斜等。查看画架.js 源代码有一个`Matrix2D`类，以及它的文档：[http：/ /www.createjs.com/Docs/EaselJS/Matrix2D.html](http://www.createjs.com/Docs/EaselJS/Matrix2D.html)。对于透视变换，您需要使用`rotation`,`scaling`和`skewing`. 您只需要使用最适合您需求的值和测试。

# jquery - 未创建按钮

> ID：11864448
> 
> 赞同：0
> 
> 时间：2012-08-08T12:23:06.030
> 
> 标签：jquery, html

我正在关注一本 pdf 书来学习 jQuery。下面的代码应该根据本书创建 2 个按钮，但在我的例子中，它只是创建它的简单文本而不是按钮。我重新检查了这本书，看看我是否遗漏了什么。

我是新手，所以这对你们专家来说似乎是一个愚蠢的问题。

代码：

```
 <div id="switcher">
<div class="label">Style Switcher</div>
<div class="button" id="switcher-large">Increase Text Size</div>
<div class="button" id="switcher-small">Decrease Text size</div>
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:27:09.310

你必须自己让它“看起来”像一个按钮。最简单的方法显然是通过 CSS。

```
.button {
background-color:red;
width:100px;
height:30px;
color:white;
padding:4px;
margin:10px;
}
.button:hover {
font-weight:bold;
cursor:pointer;
} 
```

这可能是一种非常基本的做事方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:27:51.913

您只是在 div 标签上为他们提供类属性。按钮是由按钮标签创建的。这是你如何做到的。

```
<div id="switcher">
    <div class="label">Style Switcher</div>
    <button class="button" id="switcher-large">Increase Text Size</button>
    <button class="button" id="switcher-small">Decrease Text size</button>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:30:06.670

如果您使用的是 jquery UI，那么您需要通过 javascript 应用按钮：

```
$(".button").button(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:34:43.890

通过 jQuery，该`wrapInner`函数可以将文本转换为按钮，如果这是您需要的：

您的 HTML：

```
<div id="switcher">
  <div class="label">Style Switcher</div>
  <div class="button" id="switcher-large">Increase Text Size</div>
  <div class="button" id="switcher-small">Decrease Text size</div>
</div> 
```

jQuery：

```
jQuery(document).ready(function(){

  $('.button').wrapInner('<button />');

}); 
```

当然，您需要添加更多内容 - 一些`onClick`要执行的事件，您打算执行的操作，或者可能是在单击按钮时执行的其他一些 jQuery，例如`$(button').on("click",function() {...`

[http://api.jquery.com/wrapInner/](http://api.jquery.com/wrapInner/)

# vb.net - 如何在下拉列表中按字母顺序对值进行排序？VB.net

> ID：11864452
> 
> 赞同：2
> 
> 时间：2012-08-08T12:23:19.580
> 
> 标签：vb.net, sorting, listitem

我正在尝试对下拉列表中的值进行排序，这是我的代码

```
 For Each Keystring as Long in HashValue.Keys 
      Dim LItem As New ListItem
      LItem.Text = cw.Name.ToString()
      LItem.Value = Keystring.ToString
      ddRole.Items.Add(LItem)
   Next 
```

我试过 LItem.Sort。但是 Sort 没有定义属性。

让我知道对值进行排序的最佳方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:41:58.697

您是否尝试过仅使用[OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx)？

```
 For Each Keystring as Long in HashValue.Keys.OrderBy(Function(key) key) 
      Dim LItem As New ListItem
      LItem.Text = cw.Name.ToString()
      LItem.Value = Keystring.ToString
      ddRole.Items.Add(LItem)
 Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:30:23.227

快速的方法是将你的`ListItem`放入一个`List`. `.sort()`然后使用默认的 List方法对该列表进行排序。然后将其绑定到您的下拉列表。

```
dim ddList as List(Of ListItem)
For Each Keystring as Long in HashValue.Keys 
    Dim LItem As New ListItem
    LItem.Text = cw.Name.ToString()
    LItem.Value = Keystring.ToString
    ddList.add(LItem)
Next

ddList.Sort()
ddRole.DataSource = ddList
ddRole.DataBind() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:53:18.157

尝试使用 lambda：

```
Items2Sort.Sort(function(x1,x2) x1.CompareTo(x2)) 
```

当然如果 item 是一个字符串。

# mongodb - 当我们不知道可用键时，可以使用 MongoDB 吗？

> ID：11864453
> 
> 赞同：0
> 
> 时间：2012-08-08T12:23:23.433
> 
> 标签：mongodb, screen-scraping, nosql

我们正在抓取一个巨大的产品网站。

因此，我们将获得并坚持如此多的产品，并且几乎每个产品都有一组不同的功能/细节。

自然地，我们考虑使用 NoSQL 数据库 (MongoDB) 来完成这项工作。我们将创建一个集合“产品”，并为每个产品创建一个文档，其中每个键/值对映射到产品的 detail_name/detail_description。

由于产品完全不同，我们几乎不知道产品细节/功能是什么。换句话说，我们不知道可用的密钥。

根据这个链接[MongoDB case insensitive key search](https://stackoverflow.com/questions/6780087/mongodb-case-insensitive-key-search/6780192#comment15780231_6780192)，这是 MongoDB 的一个“差距”（我们对可用的键没有一些想法）。

这是真的？如果是，有哪些替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:49:35.307

如果您可以使用稍微不同的架构和大索引，那么您的关键问题对 MongoDB 来说并不是什么大问题：

通常你会做类似的事情：

```
{
    productId :..
    details : {
        detailName1 : detailValue1,
        detailName2 : detailValue2;
    }
} 
```

但是，如果您这样做，您可以索引详细信息字段：

```
{
    productId :..
    details : [
        {field : detailName1, value : detailValue1},
        {field : detailName2, value : detailValue2}
    ]
} 
```

请注意，这将导致索引非常大。不一定是问题，但需要注意。然后索引将是`{details.field:1, details.value:1}`（或者只是`{details:1}`如果您没有为每个详细信息添加其他字段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:29:26.907

抓取所有数据后，您可以对其进行检查以确定文档中是否存在可以添加索引以提高性能的字段/字段集。

# wpf - 在不选择的情况下突出显示 ComboBox 中的第一个项目

> ID：11864461
> 
> 赞同：0
> 
> 时间：2012-08-08T12:23:59.913
> 
> 标签：wpf, silverlight

我有一个附加到 ComboBox 控件的自定义行为。

在我想要的行为中，默认情况下，突出显示 ComboBox 实现增量搜索的第一项。我的意思是在弹出窗口中呈现结果的那一刻，第一项应该被突出显示但未被选中。

这意味着我不能使用`SelectedIndex = 0`，因为它也会选择该项目。我想将 ComboBox 保持为空，但将项目的视觉状态设置为突出显示的状态。

我看到有一个`IsHighlightedProperty`in`ComboBoxItem`但它被注册为只读 dp 所以没有帮助。

无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:47:09.613

除了使用转换器，您还可以使用 ComboBox 的`AlternationIndex`属性来获取项目的索引，然后使用触发器为第一个项目着色。将交替索引设置为始终大于 ComboBox 中项目数的值，以便只有一个项目的索引为 0。突出显示该项目的样式类似于：

```
 <Style x:Key="FirstColor" TargetType="{x:Type ListBoxItem}">
        <Style.Triggers>
            <Trigger Property="ComboBox.AlternationIndex" Value="0">
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
            </Trigger>
        </Style.Triggers>            
    </Style> 
```

你的 ComboBox 看起来像这样：

```
<ComboBox ItemsSource="{Binding Items}" SelectedIndex="-1" 
          AlternationCount="500" 
          ItemContainerStyle="{StaticResource FirstColor}"/> 
```

将`HighlightBrushKey`使用现有的突出显示样式而不是自定义颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:21:21.063

您的项目列表应该是某种`ItemsControl`（即，，，`ComboBox`等`ListBox`）`ListView`对`TreeView`吗？

所以它必须有一个`ItemTemplate`属性......

因此，在其中`ItemTemplate` 添加一个`DataTrigger`将具有 `MultiBinding`两个属性的...

1.  列表项的当前数据上下文...`{Binding}`
2.  列表的 ItemsSource ...`{Binding ItemsSource, RelativeSource={RelativeSource AncetsrType={x:Type ItemsControl}}}`

将`MultiBinding.Converter`返回 true 如果

```
 values[0] == ((IEnumerable)values[1]).Cast<object>().First() 
```

然后基于此标志，`DataTrigger`您可以将任何您想要的样式应用于列表中的第一个项目！

希望这可以帮助。

# json - 如何在 Titanium SDK 中解析 JSON？

> ID：11864464
> 
> 赞同：0
> 
> 时间：2012-08-08T12:24:08.407
> 
> 标签：json, parsing, titanium-mobile, appcelerator-mobile

我有以下 JSON 对象。我该如何解析它？

```
{
   "0":{
      "productname":"2000 voltage va/1500 watt Step-up & Step-down Voltage Converter Transformer Vtr-2000va",
      "imageurl":"http://ecx.images-amazon.com/images/I/41tZp8-FziL.SL160.jpg",
      "producturl":"http://www.searchupc.com/rd.aspx?u=d%2bKvXQ%2fFIfa95xJ38QYLyU4OUkBqBrcphyF%2fbVaEoj5T%2fjsx3y%2fHventbiluNMAD641XeGGqUyQ5JQ0kDwVY0%2fizy%2feMStjfhnK3vab2NMFLECe8bv1vKsseZwtqbneVrpk3UfzjwueUBm87YXCgYak%2bgrHyqvo8zlCVoZhSu8FvMqXgFIhrz7UbHz5rdGzFTNFoV4YN3DXToyQ8tcDYGAmk6MrTHcJf9qHJMPaI910Wk7%2bfli43M%2bTETLOuMsbMkQhZSycKalaEYDLq9koEWw%3d%3d",
      "price":"99.99",
      "currency":"usd",
      "saleprice":"",
      "storename":"amazon.com"
   },
   "1":{
      "productname":"Ostrich Hackle",
      "imageurl":"",
      "producturl":"http://www.searchupc.com/rd.aspx?u=d%2bKvXQ%2fFIfa95xJ38QYLyYHuiEfPQuvrTusBuKFMyxAtMCRVMoc9UZeJmNSSnDMX0lbsWZCKodvcbrTGEUGCO2BBlpJ7y5EyWTIyjXmdiSpaUj1khd2fbQrxgatQCUQQyzatk%2bNZdH7Hmd1voRFizEznxhQ53tkftuu6%2bbOehX5D7ef53P52MKyoehUPJ9cPhkqAvAkkuudtqELQJr3WBJU8pGFY1JdJIPu65N%2fWNII%2fMaDEOp720hJq31XFbkNm",
      "price":"1000.00",
      "currency":"usd",
      "saleprice":"",
      "storename":"amazon.com"
   },
   "2":{
      "productname":"Opi BURLESQUE Holiday 2010 ~Rising Star~ HLB09",
      "imageurl":"",
      "producturl":"http://www.searchupc.com/rd.aspx?u=d%2bKvXQ%2fFIfa95xJ38QYLySaervFME3ziZ2ark6tA1RYuwjdEgy8egf60DkN6uARuU%2bYGpR6B%2fbo%2fEFTtEBIoFpTKNrhJrktpuuqLRP9AMJk5O9X6uMoka1vJEKOGOXg0mJEExy5EFFGGODFRthR1xQzwrG43kKl0jU6mO4ZhjzO5W4kBnt9hLVEG78T9LhTm4CbO4nJ8sEAanke4Tn1k2eKOdDsjM0HXCEmQZnSbv%2bNLd24iPdXP1SFnoaFaQydi",
      "price":"5.90",
      "currency":"usd",
      "saleprice":"",
      "storename":"amazon.com"
   },
   "3":{
      "productname":"Meddiapers Absorbent Plus",
      "imageurl":"http://ecx.images-amazon.com/images/I/51tQWKd5hML.SL160.jpg",
      "producturl":"http://www.searchupc.com/rd.aspx?u=d%2bKvXQ%2fFIfa95xJ38QYLyRQpi7yISXhgFqm980vqJMISJGki5N3Bda%2bVTv7soLtO9uO1BQAyHzMxioboGzlDVdi7IG3lGC8bTX3J58ZvsdIZZgJzJQ2WIXHuHu4fo%2bHNs4UISSDyh8ccYKSRgdQT1tkjwcBAsOTl5ecpBbH6Us9%2fJgwWSGtyOekBTNUaSmQbpAFX2vi6H1br9LPAd7ym7RY0pZcmYAQ21bC7%2bMfiAGA%3d",
      "price":"84.99",
      "currency":"usd",
      "saleprice":"",
      "storename":"amazon.com"
   },
   "4":{
      "productname":"Songs of Murder, Pain and Woe",
      "imageurl":"http://images.emusic.com/music/images/album/0/110/801/11080176/155x155.jpg",
      "producturl":"http://www.searchupc.com/rd.aspx?u=RNxK6UXSsPf3Ea72o8XklOleRz4EIMcFVo3oih5JwMu59TOerGE1WPGRu%2fxnElLipZ%2fyFjey7NayZB8f3Znj5UVqN6%2b%2bJyLrmoE7sv1rrNS%2bSvXPrhbOz18lJwRPYWNtvjzOMu6ciIZyHtMaXeA3%2fwgsViasrwxTSDKxP31RV46G0zpTX5p2FZuezGxY1yxBJ7htWSk%2bSs1T7QbBDdEv7dvln%2bxQUFrn2eIiH2nEn3dQUAyNAelEa4jeTQbhDPsO",
      "price":"0.0",
      "currency":"usd",
      "saleprice":"",
      "storename":"emusic.com"
   },
   "5":{
      "productname":"Opi Opi Burlesque Holiday 2010 Rising Star Hlb09",
      "imageurl":"",
      "producturl":"http://www.searchupc.com/rd.aspx?u=1obZMMCVp83xNDdKOrGPNkSnn1asTWEiBPxzjC3R7WKgF5yHc7Bncom2WXi5oIcIE%2f4ohYASydDXyi6Opl965KOjfT%2fp%2f2S4emtcBvMZH9nzHHMj9Pjjhe4ktpeUiY7DIcxxsbHyuJ9M2RZeSp82BshMrEZ8SGEZfdZNrdKU3qgmFR8wSt9sgXhM3I3UgGZW",
      "price":"8.5",
      "currency":"USD",
      "saleprice":"",
      "storename":"bpnails.amazonwebstore.com"
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:18:25.403

您需要使用 Titanium 附带的 JSON 解析器（假设上面的 JSON 在一个名为 jsonString 的变量中）：

```
var jsonObject = JSON.parse(jsonString);
var productName = jsonObject.0.productName; 
```

要观察 JSON 对象中的信息，您可以使用`JSON.stringify(jsonObject.0);`

作为一个单独的次要问题，为什么 JSON 中的顶级对象是对象而不是数组？

# symfony - 在 symfony2 中从数据库中获取数组数据

> ID：11864465
> 
> 赞同：0
> 
> 时间：2012-08-08T12:24:09.260
> 
> 标签：symfony, doctrine, dql

我有一个包含三个字段的表“配置”

```
------------------
id | name | value
------------------
 1 | na1  | va1 
 2 | na2  | va2
 3 | na3  | va3
 . | ...  | ... 
```

我需要将上述数据提取到数组“$confData”中，如下所示

```
$confData ===>

  array(
   'na1' => 'va1',
   'na2' => 'va2',
   'na1' => 'va3',
   ' . ' => '...'
  ); 
```

我想知道 symfony-doctrine 中是否有任何预定义的函数/方法来获取这个数组？如果不可用，如何使用学说方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:32:16.333

没有这样的默认方式。您应该为获取的对象手动构建此数组。

```
//after fetching $objectCollection

$config = array();
foreach ($objectCollection as $object) {
    $config[$object->getName()] = $object->getValue();
} 
```

# javascript - 如何识别是否从 CRM 2011 功能区上的自定义按钮触发了控件/插件？

> ID：11864468
> 
> 赞同：2
> 
> 时间：2012-08-08T12:24:18.293
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011, ribbon

我基本上是想找出如何识别是否从实体功能区上的自定义按钮触发了任何东西（任何控件、插件或工作流）。有没有办法识别它？

一种方法是单击自定义按钮更改表单上的布尔字段。还有其他更好或更有效的解决方案吗？

我正在使用 CRM 2011 并在实体更新时触发自定义插件。

预先感谢。

kva888

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:20:05.540

*[原答案已删除]*

*道歉 - 我匆忙发布。重新阅读您的问题并意识到您提出了相同的解决方案并想知道是否有替代方案......*

* * *

简而言之，没有可用的服务器端足迹告诉您有关使用哪种客户端方法更改属性的任何信息。

您描述的解决方案（每当功能区按钮更改某些内容时设置一个标志）是，我敢肯定，唯一的选择。

# java - 如何在部署环境中调用批处理文件？

> ID：11864472
> 
> 赞同：1
> 
> 时间：2012-08-08T12:24:32.643
> 
> 标签：java, jakarta-ee

我正在尝试使用从 java Web 应用程序调用批处理文件

```
 ProcessBuilder pb = new ProcessBuilder("D:/doctemp/convert.bat");
    Process p = pb.start(); 
```

当我使用 Netbeans 运行应用程序时它工作正常。但是当我在tomcat批处理文件中部署我的应用程序时不会调用。谁能提出问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:05:55.447

我终于解决了。通过使用以下代码。

```
File dir = new File("D:\\Vers\\doctemp");
Runtime.getRuntime().exec("c:\\windows\\system32\\cmd.exe /c convert.bat", envs, dir); 
```

您需要发送cmd.exe的完整路径才能被tomcat识别。对于字体支持，您需要发送环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:27:19.817

也许您遇到了一些权限问题。

在 Tomcat 上部署时，您是在 .war 文件中包含此批处理文件，还是程序必须使用提供的路径？

# rest - Mongoose 的错误处理

> ID：11864482
> 
> 赞同：32
> 
> 时间：2012-08-08T12:25:10.070
> 
> 标签：rest, error-handling, mongoose

我是一个绝对的 NodeJS 初学者，想用 Express 和 Mongoose 创建一个简单的 REST-Webservice。

在一个中心位置处理 Mongoose 错误的最佳实践是什么？

当任何地方发生数据库错误时，我想返回一个带有错误消息的 Http-500-Error-Page：

```
if(error) {
  res.writeHead(500, {'Content-Type': 'application/json'});
  res.write('{error: "' + error + '"}');
  res.end();
} 
```

在旧教程[http://blog-next-stage.learnboost.com/mongoose/](http://blog-next-stage.learnboost.com/mongoose/)我读到了一个全局错误监听器：

```
Mongoose.addListener('error',function(errObj,scope_of_error)); 
```

[但这似乎不起作用，我在Mongoose 官方文档](http://mongoosejs.com/docs/guide.html)中找不到有关此侦听器的内容。我是否在每次 Mongo 请求后检查错误？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-18T05:39:46.947

如果您使用 Express，错误通常直接在您的路由中或在构建于 mongoose 之上的 api 中处理，并将错误转发到`next`.

```
app.get('/tickets', function (req, res, next) {
  PlaneTickets.find({}, function (err, tickets) {
    if (err) return next(err);
    // or if no tickets are found maybe
    if (0 === tickets.length) return next(new NotFoundError));
    ...
  })
}) 
```

`NotFoundError`可以在您的错误处理程序中间件中嗅探以[提供](http://expressjs.com/guide/error-handling.html)自定义消息传递。

一些抽象是可能的，但您仍然需要访问该`next`方法才能将错误传递到路由链。

```
PlaneTickets.search(term, next, function (tickets) {
  // i don't like this b/c it hides whats going on and changes the (err, result) callback convention of node
}) 
```

至于集中处理 mongoose 错误，实际上并没有一个地方可以处理所有错误。可以在几个不同的级别处理错误：

`connection`您的模型正在使用的模型会发出错误`connection`，因此

```
mongoose.connect(..);
mongoose.connection.on('error', handler);

// or if using separate connections
var conn = mongoose.createConnection(..);
conn.on('error', handler); 
```

对于典型的查询/更新/删除，错误将传递给您的回调。

```
PlaneTickets.find({..}, function (err, tickets) {
  if (err) ... 
```

如果您不传递回调，则*如果您正在侦听模型，则会在模型上发出错误：*

```
PlaneTickets.on('error', handler); // note the loss of access to the `next` method from the request!
ticket.save(); // no callback passed 
```

如果您没有传递回调并且没有在`model`级别上监听错误，它们将在模型上发出`connection`。

这里的关键是您希望以`next`某种方式访问​​以传递错误。

# scala - 用于模式匹配的 Scala 类型擦除

> ID：11864483
> 
> 赞同：5
> 
> 时间：2012-08-08T12:25:10.473
> 
> 标签：scala, pattern-matching, type-erasure

我一直在论坛和 Google 上搜索有关 Scala 类型擦除问题的答案。但是，我找不到任何可以回答我的问题的东西。

我在与 ParamClass 的类型参数匹配的对象上进行模式匹配。我需要对 bar 方法的传入对象类型进行模式匹配。我已经看到了解决方案，例如

```
bar[X](a : X)(implicit m : Manifest[X]) 
```

这将解决我的问题，但我不能使用它，因为 bar 方法是一种被覆盖的方法。（其实就是Akka actor框架中的receive偏函数）。代码如下，应该是不言自明的：

```
class ParamClass[A : Manifest] {
  def bar(x : Any) = x match {
    case a: A => println("Found A: " + a)
    case _ =>    println("No match: " + x)
  }
}

object ErasureIssue {
  def main(args: Array[String]) {
    val clz = new ParamClass[Int]
    clz.bar("faf")
    clz.bar(2.3)
    clz.bar(12)   // this should match, but does not
  }
}

ErasureIssue.main(null) 
```

非常感谢任何有关解决此问题的帮助。我正在使用 Scala 2.9.1，顺便说一句。

-J

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:50:33.167

从理论上讲，您可以`bar`像这样签入：`x.getClass == implicitly[Manifest[A]].erasure`，但是对于原始类型（例如`Int`清单正确擦除到的原始类型）失败`Int`，但是`bar`使用盒装类型调用`java.lang.Integer`... :-(

您可能需要`A`成为一个`AnyRef`才能获得盒装清单：

```
class ParamClass[A <: AnyRef : Manifest] {
  def bar(x : Any) = x match {
    case _ if x.getClass == implicitly[Manifest[A]].erasure =>
      println("Found A: " + x.asInstanceOf[A])
    case _ => println("No match: " + x)
  }
}

object ErasureIssue {
  def main(args: Array[String]) {
    val clz = new ParamClass[Integer] // not pretty...
    clz.bar("faf")
    clz.bar(2.3)
    clz.bar(12)   // ok
  }
}

ErasureIssue.main(null) 
```

* * *

鉴于您构建原始数组的要求，您可以直接存储装箱类，独立于未装箱清单：

```
object ParamClass {
  def apply[A](implicit mf: Manifest[A]) = {
    val clazz = mf match {
      case Manifest.Int => classOf[java.lang.Integer] // boxed!
      case Manifest.Boolean => classOf[java.lang.Boolean]
      case _ => mf.erasure
    }
    new ParamClass[A](clazz)
  }
}
class ParamClass[A] private[ParamClass](clazz: Class[_])(implicit mf: Manifest[A]) {
  def bar(x : Any) = x match {
    case _ if x.getClass == clazz =>
      println("Found A: " + x.asInstanceOf[A])
    case _ => println("No match: " + x)
  }

  def newArray(size: Int) = new Array[A](size)

  override def toString = "ParamClass[" + mf + "]"
}

val pi = ParamClass[Int]
pi.bar("faf")
pi.bar(12)
pi.newArray(4)

val ps = ParamClass[String]
ps.bar("faf")
ps.bar(12)
ps.newArray(4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T16:57:50.773

如果您尝试使用 -unchecked 进行编译，您会立即收到警告。

> test.scala:3：警告：类型模式 A 中的抽象类型 A 未选中，因为它被擦除案例 a 消除：A => println("Found A:" + a)

如果您现在想更深入，可以使用 **scalac -print**

```
[[syntax trees at end of cleanup]]// Scala source: test.scala
package <empty> {
  class ParamClass extends java.lang.Object with ScalaObject {
    def bar(x: java.lang.Object): Unit = {
      <synthetic> val temp1: java.lang.Object = x;
      if (temp1.$isInstanceOf[java.lang.Object]())
        {
          scala.this.Predef.println("Found A: ".+(temp1))
        }
      else
        {
          scala.this.Predef.println("No match: ".+(x))
        }
    };
    def this(implicit evidence$1: scala.reflect.Manifest): ParamClass = {
      ParamClass.super.this();
      ()
    }
  };
  final object ErasureIssue extends java.lang.Object with ScalaObject {
    def main(args: Array[java.lang.String]): Unit = {
      val clz: ParamClass = new ParamClass(reflect.this.Manifest.Int());
      clz.bar("faf");
      clz.bar(scala.Double.box(2.3));
      clz.bar(scala.Int.box(12))
    };
    def this(): object ErasureIssue = {
      ErasureIssue.super.this();
      ()
    }
  }
} 
```

现在看到这段代码你可以看到你的A变成了一个java.lang.Object，这导致所有的参数都匹配子句

# javascript - 暂停 javascript keydown 事件

> ID：11864484
> 
> 赞同：0
> 
> 时间：2012-08-08T12:25:17.143
> 
> 标签：javascript, html, javascript-events

是否可以在javascript中暂停keydown（以及keypress，keyup）事件？

案例是：

> 按下某个按钮（例如，“Enter”键），休眠 5 秒并继续此事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:47:10.010

如果计时器正在运行，下面的纯 JS 解决方案将防止触发多个事件。

这是一个[演示](http://jsfiddle.net/bYnYw/)。

```
document.onkeydown = (function() {
    var isActive = false;

    return function(e) {
        if (e.keyCode === 13 && !isActive) {
            isActive = true;
            setTimeout(function() {
                isActive = false;

                // Your code here...

            }, 5000);
        }
    };

})(); 
```

# javascript - 在 InDesign 中旋转元素的值

> ID：11864485
> 
> 赞同：1
> 
> 时间：2012-08-08T12:25:18.373
> 
> 标签：javascript, indesign-server

我想知道是否可以使用自定义脚本从 InDesign 元素中的 ImageElement 获取旋转值？我是 InDesign 服务器脚本的新手，但如果可能的话，我已经开始学习了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:36:39.570

希望这会有所帮助...这将获取所有图像的旋转角度。

```
var pageItems = app.activeWindow.activePage.allPageItems;
var itemsCount = pageItems.length;

for(var i=0; i<itemsCount; i++)
{
  if(pageItems[i] instanceof Image)
  {
    var graphic = pageItems[i];

    var rotation = graphic.rotationAngle;

  }

} 
```

# html - Debugging a popup that doesn't display correctly in IE9

> ID：11864490
> 
> 赞同：1
> 
> 时间：2012-08-08T12:25:33.973
> 
> 标签：html, css

I've asked this in another question where we could not solve it

[Filling the top part of this window?](https://stackoverflow.com/questions/11841793/filling-the-top-part-of-this-window)

and now I've got the faulty code in a fiddle that we can debug: [http://jsfiddle.net/qffh5/6/](http://jsfiddle.net/qffh5/6/)

In internet explorer 9 the top of the window is not filling all the way. I suspect that CSS is being overridden so I looked in IE with the developer tools but couldn't find what was wrong:

![enter image description here](../Images/1c8efe545aac091810caac71bc27366c.png)

![enter image description here](../Images/ba63276c0783d495497581d8d0f6d3a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:39:06.960

When I pinpoint your issue I noticed that the styles are not correctly inherited. So i have cleaned up your fiddle so that only the "problem" existed.

html

```
<div id="topBar">
    <span class="pusher TB_nb">
        <h2>Some text</h2>
    </span>
    <span id="close">
       <a href="#todo" onclick="#do something">X</a>
    </span>
</div> 
```

Your CSS

```
#topBar {width:100%; background-color:#EFEFDC;}
#close {position:absolute; right:5px;} 
```

****Fiddle with only this part:*** *[http://jsfiddle.net/qffh5/30/](http://jsfiddle.net/qffh5/30/)**

Corrected CSS

```
#topBar {width:100%; background-color:#EFEFDC; display:inline-block;}
#topBar h2 {float:left}
#close {position:relative; float:right;}​ 
```

**fiddle can be found here : [http://jsfiddle.net/qffh5/28/](http://jsfiddle.net/qffh5/28/)**

# jsp - 根据下拉值启用文本框

> ID：11864496
> 
> 赞同：0
> 
> 时间：2012-08-08T12:25:41.553
> 
> 标签：jsp

我有一个包含文本框和下拉框的表单。在下拉列表中选择的值是从另一个不时更改的 java 程序中获得的。用户可以更改下拉列表的值以进行编辑。现在我想要的是启用/禁用文本框，具体取决于下拉列表中选择的值。代码在这里。

```
<input type="text" size="3" name="length<%=f.getId()%>" value="<%=f.getLength()%>"   disabled="disabled"/>

<div class="type">
<select name="type<%=f.getId()%>" id="field_type">
<%
for(Field.FieldType t : Field.FieldType.values()){
%>
<option value="<%=t.name()%>" <%=(t.equals(f.getFieldType())) ? "SELECTED" : "" %>>    <%=t.name() %></option>
            <% } %>
</select></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:44:19.967

您可以为此使用一些[JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)。这是一个示例，假设您希望在选择具有该值的选项时启用它`someValue`。

```
<select ... onchange="if (value == 'someValue') form['length<%=f.getId()%>'].disabled = false"> 
```

* * *

**与具体问题无关**，请注意，这种老式的 JSP 编写风格十年来一直受到强烈反对。这是非常难以维护的。另请参阅[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

# database-design - 学生班级选项

> ID：11864498
> 
> 赞同：1
> 
> 时间：2012-08-08T12:25:45.703
> 
> 标签：database-design

我正在为一所大学设计一个数据库。

我将学生分配到一门课程，但在课程中他们会得到一个班级选项列表。每门课程的课程选项都是相同的（不要问为什么，因为我真的不知道）。

一周有 4 个时段，一年有 3 个街区。

因此，他们将需要所有 12 个选项的类下拉列表，即

```
Block1period1   Block2period1    Block3period1
Block1period2   Block2period2    Block3period2 
```

我需要记录每个街区的课程。

我需要做什么？

我有我的 Options(classes) 表和我的学生表。我的 Student2Classes 表中需要哪些字段？

**编辑**：

我会尽力解释我的布局。

目前在我的数据库中，我可以添加学生信息并将其分配给课程。我的学生信息被分成几个表格，例如个人信息、学校信息、紧急联系人、交通方式等，这些表格被添加到多个表格中。要将学生分配给课程，我的主表单上有一个状态下拉列表，用于添加带有 [已完成评估、已接受、未接受] 等选项的信息获得录取通知书并参加课程。现在，对于这一部分，我不希望将课程链接到课程，因为相同的主题适用于大多数课程，并且在被接受之前选择了选项。因此，我希望在不链接课程的情况下将选项作为独立选项。

所以我的主要学生表

```
[Student ID, 
first name, 
last name, 
etc.] 
```

选项表

```
[Option ID, 
Option Name, 
Room Number, 
Tutor] 
```

现在我的 ClassAssignments 或 Student2Classes

```
[ID,
student ID,
Options ID, 
Block, 
Period] 
```

我可以根据需要更改选项或 Student2Classes。我对 Access 没有太多经验，但我会说我对它很满意，只是有些东西我迷失了（这是其中之一）

# javascript - 将变量从 JavaScript 传递到 Objective-C - JSON？

> ID：11864504
> 
> 赞同：1
> 
> 时间：2012-08-08T12:26:10.643
> 
> 标签：javascript, objective-c, json

> **可能重复：**
> [如何将值从 javascript 传递到 Objective-C](https://stackoverflow.com/questions/9216315/how-pass-a-value-from-javascript-to-objective-c)

我想将一个文本变量从 JavaScript 传递给一个 Objective-C 变量。

我的 HTML 文件如下所示：

```
<p>Bitte tragen Sie die Document ID ein:</p>

<SCRIPT TYPE="text/javascript">
    function testResults(form){
        location.href = DocumentID.value;
    }
</SCRIPT>

<form action="">
  <table border="0" cellpadding="5" cellspacing="0" bgcolor="#E0E0E0">
    <tr>
      <td align="right">Document ID:</td>
      <td><input name="DocumentID" type="text" size="30" maxlength="30" value="35060e6242160705744ffd8e280005b9"></td>
    </tr>
        <tr>
      <td align="right">Formular:</td>
      <td>
        <input type="button" NAME ="button" value=" Absenden " onClick="testResults(this.form)">
        <input type="reset" value=" Abbrechen">
      </td>
    </tr>
  </table>
</form> 
```

这是 Objective-C 代码：

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    if([request.URL.relativeString isEqualToString:@"http://localhost:8888/"])
    //if([request.URL.relativeString rangeOfString:@"http://localhost:8888/"].location)
    {
        //self.URL
        [self loadData];

        return true;
    }
   return true;
} 
```

有人可以给我一个提示吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:15:05.403

在 javascript 中，使表单提交在 javascript 中设置一个变量，然后加载一个虚拟 url。

您像上面所做的那样在 Obj-C 中捕获该 url，然后在 javascript 中调用一个函数来返回该变量。

```
NSString *script = [NSString stringWithFormat:@"myfunc('%@')", html];
NSString *result = [self.webView stringByEvaluatingJavaScriptFromString:script]; 
```

所以 javascript 中的 myfunc 返回表单变量。

# iphone - 如何使用 textview 自定义 uialertview？

> ID：11864506
> 
> 赞同：1
> 
> 时间：2012-08-08T12:26:18.080
> 
> 标签：iphone

这里我的问题是如何减小 uilaertview 的大小？

谢谢

UIAlertView *alert = [[UIAlertView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];

```
alert.title = @"Terms of Service";
alert.message = @"\n\n\n\n\n\n\n\n\n";
alert.delegate = self;
[alert addButtonWithTitle:@"Cancel"];
[alert addButtonWithTitle:@"Review"];

[alert addSubview:textView];
[alert show]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:51:24.353

设置你的**alert.frame = CGRectMake(0, 20, 50, 50);** 并使用简单的消息而不是使用 alert.message = @"\n\n\n\n\n\n\n\n\n";

例如：

```
alert.message = @"my message"; 
```

或使用下面的 UIAlertView 委托来设置框架

```
- (void)willPresentAlertView:(UIAlertView *)alertView{

    alertView.center =  your own CGPoint;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:47:01.253

消除

```
alert.message = @"\n\n\n\n\n\n\n\n\n"; 
```

# android - 从drawable设置图像时如何解决内存不足错误？

> ID：11864507
> 
> 赞同：1
> 
> 时间：2012-08-08T12:26:17.823
> 
> 标签：android

我正在研究android项目。我的 apk 大小为 50mb，因为我的项目包含大量图像，并且我将所有图像保存在可绘制文件夹中。但现在问题是有时当我单击按钮显示图像时，它会显示错误消息，指出内存不足错误。请任何人建议我如何解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:27:14.343

[Android 文档](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)提供了解决方案。
这个想法是您应该在将图像加载到内存之前按比例缩小它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:35:05.047

我不确定，但关于您的确切问题，但这是您可以获得解决方案的链接

[内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)

# database - PostgreSQL JPA 级联部分工作

> ID：11864510
> 
> 赞同：1
> 
> 时间：2012-08-08T12:26:33.493
> 
> 标签：database, hibernate, postgresql, jpa, entity

同样，我们可能有一个非常简单的问题；我们的数据库看起来像：

```
CREATE TABLE Question (
    idQuestion SERIAL,
    questionContent VARCHAR,

    CONSTRAINT Question_idQuestion_PK PRIMARY KEY (idQuestion),
);

CREATE TABLE Answer (
    idAnswer SERIAL,
    answerContent VARCHAR,
    idQuestion INTEGER,

    CONSTRAINT Answer_idAnswer_PK PRIMARY KEY (idAnswer),
    CONSTRAINT Answer_idQuestion_FK FOREIGN KEY (idQuestion) REFERENCES Question(idQuestion),
); 
```

所以一个问题有很多答案。在 Netbeans 7.1.2 生成的实体中，我们有字段：

```
@OneToMany(mappedBy = "idquestion", orphanRemoval=true, cascade= CascadeType.ALL, fetch= FetchType.EAGER)
private Collection<Answer> answerCollection; 
```

如您所见，我已经添加了所有可能的孤儿删除和级联指令，用于级联删除集合。它工作正常，但有一刻：

只有在我们应用程序的先前“实例”中创建问题和连接的答案时，您才能删除它们。如果我首先创建一个新问题甚至一个答案，然后直接删除它，我们会收到如下错误：

```
root cause

Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: update or delete on table "question" violates foreign key constraint "answer_idquestion_fk" on table "answer"
  Detail: Key (idquestion)=(30) is still referenced from table "answer".
Error Code: 0
Call: DELETE FROM question WHERE ((idquestion = ?) AND (version = ?))
    bind => [2 parameters bound]
Query: DeleteObjectQuery(com.accenture.androidwebapp.entities.Question[ idquestion=30 ])
root cause

org.postgresql.util.PSQLException: ERROR: update or delete on table "question" violates foreign key constraint "answer_idquestion_fk" on table "answer"
  Detail: Key (idquestion)=(30) is still referenced from table "answer". 
```

如果我重新启动（重建，重新部署）它正在工作的应用程序..为什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:34:48.597

尝试将 EclipseLink`@PrivateOwned`扩展注释添加到您的集合映射中。

至于在您重新启动应用程序之前无法删除的问题，我想到了两件事：

*   您可能正在使用非常长的 EntityManager 会话，其中所有内容都连接到 EnitityManager。如果是这种情况，那么重新启动强制更改 EntityManager 会话会有所帮助。完成会话后，请考虑通过调用来使用较短的 EntityManager 会话`EntityManager.close()`。`EntityManager.merge()`当您想修改它时，使用分离的实体和状态。

*   二级缓存（如果有）将通过重新部署来清除。尝试禁用二级缓存，看看是否有帮助。

# android - 如何安装负载，在karbonn平板电脑中安装apk以及如何在karbonn平板电脑中添加文件管理器。？

> ID：11864518
> 
> 赞同：0
> 
> 时间：2012-08-08T12:27:02.023
> 
> 标签：android, android-1.6-donut

我们正在开发一些安卓应用程序。**它使用 android 1.6**。当我们在该应用程序**三星**平板电脑中部署应用程序时，它可以工作。但是，如果我们尝试部署到**karbonn**平板电脑中，我们将无法部署它。

**karbonn 平板电脑中没有文件管理器。**应用程序选项中显示了一个单独的文件夹（用于 sdcard ）。它将正确地出现在三星平板电脑中。但它没有出现在 karbonn 平板电脑中。

我们找不到解决办法。我们想将 .apk 文件放入 karbonn 平板电脑并安装并需要对其进行测试。

所以请给出您的想法，如何安装负载，在 karbonn 平板电脑中安装 .apk 以及如何在 karbonn 平板电脑中添加文件管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:41:39.637

将apk文件发送到您的电子邮件并在平板电脑中打开附件，apk文件将被安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:38:14.833

安装后请转到 play store 并安装 Astro manager 打开 astro manager 你会找到所有文件夹。把那个apk文件按你的意愿放:)))

# java - 获取给定文件路径的文件

> ID：11864530
> 
> 赞同：0
> 
> 时间：2012-08-08T12:27:17.783
> 
> 标签：java, android

我想获取一个保存在手机特定目录中的文件。我怎样才能找到并获取它的引用，以便我可以用它做一些不同的事情，比如上传到服务器？

提前致谢。

石然

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:27:59.927

```
File f = new File("location"); 
```

请记住，如果您尝试访问 SD 卡，则需要设置权限。然后以您尝试做某事的任何方式处理“文件”。

如果您想使用 SDCard，请查看这篇文章： [写入 SD 卡的权限](https://stackoverflow.com/questions/2121833/permission-to-write-to-the-sd-card)

[编辑 - 示例]

```
String filenameToWrite = "Test.jpg"
try{
    File f = new File(Environment.getExternalStorageDirectory() + "/Photos/");
    if (f.exists()){
        File fileToWrite = new File(Environment.getExternalStorageDirectory() + "/Photos/" + filenameToWrite;
        // Do something to write file, save bitmap, save byte stream, etc.
    }
} catch(IOException e){
    Log.e("File", "Could not save file, error occured: " + e.toString());
} 
```

这里有一些入门教程，可帮助您了解如何在 java 中读取和写入文件。这（除了“路径”）是一个java问题，而不是Android问题。

教程：

[http://beginwithjava.blogspot.com/2011/04/java-file-save-and-file-load-objects.html](http://beginwithjava.blogspot.com/2011/04/java-file-save-and-file-load-objects.html)

[http://www.roseindia.net/java/beginners/java-write-to-file.shtml](http://www.roseindia.net/java/beginners/java-write-to-file.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:32:37.987

那么你在哪里存储你的文件？

将文件存储在特定区域，例如

```
Environment.getExternalStorageDirectory() 
```

然后当你想读取它时，只需使用使用的文件名和通过上述方法获得的路径即可。

# html - 桌面网页

> ID：11864535
> 
> 赞同：1
> 
> 时间：2012-08-08T12:27:28.823
> 
> 标签：html, internet-explorer, windows-xp

我有一个包含文档链接的网页（MS Word .doc 文件）。如果您直接在 IE8 上查看此网页，然后单击其中一个文档链接，它会打开一个新的 IE8 窗口/选项卡，并直接在 IE8 中显示该文档，并带有一个非常完美的有限 MS Word 工具栏。

如果我然后将桌面背景更改为网页，如果用户然后单击上面相同的文档链接，则直接打开的文档是 MS Word。为什么会这样？我需要它继续直接在新的 IE8 窗口中打开。

这是 HTML 链接的样子：

`<a href="file:///C:/folder/document1.doc" target="_blank">Document 1</a>`

这段 HTML 直接在 IE8 中完美运行，但是当包含此链接`right click desktop in XP > Properties > Desktop > Customize Desktop > Web`的网页通过添加网页 url 的位置来显示桌面上的网页时，如果我然后单击上面的 document1.doc 链接，它会打开在 MS Word 而不是 IE8 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:14:58.467

您确实可以尝试将目标设置为`_blank`，但如果这不起作用，我想我有一个解决方案。

在与您从桌面运行的页面相同的目录中创建一个新的 html 页面。

这应该是内容：

//请记住：javascript 代码不是我的，但它可以工作 ;)。

```
<html>
<head>
<script type="text/javascript">
function getQuerystring(key, default_)
{
  if (default_==null) default_=""; 
  key = key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regex = new RegExp("[\\?&]"+key+"=([^&#]*)");
  var qs = regex.exec(window.location.href);
  if(qs == null)
    return default_;
  else
    return qs[1];
}
document.location = getQuerystring('redirect');
</script>
</head>
<body>
you're being redirected
</body>
</html> 
```

就其本身而言，该文件不执行任何操作。但是，如果您将桌面 HTML 文件中的链接更改为

`NAME_OF_NEW_FILE_THAT_YOU_JUST_MADE.html?redirect=LINK_THAT_YOU_HAD_BEFORE`

这有点粗略，但它确实有效。它将在您的浏览器中打开，因为它是 HTML。它也会打开你的文件，感谢 JS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:37:52.503

在 IE8 中打开 MS Word 文件时的默认行为是在带有有限工具栏的新选项卡中打开它们。当您在 Active Desktop 上使用同一页面作为背景时，您不再使用 IE8，因此它将直接在 MS Word 中打开。

所以，我认为没有办法将文档“嵌入”为背景或触发它打开 IE8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:38:34.043

target = "_blank" 将在新选项卡中打开，我认为 Active Desktop 不支持。尝试目标 =“_self”

# c# - 在组合框上绘制动画

> ID：11864537
> 
> 赞同：1
> 
> 时间：2012-08-08T12:27:34.563
> 
> 标签：c#, winforms, animation, combobox, picturebox

关于如何在组合框中绘制图像有很多已经回答的问题和示例。但我还没有找到任何如何在组合框中绘制动画的示例。

我使用的 gif 动画是（它是透明的）：
![在此处输入图像描述](../Images/1316e882b1438a5faf083f7abc59d23c.png)

我想要达到的结果是这样的：
![在此处输入图像描述](../Images/cdf261ce18c5e137f995e4035fb756ef.png)

我正在使用 Windows 窗体和 .Net 3.5。
我想到的所有实现方法是：
1\. 在 ComboBox 的 DrawItem 处理程序中使用 Graphics.DrawImage。但是图像是静态绘制的，没有动画。
2\. 使用 PictureBox 显示动画，然后以某种方式调整它的大小并放置在 ComboBox 上。

对于第二个灵魂，我使用了以下代码：

```
pictureBox1 = new PictureBox();
pictureBox1.Image = Resource.myImage;
pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
//3 is used just for try to fit image into "white" area of ComboBox
pictureBox1.ClientSize = new Size(comboBox1.Size.Height-3, comboBox1.Size.Height-3);
pictureBox1.BackColor = System.Drawing.Color.Transparent;
pictureBox1.Dock = DockStyle.Left;
pictureBox1.Parent = this.comboBox1;
pictureBox1.Enabled = true;
pictureBox1.Visible = true; 
```

但结果我得到了这个：
![在此处输入图像描述](../Images/07d7abc79baef1809f0eabac1f6abc52.png)
它是动画的，但是图片框是在 ComboBox 边缘绘制的，看起来很糟糕。

那么，任何人都可以给我一个建议或一些帮助来实现这一目标吗？

谢谢你。

**编辑：**
**我的最终解决方案有效：**

```
pictureBox1 = new PictureBox();
pictureBox1.Image = Resource1.myImage;
pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
pictureBox1.ClientSize = new Size(comboBox1.Size.Height - SystemInformation.Border3DSize.Height,  comboBox1.Size.Height - (2 * SystemInformation.Border3DSize.Height));
pictureBox1.BackColor = System.Drawing.Color.Transparent;
pictureBox1.Location = new Point(SystemInformation.Border3DSize.Width, SystemInformation.Border3DSize.Height);
pictureBox1.Parent = this.comboBox1;
pictureBox1.Enabled = true;
pictureBox1.Visible = true; 
```

谢谢你们！你帮了我很多！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:47:33.150

试试这个：

```
 pictureBox1 = new PictureBox();
            pictureBox1.Image = Resource.myImage;
            pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
            //2 is used just for try to fit image into "white" area of ComboBox
            pictureBox1.ClientSize = new Size(comboBox1.Size.Height - 2, comboBox1.Size.Height - 2);
            pictureBox1.BackColor = System.Drawing.Color.Transparent;
            pictureBox1.Left = 1;
            pictureBox1.Top = 1;
            pictureBox1.Parent = this.comboBox1;
            pictureBox1.Enabled = true;
            pictureBox1.Visible = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:47:05.480

它可能有点*太小了*，但如果您将组合框的大小设置为`pictureBox1.Size = new Size(comboBox1.ItemHeight, comboBox1.ItemHeight)`.

或者将高度和宽度设置为`2*SystemInformation.3DBorderSize`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:53:23.213

删除设置“Dock”属性的代码。设置此项会导致布局管理器忽略大小/位置设置。

相反，将`Size`属性和`Location`属性设置为特定值。

就像是：

```
pictureBox3.Size = new Size(comboBox1.Size.Height-3, comboBox1.Size.Height-3);
pictureBox3.Location = new Point(0, 3); 
```

您可能需要调整这些以获得所需的确切位置。

# android - 为什么在 Service 中使用 onStartCommand()？

> ID：11864544
> 
> 赞同：2
> 
> 时间：2012-08-08T12:27:54.513
> 
> 标签：android, service

我在使用我确实实现的服务时有点困惑`onStartCommand().` 在某些示例中，onStartcommand() 方法已实现，而某处未实现。对于我需要使用此方法的内容，您能否澄清我的疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:31:25.837

Android文档说`onStartCommand()`是：

> 每次客户端通过调用 startService(Intent) 显式启动服务时由系统调用，提供它提供的参数和表示启动请求的唯一整数令牌。不要直接调用这个方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:37:51.913

当您使用该方法`onStartCommand()`启动服务时会调用`startService()`。您永远不会自己启动服务，而是使用意图请求启动给定的服务。

一些示例使用`bindService()`方法而不是`startService()`方法（您也可以同时使用两者）。绑定服务仅在另一个应用程序组件绑定到它时运行。

通常，启动的服务执行单个操作并且不会将结果返回给调用者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:30:51.577

`onStartCommand`用于将命令（意图）传递给服务。可以根据需要多次调用它。但是，`onCreate`只调用一次，保证服务被创建。

# testing - 如何测试长时间运行的基于时间的应用程序？

> ID：11864548
> 
> 赞同：0
> 
> 时间：2012-08-08T12:28:16.837
> 
> 标签：testing, timer

我有一个代表用户执行定期任务的 Linux 应用程序。想想`cron`虽然应用程序采取的行动完全不同，但调度有点相似。我想对非常长的运行进行一些黑盒测试（该期限最长为 35 天）。出于显而易见的原因，我不想实时进行测试。我可以手动提前时钟。或者，我可以设置一个伪造的私有 NTP 服务器，它以挂钟时间的倍数（每分钟一小时或其他时间）运行时钟，并欺骗运行应用程序的系统，使其也快速推进时钟。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:27:04.770

Fake NTP 是我的选择，但更好的建议是用经过良好测试的库（例如，如果您在 Java 平台上使用 Quartz）替换您自己的“cron”类型的功能，并避免这种测试本身。

# javascript - Chrome onMessage.addListener 仅有时执行

> ID：11864550
> 
> 赞同：1
> 
> 时间：2012-08-08T12:28:19.850
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我对我的 chrome 扩展中的 javascript 有一个小问题。我的弹出窗口包括用于从一个大站点搜索书籍的小表单。所以当我搜索书名时，它应该显示加载微调器，向书籍 API 发送 xhr 请求，删除微调器，在新选项卡中打开 options.html 并显示结果。它有效，但只是有时。所以你有什么建议？

popup.js

```
// var books includes JSON array of fetched books
    hrome.tabs.create({url: "options.html"}, function(tab){
      chrome.tabs.sendMessage(tab.id, {booksList: books});
    }); 
```

和 options.js

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
 alert("OK");
}); 
```

但是有时只显示OK...为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:25:55.250

通过使用localStorage解决...

popup.js

```
localStorage.books = JSON.stringify(books);
chrome.tabs.create({
    url: "options.html"
}, function(tab) {
    console.log(books);
});​ 
```

选项.js

```
var books = localStorage.books;
drawBooks(JSON.parse(books)); 
```

# iphone - iOS HTTP 请求在后台

> ID：11864553
> 
> 赞同：21
> 
> 时间：2012-08-08T12:28:30.690
> 
> 标签：iphone, objective-c, core-location

可以在应用程序处于后台时向 PHP 服务器发出 HTTP 异步请求吗？该应用程序是基于位置的应用程序，应每 5（或其他值）分钟收集当前位置并将坐标发送到服务器。即使应用程序在后台，我也可以将 http 帖子发送到服务器吗？我读了很多关于这个的想法，但其中一些告诉可以做到，另一些则不能做到。

谢谢，

亚历克斯。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-08T12:44:33.757

它可以完成，但它不可靠，因为您要求操作系统有时间发送一些东西，它可以接受或拒绝您的请求。这就是我所拥有的（从某处偷来的）：

```
[...] //we get the new location from CLLocationManager somewhere here    
BOOL isInBackground = NO;
if ([UIApplication sharedApplication].applicationState == UIApplicationStateBackground)
{
    isInBackground = YES;
}
if (isInBackground)
{
    [self sendBackgroundLocationToServer:newLocation];
}

- (void) sendBackgroundLocationToServer: (CLLocation *) lc
{
    UIBackgroundTaskIdentifier bgTask = UIBackgroundTaskInvalid;
    bgTask = [[UIApplication sharedApplication]
         beginBackgroundTaskWithExpirationHandler:^{
             [[UIApplication sharedApplication] endBackgroundTask:bgTask];
    }];

    NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithCapacity:2];
    [dictionary setObject:[NSNumber numberWithDouble:lc.coordinate.latitude] forKey:@"floLatitude"];
    [dictionary setObject:[NSNumber numberWithDouble:lc.coordinate.longitude] forKey:@"floLongitude"];
    // send to server with a synchronous request

    // AFTER ALL THE UPDATES, close the task
    if (bgTask != UIBackgroundTaskInvalid)
    {
        [[UIApplication sharedApplication] endBackgroundTask:bgTask];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T12:51:31.063

这些链接将帮助您...

[iphone - 在后台连接到服务器](https://stackoverflow.com/a/4594735/790794)

# php - 如何在 smarty 中获取 css、js、图像文件的自动版本控制？

> ID：11864554
> 
> 赞同：2
> 
> 时间：2012-08-08T12:28:30.480
> 
> 标签：php, smarty, smarty3

[如何在smarty](http://www.smarty.net/)中获得 css、js、图像文件的自动版本控制？

像这样

```
 <link rel="stylesheet" href="css/main.css" media="all"/> 
```

对此

```
<link rel="stylesheet" href="css/main354435.css" media="all"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:03:45.867

我想你需要这个来防止客户端缓存。最方便的方法（至少对我来说）是使用类似的东西：

```
<link rel="stylesheet" href="css/main.css?version=123456" media="all"/> 
```

这样，每次版本更改时，客户端的浏览器都会下载新版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:04:49.763

我不会用 smarty 做这个，版本控制应该在 VCS 中完成，这就是 VCS 的用途。结合良好的构建系统，您会变得更好。

我通常的项目工作流程如下所示：

使用[phing](http://www.phing.info/trac/)生成您的构建，我将解释与[Subversion](http://subversion.apache.org/)的组合，但这也可以适应其他 CVS。

在生成构建时，phings`SvnLastRevisionTask`存储最后一个修订：

```
<svnlastrevision
   svnpath="/your/installation/svn.exe"
   repositoryurl="http://your/svn/repository/url/"
   propertyname="svn.lastrevision"/> 
```

我`ReplaceTokens`用来更改 `##LASTREV##`我的代码参数文件中的一个特殊变量。在参数文件中使用它可以更容易地控制它，并且我的 php 代码只需要该变量而无需使用以下示例进行过滤。您基本上只需要过滤参数文件。

```
<filterchain>
  <replacetokens begintoken="##" endtoken="##">
    <token key="LASTREV" value="${svn.lastrevision}" />
  </replacetokens>
</filterchain> 
```

然后移动所有需要这个数字的文件（`MoveTask`）：

```
<move file="css/main.css" 
      tofile="css/main${svn.lastrevision}.css" 
      overwrite="true"/> 
```

为您的项目正确构建构建文件需要一些时间，但是一旦设置好它，它会节省大量时间，您无需过多担心项目将运行的服务器上的缓存条件之上。

# c# - WP7 上的 MediaPlayerLauncher - 如何恢复以前播放的媒体？

> ID：11864557
> 
> 赞同：6
> 
> 时间：2012-08-08T12:28:36.357
> 
> 标签：c#, windows-phone-7, media-player

我正在使用 MediaPlayerLauncher 在我的 WP7 应用程序中显示电影预告片，如下所示：

```
MediaPlayerLauncher mpl = new MediaPlayerLauncher();
mpl.Media = new Uri(trailerUrl, UriKind.Absolute);
mpl.Controls = MediaPlaybackControls.All;
mpl.Show(); 
```

这很好用，除了一件事：如果用户已经在后台听音乐，并启动预告片，则在预告片播放完成后（或者如果用户关闭视频），音乐不会恢复。

如果可能的话，有谁知道我如何恢复以前播放的音乐/媒体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:23:19.717

弄清楚了。在 show() 之后立即调用 MediaPlayer.Resume() 可以解决问题：

```
mpl.Media = new Uri(trailerurl, UriKind.Absolute);
mpl.Controls = MediaPlaybackControls.All;
mpl.Show();

MediaPlayer.Resume(); 
```

但是，我仍然想知道如何恢复广播和 spotify！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:40:51.460

通过 XNA 或“背景音频代理”播放本地媒体？

当您在 WP7 / WP8 中播放媒体时，会采用 OS 音频上下文，而原始上下文会丢失。如果音频是从外部应用程序启动的，那么您根本无法恢复。如果之前的媒体是从您的应用程序中启动的，那么您可以存储元数据并在预告片完成后重新播放。当然，媒体会从头开始播放，而不是从用户停止的地方开始播放。不幸的是，XNA 不允许您在给定的媒体中进行搜索；但是，您可以通过设置 player.Position 在“BackgroundAudioPlayer”的“音频代理”实例中查找。MediaHistory API 也值得一看：

```
var nowPlaying = Microsoft.Devices.MediaHistory.Instance.NowPlaying; 
```

# ios - ios背景位置

> ID：11864558
> 
> 赞同：0
> 
> 时间：2012-08-08T12:28:52.740
> 
> 标签：ios

将背景图像放置在标题图像下方的最佳方法是什么。目前我有：

```
header = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"h.png"]];
[header setContentMode:UIViewContentModeTop];
[self.window addSubview:header];

background = [[UIImageView alloc] init];
[background setImage:[UIImage imageNamed:@"bg.png"]];
[background setFrameOrigin:CGPointMake(0,header.frameHeight)];
[background addSubview:background]; 
```

但我收到以下错误：

```
 No visible @interface for 'UIImageView' declares the sector 'setFrameOrigin.' 
```

我想使用 UIView 方法，以便之后可以在背景视图中放置一个表格视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:49:12.073

```
[background addSubview:background]; 
```

在您的代码中不行。您正在尝试将视图作为子视图添加到其自身。只需创建一个 rootviewcontroller 并在您的应用程序委托中设置为 rootview 控制器。

```
self.window.rootViewController = rootviewcontroller; 
```

然后您可以将背景视图添加为 rootviewcontroller 视图上的子视图。之后，您可以为 headerview 执行此操作。

```
[rootviewcontroller.view addSubview:background];
[rootviewcontroller.view addSubview: headerview]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:53:40.920

```
[background setFrame:CGRectMake(0, header.frame.size.height, 60, 50)]; 
```

像这样尝试它会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:45:17.680

您可以使用：

```
CGRect rect = background.frame;
rect.oigin.x = x;
rect.origin.y = y;
background.frame = rect; 
```

或者：

```
background = [[UIImageView alloc] initWithFrame:CGRectMake(x, y, w, h)]; 
```

# java - Selenium 2.25.0 是否支持 Firefox 14？

> ID：11864559
> 
> 赞同：2
> 
> 时间：2012-08-08T12:28:56.523
> 
> 标签：java, selenium, webdriver

Selenium 2.25.0 是否支持 Firefox 14.0.1？

更新日志说：“将支持的 Firefox 版本更新到 17。”

但是我的测试显示了 Firefox 14 的一些奇怪行为。示例：

```
element.sendKeys("abcdefgh"); 
```

有时输出如下所示：

```
abcde^fgh 
```

或者

```
abcdé?fgh 
```

这适用于旧版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:32:34.927

是的，它对我有用。您还可以检查 -

[http://seleniumhq.org/about/platforms.html#browsers](http://seleniumhq.org/about/platforms.html#browsers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:51:41.203

1.  我将 Selenium 2.25.0 for Java 与 Firefox 14.0.1 一起使用，没有任何问题。

2.  您是否将测试代码从一个操作系统复制到另一个操作系统？可能格式已更改（UTF8/ISO/..），或者存在其他操作系统类型的隐藏字符，您在当前选择的操作系统上看不到这些字符。

# mod-rewrite - modRewrite 自定义重定向

> ID：11864560
> 
> 赞同：1
> 
> 时间：2012-08-08T12:29:02.150
> 
> 标签：mod-rewrite

如果 %{REQUEST_URI} 以 %{HTTP_HOST} 开头，如何重写？

即[http://example.com/example.com_custom_text](http://example.com/example.com_custom_text) -> [http://example.com/index.php?q=special&info=example.com_custom_text](http://example.com/index.php?q=special&info=example.com_custom_text)

由于通用性，%{HTTP_HOST} 的使用很重要。

不工作：

```
RewriteCond %{REQUEST_URI} ^%{HTTP_HOST}
RewriteRule ^(.*)$ index.php?q=special&info=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:31:21.117

您不能`%`在 a 的表达式（第二部分）中包含变量`RewriteCond`。但是您可以使用 a`\1`来反向引用相同的匹配项，并将 URI 和主机组合起来，如下所示：

```
RewriteCond %{HTTP_HOST};%{REQUEST_URI} ^([^|]+);/\1 
```

因此，如果请求`http://example.com/some_path`：

*   `%{HTTP_HOST};%{REQUEST_URI}`=`example.com;some_path`
*   `^([^|]+)`匹配`example.com`和`\1`！=`some_path`

如果请求`http://example.com/example.com_some_path`：

*   `%{HTTP_HOST};%{REQUEST_URI}`=`example.com;example.com_some_path`
*   `^([^|]+)`匹配`example.com`和`\1`匹配的开头`example.com_some_path`

# uitableview - UITableView 转为 UITableView

> ID：11864563
> 
> 赞同：1
> 
> 时间：2012-08-08T12:29:30.697
> 
> 标签：uitableview, storyboard

我对 iPhone 应用程序开发的这一领域非常陌生，并且一直在查看一些链接以了解它。

我的应用程序的要求与电话通讯录应用程序非常相似。

我需要在我的主页上有一个 TableView，上面有几个名字。每当单击一个名称时，它应该打开另一个具有更多详细信息（如手机号码、家庭电话号码等）的 TableView。

我已经能够使用人名创建第一个 TableView，但无法创建第二个并将其与第一个链接。我正在使用 Storyboards 来实现这一点。

另外，如果有一些免费的源代码可用于这样的应用程序，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:51:44.103

你可以加

```
 [self performSegueWithIdentifier:@"segueName" sender:self]; 
```

# c# - XslCompiledTransform 和自定义 XmlUrlResolver：“已存在具有相同键的条目”

> ID：11864564
> 
> 赞同：5
> 
> 时间：2012-08-08T12:29:32.110
> 
> 标签：c#, sql-server, xml, xslt, xslcompiledtransform

有没有办法调试通过自定义 XmlUrlResolver 从数据库加载的 XSLT 文档，或者有人知道下面的错误消息是什么吗？

我有一个导入通用 xslt 文档的 XSLT 样式表：

```
<xsl:import href="db://common.hist.org"/> 
```

该方案由从数据库加载 XSLT 文档的自定义处理[`XmlResolver`](http://msdn.microsoft.com/en-us/library/system.xml.xmlresolver.aspx "MSDN 参考页")，但出现错误：

> *已存在具有相同键的条目。*

引用的通用 XSLT 文档`xsl:import`包含一些通用 XSLT 模板，每个模板都有一个唯一的名称。

将 XSLT 文档从本地文件系统移动到数据库后，开始出现此错误。使用指向本地文件的默认导入方案以及从本地文件系统加载 XSLT 文档时，不会发生错误。

在创建 的实例时，我还尝试打开调试`XslCompiledTransform`，但不知何故，无法“进入”基于数据库的 XSLT。

```
_xslHtmlOutput = new XslCompiledTransform(XSLT_DEBUG); 
```

* * *

**更新：**以下基本上是请求的解析器​​代码，但我的代码中没有发生异常；因此我猜下面这段代码中没有明显的原因。（同样的代码实际上用于加载包含导入的 XSLT 样式表，并且在注释掉导入时，一切都按预期工作。）

```
public class XmlDBResolver : XmlUrlResolver
{
    private IDictionary<string,string> GetUriComponents(String uri)
    {
        bool useXmlPre = false;
        uri = uri.Replace("db://", "");
        useXmlPre = uri.StartsWith("xml/");
        uri = uri.Replace("xml/", "");
        IDictionary<string, string> dict = new Dictionary<string, string>();
        string app = null, area = null, subArea = null;

        if (!String.IsNullOrWhiteSpace(uri))
        {
            string[] components = uri.Split('.');

            if (components == null)
                throw new Exception("Invalid Xslt URI");

            switch (components.Count())
            {
                case 3:
                    app = components[0];
                    break;
                case 4:
                    area = components[0];
                    app = components[1];
                    break;
                case 5:
                    subArea = components[0];
                    area = components[1];
                    app = components[2];
                    break;
                default:
                    throw new Exception("Invalid Xslt URI");
            }

            dict.Add("application", app);
            dict.Add("area", area);
            dict.Add("subArea", subArea);
            dict.Add("xmlPreTransform", String.Format("{0}", useXmlPre));
        }

        return dict;
    }

    public override System.Net.ICredentials Credentials
    {
        set { /* TODO: check if we need credentials */ }
    }

    public override object GetEntity(Uri absoluteUri, string role, Type ofObjectToReturn)
    {
        /*
         *  db://<app>.hist.org
         *  db://<area>.<app>.hist.org
         *  db://<subArea>.<area>.<app>.hist.org
         * 
         * */

        Tracing.TraceHelper.WriteLine(String.Format("GetEntity {0}", absoluteUri));

        XmlReader reader = null;

        switch (absoluteUri.Scheme)
        {
            case "db":
                string origString = absoluteUri.OriginalString;
                IDictionary<string, string> xsltDict = GetUriComponents(origString);

                if(String.IsNullOrWhiteSpace(xsltDict["area"]))
                {
                    reader = DatabaseServiceFactory.DatabaseService.GetApplicationXslt(xsltDict["application"]);
                }
                else if (!String.IsNullOrWhiteSpace(xsltDict["area"]) && String.IsNullOrWhiteSpace(xsltDict["subArea"]) && !Boolean.Parse(xsltDict["xmlPreTransform"]))
                {
                    reader = DatabaseServiceFactory.DatabaseService.GetAreaXslt(xsltDict["application"], xsltDict["area"]);
                }
                else if (!String.IsNullOrWhiteSpace(xsltDict["area"]) && !String.IsNullOrWhiteSpace(xsltDict["subArea"]))
                {
                    if(Boolean.Parse(xsltDict["xmlPreTransform"]))
                        reader = DatabaseServiceFactory.DatabaseService.GetSubareaXmlPreTransformXslt(xsltDict["application"], xsltDict["area"], xsltDict["subArea"]);
                    else
                        reader = DatabaseServiceFactory.DatabaseService.GetSubareaXslt(xsltDict["application"], xsltDict["area"], xsltDict["subArea"]);
                }
                return reader;

            default:
                return base.GetEntity(absoluteUri, role, ofObjectToReturn);
        }
    } 
```

为了完整性，IDatabaseService 接口（相关部分）：

```
public interface IDatabaseService
{
    ...
    XmlReader GetApplicationXslt(String applicationName);
    XmlReader GetAreaXslt(String applicationName, String areaName);
    XmlReader GetSubareaXslt(String applicationName, String areaName, String subAreaName);
    XmlReader GetSubareaXmlPreTransformXslt(String applicationName, String areaName, String subAreaName);
} 
```

* * *

**更新：**我试图通过临时从 Web 服务器加载样式表来隔离问题，这很有效。我了解到，与存储在 Web 服务器上的样式表相比，SQL Server 显然只存储没有 XML 声明的 XML 片段。

**更新：**异常的堆栈跟踪：

> System.Xml.Xsl.XslLoadException：XSLT-Kompilierungsfehler。费勒贝 (9,1616)。---> System.ArgumentException: 已存在具有相同键的条目.. bei System.Collections.Specialized.ListDictionary.Add(Object key, Object value) bei System.Collections.Specialized.HybridDictionary.Add(Object key, Object value) bei System.Xml.Xsl.Xslt.XsltLoader.LoadStylesheet(XmlReader reader, Boolean include) bei System.Xml.Xsl.Xslt.XsltLoader.LoadStylesheet(Uri uri, Boolean include) bei System.Xml.Xsl.Xslt.XsltLoader .LoadStylesheet(XmlReader reader, Boolean include) --- Ende der inneren Ablaufverfolgung des Ausnahmestacks --- bei System.Xml.Xsl.Xslt.XsltLoader.LoadStylesheet(XmlReader reader, Boolean include) bei System.Xml.Xsl.Xslt.XsltLoader .Load(XmlReader reader) bei System.Xml.Xsl.Xslt.XsltLoader.Load(Compiler compiler, Object stylesheet,

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T13:49:06.893

# google-maps-api-3 - 谷歌地图 api 覆盖控制

> ID：11864572
> 
> 赞同：0
> 
> 时间：2012-08-08T12:30:00.347
> 
> 标签：google-maps-api-3, overlay

我在整个谷歌地图上显示图像。图像是透明的。我关注了谷歌的文档，一切都很好。每次我在地图上移动或缩放时，图像都会发生变化。过了一会儿，我不能再缩放或移动地图了，我只缩放和移动图像。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:04:32.720

有多个问题导致页面上出现问题：

*   您正在销毁并重新创建 center_changed 和 zoom_changed 事件的叠加层。相反，您应该只更新叠加层中的图像。您实际上应该只需要创建一次覆盖。
*   不是将天气图像添加到 OverlayView，而是将其添加到`div`覆盖地图的图像中。这就是阻止您的事件影响地图的原因（点击和拖动事件发生在您的天气 div 而不是地图上）。

# oracle - 我应该使用 Oracle 的 sys_guid() 生成 guid 吗？

> ID：11864575
> 
> 赞同：4
> 
> 时间：2012-08-08T12:30:13.393
> 
> 标签：oracle, primary-key, guid

`SELECT SYS_GUID() FROM DUAL`我有一些继承的代码，每次创建实体时都会调用。这意味着对于每次插入，都会对 Oracle 进行两次调用，一次用于获取`Guid`，另一次用于插入数据。

我想这可能有一个很好的理由，例如 - Oracle 的 Guid 可能会通过顺序进行大量插入优化，因此他们可能试图避免过度的索引树重新平衡。

是否有理由使用`SYS_GUID`而不是在客户端上构建自己`Guid`的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T12:58:08.317

如果您已经为您提供了它，为什么还要自己滚动。另外，您不需要先抓住它然后插入，您只需插入：

```
create table my_tab
(
val1 raw(16),
val2 varchar2(100)
);

insert into my_tab(val1, val2) values (sys_guid(), 'Some data');
commit; 
```

您还可以将其用作主键的默认值：

```
drop table my_tab;
create table my_tab
(
val1 raw(16) default sys_guid(),
val2 varchar2(100),
primary key(val1)
); 
```

这里不需要设置插入前触发器来使用序列（或者在大多数情况下甚至关心 val1 或它在代码中的填充方式）。

还对序列进行更多维护。更不用说在系统之间移动数据时的可移植性问题。

但是，序列对 imo 更友好（到目前为止，查看和使用数字比原始值的 32 十六进制版本更好）。序列可能还有其他好处，我没有做过任何广泛的比较，您可能希望先运行一些性能测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T12:41:59.483

如果您关心的是两个数据库调用，您应该可以`SYS_GUID()`在`INSERT`语句中调用。您甚至可以使用一个`RETURNING`子句来获取 Oracle 生成的值，以便将其包含在您的应用程序中以供进一步使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-22T06:08:32.760

SYS_GUID 可以用作主键列的默认值，这通常比使用序列更方便，但请注意，**这些值或多或少是随机的，而不是连续的。**从好的方面来说，这可能会减少对热块的争用，但从坏的方面来说，您的索引插入也将无处不在。我们通常建议不要使用这种做法。

参考 [点击这里](http://psoug.org/definition/SYS_GUID.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-05T15:32:14.107

我发现没有理由从 Oracle 生成 Guid。对于每个 Guid，Oracle 和客户端之间的往返可能比偶尔发生的索引重新平衡（随机值插入）慢。

# design-patterns - 带有 Glassfish 的 Java EE

> ID：11864578
> 
> 赞同：0
> 
> 时间：2012-08-08T12:30:38.403
> 
> 标签：design-patterns, jakarta-ee, glassfish

我已经编写 Java 大约 3 年了，但主要是使用 SE。现在我将在 GlassFish 上启动 Java EE，用于一个报告工具项目。

这是我学习 Java EE 的目标。但我不确定从哪里开始？我需要遵循哪些技术（对于初学者）。

你能推荐我一些参考吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:35:28.190

我建议您从[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)开始，其中包含所有基本技术的概述。然后你可以用谷歌搜索一些特定的实现，比如 Jersey for REST。Eclipselink 用于 JPA、CDI。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:23:41.553

您可能还想看看：

*   JSf 或 Spring（框架）
*   Java 持久性 API
*   Java 消息服务

我不知道J2EE 是否支持最后两种技术，但JavaEE6 支持它们。本书提供了一个很好的概述：[JavaEE6 Tutorial](https://rads.stackoverflow.com/amzn/click/com/0137081855)

对于 java 持久性 API，你可能想看看这本书：[Pro JPA 2](https://rads.stackoverflow.com/amzn/click/com/1430219564)

# django - 在 django 模板中将列表呈现为 2 列 html 表

> ID：11864580
> 
> 赞同：5
> 
> 时间：2012-08-08T12:30:44.360
> 
> 标签：django, django-templates

我有一个有序列表，我在 Django 模板中将其呈现为 2 列 html 表。在表格中，应输出元素，使前 (n+1)/2 个元素在第一列，其余的在第二列，如下所示：

```
<table>
  <tr>
     <td>Elem 1</td>
     <td>Elem 4</td>
  </tr>
  <tr>
    <td>Elem 2</td>
    <td>Elem 5</td>
  </tr>
  <tr>
    <td>Elem 3</td>
    <td></td>
  </tr>
</table> 
```

假设我的元素在上下文中`{{ elems }}`，我怎么能在 Django 模板中合理地完成这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T12:43:06.027

检查[这个食谱](http://djangosnippets.org/snippets/401/)。你可能需要修改它，但你会明白的。

使用它，在您的模板中，您只需执行以下操作：

```
{% for row in elems|columns:2 %}
 <tr>
    {% for item in row %}
        <td>{{ item }}</td>
    {% endfor %}
 </tr>
{% endfor %} 
```

# regex - 文件夹查找多种文件类型 - CakePHP

> ID：11864582
> 
> 赞同：0
> 
> 时间：2012-08-08T12:30:48.823
> 
> 标签：regex, cakephp, find, directory

我想在特定文件夹中查找与 2 个不同文件扩展名 .gz 和 .bin 匹配的所有文件

我正在使用这样的 Folder::find 函数：

```
$dir = new Folder('/home/');
$files = $dir->find('.*\.gz');
if($files == null || empty($files))
{
    $this->set('files', "No Files Found");
    echo "empty";
}
else
{
    $this->set('files', $files);
} 
```

如何调整 find 函数的正则表达式以查找两者？

此外，如果没有找到任何东西，我在 if 语句中设置的视图变量 $files 将不起作用。如果目录中有文件，它可以工作，但如果没有，则不会显示“未找到文件”。它回显文本“空”，但不设置变量。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:50:22.187

我发现要查找不止一种文件类型，请使用 | 正则表达式中的运算符。'。*.gz|。*.bin' -> 感谢 flec。

我在视图中的 $files 变量遇到的问题是我将它用作选择输入的选项。

我没有直接将其设置为字符串，如果它为空，我只是在数组中创建一个具有文本值的元素。

```
 if($files == null || empty($files))
    {
        $files[0] = "No Files Found";
        $this->set('files', $files);
    }
    else
    {
        $this->set('files', $files);
    } 
```

# visual-studio-2010 - VS2010 中的 SQL 2012 模式/数据比较

> ID：11864587
> 
> 赞同：8
> 
> 时间：2012-08-08T12:30:57.187
> 
> 标签：visual-studio-2010, sql-server-2012, compare, schema

我一直在到处寻找，以了解是否有一种当前方法可以使用 VS 2010 Ultimate 中当前包含的现有模式/数据比较对 SQL 2012 数据库进行模式和数据比较。

我能想到的最好的是一个愚蠢的附加工具（SSDT Power Tools），它在模式比较的可用性水平上几乎不一样，也不做数据比较。

不幸的是，我们继续使用 SQL 2012 设置了一个新服务器，并准备将我们当前的生产迁移到它，因为我了解到我们过去使用的所有好工具都不起作用，并且从 2012 年到任何以前的比较都没有向后兼容性SSDT 的数据库版本。

我正在寻求任何帮助来解决我的问题，因为我的替代方法是必须丢弃 2012 服务器并将所有内容部署到 2008 R2，因为我们的工作需要我们不断地进行数据比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:47:48.323

澄清几点。正如对模式/数据比较所提到的，最好是使用商业工具，例如 Red-Gate 的 SQL-Compare。不过，为了完整起见，我将添加其他几点：

1.  SSDT 确实会跨 SQL Server 的版本和版本进行架构比较。此时它不做数据比较。有关 SSDT 的更多信息，请查看我关于该主题的[博客文章。](http://lynnlangit.wordpress.com/?s=ssdt)

2.  您可以通过将数据库兼容性级别设置为低于 SQL Server 2012 的级别来缓解版本问题，如下图所示，来自 SSMS。

![SSMS 中 SQL Server 2012 的数据库兼容性设置](../Images/2130acb770ea94d6c36465d213bf9c00.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T06:51:11.653

您还可以使用[主数据](https://visualstudiogallery.msdn.microsoft.com/530c546a-fdd3-4589-b2b2-e3c4aab13fba) `visual studio addin`进行比较`sql server databases`.. 它还`lightweight(1mb)`包括一些高级功能`SSDT`...

# java - .properties 文件中的 JBoss 属性不起作用

> ID：11864588
> 
> 赞同：0
> 
> 时间：2012-08-08T12:31:03.013
> 
> 标签：java, properties, jboss, filenotfoundexception, jboss-4.2.x

在我的 Java`.properties`文件中，我有这一行：

```
KEYSTORE_PATH=${jboss.server.data.dir}/myapp/keys/keystore.jks 
```

在所有其他文件中，例如`log4j.properties` `jboss.server.data.dir`更改为`C:\\jboss\server\default\log`，没关系。

但在这里我得到了这个例外：

```
java.io.FileNotFoundException: ${jboss.server.data.dir}\myapp\keys\keystore.jks (The system cannot find the path specified) 
```

看起来 JBoss 并没有将其属性名称更改为`dir`名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:03:53.080

如果您通过`java.util.Properties`类型加载属性文件，则不需要对值占位符进行特殊处理。有几个第三方库可以提供此类功能。 [春天](http://www.springsource.org/spring-framework)就是其中之一。

另一个选项是在启动 JBoss 4.x 时使用 -C 命令行选项来指定自定义属性文件。加载后，JBoss 将正确解析值占位符。然后可以通过各种`System.getProperties`和`System.getProperty`方法访问加载的、完全解析的属性。

# android - 安卓 cocos2d 动画

> ID：11864591
> 
> 赞同：1
> 
> 时间：2012-08-08T12:31:17.610
> 
> 标签：android, cocos2d-android

我在 cocos2d 游戏中制作了 1 个动画，但看不到该动画。有人可以帮忙吗？

```
Animation animation = new Animation("dance", 0.2f);
        for (int i = 1; i < 15; i++) {
            animation.addFrame(new CCFormatter().format("grossini_dance_%02d.png", i));
        }

        IntervalAction action = Animate.action(animation);

        grossini.runAction(action); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:00:47.150

试试这个：

```
 public void addPuzzleAnimation() {

            CCAnimation OpenPuzzleAnim = CCAnimation.animation("", 0.1f);

            for (int i = 1; i <= 11; i++) {
                if (i < 10) {
                    OpenPuzzleAnim.addFrame(CCSpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("trunkOut.0" + i + ".png"));
                } else {
                    OpenPuzzleAnim.addFrame(CCSpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("trunkOut." + i + ".png"));
                }
                CCAction OpenPuzzleAction = CCAnimate.action(1, OpenPuzzleAnim, false);
                addboxPuzzleOpen.runAction(OpenPuzzleAction);

            } 
```

# php - 无限滚动

> ID：11864594
> 
> 赞同：2
> 
> 时间：2012-08-08T12:31:31.040
> 
> 标签：php, javascript, jquery

我正在尝试使这个无限滚动脚本按我想要的方式工作。但是我不知道，如何检测 loadmore.php 文件中哪些帖子是新的，所以它不会显示页面上已经存在的帖子？

```
<script type="text/javascript">
$(window).scroll(function()
{
    if($(window).scrollTop() == $(document).height() - $(window).height())
    {
        $('div#loadmoreajaxloader').show();
        $.ajax({
        url: "loadmore.php",
        success: function(html)
        {
            if(html)
            {
                $("#postswrapper").append(html);
                $('div#loadmoreajaxloader').hide();
            }else
            {
                $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
            }
        }
        });
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:37:38.963

不要试图“弄清楚”哪些帖子是新的。确保在您的 javascript 中您知道上次加载的帖子（通过它的 id 或其他方式），并将其发送到“loadmore.php”脚本。

您的 web 服务 (loadmore.php) 应该保持无状态，并且您的前端 (javascript) 应该知道状态（最后加载的 id）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:37:31.963

好吧，简单地说：您必须存储该信息。假设您在尝试加载的信息中有一些序列，您可以存储上次返回的最后一个 id，并将该信息作为 PHP 脚本中新信息的起点传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T00:32:31.250

最好的方法是创建一个可以提供偏移量的页面，它将查询新帖子。这就是我在wordpress中这样做的方式：

1.  确保为页面提供偏移量（url）：http: [//yourwebsite.com/more/ ?offset=20](http://yourwebsite.com/more/?offset=20)
2.  然后获取偏移量并使用偏移量运行查询。
3.  那么你将不会有任何相同的结果......

我知道这听起来很模糊——所以我用代码写了一个教程——想看看吗？[http://benjaminpotter.org/infinite-scroll/](http://benjaminpotter.org/infinite-scroll/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:39:13.580

为什么不在客户端上创建一个变量，其中包含您尝试加载的元素列表的最后一个 id 或最后一个时间戳。然后你只需将这个值传递给服务器，然后你的 php 文件就可以使用这个值。

一个非常常见的例子是最后使用的时间戳。当您需要一些新的提要时，您只需将此时间戳发送到服务器，他就会获取例如下一个比这次更旧的 5 个提要

# php - 发布 Ajax 调用似乎没问题，但 PHP isset $POST 返回 false

> ID：11864595
> 
> 赞同：0
> 
> 时间：2012-08-08T12:31:32.210
> 
> 标签：php, post

我有一个 javascript 代码对 php 脚本进行 Ajax 调用。当我查看 Chrome 网络选项卡时，请求已发送并且似乎没问题：

```
Request URL:http://localhost/site/current/inscription/ Request
Method:POST Status Code:200 OK
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:55
Content-Type:application/x-www-form-urlencoded
Cookie:[...]
Host:localhost
Origin:http://localhost
Referer:http://localhost/site/current/
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.60 Safari/537.1
X-CSRF-Token:undefined
X-Requested-With:XMLHttpRequest
Form Data:
nomClient:bob
emailClient:bob@bob.com 
```

但是 PHP 脚本没有找到表单数据：

```
if (isset($POST['emailClient'])) 
```

返回假。

当我使用 GET 并直接从浏览器 URL 栏中调用它时，PHP 脚本可以正常工作。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:33:11.800

改为使用`if (isset($_POST['emailClient']))`。`$POST`是（可能）`null`因此是错误的，您忘记了下划线。

[文档](http://php.net/manual/en/reserved.variables.post.php)

# r - R 高斯消除和 qr 分解

> ID：11864601
> 
> 赞同：3
> 
> 时间：2012-08-08T12:31:49.510
> 
> 标签：r, matrix, linear-algebra

我发现以下`R`使用`qr`因式分解的代码无法恢复原始矩阵。我不知道为什么。

```
a <- matrix(runif(180),ncol=6)
a[,c(2,4)] <- 0
b <- qr(a)
d <- qr.Q(b) %*% qr.R(b) 
```

then与将所有零列向右移动的方式`d`不同。`a`看来`qr`因式分解并没有保留行空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:59:08.417

当您阅读帮助时，`qr`您会看到 R 使用旋转的 QR 分解。所以

```
str(b) 
```

给

```
List of 4
 $ qr   : num [1:30, 1:6] -3.2292 0.218 0.0623 0.0371 0.302 ...
 $ rank : int 4
 $ qraux: num [1:6] 1.05 1.11 1.04 1.22 0 ...
 $ pivot: int [1:6] 1 3 5 6 2 4
 - attr(*, "class")= chr "qr" 
```

因此，您需要应用`pivot`to`a`或 to 的倒数`pivot`来`d`正确排列矩阵。所以

```
pivots <- b$pivot
d.ok <- d[,order(pivots)]
all.equal(a,d.ok) 
```

给

```
[1] TRUE 
```

你也可以做

```
a.p <- a[,pivots]
all.equal(a.p,d) 
```

这也导致`TRUE`.

# ios - UITableView 分隔单元格？

> ID：11864602
> 
> 赞同：5
> 
> 时间：2012-08-08T12:31:52.007
> 
> 标签：ios, uitableview, cells

我`UITableView`在我的应用程序中正确实施了一个。现在我想稍微改变一下 UI，所以我想要每个单元格之间有一个空格，就像我在这张图中显示的那样：

![在此处输入图像描述](../Images/bf8bec4465be3855ac651dc1c6949126.png)

有可能吗？如果是这样，怎么做？

同样在每个单元格之间，我可以让它透明，这样它就没有任何白色区域阻挡视图的背景图像吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T19:53:20.543

我至少可以想到两种方法：

1）创建一个空单元格，它将是透明的，并且您喜欢任何高度，然后将此单元格用于索引 1、3、5、7、9、11 处的行...

我以前使用这种方法来创建自定义分隔单元，你可以做同样的事情，看看单元之间的空间就像一个大的透明分隔单元。[我在这个问题](https://stackoverflow.com/questions/11453366/error-creating-custom-tableview-separator/11454239#11454239)中发布了代码看看。

2）第二种选择，只是使用底部透明部分的图像，这样单元格看起来就像它们之间有一个空间。

要为不同类型的单元格返回不同的高度，请执行以下操作：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row % 2 == 0) {
        // this is a regular cell
        return REGULAR_CELL_HEIGHT;
    }
    else {
        // this is a "space" cell
        return SPACE_CELL_HEIGHT;
    }
} 
```

您可能希望禁用与“空格”单元格的任何选择和用户交互，因此您需要做的就是将其添加到`cellForRowAtIndexPath`方法中：

```
if (indexPath.row % 2 == 0) {
    cell.userInteractionEnabled = YES;
}
else {  
    cell.userInteractionEnabled = NO;
} 
```

这将阻止任何用户与单元格的交互，如果您只想在用户点击单元格时不显示选择蓝色但您仍希望`didSelectRowAtIndexPath`调用委托方法，请将上面的代码替换为：

```
if (indexPath.row % 2 == 0) {
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;
}
else {  
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T17:11:07.330

虽然 Eyal 的回答非常合理，但另一种简单的方法是使您的单元格比您需要的更大，并在单元格底部放置一个所需分隔符高度的视图，该单元格具有您想要的分隔符的背景颜色成为。

例如，如果您想要高度为 40 且分隔符为 3 的单元格，则构建一个高度为 43 的单元格并在 y = 40 处放置一个高度为 3 的视图，并根据需要设置其背景颜色。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T12:38:27.653

1.您可以使用分组的表格视图和部分。

2.每个部分有单行和

3.tableview背景颜色为清晰颜色。

# php - 将整个 Flash 文档以 JPEG 格式保存到电子邮件作为附件

> ID：11864606
> 
> 赞同：0
> 
> 时间：2012-08-08T12:32:06.023
> 
> 标签：php, actionscript-3, flash

我目前正在 Flash 中创建一个用户界面，以访问一个网站，客户可以在该网站上为定制产品创建自己的设计。我们的想法是，我们希望他们能够创建他们的设计并使用底部的表单，将设计保存为 jpeg 并通过 PHP 将其附加到电子邮件中，从而将设计发送给我们。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:42:20.053

如果您使用 Adob​​e AIR，则可以直接将电子邮件发送到您的电子邮件域而无需 PHP。

在我不懂PHP的时候，只用flash(as3.0)和发邮件的方式很难实现。但是，在不了解服务器端的情况下，例如使用 Adob​​e Air 的 php，我可以很容易地实现。

我很高兴地推荐使用带有**airxmail**框架的 Adob​​e AIR 发送邮件。

这是一个网站：[airxmail](http://code.google.com/p/airxmail/)

这是一个文档：[airxmail 文档](http://flex.coltware.com/as3-flex-air/airxmail/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:23:07.767

您可以在位图数据上绘制舞台并将该位图发送到 php 以用于邮件目的。

查看此站点以获取如何将[as3 displayobject 保存为 png](http://upshots.org/actionscript-3/as3-php-saving-displayobjects-as-png)的示例。

诀窍是使用 bitmapdata 中的 draw 函数在 bitmapdata 上绘制舞台。然后将此位图数据发送到 php 以在附件中发送邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:45:47.197

我认为这是可能的。首先，您将设计中的 displayObject 转换为发送到 php 的 byteArray。在哪里使用 imagecreatefromstring() 函数创建图像，请参见： http: [//lv.php.net/imagecreatefromstring](http://lv.php.net/imagecreatefromstring)。

示例 AS3

```
public function displayObjectToPNG(displayObject:*, scale:Number = 1):ByteArray {
        var bmpData:BitmapData=new BitmapData(displayObject.width, displayObject.height, true, 0xFFFFFF);
        bmpData.draw(displayObject);

        var byteArray:ByteArray = PNGEncoder.encode(bmpData);
        return byteArray;
    }
public function encodeFile(byteArray:ByteArray):Base64Encoder {
        var base64:Base64Encoder = new Base64Encoder();
        base64.encodeBytes(byteArray);
        return base64;
    }
public function saveFile(encodedFile:Base64Encoder, scriptLocation:String):void {
        var data:URLVariables = new URLVariables();
        data.fileData = encodedFile;

        var request:URLRequest = new URLRequest(scriptLocation);
        request.method = URLRequestMethod.POST;
        request.data = data;

        var loader:URLLoader= new URLLoader();
        loader.addEventListener(Event.COMPLETE, function(e:Event):void {fileSaved(loader);});
        loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatus);
        loader.addEventListener(IOErrorEvent.IO_ERROR, ioError);
        _fileSavesInProgress.push(loader);

        try {
            loader.load(request);
        } catch (e:*) {
            trace("an error occured of type", e);
        }
    } 
```

像这样实现（这是您在用户单击按钮时执行的代码）：

```
saveFile(encodeFile(displayObjectToPNG(sprite)), "http://www.your.domain/php/sendMail.php"); 
```

你的 php 文件看起来像这样。

```
<?php
$png = imagecreatefromstring(base64_decode($fileData));

function mail_attachment($to, $subject, $message, $from, $file) {
    $content = chunk_split($file); 
    $uid = md5(uniqid(time()));
    $from = str_replace(array("\r", "\n"), '', $from); // to prevent email injection
    $header = "From: ".$from."\r\n"
        ."MIME-Version: 1.0\r\n"
        ."Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n"
        ."This is a multi-part message in MIME format.\r\n" 
        ."--".$uid."\r\n"
        ."Content-type:text/plain; charset=iso-8859-1\r\n"
        ."Content-Transfer-Encoding: 7bit\r\n\r\n"
        .$message."\r\n\r\n"
        ."--".$uid."\r\n"
        ."Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"
        ."Content-Transfer-Encoding: base64\r\n"
        ."Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n"
        .$content."\r\n\r\n"
        ."--".$uid."--"; 
    return mail($to, $subject, "", $header);
}

mail_attachment("client", "subject", "your design", "your@company.com", $png); 
```

请注意，我尚未对此进行测试，但我认为如果不是解决方案，这将非常接近。祝你好运！

[编辑] 如果您想在一个函数中实现此解决方案，请使用以下 AS3 代码：

```
public function sendSprite(sprite:Sprite, scriptLocation:String):void {
  var bmpData:BitmapData=new BitmapData(sprite.width, sprite.height, true, 0xFFFFFF);
  bmpData.draw(sprite);

  var encodedFile:Base64Encoder = new Base64Encoder();
  encodedFile.encodeBytes(PNGEncoder.encode(bmpData));

  var data:URLVariables = new URLVariables();
  data.fileData = encodedFile;

  var request:URLRequest = new URLRequest(scriptLocation);
  request.method = URLRequestMethod.POST;
  request.data = data;

  var loader:URLLoader= new URLLoader();
  loader.addEventListener(Event.COMPLETE, spriteSend);
  loader.addEventListener(Event.OPEN, traceEvent);
  loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, traceEvent);
  loader.addEventListener(IOErrorEvent.IO_ERROR, traceEvent);
  loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, traceEvent);
  loader.addEventListener(ProgressEvent.PROGRESS, traceEvent);

  try {
      loader.load(request);
  } catch (e:*) {
      trace("an error occured of type", e);
  }

  function traceEvent(e:*):void {
      trace(e);
  }

  function spriteSend(e:Event):void {
      trace(e, "\n sprite succesfully send \n");
  } 
```

}

# android - 在评分栏中截断图像

> ID：11864608
> 
> 赞同：4
> 
> 时间：2012-08-08T12:32:26.860
> 
> 标签：android

我制作了自己的评分栏。有 4 种尺寸的花卉图像（xdpi、hdpi 等），从 24pxx24px 到 64x64px。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+android:id/background"
          android:drawable="@drawable/ic_rating_flowers_empty" />
    <item android:id="@+android:id/secondaryProgress"
          android:drawable="@drawable/ic_rating_flowers_empty" />
    <item android:id="@+android:id/progress"
          android:drawable="@drawable/ic_rating_flowers" />
</layer-list> 
```

可绘制对象中的 rating_flowers.xml

```
<style name="flowersRating" parent="@android:style/Widget.RatingBar">
    <item name="android:progressDrawable">@drawable/rating_flowers</item>
    <item name="android:minHeight">24dip</item>
    <item name="android:maxHeight">64dip</item>
</style> 
```

在样式.xml

```
<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dip" >

    <TextView
        android:text="@string/mood_headache" />

    <RatingBar
        android:id="@+id/moodHeadacheRating"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"    
        android:numStars="3"
        android:stepSize="1.0"
        android:rating="0" 
        style="@style/flowersRating" />

 </TableRow> 
```

和活动

而我所看到的

![我所看到的](../Images/c1d9a929d607323b6475c95d6a2fb683.png)

和来自drawable-ldpi的图像

![在此处输入图像描述](../Images/0f660ae5e2b8cdeb4679e632988e9345.png) ![在此处输入图像描述](../Images/cab9187eecbe3d7472abf1f7f36beda7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:52:57.640

尝试删除

```
android:padding="5dip" 
```

来自 TableRow，因为它会在可绘制的花朵上方产生一个填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-01T00:28:42.103

在您的评分栏更改的 XML 中

```
android:layout_height="wrap_content" 
```

至

```
android:layout_height="[some number]sp". 
```

这将解决截断图像的问题。

[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html)可用于获取有关显示器的一般信息，然后找出要使用的适当单位，但是使用[android 单位转换器](http://angrytools.com/android/pixelcalc/)要简单得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-22T10:48:22.170

使用样式作为 ?android:attr/ratingBarStyleSmall

```
<RatingBar
android:id="@+id/rating"
style="?android:attr/ratingBarStyleSmall"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:numStars="5"
android:progressDrawable="@drawable/ratingbar_selector"
android:rating="2.0"
android:stepSize="1.0" /> 
```

并且自定义评分栏选择器将是： ratingbar_selector.xml

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@android:id/background"
        android:drawable="@drawable/ic_unselected_star" />
    <item
        android:id="@android:id/secondaryProgress"
        android:drawable="@drawable/ic_unselected_star" />
    <item
        android:id="@android:id/progress"
        android:drawable="@drawable/ic_selected_star" />
</layer-list> 
```

IMP 注意：如果自定义评级栏图标大小为 48x48、50x50 等，则将图标放入 xxhdpi 文件夹（因为我使用了较小的（36x36）评级图标，这会产生同样的问题）。然后我使用大小为 48x48 的评分栏图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T18:18:00.870

我在这里遇到了完全相同的问题。对我来说，问题不在于代码，而在于图像本身。就我而言，解决方案是将照片手动调整为我想要的尺寸（IE 24x24 或 64x64）并将它们放入正确的文件夹中。

我尝试了多种方法，但似乎

```
<item name="android:minHeight">24dip</item>
<item name="android:maxHeight">64dip</item> 
```

对我来说，一点代码不会做任何事情。尝试自己调整图像大小，看看是否能解决问题。

-Sil

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-09T02:36:04.267

放 `android:layout_height="0dp"`

[https://stackoverflow.com/a/44992485/4238544](https://stackoverflow.com/a/44992485/4238544)

# asp.net - 我可以从静态类属性设置 NavigateUrl 吗？

> ID：11864619
> 
> 赞同：1
> 
> 时间：2012-08-08T12:32:55.717
> 
> 标签：asp.net

我的页面文件中有以下代码：

```
<td style=" text-align:center">
    <asp:HyperLink 
        ID="HyperLink1" 
        Text='<%# DataBinder.Eval(Container.DataItem,"Name") %>' 
        runat="server" 
        NavigateUrl='<%# string.Format(Link_EditResume, DataBinder.Eval(Container.DataItem,"Id")) %>'> 
    </asp:HyperLink>
</td> 
```

变量 Link_EditResume 是在页面代码隐藏中声明的字符串，定义为

```
public partial class ProspectSummary : BasePage
{
    protected string Link_EditResume = Links.EditResume;
    ... 
```

其中 Links 是一个静态类，而 EditResume 是该类的一个属性。为什么这行得通并且直接在 aspx 文件中引用 Links.EditResume 不起作用？有没有办法直接在aspx中引用它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:40:03.863

我怀疑问题在于您没有将`Links`位于 ASPX 页面中的名称空间导入。

您的 ASPX 页面应以[Import](http://msdn.microsoft.com/en-us/library/eb44kack.aspx)指令开头，如下所示：

```
<%@ Import Namespace="Steves.Namespace.Containing.LinksConstants" %>

<td style=" text-align:center">
    <asp:HyperLink 
        NavigateUrl='<%# string.Format(Links.EditResume, DataBinder.Eval(Container.DataItem,"Id")) %>'> 
    </asp:HyperLink>
</td> 
```

# iphone - XCode 4.x 中 iOS 和模拟器的条件编译

> ID：11864623
> 
> 赞同：1
> 
> 时间：2012-08-08T12:33:23.600
> 
> 标签：iphone, xcode

任何人都可以帮助我为 iOS 和 Simulator 以不同的方式编译应用程序，因为我有两个用于 iOS 和 Simulator 的静态库，因为如果它为任一平台编译，就会出现警告。Lipo 命令可以解决警告问题，但我希望模拟器和 iOS 单独编译发生。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:01:34.713

您只需要为设备和模拟器设置单独的目标。在模拟器的目标中，在构建设置中，将“支持的平台”设置为“iphonesimulator”。在为设备构建的其他目标中，使“支持的平台”仅为“iphoneos”。删除任何不适合您的目标的受支持平台。在这种情况下，您的 SIM 目标也可能能够选择一个设备，但手动支持它很容易。然后你去特定的库并为你的模拟构建关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:35:12.057

如果您有权访问源代码，则可以在给出警告的代码周围添加如下内容：

```
#if TARGET_IPHONE_SIMULATOR 
 // do the simulator thing
#else
 // do the device thing
#endif 
```

# objective-c - 使用触摸移动事件移动 CALayer

> ID：11864628
> 
> 赞同：0
> 
> 时间：2012-08-08T12:33:50.120
> 
> 标签：objective-c, ios, cocoa-touch

我试图用**触摸事件移动****CALayer**。但是有错误信息。

 **```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // get touched point
    CGPoint pt = [[touches anyObject] locationInView:self];
    [self.layer convertPoint:pt toLayer:self.layer.superlayer];

    // move piece to the point
    piece.bounds.origin = pt; <- "Expression is not assignable" 
    }
} 
```

我一直在寻找这个问题的解决方案，并得出这是**Objective** -C对象结构的问题。但我无法得到解决方案。

谢谢你的好心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:10:00.117

是的，不能赋值。`UIView`s 和它的子类也是如此。

我们不能设置一个`CALayer.bounds.origin`或`CALayer.bounds.size`属性。我们可以做的是创建 a`CGRect`并将其分配给`CALayer.bounds`or `CALayer.frame`。

所以，像：

```
// Use frame, not bounds:
piece.frame = CGRectMake(pt.x, pt.y, piece.frame.size.width, piece.frame.size.height); <- "Expression is assignable" 
```**

# html - 打开页面它的 css 和数据库并行

> ID：11864629
> 
> 赞同：0
> 
> 时间：2012-08-08T12:33:58.763
> 
> 标签：html, parallel-processing, parallel-port

我有 big `database`s，其中包含大量表，并且在单独的文件夹中有`PHP/HTML`文件。现在我想要的是当用户浏览我们的页面时让我的页面加载更快，然后是数据库上的内容，它和并行运行的文件。这意味着没有任何文件流被阻塞，或者每个文件一个一个地打开，这需要大量时间。每个作品都分开并分配在一个地方制作页面是什么意思？那么，如果有任何代码允许所有文件（包括数据库）并行工作，我们将如何实现呢？`java script``css``css``PHP/HTML`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:40:49.447

您可以将所有`<script>`标签放在标签的底部`<body>`。根据雅虎[网站加速最佳实践](http://developer.yahoo.com/performance/rules.html/)。

> 脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

你不能对你的样式表做同样的事情。它不仅不是 W3C 投诉，而且实际上也无济于事。

> 在 Yahoo! 研究性能时，我们发现将样式表移动到文档 HEAD 会使页面加载速度更快。这是因为将样式表放在 HEAD 中可以让页面逐步呈现。

* * *

附带说明一下，如果加载页面需要花费这么多时间，还请查看您的 PHP 和 SQL 查询。尝试优化这些。

# php - 传递的变量不适用于 PDO

> ID：11864632
> 
> 赞同：-2
> 
> 时间：2012-08-08T12:34:16.610
> 
> 标签：php, variables, pdo

我有一个应在 PHP-PDO 查询中加载的传递变量，但我收到此错误：

致命错误：在非对象上调用成员函数 prepare()

这是我的代码：

```
$color = $_GET['color'];    
$items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
$items = bindValue(':colorbase1', $color); 
```

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:36:23.983

您必须在 $con->prepare 之前在脚本中声明 $con

```
$con =  new PDO($dns, $user, $pass); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:26:05.680

```
$color = $_GET['color'];    
$items = $con->prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
$items->bindValue(':colorbase1', $color);
$items->execute(); 
```

:D 玩得开心

# install4j - Install4J“损坏的java VM”

> ID：11864635
> 
> 赞同：0
> 
> 时间：2012-08-08T12:34:49.200
> 
> 标签：install4j

我有一位客户在 64 位 Windows 上安装我们的 Java 应用程序时遇到问题。我们在该环境中进行测试，无法重现该问题。

他收到一条消息说 JVM 已损坏，然后他有机会找到一个。这很奇怪，因为我们将 JVM 与安装程序打包在一起，并且从未在其他任何地方看到过这个问题。

![第一个错误对话框](../Images/4332b0b5d83c5fdec2808a1252e8ef05.png) ![Install4J 提供定位 JVM](../Images/5f9b530d36516c1928217b6c6d089762.png)

有任何想法吗？

# android - 为什么立方体的表面呈现为透明？

> ID：11864636
> 
> 赞同：2
> 
> 时间：2012-08-08T12:34:50.137
> 
> 标签：android, opengl-es, opengl-es-2.0, transparent, lighting

我正在开发一个简单的程序，它在屏幕上显示一个带照明的立方体。我在 Android 设备上使用 OpenGL ES 2.0。但只有立方体的底面是不透明的。其他表面看起来是透明的（我认为这是因为照明。当我停止使用照明时，看起来所有表面都是不透明的），以便您可以看到它后面的表面。

这是我的立方体的顶点：

```
 static float vertexs[] = { // in counterclockwise order:
    // front
    -0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, 0.5f,
    -0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, 0.5f,
    // back
    -0.5f, -0.5f, -0.5f,
     0.5f, -0.5f, -0.5f,
    -0.5f, 0.5f, -0.5f,
     0.5f, 0.5f, -0.5f,
    // left
    -0.5f, -0.5f, 0.5f,
    -0.5f, -0.5f, -0.5f,
    -0.5f, 0.5f, 0.5f,
    -0.5f, 0.5f, -0.5f,
    // right  
     0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, -0.5f,
     0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, -0.5f,  
    // up  
    -0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, 0.5f,
    -0.5f, 0.5f, -0.5f,
     0.5f, 0.5f, -0.5f,
    // bottom  
    -0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, 0.5f,
    -0.5f, -0.5f, -0.5f,
     0.5f, -0.5f, -0.5f
}; 
```

这是我正在使用的法线（这里有问题吗？）：

```
 static float normals[] = {
    // front
    -1.0f, -1.0f, 1.0f,
     1.0f, -1.0f, 1.0f,
    -1.0f, 1.0f, 1.0f,
     1.0f, 1.0f, 1.0f,
    // back
    -1.0f, -1.0f, -1.0f,
     1.0f, -1.0f, -1.0f,
    -1.0f, 1.0f, -1.0f,
     1.0f, 1.0f, -1.0f,
    // left
    -1.0f, -1.0f, 1.0f,
    -1.0f, -1.0f, -1.0f,
    -1.0f, 1.0f, 1.0f,
    -1.0f, 1.0f, -1.0f,
    // right  
     1.0f, -1.0f, 1.0f,
     1.0f, -1.0f, -1.0f,
     1.0f, 1.0f, 1.0f,
     1.0f, 1.0f, -1.0f,  
    // up  
    -1.0f, 1.0f, 1.0f,
     1.0f, 1.0f, 1.0f,
    -1.0f, 1.0f, -1.0f,
     1.0f, 1.0f, -1.0f,
    // bottom  
    -1.0f, -1.0f, 1.0f,
     1.0f, -1.0f, 1.0f,
    -1.0f, -1.0f, -1.0f,
     1.0f, -1.0f, -1.0f
}; 
```

着色器如下：

```
private final String vertexShaderCode =
        // Light
        "uniform vec4 u_LightAmbient;\n" + 
        "uniform vec4 u_LightDiffuse;\n" + 
        "uniform vec4 u_LightSpecular;\n" + 
        "uniform vec4 u_LightPos;\n" + 

        //Material
        "uniform vec4 u_MaterialAmbient;\n" + 
        "uniform vec4 u_MaterialDiffuse;\n" + 
        "uniform vec4 u_MaterialSpecular;\n" + 
        "uniform float u_MaterialShininess;\n" + 

        // Matrices
        "uniform mat4 u_ModelViewMatrix;\n" +
        "uniform mat4 u_ProjectionMatrix;\n" +
        "uniform mat4 u_NormalMatrix;\n" +

        // vertecies
        "attribute vec4 a_Position;\n" +
        "attribute vec3 a_Normal;\n" +

        "varying vec4 v_Color;\n" +

        "void main() {\n" +
            "vec4 ambient = u_LightAmbient * u_MaterialAmbient;\n" + 

            "vec3 P = vec3(u_ModelViewMatrix * a_Position);\n" + 
            "vec3 L = normalize(vec3(u_LightPos) - P);\n" + 
            "vec3 N = normalize(mat3(u_NormalMatrix) * a_Normal);\n" +
            "vec4 diffuseP = vec4(max(dot(L, N), 0.0));\n" + 
            "vec4 diffuse = diffuseP * u_LightDiffuse * u_MaterialDiffuse;\n" +

            "vec3 S = normalize(L + vec3(0.0, 0.0, 1.0));\n" + 
            "float specularP = pow(max(dot(N,S), 0.0), u_MaterialShininess);\n" +
            "vec4 specular = specularP * u_LightSpecular * u_MaterialSpecular;\n" + 

            //hyouji sareru iro
            "v_Color = ambient + specular + diffuse;\n" + 

            //position
            "gl_Position = u_ProjectionMatrix * u_ModelViewMatrix * a_Position;\n" +
        "}\n";

private final String fragmentShaderCode =
        "precision mediump float;\n" +

        "varying vec4 v_Color;\n" +

        "void main() {\n" +
            "gl_FragColor = v_Color;\n" +
        "}\n"; 
```

绘图功能如下：

```
public Cube() {
    // initialize vertex byte buffer for shape coordinates
    ByteBuffer bb = ByteBuffer.allocateDirect(vertexs.length * 4);
    ByteBuffer nb = ByteBuffer.allocateDirect(normals.length * 4);

    // use the device hardware's native byte order
    bb.order(ByteOrder.nativeOrder());
    nb.order(ByteOrder.nativeOrder());

    // create a floating point buffer from the ByteBuffer
    vertexBuffer = bb.asFloatBuffer();
    normalBuffer = nb.asFloatBuffer();

    // add the coordinates to the FloatBuffer
    vertexBuffer.put(vertexs);
    float div = (float)Math.sqrt(3);
    for(int i = 0; i < normals.length; i++){
        normals[i] /= div;
    }
    normalBuffer.put(normals);

    // set the buffer to read the first coordinate
    vertexBuffer.position(0);
    normalBuffer.position(0);

    // prepare shaders and OpenGL program
    int vertexShader = MyRenderer.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    int fragmentShader = MyRenderer.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // create OpenGL program executables
}

public void draw(float[] mvMatrix, float[] pMatrix) {
    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's aPosition member
    positionHandle = GLES20.glGetAttribLocation(mProgram, "a_Position");
    normalHandle = GLES20.glGetAttribLocation(mProgram,  "a_Normal");
    GLES20.glEnableVertexAttribArray(positionHandle);
    GLES20.glVertexAttribPointer(positionHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false, vertexStride, vertexBuffer);

    GLES20.glEnableVertexAttribArray(normalHandle);
    GLES20.glVertexAttribPointer(normalHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false, vertexStride, normalBuffer);

    modelViewMatrixHandle = GLES20.glGetUniformLocation(mProgram, "u_ModelViewMatrix");
    GLES20.glUniformMatrix4fv(modelViewMatrixHandle, 1, false, mvMatrix, 0);        

    projectionMatrixHandle = GLES20.glGetUniformLocation(mProgram, "u_ProjectionMatrix");
    GLES20.glUniformMatrix4fv(projectionMatrixHandle, 1, false, pMatrix, 0);

    normalMatrixHandle = GLES20.glGetUniformLocation(mProgram, "u_NormalMatrix");
    float[] tmp = new float[16];
    float[] normalMatrix = new float[16];
    Matrix.invertM(tmp, 0, mvMatrix, 0);
    Matrix.transposeM(normalMatrix, 0, tmp, 0);
    GLES20.glUniformMatrix4fv(normalMatrixHandle, 1, false, normalMatrix, 0);

    lightAmbientHandle = GLES20.glGetUniformLocation(mProgram, "u_LightAmbient");
    GLES20.glUniform4f(lightAmbientHandle, 0.2f, 0.2f, 0.2f, 1.0f);
    lightDiffuseHandle = GLES20.glGetUniformLocation(mProgram, "u_LightDiffuse");
    GLES20.glUniform4f(lightDiffuseHandle, 0.5f, 0.5f, 0.5f, 1.0f);
    lightSpecularHandle = GLES20.glGetUniformLocation(mProgram, "u_LightSpecular");
    GLES20.glUniform4f(lightSpecularHandle, 0.0f, 0.0f, 0.0f, 1.0f);
    lightPosHandle = GLES20.glGetUniformLocation(mProgram, "u_LightPos");

    materialAmbientHandle = GLES20.glGetUniformLocation(mProgram, "u_MaterialAmbient");
    materialDiffuseHandle = GLES20.glGetUniformLocation(mProgram, "u_MaterialDiffuse");
    materialSpecularHandle = GLES20.glGetUniformLocation(mProgram, "u_MaterialSpecular");
    materialShininessHandle = GLES20.glGetUniformLocation(mProgram, "u_MaterialShininess");

    // Front
    setMaterial(0.0f, 1.0f, 0.0f, 1.0f);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);

    // Back
    setMaterial(0.0f, 1.0f, 0.0f, 1.0f);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 4, 4);

    // Left
    setMaterial(0.0f, 1.0f, 0.0f, 1.0f);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 8, 4);

    // Right
    setMaterial(0.0f, 1.0f, 0.0f, 1.0f);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 12, 4);

    // Top
    setMaterial(0.0f, 1.0f, 0.0f, 1.0f);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 16, 4);

    // Bottom
    setMaterial(0.0f, 1.0f, 0.0f, 1.0f);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 20, 4);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(positionHandle);
}    

private void setMaterial(float r, float g, float b, float a){
    GLES20.glUniform4f(materialAmbientHandle, r, g, b, a);

    GLES20.glUniform4f(materialDiffuseHandle, r, g, b, a);

    GLES20.glUniform4f(materialSpecularHandle, r, g, b, a);

    GLES20.glUniform4f(materialShininessHandle, r, g, b, a);
}
} 
```

结果图片如下

![在此处输入图像描述](../Images/225e2d78ea615309b14a2299bf37603f.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T20:57:05.160

**---对您的图片的附加答案---**

现在您发布了图片，它看起来不像 alpha 值。它看起来更像*背面剔除*。所以你肯定为顶点做了错误的顺序。你知道剔除吗？请试试这个：

```
GLES20.glDisable(GLES20.GL_CULL_FACE); 
```

比它好看吗？

我认为问题在于，你的脸是在“背面”绘制的，而剔除是一种在“看不见”时避免绘制面的机制，因此如果它们的顺序错误，GL 不会渲染它们。

这可能不是网上最好的解释，但请看这里：

[http://www.altdevblogaday.com/2011/08/03/backface-culling-101/](http://www.altdevblogaday.com/2011/08/03/backface-culling-101/)

脸部顶点的“顺序”很重要。如果你让它们顺时针或逆时针确定OpenGL是否认为它正在渲染背面或正面。(*见 glFrontFace(GLenum 模式);* )

![在此处输入图像描述](../Images/39a2bc05c6298a6d8c5667cea7cc95fb.png)

*我从提到的网站上得到了这张图片。*

如果您的着色器认为它正在渲染背面，则此面会简单地跳过到您通常不需要的安全渲染资源。所以你可以看穿立方体。

您的解决方案是

1.  禁用 backFaceCulling 所以每张脸都会被渲染——即使这会让一切变慢。
2.  *使用 glFrontFace （GLenum 模式）*反转 TheCulling 算法（您可以设置 Gl 应该渲染正面还是背面）。但这可能会导致相同的问题，如果您的立方体中有正面和背面，那么最好的解决方案是：
3.  检查每个面的顶点顺序。正如我提到的网站上大致看到的那样，顶点的顺序需要相同。所以检查它们并修复订​​单。

我认为最后一个工作最多，但最有前途。但如果您不确定这可能是问题所在，请先尝试禁用 BackfaceCulling。如果一切似乎都很好，您仍然可以修复它。

我希望这有帮助。

**---我的原始答案---**

好吧，通过说

```
gl_FragColor = v_Color; 
```

在片段着色器中并在顶点着色器中定义：

```
v_Color = ambient + specular + diffuse; 
```

这意味着，你给你的片段/像素你的光的值。包括阿尔法值。所以当你用它做一些计算时

```
vec4 diffuseP = vec4(max(dot(L, N), 0.0)); 
```

这个因素可能会变得小于 1.0（你的向量的点积）并且因为你将它与你的光相乘，所以每个值都可能变得小于 1.0 最后你的光的 Alpha 值 - >颜色已经变成一个介于 1.0 和 0.0 之间的值，就像光反射本身一样。这可能会导致透明度。

因此，如果您尝试以下操作：

```
gl_FragColor = v_Color.xyz, 1.0; 
```

或后期纹理的 alpha 值，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-06T20:36:07.537

尝试添加 glEnable(GL_DEPTH_TEST)

# php - Zend 模块特定的 ACL

> ID：11864638
> 
> 赞同：0
> 
> 时间：2012-08-08T12:35:04.787
> 
> 标签：php, zend-framework, zend-acl

在我的项目中，大约有 5、6 个模块

```
Ex: Web - Public access, URL - www.abc.com
Admin - admin can access - admin.abc.com (Non Acl)
CP - Specific group can access - cp.abc.com (Non Acl)
pbo - Another group can access - pbo.abc.com (Acl based and implemented recently) 
```

如上所述，我们最近添加了一个名为 PBO 的模块，基于 ACL 插件，

每个模块都有一个特定的引导文件，

但是新模块执行后，其他所有模块都通过ACL插件重定向到PBO模块的默认页面。

权限是这样设置的

```
$this->acl->allow('superAdmin', 'user', array('login','logout'));
$this->acl->allow('superAdmin', 'index', 'index');
$this->acl->allow('superAdmin', 'app', 'index');

$this->acl->allow('admin', 'user', array('index','login','logout','registered'));      
$this->acl->allow('admin', 'index', 'index');
$this->acl->allow('admin', 'app', array('index', 'do-feature', 'do-delete')); 
```

在引导文件中初始化 ACL

```
public function _initAcl()
{
    //Omit the process in CLI mode
    if (php_sapi_name() != 'cli') 
    {        
        $helper = new Nexva_Controller_Action_Helper_AclPbo();
        $helper->setRoles();
        $helper->setResources();
        $helper->setPrivilages();
        $helper->setAcl();

        //Register the ACL plugin - Then it will be called automatically,whenever an     acion is called
        $frontController = Zend_Controller_Front::getInstance(); 
        $frontController->registerPlugin(new Nexva_Plugin_AclPbo());

    }
} 
```

有什么方法可以避免在其他模块中调用 PBO 模块的 ACL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:31:55.487

这是 Zend Framework 1 的问题。

所有模块的引导程序总是为任何给定的模块调用和执行。这就是 Zend Framework 的设计方式。

由于这个问题，有一篇非常好的文章可供阅读，以帮助了解模块引导在 ZF 中的工作原理及其缺点。它是由 Matthew Weier O'Phinney 写的：

[http://mwop.net/blog/234-Module-Bootstraps-in-Zend-Framework-Dos-and-Donts.html](http://mwop.net/blog/234-Module-Bootstraps-in-Zend-Framework-Dos-and-Donts.html)

从那里，这个站点有一个教程，讨论如何设置一个“新的” Bootstrap 类似层的模块特定的解决方案。它还链接到他们从中提取的几个来源，其中大部分都值得一读（是的，有相当多的阅读量）。

[http://offshootinc.com/blog/2011/02/11/modul-bootstrapping-in-zend-framework/](http://offshootinc.com/blog/2011/02/11/modul-bootstrapping-in-zend-framework/)

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:19:18.210

您可以做的一件事是在注册插件之前检查当前模块是否为 PBO

`if($frontController->getRequest()->getModuleName() == 'PBO')
$frontController->registerPlugin(new Nexva_Plugin_AclPbo());`

# django - Django：获取 SelectDateWidget 的每个子选择的值

> ID：11864642
> 
> 赞同：3
> 
> 时间：2012-08-08T12:35:17.827
> 
> 标签：django, widget, django-forms

我的表单有一个非常具体的 HTML 设计，所以我需要它全部用 HTML 编写，而且我不使用默认的表单渲染器。

我在我的 Django 表单中设置了这个 SelectDateWidget。除了 SelectDateWidget 之外，一切正常：如果我的表单无效，我会收集所有相关值并重新填充我的自定义 HTML 字段。问题是我似乎无法在模板中获取 SelectDateWidget 的值。

我尝试了诸如`form.mydate_day.value`,`form.mydate.day_value`之类的东西......但它似乎什么都不包含。

任何人都可以在这件事上帮助我吗？谢谢。

根据要求，型号：

```
class Subscriber(models.Model):
  civilite = models.CharField(max_length=5, verbose_name='Civilite',choices=(('Mlle','Mademoiselle'),('M.','Monsieur'),('Mme','Madame')))
  email = models.EmailField(max_length=255, verbose_name='Email', unique=True)
  nom = models.CharField(max_length=60, verbose_name='Nom')
  prenom = models.CharField(max_length=60, verbose_name='Prenom')
  ville = models.CharField(max_length=50,verbose_name='Ville')
  cp = models.CharField(max_length=5,verbose_name='Code Postal',validators=[RegexValidator(regex='^\d{5}$')])
  date_naissance = models.DateField(auto_now_add=False)
  optin = models.BooleanField(default=True,verbose_name='Optin')
  date_inscription = models.DateField(auto_now_add=True) 
```

表格：

```
class SubscriberForm(ModelForm):
  class Meta:
    model = Subscriber
    widgets = {
      'civilite': forms.RadioSelect(),
      'date_naissance': extras.SelectDateWidget(years=range(1994,1900,-1)),
    } 
```

风景：

```
def index(request):
  if request.method == 'POST':
    form = SubscriberForm(request.POST)
    if form.is_valid():
        form.save()
        return HttpResponseRedirect('/coreg.html')
    else:
    form = SubscriberForm()
  return render(request,'index.html', {'form':form,'days':range(1,31),'months':range(1,12),'years':range(1994,1900,-1)}) 
```

模板：

```
 <label class="lbl" for="jour">Date de naissance :</label>
    <div class="select {% if form.date_naissance.errors  %}error{% endif %}"><span>
      <select name="date_naissance_day" id="jour">
        <option value="--">J</option>
        {% for i in days %}
          <option value="{{i}}" {% if form.date_naissance_day.value == i %}selected{% endif %}>{{i}}</option>
        {% endfor %}
      </select>
    </span></div>
    <div class="select"><span>
      <select name="date_naissance_month" id="mois">
        <option value="--">M</option>
         {% for i in months %}
          <option value="{{i}}" {% if form.date_naissance_month.value == i %}selected{% endif %}>{{i}}</option>
        {% endfor %}
      </select>
    </span></div>
    <div class="select last"><span>
      <select name="date_naissance_year" id="annee">
        <option value="--">A</option>
         {% for i in years %}
          <option value="{{i}}" {% if form.date_naissance_year.value == i %}selected{% endif %}>{{i}}</option>
        {% endfor %}
      </select>
    </span></div>
    <br clear="all" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-28T02:56:11.743

您可以使用 form.data ，例如：

```
{% if form.data.date_naissance_day == i %}selected{% endif %} 
```

# xcode - 在 OSX 上使用仪器分析 ncurses 应用程序

> ID：11864647
> 
> 赞同：1
> 
> 时间：2012-08-08T12:35:33.613
> 
> 标签：xcode, instruments, ncurses

我有一个使用 ncurses 的 C 命令行应用程序，我正在使用 Xcode 4.4 (OSX Lion) 来开发它。到目前为止，我一直在使用 Xcode 构建代码后从终端运行代码。现在我需要分析代码的多线程部分，并且我想为此使用 Instruments。如果我在 Xcode 中运行“配置文件”，它会启动 Instruments，但可能会立即崩溃，原因可能与它在 Xcode 中崩溃的原因相同，即它无法打开终端。如果我关闭代码的所有诅咒部分，它在 Instruments 中运行良好，但显然我没有得到任何输出（对于我来说，跟踪代码进度至关重要）。最后，如果我从终端运行代码并尝试从 Instruments 中附加到进程，我会收到以下消息“附加要求目标使用 CoreFoundation.framework”

谁能向我解释如何做到这一点，即分析代码并同时在终端窗口中查看 curses 输出？

# java - 无法为私有静态最终映射设置新值

> ID：11864650
> 
> 赞同：0
> 
> 时间：2012-08-08T12:35:53.710
> 
> 标签：java, reflection

我正在使用方法

```
 static void setFinalStatic(Field field, Object newValue) throws Exception
   {
      field.setAccessible(true);

      final Field modifiersField = Field.class.getDeclaredField("modifiers");
      modifiersField.setAccessible(true);
      modifiersField.setInt(field, field.getModifiers() & ~Modifier.FINAL);

      field.set(null, newValue);
   } 
```

用于更改`private static final`字段。
但是如果字段有类型`Map`我会得到异常

```
Exception in thread "main" java.lang.IllegalAccessException: Can not set static final java.util.Map field org.hibernate.type.TypeFactory.BASIC_TYPES to java.util.HashMap
    at sun.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:55)
    at sun.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:59)
    at sun.reflect.UnsafeQualifiedStaticObjectFieldAccessorImpl.set(UnsafeQualifiedStaticObjectFieldAccessorImpl.java:59)
    at java.lang.reflect.Field.set(Field.java:657)
    at com.company.tester.Main.setFinalStatic(Main.java:64) 
```

有任何想法吗？

更多代码

```
 Field types = TypeFactory.class.getDeclaredField("BASIC_TYPES");
  types.setAccessible(true);
  Map val = (Map) types.get(null);
  Map newMap = new HashMap(val);
  newMap.put(String.class.getName(), new MyType());
  setFinalStatic(TypeFactory.class.getDeclaredField("BASIC_TYPES"), new HashMap()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:44:49.160

`field.setAccessible(true)`轮流对该字段的所有安全检查。更改其明显的修饰符将无济于事。还有其他一些东西阻止了它的工作。

我不会尝试替换地图，而是尝试更新它。

```
Field types = TypeFactory.class.getDeclaredField("BASIC_TYPES");
types.setAccessible(true);
Object bt = types.get(null);
Field m = bt.getClass().getDeclaredField("m");
m.setAccessible(true);
Map val = (Map) m.get(bt);
val.put(String.class.getName(), new MyType()); 
```

# jakarta-ee - 隐藏空数据表 PrimeFaces

> ID：11864652
> 
> 赞同：0
> 
> 时间：2012-08-08T12:36:01.430
> 
> 标签：jakarta-ee, jsf-2, primefaces

我使用 Primefaces 开发 glassfish 3.1。如果她为空，我需要隐藏一个数据表以显示错误消息。

但我无法在视图中隐藏 DataTable。

任何人都可以给我一个帮助我的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:15:15.780

您可以使用样式属性：

```
style="display:block;" 
```

当找到数据或：

```
style= "display:none"; 
```

当没有找到数据时。

您还可以使用 renderen 属性：

```
<p:dataTable rendered="#{bean.dataFound}" 
```

# javascript - 谷歌驱动器：通过 javascript 访问 webContentLink

> ID：11864657
> 
> 赞同：2
> 
> 时间：2012-08-08T12:36:14.753
> 
> 标签：javascript, google-drive-api

我可以在 Google Drive 上下载文本文件的元数据，但我无法通过 XMLHttpRequest (XMLHttpRequest.status = 0) 访问 webContentLink。不过，具有相同 webContentLink url 的 window.open(url) 调用可以正常工作。似乎没有为 webContentLink 启用 CORS。

```
var clientId = '00000000000000';
var apiKey = 'AAAAAAAAAAAAAAAAAA';
var scopes = 'https://www.googleapis.com/auth/drive';

function loadDoc(url) {
    //window.open(url);
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    xmlhttp.onreadystatechange = function() {
        alert("readyState = " + xmlhttp.readyState + " status = " + xmlhttp.status);
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            //... do something
        }
    }
    xmlhttp.open("GET", url, true);
    var myToken = gapi.auth.getToken();
    xmlhttp.setRequestHeader("Referer", "http://mydomain");
    xmlhttp.setRequestHeader("Accept", "text/x-tex");
    xmlhttp.setRequestHeader("Content-Type", "text/x-tex");
    xmlhttp.responseType = 'arraybuffer';
    xmlhttp.overrideMimeType("text/plain");
    xmlhttp.setRequestHeader('Authorization', 'Bearer ' + myToken.access_token);
    xmlhttp.send();
}

function loadMetaData(url) {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var metaData = xmlhttp.responseText;
            var index = metaData.search('"webContentLink"');
            if (index != -1) {
                var i1 = metaData.indexOf('"', index + 17);
                var i2 = metaData.indexOf('"', i1 + 1);
                var fileName = metaData.slice(i1 + 1, i2);
                loadDoc(fileName);
            }
        }
    }
    xmlhttp.open("GET", url, true);
    var myToken = gapi.auth.getToken();
    xmlhttp.setRequestHeader('Authorization', 'Bearer ' + myToken.access_token);
    xmlhttp.send();
}

// A simple callback implementation.
function pickerCallback(data) {
    if (data.action == google.picker.Action.PICKED) {
        var fileId = data.docs[0].id;
        var url = 'https://www.googleapis.com/drive/v2/files/' + fileId;
        loadMetaData(url);
    }
} 
```

因此，函数 loadMetaData(url) 可以正常工作，而函数 loadDoc(url) 不能。我是否正确，这是由于未为 webContentLink 设置 CORS，将来是否有可能改变？

谢谢，丹尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T16:05:40.923

如果通过 XHR 下载文件，您应该使用它`downloadUrl`并提供访问令牌`Authorization`作为您已经在做的标头。

仅支持 cookie 身份验证，并且在`webContentLink`从 XHR 检索时可能会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T08:53:14.527

编辑：谷歌 api 已经改变，现在需要一个 oauthToken，我已经添加了。

解决了！感谢[阿兰](https://stackoverflow.com/users/1106381/alain)。您可以在下面找到正确的代码。可以在[此处](http://dannyruijters.nl/webtex/googledrive.html)找到一个工作示例。

```
var clientId = '1234567890';
var scopes = 'https://www.googleapis.com/auth/drive';
var oauthToken;

function getData(url, callback) {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            callback(xmlhttp.responseText);
        }
    }
    xmlhttp.open('GET', url, true);
    var myToken = gapi.auth.getToken();
    xmlhttp.setRequestHeader('Authorization', 'Bearer ' + myToken.access_token);
    xmlhttp.send();
}

// Create and render a Picker object
function createPicker() {
    var picker = new google.picker.PickerBuilder()
        .setAppId(clientId)
        .setOAuthToken(oauthToken)
        .addView(google.picker.ViewId.DOCS)
        .setCallback(pickerCallback)
        .build();
    picker.setVisible(true);
}

// A simple callback implementation.
function pickerCallback(data) {
    if (data.action == google.picker.Action.PICKED) {
        var fileId = data.docs[0].id;
        var url = 'https://www.googleapis.com/drive/v2/files/' + fileId;
        getData(url, function(responseText) {
            var metaData = JSON.parse(responseText);
            getData(metaData.downloadUrl, function(text) {
                //Do something with text...
            });
        });
    }
} 
```

# postgresql - 如何在将新记录插入 postgresql 表时调用序列？

> ID：11864662
> 
> 赞同：72
> 
> 时间：2012-08-08T12:36:29.917
> 
> 标签：postgresql, postgresql-9.1

如何在将新行插入表时调用 postgresql 序列？

我想做这样的事情：

```
insert into biz_term(
  biz_term_id, 
  biz_term_name, 
  ) 
values(SELECT nextval(idsequence)',
'temp'
); 
```

我想这样做是因为当我尝试将新记录插入`biz_term`表中时`idsequence`，不会直接调用序列。如何调用它？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-08-08T13:01:02.333

你几乎明白了。你不需要那里的 SELECT ：

```
insert into biz_term(
  biz_term_id, 
  biz_term_name, 
) 
values(
 nextval('idsequence'),
 'temp'
); 
```

您没有将 biz_term_id 指定为`serial`（或`bigserial`）自动为您处理的任何原因？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-21T19:50:56.233

尽管这是一个有点老的话题，但我想指出一个很好的理由`BIGINT`，反对`BIGSERIAL`是如果你正在使用休眠。这是文章： [https ://vladmihalcea.com/postgresql-serial-column-hibernate-identity/](https://vladmihalcea.com/postgresql-serial-column-hibernate-identity/)

正如文章指出的那样，

> 使用 SEQUENCE 生成器是更好的选择，因为可以在执行 INSERT 语句之前生成标识符

发布答案，因为我还没有资格发表评论：/。如果您觉得不合适，我会提前道歉。

# model-view-controller - 如何在控制器中呈现另一个动作的视图？我使用 Kohana 3.0.11

> ID：11864666
> 
> 赞同：0
> 
> 时间：2012-08-08T12:36:37.077
> 
> 标签：model-view-controller, kohana, kohana-3

我需要对控制器中的三个不同操作使用相同的视图。如何为所有操作呈现一个视图？我用谷歌搜索但没有发现任何有用的东西......重要的是我使用的是 Kohana 3.0.11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:43:54.407

在每个动作中创建视图有什么不好？

```
action_1()
{
   $view = View::factory('something');
   // rest of code
}
action_2()
{
   $view = View::factory('something');
   // rest of code
}
action_3()
{
   $view = View::factory('something');
   // rest of code
} 
```

或者，您可以在操作之前将视图存储在基本控制器中并在子控制器中访问它：

```
class Controller_Base
{
   protected $_view;

   public function before()
   {
      $this->_view = View::factory('something');
   }
}

class Controller_Yours exnteds Controller_Base
{
   public function action_1()
   {
      // use $this->_view to get it
   }

   public function action_2()
   {
      // use $this->_view to get it
   }

   public function action_3()
   {
      // use $this->_view to get it
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:28:15.670

您可以创建一个方法并返回视图

```
...
private function myView($param1, $param2=NULL) {
    return View::factory('myView')
        ->bind('param1', $param1)
        ->bind('param2', $param2);
}

public function action_view1() {
    return $this->myView('param1');
}

public function action_view2() {
    return $this->myView('param1', 'param2');
} 
```

# javascript - 如何在 YII 框架的 CJuiAutocomplete 中建议多个列？

> ID：11864669
> 
> 赞同：1
> 
> 时间：2012-08-08T12:36:48.810
> 
> 标签：javascript, jquery, yii

我正在使用 CJuiAutomcoplete 小部件。

一切正常，但我想在建议列表框中显示多个列。

我为json结构中的“value”选项连接字符串，但我想要的是ti有多个列。

我发现 Jquery UI 使用 li 和 ul html 标签...

我不知道如何创建带有列的列表框！

任何想法 ？

此致

尼古拉斯

编辑：我找到了我需要的东西...... [http://jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)

但是因为我使用 yii 我不知道如何添加块：

* * *

```
 .data( "autocomplete" )._renderItem = function( ul, item ) {
      return $("<li></li>" )
     .data( "item.autocomplete", item )
     .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
     .appendTo( ul ); }; 
```

* * *

因为我对 jQuery 几乎一无所知，所以我不明白“.data”方法的作用。

再次问候...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:59:37.450

我已经通过覆盖内置处理程序来解决这个问题：

```
$controller->widget('zii.widgets.jui.CJuiAutoComplete', array(
    ...
    'source'    => 'js: foreignKeyQuery',  //overriding
    'options'   => array( //passing params from Yii view script
        'delay' => 700,
        'sourceUrl' => Yii::app()->request->baseUrl.'/ajax/search/',
    ),
    ...
)); 
```

像这样的 JS 处理程序*（不要忘记将其包含在 View 脚本中）*：

```
function foreignKeyQuery(request, response)
{
    var params = {
        'term': request.term,  //default param
        'protest': 'Pussy Riot'  //free params
        ...
    };  //Of course you may get params in any way, and using "this"

    $.ajax(this.options.sourceUrl, {
            type: 'post',
            dataType: 'json',
            data: params,
            success: response
        });
} 
```

框架只是一种工具。没有人限制你尽可能多地使用 JS。

# java - Java Applet - 可以将数据插入 MySQL 数据库吗？

> ID：11864671
> 
> 赞同：0
> 
> 时间：2012-08-08T12:36:51.930
> 
> 标签：java, mysql, database, applet, japplet

所以我有一个 JApplet，它最初是一个独立的程序。为了扩展它，我将它转换为 JApplet。

我现在要做的是每次将数据提交到 JApplet 我希望将内容插入 MySQL 数据库。现在，我不知道如何做到这一点，或者即使可以做到，但我想试一试！

这个想法是我将有一个单独的 PHP 页面来显示插入到 JApplet 表单中的数据。

任何解决方案、评论或指针都会非常方便，因为我以前没有这样做过！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:39:28.200

根据我对整个概念的理解，Applet 是客户端可执行文件。因此，基本上，如果您的小程序将与服务器建立通信（最好不是直接的 MySQL 连接，而是通过 REST API 或其他类型的客户端-服务器通信），您可以插入数据。否则，要直接从您的 Java 代码处理您的 MySQL 数据库 - 您可以将您的程序转换为 servlet 并在服务器上的应用程序容器中运行它。

# git - 链接版本控制存储库中的文件夹

> ID：11864672
> 
> 赞同：1
> 
> 时间：2012-08-08T12:36:54.877
> 
> 标签：git, svn, version-control

我的项目中有以下情况：

将有 2 个源代码存储库，但是每个源代码存储库都应该具有用于​​某些代码部分的“共享”区域（可能不止一个）。

让我们假设存储库及其文件夹（以及这些文件夹中的文件）的以下结构。

回购1

*   文件夹A
*   文件夹B
*   文件夹C

回购2

*   文件夹A
*   文件夹D
*   文件夹E

“folderA”应该包含完全相同的文件“副本”。因此，当我对 Repo1/folderA 进行一些更改，然后签出/更新 Repo2/folderA 时，我应该能够看到这些更改。当然，如果它可以在相反的方向上同样工作，那就太好了。

不幸的是，我无法以另一种方式构建源代码并创建某种共享库。

我正在寻找可以帮助我以最佳方式解决此问题的 VCS（SVN、Git、...）？你有这种设置的经验吗？你能推荐一些东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:57:45.463

如果您使用的是 Subversion，那么您可以使用[externals](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-externals.html)，这将允许您在存储库中拥有一个包含共享代码的文件夹，并且您的两个项目文件夹中的每个主干都将其 externals 属性设置为指向此共享存储库位置。

这是两种方式，因此您可以对共享文件夹进行更改，当您更新任一项目文件夹时它们将被拾取，或者您可以从本地项目文件夹进行更改，它们将被提交到共享存储库文件夹。

但是，您应该注意外部[问题](https://stackoverflow.com/questions/338824/are-subversion-externals-an-antipattern)。

另一种选择可能是将共享代码的源完全分离到第三方库中，然后使用 NuGet 将该库轻松部署到您的各种项目中。[例如， TeamCity](http://www.jetbrains.com/teamcity/)可以在提交共享库代码时为您构建 NuGet 包（并充当 NuGet 包服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:45:07.930

使用 git，您可以创建仅包含共享文件（文件夹 A）的第三个（共享）存储库。然后 Repo1 和 Repo2 都可以将共享 repo 包含为[submodule](http://git-scm.com/book/en/Git-Tools-Submodules)，因此：

```
Repo1/folderA ->
     /folderB    \
     /folderC     \
                   -> Repo3/folderA
                  /
Repo2/folderA ->-
     /folderD
     /folderE 
```

缺点：

*   存储库 1 和 2 的子模块链接本身是版本化的，因此如果您希望它们查看存储库 3 的 HEAD 的最新更改，则必须显式更新两个存储库中的文件夹 A。
*   如果你有 repo 1 和 2 的工作副本，你最终也会得到 repo3 的两个嵌套副本，它们不一定是同步的

如果重要的话，好处是您可以独立授予对所有三个存储库的读写访问权限。

* * *

它当然更容易使用

```
Repo/shared/folderA
    /project1/folderB
              ...
    /project2/folderD
              ... 
```

如果可能的话（构建系统也可能更容易运行）。但是，您确实失去了独立许可您的两个项目的能力。

# python - 如何从特定目录导入文件，而不是在 Python 中使用 os.path

> ID：11864673
> 
> 赞同：0
> 
> 时间：2012-08-08T12:37:03.727
> 
> 标签：python, variables, directory

到目前为止，我的代码是这样的：

```
from glob import glob
shakedir='D:\report\shakeall'
from shakedir import isfile
def countwords(fp):
   with open(fp) as fh:
       return len(fh.read().split())
print "There are" ,sum(map(countwords, filter(isfile, glob("*.txt") ) ) ), "words in the files." 
```

问题是这段代码不起作用:)

我不习惯 Python 语法，所以我什么都试过了。

我想要的是，我希望这个脚本从特定目录导入文本文件。

不是来自`os.path`我的 .py 文件所在的 .

我想从中导入`D:\report\shakeall`，但我不能。而已。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:53:57.957

您也可以`glob`为此目的单独使用函数：

```
from glob import glob

pattern = "D:\\report\\shakeall\\*.txt"
filelist = glob(pattern) 
```

然后在该文件列表上做任何你想做的事情。您的方式现在应该可行：

```
def countwords(fp):
    with open(fp) as fh:
        return len(fh.read().split())

print "There are" ,sum(map(countwords, filelist))), "words in the files." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:51:28.597

如果我正确理解您的问题，您需要的是：

```
shakedir = "d:\\report\\shakeall"
..
print "There are" ,sum(map(countwords, filter(isfile, glob(shakedir + "\\*.txt"))))), ".."
                                                           ^^^^^ It can take directories too.. 
```

该行：

```
from shakedir import isfile 
```

对我没有任何意义。并为 isfile 提供一个实现，或者使用来自 os 模块的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:49:45.130

**反斜杠**表示字符串文字中的*转义*。尝试任一

```
"d:/report/shakeall" 
```

或者

```
"d:\\report\\shakeall" 
```

理想情况下：

```
os.path.join("d:", "report/", "shakeall") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:42:33.300

您可以使用`os.walk("pathname")`获取某个目录中的文件列表。 [http://docs.python.org/library/os#os.walk](http://docs.python.org/library/os#os.walk)

# php - 以编程方式将礼物消息设置为现有订单

> ID：11864674
> 
> 赞同：4
> 
> 时间：2012-08-08T12:37:18.140
> 
> 标签：php, magento

我正在寻找一些代码以在 Magento 中以编程方式向现有订单添加礼物消息。

=====================

更新

我喜欢版主（@Charles 等）将这个问题标记为不真实，即使它有 228 次观看 - 显然没有人真正遇到同样的问题......哈哈，很高兴看到每个阅读它的人的投票。你能具体到什么程度？哈哈

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T16:10:59.773

```
$giftMessage = Mage::getModel('giftmessage/message'); 
$giftMessage->setCustomerId($customer->getId()); 
$giftMessage->setSender('sender']); 
$giftMessage->setRecipient('recepient'); 
$giftMessage->setMessage('message'); 
$giftObj = $giftMessage->save(); 
$order->setGiftMessageId($giftObj->getId()); 
$order->save(); 
```

# python - 文件布局为python中的表格

> ID：11864675
> 
> 赞同：0
> 
> 时间：2012-08-08T12:37:19.910
> 
> 标签：python, file, layout, format

Python（或其他）中是否有一种简单的方法可以很好地格式化一个看起来像这样的文件：

```
Type    Count       Number
aaa 26 (-15)    5963206 
bbb 0 (0)    
ccc 347 (170)   4831807 4831907 
ddd 0 (0)    
eee 5 (2)   4831920 4831921 4831922 4831923 5695118 5757377 
fff 10 (10) 
```

我有 3 列分隔 bu 制表符（或空格、逗号或其他）我想要类似于此的输出：

```
+------------------------------------+
| Type  | Count    |  Number         |
+------------------------------------+
|aaa    | 26 (-15) | 5963206         |
|bbb    | 0 (0)    |                 |
|ccc    | 347 (170)| 4831807 4831907 |
|ddd    | 0 (0)    |                 |
|eee    | 5 (2)    | 4831920 4831921 |
|fff    | 10 (10)  |                 |
-------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:41:26.840

您可能可以为此目的使用[Asciitable 。](http://cxc.harvard.edu/contrib/asciitable/)我认为类似`asciitable.FixedWidth`的事情`delimiter='|'`

# sharepoint - 您能否将一个工作流链接到两个不同的 sharepoint 2007 站点

> ID：11864676
> 
> 赞同：0
> 
> 时间：2012-08-08T12:37:20.037
> 
> 标签：sharepoint, workflow, task

我们的公司有两个不同的 SharePoint 2007 站点，并希望创建一个将两者连接起来的工作流。基本上，我们希望将工作流连同它的任务列表放在两个站点上。当工作流在一个站点上更新时，它也应该自动更新另一个站点。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:08:34.177

工作流分配给列表、CT 或站点，因此您很可能没有一个工作流可以完成您想要的工作。

在不知道你实际上在做什么的情况下，我能做的就是猜测。

您的工作流可以修改另一个站点上的其他项目，以便当您在站点 1 上完成任务时，工作流会更新站点 2。如果您在站点 2 上完成任务，它将更新站点 1 上的任务。（如果站点是在同一个农场，但通常你想做的事情是因为你有多个农场）

为此，您的工作流程将需要一个关联字段，您将在该字段中输入其他站点的 url。

如果您可以提供有关为什么需要 2 个站点的更多信息，您可能会得到一些更好的答案。

# php - 如何使用 PHP GD 使导入的图像透明？

> ID：11864678
> 
> 赞同：0
> 
> 时间：2012-08-08T12:37:33.430
> 
> 标签：php, image, transparency, gd

我创建了一个 PNG 图像（createimagefrompng()），但透明度不起作用。

## 如何得到这份工作？

编辑：我的脚本：

```
<?php
header("Content-type: image/png");
$bg = imagecreatefrompng('banner_bg.png'); // Background Image
$image = imagecreatefrompng('http://<link>/image.png');
$wit = imagecolorallocatealpha($bg, 255, 255, 255, 127);
imagecolortransparent($bg, $wit);
imagealphablending($obe, false);

imagecopy($image, $bg, 0, 0, 20, 13, 80, 40);

imagegif($bg);

imagedestroy($bg);
imagedestroy($image);
?> 
```

*- - - 对不起，我的英语不好。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:40:30.290

调用 createimagefrompng() 后，您需要调用：

```
imagealphablending($img, true); // setting alpha blending on
imagesavealpha($img, true); // save alphablending setting (important) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:40:46.463

您将需要使用 定义透明颜色[`imagecolortransparent()`](http://php.net/manual/en/function.imagecolortransparent.php)。此外，您将需要使用[`imagealphablending()`](http://www.php.net/manual/en/function.imagealphablending.php)来设置 alpha 搅拌器。

# android - 如何使 stackview 的项目自动调整大小以适应可调整大小的小部件？

> ID：11864681
> 
> 赞同：2
> 
> 时间：2012-08-08T12:37:40.183
> 
> 标签：android, android-widget, stackview

我从 android 开发人员示例中测试了 stackwidget，并将小部件修改为可调整大小。但是发生的事情是，当我调整小部件的大小时，项目没有调整大小，而只是在项目之间增加了更多空间。如何使项目大小适应可调整大小的小部件大小？我在 youtube 小部件上看到，该项目能够这样做。谁能告诉我该怎么做？谢谢你。

# powershell - 如何将 [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer 与来自 Powershell 的凭据一起使用

> ID：11864682
> 
> 赞同：2
> 
> 时间：2012-08-08T12:37:45.760
> 
> 标签：powershell, tfs

我必须提供哪种凭据才能使其正常工作

```
$tfsServer = [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer($basePath,$credential) 
```

我试过了：

```
$credential = New-Object System.Management.Automation.PsCredential($user,$password) 
```

和

```
$credential = New-Object System.Net.NetworkCredential($user, $password, $domane) 
```

并且总是得到

```
Für "GetServer" und die folgende Argumenteanzahl kann keine Überladung gefunden werden: "2".
Bei Zeile:18 Zeichen:86
+ $tfsServer = [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer <<<< ($basePath,$credential)
    + CategoryInfo          : NotSpecified: (:) [], MethodException
    + FullyQualifiedErrorId : MethodCountCouldNotFindBest 
```

我想用

```
TeamFoundationServerFactory.GetServer Method (String, ICredentialsProvider) 
```

参看。[http://msdn.microsoft.com/en-us/library/bb136201%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/bb136201%28v=vs.80%29.aspx)

背景是，我想在远程 PowerShell 会话中调用它，出于某种原因，我不明白

```
$tfsServer = [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer($basePath) 
```

产量

“TF30063：您无权访问 mytfs\MccCollection。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:29:22.300

以下代码有效：

```
Add-Type -Path "C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.VersionControl.Client.dll"
Add-Type -Path "C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.WorkItemTracking.Client.dll"
Add-Type -Path "C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.Client.dll"

$Assem = ("Microsoft.TeamFoundation.Client, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")

$Source =  @"
using System;
using System.Collections.Generic;
using System.Text;
using  Microsoft.TeamFoundation.Client;
using System.Net;
public class ConnectByImplementingCredentialsProvider : ICredentialsProvider
    {
        public ICredentials GetCredentials(Uri uri, ICredentials iCredentials)
        {
            return new NetworkCredential("myuser", "myPassword", "mydomain");
        }

        public void NotifyCredentialsAuthenticated(Uri uri)
        {
            throw new ApplicationException("Unable to authenticate");
        }
    }
"@

Add-Type -ReferencedAssemblies $Assem -TypeDefinition $Source -Language CSharp 

$basePath = "http://mytfs:8080/tfs/MyCollection"
$tfsServer = [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer($basePath, (New-Object ConnectByImplementingCredentialsProvider) )
$tfsServer.EnsureAuthenticated() 
```

第一次执行时，`$tfsServer.EnsureAuthenticated()`会引发错误，但之后会通过身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-04T14:12:59.747

正如@Berns_k 在他的回答中显示的那样，`TeamFoundationServerFactory`期望实现。`ICredentialsProvider`如果您已经拥有凭据，则应该使用不同的方式来实例化您的`TfsTeamProjectCollection`：

```
TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(
    new Uri("http://yourserver:8080/tfs/Collection"),
    new NetworkCredential("myuser", "myPassword", "mydomain");
); 
```

或在 powershell 中：

```
$cred = New-Object NetworkCredential("myuser", "myPassword", "mydomain")
$tpc = New-Object Microsoft.TeamFoundation.Client.TfsTeamProjectCollection
(
     $basePath,
     $cred
) 
```

这样您就不需要创建凭据提供程序，并且在第一次调用`EnsureAuthenticated`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T14:07:38.593

您错误地调用新对象来创建凭据

```
$Username = "domain\username"
$Password = ConvertTo-SecureString ‘MySekurePassw0rd42!’ -AsPlainText -Force
$Cred = New-Object System.Management.Automation.PSCredential $username,$Password 
```

# objective-c - 改变 UIBarButtonItem 的位置

> ID：11864683
> 
> 赞同：1
> 
> 时间：2012-08-08T12:37:49.260
> 
> 标签：objective-c, ios, xcode, uibarbuttonitem

我正在开发一个 iPad 项目，我想同时处理纵向和横向两种模式。

**当我进入横向模式时，`UIBarButtonItem`不会改变位置。**有没有办法移动这个按钮并将其放在栏的右侧？

肖像 ：

![在此处输入图像描述](../Images/db7eee05477288ba32be2fb093e8936a.png)

景观 ：

![在此处输入图像描述](../Images/2a62a4340dee7762ade80561a952f9b8.png)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:13:49.413

我**解决**了这样的问题：

在`willAnimateRotationToInterfaceOrientation`我写的方法中：

```
if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight){
        //Change the position of the profil button
        [self changeProfilButtonOrientation];   
    }else if (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown || toInterfaceOrientation == UIInterfaceOrientationPortrait){

    } 
```

还有我的`changeProfilButtonOrientation`方法

```
-(void) changeProfilButtonOrientation{
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [self.toolBar setItems:[NSArray arrayWithObjects:flexibleSpace,profilButton, nil]];
} 
```

**它有效:-)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:53:34.977

我认为目前的位置设置如下：

![ss](../Images/2cc94f562002fdb81ef2d11a3173cbd2.png)

在此设置下**，左边距的长度**采用横向模式。所以你必须设置**右边距的长度，**让按钮放在导航栏的右端。

您最好将设置设置如下：

![ss](../Images/48c361b39fba4ecce55ee9cc0e30a1d7.png)

**您可以通过尺寸检查**器编辑这些设置（请自行查看）。

我的这个建议对你有帮助。

# html - 一行图像后无法强制换行

> ID：11864686
> 
> 赞同：3
> 
> 时间：2012-08-08T10:35:20.473
> 
> 标签：html, css

在一篇博文中（对于[Cooking Stackexchange 博客](http://cooking.blogoverflow.com)，一个只有几个插件的普通 WordPress 实例），我插入了三个图像，对齐到“左”，并希望它们占据自己的行。我希望文本从它们下面开始。

无论我尝试什么，（我手动插入了您在代码中看到的`<p>`,`<br>`和`<div>`标签）文本从与图像相同的行开始，看起来很糟糕。我能做些什么？

![错误的布局](../Images/54f3ae1754595579d8ff5dc1c2b00ed2.png)

产生上面截图的代码：

```
<p> I expected a bigger difference between these 3 methods. The silicone mat browned the cookies a bit
less than the other methods – so it can provide a little insurance if
you’re afraid of burnt cookies. </p> 
<div><img class="wp-image-870 alignleft" style="margin-left: 2px; margin-right: 2px;" title="baking sheet cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3784-225x300.jpg" alt="Cookies baked on baking sheet" width="225" height="300" /><img class="wp-image-869 alignleft" style="margin-left: 2px; margin-right: 2px;" title="silpat cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3787-225x300.jpg" alt="" width="225" height="300" /><img class="alignleft size-medium wp-image-868" style="margin-left: 2px; margin-right: 2px;" title="parchment paper cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3790-225x300.jpg" alt="" width="225" height="300" /><br/></div>
&nbsp;
<p>I’m going to stick with parchment paper, because it offers one big
advantage over the bare sheet and silicone mat: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:58:43.463

您需要在`<img />`强制`<div />`正确计算高度之后清除浮动。

为此，请添加`style="overflow:hidden;`到开始`<div>`标记，因此更新后的代码将如下所示：

```
<p> I expected a bigger difference between these 3 methods. The silicone mat browned the cookies a bit less than the other methods &ndash; so it can provide a little insurance if you're afraid of burnt cookies. </p>

<div style="overflow:hidden;">
    <img class="wp-image-870 alignleft" style="margin-left: 2px; margin-right: 2px;" title="baking sheet cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3784-225x300.jpg" alt="Cookies baked on baking sheet" width="225" height="300" />
    <img class="wp-image-869 alignleft" style="margin-left: 2px; margin-right: 2px;" title="silpat cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3787-225x300.jpg" alt="" width="225" height="300" />
    <img class="alignleft size-medium wp-image-868" style="margin-left: 2px; margin-right: 2px;" title="parchment paper cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3790-225x300.jpg" alt="" width="225" height="300" />
</div>

<p>I'm going to stick with parchment paper, because it offers one big advantage over the bare sheet and silicone mat:</p> 
```

您可以在此处找到有关花车的更多详细信息：http: [//css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:59:05.993

添加`clear:both`到该部门的 CSS 样式。

另外，为什么不为该分区中的图像添加一个类，那么您将不必使用`style=""`内联样式，如果您决定将来想要 3px 的边距，您只需在样式表中更改它，而不必返回所有以前的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T11:01:03.180

试试这个 - 不需要清除，图像也会水平显示：

```
<p>I expected a bigger difference between these 3 methods. The silicone mat browned the cookies a bit less than the other methods – so it can provide a little insurance if you’re afraid of burnt cookies.</p> 
<p style="text-align: center;"><img class="wp-image-870 alignleft" title="baking sheet cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3784-225x300.jpg" alt="Cookies baked on baking sheet" width="225" height="300" /><img class="size-medium wp-image-868 alignright" title="parchment paper cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3790-225x300.jpg" alt="" width="225" height="300" /><img class="wp-image-869" title="silpat cookies" src="http://cooking.blogoverflow.com/files/2012/08/IMG_3787-225x300.jpg" alt="" width="225" height="300" /></p>
<p>I’m going to stick with parchment paper, because it offers one big advantage over the bare sheet and silicone mat:</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:44:11.437

给`p`一个`min-width`以避免非常短的孤儿：

```
p {
    min-width: 10em;
} 
```

# java - 如何使用 AES 加密创建 Java 密钥库 (.jks) 文件

> ID：11864696
> 
> 赞同：2
> 
> 时间：2012-08-08T12:38:26.963
> 
> 标签：java, cryptography, bouncycastle, jks

阅读 Oracle 文档，我看到默认情况下 JKS 文件使用`PBEWithMD5AndTripleDES`. 虽然单独的DES让我感到不安，但MD5点亮了一个大红灯。我想使用`PBEWithSHA256And256BitAES-CBC-BC`或`PBEWithSHA256And128bitAES-CBC-BC`加密私钥。

我是否必须编写新的 Cryptography Service Provider 来实现整个 KeyStore 接口，或者是否可以对 KeyStore 的创建进行参数化（使用纯 java 或 BouncyCastle）？

**编辑：** 一点背景。

我知道 3DES 没有损坏，就像 MD5 用作 KDF（或在 PBE 中）一样。问题是，这就是*现在*的情况。据我们所知，MD5可能会被打破到明天MD4被打破的水平。我的应用程序寿命至少为 10 年，而且很可能更长。不知何故，在这 10 年之后，我没有看到人们仅仅因为它可能不安全而深入研究*工作加密代码。*只需查看密码泄露的最后几起重大“事故”，看看发生这种情况的可能性有多大，这对于任何看到原始数据库的人来说都是显而易见的事情。

话虽这么说：NSA 加密套件 B 只允许使用 AES 进行任何类型的对称加密。NIST 仅列出 HMAC 和 KDF 使用的 SHA-1 和 SHA-2 算法，*而不推荐*使用 SHA-1 。Suite B 仅允许*使用*SHA-2 哈希函数。这些算法是公开可用的，那么我为什么不应该使用它们呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:46:57.487

最后，我使用了 PKCS#8 加密文件`PBEWithSHA256And256BitAES-CBC-BC`

**加密：**

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.security.AlgorithmParameters;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.SecureRandom;
import java.security.Security;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.InvalidParameterSpecException;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.EncryptedPrivateKeyInfo;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.PBEParameterSpec;

import org.bouncycastle.asn1.bc.BCObjectIdentifiers;

public class EncodePKCS8 {

/**
 * @param args
 * @throws NoSuchAlgorithmException 
 * @throws InvalidKeySpecException 
 * @throws NoSuchPaddingException 
 * @throws InvalidAlgorithmParameterException 
 * @throws InvalidKeyException 
 * @throws BadPaddingException 
 * @throws IllegalBlockSizeException 
 * @throws InvalidParameterSpecException 
 * @throws IOException 
 * @throws NoSuchProviderException 
 */
public static void main(String[] args) throws NoSuchAlgorithmException,
InvalidKeySpecException, NoSuchPaddingException, InvalidKeyException,
InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException,
InvalidParameterSpecException, IOException, NoSuchProviderException
{
    // before we can do anything with BouncyCastle we have to register its provider
    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

    String password = "Very long and complex password";

    // generate RSA key pair
    KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA");
    keyPairGenerator.initialize(2048);
    KeyPair keyPair = keyPairGenerator.genKeyPair();

    byte[] encryptedPkcs8 = encryptPrivateKey(password, keyPair);

    FileOutputStream fos = new FileOutputStream("privkey.p8");
    fos.write(encryptedPkcs8);
    fos.close();

    return;
}

private static byte[] encryptPrivateKey(String password, KeyPair keyPair)
    throws InvalidKeyException, NoSuchAlgorithmException, NoSuchProviderException,
    InvalidKeySpecException, NoSuchPaddingException,
    InvalidAlgorithmParameterException, IllegalBlockSizeException,
    BadPaddingException, InvalidParameterSpecException, IOException
{
    int count = 100000; // hash iteration count, best to leave at default or increase
    return encryptPrivateKey(password, keyPair, count);
}

/**
 * 
 * @param password
 * @param keyPair
 * @param count
 * @return PKCS#8 encoded, encrypted keyPair
 * @throws NoSuchAlgorithmException
 * @throws NoSuchProviderException
 * @throws InvalidKeySpecException
 * @throws NoSuchPaddingException
 * @throws InvalidKeyException
 * @throws InvalidAlgorithmParameterException
 * @throws IllegalBlockSizeException
 * @throws BadPaddingException
 * @throws InvalidParameterSpecException
 * @throws IOException
 */
private static byte[] encryptPrivateKey(String password, 
        KeyPair keyPair, int count) throws NoSuchAlgorithmException,
        NoSuchProviderException, InvalidKeySpecException,
        NoSuchPaddingException, InvalidKeyException,
        InvalidAlgorithmParameterException, IllegalBlockSizeException,
        BadPaddingException, InvalidParameterSpecException, IOException
{
    // extract the encoded private key, this is an unencrypted PKCS#8 private key
        byte[] encodedprivkey = keyPair.getPrivate().getEncoded();

        // Use a PasswordBasedEncryption (PBE) algorithm, OID of this algorithm will be saved
        // in the PKCS#8 file, so changing it (when more standard algorithm or safer
        // algorithm is available) doesn't break backwards compatibility.
        // In other words, decryptor doesn't need to know the algorithm before it will be
        // able to decrypt the PKCS#8 object.
        String encAlg = BCObjectIdentifiers.bc_pbe_sha256_pkcs12_aes256_cbc.getId();

        SecureRandom random = new SecureRandom();
        byte[] salt = new byte[16];
        random.nextBytes(salt);

        // Create PBE parameter set
        PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, count);
        PBEKeySpec pbeKeySpec = new PBEKeySpec(password.toCharArray());
        SecretKeyFactory keyFac = SecretKeyFactory.getInstance(encAlg, "BC");
        SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);

        Cipher pbeCipher = Cipher.getInstance(encAlg, "BC");

        // Initialize PBE Cipher with key and parameters
        pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);

        // Encrypt the encoded Private Key with the PBE key
        byte[] ciphertext = pbeCipher.doFinal(encodedprivkey);

        // Now construct  PKCS #8 EncryptedPrivateKeyInfo object
        AlgorithmParameters algparms = AlgorithmParameters.getInstance(encAlg, "BC");
        algparms.init(pbeParamSpec);
        EncryptedPrivateKeyInfo encinfo = new EncryptedPrivateKeyInfo(algparms, ciphertext);

        // DER encoded PKCS#8 encrypted key
        byte[] encryptedPkcs8 = encinfo.getEncoded();

        return encryptedPkcs8;
    }
} 
```

**解密：**

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.security.AlgorithmParameters;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.Key;
import java.security.KeyFactory;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.Security;
import java.security.interfaces.RSAKey;
import java.security.interfaces.RSAPrivateCrtKey;
import java.security.interfaces.RSAPublicKey;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.KeySpec;
import java.security.spec.RSAPublicKeySpec;

import javax.crypto.Cipher;
import javax.crypto.EncryptedPrivateKeyInfo;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;

public class DecodePKCS8 {

    /**
     * @param args
     * @throws IOException 
     * @throws NoSuchPaddingException When file is corrupted
     * @throws NoSuchAlgorithmException When no BC provider has been loaded 
     * @throws InvalidKeySpecException When decryption of file failed
     * @throws InvalidAlgorithmParameterException When file is corrupted
     * @throws InvalidKeyException When Unlimited cryptography extensions are not installed
     */
    public static void main(String[] args) throws
    IOException, NoSuchAlgorithmException, NoSuchPaddingException,
    InvalidKeySpecException, InvalidKeyException, InvalidAlgorithmParameterException
    {
        // before we can do anything with BouncyCastle we have to register its provider
        Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

        String password = "Very long and complex password";

        // read DER encoded key from files
        byte[] encodedprivkey = getFileBytes("privkey.p8");

        // this is a encoded PKCS#8 encrypted private key
        EncryptedPrivateKeyInfo ePKInfo = new EncryptedPrivateKeyInfo(encodedprivkey);

        // first we have to read algorithm name and parameters (salt, iterations) used
        // to encrypt the file
        Cipher cipher = Cipher.getInstance(ePKInfo.getAlgName());
        PBEKeySpec pbeKeySpec = new PBEKeySpec(password.toCharArray());

        SecretKeyFactory skFac = SecretKeyFactory.getInstance(ePKInfo
                .getAlgName());
        Key pbeKey = skFac.generateSecret(pbeKeySpec);

        // Extract the iteration count and the salt
        AlgorithmParameters algParams = ePKInfo.getAlgParameters();
        cipher.init(Cipher.DECRYPT_MODE, pbeKey, algParams);

        // Decrypt the encryped private key into a PKCS8EncodedKeySpec
        KeySpec pkcs8KeySpec = ePKInfo.getKeySpec(cipher);

        // Now retrieve the RSA Public and private keys by using an
        // RSA key factory.
        KeyFactory rsaKeyFac = KeyFactory.getInstance("RSA");
        // First get the private key
        PrivateKey rsaPriv = rsaKeyFac.generatePrivate(pkcs8KeySpec);
        // Now derive the RSA public key from the private key
        RSAPublicKeySpec rsaPubKeySpec = new RSAPublicKeySpec(((RSAKey) rsaPriv).getModulus(),
                ((RSAPrivateCrtKey) rsaPriv).getPublicExponent());
        PublicKey rsaPubKey = (RSAPublicKey) rsaKeyFac.generatePublic(rsaPubKeySpec);

    System.out.println("Key extracted, public part: " + rsaPubKey);
    }

    private static byte[] getFileBytes(String path)
    {
        File f = new File(path);
        int sizecontent = ((int) f.length()); // no key file will ever be bigger than 4GiB...
        byte[] data = new byte[sizecontent];
        try 
            {
            FileInputStream freader = new FileInputStream(f);
            freader.read(data, 0, sizecontent) ;
            freader.close();
            return data;
            }
        catch(IOException ioe)
        {
            System.out.println(ioe.toString());
            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-20T10:03:48.663

从 Java 8 开始，您可以创建 PKCS#12 密钥库并在存储密钥时传递显式[PasswordProtection](https://docs.oracle.com/javase/8/docs/api/java/security/KeyStore.PasswordProtection.html#PasswordProtection-char:A-java.lang.String-java.security.spec.AlgorithmParameterSpec-)参数以指定要使用的加密算法：

```
import java.io.FileOutputStream;
import java.security.KeyStore;
import java.security.KeyStore.PasswordProtection;
import java.security.KeyStore.PrivateKeyEntry;
import java.security.PrivateKey;
import java.security.SecureRandom;
import java.security.cert.Certificate;

import javax.crypto.spec.PBEParameterSpec;

public class scratch {
    public static void main(String... args) throws Exception {
        KeyStore keyStore = KeyStore.getInstance("PKCS12");
        keyStore.load(null, null); // Initialize a blank keystore

        // Your key to store
        PrivateKey key = ...;
        Certificate[] chain = new Certificate[] { ... };

        char[] password = "changeit".toCharArray();
        byte[] salt = new byte[20];
        new SecureRandom().nextBytes(salt);
        keyStore.setEntry("test", new PrivateKeyEntry(key, chain),
                          new PasswordProtection(password,
                                                 "PBEWithHmacSHA512AndAES_256",
                                                 new PBEParameterSpec(salt, 100_000)));

        keyStore.store(new FileOutputStream("/tmp/keystore.p12"), password);
    }
} 
```

[您可以在本文](https://neilmadden.wordpress.com/2017/11/17/java-keystores-the-gory-details/)中阅读更多详细信息（免责声明：我写了那篇文章）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:59:42.370

三重 DES 非常强大，Oracle 可能使用具有 168 位熵的密钥（在撰写本文时提供完整的 112 位安全性）。

此外，虽然 MD5对于签名等*可能*不安全，但它对于在 PBE 等密钥派生方案中使用肯定是有效的。

当然，Oracle 及时从这些方案中迁移出来是个好主意，但是 Triple DES 和 MD5 不应该让您不必要地担心。自己写可能是一个更糟糕的主意，有太多的陷阱。

选择一个好的密码，这可能是您能做的最好的事情。如果您想要高端安全性，或者将您的密钥库放在正确配置的 HSM 或智能卡中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-31T11:11:47.250

**主班**

```
`public class a {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws Exception {
    // TODO code application logic here
    String b = "MSISDN=559915129&productID=5859";

    AEScryptography enj = new AEScryptography();
    String[] argts = {b, "EN"};
    System.out.println("ENCY -> "+enj.encryptionDecryption(argts));
    System.out.println(checksum.encode(b));
} }` 
```

**AES密码学类**

```
`public class AEScryptography {
public String encryptionDecryption(String[] args) throws UnsupportedEncodingException, NoSuchProviderException, NoSuchPaddingException, InvalidKeyException, ShortBufferException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException {
    String returnVariable = "";
    if (args.length == 2) {
        try {
            String keystorePass = "201774";  // KeyStroe Password
            String keyPass = "mc7129";       // KeyPassword 
            String alias = "raVi";           // Alias

        InputStream keystoreStream = new FileInputStream("D:/keyFile.jks");
            KeyStore keystore = KeyStore.getInstance("JCEKS");
            keystore.load(keystoreStream, keystorePass.toCharArray());
            Key key = keystore.getKey(alias, keyPass.toCharArray());
            byte[] bt = key.getEncoded();
            String s = new String(bt);
            String originalString = args[0];
            switch (args[1]) {
                case "EN":
                    String encryptedString = AES.encrypt(originalString, s, bt);
                    returnVariable = encryptedString;
                    break;
                case "DE":
                    String decryptedString = AES.decrypt(originalString, s, bt);
                    returnVariable = decryptedString;
                    break;
                default:
                    System.out.println("java -jar /home/jocg/AES-256Encryption.jar StringToEncrypt/Decrypt EN/DE");
                    break;
            }

        } catch (KeyStoreException | IOException | NoSuchAlgorithmException | CertificateException | UnrecoverableKeyException ex) {
            System.out.println(ex);

        }
    } else {
        System.out.println("java -jar /home/jocg/AES-256Encryption.jar StringToEncrypt/Decrypt EN/DE");
    }
    return returnVariable;
} }` 
```

**AES 类**

```
 public class AES {
private static SecretKeySpec secretKey;
private static byte[] key;
public static void setKey(String myKey, byte[] ActualKey) throws 
NoSuchAlgorithmException {
    try {
        key = myKey.getBytes("UTF-8");
        key = ActualKey;
        secretKey = new SecretKeySpec(key, "AES");
    } catch (UnsupportedEncodingException e) {
    }
}

public static String encrypt(String strToEncrypt, String secret, byte[] bt) throws UnsupportedEncodingException, NoSuchProviderException, InvalidAlgorithmParameterException {
    try {
        setKey(secret, bt);
        byte[] iv = new byte[16];
        IvParameterSpec ivspec = new IvParameterSpec(iv);
        SecretKey secKey = new SecretKeySpec(key, "AES");
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, secKey, ivspec);
        byte[] newData = cipher.doFinal(strToEncrypt.getBytes("UTF-8"));
        return Base64.getEncoder().encodeToString(newData);
    } catch (NoSuchAlgorithmException | NoSuchPaddingException | InvalidKeyException | IllegalBlockSizeException | BadPaddingException e) {
        System.out.println("Error while encrypting: " + e.toString());
    }
    return null;
}
 }` 
```

# sql - 如何在 PLSQL 过程中做简单的数组

> ID：11864699
> 
> 赞同：0
> 
> 时间：2012-08-08T12:38:58.900
> 
> 标签：sql, oracle, plsql, procedure

如何在 plsql 中执行类似简单数组的操作？最好用例子来解释。

让我们看看我有什么

```
PROCEDURE MyProcedure(name varchar2 := '', father varchar2 := '', description varchar2 := '') IS 
        BEGIN
            UPDATE BC_ACTIONTYPEGROUP SET
                ColumnName = name,
                ColumnFather = father,
                ColumnDecription = description
            WHERE
                ColumnName = name;
            IF SQL%ROWCOUNT = 0 THEN
                INSERT INTO TableNames  (ColumnName, ColumnFather, ColumnDescription)
                VALUES (name, description, father);
            END IF;
        END;
/
MyProcedure('John',     '', 'Little John has three brothers');
MyProcedure('George',   'YES',  'George is father of John'); 
```

我需要这样的东西

```
MyProcedure(name=>'John', description=>'Little John has three brothers');
MyProcedure(name=>'George', father=>'YES',  description=>'George is father of John'); 
```

可能吗？或者在程序中如何使用这样的东西的最简单方法是什么。

我是IT的新学生，所以感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:41:08.713

我不确定您是否正在寻找数组或哈希表（关联数组）。

数组很简单：

`declare
TYPE names IS VARRAY(6) OF VARCHAR2(20) ;
name names;
name names.extend(1);
begin
name(1) := 'John Doe';
end;`

参考：
[http ://docs.oracle.com/cd/B10500_01/appdev.920/a96624/05_colls.htm](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/05_colls.htm)

在关联数组的情况下，您必须定义一个类型，例如：

`TYPE my_type IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(5);
-- Declare actual associative array using new data type.
my_array my_type;
my_key VARCHAR2(5);`

看看这个：

[http://javaconfessions.com/2008/08/associative-arrays-hashtables-for-plsql.html](http://javaconfessions.com/2008/08/associative-arrays-hashtables-for-plsql.html)

[http://tylermuth.wordpress.com/2008/02/21/plsql-associative-arrays/](http://tylermuth.wordpress.com/2008/02/21/plsql-associative-arrays/)

然后按照以下步骤将数组传递给函数或过程：

[如何在 PL/SQL 函数中使用传递数组](https://stackoverflow.com/questions/6338721/how-to-use-pass-an-array-in-pl-sql-function)

# java - 签名的 APK 对 Facebook 有不同的 Key-Hash

> ID：11864700
> 
> 赞同：4
> 
> 时间：2012-08-08T12:39:02.523
> 
> 标签：java, android, eclipse

我发布了我的 APP，为了测试它，在我的手机上安装了 APK。使用导出的 APK Facebook 不起作用（错误的 keyhash），但使用开发人员 bin'ed apk 它可以正常工作。

有人可以告诉我发生了什么事吗？为什么keyhash不同？（第二次，eclipse更新第一次改了）。

还

由于我已经将 APK 上传到市场并发布了它（现在未发布，非常烦人）。此外，我已经在本地删除了 APK，所以我找不到密钥哈希，也无法从市场上下载我自己的应用程序（通过 Google play 尝试过，不能因为它不是免费的）。我什至无法从我的 Google 开发者控制台（Wtf？）下载 APK。那么我是否需要上传另一个版本（比如 1.1？） - 尽管我的应用程序将新跳过 Google Play 中的“新功能”部分，这非常烦人。

谁能建议我应该在这里做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T15:07:09.400

您签署应用程序以进行分发的密钥与您用于调试的密钥不同。诚然，Facebook 的说明对此并不清楚。

您需要针对您的分发密钥库生成哈希

```
keytool -exportcert -alias YOUR_DISTRIBUTION_CERT_NAME -keystore YOUR_DISTRBUTION_KEYSTORE_FILE | openssl sha1 -binary | openssl base64 
```

然后在developers.facebook.com 上将其添加到您的Facebook 应用程序设置中，哈希字段可以采用多个哈希（即您的调试证书和分发证书）。

# javascript - 清除我对这个 js 模式的想法

> ID：11864701
> 
> 赞同：3
> 
> 时间：2012-08-08T12:39:04.503
> 
> 标签：javascript

我经常看到这种模式

```
 (function(){}).call(this) 
```

和这个一样吗？

```
 (function(that){})(this) 
```

提前致谢

**编辑**

这两个代码是否试图解决同一个问题？**这**是什么背景？

**编辑**

任何人都可以编辑标题并提供更好的原因，我认为这很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:40:35.903

不，不是，另一个给函数一个对象上下文，另一个传递一个没有任何对象上下文的参数。

想象一个通用函数，例如`Array#shift()`：

```
var shift = Array.prototype.shift;

//Shift expects an object context, and cannot be called without one.

//so this won't work:
shift($("div"))
//undefined

//This does:
shift.call($("div"))
//<div id=​"notify-container">​&lt;/div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:47:05.710

> 这两个代码是否试图解决同一个问题？这是什么背景？

是的，但方式不同。

第一个版本调用`Function.prototype.call`which 作为第一个参数，接受被`this`调用函数上下文中的变量将引用的上下文对象。

第二个版本只是自调用匿名函数并将引用的对象`this`（在调用上下文中）传递给匿名函数。现在，在被调用的匿名函数上下文中，我们可以通过`that`. **`this`will be `global`or `undefined`(取决于 ES5 严格模式)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:40:46.497

**问题后编辑**：

不。[Function.prototype.call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)接受`this`作为它的第一个参数。`this`在这种情况下，不会作为真正的参数传递给函数。`this`但是，您可以像`that`在第二个函数中那样处理实际传递的问题。

**编辑**：这是一个例子。

```
MyObject = {};
MyObject.prototype.myMethod = function(value) { console.log("Hello, " + value); }
var obj = new MyObject();

function myMethodCaller(value)
{
    this.myMethod(value);
}

myMethodCaller("World!");
myMethodCaller.call(obj, "World!"); 
```

*   第一次调用将失败并出现错误，因为[隐式] `this`（接收者）通常是没有该方法的`window`（更一般地说，全局对象，无论它在您的上下文中是什么。它是不同的，例如工人）`myMethod`。
*   第二个调用将记录“Hello, World!” 进入您的控制台，因为`this`将指向，将在其上调用`obj`该方法。`myMethod`

# objective-c - 是否可以反转属性的方向？（关于objective-c的语法）

> ID：11864703
> 
> 赞同：2
> 
> 时间：2012-08-08T12:39:05.470
> 
> 标签：objective-c

是否有可能像跟随相反的方向？

[通常的财产方向]

```
@interface MainClass {
  CustomClass *test1;
 }
 @end

 @implementation MainClass
  self.test1 = [[CustomClass alloc] init];
 @end 
```

[想知道属性的反方向]

是否可以从 test1 指示到 self？

```
ex) like test1.myowner? or test1<-self? or test1/self or etc.. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:47:26.133

不，属性是单向的。您必须明确定义一个逆属性并分配给它。

由于两个对象相互引用，您还必须小心不要引入保留循环。只有一个属性必须保留/强，否则，您最终会得到两个永远无法释放的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:51:39.483

您可以通过手动实现 setter 方法来自己实现这种行为，例如

```
- (void)setTest1:(CustomClass *)aCustomClass
{
    test1 = aCustomClass;
    test1.myowner = self;
} 
```

您将不得不将 myowner 属性添加到 CustomClass 并使其成为 weak 或 unsafe_unretained 以避免循环保留循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:46:44.403

不，不是。您无法将设置的对象与设置属性的对象相关联。您几乎肯定还想在 上声明一个属性`CustomClass`，然后在 的设置器中`MainClass`，将 的实例的属性设置`CustomClass`为`self`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:47:47.840

这里有很多东西可以挑选。首先，几乎所有你声明的类都应该继承自`NSObject`.

```
@interface MainClass : NSObject { 
```

您应该使用`@property`and`@synthesize`创建一个实例变量，不要像您尝试做的那样分配 iVar。最好这样写：

```
 @interface MainClass : NSObject 
 @property(nonatomic, retain) CustomClass *test1;
 @end

 @implementation MainClass
 @synthesize test1;

 // only if you're not using ARC
 -(void)dealloc {
     [test1 release];
     [super dealloc];
 }

 @end 
```

> 例如）像 test1.myowner？还是 test1<-self？或 test1/self 等。

所有这些都是错误的，如果您想从 test1 访问 MainClass 的实例，您必须在该类上声明一个实例变量并将“ `self`”设置为该实例变量。`MainClass`如果您只拥有一个实例，那么将其实现为单例可能是一个更好的主意。

# asp.net-mvc - 在表上引入 FOREIGN KEY 约束可能会导致循环或多个级联路径导致 Database.SetInitializer 不起作用？

> ID：11864704
> 
> 赞同：4
> 
> 时间：2012-08-08T12:39:06.563
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, database-design, entity-framework-4.3

我的代码优先数据库运行良好。如果我对我的数据库上下文进行了更改，那么下次我启动应用程序时数据库将被更新。但是后来我在数据库中添加了一些模型，当我重新启动我的应用程序时出现了这个错误：

`Introducing FOREIGN KEY constraint 'FK_OrderDetails_Orders_OrderId' on table 'OrderDetails' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. Could not create constraint. See previous errors.`

奇怪的事情之一是，如果我在不更改任何内容的情况下再次启动应用程序，则会收到以下错误：

`Model compatibility cannot be checked because the database does not contain model metadata. Model compatibility can only be checked for databases created using Code First or Code First Migrations.`

为了让第一个错误再次发生，我必须删除我的 .mdf 和 .ldf 文件（数据库），并用我的修订历史记录中的副本仅替换 .mdf 文件。

**为什么会发生这种情况？**

* * *

*以供参考：*

我的 Global.asax.cs 文件在`Application_Start()`方法中有这个：

`Database.SetInitializer<EfDbContext>(new EfDbContextInitializer());`

看起来像这样：

```
public class EfDbContextInitializer : DropCreateDatabaseIfModelChanges<EfDbContext>
{
    protected override void Seed(EfDbContext context)
    {
        var orders = new List<Order>
            {
                . . .
            };
        orders.ForEach(s => context.Orders.Add(s));
         . . . etc. . .
        context.SaveChanges();
    }
} 
```

我的连接字符串来自`Web.config`：

`<add name="EFDbContext" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;database=pos;AttachDBFilename=|DataDirectory|pos.mdf;MultipleActiveResultSets=true;User Instance=true" providerName="System.Data.SqlClient" />`

最后，我的 Order 和 OrderDetails 模型（第一个错误是直接引用的）：

```
public class Order
{
    public int OrderId { get; set; }

    public List<OrderDetail> OrderDetails { get; set; }

    public int EstablishmentId { get; set; }

    public virtual Establishment Establishment { get; set; }
}

public class OrderDetail
{
    public int OrderDetailId { get; set; }

    public int OrderId { get; set; }

    public int ProductId { get; set; }

    public int Quantity { get; set; }

    public decimal UnitPrice { get; set; }

    public virtual Product Product { get; set; }

    public virtual Order Order { get; set; }
} 
```

更新/注意：如果我在 OrderDetail 类中注释掉`public int OrderId { get; set; }`，项目启动正常（尽管我没有获得所需的添加`OrderId`（当然）的能力。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T14:03:03.817

此问题是由可能的循环级联删除引起的。这可能以多种形式发生，但归结为一条记录同时被两个或多个级联删除规则删除。

例如，假设您有父表和两个子表。然后你还有另一个表链接到两个子表：

```
Parent
------
ParentId
Name

ChildOne
--------
ChildOneId
ParentId
Name

ChildTwo
--------
ChildTwoId
ParentId
Name

SharedChild
-----------
SharedChildId
ChildOneId
ChildTwoId
Name 
```

当您从 Parent 表中删除一条记录时，此删除可能会级联到 ChildOne*和*ChildTwo。然后这两个删除可以进一步级联到 SharedChild，这里我们遇到了问题：两条路径试图从 SharedChild 中删除相同的记录。

我并不是说你的情况完全一样，但无论如何，你有类似的事情发生。为了解决这个问题，您可以决定让一个分支在链中向下级联，并阻止它在另一条链中。

仅在第一次运行应用程序时以及每次删除数据库时都出现此错误的原因是（我相信）Entity Framework 在发生错误时停止生成数据库并且您留下的数据库不完整。这就是为什么您在其他情况下遇到其他错误的原因。

如果您需要更多帮助来解决循环级联删除，您可能需要显示整个数据模型及其关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T23:47:19.723

要解决此问题，您需要做的是删除外键属性，并将引用的对象保留为虚拟：

这就是我所做的：

当我有这个错误时的旧代码：

```
 public class OperatingSystemType
{
    public int OperatingSystemTypeID { get; set; }

    [StringLength(50)]
    [Required]
    public string OperatingSystemName { get; set; }

    public int CompanyID { get; set; }

    [ForeignKey("CompanyID")]
    public virtual Company Company { get; set; }
} 
```

解决此错误后的新代码：

```
 public class OperatingSystemType
{
    public int OperatingSystemTypeID { get; set; }

    [StringLength(50)]
    [Required]
    public string OperatingSystemName { get; set; }

    public virtual Company Company { get; set; }
} 
```

然后在种子中，添加如下所示的数据，因为我们只是将 Company 对象添加为 OperatingSystemType 的参数值之一：

```
 protected override void Seed(MyAPPMVC.Infrastructure.MyContext context)
    {
        string myusername = "myuser";
        string MicrosoftName = "Microsoft";

        context.Companies.AddOrUpdate(p => p.CompanyName,
            new Company { CompanyName = MicrosoftName, CreatedOn = DateTime.Now, CreatedBy = myusername }
            );

        context.SaveChanges();

        Company MicrosoftCompany = context.Companies.Where(p => p.CompanyName == MicrosoftName).SingleOrDefault();

        context.OperationgSystemTypes.AddOrUpdate(p => p.OperatingSystemName,
            new OperatingSystemType { OperatingSystemName = "Windows 7 Professional", Company = MicrosoftCompany, CreatedOn = DateTime.Now, CreatedBy = myusername },
            new OperatingSystemType { OperatingSystemName = "Windows 8 Professional", Company = MicrosoftCompany, CreatedOn = DateTime.Now, CreatedBy = myusername }
            ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-10T08:54:01.517

我用 OnModelCreating 中的这段代码解决了 EF Core 上的这个问题：

```
foreach (var relationship in modelBuilder.Model.GetEntityTypes().SelectMany(e => e.GetForeignKeys()))
{
    relationship.DeleteBehavior = DeleteBehavior.Restrict;
} 
```

# android - 如何在android中使用内存分析器查找内存泄漏？

> ID：11864706
> 
> 赞同：1
> 
> 时间：2012-08-08T12:39:11.627
> 
> 标签：android, memory-leaks

我正在尝试在 android 中使用 Memory Analyzer 工具。当我完全按照他们的一个文档进行操作时，我得到了这样的图表。博客停在那里。没有提到内存泄漏。我应该从这些图表中推断出什么？谁能告诉我如何从这些图表中找到内存泄漏或者这些图表如何有助于发现内存泄漏。这方面的任何帮助都是可观的。我将提供更多细节 ![](../Images/215d264b12e9cb00de3fe6f7a17ffaf6.png)

内存分析器工具给出的一些描述......

```
 One instance of "com.android.ide.eclipse.adt.internal.sdk.Sdk" loaded by "com.android.ide.eclipse.adt" occupies 60,836,984 (57.41%) bytes. The memory is accumulated in one instance of "com.android.ide.eclipse.adt.internal.sdk.Sdk" loaded by "com.android.ide.eclipse.adt".

    Keywords
    com.android.ide.eclipse.adt.internal.sdk.Sdk
    com.android.ide.eclipse.adt

     Shortest Paths To the Accumulation Point

    Class Name  Shallow Heap    Retained Heap

    com.android.ide.eclipse.adt.internal.sdk.Sdk @ 0x911c130
    64  60,836,984

    sCurrentSdk class com.android.ide.eclipse.adt.internal.sdk.Sdk @ 0x207de4c0
    16  6,672

    [129] java.lang.Object[640] @ 0x9759008
    2,576   81,632

    elementData java.util.Vector @ 0x8d38170
    24  81,656

    classes org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader @ 0x8d0a570 com.android.ide.eclipse.adt
    64  119,256

    <classloader> class com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController$6 @ 0x228b8630
    0   0

    <class> com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController$6 @ 0xc626c60 Thread
    120 25,664

    <classloader> class com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController$7 @ 0x228b8d48 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController @ 0x225cdd70 »
    40  280

    <classloader> class com.android.ide.eclipse.adt.internal.project.AndroidClasspathContainer @ 0x20807a68 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.actions.AvdManagerAction @ 0x20b6cc78 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.actions.SdkManagerAction @ 0x20b6e080 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.wizards.actions.NewXmlFileAction @ 0x20b70728 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.wizards.actions.NewTestProjectAction @ 0x20b713b8 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.wizards.actions.NewProjectAction @ 0x20b71de0 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.lint.RunLintAction @ 0x20b774f8 »
    0   0

    <classloader> class com.android.ide.eclipse.adt.internal.editors.manifest.ManifestEditor @ 0x21b9fb10 
```

# android - 将附件添加到电子邮件

> ID：11864710
> 
> 赞同：1
> 
> 时间：2012-08-08T12:39:22.057
> 
> 标签：android, email, android-sdcard, email-attachments, filechooser

我正在尝试发送带有附件的邮件，并且我已经编写了运行良好的代码，但是在这里我已经写了我想在程序中附加的文件名，我不希望这样我希望它被选择来自 sdcard.How 的用户。

```
 public class DemoVoiceActivity extends Activity {
        EditText txtTo,mSubject,mMessageBody,attachment;
        String strSubject,strMessageBody;
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            txtTo = (EditText)findViewById(R.id.to);

        mSubject = (EditText)findViewById(R.id.subject);
        mMessageBody = (EditText)findViewById(R.id.message_content);
        attachment=(EditText)findViewById(R.id.attachment);

        String[] strTo = {txtTo.getText().toString()};

        strSubject = mSubject.getText().toString();
        strMessageBody = mMessageBody.getText().toString();
        Intent objIntent = new Intent(android.content.Intent.ACTION_SEND);
        objIntent.putExtra(android.content.Intent.EXTRA_EMAIL, strTo);

        objIntent.setType("plain/text"); objIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, strSubject);
        objIntent.putExtra(android.content.Intent.EXTRA_TEXT, "MESSAGE"); objIntent.putExtra(android.content.Intent.EXTRA_STREAM,Uri.parse("file://"+Environment.getExternalStorageDirectory()+"/q.mp4"));
        startActivity(objIntent);
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:48:58.333

看看这个答案 [https://stackoverflow.com/a/7857102/975959](https://stackoverflow.com/a/7857102/975959)

他提供了一个简单的文件选择器开源库。然后，您可以在该`onFileSelect()`方法中，获取文件路径并将其添加到您的`objIntent`.

如果您愿意，他还提供了自己实施的方法。

# php - PHP 管理面板开源脚本

> ID：11864713
> 
> 赞同：1
> 
> 时间：2012-08-08T12:39:27.850
> 
> 标签：php

我正在快速开发 php 网站，是否有可以自定义的管理面板开源脚本？

我并不是说仅针对管理员页面的管理员页面和客户端页面的完整 CMS

提前感谢您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:50:23.603

我知道有[Backendpro](http://www.kaydoo.co.uk/projects/backendpro)，它声称`"provide(s) you with functionality to do all the simple repetitive tasks like authentication, permissions and a basic look and feel for your websites control panel"`根据其网站。

不过，我从未使用过它（而且看起来开发已经停止了一年多），因为通常尝试自定义预制的东西会变得更加困难，而从头开始自己构建它们。如果你在以前的项目中做过类似的事情，你总是可以重复使用你的一些代码，否则我强烈怀疑你能找到像预制管理面板这样的东西，因为它非常依赖于你如何构建整个网站。

快速的谷歌搜索也让我明白了这一点：

[http://www.appphp.com/php-adminpanel/index.php?page=examples](http://www.apphp.com/php-adminpanel/index.php?page=examples)

但是浏览一下网站，免费版似乎很缺乏，我不知道它是如何工作的:)

**编辑**：正如 Sammaye 所说，Backend Pro 是为 CI 框架构建的，请记住这一点；您现在可以使用 CI 开发自己的面板，尽管它缺少 YII（或 CakePHP、IIRC）所具有的自动 CRUD 生成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:43:05.273

我不知道更多，但我个人喜欢 yii 框架。YII 提供了 gii toll，它可以根据数据库表自动生成 CRUD 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:45:45.927

从来没听说过。

管理页面有很多主题，但是没有预先构建的管理部分。为您不知道的架构和您不知道的环境以及您不知道的一堆业务规则制作预先构建的管理脚本有点困难，因为实际上没有任何规则。

正如@VibhaJ 提出的建议，您通常会使用 Yii 或您自己的框架将管理页面作为网站本身的一部分。

# cocoa - 在 nstableview 中显示目录中的数据

> ID：11864717
> 
> 赞同：0
> 
> 时间：2012-08-08T12:39:40.650
> 
> 标签：cocoa, nstableview, nsfilemanager

我想在表格视图中显示 fileNames 、 types 、 size ...。我试图显示文件名。表格视图由数据填充，但未显示。显示警告：'directoryContectsAtPath:' 已弃用。这是代码（.m 文件）。请帮忙

```
@implementation TableController

-(void) awakeFromNib{

    [uploadTable setDataSource:self];

}

-(IBAction)showFiles:(id)sender{
    [fileNames removeAllObjects];
    [fileNames autorelease];
    fileNames = [[NSMutableArray alloc] initWithArray:[[[NSFileManager defaultManager]directoryContentsAtPath:@"/"]retain]];
    [uploadTable reloadData];
}

-(int)numberOfRowsInTableView:(NSTableView *)uploadTable{
    return [fileNames count];
}

-(id)tableWiew:(NSTableView *)uploadTable objectValueForTableColumn:(NSTableColumn *)tableColumn row:(int)row{

    return [[fileNames objectAtIndex:row] stringValue];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:48:35.500

为避免弃用警告，您可以使用

```
[[NSFileManager defaultManager] contentsOfDirectoryAtPath: error:nil] 
```

代替

```
[[NSFileManager defaultManager]directoryContentsAtPath:@"/"] 
```

此外，您的方法中有错字（tableView，而不是 tableWiew）

```
-(id)tableWiew:(NSTableView *)uploadTable objectValueForTableColumn:(NSTableColumn *)tableColumn row:(int)row 
```

# php - （如何）我可以从中制作新闻源吗？

> ID：11864719
> 
> 赞同：0
> 
> 时间：2012-08-08T12:39:48.920
> 
> 标签：php, mysql, sorting

我的网站使用一张用于墙贴的表格（“users_wall”）和一张用于关注者的表格（“users_follow”）。wallposts 表看起来像这样（或多或少）：

```
ID    NAME    USER_ID (the id of the wall it's posted on)   CONTENT
1     James     3                                             Hi!
2     Jim       3                                             Hey there! 
```

关注者/下表如下所示：

```
ID   HEFOLLOWS    THISGUY
1     James         Jim
2     Jim           James 
```

我怎样才能用这个来制作~~工作台~~供稿？我目前有一个提要，但我发现无法按帖子的 id 排序，而不是发帖的人。我的看起来像：

```
James: Hey (15th)
James: Hi! (13th)

Jim:   Hi! (14th) 
```

当我想要它时：

```
James: Hey (15th)
Jim:   Hi! (14th)
James: Hi! (13th) 
```

那么我该怎么做呢？请解释一下，而不是把我送到一般的 mysql/php 学习网站。

谢谢 ：）

编辑：这是我制作新闻提要的**基本版本：**

```
<?php
$getfollowing = mysql_query("SELECT * FROM users_follow WHERE hefollows = '$username'");
while ($row = mysql_fetch_assoc($getfollowing)){
  $followername = $row['thisguy'];
  $getposts = mysql_query("SELECT * FROM users_wall WHERE name = '$followername' SORT BY id DESC");
  while ($rows = mysql_fetch_assoc($getposts){
    $date = $rows['date']
    (...)
  ?>
  <div class="share">
    <?php echo($nameofposter); ?>
    <br />
    <?php echo($share_content); ?> ( <?php echo($date); ?> )
  </div>
  <?php
  }
  ?> 
```

这将导致：

```
<div class="share">
  James
  <br />
  Hey (15th)
</div>

<div class="share">
  James
  <br />
  Hi! (13th)
</div>

<div class="share">
  Jim
  <br />
  Hi! (14th)
</div> 
```

因为James在数据库中是第一位的，并且是按照follower/following而不是share的ID排序的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:57:59.140

您必须有一个日期字段，或者使用时间戳来按时间顺序组织帖子。

[更新] Ahhhh 我认为问题在于你试图用 while 循环迭代一些东西，而它应该用一个 join 语句来完成。我知道你真的不希望有人将你链接到一个通用的 PHP 页面，但这是一个 mysql 页面，它是你所需要的。

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

当您尝试使用它时，请返回您所做的，如果您仍然有问题，我会尝试帮助解决问题。

# android - 对所有显示值求和

> ID：11864720
> 
> 赞同：0
> 
> 时间：2012-08-08T12:39:52.303
> 
> 标签：android

我需要计算根据添加的食物显示的卡路里总量。我的设计是这样的：

```
Breakfast

[EDITTEXT]

[BUTTON][TEXTVIEW] <--display food name and calories

[BUTTON2][TEXTVIEW2]

[BUTTON3][TEXTVIEW3]

[BUTTON4][TEXTVIEW4]

[BUTTON5][TEXTVIEW5] 
```

午餐和晚餐重复同样的事情

最后，我想要一个 TEXTVIEW 来显示基于添加食物的卡路里总量。

有人知道该怎么做吗？

这是我的代码：

```
public class MyFoodCalIntakeActivity extends Activity {

private Button breakfastSearchButton;
private Button breakfastSearchButton2;
private Button breakfastSearchButton3;
private Button breakfastSearchButton4;
private Button breakfastSearchButton5;

private Button lunchSearchButton;
private Button lunchSearchButton2;
private Button lunchSearchButton3;
private Button lunchSearchButton4;
private Button lunchSearchButton5;

private Button dinnerSearchButton;
private Button dinnerSearchButton2;
private Button dinnerSearchButton3;
private Button dinnerSearchButton4;
private Button dinnerSearchButton5;

private EditText breakfastEditText;
private EditText lunchEditText;
private EditText dinnerEditText;

private TextView breakfastTextView1;
private TextView breakfastTextView2;
private TextView breakfastTextView3;
private TextView breakfastTextView4;
private TextView breakfastTextView5;

private TextView lunchTextView1;
private TextView lunchTextView2;
private TextView lunchTextView3;
private TextView lunchTextView4;
private TextView lunchTextView5;

private TextView dinnerTextView1;
private TextView dinnerTextView2;
private TextView dinnerTextView3;
private TextView dinnerTextView4;
private TextView dinnerTextView5;

private DatabaseHelper dbHelper = new DatabaseHelper(MyFoodCalIntakeActivity.this,"food",2);

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.food_calorie_intake);

    。。。

class breakfastSearchButtonListener implements OnClickListener, android.view.View.OnClickListener
{
public void onClick(View v) 
{
    if (v.getId() == R.id.breakfastSearchButton) {

    String display = "";
    SQLiteDatabase db = dbHelper.getWritableDatabase();
    /** the result will be loaded in cursor **/
    Cursor cursor = db.query("food_table", new String[]{"ID","name","calorie"}, null, null, null, null, null);

    while(cursor.moveToNext())
    {

        String name = cursor.getString(cursor.getColumnIndex("name"));
        String calorie = cursor.getString(cursor.getColumnIndex("calorie"));

        if (name.compareTo(breakfastEditText.getText().toString())==0){
            display = display +"Name: "+name+", Calorie: "+calorie;
            breakfastTextView1.setText(display);
        }
    }
}
}

public void onClick(DialogInterface dialog, int which) 
{
    // TODO Auto-generated method stub  
}

} // end activity 
```

请耐心等待，代码有点长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:14:17.860

使用运行总计。

有一个变量 int “卡路里”

每当您添加食物时，将它们添加到卡路里并显示

每当您移除食物时，将它们从卡路里中移除并显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:46:41.603

好吧，您已经有一个保存卡路里值的字符串。您可以通过执行将其转换为 int `Integer.parseInt(calorie)`。所以只要保持这样的运行总数：

```
int calorieTotal = 0;
while(cursor.moveToNext())
{

    String name = cursor.getString(cursor.getColumnIndex("name"));
    String calorie = cursor.getString(cursor.getColumnIndex("calorie"));
    calorieTotal += Integer.parseInt(calorie);

    if (name.compareTo(breakfastEditText.getText().toString())==0){
        display = display +"Name: "+name+", Calorie: "+calorie;
        breakfastTextView1.setText(display);
    }
}
<textView>.setText(String.valueOf(calorieTotal)); 
```

# visual-studio - MSTest - 如何限制测试结果文件夹

> ID：11864721
> 
> 赞同：22
> 
> 时间：2012-08-08T12:39:58.957
> 
> 标签：visual-studio, mstest

每次 MSTest 运行时，它都会在`TestResults`. 这可能会导致占用硬盘空间的许多文件/文件夹。

有没有办法配置 MSTest 以覆盖`TestResults`文件夹的内容，以便只包含最近运行的结果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-09T10:04:20.930

您可以将存储的测试运行次数限制为 1，这应该满足您的要求。

[MSDN有一篇](http://msdn.microsoft.com/en-us/library/bb514184%28v=vs.90%29.aspx)关于如何实现这一点的文章：

*   在 Visual Studio 中，单击**工具**菜单上的**选项。**
***   出现选项对话框。*   展开**测试工具**或**Web 性能测试工具**并单击**测试执行***   在测试结果管理下，选择要保留的测试运行次数。*   单击确定。 [![在此处输入图像描述](../Images/54c5a99e7d53675931fa06aea09b7a9e.png)](https://i.stack.imgur.com/JhjVg.png)**

# python - python：从多封装字典中提取原始值

> ID：11864723
> 
> 赞同：0
> 
> 时间：2012-08-08T12:40:08.053
> 
> 标签：python

我想从 2 级封装字典中提取字符串“GROUP”。

```
dict = {'instance1' : {'runType' : 'GROUP'},
        'instance2' : { 'runType' : 'PROCESS'}} 
```

如果我`instance1`用 obviuos 方式访问 runType `dict['instance1']['runType']`，那么我会得到字符串`['GROUP']`。我也试过`dict['instance1'].get('runType', 'Null')`了，希望`.get`能返回原始字符串`"GROUP"`，但这并没有发生。

有没有其他捷径可以从`X>1`字典级别 获取纯字符串数据`str()`，然后`strip()`等？

- - - - - - - 解决方案 - - - - - - - -

dict['instance1']['runType'][0] 将返回纯 GROUP 字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:47:21.827

```
extraced_string = dict['instance1']['runType'] 
```

是最好的解决方案。`extracted_string`现在包含`GROUP`，您可以随意使用和操作它。此外，您不应该为您的字典命名，因为这是内置类的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:45:08.393

为我工作

```
>>> dict = {'instance1' : {'runType' : 'GROUP'} , 'instance2' : { 'runType' : 'PROCESS'}}
>>> dict['instance1']['runType']
'GROUP' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:53:01.293

刚从朋友那里得到正确答案。['GROUP'] 是一个有 1 个成员的列表。所以，dict['instance1']['runType'][0] 将返回纯 GROUP。谢谢大家！

# python - 包含对 python 对象的测试

> ID：11864725
> 
> 赞同：1
> 
> 时间：2012-08-08T12:40:10.467
> 
> 标签：python

如果我对元素使用任意对象， Python 如何`__contains__`处理列表？它会恢复给`is`运营商吗？或者`__eq__`如果提供它是否使用？

一个简单的测试给出了

```
class Test: pass

print(Test() in [Test()]) # -> no
a=Test() 
print(a in [a])   # -> yes
print(a in [Test()])  # -> no 
```

那么我可以假设它使用引用比较`is`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:47:58.453

list的默认`__contains__`实现只是将对象与`==`( `__eq__`) 运算符进行比较。正是这个运算符，如果没有为类定义，则默认为 `is`.

简而言之，“a in lst”相当于：

```
def contains(obj, lst):
   for item in lst:
       if obj == lst: 
          return True
   return False

contains(a, lst) 
```

的行为`==`会改变是否显式`item`实现，否则`__eq__`默认为对象标识 ( )。`is`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:42:43.390

请参阅[以下文档`object.__contains__(self, item)`](http://docs.python.org/reference/datamodel.html?highlight=__contains__#object.__contains__)：

> 调用以实现成员资格测试运算符。如果项目在自身中，则应返回 true，否则返回 false。对于映射对象，这应该考虑映射的键而不是值或键项对。
> 
> 对于未定义`__contains__()`的对象，成员资格测试首先尝试迭代 via `__iter__()`，然后尝试旧的序列迭代协议 via `__getitem__()`，请参阅语言参考中的此部分。

# java - 将pdf文件转换为单个jpeg？

> ID：11864726
> 
> 赞同：1
> 
> 时间：2012-08-08T12:40:13.047
> 
> 标签：java, pdf, servlets, image-processing, jpeg

我们如何将pdf文件转换为单个jpeg？现在我使用以下代码转换为不同的图像..但是我如何才能实现单个 jpeg 图像包包名；

```
import antlr.ByteBuffer;
import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PDFPage;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.RandomAccessFile;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel;
import javax.imageio.ImageIO;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author Praveen
*/
public class Pdf2ImageCon extends HttpServlet {

/**
 * Processes requests for both HTTP <code>GET</code> and <code>POST</code> methods.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
response.setContentType("text/html;charset=UTF-8");
PrintWriter out = response.getWriter();
String pdfname="C:/san.pdf";
    try {
        BufferedImage img=null;

        File file = new File(pdfname);
    RandomAccessFile raf;
    try {
        raf = new RandomAccessFile(file, "r");
        FileChannel channel = raf.getChannel();
        MappedByteBuffer buf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
        PDFFile pdffile = new PDFFile(buf);
        // draw the first page to an image
        int num = pdffile.getNumPages();

int length;
length=num;
        for (int i = 0; i <= num; i++) {
            PDFPage page = pdffile.getPage(i);
            //get the width and height for the doc at the default zoom
            int width = (int) page.getBBox().getWidth();
            int height = (int) page.getBBox().getHeight();
            Rectangle rect = new Rectangle(0, 0, width, height);
            int rotation = page.getRotation();
            Rectangle rect1 = rect;
            if (rotation == 180) {
                rect1 =
new Rectangle(0, 0, rect.height, rect.width);
            }
            //generate the image

                    img = (BufferedImage) page.getImage(
                    rect.width, rect.height, //width & height
                    rect1, // clip rect
                    null, // null for the ImageObserver
                    true, // fill background with white
                    true // block until drawing is done
                    );

        }
        ImageIO.write(img, "png", new File("C:\\newone.png"));
    } catch (FileNotFoundException e1) {
        System.err.println(e1.getLocalizedMessage());
    } catch (IOException e) {
        System.err.println(e.getLocalizedMessage());
    }

    } finally {
        out.close();
    }
}

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
/**
 * Handles the HTTP <code>GET</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */

protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    processRequest(request, response);
}

/**
 * Handles the HTTP <code>POST</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */

protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    processRequest(request, response);
}

/**
 * Returns a short description of the servlet.
 * @return a String containing servlet description
 */

public String getServletInfo() {
    return "Short description";
}// </editor-fold>

} 
```

这样，每个 pdf 文件页面都会生成一个新的 jpeg 图像。我如何从 pdf 文件中获取单个 jpeg / png

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:14:20.380

首先，这看起来相当复杂。Ghost4J 实现了更好的转换恕我直言：

```
// load PDF document
PDFDocument document = new PDFDocument();
document.load(new File("input.pdf"));

// create renderer
SimpleRenderer renderer = new SimpleRenderer();

// set resolution (in DPI)
renderer.setResolution(300);

// render
List<Image> images = renderer.render(document); 
```

然后，看看这篇博文（没试过，但看起来这就是你想要的：http: [//kalanir.blogspot.de](http://kalanir.blogspot.de/2010/02/how-to-merge-multiple-images-into-one.html)

它利用了 Java ImageIO：

```
int rows = images.size();  
int cols = 1;  
int chunks = rows * cols;  

int chunkWidth, chunkHeight;  
int type;  
//fetching image files  
File[] imgFiles = new File[chunks];  
for (int i = 0; i < chunks; i++) {  
        imgFiles[i] = new File("archi" + i + ".jpg");  
    }  

   //creating a bufferd image array from image files  
    BufferedImage[] buffImages = new BufferedImage[chunks];  
    for (int i = 0; i < chunks; i++) {  
        buffImages[i] = ImageIO.read(imgFiles[i]);  
    }  
    type = buffImages[0].getType();  
    chunkWidth = buffImages[0].getWidth();  
    chunkHeight = buffImages[0].getHeight();  

    //Initializing the final image  
    BufferedImage finalImg = new BufferedImage(chunkWidth*cols, chunkHeight*rows, type);  

    int num = 0;  
    for (int i = 0; i < rows; i++) {  
        for (int j = 0; j < cols; j++) {  
            finalImg.createGraphics().drawImage(buffImages[num], chunkWidth * j, chunkHeight * i, null);  
            num++;  
        }  
    }  
    System.out.println("Image concatenated.....");  
    ImageIO.write(finalImg, "jpeg", new File("finalImg.jpg")); 
```

当然，您已经拥有图像，无需像本例中那样从文件中获取图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:08:54.140

JPEG 不是多页图像格式（而例如 TIFF 或动画 GIF）。

*   那么你到底想要什么？
*   将所有 PDF 页面“平铺”成一个巨大的 JPEG？

例如，如果您想将官方 ISO 3200_2008 PDF-1.7 规范的前 12 页平铺成 4 列和 3 行（'4x3'），每页之间有 2 个像素的额外间距），请运行以下 ImageMagick 命令：

```
montage \
   http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf[1-12] \
  -tile 4x3 -geometry +2+2 \
  -background white \
   tiled.png 
```

将其转换为代码对您来说应该不是问题。

# .htaccess - .htaccess 允许所有来自特定用户代理

> ID：11864727
> 
> 赞同：16
> 
> 时间：2012-08-08T12:40:17.340
> 
> 标签：.htaccess, user-agent

我有一个正在开发的网站，它也将被拉入一个网络应用程序。我的`.htaccess`文件中有以下代码，以防止不在我允许的 IP 上的任何人访问：

```
Order deny,allow
Deny from all
AuthName "Restricted Area - Authorization Required" 
AuthUserFile /home/content/html/.htpasswd 
AuthType Basic
Require valid-user
Allow from 12.34.567.89 
Satisfy Any 
```

**问题：我想添加一个`Allow from`规则，该规则还允许特定的 HTTP 用户代理访问该站点。**

如果不是用户代理，我发现此代码重定向：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} !=myuseragent
RewriteRule ^files/.*$ / [R=302,L] 
```

但我似乎无法弄清楚如何将其变成`Allow from`规则。帮助？

**更新**

我发现下面的代码可以阻止特定的用户代理...我想说“如果不是`myuseragent`，则阻止”。

```
<IfModule mod_rewrite.c>
SetEnvIfNoCase ^User-Agent$ .*(libwww-perl|aesop_com_spiderman) HTTP_SAFE_BADBOT
Deny from env=HTTP_SAFE_BADBOT
</ifModule> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T12:46:40.477

```
SetEnvIfNoCase User-Agent .*google.* search_robot
SetEnvIfNoCase User-Agent .*yahoo.* search_robot
SetEnvIfNoCase User-Agent .*bot.* search_robot
SetEnvIfNoCase User-Agent .*ask.* search_robot

Order Deny,Allow
Deny from All
Allow from env=search_robot 
```

[Htaccess SetEnvIf 和 SetEnvIfNoCase 示例](http://www.askapache.com/htaccess/setenvif.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T17:44:01.577

> 我只想允许一个特定的用户代理，而不是试图阻止所有

这是我的配置，只允许 wget：

```
SetEnvIf User-Agent .*Wget* wget

Order deny,allow
Deny from all
Allow from env=wget 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-08T12:48:00.233

`Allow from`并且`Rewrite*`是来自两个不同 Apache 模块的指令。

第一个是`mod_authz_host`，另一个来自`mod_rewrite`。

你可以`mod_rewrite`用来做你想做的事：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} !=myuseragent
RewriteRule .* - [F,L] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-08T14:09:54.913

如果你不想使用 mode_rewrite，在 Apache 2.4 中你可以使用类似这样的东西：

```
<Location />
                AuthType Basic
                AuthName "Enter Login and Password to Enter"
                AuthUserFile /home/content/html/.htpasswd
                <If "%{HTTP_USER_AGENT} == 'myuseragent'">
                Require all granted
                </If>
                <Else>
                Require valid-user
                Require ip 12.34.567.89
                </Else>
</Location> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-31T01:49:32.587

我使用了像 sys0dm1n's answer 这样的版本。

这是我的 .htaccess 文件。它允许 Google 表格访问我服务器上的目录。

```
AuthType Basic
AuthName "Password Protected Area"
AuthUserFile /var/tools/.htpasswd
<If "%{HTTP_USER_AGENT} == 'Mozilla/5.0 (compatible; GoogleDocs; apps-spreadsheets; +http://docs.google.com)'">
Require all granted
</If>
<Else>
Require valid-user
</Else> 
```

转到 apache 文件夹中的 access.log 文件，查看需要允许或阻止的用户代理。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-14T12:43:29.693

> 我只想允许一个特定的用户代理，而不是试图阻止所有

你好

您需要在这里考虑的是一些机器人（尤其是“更大”更突出的机器人）将使用多个用户代理来访问您的网站。例如，Googlebot（爬虫）可以使用所有这些不同的用户代理：

```
Googlebot-Image/1.0 
Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)
DoCoMo/2.0 N905i(c100;TB;W24H16) (compatible; Googlebot-Mobile/2.1;+htt://www.google.com/bot.html)
GoogleProducer 
SAMSUNG-SGH-E250/1.0 Profile/MIDP-2.0 Configuration/CLDC-1.1 UP.Browser/6.2.3.3.c.1.101 (GUI) MMP/2.0 (compatible; Googlebot-Mobile/2.1; +http://www.google.com/bot.html)
Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_1 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8B117 Safari/6531.22.7 (compatible; Googlebot-Mobile/2.1; +http://www.google.com/bot.html)
Google-Site-Verification/1.0
Google-Test
Googlebot/2.1 (+http://www.google.com/bot.html) 
```

我不是在谈论 Google Plus 和 Google 使用的许多其他机器人。

雅虎和其他人也是如此。

就在本周，我们公司 (Incapsula) 推出了[Botopedia.org - 一个来自社区的机器人目录](http://www.botopedia.org)。它是 100% 免费且对所有人开放的，您可以使用它来查找您想要允许的所有机器人的完整用户代理列表。

如果需要，它还具有用于 Bot 验证的反向 IP 功能，因为正如我们[最近对虚假 Googlebot 访问](http://www.incapsula.com/the-incapsula-blog/item/369-was-that-really-a-google-bot-crawling-my-site)的研究所表明的那样，一些垃圾邮件发送者甚至网络攻击者会使用合法的 bot 签名来轻松进入您的网站。

希望这可以帮助。

# jsf - a4j:commandLink 仅在第二次单击时调用操作方法

> ID：11864728
> 
> 赞同：0
> 
> 时间：2012-08-08T12:40:27.650
> 
> 标签：jsf, richfaces

我有一个`<rich:dataTable>`包含`<a4j:commandLink>`.

我`<a4j:jsFunction>`在同一个表单中添加了一个，它被放置在一个`<a4j:region>`with 中`renderRegionOnly="true"`。

问题是，如果我有这个`renderRegionOnly="true"`，表中的 commandLinks 只会在第二次单击它们时启动动作绑定方法！有没有人遇到过类似的问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:27:51.973

我无法纠正这个问题，所以我使用了隐藏字段的解决方法，而不是在页面首次加载时调用该 jsFunction。谢谢你的提示。

# multithreading - 有关 OSGi 中的线程数的信息

> ID：11864733
> 
> 赞同：1
> 
> 时间：2012-08-08T12:40:35.143
> 
> 标签：multithreading, parallel-processing, osgi, bundle, threadpool

OSGi 中是否有命令来获取有关线程池的信息？例如最小线程数，当前线程数......等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:57:38.087

OSGi 框架对线程池一无所知。框架实现具有一些用于异步任务（如事件分派）的线程，但不会为捆绑包创建线程/线程池。由包创建的任何线程/线程池对于框架来说都是未知的。

# python - 如何使用 gitPython 执行 git reset --hard？

> ID：11864735
> 
> 赞同：15
> 
> 时间：2012-08-08T12:40:41.413
> 
> 标签：python, git, gitpython

好吧，标题是不言自明的。**与使用GitPython**模块运行`git reset --hard`（在终端上）等效的 python 代码是什么？

 *** * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-14T19:20:51.847

您可以使用：

```
repo = git.Repo('c:/SomeRepo')
repo.git.reset('--hard') 
```

或者，如果您需要重置到特定分支：

```
repo.git.reset('--hard','origin/master') 
```

或者在我的情况下，如果您只想将 repo 硬更新为 origin/master（警告，这将破坏您当前的更改）：

```
# blast any current changes
repo.git.reset('--hard')
# ensure master is checked out
repo.heads.master.checkout()
# blast any changes there (only if it wasn't checked out)
repo.git.reset('--hard')
# remove any extra non-tracked files (.pyc, etc)
repo.git.clean('-xdf')
# pull in the changes from from the remote
repo.remotes.origin.pull() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T12:46:23.417

`reset`我在[文档](http://gitpython.readthedocs.io/)中搜索并找到[了这个](http://gitpython.readthedocs.io/en/stable/reference.html?highlight=reset#git.index.base.IndexFile.reset)：

> `class git.refs.head.HEAD(repo, path='HEAD')`
> 
> `reset(commit='HEAD', index=True, working_tree=False, paths=None, **kwargs)`
> 
> 将我们的 HEAD 重置为给定的提交，可选择同步索引和工作树。我们引用的引用也将设置为提交。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-24T07:05:07.943

您可以使用：

```
repo = git.Repo('repo')
# ...
# Remove last commit
repo.head.reset('HEAD~1', index=True, working_tree=True) 
```**

# android - 按下输入时如何使键盘消失

> ID：11864742
> 
> 赞同：5
> 
> 时间：2012-08-08T12:41:03.280
> 
> 标签：android

O我的宏基平板电脑返回不会被以下xml替换，但在我的其他2个android设备上会这样所以我打算使用返回键退出键盘作为备份，问题，我想出了如何按下回车键时进行回调，但不知道如何让键盘消失，代码

```
mUserName=(EditText)findViewById(R.id.viewUserName);
        mUserName.setOnEditorActionListener(
                new android.widget.TextView.OnEditorActionListener()
                {
                    public boolean onEditorAction(TextView v, int actionId, KeyEvent event)
                    {
                        // goes here when enter is press

                        return false;
                    }
                }

                ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T12:44:45.340

在编辑文本的 xml 中，设置 imeOptions。基本上只需添加这一行：

```
android:imeOptions="actionDone" 
```

这会将输入按钮更改为“完成”按钮，并在按下时关闭键盘。

-或者-

您可以从上面的代码块中添加它

```
InputMethodManager imm = (InputMethodManager)getSystemService(
  Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(mUserName.getWindowToken(), 0); 
```

# google-maps - 在 IE 中加载谷歌地图时出现无效参数错误

> ID：11864747
> 
> 赞同：3
> 
> 时间：2012-08-08T12:41:15.963
> 
> 标签：google-maps

```
Message: Invalid argument.
Line: 26
Char: 56
Code: 0
URI: http://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/13/main.js 
```

我浏览了 Stack Exchange 中的解决方案，在 [Google Map api v3 - IE7 - main.js error - invalid argument (javascript)中发现了一些相关的东西](https://stackoverflow.com/questions/9540790/google-map-api-v3-ie7-main-js-error-invalid-argument-javascript)

并尝试通过 jQuery 删除 div 以进行测试，如下所示

```
$(".gmnoprint").children().remove();
$(".gmnoprint").empty();
$('.gmnoprint').find("div").slice(1,2).hide().remove();
$('.gmnoprint').find("div").hide().remove();
$(".gmnoprint").children("div:lt(1)").remove();
$('.gmnoprint div:nth-child(1)').remove();
$(".gmnoprint").first().remove(); 
```

但没有任何选择有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:27:20.040

对于 IE7/8（没有尝试 IE6，IE9 运行良好），相同的行和列以及相同的地图 api 文件版本，我也遇到了这个问题。

我发现只要在同一页面上重新渲染地图（异步方法）就会发生这种情况（至少对我而言），解决方案是在尝试再次重新渲染地图之前始终从 DOM 中删除地图节点，例如：

```
 $('#MAP_CONTAINER_ID_HERE').children().remove(); 
```

使用 jQuery（或等效于原生 js），

此外，有时问题可能出在之前地图渲染的未完成工作中（假设我们正在讨论在同一页面上重新渲染的地图的问题），并且 IE<9 在重绘未完成的地图时似乎很脆弱.

就是说-也许您可以检查另一个线程（http://stackoverflow.com/questions/8175425/invalid-argument-error-in-ie7-jquery-tabs-and-google-map）来处理我刚刚描述的如果删除代表先前地图渲染的节点没有帮​​助。

最后 - 如果您在没有地图重新渲染的情况下遇到此错误，那么您可能会遇到创建不正确的选项或类似问题的问题，如果给出一些代码片段或至少给出场景，则响应会容易得多。

# codeigniter - codeigniter 活动记录获取最后 10 条记录并排序 ASC

> ID：11864749
> 
> 赞同：3
> 
> 时间：2012-08-08T12:41:26.177
> 
> 标签：codeigniter, activerecord

我想知道这个 SQL 语句是否在 Codeigniter 活动记录中完成。

```
SELECT * FROM (
SELECT * 
FROM chat 
WHERE (userID = $session AND toID = $friendID) 
OR (userID = $friendID AND toID = $session)  
ORDER BY id DESC
LIMIT 10
) AS `table` ORDER by id ASC 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T13:35:38.950

您必须使用活动记录类的`_compile_select()`和`_reset_select()`方法。

```
$this->db->select('*');
$this->db->from('chat');
$this->db->where("(userID='{$session}' AND toID='{$friendID}')");
$this->db->or_where("(userID='{$friendID}' AND toID='{$session}')");
$this->db->order_by('id', 'DESC');
$this->db->limit('10');

$subQuery = $this->db->_compile_select();

$this->db->_reset_select();

$this->db->select('*');
$this->db->from("{$subQuery} AS table");
$this->db->order_by('id', 'ASC');

$query = $this->db->get(); 
```

不幸的是，在 CI 2.0+ 中，`_compile_select()`并且`_reset_select()`是受保护的方法。真可惜。您必须按照[本教程](http://www.simonemms.com/2011/03/18/extending-the-codeigniter-database-class/)扩展 DB 驱动程序，您可以在其中编写如下方法：

```
function get_compiled_select()
{
    return $this->db->_compile_select();
}

function do_reset_select()
{
    $this->db->_reset_select();
} 
```

我想花点时间指出，这种类型的操作会更好地由连接服务。您应该考虑更改您的数据库结构，以使连接成为可能且高效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:24:41.257

这将起作用，但不是活动记录变体。

```
$this->db->query( "SELECT * FROM (
     SELECT * 
     FROM chat 
     WHERE (userID = ? AND toID = ?) 
     OR (userID = ? AND toID = ?)  
     ORDER BY id DESC
     LIMIT 10
     ) AS `table` ORDER by id ASC", array( $session, $friendID, $friendID, $session) );" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:58:58.713

您可以将查询用作：

```
$this->db->select('SELECT * 
     FROM chat 
     WHERE (userID = $session AND toID = $friendID) 
     OR (userID = $friendID AND toID = $session)  
     ORDER BY id DESC
     LIMIT 10') AS `table` ORDER by id ASC', FALSE); 
```

# java - 尽管没有错误，NetBeans Java 项目不会显示 GUI 窗口

> ID：11864752
> 
> 赞同：0
> 
> 时间：2012-08-08T12:41:44.703
> 
> 标签：java, swing, netbeans

我正在尝试使用 Netbeans IDE 7.1 构建一个 java 项目。

我不知何故看不到或查看我创建的 GUI 窗口。

请多多指教。

在我的课堂上：

```
package rmiSimpleCalc;

public class RMISimpleCalculatorMain {

    public static void main(String[] args) {
        MainCalculator calc = new MainCalculator();
        calc.setVisible(true);
    }
} 
```

这`MainCalculator`是我想运行的 GUI 窗口。它以某种方式不会显示。

我的控制台中**没有**错误消息。

这是`MainCalculator`代码：

```
package rmiSimpleCalc;

import java.rmi.*;

public class MainCalculator extends javax.swing.JPanel {

    public MainCalculator() {
        initComponents();
        ComboBoxOperator.addItem("+");
        ComboBoxOperator.addItem("-");
        ComboBoxOperator.addItem("/");
        ComboBoxOperator.addItem("*");             
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        txtFirstDigit = new javax.swing.JTextField();
        txtSecondDigit = new javax.swing.JTextField();
        btnCalculate = new javax.swing.JButton();
        lblFirstDigit = new javax.swing.JLabel();
        lblSecondDigit = new javax.swing.JLabel();
        ComboBoxOperator = new javax.swing.JComboBox();
        lblOperator = new javax.swing.JLabel();
        lblResult = new javax.swing.JLabel();
        lblHeader = new javax.swing.JLabel();
        btnConfigureServer = new javax.swing.JButton();
        txtResult = new javax.swing.JTextField();

        btnCalculate.setText("Calculate");
        btnCalculate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCalculateActionPerformed(evt);
            }
        });

        lblFirstDigit.setText("First Digit");

        lblSecondDigit.setText("Second Digit");

        ComboBoxOperator.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        lblOperator.setText("Operator");

        lblResult.setText("Result");

        lblHeader.setText("RMI Simple Calculator");

        btnConfigureServer.setText("Configure Server");
        btnConfigureServer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfigureServerActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblFirstDigit, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblSecondDigit, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblOperator, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblResult, javax.swing.GroupLayout.Alignment.TRAILING))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblHeader)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(ComboBoxOperator, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(btnCalculate))
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(txtSecondDigit)
                        .addComponent(txtFirstDigit, javax.swing.GroupLayout.PREFERRED_SIZE, 128, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(txtResult, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnConfigureServer)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addComponent(lblHeader)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtFirstDigit, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblFirstDigit))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtSecondDigit, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblSecondDigit))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(ComboBoxOperator, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblOperator)
                    .addComponent(btnCalculate))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblResult)
                    .addComponent(txtResult, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(btnConfigureServer)
                .addContainerGap(24, Short.MAX_VALUE))
        );
    }                       

    private void btnConfigureServerActionPerformed(java.awt.event.ActionEvent evt) {                                                   

    }                                                  

    private void btnCalculateActionPerformed(java.awt.event.ActionEvent evt) {                                             
        double firstdigit;
        double seconddigit;
        String operator;

        firstdigit = Double.valueOf(txtFirstDigit.getText());

        seconddigit = Double.valueOf(txtSecondDigit.getText());

        operator = ComboBoxOperator.getSelectedItem().toString();

        try
        {
            CoreInterface coreobj = (CoreInterface) Naming.lookup("localhost/Core");
            double result = (coreobj.calc(firstdigit,seconddigit,operator));
            txtResult.setText(Double.toString(result));
        }

        catch(Exception e)
        {
            txtResult.setText("e");
        }   
    }                                            

    private javax.swing.JComboBox ComboBoxOperator;
    private javax.swing.JButton btnCalculate;
    private javax.swing.JButton btnConfigureServer;
    private javax.swing.JLabel lblFirstDigit;
    private javax.swing.JLabel lblHeader;
    private javax.swing.JLabel lblOperator;
    private javax.swing.JLabel lblResult;
    private javax.swing.JLabel lblSecondDigit;
    private javax.swing.JTextField txtFirstDigit;
    private javax.swing.JTextField txtResult;
    private javax.swing.JTextField txtSecondDigit;
    // End of variables declaration                   
} 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:14:50.057

该类`MainCalculator`是一个`JPanel`. A`JPanel`不能像那样显示，它必须是 a 的一部分`Window`。将其添加到 a并`JFrame`调用`setVisible(true)`.`JFrame`

另外，@npinti 的建议非常好：在 EDT 线程中执行与 GUI 相关的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:50:43.207

该问题很可能出现在本节中：

```
public static void main(String[] args) {
        MainCalculator calc = new MainCalculator();
        calc.setVisible(true);
    } 
```

您需要在事件调度程序线程 (EDT) 中执行*任何与 GUI 相关的任务。*

尝试这样的事情：

```
public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            { 
                MainCalculator calc = new MainCalculator();
                calc.setVisible(true);
            }
        });
    } 
```

# .net - Windows 窗体中的拖动阈值感知拖动

> ID：11864753
> 
> 赞同：1
> 
> 时间：2012-08-08T12:41:45.773
> 
> 标签：.net, winforms, drag-and-drop

从列表和树视图拖动有一个很好的属性，即在您将鼠标移动到最小距离之前它不会开始拖动 - 拖动阈值。拖动阈值由 .NET Windows 窗体中通过 SystemInformation.DragSize 提供的 SM_CXDRAG 和 SM_CYDRAG 系统指标控制。

如果我想实现一个尊重拖动阈值的自定义拖动，那么最好的方法是什么？MSDN 上的文档似乎完全避免了这个问题，只是告诉您在 MouseDown 上立即调用 DoDragDrop。

是否有一些我错过的事件可用于检测鼠标何时被拖动的距离超过拖动阈值？我真的应该为这种常见的事情自己实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:21:35.900

好吧，TreeView 和 ListView 都有 ItemDrag 事件来告诉你。但这不是 Control 类的标准事件，这些事件是特定于类的，由底层本机 Windows 控件生成的专用通知触发。分别为 TVN_BEGINDRAG 和 LVN_BEGINDRAG。其他一些常用控件有它，标题、工具栏和钢筋。消息和控件都不是“标准的”，它们是后来添加到 Windows 中的，大约在 Windows 95 时间范围内。微软没有将他们的功能添加到旧控件中。

所以这就是降压停止的地方。您需要在任何其他 Control 类上实现自己的。使用 MouseDown 和 MouseMove 事件并不难。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T12:46:47.383

实现阻力阈值相当容易。在鼠标按下时，保存光标的位置并调用 DoDragDrop，然后在拖动事件中，检查鼠标当前位置与保存位置之间的距离，如果距离大于阈值，则仅移动元素。

# mysql - 我可以有一个没有聚集索引的主键吗？我也可以有多值聚集索引吗？

> ID：11864754
> 
> 赞同：4
> 
> 时间：2012-08-08T12:41:47.230
> 
> 标签：mysql, sql, sql-server, clustered-index

伙计们，我想了解以下问题的答案：

1.  我可以有一个没有聚集索引的主键吗？（我知道当我们在列上创建主键约束时，默认情况下会创建一个聚集索引。那么在这种情况下，我应该如何停用聚集索引？）

2.  我可以有一个包含多个列的聚集索引吗？（就像在非聚集中我可以为单个非聚集索引加入不同的列）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T16:56:28.757

（此答案仅适用于 SQL Server 2005+。我对 MySQL 一无所知。）

* * *

> 我可以有一个没有聚集索引的主键吗？

是的。正如您所提到的，默认情况下，主键约束由聚集索引支持。您可以通过如下声明约束来告诉 SQL Server 使用非聚集索引来支持约束：

```
ALTER TABLE MyTable
    ADD CONSTRAINT PK_MyTable
        PRIMARY KEY NONCLUSTERED(Col1); 
```

* * *

> 我可以有一个包含多个列的聚集索引吗？（就像在非聚集中我可以为单个非聚集索引加入不同的列）。

是的，您可以在索引键中定义具有多于一列的索引。它实际上与非聚集索引没有什么不同。

```
CREATE UNIQUE CLUSTERED INDEX IX_MyTable_Clus
    ON MyTable(Col1, Col2, Col3); 
```

* * *

参考文献：[`ALTER TABLE`](http://msdn.microsoft.com/en-us/library/ms190273.aspx),[`CREATE INDEX`](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:46:26.977

`MySQL`并且`SQL-SERVER`是不同的 RDBMS。它们具有不同的功能和不同的语法。

使用 InnoDB 时，`MySQL`始终使 PK 成为聚集索引。

`SQL-SERVER`但是，将允许您创建一个没有`CLUSTERED`关键字的 PK，并让您在另一个索引中使用它。

在这两种情况下，PrimaryKeys 和 Indexes（无论是否聚集）都可以覆盖多个字段。

# mysql - mysql join 显示左表中的所有记录，并带有一个用于匹配右表中记录的标志

> ID：11864755
> 
> 赞同：0
> 
> 时间：2012-08-08T12:41:51.297
> 
> 标签：mysql, join

我需要 mySQL Join 表的帮助，它应该列出“表 A”中的所有用户，并且还应该通过匹配“表 B”中的记录来显示标志

```
Table A (users)
=====================
id | name 
=====================
1  | aaa 
2  | bbb 
3  | ccc 
4  | ddd 
5  | eee 

Table B (users_likes) 
=====================
like_by | like_to 
=====================
1       | 2  
1       | 3  
2       | 3  
4       | 1  
5       | 1 
```

如果用户 'aaa'(id:1) 登录系统并执行搜索以列出除他的详细信息之外的所有用户，则结果将是

```
2 | bbb 
3 | ccc 
4 | ddd 
5 | eee 
```

他还需要在列出显示他的“like_by”时看到一个标志，例如：

```
2 | bbb | (flag:TRUE) 
3 | ccc | (flag:TRUE) 
4 | ddd | flag:false) 
5 | eee | (flag:false) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:18:38.713

解决您的问题的一个简单方法是使用`UNION`并且很少`SubQuery`（*尽管除此之外可能存在其他解决方案*）

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/699a4/1)

```
SELECT  DISTINCT b.id, b.name,'TRUE' AS FLAG
FROM    users_likes a
             INNER JOIN users b
                  on a.like_to = b.id
WHERE   like_by = 1
UNION
SELECT  DISTINCT id, name,'FALSE' AS FLAG
FROM    users
WHERE   ID NOT IN
(
     SELECT  DISTINCT b.id
     FROM    users_likes a
                  INNER JOIN users b
                       on a.like_to = b.id
     WHERE   like_by = 1
)
AND id <> 1 
```

或不使用`UNION`更简单的解决方案是下面的解决方案。

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/699a4/12)

```
SELECT  a.id,
        a.name,
        IF(COALESCE(b.like_by, -1) = 1, 'TRUE', 'FALSE') AS `Flag`
FROM    users a
             LEFT JOIN users_Likes b 
                 ON a.id = b.like_to
WHERE    a.ID <> 1
GROUP BY a.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:53:05.703

我想这就是你所追求的：

```
SELECT a.id,a.name,b.like_by IS NOT NULL
FROM users a
LEFT JOIN users_likes b ON (a.id = b.like_to)
GROUP BY a.id 
```

这将给出所有 'a' 的项目，其中有一个 like_to 的 1 和没有的 0。
（您可以添加 WHERE a.id != 1 以排除用户 1）。

编辑：根据用户 1 的喜好将第三列更改为真假。我原本以为是这样的。

```
SELECT a.id,a.username,b.like_by IS NOT NULL
FROM users a
LEFT JOIN user_likes b ON (a.id = b.like_to AND b.like_by = 1)
WHERE a.id != 1
GROUP BY a.id 
```

[http://sqlfiddle.com/#!2/ea34d/10](http://sqlfiddle.com/#!2/ea34d/10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:07:32.557

试试这个查询

```
select 
B.like_to,
BNames.name,
case when B.like_by = 1 then True else False end
from Table_A A
left outer join Table_B B on A.id = B.like_by
left outer join Table_A BNames on B.like_to = BNames.id
where B.like_to <> 1 
```

希望能帮助到你。

# json - 更新 Dojo 中的图表数据

> ID：11864759
> 
> 赞同：0
> 
> 时间：2012-08-08T12:41:58.150
> 
> 标签：json, dojo, dojox.charting

我有以下函数，它读取 JSON 数据并将其放在图表上。我想每隔 10 秒自动更新一次图表数据。

我查看了 dojo/timing 和 chart.updateSeries，我相信两者的结合可以解决问题，但我不确定如何实现这一点。任何帮助将不胜感激。

```
function(xhr, json, arrayUtil, number, Chart, theme) {

            var def = xhr.get({
                url: "cpuusage.json",
                handleAs: "json"
            });

            def.then(function(res){
                var chartData = [];                 
                arrayUtil.forEach(res.chart, function(chart){
                    chartData[chart.x] = number.parse(chart.y);
                });

                //Draw chart
                var chart = new Chart("chartNode2");
                chart.setTheme(theme);
                chart.addPlot("default", {
                    type: "Columns",
                    markers: true,
                    gap: 5
                });
                chart.addAxis("x");
                chart.addAxis("y", { vertical: true, fixLower: "major", fixUpper: "major" });
                chart.addSeries("Monthly Sales",chartData);
                chart.render();

            }, function(err){
                console.error("Failed to load JSON data");
            });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:30:21.803

尝试这样的事情：

```
var interval = setInterval(function(){
    // let's get new data
    xhr.get({
        url: "cpuusage.json",
        handleAs: "json"
    }).then(function(res){
        // data prep step - just like before
        var chartData = [];
        arrayUtil.forEach(res.chart, function(chart){
            chartData[chart.x] = number.parse(chart.y);
        });
        // update chart (it was created before)
        chart.updateSeries("Monthly Sales", chartData);
        chart.render();
    }, function(err){
        console.error("Failed to load updated JSON data");
    });
}, 10000); // 10s
...
// when we want to cancel updates
clearInterval(interval); 
```

抱歉，我没有使用`dojo/timing`，在这里我没有看到太多理由，并且更喜欢简单的方法来做简单的事情。

# ruby - 从 powershell 调用 ruby 脚本

> ID：11864765
> 
> 赞同：3
> 
> 时间：2012-08-08T12:42:07.887
> 
> 标签：ruby, powershell

我有以下情况：具有此变量的 powershell 脚本：

```
$RUBY = "C:\installing\ruby\bin\ruby.exe"
$ARGS = "C:\files\sript.rb $Arg1 $Arg2 $Arg3" 
```

在批处理文件中我可以写

```
%RUBY% %ARGS% 
```

它有效。

但我怎么能在powershell中做到这一点？

重要的是 ruby​​ 安装路径是可变的。

我用 Start-Process 尝试过，但只启动了 ruby​​.exe，没有脚本。

有什么提示吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:50:38.710

首先，`$args`是一个由 PowerShell 管理的[自动变量](http://go.microsoft.com/fwlink/?LinkID=113212)，所以我会避免尝试用相同的名称声明您自己的变量。

要从 PowerShell 调用存储在变量中的命令，可以使用[调用运算符`&`](http://go.microsoft.com/fwlink/?LinkID=113242)：

```
& $ruby 'script.rb' 
```

如果您需要建立参数列表，我建议您创建一个数组，而不是将它们全部混合成一个字符串：

```
$rubyArgs = @('C:\files\script.rb', $Arg1, $Arg2, $Arg3)
& $ruby $rubyArgs 
```

如果您需要传递更复杂的参数，您可能会发现[此答案](https://stackoverflow.com/a/8468690/2495)很有用。

# navigation - 在多页视图中使用 MS Word 中的光标导航

> ID：11864769
> 
> 赞同：2
> 
> 时间：2012-08-08T12:42:20.223
> 
> 标签：navigation, ms-word, cursor

好的。我觉得这很烦人，也许有人知道如何解决这个问题。

当我在 Word 2010 中工作时，在打印布局中，如果我缩小太多，它会自动切换为显示多页。但是因为我有一个大显示器，而且我不喜欢大尺寸的字母，所以我一直在与这个设置作斗争。当我以令人愉快的水平缩小时，我有两页并排。

这两个页面布局很好，但只有一件事：当我在右侧页面的顶部并且向上按光标时，光标不会移动到上一页的底部（左侧） ，但在其上方视觉上的页面底部，从而跳过一页。

这非常令人沮丧；我正在按摩文本，需要在当前的线条周围导航，但我一直抓住鼠标将光标移到我想要的位置。是的，我知道我可以切换到“概念”视图，但我喜欢看到我的文本在页面上的真实外观（所见即所得）。

我可以说服打印布局中的 Word 在该缩放级别仅显示一页，还是可以修改光标行为以转到上一页而不是上面的一页？

# cuda - 使用调试器更改 gpu

> ID：11864773
> 
> 赞同：0
> 
> 时间：2012-08-08T12:42:26.967
> 
> 标签：cuda, nvidia, nsight

我有 2 个 GPU 的系统；GeForce GTX560 和 GeForce 210（CUDA 工具包 4.1 和 nsight 2.1）。当我尝试运行 CUDA 调试时，我得到了这个：

[![图像](../Images/31c382660c2f83abd276edd57541d7ed.png)](https://i.stack.imgur.com/i11hR.png)

那么，如何更改调试器使用的卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:10:44.813

这里有两个选项：

1) 在您的程序中添加对指定目标设备的支持。如果您添加命令行选项，您可以通过解决方案资源管理器项目节点上下文菜单在 Nexus 属性对话框中设置值。

2) 使用环境变量 CUDA_SET_VISIBLE_DEVICES=1,0 重新排序您的两个设备。Nsight 2.1 不支持通过调试器指定环境变量，因此您必须在目标机器（可能不是您的本地机器）上执行以下步骤。

*   杀死进程 Nsight.Monitor.exe *   打开命令提示符*   类型`set CUDA_VISIBLE_DEVICES=1,0`*   类型`Nsight.Monitor.exe`

    您还可以设置全局环境变量，但您必须确保重新启动 Nsight Monitor 以便它能够接收更改。这将影响所有 CUDA 程序，因此我建议您将更改限制为仅通过 Nsight Monitor 启动的程序。

# android - Android：如何忽略围绕单轴的旋转？

> ID：11864779
> 
> 赞同：0
> 
> 时间：2012-08-08T12:43:00.410
> 
> 标签：android, accelerometer

我正在开发应用程序，活动在手机旋转后开始。当您向后旋转手机时，该活动必须完成。是否可以忽略围绕其他轴的旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:58:05.117

您可以通过以下方式检查手机的握持方式：

```
Display display = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int rotation = display.getRotation(); 
```

然后你可以像这样检查方向：

```
switch (rotation)
{
    case Surface.ROTATION_90:
        ...
        break;
    case Surface.ROTATION_180:
        ...
        break;
    case Surface.ROTATION_270:
        ...
        break;
    default:
        ...
        break;
} 
```

（请注意，对于 API 8 之前的版本，您需要使用`display.getOrientation()`而不是`display.getRotation()`）

# javascript - HTML5 音频无方法播放

> ID：11864783
> 
> 赞同：2
> 
> 时间：2012-08-08T12:43:10.333
> 
> 标签：javascript, jquery, html, audio, media-player

我的标记

而这个 JQuery 代码

每次我按播放时都会给我错误

```
<div class = "container">
    <legend><strong>Zedd - Spectrum</legend></h4>
    <div class = "art-item"><img src="uploads/arts/default.jpg"></div>
        <audio class = "audio-player" src = "uploads/tracks/02 So Far.mp3">
        </audio>

            <div class = "playerContainer">

                <ul id =  "playerControls" >
                    <li class = "play-bt"></li>
                    <li class = "pause-bt"></li>
                    <li><div class ="progressContainer"><!-- Progess bars container //-->
                        <div class ="progressbar"></div>
                    </div>
                    </li>

                </ul>
                <span class ="timecode">0:00</span>
            </div>
</div>

<div class = "container">
    <legend><strong>Zedd - Spectrum</legend></h4>
    <div class = "art-item"><img src="uploads/arts/default.jpg"></div>
        <audio class = "audio-player" src = "uploads/tracks/track3.mp3">
        </audio>

            <div class = "playerContainer">

                <ul id =  "playerControls" >
                    <li class = "play-bt"></li>
                    <li class = "pause-bt"></li>
                    <li><div class ="progressContainer"><!-- Progess bars container //-->
                        <div class ="progressbar"></div>
                    </div>
                    </li>

                </ul>
                <span class ="timecode">0:00</span>
            </div>
</div> 
```

每次我单击 play-bt 时，它都会不断给我这个错误

```
Uncaught TypeError: Object #<Object> has no method 'play' 
```

音频标签不是有播放方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T12:45:10.687

jQuery[`.find()`](http://api.jquery.com/find/)返回一个[jQuery object](http://api.jquery.com/Types/#jQuery)，而不是 native [`HTMLAudioElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLAudioElement)，所以你需要[解开](http://api.jquery.com/get/)返回的值`.find()`：

```
$artItem.find('audio')[0].play();
// or
$artItem.find('audio').get(0).play(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:44:53.800

您在这里访问 jquery，而不是普通的 dom 标签所以尝试：

```
$artItem.find("audio")[0].play() 
```

# teradata - Teradata SQLA：行大小或排序键大小溢出

> ID：11864784
> 
> 赞同：1
> 
> 时间：2012-08-08T12:43:20.687
> 
> 标签：teradata

从 SQLA 中包含 86 列的表中选择所有列时，我总是得到错误`Row size or Sort Key size overflow`。避免此错误的唯一方法是减少 select 中的列数，但这是一种非常规的解决方案。必须有一种方法可以在一个选择语句中从该表中选择所有列。

**赏金**

我正在添加这个赏金，因为我不能再破解这个问题了。必须有一个解决方案。现在，我正在从包含 Unicode 列的表中进行选择。我假设这导致行大小超过容量。当我`Session Character Set=UTF8`从我的连接字符串中删除时，我得到`The string contains an untranslatable character`. 我正在使用 NET 数据提供程序 14.0.0.1。有没有办法增加尺寸？

**更新**

罗布，你永远不会停止留下深刻的印象！您建议使用 UTF16 有效。在我更新我的 ODBC 配置后，它甚至可以在 SQLA 中工作。我一直认为我的问题是我对 ASCII、拉丁文、UTF8 和 UTF16 缺乏了解。

我们还有一个包含所有拉丁列的 80 列的表，其中一些是 `varchar(1000)'。在 UTF8 和 UTF16 中从 SQLA 中进行选择时，我在 SQLA 中遇到相同的错误，但在我的 ODBC 配置中将我的字符集更新为 ASCII 或拉丁模式后，我可以从中进行选择。

Rob，你能提供关于这里发生的事情的见解吗？我的理论是，因为它在拉丁语集中，使用 UTF8 或 UTF16 会导致转换为更大的字节集，从而导致错误，尤其是对于`varchar(1000)`'s. 如果我使用拉丁语作为我的会话字符集，则不会进行任何转换，并且我会以本机编码获得字符串。至于有问题的问题，UTF8失败是因为编码不能“降级”吗？

根据请求，这里是相关表的 DDL：

```
CREATE MULTISET TABLE mydb.mytable ,NO FALLBACK ,
     NO BEFORE JOURNAL,
     NO AFTER JOURNAL,
     CHECKSUM = DEFAULT,
     DEFAULT MERGEBLOCKRATIO
     (
      FIELD1 VARCHAR(214) CHARACTER SET LATIN CASESPECIFIC NOT NULL,
      FIELD2 VARCHAR(30) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD3 VARCHAR(60) CHARACTER SET UNICODE CASESPECIFIC NOT NULL,
      FIELD4 VARCHAR(4000) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD5 VARCHAR(900) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD6 VARCHAR(900) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD7 VARCHAR(900) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD8 VARCHAR(900) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD9 VARCHAR(900) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD10 VARCHAR(900) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD11 VARCHAR(3600) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD12 VARCHAR(3600) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD13 VARCHAR(3600) CHARACTER SET UNICODE CASESPECIFIC,
      FIELD14 VARCHAR(3600) CHARACTER SET UNICODE CASESPECIFIC)
PRIMARY INDEX ( FIELD1 ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-18T14:52:51.987

在没有看到您的表定义的情况下，您是否考虑过使用 UTF16 而不是 UTF8 `SESSION CHARSET`？

对您的错误消息进行的更多研究发现这篇**[文章](http://goldenorbit.wordpress.com/2013/03/09/latin-utf8-and-utf16-with-teradata/)**表明 UTF16 可能使您能够返回 UTF8 否则不会返回的记录。

**编辑**：如果您从我上面共享的链接中回忆起，对于给定的 VARCHAR(n)，要存储的字节如下：

*   拉丁语：n 字节
*   UTF8：n*3 字节
*   UTF16：n*2 字节

这意味着 UTF8 会话中的 VARCHAR(4000) UNICODE 字段应该需要 12KB。如果您必须始终如一地处理 UNICODE 数据，则将默认会话字符集保留或更改为 UTF16 可能对您有利。根据我的经验，我不必使用 UNICODE 数据，因此我无法告诉您更改字符集是否会为数据库中其他地方的 LATIN 数据引入什么陷阱。

希望这可以帮助。

# python - SUDS：在 Client.service 方法中传递数组参数：GAE Python

> ID：11864785
> 
> 赞同：1
> 
> 时间：2012-08-08T12:43:23.203
> 
> 标签：python, xml, soap, suds

在我的一个应用程序中，我在 GAE python 上使用[SUDS](https://fedorahosted.org/suds/wiki/Documentation) WSDL(SOAP) Web 服务。

我的**Py 代码**：

```
url = 'http://203.215.51.43/Gateway/Execute?WSDL'
client = Client(url)
print client 
```

所以它在**服务器控制台打印**

```
Suds ( https://fedorahosted.org/suds/ )  version: 0.4 GA  build: R699-20100913
Service ( GatewayService ) tns="urn:fks:jcaps:gateway"
   Prefixes (2)
      ns0 = "http://fks.com/gtwy"
      ns1 = "urn:fks:jcaps:gateway:JavaException"
   Ports (1):
      (Execute)
         Methods (1):
            redeem(xs:string SessionId, xs:string TerminalId, xs:string StoreCod
e, xs:string CashMemoNo, xs:string CashMemoDate, xs:double InvoiceAmount, xs:str
ing TimeStamp, xs:string CashierId, xs:string MerchantId, ns0:SPCReqDtls SPCReqD
tls, ns0:VoucherReqDtls[] VoucherReqDtls, ns0:CardReqDtls CardReqDtls, )
         Types (1):
            ns1:JavaExceptionType 
```

实际上可以在兑换方法中传递**字符串、双精度类型的值，但不能传递****数组/列表**类型，

```
result = client.service.redeem(SessionId=result['SessionId'], StoreCode='4739', TerminalId='T1081', TimeStamp='01-01-2011 01:01:00.000') 
```

但我无法在这里传递**VoucherReqDtls**数组

这个 VoucherReqDtls的**WSDL 的 XML**代码如下，

```
 <!--Zero or more repetitions:-->
             <gtwy:VoucherReqDtls>
                <gtwy:VoucherType>GV</gtwy:VoucherType>
                <!--1 or more repetitions:-->
                <gtwy:VoucherReq>
                   <gtwy:VoucherNo>344234242</gtwy:VoucherNo>
                </gtwy:VoucherReq>
                <gtwy:VoucherReq>
                   <gtwy:VoucherNo>675685858</gtwy:VoucherNo>
                </gtwy:VoucherReq>
             </gtwy:VoucherReqDtls> 
```

那么我如何在**兑换方法中传递****VoucherReqDtls**数组/列表，这里 VoucherType 是**GV**并且**VoucherNo**的计数可能不止一个。

 ******* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:31:34.113

我认为问题在于，如果您直观地检查 WSDL，redeem 方法期望`GatwayReq`可以使用以下代码创建复杂类型：

```
>>> it = client.factory.create('ns0:GatewayReq')
>>> it
(GatewayReq){
   SessionId = None
   TerminalId = None
   StoreCode = None
   CashMemoNo = None
   CashMemoDate = None
   InvoiceAmount = None
   TimeStamp = None
   CashierId = None
   MerchantId = None
   SPCReqDtls = 
      (SPCReqDtls){
         SPCNo = None
         SPCAmt = None
      }
   VoucherReqDtls[] = <empty>
   CardReqDtls = 
      (CardReqDtls){
         CardType = None
         CardReq = 
            (CardReq){
               CardNo = None
               TransAmt = None
            }
      }
 } 
```

您可以像添加任何对象属性一样将元素添加到 GatewayReq 对象，即

```
>>> it.SessionId = 'blahablhabalh'
>>> it
(GatewayReq){
   SessionId = "blahablhabalh"
   # the rest removed for readability 
```

然后，您将像这样调用兑换方法：

```
>>>> client.service.redeem(it) 
```

**编辑**

您可以使用以下语法创建所需的类型：

```
entry1 = client.factory.create('ns0:GatewayReq.ns0:VoucherReqDtls')
>>> entry1
(VoucherReqDtls){
   VoucherType = None
   VoucherReq[] = <empty>
 } 
```

这使用机制来访问此处指定的非顶级类型[suds docs - FACTORY](https://fedorahosted.org/suds/wiki/Documentation#FACTORY)

然后您可以将其添加到主请求对象，如下所示：

```
>>> entry1.VoucherType = 'GV'
>>> entry1.VoucherReq.append([12,34,56])
>>> entry1
(VoucherReqDtls){
   VoucherType = "GV"
   VoucherReq[] = 

      12,
      34,
      56,
 }
>>> entry1.VoucherReq.append(23)
>>> entry1
    (VoucherReqDtls){
       VoucherType = "GV"
       VoucherReq[] = 

      12,
      34,
      56,
      23,
 }

>>> it.VoucherReqDtls.append(entry1)
>>> it
(GatewayReq){
   SessionId = None
   TerminalId = None
   StoreCode = None
   CashMemoNo = None
   CashMemoDate = None
   InvoiceAmount = None
   TimeStamp = None
   CashierId = None
   MerchantId = None
   SPCReqDtls = 
      (SPCReqDtls){
         SPCNo = None
         SPCAmt = None
      }
   VoucherReqDtls[] = 
      (VoucherReqDtls){
         VoucherType = "GV"
         VoucherReq[] = 

            12,
            34,
            56,
            23,
  },
   CardReqDtls = 
      (CardReqDtls){
         CardType = None
         CardReq = 
            (CardReq){
               CardNo = None
               TransAmt = None
            }
      }
  } 
```

这会创建如下的 xml，其中包含所需的语法：

```
<SOAP-ENV:Header/>
   <ns0:Body>
      <ns1:GatewayReq>
         <ns1:SessionId>
            <ns1:SessionId/>
            <ns1:TerminalId/>
            <ns1:StoreCode/>
            <ns1:CashMemoNo/>
            <ns1:CashMemoDate/>
            <ns1:TimeStamp/>
            <ns1:CashierId/>
            <ns1:VoucherReqDtls>
               <ns1:VoucherType>GV</ns1:VoucherType>
               <ns1:VoucherReq>12</ns1:VoucherReq>
               <ns1:VoucherReq>34</ns1:VoucherReq>
               <ns1:VoucherReq>56</ns1:VoucherReq>
               <ns1:VoucherReq>23</ns1:VoucherReq>
            </ns1:VoucherReqDtls>
            <ns1:VoucherReqDtls>
               <ns1:VoucherType>GV</ns1:VoucherType>
               <ns1:VoucherReq>12</ns1:VoucherReq>
               <ns1:VoucherReq>34</ns1:VoucherReq>
               <ns1:VoucherReq>56</ns1:VoucherReq>
               <ns1:VoucherReq>23</ns1:VoucherReq>
            </ns1:VoucherReqDtls>
         </ns1:SessionId>
         <ns1:TerminalId/>
         <ns1:StoreCode/>
         <ns1:CashMemoNo/>
         <ns1:CashMemoDate/>
         <ns1:TimeStamp/>
         <ns1:CashierId/>
      </ns1:GatewayReq>
   </ns0:Body>
</SOAP-ENV:Envelope> 
```

或者至少我认为它应该是这样工作的

希望能帮助到你******

# ios - ios 是否可以向 facebook 好友发送 facebook 消息？

> ID：11864787
> 
> 赞同：1
> 
> 时间：2012-08-08T12:43:32.567
> 
> 标签：ios, facebook, facebook-graph-api

我正在构建一个需要代表登录用户向朋友发送消息的 iOS 应用程序。

假设用户 A 已登录到我的应用程序。

我有一个他所有朋友的列表，他可以从中选择一些。是否可以向选定的朋友发送私人消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:21:54.153

简而言之，您的问题的答案是否定的。

无法通过图形 api 发送消息。由于潜在的滥用，这已在一段时间前被删除。

他们确实有 XMPP/Jabber 接口，但它确实有消息没有的限制。

[https://developers.facebook.com/docs/chat/](https://developers.facebook.com/docs/chat/)

# java - 使用 Achartengine 是否可以使用多个堆叠条形图？

> ID：11864788
> 
> 赞同：4
> 
> 时间：2012-08-08T12:43:36.357
> 
> 标签：java, android, bar-chart, achartengine, stacked

我尝试使用 achartengine 将另一组值添加到[堆叠条形图](http://www.androidadb.com/source/achartengine-read-only/achartengine/demo/org/achartengine/chartdemo/demo/chart/SalesStackedBarChart.java.html)的演示示例中，但我引入的新值没有出现在图表上。堆叠条是否仅限于两个条？

```
public Intent getIntent(Context context) {

    String[] titles = new String[] { "Good", "Defect", "Repair" };
    List<double[]> values = new ArrayList<double[]>();

    values.add(new double[] { 14230, 12300, 1424, 15240, 15900, 19200,
    22030, 21200, 19500, 15500, 12060, 14000 });
    values.add(new double[] { 14230, 12300, 14240, 15244, 15900, 19200,
            22030, 21200, 19500, 15500, 12600, 14000 });
    values.add(new double[] { 5230, 7300, 9240, 10540, 7900, 9200, 12030,
            11200, 9500, 10500, 11600, 13500 });

    int[] colors = new int[] { Color.GREEN, Color.YELLOW, Color.RED };

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);

    setChartSettings(renderer, "Machine Efficiency Rates",
            "Machine", "NET produce", 0.5, 12.5, 0, 24000, Color.GRAY,
            Color.LTGRAY);

    renderer.getSeriesRendererAt(0).setDisplayChartValues(true);
    renderer.getSeriesRendererAt(1).setDisplayChartValues(true);
    renderer.getSeriesRendererAt(2).setDisplayChartValues(true);
    renderer.setXLabels(12);
    renderer.setYLabels(5);
    renderer.setXLabelsAlign(Align.LEFT);
    renderer.setYLabelsAlign(Align.LEFT);
    renderer.setPanEnabled(true, false);
    renderer.setZoomEnabled(true);
    renderer.setZoomRate(1.1f);
    renderer.setBarSpacing(0.5f);
    return ChartFactory.getBarChartIntent(context,
            buildBarDataset(titles, values), renderer, Type.STACKED);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:04:53.677

AChartEngine 显示堆叠条形图的方式存在误解。它并没有真正堆叠它们，而是将它们一个接一个地显示出来。这意味着您将始终希望始终先添加较大的值，然后再添加较小的值，依此类推，因为它呈现第一个系列，第二个系列高于第一个，依此类推。

更新：从 1.2.0 版开始，有新的`HEAP`堆积条形图，以您需要的方式显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T00:45:37.187

我找不到一个好的答案。但是，您可以使用 getCombinedXYChartIntent 创建多个堆叠条形图。

我使用 CombinedTemperatureChart 作为模板并进行了修改以实现此目的。

最初的原始代码是这样的

```
package org.achartengine.chartdemo.demo.chart;

import java.util.ArrayList;
import java.util.List;

import org.achartengine.ChartFactory;
import org.achartengine.chart.BarChart;
import org.achartengine.chart.BubbleChart;
import org.achartengine.chart.CubicLineChart;
import org.achartengine.chart.LineChart;
import org.achartengine.chart.PointStyle;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.model.XYSeries;
import org.achartengine.model.XYValueSeries;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;

import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Paint.Align;

/**
 * Combined temperature demo chart.
 */
public class CombinedTemperatureChart extends AbstractDemoChart {
  /**
   * Returns the chart name.
   * 
   * @return the chart name
   */
  public String getName() {
    return "Combined temperature";
  }

  /**
   * Returns the chart description.
   * 
   * @return the chart description
   */
  public String getDesc() {
    return "The average temperature in 2 Greek islands, water temperature and sun shine hours (combined chart)";
  }

  /**
   * Executes the chart demo.
   * 
   * @param context the context
   * @return the built intent
   */
  public Intent execute(Context context) {
    String[] titles = new String[] { "Crete Air Temperature", "Skiathos Air Temperature" };
    List<double[]> x = new ArrayList<double[]>();

    for (int i = 0; i < titles.length; i++) {
      x.add(new double[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 });
    }

    List<double[]> values = new ArrayList<double[]>();

    values.add(new double[] { 12.3, 12.5, 13.8, 16.8, 20.4, 24.4, 26.4, 26.1, 23.6, 20.3, 17.2, 13.9 });
    values.add(new double[] { 9, 10, 11, 15, 19, 23, 26, 25, 22, 18, 13, 10 });
    int[] colors = new int[] { Color.GREEN, Color.rgb(200, 150, 0) };
    PointStyle[] styles = new PointStyle[] { PointStyle.CIRCLE, PointStyle.DIAMOND };
    XYMultipleSeriesRenderer renderer = buildRenderer(colors, styles);
    //renderer.setPointSize(5.5f);
    int length = renderer.getSeriesRendererCount();
    for (int i = 0; i < length; i++) {
      XYSeriesRenderer r = (XYSeriesRenderer) renderer.getSeriesRendererAt(i);
      r.setDisplayChartValues(true);
      r.setChartValuesTextSize(25);
      //r.setLineWidth(2);
      r.setFillPoints(true);
    }
    setChartSettings(renderer, "Weather data", "Month", "Temperature", -1, 12.5, 0, 40,
        Color.LTGRAY, Color.LTGRAY);

    renderer.setXLabels(12);
    renderer.setYLabels(10);
    renderer.setShowGrid(true);
    renderer.setXLabelsAlign(Align.RIGHT);
    renderer.setYLabelsAlign(Align.RIGHT);
    renderer.setZoomButtonsVisible(true);
    renderer.setPanLimits(new double[] { -10, 20, -10, 40 });
    renderer.setZoomLimits(new double[] { -10, 20, -10, 40 });

    XYValueSeries sunSeries = new XYValueSeries("Sunshine hours");
    sunSeries.add(0.5, 17);
    sunSeries.add(1.5, 18);
    sunSeries.add(2.5, 19);
    sunSeries.add(3.5, 19);
    sunSeries.add(4.5, 20.8);
    sunSeries.add(5.5, 24.9);
    sunSeries.add(6.5, 26);
    sunSeries.add(7.5, 27.8);
    sunSeries.add(8.5, 28.4);
    sunSeries.add(9.5, 25.5);
    sunSeries.add(10.5, 23.5);
    sunSeries.add(11.5, 19.5);

    XYSeriesRenderer lightRenderer = new XYSeriesRenderer();
    lightRenderer.setColor(Color.YELLOW);

    XYSeries waterSeries = new XYSeries("Water Temperature");
    waterSeries.add(0.5, 16);
    waterSeries.add(1.5, 15);
    waterSeries.add(2.5, 16);
    waterSeries.add(3.5, 17);
    waterSeries.add(4.5, 20);
    waterSeries.add(5.5, 23);
    waterSeries.add(6.5, 25);
    waterSeries.add(7.5, 25.5);
    waterSeries.add(8.5, 26.5);
    waterSeries.add(9.5, 24);
    waterSeries.add(10.5, 22);
    waterSeries.add(11.5, 18);

    renderer.setBarSpacing(2);
    renderer.setBarWidth(2);
    XYSeriesRenderer waterRenderer = new XYSeriesRenderer();
    waterRenderer.setColor(Color.argb(250, 0, 210, 250));

    XYMultipleSeriesDataset dataset = buildDataset(titles, x, values);
    dataset.addSeries(0, sunSeries);
    dataset.addSeries(1, waterSeries);
    renderer.setBarWidth(0.5f);
    renderer.addSeriesRenderer(lightRenderer);
    renderer.addSeriesRenderer(waterRenderer);

    waterRenderer.setDisplayChartValues(true);
    waterRenderer.setChartValuesTextSize(25);

    lightRenderer.setDisplayChartValues(true);
    lightRenderer.setChartValuesTextSize(25);

    String[] types = new String[] {  BarChart.TYPE, BarChart.TYPE, BarChart.TYPE, BarChart.TYPE };
    Intent intent = ChartFactory.getCombinedXYChartIntent(context, dataset, renderer, types,
        "Weather parameters");
    return intent;
  }

} 
```

我希望有人仍然需要这个，这需要一些时间才能弄清楚。不幸的是，我没有粘贴图像的要点。

# html - Twitter引导全宽面板正在修剪

> ID：11864790
> 
> 赞同：1
> 
> 时间：2012-08-08T12:43:51.053
> 
> 标签：html, css, twitter-bootstrap

我正在使用引导程序处理一个固定宽度的页面，我注意到在 iPhone 上测试它时，全宽页眉和页脚背景被剪裁为宽度的 70%。

这是一个商业营销类型的网站，寻找供应商的人经常光顾，通常来自他们的办公室 PC，因此响应方面不是必需的，但我离题了。

## 回到问题

在全尺寸屏幕上查看它看起来应该是这样，但是如果您滚动小于容器类的限制（在本例中为 940 像素）然后向后滚动一点，您可以看到背景已被修剪。

我已经对它进行了一段时间的修改，以至于我已经剥离了所有内容，只是放入了一堆简单的嵌套 div 来测试并确保问题不是一些胭脂标签，但它仍然做同样的事情。

我认为这个问题与未包装在容器类中的项目有关，但如果我需要一个全宽面板和 940 像素的固定内容，我不确定我将如何使用引导程序来实现它。

```
// This Fails
<body>
    <header class="fullwidth">
        <div class="container">
            <p>The content</p>
        </div>
    </div>
</body>

// This is fine but not full width
<body>
    <header class="container">
        <p>The content</p>
    </header>
</body> 
```

如果我将引导程序或我的样式一起移除并手动重新设计主体，我没有掺假它会消失。但这似乎是一个累积的问题......

有人遇到过这个吗？

如果可能的话，我真的不想剥离引导程序。

根据要求，我附加了链接：http: [//jsfiddle.net/NcZFz/3/](http://jsfiddle.net/NcZFz/3/)

如果您在 jsfiddle 中注意到，无论您的视口是什么大小，标题都会填充它，但仅视口。如果您使用的是 MAc 并且有一个魔术鼠标（或其他），您可以在该视口中向右滚动以查看白色。但这应该是边缘到边缘，所以不应该有白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:50:26.353

看来您在`<ul id="menu-primary-navigation">`

```
#menu-primary-navigation { margin-left: 0; } 
```

而且你也应该穿上`.clearfix`相同的元素（因为孩子们是浮动的）

```
<ul id="menu-primary-navigation" class="clearfix"> 
```

检查这个[工作 jsfiddle](http://jsfiddle.net/Sherbrow/NcZFz/2/)。

`.navbar .nav`如果您使用类（和关联），则可以避免上述所有修复：阅读[文档](http://twitter.github.com/bootstrap/components.html#navbar)。

# c# - 通知客户端应用程序插入数据库中的新记录

> ID：11864793
> 
> 赞同：0
> 
> 时间：2012-08-08T12:44:02.237
> 
> 标签：c#, mysql, client, notify

我想开发一个 C# windows 客户端应用程序，每当插入新的数据库记录时通知用户。服务器是一个远程 linux 机器，以 mysql 作为数据库引擎，它有 PHP 前端。由于我是 C# 世界的新手，我想就如何解决这个问题提出一些建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:45:49.817

我不熟悉 .NET 的 MySQL API，但是在网上快速搜索并没有比实现自己的轮询逻辑更好，例如这个 SO 问题：[Update C# client when database is updated](https://stackoverflow.com/questions/3768592/update-c-sharp-client-whenever-database-is-updated)

为此，您可以将 DateTime 列添加到您需要轮询并存储最后轮询时间的所有表中。这样就可以查询自上次轮询间隔以来已更改的所有记录。

至于**客户端的通知**，这里我建议使用某种消息框架。在同质的 Microsoft 环境中，我建议使用 Microsoft Message Queue [MSMQ](http://blogs.msdn.com/b/motleyqueue/archive/2009/05/31/msmq-and-wcf-getting-started.aspx)。（纯）MSMQ 的优点在于该功能由 .NET**开箱**即用地支持。使用它很简单，您会很快找到使用它的方法。

还有许多其他框架构建在 MSMQ 之上，使您的生活更轻松和/或提供附加功能，例如开源项目[MassTransit](http://code.google.com/p/masstransit/)或[NServiceBus](http://www.nservicebus.com/)。因为您同时使用**Windows 和 Linux**系统，所以可能值得看看支持大多数主要操作系统的[RabbitMQ 。](http://www.rabbitmq.com/)

使用这种消息传递系统的优势在于，您可以配置应用程序，使消息发布者和接收者都不需要相互了解。例如，它们不需要彼此有硬编码的引用（或地址）。

这为您提供了极大的*灵活性和可扩展性*，无论您在任何给定时间有多少客户在线。

# php - 使用 URLLoader 将文件从 AS3 写入 PHP 时的 HttpStatus 0

> ID：11864794
> 
> 赞同：1
> 
> 时间：2012-08-08T12:44:01.647
> 
> 标签：php, actionscript-3

我正在 AS3 中做一个项目，用户可以在其中设计一些东西并在之后订购。设计导出为 PDF、PNG 和 XML。这些文件我想保存在服务器上。在 MAMP 上一切正常，我得到了 HTTPStatus 200，请注意，我从 MAMP 运行我的 SWF，但是在**远程服务器**上成功访问了 php 脚本，并且文件也成功写入了远程服务器。但是，当我将 SWF 复制到远程服务器时，文件没有保存并且我得到 HTTPStatus 0。

在我使用的类中（参见下面的 AS3 代码），我使用 URLLoader 来获取以下一行 php 脚本：

```
<?php file_put_contents($_POST['location'] . $_POST['fileName'], base64_decode($_POST['fileData'])); 
```

这里是 AS3 类：

```
public class ServerConnection extends Sprite
{
    private var _files:Array = new Array();
    private var _fileNames:Array;
    private var _fileLocation:String = "";
    private var _scriptLocation:String;

    private var _fileSavesInProgress:Array = new Array();

    public function ServerConnection(scriptLocation:String = null, files:Array = null, fileNames:Array = null)
    {
        if (scriptLocation) setScriptLocation(scriptLocation);
        if (files) setFiles(files);
        if (fileNames) setFileNames(fileNames);
    }

    public function encodeFiles():void {
        for(var i:uint = 0; i < _files.length; i++) {
            _files[i] = encodeFile(_files[i]);
        }
    }
    public function encodeFile(byteArray:ByteArray):Base64Encoder {
        var base64:Base64Encoder = new Base64Encoder();
        base64.encodeBytes(byteArray);
        return base64;
    }

    public function saveFiles(location:String = null):void {
        if (location) setFileLocation(location);
        for(var i:uint = 0; i < _files.length; i++) {
            _files[i] = saveFile(_files[i], _fileNames[i]);
        }
    }
    public function saveFile(encodedFile:Base64Encoder, fileName:String = "test"):void {
        var data:URLVariables = new URLVariables();
        data.fileData = encodedFile;
        data.fileName = fileName;
        data.location = _fileLocation;
        this.dispatchEvent(new DebugEvent(DebugEvent.MESSAGE, "@serverConnection: a save file request was made for " + 
            fileName + "\n" +
            "url: " + _fileLocation + "\n" +
            " scriptLocation: " + _scriptLocation + "\n"
        ));

        var request:URLRequest = new URLRequest(_scriptLocation);
        request.method = URLRequestMethod.POST;
        request.data = data;

        var loader:URLLoader= new URLLoader();
        loader.addEventListener(Event.COMPLETE, function(e:Event):void {fileSaved(loader);});
        loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatus);
        loader.addEventListener(IOErrorEvent.IO_ERROR, ioError);
        _fileSavesInProgress.push(loader);

        try {
            loader.load(request);
        } catch (e:*) {
            this.dispatchEvent(new DebugEvent(DebugEvent.MESSAGE, "@serverConnection: error:* = " + e + " \n"));
        }

        //navigateToURL(request);
    }

    public function displayObjectToPNG(displayObject:*, scale:Number = 1):ByteArray {
        var bmpData:BitmapData=new BitmapData(displayObject.width, displayObject.height, true, 0xFFFFFF);
        bmpData.draw(displayObject);

        var byteArray:ByteArray = PNGEncoder.encode(bmpData);
        return byteArray;
    }

    public function xmlToByteArray(xml:XML):ByteArray {
        var byteArray:ByteArray = new ByteArray();
        byteArray.writeUTFBytes(xml);
        return byteArray;
    }

    public function setScriptLocation(url:String):void {
        _scriptLocation = url;
    }

    public function setFileLocation(url:String):void {
        _fileLocation = url;
    }

    public function setFiles(array:Array, encode:Boolean = true):void {
        for each(var file:* in array) {
            for each(var type:XML in describeType(file).extendsClass.@type) { 
                if (type == "flash.display::DisplayObject") file = displayObjectToPNG(file);
            }
            if (typeof(file) == "xml") {
                file =  xmlToByteArray(file);
            }

            _files.push(file);
        }
        if (encode) encodeFiles();
    }

    public function setFileNames(array:Array):void {
        _fileNames = array;
    }

    // EVENTS
    private function httpStatus(e:HTTPStatusEvent):void {
        this.dispatchEvent(new DebugEvent(DebugEvent.MESSAGE, "@serverConnection: status = " + e.status + " \n"));
    }

    private function ioError(e:IOErrorEvent):void {
        this.dispatchEvent(new DebugEvent(DebugEvent.MESSAGE, "@serverConnection: IOErrorID = " + e.errorID + "  Message: "+ e.text + " \n"));
    }

    private function fileSaved(loader:URLLoader):void {
        this.dispatchEvent(new DebugEvent(DebugEvent.MESSAGE, "@serverConnection: file save completed. " + (_fileSavesInProgress.length -1) + " files to go \n"));
        _fileSavesInProgress.splice(_fileSavesInProgress.indexOf(loader), 1);

        if (_fileSavesInProgress.length == 0) {
            filesSaved();
        }
    }

    private function filesSaved():void {
        this.dispatchEvent(new DebugEvent(DebugEvent.MESSAGE, "@serverConnection: files saved \n"));
        this.dispatchEvent (new ClassAttributesLoaded(ClassAttributesLoaded.CLASS_ATTRIBUTES_LOADED));
    }

} 
```

我这样实现

```
 var s:ServerConnection = new ServerConnection(
    CONSTANT.SAVE_FILE_SCRIPT_LOCATION, 
    [currentTemplate.getXML(), exampleTemplate, pdf.save(Method.LOCAL)], 
    [CONSTANT.PACKAGE_ID + ".xml", CONSTANT.PACKAGE_ID + ".png", CONSTANT.PACKAGE_ID + ".pdf"]
);
s.addEventListener(DebugEvent.MESSAGE, writeToDebug);
s.addEventListener(ClassAttributesLoaded.CLASS_ATTRIBUTES_LOADED, exit);
s.saveFiles(CONSTANT.RELATIVE_FILE_DIRECTORY); 
```

**当我更改 loader.load(request); 导航到URL（请求）；代码确实有效。在本地和远程服务器上。**出于明显的原因，在这种情况下我不能使用 navigateToURL。我确实认为 navigateToURL 确实有效并且 loader.load(request) 并没有说明问题的事实......但是什么？

我有点坚持这一点，并希望得到帮助。提前致谢！

PS：为了测试，我已将远程 DIR 的权限设置为 777。此外，文件已成功从 MAMP 保存到远程，如前所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:49:42.970

**解决方案**

经过长时间的研究，我找到了解决方案：将以下 crossdomain.xml 添加到我的网络服务器的根目录 (www.mysite.nl/)。

```
<?xml version="1.0" ?>

<cross-domain-policy>
    <site-control permitted-cross-domain-policies="master-only"/>
    <allow-access-from domain="*.mydomain.com" to-ports="*"/>
    <allow-http-request-headers-from domain="*.mydomain.com" headers="*"/>
</cross-domain-policy> 
```

这不安全，因此如果您想使用此解决方案，请将“mydomain.com”更改为您要允许的特定域。所以解决了它。

**我是如何得到答案的**

我能够使用以下代码捕获错误：

```
loader.addEventListener(IOErrorEvent.IO_ERROR, handleSecurityError); 
```

返回的错误如下： [SecurityErrorEvent type="securityError" bubbles=false cancelable=false eventPhase=2 text="Error #2048"]

请注意，通常错误包含： [SecurityErrorEvent type="securityError" bubbles=false cancelable=false eventPhase=2 text="Error #2048: Security Sandbox Violation : [http://www.domain-a.com/url/file- a.swf](http://www.domain-a.com/url/file-a.swf)无法从[http://www.domain-b.com/url/file-b.swf](http://www.domain-b.com/url/file-b.swf)加载数据"]

此错误通常通过加载安全策略来解决。查看有关如何使用安全策略的链接：http: [//kb2.adobe.com/cps/142/tn_14213.html](http://kb2.adobe.com/cps/142/tn_14213.html)

但是在这种情况下，访问的 url 在同一个域中。（注意：同一个文件夹：D）所以最初我认为这无关紧要，因为没有联系其他域。但是在搜索了一周之后，我变得如此绝望，我无论如何都尝试了。

因此，将 crossdomain.xml 添加到我的服务器的根目录就解决了这个问题。

# objective-c - 如何使用 MPMoviePlayerController 控制视频的播放部分

> ID：11864796
> 
> 赞同：0
> 
> 时间：2012-08-08T12:44:07.720
> 
> 标签：objective-c, ios, mpmovieplayercontroller

我正在使用 MPMoviePlayerController 制作应用程序，我想制作特殊功能。

我想要的功能是这样的。如果我播放电影，播放器将在几秒钟后停止（例如：30 秒）。如果我点击播放按钮，播放器必须从 30 秒播放到下一个停止点。

`initialPlaybackTime`为了实现这个功能，我使用`endPlaybackTime`了`MPMoviePlayerController`.

但是，这个功能并没有像我想象的那样工作。

```
mplayer.initialPlaybackTime = 0;
mplayer.endPlaybackTime = 10;
[mplayer play];
....
[mplayer pause];
....    
mplayer.initialPlaybackTime = 10;
mplayer.endPlaybackTime =30;
[mplayer play]; 
```

并且，mplayer 从 0 到 10 再次播放，而不是从 10 到 30。

有另一种方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:52:58.230

您是否尝试设置 currentPlaybackTime 属性，而不是设置 initialPlaybacktime？我会试试看：

```
[mplayer setCurrentPlaybackTime:10]; 
```

或者，使用点符号：

```
mplayer.currentPlaybackTime = 10; 
```

# android - 检查线程是否从“母亲”类运行

> ID：11864797
> 
> 赞同：0
> 
> 时间：2012-08-08T12:44:09.937
> 
> 标签：android, sqlite

在我的主要活动中，我有一个线程正在做*很多*事情，包括向数据库添加一些记录。在从主活动继承的第二个活动中，我想对我的数据库进行查询。但是我需要检查 Main Activity 中的第一个线程是否完成，到目前为止我所做的是：

```
public class History extends Main {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 

    if(!(MainThread.isAlive())) {
            getFromDatabase();
    }
}
} 
```

这是我的`getFromDatabase()`方法

```
 pd = ProgressDialog.show(this, "Please Wait",
                "Getting cases from database", false);

    Thread t = new Thread(this);
    t.start(); 
```

它将调用此运行方法：

```
@Override
public void run() {

    ArrayList<Case> c = db1.getAllCases();
    Message msg = handler.obtainMessage();
    msg.obj = c;
    handler.sendMessage(msg);
}

private Handler handler = new Handler() {

    @SuppressWarnings("unchecked")
    @Override
    public void handleMessage(Message m) {
        pd.dismiss();
        list = (ArrayList<Case>) m.obj;
        tempList = getCaseNumberToTempList(list);
        tempCaseList = createTempList(list);

        lv.setAdapter(new CustomAdapter(History.this, list));
        lv.setTextFilterEnabled(true);
    }
}; 
```

但是如果我这样做，下面的代码行会使我的应用程序崩溃，它会给出`NullPointerException`：

```
if(!(MainThread.isAlive())) {
            getFromDatabase();
    } 
```

在我从历史活动中查询数据库之前，如何确保第一个线程已完成所有工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:48:18.010

您可以`Thread`将`getFromDatabase()`方法中的 设为静态类级别变量，在您的 中为它编写一个静态 get 方法，并在您的 child 中`Activity`检查。`isAlive()``Activity`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:10:44.600

简单地使用一个信号量变量，一旦它达到某个状态，你就可以从线程中修改它？

# php - 使用 PHP 在 IMAP 服务器上查找具有确切电子邮件地址的电子邮件

> ID：11864800
> 
> 赞同：2
> 
> 时间：2012-08-08T12:44:15.087
> 
> 标签：php, email, search, imap

我想连接到 IMAP 服务器并查找发送到的所有电子邮件`abc@server.tld`。我试过了：

```
$mbox = imap_open("{imap.server.tld/norsh}", "imap@server.tld", "5ecure3");
$result = imap_search($mbox, "TO \"abc@server.tld\"", SE_UID); 
```

但这也列出了发送到的电子邮件，例如`123abc@server.tld`. 是否有可能搜索完全匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:37:56.733

简短的回答：你不能。[我在RFC 2060 - Internet Message Access Protocol - Version 4rev1](http://www.faqs.org/rfcs/rfc2060.html)中没有找到任何可以完成的内容。

但是，有一个解决方法。首先获取所有包含`abc@server.tld`的电子邮件，然后遍历结果并仅选择完全匹配的内容。

```
$searchEmail = "abc@server.tld";
$emails = imap_search($mbox, "TO $searchEmail");
$exactMatches = array();

foreach ($emails as $email) {
    // get email headers
    $info = imap_headerinfo($mbox, $email);

    // fetch all emails in the TO: header
    $toAddresses = array();
    foreach ($info->to as $to) {
        $toAddresses[] = $to->mailbox . '@' . $to->host;
    }   

    // is there a match?
    if (in_array($searchEmail, $toAddresses)) {
        $exactMatches[] = $email;
    }
} 
```

现在你有所有匹配`abc@server.tld`的电子邮件`$exactMatches`

# javascript - javascript函数没有被调用

> ID：11864801
> 
> 赞同：1
> 
> 时间：2012-08-08T12:44:17.957
> 
> 标签：javascript

我第一次编写带有显示原型模式的 javascript 代码。我有问题。当我在用户单击添加按钮时调用添加函数时，它会在控制台中显示此错误。

`Uncaught TypeError: Cannot call method 'add' of undefined`

我怎么解决这个问题？

这是我的 script.js 代码

```
$(function () {
var todo = Todo('contents');

$('.addBtn').on('click', function() {
    var name = $(this).parent().find('input[type="text"]').val();
    todo.add(name);
});

$('.contents').on('click', '.remove', function() {
    var el = $(this).parent();
    todo.remove(el);
});

$('.contents').on('click', '.update', function() {
    var dom = $(this);
    todo.addUpdateField(dom);
});

$('.contents').on('click', '.updateBtn', function() {
    var el = $(this);
    todo.update(el);
});

}); 
```

这是我的 todo.js 代码

```
var Todo = function(c) {
    this.contents = $('.' + c);
};

Todo.prototype = function() {
var showel = function (d) {
    this.contents.prepend(d);
},

add = function (name) {
    if(name != "") {
        var div = $('<div class="names"></div>')
        .append('<span>' + name + '</span>')
        .append("<button class='update' class='update'>Edit</button>")
        .append("<button class='remove' name='remove'>Remove</button>");
    }

    return showel(div);
},

addUpdateField = function (dom) {
    var name = dom.parent().find('span').text(),
        field = $('<input type="text" value="' + name + '" />'),
        update = $('<button class="updateBtn">Update</button>');

    dom.parent().html('').append(field).append(update);

    return;
},

update = function(el) {
    var val = el.parent().find('input').val();
    el.parent().html('<span>' + val + '</span>')
    .append('<button class="update" class="update">Edit</button>')
    .append('<button class="remove" class="remove">Remove</button>');

    return;
},

remove = function (el) {
    return el.remove();
};

return {
    add             : add,
    update          : update,
    remove          : remove,
    addUpdateField  : addUpdateField
};

}(); 
```

**更新**

改变后 `var todo = Todo('contents');`

至

`var todo = new Todo('contents');`

我收到这个错误

`Object [object Object] has no method 'add'`

**更新 2**

这是我的[jsfiddle](http://jsfiddle.net/BagmY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:46:51.273

您没有正确构建对象，因此它没有任何原型：

`var todo = Todo('contents');`

应该：

`var todo = new Todo('contents');`

这是一个[SO 问题](https://stackoverflow.com/questions/5385372/using-new-in-constructors-john-resigs-35)，解释了当您忘记`new`.

编辑：您定义原型函数的方式正在弄乱上下文（`this`指向什么）。试试这样的模式：

```
Todo.prototype = {
    method1: function () { ... },
    method2: function () { ... }
}; 
```

固定小提琴：http: [//jsfiddle.net/BagmY/3/](http://jsfiddle.net/BagmY/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:02:27.713

您正在尝试将`Todo`'s分配`prototype`给自调用函数。但是，原型只是被分配给一个函数，而不是预期的返回对象。

这是你的工作[小提琴](http://jsfiddle.net/BagmY/2/)。我使用您的方法将原型直接分配给一个对象。

此外，JS 从上到下解析。`Todo`因此，在您声明什么是之后定义您的新实例`Todo`。

这是自调用函数的样子：

```
Todo.prototype = (function() {

    // ...

    return {
        add: add,
        update: update,
        remove: remove,
        addUpdateField: addUpdateField
    };

})();​ 
```

# swt - FormLayout、FormData 和控件

> ID：11864803
> 
> 赞同：3
> 
> 时间：2012-08-08T12:44:22.973
> 
> 标签：swt, eclipse-rcp, jface

有人可以向我解释一下 FormLayout 上的 FormData 是如何工作的吗？我试图了解 FormAttachment 构造函数及其参数（分子、偏移量、分母）。你什么时候只需要其中一个，其中两个或所有参数......另外，如果我有一个组（或复合），它将添加按钮和标签等小部件，需要根据分辨率调整大小FormData，Group 是否也需要有一个 FormLayout？我尝试使用表单布局指定组的宽度但没有变化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:15:54.953

FormAttachment 有几个不同的构造函数，我通常使用两个：

new FormAttachment (int numerator, int offset) - 如果只有两个整数参数，则第一个参数表示距父节点边缘的百分比。哪条边由您将 FormAttachment 插入的 FormData 对象中的哪个槽确定：FormData.top、data.bottom、data.left 和 FormData.right。

new FormAttachment (Control control, int offset) - 这不是将对象定位在父对象上，而是将对象定位在另一个子对象旁边。这与前面的构造函数一起工作，以便您有效地将一个元素“锚定”到父元素上，然后通过相对于锚点定位其他元素来构建布局。这还允许您轻松地将元素移动和插入到整体布局中，而无需重建整个布局。

其他的是这两个主题的变体。FormAttachment(int numerator, int denominator, int offset)和FormAttachment一样，有两个整数参数，但是有两个分母就变成了“100”，即把分子变成百分比。但是你可以说像 (1, 2, 0) 代表 1/2 的跨度或 (1, 3, 0) 代表 1/3 的空间。

我不确定 Group 是否需要定义布局是什么意思，但通常每个父 Composite 都必须在其上定义布局以显示子元素。如果您希望元素随着父元素的大小调整大小，一种选择是将子元素附加到元素的左侧和右侧：

```
FormData formData = new FormData();
formData.left = new FormAttachment (0, 0); // Attach at the 0% left with 0 offset
formData.right = new FormAttachment (100, 0); // Attach at the 100% right with 0 offset 
```

Eclipse 站点有很多显示 FormLayout 的优秀片段，请查看：

[http://www.eclipse.org/swt/snippets/](http://www.eclipse.org/swt/snippets/)

向下滚动到 FormLayout 部分。

# c# - 使用多线程 C# 向 DatagridView 插入多行？

> ID：11864804
> 
> 赞同：0
> 
> 时间：2012-08-08T12:44:23.080
> 
> 标签：c#, multithreading, datagridview

我正在做网站上的报废程序。我有很多线程可以将信息更新到 datagridview。我正在使用数据集将绑定源设置为 datagridview。当我插入大约 100k 行时。我的 GUI 程序显示“无响应”。我不知道如何解决它。这是我要插入的代表：

```
public void InsertLine(string line)
{
  this.MyDV.BeginInvoke(new MethodInvoker(delegate()
  {                 
    string[] park = Regex.Split(line, @",");
    try
    {
        //Insert new row
        MyDatasset.MyTableRow row = this.MyDataSet.MyTable.NewMyTableRow();
        row.Message = park[0].Trim();
        row.From = park[1].Trim();              
        this.MyDataSet.MyTable.Rows.Add(row);

        //Set color text for new row
        DataGridViewRow myrow = (from DataGridViewRow r in MyDV.Rows
                                 where (long)r.Cells[clId.Name].Value == row.Id
                                 select r).FirstOrDefault();
        if (myrow != null)
        {
            myrow.Cells[clFrom.Name].Style.ForeColor = Color.Blue;
            myrow.Cells[clMessage.Name].Style.ForeColor = Color.Blue;
        }       
    }
    catch { }
    try
    {
        this.MyDV.FirstDisplayedScrollingRowIndex = this.MyDV.Rows[this.MyDV.Rows.Count - 2].Index; //Scroll to lastest row
    }
    catch { }       
}));  } 
```

你们能帮帮我吗？我被它弄糊涂了好几个小时。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:58:41.887

您正在做的是在 UI 线程上调用该代码。这是一个可能迭代*许多*行的循环。这可能需要很长时间并阻止 UI 线程执行任何其他操作。您可以尝试将工作分解为更小（或固定大小）的块并单独调用它们——这将允许 UI 线程处理其间的其他消息。

或者，您可以在`Application.Idle`活动中完成工作；但是，您可能仍然需要将工作分解为固定大小的块，因为您应该只花费一小部分（理想情况下是固定的）时间`Idle`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T13:17:19.133

我认为您在这里遇到的问题是您没有锁定上面的代码，并且它被多个线程同时访问。

您需要使用：-

```
Lock (this)

{

this.MyDV.BeginInvoke(new MethodInvoker(delegate()
  {                 
    string[] park = Regex.Split(line, @",");
    try
    {
        //Insert new row
        MyDatasset.MyTableRow row = this.MyDataSet.MyTable.NewMyTableRow();
        row.Message = park[0].Trim();
        row.From = park[1].Trim();              
        this.MyDataSet.MyTable.Rows.Add(row);

        //Set color text for new row
        DataGridViewRow myrow = (from DataGridViewRow r in MyDV.Rows
                                 where (long)r.Cells[clId.Name].Value == row.Id
                                 select r).FirstOrDefault();
        if (myrow != null)
        {
            myrow.Cells[clFrom.Name].Style.ForeColor = Color.Blue;
            myrow.Cells[clMessage.Name].Style.ForeColor = Color.Blue;
        }       
    }
    catch { }
    try
    {
        this.MyDV.FirstDisplayedScrollingRowIndex = this.MyDV.Rows[this.MyDV.Rows.Count - 2].Index; //Scroll to lastest row
    }
    catch { }       
}));  }

} 
```

这应该使每个线程依次等待使用您的插入委托。

另请查看：- [http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.71).aspx)

# java - 为什么 == 对于 Integer 和 String 不同？

> ID：11864806
> 
> 赞同：2
> 
> 时间：2012-08-08T12:44:29.083
> 
> 标签：java

```
main(){

Integer i1 = 500;

Integer i2 = 500;

System.out.println(i1 == i2);  // O/P is "**false**"

String s1 = "Hello";

String s2 = "Hello";

System.out.println(s1 == s2);  // O/P is "**true**"

} // End of main. 
```

我无法弄清楚为什么输出不同。据我所知 s1，s2 将指向堆上的同一个对象。所以它们的参考地址是相同的。同样，我认为 Integer 也是一样的。但事实并非如此。为什么不一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T12:48:14.523

这里已经回答了：[java: Integer equals vs. ==](https://stackoverflow.com/questions/3637936/java-integer-equals-vs)

摘自这篇文章：JVM 正在缓存整数值。== 仅适用于 -128 和 127 之间的数字。因此在您的示例中它不适用于 500。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:48:09.443

这个问题的答案应该有助于解释它： [如何正确比较 Java 中的两个整数？](https://stackoverflow.com/questions/1514910/when-comparing-two-integers-in-java-does-auto-unboxing-occur)

你几乎回答了你自己的问题。“==”不仅比较字符串中的参考点，而且似乎对整数做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:48:49.470

您指定“Hello”的方式不进行堆分配。相反，“Hello”作为静态编译时常量将被外包给可执行文件的特定部分并被引用。因此，两个引用都指向同一个地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:49:19.703

所以有 Java 字符串池，这里 s1 和 s2 实际上是相同的链接。在整数的情况下，也有池，但它只存在于整数 -127 到 128

所以如果你有

```
Integer i1 = 100;

Integer i2 = 100; 
```

那么 i1==i2 将是真的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T12:46:44.373

Use `string1.equals(string2);`//用于字符串值

而不是使用`string1 == string2;`//用于整数值

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-28T06:30:40.453

“==”总是比较值的内存位置或对象引用。equals 方法总是比较值。但 equals 也间接使用“==”运算符来比较值。Integer 使用 Integer 缓存来存储从 -128 到 +127 的值。如果使用 == 运算符检查 -128 到 127 之间的任何值，则返回 true。对于这些值以外的值，它返回 false 。

在字符串中，如果字符串是这样初始化的

```
 String s1="abc"
    String s2="abc" 
```

字符串 s1 和 s2 指向内存或字符串池中的相同位置。

如果字符串是这样初始化的

```
 String s1=new String("abc"); 
    String s2=new String("abc"); 
```

字符串 s1 指向包含字符串“abc”的新位置 字符串 s2 指向包含字符串“abc”的新位置，但 s1 的位置与 s2 的位置不同。在这种情况下，equals 方法可用于字符串比较。

请参阅 [链接](https://vijayanbu001.blogspot.com/2016/07/identity-vs-equality-comparison-of.html)以获取更多信息

# ruby-on-rails-3 - 在 Rails 3 上思考 Sphinx

> ID：11864808
> 
> 赞同：0
> 
> 时间：2012-08-08T12:44:30.973
> 
> 标签：ruby-on-rails-3, thinking-sphinx

通过 Gemfile 安装 Thinking Sphinx：

```
gem 'thinking-sphinx',:git => 'git://github.com/freelancing-god/thinking-sphinx.git' 
```

当我运行时`rake thinking_sphinx:configure`，我得到：

```
Unsupported version: 2.0.5 
```

...但它生成的配置文件很好。当我运行重建（也启动狮身人面像）时，一切看起来都很好。但是当我启动 Rails 控制台（或我的应用程序）时，我得到了这个，我很困惑为什么：

```
Unsupported version: 2.0.5

For more information, read the documentation:
http://freelancing-god.github.com/ts/en/advanced_config.html

/usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/test/unit/assertions.rb:4:in `<top (required)>': Test is not a module (TypeError)
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/test/unit/testcase.rb:1:in `<top (required)>'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/test_case.rb:1:in `<top (required)>'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/console/app.rb:2:in `<top (required)>'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:299:in `initialize_console'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:152:in `load_console'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:27:in `start'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
from /Users/jim/projects/rubymine/xx/script/rails:6:in `require'
from /Users/jim/projects/rubymine/xx/script/rails:6:in `<top (required)>'
from -e:1:in `load'
from -e:1:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:10:39.137

Rails wizard I know fixed this project by using these:

```
gem 'riddle', '1.5.1' 
gem 'thinking-sphinx', '2.0.11', :require => "thinking_sphinx" 
```

# doctrine-orm - symfony2.1 可翻译已保存，但未检索

> ID：11864810
> 
> 赞同：0
> 
> 时间：2012-08-08T12:44:37.227
> 
> 标签：doctrine-orm, symfony-2.1

基本上，我遇到了和这里一样的问题：

[Symfony2 & Translatable：实体的语言环境为空](https://stackoverflow.com/questions/10532667/symfony2-translatable-entitys-locale-is-empty)

翻译保存在`ext_translations`表格中，但未显示。

添加建议的修复程序后，它确实有效。

今天我从 2.0 升级到 2.1，到目前为止，我设法让几乎所有东西都正常工作。

但是现在我的可翻译文件再次无法正确显示（它们仍在正确保存）。

我认为这与 2.1 与 2.0 相比用户区域设置在何处以及如何存储的更改有关。但我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:43:18.730

通过注册自定义侦听器解决了这个问题

```
namespace XXX;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\KernelEvents;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class LocaleListener implements EventSubscriberInterface
{
   private $defaultLocale;

   public function __construct($defaultLocale = 'en')
   {
       $this->defaultLocale = $defaultLocale;
   }

   public function onKernelRequest(GetResponseEvent $event)
   {
       $request = $event->getRequest();
       if (!$request->hasPreviousSession()) {
           return;
       }

       if ($locale = $request->attributes->get('_locale')) {
           $request->getSession()->set('_locale', $request->getLocale());
       } else {
           $request->setDefaultLocale($request->getSession()->get('_locale',             $this->defaultLocale));
       }
   }

   static public function getSubscribedEvents()
   {
       return array(
           // must be registered before the default Locale listener
           KernelEvents::REQUEST => array(array('onKernelRequest', 17)),
       );
   }
} 
```

然后改变了

```
$request->setDefaultLocale($request->getSession()->get('_locale', $this->defaultLocale)); 
```

至

```
$request->setLocale($request->getSession()->get('_locale')); 
```

并使用

```
$this->getRequest()->getSession()->set('_locale', 'nl'); 
```

设置语言环境，翻译和可翻译现在可以工作

希望这也对其他人有所帮助..

# java - JEdi torpane通过类加载器加载css图片

> ID：11864812
> 
> 赞同：0
> 
> 时间：2012-08-08T12:44:42.297
> 
> 标签：java, image, swing, classloader, jeditorpane

我将我的应用程序打包为一个可运行的 jar，其中包含我的所有图像。对于我的 JEditorPane，我如何为“背景”属性编写 css 文件/url，因为图像被打包在 jar 中，所以我将无法获取路径？

如果我通过类加载器 getResourceAsStream 加载图像，如何在 JEditorPane 中引用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:02:19.420

[http://java-sl.com/tip_local_images.html](http://java-sl.com/tip_local_images.html)使用这个

# c++ - 为什么未分配的内存标记为0xCC？

> ID：11864817
> 
> 赞同：8
> 
> 时间：2012-08-08T12:44:49.097
> 
> 标签：c++, visual-studio, debugging

为什么我尚未初始化的内存设置为`0xCC`？

将内存设置为`0xCC`会降低性能，所以用这个字节填充内存肯定是有原因的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T12:47:50.050

[CRT 内部：调试堆管理](http://www.codeguru.com/cpp/w-p/win32/tutorials/article.php/c9535/Inside-CRT-Debug-Heap-Management.htm)

> 当您使用 Visual Studio 编译程序的调试版本并在调试器中运行它时，您会看到分配或释放的内存具有有趣的值，例如...
> 
> 0xCC 使用 /GZ 选项编译代码时，未初始化的变量会自动分配给该值（在字节级别）。

[维基上的幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)：

> CCCCCCCC 被微软的 C++ 调试运行时库用来标记未初始化的堆栈内存

在 Visual Studio CRT 源中，`\VC\crt\src\malloc.h`：

```
#define _ALLOCA_S_STACK_MARKER  0xCCCC

// ...

#undef _malloca
#define _malloca(size) \
__pragma(warning(suppress: 6255)) \
    ((((size) + _ALLOCA_S_MARKER_SIZE) <= _ALLOCA_S_THRESHOLD) ? \
        _MarkAllocaS(_alloca((size) + _ALLOCA_S_MARKER_SIZE), _ALLOCA_S_STACK_MARKER) : \
        _MarkAllocaS(malloc((size) + _ALLOCA_S_MARKER_SIZE), _ALLOCA_S_HEAP_MARKER)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T13:06:17.807

编译器在调试模式下为您执行此操作，因此如果您不小心读取了未初始化的内存，您将看到独特的 0xCC 值，并识别出您（可能）读取了未初始化的内存。0xCC 值还有许多其他有用的属性，例如，如果您不小心执行了一些未初始化的内存，它是用于调用软件断点的机器语言指令。

基本原则：易于识别来自读取未初始化内存的值。

这不会发生在您的发布版本中。

这种技术是在[编写实体代码](https://rads.stackoverflow.com/amzn/click/com/1556155514)中介绍的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T12:52:41.497

> 当使用 /GZ 选项编译代码时，未初始化的变量会自动分配给该值（在字节级别）。

0xCC 是调用断点的机器代码指令。有关详细信息，[请参阅另一个问题](https://stackoverflow.com/questions/3747852/int-3-0xcc-x86-asm)。

# c++ - 使用 c++ 在 openmax 中播放视频

> ID：11864831
> 
> 赞同：0
> 
> 时间：2012-08-08T12:45:41.610
> 
> 标签：c++, c, openmax

谁能告诉我openmax的c代码示例，播放位于本地驱动器中的视频文件。您可以在下面给出的链接中找到头文件 - [http://www.khronos.org/registry/omxal/](http://www.khronos.org/registry/omxal/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:46:35.947

使用 audio.s() 方法，然后将自动输出反转为视频链接

# ios - 在 iOS 上解析 XML

> ID：11864832
> 
> 赞同：0
> 
> 时间：2012-08-08T12:45:45.090
> 
> 标签：ios, objective-c, xml, xml-parsing

我正在使用我正在编写的 XML 应用程序的教程，但我无法弄清楚如何将 NSURL 更改为 XML 文件在 iPhone 上的位置。

```
//XMLAppDelegate.m 

- (void)applicationDidFinishLaunching:(UIApplication *)application {
    NSURL *url = [[NSURL alloc] initWithString:@"sites.google.com/site/iphonesdktutorials/xml/...";
    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    //Initialize the delegate. 
    XMLParser *parser = [[XMLParser alloc] initXMLParser];
    //Set delegate [xmlParser setDelegate:parser]; 
    BOOL success = [xmlParser parse]; 
    if(success) 
        NSLog(@"No Errors"); 
    else 
        NSLog(@"Error Error Error!!!"); 
    [window addSubview:[navigationController view]]; 
    [window makeKeyAndVisible]; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:36:12.417

NSURL 提供了轻松创建文件 URL 的方法，但如果文件是应用程序的资源之一，那么获取所需 URL 的最简单方法是使用 NSBundle：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"MyDataFile" withExtension:@"xml"]; 
```

否则，您可能需要查看`+[NSURL fileURLWithPath:]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:05:54.260

我相信是导致崩溃的 NSURL 函数。xml 文件被放入资源文件夹。我不确定我是否需要直接进入它或将它放在其他地方

# c# - 如何使用备份 .sql 文件使用 C# 控制台应用程序将数据库添加到 sql server？

> ID：11864834
> 
> 赞同：0
> 
> 时间：2012-08-08T12:45:50.543
> 
> 标签：c#, sql, sql-server, database

我正在做一个项目，我使用 Visual Studio 2010 在 sql server 2008 上创建了一个数据库，我通过在服务器资源管理器中右键单击它并选择“发布到提供者”来备份该数据库，从而在我的计算机中创建一个 .sql 文件我采取的。以前我格式化了我的 pc 和 sql server 数据库丢失了，所以现在我想使用那个 .sql 文件来重新创建包含所有数据的数据库，但我不知道这怎么可能。

我尝试了一些东西，但它在主数据库中创建了所有表，但我想要名称的数据库，即存储在 .sql 文件中或由我指定。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:05:11.380

首先使用这个创建一个数据库，

```
Create Database YOURDBNAME 
```

这里， YOURDBNAME = 数据库名称

然后，打开你的 .sql 文件，在 .sql 页面的第一行写下这个，

```
Use YOURDBNAME 
```

现在按`F5`，将创建并插入所有表和数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:49:41.627

您可以使用[SQL Server 管理对象](http://msdn.microsoft.com/en-us/library/ms162169.aspx)库来管理 SQL Server 的所有方面。

> SQL Server 管理对象 (SMO) 是一组对象，旨在对管理 Microsoft SQL Server 的各个方面进行编程。SQL Server 复制管理对象 (RMO) 是封装 SQL Server 复制管理的对象集合。

* * *

但是，从您的描述来看，这可能是矫枉过正。您只需使用[SQL Server Management Studio](http://www.microsoft.com/en-us/download/details.aspx?id=7593)（链接到免费的 Express 版本下载），连接到服务器，使用您的 SQL 文件打开一个新的查询窗口并运行它 (F5)。

# java - 在 ScheduledThreadPoolExecutor 中抑制冗余作业

> ID：11864838
> 
> 赞同：2
> 
> 时间：2012-08-08T12:46:18.303
> 
> 标签：java, scheduled-tasks, scheduling

我正在使用 ScheduledThreadPoolExecutor 执行定期任务。执行必须是周期性的，*而不是*固定的延迟。

我遇到了以下问题：考虑一个任务的时间为 1 分钟。如果任务需要 5 分钟才能执行（例如，由于临时网络问题），*错过*的执行将在任务完成后立即排队并分派。有没有办法摆脱错过的累积处决？

我尝试使用 remove 方法，但它完全删除了任务，而不仅仅是特定的执行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:51:52.940

可能有更好的方法，但您可以让您的任务自行重新安排。这样，一次执行将始终在前一次执行完成后 1 分钟运行：

```
final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
Runnable yourTask = new Runnable() {

    @Override
    public void run() {
        //do your stuff
        scheduler.schedule(this, 1, TimeUnit.MINUTES);
    }
};
scheduler.schedule(yourTask, 1, TimeUnit.MINUTES); 
```

**编辑**

如果您希望您的任务完全在 hh:mm:00（精确分钟）运行，您可以将代码替换为

```
long millisToNextMinute = 60000 - System.currentTimeMillis() % 60000;
scheduler.schedule(this, millisToNextMinute, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:07:48.903

您可以将此逻辑构建到任务中。记录上次运行的任务。每次启动时，它都应该检查自上次运行以来是否经过了足够的时间。如果没有，那么它应该退出而不做任何工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T14:22:39.357

在[CronScheduler](https://github.com/TimeAndSpaceIO/CronScheduler)中，有一些`SkippingToLatest`方法（请参阅[Javadocs](https://javadoc.io/doc/io.timeandspace/cron-scheduler/latest/io/timeandspace/cronscheduler/CronScheduler.html)，“跳到最新运行”部分，专门为您处理此问题而设计：

```
Duration syncPeriod = Duration.ofMinutes(1);
CronScheduler cron = CronScheduler.create(syncPeriod);
cron.scheduleAtFixedRateSkippingToLatest(0, 1, TimeUnit.MINUTES, runTimeMillis -> {
    // Do your task
}); 
```

# java - 设计模式使组件可扩展、可插入，而无需更改它所连接的系统

> ID：11864839
> 
> 赞同：4
> 
> 时间：2012-08-08T12:46:18.933
> 
> 标签：java, oop, design-patterns, software-design

*可以在这里使用哪些最佳**设计模式**来解决下面提到的业务需求？*

假设我们有一个业务需求来创建一个单一的仪表板，该仪表板可以轻松地用于不同的车辆，例如**汽车**、**船**和**飞机**，只需最少的更改，因此我们需要一个可以轻松定制的集中式界面，以便与底层系统（例如收集关于速度、电池、深度、高度、热量和功能的信息，如转弯、加速、启动、停止、刹车等）。仪表板应该带有仪表等，它们与再次与底层硬件对话的**东西对话**

显而易见的解决方案是将问题分解为组件（见下文），以便在切换车辆时只需进行最少的更改。在下面的解决方案中，只有 CentralController 的具体实现需要在每辆车上有所不同，但是如果您在汽车中有数百个要与之通信的组件，然后将所有这些类型映射到我们的应用程序相关类型，例如 HeatInfo 使用的HeatGauge 可能包含来自内部、外部和发动机的信息，因此我们正在讨论车辆中的不同组件，并且可能因车辆而异，在这里解决数据映射的最佳实践是什么？

*   带仪表的面板
*   中央控制器{获取/设置}。CentralControllerImpl
*   车辆及其部件

所以归结为：

**在多个复杂 API 之上创建简化 API 的设计模式是什么**

* * *

由于你们中的一些人认为这个问题很模糊，我将在这里发布真正的问题

我开发了一个应用程序，该应用程序可以与控制数百种传感器和控件的非常复杂的硬件和平进行对话，我正在开发的应用程序仅公开了一些与负责该部分的某些人员角色相关的功能。

您应该看到硬件是一个非常复杂且您操作的大型信息数据库，而我正在处理的应用程序只公开了一点信息，但是这些信息可能需要读取数百个表并将所有这些信息编译到我的视图中相关域对象，实际执行映射的组件已被通用化，以便未来的应用程序可以利用它。

我想从你们那里知道什么是最好的设计模式，可以用来创建易于使用和扩展的通用组件（如果需要）？

eg Visitor + MVC 是最明显的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:04:11.827

您的要求对于[单一模式](http://en.wikipedia.org/wiki/Software_design_pattern)来说太宽泛了。虽然 Visitor、MVC 和 Facade 都可能在整体设计中发挥作用，但您正在描述一个更高、更复杂的系统。模式对于描述一组常见行为和促进交流很有用，但如果使用它们的方法是“我正在寻找灵丹妙药”，那么这种努力将导致对模式承担不应有的责任感到沮丧和失望。

模块使用一组模式协同工作的设计如何更容易将单个元素集成到框架中，从而提供来自通用工具箱的组件的显示，然后针对正在实施的特定用例进行定制。您与仪表板的类比已被多次用作起点，因为它是一种有用的设计方法。

例如，

*   仪表板：使用**外观**显示仪表的框架，**前端控制器**为控件/仪表类型提供接口，可能还有**黑板** 用于仪表需要协调的情况
*   Gauge：帮助提供组件框架的模块，**如果**需要通用回调行为，则为**Visitor** ，如果需要异步通信，则使用**Observer**或**Publish/Subscribe** ，如果显示元素需要保持一段时间，则可以使用**State 。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:15:52.263

如果类在数据和行为上没有差异，为什么需要创建不同的类？也许将足以创建单一类：**车辆**？需求没有复杂的问题，所以看起来你不需要模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:58:20.077

我建议研究[Builder](http://en.wikipedia.org/wiki/Builder_pattern)设计模式并将其与[Bridge](http://en.wikipedia.org/wiki/Bridge_pattern)结合起来。

# ios - UIGestureRecognizer 目标问题

> ID：11864840
> 
> 赞同：1
> 
> 时间：2012-08-08T12:46:19.817
> 
> 标签：ios, uigesturerecognizer

我对 UIGestureRecognizer 有一个奇怪的问题

我创建了一个类，我在其中声明手势识别器，并将 self 作为目标

```
 ```
-(id)initWithTextView:(UITextView*)theTextView withDelegate:(id<WordSelectionDelegate>)theDelegate
{
    if (self = [super init])
    {
        delegate = theDelegate;
        textView = theTextView;
        // init long press gesture to detect pressing on text elements
        UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressFromSender:)];
        [textView addGestureRecognizer:longPressGesture];
    }
    return self;
} 
``` 但诀窍是当我真正做出长按手势时，我有下一个错误：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSConcreteMutableAttributedString handleLongPressFromSender:]：无法识别的选择器发送到实例 0x76227b0”

为什么给自己的消息会转到字符串？？？

            回答 #1

赞同：2

时间：2012-10-07T15:04:03.460

顺便说一句，问题无疑是具有`handleLongPressFromSender`实例方法的对象（即您正在初始化的对象）在调用`initWithTextView`时超出了范围。`UILongPressGestureRecognizer`您需要检查该对象的范围。

例如，假设这个类的名字是`MyTextViewHandler`，假设你有一个`viewDidLoad`for 一些视图控制器，它有类似的东西：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // do a bunch of initialization

    MyTextViewHandler *textViewDelegate = [[MyTextViewHandler alloc] initWithTextView:self.textview withDelegate:self];
} 
```

如果你在 ARC 项目中做了类似的事情，你会得到你描述的崩溃（因为该`textViewDelegate`对象是本地对象，`viewDidLoad`并且将在该方法结束时超出范围）。如果您将此委托处理程序类设为视图控制器的实例变量（或属性），那么此问题就会消失。

```

# mysql - 查看多对多表

> ID：11864843
> 
> 赞同：1
> 
> 时间：2012-08-08T12:46:28.960
> 
> 标签：mysql, view

我有这些桌子： `TBL_PERSONS`- 人用桌子 `TBL_SPORTS`- 足球、篮球、网球等运动 `TBL_PERSON_SPORT`用桌子...... - 任何人运动用桌子

例如 Jo 可以玩 Football 和 Basketball 我想创建一个关于人和他们的运动的视图。像这样的东西：

```
Jo|Football,Basketball
Jack|Football,Tennis 
```

我应该怎么写这样的VIEW？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:50:21.397

如果你*真的*希望它们是一个逗号分隔的列表，那就是[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)聚合函数的功能。用正确的列名称代替`name`, `person_id`,`sport_id`等...

```
CREATE VIEW PERSON_SPORTS AS
(
SELECT
  p.name,
  GROUP_CONCAT(s.sport_name) AS sports
FROM
  TBL_PERSONS p
  LEFT JOIN TBL_PERSON_SPORT sp ON p.person_id = sp.person_id
  JOIN TBL_SPORTS s ON sp.sport_id = s.sport_id
GROUP BY p.name
); 
```

但是，如果您需要能够从逗号分隔的列表中分离出运动，则上述内容对于加入对抗不是很有用。还考虑将未分组列表包装在视图中：

```
CREATE VIEW PERSON_SPORTS AS
(
SELECT
  DISTINCT
  p.name,
  s.sport_name AS sport
FROM
  TBL_PERSONS p
  LEFT JOIN TBL_PERSON_SPORT sp ON p.person_id = sp.person_id
  JOIN TBL_SPORTS s ON sp.sport_id = s.sport_id
); 
```

这将为每项运动生成一行，其中包含人的姓名和运动名称，其中该人根据每项运动的需要重复多次。

# video - 无法在 Webview 中播放 YouTube 视频

> ID：11864845
> 
> 赞同：0
> 
> 时间：2012-08-08T12:46:39.657
> 
> 标签：video, ios4, iphone-sdk-3.0, youtube-api

有人可以帮助我如何摆脱这个：

我正在使用这个工作正常的代码：

```
NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";

    NSString *html = [NSString stringWithFormat:embedHTML,@"http://www.youtube.com/watch?v=qe39vPFabuA", 64.0, 64.0];
    [wbView loadHTMLString:html baseURL:nil]; 
```

但是当我用其他字符串替换 Youtube URL 字符串时出现问题，例如：[http ://www.youtube.com/embed/videoseries?list=PL93D60DC1974BCD1E&hl=en_US](http://www.youtube.com/embed/videoseries?list=PL93D60DC1974BCD1E&hl=en_US)

**如何在 WebView 中播放以上链接 youtube 视频。**

我尝试了几种方法：

1.  将“/embed/”替换为“/watch?v=”
2.  只需从字符串中删除 hl=en_US。

但一切都是徒劳的。我需要做什么并让它在 iPhone 中运行。如何播放视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:16:52.677

问题似乎是您正在尝试加载播放列表而不是单个视频。这是实际视频的链接：[http ://www.youtube.com/watch?v=WvlgRV0PoUc&feature=plcp](http://www.youtube.com/watch?v=WvlgRV0PoUc&feature=plcp)

但是，该视频似乎未针对移动设备启用，因为该链接在笔记本电脑上可以正常加载，但在设备上却没有。此设置由 Youtube 上的视频所有者设置。

# netty - 与 OIO 连接/写入真的是异步的吗？

> ID：11864859
> 
> 赞同：0
> 
> 时间：2012-08-08T12:47:08.347
> 
> 标签：netty

我不明白 OioClientSocketChannelFactory 类中的限制点。

它说：“这个工厂创建的 SocketChannel 不支持异步操作。任何 I/O 请求，例如“连接”和“写入”，都会以阻塞方式执行。”

但是 SocketChannel 是一个 Channel，因此只支持异步操作。

有人可以澄清这到底是什么意思，因为在我看来，这两种描述相互矛盾。

问候， 扎科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:49:38.260

OioClientSocketChannelFactory 只是通常的 java.io 东西之上的一层。所以一切都在那里阻塞。这意味着当您执行返回 ChannelFuture 的调用时，它将在返回后立即完成。

让 Oio.. 和 Nio.. impl 共享相同的统一 api 很酷的一点是，您可以轻松地在两者之间切换。

# http - 使用 & 作为查询参数分隔符是否有效？

> ID：11864864
> 
> 赞同：3
> 
> 时间：2012-08-08T12:47:14.450
> 
> 标签：http, url, query-parameters

如果我有一个带有查询参数的 URL，“转义”& 查询参数分隔符是否有效？

前任。

```
<a href="/foo.html?cat=meow&dog=woof">go</a> 
```

对比

```
<a href="/foo.html?cat=meow&amp;dog=woof">go</a> 
```

RFC 2396 明确指出使用“&”是正确的，但我找不到任何关于使用保留字符的转义版本的（无效）有效性。

我注意到的一件事是 Chrome 似乎在单击浏览器中的链接时会原谅他们，但是当我查看页面的源代码并从视图源单击链接 (/foo.html?cat=meow&dog=woof) 时查看，它不起作用。

我很想知道是否有任何规范/部分我可以指出“只使用 & 不使用 & 或 %26 （这是 & URL 编码的）。

（注意：当我开始使用 wa 代码库以这种方式构建其 URL 时，就会出现这个问题，我个人会使用 '&'）

RCF 2396：[http ://www.ietf.org/rfc/rfc2396.txt](http://www.ietf.org/rfc/rfc2396.txt)

更新 1

正确 - 服务器写入页面的实际 URL 是：<a href="/foo.html?cat=meow&dog=woof" >go</a> .. 是否有说明使用 & 有效性的规范作为查询参数分隔符？我不是在浏览器中寻找“最有效的方法”，而是寻找分隔查询参数的*正确方法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-23T16:39:48.043

TLDR；评估为的所有公式`&`都同样有效。

从OP的链接：

> 与许多使用类似 BNF 的语法来定义协议允许的字节（八位字节）的规范不同，URI 语法是根据字符定义的。 **语法中的每个文字都对应于它所代表的字符，而不是对应于任何特定编码字符集中该字符的八位字节编码。** URI 如何在线路上以位和字节表示取决于用于传输它的协议的字符编码，或包含它的文档的字符集。

[-- RFC: 2396 - 统一资源标识符 (URI)：通用语法 1998 年 8 月](http://www.ietf.org/rfc/rfc2396.txt)

经过

**T.伯纳斯-李***

麻省理工学院/LCS

R.菲尔丁

加州大学欧文分校

L.马斯特

施乐公司

*： 多么酷啊！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:53:14.243

转义发生在 HTML 中 - 当您单击此类链接时，浏览器将`&amp;`视为`&`.

要对`&`URL 进行编码，您可以将其[编码](http://en.wikipedia.org/wiki/Percent-encoding)为`%26`.

# java - 如何在按钮单击事件中将 EditText 数据添加到数据库？

> ID：11864868
> 
> 赞同：1
> 
> 时间：2012-08-08T12:47:23.217
> 
> 标签：java, android, database, sqlite

我是android编程的新手。我已经在单独的 java 类中创建了一个数据库，并且我有一个活动，我想要一些数据，尤其是来自 EditText 的数据，以便在单击按钮时存储到数据库中。我在代码中做错了什么？在 OnClick 事件中包含数据库代码后，它不会启动我的 savecount 活动。

当 SaveClass 活动启动时，它会冻结应用程序，并且 Eclipse 会显示以下消息：“未找到源”，并带有编辑源查找路径的选项。

Logcat 以递归方式显示以下内容，直到启动超时：

```
08-08 18:06:37.313: D/dalvikvm(1676): threadid=1: still suspended after undo (sc=1 dc=1)
08-08 18:06:37.323: I/dalvikvm(1676): Wrote stack traces to '/data/anr/traces.txt'
08-08 18:06:37.793: I/Process(896): Sending signal. PID: 1676 SIG: 3
08-08 18:06:37.793: I/dalvikvm(1676): threadid=3: reacting to signal 3
08-08 18:06:37.823: D/dalvikvm(1676): threadid=1: still suspended after undo (sc=1 dc=1)
08-08 18:06:37.823: I/dalvikvm(1676): Wrote stack traces to '/data/anr/traces.txt'
08-08 18:06:38.042: W/ActivityManager(896): Launch timeout has expired, giving up wake lock!
08-08 18:06:38.175: W/ActivityManager(896): Activity idle timeout for ActivityRecord{b4bf2e18 com.simple.tally.counter/.SaveCount} 
```

**类dbOpenHelper**

```
package com.simple.tally.counter;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class classdbOpenHelper extends SQLiteOpenHelper {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_COUNTED = "countedno";
    public static final String KEY_DESC = "countdesc";
    public static final String KEY_DATE = "countdate";

    public static final String DATABASE_NAME= "countdb";
    public static final String DATABASE_TABLE = "countable";
    public static final int DATABASE_VERSION = 1;

    public classdbOpenHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE" + DATABASE_TABLE + " (" +
        KEY_ROWID + " INTEGET PRIMARY KEY AUTOINCREMENT " +
        KEY_COUNTED + " INTEGER " +
        KEY_DESC + " TEXT NOT NULL " +
        KEY_DATE + " TEXT NOT NULL);"
                ); 
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXITS " + DATABASE_TABLE);
        onCreate(db);

    }

} 
```

**SaveCount.java**

```
import android.os.Bundle;
import android.app.Activity;
import android.content.ContentValues;
import android.database.sqlite.SQLiteDatabase;
import android.content.Intent;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.view.View;

public class SaveCount extends Activity {
TextView metersave;
classdbOpenHelper eventsData;
EditText desc;
Button Save;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_save_count);        
        Intent launchNewIntent = getIntent();
        String count = launchNewIntent.getStringExtra(SimpleTallyCounter.EXTRA_MESSAGE);
        metersave = (TextView) findViewById(R.id.metersave);
        metersave.setText(count); 
        final Button Save = (Button) findViewById(R.id.Save);
        Save.setOnClickListener(new clicker());
        eventsData = new classdbOpenHelper(this);
        desc = (EditText) findViewById(R.id.desc);
    }

    @Override
    public void onDestroy() {
      eventsData.close();
    }

    class clicker implements Button.OnClickListener {
        public void onClick(View v) {
            String descvalue = desc.getText().toString();
            uSQLiteDatabase db = eventsData.getWritableDatabase();
            ContentValues cv = new ContentValues();
            cv.put(classdbOpenHelper.KEY_COUNTED, metersave.getText().toString());
            cv.put(classdbOpenHelper.KEY_DESC, descvalue);
            cv.put(classdbOpenHelper.KEY_DATE, System.currentTimeMillis());
            db.insert(classdbOpenHelper.DATABASE_TABLE, null, cv);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:57:08.293

像这样`createComment`使用这个你将值存储在数据库中

```
 ed1 = (EditText) findViewById(R.id.ed1);
   ed2 = (EditText) findViewById(R.id.ed2);
   ed3 = (EditText) findViewById(R.id.ed3);

  String str1 = ed1.getText().toString();
  String str2 = ed2.getText().toString();
  String str3 = ed3.getText().toString();
// stord data base values in database            
 comment = datasource.createComment(str1, str2 ,str3); 
```

anr retreve 数据库`getAllAccounts`在另一个活动中将此值

```
 AccountDataSource data = new AccountDataSource(getActivity());
    data.open();
    Accounts_list = data.getAllAccounts(); 
```

就像看到[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)它是使用完整的。

# ubuntu - 为什么相同的代码不能在 Ubuntu Server 中编译？

> ID：11864873
> 
> 赞同：0
> 
> 时间：2012-08-08T12:47:32.967
> 
> 标签：ubuntu, postfix-mta, ubuntu-12.04

我刚刚从源代码在 Ubuntu 服务器中安装了 postfix 2.7.11。我不使用 ubuntu 自己的，因为我需要旧版本。

我发现了一个非常有趣的问题。以前，在 CentOS 5 和 6 中，我都可以毫无问题地构建源代码。但是，在 Ubuntu 服务器 12.04 中是完全不同的。

我遇到了以下问题：

```
dict_nis.c:173: error: undefined reference to 'yp_match'<br>
dict_nis.c:187: error: undefined reference to 'yp_match'<br>

dns_lookup.c:347: error: undefined reference to '__dn_expand'<br>
dns_lookup.c:218: error: undefined reference to '__res_search'<br>
dns_lookup.c:287: error: undefined reference to '__dn_expand'<br>
dns_lookup.c:498: error: undefined reference to '__dn_expand'<br>
dns_lookup.c:383: error: undefined reference to '__dn_expand'<br> 
```

是的，这个理由很明显。我只是搜索相关库并将其添加到 makefile 中。有用。

问题是为什么？Ubuntu Server 和 CentOS 有什么区别？

一种可能性是 gcc 和 ld 版本。Ubuntu 服务器在 CentOS 中使用不同版本的 gcc 和 ld。但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:49:34.257

最后，在别人的帮助下。我找到了原因。
Ubuntu 有特殊的 .so 位置。位置与 CentOS 不同。
但是在 Postfix makedefs 文件中，它不包含这个特定的位置。让我们检查一下来源：

```
SYSLIBS="-ldb"
        for name in nsl resolv
        do
            for lib in /usr/lib64 /lib64 /usr/lib /lib
            do
            test -e $lib/lib$name.a -o -e $lib/lib$name.so && {
                SYSLIBS="$SYSLIBS -l$name"
                break
            }
            done
        done 
```

这里， SYSLIBS 将在 do make 时使用。该脚本将检查一些特殊文件夹以添加 .so 库。但这些位置不包括 Ubuntu 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:34:52.590

我在使用 vda-patch 2.9.1 的 Ubuntu 12.04 和 postfix 2.9.3 上遇到了同样的问题

```
gcc -Wmissing-prototypes -Wformat -DDEBIAN -DMAX_DYNAMIC_MAPS -DHAS_PCRE -DHAS_LDAP -DHAS_SQLITE -DMYORIGIN_FROM_FILE -DNO_NIS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_CDB -DHAS_MYSQL -I/usr/include/mysql -DHAS_PGSQL -I/usr/include/postgresql -DHAS_SQLITE -I/usr/include -DHAS_SSL -I/usr/include/openssl -DUSE_SASL_AUTH -I/usr/include/sasl -DUSE_CYRUS_SASL -DUSE_TLS  -O2 -I. -I../../include -DLINUX3 -o smtpd smtpd.o smtpd_token.o smtpd_check.o smtpd_chat.o smtpd_state.o smtpd_peer.o smtpd_sasl_proto.o smtpd_sasl_glue.o smtpd_proxy.o smtpd_xforward.o smtpd_dsn_fix.o smtpd_milter.o smtpd_resolve.o smtpd_expand.o ../../lib/libmaster.a ../../lib/libtls.a ../../lib/libdns.a ../../lib/libxsasl.a ../../lib/libmilter.a ../../lib/libglobal.a ../../lib/libutil.a -lssl -lcrypto -lsasl2 -lpthread -L/usr/src/postfix-2.9.3/debian -ldb
../../lib/libdns.a: undefined reference to `__res_search'
../../lib/libdns.a: undefined reference to `__dn_expand'
collect2: ld gab 1 als Ende-Status zurück
make: *** [smtpd] Fehler 1 
```

问题：缺少-lresolv

在文件“makedefs”中：gcc -print-search-dirs | sed -n '/^libraries: =/s/libraries: =//p' 对我不起作用，因为我有德语版的 Ubuntu。gcc -print-search-dirs 输出为“Bibliotheken:”

请参阅[http://www.howtoforge.com/forums/showthread.php?p=287215](http://www.howtoforge.com/forums/showthread.php?p=287215)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T14:39:04.990

您应该附加`-ldb -lnsl -lresolv`到`AUXLIBS`.

# java - Spring XML 模式

> ID：11864877
> 
> 赞同：0
> 
> 时间：2012-08-08T12:47:42.623
> 
> 标签：java, spring, jakarta-ee, maven, jar

我注意到一个关于 Spring XML 模式的奇怪问题。

我有一个使用 spring 框架的独立 java 应用程序。只要我在 Eclipse 中运行这个应用程序，我就不会遇到任何问题。但是，当我将其打包为 jar 文件（如此[链接](https://stackoverflow.com/questions/1814526/problem-building-executable-jar-with-maven)中所述）并执行该 jar 时，出现以下异常：

```
Exception in thread "main" org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/tx]
Offending resource: class path resource [applicationContext.xml]

        at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
        at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
        at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:316)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1416)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1409)
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184) 
```

我在 applicationContext.xml 中有以下条目，它在 Eclipse 中运行良好：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"> 
```

任何帮助深表感谢。

我什至尝试更改`http://www.springframework.org/schema/tx/spring-tx-3.1.xsd`为，`classpath:/org/springframework/transaction/config/spring-tx-3.1.xsd`但没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:09:21.583

看起来您的应用程序包含一些 jar，例如 spring-core-3.1.x（因为正在使用它的类），但它缺少*spring-tx-3.1.x.RELEASE.jar*（包含 Spring Transaction 类的那个）。

# wcf - 为什么使用 Castle Windsor 实现的 IIS 托管 WCF 服务需要基地址？

> ID：11864882
> 
> 赞同：4
> 
> 时间：2012-08-08T12:47:56.213
> 
> 标签：wcf, castle-windsor

我有一个 .NET 4.0 WCF 服务，它使用 Castle Windsor (v3) 通过依赖注入模式实现。该服务托管在 IIS 7 中，我在本地运行时使用 Visual Studio 开发服务器。我的开发服务器为服务分配了一个特定的端口。

现在，如果我不添加基地址，我会从 Castle Windsor 那里得到一个例外：

> 找不到与绑定 WebHttpBinding 的终结点的方案 http 匹配的基地址。注册的基地址方案是 []。

但是，如果我确实分配了一个与我的开发服务器具有相同端口的本地主机地址，我会遇到端口冲突。

这种情况下为什么需要基地址，端口冲突如何处理？

这是我与温莎城堡相关的代码。该容器是在 Global.asax.cs 文件中的 Application_Start() 中创建的。

```
public class ServiceInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.AddFacility<WcfFacility>()
            .Register(Component.For<IMyService>().ImplementedBy<MyService>().AsWcfService<IMyService>().IsDefault()
        );
    }
} 
```

另外，我对托管多种服务不感兴趣，只有一种。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T06:29:52.563

答案是来自 Castle Project Google Group 的 Craig Neuwirt。

> 如果它托管在 IIS 中，您可能需要将其标记为托管，因此它应该看起来像
> 
> ```
> container.AddFacility<WcfFacility>() 
> .Register(Component.For<IMyService>().ImplementedBy<MyService>().AsWcfService(new DefaultServiceModel().Hosted()).IsDefault() 
> ```

作为记录，我的配置是按照 Hally 爵士的建议设置的，这就是端口冲突出现的时候。通过上面额外的 fluent 配置，我从 web.config 中删除了基地址配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:31:27.413

你能显示你的配置吗？

如果您在 IIS 上托管您的服务，则基地址取决于站点、应用程序和端口（根据当前协议的 IIS 绑定 - net.tcp、http）。

您可以将 Visual Studio Development Server 用于基于 http 的服务（不是 net.tcp）。您可以在 VS DevelopmentService 的配置中指定基地址（在您的`<service>`标签内）

```
 <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8000/MyApp/Service.svc"/>
      </baseAddresses>
    </host> 
```

# symfony - Twig 中的表格和表格

> ID：11864889
> 
> 赞同：0
> 
> 时间：2012-08-08T12:48:15.610
> 
> 标签：symfony, twig

我有一个以这种方式实现的表格形式：

```
 <tr>
        <td>Start Date:</td>
        <td>{{ form_widget(form.start_date) }}</td>
    </tr>
    <tr>
        <td>Previous Plan:</td>
        <td>{{ form_widget(form.prev_plan) }}</td>
    </tr> 
```

有没有办法使用现成的主题 form_table_layout.html.twig 或者以更灵活和优雅的方式来实现这一点？

我试过这个：

```
 {% form_theme form 'form_table_layout.html.twig' %}
    {{ form_errors(form) }}

    {% for field in form %}
        {{ form_row(field) }}
    {% endfor %} 
```

但它把自己的名字放在表格的左边，这不是我想要的名字。（例如，而不是“上一个计划：”这样我得到了“上一个计划”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:56:10.027

您可以在定义表单时定义自己的标签。就像是：

```
->add('prev_plan', 'text',array(
                'label' => 'Previous Plan'
            )) 
```

（我不知道 prev_plan 的字段类型，我使用了“文本”，但如果它是不同的字段类型，只需更改它）

# asp.net - 在 asp.net 网络应用程序的网络浏览器中打开 word 或 excel 文件有多安全

> ID：11864891
> 
> 赞同：0
> 
> 时间：2012-08-08T12:48:19.657
> 
> 标签：asp.net, ms-office, binaryfiles

我正在一个 asp.net 4.0 Web 应用程序中构建一个文档管理系统。要求是在 Web 浏览器中打开 Office 文档。文档以二进制格式存储在 SQL Server 2008 数据库中。

在浏览器中打开这些文件是否安全？如果是，那么如何在 Web 浏览器中显示/编辑这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:03:01.723

您可以使用 WebDAV 协议来实现这一点。它是 Http 协议的扩展，在 IIS 中得到支持。[http://en.wikipedia.org/wiki/WebDAV](http://en.wikipedia.org/wiki/WebDAV)。有关详细信息，请参阅[SourceForge 的 WebDAV 项目](http://sourceforge.net/projects/webdav/)。它是一个提供 WebDAV 内容的不错的库。

为了处理二进制（我假设是 SQL blob）内容，您必须将内容写入文件，然后通过 WebDAV 提供它。

# android - 设置较大的库项目 Android 时出错

> ID：11864893
> 
> 赞同：0
> 
> 时间：2012-08-08T12:48:24.697
> 
> 标签：android, library-project

想用另一个项目中的按钮启动一个独立的 android 项目。首先制作了一个简单的主应用程序，该应用程序带有一个按钮，该按钮使用 Hello World 引用另一个项目，其中“is Library in Preferences”。所有根据[http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)并且它工作没有问题。

对开源项目（拼图）做了同样的事情[http://code.google.com/p/androidsoft/source/browse/#svn%2Ftrunk%2Fpuzzle](http://code.google.com/p/androidsoft/source/browse/#svn%2Ftrunk%2Fpuzzle)但在 LogCat 中收到错误消息，当我单击时我的应用程序崩溃我的主应用程序中的按钮。

我猜我可能错过了 AndroidManifest.xml 中的某些内容根据它说的文档

```
Declaring library components in the manifest file: You must declare any <activity>, <service>, <receiver>, <provider>, and so on, as well as <permission>, <uses-library>. 
```

我可以毫无问题地将拼图编译为自己的项目。如果拼图是一个库将无法工作。

我的主应用程序带有一个将启动第二个项目的按钮

```
public class AppActivity extends Activity {

    Button button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        addListenerOnButton();
    }

    public void addListenerOnButton() {

        final Context context = this;

        button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context, org.androidsoft.games.puzzle.kids.MainActivity.class);
                startActivity(intent);   

            }

        });

    }

} 
```

AndroidManifest.xml 在我的主应用程序中使用 android:name="org.androidsoft.games.puzzle.kids.MainActivity

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mkyong.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".AppActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
           android:name="org.androidsoft.games.puzzle.kids.MainActivity">
        </activity>
        </application>

</manifest> 
```

我想用作库的拼图中的 AndroidManifest.xml [http://code.google.com/p/androidsoft/source/browse/trunk/puzzle/AndroidManifest.xml](http://code.google.com/p/androidsoft/source/browse/trunk/puzzle/AndroidManifest.xml)

LogCat 错误

```
08-08 12:44:31.607: E/AndroidRuntime(780): FATAL EXCEPTION: main
08-08 12:44:31.607: E/AndroidRuntime(780): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mkyong.android/org.androidsoft.games.puzzle.kids.MainActivity}: java.lang.NullPointerException
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.os.Looper.loop(Looper.java:137)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-08 12:44:31.607: E/AndroidRuntime(780):  at java.lang.reflect.Method.invokeNative(Native Method)
08-08 12:44:31.607: E/AndroidRuntime(780):  at java.lang.reflect.Method.invoke(Method.java:511)
08-08 12:44:31.607: E/AndroidRuntime(780):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-08 12:44:31.607: E/AndroidRuntime(780):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-08 12:44:31.607: E/AndroidRuntime(780):  at dalvik.system.NativeStart.main(Native Method)
08-08 12:44:31.607: E/AndroidRuntime(780): Caused by: java.lang.NullPointerException
08-08 12:44:31.607: E/AndroidRuntime(780):  at org.androidsoft.games.puzzle.kids.AbstractMainActivity.onCreate(AbstractMainActivity.java:81)
08-08 12:44:31.607: E/AndroidRuntime(780):  at org.androidsoft.games.puzzle.kids.MainActivity.onCreate(MainActivity.java:57)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.Activity.performCreate(Activity.java:5008)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-08 12:44:31.607: E/AndroidRuntime(780):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-08 12:44:31.607: E/AndroidRuntime(780):  ... 11 more 
```

# c# - 无法加载文件或程序集'CrystalDecisions.ReportAppServer.Controllers，版本 = 13.0.2000.0

> ID：11864894
> 
> 赞同：0
> 
> 时间：2012-08-08T12:48:26.510
> 
> 标签：c#, asp.net, crystal-reports, crystal-reports-2010

我有一个使用 Crystal-reports 的站点，所以我为 Visual Studio 2010 安装了一个 Crystal 报表来创建我的报表，在本地一切正常，但是当我将我的站点放在我的主机服务器中时，我收到了这个错误消息，请看下图： [http ://stream.tutowall.com/pic/error.png](http://stream.tutowall.com/pic/error.png)

确实，我的主机服务器没有水晶报告，所以我安装了与本地相同版本的 CR，但我仍然收到相同的错误消息。这是我下载的 CR 的链接。[http://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:55:09.587

您可以使用 MS 的 Fuslogvw.exe 应用程序记录程序集加载并提供有关加载错误的详细信息。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/e74a18c4.aspx](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)

阅读日志文件后，您将了解有关无法加载程序集的原因的更多详细信息

# jquery - 在页面加载时使用 jQuery 更改 html 中图像的高度

> ID：11864896
> 
> 赞同：0
> 
> 时间：2012-08-08T12:48:33.767
> 
> 标签：jquery, html

我将主要内容放在页面中间的一个 div 中，两边各有两张图片，充当阴影。页面长度可以变化，所以我希望阴影长度随之变化。

这是 HTML 设置：

```
<div id="content">
<div class="shadow_container">
    <img src="catalog/view/theme/furniture/image/left-shadow.png" height="400px" width="61px" id="left_shadow"/>
        <div class="main_container">

            pagecontentpagecontentpagecontent

        </div>
    <img src="catalog/view/theme/furniture/image/right-shadow.png" height="400px" width="61px" id="right_shadow"/>
</div> 
```

这是jQuery：

```
$(".shadow_container").load(function(){
    var shadowHeight = $(".shadow_container").height();
    var newShadowHeight = shadowHeight+85+" px";

    $("#left_shadow").height(newShadowHeight);
    $("#right_shadow").height(newShadowHeight);
}); 
```

我哪里错了！？

好的，澄清一下，我在最后两行中使用绝对值对其进行了测试，但没有任何反应。

外部脚本中的所有其他 jQuery 都可以正常工作，而这部分只是在我的文档准备好之后，那么为什么不运行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:51:34.293

去掉 px`var newShadowHeight = shadowHeight+85+" px";`应该是： `var newShadowHeight = shadowHeight+85;`

您可以使用速记来设置高度，就像使用它来检索它一样：

```
$("#left_shadow").height(newShadowHeight);
$("#right_shadow").height(newShadowHeight); 
```

所以重写为自动改变身体负荷的阴影：

```
$(function(){
    var shadowHeight = $(".shadow_container").height();
    var newShadowHeight = shadowHeight+85;

    $("#left_shadow").height(newShadowHeight);
    $("#right_shadow").height(newShadowHeight);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:50:54.430

尝试不使用“px”。只是数字。

# javascript - 在 JavaScript 中附加参数化事件

> ID：11864898
> 
> 赞同：0
> 
> 时间：2012-08-08T12:49:11.547
> 
> 标签：javascript, html

我想将事件附加到 JavaScript 中的元素，问题是我只知道没有参数的简单事件附件，但在这里我想附加一个带`this`参数的事件，如下所示

```
element.addEventListener("onclick", 
                         function RemoveDirectory(this) {
                            alert(this);
                    }); 
```

这里当然`this`应该指`element`。

**编辑**

我尝试使用 Jquery，但由于该元素不是从 DOM 中选择的，它是一个动态创建的元素，有人可以告诉我如何将 Jquery 的`$("selector").click()`方法与通过创建的动态创建的元素一起使用`document.createElement("input");`

我用 jquery 1.7.2 试过这个没有运气

```
<script 
      src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" 
      type="text/javascript" language="javascript">
</script>

<div id="diver">
        Hello events !
</div>

<script type="text/javascript" language="javascript">
        var btn = document.createElement('INPUT');
        btn.type = 'button';
        btn.value = "CLICK me";

        document.getElementById("diver").appendChild(btn);
        $(document).on('click', btn, function () {
            alert(this.value);
        });
</script> 
```

这方面的问题是

1.  事件被添加到整个文档，而不是仅动态添加的按钮。
2.  `this`关键字指的是`document`而不是仅动态添加的按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:06:49.413

你可以使用jQuery的`on()`方法

```
$('#parent').on('click', 'input', function(){}); 
```

如果您不知道父母，那么您可以使用`document`。

或者您可以在创建元素后绑定处理程序

```
$(document.createElement('input')).click(function(){}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:07:22.953

使用动态创建的元素添加事件。尝试使用 jQuery **[.on](http://api.jquery.com/on/)**

```
$(document).on('click','selector', function() {
  // here add your function
}); 
```

这里的***选择器***将是您动态创建的元素。

**注意：** 需要 jQuery 1.7

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T12:55:03.650

您是否尝试过使用闭包？

```
var someRandomVariable = this;
element.addEventListener("onclick", function() {
    console.debug(someRandomVariable); //=> this
}); 
```

# jquery - 隐藏 jQuery中的标签

> ID：11864899
> 
> 赞同：3
> 
> 时间：2012-08-08T12:49:17.177
> 
> 标签：jquery

由于某种原因`<form>`，我的页面上的 a 不会使用 jQuery 隐藏/显示。我的表单中有其他内容，例如`<div>`s 和`<table>`s，但我已将其隔离为这两个破坏它的输入字段：http: [//jsfiddle.net/3SDvm/2/](http://jsfiddle.net/3SDvm/2/)

```
<form>
    <div>Random text</div>
<input id="multi" type="radio" name="style" value="checkbox"/>
    <label for="multi">Multiple options</label>

<input id="single" type="radio" name="style" value="radio" />
    <label for="single">Single option</label>
</form>​ 
```

```
$(document).ready(function() {
   $('form').slideUp(); 
});​ 
```

这是正常行为，还是我做错了什么？在 Chrome/IE/FF/Safari 上测试..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:57:15.533

使用 div 将表单内容括起来并隐藏/显示该 div。我更新了你的小提琴：http: [//jsfiddle.net/davidbuzatto/3SDvm/7/](http://jsfiddle.net/davidbuzatto/3SDvm/7/)

使用 DerWaldschrat 解决方案，每个孩子都将被单独隐藏/显示，从而弄乱您想要的行为。

**编辑：**我用三种方法再次更新了小提琴，以选择内部 div 并将其向上滑动。看看：http: [//jsfiddle.net/davidbuzatto/3SDvm/9/](http://jsfiddle.net/davidbuzatto/3SDvm/9/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T12:51:39.370

不要隐藏表单，它是一个没有真实外观的元素，而是尝试隐藏所有子元素：

```
$("form *").hide(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T12:29:25.550

任何时候，只要您使用与父表单本身的属性或方法匹配的表单字段名称，就会发生这种情况。这包括样式，还包括 id、action、submit、length 等。jQuery 试图解决这个问题，但仍有可能发生这种情况。有关更多技术细节，请参见此处： http: [//kangax.github.com/domlint/](http://kangax.github.com/domlint/)

# c - 是否有一个宏可以扩展为不带括号返回？

> ID：11864908
> 
> 赞同：5
> 
> 时间：2012-08-08T12:49:49.207
> 
> 标签：c, c-preprocessor, parentheses

我想使用这样的宏

```
#define  Return(x)   {call_my_function(); return (x);} 
```

有什么方法可以使用或声明不带括号的宏，所以我可以像真正的返回调用而不是函数一样使用它？例如：

```
BOOL my_func() {
    code....
    Return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T13:04:14.497

你可以做一些可怕的事情

```
#define  Return for (call_my_function(); ;) return 
```

**编辑：**更改为 Daniel 的版本以制作漂亮的笑脸。吉姆直接“重载”的想法`return`是有效的，甚至更可怕；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:52:41.963

您可以做一些诡计（尽管强烈建议不要这样做）：

```
#define Return call_my_function(); return 
```

然后像这样使用它：

```
Return false; 
```

这将扩展到

```
call_my_function; return false; 
```

编辑：请参阅有关此问题的两条评论作为示例，以了解我为什么不鼓励这种使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:11:03.347

考虑

```
#define  Return(x)   {call_my_function(); return (x);} 
if (1) Return (0); 
```

Woule 展开为

```
if (1) {call_my_function(); return (1);} 
```

有些人建议您可以使用 summat 之类的

```
#define Return call_my_function(); return 
```

现在

```
if (1) Return; 
```

将扩展到

```
if (1) call_my_function();
return; 
```

意图略有不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T12:52:56.470

从定义中删除 { 和 }。

在宏中，确切的字符用于替换（除了 x 也被替换）。

# python - Matplotlib 的 Axes3D 绘图不直观吗？

> ID：11864909
> 
> 赞同：2
> 
> 时间：2012-08-08T12:50:01.080
> 
> 标签：python, plot, matplotlib

我想在 X、Y 和 Z 轴上为这 100 个点制作一个 3D 图。我已经生成了所有 3 个轴都需要的列表。我认为这应该足以在 3D 中绘制一组点。但是我不明白输出。我感谢在这方面的任何帮助。

```
################################################################
# problem : f(x) = (e**(-(y**2)))*cos(3*x)+(e**(x**2))*cos(3*y)
################################################################

from mpl_toolkits.mplot3d import Axes3D
import math
import matplotlib
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax=Axes3D(fig)
x = np.arange(-5,5,1)
y = np.arange(-5,5,1)
X = []
Y = []
Z=[]
for i in range(len(x)):
        for j in range(len(y)):
            z=(np.exp(-(y[j]**2))*np.cos(3*x[i]))+(np.exp(x[i]**2)*np.cos(3*y[j]))
        Z.append(z)
        X.append(x[i])
        Y.append(y[j])
ax.plot(X,Y,Z,'o')
plt.show() 
```

编辑/更新：我不确定我的问题是代码本身还是我理解 3Dplots 的方式，我应该使用 meshgrids 来获得我期望的情节吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:56:18.393

你有哪个版本的 matplotlib？该[文档](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#getting-started)指出，对于 matplotlib 1.0.0 及更高版本，您应该创建一个 3D 轴，如下所示：

```
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d') 
```

而不是`ax = Axes3D(fig)`以前版本中使用的。

**编辑**在 OPs 评论之后，似乎代码的结果与预期不符，而不是出现某种错误。以下代码是我认为的目的

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

x, y = np.meshgrid(np.linspace(-5., 5., 100), np.linspace(-5., 5., 100))

def zfunc(x, y):
    return np.exp(-(y**2)) * np.cos(3.*x) + np.exp(x**2) * np.cos(3.*y)

z = zfunc(x, y)

ax.plot_surface(x, y, z)

plt.show() 
```

在上面的代码中，创建了一个二维网格（原始帖子中缺少），函数计算为这两个变量的函数并绘制为表面。`x=y`以前只是绘制了一条沿线运行的点。

# eclipse - 尝试为 GeoNetwork 元数据编辑器设置环境

> ID：11864910
> 
> 赞同：1
> 
> 时间：2012-08-08T12:50:02.047
> 
> 标签：eclipse, maven, metadata, geoserver, geonetwork

我正在尝试为 Geonetwork 元数据编辑器设置环境。我已经用 Tomcat 7.0 安装了 Java 1.5 SE。我已经使用[本教程](http://lab.usgin.org/groups/geonetwork-configuration-and-development/windows-7-64-bit-guide-geonetwork-development-within)进行了设置。一切顺利，何时应该下载依赖项并从 Eclipse 编译代码表单包根文件夹，右键单击`pom.xml`根文件夹中的文件并选择`Run As | Maven package`. 然后我得到这个错误：

```
[INFO] ------------------------------------------------------------------------
[INFO] Building GeoNetwork opensource 2.9.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Caching xslt module 2.9.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for org.apache.maven.plugins:maven-resources-plugin:jar:3.0.4 is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] GeoNetwork opensource ............................. SUCCESS [0.001s]
[INFO] Caching xslt module ............................... FAILURE [0.027s]
[INFO] Jeeves modules .................................... SKIPPED
[INFO] Oaipmh modules .................................... SKIPPED
[INFO] ArcSDE module (dummy-api) ......................... SKIPPED
[INFO] GeoNetwork web client module ...................... SKIPPED
[INFO] GeoNetwork Web module ............................. SKIPPED
[INFO] GeoServer module .................................. SKIPPED
[INFO] Gast module ....................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.476s
[INFO] Finished at: Wed Aug 08 14:10:43 CEST 2012
[INFO] Final Memory: 3M/6M
[INFO] ------------------------------------------------------------------------
[ERROR] Plugin org.apache.maven.plugins:maven-resources-plugin:3.0.4 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:3.0.4: Failure to find org.apache.maven.plugins:maven-resources-plugin:pom:3.0.4 in http://oss.sonatype.org/content/repositories/github-releases was cached in the local repository, resolution will not be reattempted until the update interval of oss.sonatype.org-github-releases has elapsed or updates are forced -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles: 
```

我用谷歌搜索但不成功:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:32:16.010

使用 1.6 JRE 运行 Geonetwork。它写在 Geonetwork 开发人员手册和您链接的教程中。

即便如此，您也应该能够使用 Java 1.5 进行构建，恕我直言......

我在构建时遇到了同样的问题（JDK&JRE 版本 1.7.0_17）。我搜索了 maven 存储库，并在 pom.xml 文件中手动编辑了存储库的 url。

因为带有 maven 的 eclipse 喜欢崩溃，所以我建议使用命令 mvn clean install 从命令行运行 maven。如果您必须在 eclipse 中使用 maven，那么我建议重新启动 eclipse 并重新运行 maven。此外，使用 Geonetwork 开发人员手册进行构建（谷歌它，我不能插入超过 2 个链接；））。

您还可以在[错误跟踪器](http://trac.osgeo.org/geonetwork/search)或[开发论坛](http://osgeo-org.1560.n6.nabble.com/GeoNetwork-developer-f3874395.html)中找到有关构建崩溃原因的一些线索。

# php - CodeIgniter 数据库查询使用带有 IN 子句的 query()

> ID：11864911
> 
> 赞同：3
> 
> 时间：2012-08-08T12:50:01.573
> 
> 标签：php, mysql, codeigniter

我的模型中有以下代码：

```
$sql = "SELECT t1.*, t2.* FROM Table1 t1 INNER JOIN Table2 t2 ON t1.id = t2.id AND t2.title IN (?) AND t1.type = ? ORDER BY t1.id";
$q = $this->db->query( $sql, array( $filter, $type ) ); 
```

问题是这个查询在以下情况下可以正常工作：

```
$filter = 'a'; 
```

但在以下情况下不返回任何内容：

```
$filter = "'a','b','c','d'"; 
```

对于第二种情况，我可以看到 CI 正在像这样逃避 $filter：

```
SELECT t1.*, t2.* FROM Table1 t1 INNER JOIN Table2 t2 ON t1.id = t2.id AND t2.title IN ('\'a\',\'b\',\'c\',\'d\'') AND t1.type = ? ORDER BY t1.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:06:21.080

那是正确的行为。CI 在将引号发送到 MySQL 之前对其进行转义。您可能应该为过滤器使用一个数组并构造类似这样的东西（未经测试；））

```
$filter = array('a','b','c');
$sql = "SELECT t1.*, t2.* 
     FROM Table1 t1 
     INNER JOIN Table2 t2 
         ON  t1.id = t2.id 
         AND t2.title IN (". implode(',', array_fill(0, count($filter), '?')).") 
         AND t1.type = ? 
     ORDER BY t1.id";
//edit: check if $filter is not an array ( when it is a single value string )
$filter = is_array( $filter ) ? $filter : array( $filter );
$q = $this->db->query( $sql, array_merge( $filter, array( $type ) ) ); 
```

您还应该稍微重写一下查询：

```
$sql = "SELECT t1.*, t2.* 
     FROM Table1 t1 
     INNER JOIN Table2 t2 
         ON  t1.id = t2.id 
     WHERE
         t2.title IN (". implode(',', array_fill(0, count($filter), '?')).") 
         AND t1.type = ? 
     ORDER BY t1.id"; 
```

# sql - 这条 SQL 语句怎么写 Update Where 在哪里？

> ID：11864913
> 
> 赞同：0
> 
> 时间：2012-08-08T12:50:13.180
> 
> 标签：sql, excel, tsql, sql-server-2008-r2

```
Update [E1$] 
set [LR/Virtual/MW]='LR' ,  
[Vir No#]=null  
where [Conc] , [Vir No#]
  in   (    
    SELECT  [Conc] , [Vir No#]
    FROM [E1$]  
    where [Vir No#] is not null 
    group by Conc , [Vir No#] 
    having  Count(LR)<28
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:55:00.340

尝试这个：

```
 Update E set [LR/Virtual/MW]='LR' , [Vir No#]=null  
  from [E1$] E join
       (SELECT  [Conc] , [Vir No#]
        FROM [E1$] where [Vir No#] is not null 
        group by Conc ,[Vir No#] 
        having  Count(LR)<28
       ) a
 on e.[Conc]=a.[Conc] 
    and e.[Vir No#]=a.[Vir No#] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:57:20.633

```
Update [E1$] 
set [LR/Virtual/MW]='LR',[Vir No#]=null  
where exists(    
    SELECT  [Conc] , [Vir No#]
    FROM [E1$] e2 
    where [Vir No#] is not null and  [E1$].[Conc]=e2.[Conc] and [E1$].[Vir No#]=e2.[Vir No#]
    group by Conc , [Vir No#] 
    having  Count(LR)<28
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:54:42.060

尝试`([conc], [Vir No#])`在`where`子句中使用括号。

```
Update [E1$] 
set [LR/Virtual/MW]='LR' ,  
[Vir No#]=null  
where ([Conc] , [Vir No#]) in
(    
   SELECT  [Conc] , [Vir No#]
   FROM [E1$]  
   where [Vir No#] is not null 
   group by Conc , [Vir No#] 
   having  Count(LR)<28
) 
```

# jquery - 元素正在使用 div 的 mouseover/out 子元素进行剪辑

> ID：11864915
> 
> 赞同：0
> 
> 时间：2012-08-08T12:50:21.593
> 
> 标签：jquery, mouseover, mouseout

我希望在悬停时在 div 内显示一些按钮。

[这里的](http://jsfiddle.net/Phhnh/2/)例子

// HTML

```
<div id="overdiv"> 
<p>Move your mouse several times on this text to see the bug</p> 
<input type="button" value="hello" class="elements"/> 
</div> 
```

// CSS

```
#overdiv {background:#CCC;border:1px solid #FFF;width:300px;height:150px;}
.elements {display:none;} 
```

// JS

```
$('#overdiv').mouseover(function(){$('.elements').fadeIn();}).mouseout(function(){$('.elements').fadeOut();}); 
```

它可以工作，但是当鼠标悬停在 div 内的其他元素时，我的按钮会出现并在循环中消失。（我只用 Chrome 测试过）

那么，如何让按钮在鼠标在 div 内时出现一次，在鼠标不在时消失一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:53:41.413

代替“mouseover”事件，使用“mouseenter”。

```
$('#overdiv').mouseenter(function(){$('.elements').fadeIn();}).mouseleave(function(){$('.elements').fadeOut();}); 
```

解释：每个元素及其子元素都会触发“mouseover”和“mouseout”，所以如果你“mouseout”文本，你的“mouseout”事件就会被触发......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:01:26.340

试试这个方法来解决问题.....

$('#overdiv').mouseenter(function(){$('.elements').fadeIn();}); $('#overdiv').mouseleave(function(){$('.elements').fadeOut();});

# java - 如何在 xslt 转换期间处理 org.apache.xml.utils.WrappedRuntimeException？

> ID：11864917
> 
> 赞同：0
> 
> 时间：2012-08-08T12:50:25.010
> 
> 标签：java, xml, xslt

如果可能，我想执行 xslt 转换并处理所有错误。但是这段代码

```
 transformer = factory.newTransformer(xslt); 
```

不会引发异常，但会在控制台打印以下内容：

```
Неизвестный ИД системы; Номер строки 7; Номер столбца 40;        org.apache.xml.utils.WrappedRuntimeException: Переменная site_name не найдена

(in English this means Unknown ID system line number 7, column number 40;   org.apache.xml.utils.WrappedRuntimeException: site_name variable was not found) 
```

如何在函数完成后强制 newTransformer 抛出异常或收集这些错误？在网上没有找到任何有价值的信息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:20:44.000

我不确定是否会抛出异常，但您可以使用 ErrorListener 收集它们。这些方面的东西：

```
class ErrorCollector implements ErrorListener {

    private List<TransformerException> errors = new ArrayList<TransformerException>();

    @Override
    public void error(TransformerException exception) throws TransformerException {
        errors.add(exception);
    }

    ...
} 
```

（代码不完整，但我想你明白了）

然后将其添加到您的工厂：

```
ErrorCollector errorCollector = new ErrorCollector();
factory.setErrorListener(errorCollector); 
```

然后访问收集器中的错误。

希望能帮助到你！

# c# - 什么类型的数据可以在 C# 和 C++ 之间传输

> ID：11864923
> 
> 赞同：2
> 
> 时间：2012-08-08T12:50:54.190
> 
> 标签：c#, c++, wcf, types, named-pipes

我有 2 个必须进行通信的应用程序。这两个应用程序都在同一台计算机上，这就是我使用命名管道进行通信的原因。

我的问题是关于将要发送的数据。我有哪些选择？以下可能性是否可行？

*   在 2 个应用程序之间发送字节
*   发送 C 结构体
*   发送一些协议缓冲区对象

如果还有其他想法，我很开放，我的目标是让一些东西真正快速实施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:05:16.150

除非您需要非常高的性能，否则我会选择标准的跨语言服务通信语言，例如[Thrift](http://thrift.apache.org/)或[Protocol Buffer](http://code.google.com/p/protobuf/)。

如果有一天您必须与使用另一种语言的第三个应用程序进行通信，或者如果您决定在不同的机器上运行每个服务，这将允许您毫无问题地进行扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:10:32.073

实施起来真的很快，还是运行起来真的很快？

如果前者 - 使用 Web 服务，gsoap 或 WCF 将为您提供一个可以调用的简单接口。

如果是后者，您可能需要共享内存 - 将原始数据放在那里并允许其他进程将其读出。如果您有大量数据要传输，这就是要走的路。如果您的数量很少，那么您可以直接通过命名管道（或套接字，总是好的，易于使用，并且可以让您更轻松地迁移到多台机器）发送它。

要解释您正在传输的数据，请忘记尝试发送 C# 对象并让 C++ 端将其作为同一个对象读取，您将不得不处理原始数据。这意味着以某种格式序列化数据（二进制格式也可以很好地工作，并且比将其序列化为 XML 快得多）。然后另一方可以将其读入并将其反序列化为自己的数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:17:18.737

一种选择：使用[zeromq](http://www.zeromq.org/)进行传输，使用 protobuf、thrift 甚至 json 作为通信语言。Zeromq 真的很快。

# mongodb - 在 MongoDB 中，我如何获取所有费用具有用户名“X”的任务

> ID：11864924
> 
> 赞同：0
> 
> 时间：2012-08-08T12:51:07.380
> 
> 标签：mongodb, nosql

我在 MongoDB 中有两个集合

用户（查找（））：

```
{ "_id" : ObjectId("5021314e372c50859ced7063"), "name" : "Vinícius", "username" : "vinixhenri", "password" : "vinix123" }
{ "_id" : ObjectId("50213180372c50859ced7064"), "name" : "André", "username" : "andre", "password" : "andre123" } 
```

和项目（findOne()）：

```
{
    "_id" : ObjectId("50215d09ddf7410905000000"),
    "name" : "Projeto X",
    "local" : "/home/server/compartilhamento/htdocs/project_x/",
    "permissions" : [
            {
                    "user" : "5021314e372c50859ced7063",
                    "alter" : true,
                    "view" : true,
                    "delete" : true,
                    "view_task" : true,
                    "insert_task" : true,
                    "alter_task" : true,
                    "delete_task" : true
            },
            {
                    "user" : "50213180372c50859ced7064",
                    "alter" : true,
                    "view" : true,
                    "delete" : false,
                    "view_task" : false,
                    "insert_task" : false,
                    "alter_task" : false,
                    "delete_task" : false
            }
    ],
    "tasks" : [
            {
                    "responsible" : "5021314e372c50859ced7063",
                    "description" : "Ajuste na barra lateral do site"
            },
            {
                    "responsible" : "5021314e372c50859ced7063",
                    "description" : "Ajuste no cabeçalho do site"
            },
            {
                    "responsible" : "50213180372c50859ced7064",
                    "description" : "Ajuste no rodapé do site"
            }
    ] 
```

}

我展示了一个 findOne() 项目集合，但我想知道它怎么会是一个 find() 。

我将如何获得所有收费的用户名为“vinixhenri”的任务？用户标识符是任务->责任。

我还想知道我在保留 _id 用户方面做得对吗？是不是必须先查阅用户信息，然后再从数据库中查询项目信息？或者我应该在集合中复制有关用户任务的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:03:20.503

直到 2.2（您将拥有：[https](https://jira.mongodb.org/browse/SERVER-828) ://jira.mongodb.org/browse/SERVER-828甚至聚合框架）之前最合适的方法是：

*   返回具有一个或多个任务的所有 Root 文档，并由特定用户在客户端过滤掉它们，以便仅在与该用户相关联的那些项目中获得那些可以很好地工作的任务。

*   运行一个 MR（不那么推荐），它会每隔一段时间重新格式化您的文档，使其符合您的需要。

注意：MR 不会是实时的，但是您可以使客户端过滤实时，因此我个人会选择在客户端过滤掉它。

> 我还想知道我在保留 _id 用户方面做得对吗？是不是必须先查阅用户信息，然后再从数据库中查询项目信息？或者我应该在集合中复制有关用户任务的信息？

是的，这很好而且性能很好。例如说用户更改了他们的用户名你不想通过所有的项目文档来改变他们的用户名是吗？必须查询外部行来检索所有信息更新会带来费用，但也会带来好处。在这种情况下，将用户数据复制到项目文档中会很糟糕。

# python - Python：从字符串访问变量

> ID：11864926
> 
> 赞同：2
> 
> 时间：2012-08-08T12:51:16.040
> 
> 标签：python

这可能是非常基本和简单的事情，我可能只是在搜索错误的术语，但希望这里有人可以帮助我。（我仍然是编程的初学者，这从这个问题中可能很明显。）

我正在寻找一种从字符串访问变量的方法。

像这样：

```
A1 = {}
B1 = {}
C1 = {}

mylist = ["A","B","C"]

for blurb in mylist:
    blurb1.foo() 
```

现在我在这种情况下使用 if/elif-constructions：

```
if blurb == "A":
    A1.foo()
elif blurb == "B":
    B1.foo()
elif blurb == "C":
    C1.foo() 
```

这行得通，但肯定有更优雅的方法吗？

谢谢你的帮助！拉斯塔尔达

* * *

Edit2：试图再次澄清（抱歉之前不是很连贯，我很难理解这一点）：

**我想从字符串创建和访问对象。**

因此，如果我有一个返回字符串的函数，我想创建一个使用此字符串作为列表名称的列表，然后使用该列表进行操作。

```
x = foo() # foo returns a string, e.g. "A"
# create list named whatever the value of x is
# in this case: 
A = [] 
```

没有什么比为 x 的所有可能结果准备列表并使用长 elif 结构或字典更优雅的了？在这种情况下我必须使用 eval() 吗？（我对使用 eval() 犹豫不决，因为它被认为是危险的。）

我希望现在终于清楚了。任何帮助仍然很感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T12:55:18.097

我想你想要类似的东西

```
lookup = {"A": A1, "B": B1, "C": C1}
obj = lookup.get(blurb,None)
if obj:
   obj.foo() 
```

当有人想用 switch 语句（来自 c/java/etc）做某事时，通常会建议这样做。请注意，lookup.get（而不仅仅是 lookup[blurb] 处理的情况是，blurb 不是值之一你定义它...你也可以将它包装在一个 try/except 块中。

* * *

根据您修改后的问题更新答案，该问题建立在 Joachim Pileborg 在另一个答案中所说的基础上。

可能有更好/更清洁的方法可以做到这一点，但如果你真的想通过字符串设置/获取来操作全局对象，你可以这样做。一种方法是：创建一个名为“myvariable”的新对象（或将“myvariable”设置为新值）

```
joe = "myvariable"
globals().update([[joe,"myvalue"]]) 
```

要将对象“myvariable”分配给：

```
globals().get(joe,None) 
```

（或者如另一个答案中所述，您可以使用 try/except 直接散列而不是使用 get）

因此，对于后面的示例，您可以执行以下操作：

```
for myobject in mylist:
    # add myobject to list called locus
    # e.g. if locus == "A", add to list "A", if locus == "B" add to list B etc.
    obj = globals().get(myobject.locus,None) # get this list object
    if not obj: # if it doesn't exist, create an empty list named myobject.locus
        obj = []
        globals().update([[myobject.locus,obj]]
    obj.append(myobject) #append my object to list called locus 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T13:07:58.580

您可以获取模块对象，并用于`getattr`从字符串中获取变量/函数：

```
import sys

A = {}
B = {}
C = {}

modname = globals()['__name__']
modobj  = sys.modules[modname]

mylist = ["A","B","C"]

for name in mylist:
    print '%s : %r' % (name, getattr(modobj, name)) 
```

上面的程序将打印：

```
一个 ： {}
乙：{}
C ： {}

```

但是，它与您在问题中引用的“通配符”无关，但您没有显示对“通配符”的任何搜索。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T13:07:20.210

使用`eval()`.

例子：

```
A1 = []
B1 = []
C1 = []

mylist = ["A","B","C"]

for blurb in mylist:
    eval("%s1.append(blurb)" % blurb)

print A1,B1,C1
>>> 
['A'] ['B'] ['C'] 
```

对于您的代码，它可以是：

```
for blurb in mylist:
    eval("%s1.foo()" % blurb) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T14:33:19.110

我看起来你只是想要一本字典并查找它而不是运行一堆检查。

```
dict_look_up = {'A' : A1, 'B' : B1, 'C' : C1}
try:
    dict_look_up[blurb].foo()
except KeyError:
    #whatever on item not found 
```

`try/except`块在 Python 中非常重要（请求原谅比请求许可更好），所以如果你正在学习，我建议从一开始就使用它们。

# c# - 在 .NET 和 C# 中使用 Google Documents API 检索上传的演示 URL

> ID：11864927
> 
> 赞同：2
> 
> 时间：2012-08-08T12:51:16.427
> 
> 标签：c#, .net, google-docs-api

## **语言：**

C# ASP.NET

## **参考：**

适用于 .NET 的 Google 文档列表 API

## **情况**

我正在尝试生成一个 Web 应用程序，该应用程序接收来自应用程序用户的上传文件（仅 ppt 或 pptx 扩展名），并使用我的 Google 帐户将其上传到 Google Documents。然后检索上传文档的 id 以重现类似的内容：

```
<iframe src="https://docs.google.com/present/embed?id=" + <%# eval("returnedUploadedId") %> + " frameborder="0" width="410" height="342"></iframe> 
```

## **问题**

但是，从我撕毁[https://developers.google.com/google-apps/documents-list/#creating_or_uploading_presentations](https://developers.google.com/google-apps/documents-list/#creating_or_uploading_presentations)上提供的文档以及一个小时的谷歌搜索来看，似乎信息不足且缺乏我参考并解决解决方案。

我想联系使用 .NET、C# 和/或 Google Documents List API 的专业人士，帮助我获得足够的信息来创建这样的应用程序。甚至提供一些编程逻辑和相关资源就足够了。

PS：我希望我的问题现在已经克服了含糊不清的障碍。我是 Stack Exchange 的新手，尽管我已经阅读了有关发布好问题的各种说明，但我仍然需要更多经验才能充分达到可以不断提出好问题的地步。

热烈的问候，加布里埃尔。

# ruby - 使用 RVM 的 Hadoop Streaming 找不到 Gem

> ID：11864938
> 
> 赞同：0
> 
> 时间：2012-08-08T12:51:46.567
> 
> 标签：ruby, hadoop, gem, rvm, hadoop-streaming

原始问题（下面的长版本）。短版：使用 ruby​​ 脚本作为映射器运行 ​​hadoop 流，并在所有集群节点上安装 rvm 不起作用。因为hadoop启动的shell不知道ruby（并且没有正确加载rvm）。为什么？

* * *

我想`wukong`用作一个 gem 来为 hadoop 创建 map/reduce 作业。问题是`wukong`hadoop无法加载gem（即找不到）。Hadoop 作业向我显示以下错误：

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- wukong (LoadError)
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /tmp/mapr-hadoop/mapred/local/taskTracker/admin/jobcache/job_201207061102_0068/attempt_201207061102_0068_m_000000_0/work/./test.rb:6:in `<main>'
java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 1
at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:362)
at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:572)
at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:136)
at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:34)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:394)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1109)
at org.apache.hadoop.mapred.Child.main(Child.java:264) 
```

但是，`cat somefile | ./test.rb --map`按预期在所有集群机器上运行。我还在我的测试文件中包含了一些调试打印，我可以在 hadoop 日志中检索它们。跑步时

```
$stderr.puts `gem list` 
```

它产生所有的宝石`wukong`，包括

```
$stderr.puts $LOAD_PATH.inspect 
```

`$LOAD_PATH`产生与打印运行本地（不是由 hadoop 启动）ruby 脚本时相同的路径。

**为什么 hadoop 启动的 ruby​​ 脚本找不到**明确安装并正常工作的 gem？

* * *

hadoop 启动为：

```
hadoop jar /opt/mapr/hadoop/hadoop-0.20.2/contrib/streaming/hadoop-0.20.2-dev-streaming.jar \
-libjars /opt/hypertable/current/lib/java/hypertable-0.9.5.6.jar,/opt/hypertable/current/lib/java/libthrift-0.8.0.jar \
-Dmapred.child.env="PATH=$PATH:/usr/local/rvm/bin/rvm" \
-mapper '/home/admin/wukong/test.rb --map' \
-file /home/admin/wukong/test.rb \
-reducer /bin/cat \
-input /test/test.rb \
-output /test/something2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:44:21.790

你在用红宝石吗？

确保您运行：

```
rvm use 1.9.3 
```

并且`echo $GEM_PATH`应该返回如下内容：

```
/usr/local/rvm/gems/ruby-1.9.3-p194:/usr/local/rvm/gems/ruby-1.9.3-p194@global 
```

如果不是，则表示使用命令不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:17:15.180

不知何故，我设法通过重新启动集群中的所有机器来使其工作。我认为`rvm`来源不正确。尽管需要重新启动，但斯坦奇。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T21:45:44.217

看看这里：http: [//zachmoshe.com/2015/02/23/use-ruby-gems-with-hadoop-streaming.html](http://zachmoshe.com/2015/02/23/use-ruby-gems-with-hadoop-streaming.html)

它展示了如何使用 Hadoop Streaming 运行带有 gem 的 ruby​​ 映射器。

我知道你问了三年后，但也许它会帮助别人..

# django - 将 apache 配置为服务器 django-logdb 静态文件

> ID：11864944
> 
> 赞同：0
> 
> 时间：2012-08-08T12:52:24.297
> 
> 标签：django

我不知道为什么我对此如此脑残，但我无法弄清楚。

根据网站上的说明，我有这些设置：

```
LOGDB_MEDIA_ROOT = '/admin/djangologdb/media/'
LOGDB_MEDIA_URL = '/media/djanglogdb/' 
```

我在我的 apache httpd.conf 中有这个：

```
Alias /media/djangologdb/ "C:/python26/lib/site-packages/django_logdb-1.0-py2.6.egg/djangologdb/media/" 
```

但是当我的浏览器尝试获取[http://www.example.com/media/djanglogdb/js/jquery.flot-0.6.min.js时，我得到了 404](http://www.example.com/media/djanglogdb/js/jquery.flot-0.6.min.js)

给无知的人提供线索，有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:01:54.640

根据[logdb 自述](https://github.com/joeribekker/django-logdb) `LOGDB_MEDIA_ROOT`文件是文件系统上媒体文件的绝对路径，而是`LOGDB_MEDIA_URL`web url。所以你可能想要

```
LOGDB_MEDIA_ROOT = 'C:/python26/lib/site-packages/django_logdb-1.0-py2.6.egg/djangologdb/media/'
LOGDB_MEDIA_URL = '/media/djanglogdb/' 
```

**编辑**

与我自己的 django 安装相比（尽管我实际上并没有使用 logdb），我有一个`<directory>`指令将选项应用于 引用的路径`Alies`，即

```
Alias /site_media/ "/path/to/project/static/"
<Directory "/path/to/project/static">
    Order allow,deny
    Options Indexes
    Allow from all
    IndexOptions FancyIndexing
</Directory> 
```

取决于您如何设置 Apache，这可能会有所帮助。与 Django 和 logdb 相比，这似乎更可能是您的 Apache 设置的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:04:19.117

问题出在我没有展示的东西上。

遵循这一行：

```
Alias /media/djangologdb/ "C:/python26/lib/site-packages/django_logdb-1.0-py2.6.egg/djangologdb/media/" 
```

我有

```
<Location /media/djangologdb >
  SetHandler None
  Order allow,deny
  Allow from all
</Location> 
```

而那个“位置”目录是错误的。它应该是一个“目录”指令（因为我在文件系统之外提供一些东西），并且目录必须指定完整的目录路径。像这样：

```
<Directory "C:/python26/lib/site-packages/django_logdb-1.0-py2.6.egg/djangologdb/media/" >
  SetHandler None
  Order allow,deny
  Allow from all
</Directory> 
```

# objective-c - 如何在一个 iOS 应用程序中列出所有现有的 iOS 应用程序以及从那里下载的选项

> ID：11864947
> 
> 赞同：0
> 
> 时间：2012-08-08T12:52:36.040
> 
> 标签：objective-c, ios, ios5, xcode4.2

我正在尝试制作一个 iOS 应用程序，显示所有目录 - 我的 iOS 应用程序（应用商店），用户可以从那里下载这些应用程序到设备上，（类似于应用商店）。

请建议这是怎么可能的

```
UItableView *tblAppList = [[UItableview alloc]init]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:40:43.140

您是否希望从应用商店中动态提取应用列表？如果您这样做了，那么您将不得不编写一些 XML 解析器并使用您的开发人员姓名放置一个由开发人员搜索的查询。然后，您需要提取数据的有用部分，例如应用标题、应用商店链接和图标图像。然后，您将传递到表视图中。

有关如何查询 iTunes 商店的更多信息，请查看此处；

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

# sql-server - 此格式的时间的 MS SQL 数据类型 HH.MM.SS

> ID：11864951
> 
> 赞同：1
> 
> 时间：2012-08-08T12:52:48.297
> 
> 标签：sql-server, tsql

我想知道在创建 DATABASE 表时可以使用 HH:MM:SS 格式创建类型列的值`fractional`和值，谢谢！`precision``time`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T12:55:40.993

TIME(0) 会给你一个没有小数精度的时间。以下 URL 有一个可以帮助的图表。

[SQL Server 时间数据类型](http://msdn.microsoft.com/en-us/library/bb677243.aspx)

# visual-c++ - Opencv 和 VC++ 的问题

> ID：11864953
> 
> 赞同：0
> 
> 时间：2012-08-08T12:52:54.320
> 
> 标签：visual-c++, opencv

我已经用 Visual C++ 2010 Express Edition 配置了 Opencv 2.4.2。我已经链接并包含了所有文件。现在，当我编译任何文件时，编译器会给出错误“LINK：致命错误 LNK1104：无法打开文件 'opencv_core231d.lib'”。

我搜索了提取文件的 OPENCV 文件夹，那里没有“opencv_core231d.lib”。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:12:31.967

你必须在使用它之前编译opencv。按照[此处](http://seevisionc.blogspot.co.uk/2012/07/compiling-opencv-with-openni-for.html)的简单步骤编译和设置项目。本教程用于编译支持 openni 的 opencv（但您可以跳过该部分）。

如果你搜索更多，你会发现很多类似的使用 VC++ 编译 opencv 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:17:36.530

您应该链接**opencv_core242d.lib**而不是您提到的那个。

1.  如果您下载了源代码，请确保您运行 cmake 以生成 VC++ 解决方案文件，然后构建解决方案（在发布和调试模式下）。

2.  检查**opencv_core242d.lib**文件是否存在于`<build folder>\lib\Debug`

3.  检查您是否已将**OpenCV\< 构建文件夹 >\lib\Debug** 路径添加到 Properties->Linker->General->Additional Library Directories

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:25:33.603

```
properties --> linked --> input 
```

放 ：

```
opencv_calib3d220.lib
opencv_calib3d220d.lib
opencv_contrib220.lib
opencv_contrib220d.lib
opencv_core220.lib
opencv_core220d.lib
opencv_features2d220.lib
opencv_features2d220d.lib
opencv_ffmpeg220.lib
opencv_ffmpeg220d.lib
opencv_flann220.lib
opencv_flann220d.lib
opencv_gpu220.lib
opencv_gpu220d.lib
opencv_highgui220.lib
opencv_highgui220d.lib
opencv_imgproc220.lib
opencv_imgproc220d.lib
opencv_legacy220.lib
opencv_legacy220d.lib
opencv_ml220.lib
opencv_ml220d.lib
opencv_objdetect220.lib
opencv_objdetect220d.lib
opencv_ts220.lib
opencv_video220.lib
opencv_video220d.lib 
```

# c - 为什么在使用 typedef 时非常量指针被视为 const？

> ID：11864964
> 
> 赞同：6
> 
> 时间：2012-08-08T12:53:20.250
> 
> 标签：c, pointers, constants

```
typedef char* c;
const c ptr1 = "pointer";
++ptr1; /// error
const char* ptr2 = "pointer";
++ptr2; /// runs fine 
```

现在`ptr1`应该是类型`const char*`，因此是非常量指针，那么为什么将它视为常量指针？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T12:55:17.560

它们是不相同的。

第一个指定 const-pointer-to-char，第二个是指向 const-char 的指针。

尝试从右到左阅读：

```
const char *p;  // p is a pointer to char which is const
char const *p;  // p is a pointer to const char (same as previous)
char * const p; // p is a const pointer to char
char const * const p; // p is a const pointer to const char 
```

通过使用 typedef `typedef char* c`，您可以将“指向 char 的指针”的含义打包到一个别名中`c`：

```
const c p; // p is a const [c] --> p is a const [pointer to char] 
```

* * *

**补充说明：**

Typedef 不像宏那样就地扩展，即

```
const c p; 
```

真的变成

```
const [char*] p; 
```

它*不会*变成

```
const char* p; // Nope. 
```

不要在你的脑海中像宏一样扩展它，使用 typedef，你已经绑定在一起`char`并`*`形成了一个原子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T12:55:53.070

`ptr1`is a`const (char *)`表示指针本身是 const，而`ptr2`is a`(const char) *`表示指针的目标是 const。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:56:50.663

它与 c 在内部对事物进行分组的方式有关。typedef 不像宏，它不只是替换其中的东西。如果你要在其中加上括号，它看起来像这样。

```
const (char*) ptr1 = "pointer";
(const char)* ptr2 = "pointer"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:00:52.377

像这样写：

```
typedef char* c;
c const ptr1 = "pointer";
++ptr1; /// error
char const* ptr2 = "pointer";
++ptr2; /// runs fine 
```

使差异更加明显，这应该与您的示例相同

# php - 在 PHP (AES,CBC) 中加密，在 iPhone 上解密后为空值

> ID：11864966
> 
> 赞同：2
> 
> 时间：2012-08-08T12:53:23.507
> 
> 标签：php, iphone, encryption, mcrypt

我在 PHP 中加密一个值，而另一个程序员在 iPhone 应用程序中解密它。我们都不能被称为加密知识。从我在本网站和其他地方找到的信息来看，一切看起来都是正确的。iPhone 的人说他从解密过程中获得了成功的返回码，但数据为空值。

这是PHP方面：

```
$key = getproperty("cryptkey","testkeytobechanged");
srand();
$iv = mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC), MCRYPT_RAND);
if (strlen($iv_base64 = rtrim(base64_encode($iv), '=')) != 22) return false;
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, md5($key), $iv_base64."::::".$authority->get_mobiuser()->get_message(), MCRYPT_MODE_CBC, $iv));
$rv = $iv_base64.$encrypted; 
```

这是 iPhone 端的内容：

```
 //We have compared the hex values after base64 decoding enough that I am satisfied there is not an issue at that point.

   NSString *b = [[dict objectForKey:@"data"]objectForKey:@"nlbal"];
   NSData *iv = [NSData dataFromBase64String:[[b substringToIndex:22]stringByAppendingString:@"=="]];
   NSLog(@"IV %@", [iv description]);
   NSString *e = [b substringFromIndex:22];
   NSData *encrypted = [NSData dataFromBase64String:e];
   NSLog(@"ENC %@", encrypted);
   NSUInteger dataLength = [encrypted length];
   uint8_t unencryptedData[dataLength + kCCKeySizeAES128];
   size_t unencryptedLength;
   //NSData *un = [encrypted AES128DecryptWithKey:[SessionManager md5:@"testkeytobechanged"] iv:iv];

   //From my research, I understand this to be the correct form to match the encryption I use on the PHP side
   CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, 
                                          kCCAlgorithmAES128, 0, 
                                          [[SessionManager md5:@"testkeytobechanged"]UTF8String], 
                                          kCCKeySizeAES128, [iv bytes], 
                                          [encrypted bytes], dataLength, 
                                          unencryptedData, dataLength, &unencryptedLength);

   NSString *output = [[NSString alloc] initWithBytes:unencryptedData length:unencryptedLength encoding:NSUTF8StringEncoding];
   // output = [[NSString alloc]initWithData:un encoding:NSUTF8StringEncoding];
   //NSLog(@"un %@", [un description]);
   NSLog(@"OUTPUT %i %@", cryptStatus, output); 
```

正如我上面所说，这段代码显然会产生一个成功代码，但有一个空值。

# excel - Excel：打印预览中的圆形更改形式。

> ID：11864967
> 
> 赞同：1
> 
> 时间：2012-08-08T12:53:27.970
> 
> 标签：excel, shape

当您在 Excel 中绘制一个完美的圆形并在打印预览中使用它时，您会注意到它不再是圆形，而是变平了。
我的一个朋友在他的电脑上遇到了这个问题，但是当我在我的电脑上尝试时，我得到了完全相同的结果。
不知道为什么。
有人可以帮忙吗？调整边距和一般属性不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-22T21:47:09.297

在不涉及技术细节的情况下，简短的回答是，由于您的显示器和打印机具有非常不同的分辨率（即[DPI/dots per inch](https://en.wikipedia.org/wiki/Dots_per_inch)与[PPI/pixels per inch](https://en.wikipedia.org/wiki/Pixel_density)），而且像素/点甚至不一定相同[shape](https://www.scantips.com/lights/resize2.html#aspect)，因此需要进行一些操作才能获得与您在 Excel 中绘制的形状相同的打印形状。

下面是一些相关链接。（画一个完美的正方形显然是同一个问题。）

*   Microsoft 支持：[**在 Excel 中打印时列宽不一样**](https://support.microsoft.com/help/214394/the-column-width-is-not-the-same-when-printed-in-excel)
*   数字趋势：[**像素、打印机、视频：这是怎么回事？**](https://www.scantips.com/lights/pixels.html)
*   Excel 论坛：[**绘制/打印一个精确的圆**](https://www.excelforum.com/excel-new-users-basics/478575-drawing-printing-an-exact-circle.html)
*   超级用户：[**如何在 Excel 中使单元格成为完美的正方形？**](https://superuser.com/q/165738/774713)
*   Mr.Excel：[**使用 Excel 工作表作为绘图的网格纸**](https://www.mrexcel.com/tech-tv/excel-worksheet-as-gridpaper-for-drawing/)
*   堆栈溢出：[**如何在 Excel 中的图形中绘制圆周**](https://stackoverflow.com/q/47448107/8112776)
*   数字趋势：[**在 Windows 10 中调整高 DPI 缩放**](https://www.digitaltrends.com/computing/how-to-adjust-high-dpi-scaling-in-windows-10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-11T15:50:22.820

这在技术上不是解决问题本身的方法，但它绝对是最简单的解决方法，它不涉及猜测压扁的比例来抵消打印时的扁平化。

只需转到“视图”选项卡，然后将视图从普通视图更改为“页面布局”（您会注意到您的图像现在看起来像在打印预览中一样扭曲）。

现在 - 只需在此视图中再次插入图像，您就会发现它以正确的比例插入。

如果您返回常规视图，excel 现在将正确地挤压它，以便打印将显示为一个完美的圆形（或您尝试打印的任何比例重要的形状！）

附加：由于此错误受计算机的 DPI 设置影响，而不是文件本身，请注意，如果您在多台计算机上打开此工作簿，如果 excel 更改形状的方式与您的 PC 不同，则它们的打印结果可能都不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T16:31:16.410

可能的解决方法：对需要从 excel（例如截图工具）打印的圆形进行屏幕截图，然后对其进行修剪并粘贴。那将正确打印

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-05T03:49:38.947

Excel中有一项功能可以防止“文本框”在打印版本中失真。我也将它用于图片和圆圈，并且可以正常工作。

1.  首先，您必须在页面上至少创建一个“文本框”，其中包含一些文本。
2.  然后按住该`Shift`键并选择您的文本框以及页面上的所有其他图片和对象。
3.  右键单击选定对象之一，然后在弹出的对话框中选择“大小和属性”。
4.  在“大小和属性”中打开“文本框”并勾选“调整形状以适合文本”。

# matplotlib - matplotlib 的 axvline 中的错误？

> ID：11864975
> 
> 赞同：2
> 
> 时间：2012-08-08T12:54:04.270
> 
> 标签：matplotlib

根据文档页面： [http](http://matplotlib.sourceforge.net/api/pyplot_api.html) : //matplotlib.sourceforge.net/api/pyplot_api.html 使用axvline的方式就像

```
axvline(x=0, ymin=0, ymax=1) 
```

但是，这在我的计算机中不起作用。什么都没有画出来。而是简单的

```
axvline(x=0) 
```

无需设置 ymin 和 ymax 即可。

我不确定这是否是一个错误。或者，也许我错过了一些微妙的东西？

```
matplotlib.__version__
'0.99.1.1'

uname -a
Linux pc20172 2.6.32-41-generic #94-Ubuntu SMP Fri Jul 6 18:00:34 UTC 2012 x86_64 GNU/Linux 
```

编辑：重现问题的最少代码。

```
from pylab import *
ion()
plot([1,2])
axvline(x=0.5, ymin=1, ymax=2) # No vertical line is drawn.

clf() # Clear the figure to redo the plot.
plot([1,2])
axvline(x=0.5) # Now the desired vertical line is drawn. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:56:47.103

从文档中`help(axvline)`：

> *在x*处画一条从*ymin*到*ymax*的垂直线。使用默认值*ymin* = 0 和*ymax* = 1，这条线将始终跨越轴的垂直范围，无论 ylim 设置如何，即使您更改它们，例如。使用 :meth:`set_ylim`命令。 **也就是说，垂直范围在轴坐标中：0=底部，0.5=中间，1.0=顶部，但*x*位置在数据坐标中。**

所以

```
axvline(x=0.5, ymin=1, ymax=2) # No vertical line is drawn. 
```

在绘图区域外画一条线。如果你把线宽变大，你可以看到：

![图片显示刚刚超出范围的效果](../Images/bac885fc89942699cd4380fa6bf68181.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:59:33.743

好的。现在我意识到 ymin 和 ymax 不在数据坐标中，而是在“标准化”坐标中。因此，0 表示图的底部，而 1 表示顶部。

# ios5 - 使用 segue ios 5 推送不同的视图控制器

> ID：11864977
> 
> 赞同：1
> 
> 时间：2012-08-08T12:54:03.947
> 
> 标签：ios5, uistoryboard, pushviewcontroller, uistoryboardsegue

我正在使用情节提要开发应用程序。我有 AccountTable，其中有 6 个部分，每个部分包含 1 行。部分是： - 配置文件，设置，常见问题解答，隐私，条款，关于。现在，我通过情节提要在表格视图中创建了 1 个 Protype 单元格，并将 PUSH segue 从**该单元格**添加到每个部分的不同视图控制器，并为每个 segue 赋予唯一的名称。现在，当我点击 Profile 时，它​​运行良好。但是当我点击个人资料以外的其他内容时，它仍然会推动个人资料视图控制器。为什么 ？

```
 -(void)prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    NSLog(@"Segue Identifier:- %@",segue.identifier);
} 
```

NSLog 总是记录“ProfileSegue”（ProfileSegue 的标识符）。

我应该怎么办 ？我是否需要根据所选行实例化每个视图控制器然后调用

```
[self.navigationController pushViewController:VC animated:YES]; 
```

任何形式的帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:24:24.467

在这个方法中

```
 -(void)prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    NSLog(@"Segue Identifier:- %@",segue.identifier);
} 
```

您必须检查每个标识符。基于它您必须使视图控制器不饱和..推它...

# ios - 在 iPhone 中显示专有广告

> ID：11864978
> 
> 赞同：0
> 
> 时间：2012-08-08T12:54:04.850
> 
> 标签：ios, iphone, iad

我有一个应用程序，我只想在应用程序内显示我的横幅。我研究了使用 iAd 仅显示我公司的广告的可能性，但这是不可能的。

我正在考虑使用 webView 来显示我的横幅/广告。

你知道苹果是否会允许这种方法吗？你以前遇到过这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:45:03.450

有几个应用程序有这种行为，其中大部分是游戏。我相信拒绝您的应用程序不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:46:53.947

应该不是问题。如果您完全控制它们，您甚至不必使用 webView - 您可以像对待应用程序中的任何视图一样对待它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T15:28:49.353

只要不违反 App Store 的内容指南，您就可以在您的 App 中自由展示您喜欢的任何广告。

有几个专门从事 iPhone 广告的第三方。AdMob 允许您投放我认为您正在寻找的“自家广告”...

[https://support.google.com/admob/bin/answer.py?hl=en&answer=1619751](https://support.google.com/admob/bin/answer.py?hl=en&answer=1619751)

希望有帮助。

# web - 哪些参数负责相机的位置及其角度？

> ID：11864979
> 
> 赞同：1
> 
> 时间：2012-08-08T12:54:05.503
> 
> 标签：web, webgl, three.js, vtk

我尝试将在服务器上渲染的图片与在 Web 客户端渲染的边界框连接起来。我在 web 客户端上使用极坐标系统，所以当 angel phi 超过 90 时，camera.Up 从 (0,1,0) 变为 (0,-1,0)，但是当我将这些选项设置为 Vtk 相机时它工作正常，直到向量 Up 变为 (0,-1,0) 之后，如果 camera.Up 向量没有变化，服务器上的摄像头开始工作，就像 web 客户端一样。

## 这里有一些代码示例：

### JS：

```
renderer.domElement.addEventListener('mousemove', function(e) {
            e.preventDefault();

            if ( paused ) {
                return;
            }

            if ( !moving ) {
                lastLeft = e.clientX;
                lastTop = e.clientY;
                moving = true;
            }

            // horizontal
            theta = - ( ( event.clientX - lastLeft ) * 360 /window.innerWidth ) + onMouseDownTheta;
            phi = ( ( event.clientY - lastTop ) * 360 /window.innerHeight ) + onMouseDownPhi;

            //phi = Math.min( 90, Math.max( -90, phi ) );
            var cosPhi = Math.cos( phi * Math.PI / 180 );
            var sinPhi = Math.sin( phi * Math.PI / 180 );
            var sinTheta = Math.sin( theta * Math.PI / 180 );
            var cosTheta = Math.cos( theta * Math.PI / 180 );

            //trace('data_move');trace(radious);trace(theta);trace(phi);trace(camera.up);   
            camera.position.x = radious * cosTheta * cosPhi;
            camera.position.y = radious * sinPhi;
            camera.position.z = radious * sinTheta * cosPhi;

            if (phi<0)  phi=2*180+phi;
            if (phi>2*180)  phi=phi-2*180;
        if (theta>2*180)    theta=theta-2*180;
        if (theta<-2*180)   theta=theta+2*180;
            if ((phi>180/2)&&(phi<3*180/2))
                camera.up.y=-1;
            else
                camera.up.y=1;

            camera.lookAt(new THREE.Vector3(0,0,0));

            //trace('data_move');trace(FocalPoint);trace(camera.up);    
        trace('data_move');trace(camera.position);trace(camera.up); 
            camera.updateMatrix();

        $('#info').html('<div>Up.X:'+camera.up.x+' Up.Y:'+camera.up.y+' Up.Z:'+camera.up.z+'</div><div>X:'+camera.position.x+' Y:'+camera.position.y+' Z:'+camera.position.z+'</div><div>Phi:'+phi+' Theta:'+theta+' Radious:'+radious+'</div><div>'+FocalPoint+'</div>')

        });
        renderer.domElement.addEventListener('mousedown', function(e) {
            paused = false;
            lastLeft = e.clientX;
            lastTop = e.clientY;
            onMouseDownTheta = theta;
            onMouseDownPhi = phi;
             //$('#vtkPic').show();
        });
        renderer.domElement.addEventListener('mouseup', function(e) {
            moving = paused = true;
            counter = 0
            trace('data_move');trace(camera.position);trace(camera.up); 
        //$('#vtkPic').hide();
        if(camera.up.y == 1)
            comm.makeRequest("vtk", {
                mode: curVtkConf.mode,
                command: "set_camera",
                up: {'x': camera.up.x,'y': camera.up.y,'z': camera.up.z},
                position: {'x': camera.position.x,'y': camera.position.y,'z': camera.position.z},
            });         
        }); 
```

### 飞腾：

```
 def set_camera(self, position, up):
            '''
            Поворот в жестко заданную позицию.
            '''
            self.move_to_origin()
            bounds = self.src_actor.GetBounds()
            camera = self.renderer.GetActiveCamera()
            x, y, z = camera.GetPosition()
            edge = None
            camera.SetPosition(position['x'], position['y'], position['z'])

            camera.SetViewUp(up['x'], up['y'], up['z'])
            self.world_coords_to_pixel_ratio = self._get_world_coords_to_pixel_ratio()
            camera.OrthogonalizeViewUp()

            self.renderer.ResetCameraClippingRange()
            self.renderer.ResetCamera() 
```

### 我解决了这个问题，但知道围绕 Y 旋转存在问题

![在此处输入图像描述](../Images/cf72a43898e4723d1942f9e2d9e63468.png)

# c# - 与日期列表进行比较

> ID：11864980
> 
> 赞同：1
> 
> 时间：2012-08-08T12:54:16.050
> 
> 标签：c#, linq, datetime

LINQ 查询有一个小问题。

基本上我有两个列表，里面填满了日期。

```
List<DateTime> start = GetListOfStartDates();
List<DateTime> end = GetListOfEndDates();
DateTime date = new DateTime(2012, 1, 1); 
```

如何执行 LINQ 查询，将日期与开始日期和结束日期进行比较，基本上是有意义的：

```
(start <= date && end >= date) 
```

显然我知道它们是列表，所以这不起作用，我如何将单个日期与两个日期列表进行比较？基本上是在一组日期之间做一个。

开始索引将始终匹配结束索引，`start[7]`将始终匹配`end[7]`。我正在尝试将 mysql `between`-query 转换为 LINQ。所以我正在寻找给定的“日期”是否在任何起始对中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:06:22.757

OP 目标的另一种解释：

```
bool b = start.Zip(end, (x, y) => new { Start = x, End = y })
              .Any(z => z.Start <= date && z.End >= date); 
```

或者您可以使用`All()`，这取决于您的逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:05:45.297

假设我正确解释了您的问题（请参阅上面的评论），我认为您最好将其作为 for 循环而不是 LINQ 查询来执行。我会做这样的事情：

```
public bool DateFallsInRange(IEnumerable<DateTime> startDates, IEnumerable<DateTime> endDates)
{
    for (int index = 0; index < startDates.Count; index++)
    {
        if ((startDates[index] <= compareDate) && (compareDate <= endDates[index])) return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:05:07.807

开始和结束列表索引必须相同？例子：

```
start|end
[0]1940|1950
[1]1890|1930 
```

1931 年的日期应该过去，因为 1890<1931<1950？还是因为 1931<1940 和 1931>1930 不应该通过？

# tfs - TFS server 2010 和 VS 2010 Professional 上的静态代码分析

> ID：11864982
> 
> 赞同：1
> 
> 时间：2012-08-08T12:54:36.740
> 
> 标签：tfs

我已经安装了 TFS Server 2010。在构建定义中，我将代码分析启用为“始终”。我想知道在哪里可以为每个项目配置自定义规则集？我目前没有 VS 2010 高级/终极版，因此我可以将代码分析作为解决方案的一部分。

有什么方法可以在 TFS 服务器上为每个不同的项目启用不同的代码分析规则集？

-沙拉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:46:00.260

不; 如果您使用的是 VS 2010，则需要高级版才能通过适当的许可来执行此操作。您可以通过直接修改项目文件来做到这一点，但您需要知道手动添加什么。

如果您有高级版，那么您可以转到每个 .Net 项目的项目属性的代码分析选项卡以选择规则并启用静态代码分析。

您可以在您的构建机器上安装 VS 2010，它不会占用额外的许可证 ID，它不用于开发；您实际上需要将它安装在那里，以便在团队构建期间运行分析。

另一种选择是安装 FxCop，它是一个独立于 Visual Studio 的免费工具。它有几乎相同的规则。但是它也不会与 TFS 集成。

# iphone - 隐藏启动图像上的状态栏

> ID：11864993
> 
> 赞同：24
> 
> 时间：2012-08-08T12:55:25.913
> 
> 标签：iphone, objective-c, ios, xcode, statusbar

有没有办法在显示应用程序的启动图像时隐藏状态栏***然后将其带回来？*** 我的应用程序有一个黑色状态栏，启动图像上显示的状态栏是灰色的。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-08T12:58:08.050

使用此代码隐藏状态栏：

**目标C：**

```
[[UIApplication sharedApplication] setStatusBarHidden:YES
 withAnimation:UIStatusBarAnimationSlide]; 
```

**迅速：**

```
UIApplication.sharedApplication().setStatusBarHidden(true, withAnimation: .Slide) 
```

* * *

如果你一开始不需要状态栏。在您的信息文件中添加此设置*( `UIStatusBarHidden`) ：*`plist`

```
Status bar is initially hidden 
```

值为`YES`.

在应用程序中的任何位置使用此代码来显示该特定视图控制器的状态栏

**目标C：**

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide]; 
```

**迅速：**

```
UIApplication.sharedApplication().setStatusBarHidden(false, withAnimation: .Slide) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-08T12:57:09.737

只需在 plist 文件中定义一个键即可解决您的问题

![在此处输入图像描述](../Images/5881de8dd098a12ea48bfcdd89f1e285.png)

快乐编码:)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-16T08:53:45.477

您最初可以在 info.plist 文件中添加此键：`status bar is initially hidden=YES`

然后在应用程序委托中，在`application:didFinishLaunchingWithOptions:`方法中添加这一行：

```
 [[UIApplication sharedApplication] setStatusBarHidden:NO]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-01T14:32:09.357

要将其退回：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {
    // Override point for customization after app launch

    [[UIApplication sharedApplication] setStatusBarHidden:NO];
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-08T12:59:20.740

将以下键添加到 info.plist：

“状态栏最初是隐藏的”并选择 YES 作为值。

# cocos2d-iphone - 获取精灵的精确鼠标关节释放位置

> ID：11864994
> 
> 赞同：1
> 
> 时间：2012-08-08T12:55:31.900
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

如何在释放鼠标关节移动它时获得精灵的确切位置（即使精灵可能仍在移动）。我相信它应该在 ccTouchesEnded 方法中编码，但我不知道该怎么做。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:47:28.990

如果您想知道释放水龙头时精灵的位置，请执行以下操作：

```
-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint pos = sprite.position;
} 
```

# eclipse - 工件过多时 WSO2 Carbon Studio 1.0 崩溃

> ID：11864997
> 
> 赞同：0
> 
> 时间：2012-08-08T12:55:43.853
> 
> 标签：eclipse, wso2, wso2carbon, wso2developerstudio

我已经用 Eclipse 开发了一个 WSO2 碳应用程序。当我有太多工件时，组件... eclipse 崩溃。

这似乎与 root-artifact.xml 接口处理太多工件有关。事实上，如果 eclipse 在打开时崩溃，我无法重新打开 eclipse，因为刚刚开始刚刚关闭。它显示的错误是

```
An internal error has occurred.
No more handles 
```

我正在使用带有 Carbon Studio 1.0 的 Eclipse Helios。一些同事也会遇到同样的情况。我的项目中可能有大约 40-50 个元素。我在 eclipse.ini 中将内存增加到了 756。它显示如下：

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.2.R36x_v20101222
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
756M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
756m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx756m 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:06:31.360

根据此处提供的信息，问题出在您的操作系统中。似乎 Eclipse 进程用完了分配给该进程的文件句柄。

在这种情况下，最好的办法是关闭 Eclipse 中所有不需要的文件/编辑器，并尝试增加操作系统文件句柄限制。

似乎[Bugzilla](https://bugs.eclipse.org/bugs/show_bug.cgi?id=42986)问题与您的情况有关。试试[下面的文章。](http://blogs.technet.com/b/markrussinovich/archive/2009/09/29/3283844.aspx)这可能会有所帮助，但我自己没有尝试过。