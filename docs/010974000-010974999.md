# StackOverflow 问答 10974000-10974999

# c++ - 使用 ImageMagick++ 修改图像对比度/亮度

> ID：10974000
> 
> 赞同：3
> 
> 时间：2012-06-11T02:33:52.110
> 
> 标签：c++, bitmap, imagemagick, brightness, contrast

我正在尝试将对比度和亮度应用于内存中的位图，但我完全迷失了。目前我正在尝试使用 Magick++ 来做到这一点，但如果其他 API 之一能更好地工作，我会全力以赴。我设法找到 Magick::Image::sigmoidalContrast() 来应用对比度，但我不知道如何让它工作。我正在创建一个图像，将缓冲区指针传递给它，然后调用该函数，但它似乎并没有改变任何东西，所以我的第一个想法是它正在制作一个副本并修改它。即便如此，我也不知道如何从 Magick::Image 对象中获取数据。

这是我到目前为止所得到的。

```
Magick::Image image(fBitmapData->mGetTextureWidth(), fBitmapData->mGetTextureHeight(), "RGBA", MagickCore::CharPixel, pixels);
image.sigmoidalContrast(1, 20.0); 
```

文档没用，搜索后我只能找到第一个参数实际上是布尔值的提示，即使它需要一个 size_t，它指定是添加还是减去对比度，而第二个值是我不知道要做什么的东西通过所以我只是使用 20.0 来测试。

那么有谁知道这是否适用于对比，如果没有，那么你如何应用对比？同样，我仍然不知道如何应用亮度，也找不到任何看起来可以工作的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T02:00:58.843

弄清楚了; 我使用的对比度功能是正确的，我最终使用了亮度`image.modulate(brightness, 100.0, 100.0);`。要从图像对象中获取数据，您可以通过执行获取整个图像的像素

```
const MagickCore::PixelPacket * magickPixels = image.getConstPixels(0, 0, image.columns(), image.rows()); 
```

然后将数据复制`magickPixels`回`pixels`传递给图像构造函数的原始数据。需要注意的重要一点是，该成员`MagickCore::PixelPacket::opacity`不是您想象的那样。如果像素是完全透明的，您会认为该值为 0，对吧？出于某种原因，ImageMagick 正在做相反的事情。因此，为了完全透明，该值将是 255。这意味着您需要做`255 - opacity`才能获得正确的值。

还要注意`MAGICKCORE_QUANTUM_DEPTH`编译 ImageMagick 时使用的，因为这会极大地改变值。因为我的代码`MAGICKCORE_QUANTUM_DEPTH`恰好被定义为 16，所以所有的值都在 0 到 65535 的范围内，`realValue = magickValue >> 8`由于纹理数据是`unsigned char`值，所以我只是在复制数据时修复了这个问题。

只是为了澄清如何使用这些函数，因为文档很糟糕并且完全错误，所以第一个参数`signmoidalContrast()`实际上是一个布尔值，即使类型是 size_t，它指定是增加对比度（true）还是减少它（ false)，第二个是从 0.00001 到 20.0 的范围。我说 0.00001 因为 0.0 是一个无效值，所以它只需要一些接近但不完全是 0.0 的小数。

因为`modulate()`文档说每个值都应该指定为 1.0 表示没有变化，这是完全错误的。这些值实际上是一个百分比，因此您可以指定 100.0。

我希望这对某人有所帮助，因为我花了一整天的时间才弄清楚这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:49:00.827

根据 Imagemagick 网站 - 对于命令行但可能相同？

> -sigmoidal-对比度对比x中点
> 
> 在不饱和高光或阴影的情况下增加对比度。
> 
> 使用 sigmoidal 传递函数增加图像的对比度，而不会使高光或阴影饱和。对比度表示增加对比度的程度。例如，接近 0 表示无，3 表示典型，20 表示很多。请注意，恰好为零是无效的，但 0.0001 与对比度没有变化可以忽略不计。中点表示中间色调在合成图像中的位置（0 为白色；50% 为中灰色；100% 为黑色）。默认情况下图像对比度增加，使用 +sigmoidal-contrast 降低对比度。
> 
> 要实现等效于 sigmoidal 的亮度变化，请使用 -sigmoidal-contrast brightnessx0% 来增加亮度，并使用 class="arg">+sigmoidal-contrast brightnessx0% 来降低亮度。

在命令行上有一个新的亮度对比度设置，可能在更高版本的magic++中？

> -brightness-对比度亮度{x对比度}{%}}
> 
> 调整图像的亮度和/或对比度。
> 
> 亮度和对比度值将更改应用于输入图像。它们不是绝对的设置。亮度或对比度值为零表示没有变化。每个值的范围是 -100 到 +100。正值增加亮度或对比度，负值降低亮度或对比度。要仅控制对比度，请将亮度设置为 0。要仅控制亮度，请将对比度设置为 0 或将其关闭。
> 
> 您还可以使用 -channel 来控制应用亮度和/或对比度变化的通道。默认设置是对所有通道应用相同的转换。
> 
> 亮度和对比度参数转换为线性变换的偏移量和斜率，并使用 -function 多项式“斜率，偏移量”应用。
> 
> 斜率从对比度=-100 的 0 变化到对比度=+100 的几乎垂直。对于亮度=0 和对比度=-100，结果完全是中灰色。对于亮度=0 和对比度=+100，结果将接近但未完全达到中灰的阈值；也就是说，线性变换是一条非常陡峭的中灰色垂直线。
> 
> 使用此功能无法实现负斜率，即否定图像。所有可实现的斜率都为零或正。
> 
> 偏移量从亮度 = -100 时的 -0.5 到亮度 = 0 时的 0 到亮度 = +100 时的 +0.5 变化。因此，当对比度=0 和亮度=100 时，结果是全白的。同样，当对比度=0 和亮度=-100 时，结果是全黑的。
> 
> 由于参数值的范围是 -100 到 +100，因此添加 '%' 符号与不使用它没有什么不同。

如果 magick++ 和 Imagick 一样，它可能会远远落后于 Imagemagick 选项

# vb.net - NHibernate QueryOver：从范围“”引用的“SomeTable”类型的变量“行”，但未定义

> ID：10974004
> 
> 赞同：1
> 
> 时间：2012-06-11T02:35:37.097
> 
> 标签：vb.net, nhibernate, queryover

我正在处理遗留数据，这通常会给我带来分成多列的一个信息。我正在尝试重现以下 SQL 查询...

```
SELECT * FROM SomeTable WHERE concat(DescriptionPart1,DescriptionPart2) LIKE 'TEST' 
```

...使用 NHibernate QueryOver。所以：

```
Dim myQuery = Me.Session.QueryOver(Of SomeTable).WhereRestrictionOn( _
    Function(line As SomeTable) line.DescriptionPart1 & line.DescriptionPart2) _
    .IsLike("TEST") 
```

这个自己的语句将遇到以下异常：

```
Variable 'line' of type 'SomeTable' referenced from scope '', but it is not defined 
```

有什么方向吗？我试图避免使用魔术字符串，但我总是放弃它（因为使用 HQL 连接表达式 + like 函数就像一个魅力）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:26:59.967

有点冗长，但它有效

```
var results = session.QueryOver<SomeTable>()
    .Where(Restrictions.Like(
        Projections.SqlFunction("concat", NHibernateUtil.String, Projections.Property<SomeTable>(x => x.DescriptionPart1), Projections.Property<SomeTable>(x => x.DescriptionPart2)),
        "TEST",
        MatchMode.Anywhere))
    .List(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:51:27.980

作为记录，我使用`Linq`.

我的问题的要点（我的错，我没有提到）是重用基类中的代码的可能性，所以我想提取给定表的 Description 表达式以将其用于多种目的。最终的想法实现如下：

```
Public MustInherit Class DefaultBusinessLogic(Of Poco)

  Public Overridable ReadOnly Property DescriptionExpression as Expression(Of Func(Of Poco, String))
    Get
       Return Nothing
    End Get
  End Property

  Public Function SearchByDescription(searchArgument as String) as IEnumerable(Of Poco)
     Dim nhSession as ISession = SessionManager.GetSession()

     Dim query = nhSession.Query(Of Poco)

     If Not String.IsNullOrWhitespace(searchArgument) AndAlso
        Me.DescriptionExpression IsNot Nothing Then

        searchArgument = "%" & searchArgument & "%"        

        Dim isLikeMi = ReflectionHelper.GetMethod(Sub() LinqHelpers.IsLike(Nothing, Nothing)) '* See (1)
        Dim isLikeExpression = Expression.Call(isLikeMi, Me.DescriptionExpression.Body, Expression.Constant(searchArgument))
        Dim whereExpression = Expression.Lambda(Of Func(Of Poco, Boolean))(isLikeExpression, Me.DescriptionExpression.Parameters)
        query = query.Where(whereExpression)
     End If

     Return query.ToList()
  End Function

  Public Function GetDescription(pocoRecord as Poco) as String
     If Me.DescriptionExpression Is Nothing Then Return String.Empty

     Return Me.DescriptionExpression.Compile().Invoke(pocoRecord)
  End Function

End Class 
```

* * *

```
Public Class SomeTableBusinessLogic
   Inherits DefaultBusinessLogic(Of SomeTable)

   Public Overrides ReadOnly Property DescriptionExpression as Expression(Of Func(Of Poco, String))
    Get
       Return Function (row as SomeTable) row.DescriptionPart1 & row.DescriptionPart2
    End Get
  End Property

End Class 
```

* * *

```
Public Class SomeTable

   Public Overridable Property Id as Integer
   Public Overridable DescriptionPart1 as String
   Public Overridable DescriptionPart2 as String

End Class 
```

* * *

*   (1) 'IsLike' 方法被实现为 NHibernate Linq 扩展。[从这里提取](http://fabiomaulo.blogspot.com.br/2010/07/nhibernate-linq-provider-extension.html)。

# javascript - 任何转换对象*值*的Javascript或Coffeescript`map`函数？

> ID：10974010
> 
> 赞同：9
> 
> 时间：2012-06-11T02:36:40.933
> 
> 标签：javascript, coffeescript

是否没有普遍/标准的 Javascript 或 Coffeescript 函数来转换对象/映射/哈希的值？

[jQuery 有`$.map`](http://api.jquery.com/jQuery.map/) ，但它只产生`Array`s。
[下划线有`_.map`](http://underscorejs.org/#map)，但它也只产生`Array`s。

需要明确的是，我正在寻找像这样的功能。（这个例子是用 Coffeescript 而不是 Javascript 编写的。）

```
# Transforms the values in a map. (Doesn't modify `obj` — returns a new map.)
# Example usage:
#   mapObjVals({ a: 'aa', b: 'bb'}, (key, value) -> value + '_!')
#   --> { a: 'aa_!', b: 'bb_!' }
mapObjVals = (obj, f) ->
  obj2 = {}
  for k, v of obj
    obj2[k] = f k, v
  obj2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T02:44:45.153

如果要将对象映射到对象，则需要使用`fold`（传统功能术语）或`reduce`（通用现代名称，下划线使用），它从集合中构建新值：

```
 _.reduce(obj, function(newObj, thisValue, thisKey) { 
      // modify newObj based on thisKey/thisValue
      return newObj;
      }, {}) 
```

作为第二个参数传递的函数每个键/值对调用一次。它作为第一个参数传入正在构建的对象中，然后是当前值，然后是关联的键。由函数来修改对象并返回其新值。

第三个参数`_.reduce`是新对象的初始值，与第一个键/值对一起传入；在这种情况下，它是一个空的 object/map/hash `{}`。

减少/折叠/注入通常用于求和值。基本上，任何时候你想从一个集合中构造一个新的单一值。 `map`实际上只是一个特殊情况，`reduce`其中据称减少的价值实际上是另一个与原始大小相同的集合。

对于 CoffeeScript、AFAIK，列表推导总是返回列表，即使在迭代对象时也是如此。因此，您可能想查看[下划线的 CoffeeScript 版本](http://coffeescript.org/documentation/docs/underscore.html)。

# c++ - 如果进程存在，kill(pid, 0) 是否保证返回 0？

> ID：10974028
> 
> 赞同：4
> 
> 时间：2012-06-11T02:41:10.897
> 
> 标签：c++, centos, race-condition, pid

我在 Centos 4 上并在我的 C++ 程序中使用 kill(pid, 0) 来检查当前是否有一个进程正在使用给定的 pid 运行。我开始怀疑存在竞争条件，即在进程启动后不久，有一个小的时间窗口，即使实际上有一个进程正在运行，kill(pid, 0) 也不会返回零。

这是一个已知的问题？当 pid 实际存在但刚刚启动时，kill() 是否会返回非零值？如果 kill() 不能可靠地测试是否存在，是否有更好的方法来执行此测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:53:14.250

`kill(pid, 0)`如果进程存在并且您可以向它发送信号，则只会返回 0。如果进程没有以您的身份运行（并且您不是 root），那么调用将失败并显示 -EPERM。

# android - 如何使用 AndroidAnnotations 在 Android 项目中指定构建顺序

> ID：10974029
> 
> 赞同：1
> 
> 时间：2012-06-11T02:41:22.970
> 
> 标签：android, android-annotations

我使用 AndroidAnnotations，几天后，Eclipse 有时（并非总是）无法编译使用 AndroidAnnotations 生成的类的代码（预编译生成的代码）：

我的例子是：

我的项目有`MainActivity`，AndroidAnnotations 在 .apt_generated 下创建了一个扩展类`MainActivity_`。

在其他地方`DetailActivity`，我的代码引用了 MainActivity_：

![在此处输入图像描述](../Images/40fb1337071079e44073d1827f079221.png)

到目前为止，我的解决方案是删除代码，编译，然后重新添加代码。然而，这远非优雅。这也很烦人且耗时。

我错过了一些设置吗？

“订购与导出”页面中的订单有影响吗？我尝试上下移动 .apt_generated 目录，但没有任何积极影响。

我在想这与 Android 的资源类 R 使用的概念相同。我从未遇到过使用资源无法编译的代码的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:44:56.713

什么时候发生？

*   当你打开 Eclipse？
*   当您打开一个以前关闭的项目时？
*   当你做一个**项目 > 清洁**？

这个问题看起来像 Eclipse 中的一个错误。看起来有时它会编译一个类，然后运行注释处理器，然后不更新/重新编译缺少符号的类。

似乎可以完成这项工作的一个简单技巧：转到项目的属性，将注释处理文件夹的名称从**.apt_generated 更改**为其他名称（然后返回**.apt_generated**），然后接受重建。这似乎会以正确的顺序触发构建，并正确重置所有内容。

请注意，AndroidAnnotations 使用注释处理，这是标准的 java 6 概念。它与 Android R 类不同，后者未链接到任何 java 标准。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:59:34.833

根据以上来自[piwai](https://stackoverflow.com/users/703646/piwai)的评论，答案是：

[Eclipse 3.5+ - 注释处理器：无法导入生成的类](https://stackoverflow.com/questions/3580564/eclipse-3-5-annotation-processor-generated-classes-cannot-be-imported/7689369#7689369)

# objective-c - iOS 应用程序仅在未调试时崩溃

> ID：10974030
> 
> 赞同：7
> 
> 时间：2012-06-11T02:41:23.540
> 
> 标签：objective-c, ios, crash, testflight

我正在使用 testflight 来测试我的应用程序，并且只有当应用程序是为临时构建并通过测试飞行分发时才会发生崩溃。相关的崩溃报告详细信息是：

```
Date/Time:       2012-06-11 09:00:34.638 +0800
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000009
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x34e74f78 objc_msgSend + 16
1   appName                         0x0002963e __24-[XYPieChart reloadData]_block_invoke_0168 (XYPieChart.m:321)
2   libdispatch.dylib               0x30295c52 _dispatch_call_block_and_release + 6
3   libdispatch.dylib               0x302a0e8a _dispatch_main_queue_callback_4CF$VARIANT$up + 190
4   CoreFoundation                  0x371482a6 __CFRunLoopRun + 1262
5   CoreFoundation                  0x370cb49e CFRunLoopRunSpecific + 294
6   CoreFoundation                  0x370cb366 CFRunLoopRunInMode + 98
7   GraphicsServices                0x3388a432 GSEventRunModal + 130
8   UIKit                           0x30e77cce UIApplicationMain + 1074
9   appName                         0x00003b20 main (main.m:14)
10  appName                         0x00003ad8 0x1000 + 10968 
```

以及引用的代码 - (XYPieChart.m:321)

```
 [CATransaction begin];
    [CATransaction setAnimationDuration:_animationSpeed];

    [_pieView setUserInteractionEnabled:NO];

    __block NSMutableArray *layersToRemove = nil;
    [CATransaction setCompletionBlock:^{

        if (layersToRemove) {
            [layersToRemove enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
                if (obj)
                    [obj removeFromSuperlayer];
            }];

            [layersToRemove removeAllObjects];
        }

        for(SliceLayer *layer in _pieView.layer.sublayers)
        {
            [layer setZPosition:kDefaultSliceZOrder];
        }

        [_pieView setUserInteractionEnabled:YES];
    }];

    BOOL isOnStart = ([slicelayers count] == 0 && sliceCount);
    NSInteger diff = sliceCount - [slicelayers count];
    layersToRemove = [NSMutableArray arrayWithArray:slicelayers];

    BOOL isOnEnd = ([slicelayers count] && (sliceCount == 0 || sum <= 0));
    if(isOnEnd)
    {
        for(SliceLayer *layer in _pieView.layer.sublayers){
            [self updateLabelForLayer:layer value:0];
            [layer createArcAnimationForKey:@"startAngle"
                                  fromValue:[NSNumber numberWithDouble:_startPieAngle]
                                    toValue:[NSNumber numberWithDouble:_startPieAngle] 
                                   Delegate:self];
            [layer createArcAnimationForKey:@"endAngle" 
                                  fromValue:[NSNumber numberWithDouble:_startPieAngle]
                                    toValue:[NSNumber numberWithDouble:_startPieAngle] 
                                   Delegate:self];
        }
        [CATransaction commit];
        return;
    } 
```

如果我可以在调试时重现它，我将能够追踪问题，但它似乎只在为临时构建时才会发生。谢谢！

编辑：使用模拟器，我已经在这一行找到了 EXC_BAD_ACCESS 的问题

```
[layersToRemove enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) { 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T13:55:33.610

我遇到了类似的问题并尝试更改项目构建设置，但它对我不起作用。最终通过更改版本的编译器优化级别设置解决了我的问题：

在构建设置中，转到 LLVM 编译器 4.2 - 代码生成部分，查找优化级别选项并将发布设置从最快、最小 [-Os] 更改为无 [-O0]。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-11T03:38:08.670

更改您的 Xcode 方案，以便您可以测试和调试发布版本，该版本使用与您的 Ad Hoc 版本相同的编译器优化。调试 Debug 版本不会。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-11T06:42:56.717

我最终解决了这个问题。在我的编译器设置中，不知何故，没有为 Ad-Hoc 构建启用 ARC，从而导致奇怪的行为。在我解决这个问题之前，分配 __block 变量是有效的，因为在非 ARC 环境中，__block 变量不会自动保留。

更改了编译器设置，以便所有构建都使用 ARC 并且所有内容都已修复。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-30T18:57:22.700

就我而言，是“启用僵尸对象”设置阻止了调试模式下的崩溃。没有此设置的 Debuggin 也会使应用程序在调试器中崩溃，从而很容易找到罪魁祸首。

所以我建议禁用“诊断”菜单中的所有设置并将优化设置为 -Os 并在发布前进行最终测试。或者正如 hotpaw2 指出的那样，在发布模式下构建。但由于证书设置问题，这对我不起作用。

# wamp - Wamp 服务器“与服务器的连接超时”错误

> ID：10974032
> 
> 赞同：0
> 
> 时间：2012-06-11T02:42:00.387
> 
> 标签：wamp

我在我的localhost中使用WAMP，我把它放在网上，现在我在我的cmd中做了ipconfig，我的ipv4地址看起来像192.xxx.x.xx，

当我在我的 PC 浏览器中访问该地址时，它会加载我的本地主机（这是预期的），但是当我在我的 android 平板设备中加载该 IP 地址时，我收到一个错误：

```
"The connection to the server timed out" 
```

有人知道修复吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:46:14.477

你确定你的pad和你的电脑在同一个局域网吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:47:56.570

如果您的 Android 设备和 PC 在同一个 LAN 上，那么您 PC 上的防火墙可能会阻止访问。检查防火墙配置中是否允许 Apache（和端口 80）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T18:17:06.560

这个问题有三种可能

1.  服务器（您的电脑）和客户端（另一台电脑）不属于同一网络
2.  防火墙阻止连接，检查操作系统防火墙和防病毒软件（如果有）
3.  客户端和服务器都属于公共网络，有可能阻止，更改私有模式并检查

# c# - Csharp 调用线程无法访问此对象，因为不同的线程拥有它

> ID：10974038
> 
> 赞同：0
> 
> 时间：2012-06-11T02:43:03.643
> 
> 标签：c#, wpf, multithreading

> **可能重复：**
> [从不同线程更新 UI](https://stackoverflow.com/questions/724972/updating-ui-from-a-different-thread)
> [调用线程无法访问此对象，因为不同线程拥有它](https://stackoverflow.com/questions/5423422/the-calling-thread-cannot-access-this-object-because-a-different-thread-owns-it)

祝大家有美好的一天。我的聊天应用程序有问题，我需要一直刷新我的聊天，但错误提示。我不知道如何解决这个问题。我希望有一个人可以帮助我。这是我的代码：

```
void timerChatRefresh_Tick(object sender, EventArgs e)
    {

        thread = new Thread(new ThreadStart(ChatRefresh));
        thread.Start();
    }

    private void ChatRefresh()
    {
        conn = new MySqlConnection("Server=...; Database=...; Uid=...; Password=...;");
        ds.Clear();
        da.SelectCommand = conn.CreateCommand();
        da.SelectCommand.CommandText = "select * from chatmessagetbl";
        da.SelectCommand.CommandType = CommandType.Text;
        da.Fill(ds, "chatmessagetbl");
        foreach (DataRow item in ds.Tables["chatmessagetbl"].Rows)
        {
            textBlockChatArea.Text += item["username"].ToString() + ": " + item["message"].ToString() + "\n";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:18:37.943

尝试 textBlockChatArea.Invoke("委托一个更新 Text 属性的方法")

```
1\. 声明一个代表   
    公共委托无效 UpdateChatAreaCallback（字符串文本）；
2\. 创建一个将更新文本框的方法：
    公共无效UpdateChatArea（字符串文本）{textBlockChatArea.Text += text;}
3.调用方法：
    textBlockChatArea.Invoke(new UpdateChatAreaCallback(UpdateChatArea, "new text"));

```

# xcode - 如何创建可可手势事件

> ID：10974039
> 
> 赞同：2
> 
> 时间：2012-06-11T02:43:11.560
> 
> 标签：xcode, macos, cocoa

我有一个问题：如何通过代码创建手势事件（旋转、放大或滑动...），我不想用它来缩放或旋转特定图像或类似的东西，我想创建手势像滚动事件这样的事件创建者`CGEventRef cgEvent = CGEventCreateScrollWheelEvent(NULL, kCGScrollEventUnitLine, wheelCount, yScroll, xScroll);`

`CGEventPost(kCGHIDEventTap, cgEvent);`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:10:19.837

并非所有事件都有“快捷方式”创建函数（如 CGEventCreateScrollWheelEvent、CGEventCreateMouseEvent 和 CGEventCreateKeyboardEvent），因此您必须创建一个空事件，然后使用 CGEventSet* 函数手动设置字段。

与手势相关的事件只有 Cocoa API 级别的公共常量。例如，当 NSLeftMouseDragged == kCGEventLeftMouseDragged == NX_LMOUSEDRAGGED == 6 时，NSEventTypeMagnify == 30 没有任何等效的 kCGEventMagnify 或 NX_MAGNIFY。

此外，手势事件的工作方式有点棘手。如果您没有发送正确的鼠标/触控板事件、手势、手势开始/结束和特定手势事件序列，它将无法正常工作。

关于每种事件类型需要哪些字段的文档并不多。最简单的找出方法是首先创建一个记录所有内容的事件点击，然后生成您想要的事件并查看记录的内容。事实上，您可能还想记录一个 NSEvent 全局监视器（记录 NSEvent 本身及其底层 cgEvent）。

# scrapy - 使用 XPATH提取文本中偶尔带有标签的日期

> ID：10974041
> 
> 赞同：0
> 
> 时间：2012-06-11T02:43:19.273
> 
> 标签：scrapy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:00:49.323

如果路径可以包含子节点（如`<b>`）并且您需要所有子节点中的文本，请使用`string`：

```
hxs.select("string(//table[@class='result']//font/span[@class='g'])").extract() 
```

# android - 关于异步任务

> ID：10974046
> 
> 赞同：1
> 
> 时间：2012-06-11T02:44:28.040
> 
> 标签：android

```
System.out.println("dealing..................");
                ShareDate.mdate.type = date[head + 2];
                ShareDate.mdate.date0 = date[head + 4];
                ShareDate.mdate.date1 = date[head + 5];
                ShareDate.mdate.date2 = date[head + 6];
                ShareDate.mdate.date3 = date[head + 7];

                System.out.println(ShareDate.mdate.type);
                System.out.println(ShareDate.mdate.date0);
                System.out.println(ShareDate.mdate.date1);
                System.out.println(ShareDate.mdate.date2);
                System.out.println(ShareDate.mdate.date3);
                //MyActivity.mdate.firsttime = System.currentTimeMillis()-time;
                System.out.println("******************") 
```

在 Asynctask 完成后 System.out.println("dealing.................."); 程序意外停止。如果从 ShareDate.made.type=........ 删除到 ShareDate.mdate.date3.... 程序也意外停止。mdate 是静态的，而 ShareDate 是另一个类，请帮助我......我对描述感到抱歉。我不擅长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:00:27.423

ShareDate.mdate.type 是否与主 UI 线程上的某些内容相关？

您需要在 onPublishUpdate(params) 中执行与 UI 线程相关的所有操作

# c# - MVC 3/C# 不能使用已在 if 语句中声明的变量

> ID：10974055
> 
> 赞同：0
> 
> 时间：2012-06-11T02:46:21.620
> 
> 标签：c#, model-view-controller

我正在尝试在我的控制器中编写代码，该代码在运行时将创建一堆变量，然后使用具有占位符以包含变量的模板发送电子邮件。但是，它将用户帐户中的信息分配给变量，如果用户尚未填写该信息，它将崩溃。作为一种解决方法，我在 if 语句中声明了它们，以确保它们首先不为空。但是现在当我尝试将它们传递给电子邮件模板时，它告诉我该变量不存在。如果我删除 if 语句，它会再次起作用。任何想法为什么？

代码如下...

```
if (UserContext != null && UserContext.Account != null)
        {

            if (UserContext.UserName != null)
            { string UserName = string.Format(UserContext.UserName); }

            if (UserContext.EmailAddress != null)
            { string EmailAddress = string.Format(UserContext.EmailAddress); }

            if (UserContext.Account.PrimaryContactFirstName != null)
            { string FirstName = string.Format(UserContext.Account.PrimaryContactFirstName); }

            if (UserContext.Account.PrimaryContactLastName != null)
            { string LastName = string.Format(UserContext.Account.PrimaryContactLastName); }

            if (UserContext.Account.PrimaryContactPhoneNumber != null)
            { string PhoneNumber = string.Format(UserContext.Account.PrimaryContactPhoneNumber); }

            if (UserContext.Account.HeadquartersAddressLine1 != null)
            {
                string AddressLine1 = string.Format(UserContext.Account.HeadquartersAddressLine1);

                if (UserContext.Account.HeadquartersAddressLine2 != null)
                { string AddressLine2 = string.Format(UserContext.Account.HeadquartersAddressLine2); }
            }

            if (UserContext.Account.HeadquartersCity != null)
            { string City = string.Format(UserContext.Account.HeadquartersCity); }

            if (UserContext.Account.HeadquartersState != null)
            { string State = string.Format(UserContext.Account.HeadquartersState); }

            if (UserContext.Account.HeadquartersZip != null)
            { string ZipCode = string.Format(UserContext.Account.HeadquartersZip); }

            if (UserContext.Account.Name != null)
            { string Name = string.Format(UserContext.Account.Name); }

            string body = string.Format(Resources.ContactUsLoggedInEmailTemplate, model.FirstName, model.LastName, model.PhoneNumber, model.Email, model.ReasonForContact, model.Message, UserName, EmailAddress, FirstName, LastName, PhoneNumber, AddressLine1, AddressLine2, City, State, ZipCode, Name);

            string subject = string.Format("Web Submit: {0}", model.ReasonForContact);

            EmailHelper.SendEmail("support@website.com", subject, body, true);

        }
        if (UserContext == null)
        {
            string body = string.Format(Resources.ContactUsEmailTemplate, model.FirstName, model.LastName, model.PhoneNumber, model.Email, model.ReasonForContact, model.Message);

            string subject = string.Format("Web Submit: {0}", model.ReasonForContact);

            EmailHelper.SendEmail("support@website.com", subject, body, true);
        }

        return RedirectToAction("ContactConfirmation"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:49:15.077

每个变量仅在创建它的块的生命周期内存在。当每个`if`区块结束时，它们会立即消失。解决方案是先声明所有变量，然后根据需要分配值。

`try`这是/`catch`块的常见烦恼之一。任何以后可能有用的东西都需要在`try`. 如果构造函数可能抛出异常，那么它应该在`try`块内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:50:08.817

因为您在 If 语句中声明变量，所以一旦 If 语句完成，它们就会消失。在顶部声明变量（例如：`string body;`，在任何 if 检查之前），然后您应该能够将它们传递到您的电子邮件中。

```
string UserName;
string EmailAddress;
string FirstName;
....
if (UserContext != null && UserContext.Account != null)
        {

            if (UserContext.UserName != null)
            { UserName = string.Format(UserContext.UserName); }

            if (UserContext.EmailAddress != null)
            { EmailAddress = string.Format(UserContext.EmailAddress); }

            if (UserContext.Account.PrimaryContactFirstName != null)
            { FirstName = string.Format(UserContext.Account.PrimaryContactFirstName); }

            if (UserContext.Account.PrimaryContactLastName != null)
            { LastName = string.Format(UserContext.Account.PrimaryContactLastName); }

            if (UserContext.Account.PrimaryContactPhoneNumber != null)
            { PhoneNumber = string.Format(UserContext.Account.PrimaryContactPhoneNumber); }

            if (UserContext.Account.HeadquartersAddressLine1 != null)
            {
                AddressLine1 = string.Format(UserContext.Account.HeadquartersAddressLine1);

                if (UserContext.Account.HeadquartersAddressLine2 != null)
                { AddressLine2 = string.Format(UserContext.Account.HeadquartersAddressLine2); }
            }

            if (UserContext.Account.HeadquartersCity != null)
            { City = string.Format(UserContext.Account.HeadquartersCity); }

            if (UserContext.Account.HeadquartersState != null)
            { State = string.Format(UserContext.Account.HeadquartersState); }

            if (UserContext.Account.HeadquartersZip != null)
            { ZipCode = string.Format(UserContext.Account.HeadquartersZip); }

            if (UserContext.Account.Name != null)
            { Name = string.Format(UserContext.Account.Name); }

            string body = string.Format(Resources.ContactUsLoggedInEmailTemplate, model.FirstName, model.LastName, model.PhoneNumber, model.Email, model.ReasonForContact, model.Message, UserName, EmailAddress, FirstName, LastName, PhoneNumber, AddressLine1, AddressLine2, City, State, ZipCode, Name);

            string subject = string.Format("Web Submit: {0}", model.ReasonForContact);

            EmailHelper.SendEmail("support@website.com", subject, body, true);

        }
        if (UserContext == null)
        {
            body = string.Format(Resources.ContactUsEmailTemplate, model.FirstName, model.LastName, model.PhoneNumber, model.Email, model.ReasonForContact, model.Message);

            subject = string.Format("Web Submit: {0}", model.ReasonForContact);

            EmailHelper.SendEmail("support@website.com", subject, body, true);
        }

        return RedirectToAction("ContactConfirmation"); 
```

# javascript - 如何在 RegExp 对象中使用单词边界

> ID：10974059
> 
> 赞同：4
> 
> 时间：2012-06-11T02:47:02.773
> 
> 标签：javascript, regex, word-boundary

我想知道的是如何在 RegExp 对象中使用单词边界。

例如：

```
var reg = new RegExp("\bAB\b", "g"); 
```

这不起作用，我不能这样做：

```
var reg = /\bAB\b/g; 
```

因为我稍后需要用变量替换 AB。

我知道 RegExp 对象中的所有其他内容都有效，但由于某种原因，单词边界不起作用。感谢您对此问题的任何帮助。:)

示例：http: [//jsfiddle.net/7Kt5A/1/](http://jsfiddle.net/7Kt5A/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T02:54:38.530

用反斜杠转义你的反斜杠，这样`\b`不会被解释为转义字符，而是作为文字`\b`。

```
var reg = new RegExp("\\bAB\\b", "g");
reg.test(' AB ');
// true
reg.test('aABb');
// false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T02:54:49.083

你只需要几个额外的反斜杠

```
var reg = new RegExp("\\bAB\\b", "g"); 
```

由于它是一个字符串，并且反斜杠转义了后面的字符，因此您必须自己转义反斜杠。

# javascript - 基于backbone.js/ember.js的app和基于Phonegap/Sencha Touch的app有什么区别？

> ID：10974060
> 
> 赞同：-3
> 
> 时间：2012-06-11T02:47:20.190
> 
> 标签：javascript, web-applications, cordova, backbone.js, sencha-touch

随着移动网络应用程序越来越流行，许多工具可用于开发移动网络应用程序。在我看来（我不知道是否正确），开发移动网络应用程序有两种方法。

一种方法是使用一些 javascript 框架，如backbone.js 和 ember.js 结合其他一些库，如 Zepto 和 iScroll 来执行此操作。另一种方法是使用一些集成的工具包，例如 PhoneGap 和 Sencha Touch 来编写整个东西。我想知道这两种方式有什么区别？我应该如何在这两种方式之间进行选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:57:05.660

Phonegap 是一个包装框架，可帮助 html/javascript 应用程序在本机容器中运行，并提供一种介质来执行所需的本机代码。Phonegap 没有与 Sencha Touch 集成，您可以将它与任何客户端大小的 javascript 框架一起使用，如backbonejs、amberjs、jquery、jquery mobile 等。使用Phonegap 构建的应用程序属于混合应用程序类别。

请检查其中一些准备以获取更多信息：

[http://www.slideshare.net/macdonst/building-native-mobile-applications-with-phonegap](http://www.slideshare.net/macdonst/building-native-mobile-applications-with-phonegap) [http://www.slideshare.net/kurotanshi/jsdctw-introduction-to-phonegap](http://www.slideshare.net/kurotanshi/jsdctw-introduction-to-phonegap)

# python - 将 32 位 int 值转换为浮点数

> ID：10974062
> 
> 赞同：1
> 
> 时间：2012-06-11T02:47:54.190
> 
> 标签：python, floating-point

我有一个程序从一个文件中读取，该文件从该文件中获取 4 个字节。下面的十六进制应该是 0.5 的浮点数：

```
00 00 00 3F 
```

我目前有一个显示整数值的方法，并希望将整数从 1056964608 转换为 0.5。这也应该能够处理负浮点数。有人可以向我解释如何在 Python 2.6 中做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T02:51:33.097

使用`struct`模块：

```
>>> struct.unpack("<f", "\x00\x00\x00\x3f")
(0.5,) 
```

如果您确实需要从整数转换，而不仅仅是从字节转换，您也可以这样做：

```
>>> struct.unpack("<f", struct.pack("<I", 1056964608))
(0.5,) 
```

# php - MYSQL 日期字段总是输出 0000-00-00

> ID：10974066
> 
> 赞同：0
> 
> 时间：2012-06-11T02:49:11.880
> 
> 标签：php, mysql, date

我在数据库中的日期字段中插入生日时遇到问题。当我检查存储在数据库中的日期时，它总是返回 0000-00-00。

我使用以下代码：

```
$dob = date('Y-m-d', strtotime($_POST['registration_dob_year']."/".$_POST['registration_dob_month']."/".$_POST['registration_dob_day'])); 
```

我知道我的`$_POST['registration_dob_year']`,`$_POST['registration_dob_month']`和`$_POST['registration_dob_day']`变量是正确的，因为如果我使用以下代码

```
echo $dob; 
```

`1986-01-07`它在我的页面上打印类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:10:44.747

你为什么要把事情复杂化？只需使用：

```
$dob = $_POST['registration_dob_year']."-".$_POST['registration_dob_month']."-".$_POST['registration_dob_day']; 
```

# c# - 如何使用将 DBcontext 对象传递给继承 GenericRepository 的实体的构造函数 抽象类

> ID：10974070
> 
> 赞同：2
> 
> 时间：2012-06-11T02:50:42.273
> 
> 标签：c#, design-patterns, entity-framework-4, repository-pattern, webforms

请帮帮我，我应该如何将`DBContext`对象传递给类的构造函数 `MyEntityRepsitory`？

例如：

```
public interface IRepository<T> where T: class
{   
}

public class Repository<T> : IRepository<T> where T : class
{
    private readonly DbContext _dbContext;

    public Repository(DbContext dbContext)
    {
        _dbContext = dbContext;
    }
}

public interface IMyEntity : IRepository<MyEntity>
{
    MyEntity GetSingle(int Id);
}

public class MyEntityRepository : Repository<MyEntity>, IMyEntity
{
    public MyEntityRepository() : base(mydbContext){}
} 
```

我是数据访问层设计模式和实现存储库模式的新手。我从未使用过结构图/工作单元模式。

我想知道，我可以通过多少种方式创建`DbContext`对象以便通过。

请向我解释各种方法的区别。

在上面的示例中，named 类`MyEntityRepository`有一个构造函数并将`dbContext`对象传递给`Repository`类构造函数。请告诉我该怎么做。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T03:53:49.433

**编辑**

`DbContext`根据@Trevor de Koekoek 的评论，从线程和事务边界的角度来看，直接注入拥有 a 的包装器可能会出现问题。

事后看来，注入工厂是可取的，并且像这样使用：

```
 public ConsumingClass(IRepositoryFactory injectedRepositoryFactory) 
```

然后（如果持有对工厂的引用）

```
 using (var applesRepository = _injectedRepositoryFactory.CreateRepository<Apples>())
      {
          ... do something with apples
      } 
```

或通过`IDisposable`在类上实现。

这为客户端提供了一个干净的存储库，并强制客户端获取存储库实例的所有权。

**原始答案**

正如您所建议的，您应该配置一个 IoC 容器（如 StructureMap）来为您执行此操作 - 需要使用 an 的类`IRepository<T>`将通过构造函数或 setter 注入注入一个实例。这个 IMO 是最干净的实现，因为它具有可测试性，与 Repository 的耦合仅通过接口，并且 Repository 和消费类都没有耦合到 IoC 容器。

例如使用构造函数注入：

```
public class ConsumingClass
{
  public ConsumingClass(IRepository<Apples> injectedApplesRepository)
} 
```

到其具体类的映射`IRepository`是通过 IoC 引导程序（或在配置中）完​​成的。为了提高可测试性，我还将您的存储库耦合到`IDbContext`，而不是`DbContext`，例如

```
private void ConfigureIoC()
{
  For<IDbContext>().Use<MyDbContext>();
  For<IRepository<T>>().Use<Repository<T>>();
  // ... etc
} 
```

当您的消费类由 IoC 构建时，它将递归地检测所有依赖项（`IRepository<T>`然后依次`IDbContext`）并构建它们，以及它们的依赖关系等。

其他替代方案是诸如[服务定位器模式](http://en.wikipedia.org/wiki/Service_locator_pattern)（现在通常被视为反模式，因为它将类与定位器耦合）和[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)之类的模式。

# java - 会话未在 servlet 中释放

> ID：10974074
> 
> 赞同：-1
> 
> 时间：2012-06-11T02:51:28.813
> 
> 标签：java, jsp, session, servlets

我正在使用 servlet 制作我的网站并且在发布会话时遇到问题，请检查并找出错误：

```
login.java :
     ResultSet res=smt.executeQuery("Select * from admin where name='"+user+"' and password='"+password+"'");
    while(res.next())
    {
        String name=res.getString("name");
        String pwd=res.getString("password");
    if(category.equals("Admin"))
    {
        if(name.equals(user) && pwd.equals(password))
        {
                           ServletContext context=request.getServletContext();
                           context.setAttribute("name", name);
                            HttpSession session=request.getSession();
            session.setAttribute("name", name);
            RequestDispatcher view=request.getRequestDispatcher("welcome_admin.jsp");
            view.forward(request, response);
        }
        else
        {
            response.sendRedirect("index.jsp");
        }
    } 
```

logout.jsp 是：

```
 <body>
    <%

    session.removeAttribute("name");

    session.invalidate();

    %>
    <b>
        <%
        RequestDispatcher rd=request.getRequestDispatcher("index.jsp");
        rd.include(request, response);
        %>
    </b >
</body> 
```

但是会话没有被释放，如果我点击后退按钮，它会再次将我重定向到页面！有人请帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T02:54:51.913

那是因为您的浏览器已经缓存了该页面，它不再来自服务器，您需要[通过添加一个来指示您的浏览器不要缓存页面`Filter`](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:57:04.540

问题是缓存。

一种解决方法是将其添加到您的 servlet：

[Java servlet如何禁用页面缓存](https://stackoverflow.com/questions/3976624/java-servlet-how-to-disable-caching-of-page)

```
// Set standard HTTP/1.1 no-cache headers.
response.setHeader("Cache-Control", "private, no-store, no-cache, must-revalidate");

// Set standard HTTP/1.0 no-cache header.
response.setHeader("Pragma", "no-cache"); 
```

# f# - 标志变量在 F# 中没有改变

> ID：10974077
> 
> 赞同：0
> 
> 时间：2012-06-11T02:51:59.623
> 
> 标签：f#

```
let tag:String = "+1"
for str in readFile do
    let feature = str.Split [|' '; '\t'|]
    if feature.[8] = "0" then
        tag = "-1"
    else 
        tag = "+1"

    printf "\n%s %s\n" feature.[8] tag 
```

`tag`如果 feature.[8] ，代码更改尝试将 的值更改为“-1”。为 0，否则为“+1”。然而，无论值特性如何，标签变量值始终保持“+1”。 [8] 是。

如何处理基于 F# 中的条件语句的简单值更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:58:17.540

您需要使用可变变量 - F# 中的默认变量是常量。另外，`<-`是赋值运算符。

```
let mutable tag:String = "+1"
for str in readFile do
    let feature = str.Split [|' '; '\t'|]
    if feature.[8] = "0" then
        tag <- "-1"
    else 
        tag <- "+1"

    printf "\n%s %s\n" feature.[8] tag 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T04:07:25.400

@John Palmer 有你的答案，但我会补充一点......

请注意，您的代码编译但不能按预期工作的原因是因为在and`=`的上下文中使用的运算符是相等运算符。所以这些表达式是有效的，但返回一个值。但是，您应该会收到以下警告：`tag = "-1"``tag = "+1"``bool`

> 此表达式应具有类型“unit”，但具有类型“bool”。使用 'ignore' 丢弃表达式的结果，或使用 'let' 将结果绑定到名称。

在您的 F# 编码冒险中注意该警告对您很有帮助。

[另请注意，您可以使用Seq.fold](http://msdn.microsoft.com/en-us/library/ee353471.aspx)（以及其他替代函数方法）以纯函数方式（没有可变变量）编写算法：

```
let tag =
    readFile 
    |> Seq.fold 
        //we use the wild card match _ here because don't need the 
        //tag state from the previous call 
        (fun _ (str:string) ->
            let feature = str.Split [|' '; '\t'|]
            //return "-1" or "+1" from the if / then expression,
            //which will become the state value in the next call
            //to this function (though we don't use it)
            if feature.[8] = "0" then
                "-1"
            else 
                "+1")
        ("+1") //the initial value of your "tag" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:24:55.420

```
for str in readFile do
    let feature = str.Split [|' '; '\t'|]
    let tag = if feature.[8] = "0" then "-1" else "+1"

    printf "\n%s %s\n" feature.[8] tag 
```

# java - 强制 OpenGL 缓冲区使用 GL 1.0 或 1.1？

> ID：10974079
> 
> 赞同：5
> 
> 时间：2012-06-11T02:52:02.660
> 
> 标签：java, android, opengl-es

我一直在从事一个项目，在该项目中，用户可以与 a 交互以`GLSurfaceView`在屏幕上绘制形状。这一切都很好，花花公子，但现在我正在尝试做两件事：1）创建他们绘图的缩略图，2）保存他们的绘图。需要注意的是，用户可以绘制比屏幕大的图像。

据我的研究表明，最好使用 a `Bitmap`（可以是 1）渲染`Canvas`为 a 缩略图，2）保存到文件系统，这实现了我的两个目标）。

最初，我试图`Renderer`从`GLSurfaceView`via中读取`glReadPixels`，但事实证明我无法从中获取屏幕外数据。相反，我选择做一个离屏缓冲区来生成图像的渲染，它可以转换为`Bitmap`.

我找到了一篇[可爱的帖子](http://www.anddev.org/post41662.html#p41662)`PixelBuffer`，它为我现在正在使用的一个名为 的类提供了代码。（我做了一些调整，但我遇到的所有问题都有或没有说调整。）

现在，当使用`getBitmap()`代码时（如果`PixelBuffer`论坛帖子不可读，我将在下面发布），我得到一堆`called unimplemented OpenGL ES API`. 起初这让我觉得很奇怪，所以我做了一些调查。事实证明，由于某种原因，`PixelBuffer`该类使用的是 OpenGL ES 2.0，而 GLSurfaceView 使用的是 OpenGL ES 1.1。我使用的设备（Galaxy Nexus）不支持 2.0。（此外，我想支持尽可能多的设备。）

**所以，这是我的问题**：如何强制我的`PixelBuffer`班级使用 OpenGL ES 1.1 API？我已经在我的清单中添加了以下内容：

```
<uses-feature android:glEsVersion="0x00010001" /> 
```

此外，我尝试使用`int[] version = new int[] { 1, 1 };`, 设置版本无济于事。

`PixelBuffer`我正在使用的代码： **[Link](http://pastebin.com/fWStVVhN)**。调用 的`Renderer`有问题的行在第 91 行。版本代码在第 39 行以后。

这是我用来创建`PixelBuffer`从`GLSurfaceView`对象调用的代码：

```
 setEGLConfigChooser(8, 8, 8, 8, 0, 0);
    mRenderer = new MyRenderer(this);
    setRenderer(mRenderer);
    mPixelBuffer = new CPPixelBuffer(1440, 1280); // TODO Temporary hardcode for Galaxy Nexus wallpaper size
    mPixelBuffer.setRenderer(mRenderer); 
```

如果无法使用 1.1 版进行离屏渲染，将我的 GL 表面转换为`Bitmap`使用 1.1 版或更低版本的最佳方法是什么？

**编辑**：通过一些测试，我发现使用下面的代码会导致这些错误：

```
// int[] version = new int[2];
int[] version = new int[] { // When using this line, as well as the other marked lines, instead of the line above, the errors are produced.
    1, 1 // Marked
}; // Marked
int[] attribList = new int[] {
    EGL_WIDTH, mWidth,
    EGL_HEIGHT, mHeight,
    EGL_VERSION, 1, // Marked
    EGL_NONE
};

06-11 15:41:52.316: E/libEGL(5618): eglMakeCurrent:674 error 3009 (EGL_BAD_MATCH)
06-11 15:41:52.316: E/libEGL(5618): call to OpenGL ES API with no current context (logged once per thread) 
```

但是，这些设置都不能缓解手头的问题。它们都出现在我的 PasteBin 代码中，所以我认为指出它会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:42:32.267

由于某种原因，我没有找到发表评论的链接，很抱歉将其发布为答案。关于 GL 线程，通常你只在 GL 线程中

```
public void onDrawFrame(GL10 gl) 
```

这是渲染器的一种方法。一切都必须在这个方法中完成。你可以把一个布尔值，比如说，放到渲染器中，当你想在渲染器中做某事时将它设置为true，就是这样。如果您在此方法之外进行任何调用，您将得到错误。

另外，看看这个例子： [Android OpenGL Screenshot](https://stackoverflow.com/questions/4731589/android-opengl-screenshot) 我用过它，它对我有用，但我不需要保存屏幕外区域，所以我不知道它是否会起作用，也许不会:)

该方法必须在 onDrawFrame 内部调用

# ruby-on-rails - 将 Rails 项目导入另一个项目或将两者合并

> ID：10974080
> 
> 赞同：0
> 
> 时间：2012-06-11T02:52:04.997
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想将文件从项目 B 移动到项目 A。

在 stackoverflow 上有关于 Modules 的答案，但是将 Project B 重构为一个模块看起来也需要做很多工作。

另一种方法是手动将文件从项目 B 移动到项目 A，但是当项目 B 中的文件更新时会出现同步问题。有更简单的解决方案吗？

我这样做的原因是项目 B 是一个可用于各种项目的结帐系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:18:21.650

听起来项目 B 真的需要被宝石化成一个 Rails 引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:28:16.510

当您说文件时，您只是指代码吗？

您可以从项目 B 创建一个 gem（并将其视为外部服务，如果它被设置为这样），或者您实际上将项目 B 安装到项目 A 上。在 Mountable [Engines](http://railscasts.com/episodes/277-mountable-engines?view=asciicast)上有一个 RailsCast ，或者您可以检查出[Engines 的官方文档](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)。

# javascript - 在事先不知道结构的情况下，在 JSON 中查找键的值

> ID：10974081
> 
> 赞同：2
> 
> 时间：2012-06-11T02:52:08.157
> 
> 标签：javascript, json

我有以下 JavaScript 数据结构。`a[]`是一个以文本字符串为元素的数组。事先不知道它包含什么。例如，

```
a = ["foo", "bar", "baz"...]; 
```

`res{}`是一个 JSON 对象，其键与“a”中的元素一样多，规则如下；的~~最后一个~~最里面的键`res{}`是一个带有数组的对象，`features[]`或者~~最后一个~~最里面的键本身就是一个数组。所以，如果 ，`res`那么

```
// if
a = ["foo", "bar"];

// then
res = {
    "foo": {
        "bar": {
            "features": []
        }
    }
};

// and I want
data = res["foo"]["bar"].features;

// or
res = {
    "foo": {
        "bar": []
    }
};

// and I want
data = res["foo"]["bar"]; 
```

正如我所说，它事先不知道多长时间`a[]`或它的元素的值是什么。我该怎么做以上？

**更新：**修复了结构中的错字`res`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:18:32.317

这工作正常

```
function getFeatures(obj, keys) {
  if( keys.length ) {
    key = keys.shift();
    obj = obj[key];
    return getFeatures(obj, keys);
  } else {
    return obj.features || obj;
  }
} 
```

您可能希望使用键数组的副本来调用它，因为该函数会将元素从它传递的数组中移出。IE

```
var keys = ["foo", "bar"];

var res1  = { "foo": { "bar": { "features": [1, 2, 3] } } };
getFeatures(res1, keys.slice(0)); // => [1, 2, 3]

var res2 = { "foo": { "bar": ["a", "b", "c"] } };
getFeatures(res2, keys.slice(0)); // => ["a", "b", "c"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:12:42.330

我认为以下递归解决方案可以达到您的目的。

```
function doSomething(i) {
    if (i==a.length)
        return []; // can be made {features:[]}
    var d = {}
    d[a[i]] = doSomething(i+1);
    return d;
}

doSomething(0); 
```

初始设置为特征的替代迭代解决方案：

```
var a = ['foo', 'bar'];

var i = a.length -1;
var res,d={features:[]};

while(i >=0) {
    res ={};
    res[a[i]]=d;
    d=res;
    i--;
} 
```

--V

# android - Android 应用程序崩溃的微调器的原因

> ID：10974085
> 
> 赞同：2
> 
> 时间：2012-06-11T02:52:25.277
> 
> 标签：android

当我打开此页面时，应用程序意外停止，没有微调器选项没有问题，但是当我添加它们时，应用程序崩溃......

logcat 文本[http://pastebin.com/umKP8iD0](http://pastebin.com/umKP8iD0)

```
 package com.calc;

    import android.app.Activity;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.Bundle;
    import android.widget.Adapter;
    import android.widget.ArrayAdapter;
    import android.widget.EditText;
    import android.widget.Spinner;
    import android.widget.TextView;
    import android.widget.Button;
    import android.widget.TimePicker;
    import android.view.View;

    public class setup extends Activity
    {

        TextView start, end;
        TimePicker startTime, endTime;
        Spinner day;
    /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            String dayText[] = new String[6];
            start = (TextView) findViewById(R.id.textView1);
            end = (TextView) findViewById(R.id.textView2);
            startTime = (TimePicker) findViewById(R.id.timePicker1);
            endTime = (TimePicker) findViewById(R.id.timePicker2);
            day = (Spinner) findViewById(R.id.spinner1);
            dayText[0] = "Sunday";
            dayText[1] = "Monday";
            dayText[2] = "Tuesday";
            dayText[3] = "Wednesday";
            dayText[4] = "Thursday";
            dayText[5] = "Friday";
            dayText[6] = "Saturday";
            ArrayAdapter adapter = new ArrayAdapter(this,
                    android.R.layout.simple_spinner_item, dayText);
            day.setAdapter(adapter);
            super.onCreate(savedInstanceState);
            setContentView(R.layout.enterpage);
        }
    } 
```

我想知道是否是因为微调器我创建错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:10:48.713

您必须先使用`setContentView`才能获取视图 ID...

如果您在设置视图之前尝试获取 id，它们将返回 null，然后您将遇到 NPE 问题。

移动它，让它成为第一个，你的应用程序应该可以工作。

编辑

您也没有在阵列中设置足够的插槽。您要求 6 个插槽并尝试将 7 个项目放入其中。尝试这个：

```
String daytext[] = new String[7]; 
```

# php - PHP MySQL 分类结果

> ID：10974086
> 
> 赞同：2
> 
> 时间：2012-06-11T02:52:29.600
> 
> 标签：php, android, mysql

我正在寻找在 Android 中显示类别列表的最佳方法。我需要的是应用程序中项目所属所有类别的列表，然后如果他们选择该类别，它将显示该类别下的所有项目。

我想知道如何最轻松地做到这一点，我不确定两个选项中的哪一个最简单或可能。我在想我可以在我的表中有一个列，例如，该列将被命名为“类别”。我会为每一行填写类别，例如“食物、设备、工具”等，但我只希望显示该类别，然后选择该类别中的项目。

或者。

为每个类别制作一列并将其选择为“真”“假”之类的方式会更容易吗？任何信息，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:18:47.427

用 mysql 中的数据填充第**一个列表**

```
select category from table group by category; 
```

单击一个类别名称后，用 ItemClick 类别名称中的数据填充**子列表。**

```
....
Object ox = lv.getItemAtPosition(position);
....
"select * from table where category="+ox.toString()+'"'; 
```

**备忘：这只是行为，不是代码**

# php - 无法修改标头信息 - [php, mysql, csv] 已发送标头

> ID：10974088
> 
> 赞同：-4
> 
> 时间：2012-06-11T02:52:40.423
> 
> 标签：php, mysql, csv

> **可能重复：**
> [“警告：无法修改标头信息 - 标头已发送”错误](https://stackoverflow.com/questions/1912029/warning-cannot-modify-header-information-headers-already-sent-by-error)

我在我的网站上收到这些错误

警告：无法修改标头信息 - 标头已经由 /home/****/public_html/monday/tuffturf/createrep.php:7 中的 /home/****/public_html/monday/tuffturf/ 发送第 103 行的 createrep.php

警告：无法修改标头信息 - 标头已经由 /home/****/public_html/monday/tuffturf/createrep.php:7 中的 /home/****/public_html/monday/tuffturf/ 发送第 104 行的 createrep.php

警告：无法修改标头信息 - 标头已经由 /home/****/public_html/monday/tuffturf/createrep.php:7 中的 /home/****/public_html/monday/tuffturf/ 发送第 105 行的 createrep.php

警告：无法修改标头信息 - 标头已经由 /home/****/public_html/monday/tuffturf/createrep.php:7 中的 /home/****/public_html/monday/tuffturf/ 发送createrep.php 第 106 行查询失败请重试

mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源

我检查了 php 标签中的空格，我尝试了不同的东西，但我找不到解决方案

php 从第 86 行开始，在 134 结束

```
<?php
$server = 'localhost';
$username = '*****';
$password = '*****';
mysql_connect($server, $username, $password);
mysql_select_db('***_turfdb')
or die ("unable to connect to mysql");

    $reports = array(
    'all' => 'SELECT * FROM quotepage',
    'recent' => 'SELECT * FROM quotepage ORDER BY entered DESC LIMIT 20',
    'oldest' => 'SELECT * FROM quotepage ORDER BY entered ASC LIMIT 20'
    );
    if (!array_key_exists($_POST['report'], $reports) || !isset($_POST))
    {
    die('Error generating report. please try again later.');
    };
    header("content-type:text/csv; charset=utf-8");
    header('Content-Disposition:attachment;filename='.date('Y-m-d').'.csv');
    header("pragma: no-cache");
    header ("expires: 0");

/*if(isset($_POST) && !empty($_POST)) {
            if(mysql_query($query)) {
                echo "<script type=\"text/javascript\"> alert('All information entered was successfully will now show report.'); </script>";
            } else {
                echo "<script type=\"text/javascript\"> alert('There was an error please try again later.'); </script>";
                echo mysql_error();
            }
        }*/

    if(isset($_POST['header']))
    {
        $field = mysql_query('SHOW COLUMS FROM quotepage');
        $label = array();
        while($field = mysql_fetch_assoc($field));
    {
        $labels[] = $field ['Field'];
    };
         echo implode (',', $labels) . "\n";
    }
        $data = mysql_query($reports[$_POST['report']]);
        while($row = mysql_fetch_assoc($data));
        die ("query failed please try again");
    {
            echo implode(',', $row) . "\n";
    }
?> 
```

这是使用下拉框选择要在 csv 报告中显示的报告数量

这是我第一次尝试创建 csv 报告，所以如果需要更多信息，请询问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:54:21.700

如错误消息所示，您在**createrep.php**的第 7 行有输出。

`header()`必须在*任何*输出发送到浏览器（空白、HTML 等）之前使用。

您注意到您提供的代码在第 86 行。我想您在上面的 85 行中输出了一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:04:49.653

看起来我们这里没有所有代码，因为它看起来不像 100 多行代码。我的猜测是某个地方的 PHP 标记之外的空格或换行符。我总是在 PHP 文件的底部省略结束标记，因为如果在结束 PHP 标记之后有空格或换行符，那么它将被解释为要发送到浏览器的 html 输出。省略结束 PHP 标记并不是错误，所以如果我是你，我会养成这个习惯。

# command-line - Perforce：使用命令行控制台（p4）从仓库中删除空文件夹？

> ID：10974089
> 
> 赞同：2
> 
> 时间：2012-06-11T02:52:47.777
> 
> 标签：command-line, path, directory, perforce, obliterate

我需要一种从命令行获取空目录路径并从仓库中删除（删除）它们的方法。

出于自动化目的，我一直在尝试使用`p4 dirs directory-path`来获取路径，但是此命令输出“不存在此类文件或目录”。似乎它没有区分空目录和错误路径。有替代方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T13:46:55.387

仓库中不存在空目录路径。服务器不存储目录，它只存储文件。如果库中存在目录，则它包含一个或多个文件。

实际上，当第一个文件存储在仓库中时，目录就存在了，如果它们包含的最后一个文件被删除，目录就会自动消失。

可能您的情况是，您在软件仓库中有一个目录，但该目录中的所有文件当前都在头版本中被删除。如果您试图定位这些文件以消除它们（但为什么？），那么您可以尝试使用类似“p4 files //my/directory/name/...”的方法来显示该目录中的所有文件。

# asp.net - 多租户应用程序的 MVC 3 验证属性错误消息

> ID：10974093
> 
> 赞同：2
> 
> 时间：2012-06-11T02:53:31.667
> 
> 标签：asp.net, asp.net-mvc-3

我正在使用 MVC3 和 C# 开发多租户应用程序。我正在使用带有验证属性装饰的属性的模型类。我想要做的是在客户端和服务器端返回租户特定的错误消息。

有没有办法挂钩 mvc 验证并在运行时为每个请求呈现/返回特定于租户的消息？

我的代码片段非常简单：

模型：

```
public class TestModel
{
  [Required(ErrorMessageResourceName="errormessage",        ErrorMessageResourceType=typeof(Global)]
  [RegularExpression(@"\d+", ErrorMessageResourceName="errormessagedigit",   ErrorMessageResourceType=typeof(Global)]  
  public string TestProperty {get; set;}
} 
```

看法：

```
@using(Html.BeginFrom())
{
  @Html.ValidationSummary(false, "")<br/> 
  @Html.TextBoxFor(x => x.TextProperty)<br />
  <input type="submit" value="submit" />
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:13:47.687

一种方法是创建一组[自定义验证属性](http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3)，每个验证属性都继承自一个现有验证属性（例如`MyRequired`），但包含用于注入租户特定错误消息的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:23:39.847

我想我知道我的问题的答案。

您需要从每个现有属性继承并覆盖 FormatErrorMessage 方法。在此方法中，您可以访问包含原始验证属性错误消息的 ErrorMessageString 属性。您可以创建请求/租户特定逻辑来格式化/覆盖错误消息。

看起来这种方法可以为每个请求错误消息返回 /render custom 。

代码片段：

```
public class RequiredAttributeTest:RequiredAttribute   
 {

public override string FormatErrorMessage(string name)        
   {
        // code to return request / tenant specific error message    
        return GetTenantError(ErrorMessageString, name); 
    }
}

public class RegularExpressionAtributeTest:RegularExpressionAttribute
  {
    public RegularExpressionAtributeTest(string pattern) : base(pattern) { }

public override string FormatErrorMessage(string name)
    {           
       // code to return request / tenant specific error message     
        return GetTenantError(ErrorMessageString, name);
    }
  } 
```

全球.asax.cs

```
protected void Application_Start()
{
…
DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(RequiredAttributeTest),  typeof(RequiredAttributeAdapter));
DataAnnotationsModelValidatorProvider.RegisterAdapter
(typeof(RegularExpressionAtributeTest), typeof(RegularExpressionAttributeAdapter));
…
} 
```

# javascript - 如何判断javascript对象是否有子对象

> ID：10974094
> 
> 赞同：1
> 
> 时间：2012-06-11T02:53:40.900
> 
> 标签：javascript, object

假设我有一个对象：

```
obj:{
   child:{
      x:12,
      y:50
   },
   key1:"value1",
   key2:"value2"
} 
```

如果我想遍历对象，例如：

```
for (var i in obj) {

} 
```

如何判断对象是否有子对象，以便遍历它。我知道我可以使用`hasOwnProperty`方法，但是在这种情况下，我不知道子对象名称是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:57:58.640

希望这个片段可以帮助你：

```
for (var i in obj) {
    if (obj.hasOwnProperty(i))
        console.log(typeof obj[i])
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:59:03.060

您可以使用它来检查属性是否包含对象：

```
for (var i in obj) {
    if(obj.hasOwnProperty(i) && obj[i] instanceof Object) {
        // obj[i] is a child object
    }
} 
```

注意事项：请记住，函数和数组都是 Javascript 中的对象。您可以单独测试那些使用`instanceof Function`和的人`instance of Array`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T03:05:37.153

递归函数：

```
var obj = { a : { aa : 'aa'
                , ab : 'ab' }
          , b : 'b'
          , c : 'c'
          };

function listKeyValue (o){
   for (var prop in o){
      if(typeof o[prop] === 'object') 
         listKeyValue(o[prop]);
      else 
         console.log(prop,o[prop]);
   }
}

listKeyValue(obj); 
```

# iphone - ASIHttprequest 获得分块传输编码的进展？

> ID：10974102
> 
> 赞同：1
> 
> 时间：2012-06-11T02:55:25.197
> 
> 标签：iphone, http, chunked-encoding

`ASIProgressDelegate` `setProgress`下载分块编码时，该方法总是得到 1？如何获得下载分块编码的进度？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:57:43.870

在分块编码中，有时您不会事先知道内容长度，因此您将无法知道整体进度。您可以知道的最多的是到目前为止收到的字节数。

# asp.net - 来自 Asp.Net 应用程序的 Facebook“最近活动”

> ID：10974103
> 
> 赞同：0
> 
> 时间：2012-06-11T02:55:31.083
> 
> 标签：asp.net, facebook

我正在开发一个使用 Facebook 登录的公共网站。用户登录 facebook 后，我想将带有缩略图的网站 URL 发布到他的 facebook 新闻源“已阅读：URL”

我是 facebook 集成的新手。我怎样才能从我的 asp.net 应用程序中实现这一点？现在，我添加了两个 iframe LIKE 和最近的活动。我可以看到我喜欢的帖子。但是我怎样才能发布我阅读的 URL 呢？谢谢。

注意：出于测试目的，我在 iframe 中使用了 www.yahoo.com。

下面的源代码取自

[http://www.abelski.com/courses/facebookplugins/abelski_facebook_plugins_page.html](http://www.abelski.com/courses/facebookplugins/abelski_facebook_plugins_page.html)

```
<iframe src="http://www.facebook.com/plugins/activity.php?site=sg.news.yahoo.com&width=300&height=300&header=true&colorscheme=light&font=arial&recommendations=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px; height:300px;" allowTransparency="true"></iframe>

<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fsg.news.yahoo.com&layout=standard&show_faces=true&width=450&action=like&colorscheme=light&height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:23:11.350

您正在寻找一个 Open Graph 动作，特别是[文章](http://developers.facebook.com/docs/opengraph/objects/builtin/#article)对象的[news.read](http://developers.facebook.com/docs/opengraph/actions/builtin/#read)动作。您将需要设置一个集成了它的应用程序。

您的每个页面都需要具有符合定义为的文章对象的元标记

```
<html>
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# 
                  article: http://ogp.me/ns/article#">
     <meta property="fb:app_id"               content="YOUR_APP_ID"> 
     <meta property="og:type"                 content="article"> 
     <meta property="og:url"                  content="URL of this object">
     <meta property="og:site_name"            content="Name of site hosting article">
     <meta property="og:image"                content="URL to an image">
     <meta property="og:title"                content="Name of article">
     <meta property="og:description"          content="Description of object"> 
     <meta property="article:published_time"  content="DateTime"> 
     <meta property="article:modified_time"   content="DateTime"> 
     <meta property="article:expiration_time" content="DateTime">
     <meta property="article:author"          content="URL to Author object">
     <meta property="article:section"         content="Section of article">
     <meta property="article:tag"             content="Keyword">
    </head>
<body>
    <!-- main article body -->
</body>
</html> 
```

您在 JavaScript 中的操作需要设置为

```
function postRead()
  {
      FB.api(
        '/me/news.reads',
        'post',
        { article: 'http://yoursite.com/articlepage.html' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Read was successful! Action ID: ' + response.id);
           }
        });
  } 
```

在[Open Graph 教程中阅读更多信息](http://developers.facebook.com/docs/opengraph/tutorial/)

# javascript - 从 Knockout Observable Array 中调用函数

> ID：10974105
> 
> 赞同：1
> 
> 时间：2012-06-11T02:56:21.327
> 
> 标签：javascript, knockout.js, knockout-2.0

我有一个 Knockout 可观察数组，我希望从 Javascript 和 HTML 中编辑它。这是我的代码：

```
var ListModel = function(formula) {
  var self = this;
  self.formula = ko.observableArray(formula);

  this.mergeEquation = function(op) {
    if (op.type == "ins") {
      self.formula.splice(op.position, 0, op.value);
    } else if (op.type == "del") {
      self.formula.splice(op.position, 1);
    } else {
      console.info("No match: " + op.value + op.position);
    }
  };
}; 
```

我的变量`op`是一个 JSON 字符串。我知道如何`mergeEquation`使用 HTML 数据绑定调用该函数，但是如何在同一个 JS 文件中调用该函数？我当前的代码是这样的：

```
ko.applyBindings(new ListModel(formula));
//...
//initializing of JSON object called op
//...
if (something) {
  mergeEquation(op);
} 
```

但它不起作用。我在这里错过了一些步骤吗？我已经阅读了[函数](http://knockoutjs.com/documentation/fn.html)和[扩展器](http://knockoutjs.com/documentation/extenders.html)，但对于我在这里尝试做的事情来说，两者似乎都太过分了。

PS：这是我正在使用的 JSON 结构的示例：

```
{"type":"ins", "clientID":1223, "version":0, "value":"hi", "position":0, "id":2736} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T03:11:32.787

改变 ：-

```
ko.applyBindings(new ListModel(formula)); 
```

到

```
 var vm = new ListModel(formula);
   ko.applyBindings(vm); 
```

所以，现在 vm 是你可以调用合并方程的东西

```
vm.mergeEquation(op) 
```

# java - WatchService Api 文件监视在创建事件中尝试访问文件时抛出异常

> ID：10974120
> 
> 赞同：2
> 
> 时间：2012-06-11T02:58:42.243
> 
> 标签：java, filesystemwatcher, java-7, java.nio.file

我有下面的代码来跟踪专用文件夹上的文件更改

```
 Path path = Paths.get("f:\\logs");
    WatchService watchService = FileSystems.getDefault().newWatchService();
    WatchKey key = path.register(watchService, StandardWatchEventKinds.ENTRY_CREATE);

    while (true) {
        final WatchKey watchKey = watchService.take();
        for (WatchEvent<?> watchEvent : key.pollEvents()) {
            WatchEvent.Kind<?> kind = watchEvent.kind();
            if (kind == StandardWatchEventKinds.ENTRY_CREATE) {
                WatchEvent<Path> eventPath = (WatchEvent<Path>) watchEvent;
                Path newFilePath = eventPath.context();
                boolean writable = false;
                System.out.println(writable);
                long size = Files.size(newFilePath) / (1000 * 1000);

                System.out.println(newFilePath.toAbsolutePath() + "wriable:" + writable + "size:" + size);
                watchKey.reset();

            }
        }
    } 
```

但是当创建了一个文件（named=newfile.dat）并且程序运行时：

> 长尺寸 = Files.size(newFilePath) / (1000 * 1000);

它抛出

> java.nio.file.NoSuchFileException: newfile.dat

和变量

```
writable 
```

always= false （即使我尝试将其放入 While 循环并休眠以重新检查）

请问是怎么回事？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:08:01.090

我发现变量`newFilePath`总是相对路径:( :(

我通过使用来解决

```
Path dir = (Path) watchKey.watchable();
Path fullPath = dir.resolve(newFilePath); 
```

`fullPath`是文件的正确路径

但我想知道，这太废话了:( :(

# javascript - Javascript/jQuery 使用正则表达式搜索“分：秒”时间

> ID：10974121
> 
> 赞同：1
> 
> 时间：2012-06-11T02:59:02.493
> 
> 标签：javascript, jquery, regex

我有一个包含文本的变量数组。我只想选择包含分秒标记的项目，例如。“3:00”、“4:01”、“0:23”。我了解如何通过数组，我只需要知道如何实现[这个 regex](http://regexlib.com/REDetails.aspx?regexp_id=332)。

为了安全起见，这里是：

`^(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$`

我正在尝试在此实现它：

```
$.each(comments, function(i, val) { //Go through array with jQuery
    //Remove from array if instance of "minute:second" is not found
}); 
```

谢谢！

编辑：

Dave Thomas 要求提供示例。它们都是 YouTube 评论。下面是带有分钟的评论示例：时间，然后是没有的评论。全部取自示例视频。

1.  “1:00 国际足联 12 评论员？”
2.  “呜呜呜<3”

编辑2：

```
for (var i = 0, len = comments.length; i < len; i++) {
    if(!(comments[i].test(/(([0-5][0-9])|[0-9])\:[0-9]{2,2}/))){
        comments.splice(i,1);
    }
}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T03:09:51.357

您将希望使用本机[过滤器](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)函数来过滤数组（链接中的旧浏览器有一个 shim）而不是[each](http://api.jquery.com/each/)，您可以使用[test](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)针对字符串测试正则表达式：

```
var pattern = /(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))/;
comments = comments.filter(function(str){
    return pattern.test(str);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T03:21:41.163

我建议，如果您不介意更原生的 JavaScript 方法：

```
var comments = ["01:00 Fifa 12 comentator?", "ROOOOOOOONEY <3"];

for (var i = 0, len = comments.length; i < len; i++) {
    return comments[i].test(/(([0-5][0-9])|[0-9])\:[0-9]{2,2}/);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sVsrP/)。

正则表达式的解释：

```
(([0-5][0-9])|[0-9])\:[0-9]{2,2} 
```

*   `([0-5][0-9])`本质上标识时间字符串的分钟部分，因为分钟只能从`0`（或`00`）到`59`，这将搜索单个数字 from`0-5`后跟 a `0-9`。
*   `|`表示一个“或”，它将识别前面的两位数序列 from `00`to`59`或后续序列。
*   `[0-9]`同样，这标识了 的范围`0-9`，因此标识了个位数的分钟数。
*   `\:`因为冒号是正则表达式中的特殊字符，所以反斜杠会转义冒号，并允许搜索文字`:`字符。
*   `[0-9]{2,2}`搜索两位数的字符序列，每个字符都来自`0-9`.

* * *

**编辑**更新上述代码：

```
var comments = [/*...rather a lot...*/]
    timelyComments = [];

for (var i = 0, len = comments.length; i < len; i++) {
    if (comments[i].test(/(([0-5][0-9])|[0-9])\:[0-9]{2,2}/)){
        timelyComments.push(comments[i]);
    }
}

console.log(timelyComments);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sVsrP/1/)。

参考：

*   [正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)。
*   [`test()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test).

# android - Android 方向更改

> ID：10974126
> 
> 赞同：5
> 
> 时间：2012-06-11T02:59:45.213
> 
> 标签：android, screen-orientation, screen-rotation, android-4.0.3-ice-cream-sandwich

我有一个简单的`Activity`调用`SingleTouchTest`来理解屏幕触摸。奇怪的是，它`SingleTouchTest`以我所处的任何方向开始，但旋转设备不会导致屏幕旋转。

我的测试设备是运行 Android 4.0.3 的 Acer A100。

main`Activity`包含一个`ListView`导航到我的测试`Activity`es，包括`SingleTouchTest`. `SingleTouchTest`除了旋转之外，我可以毫无问题地运行（下面的完整代码）。在`AndroidManifest.xml`（下面的完整代码）中，我尝试了每种组合

`android:configChanges="keyboard|keyboardHidden|orientation"` `android:screenOrientation="unspecified"`

它不会自动旋转。我什至删除了该`onConfigurationChanged()`方法`SingleTouchTest`，但没有任何反应。

完整代码`AndroidManifest.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest 
    package="com.Bespoke.AndroidBasics"
    android:versionCode="1"
    android:versionName="1.0"
    android:installLocation="preferExternal" xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="Android Basics">
        <activity
            android:name=".AndroidBasicsStarter"
            android:label="Android Basics"
            android:screenOrientation="unspecified">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".LifeCycleTest"
            android:label="Life Cycle Test"
            android:configChanges="keyboard|keyboardHidden|orientation" android:screenOrientation="unspecified"/>
        <activity
            android:name=".SingleTouchTest"
            android:label="Single Touch Test"
            android:configChanges="keyboard|keyboardHidden|orientation" android:screenOrientation="unspecified"/>
        <activity
            android:name=".MultiTouchTest"
            android:label="Single Touch Test"
            android:configChanges="keyboard|keyboardHidden|orientation" android:screenOrientation="unspecified"/>
        <activity
            android:name=".KeyTest"
            android:label="Key Test" android:screenOrientation="unspecified"/>
    </application>

</manifest> 
```

完整代码`SingleTouchTest`：

```
package com.Bespoke.AndroidBasics;

import android.app.Activity;
import android.content.res.Configuration;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.TextView;

public class SingleTouchTest extends Activity
                             implements OnTouchListener {

    StringBuilder builder = new StringBuilder();
    TextView textView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        textView = new TextView(this);
        textView.setText("Touch and drag (one finger only!)");
        textView.setOnTouchListener(this);
        this.setContentView(textView);
    }

    public boolean onTouch(View v, MotionEvent event) {
        builder.setLength(0);  // clear the builder
        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            builder.append("down, ");
            break;
        case MotionEvent.ACTION_MOVE:
            builder.append("move, ");
            break;
        case MotionEvent.ACTION_CANCEL:
            builder.append("cancel, ");
            break;
        case MotionEvent.ACTION_UP:
            builder.append("up, ");
            break;
        }
        builder.append(event.getX());
        builder.append(", ");
        builder.append(event.getY());
        String text = builder.toString();
        Log.d("TouchTest", text);
        textView.setText(text);
        return true;  // Consume the event, if false super.onTouch superceeds us
    }

     @Override
     public void onConfigurationChanged(Configuration  newConfig) {
       super.onConfigurationChanged(newConfig);

     }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T09:22:59.553

因为你正在使用

```
 android:screenOrientation="unspecified" 
```

对于每个活动，它根据谷歌定义为

> 默认值。系统选择方向。它使用的策略以及因此在特定上下文中做出的选择可能因设备而异。

这让我认为设备出于某种原因声明了所需的方向。也许尝试将屏幕方向切换到

```
android:screenOrientation="fullSensor" 
```

那应该把它从特定的设备手中拿出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T03:05:32.443

试试这个：

```
android:screenOrientation="fullSensor" 
```

方向由设备方向传感器确定。显示器的方向取决于用户握持设备的方式。这应该是你想要的。此外，有关更多选项，请查看此链接 -[活动元素。](http://developer.android.com/guide/topics/manifest/activity-element.html#screen)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T09:11:00.867

在你的 AndroidManifest 中，去掉`|orientation`. 原因如下：

`android:configChanges`允许您手动处理特定的配置更改。由于您没有告诉您的应用程序手动旋转（通过内部代码`onConfigurationChanged()`），因此它根本没有做任何事情。要让您的应用程序自动使用旋转，您必须告诉 Manifest 您*没有* ***手动***处理方向。

解释这一点的文档[位于](http://developer.android.com/guide/topics/manifest/activity-element.html#config)Android[开发者网站](http://developer.android.com/)。

# zend-framework2 - ZF2: Zend Framework 2 - 如何在没有布局的情况下渲染输出

> ID：10974127
> 
> 赞同：7
> 
> 时间：2012-06-11T03:00:00.113
> 
> 标签：zend-framework2

我知道我可以用这个

```
public function providerAction()
{
    $result = new ViewModel();
    $result->setTerminal(true);

   return $result;
} 
```

但是如何将变量传递给视图？在我这样做之前

```
return array('items' => $items); 
```

但是现在我只有一个选择，要么返回数组，然后布局就在那里，要么返回，`$result`然后变量不在视图中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-11T09:06:00.770

在您的示例中，您可以这样写：

```
public function providerAction()
{
    $result = new ViewModel();
    $result->setTerminal(true);
    $result->setVariables(array('items' => 'items'));
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T21:11:23.083

以前的答案完美无缺。我只想添加，而不是使用`setVariables`你也可以在实例化时直接传递你的变量，`ViewModel`如下所示：

```
$result = new ViewModel(array('items' => $items)); 
```

# python - __repr__() 在 python 中的正确用法？

> ID：10974129
> 
> 赞同：0
> 
> 时间：2012-06-11T03:00:47.750
> 
> 标签：python, file, repr

我有一个容器类，我想用它来打印其中的所有元素。

我想将它们打印到文件或控制台。

我已经将元素 ( ) 和容器类布局`Patch`如下，并且`__repr__(self)`.
我不确定我是否理解它的目的，`__repr__()`并且想知道这里的用法是否可以。

```
class Patch:
    def __init__(self, folder_name, file_name):
        self.folder_name = folder_name
        self.file_name = file_name
        self.full_path = os.path.join(self.folder_name, self.file_name)
        self.file_hash = md5_for_file(open(self.full_path, 'r'))
        self.file_size = os.path.getsize(self.full_path)

    def __repr__(self):
        return "%s %s %s" % (self.file_name, self.file_hash, self.file_size)

class PatchContainer:
    def __init__(self):
        self.patch_folder_dict = collections.OrderedDict()
        self.patch_file_set = set()
    def addPatch(self, patch):
        if patch.file_name in self.patch_file_set:
            print '*** Delete the file ', patch.full_path, ' ***'
            return
        self.patch_file_set.add(patch.file_name)
        if not patch.folder_name in self.patch_folder_dict:
            self.patch_folder_dict[patch.folder_name] = [patch]
        else:
            self.patch_folder_dict[patch.folder_name].append(patch)

    def prettyPrint(self, writeable_object=PATCH_META_FILE):
        sys.stdout = writeable_object
        for patch_folder in self.patch_folder_dict.keys():
            print patch_folder
            patch_list = self.patch_folder_dict[patch_folder]
            for patch in patch_list:
                print patch
        sys.stdout = sys.__stdout__ 
```

它按预期工作，但请评论样式/用法是否正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T03:15:09.733

这看起来像你可能想要`__str__`的。它们相似，但`__str__`返回供人类消费的东西；`__repr__`应该返回一些供 Python 使用的东西——它应该是一个 Python 表达式，它将评估为一个相等的对象，或者是尖括号中的东西，如 default `<classname object at id>`。请参阅内置的[文档](http://docs.python.org/library/functions.html#repr)`repr(object)`，最终调用`object.__repr__()`：

> 对于许多类型，此函数尝试返回一个字符串，该字符串在传递给 eval() 时会产生具有相同值的对象，否则表示是一个包含在尖括号中的字符串，其中包含对象类型的名称附加信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T03:15:28.247

它是对象的人类可读表示。

*   《Python的目的`__repr__`》：[clicky](https://stackoverflow.com/questions/1984162/purpose-of-pythons-repr)
*   `__str__`“Python和Python 之间的区别`__repr__`”：[clicky](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)
*   Python 文档：[clicky](http://docs.python.org/reference/datamodel.html#object.__repr__)

# j - J701和J602的区别

> ID：10974138
> 
> 赞同：3
> 
> 时间：2012-06-11T03:04:44.600
> 
> 标签：j

我打算在一个Ubuntu盒子和一个WinXP盒子上安装J环境。[http://www.jsoftware.com/stable.htm](http://www.jsoftware.com/stable.htm)站点似乎没有详细解释 J701 和 J602 之间的区别。我可以从该网站找到的所有信息：

> J701 和 J602 都是稳定版本。J701 引入了重大变化，适用于想要挑战前沿挑战的新老用户。J602 适用于旧用户和那些希望（尤其是在 Windows 中）获得更温和体验的用户。

... 另一个提到 J701 的 GUI 是对早期版本的完全重新设计。

请扩展上述差异，J 程序员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:10:36.567

[此处列出了](http://www.jsoftware.com/docs/help701/release/contents.htm)代码改进

[此处列出了](http://www.jsoftware.com/docs/help701/user/relhigh.htm)发布亮点、概述和一些链接

总的来说，我也对缺乏“官方”文档感到失望。有时，甚至[词汇](http://www.jsoftware.com/docs/help701/dictionary/vocabul.htm)已经过时、不完整或完全错误；可惜了这么好的语言。

如果您只是学习 J，请使用 6.02，因为许多[Labs](http://www.jsoftware.com/jwiki/Studio)尚未[移植到 7.01](http://www.jsoftware.com/jwiki/Addons/labs/labs/ControlLabs)。除此之外，我会选择 7.01。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T00:10:12.783

在我看来，网站上关于 J7 最前沿的描述虽然在 J7 首次发布时是正确的，但现在有点夸张了。这并不是说 J7 具有相同级别的完整性，尤其是在有关环境的内聚文档方面（注意基本语言本身及其文档与以前一样健壮 - 与 J6 几乎没有变化）。

最大的变化是GUI环境的变化。J6 在 Windows 上使用 Windows 驱动程序，在 Linux 和 Mac 上使用 Java Swing。J7 有两个主要的 GUI 环境，Gtk 和基于浏览器的 (javascript/css)。至少在 Linux 上（也可能在 Mac 上）Gtk GUI 是 Java Swing 的一大改进。

在 J7 的早期，让 Gtk IDE 在 Windows 上运行可能有点棘手，但是现在有 Windows 安装程序可以简化 J 的安装，包括 Gtk 二进制文件和 Gtk IDE。

另一个重要的变化是将过去包含在安装程序中的许多脚本/包转移到 J 应用程序库 (JAL)。这样做的主要驱动力是使它们能够更频繁地被社区更新。许多常用脚本（例如文件、字符串）现在在系统启动时加载，而不是要求用户手动加载它们。

如果您以交互方式使用 J 或编写不依赖 GUI 的脚本，那么我认为转到 J7 将是一个相当容易的决定。如果您想构建主要是 GUI 应用程序，那么两者都可以工作，但是 J7 的文档和简单示例（在 Gtk 或 javascript/css 上）较少。

# javascript - 在 javascript 中为公共回调函数安全地定义变量

> ID：10974142
> 
> 赞同：2
> 
> 时间：2012-06-11T03:05:16.770
> 
> 标签：javascript, callback, this, google-closure-library, youtube-javascript-api

我正在使用 YouTube iFrame API 在页面上嵌入许多视频。此处的文档：[https ://developers.google.com/youtube/iframe_api_reference#Requirements](https://developers.google.com/youtube/iframe_api_reference#Requirements)

总之，您可以使用以下代码段异步加载 API：

```
 var tag = document.createElement('script');
 tag.src = "http://www.youtube.com/player_api";
 var firstScriptTag = document.getElementsByTagName('script')[0];
 firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

加载后，API 会触发预定义的回调函数`onYouTubePlayerAPIReady`。

有关其他上下文：我在 Google Closure 中为此定义了一个库文件。我提供了一个命名空间：`goog.provide('yt.video');`

然后我使用`goog.exportSymbol`以便 API 可以找到该函数。这一切都很好。

我的挑战是我想将 2 个变量传递给回调函数。如果不在对象的上下文中定义这两个变量，有什么方法可以做到这一点`window`？

```
goog.provide('yt.video');

goog.require('goog.dom');

yt.video = function(videos, locales) {
  this.videos = videos;
  this.captionLocales = locales;

  this.init();
};

yt.video.prototype.init = function() {
  var tag = document.createElement('script');
  tag.src = "http://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
};

/*
 * Callback function fired when YT API is ready
 * This is exported using goog.exportSymbol in another file and
 * is being fired by the API properly.
 */
 yt.video.prototype.onPlayerReady = function(videos, locales) {
    window.console.log('this :' + this); //logs window
    window.console.log('this.videos : ' + this.videos); //logs undefined
    /*
     * Video settings from Django variable
     */
    for(i=0; i<this.videos.length; i++) {
      var playerEvents = {};
      var embedVars = {};

      var el = this.videos[i].el;
      var playerVid = this.videos[i].vid;
      var playerWidth = this.videos[i].width;
      var playerHeight = this.videos[i].height;
      var captionLocales = this.videos[i].locales;
      if(this.videos[i].playerVars)
        var embedVars = this.videos[i].playerVars;
      }
      if(this.videos[i].events) {
        var playerEvents = this.videos[i].events;
      }

      /*
       * Show captions by default
       */
      if(goog.array.indexOf(captionLocales, 'es') >= 0) {
        embedVars.cc_load_policy = 1;
      };

      new YT.Player(el, {
        height: playerHeight,
        width: playerWidth,
        videoId: playerVid,
        events: playerEvents,
        playerVars: embedVars
    });
 }; 
```

};

为了初始化这一点，我目前在自执行匿名函数中使用以下内容：

```
 var videos = [
    {"vid": "video_id", "el": "player-1", "width": 640, "height": 390, "locales": ["es", "fr"], "events": {"onStateChange": stateChanged}}, 
    {"vid": "video_id", "el": "player-2", "locales": ["es", "fr"], "width": 640, "height": 390}
  ];

  var locales = ['es'];

  var videoTemplate = new yt.video(videos, locales); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:54:49.030

如何定义`onYouTubePlayerAPIReady`为一个全局函数，就像 API 所期望的那样，然后`onPlayerReady`从该函数内部调用您的方法？代码示例：

```
window.onYouTubePlayerAPIReady = function () {
    var args = Array.prototype.slice.call(arguments);
    args.push(videos, locales);
    videoTemplate.onPlayerReady.apply(videoTemplate, args);
}; 
```

并且您修改 onPlayerReady 方法的签名以以相同的顺序接受参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:14:54.597

To answer your specific question:

> My challenge is that I would like to pass 2 variables to the callback function. Is there any way to do this without defining these 2 variables in the context of the window object?

Yes, there are ways to provide data to a callback function without using global variables. However, before looking at the callback function, the YouTube API has the following requirement:

> [In addition, any HTML page that contains the YouTube player must implement a JavaScript function named **`onYouTubePlayerReady`**. The API will call this function when the player is fully loaded and the API is ready to receive calls.](https://developers.google.com/youtube/js_api_reference#Requirements)

The YouTube API [examples](https://developers.google.com/youtube/iframe_api_reference#Examples) add event listeners within the **`onYouTubePlayerReady`** function as shown here:

```
function onYouTubePlayerAPIReady() {
  var player;
  player = new YT.Player('player', {
    width: 1280,
    height: 720,
    videoId: 'u1zgFlCw8Aw',
    events: {
      'onReady': onPlayerReady,
      'onPlaybackQualityChange': onPlayerPlaybackQualityChange,
      'onStateChange': onPlayerStateChange,
      'onError': onPlayerError
    }
  });
} 
```

* * *

It appears that your example callback function `yt.video.prototype.onPlayerReady` is intended to be an event listener for the YouTube API event `onReady` emitted by a YouTube `YT.Player` object. The API docs indicate that event listeners are added either when constructing the `YT.Player` object or added using the `addEventListener` function (the [Closure Library](https://developers.google.com/closure/library/) alternative is [`goog.events.listen`](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/events/events.js#121)).

Since the `yt.video.prototype.onPlayerReady` event listener needs to "listen" for the `onReady` event emitted from a YouTube `YT.Player` object, it would be circular to construct new `YT.Player` instances within the event listener `yt.video.prototype.onPlayerReady` intended to listen for an event emitted by a `YT.Player` instance.

Getting back to the original question of providing data to callback functions without using global variables, you cannot pass arbitrary function arguments to an event listener (for example, in the original code sample above, `yt.video.prototype.onPlayerReady` must accept an `Event` object as its first argument rather than a `videos` array). However, the event listener `yt.video.prototype.onPlayerReady` can be used as a callback function and still access the state of `yt.video` instance objects as long as it is *bound* to instances of `yt.video`.

One way to bind the `this` argument to a specific object is with the [Closure Library](https://developers.google.com/closure/library/) function [goog.bind(functionToCall, selfObject, var_args)](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/base.js#1031). The `yt.video` constructor could be modified as follows:

```
goog.provide('yt.video');

goog.require('goog.dom');

/**
 * @constructor
 */
yt.video = function(videos, locales) {
  this.videos = videos;
  this.captionLocales = locales;

  this.onPlayerReadyListener = goog.bind(this.onPlayerReady, this);

  this.init();
};

yt.video.prototype.init = function() {
  var tag = document.createElement('script');
  tag.src = "http://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
};

/*
 * Callback function fired when YT API is ready
 * This is exported using goog.exportSymbol in another file and
 * is being fired by the API properly.
 */
yt.video.prototype.onPlayerReady = function(event) {
  // Logs [object Object]
  window.console.log('this :' + this);

  // Logs [object Object],[object Object]
  window.console.log('this.videos : ' + this.videos); 

  event.target.playVideo();
}; 
```

Then the bound event listener could be added to a `YT.Player` object as follows:

```
var myVideoObject = new yt.video(videos, locales);

function onYouTubePlayerAPIReady() {
  var player;
  player = new YT.Player('player', {
    width: 1280,
    height: 720,
    videoId: 'u1zgFlCw8Aw',
    events: {
      'onReady': myVideoObject.onPlayerReadyListener
    }
  });
} 
```

# android - Android 应用程序可以选择要使用的 wifi 连接吗？

> ID：10974147
> 
> 赞同：0
> 
> 时间：2012-06-11T03:07:40.153
> 
> 标签：android, android-wifi, android-wireless

我需要构建一个 Android 应用程序，它会在特定的时间间隔检查**特定的 WiFi**连接是否在范围内并连接到它并传输一些数据。数据传输完成后，如果有的话，只需回退到原来的 WiFi 连接。

这可能吗，如果是的话，是否有任何文件？

# c - postgresql 表列

> ID：10974149
> 
> 赞同：0
> 
> 时间：2012-06-11T03:07:48.327
> 
> 标签：c, postgresql

我正在处理 postgresql 表列。在 SQL 或 pl/pgSQL 中很容易，但是在 PL/C 中如何处理列（例如获取列名，获取表的列数，检查表中是否存在名称为 XXX 的列）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:42:28.887

你的意思是：

```
PQnfields
Returns the number of columns (fields) in each row of the query result.

int PQnfields(const PGresult *res);
PQfname
Returns the column name associated with the given column number. Column numbers start at 0\. The caller should not free the result directly. It will be freed when the associated PGresult handle is passed to PQclear.

char *PQfname(const PGresult *res,
              int column_number);
NULL is returned if the column number is out of range.

PQfnumber
Returns the column number associated with the given column name.

int PQfnumber(const PGresult *res,
              const char *column_name);
-1 is returned if the given name does not match any column.

The given name is treated like an identifier in an SQL command, that is, it is downcased unless double-quoted. For example, given a query result generated from the SQL command

select 1 as FOO, 2 as "BAR";
we would have the results:

PQfname(res, 0)              foo
PQfname(res, 1)              BAR
PQfnumber(res, "FOO")        0
PQfnumber(res, "foo")        0
PQfnumber(res, "BAR")        -1
PQfnumber(res, "\"BAR\"")    1 
```

取自[Postgres 文档](http://www.postgresql.org/docs/current/interactive/libpq-exec.html#LIBPQ-EXEC-SELECT-INFO)。

你有什么问题？这些电话非常简单。

# ruby - error installing rmagick gem on RHEL - ERROR: Failed to build gem native extension

> ID：10974153
> 
> 赞同：7
> 
> 时间：2012-06-11T03:08:57.067
> 
> 标签：ruby, imagemagick, rmagick

i m trying to install snorby on RHEL. it asked for ruby, i tried that now i am stuck with rmagick error.

please help.

```
 Installing rmagick (2.13.1) with native extensions
           Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
            /usr/local/bin/ruby extconf.rb
         checking for Ruby version >= 1.8.5... yes
          extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
          checking for gcc... yes
           checking for Magick-config... yes
    checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
Package MagickCore was not found in the pkg-config search path.

Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found

           Package MagickCore was not found in the pkg-config search path.
            Perhaps you should add the directory containing `MagickCore.pc'
           to the PKG_CONFIG_PATH environment variable
              No package 'MagickCore' found
         Package MagickCore was not found in the pkg-config search path.
   Perhaps you should add the directory containing `MagickCore.pc'
   to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found

Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable

       No package 'MagickCore' found
        checking for stdint.h... yes
         checking for sys/types.h... yes
       checking for wand/MagickWand.h... no

      Can't install RMagick 2.13.1\. Can't find MagickWand.h.
      *** extconf.rb failed ***
      Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
        details.  You may need configuration options.

       Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/usr/local/bin/ruby

       Gem files will remain installed in                        
 /var/www/html/snorby/vendor/bundle/ruby/1.9.1/gems/rmagick-2.13.1 for inspection.

Results logged to /var/www/html/snorby/vendor/bundle/ruby/1.9.1/gems/rmagick-

   2.13.1/ext/RMagick/gem_make.out

An error occured while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. ` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T04:38:26.410

You can do following steps(Ubuntu machine),

```
sudo apt-get install libmagickwand-dev
gem install rmagick 
```

# python - 图像下载输出不会将所有图像保存在特定文件夹中

> ID：10974154
> 
> 赞同：2
> 
> 时间：2012-06-11T03:09:15.357
> 
> 标签：python, image, loops, directory, file-handling

过去几周我一直在网站 mangareader 的图像下载器上工作，我终于完成了主要代码，除了一个小错误，这使得第一个图像保存在代码创建的文件夹之外保存商场。这是一个例子：http: [//i.stack.imgur.com/fUpg8.png](http://i.stack.imgur.com/fUpg8.png)

我不知道为什么它会这样工作，因为代码似乎工作得很好。这是使文件夹更改的函数：

```
def pathchange(old, new):
    if os.path.exists(new):
        os.chdir(new)
    else:
        os.mkdir(new) 
```

这是下载功能： http: [//pastebin.com/FfuxirvK](http://pastebin.com/FfuxirvK)

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:12:06.130

如果路径不存在，则创建文件夹但忘记更改。这就是为什么第一张图像不与其余图像一起的原因。

我建议这个简单的修复：

```
def pathchange(old, new):
    if not(os.path.exists(new)):
        os.mkdir(new)
    os.chdir(new) 
```

此外，该`old`论点似乎没有任何作用。

# xslt - FOP 是否可以只创建一个表 但不是 ?

> ID：10974155
> 
> 赞同：3
> 
> 时间：2012-06-11T03:09:27.250
> 
> 标签：xslt, apache-fop

我正在使用 FOP 将 HTML（嵌入在 XML 中）转换为 PDF。HTML 片段如下所示：-

```
<table border="1" width="100%">
  <thead>
    <tr>
      <th>Name</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody/>
</table> 
```

当我转换时，我收到此错误：-

```
Caused by: org.apache.fop.fo.ValidationException: Error(Unknown location): fo:table-body i
s missing child elements.
Required Content Model: marker* (table-row+|table-cell+) 
```

删除`<tbody/>`元素时出现类似错误：-

```
org.apache.fop.fo.ValidationException: Error(Unknown location): fo:table is missing child
elements.
Required Content Model: (marker*,table-column*,table-header?,table-footer?,table-body+) 
```

看起来像 fo:table 需要 table-body，而 table-body 需要 table-row。我的问题是：-

是否可以创建一个只有表头而没有表体或空表体的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:33:57.030

如果您的数据 xpath 是 xpa/th，您可以使用以下内容：

```
<fo:table>
    <fo:table-header>(whatever)</fo:table-header>
    <fo:table-body>
        <xsl:if test="xpa/th">
            <xsl:apply-templates select="xpa/th" />
        </xsl:if>
        <xsl:if test="not(xpa/th)">
            <fo:table-cell><fo:block /></fo:table-cell>
        </xsl:if>
    </fo:table-body>
</fo:table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:29:56.573

您当然可以通过以下方式：

1.  创建`<fo:table-body>`
2.  `<fo:table-cell`即使需要也创建
3.  将边框大小设置为零并设置为白色，或页面背景的颜色

# php - 邮件功能和回显在同一页面上

> ID：10974157
> 
> 赞同：-2
> 
> 时间：2012-06-11T03:10:31.653
> 
> 标签：php, html, email

您好，我的电子邮件代码运行良好。我想要的是，当我按下发送按钮时，消息应该出现 MAIL END 并且所有表单都应该关闭......

输入您的电子邮件地址表单应该关闭，并且在同一页面上，邮件将显示为 MAIL SENT。而不会在任何其他页面上重定向。

```
<?php 
if(isset($_POST['btnsubmit'])) {
 $to = ($_POST['referrer_email']);
    $from = "abcz@gmail.com";
    $subject = "Hello";
 $message = "abcasdfasdfa asdfasdf ";

$headers = "MIME-Version: 1.0rn";
    $headers .= "Content-type: text/html; charset=iso-8859-1rn";
    $headers  .= "From: $from\r\n";mail($to, $subject, $message, $headers);
}
?>
<body>
<form name="ReferFriendForm" id="ReferFriendForm" method="post" action="" onSubmit="return validateForm()">
        <table class="forms" width="100%" border="0" style="margin: 0px; padding: 0px">
            <tbody style="margin: 0px; padding: 0px">
                <tr style="margin: 0px; padding: 0px">
                    <td colspan="2" style="margin: 0px; padding: 0px">Pass the 
                    Tel your friends and family about Net Telephone product and 
                    service<br style="margin: 0px; padding: 0px">
                    &nbsp;</td>
                </tr>
                <tr style="margin: 0px; padding: 0px">
                    <td class="requiredLabel" style="width: 44%; vertical-align: top; text-align: center; font-weight: bold; margin: 0px; padding-left: 0px; padding-right: 20px; padding-top: 3px; padding-bottom: 3px">
                    Your Name:</td>
                    <td class="field" style="vertical-align: top; margin: 0px; padding-left: 0px; padding-right: 0px; padding-top: 3px; padding-bottom: 3px" width="54%" align="center">
                    <input size="35" name="referrer_name" id = "referrer_name"style="float: left; margin: 0px; padding: 0px"></td>
                </tr>
                <tr style="margin: 0px; padding: 0px">
                    <td class="requiredLabel" style="width: 44%; vertical-align: top; text-align: center; font-weight: bold; margin: 0px; padding-left: 0px; padding-right: 20px; padding-top: 3px; padding-bottom: 3px">
                    Your Email:</td>
                    <td class="field" style="vertical-align: top; margin: 0px; padding-left: 0px; padding-right: 0px; padding-top: 3px; padding-bottom: 3px" width="54%" align="center">
                    <input size="35" name="referrer_email" style="float: left; margin: 0px; padding: 0px"> </td>
                </tr>
                <tr style="margin: 0px; padding: 0px">
                    <td class="requiredLabel" style="width: 44%; vertical-align: top; text-align: center; font-weight: bold; margin: 0px; padding-left: 0px; padding-right: 20px; padding-top: 3px; padding-bottom: 3px">
                    Friend 1 Email:</td>
                    <td class="field" style="vertical-align: top; margin: 0px; padding-left: 0px; padding-right: 0px; padding-top: 3px; padding-bottom: 3px" width="54%" align="center">
                    <input size="35" name="f1email" style="float: left; margin: 0px; padding: 0px"> 
                    <tr style="margin: 0px; padding: 0px">
                    <td class="requiredLabel" style="width: 44%; vertical-align: top; text-align: center; font-weight: bold; margin: 0px; padding-left: 0px; padding-right: 20px; padding-top: 3px; padding-bottom: 3px">
                    Friend 2 Email:</td>
                    <td class="field" style="vertical-align: top; margin: 0px; padding-left: 0px; padding-right: 0px; padding-top: 3px; padding-bottom: 3px" width="54%" align="center">
                    <input size="35" name="f2email" style="float: left; margin: 0px; padding: 0px"> 
                    <tr style="margin: 0px; padding: 0px">
                    <td class="requiredLabel" style="width: 44%; vertical-align: top; text-align: center; font-weight: bold; margin: 0px; padding-left: 0px; padding-right: 20px; padding-top: 3px; padding-bottom: 3px">
                    Friend 3 Email:</td>
                    <td class="field" style="vertical-align: top; margin: 0px; padding-left: 0px; padding-right: 0px; padding-top: 3px; padding-bottom: 3px" width="54%" align="center">
                    <input size="35" name="f3email" style="float: left; margin: 0px; padding: 0px"> 
                    <tr style="margin: 0px; padding: 0px">
                    <td class="requiredLabel" style="width: 44%; vertical-align: top; text-align: center; font-weight: bold; margin: 0px; padding-left: 0px; padding-right: 20px; padding-top: 3px; padding-bottom: 3px">
                    Friend 4 Email:</td>
                    <td class="field" style="vertical-align: top; margin: 0px; padding-left: 0px; padding-right: 0px; padding-top: 3px; padding-bottom: 3px" width="54%" align="center">
                    <input size="35" name="f4email" style="float: left; margin: 0px; padding: 0px"> 
                    <tr style="margin: 0px; padding: 0px">
                    <td class="requiredLabel" style="width: 44%; vertical-align: top; text-align: center; font-weight: bold; margin: 0px; padding-left: 0px; padding-right: 20px; padding-top: 3px; padding-bottom: 3px">
                    Friend 5 Email:</td>
                    <td class="field" style="vertical-align: top; margin: 0px; padding-left: 0px; padding-right: 0px; padding-top: 3px; padding-bottom: 3px" width="54%" align="center">
                    <input size="35" name="f5email" style="float: left; margin: 0px; padding: 0px"> 

                     </td>
                </tr>
                <tr style="margin: 0px; padding: 0px">
                    <td style="margin: 0px; padding: 0px" align="center">&nbsp;</td>
                    <td style="margin: 0px; padding: 0px" width="54%" align="center">
                    <br style="margin: 0px; padding: 0px">
                    <input type="submit" name="btnsubmit" id="btnsubmit" value="&nbsp;&nbsp;&nbsp;&nbsp;Send email&nbsp;&nbsp;&nbsp;&nbsp;" style="float: left; margin: 0px; padding: 0px"></td>
                </tr>

        </table>
    </form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:16:39.417

你应该这样写你的代码：

```
<?php
   if(!isset($_POST['btnsubmit'])){
      //write your html form here
   }else{
     $to = ($_POST['referrer_email']);
     $from = "abcz@gmail.com";
     $subject = "Hello";
     $message = "abcasdfasdfa asdfasdf ";

     $headers = "MIME-Version: 1.0rn";
     $headers .= "Content-type: text/html; charset=iso-8859-1rn";
     $headers  .= "From: $from\r\n";

     if(mail($to, $subject, $message, $headers)){
        echo "MAIL SENT";
     }

   }
?> 
```

# iphone - label.layer.borderColor = .... 不工作（Xcode 4.3.2）

> ID：10974164
> 
> 赞同：6
> 
> 时间：2012-06-11T03:12:21.233
> 
> 标签：iphone, ios, xcode, uilabel

我在一个类中工作，该类是 UITableViewCell 的子类，并且在 .h 中声明了 firstLabel 和 secondLabel 属性，并且在 .m 中是 @synthesize。当我以编程方式格式化 UILabel 时，我尝试在 firstLabel 周围设置边框。根据这个问题给出的答案[，](https://stackoverflow.com/questions/2311591/how-to-draw-border-around-a-uilabel)我尝试在我的项目中做同样的事情。

```
firstLabel.layer.borderColor = [UIColor blackColor].CGColor; 
```

问题是在我输入 firstLabel.layer 后它无法识别它。并点击“esc”（获取完成列表）Xcode 什么都没有。问题是什么？

注意：如果我输入

```
firstLabel.textAlignment = UITextAlignmentCenter; 
```

它工作得很好并且表现如预期。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T03:21:16.727

您需要导入 QuartzCore 标头。 `#import <QuartzCore/QuartzCore.h>`

（并且不要忘记添加 QuartzCore 库，否则在尝试构建时会出现链接器错误）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T03:26:35.690

你设置边框宽度了吗？

像这样：

```
[firstLabel.layer setBorderWidth:1.0f]; 
```

# ios - 使用 SDWebImageDownloader 时 UITableView 闪烁

> ID：10974167
> 
> 赞同：1
> 
> 时间：2012-06-11T03:12:43.320
> 
> 标签：ios, uitableview, sdwebimage

我有一个带有自定义 uitableviewcell 的 uitableview；单元格由一个图像和几个标签组成 图像是使用这种方法远程下载的

```
 [SDWebImageDownloader downloaderWithURL:[NSURL URLWithString:url] delegate:self]; 
```

我使用上述方法而不是以下方法：[cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder. png"]];

（参考[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)）因为我需要在下载图像后进行一些后期处理。因为 SDWebImageDownloader 在图像完成加载时有一个回调方法，这就是我使用它的原因。

如果我做

```
 [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

[后期处理图片]

有可能我在完全下载之前对图像进行后处理，无论如何这不是问题，只是让你知道上下文

在做了一些研究之后，saome 说我应该取消加载请求......但我不知道这是否会有所帮助，而且我不知道如何区分我应该真正加载哪个以及应该取消哪些

我的问题是，当使用 SDWebImageDownloader 时，当滚动 uitableview 时，图像会闪烁，闪烁的方式是，您会看到图像缓慢加载并从上一个图像更改为另一个图像，最后它确实加载了正确的图像，但是不希望闪烁

似乎导致问题的原因是对 SDWebImageDownloader 的调用，而不是对我正在执行的图像的后处理导致延迟或闪烁，因为在 SDWebImageDownloader 回调中，如果我只是分配图像，闪烁仍然会发生。

我别无选择，只能使用 SDWebImageDownloader，因为我需要调整图像大小......谁能告诉我如何避免闪烁？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T20:32:05.917

自从更新`AFNetworking`库以来，我注意到有时会调用`setImageWithURL:`from`AFNetworking`而不是 from `SDWebImage`。

我通过使用`downloadWithURL:options:progress:completed:`from解决了这个问题`SDWebImageManager`。

我有一个`UITableView`（带有自定义单元格），我使用 Foursquare API 中的数据填充了它。该`setImageWithURL:`方法导致闪烁。在模拟器（LAN）和iPhone5（WiFi）上，它似乎闪烁。`imageView`但是在设备上切换到 2G 时，我注意到，在设置正确的图像之前，正在加载来自不同单元格的图像。

我从 切换`setImageWithURL:`到`downloadWithURL:options:progress:completed:`，首先设置一个占位符图像，然后在`downloadWithURL:options:progress:completed:`方法的完成块中设置图像。它变得更平滑，并解决了所有闪烁。

# html - 页面内容的页脚

> ID：10974169
> 
> 赞同：2
> 
> 时间：2012-06-11T03:13:31.920
> 
> 标签：html, css

我试图将脚放在页面底部。为此，我阅读了很多网站，所有这些网站都告诉我同样的情况。

完成上述操作后，我的页脚真的卡在了底部......但是......页面的内容被这个覆盖了！

我的 CSS 具有以下属性：

```
html, body {
  height: 100%;
}

body {
  margin: 0px;
  font-family: Arial;
  background-image: url("../img/bg2.jpg");
}

.geral {
    min-height:100%;
    position: relative;
}

.container {
  width: 900px;
}

.container img {
  width: 250px;
  float: left;
}

.container .btn_criar_conta {
  width: 100px;
  float: right;
}

.container .user_detail {
  width: 300px;
  float: right;
}

#topo_pagina {
  height: 110px;
}

.box_login_conteiner {
  width: 410px;
  text-align: left;
}

.box_login {
  width: 350px;
  min-height: 200px;
  background-color: white;
  font-family: Arial;
  font-size: 13px;
  text-align: right;
  padding: 10px;
  border: 1px white solid;
  border-radius: 0.5em;
  color: grey;
  box-shadow: lightgrey 0.0em 0.5em 0.9em;
  padding-right: 50px;
}

.box_login li {
  list-style: none;
}

.box_login a {
  color: blue;
  text-decoration: none;
}

.box_login a:hover {
  color: blue;
  text-decoration: underline;
}

.box_login input {
  border: 1px whitesmoke solid;
  border-radius: 0.5em;
  box-shadow: lightgrey 0.0em 0.1em 0.1em;
  height: 30px;
  width: 250px;
  padding: 5px;
  color: grey;
}

.box_login .img {
  border: none;
  width: 100px;
}

.box_login .btn_submit {
  border: 1px seagreen solid;
  border-radius: 2em;
  box-shadow: grey 0.0em 0.1em 0.1em;
  height: 30px;
  width: 100px;
  padding: 5px;
  color: white;
  background-color: seagreen;
}

.index_login {
  text-align: justify;
  float: right;
  width: 400px;
  color: #2b3856;
  font-family: Geneva;
}

.index_login img{
  text-align: right;
  width: 400px;
}

.index_login hr {
  background-color: lightblue;
  border: 0px;
}

.info_login {
  font-size: 11px;
  padding: 5px;
  background-color: lightgrey;
  border-radius: 0.5em;
  color: grey;
}

.info_login a {
  color: blue;
  text-decoration: none;
}

.info_login a:hover {
  color: blue;
  text-decoration: underline;
}

.box_registrar_conteiner {
  width: 430px;
  text-align: left;
}

.box_registrar {
  width: 430px;
  min-height: 200px;
  background-color: white;
  font-family: Arial;
  font-size: 13px;
  text-align: right;
  padding: 10px;
  border: 1px white solid;
  border-radius: 0.5em;
  color: grey;
  box-shadow: lightgrey 0.0em 0.5em 0.9em;
  padding-right: 50px;
}

.box_registrar li {
  list-style: none;
}

.box_registrar a {
  color: blue;
  text-decoration: none;
}

.box_registrar a:hover {
  color: blue;
  text-decoration: underline;
}

.box_registrar input {
  border: 1px whitesmoke solid;
  border-radius: 0.5em;
  box-shadow: lightgrey 0.0em 0.1em 0.1em;
  height: 30px;
  width: 250px;
  padding: 5px;
  color: grey;
}

.box_registrar .img {
  border: none;
  width: 100px;
}

.rodape {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 150px;
  background-color: grey;
  color: white;
  font-family: Geneva;
  font-size: 11px;
}

.rodape a {
  color: white;
  text-decoration: none;
}

.rodape a:hover {
  color: white;
  text-decoration: underline;
}

.rodape #menu {
  float: left;
  margin-right: 50px;
}

.container_footer {
  width: 900px;
  text-align: left;
} 
```

我的 HTML 是这样的：

```
<html>
    <head>
        <title>Site</title>
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style1.css">
    </head>
    <body>
        <div class="geral">
            <div id="topo_pagina">
                <div align="center">
                    <div class="container">
                        <br/>
                        <br/>
                        <a href="/"><img src="{{ STATIC_URL }}img/logo1.png"></a>

                        {% if user.is_authenticated %}
                            <div class="user_detail">
                                <br/>
                                Olá {{ user.first_name|capfirst }}! - <a href="/logout/">Logout</a>
                            </div>
                        {% else %}
                            <a href="/login/"><input type="image" src="{{ STATIC_URL }}img/btn_logar_conta.png" class="btn_criar_conta"></a>
                            <a href="/registrar/"><input type="image" src="{{ STATIC_URL }}img/btn_criar_conta.png" class="btn_criar_conta"></a>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div id="conteudo_pagina">
                <div align="center">
                    <div class="container">
                    {% block conteudo_pagina %}
                    {% endblock %}
                    </div>
                </div>
            </div>  
            <br clear="all">
            <div class="rodape">
                <div align="center">
                    <div class="container_footer">
                        <div id="menu">
                            <h4>Multiplikação</h4>
                            <a href="/login/">Acessar</a><br/>
                            <a href="/registrar/">Criar conta</a><br/>
                        </div>
                        <div id="menu">
                            <h4>Sobre a empresa</h4>
                            Quem somos<br/>
                            Nosso time<br/>
                            Trabalhe com a gente<br/>
                        </div>
                        <div id="menu">
                            <h4>Conectividade</h4>
                            Facebook<br/>
                            Twitter<br/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

有人可以帮助我吗？我真的不知道该尝试什么。=(

提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:16:45.580

这是一个 Fiddle 修改了您的标记以实现粘性页脚：

[http://jsfiddle.net/2MXvP/1/](http://jsfiddle.net/2MXvP/1/)

我使用的技术是这个：[http ://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

重大变化是：

*   该`.rodape`元素已在标记中移动，因此它是`.geral`.
*   `.rodape`具有与其高度相等的负上边距。
*   `.geral`有一个新的子元素 ，`.main`它的底部填充等于 的高度`.rodape`。

我可能也做了一些其他的 CSS 更改，但仅限于`.rodape`,`.geral`和`.main`.

如果您查看我在上面链接的[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)，您应该能够弄清楚它是如何工作的。该页面上有一些关于 IE 和 Opera 兼容性的注释，我没有在我的 Fiddle 中实现，我只在 Chrome 中进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:54:06.337

简单的：

> `position: absolute;`从您的 css 中删除（上面 css 的第 189 行）。

您的页脚覆盖内容的原因是因为它的定位是*绝对*的，因此将其排除在内容的正常流动之外。一旦你删除了上面提到的行，.rodape 将默认静态定位 - 然后它将考虑它之前的元素（例如#conteudo_pagina）并将其放置在它们之后（不覆盖它们）。

**你可能想知道的一件事：**

`<br clear="all">`使用*clear*，一个你不想在你的 css 中使用的不推荐使用的 HTML 属性。尝试使用 ABCaesar 建议的填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T03:30:53.827

听起来您希望页脚始终可见，但您不希望内容的最底部被它覆盖。如果是这种情况，您可以在 .geral 类中添加一个 padding-bottom 属性。

不幸的是，我不确定哪个是您的页脚，并且您的 CSS 中没有任何内容可以真正帮助我弄清楚，但无论如何，这里有一个示例，假设您的页脚高 200 像素：

```
.geral {padding-bottom:200px} 
```

应该给你确切的空间来查看页脚而不覆盖任何东西。

**编辑** 如果您希望它始终可见，但不掩盖文本，请从 .geral 中取出 .rodape 并将其放在 body 标记内。你的 html 现在应该是这样的：

```
<html>
    <head>
        <title>Site</title>
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style1.css">
    </head>
    <body>
        <div class="rodape">
             <!-- rodape content -->
        </div>
        <div class="geral">
             <!-- geral content -->
        </div>
    </body>
</html> 
```

将此样式添加到您的 CSS

```
.rodape {width:100%; height:200px; position:fixed;}
.geral {padding-bottom:200px;} 
```

我认为这会给你带来你想要的效果。

# android - 是否可以在 Android 上获得 SQL Server Reporting Services？

> ID：10974172
> 
> 赞同：1
> 
> 时间：2012-06-11T03:14:24.687
> 
> 标签：android, sql-server, reporting-services

我想创建一个 Android 应用程序，使用 SQL Server Reporting Services 显示来自 SQL Server 数据库的销售报告。是否可以将数据从 SQL Server 获取到 Android 应用程序中？如果不可能，有没有其他方法可以从 SQL Server 获取数据并将报告放入 Android 应用程序？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:30:38.753

从技术上讲，您无法获得“*在*Android 上运行的报告服务”，没有可与[Winforms ReportViewer](http://msdn.microsoft.com/en-us/library/ms251724%28v=vs.90%29)相媲美的原生 Android 组件 AFAIK 。

但是，您可以在 .NET 网站中使用[ReportViewer WebForms控件。](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms%28v=vs.100%29)您应该可以在 Android 浏览器上查看带有这些控件的网站。如果您使用 10.0.0.0 ReportViewer[浏览器兼容性](http://msdn.microsoft.com/en-us/library/ms251673%28v=vs.90%29)是不错的，我在我的 Galaxy S 上查看了一些成功的报告。

# .net - 远程属性不允许发布

> ID：10974173
> 
> 赞同：0
> 
> 时间：2012-06-11T03:14:28.893
> 
> 标签：.net, asp.net-mvc-3, linq, asp.net-ajax

有一个非常简单的博客帖子创建者，我正在尝试检查帖子的名称是否已经在使用中。Ajax 正确回发，但该页面不允许我提交，并且不会引发任何错误。如果我在 Create() 操作中设置断点，它们永远不会被击中。

**该模型：**

```
public class Post
{
    public int Id { get; set; }

    [Required]
    [Remote("CheckPostName","Home")]
    public string Name { get; set; }

    [Required]
    public string Author { get; set; }

    public DateTime Date { get; set; }

    [StringLength(400)]
    public string Content { get; set; }
} 
```

**阿贾克斯行动：**

```
public bool CheckPostName(string Name)
{
    bool result = db.Posts.Where(a => a.Name.Equals(Name)).Count() == 0;
    return result;
} 
```

**提交动作：**

```
[HttpPost]
    public ActionResult Create(Post thePost)
    {
        if (ModelState.IsValid)
        {
            db.Posts.Add(thePost);
            db.SaveChanges();

            return View();
        }
        return View(thePost);
    } 
```

**和视图：**

```
@using (Html.BeginForm()) {
@Html.ValidationSummary()
<fieldset>
    <legend>Post</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Author)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Author)
        @Html.ValidationMessageFor(model => model.Author)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Content)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Content)
        @Html.ValidationMessageFor(model => model.Content)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:56:46.730

确保从应该验证数据的 AJAX 控制器操作返回 JSON：

```
public ActionResult CheckPostName(string Name)
{
    bool result = db.Posts.Where(a => a.Name.Equals(Name)).Count() == 0;
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

请记住：控制器动作必须始终返回一个 ActionResult，否则它们不是控制器动作。

# ruby - 使用 haml 传递局部变量的最简单可能的部分语法

> ID：10974174
> 
> 赞同：2
> 
> 时间：2012-06-11T03:14:54.700
> 
> 标签：ruby, haml, partials

我是 Ruby/HAML 的新手，我正在尝试为我的简单需求简化部分语法。例如，我想创建一个将传递变量以输出以下 HTML 的部分：

```
<figure class="foo">
  <img src="path/to/img.png" />
  <figcaption>caption text here</figcaption>
</figure> 
```

我正在寻找一个帮助器来使部分语法接近于：

```
@(figure).foo {
  img: "path/to/img.png",
  caption: "caption text here"
} 
```

这么简单的语法可能吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:08:24.750

当然：

```
figure_helper(:foo, 'path/to/img.png', 'caption text here') 
```

然后在您的帮助文件中：

```
def figure_helper(cls='default_cls', img='rails.png', caption='uh oh! forgot caption!')
<<STMT
  <figure class="#{cls}">
    <img src="#{img}" />
    <figcaption>#{caption}</figcaption>
  </figure>
STMT
end 
```

注意：如果您不熟悉定义字符串的 here 语句语法，请确保结束`<<STMT`从第一列开始。

在 irb 中：

```
1.9.2p0 :016 > def figure_helper(cls='default_cls', img='rails.png', caption='uh oh! forgot caption!')
1.9.2p0 :017?>   <<STMT
1.9.2p0 :018">   <figure class="#{cls}">
1.9.2p0 :019">     <img src="#{img}" />
1.9.2p0 :020">     <figcaption>#{caption}</figcaption>
1.9.2p0 :021">   </figure>
1.9.2p0 :022"> STMT
1.9.2p0 :023?>   end
 => nil 
1.9.2p0 :025 > puts figure_helper(:foo, 'path/to/img.png', 'caption text here')
  <figure class="foo">
    <img src="path/to/img.png" />
    <figcaption>caption text here</figcaption>
  </figure>
 => nil 
```

# jdbc - Clojure java.jdbc 删除行

> ID：10974178
> 
> 赞同：4
> 
> 时间：2012-06-11T03:15:57.100
> 
> 标签：jdbc, clojure

在 clojure 中使用 java.jdbc 时，可以将 delete-rows 与复杂的 WHERE 语句一起使用。例子是

```
(delete-rows :blogs ["id=?" id]) 
```

我想要这样的东西：

```
(delete-rows :blogs ["id=?" id "user_id=?" user_id]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T03:33:16.503

```
(delete-rows :blogs ["id=? and user_id=?" id user_id]) 
```

# java - 为什么我不能通过标题栏拖动窗口？

> ID：10974180
> 
> 赞同：1
> 
> 时间：2012-06-11T03:16:25.637
> 
> 标签：java, swing, jpanel

所以我试图有一个可以通过标题栏拖动的窗口。由于它在另一个框架内，我需要手动执行此操作。这就是鼠标侦听器的代码。

```
titleBar.addMouseListener(new MouseAdapter() 
    {
        public void mousePressed(MouseEvent e)
        {
            currentMouseEvent = e;
            dragging = true;
        }
        public void mouseReleased(MouseEvent e)
        {
            dragging = false;
            currentMouseEvent = null;
        }
    }); 
```

这是更新循环的代码。（这是在另一个线程的while循环中）

```
if (dragging)
{
    try
    {
        setPosition(currentMouseEvent.getXOnScreen(), currentMouseEvent.getYOnScreen());
    }
    catch(NullPointerException e)
    {
        //do nothing
        Main.SoundSystem.fatalError();
    }
} 
```

我知道需要更改 setPosition 以跟踪鼠标在标题栏上的位置，但我想对此进行测试。问题是它会移动一次，然后在我拖动鼠标时不再移动。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T03:20:06.190

因为您不更新`currentMouseEvent`，所以您一直将窗口移动到按下鼠标的位置。

您将需要`MouseMotionListener`在拖动过程中获取新事件。

# java - 使用 JDOM 时出现 java.lang.VerifyError 异常

> ID：10974182
> 
> 赞同：0
> 
> 时间：2012-06-11T03:16:46.437
> 
> 标签：java, xml, jdom

请帮助我找出摆脱这种情况的方法，在使用 JDOM API 时，我正在使用

```
root.addContent(new Element("name").setText("Enlightenment")); 
```

在 XML 中添加元素的方法，但在运行时出现以下异常：

```
java.lang.VerifyError: (class: com/asiaone/web/common/A1BusinessXmlOperation, method: create signature: ()V) Incompat`enter code here`ible argument to function
        at org.apache.jsp._business_5F_iframe_5F_page._jspService(_business_5F_iframe_5F_page.java:281) 
```

使用运行时 JDOM 库编译文件后，出现以下异常，

```
java.lang.UnsupportedClassVersionError: com/asiaone/web/common/A1BusinessXmlOperation 
(Unsupported major.minor version 49.0)
    at java.lang.ClassLoader.defineClass0(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:539) 
```

但我检查了java版本：

```
java version "1.5.0_04"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_04-b05)
Java HotSpot(TM) Server VM (build 1.5.0_04-b05, mixed mode) 
```

即也很好。为什么现在发生这个错误？

`java.lang.LinkageError: LinkageError while defined class: com.asiaone.web.common.A1BusinessXmlOperation 由于：com/asiaone/web/common/A1BusinessXmlOperation 无法定义（不支持的major.minor 版本49.0） 这通常是由在类加载器层次结构中的多个位置定义一个类。其他潜在原因包括针对具有不兼容方法签名的类的较旧或较新版本进行编译。转储当前上下文类加载器层次结构：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:22:17.740

VerifyError 是运行时无效字节码的结果，通常是使用与编译时不同的库版本的结果。这通常是由于一个构建版本的方法签名与另一个不同，导致 JVM 尝试做它不能做的事情，因此它会抛出一个 VerifyError。

您很可能会收到 VerifyError，因为您编译时使用的 Apache 库与运行程序时使用的不同。使用您运行的相同库版本重新编译您的构建。

# hibernate - 我需要在 Tomcat 7 中包含什么才能使 javax.persistence 正常工作？

> ID：10974183
> 
> 赞同：0
> 
> 时间：2012-06-11T03:16:48.577
> 
> 标签：hibernate, jakarta-ee, tomcat, jpa

我正在尝试使用 Java 7 和 Tomcat 7 构建 JSF/Hibernate 应用程序。我已经安装了 Java SDK 和 JavaEE SDK，并将 javaee.jar 和 javaee-api-6.jar 复制到我的 Tomcat LIB 文件夹中。根据我对[这篇文章](https://stackoverflow.com/questions/2979968/cant-instantiate-javax-servlet-servletexception)和[这篇文章](https://stackoverflow.com/questions/8081234/absent-code-attribute-error-with-javaserverfaces)的理解，我应该拥有我需要的所有 jar，并且据我所知，我在此文件夹中没有其他资源冲突的 jar。

*   javaee.jar 文件包含看起来像 Maven pom 文件的内容，仅此而已。我不确定它的价值是什么。

*   我的 javaee-api-6 jar 大小约为 950k，包含我期望的所有 .class 文件。我使用的代码编译得很好，我在尝试部署到 Tomcat 时只看到一个错误。这些罐子取自 glassfish 装置。*奇怪的是 ServletException.class 文件只有 366 个字节。*

*   我在 Eclipse 中设置了 Tomcat，以便 IDE 在部署时“接管”Tomcat，而不是部署到某个插件文件夹（默认行为）。

*   到目前为止，我使用的唯一相关包是 javax.persistence 中的“Entity”“Id”和“GeneratedValue”。

*   我试过只使用并重`javaee-api-6.jar`命名它`javaee-api.jar`，`javaee.jar`没有任何变化。看起来文件名并不重要。

对 Glassfish lib 文件夹的深入检查确实显示了许多相关的 jar，但不是完整的 javaee 包，所以我无法将 Javaee-api-6.jar 移出并移入，它们不完整，我得到了一个类似的错误表明（我假设）找不到某个类的实现。

所以我的问题是：**我需要在 Tomcat 7 中包含什么才能使 javax.persistence 正常工作？**

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/servlet/ServletException
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$100(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.getDeclaredMethods0(Native Method)
at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
at java.lang.Class.privateGetPublicMethods(Unknown Source)
at java.lang.Class.privateGetPublicMethods(Unknown Source)
at java.lang.Class.privateGetPublicMethods(Unknown Source)
at java.lang.Class.getMethods(Unknown Source)
at org.apache.tomcat.util.IntrospectionUtils.findMethods(IntrospectionUtils.java:713)
at org.apache.tomcat.util.IntrospectionUtils.setProperty(IntrospectionUtils.java:272)
at org.apache.tomcat.util.IntrospectionUtils.setProperty(IntrospectionUtils.java:261)
at org.apache.tomcat.util.digester.SetPropertiesRule.begin(SetPropertiesRule.java:215)
at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1282)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
at org.apache.catalina.startup.Catalina.load(Catalina.java:554)
at org.apache.catalina.startup.Catalina.load(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:262)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:430) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T03:32:21.760

> *我需要在 Tomcat 7 中包含什么才能使 javax.persistence 正常工作？*

不是从 Oracle 下载的 Java EE SDK。它基本上包含 Oracle Glassfish 服务器。您似乎误解了 Java EE 到底是什么。

*   [Java EE 到底是什么？](https://stackoverflow.com/questions/7295096/what-exactly-is-java-ee)

我强烈建议您在尝试将 Tomcat 变形为 Glassfish 服务器时撤消您在 Tomcat 中所做的所有更改。或者，更好的是，从头开始。

您应该选择具体的 JPA 实现并安装它。有几个：

*   [休眠](http://www.hibernate.org/)
*   [EclipseLink](http://www.eclipse.org/eclipselink/)
*   [OpenJPA](http://openjpa.apache.org/)

每个都带有一个下载链接和体面的文档。休眠是最流行的。EclipseLink 是参考实现（因此在 Glassfish 的封面下使用）。OpenJPA 只是来自 Apache Software Foundation 的另一个。最终，将具体 JPA 实现的 JAR 文件放入`/WEB-INF/lib`webapp（因此不是 Tomcat 的`/lib`）。

# javascript - 在 Chrome 扩展程序中运行代码之前，如何等待 Twitter 趋势加载？

> ID：10974191
> 
> 赞同：1
> 
> 时间：2012-06-11T03:19:08.730
> 
> 标签：javascript, jquery, twitter, google-chrome-extension

我正在尝试为 Twitter 编写一个 Chrome 扩展程序，并且想稍微修改一下页面的布局。我已经尝试了很多东西并在谷歌上搜索，但无济于事。

我想在趋势和页脚之间添加一个 div。但是，Twitter 似乎使用 ajax 生成这些元素，因此当我的代码运行时它们不存在，即使在 $(document).ready 函数中也是如此。

我让它工作的唯一方法是将我的代码放在 setTimeout 函数中 1-2 秒。这似乎是一个相当不可靠的解决方案，因此我将非常感谢任何有关此问题的帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:33:27.877

这样做的方法是创建一个背景页面，然后使用 `chrome.extension.getBackgroundPage().` ajax 请求完成后调用它，您可以调整您的弹出页面。如果您必须将参数发送到后台页面，那么您必须像这样将侦听器添加到后台页面：

```
================
chrome.extension.sendRequest({greeting: "hello"}, function(response) {
  console.log(response.farewell);
});

===============
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
          sendResponse({farewell: "goodbye"});
  }); 
```

有关消息传递的更多信息，请参见：[消息传递](http://code.google.com/chrome/extensions/messaging.html)。

如果你真的不想做这一切，你可以通过将参数设置为 false 来同步调用使用 ajax 请求。

```
xmlhttp.open("GET","url",false); 
```

然而，这不是一个好的做法，我强烈建议不要这样做。希望这能解决您的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:12:23.563

在每个 AJAX 请求之后检查是否有一些 DOM 元素并不比每 1-2 秒检查一次`setTimeout`（就像你做的那样）好多少。

更好的方法是使用[DOMNodeInserted](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)事件。如果您设置正确（将其添加到正确的元素），每当您等待的元素插入 DOM 时，您都会收到通知。事件被触发后记得删除它（`removeEventListener`），因为突变事件以其[性能问题](https://developer.mozilla.org/en/DOM/Mutation_events)而闻名。

# html - gae静态目录html

> ID：10974192
> 
> 赞同：1
> 
> 时间：2012-06-11T03:19:39.457
> 
> 标签：html, google-app-engine

我正在尝试使用 Google App Engine 的 app.yaml 在请求时自动提供 *.html 文件。所以我的文件结构中有以下内容：

```
-myapp
    -html (folder)
        -index.html
    -index.py 
```

在我的 app.yaml 我有：

```
handlers:
-url: /*\.html
static_dir: html

-url: /.*
script: index.app 
```

但是，当我在浏览器 localhost:8080/index.html 上运行它时，我得到一个 404 Not Found。为什么它不路由到我的 index.html 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:31:37.493

根据您的确切需求，您可以通过多种方式执行此类操作。如果您想要的只是静态内容而没有任何更高级的功能，则可以使用添加的正则表达式，例如 @hyperslug。

您可以像这样设置网址：

```
- url: /
  static_files: static/html/index.html
  upload: static/html/index.html
  secure: never 
```

如果这是您想要的，它允许您在单个文件的基础上设置页面安全性。或者您可以将正则表达式与安全性结合起来，例如：

```
- url: /(.*\.(gif|png|jpg))
  static_files: \1
  upload: (.*\.(gif|png|jpg))
  secure: always 
```

请记住，如果您与公共搜索引擎共享页面，则将 http/https 视为 2 个不同的链接。以及有无尾随 /。

# window.open - 为什么window.open总是弹出IE

> ID：10974195
> 
> 赞同：1
> 
> 时间：2012-06-11T03:20:13.240
> 
> 标签：window.open

`window.open()`为什么window.open总是弹出IE，我设置firefox是默认浏览器，但还是弹出IE？为什么会这样？如何用 firefox 或 chrome 弹出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T03:27:38.517

如果你的父窗口是IE，那么它用IE打开，当你用chrome调用它时，它会弹出chrome窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T03:22:50.347

这是因为 IE 被定义为您的默认浏览器。

# android - 带有一组未格式化为 %d.jpg 的图像文件的 ffmpeg

> ID：10974196
> 
> 赞同：4
> 
> 时间：2012-06-11T03:20:13.857
> 
> 标签：android, ffmpeg

我正在使用 ffmpeg 将一组 jpg 编译成视频。有很多关于此的文章，但似乎唯一的方法是将图像命名为连续的填充数字，例如`0001.jpg`，`0002.jpg`...

[ffmpeg 文档](http://ffmpeg.org/ffmpeg.html#image2-2)指出可以使用其他类型的模式，例如捕获`%*.jpg`所有`*.jpg`文件，但我自己可以使用的唯一模式是`%0Nd`-type 模式。[手册页](http://linux.die.net/man/1/ffmpeg)仅提及该类型。

我真的很想让 ffmpeg 使用一组具有任意名称的图像。它将大大简化我的应用程序，使缩略图和元数据在插入和删除图像等时更容易保持同步。创建链接不是一种选择，因为我正在使用 Android。有没有办法做到这一点？

我也愿意修改 ffmpeg 源代码或使用 C api 来让它做我想做的事情，但我无法在代码中找到合适的位置来做这件事，或者 C api 的适当文档。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:24:16.300

[***image2 de***](http://ffmpeg.org/ffmpeg.html#image2-1) [muxer](http://ffmpeg.org/ffmpeg.html#image2-1)的[当前文档](http://ffmpeg.org/ffmpeg.html#image2-1)*（与您链接的 muxer 不同！）建议名称只有两种可能性：*

 **   文件名模式包含“ `%d`”或“ `%0Nd`”，并且帧按顺序编号，第一帧编号不超过4。
*   `%d`通过指定不带“ ”模式的名称，可以将单个图像用作输入。

我认为短期内不会支持任意命名的帧文件作为输入，因为这是一种不寻常的情况；大多数人关心他们的帧的顺序，最简单的排序方法是使用序列号。

也就是说，您可能会查看可能适用于您的目的的[concat 输入协议。](http://ffmpeg.org/ffmpeg.html#concat)不过请注意，我现在无法在简短的测试中连接几张图像，因此它可能仅限于字面上可连接的格式，例如`mpg`.*

# java - 如何确保在我的配置开始返回 bean 之前将资源注入到我的配置中？

> ID：10974198
> 
> 赞同：1
> 
> 时间：2012-06-11T03:20:23.107
> 
> 标签：java, spring, configuration, annotations

我正在尝试定义一个 bean，它是我使用 @Component 注释配置的 bean 列表。我正在使用弹簧 3.1。

我的@Configuration 类看起来像

```
@Configuration
public class ReferenceDataConfig {
    private ResourceA resourceA;

    @Resource
    private ResourceB resourceB;

    @Resource
    private ResourceC resourceC;

    @Resource
    private ResourceD resourceD;

    @Bean (name = "myResourceList")
    public List<MyResource> getResourceLst() {
        return Arrays.asList(
                resourceA
                , resourceB
                , resourceC
                , resourceD
        );
    }

    @Resource  (name = "resourceA")
    public void setResourceA(ResourceA resourceA) {
        this.resourceA = resourceA;
    } 
```

我发现在初始化任何资源之前调用了 getResourceLst。当我添加 setResourceA 方法时，我可以看到它最终会被调用，但是当它被调用时为时已晚。myResourceList bean 已经创建。

我应该如何处理这个问题？

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:11:54.260

根据您要执行的操作，解决方案可能比您想象的要简单。

如果`List<MyResource>`应该包含所有类型的 bean `MyResource`，那么您不必为列表声明单独的 bean。您可以像注入任何其他 bean 一样注入列表，Spring 将收集`MyResource`它在应用程序上下文中找到的所有类型的 bean，并将它们全部作为`List<MyResource>`对象注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:59:23.573

我认为 Spring 中可能存在错误。我收集了我应该工作的东西，但是以下解决方法对我有用：

```
@Configuration
public class ReferenceDataConfig {
    @Bean (name = "myResourceList")
    public List<MyResource> getResourceLst(ResourceA resourceA, ResourceB resourceB, ResourceC resourceC, ResourceD resourceD) {
        return Arrays.asList(
                resourceA
                , resourceB
                , resourceC
                , resourceD
        );
    } 
```

# objective-c - 将键的值插入 NSMutableArray

> ID：10974204
> 
> 赞同：4
> 
> 时间：2012-06-11T03:21:12.133
> 
> 标签：objective-c, arrays, dictionary

我认为这对您来说可能是一个非常简单的问题。

但是我搜索了很多，不知道是我很傻还是我使用了错误的类（`NSMutableArray`）。

我想为特定键添加一个对象，以便以后可以检索它。

例如：

```
NSMutableArray *grisOcurrencias = [[NSMutableArray alloc] init];

[grisOcurrencias setValue:ocurrencia forKey:[NSString stringWithFormat: @"%f", pixelVal]]; 
```

但是如果我执行以下操作，则数组不会插入数组中：

```
[grisOcurrencias addObject: ocurrencia] 
```

对象被插入。

难道我做错了什么？

其他...我想通过它的键恢复对象，我应该使用什么方法？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T03:22:32.117

你在找`NSMutableDictionary`，不是`NSMutableArray`。字典基于键存储对象，而数组基于索引存储对象。

```
NSMutableDictionary *dict = [NSMutableDictionary dictionary];

[dict setObject:something forKey:@"Some Key"];

// ... and later ...

id something = [dict objectForKey:@"Some Key"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T03:23:02.970

你想使用一个`NSDictionary`.

```
NSMutableDictionary *grisOcurrencias = [[NSMutableDictionary alloc] init];

[grisOcurrencias setObject:ocurrencia forKey:[NSString stringWithFormat: @"%f", pixelVal]]; 
```

然后检索对象：

```
id object = [grisOcurrencias objectForKey:[NSString stringWithFormat: @"%f", pixelVal]]; 
```

数组是项目的有序集合，其中每个项目都有一个整数索引。字典是对象的集合，每个对象都是根据键设置和检索的，就像真正的字典一样，键是单词，值（对象）是定义。

# python - 在python中递归实现“最小硬币数”

> ID：10974206
> 
> 赞同：3
> 
> 时间：2012-06-11T03:21:33.317
> 
> 标签：python, algorithm, dynamic-programming

这个问题和[这里](https://stackoverflow.com/questions/4247662/the-minimum-number-of-coins-the-sum-of-which-is-s)问的一样。

*给定一个硬币列表，它们的值 (c1, c2, c3, ... cj, ...) 和总和 i。找到总和为 i 的最小硬币数量（我们可以使用任意数量的一种类型的硬币），或者报告不可能以总和为 S 的方式选择硬币。*

我昨天刚接触到动态编程，我试图为它编写代码。

```
# Optimal substructure: C[i] = 1 + min_j(C[i-cj])
cdict = {}
def C(i, coins):

    if i <= 0:
        return 0

    if i in cdict:
        return cdict[i]
    else:
        answer = 1 + min([C(i - cj, coins) for cj in coins])
        cdict[i] = answer
        return answer 
```

这里，C[i] 是金额“i”的最优解。并且可用的硬币是程序的 {c1, c2, ... , cj, ...}，我增加了递归限制以避免最大递归深度超出错误。但是，这个程序只给出了正确的答案，当解决方案不可能时，它并不表明这一点。

**我的代码有什么问题以及如何纠正它？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T04:40:28.017

这是一个很好的算法问题，但老实说，我认为您的实现不正确，或者可能是我不理解您的函数的输入/输出，对此我深表歉意。

这是您的实施的修改版本。

```
def C(i, coins, cdict = None):
    if cdict == None:
        cdict = {}
    if i <= 0:
        cdict[i] = 0
        return cdict[i]
    elif i in cdict:
        return cdict[i]
    elif i in coins:
        cdict[i] = 1
        return cdict[i]
    else:
        min = 0
        for cj in coins:
            result = C(i - cj, coins)
            if result != 0:
                if min == 0 or (result + 1) < min:
                    min = 1 + result
        cdict[i] = min
        return cdict[i] 
```

这是我解决类似问题的尝试，但这次返回了一个硬币列表。我最初从一个递归算法开始，它接受一个总和和一个硬币列表，如果找不到这样的配置，它可能会返回一个包含最少硬币数量的列表或 None 。

```
def get_min_coin_configuration(sum = None, coins = None):
if sum in coins: # if sum in coins, nothing to do but return.
    return [sum]
elif max(coins) > sum: # if the largest coin is greater then the sum, there's nothing we can do.
    return None
else: # check for each coin, keep track of the minimun configuration, then return it.
    min_length = None
    min_configuration = None
    for coin in coins:
        results = get_min_coin_configuration(sum = sum - coin, coins = coins)
        if results != None:
            if min_length == None or (1 + len(results)) < len(min_configuration):
                min_configuration = [coin] + results
                min_length = len(min_configuration)
    return min_configuration 
```

好的，现在让我们看看我们是否可以通过使用动态编程（我称之为缓存）来改进它。

```
def get_min_coin_configuration(sum = None, coins = None, cache = None):
if cache == None: # this is quite crucial if its in the definition its presistent ...
    cache = {}
if sum in cache:
    return cache[sum]
elif sum in coins: # if sum in coins, nothing to do but return.
    cache[sum] = [sum]
    return cache[sum]
elif max(coins) > sum: # if the largest coin is greater then the sum, there's nothing we can do.
    cache[sum] = None
    return cache[sum]
else: # check for each coin, keep track of the minimun configuration, then return it.
    min_length = None
    min_configuration = None
    for coin in coins:
        results = get_min_coin_configuration(sum = sum - coin, coins = coins, cache = cache)
        if results != None:
            if min_length == None or (1 + len(results)) < len(min_configuration):
                min_configuration = [coin] + results
                min_length = len(min_configuration)
    cache[sum] = min_configuration
    return cache[sum] 
```

现在让我们运行一些测试。

```
assert all([ get_min_coin_configuration(**test[0]) == test[1] for test in
[({'sum':25,  'coins':[1, 5, 10]}, [5, 10, 10]),
 ({'sum':153, 'coins':[1, 5, 10, 50]}, [1, 1, 1, 50, 50, 50]),
 ({'sum':100, 'coins':[1, 5, 10, 25]}, [25, 25, 25, 25]),
 ({'sum':123, 'coins':[5, 10, 25]}, None),
 ({'sum':100, 'coins':[1,5,25,100]}, [100])] ]) 
```

如果这个测试不够健壮，你也可以这样做。

```
import random
random_sum = random.randint(10**3, 10**4)
result = get_min_coin_configuration(sum = random_sum, coins = random.sample(range(10**3), 200))
assert sum(result) == random_sum 
```

有可能没有这样的硬币组合等于我们的 random_sum，但我相信它不太可能......

我确信那里有更好的实现，我试图强调可读性而不是性能。祝你好运。

**更新** 了之前的代码有一个小错误，它假设检查 min coin 而不是 max，重新编写了符合 pep8 的算法，并`[]`在找不到组合而不是`None`.

```
def get_min_coin_configuration(total_sum, coins, cache=None):  # shadowing python built-ins is frowned upon.
    # assert(all(c > 0 for c in coins)) Assuming all coins are > 0
    if cache is None:  # initialize cache.
        cache = {}
    if total_sum in cache:  # check cache, for previously discovered solution.
        return cache[total_sum]
    elif total_sum in coins:  # check if total_sum is one of the coins.
        cache[total_sum] = [total_sum]
        return [total_sum]
    elif min(coins) > total_sum:  # check feasibility, if min(coins) > total_sum
        cache[total_sum] = []     # no combination of coins will yield solution as per our assumption (all +).
        return []
    else:
        min_configuration = []  # default solution if none found.
        for coin in coins:  # iterate over all coins, check which one will yield the smallest combination.
            results = get_min_coin_configuration(total_sum - coin, coins, cache=cache)  # recursively search.
            if results and (not min_configuration or (1 + len(results)) < len(min_configuration)):  # check if better.
                min_configuration = [coin] + results
        cache[total_sum] = min_configuration  # save this solution, for future calculations.
    return cache[total_sum]

assert all([ get_min_coin_configuration(**test[0]) == test[1] for test in
             [({'total_sum':25,  'coins':[1, 5, 10]}, [5, 10, 10]),
              ({'total_sum':153, 'coins':[1, 5, 10, 50]}, [1, 1, 1, 50, 50, 50]),
              ({'total_sum':100, 'coins':[1, 5, 10, 25]}, [25, 25, 25, 25]),
              ({'total_sum':123, 'coins':[5, 10, 25]}, []),
              ({'total_sum':100, 'coins':[1,5,25,100]}, [100])] ]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:37:16.130

就像评论说的那样，你需要在 when 时返回一个足够大的值`i < 0`，这样它就不会被你`min`这样选择：

```
cdict = {}
def C(i, coins):

    if i == 0:
        return 0

   if i < 0:
        return 1e100    # Return infinity in ideally

    if i in cdict:
        return cdict[i]
    else:
        answer = 1 + min([C(i - cj, coins) for cj in coins])
        cdict[i] = answer
    return answer 
```

现在只要函数返回 1e100，就意味着无法解决。

例如：

```
$ python2 coins.py 13555 1 5 9
1507  coins
$ python2 coins.py 139 1 5 9
19  coins
$ python2 coins.py 139  5 9
19  coins
$ python2 coins.py 13977  5 9
1553  coins
$ python2 coins.py 13977   9
1553  coins
$ python2 coins.py 139772   9
1e+100  coins 
```

用法：

```
python2 coins.py <amount> <coin1> <coin2> ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T18:01:59.573

这是一个有趣的方法。有点hack，但这就是为什么它很有趣。

```
 import math

    def find_change(coins, value):
        coins = sorted(coins, reverse=True)
        coin_dict = {}
        for c in coins:
            if value % c == 0:
                coin_dict[c] = value / c
                return coin_dict
            else:
                coin_dict[c] = math.trunc(value/ float(c))
                value -= (c * coin_dict[c])

    coins = [1, 5, 10, 25]
    answer = find_change(coins, 69)
    print answer
    [OUT]: {25: 2, 10: 1, 5: 1, 1: 4} 
```

下面是带有边缘保护的注释的相同解决方案

```
 import math
    def find_change(coins, value):
        '''
        :param coins: List of the value of each coin [25, 10, 5, 1]
        :param value: the value you want to find the change for ie; 69 cents
        :return: a change dictionary where the key is the coin, and the value is how many times it is used in finding the minimum change
        '''
        change_dict = {}  # CREATE OUR CHANGE DICT, THIS IS A DICT OF THE COINS WE ARE RETURNING, A COIN PURSE
        coins = sorted(coins, reverse=True)  # SORT COINS SO WE START LOOP WITH BIGGEST COIN VALUE
        for c in coins:
            for d in coins:     # THIS LOOP WAS ADDED BY A SMART STUDENT:  IE IN THE CASE OF IF THERE IS A 7cent COIN AND YOU ARE LOOKING FOR CHANGE FOR 14 CENTS, WITHOUT THIS D FOR LOOP IT WILL RETURN 10: 1, 1: 4
                if (d != 1) & (value % d == 0):
                    change_dict[d] = value / d
                    return change_dict
            if value % c == 0:      # IF THE VALUE DIVIDED BY THE COIN HAS NO REMAINDER,  # ie, if there is no remainder, all the neccessary change has been given  # PLACE THE NUMBER OF TIMES THAT COIN IS USED IN THE change_dict  # YOU ARE FINISHED NOW RETURN THE change_dict
                change_dict[c] = value / c
                return change_dict
            else:
                change_dict[c] = math.trunc(value/ float(c))        # PLACE THAT NUMBER INTO OUR coin_dict  # DIVIDE THE VALUE BY THE COIN, THEN GET JUST THE WHOLE NUMBER  # IE 69 / 25.0 = 2.76  # math.trunc(2.76) == 2    # AND THAT IS HOW MANY TIMES IT WILL EVENLY GO INTO THE VALUE,
                amount = (c * change_dict[c])  # NOW TAKE THE NUMBER OF COINS YOU HAVE IN YOUR  UPDATE THE VALUE BY SUBTRACTING THE c * TIME NUMBER OF TIMES IT WAS USED    # AMOUNT IS HOW MUCH CHANGE HAS BEEN PUT INTO THE CHANGE DICT ON THIS LOOP  # FOR THE CASE OF 69, YOU GIVE 2 25CENT COINS, SO 2 * 25 = 50, 19 = 69 - 50
                value = value - amount              # NOW, UPDATE YOUR VALUE, SO THE NEXT TIME IT GOES INTO THIS LOOP, IT WILL BE LOOKING FOR THE MIN CHANGE FOR 19 CENTS...

    coins = [1, 5, 10, 25]
    answer = find_change(coins, 69)
    print answer
    [OUT]: {25: 2, 10: 1, 5: 1, 1: 4}
    edge_case_coins = [1, 7, 10, 25]
    edge_case_answer = find_change(coins, 14)
    print edge_case_answer
    [OUT]: {7: 2} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T04:43:39.070

这是用于找零的算法的递归且*非常*`V`低效的实现，其中是硬币列表和`C`目标金额：

```
def min_change(V, C):
    def min_coins(i, aC):
        if aC == 0:
            return 0
        elif i == -1 or aC < 0:
            return float('inf')
        else:
            return min(min_coins(i-1, aC), 1 + min_coins(i, aC-V[i]))
    return min_coins(len(V)-1, C) 
```

这是同一算法的动态编程版本：

```
def min_change(V, C):
    m, n = len(V)+1, C+1
    table = [[0] * n for x in xrange(m)]
    for j in xrange(1, n):
        table[0][j] = float('inf')
    for i in xrange(1, m):
        for j in xrange(1, n):
            aC = table[i][j - V[i-1]] if j - V[i-1] >= 0 else float('inf')
            table[i][j] = min(table[i-1][j], 1 + aC)
    return table[m-1][n-1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-03T03:09:20.600

这是一个使用 while 循环的方法。该算法非常简单。您首先使用最大的硬币来支付这笔钱。如果你知道你会过去，你会切换到下一个较小的硬币并重复直到钱为 0。这段代码的优点是，虽然最坏情况的运行时间更高（我认为它是 m*n（m 是列表的大小，而n 是 while 中的迭代），代码要简单得多。

我假设没有价值 0 的硬币，总是有价值 1 的硬币。当没有价值 1 时，该函数将给出价格下最佳硬币数量的答案。

```
def find_change(coins, money):
    coins = sorted(coins, reverse=True)
    coincount = 0

    for coin in coins:
        while money >= coin:
            money = money - coin
            coincount += 1

    return coincount 
```

我试图想到一个不起作用的极端情况（它会溢出任何具有 0 值硬币的列表）但想不出一个。

# magento - 在 Magento 的 CMS 页面中插入 T 恤设计师块代码

> ID：10974211
> 
> 赞同：0
> 
> 时间：2012-06-11T03:22:33.440
> 
> 标签：magento

当我通过 Magento connect 安装 magento shirtdesigner 模块时，它显示安装成功。我觉得还可以。我的版本是ver。1.7.0.0

我是 Magento 的新手。我不知道究竟是哪个页面调用 CMS 页面？在管理面板中，对于 Shirtnetwork 配置，我收到一条消息，例如“要使用 shirtdesigner，请在您的 CMS 页面中放置以下文本：

`{{block type="Aggrosoft_Shirtnetwork/shirtdesigner" name="snw_designer" template="shirtnetwork/shirtdesigner.phtml"}}`.

我将在哪个页面插入此代码？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:17:08.020

您可以将其放在您喜欢的任何 CMS 页面中。然后，当您访问前端的 CMS 页面时，应该会出现“shirtdesigner”。

# java - 批处理listEntry使用java插入谷歌电子表格

> ID：10974212
> 
> 赞同：3
> 
> 时间：2012-06-11T03:22:45.580
> 
> 标签：java, gdata, google-sheets

我正在尝试将批处理数据插入谷歌电子表格。用于测试目的。我在电子表格文件 (F1) 中插入了一个工作表 ( W1 )。我正在尝试将所有数据从 w1 复制到文件 (F2) 中的工作表 (W2) 中。请帮忙。

这是我的代码：

```
SpreadsheetService service = ServiceFactory.getService();
    metafeedUrl = new URL(Constants.SPREADSHEET_URL);
    /*
     * Get files first
     */
    SpreadsheetFeed feed = service.getFeed(metafeedUrl, SpreadsheetFeed.class);
    List<SpreadsheetEntry> myFiles = feed.getEntries();
    /*
     * loop through the files and get your required file
     */
    SpreadsheetEntry originalFile = null;
    SpreadsheetEntry newFile = null;
    WorksheetEntry workSheet = null;

    for(SpreadsheetEntry file : myFiles){
        if(file.getTitle().getPlainText().equalsIgnoreCase(originalSpreadSheet)){
            originalFile = file;

            List<WorksheetEntry> worksheets = file.getWorksheets();

            for(WorksheetEntry worksheet : worksheets){
                    if(worksheet.getTitle().getPlainText().equals(worksheetName)){
                        workSheet = worksheet;
                    }
            }
        }

        if(file.getTitle().getPlainText().equalsIgnoreCase(newSpreadSheet)){
            newFile = file;
        }

    }

    if(!(originalFile == null || newFile == null || workSheet == null)){

        /*
         * Insert a new work sheet in new file.
         */
        WorksheetEntry newEntry = service.insert(newFile.getWorksheetFeedUrl(), workSheet);
        /*
         * Get all the rows from old work sheet
         */
        URL listFeedUrl = workSheet.getListFeedUrl();
        ListQuery query = new ListQuery(listFeedUrl);
        query.setReverse(false);
        ListFeed listFeed = service.query(query, ListFeed.class);
        List<ListEntry> entries = listFeed.getEntries();
        /*
         * Batch update in the new work sheet
         */
        ListFeed batchRequest = new ListFeed();
        for(ListEntry entry : entries){
            BatchUtils.setBatchId(entry, entry.getId());
            BatchUtils.setBatchOperationType(entry, BatchOperationType.UPDATE);
            batchRequest.getEntries().add(entry);
            System.err.println("Adding entry " + entry.toString());
        }

        FeedURLFactory urlFactory = FeedURLFactory.getDefault();
        URL list_FeedUrl = urlFactory.getListFeedUrl(newFile.getKey(), newEntry.getId(), "private", "full");
        System.err.println("URL " + list_FeedUrl);
        ListFeed list_Feed = service.getFeed(list_FeedUrl, ListFeed.class);
        // Error at above line
        Link batchLink = list_Feed.getLink(Link.Rel.FEED_BATCH, Link.Type.ATOM);
        System.err.println("Link " + batchLink);

        ListFeed batchResponse = service.batch(new URL(batchLink.getHref()), batchRequest);

         boolean isSuccess = true;
         for (ListEntry entry : batchResponse.getEntries()) {
           String batchId = BatchUtils.getBatchId(entry);
           if (!BatchUtils.isSuccess(entry)) {
             isSuccess = false;
             BatchStatus status = BatchUtils.getBatchStatus(entry);
             System.out.printf("%s failed (%s) %s", batchId, status.getReason(), status.getContent());
           }
         }
         System.err.println("ALL OK"); 
```

}

我收到以下异常：

```
 com.google.gdata.util.InvalidEntryException: Bad Request
Invalid query parameter value for grid-id.

    at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:594)
    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:563)
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:552)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:530)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:535)
    at com.google.gdata.client.Service.getFeed(Service.java:1135)
    at com.google.gdata.client.Service.getFeed(Service.java:998)
    at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:631)
    at com.google.gdata.client.Service.getFeed(Service.java:1017) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:18:01.077

讨厌给出坏消息，但**不可能**`ListFeed`只使用 ,来进行批量请求`CellFeed`。查看[文档](https://developers.google.com/google-apps/spreadsheets/#updating_multiple_cells_with_a_batch_request)以了解如何对`CellFeed`.

# android - 如何在 Android 中构建此布局？

> ID：10974216
> 
> 赞同：3
> 
> 时间：2012-06-11T03:23:06.853
> 
> 标签：android

我找到了 Fedor 的代码并在我的项目中实现了它。唯一的区别是我的应用程序没有列表视图。

我希望显示器看起来像这样：

![在此处输入图像描述](../Images/e293114dac3aee0f6bf2b5cf3cf8f363.png)

我怎样才能做到这一点？

ImageAdapter.class

```
public class ImageAdapter extends BaseAdapter {
private Activity activity;
// private Context context;
private ArrayList<HashMap<String, String>> data;
// private int mThumbIds = (R.drawable.stub);
private static LayoutInflater inflat = null;
public Image image;

public ImageAdapter(Activity ac, ArrayList<HashMap<String, String>> d) {
    this.activity = ac;
    this.data = d;
    inflat = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    image = new Image(activity);
}

public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View view = convertView;
    if (convertView == null) {
        view = inflat.inflate(R.layout.items, null);
    }

    ImageView images = (ImageView) view.findViewById(R.id.item);
    HashMap<String, String> imageMap = new HashMap<String, String>();
    imageMap = data.get(position);
    images.setImageResource(R.id.item);

    image.DisplayImage(imageMap.get("SOURCE"), images);
    return view;
} 
```

MoiNhatAct.class

```
public class MoiNhatAct extends Activity {

private static String url1 = "http://beta.photo.tamtay.vn/service/detail/getPhotoNews/4";

GridView g;
ImageAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stubs
    super.onCreate(savedInstanceState);
    setContentView(R.layout.aaa);

    ArrayList<HashMap<String, String>> imageList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url1);

    JSONObject result;
    try {
        result = json.getJSONObject("result");
        String data_time = result.getString("Date time");
        String count = result.getString("Count");
        String page = result.getString("page");

        JSONArray ketqua = result.getJSONArray("ketqua");
        for (int i = 0; i < ketqua.length(); i++) {
            JSONObject j = ketqua.getJSONObject(i);
            String id = j.getString("id");
            String name = j.getString("name");
            String thumb = j.getString("thumb");
            String source = j.getString("source");
            JSONArray sizeArray = j.getJSONArray("size");
            String size = sizeArray.getString(0);

            HashMap<String, String> map = new HashMap<String, String>();
            map.put("DATE_TIME", data_time);
            map.put("COUNT", count);
            map.put("PAGE", page);
            map.put("ID", id);
            map.put("NAME", name);
            map.put("SOURCE", source);
            map.put("SIZE", size);

            imageList.add(map);

        }

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    g = (GridView) findViewById(R.id.gridAvarta);
    adapter = new ImageAdapter(this, imageList);
    g.setAdapter(adapter);

    g.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            Intent i = new Intent(getApplicationContext(),
                    ImageFullAct.class);
            // passing array index
            i.putExtra("id", position);
            startActivity(i);
        }
    });

    Button clear = (Button) findViewById(R.id.clearCache);
    clear.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            adapter.image.clearCache();
            adapter.notifyDataSetChanged();
        }
    });
}

public void onDestroy() {
    g.setAdapter(null);
    super.onDestroy();
} 
```

}

这段代码我可以使用 Gridview 显示图像。 ![在此处输入图像描述](../Images/19cb764ef513121f226170132523ea00.png)

但我可以自定义它看起来像下面的布局

现在我需要一个自定义布局和显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T04:02:10.630

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="5" >
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="2"/>

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="2" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="4" >
        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="1" />

        <ImageView
            android:id="@+id/imageView5"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <ImageView
            android:id="@+id/imageView6"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

        <ImageView
            android:id="@+id/imageView7"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="5" >

        <ImageView
            android:id="@+id/imageView8"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="2" />

        <ImageView
            android:id="@+id/imageView9"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

        <ImageView
            android:id="@+id/imageView10"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="2" />
    </LinearLayout>
</LinearLayout>

     for(int i = 0 ; i < 10 ; i++){
            try {
                int id = (Integer) R.id.class.getField("imageView"+(i+1)).get(null);
                ImageView imageView = (ImageView) findViewById(id);
                imageView.setImageBitmap(imageAdaper.getImage(i));
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SecurityException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchFieldException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
     } 
```

# printing - Clojure：在 OSX 上替代 a2ps？

> ID：10974218
> 
> 赞同：3
> 
> 时间：2012-06-11T03:23:30.330
> 
> 标签：printing, clojure

## 语境

有时，我喜欢在纸上而不是在屏幕上阅读代码（这样我就可以在上面涂鸦/书写。）在 linux 上，我只使用 a2ps。

## 问题

目前，我在 OSX 上。获取一堆 *.clj 文件并将它们转换为可读的*.pdf/* .ps 文件的好工具是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:40:09.743

我不确定您对可读性的定义是什么，但您可以使用[Pygments](http://pygments.org/)将代码转换为语法高亮的 HTML，然后直接打印出来或使用[Pandoc](http://johnmacfarlane.net/pandoc/)等其他工具将其转换为 PDF。（您也可以使用 Pygments 转换为 LaTeX，然后再转换为 PDF。）

此外，一些快速的谷歌搜索出现了[这篇博](http://boklee.blogspot.com/2012/05/enscript-alternative-to-a2ps-in-os-x.html)文，这表明可以以某种方式安装 GNU 实用程序[enscript](https://www.gnu.org/software/enscript/)（可能通过 MacPorts）。我无法对此进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:28:52.697

我从 Mike Meyer那里找到了一些[Clojure 突出显示对 GNU Enscript 的支持。](http://blog.mired.org/2010/08/syntax-highlighting-for-clojure-code.html)

它似乎工作得很好。

![在此处输入图像描述](../Images/9ff136ef6a977b2370a0d503eb22b57a.png)

# mysql - MySQL - 使用 WHERE 或 HAVING 子句中的结果从每行中的两列计算值

> ID：10974221
> 
> 赞同：1
> 
> 时间：2012-06-11T03:23:56.373
> 
> 标签：mysql, sql, select, division

我有一个 MySQL 数据库架构，如下所示：

```
id    flags     views    done
-------------------------------
1     2         20       0
2     66        100      0
3     25        40       0
4     30        60       0 

... thousands of rows ... 
```

我想更新其标志/视图> = 0.2的所有行。首先作为测试，我想尝试 SELECT 以查看实际更新了多少行。我试过：

```
SELECT flags/views AS poncho FROM mytable HAVING poncho > 0.2
```

但这只会返回 2 行，我*知道*应该还有更多。似乎它正在计算所有行的雨披值或一些奇怪的东西。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:37:08.810

使用该`WHERE`子句代替`HAVING`：

```
SELECT flags/views AS poncho FROM mytable WHERE flags/views > 0.2 
```

`HAVING`将所有相同的值聚合到一行。SQL 标准不允许`HAVING`没有对应的子句`GROUP BY`，但 MySQL 对标准非常宽容。你所拥有的实际上与

```
SELECT flags/views AS poncho
FROM   mytable
GROUP  BY poncho
HAVING poncho > 0.2 
```

更多的手册[在这里](http://dev.mysql.com/doc/refman/5.6/en/select.html)。

# php - php信用卡信息处理与邮件

> ID：10974228
> 
> 赞同：-2
> 
> 时间：2012-06-11T03:25:43.903
> 
> 标签：php, credit-card

处理信用卡信息而不将其存储在数据库中或使用 php/ssl 通过电子邮件发送以使其不存储在您的服务器上是否合法？关键是要存储信用卡信息，而不必每年支付 1 万美元才能符合 pci。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:29:00.257

您不应该这样做，因为电子邮件非常不安全。电子邮件始终是黑客的目标。如果您计划存储信用卡信息，则应保护数据。

您是否考虑过不存储信用卡信息？

# mysql - MySQL：如何插入具有相同 ID 自动增量的多条记录

> ID：10974230
> 
> 赞同：2
> 
> 时间：2012-06-11T03:25:49.853
> 
> 标签：mysql, database, auto-increment

我有一个包含 1 列的表，用于存储 ID auto_increment 并使用该指令：

```
$query = "SELECT first_data, second_data, third_data
            FROM table_data
                WHERE condition = 'value_condition'";
$result = mysql_query($query) or die(mysql_error());

$no_of_rows = mysql_num_rows($result);

    if ($no_of_rows > 0) {
        while($row = mysql_fetch_assoc($result)) {
            $valueone = $row['first_data'];
            $valuetwo = $row['second_data'];
            $valuethree = $row['third_data'];

            $queryTwo = "INSERT INTO historial_ventas (reg1, reg2, reg3) 
                        VALUES('$ivalueone','$valuetwo','$valuethree')";
            $resultTwol = mysql_query($queryTwo) or die(mysql_error());
        }
    } else {
        return false;
} 
```

信息存储如下：

```
ID(auto_increment)  reg1      reg2      reg3
______________________________________________
1                   value1    value2    value3
2                   value1    value2    value3
3                   value1    value2    value3
4                   value1    value2    value3 
```

但我希望在 while 循环中维护记录，使用与在线购买相同的 ID 存储，即您保存产品及其功能但使用相同的 ID 购买，如下所示：

```
ID(auto_increment)  reg1      reg2      reg3
______________________________________________
1                   value1    value2    value3
1                   value1    value2    value3
1                   value1    value2    value3
1                   value1    value2    value3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T03:33:00.883

我假设该`ID`列被定义为一个主键，在这种情况下，它的全部目的是提供一个唯一的数据来识别每条记录——不可能在同一个表中有两条具有相同主键的记录。你到底想完成什么？如果您想存储购买 ID，您应该为其创建一个单独的列并明确存储它 - 自动增量列不是您要查找的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T03:46:59.220

规范化的方法是使用这样的联合表：

![采购系统](../Images/6f9c78895611e34400a649f9d4f9bc09.png)

两者`PurchaseId`和`ItemId`都设置为自动递增。主键的目的是唯一标识每一行。

## 更新：客户

阅读[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)，了解如何设计有效的数据库。

![在此处输入图像描述](../Images/db7c89b658411f37d5f6f31cd4a54705.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T03:33:32.887

去掉自动增量，手动输入id号。您还需要检查它是否设置为主键（即唯一）。确保这是您想要做的，因为删除唯一性可能会导致以后出现重复问题。

要在进入 while 循环之前执行此操作，您可以获得最大数 ( `select max(id) from tablename`)，将其加一，然后将其插入 while 循环中。

```
$query = "SELECT max(id)
            FROM historial_ventas";
$result = mysql_query($query) or die(mysql_error());

//increase you resulting number
$result = $result + 1

    if ($no_of_rows > 0) {
        while($row = mysql_fetch_assoc($result)) {
            $valueone = $row['first_data'];
            $valuetwo = $row['second_data'];
            $valuethree = $row['third_data'];

            $queryTwo = "INSERT INTO historial_ventas (id, reg1, reg2, reg3) 
                        VALUES('$result', '$ivalueone','$valuetwo','$valuethree')";
            $resultTwol = mysql_query($queryTwo) or die(mysql_error());
        }
    } else {
        return false;
} 
```

# mysql - 在 Rails 上显示带有 ruby 的 unicode 文本

> ID：10974232
> 
> 赞同：1
> 
> 时间：2012-06-11T03:26:39.057
> 
> 标签：mysql, ruby-on-rails, ruby, unicode, ruby-on-rails-3.1

我正在使用 ruby​​ on rails 读取（mysql）数据以显示在视图上。一切都显示得很好，只有文本不是 unicode，有些文本是用我的母语写的，无法正确显示，所有这些字母都被重新标记为问号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:04:21.730

您必须通过 MySQL 控制台更改默认 MySQL 字符集和排序规则。这是如何做到这一点的简单指南：http: [//www.devcha.com/2008/03/convert-existing-mysql-database-from.html](http://www.devcha.com/2008/03/convert-existing-mysql-database-from.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:59:33.380

Ruby 默认字符集是 UTF-8。所以：

*   如果您有权将数据库转换为 UTF-8，请执行此操作。
*   否则在从数据库接收数据后使用 iconv 将其从 mysql 编码转换为 UTF-8。

而且，顺便说一句，如果您从文本文件中读取某些内容，则 utf-8 不是默认字符集（我仍然不明白为什么）。如果您在文本文件中存储除代码之外的其他内容，请添加

```
 # encoding: UTF-8 
```

在文件的开头。

# ruby-on-rails - 如何在 Rails 3 中使用 respond_with 创建不同的提交操作

> ID：10974234
> 
> 赞同：0
> 
> 时间：2012-06-11T03:27:32.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望能够使用 respond_with 对表单提交执行以下操作：

1.  提交然后重定向到索引
2.  提交然后留在表格中
3.  提交并显示创建的记录

respond_with 的默认操作是重定向到 show 操作。如何使控制器根据单击的按钮类型做出响应？

这些“提交”将在创建和更新操作期间发生。例如，此代码中的创建操作将如何响应单击三个提交按钮中的任何一个（提交和编辑、提交和显示、提交和显示索引）

```
def new
    respond_with(@business=Business.new)
  end

  def create
    @business = Business.new(params[:business])
    flash[:notice] = t("flash.actions.create.notice", {:resource_name => "Business"}) if @business.save
    respond_with(@business)
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:00:20.663

在您看来，使用值和`submit_and_edit`，您可以在控制器中执行此操作：`submit_and_show``submit_and_show_index`

```
def create
  @business = Business.new(params[:business])
  flash[:notice] = t("flash.actions.create.notice", {:resource_name => "Business"}) if      @business.save
  location = case params[:submit]
  when 'submit_and_edit'
    edit_business_url
  when 'submit_and_show'
    business_url
  when 'submit_and_show_index'
    redirect_to businesses_url
  end
  respond_with(@business, :location => location)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:54:15.467

一般来说，最好只有一个提交按钮，以便用户对接下来发生的事情有预期（通常是转到显示页面）。

如果你想要 3 个提交按钮，那么你可以在提交前使用 Javascript 在数据上设置一个字段。在 HTML（假设为 ERB）中，为按钮添加一个隐藏字段和 id：

```
<%= hidden_field_tag :action, "", id='next_action' %>

<%= f.submit "Submit and Show, id='show' %>
<%= f.submit "Submit and Edit id='edit'%>
<%= f.submit "Submit and Index id='index'%> 
```

现在您需要添加点击处理程序，因此在 .js.coffee 中：

```
$(":submit").click ->
    $('#next_action').val = $(this).attr('id')
    $(this).closest(':form').submit() 
```

这应该找到 ID 为 next_action' 的隐藏字段，将其值设置为单击的按钮的 ID，然后提交表单。

现在在您的控制器中，您可以访问`params[:next_action]`并且可以从那里重定向到后续页面。

# ios - 在 UIScrollView 中模拟拖动结束

> ID：10974236
> 
> 赞同：2
> 
> 时间：2012-06-11T03:27:46.060
> 
> 标签：ios, uiview, uiscrollview, uicontrol

当用户在我的 scrollView 的 contentSize 之外水平滚动一定距离时，我想“接管”并运行一些动画。问题是，即使我一发生这种情况就关闭用户交互，“拖动”操作仍在进行中。只有当用户释放他的触摸时，交互才会被禁用。

有没有办法以编程方式模拟拖动结束时的修饰？最终结果应该是，当我的触发器触发时，用户立即无法再操作视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:46:16.490

您可以暂时将 scrollView 的`scrollEnabled`属性设置为`NO`. （与`userInteractionEnabled`属性不同，切换`scrollEnabled`具有即时效果。）您可以在动画完成后再次打开它。

## 来自 Apple 的文档：

### 滚动启用

确定是否启用滚动的布尔值。

`@property(nonatomic, getter=isScrollEnabled) BOOL scrollEnabled`

### 讨论

如果此属性的值为 YES，则启用滚动，如果为 NO，则禁用滚动。默认值为“是”。

禁用滚动时，滚动视图不接受触摸事件；它将它们转发到响应者链上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:03:10.633

我认为您应该使用手势识别器来检测用户的触摸。那应该可以解决您的问题。但是更清楚的是，您能否将代码片段发布到您尝试检测触摸的位置？

# facebook - Facebook 智能列表成员

> ID：10974237
> 
> 赞同：0
> 
> 时间：2012-06-11T03:28:16.293
> 
> 标签：facebook, facebook-graph-api

我想在不实际导入成员的情况下获取特定 Facebook 智能列表中的成员数量，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:11:02.253

不能，你需要自己检索成员并统计他们

# hibernate - Hibernate JPA：更新查询（仅更新版本）被触发，即使它根本没有改变

> ID：10974240
> 
> 赞同：2
> 
> 时间：2012-06-11T03:29:15.097
> 
> 标签：hibernate, jpa

假设，我们有一个 User ；一个用户可以有多个孩子。

现在，当我插入一个孩子时；我调用`user.addChild()`以便更新位于 JVM 中的用户对象.. 虽然实际上用户的数据库记录没有任何变化，因为它是 OneToMany。

当我检查 SQL 时；连同插入到孩子中；另一个查询被触发：

```
update User set version=? where id=? and version=? 
```

任何想法为什么？以及如何解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:11:45.263

如果这是双向关系的拥有方，则它的行为与指定的一样。默认情况下单向一对多使用连接表，然后版本应该更新。在规范中，这是用以下词语来讲述的：

> 所有非关系字段和属性以及
> 实体拥有的所有关系都包含在版本检查中。
> ...
> 这包括在连接表中维护的拥有关系。

# ios - POST 和 PUT 请求 AFNetworking

> ID：10974241
> 
> 赞同：6
> 
> 时间：2012-06-11T03:29:52.030
> 
> 标签：ios, rest, post, put, afnetworking

我正在尝试调用服务器。GET 调用运行良好并返回正确的 json，但是当我尝试执行 PUT 或 POST 时，服务器返回错误。

我将服务器设置为接收下一条消息：

```
method POST
curl -X POST -d "number=NUMBER&name=NAME&lat=32.5713&lon=60.3926"  http://server.com/users/

method PUT
curl -X PUT -d "number=USER&name=NAME6&lat=-34.5552&lon=32.3333"  http://server.com/users/ 
```

如何使用这两种方法调用服务器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T17:06:55.127

我会为所有请求创建一个 APIClient 类，而不是每次发出请求时都创建一个新客户端。

请参阅：[https](https://github.com/AFNetworking/AFNetworking/tree/master/Example/Classes) ://github.com/AFNetworking/AFNetworking/tree/master/Example/Classes AFTwitterAPIClient.h & AFTwitterAPIClient.m

但根据你的问题。我相信代码看起来像这样。（代码未经测试）

```
NSURL *url = [NSURL URLWithString:@"http://server.com"];
AFHTTPClient *client = [[AFHTTPClient alloc]initWithBaseURL:url];

//depending on what kind of response you expect.. change it if you expect XML 
[client registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSDictionary *params = [[NSDictionary alloc]initWithObjectsAndKeys:
                        @"NUMBER",@"number", 
                        @"NAME",@"name",
                         @"32.5713",@"lat",
                         @"60.3926",@"lon", 
                        nil];
[client putPath:@"users" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"success");
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"failure");
}]; 
```

至于发布请求..只需使用 postPath 而不是 putPath 就可以了。:)

希望我有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:42:09.227

由于没有关联的代码，我假设您使用`getPath:parameters:success:failure:`或不使用您的*server/API*可能需要的*POST*`parameters` reqd发送。

 **```
postPath:parameters:success:failure:
putPath:parameters:success:failure: 
```

另请参阅[AFNetworking 发布请求](https://stackoverflow.com/questions/7623275/afnetworking-post-request)以获取带有 AFnetworking 的 POST 的示例代码**

# java - Java Applets 中的paint 和draw 方法有什么区别？

> ID：10974242
> 
> 赞同：0
> 
> 时间：2012-06-11T03:30:31.977
> 
> 标签：java, swing, applet

我只是想知道为什么在 Java Applet 创建中同时使用paint 和draw 方法。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:19:28.363

`paint()` : Whenever there is a change in the state of the applet on the screen, paint() is called, paint() is also immediately called after start() method.

`draw()` : And it has methods like drawRect(), drawImage() drawOval() related to Graphics class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:54:18.780

将小程序放置在网页上时，会在页面上为其分配一个矩形区域。绘制那个矩形的内容是小程序的工作。同样，当需要绘制小程序时，网页会调用小程序的**paint()**例程。但是小程序中没有**draw()**方法。当你想画一些东西，你应该使用**Graphics**类，例如 Graphics.drawLine()、Graphics.drawOval() 等。

# android - 索尼智能手表上的 XML 布局

> ID：10974245
> 
> 赞同：2
> 
> 时间：2012-06-11T03:31:33.283
> 
> 标签：android, android-layout, sony, sony-smartwatch

我在 128x128 智能手表屏幕上获得正确布局时遇到问题。

这是一个有趣的问题，因为手表上的布局显然继承了运行它的设备的屏幕密度。因此，当在平板电脑和手机上运行时，手表上的布局元素大小完全不同。

我的布局基于智能扩展 SDK 中的示例项目之一。

使用此 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="@dimen/smart_watch_control_width"
    android:layout_height="@dimen/smart_watch_control_height"
    android:id="@+id/rlayout"
>

    <Button
        android:id="@+id/imageViewUp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:tag="button"
        android:background="@drawable/up_selector" />
    ...more Buttons
</RelativeLayout> 
```

初始化布局，SmartView只是一个扩展的LinearLayout

```
private LinearLayout createLayout() {
    mSmartView = new SmartView(mContext);
    mSmartView.setLayoutParams(new LayoutParams(WIDTH, HEIGHT));

    LinearLayout sampleLayout = (LinearLayout) LinearLayout.inflate(
            mContext, R.layout.xbmc, mSmartView);

    sampleLayout.measure(WIDTH, HEIGHT);

    Log.i(TAG, "layout width: " + sampleLayout.getMeasuredWidth()
            + " height: " + sampleLayout.getMeasuredHeight());

    sampleLayout.layout(0, 0, sampleLayout.getMeasuredWidth(),
            sampleLayout.getMeasuredHeight());

    return sampleLayout;
} 
```

createLayout 的结果存储在 mLayout 中，然后使用以下方法绘制：

```
Bitmap bitmap = Bitmap.createBitmap(128, 128, BITMAP_CONFIG);

// Set default density to avoid scaling.
bitmap.setDensity(DisplayMetrics.DENSITY_DEFAULT);

Canvas canvas = new Canvas(bitmap);
mLayout.draw(canvas);

showBitmap(bitmap); 
```

使用上面的 XML，在我的手机上我得到了这个： ![手机](../Images/5adf1aa0179cd1f0e4276f183f3bfd44.png)

在平板电脑上看起来像这样： ![药片](../Images/4e6fde4c346902747ac780141c50fcd4.png)

此外，如果我硬编码我的 XML 以使用图像的确切像素值，它看起来就像平板电脑版本。箭头图像为 44 像素，中间的图像稍大。

感觉就像我需要一种以编程方式设置设备密度的方法，以强制它达到手表的密度。如何使手表上的布局看起来正确？我更喜欢一个可以避免对像素值进行硬编码的解决方案，因为这不是我们在 Android 上做事的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:34:27.837

尝试将您的可绘制对象存储在 res/drawable-nodpi 文件夹中，这应该会阻止 Android 应用密度。

例如，这是在[此处](http://developer.sonymobile.com/wp/2012/05/07/music-player-and-8-game-extensions-for-smartwatch-now-available-as-open-source/)提供的 8 益智游戏中完成的。

# qt - QNetworkAccessManager::get() 导致调用纯虚方法

> ID：10974247
> 
> 赞同：1
> 
> 时间：2012-06-11T03:31:52.037
> 
> 标签：qt

我正在尝试使用带有单独线程的 QNetworkAccessManager::get() 下载网页，当我运行程序时，它会随机崩溃（可能是一小时或两小时）。代码示例：

```
class SpiderThread : public QThread
{   
    Q_OBJECT
public:
    SpiderThread();
    void    run();
private:
    bool    _stopped;
}; 

void SpiderThread::run()
{
    while (!_stopped) {
        DownloadManager downloadManager();
        QUrl u = getOneUrl();
        QString content = downloadManager.getContent(u);
        // some other code
    }
}

QString DownloadManager::getContent(const QUrl &url)
{
    QEventLoop  loop;
    QNetworkAccessManager manager;

    QNetworkRequest request(url);
    request.setRawHeader("User-Agent", _userAgent.toAscii());
    QNetworkReply *reply = manager.get(request);
    connect(reply, SIGNAL(finished()),
            SLOT(replyFinished()));
    connect(reply, SIGNAL(finished()),
            &loop, SLOT(quit()));

    loop.exec();
    if (reply->error() != QNetworkReply::NoError) {
        if (reply->isRunning())
            reply->abort();
        reply->deleteLater();
        return QString();
    }

    int httpCode = reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt();

    if (httpCode != 200)
        return QString();
    QByteArray data = reply->readAll();
    reply->deleteLater();
    return QString(data);
} 
```

我正在使用 QEventloop 阻止 http 请求，直到它完成，当我运行这些代码时，它总是崩溃并显示错误消息：

```
    纯虚方法调用
    在没有活动异常的情况下调用终止

```

gdb 调试信息：

```
    (gdb) BT
    #0 0x0000003c0dc30285 in raise () from /lib64/libc.so.6
    #1 0x0000003c0dc31d30 in abort () from /lib64/libc.so.6
    #2 0x0000003d992bed94 in __gnu_cxx::__verbose_terminate_handler() () 来自 /usr/lib64/libstdc++.so.6
    #3 0x0000003d992bce46 在?? () 来自 /usr/lib64/libstdc++.so.6
    #4 0x0000003d992bce73 in std::terminate() () from /usr/lib64/libstdc++.so.6
    #5 0x0000003d992bd3cf in __cxa_pure_virtual () from /usr/lib64/libstdc++.so.6
    #6 0x00002aaaabc3cc35 在 QCoreApplication::postEvent(QObject*, QEvent*, int) ()
           来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtCore.so.4
    #7 0x00002aaaabc5301d in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) ()
           来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtCore.so.4
    #8 0x00002aaaab7b81a1 在?? () 来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtNetwork.so.4
    #9 0x00002aaaab7ac3ad 在?? () 来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtNetwork.so.4
    #10 0x00002aaaab7c8d1d 在 ?? () 来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtNetwork.so.4
    #11 0x00002aaaab7cadb0 在 ?? () 来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtNetwork.so.4
    #12 0x00002aaaab7a89ce 在 QNetworkAccessManager::createRequest(QNetworkAccessManager::Operation, QNetworkRequest const&, QIODevice*) ()
          来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtNetwork.so.4
    #13 0x00002aaaab7a5ea4 在 QNetworkAccessManager::get(QNetworkRequest const&) ()
                     来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtNetwork.so.4
    #14 0x00000000004088fe 在 DownloadManager::getContent (this=0x409fff40, url=..., toCodec=...)
                         在 src/downloadmanager.cpp:55
    #15 0x0000000000415248 在 SpiderThread::run (this=0x7ffffffffe2b0) at src/spiderthread.cpp:27
    #16 0x00002aaaabb2c3b9 在?? () 来自 /usr/local/Trolltech/Qt-4.8.2/lib/libQtCore.so.4
    #17 0x0000003c0e40677d in start_thread () from /lib64/libpthread.so.0
    #18 0x0000003c0dcd325d in clone () from /lib64/libc.so.6

```

请帮助我，我花了这么多时间来找出问题所在，但它仍然不起作用。我犯了一些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T16:14:05.063

你把事情不必要地复杂化了。默认实现`QThread::run()`已经创建并运行了一个事件循环。不要从 QThread 派生。将您的功能放入 QObject 中，并`moveToThread(thread)`在启动线程后调用该对象，*如有必要*！使用信号和插槽来完成任务。QNetworkAccessManager 已经使用了工作线程 IIRC，因此在另一个专用线程中创建它可能毫无意义。

# iphone - cocos2d_iphone,如何用CCLayer创建模态对话框？显示人们暂停、重试和退出

> ID：10974253
> 
> 赞同：1
> 
> 时间：2012-06-11T03:33:01.767
> 
> 标签：iphone, cocos2d-iphone

我想创建一个模式对话框`CCLayer`，作为暂停功能，显示人们重试、恢复或退出。

我添加了一个精灵来覆盖主层，并设置触摸不启用。但是主层的按钮也可以触摸。这个怎么做？如何向用户显示一种模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:40:30.010

我通过 HUD 层实现了这一点。我制作的每个游戏层都有一个 HUD 层覆盖。HUD 层有一个`CCMenu`带有暂停图像的暂停游戏。

当玩家暂停游戏时，HUD 层会显示另一个`CCMenu`重新启动、退出或恢复游戏。并且 HUD 还存储了一个`BOOL`isPaused。在`ccTouchBegan`（在游戏层上）我检查 HUD.isPaused 是否，如果是，则返回`NO`，否则返回`YES`。这解决了游戏中任何不必要的触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:17:05.003

setting `isTouchEnabled:` disables taouches only to the layer, not to it's children. It means, that if your layer has touch delegate methods, they will not be called when `isTouchEnabled:` is set to `NO`. If you have CCMenu instance or other touchable child, you must change it's `isTouchEnabled:` property separately.

# mongodb - 用户活动提要的数据库解决方案

> ID：10974255
> 
> 赞同：7
> 
> 时间：2012-06-11T03:33:25.773
> 
> 标签：mongodb, redis, nosql

我正在开发一个需要生成用户活动提要的项目。如果用户 A 关注用户 B 并且用户 B 做了一些活动，用户 A 在他的主页上看到它。

现在我正在寻找一种用于持久化用户提要的数据库解决方案。一旦用户 B 提交了某个操作，所有关注用户 B 的用户都会收到一条记录。我认为为具有对象引用列表的用户保存一个 mongodb 文档比为每个提要记录保存一个文档要好。

另一方面，会有很多写入，甚至更多的读取，并且 mongodb 对一个集合有一个锁。也许这可能是个问题。或者也许 Redis 可以用于此。并且 redis 具有并发性。我对两者都没有多少经验。

总结的问题是什么会更好地用于此任务：Mongo、Redis 或其他什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T14:27:56.323

请参阅博文：[http](http://www.waistcode.net/blog/mongodb-newsfeed-schema-design-for-entexis) ://www.waistcode.net/blog/mongodb-newsfeed-schema-design-for-entexis ，它准确地描述了您正在寻找的内容。恕我直言：它真的很优雅。

[几天前，我通过一个相关问题（ MongoDB 数据库模式设计](https://stackoverflow.com/questions/10918921/mongodb-database-schema-design/10923080#10923080)）向我指出了那篇博文。

hth。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T06:41:59.800

一定要评估[neo4j](http://neo4j.org/)。它是为您描述的许多相同用例而创建的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-26T13:29:02.620

[Cassandra](http://cassandra.apache.org/)是自托管活动源的一种经过验证的选择，尽管它通常被认为运行和操作很复杂。

现在有 3rd 方/托管选项，例如[GetStream.io](https://getstream.io)和[DynamoDB](https://aws.amazon.com/dynamodb/)。

# javascript - 如何在谷歌地图 v3 中为相同的纬度/经度添加标记集群而不影响另一个元素？

> ID：10974258
> 
> 赞同：2
> 
> 时间：2012-06-11T03:34:04.450
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, markerclusterer

我制作了traceroute地图。我对一些应该在相同纬度/经度的标记有问题，但地图上只显示一个标记。我读到有办法。它是标记簇。但我不知道如何添加javascript。另外，我担心这是否会影响我添加的另一个标记元素，例如带有标签、信息窗口和折线的自定义标记。这是我的代码：

```
<script type="text/javascript">
    var pinImage = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_xpin_letter_withshadow&chld=pin_star|%E2%80%A2|CC3300|000000|FF9900",
        new google.maps.Size (70, 83),
        new google.maps.Point (0,0),
        new google.maps.Point (10,34));
    var pinShadow = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
        new google.maps.Size (89, 85),
        new google.maps.Point (0, 0),
        new google.maps.Point (12, 35));

    function initialize() {
    var myLatlng = new google.maps.LatLng(38.822591, 150.46875);
    var myOptions = {
    zoom: 2,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    <?php
    $posisi = array();
    $keterangan = array();
    foreach ($integer as $lokasi) {
    $query = "SELECT cl.locId, cl.country as country, cl.region as region, cl.city as city, cl.postalCode as postalCode, cl.latitude as latitude, cl.longitude as longitude, cl.metroCode as metroCode, cl.areaCode as areaCode
    FROM (SELECT locId as idcihuy FROM cityblocks WHERE $lokasi BETWEEN startIpNum AND endIpNum) cb, citylocation cl WHERE cb.idcihuy = cl.locId";
    $result = mysql_query($query);
    while ($location = @mysql_fetch_assoc($result)){
    $posisi[]= 'new google.maps.LatLng(' . $location['latitude'] . ', ' . $location['longitude'] . ')';
    $keterangan[]= '"(' . $location['country'] . ',  ' . $location['region'] . ',  ' . $location['city'] . ')"';
    }
    }
    ?>
     var infoWindow = new google.maps.InfoWindow({});
     var point = [<?php echo implode(',', $posisi) ?>];
     var lokasi = [<?php echo implode(',', $keterangan) ?>];
     var icon = pinImage;
     for (var i = 0; i < point.length; i++) {
     var html = "<b>" + lokasi[i] + "</b> <br/>" + point[i];
     var marker = new MarkerWithLabel({
        map: map,
        position: point[i],
        icon: pinImage,
        shadow: pinShadow,
        labelContent: i,
        labelAnchor: new google.maps.Point(12, -5),
        labelClass: "labels"
        });
        bindInfoWindow(marker, map, infoWindow, html);
    var jalur = new google.maps.Polyline({
    path: point,
    strokeColor: "#000000",
    strokeOpacity: 0.8,
    strokeWeight: 2.25
    });
    jalur.setMap(map);
        }
        }
    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }
    </script> 
```

此外，我还给您提供了具有相同 lat/long 的职位样本：

```
[
 new google.maps.LatLng(1.3667, 103.8000),
 new google.maps.LatLng(1.3667, 103.8000), 
 new google.maps.LatLng(1.3667, 103.8000),
 new google.maps.LatLng(1.3667, 103.8000),
 new google.maps.LatLng(51.0000, 9.0000),
 new google.maps.LatLng(51.0000, 9.0000),
 new google.maps.LatLng(51.5142, -0.0931),
 new google.maps.LatLng(51.5142, -0.0931),
 new google.maps.LatLng(54.0000, -2.0000),
 new google.maps.LatLng(51.6000, -1.2500),
 new google.maps.LatLng(51.7500, -1.2500)
]; 
```

我需要帮助以使标记群集具有相同的纬度/经度，但这不会影响另一个元素，例如带有标签、信息窗口和折线的标记。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:43:27.863

你可以使用[这个](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)库。

> **谷歌地图 v3 的 MarkerClusterer**
> 
> 该库为大量标记创建和管理每个缩放级别的集群。

[例子](http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/1.0/examples/simple_example.html)

当您放大集群时，您可以在一个位置看到多个标记。

**编辑：**

```
// GET AN EMPTY ARRAY
var markerArray = [];
for (var i = 0; i < point.length; i++) {

    // CODE AT THE BEGINNING OF LOOP

    var marker = new MarkerWithLabel({
        // MARKER CONFIGS
    });
    markerArray.push(marker);

    // REST OF THE CODE IN LOOP
}

// TIME FOR ACTION
var markerCluster = new MarkerClusterer(map, markerArray); 
```

# c - 如何从另一个程序中的一个程序访问内存

> ID：10974261
> 
> 赞同：12
> 
> 时间：2012-06-11T03:35:12.263
> 
> 标签：c, macos, unix, shared-memory

我有一个封闭源代码的第 3 方程序，我希望能够

*   知道分配给程序的内存
*   访问该内存（只读很好）

vmmap(1)、heap(1) 和leaks(1) 之类的实用程序似乎与我需要的功能相似，但我无法在任何地方找到它们的源代码（OS X 版本），也无法弄清楚它们是如何使用的工作。最好这一切都在用户空间中完成，可能以 root 身份运行，如果可以避免的话，我不想编写内核代码来绕过内存保护。

我尝试使用共享内存将我想要读取的地址作为第二个参数传递给 shmat(2)，但这最终没有成功（并且可能不是它的预期用途和/或不好的做法）并且仍然让我没有办法确定我正在寻找的内存（拥有内存的程序必须向我报告它的地址）。

有没有办法只禁用某个程序的内存保护，以便它在尝试读/写分配给不同进程的内存时不会出现段错误？有没有更好的方法不会让错误严重破坏我的整个系统？

这是如何实现的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:50:47.217

基本上，[这个人](https://stackoverflow.com/a/63033/992364)是对的。

去下载[本书](https://rads.stackoverflow.com/amzn/click/com/0321278542)随附的[源代码](http://osxbook.com/book/src/)，并查看示例 8-16 的 vm_rw_master.c 以获得有效的实现。

有关文档，请参阅[http://web.mit.edu/darwin/src/modules/xnu/osfmk/man/](http://web.mit.edu/darwin/src/modules/xnu/osfmk/man/)，它有点过时了，而且可能是正确的，但它是最好的。

编辑：另外，请参阅[http://lightbulbone.com/2011/05/dumping-process-memory-on-mac-os-x/](http://web.archive.org/web/20120207063702/http://lightbulbone.com/2011/05/dumping-process-memory-on-mac-os-x/)（请注意，拥有您尝试读取的内存的任务不需要是尝试阅读的过程的孩子，您只需要获得适当的授权。）

编辑：另外，有关授权的一个很好的例子，请参见[http://os-tres.net/blog/2010/02/17/mac-os-x-and-task-for-pid-mach-call/](http://os-tres.net/blog/2010/02/17/mac-os-x-and-task-for-pid-mach-call/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T03:59:28.917

我无法访问 OS X 机器，但这看起来与您尝试做的非常相似：

[在 OS X 中读取其他进程的内存？](https://stackoverflow.com/questions/10668/reading-other-process-memory-in-os-x-bsd)

这是不起作用的链接的存档：

[http://web.archive.org/web/20090627062246/http://www.matasano.com/log/1100/what-ive-been-doing-on-my-summer-vacation-or-it-has-工作-否则-gdb-wouldnt/](http://web.archive.org/web/20090627062246/http://www.matasano.com/log/1100/what-ive-been-doing-on-my-summer-vacation-or-it-has-to-work-otherwise-gdb-wouldnt/)

# groovy - Intellij Idea 仅问题与 Groovy 编译：Getting ClassNode#getTypeClass for java.lang.Object is called before type class is set

> ID：10974262
> 
> 赞同：1
> 
> 时间：2012-06-11T03:35:39.713
> 
> 标签：groovy, intellij-idea

我有一个使用 groovy-eclipse-compiler 编译 groovy 类的 maven 项目。这个项目从命令行运行良好（通过'mvn test'）。但是当我尝试在 Idea 内部运行测试时，我得到了一个 groovy 编译器错误，在测试甚至可以运行之前产生了堆栈跟踪。

我附上了整个项目的链接，我还将向 Intellij 人员提交一个错误，但我希望这个网站上的某个人已经看到并找到了解决这个问题的方法。
如果 Intellij 回复我，我将在此处发布解决方案。

项目 zip 文件可在此处获得： http: [//dl.dropbox.com/u/9940067/groovy.compiler.bug.zip](http://dl.dropbox.com/u/9940067/groovy.compiler.bug.zip)

无论如何，我将问题缩小到一类，我可以稍微调整以诱导或隐藏错误。这里是：

```
 package com.other

    class FooProperties extends Properties {

      FooProperties(File eCeNSHome) {
        assert eCeNSHome != null
        new File(eCeNSHome, "properties").withInputStream { stream -> load(stream) }
      }

      String getString(String key, String defaultValue = null) {
      }

      /**
       * @param key the property name
       * @return the property integer value if it exists or the defaultValue if not
       */
      int getInt(String key, int defaultValue = 0) {
        try {
          Integer.parseInt(getProperty(key))
        } catch(final NumberFormatException e) {
          return defaultValue
        }
      }
    } 
```

如果我用类似的东西改变下面的getInt方法

int getInt(String key, int defaultValue = 0) { return 100 }

然后 Groovy 编译器错误就消失了。如果我将代码保留在错误表面上方的原始代码中（带有下面的堆栈跟踪。）。非常感谢任何帮助或建议。

PS：我尝试搜索类似的错误，我发现了一个已修复的编译器错误的报告，但特征与我的略有不同。

> [http://jira.codehaus.org/browse/GRECLIPSE-629](http://jira.codehaus.org/browse/GRECLIPSE-629)

PPS：运行 'mvn test' 没有找到任何测试。但这不是问题。通过命令行，我们看到类至少可以正常编译（不会触发 groovy 编译器错误。）

## 堆栈跟踪

漏洞！源单元“/home/chris/cybergrid/ecens-perception-engine/src/main/groovy/com/other/FooProperties.groovy”阶段“类生成”中的异常 java.lang.Object 的 ClassNode#getTypeClass 被调用类型类在 org.codehaus.groovy.classgen.asm.BytecodeHelper.box(BytecodeHelper.java:559) 在 org.codehaus 的 org.codehaus.groovy.ast.ClassNode.getTypeClass(ClassNode.java:1311) 中设置。 org.codehaus.groovy.classgen.asm.CallSiteWriter.makeCallSite(CallSiteWriter.java:302) 上的 groovy.classgen.asm.OperandStack.box(OperandStack.java:170)。 makeCall(InvocationWriter.java:182) 在 org.codehaus.groovy.classgen.asm.InvocationWriter.makeCall(InvocationWriter.java:87) 在 org.codehaus.groovy.classgen.asm.InvocationWriter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:33:32.170

我没有解决这个问题，但我确实找到了解决方法。我有类似的代码会产生相同的异常。如果您将 defaultValue 从

```
int defaultValue = 0 
```

至

```
def defaultValue = 0 
```

错误应该消失

这似乎是原始类型的问题。

您也可以尝试使用 defaultValue 和 Integer 而不是 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:25:11.293

修复方法是将 groovy 版本从 1.8.0 更改为 1.8.3。你可以在我最初上传的项目 zip 上试试这个。

# flash - Flash builder中的导航按钮

> ID：10974263
> 
> 赞同：0
> 
> 时间：2012-06-11T03:35:52.097
> 
> 标签：flash

使用adobe flash builder制作ios应用程序时如何制作链接到另一个页面的按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:33:05.653

在这里，您在我的主视图中有一个示例，我有 1 个按钮，当我单击它时将我发送到 Autoview（这是我想去的名称）'

```
 protected function manualview_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            navigator.pushView(views.Autoview);
        }

    ]]>
</fx:Script>
  <s:Button id="butAuto" left="272" top="9" width="187" height="73" label="Automatic"
          click="manualview_clickHandler(event)" enabled="true" horizontalCenter="5"
          verticalCenter="-108"/>
 ' 
```

# android - 如何从进程中动态获取函数调用的地址

> ID：10974265
> 
> 赞同：0
> 
> 时间：2012-06-11T03:36:15.423
> 
> 标签：android, security

我正在寻找一种以编程方式获取函数调用地址的方法：来自 KeyboardView.OnKeyboardActionListener 接口的 public abstract void onKey (int primaryCode, int[] keyCodes)。

这些函数的地址是静态的吗？即它是否总是加载在同一个内存中。

我正在尝试实现键盘记录器的篡改保护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:39:40.663

你的问题根本没有意义，因为你问的是如何获取*函数指针*，而事实上，Java 没有函数指针的等价物（你只看到通过对象动态调度中的函数引用）。

函数的地址*可能*是静态的，也可能根本不存在，但这对你来说都是透明的，因为代码是在虚拟机中运行的。如果您是在 NDK 级别询问，您当然可以使用`&`C 中的简单函数获取函数的地址。但是，在 Java 级别这是不可能的。

但是，您没有说明为什么这会帮助您防止键盘记录器。

# php - 使用php DOMDocument遍历时随机获取非对象类型

> ID：10974272
> 
> 赞同：-2
> 
> 时间：2012-06-11T03:38:11.750
> 
> 标签：php, web-scraping, domdocument, domxpath

下面是我的代码：

```
$xpath = new DOMXPath($doc);
// Start from the root element
$query = '//div[contains(@class, "hudpagepad")]/div/ul/li/a';
$nodeList = @$xpath->query($query);

// The size is 104
$size = $nodeList->length;

for ( $i = 1; $i <= $size; $i++ ) {
    $node = $nodeList->item($i-1);
    $url = $node->getAttribute("href");

    $error = scrapeURL($url);
}

function scrapeURL($url) {
    $cfm = new DOMDocument();
    $cfm->loadHTMLFile($url);
    $cfmpath = new DOMXPath($cfm);
    $pointer = $cfm->getElementById('content-area');
    $filter = 'table/tr';

    // The problem lies here    
    $state = $pointer->firstChild->nextSibling->nextSibling->nodeValue;

    $nodeList = $cfmpath->query($filter, $pointer);
} 
```

基本上，这会遍历链接列表并使用 scrapeURL 方法抓取每个链接。

我不知道这里的问题，但随机我得到一个非对象类型错误，试图获取`$pointer`，有时它通过没有任何错误并且值是正确的。

有人知道这里的问题吗？我猜问题发生的时候是页​​面没有正确加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:55:25.563

我在这里找到了答案的想法：

[http://sharovatov.wordpress.com/2009/11/01/php-loadhtmlfile-and-a-html-file-without-doctype/](http://sharovatov.wordpress.com/2009/11/01/php-loadhtmlfile-and-a-html-file-without-doctype/)

使用“手动”查询比使用 getElementById 更好，因为如果您要加载的文档的 DOCTYPE 格式不正确，它会中断。

所以改用这个：

`$cfmpath->query("//*[@id='content-area']")`

或创建一个方法

```
function getElementById($id) {
    global $dom;
    $xpath = new DOMXPath($dom);
    return $xpath->query("//*[@id='$id']")->item(0);
} 
```

感谢那些试图提供帮助的人！

# c++ - 多线程网络服务？

> ID：10974273
> 
> 赞同：0
> 
> 时间：2012-06-11T03:38:38.870
> 
> 标签：c++, windows, multithreading, web-services

我需要编写一个计算密集型程序。所以我需要在计算之前将数据从数据库加载到内存中（以节省每次从数据库中获取数据的时间。

我希望该程序成为一个 Web 服务，并希望许多客户端能够同时运行多个计算。

由于加载数据需要相当多的内存，我希望所有计算都共享相同的数据（全局数据）。

但是，如果两个用户同时调用加载相同的数据，会出现同步问题，当一个已经在加载数据时，第二个又开始加载相同的数据。

我是否需要特别为此做一些线程锁？webservice是否意味着多线程编程？我打算使用 WWS(windows web service)，因为我是一名 C++ 程序员，但之前只处理过纯算法，所以这对我来说是新的。

对不起，如果我混淆了你。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:39:40.060

要解决您的数据加载问题，请使用单例模式，其中单例将有一个加载方法来检查数据是否已加载。如果没有加载mutex/monitor/etc会被获取，再次检查数据是否加载，如果没有加载数据并设置数据加载标志，释放mutex/monitor/etc。

没有 Web 服务器不必是多线程的。根据管理客户端交互的中间件，应该可以指定按顺序处理所有服务请求。请记住，如果您在多处理器系统上运行，您将只能使用一小部分处理能力。

如果您的服务器不修改任何共享数据，则可能需要很少或不需要同步来获得正确/正确的多线程行为。锁定代码的复杂性将与被修改的共享数据的数量以及对已修改数据的争用程度成正比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:51:28.510

如果您能够可靠地区分每个客户端，则可以为每个客户端创建一个上下文，并且如果客户端断开连接或在指定时间内保持空闲状态，该上下文可能会过期。

此外，如果您希望允许每个客户端同时执行多个“计算请求”，您需要一种独特的方式来识别每个请求，并在客户端上下文中跟踪它们。例如，如果用户有 1 个处理任务和 2 个排队任务，那么他的上下文同时跟踪 3 个任务，每个任务都有自己的状态（排队、运行和完成）。

为了确定“计算请求”何时完成处理，客户端可以继续*轮询*您的服务，通知它感兴趣的“计算请求”的唯一标识符。

是否需要锁定，取决于您解决问题所采用的架构。您的“全局数据”是只读的吗？如果是，那么您不需要锁来访问它。否则，您很可能会这样做（仍然取决于这些数据的存储方式）。我建议使用 HTTP Web 服务，并依靠会话（cookie）来跟踪每个用户。但是由于我不知道您的要求，所以这是在黑暗中拍摄。如果您遵循我在此处建议的设计，并且将使用每个连接的线程，那么您将需要每个上下文至少一个锁（假设用户可能同时发送多个请求）和一个锁来保护访问上下文列表。

# javascript - jquery/javascript 菜单问题

> ID：10974274
> 
> 赞同：1
> 
> 时间：2012-06-11T03:38:49.197
> 
> 标签：javascript, jquery

```
$(function(){
    $("li.level2").hide();
    $("li.level3").hide();

    $("ul.navigation").delegate("li.level1", "click", function() {
        $("li.level2").toggle().siblings("li.level3").hide();;
    });

    $("ul.navigation").delegate("li.level2", "click", function() {
        $("li.level3").toggle();
    });
}); 
```

我正在使用此脚本在 jquery 中为我的页面创建一个下拉菜单，但是当前当您单击 level1 列表时，它会打开每个 level1，而我只想打开被单击的那个。IE。当我单击第一个 1 时，它正在执行此操作：

```
1

    2

1

    2 
```

当我想让它这样做时

```
1

    2

1 
```

我知道您可以使用 $this 功能仅打开选定的一个，但我不确定如何实现它以及每当我尝试 (this).next 时，它只会打开下一个

我包含了一个带有样式的活动页面，以便于解释：http: [//jsfiddle.net/K6TSv/1045/](http://jsfiddle.net/K6TSv/1045/)

感谢您的帮助，这一直在推动我前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:44:23.987

使用获取单击的项目`$(this)`，然后获取下一个 level2 项目并显示。

```
$("ul.navigation").delegate("li.level1", "click", function() {
    var item=$(this);
    item.next(".level2").toggle();      
}); 
```

jsfiddle 示例：http: [//jsfiddle.net/K6TSv/1046/](http://jsfiddle.net/K6TSv/1046/)

如果我这样做。我会创建一个分层的 HTML 标记来处理这个问题，这将使事情变得容易

**编辑：根据评论（标记已更改！！！）**

如果要根据某些选择标准 unitl 某些元素来选择元素，请使用[nextUntil](http://api.jquery.com/nextUntil/)函数。

```
$(this).nextUntil(".level1",".level2").toggle(); 
```

示例[http://jsfiddle.net/K6TSv/1072/](http://jsfiddle.net/K6TSv/1072/)

# python - Buildbot 和多个 SVN 分支

> ID：10974275
> 
> 赞同：0
> 
> 时间：2012-06-11T03:38:49.760
> 
> 标签：python, svn, buildbot

我的 SVN 存储库布局...

```
Project_Name(root)/trunk
            /branches/
            /branches/new_feature_of_trunk1
            /branches/new_feature_of_trunk2
            /tags/
            /tags/ETC1
            /tags/ETC2 
```

我试图让 buildbot 构建我的存储库的几个分支，例如... /trunk 和 /branches/new_feature_of_trunk1 。这就是我编码它的方式

```
from buildbot.changes.svnpoller import SVNPoller, split_file_branches
source_code_svn_url='http://domain.com/svn/Project_Name/'
c['change_source'].append(
    SVNPoller(
        svnurl=source_code_svn_url,
        split_file=split_file_branches,
        pollinterval=60,
        histmax=10,
    )
)

def modified_files(change):
    for name in change.files:
        if name.endswith(".c"):
            return True
        elif name.endswith(".h"):
            return True
    return False

from buildbot import scheduler
from buildbot.changes.filter import ChangeFilter
s1=scheduler.AnyBranchScheduler(
    name="Project_Test",
    treeStableTimer=2*60,
    change_filter=ChangeFilter(
        branch=[
            'trunk',
            'branches/new_feature_of_trunk1'
        ]
    ),
    builderNames=[
        "Windows-x64-VS10",
    ],
    fileIsImportant=modified_files
)

c['schedulers']=[s1]

from buildbot.process import factory
from buildbot.steps import source,shell
from buildbot.process.properties import WithProperties
from buildbot.config import BuilderConfig
step_source_svn=source.SVN(
    mode='copy',
    baseURL=source_code_svn_url,
    defaultBranch='trunk',
    retry=(30,2)
)

f2=factory.BuildFactory()
f2.addStep(step_source_svn)
f2.addStep(
    shell.Compile(
        command=[
            "devenv.com",
            "MakeMe.sln",
            "/build",
            "Release^|Win32"
        ],
        logEnviron=False
    )
) 
```

问题是这个.. 我知道我添加了 defaultBranch='trunk'。但为什么它只检查主干而不是整个根？然后每当我删除它defaultBranch。我收到了这个错误

> exceptions.RuntimeError：属于构建器“Windows-x64-VS10”的 SVN 源步骤不知道要使用哪个分支。这意味着更改源没有指定分支，并且 defaultBranch 为 None。

那么我发布的代码是让我的 buildmaster 告诉从站构建 /trunk 或 /branches/new_feature_of_trunk1 中是否有 modified_files .. 如果在同一 SVN 修订版的两个分支中都有修改。然后它会在 /branches/new_feature_of_trunk1... 之前先编译 /trunk

但正如我所说，它不像我想要的那样工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:14:19.703

我知道的旧帖子，但对于其他人来说，这可能会有所帮助：

您需要为您的分支创建调度程序。现在看起来你只有一个分支建筑，但如果你有一个通过分支的调度程序，它可能对你更好。

```
Nightly(name="new1",          builderNames=["Project_Test"], branch="branches/new_feature_of_trunk1", onlyIfChanged=True, hour=range(0, 24, 2)),
Nightly(name="new2",          builderNames=["Project_Test"], branch="branches/new_feature_of_trunk2", onlyIfChanged=True, hour=range(0, 24, 2)), 
```

如果您希望一次检查所有内容并且您的编译步骤生成所有分支，则您的 source_code_svn_url 需要高一个分支

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:27:49.870

如果单个更改集包含两个分支中的更改，则应创建两个更改，并为每个更改触发一个构建。

# ruby-on-rails - Rails assets:precompile 试图编译太多文件

> ID：10974281
> 
> 赞同：0
> 
> 时间：2012-06-11T03:40:40.123
> 
> 标签：ruby-on-rails, asset-pipeline

我无法在我的应用程序中运行 rake assets:precompile，但它会尝试编译部分内容。

我有：

```
 config.assets.precompile += %w( active_admin.js active_admin.css ) 
```

没有别的了。

耙在文件上给出错误：

```
Undefined variable: "$selected-row-color".
  (in /home/eloyesp/projects/diputados/app/assets/stylesheets/expedientes_index.css.scss) 
```

为什么它试图预编译这个文件？

* * *

发现[这个拉取请求是相关的](https://github.com/rails/rails/pull/2876)

[这个测试表明](https://github.com/rails/rails/blob/3-2-stable/railties/test/application/assets_test.rb#L76)这不应该发生。

我的导轨版本是 3.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:00:22.573

我找到了它：它**没有**尝试编译`expedientes_index.css.scss`它正在编译`application.css.scss`（`*= require_tree .`它不应该在这个应用程序中）。

问题是因为错误没有命名它试图编译的文件。

# google-app-engine - GAE 上的 POS 标记

> ID：10974282
> 
> 赞同：1
> 
> 时间：2012-06-11T03:40:53.520
> 
> 标签：google-app-engine, nltk, pos-tagger

我正在尝试做部分字符串标记以在 Google App Engine 上的 Python 中提取句子的名词。到目前为止，我已经尝试使用 nltk 库。但我无法让 nltk 在 GAE 中工作。错误消息抱怨缺少 numpy 模块。

这个人有同样的问题： [https ://groups.google.com/forum/?fromgroups#!topic/nltk-users/2nWZtLgFyvI](https://groups.google.com/forum/?fromgroups#!topic/nltk-users/2nWZtLgFyvI)

我找不到关于如何在 GAE 上运行 nltk 或在 GAE 上运行的替代 POS 标记器的明确说明

编辑：

我试图让 nltk 工作的步骤（我在 osx 10.7 上）：

1.  通过终端“easy_install nltk”安装 nltk
2.  将 nltk 复制到 appengine 项目的根目录 /Library/Python/2.7/site-packages/nltk-2.0.1-py2.7.egg/nltk/
3.  将以下设置添加到 app.yaml：

    ```
    runtime: python27
    threadsafe: false

    libraries:
      name: numpy
      version: "latest" 
    ```

4.  编写 test.py 与`import nltk`在里面

5.  部署，运行并得到以下错误（numpy错误已解决，但我得到了一个新错误）：

> Traceback（最近一次调用最后）：文件“/base/data/home/apps/s~domain/1.359540170137090086/dynamic/test.py”，第 4 行，在 import nltk 文件“/base/data/home/apps/s ~domain/1.359540170137090086/nltk/ **init** .py”，第 116 行，在 import ccg 文件中“/base/data/home/apps/s~domain/1.359540170137090086/nltk/ccg/init **.py** ”，第 14 行，来自 nltk .ccg.combinator import (UndirectedBinaryCombinator, DirectedBinaryCombinator, File "/base/data/home/apps/s~domain/1.359540170137090086/nltk/ccg/combinator.py", 第 8 行, in from nltk.parse import ParserI File "/base /data/home/apps/s~domain/1.359540170137090086/nltk/parse/init **_**.py”，第 68 行，从 nltk.parse.util 导入 load_parser，TestGrammar，extract_test_sentences 文件“/base/data/home/apps/s~domain/1.359540170137090086/nltk/parse/util.py”，第 15 行，在从 nltk.data 导入加载文件“/base/data/home/apps/s~domain/1.359540170137090086/nltk/data.py”，第 75 行，在 if os.path.expanduser('~/') != '~ /': path += [ File "/base/python27_runtime/python27_dist/lib/python2.7/posixpath.py", line 259, in expanduser import pwd ImportError: No module named pwd

以下来自 nltk/data.py （大约第 75 行）：

```
######################################################################
# Search Path
######################################################################

path = []
"""A list of directories where the NLTK data package might reside.
These directories will be checked in order when looking for a
resource in the data package.  Note that this allows users to
substitute in their own versions of resources, if they have them
(e.g., in their home directory under ~/nltk_data)."""

# User-specified locations:
path += [d for d in os.environ.get('NLTK_DATA', '').split(os.pathsep) if d]
if os.path.expanduser('~/') != '~/': path += [
os.path.expanduser('~/nltk_data')]

# Common locations on Windows:
if sys.platform.startswith('win'): path += [
r'C:\nltk_data', r'D:\nltk_data', r'E:\nltk_data',
os.path.join(sys.prefix, 'nltk_data'),
os.path.join(sys.prefix, 'lib', 'nltk_data'),
os.path.join(os.environ.get('APPDATA', 'C:\\'), 'nltk_data')]

# Common locations on UNIX & OS X:
else: path += [
'/usr/share/nltk_data',
'/usr/local/share/nltk_data',
'/usr/lib/nltk_data',
'/usr/local/lib/nltk_data'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:06:10.263

python27 的 GAE 支持 numpy 1.6.1。您是否指定

```
runtime: python27 
```

在你的`app.yaml`？您提供的链接早于 Python 2.7 支持，所以我猜不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:15:27.820

我实际上看不到您提到的 Numpy 错误消息-您能提供吗？无论哪种方式，我认为 Numpy 的东西可能是一个红鲱鱼（对不起，一个英国成语 - 它可能是问题的根源不是 Numpy）。NLTK 小组说 Numpy 无论如何都是可选的（请参阅 NLTK.org 站点上的安装页面）。

我实际上认为您可能会受到 NLTK 处理其导入的方式的影响。当只是将代码结构复制到项目中而不使用 python 路径（如果您可以在 GAE 上 pip 或 easy_install NLTK 时将使用该路径），它会尝试进行循环导入。见[这里](https://stackoverflow.com/questions/1286301/using-the-python-nltk-2-0b5-on-the-google-app-engine)。

我尝试并最终放弃了让 NLTK 在 AppEngine 上工作的尝试。但在放弃之前，我确实取得了一些小小的成功。[我在这里](https://groups.google.com/forum/?fromgroups#!topic/nltk-users/ldswMszKerg)听从了 Oakmad 的建议。他的建议基本上是：

*   一次复制你需要的模块
*   运行您的代码并查看是否满足依赖项
*   如果不是，并且错误出现在您不需要的 NLTK 模块中，*请*创建正在查找的目录并在其中放置一个空的 init.py（该 init 应该以两个下划线为前缀和后缀，但它被解释为由这个编辑器格式化）
*   如果导入错误与您确实需要的模块有关，请*从*NLTK 分发中复制它并重复

正如我所说，我的成功有限，但是一旦我开始使用一些更复杂的 NLTK 模块（在我的例子中为 CMUDICT），具有跨模块的相互依赖关系，就不可能以这种方式欺骗模块目录。

给你的其他三个建议。

首先，您可以查看 code.google.com 上的 nltk-gae 工作（我会链接到它，但作为新用户，我只允许使用 2 个超链接）。它声称是用于 GAE 的精简版 NLTK。

其次，这就是我对 CMUDICT 所做的，您可以使用完整的 NLTK 库在 GAE 之外创建一个结构，然后对生成的结构进行 pickle 并将该 pickle 文件部署到您的 GAE 应用程序中。

最后，如果您需要使用 Python 和 NLTK，请查看 Heroku，这可能不是很有帮助。

*警告，我的经验是从 2011 年开始的 - GAE 现在可能会在 NLTK 上玩得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:53:29.517

我在我的 GAE 实例（Python 2.5）上安装了 montylingua。吃一堆内存加载字典，但有效。只需确保指向从服务器上的本地字典中读取：

```
self.lexicon_filename = os.path.join(os.path.split(__file__)[0], self.lexicon_filename) 
```

而且，您必须将文件阅读器更改为一次读取 4 个字节：

```
nib=file_ptr.read(4) # Read 4 binary bytes 
```

由于 GAE 默认读取每个数字 8 个字节（64 位）。

# r - 在 hsv() 中使用来自数据帧的逗号分隔值

> ID：10974283
> 
> 赞同：0
> 
> 时间：2012-06-11T03:41:11.623
> 
> 标签：r

这个问题与我[在这里](https://stackoverflow.com/questions/10941878)问的问题有关。我正在尝试使用数据框列中指定的颜色为散点图中的各个点着色。数据来自制表符分隔的文件，如下所示：

```
> dput(ztestHSV)
structure(list(y = c(0, -1, -1, -2), x = c(0, 2, 0, -2), group = c("m", 
"m", "m", "s"), colorHSV = c("0.02,0.83,0.89", "0.59,0.59,0.85", 
"0.25,0.45,0.8", "0.55,0.41,0.8"), colorText = c("red", "blue", 
"green", "turquoise")), .Names = c("y", "x", "group", "colorHSV", 
"colorText"), class = "data.frame", row.names = c(NA, -4L)) 
```

IE

```
 y  x group  colorHSV       colorText
1  0  0     m  0.02,0.83,0.89       red
2 -1  2     m  0.59,0.59,0.85      blue
3 -1  0     m  0.25,0.45,0.8      green
4 -2 -2     s  0.55,0.41,0.8  turquoise 
```

以下代码适用于 R 中可用的预定义颜色集：

```
ztestHSV=read.table(file="testHSV.txt",sep="\t",header=TRUE,
                    colClasses=c("numeric","numeric","character","character","character"))

plot(ztestHSV[ztestHSV$group=='m',]$x,ztestHSV[ztestHSV$group=='m',]$y,type='n')
points(ztestHSV[ztestHSV$group=='m',]$x,ztestHSV[ztestHSV$group=='m',]$y,
       pch=23,cex=1.5,
       bg=ztestHSV[ztestHSV$group=='m',]$colorText
) 
```

我真正想做的是`hsv()`用来指定颜色。但我无法弄清楚正确的`bg`命令来使它工作。我已经尝试了几件事，并在下面列出了它们以及相关的结果。

1

```
bg=hsv(as.numeric(ztestHSV$colorHSV))

Error in hsv(as.numeric(ztestHSV$colorHSV)) : 
bad hsv to rgb color conversion
In addition: Warning message:
In hsv(as.numeric(ztestHSV$colorHSV)) : NAs introduced by coercion 
```

2

```
bg=hsv(as.numeric(strsplit(ztestHSV$colorHSV,",")))

Error in hsv(as.numeric(strsplit(ztestHSV$colorHSV, ","))) : 
(list) object cannot be coerced to type 'double' 
```

3

```
bg=hsv(unlist(strsplit(ztestHSV$colorHSV,","))) 
```

以上运行但使用了错误的背景颜色

4

```
bg=hsv(as.numeric(unlist(strsplit(ztestHSV$colorHSV,",")))) 
```

以上不会产生错误但不会填充背景颜色

似乎这是将colorHSV的字符串转换为`hsv()`可以使用的东西的问题，但我不知道该怎么做。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:54:59.700

如果您通过使用类似`dput()`显示您正在使用的数据的方式提供一个易于重现的示例，这将有所帮助：

```
> dput(ztestHSV)
structure(list(y = c(0L, -1L, -1L, -2L), x = c(0L, 2L, 0L, -2L
), group = structure(c(1L, 1L, 1L, 2L), .Label = c("m", "s"), class = "factor"), 
    colorHSV = c("0.02,0.83,0.89", "0.59,0.59,0.85", "0.25,0.45,0.8", 
    "0.55,0.41,0.8"), colorText = structure(c(3L, 1L, 2L, 4L), .Label = c("blue", 
    "green", "red", "turquoise"), class = "factor")), .Names = c("y", 
"x", "group", "colorHSV", "colorText"), row.names = c(NA, -4L
), class = "data.frame") 
```

您可以将字符串向量转换为数字列表，然后使用它`do.call()`来调用`hsv()`每个数字，如下所示：

```
> bg <- sapply(strsplit(ztestHSV$colorHSV, ","), function(x) do.call(hsv, as.list(as.numeric(x))))
> dput(bg)
c("#E33D27", "#5994D9", "#9ECC70", "#78B3CC")
> plot(1:4, pch = 21, cex = 20, bg = bg) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:55:42.107

您只需要将一列拆分为三个单独的列，然后将每个列传递给`hsv`. 最方便的方法（据我所知）是使用`colsplit`from **reshape2**：

```
> hsvCols <- reshape2::colsplit(ztestHSV$colorHSV,",",names = c('h','s','v'))
> with(hsvCols,hsv(h,s,v))
[1] "#E33D27" "#5994D9" "#9ECC70" "#78B3CC" 
```

然后你可以将它们分配给`bg`并绘制。请注意，这节省了相当多的输入，并且必须处理将值显式强制转换为数字。

# java - 用于在单列中/从单列中存储和检索多个/不同值的 SQL 结构？

> ID：10974284
> 
> 赞同：2
> 
> 时间：2012-06-11T03:41:16.553
> 
> 标签：java, mysql, sql, database-design

谁能告诉/建议我如何在单列中/从单列中存储和检索多个/不同值的评论？

场景：一些用户发布了一个帖子，而其他用户则在上面发表评论。

在这里，我在 MySQL 数据库中有一个表名“posts”，其中包含以下列“id”、“posted_by”、“post”和“comments”

现在我被困在评论部分，我试图将不同人的评论存储在单个列中，并在帖子下方检索和显示评论。

我想过使用 ALTER 并为不同的评论创建新列，但我认为这不是一个好主意，这就是我发布这个问题的原因。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:44:27.170

只需创建另一个表

```
COMMENT

id comment commenter post datetime 
```

并`comments`从 POST 表中删除，所以现在 POST 可以有很多 COMMENT

# jquery - 如何创建无限iscroll？

> ID：10974285
> 
> 赞同：0
> 
> 时间：2012-06-11T03:41:40.483
> 
> 标签：jquery, iscroll

我在我的网页上创建了 iScroll，它运行良好。但现在我想让它作为无限 iscroll 工作，但我不知道该怎么做。

我的 iscroll 代码是：

```
myCarousel_up = new iScroll('scroller_upCarousel', {
        snap: true,
        momentum: false,
        hScrollbar: false,
                vScrollbar: false,
        desktopCompatibility:true,
        onScrollEnd: function () {

            }
    }); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T13:38:01.783

首先你需要添加**iscroll-infinite.js**

那么你需要编写ajax函数来无限循环加载或追加数据。

```
function ajax (url, parms) {
parms = parms || {};
var req = new XMLHttpRequest(),
    post = parms.post || null,
    callback = parms.callback || null,
    timeout = parms.timeout || null;

req.onreadystatechange = function () {
    if ( req.readyState != 4 ) return;

    // Error
    if ( req.status != 200 && req.status != 304 ) {
        if ( callback ) callback(false);
        return;
    }

    if ( callback ) callback(req.responseText);
};

if ( post ) {
    req.open('POST', url, true);
    req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
} else {
    req.open('GET', url, true);
}

req.setRequestHeader('X-Requested-With', 'XMLHttpRequest');

req.send(post);

if ( timeout ) {
    setTimeout(function () {
        req.onreadystatechange = function () {};
        req.abort();
        if ( callback ) callback(false);
    }, timeout);
}
} 
```

还使用 ajax 函数调用 iScroll 加载函数

```
var myScroll;

function loaded () {
myScroll = new IScroll('#wrapper', {
    mouseWheel: true,
    infiniteElements: '#scroller .row',
    //infiniteLimit: 2000,
    dataset: requestData,
    dataFiller: updateContent,
    cacheSize: 1000
});
}

function requestData (start, count) {
ajax('dataset.php?start=' + +start + '&count=' + +count, {
    callback: function (data) {
        data = JSON.parse(data);
        myScroll.updateCache(start, data);
    }
});
}

function updateContent (el, data) {
el.innerHTML = data;
}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false); 
```

**请参考以下链接进行演示。**

[http://lab.cubiq.org/iscroll5/demos/infinite/](http://lab.cubiq.org/iscroll5/demos/infinite/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T04:32:14.277

您可以使用 ajax 函数，例如：

```
myCarousel_up = new iScroll('scroller_upCarousel', {
        snap: true,
        momentum: false,
        hScrollbar: false,
        vScrollbar: false,
        desktopCompatibility:true,
        onScrollEnd: function () {
        if($('#scroller_upCarousel').hasClass('scrolling')) {
            $('#scroller_upCarousel').removeClass('scrolling');
        } 
        ajaxActionToGetMoreList(); //Execute custom function(ajax call)
    }
}); 
```

# wpf - 鼠标进入命中区域会导致面板飞入并填充命中区域

> ID：10974287
> 
> 赞同：0
> 
> 时间：2012-06-11T03:42:28.893
> 
> 标签：wpf, events, animation, mouse

我觉得我已经尽一切努力使这项工作正常进行。我有一个带有 MouseEnter 和 MouseLeave 事件的矩形，它们会导致飞入动画开始和停止。问题是，当飞入到达时，它会覆盖矩形，并导致 MouseLeave 事件触发，因为鼠标不再位于矩形上。该面板在屏幕外开始，并具有作为动画应用的 scaleTransform 和 translateTransform。一切都在 Blend 中完成。

对导致触发器本身的东西进行动画处理很容易。对与触发器对象分开的东西进行动画处理似乎更困难，但随后又覆盖了触发器对象。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:06:27.857

看一下 IsHitTestVisible="False" 属性，您可以在应该飞入的矩形上设置它以防止它接受鼠标输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:35:25.880

所以我通过在每次为矩形点击区域和面板调用 MouseEnter 和 MouseLeave 时检查 IsMouseOver 属性来解决它。

```
 private bool isMouseOverRightPanelOrHitRect()
    {
        if (mRightPanel.IsMouseOver || rightHitRect.IsMouseOver)
            return true;
        return false;
    }

    private void handleRightPanelAnimation(object sender, MouseEventArgs e)
    {
        if (isMouseOverRightPanelOrHitRect())
            mRightPanel_FlyOn();
        else
            mRightPanel_FlyOff();
    }

    private void mRightPanel_FlyOn()
    {
        if (!mRightPanel.Docked)
            VisualStateManager.GoToElementState(mCanvas, rightOn.Name, true);
    }

    private void mRightPanel_FlyOff()
    {
        if (!mRightPanel.Docked)
            VisualStateManager.GoToElementState(mCanvas, rightOff.Name, true);
    } 
```

# php - 跨多个文件连接到mysql数据库的最有效方法（PHP）

> ID：10974288
> 
> 赞同：7
> 
> 时间：2012-06-11T03:42:31.413
> 
> 标签：php, mysql

有这么多方法可以达到相同的结果，我想知道哪种方法是初始化 mysql 连接的最有效方法。

注意：最近我还在 PHP 文档中发现 mysql_connect 现在已停用，我所有的代码目前都在使用 mysql_connect。有足够的理由转换吗？

我想做的是：

1.  创建一个database.php。
2.  将要连接到数据库的 PHP 页面将包含此文件，这样我就不必编写大量代码来连接到数据库。

那么这个database.php应该怎么做才能最有效。

```
1\. $con = mysql_connect("etc"...)
   mysql_select_db("databse") 
```

// 从这里我可以包含这个文件并开始进行查询。- 有效，但我不确定它是否是最好的方法。

```
2\. //database.php
   $mysqli = new mysqli('localhost', 'user', 'pwd', 'database');
   // in other files
   $mysqli->query("SELECT ...") 
```

1.  还是我应该使用持久连接？（该站点是相当重的数据库，并且会有很多页面生成，不超过100个用户同时登录）

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T04:12:47.837

我今天刚刚将代码中 MySQL 扩展的所有功能更改为 PDO。

为了最灵活，您应该使用如下一般连接创建“database.php”：

```
<?php
$pdo = new PDO('mysql:host=example.com;dbname=database;charset=UTF-8', 
               'username', 
               'password'); 
```

然后在其他页面中，使用`require()`包含这样的文件：

```
<?php
require('database.php');

// Example with 'query'
$queriedSQL = $pdo->query('SELECT * FROM table');

// Example with 'prepare'
$preparedSQL = $pdo->prepare('SELECT * FROM other_table WHERE id = ?');
$preparedSQL->setFetchMode(PDO::FETCH_ASSOC);

while($result = $queriedSQL->fetch(PDO::FETCH_ASSOC)) {
  $preparedSQL->execute(array($result['id']));
  $preparedSQLResult = $preparedSQL->fetch();
  // Process code here
} 
```

或者，你可以以“index.php”为核心，然后处理URL或`$_GET[]`包含相应的文件（如所有CMS系统，Wordpress等）。

这样，当某些数据（主机、用户名、密码和/或数据库名称）发生更改时，您可以避免更改代码量。

关于持久连接，PHP 允许这样做，但您可以在[此处](http://www.php.net/manual/en/function.mysql-pconnect.php#85670)找到一些缺点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T04:01:26.880

您应该做的第一件事是创建一个 mysql.config.php 文件。

```
<?php
define('MYSQL_HOST','');
define('MYSQL_USER','');
define('MYSQL_PASSWORD','');
define('MYSQL_DATABASE','');
?> 
```

您应该做的第二件事是创建一个处理所有数据库连接细节的 mysql.class.php 文件（模拟这种行为）。只需添加新函数来扩展功能，例如 numRows 函数。

```
<?php
require_once 'mysql.config.php';
class MySQL {
private $query;
private $result;
public function __construct($host = MYSQL_HOST, $user = MYSQL_USER, $password = MYSQL_PASSWORD, $database = MYSQL_DATABASE) {
    if (!$con = mysql_connect($host,$user,$password)) {
        throw new Exception('Error connecting to the server');
    }
    if (!mysql_select_db($database,$con)) {
        throw new Exception('Error selecting database');
    }
}
public function query($query) {
    $this->query = $query;
    if (!$this->result = mysql_query($query)) {
        throw new Exception('Error performing query '.$query);
    }
}
public function numRows() {
    if ($this->result) return mysql_num_rows($this->result);
    return false;
}
}
?> 
```

您需要做的最后一件事是在您的应用程序中使用这些文件。

```
<?php
require_once 'mysql.class.php';
try {
    $db = new MySQL();
    $db->query('SELECT username FROM login WHERE username = "'.$USERNAME.'" LIMIT 1');
    if ($db->numRows() == 1) print_json(array('user'=>true),true);
    else print_json(array('user'=>false),true);
} catch(Exception $e) {
    echo $e->getMessage();
    exit();
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T04:02:03.340

由于该站点的数据库很重，我建议您使用 PDO 进行数据库连接。还使用事务进行多个查询，以减少 PHP-MySQL 流量。

详细信息：[http ://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T04:04:04.660

相对于 PHP 编程语言，MySQL 是旧的数据库驱动程序，而 MySQLi 是改进的驱动程序。MySQLi 利用 MySQL 5 的新功能。从 php.net 站点逐字删除：

*   面向对象的接口
*   支持准备好的报表
*   支持多个语句
*   交易支持
*   增强的调试功能
*   嵌入式服务器支持 您可以选择使用 mysql、mysqli 或 PDO。

如果您只是在寻找一个关系数据库，那么您只需要查看 MySQL，尽管有很多可用的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T04:15:05.600

RE: "should I use persistent connection"

No. If your database is "heavy", persistant connections won't really help - in fact, they may hinder with PHP scripts that stay open a long time while processing data. Persistent connections only speed up the time to connect to the database IN SOME CIRCUMSTANCES only. You MAY be able to save a few ms per script run, but you'll lose more running clean up functions to release locks or transactions unless you write carefully. So unless you have lots of very, very short scripts getting short, sharp db connections and then moving on, or the DB server is a long way from the web server, don't sweat on this point.

PDO has been suggested in other answers, so I've marked them up as it's going to be the best for you.

# java - java中的嵌套类和实现接口

> ID：10974289
> 
> 赞同：0
> 
> 时间：2012-06-11T03:42:48.823
> 
> 标签：java, iterator, nested, nested-class, implements

虽然这段代码来自算法文本，但我在嵌套类和接口方面有点麻烦——实际上，我 90% 的困惑源于这段代码是如何实现接口的。同样，这个问题与算法本身无关。

据我了解，此代码使用嵌套类，以便它可以访问 ResizingArrayStack 中的私有实例变量（本文使用约定将所有实例变量声明为私有以进行封装）。

`Iterable`界面是这样的：

```
public Iterator<Item> { Iterator<Item> iterator(); } // ignore the quotes 
```

`Iterator`界面是这样的：

```
public interface Iterator<Item> { boolean hasNext(); Item next(); void remove(); } 
```

我的问题是所有这些如何在下面显示的代码中连接。

父类实现了Iterable接口，但是ReverseArrayIterator实现Iterator的时候，Iterator接口又是从哪里来的呢？它是来自 Iterator 实例方法，还是来​​自 Iterable 接口？直觉告诉我它直接从 Iterator 实例方法实现，最终从 Iterable 接口实现（有点像 extends 工作原理？）。

对不起，我缺乏 OOP 知识。这篇文章只是简单地谈论它，我被告知我不必知道这些（我可能不需要，只要我了解算法），但是我必须理解它大声笑。我就是无法忘记这件事。提前致谢。

```
// from http://algs4.cs.princeton.edu/13stacks/ResizingArrayStack.java.html
import java.util.Iterator;
import java.util.NoSuchElementException;

public class ResizingArrayStack<Item> implements Iterable<Item> {
    private Item[] a;         // array of items
    private int N;            // number of elements on stack

    // create an empty stack
    public ResizingArrayStack() {
        a = (Item[]) new Object[2];
    }

    public boolean isEmpty() { return N == 0; }
    public int size()        { return N;      }

    // resize the underlying array holding the elements
    private void resize(int capacity) {
        assert capacity >= N;
        Item[] temp = (Item[]) new Object[capacity];
        for (int i = 0; i < N; i++) {
            temp[i] = a[i];
        }
        a = temp;
    }

    // push a new item onto the stack
    public void push(Item item) {
        if (N == a.length) resize(2*a.length);    // double size of array if necessary
        a[N++] = item;                            // add item
    }

    // delete and return the item most recently added
    public Item pop() {
        if (isEmpty()) { throw new RuntimeException("Stack underflow error"); }
        Item item = a[N-1];
        a[N-1] = null;                              // to avoid loitering
        N--;
        // shrink size of array if necessary
        if (N > 0 && N == a.length/4) resize(a.length/2);
        return item;
    }

    public Iterator<Item> iterator()  { return new ReverseArrayIterator();  }

    // an iterator, doesn't implement remove() since it's optional
    private class ReverseArrayIterator implements Iterator<Item> {
        private int i = N;
        public boolean hasNext()  { return i > 0;                               }
        public void remove()      { throw new UnsupportedOperationException();  }

        public Item next() {
            if (!hasNext()) throw new NoSuchElementException();
            return a[--i];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T03:53:06.750

> 父类实现了Iterable接口，但是ReverseArrayIterator实现Iterator的时候，Iterator接口又是从哪里来的呢？

这个问题没有多大意义。Iterator**接口**“来自”Java SE 类库（因为您的代码导入了它），并且由`ReverseArrayIterator`该类实现。在运行时，对方法的调用会在您调用它时`ResizingArrayStack.iterator()`创建类的实例。`ReverseArrayIterator`

> 直觉告诉我它直接从 Iterator 实例方法实现，最终从 Iterable 接口实现（有点像 extends 工作原理？）。

与`Iterable`接口的联系是外部类实现了它。但`Iterable`只是“意味着”有一种`iterator()`方法可以被调用来创建`Iterator`适当类型的实例。没有特殊的“有点像扩展工作”的魔法发生。在这个例子中，它只是实现接口的类。

另一个“不同”的事情`ReverseArrayIterator`是嵌套类，因此可以访问父对象的私有状态。在这种情况下`a`和`N`。

这里发生的是许多独立的事物（语言特征和设计模式）正在组合以实现特定的整体效果。总体效果是可以使用“for each”循环来迭代堆栈的元素。

# ruby-on-rails - 存储重复信息 Active Record 模型或仅使用 has_many :through？

> ID：10974290
> 
> 赞同：0
> 
> 时间：2012-06-11T03:43:01.130
> 
> 标签：ruby-on-rails, database-design, activerecord

Rails 相对较新，我正在为几个朋友开发一个简单的 Rails 应用程序来限制 nfl 游戏。

我正在创建一个活动记录模型，该模型对体育比赛的信息进行建模，例如主队、访客、开始时间等，以及与该比赛的障碍相关的信息（最喜欢的、失败的、总的等）。

这感觉很尴尬，因为对于其中几个字段，我基本上存储了重复的信息（例如，一个团队始终要么是 home_team 要么是访客，并且始终要么是最喜欢的要么是失败者）

所以，我的模型看起来像这样：

```
create_table "games", :force => true do |t|
    t.integer  "week"
    t.string   "home_team"
    t.string   "visitor_team"
    t.string   "favorite"
    t.decimal  "line"
    t.decimal  "total"
    t.string   "kickoff"
    t.string   "status"   #['open', 'completed']
    t.datetime "created_at",   :null => false
    t.datetime "updated_at",   :null => false
end 
```

为了使模型尽可能简洁，我只定义了必填字段（主队、访客和最喜欢的字段），然后我在我的游戏模型中编写了一些简单的方法来返回有关比赛的其他有用信息，例如，而不是列出每个在模型中组队两次（一次为失败者/最爱和主场/客场）

```
def underdog
    teams = [self.home_team, self.visitor_team]
    teams.each do |team|
        return team if team != self.favorite
    end
end 
```

这行得通，但我在争论是否更有意义为游戏信息创建一个单独的模型（并使游戏模型本身保持最小）并仅使用 has_many => :through 或尝试其他方法，因为它们让我拥有我的模型设置似乎感觉不正确将重复信息存储在同一个表中。任何建议或赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:04:53.323

1.  对于初学者，请查找数据库规范化。
2.  不要存储派生/隐含字段，除非您这样做是为了处理其他复杂情况。例如。有时您这样做是为了提高性能，但您了解缺点/风险。在这种情况下，(a) 如果你知道主队，你可以推导出客队。(b) 同样，如果你知道最喜欢的人，你可以推导出失败者。（我不知道这条线，但如果它包含关于球队的信息，那么你可以从那里得到最爱和失败者）。

这是您重构的代码：

```
def underdog
  home_team == favorite_team ? visitor_team : home_team
end 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T03:55:33.160

这对我来说看起来不错。一般来说，你应该避免使用 has-many-through 关系，因为它们很混乱和复杂，而且通常是不必要的。

不过，在这种情况下，我实际上建议创建一个`Team`模型。由于是 NFL，因此这些球队永远不会改变，但将其拉出可以减少您需要填写数据库的字符串数量。

我还将重构原始方法：

```
def underdog
    if home_team == favorite_team
        home_team
    else
        visitor_team
    end
end 
```

在 Ruby 中，您不需要显式调用`return`，因为方法中的最后一条语句是隐式返回的。此外，在 Ruby 中以这种方式使用循环将被认为是错误的形式。

此外，您应该看看[这篇](http://www.themomorohoax.com/2009/05/21/when-to-use-self-in-ruby-rails-models)关于何时`self`在模型方法中使用的文章。

# android - 在android中寻找一个选项微调器/选项轮，如控件

> ID：10974293
> 
> 赞同：0
> 
> 时间：2012-06-11T03:44:24.957
> 
> 标签：android, user-interface, spinner

寻找一个控件，允许一次为 android 选择一个文本值，每侧有 2 个箭头。不确定控件的名称，但这是一个示例图像：

![在此处输入图像描述](../Images/392f62e6908d0c80249ed2233cba2969.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:12:59.993

如果是约会，我可能会建议你使用看起来像[这样](http://i.stack.imgur.com/yS9XY.png)的 DatePicker 。否则，如果是时间，那么您可能想要这样的[东西](http://i.stack.imgur.com/P5GZv.png)。

但是，如果您正在寻找类似 NumberPicker 的东西，它似乎只有 API 11 及更高版本可用。因此，如果您愿意，您可能需要自定义您自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:16:22.933

嘿，我想看看[这个](http://android-devblog.blogspot.in/2010/05/wheel-ui-contol.html)滚轮控件。第三方创建的自定义控件。他还在他的博客中提供了其他详细信息..您可以根据需要对其进行修改..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:50:04.350

创建了我自己的，这对我很有用。厨房控制帮助很大。随意指出任何问题。

```
import android.content.Context;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.*;
import nz.co.nuffie.android.crichq.R;

import java.util.ArrayList;
import java.util.List;

public class ScrollWheelControl extends LinearLayout{
    private final ArrayList<String> textList = new ArrayList<String>();
    private ArrayAdapter optionAdapter = null;
    private AdapterView.OnItemSelectedListener itemSelectedListener = null;

    public ScrollWheelControl(Context context){
        super(context);
    }

    public ScrollWheelControl(Context context, AttributeSet attrs){
        super(context, attrs);
        initView(context);
    }

    public ScrollWheelControl(Context context, AttributeSet attrs, int defStyle){
        super(context, attrs, defStyle);
        initView(context);
    }

    public void initView(Context context) {
        View.inflate(context, R.layout.scroll_wheel_control, this);

        optionAdapter = new ArrayAdapter<String>(context, android.R.layout.simple_gallery_item, textList )
        {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View v = super.getView(position,convertView,parent);
                if(v instanceof TextView){//Just in case.
                    TextView txt = (TextView)v;
                    Gallery.LayoutParams glp = new Gallery.LayoutParams(Gallery.LayoutParams.FILL_PARENT, Gallery.LayoutParams.FILL_PARENT);
                    txt.setGravity(Gravity.CENTER);
                    txt.setLayoutParams(glp);
                }
                return v;
            }
        };

        optionAdapter.notifyDataSetChanged();

        final Gallery g = (Gallery) findViewById(R.id.gOptionSelect);
        g.setAdapter(optionAdapter);

        final Button btnLeft = (Button) findViewById(R.id.btnLeft);
        final Button btnRight = (Button) findViewById(R.id.btnRight);
        g.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> list, View view, int position, long id) {
                if(position >= textList.size()-1){
                    btnRight.setTextColor(Color.GRAY);
                }else
                    btnRight.setTextColor(Color.WHITE);

                if(position == 0){
                    btnLeft.setTextColor(Color.GRAY);
                }else
                    btnLeft.setTextColor(Color.WHITE);

                if(itemSelectedListener != null){
                    itemSelectedListener.onItemSelected(list,view,position,id);
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {
            }
        });
        btnLeft.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                g.onFling(null, null, 2000, 0);
            }
        });
        btnRight.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                g.onFling(null, null, -2000, 0);
            }
        });
    }

    public void setOnItemListener(AdapterView.OnItemSelectedListener setItemSelectedListener){
        itemSelectedListener = setItemSelectedListener;
    }

    public void addTextItems(List<String> list){
        textList.addAll(list);
        if(optionAdapter != null){
            optionAdapter.notifyDataSetChanged();
        }
    }
} 
```

XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:padding="5dp">

    <Button
        android:id="@+id/btnLeft"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="\u003C"
        android:background="@android:color/transparent"
        android:textColor="@android:color/white"
        android:shadowColor="@android:color/black"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2"
        android:textStyle="bold"
        android:minWidth="15dp"
            />

    <Gallery
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:id="@+id/gOptionSelect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:spacing="0dp">
    </Gallery>

    <Button
        android:id="@+id/btnRight"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        android:text="\u003E" 
        android:textColor="@android:color/white"
        android:shadowColor="@android:color/black"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2"
        android:textStyle="bold"
        android:minWidth="15dp"
            />

</LinearLayout> 
```

# mongodb - mojito 和连接 mongodb 的最佳方式

> ID：10974303
> 
> 赞同：0
> 
> 时间：2012-06-11T03:46:09.353
> 
> 标签：mongodb, mojito

我开始使用 mojito yahoo 框架，我想与 mongodb 一起使用来构建一个简单的应用程序，但没有关于如何将 mongodb 作为 mojito 应用程序的外部模块包含的资源，我正在阅读关于 mongoskin 的信息，它是 node-mongodb-native 的包装器，现在让我感到困惑的是如何将 mojito 应用程序与 mongodb 连接起来，所以有什么建议吗？

我阅读了如何扩展 mojito 插件[的 yahoo mojito 文档](http://developer.yahoo.com/cocktails/mojito/docs/topics/mojito_extensions.html)的开发人员说明，但我仍然不清楚如何使用 mongodb

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:38:23.467

我在两个项目中使用 Mojito 进行开发，如果您只是为 nodejs 安装 mongodb 驱动程序，就像本教程解释[http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html)一样，然后你开始在你的 mojito 控制器或模型中调用 nodejs mongodb 对象来连接到你的数据库？

# ruby-on-rails - Rails 简单表单自定义关联选择字段

> ID：10974304
> 
> 赞同：18
> 
> 时间：2012-06-11T03:46:24.797
> 
> 标签：ruby-on-rails, forms, model, simple-form

我有一个选择字段，我想在它上面放置一个名为 name 的自定义属性，我尝试这样做：

```
 <%= f.association  :in_charge, :collection => User.lawyer.map{ |l| [l.name, l.id, {:name => l.name.downcase}] } %> 
```

它可以工作并生成额外的属性，但有一个问题，选择值属性更改为模型名称属性，在本例中为 l.name。我更改了位置并将 l.id 放在首位，但显示了 id 属性，它们被重复了，知道为什么会这样吗？

是否有另一种方法可以在关联选择字段中定义自定义属性？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-13T16:09:53.787

使用由 SimpleForm 输入包装的 Rails [select()](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)表单助手。

```
 <%= f.input :in_charge do %>
   <%= f.select :county_id, User.lawyer.map{ |l| [l.name, l.id, {:name => l.name.downcase}] } %>
 <% end %> 
```

您的代码无法按预期工作，因为在底层，SimpleForm 调用了不支持选项标签中的额外属性的[collection_select() 。](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

SimpleForm 自述文件也有[解决方案](https://github.com/plataformatec/simple_form#wrapping-rails-form-helpers)。但是直到我自己解决了这个问题我才注意到:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-12T10:27:27.397

对于记录，这似乎现在正在工作：

```
f.association :product, collection: Product.all.map { |product| [product.name, product.id, {data: {description: product.description}}] } 
```

SimpleForm 版本：

```
$ bundle show simple_form
/Users/josh/.rvm/gems/ruby-2.4.1@a4aa2/gems/simple_form-4.1.0 
```

# ruby-on-rails - 在 RoR 中使用双 :through :through

> ID：10974305
> 
> 赞同：1
> 
> 时间：2012-06-11T03:46:28.017
> 
> 标签：ruby-on-rails, database-design, activerecord

我正在努力弄清楚为此的数据库设计，但我无法完全理解。

A`User`属于许多，每个`Networks`都有一个。多个可能在一个（管理员、编辑器、查看器等）中有相同的。主要数据是一个. A可以根据他们在.`Role``Network``Users``Role``Network``Event``User``Events``Role``Network`

用户是否通过 through 访问事件？

```
class User < ActiveRecord::Base
    has_many :roles
    has_many :networks, :through => :roles
    has_many :events, :through => :networks
end

class Role < ActiveRecord::Base
    belongs_to :network
    has_many :users
end

class Networks < ActiveRecord::Base
    has_many :roles
    has_many :users, :through => :roles
    has_many :events
end

class Events < ActiveRecord::Base
    belongs_to :network
    has_many :roles, :through => :network
    has_many :users, :through => :roles
end 
```

我不知道我是否离我很远，或者真的很接近我正在寻找的东西。任何帮助表示赞赏。

# java - 如何在android的段落中找到特定的字符串？

> ID：10974307
> 
> 赞同：1
> 
> 时间：2012-06-11T03:46:43.477
> 
> 标签：java, android

在我的项目中，数据与图像标签一起以 html 格式存储。例如以下数据以 html 格式存储，其中包含 2 到 3 张图像。

众所周知，特蕾莎修女原名 Agnes Gonxha Bojaxhiu。虽然出生于 1910 年 8 月 26 日，但她认为 8 月 27 日，即她受洗的那一天，是她的“真正生日”。“凭血缘关系，我是阿尔巴尼亚人。按公民身份，印度人。凭着信仰，我是一名天主教修女。至于我的使命，我属于世界。至于我的心，我完全属于耶稣的心。” **img ----- src="image1.png" ---->** 特蕾莎修女创立了慈善传教士，一个罗马天主教的宗教会众，于 2012 年成立由超过 4,500 位姐妹组成，活跃于 133 个国家/**地区。img ----- src="image2.png" ---->**. 她获得了无数荣誉，包括 1979 年的诺贝尔和平奖。她拒绝了为获奖者举办的传统仪式宴会，并要求将 192,000 美元的资金提供给印度的穷人。 **img ----- src="image3.png" ---->**

**现在从上面的数据中，我需要找到该段落有多少图像，并且需要获取所有图像名称以及扩展名，并且应该在 android.xml 中显示它们。尝试拆分但没有用。请帮助我解决这个问题。**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:51:09.987

您可以使用 String 类的 contains 方法

```
String a="hello";
String b="hello my name is this";
if(b.contains(a)){

} 
```

它将返回真或假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:15:52.507

尝试这个，

利用`BreakIterator Class`

例如：

```
BreakIterator boundary = BreakIterator.getSentenceInstance();

      boundary.setText(Your_entire_string);

      int start = boundary.first();

      int end = boundary.next(); 
```

然后在循环的帮助下，您可以遍历所有行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T04:35:48.797

检查下面的出现次数

```
 String searchFor = "is";
  String base = "This is the method";
  int len = searchFor.length();
  int result = 0;
  if (len > 0) 
  {  
     int start = base.indexOf(searchFor);
     while (start != -1) 
     {
        result++;
        start = base.indexOf(searchFor, start+len);
     }
  }
  System.out.println(result); 
```

更多细节：[http ://www.roseindia.net/java/string-examples/java-string-occurrence-in-a-string.shtml](http://www.roseindia.net/java/string-examples/java-string-occurrence-in-a-string.shtml)

# android - 剪辑布局到叠加

> ID：10974310
> 
> 赞同：0
> 
> 时间：2012-06-11T03:47:04.907
> 
> 标签：android, overlay, android-mapview

我正在开发的应用程序有一点问题。

在应用程序中，我有一个覆盖在屏幕中央的 MapView（一个以编程方式绘制的简单箭头）。

我也有一个布局，它由两个按钮和两个文本视图组成，基本上形成了一个条形图。

现在我想将条夹到覆盖层上，使其居中并带有一点 y 轴偏移量，因此无论屏幕尺寸或分辨率如何，它基本上都在具有相同偏移量的条上。

作为requestet，这里是一个布局草图：

![在此处输入图像描述](../Images/a73e6e3b08c3b6c06a9818d88181034e.png)

我感谢任何帮助或提示。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:28:39.020

将 the`MapView`和 bar 布局都放在`RelativeLayout`. 在地图之后列出栏以使其“在顶部”呈现。要形成高于中心的偏移量，请添加一个比在两个维度上居中的覆盖箭头稍大的空间视图。将条垂直对齐空间上方并水平居中。（实际上，您也可以在 XML 中将居中箭头用作 ImageView 或形状可绘制视图，并使用它而不是空间。）

# java - 如何在android中获取src og imageview

> ID：10974314
> 
> 赞同：1
> 
> 时间：2012-06-11T03:47:42.423
> 
> 标签：java, android

我正在从 android 手机摄像头拍照并将其放在 imageview 上。现在我想获取 imageview 的 src 以便我可以将它上传到服务器。如何获取 imageview 的 src？

这是我的代码

```
public class CameraActivity extends Activity implements View.OnClickListener {
ImageView iv;
Button bCapture, bSetWall;
Intent i;
int CameraResult = 0;
Bitmap bmp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initialize();
    InputStream is = getResources().openRawResource(R.drawable.ic_launcher);
    bmp = BitmapFactory.decodeStream(is);
}

private void initialize() {
    iv = (ImageView)findViewById(R.id.ivCamera);
    bCapture = (Button)findViewById(R.id.bCapture);
    bSetWall = (Button)findViewById(R.id.bSetWall);
    bCapture.setOnClickListener(this);
    bSetWall.setOnClickListener(this);
}

public void onClick(View v) {
    switch(v.getId()) {
    case R.id.bCapture:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, CameraResult);
        break;
    case R.id.bSetWall:
        try {
            getApplicationContext().setWallpaper(bmp);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);
        //String v = iv.getTag().toString();
        //Toast.makeText(getApplicationContext(), v, Toast.LENGTH_LONG).show();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:59:14.843

将位图转换为字节数组并发送到服务器

```
Bitmap bmp = intent.getExtras().get("data");
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:07:35.417

可以上传图像视图而不保存在 sdcard 或手机位置存储中。如果要在从相机拍照后保存图像，则需要将图像视图转换为位图并将其保存在 sdcard 中。同样，您需要在位图中转换 sdcard 图像以将其上传到服务器。

[链接1](https://stackoverflow.com/questions/10900893/save-image-to-sdcard-from-imageview)

[关联](https://stackoverflow.com/questions/10551431/upload-image-from-android-to-java-servlet-and-save-it)

谢谢

# php - opendir 试图找到现在不存在的路径，因为它们已重命名

> ID：10974318
> 
> 赞同：1
> 
> 时间：2012-06-11T03:49:27.513
> 
> 标签：php, error-suppression

我正在为 dirs 设置重命名功能，作为 crud 系统的一部分，并正确设置了一个过程来重命名上传目录的子目录，并且重命名过程正在工作，这意味着 dirs 正在相应地重命名，但我从 opendir 收到错误代码. 显然找不到路径，因为它们是已重命名的路径。不知道如何解决这个价值百万美元的问题？

控制器：

```
private function _edify_dirs_recursive($targets, $new_dirs)
{
    $targets = rtrim(preg_replace(array("/\\\\/", "/\/{2,}/"), "/", $targets), "/");
    $new_dirs = rtrim(preg_replace(array("/\\\\/", "/\/{2,}/"), "/", $new_dirs), "/");
    $explode_targets = explode(',',$targets);
    $explode_new_dirs = explode(',',$new_dirs);

    foreach($explode_targets as $target_keys):
        $dirs_obsolete = "./uploads/$target_keys";
        foreach($explode_new_dirs as $new_dirs_keys):
            $dirs_new = "./uploads/$new_dirs_keys";
            $chid_generator = @rename($dirs_obsolete,$dirs_new);
            if($dhandle = @opendir("./uploads/$target_keys"))
            {
                while(FALSE !== ($entry = @readdir($dhandle)))
                {
                    { true; }
                }
                //closedir must be within if logic
                @closedir($dhandle);
            }
        endforeach;
    endforeach;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:04:43.970

由于您刚刚重命名`./uploads/$target_keys`为`./uploads/$new_dirs_keys`，因此您不应该尝试这样做`opendir("./uploads/$target_keys")`，而是`opendir("./uploads/$new_dirs_keys")`.

# session - 使用 RoutingSession 时在 sqlalchemy 中调用了两次“get_bind”方法

> ID：10974320
> 
> 赞同：0
> 
> 时间：2012-06-11T03:49:40.890
> 
> 标签：session, sqlalchemy, bind, master-slave

我正在使用 sqlalchemy 的主/从，通过 RoutingSession 之类的

```
engines = {
    'master':create_engine("sqlite:///master.db"),
    'other':create_engine("sqlite:///other.db"),
    'slave1':create_engine("sqlite:///slave1.db"),
    'slave2':create_engine("sqlite:///slave2.db"),
}

from sqlalchemy.orm import Session, sessionmaker
import random

class RoutingSession(Session):
    def get_bind(self, mapper=None, clause=None):
        if mapper and issubclass(mapper.class_, MyOtherClass):
            return engines['other']
        elif self._flushing:
            return engines['master']
        else:
            return engines[
                random.choice(['slave1','slave2'])
            ] 
```

[http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#custom-vertical-partitioning](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#custom-vertical-partitioning)

我在“get_bind”方法中打印了日志。我发现在使用“session.add(r); session.commit()”时，“get_bind”方法被执行了两次。那为什么要两次？

当使用“session.execute('insert ...'); session.commit()”时，“get_bind”方法只被调用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:00:24.147

会话支持同时关联多个引擎，这些引擎基于映射器或表与会话关联。因此，任何时候 Session 需要与数据库对话，并且它手头有一个特定`mapper()`的处理，它必须调用`get_bind()`以便为这个特定的映射器获取正确的引擎。在刷新中，假设存在脏状态（session.add(r) 的结果），一个特定`mapper()`的被多次查询以准备发出 SQL - 目前至少一次用于“保存”传递，一次用于“删除”通过虽然我可以尝试改进在这种情况下删除不必要的抓取（编辑：完成）。

你总是可以通过坚持`import pdb; pdb.set_trace()`在它里面，然后每次你到达那里时在控制台上做一个“哪里”来告诉它为什么被调用。

所以通常你应该假设 get_bind() 一直被调用。它被调用的频率并不重要。

编辑：0.8 和 0.7 的最新提示不会调用 get_bind() 当没有要刷新的状态以进行保存/删除传递时，因此现在在此特定测试中调用一次。

# c# - HTML 敏捷包中的行/位置编号中的 HTMLNode

> ID：10974323
> 
> 赞同：1
> 
> 时间：2012-06-11T03:51:07.390
> 
> 标签：c#, winforms, html-agility-pack

我正在尝试为给定的行/字符位置（例如第 5 行，字符 12）找到相应的 HtmlNode。我查看了帮助文档，但我不太确定它是否可用。

这可以在 Html Agility Pack 中完成吗？

编辑：

示例 HTML 文件：

```
<!DOCTYPE html>
<html>
<body>

<h4>An Ordered List:</h4>
<ol>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ol>

</body>
</html> 
```

我正在尝试获取位置第 7 行，字符 5 -> Coffee LI 和第 12 行，返回节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T04:15:15.567

If you are talking about the HTML at line 5, position 12, you could do something like this:

```
private void button1_Click_1(object sender, EventArgs e)
{
    HtmlAgilityPack.HtmlWeb web = new HtmlAgilityPack.HtmlWeb();
    HtmlAgilityPack.HtmlDocument doc;
    doc =  web.Load("http://slashdot.org");

    var node = CheckLine(doc.DocumentNode);
    if (node != null)
        MessageBox.Show(node.OuterHtml);
}

private HtmlAgilityPack.HtmlNode CheckLine(HtmlAgilityPack.HtmlNode node)
{
    if (node.Line == 5 && node.LinePosition < 12 && ((node.LinePosition + node.OuterHtml.Length) > 12))
        return node;

    foreach (var n in node.ChildNodes)
    {
        var val = CheckLine(n);
        if (val != null)
            return val;
    }
    return null;
} 
```

# c - GCC / Cygwin 下的 InetNtop 和 ws2tcpip.h

> ID：10974328
> 
> 赞同：0
> 
> 时间：2012-06-11T03:51:31.573
> 
> 标签：c, winapi, gcc, cygwin, winsock2

我正在使用下面`ws2tcpip.h`提供的版本`gcc 3.4.4``cygwin 2.774`

我正在查找该`InetNtop`功能，这是 Microsoft 的 实现`inet_ntop`，但是我发现的两个版本`ws2tcpip.h`不包含该功能。包括`arpa/inet.h`get`inet_ntop`导致各种可怕的重叠定义发生。

提供`gcc`/`cygwin`没有这个功能的版本有什么原因吗？是否有（合法？）方式从 Microsoft 获得具有定义的版本？

注意：我 100% 确定我有正确`#define`的 s、`#include`s 和链接器选项

注意：请不要建议使用`WSA*`我非常了解的旧功能。

### 编辑：

今天做了更多的挖掘，得出的结论是标题必须缺少条目，因为这里是标题的 grep：

```
asdf@fdsa ~$ grep -i -B 4 -A 2 -R "inet_ntop" /usr/include/
/usr/include/arpa/inet.h-in_addr_t inet_netof (struct in_addr);
/usr/include/arpa/inet.h-in_addr_t inet_network (const char *);
/usr/include/arpa/inet.h-char *inet_ntoa (struct in_addr);
/usr/include/arpa/inet.h-int inet_pton (int, const char *, void *);
/usr/include/arpa/inet.h:const char *inet_ntop (int, const void *, char *, socklen_t);
/usr/include/arpa/inet.h-#endif
/usr/include/arpa/inet.h-
--
/usr/include/cygwin/version.h-      127: Export sigrelese.
/usr/include/cygwin/version.h-      128: Export pselect.
/usr/include/cygwin/version.h-      129: Export mkdtemp.
/usr/include/cygwin/version.h-      130: Export strtoimax, strtoumax, llabs, imaxabs, lldiv, imaxdiv.
/usr/include/cygwin/version.h:      131: Export inet_ntop, inet_pton.
/usr/include/cygwin/version.h-      132: Add GLOB_LIMIT flag to glob.
/usr/include/cygwin/version.h-      133: Export __getline, __getdelim.
asdf@fdsa ~$ grep -i -B 4 -A 2 -R "inetntop" /usr/include/
asdf@fdsa ~$ 
```

这是库文件中的字符串：

```
asdf@fdsa ~$ strings /usr/lib/w32api/libws2_32.a | grep -i 'inet_*ntop'
_inet_ntop@16
__imp__inet_ntop@16
_InetNtopW@16
__imp__InetNtopW@16
inet_ntop
_inet_ntop@16
__imp__inet_ntop@16
InetNtopW
_InetNtopW@16
__imp__InetNtopW@16 
```

任何人都知道为什么标题是错误的/我在哪里可以获得完整的标题？

# c++ - 尝试破坏我的链接列表时出错？

> ID：10974332
> 
> 赞同：0
> 
> 时间：2012-06-11T03:52:17.757
> 
> 标签：c++, linked-list

我试图为 Iv 创建的链表对象实现析构函数。我创建了一个名为 MakeEmpty 的函数，我只是在析构函数中调用了它。它第一次正确编译，但现在，我立即崩溃并显示错误消息：

表达式：_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)

有人可以帮我找出问题所在吗？我运行调试器并指出错误在代码中的位置，但我不知道出了什么问题。

```
WORD::~WORD()
{
cout << "Destructor Called"<<endl;

(*this).MakeEmpty();
} 
```

这是 MakeEmpty() 函数

```
void WORD::MakeEmpty()
{
alpha_numeric *p = (*this).front;

if((*this).IsEmpty())
{
    cout <<"Already empty"<< endl;
    return;
}

while(front != 0)
{
    front = front -> next;
    delete p;//<<<<---DEBUGGER SAYS ERROR HERE
    p = front;
}
return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:10:36.617

你在班上遵守了[三人制吗？](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)该错误听起来像您缺少复制构造函数或复制赋值运算符。

# filter - 定点 FIR 滤波器输出大小

> ID：10974336
> 
> 赞同：1
> 
> 时间：2012-06-11T03:53:31.693
> 
> 标签：filter, fixed-point

我有一个 64 抽头 FIR 滤波器，我无法理解其输出格式。该滤波器已使用（有符号）定点数学实现。在 {B,F} 格式中，其中 B 是字长，F 是小数长度，滤波器输入是 {16,0}，系数是 {16,17}。过滤器的核心如下：

```
for (i = 0 ; i < 32 ; i++) {
    accumulator += coefficients[i] *
        (input[(inputIndex + 64 - i) % 64] +
        input[(inputIndex + 1 + i) % 64]);
} 
```

for 循环的每次迭代都会产生一个输出，其格式由下式给出：

```
{16,17} * ( {16,0} + {16,0} ) = {16,17} * {17,0}
                              = {33,17} 
```

使用定点算法的规则。由于有 32 次迭代，因此需要在累加器的大小上增加 6 个额外的位以防止溢出。这六位来自使用（MATLAB）公式：

```
floor(log2(32)) + 1 
```

根据[本](http://www.mathworks.com/matlabcentral/fileexchange/19880-digital-filters-with-matlab "使用 MATLAB 的数字滤波器")文件。根据我的推理，这应该导致格式为 {39,17} 的输出。那么为什么 MATLAB 将滤波器输出大小报告为 {34,17}？此外，如果我希望过滤器输出与输入的格式相同，我是否认为我需要右移（在 {39,17} 情况下）22 位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:03:17.897

我自己刚开始研究定点 DSP 实现，但以下两个文档很有帮助：

*   [http://www.digitalsignallabs.com/fp.pdf](http://www.digitalsignallabs.com/fp.pdf)
*   [http://www.digitalsignallabs.com/fir.pdf](http://www.digitalsignallabs.com/fir.pdf)

第一个介绍了作者的定点数学符号，第二个讨论了定点 FIR 滤波器。在那次讨论中，他仔细分析了溢出条件和 FIR 滤波器的输出大小。

最有趣的一点是，如果您考虑系数的值，则可以对溢出进行最坏情况分析。如果系数是有符号的并且很大程度上相互抵消（即它们的和很小），那么在累加器中生成的进位位数会更小，从而给出输出大小的下限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:20:38.513

这看起来不错：

```
{16,17} * ( {16,0} + {16,0} ) = {16,17} * {17,0}
                              = {33,17} 
```

通过 32 次迭代，您可以生成 5 个额外的位（不是 6 个），所以它是 `{38,17}`. MATLAB 的输出不可能适合所有可能的输入。是考虑特定输入还是一般情况？

输入的格式`{16,0}`是一个没有分数的整数。因此，要实现与输入相同的*比例*，您只需将分数移出，右移 15。这会截断。考虑在移位之前添加 0x4000 ~= 1/2，这是一种舍入形式。

如果你真的想`{16,0}`完全匹配输入，你可以右移 22（可能首先添加 0x200000 到四舍五入）。这在传递函数中引入了 1/128 的比例因子（放弃了大约 -20dB 的信号！）。很好，如果这是问题所要求的。

# unicode - Unicode 到语言的映射

> ID：10974337
> 
> 赞同：2
> 
> 时间：2012-06-11T03:53:35.207
> 
> 标签：unicode, encoding, mapping

这个问题可能是堆栈溢出的边界，所以如果它看起来过于离题，我提前道歉。我正在编写一个涉及多种语言的程序，我需要一个将*语言*映射到 Unicode 点的表。熟悉 Unicode 的人都知道，字符被划分为“块”，例如拉丁文、西里尔文等。当然，大多数使用拉丁字符的语言不会使用*所有*拉丁字符，大多数使用西里尔字符的语言都会使用不*全部使用*西里尔字符等。我对将英语仅映射到英语中使用的字符、西班牙语仅映射到西班牙语中使用的字符等的表感兴趣。无需涵盖世界上的所有语言（因为这将是几乎不可能）但至少是一些更常见的语言。（即便如此，这将是一个涉及多对多关系的相当广泛的表。）我不确定这样的表是否存在。（如果没有，我可能会把它变成一个开源项目，因为它对我非常有用，也可能对其他人有用。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T04:23:01.220

[CLDR](http://cldr.unicode.org)是 Unicode 通用语言环境数据存储库，包含大量语言的字符集合定义。该`exemplarCharacters`元素指定正常书写该语言的单词所需的字符。此元素的当前定义可以在[By-Type Chart：misc.exemplarCharacters](https://www.unicode.org/cldr/charts/latest/by_type/core_data.alphabetic_information.html)页面（按书写系统分组）上查看，但对于自动处理，您可能会发现 XML 文件更合适。exemplarCharacters-other 元素当前包含类似的标点符号数据。

这可能是一般此类信息的最佳可用汇编，但它在概念上非常模糊（它并没有真正尝试定义用于编写语言的字符意味着什么），并且不同语言的信息已收集在一个开放但不包含一般质量控制的过程。

元素的含义在 LDML 规范第[5.6 节字符元素](http://www.unicode.org/reports/tr35/#Character_Elements)中定义。请注意描述“该`<characters>`元素提供有关区域设置中常用字符的可选信息，以及有助于选择适合区域设置的资源或数据的信息，例如在选择通常用于传输数据的字符编码时使用当地语言。” 这是一个相当奇怪的观点，尤其是在 Unicode Consortium 文档中，因为我们可以使用 UTF-8，它涵盖了所有语言。但还有*其他*语言中使用的字符信息可能有用的问题，例如选择文本字体，或初步检查输入数据，或设置 OCR 扫描参数，或定义键盘设置。这些上下文很可能需要对“语言中使用的字符”这个概念进行*不同*的定义。

# objective-c - 目录在 iOS 应用程序启动之间不持久

> ID：10974339
> 
> 赞同：0
> 
> 时间：2012-06-11T03:53:52.413
> 
> 标签：objective-c, ios, nsfilemanager

所以我试图在我正在制作的应用程序的打开之间存储一些数据，但由于某种原因，我正在制作的目录和我正在存储的数据在应用程序打开之间没有持续存在，我无法计算找出原因……</p>

我有三种方法：

```
- (NSString *)pathForDataFile 
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask,     YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"MyApp"];
    NSLog(@"%@", documentsDirectory);

    NSError *error;
    NSLog(@"%i", (int)[[NSFileManager defaultManager] createDirectoryAtPath:documentsDirectory withIntermediateDirectories:YES attributes:nil error:&error]);   

    return documentsDirectory;
}

- (void)saveDataToDisk 
{
    NSString * path = [self pathForDataFile];

    NSMutableDictionary * rootObject;
    rootObject = [NSMutableDictionary dictionary];

    [rootObject setValue: [self usedPlaces] forKey:@"key"];
    [NSKeyedArchiver archiveRootObject: rootObject toFile: path];
}

- (void) loadDataFromDisk
{
    NSString     * path = [self pathForDataFile];
    NSDictionary * rootObject;

    rootObject = [NSKeyedUnarchiver unarchiveObjectWithFile:path];    
    [self setObject: [rootObject valueForKey:@"key"]];
} 
```

当我打印出在 中创建目录的结果时`pathForDataFile`，每次打印 1，这意味着每次创建该目录时，即使它不应该能够，因为在一次调用后该目录应该已经存在。`saveDataToDisk`被调用`applicationWillTerminate`，并且`loadDataFromDisk`被调用`applicationDidBecomeActive`。任何人都可以帮助我了解为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:05:32.770

您需要在代码中进行一些额外的错误检查，以尝试缩小问题实际发生的位置。

像原始示例代码中的新行一样进行错误检查：

```
- (NSString *)pathForDataFile 
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"MyApp"];
    BOOL success = [[NSFileManager defaultManager] createDirectoryAtPath:documentsDirectory withIntermediateDirectories:YES attributes:nil error:&error];
    // success is NO only if there is an error.  success is YES if directory was created or if the directory already exists
    if(success == NO)
    {
        NSLog( @"error creating directory at path %@ is %@", documentsDirectory, [error localizedDescription] );
    }

    return documentsDirectory;
}

- (void)saveDataToDisk 
{
    NSString * path = [self pathForDataFile];
    if(([self usedPlaces] == NULL) || ([self usedPlaces count] == 0))
    {
        NSLog( @"usedPlaces is either null or has no entries");
    }
    NSDictionary * rootObject = [NSDictionary dictionaryWithObject: [self usedPlaces] forKey: @"key"];
    BOOL success = [NSKeyedArchiver archiveRootObject: rootObject toFile: path];
    if(success == NO)
    {
        NSLog( @"was not able to write data to path %@", path );
    }
}

- (void) loadDataFromDisk
{
    NSString     * path = [self pathForDataFile];
    NSDictionary * rootObject;

    rootObject = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
    if(rootObject)
        [self setObject: [rootObject valueForKey:@"key"]];
    else
        NSLog( @"was not able to load data from file at %@", path );
} 
```

# facebook - JSON 长度导致 Facebook Post to Wall 功能在 IE8 和 IE9 中中断

> ID：10974342
> 
> 赞同：1
> 
> 时间：2012-06-11T03:54:32.737
> 
> 标签：facebook, json, internet-explorer, facebook-graph-api, facebook-javascript-sdk

我一直在使用 Facebook Javascript SDK 将内容从 CMS 发布到 Facebook 粉丝页面。它基本上是通过使用 jQuery 拉出当前页面内容并将其输入 FB.api 函数来工作的。在 Firefox、Safari、Chrome 等中一切正常。唯一的问题是 IE 没有任何反应，没有错误消息，没有 javascript 错误，什么都没有。

这是我正在使用的功能：

```
function Publish(){
    //variables pulled from page content like so:
    var fb_message = $('#content').text();

    FB.api('/me/feed', 'post',
    {
        access_token    : fb_token,
        name            : fb_name,
        message         : fb_message,
        link            : fb_link,
        picture         : fb_photo,
        caption         : fb_caption

    },function(response) {
        if (!response || response.error) {
            alert("Couldnt post"); 
        } else {
            alert('Posted');  
        }
    })
} 
```

如果我`message`从`FB.api`json 中删除，或者将发送的字符串长度限制为 850 个字符，即使在 IE 中也可以正常工作，但我不知道为什么？该字符串只是 Loreum Ipsum，没有奇数字符或换行符。

**更新** 实际上似乎如果我删除`caption, name, link, etc`并只在 json 中发布一个“消息”，我可以将一个稍长的`message`字符串推送到 facebook，这似乎表明 json 的长度是某种问题......

任何指针将不胜感激。

**更新** 我尝试在一个单独的 html 文件中从头开始重写我的功能，但在 IE 中仍然出现问题，所以我向 Facebook 提交了一个错误。看看他们对此有什么看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:54:21.267

这已被 Facebook 团队确认为一个错误，他们计划很快推出修复程序。[你可以在这里](https://developers.facebook.com/bugs/369544316432727?browse=search_4fe0054b438304a16099011)查看我的错误报告。

**更新** 修复被推送，问题在 IE9+ 中解决。但是 IE7 和 8 仍然存在长字符串的问题。事实上，自修复以来，它们似乎已经成为一个更大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:41:29.210

该`message`参数已弃用，
您必须使用该`description`参数在用户供稿中发布，

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# javascript - 按“输入”提交表单不起作用（js）

> ID：10974344
> 
> 赞同：1
> 
> 时间：2012-06-11T03:54:52.087
> 
> 标签：javascript, google-gadget

我正在使用谷歌小工具编写一个简短的脚本并尝试插入谷歌网站。当用户按下`Go`按钮时，javascript函数被触发并且一切正常，但是当用户按下时`Enter`，出现错误：

```
Missing or malformed url parameter 
```

我不确定这是由我的代码或谷歌小工具/网站引起的。

我的html代码：

```
<form name="theform">
<input type="text" size="20" id="search"/> 
<INPUT TYPE="submit" VALUE="Go!" ONCLICK="GotoURL(this.form)">
</form> 
```

javascript函数

```
function GotoURL(dl) { 

var mySearch = document.getElementById("search").value;
url='some_url'+mySearch;
window.open(url,'_blank');
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T04:00:05.500

您应该`onsubmit`在表单上使用事件而不是`onclick`按钮事件：

```
<form name="theform" onsubmit="GotoURL(this)">
    <input type="text" size="20" id="search"/> 
    <input type="submit" value="Go!">
</form> 
```

确保`GotoURL()`函数返回`false`以防止表单实际提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T03:59:46.853

您需要将`onsubmit`处理程序添加到`form`标签本身：`<form onsubmit="GotoURL(this)">`

# c++ - 使用 XP 主题消隐控件

> ID：10974346
> 
> 赞同：2
> 
> 时间：2012-06-11T03:54:56.793
> 
> 标签：c++, winapi, themes

我一直在慢慢学习 Win32 API，并被这个难住了：

![空白控件](../Images/5cf6f8bc94aa25646e369d5c0ec659d5.png)

当我在 Windows 7 上以“经典外观”和“Windows 7 Aero Glass”外观运行它时，一切正常，甚至在控件上有 Aero 外观，它们看起来很正常。当我在我的 XP 机器上再次使用“经典外观”运行它时，一切看起来都不错，但是当我在 XP 上使用“Windows XP 主题”运行它时，我得到的就是上面的内容。

[遵循 Microsoft 在http://msdn.microsoft.com/en-us/library/bb773175%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb773175%28VS.85%29.aspx)上的视觉样式指南，我需要做 3 件事：

> 1\. 链接到 ComCtl32.lib 并调用 InitCommonControls。

检查，这样做，我将 comctl32 添加到我的链接器设置中。

> 2\. 将名为 YourApp.exe.manifest 的文件添加到具有 XML 清单格式的源代码树中。

检查，这样做了。我有一个正在使用的版本，但为了安全起见，我尝试了他们网站上建议的版本，我什至将它重命名为 start 指定以涵盖所有基础。（是的，我知道给它我的应用程序的名称......）

> 3\. 将清单添加到应用程序的资源文件中，如下所示：

检查，这样做了。我将他们建议的指定行添加到我的 rc 文件中。

因此，在所有情况下，一切正常，Windows XP 风格主题除外。

我唯一认为剩下的就是我没有响应 WM_PAINT 消息，但我将它传递给默认窗口 proc，以允许 Windows 在这方面做它的事情。（我看不出这是否行不通，它在其他任何地方都行不通。）

我看到了与这篇文章类似的帖子，它说使用 InitCommonControlsEx，也这样做了，但无济于事。

我难住了。

```
#include <windows.h>
#include <windowsx.h>
#include <commctrl.h>
#include <uxtheme.h>

#include <iostream>
using namespace std;

#define IDC_MAIN_BUTTON_1    101            // Button identifier
#define IDC_MAIN_BUTTON_2    102            // Button identifier
#define IDC_MAIN_BUTTON_3    103            // Button identifier
#define IDC_MAIN_BUTTON_4    104            // Button identifier

HWND hWndButton1;
HWND hWndButton2;
HWND hWndButton3;
HWND hWndButton4;

MSG msg;

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);
LRESULT CALLBACK MyWndProc (HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam, UINT_PTR uIdSubclass,
                            DWORD_PTR dwRefData);
int WINAPI WinMain (HINSTANCE hInstance,
                    HINSTANCE hPrevInst,
                    LPSTR lpCmdLine,
                    int ShowCmd) {

    INITCOMMONCONTROLSEX icc;

    // Initialize common controls.
    icc.dwSize = sizeof(icc);
    icc.dwICC = ICC_WIN95_CLASSES        |
                ICC_COOL_CLASSES         |
                ICC_INTERNET_CLASSES     |
                ICC_LINK_CLASS           |
                ICC_STANDARD_CLASSES     |
                ICC_USEREX_CLASSES;
    InitCommonControlsEx(&icc);

    WNDCLASSEXW wClass;
    ZeroMemory(&wClass,sizeof(WNDCLASSEXW));

    wClass.cbSize                          = sizeof(WNDCLASSEX);
    wClass.hInstance                       = hInstance;
    wClass.lpszClassName                   = L"Window Class";
    wClass.lpfnWndProc                     = (WNDPROC)WndProc;
    wClass.style                           = CS_HREDRAW | CS_VREDRAW;
    wClass.lpszMenuName                    = NULL;
    wClass.hbrBackground                   = (HBRUSH)COLOR_WINDOW;
    wClass.hCursor                         = LoadCursor(NULL,IDC_ARROW);
    wClass.hIcon                           = NULL;
    wClass.hIconSm                         = NULL;
    wClass.cbClsExtra                      = 0;
    wClass.cbWndExtra                      = 0;

    RegisterClassEx(&wClass);

    HWND hWnd=CreateWindowExW(
            0,                          // in      DWORD    dwExStyle,
            L"Window Class",            // in_opt  LPCTSTR    lpClassName,
            L"Windows application",     // in_opt  LPCTSTR    lpWindowName,
            WS_OVERLAPPEDWINDOW,        // in      DWORD    dwStyle,
            200,                        // in      int        x,
            200,                        // in      int        y,
            640,                        // in      int        nWidth,
            480,                        // in      int        nHeight,
            NULL,                       // in_opt  HWND        hWndParent,
            NULL,                       // in_opt  HMENU    hMenu,
            hInstance,                  // in_opt  HINSTANCE hInstance,
            NULL);                      // in_opt  LPVOID    lpParam

    ShowWindow(hWnd,ShowCmd);

    ZeroMemory(&msg,sizeof(MSG));

    while(GetMessageW(&msg,NULL,0,0))
    {
        TranslateMessage(&msg);
        DispatchMessageW(&msg);
    }
    return (int)&msg.wParam;
}

void Button_Proc (WPARAM, LPARAM);

LRESULT CALLBACK WndProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam)
{
    HWND GROUP1 = 0;
    HWND GROUP2 = 0;
    switch(msg)
    {
        case WM_CREATE:
        {

            // Create a group box
            GROUP1 = CreateWindowExW(
                0,
                L"BUTTON",
                L"Group",
                        WS_TABSTOP  |
                        WS_VISIBLE  |
                        WS_CHILD    |
                        BS_NOTIFY   |
                        BS_GROUPBOX  ,
                100,
                60,
                150,
                80,
                hWnd,
                0,
                GetModuleHandle(NULL),
                0);
                SetWindowSubclass(GROUP1, (SUBCLASSPROC) MyWndProc, 0, 0);

            // Create a group box
            GROUP2=CreateWindowExW(
                0,
                L"BUTTON",
                L"Group 2",
                        WS_TABSTOP  |
                        WS_VISIBLE  |
                        WS_CHILD    |
                        BS_GROUPBOX  ,
                100,
                160,
                150,
                80,
                hWnd,
                0,
                GetModuleHandle(NULL),
                0);
                SetWindowSubclass(GROUP2, (SUBCLASSPROC) MyWndProc, 0, 0);

            // Create a push button
            hWndButton1=CreateWindowExW(
                0,
                L"BUTTON",
                L"Option 1",
                        WS_TABSTOP  |
                        WS_VISIBLE  |
                        WS_CHILD    |
                        WS_GROUP    |
                        BS_NOTIFY   |
                        BS_AUTORADIOBUTTON  ,
                10,
                20,
                100,
                24,
                GROUP1,
                (HMENU)IDC_MAIN_BUTTON_1,
                GetModuleHandle(NULL),
                0);

            hWndButton2=CreateWindowExW(
                0,
                L"BUTTON",
                L"Option 2",
                        WS_TABSTOP  |
                        WS_VISIBLE  |
                        WS_CHILD    |
                        BS_NOTIFY   |
                        BS_AUTORADIOBUTTON  ,
                10,
                45,
                100,
                24,
                GROUP1,
                (HMENU)IDC_MAIN_BUTTON_2,
                GetModuleHandle(NULL),
                0);

            hWndButton3=CreateWindowExW(
                0,
                L"BUTTON",
                L"Option 3",
                        WS_TABSTOP  |
                        WS_VISIBLE  |
                        WS_CHILD    |
                        WS_GROUP    |
                        BS_NOTIFY   |
                        BS_AUTORADIOBUTTON  ,
                10,
                20,
                100,
                24,
                GROUP2,
                (HMENU)IDC_MAIN_BUTTON_3,
                GetModuleHandle(NULL),
                0);

            hWndButton4=CreateWindowExW(
                0,
                L"BUTTON",
                L"Option 4",
                        WS_TABSTOP  |
                        WS_VISIBLE  |
                        WS_CHILD    |
                        BS_NOTIFY   |
                        BS_AUTORADIOBUTTON  ,
                10,
                45,
                100,
                24,
                GROUP2,
                (HMENU)IDC_MAIN_BUTTON_4,
                GetModuleHandle(NULL),
                0);

        }
        break;
        case WM_NOTIFY:
            switch(LOWORD(wParam))
            {
                case IDC_MAIN_BUTTON_1:
                case IDC_MAIN_BUTTON_2:
                case IDC_MAIN_BUTTON_3:
                case IDC_MAIN_BUTTON_4:
                    {
                        Button_Proc(wParam,lParam);
                    }
                    break;
            }
            break;
        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case IDC_MAIN_BUTTON_1:
                case IDC_MAIN_BUTTON_2:
                case IDC_MAIN_BUTTON_3:
                case IDC_MAIN_BUTTON_4:
                    {
                        Button_Proc(wParam,lParam);
                    }
                    break;
            }
            break;
        case WM_DESTROY:
        {
            RemoveWindowSubclass(GROUP1, (SUBCLASSPROC) MyWndProc, 0);
            RemoveWindowSubclass(GROUP2, (SUBCLASSPROC) MyWndProc, 0);
            PostQuitMessage(0);
            return 0;
        }
        break;
    }

    return DefWindowProcW(hWnd,msg,wParam,lParam);
}

void Button_Proc (WPARAM wParam, LPARAM lParam) {
    switch (HIWORD(wParam))
    {
        case BN_CLICKED:
        {
            cerr << "Button clicked\n";
        }
        break;
        case BN_DBLCLK:
        {
            cerr << "Button Double clicked\n";
        }
        break;
        case BN_KILLFOCUS:
        {
            cerr << "Button Lost Focus\n";
        }
        break;
        case BN_SETFOCUS:
        {
            cerr << "Button Set Focus\n";
        }
        break;
        //                case BCN_HOTITEMCHANGE:     // Controls Version 6.
        //                case BCN_DROPDOWN:          // Controls Version 6.
        //                case NM_CUSTOMDRAW:         // Controls Version 6.
        //                case WM_CTLCOLORBTN:        // Investigation Required.
    }
//    //http://msdn.microsoft.com/en-us/library/windows/desktop/bb849167(v=vs.85).aspx
//    if ( Button_GetCheck((HWND) lParam) == BST_UNCHECKED) {
//        Button_SetCheck( (HWND) lParam, BST_CHECKED);
//    } else {
//        Button_SetCheck( (HWND) lParam, BST_UNCHECKED);
//    }
}

LRESULT CALLBACK MyWndProc    (HWND hWnd,
                               UINT msg,
                               WPARAM wParam,
                               LPARAM lParam,
                               UINT_PTR uIdSubclass,
                               DWORD_PTR dwRefData) {
//    cerr << "Subclass Proc Called\n";
    switch (msg) {
        case WM_COMMAND: {
            switch(LOWORD(wParam)) {
                case IDC_MAIN_BUTTON_1:
                case IDC_MAIN_BUTTON_2:
                case IDC_MAIN_BUTTON_3:
                case IDC_MAIN_BUTTON_4: {
                    Button_Proc(wParam,lParam);
                }
                break;
            }
        }
        break;
    }
    return DefSubclassProc(hWnd, msg, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T10:31:21.343

如果要去除控件的黑色背景，可以尝试[`EnableThemeDialogTexture()`](https://msdn.microsoft.com/en-us/library/windows/desktop/bb773320(v=vs.85).aspx).

第二种方法（来自[正确绘制的 WinXP 中的主题对话框](http://www.codeproject.com/Articles/5978/Correctly-drawn-themed-dialogs-in-WinXP)）：

```
// WM_INITDIALOG
RECT rc;
GetWindowRect(hWnd,&rc);
HDC hDC=GetDC(hWnd);
HDC hDCMem=CreateCompatibleDC(hDC);
HBITMAP hBmp=CreateCompatibleBitmap(hDC,rc.right-rc.left,rc.bottom-rc.top);
HBITMAP hBmpOld=(HBITMAP)SelectObject(hDCMem,hBmp);
SendMessage(hWnd,WM_PRINTCLIENT,(WPARAM)hDCMem,(LPARAM)(PRF_ERASEBKGND|PRF_CLIENT|PRF_NONCLIENT));
hBrush=CreatePatternBrush(hBmp); // HBRUSH hBrush is global
SelectObject(hDCMem,hBmpOld);
DeleteObject(hBmp);
DeleteDC(hDCMem);
ReleaseDC(hWnd,hDC);

//WM_CTLCOLORSTATIC
RECT rc;
SetBkMode((HDC)wParam,TRANSPARENT);
GetWindowRect((HWND)lParam,&rc);
MapWindowPoints(NULL,hWnd,(LPPOINT)&rc,2);
SetBrushOrgEx((HDC)(wParam),-rc.left,-rc.top,NULL);
return (LRESULT)hBrush; 
```

# asp.net - 如何交叉引用/验证 Asp.Net 网站页面

> ID：10974350
> 
> 赞同：2
> 
> 时间：2012-06-11T03:55:20.757
> 
> 标签：asp.net

我继承了一个 Asp.Net 网站（VS/VB 2008 Express）。有许多文件是其他文件的副本（以前的开发人员会复制代码隐藏页面并重命名以进行更改，因此 Page.aspx 将 PageUpdateA.aspx.vb 作为其代码隐藏页面，但 Page.aspx。 vb 仍然存在）。

有没有办法交叉引用网站页面/文件来验证/验证页面，主要是为了找到未使用的页面？

我需要一个可以从源代码工作的工具，使用爬虫来爬取网站本身是行不通的。

我可以访问所有版本的 VS 2008（和 2010/2012）。

# browser - C# Webbrowser 使用默认浏览器打开

> ID：10974351
> 
> 赞同：0
> 
> 时间：2012-06-11T03:55:27.093
> 
> 标签：browser

总是用 IE 打开，如何用 Defalut 浏览器打开，比如 firefox 或 chrome

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:10:59.553

转到解决方案资源管理器 -> 右键单击​​项目 -> 选择使用
它浏览将打开一个**浏览**窗口，在您的电脑中有一个可用浏览器列表，
选择它进行浏览或将选定的浏览器设置为默认浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:28:37.667

```
public class MyWebBrowser : WebBrowser
{
   public MyWebBrowser() : base(){ }

   protected override void OnNewWindow(System.ComponentModel.CancelEventArgs e)
   {
      try
      {
         Process.Start(StatusText);
      }
      catch(Exception e)
      {
         //Display error message
      }
      e.Cancel = true;
      base.OnNewWindow(e);
   }
} 
```

编辑：没关系，这不会很好。它将打开鼠标所在的链接，而不是用户实际单击的链接（如果他们使用键盘单击），这是一个巨大的安全风险。

# iis-7 - 使用 https 在 IIS7.5 中重定向子域

> ID：10974352
> 
> 赞同：1
> 
> 时间：2012-06-11T03:55:29.877
> 
> 标签：iis-7, iis-7.5

我在 IIS 7.5 站点上设置了通配符。我现在正试图强制所有用户使用例如[https://store1.mydomain.com 或 https://store2.mydomain.com](https://storename1.mydomain.com)

我只能找到重定向到 www 的示例。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:44:18.530

您可以使用 URL 重写模块强制用户切换到 SSL，而不管用户用于进入站点的主机名或 URL。使用以下规则：

```
<rule name="Force HTTPS" enabled="false" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTPS}" negate="true" pattern="^ON$" />
    </conditions>
    <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" />
</rule> 
```

希望这是你需要的。

# java - 为什么我会收到“无效或损坏的 jarfile”？

> ID：10974353
> 
> 赞同：0
> 
> 时间：2012-06-11T03:55:30.090
> 
> 标签：java, eclipse, jar, lwjgl

在这个错误之前我得到了

`Exception in thread "main" java.lang.NoClassDefFoundError: org/lwjgl/LWJGLException`

我添加了`lib/lwjgl.jar`和，这就是我在标题中得到错误的地方。知道如何解决这个问题吗？我使用eclipse生成jar和manifest文件。`lib/lwjgl_util.jar``manifest.mf`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:35:26.093

考虑使用[JarSplice](http://ninjacave.com/jarsplice)将 LWJGL 库文件捆绑到一个全面的可执行 jar 文件中。[这是有关如何操作的教程。](http://thecodinguniverse.com/lwjgl-exporting-as-jar/)

# android - 安卓硒

> ID：10974356
> 
> 赞同：0
> 
> 时间：2012-06-11T03:55:49.480
> 
> 标签：android

我正在使用 webdriver for android 来自动化网站测试。我已经安装了网络驱动程序并打开了谷歌页面。但它没有接受我输入的搜索项。这里是“奶酪”。我提到了下面的代码。请提出解决方案。谢谢

```
public class AndroidSeleniumActivity extends TestCase 
{
    /** Called when the activity is first created. */

    public void testGoogle() throws Exception 
{
        AndroidDriver driver = new AndroidDriver();

        // And now use this to visit Google
        driver.get("http://www.google.com");

        // Find the text input element by its name
        WebElement element =  driver.findElement(By.xpath("html/body/div[2]/div[1]/div[1]/div[2]/div[2]/div/form/fieldset [2]/div/div/div/table/tbody/tr/td[2]/div/input[3]"));

        // Enter something to search for
        element.sendKeys("Cheese!");

       // Now submit the form. WebDriver will find the form for us from the element
        element.submit();

        // Check the title of the page

        // Remember to close the WebDriver connection to free up resources on the
        // Android device (or emulator). Pause for 30 seconds first so we can see
        // the results of the search.
       // Thread.sleep(30000L);
        driver.quit();
      }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:40:48.723

使用 id 或 name 来查找元素（搜索文本字段）而不是使用

```
XPATH: WebElement element =  driver.findElement(By.xpath("html/body/div[2]/div[1]/div[1]/div[2]/div[2]/div/form/fieldset [2]/div/div/div/table/tbody/tr/td[2]/div/input[3]")); 
```

使用它，它将起作用：

```
WebElement element =  driver.findElement(By.name("q")); 
```

# android - Android 2.1 - OpenCV 2.0 上的对象检测和不同设备的图像质量。

> ID：10974357
> 
> 赞同：2
> 
> 时间：2012-06-11T03:56:13.930
> 
> 标签：android, c, opencv

现在，我正在开发一个关于在 Android 2.1 上使用 opencv 进行对象检测的项目。
而且我有很多问题：

1.  我不能在 Android 2.1 项目上使用最新版本的 opencv，现在我使用用 C 语言编写的 Opencv 2.0。我看到许多功能，如 haarcascade 或图像处理丢失或有很多错误:(
2.  每个 android 设备都给我不同的图像质量。因此，它使检测模块给出错误的结果。例如：HTC Desire 给我一个变暗的图像，Sony Arc 给我一个具有更多蓝色或黄色值的图像等......我如何将这些图像处理为相同的质量以进行训练和检测。

3.  当我运行 haartraining 命令（在 opencv 2.0 上）时，npos = 20，nneg = 10，它永远不会成功，即使我运行它超过 24 小时。
    今天是我项目的截止日期。
    [http://opencv.willowgarage.com/documentation/object_detection.html](http://opencv.willowgarage.com/documentation/object_detection.html)
    非常感谢您的支持。

# deployment - Heroku 错误 H12（请求超时）问题

> ID：10974360
> 
> 赞同：15
> 
> 时间：2012-06-11T03:57:14.390
> 
> 标签：deployment, heroku, timeout, ruby-on-rails-3.2

我知道这是另一个**Heroku Error H12 (Request timeout) 问题**。似乎这个问题是由许多不同的原因引起的。几天前，我在 heroku 上部署了一个 Rails 3.2.2 应用程序。当我尝试通过浏览器访问我的应用程序时。我有

```
Application Error
An error occurred in the application and your page could not be served. Please try      again in a few moments.

If you are the application owner, check your logs for details. 
```

所以我像往常一样开始在互联网上搜索以找出问题所在。然后我学会了使用**heroku 日志**来检查我的日志文件。这是日志文件。

```
2012-06-11T03:16:51+00:00 heroku[web.1]: Unidling
2012-06-11T03:16:51+00:00 heroku[web.1]: State changed from down to created
2012-06-11T03:16:51+00:00 heroku[web.1]: State changed from created to starting
2012-06-11T03:16:56+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 43527`
2012-06-11T03:17:09+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-11T03:17:09+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-11T03:17:09+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-11T03:17:16+00:00 app[web.1]: [2012-06-11 03:17:16] INFO  WEBrick 1.3.1
2012-06-11T03:17:16+00:00 app[web.1]: [2012-06-11 03:17:16] INFO  WEBrick::HTTPServer#start: pid=1 port=43527
2012-06-11T03:17:16+00:00 app[web.1]: [2012-06-11 03:17:16] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-06-11T03:17:17+00:00 heroku[web.1]: State changed from starting to up
2012-06-11T03:17:19+00:00 app[web.1]: => Booting WEBrick
2012-06-11T03:17:19+00:00 app[web.1]: => Rails 3.2.2 application starting in production on http://0.0.0.0:43527
2012-06-11T03:17:19+00:00 app[web.1]: => Call with -d to detach
2012-06-11T03:17:19+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-06-11T03:17:19+00:00 app[web.1]: 
2012-06-11T03:17:19+00:00 app[web.1]: 
2012-06-11T03:17:19+00:00 app[web.1]: Started GET "/" for 123.240.186.119 at 2012-06-11 03:17:19 +0000
2012-06-11T03:17:20+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-06-11T03:17:20+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (40.3ms)
2012-06-11T03:17:49+00:00 heroku[router]: Error H12 (Request timeout) -> GET cold-lightning-6691.herokuapp.com/ dyno=web.1 queue= wait= service=30000ms status=503 bytes=0 
```

查看日志后，我真的不明白出了什么问题。我又在网上做了研究。似乎有许多不同的原因可能导致此问题。我知道我的应用程序中可能存在一些错误。但我不知道我的代码的哪一部分是错误的。

我**可以在我的本地计算机上运行我的应用程序**。那么您知道问题出在哪里或如何发现问题吗？

**更新：**

当我做 git push heroku

我收到此错误消息

```
Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432? 
```

我运行 $ heroku run rake assets:precompile --trace

我有

```
Running rake assets:precompile --trace attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-      rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/usr/local/bin/ruby /app/vendor/bundle/ruby/1.9.1/bin/rake assets:precompile:all       RAILS_ENV=production RAILS_GROUPS=assets --trace
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Unexpected token: operator (<) (line: 11780, col: 1, pos: 325392)

Error
at new JS_Parse_Error (/tmp/execjs20120611-10-3yiu6e.js:497:22)
at js_error (/tmp/execjs20120611-10-3yiu6e.js:505:15)
at croak (/tmp/execjs20120611-10-3yiu6e.js:954:17)
at token_error (/tmp/execjs20120611-10-3yiu6e.js:961:17)
at unexpected (/tmp/execjs20120611-10-3yiu6e.js:967:17)
at /tmp/execjs20120611-10-3yiu6e.js:1340:17
at maybe_unary (/tmp/execjs20120611-10-3yiu6e.js:1425:27)
at expr_ops (/tmp/execjs20120611-10-3yiu6e.js:1452:32)
at maybe_conditional (/tmp/execjs20120611-10-3yiu6e.js:1456:28)
at maybe_assign (/tmp/execjs20120611-10-3yiu6e.js:1480:28)
  (in /app/app/assets/javascripts/application.js)
/app/vendor/bundle/ruby/1.9.1/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:67:in    `extract_result'
/app/vendor/bundle/ruby/1.9.1/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:27:in `block in exec'
/app/vendor/bundle/ruby/1.9.1/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:40:in `compile_to_tempfile'
/app/vendor/bundle/ruby/1.9.1/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:26:in `exec'
/app/vendor/bundle/ruby/1.9.1/gems/uglifier-1.2.3/lib/uglifier.rb:101:in `compile'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/compressors.rb:74:in `compress'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/processing.rb:265:in `block in js_compressor='
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/processor.rb:29:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/processor.rb:29:in `evaluate'
/app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/context.rb:177:in `block in evaluate'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/context.rb:174:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/context.rb:174:in `evaluate'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/bundled_asset.rb:26:in `initialize'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:244:in `new'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:244:in `build_asset'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/index.rb:89:in `block in build_asset'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/caching.rb:19:in `cache_asset'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/index.rb:88:in `build_asset'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:163:in `find_asset'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/index.rb:56:in `find_asset'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/static_compiler.rb:20:in `block in compile'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:212:in `block in each_logical_path'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:190:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:190:in `each_entry'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:198:in `block in each_file'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:197:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:197:in `each_file'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.2/lib/sprockets/base.rb:210:in `each_logical_path'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/static_compiler.rb:18:in `compile'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:56:in `internal_precompile'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/usr/local/bin/ruby /app/vendor/bundle/rub...]
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in  create_shell_runner'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T03:21:37.113

似乎您正在超时，也许 feed() 调用需要超过 30 秒？

有关 H12 错误代码的更多信息，请访问[https://devcenter.heroku.com/articles/error-codes#h12__request_timeout](https://devcenter.heroku.com/articles/error-codes#h12__request_timeout)。我还建议您按照[https://devcenter.heroku.com/articles/request-timeout](https://devcenter.heroku.com/articles/request-timeout)中的说明安装 rack-timeout 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-24T20:07:52.823

我有一个类似的问题，放弃一天后，我回来发现我的错误。当服务器端发生错误时，我没有向客户端发送响应。无论服务器端算法的结果如何，请确保您正在返回响应。如果有错误，请返回。如果请求成功，则返回该响应。我希望这会有所帮助。

如果这没有帮助，请查看 heroku 关于处理请求超时的指南，尤其是调试请求超时部分可能会有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T07:18:20.770

错误原来是application.css。`.css.scss`一个文件有bug`/assets/stylesheets`

`assets:precompile`当我在本地机器上运行 rake 时，它​​在`application.css`. 它表明 application.css 中的哪个代码是错误的。

在我修改 css 之后，我必须把`config.assets.initialize_on_precompile = false' in`config/application.rb' [http://www.simonecarletti.com/blog/2012/02/heroku-and-rails-3-2-assetprecompile-error/](http://www.simonecarletti.com/blog/2012/02/heroku-and-rails-3-2-assetprecompile-error/)

问题解决了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-21T06:37:36.703

我有一个非常相似的问题，并将其缩小到与数据库的连接问题。我在 Heroku 的 Cedar 堆栈上使用 ClearDB，发现通过在我的 config.ru 文件中插入“使用 ActiveRecord::ConnectionAdapters::ConnectionManagement”，问题就消失了。

# asp.net - 如何在 IIS 7 上配置 asp.net 以读取/写入文件服务器上的文件？

> ID：10974361
> 
> 赞同：0
> 
> 时间：2012-06-11T03:58:27.497
> 
> 标签：asp.net, authentication, iis-7

我有一个在 Windows Server 2008 SP 2、IIS 7 上运行的 ASP.NET 4 网站。我有一个单独的文件服务器，也在 LAN 上运行 Windows Server 2008。此文件服务器有一个包含图像的文件夹。这些是仅有的两台机器，并且没有域（至少还没有域）。

我需要能够让 ASP.NET 应用程序读取和写入文件服务器上的文件。这意味着我需要为两者配置一些通用帐户并让我的 ASP.NET 应用程序使用它，但我不确定在哪里执行此操作，因为似乎有十几个地方（用户帐户、iis、网站配置、应用程序池， ETC）。

你能给我一些关于如何做到这一点的说明吗？我发现的唯一的要么是用于 IIS 6，要么是没有足够的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:13:39.770

是的，您需要在两台计算机上创建通用 Windows 帐户，并为其授予对文件服务器上文件夹的写入权限。

要使您的站点在该帐户下运行，请打开 IIS 管理器并选择您的站点正在运行的应用程序池；单击高级设置。确保 Managed Pipeline Mode 设置为 Integrated，然后编辑 Identity 属性以在自定义帐户下运行并输入用户名和密码。

# php - 在 PHP 中实现 facebook 之类的墙应用程序的最佳方法是什么？

> ID：10974362
> 
> 赞同：0
> 
> 时间：2012-06-11T03:58:58.737
> 
> 标签：php, mysql

假设您有一个拥有 500,000 到 1,000,000 名用户的社交网络，并希望让每个用户看到一组与他们相关的唯一数据。显然，如果您有很多同时使用的用户，那么这对于数据库查询的性能来说将是一个巨大的打击。一般而言，知道底层数据（通过更新、删除或其他方式）可能会经常更改，实现这样的事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:07:40.043

就数据库查询而言，如果您正确编写查询并为表编制索引，这不是问题。当你开始编写一个你怀疑可能有大量使用的程序时，不要马上担心它的性能。首先让它工作，然后在你实际使用它之后担心它的效率。如果它看起来很慢，您必须分析代码并确定花费最多时间的内容。之后，您可以优化您找到的部分，想办法在更短的时间内完成同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:08:31.963

设置缓存，当你达到一个平台时，获得更多的硬件。

**为了简化与 Javascript 相关的任务，通过异步请求和 MySQL 访问减少带宽：**

[http://en.wikipedia.org/wiki/Jquery](http://en.wikipedia.org/wiki/Jquery)

[http://en.wikipedia.org/wiki/Ajax_%28programming%29](http://en.wikipedia.org/wiki/Ajax_%28programming%29)

[http://openenergymonitor.org/emon/node/107](http://openenergymonitor.org/emon/node/107)

**缓存你的 PHP：**

[http://www.theukwebdesigncompany.com/articles/php-caching.php](http://www.theukwebdesigncompany.com/articles/php-caching.php)

# c++ - OpenCV 2.4.1 和 Visual Studio 中的 cv::split

> ID：10974366
> 
> 赞同：1
> 
> 时间：2012-06-11T03:59:26.073
> 
> 标签：c++, image, opencv

我在将 rgb 图像拆分为单个通道时遇到了问题。我的简单代码如下

```
 **cv::Mat src = cv::imread("D:/Test/a.jpg", 1);
std::vector<cv::Mat> img_rgb;
cv::split(src, img_rgb);
cv::imshow("a", src);** 
```

我的调试显示此问题来自 split 函数，并引发了以下错误。 ***Test_Opencv2.4.1.exe 中 0x10005768 处未处理的异常：0xC0000005：访问冲突读取位置 0x000000bc。***

有谁知道如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:05:47.637

您可能必须使用另一个斜线并将其转义，而且您**始终需要检查以下内容的返回`imread()`**：

```
cv::Mat src = cv::imread("D:\\Test\\a.jpg", 1);
if (src.empty())
{
    std::cout << "!!! Couldn't load image" << endl;
    // exit
} 
```

# asp.net - 在 ASP.NET 中创建半星评级

> ID：10974371
> 
> 赞同：0
> 
> 时间：2012-06-11T04:00:17.123
> 
> 标签：asp.net, rating

我正在使用 C#、VS2010 开发我的 ASP.NET Web 应用程序，我想创建一个评分系统，用户可以在其中按星选择他的评分，比如 AjaxControlToolkit 评分，我使用过这个控件，但有什么办法那个用户可以选择半星？例如，我有 5 颗星，用户可以选择 0.5、1、1.5、2 和……最多 5 颗？

Telerik 或其他自定义控件呢？我正在寻找选择和显示半星的能力，有可能吗？我见过几个网站除了星星外还显示半星

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:23:44.707

看看这个 jquery 插件，[raty](http://www.wbotelhos.com/raty/)。它允许您获得半星评级。

您可以使用 ajax 发布并使用 asp.net 网络服务作为后端。

我不知道asp.net 自定义控件。但是自己编写并不是很困难。在这种情况下，您实际上并不需要自定义控件。

# c# - 我应该使用什么 WPF 图像类型来执行多个转换

> ID：10974372
> 
> 赞同：5
> 
> 时间：2012-06-11T04:00:18.693
> 
> 标签：c#, wpf, image-processing

我需要对图像执行多项操作，例如，我需要调整图像大小，可能需要填充它以保持纵横比（并绘制背景颜色），并有条件地加盖水印。

我目前`BitmapFrame`用作在所涉及的方法之间传递的类型。

谁能推荐另一种我应该用来对图像执行增量更新的类型？

我可以创建各种图像的组合，尽管我不确定我应该使用哪种类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T11:46:34.830

`WriteableBitmap`当您想要对图像进行增量更新时，它是合适的。两者都`BitmapFrame`继承`WriteableBitmap`自`BitmapSource`，并且`WriteableBitmap`可以使用 any 实例化`BitmapSource`。

您可能还想看看[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)库，它为位图操作提供了大量有效的`WriteableBitmap`扩展方法。该库适用于 WPF 应用程序以及 Silverlight、WP7 和 Metro。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T11:39:29.443

尝试`WriteableBitmap`

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)

> 使用 WriteableBitmap 类以每帧为基础更新和呈现位图。这对于生成算法内容（例如分形图像）和数据可视化（例如音乐可视化器）很有用。
> 
> 为了更好地控制更新以及对后台缓冲区的多线程访问，请使用以下工作流程。
> 
> 1\. 调用 Lock 方法为更新保留后台缓冲区。
> 
> 2\. 通过访问 BackBuffer 属性获取指向后台缓冲区的指针。
> 
> 3\. 将更改写入后台缓冲区。当 WriteableBitmap 被锁定时，其他线程可能会将更改写入后台缓冲区。
> 
> 4\. 调用 AddDirtyRect 方法指示已更改的区域。
> 
> 5\. 调用 Unlock 方法释放后台缓冲区并允许呈现到屏幕上。
> 
> 当更新发送到渲染线程时，渲染线程将更改的矩形从后缓冲区复制到前缓冲区。渲染系统控制这种交换以避免死锁和重绘工件，例如“撕裂”。

# c# - 使用 LINQ 交错多个（超过 2 个）不规则列表

> ID：10974376
> 
> 赞同：7
> 
> 时间：2012-06-11T04:00:53.767
> 
> 标签：c#, linq

说我有以下数据

```
IEnumerable<IEnumerable<int>> items = new IEnumerable<int>[] { 
    new int[] { 1, 2, 3, 4 },
    new int[] { 5, 6 },
    new int[] { 7, 8, 9 }
}; 
```

返回带有交错项目的平面列表的最简单方法是什么，所以我会得到结果：

1、5、7、2、6、8、3、9、4

注意：内部列表的数量在运行时是未知的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T04:20:54.520

您所描述的本质上是一种[转置方法](https://stackoverflow.com/a/2070434)，其中包含悬垂的项目并且结果是[flattened](http://msdn.microsoft.com/en-us/library/bb534336.aspx)。这是我的尝试：

```
static IEnumerable<IEnumerable<T>> TransposeOverhanging<T>(
    this IEnumerable<IEnumerable<T>> source)
{
    var enumerators = source.Select(e => e.GetEnumerator()).ToArray();
    try
    {
        T[] g;
        do
        {
            yield return g = enumerators
                .Where(e => e.MoveNext()).Select(e => e.Current).ToArray();
        }
        while (g.Any());
    }
    finally
    {
        Array.ForEach(enumerators, e => e.Dispose());
    }
} 
```

*例子：*

```
var result = items.TransposeOverhanging().SelectMany(g => g).ToList();
// result == { 1, 5, 7, 2, 6, 8, 3, 9, 4 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-17T19:31:41.060

下面的解决方案非常简单。事实证明，它的速度也几乎是 dtb 提出的解决方案的两倍。

```
private static IEnumerable<T> Interleave<T>(this IEnumerable<IEnumerable<T>> source )
{
    var queues = source.Select(x => new Queue<T>(x)).ToList();
    while (queues.Any(x => x.Any())) {
        foreach (var queue in queues.Where(x => x.Any())) {
            yield return queue.Dequeue();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-09T10:37:33.183

这是我的尝试，基于[dtb 的回答](https://stackoverflow.com/a/10974467/67824)。它避免了外部`SelectMany`和内部`ToArray`调用。

```
public static IEnumerable<T> Interleave<T>(this IEnumerable<IEnumerable<T>> source)
{
    var enumerators = source.Select(e => e.GetEnumerator()).ToArray();
    try
    {
        bool itemsRemaining;
        do
        {
            itemsRemaining = false;
            foreach (var item in 
                     enumerators.Where(e => e.MoveNext()).Select(e => e.Current))
            {
                yield return item;
                itemsRemaining = true;
            }
        }
        while (itemsRemaining);
    }
    finally
    {
        Array.ForEach(enumerators, e => e.Dispose());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-17T15:18:38.760

*   处置所有枚举器，即使抛出异常
*   急切地评估外部序列，但对内部序列使用惰性评估。

* * *

```
public static IEnumerable<T> Interleave<T>(IEnumerable<IEnumerable<T>> sequences)
{
    var enumerators = new List<IEnumerator<T>>();
    try
    {
        // using foreach here ensures that `enumerators` contains all already obtained enumerators, in case of an expection is thrown here.
        // this ensures proper disposing in the end
        foreach(var enumerable in sequences)
        {
            enumerators.Add(enumerable.GetEnumerator());
        }

        var queue = new Queue<IEnumerator<T>>(enumerators); 
        while (queue.Any())
        {
            var enumerator = queue.Dequeue();
            if (enumerator.MoveNext())
            {
                queue.Enqueue(enumerator);
                yield return enumerator.Current;
            }
        }
    }
    finally
    {
        foreach(var enumerator in enumerators)
        {
            enumerator.Dispose();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-11T05:16:53.850

虽然它不像“dtb”的答案那么优雅，但它也可以工作并且它是一个单一的衬里:)

```
Enumerable.Range(0, items.Max(x => x.Count()))
                      .ToList()
                      .ForEach(x =>
                                   {
                                            items
                                            .Where(lstChosen => lstChosen.Count()-1 >= x)
                                            .Select(lstElm => lstElm.ElementAt(x))
                                            .ToList().ForEach(z => Console.WriteLine(z));
                                   }); 
```

# ruby-on-rails - 使用从 Rails 中的 URL 返回的 JSON 对象

> ID：10974378
> 
> 赞同：5
> 
> 时间：2012-06-11T04:01:26.247
> 
> 标签：ruby-on-rails, ruby, json, jsonresponse

我正在使用其 API 密钥和其他一些参数从站点获取一些数据。我以 JSON 对象的形式获取数据。现在我的问题是如何在我的 Rails 应用程序中使用这个 JSON 对象，也许做一些事情，比如使用一个存储 JSON 对象的实例变量，然后创建它的 erb 模板，该模板将显示实例变量的数组。我尝试通过 Stack Overflow 上的一些解决方案，但没有正确理解它们，一些更基本的帮助会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:28:01.953

Ruby on Rails 中的 JSON 支持由 ActiveSupport::JSON 提供，但它在后台封装了 JSON gem。所以你可以选择你的选择。

检查这个例子，

```
@data = [{"id":"7354857336","owner":"49091484@N07","secret":"dc7ce98bf9","server":"8151","farm":9,"title":"01_resize","ispublic":1,"isfriend":0,"isfamily":0},
{"id":"7355453164","owner":"41440187@N07","secret":"b0bc716ee6","server":"7225","farm":8,"title":"{Laduree Macaroons} explore #2","ispublic":1,"isfriend":0,"isfamily":0},
{"id":"7355183126","owner":"38937613@N03","secret":"c342e37a57","server":"7232","farm":8,"title":"REFLECTED AT MIDNIGHT [EXPLORED]","ispublic":1,"isfriend":0,"isfamily":0}] 
```

在 .erb 文件中

```
<% @data.each  do |photo| %>
 <%= photo.id%> ---<%= photo.title %><br></br>
<% end %> 
```

# iphone - 关于核心数据模型关系

> ID：10974380
> 
> 赞同：1
> 
> 时间：2012-06-11T04:01:48.940
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我试图理解`CoreData`建模中关系的概念，并且很难理解什么实体可能是建立关系的良好感觉。有没有办法为可以对应另一个实体的关系生成唯一编号？所以假设我有一个新的实体条目，它将有一个用于关系信息的唯一编号 101，并且详细信息也将创建 101，因此可以以某种方式保持对应关系完好无损。不确定`CoreData`Model 是否已经整理出某种生成器来为两个实体生成唯一值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:18:20.287

Core Data 是一个高级库，其目的是尽可能透明地管理和持久化对象图。Core Data 如何链接数据库中的对象（顺便说一下，它不一定是数据库）是一个实现细节。

在模型编辑器中，您只需创建所需的实体并将它们与关系链接。Core Data 为您管理连接。

```
Person:
- first_name: string
- middle_name: string
- last_name: string
- private_address: -> Address (to-one relationship)
- work_address: -> Address (to-one relationship)

Address:
- persons: ->> Person (to-many relationship, you may want to reuse an address)
- address1: string
- address2: string
- zip: string
- city: string
- country: string    
... 
```

person.first_name 会返回此人的名字，而 person.private_address.city 会轻松返回此人的居住城市。address.persons 返回所有共享相同地址（私人或/和工作）的人，作为 NSSet。address.persons.count 返回有多少人共享该地址。你看到的是一个对象图。

Core Data 为每个实体提供了某种唯一的 ID，一旦实体至少被保存，objectID，一个不透明的 NSManagedObjectID。URIRepresentation 可能会更好地为您服务（同样，一旦实体被保存）。如果您的意图是创建跨商店关系，则可以使用 URIRepresentation 或使用您自己的唯一 ID。维护每个实体的唯一 ID 甚至每个商店的唯一 ID 都相当容易。

但大多数时候，您不必处理如此低级别的问题。Core Data 非常擅长为您管理关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:22:27.023

您可能需要阅读[Core Data Programming Guide](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)以获得更好的理解。

如果您来自 SQL 背景，关系基本上代表一个`FOREIGN KEY`或连接表，相互映射对象。

所以假设你有一个`Company`有很多`Employee`s的。您为这两种类型创建实体，并在公司和员工之间建立一对多的关系（如果员工为多家公司工作，甚至是多对多）。

使用 Core Data，您可以轻松地添加、删除或以其他方式访问给定公司的员工。

因此，一种关系用于将实体的实例相互关联。

# zend-framework - Zend 框架模型和 Doctrine 2 实体

> ID：10974395
> 
> 赞同：1
> 
> 时间：2012-06-11T04:05:44.890
> 
> 标签：zend-framework, doctrine-orm, modelmapper

我最近使用此处介绍的方法将 Doctrine 2 集成到我的 ZF 应用程序中：

[http://www.zendcasts.com/unit-testing-doctrine-2-entities/2011/02/](http://www.zendcasts.com/unit-testing-doctrine-2-entities/2011/02/)

我真的很喜欢它的工作方式，但是我对这将如何影响我过去拥有模型和映射器的方式感到困惑。

让我通过一个例子来解释混淆，

假设我们有用户实体和购买，如 ZendCast 中给出的示例

现在我有 Doctrine 使用的这些实体

```
/library/ZC/Entity
    User.php
    Purchase.php 
```

在我以前有

```
application/models/
    User.php (Application_Model_User)
    Purchase.php (Application_Model_Purchase) 
```

在 application/models/ 的类中，我曾经编写作用于实体的函数（胖模型瘦控制器原理），例如，如果我想向用户发送电子邮件，我会在 Application_Model_User 中创建一个名为 sendMail 的方法。

现在我不确定是否可以向 /library/ZC/Entity 中的文件添加方法，或者这是否是一个好主意，因为 Doctrine 使用这些文件来管理数据库。

我宁愿有一个单独的模型文件，我也曾经有在多个模型上工作的映射器文件，例如，如果我想给所有非活动用户发送电子邮件，我会创建一个方法 emailInactiveUsers 到 Application_Model_UserMapper。

我现在该怎么做？

我也google了一下，我发现了这个：

[http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch-models-and-integrating-doctrine-orm/](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch-models-and-integrating-doctrine-orm/)

它说

> 一个名为 Doctrine_Cli 的脚手架工具，可以非常快速地从数据库中创建模型

但是，我的 scripts/doctrine.php 文件中不存在命令“generate-models-db”。我不确定这是否是 Doctrine 在版本 2 中已停止支持的东西或什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:31:15.733

向模型中添加不受 Doctrine 管理的方法和属性应该没有问题。对于映射器，Doctrine 不需要它们。Doctrine 已经处理了映射（例如，通过实体类中的注释）和（复杂的）查询，您拥有 EntityManager/Repositories。

我将放置`emailInactiveUsers()`在可以访问 EntityManager 的服务中，例如：

```
class UserMailService
{
    private $em;

    // Inject EntityManager, e.g. via setEntityManager() or __construct()

    public function emailInactiveUsers()
    {
        $mail = new \Zend_Mail();
        $users = $this->em->getRepository('User')->findBy(array('isActive' => false));
        foreach ($users as $user) {
            $mail->addTo($user->getEmail());
        }
        // And so on...
    }
} 
```

在我看来，类似的东西`sendMail()`属于服务，因为它作用于用户实体并需要对邮件程序的依赖，而邮件程序不应与模型耦合。

如果用户做了它属于模型的事情。如果某些事情对用户起作用 - 在您的情况下是 Mailer，它从用户那里获取电子邮件地址并发送电子邮件 - 它不会。

# php - 我的 XOR PHP 实现有什么问题？

> ID：10974397
> 
> 赞同：1
> 
> 时间：2012-06-11T04:06:06.893
> 
> 标签：php, hex, xor

我正在尝试使用 Hex Key 进行 XOR 实现。当这段代码（语法明显变了，但是思路一样）用C执行，然后转成hex，结果是44 D6 B4 7E

但是当我在 PHP 中运行这段代码时，我得到 36 32 31 31

很明显，每个 $string 索引都会返回一个整数，但还不清楚为什么（对我来说）。

这是我的PHP代码：

```
<?php
$text = "data";
$key =  array(0x20, 0xB7, 0xC0, 0x1F);
function xor_encrypt($string, $key) {
    for($i=0; $i<strlen($string); $i++) {
        $string[$i] = ord($string[$i]) ^ $key[$i % sizeof($key)];
    }
    return $string;
}
echo xor_encrypt($text, $key);
?> 
```

这是C代码

```
BYTE m_btKey[4] = { 0x20, 0xB7, 0xC0, 0x1F };
for ( UINT i = 0; i < m_uDataLen; ++i )
    m_szData[i] ^= ( m_btKey[i % sizeof(m_btKey)] ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T04:10:18.797

`^`结果是一个数字。您需要使用`chr()`将其转换回字符。

# r - 如何按唯一编号删除多列中的行？

> ID：10974404
> 
> 赞同：4
> 
> 时间：2012-06-11T04:07:38.663
> 
> 标签：r

给定这样的数据

```
C1<-c(3,-999.000,4,4,5)
C2<-c(3,7,3,4,5)
C3<-c(5,4,3,6,-999.000)
DF<-data.frame(ID=c("A","B","C","D","E"),C1=C1,C2=C2,C3=C3) 
```

如何删除所有列中的 -999.000 数据

我知道这适用于每列

```
DF2<-DF[!(DF$C1==-999.000 | DF$C2==-999.000 | DF$C3==-999.000),] 
```

但我想避免引用每一列。我认为有一种简单的方法可以引用特定数据框中的所有列，即：

```
DF3<-DF[!(DF[,]==-999.000),] 
```

或者

```
DF3<-DF[!(DF[,(2:4)]==-999.000),] 
```

但显然这些不起作用

出于好奇，如果你能告诉我为什么我需要在结束方括号之前的最后一个逗号，那么加分，如下所示：

```
==-999.000),] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T04:13:34.670

以下可能有效

```
DF[!apply(DF==-999,1,sum),] 
```

或者如果您可以连续有多个 -999

```
DF[!(apply(DF==-999,1,sum)>0),] 
```

或者

```
DF[!apply(DF==-999,1,any),] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T04:16:43.633

To address your "bonus" question, if we go to the documentation for `?Extract.data.frame` we will find:

> Data frames can be indexed in several modes. When `[` and `[[` are used with a single index (`x[i]` or `x[[i]]`), they index the data frame as if it were a list. In this usage a drop argument is ignored, with a warning.

and also:

> When `[` and `[[` are used with two indices (`x[i, j]` and `x[[i, j]]`) they act like indexing a matrix: `[[` can only be used to select one element. Note that for each selected column, `xj` say, typically (if it is not matrix-like), the resulting column will be `xj[i]`, and hence rely on the corresponding `[` method, see the examples section.

So you need the comma to ensure that R knows you are referring to a row, not a column.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T04:37:36.853

根据您的代码，我假设您要删除所有包含 -999 的行。

```
DF2 <- DF[rowSums(DF == -999) == 0, ] 
```

至于您的奖励问题：数据框是向量列表，所有向量都具有相同的长度。如果我们将向量视为列，则可以将数据框视为矩阵，其中列可能具有不同的类型（数字、字符等）。R 允许您引用数据框的元素，就像引用矩阵的元素一样；通过使用行和列索引。so`DF[i, j]`指的是 DF 的第 th 向量`i`中的第 th 元素，`j`可以认为是`i`第 th 行`j`第 th 列。因此，如果您只想保留数据框的部分行和所有列，则可以使用类似矩阵的表示法：`DF[row.indices, ]`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T20:10:11.553

我不明白您的目标是否是删除包含至少一个 NA 的所有行，如果这是您要查找的内容，那么这可能是一个可能的答案：

```
DF[DF==-999] <- NA
na.omit(DF)
   ID C1 C2 C3
1  A  3  3  5
3  C  4  3  3
4  D  4  4  6 
```

# sql - 创建模式的目的是什么

> ID：10974415
> 
> 赞同：1
> 
> 时间：2012-06-11T04:08:57.917
> 
> 标签：sql, sql-server

我在我的数据库中使用 Schema 仅用于按主题对表、视图、存储过程、函数和其他对象进行分组，我真的不知道必须在哪里使用模式，以及为什么模式选项卡位于 SSMS 中的安全选项卡下方。

编辑 ：

![模式](../Images/77f47f47f66f7f8b2ac8c91c3e4daa1f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:26:48.843

Schemata 是一种对对象进行逻辑分组的方法，以便可以通过模式而不是单独将一致的权限应用于所有对象。考虑：

```
create schema [foo] authorization [dbo]
grant select on schema::[foo] to [user1]
create table [foo].[table_1] (...)
create table [foo].[table_2] (...)
create table [foo].[table_3] (...) 
```

通过将所有表放在一个模式中，我能够在模式级别授予权限，并且权限的概念会渗透到其中包含的所有表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:38:29.067

我认为这个位置是因为用户（角色和用户）的安全性和模式之间的映射。不是模式的数据结构，如表和列等。

如果您转到安全选项卡-> 用户-> 双击用户。您发现您可以编辑该用户与 SCHEMA 的拥有或角色成员资格之间的映射。

我希望对你有用。

# android - onClick时如何更改imageButton的位置

> ID：10974416
> 
> 赞同：0
> 
> 时间：2012-06-11T04:10:04.113
> 
> 标签：android, user-interface

我试图在单击时移动图像按钮的位置。我尝试了以下操作，但它在“rlOut.addView(imgP, p);”处崩溃 在 onCreate() 中运行它们时我没有问题。

公共类 Delete3Activity 扩展 Activity {

```
RelativeLayout rlOut;
ImageButton imbBtn;

EditText et1, et2;
ImageView ivB;
ImageButton imgP;
RelativeLayout.LayoutParams p;
RelativeLayout.LayoutParams params;

int mX, mY; 
```

@覆盖

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.main);

et1 = (EditText)findViewById(R.id.et1);
et2 = (EditText)findViewById(R.id.et2);

imbBtn = (ImageButton)findViewById(R.id.imgBtn);
rlOut = (RelativeLayout)findViewById(R.id.rlOut);
imgP = (ImageButton)findViewById(R.id.imgP);

ivB = new ImageView(this);
ivB.setBackgroundColor(Color.RED);

Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();
int height = display.getHeight();

width = width/2-62;
height = height/2-62;
p = new RelativeLayout.LayoutParams(62, 62);    

imbBtn.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        LayoutParams par = (LayoutParams)imbBtn.getLayoutParams();

        if(event.getAction()==MotionEvent.ACTION_DOWN)
        {
            Log.d("ok","down");
            mX = (int) event.getX() - imbBtn.getWidth() / 2;
            mY = (int) event.getY() - imbBtn.getHeight() / 2;
            et1.setText("mX down: "+String.valueOf(mX));
            et2.setText("mY down: "+String.valueOf(mY));

        }
        else if (event.getAction()==MotionEvent.ACTION_UP)
        {
            Log.d("ok","up");
            rlOut.addView(ivB, params);
            p.leftMargin=4;
            params.leftMargin = 60;
            params.topMargin = 20;
            rlOut.addView(imgP, p);
            Log.d("ok","p");
        }
        else if (event.getAction()==MotionEvent.ACTION_MOVE)
        {
            Log.d("ok","move");
            mX = (int) event.getX() - imbBtn.getWidth() / 2;
            mY = (int) event.getY() - imbBtn.getHeight() / 2;
            et1.setText("mX move: "+String.valueOf(mX));
            et2.setText("mY move: "+String.valueOf(mY));
        }
        return false;
    }
}); 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:35:51.203

`OnCreate`方法是你设置的地方`setContentView(R.layout.main)`。我想变量`rlOut`代表`RelativeLayout`可能在您的主布局中。设置 contentView 并使用**初始化**变量后，在 OnCreate 方法中调用上述函数。或者如果变量在其他布局文件中，那么您必须首先使用布局充气器充气该布局，然后使用 方法找到视图。`rlOut``findViewById``rlOut``findViewById`

希望这可以帮助。

**编辑**

以下代码应该是您正在寻找的解决方案：

```
imbBtn.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            LayoutParams par = (LayoutParams)imbBtn.getLayoutParams();

            if (event.getAction()==MotionEvent.ACTION_MOVE)
            {
                Log.d("ok","move");
                mX = (int) event.getX() - imbBtn.getWidth() / 2;
                mY = (int) event.getY() - imbBtn.getHeight() / 2;
                par.leftMargin = imbBtn.getLeft() + mX;
                par.topMargin = imbBtn.getTop() + mY;
                imbBtn.setLayoutParams(par);
                et1.setText("mX move: "+String.valueOf(mX));
                et2.setText("mY move: "+String.valueOf(mY));
            }
            return false;
        }
    }); 
```

`MotionEvent.ACTION_MOVE`是您需要捕获的唯一事件。希望此解决方案对您有所帮助。

# r - 少数异常值未删除

> ID：10974422
> 
> 赞同：0
> 
> 时间：2012-06-11T04:10:58.127
> 
> 标签：r, outliers

我正在处理由异常值组成的大量数据。该代码适用于大多数数据集，但不适用于少数数据。

此示例数据：

```
set.seed(100)
m=rnorm(200)
m[1]=100   #inserting outlier
m[2]=50 
```

我的代码是：

```
library(outliers)
lg=outlier(m, logical=TRUE)
for(i in 1:length(lg)){
if(lg[i]==c("TRUE")){ 
 m[i]=NA }} 
```

这将用 NA 替换异常值。现在在这种情况下，100 被删除，但 50 没有被删除。我的数据集也发生了同样的事情。我不知道为什么。我希望得到这方面的帮助。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:24:29.137

这取决于您对异常值的定义。有很多。

该`outlier`方法将异常值定义为**与平均值差异最大的对象。这是一个相当弱的定义，因为它强制异常值的数量为 1（除非绑定）。

试试这个数据集：

```
0 .1 .1 .1 -.1 -.1 -.1 
```

在这个数据集上，它应该删除除`0`!

现在将其更改为：

```
0 .1 .1 .1 -.1 -.1 -.100000001 
```

现在只会删除一个元素，尽管差异处于精度边缘并且几乎不显着。

也许尝试一种更聪明的异常值检测方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:25:10.090

在这里，我将上面的评论扩展为答案。

在您的示例中， m[40]=m[90]=m[67]=150 是平局。如果您尝试使用 m[40] = 150; 米[90] = 200；米[67] = 250；我想你会发现只有 m[67] 被识别为异常值。也许在姊妹统计网站 Cross Validated 上询问您的数据集的异常值的最佳定义。那么也许这里有人可以帮助您为该定义编写 R 代码。

以下是异常值的简单定义的 R 代码：异常值是值 > 50 的任何观察值。我不建议您使用该定义。事实上，请不要。我在这里仅用于说明。下面的代码将所有异常值替换为 NA。

```
set.seed(100)
m=rnorm(200)
m[10]=100
m[40]=150
m[90]=200
m[67]=250
m

outlier <- rep(0,length(m))
outlier[m>50]=NA
outlier

m[is.na(outlier)]=NA
m 
```

# ruby-on-rails - 左连接不提供我想要的对象属性

> ID：10974424
> 
> 赞同：0
> 
> 时间：2012-06-11T04:11:03.683
> 
> 标签：ruby-on-rails

我确定我在做一些愚蠢的事情，但是我的 AR 代码

```
@comments = Comment.find(:all, :limit => 10,
                         :joins => "LEFT JOIN `users` ON comments.user_id = users.id",
                         :select => 'comments.*, users.theme') 
```

正在返回正确的 sql：

```
SELECT comments.*, users.theme from comments LEFT JOIN users on comments.user_id = users.id 
```

当我将它放入 mysql 时，我得到了我想要的结果，但是当我在进行上述 AR 调用之后尝试访问`@comment.theme`（在@comments 上的每个循环中）时，`theme`不存在。

那么，我需要对 Comments 模型做些什么来允许连接填充相关的列吗？我认为 Rails 只会将它们添加为我可以抓取的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:04:03.230

试试这个：

```
@comments.each do |comment|
  puts comment.theme
end 
```

所有字段都在数组@comments 中，作为Object 类型的Comment，并且字段名称与select 中使用的一样，与它们的原始来源无关。

祝你好运。

# login - 常用的安全登录算法

> ID：10974425
> 
> 赞同：1
> 
> 时间：2012-06-11T04:11:36.700
> 
> 标签：login, procedure

我想知道登录程序在 Internet 站点（例如 Gmail）中是如何工作的。我正在尝试实现一个在线应用程序，我想通过用户身份验证来保护它。

有人可以给出详细的解释或指向相关网站吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:18:55.003

许多网站使用 OpenId 来允许用户登录。OpenId 使用 OpenId Providers（例如 Google）登录。一大优势是，您没有存储用户的密码（因此，如果您被黑客入侵，它就不会被泄露）。一些信息：[http ://de.wikipedia.org/wiki/Openid](http://de.wikipedia.org/wiki/Openid)

ASP.Net 有 Membershipproviders 的概念，它又可以使用许多不同的方式。请参阅此处：http: [//msdn.microsoft.com/de-de/library/system.web.security.membershipprovider.aspx](http://msdn.microsoft.com/de-de/library/system.web.security.membershipprovider.aspx)

创建登录有很多方法（另一种可能是 OAuth），我认为您不能只谈论一种正确的方法。

# java - 如何获取特定运行的方法/函数调用跟踪？

> ID：10974426
> 
> 赞同：0
> 
> 时间：2012-06-11T04:11:40.023
> 
> 标签：java, javascript, profile, profiler, jprofiler

给定一个 Java 或 JavaScript 程序，在其执行后，打印出一系列调用。调用按调用顺序进行。例如

```
main()
{  A();
}

A()
{  B();
   C();
} 
```

那么调用跟踪应该是：

```
main -> A() -> B() -> C() 
```

是否有任何工具可以分析和输出此类信息？这似乎是调试或性能调整的常见需求。

我注意到一些分析器可以做到这一点，但我更喜欢更简单/易于使用的分析器。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:16:42.017

An IDE will the job for you. For example, eclipse is a widely used IDE for java programming and if you using it, you can know the hierarchy of calls which lead to a call to specific method.

Try selecting a method, right click and select '**Open call Hieracrhy**' or **Ctrl+Alt+H**. This is not the kind of profiler you might be looking, but will help you in knowing the call hierarchy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:27:38.387

在Java中：

```
new Throwable().printStackTrace(); 
```

将为您提供通话前的跟踪信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T04:25:14.210

如果要在**JavaScript**中跟踪函数，可以使用Webkit 浏览器中的*开发者工具或*[Firebug](http://getfirebug.com/)。

或者你可以这样做：

```
function A(){
    debugger;
    B();
    C();
} 
```

**注意：** [Java 不是 JavaScript。](https://stackoverflow.com/questions/245062/whats-the-difference-between-javascript-and-java)

![在此处输入图像描述](../Images/1588ae94d62569ee0ad034aa4e902c9a.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T04:38:16.760

看看[这个](https://stackoverflow.com/questions/442747/getting-the-name-of-the-current-executing-method)问题。它类似于您正在寻找的“更简单/易于使用的”

# android - 通过触摸移动移动图像

> ID：10974428
> 
> 赞同：0
> 
> 时间：2012-06-11T04:12:01.260
> 
> 标签：android, touch, coordinates, move, geometry

我想通过触摸移动来移动一个圆圈内的图像。我一直很困惑如何确定手指移动时的坐标圆边界。

例如，我想在 android 选项卡上移动此图像，例如锁定屏幕。

[http://cdn.alltouchtablet.com/wp-content/uploads/2012/03/samsung-galaxy-tab-7-plus-lock-screen.jpg](http://cdn.alltouchtablet.com/wp-content/uploads/2012/03/samsung-galaxy-tab-7-plus-lock-screen.jpg)

编辑 ：

现在在了解了下面的答案后，我设法画了一个圆形图像并在屏幕上移动这个图像。

现在，我想限制图像移动，使其只能在一个圆圈内移动，就像上图一样。有任何想法吗？

我希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:30:08.407

所以我实际上没有做过这样的事情，但我知道这个教程：这个人做了一些与你想要的类似的事情，

这个视频是整个教程视频播放列表的中间一个:)

[http://www.youtube.com/watch?v=9d4Wua-cxZs&list=PLB03EA9545DD188C3&index=32&feature=plpp_video](http://www.youtube.com/watch?v=9d4Wua-cxZs&list=PLB03EA9545DD188C3&index=32&feature=plpp_video)

希望对您有所帮助！

# wpf - How To improve wpf user control performance?

> ID：10974437
> 
> 赞同：1
> 
> 时间：2012-06-11T04:14:44.517
> 
> 标签：wpf, performance, mvvm, user-controls, datatemplate

I have a usercontrol, and when I have lots of that in a window, it takes long time to get loaded. Will it get better if I change it to a customcontrol or maybe a `DataTemplate` with a class and attached properties? any ideas would be greatly appreciated.

**Edited:**

this is my control:

```
<UserControl 
    x:Class="Pouyansoft.WPF.MVVM.Control.Common.View.DataGridSelectorControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    x:Name="dataGridSelector"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    mc:Ignorable="d" >
<UserControl.Resources>
    <CollectionViewSource Source="{Binding DataCollection.Source}" x:Key="theSource"/>
    <Style x:Key="DataGridColumnHeaderStyle1" TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                    <Grid VerticalAlignment="Center" HorizontalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Text="{TemplateBinding Content}" 
                                   HorizontalAlignment="Center" />
                        <TextBox x:Name="txtSearch" Grid.Row="1"  HorizontalAlignment="Stretch"  
                                 BorderThickness="1" TextChanged="TextBox_TextChanged" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

<Grid>       
   <DataGrid x:Name="grd" 
             ItemsSource="{Binding Source={StaticResource theSource}}" 
             AutoGenerateColumns="False"
             ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"   
             PreviewKeyDown="grd_PreviewKeyDown"
             SelectedIndex="{Binding SelectedIndex}"
             behavior:MouseDoubleClick.Command="{Binding MouseDoubleClickCommand}" 
             PreviewMouseLeftButtonUp="grid1_PreviewMouseLeftButtonUp"  
             GridLinesVisibility="Vertical">
    </DataGrid>
</Grid> 
```

and some code in the code behind.(and actually all the other control has the same behavior)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:08:56.087

首先，不要使用`DynamicResource`use `StaticResource`-

利用

```
ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle1}" 
```

代替

```
ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}" 
```

第二件事是检查输出窗口中的绑定错误，尽可能多地尝试修复。

另外，我没有看到使用的任何好处`CollectionViewSource`（因为您没有进行任何排序、过滤、分组）；如果不需要使用`CollectionViewSource`，可以直接将`DataGrid`'s绑定`ItemSource`到你的`DataCollection.Source`.

# java - How do I get my array out of try/catch block?

> ID：10974439
> 
> 赞同：1
> 
> 时间：2012-06-11T04:15:04.707
> 
> 标签：java, arrays, try-catch

I've been kicking this code around for a while and I think I know what the general problem is, I can't figure out how to correct it. I'm getting the following error:

```
C:\Documents and Settings\Joe King\My Documents\418.85A Java\Project5>javac Project5.java
Project5.java:408: error: variable boatNames might not have been initialized
            boatArray1 = new Boat[boatNames.length];
                                  ^
1 error 
```

The problem is my boatNames array is in a try/catch block and I think this is isolating it from the rest of the code. How can I get the boatNames array out of the try/catch block?

My code is as follows:

```
class Project5{

public static void main(String[] args){

    String[] boatNames;
    Boat[] boatArray1;
    Boat[] boatArray2;
    String result = " "; 
    String name = null;
    char firstChar;
    char firstLetter;
    char secondLetter;
    int totalRead;
    int i;
    int j;
    int k;
    int l;
    int m;

    Path inPath = Paths.get("C:/Documents and Settings/Joe King/My Documents/418.85A Java/Projects/Input").resolve("Boat Names.txt");

    if(!Files.exists(inPath)){

        System.out.println(inPath + " does not exist.  Terminating the program.");
        System.exit(1);

    }

    try(BufferedReader fileIn = Files.newBufferedReader(inPath, Charset.forName("UTF-16"))){

        totalRead = 0;

        while(fileIn.readLine() != null){

            name = fileIn.readLine();
            ++totalRead;
            name = null;

        }

        boatNames = new String[totalRead];

        for(i = 0 ; i < boatNames.length ; ++i){

            name = fileIn.readLine();
            boatNames[i] = name;
            name = null;

        }

    }catch(IOException e){

        System.err.println("Error writing file: " + inPath);
        e.printStackTrace();

    }   

    Path outPath = Paths.get("C:/Documents and Settings/Joe King/My Documents/418.85A Java/Projects/Output").resolve("Fleet Registry.txt");

    try{

        Files.createDirectories(outPath.getParent());

    }catch(IOException e){

        System.err.println("Error creating directory: " + outPath.getParent());
        e.printStackTrace();
        System.exit(1);

    }

    boatArray1 = new Boat[boatNames.length];

    if(boatNames.length > 0){

        try(BufferedWriter fileOut = Files.newBufferedWriter(outPath, Charset.forName("UTF-16"))){

            for(j = 0 ; j < boatNames.length ; j++){

                String delimiters = "[. ,]";
                int limit = -1;

                String[]tokens = boatNames[j].split(delimiters, limit);

                for(k = 0 ; k < tokens.length ; ++k){

                    firstChar = tokens[k].charAt(0);
                    firstChar = Character.toUpperCase(firstChar);
                    char[] tokenArray = tokens[k].toCharArray();                            
                    String text = new String(tokenArray, 1, (tokenArray.length - 1) );                          
                    tokens[k] = firstChar + text;                   
                    result = result + tokens[k] + " ";

                    if(k != tokens.length - 1){

                        continue;

                    }else{

                        result = result.trim();
                        boatNames[k] = result;
                        result = " ";

                    }
                }       

                firstLetter = boatNames[j].charAt(0);

                if((firstLetter == 'B') || (firstLetter == 'C') || (firstLetter == 'N')){

                    boatArray1[j] = new RaceBoat();

                }else{

                    boatArray1[j] = new SailBoat();

                }

                boatArray1[j].christenBoat(boatNames[j]);               

            }

            System.out.println("\n");

            for(l = 0 ; l < boatNames.length ; ++l){            

                secondLetter = Character.toUpperCase(boatNames[l].charAt(1));

                if((secondLetter == 'A') || (secondLetter == 'E')){

                    if(l > 0){

                        fileOut.newLine();
                    }                       
                    fileOut.write(boatArray1[l].goFast());

                }else{

                    if(l > 0){

                        fileOut.newLine();
                    }               
                    fileOut.write(boatArray1[l].goSlow());

                }           

                fileOut.newLine();
                fileOut.write(boatArray1[l].launchBoat());
                fileOut.newLine();
                fileOut.write(boatArray1[l].whatIsBoatState());
                fileOut.newLine();

            }

            boatArray2 = new Boat[3];

            boatArray2[0] = new SailBoat();
            boatArray2[1] = new RaceBoat("Endurance", true);
            boatArray2[2] = new RaceBoat(false);

            for(m = 0 ; m < boatArray2.length ; ++m){

                fileOut.newLine();
                fileOut.write(boatArray2[m].toString());
                fileOut.newLine();
                fileOut.write(boatArray2[m].launchBoat());
                fileOut.newLine();
                fileOut.write(boatArray2[m].whatIsBoatState());
                fileOut.newLine();

            }

            fileOut.newLine();
            fileOut.write("There are " + Boat.boatCount + " boats in the fleet this morning.");

        }catch(IOException e){

        System.err.println("Error writing outPath: " + outPath);
        e.printStackTrace();

        }

    }else{

        System.out.println("\n\n\nArgh!... you forgot to enter ship names scalawag!" +
            "\n\n\n\tPlease try again!");

    }

    System.out.println("\nThe Fleet Registry is completed, press ENTER to continue.\n");

    try{

        System.in.read();

    } catch(IOException e){

        return;
    }
}
} 
```

Thank you everyone, I've entered the following:

```
 if(boatNames != null){

        boatArray1 = new Boat[boatNames.length];

        if(boatNames.length > 0){

            try(BufferedWriter fileOut = Files.newBufferedWriter(outPath, Charset.forName("UTF-16"))){

                for(j = 0 ; j < boatNames.length ; j++){

                    String delimiters = "[. ,]";
                    int limit = -1;

                    String[]tokens = boatNames[j].split(delimiters, limit);

                    for(k = 0 ; k < tokens.length ; ++k){

                        firstChar = tokens[k].charAt(0);
                        firstChar = Character.toUpperCase(firstChar);
                        char[] tokenArray = tokens[k].toCharArray();                            
                        String text = new String(tokenArray, 1, (tokenArray.length - 1) );                          
                        tokens[k] = firstChar + text;                   
                        result = result + tokens[k] + " ";

                        if(k != tokens.length - 1){

                            continue;

                        }else{

                            result = result.trim();
                            boatNames[k] = result;
                            result = " ";

                        }
                    }       

                    firstLetter = boatNames[j].charAt(0);

                    if((firstLetter == 'B') || (firstLetter == 'C') || (firstLetter == 'N')){

                        boatArray1[j] = new RaceBoat();

                    }else{

                        boatArray1[j] = new SailBoat();

                    }

                    boatArray1[j].christenBoat(boatNames[j]);               

                }

                System.out.println("\n");

                for(l = 0 ; l < boatNames.length ; ++l){            

                    secondLetter = Character.toUpperCase(boatNames[l].charAt(1));

                    if((secondLetter == 'A') || (secondLetter == 'E')){

                        if(l > 0){

                            fileOut.newLine();
                        }

                        fileOut.write(boatArray1[l].goFast());

                    }else{

                        if(l > 0){

                            fileOut.newLine();
                        }

                        fileOut.write(boatArray1[l].goSlow());

                    }           

                    fileOut.newLine();
                    fileOut.write(boatArray1[l].launchBoat());
                    fileOut.newLine();
                    fileOut.write(boatArray1[l].whatIsBoatState());
                    fileOut.newLine();

                }

                boatArray2 = new Boat[3];

                boatArray2[0] = new SailBoat();
                boatArray2[1] = new RaceBoat("Endurance", true);
                boatArray2[2] = new RaceBoat(false);

                for(m = 0 ; m < boatArray2.length ; ++m){

                    fileOut.newLine();
                    fileOut.write(boatArray2[m].toString());
                    fileOut.newLine();
                    fileOut.write(boatArray2[m].launchBoat());
                    fileOut.newLine();
                    fileOut.write(boatArray2[m].whatIsBoatState());
                    fileOut.newLine();

                }

                fileOut.newLine();
                fileOut.write("There are " + Boat.boatCount + " boats in the fleet this morning.");

            }catch(IOException e){

            System.err.println("Error writing outPath: " + outPath);
            e.printStackTrace();

            }

        }else{

            System.out.println("\n\n\nArgh!... you forgot to enter ship names scalawag!" +
                "\n\n\n\tPlease try again!");

        }

        System.out.println("\nThe Fleet Registry is completed, press ENTER to continue.\n");

        try{

            System.in.read();

        } catch(IOException e){

            return;
        }
    } 
```

Now I'm getting the following error:

```
C:\Documents and Settings\Joe King\My Documents\418.85A Java\Project5>java Project5
Exception in thread "main" java.lang.NullPointerException
       at Project5.main(Project5.java:424) 
```

This doesn't make sense to me, in order to get to line 424 the boatNames array cannot be null because the length of boatNames was used several times before line 424\. What am I missing?

Thanks

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T04:18:05.083

The variable *is* out of the `try/catch`, otherwise the compile error would be different. The problem is that the *initialization* is inside the `try` block, so that code after the `try` can't be sure the variable was initialized.

There are two ways to deal with this:

1.  Initialize the variable when you declare it. Just using this would be enough:

    `String[] boatNames = null;`

2.  Move all the code that uses the variable inside the `try` block. This is often a good strategy, but only if your methods are small. In your case, I wouldn't recommend this, as your method is much too long. Now, if you could break your code up into shorter methods, then limiting the scope of the variable to a single `try` block would make good sense.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T04:19:53.063

Before the try/catch block, initialize the array like this:

```
String[] boatNames = null; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T04:20:19.303

You have declared your array outside try block

```
String[] boatNames; 
```

It will be initialized under first try block

```
boatNames = new String[totalRead]; 
```

Issue is here `boatArray1 = new Boat[boatNames.length];`

Reason, your compiler has no way to know if `boatNames` initialization will be successful as there might be an exception and initialization will fail.

As part of your declaration you can do this:

```
String[] boatNames = null; // This will fix your immediate problem 
```

but doing this may lead you to `NullPointerException` since your File read can fail.

To solve this do a null check on your array before you use it.

```
if(boatNames == null){
   // I am not going to go further or will take corrective measures here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T04:26:30.787

`boatNames`此处的编译器考虑了在初始化之前可能在 try 块中引发异常的可能性，因此它会给出编译器错误`might not have been initialized`。**实力**在这里很重要！

这里理想的解决方案是调整您的代码结构并放置

`boatArray1 = new Boat[boatNames.length];`

在同一个尝试块中！

# asp.net-mvc - Dump my MVC site to static files

> ID：10974442
> 
> 赞同：6
> 
> 时间：2012-06-11T04:15:31.670
> 
> 标签：asp.net-mvc, static-site

I want to build a simple site with MVC but then render the "pages" and corresponding "assets" (js, css, images, etc) to what one might call a "static site".

In other words, I don't want to deploy to an IIS server that supports MVC. I simply want to build the site in MVC then somehow parse those pages into static html/css/etc files and upload the site to a regular LAMP host.

Is there an easy way to automate this? NuGet package? Binary? MVC extension like maybe a handler add-on that can render out the static site in a single pass?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:05:03.323

大约 10 年前，我曾经使用 HTTrack Website Copier 下载整个网站以供离线使用。也许您可以下载您自己的网站，它为您提供了静态网页的良好层次结构。如果您认为您的所有网页都可以通过主页链接、菜单链接等访问，那么您可以下载您网站的大部分内容。基本上你可以用谷歌搜索网络爬虫/离线浏览器/网站下载器等，然后运行它们来完成你的工作。

或者，如果你知道 url 的模式，你可以把它交给下载管理器来下载它们。不确定它是否适用于您的网站，但我有时会这样做。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:58:20.903

您可能想看看[Pretzel](http://code52.org/pretzel.html)，一个 .Net 静态站点生成器。

更新：显然它不适用于 ASP.Net 项目：[问题 #123](https://github.com/Code52/pretzel/issues/123#issuecomment-15685264)。它仅支持用于创作内容页面的 Razor 语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T04:42:29.700

如果您的站点依赖于数据库或其他一些动态源，则几乎不可能将所有可能的页面组合转储到静态文件中。另一方面，如果您的站点几乎是静态的，则将呈现的 HTML/JS/CSS 源保存到文件中并将其上传到 LAMP 服务器不会太难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T04:21:20.997

如果这样做的原因与性能有关，为什么不只使用输出缓存等，那样页面将非常快（您可以将缓存超时设置为很长的时间）并且您不需要运行一些工具来进行转换，并且必须将您的 html 与源代码分开存储。

当然你仍然需要运行 IIS/.net

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-24T03:44:59.127

你有三个选择：

1.  使用纯 html、css、jquery 和图像创建您的网站。您可以使用 Visual Studio Code 作为 IDE 来创建文件。一个问题可能是管理您网站的通用页眉/页脚。但是您可以通过使用 jquery 注入 html 页眉/页脚来解决它。

2.  使用像[Umbraco](https://umbraco.com/)这样的 CMS（内容管理系统）来托管您的静态网站。Umbraco 索引和缓存页面以提高性能。您可以很好地控制在您的网站上发布的内容等。

3.  使用 .Net + MVC 创建网站，并使用[HTTrack](https://www.httrack.com/)等工具下载网站的静态副本。您甚至可以使用命令自动化该过程，并在每次部署或构建等之后触发它。

# ruby-on-rails - 找出已安装 gem 的来源

> ID：10974444
> 
> 赞同：2
> 
> 时间：2012-06-11T04:16:24.957
> 
> 标签：ruby-on-rails, ruby, git, gem

这可能很简单，但我很难过......

所以我有一个需要修复的gem，它已经安装在共享开发机器上。 **我怎么知道它来自哪里，所以我可以分叉它？**

只是为了消除一些明显的东西，它肯定是安装的：

```
$ be gem list spp_manifests

*** LOCAL GEMS ***

spp_manifests (0.0.4) 
```

检查 gemspec 没有发现任何用处（除了作者的名字，但他不在了）：

```
$ gem specification spp_manifests

name: spp_manifests
homepage: ""
rubyforge_project: 
```

但它不在 Github 中公开，不在我们公司的 Github 存储库中，不在 Rubygems 中，搜索该名称会产生很多与新加坡人民党选举宣言的链接，但没有任何用处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:25:39.863

如此简短的回答是，一旦形成宝石，代码就完全从它曾经存在的存储库中分离出来，并且无法找到原始存储库的地址。

但是，可以：

a) 解压 gem 的代码，这样你就可以为它创建一个新的 repo（归功于 Flambino）

```
gem unpack spp_manifests 
```

b) 找出 gem 是从哪里下载的（感谢 Stefan）

```
more Gemfile.lock

GEM
  remote: http://gems.megacorp.com/
  remote: http://rubygems.org/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:17:58.590

我现在无法测试这个，因为我使用了代理，但是您可以在同一台机器上的控制台窗口中执行 gem update spp_manifest，您发出“netstat -b 1”（或 nix 对应项）以列出所有连接. 如果找到更新的版本，您的机器应该连接到源并进行安装。在连接列表中，您应该看到源。

您还可以使用“gem environment”检查远程源或使用“gem query -r -n spp_manifests”进行远程查找

# asp.net - AutoPostBack=True 导致表单多次触发 Page_Load 事件

> ID：10974449
> 
> 赞同：0
> 
> 时间：2012-06-11T04:17:10.067
> 
> 标签：asp.net

我有一个带有`SelectedIndexChanged`事件监听器的 DropDownList

```
<asp:DropDownList ID="LoanOptionCombo" runat="server" AutoProstBack="True"> 
```

听众

```
Protected Sub LoanOptionCombo_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles LoanOptionCombo.SelectedIndexChanged
    ' hello world, no code here yet
End Sub 
```

我的`Page_Load`活动

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    ' parse a .txt file and populate the DropDownList
    InitializeLoanOptions()
End Sub 
```

当表单最初加载时，贷款选项被加载到 DropDownList（目前是 4 个）中。

每当用户为 DropDownList 选择贷款选项时，DrowDownList 都会以某种方式重新初始化，再次将相同的 4 个选项添加到列表中。

每次用户选择另一个选项时，相同的 4 个选项会重新添加到列表中。

我假设再次调用 Page_Load 事件，因为这是我实际添加 DropDownList 项目的唯一地方。代码中没有其他地方与 DrowDownList.Items 交互。

**如何在 DropDownList 上收听 SelectedIndexChanged 事件，但避免重新初始化整个表单？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:20:42.047

您可以在页面加载事件中使用 IsPostBack 属性。当您的页面加载时，只有数据绑定到您的下拉菜单。

检查这些链接

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

[http://www.aspnet101.com/2007/03/if-not-page-ispostback/](http://www.aspnet101.com/2007/03/if-not-page-ispostback/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:24:01.727

你需要改变你`Page_Load`的如下

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    ' parse a .txt file and populate the DropDownList
 If Not IsPostBack
    InitializeLoanOptions()
  End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T04:30:02.003

检查 page_load 上的 IsPostBack 属性。

```
If Not IsPostBack
  // Load your drop drop list here....
End If 
```

# asp.net-mvc - MVC 4 - 更优雅的方式来编辑可变长度的项目列表？

> ID：10974453
> 
> 赞同：15
> 
> 时间：2012-06-11T04:18:20.973
> 
> 标签：asp.net-mvc, asp.net-mvc-4, variable-length

我发现的编辑可变长度项目列表的最佳建议是 2008 年为 ASP.Net MVC 2 编写的。

[http://blog.stevensanderson.com/2008/12/22/editing-a-variable-length-list-of-items-in-aspnet-mvc/](http://blog.stevensanderson.com/2008/12/22/editing-a-variable-length-list-of-items-in-aspnet-mvc/)

这种方法仍然是 ASP.Net MVC 4 的最佳方法，还是有一种更新的解决方案，要么是标准化的，要么是更优雅的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T08:32:04.890

看看[http://knockoutjs.com/](http://knockoutjs.com/) 它是一个依赖于 MVVM 模式的 JavaScript 框架。基本上，您可以将数组模型数据绑定到您的 HTML，然后将它们作为 JSON 数组发送回您的控制器。一个很大的副作用是它有助于使您的控制器对单元测试更加友好（因为您的控制器主要返回 JSON）。

[在http://channel9.msdn.com/Events/MIX/MIX11/FRM08](http://channel9.msdn.com/Events/MIX/MIX11/FRM08)上有一个关于淘汰赛的精彩视频

基本上你想看的是可观察的数组。 [http://knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html)

我还强烈建议您观看关于 knockout.js 的 20 分钟视频介绍。尽管它是一个较旧的视频，但它可以让您很好地了解它的工作原理，它对我帮助很大。 [http://channel9.msdn.com/Events/MIX/MIX11/FRM08](http://channel9.msdn.com/Events/MIX/MIX11/FRM08)

您也可以使用 AngularJS [http://angularjs.org/](http://angularjs.org/)，这是相同的概念（MVVM），它是由 google 推出的。两者之间有很多差异，但最主要的差异（我至少注意到）是角度，更多地依赖模板，在很多方面它赋予了它更多的力量。

在这两者之间，我认为淘汰赛更容易启动和运行，但使用 AngularJS 你有更多选择。

# api - Getting all Twitter Follows (ids) with Groovy?

> ID：10974454
> 
> 赞同：0
> 
> 时间：2012-06-11T04:18:37.743
> 
> 标签：api, twitter, groovy

I was reading an article [here](http://kousenit.wordpress.com/2010/04/01/twitter-follower-value-revisited/) and it looks like he is grabbing the IDs by the 100s. I thought it was possible to grab by 5000 each time?

The reason I'm asking is because sometimes there are profiles with much larger amounts of followers and you wouldn't have enough actions to do it all in one hour if one was to grab it by 100 each time.

So is it possible to grab 5000 ids each time, if so, how would I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:10:31.727

该文章中显示的 GET statuses/followers[已被弃用](https://dev.twitter.com/docs/api/1/get/statuses/followers)，但确实用于返回 100 个批次

如果您尝试获取关注者 ID，则可以使用[GET follower/ids](https://dev.twitter.com/docs/api/1/get/followers/ids)。这确实会返回最多 5000 个批次，并且只需要您稍微更改 URL（请参阅文档页面底部的示例 URL）

# multithreading - Blackberry - 使用 ListField 制作自动更新新闻内容

> ID：10974455
> 
> 赞同：0
> 
> 时间：2012-06-11T04:18:43.870
> 
> 标签：multithreading, blackberry, auto-update, listfield

我尝试使用我的 RSS 阅读器应用程序创建自动更新功能，因此它会在每次设置时发送请求，而不会像单击任何按钮那样执行任何操作。

我使用这样的列表字段制作了一个提要聚合器：

```
int i=0;
while (i<vec.size()){
    row = new TableRowManager();
    prov = new LabelField(((BinNews)vec.elementAt(i)).getProv(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.ORANGERED);
            super.paint(g);
        }
    };
    title = new LabelField(((BinNews)vec.elementAt(i)).getTitle(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.BLUE);
            super.paint(g);
        }
    };
    desc = new LabelField(((BinNews)vec.elementAt(i)).getDesc(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.BLACK);
            super.paint(g);
        }
    };
    date = new LabelField(((BinNews)vec.elementAt(i)).getDate(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.ORANGERED);
            super.paint(g);
        }
    };
    link = new LabelField(((BinNews)vec.elementAt(i)).getLink(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.BLACK);
            super.paint(g);
        }
    };
    rows.addElement(row);
    setSize(rows.size());
    row.add(prov);
    row.add(date);
    row.add(title);
    row.add(desc);
    i++;
} 
```

请告知我应该怎么做才能使其自动更新。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:07:49.493

最后我可以简单地使用：

```
UiApplication.getUiApplication().invokeLater(new Runnable() {
    public void run() {
        UiApplication.getUiApplication().pushScreen(new MainList());
    }
},120000, true); 
```

# android - call soap webservice in android

> ID：10974456
> 
> 赞同：1
> 
> 时间：2012-06-11T04:18:49.287
> 
> 标签：android, web-services

I am calling soap Web service in android but response is coming only anyType{}. But response data is not coming. it is only giving that much response how to get response data also.

```
private static String SOAP_ACTION = "http://tempuri.org/IService1/FindEmployee";
            private static String NAMESPACE = "http://tempuri.org/";    
            private static String METHOD_NAME = "FindEmployee"; 
            private static String URL = "http://192.168.1.9/Employee/Service1.svc?wsdl";
            private TextView tv;

            StringBuilder sb;

            private XmlSerializer writer;
            private TextView lblResult1;

             @Override
             public void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);
              setContentView(R.layout.main);

              lblResult1 = (TextView) findViewById(R.id.textView1);
              SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
              request.addAttribute("Empid", "R001");

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
              envelope.dotNet=true;
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
              try {
                  androidHttpTransport.call(SOAP_ACTION, envelope);
                 SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
               lblResult1.setText(resultsRequestSOAP.toString());
               } catch (Exception e) 
               {

               System.out.println("Error"+e);
              }

             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:56:12.783

写这个 `lblResult1.setText(resultsRequestSOAP.getProperty(0).toString());`

代替`lblResult1.setText(resultsRequestSOAP.toString());`

可能会帮助你。

如果它不起作用，则意味着您的 Web 服务没有返回任何响应，即您的 Web 服务没有从数据库中获取数据。

如果您需要有关此方面的更多帮助，请写信给我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:43:58.727

```
SoapObject request = new SoapObject(NAMESPACE, methodName);
            request.addProperty("Empid", "R001");

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);
            androidHttpTransport
            .setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
            envelope.dotNet = true;
            androidHttpTransport.debug = true;
            androidHttpTransport.call(newSoapAction, envelope); 
            InputStream in = new ByteArrayInputStream(androidHttpTransport.responseDump.getBytes());    
    System.out.println("WS >>  Response: "+androidHttpTransport.responseDump); // you will get response overhere 
```

# algorithm - NULL values across a dimension in Support Vector Machine

> ID：10974463
> 
> 赞同：0
> 
> 时间：2012-06-11T04:20:21.223
> 
> 标签：algorithm, machine-learning, artificial-intelligence, svm

I am designing a support vector machine considering n dimensions. Along every dimension, the values could range from [0-1]. Now, if I am unable to determine the value across a particular dimension from the original data set, for a particular data point due to various reasons, what should the value along that dimension be for the SVM? Can I just put it as [-1] indicating a missing value?

Thanks Abhishek S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:41:26.313

如果维度无法对您的机器的空间分区做出贡献，那么您最好将缺失值完全排除在外。这是因为 SVM 唯一能做的就是在分类能力上对该维度赋予零权重，因为该维度中的所有点都在同一个位置。

因此，每次通过该维度只是浪费计算资源。如果恢复此值很重要，您可以使用某种类型的回归模型来尝试获取估计值，但如果该估计值是从您的其他数据生成的，那么它实际上不会对您的SVM，因为该估计维度中的数据只不过是您用来生成它的数据的摘要（我假设它已经在您的 SVM 模型中）。

# c# - 为什么我会收到此错误：远程服务器返回错误：（417）预期失败

> ID：10974468
> 
> 赞同：0
> 
> 时间：2012-06-11T04:20:58.497
> 
> 标签：c#, httpwebrequest, http-headers, microsoft-metro

一位朋友向我展示了在 C# 中实现 HTTP POST 的示例代码，并在 WINFORM 应用程序中运行： [http ://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-请求-with-c/](http://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-request-with-c/)

并在 METRO APP 中实现：

```
 // this is what we are sending
string post_data = "user=user@example.com&pass=example123";

// this is where we will send it
string uri = "http://app.proceso.com.mx/win8/login";

// create a request
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
request.Method = "POST";

// turn our request string into a byte stream
byte[] postBytes = Encoding.UTF8.GetBytes(post_data);

// this is important - make sure you specify type this way
request.ContentType = "application/x-www-form-urlencoded";
Stream requestStream = await request.GetRequestStreamAsync();

// now send it
requestStream.Write(postBytes, 0, postBytes.Length);

// grab te response and print it out to the console along with the status code
WebResponse response = await request.GetResponseAsync();
//var a = new StreamReader(response.GetResponseStream()).ReadToEnd();
StreamReader requestReader = new StreamReader(response.GetResponseStream());
String webResponse = requestReader.ReadToEnd(); 
```

我意识到，HttpWebRequest 不包含 ProtocolVersion 并在此行中向我抛出此错误：

```
WebResponse response = await request.GetResponseAsync();
// ERROR: The remote server returned an error: (417) Expectation Failed. 
```

我想最后一个属性是解决方案。我怎么解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:45:57.850

我最近编写了一个小函数来处理将琐碎数据发布到服务器。

```
private struct HttpPostParam
{
    private string _key;
    private string _value;

    public string Key { get { return HttpUtility.UrlEncode(this._key); } set { this._key = value; } }
    public string Value { get { return HttpUtility.UrlEncode(this._value); } set { this._value = value; } }

    public HttpPostParam(string key, string value)
    {
        this._key = key;
        this._value = value;
    }
};

private static string PostTrivialData(Uri page, HttpPostParam[] parameters)
{
    string pageResponse = string.Empty;
    try
    {
        var request = (HttpWebRequest)WebRequest.Create(page); //create the initial request.
        request.Method = WebRequestMethods.Http.Post; //set the method
        request.AllowAutoRedirect = true; //couple of settings I personally prefer.
        request.KeepAlive = true;
        request.ContentType = "application/x-www-form-urlencoded";

        //create the post data.
        byte[] bData = Encoding.UTF8.GetBytes(string.Join("&", Array.ConvertAll(parameters, kvp => string.Format("{0}={1}", kvp.Key, kvp.Value))));
        using (var reqStream = request.GetRequestStream())
            reqStream.Write(bData, 0, bData.Length); //write the data to the request.

        using (var response = (HttpWebResponse)request.GetResponse()) //attempt to get the response.
            if (response.StatusCode == HttpStatusCode.OK || response.StatusCode == HttpStatusCode.NotModified) //check for a valid status (should only return 200 if successful)
                using (var reader = new System.IO.StreamReader(response.GetResponseStream()))
                    pageResponse = reader.ReadToEnd();
    }
    catch (Exception e)
    {
        /* todo: any error handling, for my use case failing gracefully was all that was needed. */
    }
    return pageResponse;
} 
```

本质上，它发布“参数”参数中定义的值对。需要引用和导入 System.Web 命名空间才能编译。

我刚刚在您的网站上对其进行了测试并得到了回复：

```
HttpPostParam[] httpparams = {
                                new HttpPostParam("user", "censored@email.com"),
                                new HttpPostParam("pass", "example123")
                             };
string response = PostTrivialData(new Uri("http://app.proceso.com.mx/win8/login"), httpparams); 
```

让我知道是否有任何问题。

# c - 如何在 cygwin 中链接 glut32？

> ID：10974471
> 
> 赞同：2
> 
> 时间：2012-06-11T04:21:01.840
> 
> 标签：c, cygwin, glut

我正在尝试从 sourceforge运行[其他人（4 岁）的代码。](http://sourceforge.net/projects/autodistrict/)我下载了 cygwin 并使用 CVS 检查了该项目。

这是失败的[编译行：](http://autodistrict.cvs.sourceforge.net/viewvc/autodistrict/bmp_version/compile_dir/compile?view=markup)

```
gcc ../block_display/block_display.c -o block_display -lopengl32 -lglut32 -lm 
```

这是[block_display.c](http://autodistrict.cvs.sourceforge.net/viewvc/autodistrict/bmp_version/block_display/block_display.c?view=markup)中的相关包含语句：

```
#include <GL/glut.h> 
```

当我尝试运行上面的编译行时，我得到了这个编译错误：

```
$ gcc ../block_display/block_display.c -o block_display -lopengl32 -lglut32 -lm
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: cannot find -lglut32
collect2: ld returned 1 exit status 
```

我承认我对 cygwin 很陌生/生疏。我尝试了一些方法来达到这一点，但由于我不完全知道将文件放在哪里，所以我陷入了这个错误。这是我尝试过的：

1.  在 cygwin 设置中下载“过剩”的所有结果：libglut-devel、freeglut、libglut3
2.  下载[glut 3.7.6](http://user.xmission.com/~nate/glut/glut-3.7.6-bin.zip)，将 glut32.dll 复制到 C:\Windows\SysWOW64，并将 glut.h 复制到 C:\cygwin\usr\include。我仍然有 glut.def 和 glut32.lib，但我不知道将它们放在哪里。我尝试按照[此安装指南](http://www.cs.csustan.edu/~rsc/SDSU/GLUTinstall.html)进行操作，但由于我没有运行 VC++，因此我不知道 VC++ 路径的 cygwin 等效项是什么。

知道我能做些什么来让这段代码成功编译吗？我正在运行 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:26:34.700

您应该改用[freeglut](http://freeglut.sourceforge.net/)。最初的过剩已经过时了。另一方面，Freeglut 是二进制且源代码与原始 glut 兼容，而且它也是开源的。

由于 glut32.dll 是 Windows DLL，而 cygwin 用于在 Windows 上模拟 unix 环境，因此如果不从源代码重新编译，就无法轻松地将原始 glut 与 cygwin 一起使用。

# javascript - 如何让自定义对象监听子自定义对象的事件？

> ID：10974472
> 
> 赞同：0
> 
> 时间：2012-06-11T04:21:35.017
> 
> 标签：javascript, jquery

我正在尝试在 JavaScript 中创建几个自定义对象，但我不确定我是否以正确的方式处理事情。

我有两个对象：“UserInterface”和“VolumeSlider”。直到刚才，这两个对象是独立的，但通过方法耦合。我决定 UserInterface 应该“拥有”一个 VolumeSlider。

所以：

```
UserInterface = {
    _volumeSlider: null,

    initialize: function () {
        this._volumeSlider = VolumeSlider; //TODO: Should this be a new volumeSlider();
        this._volumeSlider.initialize();

        //I want to setup a listener for VolumeSlider's change-volume events here.
    }
}

VolumeSlider = {
    _volumeSlider: null,

    initialize: function () {
        this._volumeSlider = $('#VolumeSlider');
        var self = this;
        this._volumeSlider.slider({
            orientation: 'horizontal',
            max: 100,
            min: 0,
            value: 0,
            slide: function (e, ui) {
                self.passVolumeToPlayer(ui.value);
            },
            change: function (e, ui) {
                self.passVolumeToPlayer(ui.value);
            }
        });
    },

    passVolumeToPlayer: function (volume) {
        if (volume != 0)
            UserInterface.updateMuteButton(volume);
        else
            UserInterface.updateMuteButton('Muted');
    }
} 
```

问题有两个：

*   这是创建我的对象和设置孩子的好方法吗？
*   我希望 UserInterface 能够响应 VolumeSlider._volumeSlider 的更改和滑动事件，而不必明确告知。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:35:29.593

> 这是创建我的对象和设置孩子的好方法吗？

如果它有效，那就“没问题” :)
但说真的，实际上有无数种方法可以设置类似的东西。很大程度上取决于您的需求。

不过，我会说，例如，如果需要超过 1 个滑块，您的代码将会很笨拙。

* * *

> 我希望 UserInterface 能够响应 VolumeSlider._volumeSlider 的更改和滑动事件，而不必明确告知。我怎样才能做到这一点？

我可能会跳过这个`VolumeSlider`对象。它不是构造函数（“类”），所以它是一次性的并且硬编码到`#VolumeSlider`元素中。此外，从您的代码来看，它并没有真正*做*那么多。似乎只是一个中间人。

这是一个替代方案：

```
UserInterface = {
  initialize: function () {
    // Internal function to create a horizontal 0-100 slider
    // Takes a selector, and a function that will receive the
    // value of the slider
    function buildSlider(selector, callback) {
      var element = $(selector);
      var handler = function (event, ui) { callback(ui.value); };
      element.slider({
        orientation: 'horizontal',
        max:   100,
        min:   0,
        value: 0,
        slide:  handler,
        change: handler
      });
      return element;
    }

    // We probably want to bind the scope of setVolume, so use $.proxy
    this.volumeSlider = buildSlider("#VolumeSlider", $.proxy(this.setVolume, this));

    // Want more sliders? Just add them
    // this.speedSlider = buildSlider("#SpeedSlider", $.proxy(this.setSpeed, this));
    // this.balanceSlider = buildSlider("#BalanceSlider", $.proxy(this.setBalance, this)); 
    // etc...
  },

  setVolume: function (value) {
    if( value != 0 ) {
      // not muted
    } else {
      // muted
    }
  }
} 
```

有了这个，您可以想象为您需要的任何目的创建 X 个滑块。而且没有单独的一次性`VolumeSlider`物品；一切都在`UserInterface`对象中处理。

当然，这本身可能不是最好的主意，但出于这个简单的目的，它是可以的。但是，您可能希望将 提取`buildSlider`到更一般的`UIElements`对象中。它可以有类似`buildSlider`,`buildButton`等的方法。

或者，您可以采用“Unobtrusive JavaScript”方式并具有特殊的类名和`data-`属性，它们将声明元素在 UI 中的适合方式和位置。例如

`<div id="volumeSlider" class="ui-element" data-role="slider" data-action="setVolume">...`

可以与所有其他 UI 元素一起使用`$(".ui-element").each ...`，之后可以解析其属性以表示它应该被制成一个名为“volumeSlider”的滑块，并且它的滑动/更改事件应该调用`setVolume`......*等等。*

再一次，有很多很多的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:51:47.457

我认为您的原始结构根本不会变得笨拙。JavaScript 的内置数据结构将在这种情况下有所帮助。

如果您需要多个音量滑块，只需将此位更改`_volumeSlider: null,`为`_volumeSliders: [],`

如果您需要引用滑块，请初始化`_volumeSliders`为`dict`. 然后通过 引用它们`_volumeSliders[selector]`，你就得到了你的对象。

代替向上传递值的函数，向下发送对父实例的引用。然后你可以写，`parent.volume = value`.

作为一个经验法则，我严格遵守一个坚实的、合乎逻辑的、层次结构的结构。永远不要改变你的架构，只需创建范围引用。在这种情况下，是对父作用域的引用。我不会使用第一个回答者的方法，因为我可能不得不四处寻找正在创建的对象的来源。

第一个回答者有一些好主意。您可能会注意到某些重复的模式，例如设置 jQuery 元素引用。我通常会等到我注意到这些重复的模式，然后用一个抽象来干掉它，例如一个基类，就像[Flambino](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)建议的那样，例如`UIElement`.

# iphone - 无法解析以下 XML？

> ID：10974474
> 
> 赞同：2
> 
> 时间：2012-06-11T04:22:06.723
> 
> 标签：iphone, objective-c, ios, xml-parsing, nsxmlparser

我有连续的标签`img id="#"`，`#`从 1 到 9 不等。

标签的描述由浮动值组成。

当我使用标准的 NSXML 解析器时，我没有得到所有的值。

我的 XML 供参考：

```
<img id="1">-0.0111328,-0.0635608,0.152549,0.11211,-0.0250431,

            -0.0370875,0.0862391,0.0970791,-0.0195908,

            -0.00892297,0.0791795,0.0554013,0.00362028,0.0138572,0.0432729,

             0.0253036,-0.0770325,0.14065,0.118424,0.1787,

             0.0734354,0.160883,0.101831,0.237038,0.0681151,0.178331,

             0.106532,0.224731,0.133766,0.222096,0.165214,0.240752,

             -0.0280366,0.106239,0.052094,0.110642,   

</img> 
```

我将如何解析上述 XML？

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:34:08.750

这是因为`parser:foundCharacters:`不会一次传送所有字符。您需要连接在回调之间获得的所有字符串`parser:didStartElement:namespaceURI:qualifiedName:attributes:`以及`parser:didEndElement:namespaceURI:qualifiedName:`为`<img>`标签获得的所有字符串。

在下面的代码中，`buf`是`NSMutableString`您的解析器委托的 ivar。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    if ([qualifiedName isEqualToString:@"img"]) {
        buf = [NSMutableString string];
    }
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if ([qualifiedName isEqualToString:@"img"]) {
        buf = [buf stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        NSLog(@"Got %@", buf);
    }
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [buf appendString:string];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:34:39.053

终于明白了......我为img id ='＃'放置了开始和结束标签。我的结构现在看起来像这样：

```
<images>

    <img id = '1'> -0.0111328,-0.0635608,0.152549,0.11211,-0.0250431,

        -0.0370875,0.0862391,0.0970791,-0.0195908,

        -0.00892297,0.0791795,0.0554013,0.00362028,0.0138572,0.0432729,

         0.0253036,-0.0770325,0.14065,0.118424,0.1787,

         0.0734354,0.160883,0.101831,0.237038,0.0681151,0.178331,

         0.106532,0.224731,0.133766,0.222096,0.165214,0.240752,

         -0.0280366,0.106239,0.052094,0.110642, ....  

     </img>

     <img id = '2'> ... 

     </img>

   ....

   ....

</images>

<mapping>

  <map>
    <imgid> 1 </imgid>
    <keyword> heavy </keyword>

  </map>

  <map>
    <imgid> 2 </imgid>
    <keyword> metal </keyword>

  </map>

  ...

  ...

</mapping> 
```

放置开始和结束标签允许我解析整个 xml。

早些时候，开始和结束标签用于单个图像，仅导致解析一个 img。

这让我在解析 XML 时添加了另一个关键点。

希望这对其他人也有帮助。

# objective-c - 如何在 iOS 上构建具有最大兼容性的静态库？

> ID：10974475
> 
> 赞同：5
> 
> 时间：2012-06-11T04:22:10.193
> 
> 标签：objective-c, ios, xcode

我正在为 ios 开发人员编写一个静态库。

如何在 iOS 上构建具有最大兼容性的静态库？换句话说，支持未来不同类型的项目。比如，3.0~版本，ARC/非ARC项目，xib/storyboard，simulator/iphone/ipad。

我应该考虑的最重要的事情是什么？

1.  设置部署目标以检查兼容性？
2.  使用“lipo”合并两个平台库？
3.  不要在我的代码中使用 ARC？

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:24:21.297

试试这个：[http ://atastypixel.com/blog/an-xcode-4-template-to-create-universal-static-libraries/](http://atastypixel.com/blog/an-xcode-4-template-to-create-universal-static-libraries/)

我希望它有帮助！

至少，它将帮助您处理“通用”（arm6/arm7/i386）部分。

# android - Android：notifyDataSetChanged 不起作用

> ID：10974480
> 
> 赞同：0
> 
> 时间：2012-06-11T04:22:39.677
> 
> 标签：android, android-listview

我作为练习尝试的购物清单应用程序具有以下活动：

1.  ShoppingListMain - 购物清单列表
2.  ShoppingListActivity - 显示特定购物清单的所有购物清单项目的活动
3.  ListItemEditActivity - 一种允许编辑购物清单项目详细信息的活动

当我添加一个新的购物清单（在活动 #1 中）时，ListView 会完美刷新。但是，当我添加一个新的购物清单项目（在活动 #2 中）时，我必须点击后退按钮并返回到我将新项目添加到的任何购物清单，以便所述项目出现在 ListView 中。

我已经尝试了以下帖子中的建议，但 ShoppingListActivity 的 ListView 仍然没有运气。

*   [[完成]notifyDataSetChanged 不会自动更新 ListView](https://stackoverflow.com/questions/5186359/donenotifydatasetchanged-does-not-update-listactivity-automatically)

任何有关此问题的帮助将不胜感激。

我用于添加新购物清单的代码...

**ShoppingListApplication.java**

```
public void insertShoppingList(ShoppingList shoppingList) {
    assert(shoppingList != null);

    long id = mDbAdapter.insertShoppingList(shoppingList.getName());
    shoppingList.setId(id);
    mShoppingLists.add(shoppingList);
} 
```

**ShoppingListMain.java**

```
 mNewListAddButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            String name = mNewListName.getText().toString();
            ShoppingList newList = new ShoppingList();
            newList.setName(name);

            mApp.insertShoppingList(newList);

            mNewListName.setText("");
            mListAdapter.notifyDataSetChanged();
        }
    }); 
```

用于将新商品添加到个人购物清单...

**ShoppingListActivity.java**

```
 long id = mDbAdapter.insertListItem(mParentListId,
            item.getDescription(), item.getQuantity(),
            item.getUnitCost(), item.isPurchased(),
            item.getNotes());
    Log.i("ShoppingList", "New ID " + id);
    item.setId(id);

    mListItems.add(item);
    mListAdapter.notifyDataSetChanged();
    setListTotal(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T04:44:52.643

```
public void insertShoppingList(ShoppingList shoppingList) {
    assert(shoppingList != null);
    long id = mDbAdapter.insertShoppingList(shoppingList.getName());
    shoppingList.setId(id);
    mShoppingLists.add(shoppingList);
    mListAdapter.notifyDataSetChanged();
} 
```

您必须手动调用 adapter.notifyDataSetChanged()。

# java - Android：检查一个进程是否已完成以启动其他进程

> ID：10974482
> 
> 赞同：0
> 
> 时间：2012-06-11T04:23:22.227
> 
> 标签：java, android, android-viewpager, viewpagerindicator

我在由 ViewPagerIndicator 膨胀的布局和可运行的进程中遇到问题。这种情况并不总是发生，但已经发生过几次。

MainActivity.java

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mAdapter = new GtAdapter(getSupportFragmentManager());
        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setOffscreenPageLimit(5);
        mPager.setAdapter(mAdapter);
        mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        mIndicator.setCurrentItem(1);
        mIndicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {   
            public void onPageSelected(int position) {
            }
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            }
            public void onPageScrollStateChanged(int state) {
            }
        });
        int cod = mAdapter.getItemPosition(0);

        refreshPages();

    } 
```

在 refreshPages() 方法上，我有一个 Runnable，它对 ViewPagerIndicator 膨胀的视图进行了一些引用，这通常有效，但有时（~ 20 个有效 - 1 个错误）我在该引用中得到一些 NullPointerException 错误。

我通过代码放了一些日志标签，发现报错的时候refreshPages方法发生在inflate进程启动之前。为什么会这样？如何使 refreshPages 方法仅在充气过程完成后才启动？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:59:41.770

@丹尼尔，

由于 refreshPages 具有或实现了 Runnable，因此它的代码在**不同的线程上运行。**您无法控制线程何时执行；它就是这样。这就是为什么有时您的代码不起作用的原因。一种快速的方法是使用共享标志（在线程之间）或更正确的方式使用信号量来同步线程。现在，只需尝试使用标志，直到您了解如何同步为止。理解？

如前所述，您可以提供 refreshPages() 的代码以供查看。

# python - 如何在 PYTHON 中使用子流程实现流式输入？

> ID：10974488
> 
> 赞同：0
> 
> 时间：2012-06-11T04:24:25.470
> 
> 标签：python, subprocess

由于`input`并`raw_input()`停止程序运行，我想使用一个子进程来运行这个程序......

```
while True: print raw_input() 
```

并得到它的输出。

这是我的阅读计划：

```
import subprocess
process = subprocess.Popen('python subinput.py', stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
while True:
    output=process.stdout.read(12)
    if output=='' and process.poll()!=None:
        break
    if output!='':
        sys.stdout.write(output)
        sys.stdout.flush() 
```

当我运行它时，子进程退出的速度几乎和它开始时一样快。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:30:21.997

我认为问题在于子进程没有直接连接到`stdout`and `stdin`，因此无法接收键盘输入。大概 raw_input() 正在引发异常。

如果这是一个实际问题而不是实验，我建议您使用诸如 curses 或 pygame 之类的库来处理您的输入。如果您正在尝试并想自己做，那么我想您将不得不查看线程而不是子进程，尽管尝试这样做是一件相当复杂的事情，因此您肯定会遇到其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:38:06.483

恐怕它不会这样工作。

您假设，这`subprocess`将附加您的控制台（您的特殊情况`stdin`）。这不起作用，该模块只有两个选项用于指定：`PIPE`和`STDOUT`.

当没有指定任何内容时，子进程将无法使用相应的流——它的输出将无处可去，或者它不会收到任何输入。`raw_input()`由于EOF而结束。

要走的路是在“主”程序中输入您的输入，并在子流程中完成工作。

编辑：

这是一个例子`multiprocessing`

```
from multiprocessing import Process, Pipe
import time

def child(conn):
    while True:
        print "Processing..."
        time.sleep(1)
        if conn.poll(0):
            output = conn.recv()
            print output
        else:
            print "I got nothing this time"

def parent():
    parent_conn, child_conn = Pipe()
    p = Process(target=child, args=(child_conn,))
    p.start()
    while True:
        data = raw_input()
        parent_conn.send(data)
    # p.join() - you have to find some way to stop all this...
    # like a specific message to quit etc.

if __name__ == '__main__':
    parent() 
```

当然，您需要找到一种方法来阻止这种合作，从而使其更加强大。在我的示例中，两个进程都在同一个文件中，但您可以以不同的方式组织它。

此示例适用于 Linux，您可能在 Windows 上遇到管道问题，但应该完全可以解决。

“处理”是您想要做其他事情的部分，而不仅仅是等待来自父级的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:30:31.490

好吧，尝试不同的架构。您可以使用`zeromq`.

1.  Producer 生产所有项目（这里是通过 stdout 发送的输出）并通过`zmq`.

2.  消费者应该监听生产者正在广播的端口号并相应地处理它们。

这是示例[http://code.saghul.net/implementing-a-pubsub-based-application-with](http://code.saghul.net/implementing-a-pubsub-based-application-with%5d)

`Note`

使用`gevent`或`multiprocessing`生成这些进程。

您将拥有`master`负责产卵`producer`和`consumer`

# ruby - 为什么这个 eval 在 Ruby 中不起作用

> ID：10974490
> 
> 赞同：5
> 
> 时间：2012-06-11T04:25:00.300
> 
> 标签：ruby

你能解释一下吗？

我想评估来自两个不同来源的值和计算。一个来源给了我以下信息（以编程方式）：

```
'a = 2' 
```

第二个来源给了我这个表达式来评估：

```
'a + 3' 
```

这有效：

```
a = 2
eval 'a + 3' 
```

这也有效：

```
eval 'a = 2; a + 3' 
```

但我真正需要的是这个，它不起作用：

```
eval 'a = 2'
eval 'a + 3' 
```

我想了解其中的区别，以及如何使最后一个选项起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T04:51:13.533

您可以创建一个[`Binding`](http://ruby-doc.org/core-1.9.3/Binding.html), 并将相同的绑定与每个[`eval`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval)调用关联：

```
1.9.3p194 :008 > b = binding
 => #<Binding:0x00000100a60c60> 
1.9.3p194 :009 > eval 'a = 2', b
 => 2 
1.9.3p194 :010 > eval 'a + 3', b
 => 5 
```

这样，您在早期`eval`调用中创建的任何变量都可以在以后使用（只要您使用相同的绑定对象）。

`Kernel::eval`您可以使用代替 using ，[`Binding#eval`](http://ruby-doc.org/core-1.9.3/Binding.html#method-i-eval)这将使关联更清晰：

```
1.9.3p194 :011 > b = binding
 => #<Binding:0x00000100b46aa8> 
1.9.3p194 :012 > b.eval 'a = 2'
 => 2 
1.9.3p194 :013 > b.eval 'a + 3'
 => 5 
```

# python - 如何在python中将交互式提示与argparse结合起来？

> ID：10974491
> 
> 赞同：8
> 
> 时间：2012-06-11T04:25:13.963
> 
> 标签：python, argparse

我有一个包含大量潜在参数的程序。它基本上允许用户访问`get/set/delete/list`非常小的数据库中的任何表。每列都有一个可以传递的 arg。
这不是主界面，只是偶尔有用的管理界面。

无论如何，如果用户想在表中插入一行，他必须知道所有列的名称。虽然从帮助中很容易看出这一点 - 这也是一种痛苦。

因此，我更改了代码，以便用户可以传递 --prompt 选项，程序将提示他们输入与他们指定的表关联的每个列名。但我的问题是我现在需要在两个地方复制我的输入约束（选择、类型等）——argparse 和这个提示函数。

*   问题#1：有没有更好的方法来做到这一点？
*   问题 #2：是否有一种干净的方法来为此目的引用 argparse 约束？
*   问题 #3：是否有任何库被推荐作为结合命令行参数、选项和提示的替代方案？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-28T21:29:23.410

执行此操作的典型方法是使用自定义操作。您可以使用与此相同的函数验证 argparse 选项和输入。

```
#!/usr/bin/env python3

import argparse

class ColumnsAction(argparse.Action):
    def __call__(self, parser, namespace, value, option_string=None):
        self.validate(parser, value)
        setattr(namespace, self.dest, value)

    @staticmethod
    def validate(parser, value):
        if value not in ('foo', 'bar'):
            parser.error('{} not valid column'.format(value))

parser = argparse.ArgumentParser()
parser.add_argument('--columns', action=ColumnsAction)
args = parser.parse_args()
if args.columns is None:
    args.columns = input('Enter columns: ')
    ColumnsAction.validate(parser, args.columns)
print(args.columns) 
```

# javascript - Javascript：快速查找对象中的值（就像我们可以使用属性一样）

> ID：10974493
> 
> 赞同：6
> 
> 时间：2012-06-11T04:25:55.253
> 
> 标签：javascript, object, loops, lookup

我有一个对象，它有一对用于简单编码/解码的替换值（不是为了安全，只是为了方便；这里解释得太复杂了）。它的形式

```
var obj = {x: y,
           x: y,
           ...
          }; 
```

其中“x”是编码时的值，“y”是解码后的值。

解码很简单：我遍历字符串的字符，并`charAt(i)`通过括号查找对象中的值：`obj[ str.charAt(i) ]`. （我忽略了检查是否需要大写或小写版本（对象中的所有键/值都是小写的），但这很简单。）

要进行编码，我当然必须在对象中查找值，而不是属性。目前，我正在使用循环遍历属性`for ... in ...`并根据值检查`charAt(i)`值。我目前的代码是：

```
var i, j,
    output = '',
    str = 'Hello World!',
    obj = {'s':'d',
           'm':'e',
           'e':'h',
           'x':'l',
           'z':'o',
           'i':'r',
           'a':'w',
           'o':'!',
           '-':' '};
for (i = 0; i < str.length; i++) {
    for (j in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, j) &&
            Object.prototype.propertyIsEnumerable.call(obj, j)) {
            if (obj[j] === str.charAt(i)) {
                output += j;
                break;
            } else if (obj[j].toUpperCase() === str.charAt(i)) {
                output += j.toUpperCase();
                break;
            }
        }
    }
}
alert(output); 
```

我天生觉得应该有一种更有效的方法来做到这一点。（当然有一个颠倒的对象，{y: x}，是一种选择。但不是一个好方法。）这是最好的方法，还是有更好的方法？从本质上讲，我希望能够`var prop = obj[value]`像我能做的那样做`var value = obj[prop]`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T05:08:50.370

预先循环一次以创建反向映射更有效：

```
var str = "Hello World!",
    output = '',
    map = {
      "s":"d", "m":"e",
      "e":"h", "x":"l",
      "z":"o", "i":"r",
      "a":"w", "o":"!",
      "-":" "
    },
    reverseMap = {}

for (j in map){
  if (!Object.prototype.hasOwnProperty.call(map, j)) continue
  reverseMap[map[j]] = j
}

output = str.replace(/./g, function(c){
  return reverseMap[c] || reverseMap[c.toLowerCase()].toUpperCase()
})

console.log(output) 
```

而不是做`str.length * map.length`，你会做`map.length + str.length`操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T04:45:50.587

反向编码器会更有意义，但您可以编写替换函数而无需所有 hasOwnProperty 等测试。

```
var str= 'Hello World!',
obj={
    's':'d',
    'm':'e',
    'e':'h',
    'x':'l',
    'z':'o',
    'i':'r',
    'a':'w',
    'o':'!',
    '-':' '
}
str= str.replace(/./g, function(w){
    for(var p in obj){
        if(obj[p]=== w) return p;
        if(obj[p]=== w.toLowerCase()) return p.toUpperCase();
    };
    return w;
}); 
```

**返回值：（字符串）Emxxz-Azixso**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T04:30:26.460

您可以通过编程方式（而不是手动）创建映射的反转版本并使用它。

```
var rev = {}
for (key in obj)
    rev[obj[key]] = key 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T04:39:11.413

如果您正在寻找数组键，请查看此处。

[https://raw.github.com/kvz/phpjs/master/functions/array/array_keys.js](https://raw.github.com/kvz/phpjs/master/functions/array/array_keys.js)

```
function array_keys (input, search_value, argStrict) {
    var search = typeof search_value !== 'undefined', tmp_arr = [], strict = !!argStrict, include = true, key = '';

    if (input && typeof input === 'object' && input.change_key_case) {
        return input.keys(search_value, argStrict);
    }

    for (key in input) {
        if (input.hasOwnProperty(key)) {
            include = true;
            if (search) {
                if (strict && input[key] !== search_value) include = false;
                else if (input[key] != search_value) include = false;
            }
            if (include) tmp_arr[tmp_arr.length] = key;
        }
    }

    return tmp_arr;
} 
```

# css - 如何在CSS中的图像周围获得白色轮廓

> ID：10974494
> 
> 赞同：8
> 
> 时间：2012-06-11T04:26:01.057
> 
> 标签：css

我正在尝试为带有白色边框的图像设置样式，如下所示：

![在此处输入图像描述](../Images/5e6cbfa5563eadebb729145ceca95718.png)

如果我这样做了：

```
 <ul class="learn">
    <li class="thumbnaile" > <img id="portrait" src="/assets/allyson.jpg" class="stretch" />
    </li>
 </ul> 
```

...然后将填充添加到 .thumbnaile...

有没有比这更好/更有效的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T04:32:09.240

您可以使用`border`（这当然是显而易见的选择），但还有`padding`and `box-shadow`：

```
img {
    background-color: #fff;
    padding: 4px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/McnEe/)。

在此示例中，`img`元素由 填充`4px`，这允许`background-color`从图像“后面”延伸出来。

```
img {
    margin: 4px 0 0 4px;
    box-shadow: 0 0 0 4px #fff;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/McnEe/1/)。

因为`box-shadow`不会取代元素，`margin`所以需要允许`box-shadow`在所有方面显示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T04:28:26.103

只需使用[边框](https://developer.mozilla.org/en/CSS/border)属性就可以满足您的要求：

```
border: solid white 4px; 
```

只要需要边框的唯一部分是（矩形图像的）外边缘，它将围绕它，如图所示。[`box-sizing`](https://developer.mozilla.org/En/CSS/Box-sizing)如果边框应该切入图像，您可能需要修改；但对于填充，默认值将起作用。

边框将在`<li>`或`<img>`标签上起作用，具体取决于您要如何放置图像（将允许多个图像*之间*`<li>`没有边框）。

 *添加`padding`到类中会产生类似的效果，但对于用于调整元素大小和定位的框而言，其行为会有所不同。上的填充`<li>`将对 上的适当边框产生非常接近的效果`<img>`，但是将边框放在`<img>`本身上可能会简化您的 CSS。*

# ios - NSDateFormatter 提前 4 小时给我时间

> ID：10974496
> 
> 赞同：2
> 
> 时间：2012-06-11T04:26:33.767
> 
> 标签：ios, nsdate

我正在将字符串“2012 年 6 月 11 日晚上 9:30”转换为 NSDate，并且由于某种原因我一直提前 4 小时。有趣的是，我正在使用相同的字符串在详细视图中提供 UIDatePicker，我必须在其中进行相同的转换，并且 UIDatePicker 可以很好地呈现时间。只有当我现在尝试在我的主要和详细视图中对其进行 NSLog 记录时，我才会遇到问题。

这是我的看法：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MMMM dd, yyyy h:mma"];  
NSDate *dateFromString = [[[NSDate alloc] init]autorelease];

NSLog(@"DATE %@", _date);

dateFromString = [formatter dateFromString:_date];

NSLog(@"NSDATEFROMSTRING %@", dateFromString); 
```

NSLog 返回：

```
2012-06-11 00:02:09.136 LocalDeals[78090:207] DATE Jun 11, 2012 9:30 PM
2012-06-11 00:02:09.137 LocalDeals[78090:207] NSDATEFROMSTRING 2012-06-12 01:30:00 +0000 
```

即使我添加：

```
[formatter setTimeZone:[NSTimeZone defaultTimeZone]]; 
```

在我选择的任何时候，我仍然会得到相同的结果。有任何想法吗？顺便说一句，这是在模拟器上，是的，我的区域格式设置为美国。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:47:11.367

当您 NSLog 一个 NSDate 时，它​​会将时间打印为 GMT 时区为了查看正确的数据，您必须使用将 NSDate 转换为字符串`stringFromDate`

```
NSDate *dateFromString = [[[NSDate alloc] init]autorelease];

NSLog(@"DATE %@", _date);

//Instead of nslog directly, use this stringFromDate:remindOn
NSString *str = [formatter stringFromDate:dateFromString];
NSLog(@"date is %@", str); //This will log the correct data 
```

您遇到的问题不在 NSDate 中，而是在记录它 **UPDATE**为了将数据保存到文件或数据库中，我建议您像这样保存它

```
NSTimeInterval timeInterval  = [dateFromString timeIntervalSince1970]; 
```

现在，当您再次从数据库中读取它时，您会这样做

```
NSDate *data = [[NSDate alloc] initWithTimeIntervalSince1970:timeInterval] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:03:36.333

以下代码将显示您所在时区的时间：

```
NSString *_date = @"Jun 11, 2012 9:30 PM";

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];    
NSDateFormatter *formatter2 = [[NSDateFormatter alloc] init];

[formatter setDateFormat:@"MMMM dd, yyyy h:mma"];  
[formatter2 setDateFormat:@"MMMM dd, yyyy h:mma Z"];  

NSDate *dateFromString = [[NSDate alloc] init];

NSLog(@"DATE %@", _date);

dateFromString = [formatter dateFromString:_date];

NSLog(@"NSDATEFROMSTRING %@", dateFromString);
NSLog(@"NSDATEFROMSTRING %@", [formatter stringFromDate:dateFromString]);
NSLog(@"NSDATEFROMSTRING %@", [formatter2 stringFromDate:dateFromString]); 
```

结果：

```
DATE Jun 11, 2012 9:30 PM
NSDATEFROMSTRING 2012-06-12 04:30:00 +0000
NSDATEFROMSTRING June 11, 2012 9:30PM
NSDATEFROMSTRING June 11, 2012 9:30PM -0700 
```

如果您现在使用 Google 搜索 UTC 时间，它确实会为您提供接近输出中第二行的时间，这确认它正在将时间打印为 UTC 时间。

（我们在不同的时区，`dateFromString`并将字符串中的时间解释为您的当地时间。）

# android - 不幸的是，lastRide 已停止（Android）

> ID：10974500
> 
> 赞同：0
> 
> 时间：2012-06-11T04:27:15.880
> 
> 标签：android

我在模拟器上不断收到此错误：

我从教程中复制了这个，但仍然无法正常工作。当我运行我的应用程序时，它说 - 不幸的是，lastRide 已停止。有任何想法吗？

但是控制台中没有给出错误。

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:id="@android:id/tabhost"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  tools:ignore="HardcodedText" >

   <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:id="@+id/fr"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <CheckBox android:text="rawted" />

        <CheckBox android:text="rawted" />

        <CheckBox android:text="rawted" />

         <CheckBox android:text="rawted" />
          </LinearLayout>

         </LinearLayout>

       </TabHost> 
```

lastRideActivity.java

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TabHost mTabHost = getTabHost();
    mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator("TAB 1")
            .setContent(R.id.fr));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:53:20.587

您需要移动`setContentView`以便它在您调用 tabhost 之前发生。

当您使用`getTabHost`框架时试图在活动视图中找到小部件，但由于尚未设置视图而无法找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:20:11.710

**改变**

```
TabHost mTabHost = getTabHost(); // declare as TabHost in your code
setContentView(R.layout.main); 
```

**到**

```
setContentView(R.layout.main);
TabHost mTabHost = getTabHost(); // declare as TabHost in your code 
```

当您尝试通过其 id 引用任何控件（Button、TextView、TabHost）时，请始终记住。您必须始终在调用 setContentView 后执行此操作。

# iphone - 如何获取相册中图像的图像文件名和标签？

> ID：10974503
> 
> 赞同：5
> 
> 时间：2012-06-11T04:28:01.373
> 
> 标签：iphone, ios, alassetslibrary

有没有办法获取相册中图片的图片文件名和标签？

我在用`ALAssetsLibrary`，还在挠。。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T04:49:51.817

您可以将对象复制`ALAssetLibrary`到数组中（或者在本地数据库中更好）。制作`ALAsset`要显示的对象并给它们标记（取决于数组索引）。

或者，如果您仍希望继续使用图像名称。您可以从`UIImagePickerControllerReferenceURL`. 尝试使用 substring 函数来获取名称（提示：主要是在 之前`&ext`，也可以获取文件的扩展名。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T10:25:29.303

```
ALAssetRepresentation *AssetRepObj = [AssetObj defaultRepresentation];
NSString *FileName = [AssetRepObj filename]; 
```

# php - Codeigniter 特定的 URL 重写

> ID：10974509
> 
> 赞同：0
> 
> 时间：2012-06-11T04:29:52.403
> 
> 标签：php, .htaccess, codeigniter, url-rewriting

在我的一个 CI 应用程序中，我有一个名为 movies 的控制器，我在其中显示电影的详细信息，它的 URL 看起来像

```
http://localhost/movies/index/12/Movie-Name 
```

这里 12 是用于从 db 和电影名称中获取值的电影 ID，用于 SEO URL。

我想将此 URL 重写为

```
http://localhost/12-Movie-Name 
```

[我已经使用http://codeigniter.com/wiki/mod_rewrite](http://codeigniter.com/wiki/mod_rewrite)从我的应用程序中删除了 index.php

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:41:39.110

也许试试

```
RewriteRule    ^/([0-9]+)\-([^/]+?)/?$  /movies/index/$1/$2 
```

尽管它可能会导致 Codeigniter 应用程序的其他部分出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T03:15:09.837

或者您可以将其添加到 Codeigniter 路由器

```
$router['/(:any)'] = 'movies/index/12/$1'; 
```

但是您的电影 ID 需要设置为带有标题的字符串。

# regex - 使用 Vi 编辑 unix 在两个字符之间插入字符的方法

> ID：10974519
> 
> 赞同：1
> 
> 时间：2012-06-11T04:30:42.950
> 
> 标签：regex, vi, editing

想象两个字符`n`和`1`，我需要在它们之间插入一个新字符。我们只需要在光标之前输入命令（以 结尾`Esc`），例如`i`—insert。此命令使 vi 处于输入模式，直到您按下`Esc`。

现在假设有两个字符的范围：

*   `n`和`1`
*   `n`和`2`
*   `n`和`3`
*   `n`和`4`
*   `n`和`5`
*   `n`和`6`
*   `n`和`8`
*   `n`和`9`
*   ...很快。

例如“gin `Bulk`1”（添加`Bulk`在`n`和之间`1`）

现在我需要在这些之间插入一个 UNIQUE 字符。因此，与其手动逐一转到每一行，按下`i`，然后插入，我可以用 vi 中的简单命令来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:25:53.833

我不确定我是否 100% 理解，但请尝试使用正则表达式替换：

```
:%s/n\([0-9]\)/nBulk\1/g 
```

这将替换 n 的所有实例，后跟一个数字，nBulk 后跟相同的数字。我注意到你在你的问题中说 UNIQUE，所以如果你的意思是每次插入的单词都是不同的（所以`n1`-> `nBulk1`，`n2`->`nCat2`例如），那么你需要更清楚地解释你的问题，比如有一些替换中的某种模式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:38:27.737

尝试这个：

```
:g/n and 1/s//n and x 1/g 
```

如果你不明白这一点，那就贴几行实际的前后数据。

# python - 巨大的输入 - for 循环比列表理解更快

> ID：10974520
> 
> 赞同：2
> 
> 时间：2012-06-11T04:30:49.770
> 
> 标签：python, list-comprehension

我正在尝试解决一个 codechef 初学者问题 -[巨大的输入测试](http://www.codechef.com/problems/INTEST)。我的代码

```
a,b = [ int(i) for i in raw_input().split()]
print [input()%b==0 for i in range(a)].count(True) 
```

超时。另一种使用基本 for 循环的[解决方案](http://www.codechef.com/viewsolution/989892)似乎运行良好。

我相信列表理解比基本的 for - 循环更快。那为什么前者慢呢？在这种情况下使用生成器也会减少使用的内存并更快地执行计算，如果是这样我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T04:42:47.657

为什么你认为列表理解比基本`for`循环更快？（提示：它们都使用相同的底层指令实现。）

您的代码将以如下方式执行：

```
a, b = ...
temp = []
for i in range(a):
    temp.append(int(raw_input()) % b == 0)
print temp.count(True) 
```

如您所见，它在内存中创建了一个大列表，对其进行迭代以创建第二个列表，然后对第二个列表进行迭代以创建计数。永远不需要创建该列表。

```
a, b = ...
count = 0
for i in xrange(a):
    if int(raw_input()) % b == 0:
        count += 1
print count 
```

一些编译器能够优化 hylomorphisms 以删除中间列表，但我知道没有 Python 实现能够做到这一点。所以你被困在手动优化中。

**注意：**不要`input`在 Python 2.x 中使用，除非您知道自己在做什么。我已经更改了要使用的代码，`int(raw_input())`因为那是安全的，而这`input()`是危险的。

# c# - 具有动态列数的 WPF 网格

> ID：10974522
> 
> 赞同：2
> 
> 时间：2012-06-11T04:31:30.770
> 
> 标签：c#, wpf, .net-4.0, treeview

我对 WPF 很陌生，并且正在努力实现视觉效果 - 我想要一个二维对象网格，其中包含数据驱动的列数。我正在尝试使用具有零代码隐藏的 MVVM。我已经看过这方面的几个帖子，并提出了以下内容：

```
<UserControl x:Class="Demo.Views.SideBySideStackPanelView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:views="clr-namespace:Demo.Views"
             xmlns:viewModels="clr-namespace:Demo.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <DataTemplate x:Key="ColumnTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*" SharedSizeGroup="TreeView"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*" SharedSizeGroup="DetailView"/>
                </Grid.RowDefinitions>

                <DockPanel Grid.Row="0" LastChildFill="True">
                    <TextBlock Text="{Binding Name}" DockPanel.Dock="Left"/>
                    <Button Command="{Binding Close}" DockPanel.Dock="Right" HorizontalAlignment="Right">
                        <Image Width="10" Height="10" Source="/Demo;component/Images/Close.png" />
                    </Button>
                </DockPanel>

                <views:TreeView Grid.Row="1"/>

                <GridSplitter 
                    ResizeDirection="Rows" 
                    VerticalAlignment="Center"
                    HorizontalAlignment="Stretch"
                    Height="5"
                    Grid.Row="2"
                    Name="sideBySideSplitter"/>

                <views:TreeDetail Grid.Row="2"/>

            </Grid>
        </DataTemplate>
    </UserControl.Resources>

    <Grid d:DataContext="{d:DesignInstance viewModels:MainWindowViewModel}" Grid.IsSharedSizeScope="True">
        <ItemsControl ItemsSource="{Binding PluginItem}" ItemTemplate="{StaticResource ColumnTemplate}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </Grid>
</UserControl> 
```

TreeView 视图是一个基本的绑定 TreeView，而 TreeDetail 视图是一个简单的绑定 Grid。

该控件确实会根据需要或多或少地呈现我的内容，但是当我与列上部的树视图交互时，控件会垂直扩展，而不是在树中显示滚动条。GridSplitter 根本不起作用；事实上，它似乎呈现在细节对象的中间。

我在 TabControl.ContentTemplate 中有一个类似的 DataTemplate，它可以按需要工作。移动 GridSplitter 会导致滚动条在必要时显示在任一侧，打开 TreeView 项会导致滚动条显示在该控件中。

我所追求的是类似 Excel 的演示文稿，其中用户可以使用水平和垂直“拆分器”控制单元格的大小，并且单元格内的用户对象根据需要在单元格内滚动。我现在可以忍受固定大小的列。

我将不胜感激提供的任何帮助。谢谢。

# php - 获取与另一行不冲突的mysql行

> ID：10974525
> 
> 赞同：1
> 
> 时间：2012-06-11T04:31:48.530
> 
> 标签：php, mysql

我有两个通过 id 链接在一起的表，一个是“submit_moderate”，一个是“submit_post”

“submit_moderate”表如下所示

```
id     moderated_by     post
1      James            60
2      Alice            32
3      Tim              18
4      Michael          60 
```

我使用一个简单的查询根据“submit_moderate”表从“submit_post”表中获取数据。

```
$get_posts = mysql_query("SELECT * FROM submit_moderate WHERE moderated_by!='$user'"); 
```

`$user`是登录的人。

现在我的问题是当我运行这个查询时，使用用户“Michael”它会检索这个

```
1   James   60
2   Alice   32
3   Tim     18 
```

现在从技术上讲这是正确的，但是我不想检索第一行，因为 60 与迈克尔以及詹姆斯相关联。基本上我不想检索那个值'60'。

我知道为什么会这样，但是我不知道该怎么做。我很感激我能得到的任何提示或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T04:36:32.827

```
SELECT DISTINCT post
  FROM submit_moderate
 WHERE post NOT IN (SELECT post
                      FROM submit_moderate
                     WHERE moderated_by = 'Michael') 
```

PS：不确定，但在某些情况下，可能值得将嵌套查询的选择部分更改为`SELECT DISTINCT post`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T04:48:14.077

假设 $user = 'Michael';

如果你真的不想要第一行用户，就像你说的那样，詹姆斯与帖子中的迈克尔相匹配，那就去吧

$post = mysql_query_first("SELECT post FROM submit_moderate WHERE modified_by='$user'");

$get_posts = mysql_query("SELECT * FROM submit_moderate WHERE modified_by!='$user' and post!='$post');

或者

$get_posts = mysql_query("SELECT * FROM submit_moderate WHERE post NOT IN (SELECT post FROM submit_moderate WHERE modeded_by = 'Michael') and modified_by != 'Michael' ");

# java - 使用斯坦福类型解析器从文本文件中提取名词短语

> ID：10974532
> 
> 赞同：13
> 
> 时间：2012-06-11T04:33:22.670
> 
> 标签：java, text, nlp, stanford-nlp, opennlp

我有一个文本，我想从中提取名词短语。我可以很容易地为我拥有的文本获取类型化的解析器，但想知道如何提取文本中的名词短语？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T04:26:19.017

您可以使用以下代码从树中提取名词短语。它假设您已经解析了存储在**parse**中的句子（即 parse 是 LexicalizedParser 类应用方法的输出）

```
public static List<Tree> GetNounPhrases()
{

    List<Tree> phraseList=new ArrayList<Tree>();
    for (Tree subtree: parse)
    {

      if(subtree.label().value().equals("NP"))
      {

        phraseList.add(subtree);
        System.out.println(subtree);

      }
    }

      return phraseList;

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-02T10:32:00.650

也试试这个[链接](http://nlp.stanford.edu/software/tagger.shtml)。我不确定 stanford pos tagger 和 corenlp 中可用的 tagger 是否相同，但我发现这个链接更有用。

在 PoS 标记之后，您将不得不检测这样的模式 **（形容词 | 名词）*（名词介词）？（形容词 | 名词）* 名词**

试试这个[链接](https://files.ifi.uzh.ch/cl/hess/classes/ecl1/termerCIE.html)，了解有关名词短语检测的一些详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:55:53.230

您可以使用 Stanford Core NLP 进行 POS 标记。[您可以在http://nlp.stanford.edu/software/corenlp.shtml#Usage](http://nlp.stanford.edu/software/corenlp.shtml#Usage)找到一个示例代码，这可能是一个很好的实验起点。您需要将 tokenize、split 和 pos 作为属性。这将输出带有相应标签的标记列表。

整个标签列表可以在[http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html 查看](http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html)。所有的名词标签都以 NN 开头。执行此检查将为您提供所需的令牌。

# php - 如何保留带引号的字符串？

> ID：10974537
> 
> 赞同：0
> 
> 时间：2012-06-11T04:34:49.770
> 
> 标签：php

如果用户插入此数据**16" HOUSEHOLD STAND FAN AA070021A**，则输出应与此**16" HOUSEHOLD STAND FAN AA070021A 相同** ，但我只得到此输出 16\ HOUSEHOLD STAND FAN AA070021A，引号变为“\”。

前 ：

16\ 家用立式风扇 AA070021A

后 ：

16" 家用立式风扇 AA070021A

```
add_to_quote.php?product_name=16" HOUSEHOLD STAND FAN AA070021A

 <?php
  $product_name_1 = $_GET['product_name'];
  $product_name_2  = str_replace('"', "", $product_name_1);
  $product_name = preg_replace(array('/\s{2,}/', '/[\t\n]/'), ' ', $product_name_2);
  echo $product_name;
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:51:35.500

添加[`urlencode()`](http://php.net/urlencode)到您的链接：

```
<a href="add_to_quote.php?product_name=<?php echo urlencode($product_name) ?>">Add To Quote</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T04:58:29.210

我对您的代码有不止一条评论：

1-清理您的输入。代替：

```
$product_name_1 = $_GET['product_name']; 
```

采用：

```
$product_name_1 = mysql_real_escape_string(stripslashes($_GET['product_name'])); 
```

至于报价，我使用的一种方法，也是最简单的一种方法是使用`base64_encode()`方法。

这是一个示例（取自您的代码，但变量的处理方式不同）：

> add_to_quote.php?product_name=16" 家用支架风扇 AA070021A

```
 <?php
  $product_name_1 = $product_name_1 = htmlentities($_GET['product_name']);
  $product_name_2  = base64_encode($product_name_1);
  echo $product_name_2 . "<br />";
  $product_name_3 = base64_decode($product_name_2);
  echo $product_name_3;
  ?> 
```

`base64_encode()`在这种情况下`base64_decode()`是很棒的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T04:48:17.650

改变：

```
$product_name = preg_replace(array('/\s{2,}/', '/[\t\n]/'), ' ', $product_name_2); 
```

到：

```
$product_name = preg_replace(array('/\s{2,}/', '/[\t\n]/'), ' ', $product_name_1); 
```

为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T17:45:35.107

```
$product_name_1 = htmlentities($row["product_name"]);
$product_name_2  = str_replace('"', "", $product_name_1);
$product_name = preg_replace(array('/\s{2,}/', '/[\t\n]/'), ' ', $product_name_2); 
```

这个解决方案对我有用。

# html - 文档转换和查看，最前沿的解决方案是什么？

> ID：10974541
> 
> 赞同：3
> 
> 时间：2012-06-11T04:35:21.907
> 
> 标签：html, pdf, converter, docx, doc

目标：构建一个 Web 应用程序，用户可以：

1.  上传文件（doc、docx、pdf、其他办公格式a+）
2.  在浏览器中查看该文档，最好是 html
3.  下载文档（doc、pdf、其他开放格式a+）

当前解决方案：

*   Rackspace 上的 Ruby on Rails 应用程序
*   用户可以上传 doc 和 pdf 文件 (AWS)
*   文件可以按照上传时的格式下载
*   缩略图生成（[doc, pdf] -> pdf -> png）是通过 AbiWord 完成的。某些 doc 文件不能很好地转换。
*   可以在嵌入式 Google 文档查看器 (https://docs.google.com/viewer) 中查看文档。某些 doc 文件无法显示。灵活性小。

潜在的改进：

*   [通过pdf.js](https://addons.mozilla.org/en-US/firefox/addon/pdfjs/)以 pdf 格式查看文档
*   [通过Crocodoc](https://crocodoc.com/)在 html（+注解）中查看

我很高兴听到其他用户的体验，并将在此列表中添加好的建议。

# asp.net - WF 4.0 无法在暂存/生产环境中恢复工作流程

> ID：10974544
> 
> 赞同：0
> 
> 时间：2012-06-11T04:36:25.043
> 
> 标签：asp.net, workflow-foundation-4, production-environment

我使用 WF4.0 开发了各种注册工作流程。每个工作流程都有不同的书签。我正在将注册 wf 用于 asp.net 应用程序。

我在本地测试了 asp.net 应用程序，它工作正常（启动 WF，持久化到 db 并恢复书签）。当我尝试在登台服务器上对其进行测试时，一切都变得一团糟。我无法再恢复 wfs 并且收到一条错误消息：

> System.Runtime.DurableInstancing.InstancePersistenceCommandException 未被用户代码处理 Message=名为 {urn:schemas-microsoft-com:System.Activities.Persistence/command}LoadWorkflow 的 InstancePersistenceCommand 的执行被错误中断。Source=System.Runtime.DurableInstancing StackTrace：在 System.Runtime.AsyncResult.End[TAsyncResult]（IAsyncResult 结果）在 System.Runtime.DurableInstancing.InstancePersistenceContext.OuterExecute（InstanceHandle initialInstanceHandle，InstancePersistenceCommand 命令，事务事务，TimeSpan 超时）在系统。 System.Activities.WorkflowApplication.PersistenceManager 中的 Runtime.DurableInstancing.InstanceStore.Execute（InstanceHandle 句柄，InstancePersistenceCommand 命令，TimeSpan 超时）。
> InnerException：System.Data.SqlClient.SqlException 消息 = 表“KeysTable”（在 FROM 子句中指定）上的索引“NCIX_KeysTable_SurrogateInstanceId”不存在。Source=.Net SqlClient Data Provider ErrorCode=-2146232060 Class=16 LineNumber=211 Number=308 Procedure=LoadInstance Server= State=1 StackTrace：在 System.Runtime.AsyncResult.End[TAsyncResult]（IAsyncResult 结果）在 System.Activities。 DurableInstancing.SqlWorkflowInstanceStoreAsyncResult.SqlCommandAsyncResultCallback（IAsyncResult 结果）

我知道这很冗长。但是一个多星期以来，我一直在用头撞墙。我进行了搜索，我所知道的只是在 ms dtc 上工作。我在登台服务器上启用了它，我在登台服务器上安装了应用程序服务器，但我仍然遇到同样的错误。如果有人能帮助解决这个问题，我将不胜感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:04:32.663

谁创建了在登台服务器上使用的持久性存储？使用什么架构来创建它？寻找本地和生产中使用的脚本之间的差异。

# android - Android，是否有任何参考可以查看什么是 Android 默认图标和图像？

> ID：10974548
> 
> 赞同：3
> 
> 时间：2012-06-11T04:37:31.727
> 
> 标签：android, image, icons

当我想设计 UI 并且我需要知道什么是预定义图标时。我搜索了包括[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)在内的网络，但我没有找到关于此的完整存储库。

我找到了[http://www.darshancomputing.com/android/1.5-drawables.html](http://www.darshancomputing.com/android/1.5-drawables.html)但它的信息太旧了。

是否有任何来源可以收集所有预定义的图标和图像？

非常感谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T04:46:14.260

如果您转到您的 Android 文件夹（包含 android-sdk、工具等），您可以看到它们。

`android-sdk/platforms/[CHOOSE ANDROID VERSION]/data/res/`你所有的图标都在那里。

**版本信息：**

*   `android-7``platforms`例如，在文件夹中是 Android 2.1，`android-3`而是 1.5（只是让你知道）

另外，请查看[此](https://stackoverflow.com/questions/2687027/standard-android-menu-icons-for-example-refresh)以获取更多信息。

# php - 如何创建类似 youtube 的视频预览？

> ID：10974551
> 
> 赞同：0
> 
> 时间：2012-06-11T04:38:08.313
> 
> 标签：php, ffmpeg

![在此处输入图像描述](../Images/4c7f4384c296dc8af0f33e78e5f74eff.png)如何创建类似 youtube 的视频预览？那是在youtube中，当我们将鼠标悬停在进度条上时，它正在显示视频的预览？如何使用 ffmpeg 或 mencoder 进行这种预览，或者有没有其他方法可以做到这一点？看看这张图片。请到这里进行实时预览。

[http://www.youtube.com/watch?v=yto4_QFoLdA&feature=watch-now-button&wide=1](http://www.youtube.com/watch?v=yto4_QFoLdA&feature=watch-now-button&wide=1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T04:55:27.107

您可以使用[`ffmpeg`](http://ffmpeg-php.sourceforge.net/)扩展程序。下面是我编写的一些古老代码，用于从视频中选择六个缩略图。

值得注意的部分是：

```
$frame = $vid->getFrame(); // pull a frame from the video
$gd = $frame->toGDImage(); // turn the frame into a GD image
imagejpeg($gd, "filename.jpg", 70); // save jpeg of the frame using 70% quality 
```

* * *

```
$vid = new ffmpeg_movie ( $fileName );
$frameRate = $vid->getFrameRate ();
$gapSize = max(10,$vid->getDuration()-10) * $frameRate / 6;
$n = 0; $curFrame = 5 * $frameRate;
while ( $n != 6 ) {
    $f = $vid->getFrame ( $curFrame );
    if ((1==$curFrame && false!==$f) || false !== ($f = $vid->getNextKeyFrame ())) {
        $thumbnails [$n] = array (
            'path' => "muveethumb-$muveeId-$n.jpg", 
            'time' => ceil ( ($vid->getFrameNumber () - 1) * 1000 / $frameRate ) 
        );
        $gd = $f->toGDImage ();
        imagejpeg ( $gd, $targetFolder.$thumbnails [$n] ['path'], 70 );
        ++ $n;
        $curFrame += $gapSize;
    } elseif ($n > 0) {
        while ( $n != 6 ) {
            $thumbnails [] = $thumbnails [$n - 1];
            ++ $n;
        }
    } else {
        if ($curFrame!=1) {
            // attempt to get first frame as a last resort
            $curFrame = 1;
        } else {
            // unless we already tried that
            throw new Exception ( "Could not create thumbnails" );
        }
    }
} 
```

# c# - 在聊天室中检测垃圾邮件

> ID：10974560
> 
> 赞同：6
> 
> 时间：2012-06-11T04:39:21.387
> 
> 标签：c#, .net, spam-prevention

假设有人开始用随机字符向聊天发送垃圾邮件。如果字符串只是随机字符还是合法地说话，我将如何在**C#中确定？**

1.  我删除了一些我不想让他们说的话。
2.  我已经从聊天中删除了链接/电子邮件。
3.  我已经阻止他们发送消息太快。
4.  我已经阻止他们连续多次说同样的话。

4 号是问题开始的地方。好吧，问题实际上始于我试图过滤聊天，但这是另一个讨论。他们现在了解到它只检查它是否是同一件事，现在垃圾邮件随机字符。

*这是针对我只能控制服务器代码的游戏。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T05:37:12.777

无论如何，在你的努力几乎没有回报与编码努力之前，你只能走这么远。可能更好的是堆栈溢出或魔兽世界的工作方式，用户有更多的控制权。在 WOW 中，玩家可以在聊天框中点击某人的名字，然后简单地*报告为 spam(mer)*。

不难说，如果有一定比例的人可以看到该消息并报告它，那么该人很可能是在发送垃圾邮件。然后，您可以自动决定或标记它以供审查，或者您想要处理它。由于您的问题是检测垃圾邮件，如果用户要看到它（他们是）为什么不让他们帮助缓解问题。

我认为对用户诚实并说，我们有问题，我们需要你的帮助，并且让用户更容易帮助显示出成熟度。

# blackberry - 如何获取在 BlackBerry 中发送 SMS 的应用程序进程 ID

> ID：10974562
> 
> 赞同：1
> 
> 时间：2012-06-11T04:39:39.527
> 
> 标签：blackberry

我正在寻找获取发送 SMS 的应用程序的进程 ID 的方法。我可以通过 OutboundMessageListener 获取发送消息的内容，但我不知道如何获取进程 ID。
这是我的尝试：

```
 MessageConnection _mc = (MessageConnection) Connector.open("sms://:0");
 _mc.setMessageListener(new OutboundSMSListener());

 private static final class OutboundSMSListener implements OutboundMessageListener
 {
    public void notifyIncomingMessage(MessageConnection messageconnection)
    {

      System.out.println("Incoming message received ");
    }

    public void notifyOutgoingMessage(Message message)
    {

      System.out.println("------------------------\n\n\n\n\n");
      System.out.println("Message send: " + message);
    }
 } 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:45:53.933

发送 SMS 的应用程序是否是 BlackBerry 设备的本机应用程序，它是否驻留在前台？

要获取前台应用程序的进程 ID，您可以使用以下代码：

```
private int getForegroungProcessID() {
        return ApplicationManager.getApplicationManager().getForegroundProcessId();
    }

private String getAppNameByProcessId(int id) {
        String result = null;

        ApplicationManager appManager = ApplicationManager.getApplicationManager();
        ApplicationDescriptor appDes[] = appManager.getVisibleApplications();

        for (int i = 0; i < appDes.length; i++) {
            if (appManager.getProcessId(appDes[i]) == id) {
                result = appDes[i].getModuleName();
                   //// here check the app name...is it a messaging app ///
                break;
            }
        }
        return result;
    } 
```

# android - 如何管理 Android Market 中的多语言列表？

> ID：10974563
> 
> 赞同：1
> 
> 时间：2012-06-11T04:39:39.630
> 
> 标签：android, google-play

我在 Android Market 上有一个应用程序，并且有多种语言的翻译。然而，在市场上，它仅以英文列出（即描述、新增功能、标题均为英文）。

市场确实可以选择以多种语言列出应用程序，但我想知道这是如何工作的。我是否需要每次手动更新每种语言的“新增内容”文本，或者是否有一些 API 允许一次上传修改后的文本？

我试图避免每次发布应用程序版本时都必须手动上传 N 种语言的更新文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T16:51:05.427

简而言之，你不走运。您需要用每种语言重写所有文本。

# c++ - Codechef Q - 为什么我收到“错误答案”错误

> ID：10974565
> 
> 赞同：1
> 
> 时间：2012-06-11T04:39:57.313
> 
> 标签：c++, algorithm

**问题**- 来自利沃夫动物园的小象非常喜欢幸运数字。大家都知道幸运数字是正整数，其十进制表示只包含幸运数字4和7。例如数字47、744、4是幸运数字，而5、17、467则不是。

令 F4(X) 为 X 的十进制表示的位数 4，F7(X) 为 X 的十进制表示的位数 7。例如，F4(456) = 1, F4(444) = 3, F7(1) = 0, F7(747) = 2。小象想知道最大的乘积 F4(X) ∙ F7(X)，其中 L ≤ X ≤ R。换句话说，他想知道最大值{F4(X) ∙ F7(X) : L ≤ X ≤ R}。

**1 <= L <= R <= 10 ^(18)**

示例：1) 对于范围，**1 100**答案将是 1 {47,74}

2) 4199 6000 答案将是 4 {4747, 4477}

我觉得我的代码是正确的，但是在提交它时得到了错误的答案。谁能帮我找出到底出了什么问题？

我的算法不会错（它非常简单）。我已经仔细检查了实现（它处理了所有可能的情况）。很难相信某些输入会出错。

这是 C++ 代码：

```
#include <cstdio>
#include <cstring>
using namespace std;
char buf1[20],buf2[20];
int *L, *R, *ans, len, ansn;
bool flagL, flagR;

inline int count(int n)
{
    int a=0,c=0;
    for(;a<len;a++) if(ans[a] == n) c++;
    return c;
}
inline int max(int a, int b) { return a>b ? a:b; }
inline int min(int a, int b) { return a<b ? a:b; }

inline void f(int i, int n)
{
    int a=0,n4=0,n7=0,t;
    for(;a<=i;a++) if(ans[a] == 4) n4++; else if(ans[a] == 7) n7++;
    while(n)
    {
        if(n4 == n7)
        {
            n4 += n/2;
            n7 += (n-n/2);
            break;
        }
        else if(n4 > n7)
        {
            t = min(n,n4-n7);
            n -= t;
            n7 += t;
        }
        else if(n7 > n4)
        {
            t = min(n,n7-n4);
            n -= t;
            n4 += t;
        }
    }
    ansn = max(ansn,n4*n7);
}

void solve(int i, bool flagL, bool flagR)
{
    while(i<len)
    {
        if(flagL && !flagR)
        {
            if(4 > L[i])
            {
                f(i-1,len-i);
                return;
            }
                    if(4 == L[i])
            {
                ans[i] = 4;
                solve(i+1, 1, 0);
                ans[i] = 7;
                f(i,len-i-1);
                return;
            }
            if(7 > L[i])
            {
                ans[i] = 7;
                f(i,len-i-1);
                return;
            }
            if(7 == L[i])
            {
                ans[i] = 8;
                f(i,len-i-1);
                ans[i] = 7;
                i++;
                continue;
            }
            // else
                ans[i] = 9;
                if(ans[i] > L[i])
                {
                    f(i,len-i-1);
                    return;
                }
                else
                {
                    i++;
                    continue;
                }
        }
        if(!flagL && flagR)
        {
            if(7 < R[i])
            {
                f(i-1,len-i);
                return;
            }
            if(7 == R[i])
            {
                ans[i] = 4;
                f(i,len-i-1);
                ans[i] = 7;
                i++;
                continue;
            }
            if(4 < R[i])
            {
                ans[i] = 4;
                f(i,len-i-1);
                return;
            }
            if(4 == R[i])
            {
                ans[i] = 3;
                f(i,len-i-1);
                ans[i] = 4;
                i++;
                continue;
            }
            // else
                ans[i] = 0;
                if(ans[i] < R[i])
                {
                    f(i,len-i-1);
                    return;
                }
                else
                {
                    i++;
                    continue;
                }
        }
        if(flagL && flagR)
        {
            if(R[i] - L[i] == 1)
            {
                ans[i] = L[i];
                solve(i+1,1,0);
                ans[i]++;
                solve(i+1,0,1);
                return;
            }
            bool four = 4 > L[i] && 4 < R[i];
            bool sev = 7 > L[i] && 7 < R[i];
            if (four && sev)
            {
                f(i-1,len-i);
                return;
            }
            else if (four && !sev)
            {
                ans[i] = 4;
                f(i,len-i-1);
            }
            else if (!four && sev)
            {
                ans[i] = 7;
                f(i,len-i-1);
            }
            if (L[i] == 4 || L[i] == 7 || R[i] == 4 || R[i] == 7)
            {
                if(L[i] == R[i]) { ans[i] = L[i]; i++; continue; }

                if(L[i] == 4 && R[i] == 7)
                {
                    ans[i] = 4;
                    solve(i+1,1,0);
                    ans[i] = 7;
                    solve(i+1,0,1);
                    ans[i] = 5;
                    f(i,len-i-1);
                    return;
                }
                if(R[i] - L[i] >= 2)
                {
                    ans[i] = L[i]+1;
                    f(i,len-i-1);

                    if(L[i] == 4 || L[i] == 7)
                    {
                        ans[i] = L[i];
                        solve(i+1,1,0);
                    }
                    if(R[i] == 4 || R[i] == 7)
                    {
                        ans[i] = R[i];
                        solve(i+1,0,1);
                    }
                    return;
                }
            }
            else
            {
                if (R[i] - L[i] >= 2)
                {
                    ans[i] = L[i]+1;
                    f(i,len-i-1);
                    return;
                }
                ans[i] = L[i];
            }
        }
        i++;
    } // end of while
    ansn = max(ansn, count(4)*count(7));
}

int main()
{
    int a,t; scanf("%d\n",&t);
    while(t--) // test cases
    {
        scanf("%s %s",&buf1,&buf2);
        len = strlen(buf2);
        L = new int[len];
        R = new int[len];
        ans = new int[len];
        for(a=0;a<len;a++) R[a] = buf2[a]-48;
        for(a=0;a<len-strlen(buf1);a++) L[a] = 0;
        int b=a;
        for(;a<len;a++) L[a] = buf1[a-b]-48;
        flagL = flagR = 1; ansn = 0;
        solve(0,1,1);
        printf("%d\n",ansn);
    }
    return 0;
} 
```

**算法：**

首先，将 L,R 的数字放入长度 = no 的数组 L[],R[] 中。R 中的数字。并初始化一个数组 ans[] 以跟踪答案整数（F4(ans)*F7(ans) 最大的整数）。

在左侧将 L 填充 0，使其长度等于 R。（所以 1,100 变为 001,100）这是在 main() 本身中完成的，然后调用solve()

真正的逻辑：运行一个循环，for i in range(0,len(R)) 对于每个 i，比较 L[i] 和 R[i]

变量**flagL**和**flagR**告诉你是否需要分别检查 L 和 R。

假设 L[], R[] 最初是：238 967 首先我们需要从第 0 个索引开始检查它们（因此 solve(0,1,1) 或 solve(0,true,true) ）。

现在 4 和 7 都落在**L** [0] 和 R[0] 之间。因此，{4,7} 的任何排列都可以放在 3 位数字中，而 ans[] 不会超出范围**[L,R]**。所以答案是2。

如果范围是：238 和 545

只有 4 会落在2 和 5**之间**，所以我们将 4 放在 ans[0] 中，并且 {4,7} 的任何排列都可以放在其余位置。所以答案又是2。

如果范围是：238 和 410

4 和 7 都不在 L[0] 和 R[0] 之间。但请注意，R[0] 为 4。

所以我们现在有 2 个选择，4 和 L[0]+1（这就是递归的用武之地）

为什么 L[0]+1 ？因为如果我们将 L[0]+1 放在 ans[0] 中，ans[0] 将落在 L[0] 和 R[0] 之间（对于这个 R[0] - L[0] >= 2）并且无论我们在剩余的数字中输入什么，ans[] 都不会超出范围。但是我们还必须检查 ans[0] 是否为 4。在最后一个示例中，它不会有帮助，但如果 R​​ >= 477，它就会有帮助。

所以答案是 1。（如果 R >= 477，则为 2）

让我们讨论另一个例子：

范围：4500 5700

因为 R[0] 和 L[0] 仅相差 1，我们必须检查两者，一次是 ans[i] = L[i]，然后是 ans[i] = R[i]（或 ans[i ]++)

现在，如果我们检查 ans[i] = 4，我们将不必再比较 ans[i] 和 R[i]，因为 ans[0] < R[0]，因此ans**将**始终 < **R。**所以我们像这样递归调用solve()：solve(i+1, true, false)

下一次，当 ans[0] = R[0] 时，我们就不必将 ans 与 L 进行比较（因为 ans > L，我们在剩下的 2 个地方放什么）。然后我们像这样调用solve()：solve(i+1, false, true)。

您会了解它是如何工作的，而且，如果您查看我的代码，则不会遗漏任何可能的测试用例。我不知道我为什么要获得 WA。

* * *

PS：安德鲁指出了错误。条件顺序错误。if 块`4 == L[i]`应该在 if 块之前`7 > L[i]`。现在代码可以正常工作了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T05:29:25.290

```
 if(7 > L[i]) // 7 > 4 ?
        {
            ans[i] = 7;
            f(i,len-i-1);
            return;
        }
        if(4 == L[i])  // how is this ever reachable?
        {
            ans[i] = 4;
            solve(i+1, 1, 0);
            ans[i] = 7;
            f(i,len-i-1);
            return;
        } 
```

我想你的意思是：

```
-            if(7 > L[i])
+            if(7 < L[i]) 
```

# javascript - 使用简单 JavaScript 继承定义的文档方法

> ID：10974568
> 
> 赞同：2
> 
> 时间：2012-06-11T04:40:39.980
> 
> 标签：javascript, netbeans, code-completion, jsdoc

我正在使用[John Resig 的 Simple JavaScript Inhertance](http://ejohn.org/blog/simple-javascript-inheritance/)定义类，并使用 JSDoc[`@lends`](http://code.google.com/p/jsdoc-toolkit/wiki/TagLends)和[`@constructs`](http://code.google.com/p/jsdoc-toolkit/wiki/TagConstructs)注释对其进行记录，但 NetBeans 不提供代码完成功能。这适用于我使用[命名空间](https://github.com/jweir/namespace)定义的模块，因为我直接引用它们。这是一个简单类的示例：

```
MyClass = Class.extend(
    /** @lends MyClass.prototype */
    {
        /** @constructs */
        init: function () {
            console.log('init');
        },

        foo: function () {
            console.log('foo');
        }
    }
);

var c = new MyClass();
c.  <-- ctrl-space only shows built-in methods like hasOwnProperty() and toString() 
```

有谁知道记录这些类的方法，以便在 NetBeans 中提供代码完成功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T22:58:39.920

NetBeans 仍然不支持`@lends`、`@constructs`或`@memborOf`类似标记。它们设置为 7.4 和 8.0，但我不相信它们会很快实施，因为它们是从 7.0 左右报告的。通过首先将包含方法的（以前的）匿名对象分配给类，可以使用两种[解决方法](https://bugzilla-attachments-224729.netbeans.org/bugzilla/attachment.cgi?id=130093)中的第二种。`Class.extend()`

**原型**

```
/** @class */
var Canine;
Canine = function() {};
Canine.prototype = props;

/** @type Canine */ var canine = new Canine(); 
```

**匿名对象**

```
/** @class */
var Feline = {
    purr: function() { console.log('meow'); },
    fall: function() { console.log('landed on feet'); }
};
Feline = create(Feline);

/** @type Feline */ var feline = new Feline(); 
```

注意：即使没有`@type`NetBeans 7.4 补丁 1 中的注释，这也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:31:46.297

最新版本（在撰写本文时）是[NetBeans 7.3 Beta 2](http://netbeans.org/community/releases/73/)。它支持 JavaScript 自动完成和调试。它也可以在 Chrome 中工作，并提供 NetBeans 和 Chrome 之间的往返更新。您应该看看这是否有助于您的 JavaScript 开发工作。

# android - 独立移动两个图像android

> ID：10974571
> 
> 赞同：0
> 
> 时间：2012-06-11T04:41:37.517
> 
> 标签：android, android-emulator, touch, android-imageview, android-sdcard

我有两个图像视图，我在其中使用 setImageBitmap 添加图像，并将 setOnTouchListener 应用于它们。但这里的问题是，第一次添加第一个 img 时，它通过触摸移动，但是当我添加第二个 img 时，第二个 img 移动，但之后我无法通过触摸移动第一个 img。对不起英语和提前感谢。这是我的代码：-

```
 working_bitmap = BitmapFactory.decodeFile(file_location+"cropped_image.jpg");  

    outBitmap=Bitmap.createBitmap(
    working_bitmap.getWidth(),
    working_bitmap.getHeight(),Bitmap.Config.ARGB_8888);    
    Canvas canvas1 = new Canvas(outBitmap);
    canvas1.drawBitmap(working_bitmap, new Matrix(), null);
    if(downloaded_shirt_image != null)
    {
        int width = downloaded_shirt_image.getWidth();
    int height = downloaded_shirt_image.getHeight();
    int halfWidth = width/3;
    int halfHeight = height/3;
    //Half Scaled
    Bitmap bmHalf = Bitmap.createScaledBitmap(downloaded_shirt_image,
            halfWidth, halfHeight, false);
    proimg =(ImageView)findViewById(R.id.pro_img);
    proimg.setDrawingCacheEnabled(true);
    proimg.setImageBitmap(bmHalf);
    proimg.setVisibility(View.VISIBLE);
    proimg.setOnTouchListener(new View.OnTouchListener()
    {
    public boolean onTouch(View v, MotionEvent event) {
    ImageView view = (ImageView) v;
    int rotation = 25;
    // Dump touch event to log
    dumpEvent(event);
    // Handle touch events here...
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());
        Log.d(TAG, "mode=DRAG");
        mode = DRAG;
        proimg.invalidate();
        break;
      case MotionEvent.ACTION_MOVE:
    if (mode == DRAG) {
    // ...
                                                                                           matrix.set(savedMatrix);                                                   matrix.postTranslate(event.getX() - start.x,
    event.getY() - start.y);
     }
     else if (mode == ZOOM) {
     float newDist = spacing(event);
     Log.d(TAG, "newDist=" + newDist);
     if (newDist > 10f) {
     matrix.set(savedMatrix);
     float scale = newDist / oldDist;
     matrix.postScale(scale, scale, mid.x, mid.y);
     }
     }
     proimg.invalidate();
     break;
     }
     view.setImageMatrix(matrix);
     return true; // indicate event was handled
     }
     });
     canvas1.drawBitmap(downloaded_shirt_image, 50, 192, null);
     }

     if(downloaded_pant_image != null)
     {
      int width = downloaded_pant_image.getWidth();
      int height = downloaded_pant_image.getHeight();
      int halfWidth = width/3;
      int halfHeight = height/3;
      //Half Scaled
      Bitmap bmHalf = Bitmap.createScaledBitmap(downloaded_pant_image,
                      halfWidth, halfHeight, false);
      pantimg =(ImageView)findViewById(R.id.pro_img_down);
      pantimg.setDrawingCacheEnabled(true);
      pantimg.setImageBitmap(bmHalf);
      pantimg.setVisibility(View.VISIBLE);
      pantimg.setOnTouchListener(new View.OnTouchListener()
      {
       public boolean onTouch(View v, MotionEvent event) {
       ImageView view = (ImageView) v;
       int rotation = 25;
       // Dump touch event to log
       dumpEvent(event);
      // Handle touch events here...
      switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
      savedMatrix.set(matrix);
      start.set(event.getX(), event.getY());
      Log.d(TAG, "mode=DRAG");
      mode = DRAG;
      pantimg.invalidate();
      break;
     case MotionEvent.ACTION_MOVE:
      if (mode == DRAG) {
      // ...

     matrix.set(savedMatrix);                                              matrix.postTranslate(event.getX() - start.x,
     event.getY() - start.y);
     }
    else if (mode == ZOOM) {
    float newDist = spacing(event);
    Log.d(TAG, "newDist=" + newDist);
    if (newDist > 10f) {
    matrix.set(savedMatrix);
    float scale = newDist / oldDist;
    matrix.postScale(scale, scale, mid.x, mid.y);
    }
    }
    pantimg.invalidate();
    break;
    }
    view.setImageMatrix(matrix);
    return true; // indicate event was handled
    }
   }                            
   );
   canvas1.drawBitmap(downloaded_pant_image, 110, 565, null);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:14:01.060

请尝试下面的代码并使用 Imageview 而不是 Textview。

```
windowwidth = getWindowManager().getDefaultDisplay().getWidth();
windowheight = getWindowManager().getDefaultDisplay().getHeight();

tv1 = (TextView)findViewById(R.id.text_view1);
tv1.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams1 = (RelativeLayout.LayoutParams) tv1.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams1.leftMargin = x_cord - 25;
                layoutParams1.topMargin = y_cord - 75;
                tv1.setLayoutParams(layoutParams1);
                break;
            default:
                break;
        }
        return true;
    }
});

tv2 = (TextView)findViewById(R.id.text_view2);
tv2.setTextColor(Color.MAGENTA);
tv2.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams2 = (RelativeLayout.LayoutParams) tv2.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams2.leftMargin = x_cord - 25;
                layoutParams2.topMargin = y_cord - 75;
                tv2.setLayoutParams(layoutParams2);
                break;
            default:
                break;
        }
        return true;
    }
}); 
```

# java - 类加载器层次结构

> ID：10974573
> 
> 赞同：1
> 
> 时间：2012-06-11T04:41:59.703
> 
> 标签：java, classloader

为什么 Extensions CL 在 Bootstrap 之后，但在 System CL 之前？“CLASSPATH”和其他系统模块中的类对于应用程序来说不是比扩展更重要吗？或者在所有这些机制的背后还有另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:46:17.453

当您说扩展库时，它意味着对默认 JVM 提供的生态系统的扩展。因此，任何使用 JVM 的应用程序都可以在编译/运行时使用这些扩展库的功能。与往常一样，特定于应用程序的库仅特定于应用程序，其他应用程序对此一无所知。因此，出于明显的原因，为其他应用程序可能使用的库提供加载偏好变得更加重要

# html - 让侧边栏正常运行？

> ID：10974577
> 
> 赞同：0
> 
> 时间：2012-06-11T04:42:37.100
> 
> 标签：html, css, stylesheet

好的，我在一个有侧边栏和主要内容部分的网站上工作。该网站是使用 DIV 制作的，但我遇到的问题是侧边栏不会与内容 div 垂直拉伸。例如，侧边栏有一些链接，而内容 div 有很多我希望侧边栏伸展的东西。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:58:37.680

您可以`display:table-cell`为此使用属性并`float`从中删除。像这样写：

```
#sidebar,#content_box{
    display:table-cell;
} 
```

检查这个[http://jsfiddle.net/MQy4Y/2/](http://jsfiddle.net/MQy4Y/2/)

它可以工作到 IE8 及更高版本。

# android - 如何通过蓝牙找到已发送物品的详细信息？

> ID：10974580
> 
> 赞同：4
> 
> 时间：2012-06-11T04:43:41.197
> 
> 标签：android, bluetooth

我正在实现一个与蓝牙相关的应用程序。

在我的要求中，我想通过蓝牙获取发送和接收数据的详细信息。

我通过蓝牙从文件夹中获取接收数据的详细信息`/sdcard/bluetooth`。很好，但问题是，我想通过蓝牙获取发送数据的详细信息。

有谁知道解决方案？

# python - 有没有办法在 Python 中使用 numpy 对十进制数列表进行加权平均？

> ID：10974583
> 
> 赞同：2
> 
> 时间：2012-06-11T04:44:03.633
> 
> 标签：python

我正在尝试使用 numpy.average 对十进制数列表进行加权平均；但是，我收到了 TypeError。例如，考虑以下内容。

```
>>> from decimal import *
>>> import numpy
>>> s = '1.00000001'
>>> l = []
>>> l.append(Decimal(s))
>>> l.append(Decimal(s))
>>> numpy.average(l)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.6/site-packages/numpy/lib/function_base.py", line 612
, in average
    avg = a.mean(axis)
TypeError: unsupported operand type(s) for /: 'Decimal' and 'float' 
```

如何在不转换为浮点数并使用 numpy 丢失值的精度的情况下获取十进制数列表的加权平均值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:47:32.707

呃，经典的方法...

```
>>> sum((decimal.Decimal(1), decimal.Decimal(2))) / 2
Decimal('1.5') 
```

# php - Magento：Adminhtml 产品表单中的价格字段

> ID：10974589
> 
> 赞同：1
> 
> 时间：2012-06-11T04:44:58.903
> 
> 标签：php, magento, adminhtml

我想在我的产品编辑页面下的管理表单中添加一个价格字段，但我无法在我的字段集中添加“价格”类型。

```
$fieldset->addField($attribute->getAttributeCode(), 'price', array(
             'label'     => Mage::helper('mymod')->__($attribute->getFrontendLabel()),
             'class'     => $attribute->getIsRequired()?'required-entry':'',
             'required'  => $attribute->getIsRequired()?true:false,
             'name'      => $attribute->getAttributeCode(),
             'note'     => Mage::helper('mymod')->__($attribute->getNote()),
        )); 
```

它给出了以下错误。

```
Fatal error: Class 'Varien_Data_Form_Element_Price' not found in .. /lib/Varien/Data/Form/Abstract.php on line 144 
```

PS。我正在挖掘代码

```
Mage_Adminhtml_Block_Widget_Form 
```

在哪里起作用

```
_setFieldset 
```

它可以使用价格作为字段类型。

**编辑@ 11/6：**

从第一行开始深入研究 _setFieldset()

```
$this->_addElementTypes($fieldset); 
```

将调用一个可实现的函数

```
function _getAdditionalElementTypes() 
```

添加不在给定列表中的其他数据类型（例如价格，画廊..）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T08:44:13.127

我认为您只需要这样做，`text`因为这些是可用的选项：

```
Button
Checkbox
Checkboxes
Collection
Column
Date
Editor
Fieldset
File
Gallery
Hidden
Image
Imagefile
Label
Link
Multiline
Multiselect
Note
Obscure
Password
Radio
Radios
Reset
Select
Submit
Text
Textarea
Time 
```

# c++ - Visual Studio 2010 找不到

> ID：10974590
> 
> 赞同：0
> 
> 时间：2012-06-11T04:45:02.110
> 
> 标签：c++, visual-studio-2010, iostream

我刚刚安装了 Visual Studio 2010，我感觉在安装它的时候出了点问题。我有以下代码返回一个错误，指出它找不到 <iostream> 文件。我查看了包含文件夹（C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include），只看到了 4 个文件（omp.h、pgobootrun.h、srv.h、wmiatlprov.h）。我不确定这是否正常，但我 99% 确定不是。

这是我的代码：

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello, World!";
    return 0;
} 
```

返回以下错误：

```
1>------ Build started: Project: Test2, Configuration: Debug Win32 ------
1>Build started 06/11/2012 0:31:05.
1>PrepareForBuild:
1>  Creating directory "c:\users\jake\documents\visual studio 2010\Projects\Test2\Debug\".
1>InitializeBuildStatus:
1>  Creating "Debug\Test2.unsuccessfulbuild" because "AlwaysCreate" was specified.
1>ClCompile:
1>  Test2.cpp
1>c:\users\jake\documents\visual studio 2010\projects\test2\test2\test2.cpp(2): fatal error C1083: Cannot open include file: 'iostream': No such file or directory
1>  stdafx.cpp
1>c:\users\jake\documents\visual studio 2010\projects\test2\test2\stdafx.h(10): fatal error C1083: Cannot open include file: 'stdio.h': No such file or directory
1>  Generating Code...
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.65
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

无论我进行多少 Google 搜索，我都无法弄清楚如何解决该问题。任何帮助表示赞赏。如果需要更多详细信息，我可以提供解决此问题所需的任何内容，谢谢。

**编辑 1：**我没有使用预编译的头文件。我从 MSDN 网站上的一个页面上下载了它，因为它与帐户绑定，所以我无法在此处发布，但我绝对没有用完空间（我的硬盘驱动器上有大约 650 GB 的可用空间）。是的，我尝试重新安装（至少 4 次）。

**编辑 2：**与我的帐户相关联的页面来自 Microsoft 网站。我所做的一步一步是下载.iso，将其解压缩到带有7zip的文件夹，运行autorun.exe文件，完成安装（那里不可能有任何错误，我所做的只是检查“隐私政策”框等等），打开 Visual Studio，输入我在下面的代码，然后运行它。我认为这不需要任何解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:56:54.360

我相信您应该尝试重新安装或只是在 Visual Studio 中执行修复。

# java - 如何在 ServletContextPropertyPlaceholderConfigurer 中使用从数据库加载的属性覆盖从文件加载的属性？

> ID：10974591
> 
> 赞同：0
> 
> 时间：2012-06-11T04:45:06.797
> 
> 标签：java, spring

我的 Web 应用程序正在使用 spring，并且使用 ServletContextPropertyPlaceholderConfigurer 加载了一些 bean 属性。并且属性在文件系统中。但是，我想从数据库中加载一些属性。如果有重复，数据库中的属性将覆盖文件系统中的属性。

我在 ServletContextPropertyPlaceholderConfigurer.setProperties(Properties properties) 中找到了这个方法。但是 Spring 文档说文件中的属性将覆盖它。我想反过来。我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:01:36.703

`localOverride`您可以通过将属性设置为 来更改行为`true`。从[文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/support/PropertiesLoaderSupport.html#setLocalOverride%28boolean%29)：

> 设置本地属性是否覆盖文件中的属性。默认值为“false”：文件中的属性覆盖本地默认值。可以切换为“true”以让本地属性覆盖文件中的默认值。

# ruby-on-rails - 使用 accept_nested_attributes_for 在表单中显示固定数量的子项

> ID：10974592
> 
> 赞同：0
> 
> 时间：2012-06-11T04:45:36.843
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在表单中，我需要在 has_many 集合中显示固定数量的模型，无论它们是否存在。例如：

假设有一个游戏，可以输入 10 个分数。但并非所有都需要输入 - 您可以输入从 0 到 10 的任何位置。但该表单仍始终显示 10 个分数输入。

这就是我实现它的方式：

```
class Game < ActiveRecord
  has_many :scores
  accepts_nested_attributes_for :scores

  alias :scores, :original_scores

  def scores
    return original_scores if caller[0] =~ /.*fields_for.*/
    scores_to_display = original_scores # could be anywhere from 0 to 10
    # fill out the array up to 10
    return scores_to_diplay
  end
end 
```

这很丑陋，因为我本质上覆盖了应该由 has_many 返回的 ActiveRecord::Relation 对象 - 这就是为什么如果调用者不是表单助手，我会返回 original_scores ，否则这会破坏删除和其他关联方法。我不确定如何更清洁。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:51:09.040

你可以像这样从一个空数组开始：

```
scores = Array.new(11,0)  # [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

然后用可用的分数填充它。

这在概念上类似于在 SQL 中使用“左外连接”或在原始分数上进行查找，然后`include`是也使用左外连接的当前分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:10:05.077

首先，让游戏拒绝任何空白的分数

```
class Game < ActiveRecord
  has_many :scores
  accepts_nested_attributes_for :scores, :reject_if => :all_blank
end 
```

然后，在您的控制器中，构建 10 个分数以显示在表单上

```
class GamesController < ApplicationController

  def new
    @game = Game.new
    10.times { @game.scores.build }
  end
end 
```

# .htaccess - 如何重定向除 GoogleBot 之外的 URL？

> ID：10974596
> 
> 赞同：1
> 
> 时间：2012-06-11T04:45:51.987
> 
> 标签：.htaccess

我的博客上有一篇排名很高的帖子，我只想将其重定向到我的 ClickBank 会员链接，而不会丢失我的排名。所以我需要用`.htaccess`文件来做这个。首先它必须检查`USER AGENT`，然后它必须检查该用户代理字符串上是否有任何“GOOGLE”字样。如果没有，它应该将用户重定向到我的附属链接。到目前为止，我尝试了以下代码但没有成功。

```
RewriteCond %{HTTP_USER_AGENT} ^((?!google).)*$
RewriteRule http://myblog.com/post/ http://myafflink.com [R=301,L] 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T04:56:35.740

它不是类似于最终导致您在谷歌中禁止的门口方法吗？向用户和搜索引擎显示不同的页面不是一个好习惯。

# iphone - 应用发布后是否可以更改目标应用商店？

> ID：10974606
> 
> 赞同：2
> 
> 时间：2012-06-11T04:48:06.827
> 
> 标签：iphone, app-store

最近我已将我的应用程序发布到美国 AppStore。现在我计划在全球范围内发布。所以我需要更改 AppStore 并在全球范围内发布我的应用程序。但我不知道在发布我的应用程序后如何更改 AppStore。我搜索了一个答案，但我的错误是我没有得到任何帮助。完成发布过程后是否可以编辑目标 AppStore？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T04:57:36.603

您可以使用 iTunes Connect 更改您的应用程序可用的区域。

请按照以下简单步骤操作：

*   登录[https://itunesconnect.apple.com](https://itunesconnect.apple.com)
*   点击“管理您的应用程序”
*   选择您的应用
*   单击“权利和定价”（在您选择特定版本之前）
*   在您更改区域的定价层选项下方

我希望这会有所帮助。

# java - 键的顺序很重要的HashMap

> ID：10974610
> 
> 赞同：3
> 
> 时间：2012-06-11T04:48:42.973
> 
> 标签：java, map, hashmap

我使用 HashMaps 来存储对集，但我还必须确保从第一个 json 序列化（来自 Php 客户端）到 Java HashMap 集浏览，键的**顺序**是相同的

```
//import com.google.gson.Gson;
//import com.google.common.base.Joiner;  
String s = "{\"durant\":\"kevin\", \"james\":\"lebron\",\"harden\":\"james\",\"westbrook\":\"russel\"}";
System.out.println(s);
Gson gson = new Gson();
Type typeOfMap = new TypeToken<Map<String, String>>() {}.getType();
Map<String, String> m = gson.fromJson(s, typeOfMap);
List<String> entries = new ArrayList< String>(m.keySet());
//Collections.sort(entries);
System.out.println(entries);
System.out.println(m.entrySet());
System.out.println( Joiner.on(",").withKeyValueSeparator("").join(m) ); 
```

它似乎适用于少量值，无需再次排序（这里按字母顺序排列），但这是一种可靠的方法吗？json字符串和地图浏览之间的顺序可以改变吗？

**编辑**：可能 LinkedHashMap 更能保留订单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T04:53:42.403

[`LinkedHashMap`](http://docs.oracle.com/javase/10/docs/api/java/util/LinkedHashMap.html)维护插入顺序。除此之外，还有各种[`SortedMap`](http://docs.oracle.com/javase/10/docs/api/java/util/SortedMap.html)实现，例如[`TreeMap`](http://docs.oracle.com/javase/10/docs/api/java/util/TreeMap.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:54:56.243

您可以在 SO 上查看这个问题： [Java 如何在 HashMap 或 HashTable 中对项目进行排序？](https://stackoverflow.com/questions/2817695/how-does-java-order-items-in-a-hashmap-or-a-hashtable?rq=1)

可以给你更清晰的图...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T02:53:02.573

从此图表中，您可以看到`Map`与 Java 11 捆绑的各种实现之间的不同行为。请注意“迭代顺序”列。

[![Java 11 中的地图实现表，比较它们的特性](../Images/3c38a32387fb9aa3e4521ad25b377212.png)](https://i.stack.imgur.com/ESHbz.png)

如果您希望地图保持基于键值排序的顺序，请使用实现`SortedMap`或其后继者的实现`NavigableMap`。这意味着要么`TreeMap`，或者如果您需要并发，`ConcurrentSkipListMap`.

如果要保持原始插入顺序，请使用`LinkedHashMap`.

如果您将枚举对象作为键，请使用`EnumMap`来维护键以定义枚举。

与 Java 11 捆绑的所有其他`Map`实现都没有对键的顺序做出任何承诺，因此请避免使用它们。*您也可以考虑使用Google Guava*库`Map`中的第三方实现。

# lua - Lua 创建多个闭包实例

> ID：10974614
> 
> 赞同：0
> 
> 时间：2012-06-11T04:49:32.053
> 
> 标签：lua, closures, lua-api, lua-5.2

我在一个文件中有一些 lua 代码。我想创建此代码的多个闭包实例，每个实例都有不同的 _ENV 上值。我可以使用[luaL_loadfile](http://www.lua.org/manual/5.2/manual.html#luaL_loadfile)加载文件并设置第一个上值，使用不同的表 N 次，以创建 N 个实例。但这不会加载并编译文件 N 次吗？

我想要做的lua等价物如下，除了没有加载文件

```
func_list = {}

for i = 1, 10 do
    local new_env = {hello=i, print=print}
    func_list[i] = loadfile("Code.lua", "t", new_env)
end

for i = 1, 10 do
    func_list[i]()
end

------ Code.lua ------
print(hello*hello) 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T04:55:36.747

使用 IO 库将文件加载到字符串中，然后调用`loadstring`它。

或者，只需获取一个块，然后在执行之前更改它的环境

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:40:42.957

每当你在 Lua 中加载一个字符串/文件时，你得到的回报是一个调用函数来实际运行文件。对您[`load`](http://www.lua.org/manual/5.2/manual.html#pdf-load)有用的只是一些额外的处理来设置`_ENV`.

然而，没有什么能阻止你设置`_ENV`自己。你可以这样做：

```
-- Code.lua --
_ENV = ...
print(hello * hello) 
```

然后，您可以只加载/编译文件一次，并使用多个实例：

```
local code = loadfile("Code.lua")

env_list = {}
for i = 1, 10 do
    local new_env = {hello=i, print=print}
    code(new_env)
    env_list[i] = new_env
end 
```

如果您不希望用户写入`_ENV = ...`每个文件，则可以将文件加载到字符串中，自己添加该行并用于`load`编译源代码。但这不适用于已编译的文件。

# facebook - Facebook FLogin 按钮不起作用

> ID：10974618
> 
> 赞同：-1
> 
> 时间：2012-06-11T04:50:56.203
> 
> 标签：facebook, facebook-login

我曾经有一个 FLogin 按钮，用于让用户使用 Facebook 登录。最近，我更新了我的网站以符合 HTML 5 标准并进行了一些其他更改。

此后 FLogin 无法正常工作。我还使用 Facebook 提供的最新代码更新了 FLogin 代码。登录过程仍然无法正常工作。

谁能与我分享 FLogin for HTML 5 的确切代码？

我的网站是

Loud Letters - www.loudletters.com 大声评论 - www.loudreview.com

FLogin 相关代码包含在最后。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:10:45.797

您正在尝试将 FB JS-SDK 的脚本元素附加到元素 #fb-root，但这还不存在，因为它仅在您的 HTML 代码中出现。（顺便说一句，你为什么要搞乱以这种方式异步加载 SDK 的代码，而不是像文档中显示的那样使用代码？）

在开发 javascript 时，您应该使用浏览器错误控制台。

# null - 猪拉丁放松等于== null？

> ID：10974621
> 
> 赞同：3
> 
> 时间：2012-06-11T04:51:19.557
> 
> 标签：null, apache-pig, latin, nvl

在只有 1 行的关系 X 中

```
X.A=null
X.B= "blahblah" 
```

现在我想做：

```
Y = FILTER X BY A != B ; 
```

我的意思是，由于 A 为空而 B 不是，因此条件应该为真。但实际结果是 Y 为空，并且条件评估为假。

这与 SQL 相同，其中任何涉及 null 的条件都是错误的。虽然 SQL 可以使用 NVL() 函数翻译 null ，但 PIG 似乎没有，有没有一种干净的方法来进行上述比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:10:45.440

这有点小技巧，但您可以进行比较并将结果存储在您的关系中，然后使用结果和原始比较进行过滤。

```
Y = foreach X generate *,
        (((A is null and B is not null) or (A is not null and B is null) ? 'y' : 'n') as oneNull;
Y = filter Y by (oneNull == 'y' or A != B);
Y = foreach Y generate A, B; 
```

使用这个，如果 X 是：

```
(,blahblah)
(blah,blah)
(,)
(blah,)
(abc,def) 
```

那么 Y 将是：

```
(,blahblah)
(blah,)
(abc,def) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T02:00:54.047

我安装了 Pig 0.12.1 版；它实际上对我来说可以直接写条件：

```
Y = filter X by (A is null and B is not null) or (A is not null and B is null) or A != B; 
```

请注意，对于 null/null 情况，表达式 A != B 的计算结果为 null，因此过滤器会排除元组，根据

[http://pig.apache.org/docs/r0.12.1/basic.html#nulls](http://pig.apache.org/docs/r0.12.1/basic.html#nulls)。

# c - 在c中实现包含预处理器

> ID：10974622
> 
> 赞同：1
> 
> 时间：2012-06-11T04:51:20.237
> 
> 标签：c, preprocessor

我想编写一个 C 程序来实现`include`预处理器的功能。

例子：

在 header.h 我有这个代码：

```
char *test (void); 
```

在program.c中：

```
int x;
#include "header.h"
int
main (void)
{
    puts (test ());
} 
```

输入是`program.c`。

输出必须是：

```
int x;
char *test (void);
int
main (void)
{
    puts (test ());
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:53:23.367

你可以运行 gcc -E "你的源文件"，然后过滤包含 "#" 的行，左边是你想要的，宏被它的真实形式替换。

例如：

```
gcc -E hello.c|sed '/# .,$/d' > a.c 
```

ac 是你想要的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:59:13.823

您需要逐行读取输入文件。检查该行是否以#include 开头（带有可选的前导空格）。如果没有，请打印您已阅读的行。如果是这样，请打开指定的文件，并在其上运行相同的算法（以处理辅助#includes）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:50:03.690

当使用 gcc
**gcc -E -P program.c**

或
**cpp -P program.c**

当使用 Visual c
**cl /EP program.c**

# php - 使用 ajax 发布请求和 jquery 管理字符串

> ID：10974623
> 
> 赞同：-2
> 
> 时间：2012-06-11T04:51:24.813
> 
> 标签：php, jquery, mysql, ajax

我正在为网站进行基于复选框的过滤操作。这有多个复选框，用于过滤不同参数的记录列表。与[此处](http://www.proptiger.com/property-in-pune-real-estate.php)所做的类似。现在我已经取得了一些成功，并且我已经过滤了记录基于第一组复选框。这是它的js函数。

**HTML：**

```
<input type="checkbox" id="checkbox1" class="checkbox1" value="<?php echo $suburb['suburb_name']?>" name="Suburb_check[]" onClick="changeResults();" onChange="" > 
```

**Javascript：**

```
function changeResults(){
    var data = { 'venue[]' : []};
        $("input[name=Suburb_check[]]:checked").each(function() {                           var chck1 = $(this).val();
                data['venue[]'].push($(this).val());
                dataString =data['venue[]'.toString()].toString();
        });

    $.ajax({
   type : 'POST',
   url : 'process.php',
   data : "dataString="+dataString,
   success : function(data){
                 $('#project_section').html(data); 
        }  
    }); 
} 
```

这样做是**过滤记录 + 加载第二组复选框**.1st set check box)=> **for Regions** and 2nd is => **for Localities** 我创建了一个数组来传递复选框值，然后将其转换为字符串( **.toString** ) 并传递给 .php 文件。

同样，我为第二组复选框创建了一个函数。 **HTML**

```
<input type="checkbox" onClick="changeLocality();" id="localityCheck" value="<?php echo $locality['locality_name'];?>" name="Locality_check[]"> 
```

**JS**

```
function changeLocality(){  
    var dataLocality = {'locality[]' : []};         
        $("input[name=Locality_check[]]:checked").each(function() {         
        var chcklocal = $(this).val();              
        dataLocality['locality[]'].push($(this).val());
            localityString =dataLocality['locality[]'.toString()].toString();

        });

 $.ajax({
 type : 'POST',
 url : 'processLocality.php',
 data : "localityString="+localityString,
 success : function(dataLocality){
          $('#project_section').html(dataLocality);        // replace the contents coming from php file      
        }  
    });
} 
```

将值传递给 php 文件，但是当我尝试使用**$_POST**获取它们时，我得到的字符串相互混合，即区域值进入位置字符串，反之亦然（**尝试使用具有相同结果的数组，**因此切换到字符串）。我无法解决这个问题。为什么会发生这种情况这是我将值发布到的 php 文件。processLocality.php

```
<?php session_start();
include_once("includes/classes/db_connect.php");
include_once("pagination/paginator.class.php");
$pages = new Paginator();

$regions = "'".$_POST['dataString']."'";
echo $regions;
$arr = explode(",",$regions);
$getFormatedSuburb = implode("','",$arr);

$locality = "'".$_POST['localityString']."'";
echo $locality;
$arrLocal = explode(",",$locality);
$getFormatedLocality = implode("','",$arrLocal);

//Here I get the strings mixed with each other!!
 ?> 
```

我在字符串中添加了一些表达式，以便以所需的格式将其传递给 SQL 查询的 IN 子句。现在我得到的字符串包含来自区域和地方的值。我想要分别，因为它们是**用于过滤记录的两个不同参数**

```
 Pune East,
        Pune West,        //1 and 2 are regions
         Aundh,
         Kalyaninagar     //3 and 4 are localities 
```

另外，我想知道我的方法是否正确。有更好的方法来实现吗？任何帮助表示赞赏。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:27:43.137

尝试更改您的选择器。而不是这个：

```
$("input[name=Suburb_check[]]:checked")
....
$("input[name=Locality_check[]]:checked") 
```

做这个：

```
$("input[name=Suburb_check]:checked")
....
$("input[name=Locality_check]:checked") 
```

此外，标记必须采用以下形式：

```
<input type="checkbox" name="Suburb_check"> 
```

每个复选框组具有相同的名称。名称不能包含“[]”

# c# - 在创建 vs 2010 设置时更改控制面板图标

> ID：10974626
> 
> 赞同：0
> 
> 时间：2012-06-11T04:51:41.457
> 
> 标签：c#, asp.net, visual-studio-2010, setup-project

我想在 vs 2010 中创建设置时更改控制面板图标。请帮我这样做。我无法创建这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T04:58:10.017

嗨，阿穆拉吉，

```
 1.) Go in the properties of setup (Select setup project then press F4). 
        2.)Select Addremoveprogramicons property.
        3.)Browse ico file there. 
```

希望对你有效。

# objective-c - distanceFilter 属性使用

> ID：10974629
> 
> 赞同：3
> 
> 时间：2012-06-11T04:51:59.680
> 
> 标签：objective-c, ios, cocoa, cllocationmanager

在`CLLocationManager`类文档中，我找到了这样的`distanceFilter`属性解释：

> 此属性仅与标准位置服务结合使用，在监视重大位置更改时不使用。

你能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:11:22.370

In `CLLocationManager`,`distanceFilter`用于在设备移动 x 米时通知更改。默认值是`kCLDistanceFilterNone:`报告所有移动。

从[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

> 在返回当前位置定位后，接收器仅在检测到用户位置发生重大变化时才生成更新事件。例如，当设备与不同的蜂窝塔相关联时，它可能会生成一个新事件。它不依赖于`distanceFilter`属性中的值来生成事件。
> 
> 通过调用 startUpdatingLocation 方法启动标准位置服务。此服务最适合需要对位置事件的传递进行更细粒度控制的应用程序。具体来说，它会考虑 desiredAccuracy 和 distanceFilter 属性中的值来确定何时传递新事件。导航应用程序或任何需要高精度位置数据或定期更新流的应用程序都需要标准位置服务的精度。但是，这些服务通常需要启用位置跟踪硬件更长的时间，这可能会导致更高的功耗。

这就是为什么`distanceFilter`仅与标准位置服务结合使用而不在监视重大位置变化时使用的原因，例如。`desiredAccuracy`或`heading`信息。

这是因为通常知道一个人已经移动了 x 米并不是很有用。然而，知道一个人在 y 方向上以 z 精度移动了 x 米是非常有价值的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:49:00.107

**标准位置更改：**使用常规 GPS 模块。电池密集型。如果`locationManager`您的类实例是`CLLocationManager`按如下方式启动服务

```
[locationManager startUpdatingLocation]; 
```

**重大位置变化：**每当无线电塔发生变化时。更适合电池。苹果并没有在官方文档中说这是关于无线电塔的变化，但显然这是苹果在新功能推出时所说的。

```
[locationManager startMonitoringSignificantLocationChanges]; 
```

如果您订阅重大位置更改，则该属性`distanceFilter`将被忽略。`CLLocationManager`

# azure - 在哪里可以找到 Windows Azure 预览网站的 IP 地址

> ID：10974637
> 
> 赞同：3
> 
> 时间：2012-06-11T04:54:18.010
> 
> 标签：azure, dns, ip-address, azure-web-app-service

对于使用新的[Windows Azure 预览门户](https://manage.windowsazure.com)的快速创建功能发布的网站，我如何获取 IP 地址来为该站点的 DNS 条目创建 A 记录？[帮助](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)说：“您可以从 Windows Azure 管理门户中发现此 IP 地址。” 但是我在任何地方都找不到所说的地址。我可以ping`mysite.azurewebsites.net`地址吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T05:52:25.783

当您在 Windows Azure 预览门户中创建一个 Windows Azure 网站（共享）时，该网站被创建为一个共享网站，它是 Windows Server Farm 上数百个其他网站的一部分。使用 Windows Azure 网站（共享），您不能为您的网站设置自定义域名。这就是您在预览门户中看不到该网站列出的 IP 地址的原因。

一旦您将 Windows Azure 网站更改为“保留”模式，网站将在其自己的虚拟机上运行（它不是免费的，在预览模式下您将被收取 1/3 的费用）然后您可以为您的网站设置 CNAME 设置。

最后，您上面建议的帮助链接与 web/worker 角色以及保留网站有关。

# mysql - 为什么准备好的语句会破坏mysql中的自然连接？

> ID：10974638
> 
> 赞同：2
> 
> 时间：2012-06-11T04:54:19.737
> 
> 标签：mysql, join

我有一个**自然的连接查询**，它工作得很好，直到我了解到准备好的语句更安全并且它破坏了我的查询。我做了一些研究并读到准备好的语句和自然连接不能很好地结合在一起。这是我的原始查询：

```
$query = "select * from table1 natural join table2 where table1.id='$id' "; 
```

我需要对查询进行连接，但需要在两个表（州和城市）中匹配 2 列。我怎样才能做到这一点并从两个表中选择所有列？这是我到目前为止但没有工作的：

```
$query = "select * from table1 join table2 on table1.state = table2.state and table1.city = table2.city where table1.id='$id'"; 
```

现在我只是试图让查询使用 JOIN ON 工作，然后我想用 table.id= 替换 table1.id='$id'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:35:46.243

而不是像你说的那样`table1.id = '$id'`使用。`table1.id = ?`

然后你运行`->execute()`：

```
$stmt = $db->prepare($query) or die($db->error);
$stmt->execute(array(123)); 
```

# java - 从另一个类的函数的返回中分配对象值？

> ID：10974639
> 
> 赞同：1
> 
> 时间：2012-06-11T04:54:32.940
> 
> 标签：java, function, interface, static

因此，在完成给我的最后一项任务后，我被指示获取该代码并将其从命令行参数更改为从文件中读取数据。一切都很好，除了我应该有一个函数接口的部分，该函数从文件中调用数据，然后做和以前一样的事情。

现在，我的驱动程序类中的对象数组应该被分配由 DAO 类获取的值。DAO 类基于接口。驱动程序类对我尖叫，我创建的对象必须从 DAO 类中的静态函数分配，但该方法不能是静态的......

这次我错过了什么？...

界面：

```
public interface ScanTextFile {

    public Object[] readTextData() throws FileNotFoundException;
} 
```

DAO类：

```
public class StudentDAO implements ScanTextFile {

    public Object[] readTextData() throws FileNotFoundException {

        Student[] studentRecord = new Student[3];

        String dataFileName = "data.txt";
        int numberOfRows = 0;

        File dataFile = new File(dataFileName);
        Scanner scan = new Scanner(dataFile);
        int i = 0;
        String delim = "\\|";

        // checks number of rows in data file, making sure there are 3 total
        for(i = 0; scan.hasNextLine(); i++){
            numberOfRows++;
        }
        if(numberOfRows < 3){
            System.err.format((numberOfRows) + " argument(s) - expected 3");
            System.exit(0);
        } else if(numberOfRows > 3){
            System.err.format((numberOfRows) + " arguments - expected 3");
            System.exit(0);
        }

        for(i = 0; i < numberOfRows; i++){
            if(scan.hasNextLine()){
                String temp = scan.nextLine();
                String[] tempData = new String[4];
                Student tempStudent = null;

                for(i = 0; i < tempData.length ; i++){
                    tempData = temp.split(delim);
                }
                System.out.println("DEBUG *** Finished extracting data, creating object...");
                System.out.println("DEBUG Student Data = [�" + temp + "]");

                GregorianCalendar date = new GregorianCalendar();
                try {
                    date = DateUtil.convertFromDMY(tempData[3]);
                } catch (ParseException e1) {
                    e1.printStackTrace();
                }

                tempStudent = new Student(tempData[0], tempData[1], tempData[2], date);
                studentRecord[i] = tempStudent;
            }
        }

        return studentRecord;
    }

} 
```

司机等级：

```
public class Lab3 { 

    public void main(String[] args) throws ParseException, FileNotFoundException{

        Student[] allData = new Student[3];
        allData = (Student[]) StudentDAO.readTextData();

        System.out.println("");
        System.out.println("DEBUG *** Student Objects created, displaying all Students...\n");
        for(Student s : allData){
            Print.print(s);
        }
    }
} 
```

**编辑** 感谢您指出该错误，谢谢大家，但现在我得到了

> 线程“main”中的异常 java.lang.NoSuchMethodError: main

那是因为StudentDAO没有main吗？

**另一个编辑**

@mprabhat 感谢您指出一个非常愚蠢的错误，仍然不知道我怎么没看到><

现在，当扫描仪尝试从文件中读取数据时，我遇到了一个问题。

1 - 说找不到数据文件，即使它在我的 src 文件夹中。

2 - 扫描仪线上也有错误，我不应该在文件上使用扫描仪吗？我应该使用... DataInputStream 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:58:40.547

您的方法`readTextData`不是静态的，但您通过使用类名像静态方法一样访问它`StudentDAO`

```
StudentDAO.readTextData(); 
```

而是创建一个对象`StudentDAO`，然后调用`readTextData`

```
Student[] allData = new Student[3];
StudentDAO studentDAO  = new StudentDAO();
allData = (Student[]) studentDAO.readTextData(); 
```

Lab3 中的问题是您的主要方法的签名不正确。

`public static void main(String[] args)`是正确的签名，您的签名丢失`static`，因此您得到`java.lang.NoSuchMethodError: main`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T04:59:41.967

在课堂 Lab3 中，创建 StudentDAO 的实例，然后阅读如下文本：

```
StudentDAO dao = new StudentDAO();
allData = (Student[]) dao.readTextData(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T04:59:54.543

你基本上有两件事：

1.  `readTextData()`不是静态的，因此您无法以与您相同的方式访问它。您将需要创建一个对象，然后调用该方法。

2.  您正在创建一个包含 3 个元素的数组，然后丢弃并填充一些新数据。

所以基本上你需要替换这个：

```
Student[] allData = new Student[3];
allData = (Student[]) StudentDAO.readTextData(); 
```

有了这个：

```
StudentDAO sDao = new StudentDAO();
Student[] students = (Student[])sDao.readTextData(); 
```

为了完整起见，如果您执行以下操作，您也应该摆脱错误，但我建议您坚持我上面刚刚列出的方法：

在您的接口类中，将 this: 替换`public Object[] readTextData() throws FileNotFoundException;`为 this: `public static Object[] readTextData() throws FileNotFoundException;`。这将使您的`readTextData`方法静态。替换 DAO (with `public static Object[] readTextData() throws FileNotFoundException;`) 类中的方法签名应该可以消除您面临的错误。

# algorithm - 是否可以从 SHA-1 加密消息中检索原始消息？

> ID：10974640
> 
> 赞同：-3
> 
> 时间：2012-06-11T04:54:45.560
> 
> 标签：algorithm, cryptography, sha1

是否可以从 SHA-1 加密消息中检索原始消息？如果我有一条 SHA -1 加密消息，我需要哪些参数才能从中获取原始消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T05:03:54.690

我已经回答了一个类似的问题：[Python SHA1 DECODE function](https://stackoverflow.com/questions/7640033/python-sha1-decode-function/7640052#7640052)

简而言之，不，这是不可能的。散列的重点是取一些长字符串并将其变成一个小字符串。散列是破坏性的，你会丢失数据，所以它是不可逆的。

此外，为了让事情更有趣，无限多的字符串具有相同的哈希¹。除非您了解有关输入的更多信息，否则不可能生成具有给定哈希的唯一字符串。

^(1：有大量的散列函数，有些*可能*具有“特殊”散列，仅在您向函数提供特定输入时才会生成。除了那些罕见的情况（如果它们甚至存在的话），每个其他输出哈希都有无限多的输入字符串。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T04:58:14.557

[http://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)

```
 it is infeasible to generate a message that has a given hash 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T05:08:14.520

散列不是加密。加密就像将拼图游戏的碎片洗牌。散列更像是将碎片放入搅拌机中，之后没有合理的方法可以恢复原始图片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T05:11:12.777

`SHA-1`哈希从任意大小的输入生成 160 位输出。由于可能的输入多于`2^160`可能的输出，因此必然会发生冲突，即。不同的输入具有相同的输出。

这意味着有可能（通过蛮力或通过利用算法中的弱点——我认为目前尚不知道）找到与给定哈希相对应的消息，但它可能不是原始消息。

即使固定输入的大小，如果大于 160 位，也会发生冲突，并且无法反转散列函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T05:02:40.950

如果您知道原始消息的长度（512 位的倍数），则只需测试该大小的 2^512 个输入。对每个应用 SHA1 操作，并比较结果。这假设没有加盐，以及相当大量的计算资源。

# iphone - ASIHTTP 请求和类

> ID：10974641
> 
> 赞同：2
> 
> 时间：2012-06-11T04:54:54.917
> 
> 标签：iphone

我是 iPhone 应用程序开发的新手，并且正在开发基于 Web 服务的应用程序。

我在这个应用程序中使用 NSXML 解析器并且一切正常，我能够从服务器获取数据。

但是我的朋友告诉我，我应该在这个项目中包含 ASIHTTP 类，这是强制性的，但我想知道，到目前为止我还没有使用任何 usch 类，但我仍然能够成功获取数据。

任何人都可以向我解释 ASIHTTP 类的目的是什么，如果我不使用它，那将是正确的方法吗？

我还需要在我的项目中进行延迟加载，所以如果没有 ASIHTTP 类，这可能吗？

请帮助我消除我的疑虑。

提前致谢。iPhone 开发者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:00:38.287

您可以从此处获取您正在寻找的任何信息，[ASIHTTPRequest - 如何使用](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

或者，您可以使用[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)

您可以使用`Asynchronous`request 来执行延迟加载这两条路线。

# c# - 读取 xls 文件后“找不到可安装的 ISAM”C# 异常

> ID：10974643
> 
> 赞同：0
> 
> 时间：2012-06-11T04:54:58.133
> 
> 标签：c#, .net, excel, isam

我们正在阅读 xls 文件，该文件会定期从外部链接更新。我们有一个循环，它在 200 毫秒的间隔后读取相同的文件。读取文件 1000 多次后，我们收到错误

> “Microsoft Jet 数据库引擎无法打开文件 ''。它已被其他用户以独占方式打开，或者您需要权限才能查看其数据。”

连接字符串如下：

> Provider=Microsoft.Jet.OLEDB.4.0;数据源=D:\FeedFiles\TESTING1.xls;Extended Properties="Excel 8.0;HDR=YES;IMEX=1;Importmixedtypes=text;typeguessrows=0;"

一段时间后，它开始给出“找不到可安装的 ISAM”。

代码如下：

```
String xlsConnString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;Importmixedtypes=text;typeguessrows=0;""", feedFiles.FullName);

OleDbDataAdapter dataAdapter = new OleDbDataAdapter(xlsQuery, xlsConnString);
while (true)
{
    try
    {
        //Exception handling if not able to read xls file.
        DataSet dataSet = new DataSet();
        dataAdapter.Fill(dataSet);
        String fileName = dirstr + "Temp-";
        System.IO.StreamWriter file = new System.IO.StreamWriter(fileName + ".tmp");

        file.WriteLine(dataSet.GetXml());
        file.Close();

        try
        {
            File.Replace(fileName + ".tmp", dirstr + "Temp-" + filecount.ToString() + ".xml", null);
        }
        catch (Exception ex)
        {
            try
            {
                File.Move(fileName + ".tmp", dirstr + "Temp-" + filecount.ToString() + ".xml");
            }
            catch
            {
                Thread.Sleep(xlsThreadSleep);
            }
        }

        filecount++;
        if (filecount > maxFileCnt)
        {
            filecount = 0;
        }
        dataSet.Clear();
        dataSet = null;

        Thread.Sleep(xlsThreadSleep);
    }
    catch (Exception ex)
    {
        txtlog.BeginInvoke(new DelegateForTxtLog(functionFortxtLog), "Exception occured > " + ex.Message);
        feedFileIndex++;

        if (feedFileIndex == feedFiles.Length)
        {
            feedFileIndex = 0;
        }
        dataAdapter.Dispose();
        dataAdapter = null;

        Thread.Sleep(xlsThreadSleep * 20);

        xlsConnString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;Importmixedtypes=text;typeguessrows=0;""", feedFiles[feedFileIndex].FullName);
        txtlog.BeginInvoke(new DelegateForTxtLog(functionFortxtLog), "Trying connecting with connection string > " + xlsConnString);

        dataAdapter = new OleDbDataAdapter(xlsQuery, xlsConnString);
        txtlog.BeginInvoke(new DelegateForTxtLog(functionFortxtLog), "Now reading file > " + feedFiles[feedFileIndex].FullName);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:00:26.977

连接字符串的格式不正确。尝试这个：

```
String xlsConnString = String.Format("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=
             {0};Extended Properties=\"Excel 8.0;HDR=YES;
             IMEX=1;Importmixedtypes=text;typeguessrows=0;\"", feedFiles.FullName); 
```

# php - 使用jquery将html附加到父标签之外

> ID：10974644
> 
> 赞同：2
> 
> 时间：2012-06-11T04:55:15.983
> 
> 标签：php, javascript, jquery, html

所以我有这个场景

```
<div id="editor" contenteditable="true">
    <div id="list">Hello</div>
</div> 
```

我想打电话

```
var html = $('<div id="replaced" contenteditable="false">Hello</div>');
$('#list').replaceWith(html); 
```

问题是我希望输出是这样的：

```
<div id="editor" contenteditable="true">
    <div id="replaced" contenteditable="false">Hello</div><br />
</div> 
```

我尝试了以下方法，但没有成功：（这是替换 tmp.mention 的 div）

```
$('#'+tmp.mention).replaceWith(this).parent().after('<br />'); 
```

我想这样做是因为替换 tmp.mention 的 div 在将 contenteditable 设置为 true 的 div 编辑器中将 contenteditable 设置为 false。如果没有
，用户将无法在 div 之后键入...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:57:11.250

试试这个：

```
$('#'+tmp.mention).replaceWith($(this).parent()).after('<br />'); 
```

我想你需要

```
var html = $('<div id="replaced" contenteditable=false>Hello</div>');
$('#list').replaceWith(html); 
```

[演示](http://jsfiddle.net/hSZqe/)

但如果你想整体`#editor`那么

```
var html = $('<div id="replaced" contenteditable=false>Hello</div>');
$('#list').parent().replaceWith(html); 
```

**[演示](http://jsfiddle.net/Us5pV/)**

### 根据编辑

如果你想要像这样的输出

```
<div id="editor" contenteditable="true">
    <div id="replaced" contenteditable="false">Hello</div><br />
</div 
```

然后尝试

```
var html = $('<div id="replaced" contenteditable=false>Hello</div>');
$('#list').replaceWith(html).after('</br>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:05:11.920

试试这个：

```
$('#list').replaceWith('<div id="replaced" contenteditable="false">Hello</div><br />') 
```

# maven-2 - org.apache.axiom.om.OMException：非根 MIME 部分的部分内容 ID 不能为空

> ID：10974648
> 
> 赞同：1
> 
> 时间：2012-06-11T04:56:19.197
> 
> 标签：maven-2, wso2, wso2esb

当我运行命令 mvn clean install >Wso2Log.txt 时，我正在尝试通过 Maven-2.2.1 构建 WSO2-4.4.1 它将运行 10-20 小时后，它会给出错误构建失败错误。

如果有人有一些宝贵的时间，请帮助我thanx。

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] There are test failures.
Please refer to /home/uddi/mpf/wso2greg-4.1.1-src/dependencies/axis2/1.6.1-wso2v1/modules/saaj/target/surefire-reports for the individual test results.
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 869 minutes 47 seconds
[INFO] Finished at: Fri Jun 08 18:03:03 IST 2012
[INFO] Final Memory: 407M/2727M
[INFO] ------------------------------------------------------------------------ 
My  Individual test result is given bellow 
<?xml version="1.0" encoding="UTF-8" ?>
<testsuite failures="0" time="7.535" errors="1" skipped="0" tests="7" name="org.apache.axis2.saaj.integration.IntegrationTest">
  <properties>
    <property name="java.vendor" value="Sun Microsystems Inc."/>
    <property name="javax.xml.soap.SOAPFactory" value="org.apache.axis2.saaj.SOAPFactoryImpl"/>
    <property name="env.LESSOPEN" value="|/usr/bin/lesspipe.sh %s"/>
    <property name="localRepository" value="/home/uddi/.m2/repository"/>
    <property name="env.ORACLE_HOME" value="/home/uddi/app/uddi/product/11.2.0/dbhome_1"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="sun.management.compiler" value="HotSpot Tiered Compilers"/>
    <property name="os.name" value="Linux"/>
    <property name="sun.boot.class.path" value="/home/uddi/mpf/jdk1.6.0_25/jre/lib/resources.jar:/home/uddi/mpf/jdk1.6.0_25/jre/lib/rt.jar:/home/uddi/mpf/jdk1.6.0_25/jre/lib/sunrsasign.jar:/home/uddi/mpf/jdk1.6.0_25/jre/lib/jsse.jar:/home/uddi/mpf/jdk1.6.0_25/jre/lib/jce.jar:/home/uddi/mpf/jdk1.6.0_25/jre/lib/charsets.jar:/home/uddi/mpf/jdk1.6.0_25/jre/lib/modules/jdk.boot.jar:/home/uddi/mpf/jdk1.6.0_25/jre/classes"/>
    <property name="env.PWD" value="/home/uddi/mpf/wso2greg-4.1.1-src"/>
    <property name="env.ORACLE_SID" value="orcl"/>
    <property name="env.LANG" value="en_US.UTF-8"/>
    <property name="java.vm.specification.vendor" value="Sun Microsystems Inc."/>
    <property name="java.runtime.version" value="1.6.0_25-b06"/>
    <property name="env.HISTSIZE" value="1000"/>
    <property name="user.name" value="uddi"/>
    <property name="env.USER" value="uddi"/>
    <property name="env.SHELL" value="/bin/bash"/>
    <property name="env.KDEDIR" value="/usr"/>
    <property name="env.QTLIB" value="/usr/lib64/qt-3.3/lib"/>
    <property name="env.SSH_TTY" value="/dev/pts/4"/>
    <property name="env.NLSPATH" value="/usr/dt/lib/nls/msg/%L/%N.cat"/>
    <property name="javax.xml.soap.MetaFactory" value="org.apache.axis2.saaj.SAAJMetaFactoryImpl"/>
    <property name="env.PATH" value="/home/uddi/mpf/jdk1.6.0_25/bin:.:/home/uddi/mpf/apache-ant-1.8.4/bin:/home/uddi/mpf/apache-maven-2.2.1/bin:/home/uddi/mpf/jdk1.6.0_25/bin:.:/usr/lib64/qt-3.3/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/uddi/bin"/>
    <property name="user.language" value="en"/>
    <property name="sun.boot.library.path" value="/home/uddi/mpf/jdk1.6.0_25/jre/lib/i386"/>
    <property name="classworlds.conf" value="/home/uddi/mpf/apache-maven-2.2.1/bin/m2.conf"/>
    <property name="env.SSH_CONNECTION" value="172.16.16.117 49123 172.16.16.18 22"/>
    <property name="java.version" value="1.6.0_25"/>
    <property name="env.SSH_CLIENT" value="172.16.16.117 49123 22"/>
    <property name="user.timezone" value="Asia/Calcutta"/>
    <property name="sun.arch.data.model" value="32"/>
    <property name="java.endorsed.dirs" value="/home/uddi/mpf/jdk1.6.0_25/jre/lib/endorsed"/>
    <property name="sun.cpu.isalist" value=""/>
    <property name="sun.jnu.encoding" value="UTF-8"/>
    <property name="file.encoding.pkg" value="sun.io"/>
    <property name="env.SHLVL" value="1"/>
    <property name="file.separator" value="/"/>
    <property name="env.HOSTNAME" value="ssdg3"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="env.QTDIR" value="/usr/lib64/qt-3.3"/>
    <property name="java.class.version" value="50.0"/>
    <property name="user.country" value="US"/>
    <property name="java.home" value="/home/uddi/mpf/jdk1.6.0_25/jre"/>
    <property name="java.vm.info" value="mixed mode"/>
    <property name="env.LOGNAME" value="uddi"/>
    <property name="os.version" value="2.6.18-194.el5"/>
    <property name="env.G_BROKEN_FILENAMES" value="1"/>
    <property name="path.separator" value=":"/>
    <property name="java.vm.version" value="20.0-b11"/>
    <property name="env.QTINC" value="/usr/lib64/qt-3.3/include"/>
    <property name="env.JAVA_HOME" value="/home/uddi/mpf/jdk1.6.0_25"/>
    <property name="java.awt.printerjob" value="sun.print.PSPrinterJob"/>
    <property name="env.TERM" value="xterm"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="user.home" value="/home/uddi"/>
    <property name="java.specification.vendor" value="Sun Microsystems Inc."/>
    <property name="env.M2_HOME" value="/home/uddi/mpf/apache-maven-2.2.1"/>
    <property name="java.library.path" value="/home/uddi/mpf/jdk1.6.0_25/jre/lib/i386/server:/home/uddi/mpf/jdk1.6.0_25/jre/lib/i386:/home/uddi/mpf/jdk1.6.0_25/jre/../lib/i386:/usr/java/packages/lib/i386:/lib:/usr/lib"/>
    <property name="java.vendor.url" value="http://java.sun.com/"/>
    <property name="java.vm.vendor" value="Sun Microsystems Inc."/>
    <property name="maven.home" value="/home/uddi/mpf/apache-maven-2.2.1"/>
    <property name="java.runtime.name" value="Java(TM) SE Runtime Environment"/>
    <property name="sun.java.command" value="org.codehaus.classworlds.Launcher &quot;clean&quot; &quot;install&quot;"/>
    <property name="java.class.path" value="/home/uddi/mpf/apache-maven-2.2.1/boot/classworlds-1.1.jar"/>
    <property name="env.CVS_RSH" value="ssh"/>
    <property name="env.XFILESEARCHPATH" value="/usr/dt/app-defaults/%L/Dt"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="java.vm.specification.version" value="1.0"/>
    <property name="sun.os.patch.level" value="unknown"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="com.sun.org.apache.xerces.internal.xni.parser.XMLParserConfiguration" value="com.sun.org.apache.xerces.internal.parsers.XIncludeParserConfiguration"/>
    <property name="java.awt.headless" value="true"/>
    <property name="env.HOME" value="/home/uddi"/>
    <property name="env.ANT_HOME" value="/home/uddi/mpf/apache-ant-1.8.4"/>
    <property name="surefire.test.class.path" value="/home/uddi/mpf/wso2greg-4.1.1-src/dependencies/axis2/1.6.1-wso2v1/modules/saaj/target/test-classes:/home/uddi/mpf/wso2greg-4.1.1-src/dependencies/axis2/1.6.1-wso2v1/modules/saaj/target/classes:/home/uddi/.m2/repository/org/apache/geronimo/specs/geronimo-saaj_1.3_spec/1.0.1/geronimo-saaj_1.3_spec-1.0.1.jar:/home/uddi/.m2/repository/org/apache/ws/commons/axiom/axiom-dom/1.2.11/axiom-dom-1.2.11.jar:/home/uddi/.m2/repository/org/apache/ws/commons/axiom/axiom-api/1.2.11/axiom-api-1.2.11.jar:/home/uddi/.m2/repository/org/apache/geronimo/specs/geronimo-activation_1.1_spec/1.0.2/geronimo-activation_1.1_spec-1.0.2.jar:/home/uddi/.m2/repository/org/apache/geronimo/specs/geronimo-javamail_1.4_spec/1.6/geronimo-javamail_1.4_spec-1.6.jar:/home/uddi/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar:/home/uddi/.m2/repository/jaxen/jaxen/1.1.1/jaxen-1.1.1.jar:/home/uddi/.m2/repository/org/apache/geronimo/specs/geronimo-stax-api_1.0_spec/1.0.1/geronimo-stax-api_1.0_spec-1.0.1.jar:/home/uddi/.m2/repository/org/codehaus/woodstox/wstx-asl/3.2.9/wstx-asl-3.2.9.jar:/home/uddi/mpf/wso2greg-4.1.1-src/dependencies/axis2/1.6.1-wso2v1/modules/adb/target/axis2-adb-1.6.1-wso2v1.jar:/home/uddi/mpf/wso2greg-4.1.1-src/dependencies/axis2/1.6.1-wso2v1/modules/kernel/target/axis2-kernel-1.6.1-wso2v1.jar:/home/uddi/.m2/repository/org/apache/ws/commons/axiom/axiom-impl/1.2.11/axiom-impl-1.2.11.jar:/home/uddi/.m2/repository/org/apache/geronimo/specs/geronimo-ws-metadata_2.0_spec/1.1.2/geronimo-ws-metadata_2.0_spec-1.1.2.jar:/home/uddi/.m2/repository/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1/geronimo-jta_1.1_spec-1.1.jar:/home/uddi/.m2/repository/javax/servlet/servlet-api/2.3/servlet-api-2.3.jar:/home/uddi/.m2/repository/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar:/home/uddi/.m2/repository/commons-codec/commons-codec/1.3/commons-codec-1.3.jar:/home/uddi/.m2/repository/commons-fileupload/commons-fileupload/1.2/commons-fileupload-1.2.jar:/home/uddi/.m2/repository/wsdl4j/wsdl4j/1.6.2/wsdl4j-1.6.2.jar:/home/uddi/.m2/repository/org/apache/ws/commons/schema/XmlSchema/1.4.7-wso2v1/XmlSchema-1.4.7-wso2v1.jar:/home/uddi/.m2/repository/org/apache/neethi/neethi/2.0.4/neethi-2.0.4.jar:/home/uddi/.m2/repository/org/apache/woden/woden-api/1.0M9/woden-api-1.0M9.jar:/home/uddi/.m2/repository/org/apache/woden/woden-impl-dom/1.0M9/woden-impl-dom-1.0M9.jar:/home/uddi/.m2/repository/org/apache/woden/woden-impl-commons/1.0M9/woden-impl-commons-1.0M9.jar:/home/uddi/.m2/repository/javax/ws/rs/jsr311-api/1.0/jsr311-api-1.0.jar:/home/uddi/.m2/repository/org/wso2/securevault/org.wso2.securevault/1.0.0/org.wso2.securevault-1.0.0.jar:/home/uddi/.m2/repository/log4j/log4j/1.2.15/log4j-1.2.15.jar:/home/uddi/.m2/repository/jline/jline/0.9.94/jline-0.9.94.jar:/home/uddi/.m2/repository/junit/junit/4.4/junit-4.4.jar:/home/uddi/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar:/home/uddi/.m2/repository/commons-io/commons-io/1.4/commons-io-1.4.jar:/home/uddi/.m2/repository/org/apache/axis2/axis2-transport-http/1.6.1-wso2v1/axis2-transport-http-1.6.1-wso2v1.jar:/home/uddi/.m2/repository/org/apache/httpcomponents/httpcore/4.0/httpcore-4.0.jar:/home/uddi/.m2/repository/org/apache/axis2/axis2-transport-local/1.6.1-wso2v1/axis2-transport-local-1.6.1-wso2v1.jar:/home/uddi/.m2/repository/xmlunit/xmlunit/1.3/xmlunit-1.3.jar:/home/uddi/.m2/repository/jetty/jetty/5.1.10/jetty-5.1.10.jar:/home/uddi/.m2/repository/com/sun/xml/messaging/saaj/saaj-impl/1.3.2/saaj-impl-1.3.2.jar:/home/uddi/.m2/repository/com/sun/xml/parsers/jaxp-ri/1.4.2/jaxp-ri-1.4.2.jar:/home/uddi/.m2/repository/javax/xml/parsers/jaxp-api/1.4.2/jaxp-api-1.4.2.jar:"/>
    <property name="java.io.tmpdir" value="/tmp"/>
    <property name="env.LD_LIBRARY_PATH" value="/home/uddi/mpf/jdk1.6.0_25/jre/lib/i386/server:/home/uddi/mpf/jdk1.6.0_25/jre/lib/i386:/home/uddi/mpf/jdk1.6.0_25/jre/../lib/i386"/>
    <property name="env.LS_COLORS" value="no=00:fi=00:di=00;34:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:*.cmd=00;32:*.exe=00;32:*.com=00;32:*.btm=00;32:*.bat=00;32:*.sh=00;32:*.csh=00;32:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.zip=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.bz=00;31:*.tz=00;31:*.rpm=00;31:*.cpio=00;31:*.jpg=00;35:*.gif=00;35:*.bmp=00;35:*.xbm=00;35:*.xpm=00;35:*.png=00;35:*.tif=00;35:"/>
    <property name="java.vendor.url.bug" value="http://java.sun.com/cgi-bin/bugreport.cgi"/>
    <property name="env.MAVEN_OPTS" value="-Xms256m -Xmx3072m"/>
    <property name="env.KDE_NO_IPV6" value="1"/>
    <property name="java.awt.graphicsenv" value="sun.awt.X11GraphicsEnvironment"/>
    <property name="os.arch" value="i386"/>
    <property name="java.ext.dirs" value="/home/uddi/mpf/jdk1.6.0_25/jre/lib/ext:/usr/java/packages/lib/ext"/>
    <property name="user.dir" value="/home/uddi/mpf/wso2greg-4.1.1-src/dependencies/axis2/1.6.1-wso2v1/modules/saaj"/>
    <property name="line.separator" value="
"/>
    <property name="env.INPUTRC" value="/etc/inputrc"/>
    <property name="java.vm.name" value="Java HotSpot(TM) Server VM"/>
    <property name="basedir" value="/home/uddi/mpf/wso2greg-4.1.1-src/dependencies/axis2/1.6.1-wso2v1/modules/saaj"/>
    <property name="javax.xml.soap.MessageFactory" value="org.apache.axis2.saaj.MessageFactoryImpl"/>
    <property name="env.M2" value="/home/uddi/mpf/apache-maven-2.2.1/bin"/>
    <property name="javax.xml.soap.SOAPConnectionFactory" value="org.apache.axis2.saaj.SOAPConnectionFactoryImpl"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="env.MAIL" value="/var/spool/mail/uddi"/>
    <property name="java.specification.version" value="1.6"/>
    <property name="env.KDE_IS_PRELINKED" value="1"/>
    <property name="env.SSH_ASKPASS" value="/usr/libexec/openssh/gnome-ssh-askpass"/>
  </properties>
  <testcase time="0.236" classname="org.apache.axis2.saaj.integration.IntegrationTest" name="testSendReceiveMessageWithEmptyNSPrefix"/>
  <testcase time="0.039" classname="org.apache.axis2.saaj.integration.IntegrationTest" name="testSendReceiveSimpleSOAPMessage"/>
  <testcase time="0.072" classname="org.apache.axis2.saaj.integration.IntegrationTest" name="testSendReceiveMessageWithAttachment"/>
  <testcase time="0.036" classname="org.apache.axis2.saaj.integration.IntegrationTest" name="testSendReceive_ISO88591_EncodedSOAPMessage"/>
  <testcase time="0.024" classname="org.apache.axis2.saaj.integration.IntegrationTest" name="testCallWithSOAPAction"/>
  <testcase time="0.023" classname="org.apache.axis2.saaj.integration.IntegrationTest" name="testCallMTOM">
    <error message="org.apache.axiom.om.OMException: Part content ID cannot be blank for non root MIME parts" type="javax.xml.soap.SOAPException">javax.xml.soap.SOAPException: org.apache.axiom.om.OMException: Part content ID cannot be blank for non root MIME parts
    at org.apache.axis2.saaj.SOAPMessageImpl.&lt;init&gt;(SOAPMessageImpl.java:108)
    at org.apache.axis2.saaj.MessageFactoryImpl.createMessage(MessageFactoryImpl.java:132)
    at org.apache.axis2.saaj.integration.IntegrationTest.testCallMTOM(IntegrationTest.java:363)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)
    at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:98)
    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)
    at org.junit.internal.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)
    at org.apache.axis2.saaj.SAAJTestRunner.invokeTestMethod(SAAJTestRunner.java:134)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)
    at org.apache.maven.surefire.Surefire.run(Surefire.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:338)
    at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:997)
Caused by: org.apache.axiom.om.OMException: Part content ID cannot be blank for non root MIME parts
    at org.apache.axiom.attachments.Attachments.getNextPartDataHandler(Attachments.java:648)
    at org.apache.axiom.attachments.Attachments.getDataHandler(Attachments.java:350)
    at org.apache.axiom.attachments.Attachments.&lt;init&gt;(Attachments.java:247)
    at org.apache.axiom.attachments.Attachments.&lt;init&gt;(Attachments.java:267)
    at org.apache.axis2.saaj.SOAPMessageImpl.&lt;init&gt;(SOAPMessageImpl.java:84)
    ... 29 more
</error>
  </testcase>
  <testcase time="2.043" classname="org.apache.axis2.saaj.integration.IntegrationTest" name="testConnectionCleanup"/>
</testsuite> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T08:57:53.127

似乎测试失败，请尝试：

```
mvn <commands> -Dmaven.test.skip=true 
```

问候，

# android - Android 许可错误 561 (0x231)

> ID：10974660
> 
> 赞同：4
> 
> 时间：2012-06-11T04:58:22.673
> 
> 标签：android, android-lvl

我有一些申请是从另一家公司转移到我们的。我们已经让谷歌将它们转移到我们的发布者帐户。但是，我正在尝试验证许可，并且只能得到不允许，错误为 561。

我已经做了很多许可的应用程序，并检查了整个事情的权限、PUBLIC_KEY、测试帐户。我检查了版本，并尝试测试签名和未签名的应用程序。不走运，它总是给出错误 561。

我找不到任何关于错误 561 的信息，有人知道这段代码是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:49:02.617

我假设您指的`void processServerResponse(int response, ResponseData rawData);`是接口`com.google.android.vending.licensing.Policy` 561 中的方法与 0x231 相同，在接口中定义为 NOT_LICENSED。因此，您的许可证存在错误，您应该检查 rawData 以了解原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T07:02:48.897

我遇到了同样的错误，我花了一整天的时间来摆脱它。就我而言，问题是由于**网络安全**。我尝试使用不同的网络（个人热点网络）。它运作良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-21T14:49:43.363

这个答案可能适合任何人，因为已经晚了。

确保`CHECK_LICENCE`在清单中添加权限：

`<uses-permission android:name="com.android.vending.CHECK_LICENSE" />`

并确保将应用程序上传到商店进行测试。

# java - 带有延迟的while循环使JFrame无响应

> ID：10974673
> 
> 赞同：0
> 
> 时间：2012-06-11T05:00:28.723
> 
> 标签：java, loops, while-loop, jframe

因此，当我运行此代码时，我的 JFrame 变得无响应。我设法将其追溯到 gameLoop() 下的 while 循环。无论使用在其中调用 Thread.sleep() 的 delay(1000/FRAMERATE)，它都不会允许 Key 或 Mouse Listeners 完成他们的工作。

完整代码如下，gameLoop() 中存在问题

```
package me.LemmingsGame;

import java.awt.*;
import java.awt.event.*;
import java.io.*;

import javax.swing.*;

public class Game extends JFrame implements KeyListener, MouseListener{

    private World wrld;//reference to current world
    private WorldFile loader=null;//world data

    private int gateCounter;

    private int width,height; //width and height of level

    private int mx,my;

    private int tool = Lemming.CLIMB;
    private Image dbImage; private Graphics dbg; //backbuffer  
    private Image [] sprites;//all images used in game

    private Lemming[] lemmings; //array of all Lemmings in level
    private int nextLem;//next Lemming to be received from Gate class

    private int running;//state of game
    private static final int FRAMERATE=180;//assigned framerate

    public Game(WorldFile loader){
        super("Lemmings");
        setLocation(50,40);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        width=3+loader.x*10;height=29+loader.y*10;
        loadImages();
        lemmings=new Lemming[loader.noLemmings*loader.gates().length];
        setSize(width,height);
        setVisible(true);   
        addMouseListener(this);
        addKeyListener(this);
        this.loader=loader;
        running=2;
        dbImage= createImage(width,height);
        dbg=dbImage.getGraphics();
        wrld=new World(loader,createImage(width,height), sprites, this);
        gameLoop();
    }
    public void loadImages(){
        sprites=new Image[2];
        sprites[0]=new ImageIcon("Resources/toolbar.png").getImage();
        sprites[1]=new ImageIcon("Resources/selector.png").getImage();
    }
    public static void delay(long len){
        try{
            Thread.sleep(len);
        }catch(InterruptedException e){
            System.out.println(e);
        }
    }
    public void moveLemmings(){
        if(nextLem>0)
            for(int i = 0;i<nextLem;i++)
                lemmings[i].cycle();
    }
    public void gameLoop(){

        wrld.openGates();
        while(running>0){
            delay(1000/FRAMERATE);
            if(running==2){
                gateCounter++;
                if(gateCounter>FRAMERATE*2){
                    wrld.cycleGates();
                    gateCounter=0;
                }
                moveLemmings();
                if(nextLem>0)
                    wrld.checkPositions(lemmings,nextLem);
            }
            repaint();
            //paint(getGraphics());
        }
    }
    public void paint(Graphics g){
        if(wrld!=null){
            dbg.setColor(Color.BLACK);
            dbg.fillRect(0, 0, width, height);
            wrld.draw(dbg);
            if(nextLem>0)
                for(int i=0;i<nextLem;i++){
                    lemmings[i].draw(dbg);
                }
            dbg.drawImage(sprites[0],0,0,null);
            dbg.drawImage(sprites[1],tool-3*39,0,null);
            g.drawImage(dbImage,3,29,this);
        }
    }
    public void addLemming(Lemming lemmy) {
        lemmings[nextLem]=lemmy;
        lemmy.spawn();
        nextLem++;
    }
    public void goal(){
        running=0;
        dispose();
        new Menu();
    }
    public void fail(){
        running=0;
        dispose();
        new Menu();
    }
    public void mouseClicked(MouseEvent e) {}
    public void mouseEntered(MouseEvent e) {}
    public void mouseExited(MouseEvent e) {}
    public void keyTyped(KeyEvent e) {}
    public void mousePressed(MouseEvent e) {
        System.out.println("boop");
        mx=e.getX();
        my=e.getY();
        if(my<40)
            if(mx<40)
                tool=Lemming.CLIMB;
            else if(mx>39&&mx<=39*2)
                tool=Lemming.CHUTE;

    }
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
    public void keyPressed(KeyEvent e) {
        System.out.println("boop2");
    }

    public void keyReleased(KeyEvent e) {

    }
} 
```

如果重要，程序从这里开始并进入游戏类

```
package me.LemmingsGame;

import java.awt.*;
import java.awt.event.*;
import java.io.File;

import javax.swing.*;

public class Menu extends JFrame implements ActionListener{
    /**
     * 
     */
    private static final long serialVersionUID = -1448646591011984524L;
    private JComboBox worldList;
    private JButton launch, worldEditor;
    private String [] worldPaths;
    private String [] worldNames;
    private int currentWorld;
    public Menu(){
        super("Lemmings! By: Jordan and Seth");
        this.setLocation(new Point(550,400));
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        File listDir[] = new File("./Worlds").listFiles();
        int x=0;
        for (int i = 0; i < listDir.length; i++) 
            if (listDir[i].isDirectory()) 
                   x++;
        worldPaths=new String[x];
        worldNames=new String[x];
        x=0;
        for (int i = 0; i < listDir.length; i++) 
            if (listDir[i].isDirectory()){ 
                    worldPaths[x]=listDir[i].getPath().substring(2);    
                    worldNames[x]=worldPaths[x].substring(7);
                    x++;
            }
        worldList=new JComboBox(worldNames);
        worldList.addActionListener(this);
        worldEditor=new JButton("Open World Editor");
        worldEditor.addActionListener(this);
        launch = new JButton("Play");
        launch.addActionListener(this);
        Container cp = getContentPane();
        cp.setLayout(new FlowLayout());
        cp.add(worldEditor);
        cp.add(worldList);
        cp.add(launch);
        pack();
        setVisible(true);
    }
    public void actionPerformed(ActionEvent e){
        if(e.getSource()==worldEditor){
            dispose();
            new MapEditor();
        }else if(e.getSource()==launch){
            dispose();
            try {
                new Game(new WorldFile(worldPaths[currentWorld]));
            } catch (Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }else if(e.getSource()==worldList){
            currentWorld=worldList.getSelectedIndex();
        }
    }
    public static void main(String [] args){
        new Menu();
    }
} 
```

可能无关紧要，但这是 github 存储库的一个插件[https://github.com/cybnetsurfe3011/Lemmings-Computer-Science/](https://github.com/cybnetsurfe3011/Lemmings-Computer-Science/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:10:32.730

您正在`Thread.sleep()`您的主线程中执行，在这种情况下是 EDT（事件调度程序线程）。该线程负责绘制图形和监听事件。通过这样做`Thread.sleep()`，您实际上是在暂停它，因此不允许它完成它的工作。

似乎您想每隔一段时间刷新一次 GUI（至少这是我的猜测）。如果是这种情况，您将需要将您的逻辑移动到一个新的单独线程，然后从您将产生的线程中调用您需要的任何更新方法。要使更改可见，您需要使用[SwingUtilities.invokeLater()](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)方法再次调用事件调度程序线程。

# android - 如何通过 GPRS 移动网络建立持久连接？

> ID：10974674
> 
> 赞同：0
> 
> 时间：2012-06-11T05:00:30.010
> 
> 标签：android, sockets, tcp

我想建立一个持久的`tcp connection`

例如。与`redis or mqtt or socket.io`.

我唯一关心的是 GPRS 移动网络连接的可靠性。

我正在寻找库/方法来实现这些（或其他服务器）之一的客户端，这些服务器可以无损地传递和接收数据。我不关心延迟，但我打算发送任一方向的数据必须毫无问题地到达。

客户端将在android 2.2上实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:58:03.543

MQTT 提供服务质量级别，以保证使用消息握手进行消息传输。如果连接由于某种原因失败，客户端库将在连接返回后重试消息传递。

*   QoS 级别 0 表示该消息将被服务器最多接收一次。
*   QoS 级别 1 表示该消息将被服务器至少接收一次。
*   QoS 级别 2 表示该消息将被服务器仅接收一次。

您需要 QoS > 0，并检查实现在断开连接的情况下是否正确恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:07:27.580

嘿 这里有一些可能对你有帮助的信息

*   [关于 TCP 的信息 -> 可靠传输](https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Reliable_transmission)
*   [TCP 连接的一些片段](http://www.anddev.org/socket_programming-t325.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:27:30.187

TCP 会为您做一些基本的一致性检查。[但它只是一个 32 位 CRC](http://www.androidsnippets.com/create-a-md5-hash-and-dump-as-a-hex-string)，因此您的敏感数据和不可靠网络（GPRS 或其他）的组合意味着您必须实施自己的附加验证方案。我认为[MD5 散列](http://en.wikipedia.org/wiki/MD5)对你来说已经足够了，所以除了你的数据，还要发送一个 16 字节的 MD5 指纹。谷歌会告诉你关于 MD5 是如何陈旧、脆弱、过时等的故事，至少 SHA-1 是必须的。这是真的，但在密码学的背景下。我想你不以安全为目标，你只需要一个完整性检查，MD5 绝对没问题，并且具有比其他任何东西都快得多的优势。

# webdav - 任何用于 WebDAV 负载测试的工具？

> ID：10974678
> 
> 赞同：2
> 
> 时间：2012-06-11T05:00:45.660
> 
> 标签：webdav, load-testing

我想生成 WebDAV 流量（在*[开源服务器](http://www.alfresco.com)**中重现错误）*。

我知道 WebDAV 是 HTTP 上的一个层，所以我可以通过阅读协议规范并发送数十个手工制作的 HTTP 请求来生成这样的流量，但我不想重新发明轮子，我想有人已经写过这样的工具？

理想情况下，该工具将：

*   通过 URL 登录
*   随机导航目录
*   不时下载/上传文件。

如果它是免费/开源的，则奖金。

[这个讨论](http://jmeter.512774.n5.nabble.com/Jmeter-and-Webdav-td3238663.html)表明 JMeter 没有这个特性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:42:16.143

没有这样的工具，所以我写了一个。

[Mecadaver](https://github.com/nicolas-raoul/Mecadaver)在 WebDAV URL 登录，并开始随机导航目录，有时下载文档，有时返回根目录。

*   运行任意数量的用户（在 CSV 文件中提供用户名/密码列表）
*   使负载更密集或更少密集的各种参数。
*   开源

注意：[Silk Performer](http://www.borland.com/products/silkperformer/)也可以进行 WebDAV 测试加载，但它非常昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:50:17.617

[我在Sourceforge](http://sourceforge.net/projects/prestan/)上找到了一个名为“Prestan”的工具。它基于腾旭的[这篇论文](http://www.webdav.org/papers/MSProject_TengXu.pdf)

# oracle - 将 800 万条记录从 Oracle 导出到 MongoDB

> ID：10974679
> 
> 赞同：1
> 
> 时间：2012-06-11T05:01:08.677
> 
> 标签：oracle, mongodb, export, database

现在我有一个包含 800 万条记录的 Oracle 数据库，我需要将它们移动到 MongoDB。我知道如何使用导入命令通过 JSON 文件将一些数据导入 MongoDB，但我想知道是否有更好的方法来解决这些问题。

*   由于执行时间的限制，如何处理？
*   数据库每秒钟都在增加，那么确保每条记录都被移动的计划是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:08:40.903

> 由于执行时间的限制，如何处理？

不要使用 JSON 导出/导入。相反，您应该编写一个脚本来读取数据，转换为 MongoDB 的正确格式，然后将其插入那里。

这有几个原因：

*   您的表/集合将不会以相同的方式组织。（*如果是，那你为什么要使用 MongoDB？*）
*   这将允许您监控操作的进度。特别是，您可以每 1000 个左右的条目输出到日志文件，以获得一些进展并能够从故障中恢复。
*   这将测试您的新 MongoDB 代码。

> 数据库每秒钟都在增加，那么确保每条记录都被移动的计划是什么。

这里有两种策略。

1.  跟踪更新的条目并在新更新的记录上重新运行您的脚本，直到您赶上。
2.  在运行脚本以复制数据时写入两个数据库。然后，一旦你完成了脚本并更新了所有内容，你就可以切换到只使用 MongoDB。

我个人建议 #2，这是在保持正常运行的同时进行管理和测试的最简单方法。这仍然需要大量的工作，但这将允许过渡发生。

# javascript - 制作类似于facebook的悬停弹出框效果

> ID：10974680
> 
> 赞同：1
> 
> 时间：2012-06-11T05:01:10.010
> 
> 标签：javascript, jquery, asp.net, html, css

![在此处输入图像描述](../Images/903ea95be1b8e0a0dbc18eb93cc76f4c.png)

如何在 facebook 上制作悬停弹出框效果，我不知道它是如何调用的，所以我不知道搜索这个的关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:06:48.187

Twitter Bootstrap 框架称之为弹出框

[http://twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:24:04.460

我曾经需要为我的网站提供这样的功能，我用这个作为我的参考

[http://papermashup.com/experimental-jquery-tooltips/](http://papermashup.com/experimental-jquery-tooltips/)

或者搜索jquery tooltips，有成千上万个

# php - 如何保护中央 PHP 代码，同时仍允许将其包含在客户端目录中

> ID：10974681
> 
> 赞同：2
> 
> 时间：2012-06-11T05:01:48.613
> 
> 标签：php, code-access-security

我们有几个不同的客户端目录（每个都有自己的域），它们包括/需要来自服务器上不同位置的中央应用程序。基本上每个域都是集中代码的扩展，但非常精简，因为不需要复制所有主要代码。

如果我们想让客户/经销商有权编辑他们自己的 PHP 代码，我们将如何阻止他们阅读我们希望保护的中心代码？

基本上我们希望阻止他们创建一些打开、读取、TAR 或以某种方式输出源代码的代码，但我们仍然必须允许包含。

open_basedir() 几乎做到了这一点；它阻止了代码的打开，但这样做也阻止了包含。

代码加密解决方案（例如 Zend Guard）是我们唯一的选择，还是有像 open_basedir() 这样允许包含的方法？我也有关于禁用所有读取功能并编写我自己的来检查源代码。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:17:06.420

答案是否定的，您不能授予“读取”权限并阻止他们读取...如果他们可以“包含”代码，他们还可以编写一个简单的 php 脚本来读取您的中央应用程序文件并将内容打印到屏幕上，例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:30:35.043

我相信如果您允许全局阅读，则您不能限制阅读，但是您可以使用 %{REMOTE_HOST} 或类似文件在 .htaccess 文件中过滤您网站的访问。基本上，如果您能够通过 IP 或 url 从远程位置识别您的客户，那么我相信您可以根据访问站点的人员来限制读取特定目录。您能给我一个您的 PHP 代码示例，以便经销商访问您的身边吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:01:40.680

我最终使用 Smarty 为客户端提供有限的功能（模板），同时保持 PHP 的安全。

# android - 两层，但不能在android中显示底层

> ID：10974682
> 
> 赞同：1
> 
> 时间：2012-06-11T05:02:17.037
> 
> 标签：android, android-layout, surfaceview, android-canvas

我正在开发一个类似于刮刮卡的 Android 项目。我在RelativeLayout 中有两层。底层包含一个ImageView，顶层包含一个SurfaceView。

问题是显示屏保持黑色，即使我设置了 ImageView 也不显示`canvas.drawColor(Color.TRANSPARENT)`.

想刮擦擦掉SurfaceView的一部分，露出下面的ImageView怎么办？

提前致谢。我很抱歉英语不好。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:padding="10dp"
    android:id="@+id/layoutama"
    >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    >
        <ImageButton
            android:id="@+id/reset"
            android:src="@drawable/refresh_btn"
            android:background="@null"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/logo"
            android:paddingTop="10dp"
            android:paddingRight="8dp"
        />

        <ImageButton
            android:id="@+id/back"
            android:src="@drawable/back_btn"
            android:background="@null"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/reset"
            android:paddingTop="10dp"
        />

        <ImageView
            android:id="@+id/logo"
            android:src="@drawable/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
        />

    </RelativeLayout>

    <AbsoluteLayout
        android:id="@+id/absolayo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    >
        <RelativeLayout
            android:id="@+id/relatlayo"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
        >

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/image1"
                android:scaleType="fitXY"
            />

            <coba.ngegosok.MainGambar
                android:id="@+id/LayoDalam"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
            />

        </RelativeLayout>
    </AbsoluteLayout>
</LinearLayout> 
```

这是 SurfaceView 代码：

```
 protected void onDraw(Canvas canvas) {
        // fills the canvas with black
        canvas.drawColor(Color.TRANSPARENT);

        canvas.drawBitmap(eraseableBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, p);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        tw = w;
        th = h;
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    private void touch_start(float x, float y) {
        mX = x;
        mY = y;
        mPath.reset();
        mPath.moveTo(x, y);
    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            //mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        mCanvas.drawPath(mPath, p);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        static_x = event.getX();
        static_y = event.getY();

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            touch_start(static_x, static_y);
        } if (event.getAction() == MotionEvent.ACTION_MOVE) {
                touch_move(static_x, static_y);
        } if (event.getAction() == MotionEvent.ACTION_UP) {
                touch_up(); 
            }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:48:04.423

你不应该在 SurfaceView 后面有 imageView，因为 SurfaceView 不像绘制常规视图那样绘制。表面是 Z 顺序的，因此它位于持有其 SurfaceView 的窗口后面；SurfaceView 在其窗口中打了一个孔以显示其表面。

在您的情况下，我会将 ImageView 放在 SurfaceView 前面并使用 setVisibility(View.VISIBLE); 当你想展示它。

或者，您可以使用 myImageView.bringToFront(); 让它在 SurfaceView 的顶部对齐。

# qt - 将同步 qtdbus 调用转换为异步所需的设计建议

> ID：10974683
> 
> 赞同：1
> 
> 时间：2012-06-11T05:02:18.413
> 
> 标签：qt, dbus, qtdbus

到目前为止，我项目中的应用程序使用同步调用通过 qtdbus 进行通信。但是，我现在需要将其中一些调用转换为异步调用。为此，我选择使用 qtdbus QDBusAbstractInterface::callWithCallback 中提供的这个 API 但问题是当前的实现有这些 qtdbus 同步调用分散在代码中的很多地方，并且遵循这些同步调用的代码片段假定控制只有当前面的呼叫已成功服务并获得回复时才会到达他们。当调用更改为异步时，情况将不再如此。此外，调用是在不同的上下文中进行的，所以我需要在每次调用 qtdbus 之前维护系统的状态，以便在收到回复时知道该怎么做。真的有机会以某种方式将调用转换为异步，而不会大幅破坏当前代码的结构吗？我能想到的一种方法是使用 FSM 模式。任何提示或设计建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:00:26.280

我理解的方式是，您将需要调用相同的方法，然后根据调用时的状态以不同的方式处理返回值。如

```
void function()
{
    //do stuff
    value = SynchronousCall();
    if (state == 1)
    {
        doSomething(value);
    }
    else
    {
        doSomethingElse(value);
    }
} 
```

我建议不要完全实现有限状态机模式，因为它会弄乱它添加的类的数量，而是为每个状态添加单独的方法

```
void function()
{
    //do stuff
    if (state == 1)
    {
        callback = *doSomething(ValueType);
    }
    else
    {
        callback = *doSomethingElse(ValueType);
    }
    callWithCallback(method,args, receiver,callback,error);

} 
```

然后在每种方法中，您可以假设状态并​​相应地处理返回值。

另一种稍微（非常）hacky的方法是在所有异步调用之后简单地进行旋转等待，并`QThread:: yield()`在等待值返回时在循环中使用a。这样，它在技术上仍然是一个异步调用，但它是同步的。

# java - Maven：无法在 OS X 上找到 java.lang 问题

> ID：10974684
> 
> 赞同：3
> 
> 时间：2012-06-11T05:02:27.560
> 
> 标签：java, macos, maven, runtime

当我尝试`mvn clean install` 显然无法找到运行时 jar 时，我遇到了以下问题，但我需要做什么？

错误日志：

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] Failure executing javac, but could not parse the error:
[parsing started /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java/com/ericsson/research/ag/ra/common/cthserverclient/IHttpClient.java]
[parsing completed 42ms]
[parsing started /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java/com/ericsson/research/ag/ra/common/cthserverclient/CTHWebSessionException.java]
[parsing completed 1ms]
[parsing started /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java/com/ericsson/research/ag/ra/common/cthserverclient/CTHServerSession.java]
[parsing completed 14ms]
[search path for source files: /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java,]
[search path for class files: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/rt.jar,/Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/target/classes,/Users/olgunkaya/.m2/repository/json/json-simple/1.1/json-simple-1.1.jar,.]
Fatal Error: Unable to find package java.lang in classpath or bootclasspath

[INFO] 1error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.696s
[INFO] Finished at: Mon Jun 11 07:54:00 EEST 2012
[INFO] Final Memory: 5M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3:compile > (default-compile) on project ag.ra.common: Compilation failure
[ERROR] Failure executing javac, but could not parse the error:
[ERROR] [parsing started /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java/com/ericsson/research/ag/ra/common/cthserverclient/IHttpClient.java]
[ERROR] [parsing completed 42ms]
[ERROR] [parsing started /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java/com/ericsson/research/ag/ra/common/cthserverclient/CTHWebSessionException.java]
[ERROR] [parsing completed 1ms]
[ERROR] [parsing started /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java/com/ericsson/research/ag/ra/common/cthserverclient/CTHServerSession.java]
[ERROR] [parsing completed 14ms]
[ERROR] [search path for source files: /Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/src/main/java,]
[ERROR] [search path for class files: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/rt.jar,/Users/olgunkaya/workspace/CM2H/remoteaccess/osgi/ag.ra.common/target/classes,/Users/olgunkaya/.m2/repository/json/json-simple/1.1/json-simple-1.1.jar,.]
[ERROR] Fatal Error: Unable to find package java.lang in classpath or bootclasspath 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T06:29:45.560

我想我找到了问题所在。

Apple 已将 rt.jar 更改为位于其中的 classes.jar。

`<your_java_version>`/System/Library/Frameworks/JavaVM.framework/Versions/ /Classes/classes.jar

我需要修改我的 pom.xml 以显示 classes.jar 的路径。

编辑：在一个多模块项目中。在 lib 目录中创建指向类 jar 的软链接要好得多。

```
sudo ln -s ../../Classes/classes.jar ./rt.jar 
```

好吧`sudo`，因为写入`/usr/libexec/java_home`命令的结果，即您的 java 主目录，需要管理员权限。

# asp.net - 如何在使用 asp.net 的数据集中使用 like ('s%') 语句？

> ID：10974687
> 
> 赞同：0
> 
> 时间：2012-06-11T05:03:22.397
> 
> 标签：asp.net, sql

我应该如何使用 asp.net 数据集向以下查询添加参数。

```
SELECT word from wordTable where word like 's%'; 
```

目的是搜索以 S 开头的单词。

干杯

**编辑：答案是：**

```
SELECT word from wordTable where word like '' + @letter+ '%'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:33:57.237

```
string connectionString = "your Connection String";
string letter = "T";
DataTable table = new DataTable();
using (var adapter = new SqlDataAdapter("SELECT Word FROM WordTable WHERE Word LIKE @Letter + '%'", connectionString))
{
    adapter.SelectCommand.Parameters.Add("@Letter", SqlDbType.VarChar, 1).Value = letter;
    adapter.Fill(table);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:32:32.233

```
sql = string.Format("SELECT word FROM wordTable WHERE word LIKE '{{0}}%';", paramValue) 
```

但是这样你必须保护 paramValue 免受 SQL 注入！

请参阅：http: [//msdn.microsoft.com/en-us/library/ff648339.aspx](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

所以我认为最好的是（如果不使用 SP）：步骤 3\. 使用动态 SQL 的参数

# wpf - wpf IValueConverter 不更新视图

> ID：10974688
> 
> 赞同：2
> 
> 时间：2012-06-11T05:03:33.437
> 
> 标签：wpf, binding, ivalueconverter

我正在尝试使用 IValueConverter 将集合转换为代理对象以进行数据绑定。

转换器似乎工作正常，但问题是在集合中添加或删除新对象时。视图中没有刷新相同的..

**模型对象：**

```
public class A {
   public ObservableCollection<string> Members { get; }
} 
```

**转换器**

```
public class MemberConverter : IValueConverter {
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
        var collection = new CompositeCollection();
        var a = value as A;

        a.Members.ToList().ForEach(member => {
            collection.Add(new ProxyClass{ A= a, Member= member });
        });

        return collection; 
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
        throw new System.NotImplementedException();
    }
} 
```

**代理类**

```
public class ProxyClass {
    public A A { get; set; }

    public string Member{ get; set; }
 } 
```

**XAML：**

```
<DataTemplate DataType="{x:Type my:ProxyClass}">
            <TextBlock Text="{Binding Path=Member}"/>
</DataTemplate>
<HierarchicalDataTemplate DataType="{x:Type A}" ItemsSource="{Binding Converter={StaticResource MemberConverter}}">
            <TextBlock Text ="{Binding}"/>
</HierarchicalDataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:29:13.827

仅当绑定到的属性的属性更改通知已更改时，才会重新评估绑定。在这种情况下，ItemsSource 绑定到 DataContext - A 实例本身 - 所以除非给它一个新的 A 实例，否则它不会被重新评估。没有监听集合引发的更改通知，因为赋予 ItemsSource 的值实际上是您在转换器中创建的不同集合实例。

一种选择是让转换器创建一个辅助类来挂钩源集合的 CollectionChanged 事件（即传递给转换器的值），并且该对象将负责保持源集合和它创建的集合的同步。另一种选择是尝试强制重新评估绑定 - 例如，对 ItemsSource 绑定使用“成员”路径，并且当您更改集合的内容时，会在 A 上为“成员”引发属性更改通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:13:44.853

它没有更新，因为您的`A`Property 没有实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms743695.aspx)或者是[DependencyProperty](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGMQFjAA&url=http://www.switchonthecode.com/tutorials/wpf-tutorial-introduction-to-dependency-properties&ei=833VT9eUJaeZ2QWt84yKDw&usg=AFQjCNHCcQomMklgh8ObhMaLo-L3R9Io2Q)

如果需要，您可以在实现前一个之后添加以下内容。

```
ItemsSource="{Binding Converter={StaticResource MemberConverter}, UpdateSourceTrigger=PropertyChanged}"> 
```

# java - 停止操作用于数据收集的变量？

> ID：10974690
> 
> 赞同：0
> 
> 时间：2012-06-11T05:03:43.123
> 
> 标签：java, protection

我正在用java做一个项目，我希望能够从客户端收集统计数据，我担心会发生的一个可能问题是对用于收集的变量的操作，这将导致非法统计数据。是否有可能以任何方式防止对变量的操纵，或者总是有可能？

例如：我想记录客户端每小时执行的操作。作为执行动作数量的计数器的变量被操纵，并且更大的数量被添加到计数器中。然后将此数据上传到服务器（当然使用多层架构来防止更多可能的问题）并被认为是“合法的”。

有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:22:58.160

根据上传数据的方式，有多种方法可以保护信息。

如果您要上传某种文本或数据文件，使用基本加密，即使是带有密码的 ZIP，应该足以阻止临时用户更改信息。

您的应用程序也可以简单地使用 RMI 或 Web 服务来上传信息，而不需要用户更改来操作数据。

当然，所有这些都假设应用程序本身收集信息——如果用户有机会输入数据，则没有真正的方法可以防止他们向您提供虚假信息。

在不知道这是桌面应用程序还是 Web 应用程序的情况下，我建议您以某种方式加密您的上传文件。它不必很复杂，只要有人无法在文本编辑器中对其进行编辑即可。

请记住，如果某些东西在客户端机器上运行，它是可以被操纵的。Java 不是一种安全的语言，就这点而言，什么都不是，虽然你可以做很多事情来保护应用程序，但总会有人比它更聪明一点，可以破解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:02:13.207

如果我这样做，我会在受保护的机器上累积统计信息。让主要数据收集代码向累加器发送“事件”消息，并让累加器记录原始事件及其到达时间戳。这不会阻止人们操纵统计数据，但它可以使事后更容易检测可疑模式。

基于这个想法，您可以安排事件生成器应用程序（在用户的计算机上）使用某种涉及共享密钥或公钥/私钥加密的握手。我认为您不能完全确保这一点，但隐匿性安全可能足以应对没有对代码进行逆向工程技能的人的作弊企图。

但就像 Ewald 所说，任何算法过程都可以由对其运行的硬件有足够控制权的人进行逆向工程。如果这个过程需要使用一个“秘密”来运行，那么这个秘密就可以被泄露。

# html - 如何在单击该页面的链接时将文本框值传递给 php 页面

> ID：10974691
> 
> 赞同：-1
> 
> 时间：2012-06-11T05:03:50.730
> 
> 标签：html, forms

这是我的html代码

```
<form id="searchForm">
<input name="search" type="text"/> 

<a href="search.php" id="searchLink"><img src="images/search-btn.jpg"  alt="search-btn" /></a>
</form> 
```

单击链接时如何将此文本框值发送到 search.php 页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T05:05:33.980

你可以给`action`你的表单一个指向你想要被调用的 PHP 脚本，并使用一个图像提交按钮而不是一个锚：

```
<form id="searchForm" action="search.php" method="post">
    <input name="search" type="text"/> 
    <input type="image" src="images/search-btn.jpg" alt="search-btn" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:57:09.107

请注意，作为替代附录，您还可以使用该`<button>`元素，它允许比笨重的`<input>`元素更漂亮且可能很棒的样式。

来自[MDN 规范](https://developer.mozilla.org/en/HTML/Element/button#Notes)：

> **`<button>`元素比`<input>` 元素更容易设置样式。**您可以添加内部 HTML 内容（think `<em>`，`<strong>`甚至`<img>`），并利用`:after` 和`:before` 伪元素来实现复杂的渲染，同时`<input>`只接受一个文本值属性。

它有几个`HTML5`唯一的属性，因此如果您不使用该 DOCTYPE，请仔细查看您的属性要求，以及 MDN 页面上的浏览器供应商兼容性图表。实际上，您现在在实践中需要的所有浏览器都已经支持。

**演示：**

```
<form id="form" action="search.php">
    <button type="submit" id="button">
        <p><input name="search" type="text"/></p>
        <img src="http://goo.gl/UohAz" alt="search-btn" id="img" />
    </button>
</form> 
```

[http://jsfiddle.net/userdude/RBUCw/1/](http://jsfiddle.net/userdude/RBUCw/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:08:08.673

使用提交按钮将表单提交到 search.php，在那里您可以通过 $_POST[] 变量获取搜索框值。如果要在 URL 中显示搜索关键字，请使用 GET 方法并在 search.php 中通过 $_GET 访问。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T05:11:53.273

尝试这个

```
<form id="searchForm" action="search.php" method="post">
    <input name="search" type="text"/> 
    <input type="submit" style="background:images/search-btn.jpg"  />
</form> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-11T05:19:26.157

您可以使用锚标记内的 onClick 方法来提交表单。href 需要设置为“#”。另外，表单的动作需要设置为search.php。

```
<form id="searchForm" action="search.php">
  <input name="search" type="text" />
  <a href="#" onClick="document.getElementById('searchForm').submit();" id="searchLink"><img src="images/search-btn.jpg"  alt="search-btn" /></a>
</form> 
```

# c# - ASP.Net GridView 不显示页码

> ID：10974701
> 
> 赞同：1
> 
> 时间：2012-06-11T05:05:58.893
> 
> 标签：c#, asp.net, gridview, paging

我已经阅读了几篇文章和教程，但我无法弄清楚这一点。一切基本上都在说，“哦，只要打开 AllowPaging，你就完成了！” 当我这样做时，是的，我可以在设计视图中看到 GridView 下的分页控件，但是当我编译时，我看不到正在运行的站点中的页码。

我注意到与所有示例不同的一件事是，我从代码隐藏中进行数据工作。因此我的 GridView 很简单：

```
<asp:GridView ID="gvlatest" runat="server" Width="99%" AllowSorting="True" 
              onrowdatabound="gvlatest_RowDataBound" onsorting="gvlatest_Sorting" 
              AllowPaging="True" PageSize="2" /> 
```

我所说的从后面进行数据工作的意思是，所有的列和所有内容都是从代码构造到 DataTable 中的，然后我将 GridView 的 DataSource 设置为 DataTable。例如，我所拥有的一个非常简略的版本：

```
DataTable temptable = new DataTable();
DataColumn titlecol = new DataColumn();
titlecol.ColumnName = "Title";
temptable.Columns.Add(titlecol);
gvlatest.DataSource = temptable;
gvlatest.DataBind(); 
```

我猜这只是个人喜好，老实说，我实际上从未学习过如何使用 DataSource 控件以及所有示例都在使用的方法，您在 .aspx 文件中使用列、数据源构建 GridView等等。所以我*猜*我的问题在于那个大方向......

问题是，**我做错了什么？为什么页码不显示？将“AllowPaging”设置为 true 真的是我需要做的吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:40:40.777

要使 Paging 工作，您的数据源必须支持它。如果没有，例如 DataTable，那么您必须自己执行此操作。

这段代码应该会有所帮助。

```
OnPageIndexChanging="myGridview_PageIndexChanging"

protected void myGridview_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView gv = (GridView)sender;
    DataView dv = gv.DataSource as DataView;
    DataTable dataTable = dv.Table;

    gv.DataSource = myDataTable;
    gv.PageIndex = e.NewPageIndex;
    gv.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:25:53.393

您必须使用 gridview 中的 page_index 更改事件在 gridview 中实现分页，请参阅此链接：

[http://forums.asp.net/t/1245611.aspx](http://forums.asp.net/t/1245611.aspx)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T15:00:53.690

您可以禁用特定列并添加分页

```
protected void Gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
        {

            if (e.Row.RowType == System.Web.UI.WebControls.DataControlRowType.DataRow)
//----------------------------------Grid view column invisible------------------------------------------------------------
                if (Request.QueryString.Get("show") == "all")
                    GridView1.Columns[0].Visible = true;
                else
                    GridView1.Columns[0].Visible = false;

                //-------------------------------------------------------------------------------------------------------------------------

}

protected void Gridview1_PageIndexChanging(object sender, GridViewPageEventArgs e)
        {

            GridView1.PageIndex = e.NewPageIndex;
            gvbind();// Grid View Binded

        }

// Source Code
allowpaging="true" OnPageIndexChanging="Gridview1_PageIndexChanging" pagesize="2" 
```

# c++ - Uint8 - 缺少类型说明符

> ID：10974702
> 
> 赞同：1
> 
> 时间：2012-06-11T05:06:02.263
> 
> 标签：c++, sdl, undefined-reference, uint

我正在尝试编写一个单例类来保存用户输入的状态（鼠标/键盘数据）。SDL API 将键盘数据作为 Uint8 指针数组返回，但是，为什么我尝试创建 Uint8 指针，我在带有 uint8 的行收到这些错误：

```
error C2143: syntax error : missing ';' before '*'

error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

我之前使用 Uint8 作为数据类型而没有定义它，所以我不确定是什么导致了这里的问题。这是我的代码：

```
class InputState {
public:

    InputState()
    {};
    ~InputState()
    {};

    static InputState *getInputState(void)
    {
        static InputState *state = new InputState();

        return state;
    };

public:
    Uint8 *keys;

    struct MouseState
    {
        int LeftButtonDown;
        int RightButtonDown;
        int MiddleButtonDown;

        int x;
        int y;

        MouseState ()
        {
            LeftButtonDown = 0;
            RightButtonDown = 0;
            MiddleButtonDown = 0;

            x = 0;
            y = 0;
        }
    };

    MouseState *mouseState;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:14:59.627

该类型`Uint8`是在其中一个标头中定义的 typedef `SDL`。如果要使用它，则需要`SDL.h`在文件中包含标头。

```
// You need this include if you want to use SDL typedefs
#include <SDL.h>

class InputState {
public:

    InputState()
    {};
    ~InputState()
    {};

    // ...

public:
    Uint8 *keys;

    // ...
}; 
```

# html - 将 css3 样式应用于特定 id

> ID：10974703
> 
> 赞同：3
> 
> 时间：2012-06-11T05:06:36.217
> 
> 标签：html, css, hyperlink

我只想将样式应用于 myPage id。但我无法通过以下方式实现它：

```
<!DOCTYPE html>  
<head>  
<link rel="stylesheet" href="style1.css"/>  
</head>  
<body>  
<div>  
Welcome To CSS3....  
Learning.....!  
</div>  
<div id="myPage">  
Welcome ....  
<img src="rose1.jpg" width="200" height="200" />  
</div>  
</body>  
</html>  

.myPage div{  
border:2px solid black;  
background-color:yellow;  
font-color:red;  
box-shadow:10px 10px 7px #777  
} 
```

请告诉我错误。

谢谢

斯内哈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T05:10:14.083

当您使用此选择器时：

```
.myPage div 
```

您正在寻找一个具有.*类*的元素`myPage`。你想要这个：

```
#myPage div 
```

`.`寻找类。`#`查找具有特定 ID 的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:13:27.033

您的`id`div 是`myPage`，因此要将样式应用于`id`您必须使用的元素`#`。你应该`#myPage`在这里使用 div 。`.`用于将样式应用于类。[基本参考。](http://www.tizag.com/cssT/cssid.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:15:41.787

当您在页面本身中给出 css 样式时，必须如下

<风格>

// CSS 代码

</风格>

而不是使用 id -- # 你去上课了 -- 。那是错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:16:50.293

选择器正在寻找类 myPage，其中包含一个 div。

尝试以下选择器：

```
div#myPage { } 
```

这将寻找一个既是 div 又具有 myPage id 的元素。

点表示一个类，哈希表示一个id。选择器`#myPage div`将指示任何具有 id myPage 且内部有 div 的元素，而不是既是 div 又具有 myPage 的 id 的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T05:17:04.213

**.myPage div{}**这会将 css 应用于具有类**myPage**
remember **"."的元素内的 div。对于类和“#”对于 id**
，所以只需进行如下更改

```
<style>
    #myPage{  
    border:2px solid black;  
    background-color:yellow;  
    font-color:red;  
    box-shadow:10px 10px 7px #777  ;
    } 
</style> 
```

它会解决你的问题

# visual-studio-2010 - devexpress aspxdataview 列问题

> ID：10974705
> 
> 赞同：0
> 
> 时间：2012-06-11T05:06:43.850
> 
> 标签：visual-studio-2010, devexpress, aspxgridview

我是 asp.net devexpress 工具的新手。我想识别`ASPxGridView`组件的列值。

我该怎么做。请帮我解决这个问题

（我们可以按照下面/或类似的方式做）

```
ASPxGridView.column[1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:10:38.027

您可以通过以下方式获取这些值：

[ASPxGridView.GetRowValues](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_GetRowValuestopic)
[ASPxGridView.GetRowValuesByKeyValue](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_GetRowValuesByKeyValuetopic)

[所有 ASPxGridView 成员的列表。](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridViewMembersTopicAll)

# c# - 如何在满足条件之前阻止操作？

> ID：10974708
> 
> 赞同：7
> 
> 时间：2012-06-11T05:07:06.460
> 
> 标签：c#, blocking

我正在运行这段代码，它使用了相当多的 CPU，尽管它大部分时间都没有做任何事情。

```
while (this.IsListening)
{
    while (this.RecievedMessageBuffer.Count > 0)
    {
        lock (this.RecievedMessageBuffer)
        {
            this.RecievedMessageBuffer[0].Reconstruct();
            this.RecievedMessageBuffer[0].HandleMessage(messageHandler);
            this.RecievedMessageBuffer.RemoveAt(0);
        }
    }
} 
```

在满足条件之前阻止的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T05:14:51.683

使用`WaitHandle`.

```
WaitHandle waitHandle = new AutoResetEvent();

// In your thread.
waitHandle.WaitOne();

// In another thread signal that the condition is met.
waitHandle.Set(); 
```

您还可以考虑更改类的接口以在要读取新数据时引发事件。然后，您可以将代码放入事件处理程序中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T05:20:23.620

假设您使用的是 .NET 4，我建议切换`RecievedMessageBuffer`为[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)。当您将消息放入其中时，调用它的[Add](http://msdn.microsoft.com/en-us/library/dd287137.aspx)方法。当你想检索消息时，调用它的[Take](http://msdn.microsoft.com/en-us/library/dd287085.aspx)或[TryTake](http://msdn.microsoft.com/en-us/library/dd287154.aspx)方法。Take 将阻止读取线程，直到消息可用，而不会像原始示例那样烧毁 CPU。

```
// Somewhere else
BlockingCollection<SomethingLikeAMessage> RecievedMessageBuffer = new BlockingCollection<SomethingLikeAMessage>();

// Something like this where your example was
while (this.IsListening)
{
    SomethingLikeAMessage message;
    if (RecievedMessageBuffer.TryTake(out message, 5000);
    {
        message.Reconstruct();
        message.HandleMessage(messageHandler);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T16:24:32.320

以上代码行，特别是 AutoResetEvent 在版本 3.5 中可用。所以像上面这样简单的代码加上一些小的修正是非常有效的，因为它可以工作并且接近基础 API。更正应该是

AutoResetEvent waitHandle = new AutoResetEvent(false); 具有参数 false 的构造函数使 WaitOne() 等待，因为 AutoResetEven 未重置 (false)。使用接口 WaitHandle 并没有太大的优势，所以我将只使用 AutoResetEvent 来代替，因为它公开了 Set 方法，而 WaitOne 在这种情况下非常冗长。最重要的是，构造函数参数应该是假的。

# objective-c - 神奇的记录、保存和 NSFetchedResultsController

> ID：10974713
> 
> 赞同：8
> 
> 时间：2012-06-11T05:07:33.390
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, magicalrecord

不确定这是否是 Magical Record 保存方式的问题，或者我只是在某个地方犯了一个菜鸟错误。

我正在使用 NSFetchedResultController (FRC) 和 UITableView 来显示实体列表，当用户点击“添加”带有编辑器的新视图控制器时，会使用`[MyEntity MR_createEntity]`. 用户可以在此处添加通过关系添加到主实体的其他实体。当用户在此视图控制器中点击“保存”时，上下文将使用`[[NSManagedObjectContext MR_contextForCurrentThread] MR_save]`

NSFetchedResultsController 似乎更新了，但是当我点击编辑实体时，没有任何子实体存在。调试似乎表明，即使实体已被保存，FRC 仍然具有具有其临时 ID 的实体。

我`[self.tableView reloadData]`在 FRC`controllerDidChangeContent`委托方法中做得很幼稚。

重新启动应用程序会加载正确的实体，并且子实体会在编辑器视图控制器中正确显示。

看起来 FRC 响应了“主线程”保存事件，但保存实际上是在后台线程上发生的，因此 FRC 看不到它。我已经检查过，所有“我的”操作（设置 FRC、创建和获取实体）都发生在主线程上下文中。

我尝试在 MR_rootSavingContext 上侦听更改通知，并将它们与主线程上下文合并，这有点工作，但我最终在 FRC 中得到了重复的行（一个是正确的“永久”实体，一个是临时实体）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T05:35:21.137

好的，我不确定这是否是“正确的方法”，但我发现如果我在 MR_rootSavingContext 中创建 NSFetchedResultsController 而不是使用`MR_fetchAllSortedBy`.

我想从 FRC 现在正在观看 rootSavingContext 而不是其中一个孩子的角度来看，这是有道理的。尽管如此，我还是会想到，因为我在同一个线程上进行所有操作，这不会成为问题。

**更新：**这种方法的唯一问题是，如果我只是抓住实体`[frc objectAtIndexPath:]`用于将其提供给编辑视图控制器，那么它不再处于默认上下文中。通过使用 NSManagedObjectContext 重新获取默认上下文中的实体来解决此问题`existingObjectWithID`。仍然感觉并不完全正确，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:43:27.667

知道这是一个旧答案，但以上都不适合我，希望能帮助未来的读者

对我来说，问题是由于尝试使用以前与 iCloud 一起使用的 sqlite 文件设置纯本地存储引起的。

Basically I tried to implement iCloud with my CoreData app, did the basic steps to set it up with an ubiquity container etc but then reverted back because of the inherent instability this seemed to cause (why is it that CoreData and iCloud STILL dont get along?!), but cocoa doesn't like you backtracking like that.

Fortunately I haven't done this in a live app so it's relatively easy to change as it will only affect development devices, but if you're moving from iCloud to a local store in a live app I *think* you might need to check out one of these solutions:

[Migrating a Core Data Store from iCloud to local](https://stackoverflow.com/questions/12754366/migrating-a-core-data-store-from-icloud-to-local)

# codeigniter - 启用 CI 2.0.x、ajax 和 CSRF 时出现 500 错误

> ID：10974719
> 
> 赞同：0
> 
> 时间：2012-06-11T05:08:21.763
> 
> 标签：codeigniter, jquery, codeigniter-2

提交 ajax 请求时，我不断收到 500 错误。如果我在配置中关闭 CSRF，则发布工作。但是，一旦我打开它，我就会再次收到 500 错误。

在 config.php 我设置了以下值：

```
$config['csrf_token_name'] = 'csrf_test_name';
$config['csrf_cookie_name'] = 'csrf_cookie_name'; 
```

我确实加载了 jquery cookie，并且在我的 jquery 文件中我有以下代码：

```
 $('#reorder').sortable({
    opacity: '0.5',
    update: function(e, ui){
        newOrder = $( "#reorder" ).sortable('serialize');
        csrf_cookie_name = $.cookie('csrf_cookie_name')
        console.log(newOrder);
        console.log(csrf_cookie_name);
        $.ajax({
            csrf_cookie_name: $.cookie('csrf_cookie_name'),
            url: "/client/saveOrder",
            type: "POST",
            data: newOrder,
            // complete: function(){},
            success: function(feedback){
                console.log('success');
                $("#feedback").html(feedback);
                //$.jGrowl(feedback, { theme: 'success' });
            }
        });
    }
}); 
```

现在 csrf_cookie_name 的 console.log 是：cd660b153522bef89dc53f7f95cd6b1d 所以我得到了它看起来的价值？

最后是客户端中的一个非常简单的函数，用于处理数据。通常我会将其中的一些分离到模型中，但我试图保持简单，直到我让它工作。

```
function saveOrder()
    {
        $items = $this->input->post('item');
        echo '<br/>Items2:' . var_dump($items);
        $total_items = count($this->input->post('item'));

        for($item = 0; $item < $total_items; $item++ )
        {

            $data = array(
                'pageid' => $items[$item],
                'rank' => $item
            );

            $this->db->where('pageid', $data['pageid']);

            $this->db->update('pages', $data);

//          echo '<br />'.$this->db->last_query();

        } 
```

视图中没有使用任何形式。它只是一个带有 LI 集合的 UL，我拖着它来排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:04:03.850

有两种解决方案。两者都有效。检查这些帖子 - 拥有您需要的所有信息

[一个简单的解决方案到 codeigniter-csrf-protection-and-ajax](http://unruhdesigns.com/blog/2012/03/a-simple-solution-to-codeigniter-csrf-protection-and-ajax)

[ajax-csrf-protection-codeigniter-2.0](http://aymsystems.com/ajax-csrf-protection-codeigniter-20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:59:20.187

过去我在无意中使用`<form>`标签而不是使用 CI 的本机[表单助手](http://codeigniter.com/user_guide/helpers/form_helper.html) `form_open()`时遇到过问题。这需要存在才能创建隐藏的令牌字段。这里也有一些很好的建议：[csrf-token-problem](https://stackoverflow.com/questions/6581494/codeigniter-csrf-token-problem)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:17:09.757

几天前我遇到了这个问题，解决方案很简单（至少对我来说）。
改变：
`$.ajax({ csrf_cookie_name: $.cookie('csrf_cookie_name')`
到
`$.ajax({ csrf_test_name: $.cookie('csrf_cookie_name')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:52:29.347

我终于让它工作了。这是我用来实现它的jquery：

您必须同时使用令牌的名称和 cookie 的名称，并使其成为 post 对象的一部分。所以令牌名称 = cookie 名称，并确保在末尾添加一个 &。

```
$('#reorder').sortable({
        opacity: '0.5',
        update: function(e, ui){
            newOrder = 'csrf_test_name=' + $.cookie('csrf_cookie_name') + '&';
            newOrder += $( "#reorder" ).sortable('serialize');
            console.log(newOrder);
            $.ajax({
                url: "/client/saveOrder",
                type: "POST",
                data: newOrder,
                csrf_test_name: $.cookie('csrf_cookie_name'),
                // complete: function(){},
                success: function(feedback){
                    console.log('success');
                    $("#feedback").html(feedback);
                    //$.jGrowl(feedback, { theme: 'success' });
                }
            });
        }
    }); 
```

# transactions - 在一个事务中发送多个 JMS 消息

> ID：10974723
> 
> 赞同：0
> 
> 时间：2012-06-11T05:09:22.030
> 
> 标签：transactions, jms, java-ee-6, weblogic11g

我的应用程序部署在 Weblogic 10.3.5 上，我运行了 2 个场景：

1.  调用 5000 次发送一条消息的 EJB（带有事务）。
2.  调用发送 5000 条 JMS 消息的 EJB（带有事务）。

第一个场景运行顺利，但第二个场景永远不会结束，10 分钟后 OutOfMemory 异常被丢弃。我调查了这个问题，我认为这是因为在事务提交或回滚之前消息一直处于未决状态。

更多信息：

*   交付模式是非持久的
*   会话被自动确认

有人可以推荐我如何在一个事务中发送大量 JMS 消息？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:21:10.150

是的，在事务提交之前，消息会一直堆积。您的留言内容是什么？5000，虽然有很多消息，但每条消息的开销并不大。但是，如果您的消息很大，那么它肯定会成为一个问题。在这种情况下，您可能需要增加机器上的内存，或者重新评估为什么需要在单个事务中发送 5000 甚至 5000。

# javascript - Bootstrap轮播分页/幻灯片编号问题

> ID：10974724
> 
> 赞同：1
> 
> 时间：2012-06-11T05:09:38.020
> 
> 标签：javascript, jquery, css, twitter-bootstrap, carousel

我和许多其他人一样，希望可点击和样式化的分页与 Bootstrap 轮播一起运行，这样我就不必在 bootstrap 的顶部运行额外的 jquery 插件（例如 innerfade）。

我已经使用这个问题（和答案）[Bootstrap Carousel Number active icon](https://stackoverflow.com/questions/10499154/bootstrap-carousel-number-active-icon)进行了尝试，但到目前为止还没有骰子，我看不出我在这里做错了什么。

这是我摆弄的[http://jsfiddle.net/adriatiq/V4SBt/](http://jsfiddle.net/adriatiq/V4SBt/)（奇怪的是，分页在小提琴中而不是在本地工作）。如您所见，编号不会随着幻灯片的进行而跳过。

请原谅我糟糕的js技能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T13:47:21.077

这个对我有用:) [http://jsfiddle.net/4WY6S/6/](http://jsfiddle.net/4WY6S/6/)

```
<script type="text/javascript">
 var currentPage =0;
 $('#myCarousel').carousel({
         interval: 7000
     })
 $('#carousel-nav a').click(function(q){
    q.preventDefault();
    clickedPage = $(this).attr('data-to')-1;
    currentPage = clickedPage-1;
    $('#myCarousel').carousel(clickedPage);
    });
var pages = $("#carousel-nav a");
var pagesCount = pages.length;
$('#myCarousel').on('slide', function(evt) {
  $(pages).removeClass("active");
  currentPage++;
  currentPage=(currentPage%pagesCount);
  $(pages[currentPage]).addClass("active");
  });
</script> 
```

这是“上一个”和“下一个”按钮的代码：

```
<a href="#" onclick="if(currentPage>0){currentPage=((currentPage-2)%3);$('#myCarousel').carousel(currentPage+1);}">PREVIOUS</a> | <a href="#" onclick="if(currentPage<2){$('#myCarousel').carousel(currentPage+1);}">NEXT</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T05:36:07.680

我已经查看了您的代码。我已经根据点击 1,2,3 数字添加了课程......但我无法为下一个上一个链接做同样的事情......

[http://jsfiddle.net/V4SBt/1/](http://jsfiddle.net/V4SBt/1/)

我已经编写了代码，但它被注释了......在该代码中，当我尝试收听这些点击事件时，我收到奇怪的错误消息，即这些链接上的未定义点击事件。

# iis - “错误：cs0016 无法写入输出文件...访问被拒绝”

> ID：10974725
> 
> 赞同：20
> 
> 时间：2012-06-11T05:09:52.777
> 
> 标签：iis

如何修复以下错误？

> 错误：cs0016 无法写入输出文件...c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\sitename\6c57f9d2\bb09b49d\App_global.asax.5odzsyz5.dll' 访问被拒绝

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-21T15:32:59.080

在我自己在这个问题上花了几个小时之后，下面是在运行 IIS 7.5 的 Windows 7 上为我工作的解决方案：

与该站点关联的应用程序池标识不是 IIS_IUSRS 组的成员。要将应用程序池标识添加到组中，我使用了以下步骤：

1.  从开始菜单中选择运行... 输入 lusrmgr.msc 并单击确定。
2.  选择组。
3.  双击 IIS_IUSRS 组。
4.  单击添加... 按钮。
5.  单击位置... 按钮。
6.  选择您的计算机名称（它应该在列表的顶部），然后单击“确定”。
7.  在“输入要选择的对象名称”下方的文本框中输入：iis apppool\<app pool identity> eg iis apppool\dev
8.  单击检查名称按钮。如果出现 Name Not Found 对话框，则验证输入的应用程序池标识是否与与该站点关联的应用程序池标识匹配。如果没有出现对话框，请单击“确定”。

对要添加的每个应用程序池标识重复步骤 7 到 8。单击确定。

现在，应用程序池标识是 IIS_IUSRS 组的成员，该组应该已经可以访问 Temporary ASP.NET Files 目录。毕竟我仍然收到错误并且我发现（感谢[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)）这是因为应用程序池标识无法写入 Windows 临时目录。为了解决这个问题，我将 IIS_IUSRS 组添加到具有读/写权限的 Windows 临时目录中。

1.  从开始菜单中选择运行... 输入 %windir% 并单击确定。
2.  右键单击 Temp 目录并选择属性。
3.  单击安全选项卡。
4.  单击编辑... 按钮。
5.  单击添加.. 按钮。
6.  单击位置... 按钮。
7.  选择您的计算机名称（它应该在列表的顶部），然后单击“确定”。
8.  在“输入要选择的对象名称”下方的文本框中输入：iis_iusrs
9.  单击检查名称按钮。如果出现 Name Not Found 对话框，则检查拼写错误。如果没有出现对话框，请单击“确定”。
10.  选择添加的 IIS_IUSRS 组，然后在下面的每个人的权限框中选择：允许读取和允许写入
11.  单击确定。将显示一个对话框，指出“您即将更改系统文件夹的权限设置，这可能会导致意外访问问题并降低安全性。您要继续吗？”
12.  单击是
13.  点击确定

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-04-10T13:34:53.067

我已解决此问题，将“网络服务”的完全控制设置为系统温度：

**C:\Windows\temp**

Web 服务器报告的错误消息有点误导。希望这可以帮助。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-15T16:37:28.873

我在这个问题上挣扎了一段时间。在网上找到一些解决方案，涉及在错误消息中设置“Temporary ASP.NET Files”目录的权限。但是，即使向“所有人”开放它也不起作用。

然后最终以下步骤修复了它：

1.  转到此站点的 IIS AppPool
2.  右键单击应用程序池并转到高级设置
3.  将身份从“ApplicationPoolIdentity”更改为“NetworkService”

可能还有一些其他必要的步骤，我在故障排除时做了这些，但这是关键步骤。由于某种原因，当“所有人”被授予访问权限时，应用程序池标识（例如 IIS_APPPOOL\SiteName）未被授予访问权限。我相信其他人可以解释为什么会这样......希望这可以帮助其他人解决这个令人沮丧的问题。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-05-12T09:33:09.717

我有同样的问题。找到了一种简单的解决方法：在应用程序池的高级设置中将“加载用户配置文件”设置为 true。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-09T17:44:32.363

我发现这篇文章中接受的答案在处理过程中是正确的。我尝试了“NetworkService”，但它不起作用。但是“LocalSystem”做到了！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-27T11:45:08.450

对于**Windows 7**为用户设置`Full Control`文件夹权限`C:\Windows\Temp``IIS_IUSRS`

`Network Service`用户通常只适用于服务器

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-02T17:33:14.467

[![在此处输入图像描述](../Images/0390176d2b2fe2cc035a994342aea8d1.png)](https://i.stack.imgur.com/tjOWt.png) 转到 C:\Windows\Temp 右键单击​​临时文件夹 > 转到安全 单击编辑添加新用户 [IIS_IUSRS] 并授予它完全权限。然后按确定，

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-04T11:40:07.907

只需要设置“临时”文件夹的权限。

1.  转到“C:\Windows\Temp”
2.  右键单击它，然后转到安全性。
3.  将 [IIS_IUSRS] 用户的权限设置为完全控制
4.  按确定

全部做完。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-06T06:56:04.130

我曾尝试在 IIS 中授予有关身份的权限和更改，但我遇到了同样的错误。

我只是将以下文件保留在路径“C:\Windows\Microsoft.NET\Framework\v4.0.30319”下，问题就消失了。

1.  授予对最近文件夹的完全控制权限。
2.  cvtres.exe（XML 配置文件）
3.  cvtres（应用程序）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-23T03:59:46.457

我在这里尝试了所有选项，但没有任何运气。对我有用的是简单地删除应用程序池并重新创建它。

不需要任何文件夹的额外权限。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-05-22T18:47:22.067

我拥有关于写作和阅读的所有权限，但我开始收到该错误。

我可以建议“重启机器”至少，它对我有用

# tcl - Expect (TCL) 中的模式匹配如何工作（没有 -re 标志）？

> ID：10974726
> 
> 赞同：0
> 
> 时间：2012-06-11T05:10:03.490
> 
> 标签：tcl, expect

假设我得到了这个字符串：`100:~#`或`100:~/tmp`

这实际上意味着，我需要匹配机器的终端提示符（可能包含也可能不包含路径）。通常，使用此正则表达式模式：

```
100:(~|/)(/+[a-zA-Z0-9]*)*# 
```

它适用于输入字符串，例如：`100:~/foo/bar/foo/baz#`

你可以在这里测试它：[Regex Pal](http://regexpal.com/)

但是在 TCL 中使用 Expect，我必须添加`-re`以匹配这样的模式。但是，我不允许这样做。我在没有正则表达式的情况下尝试了上述模式，但失败了。

当前匹配`100:~#`or`100:~/tmp`的模式非常简单：`100:[~/]*#`，我被告知这是匹配字符串的 shell 表达式，而不是正则表达式。该`100:[~/]*#`模式意味着它匹配`100:[~/]`(`~`和`/`是可选的) 和之间的任何内容`#`。该`*`字符旨在匹配任何内容，而不是`*`在传统正则表达式意义上为零或更多的正则。

`-re`没有标志的 Expect 中的模式匹配表达式到底是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:48:45.680

它们被称为“glob”模式。它们是根据 shell 的模式匹配来设计的。文档在这里：[http ://tcl.tk/man/tcl8.5/TclCmd/string.htm#M40](http://tcl.tk/man/tcl8.5/TclCmd/string.htm#M40)

> ***** 匹配字符串中的任何字符序列，包括空字符串。
> 
> **?** 匹配字符串中的任何单个字符。
> 
> **[** *chars* **]** 匹配由*chars*给出的集合中的任何字符。*如果xy*形式的序列出现在字符中，则*x*和*y*之间的任何字符（包括在内）都将匹配。与 一起使用时`-nocase`，范围的端点首先转换为小写。而`{[A-z]}`在区分大小写匹配时匹配“<code>_”（因为“<code>_”介于“<code>Z”和“<code>a”之间），`-nocase`这被认为是{ `[A-Za-z]`}（可能是什么最初的意思）。
> 
> **\** *x* 匹配单个字符*x*。这提供了一种避免对*pattern*`*?[]\`中的字符进行特殊解释的方法。

# exception - 重新定义元素的 MOXy jaxb 绑定错误

> ID：10974733
> 
> 赞同：1
> 
> 时间：2012-06-11T05:10:37.333
> 
> 标签：exception, dynamic, jaxb, redefine

谁能帮我 ？在我的项目中，我需要解析一些架构文件，并且需要根据这些架构生成xml文件。现在，我想使用 MOXy 根据这些模式动态生成空的 xml 文件。但是发生了异常。

```
Internal Exception: com.sun.istack.SAXParseException2: "file:/F:/workspace/test/src/custom2.xsd" is not a part of this compilation. Is this a mistake for "file:/F:/workspace/test/src/custom.xsd"?
    at org.eclipse.persistence.exceptions.JAXBException.errorCreatingDynamicJAXBContext(JAXBException.java:586)
    at org.eclipse.persistence.jaxb.dynamic.metadata.SchemaMetadata$XJCErrorListener.error(SchemaMetadata.java:235)
    at com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.error(SchemaCompilerImpl.java:316)
    at com.sun.tools.xjc.reader.internalizer.Internalizer.reportError(Internalizer.java:628)
    at com.sun.tools.xjc.reader.internalizer.Internalizer.reportError(Internalizer.java:619)
    at com.sun.tools.xjc.reader.internalizer.Internalizer.buildTargetNodeMap(Internalizer.java:262)
    at com.sun.tools.xjc.reader.internalizer.Internalizer.buildTargetNodeMap(Internalizer.java:391)
    at com.sun.tools.xjc.reader.internalizer.Internalizer.transform(Internalizer.java:146)
    at com.sun.tools.xjc.reader.internalizer.Internalizer.transform(Internalizer.java:108)
    at com.sun.tools.xjc.reader.internalizer.DOMForest.transform(DOMForest.java:442)
    at com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:230)
    at com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:94)
    at org.eclipse.persistence.jaxb.dynamic.metadata.SchemaMetadata.getJavaModelInput(SchemaMetadata.java:138)
    at org.eclipse.persistence.jaxb.dynamic.DynamicJAXBContext.initializeFromMetadata(DynamicJAXBContext.java:209)
    at org.eclipse.persistence.jaxb.dynamic.DynamicJAXBContextFactory.createContextFromXSD(DynamicJAXBContextFactory.java:345)
    ... 2 more 
```

我认为原因是重新定义元素，因为当我使用导入或包含时，没关系。请帮我。无法将附件上传到stackoverflow？

# java - 如何让文件下载而不是在浏览器中打开？

> ID：10974734
> 
> 赞同：4
> 
> 时间：2012-06-11T05:10:42.230
> 
> 标签：java, javascript, html, spring-mvc, download

我是一个新手，我希望在用户单击下载选项时下载文件，它在浏览器中打开，而不是像另存为/打开这样的下载选项。在这里，我提到了相同的以及他们建议使用的每个地方

```
Response.AddHeader("Content-disposition", "attachment; filename=" + Name); 
```

但我不知道在哪里以及如何使用。实际上，我从编写的查询中获取 url 值，该查询返回 url 作为存储在 arraylist 中的 bean 的对象之一（该列表还有其他值与 url ）。我将arraylist中的url值作为bean

```
type=.pdf
release date=12/3/08
name=hai.pdf
url=/files/en/soft/doc/docs/hai.pdf 
```

我在我的控制器中得到这个数组列表，就像这样

```
ArrayList details = dao.getdetails(Bean.getNumber()); 
```

并像这样将其传递给视图

```
Map.put("details", details);
modelView.setViewName("details_list");
modelView.addAllObjects(Map);
return modelView; 
```

在jsp中，我迭代了这个数组列表并像这样显示内容

```
Type    name            Release Date            
.txt    hai.pdf     May 21st 2012   Download

.txt    hello.txt   May 21st 2012   Download 
```

对于下载我在jsp中使用过这样的

```
<td colspan="2" valign="top">                           
<a href="${details.Url}"/>
<img src="/images/download.gif" alt="Download" border="0" align="right"></a>
</td> 
```

在这里点击下载它在浏览器中打开。我需要下载它。请帮助我如何使用或处理

```
response.setHeader("Content-Disposition", "attachment;"); 
```

根据我的要求在哪里添加以上内容，或者我是否也可以使用任何 java 脚本。请帮助我解决上述问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:43:58.343

这是一种方法：

1.  创建一个网络[过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)（或[这种方式](http://onjava.com/onjava/2004/03/03/filters.html)）
2.  将此过滤器映射到 PDF URL。
3.  在该`doFilter()`方法中，设置内容下载的响应头。

例子 ：

```
public void doFilter(ServletRequest request, 
   ServletResponse response, FilterChain chain)
   throws IOException, ServletException {

          String name = request.getAttribute("filename");

           response.addHeader("Content-disposition", "attachment; filename=" + name);
           chain.doFilter(request, response);

} 
```

您可以将文件名设置为控制器类中的请求属性 (reqest.setAttribute())

过滤器在 Java Web 堆栈中是相当标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:35:17.493

这取决于浏览器响应的标头。

假设如果标题是 image/png，那么浏览器会显示它。同样，如果您使用 application/octet-stream 发送相同的图像，那么浏览器将强制下载它。

看看[http://en.wikipedia.org/wiki/Byte_stream](http://en.wikipedia.org/wiki/Byte_stream)

在一个项目中，我发现从浏览器发送请求是不同的。

如果您从 Firefox 或 IE 上传图像，那么无论 chrome 将它们上传为 application/octet-stream，它都会将它们上传为 image/png。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T05:15:18.653

只是尝试添加标题

response.setHeader("Content-Type: application/force-download");

# c# - 如何在初始化子项时引用聚合根的属性/字段

> ID：10974735
> 
> 赞同：1
> 
> 时间：2012-06-11T05:10:52.417
> 
> 标签：c#

假设我有两个域类 Order 和 OrderItem，其中 Order 用作包含一个或多个订单项的聚合根。如下：

```
 class OrderItem
    {
        public long LineItemId { get; set; }
        public String ProductId { get; set; }
        public DateTime CreatedDate { get; set; }
    }

    class Order
    {
        public long OrderId { get; set; }
        public DateTime OrderDate { get; set; }
        public String OrderStatus { get; set; }
        public OrderItem[] OrderItems { get; set; }
        public DateTime CreatedDate { get; set; }
    } 
```

现在，在初始化 Order 对象及其行项目时，是否可以在子项目初始化程序中引用或访问聚合的根属性/字段，如下所示：

```
 var order = new Order
        {
            OrderId = 1,
            OrderDate = new DateTime(2012, 6, 1),
            OrderStatus = "OPEN",
            CreatedDate = DateTime.Now,
            OrderItems = new[]
                                {
                                    new OrderItem {
                                        LineItemId = 1,
                                        ProductId = "Orange",
                                        CreatedDate = ??? // Initialize this to order's CreatedDate
                                    },
                                    new OrderItem {
                                        LineItemId = 2,
                                        ProductId = "Pear",
                                        CreatedDate = ??? // Initialize this to order's CreatedDate
                                    }
                                }
        }; 
```

这里的目标是确保 OrderItem 具有与订单相同的时间戳 (CreatedDate) - 到 T -。这可以很容易地实现 - 无需（当然）引入一个额外的变量来保存 CreatedDate？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:40:15.873

您不能在初始化程序中引用父变量，但我认为以下内容可以以类似的方式完成您尝试执行的操作：

```
var order = new Order
{
    OrderId = 1,
    OrderDate = new DateTime(2012, 6, 1),
    OrderStatus = "OPEN",
    CreatedDate = DateTime.Now
};
order.OrderItems = new[]{
    new OrderItem {
        LineItemId = 1,
        ProductId = "Orange",
        CreatedDate = order.CreatedDate
    },
    new OrderItem {
        LineItemId = 2,
        ProductId = "Pear",
        CreatedDate = order.CreatedDate
    }}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:31:18.443

您不能引用正在初始化的对象。出于一个简单的原因，它可以让您轻松创建一个循环。

在您的情况下，您可以通过将订单的创建时间戳移到构造函数中并将 OrderItems 属性更改为

```
public OrderItem[] OrderItems
{
    get
    {
        return this.orderItems;
    }
    set
    {
        this.orderItems = value;
        foreach (var item in this.orderItems)
        {
            item.CreatedDate = this.OrderDate;
        }
    }           
} 
```

并可能将 OrderDate 设为只读。如果你必须有一个无参数的构造函数，你也可以在 OrderDate 中实现 foreach 循环，并用一个私有字段支持它——这样一切都会同步。

为了完整起见，OrderDate 在不使用构造函数时：

```
public DateTime OrderDate
{
    get
    {
        return this.orderDate;
    }
    set
    {
        this.orderDate = value;
        foreach (var item in this.orderItems)
        {
            item.CreatedDate = this.OrderDate;
        }
    }
} 
```

另外，我很确定我会将部分/大部分内容移到构造函数中 - 尤其是时间戳是它的主要候选对象，与 Id 相同，因为这样你可以将它们设置为只读的 public `public OrderId [ get; private set; }`。另外，我建议对 OrderStatus 使用枚举。

# android - 在自定义编辑文本中设置光标位置

> ID：10974739
> 
> 赞同：2
> 
> 时间：2012-06-11T05:11:29.607
> 
> 标签：android

我有一个空的自定义 EditText，我想使用从 ontouch 事件中获得的坐标（x，y）来设置光标位置。无论我触摸哪里，我都应该能够将光标移动到该位置，并且应该能够从那里输入文本。帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:17:13.260

尝试

```
Selection.setSelection (Spannable text, int index); 
```

# android - 在安卓系统中使用谷歌电子表格

> ID：10974740
> 
> 赞同：1
> 
> 时间：2012-06-11T05:11:43.850
> 
> 标签：android, google-sheets

我在一个组织的谷歌电子表格上存储了一堆与村庄相关的健康信息。目前，它是根据每个村庄的一张纸来划分的。我正在创建一个 android 应用程序来访问这些字段并对其进行编辑。需要的另一个功能是我还需要在手机上存储一行的信息，当有移动连接时，它将与谷歌电子表格同步。我一直在尝试使用[http://code.google.com/p/google-spreadsheet-lib-android/](http://code.google.com/p/google-spreadsheet-lib-android/)。有谁知道这是否是最好的选择或者我应该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:40:10.537

您可以在此处获取官方的 Google 电子表格 API [。](https://developers.google.com/google-apps/spreadsheets/)这确实有一些好处，因为它直接来自谷歌，所以你知道你得到了什么。我对 Android 还很陌生，所以我在我早期的一个项目中使用了 GSS 库，我发现它很容易使用，唯一的问题是它自 2011 年 10 月以来没有更新。这意味着它可能是 v1或电子表格 API 的 v2，根据 Google 的说法，这些版本将很快关闭。

> 重要提示：Google 电子表格 API 的第 1 版和第 2 版已于 2012 年 4 月 20 日正式弃用，并将于 2012 年 10 月 20 日关闭。迁移到 v3 应该很简单，因为它包含 v1 和 v2 的所有功能，因此您只需要停止在您的请求中指定 v1 或 v2。我们建议您尽快更新您的应用程序以向 v3 发送请求。

**编辑**：

我刚刚检查了这个库，他引用了查看 API 3.0 版文档，所以它似乎可以使用。

# asp.net - 在动态创建的 CheckBoxList 控件中本地化字符串

> ID：10974744
> 
> 赞同：0
> 
> 时间：2012-06-11T05:12:31.810
> 
> 标签：asp.net, localization, checkboxlist

我在asp.net 4 项目的ascx 用户控件中有一个基本的动态创建的复选框列表。现在，它用于将可能的角色列表（例如，管理员、官员、客户）添加到 checkboxlist 控件，然后用户通过查找这些字符串来检查他们想要应用的角色。

代码如下。

在页面...

```
<asp:CheckBoxList ID="AvailableToRoles" runat="server" CssClass="Labels" 
    RepeatColumns="3"></asp:CheckBoxList> 
```

在 Page_Load 上，它调用一个字符串列表作为数据源。

```
this.AvailableToRoles.DataSource = Contact.GetPossibleRoles();
        this.AvailableToRoles.DataBind(); 
```

然后在连接到按钮的更新中，它调用以下字符串来检查 CheckBoxList 角色并将角色添加到联系人。

```
List<Role> Roles = new List<Role>();

Roles.Add(Role.GetRole("Admin"));
Roles.Add(Role.GetRole("Officer"));
foreach (ListItem c in this.AvailableToRoles.Items)
{
    if (c.Selected)
    {
        if (c.Text != "Admin")
        {
            Roles.Add(Role.GetRole(c.Text.Trim())); 
        }
    }
} 
```

那么现在我需要本地化它。我有全局资源字符串，其中列出了所有可能选择的角色，我需要它以英语、西班牙语、德语和法语向用户显示全局资源，然后在稍后检查时搜索角色而不是资源字符串。

虽然不必从根本上更改代码，但不太确定如何做到这一点。有没有一种简单的方法可以让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:29:09.507

您可以添加一个将角色显示名称（可本地化）关联到角色名称（不会随本地化而改变）的类。然后您可以创建这些并在数据绑定中使用它们。

例如：

```
class DisplayableRole
{
    public string DisplayName { get; set; }
    public string RoleName { get; set; }
} 
```

确保设置 AvailableToRoles 的`DataTextField`和`DataValueField`属性，使值绑定到角色名称，但显示标签绑定到可本地化的显示名称。然后只需添加一个方法（比如 WrapInDisplayableRoles）将您的角色名称列表转换为 DisplayableRole 对象列表并在其上进行数据绑定：

```
this.AvailableToRoles.DataTextField = "DisplayName";
this.AvailableToRoles.DataValueField = "RoleName";
this.AvailableToRoles.DataSource = WrapInDisplayableRoles(Contact.GetPossibleRoles());
this.AvailableToRoles.DataBind(); 
```

然后，不要使用`Text`ListItems 的属性，而是使用它们的`Value`属性。这些将对应于您的 DisplayableRole 对象的 RoleName 值（与语言无关）。

```
foreach (ListItem c in this.AvailableToRoles.Items)
{
    if (c.Selected)
    {
        if (c.Text != "Admin")
        {
            Roles.Add(Role.GetRole(c.Value)); 
        }
    }
} 
```

# java - 迭代器 hasext() 返回 true 但 next() 抛出 NoSuchElementException

> ID：10974745
> 
> 赞同：3
> 
> 时间：2012-06-11T05:12:53.337
> 
> 标签：java, jakarta-ee, iterator

当我调试我的代码时，我发现返回的`hasNext()`方法，但是该方法抛出了 NoSuchElementException。`Iterator``true``next()`

下面是我的代码：

```
 Collection<TradeStock> restBuy=em.createQuery("select t from TradeStock ...t.getResultList();

if(!restBuy.isEmpty())
{
    Iterator itrest=restBuy.iterator();
    while(itrest.hasNext())
    {
        TradeStock ts=(TradeStock)itrest.next();
        x+=ts.getTradeExecutedQuantity();
    }
} 
```

我怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:38:17.927

当您说“调试我的代码”时，您的意思是使用调试器进行调试，就像在 Eclipse 中一样？
如果您的评估表达式（ Eclipse 中的*Expressions*选项卡）包含*itrest.next()*，则调试器会调用*next()*方法并修改 Iterator 的状态，而您的代码不会意识到它。
尝试在不评估*itrest.next()*或使用日志消息的情况下进行调试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:58:31.740

当我重新启动服务器并重新部署我的应用程序时代码工作，所以我猜代码没有错，我无法理解 glassfish 的这种奇怪行为！

# android - 从在 Android 中扩展 AsyncTask 的完整不同类更新 Activity 类

> ID：10974746
> 
> 赞同：0
> 
> 时间：2012-06-11T05:13:18.750
> 
> 标签：android, multithreading, android-asynctask

已经阅读了一些内容，但没有找到我认为可以帮助我解决问题的主题/文章。

在我的 Android 应用程序的一个活动中，我有一个简单的 ListView，其中包含图像的标题和每个需要下载的图像的 ProgressBar。下载这些图像的逻辑是并且必须在一个单独的非活动类中，该类会触发需要在其自己的 AsyncTask 中下载的每个图像。目前，我可以看到我可以一次下载背景中的所有图像，仅此而已。

我想知道如何在进度时更新 ListView（所以我可以完成 10% 等）/完成这些 AsyncTasks 中的每个图像？

我在这里迷路了..我已经做了一些研究并找到了ThreadPoolExecutor，这有帮助吗？任何建议/指南/文章将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:32:08.253

为什么要为 AsyncTask 使用单独的类？

从 Android 文档，

[`AsyncTask must be subclassed to be used.`](http://developer.android.com/reference/android/os/AsyncTask.html)

# ruby - Websockets、em-websocket 和 HAProxy 502 错误

> ID：10974753
> 
> 赞同：1
> 
> 时间：2012-06-11T05:14:20.650
> 
> 标签：ruby, websocket, eventmachine, em-websocket

我正在尝试在端口 80 上运行 webserver 和 websocket 服务器。为此，我使用 HAProxy 使用此配置路由连接：

```
global
    maxconn     4096 # Total Max Connections. This is dependent on ulimit
    nbproc      1
    ulimit-n        65536

defaults
    mode      http

frontend all 0.0.0.0:80
    timeout client 86400000
    acl is_websocket hdr_beg(host) -i live
    acl is_websocket hdr(Upgrade) -i WebSocket

    default_backend www_backend

    use_backend production_socket_backend if is_websocket

backend www_backend

    balance roundrobin
    option forwardfor # This sets X-Forwarded-For
    timeout server 30000
    timeout connect 4000
    server appserver 127.0.0.1:81 weight 1 maxconn 1024

backend production_socket_backend
    balance roundrobin
    option forwardfor # This sets X-Forwarded-For
    timeout queue 5000
    timeout server 86400000
    timeout connect 86400000
    server appserver 127.0.0.1:8083 weight 1 maxconn 1024 
```

我正在使用谷歌浏览器进行测试。在某些机器上我连接得很好，在其他机器上它会给我一个 502 错误并且 em-websocket 记录这个错误：

```
#<EventMachine::WebSocket::HandshakeError: Connection and Upgrade headers required> 
```

如果我停止运行代理并在端口 80 上运行 Web 套接字服务器，它工作正常，这对我来说表明问题出在代理上。我在某处读到 HAProxy 在处理 websockets 时不应在 http 模式下运行，因为升级数据包不是有效的 HTTP，这可能与我看到的问题有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:36:16.837

我现在使用端口 443。将来我将在单独的服务器上运行 Web 套接字来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:21:22.240

是的，尝试更改为 tcp 模式。

我不确定转发带有标题检查的东西是否有效。我的插座在专用端口上。

```
listen websockets
    mode tcp
    bind *:8000
    balance source
    timeout queue 5000
    timeout server 86400000
    timeout connect 86400000
    server thin_web1 x.x.x.x:8000 
```

如果您有多个服务器来保持与同一服务器的套接字连接，源平衡很重要。

# python - python服务器和node.js webclient连接

> ID：10974754
> 
> 赞同：1
> 
> 时间：2012-06-11T05:14:38.143
> 
> 标签：python, node.js

我为 Python 脚本制作了服务器，该脚本打开端口 22222 而不是 http 协议。我的客户是node.js（这个系统是http）。并且客户端已尝试将 python 服务器连接到 22222 端口。`enter code here` 但它没有连接。

例子。

```
HTTP WEB CLIENT(PORT 80) REQUEST MESSAGE -> PYTHON SERVER (PORT 22222)
HTTP WEB CLIENT(PORT 80) <- PYTHON SERVER (PORT 22222) RESPONSE MESSAGE "1"
HTTP WEB CLIENT(PORT 80) <- PYTHON SERVER (PORT 22222) RESPONSE MESSAGE "2"
HTTP WEB CLIENT(PORT 80) <- PYTHON SERVER (PORT 22222) RESPONSE MESSAGE "3"
HTTP WEB CLIENT(PORT 80) <- PYTHON SERVER (PORT 22222) RESPONSE MESSAGE "4"
HTTP WEB CLIENT(PORT 80) <- PYTHON SERVER (PORT 22222) RESPONSE MESSAGE "connection closed"`enter code here` 
```

服务器（不是http协议）和客户端（http）不可能连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:27:54.310

如果您的 Python 服务器不使用 HTTP，则必须使用 Node 的`net`模块而不是 Node 的`http`模块与之通信。HTTP 是一个定义良好的协议（一组关于客户端和服务器如何相互通信的规则），Node 的`http`模块假设您正在与遵守 HTTP 规则的服务器通信。由于您的服务器没有，您需要与只知道如何使用 TCP/IP（Node 的模块为您提供）的客户端交谈`net`，并且您必须自己使其遵循协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:16:26.787

如果双方不使用相同（或至少相似）的协议，则无法正常通信。

# java - ArrayIndexOutOfBoundsException 不管我怎么努力

> ID：10974762
> 
> 赞同：0
> 
> 时间：2012-06-11T05:15:51.387
> 
> 标签：java, arrays

编辑：对于偶然发现这篇文章的人，我通过使用 ArrayList 而不是普通数组来解决我的问题 - 这样做减少了我的代码的三分之一，并使其大部分可重用。感谢所有在下面提供帮助的人。这是我为那些正在寻找的人更新的代码的链接：http: [//pastebin.com/Yh3LVu2H](http://pastebin.com/Yh3LVu2H)

该程序旨在读取文件的行并将它们输出到两个数组 xAxis 和 yAxis - iv 将其拆分为两个文件，因为我将使用 ScreenSizes.java 来构建 GUI。

我在 "System.out.println("X: " + xAxis[index]);" 这一行遇到了异常

ScreenSizes.java 中的代码：

```
package screensizes;
import java.io.*;
import java.util.Scanner;
import java.util.Arrays;
public class ScreenSizes{    

    public String filePath = "/Users/jonny/Documents/UNI/ScreenSizes/xy.txt";

    public static void main(String[] args) throws FileNotFoundException
    {
    ScreenSizes obj = new ScreenSizes();
        obj.run();
    }

    public void run() throws FileNotFoundException {
        GetScreens data = new GetScreens(filePath);
        int noLines = data.countLines();
        int[] xAxis = data.getData('x');
        int[] yAxis = data.getData('y');
    int index = 0;
        while(index<noLines){
        System.out.println("X: " + xAxis[index]);
        index++;
        }
    }
} 
```

来自 GetScreens.java 的代码

```
package screensizes;
import java.io.*;
import java.util.Scanner;
import java.util.Arrays;

public class GetScreens
{

    public int lines;
    public String filePath = "";
    public int[] x = new int[lines];    
    public int[] y = new int[lines];

    public GetScreens(String aFileName) throws FileNotFoundException{
        fFile = new File(aFileName);
        filePath = aFileName;
        try
        {
        processLineByLine();
        countLines();
        }
        catch(FileNotFoundException fnfe)
        {
            System.out.println(fnfe.getMessage());
        }
        catch(IOException ioe)
        {
            System.out.println(ioe.getMessage());
        }
    }

    public final void processLineByLine() throws FileNotFoundException {
        //Note that FileReader is used, not File, since File is not Closeable
        Scanner scanner = new Scanner(new FileReader(fFile));
        try {
            while ( scanner.hasNextLine() ){
                processLine( scanner.nextLine() );
            }
        }
        finally {
            //ensure the underlying stream is always closed
            //this only has any effect if the item passed to the Scanner
            //constructor implements Closeable (which it does in this case).
            scanner.close();
        }
    }

    public int[] getData(char choice){
        if(choice == 'x'){
            return x;
        }
        else{
            return y;
        }
    }

    public void processLine(String aLine){
        //use a second Scanner to parse the content of each line 
        Scanner scanner = new Scanner(aLine);
        scanner.useDelimiter("x");
        if ( scanner.hasNext() ){
           for(int i=0; i<lines; i++){            
                x[i] = scanner.nextInt();
                y[i] = scanner.nextInt();
           }
        }
        else {
            log("Empty or invalid line. Unable to process.");
        }
    }

    public int countLines(){
        try
        {
            BufferedReader reader = new BufferedReader(new FileReader(filePath));
            while (reader.readLine() != null) lines++;
            reader.close();
        }

        catch(FileNotFoundException fnfe)
        {
            System.out.println(fnfe.getMessage());
        }

        catch(IOException ioe)
        {
            System.out.println(ioe.getMessage());
        }
        return lines;
    }

    // PRIVATE 
    public final File fFile;

    private void log(Object aObject){
        System.out.println(String.valueOf(aObject));
    }

    private String quote(String aText){
        String QUOTE = "'";
        return QUOTE + aText + QUOTE;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:18:58.837

您需要根据文件中的记录数重新初始化`int[] x`和。`int[] y`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:19:25.583

在您的`GetScreens`类中，实例变量`lines`被隐式初始化为`0`. 因此，您的`x`和`y`数组的长度为零：没有元素。

因此，当您尝试在其他课程中使用它们时，您将获得`ArrayIndexOutOfBoundsException`.

初始化`lines`为有用的东西。

当你编译你的程序时，请留意以下警告：`The variable _lines_ may not have been initialized`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:20:46.780

```
public int[] x = new int[lines];    
public int[] y = new int[lines]; 
```

和以下一样好：

```
public int[] x = new int[0];    
public int[] y = new int[0]; 
```

在使用它们之前执行此操作：

```
x = new int[countLines()];    
y = new int[countLines()]; 
```

--V

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:57:35.900

@乔尼

在您给出的 processLine 方法中

for(int i=0; i< 行; i++)

{

```
 x[i] = scanner.nextInt();
            y[i] = scanner.nextInt(); 
```

}

但不明白你不能scanner.nextInt（）到x [i]和y [i]背后的逻辑。分配x [i]和y [i]是主要问题

采用

```
 x[i] = Integer.parseInt(scanner.next());

           y[i] = Integer.parseInt(scanner.next()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T06:52:30.977

如果必须使用数组，则必须先用 计算行数`countLines()`，然后用 初始化数组

```
 x = new int[lines];
 y = new int[lines]; 
```

然后你就可以真正开始处理了……

结果是这样的：

```
public GetScreens(String aFileName) throws FileNotFoundException{
    fFile = new File(aFileName);
    filePath = aFileName;
    try
    {
        countLines();
        x = new int[lines];
        y = new int[lines];
        processLineByLine();
    } catch(FileNotFoundException fnfe) {
        System.out.println(fnfe.getMessage());
    }
    catch(IOException ioe) {
        System.out.println(ioe.getMessage());
    }
} 
```

但是这种代码/设计在以后使用时很可能会产生更多错误。我宁愿考虑为您的函数使用返回值。（例如，如果你执行`countLines()`两次，你最终会得到两倍于你在该文件中实际拥有的行......

我认为使用`ArrayList`会使您的代码更加安全。

# php - vb.net通过php将文本添加到mysql数据库

> ID：10974763
> 
> 赞同：0
> 
> 时间：2012-06-11T05:16:10.420
> 
> 标签：php, mysql, vb.net, visual-studio-2010, httpwebrequest

我正在构建一个应用程序，我需要允许用户将大文本（故事）添加到他在服务器中的帐户。

这将像这样完成：

1.  在 vb.net 中开发的用于文章格式的应用程序
2.  使用请求变量将故事传递到 php 页面（因为直接连接到 MySql 服务器可以在应用程序 exe 中显示我的密码）
3.  php 文件将数据存储到数据库。

但现在我得到：`414 error - url too big`。

有什么替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:18:11.400

尝试 http post，修改您的 php.ini 文件以增加其最大大小，但如果它只是文本，我怀疑您会达到其限制，除非故事真的很长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:30:06.670

如果您有权访问 SQL 服务器，请创建一个存储过程和一个仅限于执行该存储过程的用户。然后使用该用户帐户上传数据。

更好的是为每个用户引入用户帐户并在该存储过程中批准凭据，这将避免数据库的匿名垃圾邮件。

# java - 使用 jdom 将值动态设置为 xml

> ID：10974766
> 
> 赞同：0
> 
> 时间：2012-06-11T05:16:27.753
> 
> 标签：java, jdom

我有没有固定格式的 XML 我有以下代码，使用 org.w3c.dom 将值动态设置为相同的 XML。

```
public String generateXML(String[] tags,String[] tagValues,String xmlfilePath){
        String strXML = "";

        try{

            if(tags == null || tagValues == null || xmlfilePath == null){

            }else{

                File file = new File(xmlfilePath);

                if (file.exists()){

                    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                    DocumentBuilder builder = factory.newDocumentBuilder();
                    org.w3c.dom.Document doc = builder.parse(file);

                    NodeList nodeList = doc.getElementsByTagName("*");

                    int k =0;
                    for (int i=0; i<nodeList.getLength(); i++) {

                        Node node = (Node)nodeList.item(i);

                        if(node.getNodeName().trim().equalsIgnoreCase(tags[k])){
                            node.setTextContent(tagValues[k]);
                            k++;
                        }
                    }

                    DOMImplementationLS domImplementation = (DOMImplementationLS) doc.getImplementation();
                    LSSerializer lsSerializer = domImplementation.createLSSerializer();
                    strXML = lsSerializer.writeToString(doc);

                }else{

                }
            }

        }catch (Exception e) {
            e.printStackTrace();

        }

        return strXML;
    } 
```

但它不适用于某些旧版本的 JDK，所以我想对 JDOM 做同样的事情。

这怎么可能 ？每个示例都需要标签名称，但我想创建通用方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:27:58.467

据我所知，这两种方法会做“同样的事情”：

我正在使用 JDOM 1.x，因为您想使用“旧”JDK（我假设是 Java5 之前的版本）......

```
import java.io.File;
import java.io.IOException;
import java.util.Iterator;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.jdom.Document;
import org.jdom.Element;
import org.jdom.JDOMException;
import org.jdom.filter.ElementFilter;
import org.jdom.input.SAXBuilder;
import org.jdom.output.XMLOutputter;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.w3c.dom.ls.DOMImplementationLS;
import org.w3c.dom.ls.LSSerializer;
import org.xml.sax.SAXException;

public class DOMJDOM {

    /**
     * @param args
     * @throws ParserConfigurationException 
     * @throws IOException 
     * @throws SAXException 
     */
    public static String dom(File file, String[] tags, String[] tagValues) throws ParserConfigurationException, SAXException, IOException {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        org.w3c.dom.Document doc = builder.parse(file);

        NodeList nodeList = doc.getElementsByTagName("*");

        int k =0;
        for (int i=0; i<nodeList.getLength(); i++) {

            Node node = (Node)nodeList.item(i);

            if(node.getNodeName().trim().equalsIgnoreCase(tags[k])){
                node.setTextContent(tagValues[k]);
                k++;
            }
        }

        DOMImplementationLS domImplementation = (DOMImplementationLS) doc.getImplementation();
        LSSerializer lsSerializer = domImplementation.createLSSerializer();
        return lsSerializer.writeToString(doc);
    }

    /**
     * @param args
     * @throws IOException 
     * @throws JDOMException 
     */
    public static String jdom(File file, String[] tags, String[] tagValues) throws JDOMException, IOException {
        SAXBuilder saxfac = new SAXBuilder();
        Document doc = saxfac.build(file);

        Iterator<?> it = doc.getDescendants(new ElementFilter());
        int k =0;
        while (it.hasNext()) {

            Element emt = (Element)it.next();

            if(emt.getName().equalsIgnoreCase(tags[k])){
                emt.setText(tagValues[k]);
                k++;
            }
        }

        XMLOutputter xout = new XMLOutputter();
        return xout.outputString(doc);
    }
} 
```

# iphone - 在 iPhone 应用程序中的 UIAlertView 弹出后清空文本字段值

> ID：10974767
> 
> 赞同：1
> 
> 时间：2012-06-11T05:16:28.153
> 
> 标签：iphone, ios, xcode, uitextfield

我有一个文本字段。如果它有错误的值，那么它可能会显示警报值并使文本字段为空，但是当我使用时：

```
textField.text = @""; 
```

在 alertView 之后，我的应用程序挂起并因 EXC_BAD_ACCESS 而崩溃。

但是当我使用它时`textField.text = @"1";`它工作正常，但我希望文本字段为空。我该怎么做呢？

```
-(void)textFieldTextDidChangeClinicMarkup:(UITextField*)tf{

    NSString*test=clinicMarkupTextField.text;

    if([test isEqualToString:@"1"]) {
        NSString*value=@"1";

        appDelegate.clinicalMarkup=value;
    }
    else if([test isEqualToString:@"1.5"]){
        NSString*value=@"1.5";

        appDelegate.clinicalMarkup=value;
    }
    else if([test isEqualToString:@"2"]){
        NSString*value=@"2";

        appDelegate.clinicalMarkup=value;
    }
    else if([test isEqualToString:@"2.5"]){
        NSString*value=@"2.5";

        appDelegate.clinicalMarkup=value;
    }
    else if([test isEqualToString:@"3"]){
        NSString*value=@"3";

        appDelegate.clinicalMarkup=value;
    }
    else if([test length] >=3 || [test floatValue] > 3 || [test floatValue] <1 )  {
        UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Clinic Markup can only be $1, $1.5, $2, $2.5 and $3 " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];

        clinicalMArkupTextfield.text=@"";
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:24:38.900

由于您已将其注册为文本更改通知，因此可能会调用此函数。

```
clinicalMArkupTextfield.text=@""; 
```

当您通过上述行分配空白值时，将再次调用此函数（由于文本更改通知）。现在，您的条件都不满足，因此它将再次出现在 else if 语句中。它可能会陷入无限循环并造成可能的崩溃。

否则，似乎没有什么不妥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T05:25:56.760

使用文本字段委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *finalString = [textfield.text stringByReplacingCharactersInRange:range withString:text];

    if([finalString isEqualToString:@"anything"])
    {
        // Show alertBox......
    }

    return YES;
} 
```

# java - 如何比较两个 java 文件的检查样式？

> ID：10974769
> 
> 赞同：1
> 
> 时间：2012-06-11T05:16:34.343
> 
> 标签：java, coding-style

我想比较两个 java 文件，然后比较之后，我想检查新文件中的新检查样式违规是否比前一个文件。有没有提供这项服务的api？请帮我找到解决方案。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:53:17.747

您可以在这里做的是生成特定文件的检查样式报告，然后进行比较。请看[Checkstyle报告][1]

[1]:[如何生成 Checkstyle 报告？](https://stackoverflow.com/questions/6342211/how-to-generate-checkstyle-reports). 获得报告后，您可以轻松地比较 html/文本文件并生成差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:33:04.060

有很多比较工具。但我个人推荐[Beyond Compare](http://www.scootersoftware.com/)和[WinMerge](http://winmerge.org/)可能会满足你的愿望。

# openerp - openerp 中删除的记录列表

> ID：10974779
> 
> 赞同：1
> 
> 时间：2012-06-11T05:17:38.137
> 
> 标签：openerp

有什么方法可以获取OpenERP**中已删除记录的列表？**我听说openerp记录了删除的记录列表..但我不知道在哪里浏览它..

我正在尝试同步两个数据库。所以我几乎不需要删除记录的模型名称和 ID，这样我就可以从另一个数据库中删除相应的记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T07:31:24.280

您可以基于**base_action_rule**模型制作类似**replication_automated_rule的东西。**在**addons/base_action_rule/base_action_rule.py**中查找代码。

 ******动作规则**将**服务器动作**链接到完成给定条件（由过滤器定义）的对象（给定模型的）。操作规则非常易于使用，即使在管理界面上也是如此。

在**创建**和**更新**时检查对象，但您可以从**base_action_rule**继承并定义对**删除**的检查。**它通过为模型对象的内存表示的创建**和**写入**方法创建自定义包装器来工作，它被告知工作。您需要添加一个基于**_wrap_create的****_wrap_unlink方法并向****_register_hook**添加一行：

 ****```
model_obj.unlink = self._wrap_unlink(model_obj.unlink, model) 
```

**_wrap_create**和**_wrap_update**中的**包装器**方法在执行其正常功能后执行钩子。当您在**_wrap_unlink中定义****包装器**方法时，您应该注意在 unlink 的正常功能之前执行钩子，因为 unlink 会擦除对象并且它对钩子不可用。

 ******此外，您应该定义一个**服务器操作**，为您的复制队列或日志保存必要的数据。

祝你好运 ！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:53:06.597

当您在 openerp 中单击从 UI 中删除时，您可以访问 ORM Menthod`UNLINK`原型 od 方法是：

```
def unlink(self, cr, uid, ids, context=None)
    """
    #Delete records with given ids
    Param cr:  database cursor
    Param uid: current user id
    Param ids: id or list of ids
    Param context:   (optional) context arguments, like lang, time zone
    Return : True
    Raise AccessError:
        if user has no unlink rights on the requested object
        if user tries to bypass access rules for unlink on the requested object
    Raise UserError:

        if the record is default property for other records
    """ 
```

这里 Ids 包含要取消链接的 id 列表，因此在删除之前您可以使用它们。

但是如果记录一旦从 OpenERP 中删除，您将无法访问，因为它们不再在 db 中。

可选的，这里的机制可能有用的是`active`字段。如果您在模型上定义了活动布尔字段，则 OE 中的活动字段是特殊字段，那么如果任何记录设置为活动 false，如果没有特别的努力，您将无法在视图中看到该记录，但棘手的部分是您仍然在表上有活动的记录=False，因此您可以使用域非常轻松地访问它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T05:04:09.740

我得到了答案。

我从 osv.osv继承了**object_proxy类，其中有一个名为****execute**的函数，`def execute(self, db, uid, model, method, *args, **kw):`我只是覆盖了这个函数，如果该方法未链接，那么我将该 record_id 和模型名称保存到数据库中的新表中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:18:58.833

我认为[jam 的建议](https://stackoverflow.com/a/10975584/4794)是您`unlink()`在要复制的任何模型上覆盖该方法，并将删除的 id 记录到单独的表中。然后您的同步过程可以读取并清除该表。

如果您只想复制整个数据库，您还可以研究[数据库级别的复制工具。](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling)**************

# javascript - 如何重新创建每个 tumblr 帖子图标旁边的箭头？

> ID：10974783
> 
> 赞同：0
> 
> 时间：2012-06-11T05:18:42.883
> 
> 标签：javascript, html, css, tumblr

它可以在主页上查看：tumblr.com

我比什么都好奇，因为我通常不会在我的 Web 应用程序中详细介绍这些设计细节。我猜这里使用 javascript 来修改边框会是矫枉过正还是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:58:18.137

Tumblr`.arrow`在帖子 div 中使用了一个小跨度 ( ) 并使用以下 css 定位它：

```
width: 12px;
height: 23px;
background: url("/images/dashboard_master_sprite.png?2") no-repeat -396px -247px transparent;
position: absolute;
left: -11px;
top: 22px; 
```

如您所见，有一个图像（箭头）作为跨度的背景，并且设置了宽度和高度以使跨度可见。

绝对标签允许重叠（尽管实际上并不完全重叠，但定位与外部 div 重叠）并且它被设置为`22px`从顶部`-11px`到左侧，使其从 div 中“弹出”。

使用 javascript 真的会是矫枉过正并且客户端繁重。不要这样做。大多数需要这种东西的网站都使用这种方法，因为它很轻并且可以工作，尽管我个人更喜欢让我的 ui 纯粹是 css/html。

# php - PHP，获取网页内容词

> ID：10974788
> 
> 赞同：0
> 
> 时间：2012-06-11T05:19:36.083
> 
> 标签：php

我正在建立一个推荐其他好网站的网站。

因此，我使用爬虫系统收集了很多网站。

现在，我正在尝试使用 PHP 来区分网站是否有好词。

```
$page_content = file_get_contents($url);
$bad_word = 'damn';

if(strstr($page_content, $bad_word)):
    $result = 'YES';
else:
    $result = 'NO';
endif; 
```

我的代码是这样的。

我使用 Codeigniter 并收到此消息。

```
An Error Was Encountered

Unable to load your default controller. Please make sure the controller specified in your Routes.php file is valid. 
```

它适用于某些网站，但不适用于其他网站。

有没有其他方法可以检索网站的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:34:53.293

我昨天已经回答了类似的帖子，但又来了:) 你可以使用 preg_match() 获得更好的结果。preg_match 不仅仅包含正则表达式。它可以完全满足您的需求。IE：

```
if (preg_match("/bad-word/i", "page written content of many good and bad words")) {
    $result = 'YES';

} else {
     $result = 'NO';

} 
```

“i”表示区分大小写，更多示例请查看 PHP 手册：http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:29:41.060

有些网站需要通过 cURL 提交表单。

# asp.net - GridView 的数值分页

> ID：10974789
> 
> 赞同：1
> 
> 时间：2012-06-11T05:19:41.643
> 
> 标签：asp.net, gridview, custompaging

我正在使用 GridView 来显示数据库中的数据。将 ASP.Net 4.0 与 C# 一起使用。GV 被赋予 DataTable 作为其数据源。我需要在该网格中显示数字分页，用户可以在其中看到“下一个”和“上一个”按钮以及“页码链接”，例如

<< 上一页 1 2 3 ... 下一页 >>

在网格的右上角。有没有办法使用自定义分页或 GV 的任何内置功能来做到这一点？我需要为页码点击处理什么样的事件？谁能指出我正确的方向或代码片段？

谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:25:18.570

```
 `allowpaging="true"` in gridview 
```

然后把你`pagersettings` 写成

```
<pagersettings mode="NumericFirstLast"
            firstpagetext="First"
            lastpagetext="Last"
            pagebuttoncount="5"  
            position="Bottom"/> 
```

[你可以在这里查看详细信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.pagersettings.mode.aspx)

（可选）在服务器端

将您的页面更改逻辑放入`PageIndexChanged`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:24:51.710

1.  将 AllowPaging 属性设置为 true。

2.  设置 GridView.PagerSettings.Mode = PagerButtons.NumericFirstLast

3.  设置 position="Top" 并将以下内容添加到标记中

    ```
    <PagerStyle HorizontalAlign="Right" /> 
    ```

4.  附加到 PageIndexChanged 事件以处理页面数字点击

[这是一个很好的例子。](http://www.west-wind.com/weblog/posts/2007/Aug/18/GridView-and-Paging-Alignment)

您可以在此处找到更多详细信息：http: [//msdn.microsoft.com/en-us/library/5aw1xfh3.aspx](http://msdn.microsoft.com/en-us/library/5aw1xfh3.aspx)

# excel - 将图片和数据从一个excel文件复制到另一个excel文件

> ID：10974793
> 
> 赞同：1
> 
> 时间：2012-06-11T05:20:25.643
> 
> 标签：excel, vb.net-2010, vba

我有一个 excel 文件，其中包含前五行中的图片，然后数据开始。我的工作是将文件原样复制到另一个excel文件中。首先，我打开文件并复制使用的范围。接下来，我将内容粘贴到另一个 excel 文件中。

```
 lobjCurrentWorkSheet.UsedRange.Copy()

 lobjTargetExcelWorkSheet.PasteSpecial(XlPasteType.xlPasteAll) 
```

通过执行上述操作，我只能复制数据而不能复制图片吗？我如何将文件原样复制到另一个文件？

如果我使用`SaveAs`选项并且源文件是密码加密的，那么我的目标文件也将是我不想要的密码加密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:56:40.823

我永远不会推荐使用`UsedRange`

原因：

您的数据可能来自单元格 A1 到 B4，图像在 D1 中。在`UsedRange`这种情况下，将永远是`A1:B4`而不是`A1:F6`

![在此处输入图像描述](../Images/0bb231793ad3d464bdd530480fb2b802.png)

如果要复制图片，请找出工作表的“实际范围”或指定范围

```
lobjCurrentWorkSheet.Range("A1:F6").Copy()
lobjTargetExcelWorkSheet.Paste() 
```

**编辑**：我试图将我的手放在 VB.Net 上，以便我可以给你一个确切的示例代码。我终于做到了：）

看到这个（*这将复制实际范围，而不必指定它。*）

```
 Dim shp As Excel.Shape
    Dim lCol As Integer = 0

    '~~> Loop through all shapes and find the last col of the shape
    For Each shp In lobjCurrentWorkSheet.Shapes
        If shp.BottomRightCell.Column > lCol Then _
        lCol = shp.BottomRightCell.Column
    Next

    With lobjCurrentWorkSheet
        '~~> Find actual last Row
        Dim LastRow As Integer = .Cells.Find(What:="*", _
                     After:=.Range("A1"), _
                     LookAt:=Excel.XlLookAt.xlPart, _
                     LookIn:=Excel.XlFindLookIn.xlFormulas, _
                     SearchOrder:=Excel.XlSearchOrder.xlByRows, _
                     SearchDirection:=Excel.XlSearchDirection.xlPrevious, _
                     MatchCase:=False).Row
        '~~> Find actual last column
        Dim LastColumn As Integer = .Cells.Find(What:="*", _
                    After:=.Range("A1"), _
                    LookAt:=Excel.XlLookAt.xlPart, _
                    LookIn:=Excel.XlFindLookIn.xlFormulas, _
                    SearchOrder:=Excel.XlSearchOrder.xlByColumns, _
                    SearchDirection:=Excel.XlSearchDirection.xlPrevious, _
                    MatchCase:=False).Column

        '~~> Check if we have the correct last columnm
        If LastColumn < lCol Then LastColumn = lCol

        .Range("A1:" & Split(.Cells(, LastColumn).Address,
        "$")(1) & LastRow).Copy()
    End With

    '~~> Copies to the current active cell in lobjTargetExcelWorkSheet
    lobjTargetExcelWorkSheet.Paste() 
```

# php - 检查数据库中的用户名，避免重复

> ID：10974794
> 
> 赞同：0
> 
> 时间：2012-06-11T05:20:26.600
> 
> 标签：php, mysql, database, phpmyadmin

如果存在同名的现有用户，我想查询我的数据库。然后我想发送一个“return false”。但我现在只得到一个felmeddalnde。

> 警告：mysql_num_rows () 期望参数 1 是资源，布尔值

```
function DoInsertNewUser($name, $password) {
    var_dump($name);
    var_dump("inne i databasen");
    //tar kontakt med databasen
    $DBConnection = new DBConnection();
    $DBConnection -> Connect();

    $result = mysql_query("SELECT m_username FROM user WHERE m_username ='$name'");
    $number_of_rows = mysql_num_rows($result);

    var_dump($number_of_rows);

    if ($number_of_rows  > 1) {
        var_dump('Användarnamnet finns redan');
    }
    else 
    {
        //ställer en sql-fråga.
        $sql = "INSERT INTO `user`(`m_username`,`m_password`) VALUES (?,?)";

        $stmt = $DBConnection -> prepare($sql);
        $stmt -> bind_param("ss", $name, $password);
        if ($stmt === FALSE) {

            return false;
        }

        $stmt -> execute();
        // ger resultet.
        while ($stmt -> fetch()) {
            $stmt -> close();
            return true;
        }
        $stmt -> close();
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:31:46.557

您可以只计算拥有该用户名的用户数量。

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Not connected : ' . mysql_error());
 }

$db_selected = mysql_select_db('db_name', $link);
if (!$db_selected) {
   die ('Can\'t use db_name : ' . mysql_error());
}
$result = mysql_query("SELECT COUNT(*) AS count FROM user WHERE m_username ='".$name."'", $link) or die(mysql_error());

$count = mysql_fetch_assoc($result)['count']; 
```

根据需要更新 localhost、mysql_user、mysql_password 和 db_name。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:27:26.483

代替

```
$result = mysql_query("SELECT m_username FROM user WHERE m_username ='$name'"); 
```

和

```
$result = mysql_query("SELECT m_username FROM user WHERE m_username ='$name'") or die(mysql_error()); 
```

# actionscript-3 - 从 Flexicious dataGrid 中删除一行

> ID：10974797
> 
> 赞同：0
> 
> 时间：2012-06-11T05:20:52.673
> 
> 标签：actionscript-3, apache-flex, flex4.5, flexbuilder, flexicious

在 Flex`DataGrid`中，您可以使用删除一行

```
[Objectname].removeSelectedIndex(); 
```

但是 Flexicious 中缺少这个功能`DataGrid`。有没有其他方法/功能可以灵活地删除一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:17:24.240

您不必从数据网格中删除一行。根据 .dataProvider（对象集合）内的元素生成 Datagrid 行

要删除一个“行”，您必须删除 .dataProvider 中的元素。

根据您的 .dataProvider 是什么“类型”，您 <> 能够做到

```
 grid.dataProvider.removeItemAt(index); 
```

查看

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/data/DataProvider.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/data/DataProvider.html)

# php - 使用变量中的数据在 mysql 中创建数据库表

> ID：10974799
> 
> 赞同：0
> 
> 时间：2012-06-11T05:21:51.560
> 
> 标签：php, mysql

如何使用变量中的数据创建同名表？

如果有一个名为 $user_data 的变量，我们访问了 ['username'] 值，如何使用它来创建具有相同值的数据库表，以便每个用户在数据库中都可以拥有自己的表，并且它被命名为与他们在数据库中的用户名相同。

这是链接表的正确方法还是布局数据库数据的最佳方法。表和数据库如何通过共享数据连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:40:41.427

**这是一个非常糟糕的主意。**[在SQL Antipatterns](http://pragprog.com/book/bksqla/sql-antipatterns)书中，实际上有一整章“Metadata Tribbles”关于这个主题（顺便说一句，我的建议，明白了）。

首先，对于用户而言，这将打开您的应用程序以应对额外的注入威胁。简单的一阶和二阶 sql 注入（[在此处](http://www.esecforte.com/blog/second-order-sql-injection/)和[此处](http://st-curriculum.oracle.com/tutorial/SQLInjection/html/lesson1/les01_tm_attacks2.htm)阅读回合）。这会降低您索引数据的能力。

相反，您应该将所有用户详细信息保存在一个（或两个，如果它是一个重度使用站点）表中，并利用外键将用户链接到随后制作的其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:27:50.653

这些方面的东西：

```
mysql_query("CREATE TABLE {$user_data['username']}(id INT NOT NULL AUTO_INCREMENT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:28:05.277

您可以查询表的创建。

```
mysql_connect("localhost", "bill", "3pD]gks*dg");
mysql_select_db("user_db");
mysql_query("CREATE TABLE ".$user_data['username']."(some_text varchar(15), some_int int)"); 
```

在查询的括号内，您应该放置所需的表结构。

# javascript - 如何将幻灯片 shpw 图像对齐到 div 标签内的中心

> ID：10974800
> 
> 赞同：0
> 
> 时间：2012-06-11T05:21:55.507
> 
> 标签：javascript, html, css

我想在我的网页中显示幻灯片，为此我使用了以下代码：

```
<html>
<head>
<style>
#slideshow {
    position:relative;
    height:350px;

}

#slideshow IMG {
    position:absolute;
    top:0;
    left:0;
    z-index:8;
}

#slideshow IMG.active {
    z-index:10;
}

#slideshow IMG.last-active {
    z-index:9;
}
</style>
<script>
function slideSwitch() {
    var $active = $('#slideshow IMG.active');

    if ( $active.length == 0 ) $active = $('#slideshow IMG:last');

    var $next =  $active.next().length ? $active.next()
        : $('#slideshow IMG:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    setInterval( "slideSwitch()", 5000 );
});
</script>
</head>
<body>
<div id="slideshow" align="middle">
    <img src="img/11.jpg" alt="" class="active"  />
    <img src="img/12.jpg" alt="" />
    <img src="img/13.jpg.jpg" alt=""  />
</div>

</body>
</html> 
```

它在我屏幕的左边。但我希望它出现在我网页的中心。

谁能告诉我该怎么做？

谢谢， 问候， Sabyasachi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:40:56.363

在**#slideshow**和**#slideshow IMG**
中进行了一些更改， 我认为不要在 div 中使用**对齐**，vs 显示警告对齐属性已过时

```
<html>
<head>
<style>
#slideshow {
    position:relative;
    height:350px;
    width:500px;
    margin:auto;
}

#slideshow IMG {
    position:absolute;

    z-index:8;
}

#slideshow IMG.active {
    z-index:10;
}

#slideshow IMG.last-active {
    z-index:9;
}
</style>
<script>
function slideSwitch() {
    var $active = $('#slideshow IMG.active');

    if ( $active.length == 0 ) $active = $('#slideshow IMG:last');

    var $next =  $active.next().length ? $active.next()
        : $('#slideshow IMG:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    setInterval( "slideSwitch()", 5000 );
});
</script>
</head>
<body>
<div id="slideshow">
    <img src="img/11.jpg" alt="" class="active"  />
    <img src="img/12.jpg" alt="" />
    <img src="img/13.jpg.jpg" alt=""  />
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:35:21.417

应该是`align="center"`，但即使这样也不正确。您应该将 CSS 用于这种类型，而不是弃用的标签属性：

```
#slideshow {
   text-align: center;
   margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:35:27.397

的`align`属性`<div>`已弃用。

考虑使用`<div style="text-align:center">`，或者失败，在`<center>`标签周围使用`<div>`标签。

尽管如此，正确的`align`属性是`"center"`not `"middle"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:37:24.153

幻灯片似乎对我不起作用，但对于简单的中心对齐，您需要幻灯片上的宽度，然后只需 margin: 0 auto; - 左右自动是这里的诀窍。

像这样：

```
#slideshow {
position:relative;
height:350px;
width:350px;
margin:0 auto;
} 
```

您可以放弃 align="middle" 在 html 中。

# c - 我可以在 C 程序中使用面向对象的头文件吗

> ID：10974801
> 
> 赞同：1
> 
> 时间：2012-06-11T05:22:03.277
> 
> 标签：c, oop

我熟悉 C++ 编程及其面向对象的特性。现在我这些天应该在 C 中工作。我仍然想使用我过去已经准备好的面向对象的头文件（使用类、构造函数、析构函数等）。请帮助我在执行此操作时了解隐藏的事实。虽然程序没有给出语法错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:03:33.053

可以将 C 用于面向对象的编程。我这样做。但是C语言对你没有帮助。

我将讨论使用 C 进行面向对象编程。但请理解我说的是实践，而不是语言内置的任何东西。

在 C++ 中，您可以声明 a `class`，并且它可以具有`public`、`private`和`protected`部分。在 C 中，您可以声明 a `struct`，并且 will 中的所有内容`struct`都是公开的。在 C++ 中， a`class`可以有关联的函数；在 C 中，函数是全局的。（在 C 中，声明的函数和变量`static`对于单个源文件是私有的，但在该文件中是全局的。未声明的函数和变量`static`在整个程序中都是全局的。没有办法将 a 的成员声明`struct`为私有的，尽管您可以自由使用命名约定，清楚地表明某些成员变量是私有的。）

在 C++ 中，您有名称空间，而 a`class`形成了一个名称空间。在 C 中，只有一个全局名称空间。

在 C++ 中，存在运算符重载；不在 C 中。

在 C++ 中，当您将函数声明为成员函数时，编译器会神奇地使`this`指针可用。在 C 中，您可以创建成员函数，但您必须显式地给它们一个等效于`this`指针的参数。

在 C++ 中，编译器会为你安排好所有的构造函数和析构函数。在 C 中，您必须显式调用您的函数。

那么，下面是如何在 C 中进行面向对象编程：

首先，声明一个结构来保存对象中的数据。我建议使用 a`typedef`以便您可以方便地参考它。假设您正在为汽车编写物理模拟器；假设您的 struct 将被`typedef`编辑为 type `CAR`。

现在你编写一个构造函数和析构函数。由于编译器无法帮助您，因此值得努力去做。您不能`~`在析构函数的名称中使用 a。我们将想象您的函数被声明为`CAR *PcarNew();`and `void FreePcar(CAR *pcar);`。

现在你编写成员函数。启动汽车引擎的功能可能是`void StartEnginePcar(CAR *pcar);`. （如果你还有卡车，你可能有一个`void StartEnginePtruck(TRUCK *ptruck);`; 如果你还有公共汽车，你可能有`void StartEnginePbus(BUS *pbus);`; 等等。只有一个全局命名空间。）由于没有`this`指针，第一个参数是对实例的显式引用类（即通过调用构造函数分配的指针）。

请注意，在 C++ 中，您可以有一个名为的对象`c`，它是 的一个实例，`class car`您可以说`c.start_engine()`; C++ 编译器知道你的意思是`start_engine()`来自`class car`. 您可以在 C++ 中拥有任意数量的具有相同名称的函数，每个函数都是不同类的成员，并且 C++ 将使用名称空间来跟踪它们。在 C 中你不会得到类似的东西，而且每个函数名都必须是唯一的。这就是为什么 C 面向对象编程中的函数名称通常在函数名称本身中具有“类”的名称，如`StartEnginePcar()`. （有些人可能只是使用`StartEngineCar()`，或者`CarStartEngine()`我使用一种特定的编码风格，鼓励我在第一个示例中使用的风格。当然，使用你喜欢的任何编码风格。）

（正如下面的评论中所指出的，在 C 中，您可以将函数指针放在结构中并使用`->`运算符调用它，但这最适用于您事先不知道函数将是什么的情况，而不是尝试复制一些面向对象的语法。如果你需要在 C++ 中做类似`virtual`指针的事情，你会在你的“类”中使用函数指针`struct`。）

面向对象编程在 C 中肯定不如在 C++ 中那么好，但我确实认为在 C 中明确遵循 OOP 模型可以帮助您的程序更易于设计和理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T05:23:15.780

[C](http://en.wikipedia.org/wiki/C_(programming_language))不是面向对象的语言。

C 是一种[命令式](http://en.wikipedia.org/wiki/Imperative_programming)（[过程](http://en.wikipedia.org/wiki/Procedural_programming)式）系统实现语言。

假设您有 gcc 编译器，请尝试使用以下选项进行编译：

```
gcc -std=c99 replacewithyoursourcefilename.c -o execProgram 
```

你会看到编译器错误。

是否可以将 C++ 代码重写为纯 C？

我建议您查看 StackOverflow 的 C[标签](https://stackoverflow.com/tags/c/info)以了解有关该语言的更多信息。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T05:25:22.317

不！C 标准是在 C++ 标准之前编写的，因此所有较新的构造都会在 C 中产生语法错误。您可以使用封装 C++ 相关的东西

```
#ifdef __cplusplus 
..
#endif 
```

如果这有助于您应对兼容性问题，则将它们从 C 编译器中隐藏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T05:49:35.240

> 我仍然想使用我过去已经准备好的面向对象的头文件（使用类、构造函数、析构函数等）

所以你的头文件是用 C++ 编写的，使用类，这是 C 语言中不可用的纯 C++ 语法。所以答案是“不，你不能在 C 中使用 C++ 类”。

你可以做的是

*   尝试将你的 C++ 代码封装在一个库中，用一个用 C 编写的 API 包装它。这只有在你正在工作的平台上有一个可用的 C++ 编译器时才有效，但我想你还没有（否则你为什么还要费心呢？ C 在那种情况下？）
*   用 C 重写你的 C++ 类，使用 C 语言元素保持面向对象的风格。[这](http://www.planetpdf.com/codecuts/pdfs/ooc.pdf)是一本完整的在线书籍，如何使用 C 进行面向对象编程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T07:05:42.613

您可以在 StackOverflow 中搜索“mix c and c++”以找到解决方案。

# c - 如何终止已分叉另一个进程的 MPI 程序

> ID：10974803
> 
> 赞同：1
> 
> 时间：2012-06-11T05:22:06.030
> 
> 标签：c, linux, mpi, openmpi

我需要编写一个 MPI 程序，它只需要在不同的集群节点上启动几个进程。这是我的示例代码。

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char *argv[]) {
    int rank, size, nodenamesize;
    char nodename[100];

    MPI_Init(&argc, &argv);

    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Get_processor_name(nodename, &nodenamesize);

    printf("Hello world! I am %d of %d running on %s\n", rank, size, nodename);

    if (rank == 0) {
        system("./Longwait&");
    } else if (rank == 1) {
        system("./AnotherLongWait&");
    }

    MPI_Finalize();
    return 0;
} 
```

它成功启动进程，但 MPI 应用程序不会自行终止。即使在调用 MPI_Finalize() 之后它也会等待；。

这段代码有什么问题？我需要做什么才能让 MPI 程序启动一些其他应用程序，但不应该等待任何事情。

谢谢你，问候，机器人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:53:37.697

延迟的原因是 Open MPI 用于提供 I/O 重定向的机制。提示：使用`system("ls -l /proc/self/fd");`或`system("lsof -c lsof");`来了解在由`system(3)`. 这些描述符由两者保持打开状态，`Longwait`这`AnotherLongWait`使得 MPI 运行时等待它们完成。

这是一个简单的示例，其中包含两个非常简单的示例版本`Longwait`：

版本 1：睡眠 1 分钟

```
#include <unistd.h>

int main (void)
{
    sleep(60);
    return 0;
} 
```

如果你生成这个程序，`system("./Longwait&");`你将不得不等待它首先完成，然后`mpirun`/`mpiexec`也将完成。

版本 2：在休眠前盲目关闭前 20 个文件描述符

```
 #include <unistd.h>

 int main (void)
 {
     int i;

     for (i = 0; i < 20; i++)
         close(i);
     sleep(60);
     return 0;
 } 
```

如果你像以前一样生成这个程序，`mpirun`/`mpiexec`可执行文件将在 MPI 程序退出后不久完成而无需等待。

现在这**不是**一个真正的解决方案 - 随机关闭打开的文件描述符可能会产生不可预知的影响。找出应该关闭哪些描述符既不容易也不可移植。我通常建议不要做你在代码中所做的事情。此外，Open MPI 不可靠地支持具有 InfiniBand 互连的系统上的进程分叉（在幕后`system(3)`使用）。`fork(2)`

# python - Python 是否存在与素数相关的函数库？

> ID：10974805
> 
> 赞同：22
> 
> 时间：2012-06-11T05:22:29.697
> 
> 标签：python, primes

我刚刚实现了[Miller-Rabin-Test](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)和一个用于分解数字的简单函数。两者都可以做得更好，至少 Miller-Rabin-Test 是众所周知的。

那么您能否告诉我是否存在实现此类常见素数函数的 Python 库，或者为什么不存在此类库？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-08-29T16:59:47.627

我刚刚`isprime`从[**SymPy**包](http://sympy.org/)中发现：

```
import sympy
print sympy.isprime(10) 
```

输出：

```
False 
```

* * *

不要与 混淆`prime`，它返回第 n 个素数：

```
import sympy
print sympy.prime(10) 
```

输出：

```
29 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-11T05:34:33.570

[gmpy2](https://github.com/aleaxit/gmpy)支持各种伪素数测试。Miller-Rabin 检验可作为`gmpy2.is_strong_prp()`.

gmpy2 还没有任何分解代码。

免责声明：我是 gmpy2 的维护者。素数测试基于来自[http://sourceforge.net/projects/mpzprp/files/的代码](http://sourceforge.net/projects/mpzprp/files/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T05:34:07.643

我不认为标准库中存在这样一个专门用于素数函数的模块，但当然有很多人编写过素数测试等。

一个面向多精度算术的`is_prime()`库`next_prime()`是[`GMPY2`](http://code.google.com/p/gmpy/). 该[文档](http://readthedocs.org/docs/gmpy2/en/latest/)也可用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T05:36:49.543

如果您正在寻找算法的实现，请查看[Rosetta Code](http://rosettacode.org/wiki/Rosetta_Code)。该网站有许多 Python 实现。您绝对可以根据个人需要拼凑自己的图书馆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-28T17:08:39.620

[Primes-Library-Python](https://github.com/MagikCow/Primes-Library-Python)是一个开发中的 Python 库。适用于基本功能，对于较大的数字非常快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-01T23:19:32.550

我创建了一个包含许多功能的库（请参阅自述文件），但最重要的是它包含 Alpertons ECM 库，因此您可以使用 ipython3 中的 Alperton 引擎（即使在 Android 下的 Termux 下）：

[https://github.com/oppressionslayer/primalitytest/](https://github.com/oppressionslayer/primalitytest/)

只需观看 README 开头的视频，看看使用 Alperton 的 C 库是多么容易。

要使用它，只需使用 from sfactorint import p2ecm from the primality 目录。要访问 Alperton 的 ECM，请执行以下步骤：

```
cd calculators
make
cd .. 
```

就是这样，sfactorint 然后使用 Alpertons ECM SIQS 进行分解。我计划制作一个自动执行 make 步骤的 pip 安装，所以如果你对它感兴趣，请继续关注。

这是一个 60 位数字因子的样本，我在视频中的 Android 上以大致相同的速度执行相同的操作：

```
In [22]: import time   
    ...: start = time.time()   
    ...: print(p2ecm(632459103267572196107100983820469021721602147490918660274601))   
    ...: end = time.time()   
    ...: print(end-start)    
    ...:                                                                                                                                                       
[650655447295098801102272374367, 972033825117160941379425504503]
5.197108030319214 
```

# editplus - 仅从 HTML 中获取文本部分

> ID：10974810
> 
> 赞同：1
> 
> 时间：2012-06-11T05:23:23.963
> 
> 标签：editplus

我在 EditPlus 中打开了一个 HTML 页面。我想从中删除所有 HTML 标记，即所有 <> 标记，这样我只剩下文本部分。我需要放置什么正则表达式来删除这些。我试过 < .> 因为 . 表示任何字符，但它不起作用。有人能建议我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:35:13.290

您可以使用此正则表达式查找所有 HTML 标记

```
<([A-Z][A-Z0-9]*)\b[^>]*>(.*?)</\1> 
```

并替换为`$2`

# facebook - 通过图 API 查询 Facebook 用户的好友

> ID：10974811
> 
> 赞同：1
> 
> 时间：2012-06-11T05:23:47.247
> 
> 标签：facebook, facebook-graph-api

我正在尝试在 iOS 应用程序中实现一个搜索栏，该搜索栏搜索用户的朋友并显示结果。我不想让所有用户都使用[https://graph.facebook.com/me/friends](https://graph.facebook.com/me/friends)然后搜索结果。是否可以向此类呼叫添加查询（例如[https://graph.facebook.com/me/friends?q=TIM](https://graph.facebook.com/me/friends?q=TIM)）？使用图 API 的搜索功能似乎只能公开搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:59:37.877

您可以使用 FQL：

```
SELECT uid, username, first_name, last_name FROM user WHERE uid IN
  (SELECT uid2 FROM friend WHERE uid1 = me()) AND first_name = 'tim' 
```

虽然不可能进行显式通配符搜索，但也不支持 LIKE 运算符。但是您可以使用该`strpos`功能来伪造它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:23:58.463

正如您在 Graph API Explorer 中看到的，您无法通过 Graph API 搜索好友列表， [https://developers.facebook.com/tools/explorer?method=GET&path=me /friends?q=Philip](https://developers.facebook.com/tools/explorer?method=GET&path=me/friends?q=Philip)

您可以简单地获取所有朋友的列表，
然后在`for`用于打印结果的循环中，您可以搜索用户名/或 ID。

一个简单的例子：

```
FB.api('/me/friends/', function(response) {
    if (response) {
        for (var i=0, l=response.data.length; i<l; i++) {
            var friend = response.data[i];
            if(friend.name === 'Philip') {
                alert('Philip Found!');
            }
        }
    }
}); 
```

# c - 这里的“点”是什么意思？

> ID：10974813
> 
> 赞同：4
> 
> 时间：2012-06-11T05:24:24.400
> 
> 标签：c

在一些内存分配中，我发现了这一点。但我不明白。

```
char * mem_alloc()
{   
    char *point;
    char *a;
    point = (char *)malloc(block_num);

    a = *(char**) point;
    return a;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T06:48:20.890

> `char * mem_alloc()`

以我的经验，返回指针的函数几乎总是程序设计有缺陷的标志。这样的指针可以指向以下内容：

*   局部变量（公然错误，UB）
*   全局/静态（糟糕的程序设计，也不是线程安全的）
*   动态内存（糟糕的程序设计，使用内存的代码应该处理分配，泄漏的可能性很大）
*   或传递给函数的参数之一（糟糕的程序设计，晦涩的函数接口）

在这种情况下，它指向动态内存，因此我们可能会假设程序设计不佳并且可能存在内存泄漏。

> `point = (char *)malloc(block_num);`

这段代码意味着编写它的人对 malloc 的工作方式和 void 指针的工作方式感到困惑。malloc 的结果不应该进行类型转换，请参见[this](http://c-faq.com/malloc/mallocnocast.html)和[this](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)。类型转换的冲动意味着程序员对 C 语言感到困惑，和/或他们试图在 C++ 编译器上编译 C 代码。

“block_num”是可疑的，如果这是一个全局的、非常量的变量，那么程序设计很差。

> `a = *(char**) point;`

这意味着，获取指向堆上未初始化内存的点的地址，然后假设该点是一个指向指针的指针，从而将堆的垃圾内容视为指针。然后将该指针返回给调用者，该指针指向 la-la 土地中的一个随机位置。在这样做的同时，会造成内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:32:19.673

这似乎设置了一个指向点的值（这是一个地址）。
`a = *(char**) point;`
上面的语句是类型转换指向 - `(char**) point' 部分中的“pointer to a pointer”。在此之后，您将 * 用于取消引用，将其更改
为（指向指针的指针）
=> 指针的值。
因此，存储在 point 中的值（而不是地址）被复制到 a 中。
我仍然不确定为什么要编写这种代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:34:10.903

您发布的代码很愚蠢-您确定它是完整的吗？

“point”和“a”都是指针。

"a" 被初始化为 "point" ...但 "point" 完全是*uninitialized*。如果调用者试图使用返回值“a”，就会发生不好的事情。

这是另一个例子：

```
struct Point {
  int x;
  int y;
};

...

char * mem_alloc (int size)
{
  return (char *)malloc (size);
}

...
  Point *my_point = (Point *)mem_alloc (sizeof (struct Point));
  ... 
```

这个片段也很愚蠢......但希望它说明了你正在查看的代码背后的一些基本原理......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:40:40.793

`a`包含存储在 指向的位置的值`point`。由于`point`未初始化，它指向一个包含随机值的随机位置，因此现在`a`指向它开始的随机值。

所以代码是无操作的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T08:25:12.553

如果你看 的概念`malloc`，它总是返回分配的内存空间的基地址，`malloc`函数的实际语法是语法：

```
pointer_to_store_base_add_of_mem = (data_type_of_allocated_memory)malloc(size_of_array) 
```

在上面的示例中，您已经分配了内存的字符类型，因此您使用了 (char*)，并且在 block_num 中您已经给出了字符数组的大小，并且点指针存储了分配内存的基地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T10:37:43.557

查看在 Lundin 的回答的评论中发布的代码 chenyoufu123：

```
ptr = (char *)malloc(block_num * size);
for(k=0; k<block_num-1; k++) {
    *((char **)(ptr + k*size)) = ptr + (k+1) * size;
}
*((char **)(ptr + k*size)) = NULL; 
```

那仍然是糟糕的代码，但与问题中的原始代码相比并非完全没有意义。特别是与它用于从另一个评论创建链接列表的注释一起。

情况是——假设代码是“正确的”——你有一个

```
struct Node
{
    struct Node *next;
    /* More members */
}; 
```

和`size_t size = sizeof(struct Node);`（名称可能会有所不同）。然后

```
ptr = (char *)malloc(block_num * size); 
```

`block_num`为连续`struct Node`的 s分配内存。人们通常会将其分配为

```
struct Node *ptr = malloc(block_num * sizeof *ptr); 
```

循环

```
for(k=0; k<block_num-1; k++) {
    *((char **)(ptr + k*size)) = ptr + (k+1) * size;
}
*((char **)(ptr + k*size)) = NULL; 
```

`k * sizeof(struct Node)`然后将内存块开头后面的地址重新解释`ptr + k*size`为指向指针的指针（a `char**`，但在当今的大多数 PC 体系结构中，这并不重要，因为所有对象指针都具有相同的表示形式 - 如果它很重要，则代码被破坏无论如何）并将下一个`sizeof(struct Node)`大小的内存块的地址写入该位置。由于`next`指针是 的第一个成员，因此将列表中`struct Node`下一个的地址写入当前的指针。最后，最后的指针设置为。`struct Node``next``struct Node``next``struct Node``NULL`

通常的写法，

```
struct Node *ptr = malloc(block_num * sizeof *ptr);
int k;
for(k = 0; k < block_um - 1; ++k)
{
    ptr[k].next = &ptr[k+1]; // or ptr + (k+1), if you prefer
}
ptr[block_num-1].next = NULL; 
```

不仅更清晰，它还具有在具有不同大小或表示的平台`char*`上工作的优势。`struct Node*`

# javascript - jquery对不同事件的相同功能

> ID：10974814
> 
> 赞同：-1
> 
> 时间：2012-06-11T05:24:31.537
> 
> 标签：javascript, jquery

我的代码是这样的

```
 $(document).ready(function(){     
        nodeClick(elm = '');   
    });

function nodeClick()
{ 
    if(elm != ''){
        var obj = '';
    }else{
        obj = $('.hitarea')
    }

    obj.live('click',function(){   
    $(this).addClass('something');
    $(this).attr('something',1);
    //lots of this reference are here

    });

} 
```

如果 elm 变量为空，我需要自动调用 click 函数，即不点击。如何在不点击的情况下触发该函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:26:40.923

函数 nodeclick 不接受任何参数并且您传递它。在其中添加参数，然后像这样在调用中传递它。

```
 $(document).ready(function(){     
     elm = '';
        nodeClick();   
    });

function nodeClick(elm)
{ 
    if(elm != ''){
        var obj = '';
    }else{
        obj = $('.hitarea')
    }

    obj.live('click',function(){   
    $(this).addClass('something');
    $(this).attr('something',1);
    //lots of this reference are there are

        /****
          if elm variable is empty i  need to call these function automatically ie        with out click.how can i trigger that function with out click
       ******/
    });

   obj.click(); //You can call click event handler like this

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:30:11.033

我对措辞很困惑，但要触发`click`事件，请使用`.trigger()`：

```
obj.trigger('click'); 
```

# jquery - 鼠标悬停时保持增加或减少css“左”值

> ID：10974821
> 
> 赞同：1
> 
> 时间：2012-06-11T05:25:29.173
> 
> 标签：jquery, css, slider

这与 Netflix 的画廊滑块非常相似。在将鼠标悬停在箭头上时，我想通过增加或减少其 left 属性来将 div#galleryImages 向左或向右移动，并不断增加，直到鼠标移出。本质上这是我想做的，但我不确定如何：

```
 $(".goRight").mouseover(function() {
        $("galleryImages").css('left', keep decreasing)  
    }

    $(".goRight").mouseover(function() {
        $("galleryImages").css('left', keep increasing)
    } 
```

谢谢，这是小提琴：

[http://jsfiddle.net/exxDW/5/](http://jsfiddle.net/exxDW/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:29:51.640

您将增加和减少应用于 .goRight 类。我认为应该是 .goLeft

```
var pos = 400;

$(".goRight").mouseover(function() {
    pos+=20;
    $("galleryImages").css('left', pos)  
}

$(".goLeft").mouseover(function() {
    pos-=20;
    $("galleryImages").css('left', pos)
} 
```

# wordpress - 我们可以在 Wordpress 的帖子下嵌套帖子吗

> ID：10974825
> 
> 赞同：1
> 
> 时间：2012-06-11T05:26:01.317
> 
> 标签：wordpress, wordpress-theming

我们可以将 Post 设为 Wordpress 中另一个帖子的父级吗？就像我们为 Page 即 Page Parent 所做的那样。或者这只能通过定制来完成。

如果已经存在某些功能或某些解决方案，请发布链接。我在谷歌上搜索过，但没有找到类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:34:47.683

不，你不能。但是**为了做到这一点，你有类别**。

例如，使用分层结构，您可以为任何类别制作不同的模板，或者**简单地制作类别父级和其他子级，并且通过这种分层结构，您可以获得帖子父级和他的子级**。

这个问题有一个先前的线程：[https ://wordpress.stackexchange.com/questions/36300/can-posts-have-parents](https://wordpress.stackexchange.com/questions/36300/can-posts-have-parents)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:54:58.323

与定制？是的，它可以，但很多。好吧，基本上帖子和页面共享同一个数据库表，所以帖子也可能有父级。但是你必须考虑如何在表上添加父ID，如何从数据库中获取父帖子/子帖子数据，如何设计子帖子的重写规则等。

但同样，它可以通过大量的工作和努力来完成。

建议你坚持用pages，自然是可以嵌套的

# jquery - 在使用 Jquery UI 时设置内容部分在加载时隐藏

> ID：10974826
> 
> 赞同：0
> 
> 时间：2012-06-11T05:26:12.427
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在尝试使用 JQuery UI 选项卡功能 [http://jqueryui.com/demos/tabs/collapsible.html](http://jqueryui.com/demos/tabs/collapsible.html) 但默认情况下，即使我们没有单击任何选项卡，我们也可以看到内容。如何将其设置为在页面加载时隐藏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:29:51.050

尝试这个

```
$( ".selector" ).tabs( "option", "selected", -1 ); 
```

有关更多信息，请参阅[此](http://jqueryui.com/demos/tabs/#option-selected)

# c++ - 等待线程直到条件发生

> ID：10974829
> 
> 赞同：30
> 
> 时间：2012-06-11T05:26:29.533
> 
> 标签：c++, multithreading, simulator

我想等待在同时模拟器中执行的2个线程中的一个线程，直到条件发生，可能是在模拟器中运行程序1000个或更多周期后发生的条件，在条件发生后等待的线程再次执行，我该怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-11T06:08:40.483

你需要条件变量。

如果您的编译器支持`std::conditional`C++11 引入的，那么您可以查看详细信息：

*   [std::condition_variable（C++11 线程）](http://en.cppreference.com/w/cpp/thread/condition_variable)

如果您的编译器不支持它，并且您使用的是 win32 线程，请查看以下内容：

*   [条件变量（Win32 线程）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682052(v=vs.85).aspx)

这是一个完整[的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686903(v=vs.85).aspx)例子。

如果您使用 POSIX 线程，请查看以下内容：

*   [条件变量（POSIX 线程）](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)

* * *

你可以在这里看到我`conditional_variable`使用 win32 原语的实现：

*   [生产者-消费者并发阻塞队列的实现](https://codereview.stackexchange.com/questions/12052/implementation-of-concurrent-blocking-queue-for-producer-consumer)

向下滚动，先看看它的实现，再看看并发队列实现中的用法。

条件变量的典型用法是：

```
//lock the mutex first!
scoped_lock myLock(myMutex); 

//wait till a condition is met
myConditionalVariable.wait(myLock, CheckCondition);

//Execute this code only if the condition is met 
```

where`CheckCondition`是检查条件的函数（或函子）。*当它被虚假*唤醒时，它被`wait()`函数内部调用，如果条件尚未满足，则函数再次休眠。在睡觉之前，*原子地*释放互斥锁。*`wait()``wait()`*

 *** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T06:14:36.973

如果你没有 C++11，但你有一个支持 POSIX 线程的系统，那么你可以使用条件变量。还有其他选择，但考虑到您描述问题的方式，条件变量可能是最直接的。

pthread 条件变量与互斥锁一起使用。条件变量的技巧是等待它会导致获取的互斥锁被释放，直到等待调用返回，此时互斥锁再次被获取。顺序是：

*   获取互斥锁
*   而 PREDICATE 不正确
    *   等待条件变量
*   做关键部分的工作
*   如果 PREDICATE 为真
    *   信号条件变量
*   释放互斥锁

如果多个线程进入上述相同的关键部分，则使用信号步骤。

如果不同的线程可以访问同一个互斥体以修改影响 PREDICATE 的状态，则该线程应检查是否需要向任何人发出信号。

*   获取互斥锁
*   做关键部分的工作
*   如果 PREDICATE 为真
    *   信号条件变量
*   释放互斥锁

感兴趣的 POSIX 命令是：

```
pthread_mutex_init()
pthread_mutex_destroy()
pthread_mutex_lock()
pthread_mutex_unlock()
pthread_cond_init()
pthread_cond_destroy()
pthread_cond_wait()
pthread_cond_signal() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-12T18:33:04.170

使用 Semaphore 发送信号。示例（应用程序清理退出）如下：

在标题中声明

```
static sem_t semPrepareExit;            //declaration 
```

在源（主线程）中；

```
sem_init(&semPrepareExit, 0, 0);        ///semaphore initialized
...
///now wait for the signal on the semaphore, to proceed hereforth
sem_post(&semPrepareExit);
/// cleanup ahead
... 
```

在源代码中，（衍生线程）；

```
...
sem_post(&semPrepareExit); 
```

现在，只要您使用“sem_post”在信号量上发出信号。主线程将在等待节点/点接收信号，然后继续。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-30T10:05:09.603

尝试这样的事情：

```
class CmyClass
{
   boost::mutex mtxEventWait;
   bool WaitForEvent(long milliseconds);
   boost::condition cndSignalEvent;
};

bool CmyClass::WaitForEvent(long milliseconds)
{
   boost::mutex::scoped_lock mtxWaitLock(mtxEventWait);
   boost::posix_time::time_duration wait_duration = boost::posix_time::milliseconds(milliseconds); 
   boost::system_time const timeout=boost::get_system_time()+wait_duration; 
   return cndSignalEvent.timed_wait(mtxEventWait,timeout); // wait until signal Event 
} 
```

// 所以为了等待然后调用 WaitForEvent 方法

```
WaitForEvent(1000); // it will timeout after 1 second 
```

// 这就是事件的信号方式：

```
cndSignalEvent.notify_one(); 
```**

# java - java:打印出Jframe

> ID：10974830
> 
> 赞同：0
> 
> 时间：2012-06-11T05:26:29.587
> 
> 标签：java, swing, printing, netbeans-7

我想从 jFrame 中打印出来，我可以使用 printutility 和所有必需的打印。现在我的问题是如何将 jFrame 发送到打印机以打印出 jFrame？

是否可以从 jFrame 或任何其他解决方案中打印出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:59:13.537

有用的网址..

**1.**[打印 JFrame + 它的内容](http://www.java-forums.org/awt-swing/24976-printing-jframe-s-content.html)
**2.**[打印 jFrame](http://www.java-forums.org/awt-swing/27231-print-jframe.html)
**3.**[高级打印](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/advprint.html)
**4.**[打印 Swing 组件](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-Printing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:35:47.477

您应该通过将组件绘制到图像来获取 JFrame 的图像，然后使用[java.awt.print](http://docs.oracle.com/javase/7/docs/api/java/awt/print/package-summary.html) API 将图像发送到打印机。

```
public static BufferedImage takeScreenshot(Component comp) {
    BufferedImage image = new BufferedImage(comp.getWidth(), comp.getHeight(), BufferedImage.TYPE_INT_RGB);
    component.paint(image.getGraphics());
    return image;
} 
```

# iptables - iptables... 出了点问题

> ID：10974831
> 
> 赞同：0
> 
> 时间：2012-06-11T05:26:29.953
> 
> 标签：iptables

我编写了这些 iptables，但启动服务后无法使用浏览器。

```
iptables --flush 
iptables --policy INPUT DROP 
iptables --policy OUTPUT DROP
iptables -A INPUT -p tcp -d 192.168.2.112 --dport 5900 -j ACCEPT 
iptables -A OUTPUT -p tcp -s 192.168.2.112 --sport 5900 -j ACCEPT 
iptables -A INPUT -p tcp -d 192.168.2.112 --dport 80 -j ACCEPT 
iptables -A OUTPUT -p tcp -s 192.168.2.112 --sport 80 -j ACCEPT 
iptables -A INPUT  -p tcp --sport 1024:65535 -d 192.168.2.112 --dport 21 -j ACCEPT
iptables -A OUTPUT -p tcp -s 192.168.2.112 --sport 21 --dport 1024:65535 -j ACCEPT 
iptables -A INPUT  -p tcp --sport 1024:65535 -d 192.168.2.112 --dport 20 -j ACCEPT 
iptables -A OUTPUT -p tcp -s 192.168.2.112 --sport 20 --dport 1024:65535 -j ACCEPT 
iptables -A INPUT -p tcp --sport 1024:65535 -d 192.168.2.112 --dport 1024:65535 -j ACCEPT 
iptables -A OUTPUT -p tcp -s 192.168.2.112 --sport 1024:65535 --dport 1024:65535 -j ACCEPT 
```

端口 5900 是因为我在远程实验室工作

我在过去的 2 个小时里寻找我的防火墙可能出现的问题，但找不到任何东西。

我在想也许顺序是错误的。我可能应该重写所有这些，但我需要遵循不同的顺序。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:31:05.250

您需要允许来自端口 udp/tcp 53 (DNS) 的流量。没有它们，您将无法将名称解析为 IP。

# c++ - 是否可以为 Qt 中的每种语言编译单独的应用程序？

> ID：10974835
> 
> 赞同：2
> 
> 时间：2012-06-11T05:27:08.163
> 
> 标签：c++, qt, localization, projects-and-solutions

所以我为`N`语言创建了翻译（使用 Qt linguist）。我想将我的应用程序编译成`N`与前缀不同`_en_US`或`_fr_FR`嵌入到每个翻译字符串中的应用程序。此外，我想保留一个版本的应用程序，它将自动确定当前平台语言，其中包含所有翻译版本。我应该如何更改我的`.pro`文件以达到这样的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:20:27.033

我认为嵌入所有翻译并在运行时决定加载哪个翻译要容易得多。也许您可以提供一个命令行开关或一个选项来覆盖系统区域设置。您甚至不必将它们嵌入到可执行文件中，您可以将它们发送到“翻译”目录中。要在运行时获取系统语言环境，您可以使用[QLocale](http://qt-project.org/doc/qt-4.8/qlocale.html)类：

```
Application application(argc, argv);

QString locale = QLocale::system().name();
QString translationsDir = ":/translations";

QTranslator appTranslator;
QTranslator qtTranslator;

appTranslator.load(locale, translationsDir);
qtTranslator .load("qt_" + locale,
                    QLibraryInfo::location(QLibraryInfo::TranslationsPath));

application.installTranslator(& appTranslator);
application.installTranslator(& qtTranslator); 
```

无论如何，如果你真的想以你的方式做，你可以依靠环境变量`LANGUAGE_ID`来检测要在你的构建中嵌入什么语言，然后为每种可用语言重建你的项目。这可能需要很多时间，但也许您只能在最终构建时这样做。

这是一个例子：

```
#include <iostream>

int main(int argc, char *argv[])
{
#ifdef EMBED_ONLY_ONE_LANGUAGE
    std::cout << "Embedded language is " << LANGUAGE_ID << std::endl;
#elif EMBED_ALL_LANGUAGES
    std::cout << "Embedded all languages" << std::endl;
#else
    std::cout << "What???" << std::endl;
#endif
} 
```

这是 .pro 文件：

```
TEMPLATE = app
DEPENDPATH += .
INCLUDEPATH += .
TARGET = SomeName

CONFIG -= qt
CONFIG += console

# Input
SOURCES += main.cpp

# It seems that "equals" does not work with environment variables so we
# first read it in a local variable.
LANGUAGE_ID=$$(LANGUAGE_ID)

equals(LANGUAGE_ID,) {
    # No language id specified. Add the build instructions to embed all the
    # translations and to decide at runtime which one to load.
    message(No language id specified)

    # This adds a preprocessor variable so that the program knows that it has
    # every language.
    DEFINES *= EMBED_ALL_LANGUAGES
} else {
    # A language id was specified. Add the build instructions to embed only
    # the relative translation.
    message(Specified language id: $$LANGUAGE_ID)

    # This adds a preprocessor variable LANGUAGE_ID whose value is the language.
    DEFINES *= LANGUAGE_ID=\\\"$$LANGUAGE_ID\\\"

    # This adds a preprocessor variable so that the program knows that it has
    # only one language.
    DEFINES *= EMBED_ONLY_ONE_LANGUAGE

    # This renames the executable.
    TARGET=$${TARGET}_$$(LANGUAGE_ID)
} 
```

它利用了未记录的[测试功能`equals`](http://www.qtcentre.org/wiki/index.php?title=Undocumented_qmake#Test_functions)。请注意，如果您更改环境变量的值，`LANGUAGE_ID`您必须再次运行 qmake（可能在删除 Makefile 之后）。

一个（也许更好的）替代方法是使用 CMake 并将语言 id 指定为 CMake 的命令行变量：

```
cmake_minimum_required(VERSION 2.6)
project(SomeName)

set(SOURCES main.cpp)

add_executable(SomeName ${SOURCES})

if(${LANGUAGE_ID} MATCHES "[a-z][a-z]_[A-Z][A-Z]")
    # A language id was specified. Add the build instructions to embed only
    # the relative translation.
    message("Embedding language ${LANGUAGE_ID}")

    # This adds a preprocessor variable LANGUAGE_ID whose value is the language.
    add_definitions("-DLANGUAGE_ID=\"${LANGUAGE_ID}\"")

    # This adds a preprocessor variable so that the program knows that it has
    # only one language.
    add_definitions("-DEMBED_ONLY_ONE_LANGUAGE")

    # This renames the executable.
    set_target_properties(SomeName PROPERTIES OUTPUT_NAME "SomeName_${LANGUAGE_ID}")

else(${LANGUAGE_ID} MATCHES "[a-z][a-z]_[A-Z][A-Z]")
    # No language id specified. Add the build instructions to embed all the
    # translations and to decide at runtime which one to load.
    message("Not embedding any language")

    # This adds a preprocessor variable so that the program knows that it has
    # every language.
    add_definitions("-DEMBED_ALL_LANGUAGES")

endif(${LANGUAGE_ID} MATCHES "[a-z][a-z]_[A-Z][A-Z]") 
```

# ios5 - 如何在 iOS 5 中实现类似 Tab 栏的 Twitter

> ID：10974847
> 
> 赞同：0
> 
> 时间：2012-06-11T05:28:57.293
> 
> 标签：ios5, twitter, uitabbar

当前版本的 Twiiter 有一个标签栏，如下所示。

![在此处输入图像描述](../Images/17258d9f561ac87748888c155bad537b.png)

当我选择一个选项卡时，它会将所选选项卡显示为已推送（更深的选项卡）。我想在我的 iphone 应用程序中为 iOS 5 实现相同类型的标签栏。我该如何实现它？非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:39:20.013

您需要自己创建具有更深层次外观的图像并将`selectionIndicatorImage`属性设置在`UITabBar`.

使用 AppDelegate 中的外观代理进行设置可能是最简单的：

`[[UITabBar appearance] setSelectionIndicatorImage:yourImage];`

# apache - 在 RHEL5 中配置 gcc - 在 $PATH 中找不到可接受的 C 编译器

> ID：10974848
> 
> 赞同：2
> 
> 时间：2012-06-11T05:29:00.750
> 
> 标签：apache, gcc, compiler-construction, path, rhel5

我想在 RHEL5 中安装 Apache。配置*httpd-2.4.2*时出现以下错误：

```
配置：错误：在 $PATH 中找不到可接受的 C 编译器

```

所以我下载*了 gcc-4.7.0*并尝试配置它。仍然会出现同样的错误。

```
$ ./配置
检查构建系统类型... x86_64-unknown-linux-gnu
检查主机系统类型... x86_64-unknown-linux-gnu
检查目标系统类型... x86_64-unknown-linux-gnu
检查与 BSD 兼容的安装... /usr/bin/install -c
检查 ln 是否有效...是的
检查 ln -s 是否有效...是的
检查不截断输出的 sed... /bin/sed
检查 gawk... gawk
检查 libitm 支持...是的
检查 gcc ......不
检查抄送...否
检查 cl.exe... 否
配置：错误：在`/home/httproot/gcc-4.7.0'中：
配置：错误：在 $PATH 中找不到可接受的 C 编译器

```

* * *

## 以下是一些状态结果：

*   ```
    gcc --版本
    bash：gcc：找不到命令

    ```

*   ```
    rpm -qi gcc
    包 gcc 未安装

    ```

*   ```
    哪个 gcc
    /usr/bin/which: (/usr/kerberos/sbin:/usr/kerberos/bin:/usr/bin:/bin) 中没有 gcc

    ```

*   ```
    哪里是 gcc
    gcc：/usr/libexec/gcc

    ```

* * *

我不能用`yum`。所以请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-14T12:28:14.140

我无法从以下 URL 找到任何包

[http://rpmfind.net//linux/RPM/centos/5.8/x86_64/CentOS/](http://rpmfind.net//linux/RPM/centos/5.8/x86_64/CentOS/)

终于找到了解决方案：

yum groupinstall "开发工具"

或者

yum install gcc glibc glibc-common gd gd-devel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:49:01.140

感谢所有帮助过我的人。我已经成功地使 gcc 工作。我得到了 gcc 的 rpm 文件和[http://rpmfind.net//linux/RPM/centos/5.8/x86_64/CentOS/](http://rpmfind.net//linux/RPM/centos/5.8/x86_64/CentOS/)

# ios - 如何调试 NSFetchRequest

> ID：10974849
> 
> 赞同：0
> 
> 时间：2012-06-11T05:29:03.853
> 
> 标签：ios, core-data, nsfetchrequest

我在 iOS 上使用 Core Data 并且遇到`NSFetchRequest`.

如果我创建一个`NSFetchRequest`这样的：

```
NSFetchRequest* request = [ NSFetchRequest fetchRequestWithEntityName:@"Recipe"]; 
```

然后创建我的食谱实体的实例，它们按预期出现在获取请求的结果中。但是一旦我保存数据库并尝试重新加载它们，我的 fetch 请求就不会返回任何结果。

数据库保存成功，没有错误，使用 SQLite 数据库浏览器我可以看到我的所有实体都已保存在底层 SQLite 数据库中。但是他们不会加载...

有没有一种简单的方法来诊断引擎盖下发生的事情，`NSFetchRequest`以便我可以找出为什么它不会加载我的实体？

```
// load recipes unsorted
NSFetchRequest* request = [ NSFetchRequest fetchRequestWithEntityName:@"Recipe"];
request.sortDescriptors = [[NSArray alloc] init];

NSFetchedResultsController* frc = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.recipeDatabase.managedObjectContext sectionNameKeyPath:nil cacheName:nil];

// fetch results empty
NSError* error = nil;
[frc performFetch:&error]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:52:08.117

对不起....我发现了我的问题。当`UIManagedDocument`状态为`UIDocumentStateClosed`. 奇怪的是，在对文档进行操作时，其他一切似乎都可以正常工作`managedObjectContext`，即使文档已关闭。

# iphone - 如何在Iphone中调用两个独立的uiview之间的协议？

> ID：10974850
> 
> 赞同：1
> 
> 时间：2012-06-11T05:29:13.670
> 
> 标签：iphone, ios, ios5, uiview

我在一个 UIView 类中声明协议我想在另一个 UIView 类中实现协议方法。但协议方法并没有调用我能做什么。任何人帮助我 ![上传 UIview 类](../Images/4d3b0d3be660e45ada357d161ce795da.png)

![宣言](../Images/844c0c44206bfc3f6cabe04278d11cf0.png)

![在此处输入图像描述](../Images/07f519b6aca243b6f19612e62c0ad7ed.png)

![实现uiview类](../Images/3416cc028e74e53cdf41ef74c7e62ad8.png)

![设置代表尊重的观点](../Images/94186d6dc4a8c9221c290b94ff57f89b.png)

![协议实现](../Images/6ae4ed50046640ef99cf3cdab2ab64cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:04:11.030

你在 UploadView 中调用了委托函数吗？此外，由于它是可选函数，因此您必须在调用之前检查委托是否响应该函数。

```
- (void)yourFunction {
    ...
    if ([self.delegate respondsToSelector:@selector(takeAnotherPhoto:)]) {
        [delegate takeAnotherPhoto:self];
    }
    ...
} 
```

# apache - Apache Rewrite - 重定向通配符子域和处理内部 URL 缩短器

> ID：10974852
> 
> 赞同：5
> 
> 时间：2012-06-11T05:29:27.710
> 
> 标签：apache, mod-rewrite, redirect, seo

我在重定向通配符子域和处理内部 URL 缩短器时遇到问题。

假设我的应用中有一个内部 URL 缩短器

```
example.com/b/ABCDE 
```

那将翻译

```
example.com/book/12345678-the-book-name 
```

引用的脚本`/b/`（我使用可以处理 URL 规则的 PHP 框架）会将短 ID`ABCDE`转换为书的真实 ID `12345678`（以及标题“书名”），然后将其重定向到书的永久 URL`example.com/book/12345678-the-book-name`

因此，每次我在公告板、微博网站或海报或名片等物理媒体上传播有关书籍的链接时，我都会使用短链接 (the `example.com/b/ABCDE`) 而不是永久链接 ( `example.com/book/12345678-the-book-name`)。

`www.example.com`接下来，我需要在维护请求 URI 的同时将所有通配符子域重定向到主域 ( )，例如

```
http://random.example.com/book/11111111-some-book -> http://www.example.com/book/11111111-some-book
http://123456.example.com/book/22222222-another-book -> http://www.example.com/book/22222222-another-book
http://abcdefg.example.com/book/33333333-another-book-again -> http://www.example.com/book/33333333-another-book-again 
```

在我使用的所有规则之后添加以下规则

```
<VirtualHost *:80>
ServerName example.com
ServerAlias *.example.com
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www.example.com [NC]
RewriteRule ^/(.*)$ http://www.example.com/$1 [R=301]
</VirtualHost> 
```

因此，带有 example.com 域且没有前缀的 url 如下所示

```
http://example.com/book/11111111-some-book 
```

将转化为

```
http://www.example.com/book/11111111-some-book 
```

而且，另一个后果是，如果内部 URL 缩短器使用没有前缀的普通域，则需要两次重定向才能解析。例如，

```
http://example.com/b/ABCDE 
```

将首先被重定向到

```
http://www.example.com/b/ABCDE 
```

然后被重定向到

```
http://www.example.com/book/12345678-the-book-name 
```

实际上，我不介意两次重定向。但是我的 SEO 顾问说两次重定向对我网站的 SEO 不利。（我仍然不知道为什么）

所以我尝试将最后一条规则更改为以下

```
<VirtualHost *:80>
ServerName example.com
ServerAlias *.example.com
RewriteEngine on

RewriteCond %{HTTP_HOST} ^example.com [NC]
RewriteCond %{REQUEST_URI} ^/b/(.*)$ 
RewriteRule . index.php [L]

RewriteCond %{HTTP_HOST} !^www.example.com [NC]
RewriteRule ^/(.*)$ http://www.example.com/$1 [R=301]
</VirtualHost> 
```

我不太擅长配置 Apache，但是当我在[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)中模拟上述规则时，它可以工作。但是当我将它应用到我的服务器时，它给了我**400 Bad Request**的`example.com/p/ABCDE`.

所以，我的问题是

1.  我的 SEO 顾问对他的论点是否正确？是否有任何解释可以支持他或是否有相反的论点？
2.  为什么服务器给出**400 Bad Request**？
3.  如何修复重定向？我想维护短 URL（`example.com/b/ABCDE`不带`www`前缀），但仍处于一个重定向中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:58:43.157

## 您是 SEO 顾问吗？

就像 SEO 一样，答案涉及一些猜测和假设，但他可能是对的。

当您重定向页面时，您告诉爬虫忘记初始页面并稍后返回以索引目标页面，这会在您的页面首次介绍给世界和您的页面在搜索中的实际出现之间引入延迟结果。两次重定向意味着您将延迟加倍。根据搜索引擎的“情绪”，这可能会导致您的 SEO 出现显着回归（或者在搜索引擎对重定向进行排序时，您的索引 URL 会出现一些混乱）。

## 为什么会收到 400 响应

如果您查看[RewriteRule](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)的文档，请输入*Inside per-server configuration*

**给定规则** ->**结果替换**
`^/somepath(.*) --> otherpath$1` ：无效，不支持
`^/somepath(.*) --> /otherpath$1`：`/otherpath/pathinfo`

这意味着，在 vhost conf 中，您必须为您的替代提供一个绝对路径（将返回给 Apache 的最后一个，以前的可以是您喜欢的任何内容）。要解决 400 错误：

`RewriteRule . /index.php [L]`

## 如何修复重定向

这将取决于您的 index.php 如何构建其重定向，但设置

```
ServerName www.example.com
UseCanonicalName On 
```

将设置`$_SERVER["SERVER_NAME"]`为`www.example.com`并应导致指向规范域的 URL。

## 潜在配置

```
<VirtualHost *:80>
    ServerName www.example.com
    ServerAlias *.example.com example.com

    UseCanonicalName On
    RewriteEngine on

    #set the document root
    DocumentRoot /path/to/the/app 

    # if something goes wrong, setup logs to track what happens
    # comment these lines when you're done
    ErrorLog /a/path/to/a/log/file

    RewriteLogLevel 5
    RewriteLog /a/path/to/another/log/file

    # I simplified the conditions, those are equivalent to your rules
    # a RewriteRule tries to match against %{REQUEST_URI}
    RewriteCond %{HTTP_HOST} ^example\.com [NC]
    RewriteRule ^/b/ /index.php [L] 

    RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
    RewriteRule ^/(.*)$ http://www.example.com/$1 [R=301]
</VirtualHost> 
```

# java - Batik 1.7 给出无头模式异常：NoClassDefFoundError: gnu/java/awt/peer/headless/HeadlessToolkit

> ID：10974860
> 
> 赞同：0
> 
> 时间：2012-06-11T05:30:15.087
> 
> 标签：java, headless, batik

我正在用 transcoder 实现 Batik-1.7。所以它给出的错误是：

错误：java.lang.NoClassDefFoundError：gnu/java/awt/peer/headless/HeadlessToolkit

谁能建议我如何在无头模式下使用转码器...

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:21:41.863

由于 JAMVM，我无法解决无头包问题。现在我正在使用 librsvg 转换 svg。

谢谢..

# ruby-on-rails-3 - 如何像在 joomla 中一样在 rails 中制作组件或模块？

> ID：10974861
> 
> 赞同：-1
> 
> 时间：2012-06-11T05:30:22.707
> 
> 标签：ruby-on-rails-3

就像在joomla中一样，我想开发管理部分，我们可以在其中安装和卸载模块..但我对此一无所知..任何人都可以建议我如何制作可以通过管理员一键安装和卸载的独立组件管理部分，可以通过前面部分查看。我想在铁轨上做这个。请有人给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:22:06.937

Rails 是一个框架，而不是 CMS。因此，不会有任何与 Joomla 平行的东西！“组件”的概念。

在 Rails-world 中你会发现最接近的东西是引擎。

有关详细信息，请参见此处：http: [//guides.rubyonrails.org/engines.html](http://guides.rubyonrails.org/engines.html)

# android - 使用绑定服务的最佳方式是什么？

> ID：10974865
> 
> 赞同：0
> 
> 时间：2012-06-11T05:30:47.163
> 
> 标签：android, android-service

我的应用程序中几乎没有活动和单一服务。这些活动中的大多数都需要绑定到这个服务并使用它提供的服务。应用程序只有一个入口点，并且该活动绑定到该服务。绑定服务后，我将获取服务实例并将其保存在静态引用中。如果我在其他活动中使用相同的静态引用来利用该服务提供的服务，可以吗？还是我必须从每个想要使用该服务的活动中绑定到该服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:36:42.167

不，您应该更新每个单独的 Activity 以绑定到服务。您不应指望将静态引用保留在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:30:39.367

也许最好从“入口点活动”开始服务，然后在以后需要时将其他活动绑定到服务。

# windows - Windows 资源管理器使用哪些 DLL 文件？

> ID：10974866
> 
> 赞同：1
> 
> 时间：2012-06-11T05:31:04.010
> 
> 标签：windows, shell, dll, dllimport, windows-explorer

我需要知道 Windows Explorer 为项目使用了哪些库（Windows Shell）。是的，它显然使用`shell32.dll`，但其他的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:44:26.567

您可以使用[Dependency Walker](http://www.dependencywalker.com/)查看 Explorer 引用的内容。

# c - CPU架构依赖？

> ID：10974868
> 
> 赞同：0
> 
> 时间：2012-06-11T05:31:39.020
> 
> 标签：c, visual-studio, compilation, cpu, cpu-architecture

我想确定下面的代码是否允许 CPU 获取 unsafe_variable 两次？假设由于 volatile 和 _ReadWriteBarrier（在 VS 上），编译器不会重新排序或优化代码。Mutex 不能在这里使用，我只关心潜在的双重获取的情况。

我不是 CPU 设计方面的专家，但我担心潜在的双重获取是：推测执行（性能优化技术，包括分支预测和预取技术）、寄存器和内存位置重命名以及重新排序缓冲区的使用和在一个或两个 CPU 中存储缓冲区？请让我知道是否可以在这里进行双重取货。

```
int function(void* Data) {
    size_t _varSize = ((volatile DATA *)Data)->unsafe_variable;
    // unsafe_variable is in some kind of shared memory and can change at any time
    _ReadWriteBarrier();
    // this does not prevent against CPU optimisations (MemoryBarrier would)
    if (_varSize > x * y) { return FALSE;}
    size_t size = _varSize - t * q;
    function_xy(size);
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:27:29.073

在 C 标准 C11 5.1.2.3/2 中，访问易失性内存位置算作副作用：

> “访问易失性对象、修改对象、修改文件或调用执行任何这些操作的函数都是副作用”

并且不允许编译器生成导致额外副作用的代码。明确不允许生成导致对 volatile 变量的额外访问的代码 (C11 5.1.2.3/6)。

但是你使用的是 VC++，所以所有的赌注都没有了。它几乎不遵循任何标准。如果可能的话，我建议改用严格遵守的 C 编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:58:11.227

C 语言中没有任何内容指定此级别的内存系统行为，也没有任何关于线程的内容，因此没有确定的答案。

可以肯定的是，您需要 CPU、操作系统和编译器的确切详细信息。

但是，我怀疑任何现代架构都会从内存中获取两次以服务于您提到的任何目的，前提是计算不会中断。第一个之后的任何引用都将被缓存。

但是，如果在`unsafe_variable`fetch 开始之后但`_varSize`可以使用之前存在上下文切换，则可以想象，当该线程继续时，fetch 可能会重新启动。

# c++ - 移动 C++ 项目，atlplus.h 中的错误

> ID：10974871
> 
> 赞同：0
> 
> 时间：2012-06-11T05:32:05.747
> 
> 标签：c++, visual-studio-2010, visual-studio

我正在尝试将旧的 C++ 项目移至 VS2010。

据我所知，编译它的最后一个 VS 版本是 VS2005。我已经修复了一堆错误，但现在我被卡住了，

因为我在 中遇到错误`atlplus.h`，这是一个`VC10 header file`.

```
Error   1   error C2065: 'CStringW' : undeclared identifier C:\Program
 Files (x86)\Microsoft Visual Studio
 10.0\VC\atlmfc\include\atlplus.h   692 1

  Error 2   error C2146: syntax error : missing ';' before
  identifier  'strW'    C:\Program Files
 (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\atlplus.h 692 1

 Error  3   error C3861: 'strW': identifier not found
 C:\Program Files
(x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\atlplus.h  692 1

 Error  4   error C2065: 'strW' : undeclared identifier C:\Program Files
 (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\atlplus.h 693 1 
```

有人有什么主意吗？自上周以来，我一直被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:15:44.907

您需要在任何使用*CString的标头之前包含**atlstr.h*。*CString*已移至*atlstr.h*头文件。

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:08:31.100

我遇到了类似的问题。请尝试包含`atlbase.h`而不是`atlstr.h`.

您可以在文件中看到注释行`atlplus.h`：

```
//Avoid using <atlstr.h> except in the registry templates (for circular dependencies). 
```***

# expression-blend-4 - 如何在表达式混合 4 中删除 UserControl

> ID：10974876
> 
> 赞同：0
> 
> 时间：2012-06-11T05:32:44.857
> 
> 标签：expression-blend-4

我将一个用户控件名称创建为 MYUC，然后我想删除该用户控件。我该怎么做。 ![加州大学](../Images/21d0cc938ecf81d242ca2272a89385fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:26:58.893

也许这个问题比字面上要问的更多？但是，我认为只需删除您正在谈论的 UserControl 即可将其删除。除非这可能是一个诡计问题？

# c# - IIS 上的 WCF 服务不会编译新版本

> ID：10974878
> 
> 赞同：0
> 
> 时间：2012-06-11T05:33:05.850
> 
> 标签：c#, wcf, iis

我有一个 IIS 托管的 WCF 服务。

我想在办公室之外对其进行一些小调整

所以我有远程桌面并对界面和cs文件进行了更改..但是IIS不会重新编译新版本？我也尝试编辑`web.config`文件（只是在其中添加一些行空格）

我在办公室遇到了这个问题，所以我刚刚在 VS 中编译它并将整个目录复制到..

但是IIS不应该在进行更改时对其进行编译，就像对网页一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:35:45.510

> 但是 IIS 是否应该在进行更改时编译它，就像对网页一样？

这取决于您决定使用哪种模式：

*   ASP.NET 网站
*   ASP.NET Web 应用程序（预编译）

`.cs`如果您在创建 Web 服务时选择预编译的 ASP.NET Web 应用程序模式，那么将任何文件部署到您的服务器是毫无用处的。它们永远不会被使用，只会使用`bin`文件夹中已编译的程序集。

就网站模式而言，所有`.cs`文件都进入特殊的`~/App_Code` `folder`.

您可以在 MSDN 上阅读有关[网站和 Web 应用程序项目](http://msdn.microsoft.com/en-us/library/dd547590.aspx)之间差异的更多信息。

# sql - 如何按日期过滤列

> ID：10974882
> 
> 赞同：0
> 
> 时间：2012-06-11T05:33:32.670
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
Id    date 
---   ----------
001   23/01/2012
002   25/01/2012
003 
004   01/02/2012 
```

从`table1`，我想显示`id`日期为空或日期等于当前月份..

健康）状况

*   例如当前月份是`02/2012`指，我想显示 id 003 和 004，因为 003 日期为空，004 日期等于当前月份日期...

*   如果当前月份是`03/2012`，则不应显示 004 日期

如何在 SQL Server 中执行此操作？

预期产出

```
Id     date 
003 
004    01/02/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T08:24:04.697

重要的是使您的查询可搜索，以便可以使用日期列上的索引。因此，形式为 function(date)（其中 function 是年、月或 datepart）的 where 子句是不好的，因为 SQL Server 不能使用日期索引。

相反，您希望构建您的查询，使其具有以下形式

```
select *
from table1
where (date is null) or (date between [STARTOFMONTH] and [ENDOFMONTH]) 
```

顾名思义，DateTime 列有一个 TIME 组件。所以 between 很棘手，因为你想要一直到月底的午夜，但不是午夜到下个月......有些人试图通过从月底减去 3 毫秒来解决这个问题。这很糟糕，而且不是未来的证据。

最好让您的查询看起来像

```
select *
from table1
where (date is null) or ( (date >= [STARTOFMONTH] and date < [STARTOFNEXTMONTH]) ) 
```

如何获得这些值（并与 SQL 2000 兼容......）？一种方法，在我的脑海中，是

```
cast(  floor( cast(dateAdd(d, -1 * day(getDate()) + 1, getDate()) as float ) ) as datetime ) 
```

下个月的开始是通过增加一个月来获得的。这将获取当前日期，减去当前月份经过的天数，然后加 1。然后我们有一个日期/时间等于该月的第一天，但​​仍然具有时间分量。转换为浮动、落地然后转换回日期时间可以解决此问题。

这可以放入标量或内联表 UDF，但为了简洁起见（已经很长的答案！），您的 where 子句是

```
select *
from table1
where 
(date is null)
OR
(
  ( date >= cast(  floor( cast(dateAdd(d, -1 * day(getDate()) + 1, getDate()) as float ) ) as datetime ) )
  AND
  ( date < dateAdd(d, 1, cast(  floor( cast(dateAdd(d, -1 * day(getDate()) + 1, getDate()) as float ) ) as datetime ) ) )
) 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:43:44.757

您可以检查使用**is null**和**Year , Month**函数

```
select  Id
from Table1 
where date is null or (YEAR(GETDATE()) == Year(date) and Month(GETDATE()) == Month(date)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:44:23.447

试试这种方式： -

```
SELECT *
FROM table1
WHERE date IS NULL OR (Year(currentDate) = Year(date) AND Month(currentDate) = Month(date)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:38:32.183

```
Select * 
from table1 
where date is null or datepart(mm,getdate()) = datepart(mm,date) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T05:39:42.027

```
SELECT * FROM Table1 
WHERE (1=1)
AND
(
    MONTH(CURRENT_TIMESTAMP) = MONTH([date])
    AND
    YEAR(CURRENT_TIMESTAMP) = YEAR([date])
)
OR
(
    [date] IS NULL
) 
```

# iphone - 进行 ftp 请求时发生内存泄漏

> ID：10974884
> 
> 赞同：0
> 
> 时间：2012-06-11T05:33:41.730
> 
> 标签：iphone, objective-c, memory-leaks

当我在 ios 设备上测试我的应用程序时发现内存泄漏，请查看以下代码：

```
- (void)_startReceive
// Starts a connection to download the current URL.
{
    // Open a CFFTPStream for the URL.
    CFReadStreamRef ftpStream = CFReadStreamCreateWithFTPURL(NULL, (CFURLRef) url);

    assert(ftpStream != NULL);

    self.networkStream = (NSInputStream *) ftpStream;

    self.networkStream.delegate = self;
    [self.networkStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:RUNLOOPMODEL];

    [self.networkStream open];

    CFRelease(ftpStream);
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
// An NSStream delegate callback that's called when events happen on our 
// network stream.
{
    if (self.networkStream  == nil) {    //EXC_BAD_ACCESS(code = 1,address=......)
        NSLog(@"here");
    }

    switch (eventCode) {
        case NSStreamEventOpenCompleted: {
        } break;
        case NSStreamEventHasBytesAvailable: {
            NSInteger       bytesRead;
            uint8_t         buffer[LISTDOCBUFFER];
     ......
｝ 
```

我使用此代码对文档信息进行 ftp 请求。但只有有时（八次之一）内存泄漏会发生在我注意到的那一行。在 ios 模拟器上进行测试时，这从未发生过。我想知道可能的原因以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:09:12.003

原因可能是任何原因，但最有可能是无效的内存管理。您可以在 XCode 中分析您的项目，转到 Project 选项卡并选择分析内存泄漏实际发生的位置，或者您可以从同一路径运行 Profile 以检测任何特定的内存泄漏。查看此[链接](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)，这是一个关于如何调试内存相关问题的非常酷的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:22:12.283

在将 ftpStream 类型转换为 NSInputStream 之后，您将释放它 (CFRelease(ftpStream)) 并再次使用它`if (self.networkStream == nil)`。不要在 ftpStream 上调用 CFRelease() 并在完成后释放 NSInputStream。

# mysql - 选择 * 时增加的时间是什么原因？

> ID：10974885
> 
> 赞同：2
> 
> 时间：2012-06-11T05:33:58.350
> 
> 标签：mysql, sql

我注意到有很多列的表的一些查询，当我这样做时：

```
SELECT column1, column2 FROM ... 
```

它几乎可以是我做的速度的 2 倍：

```
SELECT * FROM ... # ~ 15 columns 
```

是什么导致了返回查询所需的额外时间`*`？我最初认为，如果两个查询都检索相同的行，那么性能差异将是微不足道的。造成这种差异的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T05:45:41.257

虽然行数相同，但额外的列需要传输到客户端，消耗网络带宽。需要额外时间的原因与下载 7 倍大的文件需要更长时间的原因相同。可能还需要从磁盘读取原本不需要的块，在某些情况下甚至无法通过仅从索引读取来完成查询。这就是为什么我们鼓励您始终明确指定您的选择列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T05:37:19.620

首先要做的是查看“解释计划”，看看一个查询是否会导致与另一个不同的查询计划：

[http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:01:02.393

鉴于...

1.  `SELECT column1, column2 FROM yourtable`
2.  `SELECT * FROM yourtable`

MySQL 的性能可以通过不止一个因素来改变，例如

*   将数据发送回客户端，
*   释放物品，
*   锁定表，
*   检查查询缓存，
*   将结果存储到查询缓存中，
*   优化，
*   打开和关闭表格

……还有更多。在尝试确定哪种方式更快时，您必须考虑所有这些因素。

在大多数情况下，我只查询我想要的列，从而减少应用程序和数据库服务器之间不必要的传输负载。但是...我不得不承认，如果它只有几列，或者如果我想测试一些东西，我有时也会走`SELECT *`- 捷径。

# javascript - 试图在javascript中获取滑动图像

> ID：10974888
> 
> 赞同：-2
> 
> 时间：2012-06-11T05:34:24.887
> 
> 标签：javascript, jquery, dotnetnuke

我正在尝试获取滑动图像（请参阅下面的代码摘录）：

```
if(this.slidesCount > 1){
    // navigate "in" or "out"
    this.$slider
        .find('nav > span.sl-prev')
        .on('click.slitslider', function(event){ 
```

> 1.  `Uncaught TypeError: Object [object Object] has no method 'on'`
> 2.  `Failed to load resource: the server responded with a status of 400 (Bad Request)`

我在 JavaScript 中遇到了两个错误。我该如何解决上述问题？
先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:40:30.870

请尝试使用 jquery 1.7 及更高版本。这个方法“on”是jquery 1.7及以上版本新增的特性。不支持您使用 1.6 及以下的较低版本。

# javascript - jQuery Mobile Phone-Gap:- 列表视图中的自动分隔符是否有效？

> ID：10974902
> 
> 赞同：2
> 
> 时间：2012-06-11T05:35:47.197
> 
> 标签：javascript, android, iphone, ipad, jquery-mobile

我已经使用 phonegap 和 jQuery mobile 实现了一个 iphone 应用程序。

我使用 Auto-Dividers 设置 secton heders 按字母顺序排列列表项的第一个字母。

[我已经包含了来自https://github.com/jquery/jquery-mobile/pull/2851](https://github.com/jquery/jquery-mobile/pull/2851)的所需插件

但它对列表视图标题没有影响..即使我使用了 Autodivider 属性 true..

```
<ul data-role="listview" data-theme="e" data-autodividers="true"> 
```

我有一个疑问*`even in jQuery documents also they used list-dividers manually`*..

**`Does the auto divider functionality works or not.`**

*如果是这样，为什么不在我们的应用程序中*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:02:43.967

这是内置在 jQuery 1.2 中的。 [http://jquerymobile.com/blog/2012/08/01/announcing-jquery-mobile-1-2-0-alpha/](http://jquerymobile.com/blog/2012/08/01/announcing-jquery-mobile-1-2-0-alpha/)

# android - 为什么具有 30 个元素的 ViewPager 和 GridLayout 非常慢？

> ID：10974905
> 
> 赞同：7
> 
> 时间：2012-06-11T05:36:10.177
> 
> 标签：android, performance, gridview, android-viewpager, baseadapter

我有 a`ViewPager`和 a`GridView`来显示月历。有大约 30 个元素，`GridView`左右滑动非常慢。我做了一个示例项目来测试没有任何数据库访问，它也很慢。也许有人看到了问题，还是我必须异步加载页面？

那是`GridView`. 我想在任何元素中显示 9 个 5x5 像素的小图标，但是没有它们，它也很慢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/Layout1" android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical" android:padding="1dp">
  <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content">
    <TextView android:id="@+id/date" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_marginLeft="5dp" android:gravity="center_vertical" android:textSize="14sp" android:textStyle="bold"/>
  </LinearLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot1" android:layout_width="wrap_content" android:drawingCacheQuality="auto" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:background="#ffffff" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:paddingBottom="1dp" android:paddingLeft="1dp" android:paddingTop="5dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:background="#ffffff" android:paddingBottom="1dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:layout_gravity="right" android:background="#ffffff" android:paddingBottom="1dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_gravity="center_horizontal" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:background="#ffffff" android:paddingBottom="1dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot5" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_gravity="left" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:background="#ffffff" android:paddingBottom="1dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot6" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:layout_gravity="left" android:background="#ffffff" android:paddingBottom="1dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot7" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:layout_gravity="left" android:background="#ffffff" android:paddingBottom="1dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot8" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_gravity="left" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:background="#ffffff" android:paddingBottom="1dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#ffffff">
    <ImageView android:id="@+id/dot9" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5dp" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" android:layout_gravity="left" android:background="#ffffff" android:paddingBottom="5dp" android:paddingLeft="1dp"/>
  </RelativeLayout>
</LinearLayout> 
```

那是`instantiateItem`适配器`GridView`：

```
public Object instantiateItem(ViewGroup container, int position) {
    GridView gv = new GridView(m_context);
    gv.setAdapter(new BaseAdapter() {
        @Override
        public View getView(int pos, View convertView, ViewGroup parent) {
            View v;
            if (convertView == null) {
                // if it's not recycled, initialize some attributes
                v = mInflater.inflate(R.layout.calendar_month_item, null);
            } else {
                v = convertView;
            }
            TextView dayView = (TextView) v.findViewById(R.id.date);
            dayView.setText(pos + "");
            return v;
        }

        @Override
        public long getItemId(int p) {
            return 0;
        }

        @Override
        public Object getItem(int p) {
            return null;
        }

        @Override
        public int getCount() {
            return 30;
        }
    });
    gv.setNumColumns(5);
    ((ViewPager) container).addView(gv);
    return gv;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T20:17:39.680

我环顾四周，我想我找到了你正在寻找的东西：

*   [内容 XML](https://github.com/nevalla/CalendarView/blob/master/res/layout/calendar.xml)，您可能必须更改或重做您的布局，因为它非常大，正如您所说。
*   [CalendarAdapter.java](https://github.com/nevalla/CalendarView/blob/master/src/com/examples/android/calendar/CalendarAdapter.java)，在第 112 行你可以看到他们在那里添加了一个图标。只需更改代码，您就可以通过编程方式添加九个图标，而不是使用所有这些布局。
*   [如何在 Android 中实现 CalendarView](http://caughtinthemobileweb.wordpress.com/2011/06/20/how-to-implement-calendarview-in-android/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:31:37.127

您使用哪个版本的 Android？这一点很重要，因为Android 3.0 中有一个Calendar，是有bug，但不是那么关键。

关于你的问题，如果我很好理解的话。查看您的 XML，它包含 11 个布局，而这仅适用于一个元素。如果你有很多，想象一下 Android 系统必须做的工作量，以膨胀你的所有元素。之后，当您滑动时，您会重复使用元素，Android 必须刷新无效的元素。这是很多工作。（11 个布局 * 30 = 330 个要刷新或膨胀的布局）。正如 Android 开发人员文档所说，您必须始终使用尽可能少的布局来包装您的元素！

无论如何，你的方法是不正确的。我可以建议您查看 Android 3+ 中的 CalendarView 的源代码，但给您一个提示：

为一周而不是每天创建一个布局（如在 CalendarView 中）。通过这样做，Android 将只需要刷新 n 个元素（您可以选择一次显示多少周），而不是 30 个。此布局必须每天包含 7 个视图。

希望你能从中得到一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T18:27:33.350

首先，正如其他人所说，您的布局有点奇怪。

*   您真的不需要任何布局子元素的架构。
*   在不需要时拥有多个嵌套的相对或线性布局将非常昂贵，尤其是在包装在 ViewPager 中的 GridView 中时。

其次，ViewPager 和 PagerAdapter 有点棘手。

*   当您拥有默认数量的屏幕外页面时，您将同时布局所有三个页面。如果您将其设置得更高，您将布局更多视图。
*   确保您正确删除了 destroyItem 中的视图。
*   正确实现[isViewFromObject](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#isViewFromObject%28android.view.View,%20java.lang.Object%29)方法，否则您的视图将在您分页时被丢弃，从而导致重新创建它们的成本更高。

接受@CommonsWare 的建议可能是个好主意。TraceView 使用起来有点困难，但即便如此，它也可能会产生一些线索。

# android - Android：在gridview中显示图像

> ID：10974907
> 
> 赞同：0
> 
> 时间：2012-06-11T05:36:13.603
> 
> 标签：android, gridview, scroll

嗨，我正在制作一个应用程序，我必须在其中使用带有 gridview 的滚动。我想将滚动限制设置为六个图像，即当我滚动时，我应该在 gridview 中获得六个图像。但我**在 Scroll 上得到 Array Index Out of Bound**。我的代码如下：

```
public class ListMobileActivity extends Activity {

        public static int items=14;
        private boolean loadingMore=false;
        public static ArrayList<String> url;
        public static ArrayList<String> name;
        NewSaxParserActivity activity;
        String[] values;
        MobileArrayAdapter adapter;
        GridView gridview;
        int x=0;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            System.out.println("welcome to gridview");
            setContentView(R.layout.categorygridview);
            savedInstanceState=this.getIntent().getExtras();
            String string=String.valueOf(savedInstanceState.getInt("id"));
            String string1=getIntent().getStringExtra("name");
            String string2=getIntent().getStringExtra("name1");

            TextView textView=(TextView)findViewById(R.id.catName);
            textView.setText(string2);
            gridview=(GridView)findViewById(R.id.gridfour);

         activity=new NewSaxParserActivity();
         activity.display(string1,string);

            url=new ArrayList<String>();
            name=new ArrayList<String>();
            name=activity.name;*/
            adapter=new MobileArrayAdapter(ListMobileActivity.this,url,name);
            gridview.setAdapter(adapter);
            gridview.setOnScrollListener(new OnScrollListener() {
                @Override
                public void onScroll(AbsListView view, int firstVisibleItem,
                        int visibleItemCount, int totalItemCount) {
                    int lastInScreen = firstVisibleItem + visibleItemCount;             
                    System.out.println("lastinscreen::::"+lastInScreen);
                    if((lastInScreen == totalItemCount) && !(loadingMore)){                 
                        Thread thread =  new Thread(null, loadMoreListItems);
                        thread.start();
                    }
                }

                @Override
                public void onScrollStateChanged(AbsListView view, int scrollState) {

                }
            });
             Thread thread =  new Thread(null, loadMoreListItems);
                thread.start();
        }

    private Runnable loadMoreListItems = new Runnable() {           
            @Override
            public void run() {
                int x=0;
                loadingMore = true;

                url = new ArrayList<String>();
                name = new ArrayList<String>();
                 System.out.println("url1 size :"+activity.url1.size());
                try { Thread.sleep(1000);
                } catch (InterruptedException e) {}
                for (int i = 0; i < items
                        ; i++) {
                    System.out.println("x :"+x);
                    url.add(activity.url1.get(x).toString()); 
                    name.add(activity.name.get(x).toString()); 
                    x=x+1;
                    }

                 runOnUiThread(returnRes);

            }
        };  
        private Runnable returnRes = new Runnable() {
            @Override
            public void run() {
                try{
                if(url != null && url.size() > 0){
                    System.out.println("size :"+url.size());
                    System.out.println("size :"+name.size());
                    for(int i=0;i<url.size();i++)
                    {System.out.println("url :"+url.get(i));
                    System.out.println("name :"+name.get(i));
                        adapter.add(url.get(i));
                        adapter.add(name.get(i));
                    }
                }
                System.out.println("size :"+url.size());
                System.out.println("size :"+name.size());
                }
                catch (Exception e) {
                    // TODO: handle exception
                e.getMessage();
                }
                adapter.notifyDataSetChanged();
                loadingMore = false;
            }
        };

    } 
```

上面是我的主要活动，下面是我的适配器

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
    Context context;
    String[] values1;
    String[] name1;
    Activity activity;
    ImageLoader imageLoader;

    public MobileArrayAdapter(Context context, ArrayList<String> values, ArrayList<String> name) {
        super(context, R.layout.main, values);
        this.context=context;
        values1=new String[values.size()];
        name1=new String[name.size()];
        Object []arr={"hello"};
        Object []arr1={"hello"};
        arr=values.toArray(arr);
        arr1=name.toArray(arr1);
        activity=(Activity)this.getContext();;
        for(int i=0;i<values.size();i++)
        {
            values1[i]=arr[i].toString();
            name1[i]=arr1[i].toString();
        }
        this.activity=(Activity)this.getContext();
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        System.out.println("getView");
        View vi=convertView;
        ViewHolder holder;
        if(convertView==null){
            vi = inflater.inflate(R.layout.list_mobile, parent, false);
            holder=new ViewHolder();
            holder.image=(ImageView)vi.findViewById(R.id.logo);
            holder.text=(TextView)vi.findViewById(R.id.label);
            vi.setTag(holder);
        }
        else
        holder=(ViewHolder)vi.getTag();
        System.out.println("position :"+position);
        System.out.println("name :"+name1.length);
        System.out.println("values :"+values1.length);
        System.out.println("name on position :"+name1[position]);
        holder.text.setText(name1[position]);
        holder.image.setTag(values1[position]);
        imageLoader.DisplayImage(values1[position], activity, holder.image);
        return vi;
    }
    public static class ViewHolder{
        public TextView text;
        public ImageView image;
    }
    *@Override
    public String getItem(int position) {
        return super.getItem(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public int getPosition(String item) {
        return super.getPosition(item);
    }

} 
```

以下是例外：

```
06-11 10:15:22.013: E/AndroidRuntime(680): FATAL EXCEPTION: main
06-11 10:15:22.013: E/AndroidRuntime(680): java.lang.ArrayIndexOutOfBoundsException
06-11 10:15:22.013: E/AndroidRuntime(680):  at com.trigma.pp.MobileArrayAdapter.getView(MobileArrayAdapter.java:77)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.GridView.onMeasure(GridView.java:932)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.View.measure(View.java:8171)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:578)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:362)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.View.measure(View.java:8171)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:578)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:362)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.View.measure(View.java:8171)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.View.measure(View.java:8171)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.View.measure(View.java:8171)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.os.Looper.loop(Looper.java:123)
06-11 10:15:22.013: E/AndroidRuntime(680):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-11 10:15:22.013: E/AndroidRuntime(680):  at java.lang.reflect.Method.invokeNative(Native Method)
06-11 10:15:22.013: E/AndroidRuntime(680):  at java.lang.reflect.Method.invoke(Method.java:521)
06-11 10:15:22.013: E/AndroidRuntime(680):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-11 10:15:22.013: E/AndroidRuntime(680):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-11 10:15:22.013: E/AndroidRuntime(680):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T22:41:45.397

"字符串字符串=String.valueOf(savedInstanceState.getInt("id"));"

“getIntent”不是“getInt”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:08:54.480

我在您的源代码中看到以下问题

```
@Override
    public String getItem(int position)
    {
        return super.getItem(position);

    } 
```

将其更改为

```
@Override
        public String getItem(int position)
        {
            return name1[position]; 
            or
            return values1[position];

        } 
```

和

```
@Override
    public int getPosition(String item) {
        return super.getPosition(item);
    } 
```

您还需要更改此项以返回项目的位置。

# html - 如何提交带有标签值的表单？

> ID：10974909
> 
> 赞同：3
> 
> 时间：2012-06-11T05:36:55.600
> 
> 标签：html

我是网络开发新手

我想提交一个带有标签名称的表单。

我的意思是在我的`html`页面中，我展示了一个人的一些详细信息。这些细节正在使用标签显示。单击提交按钮后，我想将该详细信息提交到另一个 HTML 页面

任何人都有一个想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:54:25.487

使用**隐藏字段**的概念。

[http://www.w3schools.com/tags/att_input_type.asp](http://www.w3schools.com/tags/att_input_type.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:18:15.673

您可以使用带有标签的隐藏字段

```
input type="hidden" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:57:00.223

为什么不将输入字段的样式设置为看起来像标签？你甚至可以阻止它们被编辑。这样，表单提交将确保它们被发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-14T14:51:42.563

我会给你一个我解决这个问题的方法的例子：

我这样声明两个 html 元素：

```
<label name="importe_label" id="importe_label" />
<input type="hidden" id="importe" name="importe" value=""/> 
```

然后，例如，我用 jQuery 设置它们：

```
$("#importe_gravado").val(99.99);
$("#importe_gravado_label").text(99.99); 
```

所以，当我提交表单时，我会在后端获得我需要的值（在这种情况下，在“importe”参数中）。

我不知道这是否是最好的方法，但它有效！:)

希望它可以帮助任何人。此致！

# bash - 我应该使用只读标志吗？

> ID：10974917
> 
> 赞同：3
> 
> 时间：2012-06-11T05:38:20.777
> 
> 标签：bash

昨天我发现 Bash 提供了一种将变量标记为只读的方法，使用 readonly 关键字：

```
readonly hello="hello"
hello="world" # error message, Bash refuses to reassign the variable 
```

这似乎是一个不错的功能，但我从未在任何 Bash 脚本中看到过此功能。有什么理由不广泛使用它吗？它实际上是便携式的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:48:27.703

`readonly`对于一些由 bash 设置的变量很有用，例如`$UID`- 非只读值`$LOGNAME`，例如`$USER`用户可以轻松更改。

如果您觉得`readonly`有用，请使用它！没有多少人使用`readonly`，但不要让这困扰你。缺点 - 与其他变量属性一样，`readonly`属性不会与导出的变量一起传递，除非子进程是另一个 bash。

的一种用途`readonly`是将其应用于函数。这并没有广泛完成，但它解决了（错误地）具有两个同名函数的支持问题，这在使用存储在脚本之外的函数时可能是一个问题。

ksh 也支持`readonly`（作为别名）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-10-10T09:37:31.263

'readonly' 变量的值不能进一步修改。它就像java中的'final'变量一样简单。

# stack - 堆栈和队列之间的基本区别是什么？

> ID：10974922
> 
> 赞同：134
> 
> 时间：2012-06-11T05:39:01.447
> 
> 标签：stack, queue

堆栈和队列之间的基本区别是什么？

请帮助我，我无法找到差异。

**你如何**区分堆栈和队列？

我在各种链接中搜索答案并找到了这个答案..

在高级编程中，

*堆栈被定义为一个列表或元素序列，通过将新元素放置在现有元素的“顶部”来加长，并通过从现有元素的顶部移除元素来缩短。它是一种 ADT[Abstract Data Type]，具有“push”和“pop”的数学运算。*

*队列是一系列元素，通过将新元素放在现有元素的后面来添加，并通过删除队列前面的元素来缩短。它是一个 ADT[抽象数据类型]。在 Java、C++、Python 等编程中对这些术语有更多的理解。*

我能有一个更详细的答案吗？请帮我。

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-06-11T05:46:47.880

[Stack](http://en.wikipedia.org/wiki/Stack_(abstract_data_type))是一种 LIFO（后进先出）数据结构。维基百科的相关链接包含详细的描述和示例。

[队列](http://en.wikipedia.org/wiki/Queue_(abstract_data_type))是一种 FIFO（先进先出）数据结构。维基百科的相关链接包含详细的描述和示例。

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2016-01-27T07:28:02.300

想象一**摞纸**。放入堆栈的最后一块在顶部，因此它是第一个出来的。这是**后进先出**。添加一张纸称为“推”，取出一张纸称为“弹出”。

[![](../Images/3239c8f4a79f55a22d9d7cb5ee1034d2.png)](https://i.stack.imgur.com/fUtR1.png)

想象一下**商店里排起**了长队。第一个排队的人是第一个出线的人。这是**先进先出**。排队的人“入队”，出队的人“出队”。

[![](../Images/75b8f7f0fa0173aa85f40602f8eee0df.png)](https://i.stack.imgur.com/CqutZ.png)

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2017-08-16T15:48:33.710

*视觉模型*

# ***煎饼* [堆栈](https://en.wikipedia.org/wiki/Stack_(abstract_data_type))**(LIFO)

添加和/或删除一个的唯一方法是从顶部。

[![煎饼堆栈](../Images/57b2f31348ca08e9355f62404a5445a6.png)](https://i.stack.imgur.com/4yAm1.png)

# ***行* [队列](https://en.wikipedia.org/wiki/Queue_(abstract_data_type))**(FIFO)

当一个人到达时，他们到达队列的末端，当一个人离开时，他们从队列的前面离开。

[![车行](../Images/560fc07cb16e80e9a24156b702e3d074.png)](https://i.stack.imgur.com/YuacJ.jpg)

**有趣的事实：**英国人将排队的人称为[队列](https://simple.wikipedia.org/wiki/Queue)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2012-06-11T05:47:51.423

您可以将两者都视为事物的有序列表（按它们添加到列表的时间排序）。两者的主要区别在于新元素如何进入列表而旧元素如何离开列表。

对于堆栈，如果我有一个 list `a, b, c`，并且我添加`d`了 ，它会被添加到最后，所以我最终得到`a,b,c,d`. 如果我想弹出列表中的一个元素，我会删除我添加的最后一个元素，即`d`. 弹出后，我的列表`a,b,c`又出现了

对于队列，我以相同的方式添加新元素。添加后`a,b,c`变为. 但是，现在当我弹出时，我必须从列表的前面取出一个元素，所以它变成了.`a,b,c,d``d``b,c,d`

这很简单！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-10-08T07:43:54.800

**队列**

队列是项目的有序集合。

项目在队列的“前端”一端被删除。

项目被插入到队列的另一端，称为“后部”。

第一个插入的项目是第一个被删除的 (FIFO)。

**堆**

堆栈是项目的集合。

它只允许访问一个数据项：插入的最后一项。

在称为“堆栈顶部”的一端插入和删除项目。

它是一个动态且不断变化的对象。

所有数据项都放在堆栈顶部并从顶部取出

这种访问结构称为后进先出结构 (LIFO)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-04-09T04:22:30.567

**堆：**

1.  堆栈被定义为一个元素列表，我们只能在堆栈顶部插入或删除元素。
2.  堆栈的行为类似于后进先出 (LIFO) 系统。
3.  堆栈用于在函数之间传递参数。在调用函数时，参数和局部变量存储在堆栈中。
4.  提供递归支持的高级编程语言（如 Pascal、c 等）使用堆栈进行簿记。请记住，在每次递归调用中，都需要保存参数的当前值、局部变量和返回地址（调用后控件必须返回的地址）。

**队列：**

1.  队列是同类型元素的集合。它是一个线性列表，其中插入可以发生在列表的一端，称为列表的***后端***，而删除只能发生在另一端，称为列表的***前端***
2.  队列的行为类似于先进先出 (FIFO) 系统。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-06-11T05:46:35.427

堆栈是元素的集合，可以一次存储和检索一个。元素按其存储时间的相反顺序检索，即最新存储的元素是下一个要检索的元素。堆栈有时称为后进先出 (LIFO) 或先进后出 (FILO) 结构。在检索到最新元素（通常称为“顶部”元素）之前，无法检索先前存储的元素。

队列是元素的集合，可以一次存储和检索一个。元素按其存储时间的顺序被检索，即存储的第一个元素是下一个要检索的元素。队列有时被称为先进先出 (FIFO) 或后进后出 (LILO) 结构。在检索到第一个元素（通常称为“前”元素）之前，无法检索随后存储的元素。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-17T15:09:19.310

堆栈：堆栈被定义为一个元素列表，我们只能在堆栈顶部插入或删除元素

堆栈用于在函数之间传递参数。在调用函数时，参数和局部变量存储在堆栈中。

堆栈是元素的集合，可以一次存储和检索一个。元素按其存储时间的相反顺序检索，即最新存储的元素是下一个要检索的元素。堆栈有时称为后进先出 (LIFO) 或先进后出 (FILO) 结构。在检索到最新元素（通常称为“顶部”元素）之前，无法检索先前存储的元素。

队列：

队列是同类型元素的集合。它是一个线性列表，其中插入可以发生在列表的一端，称为列表的后端，而删除只能发生在另一端，称为列表的前端

队列是元素的集合，可以一次存储和检索一个。元素按其存储时间的顺序被检索，即存储的第一个元素是下一个要检索的元素。队列有时被称为先进先出 (FIFO) 或后进后出 (LILO) 结构。在检索到第一个元素（通常称为“前”元素）之前，无法检索随后存储的元素。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-10-13T12:43:53.113

为了尽量简化堆栈和队列的描述，它们都是动态的信息元素链，可以从链的一端访问，它们之间唯一真正的区别是：

使用堆栈时

*   您在链的一端插入元素，然后
*   您从链的同一端检索和/或删除元素

排队时

*   您在链的一端插入元素，然后
*   您从另一端检索/删除它们

**注意**：我在这种情况下使用检索/删除的抽象措辞，因为有些情况下您只是从链中检索元素，或者在某种意义上只是读取它或访问它的值，但也有当您从链中删除元素的情况链，最后还有一些实例，当您使用同一个调用执行两个操作时。

此外，为了尽可能地抽象虚构的链并将其与特定的编程语言术语解耦，特意使用了元素一词。这个称为元素的抽象信息实体可以是任何东西，从指针、值、字符串或字符、对象……取决于语言。

在大多数情况下，尽管它实际上是一个值或一个内存位置（即指针）。其余的只是将这个事实隐藏在语言行话后面<

当元素的顺序很重要并且需要与元素首次进入程序时的顺序完全相同时，队列会很有帮助。例如，当您处理音频流或缓冲网络数据时。或者当您执行任何类型的存储和转发处理时。在所有这些情况下，您需要以与进入程序的顺序相同的顺序输出元素的顺序，否则信息可能会失去意义。因此，您可以将程序分解为从某个输入中读取数据、进行一些处理并将它们写入队列的部分，以及从队列中检索数据的部分处理它们并将它们存储在另一个队列中以供进一步处理或传输数据.

当您需要临时存储将在程序的直接步骤中使用的元素时，堆栈会很有帮助。例如，编程语言通常使用堆栈结构将变量传递给函数。他们实际上所做的是将函数参数存储（或推送）在堆栈中，然后跳转到他们从堆栈中删除和检索（或弹出）相同数量的元素的函数。这样，堆栈的大小取决于函数嵌套调用的数量。此外，在一个函数被调用并完成它正在做的事情之后，它使堆栈处于与调用之前完全相同的状态！这样，任何函数都可以使用堆栈操作，而忽略其他函数如何使用它。

最后，您应该知道还有其他术语用于相同的类似概念。例如，堆栈可以称为堆。这些概念也有混合版本，例如双端队列可以同时作为堆栈和队列运行，因为它可以同时被两端访问。此外，数据结构作为堆栈或队列提供给您这一事实并不一定意味着它是这样实现的，在某些情况下，数据结构可以作为任何东西实现并作为特定的数据结构仅仅是因为它可以表现得像这样。换句话说，如果您为任何数据结构提供 push 和 pop 方法，它们就会神奇地变成堆栈！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-04-08T16:42:14.950

堆叠一个被认为是垂直集合。首先要明白集合是一个集合和组织其他更小的对象的对象。这些较小的对象通常称为元素。这些元素按 ABC 顺序“推入”堆栈，其中 A 排在第一位，C 排在最后。垂直它看起来像这样：添加第 3 个元素）C 添加第 2 个元素）B 添加第 1 个元素）A

请注意，首先添加到堆栈中的“A”位于底部。如果要从堆栈中删除“A”，首先必须删除“C”，然后是“B”，最后是目标元素“A”。堆栈在处理堆栈的复杂性时需要 LIFO 方法。（后进先出）从堆栈中删除元素时，正确的语法是 pop。我们不会从堆栈中删除元素，而是将其“弹出”。

回想一下，“A”是第一个压入堆栈的元素，“C”是最后一个压入堆栈的元素。如果您决定要查看堆栈底部的内容，因为 3 个元素都在堆栈上，排序 A 是第一个 B 是第二个元素，C 是第三个元素，顶部必须被弹出然后添加的第二个元素是为了查看堆栈的底部。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-09T15:03:22.573

STACK 是一个 LIFO（后进先出）列表。意味着假设 3 个元素被插入到堆栈中，即 10、20、30。首先插入 10，最后插入 30，因此首先从堆栈中删除 30，最后从堆栈中删除 10。这是一个 LIFO 列表（后进先出）。

QUEUE 是 FIFO 列表（先进先出）。意味着首先插入一个元素，该元素首先要被删除。例如人群队列。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-31T06:54:04.773

简单地说，堆栈是一种数据结构，它以与存储数据相反的顺序检索数据。这意味着插入和删除都遵循 LIFO（后进先出）系统。您**只能**访问堆栈的顶部。

使用队列，它以与排序相同的顺序检索数据。删除时可以访问队列的前面，添加时可以访问队列的后面。这遵循 FIFO（先进先出）系统。

堆栈使用 push、pop、peek、size 和 clear。队列使用 Enqueue、dequeue、peek、size 和 clear。

# arrays - NSMutableArray 出精灵实例

> ID：10974923
> 
> 赞同：0
> 
> 时间：2012-06-11T05:39:08.447
> 
> 标签：arrays, cocos2d-iphone, nsmutablearray

我有一个名为 spriteArray 的数组：

```
@property (retain) NSMutableArray *spriteArray;
@synthesize spriteArray = spriteArray_; 
```

我有一个精灵：

```
@property (nonatomic, assign) CCSprite *sprite;
@synthesize sprite = sprite_; 
```

我根据 spriteNumber 的值（整数）创建一定数量的精灵：

```
for (int i = 0; i < spriteNumber; i++) {
    if ([spritetype_ isEqualToString:@"typeOne"]) {

        self.sprite = [[typeOne alloc] initTypeOne];
        self.sprite.position = randomPoint;
        [self.spriteArray addObject:self.sprite];
        [self addChild:self.sprite];
    }} 
```

精灵成功初始化，并按应有的方式出现在屏幕上。但是，当我尝试将它们用于碰撞检测时，其中只有一个有效：

```
 if (CGRectIntersectsRect(self.sprite.boundingBox, self.swat.boundingBox)) {
    //swat is another sprite
    NSLog(@"detected");
    } 
```

我想要的是在创建每个精灵时对其进行“索引”，以便碰撞检测起作用。

示例代码： http: [//pastebin.com/swNUwB6U](http://pastebin.com/swNUwB6U)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:49:01.027

使用精灵的 tag 属性。

```
for (int i = 0; i < spriteNumber; i++) {
  if ([spritetype_ isEqualToString:@"typeOne"]) {

    typeOne *typeOneSprite = [[typeOne alloc] initTypeOne];
    typeOneSprite.position = randomPoint;

// USE TAG!
    typeOneSprite.tag = i;

    [self.spriteArray addObject:typeOneSprite];
    [self addChild:typeOneSprite];
// Don't forget to release if you are not using ARC.
}} 
```

然后调用碰撞检测代码中的标签值。

```
[self.spriteArray enumerateObjectsUsingBlock:^(id obj, NSUInteger index, BOOL *stop)
 {
    typeOne *spriteOne = (typeOne *)obj;
    if (CGRectIntersectsRect(spriteOne.boundingBox, self.swat.boundingBox)) 
    {
      //swat is another sprite
      if (spriteOne.tag == numberyouwant){}
      NSLog(@"detected");
     }
 }]; 
```

# winforms - Winforms - 如何创建类似于母版页的东西？

> ID：10974928
> 
> 赞同：1
> 
> 时间：2012-06-11T05:40:07.930
> 
> 标签：winforms, menu, master-pages, panel

我正在尝试在 winforms 中构建一个与 asp.net 中的 masterpages 类似的应用程序 - 顶部有一个菜单，当从菜单中选择一个选项时，底部的整个屏幕将会改变，而菜单仍然存在（有 10-15未来应用程序中的屏幕，有些非常相似，有些则不是）。

这样做的最佳方法是什么？我应该为每个屏幕使用不同的表单还是使用面板或其他东西？

如果我使用面板或其他东西，我如何设法使用具有如此多面板占用屏幕空间的设计器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:19:35.780

尝试使用 MDIParent 表单。查看示例 [http://www.codeproject.com/Articles/12514/Multi-Document-Interface-MDI-tab-page-browsing-wit](http://www.codeproject.com/Articles/12514/Multi-Document-Interface-MDI-tab-page-browsing-wit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:49:08.593

一种选择是使您的应用程序成为一个 MDI 窗口，然后将整个表单最大化地加载到父窗口中。

然后，您将能够将每个表单视为其自己的独立项目，因为它确实就是这样。

您不可以选择使用 WPF 吗？WPF 浏览器应用程序非常适合您所描述的范例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:50:02.320

如果它只是保持相同的菜单和 UI 的打开/关闭部分，您可以简单地向主窗体添加和删除用户控件的实例。

如果您需要更多功能，例如对接（如 Visual Studio）[，请查看此](http://sourceforge.net/projects/dockpanelsuite/)

另一种选择是[使用表单继承](http://msdn.microsoft.com/en-us/library/aa983613%28v=vs.71%29.aspx)

选择哪一个取决于您想要重用的内容以及您需要的功能。

# c# - 如何在 ASP.NET 中将创建的 Excel 文件保存到客户端 PC

> ID：10974930
> 
> 赞同：1
> 
> 时间：2012-06-11T05:40:27.363
> 
> 标签：c#, asp.net

当我单击按钮时，我在 asp.net 中创建了一个 excel 报告和 html 报告，我的应用程序创建它并保存到客户端桌面，但是它不能正常工作，因为 excel 文件是在服务器的桌面中创建的。我该如何解决这个问题？

感谢你的回复。

```
string CurrentDate;
DateTime saveNow = DateTime.Now;
CurrentDate = saveNow.Date.ToShortDateString();
string reportContent = prepareHTM();

string pathFile = Environment.GetFolderPath(Environment.SpecialFolder.CommonDesktopDirectory) + "\\As_Build_Report_ "+ CurrentDate + ".html";

using (StreamWriter outfile = new StreamWriter(pathFile, true))
{
    outfile.WriteLine(reportContent);
}
System.Diagnostics.Process.Start(pathFile); 
```

* * *

```
object missing = System.Reflection.Missing.Value;
//Start Excel Application.
Excel.Application oXL = new Excel.Application();
oXL.Visible = true; //display Application .            
Excel._Workbook oWB = (Excel._Workbook)(oXL.Workbooks.Add(missing));//create a new workbook.
Excel._Worksheet oSheet = (Excel._Worksheet)oWB.ActiveSheet; //create a sheet                

string CurrentDate;
DateTime saveNow = DateTime.Now;
CurrentDate = saveNow.Date.ToString();
int keep = 5;
string project = list[0].Project;
oSheet.Cells[1, 3] = "MiKES Configuration Management __" + project + "__ As-Built Report";
oSheet.Cells[3, 1] = "Report Date :";
oSheet.Cells[3, 2] = CurrentDate;

oSheet.Cells[keep, 1] = "PART NO";
oSheet.Cells[keep, 2] = "REF.DES.";
oSheet.Cells[keep, 3] = "DESCRIPTION";
oSheet.Cells[keep, 4] = "SERIAL NO";
oSheet.Cells[keep, 5] = "C/S";
oSheet.Cells[keep, 6] = "D/C";
oSheet.Cells[keep, 7] = "REMARK";
keep++;
foreach(Classes.CMNewPart item in list)
{
    try
    {
        oSheet.Cells[keep, 1] = item.PartNo;
        oSheet.Cells[keep, 2] = item.RefDes;
        oSheet.Cells[keep, 3] = item.Description1;
        oSheet.Cells[keep, 4] = item.SerialNo;
        oSheet.Cells[keep, 5] = item.Cs;
        oSheet.Cells[keep, 6] = item.Dc;
        oSheet.Cells[keep, 7] = item.Remark;
    }
    catch (Exception)
    {

    }
    keep++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:55:19.357

您需要使用 Response 对象将文件发送给客户端。要忽略客户端打开 excel 文件时的警告消息 -

![在此处输入图像描述](../Images/5bd6b30b9858e5093e38240fc55b59d5.png)

为了防止这种情况，您需要在响应中提及内容类型和长度，使用示例代码

```
//Read the Excel file in a byte array. here pck is the Excelworkbook              
Byte[] fileBytes = pck.GetAsByteArray();

//Clear the response               
Response.Clear();
Response.ClearContent();
Response.ClearHeaders();
Response.Cookies.Clear();
//Add the header & other information      
Response.Cache.SetCacheability(HttpCacheability.Private);
Response.CacheControl = "private";
Response.Charset = System.Text.UTF8Encoding.UTF8.WebName;
Response.ContentEncoding = System.Text.UTF8Encoding.UTF8;
Response.AppendHeader("Content-Length", fileBytes.Length.ToString());
Response.AppendHeader("Pragma", "cache");
Response.AppendHeader("Expires", "60");
Response.AppendHeader("Content-Disposition",
"attachment; " +
"filename=\"ExcelReport.xlsx\"; " +
"size=" + fileBytes.Length.ToString() + "; " +
"creation-date=" + DateTime.Now.ToString("R") + "; " +
"modification-date=" + DateTime.Now.ToString("R") + "; " +
"read-date=" + DateTime.Now.ToString("R"));
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
//Write it back to the client    
Response.BinaryWrite(fileBytes);
Response.End(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T06:14:12.933

您可以编写excel文件来响应[HttpResponse.WriteFile 方法](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.writefile.aspx)

```
string CurrentDate;
DateTime saveNow = DateTime.Now;
CurrentDate = saveNow.Date.ToShortDateString();
string reportContent = prepareHTM();

string pathFile = Environment.GetFolderPath(Environment.SpecialFolder.CommonDesktopDirectory) + "\\As_Build_Report_ "+ CurrentDate + ".html";

using (StreamWriter outfile = new StreamWriter(pathFile, true))
{
    outfile.WriteLine(reportContent);
}

System.IO.FileInfo file = new System.IO.FileInfo(pathFile); 
Response.Clear(); 
Response.Charset="UTF-8"; 
Response.ContentEncoding=System.Text.Encoding.UTF8; 
Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name); 
Response.AddHeader("Content-Length", file.Length.ToString());    
Response.ContentType = "application/ms-excel";  
Response.WriteFile(file.FullName); 
Response.End(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-26T23:43:45.300

要注意一件重要的事情，以便选择的最佳答案适合您：
您必须使用与问题中暗示的 Microsoft.Office.Interop.Excel 不同的库。您必须使用 EPPlus。这是您在项目中设置它的方式：

1.  在 Visual Studio 的包管理器控制台中，键入：Install-Package EPPlus（这将根据需要安装库和参考）
2.  添加这个 using 语句 ( `using OfficeOpenXml;`)

这是一些示例代码，用于创建最佳答案中提到的 excel 包（pck）：

```
 ExcelPackage pck = new ExcelPackage();
    ExcelWorksheet ws = pck.Workbook.Worksheets.Add("exported data");
    // Excel sheet headings
    ws.Cells[1, 1].Value = "Column 1 title";
    ws.Cells[1, 2].Value = "Column 2 title"; 
```

现在您可以使用最佳答案中提供的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:51:44.160

您不能直接将其保存到特定的客户端位置。您可以做的是返回带有该请求的文件，以便在浏览器端弹出“保存文件”对话框。

# python - 根据正则表达式拆分字符串

> ID：10974932
> 
> 赞同：169
> 
> 时间：2012-06-11T05:40:39.337
> 
> 标签：python, regex

我有表格形式的命令输出。我正在从结果文件解析此输出并将其存储在字符串中。一行中的每个元素都由一个或多个空格字符分隔，因此我使用正则表达式来匹配 1 个或多个空格并将其拆分。但是，在每个元素之间插入了一个空格：

```
>>> str1="a    b     c      d" # spaces are irregular
>>> str1
'a    b     c      d'
>>> str2=re.split("( )+", str1)
>>> str2
['a', ' ', 'b', ' ', 'c', ' ', 'd'] # 1 space element between!!! 
```

有一个更好的方法吗？

每次拆分后都`str2`附加到一个列表中。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-06-11T05:44:21.060

通过使用`(`, `)`，您正在捕获组，如果您只是删除它们，您将不会遇到此问题。

```
>>> str1 = "a    b     c      d"
>>> re.split(" +", str1)
['a', 'b', 'c', 'd'] 
```

但是，不需要正则表达式，`str.split`如果没有指定任何分隔符，它将为您用空格分隔。在这种情况下，这将是最好的方法。

```
>>> str1.split()
['a', 'b', 'c', 'd'] 
```

如果你真的想要正则表达式，你可以使用它（`'\s'`代表空格，它更清晰）：

```
>>> re.split("\s+", str1)
['a', 'b', 'c', 'd'] 
```

或者您可以找到所有非空白字符

```
>>> re.findall(r'\S+',str1)
['a', 'b', 'c', 'd'] 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-11T05:44:17.073

该`str.split`方法将自动删除项目之间的所有空白：

```
>>> str1 = "a    b     c      d"
>>> str1.split()
['a', 'b', 'c', 'd'] 
```

文档在这里：[http ://docs.python.org/library/stdtypes.html#str.split](http://docs.python.org/library/stdtypes.html#str.split)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-11T05:43:00.763

当您使用`re.split`并且拆分模式包含捕获组时，这些组将保留在输出中。如果您不想这样做，请改用非捕获组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T05:47:01.813

其实很简单。尝试这个：

```
str1="a    b     c      d"
splitStr1 = str1.split()
print splitStr1 
```

# php - 为什么我们要转义双引号，单引号在 PHP 中创建查询

> ID：10974936
> 
> 赞同：0
> 
> 时间：2012-06-11T05:40:50.650
> 
> 标签：php, mysql, double-quotes, magic-quotes

为什么我们要转义双引号，单引号在 PHP 中创建查询？这样做有什么特别的好处吗？或者这只是一个好习惯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:46:45.303

它是使您的查询工作和安全所必需的。考虑以下代码：

```
$name = "O'reilly";
$sql  = "INSERT INTO users (name) VALUES ('$name')"; 
```

结果 SQL 会变成这样：

```
INSERT INTO users (name) VALUES('O'reilly'); 
```

这根本行不通。它需要正确转义：

```
INSERT INTO users (name) VALUES('O\'reilly'); 
```

这同样适用于其他特殊字符。

* * *

**防止 SQL 注入**

考虑这个查询：

```
DELETE FROM users WHERE username='$username'; 
```

从哪里`$username`获得`$_POST`。如果攻击者设法发布字符串`' OR 1; --`，`$username`则查询变为：

```
DELETE FROM users WHERE username='' OR 1; -- '; 
```

这是有效的，并且`WHERE`总是评估为真，您必须向愤怒的用户提供良好的解释。

另请参阅：[在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php?lq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:56:09.527

s，防止SQL注入攻击。了解 SQL 注入 [http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php) [http://www.homeandlearn.co.uk/php/php13p5.html](http://www.homeandlearn.co.uk/php/php13p5.html)

防止 PHP Sql 注入 [https://stackoverflow.com/a/60496/781181](https://stackoverflow.com/a/60496/781181)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:47:07.020

如果不转义引号，则查询在单引号处结束。所以你的查询不会成功执行！

例如

```
$qry = "SELECT * FROM user WHERE email='test@test.com'"; 
```

它工作正常，但如果任何人输入 email='test'@test.com' 则查询仅在 'test' 处结束，并且找不到任何包含该行的行。

所以它也可以防止sql注入！

# html - 如何根据文本内容动态设置html表格列的宽度？

> ID：10974937
> 
> 赞同：8
> 
> 时间：2012-06-11T05:40:51.843
> 
> 标签：html, css, xhtml, pixel, font-size

有一个`html` `table`：

```
<table width="100%" border="0" cellspacing="0" cellpadding="0">
   <tr>
      <td width="480px"  class="societe" ><div style="float:left;font-size:12px;padding-top:2px" ><?php echo $_SESSION[PROJET_REF] ?> - [<?php echo $_SESSION[MANUEL_REF] ?>]</div>
      </td>
   </tr>
   ...
</table> 
```

“`css`社会”是：

```
.societe{

    text-align:left;
    padding-left:23px;
    font-size:11px;
    font-weight:bold;

    background: url(../include/images/societe.png) repeat-x;

    } 
```

在`column`定义中：`<td width="480px" class="societe" >`我将列的宽度硬编码为 480px。这样做不是很好！那么如何动态地使宽度适合列的文本宽度呢？这里的文字是`<?php echo $_SESSION[PROJET_REF] ?> - [<?php echo $_SESSION[MANUEL_REF] ?>`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T05:54:01.087

如果您希望您的宽度`td`根据您的文本动态变化，那么您不应该为`td`元素提供任何预定义的宽度。

在**[这个](http://jsfiddle.net/mSyXP/1/)**例子中，你可以看到第一个`td`有一个长文本，所以同一列中的所有`td`' 将根据`td`同一列中的最长设置它们的宽度。

最后，归结为用户体验。用户会更喜欢`td`具有不同宽度的 '，还是更喜欢`td`具有相同尺寸的 '，其中工具提示会显示完整的文本，以防它的长度大于`td`. 我的朋友，这是你必须做出的选择:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:52:58.297

所以例如你有一个 div

```
<div  id="text" style="float:left;font-size:12px;padding-top:2px" ><?php echo $_SESSION[PROJET_REF] ?> - [<?php echo $_SESSION[MANUEL_REF] ?>]</div> 
```

你现在得到了字符 int 的值，这取决于你添加一个特定的有多少

```
if($("#text").text().length<=100)
{
   $('.societe').attr("width", "480px");
}
if($("#text").text().length<=200)
{
   $('.societe').attr("width", "580px");
} 
```

依此类推，具体取决于您要使用的措施

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T00:42:53.427

[w3school](http://www.w3schools.com/css/css_dimension.asp) 使用`width:auto`。我一直试图为自己的目的（使用 Bootstrap 3 库）弄清楚它，这对我有用。

# jquery - JQuery根据复选框值从Div中移动和删除内容

> ID：10974940
> 
> 赞同：0
> 
> 时间：2012-06-11T05:40:58.947
> 
> 标签：jquery, css, checkbox

我正在尝试从包含无序列表并具有 CSS display: none 值（即隐藏的 div）的 div 中获取内容，并将某些列表元素放入占位符 div 以根据对应于复选框的某些值进行显示列表元素的类。

在初始显示和未选中复选框时，我希望隐藏 div 中的所有列表元素都显示在占位符 div 中。

当复选框被选中时，我想执行一个函数，该函数采用所有选中的复选框值，并将隐藏的 div 带到占位符 div 中，仅列出具有与复选框值对应的类值的列表元素。不应该显示隐藏 div 中没有相应复选框值的那些列表元素。

这是HTML：

```
<div id="php_hidden_results">
<ul id="vv_bg_results">
    <li class="Sauces_Dips_Spreads Latin">Chili Lime Sour Cream</li>
    <li class="Main_Dish Latin">Carnitas</li>
</ul>

<ul id="vv_content_wrapper_results">
    <li class="Sauces_Dips_Spreads Latin"><div class="vv_content" id="content1">
        <h2><a href="/v1.0/recipes/show_recipe.php?idrecipe=22">Chili Lime Sour Cream</a></h2>
        <div class="vv_content_box">
            <div class='subtitle'>Sauces Dips Spreads: Latin</div>
        </div>
    </li>

    <li class="Main_Dish Latin"><div class="vv_content" id="content2">
        <h2><a href="/v1.0/recipes/show_recipe.php?idrecipe=21">Slow Cooker Carnitas</a></h2>
        <div class="vv_content_box">
            <div class='subtitle'>Main Dish: Latin</div>
        </div>
    </li>
</ul> 
</div>

<div id="test">Replace with checked value</div>

<div class="filterContainerBody">              
<b>RECIPE TYPES</b><br />
<div class="horzRule"></div>
<ul class="checkfilter">
    <li><input type='checkbox' value='Sauces_Dips_Spreads' />Sauces Dips Spreads</li>
    <li><input type='checkbox' value='Main_Dish' />Main Dish</li>                
</ul>
<b>CUISINE TYPES</b><br />
<div class="horzRule"></div>                
<ul class="checkfilter">
    <li><input type='checkbox' value='Latin' />Latin</li>                
</ul>
</div><!-- end of filterContainer -->

<div id="vv_bg" class="vv_bg">   
   <ul class="results">
        <li></li>            
    </ul>
</div>

<div id="vv_content_wrapper" class="vv_content_wrapper">
    <ul class="results">
        <li></li>
    </ul> 
</div> 
```

这是CSS：

```
#php_hidden_results
{
    display: none;
}

.filterContainerBody
{
    width: 240px;
    display: block;
    background-color: #ffbb00;
} 
```

这是jQuery：

```
$(document).ready(function() {
$("ul.checkfilter :checkbox").click(function() {
    var divhidden_bg_li = $('#php_hidden_results ul#vv_bg_results li');
    $(".checkfilter :checkbox:checked").each(function(){
        var filtervalue = $(this).val();
        var filterclass = $(divhidden_bg_li).filter(filtervalue);
        var divhidden_bg= $('#php_hidden_results ul#vv_bg_results').children("." + filtervalue);
        $('#vv_bg ul.results').html(divhidden_bg); 
        var divhidden_content = $('#php_hidden_results ul#vv_content_wrapper_results').children("." + filtervalue);
        $('#vv_content_wrapper').html(divhidden_content);                               
    });   
});
}); 
```

上面的 jquery 不会在初始页面或未选中复选框时显示所有列表元素，并且会在第一次检查时从隐藏的 div 中检索某些列表元素，但变得无响应。见[http://jsfiddle.net/Ayjent/ddsjB/5/](http://jsfiddle.net/Ayjent/ddsjB/5/)

我知道隐藏和显示，我工作得很好，除了我想避免的显示中的占位符问题。请参阅上面的 jsfiddle 代码（隐藏 div 中的 li 元素以前位于占位符 div 中）。我想避免使用 AJAX 进行连续的服务器调用，但这可能是更好的解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:52:19.170

试试这个例子：

```
$(document).ready(function() {
$('input:checkbox').change(
            function(){
        var vv_bg = $('.vv_bg').find('.'+$(this).val()).html();
        var vv_content = $('.vv_content_wrapper').find('.'+$(this).val()).html();
                if ($(this).is(':checked') && (vv_bg != null && vv_content != null)) {
                    $('<li>'+vv_bg+'</li>').attr('class',$(this).val()).appendTo('#result_vv_bg ul');   
            $('<li>'+vv_content+'</li>').attr('class',$(this).val()).appendTo('#result_vv_content_wrapper ul');
                }
                else {
                    $('#result_vv_bg li:contains('+$(this).val()+')').remove();
            $('#result_vv_content_wrapper li:contains('+$(this).val()+')').remove();    
                }
            });     
}); 
```

小提琴 ->[小提琴](http://jsfiddle.net/LkgWx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:07:05.383

我不得不完全重写 jquery 函数和 html 的结构，以摆脱隐藏的 div 和占位符 div，并使用了 delegate()、appendTo()、empty() 和 detach 函数，如下所示：

HTML

```
<div class="filterContainerBody">              
<b>RECIPE TYPES</b><br />
<div class="horzRule"></div>
<ul class="checkfilter">
    <li><input type='checkbox' value='Sauces_Dips_Spreads' />Sauces Dips Spreads</li>
    <li><input type='checkbox' value='Main_Dish' />Main Dish</li>                
</ul>
<b>CUISINE TYPES</b><br />
<div class="horzRule"></div>                
<ul class="checkfilter">
    <li><input type='checkbox' value='Latin' />Latin</li>                
</ul>
</div><!-- end of filterContainer -->

<div id="vv_bg" class="vv_bg">   
<ul class="results">
    <li class="Sauces_Dips_Spreads Latin">Chili Lime Sour Cream</li>
    <li class="Main_Dish Latin">Carnitas</li>          
</ul>
</div>

<div id="vv_content_wrapper" class="vv_content_wrapper">
<ul class="results">
    <li class="Sauces_Dips_Spreads Latin"><div class="vv_content" id="content1">
        <h2><a href="/v1.0/recipes/show_recipe.php?idrecipe=22">Chili Lime Sour Cream</a></h2>
        <div class="vv_content_box">
            <div class='subtitle'>Sauces Dips Spreads: Latin</div>
        </div>
    </li>

    <li class="Main_Dish Latin"><div class="vv_content" id="content2">
        <h2><a href="/v1.0/recipes/show_recipe.php?idrecipe=21">Slow Cooker Carnitas</a></h2>
        <div class="vv_content_box">
            <div class='subtitle'>Main Dish: Latin</div>
        </div>
    </li>
</ul> 
</div> 
```

​​​​​​​​​​​​​​​​​​​​

```
var $lis_bg;
var $lis_content_wrapper;

$('.checkfilter').delegate('input:checkbox', 'change', function() {

if (!$lis_bg){ 
    $lis_bg = $('#vv_bg ul.results > li').detach();
    $lis_content_wrapper = $('#vv_content_wrapper ul.results > li').detach();
};
$('#vv_bg ul.results').empty();
$('#vv_content_wrapper ul.results').empty();

if ($('input:checked').length == 0) {
    $lis_bg.appendTo('#vv_bg ul.results');
    $lis_content_wrapper.appendTo('#vv_content_wrapper ul.results');
    $lis_bg = null;
    $lis_content_wrapper = null;
} else {
    $('input:checkbox').each(function(i, chk) {
        if (chk.checked) {
            $lis_bg.filter('.' + $(chk).attr('value')).appendTo('#vv_bg ul.results');
            $lis_content_wrapper.filter('.' + $(chk).attr('value')).appendTo('#vv_content_wrapper ul.results');
        } 
    });

}
});​ 
```

# java - GZIP解压字符串和字节转换

> ID：10974941
> 
> 赞同：5
> 
> 时间：2012-06-11T05:41:01.417
> 
> 标签：java, gzip, gzipoutputstream

我的代码有问题：

```
private static String compress(String str)
{
    String str1 = null;
    ByteArrayOutputStream bos = null;
    try
    {
        bos = new ByteArrayOutputStream();
        BufferedOutputStream dest = null;

        byte b[] = str.getBytes();
        GZIPOutputStream gz = new GZIPOutputStream(bos,b.length);
        gz.write(b,0,b.length);
        bos.close();
        gz.close();

    }
    catch(Exception e) {
        System.out.println(e);
        e.printStackTrace();
    }
    byte b1[] = bos.toByteArray();
    return new String(b1);
}

private static String deCompress(String str)
{
    String s1 = null;

    try
    {
        byte b[] = str.getBytes();
        InputStream bais = new ByteArrayInputStream(b);
        GZIPInputStream gs = new GZIPInputStream(bais);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        int numBytesRead = 0;
        byte [] tempBytes = new byte[6000];
        try
        {
            while ((numBytesRead = gs.read(tempBytes, 0, tempBytes.length)) != -1)
            {
                baos.write(tempBytes, 0, numBytesRead);
            }

            s1 = new String(baos.toByteArray());
            s1= baos.toString();
        }
        catch(ZipException e)
        {
            e.printStackTrace();
        }
    }
    catch(Exception e) {
        e.printStackTrace();
    }
    return s1;
}

public String test() throws Exception
    {
        String str = "teststring";
        String cmpr = compress(str);
        String dcmpr = deCompress(cmpr);
} 
```

此代码抛出 java.io.IOException: unknown format (magic number ef1f)

```
GZIPInputStream gs = new GZIPInputStream(bais); 
```

事实证明，在转换字节时`new String (b1)`，`byte b [] = str.getBytes ()`字节被“宠坏了”。在该行的输出处，我们已经有了更多字节。如果您避免转换为字符串并使用字节进行操作 - 一切正常。对不起我的英语不好。

* * *

```
public String unZip(String zipped) throws DataFormatException, IOException {
    byte[] bytes = zipped.getBytes("WINDOWS-1251");
    Inflater decompressed = new Inflater();
    decompressed.setInput(bytes);

    byte[] result = new byte[100];
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    while (decompressed.inflate(result) != 0)
        buffer.write(result);

    decompressed.end();

    return new String(buffer.toByteArray(), charset);
} 
```

我正在使用此功能解压缩服务器响应。感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T05:54:47.063

你有两个问题：

*   您正在使用默认字符编码将原始字符串转换为字节。这将因平台而异。最好指定一个编码 - UTF-8 通常是一个好主意。
*   您试图通过调用`String(byte[])`构造函数将压缩结果的不透明二进制数据表示为字符串。该构造函数*仅*适用于编码文本的数据......这不是。您应该为此使用 base64。有一个[公共领域的 base64 库](http://iharder.net/base64)可以让这很容易。（或者，根本不将压缩数据转换为文本 - 只需返回一个字节数组。）

从根本上说，您需要了解文本和二进制数据的不同之处——当您想在两者之间进行转换时，您应该谨慎操作。如果您想在字符串中表示“非文本”二进制数据（即*不是*编码文本的直接结果的字节），您应该使用 base64 或 hex 之类的东西。当您想将字符串编码为二进制数据（例如，将一些文本写入磁盘）时，您应该仔细考虑使用哪种编码。如果另一个程序要读取您的数据，您需要确定它期望的编码 - 如果您自己可以完全控制它，我通常会选择 UTF-8。

此外，您的代码中的异常处理很差：

*   你几乎不应该抓到`Exception`；捕获更具体的异常
*   你不应该只是捕获一个异常并继续，就好像它从未发生过一样。如果你不能真正*处理*异常并且仍然​​成功地完成你的方法，你应该让异常在堆栈中冒泡（或者可能捕获它并将它包装在更适合你的抽象的异常类型中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T05:55:16.267

当你 GZIP 压缩数据时，你总是得到二进制数据。此数据无法转换为字符串，因为它不是有效的字符数据（任何编码）。

因此，您的*compress*方法应该返回一个字节数组，而您的*decompress*方法应该将一个字节数组作为其参数。

此外，我建议您在压缩前将字符串转换为字节数组以及将解压后的数据再次转换为字符串时使用显式编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T02:45:47.770

> 当你 GZIP 压缩数据时，你总是得到二进制数据。此数据无法转换为字符串，因为它不是有效的字符数据（任何编码）。

Codo 是对的，非常感谢您启发我。我试图解压缩一个字符串（从二进制数据转换而来）。我修改的是直接在我的 http 连接返回的输入流上使用 InflaterInputStream。（我的应用程序正在检索大量 JSON 字符串）

# php - PHP 在文件中包含/要求，以及其中的所有函数

> ID：10974942
> 
> 赞同：0
> 
> 时间：2012-06-11T05:41:05.240
> 
> 标签：php

我有一个文件，其中包括：

```
 require_once("../../constructor/database.php");

$stuff_inside_include_file->doThis() ; //ACCESSIBLE

function createUser(){
   $stuff_inside_include_file->doThat(); //NOT-ACCESSIBLE (object not found)
} 

function deleteUser(){
. ... 
```

如果我将 require 语句移到函数的范围内，那么它就可以工作。否则，它不会。有更好的解决方案吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:46:59.453

你可以试试：

```
function createUser($stuff_inside_include_file){
   $stuff_inside_include_file->doThat();
} 
```

它应该工作，我想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:45:56.483

最好的解决方案是不创建全局变量，但这也可以：

```
require_once("../../constructor/database.php");

$stuff_inside_include_file->doThis() ; //ACCESSIBLE

function createUser(){
    global $stuff_inside_include_file;
    $stuff_inside_include_file->doThat(); //ACCESSIBLE
} 

function deleteUser(){
. ... 
```

但实际上……“放眼全球，立足本地”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:47:47.443

我相信这是变量不是全局的问题。

例如

```
$i = 10;

function pooppoop() {

    $i = 11;
    #this only sets the local variable i to 11

} 
```

所以你会想要放一个全局 $i; 在你的功能的顶部。显然将 $i 替换为您无法访问的变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T05:45:46.470

我看起来像 $stuff_inside_include_file 变量是在全局范围内，所以你应该能够做到这一点：

```
function createUser(){
   global $stuff_inside_include_file;
   $stuff_inside_include_file->doThat();
} 
```

# facebook - 无法通过 Facebook Graph API 将 Flash（SWF 文件）嵌入墙帖

> ID：10974944
> 
> 赞同：1
> 
> 时间：2012-06-11T05:41:37.917
> 
> 标签：facebook, facebook-graph-api, flash, facebook-wall

我正在尝试将 SWF 文件嵌入到墙上的帖子中，但它适用于 Youtube URL，但不适用于我自己的 URL。当它不起作用时，它甚至不会在帖子中显示图片。请参阅下面的代码。

这是工作：

```
$result = $facebook->api('/' . $postTo . '/feed' , 'post' , array(
            "name" => APP_NAME,
            "message" => mysql_real_escape_string($title2),
            "picture" => "http://www.mydomain.com/pinklogo.jpg", 
            "link" => fb_root(),
            "caption" => $title,
            "description" => $des,
            "source" => 'http://www.youtube.com/v/qAsx_PkkMu8'
        )); 
```

这个不行：

```
$result = $facebook->api('/' . $postTo . '/feed' , 'post' , array(
            "name" => APP_NAME,
            "message" => mysql_real_escape_string($title2),
            "picture" => "http://www.mydomain.com/pinklogo.jpg", 
            "link" => fb_root(),
            "caption" => $title,
            "description" => $des,
            "source" => 'http://www.mydomain.com/qAsx_PkkMu8.swf'
        )); 
```

在 Facebook 允许从我的域发布 SWF 之前，我是否需要做任何批准请求？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:04:56.593

您是否遇到了安全异常？您可能需要一个授予跨域脚本访问权限的跨域策略文件。swf 托管在 facebook.com 上的页面上，但正在尝试从 mydomain.com 加载资源。除非您的域明确允许，否则 Flash 播放器将阻止它。

[这个人](https://stackoverflow.com/questions/3850458/flex-app-cannot-download-images-from-other-servers)也有类似的问题。[这个问题](https://stackoverflow.com/questions/213251/can-someone-post-a-well-formed-crossdomain-xml-sample)有很多关于你的文件可能是什么样子的例子。

请注意，如果您在您的服务器上放置一个自由的跨域策略文件（例如允许“*”），您可能会使您网站的用户更容易受到跨站点脚本攻击。

有关 Adob​​e 的内容和原因，请参见[此处](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)、[此处](http://www.adobe.com/devnet/flash/articles/fplayer_security.html)和[此处](http://kb2.adobe.com/cps/142/tn_14213.html)。

# security - 密码管理 - 哈希、盐和迭代的方法

> ID：10974945
> 
> 赞同：0
> 
> 时间：2012-06-11T05:41:51.980
> 
> 标签：security, hash, passwords

在 SO 上已经解决了关于这个主题的几个问题，但我无法找到这个特定查询的答案。我看过给 [您的密码加盐：最佳实践？](https://stackoverflow.com/questions/674904/salting-your-password-best-practices)[以及对密码散列的非随机盐](https://stackoverflow.com/questions/536584/non-random-salt-for-password-hashes/536756#536756)的出色回答，它们都有非常有用的指导方针，但没有明确的存储指导方针。

是否建议将哈希、随机盐和迭代计数都放在同一个表中？如果没有，建议的方法是什么？

我确实明白，即使我们将它们放在一起，也不能轻易使用随机盐制作彩虹表。问题是因为有许多简单的额外威慑可以起到很长的作用。例如，将盐放在不同的表中（注入通常会浸出表，而不是 DB），而迭代计数在不同的层中（例如，中间层中的常量）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T08:22:04.137

我们已经在 Security Stack Exchange 上以各种形式回答了这个问题。

*   [用密码的前 8 位加盐](https://security.stackexchange.com/q/5189/485)- 一般认为这不是一个好主意
*   [拆分密码](https://security.stackexchange.com/q/2881/485)- 也没有好处

这些在概念上类似于您将所有信息保存在同一个表中的方法。

@Greg 的评论部分正确 - 一个坚定的攻击者最终将能够获得所有数据，但这里的关键是时间。如果有足够的时间和资源，熟练的攻击者将能够访问您的系统 - 关键是使其变得足够困难或嘈杂，以便您及时发现它。

来自密码学家 Thomas Pornin 在我们的 Security Stack Exchange 博客上的一篇文章：

*   [为什么要对密码进行哈希](http://security.blogoverflow.com/2011/11/why-passwords-should-be-hashed/)处理 - 我们对密码进行哈希处理是为了防止具有只读访问权限的攻击者升级到更高的权限级别。密码散列不会使您的网站免受攻击；它仍然会被黑客入侵。*密码散列是损害遏制。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:20:56.043

将盐和迭代计数与计算的哈希一起存储是正常模式。

盐不是秘密。盐通过对每个计算的散列不同而“起作用”。如果攻击者知道盐和迭代计数，它对他没有任何帮助。

# objective-c - Objective-C，如何混淆或加密 NSString？

> ID：10974946
> 
> 赞同：2
> 
> 时间：2012-06-11T05:42:10.623
> 
> 标签：objective-c, encryption, obfuscation

我的代码中有一个 NSString （它是文件的路径），我想以某种方式混淆或加密，

但仍然可以在需要时轻松调用文件路径。我搜索了这个问题的答案，但我所看到的一切要么专门针对 iOS，要么看起来过于复杂。

我只是想将它与这样的东西一起使用：

```
- (void)method {

NSString *obfuscate = @"/path/to/something/secret"; // encrypt or obfuscate

[self manageFiles:obfuscate]

- (void)manageFiles(NSString *)obfuscate {

    NSFileManager *files = [[NSFileManager alloc] init];

    if ([files fileExistsAtPath:obfuscate])

    ... . 
```

- 任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-26T20:15:52.213

（这是一个老问题，但我还是要回复）

在 Obj-C 中没有这样的方法。Obj-C 具有足够的动态性，任何这些方法都可以被捕获和拦截。不要在绝对需要保密的应用程序中发布任何内容。如果您的应用程序在越狱手机上运行，​​或者如果它在盗版网站上可用，那么它已经被暴露并且它的内存内容被转储。以上所有这些方法都将解码后的数据复制到公开的主存中。

见： [https ://www.youtube.com/watch?v=Ii-02vhsdVk](https://www.youtube.com/watch?v=Ii-02vhsdVk)

上述这些方法实际上都不安全。同样，不要将这些东西嵌入到您的应用程序中，以确保它们实际上是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:28:04.377

我过去为混淆字符串所做的事情是这样的：

```
-(NSString*)myString {

    NSString *string = nil;

    string = [@"ozzzzzzzzzzzzhazzzzzzzizzzzzz" stringByReplacingOccurrencesOfString:@"z" withString:@""];

    return string;
} 
```

它会做的是删除所有出现的 letter `z`，留下`ohai`一个字符串。不确定这是否足以满足您的情况，但它对我有用。

希望这可以帮助！

# java - 不同的输出试图执行相同的java代码

> ID：10974949
> 
> 赞同：0
> 
> 时间：2012-06-11T05:42:55.920
> 
> 标签：java, swing

我正在使用 net beans 7 ide 和 java 6 来开发我的 java 项目。我使用以下编码从串口读取值：

```
import java.io.*;
import java.util.*;
import javax.comm.*;

public class SimpleRead implements Runnable, SerialPortEventListener {

  static CommPortIdentifier portId;
  static Enumeration portList;

  InputStream inputStream;
  SerialPort serialPort;
  Thread readThread;

  public static void main(String[] args) {

    portList = CommPortIdentifier.getPortIdentifiers();
    JOptionPane.showMessageDialog(null, "portList :"+portList.hasMoreElements()); 
    while (portList.hasMoreElements()) {
      portId = (CommPortIdentifier) portList.nextElement();
      if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
       if (portId.getName().equals("COM3")) {
      //                if (portId.getName().equals("/dev/term/a")) {
        SimpleRead reader = new SimpleRead();
      }
    }
  }
}

public SimpleRead() {
  try {
    serialPort = (SerialPort) portId.open("SimpleReadApp", 2000);
  } catch (PortInUseException e) {System.out.println(e);}
  try {
    inputStream = serialPort.getInputStream();
  } catch (IOException e) {System.out.println(e);}
  try {
    serialPort.addEventListener(this);
  } catch (TooManyListenersException e) {System.out.println(e);}
  serialPort.notifyOnDataAvailable(true);
  try {
    serialPort.setSerialPortParams(9600,
      SerialPort.DATABITS_8,
      SerialPort.STOPBITS_1,
      SerialPort.PARITY_NONE);
  } catch (UnsupportedCommOperationException e) {System.out.println(e);}
  readThread = new Thread(this);
  readThread.start();
}

public void run() {
  try {
    Thread.sleep(20000);
  } catch (InterruptedException e) {System.out.println(e);}
}

public void serialEvent(SerialPortEvent event) {
  switch(event.getEventType()) {
    case SerialPortEvent.BI:
    case SerialPortEvent.OE:
    case SerialPortEvent.FE:
    case SerialPortEvent.PE:
    case SerialPortEvent.CD:
    case SerialPortEvent.CTS:
    case SerialPortEvent.DSR:
    case SerialPortEvent.RI:
    case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
    break;
    case SerialPortEvent.DATA_AVAILABLE:
    byte[] readBuffer = new byte[20];

    try {
      while (inputStream.available() > 0) {
        int numBytes = inputStream.read(readBuffer);
      }
      System.out.print(new String(readBuffer));
    } catch (IOException e) {System.out.println(e);}
    break;
  }
}
} 
```

当我从 netbeans 执行时，JOptionPane 显示“portList：true”，但是当我双击 jar 文件并尝试运行时，JOptionPane 显示“portList：false”

为什么有不同的输出试图执行相同的 java 代码

# sql - sql更新查询

> ID：10974951
> 
> 赞同：2
> 
> 时间：2012-06-11T05:43:38.907
> 
> 标签：sql, oracle

我想去掉列`_`中的所有前缀`name`，但结果可能会导致冲突。因此，如果结果与现有结果重复，我想给`_`它加上后缀，直到没有重复。

在下面的示例中，`_test`应重命名为`test___`.

```
create table A  
(  
  name  VARCHAR2(20) unique,  
  id int  
);  
insert into a (name, id) values ('_test', 1);  
insert into a (name, id) values ('test', 2);  
insert into a (name, id) values ('test_', 3);  
insert into a (name, id) values ('test__', 4); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T06:24:00.533

试试这个：

```
merge into A
using (with aa as (select id, trim('_' from name) name from A)
     select rpad(name,
               length(name) - 1 + row_number()
               over(partition by name order by id),
               '_') name2,
          id
     from AA) s
on (s.id = a.id)
when matched then
  update set a.name = s.name2 
```

# ios - XCode Storyboard - 视图出现在横向？

> ID：10974953
> 
> 赞同：1
> 
> 时间：2012-06-11T05:44:01.993
> 
> 标签：ios, xcode, storyboard, xcode4.3

构建一个开始相当简单的应用程序，但现在变得相当复杂。我面临一个奇怪的问题。我现在只使用故事板来定义我的所有视图。我面临的问题是，情节提要中的一些视图控制器以横向模式出现，而另一些则以纵向模式出现。

我知道它不会对最终的应用程序产生影响，但这让我很难设计和可视化事物。有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T05:48:24.053

单击故事板中的视图，单击模拟指标中的属性检查器（左上角第三个）将方向更改为纵向

# internet-explorer - IE9中的脚本错误

> ID：10974954
> 
> 赞同：0
> 
> 时间：2012-06-11T05:44:07.723
> 
> 标签：internet-explorer, process, error-handling, browser

我在 Internet Explorer 9.0 中收到并“停止运行此脚本”错误，但在 IE 8 及以下版本中是可以的，只有我在 IE 9 中收到它，谁能告诉我在 IE 9 上发生了什么变化，我已经搜索过这个问题，但大多数人试图使用微软提供的补丁来解决这个问题。

我需要知道为什么在 IE 8 上没问题，而在 IE 9 上却有问题！或者至少我需要做些什么来解决开发方面的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:03:13.940

我解决了这个问题 我自己，有一个 IE 9 的补丁，你可以安装它来解决这个问题

你可以从这里下载：http: [//download.microsoft.com/download/5/9/5/595D11B8-A0FD-4EA0-BF0D-F113258FC28A/MicrosoftFixit50403.msi](http://download.microsoft.com/download/5/9/5/595D11B8-A0FD-4EA0-BF0D-F113258FC28A/MicrosoftFixit50403.msi)

# google-docs - 将 google 表单和融合表与实时更新相关联，无需提交表单

> ID：10974955
> 
> 赞同：0
> 
> 时间：2012-06-11T05:44:15.997
> 
> 标签：google-docs, google-fusion-tables

我想将融合表与表格链接在一起。我将在课堂上为学生使用它来指示他们何时完成了不同的练习。我已阅读此页面： http: [//kh-samples.googlecode.com/svn/trunk/code/instructions.html](http://kh-samples.googlecode.com/svn/trunk/code/instructions.html) 这表明可以链接表单和融合表。

我希望学生能够在页面上更新他们的答案而无需点击提交，这样他们就可以在工作时轻松返回并更改内容。如果他们必须单击提交，那么他们将失去他们的位置，这不是我想要的。

有什么方法可以在他们回答问题时提交表单数据，而不必点击提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:54:32.967

我不确定这是否适用于 Google Forms 以及与 Fusion Tables 的同步。

需要研究的其他内容：为每个学生在 Fusion Table 上创建一个视图。他们可以编辑自己的表以添加/编辑行。您可以在基表中看到他们的答案全部汇总在一起。

这是一篇描述如何做到这一点的文章：http: [//support.google.com/fusiontables/bin/answer.py ?hl=en&answer=2584135](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=2584135)

在表格中，他们将有一个更简单的类似表单的界面，用于编辑给定行中的数据。您可以通过进入“实验”在您拥有的表格中自行检查，然后选择一行，然后单击铅笔图标进行编辑。

希望提供一个有用的替代方案，

-丽贝卡

# jquery - 禁用点击带有 hoverintent 的 # 链接

> ID：10974959
> 
> 赞同：1
> 
> 时间：2012-06-11T05:44:24.143
> 
> 标签：jquery, hoverintent

单击我为图像淡入使用hoverintent制作的此代码时，您将如何禁用链接。我现在使用的是命名锚，但它会跳转，所以我想禁用点击。

```
<A class="next2 nextbuttonB" href="#top">INSTALL</A>
<A class="next2 nextbuttonA" href="#top">ESTIMATE</A> 
```

和jQuery

```
$('#A,#B,').addClass('nextHide');

$('.nextbuttonA').hoverIntent(function() {
$('#A').fadeIn("slow");$('#B').fadeOut();
}, function() {
$('#B').hide();
});

$('.nextbuttonB').hoverIntent(function() {
$('#B').fadeIn("slow");$('#A').fadeOut();
}, function() {
$('#A').hide();
});     

$('.nextbutton').hoverIntent(function() {
$('#A,#B').fadeOut();
}, function() {
$('#A,#B').hide();
}); 

$('#A,#B').mouseleave(function(){
    $('#A,#B').fadeOut();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:49:05.437

要么做一个

`return false;`

或将事件传递`e`给您`function`并执行`e.preventDefault()`以下操作：

```
$('.next2').click(
    function(e){
       e.preventDefault(); //return false; //would also work
       //then do other stuff
}); 
```

另外，为什么要使用`#top`？如果你不希望它表现得像一个命名的锚？你可以只使用：

`<a href="javascript:void(0)">...</a>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T05:50:06.063

根据需要尝试此更改/添加选择器

```
$("#A,#B").click(function(event) {
  event.preventDefault();
}); 
```

# c# - Sharepoint 多列验证

> ID：10974962
> 
> 赞同：1
> 
> 时间：2012-06-11T05:44:34.850
> 
> 标签：c#, validation, list, sharepoint, sharepoint-2010

我有一个包含多列的自定义列表。验证由自定义内容类型进行。现在我希望两列的组合是唯一的。直到知道我没有找到用板载函数解决这个问题的方法，所以我的想法是使用 eventreceiver 或 customcontenttype。

我尝试了什么：

**列表事件接收器**

```
public override void ItemAdding(SPItemEventProperties properties)
       {

           if (properties.AfterProperties["a1"].ToString() == properties.AfterProperties["a2"].ToString())
           {
               properties.Status = SPEventReceiverStatus.CancelWithError;
               properties.Cancel = true;
               properties.ErrorMessage = "Failure";
           }
           base.ItemAdding(properties);
       } 
```

它工作正常，但错误消息不显示为验证错误。这是一个新的错误页面。 ![在此处输入图像描述](../Images/d61a3d24404a68b7949754db9fa2a6ba.png)

**自定义内容类型**

如果我尝试在自定义内容类型中进行验证，我将无法从内容类型访问其他字段的值。所以我不能比较两个字段或检查它们是否唯一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:21:04.340

如果你想使用`ItemEventReceiver`比你应该使用的验证`Sharepoint Error message page`。

它会让你更好地了解你的错误消息。我已经使用它了。

喜欢 ：

```
 if (properties.AfterProperties["a1"].ToString() == properties.AfterProperties["a2"].ToString())
       {
           properties.Status = SPEventReceiverStatus.CancelWithRedirectUrl;
           properties.RedirectUrl = properties.WebUrl + "/_layouts/error.aspx?ErrorText=Entry is Failure";
       } 
```

或者另一种方法是使用[PreSaveAction](http://ghamson.wordpress.com/2011/01/25/useful-javascript-function-presaveaction-sp2010-sharepoint-ps2010-projectserver-in/)和 javascript 能够对列表的表单进行验证。

# android - 如何在android中使用语音命令导航页面

> ID：10974965
> 
> 赞同：-2
> 
> 时间：2012-06-11T05:45:29.887
> 
> 标签：android, voice-recognition

如何在android中开发离线模式下的语音识别应用程序。

我用[了这个](http://swathiep.blogspot.com/2011/02/offline-speech-recognition-with.html)和[这个](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android)链接

但现在我需要改进我的应用程序以减少噪音。这意味着检测人声。所以我用

[Android 应用程序中的语音检测](https://stackoverflow.com/questions/7955041/voice-detection-in-android-application)

但我有错误，例如

> E/AndroidRuntime(16174)：原因：java.lang.IllegalArgumentException：0Hz 不是支持的采样率。04-06 15:03:01.729: E/AndroidRuntime(16174)

所以我恳请帮助我。如果有其他方法请告诉我

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:37:23.360

```
0Hz is not a supported sample rate 
```

建议您没有提供有效的采样率，再次检查该部分代码，看看您是否忘记了它

# javascript - 将python列表传递给javascript函数

> ID：10974969
> 
> 赞同：0
> 
> 时间：2012-06-11T05:46:26.907
> 
> 标签：javascript, python, json

我想将 python 列表作为参数传递给 JS 函数。无论我尝试什么，它都会给我“未终止的字符串文字”。我不知道出了什么问题。

我的python代码是（.py文件）：

```
request.filter+= '<input type="checkbox" name="select_all" onclick=selectAll(%s) />Select All <br/>' %(str(list)) 
```

我的 .pt 文件具有 javascript 功能，`selectAll(type)`.

我尝试使用`simplejson.JSONEncoder().encode(list)`which 将列表转换为 json 格式也无济于事。

请帮助...

谢谢，史瑞亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:42:58.333

希望这可以帮助：

```
import simplejson
request.filter+= '''<input type="checkbox" name="select_all" onclick='selectAll(%s)' />Select All <br/>''' % simplejson.dumps(list) 
```

# c# - 如何查找在 DocumentViewer 工具栏中创建的控件？

> ID：10974974
> 
> 赞同：-2
> 
> 时间：2012-06-11T05:46:50.243
> 
> 标签：c#, wpf

我`TextBox`在 的工具栏中创建了一个控件，`DocumentViewer`用于显示当前页码。并为用户提供 GoTo 类型的设施。

以下是代码：

```
<Style x:Key="DocumentViewerStyle1" BasedOn="{x:Null}" TargetType="{x:Type DocumentViewer}">
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="ContextMenu" Value="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerContextMenu, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DocumentViewer}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Focusable="False">
                        <Grid Background="{TemplateBinding Background}" KeyboardNavigation.TabNavigation="Local">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ContentControl Grid.Column="0" Focusable="{TemplateBinding Focusable}" Grid.Row="0" Style="{DynamicResource ContentControlStyle1}" TabIndex="0"/>
                            <ScrollViewer x:Name="PART_ContentHost" CanContentScroll="true" Grid.Column="0" Focusable="{TemplateBinding Focusable}" HorizontalScrollBarVisibility="Auto" IsTabStop="true" Grid.Row="1" TabIndex="1"/>
                            <DockPanel Grid.Row="1">
                                <FrameworkElement DockPanel.Dock="Right" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>
                                <Rectangle Height="10" Visibility="Visible" VerticalAlignment="top">
                                    <Rectangle.Fill>
                                        <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                            <LinearGradientBrush.GradientStops>
                                                <GradientStopCollection>
                                                    <GradientStop Color="#66000000" Offset="0"/>
                                                    <GradientStop Color="Transparent" Offset="1"/>
                                                </GradientStopCollection>
                                            </LinearGradientBrush.GradientStops>
                                        </LinearGradientBrush>
                                     </Rectangle.Fill>
                                </Rectangle>

                                <!--<Image Grid.Column="0" Grid.Row="2" Width="100"/>-->
                            </DockPanel>
                            <!--<TextBlock Grid.Row="2" Grid.Column="0" x:Name="txtBlock" Text="Hello World"/>-->
                            <ContentControl x:Name="PART_FindToolBarHost" Grid.Column="0" Focusable="{TemplateBinding Focusable}" Grid.Row="2" TabIndex="2"/>
                            <TextBlock Text="Aspire Education" Grid.Row="2" Grid.Column="0" Margin="300,0,0,0" Foreground="#FF0758DC" FontSize="18" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ContentControlStyle1" TargetType="{x:Type ContentControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ContentControl}">
                    <ToolBar Focusable="{TemplateBinding Focusable}" ToolBarTray.IsLocked="True" Language="en-us" KeyboardNavigation.TabNavigation="Continue" Uid="ToolBar_2">
                        <Button x:Name="PrintButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerPrintButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" Command="ApplicationCommands.Print" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerButtonStyle, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" ToolTipService.ShowOnDisabled="True" TabIndex="0" ToolTip="Print (Ctrl+P)" Uid="Button_14" VerticalAlignment="Center" Width="24"/>
                        <Button x:Name="CopyButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerCopyButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" Command="ApplicationCommands.Copy" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerButtonStyle, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" ToolTipService.ShowOnDisabled="True" TabIndex="1" ToolTip="Copy (Ctrl+C)" Uid="Button_15" VerticalAlignment="Center" Width="24"/>
                        <Separator Uid="Separator_110"/>
                        <Button x:Name="ZoomInButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerZoomInButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" Command="NavigationCommands.IncreaseZoom" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerButtonStyle, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" ToolTipService.ShowOnDisabled="True" TabIndex="3" ToolTip="Increase the size of the content (Ctrl +)" Uid="Button_16" VerticalAlignment="Center" Width="24"/>
                        <Button x:Name="ZoomOutButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerZoomOutButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" Command="NavigationCommands.DecreaseZoom" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerButtonStyle, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" ToolTipService.ShowOnDisabled="True" TabIndex="4" ToolTip="Decrease the size of the content (Ctrl -)" Uid="Button_17" VerticalAlignment="Center" Width="24"/>
                        <Separator Uid="Separator_111"/>
                        <Button x:Name="ActualSizeButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerActualSizeButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" CommandParameter="100.0" Command="NavigationCommands.Zoom" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource ButtonStyle1}" ToolTipService.ShowOnDisabled="True" TabIndex="5" ToolTip="100% (Ctrl+1)" Uid="Button_18" VerticalAlignment="Center" Width="24"/>
                        <Button x:Name="PageWidthButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerPageWidthButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" Command="DocumentViewer.FitToWidthCommand" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerButtonStyle, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" ToolTipService.ShowOnDisabled="True" TabIndex="6" ToolTip="Page Width (Ctrl+2)" Uid="Button_19" VerticalAlignment="Center" Width="24"/>
                        <Button x:Name="WholePageButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerWholePageButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" CommandParameter="1" Command="DocumentViewer.FitToMaxPagesAcrossCommand" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerButtonStyle, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" ToolTipService.ShowOnDisabled="True" TabIndex="7" ToolTip="Whole Page (Ctrl+3)" Uid="Button_20" VerticalAlignment="Center" Width="24"/>
                        <Button x:Name="TwoPagesButton" Background="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerTwoPagesButton, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" CommandTarget="{Binding TemplatedParent, RelativeSource={RelativeSource TemplatedParent}}" CommandParameter="2" Command="DocumentViewer.FitToMaxPagesAcrossCommand" IsTabStop="True" Margin="2" Padding="2" Style="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerButtonStyle, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}" ToolTipService.ShowOnDisabled="True" TabIndex="8" ToolTip="Two Pages (Ctrl+4)" Uid="Button_21" VerticalAlignment="Center" Width="24"/>
                        <Separator Uid="Separator_112"/>
                        <TextBox x:Name="txtCurrentPage" Text="580" Width="30" BorderBrush="Black" TextChanged="txtCurrentPage_TextChanged"></TextBox>
                        <TextBox x:Name="txtTotalPage" Text="/250" Width="40" IsReadOnly="True" BorderBrush="Black" Foreground="Black"></TextBox>
                    </ToolBar>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

但是当我试图访问该文本框时，它显示为空。

这是我的代码。

```
 private void txtCurrentPage_TextChanged(object sender, TextChangedEventArgs e)
    {
        MainWindow mn = new MainWindow();
        TextBox tb = (TextBox)mn.FindName("txtCurrentPage");

        if (tb != null)
        {
            DocumentViewerReading.GoToPage(Convert.ToInt32(tb.Text));
        }
    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:57:09.017

您不需要再次找到该控件，它的引用应该在 sender 参数中。

```
private void txtCurrentPage_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox tb = (TextBox)sender;

        if (tb != null)
        {
            DocumentViewerReading.GoToPage(Convert.ToInt32(tb.Text));
        }
    } 
```

每次文本框的内容发生更改并尝试在该新窗口中查找文本框时，您都在创建一个新的窗口实例，这不是它应该如何工作的，因为您已经有了一个窗口实例用户在上面打字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T10:09:38.050

以下是完整的解决方案：-

```
<Style x:Key="DocumentViewerStyle1" BasedOn="{x:Null}" TargetType="{x:Type DocumentViewer}">
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="ContextMenu" Value="{DynamicResource {ComponentResourceKey ResourceId=PUIDocumentViewerContextMenu, TypeInTargetAssembly={x:Type System_Windows_Documents:PresentationUIStyleResources}}}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DocumentViewer}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Focusable="False">
                        <Grid x:Name="grdDocumentViewer" Background="{TemplateBinding Background}" KeyboardNavigation.TabNavigation="Local">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ContentControl Grid.Column="0" Focusable="{TemplateBinding Focusable}" Grid.Row="0" Style="{DynamicResource ContentControlStyle1}" TabIndex="0"/>
                            <ScrollViewer x:Name="PART_ContentHost" CanContentScroll="true" Grid.Column="0" Focusable="{TemplateBinding Focusable}" HorizontalScrollBarVisibility="Auto" IsTabStop="true" Grid.Row="1" TabIndex="1"/>
                            <DockPanel Grid.Row="1">
                                <FrameworkElement DockPanel.Dock="Right" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"/>
                                <Rectangle Height="10" Visibility="Visible" VerticalAlignment="top">
                                    <Rectangle.Fill>
                                        <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                            <LinearGradientBrush.GradientStops>
                                                <GradientStopCollection>
                                                    <GradientStop Color="#66000000" Offset="0"/>
                                                    <GradientStop Color="Transparent" Offset="1"/>
                                                </GradientStopCollection>
                                            </LinearGradientBrush.GradientStops>
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                </Rectangle>

                                <!--<Image Grid.Column="0" Grid.Row="2" Width="100"/>-->
                            </DockPanel>
                            <!--<TextBlock Grid.Row="2" Grid.Column="0" x:Name="txtBlock" Text="Hello World"/>-->
                            <ContentControl x:Name="PART_FindToolBarHost" Grid.Column="0" Focusable="{TemplateBinding Focusable}" HorizontalAlignment="Right" Margin="0,0,20,0" Grid.Row="0" TabIndex="2"/>
                            <TextBlock x:Name="tbTopicName" Text="" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center" Margin="0,2,0,0" Foreground="#FF0758DC" FontSize="20" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

//**下面是后面的代码**

```
Grid gMain = (Grid)DocumentViewerReading.Template.FindName("grdDocumentViewer", DocumentViewerReading);
        TextBlock tb = (TextBlock)gMain.FindName("tbTopicName");
        tb.Text = header; 
```

就是这样。谢谢安迪。

# php - 如何在 url 中运行没有应用程序名称的 cakephp 网站？

> ID：10974979
> 
> 赞同：0
> 
> 时间：2012-06-11T05:47:40.843
> 
> 标签：php, .htaccess, cakephp, routes

我在 cakephp2.1.3 版本中有两个应用程序，一个是管理员，第二个是 web，我想在没有我的应用程序名称的情况下运行我的网站，比如没有'web'，当前网站 url 是'http://localhost/cakephp2.1.3/web /customers/index' 但我需要使用'http://localhost/cakephp2.1.3/customers/index' 访问。

我当前的 .htaccess 是

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^admin/$ admin/webroot/ [L]
    RewriteRule ^$ web/webroot/ [L]
    RewriteRule (.*) web/webroot/$1 [L]
</IfModule> 
```

我刚刚更改了外部 index.php

```
define('APP_DIR', 'web'); 
```

当我尝试访问“http://localhost/cakephp2.1.3/customers/index”时出现错误

```
Error: Cakephp-2.1.3Controller could not be found.
Error: Create the class Cakephp-2.1.3Controller below in file: web\Controller\Cakephp-2.1.3Controller.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:05:09.357

假设您无法添加新域和新 VirtualHost，请查看 apache 的[mod_alias](https://httpd.apache.org/docs/2.0/mod/mod_alias.html)，它可以将 url 映射到（不同的）文件系统位置。

在你的情况下，你需要这样的东西：

```
Alias /cakephp2.1.3 /cakephp2.1.3/web/ 
```

# google-maps - Flex 4.0 地图集成

> ID：10974984
> 
> 赞同：0
> 
> 时间：2012-06-11T05:48:16.080
> 
> 标签：google-maps, apache-flex, flex4.5

我刚开始使用 flex 4.5，作为 Flex 的新手，我意识到 Google 地图在 Flex 中不再可用。我搜索了互联网，但没有找到解决方案。事实上，谷歌网站说它已被弃用，我们不再为它提供密钥。我担心的是，没有办法集成它，或者有什么技巧可以将 Google Maps 与 Flex 4.5 集成。或者我可能错过了一些整合点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:46:32.333

是的，Google Maps for Flash/Flex 似乎已被放弃，但您可以使用[MapQuest 地图](http://devgirl.org/2011/12/06/flex-mobile-development-adding-maps-with-mapquest-flash-api-w-sample-app/)，即使在 Flex Mobile 应用程序中也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:20:33.903

[Google Maps API for Flash](https://developers.google.com/maps/documentation/flash/)已于 2011 年 9 月 2 日正式弃用。这里提到了一些解决方法和替代地图服务：

*   [在 Flex 中嵌入 Google Maps API Javascript](https://stackoverflow.com/questions/10108677/embed-a-google-maps-api-javascript-in-flex)
*   [https://stackoverflow.com/questions/8713760/which-maps-api-for-flex](https://stackoverflow.com/questions/8713760/which-maps-api-for-flex)

# php - 我想在指定的时间间隔内连续运行以下 php 脚本，并且可以由用户使用表单进行设置。这该怎么做？

> ID：10974985
> 
> 赞同：-2
> 
> 时间：2012-06-11T05:48:22.130
> 
> 标签：php

//我需要重复运行这个脚本，时间间隔可以由用户设置

// 检查互联网连接

```
if (!$sock = fsockopen("www.google.com", 80, $errno, $errstr,20))
    {
?>
<script type="text/javascript">

alert("Connection problem");

</script>

<?php       
    } 
```

// 从数据库中检索数据并检查站点是否已关闭

```
else
    {
    for($i=0;$i<count($res);$i++)
        {
        $fp=fsockopen($res[$i]['url'],80,$errno,$errstr,30);
        if($fp==false)
            {
 ?>
 <script type="text/javascript">

 alert("Website is down");

 </script>

 <?php 
```

// 将数据写入数据库并发送邮件

```
mail($email[0]['email_id'],"website is down",$res[$i]['url']." is down");
    $inputs=array('website_id'=>$res[$i['website_id'],
    'date'=>date("Y-m-d H:i:s"),'reason'=>"website down");
$obj3->addLog($inputs);
         }
    }
}
sleep(300);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:55:16.483

看`cron`服务。[这里](https://stackoverflow.com/q/120228/1056693)已经有人解释过了。

如果你想让它保持网页的形式，自动重新加载，那么看看 JavaScript 函数`setTimeout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:02:19.490

您对 cron 的问题是 this `"and the time interval can be set by a user"`。

您可以使用`cron`这样的方式，即每 30 秒或每 N 秒运行一次脚本。这是您运行脚本的**最小粒度**。

现在，如果用户设置该脚本必须每 30 分钟运行一次，那么您在脚本中做的第一件事就是检查是否需要继续执行脚本 - 如果最后一次运行是在该用户设置的 30 分钟之前。脚本伪是这样的：

```
1) load last run from DB, compare it with interval - do we need to proceed, if not exit
2) do what script needs to do
3) save to the DB last run time 
```

当然，这一切只是必要的，如果用户需要能够**动态更改运行间隔**并且不想触摸 cron。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:56:46.187

有几种方法可以做到这一点。首先，您可以使用[cron 作业](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)在设定的时间自动运行脚本。您的 javascript 将无法工作，因为 PHP 脚本将直接在服务器上运行，您将无法在浏览器中显示任何内容。

如果您希望用户在执行所有这些操作时打开页面，以便脚本可以在屏幕上报告数据，我只需将 URL 中的时间设置为 GET 参数`mypage.php?refreshTime=1800`，然后使用读取它`$_GET['refreshTime']`，然后使用以下行设置刷新时间。

```
<meta http-equiv="refresh" content="$refreshTime"> 
```

这将导致页面在`$refreshTime`几秒钟后重新加载。你的 PHP 做它需要做的任何事情都会在每次刷新时运行，就像你现在加载页面时一样。

# ios - iOS应用程序冻结，在webview中加载视频时不会崩溃

> ID：10974987
> 
> 赞同：4
> 
> 时间：2012-06-11T05:48:38.780
> 
> 标签：ios, html, video, safari

我有一个使用名为 OpenPlug 的第三方工具开发的 iPad 应用程序，它将 AS3 转换为 C++ 并从那里导出到 iOS。（只是想注意这不是我编写的在 XCode 中使用 Obj-C 的“本机”应用程序，我编写了 AS3）

现在我有了这个以幻灯片形式显示图片和视频的 iPad 应用程序。对于视频，我使用的是加载 HTML 页面的 WebView，在该页面中，我将视频对象的 src 属性更改为下载到我的应用程序存储的视频文件的位置。这工作正常，只是应用程序在运行几个小时 (3-6) 时冻结。

我搜索了这个问题，并[在加载/卸载 HTML5 <video> 时尝试了 iOS Safari 内存泄漏](https://stackoverflow.com/questions/5170398/ios-safari-memory-leak-when-loading-unloading-html5-video)中的解决方案，但这对我来说似乎没有任何改变。

由于应用程序冻结（就在 HTML 页面需要加载视频之前）并且没有崩溃，这意味着什么？我需要销毁视频对象吗？首先，我为每个视频创建了一个新的 WebView，但现在我重用了 webview，只是更改了 src 属性，但这也对我没有帮助。

任何人都可以对此有所了解吗？OpenPlug 已停止服务，不再提供任何支持，但我认为这更像是 iPad 上的 webview/video 问题（？）

需要注意的重要一点：应用程序正在冻结，但我的 iPad 没有。该应用程序不会生成崩溃报告，也不会再执行任何代码（也没有跟踪）。当我按下 iPad 上的主页按钮并按下应用程序图标时，应用程序将重新启动。

这是我的 HTML 页面的代码，每次需要启动新视频时都会刷新（webview.location = ...）

```
<html>
    <head>
        <script>
            function videoEndedHandler(){
                var video = document.getElementById("videoPlayer");
                video.src = "";
                video.load();
                window.location.hash = "ended";
            }

            function videoErrorHandler(){
                window.location.hash = "error";
                var video = document.getElementById("videoPlayer");
                video.src = "";
                video.load();
            }

                                    var loop;
                                    function setup(){
                                        var video = document.getElementById("videoPlayer");
                                        video.addEventListener("error", videoErrorHandler,false);
                                        video.addEventListener("ended", videoEndedHandler,false);
                                        video.load();
                                        video.play();
                                        startHashLoop();
                                    }

                                    function startHashLoop(){
                                        if(window.location.hash == "#touched"){
                                            setAsPaused();
                                        }

                                        if(window.location.hash == "#paused"){
                                            //check image
                                            testImage("shouldResume.png?nocache=" + Math.random());
                                        }

                                        if(window.location.hash == "#resume"){
                                            var video = document.getElementById("videoPlayer");
                                            video.play();
                                        }

                                        loop = setTimeout(hashLoop,500);
                                    }

                                    function testImage(url) {
                                        var img = new Image;
                                        img.addEventListener("load",isGood);
                                        img.addEventListener("error",isBad);

                                        img.src = url;
                                    }

                                    function isGood() {
                                        window.location.hash = "resume";
                                    }

                                    function isBad() {
                                        //alert("Image does not exist");
                                    }

                                    function hashLoop(){
                                        startHashLoop();
                                    }

                                    function setAsTouched(){
                                        window.location.hash = "touched";
                                    }

                                    function setAsPaused(){
                                        var video = document.getElementById("videoPlayer");
                                        video.pause();
                                        window.location.hash = "paused";
                                    }
                                    </script>
    </head>

    <body onload="setup();" style="background-color:#000000;">
    <a href="javascript:setAsTouched()" style="top:0;left:0;position:absolute;z-index:1;color:#FF0000;border:0px solid red;width:100%;height:100%;display:block;"></a>
        <video id="videoPlayer" style="top:0;left:0;position:absolute;" width="100%" height="100%" preload="auto" src="##VIDEO_URL##" autoplay="autoplay" webkit-playsinline />

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:56:50.517

如果您发布整个代码会很有帮助，但我认为它会冻结，因为您正在主线程中从网络加载视频，这也负责重绘 UI。通过在线程中加载大型视频，您的 UI 也会冻结。

我建议将执行视频加载的代码移动到单独的线程中（如果您使用的是 iOS5，请使用块）。

# c# - 如何在 ASP.NET 中设置下拉列表项？

> ID：10974992
> 
> 赞同：39
> 
> 时间：2012-06-11T05:49:11.340
> 
> 标签：c#, asp.net

我想为asp设置selecteditem。net dropdownlist 以编程方式控制。

所以我想将一个值传递给下拉列表控件以设置选定的项目，其中项目的值等于传递的值。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-11T05:55:44.700

```
dropdownlist.ClearSelection(); //making sure the previous selection has been cleared
dropdownlist.Items.FindByValue(value).Selected = true; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-11T05:49:44.470

您可以将 设置为`SelectedValue`您要选择的值。如果您已经选择了项目，那么您应该清除选择，否则您会收到“[不能在 DropDownList 中选择多个项目](https://stackoverflow.com/questions/5138287/cannot-have-multiple-items-selected-in-a-dropdownlist)”错误。

```
dropdownlist.ClearSelection();
dropdownlist.SelectedValue = value; 
```

您还可以使用[ListItemCollection.FindByText](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbytext%28v=vs.110%29.aspx)或[ListItemCollection.FindByValue](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbyvalue%28v=vs.110%29.aspx)

```
dropdownlist.ClearSelection();  
dropdownlist.Items.FindByValue(value).Selected = true; 
```

> 使用 FindByValue 方法在集合中搜索具有 Value 属性的 ListItem，该属性包含由 value 参数指定的值。此方法执行区分大小写和不区分区域性的比较。此方法不执行部分搜索或通配符搜索。如果使用此条件在集合中未找到项目，则返回 null，[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.findbyvalue%28v=vs.110%29.aspx)。

如果您希望您可能正在寻找不会出现在`DropDownList`ListItem 集合中的文本/值，那么您必须检查您是否获得了该`ListItem`对象`null`，`FindByText`或者`FindByValue`在您访问 Selected 属性之前或之前。如果您在返回 null 时尝试访问 Selected ，那么您将得到[NullReferenceException](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception.aspx)。

```
ListItem listItem = dropdownlist.Items.FindByValue(value);

if(listItem != null) 
{
   dropdownlist.ClearSelection();
   listItem.Selected = true;
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-11T05:58:33.863

您可以使用 FindByValue 方法在 DropDownList 中搜索具有与参数匹配的值的项。

```
dropdownlist.ClearSelection();
dropdownlist.Items.FindByValue(value).Selected = true; 
```

或者，您可以使用 FindByText 方法在 DropDownList 中搜索具有与参数匹配的文本的项。

在使用 FindByValue 方法之前，不要忘记重置 DropDownList 以便使用 ClearSelection() 方法不选择任何项目。它清除列表选择并将所有项目的 Selected 属性设置为 false。否则你会得到以下异常。

```
"Cannot have multiple items selected in a DropDownList" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T05:56:47.437

这是一个非常好的和干净的例子：（查看这个很棒的教程以获得完整的解释[链接](http://odetocode.com/blogs/scott/archive/2010/01/18/drop-down-lists-and-asp-net-mvc.aspx)）

```
public static IEnumerable<SelectListItem> ToSelectListItems(
              this IEnumerable<Album> albums, int selectedId)
{
    return 
        albums.OrderBy(album => album.Name)
              .Select(album => 
                  new SelectListItem
                  {
                    Selected = (album.ID == selectedId),
                    Text = album.Name,
                    Value = album.ID.ToString()
                   });
} 
```

在这个 MSDN[链接](http://msdn.microsoft.com/en-us/library/dd470380.aspx)中，您可以阅读`DropDownList`方法文档。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-04-22T09:46:28.123

设置下拉属性

```
selected="true" 
```

# google-bigquery - 无状态令牌过期

> ID：10974996
> 
> 赞同：0
> 
> 时间：2012-06-11T05:50:01.880
> 
> 标签：google-bigquery

我每天都会上传几个文件，其中大约一半是成功的。某些作业返回错误...

```
BigQuery error in load operation: Token invalid - Invalid token: Stateless token expired 
```

我在我的服务器上使用 IST 日期格式（如果重要的话）

```
 date

Mon Jun 11 11:14:23 IST 2012 
```

作业成功的相关日志如下：

```
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (1s) Current status: PENDING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (4s) Current status: PENDING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (7s) Current status: PENDING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (10s) Current status: PENDING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (14s) Current status: PENDING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (17s) Current status: RUNNING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (20s) Current status: RUNNING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (23s) Current status: RUNNING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (26s) Current status: RUNNING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (29s) Current status: RUNNING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (32s) Current status: RUNNING 
Waiting on job_9847e7bb715f40d994becff8e5f4ac1a ... (33s) Current status: DONE 
```

为什么我只收到一些正在上传的文件的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:35:28.923

另一位 Google 员工向我指出了这个潜在的问题——它本质上是 Python 客户端库（bq 工具基于该库）中的一种竞争条件。Google OAuth 2.0 访问令牌目前的有效期为 1 小时，之后客户端 lib（或 bq）会尝试使用存储的刷新令牌获取新的令牌。但是，如果您在 1 小时边界附近开始新的数据上传，则令牌将失效。

根据这个帖子，我们很快就会推出一个新版本的底层 python lib，这应该可以解决 bq 命令行工具的新版本中的问题。

请参阅：[https ://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/n3dZqmHMyp0](https://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/n3dZqmHMyp0)