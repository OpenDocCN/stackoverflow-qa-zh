# StackOverflow 问答 12278000-12278999

# java - 我可以使用 Spring Security 将完整的用户信息存储在 cookie 中吗？

> ID：12278009
> 
> 赞同：1
> 
> 时间：2012-09-05T09:09:11.633
> 
> 标签：java, cookies, spring-security, remember-me

我想将其他用户信息存储在 cookie 中，例如带有用户名和密码的 userId。当我使用弹簧安全记住我功能时，我可以从 cookie 中获取用户名。

在 spring-security.xml 我使用自定义 userDetailService 并且我已经实现了它

```
 <http>
 ......   
 <logout invalidate-session="true" 
        logout-success-url="/" 
        logout-url="/logout.htm"/>
 <remember-me user-service-ref="myUserDetailsService" key="89dqj219dn910lsAc12" token-validity-seconds="864000"/>
</http>

<authentication-manager>
        <authentication-provider user-service-ref="myUserDetailsService">
                <password-encoder ref="myEnocdePassword" >
                    <salt-source user-property="username"/>
                </password-encoder>
        </authentication-provider>
</authentication-manager>   
<beans:bean id="myEnocdePassword" class="com.mycom.myproject.utility.MyEnocdePassword" /> 
```

在 MyUserDetailService.java 我有类似的代码

```
 @Override
public UserDetails loadUserByUsername(String username)
        throws UsernameNotFoundException, DataAccessException {

    try {

    boolean enabled = true;
    boolean accountNonExpired = true;
    boolean credentialsNonExpired = true;
    boolean accountNonLocked = true;

    com.mycom.myproject.db.mybatis.model.User domainUser = userService.getUserByName(username);

    return  new User(
            domainUser.getUsername(), 
            domainUser.getPassword(),
            enabled,
            accountNonExpired,
            credentialsNonExpired,
            accountNonLocked,
            getAuthorities(domainUser.getRoleId);

    } catch (Exception e) {
        throw new RuntimeException(e);
    } 
```

在我的控制器类中，我可以使用

```
 String name = SecurityContextHolder.getContext().getAuthentication()
            .getName(); 
```

但我想将其他用户详细信息存储在 userId 等 cookie 中。我怎么能这样做？我是否需要通过 userDao(name) 获取用户信息，然后手动将用户信息存储在 cookie 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:41:21.567

在这种情况下，您不需要对 cookie 做任何事情。

只要用户登录（无论他如何登录 - 使用登录表单或“记住我”），您就可以从Spring Security访问`UserDetails`该用户。`SecurityContext`

因此，您只需将所需信息放入`UserDetails`（如有必要，`UserDetailsService.loadUserByUsername()`使用您自己的子类`UserDetails`），并通过以下方式访问它`SecurityContext`：

```
Authentication auth = SecurityContextHolder.getContext().getAuthentication();
if (auth != null) {
    Object principal = auth.getPrincipal();  
    if (principal instanceof UserDetails) {
        UserDetails user = (UserDetails) principal;
        ... // User is logged in, now you can access its details
    }
} 
```

换句话说，当 Spring Security 收到一个没有活动会话但带有记住我 cookie 的请求时，它使用来自 cookie 的用户身份来加载`UserDetails`并将它们放入`SecurityContext`（并放入新创建的会话会话中）。稍后您可以从 访问这些详细信息 `SecurityContext`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:49:03.557

通常已经有一个 Cookie！您可以将值存储在 Session 中。

如果您想长时间存储这些值，可以使用 Session-Passivation。

# android - Android 片段布局

> ID：12278010
> 
> 赞同：6
> 
> 时间：2012-09-05T09:09:15.553
> 
> 标签：android, android-layout, android-fragments, fragment

## 创建简单片段示例时出现以下错误。

```
09-05 07:57:28.570: E/AndroidRuntime(1138): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.fragment_one.f_one: make sure class name exists, is public, and has an empty constructor that is public
09-05 08:57:03.058: E/AndroidRuntime(1477): FATAL EXCEPTION: main
09-05 08:57:03.058: E/AndroidRuntime(1477): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragments_one/com.example.fragments_one.MainActivity}: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.os.Looper.loop(Looper.java:137)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at java.lang.reflect.Method.invokeNative(Native Method)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at java.lang.reflect.Method.invoke(Method.java:511)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at dalvik.system.NativeStart.main(Native Method)
09-05 08:57:03.058: E/AndroidRuntime(1477): Caused by: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.Activity.setContentView(Activity.java:1835)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at com.example.fragments_one.MainActivity.onCreate(MainActivity.java:12)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.Activity.performCreate(Activity.java:4465)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-05 08:57:03.058: E/AndroidRuntime(1477):     ... 11 more
09-05 08:57:03.058: E/AndroidRuntime(1477): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.fragment_one.f_one: make sure class name exists, is public, and has an empty constructor that is public
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.support.v4.app.Fragment.instantiate(Fragment.java:395)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.support.v4.app.Fragment.instantiate(Fragment.java:363)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:264)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
09-05 08:57:03.058: E/AndroidRuntime(1477):     ... 21 more
09-05 08:57:03.058: E/AndroidRuntime(1477): Caused by: java.lang.ClassNotFoundException: com.example.fragment_one.f_one
09-05 08:57:03.058: E/AndroidRuntime(1477):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
09-05 08:57:03.058: E/AndroidRuntime(1477):     at android.support.v4.app.Fragment.instantiate(Fragment.java:385)
09-05 08:57:03.058: E/AndroidRuntime(1477):     ... 24 more 
```

* * *

主要活动

```
package com.example.fragments_one;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/f_one"
        android:name="com.example.fragment_one.f_one"
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <fragment
        android:id="@+id/f_two"
        android:name="com.example.fragment_one.f_two"
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

片段布局

1.f_one.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#00FF00"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is fragment #1"
        android:textColor="#000000"
        android:textSize="25sp" />

</LinearLayout> 
```

f_two.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFE00"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is fragment #2"
        android:textColor="#000000"
        android:textSize="25sp" />

</LinearLayout> 
```

我的片段类

```
package com.example.fragments_one;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class f_one extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // ---Inflate the layout for this fragment---
        return inflater.inflate(R.layout.f_one, container, false);
    }
} 
```

* * *

```
package com.example.fragments_one;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class f_two extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // ---Inflate the layout for this fragment---
        return inflater.inflate(R.layout.f_two, container, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T09:15:06.527

您需要在片段中提及**类：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<fragment
    android:id="@+id/f_one"
    android:name="com.example.fragment_one.f_one"
    class="com.example.fragment_one.f_one"
    android:layout_width="0px"
    android:layout_height="match_parent"
    android:layout_weight="1" />

<fragment
    android:id="@+id/f_two"
    android:name="com.example.fragment_one.f_two"
    class="com.example.fragment_one.f_two"
    android:layout_width="0px"
    android:layout_height="match_parent"
    android:layout_weight="1" />

</LinearLayout> 
```

# ruby-on-rails - 如何测试Controller中是否发生异常？

> ID：12278012
> 
> 赞同：0
> 
> 时间：2012-09-05T09:09:23.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
# controller
def index
  p = params[:p]        
  raise ABCException if p
end

# test
test "expect index controller raise ABCException" do
  assert_raise ABCException do
    # how do I write this block?
  end
end 
```

我想用*:p => true调用**索引*控制器来引发异常。我了解 assert_raise 函数，但不知道如何像最终用户请求一样调用控制器。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:14:56.370

你可以做

```
assert_raise ABCException do
  get :index, :p => true
end 
```*

# iphone - UISearchBar 失去焦点

> ID：12278016
> 
> 赞同：0
> 
> 时间：2012-09-05T09:09:33.287
> 
> 标签：iphone, ios, ios5

我有一个 UISearchBar 和一个单独的 UITableView。当用户在 SearchBar 中键入内容时，我会调用我的 API，然后重新加载 TableView 以显示新结果。每次 TableView 重新加载 SearchBar 都会失去焦点。我怎样才能防止这种情况？

我试过`[_searchBar becomeFirstResponder];`但没有帮助。还有其他想法吗？

谢谢你的帮助。

（编辑）我用来重新加载数据的代码：

```
[self.fetchedResultsController updateWithObjectList:_newList removeMissing:YES];

- (void)updateWithObjectList:(NSArray *)objectList removeMissing:(BOOL)removeMissing {
    if (removeMissing) {
        [self removeObjectList:[_objects allValues]];
    }
    [self addObjectList:objectList];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:21:18.283

看起来您正在处理数据源的手工构建（非`CoreData`）数组。`TablevView`如果是这样，你为什么要使用`fetchedResultsController`?

为什么不为 TableView 重建数组（数据源），然后调用

```
[self.myTableView reloadData]; 
```

（用您调用的任何内容替换`TableView`myTableView）。如果您需要有关如何执行此操作的完整示例，请告诉我。

# java - 从 Hibernate 中的 DB 获取日期后，我们可以使用什么监听器？

> ID：12278017
> 
> 赞同：0
> 
> 时间：2012-09-05T09:09:33.447
> 
> 标签：java, hibernate, listener

在 Hibernate 4.0.1.Fianl 中，

将**数据插入**数据库后，我们可以调用----> PostInsertEventListener ----覆盖方法---------> onPostInsert从数据库中**删除数据**后，我们可以调用----> PostDeleteEventListener --- -override method-----> onPostDelete 将**数据更新**到DB后，我们可以调用----> PostUpdateEventListener ----override method-----> onPostUpdate

仅此而已，我们可以使用什么侦听器从数据库中获取数据？

**从数据库获取数据** 后，我们可以使用 ---------> ???? （Hibernate 中的监听器）

请任何人帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:43:00.200

您可以使用`LoadEventListener`扩展 hibernate 的实现`DefaultLoadEventListener`：

```
 // this is the single method defined by the LoadEventListener interface
public void onLoad(LoadEvent event, LoadEventListener.LoadType loadType) 
        throws HibernateException {
        super.onLoad(event, loadType);

        //do something post load
    }
} 
```

`super.onLoad()`处理默认加载，**然后**你可以做你的事情。

另请参阅[与事件系统相关的休眠文档](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html_single/#objectstate-events)以及[如何在休眠开发指南中注册自定义事件侦听器](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch07.html#integrators)。

# c# - 通过 LINQ 从数据表中选择第一行

> ID：12278022
> 
> 赞同：1
> 
> 时间：2012-09-05T09:09:39.527
> 
> 标签：c#, linq

我有一个如下的数据表

```
A  |  B
-------
1  |  b1
1  |  b2
1  |  b3
2  |  b4
2  |  b5
3  |  b6
3  |  b7
3  |  b8
3  |  b9 
```

如何编写 LINQ 命令来选择 A 列上每个不同值的第一行：

```
A  |  B
---------
1  |  b1
2  |  b4
3  |  b6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:15:01.670

```
var result = list.GroupBy(x => x.A).Select(x => x.First()).ToList(); 
```

或`DistinctBy`从[MoreLINQ使用](http://code.google.com/p/morelinq/)

```
var result = list.DistinctBy(x => x.A).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T09:20:32.393

```
IEnumerable<DataRow> aRows = table.AsEnumerable()
                                  .GroupBy(r => r.Field<int>("A"))
                                  .Select(g => g.First()); 
```

如果您希望它由`B`-field 排序（如果它最初不是由它排序）：

```
IEnumerable<DataRow> aRows = table.AsEnumerable()
                                  .OrderBy(r => r.Field<String>("B"))
                                  .GroupBy(r => r.Field<int>("A"))
                                  .Select(g => g.First()); 
```

如果你想要另一个表：

```
DataTable tblARows = aRows.CopyToDataTable(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T09:15:23.067

您需要按 A 列分组，然后选择 B 的第一个条目。（您可能需要对 B 列值进行排序）

这里有一个代码示例：

[使用 linq to entity 获取不同的记录](https://stackoverflow.com/questions/3542258/get-distinct-records-using-linq-to-entity)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T09:18:17.900

```
var dt = new DataTable();
//init your datatable
var dist = dt.Rows.Cast<DataRow>().GroupBy(r=>r.A).Select(g=>g.First()).ToArray(); 
```

# mysql - InnoDB：发现重复的索引 - 这很糟糕吗？

> ID：12278023
> 
> 赞同：0
> 
> 时间：2012-09-05T09:09:45.020
> 
> 标签：mysql, magento

最近我们的 Magento 商店变得非常缓慢。我们真的不知道为什么。

就在今天，当我检查数据库时，我注意到**超过 900 个索引是相同的重复项**，即存在两个。

**我的问题是**：这会影响性能吗？+ 如果是这样，我将如何删除两者之一。

谢谢，肖恩

例子

> 遇到的问题 索引`mag_eav_form_fieldset_label` 表 索引 IDX_MAG_EAV_FORM_FIELDSET_LABEL_STORE_ID 和 IDX_GALI_EAV_FORM_FIELDSET_LABEL_STORE_ID 看起来相同，可能两者之一可以删除。索引 IDX_MAG_EAV_FORM_FIELDSET_LABEL_FIELDSET_ID 和 IDX_GALI_EAV_FORM_FIELDSET_LABEL_FIELDSET_ID 看起来相同，可能两者之一都可以删除。索引 IDX_MAG_EAV_FORM_FIELDSET_LABEL_STORE_ID 和 IDX_EAV_FORM_FIELDSET_LABEL_STORE_ID 看起来相同，可能两者之一都可以删除。索引 IDX_MAG_EAV_FORM_FIELDSET_LABEL_FIELDSET_ID 和 IDX_EAV_FORM_FIELDSET_LABEL_FIELDSET_ID 看起来相同，可能两者之一都可以删除。遇到的问题 The index van de tabel`mag_eav_form_type` 索引 IDX_MAG_EAV_FORM_TYPE_STORE_ID 和 IDX_GALI_EAV_FORM_TYPE_STORE_ID 看起来相同，可能两者之一都可以删除。索引 IDX_MAG_EAV_FORM_TYPE_STORE_ID 和 IDX_EAV_FORM_TYPE_STORE_ID 看起来相同，可能两者之一都可以删除。索引 UNQ_MAG_EAV_FORM_TYPE_CODE_THEME_STORE_ID 和 UNQ_GALI_EAV_FORM_TYPE_CODE_THEME_STORE_ID 看起来相同，可能两者之一都可以删除。索引 UNQ_MAG_EAV_FORM_TYPE_CODE_THEME_STORE_ID 和 UNQ_EAV_FORM_TYPE_CODE_THEME_STORE_ID 看起来相同，可能两者之一都可以删除。遇到的问题 索引`mag_eav_form_type_entity` 表 索引 IDX_MAG_EAV_FORM_TYPE_ENTITY_ENTITY_TYPE_ID 和 IDX_GALI_EAV_FORM_TYPE_ENTITY_ENTITY_TYPE_ID 看起来相同，可能两者之一可以删除。

ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:55:40.890

如果你想安全地删除它们，我建议你在 Percona 工具包中使用 pt-duplicate-key-checker。它会自动为你生成drop index SQL。

过多的索引确实会降低性能，尤其是对于更新和插入。你最好删除那些无用的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:35:55.103

我在这里发布了 Magento DB 修复工具的更新：

[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool)

它现在还删除在参考数据库中找不到的索引

# mysql - SQL：一张表，不同的列名？

> ID：12278025
> 
> 赞同：0
> 
> 时间：2012-09-05T09:09:48.577
> 
> 标签：mysql, sql, sqlite

我有许多非常相似的数据类型，除了少数在逻辑上具有不同名称（但数据类型相同）的列。我想把所有东西都放在一张桌子上。

现在我的想法只是为某些列（例如“custom_data_1”等）提供一个通用名称，并在不同的表中记住每种数据类型的列名是什么。这应该可行，但我想知道是否有更结构化的方式（这将使查询更容易并且感觉不那么脏）来实现相同的效果（在 MySQL 或 SQLite 中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:14:27.130

**如果要存储不同的东西，则应将它们存储在不同的表中**。然后，您可以稍后创建一个视图以获取易于查询的内容。

优点是每个表都有自己的对象，您可以轻松地向其中添加/删除/重命名列。如果您的 type1 需要 2 个额外的列，但 type2 实际上丢失了一列怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:12:10.903

如果有一个需要 SQL VIEW 的案例，我认为没有比这更好的案例了。假设您的 SQL 后端支持它们（而且我相信所有这些都值得）去支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:41:07.860

最佳实践建议使用规范化表结构来编写易于阅读/使用[的 sql 三种范式 - MySQL](http://www.devshed.com/c/a/MySQL/An-Introduction-to-Database-Normalization/3/)

确保您的列名称描述了它们的用途，例如 a `userid`must not be called `custom_data_1`。如果您创建一个新表并且需要引用用户 ID，它应该很容易链接为外键。

您可以将所有内容存储在一个表中，但是结构查询语言可以做到这一点 - 将来自不同表（优化和正确创建）的数据合并到一个视图中。需要考虑的重要一点是数据增长时的可扩展性和可维护性。

考虑 MySQL 最佳实践 - [20 多个 MySQL 最佳实践](http://net.tutsplus.com/tutorials/other/top-20-mysql-best-practices/)

也是一个有趣的阅读 - [MySQL 中的拆分表。好习惯？](https://dba.stackexchange.com/questions/11990/splitting-tables-in-mysql-good-practice)

# spring - 使用 FlatFileItemReader 捕获读取行

> ID：12278027
> 
> 赞同：3
> 
> 时间：2012-09-05T09:10:01.810
> 
> 标签：spring, spring-batch

我正在读取一个 csv 文件，`FlatFileItemReader`并使用 a`FieldSetMapper`将其映射到域对象。

如果映射失败，我希望`FlatFileItemReader`我可以随意读取原始行，以便将其写入另一个 csv 文件。

我最初的想法是使用一些侦听器将读取的字符串推送到`StepContext`然后`SkipListener`获取字符串以将其写入另一个文件。但我找不到方法来捕捉`FlatFileItemReader`.

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:04:46.150

实现[ItemReadListener](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/ItemReadListener.html)接口的 onReadError(Exception) 方法正是您需要的。

```
public void onReadError(Exception e) {
    if(e instanceof FlatFileParseException) {
        FlatFileParseException ffpe = (FlatFileParseException) e;
        ffpe.getLineNumber(); //The line number error occured
        ffpe.getInput();//Text value of the unparsed line
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:47:35.673

如果您的配置类似于[FlatFileItemReader 的 Spring Batch 文档](http://static.springsource.org/spring-batch/reference/html/readersAndWriters.html)，则可以使用自定义 LineMapper 而不是通常的[DefaultLineMapper](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/mapping/DefaultLineMapper.html)引发丰富的异常

这是一些简单的示例代码

```
public class DefaultLineMapper<T> implements LineMapper<T>, InitializingBean {
    (...)

public T mapLine(String line, int lineNumber) throws Exception {
            try {
      return fieldSetMapper.mapFieldSet(tokenizer.tokenize(line));
            }
            catch (...) {
                throw new CustomException(line, lineNumber);
            }
} 
```

}

# android - 在地图上标记最喜欢的位置并在靠近它们时收到通知 Android

> ID：12278031
> 
> 赞同：0
> 
> 时间：2012-09-05T09:10:38.153
> 
> 标签：android, geolocation, gps, android-mapview

我想开发一个应用程序，当我靠近我最喜欢的地方之一（以前由我存储）时通知我。我会定期将我的位置发送到网络服务器，并在开车时获取附近最喜欢的位置。

在此过程中，我将在我的汽车中使用导航器应用程序。所以问题是：

*   我可以使用内置导航器并在运行时从在线数据库添加我最喜欢的位置，还是应该实现导航器应用程序？

*   如果我要构建一个导航器应用程序，我该怎么做？仅使用地图视图？它是否支持设置头部方向并引导我。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:52:57.737

看起来您正在使用 Android 设备。在这种情况下，只需使用接近警报。

查看 Google Maps API 文档的此页面：

[添加ProximityAlert](http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert%28double,%20double,%20float,%20long,%20android.app.PendingIntent%29)

谷歌周围的例子和教程。

您必须将您的 POI（“兴趣点”或“收藏夹”）添加到 Google 地图才能使用它们。

看看这里：

*   [谷歌地图制作工具](http://www.google.com/mapmaker)
*   [将兴趣点添加到 Google 地图](http://support.google.com/mapmaker/bin/answer.py?hl=en&answer=1096044)
*   [如何将 POI 导入 Google Maps Mobile](http://www.ehow.com/how_6049577_import-poi-google-maps-mobile.html)
*   [使用 Google 地图自定义 pois](http://www.poi-factory.com/node/23691)

据我所知，您不能以编程方式将 POI 添加到 Google 地图（将 KML 或 CVS 文件发送到服务器），也不能将它们保密（仅对您和您的朋友/客户可见）。

为了获得更好、更灵活的解决方案，您应该使用/自定义开源导航应用程序，例如 OSMD：

[奥斯曼德](http://osmand.net/)

也可以查看 OpenStreetMaps 项目的 wiki：

*   [开放街图](http://www.openstreetmap.org/)
*   [OpenStreetMap 维基](http://wiki.openstreetmap.org/wiki/Main_Page)

# regex - 查找和替换多个文件中的文本

> ID：12278033
> 
> 赞同：1
> 
> 时间：2012-09-05T09:10:41.540
> 
> 标签：regex, bash, sed, replace

> **可能的重复：**
> [在 Bash 命令的文本文件中查找和替换](https://stackoverflow.com/questions/525592/find-and-replace-inside-a-text-file-from-a-bash-command)

我被告知要更改网站中的所有标题标签。

因为标题标签在网站的所有页面中（超过 30 个）并且它是静态的，所以我需要逐个文件地用新的标题替换这个标题。

所以我想知道是否有人知道一个脚本可以实现这一点，而不必一个一个地手动完成。

例子：

```
/var/www/websitename/ 
```

在此路径中，有多个 .html 文件，我必须更改标题：

```
 <title>Old title</title> 
```

到：

```
 <title>New title</title> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:16:37.933

试试这个（在备份文件夹后，因为这里`sed`就地工作）。

```
find /var/www/websitename/ -name '*.html' -exec sed -i.bak 's/.title.Old title..title./<title>New title<\/title>/g' {} \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:14:50.247

```
perl -pi -e 's/\<title\>Old title\<\/title\>/\<title\>New title\<\/title\>/g' *.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:36:59.633

您也可以使用记事本++。打开所有文件（只需标记它们并在记事本++上拖动或拖动整个文件夹），按 ctrl+f，切换到第二个选项卡（“替换”或类似的东西 - 我没有使用英文版），输入你的文本（你也可以使用正则表达式 - 查看选项）并单击“替换所有打开的文件”（或类似的东西）。它不像使用脚本那样强大的解决方案，但它更容易而且通常就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:34:45.347

试试这个：

```
#!/bin/bash

old_title="<title>Old title<\/title>"
new_title="<title>New title<\/title>"

for file in $(find . -name "*.html");
do
    `sed -i "s/${old_title}/${new_title}/g" ${file}`
done 
```

# servlets - 下载视频时将视频流写入 HTTP 响应获取错误：ClientAbortException：java.net.SocketException：连接重置

> ID：12278036
> 
> 赞同：2
> 
> 时间：2012-09-05T09:10:53.333
> 
> 标签：servlets, video-streaming, socketexception

我需要在浏览器中播放视频，我使用 VLC 插件向 servlet 发送请求，在 servlet 中我写视频流来响应，但是当视频下载时，每次我得到：

> ClientAbortException：java.net.SocketException：连接重置

通过`FileChannel size()`我可以看到视频大小正在增加，甚至是全尺寸，但过了一段时间我仍然得到错误。谁能帮我？

异常信息：

```
ClientAbortException:  java.net.SocketException: Connection reset
at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:401)
at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)
at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:424)
at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:413)
at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)
at java.nio.channels.Channels$WritableByteChannelImpl.write(Channels.java:296)
at sun.nio.ch.FileChannelImpl.transferToArbitraryChannel(FileChannelImpl.java:465)
at sun.nio.ch.FileChannelImpl.transferTo(FileChannelImpl.java:514)
at com.certus.isa.server.servlet.PlayServlet.doGet(PlayServlet.java:66)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
at com.certus.isa.server.service.security.LoginFilter.doFilter(LoginFilter.java:61)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181)
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285)
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketException: Connection reset
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:726)
at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)
at org.apache.coyote.http11.InternalOutputBuffer$OutputStreamOutputBuffer.doWrite(InternalOutputBuffer.java:750)
at org.apache.coyote.http11.filters.IdentityOutputFilter.doWrite(IdentityOutputFilter.java:118)
at org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:559)
at org.apache.coyote.Response.doWrite(Response.java:567)
at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:396)
... 33 more
ClientAbortException:  java.net.SocketException: Broken pipe
at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:401)
at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:340)
at org.apache.catalina.connector.OutputBuffer.close(OutputBuffer.java:299)
at org.apache.catalina.connector.CoyoteOutputStream.close(CoyoteOutputStream.java:104)
at java.nio.channels.Channels$WritableByteChannelImpl.implCloseChannel(Channels.java:307)
at java.nio.channels.spi.AbstractInterruptibleChannel.close(AbstractInterruptibleChannel.java:97)
at com.certus.isa.server.servlet.PlayServlet.doGet(PlayServlet.java:80)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
at com.certus.isa.server.service.security.LoginFilter.doFilter(LoginFilter.java:61)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181)
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285)
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketException: Broken pipe
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:726)
at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)
at org.apache.coyote.http11.InternalOutputBuffer$OutputStreamOutputBuffer.doWrite(InternalOutputBuffer.java:750)
at org.apache.coyote.http11.filters.IdentityOutputFilter.doWrite(IdentityOutputFilter.java:118)
at org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:559)
at org.apache.coyote.Response.doWrite(Response.java:567)
at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:396)
... 31 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:25:01.553

浏览器已关闭连接，因此服务器重置了连接。因此，您需要查看浏览器关闭它的原因。

# r - R用对象的名称写入文件

> ID：12278037
> 
> 赞同：0
> 
> 时间：2012-09-05T09:10:56.927
> 
> 标签：r

考虑一下：
我有`fav.activities`带有对象名称的向量：

```
fav.activities <- c("swiming", "basketball", "baseball", "football")  
names(fav.activities) <- c("Tom", "Ben", "Paul", "Ann") 
```

我现在想保存整个文件。用过的

```
write(fav.activities) 
```

但不保存对象的名称。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:33:09.400

`write()`使用and将输出发送到屏幕/文件时`cat()`删除该属性：`"names"`

```
R> cat(fav.activities)
swiming basketball baseball footballR> 
```

如果您希望将向量读出到文本/分隔文件，一种选择是强制转换为矩阵并使用`write.table()`：

```
R> write.table(t(as.matrix(fav.activities)), "foo.txt", row.names = FALSE)
R> readLines("foo.txt")
[1] "\"Tom\" \"Ben\" \"Paul\" \"Ann\""                    
[2] "\"swiming\" \"basketball\" \"baseball\" \"football\"" 
```

额外`\"`的就是 R 如何将字符串打印到控制台。在我的操作系统中，文件如下所示：

```
$ cat foo.txt
"Tom" "Ben" "Paul" "Ann"
"swiming" "basketball" "baseball" "football" 
```

即它是一个空格分隔的文件。可以定义其他分隔符；见`?write.table`。

如果您只想读取向量以在以后的 R 会话中使用，那么`save()`或者`saveRDS()`是两个选项：

```
ls()
save(fav.activities, file = "obj.rda")
rm(list = ls())
load("obj.rda")
ls()
saveRDS(fav.activities, file = "obj2.rds")
new.fav <- readRDS("obj2.rds")
ls()
all.equal(fav.activities, new.fav) 
```

有了这个输出：

```
R> ls()
[1] "fav.activities"
R> save(fav.activities, file = "obj.rda")
R> rm(list = ls())
R> load("obj.rda")
R> ls()
[1] "fav.activities"
R> saveRDS(fav.activities, file = "obj2.rds")
R> new.fav <- readRDS("obj2.rds")
R> ls()
[1] "fav.activities" "new.fav"       
R> all.equal(fav.activities, new.fav)
[1] TRUE 
```

`save()`和之间的主要区别在于`saveRDS()`前者保存对象及其名称，因此只能使用相同的对象名称恢复。而`saveRDS()`只是序列化对象，然后必须在将序列化对象加载到 R 会话时将其分配给对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:27:49.563

如果要以文本格式保存数据，请使用：

```
write.table(fav.activities, file = "filename.txt", col.names = FALSE) 
```

从文本文件恢复对象：

```
dat <- read.table("filename.txt", stringsAsFactors = FALSE)
fav.activities <- structure(dat[ , 2], .Names = dat[ , 1]) 
```

如果要保存 R 对象的表示，请使用：

```
save(fav.activities, file = "filename.RData") 
```

要恢复对象：

```
load("filename.RData") 
```

# c++ - std::numeric_limits ::epsilon() 用于积分

> ID：12278039
> 
> 赞同：7
> 
> 时间：2012-09-05T09:11:03.693
> 
> 标签：c++, stl

我没有任何好的参考`std::numeric_limits<T>`，但是网上的网站说这将返回它之后的最小数字`std::numeric_limits<T>::epsilon()`之间的差异。`1`据我所知`int`，下一个数字`1`是`2`，所以 epsilon 应该是`1`。但它是`0`（Linux，g++ 4.4.5）。这背后的原因是什么？

我知道在实践`epsilon()`中只对浮点类型有用，我只是在吹毛求疵。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T09:13:46.153

标准说 ([numeric.limits.members])

> 对所有浮点类型都有意义。

该标准还说 ([numeric.special])

> 许多值只需要在特定条件下才有意义（例如，epsilon() 仅在 is_integer 为 false 时才有意义）。任何不“有意义”的值都应设置为 0 或 false。

由于该值不是“有意义的”，因此标准要求值 0 表示它不是有意义的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:14:05.763

我想说它返回数字被认为相等的范围，整数类型的范围应该是 0。

即，如果您正在创建可以处理整数和浮点类型的通用函数，您希望整数的范围为 0。

# c++ - 0x0040 和管道符号在这里表示什么？

> ID：12278044
> 
> 赞同：0
> 
> 时间：2012-09-05T09:11:32.083
> 
> 标签：c++, c, c-preprocessor

这里 SIMPLE_EX2 与 0x0040 进行或运算，并将其作为地址提供给 SIMPLE_EX1。我的理解正确吗？

```
#define SIMPLE_EX1  (0x0040 | SIMPLE_EX2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:14:35.783

`|`不是 C 中的管道符号。它是按位或。所以这个表达式：

```
0x0040 | SIMPLE_EX2 
```

只需获取 的值`SIMPLE_EX2`并将其第 7位（^(从右)起）设置为 1。

* * *

不太可能，但请注意，如果`SIMPLE_EX2`它本身是一个运算符的优先级低于`|`的表达式，则整个表达式可能会被错误地解释。例如 if `SIMPLE_EX2`is `a?b:c`, then`SIMPLE_EX1`变成`(0x0040|a)?b:c`了这不是我上面写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:14:46.417

你应该阅读一本好的 C 编程书籍（如果你正在学习 C），或者如果你正在学习 C++，你应该阅读一本好的 C++ 编程书籍。

假设-d`SIMPLE_EX2`为`#define`常量整数，或括号中的常量整数表达式，则`SIMPLE_EX1`该整数与`0x0040`十六进制常量位或位运算（即十进制的 64，或二进制的 0b1000000）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T09:15:28.943

> SIMPLE_EX2 正在与 0x0040 进行或运算

是的。

> 以及作为 SIMPLE_EX1 的地址的全部内容。

不。

#define 预处理器指令基本上是在编译之前完成的查找和替换文本操作。没有更多，注意到更少。因此，每当您编写代码时，它都会在编译前`SIMPLE_EX1`被文本替换。`(0x0040 | SIMPLE_EX2)`

有趣的代码片段说明了这一点：

```
#define SIX 1+5
#define NINE 8+1

printf("Six times nine is %d.", SIX * NINE); 
```

这段代码将返回 42，而不是预期的 54，因为预处理器将整个程序变成：

```
printf("Six times nine is %d.", 1 + 5 * 8 + 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T09:56:59.657

它只是从右边设置第 7 位`SIMPLE_EX2`并将其分配给`SIMPLE_EX1`

# jquery - 我在哪里可以找到一个好的 Jquery 滚动条教程？

> ID：12278048
> 
> 赞同：2
> 
> 时间：2012-09-05T09:11:45.460
> 
> 标签：jquery, scrollbar

有没有关于使用 jquery 构建滚动条的好教程？谷歌搜索，我只找到插件的链接，但没有自己构建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:13:26.247

[**jScrollPane**](http://jscrollpane.kelvinluck.com/)是 Kelvin Luck 的跨浏览器 jQuery 插件，它将浏览器的默认滚动条（在具有相关溢出属性的元素上）转换为 HTML 结构，可以很容易地用 CSS 换肤。

[**看一个例子**](http://jsfiddle.net/akhurshid/XbjAe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:13:29.263

与其说是教程，不如说是一个非常好的插件。它只是用自定义滚动条替换滚动条。

[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

# xml - XSLT 中的错误删除

> ID：12278049
> 
> 赞同：1
> 
> 时间：2012-09-05T09:11:47.793
> 
> 标签：xml, xslt, xpath

我有这些数据集，我想删除一些特定的值。该方法删除了我想要的内容，但也删除了一些其他值。

```
<Address>
<Row>
<LD>Dwelling place</LD>
<LN>Dwelling  (Part Of)</LN>
</Row>

<Row>
<LD>jarkatar</LD>
<LN>Edmund's Home</LN>
</Row>
</Address>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:Aa="Aa:Aa">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

<Aa:LNDeletes>
    <del>(Part Of)</del>
<Aa:LNDeletes>

<xsl:variable name="vLocNameDels" select="document('')/*/Aa:LNDeletes/*"/>  
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="LN/text()">
    <xsl:call-template name="makeDeletes">
        <xsl:with-param name="pDeletes" select="$vLocNameDels"/>
    </xsl:call-template>
</xsl:template>

<xsl:template name="makeDeletes">
    <xsl:param name="pText" select="."/>
    <xsl:param name="pDeletes"/>

    <xsl:variable name="vDelText" select="$pDeletes[contains($pText, .)][1]"/>
    <xsl:if test="$vDelText">
        <xsl:variable name="vRough">
            <xsl:value-of select="substring-before($pText, $vDelText)"/>
            <xsl:value-of select="substring-after($pText, $vDelText)"/>
        </xsl:variable>

        <xsl:value-of select="normalize-space($vRough)"/>
    </xsl:if>
</xsl:template>
</xsl:stylesheet> 
```

用上面的代码我得到了这个

```
<Address>
<Row>
<LD>Dwelling place</LD>
<LN>Dwelling</LN>
</Row>

<Row>
<LD>jarkatar</LD>
<LN></LN>
</Row> 
```

而不是这个

```
<Address>
<Row>
<LD>Dwelling place</LD>
<LN>Dwelling</LN>
</Row>

<Row>
<LD>jarkatar </LD>
<LN>Edmund's Home</LN>
</Row> 
```

删除的代码

*   （部分）这是我想要的
*   埃德蒙的家，本不应被删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:51:54.577

Your **makeDeletes** template does not account for what to do if the `pText` does not contain any of the `pDeletes` values.

Adjust the makeDeletes template from an `xsl:if` to an `xsl:choose`:

```
<xsl:template name="makeDeletes">
    <xsl:param name="pText" select="."/>
    <xsl:param name="pDeletes"/>

    <xsl:variable name="vDelText" select="$pDeletes[contains($pText, .)][1]"/>
    <xsl:choose>
        <xsl:when test="$vDelText">
            <xsl:variable name="vRough">
                <xsl:value-of select="substring-before($pText, $vDelText)"/>
                <xsl:value-of select="substring-after($pText, $vDelText)"/>
            </xsl:variable>

            <xsl:value-of select="normalize-space($vRough)"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$pText"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:58:24.853

**一个类似的解决方案，但将逻辑从`makeDeletes`模板**上移：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:Aa="Aa:Aa">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

<Aa:LNDeletes>
    <del>(Part Of)</del>
</Aa:LNDeletes>

<xsl:variable name="vLocNameDels" select="document('')/*/Aa:LNDeletes/*"/>
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="LN/text()">
    <xsl:choose>
      <xsl:when test="$vLocNameDels[contains(current(), .)]">
            <xsl:call-template name="makeDeletes">
                <xsl:with-param name="pDeletes" select="$vLocNameDels"/>
            </xsl:call-template>
      </xsl:when>
      <xsl:otherwise><xsl:apply-imports/></xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="makeDeletes">
    <xsl:param name="pText" select="."/>
    <xsl:param name="pDeletes"/>

    <xsl:variable name="vDelText" select="$pDeletes[contains($pText, .)][1]"/>
    <xsl:variable name="vRough">
      <xsl:value-of select="substring-before($pText, $vDelText)"/>
      <xsl:value-of select="substring-after($pText, $vDelText)"/>
    </xsl:variable>

    <xsl:value-of select="normalize-space($vRough)"/>
</xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Address>
    <Row>
        <LD>Dwelling place</LD>
        <LN>Dwelling  (Part Of)</LN>
    </Row>
    <Row>
        <LD>jarkatar</LD>
        <LN>Edmund's Home</LN>
    </Row>
</Address> 
```

**产生了想要的正确结果**：

```
<Address>
   <Row>
      <LD>Dwelling place</LD>
      <LN>Dwelling</LN>
   </Row>
   <Row>
      <LD>jarkatar</LD>
      <LN>Edmund's Home</LN>
   </Row>
</Address> 
```

# c# - 如何使用 C# 将两个 linq 查询结果集合并为一个

> ID：12278051
> 
> 赞同：2
> 
> 时间：2012-09-05T09:11:50.067
> 
> 标签：c#

我想将两个 LINQ 查询结果合二为一：

```
var query1 = from sn in code                                        
             group sn by sn.Substring(0, 10) into g
             select new
             {
               Key = g.Key,
               Cnt = g.Count(),
               Min = g.Min(v => v.Substring(10, 4)),
               Max = g.Max(v => v.Substring(10, 4))
             };
var query2 = from sn1 in codes
             group sn1 by sn1.Substring(0, 11) into g
             select new
             {
               key = g.Key,
               Cnt = g.Count(),
               Min = g.Min(v => v.Substring(11, 4)),
               max = g.Max(v => v.Substring(11, 4))
             };
var query3= query1.Union(query2) 
```

但在编译时出现错误：

> “ `System.Collections.Generic.IEnumerable<AnonymousType#1>`”不包含“ ”的定义`Union`并且最佳扩展方法重载“ `System.Linq.Queryable.Union<TSource>(System.Linq.IQueryable<TSource>, System.Collections.Generic.IEnumerable<TSource>)`”有一些无效参数

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:28:47.060

在第一个查询中，您选择具有属性“Key, Cnt, Min, Max”的匿名类型，在第二个查询中，您使用属性“key, Cnt, Min, max”。这将导致两种不同的匿名类型，因为“Key”不等于“key”，“max”不等于“Max”。而且您不能将联合与两种不同的类型一起使用。

将您的第二个查询更改为：

```
 select new
                                  {
                                      Key = g.Key,
                                      Cnt = g.Count(),
                                      Min = g.Min(v => v.Substring(11, 4)),
                                      Max = g.Max(v => v.Substring(11, 4))
                                  }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:27:28.017

给出的代码不是问题所在。例子：

```
var query1 = Enumerable.Range(0, 3).Select(n => new {SomePropName = n});
var query2 = Enumerable.Range(2, 3).Select(n => new {SomePropName = n});
var query3 = query1.Union(query2); 
```

以上工作，并符合您在代码中显示的模式。

所以问题出在你没有展示的地方之一。关键怀疑是元素类型`query1`和`query2`不匹配。

两者的匿名对象是否具有相同的字段类型、相同的名称、相同的顺序？他们没有那将是我要寻找的第一件事。

编辑：

是的，在您编辑的问题中，query1 中的类型有一个名为`Max`query2的字段`max`，`Key`其中 query2 有一个`key`。这使它们成为不同的类型，因此它们不能被联合起来。

这将起作用：

```
var query1=from sn in code                                        
                                group sn by sn.Substring(0, 10) into g
                                select new
                                {
                                    Key = g.Key,
                                    Cnt = g.Count(),
                                    Min = g.Min(v => v.Substring(10, 4)),
                                    Max = g.Max(v => v.Substring(10, 4))
                                };
var query2=from sn1 in codes
                                  group sn1 by sn1.Substring(0, 11) into g
                                  select new
                                  {
                                      Key = g.Key,
                                      Cnt = g.Count(),
                                      Min = g.Min(v => v.Substring(11, 4)),
                                      Max = g.Max(v => v.Substring(11, 4))
                                  };
var query3= query1.Union(query2) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-05T09:18:27.773

而不是使用匿名类型：`new{}`使用您定义的类型

```
public class MyType 
{
   public int Key { get; set; }
   public int Cnt { get; set; }
   public int Min { get; set; }
   public int Max { get; set; }
} 
```

然后将 2 个选择替换为：`select new MyType { key = g.key }`

如果你想组合它们：query1.Union(query2);

如果要添加结果，可以执行以下操作`AddRange`：

```
query1.ToList().AddRange(query2); 
```

# sed - sed 未终止的 `s' 命令多行搜索和替换

> ID：12278054
> 
> 赞同：3
> 
> 时间：2012-09-05T09:12:03.243
> 
> 标签：sed

我正在尝试使用 sed 更新一些 SQL 命令，但得到`unterminated`s' 命令`

命令：

```
sed -i -f commands.sed mySql.sql 
```

命令.sed

```
s;      if @ARI is not NULL
        begin
                exec spRun @Name='Txn', @NextValue=@Txn output
;       if @ARI is not NULL
        begin
                select @Txn= @Txn+ 1
;g 
```

你知道为什么吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T11:43:54.583

`sed`作品以线为导向。您的脚本包含模式中的换行符。所以它抱怨第一行，

```
s;      if @ARI is not NULL 
```

这显然是一个未终止的替换`s`。您最好使用 perl 的正则表达式来处理多行替换，本着

```
perl -0777 -ne 's/FROM\nLINE\n/TO\nTHIS\n/g;print' 
```

# sql-server - 在 2012 年创建 Analysis Services 项目，部署到 2005-2012 年。兼容性？

> ID：12278060
> 
> 赞同：0
> 
> 时间：2012-09-05T09:12:31.027
> 
> 标签：sql-server, ssas, olap-cube

我想在 SQL Server 2012 中的 Visual Studio 2010 中创建 Analysis Services 项目（数据多维数据集），但需要能够将我的多维数据集部署到较旧的 SQL 服务器。（2005 年及更新版本）

这是支持的场景吗？我在 MS 网站上发现可以设置 CompatibilityLevel。但我不确定..

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:20:23.463

我没有亲自尝试过，但是在构建选项卡上的分析服务项目属性中`Deployment Server Version`，您可以选择版本 11.0、10.0 和 9.0。因此，似乎支持低至 9.0 (2005) 的 SQL Server 版本。 ![在此处输入图像描述](../Images/2e1827c58ff6d54233c153b172f86ee3.png)

# java - 解析时输入流异常

> ID：12278062
> 
> 赞同：1
> 
> 时间：2012-09-05T09:12:33.783
> 
> 标签：java

我从客户端得到一个 HttpservletRequest，我正在尝试解析请求（使用 JAXB，DOM）。为此，我正在使用以下代码

```
String str_request = IOUtils.toString(request.getInputStream());
System.out.println("String is " + str_request);
requestStream = new ByteArrayInputStream(str_request.getBytes()); 
```

我的问题是，当我将**requestStream**传递给我的解析器方法时，一种方法工作正常，但另一种方法失败。我猜 inputStream 有问题，但我无法解决这个问题。任何人都可以为这个问题提出解决方案。

DOM解析器方法：

```
public String parseMethodName(InputStream request) throws SAXException,
                                                          IOException,
                                                          ParserConfigurationException {

    System.out.println("in parseMethodName");
    DocumentBuilderFactory dbFactory =
        DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    System.out.println("bfor parse");
    Document doc = dBuilder.parse(request);
    System.out.println("After parse");
    methodName =
            doc.getElementsByTagName("methodName").item(0).getTextContent();
} 
```

JAXB 解析器方法：

```
System.out.println("in parse ******");
JAXBContext context = JAXBContext.newInstance(MethodCall.class);
System.out.println("bfor unmarshall ****");
Unmarshaller um = context.createUnmarshaller();
System.out.println("After unmarshall ****");
mc = (MethodCall) um.unmarshal(is); 
```

我收到以下异常：

```
javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException: Premature end of file.]
        at javax.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException(AbstractUnmarshallerImpl.java:315)
        at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.createUnmarshalException(UnmarshallerImpl.java:481)
        at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:199)
        at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:168)
        at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
        at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:184) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:15:45.180

您不应该将输入流转换为字符串，然后再转换回字节数组。这只是*要求*丢失数据，尤其是当您在将字符串转换为字节数组时使用平台默认编码时。

查看您正在使用的任何`IOUtils`类是否包含一个完全读取 a`InputStream`到 a的方法`byte[]`，并将*其*用作您的`ByteArrayInputStream`.

请注意，如果您想多次读取数据，您要么需要重置流，要么围绕同一个字节数组创建一个新流。

# php - Codeigniter 消息：未定义的属性stdClass::$My First Blog

> ID：12278066
> 
> 赞同：0
> 
> 时间：2012-09-05T09:12:54.177
> 
> 标签：php, codeigniter

我刚开始学习 CodeIgnighter，遇到了很多问题。

我制作了一个控制器和一个视图，如下所示。

这是我的控制器

```
<?php
 class Blog extends CI_Controller{

function __construct() {
    parent::__construct();
}

function index(){

    $data['title'] = "My First Blog";
    $data['heading'] = "My Blog Heading";
    $data['query'] = $this->db->get('entries');

    $this->load->view('blog_view' ,$data);
}
}

?> 
```

这是我的观点。

```
<html>
<head>
    <title><?=$title?></title>
</head>
<body>
    <h1><?=$heading?></h1>
    <?php foreach ($query->result() as $row): ?>

        <h3><?=$row->$title?></h3>
        <p><?=$row->$body?></p>

     <hr>
    <?php endforeach;?> 

</body>
</html> 
```

当我执行此操作时，我收到此错误。

```
PHP Error was encountered
Severity: Notice
Message: Undefined property: stdClass::$My First Blog
Filename: views/blog_view.php
Line Number: 9 
```

现在我不知道这段代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:16:05.050

乍一看，在您看来，`foreach`您应该这样做：

```
<h3><?=$row->title?></h3>
<p><?=$row->body?></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:16:40.837

从 foreach 变量中删除“$”：

```
<html>
<head>
   <title><?=$title?></title>
</head> 
<body>  
<h1><?=$heading?></h1> 
   <?php foreach ($query->result() as $row): ?>
        <h3><?=$row->title?></h3>
        <p><?=$row->body?></p>
        <hr>
  <?php endforeach;?>
 </body>  
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:43:08.323

正如其他人所建议的那样，您应该将其更改`$row->$title`为 `$row->title` 非常简单

`$title`是一个变量，它包含`My`所以当你说`$row->$title`你实际上是在说`$row->My`哪个会导致错误

# php - 动态跨度

> ID：12278074
> 
> 赞同：1
> 
> 时间：2012-09-05T09:13:12.290
> 
> 标签：php, html

我有一个表将显示来自数据库的数据。这些数据计数为`dynamic`。我想在每行显示 4 个。但是，最后一行的问题。我想如果最后一行有 1 个 TD，该函数将给这个 td a `colspan`4，所以我可以在中间显示数据。

```
NUMBER OF DATA IS 5

###############################################
#           TABLE HEADER(colspan=4)           #
###############################################
||  TD1   ||  TD2  ||   TD3   ||    TD4     ||
||  TD5   ||  

I NEED THIS 
###############################################
#           TABLE HEADER(colspan=4)           #
###############################################
||  TD1   ||  TD2  ||   TD3   ||    TD4     ||
||                  TD5                     ||  

and if there are 6 TDS to show it like this.

###############################################
#           TABLE HEADER(colspan=4)           #
###############################################
||  TD1   ||  TD2  ||   TD3   ||    TD4     ||
||       TD5       ||          TD6          || 
```

我的 PHP 代码 + HTML

```
<table>
    <tr>
        <th colspan="4">TABLE HEADER</th>
    </tr>
    <tr>
        <? $counter = 0;
                foreach($data as $d)
                {
                    if($counter % 4 == 0)
                    {
                        echo '</tr><tr>';
                    }
                    echo $d['name'];
                    $counter++
                }
        ?>
    </tr>
</table> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:21:17.863

这里有一些让你开始的东西。它可能不是最优雅的，但它会做。

```
<tr>
    <? $counter = 0;
       $lastrow = floor($count($data)/4)*4;
       $numinlastrow = $count($data)%4;
            foreach($data as $d)
            {
                if($counter % 4 == 0)
                {
                    echo '</tr><tr>';
                }
                $colspan = 1;
                if ($counter >= $lastrow) {
                  if ($numinlastrow == 1) $colspan = 4;
                  if ($numinlastrow == 2) $colspan = 2;
                  if ($numinlastrow == 3) ; // ??
                }
                echo "<td colspan='".$colspan."'>";
                //... contents of table cell here
                echo "</td>";
                $counter++
            }
    ?>
</tr> 
```

如果有 3 个表格单元格，则使用上述方法实际上是不可能的，因为`colspan`只能跨越整个表格列（没有分数）。

因此，取而代之的是，将表格放在跨越整行的表格单元格中......

```
<tr>
    <? $counter = 0;
       $lastrow = floor($count($data)/4)*4;
       $numinlastrow = $count($data)%4;
            foreach($data as $d)
            {
                if($counter % 4 == 0)
                {
                  if ($counter >= $lastrow) {
                    echo '</tr><tr><td colspan="4"><table><tr>';
                  }
                  else echo '</tr><tr>';
                }

                echo "<td>";
                //... contents of table cell here
                echo "</td>";
                $counter++
            }
            if ($numinlastrow != 0) echo '</tr></table></td>'
    ?>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:25:24.077

我会通过以下方式（大约）这样做——虽然这可能看起来有点傻，但我现在想不出更好的方法：

```
$num_of_rows = mysql_num_rows($result);
for ($i = 0; $i < ($num_of_rows / 4); $i++)
{
   for ($j = 0; $j < 4; $j++)
   {
      $row = mysql_fetch_assoc($result);
      echo $row['name'];
   }
   echo '</tr><tr>';
}
if (mysql_num_rows($result) == 3)
{
   mysql_fetch_assoc($result);
   echo '<td colspan="2">'.$row['name'].'</td>';
   mysql_fetch_assoc($result);
   echo '<td>'.$row['name'].'</td>';
   mysql_fetch_assoc($result);
   echo '<td>'.$row['name'].'</td>';
}
else
{
   while($row = mysql_fetch_assoc($result))
   {
      echo '<td colspan="'.(4 / mysql_num_rows($result)).'">'.$row['name'].'</td>';
   }
} 
```

# jquery - 用于 Java 的 jQuery 文件上传

> ID：12278087
> 
> 赞同：2
> 
> 时间：2012-09-05T09:13:45.897
> 
> 标签：jquery, jsp, file-upload

我正在尝试使用 jQuery 文件上传： [http](http://blueimp.github.com/jQuery-File-Upload/)
://blueimp.github.com/jQuery-File-Upload/ 我正在使用 JSP .. 谁能告诉我一步一步的配置。

# ruby-on-rails - 在 ApplicationController 中为控制器设置实例变量不起作用

> ID：12278088
> 
> 赞同：0
> 
> 时间：2012-09-05T09:13:57.197
> 
> 标签：ruby-on-rails

我在 ApplicationController 文件中创建了一个方法，它应该在我的所有操作中设置一个实例变量：

```
def self.set_body_id(id)
    print "This is test"
    self.instance_variable_set(:@body_id, id)
end 
```

当我在另一个控制器中调用此方法时，如下所示：

```
class HostingController < ApplicationController
    set_body_id "Test"

    def index
    end
end 
```

.. 什么也没有发生。`@body_id`变量在视图中不可用。所以我运行一个rails控制台来检查这个函数是否被执行，正如我所料，`This is test`当我调用a时，我得到一个输出字符串`HostingController.new`，但仍然`@body_id`是未定义的。

`self`我也从 a中删除`self.variable_instance_set`，甚至用 a 替换这一行`@body_id = "Test"`，但这仍然不起作用。我究竟做错了什么？

编辑：

我知道我在哪里犯了错误。我尝试在创建类实例之前设置实例变量。似乎`self.set_body_id`应该参与一个类`initialize`，但仍然不知道如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:15:56.433

我认为你必须这样写：

```
def set_body_id(id)
  instance_variable_set("@body_id", id)
end 
```

更新：我刚刚看到您使用了一个应该是实例方法的类方法。我更新了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:38:47.740

```
class ApplicationController < ActionController::Base
    protect_from_forgery

    def self.set_body_id(id)
        self.class_variable_set(:@@body_id, id)
    end

    before_filter :set_body_attributes

    private

    def set_body_attributes
        @body_id = self.class.class_variable_get(:@@body_id)
    end
end 
```

感谢您的回复，感谢@apneadiving 提示，我能够弄清楚：)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:50:12.477

这应该可以帮助你

```
 class ApplicationController < ActionController::Base

    protected
      def set_body(id)
        ApplicationController.get_id(id)
      end

     def self.get_id(id)
      self.class_variable_set(:@@body, id)
      end
   end 
```

您的主机控制器

```
class HostingController < ApplicationController
   before_filter :set_body

protected

  def set_body
      @body = super(params[:id])
  end
end 
```

我从 set_body 设置的**@body实例变量应该可以在所有方法中访问。**通过检查来尝试

# python - 在带有 setup.py 的简单目录上使用 Python 打包 *.egg 格式有什么好处和坏处？

> ID：12278091
> 
> 赞同：3
> 
> 时间：2012-09-05T09:14:06.017
> 
> 标签：python, packaging, egg

当我发布一个程序时，我通常只是创建一个 setup.py 并将其放在 pypi 上。它可以用 pip 安装，我总是可以轻松地与他人分享。它适用于我，显然适用于很多人。

我看到了制作 exe、deb 或 rmp 以简化系统管理员的好处。

但我真的不明白使用鸡蛋的意义。你能告诉我我能从中得到什么吗？

我也曾经读过鸡蛋有缺点，但我再也找不到这篇文章了。您能否向我描述一下使用这种包装格式会导致什么问题？

请注意，我确实看到了[这个问题](https://stackoverflow.com/questions/47953/what-are-the-advantages-of-packaging-your-python-library-application-as-an-egg?rq=1)，但答案也适用于 setup.py 的简单目录。它并没有告诉我鸡蛋相对于简单格式的好处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:41:15.077

Eggs 与特定的架构和 python 版本相关联，直到 Python 3.3，如果 egg 包含 C 扩展，甚至是内部 Unicode 表示大小（UCS2 与 UCS4）。

不幸的是，后者的差异并没有体现在 egg 元数据中。egg 文件名包含架构和 python 版本（major.minor，所以 2.4 或 3.1），但省略了 unicode 字节大小。

正因为如此，鸡蛋不是很便携。另一方面，A`.tgz`或发行版（希望）与平台无关。`.zip`您的安装工具，无论是、`easy_install`或其他什么，都知道如何为您将 python 包分发编译成一个 egg，因此您通常*避免*完全分发文件。`pip``buildout`*`.egg`*

 *The only exception is Windows, where most people will be lacking the toolchain to compile C extensions. As Windows distributions of Python default to UCS2, you are *usually* safe to distribute Windows `.egg` builds of packages with C extensions, to facilitate installation by automated tools.

If you use the `setup.py` script to create the distribution, it's trivial to create a source-only package for upload to PyPI. I can recommend the [Python Packaging User Guide](https://packaging.python.org/en/latest/) for more information.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:24:48.313

*.egg 是一种纯*部署*格式，在通过 easy_install 或 pip 安装软件包后使用。

将文件作为 .egg 上传到 PyPI 是没有意义的。这样做的人不知道他们在做什么。

正确的 PyPI 版本可以是 .tar.gz 存档，也可以是 .zip 存档或 .exe 文件（例如用于 Windows 二进制文件），但绝不是 *.egg 文件。*

# security - 如何解码哈希

> ID：12278099
> 
> 赞同：2
> 
> 时间：2012-09-05T09:14:29.700
> 
> 标签：security, hash, decode

如果攻击者可以访问用户的数据库并且密码存储在散列中，攻击者可以解码该散列吗？你能推荐任何使用我们可以解码哈希的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:19:41.223

此答案假定您正在谈论一种标准的、相对安全的散列算法，例如 MD5 或 SHA-1。

这些算法产生的散列被设计为“单向”，即散列不能用于派生用于创建它的值。

有一种叫做[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)的东西，它本质上是一个巨大的数据库，可以将哈希映射回值，但是它们通常只涵盖常见的值，比如英语单词。

使散列更安全并提供针对基于彩虹表的攻击的一些保护的一种常用方法是使用[salt](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

另一个问题是从哈希值到值的映射是一对多的，因此给定的哈希值将有许多（实际上是无限数量）值，这些值将产生该哈希值，因此*无法*确定原始值是多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:17:48.977

您可以在此处找到更多详细信息：http: [//crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

为了提高散列密码的安全性，您也应该使用“加盐散列”，如上面链接中所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:19:12.830

不，您无法解码散列。散列是一段数据的单向（几乎是唯一的）表示。您可以对哈希使用彩虹表、蛮力或字典攻击来恢复未加密的密码。

[http://en.wikipedia.org/wiki/Rainbow_table](http://en.wikipedia.org/wiki/Rainbow_table)

[http://en.wikipedia.org/wiki/Brute-force_attack](http://en.wikipedia.org/wiki/Brute-force_attack)

[http://en.wikipedia.org/wiki/Dictionary_attack](http://en.wikipedia.org/wiki/Dictionary_attack)

# objective-c - 使用 HTTP 多部分 POST 上传图片

> ID：12278110
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:15:03.847
> 
> 标签：objective-c, ios, ios4

我尝试使用此代码将两个图像上传到 PHP 服务器。但响应是“错误”。我想知道，这种方法适用于 iOS 5 吗？或者我的代码有什么问题？

```
- (IBAction)uploadImage
{    
    NSString *filename= @"After";
    NSString *filename2= @"Before";

    // grab images from documents directory
    NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
    NSString *docDirectory = [sysPaths objectAtIndex:0];

    NSString *filePath = [NSString stringWithFormat:@"%@/%@",docDirectory,@"After.png"];
    NSData *imageData = [[NSData alloc]initWithContentsOfFile:filePath];
    NSString *filePath2 = [NSString stringWithFormat:@"%@/%@",docDirectory,@"Before.png"];
    NSData *imageData2 = [[NSData alloc]initWithContentsOfFile:filePath2];

    // setting up the URL to post to
    NSString *urlString = @"http://uploadimage.php";

    // setting up the request object
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    // body of the post
    NSMutableData *body = [NSMutableData data];

    [body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@.png\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];

    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image2\"; filename=\"%@.png\"\r\n", filename2] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData2]];

    [body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    //NSDictionary *response = [[NSDictionary alloc] init];
    //response = [returnString JSONValue];
    NSLog(@"Return string : %@", returnString);
} 
```

如果这段代码没问题，那么我可以理解错误在 PHP 端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:31:59.740

使用**[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)**

```
 -(void)uploadImage
   {
    NSData *imageData = UIImageJPEGRepresentation(imageobj, 90);
    NSURL *url = [NSURL URLWithString:@"url"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setDelegate:self];
    [request setPostValue:@"myImageName" forKey:@"name"];
    [request setData:imageData forKey:@"file"];

    [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
    // Use when fetching text data
    NSString *responseString = [request responseString];
    NSLog(@\"response: %@\", responseString);

    // Use when fetching binary data
    NSData *responseData = [request responseData];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
    NSError *error = [request error];
} 
```

# linq - EF IQueryable 扩展方法在 Select 中不起作用

> ID：12278112
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:15:11.287
> 
> 标签：linq, entity-framework, entity-framework-4, iqueryable

> **可能重复：**
> [LINQ to Entities 无法识别该方法](https://stackoverflow.com/questions/7259567/linq-to-entities-does-not-recognize-the-method)

我使用实体框架 4.3

我写扩展方法：

```
public static IQueryable<TSource> Active<TSource>(this IQueryable<TSource> source) where TSource : class, IStatusable
{
    return source.Where(s => s.Status == (int)StatusEnum.Enabled);
} 
```

这很好用：

```
var cat=Context.Categories.Active().ToList() 
```

但我需要在 Select 中使用这个扩展方法。看简化查询：

```
return Context.Categories
 .Select(c => new { Children=c.Children.AsQueryable().Active()})
 .ToList() 
```

（儿童 - 子类别的集合）查询执行时我收到一条错误消息：

```
LINQ to Entities does not recognize the method 'System.Linq.IQueryable`1[Portal.FrontOffice.Model.Category] Active[Category](System.Linq.IQueryable`1[Portal.FrontOffice.Model.Category])' method, and this method cannot be translated into a store expression. 
```

为什么不工作？如何正确书写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:58:40.493

正如我在评论中所述，每次出现此错误消息时都是**相同的原因：**

EF 提供程序用来创建 SQL 的表达式树包含一个它不理解的方法。
在您的情况下，这是`Active`扩展方法。它是表达式树的一部分，因为它在另一个表达式 ( `Select`) 中使用。

在您的第一个查询中，您的方法*不是*表达式树的一部分。相反，它只是通过向其中添加表达式来*更改*表达式树`Where`。这是一个根本的区别。

要使您的第二个查询正常工作，请使用以下命令：

```
return Context.Categories 
              .Select(c => new { Children=c.Children
                                           .Where(s => s.Status == 
                                                       (int)StatusEnum.Enabled) }) 
              .ToList() 
```

# jquery - onclick 按钮

> ID：12278114
> 
> 赞同：1
> 
> 时间：2012-09-05T09:15:17.170
> 
> 标签：jquery

我在一个按钮上有一个代码

```
onClick="$('img').removeClass('highlighted');$(this).addClass('highlighted') 
```

好吧，它会使按钮突出显示，但是否可以在其中添加检查语句以查看按钮是否已经突出显示并取消突出显示而不是让它保持突出显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:18:52.707

您应该改用[`.click`](http://api.jquery.com/click/)javascript，因为之后更容易阅读和管理：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#button").click(function() {
            if ($(this).hasClass('highlighted')) {
                $('img').addClass('highlighted');
                $(this).removeClass('highlighted');
            } else {
                $('img').removeClass('highlighted');
                $(this).addClass('highlighted');
            }
        }
    });
</script> 
```

您还可以使用[`toggleClass`](http://api.jquery.com/toggleClass/)：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#button").click(function() {
            $('img').toggleClass('highlighted');
            $(this).toggleClass('highlighted');
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:18:39.913

您可以使用 jQuery 方法执行此操作：[`hasClass`](http://api.jquery.com/hasClass/)

```
onClick="if($('img').hasClass('highlighted')) {$('img').removeClass('highlighted');} else {$(this).addClass('highlighted')} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:19:56.323

该代码看起来很疯狂。你在使用 jQuery 吗？如果是这样，请在单击处理程序本身内进行检查。

```
$("img").on("click", function(event){

   var $this = $(this);

   if($this.hasClass("highlighted")) {
      $this.removeClass("highlighted")
   } else {
      $this.addClass("highlighted")
   }

}); 
```

这有帮助吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T11:24:14.800

非常简单的老板：使用 hasClass()

```
$('img').click(function(){

if($(this).hasClass('highlighted')){
  $('img').removeClass('highlighted');
}
else{
 $(this).addClass('highlighted')
}

}); 
```

# java - Java覆盖hashCode不显示效果

> ID：12278118
> 
> 赞同：0
> 
> 时间：2012-09-05T09:15:24.310
> 
> 标签：java, overriding, hashcode

```
public class mainB {
    public mainB(){
        System.out.println("java".hashCode());
    }

    @Override
    public int hashCode() {
        return 4;
    }

    public static void main(String[] args){
        new  mainB();
    }
} 
```

我正在**覆盖 hashCode**方法，但是当我运行应用程序**时它不显示 4**。问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:17:00.223

你只是做错了。`"java".hashCode()`简单地获取`String`对象的哈希码。如果您想获得正确的哈希码：

1）覆盖`hashCode`方法。

2) 使用重写的方法创建类的**实例**。

3) 呼叫`hashCode`。

诚实地压倒一切`hashCode`可能是危险的，并导致效率下降。这就是为什么如果您不确定自己是否正确，则不应覆盖它。当您不确定时，最好的方法是始终在您的 IDE（例如 Eclipse）中生成它，这样才能正确完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T09:17:29.227

您正在覆盖`mainB`hashcode 函数，但`String`在使用`"java".hashcode()`.

要使用您的功能，您应该这样做：

```
new mainB().hashcode() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:17:57.353

您已经为 class 定义`hashCode()`了方法`mainB`。因此，当您创建此类的对象并调用`hashCode()`时，您将获得 4 个类似：

```
mainB myObject = new mainB();
System.out.println(" HashCode = " + myObject.hashCode()); 
```

当您编写以下内容时：

```
System.out.println("java".hashCode()); 
```

您正在实例`hashCode()`上调用方法。`String`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T09:18:26.433

您正在显示包含 word 的字符串的哈希码`"java"`。将您的实现更改为

`System.out.println(hashCode());`

你`hashCode()`会被召唤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T09:17:16.403

改变这个：

```
public mainB(){
        System.out.println(this.hashCode());
    } 
```

# java - Java中的会话超时

> ID：12278126
> 
> 赞同：0
> 
> 时间：2012-09-05T09:15:45.340
> 
> 标签：java, jsp, html-frames

我在登录后使用 html 页面作为我的主页。我在 web.xml 中设置了会话超时。会话超时后，登录页面仅显示在一帧中，但它应该假设显示在所有帧中..知道如何实现这一点

# sql-server - 附：奇怪还是为什么？

> ID：12278130
> 
> 赞同：0
> 
> 时间：2012-09-05T09:15:57.543
> 
> 标签：sql-server

考虑 sql server 11.0.2100 的 2 个实例 I1（在用户 U1 下运行）和 I2（在用户 U2 下运行）
我从 I1 分离 DB。
我将 mdf 和 ldf 文件的完全权限授予 U2
我尝试将 DB 附加到 I2。

我使用 SSMS 和集成身份验证（域\U3）连接到 I2 => 附加失败并出现错误 5123：无法访问 mdf 文件。

我使用 SSMS 和 sql 身份验证（使用 sa sysadmin）连接到 I2 => 附加成功

我的问题是：为什么附加身份验证失败？顺便说一句，U3 是运行这两个实例的机器的管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:29:06.067

我知道仅粘贴来自其他来源的内容是不合适的，但这几乎可以解释您的问题。“域\U3”显然可能无权访问数据库文件。

[保护数据和日志文件](http://technet.microsoft.com/en-us/library/ms189128%28SQL.105%29.aspx)。

## 分离和附加数据库

当您分离或附加数据库时，数据库引擎会尝试模拟执行操作的连接的 Windows 帐户，以保证该帐户有权访问数据库和日志文件。对于使用 SQL Server 登录的混合安全帐户，模拟可能会失败。

# php - 没有递归函数的显示树状菜单

> ID：12278131
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:15:59.510
> 
> 标签：php, hierarchical-data

我的桌子看起来像

```
ID | Parent    | Name    | Level
 1 | 0         | Cat1    | 0
 2 | 1         | SubCat1 | 1
 3 | 0         | Cat2    | 0
 4 | 3         | SubCat2 | 1
 5 | 4         | SubCat3 | 2
 6 | 3         | SubCat4 | 3 
```

我需要按顺序显示数据：

```
 Cat1
      SubCat1
 Cat2
      Subcat2
          SubCat3
      SubCat4 
```

我可以用递归函数很好地执行它，但现在的要求是不用递归函数。请帮忙，我也对级别字段感到困惑。

从数据库中获取的代码：

```
class Sitemap
{ 

public static function getTopCategories()
{
    return self::getCategories('parent=0');
}

public static function getCategories($where='')
{
    if ($where) $where = " WHERE $where";
    $result = mysql_query("SELECT * FROM sitemap $where");

    $categories = array();
   //while ($category = mysql_fetch_object($result, 'Category'))
    while ($category = mysql_fetch_array($result)){
    $my_id = $category['id'];

    $category['children'] = Sitemap::getCategories("parent = $my_id");

            $categories[] = $category;
        }

     mysql_free_result($result);
    return $categories;
  }

 } 
```

要显示的代码（使用 Smarty）：

```
{foreach from=$sitemap item=c name=sitemap}
 {if $c.parent ==0 }
<li><h2><a title="{$c.name}" href="{$c.url}">{$c.name}</a></h2><ul>
    {foreach item=d from=$c.children name=sitemap} 
<li><a title="{$d.name}" href="{$d.url}">{$d.name}</a></li>
    {/foreach}
{else}  
<li><h2><a title="{$c.name}" href="{$c.url}">{$c.name}</a></h2><ul>
{/if}
</ul>
</li>
{/foreach} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:52:34.263

```
 Try this :->

 with recursive function

 function menu ($p_id='0')
 {

     $q1="select * from menu where p_id='$p_id'";
     $r1=mysql_query($q1) or die(mysql_error());
     while($s1=mysql_fetch_array($r1))
       {
          echo "&nbsp;&nbsp;&nbsp;".$s1['name']."=>";
          $q2="select * from menu where p_id='$s1[id]'";
          $r2=mysql_query($q2) or die(mysql_error()."2nd query error");
          $ro2=mysql_num_rows($r2);
          if($ro2>0)
          {
             $p_id=$s1['id'];
             menu($p_id);
          }

         echo "<br/>";
     }

 }

   echo menu(); 
```

没有递归函数::

```
You have to use procedure language like this

<ul>
    <?php
    $query="select * from table where pid='0'";
     $q1=mysql_query($query);
    while($row=mysql_fetch_array($q1))
     {
        echo "<li>$row[pname]
          // 2nd step check and wirite query and diplay and so on
     <echo "</li>"; 
     }
    ?>
</ul> 
```

# wpf - 在 WPF 应用程序中显示一个巨大的图像

> ID：12278144
> 
> 赞同：0
> 
> 时间：2012-09-05T09:16:40.103
> 
> 标签：wpf, image

我希望在我的 WPF 应用程序中显示 HD 尺寸 1920X1080 图像。当我在图像控件中设置图像源时，只显示部分图像，图像控件的大小。

我不希望将高清图像自动适应图像控件。假设图像控件的大小为 640 X 480，则应显示 640X480 的高清图像。但是当我平移图像时，应该显示下一个 640 X 480 的图像。我已经实现了 TransformGroup TransformGroup group = new TransformGroup(); ScaleTransform xform = new ScaleTransform(); group.Children.Add(xform); TranslateTransform tt = 新的 TranslateTransform(); group.Children.Add(tt);

但我的问题是最初没有加载整个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:38:27.783

如果您想要的只是滚动图像的能力......然后使用：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ScrollViewer HorizontalScrollBarVisibility="Visible">
            <Image Stretch="None" Source="c:\mytestimage.png" />
        </ScrollViewer>
    </Grid>
</Window> 
```

如果您想更复杂/更高效，请参阅这些方便的帖子：

*   [WPF 图像缩放](https://stackoverflow.com/questions/639477/wpf-image-zooming)

*   [平移和缩放图像](https://stackoverflow.com/questions/741956/pan-zoom-image)

*   [http://www.codeproject.com/Articles/85603/A-WPF-custom-control-for-zooming-and-panning](http://www.codeproject.com/Articles/85603/A-WPF-custom-control-for-zooming-and-panning)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-08T17:23:35.600

有另一种显示图像的方法。在图像上设置 max-es，因此它不会在视觉上加载大于所需的内容。

```
<Image Source="{Binding Source}"
       Stretch="UniformToFill"
       MaxHeight="200"
       MaxWidth="400"/> 
```

下图显示了按原样加载的两张图片，一张小图，一张大图。左侧显示大的爆炸越过边界。右侧显示大尺寸的适当收缩。

[![在此处输入图像描述](../Images/b6f7ffd42c128c0c2963f0e3056cb6ec.png)](https://i.stack.imgur.com/lF5Qu.png)

为了防止较小的图像*过*大（如右侧所示），请设置`StretchDirection="DownOnly"`以防止较小的图像扩大。

# javascript - 在 Chrome 中重新加载页面后清除表单输入值

> ID：12278147
> 
> 赞同：3
> 
> 时间：2012-09-05T09:16:47.430
> 
> 标签：javascript, jquery, google-chrome

我在 Google Chrome 浏览器中的登录表单字段有问题。我有一个带有输入的表单，我希望在页面重新加载（刷新）后他的值为空。我使用了 jQuery：

```
$(document).ready(function(){
    $("form input[name=user_login]").val("");
}) 
```

但在 Chrome 中，此解决方案不起作用，并且该字段设置为记住的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-23T08:38:09.683

如果设置属性 autocomplete=off，则永远不会存储内容。

检查文档：

*   [http://www.w3schools.com/tags/att_input_autocomplete.asp](http://www.w3schools.com/tags/att_input_autocomplete.asp)
*   [http://www.w3.org/wiki/HTML/Elements/input/text](http://www.w3.org/wiki/HTML/Elements/input/text)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:19:12.050

在 html 中试试这个

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

请参阅此链接以获取更多信息[http://www.i18nguy.com/markup/metatags.html](http://www.i18nguy.com/markup/metatags.html)

------编辑1-----

在 chrome 中试试这个小提琴：

[http://jsfiddle.net/nQ5sQ/1/](http://jsfiddle.net/nQ5sQ/1/)

我已经完成了 id .. 但它工作得很好，这不是缓存问题，当你的页面准备好并且你在它上面触发了 jQuery 脚本时，之后没有缓存完成。甚至您的假设似乎也不正确。请发布相同的 html 和 jquery 代码进行调试

# android - Android - 使用路径设置绘制样式

> ID：12278148
> 
> 赞同：1
> 
> 时间：2012-09-05T09:16:49.867
> 
> 标签：android, path, draw, polygon

我正在使用 Path 在 Android 中绘制多边形。目前我正在用不同的风格重复绘制——首先是多边形，其次是边框。我想立刻画出来。如何为边框和填充设置不同的颜色？

# powershell - gci（获取子项）如何打印文件内容？

> ID：12278151
> 
> 赞同：2
> 
> 时间：2012-09-05T09:16:57.357
> 
> 标签：powershell

在网上搜索`findstr`Powershell 的等效项，我发现[了这个站点](http://www.interact-sw.co.uk/iangblog/2006/06/03/pshfindstr)，它建议使用 Cmdlet [`gci`](http://technet.microsoft.com/en-us/library/ee176841.aspx)（获取子项）和[`select-string`](http://technet.microsoft.com/en-us/library/ee176956.aspx). 但是，`gci`不打印文件的内容，而是打印目录内容。`gci`在这种情况下，流水线是如何工作的，如何`select-string`过滤文件的内容（无需先将其流水线化`get-content`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T09:37:39.413

`Select-String`接受管道输入。当您通过管道传输 FileInfo 对象时，它们会绑定到 InputObject 参数。以下两个命令是等价的：

```
PS> Get-ChildItem C:\test.txt | Select-String -Pattern logfile

PS> Select-String -InputObject (Get-ChildItem C:\test.txt) -Pattern logfile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T09:24:24.243

`select-string`cmdlet从`System.IO.FileInfo`管道接收对象。因此，它能够确定其参数的哪些部分是文件名，哪些是要查找的字符串。请参阅Technet 上[的 Select-string](http://technet.microsoft.com/en-us/library/hh849903.aspx "技术网")。

# shell - 如何使用 Ipython 运行 shell 命令（用 Vim 编写）？

> ID：12278162
> 
> 赞同：0
> 
> 时间：2012-09-05T09:17:27.043
> 
> 标签：shell, vim, ipython

> **可能重复：**
> [在 IPython 中使用交互式 Shell 之外的魔法命令](https://stackoverflow.com/questions/12219387/using-magic-commands-outside-of-interactive-shell-in-ipython)

我知道 Ipython 是一个强大的 python shell。当我输入一些 shell 命令时，它运行良好。但是，当我在 vim 中编写相同的 shell 命令并在 Ipython 中运行它时，会出现“SyntaxError”。例如，当我在 Ipython 中输入 '!ps' 时，它会给出正确的答案。但是，当我在 vim 中编写 '!ps' 并在 Ipython 中运行它时，它会给出 'SyntaxError'。如何在 Ipython 中结合一些 shell 命令运行 python 脚本？

# java - 使用 ant 引用 jars（不是 /libs）的外部文件夹

> ID：12278175
> 
> 赞同：3
> 
> 时间：2012-09-05T09:18:02.560
> 
> 标签：java, android, ant, jar, external

我看过[这里](https://stackoverflow.com/questions/5312478/how-do-i-reference-external-jar-files-in-a-common-directory-not-libs-to-build)，问题似乎与我所问的非常相似。但是我无法从那里选择的答案中找出解决方案。

以下是我的蚂蚁输出：

```
-compile:
[javac] Compiling 102 source files to /Users/goat/src/myproject/core/bin/classes
[javac] /Users/goat/src/myproject/core/src/com/app/utils/PriorityThreadPoolExecutor.java:8: cannot find symbol
[javac] symbol  : class RunnableFuture
[javac] location: package java.util.concurrent
[javac] import java.util.concurrent.RunnableFuture;
[javac]                            ^ 
```

RunnableFuture 类无法识别。这个类可以在位于两个地方的 java.util.concurrent 中找到：

```
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents
/Applications/android-sdk-mac_x86/platforms/android-7 
```

我想使用第一个路径中的库而不将其复制到我的 libs 文件夹中。这在 Eclipse 中运行良好，因为我已经正确设置了 .classpath，但我不确定如何设置 ant 以便它可以引用 libs 文件夹以及这个外部文件夹。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:39:33.123

您只需要生成一个类路径并将其传递给`javac`：

```
<path id="compile.classpath">
    <fileset dir="${lib.dir}">
        <include name="*.jar"/>
    </fileset>
</path>

<target name="compile">
    <javac srcdir="${src.dir}" destdir="${build.dir}/classes" debug="true">
        <classpath refid="compile.classpath"/>
    </javac>
</target> 
```

见[https://ant.apache.org/manual/Tasks/javac.html](https://ant.apache.org/manual/Tasks/javac.html)

# plot - 在 Mathematica 中使用“填充”功能时如何更改边缘线颜色？

> ID：12278182
> 
> 赞同：4
> 
> 时间：2012-09-05T09:18:25.747
> 
> 标签：plot, wolfram-mathematica, fill

在 Mathematica 中使用填充功能时，我想改变边缘线的样式，使其具有 a) 与填充/无边缘线相同的颜色 **b) 它将被另一条曲线下方/覆盖填充作为边缘线**。

当前的填充代码如下：

```
fill1 = Plot[{demand1[t1], demand1[t34]}, {t1, 0, t34}, 
Filling -> {1 -> {2}},
FillingStyle -> Directive[LightGray]]; 
```

编辑：我已经调整了我的第二个问题（现在标记为粗体），因为在第一个版本中不清楚并插入了一个带有“剩余”问题的屏幕截图 ![在此处输入图像描述](../Images/850e2101a95a1dcb5a1a9bfa12ad3656.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:47:21.137

这里 Cos & Sin 线的颜色与填充物相同，它们位于另一条线下方，如果这就是你所说的“边界线”。

```
Show[Plot[{Cos[x], Sin[x]}, {x, 0, 2 Pi}, Filling -> {1 -> {2}}, 
  FillingStyle -> Directive[LightGray], PlotStyle -> LightGray],
 Plot[Sech[x], {x, 0, 2 Pi}]] 
```

![在此处输入图像描述](../Images/6ffc7f741ecfaa8ddd4ff38a5eddc033.png)

**附录**

感谢你的接纳。在您的编辑之后，这是一个更完整的答案：

```
Show[Plot[{Sech[x],
   If[Sech[x] > 0.8, 0.8],
   If[Sech[x] > 0.5, 0.5],
   If[Sech[x] > 0.3, 0.3],
   If[0.5 > Sech[x] > 0.3, Sech[x]]},
  {x, 0, 2 Pi}, Filling -> {1 -> {2}, 3 -> {4}, 4 -> {5}},
  FillingStyle -> LightGray, PlotStyle -> LightGray],
 Plot[Sech[x], {x, 0, 2 Pi}, PlotStyle -> Gray],
 Plot[If[0.3 > Sech[x], Sech[x]], {x, 0, 2 Pi},
  PlotStyle -> Directive[{Thick, Black}]],
 Plot[If[0.8 > Sech[x] > 0.5, Sech[x]], {x, 0, 2 Pi},
  PlotStyle -> Directive[{Thick, Black}]],
 Map[Graphics[Style[Line[{
       {ArcSech[#], 0}, {ArcSech[#], #}}],
     Thick, Dashed, Antialiasing -> False]] &,
  {0.8, 0.5, 0.3}]] 
```

![在此处输入图像描述](../Images/3a63b0eb5d45b4f537865554657b292e.png)

# java - Google App Engine Java - 索引和键

> ID：12278186
> 
> 赞同：0
> 
> 时间：2012-09-05T09:18:42.657
> 
> 标签：java, google-app-engine, indexing

向数据存储索引添加键有一些限制吗？

我有 Test.java

```
@EntityBean(entityGroup="TestRoot", entityGroupKeyName="TestList")
public class Test implements Serializable, JSONConvertible {
    @Property(key=true,indexable=true)
    private String keyName;
    @Property(indexable=true)
    private String userCode;
    @Property(indexable=true)
    private String name;
... 
```

在我的 datastore-indexes.xml 中：

```
<datastore-index kind="Flight" ancestor="true">
    <property name="keyName" direction="desc"/>
</datastore-index>

<datastore-index kind="Flight" ancestor="true" source="manual">
    <property name="keyName" direction="asc"/>
</datastore-index>

<datastore-index kind="Flight" ancestor="true">
    <property name="userCode" direction="desc"/>
</datastore-index>

<datastore-index kind="Flight" ancestor="true" source="manual">
    <property name="userCode" direction="asc"/>
</datastore-index>

<datastore-index kind="Flight" ancestor="true">
    <property name="name" direction="desc"/>
</datastore-index>

<datastore-index kind="Flight" ancestor="true" source="manual">
    <property name="name" direction="asc"/>
</datastore-index> 
```

我的所有索引都处于服务状态

当我订购测试列表时，“userCode”和“name”可以正常工作，但“keyName”不能，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:04:39.737

您应该阅读有关[Key Filters](https://developers.google.com/appengine/docs/java/datastore/queries#Key_Filters)的信息。默认情况下，GAE 已经对键进行了升序索引，因此无需构建。对于键的降序索引，试试这个：

```
<datastore-index kind="Flight" ancestor="true">
    <property name="__key__" direction="desc"/>
</datastore-index> 
```

# lua - redis：“多批量回复”-> lua 表

> ID：12278191
> 
> 赞同：0
> 
> 时间：2012-09-05T09:18:56.107
> 
> 标签：lua, redis

我有一个这样的排序集：

```
 |key  |score |member
zadd mykey 100    event:1
zadd mykey 101    event:2
zadd mykey 102    event:3 
```

现在我使用 lua 脚本从给定的分数范围返回一个子集

```
var result = redis.call('zrangebyscore', 'mykey', start, stop, 'WITHSCORES') 
```

**lua-script 中**的结果表会是什么样子？（由于我无法调试，我不得不问）

来自[redis-doc](http://redis.io/commands/eval)：Redis 多批量回复 -> Lua 表（可能嵌套了其他 Redis 数据类型） - 这是我能找到的所有信息。

会不会是这样：

```
result = { 'event:1', 100, 'event:2', 101, 'event:3', 102 } 
```

或喜欢

```
result = { 100, 'event:1', 101, 'event:2', 102, 'event:3' } 
```

还是不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:47:11.313

来自`zrangebyscore ... withscores`- 或任何从带有分数的排序集中读取的结果，实际上 - 将作为 lua 表返回，如下所示：

```
result = { "event:1", "100", "event:2", "101" } 
```

价值第一，得分第二。值和分数都是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:39:28.093

假设您使用的可以写入标准输出，您可以添加转储函数并输出表格格式。

我用

```
function dump (tt, label,indent, done)
    if debug == true then
       if label == nil then
          label = 'Dump'
       end
        done = done or {}
        indent = indent or 0
        if type(tt) == "table" then
            if indent == 0 then
                io.write(string.rep (" ", indent))
                io.write(label..'\n')
            end
            for key, value in pairs (tt) do
                io.write(string.rep (" ", indent)) -- indent it
                if type (value) == "table" and not done [value] then
                    done [value] = true
                    io.write(string.format("[%s] => table\n", tostring (key)));
                    io.write(string.rep (" ", indent+4)) -- indent it
                    io.write("(\n");
                    dump (value, tostring(key),indent + 7, done)
                    io.write(string.rep (" ", indent+4)) -- indent it
                    io.write(")\n");
                else
                    io.write(string.format("[%s] => %s\n",
                    tostring (key), tostring(value)))
                end
            end
        else
            io.write(tostring(label)..':'..tostring(tt))
        end
    else
        return
    end
end 
```

因此，对于您的示例，您只需添加

```
debug = true
dump(var,'redis-table') 
```

# javascript - 如何运行对象映射功能

> ID：12278196
> 
> 赞同：0
> 
> 时间：2012-09-05T09:19:12.237
> 
> 标签：javascript, recursion

`board.get('mode')`如果是**随机**的，我正在尝试运行递归对象映射。请注意，这`board.get('random')`只是一个介于 0 和 2 之间的数字。

目前，它只是将函数打印在 HTML 上。

```
 displayTotal: function(){
    var sign = {
       'add': '+', 
       'minus': '-',
       'multiply': 'x',
       'random': function(){
            return sign[['add', 'minus', 'multiply'][board.get('random')]]
        } 
    };

    $('.game-info span.mode')[0].innerHTML = sign[board.get('mode')];
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:38:48.897

试试这个：

```
 var sign = {
       'add': function(){ return '+' }, 
       'minus': function(){ return '-' },
       'multiply': function(){ return 'x' },
       'random': function(){
            return sign[['add', 'minus', 'multiply'][board.get('random')]]()
        } 
    };

    $('.game-info span.mode')[0].innerHTML = sign[board.get('mode')](); 
```

这使得所有数组元素的函数都返回您想要的值。

最后一行调用函数并将返回值传递给 innerHTML 而不是函数本身。

# actionscript-3 - Flex 3 价值感知组合框错误

> ID：12278197
> 
> 赞同：1
> 
> 时间：2012-09-05T09:19:15.417
> 
> 标签：actionscript-3, apache-flex, combobox, flex3

我正在使用一个价值感知组合框，它工作正常，但最近我开始收到以下错误，当我尝试点击组合框时，错误是随机的。我不确定这是因为我在编码中所做的任何更改，或者数据提供者等的一些更改，感谢您的帮助......

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at mx.controls::ComboBox/destroyDropdown()
    at mx.controls::ComboBox/styleChanged()
    at mx.core::UIComponent/setBorderColorForErrorString()
    at mx.core::UIComponent/commitProperties()
    at mx.controls::ComboBase/commitProperties()
    at mx.controls::ComboBox/commitProperties()
    at custom.controls::ComboBox/commitProperties()[D:\workspace\eclipse\indigo\ams\flex_src\custom\controls\ComboBox.mxml:13]
    at mx.core::UIComponent/validateProperties()
    at mx.managers::LayoutManager/validateProperties()
    at mx.managers::LayoutManager/doPhasedInstantiation() 
```

调试器抛出

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at mx.controls::ComboBox/destroyDropdown()
    at mx.controls::ComboBox/styleChanged()
    at mx.core::UIComponent/setBorderColorForErrorString()
    at mx.core::UIComponent/commitProperties()
    at mx.controls::ComboBase/commitProperties()
    at mx.controls::ComboBox/commitProperties()
    at custom.controls::ComboBox/commitProperties()[D:\workspace\eclipse\indigo\ams\flex_src\custom\controls\ComboBox.mxml:13]
    at mx.core::UIComponent/validateProperties()
    at mx.managers::LayoutManager/validateProperties()
    at mx.managers::LayoutManager/doPhasedInstantiation()
    at mx.managers::LayoutManager/validateNow()
    at mx.controls::ComboBox/displayDropdown()
    at mx.controls::ComboBox/downArrowButton_buttonDownHandler()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.core::UIComponent/dispatchEvent()
    at mx.controls::Button/http://www.adobe.com/2006/flex/mx/internal::buttonPressed()
    at mx.controls::Button/mouseDownHandler()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.core::UIComponent/dispatchEvent()
    at mx.controls::ComboBase/textInput_mouseEventHandler() 
```

这是我的代码的一部分

```
[Bindable]
 private var networkExpObj:NetworkExpansion=new NetworkExpansion();
[Bindable]
 public var codeDescpResult:Object;
    <mx:FormItem label="Status"
                         required="true">
                <controls:ComboBox id="NWEXP_STATUS_ID"
                                   disabledColor="0x000000"
                                   maxWidth="150"
                                   change="validateUs()"
                                   selectedValue="{networkExpObj.NWEXP_STATUS_ID}"
                                   dataProvider="{codeDescpResult.SRV_NWE_STATUS}"/>
            </mx:FormItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:04:23.970

Apache Flex 4.10 中修复的问题（尚未发布）请参阅[https://issues.apache.org/jira/browse/FLEX-33382](https://issues.apache.org/jira/browse/FLEX-33382)。

如果使用较旧的 SDK，您可以修改 mx:ComboBox 像这样添加“&& tween”检查：

```
private function destroyDropdown():void
{
    if (inTween && tween)
        tween.endTween();

    displayDropdown(false, null, false);
} 
```

# sql - t-sql 使用 csv 字符串查找特定值

> ID：12278198
> 
> 赞同：4
> 
> 时间：2012-09-05T09:19:27.073
> 
> 标签：sql, tsql, parsing, csv

我需要一些关于 SQL 查询的帮助。我有一列将值存储为逗号分隔值。

我需要编写一个查询，在列中的每个值中找到第三个分隔项。

是否可以在 Select 语句中执行此操作？例如：列值：`josh,Reg01,False,a0-t0,22/09/2010`

所以我需要`False`从上面的字符串中获取第三个值（即）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T09:22:49.457

是的。

`@s`你的弦在哪里...

```
select 
    SUBSTRING (@s,
    CHARINDEX(',',@s,CHARINDEX(',',@s)+1)+1,
    CHARINDEX(',',@s,CHARINDEX(',',@s,CHARINDEX(',',@s)+1)+1)
          -CHARINDEX(',',@s,CHARINDEX(',',@s)+1)-1) 
```

或者更笼统地...

```
;with cte as 
(
    select 1 as Item, 1 as Start, CHARINDEX(',',@s, 1) as Split
    union all
    select cte.Item+1, cte.Split+1, nullif(CHARINDEX(',',@s, cte.Split+1),0) as Split
    from cte
    where cte.Split<>0  
)   
select SUBSTRING(@s, start,isnull(split,len(@s)+1)-start) 
from cte 
where Item = 3 
```

现在正确存储您的数据:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T10:14:24.510

试试这个（假设 SQL Server 2005+）

```
DECLARE @t TABLE(ColumnValue VARCHAR(50))
INSERT INTO @t(ColumnValue) SELECT 'josh,Reg01,False,a0-t0,22/09/2010'
INSERT INTO @t(ColumnValue) SELECT 'mango,apple,bannana,grapes'
INSERT INTO @t(ColumnValue) SELECT 'stackoverflow'

SELECT ThirdValue = splitdata
FROM(
        SELECT 
            Rn = ROW_NUMBER() OVER(PARTITION BY ColumnValue ORDER BY (SELECT 1))
            ,X.ColumnValue
            ,Y.splitdata 
        FROM
         (
            SELECT *,
            CAST('<X>'+REPLACE(F.ColumnValue,',','</X><X>')+'</X>' AS XML) AS xmlfilter FROM @t F
         )X
         CROSS APPLY
         ( 
            SELECT fdata.D.value('.','varchar(50)') AS splitdata 
            FROM X.xmlfilter.nodes('X') as fdata(D)
         ) Y
    )X WHERE X.Rn = 3 
```

//结果

**第三值**

```
False
bannana 
```

此外，您的问题也不是很清楚您使用的是什么版本的 SQL Server。如果您使用的是 SQL SERVER 2000，则可以继续使用以下方法。

**第 1 步：创建一个数字表**

```
CREATE TABLE dbo.Numbers
(
   N INT NOT NULL PRIMARY KEY
);
GO

DECLARE @rows AS INT;
SET @rows = 1;

INSERT INTO dbo.Numbers VALUES(1);
WHILE(@rows <= 10000)
BEGIN
   INSERT INTO dbo.Numbers SELECT N + @rows FROM dbo.Numbers;
   SET @rows = @rows * 2;
END 
```

**第 2 步：应用下面的查询**

```
DECLARE @t TABLE(ColumnValue VARCHAR(50))
INSERT INTO @t(ColumnValue) SELECT 'josh,Reg01,False,a0-t0,22/09/2010'
INSERT INTO @t(ColumnValue) SELECT 'mango,apple,bannana,grapes'
INSERT INTO @t(ColumnValue) SELECT 'stackoverflow'

--Declare a table variable to put the identity column and store the indermediate results
DECLARE @tempT TABLE(Id INT IDENTITY,ColumnValue VARCHAR(50),SplitData VARCHAR(50))

-- Insert the records into the table variable
INSERT INTO @tempT
SELECT  
    ColumnValue
    ,SUBSTRING(ColumnValue, Numbers.N,CHARINDEX(',', ColumnValue + ',', Numbers.N) - Numbers.N) AS splitdata 
FROM @t 
JOIN Numbers ON Numbers.N <= DATALENGTH(ColumnValue) + 1  
AND SUBSTRING(',' + ColumnValue, Numbers.N, 1) = ','  

--Project the filtered records

SELECT ThirdValue = X.splitdata
FROM
--The co-related subquery does the ROW_NUMBER() OVER(PARTITION BY ColumnValue)
(SELECT 
  Rn = (SELECT COUNT(*) 
        FROM @tempT t2 
        WHERE t2.ColumnValue=t1.ColumnValue 
        AND t2.Id<=t1.Id)
 ,t1.ColumnValue
 ,t1.splitdata
FROM @tempT t1)X
WHERE X.Rn =3 
```

- 结果

**第三值**

```
False
bannana 
```

您也可以将 Master..spt_Values 用于您的数字表

```
DECLARE @t TABLE(ColumnValue VARCHAR(50))
INSERT INTO @t(ColumnValue) SELECT 'josh,Reg01,False,a0-t0,22/09/2010'
INSERT INTO @t(ColumnValue) SELECT 'mango,apple,bannana,grapes'
INSERT INTO @t(ColumnValue) SELECT 'stackoverflow'

--Declare a table variable to put the identity column and store the indermediate results
DECLARE @tempT TABLE(Id INT IDENTITY,ColumnValue VARCHAR(50),SplitData VARCHAR(50))

-- Insert the records into the table variable
INSERT INTO @tempT
SELECT  
    ColumnValue
    ,SUBSTRING(ColumnValue, Number ,CHARINDEX(',', ColumnValue + ',', Number ) - Number) AS splitdata 
FROM @t 
JOIN master..spt_values ON Number <= DATALENGTH(ColumnValue) + 1  AND type='P'
AND SUBSTRING(',' + ColumnValue, Number , 1) = ','  

--Project the filtered records
SELECT ThirdValue = X.splitdata
FROM
--The co-related subquery does the ROW_NUMBER() OVER(PARTITION BY ColumnValue)
(SELECT 
  Rn = (SELECT COUNT(*) 
        FROM @tempT t2 
        WHERE t2.ColumnValue=t1.ColumnValue 
        AND t2.Id<=t1.Id)
 ,t1.ColumnValue
 ,t1.splitdata
FROM @tempT t1)X
WHERE X.Rn =3 
```

您可以从

1）[系统表table master..spt_values的用途是什么，其值的含义是什么？](https://stackoverflow.com/questions/4273723/what-is-the-purpose-of-system-table-table-master-spt-values-and-what-are-the-me)

2)[为什么（以及如何）使用 master..spt_values 拆分列？](https://stackoverflow.com/questions/4273978/why-and-how-to-split-column-using-master-spt-values)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T09:25:18.240

你真的需要像 String.Split(',')(2) 这样的东西，不幸的是在 SQL 中不存在，但这[可能](https://stackoverflow.com/questions/2647/split-string-in-sql)对你有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:43:39.957

您可以使用此解决方案和其他解决方案进行一些测试，但是，我相信在这种情况下使用 XML 几乎总是可以为您提供最佳性能并确保更少的编码：

```
DECLARE @InPutCSV NVARCHAR(2000)= 'josh,Reg01,False,a0-t0,22/09/2010'
DECLARE @ValueIndexToGet INT=3
DECLARE @XML XML =  CAST ('<d>' + REPLACE(@InPutCSV, ',', '</d><d>') + '</d>' AS XML);

WITH CTE(RecordNumber,Value) AS
(
     SELECT  ROW_NUMBER() OVER(ORDER BY T.v.value('.', 'NVARCHAR(100)') DESC) AS RecordNumber
             ,T.v.value('.', 'NVARCHAR(100)') AS Value
     FROM @XML.nodes('/d') AS T(v)
)
SELECT Value
FROM CTE WHERE RecordNumber=@ValueIndexToGet 
```

我可以确认从具有 100 000 个值的 CSV 字符串中获取值需要 1 秒。

# sparql - 在单个 sparql 查询中获取多个 uri 的标签

> ID：12278209
> 
> 赞同：1
> 
> 时间：2012-09-05T09:20:10.130
> 
> 标签：sparql

如果我们有一组 URI，我们如何在一个 SINGLE SPARQL QUERY 中获取所有这些 URI 的标签？

IE。给定，uri1，uri2，uri3 ...我们希望查询给我们

uri1 标签1

uri2 标签2

uri3 标签3

虽然我们可以发出单独的查询来获取每个 uri 的标签，但理想情况下，我们希望避免发出大量请求。

我试图从构造、联合和子查询的角度进行思考，但收效甚微。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T09:45:42.157

您没有说明标签在 RDF 数据中的表达方式，因此我假设它们通过`rdfs:label`属性连接到 URI。那么查询就是这样的：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?uri ?label { ?uri rdfs:label ?label } 
```

如果您只需要特定 URI 的标签，则可以通过过滤`?uri`变量来获得：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?uri ?label {
    ?uri rdfs:label ?label
    FILTER (?uri = ex:resource1 || ?uri = ex:resource2 || ?uri = ex:resource3)
} 
```

或者，如果您的商店支持 SPARQL 1.1：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?uri ?label {
    ?uri rdfs:label ?label
    FILTER (?uri IN (ex:resource1, ex:resource2, ex:resource3))
} 
```

# android - 实现 Facebook 风格的滑动菜单从右向左滑动

> ID：12278214
> 
> 赞同：3
> 
> 时间：2012-09-05T09:20:45.663
> 
> 标签：android, menu, sliding

我试图在我的应用程序中实现滑动菜单。我想要的是屏幕右上角有一个按钮。滑动菜单应该从右到左出现，这是 facebook 样式滑动的反向滑动。在[Jfeinstein 滑动菜单](https://github.com/jfeinstein10/SlidingMenu)中，滑动菜单从左到右出现。我试图实现源代码以使其从右到左发生。但不幸的是，我仍然无法得到它。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:27:45.420

在 github 上的 Jfeinstein Sliding Menu 中有一个名为“sliding right”的[分支。](https://github.com/jfeinstein10/SlidingMenu/tree/slidingright)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:23:17.960

这是一个演示项目，用于探索如何实现像 Facebook 和其他人使用的滑动菜单。

[安卓滑动菜单演示](https://github.com/gitgrimbo/android-sliding-menu-demo)

[android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-13T22:42:29.883

我在 youtube 上制作了一个视频（3 部分），介绍如何制作您正在寻找的滑动菜单。我将向您展示如何设置项目并将所有内容联系起来。

[http://www.youtube.com/watch?v=tJJMyzdB9uI](http://www.youtube.com/watch?v=tJJMyzdB9uI)

ECSlidingViewController（它是我使用的那个）很酷的一点是，您想要配置的所有内容（视图滑动多远、动画、左侧或右侧）都只需一行代码即可完成。设置时，我会告诉您在哪里可以将其更改为左侧或右侧。

希望这可以帮助。

# iphone - 如何在 popoverview 中显示两个按钮 - WEPOPOVER

> ID：12278215
> 
> 赞同：0
> 
> 时间：2012-09-05T09:20:44.980
> 
> 标签：iphone, ios, ios4

我想在 popoverview 中显示两个按钮。我正在使用 WEPOPOVER，我可以显示一个 btn。

但我不确定如何显示这两个按钮。

```
UIButton *editBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[editBtn setTitle:@"EDIT ME" forState:UIControlStateNormal];
[editBtn setFrame:CGRectMake(250, 0, 100,40)];
[editBtn addTarget:self action:@selector() forControlEvents:UIControlEventTouchUpInside];
[editBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
editBtn.titleLabel.shadowOffset = CGSizeMake(0, -1);
editBtn.titleLabel.font = [UIFont boldSystemFontOfSize:20];
editBtn.backgroundColor = [UIColor blackColor];

UIButton *deleteBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[deleteBtn setTitle:@"Delete ME" forState:UIControlStateNormal];
[deleteBtn setFrame:CGRectMake(250, 0, 100,40)];
[deleteBtn addTarget:self action:@selector(doSubscription) forControlEvents:UIControlEventTouchUpInside];
[deleteBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
deleteBtn.titleLabel.shadowOffset = CGSizeMake(0, -1);
deleteBtn.titleLabel.font = [UIFont boldSystemFontOfSize:20];
deleteBtn.backgroundColor = [UIColor blackColor];

//  place inside a temporary view controller and add to popover
UIViewController *viewCon = [[UIViewController alloc] init];
viewCon.view = (UIView *)[NSArray arrayWithObjects:editBtn,deleteBtn, nil];
viewCon.contentSizeForViewInPopover = editBtn.frame.size;       // Set the content size

navPopover = [[WEPopoverController alloc] initWithContentViewController:viewCon];
[navPopover presentPopoverFromRect:editButton.frame
                                inView:self.view
              permittedArrowDirections:UIPopoverArrowDirectionUp | UIPopoverArrowDirectionDown
                              animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:21:04.587

您为两个按钮提供了相同的框架。所以它只显示一个按钮。

```
[editBtn setFrame:CGRectMake(250, 0, 100,40)];

[deleteBtn setFrame:CGRectMake(250, 0, 100,40)]; 
```

# javascript - Window.Locaton.reload() 在不同的浏览器（火狐，Chrome）中表现不同

> ID：12278216
> 
> 赞同：0
> 
> 时间：2012-09-05T09:21:05.990
> 
> 标签：javascript

我对 JavaScript 很陌生，我写了一些代码来重新加载页面

`window.location.reload()`

当我在 Firefox 中运行应用程序时，它会重新发布表单，当我在 Chrome 中运行应用程序时，它会重定向到另一个页面。

使用重新加载页面时浏览器（Firefox，Chrome）的机制是`window.location.reload()`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:57:36.150

根据 w3school。reload() 方法的作用与浏览器中的重新加载按钮相同

语法是

```
location.reload(forceGet) 
```

forceGet 是可选的。默认 false 从缓存中重新加载页面。如果要强制浏览器从服务器获取页面，请将此参数设置为 true

您也可以使用 href 重新加载页面。

```
window.location.href=""; 
```

# iphone - 将 setSelectedIndex 实现到 tabBarController 与 presentmodalview 到 tabbarcontroller

> ID：12278217
> 
> 赞同：0
> 
> 时间：2012-09-05T09:21:06.667
> 
> 标签：iphone, uitabbarcontroller, presentmodalviewcontroller

我在我的 iphone 应用程序中使用 ARC 和 Storyboard。我有带按钮的简单输入文本视图，在单击按钮时，我正在使用 Tabbarcontroller 将 presentModalvuewcontroller 实现到主视图。它工作正常。现在我需要有条件地实现 setSelectedIndex:1 到 tabbarcontroller 这是我正在使用的代码：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
ViewController *viewCon = (ViewController*)[storyboard instantiateViewControllerWithIdentifier:@"MainTab"];
   viewCon.tabBarController.selectedIndex= 1;   
[self presentModalViewController:viewCon animated:YES]; 
```

它工作正常。只是不更改选项卡。它显示在默认的 0 选项卡上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:28:54.337

试试这个

```
self.tabBarController.selectedIndex = 1; // Your desired index 
```

tabBarController 属性内置于 UIViewController。

或者

在尝试更改选项卡之前执行以下操作：

```
UITabBarController *tab=self.tabBarController; 
```

如果您使用过导航控制器，那么

```
UITabBarController *tab = self.navigationBar.tabBarController 
```

进而

```
if (tab){
   NSLog(@"I have a tab bar");
   [self.tabBarController setSelectedIndex:1];
}
else{
   NSLog(@"I don't have");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:52:48.207

在 ViewController 的 viewDidLoad 中添加这一行：

```
self.tabBarController.selectedIndex = 1; 
```

编辑：仅当来自上一个视图的按钮单击时才调用此 selectedIndex。

使一个属性 BOOL 标志；在 appDeleagete。

现在最初它将是 self.flag = FALSE; 在应用程序 didFinishLaunching 中。

所以在前一个视图的按钮上单击。

```
-(void)btnBackClicked:(id)sender
{
   AppDelegate *objAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
   objAppDelegate.flag = TRUE;
   ........
} 
```

现在在 ViewController 的 viewDidLoad 中添加这些行：

```
 AppDelegate *objAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
if(objAppDelegate.flag)//if from previous then only tabbar has selected index 1
{
  self.tabBarController.selectedIndex = 1;
} 
```

# php - 将属性添加到 For 循环 PHP 中的第一个元素

> ID：12278218
> 
> 赞同：3
> 
> 时间：2012-09-05T09:21:12.043
> 
> 标签：php, for-loop

我想知道如何将“act”类添加到以下 for 循环中的第一个元素？

```
if (!isset($this->params['page'])){
                $this->params['page'] == 1;
            }
             for($i=1; $i< $news_cont['response']['pager']['total_page']+1; $i++) {
                 if (isset($this->params['page']) && $this->params['page'] == $i){
                     $act = 'class="act"';
                 }else{
                     $act = '';
                 }
             echo '<a href="/' . $this->params['lang'] . '/' . $this->params['action'] . '/' . $i . '" ' . $act . '>' . $i . '</a>';
             } 
```

当第一个循环元素具有行为类时，我需要它`$this->params['page']`，否则类“行为”被定义为匹配的元素`$this->params['page']`感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:31:34.887

```
 for($i=1; $i< $news_cont['response']['pager']['total_page']+1; $i++) {
    echo '<a href="/' . $this->params['lang'] . '/' . $this->params['action'] . '/' . $i . '" ' . ((($i == 1) && (!isset($this->params['page'])) ) ? 'class="act"' : '') . '>' . $i . '</a>';
  } 
```

# objective-c - iOS双方法参数失败

> ID：12278222
> 
> 赞同：4
> 
> 时间：2012-09-05T09:21:41.050
> 
> 标签：objective-c, ios, c

我有一些框架代码可以做到这一点：

```
#ifdef USE_DOUBLE
typedef double real;
#else
typedef float real;
#endif 
```

但是当我尝试使用这种类型时`USE_DOUBLE`，就像这样*定义*（所以真正的==双）：

```
- (id) initSomeObject:(real)arg  andSomeOtherStuff:(id)thing
{
    self = [super init];
    if (self)
    {
        field = arg;
    }
}

[someObject initSomeObject:2.0  andSomeOtherStuff:nil]; 
```

该`arg`值被完全丢弃，显示为 5.3...e-315。**但是**，如果我`USE_DOUBLE` *关闭*，则价值`2.0`完美。这是在 iPhone 4 上使用 Xcode 4.3.3 和 LLVM 3.1 的最新 iOS 5+ 上。iOS 不能很好地处理双打吗？我的`USE_DOUBLE`标志是否应该始终未定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:21:05.537

定义`USE_DOUBLE`和类型`real`在我的应用程序使用的静态库中定义。事实证明，`USE_DOUBLE`需要在*框架*和*客户端应用程序*中将其设置为**相同的值**才能正常工作。似乎我的应用程序被认为是一个单独的编译单元，这意味着因为它没有定义，所以是一个浮点数。这导致运行时缩小我的值的精度并导致意外/未定义的行为。添加到我的应用程序项目中似乎已经解决了这个问题。**`typedef``USE_DOUBLE``real``#define USE_DOUBLE`**

# asp.net - 可见性设置为 false 时复选框选中状态更改

> ID：12278225
> 
> 赞同：2
> 
> 时间：2012-09-05T09:21:59.083
> 
> 标签：asp.net, viewstate

我无法理解在页面生命周期的各个阶段设置复选框可见性对选中状态的影响。

下面给出了动态创建的复选框的示例代码。

```
 protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        check = new CheckBox();
        check.AutoPostBack = true;
        check.Text = "checkbox1";
        check.ToolTip = "tooltip for checkbox1";
        check.CheckedChanged += new EventHandler(check_CheckedChanged);  

        this.Form.Controls.Add(check);
        Button btn = new Button();
        btn.Text = "click me";
        btn.Click += new EventHandler(btn_Click);
        this.Form.Controls.Add(btn);

    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            check.Checked = true;
            check.Text = "text reassigned.";
            check.ToolTip = "tooltip reassigned";
        }

    }

    protected override void OnPreRenderComplete(EventArgs e)
    {            
        base.OnPreRenderComplete(e);
        check.Visible = false;
    } 
```

这里的问题是，当回发发生时（我单击按钮），然后我注意到在 Page_load 事件中，复选框维护工具提示和文本的视图状态。但是，检查状态更改为 false 并触发 CheckedChanged 事件。为什么会有这样的行为？

此外，如果我在 PageLoad() 或 OnPreRender() 事件中设置复选框的可见性，则复选框的选中状态在回发期间保持不变，并且不会触发 CheckedChanged 事件。

我只是好奇在 OnPreRenderComplete 事件中更改可见性以使复选框默认为未选中状态时会发生什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:12:45.170

好吧，我已将我的最后一个答案标记为删除，因为我没有正确理解这个问题。

那么你正在做的事情是：

1.  您在服务器端的 Init 事件中在运行时添加了复选框。
2.  然后在页面加载中，在 Not Post Back 检查中将其值设置为 true。
3.  然后在 OnPreRenderComplete 事件中将其可见性设置为 false

当您在服务器端将可见性设置为 false 时，不会在客户端生成控件（您可以通过查看页面源来检查它），因为不会在客户端创建控件，因此当您回发页面时，复选框为在页面 init 中创建并且由于它不在客户端，所以 dot net 不知道它的最后一个值，所以你得到的复选框是错误的。

如果您需要进一步检查，请将 OnPreRenderComplete 事件更改为：

```
protected override void OnPreRenderComplete(EventArgs e)
    {
        base.OnPreRenderComplete(e);
        //check.Visible = false;
        check.Style.Add("display", "none");
    } 
```

通过上面的行，样式被添加到控件中，因此控件在客户端生成但不可见，您将在回发期间获得它的值。

# android - Android 按钮动画与时间同步

> ID：12278228
> 
> 赞同：2
> 
> 时间：2012-09-05T09:22:05.510
> 
> 标签：android, android-animation

我需要一个建议，如何创建一些我想在按钮中添加的动画。实际上我有动画代码，我需要的是如何正确设置每个动画的时间。这是我已经尝试过的：

```
 fest.setVisibility(View.INVISIBLE);
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {
            fest.setVisibility(View.VISIBLE);
            fest.startAnimation(anim);
            handler.removeCallbacks(this);
        }
    }, 500); 
```

这是我为 7 个按钮所做的事情。首先，我将可见性设置为不可见，因为我想实现它们在 5 毫秒后出现的效果，`onCreate`并且对于每个下一个按钮，我将延迟时间增加 5 毫秒，以便它们中的每一个都出现在前一个按钮之后。但是这段代码中的问题是，例如，当下一个处理程序为第二个按钮启动时，previos 按钮在部分秒内变得不可见并再次显示（我希望有人明白我的意思）。

有什么建议可以更好地实施类似的事情吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:52:35.473

所以这是解决这个问题的东西。我对每个按钮都使用了它，它可以按我的意愿工作：

```
 final Handler festHandler = new Handler();
    festHandler.postDelayed(new Runnable() {

        @Override
        public void run() {
             Animation anim = AnimationUtils.loadAnimation(Menu.this, R.anim.fadein);
             fest.setVisibility(View.VISIBLE);
             fest.startAnimation(anim);
             festHandler.removeCallbacks(this);
        }
    }, 400); 
```

# javascript - Gwt HashSet 和 HashMap 迭代器函数很慢

> ID：12278231
> 
> 赞同：1
> 
> 时间：2012-09-05T09:22:23.043
> 
> 标签：javascript, gwt

GWT 生成的 javascript 代码`HashMap.iterator()`非常`HashSet.iterator()`慢。有没有办法加快速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:34:30.250

非常非常慢？你必须更具体一点。这是一个总结 100000 个数字的小例子：

```
final int N = 100000;

final long startInsert = System.currentTimeMillis();

final HashSet<Integer> set = new HashSet<Integer>(N);
for (int i = 0; i < N; i ++)
  set.add(i);
final long stopInsert = System.currentTimeMillis();

RootPanel.get().add(new Label(
    "Time to insert: " + (stopInsert - startInsert) + "ms"));

final long startIterate = System.currentTimeMillis();
final Iterator<Integer> iterator = set.iterator();

int sum = 0;
while (iterator.hasNext()) {
  final Integer integer = iterator.next();
  sum += integer;
}

final long stopIterate = System.currentTimeMillis();
RootPanel.get().add(new Label("Sum: " + sum + 
    ", Time to iterate: " + (stopIterate - startIterate) + "ms")); 
```

让我们在 Core2 Duo 上试试这个：

这是 Firefox 15（编译模式）中的输出：

```
Time to insert: 490ms
Sum: 4999950000, Time to iterate: 766ms 
```

和 Chrome 21（编译模式）：

```
Time to insert: 130ms
Sum: 4999950000, Time to iterate: 105ms 
```

这比开发模式下要慢：

Firefox 15（开发模式）：

```
Time to insert: 16ms
Sum: 704982704, Time to iterate: 12ms 
```

Chrome 21（开发模式）：

```
Time to insert: 59ms
Sum: 704982704, Time to iterate: 10ms 
```

但考虑到这是 JavaScript 与 Java，结果实际上相当不错。

[（顺便说一句，如果有人想知道为什么 Java（704982704）与 JavaScript（4999950000）的总和不同......这是预期的，请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsCompatibility #语言](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsCompatibility#language)）]

# wcf - WCF 服务：状态 200，sc-win32-status 为 64

> ID：12278232
> 
> 赞同：19
> 
> 时间：2012-09-05T09:22:27.447
> 
> 标签：wcf, iis

我们在 IIS 6.0 上托管 WCF 服务的服务器之一上观察到以下行为：

1.  IIS 日志显示所用时间的值很高 (> 100000)
2.  HTTP 状态码是 200
3.  sc-win32-status 代码显示值为 64

我发现[sc-win32-status 代码为 64](http://www.it-notebook.org/iis/article/scwin32status_64_scstatus_200.htm)表示“指定的网络不再可用”

最初我怀疑这可能是因为[MinFileBytesPerSecond](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/0b447dba-6bcc-4238-a932-0e083170c3ab.mspx?mfr=true)设置的限制，它设置了 HTTP.sys 在将数据从客户端发送到服务器以及从服务器返回到客户端时强制执行的最小吞吐率。但是 sc-bytes 和 cs-bytes 的值表示发送的数据量在服务通常观察到的范围内。

***另请注意，WCF 服务托管在四个机器上并且是负载平衡的，但问题仅发生在其中一台服务器上。（但本质上不是在同一台服务器上）。问题也是间歇性的。***

有没有其他人遇到过这个错误？关于什么可能是错的任何线索？

**更新**

说明：对 IIS 7.5 的观察（IIS 版本并不重要）

我能够复制该问题。在以下情况下会出现此问题：

1\. WCF 服务需要很长时间才能响应
2\. 客户端代理在收到来自服务器的响应之前超时。在这种情况下，它会导致客户端出现 TimeoutException。
3\. 服务器一直在等待客户端的 TCP ACK，它永远不会收到。

因此超时（TCP 套接字超时（默认值：4 分钟）和 sc-win32-status 为 64

***所以基本上看起来WCF代码需要很长时间才能响应并且客户端超时，我在IIS日志中观察到的只是一个症状而不是问题。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-31T15:15:49.773

如果您超过 WCF 服务的最大会话、调用或实例（取决于您如何配置服务实例上下文模式），您所描述的行为也会发生。如果您观察 %max 并发会话和/或 %max 并发调用的 System.ServiceModel 性能计数器（同样取决于您的服务的实例上下文），您可能会看到与 IIS 日志条目的相关性。

请注意，可以在服务限制行为中配置这些最大值。

[https://msdn.microsoft.com/en-us/library/vstudio/system.servicemodel.description.servicethrottlingbehavior(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/vstudio/system.servicemodel.description.servicethrottlingbehavior(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T10:41:11.037

IIS 使服务进入睡眠状态以节省资源。

从这里复制（[WCF REST 服务在不活动后进入睡眠状态](https://stackoverflow.com/questions/5801497/wcf-rest-service-goes-to-sleep-after-inactivity)）

> *托管服务的应用程序池定义空闲超时属性（IIS 管理控制台中应用程序池的高级设置），默认为 20 分钟。如果应用程序池在空闲超时内没有收到请求，则终止为池服务的工作进程。IIS收到新请求后必须重新启动进程，该进程必须加载应用程序域和所有相关程序集，编译.svc文件，运行服务主机并处理请求。解决方法可以是增加空闲超时但含义这个超时是正确处理服务器资源。如果不需要该过程，则应停止该过程。另一个丑陋的解决方法是使用一些 ping 进程（例如服务器上的 cron 作业或计划任务），它会定期 ping 调用同一应用程序中服务或页面上的某些方法。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T19:37:30.563

我再次看到您的问题，并想指出我找到了解决方案。原来是web.config中的这段代码：

```
 <pages smartNavigation="true"> 
```

关闭此功能后，我不再收到相同的超时错误。另请参阅[此处的答案](https://stackoverflow.com/questions/13032748/iis-7-5-throws-sc-win32-status-995-after-60-seconds-on-web-service-asmx-reque/15227980#15227980)

# php - json_encode 只返回一个对象

> ID：12278233
> 
> 赞同：0
> 
> 时间：2012-09-05T09:22:28.317
> 
> 标签：php, html, json

我在一个文件中有这段代码

```
//declaring something
$array=array();
$arraylst=/*retrieve from database query and sure this contains the correct result*/
<?php 
if(!empty($array)):
?>
<div id="something">
<?php
$n=0;
foreach($arraylst as $key=>$val):
    $array="span".$n;
    //create a span and print out $val's property1  
    $n++;
endforeach;

$n=0;
foreach($array as $key=>$val):
    //create a span and print out $val's property2
    $n++;
endforeach;
</div>
<?php 
endif;
?>

<script language="javascript">
var arr=[<?php echo json_encode($array); ?>]
//do something else
</script> 
```

我看到的屏幕输出只有一个“跨度”；也就是说，如果我的`arraylst`大小是 3，我只能看到第一个跨度，因为我的数据库查询是按升序排序的。其余的根本看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:24:09.627

`$array="span".$n;`用字符串覆盖数组。

用于`array_push( $array, "span$n" );`将项目添加到数组中。

（然后你会想要从周围删除`[`and因为你会有一个数组 in ）。`]``json_encode``$array`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:25:43.647

您总是*将*值“span”设置为 $array。

```
$array="span".$n; 
```

您不会*将*其添加到您将数组*设置*为该值的数组中。

利用：

```
$array[] ="span".$n; 
```

# jquery - 使一个角度指令抛出一个我可以在 jquery 中绑定的事件

> ID：12278234
> 
> 赞同：2
> 
> 时间：2012-09-05T09:22:29.300
> 
> 标签：jquery, angularjs

我目前有一个 angular 指令，我已经编写了该指令以使文件上传更容易。我基本上想让指令在上传完成后触发一个事件，然后使用 jquery 绑定这个事件来更新页面上的图像。

这就是我设置指令的方式：

```
module.directive("fileUpload", 
function()
{
    var directive = 
    {
        restrict:"E",
        template:'<form method="post" enctype="multipart/form-data"></form>',
        replace:true,

        compile: function compile()
        {
            return function postLink(scope, iElement, iAttrs, controller)
            {
                //some file upload code in jquery.
            }
        }
    };
    return directive;

}); 
```

我基本上想知道的是我怎样才能让这场火灾成为一个事件？（如果它是可能的）

我知道指令是一个复杂的领域，所以如果有人对我应该如何配置它有任何建议，他们也将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T22:53:45.680

如果你只想更新图片 url，你可以简单地让控制器来做。 [http://plnkr.co/edit/yCKaKH](http://plnkr.co/edit/yCKaKH)

在这里，它使用在定义了“img”元素的指令中创建的 $scope。

如果您想在指令之外进行通信（范围方面），您可以通过 $scope.$emit() 和 $scope.$on() 使用事件机制。[http://plnkr.co/edit/qlWIyB](http://plnkr.co/edit/qlWIyB)

# php - 通过php将mysql数据库导出到csv 4kb后停止

> ID：12278235
> 
> 赞同：1
> 
> 时间：2012-09-05T09:22:36.303
> 
> 标签：php, mysql, apache

我正在使用一个脚本，该脚本旨在从数据库中提取表并将它们格式化为 csv 并保存到您的机器上。

它工作正常，但只要文件达到 4kb，它就会停止并保存。

显然，表格大于 4kb，所以它在句子中间被切断了。

我在考虑内存分配问题？关于可能导致这种情况的任何想法？

运行阿帕奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:30:06.207

当您尝试导出数据库时，PHPMyAdmin 和这些东西有很多问题（缓冲区限制......）。

要导出 MySQL 数据，您可以尝试 mysqldump：[http ://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

这边走：

```
mysqldump -u [user] -p[user_password] [database_name] > backup.sql 
```

PS：要小心，因为 -p 参数没有空格。

# sql - SQL Server 查询构建

> ID：12278236
> 
> 赞同：3
> 
> 时间：2012-09-05T09:22:43.297
> 
> 标签：sql, sql-server

我在 SQL Server 数据库中有一组数据，我需要计算机器的正常运行时间。我使用两个变量来确定正常运行时间或停机时间。这两个变量是`machine_ON`和`failure(s)`。`machine_ON`只是数据库中的一个变量，`failure`可以是64种不同的故障，但都表示为`fx_x`.

这些变量的状态信息存储在数据库中如下：

```
timestamp                   failurebitNr    timestampOutOfAlarm
2012-01-17 10:38:58.000     f1_14           2012-01-17 10:39:05.000 
```

含义：故障`f1_14`从`2012-01-17 10:38:58.000`直到`2012-01-17 10:39:05.000`

状态也`machine_ON`以相同的方式保存在同一个表中，只是`failurebitNr`具有不同的值 [ `t2_13`]。

`timestamp`所以要确定正常运行时间，我需要得到减去任何故障时间`timestampOutOfAlarm`的时间差。`failurebutNr = 't2_13'`

因此，例如，我的数据库中有这些行：

![单击以获取表格表示的图像](../Images/3e480387449cbb52004d11d1db4ceabd.png)

这应该给出以下图形表示：

![数据服务器的图形表示](../Images/283d9a2422eb4beea2a8c1a6aed17705.png)

绿色是正常运行时间，红色是停机时间。

我习惯于使用 PHP，而不是使用 while 循环并归档一些数组并执行其他脚本。但现在我需要以查询方式在 SQL Server 数据库中完成这一切......

那么，如何计算正常运行时间（绿色）和停机时间（红色）？

**更新**

我试图以秒为单位获取机器开启的时间。我使用了这个查询：

```
<!-- language: lang-sql -->
DECLARE @startDate datetime
DECLARE @endDate datetime
DECLARE @projectNr int
DECLARE @MachineNr nvarchar(10) 

SET @startDate = '2012-01-01 00:00:00.000'
SET @endDate  = '2012-02-01 00:00:00.000'
SET @projectNr = '1234567'
SET @MachineNr = '2'

SELECT 
    DATEDIFF("SECOND",
        CASE WHEN timestamp < @startDate 
            THEN @startDate 
            ELSE timestamp 
        END, 
        CASE WHEN timestampOutOfAlarm > @endDate OR timestampOutOfAlarm IS NULL 
            THEN @endDate
            ELSE timestampOutOfAlarm 
        END) AS Uptime
FROM 
    [table]
WHERE
     timestamp < @endDate
     AND (timestampOutOfAlarm > @startDate OR timestampOutOfAlarm IS NULL)
     AND fileProjectNr = @projectNr
     AND fileProjectMachineNr = @MachineNr
     AND (failureBitNr = 't2_13' AND failureBitValue = '1') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:23:59.303

问题解决了：

我是在 2 个存储过程或 Query 中完成的。一种用于获取“ON”时间，另一种用于获取“ON”时间内的所有“DOWN”时间。通过这两次，我可以计算正常运行时间、停机时间、维护时间。

查询 ON 时间：

```
<!-- language: lang-sql -->
SELECT  fctAlarmId,
        fileProjectNr, 
        fileProjectMachineNr, 
        failureBitNr,   
        timestamp, 
        CASE WHEN timestampOutOfAlarm > @endDate OR timestampOutOfAlarm IS NULL 
            THEN @endDate
            ELSE timestampOutOfAlarm
        END 
        AS timestampOutOfAlarm
INTO    #tempTable1
FROM    fctAlarmHistory
WHERE   (timestampOutOfAlarm >= @startDate OR timestampOutOfAlarm = NULL) 
        AND timestamp < @endDate
        AND failureBitValue = 1 
        AND failureBitNr = 't2_13'
        AND fileProjectNr = @projectNr
        And fileProjectMachineNr = @ProjectMachineNr

-- SUM the result of all ON times into OnTime in seconds
SELECT 
    SUM(DATEDIFF("SECOND",
        CASE WHEN timestamp < @startDate 
            THEN @startDate 
            ELSE timestamp 
        END, 
        CASE WHEN timestampOutOfAlarm > @endDate
            THEN @endDate 
            ELSE timestampOutOfAlarm 
        END)) AS OnTime
FROM
    #tempTable1 
```

查询 ON 期间的停机时间：

```
<!-- language: lang-sql -->
SELECT  fctAlarmId,
        fileProjectNr, 
        fileProjectMachineNr, 
        failureBitNr,   
        timestamp, 
        CASE WHEN timestampOutOfAlarm > @endDate OR timestampOutOfAlarm IS NULL 
            THEN @endDate
            ELSE timestampOutOfAlarm
        END 
        AS timestampOutOfAlarm
INTO    #tempTable1
FROM    fctAlarmHistory
WHERE   (timestampOutOfAlarm >= @startDate OR timestampOutOfAlarm = NULL) 
        AND timestamp < @endDate
        AND failureBitValue = 1 
        AND failureBitNr = 't2_13'
        AND fileProjectNr = @projectNr
        And fileProjectMachineNr = @ProjectMachineNr

SELECT  fctAlarmId,
        fileProjectNr, 
        fileProjectMachineNr, 
        failureBitNr,   
        timestamp, 
        CASE WHEN timestampOutOfAlarm > @endDate OR timestampOutOfAlarm IS NULL 
            THEN @endDate
            ELSE timestampOutOfAlarm
        END 
        AS timestampOutOfAlarm
INTO    #tempTable2
FROM    fctAlarmHistory
WHERE   (timestamp BETWEEN @startDate AND @endDate) 
        AND failureBitValue = 1
        AND (failureBitNr LIKE'f%')
        AND fileProjectNr = @projectNr
        And fileProjectMachineNr = @ProjectMachineNr

CREATE TABLE #tempTable3
(
ID int IDENTITY(1,1),
timestamp datetime,
timestampOutOfAlarm datetime
)

DECLARE failure_Cursor CURSOR FOR
SELECT timestamp, timestampOutOfAlarm
FROM #tempTable2
ORDER BY timestamp ASC

OPEN failure_Cursor

-- Perform the first fetch.
FETCH NEXT FROM failure_Cursor
INTO @rij_timestamp, @rij_timestampOutOfAlarm

INSERT INTO #tempTable3 (timestamp, timestampOutOfAlarm) VALUES(@rij_timestamp,@rij_timestampOutOfAlarm)

-- Check @@FETCH_STATUS to see if there are any more rows to fetch.
WHILE @@FETCH_STATUS = 0
    BEGIN
        PRINT @rij_timestamp
        IF @rij_timestamp <= (SELECT TOP 1 timestampOutOfAlarm FROM #tempTable3 ORDER BY timestamp DESC)
        BEGIN   
            IF @rij_timestampOutOfAlarm > (SELECT TOP 1 timestampOutOfAlarm FROM #tempTable3 ORDER BY timestamp DESC)
            BEGIN
                UPDATE #tempTable3 SET timestampOutOfAlarm = @rij_timestampOutOfAlarm WHERE ID = (SELECT TOP 1 ID FROM #tempTable3 ORDER BY timestamp DESC)

            END
        END
        ELSE
            INSERT INTO #tempTable3 (timestamp, timestampOutOfAlarm) VALUES(@rij_timestamp,@rij_timestampOutOfAlarm)

        FETCH NEXT FROM failure_Cursor
        INTO @rij_timestamp, @rij_timestampOutOfAlarm
    END
CLOSE failure_Cursor
DEALLOCATE failure_Cursor

-- Select the failure time.
SELECT 
    SUM(DATEDIFF("SECOND",
        CASE WHEN tt3.timestamp < @startDate 
            THEN @startDate 
            ELSE tt3.timestamp 
        END, 
        CASE WHEN tt3.timestampOutOfAlarm > tt1.timestampOutOfAlarm 
            THEN tt1.timestampOutOfAlarm 
            ELSE tt3.timestampOutOfAlarm 
        END)) AS DownTime
FROM
    #tempTable3 tt3
INNER JOIN
    #tempTable1 tt1
ON
    tt3.timestamp BETWEEN tt1.timestamp AND tt1.timestampOutOfAlarm 
```

# javascript - 将 Orbit Slider 与视频一起使用

> ID：12278238
> 
> 赞同：0
> 
> 时间：2012-09-05T09:22:46.413
> 
> 标签：javascript, jquery, timer, slider, orbit

我有一个关于[Orbit Slider](http://www.zurb.com/playground/orbit-jquery-image-slider)的问题。

我想在滑块中放置一个 youtube 视频。我用**div**和**embed**替换了**img**，成功了。视频可以播放和停止。

**我的问题是，当用户在滑块中的视频上按下PLAY**时，如何使滑块的计时器停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:43:45.377

如果您查看 Orbit 滑块 javascript，它使用事件工作。在 Orbit JS 文件中查找这些代码

```
 this.$element.bind('orbit.start', function (event, index) {
    self.startClock();
  });

  this.$element.bind('orbit.stop', function (event, index) {
    self.stopClock();
  }); 
```

这些将事件 'orbit.stop' 和 'orbit.start' 事件绑定到 HTML 元素（在使用 Foundation 设置 Orbit 的方式时，它通常具有 ID 'featured'）。因此，如果您从 HTML 元素触发这些事件，例如“orbit.stop”，它将调用函数 stopClock()。以下应该有助于...

HTML

```
<a id="stop-button" href="#" class="button rounded">stop</a>
<a id="start-button" href="#" class="button rounded">start</a> 
```

Javascript

```
$('#stop-button').on('click',function(){
    $('#featured').trigger('orbit.stop');
});

$('#start-button').on('click',function(){
    $('#featured').trigger('orbit.start');
});

/*using the setup 
<div id="featured">
  <img src="../images/orbit-demo/demo1.jpg" />
  <img src="../images/orbit-demo/demo2.jpg" />
  <img src="../images/orbit-demo/demo3.jpg" />
</div>
*/ 
```

# java - java - 如何在java中显示firstrow直到lastrow？

> ID：12278244
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:22:59.320
> 
> 标签：java, swing, jtable, tablemodel

> **可能重复：**
> [如何使用 Java 向 JR 报告显示第一行直到最后一行？](https://stackoverflow.com/questions/12275588/how-to-display-first-row-until-last-row-to-jr-report-using-java)

我想从第一行到最后一行调用表中的记录并显示它..

我使用了这种语法：

```
TableModelEvent tab = new TableModelEvent(view.getTable().getModel());
int first = tab.getFirstRow();
int last = tab.getLastRow();
for(int a = first;a<last;a++){
  JTable tables = new JTable(view.getTable().getModel());
  if(tables.getColumnName(3).equals("Price")){
    BigDecimal price = (((BigDecimal)view.getTable().getModel().getValueAt(a,3))); 
```

但它只显示最后一行的数据，那么如何显示从第一行到 lastrow 的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:35:34.343

*   创建[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

*   把[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)放到[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

*   不知道，不会让我感觉你在[监听数据变化](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange)

*   使用[tableModel.set/getValueAt(int row, int column)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，其中包含有关您的想法的更多详细信息

# c++ - 我怎样才能在结构中上课

> ID：12278247
> 
> 赞同：-3
> 
> 时间：2012-09-05T09:23:14.430
> 
> 标签：c++, class, struct

我有课。。

```
class myClass
{
public:
    myClass(int time);
} 
```

然后我需要在结构中有这个类。

```
class TopClass
{
 public:
  typedef struct{
    int myint;
    myClass myclass;
  }tStruct;

  tStruct sStruct1;
  tStruct sStruct2;

} 
```

我该怎么做？如何调用 myClass 的构造函数？是使用类而不是结构的唯一方法吗？

我的构造函数

```
TopClass::TopClass():               
        sStruct1({32, myClass(100)}),
        sStruct2({52, myClass(1000)})
{

} 
```

但我收到错误：

> **扩展初始值设定项列表仅适用于 -std=c++0x 或 -std=gnu++0x**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:33:20.363

> 我该怎么做？如何调用 myClass 的构造函数？

您`struct`将需要一个构造函数，因为它有一个没有默认构造函数的成员。为了拥有一个构造函数，它还需要自己的名称，而不仅仅是`typedef`别名。

```
struct tStruct {
    // If you want a default constructor:
    tStruct() : myClass(42) {}

    // If you want to specify the time:
    tStruct(int time) : myClass(time) {}

    int myint;
    myClass myclass;
}; 
```

> 是使用类而不是结构的唯一方法吗？

`class`并且`struct`意味着完全相同的东西（除了具有不同的默认访问说明符的微小区别）。你可以用一个做的任何事情，你都可以用另一个做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:34:17.200

您可以将构造函数添加到结构：http: [//ideone.com/ifBw2](http://ideone.com/ifBw2)

```
class TopClass
{
 public:
  struct tStruct {
    tStruct(int time, int k = 0): myint(k), myclass(time) {}
    int myint;
    myClass myclass;
  };

  TopClass(int t): sStruct1(t), sStruct2(t) {}

  tStruct sStruct1;
  tStruct sStruct2;

}; 
```

**编辑**

至于新问题 - 你必须使用新标准（`-std=c++0x`）这样做。在旧标准中，您必须添加显式 ctor 来初始化成员变量。`struct`在 C++ 中几乎完全相同`class`- 您可以添加 ctors、成员函数、静态函数。唯一的区别是默认隐私 - public for`struct`和`private`for `class`：

```
class A {
public: 
  int b;
}; 
```

完全一样

```
struct A {
  int b; 
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:55:00.680

实际上，Pawel Zubrycki 的回答是可以的。

但我想知道为什么你必须这样做，你必须在 TopClass 中导入另一个类构造函数。

> 我的意思是代码应该遵循高内聚和低耦合的规则。在软件构建中，我们更喜欢`composition`（一种重要的设计模式）而不是其中的类定义。类似于以下代码。

```
class B{
public:
    B(int y){b = y;}
private:
    int b;
};

class A {
public:
    A(int x):b(x){...};
private:
    B b;
}; 
```

从代码中我们可以最大化B类，明显降低A类的复杂度。A&B可以自己改变。

# c# - 在 C# 中动态更改 if 语句的条件

> ID：12278251
> 
> 赞同：0
> 
> 时间：2012-09-05T09:23:28.633
> 
> 标签：c#, conditional-statements

我正在研究一种算法，其目的是创建某个事件发生的日期集合（以便我可以在 MonthCalendar 控件上将它们加粗，或以其他方式显示它们）。

现在，对于可以用常规函数描述的简单时间间隔（例如，如果事件每周一或每 10 天发生一次），这不是问题。

当我有一个不规则发生的事件时，真正的问题就会出现（例如，如果每月的第一天是星期二，那么每个星期五都会发生事件，并且那种事件）。

由于我无法预测该条件的格式，甚至无法预测需要满足的条件数量，因此我需要找到一种方法来在运行时更改相应 if 语句中的条件。

事件的定义存储在 SQL 数据库中。现在我的想法是使用一个 List ，它的每个元素都是一个条件，然后将它们传递给适当的 if 语句（如果有多个语句）或将它们连接成一个字符串并传递给适当的 if 语句。

这种方法是否可行，我该怎么做，或者我需要找到另一种方法，在这种情况下请给我一个建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:26:30.003

您可以使用通用委托`Predicate<T>`。（参见MSDN 上的[Predicate(T) Delegate](http://msdn.microsoft.com/en-us/library/bfcke1bz%28v=vs.100%29.aspx)）

`Predicate<IConditionParameters>`将返回布尔值，`IConditionParemeters`抽象出一组条件参数，委托本身封装了返回值计算的逻辑。

```
public class SimpleConditionParameters : IConditionParameters
{
   public int XValue { get; set; }
}

public class ComplexConditionParameters : IConditionParameters
{
   public int XValue { get; set; }

   public int YValue { get; set; }

   public bool SomeFlag { get; set; }
}

var conditions = new List<Predicate<IConditionParameters>>();
Predicate<SimpleConditionParameters> simpleCondition = (p) => 
{
   return p.XValue > 0;
};

Predicate<ComplexConditionParameters> complexCondition = (p) => 
{
   return p.SomeFlag && p.XValue > 0 && p.YValue < 0;
};

conditions.Add(simpleCondition);
conditions.Add(complexCondition); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T15:34:26.007

另一种可能性是使用 CodeDom 在运行时动态生成代码，如下所示：

```
public class DynamicIfStatementEvaluator
{
    public bool EvaluateBools()
    {
        // Create a new instance of the C# compiler
        //from http://mattephraim.com/blog/2009/01/02/treating-c-like-a-scripting-language/

        CSharpCodeProvider compiler = new CSharpCodeProvider();

        // Create some parameters for the compiler
        CompilerParameters parms = new CompilerParameters
        {
            GenerateExecutable = false,
            GenerateInMemory = true
        };
        parms.ReferencedAssemblies.Add("System.dll");

        // Try to compile the string into an assembly
        CompilerResults results = compiler.CompileAssemblyFromSource(parms, new string[]
                                {@"using System;

                                    class BoolEvaluator
                                    {
                                        public bool EvalBoolean()
                                        {
                                            return " + InsertBooleanStringHere! + @";
                                        }               
                                    }"});

        if (results.Errors.Count == 0)
        {
            object myClass = results.CompiledAssembly.CreateInstance("BoolEvaluator");
            if (myClass != null)
            {
                object boolReturn = myClass.GetType().
                                         GetMethod("EvalBoolean").
                                         Invoke(myClass, null);
                return Convert.ToBoolean(boolReturn);
            }
        }
        else
        {
            foreach (object error in results.Errors)
            {
                MessageBox.Show(error.ToString());
            }
        }
        return false;
    }        
} 
```

为 using System.CodeDom.Compiler 添加 using 语句；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:29:42.203

你可以，也许，有不同类型的事件，例如`DailyEvent`, `WeeklyEvent`,`MonthlyEVent`等，所有这些都实现了一个给定的接口，该接口有一个名为`CanFire`（或类似的东西）的方法和另一个名为`Execute`.

这将允许您创建各种类型的事件，每个事件都将实现自己的逻辑，决定是否需要触发它。

这将允许您创建一个列表并仅遍历事件，如果`CanFire`产生 true，则调用`Execute`. 这将允许您让每种事件类型都有自己的触发和执行逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T09:30:06.763

那么你可以做这样的事情：

```
public abstract class Condition
{
   public abstract bool ConditionMet(params[] parameters); 
}

public class DateTimeCondition : Condition
{
    public override bool ConditionMet(params[] parameters)
    {
       // check condition against DateTime values available inside parameters
    }
}

public class MoreThen10: Condition
{
    public override bool ConditionMet(params[] parameters)
    {
       // check condition against numeric values more then 10
    }
}

... // and so on 
```

在您可以拥有 somwhere 全局条件集合之后：

```
List<Condition> conditions = new List<Condition>() {new DateTimeCondition(), new MoreThen10Condition(),...}; 
```

当您要检查是否满足所有条件时，可以

```
conditions.All(condition=>condition.ConditionMet(..parameters of if...)); 
```

当然，这只是基本的想法，一个草图，没有可以复制/粘贴的具体实现。

# google-translate - 用谷歌翻译 API 说几句话是个好主意吗？

> ID：12278254
> 
> 赞同：1
> 
> 时间：2012-09-05T09:23:43.373
> 
> 标签：google-translate

我正在为德国客户 atm 制作网站，我想让我的德国同事更轻松，并自动翻译我的 CMS 中的所有文本。我只需要向 API 询问一次翻译，因为我将翻译保存在数据库中。

所以我发现谷歌每 100 万个字符收费 20 美元，但我只需要不时翻译几个单词，每周最多 1000 个。

所以我想知道，如果有任何限制，我需要使用一些最低数量的翻译，或者对于那些没有完全使用 api 的人来说是最低价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:36:57.640

您仍然可以通过[YQL免费使用 Google 翻译](http://developer.yahoo.com/yql/console/?env=store://datatables.org/alltableswithkeys&q=select%20%2a%20from%20google.translate%20where%20q=%22this%20is%20a%20test%22%20and%20target=%22de%22;)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-05T09:40:28.943

我认为它只是从1M开始，无论如何我们不能相信翻译，因为它在可能的情况下会混淆所以请尝试更多测试，否则会破坏行和句子的含义，使用前请三思而后行。

# powershell - 不建议在生产环境中使用 CredSSP

> ID：12278263
> 
> 赞同：1
> 
> 时间：2012-09-05T09:24:39.627
> 
> 标签：powershell, sharepoint-2010, remoting, credentials, production-environment

我尝试使用 PowerShell Remoting 部署 Sharepoint WSP 项目。

请参阅[https://sharepoint.stackexchange.com/questions/44880/powershell-remoting-sharepoint-2010-error](https://sharepoint.stackexchange.com/questions/44880/powershell-remoting-sharepoint-2010-error)

解决方案是为 Sharepoint 配置 CredSSP。

但微软说：

> 警告：凭据安全服务提供程序 (CredSSP) 身份验证，其中用户的凭据被传递到远程计算机进行身份验证，设计用于需要对多个资源进行身份验证的命令，例如访问远程网络共享。这种机制增加了远程操作的安全风险。如果远程计算机受到威胁，则传递给它的凭据可用于控制网络会话。

参考：[http ://technet.microsoft.com/en-us/library/dd347668.aspx](http://technet.microsoft.com/en-us/library/dd347668.aspx)

不建议在生产环境中使用。

关于使用 powershell 远程处理和 sharepoint 进行部署的任何建议？

**Windows XP 更新**

问题是 Windows XP SP3 中的 WinRM 2.0 不支持用于 PowerShell 的 CredSSP。

Powershell 2.0 - WinRM 2.0 + Windows XP SP3 + CredSSP + 为 Sharepoint 2010 部署 PS Remoting 不可能

[http://social.technet.microsoft.com/Forums/is/winserverpowershell/thread/d86d7815-2d3a-43ae-95bd-5f4ebad3f263](http://social.technet.microsoft.com/Forums/is/winserverpowershell/thread/d86d7815-2d3a-43ae-95bd-5f4ebad3f263)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:39:36.190

他们不推荐这样做，因为如果第二个跃点受到威胁，则该远程处理链中的所有系统都存在受到威胁的风险。但是，如果您在安全的数据中心类型环境中执行此操作，我认为没有任何风险。

但是，如果您仍然需要更好的安全性，我建议您使用 SSL 端点。

# wix - 如何在 WiX 自定义对话框中默认显示用户凭据

> ID：12278265
> 
> 赞同：0
> 
> 时间：2012-09-05T09:24:41.033
> 
> 标签：wix

我有一个接受用户凭据和密码的自定义对话框：

```
<Control Id="DomainNameLabel" Type="Text" X="20" Y="120" Width="50" Height="30" NoPrefix="yes" Text="Domain" />
<Control Id="DomainNameInput" Type="Edit" X="80" Y="120" Width="250" Height="18" Property="USERDOMAIN" Indirect="no" />

<Control Id="UserNameLabel" Type="Text" X="20" Y="140" Width="50" Height="30" NoPrefix="yes" Text="User" />
<Control Id="UserNameInput" Type="Edit" X="80" Y="140" Width="250" Height="18" Property="USERNAME" Indirect="no" />

<Control Id="PasswordLabel" Type="Text" X="20" Y="160" Width="50" Height="30" NoPrefix="yes" Text="Password" />
<Control Id="PasswordInput" Type="Edit" X="80" Y="160" Width="250" Height="18" Property="USERPASSWORD" Indirect="no" />

<Control Id="I360ServerName1" Type="Text" X="20" Y="180" Width="50" Height="30" NoPrefix="yes" Text="I360 Server1 Name" />
<Control Id="I360ServerName1Input" Type="Edit" X="80" Y="180" Width="250" Height="18" Property="I360SERVER1" Indirect="no" />

<Property Id="USERNAME" Value=" " />
<Property Id="USERDOMAIN" Value=" " />
<Property Id="USERPASSWORD" Value=" " /> 
```

我想在对话框中按默认值显示当前用户名和域。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:44:50.557

我知道使用它可以获得我当前的用户名：

```
 <Property Id="USERNAME" Secure="yes"/> 
```

像你一样在你的控件中使用它，它应该显示正确的用户名，为我工作。不确定域，不使用它，但它可能是相同的..:)

# c++ - C ++中的包含编译模型

> ID：12278266
> 
> 赞同：0
> 
> 时间：2012-09-05T09:24:41.780
> 
> 标签：c++, include

```
/*--------------------utilities.h-------------------------------------*/

#ifndef UTILITIES_H
#define UTILITIES_H

template<class T> int compare(const T&,const T&);

#include<utilities.cpp>
#endif

/*--------------------utilities.cpp-------------------------------------*/

template<class T> int compare(const T &v1 , const T &v2)
{
    if (v1 < v2) return -1;
    if (v2 < v1) return 1;
    return 0;
}

/*--------------------main.cpp------------------------------------------*/

#include<iostream>
#include<utilities.h>
using namespace std;

int main(int argc , char *argv[])
{
    cout << compare(1,2) << endl;

    return 0;
} 
```

上面的代码是书中的一个例子。但是，当我编译三个文件时它会出错：

```
utilities.h:6:24: fatal error: utilities.cpp: No such file or directory
compilation terminated.
main.cpp:2:22: fatal error: utilities.h: No such file or directory
compilation terminated. 
```

我不知道为什么我得到“没有这样的文件或目录”！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:34:39.633

### 问题 1

当你写：

```
#include <utilities.h> 
```

编译器`utilities.h`在它的默认包含路径中查找或明确指定的路径（例如在 g++ 中带有`-I`）。

你可以写：

```
#include "utilities.h" 
```

使其首先查看相对于源文件的路径。

### 问题 2

您已包含`utilities.cpp`在头文件中（也存在与上述相同的问题）。不建议这样做，但并非完全错误。但是，在这种情况下，该文件的内容已经被编译并包含`main.o`在`main.cpp`.

编写模板的推荐方法是在头文件中写入所有内容（我知道，这不太好）：

```
/*--------------------utilities.h-------------------------------------*/

#ifndef UTILITIES_H
#define UTILITIES_H

template<class T>
static inline int compare(const T &v1, const T &v2);
{
    if (v1 < v2) return -1;
    if (v2 < v1) return 1;
    return 0;
}

#endif

/*--------------------main.cpp------------------------------------------*/

#include <iostream>
#include "utilities.h"

using namespace std;

int main(int argc , char *argv[])
{
    cout << compare(1,2) << endl;

    return 0;
} 
```

您只需编译`main.cpp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:30:53.757

这本书不是给你一个文件的内容，而是给你几个文件的内容。当清单说

```
/*--------------------utilities.cpp-------------------------------------*/ 
```

作者的意思是“将以下代码放入文件 `utilities.cpp”。看起来你还没有那个文件。这样做，它将全部编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:33:50.243

改变

```
#include<utilities.cpp> 
```

到

```
#include "utilities.cpp" 
```

和

```
#include<utilities.h> 
```

到

```
#include "utilities.h" 
```

包含`<>`用于“系统”标头。我还建议您重命名`utilities.cpp`为`utilities.ipp`, 以区分包含的源文件和直接编译的源文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T09:34:27.273

不管它是否在书中，代码中都有错误。它应该是

```
#include "utilities.cpp" 
```

和

```
#include "utilities.h" 
```

通常，当你使用包含的`<...>`形式时，编译器不会在当前目录中查找文件。`/I.`（您通常可以使用类似or的选项告诉它这样做`-I.`，但最好使用正确的 include 形式。）

# ruby - 调试涉及服务器发送事件的 Cramp 应用程序

> ID：12278267
> 
> 赞同：1
> 
> 时间：2012-09-05T09:24:44.870
> 
> 标签：ruby, server-sent-events, cramp

我使用 Cramp ( [http://cramp.in](http://cramp.in) ) 在我的应用程序中实现服务器发送的事件。我使用 Thin 作为运行应用程序的服务器。在 Rails 中，我可以使用调试器 gem 来调试我的 rails 应用程序。调试器可以是也用于调试抽筋应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:49:25.267

通过使用 ruby​​-debug19 的 Gemfile 中的调试器 gem 解决

# c++ - 共享库仅绑定到不处理的库

> ID：12278269
> 
> 赞同：1
> 
> 时间：2012-09-05T09:24:56.540
> 
> 标签：c++

我对共享库有以下问题

创建共享库

```
class A
{
  static int callCount;
  A() { callCount++; }
}
int A:callCount = 0;
class Main
{
  Main()
  {
    A a1();
    A a2();
  }
} 
```

现在创建一个进程加载这个共享库更多次，我希望 callCount 只属于共享库而不属于整个进程

```
dlopen("shared.so", RTLD_LAZY);
// after some code i can construct Main() 
// and now i will open the shared object again
dlopen("shared.so", RTLD_LAZY);
// now if i construct Main from the new library i want to have a new 
// initialized callCount eq 0 but its 2 
```

我怎么解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:41:38.820

运行时加载库的加载，尤其是*重新加载*语义是平台和实现特定的。最好不要依赖任何类型的全局状态，而是将显式初始化函数传递给您的库。也许像这样：

```
library_context_t context;

/* dlopen, dlsym, ... */

library_init(&context);

library_do_thing(&context);

// ...

library_destroy(&context);

// maybe unload, or reuse 
```

特别是 Linux*不会*重新加载已经加载的库。

# c - 检测 char 数组中有多少行

> ID：12278271
> 
> 赞同：-3
> 
> 时间：2012-09-05T09:24:59.467
> 
> 标签：c, strtok

```
char linesinfo[] = "Place\n Some\n Text\n Here";

char pch = strtok(linesinfo,"\n");

int total_line = 0;
while(pch  != NULL)
{

     pch = strtok(NULL,"\n");
     total_line++;
} 
```

问题：我必须使用 total_line-1 还是只使用 total_line？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:33:28.413

无需为此使用`strtok()`，它会*修改*您尝试解决的问题不需要的字符串，通常是危险和糟糕的。

只需循环并直接计算换行符：

```
int total_line = 0;
const char *str;
for(str = linesinfo; *str; ++str)
  total_line += *str == '\n'; 
```

这是可行的，因为 C 的比较运算符总是为 false 生成 0，为 true 生成 1。这与 eg`if`将*任何*非零值解释为真实的事实不同，并且是一个非常有用的功能。

当然，上面的内容可以通过多种方式重写，使其更简洁，例如：

```
 if( *str == '\n' )
    ++total_line; 
```

这可能会或可能不会更快，具体取决于您的具体情况。有时，如果编译器为其生成无分支代码，原始代码可能会更快，我想这对于显式`if`.

# javascript - 如果时钟有一位，则添加“0”

> ID：12278272
> 
> 赞同：31
> 
> 时间：2012-09-05T09:25:05.883
> 
> 标签：javascript, clock

我有一些时钟脚本。一切都很好，它工作得很好，但是......我有一个问题。如果时钟设置为一位数字小时或分钟，如 1:5 时钟，则之前不添加“0”数字。这是我所做的，但它不起作用。你能帮我吗，谢谢？

```
window.setInterval(function update_clock() {
    var currentTime = new Date();
    var currentHours = currentTime.getHours();
    var currentMinutes = currentTime.getMinutes();
    $.ajax({
        success: function (clock) {
            document.getElementById("hour").firstChild.nodeValue = currentHours;
            document.getElementById("minutes").firstChild.nodeValue = currentMinutes;
            if (currentMinutes.length == 1) {
                currentMinutes = "0" + currentMinutes;
            }
        }
    });
}, 999); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-05T09:39:04.187

您可以使用它`.slice`来提取字符串的一部分。向它传递一个负数，以便从字符串的末尾进行切片。

因此，以下是可能的，并且非常简单：

```
('0'+currentMinutes).slice(-2) 
```

连接 with`'0'`确保操作的目标始终是一个字符串。`('0'+currentMinutes)`将产生一个 2 或 3 个字母的字符串（例如“07”或“017”）。从该字符串中删除最后两个字符将为您提供一个 0 填充的两位数。

请注意，如果`currentMinutes`is ，上面将产生“00” `100`，因此它假设您知道您将使用的值。

这可以提取为更可重用的东西：

```
Number.prototype.zeroPad = function() {
   return ('0'+this).slice(-2);
}; 
```

这将允许你写：

```
currentMinutes.zeroPad(); 
```

您还可以设置填充变量的长度：

```
Number.prototype.zeroPad = function(length) {
   length = length || 2; // defaults to 2 if no parameter is passed
   return (new Array(length).join('0')+this).slice(length*-1);
}; 
```

可以称为：

```
currentMinutes.zeroPad(); // e.g. "07" or "17"
currentMinutes.zeroPad(3); // e.g. "007" or "017" 
```

请注意，虽然`currentMinutes.zeroPad()`会起作用，`7.zeroPad()`但不会。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-05T09:28:29.050

`currentMinutes`是一个数字，所以它没有`length`属性。此外，您必须检查`length`之前设置`currentMinutes`的`minutes`元素。

就像是：

```
var currentHours = currentTime.getHours();
var currentMinutes = currentTime.getMinutes();

$.ajax({
    success: function (clock) {
        if (currentMinutes.toString().length == 1) {
            currentMinutes = "0" + currentMinutes;
        }

        document.getElementById("hour").firstChild.nodeValue = currentHours;
        document.getElementById("minutes").firstChild.nodeValue = currentMinutes;
    }
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-05T09:26:46.117

`currentMinutes`不会有`length`属性，因为它是 a `Number`，而不是 a `String`。

你可以强迫它成为一个`String`.

```
if ((currentMinutes+'').length == 1) {
     currentMinutes = "0" + currentMinutes;
} 
```

**但是**，因为你有一个`Number`，你应该让你的条件......

```
if (currentMinutes < 10) {
     currentMinutes = "0" + currentMinutes;
} 
```

如果你特别疯狂，你可以做...

```
var hoursMinutes = ((new Date)+"").match(/\d+:\d+(?=:)/)[0].split(":"); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-07-19T10:17:53.503

尝试使用该`padStart()`方法。基于 MDN 文档，该`padStart()`方法不断用另一个字符串填充字符串，直到达到所需的长度。[链接](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)到 padStart() 上的 MDN 文档。

如果您想将字符串格式化为具有前导零的 4 位数字（如果可用的数字少于 4 位）。该`padStart()`方法可以拯救如下：

```
let str = "34"

str = str.padStart(4, "0") // results in "0034"
console.log(str)
```

日期案例的示例：

```
var now = new Date(); 
var year= now.getFullYear(); 
var month= (now.getMonth()+1).toString().padStart(2, "0");
var day= now.getDate().toString().padStart(2, "0");
var hour = now.getHours().toString().padStart(2, "0");
var minute = now.getMinutes().toString().padStart(2, "0");

document.getElementById("date").innerHTML =`${day}-${month}-${year}-${hour}:${minute}`; 
```

```
<div id="date"></div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T09:28:33.587

您还可以检查[sprintf()](http://www.diveintojavascript.com/projects/javascript-sprintf)的 javascript。

您可以使用以下简单的方法：

```
sprintf("%02d:%02d", currentHours, currentMinutes); 
```

使用接受格式化的函数可以让您在需要时更好地控制输出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-02T14:10:00.683

在安卓中（内置）

```
String time=String.format("%02d:%02d",hourOfDay,minute); 
```

在 javascript 中使用 (sprintf.js)

```
int i = 1;
string s = sprintf("%02d", i);
document.write(s); // Prints "01" 
```

sprintf.js： [http ://www.diveintojavascript.com/projects/javascript-sprintf](http://www.diveintojavascript.com/projects/javascript-sprintf)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-27T12:37:31.343

基于其他 awnsers，我创建了这行代码：

```
var now = new Date(); 
var dd = now.getDate(); 
var mm = now.getMonth()+1;
var y = now.getFullYear(); 
var h = now.getHours();
var m = now.getMinutes();

function aZero(n) {
  return n.toString().length == 1 ?  n = '0' + n: n;
}

document.getElementById("out").innerHTML =
  aZero(dd) + "-" +
            aZero(mm) + "-" +
            y +  "   -  "   +
            aZero(h)  + ":" +
            aZero(m);
```

```
<div id="out">my time :D</div>
```

铜下次。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-17T00:48:58.117

尝试使用`('0' + currentTime.getHours()).slice(-2)`

更新了您的问题 -

```
window.setInterval(function update_clock() {
    var currentTime = new Date();
    var currentHours = ('0' + currentTime.getHours()).slice(-2);
    var currentMinutes = ('0' + currentTime.getMinutes()).slice(-2);
    $.ajax({
        success: function (clock) {
            document.getElementById("hour").firstChild.nodeValue = currentHours;
            document.getElementById("minutes").firstChild.nodeValue = currentMinutes;
            if (currentMinutes.length == 1) {
                currentMinutes = "0" + currentMinutes;
            }
        }
    });
}, 999); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-24T09:44:43.150

你可以根据长度来做。

我的解决方案是

```
 var mnt = '' + (seconds / 60).toFixed();
  if (mnt.length == 1) mnt = '0' + mnt;
  var sec = '' + (seconds % 60).toFixed();
  if (sec.length == 1) sec = '0' + sec;
  return `${mnt}:${sec}`; 
```

# sql-server - 将表的空白转换为 NULL

> ID：12278278
> 
> 赞同：0
> 
> 时间：2012-09-05T09:25:28.413
> 
> 标签：sql-server, sql-server-2008

在我的表中，我有几列具有空白值。任何人都可以建议我一个查询，通过它我可以将给定表的所有空白替换为 NULL 吗？

**编辑**

如果我无法正确指定我的问题，我很抱歉，我不想在我的查询中给出列名。我只有表名。因此，对于给定的表，我想检查所有列并将它们的空白值转换为 NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:49:18.193

作为一种方法，下一个存储过程可能会有所帮助：

```
 CREATE PROCEDURE up_replaceBlanksByNulls
    @schemaName nvarchar(50),
    @tableName nvarchar(100)
AS
declare @query1 nvarchar(max) = ''

 select @query1 = @query1 + 'UPDATE ' + @schemaName + '.' + @tableName + ' SET ' + c.COLUMN_NAME + ' = NULL WHERE ' +
  c.COLUMN_NAME + ' = '''';' FROM INFORMATION_SCHEMA.COLUMNS c
  WHERE C.TABLE_NAME = @tableName  
  EXECUTE sp_executesql @query1
GO 
```

用法：

```
up_replaceBlanksByNulls 'dbo', 'myTable' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:28:17.390

要摆脱表中的所有空白值：

```
CREATE PROCEDURE getRidOfBlanks 
    @tableName nvarchar(50)
    AS
    DECLARE @colName varchar(50)
    DECLARE Table_Cursor CURSOR FOR
    select COLUMN_NAME
    from INFORMATION_SCHEMA.COLUMNS
    where TABLE_NAME='@tableName'
    OPEN Table_Cursor;
    FETCH NEXT FROM Table_Cursor INTO @colName
    WHILE @@FETCH_STATUS = 0
       BEGIN
          UPDATE @tableName SET @colName = NULL WHERE @colName = '';
          FETCH NEXT FROM Table_Cursor INTO @colName
       END;
    CLOSE Table_Cursor;
    DEALLOCATE Table_Cursor;
    GO 
```

要使用它，您可以使用我的代码创建您的过程，然后使用您的 tableName 执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:26:41.370

像这样简单地使用`UPDATE`：

```
UPDATE myTable SET myColumn = NULL WHERE myColumn = ''; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-16T15:54:53.220

如果您的列名中有空格，这是@alex.b 过程的更改。

```
CREATE PROCEDURE up_replaceBlanksByNulls
    @schemaName nvarchar(50),
    @tableName nvarchar(100)
AS
declare @query1 nvarchar(max) = ''

 select @query1 = @query1 + 'UPDATE ' + @schemaName + '.' + @tableName + ' SET ' + case when c.COLUMN_NAME like '% %' then '[' + c.COLUMN_NAME + ']' Else c.COLUMN_NAME end + ' = NULL WHERE ' +
  case when c.COLUMN_NAME like '% %'  then '[' + c.COLUMN_NAME + ']' Else c.COLUMN_NAME end + ' = '''';' FROM INFORMATION_SCHEMA.COLUMNS c
  WHERE C.TABLE_NAME = @tableName  
  print @query1
  EXECUTE sp_executesql @query1
GO 
```

# android - 如何从应用程序循环/重复Android中的当前铃声？

> ID：12278279
> 
> 赞同：13
> 
> 时间：2012-09-05T09:25:28.503
> 
> 标签：android

我正在 android 4.0 上编写一个应用程序，当我按下按钮时它将播放当前铃声。

但在铃声中只播放一次。我需要它重复几次。

我当前的代码：

```
Uri notifi = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
final Ringtone r = RingtoneManager.getRingtone(c, notifi);
r.play(); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T12:13:08.250

试试这个代码，我以前用过这个代码，可以连续播放铃声，直到你停止

```
try {
   Uri alert =  RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
  mMediaPlayer = new MediaPlayer();
  mMediaPlayer.setDataSource(this, alert);
  final AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
 if (audioManager.getStreamVolume(AudioManager.STREAM_RING) != 0) {
 mMediaPlayer.setAudioStreamType(AudioManager.STREAM_RING);
 mMediaPlayer.setLooping(true);
 mMediaPlayer.prepare();
 mMediaPlayer.start();
}
} catch(Exception e) {
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-17T21:54:21.803

在棒棒糖上尝试了上述代码，只有这对我有用

```
 //activating looping ringtone sound
    Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
    player = MediaPlayer.create(this, notification);
    player.setLooping(true);
    player.start(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-22T19:02:54.583

您可以让计时器定期检查铃声是否仍在播放。例如，每秒：

```
mRingtone.play();
mTimer = new Timer();
mTimer.scheduleAtFixedRate(new TimerTask() {
    public void run() {
        if (!mRingtone.isPlaying()) {
            mRingtone.play();
        }
    }
}, 1000*1, 1000*1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T09:36:40.380

我读过铃声必须有`ANDROID_LOOP`标签。参考：[`http://xanderx.com/2010/08/25/making-ringtones-loop-on-android/`](http://xanderx.com/2010/08/25/making-ringtones-loop-on-android/)

您也可以尝试使用播放此文件`AudioManager`并将其设置为循环播放。参考：[`http://developer.android.com/reference/android/media/MediaPlayer.html#setLooping(boolean)`](http://developer.android.com/reference/android/media/MediaPlayer.html#setLooping%28boolean%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-10T10:49:46.483

我通过使用铃声和铃声管理器设置循环为真来解决这个问题。

```
 Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);

 Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
 r.setLooping(true);
 r.play(); 
```

我在这里开始铃声，当我们想停止铃声时，我们可以打电话

r.stop();

停止铃声的方法

# java - 使用 spring 部署到 Tomcat 的简单应用程序

> ID：12278283
> 
> 赞同：0
> 
> 时间：2012-09-05T09:25:38.263
> 
> 标签：java, spring, tomcat, jmx

我有一个简单的带有 spring 的独立应用程序（主类 + bean 类）。它创建 MBean (JMX)。

它只是启动了我的 bean。

主类：

```
public class Main {
public static void main(final String[] args) {
    ApplicationContext ac = new ClassPathXmlApplicationContext("cont.xml");
    try {
        Thread.sleep(1000 * 60 * 5);
    } catch (final Throwable t) {}
} 
```

}

豆

```
public class Test {
private String val = "";
public String getVal() {
    return val;
}
public void setVal(String v) {
    val = v;
} 
```

续.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd"
    default-lazy-init="true">
    <bean id="test" class="test.Test" />
    <bean class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true" />
    </bean>
    <bean class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.MethodNameBasedMBeanInfoAssembler"            >
                <property name="managedMethods">
                    <list>
                        <value>getVal</value>
                        <value>setVal</value>
                    </list>
                </property>
            </bean>
        </property>
        <property name="beans">
            <map>
                <entry key="bean:name=Test" value-ref="test"/>
            </map>
        </property>
    </bean>
</beans> 
```

如何在 tomcat 上运行相同的示例？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:29:45.723

利用

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:cont.xml</param-value>
</context-param>

<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

在你的`web.xml`. 这将实例化所有配置在`cont.xml`.

# algorithm - 避免某些点的矩形网格中的单调路径数

> ID：12278288
> 
> 赞同：2
> 
> 时间：2012-09-05T09:25:45.387
> 
> 标签：algorithm

在大小为 m*n 的矩形网格中，从 (0,0) 到 (m,n) 的路径数（没有回溯）是 (m+n)!/(m!*n!)。现在，如果网格中有我们想要避开的某些点，我们如何计算避开这些点的路径数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:49:39.223

定义解的（递归）方程如​​下：

*   从 (m,n) 到 (m,n) 的单调路径数为 1
*   从任何禁止点到 (m,n) 的单调路径数为 0，与第一个坐标大于 m 或第二个大于 n 的点相同。
*   从任何其他点 (x,y) 到 (m,n) 的单调路径数是以下各项的总和：
    *   从 (x+1,y) 到 (m,n) 的路径数和
    *   从 (x,y+1) 到 (m,n) 的路径数（参见上文处理使我们脱离网格的增量）

显然，正如 Qnan 所说，您需要使用动态编程（即记住部分解决方案以避免指数时间）来解决这些问题（0,0）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:36:33.080

我认为对于完全`k`被阻塞的网格没有合理的分析解决方案，但是可以使用动态编程算法计算路径。

解析解很麻烦，因为阻塞路径的数量不仅取决于阻塞节点的数量和每个节点的位置，还取决于它们的相对位置。例如，在 4x4 网格中，这两种配置给出了非常不同的结果：

```
....      ....
..x.      .xx.
.x..      ....
....      .... 
```

很容易看出，前者只允许两条单调路径，而后者至少有 5 条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T15:20:58.687

这里一个自然的问题是要问：对于任何给定的 k，避免 k 个点的集合 S 的单调路径的最大数量是多少（其中最大值是所有可能的集合 S）？

这实际上是 Johnson、Leader 和 Russell 的一篇论文中提出的一个开放问题：http: [//arxiv.org/pdf/1309.4643.pdf](http://arxiv.org/pdf/1309.4643.pdf)

# java - Apache Karaf 捆绑上下文侦听器

> ID：12278290
> 
> 赞同：0
> 
> 时间：2012-09-05T09:25:52.327
> 
> 标签：java, spring, osgi, apache-karaf

在 Web 应用程序中，我们有`ServletContextListener`接口，它有方法：`contextInitialized`并且在应用程序启动时被调用。我想知道在`Apache Karaf`捆绑`OSGi`启动时容器会调用某些方法以及捆绑停止时容器会调用某些停止方法时是否有类似的东西。里面有这样的东西`Apache Karaf`吗？

我也在`Spring`我的捆绑包中使用，所以也许可以通过某种方式使用`Spring`？我试图搜索如何使用它的信息`OSGi`，`Apache Karaf`但没有找到任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:54:36.077

我认为您正在寻找[BundleActivator](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleActivator.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:53:24.613

由于您提到使用 Spring，您不妨使用 Spring-DM 或 Blueprint。有了这个，你不需要捆绑激活器。如果你想将 Spring 与 Spring-DM 一起使用，你只需要安装 spring-dm 功能。例如，只需在您的 Karaf 控制台中键入 features:install spring-dm。有了它，您将安装 Spring-DM，它将拾取放置在您的捆绑包的 META-INF/spring 下的所有 Spring 配置。通过切换到蓝图也可以实现同样的目的。在这种情况下，您只需将 blueprint.xml 文件放在 OSGI-INF/blueprint 下。

# html - 带有图像的 CSS 固定侧边菜单，换行

> ID：12278291
> 
> 赞同：0
> 
> 时间：2012-09-05T09:25:54.870
> 
> 标签：html, css

我`SIDEmenu`在我的页面上固定了一个位置。它包含 100 个小图像。每个图像为 10 像素 x 10 像素。

如何使图像垂直换行？

我的意思是如果浏览器高度为 500，那么它将以 2 列显示图像，如果浏览器屏幕高度为 250，则 4 列......就像垂直自动换行一样。

这可能使用 HTML 和 CSS 吗？

补充：=左边是固定的菜单栏，有100个小图。我试图让它在 iphone 和电脑上工作。图片用于浏览网站，因此每张图片都很重要。在 iphone 上，底部的图像被剪掉了，所以我想把它们包装起来。所以基本上我需要在较小的屏幕上使菜单更宽以适合所有菜单图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:05:29.243

一种选择是使用 css3 的媒体查询：

```
@media (min-height:500px) and (max-height:1000px){
  #sidebar { width:20px; }
} 
```

[这](http://jsbin.com/izihod/1/edit)是我制作的一个基本示例，您可以通过调整浏览器大小来尝试（当然，如果它支持 css3 媒体查询）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:30:29.913

如果你浮动：离开你的图像，并且侧边栏是一个 div，高度以 % 为单位，图像将简单地根据大小浮动。我会试着举一个例子。

例如这里：http: [//jsbin.com/isiquw/1/](http://jsbin.com/isiquw/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:33:43.810

在你的 SIDEmenu 中试试这个 CSS 属性，

```
.sidemenu {
         width:25%;
         height:auto;
         float:left;
} 
```

记住，在这个 DIV 结束后使用一个 clear:both

# extjs - 在下一个按钮上设置自动对焦

> ID：12278292
> 
> 赞同：2
> 
> 时间：2012-09-05T09:26:01.810
> 
> 标签：extjs, extjs4, extjs4.1

我在 extjs 中有向导，我在其中放置下一个、返回和取消按钮。根据要求，我需要自动将焦点设置在下一个按钮上。怎么做。

```
buildButtons : function() {
    return [
    {
        text:'Back',
        id:'backBtn',
        hidden:true,
        autoHeight:true,
        action: 'Back'
    },
    {
        text:'Next',
        id:'nextBtn',
        autoHeight:true,
        hidden:false,
        action: 'Next'
    },
    {
        text:'Finish',
        id:'finishBtn',
        autoHeight:true,
        hidden:false,  // Comments below line if you want finished button on each panel.
        //hidden:true,
        action: 'Finish'
    },
    {
        text:'Cancel',
        id:'cancelBtn',
        autoHeight:true,
        hidden:false,
        action: 'Cancel'
    }
    ];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T09:44:16.017

假设您正在谈论最新版本（4.1.1）

获取按钮引用和调用[焦点](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.button.Button)

您应该使用按钮本身或持有该按钮的组件的 afterrender 事件来执行此操作。

***可以直接在 API 代码框之一中执行的示例***

```
Ext.create('Ext.Container', {
    renderTo: Ext.getBody(),
    defaults: {
        xtype: 'button'   
    },
    items   : [
        {
            text: 'Next',
            action: 'next'
        },
        {
            text: 'Prev',
            action: 'prev'
        },
        {
            text: 'Cancel',
            action: 'cancel'
        }
    ],
    listeners: {
        afterrender: function(b) {
            b.down('button[action=next]').focus(false, 100);  
        }
    }
}); 
```

编辑以回答评论：

根据给定的信息，我建议您使用[按钮](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-buttons)配置属性来放置按钮。在您的情况下，我建议您使用 dockedItems 数组而不是便捷按钮数组。尝试以下操作：

```
dockedItems: [{
    xtype: 'toolbar',
    dock: 'bottom',
    ui: 'footer',
    defaults: {minWidth: minButtonWidth},
    items: [
        {
            text:'Back',
            id:'backBtn',
            hidden:true,
            autoHeight:true,
            action: 'Back'
        },
        {
            text:'Next',
            id:'nextBtn',
            autoHeight:true,
            hidden:false,
            action: 'Next'
        },
        {
            text:'Finish',
            id:'finishBtn',
            autoHeight:true,
            hidden:false,  // Comments below line if you want finished button on each panel.
            //hidden:true,
            action: 'Finish'
        },
        {
            text:'Cancel',
            id:'cancelBtn',
            autoHeight:true,
            hidden:false,
            action: 'Cancel'
        }
    ],
    listeners: {
        afterrender: function(b) {
            b.down('button[action=Next]').focus(false, 100);  
        }
    }
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:50:30.900

是的，正如@sra 所说，使用类似的东西：

```
Ext.getCmp('IdOfNextButton').focus(); 
```

或者更好地从您的表单中使用一种 up/down 方法通过特定的类而不是依赖于 Id 来查找它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-20T14:19:22.697

如果可以使用，更好的方法是使用 Ext.window.Window 的 defaultFocus 配置。从[文档](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.window.Window-cfg-defaultFocus)：

> defaultFocus : 字符串/数字/Ext.Component
> 
> 指定一个 Component 在此 Window 获得焦点时接收焦点。
> 
> 这可能是以下之一：
> 
> *   页脚按钮的索引。
> *   后代组件的 id 或 Ext.AbstractComponent.itemId。
> *   一个组件。
> 
> 可用时间：4.0.0

# jquery - jQuery 使用 fullcalendar 插件获取下个月的数据

> ID：12278295
> 
> 赞同：2
> 
> 时间：2012-09-05T09:26:26.633
> 
> 标签：jquery, fullcalendar

我正在使用 jQuery fullcalendar 插件。

如何获取下个月的数据，即通过单击“下一个”按钮传递数据

```
$('#calendar').fullCalendar({
    events:"automapic_admin.php?current_date='+currentdate,
    eventRender: function(event, element) {
        $('.fc-event-title', element).html(event.title);
    }
}); 
```

实际上，我正在使用点击事件来调用下一个按钮。

```
$(".fc-button-next span").live("click", function(){ }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T10:39:48.493

单击“下一个”和“上一个”按钮时，将调用[事件](http://arshaw.com/fullcalendar/docs/event_data/events_function/)函数。这是一个加载当前年份和月份数据的示例。

```
$(document).ready(function () {
    loadCal();
});

function loadCal() {

    var current_url = '';
    var new_url     = '';

    $('#calendar').fullCalendar({

        // other options here...

        events: function( start, end, callback ) {

            var year  = end.getFullYear();
            var month = end.getMonth();

            new_url  = '/api/user/events/list/' + id + '/year/' + year + '/month/' + month;

            if( new_url != current_url ){

                $.ajax({
                    url: new_url,
                    dataType: 'json',
                    type: 'POST',
                    success: function( response ) {

                        current_url = new_url;
                        user_events = response;

                        callback(response);
                    }
                })
           }else{
               callback(user_events);
           }
        }
    })
} 
```

在查询中检索结果时，请确保至少包含上个月的最后 10 天和下个月的前 10 天。这是 PHP 中的一个示例：

```
if( $month === null ){
    $month = '01';
}

$startDate     = $year . '-' .  $month . '-01';
$startDateTime = new \DateTime( $startDate );
$startDateTime->modify( '-10 days' );
$startDate     = $startDateTime->format( 'Y-m-d H:i:s' ); 
```

我决定按时而不是按月拉出全年的所有事件以减少请求，因为事件的数量很少。如果每个用户有大量事件，那么按月拉取它们更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T22:17:22.087

上面的答案让我半途而废，但我最终得到了我认为稍微简单的内容，并且还针对最新的 FullCalendar 进行了更新。

```
 $(document).ready(function() {
        var d = new Date();

        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            fixedWeekCount: true, 
            defaultDate: d,
            editable: true,
            eventLimit: false,
            events: function(start, end, timezone, callback) {
                var eventsUrl = '/events/' + end.year() + '/' + parseInt(end.month());
                $.ajax({
                    url: eventsUrl,
                    type: 'GET'
                }).done(function(response) {
                    callback(response);
                }).fail(function(response, status, error) {
                    alert(status + ': ' + error);
                });
            },
            loading: function(isLoading) {
                if (isLoading) {
                    $('#loading').show();
                } else {
                    $('#loading').hide();
                }
            }
        });
    }); 
```

'/events/' URL 包括年份和月份（例如，'/events/2015/2'）以获取特定月份的事件。当日历第一次加载时，它默认为当前日期，并且方便地在第一次加载时传递给日历的 end 参数与 start 相同，因此它既可以在第一次加载时使用，也可以在上一个和下一个按钮时使用被点击。

无论如何，这对我来说效果很好，所以我想我会分享，因为它与我今天在工作时发现的任何其他示例都有点不同。

# git - Git-TF 中的奇怪错误

> ID：12278296
> 
> 赞同：2
> 
> 时间：2012-09-05T09:26:27.203
> 
> 标签：git, version-control, tfs, git-tf

我正在尝试将更改从 Git 拉入 TFS。收到此错误：

```
git-tf: User config file C:\Users\Administrator.gitconfig invalid   
org.eclipse.jgit.errors.ConfigInvalidException: Cannot read file
C:\Users\Administrator.gitconfig 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:32:35.190

与[此讨论](http://gittf.codeplex.com/discussions/393895)类似，它可能与编码问题有关：

> 问题出在配置文件编码中。
> 正确的一个是 ANSI & EOL = Unix

# ios - 如何在 iOS 中处理未读推送通知？

> ID：12278299
> 
> 赞同：5
> 
> 时间：2012-09-05T09:26:36.337
> 
> 标签：ios, apple-push-notifications

我有一个注册到 APNS 服务以接收通知的 iOS 5.1 应用程序。注册成功，我正确收到通知。当我尝试处理通知时，问题就来了。

应用程序运行后，`didReceiveRemoteNotification`AppDelegate 中的方法会被正确调用，因此通知会按预期处理。但是，这仅在应用程序在前台运行时发生。

但是，当应用程序在后台运行或只是停止时，不会调用该方法。我读过您应该在方法方法中添加一些行以从字典`didFinishLaunchingWithOptions`中获取通知并进行处理。`userInfo`这工作得很好，但只有在通过单击通知中心的通知打开应用程序时。这意味着，如果您通过单击应用程序的标记打开应用程序，或者如果您在后台运行它只是通过更改上下文来打开应用程序，应用程序永远不会意识到收到了通知。此外，如果收到多个通知，我们可以通过单击通知中心一次只能处理其中一个，这很痛苦:-)

有什么方法可以在通知中心读取待处理的通知吗？我知道有一种方法可以使用该方法刷新它们，`cancelAllLocalNotifications`但我还没有找到一种方法来读取它们。我真的需要处理所有这些。我想实现与第三方通知服务器的通信协议，以便在应用程序进入前台时再次检索信息，但由于信息已经在操作系统中，如果无法以某种方式访问​​它，我会觉得很奇怪。

那么，有人知道怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:37:16.050

当推送通知到达并且用户单击“取消”时，您的应用无法再次读取该推送通知。您必须实现一个单独的功能（很可能在服务器端）来获取发送到此设备的通知列表。

例如，如果您的应用程序中提供了聊天功能，并且您通过推送通知发送聊天消息，那么您还应该将聊天消息保留在服务器上。如果用户在任何推送通知上单击“取消”，则该聊天消息将不会显示在 iOS 设备上。在这种情况下，当应用程序稍后进入前台时，您会调用服务器并获取所有过去的聊天消息（通过推送通知发送）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T09:41:17.360

好的，所以一个可能的解决方案是使用另一个数据库表，其中包含带有“已读”标志和 messageID 字段的消息？默认情况下，哪个读取标志为 NO，那么当应用程序成功读取并显示时，它会将标志更新为 YES？

并且只有 256 个字节可以使用，需要什么样的 ID 字段长度？

编辑，

执行此计划并成功运行。

# controller - Controller::handleAction()、Controller::handleRequest()、Controller::allowed_actions 和 Controller::url_handlers 之间的区别

> ID：12278303
> 
> 赞同：2
> 
> 时间：2012-09-05T09:26:43.560
> 
> 标签：controller, silverstripe

在 Silverstripe 中，至少有四种方法可以将 Controller 引导到正确的操作：

1.  `Controller::handleAction()`
2.  `Controller::handleRequest()`
3.  `Controller::allowed_actions`
4.  `Controller::url_handlers`

我理解`Controller::allowed_actions`and的概念`Controller::handleAction()`：我可以使用它们来定义要执行的操作。然后`url_handlers`数组似乎是用来给Controller添加更多规则的。

那么我什么时候应该在我的控制器上使用哪个数组/函数？我应该何时使用`Controller::handleRequest()`以及如何使用此功能？使用不同的方法有什么区别？

到目前为止，我阅读了很多关于这个主题的文章，但每篇文章都只提到了上述一种可能性，这些方法从未被比较过......

这是我找到的帖子列表：

*   [maetl: Undocumenting PHP: SilverStripe 中的 URL 处理](http://maetl.net/silverstripe-url-handling)
*   [Silverstripe 文档：控制器](http://doc.silverstripe.org/framework/en/topics/controller)
*   [SSBits：控制器而不是页面](http://www.ssbits.com/tutorials/2011/controllers-instead-of-pages/)
*   [SSBits：作为页面的数据对象第 1 部分](http://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-1-keeping-it-simple/)
*   [SSBits：作为页面的数据对象第 2 部分](http://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-2-using-model-admin-and-url-segments-to-create-a-product-catalogue/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:05:33.780

制作控制器动作的最简单方法是使用 allowed_actions 和相应的方法：

```
static $allowed_actions = array(
    'myaction'
);

function myaction() {
} 
```

url_handlers 允许您定义更多 URL 模式，并允许您将控制权委托给另一个 RequestHandler 对象，例如 Form 或 FormField。这就是处理 GridField 详细信息表单等的 URL 处理方式。

你不应该真的需要覆盖 handleRequest() 或 handleAction()

*   handleRequest() 是解析 url_handlers 的函数
*   上面例子中的handleAction()调用诸如'myaction'之类的方法

希望这能澄清一点。

# iphone - 如何使用 FBGraph-API 使用 FQL 查询获取朋友的个人资料图片

> ID：12278305
> 
> 赞同：1
> 
> 时间：2012-09-05T09:26:45.013
> 
> 标签：iphone, ios, facebook-graph-api, facebook-fql

我想知道我是否可以在请求时设置图片宽度和高度。有人建议我使用以下查询来实现此行为：

```
SELECT id, width, height, url, is_silhouette, real_width, real_height FROM profile_pic
 WHERE id=me() AND width=155 AND height=50 
```

这是正确的过程吗？根据我的要求，我需要在表格中显示个人资料图片，如所附屏幕截图所示，宽度为 155，高度为 50。

![我的好友列表](../Images/aa7c8be97fb1aa93c1acec36a4217c96.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:52:24.470

这是一个代码，可以帮助您获取朋友的头像。

1.  从 FBGraph API 获取朋友的 ID，例如

    ```
     NSString *id = @"505326797"; 
    ```

2.  然后粘贴以下代码...

    ```
     NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture",id]]; 
    ```

3.  这是您可以获得朋友图片的确切网址的方式，在异步图像视图或其他地方使用它......

也许它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:48:00.387

FQL 获取 facebook 好友信息列表和他们的照片

```
NSString *query = @"SELECT uid,name,first_name,last_name,pic_square FROM user WHERE uid IN (";
query = [query stringByAppendingFormat:@"SELECT uid2 FROM friend WHERE uid1 = %@)",userid];
NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                query, @"query",
                                nil];
[_facebook requestWithMethodName: @"fql.query" 
                       andParams: params
                   andHttpMethod: @"POST" 
                     andDelegate:self]; 
```

您将通过以下方法得到响应

```
 -(void)request:(FBRequest *)request didLoad:(id)result 
```

例如

```
{
    "first_name" =User;
    "last_name" = R;
    name = "User R";
    "pic_square" = "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash2/.jpg";
    uid = 595sd1;
     }
 {},{} etc 
```

希望这可以帮助！

另一种方法是

获取用户的id（或昵称），并从[https://graph.facebook.com/idOrNick/picture获取图片](https://graph.facebook.com/idOrNick/picture)

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture", id]];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];
UIImageView *imgView = [[UIImageView alloc]init];
imgView.image = image; 
```

而对于尺寸

图片尺寸：正方形（50×50）

小（50 像素宽，可变高度）

大（大约 200 像素宽，可变高度）

并且要应用这种类型的大小，您必须将其附加到 URL 的末尾

例如

[http://graph.facebook.com/“id](http://graph.facebook.com/)或 Nick”/picture?type=large。[小/方形/大]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:44:29.010

使用 Graph API 字段扩展方法 -

```
graph.facebook.com/USER_ID?fields=friends.fields(picture.height(50).width(155)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T18:46:50.040

我也在寻找这个问题的答案。最后我认为这个电话是最好的：

```
http://graph.facebook.com/me/friends?fields=name,picture.height(200).width(200) 
```

您还可以将“我”替换为某个 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T12:23:14.430

是的。你的代码是正确的。这将获得大约的图片版本。155 x 50 像素。

如果您想获取用户朋友的照片，请使用[以下查询](https://developers.facebook.com/tools/explorer/145634995501895/?fql=SELECT%20id%2C%20width%2C%20height%2C%20url%2C%20is_silhouette%2C%20real_width%2C%20real_height%20FROM%20profile_pic%0A%20WHERE%20id%20IN%20(SELECT%20uid1%20FROM%20friend%20WHERE%20uid2%3Dme())%20AND%20width%3D155%20AND%20height%3D50%0A)：

```
 SELECT id, width, height, url, is_silhouette, real_width, real_height  
     FROM profile_pic
         WHERE id IN (SELECT uid1 FROM friend WHERE uid2=me()) AND width=155 AND height=50 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-24T14:59:41.247

根据文档[https://developers.facebook.com/docs/reference/api/using-pictures/](https://developers.facebook.com/docs/reference/api/using-pictures/)，有一种更简单的方法可以做到这一点。从 facebook 获取自定义图像的直接 URL 是：

```
https://graph.facebook.com/<USER_ID>/picture?width=<WIDTH>&height=<HEIGHT> 
```

我知道问题是关于使用 GraphAPI 获取 URL，但是当您可以直接提供图像 src URL 时，为什么还要进行一次额外的调用。

```
<img src="https://graph.facebook.com/${ID}/picture?width=${customwidth}&height=$customheight" /> 
```

# database - 将 JPA 数据从服务器发送到客户端？

> ID：12278309
> 
> 赞同：1
> 
> 时间：2012-09-05T09:26:53.450
> 
> 标签：database, jpa, vector, client-server, entity

我正在使用 Eclipse Juno IDE。

我有一个客户端-服务器应用程序。在服务器端，我有一个实体（旅行），我有另一个处理 JPA 查询的类。我正在从数据库中接收数据，但是当我尝试将其作为向量发送给客户端时，我在客户端遇到了一个异常，上面写着“Cant cast pack.db.Travels to java.util.向量”

这是我的代码： **实体：**

```
package pack.db;

import java.io.Serializable;
import java.sql.Date;
import java.sql.Time;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class Travels implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE)
    @Column(name="id")
    private int id;

    @Column(name="taxi_number")
    private String taxiNumber;

    @Column(name="travel_date")
    private Date   travelDate;

    @Column(name="travel_time")
    private Time   travelTime;

    @Column(name="cost")
    private Double travelCost;

    public Travels() {
        super();
    }

    public void setNumber(String number)
    {
        this.taxiNumber = number;
    }

    public void setDate(Date date)
    {
        this.travelDate = date;
    }

    public void setTime(Time time)
    {
        this.travelTime = time;
    }

    public void setCost(Double cost)
    {
        this.travelCost = cost;
    }
} 
```

**查询类**

```
public Vector retrieveAllTravelsData(Date[] travelDate, Time[] travelTime) {
    List<Object[]> allTravels = (List<Object[]>)em.createQuery("SELECT t FROM Travels t WHERE t.travelDate between ?1 and ?2 and " +
                                              "t.travelTime between ?3 and ?4")
                               .setParameter(1, travelDate[0])
                               .setParameter(2, travelDate[1])
                               .setParameter(3, travelTime[0])
                               .setParameter(4, travelTime[1]).getResultList();
    return (Vector) allTravels;
} 
```

所以我想做的是将“allTravels”作为向量发送到客户端，因为我需要在客户端填充一个 JTABLE。所以我尝试将查询中的返回数据转换为 OBJECT[] （因为 JTABLE 的构造函数需要 Object[][] 的行）并发送它..但我仍然在客户端遇到异常说“无法将 pack.db.Travel 转换为 java.util.Vector”.. 我认为我不需要在客户端添加 travel Entity.. 那么如何将数据发送到客户端？

更具体地说..我有这个带有JDBC实现的代码

```
public Vector retrieveAllTravelsData(Date[] travelDate, Time[] travelTime) {
    Vector rows_data = new Vector();
    String sql = "SELECT * FROM taxis.travels " + " WHERE travel_date BETWEEN ? AND ? AND travel_time BETWEEN ? AND ?";
    try {
        statement = (PreparedStatement) connection.prepareStatement(sql);
        statement.setDate(1, travelDate[0]);
        statement.setDate(2, travelDate[1]);
        statement.setTime(3, travelTime[0]);
        statement.setTime(4, travelTime[1]);
        rs = statement.executeQuery();
        ResultSetMetaData meta = rs.getMetaData();
        int cols_count = meta.getColumnCount();

        while (rs.next()) {
            Vector record = new Vector();
            for (int i = 0; i < cols_count; i++) {
                record.add(rs.getString(i+1));
            }
            rows_data.addElement(record);
        }
    } catch (SQLException e) {
        while (e != null) {
            e.printStackTrace();
            e = e.getNextException();
        }
    }
    return rows_data; 
```

在这里，我可以从每一列中获取每一列数据，将其保存为记录，然后将其放入 Vector 中。那么JPA如何实现呢？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:16:03.847

将一个对象转换为另一个类不会神奇地改变对象的类型。它只允许将其引用为更具体的类。因此，仅当列表确实是 Vector 时，将 List 转换为 Vector 才有效。

`getResultList()`返回一个`List`。这就是javadoc所说的。返回的具体类取决于 JPA 提供程序，但我很确定它们都没有返回 a `Vector`，因为 Vector 是一个不应再使用的类，因为 Java 1.2。

此外，这个特定的查询不会返回`Object[]`，而是`Travels`（应该命名为`Travel`，顺便说一句）的实例。

所以方法应该是：

```
public List<Travel> retrieveAllTravelsData(Date[] travelDate, Time[] travelTime) {
    List<Travel> allTravels = (List<Travel>) em.createQuery("SELECT t FROM Travel t WHERE t.travelDate between ?1 and ?2 and " +
                                              "t.travelTime between ?3 and ?4")
                               .setParameter(1, travelDate[0])
                               .setParameter(2, travelDate[1])
                               .setParameter(3, travelTime[0])
                               .setParameter(4, travelTime[1]).getResultList();
    return allTravels;
} 
```

服务器不应该关心客户端需要 Vector 来满足旧的 Swing 类。如果您在客户端确实需要 Vector，则从返回的列表中创建一个：

```
Vector<Travel> travelsAsVector = new Vector(travelsAsList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:11:31.743

好的，我这样解决它：

```
public Vector retrieveAllTravelsData(Date[] travelDate, Time[] travelTime) {

    javax.persistence.Query q = (javax.persistence.Query)em.createNativeQuery("SELECT * 
             from Travels WHERE travel_date between ?1 and ?2")
            .setParameter(1, travelDate[0])
            .setParameter(2, travelDate[1])
            .setParameter(3, travelTime[0])
            .setParameter(4, travelTime[1]);
    List<Object[]> result = (List<Object[]>)q.getResultList();
    Vector rows = new Vector();
    for (int i = 0 ; i < result.size(); i++)
    {
        Vector rec = new Vector();
        for (int j = 0; j < columnCount; j++)
        {
            rec.add(result.get(i)[j].toString()); // returns the specific column value and add it to the vector
        }
        rows.addElement(rec);
    }
    return rows;
} 
```

# google-apps-script - Google Apps 脚本失败摘要：未找到

> ID：12278310
> 
> 赞同：2
> 
> 时间：2012-09-05T09:26:56.510
> 
> 标签：google-apps-script

自 9 月 1 日以来，我一直收到以下电子邮件。在此之前，我在 Google Docs/Drive 中设置了 Gmail Meter，但删除了电子表格。我怎样才能停止接收电子邮件。

**您的脚本未找到，最近未能成功完成。故障摘要如下所示。要为此脚本配置触发器，或更改您的设置以接收未来的失败通知，请单击此处。详细信息：开始功能错误消息触发器结束 2012 年 9 月 3 日晚上 10:21 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 3 日晚上 10:21 此致，Google Apps 脚本**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:53:47.807

这是一个帮助我的解决方案：

转到 script.google.com。转到“资源”->“所有触发器”。

应该会弹出一个重命名对话框，提示您保存这个假脚本。单击确定。

尝试找到发送电子邮件的触发器并将其删除。

现在您的所有触发器都应该出现了——即使是您已经从 Google Docs/Drive 中删除的文档。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:09:00.010

触发器列表中可能还有一个触发器，要删除它，只需在脚本编辑器中打开任何脚本，然后转到 /ressources/all your triggers/ 并删除它。![在此处输入图像描述](../Images/d9dfa744b999fae6fa36678aa30a06d9.png)

# javascript - JQuery：如何在仍触发父 onclick 事件的同时停止子 onclick 事件

> ID：12278313
> 
> 赞同：4
> 
> 时间：2012-09-05T09:27:07.020
> 
> 标签：javascript, jquery

我想知道如何在触发父 onclick 事件的同时停止子 onclick 事件。例如下面的结构：

```
<div id="parent">
   <div id="child1"></div>
   <div id="child2"></div>
   <div id="child3"></div>
</div> 
```

例如，如果我单击“child1”，则不会触发“child1”的 onclick 事件，但仍会触发“parent”的 onclick 事件。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:31:25.437

最简单的方法是取消绑定孩子的事件处理程序。

```
$('#child1').unbind('click'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T12:44:01.503

这是上述问题的解决方案箱。请检查一次演示链接。

**演示：** [http ://codebins.com/bin/4ldqp7l](http://codebins.com/bin/4ldqp7l)

**HTML**

```
<div id="parent">
  <div id="child1">
    Child-1
  </div>
  <div id="child2">
    Child-2
  </div>
  <div id="child3">
    Child-3
  </div>
</div> 
```

**jQuery**

```
$(function() {
    $("#parent").click(function() {
        alert("Parent has been clicked too...!");
    });
    $("#child1").click(function(e) {
        e.stopPropagation();
        alert("Child-1 has been clicked...!");
    });
    $("#child2").click(function() {
        alert("Child-2 has been clicked...!");
    });
    $("#child3").click(function() {
        alert("Child-3 has been clicked...!");
    });
}); 
```

**CSS**

```
#parent{
  padding:5px;
  background:#a34477;
  width:140px;
  text-align:center;
  padding:10px;
}

#parent div{
  border:1px solid #2211a4;
  background:#a3a5dc;
  width:100px;
  text-align:center;
  font-size:14px;
  margin-left:10px;
  margin-top:3px;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7l](http://codebins.com/bin/4ldqp7l)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T09:35:25.520

您可以将其传递`click`给父母吗？

```
$('.child1').click(function(e){
    e.preventDefault();
    $(this).parent('#parent').trigger('click');
}); 
```

当您点击 .child1 时，它将阻止默认操作，然后触发对`child1`id 为 #parent 的父级的点击。

实际上 - 可能忽略上述内容 - 根据下面的评论，它可能会导致冒泡。您真正需要做的就是使用`e.stopPropagation();`.

我创建了一个[jsfiddle](http://jsfiddle.net/wigster/VnHGh/1/)，展示了虽然`child1`它绑定了一个 click 函数，但它被忽略了，所以父点击只是被拾取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T09:31:28.367

你的意思是：

```
$('#parent').on('click', function(e) { 
   if( e.target !== this ) {
       return;
   }
}); 
```

# android - Android添加新图像给出错误

> ID：12278316
> 
> 赞同：0
> 
> 时间：2012-09-05T09:27:11.913
> 
> 标签：android, android-imageview

这可能看起来很傻，但说真的，我什至不知道它为什么会这样反应。我正在使用 eclipse JUNO，我只是尝试了一个简单的程序，使我能够在我的真实程序说它有错误之后将图像放入布局中。

该项目显示错误图标，但是当在子项目中查看所有内容时，如类，布局所有内容，非常清晰。您可以像上图那样看到它。

![在此处输入图像描述](../Images/220f481709a9cdbe64c8b6578f1ccaa8.png)

在更新 adt 和其他东西之前，我已经制作了一个 android 项目。在此之前，我所做的只是将我想要的任何图片放入任何可绘制的文件夹中。我相信这是正确的一步，我知道我在这里做同样的事情，但它有问题。我什至在基本教程上搜索如何放置图像，它和我一样。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:30:36.850

Android不允许图像名称在drawable文件夹中包含大写字母将名称更改为仅包含小写字母

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:32:05.393

png 文件名中不允许出现大写字母和一些符号，更新 png 文件名，. 用小写字母写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:33:04.950

根据用户[inazaruk](https://stackoverflow.com/users/69802/inazaruk)的回答，因此不在文件名中使用特殊字符的原因是它们不能用于 Java 名称。

至于大写字母，我想这是为了避免在 Windows 与 Linux 环境中出现一个小问题。那是因为Linux认为Icon.png和icon.png是不同的文件，而Windows认为Icon.png和icon.png是同一个文件。因此，任何使用 Linux 的人都可以创建在 Windows 上无法编译的应用程序。

所以，改变你`Humanpng`的`human`也不要使用扩展名`png`作为图片名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T11:53:39.790

只需检查`Problems`Eclipse 中的选项卡即可。你可以从

> 窗口 > 显示视图 > 问题。

在那里你可以找到错误描述。

# android - 在 Android 中找不到类 'com.jayway.android.robotium.solo.Solo'

> ID：12278318
> 
> 赞同：1
> 
> 时间：2012-09-05T09:27:20.300
> 
> 标签：android, junit

我创建了测试项目。在那我创建了文件夹“robotium”并粘贴了2个robotium jar文件（robotium-solo-3.4.1-javadoc.jar和robtium-solo-3.4.1.jar）。从我配置java构建路径的属性。但我得到了跟随故障跟踪

```
 java.lang.NoClassDefFoundError: com.jayway.android.robotium.solo.Solo
      at com.example.pkg.test.ThisisitTest.setUp(ThisisitTest.java:19)
      at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
      at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
      at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
      at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:40:14.233

在 android 清单中将 Debugable 设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:26:28.587

`android:debuggable="true"`只是不能解决我项目中的问题。我也必须添加这样做。

“NoClassDefFoundError”是由于android sdk升级到版本17。我需要在我的测试项目构建路径中的“order and export”中检查robotium.jar

# ruby - TCP socket 停止接收数据，直到关闭

> ID：12278319
> 
> 赞同：8
> 
> 时间：2012-09-05T09:27:21.167
> 
> 标签：ruby, actionscript-3, flash, networking, tcp

我有一个非常奇怪的问题让我发疯。

我有一个 Ruby 服务器和一个 Flash 客户端（Action Script 3）。这是一个多人游戏。

问题是一切都很完美，然后突然间，随机玩家停止接收数据。当服务器因为不活动而关闭连接时，大约 20-60 秒后，客户端会收到所有缓冲的数据。

客户端`XMLsocket`用于检索数据，因此客户端接收数据的方式不是问题。

```
socket.addEventListener(Event.CONNECT, connectHandler);
function connectHandler(event)
{
    sendData(sess);
}

function sendData(dat)
{
    trace("SEND: " + dat);
    addDebugData("SEND: " + dat)
    if (socket.connected) {
        socket.send(dat);
    } else {
        addDebugData("SOCKET NOT CONNECTED")
    }
}

socket.addEventListener(DataEvent.DATA, dataHandler);
function dataHandler(e:DataEvent) {
    var data:String = e.data;
    workData(data);
} 
```

服务器在每次写入后刷新数据，因此不是刷新问题：

```
sock.write(data + DATAEOF)
sock.flush() 
```

`DATAEOF`是空字符，所以客户端解析字符串。

当服务器接受一个新的套接字时，它设置`sync`为 true、autoflush 和`TCP_NODELAY`true：

```
newsock = serverSocket.accept
newsock.sync = true
newsock.setsockopt(Socket::IPPROTO_TCP, Socket::TCP_NODELAY, true) 
```

这是我的研究：

信息：我每秒都在将 netstat 数据转储到一个文件中。

*   当客户端停止接收数据时，netstat 显示套接字状态仍为`ESTABLISHED`.
*   几秒钟后，发送队列会随着发送的数据而增长。
*   tcpflow 显示数据包被发送了 2 次。
*   当服务器关闭套接字时，套接字状态按预期更改`FIN_WAIT1`为 。然后，tcpflow 显示所有缓冲的数据都发送到客户端，但客户端没有接收到数据。几秒钟后，netstat 的连接消失，tcpflow 显示再次发送相同的数据，但这次客户端接收到数据，因此开始向服务器发送数据，服务器接收到它。但是为时已晚...服务器已关闭连接。

我不认为这是操作系统/网络问题，因为我已经从位于西班牙的 VPS 更改为位于爱尔兰的 Amazon EC2，但问题仍然存在。

我也不认为是客户端网络问题，因为这种情况每天会发生几十次，平均在线用户数量在45-55左右，每天有400个左右的独立用户，所以比例非常高。

**编辑：** 我做了更多的研究。我已将服务器更改为 C++。

当客户端停止发送数据时，一段时间后服务器会收到“对等连接重置”错误。在那一刻，tcpdump 显示客户端发送了一个 RST 数据包，这可能是因为客户端关闭了连接，而服务器试图读取，但是......为什么客户端关闭了连接？我认为答案是客户端不是关闭连接的那个，是内核。这是一些信息：[http ://scie.nti.st/2008/3/14/amazon-s3-and-connection-reset-by-peer](http://scie.nti.st/2008/3/14/amazon-s3-and-connection-reset-by-peer)

`Basically, as I understand it, Linux kernels 2.6.17+ increased the maximum size of the TCP window/buffer, and this started to cause other gear to wig out, if it couldn’t handle sufficiently large TCP windows. The gear would reset the connection, and we see this as a “Connection reset by peer” message.`

我已经按照这些步骤进行操作，现在似乎服务器仅在客户端失去与 Internet 的连接时才关闭连接。

我将添加此作为答案，以便人们对此有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:48:42.997

我认为答案是内核是关闭连接的那个。这是一些信息：[http ://scie.nti.st/2008/3/14/amazon-s3-and-connection-reset-by-peer](http://scie.nti.st/2008/3/14/amazon-s3-and-connection-reset-by-peer)

`Basically, as I understand it, Linux kernels 2.6.17+ increased the maximum size of the TCP window/buffer, and this started to cause other gear to wig out, if it couldn’t handle sufficiently large TCP windows. The gear would reset the connection, and we see this as a “Connection reset by peer” message.`

我已经按照这些步骤进行操作，现在似乎服务器仅在客户端失去与 Internet 的连接时才关闭连接。

# python - 装饰器动态超类

> ID：12278322
> 
> 赞同：0
> 
> 时间：2012-09-05T09:27:35.570
> 
> 标签：python, decorator

我有简单的装饰器，用于在尝试检索 dict 值时替换无效字符。

```
import types

class ContentInterface(dict):
    def __getitem__(self, item):
        raise NotImplementedError

class Content(ContentInterface):
    def __getitem__(self, item):
        return dict.__getitem__(self, item)

class DictDecorator(ContentInterface):
    def __init__(self, interfaceContent, **config):
        super(DictDecorator, self).__init__()
        self._component = interfaceContent
        self._config = config

    def _replace(self, text):
        return text

    def _check(self, invalidCharacterSet, itemPath):
        pass

    def __getitem__(self, name):
        item = self._component[name]
        if isinstance(item, types.StringTypes):
            newText = self._replace(item)
            invalidCharacterSet = set([char for char in item if char not in newText])
            self._check(invalidCharacterSet, name)
            return newText
        else:
            return self.__class__(item, **self._config)

class ReplaceCommaDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace(",", ' ')

class ReplaceDotDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace('.', ' ')

class ReplaceColonDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace(":", ' ')

class ReplaceSemicolonDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace(";", ' ') 
```

我想通过以下方式使用它：

```
dictWithReplacedCharacters =\
ReplaceCommaDecorator(                       # Empty
    ReplaceDotDecorator(                     # Empty
        ReplaceColonDecorator(               # Empty
            ReplaceSemicolonDecorator(       # Empty
                Content({                    # Data
                    '1':u'1A:B;C,D.E',
                    '2':{
                        '21':u'21A:B;C,D.E',
                        '22':u'22A:B;C,D.E',
                    }
                }),
            ),
        ),
    ),
)

print dictWithReplacedCharacters['2']['21'] 
```

我有 4 个冗余 dict 对象代表一个数据字典的装饰器。

我想强制上面的嵌套语句返回 ReplaceCommaDecorator 对象继承自 ReplaceDotDecorator 继承自 ReplaceColonDecorator 继承自 ReplaceSemicolonDecorator 继承自包含数据的内容。我想这可以在 DictDecorator 的 __new__ 方法中解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:04:37.397

我不认为你在做什么是正确的方法。我只想写一个接受一组通用字符并正确检查/替换的类，所以如果你想转义更多字符，你必须简单地传递一个包含所有字符的集合（可能还有一些关于如何替换的元信息ETC。）。

在您的示例中，代码不起作用，因为`str.replace`需要两个参数，而您只传递一个。也许你想删除角色？在这种情况下，您应该这样做`replace(character, "")`。无论如何，如果你打算只用单个字符替换单个字符，那么你可以看看模块中的`str.translate`方法和`maketrans`功能`string`。

否则，也许正则表达式是要走的路（使用`re.sub`）。

无论如何，做你要求的一种方法是：

```
class ContentInterface(dict):
    pass

class Content(ContentInterface):
    pass

class DictDecorator(ContentInterface):

    def __new__(cls, other):
        if isinstance(other, DictDecorator):
            if not issubclass(cls, other.__class__) and not issubclass(other.__class__, cls):
                new_cls = type('NewType', (cls, other.__class__), {})
                return new_cls(other)

        ob = dict.__new__(cls)
        return ob

    def __init__(self, interface, **config):
        super(DictDecorator, self).__init__()
        self._component = interface
        self._config = config

        # just to make the result appear with the content.
        # You may not need this.
        self.update(self._component)

    def _replace(self, text):
        return text

    def _check(self, invalid_char_set, item_path):
        pass

    def __getitem__(self, name):
        item = self._component[name]
        if isinstance(item, basestring):
            new_text = self._replace(item)
            invalid_char_set = set(char for char in item if char not in new_text)
            self._check(invalid_char_set, name)
            return new_text
        else:
            # What you wrote here does not make sense...
            # maybe you wanted: return self._config[name]?
            return super(DictDecorator, self).__getitem__(name)

class ReplaceCommaDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace(",", ' ')

class ReplaceDotDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace('.', ' ')

class ReplaceColonDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace(":", ' ')

class ReplaceSemicolonDecorator(DictDecorator):
    def _replace(self, text):
        return text.replace(";", ' ') 
```

它似乎有效：

```
>>> a = Content({'1': u'1A:B;C,D.E', '2': {'21': u'21A:B;C,D.E', '22': u'22A:B;C,D.E'}})
>>> r = ReplaceDotDecorator(ReplaceCommaDecorator(a))
>>> r['1']
u'1A:B;C D E'
>>> r = ReplaceColonDecorator(ReplaceDotDecorator(ReplaceCommaDecorator(a)))
>>> r['1']
u'1A B;C D E' 
```

可能有更好的方法可以做到这一点，也许使用元类，但这是我能想到的唯一方法。

编辑：

顺便说一句，如果您不确切知道自己在做什么，我认为子类化内置类型并不是一个好主意：

```
>>> class MyDict(dict): pass
... 
>>> a = MyDict(a=1, b=2)
>>> a
{'a': 1, 'b': 2}
>>> a.__class__
<class '__main__.MyDict'>
>>> copy = a.copy()
>>> copy.__class__     # Wrong class.
<type 'dict'> 
```

或者另一个例子：

```
>>> class MyDict(dict):
...     def __getitem__(self, key):
...             if key.startswith('a'):
...                     return 'BAD!'
...             return super(MyDict, self).__getitem__(key)
... 
>>> my = MyDict(a=1, b=2)
>>> my['a']
'BAD!'
>>> my['b']
2
>>> my.keys()
['a', 'b']
>>> my.values()   #you'd expect ['BAD!', 2]
[1, 2] 
```

因此，请务必重新实现您将要使用的每种方法，这可能会导致类似的事情。

# java - 字符串实习生谜题

> ID：12278323
> 
> 赞同：15
> 
> 时间：2012-09-05T09:27:39.287
> 
> 标签：java, string

> **可能重复：**
> [intern() 在 Java 6 和 Java 7 中的行为不同](https://stackoverflow.com/questions/7065337/intern-behaving-differently-in-java-6-and-java-7)

在这个[博客上](http://vanillajava.blogspot.com/2012/09/string-intern-puzzle.html)，我发现了有趣的字符串谜题：

- - 引用 - -

```
String te = "te", st = "st";
//"test".length();
String username = te + st;
username.intern();
System.out.println("String object the same is: " 
   + (username == "test")); 
```

在 Java 7 update 7 下打印。

`String object the same is: true`

但取消注释“test”.length(); 行，或使用 Java 6 运行并打印

`String object the same is: false`

--- EoQ ---

老实说，我不明白为什么输出不同。你能解释一下这种行为的原因是什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T09:31:14.700

您需要将实习字符串分配回用户名：

```
String username = te + st;
username = username.intern(); 
```

在这种情况下，两个代码都将输出`true`.

这是另一个有趣的例子：

```
final String te = "te", st = "st";
"test".length();
String username = (te + st);
System.out.println("String object the same is: " + (username == "test")); 
```

打印结果也为 true，因为 te 和 st 被标记为 final。因此 username 成为编译时间常数并自动被实习。

**编辑**

正如一些人指出的那样，您的代码在 Java 6 中打印为 false，即使该`"test".length`行已被注释掉。

这是由于[Java 7 中引入的更改之一](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#jdk7changes)：

> 在 JDK 7 中，interned 字符串不再分配在 Java 堆的永久代中，而是与应用程序创建的其他对象一起分配在 Java 堆的主要部分（称为年轻代和年老代）中.

结果之一是[您发布的代码在 Java 6 和 7 中具有不同的输出](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6962931)（参见错误报告底部的示例）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T09:31:03.980

请检查[是否 String.intern() 更改原始字符串参考的答案](https://stackoverflow.com/questions/12275677/does-string-intern-change-reference-of-original-string-jdk7)

> 改变的不是字符串，而是用于“测试”的对象被改变。

因此，在您的情况下，如果`"test"`首先定义，这意味着如果您先定义，`"test".length();`则`"test"`在字符串池中，因此第一个结果是`false`.

现在`if you comment this line`，在调用`username.intern();`“test”之后，现在将`"test"`您用于比较的下一个添加到字符串池中，然后分配给`username.intern();`方法放置的相同对象。因此它是`true`

所以

```
Commented //"test".length(); -> True
Un Commented "test".length(); --> False 
```

# objective-c - 代码不会为超大的实现文件编译

> ID：12278324
> 
> 赞同：0
> 
> 时间：2012-09-05T09:27:48.537
> 
> 标签：objective-c, ios, compiler-construction

编译器通过抛出以下错误退出。

```
/var/folders/2t/jkh9ngsn6f9bnmz8l0mz0zm80000gs/T/xsdLocal20-ZhAiH9.s:1895977:branch out of range
clang: error: assembler command failed with exit code 1 (use -v to see invocation)
Command        /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

该文件有 98341 行。

使用编译器 Apple LLVM 3.1

代码为模拟器构建，但不适用于 iOS 设备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:37:18.340

保存原始文件。

一个接一个地注释掉@implementation，直到文件正确编译。Npw您知道给您带来问题的课程。

然后采取最大的方法，在代码周围添加'#if 0'，并在'#if 0'之前的顶部，返回一个适当的值 - YES，NO，nil，无论文件将编译。

编译。你还有问题吗？然后注释掉下一个最大的方法，或者只是按顺序执行这些方法，或者使用二分搜索技术（即注释掉一半方法，然后注释另一半，以深入挖掘罪魁祸首。

一旦找到有问题的方法，您需要将其重构为两个或更多方法，这些方法可能是类私有的，因此您的公共接口不会改变。

# jax-ws - JAX-WS 部署最佳实践：WSDL 位置和客户端生成

> ID：12278327
> 
> 赞同：3
> 
> 时间：2012-09-05T09:27:59.543
> 
> 标签：jax-ws

我按照以下步骤创建了一个 Web 服务：

*   使用 @WebService 和 @WebMethod 注释创建服务接口和实现
*   部署服务
*   使用 wsimport 生成的客户端存根
*   使用如下所示的客户端程序调用 Web 服务：

    ```
    public static void main(String[] args) throws Exception {

      URL url = new URL("http://SERVER:PORT/HelloWorldPOC/HelloWorldPOCImplService?wsdl");

      QName qname = new QName("http://helloworld.poc.com/", "HelloWorldPOCImplService");

      Service service = Service.create(url, qname);

      HelloWorldPOCImpl hello = service.getPort(HelloWorldPOCImpl.class);

      hello.execute("hello");

      System.out.println("Done");
    } 
    ```

问题：

1.  WSDL 位置在客户端程序中提供。WSDL 位置也被硬编码在 wsimport 生成的客户端存根中。为什么会有这种冗余？
2.  我使用 wsimport 使用“localhost”路径创建了客户端存根：

    ```
    wsimport -keep http://localhost:9080/HelloWorldPOC/HelloWorldPOCImplService?wsdl 
    ```

    *   我从 localhost 运行客户端测试程序，其中 URL 服务器部分为“localhost”。有效。然后从另一个系统运行相同的客户端，其中服务器部分作为服务器的主机名。有效。
    *   这意味着不使用生成的客户端存根中的 WSDL 位置吗？
    *   我们可以在 localhost 上生成 WSDL 并将其部署到任何地方，而无需重新生成客户端存根？只有调用者客户端需要从部署的服务器检索 WSDL。这是公认的做法，还是我们需要为每个部署的服务器重新生成客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T17:13:30.650

1.  您可以将其理解为默认位置，它将被 99% 覆盖。在我生成的代码中，也可以在没有指定 wsdl URL 的情况下创建服务，因此将使用默认 URL。
2.  当您覆盖 wsdl 文件的默认 URL 地址时，当然不会使用它。很多时候webservice producer只给我们wsdl文件，然后我们从wsdl生成存根放在本地硬盘上，所以我们总是需要覆盖默认值。

PS：我可以八卦另一种技术如何在不生成存根的情况下调用 Web 服务。您只需要客户端上可用的“远程接口”之类的东西（由服务器类实现）。当您负责生产和使用 Web 服务时，它非常有效。当接口演变时它非常有效，因为当你改变它时，你不需要重新生成存根。以下是 JBoss 7 (JAX-WS) 作为服务器和客户端上使用的 Apache CXF 库的示例：http: [//www.mastertheboss.com/jboss-web-services/developing-web-services-on-jboss-as- 7](http://www.mastertheboss.com/jboss-web-services/developing-web-services-on-jboss-as-7)

# codeigniter - Codeigniter 中用于阿拉伯字符的会话问题

> ID：12278339
> 
> 赞同：2
> 
> 时间：2012-09-05T09:28:49.387
> 
> 标签：codeigniter

我只是被一个关于会话的问题所困扰。我有一个英语和阿拉伯语的多语言电子商务网站。如果是阿拉伯语，当某人使用阿拉伯语名称、描述或此类字段注册时，她/他可以成功注册。但是在登录期间会话数据丢失。

实际上，当将所有数据设置到会话数组中时，它被存储并且我通过打印数组来测试它。但是在用户被重定向到索引页面或个人资料页面时的有效身份验证之后，会话数组就会消失。整个阵列丢失。并且登录不起作用。它只发生在数据上有阿拉伯语字段的人身上。英语完全没问题。

我已经从 syatem/libraries 目录中删除了 session.php。然后它只在本地主机上工作，在服务器上它在订购或查看特定组织的项目时会产生问题。

任何建议都将被热诚接受。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:44:08.157

非常感谢大家的回复……我的问题已经解决了。

不幸的是，我的会话表 user_data 字段排序规则不是 utf8_unicode。这就是为什么数据在重定向到主页时丢失的原因。因为它使用的是 ci_session 表。它现在工作得很好。

在发布我尝试使用本机会话的问题之前，更新了系统/库上的 Session.php 文件....但还没有完美的解决方案。

但最终本可以找出愚蠢的错误并解决这个问题。

为大家干杯......：D

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:29:12.367

请尝试使用`Native Session`而不是默认`CI_Session`，看看是否可以解决您的问题？

这是一个链接：

[https://github.com/appleboy/CodeIgniter-Native-Session](https://github.com/appleboy/CodeIgniter-Native-Session)

# python - 如何在 hdf5 中有效地保存 python pandas 数据帧并将其作为数据帧在 R 中打开？

> ID：12278347
> 
> 赞同：14
> 
> 时间：2012-09-05T09:29:34.570
> 
> 标签：python, r, pandas, data.table, hdf5

我认为标题涵盖了这个问题，但要阐明：

[pandas](http://pandas.pydata.org) python 包有一个 DataFrame 数据类型，用于在 python 中保存表数据。它还有一个方便的[hdf5](http://www.hdfgroup.org/HDF5/)文件格式接口，因此可以使用简单的类似 dict 的接口来保存 pandas DataFrames（和其他数据）（假设您安装了[pytables](http://pytables.org)）

```
import pandas 
import numpy
d = pandas.HDFStore('data.h5')
d['testdata'] = pandas.DataFrame({'N': numpy.random.randn(5)})
d.close() 
```

到目前为止，一切都很好。但是，如果我尝试将相同的 hdf5 加载到 RI 中，就会发现事情并不那么简单：

```
> library(hdf5)
> hdf5load('data.h5')
NULL
> testdata
$block0_values
         [,1]      [,2]      [,3]       [,4]      [,5]
[1,] 1.498147 0.8843877 -1.081656 0.08717049 -1.302641
attr(,"CLASS")
[1] "ARRAY"
attr(,"VERSION")
[1] "2.3"
attr(,"TITLE")
[1] ""
attr(,"FLAVOR")
[1] "numpy"

$block0_items
[1] "N"
attr(,"CLASS")
[1] "ARRAY"
attr(,"VERSION")
[1] "2.3"
attr(,"TITLE")
[1] ""
attr(,"FLAVOR")
[1] "numpy"
attr(,"kind")
[1] "string"
attr(,"name")
[1] "N."

$axis1
[1] 0 1 2 3 4
attr(,"CLASS")
[1] "ARRAY"
attr(,"VERSION")
[1] "2.3"
attr(,"TITLE")
[1] ""
attr(,"FLAVOR")
[1] "numpy"
attr(,"kind")
[1] "integer"
attr(,"name")
[1] "N."

$axis0
[1] "N"
attr(,"CLASS")
[1] "ARRAY"
attr(,"VERSION")
[1] "2.3"
attr(,"TITLE")
[1] ""
attr(,"FLAVOR")
[1] "numpy"
attr(,"kind")
[1] "string"
attr(,"name")
[1] "N."

attr(,"TITLE")
[1] ""
attr(,"CLASS")
[1] "GROUP"
attr(,"VERSION")
[1] "1.0"
attr(,"ndim")
[1] 2
attr(,"axis0_variety")
[1] "regular"
attr(,"axis1_variety")
[1] "regular"
attr(,"nblocks")
[1] 1
attr(,"block0_items_variety")
[1] "regular"
attr(,"pandas_type")
[1] "frame" 
```

这让我想到了我的问题：理想情况下，我可以从 R 到 pandas 来回保存。我显然可以写一个从 pandas 到 R 的包装器（我认为......虽然我认为如果我使用 pandas [MultiIndex](https://web.archive.org/web/20110926002307/http://pandas.sourceforge.net/indexing.html)可能会变得更棘手），但我认为我不能轻易地在 pandas 中使用该数据。有什么建议么？

奖励：我*真正*想做的是将 R 中的[data.table](http://datatable.r-forge.r-project.org/)包与 pandas 数据框一起使用（这两个包中的键控方法可疑地相似）。对此的任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:45:51.937

如果你还在看这个，看看谷歌群组上的这篇文章。它展示了如何通过 HDF5 在 pandas/R 之间交换数据。

[https://groups.google.com/forum/?fromgroups#!topic/pydata/0LR72GN9p6w](https://groups.google.com/forum/?fromgroups#!topic/pydata/0LR72GN9p6w)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T18:18:16.660

下拉到 pytables 并在那里存储/获取数据是有意义的。

最终，DataFrame 是 Series 的字典，这就是 HDF5 表。由于不兼容的 dtypes，翻译存在限制，但对于数字数据，它应该是直截了当的。

pandas 存储其 HDF5 的方式更像是二进制 blob。它必须支持 HDF5 完全支持的 DataFrame 的所有细微差别。

[https://github.com/dalejung/trtools/blob/master/trtools/io/pytables.py](https://github.com/dalejung/trtools/blob/master/trtools/io/pytables.py)

有一些那种 pandas/hdf5 munging 代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-24T16:06:15.860

如何在 HDF5 中编写数据帧以便可以在 R 中读取它现在位于 Pandas 文档中：http: [//pandas-docs.github.io/pandas-docs-travis/io.html#external-compatibility](http://pandas-docs.github.io/pandas-docs-travis/io.html#external-compatibility)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-30T15:06:28.383

我推荐使用由 Wes 和 Hadley 构建的[feather](https://github.com/wesm/feather)来解决 R 和 Python 之间有效传输数据的问题。

Python

```
import numpy as np
import pandas as pd
import feather as ft

df = pd.DataFrame({'N': np.random.randn(5)})
ft.write_dataframe(df, 'df.feather') 
```

R

```
library(data.table)
library(feather)

dt <- data.table(read_feather("df.feather"))
dt
           N
1: 0.2777700
2: 1.4083377
3: 1.2940691
4: 0.8221348
5: 1.8552908 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T09:51:14.880

您可以使用`csv`文件作为通用数据格式。R 和 python pandas 都可以轻松使用它。您可能会失去一些精度，但如果这是一个问题取决于您的具体问题。

# wso2 - wso2 carbon 和 devolper Studio - 消息存储/处理器

> ID：12278348
> 
> 赞同：1
> 
> 时间：2012-09-05T09:29:35.387
> 
> 标签：wso2, wso2carbon

有没有办法在 Carbon 或 Developer Studio 中创建消息存储/处理器？

我需要创建它们，将它们添加到 CAR 并在 WSO2 ESB 中部署

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:28:15.233

不幸的是，Developer Studio 目前不支持创建消息存储和消息处理器。

它在我们的路线图中，我们将在未来的版本中包含它。

哈沙娜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T05:48:18.240

Developer Studio 3.2.0 版本支持创建消息存储和消息处理器，它们可以添加到 CAR 并部署在 WSO2 ESB 中。

[您可以从这里](http://dist.wso2.org/products/developer-studio/3.2.0/wso2-developer-studio-3.2.0.zip)下载 Developer Studio 3.2.0 版本。

问候，阿桑卡·桑吉瓦。

# java - 即使 CachedRowSet 超出范围，我是否应该始终关闭它？

> ID：12278351
> 
> 赞同：3
> 
> 时间：2012-09-05T09:29:47.813
> 
> 标签：java, database, jdbc, cachedrowset

考虑以下代码片段：

```
public void getUsers() {
    CachedRowSet rowSet = new CachedRowSetImpl();
    .........     /* Initialize the rowset */
    String query = "SELECT user_id FROM users";
    rowSet.setCommand(query);
    rowSet.execute();
    .........    /* Do some job */

} 
```

这里`CachedRowSet`对象在方法中本地使用。我需要在这里手动关闭它还是方法完成时它所保存的内容将被自动抓取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:57:03.190

来自：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html)

> CachedRowSet 对象是一个断开连接的行集，这意味着它仅短暂地使用到其数据源的连接。它在读取数据以用行填充自身时连接到其数据源，并在将更改传播回其底层数据源时再次连接。其余时间，CachedRowSet 对象断开连接，包括在修改其数据时。断开连接使 RowSet 对象更精简，因此更容易传递给另一个组件。例如，可以对断开连接的 RowSet 对象进行序列化并通过线路传递给瘦客户端，例如个人数字助理 (PDA)。

这意味着没有要关闭的连接问题，所以你可以离开它

但我认为始终关闭您打开的内容而不是将其留给您通常不会触摸或告诉何时运行的 GC 是一种很好的做法。

给定一个足够大的服务器有很多请求，如果它导致打开文件描述符，它最终可能是一个问题。确保资源关闭总是最好的

# android - 播放gif图像时的webview setBackgroundColor

> ID：12278361
> 
> 赞同：4
> 
> 时间：2012-09-05T09:30:20.440
> 
> 标签：android, webview, gif

我想播放 gif 使用 web 视图，默认 webview 背景是白色的。所以我使用：

```
webView.setBackgroundColor(Color.TRANSPARENT); 
```

但是当我使用上面的代码时，我的 gif 可以播放，但是在我的 gif 后面它还绘制了一张 gif 的图片：

![在此处输入图像描述](../Images/e88a232b549b6955ed49b2bd41337061.png)

在图片中，您将在后面看到多余的图片。我原来的gif图片是这样的：

![原图](../Images/7ca84c4319f067be950d6be5d529b233.png)

当我尝试删除`webView.setBackgroundColor(Color.TRANSPARENT)`时，gif 显示良好，但背景是白色的。

当我添加代码时，我的 gif 总是有 gif 的冗余图片。

所以我的问题是：如何将我的 gif 背景设置为透明但又不会弄乱 gif？

# python - Timedelta在python中与浮点数相乘

> ID：12278362
> 
> 赞同：21
> 
> 时间：2012-09-05T09:30:25.300
> 
> 标签：python, datetime, multiplication, timedelta

我有两个日期，可以像往常一样计算 timedelta。

但我想用产生的时间增量计算一些百分比：

```
full_time = (100/percentage) * timdelta 
```

但它似乎只能与 interegs 相乘。

我怎样才能使用`float`而不是`int`乘数？

例子：

```
percentage     = 43.27
passed_time    = fromtimestamp(fileinfo.st_mtime) - fromtimestamp(fileinfo.st_ctime)
multiplier     = 100 / percentage   # 2.3110700254217702796394730760342
full_time      = multiplier * passed_time # BUG: here comes exception
estimated_time = full_time - passed_time 
```

如果使用`int(multiplier)`- 准确性会受到影响。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-05T09:37:51.660

您可以转换为总秒数并再次返回：

```
full_time = timedelta(seconds=multiplier * passed_time.total_seconds()) 
```

[`timedelta.total_seconds`](http://docs.python.org/library/datetime.html#datetime.timedelta.total_seconds)可从 Python 2.7 获得；在早期版本中使用

```
def timedelta_total_seconds(td):
    return (td.microseconds + (td.seconds + td.days * 24 * 3600) * 10**6) / float(10**6) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T09:37:39.990

你可以使用[`total_seconds()`](http://docs.python.org/library/datetime.html?highlight=timedelta#datetime.timedelta.total_seconds)：

```
datetime.timedelta(seconds=datetime.timedelta(minutes=42).total_seconds() * 0.8)
# => datetime.timedelta(0, 2016) 
```

# arrays - 未定义的偏移量：1 in list($level[$xml_elem['level']],$extra) = array_values($xml_elem['attributes']);

> ID：12278364
> 
> 赞同：1
> 
> 时间：2012-09-05T09:30:27.367
> 
> 标签：arrays, list, xml-parsing

所以我正在为某人设置 DPS，但我的 xml_parse 中有一点错误。我正在使用来自 DPS (http://www.paymentexpress.com/Technical_Resources/Sample_code__-_PHP/PX_Post__-_cURL.aspx) 的示例代码，并且我已经对其进行了修改以与 PxPay 一起使用。我的问题是它吐出一个错误，我不知道代码在做什么，所以不知道出了什么问题

这是我的代码

```
function parse_xml($data){
$xml_parser = xml_parser_create();
xml_parse_into_struct($xml_parser, $data, $vals, $index);
xml_parser_free($xml_parser);     
$params = array();
$level = array();
foreach ($vals as $xml_elem) {
    if ($xml_elem['type'] == 'open') {
        if (array_key_exists('attributes',$xml_elem)) {
            list($level[$xml_elem['level']],$extra) = array_values($xml_elem['attributes']);
        } else {
            $level[$xml_elem['level']] = $xml_elem['tag'];
        }
    }
    if ($xml_elem['type'] == 'complete') {
        $start_level = 1;
        $php_stmt = '$params';             
        while($start_level < $xml_elem['level']) {
            $php_stmt .= '[$level['.$start_level.']]';
            $start_level++;
        }
        $php_stmt .= '[$xml_elem[\'tag\']] = $xml_elem[\'value\'];';
        eval($php_stmt);
    }
}
} 
```

我在这一行收到“未定义的偏移量：1”错误

```
list($level[$xml_elem['level']],$extra) = array_values($xml_elem['attributes']); 
```

据我所知，它向我吐口水的内容如下

```
<Request valid="1">
    <URI>https://sec.paymentexpress.com/pxpay/pxpay.aspx?userid=Samplepxpayuser&amp;request=v5x4Ygc8SJlc3FLYva7pIp6QHqKiSatHN8sNMufz-NNrOGJXn0TJf5TOIVNwQRyNqPo9cPMUfXWJkxjAGGDGDzhkwFD6VxRD2KesUBcmD5ViwVnb4va16zLih9VmKlipvEelGaYsF3fCqudnaWV1abz6f8VNKJOhGeypImjWk9I9xV0-iZh860FPcOam_UVHe81aQ4C2LJKB_znLiWqALSeeOHskI9vxdPOfcsfO7xXOuSMVXsKK6kVX4eZjcODKS1JGKP97fhb4gI2vpR7KUwIGC7U9VkXkPQfAGyYuP1g8x0QR1kC6eNzov3-W48OyvQ1_Fabn8cc1deTrsk6s3bPj3dgrlcXUfnFvmSOemB4rs-ixPDwQcaEsZWQvUcIsaPXAWfQdgtC0dETayY_wVFN8yVmljpCZweiGyNhUHhYGIWLEGuP_Le1HwyHXc_fMaQOeqdZNrFBviCJyWZ2HKferSEwkyQqMmq</URI>
</Request> 
```

有没有人有任何 DPS 经验或知道这里可能出了什么问题？

我得到了结果，但它仍然在我的错误报告中吐出这个错误

**编辑**

这不再需要。此代码现已过时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:35:55.623

替换`eval($php_stmt);`为`if (isset($xml_elem['value'])) { eval($php_stmt); }`

# c# - 在 C# 中使用串行端口从称重桥机获取重量

> ID：12278366
> 
> 赞同：2
> 
> 时间：2012-09-05T09:30:34.510
> 
> 标签：c#, .net, wpf, serial-port

我正在开发使用 C#.Net 从称重桥机获取重量的应用程序。我尝试了很多方法，但是没有从称重桥机读取正确的数据格式重量。我得到的输出就像`?x???????x?x?x??x???x??x???x???x?`从串行端口连续获取一样。我想要要从地磅机上获取重量，我的代码如下所示：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;
using System.IO;

namespace SerialPortTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        String a = "";

        private void button1_Click(object sender, EventArgs e)
        {
        serialPort1 = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);
         serialPort1.DataReceived += new SerialDataReceivedEventHandler(serialPort1_DataReceived);

        if (serialPort1.IsOpen == false)
        {
            serialPort1.Open();
        }
        timer1.Start();
        button1.Enabled = false;
        button2.Enabled = true;
        }

        private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            a = a + serialPort1.ReadExisting();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if (a.Length != 0)
            {
                textBox1.AppendText(a);
                a = "";
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen == true)
            {
                serialPort1.Close();
                button2.Enabled = false;
                button1.Enabled = true;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen == true)
            {
                button1.Enabled = false;
                button2.Enabled = true;
            }
            else
            {
                button1.Enabled = true;
                button2.Enabled = false;
            }
        }
    }
} 
```

我的代码是将串行端口数据中的文本附加到文本框，但它只显示`?xxx?xxxx?xxxx?`

任何人都可以帮助我如何使用 c# 从串口获取重量

感谢您阅读我的帖子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:09:02.950

您正在使用 ReadExisting()，该方法尝试将端口接收到的字节转换为字符串。如果转换失败，您将得到一个问号。默认编码是 ASCII，128 到 255 之间的字节值不是 ASCII 字符，因此会产生 ?

几个可能的原因，大致按可能性顺序排列：

*   使用错误的波特率，尤其是猜测太高。
*   设备可能正在发送二进制数据，而不是字符串。这需要使用 Read() 而不是 ReadExisting 并解码二进制数据。
*   屏蔽不够好的长电缆拾取的电气噪声。通过断开桥端的电缆很容易消除可能的原因。如果这停止了数据，那么它不太可能是噪音。

请务必仔细阅读手册。如果您没有设备或无法理解，请联系设备供应商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-07T06:33:22.173

此代码将在后台连续读取 weightbridge。一定要用串口连接电脑。同样在设计页面 Form1.cs[Design] 中，您需要从工具箱中添加串行端口。这段代码对我有用，我希望它也对你有用......

```
public partial class Form1 : Form
{
    //Initialize the port and background Worker
    private SerialPort port;
    private BackgroundWorker backgroundWorker_Indicator;

public Form1()
{
backgroundWorker_Indicator = new BackgroundWorker();
backgroundWorker_Indicator.WorkerSupportsCancellation = true;
backgroundWorker_Indicator.DoWork += new DoWorkEventHandler(Indicator_DoWork);
//set the port according to your requirement.
port = new SerialPort("COMM2", 2400, Parity.None, 8, StopBits.One);
port.DataReceived += new SerialDataReceivedEventHandler(this.Indicator_DataReceived);
}

//button which starts the method. You can also put the method in Form1_Load() 
private void SerialPortButton(object sender, EventArgs e)
{
StartStopIndicator();
}

 private void StartStopIndicator()
 {
     try
     {
         port.Open();
         backgroundWorker_Indicator.RunWorkerAsync();

     }catch (Exception ea)
         {
         MessageBox.Show("13 "+ea.Message);
         }
  }
  // Not a button. Just a methood.
  private void Indicator_DoWork(object sender, DoWorkEventArgs e)
    {

    }
private void Indicator_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        try
        {
            string str = StripNonNumeric(port.ReadLine());
            UpdateWeightOnUI(str);
        }
        catch (Exception eb)
        {
            MessageBox.Show("12"+eb.Message);
        }
    }
private void UpdateWeightOnUI(string Weight)
    {
        try
        {
            // A label named weightLabel from the toolbox. This will keep updating on weight change automatically
            if (weightLabel.InvokeRequired)
            {
                this.Invoke((Delegate)new Form1.SetTextCallBack(this.UpdateWeightOnUI), (object)Weight);
            }
            else
            {
                weightLabel.Text = Weight;
            }
        }
        catch (Exception ec)
        {
            MessageBox.Show("11"+ec.Message);
        }
    }
// This method will remove all other things except the integers 
private string StripNonNumeric(string original)
    {
        StringBuilder stringBuilder = new StringBuilder();
        foreach (char c in original)
        {
            if (char.IsDigit(c))
                stringBuilder.Append(c);
        }
        return stringBuilder.ToString();
    }
private delegate void SetTextCallBack(string text); 
```

# vba - 如何使用 VBA 添加带有 VBA 代码的新电子表格，使用 VBA

> ID：12278372
> 
> 赞同：4
> 
> 时间：2012-09-05T09:31:07.317
> 
> 标签：vba, excel

我正在创建一个宏，宏功能的一部分是让 VBA 创建一个新的电子表格。由于分布的性质，名称会改变。我需要在这个电子表格中添加代码。无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T13:11:42.383

Jook 已经解释了它是如何工作的。我会更进一步。

添加工作表的语法是

```
expression.Add(Before, After, Count, Type) 
```

如果您查看内置 Excel 的帮助，那么您可以看到`Before`, `After`, `Count`,`Type`代表什么

**来自 EXCEL 的帮助**

**参数**（*所有4个参数都是可选的*）

1.  `Before`- 一个对象，它指定在其之前添加新工作表的工作表。
2.  `After` - 一个对象，它指定在其后添加新工作表的工作表。
3.  `Count` - 要添加的张数。默认值为一。
4.  `Type` - 指定工作表类型。可以是以下 XlSheetType 常量之一：`xlWorksheet`、、、或。如果要插入基于现有模板的工作表，请指定模板的路径。默认值为 xlWorksheet。`xlChart``xlExcel4MacroSheet``xlExcel4IntlMacroSheet`

创建工作表后，您需要使用它`.insertlines`来创建相关过程并嵌入要运行的代码。

**注意 - IMP**：如果您希望代码在 VBA 项目中嵌入代码，您需要确保您选择了“*信任访问 VBA 项目对象模型*”。见快照。

![在此处输入图像描述](../Images/b9f11fb140171bb5e5bc20920aad0659.png)

这是一个示例，我正在创建一个工作表，然后嵌入一个`Worksheet_SelectionChange`代码，该代码将显示一条消息“Hello World”

**代码 - 久经考验**

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim nLines As Long
    Dim VBP As Object, VBC As Object, CM As Object
    Dim strProcName As String

    Set ws = Worksheets.Add

    Set VBP = ThisWorkbook.VBProject
    Set VBC = VBP.VBComponents(ws.Name)
    Set CM = VBC.CodeModule

    strProcName = "Worksheet_SelectionChange"

    With ThisWorkbook.VBProject.VBComponents( _
    ThisWorkbook.Worksheets(ws.Name).CodeName).CodeModule
        .InsertLines Line:=.CreateEventProc("SelectionChange", "Worksheet") + 1, _
        String:=vbCrLf & _
        "    Msgbox ""Hello World!"""
    End With
End Sub 
```

这是运行上述代码后新工作表代码区域的外观。

![在此处输入图像描述](../Images/fcc3337f86bc22ea4b0905a0d05c3ca7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:53:03.430

以下代码将为您添加一个电子表格。

```
Public Sub Workbook_Add()
 Dim wks As Worksheet
 Set wks = ThisWorkbook.Worksheets.Add(, , 1, xlWorksheet)
 With wks
   'set codename of wks
   ThisWorkbook.VBProject.VBComponents(.CodeName).Name = "tblWhatever"
   'set tablename of wks
   .Name = "whatever"
   'add code (untested demo)
   'ThisWorkbook.VBProject.VBComponents(.CodeName).CodeModule.InsertLines 1, "Option Explicit"
   'add code (as of example from excel-help)
   'Application.VBE.CodePanes(1).CodeModule.InsertLines 1, "Option Explicit"
 End With
End Sub 
```

如果您需要将 VBA-Code 添加到这个特定的电子表格中，您应该进一步检查 VBProject 对象 - 查找*CodeModule*，然后查找*InsertLines*。

对您的进一步提示 - 我会尝试使用您的表格的代码名称。它不太可能被更改 - 但一开始在您的代码中使用它可能不太舒服。我不得不习惯它，但对我来说，它比使用表名有很多好处。

希望这可以帮助 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-29T12:46:53.847

默认`.Add`方法在列表的开头添加一个工作表。[正如Siddarth Rout](https://stackoverflow.com/users/1140579/siddharth-rout)所解释的那样，您通常希望在添加代码行之前将其添加*到末尾*。要在您可以使用的任何地方执行此操作：

```
 ActiveWorkbook.Worksheets.ADD  After:=ActiveWorkbook.Sheets(ActiveWorkbook.Worksheets.Count) 
```

如果您定义并设置了 WB，则更易于阅读：

```
 Dim WB as Excel.workbook
  Set WB = ActiveWorkbook
      WB.Sheets.ADD  After:=WB.Sheets(WB.Sheets.Count)
      Set VBC = ActiveSheet     'If using in Siddarth Rout's code above 
```

`Sheets`并且`Worksheets`可以互换，如图所示。

# r - 如何使用 Illustrator 调整 R 中生成的 pdf 图形的大小

> ID：12278373
> 
> 赞同：4
> 
> 时间：2012-09-05T09:31:11.410
> 
> 标签：r, pdf, adobe-illustrator

我正在使用该`pdf()`命令在 R 中绘图。图表在 Acrobat Reader 中看起来很完美并且可以很好地调整大小。我通常的工作流程包括在 Illustrator 中操作标签等，保存`.eps`为提交给出版商或插入 Word。对于单个图表，一切正常。

现在，我试图通过手动将它们放在 A4 Illustrator 文档中来将 4 个图形组合成一个图形。但是，当我在 Illustrator 中调整标准 7x7 英寸 pdf 图形的大小以适合 A4 页面的一列（约 3.4 英寸宽）时，所有比例都被搞砸了，例如线条和符号轮廓变得太粗。在 R 中使用`pdf(..., width=3.4, height=3.4)`会弄乱所有经过精心挑选以生成原始图形的符号和字体大小。为什么我不能在 Illustrator 中调整图形的大小，就像在 Acrobat Reader 中调整 pdf 的大小一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:55:09.837

Illustrator 正在缩放*所有内容*，包括笔触粗细，用于绘制已转换为路径的线条和符号，以及任何未转换为路径的文本的字体大小。（因为我没有 Illustrator，所以我不能说 Illustrator 在打开 pdf 时是否将“文本”视为文本或路径。）

当 Adob​​e Acrobat Reader 显示 pdf 时，它只是显示当前文件的光栅化视图，因此可以根据需要很好地缩放所有内容。

我看到两个选项；直接在 R 中创建 2x2 绘图并将其导出为具有正确尺寸的 PDF，或者减少每个绘图中使用的边距和字体大小，然后使用您显示的命令以所需的宽度/高度导出。

第一个选项可以通过以下方式实现：

```
pdf("attempt1.pdf", ....)
layout(matrix(1:4, ncol = 2, byrow = FALSE)) ## byrow = TRUE for fill-by-row
## all 4 plot calls go in here
layout(1)
dev.off() 
```

您可能需要调整`pdf()`设备中使用的点大小，并稍微调整`cex.???`绘图某些位的设置，以完全按照您的需要进行调整。

或者，您需要减小点大小和边距，并在 3.4 x 3.4 英寸设备上绘制每个图。这样的事情会让你开始：

```
pdf("attempt2.pdf", height = 3.4, width = 3.4, pointsize = 10)
op <- par(mar = c(4,3,3,1) + 0.1) ## one line less per marging
## your single plotting call here
par(op)
dev.off() 
```

请参阅`?par`控制绘图边距的方法列表以及您可能希望设置以控制最终绘图质量的其他参数。您可能希望查看`cex.foo`参数以控制绘图上文本的相对大小，但这都与您在创建`pdf()`设备时设置的基本点大小相关。

# objective-c - NSMutableArray 变空？

> ID：12278375
> 
> 赞同：1
> 
> 时间：2012-09-05T09:31:17.407
> 
> 标签：objective-c, nsmutablearray

我注意到，即使我的代码运行良好，也会发生一些奇怪的事情。

假设我有两个数组：`passwordEntered`和`tempPasswordEntered`.

在我得到一个新的之后`passwordEntered`，我每次都这样做：

```
 tempPasswordEntered=[passwordEntered mutableCopy]; 
```

然后我清理：

```
 [passwordEntered  removeAllObjects]; 
```

然后，下次我再次这样做（对于新的`passwordEntered`）：

```
 tempPasswordEntered=[passwordEntered mutableCopy]; 
```

所以`tempPasswordEntered`只有最后一个`passwordEntered`，而不是两者。如果第一次它在数组中有 4 个位置，第二次它仍然有 4 个位置，所以我的问题是，副本会替换数组吗？它没有像你一样添加到它的最后一个位置`addObject`吗？

另一件事：我应该`retain`改用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:38:48.313

该行`tempPasswordEntered=[passwordEntered mutableCopy];`是一个变量赋值，和其他赋值一样，它完全改变了变量的值。在这种情况下，`tempPasswordEntered`now 指向 的副本`passwordEntered`，其中只有一个对象。所以是的，它确实替换了数组，就像任何其他分配一样。

如果您想将对象添加`passwordEntered`到中`tempPasswordEntered`，请尝试`[tempPasswordEntered addObjectsFromArray:passwordEntered]`.

听起来你想要的是`mutableCopy`，不是`retain`，但我真的不知道你的要求到底是什么，所以我不能多说。无论如何，您可能应该使用 ARC :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:57:55.247

```
NSArray *retVal = [[NSArray alloc] initWithArray:fetchResults];
NSArray *retVal = [[NSArray alloc] initWithArray:[fetchResults copy]];
NSArray *retVal = [[NSArray alloc] initWithArray:[fetchResults retain]]; 
```

后两者是简单的泄漏。第一种是制作副本的一种方式，但是 retVal = [fetchResults copy]; 是制作副本的更好方法。

但是，当然，您根本不需要副本。那不是问题。你接着说唯一不会崩溃的是一个空的结果集。

这表明两件事之一；您的结果集已损坏（不太可能），或者您访问结果集不正确（可能）。

# magento - 如何为特定的控制器操作设置 url - Magento

> ID：12278377
> 
> 赞同：1
> 
> 时间：2012-09-05T09:31:26.137
> 
> 标签：magento

如果我有模块 mymodule ，其中有索引控制器。在其中我有 subaction 作为 'subaction'

通常我访问页面为

```
 http://www.mywebsite/index.php/mymodule/index/subaction 
```

如何从代码中设置 url，例如

```
 http://www.mywebsite/index.php/subaction
   or
   http://www.mywebsite/index.php/mymodule/subaction 
```

注意 :: 我不想在同一个索引控制器中创建新的控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:48:37.723

Magento URL 到控制器的匹配通过标准路由器工作，该路由器期望 URL 具有特定的形式。如果您想改变这一点，您有几个选择：

1.  已弃用的基于配置的 URL 重写
2.  在 core_url_rewrite 表中创建 URL 重写条目
3.  创建一个自定义路由器类以匹配您要使用的 URL 模式

在考虑 URL 匹配应该如何工作时，您需要考虑 Magento 将如何使用其原生 URL 计算工具构建 URL，以及如何获取匹配的请求。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-05T10:41:46.893

您可以通过使用路线来做到这一点

在您的引导程序中执行以下操作

```
protected function _initMyRoutes() {
    $this->bootstrap('frontController');
    $front  = $this->getResource('frontController');
    $router = $front->getRouter();

    $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini', APPLICATION_ENV);
    $router->addDefaultRoutes();
    $router->addConfig($config, 'routes');

    return $router;

} 
```

并在 configs 目录中创建一个名为 routes.ini 的文件，并在其中放置以下内容

```
routes.myRoute.type = "Zend_Controller_Router_Route_Static"
routes.myRoute.route = "/subaction/" 
routes.myRoute.defaults.module = "mymodule"
routes.myRoute.defaults.controller = "index"
routes.myRoute.defaults.action = "subaction" 
```

或者

您可以直接在引导程序中添加路线

```
protected function _initMyRoutes() {
    $this->bootstrap('frontController');
    $front  = $this->getResource('frontController');
    $router = $front->getRouter();
    $router->addDefaultRoutes();

    $route = new Zend_Controller_Router_Route_Static(
        'subaction',
        array('module' => 'mymodule', 'controller' => 'index', 'action' => 'subaction')
    );
    $router->addRoute('subaction', $route);

    return $router;

} 
```

这应该可以解决问题，但建议使用路线真的很痛苦。

[ZF 手册中有关路线的更多信息](http://framework.zend.com/manual/1.11/en/zend.controller.router.html)

# ruby - 在不同的目录中加载 ruby 文件？错误“无法加载此类文件”

> ID：12278381
> 
> 赞同：0
> 
> 时间：2012-09-05T09:31:33.700
> 
> 标签：ruby, function, load, relative-path

它需要先进入父目录，然后进入另一个父目录，然后进入不同的子目录 > 子目录 > thefile.rb。

我浏览了一些帖子，所有这些似乎都是文件位于几乎相同的目录中。

目前我有

```
load '../../lib/classes/X.rb'
load '../../lib/classes/Y.rb'
load '../../lib/modules/Z.rb' 
```

每次我收到错误“无法加载此类文件”

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:28:08.463

值得尝试先在 irb 中加载文件，看看您是否有语法或任何不正确的地方。我只是尝试编写与您几乎完全相同的内容（目录名称不同），但一切正常。

```
irb(main):002:0> load '../../Work/Z.rb'

=> true 
```

# macos - AudioQueue 缓冲区在回调中为空

> ID：12278383
> 
> 赞同：2
> 
> 时间：2012-09-05T09:31:39.493
> 
> 标签：macos, cocoa, core-audio, audio-streaming, audioqueue

我正在使用 AudioQueue 来读取 AudioBuffer，它间接地从 Mic 读取音频输入，但似乎 Callback 没有命中，

以下是简要的逻辑

1-- 运行音频线程

2 -- 创建音频队列

3 -- 配置音频队列，

4 -- 处理回调

5 -- 当用户想要停止音频流时，

6 -- 停止音频队列

7 -- 停止线程

如果需要，将为您提供代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:35:47.347

我有同样的问题，看来，如果你在“C”线程中创建 AudioQueue，它可能不会调用回调，这可能就是问题所在，

# ios - 带有蓝牙 4.0 的 iOS XCode 模拟器

> ID：12278387
> 
> 赞同：1
> 
> 时间：2012-09-05T09:32:04.660
> 
> 标签：ios, xcode, bluetooth, bluetooth-lowenergy

我有一个关于在 iOS 模拟器中使用 BLE 的问题。

我按照这些说明使用 BLE 设置 XCode 模拟器：http: [//developer.apple.com/library/ios/#technotes/tn2295/_index.html](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html)

我使用带有内置 BLE 和 CSR USB BLE Dongle 的 Macbook Pro Retina。Mac OS X 发现 USB 加密狗，因为它显示在系统信息中。

之后我输入这个命令：

sudo nvram bluetoothHostControllerSwitchBehavior="never"

再次拥有博通芯片。

当我启动 XCode 时，无法打开蓝牙，它总是在旋转，我总是在调试时得到这个：-[CentralManager state] 将返回 CBCentralManagerStatePoweredOff

那么这里有什么问题呢？

感谢帮助！

再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:04:37.080

我有一个类似的问题。拔下然后重新插入 CSR USB BLE 加密狗会导致模拟器立即从旋转切换到开启。

# android - Android ActionBarSherlock - 如何更改 API <3.0 的主题以及 API >=3.0 的主题

> ID：12278389
> 
> 赞同：1
> 
> 时间：2012-09-05T09:32:04.903
> 
> 标签：android, styles, actionbarsherlock

我在我的应用程序上做了一个新主题，父主题是 Theme.Sherlock.Light。在 API <3.0 的设备上，更改正在运行，但是当应用程序在设备 >=3.0（在本例中为 4.0.3）上运行时，我的新样式不起作用，仍然使用原始 Theme.Sherlock.Light。

如何制作影响 API <3.0 且设备 >=3.0 的设备中的样式的 xml 样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:34:24.057

使用 ActionBarSherlock，您需要声明您的样式两次：一次*使用*，一次*不*使用-`android:`前缀。

请参阅此处的示例：http: [//actionbarsherlock.com/theming.html](http://actionbarsherlock.com/theming.html)

# php - 使用 Javascript/PHP 更新 HTML 元素

> ID：12278392
> 
> 赞同：0
> 
> 时间：2012-09-05T09:32:08.227
> 
> 标签：php, javascript, ajax

我是 PHP 新手，我来自 C/C++ 背景，我遇到了一个问题，我已经绊倒了一段时间。

我的 html 文件中有这段代码：

```
<div class="totaal clearfix">
<div class="border-left"></div>
<div class="content-totaal">
    <h2 class="vk"><?php echo $locLocal["lbl_totaal"]; ?></h2>
    <div class="totalekost" id="ajax_placeholder_total">
        <span id="prijs_totaal">
            <?php 
                $winkelwagentje->berekenTotaal();
            ?>
        </span> EUR
    </div>
</div>
<div class="border-right"></div> 
```

更进一步，我有这段代码，当页面上的列表框更改时，它应该更新。

```
<script type="text/javascript">    
$('cb_verzendoptie').observe('change', function(event)
{
    var _verzendoptie = this.getValue();

    new Ajax.Updater( 'ajax_placeholder_port', 'ajax/berekenVerzendingskosten.php',
                                  { parameters: { verzendoptie: _verzendoptie},
                                  });

    $('ajax_placeholder_total').update("<?php echo date(DATE_RFC822); ?>" + " EUR" );                                      
}); 
```

我放置了“回显日期（DATE_RFC822）”来测试更新是否每次都会触发。那是我的问题，不是。他重复了一次日期和时间，但从那时起，由于某种原因，更新不再触发。日期时间保持不变。

奇怪的是，每次我的下拉框更改值时，此行上方的 Ajax.Updater 方法都会更新。我真的不知道为什么...

**编辑：**

日期只是存根数据，而不是我通常需要一个带有变量的 php 类的日期。变量在语句上方的 Ajax.Updater 方法中更新。但我没有改变。这就是为什么我尝试使用日期来查看语句是否更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:38:59.347

JavaScript在客户端工作，PHP在服务器端工作，每次你的javascript运行时，你的echo语句不会执行，它在服务器端执行一次，并发送到浏览器。如果要获取当前日期，可以使用 JavaScript 的[Date 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:43:51.867

`$('ajax_placeholder_total').update("<?php echo date(DATE_RFC822); ?>" + " EUR" );`?

jQuery的这段代码意味着这样的元素：

```
<ajax_placeholder_total>

</ajax_placeholder_total> 
```

将被更新。

实际上，这甚至不会更新，因为您的选择器不是唯一的。

您最可能想要或需要做的`#`是`.`在`ajax_placeholder_total`.

看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:22:05.100

我同意@janith 使用日期对象来更新`$('ajax_placeholder_total').update`函数

此外，您每次更改时都在执行 Ajax.Updater 函数，因此它每次都发生。

您可以设置一些条件来检查值是否更改，然后只执行 Ajax.Updater

```
$('cb_verzendoptie').observe('change', function(event)
{
    var _verzendoptie = this.getValue();
    if(// ur logic){
         new Ajax.Updater( 'ajax_placeholder_port', 'ajax/berekenVerzendingskosten.php',
                                  { parameters: { verzendoptie: _verzendoptie},
                                  });

          $('ajax_placeholder_total').update("<?php echo date(DATE_RFC822); ?>" + " EUR" );                                      

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T09:34:53.393

您回显从 PHP 输出 JavaScript 并发送到浏览器的日期（而不是调用 JS 函数的时间），因此它将始终显示页面的生成时间。

Ajax 的东西发出一个新的 HTTP 请求，因此每次运行时它都会从服务器获取新数据。

# java - 客户端上的 GWT HTTP 会话可用性

> ID：12278395
> 
> 赞同：3
> 
> 时间：2012-09-05T09:32:16.603
> 
> 标签：java, gwt, rpc, httpsession

这是在 GWT 中进行 RPC 调用以获取 HTTP 会话属性的唯一方法吗？

有什么方法可以直接在客户端代码中获取它们而不进行 rpc 调用？

如果浏览器正在维护会话，为什么我们需要再次访问服务器获取会话变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:02:09.517

> 这是在 GWT 中进行 RPC 调用以获取 HTTP 会话属性的唯一方法吗？

要获取会话属性，您可以使用不同的方法（例如使用 JSON）。GWT-RPC 只是通过标准 HTTP 将 Java 对象传入和传出服务器的一种机制。阅读这篇文章：[与服务器通信](https://developers.google.com/web-toolkit/doc/2.1/tutorial/clientserver)。

> 有什么方法可以直接在客户端代码中获取它们而不进行 rpc 调用？

很快，除非您从服务器检索它们，否则您将无法访问它们。因为所有 GWT 应用程序在最终用户的 Web 浏览器中作为 JavaScript 代码运行，但会话存在于服务器端。所以你必须从你的服务器上问他们。

> 如果浏览器正在维护会话，为什么我们需要再次访问服务器获取会话变量？

您对会话有错误的看法，它们不是由您的浏览器维护的。为了控制会话，您必须使用异步回调或其他技术调用服务器端。或者，如果您指的是[客户端 Web 会话，您可以使用](http://en.wikipedia.org/wiki/Session_%28computer_science%29#Client_side_web_sessions)[Cookie](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/Cookies.html)来控制它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:38:12.767

浏览器没有会话变量！它只有会话标识符（通常保存在 cookie 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:48:28.713

```
HttpSession session = RemoteServiceUtil.getThreadLocalRequest().getSession(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T12:48:31.170

我认为您可能只想设置 cookie 值以匹配您的某些会话值。您可以在身份验证时执行此操作并使用

```
public boolean authentication() {
   // Do authentication stuff
   getResponse().addCookie(new Cookie("SOMESESSIONID", session.getId()));
}

public HttpServletResponse getResponse() {
    return RemoteServiceUtil.getThreadLocalResponse();
} 
```

然后在客户端，您可以简单地使用 Cookie 类来获取这些值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T13:19:01.037

会话仅在服务器端可用，GWT 在 Js 中编译 java，因此我们不能在客户端使用会话。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-05T09:54:03.163

阅读[谷歌群组帖子 - 同步呼叫](https://groups.google.com/forum/?fromgroups=#!topic/Google-Web-Toolkit/2SnZ6wzkJ_k)

> GWT 不会做任何努力让您轻松地做到这一点。您必须编写自己的 RequestBuilder 扩展来允许同步请求。
> 
> 同步请求的问题在于它们往往会阻止浏览器等待响应，从而使您的应用程序看起来像是被锁定了。这是特别糟糕的应用程序设计。您无法控制客户端机器或它与服务器之间的网络，因此甚至无法决定您的应用程序将被锁定多长时间。
> 
> 因此，最好的办法是简单地使用异步方法并通过提供的回调继续执行。您最终将获得更好的用户体验和更专业的应用程序。

# javascript - 如何在 Safari 中使用 JavaScript 保存大 (8MB) 文件？

> ID：12278397
> 
> 赞同：3
> 
> 时间：2012-09-05T09:32:25.933
> 
> 标签：javascript, html, safari, download

我正在寻找一种在 Safari 中保存大文件（正好 8 兆字节）的方法。我已经尝试使用 URI 方案以及 eligreyFileSaver 和 flash 插件 Downloadify。所有这些都会导致 Safari 分配内存，直到 web worker 进程达到大约 2 GB，然后 Safari 崩溃。

我意识到以前有这样的问题，但我已经尝试了这些问题导致的所有问题。链接：

*   [使用 HTML5/Javascript 生成和保存文件](https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file)
*   [如何使用 JavaScript 在客户端保存文件？](https://stackoverflow.com/questions/8080929/saving-a-file-at-client-side-using-javascript)
*   [在客户端的 chrome 中使用 javascript 创建文件](https://stackoverflow.com/questions/7160720/create-a-file-using-javascript-in-chrome-on-client-side)

此代码适用于 Firefox 和 Google Chrome（使用 eligreyFileSaver 库进行 saveAs）：

```
function io_saveData (){
    var bb;
    var buffer;
    var data;

    alert ("The file will now be saved.");

        bb = new BlobBuilder();
        for (var i = 0;i<kMapHeight;i++){
            var stduint8 = new Uint8Array (uint16map[i].buffer);
            var stduint8LittleEndian = new Uint8Array (kMapWidth*2);

            //byte swap work around
            for (var j = 0;j<stduint8.length;j+=2){
                stduint8LittleEndian [j] = stduint8 [j+1]
                stduint8LittleEndian [j+1] = stduint8 [j];

            }

            bb.append(stduint8LittleEndian.buffer);
        }

        var blob = bb.getBlob("example/binary");
        saveAs(blob, "Data File");

        bb = null;
        buffer = null;
        data = null;
} 
```

我正在寻找一种让 Safari 创建下载而不会崩溃的方法。部署区域是 Mac OS X，所以每台机器都会内置 apache 和 PHP，不过我宁愿不走那条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:50:17.937

干得好。首先将文件存储在 HTML5 文件系统中，并在完成数据存储后使用 filesaver api 下载它。我进行了研究，并且在没有阻止 UI 和浏览器崩溃的情况下获得了很好的结果。最好在 webworkers 中进行以获得应用程序的性能。

这是对它有帮助的文章。

```
TEMPORARY storage has a default quota of 50% of available disk as a shared pool. (50GB => 25GB) (Not restricted to 1GB anymore) 
```

[http://updates.html5rocks.com/tag/filesystem](http://updates.html5rocks.com/tag/filesystem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T17:42:42.027

不幸的是，Safari7 似乎不支持写入文件。

[https://github.com/eligrey/FileSaver.js/issues/12](https://github.com/eligrey/FileSaver.js/issues/12)

[http://caniuse.com/#feat=文件系统](http://caniuse.com/#feat=filesystem)

# mongodb - MongoDB 索引创建超过 100% 并且似乎永远循环

> ID：12278398
> 
> 赞同：1
> 
> 时间：2012-09-05T09:32:26.730
> 
> 标签：mongodb, indexing

我有一个大约 550 万条记录的 MongoDB 集合。我尝试索引它，无论是在单个字段上还是使用复合索引都失败了，因为索引过程正常进行，但是当它达到 100% 我认为它应该停止时，它超过 100% 并继续。我已经让它运行了 10 个小时，但它从未结束。

我尝试索引的字段是 long 或 double。

我在 x64 Windows 上运行最新的 MongoDB 版本。

我认为这是不正常的行为是否正确？有什么想法我能做什么？

```
Wed Sep 05 10:22:37 [conn1]             415000000/5576219       7442%
Wed Sep 05 10:22:48 [conn1]             417000000/5576219       7478%
Wed Sep 05 10:22:59 [conn1]             419000000/5576219       7514% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:46:00.293

根据 mongodb-users 列表的有用建议：

这可能是由于磁盘空间不足并因此导致数据库损坏。

我所做的是清理磁盘空间，然后运行“mongodump --repair”，然后运行“mongorestore”。

# android - 在android中检索电话号码

> ID：12278400
> 
> 赞同：1
> 
> 时间：2012-09-05T09:32:32.080
> 
> 标签：android

这是下面的代码来检索电话号码 wwas 能够在三星 4.0.4 上得到它，但是在 htc one v mobile 上得到以下错误..任何线索？

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

TextView textDeviceID = (TextView)findViewById(R.id.deviceid);

TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);

textDeviceID.setText(getMy10DigitPhoneNumber(telephonyManager));

}
private String getMyPhoneNumber(){
 TelephonyManager mTelephonyMgr;
 mTelephonyMgr = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
 return mTelephonyMgr.getLine1Number();
 }

 private String getMy10DigitPhoneNumber(TelephonyManager telephonyManager){
 String s = getMyPhoneNumber();
 return s.substring(0);
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:53:49.877

根据文档`.getLine1Number()`“*返回第 1 行的电话号码字符串，例如，GSM 电话的 MSISDN。如果不可用，则返回 null。* ”

显然`.getLine1Number()`是从 SIM 卡中读取此信息，因此如果运营商设置了 MSISDN 字段，它将返回其值，如果他们没有设置此字段，则返回 null。

在您的情况下，您的 SIM 卡可能没有由运营商填充此字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:11:53.137

```
TelephonyManager mTelephonyMgr;
mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String mblNumber = mTelephonyMgr.getLine1Number(); 
```

**注意：不要忘记在 AndroidManifest.xml 文件中添加 READ_PHONE_STATE 权限：**

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission> 
```

# php - OAuth 代理 - 我们应该代理所有内容还是仅代理身份验证？

> ID：12278401
> 
> 赞同：2
> 
> 时间：2012-09-05T09:32:36.933
> 
> 标签：php, oauth, proxy

我们正在构建一个 SaaS 应用程序，我们称之为[http://mysaasapp.com](http://mysaasapp.com)。当用户注册时，他们使用子域名[http://myinstance.mysaasapp.com](http://myinstance.mysaasapp.com)或自定义域名[http://instance.mycompany.com](http://instance.mycompany.com)等访问他们的实例。

我们正在考虑与其他服务（Facebook、Twitter 等）集成，以便我们的用户可以在他们的实例中链接到这些服务上的帐户。Twitter 在涉及 OAuth 重定向回调时非常宽松（我们可以在发出 OAuth 请求时设置回调/重定向 URL）。然而，Facebook 并不那么宽松，回调/重定向域是在 facebook.com 上的应用程序配置中设置的

当用户在他们的实例上使用自定义域名时，他们可以选择使我们网站上的子域 (http://myinstance.mysaasapp.com) 处于非活动状态。这意味着我们不能将 OAuth 的回调域设置为 mysaasapp.com 并期望它能够正常工作。

解决方案是使用 OAuth 代理 (http://proxy.mysaasapp.com)。我们之前使用[过 HybridAuth](http://hybridauth.sourceforge.net/index.html)，我们相信我们应该能够轻松地将其变成 OAuth 代理。

话说回来：

*   我们应该使用 OAuth 代理来仅代理 Auth 请求吗？一旦我们获得访问令牌，我们应该继续通过代理代理请求还是应该直接从我们的实例连接到提供者？换句话说，是否有任何 OAuth 安全 API 将 API 调用（在身份验证后）限制为某些定义的域？

*   我应该如何保护 OAuth 代理，以便请求只能来自我们的应用程序实例，而响应只能转到我们的应用程序实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:41:02.200

所以这就是我最终要做的。

我创建了一个非常简单的网络应用程序，它是围绕 HybridAuth 构建的。这个 web 应用程序将托管在 oauth.mydomain.com 上。

发生的情况是，当他自己的实例中的用户想要连接到诸如 Facebook 之类的提供者时，应用程序实例通过发布提供者类型和一些其他信息来建立到 oauth.mydomain.com 的服务器到服务器连接。代理返回一个令牌。

然后，我们将用户重定向到 oauth.mydomain.com，同时将令牌作为 get 参数传递。oauth.mydomain.com 使令牌无效并将信息存储在用户的会话中。

然后，用户继续向提供者进行身份验证。成功后，oauth.mydomain.com 会将消费者令牌和密钥发布回特定端点的实例。

发布完成后，我们会将他们重定向回他们在 theirdomain.com 上的页面

我决定不代理所有请求（仅代理身份验证请求），因为这是一种简单的方法，并且提供者（至少我看过的那些）仅在身份验证过程中实现了域限制。

# javascript - 如何在 Web 浏览器和 XCode 中使用 JavaScript 运行 HTML 文件？

> ID：12278402
> 
> 赞同：3
> 
> 时间：2012-09-05T09:32:40.380
> 
> 标签：javascript, iphone, html, cordova, xcode4.3

我想使用 phonegap Cordova 2.0 创建 iPhone 应用程序。现在`i wrote Javascript external and HTML code`。然后我把`JavaScript code into the HTML5 file`. 现在我想在网络浏览器上运行 HTML 文件。当我在浏览器中运行 HTML 时，Javascript 不起作用。浏览器显示 HTML 中的任何内容。所以你能帮我吗`run the HTML5 file with JavaScript on the browser and in XCode Phonegap`？

下面的编码是 JavaScript 编码。

```
 var bodyLoaded = function()
 {
    document.addEventListener("deviceready", onDeviceReady, false);
 }

    // Cordova is ready
    //
    function onDeviceReady() {
        var options = new ContactFindOptions();
        options.filter="";
        filter = ["displayName","organizations"];
        navigator.contacts.find(filter, onSuccess, onError, options);
    }

    // onSuccess: Get a snapshot of the current contacts
    //
    function onSuccess(contacts) {
        for (var i=0; i<contacts.length; i++) {
            for (var j=0; j<contacts[i].organizations.length; j++) {
                alert("Pref: " + contacts[i].organizations[j].pref + "\n" +
                        "Type: " + contacts[i].organizations[j].type + "\n" +
                        "Name: " + contacts[i].organizations[j].name + "\n" + 
                        "Department: "  + contacts[i].organizations[j].department + "\n" + 
                        "Title: "  + contacts[i].organizations[j].title);
            }
        }
    };

    // onError: Failed to get the contacts
    //
    function onError(contactError) {
        alert('onError!');
    } 
```

下面的编码位于我的 HTML5

```
 <!DOCTYPE html>
<html>
  <head>
 <meta charset="utf-8" /> 

    <title>Contact Example</title>
    <script type="text/javascript" charset="utf-8" src="Contectscript.js"></script>

  </head>
  <body>
    <body onload='alert(1);'>
    <body onload='bodyLoaded();'>
    <h1>Example</h1>
    <p>Find Contacts</p>
  </body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:15:42.480

好的，所以您正在开发一个 PhoneGap 应用程序。

在PhoneGap 中有一个特殊的事件叫做“deviceready”，它在PhoneGap 完全加载时触发。

在此事件触发之前不要调用任何 PhoneGap 函数，这一点非常重要。功能可能尚未加载。

你的问题是：

1.  您正在尝试在浏览器中测试 javascript。PhoneGap 提供从您的手机到您的应用程序的服务。由于您是从 Web 浏览器运行它，因此没有电话可以提供服务。您不能简单地在 Web 浏览器中运行您的应用程序。

2.  您没有引用 phonegap.js。PhoneGap 有一个 javascript 部分，您的应用程序必须加载该部分才能工作。您应该在自己的脚本之前有一行`<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>`（当然文件名可能会因您使用的 phonegap 版本而异，它可以称为 cordova.js）。

3.  您的 html 包含愚蠢的东西。有 3 个开口体标签。应该只有 1 个。您需要这样的 HTML：

    ```
    <!DOCTYPE html>
    <html>
      <head>
      <meta charset="utf-8" /> 
        <title>Contact Example</title>
        <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
        <script type="text/javascript" charset="utf-8" src="Contectscript.js"></script>
      </head>
      <body onload="bodyLoaded();">
        <h1>Example</h1>
        <p>Find Contacts</p>
      </body>
    </html> 
    ```

如何解决这些问题？

1.  在 XCode 中开发。有一个内置的模拟器。它也为你做管道。无需您的外部网络浏览器。在您的问题中，您已经谈到了 XCode，所以这可能是一个不错的选择。阅读这篇关于在那里设置和运行项目的文章：http: [//www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-xcode-for-ios.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-xcode-for-ios.html)

2.  使用[波纹模拟器](http://ripple.tinyhippos.com/)。它是一款专为在 google chrome 浏览器中模拟手机而设计的模拟器。它可以让您的应用程序相信它作为 PhoneGap 应用程序在您的手机中运行，并且您的手机的所有功能都可用，如加速度计、gps 等。它还为您模拟 deviceready 事件。:)

就像每个框架一样，研究[文档](http://docs.phonegap.com/en/edge/guide_getting-started_index.md.html#Getting%20Started%20Guides)是一个非常好的主意。有一个很好的入门指南，您可以找到有关 PhoneGap 的每个问题的答案。

请阅读并研究我为您提供的链接。它将帮助您了解您正在尝试做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:40:56.410

首先，尝试：

```
<body onload='alert(1);' ...> 
```

是否反应正确。然后继续：

```
var bodyLoaded = function() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

<body onload='bodyLoaded();'> 
```

# sql - 加入两个 SQL 查询，其中第二个只返回一行和一列

> ID：12278403
> 
> 赞同：0
> 
> 时间：2012-09-05T09:32:43.257
> 
> 标签：sql, join

我有一个查询，它返回以下格式的作业列表：

```
JobName    Weight
-----------------
3484       2958
7843       6833
0065       6768 
```

我还有另一个选择查询（查看另一个表），它总是返回正在运行的当前作业的名称。

```
Current_Job
-----------
0065 
```

如何结合这两个查询来生成以下内容？

```
JobName    Weight      Current_Job
----------------------------------
3484       2958        0065
7843       6833        0065
0065       6768        0065 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:37:57.773

那将是

```
SELECT * 
  FROM Table1 CROSS JOIN 
       Table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:35:43.767

```
SELECT JobName, Weight, Current_Job
FROM (yourfirstquery) q1, (yoursecondquery) q2 
```

# c# - vsto + 无法从 RTF 电子邮件中获取附件的文件名

> ID：12278411
> 
> 赞同：2
> 
> 时间：2012-09-05T09:33:16.957
> 
> 标签：c#, outlook, vsto, outlook-addin

我正在保存邮件中的附件。我首先检查正文格式，以便我只得到真正的附件。请忽略下面的 if else 语句，仅将注释作为下一个语句。一旦我解决了我的问题，我会编写代码。现在，我的问题是在获取 RichText 正文格式邮件附件的文件名时出现此错误。一切都很好，都是纯 HTML 格式。

'currentMailItem.Attachments[1].FileName' 抛出类型为 'System.Runtime.InteropServices.COMException' 的异常基础 {System.Runtime.InteropServices.ExternalException}：{“Outlook 无法对此类附件执行此操作。”}

```
public static void SaveData(MailItem currentMailItem)
{
    if (currentMailItem != null)
    {       
        string PR_ATTACH_METHOD = "http://schemas.microsoft.com/mapi/proptag/0x37050003";
        string PR_ATTACH_FLAGS = "http://schemas.microsoft.com/mapi/proptag/0x37140003";

        if (currentMailItem.Attachments.Count > 0)
        {
            for (int i = 1; i <= currentMailItem.Attachments.Count; i++)
            {
                var attachMethod = currentMailItem.Attachments[i].PropertyAccessor.GetProperty(PR_ATTACH_METHOD);
                var attachFlags = currentMailItem.Attachments[i].PropertyAccessor.GetProperty(PR_ATTACH_FLAGS);

                if (currentMailItem.BodyFormat == OlBodyFormat.olFormatPlain)
                    //no attachment is inline
                else if (currentMailItem.BodyFormat == OlBodyFormat.olFormatRichText)
                {
                    if (attachMethod == 6)
                        //attachment is inline
                    else
                        //attachment is normal
                }
                else if (currentMailItem.BodyFormat == OlBodyFormat.olFormatHTML)
                {
                    if (attachFlags == 4)
                        //attachment is inline
                    else
                        //attachment is normal
                }
                currentMailItem.Attachments[i].SaveAsFile(@"C:\TestFileSave\" + currentMailItem.Attachments[i].FileName);
            }
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-25T22:58:40.630

对于 RTF 格式，您已经嵌入了 RTF 正文使用的 OLE 对象，以显示附件预览并就地编辑它。您可以按附件类型（Attachment.Type == olAttachmentType.olOLE (6)）过滤掉此类附件，也可以使用任一方法提取附件数据

1.  扩展 MAPI（仅限 C++ 或 Delphi）- 调用 IAttach::OpenProperty(PR_ATTACH_DATA_OBJ, IID_IStorage, ...) 以将附件数据作为 IStorage 打开，然后从 IStorage 流之一中提取文件数据。确切的流名称和格式取决于用于创建它的特定应用程序（Word、Adobe、Paintbrush、Excel 等）。您可以在[OutlookSpy](http://www.dimastr.com/outspy)中查看数据：选择带有类似附件的邮件，单击 OutlookSpy 功能区上的 IMessage 按钮，转到 GetAttachmentTable 选项卡，双击附件，选择 PR_ATTACH_DATA_OBJ 属性，右键单击，选择 OpenProperty，选择 IID_IStorage .

2.  [赎回](http://www.dimastr.com/redemption)（任何语言）：它的[RDOAttachment](http://www.dimastr.com/redemption/RDOAttachment.htm)对象足够智能，可以在您调用 SaveAsFile 或访问 FileName 属性时提取 OLE 附件的实际文件数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T22:39:53.950

这可能是个老问题...

我见过类似的问题。如果图像附加在富文本格式的 mailItem 的正文中，那么我会得到类似的异常。

但是，如果附件不是图像，比如说 .doc 扩展名，那么我看不到错误。据我了解，问题在于获取附加图像的文件名。一些 Outlook 不知道如何从富文本格式的电子邮件项目中获取正文附加图像的文件名。

# android - 如何在文字前上传图片

> ID：12278412
> 
> 赞同：0
> 
> 时间：2012-09-05T09:33:19.007
> 
> 标签：android

添加`Checkboxes`和`RadioButton`s 并且我想在文本之前添加图像

请参阅此 [http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

```
final CharSequence[] gender = {"Gmail","Facebook","Twitter","Exit"};
        AlertDialog.Builder alert = new AlertDialog.Builder(DetailPage.this);
        alert.setTitle("Select Type");

        alert.setCancelable(false);

        alert.setSingleChoiceItems(gender,-1, new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int which) 
            {
                if(gender[which]=="Gmail")
                {
}
}
} 
```

这是我的源代码我想在它的文本之前添加 gmail、facebook 和 twitter 图标你

请告诉我我将如何做到这一点请根据我尝试过的代码发布代码但是

无法理解。帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:53:35.563

您最好的选择是创建一个带有自定义视图的对话框，查看[此链接](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)以获取更多信息。

# c# - 如何在 SQL Server 数据库中存储和检索数学表达式？

> ID：12278418
> 
> 赞同：0
> 
> 时间：2012-09-05T09:33:44.493
> 
> 标签：c#, sql-server, winforms, math, expression

如何从 SQL Server 数据库中存储和检索数学表达式？我正在从 ms word 中复制这些公式，并在 c# 代码中的 winforms 中使用富文本框将其存储在我想要将它们推送到 SQL Server 数据库中并将其拉回以显示在 ASP.NET Web 应用程序中的位置。有什么想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:07:09.050

好吧，这是一个长期悬而未决的帖子，我几乎忘了输入答案。这很简单，我使用 RichTextBox 及其 .Rtf 属性来实现这一点。

# php - 将 CMS 与外部数据库一起使用

> ID：12278419
> 
> 赞同：0
> 
> 时间：2012-09-05T09:33:45.923
> 
> 标签：php, sql, database, drupal, expressionengine

我正在考虑使用 CMS 构建一个外部站点，可能是[Drupal](http://drupal.org/)或[ExpressionEngine](http://expressionengine.com/)。问题是我们公司已经有一个会员数据库，旨在与我们现有的企业软件一起使用，目前会员数据库包含超过 40 万行。

手动从数据库迁移数据不是一种选择，因为修改和新数据必须可以实时访问。因为外部数据库的设计将与 CMS 自己的不同，所以我决定最好的方法是使用两个数据库并强制 CMS 使用外部来读取用户信息（无法写入），并使用本地来读取 CMS 的所有其他内容需要做（读+写）。

这些 Drupal 或 ExpressionEngine 是否可行？理想情况下，我需要能够使用`hooks`，因为我不想修改核心 CMS 文件。筛选文档时，我无法找到我会为 ether CMS 挂钩的内容。

*（注意：我知道这是可能的，但我想知道它是否**可行**）。*

最后，如果有更好的方法来处理这种情况，也请加入。也许在数据库级别有一些东西可以引用外部数据库中的列？

我正抓着稻草，我敢肯定，有人可以为我指明正确的方向。

**编辑：** [Moodle](http://moodle.org/)内置了此功能。Moodle 不适合我的需要，但也许他们的文档会帮助您更好地理解我的问题：[Moodle - 外部数据库身份验证](http://docs.moodle.org/23/en/External_database_authentication)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:56:44.697

If the data is to remain in an external database, then you probably want to look at creating a web service like an API that allows your external site to access the data. Queries to an external database or notoriously slow.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:59:13.497

我不是 Drupal (D)/ExpressionEnginge (EE) 专家。

对于 TYPO3（我深入了解）（我认为也适用于 D&EE），您可以编写自己的扩展程序，从您的会员数据库中获取用户数据并将它们存储在本地前端或后端用户表中以供临时使用。验证。我们已经为大型金融机构构建了这样的东西，即使是单点登录并根据远程组设置相应的权限。有很多 TYPO3 扩展可以用作示例。

另一种可能性是再次避免实时功能，并在数据库级别使用同步脚本，以例如 5 分钟的节奏使用 D 或 EE 用户表检查成员表。

还可以选择使用 LDAP 身份验证。

如果数据库都是 MySql，那么您可以创建一个指向远程成员表的视图，您只需要实现正确的列。

修改核心总是一个坏主意。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:38:36.257

在 MySQL 中有一个用于处理外部数据的 EE 扩展：http: [//devot-ee.com/add-ons/external-entries](http://devot-ee.com/add-ons/external-entries)。不过，我不知道您需要访问什么数据库，或者是否可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T00:19:58.060

在 ExpressionEngine 中有六个表，其中包含成员和成员组数据（EE 对用户/用户组的术语）。

*   exp_members
*   exp_member_groups
*   exp_member_bulletin_board
*   exp_member_data
*   exp_member_fields
*   exp_member_homepage

您很可能需要定期将您的用户数据库与 exp_members 和 exp_member_groups 同步以实现此目的。尝试让 EE 连接到外部数据库可能会让您很快陷入困境。

如果您只是想访问外部数据库，您可以编写在幕后连接的插件，并使您的数据在模板中可用。

我曾经使用过一个 Rails 应用程序，它促使 Rails 用户成为 EE 成员并在他们之间共享会话，以便用户可以查看两个系统并保持登录状态。

# html - 在父 div 中居中 div 标签

> ID：12278421
> 
> 赞同：0
> 
> 时间：2012-09-05T09:33:48.617
> 
> 标签：html, css

我在父 div 中有两个 div 标签。我想在同一行显示两个 div 并居中。下面是html代码。

```
<div id="parent">
    <div id="addEditBtn" style="display:inline-block; vertical-align: middle; width:20px; cursor:pointer;" class="ui-state-default ui-corner-all"> <span class="ui-icon ui-icon-pencil"></span></div>

    <div id="deleteBtn" style="display:inline-block; vertical-align: middle; width:20px; cursor:pointer;" class="ui-state-default ui-corner-all"> <span class="ui-icon ui-icon-trash"></span></div>
</div> 
```

我试过“显示：内联块；垂直对齐：中间；” 但它的左对齐。请帮助我在父 div 中居中 div 标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T11:26:04.437

请添加css

```
 #addEditBtn,#deleteBtn {
    display:table;
margin:0 auto;
width:48%;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:37:18.807

当你`display: inline-block;`和元素时，为了居中的目的，它被视为图像或文本字符。

```
#parent {
    text-align: center;
} 
```

观看[现场演示](http://jsfiddle.net/JagaP/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:37:27.507

您将需要另一个级别的嵌套 div。

第一级是`inline-block`and `width:50%`，第二级`display:block`是`width:20px`and `margin:0 auto`；

编辑 ：

是的，`text-align: center`在父 div 上也应该工作：http: [//jsfiddle.net/ZGeN8/](http://jsfiddle.net/ZGeN8/)，但我更喜欢我的答案，因为它会更容易适应 IE6/7

# database - 在同一台服务器上镜像数据库以进行测试

> ID：12278422
> 
> 赞同：0
> 
> 时间：2012-09-05T09:33:48.283
> 
> 标签：database, mirroring, database-mirroring

可以镜像到同一个 sql server 的数据库。我的服务器实例是 SQLSERVER，它有 2 个结构相同但名称不同的数据库。我希望 db1 与 db2 同步，所以如果我想让用户测试应用程序，我可以做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:42:43.950

尽管我不建议将它们放在同一个 sql 服务器上（性能/安全方面），但请看这里：[http ://technet.microsoft.com/en-us/library/dd207006.aspx](http://technet.microsoft.com/en-us/library/dd207006.aspx)

（既然你说的是 SQLSERVER，我猜你的意思是 mssql）

# tridion - 创建 tridion 集合类文件

> ID：12278425
> 
> 赞同：0
> 
> 时间：2012-09-05T09:33:57.280
> 
> 标签：tridion

```
using TDS = Tridion.ContentManager.Interop.TDS;
using Tridion.ContentManager.Interop.TDS;
using Tridion.ContentManager.Interop.TDSDefines;
using System.Runtime.InteropServices;
using System.Text.RegularExpressions;
using System.Collections.Generic;
using System.Xml.Linq;

namespace ConsumerHealth.Web
{
    class Common
    {
        public Common()
        {

        }

        public TridionCollection<Publication> getAllPublicationList() 
        {
            TDSE objTom = new TDSE();
            try
            {
                TridionCollection<Publication> publications = new TridionCollection<Publication>(objTom.GetListPublications(ListColumnFilter.XMLListIDAndTitle));
                return publications;
            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally
            {
                Marshal.ReleaseComObject(objTom);
            }

        }
     }
} 
```

`public TridionCollection<Publication> getAllPublicationList()`，它显示一个错误 TridionCollection 找不到，我错过了什么，我应该使用哪个 dll，除了这一切都工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T09:49:25.097

这不是 Content Manager 提供的类。

快速的 Google 搜索显示 2009 年的“ [Tridion Generic .NET Collections](http://sdltridionworld.com/community/extension_overview/GenericCollections.aspx) ”扩展提供了此功能。我的猜测是你必须在 2011 年重写它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T09:48:48.950

我认为 Tridion Collection 是用户定义的类，它在任何 Tridion dll 中都不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:22:11.053

您需要您在 SDLTridionWorld.com 上的亲爱的朋友提供的[这个程序集。](http://sdltridionworld.com/community/extension_overview/GenericCollections.aspx)

这是为 Tridion 2009 编写的（如前所述），据我所知，它可能不适用于 Tridion 2011。鉴于它是[开源](http://sdltridionworld.com/community/reciprocal_public_license.aspx)的，请随意更改并根据需要对其进行调整，并将其报告给SDL Tridion World，以便他们可以使用更新的版本对其进行更新。

# c# - 如何在按钮单击上编辑 DataGridView

> ID：12278427
> 
> 赞同：0
> 
> 时间：2012-09-05T09:34:02.360
> 
> 标签：c#

我有一个 DataGridView，我在其中绑定了一些记录。我的表单上有一个编辑按钮。当我单击按钮编辑时，我想编辑 datagridview 的所有行和列，以便用户可以根据需要更改数据，并且更改的数据应该以不同的颜色显示，以便用户可以识别这个数据变了。

直到我完成网格绑定，如何编辑并将颜色分配到更改的单元格中我无法找到解决方案。

请帮助我，有一些经验。代码。或一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:46:11.933

已经有一个属性`Enable Editing`。

之后，您可以借助`DataGridView.CellValueChanged Event`

![启用编辑](../Images/6db4c6bd39ce755a9a23b5534a5ea8e2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:54:03.440

您可以尝试使用`EditMode`和 ReadOnly

你设置`EditMode = DataGridViewEditMode.EditOnEnter`。

您将 `ReadOnly`单元格、行、列和控件设置为 true。

链接： http: [//msdn.microsoft.com/en-US/library/system.windows.forms.datagridview.editmode](http://msdn.microsoft.com/en-US/library/system.windows.forms.datagridview.editmode(v=vs.80) (v=vs.80 )

# algorithm - 在分析复杂性时 - 对数的底是否重要？

> ID：12278428
> 
> 赞同：-4
> 
> 时间：2012-09-05T09:34:03.783
> 
> 标签：algorithm, math, big-o, time-complexity

在将算法的复杂度写成对数形式时，例如 Merge Sort 是 O(nlogn)。

对数的底是什么，有关系吗，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:31:45.283

对数的底无关紧要。

下一个等式适用于所有 m,n,k ¹：

```
log_m(n) = log_k(n)/log_k(m) 
```

既然`1/log_k(m)`是不变的，那么一切`log_k(n)`都是`log_m(n)`。这对*所有 k,m*都是正确的，因此在使用大 O 表示法时，对数的底并不重要，因为`O(log_k(n)) = O(log_m(n))`

* * *

(1) 更多详情：[http ://en.wikipedia.org/wiki/Logarithm#Change_of_base](http://en.wikipedia.org/wiki/Logarithm#Change_of_base)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:53:05.737

在 O 和 Omega 表示法中，具有不同常数基数的对数是等价的。这是因为差异是常数，常数被忽略。

看。[大 O 符号](http://en.wikipedia.org/wiki/Big_O_notation)

# web-services - 使用maven在grails中运行测试用例时违反加载程序约束

> ID：12278431
> 
> 赞同：1
> 
> 时间：2012-09-05T09:34:19.767
> 
> 标签：web-services, grails, maven, testcase

我正在使用 maven 在 grails 中运行测试用例，并获得了以下堆栈跟踪。

我有以下冲突。

```
loader constraint violation: when resolving field "DATETIME" the class loader (instance of org/codehaus/groovy/grails/cli/support/GrailsRootLoader) of the referring class, javax/xml/datatype/DatatypeConstants, and the class loader (instance of <bootloader>) for the field's resolved type, javax/xml/namespace/QName, have different Class objects for that type

java.lang.LinkageError: loader constraint violation: when resolving field "DATETIME" the class loader (instance of org/codehaus/groovy/grails/cli/support/GrailsRootLoader) of the referring class, javax/xml/datatype/DatatypeConstants, and the class loader (instance of <bootloader>) for the field's resolved type, javax/xml/namespace/QName, have different Class objects for that type
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl.<clinit>(RuntimeBuiltinLeafInfoImpl.java:224)
    at com.sun.xml.bind.v2.model.impl.RuntimeTypeInfoSetImpl.<init>(RuntimeTypeInfoSetImpl.java:61)
    at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.createTypeInfoSet(RuntimeModelBuilder.java:127)
    at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.createTypeInfoSet(RuntimeModelBuilder.java:79)
    at com.sun.xml.bind.v2.model.impl.ModelBuilder.<init>(ModelBuilder.java:152)
    at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.<init>(RuntimeModelBuilder.java:87)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:422)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:286)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:139)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:117)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:211)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:372)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
    at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:220)
    at com.sun.xml.ws.spi.ProviderImpl$2.run(ProviderImpl.java:218)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.spi.ProviderImpl.getEPRJaxbContext(ProviderImpl.java:217)
    at com.sun.xml.ws.spi.ProviderImpl.<clinit>(ProviderImpl.java:88)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:36)
    at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:95)
    at javax.xml.ws.spi.Provider.provider(Provider.java:82)
    at javax.xml.ws.Service.<init>(Service.java:56)
    at javax.xml.ws.Service.create(Service.java:698)
    at com.j2.api.fax.myaccount.client.MyaccountClient$1.makeObject(MyaccountClient.java:28)
    at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1148)
    at com.j2.api.fax.myaccount.client.MyaccountClient.authenticateByPhoneNumber(MyaccountClient.java:66)
    at com.j2.api.fax.myaccount.client.MyaccountClient$authenticateByPhoneNumber.call(Unknown Source)
    at com.j2.helpers.LoginHelper.authenticateCustomerByPhoneNumber(LoginHelper.groovy:86)
    at com.j2.helpers.LoginHelper$authenticateCustomerByPhoneNumber.call(Unknown Source)
    at com.j2.spa.MobileService.login(MobileService.groovy:508)
    at com.j2.spa.MobileService$login.call(Unknown Source)
    at com.j2.spa.MobileController$_closure7.doCall(MobileController.groovy:109)
    at com.j2.spa.MobileController$_closure7.call(MobileController.groovy)
    at MobileControllerTests.testLogin_Failure_UsernameNotFound(MobileControllerTests.groovy:42) 
```

我已经尝试了很多，但无法解决它。

任何帮助都非常感谢..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-21T18:00:09.067

我遇到了类似的问题，解决方案是排除 stax-api 模块。我正在使用具有以下配置的 Gradle：

```
configurations {
compile.exclude module: 'stax-api'} 
```

如果您使用的是maven，我认为它是相似的。希望能帮助到你。

# html - Firefox 15.0 忽略 meta charset="uft-8"

> ID：12278435
> 
> 赞同：1
> 
> 时间：2012-09-05T09:34:30.570
> 
> 标签：html, firefox

我有这个简单的 html

```
<!Doctype html>
<head>
<title>Uft-8</title>
<meta charset="uft-8">
<style type="text/css">
.tr_deco{
background-color:pink;
border:1px solid red;
}
</style>
</head>
<body>
<a class="new_krud_slider" href="">make new</a>
</body>
</html> 
```

当我在 firefox 15 上试用代码时，我得到了这个 firebug 错误。

> 使用元标记为 HTML 文档声明了不受支持的字符编码。该声明被忽略。

我的萤火虫版本是 1.7.3。什么可能导致此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T09:36:33.150

伙计，你打错`charset="uft-8"`了（F 在 T 之前）。将其更改为`charset="utf-8"`：

```
<!Doctype html>
<head>
<title>Uft-8</title>
<meta charset="utf-8">
<style type="text/css">
.tr_deco{
background-color:pink;
border:1px solid red;
}
</style>
</head>
<body>
<a class="new_krud_slider" href="">make new</a>
</body>
</html> 
```

然后它工作正常。我知道，我亲自测试过。

编辑：现在我意识到你已经`UFT`到处打字了。正确的缩写是`UTF`（[UCS 转换格式](http://en.wikipedia.org/wiki/UTF-8)）。

# asp.net-mvc-3 - ASP.NET MVC 在共享环境中应该这么慢吗？

> ID：12278436
> 
> 赞同：1
> 
> 时间：2012-09-05T09:34:33.513
> 
> 标签：asp.net-mvc-3, shared-hosting

这可能是一个相当广泛的帖子。但是我已经完成了我的研究，现在我被困住了，我真的不想深究这一点。

我遇到的问题是共享环境（Web 主机）中 ASP.NET MVC 3 站点的性能。如果您查看下图，您会明白我的意思： [Loading time graph from KeepAliveForever](http://mikaeledebro.se/misc/screenshot.png)

正如您所看到的，该站点有这些峰值，其中加载时间约为每 20-30 分钟 10 秒，这之间的加载时间正常。由于它是共享主机，它们每 20 分钟回收一次应用程序池。尽管我的印象是，只有没有活动的网站才会从缓存中“丢弃”。由于 KeepAliveForever 服务应该每 10 分钟请求一次站点，因此对我来说似乎并非如此。无论发生什么，该站点似乎都已从缓存中删除。

这是我用来预编译站点的命令：

```
cd C:\Windows\Microsoft.NET\Framework\v4.0.30319
aspnet_compiler -p "c:\dev\AlltForMusik\AlltForMusik" -v / -f "c:\dev\Deploy" 
```

我还禁用了调试并注释掉了 Global.asax 中的 RegisterAllAreas()，因为我不使用区域，而且我读到它可能会很慢：

```
protected void Application_Start()
    {
        //Database.SetInitializer(new DontDropDbJustCreateTablesIfModelChanged<AlltForMusikContext>());

        //AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

我可能在 Global.asax 的 RegisterRoutes() 中添加了 15 条路由。但这是相当正常的数量，不应该造成任何重大延误吗？

该站点非常轻量级，从数据库加载的唯一内容可以在这里看到：[来自数据库的组件](http://mikaeledebro.se/misc/fromDb.png)

我读过这对许多其他人来说是一个问题，但我无法理解这应该是预期的结果。我的意思是，大多数较小的站点都使用具有负载平衡的共享托管环境。如果网站速度这么慢，我将如何使用 MVC 为客户开发网站？！这是付费客户绝不会容忍的！

或者 MVC 真的只应该在构建在它自己的服务器上运行的大型应用程序时使用（具有更改首选项等的能力）？

非常感谢您花费时间和精力帮助我解决这个问题。我已经和我的虚拟主机谈过了，他们真的帮不上忙。Web 主机总体上并不慢，这似乎只是 MVC 站点的问题。

最好的问候 Mikael Edebro

# qt - 从 QString 中删除重音符号

> ID：12278448
> 
> 赞同：8
> 
> 时间：2012-09-05T09:35:32.840
> 
> 标签：qt, unicode

我想从字符串中删除重音符号和更普遍的变音符号以启动不区分重音的搜索。基于对 Unicode 字符类的一些阅读，我想出了这个：

```
 QString unaccent(const QString s)
 {
   QString s2 = s.normalized(QString::NormalizationForm_D);
   QString out;
   for (int i=0,j=s2.length(); i<j; i++)
   {
     // strip diacritic marks
     if (s2.at(i).category()!=QChar::Mark_NonSpacing &&
         s2.at(i).category()!=QChar::Mark_SpacingCombining)
     {
          out.append(s2.at(i));
     }
   }
   return out;
 } 
```

它似乎适用于基于拉丁语的语言，但我想知道它是否适用于其他字母：阿拉伯文、西里尔文、CJK ......由于缺乏对这些的文化理解，我无法测试。

具体来说，我希望我知道：

1.  哪种 Unicode 规范化形式更适合这个问题：`NormalizationForm_KD`或`NormalizationForm_D`？
2.  删除属于`Mark_NonSpacing`和`Mark_SpacingCombining`类别的字符是否足够，还是应该包含更多类别？
3.  是否对上述代码进行了其他改进，使其尽可能适用于所有语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:48:29.507

```
QString unaccent(const QString s)
{
    QString output(s.normalized(QString::NormalizationForm_D));
    return output.replace(QRegExp("[^a-zA-Z\\s]"), "");
} 
```

# c# - c# 如何通过 iPAD 或 iPhone 上的网页 (Safari) 访问网络摄像头和麦克风

> ID：12278456
> 
> 赞同：0
> 
> 时间：2012-09-05T09:35:48.567
> 
> 标签：c#, iphone, ios, silverlight, ipad

我正在开发一个 ASP.NET MVC 项目。现在我需要实现可以通过 iPAD 和/或 iPhone 上的 Safari 访问网络摄像头和麦克风的功能。而且我不想在这个项目中使用 Flash。

搜索了几个小时后，我发现了一些帖子说 SilverLight 5 可以很好地在 iPAD 上运行（[点击这里查看帖子](http://www.cmswire.com/cms/enterprise-20/silverlight-50-plays-nice-on-the-ipad-009436.php)）

但是在我试用了 SilverLight 之后，iOS 上其实是不支持的。

因此，Apple 似乎已经从其 iOS 系统中移除了任何形式的插件。我的问题是：

1.  Apple 在 iPAD 或 iPhone (iOS) 平台上支持什么？

2.  您是如何通过 iPAD/iPhone 上的 Safari 访问网络摄像头的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:39:47.063

不幸的是，这不会发生。据我所知，无法通过 iPad 上的浏览​​器访问相机。

做到这一点的唯一方法是创建一个本地应用程序，该应用程序可以访问相机并将任何图片传递给 web 视图。

对不起

# java - 尝试使用 Java 打印文件内容时获取垃圾字符

> ID：12278464
> 
> 赞同：1
> 
> 时间：2012-09-05T09:36:09.670
> 
> 标签：java, readfile

我正在读取文件的内容并尝试使用 java 打印内容。但它会与文件内容一起打印垃圾字符。

代码：

```
import java.io.*;

public class ReadFile {

    public String readFile(String filePath){

        StringBuilder contents = new StringBuilder();
        File file = new File(filePath);

        try{
            String lines = null;
            FileReader fileReader1 = new FileReader(file);
            BufferedReader buffer = new BufferedReader(fileReader1);

            while((lines = buffer.readLine())!=null){
                contents.append(lines);

            }
            buffer.close();
        }
        catch(FileNotFoundException ex){
                System.out.println("File not found.");
        }catch(IOException ex){
            System.out.println("Exception ocurred.");
        }
        return contents.toString();
    }

    public static void main(String[] args){

        ReadFile rf = new ReadFile();
        String lines = rf.readFile("C:\\Data\\FaultDn.txt");

        System.out.println("Original file contents: " + lines);

    }
} 
```

文件内容为：

```
partner.cisco.com:org-root/mac-pool-QA_MAC_Pool_5-Sep-2012_12:00 
```

输出是：

```
"Original file contents: ÿþp ..." and then junk characters after every letter. 
```

你能指出我在这段代码中缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:45:14.697

我能想到的唯一解释是：

*   您正在阅读与您认为正在阅读的文件不同的文件，或者
*   您正在执行的程序与上面的源代码不匹配；例如，您正在执行旧版本的类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:49:37.950

我也试过你的代码。它工作正常。但我使用的是 Ubuntu，所以我只更改了你的文件路径。所以有时您的文件路径或文件中会发生错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:52:25.570

您的帖子具有误导性，因为我们大多数人都知道您的程序生成的输出是

> `![Alt Output](C:\Share\Output.jpg)`

如果您正在阅读的内容包含垃圾字符，则很可能是编码问题。原始文件是如何生成的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:21:21.290

问题解决了。我通过添加 ASCII 编码更正了我的 powershell 脚本，如下所示：

```
Out-File -Encoding ASCII 
```

我用过

```
System.getProperty("line.separator"); 
```

这解决了问题并按原样打印文件内容（包括新行）

# magento - 在 magento 中按品牌名称购物

> ID：12278466
> 
> 赞同：0
> 
> 时间：2012-09-05T09:36:20.783
> 
> 标签：magento

这是具有目录local/Vilpjsc/brand/Block的brand.php文件。我希望在主页上显示带有徽标（图像）的品牌名称。但我收到错误，即致命错误：调用成员函数getCollection（）在第 25 行的 /var/www/magendemo/app/code/local/Vilpjsc/Brand/Block/Brand.php 中的非对象上

```
<?php

class Vilpjsc_Brand_Block_Brand extends Mage_Core_Block_Template {
public function _prepareLayout() {
      return parent::_prepareLayout();
}

//Get Collection from Brand Controller
public function getBrand() {

    if (!$this->hasData('brand')) {

        $this->setData('brand', Mage::registry('brand'));

    }
    return $this->getData('brand');
}

//Get Brand Featured Collection
public function getFeaturedBrand() {

    return $this->getBrand()->getCollection()->setPageSize(12)->addFilter('status', '1');

}

public function resizeImage($img,$width=100, $height=60) {

    if (!file_exists("./media/brand/resized"))
        mkdir("./media/brand/resized", 0777);
    $imageResized = Mage::getBaseDir('media') . DS . "brand" . DS . "resized" . DS . $width."x".$height.$img;
    if (!file_exists($imageResized) && file_exists("./media/brand/" . $img)) {
        $imageObj = new Varien_Image("./media/brand/" . $img);
        $imageObj->constrainOnly(TRUE);
        $imageObj->keepAspectRatio(TRUE);
        $imageObj->keepFrame(FALSE);
        $imageObj->resize($width, $height);

        $imageObj->save($imageResized);
    }
    $newImageUrl = Mage::getBaseUrl('media')."brand/resized/".$width."x".$height.$img;

    return $newImageUrl;
}

public function getNormalBrand() {

    return $this->getBrand()->getCollection()->addFilter('status', '0');
}

public function getBrandChar() {

    extract($this->getBrandKey());

    return $this->getBrand()->getCollection()->saveBrandcollection($char);
}

//Create Alphabet navigation
public function navigation() {
    extract($this->getBrandKey());
    $alphas = range('A', 'Z');
    $navigation = "";
    $digitClass = "";
    foreach ($alphas as $key) {
        if ($char == $key)
            $class_key = "current_char";
        else
            $class_key="";
        $navigation .= "<li class='key_item " . $class_key . "'><a href='" . Mage::getBaseUrl() . "brand/index/index/brand_key/" . $key . "'>" . $key . "</a></li>";
    }
    if ($char == "digit") {
        $digitClass = "current_char";
    } elseif ($char == "all")
        $allClass = "current_char";
    $navigation = "<li class='key_item " . $digitClass . "'><a href='" . Mage::getBaseUrl() . "brand/index/index/brand_key/digit'>#</a></li>" .
            $navigation;
    return $navigation;
}

//Get request for brand block
public function getBrandKey() {
    $brand_key = Mage::registry('brand_key');

    if ($brand_key) {
        $char = $brand_key->getParam('brand_key') ? $brand_key->getParam('brand_key') : 'A';
        $option_id = $brand_key->getParam('option_id') ? $brand_key->getParam('option_id') : '1';
        $brand = $brand_key->getParam('brand') ? $brand_key->getParam('brand') : 'Nike';
    } else {
        $char = 'digit';
        $option_id = '544';
         }
         return compact('char', 'option_id', 'brand');
         }
      } 
```

# java - oncreate() 方法出错

> ID：12278473
> 
> 赞同：0
> 
> 时间：2012-09-05T09:36:48.673
> 
> 标签：java, android

我是 Android 应用程序的初学者，并在添加此代码时使用 Java：

```
GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, SENDER_ID);
        } else {
          Log.v(TAG, "Already registered");
        } 
```

我有错误：SENDER_ID 日志标签

错误“无法解析为可用”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:48:49.807

正如我所评论的，如果您是初学者，则不应从 GCM 开始，但似乎您不仅是 Android 的初学者，而且是 Java 的初学者（这还不错，每个人都是初学者，而我不是先进的）。

我建议你先学习一些 Java 的基础教程，然后再学习一些 Android 的基础教程等等。

GCM 还需要一个服务器端，所以这将是相当先进的。

无论如何，错误很简单。SENDER_ID 是您尚未在任何地方定义的字段。

您必须在某处声明它，例如：

```
String SENDER_ID = "mySenderId"; 
```

或在您的班级中名列前茅：

```
public class MyClass {
    private static final SENDER_ID = "mySenderID";
} 
```

# sql - 更改多个表的列长度

> ID：12278474
> 
> 赞同：2
> 
> 时间：2012-09-05T09:36:56.270
> 
> 标签：sql, database, oracle, orm, ddl

因此，我们刚刚发现我们的`Oracle`DBMS 中的 254 个表有一个名为**“Foo”**的列，其长度错误，`Number(10)`而不是`Number(3)`.

该`foo`列是表 PK 的一部分。
这些表还有其他带有外来键的表。

我所做的是：

1.  用临时表备份表。
2.  禁用表的外来键。
3.  禁用了与`foo`列的PK。
4.  为所有行清空`foo`列。
5.  恢复了以上所有

但现在我们发现这不仅仅是几张桌子，而是**254 张桌子**。

有没有一种简单的方法（或者至少比这更容易）来改变列的长度？

PS我有DBA权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:02:11.083

有一种更简单的方法可以生成所需的脚本、使用系统表[`user_tables`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2117.htm#REFRN20286)并[`user_constraints`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1046.htm#i1576022)动态生成 DDL。缺点是这需要停机时间。另请注意，我使用[`truncate`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10007.htm#SQLRF01707)command 而不是`delete`，这应该更快。

假设一个简单的表看起来像：

```
create table a ( 
   foo number(10)
 , bar number(10)
 , constraint pk_a primary key (foo)
 , constraint fk_a foreign key ( bar ) references a(foo )
  ); 
```

这个看起来不好看的查询

```
select cmd
  from ( 
select table_name
     , 1 as stage -- Just used to order by at the end.
     , 'create table ' || table_name || '_backup as select * from ' 
                      || table_name || ';' || chr(10) as cmd
       -- chr(10) is LF
  from user_tab_columns -- View of all columns
 where column_name = 'FOO'
   and data_precision = 10 -- Length of the number
 union all
select table_name
     , 3 as stage
     ,  'truncate table ' || table_name || ';' || chr(10) -- Remove all data
       || 'alter table ' || table_name 
               || ' modify ( foo number(3));' || chr(10)
       || 'insert into ' || table_name || ' select * from ' 
            || table_name || '_backup;' || chr(10)
       || 'drop table ' || table_name || '_backup;' as cmd
  from user_tab_columns
 where column_name = 'FOO'
   and data_precision = 10
 union all
select ut.table_name
     , 2 as stage
       -- Disable the constraint
     , 'alter table ' || uc.table_name || ' disable constraint ' 
            || uc.constraint_name || ';' || chr(10) as cmd
  from user_constraints uc -- All named constraints
  join user_tab_columns ut
    on uc.table_name = ut.table_name
 where ut.column_name = 'FOO'
   and ut.data_precision = 10 
   and constraint_type = 'R' -- Foreign Key constraints (see link)
 union all
select ut.table_name
     , 4 as stage
     , 'alter table ' || uc.table_name || ' enable constraint ' 
          || uc.constraint_name || ';' || chr(10) as cmd
  from user_constraints uc
  join user_tab_columns ut
    on uc.table_name = ut.table_name
 where ut.column_name = 'FOO'
   and ut.data_precision = 10
   and constraint_type = 'R'
       )
 order by stage 
```

将产生以下内容：

```
create table A_backup as select * from A; -- Create your backup
alter table A disable constraint FK_A; -- Disable FKs
truncate table A; -- Remove all data in the table
alter table A modify ( foo number(3)); -- Reduce the size of the column
insert into A select * from A_backup; -- Replace all the data
drop table A_backup; -- Drop the backup
alter table A enable constraint FK_A; -- Re-enable FKs 
```

由于 column `stage`，这不会逐表而是逐阶段完成，以便同时禁用所有约束，这将避免问题。如果您害怕（我会害怕），请从查询中删除`drop`表`_backup`；这意味着无论出现什么问题，您都是安全的。

如果您在 SQL*Plus 中运行它，您还希望将其包括在内`whenever sqlerror exit`，这样如果出现问题，例如没有更多的表空间，您就不会截断尚未备份的内容。几乎值得分阶段运行它，以便您知道一切都已正确完成。

我建议用几个表对不同的用户进行测试，以确保它可以满足您的所有需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:20:43.940

我们所做的是：

```
CREATE TABLE <table_name_backup> as SELECT *  <table_name>;
DELETE <table_name>;    
ALTER TABLE <table_name> MODIFY (Foo NUMBER(3));
INSERT INTO <table_name> SELECT * FROM <table_name_backup>;
DROP <table_name_backup>; 
```

对于所有的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:55:48.460

您的解决方案有效，但工作量很大，并且意味着停机。

由于物理`NUMBER(3)`上 a 与具有更强约束的 a 完全相同`NUMBER(10)`，您可以添加`CHECK`约束并获得相同的逻辑限制而无需停机：

```
LOOP
   ALTER TABLE <table_name> ADD CONSTRAINT <table_foo_chk> CHECK (foo < 1000);
END LOOP; 
```

# html - CSS-如何在底部边框线上对齐背景图像？包含 Jsfiddle

> ID：12278476
> 
> 赞同：0
> 
> 时间：2012-09-05T09:37:06.943
> 
> 标签：html, css, alignment, border, background-image

我有一个图像我试图显示在底部边框的顶部，但它被安排在底部边框元素的后面（在本例中，名为“divider”），我无法让它正确对齐。

我希望图像显示在边框元素的中间和顶部。垂直地，我试图让图像左侧和右侧的 1px 线与 1px 边框对齐，使其看起来好像是一个元素。

这是代码：

```
.divider {
border-bottom: 1px solid #c3c3c3;
clear: both;
display: block;
margin-bottom: 20px;
padding-top: 20px;
width: 100%;
}

.sidearrow {
background: url(http://s16.postimage.org/sbf7v9n75/sidearrow.png) 50% 14px no-repeat;
width: 100%;
height: 25px;
}​    

<p>Here is some content above</p>

<div class="sidearrow"></div>
<div class="divider"></div>

<p>Here is some content below</p>​ 
```

和 jsfiddle：http: [//jsfiddle.net/F5xjx/2/](http://jsfiddle.net/F5xjx/2/)

任何想法如何让它发挥作用？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:43:58.967

不完全确定你想要什么，但这是你想要的效果吗？

```
.divider {
    border-bottom: 1px solid #c3c3c3;
    clear: both;
    display: block;
    margin-bottom: 20px;
    padding-top: 20px;
    width: 100%;
}

.sidearrow {
    background: url("http://s16.postimage.org/sbf7v9n75/sidearrow.png") no-repeat scroll center top transparent;
    width: 100%;
    height: 25px;
} 
```

[http://jsfiddle.net/nottrobin/gbrcB/1/](http://jsfiddle.net/nottrobin/gbrcB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:44:36.277

不确定这是否是您所追求的，但根本不需要填充：

[http://jsbin.com/ibaveg/1/](http://jsbin.com/ibaveg/1/)

# groovy - Groovy 运行时方法拦截

> ID：12278477
> 
> 赞同：1
> 
> 时间：2012-09-05T09:37:08.337
> 
> 标签：groovy, metaclass, interception, method-invocation

我在玩 Groovy，我想知道，为什么这段代码不起作用？

```
package test

interface A {
    void myMethod()
}

class B implements A {
    void myMethod() {
        println "No catch"
    }
}

B.metaClass.myMethod = {
    println "Catch!"
}

(new B()).myMethod() 
```

它打印出来`No catch`，而我希望它打印出来`Catch!`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T13:35:51.683

这是 Groovy 中的一个错误，JIRA 中有一个未解决的问题：无法通过作为接口实现一部分的元类覆盖方法[GROOVY-3493](https://issues.apache.org/jira/browse/GROOVY-3493)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:36:21.620

而不是重写 B.metaClass.myMethod，请尝试以下操作：

```
 B.metaClass.invokeMethod = {String methodName, args ->
    println "Catch!"
 } 
```

这篇[博客文章](http://blog.bensmann.com/method-interception-and-synthesis-with-groovy)很好地描述了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T19:49:18.647

有一种解决方法，但它仅适用于所有类，而不适用于特定实例。

构建前的元类修改：

```
interface I {
    def doIt()
}

class T implements I {
    def doIt() { true }
}

I.metaClass.doIt = { -> false }
T t = new T()
assert !t.doIt() 
```

构建后的元类修改：

```
interface I {
    def doIt()
}

class T implements I {
    def doIt() { true }
}

T t = new T()
// Removing either of the following two lines breaks this
I.metaClass.doIt = { -> false }
t.metaClass.doIt = { -> false }
assert !t.doIt() 
```

# nagios - Nagios 高级配置 - 由主机组定义后更改联系人组

> ID：12278486
> 
> 赞同：2
> 
> 时间：2012-09-05T09:37:29.817
> 
> 标签：nagios, redefine, contactgroups

是否可以在主机组中设置默认联系人组并稍后在服务中修改（重新定义）此联系人组。或者通过其他方式。

背景：我们使用 nagios 监控近 100 个主机和近 1000 个服务。为了便于配置，我们定义了具有默认检查和默认联系人组的主机组。但是越来越多的特殊服务器上必须有其他联系人组的服务。

显示我们想要的配置示例，但它不起作用......（最后一部分 - 重新定义）

```
####################
## HOST GROUP
####################

define  hostgroup{
        hostgroup_name  WINDOWS
        alias           Windows Server
}

####################
## SERVICE
####################

define service{
        use                             generic-service
        name                            RDP-CHECK-TCP-PORT
        hostgroup_name                  WINDOWS
        service_description             RDP - Check TCP Port
        check_command                   check_rdp
        contact_groups                  Admin_Alarm
}

define service{
        use                             generic-service
        name                            DF-CHECK
        hostgroup_name                  WINDOWS
        service_description             HD - Disk free
        check_command                   check_df_win
        contact_groups                  Admin_Alarm
}

####################
## HOST
####################

define host{
        use                     generic-urgent-host
        host_name               server1
        hostgroups              WINDOWS
        alias                   Server1
        address                 1.2.3.1
}

define host{
        use                     generic-urgent-host
        host_name               server2
        hostgroups              WINDOWS
        alias                   Server2
        address                 1.2.3.2
}

define host{
        use                     generic-urgent-host
        host_name               server3
        hostgroups              WINDOWS
        alias                   Server3
        address                 1.2.3.3
}

####################
## Redefine Contactgroups
####################

define service{
        host                            server1
        service_description             RDP - Check TCP Port
        contact_groups                  No_Alarm
}

define service{
        host                            server2
        service_description             RDP - Check TCP Port
        contact_groups                  Urgent_Admin_SMS_Alarm, Customer_Admin_Alarm
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-23T18:24:02.373

因为这还没有说：

有一些工具可以让您将其表达为规则，并对默认设置进行简单的覆盖。升级应该用于类似“我希望它立即可见并写入我们的 xmpp 聊天室作为通知。但如果它保持 30 分钟中断，我们还想给经理发电子邮件，让他知道我们有一个值得注意的中断”。

至于工具，我会推荐 Check_MK，它自 2009 年以来就出现了。最初，它是为这项任务准备的。这些天来，它做得更多。

免责声明：我为它做出了贡献，因为我认为这是一件好事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:00:02.233

contact_groups 只能分配给主机，不能分配给主机组。但是，您可以使用模板并将 contact_groups 放入该模板中。稍后您可以覆盖主机定义中的contact_groups。查看[对象继承](http://nagios.sourceforge.net/docs/3_0/objectinheritance.html)文档。

# coldfusion - Coldfusion时间戳数据类型错误

> ID：12278488
> 
> 赞同：1
> 
> 时间：2012-09-05T09:37:32.873
> 
> 标签：coldfusion, stripe-payments

我正在为 Coldfusion 中的 Stripe API 实现一个外部包装器。

我正在调用的函数之一采用“时间戳”类型的参数，如下所示：

```
public struct function updateSubscription(required string customerid, required string planid, string coupon='', boolean prorate=true, timestamp trial_end, any card) 
{
...
} 
```

我将一个有效日期（经过测试并且 IsDate() 导致“是”）传递给 trial_end 参数，但它给了我一个“不是时间戳类型”错误。

到目前为止，我需要做什么才能使函数调用正常工作？

谢谢

更新：添加了全功能：

```
public struct function updateSubscription(required string customerid, required string planid, string coupon='', boolean prorate=true, timestamp trial_end, any card) {

    local.HTTPService = createHTTPService('POST');
    local.HTTPService.addParam(type='formfield',name='plan',value=arguments.planid);

    local.HTTPService.setUrl(getBaseUrl() & 'customers/' & arguments.customerid & '/subscription');
    if (Len(Trim(arguments.coupon))) {
        local.HTTPService.addParam(type='formfield',name='coupon',value=Trim(arguments.coupon));
    }
    local.HTTPService.addParam(type='formfield',name='prorate',value=arguments.prorate);
    if (StructKeyExists(arguments,'trial_end') AND IsDate(arguments.trial_end)) {
        loca.intUTCDate = timeToUTCInt(arguments.trial_end);
        local.HTTPService.addParam(type='formfield',name='trial_end',value=local.intUTCDate);
    }
    if (StructKeyExists(arguments,'card') AND isStruct(arguments.card)) {
        local.HTTPService.addParam(type='formfield',name='card[number]',value=arguments.card.number);
        local.HTTPService.addParam(type='formfield',name='card[exp_month]',value=arguments.card.exp_month);
        local.HTTPService.addParam(type='formfield',name='card[exp_year]',value=arguments.card.exp_year);
        if (StructKeyExists(arguments,'card.cvc')) {
            local.HTTPService.addParam(type='formfield',name='card[cvc]',value=arguments.card.cvc);
        }
        if (StructKeyExists(arguments,'card.name') AND Len(Trim(arguments.card.name))) {
            local.HTTPService.addParam(type='formfield',name='card[name]',value=arguments.card.name);
        }
        if (StructKeyExists(arguments,'card.address_line1') AND Len(Trim(arguments.card.address_line1))) {
            local.HTTPService.addParam(type='formfield',name='card[address_line1]',value=Trim(arguments.card.address_line1));
        }
        if (StructKeyExists(arguments,'card.address_line2') AND Len(Trim(arguments.card.address_line2))) {
            local.HTTPService.addParam(type='formfield',name='card[address_line2]',value=Trim(arguments.card.address_line2));
        }
        if (StructKeyExists(arguments,'card.address_zip') AND Len(Trim(arguments.card.address_zip))) {
            local.HTTPService.addParam(type='formfield',name='card[address_zip]',value=Trim(arguments.card.address_zip));
        }
        if (StructKeyExists(arguments,'card.address_state') AND Len(Trim(arguments.card.address_state))) {
            local.HTTPService.addParam(type='formfield',name='card[address_state]',value=Trim(arguments.card.address_state));
        }
        if (StructKeyExists(arguments,'card.address_country') AND Len(Trim(arguments.card.address_country))) {
            local.HTTPService.addParam(type='formfield',name='card[address_country]',value=Trim(arguments.card.address_country));
        }
    } else if (StructKeyExists(arguments,'card')) {
        local.HTTPService.addParam(type='formfield',name='card',value=Trim(arguments.card));
    }
    local.HTTPResult = local.HTTPService.send().getPrefix();

    if (NOT isDefined("local.HTTPResult.statusCode")) {
        throw(type='Stripe',errorcode="stripe_unresponsive", message="The Stripe server did not respond.", detail="The Stripe server did not respond.");
    } else if (left(local.HTTPResult.statusCode,3) NEQ "200") {
        throw(type='Stripe',errorcode=local.HTTPResult.statusCode, message=local.HTTPResult.statuscode, detail=local.HTTPResult.filecontent);
    }
    return deserializeJSON(local.HTTPResult.filecontent);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T09:47:18.100

`timestamp`不是原生[CF 数据类型](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7e47.html)，因此 CF 正在尝试查找名为 timestamp.cfc 的 CFC。

我想你的意思是`date`在这种情况下。

# exec - TCL/tk如何打开文件夹

> ID：12278495
> 
> 赞同：1
> 
> 时间：2012-09-05T09:37:57.783
> 
> 标签：exec, tcl, tk

我正在尝试使用以下命令从 tcl/tk 打开一个文件夹

```
eval exec [auto_execok start] [list $folderpath] 
```

它给我的语法错误是不正确的。

在我尝试 `start $folderpath`打开文件夹时的 tclsh 命令提示符中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:53:38.560

glenn 的解决方案不适用于包含空格的文件夹。我的解决方案是：

```
set dir {C:\Program Files\Microsoft Office};# example
set escaped_dir [string map {\\ \\\\} [file nativename $dir]]
eval exec [auto_execok start] explorer $escaped_dir 
```

但我想知道如何通过默认文件管理器打开文件夹，因为我使用了替代文件管理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:13:24.860

您使用的代码*几乎*是正确的。你想要这个：

```
eval exec [auto_execok start] [list "" $folderpath] 
```

那是因为您需要在其中使用额外的空白参数`start`才能使用（它是要创建的窗口的“标题”，如果您习惯于只输入相对文件名，则相当模糊）。这是一个特定的怪癖`start`，结合 Tcl 如何引用通过 Windows 进程创建接口馈送的事物；发生的事情是 Tcl 将`"`字符放在非简单参数周围（*几乎*总是正确的做法），这会导致`start`混淆并做错误的事情，从而导致错误消息。这非常可怕，但是添加一个额外的空参数可以解决问题。

如果还没有，您可能还需要将该路径转换为本机格式：

```
eval exec [auto_execok start] [list "" [file nativename $folderpath]] 
```

（你怎么知道它是否是原生的？检查目录分隔符是`/`- Tcl 标准，在 Unix 和 OSX 上也是原生的 - 或者`\`- Windows 使用的。）

在某些情况下，您可能需要`file attributes $folderpath -shortname`解决问题。我希望你不需要那个！（公平地说，这些天几乎没有什么用；它只在 XP 之前的系统上很重要，尽管它在处理非常长的路径时偶尔仍然有用。）

* * *

## 兼容性表格

如果您使用的是 Tcl 8.5（或更高版本），我们鼓励您使用 Glenn 提出的语法更改，因为它们更清晰、更易于使用并且速度也稍微快一些（不是最后一个在这里很重要；速度差异会与启动子流程的成本相比只是噪音）：

```
exec {*}[auto_execok start] "" [file nativename $folderpath] 
```

如果您使用的是 8.4（较旧，但受支持）或之前的版本（为什么！？），请使用带有`eval`上述表单的表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:52:54.410

如果你使用 tcl 8.5，你可以这样写：`exec {*}[auto_execok start] $folderpath`

# python - Django：在包含模板中设置默认行为

> ID：12278498
> 
> 赞同：0
> 
> 时间：2012-09-05T09:38:07.493
> 
> 标签：python, django, django-templates

我希望在要包含的模板中设置默认行为。

我有一个 Django 模板系统不允许在模板中设置变量的问题（我已经阅读了 Django Philosophy，我理解它）。

这是我的示例问题：

1.  我想包含一个模板来呈现新闻源：

    ```
    template.html:
    ...
    {% include "_newsfeed.html" with slicing=":20" %}
    ... 
    ```

    **我不想被迫输入`slicing`参数，并设置默认行为，比如说`":20"`**

2.  在我的`_newsfeed.html`，我想做（伪代码，它不起作用）：

    ```
    _newsfeed.html:
    ...
    {% if not slicing %}{% with slicing=":20" %}{% endif %}

    {% for content in newsfeed_content|slice:slicing %} 
        {# Display content #}
    {% endfor %}

    {% if not slicing %}{% endwith %}{% endif %} 
    ```

相反，我最终在下面这样做，这不遵循 DRY 规则（并且不满足我！）：

```
_newsfeed.html:
...
{% if not slicing %}{% with slicing=":20" %}

    {% for content in newsfeed_content|slice:slicing %} 
        {# Display content #}
    {% endfor %}

{% endwith %}{% else %}

    {% for content in newsfeed_content|slice:slicing %} 
        {# Display content #}
    {% endfor %}

{% endif %} 
```

我应该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:45:28.003

如果您想通过模板而不是视图文件来执行此操作，则可以基于切片创建自己的过滤器，例如

```
from django.template.defaultfilters import slice_filter

@register.filter("slice_default", is_safe=True)
def slice_filter_20(value, arg=":20"):
    return slice_filter(value, arg) 
```

# android - android中的多视图应用程序

> ID：12278500
> 
> 赞同：0
> 
> 时间：2012-09-05T09:38:22.947
> 
> 标签：android, view

我想开发一个多窗口应用程序。例如，第一个屏幕（视图）- 登录，第二个视图- GPS 地图等。什么工具最适合用于此应用程序？使用 ViewFlipper 是否正确？（安卓 2.2 或 2.3，而不是 4+）。谢谢。

# pentaho - Pentaho 报表设计。添加来自不同子报表的两列

> ID：12278512
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:39:21.293
> 
> 标签：pentaho

我有一个主报告和几个子报告。在主报告中，我将其中一列的总计（总和）作为“总 A”，在其中一个子报告中，我将另一列的总计作为“总 B”

现在我想在一个字段中对这两列进行总计，即（[Total A]+[Total B]）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:09:19.097

您必须使用带有 ([Total A]+[Total B]) 作为表达式的开放式公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T10:35:56.433

问题是子报表的功能无法导出。因此，每个子报表中的 [Total A] 和 [Total B] 在主报表中不可用，即使在子报表的“导出参数”部分正确设置。

¿ 还有其他人遇到这个问题吗？

# asp.net-mvc-3 - Html.ActionLink() 图片背景 mvc

> ID：12278513
> 
> 赞同：0
> 
> 时间：2012-09-05T09:39:24.920
> 
> 标签：asp.net-mvc-3, image, html.actionlink

如何设置图像背景`Html.ActionLink()`？

我的代码：

```
@Html.ActionLink("Home", "Index", "Home", new {@data_transition = "slide"}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:40:24.293

你需要设置`@class = "css-classname"`，像这样：

```
@Html.ActionLink("Home", 
                 "Index", 
                 "Home", 
                 new {@data_transition = "slide"}, 
                 new {@class="css-class-name"}) 
```

在 .css 中

```
.css-class-name{
    background-image: your image;
} 
```

# python - 在干净的字段中包含验证 - Django

> ID：12278514
> 
> 赞同：0
> 
> 时间：2012-09-05T09:39:28.633
> 
> 标签：python, django, forms, validation

由于 django 中的内置验证器接受，即使只是将空格输入到字段中。我想要一个验证，如果只输入空格，那么它必须引发验证错误。我有一个这样的领域：

```
name = forms.CharField(max_length=200) 
```

在外部使用验证器，即编写这样的函数是可行的。

```
def validate_spaces(value):
  if value.strip() == '':
     raise ValidationError(u"You must provide more than just whitespace.") 
```

但是，我在想是否可以使用 form.clean() 方法来完成，即无需在外部编写任何额外的函数。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:03:53.240

您可以通过这种方式向 form.clean() 添加自定义行为：

```
class YourForm(forms.Form):
    # Everything as before.
    ...

    def clean_name(self):
        data = self.cleaned_data['name']
        if data.strip() == '':
            raise forms.ValidationError(u"You must provide more than just whitespace.")

        # Always return the cleaned data, whether you have changed it or
        # not.
        return data 
```

但是，如果您想创建一种自动获得此类验证的字段，您可以添加一个像这样的新类

```
class NoSpacesCharField(forms.CharField):
    def validate(self, value):
        # Use the parent's handling of required fields, etc.
        super(NoSpacesCharField, self).validate(value)

        if value.strip() == '':
            raise ValidationError(u"You must provide more than just whitespace.") 
```

然后`NoSpacesCharField`像通常使用 forms.CharField 一样使用。

我目前无法测试此代码，因此其中可能存在奇怪的扭结，但它应该可以帮助您完成大部分工作。有关 Django 中表单验证的更多信息，请参阅[https://docs.djangoproject.com/en/dev/ref/forms/validation/](https://docs.djangoproject.com/en/dev/ref/forms/validation/)

# c# - 在 Windows 窗体应用程序中将 XSD 文件作为嵌入式资源访问

> ID：12278516
> 
> 赞同：2
> 
> 时间：2012-09-05T09:39:33.590
> 
> 标签：c#, winforms, embedded-resource

我有一个名为 SystemData.xsd 的 XSD，它的构建操作设置为嵌入式资源。在我的表单中，在 Load 事件中，我正在调用

```
this.assembly = Assembly.GetExecutingAssembly(); 
```

然后我试图这样获取资源：

```
StreamReader schemaStream = new StreamReader( this.assembly.GetManifestResourceStream( "DataCaptureTool.UI.SystemData.xsd" ) ); 
```

这没有返回任何东西。我这样做正确吗？如果是这样，问题是否可能是我错误地引用了资源的完全限定名称空间？我怎样才能检查这是什么？

谢谢

斯图尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:28:16.993

如果您在查找嵌入资源时遇到问题，请在 ILDASM 中打开程序集，打开清单并查找“.mresource”部分。这些是您的嵌入式资源。检查您是否正在使用正确的名称查找资源。

如果找不到，则说明您没有嵌入该文件。检查属性窗口中的“构建操作”是否为“嵌入式资源”。

# sql - 复合主键的重新排序组合

> ID：12278521
> 
> 赞同：2
> 
> 时间：2012-09-05T09:39:46.003
> 
> 标签：sql, sql-server, database-design, composite-primary-key, primary-key-design

我有一张桌子

```
documents
(
    year int not null, 
    number int not null, 
    document_types_id int not null, 
    ...
) 
```

主键是 year + number + document_types_id。

我认为更好的主键是 year + document_types_id + number。有没有办法在不删除和重新创建 PK 的情况下重新排序此组合（不是表中的列、PK 和 FK 组合），因为此 PK 在许多其他表中用作 FK。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:06:37.113

您必须先删除主键才能稍后更改它。否则，您会收到一条消息，即一张表上不能有两个主键。

**但这**没问题，只要做

```
Alter Table myTable NOCHECK Constraint All 
```

然后随心所欲地改变你的桌子，然后做

```
Alter Table myTable CHECK Constraint ALL 
```

你很好。

MySQL 中的等价物是：

```
SET FOREIGN_KEY_CHECKS = 0; 
```

和

```
SET FOREIGN_KEY_CHECKS = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:50:45.847

您的外键引用您的主键，因此您的外键是 3 维的（年份 + 数字 + document_types_id）。如果您要摆脱一个维度，那么即使您尝试修改主键，您的约束也会告诉您无法摆脱给定的列，因此您应该先处理外键，然后才能修改你的主键。脚步：

1.  将所有外键写入一个列表，以便您知道之前的外键。

2.  摆脱所有引用主键的外键

3.  修改/重新创建您的主键

4.  根据新版本的主键重新创建外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:02:32.150

如果在其他表上删除 FK 是一个问题，那么您可以按该顺序使用这些列创建一个非聚集索引并提供提示（WITH INDEX(ALTER TABLE 语法没有为`ALTER CONSTRAINT`语句留下范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:02:24.203

不。在关系模型中，键中的属性没有有意义的排序。但在 SQL 中，有。外键的列与外键引用的主键或唯一键的列的对应关系是按序号位置，而不是按名称。

因此，键声明中的列的顺序是有意义的，如果当前有效地使用了该含义/顺序，那么您无法在不破坏当前使用的情况下更改它。

除了。该理论对关键属性/列的排序没有任何意义，这并非没有道理。与现有密钥相比，您认为“重新排序”密钥究竟“更好”的是什么？

# c++ - 比较 C++ 中的双精度值

> ID：12278523
> 
> 赞同：2
> 
> 时间：2012-09-05T09:39:54.927
> 
> 标签：c++

我有以下代码进行双重比较。为什么我在执行时变得不平等？

```
#include <iostream>
#include <cmath>
#include <limits> 

bool AreDoubleSame(double dFirstVal, double dSecondVal)
{
    return std::fabs(dFirstVal - dSecondVal) < std::numeric_limits<double>::epsilon();
}

int main()
{
double dFirstDouble = 11.304;
double dSecondDouble = 11.3043;

if(AreDoubleSame(dFirstDouble , dSecondDouble ) )
{
std::cout << "equal" << std::endl;
}
else
{
std::cout << "not equal" << std::endl;
}
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T09:42:12.337

2 双打的 epsilon 是`2.22045e-016`

> 根据定义，epsilon 是 1 和大于 1 的最小值之间的差，该数据类型可表示。

这些差异不止于此，因此，它返回 false

（**[参考](http://en.cppreference.com/w/cpp/types/numeric_limits/epsilon)**）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T09:41:23.493

不相等（根据您的功能），因为它们相差超过`epsilon`.

Epsilon 被定义为“*机器 epsilon（1 与可表示的大于 1 的最小值之间的差）* ” - 来源[http://www.cplusplus.com/reference/std/limits/numeric_limits/](http://www.cplusplus.com/reference/std/limits/numeric_limits/)。这大约是`2.22045e-016`（来源[http://msdn.microsoft.com/en-us/library/6x7575x3(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/6x7575x3(v=vs.71).aspx)）

如果你想改变 fucking 因子，比较另一个小的 double，例如：

```
bool AreDoubleSame(double dFirstVal, double dSecondVal)
{
    return std::fabs(dFirstVal - dSecondVal) < 1E-3;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T09:42:51.190

你的两个双打之间的差异是 0.0003。std::numeric_limits::epsilon() 比这小得多。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-07T11:39:29.867

`epsilon()`只是`1.0`和 之后可表示的下一个值之间的差`1.0`，即实际最小值。库函数`std::nextafter`可用于缩放任何数量级的数字的相等精度测试。

例如`std::nextafter`用于测试`double`相等性，通过测试 b 是否都是 <= 下一个小于 a 的数字 && >= 下一个大于 a 的数字：

```
bool nearly_equal(double a, double b)
{
  return std::nextafter(a, std::numeric_limits<double>::lowest()) <= b
    && std::nextafter(a, std::numeric_limits<double>::max()) >= b;
} 
```

当然，这仅`true`适用于 a & b 的位模式相同的情况。因此，进行（不正确的）天真的直接 a == b 比较是一种低效的方法，因此：

`double`要在缩放到可表示差异的某个因子内测试两个是否相等，您可以使用：

```
bool nearly_equal(double a, double b, int factor /* a factor of epsilon */)
{
  double min_a = a - (a - std::nextafter(a, std::numeric_limits<double>::lowest())) * factor;
  double max_a = a + (std::nextafter(a, std::numeric_limits<double>::max()) - a) * factor;

  return min_a <= b && max_a >= b;
} 
```

当然，使用浮点时，需要对计算精度进行分析，以确定表示误差是如何形成的，从而确定正确的最小因子。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T09:56:08.820

Epsilon 远小于 0.0003，因此它们显然不相等。

如果您想查看它的工作原理，请查看[http://ideone.com/blcmB](http://ideone.com/blcmB)

# c# - .NET SplitContainer 使用 C#

> ID：12278525
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:40:05.073
> 
> 标签：c#, .net, winforms, splitcontainer

我在 C# 窗口应用程序中使用 SplitContainer 工具

我想在拆分的容器面板中将一个表单替换为其他表单

我怎样才能做到这一点？

我想在 From1 作品中完成它的工作并显示 From2.. 替换拆分容器面板的相同位置...

但是这段代码不起作用......

```
public partial class Parent : Form{public Parent()
{
    InitializeComponent();
}

private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
{
    TreeNode node = treeView1.SelectedNode;

    if (node.Text.ToString().Equals("Control1"))
    {
        //MessageBox.Show(node.ToString());
        //Control1 conr1 = new Control1();
        ShowForm(1);
    }
    else if (node.Text.ToString().Equals("Control2"))
    {
        //MessageBox.Show(node.ToString());
        //Control2 conr2 = new Control2();
        ShowForm(2);
    }

}

public void ShowForm(int id)
{
    Form childObj = null;
    if (id == 1)
    {
        childObj = new Control1();

    }
    else
    {
        childObj = new Control2();
    }
    childObj.TopLevel = false;
    childObj.Visible = true;
    childObj.Parent = this.splitContainer1.Panel2;

    this.splitContainer1.Panel2.Controls.Clear();
    this.splitContainer1.Panel2.Hide();
    this.splitContainer1.Panel2.Controls.Add(childObj);
    this.splitContainer1.Panel2.Show();
    childObj.Show();
}

public Control2()
{
    InitializeComponent();
}

Parent bioAdMainForm = new Parent(); 
private void button1_Click(object sender, EventArgs e)
{
    //Control1 enrollmentForm = new Control1();
    //this.Hide();
    //enrollmentForm.Show();
    bioAdMainForm.ShowForm(1);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T09:57:25.027

你不能`Form`放入`Panel`. 表单旨在显示在单独的窗口中。您应该使用[`UserControl`](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol%28v=vs.110%29.aspx)后代而不是表单来实现您想要的。

# algorithm - 查找元素之间相距最远的子集

> ID：12278528
> 
> 赞同：14
> 
> 时间：2012-09-05T09:40:13.593
> 
> 标签：algorithm, proof

我有一个面试问题，我似乎无法弄清楚。给定一个大小为 N 的数组，找到大小为 k 的子集，使得子集中的元素彼此相距最远。换句话说，最大化元素之间的最小成对距离。

```
Example:

Array = [1,2,6,10]
k = 3

answer = [1,6,10] 
```

蛮力方法需要找到所有大小为 k 的子集，这在运行时是指数级的。

我的一个想法是从数组中均匀地获取值。我的意思是

1.  取第一个和最后一个元素
2.  找出它们之间的差异（在本例中为 10-1）并将其除以 k ((10-1)/3=3)
3.  从两端向内移动 2 个指针，从您之前的选择中挑选出 +/- 3 的元素。所以在这种情况下，你从 1 和 10 开始，找到最接近 4 和 7 的元素。那就是 6。

这是基于元素应该尽可能均匀分布的直觉。我不知道如何证明它有效/无效。如果有人知道如何或有更好的算法，请分享。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T11:38:51.253

这可以使用 DP 在多项式时间内解决。

正如您所提到的，第一步是对列表 A 进行排序。让 X[i,j] 成为从前 i 个元素 A 中选择 j 个元素的解决方案。

现在，X[i+1, j+1] = max( min( X[k,j], A[i+1]-A[k] ) ) 超过 k<=i。

我将把初始化步骤和子集步骤的记忆留给你处理。

在您的示例 (1,2,6,10) 中，它的工作方式如下：

```
 1    2   6   10
1   -    -   -    -
2   -    1   5    9
3   -    -   1    4
4   -    -   -    1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:55:45.617

我认为基本的想法是正确的。您应该首先对数组进行排序，然后取第一个和最后一个元素，然后确定其余元素。

我想不出一个多项式算法来解决这个问题，所以我会建议这两个选项之一。

一种是使用搜索算法，分支定界风格，因为您手头有一个很好的启发式方法：任何解决方案的上限都是到目前为止选择的元素之间间隙的最小大小，所以第一个猜测（均匀如您所建议的，间隔单元格）可以为您提供良好的基线，这将有助于立即修剪大部分分支。这适用于较小的值`k`，尽管最坏情况下的性能是`O(N^k)`.

另一种选择是从相同的基线开始，计算它的最小成对距离，然后尝试改进它。假设你有一个最小距离为 10 的子集，现在尝试用 11 得到一个。这可以通过贪心算法轻松完成 - 选择排序序列中的第一个项目，使其与前一个项目之间的距离更大- 或 - 等于您想要的距离。如果你成功了，尝试进一步增加，如果你失败了——没有这样的子集。

`k`后一种解决方案在数组较大且相对较大但数组中的元素相对较小的情况下会更快。如果它们受某个值 的约束`M`，则该算法将花费`O(N*M)`时间，或者稍有改进，`O(N*log(M))`，其中 N 是数组的大小。

正如 Evgeny Kluev 在他的回答中所建议的那样，最大成对距离也有一个很好的上限，可以在这些算法中的任何一种中使用。所以后者的复杂度实际上是`O(N*log(M/k))`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:43:55.817

我想你的套装是订购的。如果没有，我的答案会略有改变。

```
Let's suppose you have an array X = (X1, X2, ..., Xn)

Energy(Xi) = min(|X(i-1) - Xi|, |X(i+1) - Xi|), 1 < i <n

j <- 1
while j < n - k do
    X.Exclude(min(Energy(Xi)), 1 < i < n)
    j <- j + 1
    n <- n - 1
end while 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T08:12:56.737

```
$长度=长度（$数组）；
排序（$数组）；//对列表进行升序排序
$differences = ($array << 1) - $array; //获取每个值与下一个最大值之间的差
排序（$差异）；//对列表进行升序排序
$max = ($array[$length-1]-$array[0])/$M; //这是结果可以有多大的理论最大值
$结果 = 数组（）；
for ($i = 0; i < $length-1; $i++){
    $count += $差异[i];
    if ($length-$i == $M - 1 || $count >= $max){ //如果没有更多的硬币可以拿，或者我们已经超过或等于理论最大值，添加一个观点
        $result.push_back($count);
        $计数 = 0;
        $M--;
    }
}
返回最小值（$结果）

```

对于非代码人员：对列表进行排序，找到每 2 个顺序元素之间的差异，对该列表进行排序（按升序），然后循环遍历它，总结顺序值，直到您通过理论最大值或没有足够的元素剩余; 然后将该值添加到一个新数组并继续，直到到达数组的末尾。然后返回新创建的数组的最小值。

不过，这只是一个快速草稿。一目了然，这里的任何操作都可以在线性时间内完成（排序的基数排序）。

例如，对于 1、4、7、100 和 200 且 M=3，我们得到：

```
$差异 = 3, 3, 93, 100
$max = (200-1)/3 ~ 67
然后我们循环：
$count = 3, 3+3=6, 6+93=99 > 67 所以我们推 99
$count = 100 > 67 所以我们推 100
最小（99,100）= 99

```

将其转换为我留给读者的设置解决方案是一个简单的练习（PS 在一直阅读一本书之后，我一直想说：P）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-06T06:54:24.910

你可以做到这一点，`O(n*(log n) + n*log(M))`在哪里。`M``max(A) - min(A)`

这个想法是使用二进制搜索来找到可能的最大分离。

首先，对数组进行排序。然后，我们只需要一个辅助函数，它接收一个 distance `d`，并贪婪地构建可能的最长子数组，其中连续元素至少相隔`d`. 我们可以及时做到这一点`O(n)`。

如果生成的数组的长度至少为`k`，则可能的最大间隔为`>=d`。否则，它严格小于`d`。这意味着我们可以使用二进制搜索来找到最大值。使用一些技巧，您可以缩小二分搜索的“低”和“高”界限，但它已经如此之快，以至于排序将成为瓶颈。

Python代码：

```
def maximize_distance(nums: List[int], k: int) -> List[int]:
    """Given an array of numbers and size k, uses binary search
    to find a subset of size k with maximum min-pairwise-distance"""
    assert len(nums) >= k

    if k == 1:
        return [nums[0]]

    nums.sort()

    def longest_separated_array(desired_distance: int) -> List[int]:
        """Given a distance, returns a subarray of nums
        of length k with pairwise differences at least that distance (if
        one exists)."""

        answer = [nums[0]]

        for x in nums[1:]:

            if x - answer[-1] >= desired_distance:
                answer.append(x)

                if len(answer) == k:
                    break

        return answer

    low, high = 0, (nums[-1] - nums[0])

    while low < high:
        mid = (low + high + 1) // 2

        if len(longest_separated_array(mid)) == k:
            low = mid
        else:
            high = mid - 1

    return longest_separated_array(low) 
```

# winapi - 用于 DeviceIOControl 的 SetWindowsHookEx，要使用什么 hookid？

> ID：12278529
> 
> 赞同：0
> 
> 时间：2012-09-05T09:40:16.677
> 
> 标签：winapi, hook, deviceiocontrol

```
HHOOK WINAPI SetWindowsHookEx(
  _In_  int idHook,
  _In_  HOOKPROC lpfn,
  _In_  HINSTANCE hMod,
  _In_  DWORD dwThreadId
); 
```

在 MSDN 列出的可用 idHook 值上，有：

*   WH_CALLWNDPROC
*   WH_CALLWNDPROCRET
*   WH_CBT WH_DEBUG
*   WH_FOREGROUNDIDLE
*   WH_GETMESSAGE
*   WH_JOURNALPLAYBACK
*   WH_JOURNALRECORD
*   WH_KEYBOARD
*   WH_KEYBOARD_LL
*   WH_MOUSE
*   WH_MOUSE_LL
*   WH_MSGFILTER
*   WH_SHELL
*   WH_SYSMSGFILTER

那么，钩子 DeviceIOControl 函数（用于控制台应用程序）应该使用什么 idHook？或者我可以使用其他一些钩子方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:43:35.623

`DeviceIOControl`用于与驱动程序交互，并且在用户模式下提供的非挂钩窗口允许挂钩驱动程序交互，相反，您最好使用 Windows DDK/WDK/Windows SDK 编写过滤器（取决于您所针对的 Windows 版本）。

# android - Android ICS API 14 - Camera.Face 人脸识别

> ID：12278531
> 
> 赞同：6
> 
> 时间：2012-09-05T09:40:23.460
> 
> 标签：android, face-recognition

尝试使用 Camera.Face 类中的 Android 4 API 14 人脸识别。

我很难获取面部坐标 [左/右眼、嘴巴] 的值。

我使用的设备是三星 Galaxy Tab 2 [GT-P5100] 与 Android 4.0.4

我正在初始化面部检测，类似于下面的代码片段，并且在上述设备上运行时， *camera.getParameters().getMaxNumDetectedFaces()的值返回为 3。*

现在，当人脸被引入到表面框架并在人脸检测侦听器中检测到时，它会返回*faces[0].rect.flattenToString()*中的值来识别人脸在表面上的位置。然而，其余的值，即面部 ID、左/右眼和嘴巴分别返回为 -1 和 Null。

此行为在[文档](http://developer.android.com/reference/android/hardware/Camera.Face.html "安卓文档")中描述为

> 这是一个可选字段，可能并非所有设备都支持。如果不支持，该值将始终设置为 null。可选字段被支持为一组。它们要么都是有效的，要么都不是。

所以问题是我是否遗漏了什么，或者仅仅是我的设备不支持在 Camera.Face 中找到的 Android api 人脸识别？

值得一提的是，同一设备提供人脸登录设备，这是通过用户设置进行配置的。

```
 FaceDetectionListener faceDetectionListener = new FaceDetectionListener(){

    @Override
    public void onFaceDetection(Face[] faces, Camera camera) {

        if (faces.length == 0){
            prompt.setText(" No Face Detected! ");
        }else{
            prompt.setText(String.valueOf(faces.length) + " Face Detected :) [ "
                    + faces[0].rect.flattenToString()
                    + "Coordinates : Left Eye - " + faces[0].leftEye + "]"
            ) ;
            Log.i("TEST", "face coordinates = Rect :" + faces[0].rect.flattenToString());
            Log.i("TEST", "face coordinates = Left eye : " + String.valueOf(faces[0].leftEye));
            Log.i("TEST", "face coordinates = Right eye - " + String.valueOf(faces[0].rightEye));
            Log.i("TEST", "face coordinates = Mouth - " + String.valueOf(faces[0].mouth));
        } 
```

......

```
 if (camera != null){
        try {
            camera.setPreviewDisplay(surfaceHolder);
            camera.startPreview();

            prompt.setText(String.valueOf(
                    "Max Face: " + camera.getParameters().getMaxNumDetectedFaces()));
            camera.startFaceDetection();
            previewing = true;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:01:04.007

在您的初始化代码中，您需要为相机设置人脸检测侦听器。

# ruby-on-rails - 设计authenticate_user

> ID：12278534
> 
> 赞同：7
> 
> 时间：2012-09-05T09:40:27.070
> 
> 标签：ruby-on-rails, devise

帮助我解决这个问题：

我有 2 个模型（管理员和用户）-> 使用设计创建，并且我有 post_controller：

问题出现了：

如果我有一个模型（ user.rb ）-> 在我的控制器中，我会说：

```
before_filter :authenticate_user!, :except => [:show, :index] 
```

但我有 2 个模型，我希望用户可以访问后控制器的“显示”和“索引”操作，并且管理员可以访问所有操作。

我做这样的事情：

```
 before_filter :logged_in
.
.
.
    private
        def logged_in
          if admin_signed_in?

          else 
            authenticate_user!
          end   
        end 
```

但我想改变我的字符串：

`authenticate_user!`

像这样的东西：

`:authenticate_user!, :except => [:show, :index]`
但 except 指的是 before_filter

我该怎么做（没有'cancan' gem）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T09:55:46.303

尝试使用两个前置过滤器 - 一个用于管理员操作，另一个用于管理员或用户操作。

```
# ensure admin for other actions
before_filter :check_admin_logged_in!, :except => [:show, :index]

# ensure user or admin logged in for these actions (:only option is optional)
before_filter :check_user_logged_in!, :only => [:show, :index]

private
    def check_admin_logged_in! # admin must be logged in
        authenticate_admin!
    end
    def check_user_logged_in! # if admin is not logged in, user must be logged in
      if !admin_signed_in?
        authenticate_user!
      end   
    end 
```

# android - 这是比较意图的正确方法吗？

> ID：12278536
> 
> 赞同：4
> 
> 时间：2012-09-05T09:40:32.753
> 
> 标签：android

这是比较正确的方法`Intents`吗？`Intent`无论传入的是`android.Intent.action.VIEW`（intent.getAction() 返回的值），我都不会进入 if/else ：

```
 private void handleIntent(Intent intent) {
Log.d(TAG, intent.getAction()); // -> android.Intent.action.VIEW
            if (Intent.ACTION_VIEW.equals(intent.getAction())) {
                ShowToast.showToast(this, "Something..."); // Never get here
            } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
                String query = intent.getStringExtra(SearchManager.QUERY);
                showResults(query);
            }
        } 
```

**更新**：为什么`intent.getAction()`返回`android.Intent.action.VIEW`（大写“i”）应该`android.intent.action.VIEW`按照[规范](http://developer.android.com/reference/android/content/Intent.html#ACTION_VIEW)返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:17:38.567

我找到了大写“i”的来源。只要我使用的是`SearchView`我自己指定`Intent`new 时要使用的内容`Activity`，所以我在这里犯了一个错误：

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
            android:label="@string/appname"
            android:hint="@string/search_hint"
            android:searchSuggestAuthority="my.package.dataproviders.TicketSuggestionProvider"
            android:searchSuggestIntentData="content://my.package.dataproviders.TicketSuggestionProvider/titleslist"
            android:searchSuggestIntentAction="android.Intent.action.VIEW" // HERE IT IS
            android:searchSuggestSelection=" ?">
</searchable> 
```

# html - 内容可编辑的数学元素？

> ID：12278539
> 
> 赞同：0
> 
> 时间：2012-09-05T09:40:40.603
> 
> 标签：html, math, contenteditable

我知道我们可以创建 contentEditable `p`、`div`、`span`等......

但是如何创建 contentEditable`math`元素，例如：

```
<math contenteditable>
.....
</math> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:24:54.483

该`contenteditable`属性是 HTML 的一部分，因此不希望它适用于 MathML 标记，并且测试表明相同。

在 HTML 中使用 MathML 时，可以将`math`元素包装在可编辑的 HTML 容器中，例如`<div contenteditable><math ...>...</math></div>`. 但是，尽管这使文本可编辑，但它似乎只能作为文本进行编辑。例如，当您`<mi>A</mi>`在浏览器中通过将 A 替换为 B 进行编辑时，它在文档树中就变成了 B，一个没有标记的字符（因此以直立样式出现，而不是斜体）。

所以基本上答案似乎是“不”。</p>

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-05T10:09:45.130

在这里，您将了解给定内容的可编辑元素

[可在 HTML 5 中编辑的内容](http://html5demos.com/contenteditable)

[还要检查相同的代码](http://html5demos.com/contenteditable#view-source)

希望这是你需要的。

# facebook - $facebook->getUser() 使用 PHP SDK 返回 0

> ID：12278540
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:40:48.263
> 
> 标签：facebook, jquery-ui-dialog, facebook-opengraph

我刚刚开始进行 Facebook 应用程序开发。几周前我从 Facebook 下载了 PHP SDK。以下是我写的第一段代码。

```
<?php

   require 'src/facebook.php';
   $app_id = 'My APP ID';
   $application_secret = 'My APP Secret';

   $facebook = new Facebook(array(
  'appId'  => $app_id,
  'secret' => $application_secret,
  'cookie' => true, // enable optional cookie support
));
$uid = $facebook->getUser();
    echo $uid;
?> 
```

但即使我已经在其他选项卡中登录了我的 Facebook 帐户，它总是给我 0。我的 Canvas URL 指向我的本地主机，因为我只在本地机器上托管了这个应用程序。

我几乎阅读了与此问题相关的所有帖子，但我无法以某种方式解决此问题。如果有人可以帮助我解决此问题，那将非常有帮助。

干杯。

阿杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:36:35.940

除非您已授权该应用程序，否则代码将始终返回 0 - 即使您在其他地方登录 facebook。通过转到输出的 URL 登录到您的应用程序`$facebook->getLoginUrl();`

然后，您会发现`$facebook->getUser()`将返回正确的用户 ID。

# jquery - 删除最后一个底部边框

> ID：12278541
> 
> 赞同：0
> 
> 时间：2012-09-05T09:40:52.743
> 
> 标签：jquery

我正在使用 jQuery 删除 div 中的最后一个底部边框，如下所示：

```
$(document).ready(function(){

$("#containerNewBuildings border-bottom:last").css("border-bottom", "none")

}); 
```

但由于某些未知原因，它不起作用。我在代码中做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:41:25.317

选择器仅适用于 DOM 元素，不适用于 CSS 属性。改为这样做：

```
$(document).ready(function(){

$("#containerNewBuildings").css("border-bottom", "none");

}); 
```

**编辑**：“是的，但我在一些菜单选项下方使用了几个底部边框，但这只是我要删除的最后一个”

回答：

```
$(".myContainerOfMenuOptions").children().last().css("border-bottom", "none"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:47:02.677

如果您只希望最后一个#containerNewBuilding 没有您正在寻找的边框底部

```
$(document).ready(function(){
     $("#containerNewBuildings:last").css("border-bottom", "none");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:43:23.090

修改你的选择器

将 $("#containerNewBuildings border-bottom:last") 转换为 $("#containerNewBuildingst")

# internet-explorer - 在 google.co.uk 上，为什么我的网站在 Firefox 中的排名高于其他桌面浏览器？

> ID：12278542
> 
> 赞同：1
> 
> 时间：2012-09-05T09:40:59.037
> 
> 标签：internet-explorer, firefox, google-chrome, seo

对于[https://www.google.co.uk/search?q=mobile+website+design](https://www.google.co.uk/search?q=mobile+website+design)，这是我的网站 - [http://mobilewebexpert.co.uk/](http://mobilewebexpert.co.uk/) - 列出的位置：

即：第四。铬：第四。歌剧：第四。野生动物园：第四。火狐：第一。Firefox（使用 Chrome 用户代理）：第 1 个。Firefox（使用 Chrome 用户代理并删除所有 cookie）：第 1 个。

...他们都同意，除了 Firefox。而且，正如您所看到的，似乎不是 Google 决定我的网站应该在 Firefox 中排名更高，因为在最后两个测试中，Firefox 报告自己是 Chrome。

有谁知道为什么 Firefox 的结果会如此不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:05:33.307

您可能已登录到您的 Google 帐户，该帐户可以个性化您的结果。

浏览器对实际的 SERP 没有任何影响。

# jsp - JDBC 表只更新第一行

> ID：12278544
> 
> 赞同：0
> 
> 时间：2012-09-05T09:41:05.327
> 
> 标签：jsp, jdbc

嗨，当我尝试更新 jdbc 表时，只有第一行得到更新，下面是它的代码。尽管我每行都有一个单独的按钮，但我单击的任何按钮都将输入值作为第一行。

```
<tr>
           <td><%=rs.getString("DBID")%></td>
           <td><input type="text" name="prev" id="prev" value="<%=rs.getString("Query_Raised")%>" border=''></td>
           <td><%=rs.getString("TR")%> </td>
           <td><%=rs.getString("Query_Answered")%></td>
           <td><%=rs.getString("TA")%></td>
           <td><input type="submit" value="Edit">
       </tr> 
```

并且为了比较我使用了下面的（对于 where 条件），它也只取第一行的值

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body><form method="post" action="Up_Query_DB.jsp">
        <table><tr><td> <input type="text" id="xyz" name="xyz" value="<%=request.getParameter("prev")%>"></td></tr>
            <tr><td><INPUT TYPE="TEXT" NAME="updat" id="updat"></td></tr>
            <tr><td><input type="submit" value="Update"></td></tr></table></form>
</body> 
```

我使用的更新是

```
<% try
                 {
   String sc=request.getParameter("xyz");
   String upd=request.getParameter("updat");
   ps=con.prepareStatement("Update Scope1 Set Query_Raised='"+upd+"' where Query_Raised='"+sc+"'");
   int i=ps.executeUpdate();
   if(i==1)
                 {
       String redirectURL= "View Queries.jsp";
       response.sendRedirect(redirectURL);

   }
         else{
       out.print("Erro");
         }
 }
   catch(Exception e)
                   {
    out.println("error");

   }%> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:02:13.943

1) 它有助于编写有效的 HTML
`<td><input type="submit" value="Edit"></td>`
2) 即使每一行都有一个编辑按钮，但您无法知道在提交表单时实际按下了哪些按钮 - 它们都是相同的。
实现多行编辑的最常见方法是为每一行设置一个单独的表单。除非您希望能够编辑多行然后一次提交所有更改，在这种情况下，您需要区分行的数据 - 通过为数据输入字段提供唯一名称。

稍后编辑：
3）基于您打算更改的值更新表行是一个坏主意，其中一个原因是您的查询可能会更新您从未知道甚至存在的行。

```
<tr>
<form ... >
<td> <input type="hidden" name="recordID" value="%dynamicRecordIDFromYourDB%" /> </td>
...
<td> <input type="text" name="data" value="%updatableDataFromYourDB" />
<td> <input type="submit" ... />
</form>
</tr> 
```

上面的代码对于单行更新选项很常见。然后您的更新 SQL 将类似于：

```
sqlString = "Update tableName Set updatableFiled ='" + data + "' where recordID = " + recordID; 
```

# java - mac osx 上 java7 模式对话框的焦点问题

> ID：12278546
> 
> 赞同：8
> 
> 时间：2012-09-05T09:41:10.853
> 
> 标签：java, macos, swing, applet, modal-dialog

我一直在验证一个在 mac osx 的小程序上运行的 swing 应用程序。

在此验证期间，我发现模态对话框存在以下问题：

1.  当一个对话框打开并设置为 setModal(true) 时，它会阻止根窗口的内容，但是如果您单击根窗口上的某个位置，对话框会在它下方，但它应该保留在根窗口的顶部。
2.  如果对话框有 JTextInputField，即使单击它也不会获得焦点。

所以我创建了一个小程序来显示这个问题。你能帮我理解这里有什么问题吗？

```
package com.macosx.tests;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class DialogExample extends JApplet{

    private static final long serialVersionUID = 1L;
    private JPanel panel;
    private JButton openDialogBtn;

    private void doStart() {
        panel = new JPanel();
        panel.setPreferredSize(new Dimension(500,500));

        openDialogBtn = new JButton("open dialog");
        openDialogBtn.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent arg0) {
                ModalDialog dialog = new ModalDialog(panel, true);
                dialog.setVisible(true);
            }

        });
        panel.add(openDialogBtn);
        setContentPane(panel);
    }

    class ModalDialog extends JDialog {
        private static final long serialVersionUID = 1L;

        public ModalDialog(Component parent, boolean modal) {
            Dimension dimensionParentFrame = parent.getSize();
            setSize(new Dimension((parent == null) ? 300 : dimensionParentFrame.width / 2, 75));

            setModal(modal);
            setModalityType(ModalityType.APPLICATION_MODAL);

            JTextField txtField = new JTextField();
            add(txtField, BorderLayout.CENTER);
        }
    }

    @Override
    public void start() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    doStart();
                }
            });
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

使用上述创建一个 .jar 文件 (test.jar)。完成后，创建一个包含以下内容的 html 文件：

```
<html>
<head>
<title>Dialog test Applet</title>
</head>
<body>
<applet id="DialogTestApplet" height="800" width="600"
  code="com.macosx.tests.DialogExample"
  archive="test.jar">
</applet>
</div>
</body>
</html> 
```

完成后，运行 html 文件。您将看到一个带有灰色背景和一个按钮的小程序。然后尝试：

1.  单击按钮打开对话框。之后，单击灰色区域的某处：对话框位于浏览器窗口下方，但它应该保留在顶部，对吧？
2.  单击按钮打开对话框。之后单击对话框的文本字段并尝试编写一些内容：文本对话框没有获得焦点。

那么，我在这里做错了什么？请问有mac电脑的人可以测试一下吗？

谢谢

眼镜：

```
java.vendor    Oracle Corporation
java.version   1.7.0_07
os.name        Mac OS X
os.version     10.7.4

browser        firefox 15 
```

**注意：请注意，这仅在小程序在浏览器上运行且仅在 mac osx 上运行时才会发生。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:12:40.487

我找到了另一种解决方法。当窗口打开时，显示一个选项窗格几毫秒然后关闭它。它将焦点放在选项窗格上，然后返回对话框，允许忽略该错误。

将此代码片段添加到您的对话框构造函数中，它应该可以工作：

```
addWindowListener(new WindowAdapter(){
public void windowOpened(WindowEvent e){
    JOptionPane pane = new JOptionPane();
    final JDialog dialog = pane.createDialog("Please Wait");
    Timer timer = new Timer(50, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            dialog.dispose();
        }
    });
timer.setRepeats(false);
timer.start();
dialog.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:56:47.753

您应该在 ModalDialog 上放置一个“所有者”窗口。为此，您必须在 ModalDialog 构造函数中调用 super(owner) ，并且可以使用 检索组件的父`parent`窗口`SwingUtilities.getWindowAncestor(parent)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:05:25.363

我在 Mac 上使用 Safari 和 Firefox 的 Java 7 update 9 遇到了同样的问题。当我打开一个包含 JTextField 的 JDialog 时，无法访问 JTextField。

我确实找到了解决方案。我插入了从用户按下“显示对话框按钮”到执行显示按钮的代码的延迟。

例如：

```
ActionListener al = new ActionListener(){
    public void actionPerformed(ActionEvent ae){
        TitleDialog dialog = new TitleDialog(main.findParentFrame()); // My JDialog which contains a JTextField.
        dialog.setVisible(true);
    }
};
javax.swing.Timer timer = new javax.swing.Timer(1000, al);
timer.setRepeats(false);
timer.start(); 
```

我经历过，如果延迟缩短，解决方案将不起作用。

如果一个人使用它`SwingUtilities.invokeLater`来代替`javax.swing.Timer`它是行不通的。也许延迟`SwingUtilities.invokeLater`太短了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T13:20:23.473

我确认，我在 OS X 上的 JDK7 中运行的旧小程序存在相同的错误。正如海报所提到的，只有在浏览器 (ff) 中运行的小程序才能看到该错误，而不是 appletviewer。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T11:06:07.073

*   不是 Mac/OSX 用户，但这是关于`Focus`and的常见问题`JDialog`，

*   `JDialog`在运行时创建的情况下还有另一个问题，

*   `Focus`是基于属性的异步来自`Native OS`

*   只创建`JDialog`一次，然后再`re_use`创建`container`一次

*   `JDialog#setVisible``invokeLater()`也应该被包裹进去

*   可以强制`Focus`by`JTextField#setText(JTextField#getText())`包裹成`invokeLater()`

*   有[Dialog Focus](http://tips4java.wordpress.com/2010/03/14/dialog-focus/)，@camickr 的一个很好的解决方法

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T23:18:10.683

我可以验证这是 Safari 6 上的 Java 1.7 Update 7+ 和在 Mountain Lion 上运行的 Firefox 的问题。奇怪的是，在 Lion 上运行的早期版本的 Safari 上这不是问题，但在旧操作系统上的 Firefox 中却是一个问题。我非常渴望找到解决此问题的方法，因为我的许多 applet 用户都在 Mac 上。我发现的一种解决方法（无论如何都不够）是缩小窗口然后重新打开它。然后文本字段/文本区域变得可编辑。希望我们能找到一个更好的解决方案来解决这个烦人的要求。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T09:27:08.187

我想使用上面的解决方法（从对话框中打开对话框），但不显示任何对话框。这是不可见对话框的代码。

```
final JDialog dialog = new JDialog();
dialog.setUndecorated(true);
dialog.setSize(0, 0);
dialog.setModal(true);
dialog.pack(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-25T03:57:08.527

我发现了另一种解决方法。当从 JavaScript 调用 JDialog 时，它有一个焦点。

1.  创建一个小程序的方法，它将显示一个对话框
2.  从 JavaScript 调用此方法。

希望能帮助到你。顺便说一句，Java 教程中的 Web 启动示例有同样的问题[http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-11T08:34:52.397

我找到了解决方案。

```
GetDirectory varGetDirectory = new GetDirectory(new JFrame(),true);
varGetDirectory.setVisible(true); 
```

GetDirectory 是包含 JFileChooser 的 JDialog。

奇怪的是，所有 JDialog 对象都应该使用 new JFrame() 作为父级来调用，否则从一个父级窗口单击，会将顶部模态 JDialog 在 zOrder 中向后移动，并且它不能再设置在顶部。

我的问题和上面一样。当我从另一个 JDialog 创建 JDialog 时，新对话框出现在另一个之后。

为了把它放在首位，我已经如上所述设置了所有 JDialogs 的父级，它按照预期工作。

# html - 生成的电子邮件中未显示带有链接的行

> ID：12278550
> 
> 赞同：0
> 
> 时间：2012-09-05T09:41:15.893
> 
> 标签：html, email, grails

当用户询问时，我的应用程序需要发送生成的电子邮件。电子邮件发送没有问题（我在 Grails 中使用 Mail 插件）但是，里面有一行带有链接，这是整个邮件的目的。但是，在电子邮件中看不到它。代码是这样的：

```
'<head>'+
    '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>'+
'</head>'+
    '<body>'+
        '<table width="690px" height="390px;" border="0px;font-family:verdana">'+
                    '<tr>'+
                    '<td>'+
'<p style="font-size: 14px;line-height: 1.5;margin-bottom: 10px;margin-left: 25px;text-align: left;">Blahblahblah this is the URL:</p>'+
        '</td>'+
        '</tr>'+
        '<tr>'+
        '<td>'+
            '<p style="font-size: 14px;line-height: 1.5;margin-bottom: 10px;margin-left: 25px;text-align: left;"><a href="http://www.myurl.com/promocion/verPromocion?promocion='+promocion.nombre+'&recomendador='+compradorInstance.id+'"> </a> </p>'+
        '</td>'+
        '</tr>'+
    </table>
'</body>' 
```

我可以看到 <"p"> 被绘制，因为链接应该是一个空白区域，但链接没有显示。有人知道为什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:11:05.847

已解决...只需将 url 复制粘贴到 和 之间即可。这边走：

```
'<p style="font-size: 14px;line-height: 1.5;margin-bottom: 10px;margin-left: 25px;text-align: left;"><a href="http://www.tikcode.com/promocion/verPromocion?promocion='+promocion.nombre+'&recomendador='+compradorInstance.id+'"> http://www.tikcode.com/promocion/verPromocion?promocion='+promocion.nombre+'&recomendador='+compradorInstance.id+'</a> </p>'+ 
```

现在它已正确显示。

# java - Android 中的循环线程启动

> ID：12278552
> 
> 赞同：0
> 
> 时间：2012-09-05T09:41:16.893
> 
> 标签：java, android, multithreading

我有一个调用线程的 for cylce：

```
if(toModify[j]==1)
{
    getUpdate(methods_list[j],username, password);
} 
```

`getUpdate`是一个包含以下内容的方法：

```
new Thread(new Runnable() {
  public void run() {
      // *** some operations***
  }
}).start(); 
```

通过 for**循环**，我可以同时运行每个循环`Thread`。
但是，如果我希望每个都`Thread`在前一个停止后才开始，我可以使用以下技巧吗？

```
if(toModify[j]==1)
{
  int returnValue =  getUpdate(methods_list[j],username, password);
} 
```

并在方法的末尾添加`getUpdate`此代码行（在运行方法之外）：

```
return 1; 
```

使用上面的代码，每个线程只有在前一个停止的情况下才能启动？还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:04:00.093

> 但是，如果我希望每个线程仅在前一个线程停止后才启动，我可以使用 > 以下技巧吗？

这意味着您有严格的顺序执行，因此整个代码可以在同一个线程上。如果没有并行性，启动多个线程有什么意义？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:46:09.510

您可以使用[RetrantLock](http://developer.android.com/reference/java/util/concurrent/locks/ReentrantLock.html)

```
private final ReentrantLock lock = new ReentrantLock();

if(toModify[j]==1)        
  {   
      lock.lock();  // block until condition holds
 try {
   getUpdate(methods_list[j],username, password);         
 } finally {
   lock.unlock()
 }

} 
```

您还需要在从 getUpdate() 方法启动的线程上调用 join()。

```
Thread thread = new Thread(new Runnable() { 
        public void run() { 
        // *** some operations*** 
        } 
        }); 
    thread.start();
    thread.join(); 
```

# c++ - 指针和引用模板参数的模板问题

> ID：12278553
> 
> 赞同：0
> 
> 时间：2012-09-05T09:41:18.213
> 
> 标签：c++, templates

我试图理解为什么以下代码无法编译。

```
class X
{
public:
    template< typename T >
    void set( T & val )
    {
    }
};

int main( int c, char *v[] )
{
    X x;

    x.set( new int( 99 ) );        // 15
} 
```

在我的 solaris 编译器上，出现以下错误。

```
"x.cpp", line 15: Error: Could not find a match for X::set<X::T>(int*) needed in main(int, char**). 
```

我不明白为什么编译器不会引用指向 int 的指针并将类型“T”作为“int *”传递

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:42:52.520

它可以，但这是一个临时的；）

```
class X
{
public:
    template< typename T >
    void set( T const & val )  // add const here
    {
    }
}; 
```

并且**您不能将其绑定到非`const`引用**。

这将起作用的相同原因：

```
class X
{
public:
    template< typename T >
    void set( T & val )
    {
    }
};
int main( int c, char *v[] )
{
    X x;
    int * y = new int( 99 );
    x.set( y );        // 15
} 
```

在这里，`y`不再是暂时的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T09:44:45.267

表达式的结果`new`是一个右值，因此它不能绑定到非常量引用。

将您的模板声明为`void set(T val)`按值传递指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:58:19.560

您不能将临时对象绑定到非常量引用。

如果您需要保留该方法的签名，则需要创建一个变量，并将其传递给该方法：

```
class X
{
public:
    template< typename T >
    void set( T & val )
    {
    }
};

int main( int c, char *v[] )
{
    X x;

    int * p = new int( 99 );
    x.set( p );        // 15
} 
```

如果您可以更改方法的签名，请通过 const 引用或值传递参数。

# mysql - 2个不同列的表中的联合数据

> ID：12278556
> 
> 赞同：-9
> 
> 时间：2012-09-05T09:41:26.527
> 
> 标签：mysql, sql

我有 2 个表如下：

*   第一个表名`bkq`：在这张表上，我有 6 个名为 (etab-guib-nom-swift-data-dev) 的列

*   该表的第二个表名`bkdoscde`我有超过 15 个列，但我需要使用的是 (ETAF-GUIF-ETAE-GUIE-ETAR-GUIR-ETAB-GUIB) 所有这些列都与第一个表列中的数据联合：

    1.  `ETAB`在第二张表的 ETAF 和 ETAE 以及 ETAR 和 ETAB 列中命名了类似的数据。

    2.  在第二张表的 GUIF 和 GUIE 以及 GUIR 和 GUIB 列中命名`guib`相似数据 我需要在表号 1 列和表号 2 之间显示的 2 个表之间的联合数据。

以另一种方式，表 1 中名为 (etab) 的列具有在表 2 的列中使用的数据，我说以 (Eta--) 开头，并且名为 (guib) 的列的表 2 中的列的数据以 (gui-- ) 我需要从表 1 中提取我在第 1 段中提到的任何列中显示的数据。

我还需要在同一查询中显示表 1 中的列 (nom) 和 (swift)，它们不在表 2 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:01:21.603

如果我理解正确，在您的第一个表 [ **bkq** ] 的 6 列中，只有两列将参与 UNION OPERATION 即`etab,guib`因为它们对应于第二个表的列 [ **bkdoscde** ]

```
e.g. Table BKQ(1st Table)              BKDOSCDE(2nd Table)
              etab                     ETAF
              etab                     ETAE 
              etab                     ETAR 
              etab                     ETAB 
              guib                     GUIF 
              guib                     GUIE 
              guib                     GUIR 
              guib                     GUIB 
```

如果我的这个理解是正确的，那么你去吧

```
Select etab,guib,etab,guib,etab,guib,etab,guib From bkq
Union
Select ETAF,GUIF,ETAE,GUIE,ETAR,GUIR,ETAB,GUIB from bkdoscde 
```

**已编辑**

-- 在 union 中添加了 nom 和 swift 列

```
Select etab,guib,etab,guib,etab,guib,etab,guib,nom,swift From bkq
Union
Select ETAF,GUIF,ETAE,GUIE,ETAR,GUIR,ETAB,GUIB,null,null from bkdoscde 
```

希望这可以帮助

# xcode - 如何在 Xcode 中添加远程 IP 地址的 Mercurial 存储库（克隆），它显示“主机无法访问”

> ID：12278557
> 
> 赞同：0
> 
> 时间：2012-09-05T09:41:26.897
> 
> 标签：xcode, mercurial

我正在尝试为我的 iPhone 项目添加一个存储库（克隆），该项目属于（hg）mercurial 存储库。当我在管理器中输入项目路径（远程服务器）以添加存储库时，它显示“主机无法访问”。

但是，如果我使用源代码树或从终端获取克隆，它就可以正常工作。我找到了一些 SVN 的解决方案，但没有找到 HG 类型的解决方案。（使用 Xcode 4.4.1）

有人可以帮忙吗。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:15:18.253

尝试先在 finder 中连接到远程服务器。然后，您应该能够将其视为已安装的设备。然后在 xCode 中重试

# asp.net - 以全屏运行的 iPad 的 web 应用程序中的 window.open 替换现有窗口

> ID：12278559
> 
> 赞同：0
> 
> 时间：2012-09-05T09:41:34.723
> 
> 标签：asp.net, ipad, fullscreen, back, window.open

我正在为 iPad 编写一个简单的 (ASP.NET) Web 应用程序。它编写并且运行良好，但是它的一个功能是它提供 PDF 文件（以及其他文件）。为此，我使用 window.open 打开文件。

在 Safari 中完成此操作后，它可以完美运行。您单击按钮，文件在新选项卡中打开；然后，您可以关闭选项卡以返回上一个网页。

然而，现在以全屏模式运行应用程序 - 即设置适当的“元名称”并从主屏幕上的快捷方式 - 当您单击按钮加载文件时，它会加载全屏，无法返回最后一页.

因为它是一个文件，而不是一个网页，所以我不能放一个“返回”按钮，当你按下 iPad 按钮时，它只会关闭整个东西。

我知道以前有人问过这个问题，并且我已经阅读了许多类似的问题 - 其中最接近的是：

[https://stackoverflow.com/questions/9168236/web-app-hyperlinks](https://stackoverflow.com/questions/9168236/web-app-hyperlinks)

如果可能的话，最好（感谢我正在使用的控件库）使用javascript完成按钮单击 - 设置链接href并不容易。

结果是我真的只想从全屏 iPad Web 应用程序中创建一个新窗口，或者以某种方式允许“返回”导航......

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:48:19.807

在您的页面上创建一个 iframe，而不是使用一个`window.open`并将其设置为目标。

这样，您的 pdf 将在现有窗口中打开。

使用像 jQuery 这样的客户端 javascript 来设置它的样式，就像一个[对话框窗口](http://jqueryui.com/demos/dialog/)。

# html - 将字符串中包含的表格转换为 HTML

> ID：12278561
> 
> 赞同：0
> 
> 时间：2012-09-05T09:41:38.553
> 
> 标签：html, email, powershell

我有一张由不同领域的工作项目组成的表格。这是表格布局：

```
$table = @{Expression = {$_.Fields['Id'].Value}; Label = "Id"}, 
@{Expression = {$_.Fields['Work Item Type'].Value}; Label = "Work Item Type"}, 
@{Expression = {$_.Fields['Title'].Value}; Label = "Title"}, 
@{Expression = {$_.Fields['State'].Value}; Label = "State"},
@{Expression = {$_.Fields['Substate'].Value}; Label = "Substate"}, 
@{Expression = {$_.Fields['Assigned To'].Value}; Label = "Assigned To"}, 
@{Expression = {$_.Fields['CreatedBy'].Value}; Label = "Developer"},
@{Expression = {$_.Fields['QA Responsible'].Value}; Label = "QA Responsible"},
@{Expression = {$_.Fields['Iteration Path'].Value}; Label = "Iteration Path"} 
```

从这行代码`$workItems | Format-Table $table | Out-String`我得到一个像这样的表：

```
 Id Work Item Type  Title          State          Substate       Assigned To    Developer      QA Responsible    Iteration Path
         -- --------------  -----          -----          --------       -----------    ---------      -----------    --------------
      38479 Bug             Title1000000...Resolved       zzzzzzzzzzz... xxxxxxxxxxx... zzzzzzzzzzz... zzzzzzzzzzz     QA\2012 August
      34917 Task            Title2000000...Resolved       zzzzzzzzzzz... xxxxxxxxxxx                                  WebXXX\CCCCCC 
```

但是当我尝试将其转换为 HTML 时，我得到了不同的值。像这里的这些：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>HTML TABLE</title>
</head><body>
<table>
<colgroup>
<col/>
</colgroup>
<tr><th>*</th></tr>
<tr><td>305</td></tr>
</table>
</body></html> 
```

我只想用 HTML 格式化表格并通过电子邮件发送。我可以得到任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:48:20.433

删除`Out-String`cmdlet 的管道并重试，`Out-String`将您的对象转换为字符串：

```
$workItems | Format-Table $table | ConvertTo-Html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:40:13.570

好的，在谢伊的帮助下，我想通了。如果有人遇到类似问题，我会在这里发布答案。修复就在这条线上`$workItems | Format-Table $table | ConvertTo-Html`。它需要更改为`$workItems | Select-Object $table | ConvertTo-Html`.

谢伊你帮了我很多次，如果你碰巧在萨拉热窝，我会请你喝一杯:)

# delphi - Delphi - DBGrid 不显示 UTF8 计算字段

> ID：12278562
> 
> 赞同：1
> 
> 时间：2012-09-05T09:41:48.410
> 
> 标签：delphi, delphi-xe, firebird2.5, tdbgrid, fibplus

我有一个 TDBGrid 链接到一个 TDataSource，后面有一个 TFibDataSet。在数据集的 OnCalcFields 上，我尝试添加字符串“Russisch (русский)”。

```
procedure TForm1.pFIBDataSet1CalcFields(DataSet: TDataSet);
begin
  DataSource1.DataSet.FieldByName('Language').AsString := ('Russisch (русский)'); 
```

问题是在网格中结果显示为 :Russisch(????????)

```
 DataSource1.DataSet.FieldByName('Language').AsWideString :=('Russisch (русский)'); 
```

有相同的结果

FibDataBase 组件的 ConnectParams.Charset 设置为 UTF-8。我还设置了 DBParams 值`lc_ctype=UTF8`。

我在这里做错了什么？

LE：[Delphi XE、Firebird 和 UTF8——](https://stackoverflow.com/questions/10892779/delphi-xe-firebird-and-utf8)这并不能解决我的问题。

LE1：问题仅出现在计算字段上。实时数据“Russisch (русский)”正确显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:21:37.163

我猜你犯了我经常犯的同样的错误。当您创建这样的字段时：

![在此处输入图像描述](../Images/32c2aafc968537e414847d00487ffc1a.png)

它是`ANSI`。您必须选择`WideString`它是 unicode：

![在此处输入图像描述](../Images/2690cbbc08eea2eccf822968763cd42d.png)

# jquery - CSS：重新排列 div 元素

> ID：12278564
> 
> 赞同：2
> 
> 时间：2012-09-05T09:42:11.813
> 
> 标签：jquery, html, css

我在一个容器中有多个`<div>`相同`width`但不同的标签。`height`当浏览器`resized`和`<div>`元素重新排列时，它们之间会有很多空格。例如下面的 HTML：

```
<div class="wrap">
    <div class="box">
        This has less height
    </div>
    <div class="box">
        This has more height
    </div>
    <div class="box">
        This has less height.
    </div>
</div> 
```

现在，当浏览器调整大小时，最后一个 div 将移动到第一个 div 下方的左侧，但它们之间有空白空间，因为中间 div 具有更高的高度。请看图片。

![在此处输入图像描述](../Images/c1ae86578bd36a61953a2b5eb9792a6a.png) 是否可以使用纯 CSS 排列这些 div？我找不到方法，所以我尝试了 jQuery `masonry plugin`，它工作正常，但问题是它通常不会快速响应（例如，当你第一次打开页面时，布局完全混乱，但如果你刷新页面会很好）。

因此，如果仅使用 CSS 是不可能的，有没有办法让它在没有复杂插件的情况下工作（例如仅使用 jQuery？）

**jsFiddle：http:** [//jsfiddle.net/HS2Zh/](http://jsfiddle.net/HS2Zh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:59:04.667

如果您的任务是消除差距，您可以使用此代码删除它

```
 var h = 0;
            $('.box').each(function() 
            { 
                h = Math.max(h, $(this).height()); 
            }).height(h); 
```

它将唯一的高度（.box 的最大高度）分配给所有 .box 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:57:18.773

这可以通过使用 jquery masonry 插件来完成。希望此链接对您有所帮助[http://masonry.desandro.com/](http://masonry.desandro.com/)

如果您已经在使用该插件，请尝试在块之间留出一些间隙，以便它有自由空间流动

# multithreading - 使用 tkinter + pyhook 时冻结。两个事件循环和多线程

> ID：12278570
> 
> 赞同：3
> 
> 时间：2012-09-05T09:42:23.457
> 
> 标签：multithreading, tkinter, event-loop, pyhook

我正在 python 2.7 中编写一个工具来记录用户按下键盘或鼠标按钮的次数。点击量将显示在屏幕左上角的一个小黑框内。即使另一个应用程序处于活动状态，该程序也会记录点击次数。

它工作正常，除非我将鼠标移到框上。然后鼠标冻结几秒钟，然后程序再次运行。如果我再次将鼠标移到框上，鼠标会再次冻结，但这一次程序崩溃。

我试过注释掉 pumpMessages() 然后程序就可以工作了。这个问题看起来很像这个问题[pyhook+tkinter=crash](https://stackoverflow.com/questions/6765362/pyhook-tkinter-crash)，但没有给出解决方案。

其他答案表明，在 python 2.6 中同时使用 wx 和 pyhook 时，dll 文件存在错误。我不知道这是否相关。

我自己的想法是，这可能与并行运行的两个事件循环有关。我已经读过 tkinter 不是线程安全的，但是我看不到如何使该程序在单个线程中运行，因为我需要同时运行 pumpmessages() 和 mainloop()。

总结一下：为什么我的程序在鼠标悬停时冻结？

```
import pythoncom, pyHook, time, ctypes, sys
from Tkinter import *
from threading import Thread

print 'Welcome to APMtool. To exit the program press delete'

## Creating input hooks

#the function called when a MouseAllButtonsUp event is called
def OnMouseUpEvent(event): 
    global clicks
    clicks+=1
    updateCounter()
    return True

#the function called when a KeyUp event is called
def OnKeyUpEvent(event): 
    global clicks
    clicks+=1
    updateCounter()
    if (event.KeyID == 46):
        killProgram()
    return True

hm = pyHook.HookManager()# create a hook manager

# watch for mouseUp and keyUp events
hm.SubscribeMouseAllButtonsUp(OnMouseUpEvent)
hm.SubscribeKeyUp(OnKeyUpEvent)

clicks = 0

hm.HookMouse()# set the hook
hm.HookKeyboard()

## Creating the window
root = Tk()
label = Label(root,text='something',background='black',foreground='grey')
label.pack(pady=0) #no space around the label
root.wm_attributes("-topmost", 1) #alway the top window
root.overrideredirect(1) #removes the 'Windows 7' box around the label

## starting a new thread to run pumMessages() and mainloop() simultaniusly
def startRootThread():
    root.mainloop()

def updateCounter():
    label.configure(text=clicks)

def killProgram():
    ctypes.windll.user32.PostQuitMessage(0) # stops pumpMessages
    root.destroy() #stops the root widget
    rootThread.join()
    print 'rootThread stopped'

rootThread = Thread(target=startRootThread)
rootThread.start()

pythoncom.PumpMessages() #pump messages is a infinite loop waiting for events

print 'PumpMessages stopped' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:03:23.060

从 Tkinter 需要在主线程中运行而不是在这个线程之外调用的信息中，我找到了一个解决方案：

我的问题是两者都`PumpMessages`需要`mainLoop`在主线程中运行。为了接收输入并显示带有点击量的 Tkinter 标签，我需要在运行`pumpMessages`和短暂运行之间切换`mainLoop`以更新显示。

为了让`mainLoop()`自己退出，我使用了：

```
after(100,root.quit()) #root is the name of the Tk()
mainLoop() 
```

所以在 100 毫秒后`root`调用它的`quit`方法并跳出它自己的主循环

为了摆脱 pumpMessages，我首先找到了指向主线程的指针：

```
mainThreadId = win32api.GetCurrentThreadId() 
```

然后我使用了一个新线程将其发送`WM_QUIT`到主线程（注意`PostQuitMessage(0)`只有在主线程中调用它才有效）：

```
win32api.PostThreadMessage(mainThreadId, win32con.WM_QUIT, 0, 0) 
```

然后可以创建一个在`pumpMessages`和之间变化的 while 循环`mainLoop`，更新其间的 labeltext。在两个事件循环不再同时运行之后，我没有遇到任何问题：

```
def startTimerThread():
    while True:
        win32api.PostThreadMessage(mainThreadId, win32con.WM_QUIT, 0, 0)
        time.sleep(1)

mainThreadId = win32api.GetCurrentThreadId()
timerThread = Thread(target=startTimerThread)
timerThread.start()

while programRunning:
    label.configure(text=clicks)
    root.after(100,root.quit)
    root.mainloop()
    pythoncom.PumpMessages() 
```

感谢 Bryan Oakley 提供有关 Tkinter 的信息和 Boaz Yaniv 提供[从子线程停止 pumpMessages()所需的信息](https://stackoverflow.com/questions/6023172/ending-a-program-mid-run/6023566#6023566)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T12:13:34.997

我已经通过多处理解决了这个问题：

1.  主进程处理 GUI (MainThread) 和一个从第二个进程消耗消息的线程

2.  子进程挂钩所有鼠标/键盘事件并将它们推送到主进程（通过 Queue 对象）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:19:26.057

Tkinter 的设计目的不是从除主线程之外的任何线程运行。将 GUI 放在主线程中并将调用`PumpMessages`放在单独的线程中可能会有所帮助。尽管您必须小心，不要从其他线程调用任何 Tkinter 函数（可能除外`event_generate`）。

# html - HTML文本输入：按下输入时避免提交

> ID：12278571
> 
> 赞同：29
> 
> 时间：2012-09-05T09:42:25.010
> 
> 标签：html, textbox

我有一个 HTML 输入，它是一个文本字段。当我按回车时，这将调用提交，这是正常的。

现在，当在该文本框上单击 Enter 时，我想做其他事情。

我正在尝试这样的事情：

```
<input type="text" 
       id="first_page"  
       onPaste="" 
       onkeydown="if (event.keyCode == 13) alert('enter')" /> 
```

警报运行良好，但提交仍然完成。之后我的页面正在重新加载。

请问你能帮帮我吗。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-05T09:45:49.130

写`return false;`并检查

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-05T09:46:23.443

使用 jQuery

```
<script>
            $('#first_page').keypress(function(e) {
              if (e.keyCode == '13') {
                 e.preventDefault();
                 //your code here
               }
            });​
        </script> 
```

使用 javascript

```
<input type="text" id="first_page"  onPaste="" onkeydown="if (event.keyCode == 13) { alert('enter');return false;}" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-17T15:29:03.830

其他选项是使用 onkeypress

```
<input type="text" id="first_page"  onPaste="" onkeypress="if (event.keyCode == 13) {alert('enter'); return false;}" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T09:48:44.803

您可以尝试以下脚本：

```
 <script>
 function checkEnter(event)
{
    if (event.keyCode == 13) 
   {
       alert('enter')
       return false;
    }
} 
```

和HTML：

```
<input type="text" id="first_page"  onPaste="" onkeydown="return checkEnter(event);" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T09:46:37.917

之后写下面的代码`alert('enter')`

```
return false; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T09:45:09.957

您应该`false`在`keydown`事件处理函数中返回，以防止进一步处理事件。

此外，您可能会发现以下问题很有用：[Prevent Users from submit form by hit enter](https://stackoverflow.com/q/895171/851811)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-02T11:40:31.367

```
 $(function () {$('#form').validationEngine(); }); 
```

它适用于我的 mvc 问题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-03T01:45:04.737

使用这个，它在我的工作。

在 keydown 上替换：

```
onkeydown="if (event.keyCode == 13 || event.which == 13) event.preventDefault();" 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-03-06T07:57:48.593

使用 jquery 您可以避免所有提交或某些元素

```
$("#form").submit(function(e) {
    e.preventDefault();
}); 
```

# azure - 如何让 azure webrole 记录所有 404

> ID：12278572
> 
> 赞同：3
> 
> 时间：2012-09-05T09:42:29.097
> 
> 标签：azure, azure-storage, azure-blob-storage, azure-web-roles

我一直在尝试让我的 MVC 项目使用 azure 进行日志记录，但到目前为止还没有取得太大的成功。

我的`ServiceConfiguration.Cloud.cscfg`文件中有一个诊断连接字符串，它指向我的 blob 存储：

```
 ...
  <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.DiagnosticsConnectionString" value="**ConectionString**" />
</ConfigurationSettings> 
```

我`web.config`的跟踪设置

```
 ...
    <tracing>
      <traceFailedRequests>
        <remove path="*"/>
        <add path="*">
          <traceAreas>
            <add provider="ASP" verbosity="Verbose" />
            <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
            <add provider="ISAPI Extension" verbosity="Verbose" />
            <add provider="WWW Server" areas="Authentication,Security,Filter,StaticFile,CGI,Compression,Cache,RequestNotifications,Module" verbosity="Verbose" />
          </traceAreas>
          <failureDefinitions timeTaken="00:00:15" statusCodes="400-599" />
        </add>
      </traceFailedRequests>
    </tracing>
  </system.webServer> 
```

我`WebRole.cs`的有以下内容

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.Diagnostics;
using Microsoft.WindowsAzure.ServiceRuntime;

namespace MvcWebRole1
{
    public class WebRole : RoleEntryPoint
    {
        public override bool OnStart()
        {
         // Get the factory configuration so that it can be edited
         DiagnosticMonitorConfiguration config = DiagnosticMonitor.GetDefaultInitialConfiguration();

         // Set scheduled transfer interval for infrastructure logs to 1 minute
         config.DiagnosticInfrastructureLogs.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(1);

         // Specify a logging level to filter records to transfer

         config.DiagnosticInfrastructureLogs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;

         // Set scheduled transfer interval for user's Windows Azure Logs to 1 minute
         config.Logs.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(1);

         DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.DiagnosticsConnectionString", config);

         //RoleEnvironment.Changing += this.RoleEnvironmentChanging;

         return base.OnStart();
        }
    }
} 
```

但我没有看到任何诊断日志

![Azure Blob 存储的屏幕截图](../Images/64176d1a89612b2b0d5ba072c1778dce.png)

该`mam`文件夹只包含一个`MACommanda.xml`和一个`MASecret`，`vsdeploy`文件夹是空的，并且`wad-control-container`每个部署都有一个文件。

我错过了什么/做错了什么吗？

我一直在尝试遵循[http://msdn.microsoft.com/en-us/library/windowsazure/gg433048.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433048.aspx)的指南，特别是[http://channel9.msdn.com/learn/courses/Azure/Deployment/ DeployingApplicationsinWindowsAzure/Exercise-3-Monitoring-Applications-in-Windows-Azure](http://channel9.msdn.com/learn/courses/Azure/Deployment/DeployingApplicationsinWindowsAzure/Exercise-3-Monitoring-Applications-in-Windows-Azure)

**更新：**

我发现以下可能是问题的一部分

> 未正确收集 IIS7 日志 - [http://msdn.microsoft.com/en-us/library/hh134842](http://msdn.microsoft.com/en-us/library/hh134842)

虽然这应该只说明 404s 不工作，但故障定义为 15 秒，我的控制器操作中的 17 秒睡眠应该仍然被记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:43:46.027

以下是我最终能够让所有日志记录在 Azure Web 角色上工作的方法：

在 WebRole.cs 中包括以下内容：

```
 // Get the default initial configuration for DiagnosticMonitor.
        var config = DiagnosticMonitor.GetDefaultInitialConfiguration();

        // Filter the logs so that only error-level logs are transferred to persistent storage.
        config.DiagnosticInfrastructureLogs.ScheduledTransferLogLevelFilter = config.Logs.ScheduledTransferLogLevelFilter = 
            config.WindowsEventLog.ScheduledTransferLogLevelFilter = LogLevel.Verbose;

        // Schedule a transfer period of 30 minutes.
        config.DiagnosticInfrastructureLogs.ScheduledTransferPeriod = config.Logs.ScheduledTransferPeriod = config.WindowsEventLog.ScheduledTransferPeriod = 
            config.Directories.ScheduledTransferPeriod = config.PerformanceCounters.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);

        // Specify a buffer quota.
        config.DiagnosticInfrastructureLogs.BufferQuotaInMB = config.Logs.BufferQuotaInMB = config.WindowsEventLog.BufferQuotaInMB = 
            config.Directories.BufferQuotaInMB = config.PerformanceCounters.BufferQuotaInMB = 512;

        // Set an overall quota of 8GB maximum size.
        config.OverallQuotaInMB = 8192;

        // WindowsEventLog data buffer being added to the configuration, which is defined to collect event data from the System and Application channel
        config.WindowsEventLog.DataSources.Add("System!*");
        config.WindowsEventLog.DataSources.Add("Application!*");

        // Use 30 seconds for the perf counter sample rate.
        TimeSpan perfSampleRate = TimeSpan.FromSeconds(30D);

        config.PerformanceCounters.DataSources.Add(new PerformanceCounterConfiguration()
        {
            CounterSpecifier = @"\Memory\Available Bytes",
            SampleRate = perfSampleRate
        });

        config.PerformanceCounters.DataSources.Add(new PerformanceCounterConfiguration()
        {
            CounterSpecifier = @"\Processor(_Total)\% Processor Time",
            SampleRate = perfSampleRate
        });

        config.PerformanceCounters.DataSources.Add(new PerformanceCounterConfiguration()
        {
            CounterSpecifier = @"\ASP.NET\Applications Running",
            SampleRate = perfSampleRate
        });

        // Start the DiagnosticMonitor using the diagnosticConfig and our connection string.
        DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString",config);

        return base.OnStart(); 
```

在 system.WebServer 下的 web.config 中添加以下内容：

```
 <tracing>
  <traceFailedRequests>
    <remove path="*"/>
    <add path="*">
      <traceAreas>
        <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
        <add provider="WWW Server" areas="Authentication,Security,Filter,StaticFile,CGI,Compression,Cache,RequestNotifications,Module" verbosity="Verbose" />
      </traceAreas>
      <failureDefinitions statusCodes="400-599" />
    </add>
  </traceFailedRequests>
</tracing> 
```

在服务定义文件中，在 web 角色下添加以下内容：

```
 <LocalResources>
  <LocalStorage name="DiagnosticStore" sizeInMB="8192" cleanOnRoleRecycle="false"/>
</LocalResources> 
```

这应该启用您在 MVC 应用程序中的所有日志记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:35:25.287

通过查看 wad-control-container 中的相应文件来检查部署的诊断设置。

我注意到，根据我的经验，您没有设置 DiagnosticInfrastructureLogs 或 Logs 的所有必需值，包括 bufferQuotaInMB 和 scheduleTransferLogLevelFilter。

尝试这个：

```
 // Get the factory configuration so that it can be edited
         DiagnosticMonitorConfiguration config = DiagnosticMonitor.GetDefaultInitialConfiguration();

         config.DiagnosticInfrastructureLogs.bufferQuotaInMB = 512;
         config.DiagnosticInfrastructureLogs.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(1D);
         config.DiagnosticInfrastructureLogs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;

         config.Logs.bufferQuotaInMB = 512;
         config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;
         config.Logs.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(1D); 
```

尝试开始。还要确保您已添加跟踪侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:15:14.307

您可以尝试从“failureDefinitions”节点中删除“timeTaken”属性吗？参考： http: [//msdn.microsoft.com/en-us/library/aa965046](http://msdn.microsoft.com/en-us/library/aa965046(v=VS.90).aspx) (v=VS.90).aspx 。

# ruby-on-rails - 如何在开放式换档导轨中使用资产

> ID：12278585
> 
> 赞同：3
> 
> 时间：2012-09-05T09:43:10.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, openshift

我在 openshift rails 中部署了我的代码，但它没有正确获取资产。它既不加载 javascripts 也不加载图像。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T01:26:01.653

您要检查的第一件事是资产是否存在于您的应用程序中。[该脚本](https://github.com/openshift/rails-example/blob/master/.openshift/action_hooks/pre_build)在脚本之前运行`build.sh`（接下来会提到）。它尝试为您的`public/assets`文件夹创建符号链接（[这是背后的原因](https://github.com/openshift/rails-example#assets)）。即使你有那个目录，`rake`任务仍然可以工作；每次推动资产都会被抹去。

每当您推送到您的 git 存储库时，您的资产都应该正在编译。这由 Ruby 1.9 插件中的[此脚本](https://github.com/openshift/crankcase/blob/master/cartridges/ruby-1.9/info/bin/build.sh#L45)处理（由服务运行，您无法控制它）。如您所见，`bundle exec rake assets:precompile`只要您有 Gemfile，它就会运行（所有 Rails 应用程序都应该如此）。

说了这么多，你应该做的第一件事是检查你的`.openshift/action_hooks`，以确保你没有运行任何可能覆盖你的`public/assets`目录的东西。您可以将它们与[此处](https://github.com/openshift/rails-example/tree/master/.openshift/action_hooks)的进行比较。

您应该做的下一件事实际上是检查 OpenShift 主机上的目录。您可以通过 SSH 连接到您的应用程序来执行此操作（[说明在此处](https://openshift.redhat.com/community/developers/remote-access)）。然后检查你的`public/assets`目录。注意：一些输出已被缩短`....`。

```
# First we make sure it is a symlink.
> file $OPENSHIFT_REPO_DIR/public/assets
..../app-root/runtime/repo/public/assets: symbolic link to `..../data//assets'

# Then we see if there is anything in it
> ls $OPENSHIFT_REPO_DIR/public/assets
.... (should have a bunch of.js, .css, etc files) 
```

如果该目录为空，则编译资产可能存在问题。您应该注意输出时`git push`是否有任何迹象表明它失败了（您可能希望使用`tee`like:捕获输出`git push 2>&1 | tee git_push.log`）。如果目录中有资产，请按照[以下步骤](https://openshift.redhat.com/community/faq/how-to-debug-application-issues-using-logs)检查您的日志。

如果您仍然遇到问题，请访问我们的[IRC 频道](https://openshift.redhat.com/community/developers/get-help)，应该可以有人亲自提供帮助。

# html - 使用 CSS 变换（缩放）时 Webkit 文本闪烁

> ID：12278587
> 
> 赞同：28
> 
> 时间：2012-09-05T09:43:21.443
> 
> 标签：html, css, browser, safari

这发生在 Mountain Lion 上的 Safari 6 和最新的 chrome 中。**（在 OSX 上确认，在 Windows 中可能不会发生）**

请参阅此页面以获取示例：

[http://users.telenet.be/prullen/flicker2.html](http://users.telenet.be/prullen/flicker2.html)

快速将鼠标移到图像上或从图像上移开，然后查看下面的文本。你会看到它闪烁/脉动。

相关的 CSS 如下。我无法对`.out`和`.in`类进行任何更改。仅对项目类。

我在某处阅读时尝试添加`-webkit-backface-visibility:hidden;`应该修复它的内容，但它没有任何区别。

有人有线索吗？

谢谢，韦斯利

```
.out {                                      
   position:        relative;                                       
   display:        block;                                      
   margin:            0;                                      
   border:            0;
   padding:        0;                                      
   margin-left:    auto;                                       
   margin-right:    auto;                                      
   overflow:        hidden;    
 }
.in {                                   
   position:        relative;                                       
   display:        block;                                      
   margin:            0;                           
   padding:        0;                            
   border:            0;
   overflow:        hidden;
}
.item {
   margin: 60px;
   -webkit-transition: -webkit-transform .15s linear;
   -moz-transition: -moz-transform .15s linear;
   -o-transition: -o-transform .15s linear;
   transition: transform .15s linear;
   -webkit-transform-style: preserve-3d;
   -moz-transform-style: preserve-3d;
   -o-transform-style : preserve-3d;
   -ms-transform-style : preserve-3d;
}
.item:hover {
   -webkit-transform: scale(1.3) !important;
   -moz-transform: scale(1.3) !important;
   -o-transform: scale(1.3) !important;
   -ms-transform: scale(1.3) !important;
   transform: scale(1.3) !important;
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-11T21:06:14.803

我面临同样的问题：我想在悬停时缩放元素，这样做时页面上的每个文本都会闪烁。我也在使用最新的 Chrome (21.0.1180.89) 和 OSX Mountain Lion。

实际上，添加

```
-webkit-backface-visibility: hidden;
-moz-backface-visibility:    hidden;
-ms-backface-visibility:     hidden; 
```

到受影响的元素**确实**解决了问题。

您说您不能更改 .in 和 .out 类，但也许您可以添加另一个（.no-flicker）并在受影响的元素上使用它。

*注意：*这似乎确实有助于解决 Chrome 中的问题，但请注意，如果您的元素使用 z 定位 CSS 属性分层，它可能会在 Safari 中引起一些问题。例如，在我的网站上，它导致 CSS 元素在我试图清理的动画幻灯片的幻灯片转换后面闪烁。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-26T23:06:23.820

我有同样的问题，但解决它。

只需将`.no-flickr`类添加到项目中任何闪烁或闪烁的元素

```
.no-flickr {
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  -ms-transform: translateZ(0);
  -o-transform: translateZ(0);
  transform: translateZ(0);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-14T23:49:03.967

今天早上我遇到了同样的问题，发现最好的解决方法是：

```
-webkit-transform-style: preserve-3d;
-webkit-backface-visibility: hidden; 
```

**我将它添加到构成两侧对象面**的两个元素中的每一个中。停止 Chrome 中的闪烁并修复 Safari 中显示的背面。

# mysql - 在 xampp 上使用 phpmyadmin 进行 mysql 数据库复制

> ID：12278591
> 
> 赞同：1
> 
> 时间：2012-09-05T09:43:45.633
> 
> 标签：mysql, phpmyadmin, xampp, database-replication

我的查询是设置数据库复制（主/从）过程以使用 xampp 中的 phpmyadmin 平衡数据库负载。我试过了。phpmyadmin 中有一个链接称为复制。

我遵循以下链接： [http ://ahmedzubayr.wordpress.com/2012/04/24/configure-master-slave-replication-mysql-xampp/](http://ahmedzubayr.wordpress.com/2012/04/24/configure-master-slave-replication-mysql-xampp/)

在配置 MySQL 从站配置时，我收到了一个错误，例如未在主站上配置从站。我找不到这些问题。任何人都可以提出建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:33:36.747

MySQL 必须可以通过网络访问。如果您在`/opt/lamp/lamp security`安装 XAMPP 时运行该命令，则可能无法通过网络访问 MySQL。您必须注释该`skip-networking`行`/opt/lampp/etc/my.cnf`并重新启动 XAMPP。

# java - 以下代码的junit测试类

> ID：12278593
> 
> 赞同：0
> 
> 时间：2012-09-05T09:43:51.290
> 
> 标签：java, junit

如何模拟 Phone 对象的对象。

代码如下，

```
public class Fortest {

  UserDao userdao = new UserDao();
  Phone name = new Phone();
  public String handleUser(User user) {

    String returncode="failed";
    //User usr = new User("bob");
    String username=user.getUsername();
    String pass=user.getPass();
    System.out.println("username and password : "+username+" : "+pass);

    Phone name = new Phone();
    String ph = name.getA();
    System.out.println("ph "+ph);

    if(ph.equalsIgnoreCase("test")){
      System.out.println("A "+ph);
      returncode="done";
    }
    System.out.println("returning "+returncode);

    return  returncode;
    //System.out.println("name "+name.toString());
    //System.out.println(name.getA());
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:50:55.903

你没有。模拟的规则之一是：永远不要模拟实体或值对象。如果你需要打破这个规则，那就意味着你可能存在设计缺陷。

如果需要模拟 a `new`，则需要将工厂传递给对象，然后模拟工厂。一个非常常见的例子是当您需要模拟 Date 对象时，这在另一个问题中得到了很好的解释：[如何模拟 Date 类的默认构造函数](https://stackoverflow.com/questions/4563584/how-to-mock-the-default-constructor-of-the-date-class-with-jmockit)（检查第一个答案）。

作为旁注，调用一个`name`看起来不正确的 Phone ...mmm 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:35:00.880

首先我要做一些假设。 `user.getUsername()`&`user.getPass()`没有副作用。对`System.out.println`你来说并不重要。

这样你的课就变成了：

```
public class Fortest {
    Phone name = new Phone();

    public String handleUser(User user) {
        String ph = name.getA();

        if(ph.equalsIgnoreCase("test")){
            return "done";
        }

        return  "failed";

    } 
} 
```

所以你的测试有两个条件。要么`phone.getA()`是“测试”，你返回“完成”，要么不是，你返回“失败”。

那么如何设置set“ `getA`”。有一件事是肯定的，我们需要能够从测试中设置“名称”。为此，我们需要“注入”它（我们可以通过多种其他方式来实现，但我喜欢注入）。我会使用 Guice，很多人会使用 Spring。有些人会使用其他注入框架之一。但在测试中，我们大多数人都会使用手动注入。

```
public class Fortest {
    Phone name;
    Fortest(Phone name) {
        this.name = name;
    }

    public String handleUser(User user) {
        String ph = name.getA();

        if(ph.equalsIgnoreCase("test")){
            return "done";
        }

        return  "failed";

    } 
}

public class TestFortest {
   @Before
   public void before() {
          name = ; //... 
          subject = new Fortest(name);
   }
} 
```

现在测试相当简单：

```
public void whenTestModeIsEnabledThenReturnDone() {
     setPhoneIntoTestMode();
     String actual = subject.handleUser(null);
     assertEquals(actual, "done");
}

public void whenTestModeIsDisabledThenReturnFailed() {
     setPhoneIntoLiveMode();
     String actual = subject.handleUser(null);
     assertEquals(actual, "failed");
} 
```

`setPhoneIntoTestMode`/的实现`setPhoneIntoLiveMode`将取决于复杂`Phone`程度。如果它比我们以某种方式（模拟、存根等）“伪造”它更复杂。这可能是您编写的一大段代码，也可能是使用像 Mocketo 这样的工具。

如果 Phone 对象很简单，并且有或可以有一个 " `setA`" 方法，那么就使用它。

我相信以后你会需要`userdao`. 到时候也会做同样的事情。注入并模拟/设置对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:33:30.783

[使用EasyMock](http://www.easymock.org)可以很容易地模拟类。它在内部使用 cglib 来执行类模拟。EasyMock 可以同时模拟接口**和**类（类模拟）。请参阅[文档](http://www.easymock.org/EasyMock3_1_Documentation.html)。

所以，要让你的手机模拟，只需调用 createMock(Phone.class)：

```
Phone phoneMock = createMock(Phone.class); 
```

正如 Augusto 所说，尽管使用类模拟并不是很好的设计。更好的方法是针对接口进行编程并使用依赖注入框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:29:57.637

因此，您需要执行以下选项之一来将模拟注入字段`name`并且`userdao`（我将假设您可以使用`new Phone`字段实例而不是在方法中创建的实例。

1.  不要直接在代码中调用构造函数，而是通过 setter 使用字段注入。这将允许您的测试提供两个类的模拟实例。如果您必须在方法中创建一个新实例，请考虑使用可以模拟的工厂。

2.  为这两个字段提供默认范围设置方法。这些方法仅用于测试目的。

3.  使用 Refection 将字段设置为模拟实例。一个简单的方法是使用 Spring 的 ReflectionTestUtils。

一旦其中一个到位，您就可以提供模拟实例（可能使用 Mockito）来驱动您希望测试的行为。如果可行，我建议选项 1 是最好的，然后是选项 3。但是，选项 3 的缺点是测试依赖于私有字段的名称。

然后...

```
Phone phone = Mockito.mock(Phone.class);
Mockito.when(phone.getA()).thenReturn("blah");
objectUnderTest.setPhone(phone);

objectUnderTest.handleUser(...); 
```

# c# - C# 中嵌套函数的性能

> ID：12278597
> 
> 赞同：0
> 
> 时间：2012-09-05T09:44:02.917
> 
> 标签：c#, performance, function, nested

以下哪个代码片段会导致最少的开销（或者 IL 是否相同）？我的程序可能会生成巨大的锯齿状数组，具体取决于我提供给它的约束公式的数量。我想限制为 decimal[][] 对象分配不必要的内存：

```
decimal[][] originalFormTableau = CreateOriginalFormTableau();
decimal[][] standardFormTableau = InsertSlackVariables(originalFormTableau);
this.Engine = new SimplexEngine(standardFormTableau, normalizationThreshold); 
```

或者

```
this.Engine = new SimplexEngine(
    InsertSlackVariables(
    CreateOriginalFormTableau()),
    normalizationThreshold); 
```

或任何其他建议（也许使用 using ref 代替？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:53:06.000

分解它们：

```
//we start with a space on the stack from a local or parameter
//holding whatever normalizationThreshold is
//1\. Create a space on the stack to hold a decimal[][]
//Call CreateOriginalFormTableau() method
//assign result to that space.
decimal[][] originalFormTableau = CreateOriginalFormTableau();
//2\. Create a space on the stack to hold a decimal[][]
//Call InsertSlackVariables() method, passing in the first decimal[][]
//assign result to that second space.
decimal[][] standardFormTableau = InsertSlackVariables(originalFormTableau);
//3\. Call the Engine setter with the second space or assign it to the Engine field.
this.Engine = new SimplexEngine(standardFormTableau, normalizationThreshold) 
```

对比：

```
//we start with a space on the stack from a local or parameter
//holding whatever normalizationThreshold is
//1\. Create a space on the stack to hold a decimal[][]
//Call CreateOriginalFormTableau() method
//assign result to that space.
//2\. Create a space on the stack to hold a decimal[][]
//Call InsertSlackVariables() method, passing in the first decimal[][]
//assign result to that second space.
//3\. Call the Engine setter with the second space or assign it to the Engine field.
this.Engine = new SimplexEngine(
  InsertSlackVariables(
  CreateOriginalFormTableau()),
  normalizationThreshold); 
```

它们是完全相同的代码，但一个版本为另一个未命名的部分命名。

它们在调试版本中的性能可能略有不同，尽管我对此表示怀疑（有时发布版本会重用堆栈槽，而调试版本则不会，因此即使在他们获胜后，您也可以检查范围内的变量' 不会再次使用，但很可能它也不会重用未命名的插槽，即使它确实有所作为，影响也会很小）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:02:31.793

为科学做了测试：

**版本 1**

```
public void Test1()
{
    decimal[][] originalFormTableau = CreateOriginalFormTableau();
    decimal[][] standardFormTableau = InsertSlackVariables(originalFormTableau);
    this.Engine = new SimplexEngine(standardFormTableau, normalizationThreshold);
} 
```

输出：

```
.method public hidebysig instance void Test1() cil managed
{
    .maxstack 4
    .locals init (
        [0] valuetype [mscorlib]System.Decimal[][] originalFormTableau,
        [1] valuetype [mscorlib]System.Decimal[][] standardFormTableau)
    L_0000: ldarg.0 
    L_0001: call instance valuetype [mscorlib]System.Decimal[][] ConsoleApplication2.Class2::CreateOriginalFormTableau()
    L_0006: stloc.0 
    L_0007: ldarg.0 
    L_0008: ldloc.0 
    L_0009: call instance valuetype [mscorlib]System.Decimal[][] ConsoleApplication2.Class2::InsertSlackVariables(valuetype [mscorlib]System.Decimal[][])
    L_000e: stloc.1 
    L_000f: ldarg.0 
    L_0010: ldloc.1 
    L_0011: ldarg.0 
    L_0012: call instance object ConsoleApplication2.Class2::get_normalizationThreshold()
    L_0017: newobj instance void ConsoleApplication2.SimplexEngine::.ctor(valuetype [mscorlib]System.Decimal[][], object)
    L_001c: call instance void ConsoleApplication2.Class2::set_Engine(class ConsoleApplication2.SimplexEngine)
    L_0021: ret 
} 
```

**版本 2**

```
this.Engine = new SimplexEngine(
    InsertSlackVariables(
    CreateOriginalFormTableau()),
    normalizationThreshold); 
```

输出：

```
.method public hidebysig instance void Test2() cil managed
{
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: ldarg.0 
    L_0002: ldarg.0 
    L_0003: call instance valuetype [mscorlib]System.Decimal[][] ConsoleApplication2.Class2::CreateOriginalFormTableau()
    L_0008: call instance valuetype [mscorlib]System.Decimal[][] ConsoleApplication2.Class2::InsertSlackVariables(valuetype [mscorlib]System.Decimal[][])
    L_000d: ldarg.0 
    L_000e: call instance object ConsoleApplication2.Class2::get_normalizationThreshold()
    L_0013: newobj instance void ConsoleApplication2.SimplexEngine::.ctor(valuetype [mscorlib]System.Decimal[][], object)
    L_0018: call instance void ConsoleApplication2.Class2::set_Engine(class ConsoleApplication2.SimplexEngine)
    L_001d: ret 
} 
```

在发行版中编译，优化开启。我不得不说，由于方法中没有重用局部变量，我相信编译器会重写`Test1`为`Test2`. 不知何故，它没有。所以我想`Test2`会稍微快一点，尽管它可能不是以可衡量的方式。

因此，除非您正在搜索微秒优化，否则请选择最易读的优化。

# mysql - rails，优化数据库查询

> ID：12278601
> 
> 赞同：0
> 
> 时间：2012-09-05T09:44:23.240
> 
> 标签：mysql, sql, ruby-on-rails, database, database-performance

我有这样的模型结构：

```
class Entity < ActiveRecord::Base
  habtm :properties_1
  # ... 
  habtm :properties_N
end 
```

我需要通过任何一组属性编写请求，它会导致 N 个连接：

```
Entity.joins(:properties_1, :properties_N).where("properties_1.id = ? AND properties.N = ?", p1_id, pN_id) 
```

N 可能 > 20

我可以使用什么来提高查询性能？

我考虑将所有这些设置缓存到具有序列化属性的大表中，但看起来这个问题很常见，并且可能存在任何现有的解决方案。

有任何想法吗？

感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:10:35.473

这看起来像实体-属性-值 (EAV) 模式。

[http://www.slideshare.net/stepanyuk/implementation-of-eav-pattern-for-activerecord-models-13263311](http://www.slideshare.net/stepanyuk/implementation-of-eav-pattern-for-activerecord-models-13263311)

[https://github.com/kostyantyn/hydra_attribute](https://github.com/kostyantyn/hydra_attribute)

EAV在关系数据库中不是很好的解决方案，最好使用像MongoDB这样的面向文档的数据库

# asp.net-mvc - LINQ to Entities 无法识别 MVC c# 中的“Int32 Int32(System.String)”方法

> ID：12278611
> 
> 赞同：2
> 
> 时间：2012-09-05T09:44:51.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, linq-to-entities

当我尝试使用 Linq to Entities 查询 Databae 上下文时，我得到了这个异常。
**LINQ to Entities 无法识别方法“Int32 Int32(System.String)”方法，并且该方法无法转换为存储表达式。**

请帮忙。提前致谢

```
 if (Request.Form["Enroll"] != null)
                {
                    string[] selected = Request.Form["Enroll"].Split(',');

                    if (selected != null)
                    {
                        if (selected.Count() != 0)
                        {
                            int k = 0;
                            foreach (var item in selected)
                            {
                                var id = db.EnrollTrainee.Where(i => i.TraineeID ==          Convert.ToInt32(item[k].ToString())
                                         && i.TrainerID == Convert.ToInt32(Session["user"].ToString()));
                                if (id != null)
                                {
                                    foreach (var a in id)//Getting Exception Here
                                    {
                                        enroll.id = a.id;
                                        db.EnrollTrainee.Remove(enroll);
                                        db.SaveChanges();                                           
                                    }
                                }
                                k++;
                            }
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:50:40.353

您是否尝试过在执行 linq 之前进行转换？

所以像这样：

```
 foreach (var item in selected)
  {
        var tempId = Convert.ToInt32(item[k].ToString());
        var tempId2 = Convert.ToInt32(Session["user"].ToString());
        var id = db.EnrollTrainee.Where(i => i.TraineeID == tempId         
                                     && i.TrainerID == tempId2);
                            if (id != null)
                            {
                                foreach (var a in id)//Getting Exception Here
                                {
                                    enroll.id = a.id;
                                    db.EnrollTrainee.Remove(enroll);
                                    db.SaveChanges();                                           
                                }
                            }
                            k++;
                        } 
```

# mongodb - 离我最近的MongoDB gps

> ID：12278612
> 
> 赞同：1
> 
> 时间：2012-09-05T09:45:09.713
> 
> 标签：mongodb, geospatial

我在 MongoDB 2.2 数据库上有一组纬度和经度和一个名称，以及我的位置纬度和经度。我知道如何在 mySQL 中进行查询，但 mongo 对我来说仍然有点新，我们选择使用 mongo 来存储数据

我将如何查询 mongodb 以按与我的距离升序返回结果列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:55:53.653

地理空间索引和查询支持内置在 MongoDB 中。详情可参考： [http ://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

10Gen 在这里有一个非常好的演示： [http ://www.10gen.com/presentations/mongosf-2011/geospatial-indexing-mongodb](http://www.10gen.com/presentations/mongosf-2011/geospatial-indexing-mongodb)

# css - Google Maps API - 将图像放在信息窗口之外

> ID：12278618
> 
> 赞同：0
> 
> 时间：2012-09-05T09:45:40.930
> 
> 标签：css, image, google-maps-api-3, infowindow

我需要自定义一个 Google Maps **InfoWindow**。

特别是我想要一个图像“悬在信息窗口的边缘”。但是当我将图像放入其中时`absolute`，`InfoWindow-DIV`它会消失在`border`我的 InfoWindow 后面。

添加一个`z-index`没有任何改变。

希望我说清楚了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:48:46.413

有很多自定义窗口解决方案，例如看这个：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)

如果你想要 infoMarker 边界之外的东西，你最好使用自定义解决方案。内置的适用于简单的东西。

# heroku - 想知道谁可以在云中看到我的源/数据

> ID：12278623
> 
> 赞同：0
> 
> 时间：2012-09-05T09:45:47.513
> 
> 标签：heroku, amazon-ec2, cloud, linode, source-code-protection

让我们假设我几乎没有不想被盗的想法，并且我愿意支付合理的价格。

有这样的例子： [http](http://www.pcmag.com/article2/0,2817,2369188,00.asp) ://www.pcmag.com/article2/0,2817,2369188,00.asp 或者 facebook 的故事，或者早期的 apple/xerox 的故事。

这可能发生在 ec2、heroku、linode、azure 等云服务中。

假设我有很好的解释/编译代码组合，我怎样才能保护我的源代码和想法不被盗？我知道我的想法并不丰富，也没有一些资源窃贼逍遥法外。我只是对将源代码放在云端有一种烦人的感觉，我相信你们中的一些人也有或不太关心。

磁盘加密有帮助吗？我有什么选择（除了建立自己的迷你数据中心？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:54:56.447

如果您在某个时候将代码托管在云中，您将需要信任您的主机。否则，您将自己进行托管。诚然，任何拥有您的代码的主机都可以获取并使用该代码，但如果您选择一个看起来值得信赖、声誉良好的主机以及许多其他满意的客户，您可能会打赌您的代码将是安全的。

加密磁盘上的东西可能会有所帮助 - 这取决于您加密的内容以及您如何使用它。您是否需要在某些时候对您的数据进行解密才能对其进行处理？您的数据是否仅从一个地方传输到另一个地方？如果对手掌握了您的数据，他们会造成多大的损失？

您可能[对此答案感兴趣，其中概述了几个选项](https://stackoverflow.com/a/6417831/28037)。

# asp.net - 对使用 linq to sql 的类进行单元测试

> ID：12278625
> 
> 赞同：0
> 
> 时间：2012-09-05T09:46:00.050
> 
> 标签：asp.net, unit-testing, linq-to-sql, repository-pattern, unit-of-work

我想为包含 linq to sql 代码的类编写单元测试。我的意思是在每个方法中我都创建了一个新的 DbContext 并完成了数据库作业。

我搜索了网络。首先我开始使用存储库和工作单元模式，但我发现 DbContext 本身就是一个工作单元，它的 dbset 作为存储库工作。另一点是我认为没有必要测试 Linq 部分，因为它可以正常工作（由 .net 团队测试）。我想测试我添加到代码中的逻辑。所以我决定用两个实现创建一个带有必要方法的接口，一个使用 linqToSql 而另一个只是一个模拟。像这样的东西：

```
 public interface IDbManager
    {
        bool Insert(MyEntity newEntity);
    }

    public class RealDbManager:IDbManager
    {
        public bool Insert(MyEntity newEntity)
        {
            using (DbDataContext db = new DbDataContext())
            {
                db.MyEntities.InsertOnSubmit(newEntity);
                db.SubmitChanges();
            }
        }
    }

    public class MockDbManager:IDbManager
    {
        public bool Insert(MyEntity newEntity)
        {
            return true;
        }
    } 
```

整个想法正确吗？如果是这样，这是一个正确的实现吗？

是否可以将 DbDataContext 定义为类变量，而不是在每个方法中创建新实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:50:58.233

你有一个正确的总体思路。您的 Mock`Insert`方法应该将实体保存到某个内存存储中，以便后续查询将返回插入的信息，正如预期的那样。但是拥有一个具有“真实”和“模拟”实现的接口的非常基本的想法就在那里。

请记住，在测试中使用 Mock 时，您正在测试使用该模拟的*其他*代码 - 而不是模拟本身。

至于将DataContext定义为成员变量；您可以为其使用 IDisposable 模式，如下所示：

```
public class RealDbManager:IDbManager, IDisposable
{
    DbDataContext db = new DbDataContext();
    public bool Insert(MyEntity newEntity)
    {
        {
            db.MyEntities.InsertOnSubmit(newEntity);
            db.SubmitChanges();
        }
    }
    public void Dispose()
    {
        db.Dispose();
    }
} 
```

那么，您只需要确保处理掉您的 DbManager。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:07:34.713

是的。我唯一要避免的是创建一个实际的模拟类（在这种情况下，它应该称为 Fake），但使用模拟引擎。

在您的问题中，您提到了两种测试。首先是测试你的类的行为，其次是测试它的集成。它们看起来一样，但事实并非如此。

首先，您需要模拟您的课程以通过这种方式（使用 Moq）测试其与其他课程的“连接”：

```
 [Test]
  public void Test()
  {
       var entity = new Entity();
       var mocked = new Mock<IDbManager>();
       //you are telling the moq engine everytimes it finds an invocation of your repository
       //to return true as you did in you mocked class
       mocked.Setup( x => x.Insert( entity ) ).Returns( true );

       var classUnderTest = new ClassUnderTest( mocked.Object );
       //in this method you invoke your repository
       var ret = classUnderTest.DoSomething( entity );

       //assertions
       Assert.Equal( something, ret);

      //eventually you can verify that your repository has been hit once
      mocked.Verify( x => x.Insert( It.IsAny<Entity>), Times.Once);
  } 
```

稍后，正如您正确声明的那样，您无需在 linq 上进行任何测试（微软为我们做了），但如果您需要验证 linq 的正确性，您只能针对真实的数据库（或使用存储库模式）进行测试针对虚假存储库）。这是一个集成测试，它与模拟没有什么可分享的。

要将您的类与 DbContext 分离，您可以使用存储库模式。看看这篇文章。[http://dotnetspeak.com/index.php/2011/03/repository-pattern-with-entity-framework/](http://dotnetspeak.com/index.php/2011/03/repository-pattern-with-entity-framework/)

# android - 如何注入 screen_on 事件？（不适合初学者）

> ID：12278631
> 
> 赞同：2
> 
> 时间：2012-09-05T09:46:20.577
> 
> 标签：android, events, reflection, code-injection, sensors

我试图让传感器在屏幕关闭时工作。这是众所周知的错误。在所有手机上都没有任何解决方案。我假设如果我发送（注入）screen_on 事件，而实际上屏幕将被关闭，我可以欺骗内核。你有什么想法我如何检查我的假设并注入这样的事件？

在 Android 中有一些方法可以注入事件[http://www.pocketmagic.net/?p=2640](http://www.pocketmagic.net/?p=2640) 在这种情况下可以帮助：1）使用内部 API。但我无法在我可以使用的资源中找到 API。请帮我解决一下这个。2) 将事件注入直接到 /dev/input/eventX。但似乎这只是输入事件，如按键，但我找不到 screen_off(screen_on) 事件。

我在哪里可以在 HAL 的源代码中找到生成 screen_off 事件的代码。我试过并没有在源代码中找到此代码。

# php - 日历认为今天是开始

> ID：12278632
> 
> 赞同：0
> 
> 时间：2012-09-05T09:46:22.757
> 
> 标签：php

我一直在将每周视图日历放在一起，让用户使用表单上的按钮向后或向前移动一周。一切都很好，除了日历第一次打开它时，如果是本周的开始，那就是当天，所以剩下的日子都出来了。

这是我到目前为止所拥有的...

```
if(isset($_POST['add_week'])){
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts + (3600 * 24 * 7);
} else if (isset($_POST['back_week'])) {
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts - (3600 * 24 * 7);
} else {
    $display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24;
}

$week_start = date('d-m-Y', $display_week_ts);

for ($i = 0; $i < 7; $i++) {
    $current_day_ts = $display_week_ts + ($i * 3600 *24);
    echo date('d-m-Y', $current_day_ts); 
} 
```

我知道问题是什么，线路

```
$display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24; 
```

它调用当天，但 $week_start 需要是一周的第一天，但​​我已经尝试了我能找到的一切。我试过了

```
$display_week_ts = strtotime("Monday noon"); 
```

这似乎运作良好，直到日记到达 10 月 29 日星期一，此时它似乎跳过了一天，并将 10 月 29 日改为星期二。

我在这个网站上找到了本周开始的另一个主题，但我无法成功实施其中的任何一个

我将非常感谢您在这件事上的任何帮助，我已经为此工作了三天......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:53:51.100

试试这个：

```
$display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24; 
$dow = date("w", $display_week_ts);
$dow = ($dow + 6) % 7;
$display_week_ts -= $dow * 3600 * 24;

$monday = new DateTime(date("Y-m-d", $display_week_ts)); 
```

现在`$monday`包含本周星期一的日期。将此对象存储在会话中。当你需要移动到下周时，找到下周一

```
$monday->modify('+1 week'); 
```

要查找前一个星期一，请使用

```
$monday->modify('-1 week'); 
```

找到新的星期一后，将其存储回会话中。

# lwuit - 我使用 lwit 的命令无法正常工作..

> ID：12278634
> 
> 赞同：1
> 
> 时间：2012-09-05T09:46:35.633
> 
> 标签：lwuit, lwuit-form, lwuit-resource-editor, lwuit-layouts, lwuit-command

我正在尝试在 3 种形式之间移动。1个是主要形式，2个是其他简单形式。我在软键中有命令，但它们不起作用...

下面是我的代码...

```
public class checkOutComponents extends MIDlet implements ActionListener 
{

    private Form appForm;
    private Form f1;
    private Form f2;
    Command GoTof1 = new Command("GoTof1");
    Command GoTof2 = new Command("GoTof2");
    Command GoToMainForm = new Command("GoToMainForm");
    public void startApp() 
    {
        Display.init(this);

        appForm = new Form("Check These Components!! ");
        appForm.setLayout(new BorderLayout());

        appForm.addCommand(GoTof1);
        appForm.addCommand(GoTof2);

        appForm.addComponent(BorderLayout.CENTER, formContainer);
        appForm.show();
    }

    public void pauseApp() 
    {

    }

    public void destroyApp(boolean unconditional) 
    {

    }

    public void actionPerformed(ActionEvent event)
    {
        Command eventCmd = event.getCommand();
        Form f = Display.getInstance().getCurrent();

        boolean sentido = false;
        if (eventCmd == GoTof1) 
        {
            sentido = true;
            Image i1 = null;
            try 
            {
                i1 = Image.createImage("/hello/1.jpeg");
            } 
            catch (IOException ex) 
            {
                ex.printStackTrace();
            }
            Label lab1 = new Label(i1);
            f1.addComponent(lab1);
            f1.addCommand(GoTof2);
            f1.addCommand(GoToMainForm);
            f.setTransitionOutAnimator(Transition3D.createCube(300, sentido));
            f1.show();

        } 
        else if (eventCmd == GoTof2) 
        {
            sentido = false;
            Image i2 = null;
            try 
            {
                i2 = Image.createImage("/hello/2.jpeg");
            } 
            catch (IOException ex) 
            {
                ex.printStackTrace();
            }
            Label lab2 = new Label(i2);
            f1.addComponent(lab2);
            f1.addCommand(GoTof1);
            f1.addCommand(GoToMainForm);
            f.setTransitionOutAnimator(Transition3D.createCube(300, sentido));
            f2.show();
        }
        else if(eventCmd == GoToMainForm)
        {
            appForm.showBack();

        }

    }

} 
```

请帮助解决这个问题。在此先感谢和问候，斯瓦蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:01:19.633

**将命令侦听**器添加到表单 appForm。

```
appForm.addCommandListener(this); 
```

# javascript - CakePHP 上的 This.Form.Submit()

> ID：12278638
> 
> 赞同：0
> 
> 时间：2012-09-05T09:46:47.897
> 
> 标签：javascript, forms, cakephp

我正在做我的第一个 CakePHP 项目。

`<SELECT>`我正在页面上构建表单，并希望在选择属性中的选项后提交表单

通常（不在蛋糕中）我使用该选项`onchange="this.form.submit();"`

但由于某种原因，我在 Cake 中的表单拒绝提交表单。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:54:44.057

在这里检查答案 [Javascript select onchange='this.form.submit()'](https://stackoverflow.com/questions/7261305/javascript-select-onchange-this-form-submit)

你为什么不使用jquery。它的简单包括 jquery ，给表单和选择输入一个 id 。然后使用以下代码

```
$('#selectElementId').change(
function(){

     $('#formElementId').submit();

}); 
```

# qt - 将小部件拖放到源应用程序小部件之外

> ID：12278640
> 
> 赞同：2
> 
> 时间：2012-09-05T09:46:53.957
> 
> 标签：qt, qt4

我有一个 Qt 桌面应用程序，它有几个顶级小部件。顶级小部件的子小部件可以通过使用拖放机制在顶级小部件之间移动。

我现在遇到的问题是在任何现有的顶级小部件之外放置一个子小部件，并创建一个新的顶级小部件来包含这个小部件。让我们称之为分离。

这可以使用拖放来完成吗？我找不到 dropEvent 的去向？即使不允许放置位置，我是否可以在我的应用程序中处理放置事件？也许是鼠标释放之类的？

我现在不能改变一切，但也是未来的问题。对接/取消对接是更好的方法吗？

问候米海

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:21:20.793

我找到了一种方法来做到这一点。当拖动移动到应用程序小部件之外时，QDrag 对象会发出一个带有 0 参数的 targetChanged 信号。

因此，如果 target() 为空，我从 QDrag 继承，然后在析构函数中发出自定义信号。

唯一的问题是光标看起来像是禁止放置，我无法解决这个问题，因为 QDrag 只能为移动、复制或链接等有效操作设置光标像素图

更新：

这是继承的类。

```
class TabDrag: public QDrag
{
    Q_OBJECT
public:
    explicit TabDrag(QWidget *dragSource);
    ~TabDrag();

signals:
    void tearOff(); /// emit tearOff signal if the QDrag object is destroyed and target was null
};

TabDrag::TabDrag(QWidget *dragSource):QDrag(dragSource)
{
}

TabDrag::~TabDrag()
{
    // check if we need to detach this tab
    if(!target())
    {
        emit tearOff();
    }
} 
```

tearOff 信号应该连接到您想要发生的任何事情。就我而言，我从选项卡中拉出小部件并将父窗口更改为新窗口。

使用示例

```
void MyTabBar::mouseMoveEvent(QMouseEvent* event)
{
..................
    TabDrag * drag = new TabDrag(this);
    drag->setMimeData(mimeData);
    drag->setPixmap(*m_tabPixmap.data());
    drag->setHotSpot(QPoint(m_dragStartPos.x() - tabAtRect.x(), m_dragStartPos.y() - tabAtRect.y()));
    drag->exec();

    connect(drag, SIGNAL(tearOff()), this, SLOT(onTearOff()));
} 
```

# css - 垂直和水平居中图像

> ID：12278645
> 
> 赞同：0
> 
> 时间：2012-09-05T09:47:17.600
> 
> 标签：css

我试图在容器中垂直和水平地居中图像。容器的大小是固定的，但是图像可以是任意大小并且需要适合盒子。到目前为止，我已经设法让它水平居中但不是垂直居中。

我已经做了一些谷歌搜索并尝试了一些不同的方法，但它们要么不起作用，要么做其中一种。

这是迄今为止我所拥有的简化示例：

[http://jsfiddle.net/ZLXq2/](http://jsfiddle.net/ZLXq2/)

## 编辑

就在我发布这个之后，我解决了它！典型的。解决方案可以在这里找到

[http://jsfiddle.net/ZLXq2/1/](http://jsfiddle.net/ZLXq2/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:49:40.873

从头开始，我已经设法修复它，对于遇到这个问题的任何人，都可以在这里看到：

[http://jsfiddle.net/ZLXq2/1/](http://jsfiddle.net/ZLXq2/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:53:58.223

如果您不需要支持 IE7，可以使用此处找到的解决方案： [使用 float:left 在 DIV 内垂直和水平居中图像？](https://stackoverflow.com/questions/10819931/center-image-vertically-and-horizontally-inside-of-div-with-floatleft)

它不需要任何JS。

# ember.js - 如何访问 EmberJS 中的 ArrayProxy 元素？objectAtContent 是唯一的解决方案吗？

> ID：12278647
> 
> 赞同：0
> 
> 时间：2012-09-05T09:47:18.937
> 
> 标签：ember.js

如何访问 EmberJS 中的 ArrayProxy 元素？objectAtContent 是唯一的解决方案？

这是一个例子：

```
App = Ember.Application.create({});

App.my_list = Ember.ArrayProxy.create({
    content: ['dog', 'cat', 'fish']
});

console.log(App.my_list.length); // don't work
console.log(App.my_list.get('length')); // Work
console.log(App.my_list.objectAtContent(0)); // => Work
console.log(App.my_list[0]); // => not work !
console.log(App.my_list.get('0')); // => not work ! 
```

[http://jsfiddle.net/stephane_klein/2ggrT/2/](http://jsfiddle.net/stephane_klein/2ggrT/2/)

最好的问候，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:59:26.700

有几种方法可以访问 ArrayProxy 元素：

给定`my_array`ArrayProxy，以及`i`您想要的对象的索引：

*   `my_array.get('content.' + i)`
*   `my_array.objectAt(i)`
*   `my_array.objectAtContent(i)`（这是您应该重写以将内容转换为新内容的方法）
*   `my_array.get('firstObject')`如果你想要第一个对象
*   `my_array.get('lastObject')`如果你想要最后一个对象
*   `my_array.get('content')[i]`工作，但你失去了 ArrayProxy 的好处。

无论如何，我建议您[阅读 ArrayProxy 文档](http://emberjs.com/api/classes/Ember.ArrayProxy.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:42:32.457

App.my_list.get('content.0') 也有效。所以是： content = App.my_list.get('content'); 内容.get('0');

# android - 我应该让私人成员参考我的活动的观点吗？

> ID：12278649
> 
> 赞同：1
> 
> 时间：2012-09-05T09:47:39.297
> 
> 标签：android, performance

我有一个简单的活动，包含在 xml 文件中定义的 4 个视图。为了性能起见，最好是通过他们的 id 访问我的视图，还是让成员在我的活动中引用它们？有明显不同吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:05:30.943

`findViewById()`对于需要在应用程序中引用的每个视图，您应该只调用一次。进行此调用`onCreate()`并将返回的视图实例保存在私有成员变量中。然后您可以稍后直接引用它们。

findViewById() 很昂贵，特别是如果您有很多视图。

这几乎是标准的 Android 实践。

# java - 从 httpmultipart 请求中获取 xml 响应

> ID：12278651
> 
> 赞同：1
> 
> 时间：2012-09-05T09:47:54.300
> 
> 标签：java, android, web-services, http, multipartentity

我有一个网络服务，它接收一个包含多部分的文件（在 c# 中），当我通过 chrome 扩展名（高级 Rest 扩展名）发送一个大文件（15MB）时，文件上传正常，我可以看到正文响应：

```
 <response xmlns="http://schemas.datacontract.org" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<Descripcion>blabla</Descripcion>
<Resultado>-9999</Resultado>
<Servicio xmlns:a="http://schemas.datacontract.org" i:nil="true" />
 </reponse> 
```

但是当我用 android 调用时，我得到带有 200 代码 OK 响应的标头，但我不知道如何获得正文响应：

这是我的代码：

```
/****** Informacion exif *****/

                DefaultHttpClient mHttpClient;
                HttpParams params = new BasicHttpParams();
                params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
                mHttpClient = new DefaultHttpClient(params);
                HttpPost httppost = new HttpPost("HTTPS://SERVICIO.SVC");
                httppost.setHeader("Connection", "Keep-Alive");
                httppost.setHeader("SOAPAction", "http://tempuri.org/Service1");
                httppost.setHeader("identificadorGUID", Guid);
                httppost.setHeader("numeroServicio", codigoServicio);
                httppost.setHeader("coordenadaLatitud", latitud);
                httppost.setHeader("coordenadaLongitud", longitud);
                if (QUEES == 0) {
                    extension = "jpg";

                }
                if (QUEES == 1) {
                    extension = "mp4";

                }
                httppost.setHeader("cuando", cuando);
                httppost.setHeader("tipoMultimedia", String.valueOf(tipoMultimedia));
                httppost.setHeader("extension", extension);

                MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
                FileBody fileBody = new FileBody(fichero, "multipart/form-data");
                multipartEntity.addPart("image", fileBody);
                httppost.setEntity(multipartEntity);
                try {
                    HttpResponse response = mHttpClient.execute(httppost);
                    HttpEntity resEntity = response.getEntity();
                    if (resEntity != null) {
                        resEntity.consumeContent();
                    }
                    BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                    String sResponse;
                    StringBuilder s = new StringBuilder();
                    httppost.getAllHeaders();

                    while ((sResponse = reader.readLine()) != null) {
                        s = s.append(sResponse);
                    }
                    Log.i("Respuesta web service", sResponse);
                }
                catch (ClientProtocolException e1) {
                    e1.printStackTrace();
                }
                catch (IOException e1) {
                    e1.printStackTrace();
                } 
```

崩溃：java.io.IOException：尝试从关闭的流中读取。

我怎样才能得到解析它的响应？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:00:35.197

看起来你不应该[`consumeContent()`](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/EntityUtils.html#consume%28org.apache.http.HttpEntity%29)在读取信息之前调用（假设它关闭了流）。如果您使用的是 4.1 或更高版本，则此方法已被弃用，您应该使用[`EntityUtils.consume(HttpEntity)`](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/EntityUtils.html#consume%28org.apache.http.HttpEntity%29)

从它的javadoc：

> 调用该方法表示不再需要该实体的内容。由于此方法调用，所有实体实现都应释放所有分配的资源。如果有的话，内容流实体也应该处理剩余的内容。包装实体应将此调用委托给被包装实体。

# .htaccess - .htaccess 用于 codeigniter 的多个重写规则

> ID：12278652
> 
> 赞同：1
> 
> 时间：2012-09-05T09:47:57.320
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我想问一下我们如何在 .htaccess 文件中添加额外的重写规则，包括 codeigniter 中的 index.php 删除规则。

这是我的 .htaccess 文件

```
RewriteEngine on

RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^profile/([0-9]+)$ /index.php/front/profileDetail/$1
RewriteRule ^(.*)$ /index.php/$1 
```

问题是，一次只有一个规则有效。如果我如上所示保存文件，则会返回内部服务器错误！

我想要的是完全删除 index.php 文件，并将 xyz.com/front/profileDetail/50 中的 url 重写为 xyz.com/profile/50

请帮忙看看有什么问题，我在这方面完全是新手。

谢谢！提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:05:09.463

要详细说明我上面的评论，在 config/routes 中，您可以输入：

```
$route['profile/(:num)'] = 'front/profileDetail/$1'; 
```

# python - 如何从多波段 tif 文件生成原始文件？

> ID：12278653
> 
> 赞同：1
> 
> 时间：2012-09-05T09:47:58.470
> 
> 标签：python, python-imaging-library, gdal

我尝试打开一个每像素 16 位和多波段的 tif 图像，以将其转换为原始文件。我将 PIL 与下一个命令一起使用，`i = Image.open('image.tif')`并且在我使用`rawData = i.tostring()`. 它不适用于多波段 tif 图像。

错误是：

```
File "C:\Python27\lib\site-packages\PIL\Image.py", line 1980, in open
    raise IOError("cannot identify image file")
IOError: cannot identify image file 
```

该目录包含该文件。

我必须怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:30:26.503

GDAL 非常擅长打开多波段栅格，支持[11 种不同的波段类型](http://www.gdal.org/frmt_gtiff.html)，包括 int16。

```
from osgeo import gdal
import numpy as np

ds = gdal.Open('image.tif')

# loop through each band
for bi in range(ds.RasterCount):
    band = ds.GetRasterBand(bi + 1)
    # Read this band into a 2D NumPy array
    ar = band.ReadAsArray()
    print('Band %d has type %s'%(bi + 1, ar.dtype))
    raw = ar.tostring() 
```

# git - 将标签添加到拉取请求

> ID：12278660
> 
> 赞同：70
> 
> 时间：2012-09-05T09:48:23.910
> 
> 标签：git, github, pull-request, git-tag

我有一个从 agliq/Anagen分叉的 repo [iontech/](http://github.com/iontech/Anagen) [Anagen](http://github.com/agiliq/Anagen)

我对我的 fork 做了一些提交并添加了一个标签。然后我打开了一个拉取请求。此拉取请求仅包括我的提交。

如何将我创建的标签包含到拉取请求中？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-05T10:21:43.947

> 如何将我创建的标签包含到拉取请求中？

你不能。拉取请求不包含标签。拉取请求只是指向存储库中的提交线程（分支）的指针，您建议将另一个存储库合并。

如果您想通知上游存储库应该创建标签，也许您应该在拉取请求中添加注释来解释这一点。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-08-07T18:16:33.787

这是一篇旧帖子，但我在寻找类似的东西时遇到了这个问题，我会给你一个更完整的解释。

git 中的标签和分支称为引用或“refs”。您可以随时将 ref 移动到新的提交，因此如果您及时向后移动，则会创建松散的提交。更糟糕的是，这些提交可能会随着时间的流逝而丢失，因为它们在虚空中等待。

当您提交 PR 时，您实际上要求某人将您的分支名称（您的 ref）引用的存储库中的提交列表与也由 ref（基本分支）标识的远程存储库中的提交列表合并。如果您的存储库中不存在提交（您不是最新的）并且您的某些提交实际上涉及您没有的代码位置，则需要进行合并以解决冲突. 如果您不是最新的，但您的代码没有触及从那时起修改的内容，则不会发生冲突。

最后，当东西被合并到另一个存储库时，它通常会被压缩以保存提交历史，从而创建一个全新的提交哈希和一个新的提交树结构。

采取我到目前为止解释的内容，标签只是引用，就像分支一样。如果您在作为分支引用的两个存储库引用之间打开 PR，则无法创建标签，因为您最终没有创建任何新的 refs，您只是要求某人将您的提交提交到他的代码中并移动合并所有内容后，基本分支会转发到新提交！

最好也是唯一的方法真的变成了要求维护者通过标记是否是他们这样做的方式来发布他的代码的发布，但这是他们的自由裁量权！

# javascript - Phonegap - 显示数字键盘的 js 提示

> ID：12278661
> 
> 赞同：2
> 
> 时间：2012-09-05T09:48:25.187
> 
> 标签：javascript, android, cordova, prompt

我正在使用 Phonegap 为 Android 开发一个应用程序。

```
var customTime = prompt("Enter custom time"); 
```

当用户单击提示的文本输入以输入时间时，有没有办法显示数字键盘？现在，当用户点击它时，它会定期显示，他必须先点击数字按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:11:29.687

据我所知，你无法改变这一点。因为它不允许您在任何地方指定输入类型。

**我的建议**：

*   使用 div 显示提示框，并进行一些 z-index 调整，以便可以使用一些 html+css 代码制作类似类型的提示框。你可以定义一个 type = number 的输入字段。

IE`<input type=”number” value ="" id="something" />`

# intellij-idea - 删除 IntelliJ IDEA 中的所有断点

> ID：12278663
> 
> 赞同：160
> 
> 时间：2012-09-05T09:48:44.393
> 
> 标签：intellij-idea

是否有可能在 IntelliJ IDEA IDE 中删除模块中的**所有**断点（可能使用快捷方式）？谢谢。

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-09-05T09:52:55.690

`Ctrl`+ `Shift`+`F8`

用于删除所有断点。
选择上断点 -> `Ctrl`+ `Shift`+ `End`->`Remove`

在**Mac OS**上使用这个：

```
Cmd + Shift + (Fn) + F8 on Mac OS 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-11-25T10:35:48.713

要删除 IntelliJ Idea 中的所有断点，请按以下快捷键序列：

1.  `Ctrl`+ `Shift`+ `F8` （打开断点对话框）
2.  `Ctrl`+ `A` （选择所有断点）
3.  `Alt`+ `Delete` （删除选定的断点）
4.  `Enter` （确认）

* * *

如果您按 Ctrl+Shift+F8 并且您的光标位于带有断点的代码行，而不是 Breakpoint 对话框，您会得到带有单个断点属性的气泡。

[![在此处输入图像描述](../Images/f357dc85a03b571706ac94137de894f9.png)](https://i.stack.imgur.com/1lFk4.png)

要获取断点对话框，请再次按 Ctrl+Shift+F8。

[![在此处输入图像描述](../Images/a71fa900b5355b0ae9f388a929658dac.png)](https://i.stack.imgur.com/Mh51c.png)

* * *

在 IntelliJ Idea 14 社区版中测试。

* * *

如果是 Mac，请按照以下步骤操作：

1.  `cmd`+ `Shift`+ `F8` （打开断点对话框）
2.  `cmd`+ `A` （选择所有断点）
3.  `cmd`+ `Delete` （删除选定的断点）
4.  `Enter` （确认）

与windows 中的 + 不同，它是`Alt`Mac中的+`Delete``cmd``Delete`

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-04-02T18:12:48.890

作为替代方案，您可以将它们静音，而不是删除所有断点。如果您想停止破坏所有这些，这将有所帮助。它们仍然存在，因此您可以再次切换此设置以开始破坏它们。

可以在左侧按钮菜单中的“调试”视图中找到静音断点按钮（可以使用“视图”->“工具窗口”->“调试”切换视图）。我在下面附上了截图。

![IntelliJ IDEA 中的静音断点](../Images/8a702632b78ce3312bb75314790dec3e.png)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-05-16T07:07:46.123

如[this answer](https://stackoverflow.com/a/12278734/2820534)中所述，快捷方式有效。
但我们往往会忘记组合键（我会）。

还有另一种访问**断点窗口**的方法。

[![](../Images/8700ae4366b117a321291fecdc7d1686.png)](https://i.stack.imgur.com/dGgVV.png)

单击此按钮[![在此处输入图像描述](../Images/51aefa1e7169fb846076b18c5d335796.png)](https://i.stack.imgur.com/AIw7i.png)将打开断点窗口。

[![在此处输入图像描述](../Images/ba70693aaca7342ff2ff5ac1c94c58c1.png)](https://i.stack.imgur.com/NHmwZ.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-05T10:02:59.560

这是我删除页面所有断点的技巧之一：

1.  `Ctrl`+ `A` : 选择所有代码
2.  `Ctrl`+ `X` ：剪切所有代码
3.  `Ctrl`+ `V` : 粘贴所有代码

这个技巧一次性删除所有断点，**不到一秒钟**。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-06T09:05:36.260

在 Mac 上，您需要 Shift + 命令 + F8

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-27T06:13:44.627

按 ctrl+shift+f8 并选择要删除的复选框，然后按 android studio 2.2 左上角的减号按钮

# asp.net-mvc - MVC 4 OAuth - NotImplementedException

> ID：12278669
> 
> 赞同：4
> 
> 时间：2012-09-05T09:49:05.717
> 
> 标签：asp.net-mvc

我最近开始在 ASP.Net MVC 4 项目中实现 OAuth。

我写了一个自定义会员提供程序。在这个 ExtendedMembershipProvider 中所有的方法都是完整的。

当尝试使用默认的 MVC 4 帐户控制器登录回调时，一切正常。我确实遇到的问题是调用的行：

```
OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: false)) 
```

上面抛出了一个 NotImplementedException。看到我知道我所有的成员资格方法都是完整的，这似乎很奇怪。

堆栈跟踪将此代码之前的任何内容显示为“外部”，所以我想知道问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:55:22.693

我有一种感觉，这是由于未使用用户配置文件提供程序造成的。OAuthWebSecurity 方法似乎都试图与 Profile 提供者对话，因为这是存储 OAuth 信息的地方。

我编写了自己的存储库方法以避免使用 OAuthWebSecurity 类，而是使用“结果”手动从 DotNetOAuth 中提取信息。

# javascript - 有没有像 15 个谜题一样无法解决的 8 个谜题

> ID：12278672
> 
> 赞同：4
> 
> 时间：2012-09-05T09:49:17.730
> 
> 标签：javascript, artificial-intelligence

我正在使用 JavaScript 开发一个 15 拼图滑动益智游戏。由于 15 拼图中的一半组合无法解决，我使用[http://mathworld.wolfram.com/15Puzzle.html](http://mathworld.wolfram.com/15Puzzle.html)中的公式来检查可解决性。我目前正在添加切换到 8 拼图 (3x3) 的选项。8个谜题中是否也有无法解决的组合？如果是这样，我也可以使用相同的公式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:20:29.247

是的，**n-puzzle**游戏的一半配置是*无法解决的，如此*[处](http://icpc.baylor.edu/history/icpc99/Regionals/SCUSA98/results/eight.html)和[此处](http://en.wikipedia.org/wiki/Fifteen_puzzle)所述。您也可以应用相同的标准：排列的反转次数应该是偶数。

# javascript - 触发点击事件后如何执行警报

> ID：12278674
> 
> 赞同：0
> 
> 时间：2012-09-05T09:49:17.623
> 
> 标签：javascript, jquery

我正在尝试在执行触发事件后执行警报消息。我的代码：

```
 $(".addpage").trigger("click").queue(function () { 
  alert($(".page:first-child").attr("id")); 
 }); 
```

但是这里的问题是警报在完成触发事件功能之前正在执行。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:56:35.107

With .queue(callback) you will add a new function to the end of the element's standard "fx" queue used for element effects (animations). So if the .click() event handler does not include any element animation, the .queue() callback will be effective immediately.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:13:08.530

在这里，我已经为上述问题完成了完整的垃圾箱。请找到演示链接并检查出来..

**演示：** [http ://codebins.com/bin/4ldqp7m](http://codebins.com/bin/4ldqp7m)

**HTML**

```
<ul id="pages">
  <li class="page" id="1">
    Page-1
  </li>
  <li class="page" id="2">
    Page-2
  </li>
  <li class="page" id="3">
    Page-3
  </li>
  <li class="page" id="4">
    Page-4
  </li>
</ul> 
```

**jQuery**

```
$(function() {
    $(".addpage").click(function(e) {
        var newId = parseInt($("#pages li.page:last").attr('id')) + 1;
        $("#pages").append("<li class='page' id='" + (newId) + "'>Page-" + (newId) + "</li>");

    });
    $(".addpage").trigger('click');
    $(".addpage").queue(function() {
        alert("New Page with Id #" + $("#pages li.page:last").attr('id') + " has been added...!");
    });
}); 
```

**CSS：**

```
#pages{
  list-style:none;
  margin:5px;
  padding:2px;
  width:120px;

}
#pages li{
  border:1px solid #1A1A1A;
  width:120px;
  background:#4fdefd;
  text-align:center;

}
.addpage{
  background:#53a5f9;
  border:1px solid #1142fd;
}
.addpage:hover{
  background:#53cdfa;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7m](http://codebins.com/bin/4ldqp7m)

# css - asp.net中的div？

> ID：12278675
> 
> 赞同：1
> 
> 时间：2012-09-05T09:49:24.177
> 
> 标签：css

使用样式，想在我的 Web 应用程序中并排放置两个 div，就像在 stackoverflow 左侧部分那样。我试过了

```
<div style="width:60%; " >

</div>

  <div style="width:40%; ">    

</div> 
```

但是 div 正在下一行到另一个 div，我希望 div 以 60% 和 40% 的宽度并排出现。你能帮助我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:55:58.103

Add `float:left` to both the divs and it should work

Demo : [http://jsfiddle.net/JvBJT/](http://jsfiddle.net/JvBJT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:00:20.357

虽然我不热衷于使用浮动来对齐事物......你可以这样做......它将屏幕分成两个 div 元素（有点像框架）

```
<!DOCTYPE html>
<html>
    <head>
        <title>Template</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <style type="text/css">
            html, body
            {
                /* height: 100%; removed as per user comments */ 
            }

            .div1
            {
                background: none repeat scroll 0 0 #FF0000;
                display: inline-block;
                /* height: 100%; removed as per user comments */ 
                width: 60%;
                float: left;
            }

            .div2
            {
                background: none repeat scroll 0 0 #0000FF;
                display: inline-block;
                /* height: 100%; removed as per user comments */ 
                width: 40%;
                float: left;
            }
        </style>
    </head>
    <body>
        <div class="div1">
            I am Div1 and this is my content<br/>
            I am Div1 and this is my content<br/>
            I am Div1 and this is my content<br/>
            I am Div1 and this is my content<br/>
            I am Div1 and this is my content<br/>
        </div>
        <div class="div2">
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
            I am Div2 and this is my content<br/>
        </div>
    </body>
</html> 
```

# .htaccess - 使用重定向页面。htaccess

> ID：12278682
> 
> 赞同：0
> 
> 时间：2012-09-05T09:49:46.400
> 
> 标签：.htaccess

当 url “.php” 或 “.html” 或 “?” 时如何使用 .htaccess 重定向页面 或“=”？

```
Examples
http://www.domain.ltd/index.php     # error, execute redirect to http://www.domain.ltd/ban/
http://www.domain.ltd/index/?id=foo # error, execute redirect to http://www.domain.ltd/ban/
http://www.domain.ltd/index.html    # error, execute redirect to http://www.domain.ltd/ban/ 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:03:35.570

摘自：[http ://www.webconfs.com/how-to-redirect-a-webpage.php](http://www.webconfs.com/how-to-redirect-a-webpage.php)

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^domain.com [nc]
rewriterule ^(.*)$ http://www.domain.com/$1 [r=301,nc] 
```

显然将 domain.com 替换为您的页面。此重定向将查看任何到达 domain.com 的内容并将其转发到 www.domain.com。

一个快速的谷歌也为我制作了这个漂亮的 htaccess 生成器（但我现在不能发布它）。

# php - 从没有循环的数组中插入数据，例如 while 或 for each

> ID：12278684
> 
> 赞同：0
> 
> 时间：2012-09-05T09:49:54.927
> 
> 标签：php, database, request

我遇到了一个小问题，直到今天我从未遇到过。

出于显而易见的原因，我不得不通过循环（每次迭代的新记录）从我的数据库中保存一些数据。

今天我重新处理了（我或平台的用户）数据。

所以我有一个物理表，不是我的意思是虚拟的，而是 HTML ()，它需要不同的帖子。这些帖子都是标签，相关的字段名称不是以表格的形式设计的，因为记录是在一行中完成的。所以我的标签名称的格式是 name = "text" 而不是 name = "data [$ i] text"。

问题是在数据库中的索引期间，我有一个简单的请求 INSERT INTO 并且我知道将接收数据的文本字段但问题是在插入期间我有一个如下所示的数组：

```
array
  'poste' => string 'Principal' (length=9)
  'ordre' => string '1' (length=1)
array
  'poste' => string 'Intérêts' (length=8)
  'ordre' => string '2' (length=1)
array
  'poste' => string 'Clause pénale' (length=13)
  'ordre' => string '3' (length=1) 
```

如何指示如何确保索引正确发生，知道键可能随时更改，基于定义的顺序（字段顺序）。

例如，如何指定满足条件 post = Main 的数组内容应分配给字段 ordre_main？

我考虑过每次迭代进行一次查询（我有一半），但我认为它会有点重。

我知道创建一个循环并将数据线性化为单个记录可能看起来很奇怪，但这次我别无选择，我有这个限制。

提前感谢您的帮助和建议。

SP。大象

# performance - 微调 HTML5 Phonegap 应用程序

> ID：12278685
> 
> 赞同：2
> 
> 时间：2012-09-05T09:49:56.017
> 
> 标签：performance, html, cordova, jquery-mobile

已成功构建 HTML5 应用程序。以下库已用于此：

*   jquery.mobile-1.1.1.min.js
*   jquery.mobile-1.1.1.min
*   草坪椅.js

一切都很好用Phonegap **cordova-2.0.0包裹它**

但是已经注意到应用程序很慢。

我的应用程序实际上执行**ajax**请求获取**Json**并加载 UI（主要是**listviews**）

是否有任何性能改进技术可以使我的应用程序运行得更快？

还有任何工具可以测试相同吗？

目标平台：**Android**和**iOS**。

**编辑**：

注意到的一件事是应用程序的缓存大小在每次转换时都在增加`click`（`page`它达到 MB 的时间）.. 虽然禁用了 ajax 缓存.. 我需要处理其他事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-29T08:02:19.047

您可以通过以下方式提高应用程序的速度：
**1.**使用您项目中包含的 js 的缩小版本。
**2.**避免使用较大尺寸的图像。使用与 Web 兼容的 PNG 文件对其进行调整 优化图像 使用 CSS 精灵表 ![在此处输入图像描述](../Images/0eb5d7b19c7d104847c47e3a0cef2358.png)

```
 .icon {
      width: 14px; height: 14px;
      background-image: url("glyphicons-halflings.png");
    }
    .icon-glass {
      background-position: 0 0;
    }
    .icon-music {
      background-position: -24px 0;
    }
    .icon-search {
      background-position: -48px 0;
    } 
```

使用正确的图像大小（不要在 HTML 中缩放图像） 在可扩展的分布式系统（即 S3）上托管图像 避免图像的 404

```
<img src="{{pic}}" onerror='this.src="nopic.jpg"'/> 
```

**3.**避免使用过多的 CSS。Limit Shadows and Gradients 链接 box-shadow、border-radius、gradients、text-align 尝试禁用一些减慢它的 CSS（Simon MacDonald 的想法）。在您的 jquery mobile .css 文件中，将其添加到底部：

```
* {
text-shadow: none !important;
-webkit-box-shadow: none !important;
-webkit-border-radius:0 !important;
-webkit-border-top-left-radius:0 !important;
-webkit-border-bottom-left-radius:0 !important;
-webkit-border-bottom-right-radius:0 !important;
-webkit-border-top-right-radius:0 !important;
} 
```

**4.**使用 CSS 过渡 + 硬件加速 使用原生滚动
**5.**如果您使用任何 Live url 来获取 JS，最好下载它们并在本地使用。
**6\.** [FastClick](https://github.com/ftlabs/fastclick) FastClick 是一个简单易用的库，用于消除移动浏览器上物理点击和点击事件触发之间的 300ms 延迟。（jjsquared 的想法）

**7.**使用 Slpash 屏幕。
**8.**避免仅在必要时使用框架。尝试做出响应式设计。
**9.**不要在服务器上生成 UI。在客户端用 JavaScript 创建 UI
**10.**最小化回流

*   减少 DOM 元素的数量。
*   在重新插入 DOM 之前，尽量减少对 DOM Update 元素的“离线”访问。
*   避免在 JavaScript 中调整布局

**减缓**

```
$("#header a.back").on("click", clickHandler);
$("#header a.back").css("color", "white");
$("#header a.back").css("text-decoration", "none");
$("#header a.back").attr("href", "#"); 
```

**快速地**

```
var $backButton = $("#header a.back");
$backButton.on("click", clickHandler);
$backButton.css("color", "white");
$backButton.css("text-decoration", "none");
$backButton.attr("href", "#"); 
```

**11.**避免网络访问不要制作依赖网络的应用程序来获取内容

```
$.ajax({url: "services/states"}).done(function(data) {
    states = data;
}); 
```

使用缓存静态数据本地存储，数据库和文件 **慢**

```
$.ajax({url: "slow/feed"}).done(function(data) {

}); 
```

**快速地**

```
dataAdapter.getItems().done(function(data) {

}); 
```

**12.**不要等待数据显示UI

```
// Display view
displayView();

// Get data
$.ajax({url: "product/101"}).done(function(product) {
    // Update view
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:38:21.870

如果你想让它在 Android 上更高效，你应该禁用一些 CSS：

[https://stackoverflow.com/a/12081339/41679](https://stackoverflow.com/a/12081339/41679)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:53:21.963

有一种称为预取的机制​​，它会在您单击页面之前加载页面。所以重定向更快。但是您正在使用更多传输。

它是这样使用的：

```
<a href="prefetchThisPage.html" data-prefetch> ... </a> 
```

检查这个网站：http: [//jquerymobile.com/test/docs/pages/page-cache.html](http://jquerymobile.com/test/docs/pages/page-cache.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T16:36:29.113

为了提高点击性能并避免移动浏览器原生内置的 300 毫秒浏览器延迟，您应该使用诸如 FastClick 之类的库。这将大大减少 mobile.changePage 调用之间的延迟。

[https://github.com/ftlabs/fastclick](https://github.com/ftlabs/fastclick)

# linux-device-driver - 佳能 DSLR 视频环回使用 v4l2loopback 和 EDSDK Liveview？

> ID：12278688
> 
> 赞同：4
> 
> 时间：2012-09-05T09:50:00.773
> 
> 标签：linux-device-driver, v4l2, edsdk, canon-sdk

我想用我的数码单反相机作为视频输入，让我们在 Linux 和 Android 下说 Skype / Google talk。

是否可以使用 v4l2loopback 和 Canon EDSDK 创建视频环回？如何将实时取景缓冲区从相机传输到视频环回？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-03T12:59:06.557

截至 2017 年 10 月，**GStreamer**已更新到 1.0，**v4l2loopback**也收到了一些更新。

因此，@Reinaert Albrecht 发布的旧命令不再有效，现在有效的新命令是：

```
gphoto2 --stdout --capture-movie | gst-launch-1.0 fdsrc fd=0 ! decodebin name=dec ! queue ! videoconvert ! tee ! v4l2sink device=/dev/video0 
```

*   `decodebin2`已被替换为`decodebin`
*   `ffmpegcolorspace`已被替换为`videoconvert`
*   `tee`添加过滤器以解决 v4l2loopback 驱动程序中的错误（**请**参阅：[https](https://github.com/umlaeute/v4l2loopback/issues/83) ://github.com/umlaeute/v4l2loopback/issues/83 ）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T17:26:43.137

据我了解，佳能的 EDSDK 仍然仅在 Windows 和 OSX 平台（C 和 Objective-C）的请求下才可用。在 linux 上，您可能想尝试在 Wine 下安装 SDK，或者求助于更通用的 gPhoto。现在，“LiveView”或“EvF”图像是单独的 JPG。或者，您可能希望通过 HDMI 输出端口（在 2013 年春季将在 EOS 5D Mark III 上实现全分辨率）捕获此内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:24:11.817

您将需要一个“生产者”应用程序，它将帧写入环回设备（并且之前已通过佳能 esdk 获取这些帧）

v4l2loopback 已经附带了一些简单的生产者示例，您可以查看已经支持原生 v4l2loopback 输出的其他应用程序，例如[Gem](http://pd-gem.git.sourceforge.net/git/gitweb.cgi?p=pd-gem/Gem;a=tree;f=plugins/recordV4L2)、[living](http://gmerlin.svn.sourceforge.net/viewvc/gmerlin/trunk/gmerlin/plugins/v4l2/ov_v4l2.c?view=log)、[gmerlin](http://lives.svn.sourceforge.net/viewvc/lives/trunk/lives-plugins/plugins/playback/video/)和[gstreamer](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-v4l2sink.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-24T12:21:44.913

您可以使用以下命令轻松完成此操作：

```
modprobe v4l2loopback 
```

然后发出这个：

```
gphoto2 --stdout --capture-movie | gst-launch-0.10 fdsrc ! decodebin2 name=dec ! queue ! ffmpegcolorspace ! v4l2sink device=/dev/video0 
```

适当更换视频设备。

# android - 如何在android中使用.shp文件

> ID：12278689
> 
> 赞同：2
> 
> 时间：2012-09-05T09:50:00.990
> 
> 标签：android, google-maps

我想创建应用程序以使用 GIS 形状文件（.shp）显示离线地图，任何人都知道如何使用形状文件在 android 中显示地图。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:15:12.947

如果您从 SD 卡加载数据，您可以使用 openmap，它有一个 SHapefile 类，并尝试将您的 shapefile 转换为图形层，我已经完成了。

```
static public GraphicsLayer SHPtoPOINT(String shpfile) {
    SpatialReference lSR = SpatialReference.create(26192);
    Envelope lEnvolope = getSHPEnvelope(shpfile);//to create an extent for your graphics       layer
    GraphicsLayer graphicLayer = new GraphicsLayer(lSR, lEnvolope);

    try {
        File file = new File(shpfile);
        ShapeFile shp = new ShapeFile(file);
        ESRIPointRecord e = (ESRIPointRecord) shp.getNextRecord();
        SimpleMarkerSymbol c_point = new SimpleMarkerSymbol(Color.BLACK, 1,
        STYLE.CIRCLE);
            while (e != null) {
            graphicLayer.addGraphic(new Graphic(new Point(e.getX(), e.getY()), c_point));
            e = (ESRIPointRecord) shp.getNextRecord();
            }
       shp.close();
       } catch (IOException e1) {
       e1.printStackTrace();
       }
      return graphicLayer;
    } 
```

[资源](http://forums.arcgis.com/threads/56190-How-to-open-shape-file-%28%2a.shp%29-from-SD-Card?highlight=shapefile)

编辑：

> BBN Technologies 的 OpenMap TM 包是一个基于开源 JavaBeans TM 的程序员工具包。使用 OpenMap，您可以快速构建访问旧数据库和应用程序数据的应用程序和小程序。OpenMap 提供了允许用户查看和操作地理空间信息的方法。

[链接到 OpenMap 信息。](http://openmap.bbn.com/)

# c# - 数组内容声明中的 C# 可能的 lambda

> ID：12278690
> 
> 赞同：0
> 
> 时间：2012-09-05T09:50:03.153
> 
> 标签：c#, arrays, function, lambda

我有这样一段代码：

```
 string suffix = "wallpapers\\";
    string extenstion = ".jpg";
    string[] wallpapers;

    .....
    void SetWallPapers()
    {
        wallpapers = new string[] {
            suffix + "1" + extenstion,
            suffix + "2" + extenstion,
            suffix + "3" + extenstion,
            suffix + "4" + extenstion,
        };
    } 
```

是否有任何变体可以在数组内容中进行 lambda 声明，例如：

（伪代码，仅供参考！）

```
wallpapers = new string[] { ( () => { for i = 1 till 4 -> suffix + i + extension; } ) } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:52:59.243

```
string[] wallpapers = Enumerable.Range(1, 4)
                                .Select(i => suffix + i + extenstion)
                                .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:02:23.310

```
string template = "wallpapers\\{0}.jpg";

string[] wallpapers =
    Enumerable.Range(1, 4)
        .Select(i => string.Format(template, i))
        .ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:54:16.763

你可以像这样使用 Linq 来做到这一点：

```
wallpapers =
    Enumerable.Range(1, 4)
    .Select(i => String.Concat(suffix, i, extenstion))
    .ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T09:54:34.843

`Enumerable.Range(1, 10).Select(a => "string" + a).ToArray();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T09:54:39.180

不，那里没有。如果您可以在运行时生成数组，请使用

```
Enumerable.Range(1, 4).Select(i => string.Format("{0}{1}{2}", suffix, i, extension)).ToArray(); 
```

PS你的代码无论如何都不能工作，你不能添加`int`到`string`.

# android - 在android中更改图像形状

> ID：12278692
> 
> 赞同：10
> 
> 时间：2012-09-05T09:50:07.507
> 
> 标签：android, image, android-canvas, android-image

我成功地在画布上的图像中实现了捏放大/缩小和拖放功能。

现在我想要的是重新调整大小，如下图所示链接基于 iPhone 应用程序![在此处输入图像描述](../Images/7495789de978f7718bde0b3e7f60cd8e.png)

[如何使用 iPhone SDK 改变图像的形状？](https://stackoverflow.com/questions/12224895/how-to-change-shape-of-an-image-using-iphone-sdk)

那么如何在 Android 中实现这种功能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:58:56.260

如果通过*重新调整大小*您指的是在垂直和水平平面上“拉伸”位图，那么您只需修改正在绘制形状（例如椭圆形）的矩形。

例如：

这是椭圆的原始形状：

```
canvas.drawOval(new Rect(0,0,100,100), bluePaint); 
```

这是同一个椭圆，只是在水平面上拉伸（调整大小）：

```
canvas.drawOval(new Rect(0,0,200,100), bluePaint); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T14:45:41.700

基本上你需要使图像无效并从头开始在画布上重新绘制::

```
img=(ImageView)findViewById(R.id.yourimageidfromxml);

img.onTouchEvent(MotionEvent me)
{
   int X=me.getX(); 
   int Y=me.getY();
   img.invalidate();
   img.repaint(X,Y);

}

void paint(int X,int Y)
{
  img.setWidth(X);
  img.setHeight(Y);
} 
```

缩放图像将从一开始就在画布上使用重绘进行转换

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:20:26.493

可以通过使用带有 scaleType "fitXY" 的简单 ImageView 来调整图像大小。

您必须自己添加蓝色调整大小手柄。

改变图像的旋转（绿色手柄）可以通过使用来实现：

```
public static Bitmap rotate(Bitmap src, float degree) {
    // create new matrix
    Matrix matrix = new Matrix();
    // setup rotation degree
    matrix.postRotate(degree);

    // return new bitmap rotated using matrix
    return Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
} 
```

来源：http: [//xjaphx.wordpress.com/2011/06/22/image-processing-rotate-image-on-the-fly/](http://xjaphx.wordpress.com/2011/06/22/image-processing-rotate-image-on-the-fly/)

有关更多 Android 图像处理示例，请参阅[http://xjaphx.wordpress.com/learning/tutorials/](http://xjaphx.wordpress.com/learning/tutorials/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T02:26:10.803

有两个选项，都涉及自定义视图。首先是创建一个自定义视图来填充您的“画布”。`Rect`您可以将视图中的 8 个蓝色和 1 个绿色圆圈作为对象进行跟踪。覆盖`onTouchEvent(MotionEvent)`然后检查运动事件是否在您的任何控件中并相应地更新它们（我在这里简化了一些事情:)）。从你的 onTouchEvent 你会打电话`invalidate()`。然后，您`onDraw(Canvas)`可以根据上次调用 onDraw 后控件的变化情况来处理绘制控件并更新图像。

另一种选择是做类似的事情，但视图只封装了圆圈和控件，这意味着移动视图需要一个容器来让视图改变它的布局参数。这样做，您的 onTouchEvent 方法将需要触发该布局视图的无效，因为它需要重新计算视图的大小和位置。这肯定会更难，但取决于您尝试实现的目标，使用单个视图可能比在单个视图中维护代码中的圆圈表示更好。

# wordpress - Magento - wordpress Fishpig 集成错误 [function.is-writable]

> ID：12278693
> 
> 赞同：1
> 
> 时间：2012-09-05T09:50:09.137
> 
> 标签：wordpress, magento, integration, blogs, fishpig

我在集成 Wordpress 和 Magento 时遇到问题。在 Fishpig Magento 插件中插入博客路由后，Wordpress 显示以下错误：

在第 132 行：

`Warning: is_writable() [function.is-writable]: open_basedir restriction in effect. File(/) is not within the allowed path(s): (/data/web/virtuals/27914/virtual) in /data/web/virtuals/27914/virtual/www/wp./wp-admin/options-permalink.php`

在第 133 行：

```
Warning: is_writable() [function.is-writable]: open_basedir restriction in effect. File(/) is not within the allowed path(s): (/data/web/virtuals/27914/virtual) in /data/web/virtuals/27914/virtual/www/wp./wp-admin/includes/misc.php 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T11:02:48.357

这些错误发生在 WordPress 管理本身，WordPress 集成扩展无法控制这些错误（没有任何扩展在 WP 管理中执行）。这些错误是由您的服务器限制（open_basedir）引起的，我相信是在 WordPress 尝试写入您的 .htaccess 文件时引起的。

这些错误可以忽略，并在您刷新页面时消失。话虽如此，要修复它们，您需要联系您的托管公司或服务器管理员。

# c# - 使用 .net C# HTTPHandler 覆盖对 HTTP 正文的读取

> ID：12278701
> 
> 赞同：1
> 
> 时间：2012-09-05T09:50:34.117
> 
> 标签：c#, asp.net, httprequest, httphandler, multipartform-data

使用 C# 我想控制从 POST 读取 HTTP 请求。主要是读取`multipart/form-data`文件上传的流以跟踪从客户端接收到的流。

使用`ProcessRequest`或 Async`BeginProcessRequest`正文已经被 ASP.net / IIS 解析。

有没有办法通过 HTTPHandler 覆盖内置读取，还是我必须使用另一种机制？

非常感谢

安迪

**更新**- 根据要求添加了代码示例，尽管与实现 IHttpHandler 的普通类没有什么不同

```
public class MyHandler : IHttpHandler
{

    public bool IsReusable { get { return true; } }

    public void ProcessRequest(HttpContext context)
    {
        // The body has already been received by the server
        // at this point.  

        // I need a way to access the stream being passed 
        // from the Client directly, before the client starts 
        // to actually send the Body of the Request.

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:48:01.253

看来您可以通过`context.BeginRequest`HttpModule 的事件来捕获流。

例如 ：

```
public class Test : IHttpModule
{

    public void Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(onBeginRequest);
    }

    public void onBeginRequest(object sender, EventArgs e)
    {
        HttpContext context = (sender as HttpApplication).Context;
        if( context == nul ) { return; }

        if (context.Request.RawUrl.Contains("test-handler.ext"))
        {
            Logger.SysLog("onBeginRequest");
            TestRead(context);
        }

    }

    // Read the stream
    private static void TestRead(HttpContext context)
    {
        using (StreamReader reader = new StreamReader(context.Request.GetBufferlessInputStream()))
        {
            Logger.SysLog("Start Read");
            reader.ReadToEnd();
            Logger.SysLog("Read Completed");
        }
    }
} 
```

真的我试图避免使用 HttpModules，因为它们是针对每个 .net 请求进行处理的，所以我真的很想知道如何通过 HTTPHandler 来完成它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T10:09:09.390

您绝对可以通过实现 IHttpHandler 来做到这一点。

这个[例子](http://www.codeproject.com/Articles/335968/Implementing-HTTPHandler-and-HTTPModule-in-ASP-NET)会让你开始。无需覆盖内置读数。
您收到请求中的所有数据，并可以根据需要对其进行处理。

# asp.net - GridData 视图按日期和时间过滤

> ID：12278703
> 
> 赞同：0
> 
> 时间：2012-09-05T09:50:48.950
> 
> 标签：asp.net, gridview, filter

我有一个 GridView，我需要过滤女巫向我显示日期和时间之间的数据。

```
 <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="ExportDataGrid._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <style type="text/css">
        #Select1
        {
            width: 109px;
        }
        #Select2
        {
            width: 109px;
        }
    </style>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Welcome to ASP.NET!
    </h2>
    <p>
        To learn more about ASP.NET visit <a href="http://www.asp.net" title="ASP.NET Website">www.asp.net</a>.
    </p>
    <p>
        DataGrid here</p>
    <p>

        <asp:DropDownList ID="DropDownList1" runat="server">
            <asp:ListItem Value=" 06:00:00 PM"></asp:ListItem>
            <asp:ListItem Value=" 06:00:00 AM"></asp:ListItem>
        </asp:DropDownList>
 <asp:DropDownList ID="DropDownList2" runat="server">
            <asp:ListItem Value=" 06:00:00 PM"></asp:ListItem>
            <asp:ListItem Value=" 06:00:00 AM"></asp:ListItem>
        </asp:DropDownList>

        <asp:Calendar ID="Calendar1" runat="server"></asp:Calendar>
        <asp:Calendar ID="Calendar2" runat="server"></asp:Calendar>
    </p>
    <p>
        <asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataSourceID="SqlDataSource1" 
            EmptyDataText="There are no data records to display.">
            <Columns>
                <asp:BoundField DataField="BatchId" HeaderText="BatchId" 
                    SortExpression="BatchId" />
                <asp:BoundField DataField="IncTank" HeaderText="IncTank" 
                    SortExpression="IncTank" />
                <asp:BoundField DataField="MoblieTank" HeaderText="MoblieTank" 
                    SortExpression="MoblieTank" />
                <asp:BoundField DataField="Recipe" HeaderText="Recipe" 
                    SortExpression="Recipe" />
                <asp:BoundField DataField="TransferStart" HeaderText="TransferStart" 
                    SortExpression="TransferStart" />
                <asp:BoundField DataField="TransferEnd" HeaderText="TransferEnd" 
                    SortExpression="TransferEnd" />
                <asp:BoundField DataField="TransferVol" HeaderText="TransferVol" 
                    SortExpression="TransferVol" />
                <asp:BoundField DataField="Operator" HeaderText="Operator" 
                    SortExpression="Operator" />
                <asp:BoundField DataField="Vessel" HeaderText="Vessel" 
                    SortExpression="Vessel" />
                <asp:BoundField DataField="WorkOrder" HeaderText="WorkOrder" 
                    SortExpression="WorkOrder" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:DB_user614ConnectionString1 %>" 
            ProviderName="<%$ ConnectionStrings:DB_user614ConnectionString1.ProviderName %>" 
            SelectCommand="SELECT [BatchId], [IncTank], [MoblieTank], [Recipe], [TransferStart], [TransferEnd], [TransferVol], [Operator], [Vessel], [WorkOrder] FROM [MoblieFilling] WHERE [TransferStart] BETWEEN @TransferStart+@TimeStart AND @TransferEnd+@TimeEnd  ">

        <SelectParameters>
                <asp:ControlParameter ControlID="Calendar1" DefaultValue="9/9/2011 2:30:30 PM" Name="TransferStart"   />
                <asp:ControlParameter ControlID="Calendar2" DefaultValue="9/9/2012 2:30:30 PM" Name="TransferEnd"  />
                <asp:ControlParameter ControlID="DropDownList1"  Name="TimeStart" Type=DateTime DefaultValue="00:00:00" />
 <asp:ControlParameter ControlID="DropDownList2"  Name="TimeEnd" Type=DateTime DefaultValue="00:00:00" />
            </SelectParameters>
        </asp:SqlDataSource>

    </p>
    <p>
        You can also find <a href="http://go.microsoft.com/fwlink/?LinkID=152368&amp;clcid=0x409"
            title="MSDN ASP.NET Docs">documentation on ASP.NET at MSDN</a>.
    </p>
</asp:Content> 
```

但这不起作用。我应该如何使用 DropList 来选择正确的时间？申报好不好？还是应该不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:01:33.340

您可以添加`AutoPostBack="true" and OnSelectIndexChanged="DropDownList_OnSelectIndexChanged"`到您的下拉列表。

```
void DropDownList_OnSelectIndexChanged(Object sender, EventArgs e)
 {
    var filter =  DropDownList1.SelectedValue;

    //Request your data with citeria
    //Re-bind your GridView
 } 
```

# javascript - 加入数组会导致将它们作为对象加入

> ID：12278707
> 
> 赞同：0
> 
> 时间：2012-09-05T09:50:56.330
> 
> 标签：javascript, jquery, html

我有一个`items`包含数组的参数的回调：

```
[<article>..</article>,<article>...</article>,<article>..</article>] 
```

我需要做的是加入这些项目，所以我所做的是：

```
items = items.join(''); 
```

但是当我`console.log(items)`看到：

```
[object HTMLElement][object HTMLElement][object HTMLElement][object HTMLElement] 
```

如何正确合并此数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:52:30.337

你有对象，它们不能用`join()`.

如果您的浏览器支持`outerHTML`，您可以...

```
var html = $.map(items, function(item) { return item.outerHTML; }).join(""); 
```

[js小提琴](http://jsfiddle.net/Swj3j/)。

否则，你可以这样做...

```
var fauxDocFrag = $("<div />");
$.each(items, function(key, item) { fauxDocFrag.append(item); });
var html = fauxDocFrag.html(); 
```

[js小提琴](http://jsfiddle.net/KhsG2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:11:28.817

在这里，我已经为上述问题完成了完整的垃圾箱。你可以通过演示链接。

**演示** [http://codebins.com/bin/4ldqp7n](http://codebins.com/bin/4ldqp7n) **HTML**

```
<input type="button" id="btn1" value="Get Object Array Text" />
<input type="button" id="btn2" value="Reset" />
<div id="result">
</div> 
```

**jQuery**

```
$(function() {
    var items = ["<article>Article-1:Text</article>", "<article>Article-2:Text</article>", "<article>Article-3:Text</article>", "<article>Article-4:Text</article>", "<article>Article-5:Text</article>"];

    $("#btn1").click(function() {
        var result = "";
        $.each(items, function(key, item) {
            if ($(item).text().trim() != "") {
                if (key > 0) result += " ";
                result += $(item).text().trim();
            }
        });
        if (result != "") {
            $("#result").html(result);
            $("#result").show('slow');
        }
    });

    //Reset Result
    $("#btn2").click(function() {
        $("#result").html('').css('display', 'none');
    });
}); 
```

**演示** [http://codebins.com/bin/4ldqp7n](http://codebins.com/bin/4ldqp7n)

# linux - 使用 CMake 查找 libffi 头文件

> ID：12278710
> 
> 赞同：0
> 
> 时间：2012-09-05T09:51:00.473
> 
> 标签：linux, find, cmake, pkg-config, libffi

我需要 libffi 来构建我的 C++ 项目。问题是不存在用于查找 libffi 的预制脚本，并且 ffi.h 位于奇怪的位置，具体取决于库的版本和 Linux 发行版。

这是我的尝试：

```
# Look for the header file.
Find_Path(LIBFFI_INCLUDE_DIR NAMES ffi.h)
Mark_As_Advanced(LIBFFI_INCLUDE_DIR)

# Look for the library.
Find_Library(LIBFFI_LIBRARY NAMES
    ffi
)
Mark_As_Advanced(LIBFFI_LIBRARY)

# handle the QUIETLY and REQUIRED arguments and set LIBFFI_FOUND to TRUE
# if all listed variables are TRUE
Include(FindPackageHandleStandardArgs)
Find_Package_Handle_Standard_Args(libffi DEFAULT_MSG
    LIBFFI_LIBRARY LIBFFI_INCLUDE_DIR)

If(LIBFFI_FOUND)
  SET(LIBFFI_LIBRARIES ${LIBFFI_LIBRARY})
  SET(LIBFFI_INCLUDE_DIRS ${LIBFFI_INCLUDE_DIR})
Endif(LIBFFI_FOUND) 
```

但它显然不起作用，因为 Find_Path() 不会递归搜索。如何做得更好？

我尝试使用 CMake 的 pkg-config 模块，但 pkg-config 也找不到它。

> [ethon@Fleckstation 论文]$ pkg-config --cflags libffi 在 pkg-config 搜索路径中找不到包 libffi。也许您应该将包含 `libffi.pc' 的目录添加到 PKG_CONFIG_PATH 环境变量中没有找到包 'libffi'

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:24:01.813

我是 libffi 的作者。pkg-config 应该找到它。你在做什么系统？您的系统上是否有 libffi.pc 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:53:58.883

看看它是如何在[LLVM 项目](http://llvm.org/viewvc/llvm-project/llvm/trunk/cmake/config-ix.cmake?view=markup)中实现的。搜索`if( LLVM_ENABLE_FFI )`线。

# c# - 如何在 C# 中以二进制格式获取对象的元数据信息？

> ID：12278711
> 
> 赞同：0
> 
> 时间：2012-09-05T09:51:00.970
> 
> 标签：c#, .net

我正在从我在 Python 中运行的应用程序接收二进制流。

从二进制流中，我想在字节数组的流中创建一个 C# 对象。

如何反序列化对象并从二进制流中检索对象？

我们可以忽略它是一个 python 应用程序。我对二进制流的工作原理更感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:01:06.833

您似乎认为所有语言都会自动使用相同的序列化方案。

*   事实并非如此。

*   这在理论上甚至是不可能的，因为不同的编程语言对对象的含义有不同的概念。

如果您对如何在 C# 中读取 Python 序列化流特别感兴趣，请询问。否则，这个问题是无法回答的，因为它是基于一个错误的前提。

* * *

**跟进**- 出于好奇，我在 C# 中搜索了一个 Python pickle reader。搜索结果的前 3 页中没有任何内容……尽管在 C++ 中提到了一个泡菜阅读器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:09:21.200

> C# 对象

C# 没有对象；这是一个 .Net 对象。

其次，我们绝对不能忽略它是一个 Python 应用程序，因为这意味着它很可能没有在 .Net 上运行，因此 .Net 二进制格式不是 Python 运行时的原生格式。这并不是说在这种情况下您*无法*使用 .Net 序列化，因为如果您正在运行[IronPython（.Net python 实现](http://ironpython.net/)），那么您可以简单地使用其中的二进制序列化 API 并获得被序列化的*.Net 对象*。

但是，如果它是运行在不同平台上的 Python，那么您可以对二进制流中的信息进行解码，为此您需要知道格式，然后直接上门阅读[二进制格式数据结构规范来自 MSDN](http://msdn.microsoft.com/en-us/library/cc236844%28PROT.10%29.aspx)。

当然，这将需要（相当多）更多的工作！

如果您正在处理的项目允许您更改原始对象的序列化方式，那么我强烈建议您切换到 XML 序列化或类似的东西 - 设计为可移植的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:09:28.030

只是为您添加一些一般信息：

在 C#/.Net 中，有一种将对象序列化为非二进制形式的通用方法，因为二进制形式需要许多类似协议的标头来 - 注意 - 包括元数据，这导致接收者必须知道 .Net /CLR 内部结构很好。

相反，今天，对象通常被序列化为 XML（当类型信息很重要时）或 JSON 格式（当只有数据重要时），因此任何接收者都可以很容易地读取它们，而且更频繁地 - 任何第 3 方都可以轻松地生成新对象- 类似于我们的应用程序可能“只是反序列化”的数据，而不管它是谁生成的以及在什么平台上生成的。

但是，仍然使用二进制序列化。XML/JSON 数据，即使经过压缩，通常仍然比二进制图像大。但是，当我们不**希望**将数据**发布**到外部世界时，或者如果我们以某种方式神奇地知道它将仅在 .Net 上使用**我们的程序集**进行处理，则严格使用二进制序列化。

# git - 如何在 Git 中禁用特定文件的自动阶段

> ID：12278713
> 
> 赞同：2
> 
> 时间：2012-09-05T09:51:27.547
> 
> 标签：git, staging, git-commit, autocommit

我有一个文件，我希望它成为存储库的一部分，但我不想在每次运行`commit -a`我通常使用的命令时提交它的更改，但只有当我手动将它添加到暂存区域时。

Git可以吗？

为了清楚起见，它是一个二进制“输出”文件（电子表格），其中还包含一些关于如何处理数据的逻辑，所以我只想在更改其逻辑/结构而不是存储数据时提交它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:57:30.177

我建议你真的不应该一直使用`git commit -a`，而是使用`git add -p; git commit -v`.

但是，如果您仍然希望继续，您需要执行`git update-index --assume-unchanged <file>`，然后当您想要提交该文件时，执行`git update-index --no-assume-unchanged <file>`.

参考： http: [//gitready.com/intermediate/2009/02/18/temporarily-ignoring-files.html](http://gitready.com/intermediate/2009/02/18/temporarily-ignoring-files.html)

# haskell - Haskell 三角微基准

> ID：12278716
> 
> 赞同：0
> 
> 时间：2012-09-05T09:51:35.517
> 
> 标签：haskell, ghc

考虑这个简单的“基准”：

```
n :: Int
n = 1000
main = do
    print $ length [(a,b,c) | a<-[1..n],b<-[1..n],c<-[1..n],a^2+b^2==c^2] 
```

和适当的`C`版本：

```
#include <stdio.h>

int main(void)
{
    int a,b,c, N=1000;
    int cnt = 0;

    for (a=1;a<=N;a++)
        for (b=1;b<=N;b++)
            for (c=1;c<=N;c++)
                if (a*a+b*b==c*c) cnt++;
    printf("%d\n", cnt);
} 
```

汇编：

*   Haskell 版本编译为：`ghc -O2 triangle.hs`(ghc 7.4.1)
*   C版本编译为：`gcc -O2 -o triangle-c triangle.c`(gcc 4.6.3)

运行时间：

*   Haskell：4.308s 真实
*   C: 1.145s 实数

即使对于 Haskell 几乎慢 4 倍这样简单且可优化的程序，它的行为是否正常？Haskell 在哪里浪费时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T11:03:44.130

Haskell 版本浪费时间分配盒装整数和元组。

您可以通过例如运行带有 flags 的 haskell 程序来验证这一点`+RTS -s`。对我来说，输出的统计数据包括：

```
 80,371,600 bytes allocated in the heap 
```

C 版本的直接编码更快，因为编译器可以使用未装箱的整数并跳过分配元组：

```
n :: Int
n = 1000
main = do
  print $ f n

f :: Int -> Int
f max = go 0 1 1 1
  where go cnt a b c
          | a > max = cnt
          | b > max = go cnt (a+1) 1 1
          | c > max = go cnt a (b+1) 1
          | a^2+b^2==c^2 = go (cnt+1) a b (c+1)
          | otherwise = go cnt a b (c+1) 
```

看：

```
 51,728 bytes allocated in the heap 
```

此版本的运行时间`1.920s`与`1.212s`C 版本相比。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T10:20:06.123

我不知道你的“板凳”有多大意义。我同意列表理解语法“很好”使用，但如果你想比较两种语言的性能，你应该在更公平的测试中比较它们。我的意思是，创建一个可能包含很多元素的列表，然后计算它的长度与在（三重循环）中增加一个计数器完全不同。

所以也许haskell有一些很好的优化可以检测你在做什么并且从不创建列表，但我不会依赖它来编写代码，你可能也不应该这样做。

如果您需要快速计数，我认为您不会这样编写程序，那么为什么要为这个板凳编写代码呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T11:04:02.663

Haskell*可以*很好地优化——但是你需要适当的技术，并且你需要知道你在做什么。

这种列表理解语法很优雅，但也很浪费。您应该阅读[RealWorldHaskell 的相应章节，](http://book.realworldhaskell.org/read/profiling-and-optimization.html)以了解有关您的分析机会的更多信息。`Int`在这种确切的情况下，您毫无理由地创建了很多列表脊椎和装箱。看这里：![基准的类型配置文件](../Images/02b317d3d1a083cc688104d566ae2163.png)

你绝对应该为此做点什么。编辑：@opqdonut 刚刚发布了一个关于如何加快速度的好答案。

请记住下次在比较任何基准之前分析您的应用程序。Haskell 使编写惯用代码变得容易，但它也隐藏了很多复杂性。

# iphone - 异步数据连接 iOS

> ID：12278717
> 
> 赞同：2
> 
> 时间：2012-09-05T09:51:39.683
> 
> 标签：iphone, ios, oauth, nsurlrequest, block

我已经为我目前正在开发的应用程序编写了一个同步类。

由于数据量很大，它首先获取数据计数，然后将下载批量处理为`NSOperationQueue`. 这一切都很好，我已经让同步算法快速运行。

它的工作方式如下...

```
- (void)synchroniseWithCompletionHandler://block for completion handler
                            errorHandler://block for error handler
{
    [self.queue addOperationWithBlock
     ^{
           //Create an NSURLRequest for the first batch
           //Send the request synchronously
           //Process the result
           //If error then cancel all operations in the queue, run errorHandler and return.
      }];

    [self.queue addOperationWithBlock
     ^{
           //Create an NSURLRequest for the second batch
           //Send the request synchronously
           //Process the result
           //If error then cancel all operations in the queue, run errorHandler and return.
      }];

    //Add all the remaining batches.

    [self.queue addOperationWithBlock
     ^{
           completionHandler();
      }];
} 
```

这样可以将内存使用量保持在最低水平，并将速度保持在最大水平。这个想法是下载和进程都在同一个块中，并且在继续队列中的下一个操作之前都已处理。

除了，我们现在已经在服务器上实现了 OAuth2 来对调用进行身份验证。

我通过 NXOAuth2 库设置 NXOAuth2Request 来完成这项工作。然后设置帐户并提取签名的 URL 请求。然后我像以前一样使用这个 NSURLRequest。

这样做的问题是，如果 OAuth 令牌在同步中途过期，则同步失败。

NXOAuth2 库有一个功能......

```
+ (void)performMethod:(NSString *)aMethod
           onResource:(NSURL *)aResource
      usingParameters:(NSDictionary *)someParameters
          withAccount:(NXOAuth2Account *)anAccount
  sendProgressHandler:(NXOAuth2ConnectionSendingProgressHandler)progressHandler
      responseHandler:(NXOAuth2ConnectionResponseHandler)responseHandler; 
```

这通过在执行令牌刷新后重新发送请求来处理过期令牌的情况。

但是，这个函数是异步的，所以我不确定如何最好地将它放入我的同步程序中。

我可以使用它添加操作，然后将处理放入完成块中。但是这样做意味着所有下载几乎都将同时运行，然后无法保证下载处理的顺序（由于数据依赖性，我需要以严格的顺序处理它们。

我现在能想到的唯一方法是将它们菊花链在一起......

```
[NXOAuth2Request performFirstRequest...
    {
        deal with the data.
        [NXOauth2Request performSecondRequest...
            {
                deal with the data.
                [NXOauth2Request performThirdRequest...
                    {
                        deal with the data.
                        finish
                     }];
             }];
      }]; 
```

这只是混乱，可能会变得非常混乱。

有没有其他方法可以处理这个？我能想到的唯一另一件事就是尝试让自己焕然一新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:23:54.783

虽然我喜欢块，但只有一些任务最好使用并发 NSOperations 来完成。我在 github 上放了一个[非常简单非常容易采用的项目](https://github.com/dhoerl/NSOperation-WebFetches-MadeEasy)，使用与我在商店中的应用程序中使用的完全相同的文件来获取和处理数据。您可以轻松地将相同的策略调整到您的任务中。

*   你从一个基本的并发操作开始，它进行网络获取，获取一些数据。
*   使用子类，您可以以不同的方式处理该数据
*   由于它是并发的，这意味着它有自己的运行循环，它可以阻止等待消息，因此您可以在其中合并您的授权
*   您可以使用您想要的任何逻辑 - 如果您在中间遇到授权失败，您可以取消您的 url 请求，授权，然后在一个操作中执行另一个操作
*   您可以链接操作，这样您一次永远不会有多个活动

我将这个结构用于我所有的网络交互，并且有大约 30 个子类对接收到的数据进行不同类型的处理。

该项目具有三个主要类别：

*   OperationsRunner - 一个非常小的类，为 NSOperationsQueue 提供高级接口

*   ConcurrentOperation - 最低限度

*   WebFetcher - 一个运行 NSURLConnection 并在运行时完成的类

其他子类只需要提供一个“完整”的方法来处理数据。

# java - 如何从不同路径删除 Cookie？

> ID：12278718
> 
> 赞同：1
> 
> 时间：2012-09-05T09:51:39.293
> 
> 标签：java, servlets, cookies

我想通过我写的Java代码删除一个Cookie，

```
Cookie[] cookies = request.getCookies();  //request - HttpServletRequest  
for (int i = 0; i < cookies.length; i++) {  
    if (cookies[i].getName().equals("cam_passport")) {  
        cookies[i].setMaxAge(0);     
        cookies[i].setValue("");  
        response.addCookie(cookies[i]);  
    }  
} 
```

我正在“cookies”对象中获取 cookie 列表，但不是必需的“cam_passport”。我观察到的是，当我在 Mozilla 中检查时，这个 Cookie 的 PATH 是不同的。其中，我在“cookies”对象中获取的 cookie 列表的路径为“/”。而且，对于这个“cam_passport”cookie，路径是“/cognos10”。

我每次都需要在一个实例中删除上述 cookie。我怎样才能得到与上述不同路径的 Cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:00:14.090

您需要向该路径发送重定向，可能还需要一个请求参数。然后，您可以在精确映射到该路径的 servlet 或过滤器中获取 cookie 并在必要时根据请求参数的存在将其删除。最后，如果需要，您可以根据请求参数重定向回原始 URL。

将来，`cookie.setPath("/")`如果您需要 cookie 在整个 Web 应用程序中可用，请在创建 cookie 期间使用。

# arrays - 调用将数组写入范围的函数

> ID：12278721
> 
> 赞同：0
> 
> 时间：2012-09-05T09:51:58.203
> 
> 标签：arrays, range, google-apps-script

我正在尝试更改我的脚本以在 Google Docs 中使用新的 google 分析 API。

我完全能够从 api 中检索我的数据作为数组，它可能看起来像：

*[[“01”、“5”、“5”]、[“02”、“0”、“0”]、[“03”、“2”、“2”]、[“04”、“2 ", "6"], ["05", "46", "73"], ["06", "15", "18"], ["07", "7", "7"]]*

我寻求帮助的地方是如何将其写入单元格。我曾经使用 v2 API 这样做，但在这里苦苦挣扎。（只是不明白为什么我的旧方法不起作用）。

**我想做的事：**

1.  从单元格调用函数（随机选择）

2.  将数组中的结果放到我工作表中的某个范围内。我调用函数的单元格应该是第一个写入数据的单元格。

函数的开头是：

```
function testAnalytics() {

      var id = "ga:XXXXXXXX";
      var startdate = "2012-01-01";
      var enddate = "2012-07-31";
  var metrics = "ga:visits, ga:pageviews";
  var optArgs = {dimensions: "ga:month"};
  var grabData = Analytics.Data.Ga.get(id,startdate, enddate,metrics,optArgs); 
//  Browser.msgBox(grabData.getRows()); // test to see if data is correctly received 
  var returnVal = grabData.getRows();
  return returnVal; 

/* write returnVal to active cell on active spreadsheet */

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:28:29.490

尝试

```
var sheet = SpreadsheetApp.getActiveSheet(); 
var thisCell = SpreadsheetApp.getActiveRange(); 
var row = thisCell.getRow();
var col = thisCell.getColumn(); 
//Assuming every row in the 2D array has the same number of elements. 
sheet.getRange(row, col, returnVal.length , returnVal[0].length).setValues(returnVal); 
```

如果您希望它写入任何其他单元格，请适当更改 thisCell。注意我自己没有测试过，所以如果有语法错误，请随时更正:)

# windows - Qt（在 Windows 上）将权限级别设置为“requireAdministrator”

> ID：12278729
> 
> 赞同：6
> 
> 时间：2012-09-05T09:52:31.003
> 
> 标签：windows, qt

我正在使用 Qt Creator 并努力使`.exe`文件默认以管理员身份运行。

在线阅读所有解决方案，我试图将这一行放在我的`.pro`文件中：

```
QMAKE_LFLAGS += /MANIFESTUAC:"level='requireAdministrator' uiAccess='false'" 
```

但是当我检查我的`.exe`（使用记事本）时，它仍然包含：

```
<requestedExecutionLevel level="asInvoker" uiAccess="false"></requestedExecutionLevel> 
```

谁能告诉我，如何添加`requireAdministrator`？

**临时解决方案：** 到目前为止，我找不到解决方案，所以我做了一个临时破解。我制作了一个`.exe`名为“LaunchAnother.exe”的文件，它将使用以下代码启动我的“main.exe”：

```
SHELLEXECUTEINFO shExInfo = {0};
shExInfo.cbSize = sizeof(shExInfo);
shExInfo.fMask = SEE_MASK_NOCLOSEPROCESS;
shExInfo.hwnd = 0;
shExInfo.lpVerb = _T("runas");                // Operation to perform
shExInfo.lpFile = _T("main.exe");       // Application to start    
shExInfo.lpParameters = "";                  // Additional parameters
shExInfo.lpDirectory = 0;
shExInfo.nShow = SW_SHOW;
shExInfo.hInstApp = 0;  

if (ShellExecuteEx(&shExInfo))
{
    WaitForSingleObject(shExInfo.hProcess, INFINITE);
    CloseHandle(shExInfo.hProcess);
} 
```

仍在等待更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:40:50.317

您可以在编译后使用 mt.exe 嵌入清单文件。

[创建和嵌入应用程序清单 (UAC)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

[如何：在 C/C++ 应用程序中嵌入清单](http://msdn.microsoft.com/en-us/library/ms235591%28v=vs.80%29.aspx)

[清单文件示例](https://stackoverflow.com/a/6137516/999943)

另一种选择是创建一个 .res 文件并将其指向您的清单文件，如下所示：

[如何仅使用 mingw 工具将清单嵌入到 dll 中](http://cournape.wordpress.com/2008/09/02/how-to-embed-a-manifest-into-a-dll-with-mingw-tools-only/)

希望有帮助。

# android - 如何使用带有安卓应用内购买的测试账户测试安卓应用

> ID：12278730
> 
> 赞同：0
> 
> 时间：2012-09-05T09:52:30.260
> 
> 标签：android, in-app-purchase

我已将我的电子邮件 ID 添加到 android 应用内购买测试帐户。

但是，当我要使用此电子邮件 ID 帐户在 Android 设备中测试应用内购买时，它会打开要求使用信用卡详细信息进行购买和购买。所以我很困惑如何以正确的方式测试应用程序？我错过了要测试的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:57:48.750

不幸的是，要测试应用内结算，您实际上必须购买您的商品。除了使用假物品 ID 的[静态响应](http://developer.android.com/guide/google/play/billing/billing_testing.html#billing-testing-static)之外，没有办法用“假钱”来测试购买。

好消息是您可以进入您的商家帐户并立即给自己退款，因此您永远不会被收取任何费用。

# ubuntu - Apache2 配置 404 错误

> ID：12278742
> 
> 赞同：0
> 
> 时间：2012-09-05T09:53:15.813
> 
> 标签：ubuntu, apache2, httpd.conf

我们的系统管理员刚刚离开了一个我正在处理的项目，我一直在争先恐后地尝试配置我们的生产服务器以匹配 TEST（一切正常）。在服务器配置方面我不是很了解，而且我已经陷入了很多死胡同，所以我非常感谢可以提供的任何帮助。

我通过将 TEST/var/www 复制到 PROD 将代码从 TEST 提升到 PROD。因此，PROD 中的应用程序现在驻留在 PROD/var/www/www 中。我现在可以在 Production (my.production.com/www) 上访问应用程序的登录页面，但无法访问 var/www/www/ 子目录中的任何文件。我不断收到 404 Not Found 错误。

我已将站点的配置（名为“realto”的文件）从 TEST 复制到 PROD，并运行 a2ensite 以创建指向启用站点的文件夹的符号链接，但在生产中仍然出现 404 错误。

谁能告诉我可能是什么问题，或者指出我正确的方向？

编辑：我在下面包含了 httpd.conf、ports.conf 和站点配置文件的文本。

httpd.conf：

```
ServerName    my.server.com
ServerSignature Off
ServerTokens Prod
<Directory />
  Order Deny,Allow
  Deny from all
  Options None
  AllowOverride None
</Directory>
<DirectoryMatch /var/www/*>
  Order Allow,Deny
  Allow from all
  AllowOverride All
  Options None
</DirectoryMatch>
<DirectoryMatch phpmyadmin>
  Order Allow,Deny
  Allow from all
  Options None
</DirectoryMatch> 
```

站点配置文件：

```
 <VirtualHost *:80>
    ServerAdmin xxx@xxxxxxxx.xxx

    DocumentRoot /var/www/www
    <Directory />
        #Options FollowSymLinks
        #AllowOverride None
                Order Deny,Allow
                Deny from All
    </Directory>
    <Directory /var/www/>
                #RewriteEngine On
                #RewriteBase /
                #RewriteCond %{REQUEST_FILENAME} -s [OR]
                #RewriteCond %{REQUEST_FILENAME} -l [OR]
                #RewriteCond %{REQUEST_FILENAME} -d
                #RewriteRule ^.*$ - [NC,L]
                #RewriteRule ^.*$ index.php [NC,L]
                Order Allow,Deny
                Allow from all

        Options -Indexes FollowSymLinks MultiViews
        AllowOverride All
    </Directory>
    <Directory /var/www/www/application/configs/>
          <Files ~ "\.ini$">
                Deny from All
          </Files>
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

端口.conf：

```
# If you just change the port or add more ports here, you will likely also
# have to change the VirtualHost statement in
# /etc/apache2/sites-enabled/000-default
# This is also true if you have upgraded from before 2.2.9-3 (i.e. from
# Debian etch). See /usr/share/doc/apache2.2-common/NEWS.Debian.gz and
# README.Debian.gz

NameVirtualHost *:80
Listen 80

<IfModule mod_ssl.c>
    # If you add NameVirtualHost *:443 here, you will also have to change
    # the VirtualHost statement in /etc/apache2/sites-available/default-ssl
    # to <VirtualHost *:443>
    # Server Name Indication for SSL named virtual hosts is currently not
    # supported by MSIE on Windows XP.
    Listen 443
</IfModule>

<IfModule mod_gnutls.c>
    Listen 443
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:20:19.563

首先要做的是使 DocumentRoot 和条目匹配。

```
DocumentRoot /var/www/www
<Directory /var/www/www>
    #RewriteEngine On
    #RewriteBase /
    #RewriteCond %{REQUEST_FILENAME} -s [OR]
    #RewriteCond %{REQUEST_FILENAME} -l [OR]
    #RewriteCond %{REQUEST_FILENAME} -d
    #RewriteRule ^.*$ - [NC,L]
    #RewriteRule ^.*$ index.php [NC,L]
    Order Allow,Deny
    Allow from all

    Options -Indexes FollowSymLinks MultiViews
    AllowOverride All
</Directory> 
```

使用此 DocumentRoot，访问您的站点将提供 /var/www/www 中的内容。这意味着访问[http://example.com/www](http://example.com/www)实际上会在 /var/www/www/www 中查找文件。

现在 DocumentRoot 和 Directory 指令匹配，您真的希望所有 mod_rewrite 规则都被注释掉吗？就像现在一样，当您请求 /var/www/www 中实际不存在的任何文件时，您将收到 404。如果您的应用需要将请求路由到 index.php，您需要取消注释这些行。（我猜他们可能会被注释掉以进行测试，但以防万一......）

作为旁注，在未来我会建议一个不那么令人困惑的 docroot 路径。有时很难看到重复的单词/字符，因此更容易识别重复性较低的拼写错误。

我喜欢这样设置我的应用程序：

```
/var/www/example.com/test/htdocs
/var/www/example.com/www/htdocs 
```

这样一来，您就可以立即清楚您所处的环境，并且不会那么混乱。

# php - 案例语句 PHP 中的代码更少

> ID：12278746
> 
> 赞同：0
> 
> 时间：2012-09-05T09:53:32.803
> 
> 标签：php, switch-statement

有没有办法在语句之后编写更少的代码（分解）。在我的情况下，我有 webform_client_form_AKEY ，其中 AKEY var 发生变化，我的 var 在 uri 中传递（？C= = 1 ...）。谢谢

```
switch ($form_id)
{
case 'webform_client_form_9944':
    $form['#action'] = url('section/client-tool-box/appointment?c=1');          
    break;
case 'webform_client_form_9883':
    $form['#action'] = url('section/client-tool-box/appointment?c=2'); 
    break;
case 'webform_client_form_9884':
    $form['#action'] = url('section/client-tool-box/appointment?c=3');          
    break;
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:57:48.867

使用“字典”方法：

```
$array = array(
    "webform_client_form_9944" => "1",
    "webform_client_form_9883" => "2",
    "webform_client_form_9884" => "3"
);

if (array_key_exists($array, $form_id))
    $form['#action'] = url('section/client-tool-box/appointment?c=' . $array[$form_id]);
else
    $form['#action'] = ""; // default 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:57:26.573

```
$urls = array(
  'webform_client_form_9944' => 'section/client-tool-box/appointment?c=1',
  'webform_client_form_9883' => 'section/client-tool-box/appointment?c=2',
   ...
);

$form['#action'] = url($urls[$form_id]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:01:06.273

如何将“form_id”到“c”映射保留在数组中？我猜，这使得维护变得更加容易。此外，没有更多重复的代码：

```
<?php
$form_id = 'webform_client_form_9944';

$forms = array(
    '9944' => '1',
    '9883' => '2',
    '9884' => '3'
);

$id = str_replace('webform_client_form_', '', $form_id);

if (isset ($forms[$id])) {
    $form['#action'] = url('section/client-tool-box/appointment?c=3');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:01:23.273

我不认为在这里编写更少的代码实际上很重要。但我想如果你抽象出数据，代码会更容易维护：

```
// Untested
$id_to_c = array(
    9944 => 1,
    9883 => 2,
    9884 => 3,
);
if( preg_match('^webform_client_form_(\\d)$', $form_id, $matches) ){
    if( array_keys_exists($matches[1], $id_to_c) ){
        $form['#action'] = url('section/client-tool-box/appointment?c=' . rawurlencode($id_to_c[$matches[1]]));   
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:02:18.083

您可以执行以下操作：

```
$formid = end(explode('_', $form_id));
$map = array(9944=>1, 9883=>2, 9844=>3, ...);

$form['#action'] = url("section/client-tool-box/appointment?c={$map['webform_client_form_'.$map[$formid]}"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T09:56:39.127

Ya :

```
$cat = 0; //0 : default cat
switch ($form_id) {
   case 'webform_client_form_9944': $cat = 1; break;
   case 'webform_client_form_9883': $cat = 2; break;
   case 'webform_client_form_9884': $cat = 3; break;
   ...
}
$form['#action'] = url('section/client-tool-box/appointment?c='.$cat); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T09:59:12.657

你可以试试这种方式

```
$form_id= 'webform_client_form_9944';
$cons = 'webform_client_form_';

switch($form_id){
    case $cons.'9944':
        $c = 1;
        break;
    case $cons.'9883':
        $c = 2;
        break;
}
$form['#action'] = url('section/client-tool-box/appointment?c='.$c); 
```

# file - IE中的多个文件上传问题

> ID：12278752
> 
> 赞同：0
> 
> 时间：2012-09-05T09:53:54.063
> 
> 标签：file, upload

嗨，以下通过按住 shift 和控制键“input type="file" name="uploadFile" size="60" multiple="multiple"" 上传多个文件的语句在 IE 中不起作用。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T06:42:04.323

用 < 替换前导引号，用 /> 替换尾随引号，如下所示。

```
 <input type="file" name="uploadFile" multiple="multiple" size="60" /> 
```

注意：Internet Explorer 9 及更早版本不支持标签的 multiple 属性。我相信它适用于支持 HTML5 的浏览器。

编辑：刚刚将 IE 更新到版本 10，多个文件选择现在工作正常。

# django - 模型和字段验证中的 clean() 方法

> ID：12278753
> 
> 赞同：21
> 
> 时间：2012-09-05T09:53:54.203
> 
> 标签：django

我对模型的`clean()`方法和基本字段验证有疑问。这是我的模型和`clean()`方法。

```
class Trial(models.Model):

    trial_start = DurationField()
    movement_start = DurationField()
    trial_stop = DurationField()

    def clean(self):
        from django.core.exceptions import ValidationError
        if not (self.movement_start >= self.trial_start):
            raise ValidationError('movement start must be >= trial start')
        if not (self.trial_stop >= self.movement_start):
            raise ValidationError('trial stop must be >= movement start')
        if not (self.trial_stop > self.trial_start):
            raise ValidationError('trial stop must be > trial start') 
```

我的`clean()`方法检查某些值是否在正确的范围内。如果用户忘记填写一个字段，例如`movement_start`，那么我会收到一个错误：

`can't compare datetime.timedelta to NoneType`

我很惊讶我得到了这个错误，因为原始`clean()`函数应该捕获那个丢失的条目（毕竟`movement_start`是一个必填字段）。那么如何基本检查缺失值，以及我的自定义检查值是否在特定范围内？这可以用模型的`clean()`方法完成，还是我需要使用`Forms`？

**EDIT1**使其更清楚：`trial_start`和`movement_start`都是`trial_stop`必填字段。我需要编写一个`clean()`方法，首先检查所有三个字段是否都已填写，然后检查值是否在一定范围内。

例如，以下代码不起作用，因为`trial_start`可能为空。我想避免检查每个字段的存在 - django 应该为我做这件事。

```
class TrialForm(ModelForm):

    class Meta:
        model = Trial

    def clean_movement_start(self):
        movement_start = self.cleaned_data["movement_start"]
        trial_start = self.cleaned_data["trial_start"]
        if not (movement_start >= trial_start):
            raise forms.ValidationError('movement start must be >= trial start')
        return self.cleaned_data["movement_start"] 
```

**EDIT2** 我想将此检查添加到模型`clean()`方法的原因是在 python shell 上创建的对象将自动检查正确的值。表单可以用于视图，但我也需要对 shell 进行值检查。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T10:28:38.617

我想这就是要走的路：

```
class TrialForm(ModelForm):

    class Meta:
        model = Trial

    def clean(self):
        data = self.cleaned_data
        if not ('movement_start' in data.keys() and 'trial_start' in data.keys()  and 'trial_stop' in data.keys()):
            raise forms.ValidationError("Please fill out missing fields.")

        trial_start = data['trial_start']
        movement_start = data['movement_start']
        trial_stop = data['trial_stop']

        if not (movement_start >= trial_start):
            raise forms.ValidationError('movement start must be >= trial start')

        if not (trial_stop >= movement_start):
            raise forms.ValidationError('trial stop must be >= movement start')

        if not (trial_stop > trial_start):
            raise forms.ValidationError('trial stop must be > trial start')

        return data 
```

**编辑**这种方法的缺点是，只有当我通过表单创建对象时，值检查才会起作用。不会检查在 python shell 上创建的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-07T20:24:00.637

我知道这已经晚了，但要回答为什么这可能会发生在最终来到这里的人身上：没有“原始清洁”。clean 方法是一个自定义验证的钩子，所以你是提供它的代码的人。不确定 OP 是如何使用 clean 钩子的，但是：在定义它之后，你应该调用`full_clean()`你的模型，以便 Django 完整地运行模型验证。请参阅文档中的详细信息，了解它调用不同验证方法的顺序，例如[https://docs.djangoproject.com/en/1.11/ref/models/instances/#validating-objects](https://docs.djangoproject.com/en/1.11/ref/models/instances/#validating-objects)（可能需要注意：`full_clean()`是'不会被模型自动调用，`save()`这就是为什么当您使用外壳并立即保存时您将跳过验证的部分原因）

（注意 ModelForms 也有各种验证步骤，并将调用模型的 full_clean：[https](https://docs.djangoproject.com/en/1.11/topics/forms/modelforms/#validation-on-a-modelform) ://docs.djangoproject.com/en/1.11/topics/forms/modelforms/#validation-on-a-modelform ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T22:07:20.657

我正在努力解决类似的问题，但使用`ForeignKey`. 在您的情况下，我会检查这些字段是否为空，并且我会简化您的布尔表达式：

```
class Trial(models.Model):

    trial_start = DurationField()
    movement_start = DurationField()
    trial_stop = DurationField()

    def clean(self):
        from django.core.exceptions import ValidationError
        if self.trial_start:
            if self.movement_start and self.movement_start < self.trial_start:
                raise ValidationError('movement start must be >= trial start')
            if self.trial_stop:
                if self.trial_stop <= self.trial_start:
                    raise ValidationError('trial stop must be > trial start')
                if self.movement_start:
                    if self.trial_stop < self.movement_start:
                        raise ValidationError('trial stop must be >= movement start') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-15T16:09:31.080

您可以在模型中添加以下代码：

```
def save(self, *args, **kwargs):
    self.full_clean()
    return super().save(*args, **kwargs) 
```

无论您在何处创建对象（表单、视图、外壳、测试），都将调用验证。

# apache2 - Apache2 中是否有特定位置

> ID：12278755
> 
> 赞同：0
> 
> 时间：2012-09-05T09:53:57.897
> 
> 标签：apache2, apache

我正在使用在**Ubuntu-12.04机器上运行的****Apache2**，我通过 apache2 运行我的文件，指向我在本地文件系统中的文件夹，例如

 **```
$ cd etc/apache2/ 
$ vi sites-enabled/000-default 
```

*我更改了指向我的文件夹的位置*

```
DocumentRoot /home/user/foo/
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /home/user/foo/> 
```

***Apache2 Web 根目录***的默认位置是什么，如果我只是复制我的文件，Apache 服务器会选择它。为了**每次通过 Apache2 运行数百个文件，我都会继续执行上述手动更改位置的步骤**。有没有其他最好的方法来做到这一点。

*如果有人可以帮助我，那就太好了。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:08:50.843

如果在 /etc/apache2/sites-enabled/ 中执行 ls -l，您会看到 000-default 是指向 /etc/apache2/sites-available/ 的符号链接。这个想法是您在启用站点的情况下创建站点定义文件，然后从站点可用的符号链接到它们……这使得根据需要启用和禁用站点变得非常简单。

事实上，Ubuntu 提供了 a2ensite 命令来启用站点，并提供 a2dissite 来禁用站点。这意味着您所要做的就是在可用的站点中创建 vhost 文件，然后运行 ​​a2ensite 以启用它。

查看[https://help.ubuntu.com/12.04/serverguide/httpd.html](https://help.ubuntu.com/12.04/serverguide/httpd.html)了解更多详情。**

# java - 将 Java 程序运行到另一个程序中

> ID：12278767
> 
> 赞同：0
> 
> 时间：2012-09-05T09:54:22.550
> 
> 标签：java, eclipse, process, runtime.exec

> **可能重复：**
> [在 java 程序中执行另一个 jar](https://stackoverflow.com/questions/1320476/execute-another-jar-in-a-java-program)

我尝试从另一个 java 应用程序中运行一个带有 java 应用程序的 jar 文件，但我无法让它工作。我的代码如下

```
// run Jar in other java application
Runtime run=Runtime.getRuntime();           
run.exec("java -jar ManichemManagerRotas BatchProcess 8 2012"); 
```

我尝试`manichemmanagerrotas.jar`使用三个参数运行。

我可以做的所有方法，但它不能工作仍然问题是无法运行 jar 文件的主要方法类，如果你对这个问题有任何想法，请给我重播，这对我来说很重要

我尝试运行 jar 文件然后错误是：无法访问 jarfile ManichemManagerRotas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:01:26.010

尝试添加缺少的**.jar**：

```
Runtime run=Runtime.getRuntime();            
run.exec("java -jar ManichemManagerRotas.jar BatchProcess 8 2012"); 
```

...并且您必须消耗流程输出...像这样：

```
InputStream in = run.getInputStream();
InputStream err = run.getErrorStream(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:03:29.080

这些`Runtime.exec(...)`方法返回一个`java.lang.Process`实例。只需调用它的`getInputStream()`方法。

```
Process p = run.exec("java -jar ManichemManagerRotas.jar BatchProcess 8 2012");
InputStream is = p.getInputStream(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:59:25.853

如果您想从另一个类调用 java 类/函数，请将其作为 jar 并将 jar 添加到您的项目构建路径中。在另一个类中，您创建 Jared 类的对象并调用该函数。（确保你的类和函数是公共访问的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T09:59:50.173

可能是你忘记输入 .jar

```
run.exec("java -jar ManichemManagerRotas.jar BatchProcess 8 2012"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:13:39.503

如果您只想将输出写入某个文件而不修改它，您可以添加：

```
> somefile.txt 
```

在“命令”的末尾：

```
run.exec("java -jar ManichemManagerRotas.jar BatchProcess 8 2012 > somefile.txt"); 
```

# xml - Axis2 SOAP 响应元素名称驼峰式问题

> ID：12278768
> 
> 赞同：0
> 
> 时间：2012-09-05T09:54:23.263
> 
> 标签：xml, soap, wsdl, axis2, axis

请参阅我的 WSDL 和 SOAP 响应的摘录。

```
WSDL Definition:
----------------
<xs:complexType name="ContactInformation">
    <xs:sequence>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="AddressInfo"
            nillable="true" type="AddressInfo" />
    </xs:sequence>
</xs:complexType>

SOAP Response:
--------------
<contactInformation>
    <addressInfo>
    </addressInfo>
</contactInformation> 
```

尽管在 WSDL 中元素名称是“AddressInfo”（A 是大写字母），但生成的响应的元素名称是“addressInfo”。这是造成问题，因为现有消费者正在使用区分大小写的 getElementsByTagName("AddressInfo")，我不应该更改消费者代码。

请让我知道我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:03:21.063

冒着说明[显而易见](http://www.youtube.com/watch?v=wdX8y_xkz14)的风险，将“addressInfo”更改为“AddressInfo”。如果您需要 XSLT 样式表，请告诉我们。

# magento - Magento - 小部件总是需要一个块吗？

> ID：12278769
> 
> 赞同：1
> 
> 时间：2012-09-05T09:54:25.717
> 
> 标签：magento, widget

我刚开始开发 Magento 小部件，因此我遇到了这个问题/问题：

可以告诉 Magento 小部件不要使用块类并直接渲染模板文件吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:52:50.887

需要阻止。如果您不想创建新块，只需将块类型指定为`cms/block`. 请记住，在您的 phtml 模板文件中，您将不会通过 using 调用您的自定义函数`$this`（作为`$this`对 Block 的引用）。

# javascript - 委托捕获两个表单提交

> ID：12278770
> 
> 赞同：0
> 
> 时间：2012-09-05T09:54:30.113
> 
> 标签：javascript, jquery, delegates, jquery-events

使用以下函数捕获两个动态生成的表单提交，但不会阻止它们的提交。

```
$('body').delegate('.edit_faq, .new_faq', 'submit', function(e){
      e.preventDefault();
      //voodoo
    }); 
```

我正在使用以下内容，使用`live`. 这可行，但 live 已贬值，最终结果是此代码最终成为一个灵活的插件。

```
$('.edit_faq').add('.new_faq').live('submit', function(e){
  e.preventDefault();
  //magic
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:17:49.393

你所写的实际上是有效的。

查看：

[http://jsfiddle.net/peuqU/](http://jsfiddle.net/peuqU/)

按下 run as jsfiddle 有时需要在测试提交之前刷新。

我只能用 chrome 23 对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:02:55.553

尝试哪种是推荐的方式，并返回 false **：**

```
$('body').on('submit', '.edit_faq, .new_faq', function(e){
      e.preventDefault();
     //Do your stuff here.

    }); 
```

至于为什么还是会出现提交，可能是页面某处出现了JS错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:18:25.330

固定的 -

问题是代码需要包装在 onReady 文档中：

```
$(document).ready(function(){
  $('body').on('submit', '.edit_faq, .new_faq', function(e){
      e.preventDefault();
      //voodoo
  });
}) 
```

我突然想到，既然 live 不需要准备好，那也许这仍然是错误的？

# c++ - 使用 directx9 加载表面太慢

> ID：12278772
> 
> 赞同：3
> 
> 时间：2012-09-05T09:54:32.487
> 
> 标签：c++, bitmap, directx, textures

我试图加载位图以便在屏幕上呈现它，这样做我使用 loadSurfaceFromFile。我要加载的图像是 1280*1024，加载这些图像大约需要 35 毫秒。在我看来，它应该加载得更快（大约 5 毫秒）我做错了什么？

编辑代码：

```
QueryPerformanceCounter(&liStart2);
int size = load_file_to_memory(s.c_str(),&content);
QueryPerformanceCounter(&liStop2);
QueryPerformanceCounter(&liStart);
D3DXLoadSurfaceFromFileInMemory(surface,NULL,NULL,content,size,NULL,D3DX_DEFAULT,0,NULL);
QueryPerformanceCounter(&liStop);
LONGLONG llTimeDiff = liStop.QuadPart - liStart.QuadPart;
double dftDuration = (double) llTimeDiff * 1000.0 / (double) Frequency.QuadPart;
LONGLONG llTimeDiff2 = liStop2.QuadPart - liStart2.QuadPart;
double dftDuration2 = (double) llTimeDiff2 * 1000.0 / (double) Frequency.QuadPart; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:52:23.217

您要做的是使用多个加载程序线程隐藏加载延迟。[这](http://qstechiecorner.blogspot.com/2005/11/streaming-png-32-bit-argb-files-from.html)是关于从磁盘加载纹理的性能的讨论。我本人已经使用了那里（Jon Watte）文章中概述的最后一种方法，效果很好。

希望这可以帮助！

# excel - 在 Excel 中组合 COUNTIF 和 MID 函数的语法

> ID：12278779
> 
> 赞同：4
> 
> 时间：2012-09-05T09:54:46.430
> 
> 标签：excel, syntax, syntax-error

任何人都可以就在 Excel 中同时使用 COUNTIF 和 MID 函数的正确语法向我提供建议。我目前的尝试如下：

```
=COUNTIF(MID(A1:A6,1,1),"1") 
```

我正在尝试以整数 1 作为第一个字符来计算列表中的字符串数。

提供的任何帮助将不胜感激。

提前谢谢你，

杰瑞德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:11:40.857

试试这个

```
=COUNTIF(A1:A6,"1*") 
```

或者如果您使用的是 excel 2007 或更高版本

```
=COUNTIFS(A1:A6,"1*") 
```

请注意，这将匹配*字符串*但不匹配*数字*

**更新：**

计算以整数开头的字符串 >1 尝试

```
=COUNTIFS(A1:A6,"2*")+COUNTIFS(A1:A6,"3*")+COUNTIFS(A1:A6,"4*")+COUNTIFS(A1:A6,"5*")+COUNTIFS(A1:A6,"6*")+COUNTIFS(A1:A6,"7*")+COUNTIFS(A1:A6,"8*")+COUNTIFS(A1:A6,"9*") 
```

我知道有点笨拙，但这是我现在能想到的

# html - 奇怪的页面加载

> ID：12278782
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:55:10.723
> 
> 标签：html, css, pageload

我遇到的问题是，在从一个部分到另一个部分之后（在页面完全加载之后）页面做了一个奇怪的加载，当你加载它时会“跳转”页面，它很快但是你可以注意到它，它很烦人，就像整个包装器跳到加载......它有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:58:56.940

您需要为带有徽标的顶部面板添加一些高度，如果这就是您的想法……那是我所看到的以及正在跳跃的东西:)

像这样：

```
header #header_logo {
   width: 122px;
   margin: 0 auto;
   padding-top: 25px;
   height: 108px;
   position: relative;
} 
```

但其他东西看起来不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:00:42.200

看起来标题的加载速度比页面的其余部分要慢一些。您可以通过在 css 中为标题提供固定高度来解决此问题

在你的 CSS 中更改以下内容：

`header {position: relative; }`

在

`header {position: relative; height: 200px; }`

我没有对此进行测试，也不知道 200px 是否是正确的高度。

# c# - 在 WPF 页面中附加 WndProc

> ID：12278784
> 
> 赞同：0
> 
> 时间：2012-09-05T09:55:14.013
> 
> 标签：c#, .net, wpf

我正在尝试在 WPF 中附加 WndProc `Page`，而不是`Window`。

我正在使用这个例子：

[http://blog.andreweichacker.com/2010/02/attaching-to-wndproc-in-wpf/](http://blog.andreweichacker.com/2010/02/attaching-to-wndproc-in-wpf/)

但它不适用于 WPF `Page`。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:01:03.933

那是因为 wndproc 是一个 Windows 概念，并且是每个窗口的。它对作为 WPF 内部构造的 WPF 页面一无所知。窗口是唯一带有 wndproc 的东西。

# php - issues when getting the value of a variable in php

> ID：12278785
> 
> 赞同：0
> 
> 时间：2012-09-05T09:55:15.433
> 
> 标签：php, variables, fpdf

I have this fpdf and I am trying to print a cell only if a variable is equal to 5, then another cell when it is equal to 6\. It is a form with questions where students must fill in the right answer.

this prints the rows with A B C D E (answers):

```
if ($row['tipo'] == "sc" OR $row['tipo'] == "sel")
        {
        $array_risposte = array( $row['risposta1'],$row['risposta2'],$row['risposta3'],$row['risposta4'],$row['risposta5'],$row['risposta6'],$row['risposta7'],$row['risposta8'],$row['risposta9'],$row['risposta10']);
        $array_filtrato = array_filter($array_risposte);
        $result2 = count($array_filtrato);

        $letterposition= array (' A',' A',' B',' C',' D',' E',' F',' G',' H',' I',' J');
        $position=1;
        while($position<=$result2)
          {
          $stampanumero = $letterposition[$position].$p->Image($image1, $p->GetX()+6, $p->GetY()+1);
          $p->Cell(14, 6, $stampanumero, 1, 0, 'L');
          //$domande .= $position." [ ] ";

          $position++;
          }
    } 
```

It works perfectly. And on top I want to name the coloumns A B C D, and if there is an answer E, to print the coloumn E. (The coloumns ABCD are always there, no issue with that). My code doesn't print coloumn E:

```
if($letterposition[$position]=="5")
{       
$p->Cell(14, 5, $LetterE, 1, 0, 'L','true'); //RISPONSI
} 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:09:12.710

$letterposition 是一个包含字母数组的数组。实际上 $letterposition[$position] 的值将是一个字母 'E' 而不是 '5'。

# actionscript-3 - 2D Unity (for graphics & ease of use): Flash? Haxe?

> ID：12278786
> 
> 赞同：-1
> 
> 时间：2012-09-05T09:55:17.037
> 
> 标签：actionscript-3, flash, 2d, haxe, vector-graphics

I'm planning on making a little game. And I'm looking for an engine. Basically what I want is Unity, but then 2D. It's a very interface heavy game, stylized, so what I need is an engine (or similar) in which it's easy to draw lines, primitives and text (and bitmaps, though that's less important.) The game will have a game world, though you'll never directly see it. All you'll get is a bunch of information about it (text, lines, graphs, ...)

I know you could use Unity to make 2D games, though for what I have in mind it's not optimal and the way objects work in Unity isn't really how I want to structure my game. (I've worked a lot in Unity and absolutely love it, though I don't think it's the right tool for this game.)

What I love about Unity is that you can just build for any platform, with a single click, and it just works. It also already has it's own way of building your gameobjects, and since I'm making something very different, I don't want this. I need more control over the objects and actually only want the engine to draw stuff.

I was thinking about using Flash, ActionScript3\. It should be very good at drawing lines and text. And hopefully just as easy to build.

I also checked out HTML5 and javascript, using KineticJS, which can draw lines and primites very easily (pretty much exactly like I want it), though I hate javascript and want more structured code. Maybe it's just me that I can't get javascript to be clean enough for my taste, but well, that's something we'll have to live with then :P

My question now is, since I never used flash. What are your thoughts on this. Is it perfect for this kind of stylized text-based games? Is it easy to build (I'm using FlashDevelop since that's a free way to make flash stuff)? On top of that, can I use a single code base for Windows and Mac (maybe even iOS, Android or other, though that's less important)?

Or maybe you have another suggestion I could check out? (I already checked out a bunch of other question here, though none were really helpful. So yea it's another 'I'm looking for an engine' question, so don't kill me for that. I already did quite a bit of looking around, though would love some more input from others.)

Edit1: I've been looking around some more and found Haxe ([http://haxe.org/](http://haxe.org/)) seems promising, can anyone recommend this or?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:18:26.390

我认为 Flash/AC3 非常适合，特别是如果您使用 FlashDevelop。评论 Daniel MesSer：

> 这意味着程序员“永远”不必担心定位对象和游戏的视觉外观。程序员只需要提供当事情发生时应该发生的事情的功能（单击按钮，动画完成等）。

这不是真的。如果您在一家只使用 Flash CS 的公司工作，可能就是这种情况。但是使用 FlashDevelop，您就拥有了一个功能齐全的 IDE。如果您查找一些第三方库，例如 Flixel、Citrus Engine 或 FlashPunk，您会发现可以完全满足您的需求的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:35:31.257

> 我还检查了 HTML5 和 javascript，使用 KineticJS，它可以很容易地绘制线条和 primites（非常像我想要的那样），尽管我讨厌 javascript 并且想要更结构化的代码。

编写面向对象的 javascript :-) 我是一个 oop-maniac，但我也开始发现 js 的美妙之处。即使在那里也可以编写漂亮的代码！;-)

关于 flash 和 AS3，这将是可能的，并且可能非常“容易”使用。我开始使用 AS2 进行编程（在那之前还有一些其他的东西）。但我个人认为闪存不是正确的方法。Flash 很久以前就达到了它的到期日期。

有几个用 HTML5 和 KineticJS 编码的游戏。您可以在 www.kineticjs.com 上找到一些示例。借助 HTML5 和 kinetic，您还可以使其同时适用于多个平台。

希望这可以帮助 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:54:42.090

我认为对于您想要做的事情，flash 不会是最佳工具。Flash 的美妙之处以及它的设计目的是将图形艺术家所做的事情和程序员所做的事情分开和结合起来。

您会看到，您使用 Flash 作为对齐、定位和导入/绘制图形以及执行复杂动画的工具。然后将它们导出为资产并使用 ActionScript 中的图形资源。这意味着程序员“永远”不必担心定位对象和游戏的视觉外观。程序员只需要提供当事情发生时应该发生的事情的功能（单击按钮，动画完成等）。

听起来你的游戏更像是“技术”家族，你将独自工作，你想自己绘制图元，屏幕上会有很多文字。

Flash 从未打算成为处理大量文本并以技术方式处理事情的工具，它的创建是为了以结构化方式轻松处理大量图形资源，程序员不必担心太多关于图形内容。

如果我对您想要做的事情的假设是正确的，那么您最好使用 JS。它会更适合您，因为您使用的复杂图形资产很少，对跨平台支持感兴趣并且基本上想要处理大量文本。

# python - 具有空值列的 MySQL 查询

> ID：12278787
> 
> 赞同：0
> 
> 时间：2012-09-05T09:55:20.897
> 
> 标签：python, mysql, null, tornado

我有这个查询：

```
 user = self.db.query("SELECT DISTINCT u.id, u.name, n.network_id, n.perm \ 
FROM users as u LEFT OUTER JOIN nets_permissions as n \ 
ON u.id = n.user_id WHERE u.id!=%s", int(usr_id)) 
```

列“perm”（权限）是一个 int 值，可以是 1、2、3、ecc 之类的值。或空值。我想要这样的查询：

```
 user = self.db.query("SELECT DISTINCT u.id, u.name, n.network_id, n.perm \
FROM users as u LEFT OUTER JOIN nets_permissions as n \
ON u.id = n.user_id WHERE u.id!=%s" AND n.perm!=3, int(usr_id)) 
```

所以，我想从查询中删除 perm=3 的记录。

我认为我可以通过这种方式检索具有 perm=3 的用户的 id：

```
self.lock_tables("read", ['nets_permissions'])
        admin = self.db.query("SELECT user_id FROM nets_permissions \
                               WHERE network_id=%s AND perm=3", nid)
        self.unlock_tables() 
```

然后我可以写

```
 self.lock_tables("read", ['users as u', 'nets_permissions as n'])
   user = self.db.query("SELECT DISTINCT u.id, u.name, n.network_id, n.perm \
FROM users as u LEFT OUTER JOIN nets_permissions as n \
ON u.id = n.user_id WHERE u.id!=%s AND u.id!=%s", int(usr_id), int(admin))
            self.unlock_tables() 
```

但这不起作用....

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:56:53.327

试试这个

```
SELECT DISTINCT u.id, u.name, n.network_id, n.perm 
FROM users as u 
LEFT OUTER JOIN nets_permissions as n 
ON u.id = n.user_id 
AND n.perm<> 3 
WHERE u.id!=%s 
```

# html - pixel font in HTML/CSS

> ID：12278790
> 
> 赞同：9
> 
> 时间：2012-09-05T09:55:24.587
> 
> 标签：html, fonts, pixel

I try pixel fonts from [http://www.fontsquirrel.com/fonts/list/style/Pixel](http://www.fontsquirrel.com/fonts/list/style/Pixel) but It's not perfect in the browser and disable anti-aliasing is not an official CSS property (or don't find good sample).

I found this old question : [Is it possible to disable anti-aliasing in CSS when using @font-face with pixel fonts?](https://stackoverflow.com/questions/1752752/is-it-possible-to-disable-anti-aliasing-in-css-when-using-font-face-with-pixel)

And this JS [http://devpro.it/pixelfont/](http://devpro.it/pixelfont/) look very nice but default font is to small (make my own font is not a good deal). So I would like to know if there is something new or others tips (without swf).

Here is a test with font-face (on webkit, firefox don't ?) : [http://b4d455.fr/font/](http://b4d455.fr/font/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T13:17:52.623

这可能会在某种程度上做你想做的事：

```
font-smooth: never;
-webkit-font-smoothing : none; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-30T17:30:21.277

我知道我迟到了，但是 Small Font 让你很乐意使用它。

### 这是一些不需要链接的工作 CSS：

```
body {font-family: "ＭＳ Ｐゴシック";}
```

```
<!--- Here's some HTML for the example --->
<h4>Small Font</h4>
<p>Small Font is a pixel font used by Windows when a font is too small to be displayed</p>
<h5>Recommended CSS:</h5>
<code>font-size: 75%;</code>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:23:34.767

我不确定你在问什么。但是，如果您要禁用抗锯齿，则可以使用`-webkit-font-smoothing: none;`.

# android - Margins not working

> ID：12278792
> 
> 赞同：6
> 
> 时间：2012-09-05T09:55:30.453
> 
> 标签：android, android-layout

I made the following layout programmatically:

```
LinearLayout progressLayout = new LinearLayout(this);
    progressLayout.setOrientation(LinearLayout.VERTICAL);

    TextView t = new TextView(this);
    t.setText("Test..");
    t.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 20);

    LayoutParams l = new LayoutParams(android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
    l.setMargins(10, 10, 10, 25);   ===> does not work? 
    t.setLayoutParams(l);

    ProgressBar circle = new ProgressBar(this, null,
            android.R.attr.progressBarStyleLarge);
    circle.setLayoutParams(new LayoutParams(android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT));

    progressLayout.setLayoutParams(new LayoutParams(
            android.view.ViewGroup.LayoutParams.FILL_PARENT,
            android.view.ViewGroup.LayoutParams.FILL_PARENT));

    progressLayout.setGravity(Gravity.CENTER);

    progressLayout.addView(t);
    progressLayout.addView(circle);

    this.setContentView(progressLayout); 
```

But no mather what I give as values in setMargins, it doesn't have any effect at all.
What is the reason?

The layout has a heigth and width of fill_parent so that can't be the problem..

Thx :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:04:53.550

```
progressLayout.setGravity(Gravity.CENTER); 
```

将文本视图和进度条居中对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:20:10.733

**试试这个解决方案**

```
LinearLayout progressLayout = new LinearLayout(this);
        progressLayout.setOrientation(LinearLayout.VERTICAL);

        TextView t = new TextView(this);
        t.setText("Test..");
        t.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 20);

        LayoutParams l = new LayoutParams(
                android.view.ViewGroup.LayoutParams.WRAP_CONTENT,
                android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
        // ===> does not work?
        // l.setMargins(50, 50, 50, 25);
        // t.setLayoutParams(l);
        l.leftMargin = 10;
        l.topMargin = 0;
        l.rightMargin = 0;
        l.bottomMargin = 150;

        ProgressBar circle = new ProgressBar(this, null,
                android.R.attr.progressBarStyleLarge);
        LayoutParams p = new LayoutParams(
                android.view.ViewGroup.LayoutParams.WRAP_CONTENT,
                android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
        // circle.setLayoutParams(p);
        p.leftMargin = 0;
        p.topMargin = 0;
        p.rightMargin = 0;
        p.bottomMargin = 20;

        progressLayout.setLayoutParams(new LayoutParams(
                android.view.ViewGroup.LayoutParams.FILL_PARENT,
                android.view.ViewGroup.LayoutParams.FILL_PARENT));

        progressLayout.setGravity(Gravity.CENTER);

        progressLayout.addView(t, l);
        progressLayout.addView(circle, p);

        this.setContentView(progressLayout); 
```

# c - blank removal in xml using libxml2

> ID：12278794
> 
> 赞同：0
> 
> 时间：2012-09-05T09:55:35.800
> 
> 标签：c, xml-parsing, libxml2

I have the xml file as:

```
<Config>
    <tlvid id="2">
              <type>10</type>
              <Devid>001b00100000</Devid>
    </tlvid>

    <tlvid id="3">
             <sessionid>abcd123</sessionid>
    </tlvid> 
```

The code which parses the xml file is:

```
xmlNode *cur_node = NULL,*sub_node = NULL;
xmlChar *key;

cur_node = a_node->xmlChildrenNode;
while(cur_node !=NULL) {

        if((!xmlStrcmp(cur_node->name,(const xmlChar*)"tlvid"))) {
            key = xmlGetProp(cur_node,(const xmlChar*)"id");
            printf("key: %s\n ",key);
            xmlFree(key);
            sub_node = cur_node->xmlChildrenNode;

            while(sub_node !=NULL) {

            key = xmlNodeGetContent(sub_node);
            printf("subkey: %s\n ",key);
            xmlFree(key);

            sub_node = sub_node->next;
            }
        }
     cur_node = cur_node->next;
} 
```

The output as:

key: 2

subkey:

subkey: 10

subkey:

subkey: 001b00100000

subkey:

key: 3

subkey:

subkey: abcd123

subkey:

I have tried xmlKeepBlanksDefault(0); adding under while loop to avoid blanks,but did not help. Can you please help me in removing these empty blanks. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:44:41.930

`cur_node`通过检查避免处理文本子项[`xmlNodeIsText`](http://www.xmlsoft.org/html/libxml-tree.html#xmlNodeIsText)：

```
for(sub_node = cur_node->xmlChildrenNode;
    sub_node != NULL;
    sub_node = sub_node->next)
{
    if(xmlNodeIsText(sub_node)) continue;
    …
} 
```

作为跳过所有文本节点的替代方法，您可以使用以下方法确保仅跳过空白节点[`xmlIsBlankNode`](http://www.xmlsoft.org/html/libxml-tree.html#xmlIsBlankNode)：

```
for(sub_node = cur_node->xmlChildrenNode;
    sub_node != NULL;
    sub_node = sub_node->next)
{
    if(xmlIsBlankNode(sub_node)) continue;
    …
} 
```

`<tlvid>`如果元素中直接存在非空白文本，则这两个结果会有所不同。

阅读[手册`xmlKeepBlanksDefault`](http://xmlsoft.org/html/libxml-parser.html#xmlKeepBlanksDefault)以找出使解析器忽略这些空白节点所需的条件。显然，您需要一个验证解析器和一个合适的 DTD 才能产生任何效果。

# ios - How do I programmatically end/reset a UIGestureRecognizer?

> ID：12278798
> 
> 赞同：13
> 
> 时间：2012-09-05T09:55:50.947
> 
> 标签：ios, uigesturerecognizer, gesture

Say I am currently tracking a drag gesture. In my event handler I use a threshold to determine when the drag results in an action. When the threshold is crossed, I want to indicate that the drag gesture has completed.

The only thing I can find in the docs is this line [here](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html):

> If you change this property to NO while a gesture recognizer is currently recognizing a gesture, the gesture recognizer transitions to a cancelled state.

So:

```
if (translation.y > 100) {
    // do action
    [self doAction];

    //end recognizer
    sender.enabled = NO;
    sender.enabled = YES;
} 
```

This works but it looks like there might be a neater way.

Does anyone know of another way to indicate that a gesture has ended programmatically? I would expect something like a method `-end:` that generates a final event with state `UIGestureRecognizerStateEnded`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T20:16:29.503

您是否定义了自定义 UIGestureRecognizer？如果您要识别的手势与 Apple 定义的标准手势不同，因为它具有不同的阈值，或者与常规 UIPanGestureRecognizer 不同，那么创建自己的 UIGestureRecognizer 可能是有意义的。（[见子类注释](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)）

如果你有 UIGestureRecognizer 的子类，你可以像这样简单地设置状态：

```
 self.state = UIGestureRecognizerStateEnded; 
```

您可能希望在 touchesMoved:withEvent: 方法中执行此操作。另请注意：

“UIGestureRecognizer 的子类必须导入 UIGestureRecognizerSubclass.h。此头文件包含状态的重新声明，使其可读写。”

另一方面，如果只实现一个 UIGestureRecognizerDelegate，则状态为只读，无法直接设置。在这种情况下，您的禁用/启用方法可能是您能做的最好的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T06:56:55.690

使用您显示的代码，您需要具有在取消手势识别器时启动动画的逻辑，我会说这不好，因为还有其他方法可以取消此手势识别器而您不想完成动画.

考虑到您有一个启动动画的方法，您只需要在超过阈值并且手势正常结束时调用此方法。那么两个不同的场合。您提供的代码如下所示：

```
if (translation.y > 100) {
    // do action
    [self finishFlip];
    sender.enabled = NO;
    sender.enabled = YES;
} 
```

如果用户一直拖动手指，如果这样做会阻止任何后续操作，那么在此处取消手势也可能很有用。

如果您将有一个团队为此进行开发并且您需要发生特定事件，您应该将手势识别器子类化为非建议的子类。

# algorithm - How to choose the space of optimal substructures for dynamic programming algorithms?

> ID：12278802
> 
> 赞同：1
> 
> 时间：2012-09-05T09:55:57.817
> 
> 标签：algorithm, recursion, dynamic-programming

I am reading up dynamic programming chapter of [Introduction to Algorithms](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/video-lectures/) by Cormen et al. I am trying to understand how to characterize the space of subproblems . They gave two examples of dynamic programming . Both these two problems have an input of size n

1.  Rod cutting problem (Cut the rod of size n optimally)
2.  Matrix parenthesization problem .(Parenthesize the matrix product A[1] . A[2] .A[3] ...A[n] optimally to get the least number of scalar multiplications)

For the first problem , they choose a subproblem of the form where they make a cut of length k , **assuming that the left subproblem resulting from the cut can not be cut any further** and **the right subproblem can be cut further** thereby giving us a single subproblem of size (n-k) .

But for the second problem that choose subproblems of the type A[i]...A[j] where 1<=i<=j<=n . Why did they choose to keep both ends open for this problem ? Why not close one end and just consider on subproblems of size (n-k)? Why need both i and j here instead of a single k split?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:01:18.797

这是一门艺术。动态规划问题的类型很多，要定义一种方法来计算出我们想要解决子问题的空间维度并不容易。

这取决于子问题如何相互作用，并且很大程度上取决于空间的每个维度的大小。

动态编程是描述子问题的缓存或记忆以更有效地解决更大问题的通用术语。但是有很多不同的问题可以通过动态规划以多种不同的方式解决，我无法解释全部，除非你有一个特定的动态规划问题需要解决。

我所能建议的就是在解决问题时尝试：

*   如果你知道如何解决一个问题，你可以使用类似的技术来解决类似的问题。
*   尝试不同的方法，并根据每个维度的输入大小估计复杂性的顺序（时间和内存），然后给定每个维度的大小，看看它是否执行得足够快，并且在内存限制内。

一些可以被描述为动态规划的算法包括：

*   最短路径算法 ( [Dijkstra](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm) , [Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm) , ...)
*   字符串算法（[最长公共子序列](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)，[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)，...）
*   还有[更多](http://en.wikipedia.org/wiki/Dynamic_programming#Algorithms_that_use_dynamic_programming)...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:45:03.243

Vazirani 关于动态编程的技术说明 [http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf](http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf) 有一些有用的方法可以在给定输入的情况下创建子问题。我在下面的列表中添加了一些其他方法：

1.  输入 x_1、x_2、..x_n。子问题是 x_1...x_i。

2.  输入 x_1, x_2....x_n。子问题是 x_i, ...x_j。

3.  输入 x_1, x_2...x_n 和 y_1, y_2..y_m。子问题是 x_1, x_2, ..x_i 和 y_1, y_2, ..y_j。

4.  输入是有根树。子问题是有根子树。

5.  输入是一个矩阵。子问题是与原始矩阵共享一个角的不同长度的子矩阵。

6.  输入是一个矩阵。子问题是所有可能的子矩阵。

通常使用哪些子问题取决于问题。尝试这些已知的变化，看看哪一个最适合您的需求。

# java - pl/sql procedure returns 3 question marks ('???') for varchar2 columns (wls 10.3.4 - weblogic 11g)

> ID：12278804
> 
> 赞同：3
> 
> 时间：2012-09-05T09:55:58.837
> 
> 标签：java, plsql, weblogic11g, varchar2

I got the following code that works fine on OAS10, for fetching array of custom object from sql procedure:

```
Connection conn = null;
OracleCallableStatement stmt = null;
RequestsWrapper requestsWrapper = null;
conn = getConnection(DATASOURCE);
if (conn != null) {
    stmt = (OracleCallableStatement) conn.prepareCall("{call packageName.procedureName(?, ?, ?)}");
    stmt.registerOutParameter(3, OracleTypes.ARRAY, "V_ARRAY_OF_CUSTOM_OBJECTS");
    stmt.setString(1, in1);
    stmt.setString(2, in2);
    stmt.execute();
    ARRAY zahtjev = (ARRAY) cs.getArray(3);
    RequestsWrapper requestsWrapper = new RequestsWrapper();
    for (Object object : (Object[]) zahtjev.getArray()) {
        if (object != null) {
              CustomObject co = new CustomObject();
              Object[] attributes = ((STRUCT) object).getAttributes();
              co.setVarcharAttribute((String) attributes[0]);
              co.setNumericAttribute(((BigDecimal) attributes[1]).intValue());
              requestsWrapper.getObjectList().add(co);
       }
    }
} 
```

and I have to migrate application to WLS 10.3.4. When I tried to execute existing code, I got an exception: cannot cast to oracle.sql.ARRAY. I found in WLS documentation:

> For most extensions in the Oracle Thin driver, you can use the standard technique as described in Using API Extensions to JDBC Interfaces. However, the Oracle Thin driver does not provide public interfaces for its extension methods in the following classes:
> 
> oracle.sql.ARRAY
> oracle.sql.STRUCT
> oracle.sql.REF
> oracle.sql.BLOB oracle.sql.CLOB
> 
> WebLogic Server provides its own interfaces to access the extension methods for those classes:
> 
> weblogic.jdbc.vendor.oracle.OracleArray weblogic.jdbc.vendor.oracle.OracleStruct weblogic.jdbc.vendor.oracle.OracleRef weblogic.jdbc.vendor.oracle.OracleThinBlob weblogic.jdbc.vendor.oracle.OracleThinClob

So, I followed the instructions and I got following code

```
Connection conn = null;
OracleCallableStatement stmt = null;
RequestsWrapper requestsWrapper = null;
conn = getConnection(DATASOURCE);
if (conn != null) {
    ArrayDescriptor arrayDescriptor = ArrayDescriptor.createDescriptor("V_ARRAY_OF_CUSTOM_OBJECTS", conn);
    StructDescriptor structDescriptor = StructDescriptor.createDescriptor("T_CUSTOM_OBJECT", conn);
    stmt = (OracleCallableStatement) conn.prepareCall("{call packageName.procedureName(?, ?, ?)}");
    stmt.registerOutParameter(3, OracleTypes.ARRAY, "V_ARRAY_OF_CUSTOM_OBJECTS");
    stmt.setString(1, in1);
    stmt.setString(2, in2);
    stmt.execute();
    Array request = stmt.getArray(3);
    OracleArray requestOracleArray =  ((weblogic.jdbc.vendor.oracle.OracleArray)request).getOracleArray(); 
    Datum[] datumArray = ((weblogic.jdbc.vendor.oracle.OracleArray)request).getOracleArray();
    RequestsWrapper requestsWrapper = new RequestsWrapper();
    for (Datum object : datumArray) {
        if (object != null) {
           CustomObject co = new CustomObject();
           Object[] attributes = ((Struct) object).getAttributes();
           co.setVarcharAttribute((String) attributes[0]);
           co.setNumericAttribute(((BigDecimal) attributes[1]).intValue());
           requestsWrapper.getObjectList().add(co);
       }
    }
} 
```

and numeric attribute is mapped OK, but instead of varchar2 attribute, I have '???'. Does anyone have similar problem?

Thanks in advance.

*edit: i found on few pages info that orai18n.jar should be added to server classpath. but it doesn't work for me.*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T14:42:45.213

最后， orai18n.jar 是解决方案。我必须将它包含在 weblogic 的 CLASSPATH 中，所以在 setDomainEnv.cmd 的 %MY_DOMAIN%\bin 文件夹中刚刚添加

设置 CLASSPATH=%WL_HOME%\server\ext\jdbc\oracle\11g\orai18n.jar

现在它可以工作了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:20:30.737

有时这意味着您的 varchar2 字段中有 unicode 内容。请考虑一下。

# php - Facebook like button (error written in red)

> ID：12278805
> 
> 赞同：1
> 
> 时间：2012-09-05T09:56:03.060
> 
> 标签：php, facebook, api, facebook-like

I created an application and I wanted to add a like button.

When I click the button, it changes to show that I like the page, then immediately changes back with a red "Error" next to it.

This is the code that I'm using:

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1&appId=453976824647366";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

       <div class="fb-like" data-href="http://apps.facebook.com/453976824647366/" data-send="true" data-width="450" data-show-faces="true"></div> 
```

This is a page index.php.

This is also my application settings, it might be of some help for you to understand my problem.

![My aplication settings](../Images/2119d10f23a1dc26d0bb7f7a123db32c.png)

After the user "likes" the application, I want to redirect him on a second page (located in the root of my project).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:09:29.570

喜欢框旨在喜欢具有有效 URL 的某些现有内容。

在您的情况下，您可以测试一些功能，但不能测试 box。

为了获得最佳方法，我建议您将网站移至在线可以继续从那里进行测试。

阅读'[当我点击外部网站上的“赞”或“推荐”按钮时会发生什么？](http://www.facebook.com/help/?faq=130849170326225)'

# ios - iOS, iPad - NavigationBar appears on rotating device

> ID：12278809
> 
> 赞同：0
> 
> 时间：2012-09-05T09:56:19.113
> 
> 标签：ios, ipad, uinavigationbar

I have an issue with the navigation bar. I have screen with NavBar and opened half transparent view on full screen (it covers NavBar). Then, if I change device orientation by 180 degree (my app only, for landscape), then NavBar appears on top while animation. NavBar goes back under transparent view after animation completes. Does somebody face the same issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:12:52.033

您如何呈现透明视图？如果您以模态方式呈现它或使用 UIPopover，则这两者都将在旋转期间从窗口中删除，然后再添加回来。

您是否尝试过将视图添加为窗口的子视图，在导航栏上方，像这样？

```
 [self.view.window insertSubview:your_view aboveSubview:self.navigationController.view]; 
```

# html - JqueryMobile Save text field data using save button

> ID：12278811
> 
> 赞同：0
> 
> 时间：2012-09-05T09:56:31.103
> 
> 标签：html, jquery-mobile, project

Ive been trying to figure out how to get some data i type into a text field to save on the screen underneath it. Something like a twitter, or Facebook news nothing fancy. I'm using JQM and would like this to get save on the same page as the text field and button under the

```
<div data-role="content"> 
```

This is what i have for a field and button.

```
<input type="text" id="Text"/>
<input type="button" id="Button" value="Submit" />
<div id="buttonPlaceHolder">&nbsp;</div> 
```

and this is some javaScipt i found to go along with the button, it works however the dollar signs screw up JQM and ive tried putting it in its own js file. I think i might be doing something wrong.

```
$('#Button').bind('click', function() {
$('#buttonPlaceHolder').append($('#Text').val());

// refresh jQM controls
$('#home').trigger('create');
}); 
```

If at all possible id like the javascript in with the html via script

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:11:52.280

我不确定我是否理解了这个问题。尽管如此，试试这个，它可能会有所帮助：

```
<!DOCTYPE html>
<html>
<body>

<h1>My Web Page</h1>

<p id="demo">A Paragraph.</p>

<p id="myDIV">A DIV.</p>

<button type="button" onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
document.getElementById("demo").innerHTML="Hello Dolly";
document.getElementById("myDIV").innerHTML="How are you?";
}
</script>

</body>
</html> 
```

这是一个html页面示例。你可以在这里找到更多信息和有用的例子：http: [//www.w3schools.com/js/js_examples.asp](http://www.w3schools.com/js/js_examples.asp)

如果您想保存以备后用，请尝试使用 localStorage 机制。

# php - Remove cookies on client side with PHP

> ID：12278815
> 
> 赞同：1
> 
> 时间：2012-09-05T09:56:46.510
> 
> 标签：php, session, cookies, browser

I've made a login portal from my site to automatically login in other site. It works perfect. However, when I logged out I cannot login back from my site anymore because the site does not remove the last session. So I only can login when I started a new session, and can't login again with the same session for the next session after logged out.

I've asked the other site, and they suggest me to remove the cookie which is stored on the client side. How is it possible to remove cookies on client side from other sites with PHP??

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:04:30.030

setcookie ("TestCookie", "", time() - 3600);// 将时间设置为负数以删除 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:09:51.247

删除 cookie 设置它的过期时间，

`setcookie ("TestCookie", "", time() - 3600);`

更多见 PHP manual [cookie's manual](http://us.php.net/setcookie) 。

# asp.net-mvc-3 - 使用带有 MVC 过滤器属性属性注入的 autofac 中的命名注册

> ID：12278818
> 
> 赞同：1
> 
> 时间：2012-09-05T09:56:52.450
> 
> 标签：asp.net-mvc-3, autofac, action-filter

根据[https://code.google.com/p/autofac/wiki/Mvc3Integration#Filter_Attribute_Property_Injection](https://code.google.com/p/autofac/wiki/Mvc3Integration#Filter_Attribute_Property_Injection)，我正在使用Autofac填写我的过滤器的公共属性，效果很好。

直到我尝试对其中一个依赖项使用命名注册。我找不到办法做到这一点。我试图像这样手动注册我的过滤器：

```
builder.RegisterType<MyCustomAttribute>()
       .WithProperty(ResolvedParameter.ForNamed<INamedDependency>("dependencyName")); 
```

在调用 RegisterFilterProvider 方法之前，但这不起作用。

有任何想法吗？如果这已在较新的版本中得到修复，我使用的是 2.5.2.830 版本。

谢谢， 科斯塔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T00:52:21.953

可能是您忘记在容器中注册 INamedDependency 实例：

```
public class MyCustomAttribute : FilterAttribute
{
    public IDependencyName DependencyName { get; set; }
}

public interface IDependencyName
{

}

public class DependencyName : IDependencyName
{

}

[Test]
public void ResolveCustomTest()
{
    // Arrange 
    var dependencyInstance = new DependencyName();
    var builder = new ContainerBuilder();
    builder.RegisterInstance(dependencyInstance).Named<IDependencyName>("dependencyName");
    builder.RegisterType<MyCustomAttribute>().WithProperty(ResolvedParameter.ForNamed<IDependencyName>("dependencyName"));
    builder.RegisterFilterProvider();
    var root = builder.Build();

    // Act
    var attr = root.BeginLifetimeScope("AutofacWebRequest").Resolve<MyCustomAttribute>();

    // Assert
    Assert.AreEqual(attr.DependencyName, dependencyInstance);
} 
```

# java - 具有摘要式身份验证的 Glassfish JDBC 领域

> ID：12278822
> 
> 赞同：2
> 
> 时间：2012-09-05T09:57:16.163
> 
> 标签：java, authentication, jdbc, digest, jdbcrealm

我正在开发一个 Java REST 项目，我目前正在使用带有基本身份验证的 JDBC 领域。我正在存储密码的 SHA-256 哈希，基本身份验证工作正常。为了切换到 Digest 身份验证，我将领域的 JAAS 上下文从 jdbcRealm 更改为 jdbcDigestRealm，并在 web.xml 中将 auth-method 设置为 DIGEST。

由于某种原因，如果我提供哈希本身，这会导致身份验证成功。当设置为摘要身份验证时，Glassfish 似乎不会自动散列提供的密码字符串，然后检查它，就像基本身份验证一样。

这是我的领域配置：

*   JAAS 上下文：jdbcDigestRealm
*   JNDI：jdbc/restshop
*   用户表：用户
*   用户名栏：用户名
*   密码栏：密码
*   组表：user_role
*   组名列：role_name
*   摘要算法：SHA-256
*   编码：十六进制

领域配置中还有密码加密算法字段，我不确定它的目的是什么。

任何帮助表示赞赏，如果您需要任何其他信息，我会提供。谢谢。

# django - 如何传入字段名以在 django 中进行过滤？

> ID：12278824
> 
> 赞同：0
> 
> 时间：2012-09-05T09:57:19.033
> 
> 标签：django

如果您知道要过滤的字段名，那么在 Django 中进行过滤非常简单：

```
Entry.objects.filter(headline__startswith="What") 
```

但是，如果我想传入“标题”字段名，它会变得更加困难：

```
kwargs = {request.GET['fieldname'] : request.GET['query']}
Entry.objects.filter(**kwargs) 
```

上述解决方案的问题是，我如何在`__startswith`其中传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:59:26.383

```
kwargs = {"%s__startswith" % (request.GET['fieldname']) : request.GET['query']}
Entry.objects.filter(**kwargs) 
```

# css - 如何使表格的单个单元格中的文本垂直滚动

> ID：12278826
> 
> 赞同：0
> 
> 时间：2012-09-05T09:57:22.033
> 
> 标签：css, html, scroll

我试过：

```
overflow:scroll; 
```

在`div`其中没有工作。

是否有任何其他工作可以实现这种滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:00:45.010

您必须提供 div 的高度和宽度才能使其正常工作，请参见此处：

[http://jsbin.com/ukesif/1/](http://jsbin.com/ukesif/1/)

# php - 是否可以在不循环的情况下检查一个值是否存在于一个充满对象的数组中？

> ID：12278830
> 
> 赞同：5
> 
> 时间：2012-09-05T09:57:28.310
> 
> 标签：php, arrays, oop

我有一个包含多个对象的数组。**是否可以在没有循环**的情况下检查任何一个对象中是否存在值，例如 id->27 ？与 PHP 的 in_array() 函数类似。谢谢。

```
> array(10)[0]=>Object #673 
                     ["id"]=>25 
                     ["name"]=>spiderman   
           [1]=>Object #674
                     ["id"]=>26
                     ["name"]=>superman   
           [2]=>Object #675
                     ["id"]=>27
                     ["name"]=>superman 
           ....... 
           .......
           ......... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T10:02:41.997

不。如果您经常需要快速直接查找值，则需要为它们使用数组键，查找速度快如闪电。例如：

```
// prepare once
$indexed = array();
foreach ($array as $object) {
    $indexed[$object->id] = $object;
}

// lookup often
if (isset($indexed[42])) {
    // object with id 42 exists...
} 
```

如果您需要通过不同的键来查找对象，因此您不能真正通过一个特定的键来索引它们，您需要研究不同的搜索策略，例如[二分搜索](http://en.wikipedia.org/wiki/Binary_search)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T10:05:39.937

```
$results = array_filter($array, function($item){
   return ($item->id === 27);
});
if ($results)
{
   ..  You have matches
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:04:10.603

您将需要以一种或另一种方式循环 - 但您不必自己手动实现循环。看看[`array_filter`功能](http://php.net/manual/en/function.array-filter.php)。您需要做的就是提供一个检查对象的函数，如下所示：

```
function checkID($var)
{
    return $var->id == 27;
}

if(count(array_filter($input_array, "checkID")) {
    // you have at least one matching element
} 
```

或者你甚至可以在一行中做到这一点：

```
if(count(array_filter($input_array, function($var) { return $var->id == 27; })) {
    // you have at least one matching element
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-29T17:44:37.923

您可能希望结合使用两个函数来获得所需的结果。

> array_search($needle, array_column($array, 'key_field');

创建了一个小代码来演示它的使用。

```
<?php
$superheroes    =    [
    [
        "id"    =>    1,
        "name"  =>    "spiderman"
    ],
    [
        "id"    =>    2,
        "name"  =>    "superman"
    ],
    [
        "id"    =>    3,
        "name"  =>    "batman"
    ],
    [
        "id"    =>    4,
        "name"  =>    "robin"
    ],
];
$needle    =    'spiderman';
$index     =    array_search($needle, array_column($superheroes, "name"));
echo "Is $needle a superhero?<br/>";

//Comparing it like this is important because if the element is found at index 0, 
//array_search will return 0 which means false. Hence compare it with !== operator
if ( false !== $index ) {
    echo "yes";
} else {
    echo "no";
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:02:17.750

> [array_search](http://php.net/manual/en/function.array-search.php) — 在数组中搜索给定的值，如果成功则返回相应的键

```
$key = array_search('your search', $array); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T10:00:54.473

你可以做：

```
foreach ($array as $value)
{
   if ($value == "what you are looking for")
       break;
} 
```

# ios - 来自 http 服务器的 iOS 电影流在模拟器上运行良好，但在设备上运行良好

> ID：12278833
> 
> 赞同：1
> 
> 时间：2012-09-05T09:57:31.390
> 
> 标签：ios, http, mpmovieplayercontroller

我尝试使用以下代码将 mp4 文件从 http 服务器流式传输到我的 iPhone：

```
 - (IBAction)streamMovie:(id)sender 
{

    NSURL *url = [NSURL URLWithString:trailerPath];

    if ([self.movieController respondsToSelector:@selector(setAllowsAirPlay:)]) 
        [self.movieController.moviePlayer setAllowsAirPlay:YES];

    [self.movieController.moviePlayer setContentURL:url];
    [self presentMoviePlayerViewControllerAnimated:self.movieController];
    [self.movieController.moviePlayer play];
} 
```

这在模拟器上运行良好，但在我的 iPhone 设备（3GS 和 iOS 5.1）上根本不起作用。电影播放器​​只弹出然后立即消失。如果我再试一次，则会出现此日志条目：

```
An instance 0x1c5a20 of class AVPlayerItem was deallocated while key value observers
were still registered with it. Observation info was leaked, and may even become
mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to 
stop here in the debugger. Here's the current observation info: 
```

我做错了什么，为什么这在模拟器上有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:53:34.783

我终于发现设备没有问题，但是http服务器有问题。它发送了错误的 MIME 类型（文本/html 而不是视频/mp4），因此设备无法正确解释它。所以我只需将 MIME 类型添加到服务器，现在它就像一个魅力

# iis-7 - 如何使用 appcmd 或其他实用程序在 Windows 2008 上使用站点名称查找 IIS7 SiteID？

> ID：12278836
> 
> 赞同：23
> 
> 时间：2012-09-05T09:57:35.370
> 
> 标签：iis-7, appcmd

我正在尝试使用站点名称 using`appcmd`或其他实用程序查找 IIS7 站点 ID，但没有找到任何方法来实现它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T08:56:48.730

以下命令返回站点 ID：

```
%systemroot%\system32\inetsrv\APPCMD list site <SiteName> 
```

示例输出：

```
SITE "Default Web Site" (id:1,bindings:http/*:80:default.local,state:Started)
SITE "My Site" (id:2,bindings:http/*:80:my.local,state:Started) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-10-06T13:10:45.510

最简单的方法是加载 IIS 管理器并单击“站点”文件夹。在“功能视图”窗格中显示的列表中应该有一个名为“ID”的列，这就是您的站点 ID。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-31T14:50:47.713

你也可以试试 Powershell `get-website`commandlet。如果没有 args，它将列出所有站点以及 ID。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-21T10:42:23.367

这是执行此操作的 Powershell 方式：

```
Get-Website -Name "Default Web Site" | Select -ExpandProperty ID 
```

（用您的站点名称替换默认网站。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T10:31:37.850

保存这个 XXX.VBS

```
dim lookfor: lookfor = lcase(WScript.Arguments(0))
dim ws: set ws = getobject("IIS://localhost/w3svc")
for each site in ws
    if site.class = "IIsWebServer" then
        if lcase(site.ServerComment) = lookfor then
            wscript.echo "id=" & site.Name & ", name=" & site.ServerComment
        end if
    end if
next 
```

然后从命令行

```
XXX.vbs site.tofind.com 
```

或者

```
cscript XXX.vbs site.tofind.com 
```

# java - Java - 用户输入 - 错误循环

> ID：12278837
> 
> 赞同：0
> 
> 时间：2012-09-05T09:57:37.320
> 
> 标签：java, python, loops, while-loop, nan

这是我的Java代码：

```
Scanner userInput = new Scanner(System.in);
while (true) { // forever loop
    try {
        System.out.print("Please type a value: "); // asks user for input
        double n = userInput.nextDouble(); // gets user input as a double
        break; // ends if no error
    }
    catch (Throwable t) { // on error
        System.out.println("NaN"); // not a number
    }
} 
```

您可以从评论中看到这应该做什么。

但是当我输入不是数字的东西时，会发生这种情况：

```
Please type a value: abc
NaN
Please type a value: NaN
Please type a value: NaN
Please type a value: NaN
Please type a value: NaN
Please type a value: NaN
Please type a value: NaN 
```

依此类推，直到我强制停止它。

在 Python 中，我会这样做：

```
while True:
    try:
        n = float(raw_input("Please type a value: "))
        break
    except Exception:
        print "NaN" 
```

我如何在 Java 中做到这一点？我试过使用`do while`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:04:30.967

在块中调用[nextLine()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)方法。`catch`

> 将此扫描器前进到当前行并返回被跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。
> 
> 由于此方法继续搜索输入以查找行分隔符，因此如果不存在行分隔符，它可能会缓冲所有搜索要跳过的行的输入。

```
 catch (InputMismatchException t) { // on error
    userInput.nextLine();
    System.out.println("NaN"); // not a number
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:04:49.987

```
while (true) { // forever loop
    try {
        scanner userInput = new Scanner(System.in); 
        System.out.print("Please type a value: "); // asks user for input
        double n = userInput.nextDouble(); // gets user input as a double
        break; // ends if no error
    }
    catch (Throwable t) { // on error
        System.out.println("NaN"); // not a number
    }
} 
```

您应该在 while 循环中使用扫描器类，然后如果给定的输入值错误，它只会询问下一个输入值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:51:34.010

As above , You can change it like this:

```
 Scanner userInput = new Scanner(System.in);
    while (true) { // forever loop
        try {
            System.out.print("Please type a value: "); // asks user for input
            double n = userInput.nextDouble(); // gets user input as a double
            break; // ends if no error
        }
        catch (Throwable t) { // on error
            System.out.println("NaN"); // not a number
            userInput.nextLine();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:10:46.330

尝试这个，

```
double n;
boolean is_valid;

do {
    try {
        System.out.print("Please type a value: ");
        Scanner kbd = new Scanner(System.in);
        n = kbd.nextDouble();
        is_valid = true;
    } catch (Exception e) {
        System.out.println("NaN"); 
        is_valid = false;
    }
} 
while (!is_valid); 
```

# c# - 在嵌套中继器内使用时，子中继器控件无法隐藏或显示面板控制

> ID：12278838
> 
> 赞同：0
> 
> 时间：2012-09-05T09:57:45.803
> 
> 标签：c#, asp.net, repeater, webforms, nested-repeater

我正在使用嵌套中继器控件按年份显示专辑

输出应该像

**年**

-- 专辑 1 专辑 2 专辑 3 专辑 4 [IMG More]

**年**

-- 专辑 1 专辑 2 专辑 3 专辑 4 [IMG More]

**年**

-- 专辑 1 专辑 2 专辑 3 专辑 4 [IMG More]

**已解决**：我提到了错误的面板名称`Panel pnl = (Panel)e.Item.FindControl("pnlMore");`

如果我用“//Generates Error”评论两条语句，代码工作正常。`[IMG More]`如果特定年份有超过 4 张专辑，我想从这段代码中显示图像，否则将其隐藏。

以下代码行生成错误

`pnl.Visible = true; //Generates Error`或者`pnl.Visible = false; //Generates Error`

**错误消息**：对象引用未设置为对象的实例。

父中继器控制`rptAlbumsCategories`和子中继器控制`rptAlbums`

我不确定为什么会产生错误。

如果有更好的方法来做同样的事情，我将不胜感激。

```
protected void rptAlbumCategory_ItemBound(Object Sender, RepeaterItemEventArgs e)
{
    try
    {
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        DataRowView drv = (DataRowView)e.Item.DataItem;
        int year = Convert.ToInt32(drv["Year"]);
        Repeater Repeater2 = (Repeater)e.Item.FindControl("rptAlbums");
            Panel pnl = (Panel)e.Item.FindControl("pnlNext");
        //Control pnl = (Control)e.Item.FindControl("pnlNext");
        Repeater2.DataSource = getAlbumsYear(year, pnl);
        Repeater2.DataBind();
    }
        }
    catch (Exception ex)
    {
        throw ;
    }
}

private DataTable getAlbumsYear(int year, Panel pnl)
{
    try
    {
        DataSet ds = new DataSet();
        string strSql = "SELECT TOP 4 AlbumID, AlbumName, AlbumIcon FROM Album";
        strSql += " DATEPART(YYYY,AlbumDate) = " + year;
        strSql += " ORDER BY AlbumDate DESC ";
        ds = DataProvider.Connect_Select(strSql);
        DataTable dt = ds.Tables[0];
        //Code to show Next arrow
        string strSql2 = "SELECT AlbumID, AlbumName, AlbumIcon FROM Album ";
        strSql2 += "WHERE DATEPART(YYYY,AlbumDate) = " + year;
        DataSet ds2 = new DataSet();
        ds2 = DataProvider.Connect_Select(strSql2);
        if (ds2.Tables[0].Rows.Count > 3)
        {
            pnl.Visible = true;  //Generates Error
        }
        else
        {
            pnl.Visible = false; //Generates Error
        }
        return dt;
    }
    catch (Exception ex)
    {
        throw;
    }
} 
```

代码

```
<asp:Repeater ID="rptAlbumsCategories" runat="server" OnItemDataBound="rptAlbumCategory_ItemBound">
                <ItemTemplate>
                    <div class="AlbumCategory">
                        <asp:HyperLink ID="hyplnkCat1" runat="server" NavigateUrl='<%# Eval("Year")%>'>
                        <div id="AlbumCatbyYear" class="AlbumCatbyYear"  >
                            <asp:Label ID="lblAlbumYear" runat="server" Text='<%# Eval("Year")%>'></asp:Label>
                        </div>
                        </asp:HyperLink>
                    </div>
                    <div class="AlbumCatWrapper">
                        <asp:Repeater ID="rptAlbums" runat="server" >
                        <ItemTemplate>
                            <asp:HyperLink ID="hylnkToAlbum" NavigateUrl='<%# getAlbumURL(Eval("AlbumID")) %>' runat="server" >
                            <div class="PGImageFrame">
                                <div class="boxgrid  captionfull"> 
                                <asp:Image ID="Image1" ImageUrl='<%# getAlbumImagePath(Eval("AlbumIcon")) %>' AlternateText='<%# Eval("AlbumName") %>'  runat="server" />

                                    <div class="cover  boxcaption">
                                        <asp:Label ID="lblAlbumTitle"  runat="server" Text='<%# Eval("AlbumName") %>'></asp:Label>
                                    </div>
                                </div>
                            </div>
                            </asp:HyperLink>
                        </ItemTemplate>
                        </asp:Repeater>
                        <asp:Panel ID="pnlMore" runat="server" Visible="false">
                            <asp:Image ID="imgNext" runat="server" ImageUrl="~/Images/PG-Next.png" />
                        </asp:Panel>
                    </div>
                </ItemTemplate>
            </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:14:02.560

已解决：我提到了错误的面板控件名称

```
Panel Panel pnl = (Panel)e.Item.FindControl("pnlMore"); 
```

# ios5 - 如何自定义 UITabBar 文本标签？

> ID：12278842
> 
> 赞同：1
> 
> 时间：2012-09-05T09:57:53.733
> 
> 标签：ios5, fonts, uitabbar, uiappearance

有人知道如何使用外观代理对象吗

```
[[UITabBar appearance] set....]; 
```

自定义 UITabBar 的选定/未选定标签的颜色、字体和阴影？

多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:04:57.880

通过访问for each的**tab-bar** item 对象`UITabBar``UIViewController`

这仅适用于 iOS5.0 或更高版本。

```
if ([self.tabBarItem respondsToSelector:@selector(setTitleTextAttributes:)]) {
    NSLog(@"*** Support method(iOS 5): setTitleTextAttributes:");
    [self.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                [UIFont fontWithName:@"AmericanTypewriter" size:20.0f], UITextAttributeFont,
                                                [UIColor blackColor], UITextAttributeTextColor,
                                                [UIColor grayColor], UITextAttributeTextShadowColor,
                                                [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                                nil]];
} 
```

低于 5 [https://github.com/boctor/idev-recipes/tree/master/CustomTabBar](https://github.com/boctor/idev-recipes/tree/master/CustomTabBar)

# c# - MonoTouch 中的位图编码器

> ID：12278844
> 
> 赞同：1
> 
> 时间：2012-09-05T09:57:56.477
> 
> 标签：c#, bitmap, xamarin.ios

我目前正在转换一些标准 C# 文件，以便它们在 MonoTouch iPhone 应用程序中工作，但是我用这种方法碰壁了：

```
private void WriteTestFile(CGBitmapContext bitmapImage,  string fileName)
{
    try
    {
        using (FileStream stream5 = new FileStream(fileName, FileMode.Create))
        {
            BitmapEncoder encoder5 = new BmpBitmapEncoder();
            encoder5.Frames.Add(BitmapFrame.Create(bitmapImage));
            encoder5.Save(stream5);
            stream5.Close();
        }
    }
    catch (UnauthorizedAccessException)
    {
        // Do nothing
    }
} 
```

我似乎找不到任何与 BitmapEncoder 类等效的东西，而且我不知道如何转换这部分代码，任何人都可以建议采取的路线吗？

注意：原始代码在 CGBitmapContext 中使用了 WritableBitMap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:20:15.020

我对 MonoTouch 和 iPhone 一无所知。

然而，看起来该功能只是试图将位图图像保存为 BMP 文件。CGBitmapContext 中必须有一个函数可以保存到文件或其他可以保存位图的类。

*编辑* 经过进一步搜索，看起来您应该将 CGBitmapContext 转换为 UIImage 然后保存；请参阅[如何将 UIImage 保存为 BMP？](https://stackoverflow.com/questions/1350654/how-do-i-save-an-uiimage-as-bmp)

# ios - ios segues 没有导航控制器

> ID：12278845
> 
> 赞同：5
> 
> 时间：2012-09-05T09:57:57.477
> 
> 标签：ios, xcode, segue, uistoryboard

我想使用故事板来创建我的应用程序。我可以找到很多关于如何将它与导航或选项卡控制器一起使用的信息，但我不希望它们中的任何一个都使用。

我的目标是创建一个具有不同视图但不使用导航或选项卡控制器的应用程序。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-12T10:02:41.697

在IOS故事板中，如果你不想使用导航，那么你不能使用push segue。然后，您可以使用模态转场或自定义转场。在模态segue中，有四种转换：

1.  覆盖垂直
2.  水平翻转
3.  交叉溶解
4.  部分卷曲

然而，所有这些预定义的segue动画都不能执行水平滑动动画segue。如果要使用水平滑动效果，则必须使用自定义segue。您需要像这样覆盖函数：

```
- (void) perform
{
UIViewController *desViewController = (UIViewController *)self.destinationViewController;

UIView *srcView = [(UIViewController *)self.sourceViewController view];
UIView *desView = [desViewController view];

desView.transform = srcView.transform;
desView.bounds = srcView.bounds;

if(isLandscapeOrientation)
{
    if(isDismiss)
    {
        desView.center = CGPointMake(srcView.center.x, srcView.center.y  - srcView.frame.size.height);
    }
    else
    {
        desView.center = CGPointMake(srcView.center.x, srcView.center.y  + srcView.frame.size.height);
    }
}
else
{
    if(isDismiss)
    {
        desView.center = CGPointMake(srcView.center.x - srcView.frame.size.width, srcView.center.y);
    }
    else
    {
        desView.center = CGPointMake(srcView.center.x + srcView.frame.size.width, srcView.center.y);
    }
}

UIWindow *mainWindow = [[UIApplication sharedApplication].windows objectAtIndex:0];
[mainWindow addSubview:desView];

// slide newView over oldView, then remove oldView
[UIView animateWithDuration:0.3
                 animations:^{
                     desView.center = CGPointMake(srcView.center.x, srcView.center.y);

                     if(isLandscapeOrientation)
                     {
                         if(isDismiss)
                         {
                             srcView.center = CGPointMake(srcView.center.x, srcView.center.y + srcView.frame.size.height);
                         }
                         else
                         {
                             srcView.center = CGPointMake(srcView.center.x, srcView.center.y - srcView.frame.size.height);
                         }
                     }
                     else
                     {
                         if(isDismiss)
                         {
                             srcView.center = CGPointMake(srcView.center.x + srcView.frame.size.width, srcView.center.y);
                         }
                         else
                         {
                             srcView.center = CGPointMake(srcView.center.x - srcView.frame.size.width, srcView.center.y);
                         }
                     }
                 }
                 completion:^(BOOL finished){
                     //[desView removeFromSuperview];
                     [self.sourceViewController presentModalViewController:desViewController animated:NO];
                 }];
} 
```

如果您仍然有问题，您可以查看此帖子。它还有一个 youtube 视频向您展示如何实现此自定义 segue：

[在没有 UINavigation 控制器的情况下创建 Push Segue 动画](http://jmsliu.com/1249/create-push-segue-animation-without-uinavigation-controller.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:04:25.350

你为什么不想要它们？这似乎是在为自己工作。

您可以拥有一个没有可见 UI 的导航控制器，它只负责推送和弹出其他 UIViewControllers，然后默认推送 segue 类型将正常工作。

但是，如果您*真的*不想要它们，您可以随时创建一个[自定义 segue 类](http://developer.apple.com/library/IOs/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html)并使用它来管理您的视图控制器堆栈。

# validation - Openerp 中的电子邮件验证？

> ID：12278848
> 
> 赞同：2
> 
> 时间：2012-09-05T09:58:15.387
> 
> 标签：validation, email, openerp

我想通过小部件验证 openerp 中的电子邮件。有什么方法或者有什么解决办法。如何在 openERP 中验证电子邮件。只需输入的电子邮件地址有效与否。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:58:20.967

你可以试试这个。。

```
def onchange_email(self, cr, uid, ids, email):
    if re.match("^.+\\@(\\[?)[a-zA-Z0-9\\-\\.]+\\.([a-zA-Z]{2,3}|[0-9]{1,3})(\\]?)$", email) != None:
        return True
    else:
        raise osv.except_osv(_('Invalid Email'), _('Please enter a valid email address')) 
```

在您看来，您将使用 on_change 事件定义字段，如[文档中所述](http://doc.openerp.com/v6.1/developer/03_modules_3.html#on-change)。

```
<field name="email" on_change="onchange_email(email)"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:12:02.590

电子邮件验证可以使用正则表达式来完成。以下是一个例子。代码。

```
import re

def validateEmail(email):

    if len(email) > 7:
        if re.match("^.+\\@(\\[?)[a-zA-Z0-9\\-\\.]+\\.([a-zA-Z]{2,3}|[0-9]{1,3})(\\]?)$", email) != None:
            return 1
    return 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:08:03.267

使用以下正则表达式进行电子邮件验证

```
/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/ 
```

# html - Sprite 作为背景图像：如何在更大的容器中显示？

> ID：12278849
> 
> 赞同：1
> 
> 时间：2012-09-05T09:58:15.853
> 
> 标签：html, css, background

我需要使用精灵作为`<a>`标签元素类型的背景图像。问题是我只需要显示精灵的一部分（例如 17px x 17px）并且容器可以更高。在这种情况下，取而代之的是我的背景图像而不是空白空间，我得到了我想要的图像和下一张图像（我不想显示）。

有什么方法可以限制我想显示的精灵上的正方形的`height`和？`width`我不能`height`为`width`整体设定公正`<a> tag`。

例子：

![在此处输入图像描述](../Images/edd9427fbefcfe14abc9c8fc7d608727.png)

我想做的是不显示第二张图片中位于同一精灵上的部分（这是唯一的例子；在项目中我在整行中显示文本，所以改变宽度不是解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:02:37.503

设置精灵的高度和宽度

```
a {
       display: block;
       background: url(sprite.png) no-repeat;
       height: 17px;
       width: 17px;
} 
```

**编辑**：在 OP 放一个截图之后

您需要将`:before`伪选择器与`content`属性一起使用

[在http://jsfiddle.net/SqbnC/](http://jsfiddle.net/SqbnC/)上构建一个演示

```
a:before{
  background:url('http://pf.staticfil.es/hp/img/sprite2.png');
  width: 22px ;
  height: 22px;
  display:inline-block;
    content:"";
} 
```

我已将`height`and指定`width`为 22px，因为这是我从精灵中显示的图标的尺寸

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:03:08.237

您应该在 CSS 类中使用背景位置。举个例子..

```
.classsample{
background:url('YOUR IMAGE PATH') no-repeat 0 -20px;
height:10px;
width:10px;
} 
```

根据要在 div 中显示的图像部分更新值 0 和 -20。最后你不应该在你的 Anchor 标签上使用 IMG 标签，你必须通过上面的 CSS 类传递图像。

```
<a class="classsample" href="#">TEXT</a> 
```

如果 Anchor 标记中没有文本，请使用填充。

# javascript - Firefox，动态，绝对表格内容中的兼容性问题

> ID：12278853
> 
> 赞同：0
> 
> 时间：2012-09-05T09:58:45.790
> 
> 标签：javascript, jquery, css, firefox

如何使这个（[http://jsbin.com/uxayid/3/](http://jsbin.com/uxayid/3/)）也能在 Firefox 中工作？

这是三角形的css：

```
#c table tr td {
    height: 295px;
    width: 208px;
    background-color: white;
    border: 1px solid black;
    position: relative;
    text-align: center;
}
.tr-topright {
    border-left-width: 42px;
    border-top-width: 42px;
    border-left-color: white;
    border-left-style: solid;
    border-top-color: #BBBBBB;
    border-top-style: solid;
    box-shadow: -3px 3px 6px 0 lightGrey;
    height: 0;
    position: absolute;
    right: 0;
    top: 0;
    width: 0;
} 
```

第一个是预期的结果。

![chrome 和 firefox 预览](../Images/da5af5562bf727de79d0e551b61a974b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:12:19.783

只需添加：

```
display: block;
float: left; 
```

到

```
#c table tr td 
```

规则

它应该可以正常工作。

# android - 在 Eclipse 中运行第一个 android 应用程序

> ID：12278856
> 
> 赞同：-2
> 
> 时间：2012-09-05T09:59:02.327
> 
> 标签：android

> **可能重复：**
> [Eclipse 中的应用程序崩溃](https://stackoverflow.com/questions/12277856/app-crash-in-eclipse)

我是 android app devlopment 的新手，我已经安装了

*   Android sdk 工具 Rev 20.0.3
*   Android sdk 平台工具 Rev 3
*   Android 2.3.3(API 10) sdk 平台第 2 版
*   sdk api 10 rev 1 的 Ssmples
*   ADT 插件 20.0.3

我创建了一个新项目，它在我尝试运行时生成了一个 Hello World 错误`that device not connected...`

我得到的下一个错误`your project includes errors please fix them before running your application`

我还创建了一个 AVD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:33:37.710

您可能试图运行 xml。首次启动时，请务必右键单击您的项目并选择 Run As... --> Android Application。

修复“您的项目包含错误”：尝试运行 xml 时，会创建类似 myactivity_out.xml 的内容。删除那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:39:16.800

您应该检查您的项目中是否有正确的 Android Lib。否则，右键单击项目，然后右键单击 Properties->Android Project Build Target 并选择一个。

**确保您创建的 AVD 的 API 级别 >= 项目 API 级别。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:20:01.687

在开始第一个 Android 项目之前，您需要学习很多东西。
首先对 Android 概念入门有一个透彻的研究。

1.  您需要将 android sdk 与 IDE 集成（Eclipse 说）。
2.  安装 ADT 插件。
3.  也需要创建一个 AVD。
4.  项目 API 级别应与 AVD 相同。

还有一点：开始学习[https://developer.android.com/training/index.html](https://developer.android.com/training/index.html)，这是最好的培训指南。

# iphone - 从 iPhone 在外部数据库中插入新行

> ID：12278860
> 
> 赞同：0
> 
> 时间：2012-09-05T09:59:10.113
> 
> 标签：iphone, mysql, objective-c, sql, database

我现在正在制作一个必须能够将新行插入外部数据库的应用程序（用于推送通知）。它唯一应该能够做的就是插入新行（嗯，这并不难）。

真正的问题是：如何使用 SQL 查询从 iPhone 连接/请求数据库？例如只是一个简单的

```
INSERT INTO myTable VALUES (value1, value2, value3); 
```

目前我正在使用`MAMP`运行本地 MySQL 数据库（稍后它将在单独的服务器上）。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:08:57.767

使用网络服务。通过调用 Web 服务来保存和获取数据。发送参数以将数据保存在服务器数据库中。如果您还想在本地，请尝试将服务器数据同步到本地数据库，这将帮助您在离线模式下获取数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:20:45.880

在设备上使用 SQL 的问题在于，当您编译应用程序时，您会将 SQL 密码和用户名编译到其中，这些密码和用户名可以通过逆向工程获得。

一种无需从实际设备中保存到数据库的方法是制作一个 REST 应用程序，并将信息发送给它，然后应用程序处理数据并将其插入数据库。

# entity-framework-4 - 代码优先，多重绑定

> ID：12278863
> 
> 赞同：0
> 
> 时间：2012-09-05T09:59:14.090
> 
> 标签：entity-framework-4, ef-code-first, code-first

我想将我的实体类映射到数据库表。表行是：Id、IsActive、BelongsToId（BelongsToId 是外键） 实体属性是：Id、IsActive、BelongsToId、BelongsTo（BelongsToId int，BelongsTo 是其他实体类的实例）是否可以同时绑定 BelongsToId 和 BelongsTo 属性到 BelongsToId 数据属性？如何？我尝试这样，但 BelongsToId 的值为零：

```
 partial class KeyConfig : EntityConfiguration<Entities.Key>
    {

    public KeyConfig ( )
    {
        Property(s => s.Id).IsIdentity();
        Relationship(s => s.BelongsTo).FromProperty(s => s.Keywords);
        Property(s => s.IsActive);
        Map();
    }

    void Map ( ) {
        MapHierarchy(s => new
        {
            s.Id,
            BelongsToId=s.BelongsTo.Id,
            s.IsActive,
        }).ToTable("Keywords");
    }
    } 
```

# drools - 条件时比较 Drools 中的列表项属性

> ID：12278864
> 
> 赞同：0
> 
> 时间：2012-09-05T09:59:19.113
> 
> 标签：drools

我在 StatefulKnowledgeSession 中插入了元素列表。现在在 drools .drl 文件的 When 子句中，我需要比较列表中不同元素的一些属性值。

例如，我有一个宠物列表 [在会话中添加为 kbSession.insert(list) ]，其中每个宠物都有一个名称属性 (pet1.name = "adi", pet2.name="flix")。那么什么最适合在 when 子句中检查这些项目？

在我的 test.drl 文件中说我有

规则“宠物物品”

方言“java”

什么时候

```
 list.get(0).name != list.get(1).name 
```

然后

```
 do something! 
```

非常感谢任何建议！

亲切的问候，

谢赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:23:21.527

您正在尝试根据规则验证您的所有 Pet 对象（技术正确术语 - 事实）？然后你不需要将它作为列表插入。将所有 Pet 对象一一插入为 session.insert(petObj) 和 fireAllRules。规则引擎将根据规则检查所有对象，然后为匹配的对象激活规则。

# php - 如何移动“当前”标志 在 knpMenuBundle 中反对？

> ID：12278868
> 
> 赞同：1
> 
> 时间：2012-09-05T09:59:32.810
> 
> 标签：php, symfony, twig

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:41:30.807

我没有移动“当前”类，而是使用这个 css 深入到所需的对象：

```
ul.mainmenu>li.current > a > div {
   opacity:0.6;
} 
```

# ios5 - 如何在另一个 UIViewcontroller 中访问 NSMutablearray？

> ID：12278871
> 
> 赞同：1
> 
> 时间：2012-09-05T09:59:51.090
> 
> 标签：ios5, nsmutablearray

我在这样的类`NSMutable`中定义了一个数组`NSObject`

`NSMutableArray *allbilltypeArray=[[NSMutableArray alloc] initWithArray:[sqlite executeQuery:@"SELECT * FROM dir_AddBillName"]];`

现在我想在另一个视图控制器中一个一个地获取元素。我怎样才能`NSMutablearray`在另一个视图控制器中做到这一点。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:11:39.483

您想在头文件中将 NSMutableArray 声明为其包含类的属性，如下所示：

```
@property (nonatomic, retain) NSMutableArray *allbilltypeArray; 
```

然后，您应该在实现文件中综合该属性。

现在，如果您像这样（或类似）在另一个视图控制器中声明包含数组的类的实例：

```
ContainingClass *class = [[ContainingClass alloc] init]; 
```

您将能够通过执行以下操作来访问数组中的特定元素：

```
Object *o = [class.allbilltypeArray objectAtIndex: i]; 
```

或者像这样遍历它们：

```
for (Object *o in class.allbilltypeArray) {
      //Do something with object
} 
```

希望这可以帮助。

# ajax - ajax 中的跨站点调用：responseXML 未定义

> ID：12278872
> 
> 赞同：0
> 
> 时间：2012-09-05T09:59:56.783
> 
> 标签：ajax, csrf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:52:21.380

为了让浏览器使用 responseXML 正确返回 XML 对象，您必须确保以下内容：

1.您的 XML 文档格式正确（如果没有，responseXML 将始终返回*null ）*

2.在*Firefox*中，在您的 Ajax 请求开始时（在实例化时）调用***request.overrideMimeType('text/xml')***以明确告诉浏览器返回的数据将具有“text/xml”的内容类型。

3\. *IE*不支持客户端 overrideMimeType() 方法，因此您必须确保您的服务器为正在返回的 XML 文件返回正确的“text/xml”内容头类型。

*注意：*如果您的 XML 文件以“.xml”的扩展名命名，默认情况下大多数服务器会发送正确的“text/xml”标头，但如果不是，您需要修改服务器设置以执行此操作. 有关详细信息，请参阅“XML 文档和 IE 中的内容类型陷阱”。

***如果不满足上述任一条件，则返回的数据将是纯文本，而不是预期的 XML 对象。***

**编辑：**我查看了你的 JQuery Ajax 调用（再次），你猜怎么着？！*responseXML*将始终未定义，因为您甚至在 AJAX 请求完成之前就尝试访问它。*我的解决方案是在complete*属性而不是*success*下调用函数。

# android - 如何在 Android 上获取 VideoView 的缓冲百分比

> ID：12278873
> 
> 赞同：5
> 
> 时间：2012-09-05T09:59:57.127
> 
> 标签：android, media-player, android-videoview

我的代码如下：

```
Uri uri = Uri.parse(URL);
video.setVideoURI(uri);
video.start(); 
```

我使用 VideoView 播放流视频。
该视频是一个 VideoView。
我想在 MediaPlayer 中获得像 setOnBufferingUpdateListener 这样的缓冲百分比。

```
MediaPlayer.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {
    @Override
    public void onBufferingUpdate(MediaPlayer mp, int percent) {
        //buffering is percent
    }
}); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:10:54.393

为您的 VideoView 实现此方法：

```
public abstract void onBufferingUpdate (MediaPlayer mp, int percent) 
```

mp 是与更新相关的 MediaPlayer percent 是到目前为止已缓冲或播放的内容的百分比 (0-100)。

[资源](http://developer.android.com/reference/android/media/MediaPlayer.OnBufferingUpdateListener.html)

您可以在开始加载视频之前添加进度条，然后在此方法中不断更新它。一旦缓冲完成（在 onPreparedListener 中），只需关闭进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:21:05.153

让您的**活动实施**

**OnBufferingUpdateListener** ...

然后你得到：

```
 @Override
  public void onBufferingUpdate(MediaPlayer mp, int percent) {

  } 
```

**:=) 祝你好运**

# javascript - Basic D3.js：使用数据键？

> ID：12278876
> 
> 赞同：2
> 
> 时间：2012-09-05T10:00:08.313
> 
> 标签：javascript, d3.js

这应该是一个相当简单的 D3 问题。我正在将数据绑定到一些圈子，这是数据：

```
var linedata = [{ x:10, y:20},{x:5, y:30}]; 
```

这里是圆圈：

```
var line = d3.svg.line().x(function(d) {
    return x(d.x);
 }).y(function(d) {
    return y(d.y);
});
context.selectAll(".dot")
  .data(linedata).enter()
  .append("circle")
  .attr("class", "dot")
  .attr("cx", line.x())
  .attr("cy", line.y())
  .attr("r", 2); 
```

但是，如果我想更改数据和代码以使用某些数据键，以便圆圈附加类：

```
var mydata = [{ name: 'LHR', data: [{ x:10, y:20}, {x:5, y:15} ], { name: 'SFO', data : [{x:5, y:30}, {x:4, y:8}] }]; 
```

我知道如何编辑类属性以使用数据键，但是如何编辑 cx 和 cy 属性？

```
context.selectAll(".dot")
  .data(mydata).enter()
  .append("circle")
  .attr("class", function(d) { return "dot " + d.name; })
  .attr("cx", line.x()) 
  .attr("cy", line.y())
  .attr("r", 2); 
```

我尝试了以下方法，但它不起作用：

```
.attr("cx", function(d) { return line.x(d.data); }) 
```

这似乎将函数本身分配给 cx 属性。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:46:33.397

您的 mydata 变量`}`在数据数组之后缺少 a 以关闭主数组中的对象。也许这是个问题？

此外，当您传递`d.data`. 也许尝试传递`d.data[1]`或您想要的任何数组项。

编辑:: 你可能想要使用`.attr('cx', function(d, i) { return line.x(d.data[i]); }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:45:52.120

在 Alex 的回答的帮助下想通了 - 我应该直接传递数组项，我根本不应该使用该`line`函数。反而：

```
context.selectAll(".dot")
  .data(mydata).enter()
  .append("circle")
  .attr("class", function(d) { return "dot " + d.name; })
  .attr("cx", function(d,i) { return x(d.data[i].x); }) 
  .attr("cy", function(d,i) { return y(d.data[i].y); }) 
  .attr("r", 2); 
```

# actionscript-3 - Adobe Flash Builder：AddChild 与 AddElement

> ID：12278877
> 
> 赞同：2
> 
> 时间：2012-09-05T10:00:09.530
> 
> 标签：actionscript-3, apache-flex, flash-builder

使用 Adob​​e Flash Builder 4.0？

使用 addChild() 时出错。编译器建议使用 addElement()。这两个功能是否相互交替？还是不推荐使用 addChild ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:26:23.593

要清楚。Adobe Flash Builder 是用于开发 flex 应用程序的 IDE。重要的是 Flex SDK 版本。显然，您使用的是 4+ 版本。我建议在没有强烈需求的情况下避免使用 mx (Flex 3) 组件。您应该阅读更多关于 Flex 3 和 Flex 4 的区别。

发布有关[addChild 与 addElement](http://www.billdwhite.com/wordpress/?p=296)的信息。

# c++ - 如何使用整数数组作为 unordered_map 的键

> ID：12278879
> 
> 赞同：2
> 
> 时间：2012-09-05T10:00:10.687
> 
> 标签：c++, hashtable, unordered-map

我想使用一个整数数组作为 unordered_map 的键。基本思想是我有许多不同的问题状态，它们表示为`int state[16]`。数组的值是从 0 到 15 的数字排列，例如：

```
a= { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15}; 
b= { 14, 1, 9, 6, 4, 8, 12, 5, 7, 2, 3, 0, 10, 11, 13, 15}; ... 
```

这些将是 unordered_map 中的键（值将是一个包含其他东西的类）。我怎样才能做到这一点？我是否需要实现一个新的哈希函数来比较这些值，或者我可以使用 C++ 提供的一些？我的目标是将其用作哈希表，还有其他更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:06:31.637

16！大约为 2*10^13，因此您可以将排列的序数存储在 64 位整数中并将其用作映射键，而无需存储或散列排列。

请参阅[http://en.wikipedia.org/wiki/Permutation#Numbering_permutations](http://en.wikipedia.org/wiki/Permutation#Numbering_permutations)了解 0 ... N-1 和数字 0 ... N 的排列之间的自然双射！- 1。

或者，您可以只使用`std::map`; 排列将是有效的字典比较。

第三种选择是使用 a`std::string`作为键，因为您的值很容易适合 a `char`; `std::hash`专门用于`std::string`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:06:25.273

您可以[`hash_range`](http://www.boost.org/doc/html/hash/reference.html#boost.hash_range)从 Boost 中使用。

```
namespace std
{
    template <typename T, typename A>
    struct hash<vector<T, A>>
    {
        size_t operator()(vector<T, A> const & v) const
        {
            return boost::range_hash(v.cbegin(), v.cend());
        }
    };
} 
```

# oracle - 更改 oracle 显示消息

> ID：12278889
> 
> 赞同：1
> 
> 时间：2012-09-05T10:00:50.203
> 
> 标签：oracle, oracle11g

我编写了一个程序来检查该文件是否存在于 oracle 目录中。它工作正常。在屏幕上，如果路径中不存在文件，我正在打印消息，`DBMS_OUTPUT.PUTLINE('MESSAGE HERE');`但在显示消息 oracle 打印默认语句**PL/SQL 过程成功完成**之后。我不想在屏幕上显示这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:27:24.913

要抑制成功完成过程的 sql*plus 中的消息，请使用以下命令。

```
set feedback off 
```

# mysql - 如何从具有游标的存储过程中获取数据

> ID：12278891
> 
> 赞同：0
> 
> 时间：2012-09-05T10:00:56.663
> 
> 标签：mysql

我有这个存储过程：

```
DELIMITER //
DROP PROCEDURE IF EXISTS cursor_example//

CREATE PROCEDURE cursor_example()
BEGIN
    DECLARE niche_id INT;
    DECLARE niche_name VARCHAR(100);

    DECLARE curl CURSOR FOR SELECT * FROM `niche`;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

    OPEN curl;
    my_loop:LOOP
        FETCH curl INTO niche_id, niche_name;
        IF done=1 THEN
            LEAVE my_loop;
        END IF;
    END LOOP my_loop;
    CLOSE curl;
END//

DELIMITER ; 
```

问题是，在游标完成迭代后，我如何将niche id 和niche_name 行从游标中取出。我无法从存储过程中获取结果集作为变量，不是吗？那么存储过程使用游标主要是为了内部目的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:21:05.213

如果结果是 - *'scalar values'*，那么您可以使用以下变体之一：

1.  `SELECT niche_id, niche_name;`从程序运行。
2.  使用 OUT 参数。

如果结果是一组值，那么您应该填充另一个表，例如临时表。

另外，如果您想从表中读取一些数据并将其存储到另一个表中，请尝试使用[INSERT ... SELECT](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)语句而不是打开游标。

# ocean - 访问二维地震数据的最有效方法是什么

> ID：12278897
> 
> 赞同：0
> 
> 时间：2012-09-05T10:01:08.927
> 
> 标签：ocean

谁能告诉我使用 Ocean 访问 2D 地震数据的最有效/最有效的方法？

例如，如果我需要使用来自 3x2D 地震线的数据（都具有相同的几何形状）执行计算，这是最有效的方法吗？

```
for (int j = 0; j < seismicLine1.NumSamplesJK.I; j++)
{
  ITrace trace1 = seismicLine1.GetTrace(j);
  ITrace trace2 = seismicLine2.GetTrace(j);
  ITrace trace3 = seismicLine3.GetTrace(j);

  for (int k = 0; k < seismicLine1.NumSamplesJK.J; k++)
  {
    double sum = trace1[k] + trace2[k] + trace3[k];
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:26:29.987

@Keith 建议的后续行动 - 使用 .NET4，他的代码可以重构为通用代码：

```
public static IEnumerable<Tuple<T1, T2, T3>> TuplesFrom<T1,T2,T3>(IEnumerable<T1> s1, IEnumerable<T2> s2, IEnumerable<T3> s3)
{
  bool m1, m2, m3; // "more" flags
  using (var e1 = s1.GetEnumerator())
  using (var e2 = s2.GetEnumerator())
  using (var e3 = s3.GetEnumerator())
    while ((m1 = e1.MoveNext()) && 
           (m2 = e2.MoveNext()) && 
           (m3 = e3.MoveNext()))
      yield return Tuple.Create(e1.Current, e2.Current, e3.Current);
  if (m1 || m2 || m3)
    throw new ArgumentException(); // sequences of unequal lengths
} 
```

这使：

```
foreach (var traceTuple in TuplesFrom(seismicLine1.Traces, seismicLine2.Traces, seismicLine3.Traces))
  for (int k = 0; k < maxK; ++k)
    sum = traceTuple.Item1[k] + traceTuple.Item2[k] + traceTuple.Item3[k]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T11:47:30.503

除了我看到的两个错误之外，您所拥有的将起作用，但它也可以稍微快一点。首先是错误。您的循环应该测试 NumSamplesIJK.J 而不是 .I 用于外部循环和 .K，而不是 .J 用于内部循环。对于 2D 线，.I 始终为 0。

通过最小化 NumSamplesIJK 属性的取消引用，您可以获得轻微的性能提升。由于几何形状相同，您应该为 J 和 K 属性创建一对变量并使用它们。

```
int maxJ = seismicLine1.NumSamplesIJK.J;
int maxK = seismicLine1.NumsamplesIJK.K;
for (int j = 0; j < maxJ; j++)
   ...
   for (int k = 0; k < maxK; k++)
   ... 
```

您也可以考虑使用 Traces 枚举器而不是调用 GetTrace。它将按跟踪升序处理数据。不幸的是，三行代码有点难以阅读。

```
int maxK = SeismicLine1.NumSamplesIJK.K;
IEnumerator line2Traces = seismicLine2.Traces.GetEnumerator();
ITrace line2Trace = line2Traces.MoveNext();
IEnumerator line3Traces = seismicLine3.Traces.GetEnumerator();
ITrace line3Trace = line3Traces.MoveNext();
foreach (ITrace line1Trace in seismicLine1.Traces)
{
    for (int k = 0; k < maxK; k++)
    {
        double sum = line1Trace[k] + line2Trace[k] + line3Trace[k];

    }
    line2Trace = line2Traces.MoveNext();
    line3Trace = line3Traces.MoveNext();
} 
```

我不知道这可能会提供什么（如果有的话）性能提升。您必须对其进行分析才能找出答案。

祝你好运。

# android - 在 Teechart Monodroid 上禁用平移和缩放

> ID：12278898
> 
> 赞同：0
> 
> 时间：2012-09-05T10:01:13.170
> 
> 标签：android, xamarin.android, teechart

我创建了一个继承自我`Steema.TeeChart.TChart`试图禁用平移和缩放的类，我有以下代码，但它仍然允许用户在设备上平移和缩放。

```
public class BaseChart : TChart
{
    public BaseChart(Context context, string headerTitle)
        : base(context)
    {
        _headerTitle = headerTitle;
        SetDefaults();
    }

    private void SetDefaults()
    {
        Chart.Zoom.Allow = false;
        Chart.Panning.Allow = ScrollModes.None;
        Zoom.Allow = false;
        Panning.Allow = ScrollModes.None;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:34:59.393

TeeChart .NET 标准缩放和滚动目前在 Mono for Android 版本中不起作用。我们计划在我们的问题跟踪系统中以 TM63016321 的未来版本功能请求支持它。最近，我们为 MfA 实现了一项新功能，该功能禁用了缩放和滚动：

```
 tChart1.Zoom.Style = Steema.TeeChart.ZoomStyles.None; 
```

**更新：**一个新的*Zoom.Style*选项已经实现：*ZoomStyles.Classic*。现在，您可以选择是否要切换缩放、平移以及两者都支持的方向。[已经发布了](http://www.steema.com/entry/217/TeeChart_for_Xamarin.Android_4.14.6.25_maintenance_release_available)一个维护版本来支持这一点。新版本在包含的缩放/平移教程中解释了如何使用*ZoomStyles.Classic*，例如：

```
tChart1.Zoom.Allow = true; 
tChart1.Zoom.Direction = Steema.TeeChart.ZoomDirections.Both; 
tChart1.Panning.Allow = Steema.TeeChart.ScrollModes.Horizontal; 
```

# ios - 在 Iphone 模拟器上使用可达性并且没有 wifi

> ID：12278903
> 
> 赞同：2
> 
> 时间：2012-09-05T10:01:18.097
> 
> 标签：ios, ios5, ios-simulator, reachability

我在我的 IOS 应用程序中使用可达性来确定连接。

继这篇文章[wifi on iphone 模拟器](https://stackoverflow.com/questions/6001253/wifi-on-iphone-simulator)

如果 wifi 关闭，模拟器的互联网连接不可用，但手机仍连接到 Wifi，因此连接没有改变。这一切都很好并且可以理解，当然我可以在设备本身上进行测试。

但是，我希望处理用户连接到 wifi 但 wifi 没有互联网连接的错误，如下面的屏幕截图所示。

我通过以下方式使用可达性：

```
#pragma mark - ()
- (void)monitorReachability {
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:ReachabilityChangedNotification object:nil];

self.hostReach = [Reachability reachabilityWithHostname: @"api.parse.com"];
[self.hostReach startNotifier];

self.internetReach = [Reachability reachabilityForInternetConnection];
[self.internetReach startNotifier];

self.wifiReach = [Reachability reachabilityForLocalWiFi];
[self.wifiReach startNotifier]; 
```

}

//每当状态改变时由可达性调用。- (void)reachabilityChanged:(NSNotification* )note { Reachability *curReach = (Reachability *)[note object]; NSParameterAssert([curReach isKindOfClass: [Reachability class]]); NSLog(@"可达性改变：%@", curReach); networkStatus = [curReach currentReachabilityStatus];

}

我在这里使用来自 tonymillion 的 github 的 Reachability for ARC：[https ://github.com/tonymillion/Reachability](https://github.com/tonymillion/Reachability)

有谁知道我可以如何处理这种连接情况并出现更好的错误？ ![在此处输入图像描述](../Images/697b4571b648937a8377095f9dea4e4d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:17:41.923

**在 appdelegate 中创建以下方法以在任何类上使用它。**

```
-(BOOL)isHostAvailable
{
    //return NO; // force for offline testing
    Reachability *hostReach = [Reachability reachabilityForInternetConnection];
    NetworkStatus netStatus = [hostReach currentReachabilityStatus];
    return !(netStatus == NotReachable);
} 
```

# android - 在android中更改代码中的大小布局

> ID：12278908
> 
> 赞同：0
> 
> 时间：2012-09-05T10:01:26.580
> 
> 标签：android, android-layout

我有一个关于调整布局的问题。这是我的活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    requestWindowFeature(Window.FEATURE_ACTION_BAR);
    setContentView(R.layout.log_in);

} 
```

如何在此活动中设置我的 R.layout.log_in 大小？我想将大小设置为 400x300，但在活动中不是 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:20:34.870

我不知道您的要求是什么，但我更喜欢在 xml 上设置尺寸（如果它们被认为是固定的）。

无论如何，[这](https://stackoverflow.com/questions/6798867/android-how-to-programmatically-set-the-size-of-a-layout)可能很有用。

链接中使用的代码：

```
// Gets linearlayout
LinearLayout layout = (LinearLayout)findViewById(R.id.numberPadLayout);
// Gets the layout params that will allow you to resize the layout
LayoutParams params = layout.getLayoutParams();
// Changes the height and width to the specified *pixels*
params.height = 300;
params.width = 400; 
```

# php - 静态内容的应用级负载均衡

> ID：12278913
> 
> 赞同：1
> 
> 时间：2012-09-05T10:01:35.050
> 
> 标签：php, hosting, load-balancing

我正在考虑为静态内容（即图像）制作一个穷人的应用程序级负载平衡器。我想知道这是否是最好的方法。让我用代码解释一下：

示例 HTML 页面：

```
<html>
<body>

<?=load_image('filename.jpg');

</body>
</html> 
```

PHP中的示例代码：

```
<?php

function load_image ($file)
{
    $server = get_current_server();
    update_next_server($server);        

    return '<img src="'.$server.$file.'" />';
}

function update_next_server ($server)
{
    $a[1] = 'server1.com';
    $a[2] = 'server2.com';
    $a[3] = 'server3.com';

    $server_id = array_search($server, $a); // example: if $server = 'server2.com' then this will return 2;

    // increment next server id
    $server_id = $server_id + 1; 

    // prevent going beyond valid server ids
    if ($server_id >= 3)
        $server_id  = 1; 

    $db->query('UPDATE tbl_next_server SET server_id = "'.$server_id.'" '); 
}

function get_current_server ()
{
    return $db->query('SELECT server_id FROM tbl_next_server');
} 
```

基本上，这假设相同的图像存储在所有三个服务器中，并且每次查看页面时它都会旋转服务器。

现在我的问题是，这是最好的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:42:49.623

在您的代码中 - 2 次查询图像一。是不是太多了？

您必须注意负载更多 - 数据库\文件系统\内存\处理器负载？取决于此解决方案可以通过多种方式提供。例如，如果数据库过载，您可以尝试将`last_server_used`值存储在磁盘上（例如，在会话存储中）。

P.S. Anyway *i dont see any reason* to output images\static(e.g.) *with any php code*. It's `nginx` job to output static content. So i highly recommend you to try write same balancer on other server configuration files.

# wcf - 带有 WCF 的 HTTPS 用于机器名称而不是 IP 地址

> ID：12278914
> 
> 赞同：0
> 
> 时间：2012-09-05T10:01:35.850
> 
> 标签：wcf, https

我正在尝试将我的自托管 WCF 服务设置为通过 HTTPS 运行。我大致按照[这篇 CodeProject 文章](http://www.codeproject.com/Articles/24027/SSL-with-Self-hosted-WCF-Service)中的描述做了：

1.  我为我创建了 CA 证书
2.  我使用第一步中的 CA 证书创建了 SSL 证书。
3.  我曾经`netsh`为 HTTPS 注册我的机器的 IP 地址和服务的端口

在 3\. 我使用了我机器的公共 IP 地址，因为我正在测试来自同一 WLAN 中移动设备的 SSL 通信。一切正常，客户端可以与服务器通信。

现在我还想使用另一个客户端从我的本地机器上进行测试。所以我再次执行了 1\. 到 3.，但是`CN=localhost`在`127.0.0.1`第 3 步中。如果我通过`https://127.0.0.1`. 但是，当我尝试使用时，`https://localhost`我收到一个错误，表明 HTTPS.SYS 的注册可能丢失 - 确实如此，因为我需要在上面的步骤 3 中使用 IP 地址。

我的问题是：虽然使用 IP 地址而不是机器名不是什么大问题，但我必须做些什么才能允许通过机器名访问我的 WCF 服务？

# java - 我可以在 Java 中创建一个没有标题按钮的窗口吗？

> ID：12278919
> 
> 赞同：2
> 
> 时间：2012-09-05T10:02:02.777
> 
> 标签：java, swing, window, jframe, jwindow

是否可以在 Java 中创建某种具有框架和边框但没有标题按钮（最小化、恢复、关闭）的 Window 对象。

当然，我无法使用该`undecorated`设置。此外，窗口需要：

*   有一个平台渲染的边框
*   有一个标题栏
*   没有**字幕按钮**。如果需要，我会以编程方式处理窗口。
*   使用默认值或`System`外观

这是一个例子：

![无字幕窗口](../Images/e3a7f25f459b4481d24838beebf6a884.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:39:47.967

这是关于

1.  体面的[如何创建半透明和异形的窗户](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)

2.  未装饰[Compound Borders](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)`JDialog`，然后您可以创建来自 Native OS 的类似或更好的 Borders

3.  创建`JPanel`（或`JLabel#opaque(true)`）`GradientPaint`

4.  或（更好`non_focusable`==我的观点）`JLabel`准备好`Icon`

5.  添加到/`JPanel`组件[移动器/组件调整大小](http://tips4java.wordpress.com/2009/06/14/moving-windows/)（注意，永远不要将这两个代码混合在一起）@camickr`JLabel`

6.  设置`Alpha Transparency`为绘画`JPanel`/`JLabel`伟大`look and feel`

7.  最简单的方法放在那里`JMenuBar`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T10:21:13.923

最简洁的答案是不。

更长的答案可能是，但您需要调查 JNI/JNA 实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:23:53.393

试试这个小例子。它将从 JFrame 中删除（不仅禁用）最小化、最大化和关闭按钮。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class Example {

    public void buildGUI() {
        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame();
        frame.setResizable(false);
        removeButtons(frame);
        JPanel panel = new JPanel(new GridBagLayout());
        JButton button = new JButton("Exit");
        panel.add(button,new GridBagConstraints());
        frame.getContentPane().add(panel);
        frame.setSize(400,300);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        button.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent a){
                System.exit(0);
            }
        });
    }

    public void removeButtons(Component comp) {
        if(comp instanceof AbstractButton) {
            comp.getParent().remove(comp);
        }
        if (comp instanceof Container) {
            Component[] comps = ((Container)comp).getComponents();
            for(int x=0, y=comps.length; x<y; x++) {
                removeButtons(comps[x]);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                new Example().buildGUI();
            }
        });
    }
} 
```

# ios - 与使用 box2d 的 iphone 相比，ipad 和 ipad 视网膜中的投掷、碰撞和下降速度问题

> ID：12278921
> 
> 赞同：0
> 
> 时间：2012-09-05T10:02:09.253
> 
> 标签：ios, cocos2d-iphone, box2d, box2d-iphone

我正在使用 box2d 为 ipad 和 iphone 创建一个像水果忍者这样的游戏。在 iphone 和 iphone 视网膜中，所有任务都在正确执行，但在 ipad 和 ipad 视网膜蔬菜投掷的情况下，与 iphone 和 iphone 视网膜相比，碰撞和下降速度非常小。有什么办法可以提高速度吗？iphone 和 ipad 使用相同的代码。

# nunit - ASP MVC 4 的 NUnit 测试框架

> ID：12278924
> 
> 赞同：1
> 
> 时间：2012-09-05T10:02:13.183
> 
> 标签：nunit, asp.net-mvc-4

如何在 asp.net mvc 4 中创建 nunit 测试项目？我已按照以下链接中的步骤进行操作

[http://www.geoffhudik.com/tech/2012/4/21/aspnet-mvc-4-nunit-template.html](http://www.geoffhudik.com/tech/2012/4/21/aspnet-mvc-4-nunit-template.html)

但是，我在创建 MVC 4 应用程序时找不到 NUnit 测试选项。但是对于 MVC 3 应用程序将显示此选项。

请任何人告诉我 MVC 4 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:48:48.747

现在事情要简单得多：

1.  在 VS2012 中，转到工具 - 扩展和更新 - 在线 - Visual Studio 库。
2.  搜索**NUnit**。
3.  选择**ASP.NET MVC NUnit**。
4.  点击**下载**。
5.  下载后，您需要重新启动 Visual Studio。

瞧，您已经拥有了此页面所追求的一切。

（我不确定，但我认为这仅适用于标准版及更高版本。请纠正我，如果这适用于快速版。）

# magento - 运输方法在 magento 1.7 中不起作用

> ID：12278925
> 
> 赞同：5
> 
> 时间：2012-09-05T10:02:17.067
> 
> 标签：magento, magento-1.7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:29:34.523

do you have any Checkout files modified on your project? Or maybe custom checkout. I will list the code locations you need to check to make sure your Shipping works correctly.

So to begin with: Magento has very special work process with Shipping rates - it's called "collectRates" and is some modification of pattern "composite".

To make sure that everything works correctly on the code basis you need to first check the Onepage.php model (app/code/core/Mage/Checkout/Model/Type/Onepage.php): lines 330, 341, 556, 616; There should be code

`{address}->setCollectShippingRates(true)`

where {address} is current address variable.

This code is significant for future "collectRates" processes, because just when the Onepage Checkout page is initializing the "collectRates" process has already been processed, and the flag "collect_shipping_rates" is set to "false". If it's not set back to true, the next "collectRates" process will not be performed.

After you check the location above, and it still doesn't work - you might want to add some logging to Mage_Checkout_Block_Onepage_Shipping_Method_Available::getShippingRates method. If method is properly executed and return some rates from $this->getAddress()->getGroupedAllShippingRates() call, there might be some issues with .phtml template on your locan theme (default path to .phtml is app/design/frontend/base/default/template/checkout/onepage/shipping_method/available.phtml).

Here's how you can log the outcome from `$this->getAddress()->getGroupedAllShippingRates()` call (`Mage_Checkout_Block_Onepage_Shipping_Method_Available::getShippingRates` method):

```
$groups = $this->getAddress()->getGroupedAllShippingRates();
$printGroupes = array();
    foreach ($groups as $code => $groupItems) {
        foreach ($groupItems as $item) {
            $printGroupes[$code][] = $item->getData();
        }
    }
Mage::log($printGroupes, null,'special.log'); 
```

Please note, that the result array with all rates will be logged into "special.log" under var/logs folder.

I wish I could be more of help, but the issue requires some digging into code, the debugger will be even more helpful than logging, if you can get hold of one.

Cheers!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:30:14.790

Price should be entered for Flat Rate shipping to work

The problem might be of the country selection

Ship to applicable countries is set to "Specific Country" and you selected "Canada".

So you will see this shipping method only if you select Canada on the frontend during the checkout.

Or

You can make this to All Countries and check whether its working or not.

# html - 如何在 textarea 中预填充文本，以及消失的“帮助提示”文本

> ID：12278928
> 
> 赞同：0
> 
> 时间：2012-09-05T10:02:17.020
> 
> 标签：html, forms, textarea

我知道如何预填充文本区域，但我也想在文本区域中有某些文本，纯粹是为了提示用户应该在某个部分写什么，例如：

```
System      ----- stays in text area to be sent with form
-----------
"Enter this specific type of info here" --- disappears when clicking to edit

Bug         ----- stays in text area to be sent with form
-----------   
"Enter only the bug report" --- disappears when clicking to edit 
```

因此，只有用户添加的文本和诸如 Bug 和 System 之类的标题会以 textarea 所在的形式发送，而不是“帮助提示”文本。是的，我可以有不同的字段，但客户希望它们都在一个文本区域中。无法想象一种无痛的方式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:05:03.150

听起来像是[占位符属性](http://www.w3.org/TR/html5/common-input-element-attributes.html#the-placeholder-attribute)的工作。

```
<label for="bug">Bug</label>
<textarea name="bug" id="bug" placeholder="Enter only the bug report"></textarea> 
```

它不适用于[旧版浏览器](http://caniuse.com/#search=placeholder)，但它是完成该字段*不需要的咨询信息。*

观看[现场演示](http://jsfiddle.net/cWy34/)。

# oracle - Oracle：MIN() 语句导致空行返回

> ID：12278930
> 
> 赞同：1
> 
> 时间：2012-09-05T10:02:20.327
> 
> 标签：oracle

我在对查询返回的数据进行排序时遇到了一个小问题，目的是获取数据集中最旧的更新值，以便我只能更新该记录。这就是我正在做的事情：

```
WHERE ROWNUM = 1 AND TABLE1.ID != V_IGNOREID 
AND TABLE1.LASTREADTIME = (SELECT MIN(TABLE1.LASTREADTIME) FROM TABLE1)
ORDER BY TABLE1.LASTREADTIME DESC; 
```

是否包含该`ORDER BY`语句没有区别。如果我只使用 ROWNUM 和相等性检查，我会得到数据，但它只在两行之间交替，这就是我尝试使用 LASTREADTIME 数据的原因（以便我可以修改多于这两行）。有人对此有任何想法，或者对我如何有效地使用 MIN 功能有任何建议吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:21:16.380

```
select * from (
-- your original select without rownum and with order by
)
WHERE ROWNUM = 1 
```

**编辑**一些解释

我认为该`order by`子句应用于该`where`子句之后的结果集。因此，如果 与`rownum = 1`位于同一选择语句中`order by`，那么它将首先应用，并且`order by`将仅排序 1 行，这将是无序结果集的第一行。

# c++ - 是否可以将变量指定为静态分配的整数数组的大小说明符？

> ID：12278934
> 
> 赞同：0
> 
> 时间：2012-09-05T10:02:34.730
> 
> 标签：c++, compilation, static-array

令我惊讶的是，这段代码可以完美地编译并运行而不会引发任何错误！

```
int arraysize = 1000;
int array[arraysize];
for(int i=0; i<arraysize; i++)
{
    array[i] = i+1;
}

for(int i=0; i<arraysize; i++)
{
    cout << array[i];
} 
```

编辑：使用的编译器：i386-linux-gnueabi-g++ (Linaro GCC 4.5-2012.01) 4.5.4 20120105 (prerelease)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:06:11.607

在 C++ 中，数组的大小必须是常数。如果您要声明 size 变量`const`，则可以使用它。

C 允许可变长度数组（有时称为 VLA），一些 C++ 编译器将这些作为扩展提供；这就是您的代码有效的原因。

通常，`std::vector`如果您需要动态大小的数组，这是一种更安全、更便携的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:06:17.297

这可能是您的编译器（GCC ？）的一个特性，它允许 C99 可变长度数组。在 C99 中，定义数组是有效的，例如

```
int n;
scanf("%d", &n);
int array[n]; 
```

按照标准，C++ 不支持可变长度数组，可能是因为它有更好的替代方案，即`std::vector<>`. 尝试编译，`g++ -pedantic-errors file.cpp`你会收到

```
error: ISO C++ forbids variable-size array ‘array’ 
```

应该注意的是，可变长度数组不支持 C++ 类，这是在 C++ 中不用它们的另一个原因，而是使用`std::vector<>`.

# mysql - 不存在的 MySQL 多插入查询

> ID：12278941
> 
> 赞同：4
> 
> 时间：2012-09-05T10:02:53.730
> 
> 标签：mysql, sql, entity-relationship

更新和回答感谢并感谢@ypercube

答案在下面，我冒昧地发布它，因为它出现在我的 PHP 中有一个助手，我正在使用 PDO

```
 INSERT INTO `users_relationship` (`profile_1_id`, `profile_2_id` ,`request_date`,`auth_token`,`status`, `updated`, `deleted`)
    VALUES
        (:uid, :fid, '$now', '$fToken', 0, '$now',0),
        (:fid, :uid, '$now', '$fToken', 0, '$now',0)
    ON DUPLICATE KEY UPDATE request_date = VALUES(request_date), auth_token = VALUES(auth_token), updated = VALUES(updated), deleted = VALUES (deleted); 
```

* * *

我有一个令我困惑的 MySQL 查询，要求是我需要一次在表中创建行但是这些行可能已经存在，所以我需要更新这一行中的一些列而不是插入重复项。

例子

Justin (2) 与 Ben (5) 相关，然后通过更新数据库中 profile_1_id 为 2 或 5 的行并将标志插入到已删除列中来终止关系。Ben 然后尝试重新点燃关系，因此我们需要再次更新行并删除已删除的标志并更新 request_date、auth_token 并使用新值更新。

我写了以下内容，但它没有触发错误：

> 重复的列名“2012-09-05 10:13:06”

```
INSERT INTO `users_relationship` (`profile_1_id`, `profile_2_id`,`request_date`,`auth_token`,`status`, `updated`, `deleted`)
    SELECT * FROM 
        (SELECT 2, 5, '2012-09-05 10:13:06', 'SQLTEST', 0, '2012-09-05 10:13:06', 0) AS faTmp,
        (SELECT 5, 2, '2012-09-05 10:13:06', 'SQLTEST', 0, '2012-09-05 10:13:06', 0) AS fTmp
    WHERE NOT EXISTS 
        (SELECT  * FROM `users_relationship`WHERE `profile_1_id`=2 AND `profile_2_id` =5) OR 
        (SELECT  * FROM `users_relationship`WHERE `profile_1_id`=5 AND `profile_2_id` =2) LIMIT 1 
```

我是在正确的道路上还是有更好的方法来做到这一点？

谢谢

贾斯汀

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T10:06:58.640

最好的方法似乎是添加一个`UNIQUE`约束`(profile_1_id, profile_2_id)`然后使用：

```
INSERT INTO `users_relationship` 
  (`profile_1_id`, `profile_2_id`
  ,`request_date`,`auth_token`,`status`, `updated`, `deleted`)
VALUES
  (2, 5, '2012-09-05 10:13:06', 'SQLTEST', 0, '2012-09-05 10:13:06', 0),
  (5, 2, '2012-09-05 10:13:06', 'SQLTEST', 0, '2012-09-05 10:13:06', 0) 
ON DUPLICATE KEY UPDATE
  request_date = VALUES(request_date)          --- what you want to happen
, auth_token = VALUES(auth_token)              --- when rows exist
  --- ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:05:39.060

你可以这样做，但语法是

```
 WHERE NOT EXISTS  
        (SELECT  * FROM `users_relationship`WHERE `profile_1_id`=2 AND `profile_2_id` =5) 
 AND  
 NOT EXISTS  
        (SELECT  * FROM `users_relationship`WHERE `profile_1_id`=5 AND `profile_2_id` =2) 
```

# php - 日期函数的奇怪行为

> ID：12278943
> 
> 赞同：4
> 
> 时间：2012-09-05T10:02:57.940
> 
> 标签：php, date, strtotime

我今天在 StackOverflow 上遇到了这个问题，但没有得到答案。

我的问题是

```
echo date('Y-m-d',strtotime('2012-september-09')); // output - 2012-09-01

echo date('Y-m-d',strtotime('09-september-2012')); // output - 2012-09-09 
```

[**键盘**](http://codepad.org/TzyUp9NK)

我很困惑为什么第一种格式不能产生正确的答案。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T10:08:23.877

从[手册](http://php.net/manual/en/function.strtotime.php)：

*如果分隔符是斜线 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T10:10:05.367

这不是`date`函数的行为，而是`strtotime`. [`strtotime`](http://php.net/manual/en/function.strtotime.php)只能处理[日期格式](http://php.net/manual/en/datetime.formats.date.php)手册页上列出的特定格式的日期。`09-september-2012`采用此处列出的`dd ([ \t.-])* m ([ \t.-])* y`格式，但`2012-september-09`与任何受支持的格式都不匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:14:13.480

我认为在你的代码中，

```
echo date('Y-m-d',strtotime('2012-september-09')); 
```

`strtotime('2012-september-09')`不是日期函数的有效格式**('2012-september-09')**。`strtotime()`

请参阅此链接[http://www.php.net/manual/en/datetime.formats.date.php](http://www.php.net/manual/en/datetime.formats.date.php)

# android - Android layout_height 不 wrap_content

> ID：12278949
> 
> 赞同：1
> 
> 时间：2012-09-05T10:03:18.127
> 
> 标签：android, layout

我有一个看起来像这样的 XML 布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <RelativeLayout
        android:id="@+id/toppane"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentTop="true" >
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/bottompane"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true">
        <Button
            android:id="@+id/genericbutton"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_alignParentBottom="true" />
        <Button
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_above="@id/genericbutton" />
        <Button
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_toRightOf="@id/genericbutton"
            android:layout_alignTop="@id/genericbutton" />
    </RelativeLayout>   
</RelativeLayout> 
```

我希望底部窗格将其内容包装在宽度和高度上。

底部窗格上的 Wrap_content 适用于宽度（总共 100dp），但 wrap_content 似乎不适用于高度。bottompane 获取父级的高度，因此 toppane 甚至不可见。

为什么会这样？我错过了什么或做错了什么？

编辑：图片很快就会出现。我想要实现的是底部面板具有简单地包装其内容的高度。所以不要高于彼此上方的两个按钮（100dp），顶部面板填充底部面板上方的其余空间，一直到它与父级对齐。

EDIT2：[图像 http://img405.imageshack.us/img405/9871/wrapcontent.png](http://img405.imageshack.us/img405/9871/wrapcontent.png) 蓝线是布局，尽管高度设置为 wrap_content。红线是应该的（只是包装内容）。绿线是toppane的布局方式（粘在bottompane的顶部）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:45:23.327

在 RelativeLayout 中不能有 alignParenBottom 和 wrap_content 的孩子。解释在[这里](https://stackoverflow.com/questions/6486214/relativelayout-is-taking-fullscreen-for-wrap-content-wt)

一种可能的解决方案是嵌套 LinearLayouts

```
<RelativeLayout
    android:id="@+id/toppane"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/bottompane"
    android:layout_alignParentTop="true" >
</RelativeLayout>

<LinearLayout
    android:id="@+id/bottompane"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:layout_width="50dp"
            android:layout_height="50dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:layout_width="50dp"
            android:layout_height="50dp" />

        <Button
            android:layout_width="50dp"
            android:layout_height="50dp" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:49:43.290

用这个替换你的 `buttons`位置和关系

```
<Button
            android:id="@+id/firstButton"
            android:layout_width="50dp"
            android:layout_height="50dp"/>

        <Button
            android:id="@+id/genericbutton"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_below="@+id/firstButton" />

        <Button
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_below="@+id/firstButton"
            android:layout_toRightOf="@id/genericbutton" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:06:47.860

尝试用垂直线性布局替换您的父相对布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <RelativeLayout
        android:id="@+id/toppane"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentTop="true" >
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/bottompane"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true">
        <Button
            android:id="@+id/genericbutton"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_alignParentBottom="true" />
        <Button
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_above="@id/genericbutton" />
        <Button
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_toRightOf="@id/genericbutton"
            android:layout_alignTop="@id/genericbutton" />
    </RelativeLayout>   
</LinearLayout> 
```

# javascript - facebook点击登录

> ID：12278950
> 
> 赞同：0
> 
> 时间：2012-09-05T10:03:19.823
> 
> 标签：javascript, facebook, facebook-login

我有以下代码（javascript）

```
 <script>
            window.fbAsyncInit = function() {
            FB.init({
              appId: '<?=$this->facebook->getAppID()?>', 
              cookie: true, 
              xfbml: true,
              oauth: true
            });

            FB.Event.subscribe('auth.login', function(response) {
                loading();
                alert("test");
                window.location = throute + "login/index/fblogin";                
            });

            FB.Event.subscribe('auth.logout', function(response) {
                window.location.reload();
            });

            FB.Event.subscribe('auth.authResponseChange', function(response) {
                if (response.status=="connected") {
                    alert("test");
                    window.location = throute + "login/index/fblogin";
                }
            });
        };
        (function() {
            var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol +
              '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
        }());       
      </script> 
```

如果用户没有登录 fb，一切都很好。

我的问题是，如果用户已经在 fb 上登录，他在访问它时会自动登录到站点。单击“登录”按钮后，我需要他登录。

泰寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:04:40.150

只需在用户单击您的登录按钮时初始化 FB 应用程序。我猜你正在使用[facebooks 自己的 loginbutton](http://developers.facebook.com/docs/reference/plugins/login/)，你不需要这样做。

```
('#loginButton').click(function(){
     FB.init({
          appId: '<?=$this->facebook->getAppID()?>', 
          cookie: true, 
          xfbml: true,
          oauth: true
        });
    //the rest of the code follows here
}); 
```

将会发生的情况是，如果用户已经在 Facebook 上登录，他们将在按下您的按钮后直接登录。

如果用户未在 Facebook 上登录，则在单击您的按钮时将出现登录对话框。

# xcode - NSTreeController、NSOutlineview 和核心数据

> ID：12278952
> 
> 赞同：0
> 
> 时间：2012-09-05T10:03:31.157
> 
> 标签：xcode, core-data

我发现尝试从 NSTreeController 填充 NSOutlineView 有点迷失，我可以看到带有数据的树，但叶节点具有与父节点相同的数据。

我已经阅读了大量关于此的参考资料，但我觉得有点过热，无法弄清楚我不理解什么。

我的模型是：

-- 文件
-- 数字（文件内容）

我不能直接发布图片，因为我没有足够的声誉^^。

模型关系[scr1](https://skitch.com/rubs/etib4/partenon-file-handler.xcodeproj-partenon-file-handler-model.xcdatamodel)

TreeController managedObjectContext 绑定：

-- Key Paths -> Children: lineas -- Object Controller -> Mode: Entity Name -> Entity Name: File -> Prepares Content

NSOutlineView 表格单元绑定

-- 绑定值 -> TreeController -> 控制器键：fecha

结果[src2](https://skitch.com/rubs/etidd/partenon-file-handler)

我先谢谢大家了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T02:45:26.933

似乎您没有设置谓词来过滤掉孩子。在 Interface Builder 中选择 treecontroller，在属性检查器中，将谓词文本字段设置为，例如 parent == nil

# javascript - iOS Safari Javascript setTimeout 问题

> ID：12278955
> 
> 赞同：0
> 
> 时间：2012-09-05T10:03:37.380
> 
> 标签：javascript, jquery, ios, safari, settimeout

我遇到了在移动 safari 上正确执行的 javascript 方法 setTimeout() 的问题。

我的代码如下：

```
function addBlock() {
  if(i < full) {
    $('#box-'+i).removeClass('empty');
    $('#box-'+i).addClass('full');
    i++;
    setTimeout(addBlock, 20);
  }
  else {
    if(fullcheck != Math.round(fullcheck)) {
      i = i++;
      $('#box-'+i).removeClass('empty');
//      $('#box-'+i).addClass('halfbox');

      $('#total-count').animate({height: barheight}, 5000);

    }
    if(usergiven) {
      $('#box-'+randbox).css('border', '1px SOLID #FF0000');  
      $('#box-'+randbox).css('background-color', '#FF0000');  
    }
  }
} 
```

无论我为 setTimeout 函数提供什么超时值，它似乎总是以相同的速度运行。

这个想法是它以比每 2 秒 1 更快的速度填充一组块（实际数量应该是每秒 50 iirc 左右）。

谁能告诉我为什么移动 safari 没有正确执行这个功能或者我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T13:45:56.147

关于这个问题，有很多事情很难解释。一个是没有声明的变量数量或没有注释它们应该做什么的表达式（如`fullcheck != Math.round(fullcheck)`.WTF！？），另一个是该代码的行为方式与您希望它的行为方式相反。

由于代码不完整且不可运行，因此只需猜测您的意思。我猜你是说代码在大约两秒内完成，就像现在一样，你希望它在五十秒内完成。

在不知道的值的情况下`i`，`full`不可能对正确的超时时间进行任何计算，所以我必须猜测你做错了什么。以当前 20 毫秒的超时速率，您每秒将处理大约 500 行。如果它当前在两秒内运行，这意味着您有 4000 行。如果它们应该在 50 秒内填满，则您必须将超时时间提高到 500 毫秒。

# html - 如何使用样式标签来更改导航标签中的链接？

> ID：12278965
> 
> 赞同：0
> 
> 时间：2012-09-05T10:03:59.483
> 
> 标签：html, hyperlink, nav

我是 html 的新手，并试图通过在线教程来解决这个问题。我有一个水平穿过页面顶部的菜单栏。现在我在 div 标签中有菜单栏，在内容中，我有

```
<nav>
 <li>
 <a id="l1" href="whatever.com/about/">About</a>
 <a id="l2" href="whatever.com/content/">Content</a>
 <a id="l3" href="whatever.com/history/">History</a>
 <a id="l4" href="whatever.com/Team/">Team</a> 
 </li>
</nav> 
```

我想定位链接并更改字体，我的印象是我会使用以下格式：

```
<style>
.l1
{
position:relative;
top:5px;
right:30px;
}
</style> 
```

但是，这似乎不起作用，我找不到任何有用的教程。任何人都可以就如何正确设置链接的格式和样式给我建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:06:33.027

您在 CSS 中使用的点表示法用于类，而不是 ID，这应该有效：

```
<nav>
 <ul>
  <li><a class="l1" href="whatever.com/about/">About</a></li>
  <li><a class="l2" href="whatever.com/content/">Content</a></li>
  <li><a class="l3" href="whatever.com/history/">History</a></li>
  <li><a class="l4" href="yabidu.com/Team/">Team</a></li>
 </ul>
</nav> 
```

元素上的ID`id="foo"`在 CSS 中使用 访问`#foo`，它们也应该是完全唯一的，因此页面上的任何元素 ID 都不应该相同。另一方面，类`class="bar"`可以被多次使用，并且可以在 CSS 中使用`.bar`.

您还使用了无效的语法，`<li>`（列表项）始终应该直接位于`<ul>`（无序列表）或`<ol>`（有序列表）内部，我也为您修复了您的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:08:43.713

你的 HTML5 系统税是错误的..

```
<nav>
<ul>
<li><a href="#">LINK<a></li>
.....
</ul>
</nav> 
```

并访问 li 元素，使用

```
nav ul li a {
font-size:20px;
font-weight:bold;
position:relative;
top:XX;
left:XX;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:08:52.107

**解决方案1：**

**HTML：**

```
<nav>
    <a href="whatever.com/about/">About</a> 
    <a href="whatever.com/content/">Content</a>
    <a href="whatever.com/history/">History</a>
    <a href="yabidu.com/Team/">Team</a> 
</nav> 
```

**CSS：**

```
nav a {
    float: left;
    padding: 0 20px;
}​  ​ 
```

[**演示 1**](http://jsfiddle.net/akhurshid/HZWga/)

**解决方案2：**

**HTML：**

```
<nav>
    <ul>
        <li>
            <a href="whatever.com/about/">About</a> 
        </li>
        <li>
           <a href="whatever.com/content/">Content</a>
        </li>
        <li> 
           <a href="whatever.com/history/">History</a>
        </li>
        <li>
           <a href="yabidu.com/Team/">Team</a> 
        </li>
    </ul>
</nav> 
```

**CSS：**

```
nav ul {
    margin: 0px;
    padding: 0px;
    list-style-type: none;
}​     

nav ul li {
    float: left;
    padding: 0 20px;
    list-style: none;
}​  ​ 
```

[**演示 2**](http://jsfiddle.net/akhurshid/HZWga/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:23:52.933

在此上下文中`li`，不允许元素作为元素的子元素。`nav`

可以使用元素 li 的上下文：

*   内部`ol`元素。
*   内部`ul`元素。
*   内部`menu`元素

HTML：

```
<nav>
    <ul>
        <li><a href="whatever.com/about/">About</a></li>
        <li><a href="whatever.com/about/">Content</a></li>
        <li><a href="whatever.com/about/">History</a></li>
        <li><a href="whatever.com/about/">Team</a></li>
    </ul>
</nav> 
```

不要将 id 用于样式元素（仅在必要时使用）。

使用 CSS 选择器：

```
nav ul li a { ... } 
```

或者如果您有兴趣`a`在`li`元素中设置子元素的样式：

```
nav li > a { ... } 
```

对于内联显示`li`元素，您必须添加下一个样式

```
nav li {
    display: inline-block;
    *display: inline; // fix for ie7
} 
```

或者`float:left`相反`display:inline-block;`

# c# - 简化用户名的正则表达式

> ID：12278966
> 
> 赞同：1
> 
> 时间：2012-09-05T10:04:01.057
> 
> 标签：c#, regex

我有一个相当复杂的用户名验证规则，我希望有人可以帮助我改进我的正则表达式。规则是：

用户可以使用他的 15 位唯一 ID 登录

***或者***

使用遵循以下规则的用户名登录：

*   可以包含希腊语和英语（大写和小写）字符
*   可以包含数字
*   可以包含符号：!@#$*_
*   长度：至少 7 个。最多 14 个
*   必须包含至少 5 个字符（来自前面所述的英文、希腊文和符号字符）和至少 2 个数字

现在这是我创造的野兽

```
^\d{15}$|^(?=[a-zA-z0-9\p{IsGreekandCoptic}!@#$*_]{7,14}$)(?=.*[0-9].*[0-9])(?=.*[a-zA-z\p{IsGreekandCoptic}!@#$*_].*[a-zA-z\p{IsGreekandCoptic}!@#$*_].*[a-zA-z\p{IsGreekandCoptic}!@#$*_].*[a-zA-z\p{IsGreekandCoptic}!@#$*_].*[a-zA-z\p{IsGreekandCoptic}!@#$*_]).* 
```

虽然这行得通，但我希望能做得更好。我正在用 C# 编写

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:11:53.620

我会把这个怪物分成一系列的检查。可以使用相对简单的正则表达式检查前三个项目，而后两个项目最好通过命令式完成：

```
if(username.Length < 7 || username.Length > 14) return false;
if(username.CountDigits() < 2) return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:26:48.307

如果您没有优化速度，这是一个仅使用正则表达式的更易于维护的版本：

```
bool valid = Regex.IsMatch(s, @"^\d{15}$|^(?=[a-zA-z0-9\p{IsGreekandCoptic}!@#$*_]{7,14}$)") &&
             Regex.Matches(s, @"\d").Count >= 2 &&
             Regex.Matches(s, @"[a-zA-z\p{IsGreekandCoptic}!@#$*_]").Count >= 5; 
```

# vb.net - vb.net Ftp Client - 获取 ftp 欢迎消息（以及来自 FTP 服务器的其他消息）

> ID：12278967
> 
> 赞同：0
> 
> 时间：2012-09-05T10:04:05.490
> 
> 标签：vb.net, ftp, message, ftpwebrequest

这是我在这里的第一条信息。我是编程菜鸟，我需要一些帮助。

我创建了一个自定义 ftp 应用程序。我可以使用***ftpwebrequest***方法从服务器登录和下载文件，但是我找不到读取和显示 ftp 的服务器欢迎消息和其他消息的方法。

我需要一种获取登录失败消息的方法，以便在程序界面上显示警告消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:07:46.460

我想你想要的`FtpWebResponse.BannerMessage`财产。请参阅[http://msdn.microsoft.com/en-us/library/system.net.ftpwebresponse.bannermessage%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebresponse.bannermessage%28v=vs.90%29.aspx)。

# mongodb - Mongo/No SQL 解决二层数据查询？

> ID：12278969
> 
> 赞同：0
> 
> 时间：2012-09-05T10:04:15.867
> 
> 标签：mongodb, join, reference, nosql

我有一个现有的 PostgreSQL 数据库，其中包含大约 500,000 个条目，每个条目本质上是一个巨大的类别树中的一个类别（每个类别都有不同的元素模式）。

我还有一个 MySQL 数据库，它包含大约 100,000 个文档，每个文档都可以是一个或多个类别中的类别。

我需要能够搜索与文档链接到的类别中设置的属性过滤器匹配的文档。

据我了解，我必须将与文档链接到的所有类别相关的所有数据存储在每个文档中，在 mongo 中，这看起来很疯狂。我怎样才能使这项工作？

例如，想象一个类别，它代表 1964 年制造的红色汽车，以及 1990 年编写的关于那辆红色汽车的文档。我需要能够搜索 1964 年并细化关于汽车的文件，以及汽车本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:15:46.100

MongoDB 中的 n:m 关系可以用数据库引用数组 (DBRef) 或对象 ID 数组来表示。

因此，每个文档都会有一个“类别”字段，其中包含一个数组，其中包含其所属类别的 ID 或数据库引用。

有关详细信息，请参阅本文：http: [//docs.mongodb.org/manual/applications/database-references/](http://docs.mongodb.org/manual/applications/database-references/)

避免执行多个数据库查询只是为了显示类别名称的替代方法是将类别名称放在该数组中而不是 ID 中。然后，您还应该为您的类别集合的名称字段添加一个索引（使用 ensureIndex 函数）以加快查找速度（无论如何，您可能希望在此字段上创建一个唯一索引以避免重复的类别名称）。

关于对象具有的数据，因为它属于一个类别，例如具有制造商的汽车和具有文档中提到的其他对象列表的文档：此数据应直接放入对象的文档中。面向文档的数据库的优点是并非每个实体都必须具有相同的字段。

# c# - 业务逻辑层应该访问数据库/数据访问层吗？

> ID：12278972
> 
> 赞同：4
> 
> 时间：2012-09-05T10:04:18.987
> 
> 标签：c#, design-patterns, data-access-layer, business-logic-layer

我对 BLL 和 DAL 的关系有点困惑。BLL 是否应该通过依赖注入封装 DAL？或者 BLL 是否应该只作用于域对象和 DAL 分别保存/更新？

例如，想象（在典型的 MVC 应用程序中）一个取消订单功能，要求您更新订单并更新库存。以下是我的行动的样子吗？

```
public ActionResult CancelOrder (Guid orderId) {
    Order order = orderRepository.Get(orderId);
    StockItem stockItem = stockRepository.Get(order.StockItemId);

    _orderService.CancelOrder(order, stockItem);
    orderRepository.Update(order);
    orderRepository.Update(stock);
    Return View();
} 
```

还是应该更像以下？

```
public ActionResult CancelOrder (Guid orderId) {
    _orderService.CancelOrder(orderId);
    Return View();
}

(within OrderService)
public void CancelOrder(Guid orderId) {
    Order order = orderRepository.Get(orderId);
    StockItem stockItem = stockRepository.Get(order.StockItemId);

    order.Cancelled = true;
    stockItem.AmountInStock = stockItem.AmountInStock + order.Amount;
    orderRepository.Update(order);
    orderRepository.Update(stock);
} 
```

使用此选项，所有内容都将由 BLL 处理，包括数据访问。将注入存储库以避免紧密耦合。然后，任何实体检索都将采用与`_orderService.GetOrder(orderId);`直接进入存储库不同的形式。

请原谅这些例子的粗俗，因为我没有很多时间。我写的任何东西都有意义吗？还是我在荒野中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T10:08:14.977

绝对不是第一个选项，它将您的业务逻辑嵌入到控制器中。问题不在于控制器本身访问数据对象，而在于必须遵循由业务规则规定的程序。此过程在控制器中没有位置。

因此，您应该选择第二个选项，或者可能制作`Cancel`一个`Order`. 如果您已经编写过类似的代码，请保持一致性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:19:19.200

考虑关注点分离，Controller 来自 MVC 模式，即 PRESENTATION 模式，因此控制器应该包含支持表示层的表示逻辑，而不是业务逻辑。

一致认为业务逻辑应该在域实体中，但也有一些 APPLICATION 逻辑充当存储库之间的协调者，这就是为什么服务层在路上被淘汰的原因。

因此，选项 2 应该是你的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:49:30.953

你真的在这里问了两个问题：

**控制器与业务层应该是什么？**

=> 我倾向于认为您的第一个片段中的代码是应用程序层服务的正确责任级别（如果您承认可以将两者相提并论，那么对于控制器来说，这有很多关于这些时间的讨论）。从存储库中获取`Order`并在取消操作后保存它看起来不像是纯粹的业务逻辑。它更多地与周围的事务/工作单元和用例的管道有关。

我只想更改一件事 - 尝试一次将更改保存到受您的交易影响的所有实体。如果您必须手动更新可能在操作结束时更改的每个实体，这将是一个很大的痛苦，并且会不必要地污染控制器。创建一个工作单元系统（或使用现有的实现），它将一次保留所有更改并删除存储库中的所有 Update() 方法。

除此之外，正如 Jon 所建议的那样，我还相信`Order`包含该方法的富域对象`Cancel()`比服务更可取 - 但这是另一个争论。

**BLL 和 DAL 之间应该有什么样的关系？**

=> BLL 不应该与 DAL 紧密耦合，并且作为最中心的层，它不应该直接引用外层。这样，您可以轻松地在另一个应用程序、另一个 DAL 等中重用您的 BLL。

但是，有时某些业务对象需要直接访问它们还没有引用的其他对象，这基本上意味着从数据库中获取它们。换句话说，BLL 中的某些操作需要与存储库通信。因此，我总是将存储库*接口*放在 BLL 中，但它们的*实现*驻留在 DAL 中，并在运行时注入到 BLL 中。

因此，BLL 只是松散地耦合到 DAL。它仍然*对持久性一无所知*，因为它只操纵看起来像中性对象集合的外观（存储库），并且不知道数据是如何存储、水合等的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:07:30.897

BLL 应该作用于您为应用程序创建的业务对象。理想情况下，它不应该知道数据库和相关操作。如果您希望保持松散耦合，请使用依赖注入从 DAL 调用方法。

# hibernate - 通过休眠查询获取列名

> ID：12278973
> 
> 赞同：1
> 
> 时间：2012-09-05T10:04:22.043
> 
> 标签：hibernate

```
Query query = this.getSession().createSQLQuery(sqlQuery);       
query.setResultTransformer(new AliasToEntityMapResultTransformer());

List results = query.list(); 
```

在上面的代码中，`results`包含 Map 的元素，我可以通过 Map 的键获取列名，但是如您所知，`query.list()`返回 HashMap 的元素，这就是为什么列名的排序不按顺序，我希望列名基于 sql -查询序列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-15T21:21:59.377

这是一个非常古老的问题，但对于为什么变压器中还没有这样的东西有点令人烦恼。

使用转换器运行查询：

```
Query sqlQuery = session.createSQLQuery(sqlStatement);
sqlQuery.setResultTransformer(AliasToEntityLinkedMapResultTransformer.INSTANCE);

List results = query.list(); 
```

对于转换器，我扩展了 BasicTransformerAdapter，而不是 AliasToEntityMapResultTransformer。

```
import org.hibernate.transform.BasicTransformerAdapter

public class AliasToEntityLinkedMapResultTransformer extends BasicTransformerAdapter implements Serializable {
    public static final AliasToEntityLinkedMapResultTransformer INSTANCE = new AliasToEntityLinkedMapResultTransformer();

    private AliasToEntityLinkedMapResultTransformer() {

    }

    public Object transformTuple(Object[] tuple, String[] aliases) {
        Map result = new LinkedHashMap(tuple.length)
        for (int i = 0; i < tuple.length; i++) {
            String alias = aliases[i]
            if (alias != null) {
                result.put(alias, tuple[i])
            }
        }

        return result;
    }

    private Object readResolve() {
        return INSTANCE
    }

    public boolean equals(Object other) {
        return other != null && AliasToEntityLinkedMapResultTransformer.class.isInstance(other)
    }

    public int hashCode() {
        return getClass().getName().hashCode()
    }
} 
```

没有什么革命性的或直截了当的，但它确实存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:09:45.990

`AliasToEntityLinkedMapResultTransformer`以 的代码`AliasToEntityMapResultTransformer`为例，实现您自己的 ，但使用 a`LinkedHashMap`而不是 a `HashMap`。`LinkedHashMap`保留插入顺序。

# stata - 如何导出表格

> ID：12278976
> 
> 赞同：2
> 
> 时间：2012-09-05T10:04:25.647
> 
> 标签：stata

我有一个小项目，我需要以各种方式将具有频率的数据集制成表格，并将这些表导出到大型 Excel 工作表中。不幸的是，复制和粘贴会截断文本标签并给我们带来许多其他问题。

有没有办法将结果保存/导出为[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)或 Excel 格式？

也就是说，类似于[R](http://en.wikipedia.org/wiki/R_%28programming_language%29)`write.table`中的命令，我无法在工作中安装。

* * *

**更新1：**

Stata 常见问题解答提供了三个对我们有用的解决方案：http: [//www.stata.com/support/faqs/data-management/copying-tables/](http://www.stata.com/support/faqs/data-management/copying-tables/)，但 Stata 支持人员在指向常见问题解答后不久发送了一封后续邮件一个指向 tabout 的链接和教程显示了一些非常漂亮的表格。

![教程中的表格](../Images/a68fb7bee8425c167139eba0d05d133c.png)

我们在制表方面取得了一些进展，但我们不确定它是否能满足我们的所有需求，但到目前为止，使用制表 D7 test.xls 创建制表效果很好，尽管没有任何适当的标签对齐，比如你会得到生成[LaTeX](http://en.wikipedia.org/wiki/LaTeX)。

* * *

**更新 2：**

好的，所以很多表并不像 tabulate 和 by 命令组合那样简单 - 需要一些编程（在当前的 Stata 技能水平下没有完成）。缺乏对仅导出任何结果的本机支持是一个真正的痛苦！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T02:46:39.380

当想要表格输出到任何东西时，无论是`tabulate`or`regress`还是`clogit`，我总是关闭当前`log`文件并开始一个新文件，不是`.smcl`格式而是`.log`后缀，这很方便，因为通常我想保留很多`clogit`返回的值

类似于...的东西

```
*close logs even if there isn't any
capture log close
log using NAMEOFOUTPUT.log 
```

做类似`tab`或`reg`或的事情`clogit`

```
log close 
```

任何命令的列表结果都将在该`.log`文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T22:20:30.267

`outreg`不会起作用，因为它仅适用于估计（类似回归）结果。`xml_tab`可能会产生任何你喜欢`findit xml_tab`的东西（安装）。显然，您可以`export excel`使用您的数据，但如果您需要频率表，您可能首先需要`collapse (count) ..., by(varlist)`您的数据。（但我讨厌`collapse`，因为我认为你需要销毁和重新加载数据是一个糟糕的主意；这是一个例子，其中 R 的对象概念比 Stata 一次只有一个数据集在内存中的想法更方便。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:54:36.883

outreg 会是一个解决方案吗？ [http://www.kellogg.northwestern.edu/rc/stata-outreg.htm](http://www.kellogg.northwestern.edu/rc/stata-outreg.htm)

由于上面只会做回归表，所以 estout 是一个不错的选择。并且命令 estpost，我相信会为表格创建表格： [http ://repec.org/bocode/e/estout/estpost.html](http://repec.org/bocode/e/estout/estpost.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T14:01:24.137

对于一种方式，频率表`fre`模块也可以非常方便。输出可以写入制表符分隔的表格和 LaTeX。

```
 sysuse auto, clear

    fre rep78

    rep78 -- Repair Record 1978
    -----------------------------------------------------------
                  |      Freq.    Percent      Valid       Cum.
    --------------+--------------------------------------------
    Valid   1     |          2       2.70       2.90       2.90
            2     |          8      10.81      11.59      14.49
            3     |         30      40.54      43.48      57.97
            4     |         18      24.32      26.09      84.06
            5     |         11      14.86      15.94     100.00
            Total |         69      93.24     100.00
    Missing .     |          5       6.76
    Total         |         74     100.00
    ----------------------------------------------------------- 
```

下载和更多关于 SSC 的信息：

[http://ideas.repec.org/c/boc/bocode/s456835.html](http://ideas.repec.org/c/boc/bocode/s456835.html)

# c# - 将 n 个 DataTable 组合成一个 DataTable

> ID：12278978
> 
> 赞同：19
> 
> 时间：2012-09-05T10:04:29.637
> 
> 标签：c#, datatable

所有，对此有一些问题，但我似乎无法提取足够的信息来解决我的问题。我将未知数量的表提取到 SQL Server 'Tab1'、'Tab2'、'Tab3'、...、'TabN' 中。这些表中的列不同，但行定义相同。我需要将服务器中的所有数据拉入 N `DataTable`s，然后将它们组合成一个`DataTable`. 我目前做的是

```
int nTmpVolTabIdx = 1;
strSqlTmp = String.Empty;
using (DataTable dataTableALL = new DataTable())
{
    while (true)
    {
        string strTmpVolName = String.Format("Tab{0}", nTmpVolTabIdx);
        strSqlTmp = String.Format("SELECT * FROM [{0}];", strTmpVolName);

        // Pull the data from 'VolX' into a local DataTable.
        using (DataTable dataTable = UtilsDB.DTFromDB(conn, strTmpVolName, strSqlTmp, false))
        {
            if (dataTable == null)
                break;
            else
                dataTableALL.Merge(dataTable);
        }
        nTmpVolTabIdx++;
    }
    ...
} 
```

这会合并`DataTable`s 但它们未对齐（将空白单元格填充到附加的数据集上）。`DataTable`我可以通过循环附加新的列；**但是有没有更简单/更好的方法来做到这一点（也许使用 LINQ）？**

谢谢你的时间。

*编辑。提供示例数据集。*

*我需要的是*

![完整数据表](../Images/20c1723a15b66ebd27caeedc388eb052.png)

*各个表是*

![标签](../Images/c6624414a11a5dbbc64a2d420dafa511.png)

*第一次合并操作后，我有以下内容*

![合并后](../Images/f9a6176da6dd6813e7fb311e81187bc3.png)

*再次感谢。*

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-05T14:41:50.100

该表在 之后具有重复的主键，`Merge`因为没有定义主键。所以要么指定PK，要么在这里尝试我从头开始编写的这个方法~~（所以它没有真正经过测试）~~：

```
public static DataTable MergeAll(this IList<DataTable> tables, String primaryKeyColumn)
{
    if (!tables.Any())
        throw new ArgumentException("Tables must not be empty", "tables");
    if(primaryKeyColumn != null)
        foreach(DataTable t in tables)
            if(!t.Columns.Contains(primaryKeyColumn))
                throw new ArgumentException("All tables must have the specified primarykey column " + primaryKeyColumn, "primaryKeyColumn");

    if(tables.Count == 1)
        return tables[0];

    DataTable table = new DataTable("TblUnion");
    table.BeginLoadData(); // Turns off notifications, index maintenance, and constraints while loading data
    foreach (DataTable t in tables)
    {
        table.Merge(t); // same as table.Merge(t, false, MissingSchemaAction.Add);
    }
    table.EndLoadData();

    if (primaryKeyColumn != null)
    {
        // since we might have no real primary keys defined, the rows now might have repeating fields
        // so now we're going to "join" these rows ...
        var pkGroups = table.AsEnumerable()
            .GroupBy(r => r[primaryKeyColumn]);
        var dupGroups = pkGroups.Where(g => g.Count() > 1);
        foreach (var grpDup in dupGroups)
        { 
            // use first row and modify it
            DataRow firstRow = grpDup.First();
            foreach (DataColumn c in table.Columns)
            {
                if (firstRow.IsNull(c))
                {
                    DataRow firstNotNullRow = grpDup.Skip(1).FirstOrDefault(r => !r.IsNull(c));
                    if (firstNotNullRow != null)
                        firstRow[c] = firstNotNullRow[c];
                }
            }
            // remove all but first row
            var rowsToRemove = grpDup.Skip(1);
            foreach(DataRow rowToRemove in rowsToRemove)
                table.Rows.Remove(rowToRemove);
        }
    }

    return table;
} 
```

你可以这样调用它：

```
var tables = new[] { tblA, tblB, tblC };
DataTable TblUnion = tables.MergeAll("c1"); 
```

使用了这个样本数据：

```
var tblA = new DataTable();
tblA.Columns.Add("c1", typeof(int));
tblA.Columns.Add("c2", typeof(int));
tblA.Columns.Add("c3", typeof(string));
tblA.Columns.Add("c4", typeof(char));

var tblB = new DataTable();
tblB.Columns.Add("c1", typeof(int));
tblB.Columns.Add("c5", typeof(int));
tblB.Columns.Add("c6", typeof(string));
tblB.Columns.Add("c7", typeof(char));

var tblC = new DataTable();
tblC.Columns.Add("c1", typeof(int));
tblC.Columns.Add("c8", typeof(int));
tblC.Columns.Add("c9", typeof(string));
tblC.Columns.Add("c10", typeof(char));

tblA.Rows.Add(1, 8500, "abc", 'A');
tblA.Rows.Add(2, 950, "cde", 'B');
tblA.Rows.Add(3, 150, "efg", 'C');
tblA.Rows.Add(4, 850, "ghi", 'D');
tblA.Rows.Add(5, 50, "ijk", 'E');

tblB.Rows.Add(1, 7500, "klm", 'F');
tblB.Rows.Add(2, 900, "mno", 'G');
tblB.Rows.Add(3, 150, "opq", 'H');
tblB.Rows.Add(4, 850, "qrs", 'I');
tblB.Rows.Add(5, 50, "stu", 'J');

tblC.Rows.Add(1, 7500, "uvw", 'K');
tblC.Rows.Add(2, 900, "wxy", 'L');
tblC.Rows.Add(3, 150, "yza", 'M');
tblC.Rows.Add(4, 850, "ABC", 'N');
tblC.Rows.Add(5, 50, "CDE", 'O'); 
```

之后：`DataTable.Merge`_`MergeAll`

![在此处输入图像描述](../Images/91ab5ab04b8a49242f6035fa6ef6a941.png)

经过一些修改以加入行`MergeAll`：

![在此处输入图像描述](../Images/0fb1ac31aae803af454e8af0e21e6816.png)

* * *

## 更新

由于这个问题出现在其中一条评论中，如果两个表之间的唯一关系是表中 a 的索引，`DataRow`并且您想根据索引合并两个表：

```
public static DataTable MergeTablesByIndex(DataTable t1, DataTable t2)
{
    if (t1 == null || t2 == null) throw new ArgumentNullException("t1 or t2", "Both tables must not be null");

    DataTable t3 = t1.Clone();  // first add columns from table1
    foreach (DataColumn col in t2.Columns)
    {
        string newColumnName = col.ColumnName;
        int colNum = 1;
        while (t3.Columns.Contains(newColumnName))
        {
            newColumnName = string.Format("{0}_{1}", col.ColumnName, ++colNum);
        }
        t3.Columns.Add(newColumnName, col.DataType);
    }
    var mergedRows = t1.AsEnumerable().Zip(t2.AsEnumerable(),
        (r1, r2) => r1.ItemArray.Concat(r2.ItemArray).ToArray());
    foreach (object[] rowFields in mergedRows)
        t3.Rows.Add(rowFields);

    return t3;
} 
```

样本：

```
var dt1 = new DataTable();
dt1.Columns.Add("ID", typeof(int));
dt1.Columns.Add("Name", typeof(string));
dt1.Rows.Add(1, "Jon");
var dt2 = new DataTable();
dt2.Columns.Add("Country", typeof(string));
dt2.Rows.Add("US");

var dtMerged = MergeTablesByIndex(dt1, dt2); 
```

结果表包含三列`ID`、`Name`和`Country`一行：`1 Jon US`

# iphone - 从 tesseract 中的图像中获取文本的确切位置

> ID：12278982
> 
> 赞同：11
> 
> 时间：2012-09-05T10:04:45.320
> 
> 标签：iphone, tesseract

在 tesseract 中使用 GetHOCRText(0) 方法，我能够检索 html 中的文本，并在 webview 中呈现 html 时，我可以获得文本，但图像中文本的位置与输出不同。任何想法都非常有帮助。

```
 tesseract->SetInputName("word");
tesseract->SetOutputName("xyz");
tesseract->Recognize(NULL);

char *utf8Text=tesseract->GetHOCRText(0); 
```

![这是我用于 tesseract 的图像](../Images/bc1a6e4ba14e6498439ae6f747f591a4.png)

并输出图像![在此处输入图像描述](../Images/c0308136c0a15f744c87a2e7c5672089.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T14:50:56.673

如果您有 hocr 输出，则每个单词都应该有一个标签。这些标签应该有 class="ocrx_word" 和 name="bbox x1 y1 x2 y2" 其中 x 和 y 是单词周围边界框的左上角和右下角。我认为不可能自动使用这些信息来格式化文本文档——需要将像素差异转换为制表符/空格的数量。但是，您应该能够在给定位置呈现文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T12:19:36.523

`GetBoxText()`方法将返回数组中每个字符的确切位置。

```
char *boxtext = _tesseract->GetBoxText(0);
NSString* aBoxText = [NSString stringWithUTF8String:boxtext]; 
```

# goto - Goto 被认为是有害的，但有没有人尝试使用 goto 使代码可重用和可维护？

> ID：12278986
> 
> 赞同：0
> 
> 时间：2012-09-05T10:04:54.057
> 
> 标签：goto

每个人都知道 Dijkstra 给编辑的信：[转到被认为有害的声明](http://dl.acm.org/citation.cfm?doid=362947)（也在这里[.html](http://www.cs.utexas.edu/~EWD/transcriptions/EWD02xx/EWD215.html)成绩单和这里[.pdf](http://www.cs.utexas.edu/users/EWD/ewd02xx/EWD215.PDF)）。我想知道是否有人试图通过添加任何其他语言扩展或开发允许 goto 的语言来找到一种使用 goto 可重用和可维护且无害的代码的方法。

我问这个问题的原因是我突然想到，用汇编语言编写的代码经常使用 goto 和全局变量来使程序在有限的空间内运行良好。[Atari 2600](http://en.wikipedia.org/wiki/Atari_2600)有 128 字节的 ram，程序是从 ROM 盒加载的。在这种情况下，最好使用非结构化编程并充分利用这允许为程序充分利用非常有限的空间的自由。

当你将它与今天没有使用 goto 编程的游戏进行比较时，游戏会占用更多空间。

然后我突然想到，如果通过一些规则或其他语言更改来支持这一点，也许可以使用 goto 进行编程，那么可以减少或消除 goto 的负面影响。有没有人试图通过创建一种允许 goto 无害的语言或遵循的一些规则来寻找一种方法来使 goto 不被认为是有害的。

如果没有人寻找一种以无害方式使用 goto 的方法，那么也许我们仅仅基于这篇论文就不必要地采用了结构化编程？也许还有另一种解决方案允许使用 goto 而没有不利的一面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:21:30.827

将 goto 与结构化编程进行比较，就是将程序员必须记住代码中每个标签的实际含义和作用以及在哪里存在的情况与明确描述条件分支的情况进行比较。

至于 goto`statement`在程序可能占用的位置方面的优势，我认为今天的游戏很大，因为它们使用了图形和声音资源。也就是说，显示 1,000,000 个多边形。与此相比，goto 的成本完全可以忽略不计。

而且，结构语句最终`goto`在输出汇编时被编译器编译成（“jmp”）语句。

要回答这个问题，可以通过创建命名和语法约定来降低 goto 的危害。然而，将这些约定强制执行到规则中几乎就是结构化编程所做的事情。

[Linus Torvald 曾经辩称](https://blogs.oracle.com/oswald/entry/is_goto_the_root_of)goto 可以使源代码更清晰，但是 goto 在非常特殊的情况下很有用，以至于我不敢作为程序员使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:25:50.780

[This question](https://stackoverflow.com/questions/12314619/how-to-jump-out-of-a-c-code-block) is somehow related to yours, since I think this one of the most common situations where a `goto` is needed.

# emacs - 使用 go-mode 自动完成

> ID：12278990
> 
> 赞同：4
> 
> 时间：2012-09-05T10:05:08.800
> 
> 标签：emacs, go

每当通过 go-mode 加载 .go 文件时，我都会尝试启用自动完成模式。如果我为 Go 源文件手动调用自动完成模式，它会起作用，但是当我尝试将其添加到 .emacs 时，它不起作用：

```
(add-hook 'go-mode-hook auto-complete-mode) 
```

我已经尝试了一些变体，但似乎都没有。以下是我的 .emacs 中当前的 Go-Mode 片段：

```
;; Load Go Mode
(require 'go-mode-load)
(add-hook 'go-mode-hook 'auto-complete-mode) 
```

我尝试像这样创建自己的钩子函数：

```
;; Load Go Mode
(require 'go-mode-load)
(defun auto-complete-for-go ()
  (auto-complete-mode 1))
(add-hook 'go-mode-hook 'auto-complete-for-go) 
```

`go-mode-load.el`我还尝试在and中包含钩子`go-mode.el`，以及`auto-complete-mode`像这样调用：

```
(auto-complete-mode t)
(provide 'go-mode) 
```

无论如何都行不通。我还添加了`go-mode-hook`to`auto-complete-default`函数，如下所示：

```
(defun ac-config-default ()
  (setq-default ac-sources '(ac-source-abbrev ac-source-dictionary ac-source-words-in-same-mode-buffers))
  (add-hook 'go-mode-hook 'ac-common-setup)
  ;; Other hooks
  (global-auto-complete-mode t)) 
```

那也行不通。在为缓冲区启用主要模式之后触发命令的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T07:06:05.940

这是目前的解决方法：

```
(add-to-list 'ac-modes 'go-mode) 
```

我通过以下提交修复了 v1.4 分支中的问题。

*   [将 go-mode 添加到 ac-modes](https://github.com/auto-complete/auto-complete/commit/c46d90fca2190349bc38dc4d30a6de0a753b43ca)
*   [添加 go-mode 字典](https://github.com/auto-complete/auto-complete/commit/ecbd5fdbd5240471acca916348e84a8de862bcdc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:55:00.690

您尝试过哪些变体？如果您在前面添加单引号，它应该可以工作`auto-complete-mode`：

```
(add-hook 'go-mode-hook 'auto-complete-mode) 
```

没有这个引号，`auto-complete-mode`被解释为一个变量，并且该变量的值被添加到`go-mode-hook`. 为了使这个有意义，这样的变量应该包含一个函数引用作为它的值。尽管没有变量命名`auto-complete-mode`，但很可能 Emacs 会抱怨。

通过添加引号，您告诉 Emacs 这不是一个变量，而是您希望钩子调用的实际函数。另请参阅[此处](http://www.gnu.org/software/emacs/manual/html_node/elisp/Quoting.html#Quoting)和[此处](http://www.gnu.org/software/emacs/manual/html_node/elisp/Symbol-Type.html#Symbol-Type)。

# ios - 如何在气泡表面旋转语音气泡的三角形图像？

> ID：12278992
> 
> 赞同：0
> 
> 时间：2012-09-05T10:05:09.580
> 
> 标签：ios, objective-c, opengl-es

如何在气泡表面旋转语音气泡的三角形图像？三角形图像可以通过触摸和拖动进行缩放和旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:53:37.283

您可以做的是从原始图像中剪切气泡的三角形部分，将其制作成 UIImageView 并将其放置，就好像它是气泡的一部分一样。然后使用这个 UIImageView 并根据 UIGestures 或 UITouch 使其缩放、旋转等，无论哪个对你来说更容易和气泡一起。如果您需要任何代码帮助，请询问。谢谢 ：）

# android - 使用我们的用户提示或交互从 android 卸载应用程序

> ID：12278993
> 
> 赞同：2
> 
> 时间：2012-09-05T10:05:10.373
> 
> 标签：android, android-intent

最近我正在开发一个移动设备管理应用程序，因为我实现了一个从设备远程删除应用程序的案例，但问题是用户必须单击卸载按钮才能继续。但我认为如果我们正在管理设备，它应该不是，并且可以肯定用户不会单击卸载按钮。

那么有什么方法可以让我们在没有用户提示的情况下删除应用程序，或者我们可以在调用活动时自动单击卸载按钮。

```
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE);
            uninstallIntent.setData(Uri.parse("package:" + packageName));
            uninstallIntent.setAction(Intent.ACTION_VIEW); 
            uninstallIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
            context.startActivity(uninstallIntent); 
```

我正在使用此代码调用卸载活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:22:51.333

好吧，据我所知，没有用户许可提示就无法安装卸载包，更多技术答案请参考以下来源：[第三方卸载](https://stackoverflow.com/questions/891141/is-it-possible-to-programmatically-uninstall-a-package-in-android)- 这表明安装卸载包的唯一方法是要求 Android 操作系统执行此操作对你来说，[Intent 或 Package Manager install](https://stackoverflow.com/questions/6813322/install-uninstall-apks-programmatically-packagemanager-vs-intents) - 这表明有一种特殊的方法来安装/卸载包，但它只能由系统应用程序使用。

因此，安装和卸载包的唯一明显方式是一个意图，并且这个意图将始终显示安装卸载包的提示。

# perl - 使用双重否定 (!!)

> ID：12278997
> 
> 赞同：32
> 
> 时间：2012-09-05T10:05:26.160
> 
> 标签：perl, operators, boolean

好的，所以我遇到了一个看起来像的代码

```
@documents_names = sort {
         !!$deleted_documents_names{$a} == !!$deleted_documents_names{$b}
          ? uc($a) cmp uc($b)
          : !!$deleted_documents_names{$a}
          cmp !!$deleted_documents_names{$b}
         } @documents_names; 
```

这是我第一次看到双重否定的使用。它有什么用？一个人什么时候会使用它？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-05T10:07:05.763

它将非布尔类型转换为布尔（`dualvar(0,"")`或`1`）。

这是执行此操作的快捷方式，而不是尝试显式转换（可能需要更多字符）。`!`运算符否定其参数的真实性。因此，使用了其中的两个。

许多对象类型是“真实的”，而其他对象类型是“虚假的”。

*   唯一的错误值是`0`、`undef`、`""`和`"0"`一些重载对象。
*   真值的示例是`1`、`"asdf"`和所有其他值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T11:14:01.250

`sort`对于一个街区来说，这是一个很大的放克！

它本质上是一个两级排序：

1.  科学的
2.  先删除文件，再取消删除

因此，可以将其重写为（未经测试）：

```
@documents = sort {  exists $deleted_documents_names{$a} # same effect as '!!'
                       <=> 
                     exists $deleted_documents_names{$b}
                  ||
                     uc( $a ) cmp uc( $b )
                  }
             @documents; 
```

# silverlight - WP7 , 计算网速

> ID：12278998
> 
> 赞同：0
> 
> 时间：2012-09-05T10:05:27.207
> 
> 标签：silverlight, windows-phone-7, networking

我正在构建一个应用程序，其中 URL 源将由 Internet 连接的速度（带宽）决定。有没有办法可以确定互联网连接的速度？

例如：如果我的应用程序的用户使用的是低速连接 (2G)，那么我需要为他提供合适的来源。如果用户使用 3G 连接，那么我将通过另一个 URL 为他提供质量更好的内容。

因此，为此我需要确定用户可能拥有的互联网连接速度。请给我一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:42:49.800

向用户发送一定大小的数据并获取完成发送数据所需的总时间。然后计算`data size / time needed`。

# javascript - jQuery字符串使用split()方法在空格后分割字符串

> ID：12278999
> 
> 赞同：15
> 
> 时间：2012-09-05T10:05:28.267
> 
> 标签：javascript, jquery

我的代码

```
 var str =$(this).attr('id'); 
```

这会给我价值== **myid 5**

```
 var str1 = myid
   var str2 = 5 
```

我想要这样的东西..

如何使用拆分方法实现这一点

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-05T10:07:44.460

```
var str =$(this).attr('id');
var ret = str.split(" ");
var str1 = ret[0];
var str2 = ret[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:18:51.053

使用内置函数：split()

```
var source = 'myid 5';

//reduce multiple places to single space and then split
var splittedSource = source.replace(/\s{2,}/g, ' ').split(' ');

console.log(splittedSource); 
```

​ 注意：即使字符串组之间有多个空格，这也有效

小提琴：http: [//jsfiddle.net/QNSyr/6/](http://jsfiddle.net/QNSyr/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-27T10:16:12.257

一线解决方案：

```
//<div id="mypost-5">
var postId = this.id.split('mypost-')[1] ); //better solution than the below one! 
```

-或者-

```
//<div id="mypost-5">
var postId = $(this).attr('id').split('mypost-')[1]; 
```