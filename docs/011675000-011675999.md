# StackOverflow 问答 11675000-11675999

# networking - 域名后缀是否意味着地理位置？

> ID：11675000
> 
> 赞同：0
> 
> 时间：2012-07-26T17:45:28.787
> 
> 标签：networking

域名后缀是否`.us, .uk`意味着服务器的地理位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:55:17.567

域名不表示任何有关服务器物理位置的信息。它可能适用于某些国家/地区代码，但是`.uk`例如域可以由任何人注册而没有任何地理限制，更不用说对服务器所在位置的限制了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:56:27.100

*通常*，具有 .us、.fr 或 .ch 域的网站意味着网站在该国家/地区托管/运营。然而，这并不普遍。一些国家会让您获得他们国家的域名，而无需实际成为该国家的一部分。例如，.tv 代码是图瓦卢岛国的国家/地区代码，但其他国家/地区的许多网站都使用该国家/地区代码。

# php - 如何每 x 秒检查一次 cookie 是否存在

> ID：11675001
> 
> 赞同：0
> 
> 时间：2012-07-26T17:45:29.913
> 
> 标签：php, cookies

我的视频网站的视频广告点击率非常高。所以我正在为我的 php 网站创建一个附属程序插件。

要检查我的视频广告是否被点击，我需要检查 cookie 是否存在。所以我
写了一个 php 脚本，它基本上检查循环中是否存在 cookie。

我知道用户可以随时点击视频广告，所以我认为使用循环是个好主意。事实证明，如果我打开了循环，则在满足循环条件之前，不会加载页面的其余部分。所以我想象每分钟左右完成一次检查，但我不知道该怎么做。无论如何我认为我已经说得够多了。下面是我写的php代码。

```
$cookie1= $_COOKIE['PBCBD2A0PBP3D31B'];
$cookie2= $_COOKIE['PBC0622FPBP3D31B'];
$cookie3= $_COOKIE['PBC669C9PBP3D31B'];
$count= "1";
while ($count >0 )
{
if (isset($cookie1) || isset($cookie2) || isset($cookie3))
    {$count= "0"; echo "You clicked on an AD";} else{$count= "1";}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:51:09.567

使用 javascript onclick 事件运行 AJAX 调用来检查 cookie 的存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:54:25.270

这是 PHP 与 JavaScript 的基本问题。

如果您想使用 PHP 每分钟检查一次 cookie，则必须每分钟刷新一次页面。由于多种原因，这显然是非常不经济的，其中至少是您正在使用服务器端代码检查客户端的某些内容 - 通过每分钟强制刷新页面，不少于。

根据您对您想要做什么的描述，我建议[使用 JavaScript 来检查 cookie](http://sveinbjorn.org/cookiecheck#javascript)（链接中的页面显示了如何制作和检查测试 cookie；根据您的需要进行修改）并使用`setInterval()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:53:29.700

我同意马特的观点。您最好仅在 cookie 可能更改的情况下（当他们点击视频时）检测 cookie。但是，这取决于具体情况。您是在设置 cookie，还是在外部网站点击广告时设置了 cookie？

### 编辑：

你的两个目标似乎是：

1.  根据附加到用户的 cookie 确定要投放的广告。
2.  记录哪些用户点击了哪些广告。

如果您使用 PHP 生成所有广告并将它们提供给用户，那么在您选择要显示的广告之前，请检查*一次*用户的 cookie并从那里开始。

如果您使用 javascript 在页面中放置广告，则应在每次刷新广告时检查 javascript 中的 cookie。

无论如何，放弃循环。只需在投放广告之前直接检查 cookie。

为了确定哪些用户点击了哪些广告，您应该检测 javascript 中的点击，并使用 AJAX 将它们记录到您的服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T17:53:46.050

你的方法行不通。PHP 用于生成响应（即构成您的页面的 html、javascript 等）。一旦生成，响应就会发送给用户，您的 PHP 脚本就完成了。由客户端（想想 JavaScript）通知您任何用户操作。您可以添加一个 onclick 事件，向您的服务器发送一个新请求，从而检测广告点击。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T17:58:25.570

使用 ajax 和 setInterval 函数

```
setInterval(function(){
    $.ajax({
         type:"POST",
         url: "the_php_that_checks_cookie.php",
         data:"check=true",
         success:function(data){
               //alert the message sent by the php file
               alert(data);
         }
    });
},5000); 
```

每 5 秒发送一次 ajax 请求并在您的 PHP 文件中，

```
if(isset($_POST['check']){

    $cookie1= $_COOKIE['PBCBD2A0PBP3D31B'];
    $cookie2= $_COOKIE['PBC0622FPBP3D31B'];
    $cookie3= $_COOKIE['PBC669C9PBP3D31B'];
    $count= "1";

  while ($count >0 )
    {
      if (isset($cookie1) || isset($cookie2) || isset($cookie3))
      {$count= "0"; echo "You clicked on an AD";} else{$count= "1";}
    }
} 
```

# c# - 如果我在处理 WCF 请求时停止我的 Windows 服务会发生什么？

> ID：11675003
> 
> 赞同：7
> 
> 时间：2012-07-26T17:45:34.363
> 
> 标签：c#, .net, vb.net, service

我猜所有执行都会立即停止，并且调用端会超时。当您停止服务时究竟会发生什么，您对它有多少控制权？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T18:41:03.520

当服务控制管理器告诉您的服务停止时，.Net ServiceBase 将状态设置为 SERVICE_STOP_PENDING 并调用您的服务的 OnStop 方法。您如何处理该通知取决于您。理想情况下，您将拥有一些机制，例如使用 CancellationToken 来通知您当前正在工作的任何线程，他们需要将其打包并尽快退出。在您的情况下，它可能涉及关闭您的 ServiceHost。您的 OnStop 方法应该等到它知道已经完成（例如，通过加入线程）才返回。有一些方法可以通知服务控制管理器您需要更多时间，或者只是让它知道您收到了通知并且您正在积极地停止工作（SERVICE_STATUS dwcheckpoint）。

如果您只是从 OnStop 立即返回（或不费心实现它），那么我认为您的服务线程将全部被强制终止。我不确定，因为我从未尝试过这个。我总是实施 OnStop，只有在一切都清理干净后才返回。如果您实现了 OnStop，但需要很长时间才能返回而没有让服务控制管理器知道您正在处理它，那么它将等待一段时间（服务停止 20 秒......这是一个注册表设置），然后终止你的线程。

正确的做法是编写您的服务，使其快速启动、快速停止、暂停和继续快速等等。正如您从上面的描述中看到的那样，您的情况究竟会发生什么，完全取决于您的服务是如何实现的。只有您拥有“确定”的信息。

[http://blogs.msdn.com/b/bclteam/archive/2009/02/19/in-depth-how-net-managed-services-interact-with-the-servicecontrolmanager-scm-kim-hamilton.aspx](http://blogs.msdn.com/b/bclteam/archive/2009/02/19/in-depth-how-net-managed-services-interact-with-the-servicecontrolmanager-scm-kim-hamilton.aspx)

# javascript - 寄生继承和超级方法

> ID：11675006
> 
> 赞同：1
> 
> 时间：2012-07-26T17:45:42.077
> 
> 标签：javascript, inheritance

Douglas Crockford[在这里定义了他的](http://www.crockford.com/javascript/inheritance.html)**寄生继承** 。

我想使用这种继承模式，因为它简单明了，但我想调用**超级方法**而不定义 Crockford 调用的`uber`函数，因为我不想修改 Object 的原型。我能怎么做？

我想要一些不错的语法，而不需要修改 Object……这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:53:01.437

在他的例子中，这个：

```
function ZParenizor2(value) {
    var that = new Parenizor(value);
    that.toString = function () {
        if (this.getValue()) {
            return this.uber('toString');
        }
        return "-0-"
    };
    return that;
} 
```

会变成这样：

```
function ZParenizor2(value) {
    var that = new Parenizor(value);
    that.toString = function () {
        if (this.getValue()) {
            return Parenizor.prototype.toString.apply(this, arguments);
        }
        return "-0-"
    };
    return that;
} 
```

- 编辑 -

另一方面，您也可以简单地定义一个名为 BaseObject 的新类，在其上定义所有基本扩展方法（例如“uber”），然后以此为基础创建对象层次结构。

# bash - 按长度文件名顺序列出文件，在字母之后

> ID：11675007
> 
> 赞同：2
> 
> 时间：2012-07-26T17:45:54.683
> 
> 标签：bash, shell

我有这些文件：

```
-rw-rw-r-- 1 root     boincadm 21170 Jul 19 16:42 wilson_job_79
-rw-rw-r-- 1 root     boincadm 18170 Jul 19 16:42 wilson_job_8
-rw-rw-r-- 1 root     boincadm 21288 Jul 19 16:42 wilson_job_80
-rw-rw-r-- 1 root     boincadm 21180 Jul 19 16:38 wilson_job_81
-rw-rw-r-- 1 root     boincadm 21156 Jul 19 16:36 wilson_job_82
-rw-rw-r-- 1 root     boincadm 21414 Jul 19 16:26 wilson_job_85
-rw-rw-r-- 1 root     boincadm 21194 Jul 19 16:29 wilson_job_86
-rw-rw-r-- 1 root     boincadm 21148 Jul 19 16:29 wilson_job_87
-rw-rw-r-- 1 root     boincadm 21176 Jul 19 16:27 wilson_job_88
-rw-rw-r-- 1 root     boincadm 21240 Jul 19 16:42 wilson_job_89
-rw-rw-r-- 1 root     boincadm 18136 Jul 19 16:26 wilson_job_9
-rw-rw-r-- 1 root     boincadm 21260 Jul 19 16:38 wilson_job_90
-rw-rw-r-- 1 root     boincadm 21174 Jul 19 16:34 wilson_job_91 
```

当我列出时，我希望按数字顺序回答：

```
-rw-rw-r-- 1 root     boincadm 18170 Jul 19 16:42 wilson_job_8
-rw-rw-r-- 1 root     boincadm 18136 Jul 19 16:26 wilson_job_9
-rw-rw-r-- 1 root     boincadm 21170 Jul 19 16:42 wilson_job_79
-rw-rw-r-- 1 root     boincadm 21288 Jul 19 16:42 wilson_job_80
-rw-rw-r-- 1 root     boincadm 21180 Jul 19 16:38 wilson_job_81
-rw-rw-r-- 1 root     boincadm 21156 Jul 19 16:36 wilson_job_82
-rw-rw-r-- 1 root     boincadm 21414 Jul 19 16:26 wilson_job_85
-rw-rw-r-- 1 root     boincadm 21194 Jul 19 16:29 wilson_job_86
-rw-rw-r-- 1 root     boincadm 21148 Jul 19 16:29 wilson_job_87
-rw-rw-r-- 1 root     boincadm 21176 Jul 19 16:27 wilson_job_88
-rw-rw-r-- 1 root     boincadm 21240 Jul 19 16:42 wilson_job_89
-rw-rw-r-- 1 root     boincadm 21260 Jul 19 16:38 wilson_job_90
-rw-rw-r-- 1 root     boincadm 21174 Jul 19 16:34 wilson_job_91 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:49:30.040

如果您有 GNU 工具，请自行`ls`处理：`ls -vl`

[http://www.gnu.org/software/coreutils/manual/html_node/Details-about-version-sort.html](http://www.gnu.org/software/coreutils/manual/html_node/Details-about-version-sort.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:50:56.183

利用下划线字符“_”仅出现在以下输出中的文件名中这一事实`ls -l`：

```
ls -l | sort -t_ -k1,2 -k3n 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:49:21.077

尝试这个：

`ls | sort -V | xargs -i ls -ld {}`

这会运行 ls （它只输出一个文件名列表），通过 sort -V 管道它（它执行“版本号”排序），然后将每一行发送到 ls -ld （它输出每个文件的详细信息）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T18:00:55.580

使用 sed，假设文件名中只有数字在排序字段中：

```
ls | sed 's/[^0-9]*\([0-9]*\)*/\1 &/' | sort -n -k1 | cut -d' ' -f2 
```

*   此处的`sed`命令创建一个仅包含文件编号的新列，例如对于 file23，它将打印出“23 file23”。

*   `sort`命令以数字方式 ( `-n`) 按第一个字段（或键， `-k1`）排序

*   `cut`命令删除第一个字段并仅打印第二个字段 ( `-f2`)。例如，它将`file23`从输入打印`23 file23`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T18:11:12.313

在第 9 个字段上使用版本排序：

```
ls -l | sort -k9V 
```

# emacs - 如何以 XML 格式保存缓冲区（未向用户显示为 XML） - 在 Emacs 中

> ID：11675017
> 
> 赞同：1
> 
> 时间：2012-07-26T17:46:37.243
> 
> 标签：emacs, elisp

我想向用户显示一个正常的缓冲区，但我想以 XML 格式保存他/她所写的内容。我可以在 Emacs 中这样做吗？使用某些功能等？

笔记：

普通缓冲区：没有标记的文本......与...... XML格式：具有XML标签的文件和文件/缓冲区的所有内容都存储为记录..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:56:16.500

Emacs 提供了可以附加函数的动作钩子。在这种情况下，您可能希望在`before-save-hook`保存文件时附加一些内容来转换文件。

```
(defun some-transform () ... )

(add-hook 'after-save-hook 'some-transform nil t) 
```

我对你的问题了解得还不够多。

这里的问题是这是一个文字转换，一旦用户保存文件，除非您应用另一个转换，否则它不会变回来。

在这种情况下，您将需要连接`find-file-hook`

```
(defn some-reverse-transform () ... )

(add-hook 'find-file-hook 'some-reverse-transform) 
```

这会将 xml 更改回纯文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T20:42:15.027

它将转换缓冲区保存在带有额外后缀的文件中`.xml`

```
(defun transform-file-on-save ()
  (let ((bufer-as-string (buffer-string))
    (new-file-name (concat  (buffer-file-name) ".xml")))
    (with-temp-buffer
      (insert bufer-as-string)
      ;; some operations in the buffer
      (goto-char (point-min))
      (replace-string "(" "<b>")
      (goto-char (point-min))
      (replace-string ")" "</b>")
      ;; save file
      (message "Writing file: %s" new-file-name)
      (write-region (point-min) (point-max) new-file-name nil 'quietly))))

(add-hook 'after-save-hook 'transform-file-on-save)

;; better have it around to get rid of the hook
;;(remove-hook 'after-save-hook 'transform-file-on-save) 
```

# android - 令人沮丧的 DevicePolicyManager lockNow() 行为

> ID：11675022
> 
> 赞同：2
> 
> 时间：2012-07-26T17:47:10.833
> 
> 标签：android, lockscreen, standby, device-manager

事情很简单：按下一个图标，让手机进入待机状态。令人沮丧的部分来自手机：有时，屏幕会随机唤醒并显示锁定屏幕，而不是保持待机状态。我还没有找到任何触发这种行为的条件，大约有 3-5 次尝试。该应用程序具有管理员权限，奇怪的是在自定义 ROM 上运行良好，但库存 JellyBean 4.1.1 却没有。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        deviceManger = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);
        compName = new ComponentName(this, MyAdmin.class);

        boolean active = deviceManger.isAdminActive(compName);
        if (active) {
            finish();
            deviceManger.lockNow();
      }
   } 
```

我有我的 xml 策略文件，例如

```
<device-admin xmlns:android="http://schemas.android.com/apk/res/android" >
    <uses-policies>
        <force-lock>
        </force-lock>
    </uses-policies>
</device-admin> 
```

Android清单似乎没问题

```
<receiver
            android:name=".MyAdmin"
            android:permission="android.permission.BIND_DEVICE_ADMIN" >
            <meta-data
                android:name="android.app.device_admin"
                android:resource="@layout/policies" >
                <intent-filter>
                    <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" >
                    </action>
                </intent-filter>
            </meta-data>
        </receiver> 
```

问题是我无法弄清楚为什么会这样。这发生在带有库存、干净安装的 4.1.1 的 Galaxy Nexus 上正如您所见，代码非常简单。我可以尝试制作一个 postDelayed 为 500ms 的 Handler 并再次运行 lockNow() ......但是如果在某些设备上 500ms 还不够怎么办？

当锁屏出现时，logcat 有：

```
07-26 20:45:27.446: I/ActivityManager(300): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.alinberce.standbytouch/.StandByActivity bnds=[168,1040][296,1168] u=0} from pid 524
07-26 20:45:27.634: D/dalvikvm(300): GC_FOR_ALLOC freed 1695K, 21% free 20113K/25351K, paused 69ms, total 69ms
07-26 20:45:27.650: D/SurfaceFlinger(124): About to give-up screen, flinger = 0x41b48af0
07-26 20:45:27.665: V/LockPatternKeyguardView(300): Set visibility on com.android.internal.policy.impl.LockPatternKeyguardView$4@41e57948 to 8388608
07-26 20:45:27.790: V/TransportControlView(300): Create TCV com.android.internal.widget.TransportControlView@419f9b08
07-26 20:45:27.861: D/dalvikvm(300): GC_CONCURRENT freed 528K, 16% free 21541K/25351K, paused 15ms+7ms, total 89ms
07-26 20:45:28.204: W/BufferQueue(124): [com.android.launcher/com.android.launcher2.Launcher] cancelBuffer: BufferQueue has been abandoned!
07-26 20:45:28.228: V/KeyguardViewManager(300): KGVM: Set visibility on com.android.internal.policy.impl.KeyguardViewManager$KeyguardViewHost@41d2ef48 to 6291456
07-26 20:45:28.236: D/PhoneStatusBar(399): disable: < expand icons alerts ticker system_info back home RECENT* clock >
07-26 20:45:28.243: I/Choreographer(300): Skipped 35 frames!  The application may be doing too much work on its main thread.
07-26 20:45:28.329: V/LockPatternKeyguardView(300): Set visibility on com.android.internal.policy.impl.LockPatternKeyguardView$4@41e57948 to 8388608
07-26 20:45:28.329: D/PhoneStatusBar(399): disable: < expand icons alerts ticker system_info BACK* HOME* RECENT CLOCK* >
07-26 20:45:28.407: V/LockPatternKeyguardView(300): Set visibility on com.android.internal.policy.impl.LockPatternKeyguardView$4@41e57948 to 8388608
07-26 20:45:28.423: V/TransportControlView(300): Create TCV com.android.internal.widget.TransportControlView@41e953f8
07-26 20:45:28.431: I/WindowManager(300): Lock screen displayed!
07-26 20:45:28.446: V/LockPatternKeyguardView(300): Set visibility on com.android.internal.policy.impl.LockPatternKeyguardView$4@41e57948 to 8388608
07-26 20:45:28.501: V/LockPatternKeyguardView(300): Set visibility on com.android.internal.policy.impl.LockPatternKeyguardView$4@41e57948 to 8388608
07-26 20:45:28.704: D/SurfaceFlinger(124): Screen about to return, flinger = 0x41b48af0
07-26 20:45:28.704: E/PowerManagerService(300): Excessive delay setting brightness: 271ms, mask=2 
```

请分享任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:43:39.087

我能找到的唯一合理的解决方案是使用处理程序

```
 Handler handlerUI = new Handler();
            handlerUI.postDelayed(new Runnable() {
                @Override
                public void run() {
                    deviceManger.lockNow();
                }
            }, 500);
            Handler handlerUI2 = new Handler();
            handlerUI2.postDelayed(new Runnable() {
                @Override
                public void run() {
                    deviceManger.lockNow();
                }
            }, 900); 
```

自从我使用这个处理程序以来，我没有经历过任何屏幕闪烁，而且我每天都在使用这个应用程序。您可以在市场上找到该应用程序[https://play.google.com/store/apps/details?id=com.alinberce.standbytouch](https://play.google.com/store/apps/details?id=com.alinberce.standbytouch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:50:01.090

您应该先锁定设备，然后再完成活动...

**而不是这段代码：**

```
 finish();
 deviceManger.lockNow(); 
```

**用这个 ：**

```
 deviceManger.lockNow();
 finish(); 
```

# objective-c - Stackmob 链接器错误

> ID：11675029
> 
> 赞同：4
> 
> 时间：2012-07-26T17:47:30.467
> 
> 标签：objective-c, ios, xcode, stackmob

我已经开始使用 Stackmob。我按照提供的说明将 stackmob 添加到我的项目中，然后关闭添加的这些文件上的所有 ARC，然后出现链接器错误。

“clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）”

有人遇到过同样的问题吗？一旦我从项目中删除了 stackmob，它就会再次编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:11:04.807

尝试 Cocoapods 安装方法...不应该那样得到那些链接器错误。

# ssas - MDX 查询多个级别的前 10 名

> ID：11675031
> 
> 赞同：3
> 
> 时间：2012-07-26T17:47:42.247
> 
> 标签：ssas, mdx, performancepoint

无论如何，我们可以通过层次结构而不是 MDX 中的顶级来获得前 10 名。我想编写一个 MDX 查询，它在层次结构的每个级别中提取前 10 个。请让我知道是否可能。

层次结构如下所示：

*   地区（获得前 10 名）
    *   国家（获得前 10 名）
        *   州（获得前 10 名）
            *   城市（获得前 10 名）
                *   很快...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:37:48.427

如果你想在一个级别上获得前 10 名，你可以使用

```
TopCount([your dimension].[Regions].Members, 10, 'your measure')
TopCount([your dimension].[Countries].Members, 10, 'your measure')
... 
```

如果您想获得前 10 个国家/地区的前 10 个地区...您可以使用[DrilldownLevelTop](http://msdn.microsoft.com/en-us/library/ms145579)：

```
DrilldownLevelTop(TopCount([your dimension].[Regions].Members, 10, 'your measure'), 10,, 'your measure') 
```

如果要获取其他级别的成员，则必须在前一个表达式周围添加其他 DrilldownLevelTop。

# php - 在 UL 和 LI 标签上添加隐藏值，如何？

> ID：11675032
> 
> 赞同：0
> 
> 时间：2012-07-26T17:47:45.667
> 
> 标签：php, arrays, hidden

我有多个这样的选择：

```
<li>
<a href="#" title="" class="selected"><span class="to-admin">Administrator</span></a>
<input id="shareto" type="hidden" value="0-1" name="shareto">
</li>
<li>
<a href="#" title=""><span class="to-finance">Finance</span></a>
<input id="shareto" type="hidden" value="1-1" name="shareto">
</li>
<li>
<a href="#" title=""><span class="to-technician">Technician</span></a>
<input id="shareto" type="hidden" value="1-0" name="shareto">
</li>
<li>
<a href="#" title=""><span class="to-lawyer">Legal</span></a>
<input id="shareto" type="hidden" value="0-0" name="shareto">
</li> 
```

现在我想用这个 PHP 来“捕捉”那个变量：

```
$Type = $_POST['shareto']; 
```

为什么无论我选择什么选项，我总是得到最后一个值？如何正确地做到这一点？之前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:51:59.863

如果您更改`name=shareto`为`name=shareto[]`then`$_POST['shareto'];`将是一个包含所有值的数组。

element `id`s 也应该是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:55:19.857

请检查这个工作小提琴链接[http://jsfiddle.net/7GHug/](http://jsfiddle.net/7GHug/)

我想你想要这样的东西。

```
<ul>
<li data-val="0-1">
<a href="#" title="" class="selected"><span class="to-admin">Administrator</span></a>

</li>
<li data-val="1-1">
<a href="#" title=""><span class="to-finance">Finance</span></a>

</li>
<li data-val="1-0">
<a href="#" title=""><span class="to-technician">Technician</span></a>
</li>
<li data-val="0-0">
<a href="#" title=""><span class="to-lawyer">Legal</span></a>
<input id="shareto" type="hidden" value="" name="shareto">
</li>
</ul>​ 
```

Java脚本

```
$(document).ready(function($) {
        $('ul li').on('click', function() {
            $('input#shareto').val($(this).data('val'));
        });
    }); 
```

使用单个隐藏输入，您可以根据单击的 li 更新值。​</p>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T17:51:17.540

```
Add [] like name="shareto[]" then $Type = implode(',',$_POST['shareto']); 
```

# ios - UItableViewCells 重复

> ID：11675033
> 
> 赞同：2
> 
> 时间：2012-07-26T17:47:50.483
> 
> 标签：ios, uitableview, reload

好的，我在每个单元格中创建了一个带有单选按钮的简单表格视图，这样做是为了查看单元格重复的原因。我将我的行数设置为高得离谱，以表明细胞确实重复。这个简单项目的目标是在解决这个问题时得出一个合理的结论，因为有几个关于这个主题的帖子都没有给出正确的结果。当用户在单元格中选择一个按钮时，该单元格并且只有该单元格应该受到影响。这是完整的代码。

```
 #import "faQViewController.h"

     @interface faQViewController ()

    @end

    @implementation faQViewController
    @synthesize button1,button2;

    - (void)viewDidLoad
    {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    }

     - (void)viewDidUnload
    {
     [super viewDidUnload];
     // Release any retained subviews of the main view.
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
     if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
    }

    -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 30;

    }

    -(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath{
    static NSString *cellIdentifier =@"cell";
    button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button1 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    button1.frame = CGRectMake(0, 0, 22, 32);
    [button1 setImage:[UIImage imageNamed:@"radioOff.png"] forState:UIControlStateNormal];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell ==nil) {        
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier
                 ] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleGray;
         [cell.contentView
          addSubview:button1];
    }

   // cell.imageView.image = [UIImage imageNamed:@"radioOff.png"];

    return cell;
}

    -(IBAction)buttonPressed:(id)sender{
    if ([sender imageForState:UIControlStateNormal ]== [UIImage imageNamed:@"radioOff.png"]){
    [sender setImage:[UIImage imageNamed:@"radioOn"] forState:UIControlStateNormal];
    }else {

        [sender setImage:[UIImage imageNamed:@"radioOff.png"] forState:UIControlStateNormal];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T15:50:59.450

丹尼尔斯的回答帮助我清理了一些东西来解决我的问题。我的问题是我看到`sections 0,1,2`正在被独特地创建，但随后`second 3`被生成相同`section 0`，这是我的设置：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellIdentifier = @"cell";

    CustomCell* cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    [cell.textLabel setText:[NSString stringWithFormat:@"SECTION %d", indexPath.section]];

    NSLog(@"SECTION %d", indexPath.section);

    return cell;
} 
```

我需要更改的是`cellIndentifier`因为我将它们全部设置为相同的 ID：

```
NSString *cellIdentifier = [NSString stringWithFormat:@"cell-%d", indexPath.section]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:01:31.170

您正在重用单元格，因此如果您不更改内容，您会看到其他行出现相同的单元格。由于您只在分配单元格时设置内容，因此在重复使用单元格时内容将保持不变

所以

```
 //Here you tell the tableView to re use a cell if one is available for reuse
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
   //if the cell is nil (none available for reuse)
    if (cell ==nil) {        
        //you create the cell and set its content
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier
                 ] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleGray;
         [cell.contentView
          addSubview:button1];
    }
    //return the cell
   return cell; 
```

如果您想根据行更改单元格内容，您应该在 cell==nil 块之后这样做

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
       //if the cell is nil (none available for reuse)
        if (cell ==nil) {        
            //you create the cell and set its content
            cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier
                     ] autorelease];
            }

          //set the content
        cell.selectionStyle = UITableViewCellSelectionStyleGray;
             [cell.contentView
              addSubview:button1];

        //return the cell
       return cell; 
```

希望这可以帮助..

# string - 字符串相似度 -> Levenshtein 距离

> ID：11675034
> 
> 赞同：26
> 
> 时间：2012-07-26T17:47:51.777
> 
> 标签：string, algorithm, levenshtein-distance, similarity

我正在使用 Levenshtein 算法来查找两个字符串之间的相似性。这是我正在制作的程序的一个非常重要的部分，因此它需要有效。问题是该算法没有发现以下示例相似：

> 康奈尔
> 空调

该算法将给出 6 的距离。所以对于这个 6 个字母的单词（你看字母数量最多的单词），差异是 100% => 相似度是 0%。

我需要找到一种方法来找到两个字符串之间的相似之处，同时还要考虑到我之前提出的情况。

我可以使用更好的算法吗？或者你们有什么推荐给我的？

编辑：我还研究了添加换位的“Damerau–Levenshtein”算法。问题是这种换位仅适用于相邻字符（而不适用于多个字符）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T18:00:40.530

我会将这个术语分为一元、二元和三元，然后计算余弦相似度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T13:52:29.167

我认为这可以通过对其中一个字符串（例如“conair”）和另一个附加到自身的字符串（例如“aircon”->“airconaircon”）使用*最长公共子字符串/子序列算法来轻松解决。*

C中的示例代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

// Returns the length of the longest common substring (LCS)
// between two given strings.
//
// This recursive implementation can be replaced by a
// more performant dynamic programming implementation.
size_t llcs(const char* s1, const char* s2)
{
  size_t len[3];

  if (*s1 == '\0' || *s2 == '\0') return 0;

  len[0] = (*s1 == *s2) + llcs(s1 + 1, s2 + 1);
  len[1] = llcs(s1 + 1, s2);
  len[2] = llcs(s1, s2 + 1);

  if (len[0] < len[1]) len[0] = len[1];
  if (len[0] < len[2]) len[0] = len[2];

  return len[0];
}

// Returns similarity of two given strings in the range
// from 0.0 to 1.0 (1.0 for equal strings).
double similarity(const char* s1, const char* s2)
{
  size_t s1len = strlen(s1);
  size_t s2len = strlen(s2);
  double sim;

  if (s1len == 0 && s2len == 0)
  {
    // Two empty strings are equal
    sim = 1;
  }
  else
  {
    size_t len;
    // Append s1 to itself in s1s1 (e.g. "aircon" -> "airconaircon")
    char* s1s1 = malloc(s1len * 2 + 1);
    strcpy(s1s1, s1);
    strcpy(s1s1 + s1len, s1);

    // Find the length of the LCS between s1s1 and s2
    // (e.g. between "airconaircon" and "conair")
    len = llcs(s1s1, s2);
    // We need it not longer than s1 (e.g. "aircon")
    // since we're actually comparing s1 and s2
    if (len > s1len) len = s1len;

    len *= 2;

    // Prevent 100% similarity between a string and its
    // cyclically shifted version (e.g. "aircon" and "conair")
    if (len == s1len + s2len && strcmp(s1, s2) != 0) len--;

    // Get the final measure of the similarity
    sim = (double)len / (s1len + s2len);

    free(s1s1);
  }

  return sim;
}

int main(int argc, char** argv)
{
  if (argc == 3)
    printf("Similarity of \"%s\" and \"%s\" is %.2f%%\n",
           argv[1], argv[2], 100 * similarity(argv[1], argv[2]));
  else
    printf("Usage:\n  %s string1 string2\n",
           argv[0]);
  return 0;
} 
```

样本输出：

```
Similarity of "123" and "123" is 100.00%
Similarity of "123" and "1234" is 85.71%
Similarity of "0123" and "123" is 85.71%
Similarity of "a" and "aa" is 66.67%
Similarity of "aa" and "a" is 66.67%
Similarity of "aaaaaaa" and "aaaaaa" is 92.31%
Similarity of "aaaaaa" and "aaaaaaa" is 92.31%
Similarity of "aircon" and "conair" is 91.67%
Similarity of "spit" and "pits" is 87.50%
Similarity of "pits" and "spit" is 87.50%
Similarity of "spits" and "pits" is 88.89%
Similarity of "pits" and "spits" is 88.89% 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T18:04:14.383

听起来您可能想尝试使用音节或音素而不是字母来进行 Levenshtein 距离。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T18:04:23.060

从理论上讲，您使用的方法对于您要解决的问题是正确的。但列文斯坦只会考虑这两组的个别角色。

字符串相似性也可以使用[最长公共](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)子序列方法找到，然后您可以在其余未匹配项上看到 Levenstein。

如果你想做一个集群的方法，[下面的答案](https://stackoverflow.com/a/8197401/18852)似乎有一些细节，但显然它更难实现。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-27T08:15:30.680

对单词进行排序并找到 Levenshtein 将为您的示例提供 100% 的匹配，但它也会为例如提供 100% 的匹配

```
CONAIR
RCIAON 
```

这可能不是你想要的。

定义相似性的另一种方法是找出 2 个字符串的公共子字符串。您可以创建[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)并找出所有常见的子字符串并尝试确定它们的相似程度。因此，对于您的例如，后缀树将提供常见的子字符串作为 CON & AIR，它涵盖了整个单词（对于您的 2 个字符串），因此得出结论它们相似。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-12T05:57:53.010

尝试使用其他相似性度量，例如 sorenson、jaccard 和 jaro_winkler

就我个人而言，我是 jaro winkler 的忠实粉丝，因为它多次达到了我的目的。

```
from Levenshtein import jaro_winkler
In [2]: jaro_winkler("conair","aircon")
Out[2]: 0.8333333333333334 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-11T22:50:26.357

看看 Needleman-Wunsch 或 Smith-Waterman 算法。它们用于通过调整 DNA 序列的编辑距离来处理字符串匹配，其中任何类型的插入、反转、转座子都可能发生在任何长度、任何位置。说到这里，我需要补充一点，对于足够长的字符串，没有最佳解决方案。并且不要忘记编辑成本取决于算法的使用上下文（语义问题），而任何算法始终是句法机器。

# jsf - 找不到 ManagedBean 属性

> ID：11675036
> 
> 赞同：2
> 
> 时间：2012-07-26T17:48:03.570
> 
> 标签：jsf, el

在我的 webapp 中，当我单击登录链接时，Tomcat 网络服务器会抛出以下异常：

```
exception
javax.servlet.ServletException: /aluno_jsf.xhtml: Property 'logout' not found on type
br.com.aluno.controller.LoginMB

javax.faces.webapp.FacesServlet.service(FacesServlet.java:422)

root cause
javax.el.ELException: /aluno_jsf.xhtml: Property 'logout' not found on type
br.com.aluno.controller.LoginMB
[...] 
```

这是我的@ManagedBean：

```
package br.com.aluno.controller;

import java.io.Serializable;
import java.util.Collection;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;
import javax.servlet.http.HttpSession;
import br.com.aluno.dao.DaoFactory;
import br.com.aluno.entity.Usuario;
import br.com.aluno.util.JsfUtil;

@ManagedBean
public class LoginMB implements Serializable {
private static final long serialVersionUID = 6667329439219329074L;

private Usuario usuario;

@PostConstruct
public void init() {
    usuario = new Usuario();
}

public void logar() {
    try {
        Collection<Usuario> usuarios = DaoFactory
                .getDAOFactory(DaoFactory.JPA).getUsuarioDao()
                .validarLogin(usuario);
        if (usuarios != null && usuarios.size() == 1) {

            usuario = usuarios.iterator().next();

            HttpSession session = (HttpSession) FacesContext
                    .getCurrentInstance().getExternalContext()
                    .getSession(true);
            if (session != null) {
                session.setAttribute("usuario", usuario);
                session.setAttribute("usuarioTipo", usuario.getClass()
                        .getName());
            }
        } else {
            JsfUtil.addErrorMessage("Login ou senha invalida",
                    "Login ou senha invalida");
        }
    } catch (Exception e) {
        JsfUtil.addFatalMessage("Entre em contato com o administrador",
                e.getMessage());
    }
}

public String logout() {
    HttpSession session = (HttpSession) FacesContext.getCurrentInstance()
            .getExternalContext().getSession(false);
    if (session != null) {
        session.invalidate();
    }
    return "/login?faces-redirect=true";
}

public Usuario getUsuario() {
    return usuario;
}

public void setUsuario(Usuario usuario) {
    this.usuario = usuario;
}
} 
```

我在 index.html 中有一个链接，它重定向到以下 login.xhtml：

```
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui" template="/aluno_jsf.xhtml">

<ui:define name="conteudo">
    <h:form rendered="#{sessionScope.usuario == null}">
        <h3>Login</h3>
        <p:messages id="messages" showDetail="true" autoUpdate="true" />
        <h:panelGrid columns="2">
            <p:outputLabel for="login" value="Login:" />
            <p:inputText id="login" value="#{loginMB.usuario.login}" required="true" 
requiredMessage="Digite um login" />
            <p:outputLabel for="senha" value="Senha:" />
            <p:password id="senha" value="#{loginMB.usuario.senha}" required="true" 
requiredMessage="Digite uma senha" />
            <p:commandButton action="#{loginMB.logar}" value="Logar" ajax="false" />
        </h:panelGrid>
    </h:form>
</ui:define> 
```

验证后，应呈现以下页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui" >
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>aluno_jsf</title>
</h:head>
<h:body>
<f:view>
    <h:form>
        <p:menubar
            rendered="#{sessionScope.usuarioTipo == 'br.com.aluno.entity.Administrador'}">
            <p:menuitem url="/administrador/cadastroCurso.xhtml"
value="Cadastro de curso" />
            <p:menuitem url="/administrador/cadastroDisciplina.xhtml" 
value="Cadastro de disciplinas" />
            <p:menuitem url="/administrador/cadastroAluno.xhtml" 
value="Cadastro de alunos" />
            <p:menuitem url="/administrador/atribuiNota.xhtml" 
value="Atribuicao de notas para alunos" />
            <p:menuitem action="#{loginMB.logout}" value="Logout" />
        </p:menubar>
        <p:menubar
rendered="#{sessionScope.usuarioTipo == 'br.com.aluno.entity.Aluno'}">
            <p:menuitem url="/aluno/nota.xhtml" value="Consulta de notas" />
            <p:menuitem url="/aluno/senha.xhtml" value="Alteracao de senha" />
            <p:menuitem action="#{loginMB.logout}" value="Logout" />
        </p:menubar>
    </h:form>
    <ui:insert name="conteudo">
    conteudo
    </ui:insert>
</f:view>
</h:body>
</html> 
```

由于我正在调整这个网络应用程序 - 而且我之前已经有一些错误配置 - 有人知道现在发生了什么吗？

提前致谢。

正如你所问，她是新的例外：

```
message Could not initialize class br.com.fiap.aluno.util.JpaUtil

description The server encountered an internal error (Could not initialize class     br.com.fiap.aluno.util.JpaUtil) that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Could not initialize class br.com.fiap.aluno.util.JpaUtil
javax.faces.webapp.FacesServlet.service(FacesServlet.java:422)

root cause

java.lang.NoClassDefFoundError: Could not initialize class br.com.fiap.aluno.util.JpaUtil
br.com.fiap.aluno.dao_jpa.JpaUsuarioDao.validarLogin(JpaUsuarioDao.java:46)
br.com.fiap.aluno.controller.LoginMB.logar(LoginMB.java:30)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
javax.el.BeanELResolver.invoke(BeanELResolver.java:484)
javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)
org.apache.el.parser.AstValue.getValue(AstValue.java:159)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:214)
com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:89)
com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:302)
com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
  com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:401)
com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.29 logs. 
```

我会尝试修复它，但如果您能提供一些提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T17:59:07.120

> javax.el.E​​LException：/aluno_jsf.xhtml：在类型 br.com.aluno.controller.LoginMB 上找不到属性“注销”

这表明`#{loginMB.logout}`被评估为 a`ValueExpression`而不是 a `MethodExpression`。

例如，如果您正在使用`<h:outputText value="#{loginMB.logout}" />`，或者即使由于缺少或不正确的 XML 命名空间声明或包含未包含在运行时类路径中的组件的 JAR 文件而无法解析`x`后面的命名空间，也会发生这种情况。`<x:someComponent action="#{loginMB.logout}" />`

到目前为止发布的代码中看不到原因，但我最好的猜测是您没有正确使用 Facelets 模板。该代码显示了`<ui:decorate>`. 前往此答案以了解如何正确使用模板组合：[如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:52:18.983

注销不是属性访问器，它是一种方法。

试试这个：#{loginMB.logout()}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T15:56:20.183

我有同样的问题，我通过删除我添加到我的 xhtml 文件中的注释来解决它

在此[页面上找到的解决方案](http://www.coderanch.com/t/523226/JSF/java/javax-el-PropertyNotFoundException-Property-logoutUser)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-15T22:55:48.943

我想提供一些您可能会`javax.el.ELException`在 xhtml 中获得 EL 方法参考的原因。考虑这是一个参考问题，也许其他人会继续贡献。

# Java EE 版本不匹配

*   在您的 AppServer 上运行的 Java EE 版本。这应该是您的 AppServer 文档的一部分，或者如果您自定义了它（例如在 tomcat 之上构建自己的），您应该知道。
*   使用的标签库，可以`xmlns`用你的`<html>`标签中的 used 来标识。

例如，如果您使用的是 Java EE 6，那么这是错误的：

```
<html 
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"> 
```

而应该是

```
<html 
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"> 
```

注意使用 sun.com 而不是 jcp。对于 Java EE 7 以上，您应该使用 jcp。

请注意，`<persistence>`persistence.xml 和`<beans>`beans.xml 中也存在类似问题！

# 不支持 MethodExpression 的标记属性

研究标签库的文档，了解您正在使用的确切版本。您将有几种可能性：

1.  tag 属性不包含在规范中。这可能是因为它仅在标签库的更高版本中添加。在这种情况下，代码将假定它是一个常规属性，并将在渲染阶段作为常规属性进行评估（寻找一个 getter）。这也是Java EE版本不匹配失败的原因。
2.  tag 属性已记录在案，但未指定它“*必须*评估为`javax.el.MethodExpression`”。在这种情况下，它期望提供的属性是不同的类型并尝试对其进行评估。如果提供了一个方法，它必须具有`()`语法，并且该方法将仅被执行以检索预期的类型。
3.  tag 属性已记录在案，但未记录为 type `javax.el.ValueExpression`，在这种情况下，它甚至不接受 EL 语法中的表达式，并且评估将立即发生并且仅在呈现期间发生。

对于这个特定的问题，我们可以参考[PrimeFaces 3.4 Tag Documentation](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/menuitem.html)。不幸的是，没有提供使用的确切版本。

# EL 实现不支持方法引用

在这种情况下，没有默认的方法引用`()`将被解释为常规属性，并尝试访问 getter/setter。

# c - linux 是否允许从信号处理程序进行任何系统调用？

> ID：11675040
> 
> 赞同：21
> 
> 时间：2012-07-26T17:48:16.337
> 
> 标签：c, linux, signals

我的理解是，通常，如果您从信号处理程序调用非异步信号安全函数，则行为是未定义的，但我听说 linux 允许您安全地调用任何系统调用。这是真的？此外，SIGSEGV 处理程序的唯一可移植行为是中止或退出，但我知道如果您返回，linux 实际上会恢复执行，对吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T17:57:07.613

根据[第 2 节`signal`手册](http://www.kernel.org/doc/man-pages/online/pages/man2/signal.2.html)：

> 有关可以从信号处理程序内部安全调用的异步信号安全函数列表，请参见 signal(7)。

[第 7 节`signals`手册](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)列出了以下函数和/或系统调用以及非常清晰的描述：

异步信号安全功能

```
 A signal handler function must be very careful, since processing elsewhere may
   be interrupted at some arbitrary point in the execution of the program.  POSIX
   has the concept of "safe function".  If a signal interrupts the execution of
   an unsafe function, and handler calls an unsafe function, then the behavior of
   the program is undefined.

   POSIX.1-2004 (also known as POSIX.1-2001 Technical Corrigendum 2) requires an
   implementation to guarantee that the following functions can be safely called
   inside a signal handler:

       _Exit()
       _exit()
       abort()
       accept()
       access()
       aio_error()
       aio_return()
       aio_suspend()
       alarm()
       bind()
       cfgetispeed()
       cfgetospeed()
       cfsetispeed()
       cfsetospeed()
       chdir()
       chmod()
       chown()
       clock_gettime()
       close()
       connect()
       creat()
       dup()
       dup2()
       execle()
       execve()
       fchmod()
       fchown()
       fcntl()
       fdatasync()
       fork()
       fpathconf()
       fstat()
       fsync()
       ftruncate()
       getegid()
       geteuid()
       getgid()
       getgroups()
       getpeername()
       getpgrp()
       getpid()
       getppid()
       getsockname()
       getsockopt()
       getuid()
       kill()
       link()
       listen()
       lseek()
       lstat()
       mkdir()
       mkfifo()
       open()
       pathconf()
       pause()
       pipe()
       poll()
       posix_trace_event()
       pselect()
       raise()
       read()
       readlink()
       recv()
       recvfrom()
       recvmsg()
       rename()
       rmdir()
       select()
       sem_post()
       send()
       sendmsg()
       sendto()
       setgid()
       setpgid()
       setsid()
       setsockopt()
       setuid()
       shutdown()
       sigaction()
       sigaddset()
       sigdelset()
       sigemptyset()
       sigfillset()
       sigismember()
       signal()
       sigpause()
       sigpending()
       sigprocmask()
       sigqueue()
       sigset()
       sigsuspend()
       sleep()
       sockatmark()
       socket()
       socketpair()
       stat()
       symlink()
       sysconf()
       tcdrain()
       tcflow()
       tcflush()
       tcgetattr()
       tcgetpgrp()
       tcsendbreak()
       tcsetattr()
       tcsetpgrp()
       time()
       timer_getoverrun()
       timer_gettime()
       timer_settime()
       times()
       umask()
       uname()
       unlink()
       utime()
       wait()
       waitpid()
       write()

   POSIX.1-2008 removes fpathconf(), pathconf(), and sysconf() from the above
   list, and adds the following functions:

       execl()
       execv()
       faccessat()
       fchmodat()
       fchownat()
       fexecve()
       fstatat()
       futimens()
       linkat()
       mkdirat()
       mkfifoat()
       mknod()
       mknodat()
       openat()
       readlinkat()
       renameat()
       symlinkat()
       unlinkat()
       utimensat()
       utimes() 
```

我相信这些信息比我们有时在某处听到的信息更可靠。所以 Linux 确实只允许一些系统调用，但不是全部。所以你的问题的答案很简单——不。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T08:19:09.200

是和否

是的：

您可以在信号处理程序中调用任何真实/原始系统调用。内核有责任确保它是安全的（在内核看来）。

1）内核不知道用户空间的上下文，或者说内核在传递信号时将状态保存到用户空间后故意忘记了它。（注意：执行恢复是由用户通过系统调用在保存状态的帮助下完成的，而不是真正由内核完成，内核已经忘记了）

2）一些线程库是通过单线程实现的，因此线程已经在“信号处理程序”中，但是这些线程可以调用任何系统调用。

不：

但是用户空间函数有其自身的目的和副作用。有些不是[重入安全的](http://en.wikipedia.org/wiki/Reentrancy_%28computing%29)，这些函数不能从信号处理程序中调用。`man 7 signal`将帮助您找出哪些是重新进入安全的。

举个例子，你可以`sys_futex()`在任何地方调用，包括信号处理程序，但是如果你`sys_futex()`用来实现互斥锁，`sys_futex()`当信号中断互斥锁的关键部分时，内部信号处理程序可能会永远阻塞。

> 此外，SIGSEGV 处理程序的唯一可移植行为是中止或退出，但我知道如果您返回，linux 实际上会恢复执行，对吗？

是的，如果你找不到原因。一些用户可能将 SIGSEGV 用于他们自己的按需映射目的（例如，在 JIT 中，您可以翻译 SIGSEGV 信号处理程序中的代码并将翻译后的代码映射到内存然后返回），他们可以调用 mmap() 或 mprotect （） ...ETC。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-27T04:38:42.277

我相信任何真正的系统调用都可以从信号处理程序中调用。真正的系统调用在`<asm/unistd.h>`（或`<asm/unistd_64.h>`）中有一个数字。

[手册页第 2 节中的一些 posix 函数是通过“多路复用”系统调用实现的，因此在我看来它们不是“真正的系统调用”]

从应用程序的角度来看，系统调用是原子操作；它几乎就像一条机器指令（来自应用程序内部）。看到[这个答案](https://stackoverflow.com/a/11609768/841108)。

如果您的问题是：处理程序*可以通过或`SIGSEGV`更改错误的地址映射吗？`mprotect``mmap`*那么我相信答案是*肯定*的（至少在 x86-64 和 x86-32 架构上），正如您在引用的问题中[所说](https://stackoverflow.com/a/2663575/841108)的，但我没有尝试。我读过这样做效率很低（`SIGSEGV`处理速度不是很快，`mprotect`或者`mmap`也有点慢）。特别是，以这种方式模仿[Hurd/Mach 外部寻呼机](http://www.gnu.org/software/hurd/microkernel/mach/external_pager_mechanism.html)可能效率低下。

# c# - 使用 Openxml 将巨大的 xml 导出到 excel

> ID：11675041
> 
> 赞同：-2
> 
> 时间：2012-07-26T17:48:21.187
> 
> 标签：c#, xml, stream, openxml, export-to-excel

我尝试使用 openxml sdk 2.0 将一个大的转换后的 xml 数据写入 excel。它给了我一个很大的例外。我认为 Open xml 不支持将批量数据写入 excel ..我能够写入 50000 行。这是我的代码::

```
 public void AddPartXml(OpenXmlPart part, string xml)
     { 
        using (Stream stream = part.GetStream())
        {
          byte[] buffer = (new UTF8Encoding()).GetBytes(xml);
          stream.Write(buffer, 0,buffer.Length);
          stream.Dispose();
        } 
    } 
```

有没有可能我们可以将数据写入块中而不是一次性写入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T14:18:18.937

> 有没有可能我们可以将数据写入块中而不是一次性写入。

不，但是您可以将 OpenXML 库与 XmlTextWriter 结合使用来解决此类问题。

看看我的免费 C#“导出到 Excel”库中的源代码。

[http://www.mikesknowledgebase.com/pages/CSharp/ExportToExcel.htm](http://www.mikesknowledgebase.com/pages/CSharp/ExportToExcel.htm)

在尝试构建我想*在内存*中写入的整个 Excel .xlsx 文件的“图像”时，我遇到了同样的问题。最终，您的应用程序将耗尽内存并崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:23:15.727

如果字符串很长，可以使用

```
public override int GetBytes(
string s,
int charIndex,
int charCount,
byte[] bytes,
int byteIndex
) 
```

逐个转换，甚至重用字节数组。

# sockets - 如何在linux上为socket设置keepAlive

> ID：11675044
> 
> 赞同：0
> 
> 时间：2012-07-26T17:48:32.250
> 
> 标签：sockets, timeout

我正在尝试使用 apache FtpCiient 下载一个大文件，并且我每 2 小时不断超时。所以，我设置了 FTPClient.setDataTimeout(readTimeoutInMs); 到 3 小时

它适用于windows，但不适用于linux。

我在 JavaDocs SocketClient.setKeepAlive() 中看到了这一点 -

在当前打开的套接字上设置 SO_KEEPALIVE 标志。从 Javadocs 来看，默认的 keepalive 时间是 2 小时（尽管这取决于实现）。看起来 Windows WSA 套接字实现似乎允许设置特定的 keepalive 值，**尽管在其他系统上似乎并非如此。**

那么，我的 readTimeout=3hours 在 linux 上不起作用是真的吗？我能做些什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:02:58.447

你混淆了几件事。Keepalive 和读取超时不是一回事。

*   Keepalive 是一种检测死连接的 TCP 协议技巧，例如用于 Telnet 服务器。默认关闭，开启时默认测试间隔为两小时。对于一个活跃的 FTP 连接，我怀疑打开它会有什么不同。

*   如果在超时期限内未收到任何数据，则读取超时会导致读取操作超时。它适用于每个单独的阅读。

*   您提到的 FTP 数据超时可能又是别的东西，例如总传输超时。您必须查看它的文档才能确定。

# c++ - Qt gridlayout方形单元格

> ID：11675053
> 
> 赞同：1
> 
> 时间：2012-07-26T17:49:17.760
> 
> 标签：c++, qt, layout, qt4

我有一个屏幕 ui 文件，它有一个网格布局和 8 个按钮，布局如下

```
 ---------------------
|                     | 
| 1     2     3     4 |
|                     | 
|                     |
| 5     6     7     8 |
|                     |
 --------------------- 
```

这些按钮设置了背景图像。当按钮不是方形时，图像在调整窗口大小时看起来很奇怪。我必须支持调整窗口大小。有没有办法确保按钮始终是正方形（宽度和高度相等），无论窗口大小是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:54:59.967

当整个小部件的比例不是 2:1 时，使用带有几个[QSpacerItems （在边缘）的](http://doc.qt.nokia.com/4.8/qgridlayout.html)[QGridLayout来扩展以填充额外的空间。](http://doc.qt.nokia.com/4.8/qspaceritem.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:20:59.780

一种可能的解决方案：

使用`QPushButton::setFixedSize()`, 并为所有按钮设置所需的大小。

这将防止您的按钮缩小/增加尺寸，但如果您将窗口放大，则按钮之间会有空间。它可能看起来也很奇怪。

# playframework - 伊豆在玩！连接用完了

> ID：11675054
> 
> 赞同：1
> 
> 时间：2012-07-26T17:49:20.017
> 
> 标签：playframework, playframework-2.0, ebean

试图对我的新游戏进行压力测试！Java 应用程序。在发出一些数据库请求后，我开始出现故障和 [out of connections] 错误。甚至当我尝试使用我的 MySql 控制台时，我也无法使用，因为我所有的连接都被 Play 占用了！

解决这个问题的正确方法是什么？Ebean 有某种连接池吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:49:20.017

不容易，但谷歌终于把我带到了游戏框架网站，这个

[http://www.playframework.org/documentation/2.0/SettingsJDBC](http://www.playframework.org/documentation/2.0/SettingsJDBC)

很好的解释，或者更确切地说，复制粘贴如何配置 ebean。您将这些配置放入您的 application.conf 中，一切都应该正常工作。

# java - 访问查询结果

> ID：11675060
> 
> 赞同：0
> 
> 时间：2012-07-26T17:49:25.270
> 
> 标签：java, jdbc

我是 Java 初学者，但我有以下代码

```
limit = con.prepareStatement("SELECT COUNT(*) FROM San_CadastraDigital WHERE Cliente_Id = ?");

public String Verify(String client) {
    try {
        limit.setString(1, client);
        ResultSet rs = limit.executeQuery();

        while (rs.next()) {
            int limitDigital = rs.getInt(0);            
            if (limitDigital < 3) {
                return "1";
            } else {
                return "0";
            }
        }
    } catch (SQLException e) {
        ui.writeLog(e.getMessage());
        return "0";
    }

    return "0";
} 
```

但我收到一个错误，指出索引 0 中的列超出范围。

我的查询在我的数据库中运行良好。

我怎样才能得到我的查询结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:38:06.813

根据[ResultSet#getInt(int) 的 API 文档](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getInt%28int%29)：

> columnIndex -**第一列为 1**，第二列为 2，...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T17:52:15.493

试试这个：

```
 if(!rc.first())
        {
          //no rows
          return "0";
        }

        do {
            int limitDigital = rs.getInt(0);            
            if (limitDigital < 3) {
                return "1";
            } else {
                return "0";
            }
        } while (rs.next()) 
```

我认为您正在使用 rs.next() 移动光标并跳过第一个结果。

# javascript - 有什么方法可以避免使用 JSDoc“@method”注解

> ID：11675065
> 
> 赞同：13
> 
> 时间：2012-07-26T17:49:38.983
> 
> 标签：javascript, jsdoc

我个人不是生成文档的忠实粉丝（我更像是一个“阅读源卢克”的人），但我可以看到这些文档对其他人有何用处。现在，通常他们生成文档不会影响我，除了一件事：@method。

大多数 JSDoc 注释（例如`@param`）对于阅读源代码的人仍然非常有用，但`@method`100% 是多余的：

```
/*
 * @param num number to add five to
 * @method addFive
 */
function addFive(num) { ... 
```

所以，我真的很想避免数百`@method`行代码把我们的代码弄得乱七八糟。但是，我的同事认为`@method`JSDoc 生成器（他正在使用 YUI 生成器）必须能够生成类的方法列表。

所以，我的问题（对那里的 JSDoc 专家）是：有没有办法生成有用的文档（即使用列出的类的方法）`@method`？或者，如果`@method`确实需要，是否有任何 JSDoc 生成器可以从函数名中推断出方法名，这样我就可以`@method`不用了`@method addFive`？

PS如果有一个“你做错了”类型的答案，它没有直接回答问题，但提出了一种完全避免问题的方法，我很想听听；我当然不是 JSDoc 专家。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T16:33:14.547

您的同事并不完全正确。

这`@method`是一个[JSDoc3](http://usejsdoc.org/)扩展，是 的同义词`@function`，[在此处定义](http://code.google.com/p/jsdoc-toolkit/wiki/TagFunction)。

正如那些文档概述的那样，您只需要使用`@function`来*强制*JSDoc 将变量识别为函数。这方面的一个例子是：

```
/**
 * @function
 */
var func = functionGenerator.generate(); 
```

从对象的角度来看，每当您以非显而易见的方式将 Function 对象分配给对象成员时（通过“非显而易见”，我的意思是就静态分析而言，即如果您是不使用函数表达式）。

所以，像

```
var ageGetter = function() {
    console.log("A lady never tells");
}

var Person = {

  name: "Gertrude", 

  getAge: ageGetter

  getName: function() {
    return this.name;
  }
} 
```

需要明确使用`@method`or `@function`，`getAge`但不需要 for `getName`。

Final point: you do not need to explicitly include the `@method` name unless that, too, is impossible to infer (at which point, you're probably doing some pretty funky instantiation, so probably haven't been able to rely on auto doc-generation much anyway).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T20:10:32.260

我在这里可能是错的，但由于在 JavaScript 中定义事物的方式有很多种，因此您需要`@method`某些定义。

```
// JSDoc will recognize this as an object member
var obj = {
    mymethod: function() {}
};

// There is no way for JSDoc to tell where my method is going to end up
var mymethod = function() {};
obj.mymethod = mymethod; 
```

# macos - 下载会破坏 OSX 签名？

> ID：11675066
> 
> 赞同：4
> 
> 时间：2012-07-26T17:49:42.953
> 
> 标签：macos, install4j, osx-gatekeeper

我刚刚开始签署我的 OSX 桌面应用程序，以便可以轻松地将其安装在 OSX 10.8 上。我遇到了一个非常奇怪的问题，签名工作正常，如果 dmg 通过 DropBox 或 FTP 传输到 Mac，我可以安装，但如果 dmg 上传到服务器，然后使用浏览器下载到 Mac，则签名失败（用户会看到与文件未签名相同的错误）。

背景：该应用程序是 Java，在 Install4J 中使用 Apple 的 .p12 签名。有趣的是，对于未签名或下载的 DMG，OSX 10.8 显示的错误非常奇怪，它表示安装程序“损坏”并且应该卸载。

任何人都知道为什么使用浏览器下载 DMG 时签名会失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:05:14.760

Ingo 有正确的答案，但我想指出是什么帮助混淆了这个问题。使用 dropbox / ftp 移动安装程序时，GateKeeper 似乎不会检查签名 - 仅当使用浏览器（或者可能还有其他选择方法）下载它们时。

所以看起来传输方法有所不同，而实际上签名根本不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:54:21.877

您使用了错误的证书进行签名。要签署 install4j 安装程序，您需要应用程序 ID 证书，而不是安装程序 ID 证书。

不幸的是，如果证书链不完整，install4j 5.1.1 在编译期间不会抱怨。install4j 5.1.2 将解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:03:16.167

为了澄清，我想补充一点，要使用的苹果证书是“开发者 ID 申请”证书。它可以从应用程序 -> 实用程序 -> 钥匙串访问在 Mac 上导出。

# asp.net - 当解决方案还包含 WinForms 测试时，使用内存托管的 WebApi 测试会挂起

> ID：11675067
> 
> 赞同：1
> 
> 时间：2012-07-26T17:49:43.980
> 
> 标签：asp.net, nunit, asp.net-web-api

我有一个包含许多不同项目的解决方案，其中包括 WinForms 和 WebApi (RC)。当先前的测试实例化派生自`System.Windows.Forms.Form`. 您可以在此处找到演示问题的示例解决方案：[https ://dl.dropbox.com/u/3688049/SampleSolutions/TestSolution.zip](https://dl.dropbox.com/u/3688049/SampleSolutions/TestSolution.zip)

该解决方案启用了 NuGet 包还原，因此所有依赖项都应在构建时被拉下。

如果`var form = new Form1();`Class1.cs 中的调用没有被注释掉，那么测试将挂起（使用最新的 nuget 版本的 nunit）。如果它被注释掉，则测试通过。

任何帮助将不胜感激。

**Class1.cs**

```
[TestFixture]
public class Class1
{
    [Test]
    public void AaaWindowsFormsApp() {
        // If this line is not commented out the BbbTestWebApiApp test will hang.
        var form = new Form1();
    }

    [Test]
    public void BbbTestWebApiApp() {
        var config = new HttpConfiguration();
        var server = new HttpServer(config, new MyMessageHandler());
        var client = new HttpClient(server);

        var request = new HttpRequestMessage(HttpMethod.Get, "http://localhost/");

        var response = client.SendAsync(request).Result;

        Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
    }
} 
```

**MyMessageHandler.cs**

```
public class MyMessageHandler: DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken) {
        return Task.Factory.StartNew(() => request.CreateResponse(HttpStatusCode.OK));
    }
} 
```

**更新**

似乎将`RequiresSTA`属性添加到`System.Windows.Forms.Form`测试可以解决问题。

我不确定为什么添加 WebApi 内存托管会暴露问题。

**更新 2**

`RequiresSTA`只有当您通过 GUI 运行测试时，它似乎才有帮助。控制台运行器似乎仍然挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:47:07.997

这看起来确实像 nUnit 处理 WinForms 中的一个错误。

我运行了您的解决方案并注意到：

1.  如果您将 WebAPI 和 WinForms 测试方法分成不同的类，它会起作用
2.  如果您在 WebAPI 测试方法之后运行 WinForms 测试方法，它会起作用
3.  测试与 xUnit 完美配合

如果您可以接受其中任何一个，我会这样做而不用担心 nUnit（也许我这么说是因为我在 xUnit 中完成了所有工作:)）

# bash - Makefile `echo -n' 不工作

> ID：11675070
> 
> 赞同：31
> 
> 时间：2012-07-26T17:49:49.100
> 
> 标签：bash, makefile, echo

我试图让我的 Makefile 回显文本没有尾随的新行，但我做不到。我正在体验 OS X 上的行为（在 Linux 上一切都按预期工作）。

### 生成文件

```
a:
    @echo -n "hello"

b:
    @echo -n hello

c:
    @/bin/echo -n "hello" 
```

输出：

```
$make a
-n hello
$make b
hello$make c
hello$ 
```

换句话说，`make a`它坏了。到底发生了什么？是否使用内置回声？显然双引号的存在会改变行为，但为什么呢？

### 更新

正如@chepner 所发现的，`/bin/echo`在makefile 中使用完整路径可以正确理解-n 标志。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-02T11:28:29.927

问题来自两个事实的*不幸*相互作用。

首先，`make`根据要运行的配方的复杂性，有两种操作模式：

*   如果命令很*简单*，`make`将直接使用其内置命令运行配方。这就是你的`b`情况。
*   如果命令很*复杂*，`make`将生成一个 shell 来解释和运行配方。这就是你的`a`情况。

其次，`make`用作`/bin/sh`shell，但`/bin/sh`在 Mac OS X 和 Linux 上实现的功能不同：

*   在 Mac OS X 上， 的功能`/bin/sh`由`bash`. 同样在 Mac OS X 上，`bash`使用`--enable-strict-posix-default`. 该标志的一个后果是该`echo`命令不理解该`-n`标志。
*   在 Linux 上， 的功能`/bin/sh`是由其实现的`dash`，相对于 POSIX 规范不那么严格。因此，该标志`-n`在`echo`命令中实现。

顺便说一句，Makefile buitlin`echo`命令理解`-n`标志，它解释了为什么这种`b`情况总是有效的。

解决问题的干净便携的方法是用食谱替换你`@echo -n`的`@printf`食谱。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-26T18:32:53.637

一些关于报价的东西令人困惑`make`。您的代码对我来说表现相同，但以下内容按预期工作：

```
help:
        @echo -n Shouldn\'t print a newline 
```

硬编码可执行文件的路径也可以：

```
help:
        @/bin/echo -n "Shouldn't print a newline" 
```

的 Mac OS X 手册页`echo`在讨论 shell 内置`echo`s 的存在时提到`echo`of`sh(1)`不支持该`-n`选项，但这无法解释（无论如何对我来说）我的第一个替代方案为何有效。

* * *

`make`默认情况下用于`sh`执行命令的确认。[制作手册 5.3.2 选择 Shell](https://www.gnu.org/software/make/manual/html_node/Choosing-the-Shell.html)指定此 hehavrior：

> 用作 shell 的程序取自变量 SHELL。如果您的 makefile 中未设置此变量，则程序 /bin/sh 将用作 shell。传递给 shell 的参数取自变量 .SHELLFLAGS。.SHELLFLAGS 的默认值通常是 -c，或者在符合 POSIX 的模式下是 -ec。

在

```
SHELL = bash
help:
        @echo -n "Shouldn't print a newline"
        @echo -n Shouldn\'t print a newline 
```

两个 echo 语句的行为相同（不打印换行符）。因此，如果没有该变量，我们就`bash`假装是`sh`，但对这两行的评估方式不同。问题一：为什么？问题2：第二行是本机`bash`回声还是`/bin/echo`，而不是模拟`sh` `echo`？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T17:55:53.450

echo 是内置的 bash shell，但是当您从 makefile 运行它时，它是程序版本

# performance - 测量执行 t-sql 查询所需的时间

> ID：11675077
> 
> 赞同：186
> 
> 时间：2012-07-26T17:49:59.587
> 
> 标签：performance, sql-server-2005

我有两个使用 SqlServer 2005 的 t-sql 查询。如何测量每个查询需要多长时间？

使用我的秒表并没有减少它。

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2012-07-31T13:42:48.243

如果您想要比上述答案更准确的测量：

```
set statistics time on 

-- Query 1 goes here

-- Query 2 goes here

set statistics time off 
```

结果将出现在“*消息*”窗口中。

**更新（2015-07-29）：**

应普遍要求，我编写了一个代码片段，您可以使用它来计时整个存储过程的运行时间，而不是它的组件。尽管这仅返回上次运行所花费的时间，但返回的其他统计信息`sys.dm_exec_procedure_stats`也可能有价值：

```
-- Use the last_elapsed_time from sys.dm_exec_procedure_stats
-- to time an entire stored procedure.

-- Set the following variables to the name of the stored proc
-- for which which you would like run duration info
DECLARE @DbName NVARCHAR(128);
DECLARE @SchemaName SYSNAME;
DECLARE @ProcName SYSNAME=N'TestProc';

SELECT CONVERT(TIME(3),DATEADD(ms,ROUND(last_elapsed_time/1000.0,0),0)) 
       AS LastExecutionTime
FROM sys.dm_exec_procedure_stats
WHERE OBJECT_NAME(object_id,database_id)=@ProcName AND
      (OBJECT_SCHEMA_NAME(object_id,database_id)=@SchemaName OR @SchemaName IS NULL) AND
      (DB_NAME(database_id)=@DbName OR @DbName IS NULL) 
```

* * *

## 回答 #2

> 赞同：210
> 
> 时间：2012-07-26T18:00:28.297

测量事件之间“经过时间”的一种简单方法是仅获取当前日期和时间。

在 SQL Server 管理工作室中

```
SELECT GETDATE();
SELECT /* query one */ 1 ;
SELECT GETDATE();
SELECT /* query two */ 2 ; 
SELECT GETDATE(); 
```

要计算经过的时间，您可以将这些日期值抓取到变量中，并使用 DATEDIFF 函数：

```
DECLARE @t1 DATETIME;
DECLARE @t2 DATETIME;

SET @t1 = GETDATE();
SELECT /* query one */ 1 ;
SET @t2 = GETDATE();
SELECT DATEDIFF(millisecond,@t1,@t2) AS elapsed_ms;

SET @t1 = GETDATE();
SELECT /* query two */ 2 ;
SET @t2 = GETDATE();
SELECT DATEDIFF(millisecond,@t1,@t2) AS elapsed_ms; 
```

这只是一种方法。您还可以使用 SQL Profiler 获取查询的经过时间。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2019-09-05T08:34:22.473

另一种方法是使用名为的 SQL Server 内置功能`Client Statistics`，可通过**Menu > Query > Include Client Statistics**访问。

您可以在单独的查询窗口中运行每个查询，并比较`Client Statistics`选项卡旁边的`Messages`选项卡中给出的结果。

例如，在下图中，它显示我的一个查询获得服务器回复的平均时间为 39 毫秒。

[![结果](../Images/43c3bf42e956d5f333ceb37fb5b224b7.png)](https://i.stack.imgur.com/mBPFZ.jpg)

[您可以在此处](http://www.sqlserver.info/management-studio/show-query-execution-time/)阅读所有 3 种获取执行时间的方法。您甚至可能需要显示`Estimated Execution Plan` `ctrl``L`以进一步调查您的查询。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-09-24T06:38:06.273

```
DECLARE @StartTime datetime
DECLARE @EndTime datetime
SELECT @StartTime=GETDATE() 

 -- Write Your Query

SELECT @EndTime=GETDATE()

--This will return execution time of your query
SELECT DATEDIFF(MS,@StartTime,@EndTime) AS [Duration in millisecs] 
```

[您还可以查看此解决方案](https://stackoverflow.com/questions/564717/measuring-query-performance-execution-plan-query-cost-vs-time-taken/18974538#18974538)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-06-28T19:05:19.357

更好的是，这将测量查询的 n 次迭代的平均值！非常适合更准确的阅读。

```
declare @tTOTAL int = 0
declare @i integer = 0
declare @itrs integer = 100

while @i < @itrs
begin
declare @t0 datetime = GETDATE()

--your query here

declare @t1 datetime = GETDATE()

set @tTotal = @tTotal + DATEDIFF(MICROSECOND,@t0,@t1)

set @i = @i + 1
end

select @tTotal/@itrs 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-05-23T22:43:53.883

单击统计图标以显示并运行查询以获取时间并了解查询的效率

# ruby-on-rails - 具有数据类型的属性访问器

> ID：11675081
> 
> 赞同：1
> 
> 时间：2012-07-26T17:50:11.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, attr-accessor

我希望设置一个具有与之关联的数据类型的属性访问器，就像我们在模型中的字段如何具有数据库，这些数据库具有与它们相关联的数据类型，如字符串、整数等。

我如何告诉 rails 我的 attr_accessor 应该响应特定的数据类型。我希望为我要创建的访问器设置一个日期时间，

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:05:16.523

您可以制作一个自定义设置器，例如

```
def field_name=(value)
  # check for type and dont assign it if its the wrong typ
  # or raise an error
end 
```

就在我头顶

另外，重复的问题：[attr_accessor strong typed Ruby on Rails](https://stackoverflow.com/questions/7988410/attr-accessor-strongly-typed-ruby-on-rails)

# android - 针对高分辨率密集像素设备的媒体查询

> ID：11675084
> 
> 赞同：3
> 
> 时间：2012-07-26T17:50:23.830
> 
> 标签：android, css, media-queries

我们正在尝试专门针对三星 Galaxy Nexus。它的分辨率为 1280 x 720，像素密度为 2，这使得它可以像桌面设备一样显示页面。

我们试过了

`@media screen and (max-device-width : 720px) and (-webkit-max-device-pixel-ratio : 2) and (portrait) {};`

和

`@media screen and (max-device-width : 720px) and (-webkit-max-device-pixel-ratio : 2) {};`

以及其他多种组合。在不影响桌面、平板电脑或其他手机布局的情况下，我们似乎无法专门针对此设备。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:55:41.027

您的媒体查询不正确：

```
@media only screen
and (min-device-width : 720px)
and (-webkit-min-device-pixel-ratio : 2)
and (orientation : portrait) { /* styles */ };

@media only screen
and (min-device-width : 720px)
and (-webkit-min-device-pixel-ratio : 2) { /* styles */ }; 
```

不确定第二个目标是什么。您可能需要考虑添加以下媒体查询：

```
@media only screen
and (min-device-width : 1280px)
and (-webkit-min-device-pixel-ratio : 2)
and (orientation : landscape) { /* styles */ }; 
```

试试看。

# ruby-on-rails - 这个rails语法是什么意思？

> ID：11675085
> 
> 赞同：1
> 
> 时间：2012-07-26T17:50:24.577
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好的，所以我构建了这个应用程序一段时间，它是一个 rails 2.3.5 应用程序，我使用了这个语法

```
@user = User.new
@user.build_company 
```

我完全忘记了这意味着什么以及如何转换为 rails 3 语法

```
class User < ActiveRecord::Base
  has_one :company

class Company < ActiveRecord::Base
   belongs_to :user 
```

我隐约记得 rails 会使用 build_ 并做一些事情，但我不记得了，我似乎无法在任何地方找到文档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:57:17.893

`.build_`将创建一个关联类型（公司）的新对象，该对象链接到调用它的对象（用户），但尚未保存。AFAIK 这在 Rails 3 中没有改变。

请参阅此问题： [Ruby on Rails。如何在 :belongs to 关系中使用 Active Record .build 方法？](https://stackoverflow.com/questions/783584/ruby-on-rails-how-do-i-use-the-active-record-build-method-in-a-belongs-to-rel)

它指向的文档：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:58:34.867

这是 Rails 3 的正确语法。

has_one 关系：

```
@parent.build_child 
```

has_many 关系：

```
@parent.children.build 
```

# api - RESTful API - 如何删除动词并在 GET、POST、PUT、DELTE 之外保留特殊操作？

> ID：11675086
> 
> 赞同：2
> 
> 时间：2012-07-26T17:50:34.280
> 
> 标签：api, codeigniter, rest, restful-url, restful-architecture

# 问题

我们如何使资源不是动词......但在默认`GET`, `POST`, `PUT`,动作之外仍然保持其特殊`DELTE`动作？

# 细节

我一直在寻找构建 RESTful API 的正确方法。那里有很多很棒的信息。现在我实际上正试图将它应用到我的网站并遇到了一些障碍。

**我们的网站做什么：**

*   我们的网站允许人们玩游戏并赢取奖品。

*   该 API 将允许开发人员构建自己的游戏并使用我们的后端来收集、验证、存储用户信息并发放奖品。

## 设想：

开发人员将创建他们的游戏，然后调用我们的 API 让玩家玩游戏 ( `play_game`)。这种`play_game`方法结合了我们不希望开发人员独立运行的多个功能。

**以下是`play_game`调用在服务器上的作用：**

1.  它接受开发者想要存储的玩家数据。
2.  验证数据（将其与控制面板中的规则设置进行比较）
3.  计算应该给予什么奖品。
4.  将赢得的奖品返回给开发者。
5.  此外，还有多个在幕后触发的功能，例如发送电子邮件等。

**资源** *这是我们当前资源的样子：*

```
 http://site.com/api/play_game 
```

**问题**：

这不符合 RESTful API 中没有动词的想法。

我们如何使这个资源不是动词......但在默认`GET`, `POST`, `PUT`,动作之外仍然保持它的特殊`DELTE`动作？

**笔记：**

在问[了这个问题](https://stackoverflow.com/questions/11671178/restful-api-how-do-i-return-different-results-for-the-same-resource)之后，我决定使用 Phil Sturgeons RESTful 框架......除非有人有更好的主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:19:51.780

您可以将以下代码放入**applications/routes.php**

```
$route['(.*)'] = 'api'; 
```

然后您可以访问您的 API，例如： [http ://site.com/play_game](http://site.com/play_game)

**但**

您只能访问一个控制器（您的 api 控制器）希望它有所帮助

# java - Java 使用变量名来操作数组

> ID：11675093
> 
> 赞同：2
> 
> 时间：2012-07-26T17:51:06.427
> 
> 标签：java

是否可以使用变量名来操作数组？

例如：

```
String addto = "database";
database = new String[2]; 
```

我想将值添加到名为“数据库”的数组中，该数组只有 1 列。

有没有可能做类似...

```
addto[0] = hi;
addto[1] = hi1; 
```

代替

```
database[0] = hi;
database[1] = hi1; 
```

ETC？使用“addto”（“database”）中的值来操作数组？

谢谢！

**编辑：将字符串添加到“数据库”（带有“”）**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:00:58.567

你想使用类似的东西：

```
Map<String, String[]> arrays = new HashMap<String, String[]>();
arrays.put("database", new String[2]);

...

map.get(addTo)[0] = hi;
map.get(addTo)[1] = hi1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:18:43.453

```
String addto = "database"; 
database = new String[2];  
addto[0] = hi;  
addto[1] = hi1; 
```

此代码将无法编译，因为`addto`它是一个字符串并且不支持使用`[]`. 要执行类似的操作，您可以使用[`java.util.Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)Jon Skeet 所示的 a。

# ruby-on-rails - 获取 Facebook 公共个人资料 URL

> ID：11675095
> 
> 赞同：0
> 
> 时间：2012-07-26T17:51:15.567
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, facebook-fql, nokogiri

我正在我的网络服务中构建一个功能，让人们在一个字段中输入他们的 Facebook URL。因为很少有人知道他们的 FB 用户名或公共个人资料 URL，所以我想提供一个界面来提供帮助。

简而言之：有没有办法通过单独提供名称来获取匹配用户的公共 URL 列表？

我试过检查 Facebook Open Graph API；这似乎需要知道此人的用户 ID 或用户 ID。

我曾尝试使用 Mechanize 和 Nokogiri 来自动化该过程，以我自己的身份登录 Facebook 并访问搜索功能（http://facebooks.com/search/results.php?q=Person%20Name），但它没有返回任何数据当尝试这种方式时。我怀疑 Facebook 正在使用某种 joojoo 来阻止我。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:10:09.083

使用有效的访问令牌，您应该能够查询`https://graph.facebook.com/me/`以获取他们的 ID、名称和**公共 URL （这是使用**[Graph API Explorer](https://developers.facebook.com/tools/explorer?method=GET&path=me)的示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:11:36.747

图 API 中有一个搜索端点，不幸的是它需要有效的用户访问令牌。

`https://graph.facebook.com/search?q=<name>&type=user&access_token=<user access token>`

然而，它甚至可能是你的，通过获得一个长期存在的访问令牌，它最多可以工作 60，但这可能是一个坏主意。

类型可以是`user`, `post`, `event`, `group`, `page`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:47:23.740

在进行了额外的研究后，似乎无法在未经用户许可的情况下获取用户的公开个人资料页面。我猜，Facebook 隐私设置万岁。

但是，获得访问令牌比我想象的要容易。Facebook[在其网站上提供了一个示例，](https://developers.facebook.com/docs/authentication/client-side/)用于获取用户访问其帐户的权限，*完全在客户端实现*。好，易于; 访问令牌在 URL 中返回。

这里唯一的缺点是您必须在 Facebook 上创建一个应用程序，地址为[http://developers.facebook.com/apps](http://developers.facebook.com/apps)。就我的目的而言，“带有 Facebook 登录的网站”是应用程序类型。

从那时起，您可以使用该令牌轻松查询 Graph API，正如 Warpling 和 complex857 所建议的那样。

# c# - 使用 Compiled Lambda 表达式而不是 Activator.CreateInstance 来初始化 SoapHttpClientProtocol 对象

> ID：11675097
> 
> 赞同：6
> 
> 时间：2012-07-26T17:51:20.857
> 
> 标签：c#, linq, reflection, expression-trees, activator

我正在使用动态实例化`SoapHttpClientProtocol`对象（代理类）并使用该对象调用 WS-Basic I Web 服务的代码。这是我的代码的简化版本：

```
public override object Call(Type callingObject,
string method, object[] methodParams, string URL)
{
    MethodInfo requestMethod = callingObject.GetMethod(method);

    //creates an instance of SoapHttpClientProtocol
    object instance = Activator.CreateInstance(callingObject);

    //sets the URL for the object that was just created 
    instance.GetType().InvokeMember("Url", 
    BindingFlags.Public | BindingFlags.Instance | BindingFlags.SetProperty, null,
    instance,
    new object[1] {URL});

    return requestMethod.Invoke(instance, methodParams); 
} 
```

我注意到在某些情况下`Activator.CreateInstance()`调用可能会花费大量时间，因此我尝试[使用 lambda 表达式](http://bloggingabout.net/blogs/vagif/archive/2010/04/02/don-t-use-activator-createinstance-or-constructorinfo-invoke-use-compiled-lambda-expressions.aspx)来优化代码：

```
public override object Call(Type callingObject,
string method, object[] methodParams, string URL)
{
    MethodInfo requestMethod = callingObject.GetMethod(method);

    //creates an instance of SoapHttpClientProtocol using compiled Lambda Expression
    ConstructorInfo constructorInfo = callingObject.GetConstructor(new Type[0]);
    object instance = Expression.Lambda(Expression.New(constructorInfo)).Compile();

    //sets the URL for the object that was just created 
    instance.GetType().InvokeMember("Url", 
    BindingFlags.Public | BindingFlags.Instance | BindingFlags.SetProperty, null,
    instance,
    new object[1] {URL});

    //calls the web service
    return requestMethod.Invoke(instance, methodParams); 
} 
```

不幸的是，这段代码没有创建该`callingObject`类型的对象（而是返回一个`Func<T>`委托对象），因此当它试图`Url`在下一行中设置时，它会抛出一个异常：

> System.MissingMethodException：试图访问缺少的成员。

我的代码中是否缺少某些内容？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:27:43.200

该`Expression.Lambda(Expression.New(constructorInfo)).Compile()`部分返回一个`Func<T>`委托，该委托包装了`Type`存储在`callingObject`参数中的构造函数。要实际*调用*该构造函数，您仍然需要调用它：

```
Delegate delegateWithConstructor = Expression.Lambda(Expression.New(constructorInfo)).Compile();
object instance = delegateWithConstructor.DynamicInvoke(); 
```

但是，从长远来看，您尝试做的事情似乎非常奇怪和脆弱，因为您将方法名称作为简单的字符串和参数作为对象传递，因此丢失了所有编译时类型检查。为什么你需要这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:21:12.473

除非您缓存已编译的表达式，否则使用表达式树会导致程序运行速度变慢。

# c# - sharepoint 2010 如何创建带有树视图的 Web 部件？

> ID：11675098
> 
> 赞同：-1
> 
> 时间：2012-07-26T17:51:23.243
> 
> 标签：c#, visual-studio-2010, sharepoint, sharepoint-2010, web-parts

我有 Sharepoint 2010 和 Visual Studio 2010。

我想创建一个包含树视图的 Web 部件，它将显示列表或库中的所有文件（路径应该在 Web 部件设置中可配置）。

树视图应该与文件夹兼容。

我也想要它，以便您可以更改项目的顺序，所以我希望在每个项目旁边有一个上下箭头按钮，然后单击时会更改项目的顺序，但这也需要影响原始列表。

所以我想在原始列表中有一个名为 orderby 的列，然后按该列排序。然后此 Web 部件可以更改原始列表的 orderby 列中的项目编号，然后刷新 Web 部件以加载更改。

我对 Web 部件编程知之甚少，但有人可以帮我入门吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T19:32:04.407

您需要在 Visual Studio 中创建 Sharepoint 解决方案。经典 WebPart 和可视 WebPart 项目之间的区别在于，在可视 WebPart 项目中，您可以通过拖放或通过

[这意味着，您需要创建一个 webpart 并将ASP.Net Treeview](http://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/navigation/treeview.aspx)放入您的 webpart 。之后，您需要[阅读列表或库](https://jtheblog.wordpress.com/2011/01/11/retrieving-list-items-caml-queries-101/)中的项目并将这些项目添加到树视图中。

如果是文件夹，您需要递归地遍历文件夹。

我会一步一步开始。首先阅读一些关于创建简单 WebPart 的好文章，例如在 MSDN 中。之后，看看如何从库中检索项目和文件夹。之后看看如何使用 ASP.Net TreeView。最后将所有元素放在一起。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T04:20:53.153

Webpart 本质上承载一个 ascx 控件。如果您可以创建一个执行所需操作的 Web 控件，那么将其托管在 Web 部件中并不是什么大问题。

您必须做的第一件事是在您的开发设备上安装新的 SharePoint。

接下来使用 Visual Studio 2010 创建一个新的 Visual Webpart 项目。

# puppet - 如何使用 Puppet 参数化类来强制应用资源的顺序？

> ID：11675102
> 
> 赞同：15
> 
> 时间：2012-07-24T17:01:00.360
> 
> 标签：puppet

Puppetlabs 文档指出，为了让一个类需要另一个类，您应该使用关系链接语法并在外部节点中声明这两个类。

我有一个 repo 类，它创建每个模块中的许多包所依赖的 yum repo 定义。在每个模块中，我都有一个 Class['repo'] -> Class['modulename'] 语句，并且两个类都在节点中声明。但是，当 puppet 运行时，它并不总是按预期在模块类之前执行 repo 类。为什么不？下面的示例（木偶 2.6.16）：

**编辑：**这个问题似乎有 3 个基本解决方案。

1.  使用 before/require 元参数将类依赖项替换为资源依赖项（如图灵机的答案所示）。
2.  删除外部类依赖关系并显式声明内部类之间的依赖关系。
3.  在 stdlib 模块中使用 Puppetlabs 提供的锚类型来包含一个类，该类允许依赖类使用链接语法创建对外部类的引用。

那么，考虑到 Puppet v3 以及将重构保持在最低限度的愿望，这些方法中的哪一个是最好的？

清单`puppettest.pp`：

```
class { 'repo': }
class { 'maradns': }

class repo {
  class { 'repo::custom': }
}

class repo::custom {
  yumrepo {'custom':
    enabled  => 1,
    gpgcheck => 0,
    descr    => "Local respository - ${::architecture}",
    baseurl  => 'http://repo.nike.local/CentOS/\$releasever/\$basearch';
  }
}

class maradns {
  Class['repo'] -> Class['maradns::install']
  Class['maradns::install'] -> Class['maradns::config']
  Class['maradns::config'] ~> Class['maradns::service']
  class { 'maradns::install': }
  class { 'maradns::config':  }
  class { 'maradns::service': }
}

class maradns::install {
  package { 'maradns':
    ensure  => present,
  }
}

class maradns::config {
  file { 'mararc':
    ensure  => present,
    path    => '/etc/mararc',
    mode    => '0644',
    owner   => root,
    group   => root,
  }
}

class maradns::service {
  service { 'maradns':
    ensure     => running,
    enable     => true,
    hasrestart => true,
  }
} 
```

输出：

```
puppet apply puppettest.pp    
err: /Stage[main]/Maradns::Install/Package[maradns]/ensure: change from absent to present failed: Execution of '/usr/bin/yum -d 0 -e 0 -y install maradns' returned 1: Error: Nothing to do

notice: /Stage[main]/Maradns::Config/File[mararc]: Dependency Package[maradns] has failures: true
warning: /Stage[main]/Maradns::Config/File[mararc]: Skipping because of failed dependencies
notice: /Stage[main]/Maradns::Service/Service[maradns]: Dependency Package[maradns] has failures: true
warning: /Stage[main]/Maradns::Service/Service[maradns]: Skipping because of failed dependencies
notice: /Stage[main]/Repo::Custom/Yumrepo[custom]/descr: descr changed '' to 'Local respository - x86_64'
notice: /Stage[main]/Repo::Custom/Yumrepo[custom]/baseurl: baseurl changed '' to 'http://repo.test.com/CentOS/\$releasever/\$basearch'
notice: /Stage[main]/Repo::Custom/Yumrepo[custom]/enabled: enabled changed '' to '1'
notice: /Stage[main]/Repo::Custom/Yumrepo[custom]/gpgcheck: gpgcheck changed '' to '0'
notice: Finished catalog run in 2.15 seconds 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:49:15.090

调试依赖问题的一个很好的起点是指示 puppet 生成依赖图。

```
puppet apply --graph --noop manifest.pp
dot -Tpng /var/lib/puppet/state/graphs/relationships.dot -o relationships.png 
```

通过这样做，您会看到该类`repo:custom`根本没有依赖信息。

`maradns::install`肯定依赖于`repo`类但不依赖于`repo::custom`类，因为`repo::custom`不依赖于`repo`.

新的类声明语法`class {'classname':}`没有设置任何依赖关系，它的行为就像`include classname`语法一样。

因此，要么设置从`repo::custom`to的依赖关系，`repo`要么指示`maradns::install`类直接依赖于`repo:custom`类。

但是你会遇到更多的麻烦。对类的依赖只会确保应用这个类。但是，不会对包含资源设置依赖项。

我会像这样模拟你的情况：

```
class { 'repo:custom': }
class { 'maradns': }

class repo {
}

class repo::custom {
  yumrepo {'custom':
    enabled  => 1,
    gpgcheck => 0,
    descr    => "Local respository - ${::architecture}",
    baseurl  => 'http://repo.nike.local/CentOS/\$releasever/\$basearch';
  }
}

class maradns {
  class{[
    'maradns::package',
    'maradns::config',
    'maradns::service',
  ]:}
}

class maradns::package {
  package { 'maradns':
    ensure  => present,
    require => Yumrepo['custom'],
  }
}

class maradns::config {
  file { 'marac:config':
    ensure  => present,
    mode    => '0644',
    owner   => root,
    group   => root,
  }
}

class maradns::service {
  service { 'maradns':
    ensure     => running,
    enable     => true,
    hasrestart => true,
    require => [
      Package['maradns'],
      File['mararc:config'],
    ],
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T14:25:00.237

来自[puppetlabs 标准库文档](http://forge.puppetlabs.com/puppetlabs/stdlib/)

> 在 Puppet 2.6 中，当一个类声明另一个类时，内部类中的资源不包含在外部类中。这与从较小的类中组合复杂模块的模式产生了不良的交互作用，因为最终用户无法指定外部类和其他模块之间的顺序关系。
> 
> 锚类型让您可以解决这个问题。*通过将任何内部类夹在外部类*包含的两个无操作资源之间，您可以确保包含模块中的所有资源。

根据发布的清单，示例如下：

清单`puppettest.pp`：

```
class { 'repo': }
class { 'maradns': }

class repo {
  anchor { 'repo::begin': } ->
  class { 'repo::custom': } ->
  anchor { 'repo::end': }
}

class repo::custom {
  yumrepo {'custom':
    enabled  => 1,
    gpgcheck => 0,
    descr    => "Local respository - ${::architecture}",
    baseurl  => 'http://repo.nike.local/CentOS/\$releasever/\$basearch';
  }
}

class maradns {
  Class['repo'] -> Class['maradns::install']
  Class['maradns::install'] -> Class['maradns::config']
  Class['maradns::config'] ~> Class['maradns::service']
  class { 'maradns::install': }
  class { 'maradns::config':  }
  class { 'maradns::service': }
}

class maradns::install {
  package { 'maradns':
    ensure  => present,
  }
}

class maradns::config {
  file { 'mararc':
    ensure  => present,
    path    => '/etc/mararc',
    mode    => '0644',
    owner   => root,
    group   => root,
  }
}

class maradns::service {
  service { 'maradns':
    ensure     => running,
    enable     => true,
    hasrestart => true,
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T03:02:51.870

您是否考虑过[运行阶段](https://docs.puppetlabs.com/puppet/latest/reference/lang_run_stages.html)作为替代机制？通过运行阶段，您可以将类与“阶段”相关联。默认情况下，一切都发生在**主**阶段。但是您可以设置一个发生在 main 之前的阶段，然后将该类与该“main 之前”阶段相关联。

回购是一个非常好的前阶段候选人。在按照您想要的方式设置存储库之前，您真的不希望检索任何包；如果您正在镜像自己的软件包存储库并落后于官方存储库，这可能会令人头疼。

更棘手的情况是当一个新的 puppetized 服务器在您甚至声明您的 repo 之前意外地获取了一个包，并且它从最新的公共镜像中获取它；然后**你的**repo 就安装好了（大概你现在已经删除了公共镜像）。因为这台机器“潜入”了一个新的工件，所以很容易出现依赖地狱的情况，一个太新的包正在阻止你关心的包被安装，因为有问题的包不会安装，因为你已经安装了一个太- 新版本和许多包管理器不会为你降级；你必须手动干预。这种情况本质上需要手动调试才能修复；仅仅修复你的傀儡规则是不够的，因为已经造成了损害。

因此，只需将所有 repo 定义与之前的阶段相关联，并完成它。停止跟踪对您的包的依赖项，以便更轻松地进行回购和呼吸。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T11:27:01.693

通过在 repo 中包含 repo::custom 而不是直接依赖 repo::custom 可以获得什么？

在这样的类中声明类的模式也可能会为您设置重复定义。如果可能的话，我会专注于直接使用 repo::custom 。

# javascript - jquery - 查找 jquery 多选择器的 href 属性

> ID：11675105
> 
> 赞同：2
> 
> 时间：2012-07-26T17:51:35.817
> 
> 标签：javascript, jquery

所以我想知道，假设您有一个多重选择器，如下所示：

```
$('.BOO li', '.FOO li a').click(function() {

}); 
```

你想找到`href`两个类的值，使用`this`关键字，你是如何实现的？

因为如果你继续像下面那样做，

```
$('.BOO li', '.FOO li a').click(function() {
    $(this).attr("href");
   //do stuff
    }); 
```

`.BOO li`显然被排除在外。

有没有办法`this`只针对 the`.BOO1 li`并找到它`a`？

附加信息：-当然，另一种选择是`.BOO1 li a`直接选择

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:54:58.950

你的意思是这样吗？

```
$('.BOO li', '.FOO li a').click(function() {
    var href;
    if($(this).attr("href"))
        href = $(this).attr("href");
    else
        href = $(this).find("a").attr("href");
}); 
```

这是执行上述操作的更简洁但更令人困惑的方法：

```
$('.BOO li', '.FOO li a').click(function() {
    var href = $(this).attr("href") ? $(this).attr("href") : $(this).find("a").attr("href");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:55:51.517

用于`.each`迭代每个选定的元素，并在回调函数中用于`$(this).attr("href")`获取您的值。

# jquery - CSS3 转换后没有点击

> ID：11675107
> 
> 赞同：1
> 
> 时间：2012-07-26T17:51:37.533
> 
> 标签：jquery, html, css

我在 Chrome/Safari 浏览器下遇到问题。应用 CSS3 转换后，我没有收到**mouseup**和**click**事件（在 IE9/10 下它工作得很好）。

这是我不工作的样本：

```
<script type="text/javascript">
    $(".box").mousedown(function (e) {
        $(this).addClass('transform');
    });

    $(".box").mouseup(function (e) {
        $(this).removeClass('transform');
    });

    $(".box").click(function (e) {
        alert("Click"); // Not worked under Chrome/Safari !
    });
</script>

<div class="box"></div> 
```

和 CSS3 样式：

```
.box {
    background-color:#f00;
    width:200px;
    height:200px;
}

.transform {
    transform-origin: 0% 50%;
    transform: rotateY(10deg);
    -ms-transform-origin: 0% 50%;
    -ms-transform: rotateY(10deg);
    -webkit-transform-origin: 0% 50%;
    -webkit-transform: rotateY(10deg);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:45:32.210

问题是您需要设置`position:absolute`：

```
.transform {
    transform-origin: 0% 50%;
    transform: rotateY(30deg);
    -ms-transform-origin: 0% 50%;
    -ms-transform: rotateY(30deg);
    -webkit-transform-origin: 0% 50% 0px;
    -webkit-transform: rotateY(-31deg);
}​ 
```

[检查此演示更新 2](http://jsfiddle.net/54RZL/10/)

您可以查看有关转换的此链接

*   [Mozilla 关于变换的文档](https://developer.mozilla.org/en/CSS/transform)
*   [变换原点](http://css-infos.net/property/-webkit-transform-origin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T01:00:13.777

这是 webkit 的浏览器错误。只要您非常小心地取消任何 z 变换（正确 - 越简单越好），点击就会正常工作。

尽管有 z-transform，Firefox 和 IE 都会处理这些点击。

position:absolute 可能对某些人有用，但它是浏览器故障的不适当解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T01:58:56.800

发生这种情况有几个原因。如前所述，其中之一是 position:absolute 应该设置在某处的父级上。

然而，目前 webkit（可能还有其他浏览器）中也存在一个 bug，其中 transformZ 值是随机计算的，用于转换后的面部。因此，解决方案是应用：

```
-webkit-transform:translateZ(0px);
-moz-transform:translateZ(0px);
transform:translateZ(0px); 
```

到给你带来交互问题的元素。这对我来说适用于一个 div 元素，该元素由一堆嵌套的子元素转换，并且会间歇性地给我不同角度的点击反馈。我知道这是正在发生的事情，因为我能够通过将其中一个子元素移动到父元素的边缘之外来“解决”这个问题，这意味着父元素无形地遮住了子元素。

然而应该提到的是，这个修复似乎也解决了一系列其他与后续子元素的 Z 深度有关的问题，这些问题一开始就不应该存在。这表明了一个简单的循环渲染错误，这意味着随着开发人员调整渲染例程，这个“修复”可能会随着浏览器的未来更新而中断。

# apache - 网址重写不起作用；404 错误并且没有 url 更改

> ID：11675108
> 
> 赞同：0
> 
> 时间：2012-07-26T17:51:47.610
> 
> 标签：apache, mod-rewrite

我正在一个我想要网址的网站上工作

```
 www.example.com/directory1/states/california.php 
```

指向

```
 www.example.com/directory1/california 
```

城市页面也有类似的 url 更改：

```
 www.example.com/directory1/cities/miami.php 
```

应该指向

```
 www.example.com/directory1/miami 
```

我在访问文件中使用以下规则来更改 url：

```
RewriteRule ^directory1/(alabama|alaska|arizona|arkansas|california|colorado|connecticut|delaware|florida|georgia|guam|hawaii|idaho|illinois|indiana|iowa|kansas|kentucky|louisiana|maine|maryland|massachusetts|michigan|minnesota|mississippi|missouri|montana|nationwide|nebraska|nevada|new_hampshire|new_jersey|new_mexico|new_york|north_carolina|north_dakota|ohio|oklahoma|oregon|pennsylvania|rhode_island|south_carolina|south_dakota|tennesee|texas|us_virgin_islands|utah|vermont|virginia|washington|west_virigina|wisconsin|wyoming)$ /directory1/states/$1.php [L]

RewriteRule ^directory1/(.*)$ /directory1/cities/$1.php [L] 
```

但是，网址栏中没有任何变化，我总是找不到 404。当我使用[htaccess 检查器](http://htaccess.madewithlove.be)对其进行测试时，输出 url 总是正确的。我的规则有什么问题？有没有办法测试 mod_rewrite 如何/是否正常运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:55:20.730

某些服务器配置要求您在 .htaccess 文件中打开重写引擎。就在顶部：

```
RewriteEngine on 
```

我还知道一些服务器配置，其中文件路径以 / 开始/结束（由于其他重写规则已经在请求上运行）所以也许允许在规则中存在：

```
RewriteRule ^/?directory1/(alabama|alaska|arizona|arkansas|california|colorado|connecticut|delaware|florida|georgia|guam|hawaii|idaho|illinois|indiana|iowa|kansas|kentucky|louisiana|maine|maryland|massachusetts|michigan|minnesota|mississippi|missouri|montana|nationwide|nebraska|nevada|new_hampshire|new_jersey|new_mexico|new_york|north_carolina|north_dakota|ohio|oklahoma|oregon|pennsylvania|rhode_island|south_carolina|south_dakota|tennesee|texas|us_virgin_islands|utah|vermont|virginia|washington|west_virigina|wisconsin|wyoming)/?$ /directory1/states/$1.php [L]

RewriteRule ^/?directory1/(.*)/?$ /directory1/cities/$1.php [L] 
```

# jquery - Jquery 仅在 jsfidde 中有效，但在浏览器中无效

> ID：11675109
> 
> 赞同：0
> 
> 时间：2012-07-26T17:51:50.890
> 
> 标签：jquery, css

下面是仅在 jsfiddle 中有效的代码，但是当我在浏览器中使用时它不起作用

[http://jsfiddle.net/5r6mx/18/](http://jsfiddle.net/5r6mx/18/) 下面是我在 jsfiddle 链接中的浏览器中使用的代码

//脚本

```
$(document).ready(function() { 
$(".image_stack").delegate('img', 'mouseenter', function() {
    if ($(this).hasClass('stackphotos')) {

        var $parent = $(this).parent();

$parent.find('div.namehover').addClass('rotate3');
$parent.find('div.namehover').css("left","77px");          
$parent.find('img#photo1').addClass('rotate1');
$parent.find('img#photo2').addClass('rotate2');
$parent.find('img#photo3').addClass('rotate3');
$parent.find('img#photo1').css("left","150px"); 
$parent.find('img#photo3').css("left","50px");
   }
})
.delegate('img', 'mouseleave', function() {
    $('img#photo1').removeClass('rotate1');
        $('img#photo2').removeClass('rotate2');
        $('img#photo3').removeClass('rotate3');
        $('div.namehover').removeClass('rotate3');
 $('div.namehover').css("left","");   

        $('img#photo1').css("left","");
$('img#photo3').css("left","");

});;
}); 
```

​</p>

html

```
<div style="border:0px;clear:both;padding-bottom:240px;">

 <div class="image_stack" style="margin-left:0px;" >
 <img id="photo1" class="stackphotos" src="http://www.commentsyard.com/cy/01/6474/Mixed%20Flowers%20and%20a%20Bear.jpg"  >
 <img id="photo2" class="stackphotos" src="http://www.commentsyard.com/cy/01/6474/Mixed%20Flowers%20and%20a%20Bear.jpg" >
  <img id="photo3" class="stackphotos"  src="http://www.commentsyard.com/cy/01/6474/Mixed%20Flowers%20and%20a%20Bear.jpg" >

 <div class="namehover"> Perfumes</div>

 </div> 
```

css

```
.image_stack img { /* css style for photo stack */
border: none;
text-decoration: none;
position: absolute;
margin-left:0px;
width: 170px;
height: 180px;
}
.image_stack { /* css style for photo stack */
width: 200px;
position: relative;
padding-left:20px;
margin-bottom:40px;
float:left;

}
.image_stack img { /* css style for photo stack */
position: absolute;
border: 4px solid #FFF;
box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
-moz-box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
-webkit-box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
z-index: 9999;
/* Firefox */
-moz-transition: all 0.2s ease;
/* WebKit */
-webkit-transition: all 0.2s ease;
/* Opera */
-o-transition: all 0.2s ease;
/* Standard */
transition: all 0.2s ease;
}
.image_stack #photo1 {  /* position of last photo in the stack */
top: 8px;
left: 108px;
}
.image_stack #photo2 {/* position of middle photo in the stack */
top: 6px;
left: 104px;
}
.image_stack #photo3 {/* position of first photo at the top in the stack */
top: 4px;
left: 100px;
right: 100px; 
}
.image_stack .rotate1 {/* rotate last image 15 degrees to the right */
-webkit-transform: rotate(15deg); /* safari and chrome */
-moz-transform: rotate(15deg);/*firefox browsers */
transform: rotate(15deg);/*other */
-ms-transform:rotate(15deg); /* Internet Explorer 9 */
-o-transform:rotate(15deg); /* Opera */
}
.image_stack .rotate2 {/* css not used*/
-webkit-transform: rotate(0deg); /* safari and chrome */
-moz-transform: rotate(0deg);/*firefox browsers */
transform: rotate(0deg);/*other */
-ms-transform:rotate(0deg); /* Internet Explorer 9 */
-o-transform:rotate(0deg); /* Opera */
}
.image_stack .rotate3 {/*rotate first image 15 degrees to the left*/
-webkit-transform: rotate(-15deg); /* safari and chrome */
-moz-transform: rotate(-15deg); /*firefox browsers */
transform: rotate(-15deg);/*other */
-ms-transform:rotate(-15deg); /* Internet Explorer 9 */
-o-transform:rotate(-15deg); /* Opera */
cursor: pointer;
}
.namehover{
position:absolute;left:105px;top:167px;z-index:99999;
display:block;background:#333;color:#fff;width:169px;} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:59:51.117

您的脚本是否位于外部文件中？它在html页面上吗？在javascript `console.log("checking script");`函数顶部，紧跟在`$(document).ready(function() {`. 如果您使用的是 firebug/chrome 开发人员，请在加载页面时检查您的控制台。如果您在控制台行中没有看到“检查脚本”，则它没有链接到您的 html 页面。

如果没有，请仔细检查您的资源。您的文件路径可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:56:29.220

您必须将其包含在您的 html 文件中。这可能不会发生。你的页面上需要这样的东西

```
<script type="text/javascript" src="jquery.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:58:13.040

您是否尝试过 .js 文件的绝对路径？

`<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>`

`<!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:53:57.403

JSFiddle 为您提供了 jQuery。您是否在应用程序中*正确包含 jQuery？*

在浏览器的 JavaScript 控制台中查找特定的 JavaScript 错误消息并将其发布在此处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T18:16:58.330

```
//jquery code below is applicable for the photo stack only . Not for the single image zoom effect
$(document).ready(function() { 
$(".image_stack").delegate('img', 'mouseenter', function() {//when user hover mouse on   image with div id=stackphotos 
    if ($(this).hasClass('stackphotos')) {//
    // the class stackphotos is not really defined in css , it is only assigned  to each images in the photo stack to trigger the mouseover effect on  these photos only 

        var $parent = $(this).parent();
        $parent.find('div.namehover').addClass('rotate3');
$parent.find('div.namehover').css("left","77px");  
$parent.find('img#photo1').addClass('rotate1');//add class rotate1,rotate2,rotate3 to  each image so that it rotates to the correct degree in the correct direction ( 15 degrees  one to the left , one to the right ! )
$parent.find('img#photo2').addClass('rotate2');
$parent.find('img#photo3').addClass('rotate3');
$parent.find('img#photo1').css("left","150px"); // reposition the first and last image 
$parent.find('img#photo3').css("left","50px");

    }
})
.delegate('img', 'mouseleave', function() {// when user removes cursor from the   image stack
    $('img#photo1').removeClass('rotate1');// remove the css class that was   previously added to make it to its original position
        $('img#photo2').removeClass('rotate2');
        $('img#photo3').removeClass('rotate3');
        $('div.namehover').removeClass('rotate3');

        $('img#photo1').css("left","");// remove the css property 'left'   value from the dom
$('img#photo3').css("left","");
$('div.namehover').css("left","");

});;
}); 
```

# ruby-on-rails - 记住我不工作的简单形式

> ID：11675110
> 
> 赞同：1
> 
> 时间：2012-07-26T17:51:53.197
> 
> 标签：ruby-on-rails, devise, simple-form

我正在使用设计进行身份验证。尝试使用 simple_form 编辑/创建设计表单。

这

```
<%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html=>{:class=>"form-vertical"}) do |f| %>
<%= f.input :email, :placeholder=>"Email", :label=>false %>
<%= f.input :password, :placeholder=>"Password", :label=>false %>

<% if devise_mapping.rememberable? -%>
    <div style="display:inline"><%= f.input :remember_me, :inline_label => 'Yes, remember me'%></div>

<%end -%>
    <div><%= f.submit "Sign in", :class=>"pull-right btn btn-primary" %></div>
<div><%= link_to "Create an account", new_user_registration_path%></div>
<% end %> 
```

字面上是给我的；**记住我**，应该是复选框

![在此处输入图像描述](../Images/499590b89900e40eefe37471d4b7ddd8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:12:27.803

也许使用

```
<%= f.input :remember_me, :as => :boolean %> 
```

# python - 在 Python 和 Ubuntu 中调用命令行工具

> ID：11675111
> 
> 赞同：0
> 
> 时间：2012-07-26T17:51:56.037
> 
> 标签：python, ubuntu, command-line, bioinformatics

我想把我为 Windows 编写的一些 GUI 程序带到 Ubuntu 软件中心。我正在使用几个外部命令行工具，我用它们来调用

```
os.system(cmd) 
```

不，我想知道如何在 Linux（Ubuntu）下做到这一点。我必须使用哪个相应的文件？在 Windows 中，该工具只能在我的程序的文件夹中访问，但未安装，它在 Linux 上的工作方式是否相同？

我需要的工具都是 bioinformatic、[primer3](http://manpages.ubuntu.com/manpages/natty/man1/eprimer3.1e.html)、[blast](http://manpages.ubuntu.com/manpages/precise/en/man1/blast.1.html)、[bowtie](http://manpages.ubuntu.com/manpages/oneiric/en/man1/bowtie.1.html)。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:26:10.783

在 Linux 上，您通常打包您的应用程序，以便可以使用系统包管理器安装它们（例如，`.deb` 用于基于 Debian 的发行版（包括 Ubuntu 和`.rpm`RedHat）的文件）。您想要执行此操作的一个原因（其中一个）是依赖管理——您可以告诉包中的包管理器它依赖于哪些其他包，以便在不依赖的情况下安装它们。您可以使用*setuptools*执行此操作，这方面有很多资源。在这种情况下，您可以期望在系统范围内安装命令行工具，并且可以从应用程序中调用它们。

如果这不可能，您甚至可以包含您需要的工具的源代码，并为用户提供如何编译它们的说明（如有必要，在您的应用程序目录中）。对于大多数现代发行版，这是一个相当轻松的过程，但并不是最佳实践。

* * *

另一个注意事项：`os.system`正在阻塞，它会产生一个新进程并等待它退出。您无法轻松获取 stdout 或 stderr 输出或与之交互。您应该查看为子流程模块提供简化且（可以说）更强大的接口的[`subprocess`](http://docs.python.org/library/subprocess.html)模块（它是 Python 标准库的一部分）或[`envoy`](http://pypi.python.org/pypi/envoy)（第 3 方模块）。

如果你想“自动化”命令行工具，[`pexpect`](http://pypi.python.org/pypi/pexpect/2.4)让你的生活更轻松。

# jquery - Ruby on Rails：根据选择框的更改以 JS 形式提交表单

> ID：11675114
> 
> 赞同：2
> 
> 时间：2012-07-26T17:52:05.457
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有以下由Rails生成`form_tag`的HTML：`select_tag`

```
<form accept-charset="UTF-8" action="/deployment_group/show_workflow_list" data-remote="true" id="show_workflow_list_form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <select id="folder_name_foldernames" name="folder_name[foldernames]">
    <option value="RISK_ODS" selected="selected">RISK_ODS</option>
    <option value="DETAIL_ADJUSTMENT">DETAIL_ADJUSTMENT</option>
    <option value="ODS_STAGE">ODS_STAGE</option>
    <option value="FINANCE_DM1">FINANCE_DM1</option>
  </select>
</form> 
```

让我知道我需要编写的 JQuery 代码，以便我可以在更改下拉列表中的选择值时提交表单。请[在此处](https://stackoverflow.com/questions/11658326/ruby-on-rails-jquery-submit-a-form-as-js)看到，当我使用 :onchange 时，它​​是一个 html 选项，表单作为 html 而不是 JS 表单提交。所以，我不能使用：onchange。

我知道我需要在我的 application.js 文件中写这样的东西：

```
$(#folder_name_foldernames).change(function(){
    $(#show_workflow_list).submit()
}); 
```

我在 application.js 文件中使用了上面的代码，但我必须删除“require_tree”。当我遇到一些错误时，我添加了

```
$('#folder_name_foldernames').change = () ->
  $('#show_workflow_list_form').submit() 
```

到我的 deployment_group.js.coffee 文件（deployment_group 是我与上述视图相关的控制器）

但是当我更改下拉列表中的选择时，我仍然没有看到任何变化。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:00:33.570

我通过以下方式解决了问题：

```
<%= f.select :foldernames, options_for_select(@folders, @folders.first), {}, {:onchange=>"myfunc()"}%> 
```

我加了

```
<script type="text/javascript">
function myfunc()
{
    $('#folder_name_foldernames').change(function(){     $('#this_form').submit(); }); 
}
</script> 
```

并且表单作为 JS 而不是 HTML 提交。如果有人可以向我解释为什么将其作为 JS 而不是 HTML 提交，那将非常有帮助当我编写：onchange=> this.form.submit 时，相同的代码将作为 HTML 提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:56:03.977

如果你给`id`你的`<form>`标签一个，你可以在`id`那里使用。

喜欢：

```
<form accept-charset="UTF-8" action="/deployment_group/show_workflow_list" data-remote="true" id="this_form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
<select id="folder_name_foldernames" name="folder_name[foldernames]"><option value="RISK_ODS" selected="selected">RISK_ODS</option>
    <option value="DETAIL_ADJUSTMENT">DETAIL_ADJUSTMENT</option>
    <option value="ODS_STAGE">ODS_STAGE</option>
    <option value="FINANCE_DM1">FINANCE_DM1</option>
</select> 
```

接着：

```
$('#folder_name_foldernames').change(function(){
    $('#this_form').submit();
}); 
```

不要忘记将选择器用引号括起来，否则会出现 JavaScript 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:18:42.463

尝试用“application.js.coffee”替换“application.js”并添加`#= require_self`到文件中。

# jquery - 找到兄弟姐妹后将类添加到兄弟姐妹

> ID：11675115
> 
> 赞同：0
> 
> 时间：2012-07-26T17:52:10.610
> 
> 标签：jquery

如果我使用以下语句...

```
if ($('divA').siblings().text() == "1") {
 the code here needs to add a class to that specific sibling where text = 1
} 
```

我将如何选择同级 div 来添加类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:14:11.217

```
$('divA').siblings().filter(function(index) {
    return $(this).text() == "1";
 }).addClass('yourClass'); 
```

您可以使用[.filter()](http://api.jquery.com/filter/)函数将`.siblings()`集合减少为仅针对您的条件返回 true 的集合，然后用于`.addClass()`将您的类添加到过滤的兄弟姐妹中。

# android - 如何在 Android 中获取 itouch-icons？

> ID：11675116
> 
> 赞同：0
> 
> 时间：2012-07-26T17:52:11.377
> 
> 标签：android, html, webview, bitmap

我正在编写一个 android 应用程序，它为用户可能在我的 web 视图中导航到的任何站点下载并保存“apple-touch-icon”png 图像。我目前正在使用 JSOUP 来获取 html 文档，解析文档，并找到由 rel="apple-touch-icon" 标识的链接。例如，堆栈溢出的链接如下所示：

```
rel="apple-touch-icon-precomposed" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" 
```

我有这个工作，但它非常慢。本质上，我下载了同一个页面两次，一次在 webview 中显示，第二次用 JSOUP 解析它，然后下载图像。有没有办法可以从我的 web 视图中已经存在的文档中获取我需要的链接，而不是再次下载页面然后解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:52:04.603

所以事实证明，在 WebChromeClient 类中有这个方法：

```
public void onReceivedTouchIconUrl (WebView view, String url, boolean precomposed) 
```

这正是我所需要的。

# multithreading - 从 servlet 内的线程访问请求对象

> ID：11675121
> 
> 赞同：4
> 
> 时间：2012-07-26T17:52:26.040
> 
> 标签：multithreading, jakarta-ee, servlets

我让这段代码在 servlet 中运行

```
public void doPost(HttpServletRequest request, HttpServletResponse response) {
    final HttpServletRequest requestF = request;
    Runnable runner  = new Runnable() {
       public void run() {
           String something = requestF.getParameter("anything");
           //do other things...
        }
    };
    Thread thread = new Thread(runner);
    thread.start(); 
```

但是当我尝试从请求对象中获取参数时它会引发异常。

```
Exception in thread "Thread-25" java.lang.NullPointerException
    at org.apache.catalina.connector.Request.parseParameters(Request.java:2560)
    at org.apache.catalina.connector.Request.getParameter(Request.java:1086)
    at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:355)
    at javax.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:158)
    at br.com.test.controller.ajax.MyServlet$1.run(MyServlet.java:54)
    at java.lang.Thread.run(Thread.java:619) 
```

该`requestF`对象不为空，我已经检查过了。有谁知道我是否可以访问新的请求对象`Thread`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:23:17.517

确实，请求不为空。
我怀疑发生的事情是，由于您引用了请求对象，GC 没有收集它。
但是，在处理响应之后，执行了有关参数的一些清理代码（即 - 删除请求参数的所有条目）。
我想这可能是为了释放内存资源而不是等待 GC，这就是为什么你会遇到这个空指针异常，这不是由于对请求对象的空访问，而是由于参数之一
我建议您获取参数集合，将其复制到新的数据结构（即 - 地图）并将其传递给您的线程。
此外，您应该考虑是否希望您的线程在响应发送到客户端之前运行，但这纯粹是一个设计问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:36:06.207

是的，扎斯克是对的。您可以使用地图对象的新实例进行复制，如下所示：

```
final Map<String,String> mapParameters = new HashMap<String,String>();
mapParameters.putAll(request.getParameterMap()); 
```

并在“运行”方法中使用 mapParameters：

```
public void doPost(HttpServletRequest request, HttpServletResponse response) {
    final Map<String,String> mapParameters = new HashMap<String,String>();
    mapParameters.putAll(request.getParameterMap());
    Runnable runner  = new Runnable() {
       public void run() {
           String something = mapParameters.get("anything");
           //do other things...
       }
    };
    Thread thread = new Thread(runner);
    thread.start();
} 
```

# c# - DropDownList 与 GridView ASP.NET

> ID：11675123
> 
> 赞同：0
> 
> 时间：2012-07-26T17:52:29.800
> 
> 标签：c#, asp.net, gridview

我有一个 DropDownList，它通过 ID、名字、姓氏数据绑定到我们的 SQL 服务器。然后我添加了一个 GridView 并将数据源配置到这个

> 从 [cb1] 选择 [ID]、[fName]、[lName] 在哪里（[ID] = @ID）

基本上我想要它做的是当有人从下拉列表中选择名字时，它会在 GridView 中弹出 ID、名字和姓氏。

问题是，加载后 DropDownList 为空且没有数据，并且 GridView 也丢失了。

这是标记。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="ID" DataSourceID="SqlDataSource1" 
        EmptyDataText="There are no data records to display.">
        <Columns>
            <asp:CommandField ShowEditButton="True" ShowSelectButton="True" />
            <asp:BoundField DataField="ID" HeaderText="ID" ReadOnly="True" 
                SortExpression="ID" />
            <asp:BoundField DataField="fName" HeaderText="fName" SortExpression="fName" />
            <asp:BoundField DataField="lName" HeaderText="lName" SortExpression="lName" />
        </Columns>
    </asp:GridView>
    <asp:DropDownList ID="DropDownList1" runat="server" 
        DataSourceID="SqlDataSource1" DataTextField="ID" DataValueField="ID">
    </asp:DropDownList>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:comboConnectionString1 %>" 
        DeleteCommand="DELETE FROM [cb1] WHERE [ID] = @ID" 
        InsertCommand="INSERT INTO [cb1] ([fName], [lName]) VALUES (@fName, @lName)" 
        ProviderName="<%$ ConnectionStrings:comboConnectionString1.ProviderName %>" 
        SelectCommand="SELECT [ID], [fName], [lName] FROM [cb1] WHERE ([ID] = @ID)" 
        UpdateCommand="UPDATE [cb1] SET [fName] = @fName, [lName] = @lName WHERE [ID] = @ID">
        <DeleteParameters>
            <asp:Parameter Name="ID" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="fName" Type="String" />
            <asp:Parameter Name="lName" Type="String" />
        </InsertParameters>
        <SelectParameters>
            <asp:ControlParameter ControlID="DropDownList1" Name="ID" 
                PropertyName="SelectedValue" Type="Int32" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="fName" Type="String" />
            <asp:Parameter Name="lName" Type="String" />
            <asp:Parameter Name="ID" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:04:51.853

> 问题是，加载后 DropDownList 为空且没有数据，并且 GridView 也丢失了。

当您的页面首次加载时，它会触发此 Sql 查询`(SELECT [ID], [fName], [lName] FROM [cb1] WHERE ([ID] = @ID)`以返回网格和组合使用的 sqldatasource1 的结果

表示不会返回任何结果，因为@ID 将为 null 或 0

所以你会有`(SELECT [ID], [fName], [lName] FROM [cb1] WHERE ([ID] = @ID OR [ID] IS NOT NULL)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:09:10.593

```
Table Contains id,Name,department and age

 Department :
        <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
            DataSourceID="SqlDataSource2" DataTextField="Department" 
            DataValueField="Department">
        </asp:DropDownList>
        <br />
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:demoConnectionString %>" 
            SelectCommand="SELECT DISTINCT [Department] FROM [profile]">
        </asp:SqlDataSource>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="id" DataSourceID="SqlDataSource3">
            <Columns>
                <asp:BoundField DataField="id" HeaderText="id" InsertVisible="False" 
                    ReadOnly="True" SortExpression="id" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Department" HeaderText="Department" 
                    SortExpression="Department" />
                <asp:BoundField DataField="Age" HeaderText="Age" SortExpression="Age" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:demoConnectionString %>" 
            SelectCommand="SELECT * FROM [profile] WHERE ([Department] = @Department)">
            <SelectParameters>
                <asp:ControlParameter ControlID="DropDownList1" Name="Department" 
                    PropertyName="SelectedValue" Type="String" />
            </SelectParameters>
        </asp:SqlDataSource>

Result:
![Result][1]

  [1]: http://i.stack.imgur.com/WrfP7.png 
```

# javascript - 在鼠标悬停时关闭功能 - Javascript，jQuery

> ID：11675127
> 
> 赞同：0
> 
> 时间：2012-07-26T17:52:47.460
> 
> 标签：javascript, jquery, html, function

我正在尝试在右侧边栏上创建一个带有按钮链接的内容 div。当用户没有将鼠标悬停在任何按钮上时，内容应该在五个按钮主题中的每一个中旋转（我已经完成了这个）。此外，当用户将鼠标悬停在特定按钮上时，应该发生的情况是 a) 停止旋转 b) 仅显示与该按钮相关的内容主题。

目前我所能做的就是旋转主题（使用Javascript函数）并使内容在悬停时出现和消失（在HTML中）。请帮忙？

```
<script>
function rotatecontent(){
curcontentindex=(curcontentindex<messages.length-1)? curcontentindex+1 : 0
prevcontentindex=(curcontentindex==0)? messages.length-1 : curcontentindex-1
futcontentindex=(curcontentindex==0)? messages.length-1 : curcontentindex+1
messages[prevcontentindex].style.display="none"
messages[curcontentindex].style.display="block"
messages[futcontentindex].style.display="none"
}

window.onload=function(){
if (document.all || document.getElementById){
getElementByClass("dyncontent")
setInterval("rotatecontent()", 1000)
}
}

$('#container li').hover(function() {
    clearInterval(interval);
}, function() {
    interval = setInterval("rotatecontent()", 1000);
});

</script> 
```

HTML：

```
 <body>

 <ul id="container">

 <li><a href="#">
 <img src="image1.jpg" width="250" height="100" class="Bab-
 image"></a></li>

 <li><a href="#"><img src="image2.jpg" class="sluotr-image 
 </a></li>

 <li><a href="#"><img src="image3.jpg" 
 class="blogs-image"></a></li>

 <li><a href="#"><img src="image4.jpg" class="chat-
 image"></a></li>

 <li><a href="#"><img src="image5.jpg" 
 class="view-image"></a>
 </li>

 </ul>

 <div class="dyncontent">
 <div id="div1">Content 1</div>
 <div id="div2" style="display:none">Content 2</div>
 <div id="div3" style="display:none">Content 3</div>
 <div id="div4" style="display:none">Content 4</div>
 <div id="div5" style="display:none">Content 5</div>
 </div>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:26:40.343

只需在`interval`外部声明变量`window.onload function`以使其成为`global`变量（以便其他函数可以访问它），即

```
var interval=0;
window.onload=function(){
    // other code goes here
    interval=setInterval(rotatecontent, 1000); // use the variable here
} 
```

或进行如下整体更改

```
<script type="text/javascript">
    function rotatecontent(){ 
        // Your function's code here 
    }

    $(document).ready(function(){
        var interval=setInterval(rotatecontent, 1000);

        $('#container li img').hover(function() {
            clearInterval(interval);
        }, function() {
            interval = setInterval(rotatecontent, 1000);
        });
    }​);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:39:41.017

这是一个 jsfiddle 旋转，直到您将鼠标悬停在其中一个超链接上，然后在您离开时恢复：http: [//jsfiddle.net/58pms/11/](http://jsfiddle.net/58pms/11/)（更新的 jsfiddle，原来只经过一次旋转）

我觉得很难说您的原始代码有什么问题，因为我必须添加一些变量声明和您的示例中缺少的 HTML。为了简单起见，我还取出了显示您悬停的项目的事件处理程序，因为我认为这不是您的主要问题。

的HTML：

```
<ul id="container" overflow:hidden>
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a></li>
    <li><a href="#">Four</a></li>
    <li><a href="#">Five</a></li>
</ul>
<div class="dyncontent">
<div id="div1">Be A Billiken</div>
<div id="div2" style="display:none">Be A Billiken 2</div>
<div id="div3" style="display:none">Be A Billiken 3</div>
<div id="div4" style="display:none">Be A Billiken 4</div>
<div id="div5" style="display:none">Be A Billiken 5</div>
</div> 
```

和脚本：

```
var messages;
var curcontentindex = 0;
var prevcontentindex;
var futcontentindex;
var i;

function rotatecontent() {
    messages.hide();
    curcontentindex = (curcontentindex < messages.length - 1) ? curcontentindex + 1 : 0;
    messages.get(curcontentindex).style.display = "block";
}

$(function() {
    messages = $('.dyncontent').find('div');
    i = setInterval(rotatecontent, 1000);

    $('#container li').hover(function() {
        clearInterval(i);
    }, function() {
        i = setInterval(rotatecontent, 1000);
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T18:10:28.690

当你已经在使用 jQuery 时，不要使用 window.onload。采用

```
$(function() { } ); 
```

反而。

# javascript - 如何使用 jquery 从输入复选框中检索文本？

> ID：11675133
> 
> 赞同：0
> 
> 时间：2012-07-26T17:53:02.127
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试检索所选复选框的文本，如下所示：

HTML：

```
<label class="checkbox">        
    <input type="checkbox" name="priority" value="2" checked="checked">2 - Critical
</label>
<label class="checkbox">        
    <input type="checkbox" name="priority" value="3">3 - Important
</label> 
```

jQuery：

```
$('#priorityContents input:checkbox:checked').each(function() {
    if(priorityText.length > 0) {
        priorityText = priorityText + "|";
    }
    priorityText = priorityText + $(this).text();
});

alert(priorityText); 
```

我希望看到：

```
2 - Critical 
```

我的控制台中没有任何错误。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:57:00.787

你可以试试：

```
<input id="cb" type="checkbox" name="priority" value="2" checked="checked">
<label for='cb' class="checkbox"> 2 - Critical</label> 
```

```
$('#priorityContents input[type="checkbox"]:checked').each(function() {
    var txt = $(this).next('label').text();
}); 
```

请注意，`:checkbox`选择器已*弃用*，您可以`input[type="checkbox"]`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:57:33.883

根据您发布的代码，您为什么希望看到该结果？在该代码中，您从未尝试检索文本。我建议：

```
$('#priorityContents input:checkbox:checked').each(function() {
    var next = this.nextSibling,
        text = next.nodeType == 3 ? next.nodeValue : '';
    console.log(text);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZNfmu/1/)。

这将遍历给定元素中的每个选中的复选框`id`，查看当前节点的下一个兄弟节点（不是 jQuery 对象，普通 DOM 节点），如果该节点是一个`textNode`（`nodeType`等于的节点），则`3`分配`nodeValue`(该节点的文本内容）到变量。

如果它不是 a `textNode`，那么它会分配一个空字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:58:46.880

您想要访问`label`元素，它是以下元素的父元素`input`：

```
$('#priorityContents input[type="checkbox"]:checked').parent(); 
```

这是小提琴：http: [//jsfiddle.net/Hk63N/](http://jsfiddle.net/Hk63N/)

* * *

为了提高性能，您应该考虑拆分选择器：

```
var priorityText = '';

$('#priorityContents input[type="checkbox"]').filter(':checked').parent().each(function() {
    if ( ! priorityText ) {
        priorityText = priorityText + "|";
    }
    priorityText = priorityText + $(this).text();
});

alert(priorityText);​ 
```

来自[jQuery 文档](http://api.jquery.com/category/selectors/jquery-selector-extensions/)：

> 为了在使用这些选择器时获得最佳性能，首先使用纯 CSS 选择器选择一些元素，然后使用 .filter()。

这是这个的小提琴：http: [//jsfiddle.net/Hk63N/1/](http://jsfiddle.net/Hk63N/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:59:27.487

首先，仅将文本包装在`<label>`标签中，无论如何这对于可用性来说都是一个好主意。将`for`属性分配给复选框的 ID：

```
<input type="checkbox" name="priority" id="priority-2" value="2" checked="checked">
<label class="checkbox" for="priority-2">        2 - Critical</label> 
```

然后您可以使用 jQuery 选择器轻松定位它：

```
$('#priorityContents input:checkbox:checked').each(function() {
    priorityText = $('label[for="'+$(this).attr('id')+'"]').text();
    ...
}); 
```

也就是说，最简单的方法可能是`data-prioritytext`在复选框的属性中添加您想要的任何文本，然后`.data('prioritytext')`在代码中提取它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T18:01:18.073

您的代码中肯定缺少一些东西。就像 #priorityContents 元素一样，如果您正在搜索它，这非常重要。

无论如何，我创建了这个适合我的演示。基本上你错了我相信这部分：

```
priorityText = priorityText + $(this).text(); 
```

实际的复选框元素不拥有 .text()。你需要去父母那里获得其中包含的实际价值。

[演示](http://jsfiddle.net/G7FcC/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T18:02:45.900

试试这个

```
var checkedTxt=$('.checkbox :checked').parent().text();
console.log(checkedTxt); 
```

[**演示。**](http://jsfiddle.net/heera/ZZgWa/1/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-01-14T09:32:21.733

`var name=$(this).parent().text();`

您将获得该复选框的文本在 html 复选框中没有获取文本数据的属性。所以用 `parent()`函数来取

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-01-14T10:31:53.900

您可以使用 jquery 以这种方式检索选中复选框的文本。

```
var value = $(document).find('input[type="checkbox"]:checked').attr('value'); 
```

# java - 插入数据库时 ，Prepared 语句中的语法错误

> ID：11675135
> 
> 赞同：2
> 
> 时间：2012-07-26T17:53:07.050
> 
> 标签：java

嗨，我正在尝试使用准备好的语句将数据插入数据库，但出现语法错误，请您帮忙

```
public boolean SignUp(String last_name, String first_name,String email, String password,String confirm_password,String phone){

        Connect connect = new Connect();
        Connection conn = connect.Connection();

        java.sql.PreparedStatement preparedStatement = null;
        //NULL is the column for auto increment
        String insertQuery = "INSERT INTO users VALUES (NULL, ?, ?, ?, ?, ?, ?)";
        preparedStatement = conn.prepareStatement(insertQuery);
        preparedStatement.setString(1, last_name);
        preparedStatement.setString(2, first_name);
        preparedStatement.setString(3, email);
        preparedStatement.setString(4, password);
        preparedStatement.setString(5, confirm_password);
        preparedStatement.setString(6, phone);

        int rs = preparedStatement.executeUpdate(insertQuery);

        conn.close(); 
```

}

这是错误消息

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?, ?, ?, ?, ?, ?)' at line 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:29:04.103

我找到了答案:)

使用preparedStatement.execute() 而不是executeUpdate(sql)。您已经设置了 sql 和参数 - executeUpdate(sql) 中的新设置覆盖了绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:55:20.353

您应该更改语句以明确列出列，并`NULL`从值列表中删除。

```
String insertQuery = "INSERT INTO users"
+  " (last_name, first_name, email, password, confirm_password, phone)"
+  " VALUES(?,?,?,?,?,?)"; 
```

这样，您的插入语句不再依赖于`users`表中列的顺序，并且也不受向表中添加列的影响。

请注意，虽然这种设计对于玩具或教育系统来说可能没问题，但在实际生产系统中，将密码存储在表格中是非常危险的。存储`confirm_password`也很不寻常：通常您的系统检查它`password`是否与 相同`confirm_password`，然后将加盐密码哈希和盐插入表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:57:33.807

只是猜测，不是我不确定。但是，如果其中一个字段是自动增量的，那么我认为您不需要插入它。尝试取出那个NULL....

# android - 一个片段类的多个实例

> ID：11675136
> 
> 赞同：0
> 
> 时间：2012-07-26T17:53:10.497
> 
> 标签：android, android-viewpager

我正在尝试创建一个包含几个页面的viewpager，问题是所有页面看起来都一样（只是数据不同）所以我创建了一个片段类，我正在尝试添加同一个类的viewpager适配器实例......但我不能......

**如何使每个页面都是同一片段类的实例的 viewpager？含义：相同的设计 - 不同的数据**

**编辑...** 我从这里获取了一般代码... [http://tamsler.blogspot.co.il/2011/10/android-viewpager-and-fragments.html](http://tamsler.blogspot.co.il/2011/10/android-viewpager-and-fragments.html)

稍微扭了一下

```
public class MainActivity extends FragmentActivity {

private com.example.trying1.PagerAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initPaging();
}

private void initPaging() {
    List<Fragment> fragments = new ArrayList<Fragment>();
    NoteFragment nf = new NoteFragment();
    Bundle bundle = new Bundle();
    bundle.putString("noteTitle", "A");
    nf.setArguments(bundle);

    NoteFragment nf1 = new NoteFragment();
    Bundle bundle1 = new Bundle();
    bundle1.putString("noteTitle", "B");
    nf1.setArguments(bundle1);

    fragments.add(nf);
    fragments.add(nf1);
    this.mAdapter = new com.example.trying1.PagerAdapter(
            getSupportFragmentManager(), fragments);

    ViewPager vPager = (ViewPager) findViewById(R.id.pager);
    vPager.setAdapter(this.mAdapter);
} 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T18:06:01.027

当然可以。您是否收到错误或数据未更新？

编辑：

它还取决于您如何编码片段，接受作为参数并计算页面？

```
public class MainActivity extends FragmentActivity {

private MyFragmentPagerAdapter mAdapter;    
private List<Fragment> fragments;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initPaging();
}

private void initPaging() {
    fragments = new ArrayList<Fragment>();
    this.mAdapter = MyFragmentPagerAdapter(
            getSupportFragmentManager());
    ViewPager vPager = (ViewPager) findViewById(R.id.pager);

    //Add 3 fragments
     for(int i =0; i<3; i++)
       addFragments(i);

    //Set adapter     
     vPager.setAdapter(this.mAdapter);
}

 private void addFragments(int i){
   NoteFragment nf = new NoteFragment(i); //Pass data to the fragment, so it can process it
   //You may pass it as a bundle if you wish
   fragments.add(nf)
} 
```

//适配器代码

```
private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {  

           public MyFragmentPagerAdapter(FragmentManager fm) {  
                super(fm);  
           }  

           @Override  
           public Fragment getItem(int index) {     
                return fragments.get(index);
           }  

           @Override  
           public int getCount() {     
                return fragments.size();  
           }  
      }  

} 
```

# ruby-on-rails - gem 如何提供 Cucumber 功能和步骤定义？

> ID：11675137
> 
> 赞同：4
> 
> 时间：2012-07-26T17:53:13.667
> 
> 标签：ruby-on-rails, ruby, testing, cucumber, bdd

我有两个带有以下宝石的 Rails 项目（A 和 B），其中包括：

```
#project A
gem "green_theme", :path => "~/dev/themes/green_theme"
gem "devel_tasks", :path => "~/dev/themes/devel_tasks"

#project B
gem "red_theme", :path => "~/dev/themes/red_theme"
gem "devel_tasks", :path => "~/dev/themes/devel_tasks" 
```

两个项目，A 和 B，都有一个 features 目录用于功能和步骤。红色和绿色这两个主题都应该具有共同的功能，例如登录/注销按钮、html 元标记等。

我需要做的是将常见主题相关的功能和步骤放在 devel_tasks gem 中。通过这种方式，我可以共享测试并使用它们来检查给定模板是否符合标准。

测试我需要做的一个简单方法是创建一个带有示例 Cucumber 功能的新 Rails 项目，然后尝试运行“cucumber examples/i18n/en/features”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T20:21:29.957

如果可能的话，我会将两个项目中的通用功能提取到一个 gem 中并在那里测试一次。

如果由于某种原因这两个项目确实必须分别实现相同的功能：

您可以在 gem 中提供步骤定义，只需将它们放在一个文件中并`require`在他们的 env.rb 中指示用户访问该文件。

我不知道有一种方法可以在 gem 中提供可以简单地运行的功能，因此您必须提供一个将功能复制到 features 目录的生成器。如果您要生成功能，用户生成步骤定义也可能更简单。

# mysql - 我在数据库中有错误

> ID：11675148
> 
> 赞同：-4
> 
> 时间：2012-07-26T17:53:40.407
> 
> 标签：mysql, sql, null, varchar

如下创建表时

```
create table Ticket (
ticket_id integer not null primary key,
AirlineName varchar not null,
CustomerName varchar,
fromCity varchar,
toCity varchar,
fltNo integer,
TicketDate date,
Dtime TIME,
Atime time,
price integer); 
```

我收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“not null、CustomerName varchar、fromCity varchar、toCity varchar、fltNo inte”附近使用正确的语法

什么可能导致这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:52:02.110

```
create table Ticket (
ticket_id INT NOT NULL primary key,
AirlineName varchar(255) not null,
CustomerName varchar(255),
fromCity varchar(255),
toCity varchar(255),
fltNo INT,
TicketDate date,
Dtime TIME,
Atime time,
price int); 
```

# c# - 如何阻止按钮点击事件冒泡到列表视图中？

> ID：11675149
> 
> 赞同：0
> 
> 时间：2012-07-26T17:53:42.057
> 
> 标签：c#, .net, xaml, microsoft-metro, windows-runtime

我有一个带有按钮的列表视图作为数据模板的一部分。当我单击按钮时，我希望执行一项操作，但我不一定希望选择该项目。有什么办法可以阻止点击事件冒泡到列表框？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:06:52.697

我创建了一个带有按钮的示例 ListView。单击按钮不会为我选择项目。你能发布你的数据模板吗？

但是，您可以将以下内容添加到您的点击方法中：

```
myListBox.SelectedItem = null; 
```

其中 myListBox 是您的 ListBox 的名称。这将导致列表框没有选定的项目。如果要保留先前选择的项目，则必须跟踪先前选择的项目或索引，并使用以下任一方法将列表框设置为该项目：

```
myListBox.SelectedItem = previousItem;
myListBox.SelectedIndex = previousIndex; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:01:37.870

不太确定这是最好的解决方案，但是。在到达按钮激活的方法之前捕获选定的索引。在它里面最后设置选回原来的。

# c# - Mono C# FileChooserButton 设置为仅显示 .tar.gz 文件

> ID：11675151
> 
> 赞同：0
> 
> 时间：2012-07-26T17:53:47.673
> 
> 标签：c#, linux, gtk, monodevelop, gtk#

如何创建`FileChooserButton`仅显示`.tar.gz`MonoDevelop C# GTK+ 上的文件的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:17:53.080

```
public MainWindow () : base(Gtk.WindowType.Toplevel)
{
    Build ();

    FileFilter filter  = new FileFilter();
    filter.Name = "tar.gz files";
    filter.AddPattern("*.tar.gz");
    filechooserbutton1.AddFilter(filter);
} 
```

# mysql - 查询 2 个表以查找结果

> ID：11675158
> 
> 赞同：0
> 
> 时间：2012-07-26T17:54:44.490
> 
> 标签：mysql

我有一个提交表，其中包含名为 submitID（主键）的字段

我有一个答案表，其中有一个名为 submitID 的字段

我的目标是找到同时回答了 16 和 39 的提交 ID

以下是我到目前为止所拥有的，但似乎并没有做我想做的事......也许我在 JOIN 上走错了路？也许我需要一个内部选择？

```
SELECT submissions.*, answer.answer, answer.submissionID FROM submissions JOIN answer USING(submissionID) WHERE (answer = 16 AND answer = '39') 
```

这是表格提交的方案

```
CREATE TABLE `submissions` (
  `submissionID` int(11) NOT NULL AUTO_INCREMENT,
  `sID` int(11) NOT NULL,
  `sendInfoTo` text NOT NULL,
  `userIP` text NOT NULL,
  `sendNotificationTo` text NOT NULL,
  PRIMARY KEY (`submissionID`)
) ENGINE=MyISAM AUTO_INCREMENT=1343314525 DEFAULT CHARSET=latin1$$

9' 
```

这是答案方案

```
CREATE TABLE `answer` (
  `aID` int(11) NOT NULL AUTO_INCREMENT,
  `qtID` int(11) NOT NULL,
  `answer` text NOT NULL,
  `submissionID` int(11) NOT NULL,
  PRIMARY KEY (`aID`)
) ENGINE=MyISAM AUTO_INCREMENT=56247 DEFAULT CHARSET=latin1$$ 
```

提交表保存唯一的提交ID

答案表包含提交的所有答案

例如，我有很多问题。问题 1 的答案可能是 16，问题 2 的答案可能是 39，所以我想找到同时回答了 16 和 39 的提交 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:06:53.737

由于您对答案 =18 和答案 =39 的 AND 条件永远不会为真，因此您可以通过以下方式进行 OR：

```
 SELECT submissions.*, answer.answer, answer.submissionID FROM submissions JOIN answer ON  submissions.submissionID = answer.submissionID WHERE answer.answer ='16' OR answer.answer ='39' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:58:39.860

像这样的东西：

```
SELECT 
    submissions.*
    , answer.answer
    , answer.submissionID 
FROM 
    submissions 
JOIN answer on submissions.submissionID = answer.submissionID
WHERE
    answer.answer IN (16,39) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:58:55.553

尝试以下查询，这可能对您有所帮助..

```
SELECT s.submissionID  FROM submissions s JOIN answer a USING(submissionID) WHERE a.answer IN (16,39) 
```

# vba - Excel 2010 VBA中的Dir函数不起作用

> ID：11675162
> 
> 赞同：5
> 
> 时间：2012-07-26T17:55:09.530
> 
> 标签：vba, excel, automation, office-automation

我正在尝试遍历给定目录以查找最新下载的 csv 文件。由于某种原因，即使文件确实存在，我的 Dir 函数也找不到任何文件。我对 VBA 并不完全熟悉，所以我可能缺少执行 Dir 功能的某种参考，但我在网上找不到任何告诉我需要的东西。所有的例子和论坛都像我一样使用 Dir，但我不能让我的工作。这是代码，如果你能看到我做错了什么，请告诉我：

```
Public Function Get_File() as string
   Dim filePath As String

   ChDir ("..")
   filePath = CurDir
   'Goes back to Documents directory to be in same directory as macro
   ChDir (filePath & "\Documents")
   filePath = filePath & "\Downloads\test.txt" 
   filePath = getLatestFile(filePath)

   Get_File = filePath
End Function

Public Function getLatestFile(pathToFile As String) As String
   Dim StrFile As String
   Dim lastMod As Variant
   Dim nextMod As Variant
   Dim lastFileName As String

   StrFile = Dir(pathToFile)
   lastFileName = StrFile
   lastMod = FileDateTime(StrFile)
   While Len(StrFile) > 0
       Debug.Print StrFile
       StrFile = Dir
       nextMod = FileDateTime(StrFile)
       If nextMod > lastMod Then
           lastFileName = StrFile
           lastMod = nextMod
       End If
   Wend

   getLatestFile = lastFileName
End Function 
```

test.txt 文件在我的下载文件中，并且 filePath 字符串打印出来是正确的路径，但我不断收到一条错误消息，指出它找不到该文件。首次使用 Dir(pathToFile) 时失败。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:15:56.710

`Dir()`只返回路径的文件名部分，即不返回文件夹部分。例如，

```
Dir("C:\MyPath\MyFile.txt") 
```

`MyFile.txt`不返回`C:\MyPath\MyFile.txt`

# python - 美丽的汤虫？

> ID：11675181
> 
> 赞同：0
> 
> 时间：2012-07-26T17:56:10.750
> 
> 标签：python, beautifulsoup

我有下一个代码：

```
for table in soup.findAll("table","tableData"):
    for row in table.findAll("tr"):
        data = row.findAll("td")
        url = data[0].a
        print type(url) 
```

我得到下一个输出：

```
<class 'bs4.element.Tag'> 
```

这意味着，该 url 是类 Tag 的对象，我可以从该对象中获取属性字节。但是如果我替换`print type(url)`为`print url['href']`我得到下一个回溯

```
Traceback (most recent call last):
File "baseCreator.py", line 57, in <module>
    createStoresTable()
File "baseCreator.py", line 46, in createStoresTable
    print url['href']
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

怎么了？以及如何获得 href 属性的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:16:47.910

我确实喜欢`BeautifulSoup`，但我个人更喜欢`lxml.html`（因为不是太*古怪*的 HTML），因为它能够利用 XPath。

```
import lxml.html
page = lxml.html.parse('http://somesite.tld')
print page.xpath('//tr/td/a/@href') 
```

尽管取决于结构，但可能需要实现某种形式的“轴”。

您还可以`elementsoup`用作解析器 - 详细信息位于[http://lxml.de/elementsoup.html](http://lxml.de/elementsoup.html)

# magento - Magento - 使用新列覆盖的网格不会填充行的新值

> ID：11675198
> 
> 赞同：1
> 
> 时间：2012-07-26T17:57:05.720
> 
> 标签：magento, adminhtml

扩展核心功能，添加新列。构建网格，使用数据构建查询，但是在生成行时，它无法添加填充行中的“可见性”单元格。想法？

编辑：为了清楚起见。

# zend_debug($row) 的输出

```
class Mage_Catalog_Model_Product#751 (28) {
  protected $_cacheTag =>  string(15) "catalog_product"
  protected $_eventPrefix =>  string(15) "catalog_product"
  protected $_eventObject =>  string(7) "product"
  protected $_canAffectOptions =>  bool(false)
  protected $_typeInstance =>  NULL
  protected $_typeInstanceSingleton =>  NULL
  protected $_linkInstance =>  NULL
  protected $_customOptions =>  array(0) {
  }
  protected $_urlModel =>  NULL
  protected $_errors =>  array(0) {
  }
  protected $_optionInstance =>  NULL
  protected $_options =>  array(0) {
  }
  protected $_reservedAttributes =>  NULL
  protected $_isDuplicable =>  bool(true)
  protected $_defaultValues =>  array(0) {
  }
  protected $_lockedAttributes =>  array(0) {
  }
  protected $_isDeleteable =>  bool(true)
  protected $_isReadonly =>  bool(false)
  protected $_resourceName =>  string(15) "catalog/product"
  protected $_resource =>  NULL
  protected $_resourceCollectionName =>  string(26) "catalog/product_collection"
  protected $_dataSaveAllowed =>  bool(true)
  protected $_isObjectNew =>  NULL
  protected $_data =>  array(13) {
    'entity_id' =>    string(4) "2384"
    'entity_type_id' =>    string(1) "4"
    'attribute_set_id' =>    string(1) "4"
    'type_id' =>    string(6) "simple"
    'sku' =>    string(0) ""
    'has_options' =>    string(1) "0"
    'required_options' =>    string(1) "0"
    'created_at' =>    string(19) "2012-06-22 16:19:32"
    'updated_at' =>    string(19) "2012-07-03 14:06:08"
    'position' =>    NULL
    'name' =>    string(25) "Games Site Test Product 4"
    'price' =>    string(8) "100.0000"
    'stock_item' =>    class Varien_Object#792 (5) {
      protected $_data =>      array(1) {
        ...
      }
      protected $_hasDataChanges =>      bool(false)
      protected $_origData =>      NULL
      protected $_idFieldName =>      NULL
      protected $_isDeleted =>      bool(false)
    }
  }
  protected $_hasDataChanges =>  bool(true)
  protected $_origData =>  array(12) {
    'entity_id' =>    string(4) "2384"
    'entity_type_id' =>    string(1) "4"
    'attribute_set_id' =>    string(1) "4"
    'type_id' =>    string(6) "simple"
    'sku' =>    string(0) ""
    'has_options' =>    string(1) "0"
    'required_options' =>    string(1) "0"
    'created_at' =>    string(19) "2012-06-22 16:19:32"
    'updated_at' =>    string(19) "2012-07-03 14:06:08"
    'position' =>    NULL
    'name' =>    string(25) "Games Site Test Product 4"
    'price' =>    string(8) "100.0000"
  }
  protected $_idFieldName =>  string(9) "entity_id"
  protected $_isDeleted =>  bool(false)
}
, 
```

# sqdump（我添加了 LIMIT 10）

```
mysql> SELECT `e`.*, `_table_position`.`position`, `_table_visibility`.`value` AS `visibility` FROM `catalog_product_entity` AS `e` LEFT JOIN `catalog_category_product` AS `_table_position` ON (_table_position.product_id=e.entity_id) AND (category_id=0) INNER JOIN `catalog_product_entity_int` AS `_table_visibility` ON (_table_visibility.entity_id = e.entity_id) AND (_table_visibility.attribute_id='89') AND (_table_visibility.store_id=0) limit 10;
+-----------+----------------+------------------+---------+---------+-------------+------------------+---------------------+---------------------+----------+------------+
| entity_id | entity_type_id | attribute_set_id | type_id | sku     | has_options | required_options | created_at          | updated_at          | position | visibility |
+-----------+----------------+------------------+---------+---------+-------------+------------------+---------------------+---------------------+----------+------------+
|         2 |              4 |                9 | simple  | PWOPER  |           0 |                0 | 2010-06-09 20:14:44 | 2012-01-09 19:20:06 |     NULL |          1 |
|         3 |              4 |                9 | simple  | PW20WCB |           0 |                0 | 2010-06-10 14:36:04 | 2012-07-03 16:46:09 |     NULL |          4 |
|        20 |              4 |                9 | simple  | PW5TBW  |           0 |                0 | 2010-06-28 15:44:23 | 2011-04-08 21:35:02 |     NULL |          1 |
|        21 |              4 |                9 | simple  | PWBJACK |           0 |                0 | 2010-06-28 15:51:35 | 2011-10-27 15:26:21 |     NULL |          1 |
|        22 |              4 |                9 | simple  | YK32006 |           0 |                0 | 2010-06-28 16:22:25 | 2012-07-03 16:47:46 |     NULL |          4 |
|        23 |              4 |                9 | simple  | YK32008 |           0 |                0 | 2010-06-28 16:30:51 | 2012-07-03 16:48:55 |     NULL |          4 |
|        24 |              4 |                9 | simple  | RFBURG  |           0 |                0 | 2010-06-28 16:37:12 | 2011-09-16 14:03:04 |     NULL |          4 |
|        25 |              4 |                9 | simple  | PW10EWJ |           0 |                0 | 2010-06-28 17:34:15 | 2011-08-11 15:43:49 |     NULL |          1 |
|        26 |              4 |                9 | simple  | PW10WJ  |           0 |                0 | 2010-06-28 17:39:26 | 2011-08-11 16:04:37 |     NULL |          4 |
|        27 |              4 |                9 | simple  | HDNG10  |           0 |                0 | 2010-06-28 17:48:00 | 2012-07-03 17:00:07 |     NULL |          4 |
+-----------+----------------+------------------+---------+---------+-------------+------------------+---------------------+---------------------+----------+------------+
10 rows in set (0.00 sec)

mysql> 
```

# _prepareCollection()

```
class My_CategoryFilters_Block_Adminhtml_Catalog_Category_Tab_Product extends Mage_Adminhtml_Block_Catalog_Category_Tab_Product {
... 
protected function _prepareCollection()
{
    if ($this->getCategory()->getId()) {
        $this->setDefaultFilter(array('in_category'=>1));
    }
    #$store = $this->_getStore();
    $collection = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('sku')
        ->addAttributeToSelect('price')
        ->addAttributeToSelect('store_id')
        #->addAttributeToSelect('visibility')
        ->addStoreFilter($this->getRequest()->getParam('store'))
        ->joinField('position',
            'catalog/category_product',
            'position',
            'product_id=entity_id',
            'category_id='.(int) $this->getRequest()->getParam('id', 0),
            'left')
        ->joinAttribute('visibility', 'catalog_product/visibility', 'entity_id', 'entity_id', 'entity_id='.(int) $this->getRequest()->getParam('id', 0), 'inner')
        ;

    $this->setCollection($collection);

    $this->getCollection()->addWebsiteNamesToResult();

    if ($this->getCategory()->getProductsReadonly()) {
        $productIds = $this->_getSelectedProducts();
        if (empty($productIds)) {
            $productIds = 0;
        }
        $this->getCollection()->addFieldToFilter('entity_id', array('in'=>$productIds));
    }

    return parent::_prepareCollection();
} 
```

# _prepareColumns()

```
 $this->addColumn('visibility', array(
        'header'   => Mage::helper('catalog')->__('Visibility'),
        'width'    => '100',
        'sortable' => false,
        'index'    => 'visibility',
        'type'     => 'options',
        'options'  => Mage::getModel('catalog/product_visibility')->getOptionArray(),
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:58:50.070

查看产品系列`catalog/model/resource/product/collection.php`，我发现可能是罪魁祸首：

```
 /**
 * Apply limitation filters to collection
 * Method allows using one time category product index table (or product website table)
 * for different combinations of store_id/category_id/visibility filter states
 * Method supports multiple changes in one collection object for this parameters
 *
 * @return Mage_Catalog_Model_Resource_Product_Collection
 */
protected function _applyProductLimitations()
{
    $this->_prepareProductLimitationFilters(); 
```

Magento 似乎正在阻止和/或路由`visibility`集合中的字段。

进一步研究`_prepareProductLimitationFilters()`方法本身揭示：

```
/**
 * Apply front-end price limitation filters to the collection
 *
 * @return Mage_Catalog_Model_Resource_Product_Collection
 */
public function applyFrontendPriceLimitations()
{
    $this->_productLimitationFilters['use_price_index'] = true;
    if (!isset($this->_productLimitationFilters['customer_group_id'])) {
        $customerGroupId = Mage::getSingleton('customer/session')->getCustomerGroupId();
        $this->_productLimitationFilters['customer_group_id'] = $customerGroupId;
    }
    if (!isset($this->_productLimitationFilters['website_id'])) {
        $websiteId = Mage::app()->getStore($this->getStoreId())->getWebsiteId();
        $this->_productLimitationFilters['website_id'] = $websiteId;
    }
    $this->_applyProductLimitations();
    return $this;
} 
```

如何解决这个问题，而不会对我不确定的“推理”造成严重破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:20:14.153

弄清楚了。

我的实现扩展了 Mage_Adminhtml_Block_Catalog_Category_Tab_Product。因为它扩展了 Mage_Adminhtml_Block_Catalog_Category_Tab_Product，所以我对使用扩展方法可以做什么非常有限。新列的数据没有出现的原因是父方法无权访问数据（->addAttribute('visibility')）。

为了处理新数据，我需要扩展 Mage_Adminhtml_Block_Widget_Grid。小部件提供了更通用的数据处理方法。

# c++ - C++ 连接糟糕

> ID：11675208
> 
> 赞同：0
> 
> 时间：2012-07-26T17:57:33.027
> 
> 标签：c++, concatenation, cout

所以我最近一直在 C++、C# 和 Java 之间来回走动，并且很好地编写了一些 C++ 代码，我做了这样的事情。

```
string LongString = "Long String";

char firstChar = LongString.at(0); 
```

然后尝试使用看起来像这样的方法，

```
void MethodA(string str)
{    
//some code    
cout << str;    
//some more code } 
```

这是我实现它的方式。

```
MethodA("1\. "+ firstChar ); 
```

虽然在 C# 和 Java 中完全有效，但这在 C++ 中做了一些奇怪的事情。

我期待像

> //1\. 大号

但它在程序后面给了我一些其他字符串文字的一部分。

我到底做了什么？

我应该注意我已经修复了这个错误，以便它打印出我所期望的，但我真的对我错误地做了什么感兴趣。

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:59:52.890

```
MethodA(std::string("1\. ")+ firstChar ); 
```

因为“1.”是 const char[4] 并且没有 concat 方法）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T18:00:29.237

C++ 没有将字符串文字上的加法定义为连接。相反，字符串文字*衰减*为指向其第一个元素的指针；单个字符被解释为数值，因此结果是从程序只读内存段中的一个位置到另一个位置的指针偏移量。

要将添加作为连接，请使用`std::string`：

```
MethodA(std::string() + "1\. " + firstChar); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T17:59:44.243

```
MethodA("1\. "+ firstChar );  //your code 
```

不做你想让它做的事情。它是一个指针算术：它只是将一个整数值（即`firstChar`）添加到 string-literal 的地址`"1\. "`，然后将结果（`char const*`类型）传递给函数，在那里它转换为`string`类型。基于 的值`firstChar`，它可以调用未定义的行为。**实际上，在您的情况下，它确实会调用未定义的行为，因为结果指针指向字符串文字之外。**

写这个：

```
MethodA(string("1\. ")+ firstChar ); //my code 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T18:01:31.617

问题是这`"1\. "`是一个字符串文字（字符数组），它将衰减为一个指针。字符本身是 a`char`可以提升为 a `int`，并且 a`const char*`和 an 的加法`int`被定义为通过将原始指针偏移那么多位置来计算新指针。

您在 C++ 中的代码调用`MethodA`的结果是将`(int)firstChar`(字符的 ASCII 值) 添加到字符串字面`"1\. "`量，如果值`firstChar`大于 4（可能是）将是未定义的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T18:02:35.447

C++ 中的字符串文字不是 s 的实例`std::string`，而是`char`s 的常量数组。因此，通过`char`向其添加一个隐式转换为字符指针，然后将其增加字符的数值，这恰好指向存储在 .data 部分中的另一个字符串文字。

# emacs - 如何在 Emacs 中识别缓冲区的所有者/创建者

> ID：11675212
> 
> 赞同：3
> 
> 时间：2012-07-26T17:57:45.163
> 
> 标签：emacs, elisp

如何检查在 Emacs 中创建缓冲区的人的身份，然后再检查是否是同一用户访问该缓冲区？我的意思是“我是谁？” 在 Unix 命令中.. 然后检查同一用户是否正在访问该文档？--> 我想要一个函数或方法在我自己的代码中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T00:07:03.780

*请注意缓冲区*和*文件*之间的区别：**文件**是位于硬盘上的东西，例如 .jpg 图像文件或 .mp3 aufio 文件或 .txt 文件。其中一些文件——通常是文本文件——你可能想用 Emacs 编辑。为此，您可以将文件加载到 Emacs 中 - 这在 Emacs 术语中称为“访问”文件。文件的内容显示在**缓冲区**中。但请注意，您也可能有一个根本不与文件关联的`*scratch*`缓冲区 - 例如，如果您在未指定文件的情况下启动 Emacs 时显示的缓冲区。

因此，文件和缓冲区是非常正交的概念，尽管您经常通过访问文件来创建缓冲区，并通过写入文件来保存缓冲区的内容。（您可以通过键入其中*缓冲区名称*是任何现有缓冲区未使用的标识符来创建与文件无关的缓冲区。）`C-x b *buffer-name*`

 *缓冲区仅存在于正在运行的 Emacs 中。这就是为什么到目前为止您获得的评论和答案可能不是您要寻找的原因：缓冲区的创建者/所有者的概念令人困惑，因为显然是那个坐在键盘前的人片刻。

说到文件的所有者/创建者更有意义。在多帐户设置中，多个用户可以写入同一个磁盘，因此他们可能有权访问相同的文件。现在知道谁拥有访问权限会很有趣，尤其是谁拥有该文件或文件的最后修改时间。在 Elisp 中，您可以使用该功能

```
(file-attributes FILENAME &optional ID-FORMAT) 
```

获取与文件关联的属性列表。如果您当前的缓冲区正在访问一个文件，您可以将该函数与该函数结合使用

```
(buffer-file-name &optional BUFFER) 
```

它返回缓冲区正在访问的文件。对于未访问文件的缓冲区，此函数返回`nil`.

但是请注意，您可能感兴趣的某些信息无法通过 获得`(file-attributes ...)`，例如谁最后访问了文件和/或谁最后修改了文件。这不是 Emacs 的错，而是操作系统不存储此类信息的事实。

另请注意，文件的当前所有者可能不一定是创建它的人，因为具有所需权限的人可以[`chown`](http://en.wikipedia.org/wiki/Chown)在创建文件后创建文件。

要接收有关当前用户的信息`whoami`，您可以查看变量

```
user-login-name
user-real-login-name
user-full-name 
```

通过键入.`C-h v *variable-name*`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T19:04:26.800

从系统看 AFAIK，Emacs 是一个单一进程，由启动它的用户拥有

(getenv "用户")

是各自的

回声 $USER*

# ruby-on-rails - 预期响应为 <:success>，但为 <301>

> ID：11675214
> 
> 赞同：0
> 
> 时间：2012-07-26T17:57:51.997
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing, minitest

我有没有测试的应用程序，现在我正在尝试添加它们（minitest-rails），但是出了点问题。我正在打字`rails generate controller test test` ，我有：

```
require "minitest_helper"
class TestControllerTest < MiniTest::Rails::ActionController::TestCase
  test "should get test" do
    get :test
    assert_response :success
  end
end 
```

现在我正在打字`rake test`并`Expected response to be a <success>, but was <301>`发生错误。问题出在哪里？

**编辑：** 我的控制器的代码：

```
class TestController < ApplicationController
  def test
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:51:43.723

我已经解决了！刚刚删除`force_ssl`并添加`config.force_ssl = true`到生产配置中。

# visual-studio-2010 - TFS 2010 中的待定更改存储在哪里？

> ID：11675217
> 
> 赞同：3
> 
> 时间：2012-07-26T17:57:57.250
> 
> 标签：visual-studio-2010

我对 TFS 2010 有一些疑问：

1- 使用 TFS 2010 时存储未决更改的位置（当您更改文件并关闭 Visual Studio 而不检查这些更改的存储位置时）我相信它们没有存储在工作区中。

2-当您打开 Visual Studio 并从工作区打开文件时，更改会出现在文件中。我对此很困惑。有人可以向我解释这是如何工作的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T09:57:08.280

当您在未签入的情况下进行更改时，修改将存储在本地，但文件在 tfs.xml 上被标记为“修改者”。如果您想在不签入的情况下将修改存储在服务器上，您可以使用搁置功能。

# amazon-ec2 - 删除社区 AMI

> ID：11675218
> 
> 赞同：0
> 
> 时间：2012-07-26T17:57:59.840
> 
> 标签：amazon-ec2, amazon-web-services

当您将已与 AWS AMI 目录共享的 AMI 设为私有/删除/注销时会发生什么？

目录条目现在是死链接还是会自动消失？

您是否必须再次完成提交过程才能将 AMI 重新添加到目录中？

# jquery - jQuery 函数与硬编码。功能不起作用

> ID：11675224
> 
> 赞同：2
> 
> 时间：2012-07-26T17:58:26.250
> 
> 标签：jquery, html

我对 jQuery 有疑问。不能将 id 传递给包含带有某些事件的 jQuery 的 javascript 函数吗？

例如，`load_dl`l 完美运行。我正在努力`update_dll`正常工作。

```
 //Create values for drop down list
var empType = ['Sales Associate', 'New Hire Sales Associate', 'Post-Hire Graduation', 'Senior Supervisor'];
//initialize values
load_ddl(empType, 'empTypeddl');
update_dll('empTypedll', 'empType');
//Populate drop down list function
function load_ddl(arr, id) {
    for (i = 0; i < arr.length; i++) {
        $('<option/>').val(arr[i]).html(arr[i]).appendTo('#' + id);
    }
}
//Update Function
function update_ddl(source_id, target_id) {
    $('#' + source_id).change(function() {
        alert($('#' + source_id + ' option:selected').attr('value'));
    });
} 
```

如果我将其简化为最基本的形式，它仍然可以工作。可以通过id吗？

```
$('#empTypeddl').change(function() {
     alert($('#empTypeddl option:selected').attr('value'));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:05:19.730

尝试将 source_id 作为偶数数据传递，如下所示：

```
//Update Function
function update_ddl(source_id, target_id) {
    $('#' + source_id).change({source_id: source_id}, function(event) {
        alert($('#' + event.data.source_id + ' option:selected').attr('value'));
    });
} 
```

这将创建一个数据属性并将其附加到事件对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:06:40.080

您的代码中有错字：

```
function update_ddl(source_id, target_id) { 
```

应该：

```
function update_dll(source_id, target_id) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:24:38.213

我使用本机 javascript 来获取对象并分配给变量“源”

```
 function update_ddl(source_id, target_id) {

    var source = document.getElementById('source_id');
    source.change(function() {
        alert('$("#'+ source_id + ' option:selected").attr("value")');
    });  

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:35:21.507

```
update_dll('empTypedll', 'empType'); 
```

应该

```
update_ddl('empTypeddl', 'empType'); 
```

# ios - NSUserDefaults 在同步时崩溃

> ID：11675229
> 
> 赞同：4
> 
> 时间：2012-07-26T17:58:37.910
> 
> 标签：ios, cocoa, nsuserdefaults

当我的应用程序正在加载时，我对 NSUserDedaults 字典执行了一些操作。对于某些用户，应用程序在以下逻辑中崩溃：

```
NSUserDefaults* prefs = [NSUserDefaults standartUserDefaults];
NSString* nsKey = [NSString stringWithUTF8String:ket.c_str()];

[prefs removeObjectForKey:nsKey];
[prefs synchronize]; 
```

崩溃发生在最后一行（同步）。我不知道为什么，它不会发生在我身上。

有任何想法吗？

编辑：：

```
This is the crash:

0   CoreFoundation                      0x34d02e58 CFRetain + 20
1   CoreFoundation                      0x34d0a9bf _CFArrayReplaceValues + 235
2   CoreFoundation                      0x34d0f0e5 CFArrayAppendValue + 125
3   CoreFoundation                      0x34d26d57 _flattenPlist + 139
4   CoreFoundation                      0x34d26dbd _flattenPlist + 241
5   CoreFoundation                      0x34d6e08f __CFBinaryPlistWrite + 127
6   CoreFoundation                      0x34d26cad CFPropertyListWrite + 429
7   CoreFoundation                      0x34d26aa5 CFPropertyListWriteToStream + 221
8   CoreFoundation                      0x34d25fc1 _CFXPreferencesWritePlist + 273
9   CoreFoundation                      0x34d25ead -[CFXPreferencesPropertyListSourceSynchronizer writePlistToDisk] + 129
10  CoreFoundation                      0x34d22699 -[CFXPreferencesPropertyListSourceSynchronizer synchronizeAlreadyFlocked] + 601
11  CoreFoundation                      0x34d2243d -[CFXPreferencesPropertyListSourceSynchronizer synchronize] + 21
12  CoreFoundation                      0x34d31b3b -[CFXPreferencesPropertyListSource synchronize] + 111
13  CoreFoundation                      0x34d32b93 -[CFXPreferencesSearchListSource synchronize] + 75
14  CoreFoundation                      0x3719d87f CFArrayRemoveAllValues + 122
15  CoreFoundation                      0x3719e1f1 CFRunLoopTimerIsValid + 36
16  libdispatch.dylib                   0x3435c7e7 __func__.16042 + 2384
17  libdispatch.dylib                   0x3435c647 __func__.16042 + 1968
18  libdispatch.dylib                   0x3435c267 __func__.16042 + 976
19  libdispatch.dylib                   0x3435c911 __func__.16042 + 2682
20  CoreFoundation                      0x34d39c67 CFPreferencesAppSynchronize + 335
21  Foundation                          0x32c4c8ef -[ABMultiCellContentView_Address tagForPropertyKey:] + 30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:48:27.660

试试这样：

```
NSString* nsKey = [NSString stringWithUTF8String:ket.c_str()];
if([[NSUserDefaults standardUserDefaults] stringForKey:nsKey] != nil)
{
    [[NSUserDefaults standartUserDefaults] removeObjectForKey:nsKey];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

# css - 重置继承的 CSS

> ID：11675238
> 
> 赞同：4
> 
> 时间：2012-07-26T17:58:55.910
> 
> 标签：css

我正在尝试为网站创建替代设计作为后备。我无法真正改变系统的架构方式。加载一个主样式表，然后加载第二个样式表。我可以控制第二个样式表。我想要重置很多 CSS，特别是表单元素。

但是，我对此有困难。例如`<button>`：

```
background: rgb(88,222,255);
border-radius: 4px;
border: 1px solid #91d7eb;
box-shadow: 0px 2px 4px 0px rgba(1, 75, 138, .8);
color: #FFF;
cursor: pointer;
font-family: "Graphic-Font";
font-size: 25px;
font-weight: bold;
text-shadow: 0px 1px 3px #014b8a;
padding: 10px 40px; 
```

虽然我可以设置`background: none`, border-radius: none` 等等，但是按钮没有样式，而不是默认的浏览器样式。我必须让表单元素成为默认浏览器样式，以及页面上的许多其他元素。但我似乎至少无法让表单元素没有样式。

**为了清晰** 简化问题：如何将样式`<button>`重新设置为默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:40:08.623

我建议使用 CSS 重置作为起点（[Eric Meyers](http://meyerweb.com/eric/thoughts/2011/01/03/reset-revisited/)可能是最著名的）。

我认为您在不想设置自己的样式但将其返回到浏览器默认值的事情上遇到了麻烦（例如，您不想要`margin:0;`所有内容，您想要默认的大边距`H1`，默认上较小的一个`p`，等等。

您实际上可以获取用户代理样式表的副本，修改它们以使其更具体，并包含它们以覆盖。[这是一个包含许多默认 UA 样式表副本的站点](http://meiert.com/en/blog/20070922/user-agent-style-sheets/)。这里的一个问题是每个浏览器都使用它们自己的，因此除非您的浏览器检测并提供选择性样式表，否则它看起来不会像该浏览器通常那样。不过，我认为没关系。我实际上建议您选择一个您喜欢的浏览器默认设置并将所有浏览器设置为这样，或者您可以使用[W3C 对默认浏览器样式的建议](http://www.w3.org/TR/CSS21/sample.html)。

但是，所有这些都不能解决您的问题，因为样式化表单元素是地狱。应用样式后，某些浏览器会立即切换表单元素的呈现模式，因此您永远无法将其恢复为原始样式。例如，IE7 不支持圆角，但它们的默认按钮具有圆角，因为它以 Windows 操作系统样式呈现。但是一旦你给按钮一个边框或其他样式，它就会失去那种漂亮的 Windows 阴影圆角默认外观，并且如果不使用图像就无法恢复它！

所以真的，我不会因为试图让浏览器恢复到它们的原生默认样式而拍摄。我会使用 UA 默认样式表，然后对其进行修改，使其成为一种通用的、跨浏览器、跨系统的默认样式。它看起来不像原生的无样式代码，但看起来足够接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:06:10.283

您需要了解[CSS 特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)是如何工作的。您可以覆盖任何 CSS 规则，使其比其他规则更具体。

例如：

```
<div class="content">
    <div class="wrapper"><span>Hello World</span></div>
</div> 
```

CSS：

```
.content .wrapper span { ... }
.wrapper span { ... } 
```

在这种情况下，第一个声明将覆盖第二个声明，因为它“更具体”。您通常可以只向上一级树并指定包装元素或包装类来覆盖内部元素的规则。这实际上是在处理许多 CMS 系统，例如 WordPress，在这些系统中您无法访问主样式表，或者只是想不理会它并重新设计您想要的部分。

看文章，很重要。

[CSS 特异性：你应该知道的事情](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# ruby - 确定 Array.each 中元素的索引

> ID：11675240
> 
> 赞同：0
> 
> 时间：2012-07-26T17:58:58.363
> 
> 标签：ruby, arrays, ruby-on-rails-3, ruby-on-rails-3.1, each

我正在尝试以三行呈现大量内容。但是，我不确定如何使用 Ruby 确定元素的当前位置。这就是我所拥有的：

```
<% Animals.each do | animal | %>
    <%= animal.species %>
<% end %> 
```

我希望能够在每次我们击中集合中的第三只动物时添加一个`<BR>`或者如果我正在渲染一个表格。`</TR><TR>`当然，如果元素的数量`nE`不能被 3 整除，那么该表就会出现格式错误。我想通过在迭代后进行一些检查，我可以关闭它。

但是有没有办法获取在方法中迭代的元素的索引`Array.each`？我有强烈的预感，我可以做到以下几点：

```
<table>
<% Animals.each do | animal | %>
<% if Animals.find_index(animal) / 3 == 0 %>
   <tr>
<% end %>
       <td><%= animal.species %></td>
<% if Animals.find_index(animal) / 3 == 2 %>
   </tr>
<% end %>
</table> 
```

我唯一的事情是它`Animal`是 的子类`ActiveRecord::Base`，所以我不确定（还没有看到）这是否会很好地扩展，更不用说每次调用`find_index`是否都是超级密集的方法。欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:02:04.447

你需要

```
<% animals = Animals.all %>
<table>
<% animals.in_groups_of(3) do |animal_row| %>
  <tr>
    <% animal_row.compact.each do |animal| %>
      <td><%= render animal %></td>
    <% end %>
  </tr>
<% end %>
</table> 
```

应该大致完成这项工作。

更重要的是，作为一名 Ruby 开发人员，我认为将 Enumerable 模块的文档放在手边对我来说非常棒。它是我“最喜欢”的模块，几乎总是可以帮助我轻松解决棘手的问题。

# internet-explorer-9 - IE9 uri 编码问题

> ID：11675243
> 
> 赞同：2
> 
> 时间：2012-07-26T17:59:08.347
> 
> 标签：internet-explorer-9, query-string, uriencoding

我通过查询字符串将参数传递给 php 页面。

参数发送如下

```
str=WNQwMGfRxgozriA%2FVvxwuMFIAAD1%2BHXmFjOSUa4tBGM%3D 
```

我让 php 页面所做的只是回显 str 的值。

在 FF/chrome/IE8 我得到的值

```
WNQwMGfRxgozriA/VvxwuMFIAAD1+HXmFjOSUa4tBGM= 
```

但是在 IE9 中我得到了

```
WNQwMGfRxgozriA/VvxwuMFIAAD1 HXmFjOSUa4tBGM= 
```

请注意，在 1 和 H 之间有一个空格而不是 +。

有谁知道它为什么这样做？%2B 应该是 + 但它在 IE9 中作为空格传递。

# android - Android：上下文注册的广播接收器是否已导出？

> ID：11675245
> 
> 赞同：17
> 
> 时间：2012-07-26T17:59:16.443
> 
> 标签：android, broadcastreceiver, android-broadcast

如果我像这样在我的活动中注册广播接收器，

```
@Override
protected void onResume() {
    super.onResume();

    myReceiver = new BroadcastReceiver() { ... };
    IntentFilter filter = new IntentFilter("com.example.MY_ACTION");
    registerReceiver(myReceiver, filter);
} 
```

这个接收器是出口的吗？如果另一个应用程序广播`com.example.MY_ACTION`，它会被接收`myReceiver`吗？

如果是，我假设我需要使用`registerReceiver()`接受字符串权限的形式，然后在我的清单中定义该权限，给它一个高保护级别（例如签名）。那是对的吗？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:22:35.743

来自 BroadcastReceiver API 的 api 文档：

> 如果您不需要跨应用程序发送广播，请考虑将此类与[LocalBroadcastManager](https://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)一起使用，而不是下面描述的更通用的工具。这将为您提供更高效的实现（无需跨进程通信），并让您避免考虑与其他应用程序能够接收或发送广播相关的任何安全问题。

这样至少您可以将接收器仅保留在您的应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-25T15:35:50.017

为了节省其他人的工作和我自己的存档目的：是的，默认情况下会导出上下文注册的接收**器**。

似乎没有很多[文档](https://developer.android.com/training/articles/security-tips#BroadcastReceivers)，但您可以通过运行发送自定义广播的单独应用程序来快速验证这一点。我在 API 16-29 上对此进行了测试，广播将被接收，因此每个包都可以发送到您的接收器（这可能是一个安全漏洞）。

* * *

要在不使用本地广播（[应尽可能使用](https://developer.android.com/guide/components/broadcasts.html#security-and-best-practices)）的情况下解决问题，您在定义自定义权限并将[广播限制为已请求该权限的应用程序方面](https://developer.android.com/guide/components/broadcasts.html#restrict-broadcasts-permissions)处于正确的轨道。为了完整起见：

在清单中定义和使用自定义权限：

```
<permission android:name="com.example.bcrtest.BROADCAST_PERMISSION"
    android:protectionLevel="signature"/>
<uses-permission android:name="com.example.bcrtest.BROADCAST_PERMISSION" /> 
```

注册具有权限的接收者：

```
registerReceiver(mReceiver, new IntentFilter(MY_INTENT_ACTION), "com.example.bcrtest.BROADCAST_PERMISSION", null ); 
```

# html - HTML: Page background image link not working due to wrapper

> ID：11675246
> 
> 赞同：0
> 
> 时间：2012-07-26T17:59:20.150
> 
> 标签：html, css

I have a html page with a full background image within the body tag, followed by a wrapper: `<body> <a href="#" id="bkimage">Background Image</a> <wrapper> .................`

Styles:

```
#bkimage {
position: fixed;
background: url('images/bk.jpg') no-repeat top center;
width: 100%;
height: 1240px;
z-index: -1;
display:block;
overflow:hidden;
text-indent:100%;
white-space:nowrap;
}
#wrapper {
margin: 0 auto;
width: 960px;
background: url('images/transpBlack25.png'); 
```

}

The idea is to make the background image clickable. But we need to keep the complete contents of webpage within the #wrapper. body and wrapper tags already have other background images.

This method is not working. I guess it might be because of the wrapper having "margin: 0 auto" property? But am not sure.

Is there a simple workaround for this problem? Please help...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:24:04.320

The link is not clickable because `z-index:-1` sets it behind all the other elements on the page. If something is in the background, and there is something else in front of it, all the clicks directed towards the background element will end up landing on the element directly in front of it. If you're trying to make the entire page act like one giant link, you could enclose everything in the anchor tag.

```
<style>
#bkimage {
    position: fixed;
    top:0;
    left:0;
    background: url('images/bk.jpg') no-repeat top center;
    width: 100%;
    height: 1240px;
    display:block;
}
#wrapper {
    margin: 0 auto;
    width: 960px;
    background: url('images/transpBlack25.png');
}
</style>

<body>
    <a href="" id="bkimage">
    <div id="wrapper">content</div>
    </a>
</body> 
```

# sql - 使用 Access 2003 追加查询

> ID：11675251
> 
> 赞同：0
> 
> 时间：2012-07-26T17:59:46.327
> 
> 标签：sql, ms-access

我正在帮助一所小型学校使用我三年前创建的数据库，并且效果很好。我现在正在创建一个考勤登记簿作为它的一个新功能，并且正在努力更新查询字段。

我有两个表和一个附加查询，它们与我创建的表单配合得很好。我有组合框来过滤类以检查运行良好的寄存器。我面临的问题是在运行查询时，它会更新所有 180 名学生，而不是每个班级过滤的学生。

我只需要为所选的类附加数据。谢谢你

请帮忙。哈利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:45:56.403

您似乎只希望更新或附加与表单上的组合框匹配的行。您可以在 MS Access 的查询中引用打开的表单。使用设计视图中的追加查询，在要匹配的字段下输入表单！后跟您的表单名称、另一个点或感叹号，以及您的组合名称，请说：

```
Forms!Form1!Combo0 
```

在 SQL 视图中，追加查询看起来像：

```
INSERT INTO Table1 ( AText )
SELECT Table2.AText
FROM Table2
WHERE Table1.ID=[Forms]![Form1]![Combo0] 
```

同样对于更新查询：

```
UPDATE Table1b 
SET Table1b.ADate = Date()
WHERE Table1b.ID=[Forms]![Form1]![Combo0] 
```

# .net - BuildAction=递归内容

> ID：11675254
> 
> 赞同：1
> 
> 时间：2012-07-26T17:59:53.537
> 
> 标签：.net, msbuild

我有一个包含 BuildAction = Content 和 Copy to output = Always 的文件的程序集。现在我构建依赖于 Assembly 的 Executable，我希望 VisualStudio/MsBuild 以某种方式将内容文件复制到输出，以便 Assembly 可以工作。但它不会发生。

目前我手动解决了这个问题：要么将这些文件添加为可执行项目的链接，要么在构建事件中复制。有没有办法自动解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T01:25:24.733

如果您手动编辑代表您的项目的 .csproj 文件，则可以完成此操作。

例如，假设您有一个名为“binaries”的文件夹，您需要将其复制到输出目录（我建议使用 None 的构建操作并始终复制到输出目录，但此方法适用于任何一种，我将如下所示）。：

关闭 Visual Studio，不添加任何“二进制”文件或文件夹。在 Windows 资源管理器中，浏览到您的项目目录，并手动创建此“二进制文件”文件夹，其中包含所需的文件。然后，使用文本编辑器编辑项目的 .csproj 文件。查找包含多个“ItemGroup”标签的文件部分。您需要添加以下内容：

```
<ItemGroup>
    <None Include="binaries\**\*.*">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
</ItemGroup> 
```

当您再次在 Visual Studio 中打开项目时，您会发现包含正确的构建操作和复制设置。

内容构建操作也可以这样做，而不是：

```
<ItemGroup>
    <Content Include="binaries\**\*.*" />
</ItemGroup> 
```

但是，我在野外使用它的成功率较低。

这是解决此问题的另一个答案：

[有没有办法自动将内容文件包含到 asp.net 项目文件中？](https://stackoverflow.com/questions/2551107/is-there-a-way-to-automatically-include-content-files-into-asp-net-project-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:04:45.983

```
//this is the class library project
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ClassLibrary1
{
    public class Class1
    {
        public Class1()
        {
            string res = "";
            using (StreamReader sr = new StreamReader("TextFile1.txt"))
            {
                res = sr.ReadToEnd();
            }
            Console.WriteLine("ok dll {0}",res);
            Console.ReadLine();
        }
    }
}
//I add a text file which name is TextFile1.txt with BuildAction = Content and Copy to output = //Always 
//it contains a sentence
i am in the file no problem

//a console application that refers the class library
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;
using System.Data;
using ClassLibrary1;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            Class1 c = new Class1();

        }
    }
}

//it is ok, with a rebuild all if you update the text file... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T23:25:38.720

您可以将 BuildAction 更改为 EmbeddedResource，这样它就在程序集中，您可以轻松访问它。

# ruby-on-rails-3 - 设计未定义的方法“电子邮件”

> ID：11675255
> 
> 赞同：2
> 
> 时间：2012-07-26T17:59:54.160
> 
> 标签：ruby-on-rails-3, devise

每当我点击登录按钮时，我都会收到以下错误：

```
NoMethodError in Devise/sessions#new

Showing /Users/chanel.n/svn-    work/gwb/trunk/PMOCCU/ProcessEnforcer/app/views/devise/sessions/new.html.erb where line #5 raised:

undefined method `email' for #<User id: nil, name: nil, created_at: nil, updated_at: nil>
Extracted source (around line #5):

2: 
3: <%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
4:   <div class="field"><%= f.label :email %><br />
5:   <%= f.email_field :email %></div>
6: 
7:   <div class="field"><%= f.label :password %><br />
8:   <%= f.password_field :password %></div>
Rails.root: /Users/chanel.n/svn-work/gwb/trunk/PMOCCU/ProcessEnforcer

Application Trace | Framework Trace | Full Trace
app/views/devise/sessions/new.html.erb:5:in `block in    _app_views_devise_sessions_new_html_erb___4179931318693150703_70215900182100'
app/views/devise/sessions/new.html.erb:3:in `_app_views_devise_sessions_new_html_erb___4179931318693150703_70215900182100' 
```

这是我的用户模型，其中包括电子邮件：

```
class User < Role
has_and_belongs_to_many :roles

attr_accessible :name, :roles

# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable
devise :database_authenticatable, :registerable,
     :lockable, :timeoutable, :trackable, :validatable, :token_authenticatable

# Setup accessible (or protected) attributes for your model
attr_protected :email, :password, :password_confirmation, :department, :encrypted_password 
# attr_accessible :title, :body, :remember_me

 validates_presence_of :email

end 
```

无论出于何种原因，它都无法识别电子邮件。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:26:14.597

默认情况下，设计使用电子邮件作为登录名，因此它要求您拥有 :email 和 :encrypted_pa​​ssword 字段。

您的用户模型中都没有。因此，您需要添加这些字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:02:50.133

您的电子邮件字段在用户模型中不可访问，您应该使用以下方法使其可访问：

```
attr_accessible :name, :roles, :email 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T16:53:32.907

其他建议与我的情况无关。我的设计版本已经过时了。升级到 3.2.4 为我修复了它。

主要问题似乎是设计生成的迁移在新版本中有所不同。

# objective-c - 当从 UIStoryboard 实例化 ViewController 时，isMemberOfClass 返回 no

> ID：11675256
> 
> 赞同：4
> 
> 时间：2012-07-26T17:59:54.003
> 
> 标签：objective-c, ios, unit-testing, ocunit

我有一个 OCUnit 测试类：PatientTestViewControllerTests。下面是界面：

```
@interface PatientTestViewControllerTests : SenTestCase

@property (nonatomic, strong) PatientTestViewController *testController;

@end 
```

和设置：

```
- (void) setUp
{    
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Testing" bundle:nil];
    self.testController = [storyboard instantiateInitialViewController];
} 
```

“测试”故事板是我的应用程序中唯一的故事板，并被设置为应用程序的主故事板。PatientTestViewController 被设置为故事板的唯一视图控制器。

我的测试班有一项测试：

```
- (void) testInitialTestingStoryboardViewIsPatientTest
{
    STAssertTrue([self.testController isMemberOfClass:[PatientTestViewController class]], @"Instead of the %@, we have %@",[PatientTestViewController class], [self.testController class]);
} 
```

此测试失败并显示以下日志消息：

错误：-[PatientTestViewControllerTests testInitialTestingStoryboardViewIsPatientTest]：“[self.testController isMemberOfClass:[PatientTestViewController class]]”应该为真。我们有**PatientTestViewController**而不是**PatientTestViewController**

 **怎么会这样？自从

`[self.testController isMemberOfClass:[PatientTestViewController class]]`

显然是假的，测试日志怎么能说两者都

`[self.testController class]`和`[PatientTestViewController class]`

看起来一样？

附加信息：

*   `[self.testController isKindOfClass:[PatientTestViewController class]]`在测试中使用也失败了
*   使用`[self.testController class] == [PatientTestViewController class]`也失败了。

*   使用 `[self.testController isKindOfClass:[UIViewController class]]`通行证。

*   使用`[self.testController isMemberOfClass:[UIViewController class]]`失败。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T20:06:44.490

问题很可能是您的视图控制器的 .m 文件包含在两个目标中，即应用程序和测试包中。ocunit（以及 Kiwi 等衍生产品）使用测试工具，使应用程序中包含的类可用于测试，而无需显式包含它们的实现。

包括两者都为您提供了同一类的两个副本，这就是为什么它们具有相同的描述但内存地址不同的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T18:24:45.650

你一般想`isKindOfClass:`不想`isMemberOfClass:`。不同之处在于，如果接收者是相关类的子类的成员，则将返回`isKindOfClass:`，而在相同情况下将返回。`YES``isMemberOfClass:``NO`

您也可以使用`[self.testController class] == [PatientTestViewController class]`.**

# android - 两个安卓设备之间基于RFCOMM的蓝牙通信

> ID：11675257
> 
> 赞同：4
> 
> 时间：2012-07-26T17:59:56.243
> 
> 标签：android, bluetooth, rfcomm

对于一些需求分析，我想测试两个 android 设备之间基于 RFCOMM 的蓝牙通信。

我需要从 Android 设备 1 发送大约 1 MB 的数据，Android 设备 2 应该接收它并显示/保存数据。我需要使用 Bluetooth SPP (RFCOMM) profile 来做到这一点。

有人可以建议一些可用的应用程序/代码来做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T18:36:44.477

在 Android 开发者的蓝牙文档下。有一个蓝牙聊天应用程序示例，它将包含一个活动，用于促进两个设备之间的通信以及服务连接。这将是你想要做的最好的例子。这是教程的链接，您还可以在此处找到蓝牙聊天应用程序的链接：

[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

要查看 BluetoothChat 应用程序，您首先需要 Android SDK，然后才能找到源代码。

一般来说，先做一些研究，因为这里有另一个同类型的问题，它有更多的细节，并表明用户首先做了一个很好的尝试。

[适用于 Android 的蓝牙示例](https://stackoverflow.com/questions/6141668/bluetooth-examples-for-android)

遵循 BluetoothChat 应用程序或 Android 文档上的书面教程后，如果您遇到蓝牙错误和其他代码问题。Stack Overflow 绝对是为您的烦恼获得高质量答案的方法！

# java - 生成的没有设置器的 Web 服务客户端类

> ID：11675258
> 
> 赞同：6
> 
> 时间：2012-07-26T17:59:57.037
> 
> 标签：java

我已经为 SOAP Web 服务创建了一个客户端，但是在生成的代码中，一些类缺少 setter 方法。

对象的 WSDL 如下所示：

```
<xsd:complexType name="UserDefinedFieldArray">
<xsd:sequence>
<xsd:element name="userDefinedField" minOccurs="0" maxOccurs="unbounded"  
           type="ns0:UserDefinedField"/>
</xsd:sequence>
</xsd:complexType>
<xsd:complexType name="UserDefinedField">
<xsd:sequence>
<xsd:element name="fieldName" type="xsd:string"/>
<xsd:element name="fieldValue" type="xsd:string"/>
<xsd:element name="listId" type="xsd:string"/>
</xsd:sequence>
</xsd:complexType> 
```

这些对象只有 setXXX()，Java Docs 坚持这一点：

“此访问器方法返回对活动列表的引用，而不是快照。因此，您对返回列表所做的任何修改都将出现在 JAXB 对象中。这就是为什么 testSuiteUdfs 属性没有 set 方法的原因。例如，要添加新项目，请执行以下操作： getTestSuiteUdfs().add(newItem); "

虽然我的逻辑告诉我，更新的列表在你发送到服务器之前无法到达服务器？

我设法找到的唯一相关内容：[http](http://www-01.ibm.com/support/docview.wss?uid=swg21440294) ://www-01.ibm.com/support/docview.wss?uid=swg21440294 。但这根本没有帮助。

谁能告诉我用什么方法挖？因为我根本不明白这应该如何工作。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:19:39.163

更新由 JAXB 映射的域对象不会导致与服务器的通信。JAXB (JSR-222) 是将对象转换为 XML 的标准。JAX-WS (SOAP) 和 JAX-RS (RESTful) 框架利用它来生成/使用通过客户端和服务器之间的线路发送的消息。

**更新**

> “您对返回列表所做的任何修改都将出现在 JAXB 对象中。”

这意味着`List`你得到的是真实的`List`而不是复制品。您可以使用以下代码对此进行测试：

```
System.out.println(customer.getPhoneNumbers().size());  // returns x
customer.getPhoneNumbers().add(new PhoneNumber());
System.out.println(customer.getPhoneNumbers().size());  // returns x + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T03:47:54.410

在要公开为列表或数组类型的元素上使用 @XmlElementWrapper。确保为@XmlElement 设置名称，客户端中生成的存根代码不会混淆类名。

# mysql - 平均从子查询返回的列

> ID：11675265
> 
> 赞同：7
> 
> 时间：2012-07-26T18:00:29.510
> 
> 标签：mysql, sql

是否无法平均子查询的结果？

这是我正在与之抗争的查询：

```
SELECT AVG(
    SELECT SUM(`retail_subtotal`)
      FROM `order`
     WHERE `status` IN('O')
  GROUP BY `lead_id`
); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T18:02:26.557

如果你想这样做，你需要创建一个子查询。通过创建子查询，您可以为该`SUM()`列命名，然后`AVG()`为该新字段命名。

```
SELECT AVG(x.SubTotal)
FROM
(
    SELECT SUM(`retail_subtotal`) SubTotal
      FROM `order`
     WHERE `status` IN('O')
  GROUP BY `lead_id`
) x; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T18:09:14.773

实际上，表达查询的更简单方法是不使用子查询：

```
SELECT SUM(`retail_subtotal`)/count(distinct lead_id) as avg
FROM `order`
WHERE `status` IN ('O') 
```

（这假设lead_id 永远不会为NULL。）

您的原始查询出现问题不仅是因为 avg() 中的子查询，还因为子查询返回了多行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T18:02:29.877

当然，只需给结果列命名并从中选择：

```
SELECT AVG(theSum)
FROM
(
    SELECT SUM(`retail_subtotal`) AS theSum
    FROM `order`
    WHERE `status` IN('O')
    GROUP BY `lead_id`
) T 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T18:05:39.310

您正在进行选择而不指定表格。

试试这个

```
SELECT AVG(sum) from 
    (SELECT SUM(`retail_subtotal`) as 'Sum'
      FROM `order`
     WHERE `status` IN('O')
  GROUP BY `lead_id`
) T1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T18:06:25.320

我认为这应该工作......

```
SELECT AVG(retail_sub) FROM
(
   SELECT SUM('retail_subtotal') As retail_sub
    From 'order'
    WHERE `status` IN('O')
    GROUP BY `lead_id`
) As Z 
```

# android - 安卓应用背景

> ID：11675280
> 
> 赞同：-1
> 
> 时间：2012-07-26T18:01:34.720
> 
> 标签：android, background

开发我的应用程序时..我应该做多大的背景？请注意，我想为所有四种尺寸（低、中、高、高）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:04:25.593

可能是下面的链接帮助你

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

# facebook - 用户如何评价 Facebook Connect 网站？

> ID：11675288
> 
> 赞同：2
> 
> 时间：2012-07-26T18:02:21.323
> 
> 标签：facebook

Facebook 应用程序中心的新增功能向我提出了一个问题。我有一个 facebook 连接网站。App Center 允许在此处列出网站以及画布应用程序。我看到有像 Pinterest 这样的网站，它们有评级（1-5 星）。应用中心上架流程甚至要求你有一定的评分和足够的正面反馈，他们才会公开上架你的应用。我没有看到任何 API 或社交插件可以让我的网站访问者对网站进行评分。这些其他网站的评分如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:24:58.183

目前没有 API 可以对应用程序进行评分，而是 Facebook 会随机要求用户根据各种标准对他们使用过的应用程序进行评分。

这样做的主要原因是使操纵评级变得更加困难，因此用户可以确信他们看到的分数是准确的。

# java - Google App Engine / Java：blobstore.serve 返回 500 服务器错误

> ID：11675294
> 
> 赞同：2
> 
> 时间：2012-07-26T18:02:36.707
> 
> 标签：java, google-app-engine, blobstore, google-cloud-storage

我在 Google App Engine 上有一个 Java 应用程序，它带有一个从 Google Cloud Storage 加载大图像的 servlet。这段代码确实有效（就像......昨天），但由于某种原因它不再有效，但我没有编辑它！在刷新几次时，它曾经返回了大约一半应该加载的图像，然后停止了。

这是小服务程序：

```
@SuppressWarnings("serial")
public class SomeServlet extends HttpServlet
{
    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException
    {
        BlobstoreService blobstore = BlobstoreServiceFactory.getBlobstoreService();
        String file = req.getParameter("file");
        String folder = req.getParameter("folder");

        BlobKey blobkey = blobstore.createGsBlobKey("/gs/bucket/" + folder + "/" + file + ".jpg");

        blobstore.serve(blobkey, resp);
    }
} 
```

这是日志的内容，没有任何警告/错误/关键标志：

> 2012-07-26 19:44:54.635 /servlet?folder=SomeFolder&file=SomeFile 200 96ms 0kb Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1 [26/Jul/2012:10: 44:54 -0700]“GET /servlet?folder=SomeFolder&file=SomeFile HTTP/1.1”200 334 -“Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1”“myapp.appspot。 com" ms=97 cpu_ms=103 api_cpu_ms=33 cpm_usd=0.002957 实例=00c61b117cef9993f79be3c568c0cbda0f14

这是[http://myapp.appspot.com/servlet?folder=SomeFolder&file=SomeFile](http://myapp.appspot.com/servlet?folder=SomeFolder&file=SomeFile)显示的内容：

> 错误：服务器错误 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:15:33.170

我建议以下内容来找出确切的问题：

*   在您的 doGet 和 catch 异常处理程序中放置一个 try/catch，记录错误消息或将其写在屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:44:51.793

您确定您的应用可以访问您尝试从中提供文件的存储桶吗？您的应用程序中的服务帐户至少需要对您尝试服务的对象具有读取权限。

文件的实际服务发生在您的 servlet 之外，这就是您在日志中看不到任何内容的原因。

# stored-procedures - 基本存储过程（更新列值）

> ID：11675295
> 
> 赞同：0
> 
> 时间：2012-07-26T18:02:42.713
> 
> 标签：stored-procedures, oracle10g

我有一个如下所示的基本表：

```
SQL> desc comments
Name              Null?        Type
---------------------------------------
COMMENT_ID        NOT NULL     NUMBER
POST_ID           NOT NULL     NUMBER
USER_ID           NOT NULL     NUMBER
MESSAGE           NOT NULL     VARCHAR2(2500)
MESSAGE_TIME      NOT NULL     TIMESTAMP(6)
UPVOTES           NOT NULL     NUMBER 
```

我想做的是调用一个存储过程来增加赞成票。这似乎是最有意义的，因为我不想传递除了 comment_id 和 post_id 之外的任何东西。

我想我应该做这样的事情（请原谅语法，我已经很久没有搞乱存储过程了）

```
CREATE OR REPLACE procedure proc_upvote_comment (comment_id NUMBER , post_id NUMBER) 
BEGIN
    SELECT UPVOTES FROM COMMENTS 
        WHERE COMMENTS.COMMENT_ID  = proc_upvote_comment.comment_id 
              AND COMMENTS.POST_ID = proc_upvote_comment.post_id;
   //Call an update
END;
/ 
```

但我似乎不知道这里缺少的部分。我试过查看 [http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_packages.htm#i1007682](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_packages.htm#i1007682) http://docs.oracle.com/cd/B12037_01/server.101/b10759 /statements_6009.htm

还有网站上的其他几个地方——但我只是错过了一些东西。

在正确方向上的任何帮助都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:04:34.223

有什么原因这对您不起作用：

```
 CREATE OR REPLACE procedure proc_upvote_comment (comment_id NUMBER , post_id NUMBER) 
 AS
 BEGIN
    UPDATE COMMENTS 
       SET UPVOTES = UPVOTES + 1
     WHERE COMMENTS.COMMENT_ID  = proc_upvote_comment.comment_id 
          AND COMMENTS.POST_ID = proc_upvote_comment.post_id;
 END; 
```

请记住，SQL 与集合一起工作；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:09:19.903

你可能只是想要

```
CREATE OR REPLACE procedure proc_upvote_comment (p_comment_id NUMBER , p_post_id NUMBER) 
AS
BEGIN
  UPDATE comments
     SET upvotes = upvotes + 1
   WHERE comment_id = p_comment_id
     AND post_id    = p_post_id;
END;
/ 
```

通常，您希望有一个命名约定来区分参数和列名。我更喜欢使用`p_`参数`l_`前缀和局部变量前缀，但还有其他约定。如果您不这样做并且对列和参数使用相同的名称，则 SQL 语句将首先使用列名称解析标识符，然后再使用参数名称。诉诸为存储过程的名称添加前缀以提供范围解析是可行的，但它相当麻烦。

# wordpress - 标题的元框

> ID：11675300
> 
> 赞同：0
> 
> 时间：2012-07-26T18:03:05.383
> 
> 标签：wordpress

我实际上在网上搜索了元框，但没有找到我想要的东西，因为它们是特定于页面和帖子的。所以我实际上正在寻找一个东西（元框或其他东西），它将在管理面板中为我提供一个简单的文本字段，当我输入 youtube 视频的链接并点击提交时，视频将出现在我博客的 HEADER 中。那么哪个工具可以让我做我描述的事情呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:20:53.960

这实际上是我在这里的意思的“自定义字段”。对于每个帖子，您可以添加一个自定义字段，并在标题中您可以通过“get_post_custom_values”函数使用每个帖子的值。

# python - 对 Python 的 glob 的限制？

> ID：11675301
> 
> 赞同：2
> 
> 时间：2012-07-26T18:03:06.740
> 
> 标签：python, glob, arcpy

我`glob`用来将文件名提供给这样的循环：

```
inputcsvfiles = glob.iglob('NCCCSM*.csv')

for x in inputcsvfiles:

    csvfilename = x
    do stuff here 
```

我用来制作此脚本原型的玩具示例适用于 2、10 甚至 100 个输入 csv 文件，但我实际上需要它来循环 10,959 个文件。当使用这么多文件时，脚本在第一次迭代后停止工作并且无法找到第二个输入文件。

鉴于脚本在“合理”数量的条目（2-100）下工作得非常好，但不是我需要的（10,959）是否有更好的方法来处理这种情况，或者我可以设置的某种参数允许大量迭代？

PS-最初我使用的是`glob.glob`，但 glob.iglob fairs 并没有更好。

编辑：

上面的扩展以获得更多上下文......

```
 # typical input file looks like this: "NCCCSM20110101.csv", "NCCCSM20110102.csv", etc.   
    inputcsvfiles = glob.iglob('NCCCSM*.csv')

    # loop over individial input files    
      for x in inputcsvfiles:

        csvfile = x
        modelname = x[0:5]

        # ArcPy
        arcpy.AddJoin_management(inputshape, "CLIMATEID", csvfile, "CLIMATEID", "KEEP_COMMON")

        do more stuff after 
```

该脚本在 ArcPy 行失败，其中“csvfile”变量被传递到命令中。报告的错误是找不到指定的csv文件（例如，“NCCSM20110101.csv”），而实际上，csv肯定在目录中。难道你不能像我上面所说的那样多次重用声明的变量（x）吗？同样，如果要 glob'd 的目录只有 100 个左右的文件，这将正常工作，但如果有很多（例如，10,959），它似乎会在列表中的某个地方任意失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:11:42.210

尝试为这 10,000 个条目在 shell 上执行 ls *，shell 也会失败。遍历目录并为您的目的一一生成这些文件怎么样？

```
#credit - @dabeaz - generators tutorial

import os
import fnmatch

def gen_find(filepat,top):
    for path, dirlist, filelist in os.walk(top):
        for name in fnmatch.filter(filelist,filepat):
            yield os.path.join(path,name)

# Example use

if __name__ == '__main__':
    lognames = gen_find("NCCCSM*.csv",".")
    for name in lognames:
        print name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:01:06.467

如果它适用于 100 个文件但对于 10000 个文件失败，则检查它在完成后`arcpy.AddJoin_management`关闭。`csvfile`

一个进程在任何时候可能拥有的打开文件的数量是有限制的（您可以通过运行来检查`ulimit -n`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-20T02:05:56.247

出现的一个问题不是 Python 本身，而是 ArcPy 和/或[MS 处理 CSV 文件](http://msdn.microsoft.com/en-us/library/ms709353%28v=vs.85%29.aspx)（我认为更多的是后者）。随着循环的迭代，它会创建一个`schema.ini`文件，其中添加和存储循环中处理的每个 CSV 文件的信息。随着时间的推移，它`schema.ini`变得相当大，我相信这就是性能问题出现的时候。

我的解决方案虽然可能不优雅，但`schema.ini`在每个循环期间删除文件以避免该问题。这样做让我能够处理 10k+ CSV 文件，虽然速度相当慢。说实话，我们最终使用了 GRASS 和 BASH 脚本。

# pyqt - PyQt Signals And Slots，在线程之间传递对象

> ID：11675307
> 
> 赞同：1
> 
> 时间：2012-07-26T18:03:38.923
> 
> 标签：pyqt, pyqt4, qthread

首先，我使用的是老式的信号和插槽，以及 QThreads。

我有两个线程，一个用于 GUI，另一个用于工作。当工作人员发出信号时，GUI 在自己的线程中处理它。

作为该过程的一部分，工作人员还将一个对象传递给插槽，因此我使用以下内容：

```
self.emit(SIGNAL(my_signal(PyQT_PyObject), self.object_to_pass) 
```

GUI 必须解释这个对象；事实上，它会读取属性并相应地更新进度条。插槽定义为：

```
def my_slot(self, my_state):
    self._state = my_state #so object_to_pass comes in from the worker here 
```

我的问题如下：访问传递的对象线程安全吗？如果工人改变了 object_to_pass 的某些属性会发生什么，即 self._state 也会改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:50:26.400

对传递对象的访问*不是*隐式线程安全的。对象通过引用传递信号，因此两个线程将在同一个对象上运行。

# php - MySQL 从多个不相关的表中选择数据

> ID：11675308
> 
> 赞同：0
> 
> 时间：2012-07-26T18:03:42.497
> 
> 标签：php, mysql, select

我的网站上有一个页面，我想在其中列出客户订购零件或将自行车送去维修的单独实例。每一项的数据都包含在单独的表格中。最终，我将按日期对这些进行排序，并使用 ORDER BY 和 COALESCE 来完成这项工作，但首先我必须提取数据，但我不知道该怎么做。

由于这两个表不相关，我不会使用 JOIN 来组合数据，我想我可能会使用 UNION 但后来了解到联合的数据和列数需要相似。我在某个地方看到有人只是抛出一个逗号，但我无法让我的工作。

这是我所拥有的：

```
$result = mysql_query("SELECT 
        p.part_id,
        p.part_num,
        p.descr,
        p.vendor,
        p.date_entered,
        p.date_ordered,
        p.date_rcvd,
        s.serv_id,
        s.make,
        s.model,
        s.yr,
        s.vin,
        s.mileage,
        s.in_date,
        s.out_date
    FROM parts p, services s 
    WHERE cust_id = '$cust_id'");

if (mysql_num_rows($result) == 0) {
    $transactions = array();
} else {
    while ($row = mysql_fetch_assoc($result)) {
        $transactions[] = $row;
    }
} 
```

稍后的

```
<? foreach ($transactions as $transaction): ?>
    <? if($transaction['part_id'] && $transaction['part_id'] != "") { ?>
        [DISPLAY PART INFO]
    <? } elseif($transaction['serv_id'] && $transaction['serv_id'] != "" { ?>
        [DISPLAY SERVICE INFO]
    <? } ?>
<? endforeach; ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:18:41.527

使用空列怎么样？Ih 第一个表有列名称、日期、件数和第二个名称_cust、date_bike_entered 你可以做

```
Select name, date, pieces, null, null from table1
Union All
Select null, null, null, name_cust, date_bike_entered from table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:13:03.143

**解决方案 A**

您将需要两个查询来处理对 (1) 部件和 (2) 服务的请求。您将需要一些逻辑来区分两者。

**解决方案 B**

```
SELECT COUNT(*) FROM parts WHERE part_id = $transaction['part_id']
SELECT COUNT(*) FROM services WHERE serv_id = $transaction['serv_id'] 
```

这将为您提供每个结果的数量。添加逻辑以根据结果提取数据。但是，如果您在两个查询中都有结果，则需要处理逻辑。

**解决方案 C**

有一个仅允许 part_id 或 serv_id 的单选表单，并根据用户的选择进行查询。

# java - 类方法和类变量是否属于java中的类对象？

> ID：11675309
> 
> 赞同：2
> 
> 时间：2012-07-26T18:03:54.817
> 
> 标签：java

java doc中提到了以下两点：

1.  “类对象由 Java 虚拟机在加载类时自动构造，并通过调用类加载器中的 defineClass 方法
2.  类的每个实例共享一个类变量，该变量位于内存中的一个固定位置。任何对象都可以更改类变量的值，但也可以在不创建类实例的情况下操作类变量。

我的问题是：类方法和类变量是否属于java中的“java.lang.class”对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:10:25.750

是的。java.lang.Class 的每个实例都允许访问该类的类变量和方法。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:10:59.583

**1.** `Class methods`是类`Class variable`的**静态成员**，属于类，**被类的所有对象共享。**

**2.** **属于对象**`non-static variables and methods in a class`。**每个对象都有自己的这些非静态成员。**

**3.** `java.lang.Class<T>`代表一个正在运行`classes`的`interfaces` **Java应用程序。**

**4\. 类对象包含类的运行时表示**。系统中的每个对象都是某个类的一个实例，每个类都有这些描述符对象之一。类描述符在运行时不可修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:22:47.067

是的。

这可能会有所帮助.... Java 中的每个对象都属于某个类。这就是为什么由所有其他类继承的 Object 类定义该`getClass()`方法的原因。

`getClass()`, 或 class-literal -`Foo.class`返回一个 Class 对象，其中包含有关该类的一些元数据：

*   姓名
*   包裹
*   方法
*   字段
*   构造函数
*   注释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:16:57.337

所有类都有从 Object 类继承的方法。

下面的代码遍历 SomeClass 的所有公共变量和方法并输出它们。

您会从输出中注意到 someVariable 和 someMethod() 属于我们的类，而所有其他的都属于 Object 类。

```
import java.lang.reflect.Field;
import java.lang.reflect.Method;

public class Test
{
    public static void main( String args[] )
    {
        for ( Field field : SomeClass.class.getFields() )
        {
            System.out.println( field );
        }

        for ( Method method : SomeClass.class.getMethods() )
        {
            System.out.println( method );
        }
    }

    class SomeClass
    {
        public String someVariable;

        public void someMethod()
        {

        }
    }
} 
```

输出：

```
public java.lang.String com.Test$SomeClass.someVariable
public void com.mailings.classes.Test$SomeClass.someMethod()
public final void java.lang.Object.wait() throws java.lang.InterruptedException
public final void java.lang.Object.wait(long,int) throws java.lang.InterruptedException
public final native void java.lang.Object.wait(long) throws java.lang.InterruptedException
public native int java.lang.Object.hashCode()
public final native java.lang.Class java.lang.Object.getClass()
public boolean java.lang.Object.equals(java.lang.Object)
public java.lang.String java.lang.Object.toString()
public final native void java.lang.Object.notify()
public final native void java.lang.Object.notifyAll() 
```

# x86 - 新的 ISA 指令与 i386

> ID：11675316
> 
> 赞同：3
> 
> 时间：2012-07-26T18:04:38.690
> 
> 标签：x86, simd, instruction-set

我了解今天使用最新编译器（GCC、Intel CC、VC 等）编译的所有 x86 (i386) 二进制文件都将在 Intel 386 机器上运行（允许外部依赖，如 OS 函数等），这解释了为什么有YouTube 上关于人们让 Windows 7 在 20 年前的计算机上安装和运行的视频。

但我不明白 ISA 扩展是如何工作的，例如 MMX 和 SSE。如果程序的代码有扩展指令，但处理器不支持该指令，那么程序肯定会崩溃（可能是处理器中断进入操作系统）。我能想到的唯一解决方案是程序的二进制文件检查是否支持指令，如果不支持，则执行保证每个平台都支持的最低公分母代码，但这肯定会使二进制文件非常大，那么那些是扩展但现在实际上是标准的指令呢，比如浮点运算？这是否意味着执行 FP 操作的每个 i386 二进制文件还包括软件 FP 仿真？

如果一个程序进行指令支持的检查，那么它在哪里进行呢？如果您有一个紧密的循环，那么您不希望它在循环内执行检查。我不相信编译器足够聪明，还不知道如何在每种情况下进行优化，因此缺乏可见的编译器选项很奇怪。

我在我的 VC 项目设置中找不到用于控制指令发射的编译器或链接器的任何设置或选项。有一些关于优化的内容，但没有任何东西可以提供我期望的控制。

那么 AMD 的“3DNow！”呢？扩大？3DNow 旨在成为 MMX 之上的扩展，因此它有一些独特的指令和自身的方面，但我在我的 VC 编译器或链接器设置中找不到对它的任何引用，所以如果我正在编写代码如何我可以让我的编译器使用 3DNow！指令（而不是 MMX）？

此外，关于 3DNow 的 Wikipedia 文章指出，AMD 从其处理器中删除了一些 3DNow 指令 - 如果存在假设这些指令存在的代码，它将不再起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-10-13T10:21:45.147

> I understand that all x86 (i386) binaries compiled today, with the latest compilers (GCC, Intel CC, VC, etc) will run on an Intel 386 machine (allowing for external dependencies, like OS functions, etc) which explains why there are videos on YouTube of people getting Windows 7 to install and run on a 20 year-old computer.

**Not really.** Intel 386 did not have `cmpxchg8b` that is required for Windows Vista or Windows 7\. After a certain update, Windows 7 requires SSE2.

> But I don't understand how ISA extensions work, such as MMX and SSE. If a program's code has an extension instruction but the instruction is not supported by the processor then surely the program must crash (presumably a processor interrupt into the OS). The only solution I can think of is that the program's binary checks to see if an instruction is supported, and if not then it executes lowest-common-denominator code that is guaranteed to be supported by every platform, but surely that can make binaries very large, and what about instructions that were extensions but are now practically standard, like floating-point operations?

Runtime feature dispatch is a thing, and it is used in some programs and libraries, but often the code is compiled to require certain instructions.

Even if there is runtime feature dispatch, it is often used to detect relatively new extensions, while old extensions are mandatory.

`/arch:SSE2` is default in Visual Studio 2012 and later, so normally programs will not use legacy floating point operations.

An example of runtime dispatch is [vector_algorithms.cpp](https://github.com/microsoft/STL/blob/88332706f49d3297b200b5605ef174fc47d38d1a/stl/src/vector_algorithms.cpp#L54-L131) from MSVC STL where AVX2 and SSE2 are checked for availability at runtime. In x86 mode they fall back to plain C++ code which is complied not to emit vectored instructions, in x64 mode the use of SSE2 is unconditional, as SSE2 is the baseline for x64.

> I can't find any settings or options in my VC project settings for the compiler or linker for controlling instruction emission. There are a few about optimization but nothing that gives the control I expect.

[`/arch`](https://docs.microsoft.com/en-us/cpp/build/reference/arch-x86?view=msvc-160) switch. From IDE, "Enable Enhanced Instruction Set" in C/C++ compiler options.

> And what about AMD's "3DNow!" extension? 3DNow is meant to be an extension on top of MMX, so it has some unique instructions and aspects of its own, but I can't find any references to it in my VC compiler or linker settings, so if I'm writing code how can I get my compiler to use the 3DNow! instructions (rather than MMX)?

Visual Studio is not able to use them during auto-vectorizing (never auto-vectorized using them). As for intrinsic form, surprisingly you can still use them in x86 mode (but not x64 mode).

> Also, the Wikipedia article on 3DNow states that AMD removed a few 3DNow instructions from their processors - if there exists code that assumes these instructions are present will it no-longer work?

To clarify, instructions are removed in a sense that new processors don't have them. They are not removed by a microcode update from old processor.

Instructions removed to complete non-existence, attempts to use them may raise #UD exceptions, or their encoding may be re-purposed for other instructions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-13T09:19:06.393

据我了解，这些扩展在新的时候并不经常使用。如今，这些扩展是给定的（使用 AMD64 时）或假定的（使用 IA-32 时）。过去，只有在真正需要这些扩展时，例如在开发数学库时，您才会真正受益于这些功能。在这种情况下，您正在做非常具体的工作，可能会花时间决定如何处理向后兼容性。您基本上有两个选择，或者您通过软件实现提供向后兼容性，或者您不支持旧平台或不支持这些平台上的特定功能。根据[维基百科](https://en.wikipedia.org/wiki/Processor_supplementary_capability)，有第三种选择：

> 在其他情况下，操作系统可能会模仿旧处理器的新功能，但通常会降低性能。

这似乎意味着操作系统将以某种方式捕获不受支持的指令并用软件实现替换它们。来自维基百科的参考链接也已失效且未存档，但我发现了另[一条线索](http://vega.pgw.jp/%7Ekabe/vsd/sse-emulate.html)：

> IA-32 CPU 在运行二进制程序时遇到未知指令会产生异常，即#UD（未定义）异常。此异常归结为类 UNIX 操作系统中的 SIGILL 信号。 **模拟指令的想法是，钩住这个异常，在异常处理程序中做正确的事情，然后返回主程序。**因此，CPU 必须在我们要模拟的每条指令上生成异常。

但是，相信对此答案的评论，这些操作系统实现不再是一回事了。

# css - Flexbox 拉伸列（或不拉伸）

> ID：11675320
> 
> 赞同：1
> 
> 时间：2012-07-26T18:04:57.757
> 
> 标签：css, flexbox

使用“旧”的 flexbox 实现，我会使用`-webkit-box-align: start;`并排停止相同长度的列。

我不知道如何在新规范下执行此操作 - [https://developer.mozilla.org/en/Using_flexbox](https://developer.mozilla.org/en/Using_flexbox)。

我的主要 div 是`<div role="main">`，它`<section class="app">`在 div 内并排有两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:47:25.743

新的等效属性`box-align`is `align-items`，尽管您`-webkit-align-items`现在必须使用。将它设置`flex-start`在这两个盒子的 flexbox 容器上，以摆脱等高拉伸并在顶部对齐两个盒子。[在http://www.w3.org/TR/css3-flexbox/#align-items-property](http://www.w3.org/TR/css3-flexbox/#align-items-property)了解更多信息。

# c# - 杀死多线程进程

> ID：11675321
> 
> 赞同：0
> 
> 时间：2012-07-26T18:04:58.373
> 
> 标签：c#, windows-mobile-6.5, kill-process

视窗手机 6.5

我有一个使用 System.Threading.Timer 以指定的时间间隔将一些数据上传到网络的进程。

现在我想从一个 GUI 应用程序中终止这个过程。我可以使用进程枚举器来获取 Process 对象。当我调用 Process.Kill 时会发生什么？它是否会终止它，该过程可能正在从本地数据库读取/删除数据并将其发送到服务。我该怎么做才能确保至少如果它在中间它不会终止，并且一旦它完成它可以在下一个 Timer 事件触发之前终止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:17:56.070

终止这样的应用程序会在膝盖上切断它，从而引入破坏数据的明显可能性。解决这个问题的唯一方法是*不*终止进程。

您必须引入一种方法来与需要退出的应用程序进行通信，以便它可以完成它正在做的任何事情，这样数据就不会被破坏。

即应用程序必须以接受这样的请求的方式编写（但是你想这样做）。

# java - 初始化包含 main() 的类时“找不到主类，程序将退出”？

> ID：11675323
> 
> 赞同：1
> 
> 时间：2012-07-26T18:05:03.543
> 
> 标签：java

下面部分显示的类包含一个 main 方法。当我运行代码时，我看到一个`NullPointerException`（NPE），然后是一条错误消息 - “找不到主类，程序将退出”。我的理解是如果我得到NPE，说明代码正在运行，即JRE找到了`main`开始执行的方法，那为什么我会得到错误信息呢？

这是控制台输出

```
java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
at com.MyWorldDemo.getValue(MyWorldDemo.java:57)
at com.MyWorldDemo.<clinit>(MyWorldDemo.java:23)
Exception in thread "main" 
```

简而言之：

*   用户名存储在属性文件中。
*   属性文件就像这样 username=superman....等

这是一些代码示例

```
class MyClass {
    private final static String username = getData("username"); // ERROR HERE

    private static Properties prop;
    // more variables

    static {
        prop = new Properties();
        try {
            FileInputStream fis = new FileInputStream("MyDB.properties");
            prop.load(fis);
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    // this method will assign a value to my final variable username.
    public static String getData(String props) {
        String property = prop.getProperty(props);// ERROR HERE !!!
        return property;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:37:37.237

您在第 23 行有一个静态初始化，`MyWorldDemo`它正在调用方法`getValue`，然后在第 57 行导致 NPE，因此无法实例化该类，因此无法调用 main 方法。它可能看起来像：

```
class MyWorldDemo {
    private static String foo = getValue("username");
    private static Properties prop;

    // This happens too late, as getValue is called first
    static {
        prop = new Properties();
        try {
            FileInputStream fis = new FileInputStream("MyDB.properties");
            prop.load(fis);
        } catch(IOException ex) {
            ex.printStackTrace();
        }
    }

    // This will happen before static initialization of prop
    private static String getValue(String propertyValue) {
        // prop is null
        return prop.getProperty(propertyValue);
    }

    public static void main(String args[]) {
        System.out.println("Hello!"); // Never gets here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:46:34.553

静态变量的初始化取决于它在代码中的位置（变量从上到下初始化）。在您的代码中

```
private final static String username = getData("username"); // ERROR HERE
private static Properties prop;
// more variables

static {
    prop = new Properties();
    try {
        FileInputStream fis = new FileInputStream("MyDB.properties");
        prop.load(fis);
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

`prop`对象将`username`在静态块之后被初始化，但由于初始化`username` `prop`是必要的并且它还没有初始化你得到NPE。也许将您的代码更改为：

```
private static Properties prop = new Properties();
private final static String username = getData("username"); 

static {

    try {
        FileInputStream fis = new FileInputStream("MyDB.properties");
        prop.load(fis);
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

# solr - Solr 英式和美式拼写

> ID：11675337
> 
> 赞同：3
> 
> 时间：2012-07-26T18:05:56.060
> 
> 标签：solr

搜索“globali* *z* *ation”仅返回“globalization”的搜索结果，但不包括“globali* *s* *ation”的任何结果，反之亦然。

我正在研究 solr.HunspellStemFilterFactory 过滤器（在 Solr 3.5 中可用）。

`<filter class="solr.HunspellStemFilterFactory" dictionary="en_GB.dic,en_US.dic" affix="en_GB.aff,en_US.aff" ignoreCase="true" />`

在从 Solr 3.4 升级到 3.6.1 之前，我想知道 Hunspell 过滤器是否可行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:45:54.340

如果词干提取不能为您解决这个问题，您始终可以使用[SynonymFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.SynonymFilterFactory)将两种拼写标准化为一个，我想包含美国/英国拼写变体的字典并不难找到。

# javascript - 如果我不能保证它们都具有相同的类别，我如何使两个 ExtJS 派对于相同的切片名称具有相同的颜色？

> ID：11675341
> 
> 赞同：1
> 
> 时间：2012-07-26T18:06:10.500
> 
> 标签：javascript, extjs

我想为具有相同名称的切片制作一对具有相同颜色的 ExtJS 图表。例如，如果我有一个包含州人口的图表和另一个包含州预期寿命的图表，我希望马里兰州在两者中具有相同的颜色。

我可以使用 colorSet 轻松做到这一点；但是，colorSet 按顺序应用颜色，因此如果其中一个饼图跳过了一个状态，则颜色不再匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:12:49.033

所以事实证明，通过对 ExtJS 的修复，如果某些数据为空是可以的。因此，如果我对数据进行排序并提供排序后的颜色数组，它们将按顺序应用。如果一个中没有马里兰，它仍然会跳到下一个颜色，无论接下来发生什么。

# pdf - 在 azure 中访问本地存储

> ID：11675343
> 
> 赞同：0
> 
> 时间：2012-07-26T18:06:19.930
> 
> 标签：pdf, azure, cloud, local-storage, azure-role-environment

我有一个天蓝色的网站，我想从模板创建 pdf。我在创建 pdf 时需要一些地方来存储它。经过一番搜索后，我认为处理此问题的最佳方法是通过本地存储。我向我的 Web 应用程序添加了一个 Windows azure 云服务项目。然后，我将本地存储添加到我的 Web 应用程序的角色中。在本地，我现在可以从模板创建 pdf 并将它们存储在 blob 存储中。但是，当我将应用程序发布到天蓝色时，它不再起作用。我想我可能需要从我的本地云服务项目中创建一个天蓝色的云服务，因此创建了一个包来执行此操作。云服务现在正在运行，但我仍然无法访问本地存储。

该行：

将 myReportsStorage 调暗为 LocalResource = RoleEnvironment.GetLocalResource("myReports")

在本地工作，但当我将网站发布到天蓝色时失败。我不确定我是否需要以某种方式将我的网站和我的云服务链接到天蓝色，但我不知道该怎么做。

如果有人可以提供帮助，我将不胜感激。

# batch-file - 一行中的 DOS 批处理参数子字符串

> ID：11675346
> 
> 赞同：1
> 
> 时间：2012-07-26T18:06:29.353
> 
> 标签：batch-file, dos

我有一个包含以下 2 行的批处理文件，并将它们更改为一行代码：

```
set arg=%1%
"C:\Program Files\TextPad 6\TextPad.exe" -u "D:\www\%arg:~14,-1%" 
```

上下文是我正在使用 [http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx上描述的网页 url-handler](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)

目前我通过将批处理文件设置为 url 命令来做到这一点，因此将 %1 传递给该命令，然后进行转换，然后运行文本编辑器。但我宁愿在 url 命令中全部完成，这样我就不必再使用批处理文件了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:33:44.213

经过多次试验和错误，我发现这是可行的：

```
cmd.exe /v:on /c set arg=%1& start /D"C:\Program Files\TextPad 6" TextPad.exe "D:\www\!arg:~14,-1!" 
```

# ruby-on-rails - Rails 教程移植到亚马逊 dynamodb

> ID：11675347
> 
> 赞同：0
> 
> 时间：2012-07-26T18:06:31.600
> 
> 标签：ruby-on-rails, ruby, postgresql, railstutorial.org, amazon-dynamodb

我正在关注 michael hartl 的 Rails 入门教程...

[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

我正在尝试将我的数据库后端从 PostgreSQL 修改为 Amazon dynamodb。任何有关如何实现此目的的建议/帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:28:43.950

这将很难，因为 Hartl 的教程非常强调学习 ActiveRecord 知识，其核心组件在 DynamoDB 的上下文中并没有真正意义。

如果您坚持，Amazon 会提供 aws-sdk gem，您可以将其捆绑到您的应用程序中。在 config/initializers/aws.rb 初始化程序中设置适当的凭据

```
AWS.config({
  :access_key_id => 'your_access_key_id',
  :secret_access_key => 'your_secret_access_key',
}) 
```

如果您想要一种与对象交互的合理方式，您可能希望您的模型（在适当的情况下）从 AWS::Record::HashModel 继承。

您可能还想以这种格式编写一些评估器。

```
 def img= image
    self.has_image = true 
    AWS::S3.new.buckets[:images_cloudstock].objects[id].write(image.read)
  end

  def img
    AWS::S3.new.buckets[:images_cloudstock].objects[id].url_for(:read) if has_image
  end 
```

# objective-c - 如何使用 AVPlayer 播放 mp4 资源？

> ID：11675348
> 
> 赞同：7
> 
> 时间：2012-07-26T18:06:32.887
> 
> 标签：objective-c, ios, video, avplayer, avasset

我在我的项目导航器中包含了一个 mp4 资源。我想在 AVPlayer 中播放它。我知道如何为 AVPlayer 对象创建一个 AVPlayerItem，所以现在我想将适当的 AVAsset 加载到其中，指向我的 mp4 资源。问题是 AVAsset 只有一个assetWithURL: 方法来创建一个 AVAsset。我想要一个assetWithName: 方法，但该方法不存在。如果我没有 URL，如何播放我的 mp4 文件？如果无法通过名称参考播放，我如何获取我的 mp4 文件的文件 URL？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T14:40:53.497

要获取 URL，请使用

```
[[NSBundle mainBundle] URLForResource:@"my_video" withExtension:@"mp4"] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T18:45:36.423

它可能会在您的主包中，您可以通过以下方式获取其 URL

```
- (NSString*) saveFilePath: (NSString *) add
{
    NSString *filename = [NSURLRequest requestWithURL:[NSURL fileURLWithPath:
                    [[NSBundle mainBundle] pathForResource:add ofType:@"mp4"]isDirectory:NO]]];
    return filename;
} 
```

将此复制到您的代码中，然后执行`[self saveFilePath:@"Name of your file"]`以获取 URL。

完整代码：

```
AVPlayer *player = [[AVPlayer alloc] initWithURL:[self saveFilePath:@"fileName"];
[player play]; 
```

# git - CVS 替代品

> ID：11675349
> 
> 赞同：0
> 
> 时间：2012-07-26T18:06:35.673
> 
> 标签：git, svn, cvs, dvcs

正如标题所说，我正在寻找 CVS 的替代品。基本上，我无法在 CVS 服务器上持续设置 a，到目前为止，我的团队使用的当前设置是共享目录。

考虑到这一点，我正在寻找具有版本跟踪和文件合并功能的东西，其中我不需要在服务器上不断设置。

我在想，是否有类似 CVS 的设置，其中存储库只是一个共享网络资源（文件夹、驱动器等），用户将连接到存储库，签出他们自己的本地副本。用户所做的任何更改都只会存在于他们的本地副本上，直到他们提交更改，在此之前更改将被推送到存储库。如果发现任何冲突，它们会像在 CVS 上一样进行处理。

此外，如果它可以与 Eclipse 作为插件一起使用，那将是一个额外的好处，因为这是我们团队现在正在使用的。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:10:02.117

[Git](http://git-scm.com/)是你最好的朋友。分布式、健壮且速度惊人！对于您的 Eclipse 集成，请尝试[EGit](http://www.eclipse.org/egit/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:15:34.510

[SVN](http://en.wikipedia.org/wiki/Subversion)的口号是“CVS 做得对”，所以在使用 CVS 之后很容易得到 SVN 的哲学。

但是，有些人说[“没有办法正确地进行 CVS”](http://en.wikipedia.org/wiki/Git_%28software%29#History)并建议使用[Git](http://en.wikipedia.org/wiki/Git_%28software%29)。Git 更先进，并提供了一些很酷的功能，如分布式版本控制和轻量级分支，但学习过程更加困难。

PS我使用Git，我很满意！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T18:11:05.933

常用且支持良好的版本控制系统包括 Git、SVN 和 Mercurial。其中，我自己使用过 SVN 并运行了一些 repos，但人们倾向于说 Git 和 Mercurial 更易于使用。

您可以获得一个用于 Eclipse 的 SVN 插件，称为[subclipse](http://subclipse.tigris.org/)。

其他人可能也有，但我不知道。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T21:23:21.667

我看不出你不能继续使用 CVS 的任何强有力的理由。如果您有一个可见的“共享网络资源”，就好像它是一个普通的文件系统（用户可以读取、创建和写入文件），您可以将您的 CVS 存储库放在那里并`$CVSROOT`适当地设置您的用户。或者，您可以设置具有 ssh 访问权限的 Linux 或其他类 Unix 系统；CVS 在 ssh 上运行良好。

如果您能够拥有共享目录，则可以使用 CVS。

有很多理由比 CVS 更喜欢其他系统（就我个人而言，我已经成为 Git 的忠实粉丝），但听起来你*不需要*立即切换。

我的建议：考虑从 CVS 切换到 Git，但这并不紧急。

快速的 Google 搜索表明 Eclipse/CVS 集成应该不是问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T15:58:05.287

我同意 Keith Thompson 关于继续使用 CVS 的说法，但是，基于通过实际尝试 git 两周完成的对 DVCS 的审查，我不能推荐 git 作为经验丰富的 cvs 用户的平滑替代品，他们希望以最少的速度平稳过渡到 DVCS再培训。重新阅读最后一句，同时特别注意限定条款。我并不是说 git 有能力成为一个优秀的工具。虽然个人经验通常是非常主观的，但 git 在确定使用两周后从未“感觉到”，以便学习它作为 CVS 的潜在替代品。在尝试它的过程中，我设法把事情（想想存储库）搞砸了好几次，有些事情我从来没有迅速弄清楚。

当我碰到 git 无法对目录进行版本控制的墙时，我将 Mercurial 和 Bazaar 视为最有可能考虑的候选者，并发现 Mercurial 与 git 有相同的问题。在 CVS 中，我可以轻松地添加包含现有文件的目录，而无需在其中添加文件。git 和 Mercurial 似乎这样做是一件荒谬的事情。该工具要求我无法在各种用例中做有意义的事情，这让我很困扰。结果，我尝试了 Bazaar，令人惊讶的是，我在几分钟内就感到很舒服。使用 git 两周后，我从来没有这样做过。我的 git 存储库在几分钟内转换为 Bazaar，并且我在不到一个小时的时间内就可以轻松使用它。

我目前仍在使用 CVS，尽管我已承诺使用 Bazaar，但我在一些边缘情况下遇到了烦恼，我在应用程序中使用 Bazaar，而这些应用程序在软件开发中通常不是问题。即便如此，作为最有可能在替代 VCS 中培训一组 CVS 同事的人，我坚信 Bazaar 将需要最少的再培训。在与 CVS 工作流程密切相关的工作流程中使用 Bazaar 几乎是微不足道的。与我一起工作的人不会通过版本控制来获得乐趣。他们想要一些不引人注目且易于学习的东西。我知道，如果他们发现学习曲线最令人生畏，他们就不会最大限度地利用 VCS。

选择 Bazaar 的重要之处在于它可以轻松地在 Windows 上运行，并与 MinGW MSYS 环境很好地集成。集成的 Windows 安装程序非常适合希望以统一方式最小化设置工作站的工作的环境 - 特别是在一些用户需要命令行工具而其他用户需要图形工具的情况下。

VCS 的选择通常会受到各种偏见的影响。我开始寻找 DVCS，而不会对任何特定工具产生偏见。我发现 git 天生就有偏见。它是在对 CVS 的强烈仇恨（参见作者对 CVS 的态度）和 CVS 之类的东西 $Id: $ 的情况下开发的。Bazaar 声称它试图避免对各种工作流程的偏见，并且似乎避免对开发人员在他们对其他 VCS 的特定使用中开始欣赏的事物采取立场。诚然，这是一个主观的说法，但我在 Bazaar 的经验似乎表明这是真的。

Bazaar 没有提供我想要的一切。例如，我不高兴它不支持部分结帐。这在 CVS 中非常容易做到。我对 Bazaar 操作完全因文件访问问题而失败而感到恼火，因为一组文件中的单个文件正在被操作，但这通常不应该发生在典型的软件开发用例中。我想说的是，我并没有盲目地迷恋 Bazaar，但我仍然相信它是小型工程部门从 CVS 过渡到最简单的工具。

作为一个脚注，多年前加入了一个 SVN 开源开发团队，其明确目标是适应类似 CVS 的改进 VCS。我与 SVN 合作了很多，甚至设置了部分结帐等，但我不同意 SVN 是“CVS 做得对”。经过多年的使用，由于多种原因，我无法负责任地选择 SVN 作为我组织中 CVS 的继任者。它将一组问题换成另一组问题。虽然这对于几乎所有工具都是如此，但在考虑过渡成本时，SVN 的好处似乎并没有超过问题。

# asp.net - 实体框架和存储库模式的自定义异常

> ID：11675357
> 
> 赞同：0
> 
> 时间：2012-07-26T18:07:16.440
> 
> 标签：asp.net, entity-framework, error-handling

我按照这个 Asp .Net 教程作为指导：

[http://www.asp.net/web-forms/tutorials/continuing-with-ef/using-the-entity-framework-and-the-objectdatasource-control-part-2-adding-a-business-logic-层和单元测试](http://www.asp.net/web-forms/tutorials/continuing-with-ef/using-the-entity-framework-and-the-objectdatasource-control-part-2-adding-a-business-logic-layer-and-unit-tests)

我创建了一个自定义错误以防止插入和更新时出现重复记录

```
Public Class DuplicateAgencyException
Inherits Exception

Public Sub New(ByVal message As String)
    MyBase.New(message)
End Sub
End Class 
```

我创建了一种验证方法，用于检查插入或更新时的重复：

```
Public Sub ValidateAgencyName(ByVal agency As agency_temp)
        If Not IsNothing(agency) Then
            Dim duplicateAgency As agency_temp = AgencyRepository.GetAgencyByName(agency.agency_name).FirstOrDefault()
            If Not IsNothing(duplicateAgency) AndAlso duplicateAgency.agency_id <> agency.agency_id Then
                Throw New DuplicateAgencyException(String.Format("Agency: {0} already exists.", duplicateAgency.agency_name))
            End If
        End If
    End Sub 
```

我运行单元测试来插入一条记录，并故意插入一个重复项，它会引发正确的错误。现在我需要使用显示此数据的 ObjectDataSource 来处理此错误，例如 OnInserted 和 OnUpdated，但我什至无法达到这一点。当我插入一条记录时，错误助手告诉我 DuplicateAgencyException 未被用户代码处理。我需要尝试...赶上吗？（我确实尝试过，但无济于事）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:19:08.437

我相信您需要按照您的建议将异常包装在您在 try catch 块中提到的事件所引用的方法中。您应该像这样包装现有代码

```
MethodName(params)
《
try 《 /// existing code 

》
catch (ExceptionType ex) 《
/// error handling code
》

》 
```

如果您发布您的事件处理代码和我可以更具体的 aspx。请原谅我手机上写的任何错误。

# php - 编写一个包含一个大写字母和六个数字的 javascript 表达式

> ID：11675358
> 
> 赞同：-3
> 
> 时间：2012-07-26T18:07:17.930
> 
> 标签：php, javascript, regex, forms, expression-web

我需要编写一个正则 JavaScript 表达式。这个表达式是基于一个序列号的表达式的参数是这样的：

开头一个大写字母，表达式的其余部分是数字 (6)

示例：E234585、C345678、E001234

感谢你的协助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:11:00.737

试试这个表达式：

`/^[A-Z]\d{6}$/`

这将匹配您描述的格式的序列号。

`[A-Z]`匹配第一个大写字母，然后`\d{6}`匹配后面的 6 个数字。[锚点](http://www.regular-expressions.info/anchors.html)(`^`和`$`) 确保匹配的字符串只包含序列号而没有其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:15:06.990

您的问题非常不清楚，我将在黑暗中尝试一下，并假设您的意思是您想要生成那些随机字符串：

```
var getRandomInt = function (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;  
};

var getRandomLetter = function () {
    return String.fromCharCode(getRandomInt(65, 90));
};

var getRandomDigit = function () {
    return getRandomInt(0, 9);
};

var yourString = getRandomLetter() + getRandomDigit() + ... + getRandomDigit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:13:51.893

```
​var serialre = new RegExp('[A-Z]{1}[0-9]{6}');​​​​​​​​​​​​​​​​​​​​​​​​

if(serialre.test('A123456')){
       document.write('yep');
} else {
    document.write('nope');
}

document.write('<br />');    

if(serialre.test('POOPSTAINS!')){
       document.write('yep');
} else {
    document.write('nope');
}
​ 
```

产生：

```
yep
nope 
```

查看[JSFiddle](http://jsfiddle.net/ztzP2/)

# ios - 如何从子类 UIView 定义传出事件，以便可以调用 UIViewController 中的任何委托

> ID：11675359
> 
> 赞同：0
> 
> 时间：2012-07-26T18:07:18.627
> 
> 标签：ios, events, uiview, uiviewcontroller, interface-builder

我从 UIView 派生了我自己的 View 类，它处理手势和绘图本身。我使用 Interface Builder 将它的几个实例放在一个视图上。

在某些事件上，我想在 UIViewController 中调用多个委托，就像 UIButton::onTouchUpInside 事件一样。我不想设置接口协议并连接 IBOutled id 实例，如 (1) 中所示。

我正在查看所有文档以及堆栈溢出，但我没有找到有关语法的任何线索。

那么，Xcode 4.4（刚刚更新）的语法是什么？由于我已经使用了自定义属性，部署目标将是 IOS >=5.0。

[编辑] UIControl 的子类化确实可以访问标准 UI 事件，如 TouchUpInside，但是否可以添加自定义命名事件，如“onSomethingElse”？

(1)[自定义 UIView 的事件](https://stackoverflow.com/questions/906762/events-for-custom-uiview)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:17:42.440

我不完全确定你想从这个视图中得到什么，但如果你想处理 UIButton::onTouchUpInside 事件之类的事情，那么也许你应该研究子类化 UIControl 而不是 UIView。它使您可以访问事件，就像 UIButton 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:12:42.053

如果您发布您定义的任何自定义事件的 NSNotification，您可以在 NSNotificationCenter 注册多个侦听器来响应事件。

`addObserver:selector:name:object:`您可以通过查找和来查看详细信息`postNotificationName:object:`。

# mysql - Mysql GROUP BY 类似字段

> ID：11675362
> 
> 赞同：1
> 
> 时间：2012-07-26T18:07:27.100
> 
> 标签：mysql, sql, group-by, soundex

假设我有这张包含客户订单的表格：

```
orderid Name         Email      Address_1      Address_2  City*      Zip*
---------------------------------------------------------------------------   
1       James        j@j.com    12 Foo St                 Fooville   1001
2       Alice        a@a.com    92 Bla Road               Sville     3933
3       James        j@j.c0m    12 Foo Street             Fooville   1001
4       james king   j@j.com    12             Foo St     Fooville   1001
5       Anth         ann@h.com  12 Foo Street             Stacker    2932
6       James        j@j.com    12 American St            GiftCity   0283 
```

为了节省邮费（对我们而言），如果我们可以在一张打印单上将多个订单发送到**同一个人**、**同一地址，那将是理想的选择。**为此，我需要 id 1、3、4 的唯一记录。

和代码不能由用户输入（从下拉列表中选择）`City`。`Zip`

理想情况下，我希望我的查询返回以下内容：

```
orderid Name    Email      Address_1      Address_2  City*      Zip*  Count
---------------------------------------------------------------------------   
1       James   j@j.com    12 Foo St                 Fooville   1001  3
2       Alice   a@a.com    92 Bla Road               Sville     3933  1
5       Anth    ann@h.com  12 Foo Street             Stacker    2932  1 
```

从本质上讲，SQL 算法是在以下列上类似的方式进行分组：`Name`、`Email`、`concat(Address_1 and Address_2)`。

任何建议和解决方案将不胜感激。

如果有办法做一个

```
GROUP BY similar((concat(name,email,address_1) 
```

（对于无望的伪代码真的很抱歉..只是想表达我的想法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:35:39.023

好吧，这里不是讨论，而是根据您的要求修改查询

```
select 
    orderid , 
    name , 
    email , 
    address_1 , 
    address_2 , 
    city , 
    zip , 
    count(orderid) 
from test 
group by name
order by orderid 
```

带出这个

```
 Name        Email       Address_1    Address_2  City        Zip Count
1   James       j@j.com     12 Foo St           Fooville        1001    3
2   Alice       a@a.com     92 Bla Road         Sville          3933    1
4   James King  j@j.com     12 Foo St           Fooville        1001    1
5   Anth        ann@h.com   12 Foo St           Stacker         2932    1 
```

# php - 如何使这个 J Query/Ajax 脚本与多条记录一起工作？

> ID：11675363
> 
> 赞同：0
> 
> 时间：2012-07-26T18:07:29.273
> 
> 标签：php, jquery, ajax, arrays

我有一个表，其中包含动态填充的数据库中的记录。

```
<table>
<tr>
   <td>name
   </td>
   <td>surname
   </td>
   ...
</tr>
<?php do { ?>
<tr>
    <td><?php echo $row_Recordset1['Name'];?>
    </td>
    <td><?php echo $row_Recordset1['Surname'];?>
    </td>
...
<td align="center">
    <form name="form" action="novi.php">
    <input name="check" type="radio" value="da">Да
    <input name="check" type="radio" value="ne">Не
    <input type="hidden" id="id" value="<?php echo $row_Recordset1['id_korisnici'];?>">
    <input class="button1"type="button" id="klik" value="Испрати"/>
    </form>
</td>
</tr>
<?php } while($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?>
</table> 
```

而不是我使用 J Query 创建对另一个页面的 AJAX 调用，该页面将运行查询。

```
<script>
$('#klik').click(function() {
var check = $("input[name='check']:checked").val();
var id = $('#id').val();
if (check == "da")
{
    $.post('sluzbaIncludes/n.php', {check:check, id:id}, function(data) {

        $('#klik').prop('value', (data));
        document.location.reload();

    });
}
else if (check == "ne")
{
    $.post('sluzbaIncludes/n.php', {check:check, id:id}, function(data) {

    $('#klik').prop('value', (data));
    document.location.reload();

});
}
else
{
    $('#klik').prop('value', 'Грешка');
    setTimeout("$('#klik').prop('value', '.')",500);
    setTimeout("$('#klik').prop('value', '..')",1000);
    setTimeout("$('#klik').prop('value', '...')",1500);
    setTimeout("$('#klik').prop('value', 'Испрати')",2000);

} 
```

});

如果表中只有一行，这可以正常工作。我不知道该怎么做是，让脚本将所有生成的 CHECKED 单选按钮存储在一个数组或其他东西中，加上数据库中记录的所有 ID 并将它们发送到另一个页面，根据他们的 ID 是查询将更新数据库..

```
<?php
if ($_POST['id'] != NULL) {
if ($_POST['check'] == "da") {
       $id = mysql_real_escape_string($_POST['id']);
   $update = mysql_query("update korisnici set validacija = 1 where id_korisnici= '$id'");
        if ($update === true) {
        echo 'OK';

    }else if ($update === false){
        echo 'Error!!!';
    }
}
elseif ($_POST['check'] == "ne")
{
$id = mysql_real_escape_string($_POST['id']);
    $update = mysql_query("update korisnici set validacija = 2 where id_korisnici= '$id'"); 
    if ($update === true) {
            echo 'OK';

        }
    else if ($update === false){
            echo 'Error!!!';
        }
}
} else {
echo 'Error!!!';
}
?> 
```

谢谢！PS我是JQuery的菜鸟和PHP的初学者......

**更新：**

我确实改变了一些东西。现在值显示为我想要的，当我在没有选择的情况下单击按钮时，我在正确按钮的 JQuery 代码的 ELSE 部分中收到错误消息。但无论我单击哪个按钮（如果表中填充了数据库中的 3 条记录，则有 3 个按钮），**只有表中的第一行**会在数据库中更新。

```
<form name="form" action="novi.php">
           <input name="check<?php echo $row_Recordset1['id_korisnici'];?>" type="radio" value="da">Да
           <input name="check<?php echo $row_Recordset1['id_korisnici'];?>" type="radio" value="ne">Не
           <input type="hidden" id="id" value="<?php echo $row_Recordset1['id_korisnici'];?>">
           <input class="button1"type="button" id="klik<?php echo $row_Recordset1['id_korisnici'];?>" value="Испрати"/>
            </form> 
```

jQuery：

```
$('#klik<?php echo $row_Recordset1['id_korisnici'];?>').click(function() {
var check = $("input[name='check<?php echo $row_Recordset1['id_korisnici'];?>']:checked").val();
var id = $('#id').val();

if (check == "da")
{
    $.post('sluzbaIncludes/n.php', {check:check, id:id}, function(data) {

        $('#klik<?php echo $row_Recordset1['id_korisnici'];?>').prop('value', (data));
        document.location.reload();

    });
}
else if (check == "ne")
{
    $.post('sluzbaIncludes/n.php', {check:check, id:id}, function(data) {

    $('#klik<?php echo $row_Recordset1['id_korisnici'];?>').prop('value', (data));
    document.location.reload();

});
}
else
{
    $('#klik<?php echo $row_Recordset1['id_korisnici'];?>').prop('value', 'Error');
    setTimeout("$('#klik<?php echo $row_Recordset1['id_korisnici'];?>').prop('value', '.')",500);
    setTimeout("$('#klik<?php echo $row_Recordset1['id_korisnici'];?>').prop('value', '..')",1000);
    setTimeout("$('#klik<?php echo $row_Recordset1['id_korisnici'];?>').prop('value', '...')",1500);
    setTimeout("$('#klik<?php echo $row_Recordset1['id_korisnici'];?>').prop('value', 'Send')",2000);

} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:22:44.087

使每组单选按钮具有唯一的名称但具有相同的类。然后你可以使用 jQuery 遍历它们：

```
var radioVals = new Array();
var i = 0;
$(".radioButtonClass:checked").each(function() { 
    radioVals[i] = $(this).val();
}); 
```

然后只需在您的 ajax 调用中传递数组。

# html - 是否有工具可以显示 xslt 和 xml 文件中的 html 以进行编辑

> ID：11675365
> 
> 赞同：1
> 
> 时间：2012-07-26T18:07:36.493
> 
> 标签：html, xml, xslt

我有一个 xslt 文件和 xml 文件。在 .NET 应用程序中，它获取这两个文件并创建 html 输出。我现在需要取一个新的 xml 文件并修改 xslt 文件以输出新的 html。有没有一种工具可以让我在修改 xslt 以获得我想要的外观时查看 html 输出？我有 Altova 套件、Visual Studio（所有版本）、DreamWeaver 和许多其他工具。但是，我似乎找不到任何方法来查看 html 并修改 xslt。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:11:24.510

oXygen XML 编辑器（或开发人员）中的[XSLT 调试](http://www.oxygenxml.com/xslt_debugger.html)器将允许您查看呈现的 XHTML 输出（或格式良好的 HTML）。

# c++ - 传值认为参数是 const

> ID：11675366
> 
> 赞同：1
> 
> 时间：2012-07-26T18:07:45.030
> 
> 标签：c++, visual-c++, c++11, lambda, boost-variant

Visual Studio Enterprise 2010，sp1，在 Windows 7 64 位上。提升 1.48.0。

这里开始相关代码。这些位在标头中定义。

```
//typedef struct {} empty_t;
//typedef std::pair<size_t, std::shared_ptr<char>> string_t; //Don't ask...
//typedef boost::variant<empty_t, long, double, some other PODs, string_t> variant_t;
//typedef std::map<unsigned short, variant_t> variant_map_t; 
```

这是在复制构造函数的主体中：

```
std::for_each(std::begin(incoming.values_), std::end(incoming.values_), [&](variant_map_t::value_type value)
{
    // This guy is going to populate this::values_, doing the right thing -
    // copying by value native and POD types, or deep copying pointers.
    boost::apply_visitor(deep_copy_visitor(*this, value.first), value.second);
}); 
```

我发现的错误与 lambda 的参数列表有关。正在调用交换，我认为在该对的复制构造函数中，尝试首先从传递给 lambda 的右值分配给参数。当在 std::pair 复制构造函数中分配“value.first”时，编译器认为它是 const。但很明显，参数不是 const 限定的，mapped_type 或 key_type 不是 const 限定的，复制构造函数不是 const 方法，无论如何都不应该重要。

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\utility(209) : see reference to function template instantiation 'void std::_Swap_adl<_Ty1>(_Ty &,_Ty &)' being compiled
          with
          [
              _Ty1=unsigned short,
              _Ty=unsigned short
          ]
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\utility(206) : while compiling class template member function 'void std::pair<_Ty1,_Ty2>::swap(std::pair<_Ty1,_Ty2> &)'
          with
          [
              _Ty1=const unsigned short,
              _Ty2=variant_t
          ]
          src\foo.cpp(506) : see reference to class template instantiation 'std::pair<_Ty1,_Ty2>' being compiled
          with
          [
              _Ty1=const unsigned short,
              _Ty2=variant_t
          ] 
```

所以不知何故，模板参数得到了 const 限定，对于我的生活，我无法弄清楚为什么。

我认为其他东西正在使编译器绊倒，但我没有其他东西可以解决。早些时候，在我给我的源代码好好搅动之前，试图弄清楚这一点，我可以打开和关闭这个错误消息；我已经定义了一个 boost::static_visitor 派生类。没有成员，没有方法，什么都没有。这足以在我的复制构造函数中导致此错误。我无法想象如何隔离实际上*有*问题的代码行......

有没有人认为这是编译器打嗝，并且一些未提及的更改会产生副作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T18:12:06.640

`value_type`of`std::map<K, V>`是`std::pair<K const, V>`，因为键是不可变的。所以，是的，`value.first`是 const 限定的。

# windows - 以编程方式查找我的应用程序的快捷方式

> ID：11675368
> 
> 赞同：1
> 
> 时间：2012-07-26T18:08:05.540
> 
> 标签：windows

所以，我对杀毒软件和一般证券的耐心已经结束，像谷歌浏览器和其他一些聪明人一样，我会将我的可执行文件放在应用程序数据中，这样我就可以更自由地更新我的应用程序，而不需要管理员权限等等。

好吧，像往常一样，我遇到的一个问题是遗留问题。我想将所有已安装的软件副本移至 AppData 区域。

我的问题是，有什么方法可以让我以编程方式查找和删除或编辑可执行文件的所有快捷方式？

# java - 如何在 JSF 页面中显示 ArrayList

> ID：11675369
> 
> 赞同：0
> 
> 时间：2012-07-26T18:08:09.000
> 
> 标签：java, jsf, jsf-2

我想创建可编辑`h:panelGrid`的 . 我创建了这个 ArrayList：

```
public ArrayList<userdata> dataList = new ArrayList<>();

    public class userdata
    {

        int userid;
        int groupid;
        String specialnumber;
        String username;
        String passwd;
        Date datetochangepasswd;
        String address;
        String stateregion;
        String country;
        String userstatus;
        String telephone;
        Date dateuseradded;
        Date userexpiredate;
        Date dateuserlocked;
        String city;
        String email;
        String description;

        public userdata(int userid, int groupid, String specialnumber, String username, String passwd, Date datetochangepasswd,
                String address, String stateregion, String country, String userstatus, String telephone, Date dateuseradded,
                Date userexpiredate, Date dateuserlocked, String city, String email, String description)
        {

            this.userid = userid;
            this.groupid = groupid;
            this.specialnumber = specialnumber;
            this.username = username;
            this.passwd = passwd;
            this.datetochangepasswd = datetochangepasswd;
            this.address = address;
            this.stateregion = stateregion;
            this.country = country;
            this.userstatus = userstatus;
            this.telephone = telephone;
            this.dateuseradded = dateuseradded;
            this.userexpiredate = userexpiredate;
            this.dateuserlocked = dateuserlocked;
            this.city = city;
            this.email = email;
            this.description = description;
        }

        public String getAddress()
        {
            return address;
        }

        public void setAddress(String address)
        {
            this.address = address;
        }

        public String getCity()
        {
            return city;
        }

        public void setCity(String city)
        {
            this.city = city;
        }

        public String getCountry()
        {
            return country;
        }

        public void setCountry(String country)
        {
            this.country = country;
        }

        public Date getDatetochangepasswd()
        {
            return datetochangepasswd;
        }

        public void setDatetochangepasswd(Date datetochangepasswd)
        {
            this.datetochangepasswd = datetochangepasswd;
        }

        public Date getDateuseradded()
        {
            return dateuseradded;
        }

        public void setDateuseradded(Date dateuseradded)
        {
            this.dateuseradded = dateuseradded;
        }

        public Date getDateuserlocked()
        {
            return dateuserlocked;
        }

        public void setDateuserlocked(Date dateuserlocked)
        {
            this.dateuserlocked = dateuserlocked;
        }

        public String getDescription()
        {
            return description;
        }

        public void setDescription(String description)
        {
            this.description = description;
        }

        public String getEmail()
        {
            return email;
        }

        public void setEmail(String email)
        {
            this.email = email;
        }

        public int getGroupid()
        {
            return groupid;
        }

        public void setGroupid(int groupid)
        {
            this.groupid = groupid;
        }

        public String getPasswd()
        {
            return passwd;
        }

        public void setPasswd(String passwd)
        {
            this.passwd = passwd;
        }

        public String getSpecialnumber()
        {
            return specialnumber;
        }

        public void setSpecialnumber(String specialnumber)
        {
            this.specialnumber = specialnumber;
        }

        public String getStateregion()
        {
            return stateregion;
        }

        public void setStateregion(String stateregion)
        {
            this.stateregion = stateregion;
        }

        public String getTelephone()
        {
            return telephone;
        }

        public void setTelephone(String telephone)
        {
            this.telephone = telephone;
        }

        public Date getUserexpiredate()
        {
            return userexpiredate;
        }

        public void setUserexpiredate(Date userexpiredate)
        {
            this.userexpiredate = userexpiredate;
        }

        public int getUserid()
        {
            return userid;
        }

        public void setUserid(int userid)
        {
            this.userid = userid;
        }

        public String getUsername()
        {
            return username;
        }

        public void setUsername(String username)
        {
            this.username = username;
        }

        public String getUserstatus()
        {
            return userstatus;
        }

        public void setUserstatus(String userstatus)
        {
            this.userstatus = userstatus;
        }
    }

    // Getter for the data list
    public ArrayList<userdata> getuserdata(){

        return dataList;
    } 
```

我想将数据显示到`h:panelGrid`. 你能告诉我我该怎么做吗？

我想创建[这个](http://www.mkyong.com/jsf2/how-to-update-row-in-jsf-datatable/)可编辑的表格，但使用`h:panelGrid`. 我想可以`h:panelGrid`改用`h:dataTable`吗？

最好的祝愿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:26:44.470

虽然实际上可以使用 hack 某些东西`h:panelGrid`，但您可能不得不在 MB 中摆弄许多不必要的代码，仅用于创建和绑定组件。

如果您想为您的 HTML 表格提供更细粒度的控件，您想要做的可能是使用`ui:repeat`，如下所示：

```
<table>
    <ui:repeat var="elem" value="#{yourMB.yourDataList}">
        <tr>
            <td>#{elem.userid}</td>
            <td>
               <h:outputText value="#{elem.name}" 
                    rendered="#{not elem.editable}" />
               <h:inputText value="#{elem.name}" rendered="#{elem.editable}" />
            </td>
            <td>
               <h:outputText value="#{elem.telephone}" 
                    rendered="#{not elem.editable}" />
               <h:inputText value="#{elem.telephone}"
                            rendered="#{elem.editable}" />
            </td>
            <td>
              <h:commandLink value="Edit" rendered="#{not elem.editable}"
                 action="#{yourMB.editAction(elem)}" />
            </td>
        </tr>
    </ui:repeat>
</table>
<h:commandButton value="Save Changes" action="#{yourMB.saveAction}" /> 
```

为此，您应该有一个如下所示的支持 bean：

```
@ManagedBean
@ViewScoped
public class YourMB {
    private List<Elem> dataList;

    @PostConstruct
    public void init() {
        // initialize dataList here
    }
    public void editAction(Elem e) {
        e.setEditable(true);
    }
    public void saveAction() {
        // do your thing here to update in the database,
        // and then reset the editable property for all items:
        for (Elem e : dataList) {
            e.setEditable(false);
        }
    }
    // getters and setters...
} 
```

在此处查看[可用的教程](http://www.coreservlets.com/JSF-Tutorial/jsf2/#Looping)，其中介绍了如何使用`ui:repeat`并提供了在 JSF 中循环的其他选项。

# android - Android中的语音转换

> ID：11675370
> 
> 赞同：2
> 
> 时间：2012-07-26T18:08:19.833
> 
> 标签：android, transformation, voice, voice-recording

我正在寻找一个用于 Android 的 SDK 证明工具来转换声音。对于 iOS，有这种 SDK：[http ://www.izotope.com/tech/izomobile/vocalfx.asp](http://www.izotope.com/tech/izomobile/vocalfx.asp)

你知道类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:43:30.550

**从驱动器android-sdk/samples/apidemos**的文件夹中查看**API DEMOS**。**这是那里的语音识别**的一个示例。可能你觉得它有用。

# c# - 与 SQL 数据库一起使用的 SQL 语句不适用于 Access 数据库

> ID：11675371
> 
> 赞同：4
> 
> 时间：2012-07-26T18:08:30.317
> 
> 标签：c#, sql, ms-access, select, syntax-error

我正在 C# 中创建一个 GUI，并且我有以下代码行来获取从 lowerPageBound 到 upperPageBound 的元素。

```
command.CommandText = "Select Top " + rowsPerPage + " " +
        CommaSeparatedListOfColumnNames + " From " + tableName +
        " WHERE " + columnToSortBy + " NOT IN (SELECT TOP " +
        lowerPageBoundary + " " + columnToSortBy + " From " +
        tableName + " Order By " + columnToSortBy +
        ") Order By " + columnToSortBy;
adapter.SelectCommand = command;
DataTable table = new DataTable();
table.Locale = System.Globalization.CultureInfo.InvariantCulture;
adapter.Fill(table); 
```

生成的 SQL 语句在访问数据库上使用时给我一个错误（adapter.Fill(table) 被执行），但在 sql 数据库上工作正常。

**下面是生成的 SQL：**

```
Select Top 25 [ID], [Business Process], [Tier Level], [Application], [CI ID], [Server], [Server Function], [Data Center], [HA], [DR Equip], [Procedure], [Procedure Tested], [Type], [Outcome], [Overall Status] From Data WHERE ID NOT IN (SELECT TOP 0 ID FROM Data ORDER BY ID) ORDER BY ID; 
```

我收到的错误是：

```
Syntax error in query expression 'ID NOT IN (SELECT TOP 0 ID FROM Data ORDER BY ID)'. 
```

我试图解决这个问题几个小时，但我没有运气。为什么相同的语句在访问数据库上不起作用是没有意义的。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:22:34.623

Access db 引擎将在查询的这一部分引发错误。

```
SELECT TOP 0 ID FROM Data ORDER BY ID 
```

您可以拆分该部分并将其作为新的 Access 查询进行测试。不幸的是，错误消息不是很有帮助：“ *SELECT 语句包含拼写错误或丢失的保留字或参数名称，或者标点符号不正确。* ” 这是数据库引擎在出现时给您的一般错误消息无法准确描述问题。

基本上，这一切都归结为您`SELECT TOP 0`在 Access SQL 中无法做到的事实。

此外，一旦您解决了关于 的问题`SELECT TOP 0`，您需要`ORDER BY`在外部查询中添加一个子句。如果没有`ORDER BY`，则返回的行`TOP 25`是任意的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T19:27:17.613

要执行分页功能，您可以：

*   当 pagestart 为 0 时，省略 NOT IN 子句。
*   使用方法`SELECT TOP pagesize * FROM (SELECT TOP pagestart + pagesize * FROM X ORDER BY Condition) AS Alias ORDER BY Condition DESC`。重要的部分是第二个 ORDER BY 与第一个相反。您可能需要最终的 ORDER BY 才能获得正确的订单，尽管客户应该能够做到这一点。请注意，在 Access 2007 之前，设计人员会将派生表（括号中的部分）更改为`[SELECT ...]. AS Alias`，但现在它仍然存在。

如果这些方法不令人满意，还有更多方法。

除了 HansUp 所说`TOP 0`的不受支持之外，您还可能会遇到 SQL Server 和 Access 语法之间的其他差异。为了帮助缓解这种情况，您可能需要查看 DB 级别设置以使用 SQL-Server 语法。它并不完美，但允许一些在 Access 中通常会失败的语法。请注意，在项目中间切换可能会出现问题。请参阅[有关 ANSI 89 和 ANSI 92 语法不兼容性](http://office.microsoft.com/en-us/access-help/about-avoiding-the-mixing-of-queries-created-under-different-ansi-sql-query-modes-mdb-HP003070559.aspx)的信息。

# c# - 如何为 CRM 2011 插件正确设置 C# 单元测试？

> ID：11675373
> 
> 赞同：8
> 
> 时间：2012-07-26T18:08:40.550
> 
> 标签：c#, unit-testing, dynamics-crm-2011

尝试在 CRM 2011 中调试插件可能非常困难。将 .pdb 文件放在服务器上的正确位置不仅存在问题，而且每次进行编码更改时，都会遇到部署和重新注册插件的麻烦。由于触发器在 CRM 本身中，因此很难为其创建单元测试。

我目前为全新插件编写单元测试的过程相当缓慢且错误，但大致如下：

1.  使用 SDK 插件注册工具注册新插件
2.  将调试器附加到 w3wp.exe，在插件代码中放置一个断点。
3.  通过注册运行的任何操作触发插件。
4.  当断点被击中时，将管道的原像、后像和目标值序列化为 XML 文件，这将成为我的单元测试的输入。
5.  停止调试并创建一个新的单元测试，使用 RhinoMocks 模拟 PluginExecutionContext 和 ServiceProvider，使用加载序列化的 XML 文件作为输入参数的存根。
6.  创建在每个单元测试开始和结束时运行的方法，这些方法会重置（首先尝试删除，然后添加）单元测试要处理的虚拟数据，然后在测试结束时删除虚拟数据。
7.  编辑序列化文件以引用虚拟数据，以便我可以确保插件在每次运行时都能针对完全相同的数据工作。
8.  在单元测试中声明并实例化插件，传入模拟对象
9.  执行插件，运行其他查询以确保插件执行了我期望的工作，断言失败。

这是一件很痛苦的事情。从获得正确的图像到创建虚拟数据并在每次运行测试时重置它，似乎还有很多需要改进的地方。

我如何才能对插件进行单元测试，而不必从 CRM 实际触发它，或者先在 CRM 中调试它，然后为每个测试创建唯一的虚拟数据？如何使用注入来消除在 CRM 中为每个单元测试删除、创建、测试、验证和删除数据的需要？

## 2016 年更新

这个问题仍然有很多点击，所以我想我会添加两个（我知道的）为单元测试提供假 CRM 实例的开源项目：

*   [FakeXrmEasy](https://github.com/jordimontana82/fake-xrm-easy) - 由 Jordi 创建（请参阅下面的答案）
    *   主要是假 CRM 服务
    *   支持插件/工作流伪造
    *   对 FakeItEasy 的依赖
    *   [很棒的文档](http://dynamicsvalue.com/get-started/overview)
*   [XrmUnitTest](https://github.com/daryllabar/XrmUnitTest) -- 我自己创建
    *   假 CRM 服务 + 更多（假设、实体构建器等）
    *   对插件/工作流伪造的流畅支持
    *   不依赖任何模拟框架
    *   糟糕的文档（我正在研究它）

查看我创建的[此视频](https://youtu.be/dRz1X6pdsk4)以比较和对比差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T07:33:27.800

我将插件执行上下文序列化为文件以供单元测试使用。在 codeplex 上有一个很好的项目可以做到这一点[http://crm2011plugintest.codeplex.com/](http://crm2011plugintest.codeplex.com/)

使调试和单元测试更容易，您可以“记录”真实世界的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T20:57:15.630

> 我如何才能对插件进行单元测试，而不必从 CRM 实际触发它，或者先在 CRM 中进行调试，然后为每个测试创建唯一的虚拟数据？

带着嘲讽。[请参阅此链接](http://www.develop1.net/public/post/Unit-Testing-Dynamics-CRM2011-Pipeline-Plugins-using-Rhino-Mocks.aspx)以了解使用 RhinoMocks 模拟哪些类。听起来你在这方面正在努力。

> 如何使用注入来消除在 CRM 中为每个单元测试删除、创建、测试、验证和删除数据的需要？

为输入参数注入值可以通过在您要操作的实体的手动实例中存根来完成：

```
// Add the target entity     
Entity myStubbedEntity = new Entity("account");
// set properties on myStubbedEntity specific for this test...
ParameterCollection inputParameters = new ParameterCollection();     
inputParameters.Add("Target", myStubbedEntity);     
pipelineContext.Stub(x => x.InputParameters).Return(inputParameters); 
```

这不是比捕获 xml 数据和重新处理整个输入参数集合更容易吗？

* * *

编辑：对于数据访问，通常的建议是将数据访问包装到类中。存储库[模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)很流行，但对于我们在这里需要的东西来说太过分了。对于您的插件执行类，您在创建时“注入”您的模拟类。初始化默认存储库的空白构造函数，以及采用 IRepository 的第二个构造函数。

```
public class MyPluginStep
{
    ITaskRepository taskRepository;
    public MyPluginStep(ITaskRepository repo)
    {
        taskRepository = repo;
    }
    public MyPluginStep()
    {
        taskRepository = new DefaultTaskRepositoryImplementation();
    }
    public MyExecuteMethod(mypluginstepparams){
        Task task = taskRepository.GetTaskByContact(...);
    } 
```

根据插件步骤的复杂性，这可能会演变为将许多存储库传递给每个类，并且可能会变得繁重，但这是您可以根据需要添加复杂性的基础知识。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-21T15:56:46.730

一个非常好的选择是使用一个模拟库来为你处理模拟和假货，因为我想创建自己的并且总是浪费大量时间来创建假货或模拟，直到我创建了这个为你做的库。试试[FakeXrmEasy](https://github.com/jordimontana82/fake-xrm-easy)

# delphi - 如何制作圆角的TFrame？

> ID：11675374
> 
> 赞同：11
> 
> 时间：2012-07-26T18:08:42.280
> 
> 标签：delphi, user-interface, frame, delphi-2006

我想制作一个基于 a 的组件`TFrame`（`TLMDShapeControl`用于绘制圆角背景）和一个`TEdit`控件（也可以是 a`TComboBox`或 a`TDBEdit`等）。之后，我将使用“添加到调色板”命令将其变成可重用的组件控件。

问题在于我需要它的宽度灵活，为此我想到了将框架内的所有内容`alClient`和`TEdit`5 像素边距转动，以便用户可以看到圆角。

这太糟糕了，因为我不能`Align`在另一个顶部使用和设置组件。现在我每次必须使用它时都必须复制并粘贴组件！:-(((

我看到正确的唯一方法是仅使用`TEdit`with`alClient`和 5px 边距和 no `TShape`。相反，我可以`TFrame`用透明度制作圆角，这样在不同颜色或`TImages`.

但是我该怎么做呢？

有没有人有任何代码示例？

![这是目标：透明圆角](../Images/be19a02543029215fda3739c3d22eae6.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T21:01:05.973

要回答您的问题如何制作带圆角的框架，您可以尝试类似的方法，但您会对结果不满意，因为[`CreateRoundRectRgn`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183516%28v=vs.85%29.aspx)此处使用的没有抗锯齿。

```
type
  TFrame1 = class(TFrame)
    Edit1: TEdit;
    Button1: TButton;
  protected
    procedure SetBounds(ALeft, ATop, AWidth, AHeight: Integer); override;
  end;

implementation

procedure TFrame1.SetBounds(ALeft, ATop, AWidth, AHeight: Integer);
var
  Region: HRGN;
begin
  inherited;
  Region := CreateRoundRectRgn(0, 0, ClientWidth, ClientHeight, 30, 30);
  SetWindowRgn(Handle, Region, True);
end; 
```

***更新：***

由于 GDI 没有任何支持弧形渲染的抗锯齿功能，因此我在这里发布了一个使用 GDI+ 的圆形矩形（只是一个纯实心圆形矩形）的示例（为此，您将需要 GDI+ 包装器[`from here`](http://www.bilsen.com/gdiplus/GdiPlus1.2.zip)）。

以下属性对其使用很重要：

*   颜色 - 是形状填充颜色（可以增强笔颜色、渐变等）
*   半径 - 是用于绘制圆角的圆的​​半径（以像素为单位）
*   AlphaValue - 是渲染的圆形矩形的不透明度值（只是为了好玩:-)

```
unit RoundShape;

interface

uses
  SysUtils, Classes, Controls, Graphics, GdiPlus;

type
  TCustomRoundShape = class(TGraphicControl)
  private
    FRadius: Integer;
    FAlphaValue: Integer;
    procedure SetRadius(Value: Integer);
    procedure SetAlphaValue(Value: Integer);
  protected
    procedure Paint; override;
    property Radius: Integer read FRadius write SetRadius default 10;
    property AlphaValue: Integer read FAlphaValue write SetAlphaValue default 255;
  public
    constructor Create(AOwner: TComponent); override;
  end;

  TRoundShape = class(TCustomRoundShape)
  public
    property Canvas;
  published
    property Align;
    property AlphaValue;
    property Anchors;
    property Color;
    property Constraints;
    property DragCursor;
    property DragKind;
    property DragMode;
    property Enabled;
    property Font;
    property ParentColor;
    property ParentFont;
    property ParentShowHint;
    property PopupMenu;
    property Radius;
    property ShowHint;
    property Visible;
    property OnClick;
    property OnContextPopup;
    property OnDblClick;
    property OnDragDrop;
    property OnDragOver;
    property OnEndDock;
    property OnEndDrag;
    property OnMouseActivate;
    property OnMouseDown;
    property OnMouseEnter;
    property OnMouseLeave;
    property OnMouseMove;
    property OnMouseUp;
    property OnStartDock;
    property OnStartDrag;
  end;

procedure Register;

implementation

{ TCustomRoundShape }

constructor TCustomRoundShape.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  Width := 213;
  Height := 104;
  FRadius := 10;
  FAlphaValue := 255;
end;

procedure TCustomRoundShape.SetRadius(Value: Integer);
begin
  if FRadius <> Value then
  begin
    FRadius := Value;
    Invalidate;
  end;
end;

procedure TCustomRoundShape.SetAlphaValue(Value: Integer);
begin
  if FAlphaValue <> Value then
  begin
    FAlphaValue := Value;
    Invalidate;
  end;
end;

procedure TCustomRoundShape.Paint;
var
  GPPen: TGPPen;
  GPColor: TGPColor;
  GPGraphics: IGPGraphics;
  GPSolidBrush: IGPSolidBrush;
  GPGraphicsPath: IGPGraphicsPath;
begin
  GPGraphicsPath := TGPGraphicsPath.Create;
  GPGraphicsPath.Reset;
  GPGraphicsPath.AddArc(0, 0, FRadius, FRadius, 180, 90);
  GPGraphicsPath.AddArc(ClientWidth - FRadius - 1, 0, FRadius, FRadius, 270, 90);
  GPGraphicsPath.AddArc(ClientWidth - FRadius - 1, ClientHeight - FRadius - 1,
    FRadius, FRadius, 0, 90);
  GPGraphicsPath.AddArc(0, ClientHeight - FRadius - 1, FRadius, FRadius, 90, 90);
  GPGraphicsPath.CloseFigure;

  GPColor.InitializeFromColorRef(ColorToRGB(Color));
  GPColor.Alpha := FAlphaValue;
  GPPen := TGPPen.Create(GPColor);
  GPSolidBrush := TGPSolidBrush.Create(GPColor);

  GPGraphics := TGPGraphics.Create(Canvas.Handle);
  GPGraphics.SmoothingMode := SmoothingModeAntiAlias;
  GPGraphics.FillPath(GPSolidBrush, GPGraphicsPath);
  GPGraphics.DrawPath(GPPen, GPGraphicsPath);
end;

procedure Register;
begin
  RegisterComponents('Stack Overflow', [TRoundShape]);
end;

end. 
```

结果（[`SmoothingModeAntiAlias`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534173%28v=vs.85%29.aspx)应用了平滑模式）：

![在此处输入图像描述](../Images/2c6065300aa9fc9477a3e0efe128ef82.png)

可以说，将 GDI+ 用于如此微小的东西，但没有抗锯齿的纯 GDI 渲染使结果看起来很难看，这是一个很大的开销。下面是使用纯 GDI 渲染的同一个圆角矩形的示例：

![在此处输入图像描述](../Images/95ee520371646f686e7e9af360b9e4ef.png)

# android - 如何在不使用绝对布局的情况下正确定位 android 布局？

> ID：11675377
> 
> 赞同：2
> 
> 时间：2012-07-26T18:08:51.020
> 
> 标签：android, layout, positioning

对不起，这是一个菜鸟问题，但我不擅长布局。我将如何制作定位 flashlight_button 的布局，以便保留顶部和底部图像视图之间的比例。

在 nexus s (800x480) 上看起来不错，这就是我想要的

...图片 ...

但显然，当我切换到 Galaxy nexus (1280 x 720) 时，它会将中间按钮移动到顶部，就像这样（所以它不会保留 nexus 上设计的顶部和底部边距之间的比率）

...图片...

布局在这里：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:padding="20dp" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="50dp"
    android:contentDescription="@string/application_logo_description"
    android:src="@drawable/mylight" />

<ImageButton
    android:id="@+id/settings_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@null"
    android:contentDescription="@string/settings_button_description"
    android:src="@drawable/settings_button" />

<ImageButton
    android:id="@+id/flashlight_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imageView1"
    android:layout_centerHorizontal="true"
    android:background="@null"
    android:contentDescription="@string/flashlight_button_description"
    android:src="@drawable/flashlight_button_selector" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/ad_button"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/powered_by_description"
    android:src="@drawable/powered_by" />

<ImageButton
    android:id="@+id/ad_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:background="@null"
    android:contentDescription="@string/ad_button_description"
    android:src="@drawable/freeml" /> 
```

所以它只是将顶部和底部的图像视图锚定到父边缘，中间按钮只是使用 layout_maginBottom 按下。我正在为不同的密度和明显的密度像素提供缩放图像来表达尺寸，所以在更大的屏幕上似乎还不够。

这样做的正确方法是什么？不同的 .xml 文件或 .. ？

//对不起，我还不能发布图片，希望你能想象出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:25:20.347

您是否考虑过根据父母的中心放置您的手电筒图像？所以现在你正在向下推手电筒图像（根据顶部图像位置）。使手电筒图像居中对齐并给它一些底部边距（根据您的设计将其推高一点）会更准确吗？

# linq - 删除 linq to sql (vb.net) 中的记录我的代码有什么问题？

> ID：11675379
> 
> 赞同：1
> 
> 时间：2012-07-26T18:08:58.250
> 
> 标签：linq, linq-to-sql

我在 VarEmpID 变量中获得了正确的员工 ID。当我点击删除它给我

无法将“System.Data.Linq.DataQuery`1[my name space]”类型的对象转换为“namespace”类型。

在此处输入代码

```
 Protected Sub radGrid1_DeleteCommand(ByVal source As Object, ByVal e As  GridCommandEventArgs) Handles radGrid1.DeleteCommand

          Dim VarEmpId As String = (CType(e.Item, GridDataItem)).OwnerTableView.DataKeyValues(e.Item.ItemIndex)("EmpId").ToString()

          Using dc1 As New EmployeesDataClassesDataContext()

            Dim EmployeeEntry = (From p In dc1.Employees
            Where (p.EmpId = VarEmpId)
                                Select p)

            dc1.Employees.DeleteOnSubmit(EmployeeEntry)
            dc1.SubmitChanges()

            Dim queryResults = (From queryItem In EmployeeEntry Select queryItem).ToList()
            If queryResults.Any Then
                radGrid1.DataSource = queryResults
                radGrid1.DataBind()
            End If

        End Using

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:12:21.580

```
dc1.Employees.DeleteOnSubmit(EmployeeEntry) 
```

该方法需要一个 Employee 实例。相反，您传入了一个员工查询。

```
Dim EmployeeEntry = ( query ) 
```

这是一个查询，而不是一个条目。考虑调用 Enumerable.First 以获取查询的第一个结果，然后将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:35:40.540

修改后添加 Dim EmployeeEntry = (From p In dc1.Employees Where (p.EmpId = VarEmpId) Select p).singleorDefault() 之后注释掉查询结果部分并再次绑定数据它解决了我的问题。——微笑百合

# javascript - 空格上的仅限Javascript的自动换行功能？

> ID：11675397
> 
> 赞同：3
> 
> 时间：2012-07-26T18:10:15.910
> 
> 标签：javascript

我发现的大多数自动换行函数都绑定到 css 和/或浏览器 dom。我在 javascript 环境 (rhino) 中工作，需要找到或设计一个更好的自动换行，在给定的行长值之前打破空白。我当前的解决方案只是搜索给定字符之前的最后一个空格，然后剪切左侧，将其存储为一行输出（在数组返回中）。重复直到没有更多的文本。

希望有人看到优雅的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:17:51.700

你可以这样写：

```
let wordwrapped = (original + ' ').replace(/(\S(.{0,78}\S)?)\s+/g, '$1\n').trim(); 
```

这将替换`\s+`为`\n`至少一个，最多八十个，最好是尽可能多的字符。（注意：如果一行中没有空格的字符超过 80 个，那么它们之前和之后会有一个换行符，但它们内部不会发生换行。）

看看它的实际效果：

```
// generate random sequence of 500 letters and spaces:
let original = String.fromCharCode.apply(String, Array.from({length: 500}, () => 64 + Math.floor(Math.random() * 27))).replace(/@/g, ' ');

// perform word-wrapping:
let wordwrapped = (original + ' ').replace(/(\S(.{0,78}\S)?)\s+/g, '$1\n').trim();

// show the results in the <pre> elements:
document.getElementById('ruakh-original').innerText = 'original:\n' + original;
document.getElementById('ruakh-word-wrapped').innerText = 'word-wrapped:\n' + wordwrapped;
```

```
<pre id="ruakh-original"></pre>
<pre id="ruakh-word-wrapped"></pre>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-19T07:21:27.080

此正则表达式将包装每个 0 宽度字符并尊重空格和连字符也会切割比宽度字符更长的单词。[在regexr](https://regexr.com/5s1m5)上尝试一下。

```
/**
 * Wrap every 0-`width` character and respect whitespaces and hyphens also cuts words longer than `width` characters.
 * @param str The string to wrapped
 * @param width The maximum length a string can be
 */
function wordwrap(str, width) {
    return str.replace(new RegExp(`(?:\\S(?:.{0,${width}}\\S)?(?:\\s+|-|$)|(?:\\S{${width}}))`, 'g'), s => `${s}\n`).slice(0, -1);
} 
```

```
function wordwrap(str, width) {
    return str.replace(new RegExp('(?:\\S(?:.{0,' + width + '}\\S)?(?:\\s+|-|$)|(?:\\S{' + width + '}))', 'g'), function (s) {return s + '\n'}).slice(0, -1);
}

console.log(wordwrap('This is my regular-expression. It will wrap every 0-20 character and respect whitespaces and hyphens, also cuts reallylongwordslikethis.', 20));
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-26T18:26:10.623

正则表达式确实是要走的路。`/.{0,79}(?:\s|$)/g`将抓取以字符或文件结尾结尾的 80 个字符以下的最长行。`exec`多次调用将提取每一行。

```
var text = "";
var regex = /.{0,79}(?:\s|$)/g;
var lines = [];
var line;

while (line = regex.exec(text)) {
    lines.push(line);
} 
```

# api - 奥运会API？

> ID：11675399
> 
> 赞同：3
> 
> 时间：2012-07-26T18:10:17.420
> 
> 标签：api

我正在开发一个快速有趣的小应用程序，它将显示在大厅中。它真正做的就是去一个国家到另一个国家展示国旗、人口等……为所有参加今年奥运会的国家。

我正在重用我们为 2010 年奥运会创建的代码，它的一个功能是提供每个国家赢得了多少奖牌（加上旁边的总计数）。该数据托管在官方网站上，但已被删除。构建此功能很容易，但如果我能让它工作，它会使应用程序更有趣

是否有免费的 API 可以提供这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:13:34.967

我用谷歌搜索了“奥林匹克数据提要”。前两个结果是：

[http://odf.olympictech.org/](http://odf.olympictech.org/)

[http://odf.olympictech.org/help.htm](http://odf.olympictech.org/help.htm)

在页面下方，我看到了这个：

[http://www.stats.com/olympics.asp](http://www.stats.com/olympics.asp)

听起来他们是 2012 年奥运会的官方数据人。

# c# - 在 Silverlight/Windows Phone 中进行异常处理的标准方法

> ID：11675403
> 
> 赞同：-1
> 
> 时间：2012-07-26T18:10:28.950
> 
> 标签：c#, silverlight, windows-phone-7, exception, error-handling

我想知道是否有一种标准方法可以在 Windows Phone silverlight 应用程序中进行一些错误处理。

我所说的错误处理是什么意思

*   当数据连接丢失或 Windows Phone 应用程序出现任何异常时显示对话框窗口。
*   在运行时进行登录的正确方法。

我对此进行了一些研究，但没有发现任何有用的东西，欢迎任何代码示例或参考链接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:34:13.973

这个问题似乎有部分内容。如何显示错误信息以及如何处理异常

**例外**

我在许多环境和语言（不仅仅是 Silverlight 或 .NET）中经常使用的一种模式是拥有一个处理未捕获异常的顶级异常处理程序。从这里开始，您如何处理错误取决于您。它可以被记录到数据库、文件或丢弃。

**处理错误**

在我看来，最好的方法是设计软件，使潜在错误最小化，并从一开始就防止它们发生。例如，如果连接丢失，而不是显示错误消息，而是禁用需要连接的 UI 部分并向用户提供一些指示，即应用程序现在处于断开连接状态。

# asp.net - 标准 ASP.NET 应用程序的网络流量

> ID：11675409
> 
> 赞同：-1
> 
> 时间：2012-07-26T18:10:45.463
> 
> 标签：asp.net, web-applications, traffic

我一直在学习 AJAX 和 jQuery 来构建 Web 应用程序，现在我看到了这些工具的强大功能。因此，出现了一些关于在没有这些技术的情况下由标准 ASP.NET 应用程序生成的网络流量的问题。

众所周知，每个设置了 runat="server" 属性的控件都将其当前值置于视图状态，该值被编码并放置在对用户响应的隐藏输入中。

然而，页面上的每一个小动作都会触发一个帖子到服务器，发回整个页面的值。根据页面的复杂性，它可能对应用程序非常危险，因为它会产生大量不必要的流量。

一个例子：我已经构建了一个页面，它的大小约为 155kb 呈现（仅 62kb 是视图状态）。因此，页面上的每个帖子都会返回一个大小相似的新渲染页面，即使它的内容没有改变。在 Intranet 环境中，它似乎什么都没有，但在 Web 上它是不合适的。

你怎么看这个问题？我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:16:02.463

我的观点是，如果您不喜欢 vanilla ASP.NET 的纯服务器端特性，您应该只包含您提到的技术。有大量文档和分步指南可帮助您了解如何将客户端和服务器端技术与 ASP.NET 结合使用。

我怎么看这个问题？哪个问题？除了关于神秘问题的问题外，我不确定您还有其他问题。

我将把它留在这里：[http ://www.asp.net/ajax](http://www.asp.net/ajax)

# url - 检索任何“喜欢”的 URL

> ID：11675411
> 
> 赞同：0
> 
> 时间：2012-07-26T18:10:51.447
> 
> 标签：url, facebook-graph-api, facebook-like

如果我使用 data-href = "www.ohohohoho.com" 创建一个类似 facebook 的按钮

并且......有些人喜欢它。

我如何知道我的登录用户是否喜欢 SDK 或 Graph 或 FDK ？我看到我只能检索那种

参考页面：

[https://stackoverflow.com/questions/11671094/retrieve-non-facebook-liked-pages-from-a-facebook-user](https://stackoverflow.com/questions/11671094/retrieve-non-facebook-liked-pages-from-a-facebook-user)

通过做 ：

```
https://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/ 
```

但其余的不是:(

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:15:54.470

您无法获得喜欢它的用户。但是你可以知道确定的用户是否喜欢这个。

# javascript - Highcharts - 突出显示两个 y 值之间的区域

> ID：11675413
> 
> 赞同：3
> 
> 时间：2012-07-26T18:10:58.177
> 
> 标签：javascript, graph, highcharts, area, confidence-interval

我有一种情况，我需要预测时间序列中的趋势，并且必须显示置信区间。有没有办法将 Highcharts 中的两组 y 值绘制为链接，并在两者之间绘制阴影？像这样的东西：

[http://www.psychosomaticmedicine.org/content/74/4/377/F2.large.jpg](http://www.psychosomaticmedicine.org/content/74/4/377/F2.large.jpg)

我有五个时间序列：预测，两个限制更窄置信区间的时间序列，以及另外两个限制更宽置信区间的时间序列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:27:39.403

新的 Beta 版具有该功能：

[见 jsFiddle](http://jsfiddle.net/highcharts/WRcj9/light/)

您可以在这篇文章中阅读有关即将推出的功能的更多[信息。](http://www.highcharts.com/component/content/article/2-news/46-gauges-ranges-and-polar-charts-in-beta)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:44:36.373

Highcharts 本身不支持范围图（从 2.2.5 版开始），但有一种解决方法。您可以将两个区域系列堆叠在一起，最前面的系列具有与图表背景匹配的背景颜色。

这是示例 javascript（导致[此图表](http://www.highcharts.com/studies/range.htm)）：

```
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container', 
            defaultSeriesType: 'area'
        },
        title: {
            text: 'Range chart emulation'
        },
        xAxis: {
        },
        yAxis: {    
        },
        plotOptions: {
            area: {
                pointStart: 1940,
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    radius: 2,
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                },
                lineWidth: 0,
                stacking: 'normal'
            }
        },
        series: [{
            // this series defines the height of the range
            name: 'Range',
            data: [1,2,3,5,7,8,9,6,4,7,5,3,4,7,6,5,6,7,5,4,2]
        }, {
            // this series defines the bottom values
            name: 'Dummy',
            data: [0,1,2,3,3.5,7,8.5,5,2.5,5.5,3,2,3,5.5,4,3,4,5.5,4,3.5,1.5],
            enableMouseTracking: false,
            showInLegend: false,
            fillColor: 'rgba(255, 255, 255, 0)'
        }]
    });
}); 
```

# linux - linux shell tar 不需要的额外目录

> ID：11675419
> 
> 赞同：0
> 
> 时间：2012-07-26T18:11:10.930
> 
> 标签：linux, shell, tar

我有以下问题：我有目录 a/b/c 并且在 c 中有许多文本文件。我想在目录 a/mydir 中创建一个 .tar.gz 文件，其中包含 c 目录，然后将其解压缩到同一目录以创建 a/mydir/c （其中包含所有文件）

我在目录 a 并运行：（shell）

~:$ tar -czf mydir/output.tar.gz b/c

~:$ tar -zxf mydir/output.tar.gz -c mydir

但结果是目录 a/mydir/b/c （里面有文件）问题是我不希望目录 b 在中间，只需要 c 及其所有内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:34:27.737

这对我有用。创建数据

```
mkdir -p a/b/c
echo 42 >  a/b/c/file.dat 
```

档案

```
tar zc -f c.tar.gz  -C a/b c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T06:23:55.557

*   created a/b/c directories, from directory a kindly try this command.
*   so the file under b/c/files were done out.tar.gz
*   new directory "mydir" create under "b" and files extracted too.
*   out.tar.gz removed from "a".

    # tar -cvzf out.tar.gz b/c/* ; mkdir -p b/mydir ; tar -xvzf out.tar.gz -C b/mydir/ ; rm -rf out.tar.gz

Thanks!

# design-patterns - 演员模式——它究竟构成了什么

> ID：11675422
> 
> 赞同：48
> 
> 时间：2012-07-26T18:11:23.157
> 
> 标签：design-patterns, actor

我正在做一些 Objective-C / iOS 开发，并且听说过一些对 Actor 模式的引用。在大书呆子牧场的书中，它说：

> 当您有一个长时间运行的任务和一些需要在完成后执行的代码时，使用一个actor对象。这种类型的对象被提供了执行任务所需的信息以及在该任务完成时执行的回调。演员在自己的线程上运行，没有任何进一步的输入，并在完成时被销毁。

这里的actor与网络调用结合使用。这就是 Actor 的主要使用方式吗？它是相互排斥的还是与代表团互补的？Actor 的定义似乎非常广泛，我正试图更好地理解它的含义。此外，是否可以在非 OO 环境中拥有 Actor？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-26T18:38:10.253

Actor 的定义实际上似乎有点限制性。它当然不处理 Erlang 风格的演员（或者我相信 Scala 风格的演员）。根据我的经验，演员是这样的：

*   发送和接收消息（每个actor都有一个邮箱）
*   不与其他参与者共享可变内存
*   根据运行时的突发奇想进行调度。一个actor可以被赋予它自己的线程，但更有可能的是多个actor在一个线程中参与协作多线程，或者甚至可能参与抢占式多线程。

但从根本上说，actor 是一段自由运行的代码，可以从其环境接收消息，也可以将消息发送回其环境。

每当您需要大量（和大量）有状态的小进程时，都可以使用 Actor。网络是一个常见的用例，因为您不想为每个连接分配整个线程。你想要更轻量级的东西，所以你为每个连接分配一个actor，然后将actor调度到一个较小的线程池中。但网络肯定不是演员的唯一用途。

在 Erlang 中，actor 是一个函数。该函数可能会对其自身进行尾调用（因此它基本上是一个无限循环），并且它可能具有一种干净的自我终止方式（无限循环具有“中断”条件）。循环通常等待来自系统的消息，对其进行处理，然后将消息发送到系统的其余部分。Erlang OTP 库有一些抽象，甚至不需要编写循环，因此 OTP Actor 被实现为一组回调。这样一来，OTP 演员看起来很像一个对象。

# mysql - MYSQL表日历和右连接

> ID：11675425
> 
> 赞同：2
> 
> 时间：2012-07-26T18:11:43.473
> 
> 标签：mysql, sql, join

如何填补行之间的空白？我正在使用表格日历，但我的查询似乎不正确。结果没有显示差距..

```
SELECT calendar.datefield, t2.*
    FROM store_relation t1,store t3, store_product t2
            RIGHT JOIN calendar ON (DATE(t2.created) = calendar.datefield)
            WHERE (calendar.datefield BETWEEN ('2012-07-15') and ('2012-07-20'))
    AND t1.id_store_a = 1
    AND t1.id_store_b = t2.id_store
    AND t3.id = t2.id_store
    AND t2.id_product = 11
    ORDER By t2.price 
```

结果：

```
datefield   |   id_product   |   id_store   |   created
2012-07-15      1                1              2012-07-15
2012-07-18      1                1              2012-07-18
2012-07-20      1                1              2012-07-20
2012-07-20      1                1              2012-07-20 
```

我在等结果

```
datefield   |   id_product   |   id_store   |   created
2012-07-15      1                1              2012-07-15
2012-07-16      null             null           null
2012-07-17      null             null           null
2012-07-18      1                1              2012-07-18
2012-07-19      null             null           null
2012-07-20      1                1              2012-07-20
2012-07-20      1                1              2012-07-20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:17:23.027

当您有一个 LEFT/RIGHT JOIN 并且您正在筛选可选包含的表时，该`WHERE`子句会将这些记录排除在外。您需要包含一个允许`RIGHT JOIN`丢失左侧部分的条件：

```
WHERE (calendar.datefield BETWEEN ('2012-07-15') and ('2012-07-20'))
AND
(
   (t1.id_store_a = 1
   AND t1.id_store_b = t2.id_store
   AND t3.id = t2.id_store
   AND t2.id_product = 11)
   OR
   (t2.id_product is NULL)
) 
```

例如，如果您查看预期输出，则 的值为`id_product`null，但您正在过滤`t2.id_product = 11`. 所以`null`记录永远不会匹配`11`，这就是它们被排除在外的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:17:39.350

`WHERE`您正在引用子句左侧的一些列。尝试显式添加`OR NULL`条件。例如：

```
SELECT calendar.datefield, t2.*
FROM store_relation t1,store t3, store_product t2
        RIGHT JOIN calendar ON (DATE(t2.created) = calendar.datefield)
        WHERE (calendar.datefield BETWEEN ('2012-07-15') and ('2012-07-20'))
AND ((t1.id_store_a = 1
        AND t1.id_store_b = t2.id_store
        AND t3.id = t2.id_store
        AND t2.id_product = 11)
    OR (t1.id IS NULL AND t2.id IS NULL AND t3.id IS NULL))
ORDER By t2.price 
```

您必须决定要允许哪些表为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:51:50.350

好的，我明白了...谢谢你给我新的想法

```
SELECT calendar.datefield as DATE, t2.*
FROM store_relation t1,store t3, store_product t2
    RIGHT JOIN calendar ON (DATE(t2.created) = calendar.datefield)
    WHERE (calendar.datefield BETWEEN ('2012-07-15') and ('2012-07-27'))
AND ((t1.id_store_a = 1
    AND t1.id_store_b = t2.id_store
    AND t3.id = t2.id_store
    AND t2.id_product = 11)
OR (t2.id_product IS NULL))
GROUP BY DATE 
```

# android - ICS 上的本机堆栈跟踪？

> ID：11675427
> 
> 赞同：19
> 
> 时间：2012-07-26T18:11:50.627
> 
> 标签：android, android-ndk, stack-trace, android-4.0-ice-cream-sandwich, nexus-s

出于某种原因，我无法在我这里拥有的 ICS 设备上获得本机 (C/C++) 地址/堆栈跟踪。

在我的 Nexus 7 上，当本机库崩溃时没有任何输出。通过和`log.redirect-stdio`设置时设置为 1 ，均无效。`/system/default.prop``/data/local.prop`

我尝试设置`log.redirect-stdio`为`true`使用`stop`, `setprop`,`start`命令，但仍然没有将本机堆栈跟踪输出到 logcat。

谷歌，我的意思是来吧......我每天对谷歌越来越失去信心，只是因为我与 Android 的关系有问题，不可预测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:07:09.140

检查[这里](https://stackoverflow.com/questions/8934575/debugging-android-ndk-native-apps)，因为您可能必须更改 NDK/ndk-build 步骤...通过更改 ./jni 文件夹中的 'Android.mk' 、 'Application.mk' 文件。

你试过这个吗：

```
$ adb shell stop
$ adb shell setprop log.redirect-stdio true
$ adb shell start 
```

当我在 JB 中这样做时，我会在普通 logcat 中得到类似以下内容...

```
F/libc    (13345): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 13345 (bpo.media.notes)
I/DEBUG   (  121): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (  121): Build fingerprint: 'google/takju/maguro:4.1.1/JRO03C/398337:user/release-keys'
I/DEBUG   (  121): pid: 13345, tid: 13345, name: bpo.media.notes  >>> com.b2bpo.media.notes <<<
I/DEBUG   (  121): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
I/DEBUG   (  121):     r0 4110e470  r1 dbe00019  r2 dda00021  r3 59e4d144
I/DEBUG   (  121):     r4 4110e470  r5 00000000  r6 dbe00019  r7 00000000
I/DEBUG   (  121):     r8 dda00021  r9 5cab8e50  sl 4110fa18  fp be95a5d4
I/DEBUG   (  121):     ip 00000000  sp be95a5a0  lr 59e4bd11  pc 00000000  cpsr 48000010
I/DEBUG   (  121):     d0  756f6620746f6e20  d1  203a5d333930315b
I/DEBUG   (  121):     d2  207972617262694c  d3  276765706d666627
I/DEBUG   (  121):     d4  0066007200750053  d5  0054006500630061
I/DEBUG   (  121):     d6  0000000000780065  d7  00000000c3120000
I/DEBUG   (  121):     d8  000000000000040e  d9  4434000000000000
I/DEBUG   (  121):     d10 000000004481c000  d11 0000000000000000
I/DEBUG   (  121):     d12 0000000000000000  d13 0000000000000000
I/DEBUG   (  121):     d14 0000000000000000  d15 0000000000000000
I/DEBUG   (  121):     d16 0000000000000001  d17 0000000000000001
I/DEBUG   (  121):     d18 0000000000000002  d19 0000000000000000
I/DEBUG   (  121):     d20 4062400000000000  d21 3ff0000000000000
I/DEBUG   (  121):     d22 8000000000000000  d23 0000000000000000
I/DEBUG   (  121):     d24 0000000000000000  d25 8000000000000000
I/DEBUG   (  121):     d26 3ff0000000000000  d27 3fdb6f2281b5dfe3
I/DEBUG   (  121):     d28 3fe3341cf8e40e47  d29 bfa8605c00000000
I/DEBUG   (  121):     d30 40079e7e00000000  d31 3fe2b80340000000
I/DEBUG   (  121):     scr 60000011
I/DEBUG   (  121): 
I/DEBUG   (  121): backtrace:
I/DEBUG   (  121):     #00  pc 00000000  <unknown>
I/DEBUG   (  121):     #01  pc 00000d0f  /data/data/com.b2bpo.media.notes/lib/libffmpeginvoke.so (Java_com_b2bpo_media_notes_RecorderActivity_run+66)
I/DEBUG   (  121):     #02  pc 0001de30  /system/lib/libdvm.so (dvmPlatformInvoke+112)
I/DEBUG   (  121):     #03  pc 0004d083  /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+394)
I/DEBUG   (  121):     #04  pc 0004f19f  /system/lib/libdvm.so (dvmResolveNativeMethod(unsigned int const*, JValue*, Method const*, Thread*)+174)
I/DEBUG   (  121):     #05  pc 00027260  /system/lib/libdvm.so
I/DEBUG   (  121):     #06  pc 0002bb68  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
I/DEBUG   (  121):     #07  pc 0005fab7  /system/lib/libdvm.so (dvmInvokeMethod(Object*, Method const*, ArrayObject*, ArrayObject*, ClassObject*, bool)+374)
I/DEBUG   (  121):     #08  pc 0006700d  /system/lib/libdvm.so
I/DEBUG   (  121):     #09  pc 00027260  /system/lib/libdvm.so
I/DEBUG   (  121):     #10  pc 0002bb68  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
I/DEBUG   (  121):     #11  pc 0005fab7  /system/lib/libdvm.so (dvmInvokeMethod(Object*, Method const*, ArrayObject*, ArrayObject*, ClassObject*, bool)+374)
I/DEBUG   (  121):     #12  pc 0006700d  /system/lib/libdvm.so
I/DEBUG   (  121):     #13  pc 00027260  /system/lib/libdvm.so
I/DEBUG   (  121):     #14  pc 0002bb68  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
I/DEBUG   (  121):     #15  pc 0005f7f1  /system/lib/libdvm.so (dvmCallMethodV(Thread*, Method const*, Object*, bool, JValue*, std::__va_list)+272)
I/DEBUG   (  121):     #16  pc 00049673  /system/lib/libdvm.so
I/DEBUG   (  121):     #17  pc 0004698d  /system/lib/libandroid_runtime.so
I/DEBUG   (  121):     #18  pc 0004746f  /system/lib/libandroid_runtime.so (android::AndroidRuntime::start(char const*, char const*)+390)
I/DEBUG   (  121):     #19  pc 00000dcf  /system/bin/app_process
I/DEBUG   (  121): 
I/DEBUG   (  121): stack:
I/DEBUG   (  121):          be95a560  be95a5d4  [stack]
I/DEBUG   (  121):          be95a564  4017fb61  /system/bin/linker
I/DEBUG   (  121):          be95a568  4018afd0  /system/bin/linker
I/DEBUG   (  121):          be95a56c  4018afeb  /system/bin/linker
I/DEBUG   (  121):          be95a570  40197c0c  
I/DEBUG   (  121):          be95a574  00000000  
I/DEBUG   (  121):          be95a578  00000000  
I/DEBUG   (  121):          be95a57c  59e4bd07  /data/data/com.b2bpo.media.notes/lib/libffmpeginvoke.so (Java_com_b2bpo_media_notes_RecorderActivity_run+58)
I/DEBUG   (  121):          be95a580  59e4d144  /data/data/com.b2bpo.media.notes/lib/libffmpeginvoke.so
I/DEBUG   (  121):          be95a584  4017fbfd  /system/bin/linker
I/DEBUG   (  121):          be95a588  00000000  
I/DEBUG   (  121):          be95a58c  59e4d144  /data/data/com.b2bpo.media.notes/lib/libffmpeginvoke.so
I/DEBUG   (  121):          be95a590  4110e470  [heap]
I/DEBUG   (  121):          be95a594  c200001d  
I/DEBUG   (  121):          be95a598  df0027ad  
I/DEBUG   (  121):          be95a59c  00000000  
I/DEBUG   (  121):     #00  be95a5a0  dda00021  
I/DEBUG   (  121):          ........  ........
I/DEBUG   (  121):     #01  be95a5a0  dda00021  
I/DEBUG   (  121):          be95a5a4  56ddb4e0  /dev/ashmem/dalvik-LinearAlloc (deleted)
I/DEBUG   (  121):          be95a5a8  4110fa08  [heap]
I/DEBUG   (  121):          be95a5ac  00000000  
I/DEBUG   (  121):          be95a5b0  410c6cdc  
I/DEBUG   (  121):          be95a5b4  be95a5c0  [stack]
I/DEBUG   (  121):          be95a5b8  410c6cd4  
I/DEBUG   (  121):          be95a5bc  4074ee34  /system/lib/libdvm.so (dvmPlatformInvoke+116)
I/DEBUG   (  121):     #02  be95a5c0  410c6cd0  
I/DEBUG   (  121):          be95a5c4  00000001  
I/DEBUG   (  121):          be95a5c8  41ba41b8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (  121):          be95a5cc  59e4902b  /data/dalvik-cache/data@app@com.b2bpo.media.notes-2.apk@classes.dex
I/DEBUG   (  121):          be95a5d0  00000019  
I/DEBUG   (  121):          be95a5d4  4077e087  /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+398)
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near r0:
I/DEBUG   (  121):     4110e450 6c436d65 0000001b 411254d8 4007c51c  emCl.....T.A...@
I/DEBUG   (  121):     4110e460 74696e49 4007003b 00000018 00000023  Init;..@....#...
I/DEBUG   (  121):     4110e470 407d4970 407d4de4 00000001 4110fa08  pI}@.M}@.......A
I/DEBUG   (  121):     4110e480 00000000 58ba5a30 00000000 0000001b  ....0Z.X........
I/DEBUG   (  121):     4110e490 00000000 00000000 00000000 4110e490  ...............A
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near r3:
I/DEBUG   (  121):     59e4d124 e0833102 e2830008 e28dd014 e8bd8000  .1..............
I/DEBUG   (  121):     59e4d134 e92d4008 ebfffac7 e92d4008 ebfffac5  .@-......@-.....
I/DEBUG   (  121):     59e4d144 6176614a 6d6f635f 6232625f 6d5f6f70  Java_com_b2bpo_m
I/DEBUG   (  121):     59e4d154 61696465 746f6e5f 525f7365 726f6365  edia_notes_Recor
I/DEBUG   (  121):     59e4d164 41726564 76697463 5f797469 7552616e  derActivity_naRu
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near r4:
I/DEBUG   (  121):     4110e450 6c436d65 0000001b 411254d8 4007c51c  emCl.....T.A...@
I/DEBUG   (  121):     4110e460 74696e49 4007003b 00000018 00000023  Init;..@....#...
I/DEBUG   (  121):     4110e470 407d4970 407d4de4 00000001 4110fa08  pI}@.M}@.......A
I/DEBUG   (  121):     4110e480 00000000 58ba5a30 00000000 0000001b  ....0Z.X........
I/DEBUG   (  121):     4110e490 00000000 00000000 00000000 4110e490  ...............A
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near r9:
I/DEBUG   (  121):     5cab8e30 4023af08 5cab8d80 00000033 00000007  ..#@...\3.......
I/DEBUG   (  121):     5cab8e40 00000002 00000000 59c61708 00000011  ...........Y....
I/DEBUG   (  121):     5cab8e50 5bd26990 4007c514 00000010 00000012  .i.[...@........
I/DEBUG   (  121):     5cab8e60 59e810b4 4007c514 00000010 00000043  ...Y...@....C...
I/DEBUG   (  121):     5cab8e70 4023aea0 5cb8a368 4023aec0 59f65d60  ..#@h..\..#@`].Y
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near sl:
I/DEBUG   (  121):     4110f9f8 00000000 00000800 4109e008 00000453  ...........AS...
I/DEBUG   (  121):     4110fa08 57c0df5a 410c6cd0 56ddb400 59c6b000  Z..W.l.A...V...Y
I/DEBUG   (  121):     4110fa18 0000007a 98b9bd7e be95a710 00000000  z...~...........
I/DEBUG   (  121):     4110fa28 be95a744 00000001 00000000 4074efc0  D.............t@
I/DEBUG   (  121):     4110fa38 00000000 00000000 4066fe70 410c1300  ........p.f@...A
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near fp:
I/DEBUG   (  121):     be95a5b4 be95a5c0 410c6cd4 4074ee34 410c6cd0  .....l.A4.t@.l.A
I/DEBUG   (  121):     be95a5c4 00000001 41ba41b8 59e4902b 00000019  .....A.A+..Y....
I/DEBUG   (  121):     be95a5d4 4077e087 410c6cd0 59e49028 59e4bccd  ..w@.l.A(..Y...Y
I/DEBUG   (  121):     be95a5e4 4110fa18 00000000 00000000 59fe8dc0  ...A...........Y
I/DEBUG   (  121):     be95a5f4 40083a4c 00000000 40048571 40048539  L:.@....q..@9..@
I/DEBUG   (  121): 
I/DEBUG   (  121): memory near sp:
I/DEBUG   (  121):     be95a580 59e4d144 4017fbfd 00000000 59e4d144  D..Y...@....D..Y
I/DEBUG   (  121):     be95a590 4110e470 c200001d df0027ad 00000000  p..A.....'......
I/DEBUG   (  121):     be95a5a0 dda00021 56ddb4e0 4110fa08 00000000  !......V...A....
I/DEBUG   (  121):     be95a5b0 410c6cdc be95a5c0 410c6cd4 4074ee34  .l.A.....l.A4.t@
I/DEBUG   (  121):     be95a5c0 410c6cd0 00000001 41ba41b8 59e4902b  .l.A.....A.A+..Y
I/DEBUG   (  121): 
I/DEBUG   (  121): code around pc:
I/DEBUG   (  121):     00000000 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     00000010 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     00000020 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     00000030 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121):     00000040 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (  121): 
I/DEBUG   (  121): code around lr:
I/DEBUG   (  121):     59e4bcf0 f8d34629 460732a8 47984620 46384907  )F...2.F F.G.I8F
I/DEBUG   (  121):     59e4bd00 f7ff4479 4631efc4 46054642 47a84620  yD....1FBF.F F.G
I/DEBUG   (  121):     59e4bd10 e8bd4638 f7ff43f8 bf00bf99 00001440  8F...C......@...
I/DEBUG   (  121):     59e4bd20 e5903000 e3130101 13833102 03c33102  .0.......1...1..
I/DEBUG   (  121):     59e4bd30 e0800003 e12fff1e e92d4ff0 e59f51ac  ....../..O-..Q..
I/ActivityManager(11604): Process com.b2bpo.media.notes (pid 13345) has died.
I/WindowState(11604): WIN DEATH: Window{425a34d0 com.b2bpo.media.notes/com.b2bpo.media.notes.RecorderActivity paused=false}
W/ActivityManager(11604): Force removing ActivityRecord{425839e0 com.b2bpo.media.notes/.RecorderActivity}: app died, no saved stat 
```

# ms-access - 报告摘要 - MS Access

> ID：11675429
> 
> 赞同：0
> 
> 时间：2012-07-26T18:12:01.630
> 
> 标签：ms-access, report

我有一些我们正在为我们的建筑物测量的标准。报告按建筑物和楼层分组，用于几组不同的数据（例如关于浴室、会议室、门等的信息）。每个报告针​​对不同的集合（即，浴室和门完全是单独的报告，来自单独的查询）。

这些报告有数学表达式，例如计算每层楼/每栋楼的平均值等。我知道，这里有很多背景故事。

底线是：

我需要一种方法来获取一个字段，比如说“TotalBuildingRating”，它在所有 20 多个报告中都是相同的，并生成一个摘要 - 一个简单的页面说

```
For building X: Bathroom Rating | Meeting Room Rating | Door Rating
                     80%        |        50%          |   60%
              (ValueFromBathRpt)|(ValueFromMeetingRpt)|(ValueFromDoorReport) 
```

有没有办法在不执行 SQL 数学运算的情况下做到这一点？有时它很复杂......我完全不知道如何做到这一点。各个数据集报告运行良好，但我无法将它们总结在一个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:40:18.327

考虑一个子报表。创建它以提供您需要的摘要，然后将其放入任何其他报告的报告页眉或页脚中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:44:20.047

我最终在后台打开了每个组的所有摘要报告，并在我的总摘要中使用

```
IsError([Reports]![GroupOneSumm]![SumPercent], 1, [Reports]![GroupOneSumm]![SumPercent])
IsError([Reports]![GroupTwoSumm]![SumPercent], 1, [Reports]![GroupTwoSumm]![SumPercent]) 
```

对于其他报告中的每个总和，依此类推。不优雅，但它的工作。我可以将其称为“功能”，摘要还会在其他窗口中向您显示详细信息...这`IsError()`是因为如果其他报告之一没有数据，它会在`[SumPercent]`. 由于它是空的，它的评级是 100%，因此`], 1, [`.

# c# - 使用 SqlTransaction 处理数千条 SqlCommand 导致内存异常

> ID：11675430
> 
> 赞同：1
> 
> 时间：2012-07-26T18:12:03.203
> 
> 标签：c#, sql-server, out-of-memory, sqltransaction

我在标准 C# windows 窗体应用程序中使用 SQL Server 2008 Express 数据库编写了自定义复制功能。它基本上拉下一组需要针对订阅者数据库执行的 sql 语句。在完全刷新时，这可以运行多达 200k+ 条需要执行的语句。

我在代码块中处理这些语句，如下所示：

```
using (SqlConnection connection = ConnectionManager.GetConnection())
{
     connection.Open();

     SqlTransaction transaction = connection.BeginTransaction();

     // Process 200k+ Insert/Update/Delete statements using SqlCommands

     transaction.Commit
} 
```

我发现，对于前 30k 条语句，我的应用程序内存使用量保持在 40mb 左右，相当稳定。之后它似乎突然跳到 300mb 左右，然后增长，直到我遇到 OutOfMemory 异常。

我使用的方法是否可行，我可以在单个事务中处理那么多语句吗？我认为我应该能够做到这一点。如果有更好的方法，我很乐意来这里。我需要这是事务性的，否则部分复制会导致数据库损坏。

谢谢。

编辑：

重新启动计算机后，我设法完成了完整的 200k+ 复制。尽管在复制完成后内存使用量曾一度增长到 1.4Gb，但内存使用量一直下降到 40mb。这使我得出结论，我的循环中处理命令的某些东西可能会导致内存增长。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:21:46.383

你是你`Disposing`的表格和关闭前的一次性控件吗？

## [将所有 Disposable 对象包装在 Using 语句中。点击这里查看更多详情](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## **[不要一遍又一遍地打开/关闭连接，而是在单个事务中将数据发送到数据库。点击这里查看更多详情](http://www.sqlteam.com/article/introduction-to-transactions)**

* * *

## [仍然您的应用程序占用太多内存，那么您需要像 Red Gate Ants Memory Profiler 这样的 Doctor。单击此处查看有关它的更多详细信息](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)

## ![在此处输入图像描述](../Images/e0689dc1b40949d9ee45d7cc95674507.png)

* * *

> 我可以在一个事务中处理那么多语句吗？

您有以下选项可以执行此操作...

1.  批量插入和操作`Stored Proc`.
2.  准备`XML`并发送字符串`Database`。
3.  `DataTable`通过 Stored Proc 在 Sql Server 中发送只读

## 样本存储过程

```
Begin Try
    Set NoCount ON
    Set XACT_Abort ON
    Begin TRan
        --Your queries
    Commit Tran

Begin Tran

Begin Catch
    Rollback Tran
End Catch 
```

确保`Dispose`物品一旦不使用。

* * *

应该是这样的

```
using (SqlConnection connection = new SqlConnection())
{
    connection.Open();
    using (SqlTransaction transaction = connection.BeginTransaction())
    {
        transaction.Commit();
    }
} 
```

你也验证了`SqlCommand`吗？

```
using (SqlCommand cmd = new SqlCommand())
{
} 
```

# c++ - 使用共享指针释放类中的资源

> ID：11675433
> 
> 赞同：3
> 
> 时间：2012-07-26T18:12:13.107
> 
> 标签：c++, oop

我有一个像下面这样的类：

```
class A {
  SuperHugeClass* s;
public:
  A(){ s = new SuperHugeClass(); }
}; 
```

因为`SuperHugeClass`占用大量内存，我对默认构造函数和赋值运算符提供的浅拷贝没问题。但是，我也不想泄漏内存，所以我需要`delete s`，但我必须小心它，否则我会多次删除它。

一种方法是通过`s`如下引用计数：

```
class A {
  int* refcount;
  SuperHugeClass* s;

public:
  A(){
    refcount = new int(1);
    s = new SuperHugeClass();
  }

  A(const A& other) : refcount(other.refcount), s(other.s) {
    (*refcount)++;
  }

  ~A() {
     (*refcount)--;
     if (!(*refcount)) {
       delete refcount;
       delete s;
     }
   }

  friend void swap(const A& a, const A& aa) {
    std::swap(a.refcount, aa.refcount);
    std::swap(a.s, aa.s);
  }

  A& operator=(A other) {
    swap(*this, other);
    return (*this);
  }
}; 
```

这是我第一次需要做这样的事情，但在我看来这应该是相当标准的，所以应该有一个“规范”的解决方案。有没有其他方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:14:43.743

使用 std::shared_ptr

```
class A {
  std::shared_ptr<SuperHugeClass> s;
public:
  A()
  : s(new SuperHugeClass())
  {
  }
}; 
```

就是这样。默认生成的复制构造函数/赋值运算符/析构函数正是您需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T18:14:01.647

使用`std/boost::shared_ptr`而不是您的引用计数指针。

# .net - 标签中显示的 ArgumentException 消息

> ID：11675434
> 
> 赞同：0
> 
> 时间：2012-07-26T18:12:17.793
> 
> 标签：.net, asp.net-mvc-3, c#-4.0, argumentexception

```
 public void DeleteUser(User user)
    {
        if (!UserExists(user))
            throw new ArgumentException("User doesn't exist!");
        else
        {
            MatrixDb.Users.Remove(user);
            MatrixDb.SaveChanges();
        }
    } 
```

我想在页面上以适当的方式显示“ArgumentException”消息；我希望它在 ValidationSummary Helper 或标签中，这样当用户面对它时，它们不会被发送到**“/”应用程序中的“服务器错误**”页面，而是在某些控制器中显示错误，如标签或文本字段。

这甚至可能吗？因为在引发 ArgumentException 时显示的服务器页面上，确实在那里显示了该消息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:17:45.540

控制器：

```
 [HttpPost]
    public ActionResult Test(User user)
    {

        try
        {
            Delete(user);
        }
        catch (Exception e)
        {
            ViewData["error"] = e.Message; //ViewBag.error = e.Message can be used too        
        }
        return View();
    } 
```

看法：

```
@if (ViewData["error"] != null) //ViewBag.error != null  
{
   <h2>@ViewData["error"].ToString()</h2> //@ViewBag.error.ToString() if ViewBag is used
} 
```

# java - Android：给webview圆角？

> ID：11675436
> 
> 赞同：20
> 
> 时间：2012-07-26T18:12:22.360
> 
> 标签：java, android, rounded-corners

我试图给我的 webView 圆角。

这是我的代码：

rounded_webview.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" android:padding="10dp">
 <solid android:color="#000"/>
    <corners
     android:bottomRightRadius="15dp"
     android:bottomLeftRadius="15dp"
  android:topLeftRadius="15dp"
  android:topRightRadius="15dp"/>
</shape> 
```

这是我的网络视图：

```
<WebView
        android:id="@+id/webView1"
        android:layout_width="293dp"
        android:layout_height="142dp"
        android:layout_gravity="center_horizontal"
        android:padding="5dip"
        android:background="@drawable/rounded_webview"/> 
```

但它根本行不通！角不是圆的...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-13T02:08:09.070

这是 Webview 的一个小怪癖，它有一个默认的白色背景颜色，绘制在任何可绘制对象的前面。您需要使用以下代码使其透明并显示您的可绘制背景：

```
WebView webview = (WebView)findViewById(R.id.webView1);        
webview.setBackgroundColor(0); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-19T09:07:18.150

唯一的方法是用其他视图（例如 FrameLayout）包装 WebView 元素，并在外部视图上应用圆角背景。例子：

```
<FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="10dip"
        android:paddingBottom="10dip"
        android:paddingLeft="1dip"
        android:paddingRight="1dip"
        android:background="@drawable/white_rounded_area"
        >
    <WebView
            android:id="@+id/web_view"
            android:layout_width="300dip"
            android:layout_height="400dip"
            android:layout_gravity="center"
            />
</FrameLayout> 
```

*其中**paddingTop**和**paddingBottom**等于**drawable/white_rounded_area**的半径， **paddingLeft**和**paddingRight**等于笔划宽度**drawable/white_rounded_area**。*

这种方法的缺点是顶部和底部的圆形面板可以与 WebView 内的网页具有不同的背景颜色，尤其是在页面滚动时。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-12T19:16:54.200

您可以使用 CardView 来包含 webview，您只需要添加您想要的角半径`app:cardCornerRadius`：

```
 <android.support.v7.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:cardCornerRadius="10dp">                    // HERE

            <WebView
                android:id="@+id/webView"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

    </android.support.v7.widget.CardView> 
```

就这样

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-26T18:18:59.017

试试这个

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
         android:shape="rectangle" >

    <corners 
       android:bottomRightRadius="10dp" android:bottomLeftRadius="10dp" 
       android:topLeftRadius="10dp" android:topRightRadius="10dp"/>

      <stroke
        android:color="@drawable/black"
        android:width="3dp"/>

</shape> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T14:20:44.783

我使用了一个看起来像相框的图像，我给相框加上了圆角。我把这个相框**放在**我试图给圆角的视图上。

这[解决了 iBog 的](https://stackoverflow.com/a/12491587/383414)背景面板解决方案中的问题。

* * *

诀窍是使用`RelativeLayout`; 把你的布局放在里面。在您的布局下方，添加另一个`ImageView`，将其设置`background`为合适的遮罩图像框架。这会将其绘制在您的其他布局之上。

在我的例子中，我制作了一个灰色背景的 9Patch 文件，并从中切出一个透明的圆角矩形。

![框架](../Images/8031bee69e55a91220d2dd3b53d13025.png)

这为您的底层布局创建了完美的掩码。

XML 代码可能是这样的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content" android:layout_width="fill_parent">

    <!-- ... INSERT ANY VIEW HERE ... -->

    <!-- FRAME TO MASK UNDERLYING VIEW -->
    <ImageView android:layout_height="fill_parent" 
        android:layout_width="fill_parent" 
        android:background="@drawable/grey_frame"
        android:layout_alignTop="@+id/mainLayout"
        android:layout_alignBottom="@+id/mainLayout" />

</RelativeLayout> 
```

* * *

完整的详细信息可以在我的原始答案中找到：

*   [Android XML 圆角剪裁](https://stackoverflow.com/a/8313096/383414)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-18T13:19:40.480

没有一个解决方案对我有用。它对我有用。在加载数据之前，您需要设置

```
webView.getSettings().setUseWideViewPort(true); 
```

并应用您在 XML 文件中可绘制。

它对我有用。

# jdbc - 在 Coldfusion 中使用 3rd 方 JDBC 驱动程序？

> ID：11675437
> 
> 赞同：1
> 
> 时间：2012-07-26T18:12:26.150
> 
> 标签：jdbc, coldfusion

我正在尝试在我的 Coldfusion 安装中使用 3rd 方 JDBC 驱动程序，但我在某个地方出错了，我不确定在哪里。

我将 .jar 文件放在 cfusion\wwwroot 以及 WEB-INF\lib 中，但没有将其添加到我的数据源中，因为我不确定是否必须/如何，因为它是本地文件.

然后，在我的 test.cfm 文件中，我添加了以下代码：

```
<cfset objDriver = createObject("java","java.sql.DriverManager")>
<cfset prop = createObject("java","java.util.Properties").init()>

<cfset prop.put("prop1", "prop1")>
<cfset prop.put("prop2", "prop2")>
<cfset prop.put("prop3", "prop3")>

<cfset conn = objDriver.getConnection("jdbc:mydriver:", prop) > 
```

我验证了属性和连接在 Java 中工作正常，所以这不是问题，但是当我转到该页面时，我在 getConnection() 上收到以下错误：

```
No suitable driver found for jdbc:mydriver: 
```

我想知道我是否错过了一些明显或愚蠢的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T19:49:02.297

我会将其添加到数据源中。否则，您最终将编写丑陋的 Java 代码来“绕过”驱动程序。

要添加到 DSN，请使用“其他”数据源并添加“连接字符串”。这些是驱动程序的具体说明，您应该有一些与您下载的驱动程序相关的示例。它们是一个很好的起点。

您可以通过检查 CF 安装的 /lib 目录中的“neo-datasources.xml”文件来查看已添加的其他数据源的字符串。

您需要确保驱动程序位于旧版本 CF 上 CF 安装的 /lib 目录中（与 WEB-INF/Lib 不同） - 不确定 CF 10。您还需要在放入 CF 后重新启动它目录。

或者，您可以通过编辑 jvm 配置文件将文件添加到类路径。

# java - 如何在 JSP 或 Servlet 中进行 POST？

> ID：11675439
> 
> 赞同：1
> 
> 时间：2012-07-26T18:12:26.663
> 
> 标签：java, jsp, servlets

> **可能重复：**
> [如何使用 java.net.URLConnection 来触发和处理 HTTP 请求？](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

我需要从我的 servlet 对外部 URL 进行 http post 调用。而且我还需要在消息中添加一些自定义的 http 标头。这可能吗 ？请给我一个指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:18:37.480

您可以尝试 apache HttpClient 库。

# java - 在 Android 中同步任务

> ID：11675445
> 
> 赞同：0
> 
> 时间：2012-07-26T18:12:49.527
> 
> 标签：java, android, asynchronous

在我的应用程序中，我有多个地方可以调用 AsyncTask 以连接到 Web、下载内容等。它可以来自 Activity 或来自后台服务。

存在各种问题，因为我正在读取和写入 SQLite 数据库，并且当多个任务在类似操作上重叠时（假设 GetMail 在后台运行并且用户手动启动它）。

我想同步这些任务的类型并编写这样的代码。我不知道如何测试它，它似乎运行正常，但我想得到你的意见，如果它是有效的..

```
public enum AsyncTasks
{
    GetMail,
    PostMail,
}
public class MyApplication extends Application
{
    private final ArrayList<AsyncTasks> mLockedAsyncTasks = new ArrayList<AsyncTasks>();

    public boolean lockAsyncTask(AsyncTasks task)
    {
        synchronized (mLockedAsyncTasks)
        {
            if (!mLockedAsyncTasks.contains(task)) 
            {
                mLockedAsyncTasks.add(task);
                return true;
            }

            return false;            
        }        
    }

    public void unlockAsyncTask(AsyncTasks task)
    {
        synchronized (mLockedAsyncTasks)
        {
            if (mLockedAsyncTasks.contains(task))
            {
                mLockedAsyncTasks.remove(task);
            }
        }
    }
} 
```

这里的想法是我正在打电话`lockAsyncTask`，如果成功 - 我继续 HTTP 的东西，否则跳过，因为它已经在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:25:48.947

仅使用由单个工作线程支持的操作队列可能更容易。这样，所有任务都将按照收到的顺序运行。您可以使用[`Executors`](http://developer.android.com/reference/java/util/concurrent/Executors.html)工厂方法轻松完成此操作。这是一个简单的例子：

```
private static final ExecutorService mThreadPool =
        Executors.newSingleThreadExecutor();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mThreadPool.execute(new Runnable() {
        public void run() {
            // Do some work here...
        }
    });

    mThreadPool.execute(new Runnable() {
        public void run() {
            // Do some additional work here after
            // the first Runnable has finished...
        }
    });
} 
```

# c# - KeyEventArgs 到 VirtualKeyCode

> ID：11675446
> 
> 赞同：0
> 
> 时间：2012-07-26T18:12:54.777
> 
> 标签：c#, .net, keyboard, sendinput

我正在尝试使用[WindowsInputSimulator 库](http://inputsimulator.codeplex.com/)来帮助我模拟按键。

该软件将由客户端和服务器组成。当在客户端输入一个键时，它的 KeyEventArgs 被发送到服务器。然后服务器对其执行以下操作：

```
public void SendKeyDown(Keys keyCode, Keys modifiers)
{
  uint nonVK = MapVirtualKey((uint)keyCode, 2);
  char mappedChar = Convert.ToChar(nonVK);
  if (modifiers.Equals(Keys.None))
  {
    VirtualKeyCode vkc;
    if (Enum.TryParse(VkKeyScan(mappedChar).ToString(), out vkc))
    {
      InputSimulator.SimulateKeyDown(vkc);
    }
  }
  else
  {
    //Find out which modifier we're working with.
    uint modVK = MapVirtualKey((uint)modifiers, 2);
    char modifierChar = Convert.ToChar(modVK);
    VirtualKeyCode vkc, modVkc;
    if (Enum.TryParse(VkKeyScan(mappedChar).ToString(), out vkc)
        && Enum.TryParse(VkKeyScan(modifierChar).ToString(), out modVkc))
    {
      InputSimulator.SimulateModifiedKeyStroke(modVkc, vkc);
    }
  }
} 
```

这适用于单键。但是，我也在尝试使用修饰键，但遇到了一些麻烦。例如，按 SHIFT + K 会产生“k2”，这让我相信我转换为 VirtualKeyCodes 的过程很不可靠，或者是其他什么东西。

另外，在发送这些命令时，我应该只捕获 KeyDown / KeyUp 事件吗？还是我也应该注意 KeyPress 事件？我应该也可以使用箭头键和非字符键，这让我觉得我应该忽略 KeyPress。

编辑：另外，当我使用多个修饰符时，我怎么知道？我应该如何将它们串在一起？

想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:22:21.160

我能够让它与以下内容一起工作。请记住，这适用于 SINGLE 修饰符和单个 CHARACTER。特殊字符尚不适用于此代码，但我认为这是朝着正确方向迈出的一步，并回答了我的直接问题。

```
 public void SendKey(int keyValue, Keys modifiers)
    {
        VirtualKeyCode key;
        if (modifiers.Equals(Keys.None))
        {
            if (Enum.TryParse(VkKeyScan(((char)keyValue)).ToString(), out key))
            {
                InputSimulator.SimulateKeyDown(key);
                InputSimulator.SimulateKeyUp(key);
            }   
        }
        else if (modifiers.Equals(Keys.Shift) && keyValue >= (int)Keys.A && keyValue <= (int)Keys.Z)
        {
            if (Enum.TryParse(VkKeyScan(((char) keyValue)).ToString(), out key))
            {
                InputSimulator.SimulateModifiedKeyStroke(VirtualKeyCode.SHIFT, key);
            }
        }
        else if (modifiers.Equals(Keys.Control) && keyValue >= (int)Keys.A && keyValue <= (int)Keys.Z)
        {
            if (Enum.TryParse(VkKeyScan(((char)keyValue)).ToString(), out key))
            {
                InputSimulator.SimulateModifiedKeyStroke(VirtualKeyCode.CONTROL, key);
            }
        }
        else if (modifiers.Equals(Keys.Alt) && keyValue >= (int)Keys.A && keyValue <= (int)Keys.Z)
        {
            if (Enum.TryParse(VkKeyScan(((char)keyValue)).ToString(), out key))
            {
                //Alt is named MENU for legacy purposes.
                InputSimulator.SimulateModifiedKeyStroke(VirtualKeyCode.MENU, key);
            }
        }

    } 
```

# ios - 在 NSFetchedResultsChangeInsert 之后重新加载表

> ID：11675447
> 
> 赞同：1
> 
> 时间：2012-07-26T18:12:57.943
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsfetchrequest

[这是关于我在此之前提出](https://stackoverflow.com/questions/11652208/do-i-need-a-second-nsfetchedresultscontroller)的 NSFetchedResultsChangeInsert 问题的下一个问题

以下代码是我在 NSFetchedResultsController 委托中使用的代码。更新和删除工作得很好，除非我尝试将新对象添加到我的模型中。

```
case NSFetchedResultsChangeInsert:
           [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            [self configureCell:[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.row inSection:1]] atIndexPath:[NSIndexPath indexPathForRow:indexPath.row inSection:1]];            
            break; 
```

我的问题是：插入后如何更新表格视图？当我点击保存时，会创建新对象。但是该表不会相应地更新。我到处都试过了

```
[self.tableView reloadData]; 
```

我还尝试在 ViewWillAppear 和 ViewDidAppear 中调用 perfomFetch：

```
NSError *error = nil;
if (![_fetchedResultsController performFetch:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
} 
```

但是在我重新启动应用程序之前，表格不会更新。我花了 4 个小时寻找答案，但我被卡住了。任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:18:57.017

There should be no need to call `configureCell:` for an insert event, `[tableView insertRowsAtIndexPaths:...]` is sufficient. The table data source method `cellForRowAtIndexPath:` will be called to get the new cell.

Also, `indexPath == nil` for insert events, therefore your `configureCell:` call cannot work.

The important point is to call `[tableView beginUpdates]` in `controllerWillChangeContent:` and `[tableView endUpdates]` in `controllerDidChangeContent:`.

# kml - 将 SHAPEFILE (SHP) 转换为 KML 以用于谷歌融合表

> ID：11675448
> 
> 赞同：0
> 
> 时间：2012-07-26T18:12:59.353
> 
> 标签：kml, google-fusion-tables, shapefile

我正在使用[http://www.zonums.com/shp2kml.html](http://www.zonums.com/shp2kml.html)将 SHP 文件转换为 KML 以集成到 Google Fusion Tables 中。我可以用许多 shp 文件成功地做到这一点，但我对一个特定的 SHP 文件有一个特殊的问题。

[http://www.electionsquebec.qc.ca/documents/zip/shapefile-sections-de-vote-elections-generales-2008.zip](http://www.electionsquebec.qc.ca/documents/zip/shapefile-sections-de-vote-elections-generales-2008.zip)

当我创建 KML 文件并在 Google 地球中打开它时，实际边界位于太平洋某处（而不是实际勾勒出魁北克省的轮廓）。形状很好，只是整个实际形状转移到了太平洋。我想知道它是否与UTM..或与坐标有关。我尝试了不同的区域，不同的基准......没有任何效果。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:09:46.803

我对 w/shp2kml 不熟悉，但根据主页，它可以接受 Lat/Lng 或基于 UTM 的投影。然而，有问题的 shapefile 位于 Lambert 等面积投影中，我认为它不受支持（查看 .prj 文件以查看详细信息）。

如另一个答案中所述，shpescape.com 应该适用于这个用例——它使用 proj4 库进行转换，并且支持这种投影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:47:36.577

我使用了[shpescape](http://www.shpescape.com/)，它给了我[这个](https://www.google.com/fusiontables/DataSource?snapid=S597005TUVP)对我来说很合适的东西。你一定在 shp2kml 上做错了什么。

# html - 带有 colspan 的 Bootstrap 嵌套内表

> ID：11675452
> 
> 赞同：0
> 
> 时间：2012-07-26T18:13:13.920
> 
> 标签：html, css, twitter-bootstrap

对于这个 Bootstrap 样式表，我希望三列（Sub1、Sub2、Sub3）的宽度增加并与嵌套表中的相应列对齐。

[http://jsfiddle.net/jamesholcomb/r55Zc/](http://jsfiddle.net/jamesholcomb/r55Zc/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:20:30.843

而不是使用嵌套`<table>`，只需使用`rowspan`第一列上的属性。边框（和一些填充）可以使用一些创意 CSS（[示例](http://jsfiddle.net/r55Zc/24/)）删除：

## CSS

```
th { text-align: center; }

tbody td {
    border-width: 0 !important;
    padding-top:0 !important;
}

tbody tr th ~ td {
    border-top-width: 1px !important;
    padding-top:8px !important;
}

tbody tr td:first-of-type {
    border-left-width: 1px !important;
} 
```

## HTML

```
<div class="row">
    <div class="span*">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th colspan="3">Col1</th>
                </tr>
                <tr>
                    <th></th>
                    <th>Sub1</th>
                    <th>Sub2</th>
                    <th>Sub3</th>
                </tr>    
            </thead>
            <tbody>
                <tr>
                    <th rowspan="3">Row1</th>
                    <td>[-01234543333545]</td>
                    <td>[4567]</td>
                    <td>[1]</td>
                </tr>
                <tr>
                    <td>[1]</td>
                    <td>[456.789]</td>
                    <td>[2]</td>
                </tr>
                <tr>
                    <td>[0]</td>
                    <td>[1]</td>
                    <td>[0000789.0123]</td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:13:20.130

If you want the entire row to highlight correctly, I suggest you tweak your table as others have suggested. However, instead of creating multiple trs and giving the td a rowspan of 3 (which causes row highlighting problems), just list the data in the td as an unordered list and make some adjustments to the css.

Table:

```
<div class="row">
<div class="span*">
<table class="table table-bordered">
<thead>
    <tr>
        <th></th>
        <th colspan="3">Col1</th>
    </tr>    
</thead>
<tbody>
    <tr>
        <td></td>
        <td>Sub1</td>
        <td>Sub2</td>
        <td>Sub3</td>
    </tr>
    <tr>

        <td>Row1</td>
        <td><ul><li>[-01234543333545]</li><li>[1]</li><li>[0]</li></ul></td>
        <td><ul><li>[4567]</li><li>[456.789]</li><li>[1]</li></ul></td>
        <td><ul><li>[1]</li><li>[2]</li><li>[0000789.0123]</li></ul></td>      

    </tr>
</tbody>
</table>
</div>
</div> 
```

CSS:

```
td > ul {
  list-style-type:none;
  margin:0;        
} 
```

Here is the updated [fiddle](http://jsfiddle.net/r55Zc/23/) forked from @Mr.Alien's suggestions.

# templates - Jade - 从不同目录加载模板

> ID：11675453
> 
> 赞同：19
> 
> 时间：2012-07-26T18:13:24.853
> 
> 标签：templates, node.js, express, pug

我正在尝试处理 Peepcode 的 Node.js Full Stack 视频，似乎他们使用的是旧版本的 express/jade。没有提到使用块/扩展来渲染布局。

应用程序中使用的设置是为所有子应用程序加载一个 /views/layout.jade 文件。子应用的视图位于 /apps//views。

我的 server.js 看起来很标准。Express 是 3.0.0rc1 版本

```
require('coffee-script');

var express = require('express')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

require('./apps/authentication/routes')(app)

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

我的子应用程序的路由文件位于 /apps/authentication/routes

路线.咖啡

```
routes = (app) ->

  app.get "/login", (req,res) ->
    res.render "#{__dirname}/views/login",
      title: "Login"
      stylesheet: 'login'

module.exports = routes 
```

我打算为此渲染的视图。

登录.jade

```
extends layout

block content
  form(action='/sessions', method='post')
    label
      | Username
      input(type='text', name='user')
    label
      | Password 
      input(type='password', name='password)
    input(type='submit', name='Submit') 
```

最后是布局。

```
doctype 5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/#{stylesheet}.css')
  body
    block content 
```

转到 localhost:3000/login 会呈现以下内容：

Express 500 错误：/Users/StevenNunez/code/HotPie/apps/authentication/views/login.jade:1 > 1| 扩展布局 2| 3| 阻止内容 4| form(action='/sessions', method='post') ENOENT，没有这样的文件或目录 '/Users/StevenNunez/code/HotPie/apps/authentication/views/layout.jade'

我的文件夹结构：

```
.
├── '
├── apps
│   └── authentication
│       ├── routes.coffee
│       └── views
│           └── login.jade
├── package.json
├── public
├── server.js
└── views
    ├── index.jade
    └── layout.jade 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-26T20:54:01.190

看起来我只需要在`extends`调用中给出相对路径。

```
extends ../../../views/layout

block content
  form(action='/sessions', method='post')
    label
      | Username
      input(type='text', name='user')
    label
      | Password
      input(type='password', name='password')
    input(type='submit', name='Submit') 
```

我不必设置`app.set('view options',{layout:false});`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-21T06:09:22.363

您可以使用变量`__dirname`来连接来自其他目录的视图。

例子：

```
app.get('/otherurl/' , (req, res) => { 
  res.render(`${__dirname}/../other_project/views/index`) 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T19:12:27.470

您正在尝试使用两种渲染方法...第一个布局扩展布局，第二个是块内容。使用布局时，您将自动扩展`login.jade`.

没有必要使用`extends`也不能使用`block`句子，但是如果你想使用`extends`你必须禁用布局。

将此添加到应用程序：

```
app.set('view options',{layout:false}); 
```

后

```
app.set('view engine', 'jade'); 
```

并扩展文件，如布局扩展：

**布局.jade**

```
doctype 5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/#{stylesheet}.css')
  body
    block content 
```

**登录.jade**

```
extends layout

block content
  form(action='/sessions', method='post')
    label
      | Username
      input(type='text', name='user')
    label
      | Password 
      input(type='password', name='password)
    input(type='submit', name='Submit') 
```

登录文件必须在同一个目录中。如果你想调用其他布局，你可以像这样使用目录：

```
appDirectory
  views
    layout
  otherViews
    login 
```

**登录.jade**

```
extends ../views/layout    
block content
  form(action='/sessions', method='post')
    label
      | Username
      input(type='text', name='user')
    label
      | Password 
      input(type='password', name='password)
    input(type='submit', name='Submit') 
```

# vba - 如何在 VBA 中解析 URL 参数？

> ID：11675454
> 
> 赞同：1
> 
> 时间：2012-07-26T18:13:27.077
> 
> 标签：vba

我正在尝试在 VBA 中解析 URL 中的参数。例如：

[https://www.google.com/webhp?q=vba+url+parameters&utf_source=stackoverflow](https://www.google.com/webhp?q=vba+url+parameters&utf_source=stackoverflow)

我正在寻找类似哈希表的东西，其中 q 映射到“vba+url+parameters”，utf_source 映射到“stackoverflow”。

是否有现有的数据结构/功能？还是我需要自己构建一些东西来解析它？我查看了 MSHTML 库，找不到任何明显的东西，而 MSHTML.HTMLAnchorElement.href 属性只返回一个字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T18:25:42.930

我编写了一个通用的 Parse 函数，它适用于连接字符串、URL 和其他键值类型的字符串。以下是它的工作原理：

```
Sub TestParse()
Dim s As String

    s = "https://www.google.com/webhp?q=vba+url+parameters&utf_source=stackoverflow"
    Debug.Print Parse(s, "q", vbString, "=", "&")
    Debug.Print Parse(s, "utf_source", vbString, "=", "&")

End Sub 
```

输出：

```
vba+url+parameters
stackoverflow 
```

这是功能：

```
'---------------------------------------------------------------------------------------
' Procedure : Parse
' DateTime  : 7/16/2009 11:32
' Author    : Mike
' Purpose   : Parse a string of keys and values (such as a connection string) and return
'               the value of a specific key.
' Usage     - Use to pass multiple arguments to forms via OpenArgs in MS Access
'           - Keep multiple arguments in the Tag property of forms and controls.
'           - Use to parse a user-entered search string.
' Notes     - Defaults to using connection string formatted key-value pairs.
'           - Specifying a ReturnType guarantees the type of the result and allows the
'               function to be safely called in certain situations.
'  7/23/09  : Modified to allow the use of a literal space as a delimiter while allowing
'               values to have spaces as well. 
'---------------------------------------------------------------------------------------
'
Function Parse(Txt As Variant, Key As String, _
               Optional ReturnType As VbVarType = vbVariant, _
               Optional AssignChar As String = "=", _
               Optional Delimiter As String = ";") As Variant    
Dim StartPos As Integer, EndPos As Integer, Result As Variant
    Result = Null
    If IsNull(Txt) Then
        Parse = Null
    ElseIf Len(Key) = 0 Then
        EndPos = InStr(Txt, AssignChar)
        If EndPos = 0 Then
            Result = Trim(Txt)
        Else
            If InStrRev(Txt, " ", EndPos) = EndPos - 1 Then
                EndPos = InStrRev(Txt, Delimiter, EndPos - 2)
            Else
                EndPos = InStrRev(Txt, Delimiter, EndPos)
            End If
            Result = Trim(Left(Txt, EndPos))
        End If
    Else
        StartPos = InStr(Txt, Key & AssignChar)
        'Allow for space between Key and Assignment Character
        If StartPos = 0 Then
            StartPos = InStr(Txt, Key & " " & AssignChar)
            If StartPos > 0 Then StartPos = StartPos + Len(Key & " " & AssignChar)
        Else
            StartPos = StartPos + Len(Key & AssignChar)
        End If
        If StartPos = 0 Then
            Parse = Null
        Else
            EndPos = InStr(StartPos, Txt, AssignChar)
            If EndPos = 0 Then
                If Right(Txt, Len(Delimiter)) = Delimiter Then
                    Result = Trim(Mid(Txt, StartPos, _
                                      Len(Txt) - Len(Delimiter) - StartPos + 1))
                Else
                    Result = Trim(Mid(Txt, StartPos))
                End If
            Else
                If InStrRev(Txt, Delimiter, EndPos) = EndPos - 1 Then
                    EndPos = InStrRev(Txt, Delimiter, EndPos - 2)
                Else
                    EndPos = InStrRev(Txt, Delimiter, EndPos)
                End If
                If EndPos < StartPos Then
                    Result = Trim(Mid(Txt, StartPos))
                Else
                    Result = Trim(Mid(Txt, StartPos, EndPos - StartPos))
                End If
            End If

        End If
    End If
    Select Case ReturnType
    Case vbBoolean
        If IsNull(Result) Or Len(Result) = 0 Or Result = "False" Then
            Parse = False
        Else
            Parse = True
            If IsNumeric(Result) Then
                If Val(Result) = 0 Then Parse = False
            End If
        End If

    Case vbCurrency, vbDecimal, vbDouble, vbInteger, vbLong, vbSingle
        If IsNumeric(Result) Then
            Select Case ReturnType
            Case vbCurrency: Parse = CCur(Result)
            Case vbDecimal: Parse = CDec(Result)
            Case vbDouble: Parse = CDbl(Result)
            Case vbInteger: Parse = CInt(Result)
            Case vbLong: Parse = CLng(Result)
            Case vbSingle: Parse = CSng(Result)
            End Select
        Else
            Select Case ReturnType
            Case vbCurrency: Parse = CCur(0)
            Case vbDecimal: Parse = CDec(0)
            Case vbDouble: Parse = CDbl(0)
            Case vbInteger: Parse = CInt(0)
            Case vbLong: Parse = CLng(0)
            Case vbSingle: Parse = CSng(0)
            End Select
        End If

    Case vbDate
        If IsDate(Result) Then
            Parse = CDate(Result)
        ElseIf IsNull(Result) Then
            Parse = 0
        ElseIf IsDate(Replace(Result, "#", "")) Then
            Parse = CDate(Replace(Result, "#", ""))
        Else
            Parse = 0
        End If

    Case vbString
        Parse = Nz(Result, vbNullString)

    Case Else
        If IsNull(Txt) Then
            Parse = Null
        ElseIf Result = "True" Then
            Parse = True
        ElseIf Result = "False" Then
            Parse = False
        ElseIf IsNumeric(Result) Then
            Parse = Val(Result)
        Else
            Parse = Result
        End If
    End Select
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:16:50.217

我认为您想要的是[Dictionary](http://msdn.microsoft.com/en-us/library/office/aa164502%28v=office.10%29.aspx)对象。

您可以提取问号右侧的所有内容，并将值添加到字典中。

# .net - 将 Dapper 添加到企业库？

> ID：11675467
> 
> 赞同：3
> 
> 时间：2012-07-26T18:14:17.943
> 
> 标签：.net, orm, enterprise-library, dapper

我们将企业库用作标准 DAL。现在，我想享受 Dapper 带来的好处。查看实现它只是扩展连接类。

是否可以将 Dapper 设置为扩展 Enterprise Library 以便我们可以享受这两个世界？或者也许有人已经创建了这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T17:46:14.050

是的，这是可以想象的，而且效果很好。我们使用 Dapper 来补充一些较旧的 EntLib 代码，简单的查询既快速又轻松。最大的挑战是让事务正常工作。您没有提及您使用的是哪个版本的 EntLib，但 4.0 和更新版本管理 TransactionScopes 内部的连接，因此如果您尝试使用 EntLib 在范围内为 Dapper 打开另一个连接，它将自动从轻量级本地事务升级到 DTC （分布式事务协调器）。EntLib 并没有真正提供获取当前打开连接的方法，因此您必须从 Database 类派生并公开 GetOpenConnection 方法。

```
public class EntLibDatabaseWrapper : Database
{
    // ...Constructor and overrides...

    public IDbConnection GetMyOpenConnection()
    {
        var connectionWrapper = GetOpenConnection();
        return connectionWrapper.Connection;
    }
} 
```

然后像这样使用它：

```
var db = DatabaseFactory.CreateDatabase();
var dbWrapper = new EntLibDatabaseWrapper(db.ConnectionString, db.DbProviderFactory);

using (var scope = new TransactionScope())
{
    var connection = dbWrapper.GetMyOpenConnection();

    try
    {
        // Insert a test value using dapper
        var fooId = 
            connection.Query<int>("insert into Foo values (name = @name); select cast(scope_identity() as int", 
                                    new { name = "Foo" }).Single();
        // Insert a test value using Enterprise Library
        var cmd =
            db.GetSqlStringCommand(
                "insert into Foo values (name = 'Bar'); select cast(scope_identity() as int)");
        var barId = int.Parse(db.ExecuteScalar(cmd));
        scope.Complete();
    }
    catch (Exception)
    {
        connection.Close();
        throw;
    }
} 
```

如果您有更大的事务范围，那么您必须在关闭每个连接之前检查您是否处于活动事务中。

```
if(Transaction.Current == null)
     connection.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:27:19.760

如果只能使用 Dapper，为什么还要使用 Enterprise Library？您可以执行查询，而不是使用 DataSet 和 DataReaders，这些查询会返回强类型映射对象。

# java - 建立新的服务领导并通知领导

> ID：11675468
> 
> 赞同：0
> 
> 时间：2012-07-26T18:14:30.890
> 
> 标签：java, apache-zookeeper, distributed-system, jgroups

我有一个分布式系统设计问题。问题简介是

> 我们有很多客户来服务。该服务需要具有容错性，因此它将具有许多副本。当客户端无法再访问该服务时，它将切换到副本并通知所有其他客户端将切换到同一个副本。（在副本之间进行负载平衡是不可接受的，因为副本的数据值不完全相同，但所有客户端必须始终返回相同的数据值。）

我目前的设计是让客户在未能联系到服务时要求新的服务领导。当建立一个新的服务领导者时，它将通知所有客户端使用它。

与许多分布式协调设计一样，我需要一个分布式组管理器。我正在考虑在解决方案中使用 JGroups 和/或 Apache Zookeeper。

是否有一个或多个我应该寻找的现有食谱来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:48:50.383

如果您控制服务，则让服务在它们之间进行[领导者选举](http://zookeeper.apache.org/doc/r3.4.2/recipes.html#sc_leaderElection)。客户端将监视选出的领导者的变化，并向当前的服务领导者发送请求。

如果您不控制服务，则让客户端选举一个领导者，该客户端将负责维护 zookeeper 中指向当前领导者服务的节点。所有客户端都将监视该节点，以了解哪个节点是主节点的更改。领导者客户端必须能够以某种方式检查领导者服务的健康状况。

> 但所有客户端必须始终返回相同的数据值

Zookeeper 或大多数分布式系统都无法做到这一点。服务领导者的变化传播到所有节点需要一些时间（通常只有几毫秒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:22:41.873

这对于动物园管理员来说似乎是现成的。您可以让您的客户都在一个公共 znode 上设置监视（其中将包含副本信息）。如果客户端更改了 znode，所有其他客户端将收到有关更改的一次性通知。

看看[http://zookeeper.apache.org/doc/r3.3.3/zookeeperProgrammers.html#ch_zkWatches](http://zookeeper.apache.org/doc/r3.3.3/zookeeperProgrammers.html#ch_zkWatches)

# highcharts - 如何在 Highcharts 的 y 轴上定位绘图带的标签

> ID：11675469
> 
> 赞同：2
> 
> 时间：2012-07-26T18:14:34.017
> 
> 标签：highcharts

此[链接](http://jsfiddle.net/LKtpc/2/)是我正在研究的 highcharts.com 的一个类似示例。我正在尝试将绘图带的标签放在 y 轴上。但正如您所看到的，标签在图表上重叠，这不是很好。如果我想用与相应绘图带相同的颜色为标签着色，则标签不会显示。有没有办法把它完全放在外面而不重叠？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-28T22:55:06.920

一种可能的解决方案是在图表中添加右边距，并将标签移到上面。

向图表添加一个marginRight，并在每个标签上，使用x 来确定它的起始x 位置。

```
marginRight:110 
```

和

`x: 90`在每个标签上。

[http://jsfiddle.net/7xb1Lgx6/](http://jsfiddle.net/7xb1Lgx6/)小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T01:00:35.617

我认为现在还不可能。
如果您将标签添加到绘图带，它将与它们重叠。
您可以对齐标签，但如果设置`x`的宽度超过图表宽度，它将不会出现在图表上。
[演示](http://jsfiddle.net/LKtpc/4/)

# sql-server-2008-r2 - 连接到正确的服务器实例的问题

> ID：11675478
> 
> 赞同：0
> 
> 时间：2012-07-26T18:15:25.483
> 
> 标签：sql-server-2008-r2

在我的机器上有两个 SQL Server SQLEXPRESS MSSQLSERVER 实例

我正在尝试连接到 MSSQLSERVER，但我不断收到

{“建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。未找到或无法访问服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序: SQL 网络接口，错误：25 - 连接字符串无效)"}

这是连接字符串：

```
 connectionString="data source=.\MSSQLSERVER;Integrated Security=SSPI;initial catalog=OdeToFoodDB"
         providerName="System.Data.SqlClient" 
```

我试图让服务器对远程连接可见，但它不起作用。

做 sqlcmd -L 让我：

服务器：（本地）MACHINE1 MACHINE1\SQLEXPRESS

这似乎很奇怪，因为我禁用了 SQLEXPRESS 服务，只让 MSSQLSERVER 运行。

![在此处输入图像描述](../Images/b04b5facf48ebed9c55598ae8b3b1a3b.png)

在配置管理器中，在网络配置-> MSSQLSERVER 的协议中，我启用了 TCP/IP 和命名管道，在 IP 地址中，设置如下：

![IP1 & IP2](../Images/ce973607151fa9a3d562bf03885e929a.png) ![IP3 & IP4](../Images/c2c7653c18fed3226a1aed59a7011336.png)

但是服务器仍然不能用于远程访问（netstat -nb 显示没有进程监听 1433）。我的 Windows 防火墙已关闭。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:49:54.813

如果您的 MSSQLSERVER 是标准实例，它将采用机器的名称。所以你应该尝试：

```
connectionString="data source=MACHINE1;Integrated Security=SSPI;initial catalog=OdeToFoodDB"
         providerName="System.Data.SqlClient" 
```

# python - Windows - 如何将 Python 脚本输出到当前 shell？

> ID：11675479
> 
> 赞同：0
> 
> 时间：2012-07-26T18:15:25.187
> 
> 标签：python, windows, windows-shell

> **可能重复：**
> [如何使 python 脚本在 Windows 上可执行？](https://stackoverflow.com/questions/4235834/how-to-make-python-scripts-executable-on-windows)
> [在 Windows 上设置 Python 以不在 cmd 中键入 python](https://stackoverflow.com/questions/11472843/set-up-python-on-windows-to-not-type-python-in-cmd)

我希望能够使用一个命令（即`filename -p parameter1`）执行 Python 脚本，而无需键入`python filename.py -p parameter1`. 我尝试添加 Windows shebang 行；但是，当我在命令行中执行 .\filename.py 时，它会完全打开一个新的 shell，只需要足够长的时间让输出在屏幕上闪烁，然后窗口就会关闭。有什么方法可以运行该脚本并输出到当前控制台？

此外，我能做些什么来摆脱对 .py 扩展名的需求并使其可从任何目录调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:30:53.690

设置 PATHEXT 环境变量以包含 .PY 扩展名。请参阅[http://www.voidspace.org.uk/python/articles/command_line.shtml#pathext](http://www.voidspace.org.uk/python/articles/command_line.shtml#pathext)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:06:36.457

shebang 行在 Windows 中不受尊重，尽管我仍然将它放在我的代码中，以供参考我在创建的每个脚本中使用的 Python 版本。

我建议为您在 Windows 中创建的每个 PY 脚本制作一个 BAT 文件。鉴于可以在同一系统上安装多个版本的 Python，这有助于避免版本冲突，并且可以满足您的需求：

给定“filename.py”，制作“filename.bat”。假设 python27，BAT 文件将包含：

```
@REM Need to unset "PYTHONPATH=C:\Program Files\ArcGIS\bin"
@REM so that "import zlib" can properly work.
@set PYTHONPATH=
@"C:\python27\python.exe" "C:\fullpath\to\my\file\filename.py" %* 
```

如果你想保持简单，你只需要使用最后一行。请注意，@ 符号使 BAT 文件不回显该行。%* 告诉 BAT 文件将所有参数传递给您的 python 脚本。只要 BAT 文件在您的路径中，您就可以从任何地方将其称为“filename.bat”或“filename”。

# gps - 使用 gx:track 将 kml 导入到融合表

> ID：11675481
> 
> 赞同：0
> 
> 时间：2012-07-26T18:15:30.927
> 
> 标签：gps, kml, google-fusion-tables

我正在尝试将[gpslogger](http://mendhak.github.com/gpslogger/ "全球定位系统记录器")创建的 kml 文件上传到谷歌融合表，但数据不会导入。

数据使用[gx:track](https://developers.google.com/kml/documentation/kmlreference#gxtrack)元素构建，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document><name>2012-07-25T00:43:29Z</name>
<Placemark>
<gx:Track>

<when>2012-07-25T00:43:29Z</when>
<gx:coord>-42.41141004 18.05962572 18.700000762939453</gx:coord>

<when>2012-07-25T00:45:50Z</when>
<gx:coord>-42.41167598 18.0596267 -3.100000381469727</gx:coord>

...

</gx:Track>
</Placemark></Document></kml> 
```

当我尝试上传它时，我得到 3 个空列：描述、名称和几何。

所以有什么问题？

我不熟悉这些工具，所以希望我没有犯愚蠢的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:50:16.830

[FusionTables KML 支持](https://developers.google.com/fusiontables/docs/developers_guide#KML)不包括 gx: 命名空间。要将其导入 FusionTables，您需要将其转换为“普通”KML。

# redmine - Redmine 版本 1 与 2

> ID：11675483
> 
> 赞同：-1
> 
> 时间：2012-07-26T18:15:34.170
> 
> 标签：redmine, issue-tracking

有人对Redmine的两个最新版本有任何经验吗？我对两者都是新手，并试图找出使用哪一个。谢谢。

2.0.3 (2012-06-18)

1.4.4 (2012-06-18)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:43:34.027

**1.4.4**是稳定的旧 Redmine 分支，其功能少于**2.x**分支。只有错误修正进入分支。

如果您可以选择干净的 Redmine 安装，请使用**2.0.3**版本。但是您应该查看插件，因为其中一些与 Redmine 2.x 不兼容。

# joomla2.5 - 我如何让 css3pie 在所有 Joomla 2.5 页面上工作，而不仅仅是默认页面

> ID：11675484
> 
> 赞同：0
> 
> 时间：2012-07-26T18:15:32.997
> 
> 标签：joomla2.5, css3pie

如何让 css3pie 在所有 Joomla 2.5 页面上工作？

我的 joomla 2.5 网站的第一页上有 css3pie 工作，但它不能在任何其他页面上工作。

它适用于`http://localhost/human_affairs2/`. 但不起作用`http://localhost/human_affairs2/index.php/our-program`。

据我所知，使用相同的 index.php 文件和相同的 css 文件。

这是css的一个例子。

```
.whiteBox h3,
.nivo-caption {
    -webkit-border-radius:0px 8px 8px 0px;
    -moz-border-radius:0px 8px 8px 0px; /* Firefox 3.6 and earlier */
    border-radius:0px 8px 8px 0px;

    -webkit-box-shadow: #999 1px 2px 3px;
    -moz-box-shadow: #999 1px 2px 3px;
    box-shadow: 1px 2px 3px #999;

    behavior: url(PIE.htc);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:27:53.863

你需要澄清你的问题：即。提供您的代码。我建议您查看他们网站上的文档在[此处输入链接描述](http://css3pie.com/documentation/ "这里")，因为您的问题的答案取决于您使用的版本（PHP、JS、CSS）。因为它是 Joomla，我认为你应该使用 PHP 版本，如果你是，那么你需要确保你不仅在 index.php 上调用函数来使用 PIE，而且在组件视图上也是。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:00:54.360

我已经使用完整的 url 链接到 PIE.htc 了。 `behavior: url(http://localhost/human_affairs2/PIE.htc);`

在这里找到答案： [http ://css3pie.com/forum/viewtopic.php?f=4&t=980](http://css3pie.com/forum/viewtopic.php?f=4&t=980)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T00:19:20.097

相反，您可以将 PIE.htc 放在网站的根目录中，然后从 css 中调用它，例如

```
behavior: url(PIE.htc); 
```

您需要将它放在 .htaccess 和其他重要文件夹所在的同一文件夹中（例如管理员等）。

这就是我修复它的方式。

# java - JAVA if 语句问题

> ID：11675486
> 
> 赞同：0
> 
> 时间：2012-07-26T18:15:35.413
> 
> 标签：java

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我在java中使用if语句通过询问天气他是男孩还是女孩来确定这个人是男性还是女性。这是一个非常愚蠢的说法，但我的查询是无论我输入什么，我总是得到“你是女性！” 这很烦人。能否请你帮忙？这是代码

```
import java.util.Scanner;

class ifstatement {

    public static void main( String args[] ) {
        System.out.print( "please enter boy or girl as an input:" );

        Scanner x = new Scanner( System.in );
        String a = x.nextLine();

        if ( a == "boy" ) {
            System.out.print( "You are a male" );
        }
        else {
            System.out.print( "You are a female!" );
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:16:25.353

使用`equals()`方法比较`String`

`equals()`比较对象

`==`比较参考值

利用

```
if ("boy".equals(a)) { 
```

这会将`"boy"`String 的实例与 String 引用的实例进行比较`a`

* * *

**看**

*   [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:25:14.033

**1.**在**java中对象是使用.equals()方法比较的，而Strings是Java中的对象。**

**2.**使用`a.equals("boys")`它会给你**正确的答案**....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:21:29.323

运算符检查对对象的`==`引用是否相等。在测试字符串相等性时，这还不够。引用相等性的测试是在 中完成的`String.equals() method`，除其他检查外：

```
 public boolean equals(Object anObject) {
        if (this == anObject) {      // Reference equality
            return true;
        }
        if (anObject instanceof String) {
            String anotherString = (String)anObject;
            int n = count;
            if (n == anotherString.count) {  // Are the strings the same size?
                char v1[] = value;
                char v2[] = anotherString.value;
                int i = offset;
                int j = anotherString.offset;
                while (n-- != 0) {
                    if (v1[i++] != v2[j++])        // Compare each character
                        return false;
                }
                return true;
            }
        }
        return false;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:21:38.453

如果你说：

```
 if ("boy".equals(a)){
 System.out.print("You are a male");
 } else if ("girl".equals(a)){
 System.out.print("you are a female!");
 { else {
 System.out.print("invalid response!");
 } 
```

这将解决您的问题。在处理字符串时，您应该始终使用 .equals() 来比较确切的值。“==”运算符通常比较两个对象是否指向内存中的同一位置。由于字符串是一个对象，它们是不一样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T18:19:53.477

`==`比较使用对象引用，两个对象是否指向同一个内存位置。`.equals()`在 Object 类中也是如此，但是 String 类会覆盖它来进行值比较。

# r - R commandArgs(TRUE) 返回字符串而不是数组？

> ID：11675487
> 
> 赞同：0
> 
> 时间：2012-07-26T18:15:39.943
> 
> 标签：r, command-line, command-line-arguments

**剧本**

```
#!/usr/local/bin/Rscript --slave
args <- commandArgs(TRUE)
print(args); 
```

**外壳命令**

```
~/Rscript my_script.R hello 10 3 
```

**输出**

```
[1] "hello" "0"     "10" 
```

我期待一个像这样的数组：

```
[1] "hello"
[2] "0"
[3] "10" 
```

那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:26:02.107

这就是向量在 R 中的打印方式，就像您像这样创建它一样：

```
> c("hello", "10", "3")
[1] "hello" "10"    "3" 
```

尝试

```
print(args[1])
print(args[2])
print(args[3]) 
```

你会看到每个都访问了适当的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:28:19.313

从`?commandArgs`返回的值是：

> 包含可执行文件名称和用户提供的命令行参数的字符向量

您显示的输出是 R 显示向量的标准方式：

```
> c("Hello", "10", "3")
[1] "Hello" "10"    "3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T11:24:09.903

如果您想以数字形式访问 args 中的值，请不要忘记将其转换为 commandArgs 为您提供字符串向量。前任。

> N <- as.numeric(Args[3])

返回您 10 而不是“10”。

# c# - 页面继承

> ID：11675494
> 
> 赞同：2
> 
> 时间：2012-07-26T18:16:09.320
> 
> 标签：c#, asp.net, asp.net-4.0

假设我有一个 Web 项目和一堆不同的 Web 窗体，实际上所有不同的类都继承了`System.Web.UI.Page`.

`Page_Load`我决定在我在项目中使用的任何页面的方法中包含一些字段、方法和一些事情会很棒。

袖手旁观，我想也许可以创建一个类，比如 MasterPage，它包含我想要的所有字段和方法（带有`protected`级别）并让这个类继承`System.Web.UI.Page`。

然后我项目中的每个页面现在都应该从 MasterPage 继承而不是`System.Web.UI.Page`.

虽然这行得通，但它存在一些问题。

1.  我无法真正“捕捉”仍然`System.Web.UI.Page`很容易继承的表单。有没有简单的方法？

2.  由于它的设置方式，MasterPage 的 PageLoad 是虚拟的，并且必须被覆盖，例如：

    ```
    protected override void Page_Load(object sender, EventArgs e)
    {
        base.Page_Load(sender, e);
        // rest of stuff for this page...
    } 
    ```

    有没有更简单的方法可以让父母的方法总是首先被调用，而无需在每个页面中显式地放入基本调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:21:26.653

另一种替代方法是创建从 Page 继承的超类，然后将它自己的事件处理程序添加到 Page 事件中。有时很容易忘记您可以将任意数量的处理程序附加到一个事件。

```
namespace MyProject
{
    public partial class CustomPage: System.Web.UI.Page
    {
         public CustomPage()
         {
            this.Init += new EventHandler(CustomPage_Init);
            this.Load += new EventHandler(CustomPage_Load);
            this.PreRender += new EventHandler(CustomPage_PreRender);
            this.Unload += new EventHandler(CustomPage_Unload);
         }

         protected void CustomPage_Load(object sender, EventArgs e)
         {
            //do stuff
         } 

     ...
    }
} 
```

然后在您的页面中，只需继承并执行您通常所做的事情，这两个事件都会触发。

```
namespace MyProject
{
    public partial class NewPage: CustomPage
    {
        void Page_Load(object sender, EventArgs e)
        {
            //do more stuff
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:18:57.727

1.  查找/替换是您的朋友。
2.  不要覆盖继承类中的事件处理程序。相反，将基本处理程序设为私有并在继承类中创建新处理程序。或者，[`OnInit()`](http://msdn.microsoft.com/en-us/library/cd6at422.aspx)在您的基类中覆盖，这样您就不必担心`Page_Load`首先调用哪个。

另一个完全不同的解决方案是使用[ASP.NET Master Pages](http://msdn.microsoft.com/en-us/library/wtxbf3hh)。这通常是在 Web 应用程序的所有页面之间共享内容的最佳方式。

> 母版页提供开发人员传统上通过重复复制现有代码、文本和控制元素来创建的功能；使用框架集；对公共元素使用包含文件；使用 ASP.NET 用户控件；等等。

![母版页结果页面组成](../Images/71e51e65a65767a3bde7715dc2aba2b3.png)

# php - 在 Symfony2 上的测试环境中禁用安全防火墙

> ID：11675495
> 
> 赞同：8
> 
> 时间：2012-07-26T18:16:12.370
> 
> 标签：php, symfony

我正在尝试为 Symfony2 中的测试环境禁用安全防火墙，但我没有运气。这是我在 config_test.yml 中的内容：

```
security:
    firewalls:
        web:
            pattern: .*
            security: false
            anonymous: ~ 
```

但是，这不会禁用安全性。有什么想法可以在测试环境中完全禁用某个防火墙的安全性吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-01-17T10:28:25.337

**不要更改`security.yml`**，而是为测试目的制定*临时*规则。

您必须禁用您的所有安全防火墙配置`config_test.yml`：

```
 imports:
      - { resource: config_dev.yml }

  framework:
      test: ~
      session:
          storage_id: session.storage.mock_file
      profiler:
          collect: false

  web_profiler:
      toolbar: false
      intercept_redirects: false

  swiftmailer:
      disable_delivery: true

  security:
      firewalls:
          dev:
              pattern:  ^/
              security: false 
```

**笔记**

注意`config_test.yml`进口`config_dev.yml`，哪个进口`config.yml`。因此，您必须覆盖测试配置文件上的所有基本配置才能使其正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-04T18:04:42.563

正如类似主题中提到的，在您的 security.yml 中[开发以下规则时关闭防火墙：](https://stackoverflow.com/questions/8174522/turn-off-firewall-when-developing-in-early-stages-with-symfony2)

```
firewalls:
    dev:
        pattern:  ^/
        security: false 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T18:47:02.807

## 可能的解决方案

`config.yml`您可以从这部分代码中提取：

```
imports:
    - { resource: security.yml } 
```

并将其分别放在`config_dev.yml`和`config_prod.yml`中。在这种情况下`config_test.yml`，不会导入安全配置，因此您在测试环境中将没有安全性。

# iphone - NSFormatter 和 NSdate 问题。获取 nsdate 对象为空

> ID：11675497
> 
> 赞同：0
> 
> 时间：2012-07-26T18:16:22.470
> 
> 标签：iphone, ios

我的日期为空，我不知道为什么，有人可以帮忙吗

输入日期：@"2012 年 6 月 14 日 - 00:00:00 UTC"

预期输出：@“2012 年 6 月 14 日”

```
 NSString *rawDate = @"June 14, 2012 - 00:00:00 UTC";
                NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
                [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
                [dateFormatter setDateFormat:@"MMMM dd, yyyy - HH:mm:ss"];
                NSDate *date = [dateFormatter dateFromString:rawDate];

                NSLog(@"Check the string date: %@", date); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:21:07.420

试试这个：

```
NSString *rawDate = @"June 14, 2012 - 00:00:00 UTC";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[dateFormatter setDateFormat:@"MMMM dd, yyyy - HH:mm:ss Z"];
NSDate *date = [dateFormatter dateFromString:rawDate];

NSLog(@"Check the string date: %@", date); 
```

您需要为输入字符串的时区部分添加格式标识符。

# iphone - iOS模拟器上的谷歌地图？

> ID：11675498
> 
> 赞同：6
> 
> 时间：2012-07-26T18:16:24.873
> 
> 标签：iphone, ios, ipad, maps, ios-simulator

我正在构建一个 iOS 应用程序，我想与 iPhone 和 iPad 上的本机地图应用程序进行交互。任何一个模拟器上似乎都没有安装地图应用程序。

如何在 iOS 模拟器上测试此功能？

* * *

当我让谷歌地图网站接管以下网址时

[http://maps.google.com/maps?ll=37.785834,-122.406417](http://maps.google.com/maps?ll=37.785834,-122.406417)

有时候是这样的

![在此处输入图像描述](../Images/c20ddf4bfa8db93a3a86f2dcb3e44df6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:27:52.090

使用 Apple 提供的此文档：http: [//developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

正如那里所说：

> 如果设备上未安装地图应用程序，则打开地图 URL 会将请求转发到 Google 地图网站。

所以你*可以*在模拟器中测试它，但它会在 Safari 中打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:26:49.157

```
[someUIApplication openURL:[NSURL URLWithString:@"http://maps.google.com/maps?q=London"]] 
```

这将从苹果打开地图应用程序。

**注意：这仅适用于设备本身。不在模拟器中。**

这是模拟器的“缺失”功能之一。

就像 Woz 说的，它将在 safari 上打开，而不是在本机应用程序中。

# android - Sherlock 操作栏样式

> ID：11675500
> 
> 赞同：3
> 
> 时间：2012-07-26T18:16:44.680
> 
> 标签：android, actionbarsherlock

我想将我的操作栏设置为在整个应用程序中都有背景颜色。目前我使用

```
getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.bg_top)) 
```

在我的每一项活动中，但我希望这是全局定义的。其次，我不希望每个活动 ActionBar 中的图标。如何实现？

## 亲切的问候

这是我的风格。我希望保留标题但隐藏图标

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/bg_top</item>
    <item name="background">@drawable/bg_top</item>
    <item name="android:titleTextStyle">@style/Theme.ActionBar.TitleTextStyle</item>
    <item name="titleTextStyle">@style/Theme.ActionBar.TitleTextStyle</item>
    <item name="android:displayOptions">useLogo</item>
    <item name="displayOptions">useLogo</item>
</style>

<style name="Theme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">@color/white</item>
</style> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T18:39:34.287

要将整个应用程序的背景颜色设置为相同，请执行以下操作：

在您的 AndroidManifest 中添加以下样式：

```
< application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.MyTheme"
android:name=".MyApp" > 
```

然后在你的样式文件中添加这个：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#ff3399CC</item>
    <item name="background">#ff3399CC</item>
</style> 
```

然后，您可以更改颜色或添加任何其他样式。

也许这可以帮助徽标： [https ://groups.google.com/forum/?fromgroups#!topic/actionbarsherlock/siirVdZw-ts](https://groups.google.com/forum/?fromgroups#!topic/actionbarsherlock/siirVdZw-ts)

# ios5 - 与两名以上玩家重新连接到 GKMatch

> ID：11675510
> 
> 赞同：1
> 
> 时间：2012-07-26T18:17:00.797
> 
> 标签：ios5, game-center, gamekit, reconnect

我正在测试一个 Game Center 游戏，特别是当玩家暂时退出（电话、后台等）时会发生什么我希望能够暂停游戏并在玩家再次活跃时重新连接。

这在两人游戏中可以正常工作，因为 match:shouldReinvitePlayer 功能会导致玩家被重新邀请，但 Apple 指定这仅适用于两人游戏。

在三人（或更多）游戏中，我在 appDelegate applicationWillEnterForeground 中处理此问题，如下所示；

```
GKMatchRequest *comebackRequest = [[GKMatchRequest alloc] init];
    comebackRequest.playersToInvite = [NSArray arrayWithObjects:[[[[KYTGame instance] players] objectAtIndex:1] peerId], [[[[KYTGame instance] players] objectAtIndex:2] peerId], nil];
    comebackRequest.minPlayers = 3;
    comebackRequest.maxPlayers = 3;
    comebackRequest.playerGroup = [[[KYTGame instance] gameCategory] playerGroup];

    [[GKMatchmaker sharedMatchmaker] addPlayersToMatch:[[KYTGame instance] match] 
                                          matchRequest:comebackRequest 
                                     completionHandler:^(NSError *error) {
        NSLog(@"%sPlayers are %@", __PRETTY_FUNCTION__, [[KYTGame instance] match ].playerIDs);
    }]; 
```

发生的情况是现有的两个玩家高兴地“ping”走，当调用应用程序委托代码时（在再次活跃的玩家中）匹配不为零并且playedIDs数组中没有任何内容，但完成处理程序从未出现被调用并且再次“复活”的玩家永远不会重新连接。

我还在“实时”播放器的调试日志中发现了一个特殊的模式，显示进入后台的播放器已经多次将状态更改为“断开连接”，中间没有任何“连接”。

所以......当 GKMATCH 被推到后台然后复活时，是否可以期待它有意义。如何重新连接？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:09:36.513

我将此提交给 Apple 支持，但遗憾的是该功能不可用；尽管 Game Kit 在对等网络中最多支持 4 名玩家，但如果游戏中有超过 2 名玩家，则 api 不会提供在其中任何人断开连接时重新连接的方法。

# c# - 将用户控件堆栈面板绑定到 WPF 中的可观察集合

> ID：11675511
> 
> 赞同：6
> 
> 时间：2012-07-26T18:17:05.093
> 
> 标签：c#, wpf, xaml

我正在尝试创建一个联系人列表用户控件，其堆栈面板绑定`ObservableCollection`到`LoggedInUser`

用户控制：

```
<UserControl.Content>
    <Grid>
        <Border BorderBrush="LightBlue" BorderThickness="1,1,1,1" CornerRadius="8,8,8,8" Height="350" HorizontalAlignment="Left" VerticalAlignment="Top" Width="290">
            <ItemsControl x:Name="tStack" Grid.Column="0">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Height="30" Content="{Binding Username}"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Border>
    </Grid>
</UserControl.Content> 
```

用户控制代码背后

```
public partial class ContactList : UserControl
{
    public ContactList()
    {
        InitializeComponent();

        ContactListViewModel clvm = ContactListViewModel.GetInstance();

        clvm.Contacts.Add(new LoggedInUser("test", "123"));

        this.DataContext = clvm.Contacts;
    }
} 
```

还有我的 ContactListViewModel

```
class ContactListViewModel
{
    private static ContactListViewModel instance;

    public ObservableCollection<LoggedInUser> Contacts = new ObservableCollection<LoggedInUser>();

    public static ContactListViewModel GetInstance() 
    {
        if (instance == null)
            instance = new ContactListViewModel();

        return instance;
    }
} 
```

`LoggedInUser`上课，以防万一

```
public class LoggedInUser
{
    private string username;
    public string Username
    {
        get { return username; }
        set { username = value; }
    }
} 
```

我的堆栈面板仍然是空的！帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T18:30:19.437

你没有绑定`ItemsSource`你的`ItemsControl`，所以它实际上没有数据。您的数据上下文是集合，因此您只需要这样做：

```
<ItemsControl ItemsSource="{Binding}" ... 
```

或者，如果您将数据上下文设置为视图模型实例（如 MVVM 的惯例），您可以这样做：

```
<ItemsControl ItemsSource="{Binding Contacts}" ... 
```

# jquery - jQuery 下拉菜单在 IE7 中不起作用

> ID：11675512
> 
> 赞同：0
> 
> 时间：2012-07-26T18:17:14.853
> 
> 标签：jquery, drop-down-menu, internet-explorer-7

我在我公司的一个网站上有一个 jQuery 下拉菜单。该菜单适用于除 IE7 以外的所有浏览器。我尝试过修改 jQuery 和 CSS。我已经尝试实施我在本网站上看到的所有修复以及快速谷歌搜索提供的任何其他修复。到目前为止，没有任何帮助。最糟糕的部分是我不确定哪个部分不起作用。

我听说某些版本的 IE 不支持 :hover 类。我尝试为 .hover 函数创建一个变量。其他人发布说 IE7 不喜欢 display:block 所以我尝试改变它。没有任何工作。

这是我的代码减去 CSS。该网站是： [http ://www.triconference.com](http://www.triconference.com)

```
$(document).ready(function () {

            $('#nav li').hover(function () {

                                    //show its submenu
                                    $('ul', this).stop(true, true).slideDown(300);

                                },

                                function () {
                                    //hide its submenu
                                    $('ul', this).stop(true, true).slideUp(300);
                               }
               );

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:23:40.267

尝试使用 .mouseover 或 .mouseenter 而不是 .hover [http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

# android - 如何从光标获取数据到 ContextMenu

> ID：11675514
> 
> 赞同：6
> 
> 时间：2012-07-26T18:17:23.417
> 
> 标签：android, sqlite, contextmenu, simplecursoradapter

我想获取游标的当前记录，而不仅仅是 ID，以便我可以操作上下文菜单。

[我在这里](https://github.com/commonsguy/cw-android/blob/master/Database/Constants/src/com/commonsware/android/constants/ConstantsBrowser.java)看到了这个示例，它向您展示了如何获取 ID：

```
 @Override
  public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case DELETE_ID:
        AdapterView.AdapterContextMenuInfo info=
          (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

        delete(info.id);
        return(true);
    }

    return(super.onOptionsItemSelected(item));
  } 
```

这很棒，因为它允许我获得单击的上下文菜单的适当 SQLite 数据库 ID，这将允许我编写一个函数来进行查找。但我肯定可以重用当前光标吗？

我试过这样做：

```
Cursor c = (Cursor) this.getListAdapter().getItem((int) info.id);
String itemPriority = c.getInt(1);  
Log.v(TAG, "Current item:" + itemPriority); 
```

但光标行似乎只返回数据库的模式，而不是我所追求的记录。

有人可以阐明一下。

编辑：感谢@azgolfer，我找到了解决方案。我使用 fillData() 方法来填充适配器。通常这是在没有变量的情况下声明的。我不得不用一个字段变量重新定义这个方法。使光标适配器在 onContextItemSelected 中可见的代码的相关部分在这里：

```
private void fillData() {
    Cursor itemsCursor = mDbHelper.fetchAllItemsFilter(mListId, mStatusFilter);
    startManagingCursor(itemsCursor);
    mItemAdaptor = new ItemAdapter(this, itemsCursor);
    this.setListAdapter(mItemAdaptor);      
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T22:46:53.920

您正在使用 CursorAdapter 来显示您的列表项，对吗？然后，您已经可以通过在 CursorAdapter 本身上调用 getCursor() 来访问光标。要从光标中检索正确的记录，您只需要获取用户按下的项目的位置，然后将光标移动到该位置并检索您的数据。

首先，确定用户按下的位置：

```
AdapterView.AdapterContextMenuInfo info=
      (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();
int itemPosition = info.position; 
```

然后将光标移动到所需位置并检索记录：

```
Cursor cursor = (Your cursorAdapter).getCursor();
cursor.moveToPosition(itemPosition);
String itemPriority = cursor.getInt(1);  
Log.v(TAG, "Current item:" + itemPriority); 
```

# c# - 游戏引擎——我应该为脚本添加对.NET 的依赖吗？

> ID：11675515
> 
> 赞同：1
> 
> 时间：2012-07-26T18:17:28.540
> 
> 标签：c#, .net, scripting, game-engine

我正在将第一人称射击游戏作为一个有趣的副项目来工作，并开始考虑营销该游戏，并为模组添加脚本支持。我想知道是否应该使用传统的脚本语言，如 LUA、Javascript 或 Python，或者是否应该使用 C#/.NET。众所周知，C# 是一种“更快”的语言，因为它是经过编译的，而上面提到的语言则不是。（我也可以添加对另一个框架的依赖，比如 Java）。该游戏是为 Windows 编写的，我想知道期望最终用户安装 .NET 框架是否“太过分”，或者这是否是一个合理的要求。

我想补充一点，可以使用 Microsoft.CSharp.CSharpCodeProvider 接口在游戏中完成编译 C# 代码（就像 LUA、Python 和 JavaScript）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:26:07.393

如果您想使用 .NET，可以很安全地假设最终用户已经安装了相当新的版本。Windows Vista 内置了 .NET 3.0；Windows 7 附带 .NET 3.5。当然，最近有许多流行的游戏（Magicka、Terraria、Bastion 等）完全用 .NET 编写，因此游戏社区已经证明他们并不特别反对安装的想法/使用它。将其添加到游戏的安装程序中应该是相当不显眼的。

请记住，这是将您与 Windows 平台捆绑在一起的另一件事，因此，如果您将来决定将游戏移植到其他操作系统，您将不得不想出一个替代品（或者看看 Mono 是否是足以满足您的需求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:26:50.767

这实际上取决于您的具体情况，但是期望用户安装 .NET（至少 .NET 2.0）绝对不是太多。大多数 XP 用户已经安装了 .NET，因为他们可能需要它来做其他事情，或者它是由 Windows 更新自动安装的。Windows 7 默认具有 .NET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:35:20.027

[我是IronPython](http://ironpython.codeplex.com/)的忠实粉丝，并在我所有的脚本驱动项目中使用它。首先是因为我喜欢这种语言（用于脚本，而不是用于应用程序开发），其次是因为使用 IronPython，您可以直接访问和使用 .NET 对象而无需任何奇怪的语法（不像 Lua for .NET 需要混合语法）。嵌入到您的应用程序中也非常简单。

# java - 我可以创建一个返回缓冲区写入器数组的方法吗

> ID：11675517
> 
> 赞同：0
> 
> 时间：2012-07-26T18:17:41.537
> 
> 标签：java, android, eclipse, testing, robotium

我正在编写一个测试程序，并在其中将结果写入 2 个不同的文件。1 个用于特定测试的文件和 1 个保存所有结果的运行总计的文件。我不想为我拥有的 20 个测试中的每一个都写出逻辑，而是想创建一个方法来返回一个`BufferedWriters`. 这可能吗？

这是我一直在使用的代码：

```
 public BufferedWriter[] createTestFile(String fileName, String fileName2) throws IOException{
    File directory = null;
    File photoDirectory = null;
    BufferedWriter bufWrite=null; 
    BufferedWriter bw2 = null;

    BufferedWriter[] bw[]=null; 

    SimpleDateFormat photoFormat = new SimpleDateFormat("ddMMyy-hhmmss");

    new SimpleDateFormat("MMMddyy-hhmmss");
    /*
     * This sections checks the phone to see if there is a SD card. if
     * there is an SD card, a directory is created on the SD card to
     * store the test log results. If there is not a SD card, then the
     * directory is created on the phones internal hard drive
     */
    // if there is no SD card
    if (Environment.getExternalStorageState() == null) {
        directory = new File(Environment.getDataDirectory()
                + "/RobotiumTestLog/");
        photoDirectory = new File(Environment.getDataDirectory()
                + "/Robotium-Screenshots/");

        // if no directory exists, create new directory
        if (!directory.exists()) {
            directory.mkdir();
        }

        // if phone DOES have sd card
    } else if (Environment.getExternalStorageState() != null) {
        // search for directory on SD card
        directory = new File(Environment.getExternalStorageDirectory()
                + "/RobotiumTestLog/");
        photoDirectory = new File(
                Environment.getExternalStorageDirectory()
                        + "/Robotium-Screenshots/");

        // if no directory exists, create new directory to store test
        // results
        if (!directory.exists()) {
            directory.mkdir();
        }
    }// end of SD card checking

    /*
     * Checks for existing test logs, and if they exist, they are
     * deleted, creating a new test log for each testing method
     */
    File logResults = new File(directory, fileName);
    File totLogRes = new File(directory, fileName2); 
    if (logResults.exists()) {
        logResults.delete();
    }
    if (!logResults.exists()) {
        logResults.createNewFile();
    }
    //check total Log
    if (!totLogRes.exists()) {
        totLogRes.createNewFile();
    }
    /*
     * This creates the writing stream to log the test results This
     * stream MUST be closed, using bw.close(), for the test results to
     * show on the log. If the stream is not closed, when you open the
     * text file that the results are stored in, the page will be blank.
     */

        //This is where I have a problem. I'm not sure how to return an array of bufferedwriters
    bufWrite = new BufferedWriter(new FileWriter(logResults, true));
    bw2= new BufferedWriter(new FileWriter(totLogRes, true)); 

    bw[0]=bufWrite; <---- get an error here saying I can't go from array to bw.

    return bw[]; 
```

我尝试了几种不同的方法，但我得到了错误。我想知道是否有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:21:42.347

您应该将 bw 的声明更改为：

```
BufferedWriter[] bw=new BufferedWriter[2]; 
```

现在，您正在声明 BufferedWriter 的数组和数组。而且你没有分配它......

此外，return 语句应该是

```
return bw; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:23:13.430

几个错误：

```
BufferedWriter[] bw[]=null; 
```

要定义一个数组，它就像`int a[];`，所以

```
BufferedWritter bw[] = null; 
```

此外，数组是一个对象，您需要使用`new`

BufferedWriter bw[] = new BufferedWriter[2];

# c#-4.0 - 参数超出范围

> ID：11675523
> 
> 赞同：1
> 
> 时间：2012-07-26T18:17:57.290
> 
> 标签：c#-4.0, csv, import, firebird

我必须使用 C# 将 .csv 文件导入 firebird 数据库。为此，我编写了以下代码：

```
private void button1_Click(object sender, EventArgs e) {            
  FbConnection FBConnect = new FbConnection();
  FBConnect.ConnectionString =   global::MTel.Properties.Settings.Default.MTelConnectionString;
  string s1 = "Изходящ разговор Корпоративна група ";
  string s2 = "Изходящ SMS М-Тел ";
  string s3 = "Изходящ SMS Виваком ";
  string s4 = "Изходящ SMS Глобул ";
  string s5 = "Мобилен Интернет ";
  string s6 = "Мобилен Интернет Безплатен Трафик ";
  string s7 = "Мобилен Интернет Vodafone live! в портала ";
  string s8 = "Допълнителни услуги ";
  string s9 = "Изходящ SMS Корпоративна група ";
  string s10 = "Изходящ SMS Допълнителни услуги, нормална тарифа ";
  string s11 = "Изходящ разговор Безплатни разговори ";
  string s12 = "Изходящ разговор Спешни номера ";
  string s13 = "Изходящ разговор Корпоративна група, пренасочване ";
  string s14 = "Изходящ разговор Гласова поща ";
  string s15 = "Изходящ разговор Гласова поща, пренасочване ";
  string s16 = "MUSICALL ";
  string s17 = "Изходящ разговор Обслужване на клиенти *88 ";
  string s18 = "Телевизия и видео ";
  string filePath = "D:\\MTel\\Test.csv";
  Records[] rec;
  CsvReader csv = new CsvReader(new StreamReader(filePath), true);
  int fieldCount = csv.FieldCount;
  string[] headers = csv.GetFieldHeaders();
  string InsertQuery = "INSERT INTO Records(Record_Number, Type_Service, Duration,                              Record_Price) VALUES(?, ?, ?, ?)";
  FbCommand FbCom = new FbCommand(InsertQuery, FBConnect);
  try {  
    FBConnect.Open();
    while (csv.ReadNextRecord()) {
      for (int i = 0; i < fieldCount; i++) {
        if (csv[i].ToString() != s1 || csv[i].ToString() != s2 ||
            csv[i].ToString() != s3 || csv[i].ToString() != s4 ||
            csv[i].ToString() != s5 || csv[i].ToString() != s6 ||
            csv[i].ToString() != s7 || csv[i].ToString() != s8 ||
            csv[i].ToString() != s9 || csv[i].ToString() != s10 ||
            csv[i].ToString() != s11 || csv[i].ToString() != s12 ||
            csv[i].ToString() != s13 || csv[i].ToString() != s14 ||
            csv[i].ToString() != s15 || csv[i].ToString() != s16 ||
            csv[i].ToString() != s17 || csv[i].ToString() != s18) {
            if (headers[i].ToString() == "Телефонен/Абонатен номер") {
              FbCom.Parameters.AddWithValue("Record_Number", csv[i]);
              FbCom.ExecuteNonQuery();                             
            } else if (headers[i].ToString() == "Услуга и направление") {
              FbCom.Parameters.AddWithValue("Type_Service", csv[i]);
              FbCom.ExecuteNonQuery();
            } else if (headers[i].ToString() == "Количество (сек. бр. kB.)") {
              FbCom.Parameters.AddWithValue("Duration", csv[i]);
                FbCom.ExecuteNonQuery();
            } else if (headers[i].ToString() == "Такса (лв.)") {
              FbCom.Parameters.AddWithValue("Record_Price", csv[i]);
              FbCom.ExecuteNonQuery();
            }
          }
        }
      }
    } catch (FbException FbEx) {
      MessageBox.Show(FbEx.ToString());
    } finally {
      MessageBox.Show("Данни са успешно импортирани в базата данни", "Успешна    операция", MessageBoxButtons.OK, MessageBoxIcon.Information);
      FBConnect.Close();
    }
  }
} 
```

但是对于线

```
FbCom.ExecuteNonQuery(); 
```

我收到 System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:24:26.560

您的查询有 4 个参数：

```
string InsertQuery = "INSERT INTO Records(Record_Number, Type_Service, Duration, Record_Price) VALUES(?, ?, ?, ?)"; 
```

但是您只添加一个参数：

```
FbCom.Parameters.AddWithValue("Record_Number", csv[i]);
FbCom.ExecuteNonQuery(); 
```

如果您显示堆栈跟踪（顺便说一下，您实际上是在异常处理中丢弃）我们可能能够确认，但我的猜测是它正在寻找您没有提供的下一个参数，这就是它在某处超出了索引范围。

您要么需要提供您的查询期望使用不同查询的所有参数。也许您打算为其他参数提供默认值？如果数据库设置为在没有提供默认值时具有默认值，那是一回事。但在这种情况下，查询本身仍在期待它们。

# r - 在 R 中，如何按组添加最大值？

> ID：11675526
> 
> 赞同：4
> 
> 时间：2012-07-26T18:18:15.910
> 
> 标签：r

我想使用 R 在我的数据集中创建一个新列，其中包含每个唯一组的最大值。我的数据如下所示：

```
group<-c("A","A","A","A","A","B","B","C","C","C")
replicate<-c(1,2,3,4,5,1,2,1,2,3)
x<-data.frame(cbind(group,replicate)) 
```

我想创建如下所示的第三列 - 每个组的最大值。

```
group   replicate max.per.group
A       1         5       
A       2         5
A       3         5
A       4         5
A       5         5
B       1         2
B       2         2
C       1         3
C       2         3
C       3         3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:28:19.817

如果您`x`首先重新定义（`cbind`使两列因素），

```
x<-data.frame(group,replicate) 
```

你可以使用这个：

```
merge(x,aggregate(replicate~group,x,FUN=max),all.x=TRUE,by="group")
   group replicate.x replicate.y
1      A           1           5
2      A           2           5
3      A           3           5
4      A           4           5
5      A           5           5
6      B           1           2
7      B           2           2
8      C           1           3
9      C           2           3
10     C           3           3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T18:24:42.050

尝试

```
# This is how you create your data.frame
group<-c("A","A","A","A","A","B","B","C","C","C")
replicate<-c(1,2,3,4,5,1,2,1,2,3)
x<-data.frame(group,replicate) # here you don't need c()

# Here's my solution    
Max <- tapply(x$replicate, x$group,max)
data.frame(x, max.per.group=rep(Max, table(x$group)))
 group replicate max.per.group
1      A         1             5
2      A         2             5
3      A         3             5
4      A         4             5
5      A         5             5
6      B         1             2
7      B         2             2
8      C         1             3
9      C         2             3
10     C         3             3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T18:26:08.267

这是另一个基本 R 解决方案：

```
cbind(x, cummax=unlist(tapply(x$replicate, x$group, function(x) rep(max(x), length(x)))))
   group replicate cummax
A1     A         1      5
A2     A         2      5
A3     A         3      5
A4     A         4      5
A5     A         5      5
B1     B         1      2
B2     B         2      2
C1     C         1      3
C2     C         2      3
C3     C         3      3 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-15T05:21:19.163

共享的可重现示例建议您将列作为因子。我们需要先将它们转换为数字。

我们可以尝试使用 base R `ave`。找出每组中的最大值。

```
x$max.per.group <- ave(x$replicate, x$group, FUN = function(x) max(as.numeric(x)))

#   group replicate max.per.group
#1      A         1             5
#2      A         2             5
#3      A         3             5
#4      A         4             5
#5      A         5             5
#6      B         1             2
#7      B         2             2
#8      C         1             3
#9      C         2             3
#10     C         3             3 
```

* * *

另一种选择`dplyr`

```
library(dplyr)
x %>%
   group_by(group) %>%
   mutate(max.per.group = max(as.numeric(replicate))) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-26T18:22:09.127

你可以使用这个`plyr`包：

```
library(plyr)
> ddply(x, .(group), transform, max.per.group=max(replicate))
   group replicate max.per.group
1      A         1             5
2      A         2             5
3      A         3             5
4      A         4             5
5      A         5             5
6      B         1             2
7      B         2             2
8      C         1             3
9      C         2             3
10     C         3             3
> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T21:04:09.263

你可以使用`rle`-`Run Length Encoding`

```
# Create the data.frame
group <- c("A","A","A","A","A","B","B","C","C","C")
replicate <- c(1,2,3,4,5,1,2,1,2,3)
x <- data.frame(group,replicate)

# using 'rle'
z <- rle(as.numeric(x$group))$lengths
x$max.per.group <- rep(z, z)
x 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-15T05:47:16.433

我们可以使用`data.table`赋值（`:=`）在原地创建一列，无需复制

```
library(data.table)
setDT(x)[, max.per.group := max(replicate), by = group]
x
#     group replicate max.per.group
#1:     A         1             5
#2:     A         2             5
#3:     A         3             5
#4:     A         4             5
#5:     A         5             5
#6:     B         1             2
#7:     B         2             2
#8:     C         1             3
#9:     C         2             3
#10:    C         3             3 
```

### 数据

```
x <- data.frame(group,replicate) 
```

# jquery-ui - 如何使用多个 jquery-ui 滑块作为过滤器

> ID：11675531
> 
> 赞同：2
> 
> 时间：2012-07-26T18:18:38.237
> 
> 标签：jquery-ui, jquery-ui-slider, cascade-filtering

我有这个 jsfiddle [http://jsfiddle.net/danieltulp/gz5gN/](http://jsfiddle.net/danieltulp/gz5gN/)

我想要做的是使用大约 6 个滑块来适应数据属性的无序列表。但对于我的发展，我只使用了两个

第一个问题：质量滑块工作得很好，但是当我滑动价格滑块时，它会将 minP 和 maxP 变量视为对象，为什么？我该如何解决？

第二个问题：我的代码现在非常混乱，我必须编写特定于每个过滤器的代码（即：价格、质量等），我怎样才能简化/缩短我的代码？

小提琴的代码：

html

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"o/>
<div class="demo">
    price<br />
    <div id="price"></div>
    quality<br />
    <div id="quality"></div>
    <ul id="products">
        <li data-price="10" data-quality="20"> product - £10 q20</li>
        <li data-price="50" data-quality="40"> product - £50 q40</li>
        <li data-price="100" data-quality="80"> product - £100 q80</li>
        <li data-price="150" data-quality="30"> product - £150 q30</li>
        <li data-price="200" data-quality="40"> product - £200 q40</li>
    </ul>
</div> 
```

Javascript

```
function showProducts(minP, maxP, minQ, maxQ) {
    $("#products li").filter(function() {
        var price = parseInt($(this).data("price"), 10);
        var quality = parseInt($(this).data("quality"), 10);
        if(price >= minP && price <= maxP && quality >= minQ && quality <= maxQ){
             $(this).show();
        } else {
             $(this).hide();
        }
    });
}

$(function() {
    var options = {
        range: true,
        min: 0,
        max: 250,
        values: [0, 250],
        slide: function(event, ui) {
            if(event.target.id = "price"){
                var minP = ui.values[0],
                      maxP = ui.values[1],
                      minQ = $("#quality").slider("values", 0),
                      maxQ = $("#quality").slider("values", 1);
             }
            if(event.target.id = "quality"){
                var minP = $("#price").slider("values", 0),
                      maxP = $("#price").slider("values", 1),
                       minQ = ui.values[0],
                       maxQ = ui.values[1];
              }
              alert(minP +", "+ maxP +", "+ minQ +", "+ maxQ);
              showProducts(minP, maxP, minQ, maxQ);
          }
      };

     $("#price").slider(options);
     $("#quality").slider(options);
  }); 
```

编辑：如果我将 if 质量声明移到价格声明之上，则最小最大变量是对象的第一个问题也会发生在质量滑块上。价格值是正确的。因此，幻灯片函数中的 if 语句似乎有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:55:30.763

似乎有一个非常方便的 jquery 插件，叫做 filter.js

演示：http: [//jiren.github.com/filter.js/filterjs.html](http://jiren.github.com/filter.js/filterjs.html)

github：[https ://github.com/jiren/filter.js](https://github.com/jiren/filter.js)

教程：[http ://blog.joshsoftware.com/2011/09/28/filter-js-client-side-search-filtering-using-json-and-jquery/](http://blog.joshsoftware.com/2011/09/28/filter-js-client-side-search-filtering-using-json-and-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:40:00.023

似乎将幻灯片事件更改为更改允许我使用

```
change: function(event, ui) {
        var minP = $("#price").slider("values", 0);
        var maxP = $("#price").slider("values", 1);
        var minQ = $("#quality").slider("values", 0);
        var maxQ = $("#quality").slider("values", 1);
        showProducts(minP, maxP, minQ, maxQ);
    } 
```

这在滑动事件中是不可能的，因为这些语句在滑动过程中触发滑动事件时采用旧值（在 iPad 上测试，我不确定这如何与实际鼠标一起使用）参见[http://jqueryui.com/demos/滑块/#event-slide](http://jqueryui.com/demos/slider/#event-slide)了解更多信息

工作jsfiddle [http://jsfiddle.net/danieltulp/gz5gN/42/](http://jsfiddle.net/danieltulp/gz5gN/42/)

现在我仍然需要简化/缩短我的代码

* * *

**编辑**：

我有一个想法，至少可以制作更清晰的代码

首先我需要确定滑块值是增加还是减少，然后我可以过滤仅显示或隐藏的列表项以隐藏或显示

这仅允许影响已过滤的列表项，因此我不需要像在以前的代码中那样再次隐藏它们

但是我的 jsfiddle 在我的代码中出现了问题，但我无法缩小范围，有什么想法吗？ [http://jsfiddle.net/danieltulp/4uF3e/4/](http://jsfiddle.net/danieltulp/4uF3e/4/)

# android - 启用 BroadcastReceiver 时如何获取粘性广播数据？

> ID：11675534
> 
> 赞同：0
> 
> 时间：2012-07-26T18:18:40.880
> 
> 标签：android, android-intent

我有一个`BroadcastReceiver`在清单上注册的，最初是禁用的`android:enabled="false"`。

显现：

```
<receiver
            android:name="com.sample.name.MainWidgetBroadcastReceiver"
            android:enabled="false"
            android:exported="false" >
            <intent-filter>
                <action android:name="com.sample.name.intent.action.METADATA_UPDATE" />
            </intent-filter>
        </receiver> 
```

我收到的意图`com.sample.name.intent.action.METADATA_UPDATE`是粘性的。启用接收器时如何获取此粘性数据？如果解决方案触发了 BroadcastReceiver 或者我必须自己拉它，那会很好。我宁愿不必为了获取这些数据而注册广播......

```
PackageManager pm = context.getPackageManager();
        pm.setComponentEnabledSetting(
                new ComponentName(context, MainWidgetBroadcastReceiver.class),
                PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                PackageManager.DONT_KILL_APP); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:33:31.560

哎呀！我想我应该更努力地阅读 API... [registerReceiver(null, intentFilter)](http://developer.android.com/reference/android/content/Context.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter%29)会做到的！

> 如果您知道您正在注册的 Intent 是粘性的，您可以为您的接收器提供 null。在这种情况下，没有注册接收者——该函数只返回匹配过滤器的粘性 Intent。在多个匹配的情况下，适用与上述相同的规则。

# c# - 在 C# 中存储和排序数据的最佳方式

> ID：11675544
> 
> 赞同：1
> 
> 时间：2012-07-26T18:19:08.593
> 
> 标签：c#, simulation

我正在构建一个程序，它将在 6 组数字上运行 10000 次迭代。这些数字经过迭代并按以下方式计算和排序。

```
*_Set1_****_Set2_****_Set3_****_Set4_****_Set5****_Set6_*
*********************************************************
**DESC******DESC******DESC******DESC******DESC*****DESC**
********************************************************* 
```

其中 Set(n) 是数字的集合， DESC 是数字的降序。

我试过做一个`LIST`. 但我很不熟悉，`LIST`我什至不确定这是我要找的东西。我会给你一个例子，说明我在做什么`LIST`

```
//Created a Output Class for Sim
 public class MC_OUT
    {

       public double output;
       public double OOIP;
       public double OGIP;
       public double EURO;
       public double EURG;
       public double rAREA;
       public double calcEURO;
       public double calcEURG;

        public MC_OUT(double output, double OOIP, double OGIP, double EURO, double EURG, double rAREA, double calcEURO, double calcEURG) { 
        this.output = output;
        this.OOIP = OOIP;
        this.OGIP = OGIP;
        this.EURO = EURO;
        this.EURG = EURG;
        this.rAREA = rAREA;
        this.calcEURO = calcEURO;
        this.calcEURG = calcEURG;

        }

//Declared list before Monte Carlo Sim.
List<MC_OUT> mcout = new List<MC_OUT>();

//Ran Code to Perform Calculations
//Then Executed this at End
 if (OOIP >= 0 && OGIP >= 0)
        {
            mcout.Add(new MC_OUT(NormSInv((i - .5) / iter), OOIP, OGIP, EURO, EURG, rAREA, EURO / (rAREA * rNET_H * rGCF) * 1000, EURG / (rAREA * rNET_H * rGCF) * 1000));
        }
//Then I got confused and couldn't figure out how to sort and then access the needed
 //information 
```

所以我想在所有这些垃圾之后，我的主要问题是**什么是存储这些信息的最有效方法，有人可以指导我找到合适的教程吗？！**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:29:47.640

现在您已经创建了一个列表，您可以通过索引访问数据。例如：

```
var firstRecord = mcout[0];
var firstEURO = firstRecord.EURO; 
```

或者：

```
var firstEURO = mcout[0].EURO 
```

如果要对数据进行排序，可以像这样简单。

```
var sortedData = mcout.Orderby(x => x.OOIP); 
```

以上将根据您拥有的当前属性之一对数据进行排序。如果您需要对它进行不同的排序，您可能需要考虑向您的对象添加另一个更适合排序的属性。

使用 foreach 循环或 for 循环枚举数据也很容易。

```
foreach (var mc in mcout)
{
    var euro = mc.EURO;
}

for (int i = 0; i < mcout.Count; i++)
{
    var euro = mcout[i].EURO;
} 
```

集合是非常广泛使用的东西，并且有很多类型！你会想了解它们，以及如何使用它们。如果你用谷歌搜索 C# 集合，你会得到很多信息/教程。这是[关于集合的 MSDN 教程](http://msdn.microsoft.com/en-us/library/aa288462%28v=vs.71%29.aspx)。我可以继续讨论如何访问和使用它们，但是你需要深入了解并开始通过网络上的信息学习它。希望上面的例子和我给你的链接可以让你开始！干杯!

# javascript - 共享单击事件的 jQuery 复选框和跨度

> ID：11675545
> 
> 赞同：0
> 
> 时间：2012-07-26T18:19:14.620
> 
> 标签：javascript, jquery

所以我有一个复选框和一个跨度

`<input type="checkbox" class="checker"> <span class="something">Label</span>`

跨度已经具有一些基于单击它的功能，我在等式中添加了一个复选框以提供视觉帮助。我想要做的是，当复选框被选中/取消选中时，我希望它触发跨度已经存在的点击功能。这是我能做到的。

我还希望跨度上的相同单击功能来选中/取消选中它旁边的复选框，同时继续其基本功能。我也可以这样做。

似乎的障碍是，当我在脚本中同时拥有两种逻辑时，一个总是会淘汰另一个，让一个工作而另一个不工作。所以我试图弄清楚如何使这项工作和谐相处，显然我当时在思考问题时遇到了问题，需要一些帮助才能到达那里。

这是我目前正在尝试使用的 JS

```
$('.checker').live('click', function(e){e.preventDefault();$(this).siblings('.something').trigger('click');});
$('.something').live('click', function(e)
{
    e.preventDefault();
    if($(this).siblings('.checker').is(':checked'))
    {
        $(this).siblings('.checker').attr('checked', false);
    }
    else
    {
        $(this).siblings('.checker').attr('checked', true);
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:22:06.847

请使用`Label`标签

```
<li class="contact">
    <input id='input1' type="checkbox" class="checkbox" name="checkableitems[]" value="1333">
    <label for='input1'>Baby James</label>
</li> 
```

[http://jsfiddle.net/xgB5X/5/](http://jsfiddle.net/xgB5X/5/)

你仍然想要它的风格，然后请参考这个小提琴。

```
$('.something').on('click', function() {
    var chk_box = $(this).prev();
    var chk_status = !(chk_box.is(':checked'));
    chk_box.attr('checked', chk_status);
}); 
```

[http://jsfiddle.net/xgB5X/10/](http://jsfiddle.net/xgB5X/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:45:01.650

从使用`label`元素开始将确保您的元素根据需要链接在一起，因为如果元素不需要任何其他特殊操作，则此解决方案不需要与 JavaScript 或 jQuery 进行任何交互。

避免使用`live()`和选择加入`on()`(>= v1.7) 或`delegate()`(< v1.7)。

**HTML：**

```
<input type="checkbox" class="checker" id="check1"> <label for="check1">Label 1</label>
<input type="checkbox" class="checker" id="check2"> <label for="check2">Label 2</label>
<input type="checkbox" class="checker" id="check3"> <label for="check3">Label 3</label>
<input type="checkbox" class="checker" id="check4"> <label for="check4">Label 4</label> 
```

**jQuery：**

```
$('.checker').each(function(){
    $(this).on('change', function(){
        $('.checker').not('#' + this.id).attr('checked', false);
    });
}); 
```

演示：http: [//jsfiddle.net/EWK4M/](http://jsfiddle.net/EWK4M/)

# objective-c - 使用 FormCollection

> ID：11675547
> 
> 赞同：1
> 
> 时间：2012-07-26T18:19:24.023
> 
> 标签：objective-c, asp.net-mvc

我目前正在向以下 .NET MVC 操作提交 json 请求

```
 [AcceptVerbs(HttpVerbs.Post)]
    public JsonResult Signup(FormCollection collection)
    { 
```

然而，由于某种原因，该集合是空的。我知道正在发送数据，因为如果我将其更改为

```
[AcceptVerbs(HttpVerbs.Post)]
    public JsonResult Signup(String username, String email, String password)
    { 
```

我正在使用表单集合，因为它允许我为该方法提供可选参数。将来我可能没有用户名我可能有名字（例如）但我不能让旧的网址中断

该请求以 NSMutableURLRequest 的形式来自 iOS 应用程序。我是否遗漏了什么，或者我必须使用第二个选项并在添加新参数时创建不同的方法/在发布新应用程序更新时创建单独版本的 .NET MVC 应用程序。

所以是的，因为我正在发布这样的数据

```
NSMutableDictionary *sendData = [[NSMutableDictionary alloc] init];

        [sendData setValue:self.usernameTxt.text forKey:@"username"];
        [sendData setValue:self.emailTxt.text forKey:@"email"];
        [sendData setValue:self.deviceToken forKey:@"device_token"];

        //verify account details and retrieve the API Key
        responseData = [NSMutableData data];    

        NSString *stringUrl = kAppRequestUrl;

        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[stringUrl stringByAppendingString:@"/SomePath"]]];
        [request setValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPMethod:@"POST"];

        [request setHTTPBody: [sendData JSONData]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:21:37.510

`FormCollection` 表示您的`Form`元素的集合。不要期望在其中接受 JSON 值。我会是你的第二个选项（参数）与可选参数。

```
[HttpPost]
public JsonResult Signup(String username="",string name="", String email, String password)
{
   //do stuff
} 
```

# python - 无法通过 strptime() 解析 calendar.month_name 的迭代

> ID：11675550
> 
> 赞同：1
> 
> 时间：2012-07-26T18:19:41.077
> 
> 标签：python, for-loop, strptime

这里有一些看起来有点傻的东西：当我只是手动创建一个列表时很`datetime.strptime()`乐意接受月份名称的迭代列表`months = ['January','February']`（`calendar.month_name``<type 'str'>`

损坏的代码：

```
import datetime
import calendar
for month in calendar.month_name:
    print datetime.datetime.strptime(month,"%B") 
```

错误： `ValueError: time data '' does not match format '%B'`

工作代码：

```
import datetime
months = ['January','February','March']
for month in months:
    print datetime.datetime.strptime(month,"%B") 
```

结果：

```
1900-01-01 00:00:00
1900-02-01 00:00:00
1900-03-01 00:00:00 
```

这里发生了什么？这是`for`我不熟悉的python循环的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:21:59.577

尝试这样做`print( list(calendar.month_name) )`，很快就会明白为什么会失败......（主要是因为产生的第一个元素是一个空字符串）。请注意，第一个月产生的原因是一个空字符串是因为它们希望按照通用约定`month_names[1]`进行对应（请参阅[文档](http://docs.python.org/library/calendar.html?highlight=calendar#calendar.month_name)） `January`

你*可以*这样做：

```
a = list( calendar.month_names )[1:] 
```

或者这至少在 Cpython 中也有效（尽管在文档中并不清楚是否应该这样做）：

```
a = calendar.month_names[1:] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:33:54.550

正如[mgilson](https://stackoverflow.com/a/11675586/5987)所指出的，返回的第一项是一个空字符串。忽略它是微不足道的：

```
for month in calendar.month_name:
    if month:
        print datetime.datetime.strptime(month,"%B") 
```

或者使用列表推导来删除它：

```
for month in [month_name for month_name in calendar.month_name if month_name]:
    print datetime.datetime.strptime(month,"%B") 
```

# java - Android NDK - 从其他线程加载纹理

> ID：11675551
> 
> 赞同：3
> 
> 时间：2012-07-26T18:19:45.970
> 
> 标签：java, c, android-ndk, opengl-es-2.0

我尝试为我的 Android NDK 游戏项目编写加载屏幕 - 预加载所有纹理。如果在其他线程中创建纹理，我会正确设置纹理宽度等值，但即使 glGetError 返回 0，也会得到黑色精灵而不是纹理精灵。在同一个线程中一切正常，因此假设精灵或纹理代码中没有错误.

我认为这是因为我尝试从另一个线程调用 opengl es 2.0 函数，而没有 EGL 提供的上下文。但是，如何从 EGL 中获取 opengl es 2.0 上下文，它是在 Java (Android) 中创建的，并将其绑定到本机 C 中的 opengl es 2.0 函数中使用？

**Java(安卓)**

```
public class OGLES2View extends GLSurfaceView
{
 private static final int OGLES_VERSION = 2;

 public OGLES2View(Context context)
 {
  super(context);
  setEGLContextClientVersion(OGLES_VERSION);
  setRenderer(new OGLES2Renderer());
 }

private GLSurfaceView ogles2SurfaceView = null;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    ogles2SurfaceView = new OGLES2View(this);
    setContentView(ogles2SurfaceView);
} 
```

**C**

```
#define TRUE 1
#define FALSE 0

typedef unsigned char bool;

typedef struct game_data
{
 bool loaded;
 tex* t;
}game_data;

static void* loader_thread_func(void* arg)
{
 JavaVM* jvm = get_java_vm(); //get java VM to detach in the end
 JNIEnv* env = get_jni_env(); //== attach current thread
 game_data* to_load = (game_data*) arg;
 to_load->t = malloc(sizeof(tex));
 set_tex(to_load->t,"textures/bonus.png");//textures width and height set correctly
 to_load->loaded = TRUE;
 (*jvm)->DetachCurrentThread(jvm);
 return NULL;
}

void load_game_data(game_data* res)
{
 pthread_t loader_thread;
 pthread_create(&loader_thread, NULL, loader_thread_func, res);
}

/*in render manager file*/
static game_data* g_d = NULL;

/*in onInit func*/
g_d = malloc(sizeof(game_data));
g_d->loaded = FALSE;
load_game_data(g_d);

/*in onDraw function*/
 if(g_d->loaded)
 /*draw sprite*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:22:44.057

要从另一个线程调用 OpenGL ES 函数，您必须在 2 个线程之间创建一个共享的 OpenGL ES 上下文。

有一个更简单的解决方案 - 将事件发送到拥有 OpenGL ES 上下文的线程，以便在第二个线程中加载纹理后立即更新纹理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T12:23:37.650

Android 不支持共享 OpenGL 上下文，因此您必须使用主上下文来创建纹理。您可以在后台线程上加载纹理数据，但使用该数据创建纹理必须在主上下文中完成。Sergey 建议在加载纹理数据后将事件发送到主线程，这在 Android 上是正确的做法。

# javascript - Mootools 按子项数量向容器添加类

> ID：11675555
> 
> 赞同：0
> 
> 时间：2012-07-26T18:20:05.530
> 
> 标签：javascript, html, mootools

我想通过子项的数量为容器元素添加一个类。但是我的代码只为第一个容器添加了一个类，并且添加错误。

这就是我想要做的：

```
<ul>
 <li>
  <div id="container" class="add class here for example col3">
   <div class="child"></div>
   <div class="child"></div>
   <div class="child"></div>
  </div>
 </li>
 <li>
  <div id="container" class="add class here for example col1">
   <div class="child"></div>
  </div>
 </li>
</ul> 
```

我为容器只有一个孩子但它不起作用的情况编写了这段代码。这会将 col1 类广告到具有 3 个孩子的第一个容器:(

```
window.addEvent('domready', function() {
    var children = $('container').getChildren('div.child');
    if(children.length = 1) {
      $('container').set('class', 'col1');
    }
}); 
```

所以我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:26:56.013

您的问题是您为所有容器分配了相同的 ID。尝试这样的事情：

```
window.addEvent("domready", function(){
    $$("div.container").each(function(item, i){
        var childCount = item.getChildren("div.child").length;
        item.addClass("col" + childCount);
    });​​​​​​​​
}); 
```

HTML：

```
<ul>
 <li>
  <div class="container">
   <div class="child"></div>
   <div class="child"></div>
   <div class="child"></div>
  </div>
 </li>
 <li>
  <div class="container">
   <div class="child"></div>
  </div>
 </li>
</ul>​ 
```

看到它在这里工作：http: [//jsfiddle.net/kSVL5/](http://jsfiddle.net/kSVL5/)

# jsf - PrimeFaces + PrimeFaces Mobile + MyFaces ExtVal 的渲染问题

> ID：11675558
> 
> 赞同：1
> 
> 时间：2012-07-26T18:20:16.340
> 
> 标签：jsf, primefaces, myfaces, omnifaces

我正在尝试将这三个框架一起使用：PrimeFaces、PrimeFaces Mobile 和 MyFaces ExtVal。库版本为：PF 3.3.1、PF Mobile 0.9.3、MyFaces ExtVal 2.0.5。考虑以下代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
    <f:view>
        <h:head>
            <meta charset="UTF-8" />
            <title>Primefaces Mobile test</title>
        </h:head>
        <h:body>
            <h:form>
                <p:commandButton value="Oi" />
            </h:form>
        </h:body>
    </f:view>
</html> 
```

如果项目只有 PrimeFaces 和 Mobile jar，则呈现的 commandButton 符合预期：

```
<button id="j_idt6:j_idt7" name="j_idt6:j_idt7" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="PrimeFaces.ab({source:'j_idt6:j_idt7'});return false;" type="submit"><span class="ui-button-text">Oi</span></button> 
```

这是默认的 PrimeFaces 渲染器。如果我将 f:view 配置为 renderKitId 作为 PRIMEFACES_MOBILE，则呈现的按钮是：

```
<button id="j_idt6:j_idt7" name="j_idt6:j_idt7" type="submit" data-iconpos="left" onclick="PrimeFaces.ab({source:'j_idt6:j_idt7'});return false;">Oi</button> 
```

正如预期的那样，它也可以。现在，添加 MyFaces ExtVal 罐子，一切都会中断，只有 PRIMEFACES_MOBILE 是组件的渲染器。为了测试行为，我添加了 jar：myfaces-extval-bean-validation-2.0.5.jar、myfaces-extval-core-2.0.5.jar 和 myfaces-extval-property-validation-2.0.5.jar。然后我删除了 renderKitId，所以应该使用默认的 PrimeFaces 库，但结果还是：

```
<button id="j_idt6:j_idt7" name="j_idt6:j_idt7" type="submit" data-iconpos="left" onclick="PrimeFaces.ab({source:'j_idt6:j_idt7'});return false;">Oi</button> 
```

我尝试将 f:view 中的 renderKitId 强制为 HTML_BASIC，但它一直在渲染 PrimeFaces Mobile 版本的 commandButton。

所以小伙伴们有什么建议吗？在定义 RenderKitId 之前，我的系统是好的，当我升级库时，我得到了这个错误。我在[PrimeFaces 论坛上发帖](http://forum.primefaces.org/viewtopic.php?f=8&t=19910)，但我找不到解决方法，也看不出为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:49:19.270

对于那些遇到与我相同的错误的人，此问题特定于 MyFaces EXTVAL 使用 renderkit id 的方式。今天，在@Howard 的帮助下，我看到了 EXTVAL 人员的一个新修复，它解决了这个问题。

To see more information: [https://issues.apache.org/jira/browse/EXTVAL-151](https://issues.apache.org/jira/browse/EXTVAL-151) [http://forum.primefaces.org/viewtopic.php?p=90933#p90933](http://forum.primefaces.org/viewtopic.php?p=90933#p90933)

I would like to thank @Howard for the support since last year, and the MyFaces EXTVAL team for the fix. Regards.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:24:58.720

@Fernando，我刚刚报告了我在使用 OmniFaces、MyFaces JAR 和 PrimeFaces Mobile JAR 时遇到的类似问题。OmniFaces 修复了它，并说如下：

> 项目成员 balusc 的评论 4，今天（4 小时前）在 MyFaces 中，渲染工具包 ID 在构建视图期间设置（在 Mojarra 中，在创建视图期间设置）。因此临时视图没有正确的渲染工具包 ID。
> 
> 已修复：[查看源代码](https://github.com/omnifaces/omnifaces/commit/f1dbe713fec889fab2af6ffedc517b4d108e1cd8)

这“可能”也可以解决您的问题。它在 OmniFaces 1.3 中可用。将 JAR 添加到您的类路径中，重新测试并回复测试结果。我认为您没有必要对 web.xml 或 faces-config.xml 进行任何更改。如果我没记错的话，OmniFaces 有一个名为 OmniPartialView(Context) 的 PartialViewContext，但您可能需要将 OmniFaces 的 FullAjaxExceptionHandler 添加到 faces-config.xml，这可能会为您解决这个问题。

# bash - 为什么是 -1 | xargs -I{} echo -n {}{}{} 打印顺序不正确？

> ID：11675560
> 
> 赞同：1
> 
> 时间：2012-07-26T18:20:23.203
> 
> 标签：bash, printing, xargs, ls

```
Ubuntu$ ls -1 
```

文件 1 文件 2

```
Ubuntu$ ls -1 | xargs -I{} echo -n {}{}{} 
```

文件1文件1文件1文件2文件2文件2

为什么我没有按这个顺序得到结果？：file1file2file1file2file1fil2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:27:28.560

因为对其输入中的每个单词`xargs`执行命令 ( `echo`)。当然`{}`每次都是一样的。即使你重复很多次。

你可以做你想做的事`for`：

```
ls=$(ls -1)
for i in {1..3}
do
  echo $ls
done 
```

使用示例：

```
$ mkdir d ; cd d
<d>$ touch file1 file2 file3
<d>$ ls=$(ls -1)
<d>$ for i in {1..3}
> do
>   echo $ls
> done
file1 file2 file3
file1 file2 file3
file1 file2 file3 
```

# .htaccess - 重定向到 https 几乎可以工作，但不完全

> ID：11675561
> 
> 赞同：0
> 
> 时间：2012-07-26T18:20:29.750
> 
> 标签：.htaccess, redirect, https

我有一个网站，我希望有以下重定向：

```
1\. http://mysite.net     => https://www.mysite.com
2\. http://www.mysite.net => https://www.mysite.com
3\. http://mysite.com     => https://www.mysite.com
4\. http://www.mysite.com => https://www.mysite.com 
```

我已经实现了 1、2 和 3，但由于“重定向太多”，我在第 4 个方面遇到了麻烦。这是我的 htaccess：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite.com$ [OR]
RewriteCond %{HTTP_HOST} ^(www.)?mysite\.net$
RewriteRule ^/?$ "https\:\/\/www\.mysite\.com\/" [R=301,L]

# Use PHP5.3 as default
AddHandler application/x-httpd-php53 .php

# Send all traffic of main domain to subdirectory

RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !^/sites/mysite.com/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ sites/mysite.com/$1 [L]

RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteRule ^(/)?$ sites/mysite.com/index.php [L] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:12:19.537

Ant的神奇解决方案是：

```
RewriteEngine on

RewriteCond %{SERVER_PORT} !^443$
RewriteCond %{HTTP_HOST} ^(www.)?mysite\.com$ [OR]
RewriteCond %{HTTP_HOST} ^(www.)?mysite\.net$
RewriteRule ^/?$ "https\:\/\/www\.mysite\.com\/" [R=301,L]

# Use PHP5.3 as default
AddHandler application/x-httpd-php53 .php

# Send all traffic of main domain to subdirectory

RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !^/sites/mysite.com/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ sites/mysite.com/$1 [L]

RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteRule ^(/)?$ sites/mysite.com/index.php [L] 
```

# mysql - 我无法解决数据库中的错误

> ID：11675565
> 
> 赞同：-1
> 
> 时间：2012-07-26T18:20:43.640
> 
> 标签：mysql, database, create-table

> **可能重复：**
> [我在数据库中有错误](https://stackoverflow.com/questions/11675148/i-have-mistake-in-database)

```
create table Ticket (
ticket_id integer not null primary key,
AirlineName varchar not null,
CustomerName varchar,
fromCity varchar,
toCity varchar,
fltNo integer,
TicketDate date,
Dtime TIME,
Atime time,
price integer); 
```

请帮助我，我找不到错误。该程序是我的sql，这是错误

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“not null，CustomerName varchar，fromCity varchar，toCity varchar，fltNo inte”附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:28:55.953

现在我知道它是 MySQL：

您的 varchars 应该有长度（并且 phpMyAdmin 似乎使用 INT 而不是整数，但两者似乎都是有效的）

```
CREATE TABLE Ticket(
ticket_id INT PRIMARY KEY ,
AirlineName VARCHAR( 255 ) NOT NULL ,
CustomerName VARCHAR( 255 ) ,
fromCity VARCHAR( 255 ) ,
toCity VARCHAR( 255 ) ,
fltNo INT,
TicketDate DATE,
Dtime TIME,
Atime TIME,
price INT
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:28:34.910

可能的解决方案......
在你的情况下，你使用mysql，所以这是正确的语法。
记得把 VARCHAR 长度...

```
 create table Ticket (
        ticket_id int not null,
        AirlineName varchar(255) not null,
        CustomerName varchar(255),
        fromCity varchar(255),
        toCity varchar(255),
        fltNo integer,
        TicketDate date,
        Dtime TIME,
        Atime time,
        price int, 
        primary key (ticket_id)
    ); 
```

# objective-c - Cocos2d 菜单未注册触摸

> ID：11675566
> 
> 赞同：0
> 
> 时间：2012-07-26T18:20:44.307
> 
> 标签：objective-c, ios, cocos2d-iphone

我创建了一个新层，向它们添加了三个菜单项，并且我对它们中的每一个都有方法，它们登录到控制台并切换视图，但没有任何反应。为什么会这样？

```
- (id) init
{
  if (self = [super init])
  {  
    [self setIsTouchEnabled:YES];
    CCSprite *background = [CCSprite spriteWithFile:@"bg.png"];
    [background setPosition:CGPointMake(size.width / 2, size.height / 2)];
    [self addChild:background z: 0];
    CCMenuItemFont *menu1 = [CCMenuItemFont itemFromString:@"New game" target:self selector:@selector(startNewGame)];
    [menu1 setPosition:CGPointMake(size.width / 2, 330)];
    CCMenuItemFont *menu2 = [CCMenuItemFont itemFromString:@"Options" target:self selector:@selector(options)];
    [menu2 setPosition:CGPointMake(size.width / 2, 250)];
    CCMenuItemFont *menu3 = [CCMenuItemFont itemFromString:@"Credits" target:self selector:@selector(credits)];
    [menu3 setPosition:CGPointMake(size.width / 2, 170)];
    [self addChild:menu1];
    [self addChild:menu2];
    [self addChild:menu3];
  }
  return self;
}

- (void) credits
{
  NSLog(@"In credits");
}

// same methods for new game and options. It never gets called. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:34:06.410

CCMenuItem 实例必须添加到 CCMenu 实例中，该实例必须添加到图层中。

```
CCMenu *mainMenu = [CCMenu menuWithItems:menu1, menu2, menu3, nil];
mainMenu.position = CGPointZero;
[self addChild:mainMenu]; 
```

祝你好运！

# python - python中的宏

> ID：11675569
> 
> 赞同：2
> 
> 时间：2012-07-26T18:21:02.523
> 
> 标签：python, macros, code-generation, macropy

在我的项目中，我必须经常重复这部分代码：

```
class SimplePhysicObject(Object):
    def __init__(self):
        super(Object, self).__init__('SimplePhysicObject') 
```

但不是`SimplePhysicObject`每次都有新字符串。有没有办法编写一些宏来使这项工作更容易？就像是：

```
DoTemplate(NewObject)
==>
class NewObject(Object):
    def __init__(self):
        super(Object, self).__init__('NewObject') 
```

* * *

**UPD**对不起，`Object`我自己的类之前在代码中声明过

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T18:30:22.360

我看不出为什么`Object`需要实际的类名作为参数。`Object`您可以通过以下方式访问实际的类名`self.__class__.__name__`：

```
class Object(object):
    def __init__(self):
        self.name = self.__class__.__name__

class SimplePhysicObject(Object):
    pass

a = SimplePhysicObject()
print a.name 
```

将打印

```
SimplePhysicObject 
```

这与您的原始代码略有不同：如果您从 派生`SimplePhysicObject`，则该`name`属性将设置为派生类的名称，而您的原始代码将继续使用`"SimplePhysicObject"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T18:22:54.013

得到论证`super(…).__init__`并不难。它将类对象作为`super`自己的参数，最好手动处理：

```
class SimplePhysicObject(Object):
    def __init__(self):
        cls = SimplePhysicObject
        super(cls, self).__init__(cls.__name__) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:35:28.197

为了做一些接近你想要的事情而不是替代方法，你可以使用这样的东西：

```
CLASS_TEMPLATE = """
class {name}(object):
    def __init__(self):
        super({name}, self).__init__('{name}')
"""

def main():
    name = "SimplePhysicsObject"
    exec CLASS_TEMPLATE.format(name=name)
    print locals()[name]

if __name__ == '__main__':
    main() 
```

这对 Python 2.7 有效。（看到您使用的是旧`super()`语法。）如果您使用的是 Python 3.2，您可以查看它的实现[`collections.namedtuple`](http://docs.python.org/library/collections.html?highlight=collections.namedtuple#collections.namedtuple)，它还动态创建类以了解如何使用新[`exec()`](http://docs.python.org/py3k/library/functions.html?highlight=exec#exec)函数。

重要的一点是，这不是一个真正的宏，它不会在“编译器”处理它之前扩展为类定义。它将返回一个新`type`对象，由您来确保它进入正确的命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:22:41.077

您完全可以这样做，让`DoTemplate`函数返回一个新的实例化类，然后您可以从 Objects`__class__`字符串中获取类名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T20:10:47.760

我认为 MacroPy 是您正在寻找的： [https ://github.com/lihaoyi/macropy#case-classes](https://github.com/lihaoyi/macropy#case-classes)

# python - 参数化 sql 查询和安全性

> ID：11675577
> 
> 赞同：0
> 
> 时间：2012-07-26T18:21:34.777
> 
> 标签：python, sql, sqlite, sql-injection

我正在创建一个 Web 服务，它应该为探索数据集提供很大的灵活性。现在，为了在 SQL 中执行此操作，我发现手动创建查询比使用参数更容易（如下面的“选择”）。这将使 where sql 查询的生成更加容易（参见下面 where 变量的元组），例如，根据： http: [//docs.python.org/library/sqlite3.html](http://docs.python.org/library/sqlite3.html)；更不安全。

我的问题是，有没有办法让它成为一个安全的选择？换句话说，是否有一种安全的方式来执行“手动”构建的查询？

我在想的是，如果我确保正在运行的查询以“SELECT”开头，那么应该保护我免受会改变数据的查询的影响。这是一个好主意吗？有没有更好的方法？或者参数化查询是避免 SQL 注入的唯一方法？

```
select = ['a','b']
where = [('a','=',1),('b','=',2)]
def retrieve(self,table,select,where='',groupBy=''):
   select = ','.join(select)
   sql = 'SELECT '+select+' FROM '+table
   self.cur.execute(sql)
   return self.cur.fetchall() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:30:45.620

不，这不是一个好主意。[OWASP top 10（注入排在首位）](https://www.owasp.org/index.php/Top_10_2010-A1)是一个很好的信息来源和最佳实践。

作为旁注，您可能想要使用非常强大且广泛使用的[SQL Alchemy 。](http://www.sqlalchemy.org/)它会给你（我猜）你正在寻找的所有灵活性。

# eclipse - 如何解决 JDT 中 IMethod 的绑定问题

> ID：11675578
> 
> 赞同：2
> 
> 时间：2012-07-26T18:21:35.647
> 
> 标签：eclipse, eclipse-jdt

我试图在 JDT 中不使用 AST 解析器的情况下找到被覆盖的方法。当我比较 Class 文件和 K-Source 文件 (ICompilationUnit) 中的方法签名时，它们似乎有所不同。源文件的问题是，它的绑定没有解决，它给出`QString`而不是`java.lang.string`. 有谁知道如何在不处理 AST 的情况下解决源文件的这些绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:00:21.563

您只能在构造 AST 后解析绑定。或者，如果您在某处缓存了绑定密钥，则可以获取绑定，但绑定密钥将再次从绑定本身获得。因此，在某些时候，您将不得不解析绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:28:04.630

这段代码：

```
Signature.toString("QString") 
```

会去工作。

# iphone - 从后台重新启动应用程序到前台

> ID：11675579
> 
> 赞同：1
> 
> 时间：2012-07-26T18:21:36.903
> 
> 标签：iphone, objective-c, cocoa-touch, uitextview

您好正在开发一个 iPhone 应用程序。当我单击 UITextView 中的链接时，该链接在 safari 中打开，我的应用程序进入后台。关闭 safari 后，我单击了我的应用程序图标，它再次被带到了前台。我的问题是，当我关闭 safari 时，我们是否可以自动将应用程序带回前台，而无需单击应用程序图标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:27:32.687

不，您无法检测到用户何时关闭 Safari，您可以做的是为您的应用程序注册一个 URL 方案并使其成为 Web 视图中的链接。基本上是网页上的返回应用程序按钮。本教程应该对您有所帮助：http: [//mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

# javascript - Ember.js 使用路由器架构获取父路由的控制器

> ID：11675585
> 
> 赞同：2
> 
> 时间：2012-07-26T18:21:54.883
> 
> 标签：javascript, coffeescript, ember.js, ember-old-router

如果我有一个使用[Router 架构](http://emberjs.com/guides/outlets/)的应用程序，我如何获取父路由的控制器？

假设像这样的路线

```
Router: Ember.Router.extend 
    enableLogging: true
    root: Ember.Route.extend
        main: Ember.Route.extend
            route: '/'
            connectOutlets: (router, event) ->
                 router.get('applicationController').connectOutlet('main')
            editor: Ember.Route.extend
                route: '/editor'
                connectOutlets: (router, event) ->
                    router.get('mainController').connectOutlet('editor') 
```

那么我将如何`EditorController`获得我的`MainController`？

我试过了`@get('parentController')`，没有成功`@get('parent')``@get('controller')`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T20:21:31.007

You can access the router through the `target` property of a controller.

e.g, in your case, from any controller:

```
@get('target.mainController') 
```

Or, if you do not use head revision of Ember:

```
@getPath('target.mainController') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T23:41:19.633

根据我的理解，一个应用程序应该只有一个路由器，所以我们为什么不这样做：

```
@get('App.router.mainController') 
```

我不知道什么是正确的方法！我觉得“目标”正在存储向其发送动作或事件的对象。

# php - php上传不离开页面

> ID：11675588
> 
> 赞同：-4
> 
> 时间：2012-07-26T18:22:04.853
> 
> 标签：php, ajax, json, file, upload

只是想知道是否有人可以帮助解决这个问题：

假设我有一个如下表格：

```
<form name="mymainform" method="post" action="step2code.php"> 

  Enter Description : <input type="text" value="" name="description" />

  Enter File URL (or press upload): <input type="text" value="" name="fileurl" />

  <input type="button" name="uploadbutton" onclick="DO_CODE_HERE" />

  <input type="submit" name="func" value="Next Step" /> 

</form> 
```

基本上，只是一个允许您输入描述和文件（图像）URL 的表单 - 当您单击“下一步”按钮时，它会将描述文本（描述）和 URL（文件URL）传递给它调用的下一个程序(step2code.php) - 如果用户输入描述并手动输入 URL，这将正常工作 - 它将继续运行 step2code.php 并处理数据。

但是，我想做的是，如果有人按下名为“上传按钮”的按钮，它允许您从计算机中选择一个文件，然后将其上传到预定目录（该目录已经设置在变量中） -但是，文件上传后，我不希望表单刷新（此处未显示许多其他数据） - 我只希望它（如果成功）返回上传文件的 URL 并将其放在字段中“文件网址”。

请问有什么最简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:27:30.013

你试过`<input type="file">`吗？[可能不是]

此外，您将需要使用 iframe 或一些类似的技术，以便在不刷新页面的情况下上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:27:40.293

制作上传文件并让提交按钮将您重定向到同一页面的函数，如果设置了一些变量（php中的isset），请检查一些变量，上传成功。您可以使用这些变量来保存上传文件的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:31:42.240

正如其他人（包括评论中的我自己）所说，您不能异步上传文件。您需要使用 iframe 或 flash/silverlight。

```
<form name="mymainform" method="post" action="step2code.php" enctype="multipart/form-data" > 

  Enter Description : <input type="text" value="" name="description" />

  Enter File URL (or press upload): <input type="file" name="fileurl" />

  <input type="button" name="uploadbutton" onclick="DO_CODE_HERE" />

  <input type="submit" name="func" value="Next Step" /> 

</form> 
```

如果您使用 iframe，页面看起来没有刷新。

# jquery - Jquery 不使用 val()

> ID：11675594
> 
> 赞同：0
> 
> 时间：2012-07-26T18:22:33.767
> 
> 标签：jquery

我对 jQuery 有一点问题 - 在 jquery ui 确认对话框中，我有 2 个输入：第一个 - 用精确的 value="" 隐藏第二个 - 输入文本 - 这就是问题所在。

当我单击“确定”时，脚本只向我发送第一个值，第二个是空的。但是当我写 value="123" 时，有两个正在发送。

HTML：

```
<input type="text" value="" class="MyIn" id="MyIn" name="MyIn" >
<input type="hidden" value="<?=$r['order_id'];?>" class="orderid" id="orderid" > 
```

JavaScript：

```
 $("a.opener").click(function (e) {
        $("#dialog-message").dialog({

            buttons: {
                Ok: function () {
                    var sendNumber = $("input#MyIn").val();
                    var orderid = $("input#orderid").val();

                    var dataString = 'orderid=' + orderid + '&sendNumber=' + sendNumber;

                    $.ajax({
                        type: "POST",
                        url: "moduls/send.php",
                        data: dataString,
                        success: function () {
                            $("#dialog-message").dialog("close");
                        }
                    });
                    return false;

                }
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:33:47.263

它可能不会有太大的区别，但它可能是一个很好的做法，当通过 AJAX 发送数据时，包含一个 DATATYPE，如下所示：

```
$.ajax({
  type: "POST",
  url: "moduls/send.php",
  data: dataString,
  dataType: 'text',
  success: function () {
    $("#dialog-message").dialog("close");
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:33:48.033

我非常怀疑这`<?=$r['order_id'];?>`是返回一个空字符串。如果是这种情况，它将不会被发送。dataString 也不是在 jQuery 中处理参数的首选方式。贝娄是针对这种情况的一个问题：

```
$("a.opener").click(function (e) {
    $("#dialog-message").dialog({

        buttons: {
            Ok: function () {

                // if sendNumber fails or evaluates to false, 
                // it will be replaced with 'null', insuring its sent anyway
                // and you can trap on the serverside.
                var sendNumber = $("input#MyIn").val() || 'null';
                var orderid = $("input#orderid").val();

                var postData = { orderid : orderid, sendNumber : sendNumber};

                //shorthand of extra niceness
                $.post('moduls/send.php', postData, function(){
                     $("#dialog-message").dialog("close");
                });
                return false;

            }
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:29:16.640

您当前的 jQuery 代码应该可以工作，因为隐藏输入元素的值的引用是有效的。

演示：http: [//jsfiddle.net/3qpV4/](http://jsfiddle.net/3qpV4/)

尝试提醒该值以确保其设置正确。如果不是，那么您知道问题出在您的 PHP 变量扩展中。如果它确实发出警报，那么问题出在您的 PHP 文件`send.php`上。

# java - 如何防止 jar/war/ear 文件的逆向工程

> ID：11675596
> 
> 赞同：0
> 
> 时间：2012-07-26T18:22:37.353
> 
> 标签：java, reverse-engineering

我需要防止 jar/war/ear 文件，我们会将这些文件提供给客户端，并且不希望客户端出于任何原因对文件进行逆向工程。直到他要求我们。

请任何人提供一些建议或是否有任何 api 来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:23:14.773

使用[混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29) [工具](https://stackoverflow.com/questions/11538637/best-tool-for-jar-or-class-obfuscation-without-need-of-writing-any-additional-co)使其变得更加困难

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:38:09.903

虽然我自己没有使用过它，但我听说很多人提到[ProGuard](http://proguard.sourceforge.net/)是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T08:37:58.227

如果

1.  您不需要完全符合 Java EE 并且可以使用 Tomcat
2.  编译为本机代码

* * *

那么一种可能的解决方案是 Exelcior Jet。我长期以来一直在使用他们的专业版来开发桌面应用程序，但他们的企业版也适用于 Web 应用程序。

[http://www.excelsiorjet.com/](http://www.excelsiorjet.com/)

编辑：像 ProGuard 这样的混淆工具有助于使逆向工程变得困难（通过更改方法和类的名称），但仍然只需要一些努力和知识来翻译回代码。但是，如果你编译成原生代码，那么逆向工程是极其困难的。此外，您不需要在客户端机器上安装 Java 运行时（目前这对您来说当然不是问题）。Excelsior Jet 是一种将 Java 代码编译为本机代码的工具。它的企业版有点贵，例如 1500 美元，但对于某些项目来说，这是值得的。它们有不同的版本可以编译为 Windows 本机代码以及 Linux 本机代码。Excelsior Jet 的本机代码也可以针对不同的变量进行优化，例如内存、占用空间和分布大小等等。

**Summary: By compiling to native code, reverse engineering can be made extremely difficult and costly as compared to obfuscation tools.**

# codeigniter - 我可以在子目录中嵌套 CodeIgniter “Helpers”吗？

> ID：11675599
> 
> 赞同：4
> 
> 时间：2012-07-26T18:22:42.573
> 
> 标签：codeigniter

我知道我可以将库嵌套在子文件夹中，但我可以为 Helpers 做同样的事情吗？

最终结果将是具有以下效果：

```
application/helpers/foo/bar_helper.php
application/helpers/baz_helper.php 
```

然后调用助手：

```
$this->load->helper('foo/bar');
$this->load->helper('baz'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:57:46.133

是的，您可以按如下方式存储和加载（经过测试）

```
$this->load->helper('myHelperSubFolder/myHelperName'); 
```

即使在你的`autoload.php`你可以加载一个助手如下

```
$autoload['helper'] = array('url','myHelpers/functions_helper'); // 'myHelpers' is the folder inside my helper folder and 'functions_helper' is my helper file. 
```

# asp.net-mvc - 在 jqGrid ASP.NET MVC 中使用 Multiselect 时 getRowData 的控制器参数是什么

> ID：11675600
> 
> 赞同：0
> 
> 时间：2012-07-26T18:22:42.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我正在使用多选功能选择行并将数据传递给控制器​​，使用 getRowData 传递整行而不是传递单个单元格值。当用户选择单行的复选框时，我会触发 onSelectRow 事件。我能够使用 getRowData 检索行数据并将其传递给接受字符串但数据为空的控制器。下面是我的 onSelectRow 事件。

```
onSelectRow: function (row_id) {

var rowData = $("#employee").getRowData(row_id);
$.ajax({
     type: 'POST',
     url: '/Home/Create/',
     data: { gridData: rowData },
     dataType: "json"
}); 
```

这是我接受字符串参数的控制器操作。

```
public ActionResult Create(string gridData) {} 
```

我已经阅读了其他帖子并尝试在发送到控制器之前使用 Json.stringify 但我很难将其转换为我需要的格式，因此获取行数据对我来说会更灵活地操作它。

我的控制器操作应该接受什么参数以适当地检索 gridData？

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:26:26.023

好的，我遇到了你的问题，首先不要像这样传递 row_id

```
var sel_id = jQuery("#grid").jqGrid('getGridParam', 'selrow'); 
```

这将为您提供所选行的 ID，然后您可以获得这样的数据

```
var val =  jQuery("#grid").jqGrid('getRowData', sel_id); 
```

然后当您发送数据时，您需要对其进行字符串化...让我向您展示一个示例，其中我选择所有行并将数据发送到控制器...看看我的答案在这里

[MultiSelect jqgrid MVC3的OnClickButton函数参数](https://stackoverflow.com/questions/11658625/onclickbutton-function-parameter-for-multiselect-jqgrid-mvc3/11662959#11662959)

# codeigniter - CodeIgniter、Smarty 和表单助手。不触发 form_validation->run()

> ID：11675604
> 
> 赞同：1
> 
> 时间：2012-07-26T18:22:53.283
> 
> 标签：codeigniter, smarty, codeigniter-form-helper

我正在将 CodeIgniter 与 Smarty 一起使用。我遇到的问题是使用表单助手时。我使用[了这里找到的代码](https://github.com/EllisLab/CodeIgniter/wiki/Form-helper-with-Smarty)。

所以当我打开和关闭表单标签时，实际上是使用 CI 原生的`form_open`，`form_close`然后在表单提交之后`form_validation->run()`仍然总是`false`.

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class User extends CI_Controller {

public function index()
{
    $this->register();
}

function register()
{
    $data['title'] = 'Register';
    $this->load->library('form_validation');
    //$this->form_validation->set_rules()
    if($this->form_validation->run() == FALSE)
    {
        //the form has not been submitted or there are errors
        $this->parser->parse("register", $data); 
    }
    else
    {
        //validated and submitted
        die();
    }
}

function login()
{
    $data['title'] = 'Login';
    $this->parser->parse("login", $data);
}
} 
```

模板是

```
Registration page
{form url='user/register'}

<table>
    <tr>
        <td>Username</td>
        <td><input type="text" name="reg_username" id="reg_username"></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><input type="password" name="reg_password" id="reg_password"></td>
    </tr>
    <tr>
        <td>First Name</td>
        <td><input type="text" name="reg_firstname" id="reg_firstname"></td>
    </tr>
    <tr>
        <td>Last Name</td>
        <td><input type="text" name="reg_lastname" id="reg_lastname"></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="submit" value="submitted"/></td>
    </tr>
</table>

{form} 
```

我希望`die()`在提交表单时执行命令不是 - 请告诉我我做错了什么？

PS 我用来将 Smarty 集成到 CodeIgniter 的方法是[https://github.com/Vheissu/Ci-Smarty](https://github.com/Vheissu/Ci-Smarty)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:19:18.993

您必须在方法中[设置至少一个验证规则](http://codeigniter.com/user_guide/libraries/form_validation.html#validationrules)`register()`。例如，类似：

```
$this->form_validation->set_rules('reg_username', 'Username', 'required'); 
```

从[Form_validation 类文档](http://codeigniter.com/user_guide/libraries/form_validation.html)中：

> 由于您尚未告诉 Form Validation 类验证任何内容，因此默认情况下它返回 FALSE（布尔值 false）。该`run()`函数仅`TRUE`在成功应用您的规则且没有任何失败的情况下返回。

# css - 打印时隐藏边框和调整大小（更改缩放）

> ID：11675608
> 
> 赞同：0
> 
> 时间：2012-07-26T18:23:06.567
> 
> 标签：css, printing, zooming, border, media

有问题的网站：http: [//www.blues-n-brews.com/paypal_receipt.php?tx=17G30980M69737722](http://www.blues-n-brews.com/paypal_receipt.php?tx=17G30980M69737722)

我有这个：

`<div id="print_special" style="width: 1050px; zoom: 0.8; margin: 0 auto; text-align: center; border: 5px solid black">`

其中，当用户打印/预览时，我希望它将缩放更改为 100% 并摆脱边框。

我在尝试：

```
@media print
{
    #print_special {
        border-style: none;
        border: 0px solid black;
        zoom: 1;
    }
} 
```

但它并没有像想象的那样工作。如果我这样做`display:none;`，它会按预期摆脱 div，所以我知道@media 打印工作正常。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:40:45.333

您的内联 CSS 覆盖了您的打印样式表。您要做的最简单的事情是更改您的 @media print {} 样式，如下所示：

```
@media print
{
    #print_special { border: none !important; zoom: 1 } 
} 
```

!important 部分告诉浏览器您不希望该值被级联进一步定义的样式覆盖。更进一步，我建议将所有样式信息从标记中提取出来，并将其全部放入包含媒体查询的 CSS 文件中，这样您就不必担心级联问题。但是，如果您不想这样做，请使用 !important。

# android - Android 活动/数组适配器

> ID：11675611
> 
> 赞同：0
> 
> 时间：2012-07-26T18:23:15.453
> 
> 标签：android, android-arrayadapter

我在适配器中检索数组中的项目时遇到问题，希望有人能告诉我灯...

在我的应用程序中，我使用了很多 listView 并使用数组适配器来显示行中的数据，我对此很好。

我的活动

```
protected void onPostExecute(CarDetail list) {
   List<CarPhotos> photos = list.getPhotos();
         System.out.println("retrieving Photos");
         for (CarPhotos photo : photos) {
            PhotoArray.add(photo);
            System.out.println(photo);
        }
}
System.out.println(PhotoArray.size());
photoAdapter.notifyDataSetChanged(); 
```

我的适配器（通常使用它在列表中的一行中显示数据）

```
public View getView(int position, View convertView, ViewGroup parent)
{
ViewHolder holder;
    //Get the current location object
    CarPhotos lm = (CarPhotos) getItem(position);

    ......etc
    holder.thumbnailname.setText(lm.getThumbnailName());
return convertView;
} 
```

但是，如果我想获取该数组中的计数和所有项目而不是特定的行位置，我该怎么做呢？（即：列出所有缩略图名称并计入 1 个单元格/行）

提前感谢=）

# ruby - 无法安装 eventmachine ruby gem。使用 RVM、MacOS Lion

> ID：11675614
> 
> 赞同：0
> 
> 时间：2012-07-26T18:23:16.770
> 
> 标签：ruby, gem, rvm, eventmachine, thin

我在 MacOS Lion（内核 v11.4.0）上使用 RVM v1.10.2、ruby v1.9.3p0 和 ruby​​ gems v1.8.15。

我使用 sinatra 为基于机架的项目创建了一个 gemset，并安装了一堆 gem，包括 eventmachine（由于安装了 thin）。没问题。

几周后，我为一个类似的项目创建了一个新的 gemset，但是当我尝试安装 Thin 时，一切都失败了。看起来编译 eventmachine 有问题。我尝试创建一个新的 gemset 并自行安装 eventmachine。没运气。我不知道为什么它曾经工作过，但现在失败了。

* * *

每当我`gem install eventmachine`，它是这样的：

```
Fetching: eventmachine-0.12.10.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing eventmachine:
        ERROR: Failed to build gem native extension.

        /Users/jared/.rvm/rubies/ruby-1.9.3-p0/bin/ruby extconf.rb
checking for rb_trap_immediate in ruby.h,rubysig.h... no
checking for rb_thread_blocking_region()... yes
checking for inotify_init() in sys/inotify.h... no
checking for __NR_inotify_init in sys/syscall.h... no
checking for writev() in sys/uio.h... yes
checking for rb_thread_check_ints()... yes
checking for rb_time_new()... yes
checking for sys/event.h... yes
checking for sys/queue.h... yes
creating Makefile

make 
```

然后它会在尝试编译各种文件时发出 bajillion 警告，最后是这个有趣的位：

```
linking shared-object rubyeventmachine.bundle
ld: warning: ignoring file /usr/local/lib/libz.dylib, file was built for unsupported file format which is not the architecture being linked (x86_64)
ld: in /usr/local/lib/libz.1.dylib, file was built for unsupported file format which is not the architecture being linked (x86_64) for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [rubyeventmachine.bundle] Error 1 
```

这是完整的输出：[https ://dl.dropbox.com/u/5382910/stackoverflow/gem_make.out](https://dl.dropbox.com/u/5382910/stackoverflow/gem_make.out)

* * *

我安装其他 gem 没有问题，所以我怀疑这是编译器问题，但这里是 的输出`gcc -v`，以防有人发现某些东西：

```
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.1~1/src/configure --disable-checking --enable-werror --prefix=/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.1~1/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00) 
```

* * *

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:43:39.160

您正在使用 clang / LLVM 来构建 ruby​​ - 这只是实验性支持，您需要使用不基于 LLVM 的 gcc-4.2，这在 rvm 要求中描述得很好：

```
rvm get head     # get the latest update with the new requirements
rvm requirements # read carefully and follow instructions! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:50:10.780

这一行是关键：

```
ld: in /usr/local/lib/libz.1.dylib, file was built for unsupported file format which is not the architecture being linked (x86_64) for architecture x86_64 
```

这是输出中唯一不只是警告的内容。我不敢相信我忽略了它。这就是导致 clang 报告的原因`error: linker command failed`。在遇到以下问题后我意识到了这一点：[Trouble Installation Ruby 1.9.2 with RVM Mac OS X](https://stackoverflow.com/questions/5426892/trouble-installing-ruby-1-9-2-with-rvm-mac-os-x)。

`/usr/local/lib/libz.1.dylib`只是一个符号链接`/usr/local/lib/libz.1.2.5.dylib`，根据文件上的日期，它是在我第一次安装 eventmachine 之后的某个时间创建的。所以，我刚刚删除`/usr/local/lib/libz.1.dylib`，我能够成功安装 eventmachine。我什至恢复到 LLVM gcc，它仍然有效。

# java - 通话按钮不起作用

> ID：11675619
> 
> 赞同：0
> 
> 时间：2012-07-26T18:23:39.177
> 
> 标签：java, android, text-to-speech

我的应用程序有`Buttons`，当你按下`Buttons`它们时，他们会使用文字转语音来说话。

我的`Buttons`工作很好，但是当我设置`id.talk` `Button`并给它语音命令时，它什么也没做。当我点击它时，什么也没有发生。

```
public void onClick(View v) {
    switch (v.getId()) {

    // use switch case so each button does a different thing
    // accurately(similar to an if statement)
    case R.id.btn_speak:
        String words1 = speakButton.getText().toString();

        // speakwords(xxxx); is the piece of code that actually calls the
        // text to speech
        speakWords(words1);
        Intent voiceIntent = new Intent(
                "android.intent.action.RECOGNITIONMENU");
        startActivity(voiceIntent);
        break;
    case R.id.aboutbutton:
        String words2 = infoButton.getText().toString();
        speakWords(words2);
        Intent infoIntent = new Intent("android.intent.action.INFOSCREEN");
        startActivity(infoIntent);
        break;
    case R.id.voicebutton:
        speakWords("Speak Now");
        startVoiceRecognitionActivity(); // call for voice recognition
                                            // activity
        break;
    case R.id.talk:
        speakWords("This is the main menu.");
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:26:39.347

```
btn =(Button) findViewById(R.id.talk);
                                ^^^^

btn.setOnClickListener(this);<--- 
```

您是否已将侦听器添加到新按钮？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:33:23.853

**请检查您是否使用 OnClickListener 注册了您的按钮**

**例如：**

```
 mbutt = (Button) findViewById(R.id.talk);
   mbutt.setOnclickListener(this); 
```

# java - 创建对象的副本而不处理它的属性引用

> ID：11675621
> 
> 赞同：0
> 
> 时间：2012-07-26T18:23:40.217
> 
> 标签：java

解释：

```
public class SomeClass {
  int aNumber = 0;

  public void changeNumber(int number){
    aNumber = number;
  }

  public int getNumber(){
    return aNumber;
  }
} 

public class Testapp {

  public static void main(String[] args) {
    NewClass object1 = new NewClass();
    NewClass object2 = object1;

    object1.changeNumber(5);
    object2.changeNumber(2);
    System.out.println("object1: "+object1.getNumber());
    System.out.println("object2: "+object2.getNumber());
  }
} 
```

这将输出：object1:2 object2:2

我如何让它输出：object1：5 object2：2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:28:08.707

你有两个选择：

1）实现一个复制构造函数：

```
public SomeClass(SomeClass c) {
  this.aNumber = c.aNumber;
} 
```

然后创建一个副本：

```
SomeClass object2 = new SomeClass(object1); 
```

2）实现Cloneable接口并覆盖Object.clone()：

```
public class SomeClass implements Cloneable {
  public SomeClass clone() {
    super.clone();
  }
} 
```

然后创建一个副本：

```
SomeClass object2 = object1.clone(); 
```

**注意：**我省略了任何不变的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:25:39.157

您不是在复制对象，而是在复制引用。这意味着两个变量都引用同一个对象。

要创建对象，您必须使用`new`或调用使用它的方法。

既然你想要一个副本，你应该让你的对象实现`Cloneable`（如果需要，实现`clone()`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:26:32.447

你现在的设置方式是两者`object1`都`object2`指向内存中的同一个位置。你必须这样做：

```
NewClass object1 = new NewClass();
NewClass object2 = new NewClass();
object1.changeNumber(5);
object2.changeNumber(2);
System.out.println("object1: "+object1.getNumber());
System.out.println("object2: "+object2.getNumber()); 
```

这样，`object1`和`object2`是完全独立的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:26:03.960

```
 public class Testapp {
public static void main(String[] args) {
 NewClass object1 = new NewClass();
 NewClass object2 = new NewClass();
  object1.changeNumber(5);
 object2.changeNumber(2);
 System.out.println("object1: "+object1.getNumber());
 System.out.println("object2: "+object2.getNumber());   } } 
```

您应该调用对象的新实例化，否则它们会引用内存中的相同位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T18:31:07.460

**1.**您**复制了引用而不是对象。**

**2.**由于两个**对象引用变量都指向堆上的同一个对象，所以你得到 2 作为它们的答案。**

**3.**使用`new` **运算符创建另一个对象并将其分配给 object2 引用。**

**还有一件事......它不是NewClass，而是您的代码中提到的SomeClass**

```
SomeClass object1 = new SomeClass();
SomeClass object2 = new SomeClass();
object1.changeNumber(5);
object2.changeNumber(2);
System.out.println("object1: "+object1.getNumber());
System.out.println("object2: "+object2.getNumber()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T18:42:18.663

对象是类的一个实例并且能够保持状态。对象是使用`new`运算符创建的 - 在您的情况下，对象是在`new NewClass()`

`NewClass object1`并且`NewClass object2`是对象引用变量 - 这些就像 C/C++ 中的指针。引用变量不保存状态——它们只是指向对象状态所在的内存位置。

当您说`NewClass object1 = new NewClass()`-`new`运算符创建 NewClass 的实例并返回存储在`object1`引用变量中的内存位置。当你说`NewClass object2 = object1`- 保存的内存位置详细信息`object1`被复制到`object2`- 这里要注意的重要一点是没有创建新对象。只有一个对象，因此只有一个状态 - 这就是为什么当您使用`object1`或`object2`引用变量更改状态时，先前的值会被覆盖。

如果你想要两个对象，那么你需要调用`new`两次——这将为每个对象分配单独的内存位置。如果您有一个对象并且想要对象的类似副本 - 将其状态复制到新的内存位置 - 那么您需要使用类的`clone()`方法`Object`。克隆创建一个新对象并将对象的当前状态复制到新对象 - 因此，如果您调用`NewClass object2 = object1.clone()`它将创建新对象并将 object1 的状态复制到该对象，则返回对的引用`object2`- 这里`object2`也称为本地副本。您需要遵循 java 规范进行克隆 - 即您需要实现`Cloneable`接口以支持对象克隆 - 请参考此链接以[http://en.wikipedia.org/wiki/Clone_(Java_method](http://en.wikipedia.org/wiki/Clone_(Java_method) )开头

# c# - 将字符串拆分为不带分隔符的数组

> ID：11675622
> 
> 赞同：3
> 
> 时间：2012-07-26T18:23:55.710
> 
> 标签：c#, .net, vb.net

我有一个像`s = "abcdefgh"`. 我想按字符数拆分它，例如：

```
a(0)="ab"
a(1)="cd"
a(2)="ef"
a(3)="gh" 
```

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:37:12.090

您可以使用正则表达式拆分为两个字符组：

```
Dim parts = Regex.Matches(s, ".{2}").Cast(Of Match)().Select(Function(m) m.Value) 
```

演示： http: [//ideone.com/ZVL2a](http://ideone.com/ZVL2a) (C#)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:50:43.310

这是一个不需要编写循环的 Linq 方法：

```
 Const splitLength As Integer = 2
    Dim a = Enumerable.Range(0, s.Length \ splitLength).
        Select(Function(i) s.Substring(i * splitLength, splitLength)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:29:25.317

每 2 个字符拆分一次，这就是我认为你想要的

```
 Dim s As String = "aabbccdd"

    For i As Integer = 0 To s.Length - 1 Step 1
        If i Mod 2 = 0 Then
            Console.WriteLine(s.Substring(i, 2))
        End If
    Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:30:38.990

我会使用 a`List(Of String)`代替，它简化了它：

```
Dim s = "aabbccdde" ' yes, it works also with an odd number of chars '
Dim len = 2
Dim list = New List(Of String)
For i = 0 To s.Length - 1 Step len
    Dim part = If(i + len > s.Length, s.Substring(i), s.Substring(i, len))
    list.Add(part)
Next
Dim result = list.ToArray() ' if you really need that array ' 
```

# css - 菜单打开时与 html 正文重叠的动态 CSS 菜单

> ID：11675624
> 
> 赞同：0
> 
> 时间：2012-07-26T18:24:02.113
> 
> 标签：css, xhtml, css-float

我现在有一个仅动态 CSS 的菜单（我的第一个），但是当菜单展开时，它会在菜单打开时将其下方的正文内容向下推，并在菜单关闭时将其备份。防止这种情况的最佳 CSS 方法是什么，以便菜单在正文上方打开？这是显示我在说什么的页面：

[http://fundunity.com/test.htm](http://fundunity.com/test.htm)

更新：我可能应该补充一点，我希望菜单在打开时覆盖（不显示）正文信息。

任何帮助表示赞赏！布洛克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:35:12.963

您需要绝对定位您的子导航。

给父元素`position:relative;`，然后给你的子导航`position:absolute`

然后，您可能需要根据您显示/隐藏子导航的方式更改一些 CSS / Javascript 以使其正常运行，但这是如何做到这一点的基础知识。

# java - 表单提交后显示消息的方法

> ID：11675626
> 
> 赞同：0
> 
> 时间：2012-07-26T18:24:06.403
> 
> 标签：java, javascript, html, jakarta-ee

我有一个包含姓名、电子邮件、消息和验证码字段的表单。

我可以提交表单并可以在服务器端验证验证码，如果一切正常，我必须使用 requestDispatcher 显示一个 jsp。如果验证码正确，一切正常，但如果不正确，我会将用户重定向到显示表单的同一页面，以便用户可以重新输入验证码。但是这种方法的主要问题是表格被清除了，这意味着用户必须重新填写整个表格。我怎样才能避免这种事情，以便用户不需要重新填写表格。

他们还有其他更好的方法吗？

我已经尝试进行 ajax 调用来验证验证码，但这种方法存在一些问题。[无法在 jquery ajax 回调函数中提交表单](https://stackoverflow.com/q/11673848/1485216)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:58:50.830

您必须在 JS 代码中使用[XmlHTTPRequest 。](http://en.wikipedia.org/wiki/XMLHttpRequest)

您分配回调以获取答案并根据需要处理它。在我的情况下，我从服务器获取要输出的代码，所有输入的表单保持在以前的状态，并且修改了 html 页面上唯一的 div“输出”。

这是我的程序的一个简短示例：页面的 html

```
<script type="text/javascript" src="./js/script.js">/script>
<form name="someForm">
<p><b>Enter your text here:</b></p>`

<p><textarea rows="10" cols="45" name="code"></textarea></p>
<input type="button" value="Send it" onclick="sendIt()"/>
</form> </code>
<div id="output"></div> 
```

在我的情况下 script.js 只更新页面的一部分

```
function sendIt() {
    var theCode = document.codeHolderForm.code.value;
    var linkToDiv = document.getElementById("output");
    linkToDiv.innerHTML = 'p> Server response below: p>';

    var request = getXmlHttp();

    request.open("POST", "/", true);
    request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    request.onreadystatechange = function () {
        if (request.readyState != 4) return;

        if (request.status == 200) {
            linkToDiv.innerHTML += 'p>' + request.responseText + '/p>';
        } else {
            handleError(request.statusText);
        }
    };

    request.send("code=" + theCode);

}

function handleError(message) {
    alert("Error: "+message)
}

function getXmlHttp() {
    var xmlhttp;
    try {
        xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (E) {
            xmlhttp = false;
        }
    }
    if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
        xmlhttp = new XMLHttpRequest();
    }
    return xmlhttp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:09:03.227

你可以做这样的事情，在某些 div 上调用 click 事件说“提交”，然后调用 ajax 调用并获得结果。根据结果​​，您可以决定是否提交表格。

submit 是 DIV printCoupon 是表单

```
$("#submit").click(function(){

        var response = '';
        $.ajax({ type: "GET",   
                 url: "ajaxprintcoupon",   
                 async: false,
                 success : function(text)
                 {
                     response = text;
                 }
        });

        alert(response);

        if(response == 'Testing'){
            $('#printCoupon').submit();
        }else{
            // no change
        }
    }); 
```

# node.js - 从没有bodyParser的AngularJS请求Node.js中的数据

> ID：11675628
> 
> 赞同：1
> 
> 时间：2012-07-26T18:24:15.070
> 
> 标签：node.js, request, angularjs, express

在我的应用程序中，我需要使用正文解析器来请求参数（Node.js AngularJS 基于[angular-express-blog](https://github.com/btford/angular-express-blog)）。例如（AngularJS 控制器）：

```
$scope.changeComment = (comment) ->
  $http.put('/api/post/' + $routeParams.id + '/editComment/' + comment._id, $scope.comment).success (data) ->
    $scope.post = data.post 
```

所以根据AngularJS docs`$http.post('/someUrl', data).success(successCallback);`

但我不知道如何在 node.js express 中找到这些数据。我只能使用 bodyParser，它只解析表单中的数据。

```
app.put '/api/post/:id/editComment/:cid' = (req, res) ->
  id = req.params.id;
  cid = req.params.cid;
  console.log req
  Post.findById id, (err, post) ->
    unless err
      comment = post.comments.id(cid)
      console.log req.body
      comment.text = req.body.text
      post.save (err1) -> 
```

那么如何传输和抓取数据呢？

应用程序配置：

```
app.configure "development", ->
  app.use express.bodyParser()
  app.use express.methodOverride()
  app.use express.static(__dirname + '/public')
  app.use express.errorHandler(
    dumpExceptions: true
    showStack: true
  ) 
```

并查看文件[https://gist.github.com/3189377](https://gist.github.com/3189377)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:07:57.247

语法错误`$scope.comment`应该只是`comment`：

```
$scope.changeComment = (comment) ->
  $http.put('/api/post/' + $routeParams.id + '/editComment/' + comment._id, comment).success (data) ->
    $scope.post = data.post 
```

# c# - htmlagilitypack：在 div 中查找第二个表

> ID：11675630
> 
> 赞同：1
> 
> 时间：2012-07-26T18:24:23.150
> 
> 标签：c#, html-agility-pack

我正在尝试解析`div`其中包含 3 个表的信息。我可以毫无问题地从第一个获取信息。

代码如下：

```
HtmlAgilityPack.HtmlWeb doc = new HtmlAgilityPack.HtmlWeb();
HtmlAgilityPack.HtmlDocument htmldocObject = doc.Load(URL);
var res = htmldocObject.DocumentNode.SelectSingleNode("//div[@class='BoxContent']");

var firstTable = res.SelectSingleNode("//table");
var charName = firstTable.ChildNodes[i++].InnerText.Substring(5).Trim();

<div class="BoxContent">
    <table>
        <tr bgcolor=#505050>
            <td colspan=2 class=white>
            <b>I'm getting this text</b>
            </td>
        </tr>
        <tr bgcolor=#F1E0C6>
            <td>I get this too</td>
            <td>I'm getting this as well</td>
        </tr>
    </table>
    <table>
        <tr>
            <td>Trying to retrieve this</td>
        </tr>
    </table>
</div> 
```

如何使用 HAP 找到第二个表信息？

我已经阅读了一些关于 nextsibling 函数的内容，但我无法让它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T18:41:08.623

```
var secondTable = res.SelectSingleNode("//table[2]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:35:39.093

您可以通过这种方式遍历 div 内的表格集合

```
foreach(HtmlNode table in doc.res.SelectNodes("//table"])
{
  if(table != null)
  {
    var charName = table.InnerText.Substring(5).Trim();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:57:46.597

您可以尝试直接`<td>`通过更改 Xpath 字符串来获取标签。

```
HtmlNodeCollection tdNodeCollection = htmldocObject
                                     .DocumentNode
                                     .SelectNodes("//div[@class = 'BoxContent']//td");

foreach (HtmlNode tdNode in tdNodeCollection)
{
     Console.WriteLine(tdNode.InnerText);
} 
```

# linux - 如何执行命令“appcfg 回滚”？

> ID：11675632
> 
> 赞同：17
> 
> 时间：2012-07-26T18:24:34.257
> 
> 标签：linux, google-app-engine, netbeans, fedora

上传项目时，网络出现故障，我不得不停止，上传过程仅完成 31%。现在，当我单击将应用程序部署到谷歌应用引擎时，会产生以下消息：

```
com.google.appengine.tools.admin.HttpIoException: Error posting to URL: 
https://appengine.google.com/api/appversion/create?app_id=programworks&version=1&
409 Conflict
Another transaction by user suhailgupta03 is already in progress for app: 
s~programworks, version: 1\. That user can undo the transaction with 
"appcfg rollback".

Unable to update app: Error posting to URL: https://appengine.google.com/api/appversion/create?app_id=programworks&version=1&
409 Conflict
Another transaction by user suhailgupta03 is already in progress for app: 
s~programworks, version: 1\. That user can undo the transaction with "appcfg rollback". 
```

我打开我的 shell 提示符并在那里输入，`appcfg rollback`但我收到一条消息，提示找不到此命令。我已将谷歌应用程序引擎安装为 netbeans 的插件。

我保存谷歌应用引擎罐子的路径：`/home/non-admin/appengine-java-sdk-1.6.6/lib/`

请告诉我应该怎么做才能回滚以前的过程？我非常需要上传*战争*文件。！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-26T18:28:32.270

你想要`appcfg.sh rollback`（在 中`path_to_your_app_engine_sdk/bin/`）。`appcfg`每种运行时类型（Python、Java、Go）都有不同的变体，因此建议的命令有点通用。

如果出于某种原因，您无法轻松访问项目的整个 war 目录（例如，如果您的 IDE 只为您提供 .war 文件），您可以执行以下操作：

1.  创建一个名为`war`.
2.  在*war*文件夹中创建另一个目录并将其命名为`WEB-INF`.
3.  在文件夹中`WEB-INF`放置两个 xml 文件，即`web.xml`和`appengine-web.xml`. 这些应该分别具有您部署的内容`web.xml`和`appengine-web.xml`文件的内容。

然后运行以下 shell 命令（假设您从`bin`App Engine Java SDK 的目录执行它）：

```
[non-admin@user bin]$ ./appcfg.sh rollback /home/non-admin/NetBeansProjects/PersonalSite/web/war 
```

If you are using the Go appengine tools, then you'll need to run:

```
$ cd [your go_appengine directory]
$ ./appcfg.py rollback [your app directory with app.yaml in it] 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-16T08:58:08.447

If you are using windows, follow the same steps given above and run command in DOS prompt..

C:\eclipse-jee-helios-win32\eclipse\plugins\com.google.appengine.eclipse.sdkbund le_1.7.3\appengine-java-sdk-1.7.3\bin> **appcfg.cmd** ***rollback*** "C:\home\myweb\war"

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-17T16:46:48.417

Another easy way is given below:

1.  to change the version number in app.yaml...
2.  then deploy new version,
3.  and finally delete the old version via google app engine webform

Edit:

to answer dg99's question: the version code you need to change is up to you (it is the version of your application)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T13:55:57.023

This works for me!! (Win OS)

C:\eclipse-jee-helios-win32\eclipse\plugins\com.google.appengine.eclipse.sdkbund le_1.7.3\appengine-java-sdk-1.7.3\bin> appcfg.cmd rollback C:\home\myweb\war

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-19T01:54:21.243

If you are using eclipse & maven build envrioment, maybe you are uploading application by maven command, **appengine:update**, right ?

Then, when you have a problem like that "409 Conflict". You can use maven command on eclipse->project->run as->maven build...-> **"appengine:rollback"**

Try this. I solved problem by this way

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-19T21:32:00.473

After trying to rollback for a while without any success (I was prompted for user/pass endlessly ) I thought It might be because of my two phase/factor authentication,

So the following way solved it all:

1.  open command prompt (*cmd.exe*) in `D:\Java\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.8.3\appengine-java-sdk-1.8.3\bin>` (or look for the location of your `appcfg.cmd` somewhere else)

2.  type in: `appcfg.cmd --oauth2 rollback D:/Java/workspace/my_app/war`

3.  Then I was prompted with oauth2 token in my browser , did copy and got back to the cmd than paste

4.  That's it! Deploy to App Engine works again!

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-15T17:45:27.783

Use this for backends developed in Android Studio:

```
cd project_path/project_name/module_name/src/main
appcfg.sh rollback webapp 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-24T10:52:15.157

For me the following worked fine out of the development directory where my app.yaml was located.

`appcfg.py rollback .`

I'm using the Python SDK though, might be different for Java since the `<app-directory>` is called `<war-location>` there.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-01T14:56:15.503

Here are the steps to be followed for rollback in windows 7 using command prompt:

1) first set the environment variale for python.(so that command "python" is accepted by the command prompt).

2) then type: "python" give_space "path to appcfg.py file" give_space "rollback" give_space "path to your project".(**PLease note you should specify your paths within inverted commas**).

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-11T17:38:12.457

When you are using Maven then `appengine:rollback` command works. This works even when it is an Eclipse Maven project.

To roll back in Eclipse Maven follow this process -

Run -> Build -> Goals (appengine:rollback) -> Apply -> Run

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-13T11:48:25.997

Can confirm as some of the answers clarified above.

If you use `mvn appengine:update` to deploy, you can use `mvn appengine:rollback` to do the rollback.

# ruby-on-rails - 我怎样才能清理dreamhost vps？

> ID：11675640
> 
> 赞同：0
> 
> 时间：2012-07-26T18:24:46.483
> 
> 标签：ruby-on-rails, ruby, gem, vps, dreamhost

如何从 SSH 清理 Dreamhost vps 中的所有内容。我把一切都搞砸了。我想找回原来的样子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:01:05.893

我已经使用过很多 DreamHost VPS，并且类似于企业环境的结构方式，拥有具有不同角色的不同 shell 帐户非常有帮助。例如，在我维护的一个站点中，我们有一个用户在其帐户下运行生产应用程序，一个用户用于暂存实例，另一个用户具有允许管理员上传文件的 ftp 权限。

在您的情况下，听起来您最好创建一个具有 ssh 访问权限的新 shell 用户。然后，您可以根据需要设置此用户的环境，并将您想要的域的托管切换到此用户。您也可以从旧用户的主目录复制文件，因此请在删除原始 shell 帐户之前执行此操作。

您可以在 DreamHost 面板的**Manage Users**下创建一个新用户。如果您有 VPS 帐户，那么您将能够选择是在共享主机上还是在您的 VPS 机器上创建用户。

**您可以在“管理域”**页面中选择托管特定域的用户帐户。单击要更改的域旁边的**虚拟主机**列中的**编辑。****在用户下的运行此域中**选择您的新 VPS用户：下拉列表。确保**Web Directory:**字段与您在用户主目录中设置的文件夹结构相匹配，您应该一切顺利。

 ******您可以在 DreamHost VPS 上使用无限的 shell 帐户，所以不要害怕使用它们。******

# http - 如何在蜂窝网络上处理损坏的 HTTP POST

> ID：11675641
> 
> 赞同：3
> 
> 时间：2012-07-26T18:24:47.863
> 
> 标签：http, cellular-network

我有一个主要由移动客户端使用的网站。有大量的表单帖子和 ajax POST 请求来自该站点，并且 95% 的时间它们都可以正常工作，但其余请求失败并出现错误，因为缺少预期的 POST 正文参数。我可以看到人们反复尝试在日志中一遍又一遍地提交一些数据，但没有运气，因为（我在这里使用 Spring MVC）框架抛出了 MissingServletRequestParameterException。

它也总是用于相同的参数名称。我无法在任何网络（在加拿大）的任何设备上重现此问题，但它显然正在世界各地的其他网络上发生。

有没有其他人遇到过这个问题？我觉得我可能是唯一的一个，因为无论我在谷歌上搜索什么，我都找不到任何相似的东西。

发布数据没有什么复杂的——最多可能有 3 个值；没有奇怪的命名约定。

例如

```
POST /handleruri HTTP/1.1
Host: somehost.com

id=H4543&date=20-08-2012 
```

更新：

只是看了一些更多的日志条目，我认为这些失败的请求没有任何帖子数据通过，因为我不仅没有看到 Spring MVC 抛出的异常的参数名称，而且我没有看到任何其他参数名称（我正在记录错误的整个请求，但不幸的是，当原始 HTTP 请求将其发送到 servlet {DispatchServlet in this case}时，它已被处理并且原始原始请求正文 InputStream 已被消耗）。

我将很快编写一个 ServletFilter 来尝试获取原始请求正文并记录它。

如果这是一个运营商特定的问题，我不知道我要做什么来解决它——我似乎无能为力。

感谢以前经历过这种情况的任何人的帮助。

谢谢

# ruby-on-rails - Postgres.app 没有在正确的地方寻找扩展

> ID：11675642
> 
> 赞同：0
> 
> 时间：2012-07-26T18:24:50.773
> 
> 标签：ruby-on-rails, macos, postgresql

我刚刚为 mac 安装了[Postgres.app](http://postgresapp.com/documentation)以用于本地 Rails 开发。安装非常顺利，我让它在现有的 rails 应用程序中工作，能够运行迁移等。

问题是当我尝试安装 unaccent 扩展时，我收到以下错误消息：

> 无法打开扩展控制文件“/Users/Alex/Downloads/Postgres.app/Contents/MacOS/share/extension/unaccent.control”：没有这样的文件或目录

Postgres.app 文件**不再**存储在 ~/Downloads 中。我将它移到 /Applications 中更合理的位置。我可以看到 unaccent.control 文件存在于 /Applications/Postgres.app/Contents/MacOS/share/extension/ 但由于某种原因 Postgres 仍在寻找旧位置。

如果我只是从命令行运行 psql 并尝试，则会发生同样的错误

```
create extension unaccent 
```

有人知道怎么修这个东西吗？我在 Postgres.app 文档中找不到任何内容，但这可能是一般适用于 postgres 安装的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:24:42.393

我敢打赌，当您运行 Postgres.app 时，它会创建一个首选项文件，该文件记录了应用程序的位置，因此也记录了子文件夹。

在 ~/Library/Preferences 中查找 Postgres 首选项文件。

# c++ - 是否有任何情况下有效的 C 代码无法使用 g++ 正确编译

> ID：11675643
> 
> 赞同：6
> 
> 时间：2012-07-26T18:24:51.760
> 
> 标签：c++, c, gcc, compiler-construction, g++

> **可能重复：**
> [“C++ 的 C 子集”-> 哪里没有？例子？](https://stackoverflow.com/questions/1201593/c-subset-of-c-where-not-examples)

我知道 C 是 C++ 的子集（即不存在不是有效 C++ 代码的有效 C 代码）。我的问题是是否`g++`与所有 C 代码完全兼容。例如，将

```
g++ -o testing test.c 
```

产生一个相同的二进制文件

```
gcc -o testing test.c 
```

在所有情况下？

更具体地说，如果它们并不总是创建相同的二进制文件，是否有任何理由表明这可能是一个问题？`g++`如果我不确定代码，总是使用它是否安全？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T18:30:16.693

C 不是 C++ 的子集。

尝试：

foo.c

```
int main() {
    int class = 0;
    return 0;
} 
```

无论如何，在这里玩得开心： [C 哪里不是 C++ 的子集？](https://stackoverflow.com/questions/1201593/c-subset-of-c-where-not-examples)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T18:32:10.697

很难弄清楚如何回答这个问题：

*   C 不是 C++ 的完整子集。C 中有几样东西不是有效的 C++。可变长度数组就是这样一种东西。隐式转换 from`void*`是另一个。
*   g++ 将接受什么代码取决于传递给它的标志。它是通过调用`g++`（哪个版本？）还是用`-ansi`? `-pedantic`? 怎么样`std=<lang>`？
*   最后，代码是否*被接受*与“它是否产生相同的二进制文件”是一个完全不同的问题。两个编译器都接受的代码可能会导致执行相同操作但仍然不*相同*的二进制文件。

鉴于所有这些含糊不清，不可能给你一个明确的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T18:36:31.353

C 不是 C++ 的子集。从来没有。C99 与 C++ 有显着差异，但即使是经典的 C89/90 也不是 C++ 的子集，有大量显着差异。

即使对于 C89/90，在 C++ 编译器下“破坏”有效 C 代码的差异也将包括

1.  C++ 中更严格的隐式指针类型转换
2.  嵌套结构声明在 C++ 中是类范围的，在 C 中是文件范围的
3.  运算符语法（以及由此产生的运算符优先级）在语言之间略有不同
4.  暂定定义在 C++ 中是非法的
5.  新关键字，`int`C++ 中没有隐式规则...
6.  等等等等

# jquery - 将类附加到当前页面菜单 li（jQuery 魔术线插件）

> ID：11675644
> 
> 赞同：1
> 
> 时间：2012-07-26T18:24:54.303
> 
> 标签：jquery, navigation

我正在使用[jQuery Magic Line 插件](http://css-tricks.com/jquery-magicline-navigation/)，并希望使该行出现在菜单的当前页面下。菜单如下所示：

```
 <ul class="group" id="example-one">
        <li class="current_page_item"><a href="index.php" >Home</a></li>
        <li><a href="about.php" >About</a></li>
        <li><a href="services.php" >Services</a></li>
        <li><a href="clients.php" >Clients</a></li>
        <li><a href="quoterequest.php" >Request a Quote</a></li>
        <li><a href="contact.php" >Contact</a></li>
    </ul> 
```

我一直在尝试修改[此线程](https://stackoverflow.com/questions/11533668/an-automated-way-to-add-a-class-to-an-anchor-link-corresponding-to-the-current-p)的最佳答案，但还没有走远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:30:22.290

您可以使用`window.location.pathname`. 如果页面位于*根*目录，请尝试以下操作：

```
var loc = window.location.pathname.split('/')[1];
$('.group a[href='+ loc +']').parent().addClass('current_page_item') 
```

*但是，您可以使用 PHP 来执行此操作。*

# salesforce - Visualforce：分页 - 单击一段时间后，下一个、上一个等链接冻结

> ID：11675645
> 
> 赞同：0
> 
> 时间：2012-07-26T18:25:04.063
> 
> 标签：salesforce, apex-code, visualforce

我在查看这两个资源的视觉力页面上实现了分页。 [http://hisrnu.wordpress.com/2012/01/09/pagination-using-standardsetcontroller/](http://hisrinu.wordpress.com/2012/01/09/pagination-using-standardsetcontroller/) http://blog.jeffdouglas.com/2009/07/14/visualforce-page-with-pagination/

我的 visualforce 页面接受日期参数并在自定义对象记录上运行搜索并将它们显示在 Apex:datatable 中。

这是我的控制器代码。这工作正常，直到我开始连续单击下一个、前一个链接大约一分钟，然后它开始变慢并冻结。

知道为什么会这样吗？

**更新：7/28：这只发生在 IE 中。我有 IE 9。**

```
 public with sharing class FundingReportController { 

  // the soql without the order and limit
  private String soql {get;set;}

  Public Integer size{get;set;}
  Public Integer noOfRecords{get; set;} 

  //export to excel - returns a page reference to the AccountDataExcel page
    public PageReference exportToExcel() {
      return Page.fundingreportExcel;
    }

    //Instantiate the StandardSetController
    public ApexPages.StandardSetController con{get; set;}

   public List<Money_Transaction__c> moneyTransactions
    {
        get
        {
            if(con != null)
                return (List<Money_Transaction__c>)con.getRecords();
            else
                return null ;
        }
        set;
    }  

 // returns a list of wrapper objects for the sObjects in the current page set
    public List<Money_Transaction__c> getMoneyTransactions() {
    try{
        //moneyTransactions = new List<MoneyTransactionWrapper>();
        moneyTransactions = new List<Money_Transaction__c>();
        for (Money_Transaction__c mt: (List<Money_Transaction__c>)con.getRecords()) 
         {              
            moneyTransactions.add(mt); 
         }       

        }
          catch (Exception e) 
            {
               ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Code Error '+e));
            }
        return moneyTransactions ;
    }

  // the current sort direction. defaults to asc
  public String sortDir {
    get  { if (sortDir == null) {  sortDir = 'asc'; } return sortDir;  }
    set;
  }

  // the current field to sort by. defaults to last name
  public String sortField {
    get  { if (sortField == null) {sortField = 'Settlement_Date_First__c'; } return sortField;  }
    set;
  }

  // format the soql for display on the visualforce page
  public String debugSoql {
    //get { return soql + ' order by ' + sortField + ' ' + sortDir + ' limit 20'; }
    get { return soql + ' ' + sortDir; }
    set;
  }

  // init the controller and display some sample data when the page loads
  public FundingReportController() {

    moneyTransactions = new List<Money_Transaction__c>();
    //Default dates: 6 months before today
    Date fromDate = date.today();
    fromDate = fromDate.addMonths(-6);
    String fromDateStr = String.ValueOf(fromDate);
    //ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR,fromDateStr   ));
    //Default dates: Today
    Date toDate = date.today();    
    String toDateStr = String.ValueOf(toDate);

     soql = 'select ACH_Type__c, Settlement_Date_First__c, Total_ACH_Amount__c,Settlement__r.id,Settlement__r.name,Money_Movement_Type__c,Bank_Name__c,Bank_Account_Number__c,Tax_Batch__c,Payroll_Group_Detail__c from Money_Transaction__c where Settlement_Date_First__c <= '+ toDateStr + ' AND Settlement_Date_First__c >= ' + fromDateStr + ' AND ACH_Type__c != \'VHR DDP Disbursement\'';

     runQuery();
  }

  // toggles the sorting of query from asc<-->desc
  public void toggleSort() {
  //ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Inside Toggle'+soql + sortField +sortDir ));
    // simply toggle the direction
    sortDir = sortDir.equals('asc') ? 'desc' : 'asc';
    // run the query again
    runQuery();
  }

  // runs the actual query
  public void runQuery() {

    try {

          size=10;  

          ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Inside New Run query + StandardSetController '+soql + ' order by ' + sortField + ' ' + sortDir));
          con = new ApexPages.StandardSetController(Database.getQueryLocator(soql + ' order by ' + sortField + ' ' + sortDir + ' limit 100'));
          // sets the number of records in each page set
          con.setPageSize(size);
          noOfRecords = con.getResultSize();       

    } catch (Exception e) {
      ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Ooops! SOQL error '+soql ));
    }

  }

  // runs the search with parameters passed via Javascript
  public PageReference runSearch() {

    String fromDate = Apexpages.currentPage().getParameters().get('fromDate');
    String toDate = Apexpages.currentPage().getParameters().get('toDate');

    soql = 'select ACH_Type__c, Settlement_Date_First__c, Total_ACH_Amount__c,Settlement__r.id,Settlement__r.name,Money_Movement_Type__c,Bank_Name__c,Bank_Account_Number__c,Tax_Batch__c,Payroll_Group_Detail__c from Money_Transaction__c where Settlement_Date_First__c <= '+ toDate + ' AND Settlement_Date_First__c >= ' + fromDate + ' AND ACH_Type__c != \'VHR DDP Disbursement\'';
    con = new ApexPages.StandardSetController(Database.getQueryLocator(soql)); 

    // run the query again
    runQuery();

    return null;
  }

    // indicates whether there are more records after the current page set.
    public Boolean hasNext {
        get {
            return con.getHasNext();

        }
        set;
    }

    // indicates whether there are more records before the current page set.
    public Boolean hasPrevious {
        get {
            return con.getHasPrevious();
        }
        set;
    }

    // returns the page number of the current page set
    public Integer pageNumber {
        get {
            return con.getPageNumber();
        }
        set;
    }

    // returns the first page of records
    public void first() { 

        try{
        con.first();  

        }
        catch (Exception e) 
            {
               ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Code Error '+e));
            }

    }

    // returns the last page of records
    public void last() {   

        try{
        con.last();        

        }
        catch (Exception e) 
            {
               ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Code Error '+e));
            }
    }

    // returns the previous page of records
    public void previous() {   

         try{
            con.previous();      

            }
            catch (Exception e) 
            {
               ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Code Error '+e));
            }
        }

    // returns the next page of records
    public void next() {  
    try{   

        con.next();      

        }
         catch (Exception e) 
            {
               ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Code Error '+e));
            }

    }       

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:42:57.600

发生了很多事情，但对于初学者来说：

您在同一操作中两次实例化标准集控制器：

```
PageReference runsearch(){
   ...
   con = new ApexPages.StandardSetController(Database.getQueryLocator(soql)); 
   ..
   runQuery();
}

void runQuery(){
   ...
   con = new ApexPages.StandardSetController(Database.getQueryLocator(soql + ' order by ' + sortField + ' ' + sortDir + ' limit 100'));
   ...
} 
```

尝试制作标准集控制器的单个实例并实例化一次。`Database.querylocator(soql)`如果您需要为后续操作更新结果，则重新设置。尽管分页可能不是其中之一，但它通常用于此目的。

这可能是您的问题的乞求，您是否使用系统调试器？你有任何例外吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:06:12.440

这个项目被搁置了几个月。我回到了它，这一次我使用 SOQL 和新的 OFFSET 功能并摆脱了标准控制器。

实际问题是 IE9 本身，我已经在此处发布了详细信息和解决方案。我希望它可以帮助那些在 IE9 和 Visualforce 上遇到相同重新渲染问题的人。

谢谢。

[https://salesforce.stackexchange.com/questions/7917/visualforce-major-grief-with-ie9-ajax-refresh-rerender-issues](https://salesforce.stackexchange.com/questions/7917/visualforce-major-grief-with-ie9-ajax-refresh-rerender-issues)

# xcode - XCode 4.4“在工作场所查找”坏了

> ID：11675649
> 
> 赞同：1
> 
> 时间：2012-07-26T18:25:16.363
> 
> 标签：xcode, macos, search, find, osx-mountain-lion

尝试在项目中查找单词时，XCode 4.4 并未搜索所有文件。

我尝试 SHIFT-CMD-F，输入简单的单词“配置”（不带引号），状态窗口显示`Finding "configure"`（大约 1/2 秒......）然后回到它的最后状态（完成运行......）

未找到结果是左栏中的消息。

有任何想法吗？狮子山 10.8 和 XCode 4.4

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T10:00:10.783

单击搜索字段左侧的放大镜，然后选择“显示查找选项”，取消选中“匹配案例”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T18:40:35.310

我在 4.5 中遇到了类似的问题，它没有找到任何东西，也不是案例问题。我的解决方案是删除项目的派生数据，这似乎可以在 XCode 变得不稳定时修复许多奇怪的行为，并且它也适用于此。

要清除派生数据，请打开管理器，选择项目，选择要清除的项目，您应该会在项目派生数据的文件 URL 旁边看到一个“删除...”按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T12:43:49.010

1.  如果您在项目中搜索文件，请选择“忽略大小写”。下面是相同的屏幕截图。

![条件 1 的屏幕截图](../Images/6910c74f738fe3d1b40dc100ee81aaea.png)

2.  如果您正在搜索特定文件，则选择放大镜 -> 编辑查找选项.. -> 相应地选择/取消选择匹配大小写。下面是相同的屏幕截图。

![条件 2 的屏幕截图 - 步骤 1](../Images/82dfeec81424e084f6629acf4805a4d9.png)

![条件 2 的屏幕截图 - 步骤 2](../Images/2813e3a9dc551b22936940e904ef0710.png)

# c++ - 元组的一个元素可以引用另一个元素吗？

> ID：11675659
> 
> 赞同：8
> 
> 时间：2012-07-26T18:25:42.910
> 
> 标签：c++, c++11, tuples, undefined-behavior

**更新：**请参阅下面的完整答案。简短的回答是否定的，不是直接的。您可以使用指针创建间接引用，`std::reference_wrapper`或者更一般地使用指针完成相同的效果（但没有语法糖和增加的引用安全性）。

我问是因为元组在 C++11 中是一个方便的可变参数存储单元。理论上，元组的一个元素持有对同一元组中另一个元素的引用听起来是合理的。（将“reference”替换为“pointer”，它在实践中有效。）关键是构造这样一个元组的细节。考虑以下示例：

```
#include <tuple>
#include <iostream>

class A
{
public:
  A() : val(42) { }
  int val;
};

class B
{
public:
  B(A &a) : _a(a) { }
  int val() { return _a.val; }

private:
  A &_a;
};

int main()
{
  A a;
  B b(a);
  std::tuple<A, B> t1(a, b);
  a.val = 24;
  std::cout << std::get<0>(t1).val << "\n"; // 42
  std::cout << std::get<1>(t1).val() << "\n"; // 24

  return 0;
} 
```

元组中的第二个元素`t1`引用自动变量`a`而不是 中的第一个元素`t1`。有没有办法构造一个元组，使得元组的一个元素可以持有对同一元组中另一个元素的引用？我知道您可以通过创建一个引用元组来实现此结果，如下所示：

```
int main()
{
  A a;
  B b(a);
  std::tuple<A &, B &> t2 = std::tie(a, b);
  a.val = 24;
  std::cout << std::get<0>(t2).val << "\n"; // 24
  std::cout << std::get<1>(t2).val() << "\n"; // 24

  return 0;
} 
```

但出于我的目的，这是作弊，因为 in 的第二个元素`t2`最终仍然引用了一个存在于元组之外的对象。我能想到的唯一方法编译得很好，但可能包含未定义的行为[编辑以反映 Howard Hinnant 提供的更简洁的示例]：

```
int main()
{
    std::tuple<A, B> t3( A(), B(std::get<0>(t3)) ); // undefined behavior?
    std::get<0>(t3).val = 24;
    std::cout << std::get<0>(t3).val << "\n";
    std::cout << std::get<1>(t3).val() << "\n"; // nasal demons?
} 
```

编辑：这是一个最小的测试程序，当使用带有 -O2 或更高版本的 g++ 4.7 编译时返回非零退出状态。这表明未定义的行为或 gcc 中的错误。

```
#include <tuple>

class Level1
{
public:
  Level1() : _touched(false), _val(0) { }

  void touch()
  {
    _touched = true;
  }

  double feel()
  {
    if ( _touched )
    {
      _touched = false;
      _val = 42;
    }
    return _val;
  }

private:
  bool _touched;
  double _val;
};

class Level2
{
public:
  Level2(Level1 &level1) : _level1(level1) { }

  double feel()
  {
    return _level1.feel();
  }

private:
  int _spaceholder1;
  double _spaceholder2;
  Level1 &_level1;
};

class Level3
{
public:
  Level3(Level2 &level2) : _level2(level2) { }

  double feel()
  {
    return _level2.feel();
  }

private:
  Level2 &_level2;
};

int main()
{
  std::tuple<Level3, Level2, Level1> levels(
    Level3(std::get<1>(levels)),
    Level2(std::get<2>(levels)),
    Level1()
  );

  std::get<2>(levels).touch();

  return ! ( std::get<0>(levels).feel() > 0 );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:41:24.007

这对我有用：

```
#include <tuple>
#include <iostream>

int main()
{
    std::tuple<int&, int> t(std::get<1>(t), 2);
    std::cout << std::get<0>(t) << '\n';
    std::get<1>(t) = 3;
    std::cout << std::get<0>(t) << '\n';
} 
```

**更新**

我刚刚在 CWG 邮件列表中询问了这个案例。Mike Miller 向我保证，这**是**3.8p6 项目符号 2 中未定义的行为：

> ...如果出现以下情况，则程序具有未定义的行为：
> 
> ...
> 
> *   glvalue 用于访问非静态数据成员或调用对象的非静态成员函数，或
> 
> ...

`tuple`如果是聚合，这将是明确定义的行为，但因为`tuple`有一个用户声明的构造函数，所以适用 3.8p6b2。

然而，这有效，并避免了 UB：

```
#include <tuple>
#include <functional>
#include <cassert>

int main()
{
    int dummy;
    std::tuple<std::reference_wrapper<int>, int> t(dummy, 2);
    std::get<0>(t) = std::get<1>(t);
    assert(std::get<0>(t) == 2);
    std::get<1>(t) = 3;
    assert(std::get<0>(t) == 3);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:44:45.660

据我所知，为尚不存在的对象起别名是定义明确的行为。`this`这与您在构造函数初始化列表中使用 using 时遇到的情况相同，虽然很不幸，但很常见且定义明确。

# objective-c - 使用objective-c (iPhone) 解析/标记objective-c

> ID：11675661
> 
> 赞同：1
> 
> 时间：2012-07-26T18:25:46.090
> 
> 标签：objective-c, parsing, autocomplete, syntax-highlighting, tokenize

在 iPhone 上解析和/或标记 Objective-C 的选项有哪些？

本质上，我正在考虑解析/标记足以在与 Xcode 相同的级别上支持语法突出显示和自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-02T01:21:58.933

我知道这个话题很老，但这可能对其他人有所帮助。

Apple 已经提供了（非常好的）[CFStringTokenizer](https://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringTokenizerRef/index.html)，支持多种语言。[这是](http://sssslide.com/speakerdeck.com/mattt/natural-language-processing-in-objective-c)一个很好的介绍，包括示例代码。如果标记化就足够了，那就应该这样做。

但是，如果需要解析（不应该用于语法高亮），则可以[使用 ParseKit](http://parsekit.com/index.html)或基于 C 的解决方案，例如[YACC](http://dinosaur.compilertools.net/)。

最好的。

# php - html下拉表单发布到php

> ID：11675662
> 
> 赞同：3
> 
> 时间：2012-07-26T18:25:48.600
> 
> 标签：php, html, forms, post

我的表格有一个奇怪的错误。我总是得到一个日期为 2000 年 1 月 1 日的每日选择。表单的代码是这样的：

```
<!DOCTYPE html>
<html>
  <body>
    <form name="mainForm" action="ReportForm.php" method="post">
      How Often to Generate Report: 
      <select id="period" onchange="Change(this);">
        <option selected="selected" value="0">Daily</option>
        <option value="1">Weekly</option>
        <option value="2">Monthly</option>
      </select>

      <br />

      <input type="submit" title="Submit"/>
    </form>
  </body>
</html> 
```

对于月、日和年，还有 3 个这样的下拉菜单。我可能已经猜到 selected="selected" 与它有关，但 2000 年不是一个选项。这些论文的默认值为 2012 年 1 月、1 日和 2012 年。我对此感到非常困惑，希望能提供任何帮助。

与此相关的 PHP 是：

```
<?php
  require "Search.php";
  require "Schedule.php";

  Schedule( $_POST['period'],
                  mktime(23, 59, 59, $_POST['month'],
                         $_POST['day'], $_POST['year']) );

  Search( "param1", "param2", "param3", "test@testing.com" );

  exit();
?> 
```

谢谢，

-生锈的

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T18:29:38.433

表单元素需要一个`NAME`属性才能发布。你有一个`ID`代替。

# linq - 如何根据名称的子字符串将文件从一个文件夹移动到另一个文件夹？

> ID：11675666
> 
> 赞同：1
> 
> 时间：2012-07-26T18:26:05.177
> 
> 标签：linq

文件夹 1：

C:\File1-xpt
C:\File1-ppt
C:\File1-zzz
C:\File2-ndo
C:\File2-dkl C:\
File2-dlz

string[] AllFilesInDirectory = Directory.GetFiles(SelectedDirectory);

我想将前缀为“File1”的所有文件移动到文件夹 2 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:32:05.133

```
var query = AllFilesInDirectory.Where(x => Path.GetFileName(x).StartsWith("File1"));
foreach (string file in query)
{
    File.Move(file, @"C:\Folder2");
} 
```

编辑：基于评论。如果只知道子字符串，则可以使用`Contains`. 请注意使用 of `Path.GetFileNameWithoutExtension`，因为如果您正在搜索包含“txt”的文件（在这种情况下，只有第一个文件会匹配），这将能够处理像“txtFile1.txt”和“File1.txt”这样的文件名

```
var query = AllFilesInDirectory
           .Where(x => Path.GetFileNameWithoutExtension(x).Contains("File1"));
foreach (string file in query)
{
    File.Move(file, @"C:\Folder2");
} 
```

# sql-server - 在大型数据库中搜索特定 ID？

> ID：11675669
> 
> 赞同：1
> 
> 时间：2012-07-26T18:26:09.877
> 
> 标签：sql-server, database, tsql, query-optimization

我需要在一个非常大的数据库中查找一个 ID。身份证是：

```
0167a901-e343-4745-963c-404809b74dd9 
```

数据库有数百个表，大表中有数百万行。

我可以将日期缩小到最近 2 或 3 个月内，但仅此而已。我正在寻找有关如何缩小此类搜索范围的任何线索。

我很好奇的一件事是使用`LIKE`搜索是否有帮助。

即做类似的事情有帮助吗

```
select top 10 * 
from BIG_TABLE
where DESIRED_ID like '016%' 
```

非常感谢任何提示/建议。正在远程访问数据库，因此这是挑战的一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:23:11.537

首先是什么要求，为什么您需要从整个数据库中获取特定值。查找值似乎是一次性的工作，并在此基础上采取一些行动。但这可能会耗费时间和资源。

无论如何，它看起来像一个指导栏。***除非所有 guid 列都有索引，否则无法加快速度。***

无论如何，这是一个小查询，它将在所有具有任何 guid 列的表上生成 select 语句（如果这是一些 varchar 列，那么这非常困难，因为您必须在每个表的每一列 i 上编写查询，您可以编写它但是我认为这不会有效）。

但是，最重要的是输出是根据以下排序的。如果 guid 列上有索引和前导键，那么首先列出这些表。然后根据数据页列出表，以便查询使用最少的资源。因此，如果您的 guid 值在前几个表中，它会非常快。如果它在最后一个表中，则根据表的大小需要时间，因此可能需要很多时间。

另外，在这个查询上声明一个游标，然后一个一个地执行语句，一旦你发现游标循环中的值出来，因为 guid 是唯一值。这将非常有效。

```
 select * from (
select 'select '  + ac.name +' from ' + OBJECT_SCHEMA_NAME(ac.object_id) + '.' + OBJECT_NAME(ac.object_id) + ' where ' + ac.name + '=''29490167a901-e343-4745-963c-404809b74dd9''' as querytext
--,*
,isnull(cnt,0) as numberofrows,
ROW_NUMBER() over(order by case when ic.key_ordinal = 0 then 0 else 1 end asc, isnull(si.dpages,si_1.dpages) asc) as rn,isnull(si.dpages,si_1.dpages) datapages
from sys.all_columns ac
inner join sys.all_objects ao on ac.object_id = ao.object_id
left join sys.index_columns ic on ac.object_id=ic.object_id
and ac.column_id =ic.column_id 
left join sys.sysindexes si on ac.object_id = si.id and ic.index_id=si.indid
outer apply (select SUM(rows) from sys.partitions p where ac.object_id = p.object_id and index_id in (0,1) ) a(cnt)
left join sys.sysindexes si_1 on si_1.id =ac.object_id and si_1.indid in (0,1)
where system_type_id =36
and ao.type ='U'
) dta order by rn asc
go 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:37:41.700

我有几年前为了类似目的而构建的这个脚本，尽管它带有文本字段。它找到符合条件的列，然后在这些列中搜索值。由于您的范围是不确定的，因此您可能无法比这样的事情做得更好。

您可能需要稍微调整一下以包含 uniqueidentifier 列 - 如果这实际上是数据类型 - 或者使用 equal 而不是 like 搜索。

如果这是你要定期重用的东西，你可以给它提供一个常用表或列的列表来找到这些东西，所以找到东西不需要很长时间。

```
/*This script will find any text value in the database*/
/*Output will be directed to the Messages window. Don't forget to look there!!!*/

SET NOCOUNT ON
DECLARE @valuetosearchfor varchar(128), @objectOwner varchar(64)
SET @valuetosearchfor = '%putYourGuidHere%' --should be formatted as a like search 
SET @objectOwner = 'dbo'

DECLARE @potentialcolumns TABLE (id int IDENTITY, sql varchar(4000))

INSERT INTO @potentialcolumns (sql)
SELECT 
    ('if exists (select 1 from [' +
    [tabs].[table_schema] + '].[' +
    [tabs].[table_name] + 
    '] (NOLOCK) where [' + 
    [cols].[column_name] + 
    '] like ''' + @valuetosearchfor + ''' ) print ''SELECT * FROM [' +
    [tabs].[table_schema] + '].[' +
    [tabs].[table_name] + 
    '] (NOLOCK) WHERE [' + 
    [cols].[column_name] + 
    '] LIKE ''''' + @valuetosearchfor + '''''' +
    '''') as 'sql'
FROM information_schema.columns cols
    INNER JOIN information_schema.tables tabs
        ON cols.TABLE_CATALOG = tabs.TABLE_CATALOG
            AND cols.TABLE_SCHEMA = tabs.TABLE_SCHEMA
            AND cols.TABLE_NAME = tabs.TABLE_NAME
WHERE cols.data_type IN ('char', 'varchar', 'nvchar', 'nvarchar','text','ntext')
    AND tabs.table_schema = @objectOwner
    AND tabs.TABLE_TYPE = 'BASE TABLE'
    AND (cols.CHARACTER_MAXIMUM_LENGTH >= (LEN(@valueToSearchFor) - 2) OR cols.CHARACTER_MAXIMUM_LENGTH = -1)
ORDER BY tabs.table_catalog, tabs.table_name, cols.ordinal_position

DECLARE @count int
SET @count = (SELECT MAX(id) FROM @potentialcolumns)
PRINT 'Found ' + CAST(@count as varchar) + ' potential columns.'
PRINT 'Beginning scan...'
PRINT ''
PRINT 'These columns contain the values being searched for...'
PRINT ''
DECLARE @iterator int, @sql varchar(4000)
SET @iterator = 1
WHILE @iterator <= (SELECT Max(id) FROM @potentialcolumns)
BEGIN
    SET @sql = (SELECT [sql] FROM @potentialcolumns where [id] = @iterator)
    IF (@sql IS NOT NULL) and (RTRIM(LTRIM(@sql)) <> '')
    BEGIN
        --SELECT @sql --use when checking sql output
        EXEC (@sql)
    END
    SET @iterator = @iterator + 1
END

PRINT ''
PRINT 'Scan completed' 
```

如果这看起来很奇怪，脚本正在执行这样的语句

```
if exists (select 1 from [schema].[table_name] (NOLOCK) 
                    where [column_name] LIKE '%yourValue%')
begin
   print select * from [schema].[table_name] (NOLOCK) 
                    where [column_name] LIKE '%yourValue%'
end 
```

...并且只是在循环中替换`[schema]`, `[table_name]`, `[column_name]`and 。`%yourValue%`

它的过滤...

*   特定模式中的表（*可以删除过滤器*）
*   只有表格，没有视图（*可以调整*）
*   仅包含搜索值的列
*   `(n)char`//`(n)varchar`数据`(n)text`类型（*添加或更改，了解数据类型*转换）

最后，**输出不会进入结果网格。检查消息窗口**（您会看到“受影响的 N 行”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:14:44.840

设置`DESIRED_ID`部分`Index`。

如果`Index`此表上没有，则数据库引擎执行`Table scan`并`reads every row`检查是否`DESIRED_ID`类似于 '016' 并确保正确`indexing`始终导致性能显着提高

```
CREATE INDEX NameIndex ON TableName(ColumnName ASC) 
INCLUDE (ColumnName2) 
```

实施`Index`将搜索从 016 开始的记录，直到 017 或 02 或 1 之类的记录。无论它首先找到什么，然后停止搜索。

准备`Dynamic query`在所有表中查找数据以获取示例 GUID 值。您可以使用以下查询在特定表下的列名中查找数据。

```
select * from sys.columns where name = 'ColumnName' OBJECT_ID = 
(Select OBJECT_ID From sys.tables Where name = 'Object Name') 
```

# ruby-on-rails - 渲染两个部分中的哪一个？

> ID：11675672
> 
> 赞同：0
> 
> 时间：2012-07-26T18:26:24.677
> 
> 标签：ruby-on-rails, partial-views

我正在尝试了解 foobar rails 代码并遇到以下问题。控制器 A 继承自控制器 B (A < B)。并且它们都没有“索引”方法，但 B 具有视图“app/views/B/index.rhtml.erb”，它将在 A 控制器的该操作上呈现。在那个视图中有一行：

```
render(:partial => "find") 
```

但是有两个文件：“app/views/A/_find.rhtml.erb”和“app/views/B/_find.rjs”我不明白如果从A控制器调用索引会呈现哪个。更多“app/views/B/_find.rjs”有一行：

```
page.replace_html(:contentBody, :partial => "find") 
```

而且我不知道这里呈现的是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:18:39.997

`rjs`如果请求了脚本（通常通过 AJAX 请求），您的应用程序只会呈现文件。如果用户正常访问您的 index 操作（即使用浏览器对 HTML 的请求），您的应用程序将呈现`index.rhtml.erb`以生成 HTML 响应，而 HTML 响应将依次呈现`_find.rhtml.erb`。如果您的页面的某些部分正在请求脚本，那么`_find.rjs`将被呈现（实际上只是在幕后产生一个 javascript 响应）。在这种情况下，`_find.rjs`实际上使用`_find.rhtml.erb`调用中的 HTML 部分`replace_html`来替换页面的一部分。

顺便说一句，您似乎正在使用旧版本的 Rails，`rhtml`并且`rjs`不再使用。我建议使用更新的版本。

# validation - 如何避免maven项目传递依赖中的开放式版本？

> ID：11675676
> 
> 赞同：0
> 
> 时间：2012-07-26T18:26:34.227
> 
> 标签：validation, maven, dependencies, version

有很多建议避免使用开放式的依赖版本。这真是个好主意。
我需要验证几个大项目，并找出它们在所有传递依赖项中是否有任何版本范围。
第一个意图是使用强制插件[http://maven.apache.org/plugins/maven-enforcer-plugin/index.html](http://maven.apache.org/plugins/maven-enforcer-plugin/index.html)。但它只能对插件进行此类验证。
我的任务看起来很常见，但到目前为止我找不到任何现有的解决方案。
现在我将为执行器插件编写自定义规则以检查版本，除非有另一种简单的方法可以实现我的目标。
欢迎任何想法
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:29:44.027

如前所述。版本范围使构建不可预测且不可重现，这确实是邪恶的。

# html - html 在变量周围回显引号

> ID：11675679
> 
> 赞同：-1
> 
> 时间：2012-07-26T18:26:40.227
> 
> 标签：html, variables, echo, quotes

我正在使用*html*来获取一个目录以将其数据回显到另一个目录。 `tt`是一个时间字符串

```
 foreach tt ($tts)
 echo "<option value=${tt}>${tt}</option>"
 end 
```

这会在新目录中生成以下代码

```
<option value=2012072612>2012072612</option>
<option value=2012072606>2012072606</option>
<option value=2012072512>2012072512</option> 
```

我的目标是让它在变量的第一个实例周围有双引号，如下所示。我需要做什么？

```
<option value="2012072512">2012072512</option>
<option value="2012072412">2012072412</option>
<option value="2012072406">2012072406</option> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:27:33.813

您需要像这样转义双引号：

```
echo "<option value=\"${tt}\">${tt}</option>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:43:58.553

您只需将 { 移到 $ 的左侧并添加引号

```
echo "<option value=\"{$tt}\">{$tt}</option>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:41:36.100

或者，这会起作用。我认为另一个不起作用，因为它在 echo 中调用该函数，就好像该函数只是任何给定的文本一样。这应该这样做。我认为单引号会起作用。我很确定您在 echo （我添加了）末尾需要一个分号，但可能是错误的。

```
 foreach tt ($tts)
 echo '<option value="'.${tt}.'">'.${tt}.'</option>';
 end 
```

或者这样用双引号....

```
echo "<option value=\"" .${tt}. "\">" .${tt}. "</option>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:36:09.890

根据语言的不同，有一个转义字符允许您输出通常是语法或编译器用于其他内容的内容。如您所知，双引号用于表示字符串，因此仅将它们放入您的代码中是行不通的，因此您需要做的是使用您正在使用的任何语言的转义字符。

例如，如果您使用的是 PHP，它将是

`echo "<option value=\"${tt}\">${tt}</option>"`

值得注意的是，\ 是 PHP 中的转义字符，那么如果您想在代码中使用 \，因为它是一个目录或类似的东西怎么办？你改用 \ 来表示“逃脱”。您对编译器将作为您想要使用的特殊符号返回的任何内容执行此操作。例如，\'、\"、\ 是您将看到的一些较大的符号，因此您可以在 PHP 块中输出 '、" 和 \ 符号。大多数语言都有转义字符，只需找到您使用的语言即可。

# javascript - Telerik TreeView OnExpand 或类似

> ID：11675684
> 
> 赞同：0
> 
> 时间：2012-07-26T18:27:11.400
> 
> 标签：javascript, asp.net, web-services, telerik

我对此有很多问题，并且正在做一些安静的事情，所以我决定创建一个解决方法。

我想要做的是，当节点展开时，使用单击节点的值调用一个 JS 函数。从那里，我将获取一个查询，返回结果，然后使用内置的 javascript 将节点附加到页面。

我认为有一些方法可以解决这个问题。我在想控件有一个“onNodeExpand”属性，我可以用它来触发 JS 脚本。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:35:31.120

我相信您正在寻找的是：

```
OnExpand() 
```

在这里查看：http: [//demos.telerik.com/aspnet-mvc/treeview/clientsideevents](http://demos.telerik.com/aspnet-mvc/treeview/clientsideevents)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:40:20.477

TreeView 支持按需加载功能。这意味着只有当用户展开节点时，才会自动从服务器下载节点的项目。服务器端代码可以是自定义逻辑来填充您控制的子节点。您需要做的唯一设置就是让树视图知道它必须进行的 AJAX 调用是什么。

看看下面的例子：

[http://demos.telerik.com/aspnet-mvc/treeview/ajaxloading](http://demos.telerik.com/aspnet-mvc/treeview/ajaxloading)

在此示例中，我们将绑定到 Northwind 数据库并构建员工树。这是定义树视图并在树视图上按需设置负载的代码：

```
<%= Html.Telerik().TreeView()
     .Name("TreeView")
     .DataBinding(dataBinding => dataBinding
         .Ajax().Select("_AjaxLoading", "TreeView")
     )
 %> 
```

在上面的代码中，TreeView 设置了一个 DataBinding 来指示它需要对 TreeViewController 中名为 _AjaxLoading 的操作方法进行 Ajax 调用。

如果您正在寻找基于自定义逻辑的按需加载，这是实现它的最简单方法。

您也可以从客户端绑定树视图。TreeView 具有广泛的客户端事件和客户端 API。我建议您通过以下演示：

[http://demos.telerik.com/aspnet-mvc/treeview/clientsideevents](http://demos.telerik.com/aspnet-mvc/treeview/clientsideevents) - 此列表支持的所有客户端事件

[http://demos.telerik.com/aspnet-mvc/treeview/clientsideapi](http://demos.telerik.com/aspnet-mvc/treeview/clientsideapi) - 这列出了树视图的所有客户端 API 支持

希望我能回答你的问题。

Lohith (Tech Evangelist, Telerik India)

# ruby-on-rails-3 - 神秘的 SELECT COUNT(*) 出现在我的控制器中，用于 has_many 关系

> ID：11675687
> 
> 赞同：1
> 
> 时间：2012-07-26T18:27:25.087
> 
> 标签：ruby-on-rails-3, postgresql, activerecord

当我开始在我的开发日志中看到一个调用时，我目前无法追踪，`SELECT COUNT(*)`但它正在发生并且似乎没有原因。我想知道这是否正常和/或为什么会发生。我认为这不是一个大问题，但如果我不需要它，为什么还要额外调用数据库。

在我的控制器中，我有

```
def some_action
  @activities = user.activities
end 
```

在`User`课堂上，我有它`has_many :activities`

当我调用这个动作时，我的日志输出是

```
User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
(0.3ms)  SELECT COUNT(*) FROM "activities" WHERE "activities"."user_id" = 1
Activity Load (0.3ms)  SELECT "activities".* FROM "activities" WHERE "activities"."user_id" = 1 
```

我可以肯定地告诉你的是，它没有用来做那个`SELECT COUNT(*)`调用，据我所知，没有什么东西试图得到这个计数。

我正在使用 Rails 3.2.6 和 PostgreSQL 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:14:48.043

我发现计数查询的原因是由于 Rails 的延迟加载和我使用数据的顺序。

在我遍历所有`@activities`. 如果不是，我会向用户显示不同的内容。

`@activities.empty?`正在执行计数并将其与 0 进行比较，这比将所有记录加载到数组中然后检查它更有效。我可以选择将我的操作更改为

```
@activities = user.activities.all 
```

这可以防止 COUNT 调用并在构建视图之前加载所有记录。

# java - 初学者：来自 java 的 Soap 请求响应调用

> ID：11675690
> 
> 赞同：1
> 
> 时间：2012-07-26T18:27:29.443
> 
> 标签：java, web-services, soap, wsdl

我尝试执行 SOAP 请求并通过 Java 获取 SOAP 响应，然后从 JSP 页面调用它。我研究了很多网站，尝试了很多方法，它似乎无法让它工作。

```
URL u = new URL("http://www.mysitename.com/mysoaprequest.wsdl");
URLConnection uc = u.openConnection();
HttpURLConnection connection = (HttpURLConnection) uc; 
```

……

我可以在里面创建一个带有soap请求xml的wsdl文件吗？

我读了一些关于 Web 服务的东西，我是否必须让一些 Web 服务工作才能使它工作？

我使用一些 wsdl 来测试[http://www.webservicex.net/AustralianPostCode.asmx?WSDL](http://www.webservicex.net/AustralianPostCode.asmx?WSDL)

我一直收到这个错误

> java.io.IOException：服务器返回 HTTP 响应代码：500 用于 URL：[http ://www.webservicex.net/AustralianPostCode.asmx?WSDL](http://www.webservicex.net/AustralianPostCode.asmx?WSDL)

如果有人能指出我正确的方向，将不胜感激。

* * *

这是我需要提出的实际肥皂请求

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://service.application.tvcc.dmv.ca.gov/">
    <soapenv:Header/>
    <soapenv:Body>
        <ser:getNewCourseCompletion>
            <arg0>
                <userDto>
                    <password>********</password>
                    <userId>anyone@somecourt.com</userId>
                </userDto>
            </arg0>
        </ser:getNewCourseCompletion>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:45:58.120

我知道这有点晚了，但无论如何我都会在那里回答。

您要做的是为此 Web 服务自动生成 Java 代码。我将演示使用您引用的 WSDL：[http ://www.webservicex.net/AustralianPostCode.asmx?WSDL](http://www.webservicex.net/AustralianPostCode.asmx?WSDL)

在 Java 中，自动生成代码的工具是`wsimport`. 你会想要使用这样的东西：

```
wsimport http://www.webservicex.net/AustralianPostCode.asmx?WSDL -p com.company.whateveruwant -d . -keep 
```

这会将您想要的代码放入指定的包中（此处`com.company.whateveruwant`）。

从那里，您所要做的就是像普通的 Java 库一样调用 SOAP 方法：

```
package com.company.whateveruwant;

import org.junit.Test;

public class AustralianPostCodeTest {
  @Test
  public void test() {
    AustralianPostCodeSoap soap = new AustralianPostCode().getAustralianPostCodeSoap();
    String response = soap.getAustralianPostCodeByLocation("Collinswood");
    System.out.println(response);
  }
} 
```

这打印出来：

```
<NewDataSet>
  <Table>
    <Location>Collinswood</Location>
    <PostCode> SA 5081</PostCode>
  </Table>
</NewDataSet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:55:09.107

WSDL 是一种菜单，它定义了它将接受什么 SOAP 请求，以及它将返回给您什么。您实际上并未将 WSDL 文档作为请求发送到该 URL。如果您想深入了解应该发送的 XML，我建议您下载soapUI：

[http://sourceforge.net/projects/soapui/files/soapui/4.5.1/](http://sourceforge.net/projects/soapui/files/soapui/4.5.1/)

创建一个新项目并添加您提供的链接：

[http://www.webservicex.net/AustralianPostCode.asmx?WSDL](http://www.webservicex.net/AustralianPostCode.asmx?WSDL)

作为初始 WSDL（您应该在 SoapUI 中看到该框）。然后它将生成您可以发送该 Web 服务的各种请求，并让您填写空白并发送它。

如果您想从 Java 代码中执行此操作，则必须选择像 JAX-WS 这样的 Web 服务平台，并让它生成形成请求并发送请求的 Java 代码。查看一些 JAX-WS 教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:44:14.517

SOAP 是一个非常古老且非常困难的协议（有很多博客告诉你为什么soap 一团糟），好吧，如果可以的话，试试 REST（比如 RESTeasy 框架）。但是如果你必须使用soap，你可以使用AXIS（我使用AXIS1，因为有许多使用该库的遗留应用程序），我对AXIS2没有任何经验，所以这里是制作客户端的提示：

1）您必须将轴库添加到您的类路径（在 linux 中，如下例所示）：

```
env AXISCLASSPATH=~/axis-1_4/lib/axis.jar:~/axis-1_4/lib/commons-discovery-0.2.jar:~/axis-1_4/lib/commons-logging-1.0.4.jar:~/axis-1_4/lib/jaxrpc.jar:~/axis-1_4/lib/saaj.jar:~/axis-1_4/lib/log4j-1.2.8.jar:~/axis-1_4/lib/xml-apis.jar:~/axis-1_4/lib/xercesImpl.jar:~/wsdl4j-1_6_2/lib/wsdl4j.jar 
```

2）然后您可以创建客户端/服务器，如：

```
java -classpath $AXISCLASSPATH org.apache.axis.wsdl.WSDL2Java --server-side example.wsdl 
```

--server-side 使该轴创建用于部署和取消部署服务器层的 wsdl 文件，如果要创建客户端，请将其删除。

3) 现在您有一个文件夹，如 com/example/server/.java 4) 在 Impl 文件（如 ExampleImpl.java）中，您拥有必须实现的方法，以便对 WS 执行某些操作（在服务器端）。

5）如果你想消费 WS，你必须做一些类似的事情：

```
EngineConfiguration engine = EngineConfigurationFactoryFinder
.newFactory().getClientEngineConfig();
SimpleProvider provider = new SimpleProvider(engine);
provider.deployTransport("http", new CommonsHTTPSender());

ExampleLocator sendSmsLocator = new ExampleLocator(engine);
Example example = null;

try {
    example = (ExampleBindingStub) exampleLocator.getExample();
} catch (Exception e) {
    e.printStackTrace();
}

try {
    result = example.exampleMethod(params...);
} catch (Exception e) {
    e.printStackTrace();
} 
```

那么轴站点中有很多文档：

[http://axis.apache.org/axis/java/index.html](http://axis.apache.org/axis/java/index.html)

问候，

# php - preg_match_all 带有空格和逗号分隔符

> ID：11675691
> 
> 赞同：1
> 
> 时间：2012-07-26T18:27:32.367
> 
> 标签：php, regex, preg-match-all

我已经设法让 preg_match 的一部分返回我需要的值，但无法获得正确的语法来返回逗号后*该*字符串后面的内容。任何帮助表示赞赏 - 谢谢

```
$regex = '{loadsegment+(.*?)}';
$input = '{loadsegment 123,789}';
preg_match_all($regex, $input, $matches, PREG_SET_ORDER); 
```

当前结果：

```
$matches [0] [0] {loadsegment 123}
             [1] 123,789 
```

**期望的结果**：

```
$matches [0] [0] {loadsegment 123,789}
             [1] 123
             [2] 789 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:28:51.903

在逗号（和分隔符）之前和之后需要两个捕获组：

```
$regex = "/{loadsegment (\d+),(\d+)}/"; 
```

另外，我使用`\d`which 是数字的简写，而不是`.*?`, 这是任何东西。

我也删除`t+`了 for `t`，因为`t+`会匹配`t`一次或多次，这似乎不是您想要做的。

要使第二组可选，您将使用`?`修饰符：

```
/{loadsegment (\d+),(\d+)?}/ 
```

但这仍然需要逗号。您也可以将其设为可选...

```
/{loadsegment (\d+),?(\d+)?}/ 
```

...但现在您的正则表达式将匹配：

```
{loadsegment 123,} 
```

我们可能不想要。因此，我们将逗号包含在可选的第二组中，如下所示：

```
/{loadsegment (\d+)(?:,(\d+))?}/ 
```

解释（减去分隔符）：

```
{loadsegment   - Match "{loadsegment "
(\d+)          - Match one or more digits, store in capturing group 1
(?:            - Non-capturing group (so this won't be assigned a capturing group number
    ,          - Match a comma
    (\d+)      - Match one or more digits, store in capturing group 2
)
?              - Make the entire non-capturing group optional 
```

[RegExr 演示](http://regexr.com?31lbf)

# jquery - jquery 全局动画持续时间

> ID：11675697
> 
> 赞同：2
> 
> 时间：2012-07-26T18:27:42.630
> 
> 标签：jquery

我有一个包含许多 jQuery 动画的页面，每个都有自己单独定义的持续时间。

我想通过将持续时间设置为 0 来禁用移动设备上的所有动画。

有没有办法在全球范围内覆盖所有动画持续时间？

像这样的东西：

```
 if (isMobile()) {
$.animation.duration.disable = true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:30:56.540

您可以将[jQuery.fx.off](http://api.jquery.com/jQuery.fx.off/)设置为`true`：

```
if (isMobile()) {
    $.fx.off = true;
} 
```

# heroku - Heroku登录和注销不起作用？

> ID：11675698
> 
> 赞同：5
> 
> 时间：2012-07-26T18:27:49.480
> 
> 标签：heroku, helpers

我在 heroku 上的帐户已暂停，我正在尝试在“cmd 或 git bash”上删除它；但是，在我的程序中，我无法从该帐户注销。

这是我收到的错误：

```
$ heroku logout
C:/Users/Romantiku/.heroku/client/lib/heroku/cli.rb:30:in `rescue in start': und
efined method `styled_error' for Heroku::CLI:Class (NoMethodError)
        from C:/Users/Romantiku/.heroku/client/lib/heroku/cli.rb:16:in `start'
        from c:/Program Files (x86)/Heroku/bin/heroku:25:in `<main>' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-08T11:39:40.023

我刚刚以另一个帐户再次登录。

这处理了注销，因为我没有从命令行中看到关于如何注销的明确方法

```
heroku login
Email: new@email.account
Password: ****** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-02T18:23:24.347

从您的 cli 终端点击命令“ **Heroku Logout ”。**

如果错误仍然存​​在，请清除浏览器缓存。以便您可以再次登录。快乐编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-12T16:05:02.373

在我的情况下，我只需要卸载 heroku cli 并安装它，但它没有修复它，然后我使用 sudo 运行登录命令。

```
sudo npm uninstall -g heroku-cli
sudo npm i -g heroku
sudo heroku login 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-16T20:58:37.850

您可以只使用`heroku login -i`cli 中的电子邮件和密码登录。

# jquery - 小胡子中的嵌套部分和从外部文件加载部分

> ID：11675702
> 
> 赞同：1
> 
> 时间：2012-07-26T18:28:09.860
> 
> 标签：jquery, partials, mustache

我有一个亟待解决的问题

是否可以将一个部分嵌套在另一个部分中这是我想要做的

```
-----------
index.html:
-----------
<html>
<head>
 <script src="jquery.js"></script>
 <script src="mustache.js"></script>
 <script src="javascript.js"></script>
 <script src="json1.js"></script>
 <script src="json2.js"></script>
<head>
<body>
<div id="mustacheContainer"></div>
</body>
<html>

--------------
test.mustache: (this file contains main template and partials)
--------------
<script id="tpl-one" type="text/html"><!--main template -->
{{fname}}
{{> tplThree}}
</script>

<script id="tpl-two" type="text/html">
{{lname}}
</script>

<script id="tpl-three" type="text/html">
{{> tplTwo}}
</script>

---------
json1.js:
---------
var user={
 fname:'joe',
 lname:'blogs',
}

---------
json2.js:
---------
var translations={
 someword:'its translation'
}

-------------------
javascript.js file:
-------------------
;$(function () {
    $.get('test.mustache', function(templates) {
        var template = $(templates).filter('#tpl-one').html();
        $.extend(json1,json2);
        var three = $(templates).filter('#tpl-three').html();
        three = {"tplThree": one};
        var html = Mustache.to_html(template, json1, three);
        $('#confirmationMustacheContainer').html(html);
    }, "html");

}); 
```

**现在的问题** 为什么这不起作用？我做错了什么，是这个上下文问题还是小胡子不支持嵌套，有没有办法做到这一点？使用 jquery，我如何从外部文件加载部分？

这些问题很多，我希望有人能回答，因为它会帮助很多用户，我会给这个 5 ups :)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:14:43.810

你真正需要做的就是清理你的变量并正确地形成你的partials对象。`json1`和`json2`没有定义，应该是`user`和`translations`分别。您正在`three`用看起来像引用 undefined 的部分对象覆盖模板`one`。

您的部分对象需要有模板名称作为键（即`tplTwo`）和部分文本作为值（即`{{lname}}`）。

这是清理后的代码：

```
// json1.js
var user = {
    fname: 'joe',
    lname: 'blogs',
}
// json2.js
var translations = {
    someword: 'its translation'
}

$.get('test.mustache', function(templates) {
    var json = $.extend(user, translations),
        one = $(templates).filter('#tpl-one').html(),
        three = $(templates).filter('#tpl-three').html(),
        two = $(templates).filter('#tpl-two').html(),
        partials = {
            "tplThree": three,
            "tplTwo": two
        };

    var html = Mustache.to_html(one, json, partials);
    $('#mustacheContainer').html(html);
}, "html"); 
```

这会输出预期的“joe blogs”，如[本 jsFiddle中所示](http://jsfiddle.net/maxbeatty/tbs6N/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T09:20:15.220

我想做类似的事情并编写了一个快速函数来获取任意模板文件并生成适当的部分变量：

```
 var partials = {};
  $.ajax({
    'url': '/templates/common.mustache',
    'async': false,
    'success': function( template_partials ) {
      $(template_partials).filter( 'script' ).each(function(index,piece) {
        partials[piece.id] = piece.innerHTML;
      })
    }});

  var html = $.mustache(template, jsonData, partials)
  $("div.content").html(html); 
```

这也可能有助于清理和概括您的代码。

# jvm - 没有 jvm 的 Cassandra

> ID：11675703
> 
> 赞同：0
> 
> 时间：2012-07-26T18:28:17.520
> 
> 标签：jvm, nosql, cassandra

我有一个问题：可以在没有java虚拟机的情况下安装数据库Cassandra吗？或者你必须有虚拟机才能运行 Cassandra？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:30:18.847

从[http://wiki.apache.org/cassandra/GettingStarted](http://wiki.apache.org/cassandra/GettingStarted)：

**第 0 步：先决条件和与社区的联系**

Cassandra 需要您可以部署的最稳定的 Java 1.6 版本。对于 Sun 的 jvm，这意味着至少 u19；u21更好。Cassandra 也可以在 IBM jvm 上运行，并且应该也可以在 jrockit 上运行。

# java - 在 c++/python/java 中内置抽象数据类型

> ID：11675707
> 
> 赞同：1
> 
> 时间：2012-07-26T18:28:32.703
> 
> 标签：java, c++, python, c

直到现在我还在用 C 编程，这是一种非常基础的语言。但是现在我在学习数据结构的时候，我的在线老师实际上使用了一些方法，比如leftChild()、rightChild()等。但后来我开始搜索tree ADT等是否默认用C++、Python、Java实现。大多数答案是否定的。

我只想确认默认情况下是否有任何语言支持树 ADT，这意味着无需单独下载它们的类。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T18:48:28.963

这些是基本的 ADT。我认为您应该先学习并自己编写代码，然后再使用这些内置功能进入任何库。

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T18:33:04.337

C++ 中的许多 STL 容器通常使用树来实现。示例包括`std::map`和`std::set`

# iphone - MVC，了解模型的视图

> ID：11675709
> 
> 赞同：3
> 
> 时间：2012-07-26T18:28:36.510
> 
> 标签：iphone, model-view-controller

这可能是一个愚蠢的问题，但在 MVC 中，视图并不知道模型是否正确。我查看了一些表格视图单元格的示例，表格视图单元格具有模型对象的属性。然后它使用该模型的属性来填充标签或单元格的图像。

或者在另一种情况下，如果我有一个 UIView 可以根据模型动态绘制某些东西，那么在 UIView 上拥有一个属性似乎是最简单的，这样 UIView 可以访问该模型的数据以动态绘制它。所以我可以做这样的事情：

```
myView.object = newObject;
[myView setNeedsDisplay]; 
```

这对 MVC 来说是错误的吗？如果是这样，做这两件事的更好方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:41:54.783

MVC 模型有不同的变体——关于 Cocoa 的 Apple 文档在这里：http: [//developer.apple.com/library/mac/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View -Controller.html#//apple_ref/doc/uid/TP40010810-CH14-SW9](http://developer.apple.com/library/mac/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14-SW9)。

我从中得到的主要内容是**视图不应该直接链接到模型。**看这张图：

![Cocoa MVC 模式的苹果图](../Images/376738042403c87dc99a53f67559e224.png)

您经常提到`UITableViewCells`具有**Model**对象的属性-我认为这是错误的。模式应如下所示：

*   **模型**处理所有实际的数据存储和管理
*   **View**知道正在显示的数据类型，但不知道数据本身**。**
*   **控制器**（UITableViewController）是从模型中获取数据并设置视图的“粘合剂”

**这在实践中如何运作？**

请原谅以下伪代码中的一些错误，因为我只是直接输入了它，我没有测试过它，但希望它说明了这一点。

所以你有一个`UITableViewCell`看起来像这样的子类：

```
@interface PhoneEntryTableViewCell {

@property (weak) IBOutlet UILabel *personName;
@property (weak) IBOutlet UILabel *phoneNumber;

} 
```

**模型**如下所示：

```
@interface PhoneModel {

@property (strong) NSMutableArray *listOfPeople;

} 
```

并`UITableViewController`实现标准`UITableViewDelegate`/`UITableViewDataSource`方法，例如：

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  Person *person = [myModel personForIndex:indexPath.row];

  PhoneEntryTableViewCell *cell = [self dequeueReusableCellWithIdentifier:@"PhoneCell"];
  cell.personName.text = [person name];
  cell.phoneNumber.text = [person phoneNumber];

  return cell;
} 
```

所以总而言之，**视图**对实际数据没有任何想法——它只知道它必须显示一个人的姓名和电话号码。它不知道后端存储是什么——它可能是核心数据、文件、下载和解析的 JSON 等。它对**模型**一无所知——例如，它可能存储关于模型的其他数据人，也许电话号码实际上存储在与名称不同的模型中。**控制器**处理所有这些工作。

**为什么要这样做？**

因此，您推出上述应用程序，然后发现您的**模型**非常慢 - 您可以将其换成完全不同的模型，而无需接触**View**。也许您可以让其他开发人员或设计师创建**视图**- 他们只需要知道它必须显示两位文本。基本上，它允许您的代码干净、清晰分区、易于扩展且更易于重构。

现在，只要您在`UITableViewCell`视图中执行此类操作，所有这些都会消失：

```
@property (strong) Person *person; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:55:06.853

首先：没有“MVC 模型”。它以不同的方式用微妙的方式概述，但重要的区别。

如果视图中的组件需要获取信息，它可以通过两种方式获取信息：请求（轮询）或被通知（推送）。在大多数情况下，通知应该是更简洁的方法，因为视图实际上对模型一无所知，它只是作为[观察者](http://en.wikipedia.org/wiki/Observer_pattern)工作。

但是，GUI 组件往往需要“模型对象”来保存数据并且可以被要求提供数据，就像在您的示例中一样。尽管它们通常以模型命名，但在架构上它们不需要属于它。在我看来，他们不应该这样做，因为模型的界面是在预定义的 GUI 组件的需求之后构建的，而 MVC 的整个意义就消失了。如果你想要模型和视图之间的清晰分离，你应该尝试这样的事情：

```
-----------------       -----------------       --------------      ---------
| GUI Component | --->  | "Model Class" | <-->  | Controller | ---> | Model |
-----------------       -----------------       --------------      --------- 
```

因此，GUI 组件所期望的“模型类”对象只不过是控制器的适配器。在 GUI 和控制器之间的这种关系中，您现在可以实现您喜欢的任何策略 - 轮询或推送（双向箭头的原因）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:17:39.387

> 或者在另一种情况下，如果我有一个 UIView 可以根据模型动态绘制某些东西，那么在 UIView 上拥有一个属性似乎是最简单的，这样 UIView 可以访问该模型的数据以动态绘制它。

那么，为了获得正确的信息，您想让视图对模型说些什么呢？它必须对模型有所了解才能提出正确的问题，对吧？或者，您可以定义一个类似的协议`UITableViewDataSource`并发送类似的通用消息`-cellForRowAtIndexPath:`，然后在您的模型中实现该协议。这避免了视图需要知道关于模型的任何特定信息，但这意味着模型现在必须知道视图——它必须知道视图中应该显示的内容，以便它可以通过返回正确的数据。无论您采用哪种方式，都会在模型和视图之间引入依赖关系，这意味着当您对其中一个进行更改时，您将不得不对另一个进行更改。

避免这些依赖正是 MVC 架构的重点。控制器知道模型和视图，这允许模型和视图彼此独立存在。

有时拥有一些模型和视图都知道的对象可能是有意义的。如果您正在编写通讯簿，那么拥有一个知道如何显示联系人的 ContactView 和一个存储联系人对象的模型可能是有意义的。这似乎比拥有一个完全愚蠢的视图更明智，它可以让你传递联系人对象，而不是很长的姓名、地址、电话、传真、电子邮件等列表。你可以说联系人是一个模型对象，以上所有内容都适用：您将在 ContactView 和 Contact 之间引入依赖关系。但通常当我们谈论“模型”时，我们指的是程序用来存储数据的整个对象图，

# xcode - 如何获取 safari mailto：mac 应用程序的行为？

> ID：11675711
> 
> 赞同：3
> 
> 时间：2012-07-26T18:28:50.730
> 
> 标签：xcode, cocoa

我正在寻找在我的 mac 应用程序中编写一个按钮来打开默认的电子邮件客户端并撰写一封带有预编程地址和主题的新电子邮件。

我正在寻找的理想功能与 mailto 的行为相同：当您在 safari 中单击电子邮件地址时的功能。

如果有人能指出一些可能有效的代码的方向，或者为我提供一个示例，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:36:07.703

您可以创建一个 URL 并打开它：

```
- (IBAction)sendMailCocoa:(id)sender
    // Create a mail message in the user's preferred mail client 
    // by opening a mailto URL. The extended mailto URL format 
    // is documented by RFC 2368 and is supported by Mail.app 
    // and other modern mail clients.
    //
    // This routine's prototype makes it easy to connect it as 
    // the action of a user interface object in Interface Builder.
{
    NSURL *     url;

    // Create the URL.

    url = [NSURL URLWithString:@"mailto:dts@apple.com"
        "?subject=Hello%20Cruel%20World!"
        "&body=Share%20and%20Enjoy"
    ];
    assert(url != nil);

    // Open the URL.

    (void) [[NSWorkspace sharedWorkspace] openURL:url];
} 
```

[Apple 在此技术](https://developer.apple.com/library/mac/#qa/qa1084/_index.html)说明中有更多解释。

# vba - Word VBA：在信任中心禁用隐私选项

> ID：11675713
> 
> 赞同：1
> 
> 时间：2012-07-26T18:28:51.977
> 
> 标签：vba, ms-word

在 Word 2010 的信任中心的隐私选项中，是*在保存时从文件属性中删除个人信息*复选框。这是它的样子：

![在此处输入图像描述](../Images/adfea2979648089709074c1d15490044.png)

使用 Word VBA，我希望能够检测此设置的启用/禁用状态，然后，如果启用，则禁用它。但是，我无法在 Word 2010 对象模型中找到任何直接访问此设置的方法。

我可以使用以下方法删除个人信息（相当于启用该选项）：

```
ActiveDocument.RemoveDocumentInformation (wdRDIDocumentProperties) 
```

不幸的是，我无法检测到该设置的布尔值，也无法使用 VBA 禁用它。

最后，我还探索了该`BuiltInDocumentProperties`属性，但无法通过对象模型中的常量进行访问。

对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:52:55.693

`activedocument.RemovePersonalInformation=true`设置 word 选项以删除信息

`CurrentSetting=activedocument.RemovePersonalInformation`保存设置以备后用

这是在 word 2007 上测试的。

# javascript - 我在谷歌地图上有一个标记，点击它应该显示文本内容

> ID：11675715
> 
> 赞同：2
> 
> 时间：2012-07-26T18:28:58.233
> 
> 标签：javascript, onclick, google-maps-markers, show-hide, infowindow

单击时的标记将调用一个名为 calcRoute 的函数。单击标记时，我还想在标记附近显示文本内容。

```
var textContent = "Some text";

var marker = new google.maps.Marker({
            map: map,
            title: MALL.mall.name,
            position: pos
        });

google.maps.event.addListener(marker, 'click', (function () {
            calcRoute();
        })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:34:51.467

看到您已将问题标记为“infowindow”，您应该尝试一下：

```
var infowindow = new google.maps.InfoWindow({
    content: textContent
});

google.maps.event.addListener(marker, 'click', (function () {
    calcRoute();
    infowindow.open(map, marker);
})); 
```

[https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

# javascript - 如何在 Windows 上的 node.js 中运行外部程序？

> ID：11675716
> 
> 赞同：8
> 
> 时间：2012-07-26T18:29:10.697
> 
> 标签：javascript, node.js

我正在 Windows 上使用 node.js 创建一个自动化的 Web 应用程序构建过程。我正在尝试通过 Google 闭包 java 程序运行我们的代码。我在节点文档中阅读了关于 child_process 的文档。它提到它还不能在 Windows 中工作。是否有解决此问题的软件包或解决方法？

这是我试图运行的代码。

```
var _exec = require('child_process').exec;
_exec( 'java ' + '-jar '+ COMPILER_JAR +' --js '+ srcPath +' --js_output_file '+ distPath, 
    function(e){
        echo( "google closure done....");
        echo( e );
    } ); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T22:50:38.653

我有一个用于控制 Windows XP 上的构建队列的 Web 服务器应用程序，我用它来运行批处理文件或可执行文件，而无需任何额外的包。

我会检查回调和 stderr 上的错误参数，因为这可以帮助您找到它不起作用的原因。

我的服务器示例解决方案希望对您有所帮助：

```
var theJobType = 'FOO';
var exec = require('child_process').exec;
var child = exec('Test.exe ' + theJobType, function( error, stdout, stderr) 
   {
       if ( error != null ) {
            console.log(stderr);
            // error handling & exit
       }

       // normal 

   }); 
```

# sql - OR 使用右外连接时的条件

> ID：11675719
> 
> 赞同：1
> 
> 时间：2012-07-26T18:29:25.727
> 
> 标签：sql

我正在尝试学习 SQL，并想知道这样的事情是否可行。

```
Select * 
from RDInfo RD
right outer join RDCollection RDC 
    on (RDC.RDInfoID = RD.RDInfoID and RDC.IsReceived = 1 
        and RDC.IsRenewed = 0) or -- RDInfoID not in table RDC 
```

我试图从 RDCollection 获取数据，如果它满足写在大括号中的 3 个条件，如果不是 RDInfoID 在 RDC 表中没有记录。这是在 Sql 2005 中。

我希望我很清楚。我不确定这是否正确。非常感谢你的帮助。谢谢！

所以在这里，所有员工可能有也可能没有部门的记录，所以在这种情况下，怎么能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:37:40.497

尝试这个：

```
Select * 
from RDInfo RD left outer join
     RDCollection RDC 
    on RDC.RDInfoID = RD.RDInfoID
where (RDC.IsReceived = 1 and RDC.IsRenewed = 0) or rdc.RDInfoID is null 
```

如果您的意思是“RDInfoID 不在表 RD 中”，则使用右外连接并检查 rd.RDInfoId：

```
Select * 
from RDInfo RD right outer join
     RDCollection RDC 
    on RDC.RDInfoID = RD.RDInfoID
where (RDC.IsReceived = 1 and RDC.IsRenewed = 0) or rd.RDInfoID is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:37:30.760

只需使用左连接而不是右连接。

```
Select *  
from RDInfo RD 
left outer join RDCollection RDC  
on (RDC.RDInfoID = RD.RDInfoID and RDC.IsReceived = 1 and RDC.IsRenewed = 0) 
```

通过使用来自 RDInfo 的*左外连接*条目，无论 RDCollection 是否匹配，都将返回该条目。当不匹配时，来自 RDCollection 的列包含空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:52:01.457

我认为只有当您只对满足条件的行感兴趣时才应该进行连接，否则您可以使用左连接或右连接，具体取决于您想从哪个表中获取哪一行。

# javascript - 如何调整基于导航项目名称字符长度的导航菜单？

> ID：11675720
> 
> 赞同：2
> 
> 时间：2012-07-26T18:29:27.320
> 
> 标签：javascript, jquery, html, css, responsive-design

我的问题：如果我的下拉菜单中的主要导航项的名称增加了字符长度，我的下拉菜单就会中断（请参阅附加的 imageTwo）。![导航项目名称中的字符增加时布局混乱](../Images/7079df32a81d8135ea9706a002db1008.png)

我正在使用相对测量单位（主要是 ems），希望能够对我的设计做出一些响应，并在主要导航项的字符长度增加的情况下调整布局，但它不起作用。

我的主菜单是相对定位的，子菜单是绝对定位的。这些子菜单，而不是标准的垂直下拉菜单，而是与其上方的主菜单平行地水平扩展（参见附加的 imageOne）。![菜单的外观](../Images/9d8657242783d23a227ff70b2342be78.png)

我现在的目标是弄清楚如何更正代码，以便在主菜单中导航项的字符数量增加或减少的情况下a）我的主导航菜单可以适当地重新调整它的宽度和b）我的子- menu 将重新调整其位置，使其直接显示在其上方的主菜单下方。

我的想法是，我需要使用一些 jQuery 来执行此操作，但我想知道是否可以仅使用 CSS。

我在下面发布了我的 CSS；如果需要更多信息，请告诉我。

```
#navigation {
  background: rgb(102,102,102); 
  max-height: 3.34em;
  padding: 0;
  position: relative;
  max-width: 48.5em;
  border-radius: 0;
}

#navigation .child-menu, #navigation .child-menu2 {
  display: none;
}

#navigation li.hover #admin-submenu  {
  left: -405px;
}

#navigation li.hover .child-menu {
  background: #47766c;
  display: block;
  position: absolute;
  width: 80em;          
  z-index: 250;
  top: 39px;
  left: -334px;
}

#navigation ul li ul li:hover .child-menu2 {
  background: #47766C;
  display: block;
  left: 0;
  position: absolute;
  top: 40px;
  width: 110px;
  z-index: 250;
} 
```

![在此处输入图像描述](../Images/7fbd0098ff230b2e687b40476def289d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:36:03.260

```
#navigation ul li ul {
    position:absolute;
    min-width:100%;
    height:40px;
    margin:0px;
    padding:0px;
    left:0px;
    top:40px;
}
#navigation ul li ul li {
   float:left;
   height:40px;
   display:block;
   padding-left:15px;
   padding-right:15px;
} 
```

您必须将子菜单 ul 标记的最小宽度设置为 100% 或与页面相同的宽度。然后它的左边：0px; 然后顶部为 40px 或与父菜单高度相同。

# asp.net-mvc - Razor Html.ActionLink 参数

> ID：11675723
> 
> 赞同：4
> 
> 时间：2012-07-26T18:29:40.063
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor

在我看来，我有以下代码：

```
@Html.ActionLink(item.Title,  "Articles/Details", New With {.id = item.ArticleId}) 
```

它产生以下链接：

> /博客/文章/详情/1

我希望它产生这个，而不是：

> /文章/详情/1

我试着弄乱参数，但我不知道如何让它做我想要的。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T18:31:36.723

使用这个[重载](http://msdn.microsoft.com/en-us/library/dd504972.aspx)

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

所以你的代码可以写成

```
@Html.ActionLink(item.Title, "Details","Article",
                  New With {.id = item.ArticleId},Nothing) 
```

检查[此 msdn 页面](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)以查看所有可用的重载

# java - 实际的非 Maven Java Jar 依赖项

> ID：11675727
> 
> 赞同：0
> 
> 时间：2012-07-26T18:29:47.857
> 
> 标签：java, netbeans

我想将 Factual Jar 文件用于地理位置服务，但是我已将 Jar 文件导入项目，但文档指出 pom.xml 告诉您需要将哪些依赖项插入项目以使驱动程序工作.

我的问题是我需要导入哪些依赖项以及在项目中的哪个位置。我正在使用 Netbeans 构建我的 Java 项目。

pom.xml 文件：[http ://repo1.maven.org/maven2/com/factual/factual-java-driver/1.5.0/factual-java-driver-1.5.0.pom](http://repo1.maven.org/maven2/com/factual/factual-java-driver/1.5.0/factual-java-driver-1.5.0.pom)

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.factual</groupId>
<artifactId>factual-java-driver</artifactId>
<version>1.5.0</version>
<packaging>jar</packaging>
<name>factual-java-driver</name>
<description>Factual's officially supported Java driver</description>
<url>http://github.com/Factual/factual-java-driver</url>
<scm>
<connection>
scm:git:git@github.com:Factual/factual-java-driver.git
</connection>
<developerConnection>
scm:git:git@github.com:Factual/factual-java-driver.git
</developerConnection>
<url>git@github.com:Factual/factual-java-driver.git</url>
<!--
url>https://github.com/Factual/factual-java-driver/tree/master</url> <connection>scm:git:git://github.com/Factual/factual-java-driver.git</connection
-->
</scm>
<parent>
<groupId>org.sonatype.oss</groupId>
<artifactId>oss-parent</artifactId>
<version>7</version>
</parent>
<licenses>
<license>
<name>The Apache Software License, Version 2.0</name>
<url>
http://github.com/Factual/factual-java-driver/blob/master/LICENSE.txt
</url>
<distribution>repo</distribution>
</license>
</licenses>
<developers>
<developer>
<id>aaron</id>
<name>Aaron Crow</name>
<email>aaron@factual.com</email>
</developer>
</developers>
<dependencies>
<dependency>
<groupId>com.google.guava</groupId>
<artifactId>guava</artifactId>
<version>r09</version>
</dependency>
<dependency>
<groupId>com.google.api-client</groupId>
<artifactId>google-api-client</artifactId>
<version>1.7.0-beta</version>
</dependency>
<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-core-asl</artifactId>
<version>1.9.1</version>
</dependency>
<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-core-lgpl</artifactId>
<version>1.9.1</version>
</dependency>
<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-mapper-asl</artifactId>
<version>1.9.1</version>
</dependency>
<dependency>
<groupId>commons-io</groupId>
<artifactId>commons-io</artifactId>
<version>2.1</version>
</dependency>
<dependency>
<groupId>org.json</groupId>
<artifactId>json</artifactId>
<version>20090211</version>
</dependency>
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.4</version>
<scope>test</scope>
</dependency>
</dependencies>
<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<build>
<plugins>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-javadoc-plugin</artifactId>
<executions>
<execution>
<id>attach-javadocs</id>
<goals>
<goal>jar</goal>
</goals>
</execution>
</executions>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-release-plugin</artifactId>
<version>2.1</version>
<configuration>
<pushChanges>false</pushChanges>
</configuration>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-gpg-plugin</artifactId>
<executions>
<execution>
<id>sign-artifacts</id>
<phase>verify</phase>
<goals>
<goal>sign</goal>
</goals>
</execution>
</executions>
</plugin>
<plugin>
<artifactId>maven-compiler-plugin</artifactId>
<version>2.3.2</version>
<configuration>
<source>1.6</source>
<target>1.6</target>
</configuration>
</plugin>
<plugin>
<artifactId>maven-assembly-plugin</artifactId>
<version>2.2.1</version>
<configuration>
<descriptors>
<descriptor>jar-with-dependencies.xml</descriptor>
</descriptors>
<finalName>factual-java-driver</finalName>
<outputDirectory>target</outputDirectory>
<workDirectory>target/assembly/work</workDirectory>
</configuration>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-source-plugin</artifactId>
<version>2.1.2</version>
<executions>
<execution>
<goals>
<goal>jar</goal>
</goals>
</execution>
</executions>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-javadoc-plugin</artifactId>
<version>2.8</version>
</plugin>
</plugins>
</build>
<!--
distributionManagement> <repository> <id>sonatype-nexus-staging</id> <name>Sonatype Staging</name> <url>https://oss.sonatype.org/service/local/staging/deploy/maven2/</url> </repository> </distributionManagement
-->
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:27:12.973

[您可以从http://mvnrepository.com/](http://mvnrepository.com/)手动下载依赖项。Pom.xml 详细显示了依赖项的名称：

```
<dependencies>
  <dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>r09</version>
  </dependency>
  ...
<dependencies> 
```

只需检查 artifactId 即可查看要搜索的内容。继续并通过搜索下载它们：

*   番石榴
*   谷歌 api 客户端
*   杰克逊核心asl
*   杰克逊核心lgpl
*   杰克逊-映射器-asl
*   commons-io
*   json
*   朱尼特

（注意下载每个依赖的正确版本）
最后，你需要[将这8个jar文件导入](https://stackoverflow.com/questions/4879903/how-to-add-a-jar-in-netbeans?rq=1)到你的项目中，然后它应该可以工作了。

# mysql - 我应该在 MySQL 中使用标识号作为用户名吗？

> ID：11675731
> 
> 赞同：0
> 
> 时间：2012-07-26T18:30:05.507
> 
> 标签：mysql, database-design

现在我正在设计我的 MySQL 数据库。让我们从用户表和评论表开始。我们看到的主要是评论的作者存储为整数。但是，它需要使用左连接，并且当应用程序变得更大时，您在一个查询中需要很少的左连接。最后会产生复杂的查询。我可以制作没有整数的用户表吗？评论的作者将与他的用户名一起存储。

此外，`foreign keys`在 MySQL 中有。如果我使用它们，我有哪些实际优势？

注意：我使用 UTF-8，应用程序（类似于字典（第一手银河百科全书））将使用西里尔字母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:32:23.073

您可以。但这会增加任何连接的处理开销——使用数字键要快得多。

查询中的几个连接非常好......比非规范化或为“方便”进行其他数据级别更改要好得多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:36:56.817

我强烈建议您在用户表中使用整数作为键，将字段设置为自动递增以保证唯一性，因此您不必自己设置。然后在您的评论或其他表格中设置一个外键。主键字段将被索引，您最好将其作为整数。这个概念很可能适用于您的数据库设计中的许多其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:54:36.017

如果您没有充分的理由不使用代理键，请使用它们。

它们使您的生活变得如此轻松，因为根据定义，它们是您实体的唯一标识符，在整个实体的生活中都无法改变。

对于像用户名这样的自然主键，情况并非如此。因为它们很自然，所以它们依赖于应用程序数据。由于功能需求的变化，今天有效的应用程序数据的约束明天可能会失效。功能需求通常不受您的控制，因为您的客户决定了它们。因此，通常将架构建立在您无法控制自己的约束上是不好的。

因此，请使用代理键，除非您有充分的理由不使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:37:51.587

实际上很难确定哪个选项更好，因为它取决于许多因素（用户能否更改他的用户名？您是否允许未注册用户发表评论？等等）

请考虑一个解决方案，在`comments`表中存储用户名和数字用户 ID。通过这种方式，您可以对数据进行非规范化，但可以获得一些性能优势（您实际上存储了用户名，因为它是在放置评论的那一刻，所以它实际上不是非规范化 - 严格来说。:]）。

# objective-c - 使 UIAlertView 具有与单击打开它的单元格相同的标题

> ID：11675743
> 
> 赞同：0
> 
> 时间：2012-07-26T18:30:48.270
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, uialertview

我需要 UIAlertView 具有与打开它的单元格相同的标题。我已经有一个 NSArray 的名字。因此，例如，如果我打开一个名为 White 的单元格，UIAlertView 的标题应该是 White。每个打开的单元格都必须有一个特定的 AlertView 标题。

我已经尝试实现 self.(name of array) 方法，当我这样做时似乎不起作用。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:01:10.463

这应该可以帮助您：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[myArray objectAtIndex:indexPath.row] message:@"message" delegate:self cancelButtonTitle:@"cancel" otherButtonTitles:nil, nil];
    [alert show];
} 
```

# java - SaveOrUpdate 无响应。为什么？

> ID：11675759
> 
> 赞同：2
> 
> 时间：2012-07-26T18:31:53.380
> 
> 标签：java, hibernate, spring-mvc

```
@SuppressWarnings("unchecked")
//@Override
public SerialNumber getCounter(String id) {
    Session cs = sessionFactory.getCurrentSession();     
    SerialNumber sn = (SerialNumber) cs.get(SerialNumber.class, id);
    if (sn == null) {
        //TODO Throw an error (maybe). The code below creates a new Serial number counter
        log.debug("NO Serial Number for: " + id + " was found.");
        sn = new SerialNumber();
        sn.setSerialNumberId(id);
        sn.setName("Unspecified");
        sn.setValue(0);
    }
    sn.setValue(sn.getValue()+1);
    cs.saveOrUpdate(sn);
    cs.close();
    return sn;
} 
```

此行被忽略并且不向数据库（MySQL）保存任何内容：

```
cs.saveOrUpdate(sn); 
```

关于为什么的任何想法？我没有头绪。

我绝不是 Java 大师，但即使是这里的 Java 大师也无法弄清楚。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:34:12.567

尝试

```
Transaction tx = null;
try{
 tx = session.beginTransaction();
   //your code to save
 tx.commit();
 }catch(Exception ex){
     tx.rollBack();
     ex.printstacktrace(); //log to see if there is any other error
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:39:27.797

会话的更新可能会被推迟。尝试：

```
cs.flush(); 
```

如果这是您的问题，您可以在属性中将其设置为 AUTO：

```
<prop key="org.hibernate.FlushMode">AUTO</prop> 
```

# facebook-graph-api - 远程发布到 Facebook 页面

> ID：11675761
> 
> 赞同：0
> 
> 时间：2012-07-26T18:31:56.517
> 
> 标签：facebook-graph-api, post, facebook-php-sdk

客户网站有一个促销优惠，该优惠以预定的时间间隔更新优惠券的百分比率。每次运行此作业时，他们都希望在他们的 Facebook 页面上发布新的折扣百分比。

我已经阅读了一些教程和文档，我知道我必须创建和应用程序并让它请求访问。然而，这些更新是通过 cron 作业运行的，并且客户端每年只运行几次促销活动。由于offline_access 权限已被弃用，我将如何处理访问令牌已过期的情况？我需要尽可能自动化，以便客户可以通过他们的 Magento 店面自行管理。

每次访问应用程序时都应该更新offline_access，即更持久的授权令牌，但考虑到我没有基于浏览器的客户端执行这些操作，我不确定它如何或是否会识别令牌以外的任何内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:01:45.547

鲜为人知的事实：如果您获得了`publish_stream`扩展权限，那么您可以使用您的应用程序的访问令牌而不是用户的访问令牌代表用户发布。这适用于 cron 作业等场景。

在这种情况下，`offline_access`不需要扩展权限，甚至不会使用用户的访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:22:29.480

通过阅读您的要求的第一段，似乎所需要的只是帖子出现在页面墙上的能力。要自动执行此操作，您可以使用 API 执行此操作。以下问题的答案将带来更多见解，并且您似乎不需要任何离线访问。

[如何使用 PHP 中的 API 在 facebook 中发布墙？](https://stackoverflow.com/questions/4030701/how-to-post-wall-in-facebook-using-api-in-php)

让我知道这是否满足或是否需要更多。

# powerbuilder - PowerBuilder Retrieve() 通过用户控制

> ID：11675765
> 
> 赞同：0
> 
> 时间：2012-07-26T18:32:05.583
> 
> 标签：powerbuilder, datawindow, sql

我在 PowerBuilder 12.5 Classic 上使用 SetTransObject() 和 Retrieve()。然而，它并没有给用户很大的权力来检索数据。我有一个单行编辑（sle_employeeID），用户需要将其插入员工 ID 中，并且 DataWindow 显示所选 ID NO 的员工数据（IDNO、姓名、年龄、职务）。

```
dw_1.settransobject(sqlca)
string employeeID
employeeID=sle_employee.text
dw_1.retrieve(employeeID) 
```

代码根据我的规范从 DataWindow 对象中检索整个数据，我使用了表格和快速选择语句。请帮助提供一个代码，它可以让我更自由地通过控件选择数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:09:12.723

我不清楚你的期望是什么，但令我震惊的是 SetTransObject() 和 Retrieve() 正在做你要求他们做的事情；问题不存在。如果您创建 20 个 SLE 和一个具有 20 个参数的 DataWindow（以及一个足够复杂的附带的 SELECT 语句，如果参数为空，则可以将跳过参数作为标准处理），那么 SetTransObject() 和 Retrieve() 就可以正常工作。

DataWindow 有一个特性，称为 Query By Example (QBE)，您可能想看看它。但是，虽然这为用户提供了重要的查询功能，但您可能需要考虑您的用户是谁。如果用户拥有数据分析或计算机科学博士学位，那么 QBE 就可以了；如果用户是一个宿醉的临时就业电话推销员，您可能会把他们抛在脑后。

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:33:36.617

您可能希望使用 Terry 提到的 DataWindow 的查询模式。您必须向用户提供说明，但基本用途是直接在 DataWindow 中输入要匹配的值。有关详细信息，请参阅DataWindow Programmer's Guide 中的主题*为用户提供查询能力。*这是我的一个实用程序窗口中的代码。它使用带有工具栏按钮的菜单将 DataWindow 置于查询模式并关闭和检索查询模式。我在菜单和 DataWindow 事件之间使用 PFC 消息路由，但您可以简单地从按钮单击事件中调用该事件，在这种情况下，您将删除修改菜单的行。

```
// this code is in an event in the DataWindow
// toggles query mode on and off

if "no" = object.dataWindow.queryMode then
    // you may want to check for unsaved changes here and let the user go back
    object.dataWindow.queryMode = "yes"
    m_myMenu.m_rows.m_query.checked = TRUE  // this has a button on the toolbar

else
    m_myMenu.m_rows.m_query.checked = FALSE
    acceptText()
    object.dataWindow.queryMode = "no"
    retrieve()

end if 
```

要获得最大的灵活性，请在部分或所有列上设置 criteria.override_edit='yes'。下面的代码在所有列上设置了 criteria.override_edit='yes'。这可能不适合您的情况。如果没有 override_edit，用户只能输入通过列验证的查询值。

```
// this code is in an event in the DataWindow
// it is called after the DataObject is set
// it sets criteria.override_edit='yes' for all the columns

string ls_describe, ls_modify, ls_col, ls_result
integer li_colCount, li_col

setTransObject(SQLCA)
ls_describe = "datawindow.column.count"
ls_result = dw_1.describe(ls_describe)
if not isnumber(ls_result) then
        // logging code elided
        ls_result = '0'
end if
li_colCount = integer(ls_result)
for li_col = li_colCount to 1 step -1
    ls_col = "#" + string(li_col)
    ls_modify = ls_col + ".criteria.override_edit='yes'"
    ls_result = dw_1.modify(ls_modify)
    if "" <> ls_result then 
   // every column may not have an edit, and some edits might not          // have the property. it's just as fast to try to modify it as it
   // is to check it
       // logging code elided
    end if
next 
```

# jsf-2 - 未调用命令按钮操作

> ID：11675769
> 
> 赞同：1
> 
> 时间：2012-07-26T18:32:12.473
> 
> 标签：jsf-2, primefaces

我有以下情况：

```
<h:form>
<h:panelGrid columns="2" cellpadding="5">
    <p:commandButton id="loginButton" value="Login" ajax="false"
                        action="#{login.loginAction}" />
</h:panelGrid>
</h:form> 
```

当我单击该按钮时，将执行来自我的 bean 的方法 loginAction()。

如果我有：

```
<h:form>

    <h:panelGrid columns="2" cellpadding="5">

        <h:outputLabel for="username" value="#{labels.UserName}" />
        <p:inputText value="#{login.username}" id="username"
                                required="true" />

        <p:commandButton id="loginButton" value="Login" ajax="false"
                        action="#{login.loginAction}" />
    </h:panelGrid>
</h:form> 
```

在这种情况下，当我按下登录按钮时，方法 loginAction() 没有被调用，我不明白为什么。用户名的设置器被调用，但 loginAction 没有。

我正在使用 JSF 2.0，Primefaces 3.3。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:35:12.407

我假设您在控制台中也没有收到错误，对吧？如果是这种情况，我建议`<p:messages autoUpdate="true" />`在您的表单中添加以查看是否存在一些验证错误或其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:37:25.813

如果我使用

```
<h:commandButton id="loginButton" value="Login" ajax="false"
                        action="#{login.loginAction}" /> 
```

方法 loginAction 被调用。

我将使用 h:commandButton 而不是 p:commandButton。

# actionscript-3 - 在 Actionscript 项目中创建 YAML 配置文件（通过 as3yaml 解析）而不是 XML

> ID：11675770
> 
> 赞同：2
> 
> 时间：2012-07-26T18:32:13.020
> 
> 标签：actionscript-3, parsing, yaml, configuration-files

有没有人为 Actionscript 使用过 as3yaml YAML 解析器？我有一个 Actionscript 应用程序（在 Flash IDE 中编写，而不是 Flash Builder），它在启动时解析 XML 配置文件。我想用更易于阅读的 YAML 文件替换它，但我担心 as3yaml 解析器不会像 Actionscript 的内置 XML 解析器那样可靠。有没有人用过 as3yaml 或者你知道 Actionscript 有更好的 YAML 解析器吗？

[http://code.google.com/p/as3yaml/](http://code.google.com/p/as3yaml/)

谢谢！

# java - MySQL/JAVA 插入速度

> ID：11675772
> 
> 赞同：-1
> 
> 时间：2012-07-26T18:32:16.847
> 
> 标签：java, mysql, insert, tuples, execution-time

所以我正在 Net Beans 中开发一个 MySQL/Java 程序，用于帮助我们理解执行时间等。

所以我创建了 java 程序，以便用户可以在 6 个表中的每一个中输入 x 数量的元组。所以我们必须输入超过 125000 个元组的数据。好吧，我只遇到了 60000 个元组的问题，当程序执行时，插入 60000 个元组大约需要 30 分钟。

不用说最终我将不得不在一个表中输入 125000 个元组，我需要知道如何使这个插入更快？有任何想法吗？

谢谢你

布兰登

编辑：

代码

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package program2;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.Statement;
import java.util.Random;

public class Program2 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {

            // Variables
            int takesnum=0;
            int instructornum=0;
            int coursenum = 0;
            int studentnum = 0;
            int count = 0;
            int departmentnum =0;
            int counts= 0;
            int minimum=0;
            int x=0;
            int teachesnum=0;
            // Variables

            //Connection to the database
            Connection conn = null;
            String url = "jdbc:mysql://localhost:3306/";
            String dbName = "university2";
            String Driver = "com.mysql.jdbc.Driver";
            // Change the userName & password to what ever your credentials are.
            String userName = "root"; 
            String password = "121089bn";
            //Connection to the database

       try {

            InputStreamReader istream = new InputStreamReader(System.in);
            BufferedReader MyReader = new BufferedReader(istream);

            Class.forName(Driver).newInstance();
            conn = DriverManager.getConnection(url+dbName,userName,password);
            System.out.println("Connected");

            // Ask the user how many tuples in department table.
            System.out.println("How many tuples would you like to create in Department Table?");

            // Takes in as string the number then parse it to an int.
            String dept = MyReader.readLine();
            departmentnum = Integer.parseInt(dept);

// ****************** Department Table ******************//  
            while (count < departmentnum)
            {
                Statement st = conn.createStatement();
                // Counts keeps the counter so the Primary Key is unique.
                st.executeUpdate("Insert into department (dept_name, building, budget) values ('Dept "+counts+"', 'Voigt', '1200')");
                count++;
                counts++;
            }

// ****************** Student Table ******************//                
            count=0;
            counts=0;

            System.out.println("How many tuples would you like to create in Student Table?");
            String student = MyReader.readLine();
            studentnum = Integer.parseInt(student);

            while (count < studentnum)
            {
                int z=0;
                int credit=128;
                Random ran = new Random(); 
                int range = departmentnum - minimum; 
                x =  ran.nextInt(range) + minimum; 

                Random random = new Random(); 
                int totcred = credit - minimum; 
                z =  random.nextInt(totcred) + minimum; 

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into student (id, name, dept_name,tot_cred) select '"+counts+"', 'Student "+counts+"', dept_name, '"+z+"' from department where dept_name='Dept "+x+"'");
                count++;
                counts++;
            }

// ****************** Course Table ******************//                 
            x=0;
            count=0;
            counts=0;   

            System.out.println("How many tuples would you like to create in Course Table?");
            String course = MyReader.readLine();
            coursenum = Integer.parseInt(course);

            while (count < coursenum)
            {
                Random ran = new Random(); 
                int range = departmentnum - minimum; 
                x =  ran.nextInt(range) + minimum; 
                int credit=5;
                int z=0;

                Random random = new Random(); 
                int totcred = credit - minimum; 
                z =  random.nextInt(totcred) + minimum; 

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into course (course_id, title, dept_name,credits) select '"+counts+"', 'Computer Science "+counts+"', dept_name, '"+z+"' from department where dept_name='Dept "+x+"'");
                count++;
                counts++;
            }

// ****************** Instructor Table ******************//                   
            x=0;
            count=0;
            counts=0;   

            System.out.println("How many tuples would you like to create in Instructor Table?");
            String instructor = MyReader.readLine();
            instructornum = Integer.parseInt(instructor);

            while (count < instructornum)
            {
                Random ran = new Random(); 
                int range = departmentnum - minimum; 
                x =  ran.nextInt(range) + minimum; 

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into instructor (id, name, dept_name,salary) select '"+counts+"', 'Instructor "+counts+"', dept_name, '10000' from department where dept_name='Dept "+x+"'");
                count++;
                counts++;

            }

// ****************** Teaches Table ******************//                    
            x=0;
            count=0;
            counts=0;

            System.out.println("How many tuples would you like to create in Teaches Table?");
            String teaches = MyReader.readLine();
            teachesnum = Integer.parseInt(teaches);

            while (count < teachesnum)
            {
                Random ran = new Random(); 
                int range = instructornum - minimum; 
                x =  ran.nextInt(range) + minimum; 

                Random random = new Random(); 
                int courserange = coursenum - minimum; 
                int y =  random.nextInt(courserange) + minimum; 

                int g = 100;
                Random r = new Random();
                int f = g - minimum;
                int h = r.nextInt(f) + minimum;

                int l = 100;
                Random random1 = new Random();
                int j = l - minimum;
                int k = random1.nextInt(j) + minimum;

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into teaches (id, course_id, semester, year) select id, course_id, 'Spr "+h+"', '20"+k+"' from course, instructor where instructor.id='"+x+"' and course.course_id='"+y+"'");
                count++;
                counts++;
            }

// ****************** Takes Table ******************//                    
            x=0;
            count=0;
            counts=0;

            System.out.println("How many tuples would you like to create in Takes Table?");
            String takes = MyReader.readLine();
            takesnum = Integer.parseInt(takes);

            while (count < takesnum)
            {
                Random ran = new Random(); 
                int range = studentnum - minimum; 
                x =  ran.nextInt(range) + minimum; 

                Random random = new Random(); 
                int courserange = coursenum - minimum; 
                int y =  random.nextInt(courserange) + minimum;

                int g = 100;
                Random r = new Random();
                int f = g - minimum;
                int h = r.nextInt(f) + minimum;

                int l = 100;
                Random random1 = new Random();
                int j = l - minimum;
                int k = random1.nextInt(j) + minimum;

                Statement st = conn.createStatement();
                st.executeUpdate("Insert into takes (id, course_id, semester, year, grade) select id, course_id, 'Spr "+h+"', '20"+k+"', 'B' from course, student where student.id='"+x+"' and course.course_id='"+y+"'");
                count++;
                counts++;
            }

            conn.close();
       }

            catch (Exception e) {
            System.err.println("Error");
            System.err.println(e.getMessage());
            }
}
} 
```

表

```
drop database university2;
create database university2;

use university2;

create table department
(dept_name      varchar(20) primary key, 
 building       varchar(15), 
 budget             numeric(12,2)
);

create table student
(ID             int,
 name           varchar(20) not null, 
 dept_name      varchar(20), 
 tot_cred       numeric(10,0),
 primary key (ID),
 foreign key (dept_name) references department(dept_name)

);

create table course
(course_id      int, 
 title          varchar(50), 
 dept_name      varchar(15),
 credits        numeric(2,0),
 primary key (course_id),
 foreign key (dept_name) references department(dept_name)
);

create table instructor
(ID         int, 
 name           varchar(20) not null, 
 dept_name      varchar(20), 
 salary         numeric(8,2),
 primary key (ID),
 foreign key (dept_name) references department(dept_name)
);

create table teaches
(ID         int, 
 course_id      int,
 semester       varchar(6),
 year           numeric(4,0),
 primary key (ID, course_id, semester, year),
 foreign key (course_id) references course(course_id)
    on delete cascade,
 foreign key (ID) references instructor(ID)
    on delete cascade
);

create table takes
(ID         int, 
 course_id      int,
 semester       varchar(6),
 year           numeric(4,0),
 grade              varchar(2),
 primary key (ID, course_id, semester, year),
 foreign key (course_id) references course(course_id)
    on delete cascade,
 foreign key (ID) references student(ID)
    on delete cascade
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:45:08.907

使用 a`PreparedStatement`而不是`Statement`. 它“预编译”SQL，以更快的速度连续调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:54:08.053

在没有仔细查看您的代码的情况下，这里有一些您可能想要查看的内容：

1.  `PreparedStatement`可能会有所帮助，因为不必为每个请求都编译该语句。
2.  批量执行语句。查看 PreparedStatement 上的 addBatch() 方法。一旦添加了 1000 个批次，就可以使用 executeBatch() 来执行它们。如果您在连接上结合设置“ [rewriteBatchedStatements](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html) ”执行此操作，那么 MySQL 驱动程序可能能够进行一些优化。
3.  引入几个“插入”工作人员，每个工作人员负责插入给定大小的批次。如果您只使用一个连接，则需要一次插入一个。如果您使用多个连接（通过多个线程），您很可能会看到速度的提高。

# sql - 将 Excel 数据写入 SQL Server 数据库的脚本

> ID：11675774
> 
> 赞同：0
> 
> 时间：2012-07-26T18:32:22.620
> 
> 标签：sql, sql-server, perl, excel, ssis

我需要某种起点来完成以下任务：

某种脚本应该监视某个文件夹以获取传入的 excel 文件。这些 excel 文件都有一个同名的工作表。然后，该脚本应将每个 Excel 文件的一定范围的列向下运行所有​​行并将列数据写入正在运行的 Microsoft SQL Server 表中。

现在我不知道我应该/可以使用哪种脚本语言来完成这项任务。也许 perl 或 windows power shell？

希望你能指出我正确的方向。

**更新：**我不应该也研究一下 SSIS，因为它似乎提供了很多功能？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:03:31.920

您可以使用 .Net 创建一个 Windows 服务，该服务可以在特定时间间隔（例如 10 分钟）内监视特定文件夹。

使用 ADO.Net，您可以连接到 Excel 工作簿和 SQL 服务器，执行 SQL 风格的数据转换。如果 Excel 文档不利于执行 SQL 查询，则始终有 MS Office 互操作与 Excel 交互以选择单元格的特定值（这往往比前者更困难）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:53:02.163

我可能会在 Perl 或 Python 中编写一个脚本来尝试调用文件夹中的文件，如果成功，则将数据解析为字典/哈希（很容易将行和列分解为哈希）或数组，使很容易写入数据库。

然后（对不起，我对 Python 的了解更好）使用 PyODBC 模块，或者连接到服务器所需的任何其他模块，然后开始编写。如果这没有帮助，我很抱歉，我是初学者。

# php - htaccess 拒绝我的页面获取样式

> ID：11675775
> 
> 赞同：0
> 
> 时间：2012-07-26T18:32:25.023
> 
> 标签：php, .htaccess, mod-rewrite

我正在使用 .htaccess 来清理我的链接。链接如下所示：

```
http://www.mydomain.com/home/param2/param3 
```

我使用explode函数来获取我的参数：

```
$url = $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
$aPages = explode("/", $url);

if($num >= 0){
    return $aPages[$num];
}
else{
    return $url;
} 
```

我的 htaccess 文件

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !=/index.php
RewriteRule .* /index.php 
```

如果我的第一个参数（'home'）为空，它将重定向到一个页面，上面写着'找不到页面'。这一切都很好，但是当我调用我的样式表（'/css/style.css'）时，网站会做同样的事情并且不会加载我的样式表。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:34:24.600

尝试

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:07:41.463

试试这个？

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

# visual-studio-2010 - 如何在 Visual Studio 中查找/替换复杂的语句？

> ID：11675776
> 
> 赞同：0
> 
> 时间：2012-07-26T18:32:26.470
> 
> 标签：visual-studio-2010

我正在尝试做一些我认为很容易但我无法弄清楚的事情。我只是想找到一段代码并替换它。我在几个文件中有一个方法

```
 [TestMethod, ExpectedException(typeof (InvalidOperationException))]
    public void RetrieveWithInvalidKey() 
```

我正在尝试将其替换为：

```
 [TestMethod]
    public void RetrieveWithInvalidKey() 
```

我不能随便找`[TestMethod, ExpectedException(typeof (InvalidOperationException))]`，因为还有很多我不想改变的。我只想在`public void RetrieveWithInvalidKey()`之后更改那些。我尝试使用正则表达式查找*[TestMethod, ExpectedException(typeof (InvalidOperationException))]\npublic void RetrieveWithInvalidKey()*但没有找到。

我如何找到这个特定的代码块来替换？如果可以的话，我也有 ReSharper，但它无法识别方法模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:52:04.570

在查找框中使用正则表达式时，您必须使用反斜杠转义 '['、']'、'(' 和 ')' 字符。

因此，您应该使用：

```
\[TestMethod, ExpectedException\(typeof \(InvalidOperationException\)\)\]\n:b*public void RetrieveWithInvalidKey\(\) 
```

供您搜索。

在替换框中键入以下内容：

```
[TestMethod]
public void RetrieveWithInvalidKey() 
```

那应该可以得到你想要的。

# jquery - jQuery - 插件中带有 $(this) 的 setTimeout 函数

> ID：11675777
> 
> 赞同：1
> 
> 时间：2012-07-26T18:32:27.597
> 
> 标签：jquery, function, jquery-plugins, plugins, this

我的问题在某种程度上与[这里](https://stackoverflow.com/questions/11442357/jquery-text-not-showing-properly-using-fadein)的问题有关。我正在尝试做一个显示消息的插件，然后将其淡出。

这是插件：

```
(function($) {
$.fn.showWarning = function(msg) {
    return this.each(function() {
        $(this).text(msg).show().hide(); // <-preloads message
        $(this).fadeIn('fast', function() {
            $(this).stop().text(msg);
            setTimeout(function() {
                $(this).fadeOut(300);
            }, 2500);
        });
    });
};
})(jQuery); 
```

整个代码在这里：http: [//jsfiddle.net/e5kns/6/](http://jsfiddle.net/e5kns/6/)

问题是消息不会消失，所以我想它与**setTimeout**有关系。也许 $(this) 没有引用它应该在哪里？

**Firebug**给出：

*a.ownerDocument 未定义*

和**铬**：

*未捕获的类型错误：无法读取未定义的属性“defaultView”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:34:21.273

你可以

```
$(this).stop().text(msg).delay(2500).fadeOut(300) 
```

* * *

事实上，`this`除了`window`. 因为浏览器正在调用`this`设置为的超时回调`window`。`this`仅基于函数的调用方式。

```
setTimeout($.proxy(function() {
    $(this).fadeOut(300);
}, this), 2500); 
```

会解决这个问题，因为它会生成另一个函数，该函数会丢弃`this`并使用原始函数提供的`this`和明确`applie`的 s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:39:55.420

尝试这个，

```
(function($) {
    $.fn.showWarning = function(msg) {
        return this.each(function() {
            $(this).text(msg).show().hide(); // <-preloads message
            $(this).fadeIn('fast', function() {
                $this = $(this);
                $(this).stop().text(msg);
                setTimeout(function() {
                    $this.fadeOut(300);
                }, 2500);
            });
        });
    };
})(jQuery); 
```

ps：正如@Esailija 建议的那样，delay 和fadeout 更好

# foursquare - 在 Foursquare 上发布没有场地的呼喊

> ID：11675778
> 
> 赞同：0
> 
> 时间：2012-07-26T18:32:31.257
> 
> 标签：foursquare, checkin

过去可以在没有场地的情况下发布 chekin，这会导致在 Foursquare 上发布“呐喊”。这已停止工作。有可能再这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:39:31.110

根据此公告，不再可能：[https ://groups.google.com/group/foursquare-api/browse_thread/thread/231fcc783f5c592f](https://groups.google.com/group/foursquare-api/browse_thread/thread/231fcc783f5c592f)

# desire2learn - 在 Desire2Learn 上上交

> ID：11675779
> 
> 赞同：0
> 
> 时间：2012-07-26T18:32:32.747
> 
> 标签：desire2learn

我们正在尝试在我们的 Desire2Learn 环境中为不同的课程站点启用 TurnItIn。据我们所知，现在要执行此操作，我们必须手动为 DOME 中的每个 ou 执行此操作。

我们可以利用 API 中的任何内容来创建“表单”以在所有组织单位中启用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:34:48.423

从 Desire2Learn 套件的第 10 版开始，没有用于控制圆顶配置的 api。

# java - 重用以编程方式创建的 Textview

> ID：11675782
> 
> 赞同：0
> 
> 时间：2012-07-26T18:32:49.820
> 
> 标签：java, android

我编写了代码来执行搜索并在 XML 文件中的搜索表单下方显示结果。

但是，通过动态创建 TextViews，它会不断添加更多 TextViews，因此每次执行搜索时，TextViews 的数量都会增加 5。如何重新使用 TextViews，以便更新要显示的文本而不是创建更多 TextViews？

```
for(int i=0; i<5; i++) {

    TextView altName = new TextView(getApplicationContext());

    altName.setText("blah");
    altName.setLayoutParams(new TableRow.LayoutParams(1));
    altName.setTextAppearance(getApplicationContext(), R.style.textSize);

    TableRow altNameTr = new TableRow(getApplicationContext());
    altNameTr.addView(altName);
    table.addView(altNameTr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:37:15.473

**1.**当您**动态创建 TextView时，使用****方法**为它们分配**id 。** `setId(int i)`

 ******2.在任何你需要****的地方重用TextView ..**`ids`**

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:42:07.110

你需要做的是：

1.  在搜索之前，您创建 TextViews 并将它们添加到表中。不要忘记存储它们（`ArrayList<TextView>`可以正常工作）

2.  每次获得搜索结果时，请浏览您的 TextViews 列表并相应地更新它们（使用`setText()`）

所以你的代码应该像：

```
public class Search
{
    ArrayList<TextView> results = new ArrayList<TextView>();

    public void init(Context context)
    {
        TableRow altNameTr = new TableRow(context);
        TextView tv;

        for(int i=0; i<5; i++)
        {
            tv = new TextView(context);
            results.add(tv);
            altNameTr.addView(tv);
        }
        table.addView(altNameTr);
    }

    public void fillSearchResults()
    {
        for(int i=0; i<results.size(); i++) 
        {
            results.get(i).setText("Whatever you need to set here"); 
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:57:08.577

在作为第一行的函数中，您可以添加`table.removeAllViews()`. 这样，在执行新搜索之前，您的表总是会被清除。

如果你总是有 5 个结果，那么最好使用 Pavel Dudka 的方法 :)******

# html - 在线网站布局与本地不同

> ID：11675786
> 
> 赞同：1
> 
> 时间：2012-07-26T18:33:11.950
> 
> 标签：html, css, alignment, cross-browser

[http://www.mohrdevelopment.com](http://www.mohrdevelopment.com)

我目前仅使用 2 个浏览器测试该网站：

Rockmelt & 铬。

**熔岩问题：**

在rockmelt 浏览器中打开时，除了“关于”选项卡外，一切正常。当它被按下时，我的标题消失了。我什至尝试从我的其他一个看起来相同的选项卡中复制代码（但没有标题问题），但问题仍然存在。

**铬问题：**

最初在谷歌浏览器中打开网站时，导航栏是垂直对齐的。但是，如果您按下其他一些选项卡，则该栏会像预期的那样水平对齐（即使您返回主选项卡）。但是，如果您快速单击选项卡，则该栏有可能再次垂直对齐。

我希望有人能够帮助我解决这个问题，因为我看不到其中的逻辑。

**我的主页选项卡的 HTML 代码：**

```
 <html>

        <head>

            <!-- Meta information -->
            <meta http-equiv="content-type" 
                content="text/html;charset=utf-8" />

            <!-- Favicon -->
            <LINK REL="SHORTCUT ICON" HREF="favicon.ico">

            <!-- Title -->
            <title> Jonas - Development page </title>

            <!-- Stylesheet -->
            <link rel="stylesheet" href="style.css" />

        </head>

    <body>

    <!-- Header of page -->
    <div class="headerdiv">
            <h1 class="header">Mohr Development</h1>
    </div>

                    <!--Navigation bar-->
                    <ul class="navigation">
                        <li class="current"><a href="index.html"><em class="home"/>Home</a></li> <!-- Current selection -->
                        <li><a href="photos.html"><em class="photos"/>Photos</a></li>
                        <li><a href="projects.html"><em class="projects"/>Projects</a></li>
                        <li><a href="about.html"><em class="about"/>About</a></li>
                        <li><a href="contact.html"><em class="contact"/>Contact</a></li>
                    </ul>

            <div class="wrap">

                <div class="content">

                    <br>My new selection

                        <form action="" method="get">
                            <ul>
                                <li>
                                    <label for="name"><font color="white">Enter your name:</font></label>
                                    <input id="name" name="name"/>
                                </li>

                                <li>
                                    <label for="comments"><font color="white">Your comments</font></label>
                                    <textarea id="comments" name="comments"></textarea>
                                </li>

                                <li>
                                    <label for="css"><font color="white">Do you like CSS?</font></label>
                                    <input type="checkbox" name="css" id="css" />
                                </li>

                                <li>
                                    <label for=""><font color="white">Favorite Language?</font></label>
                                    <input type="radio" /> CSS
                                    <input type="radio" /> HTML
                                    <input type="radio" /> JavaScript
                                    <input type="radio" /> PHP
                                </li>

                                <li>
                                    <input type="submit" value="Go!"/>
                                </li>
                            </ul>
                        </form>

            </div> <!-- Wrap end -->

                        <!-- Sidebar -->
                        <aside>
                            <h2>Sidebar</h2>
                                <ul class="sidebar">
                                    <li class="sidebarli"><a href="#">Lol1</a></li>
                                    <li class="sidebarli"><a href="#">Lol2</a></li>
                                    <li class="sidebarli"><a href="#">Lol3</a></li>
                                    <li class="sidebarli"><a href="#">Lol4</a></li>
                                </ul>
                        </aside>

                </div> <!-- Content end -->

    <div class="footer">

        <p>Copyright © Mohrdevelopment.com</p>

    </div> <!-- Footer end -->

    </body>

    </html> 
```

**我的关于选项卡的 HTML 代码：**

```
 <html>

        <head>

            <!-- Meta information -->
            <meta http-equiv="content-type" 
                content="text/html;charset=utf-8" />

            <!-- Favicon -->
            <LINK REL="SHORTCUT ICON" HREF="favicon.ico">

            <!-- Title -->
            <title> Jonas - Development page </title>

            <!-- Stylesheet -->
            <link rel="stylesheet" href="style.css" />

        </head>

    <body>

    <!-- Header of page -->
    <div class="headerdiv">
            <h1 class="header">Mohr Development</h1>
    </div>

                <!-- Navigation bar -->
                <ul class="navigation">
                    <li><a href="index.html"><em class="home"/><b>Home</b></a></li>
                    <li><a href="photos.html"><em class="photos"/><b>Photos</b></a></li>
                    <li><a href="projects.html"><em class="projects"/><b>Projects</b></a></li>
                    <li class="current"><a href="about.html"><em class="about"/><b>About</b></a></li>
                    <li><a href="contact.html"><em class="contact"/><b>Contact</b></a></li>
                </ul>

    <div class="wrap">

        <div class="content">

            <form action="" method="get">

                            <ul>
                                <li>
                                    <label for="name"><font color="white">Enter your name:</font></label>
                                    <input id="name" name="name"/>
                                </li>

                                <li>
                                    <label for="comments"><font color="white">Your comments</font></label>
                                    <textarea id="comments" name="comments"></textarea>
                                </li>

                                <li>
                                    <label for="css"><font color="white">Do you like CSS?</font></label>
                                    <input type="checkbox" name="css" id="css" />
                                </li>

                                <li>
                                    <label for=""><font color="white">Favorite Language?</font></label>
                                    <input type="radio" /> CSS
                                    <input type="radio" /> HTML
                                    <input type="radio" /> JavaScript
                                    <input type="radio" /> PHP
                                </li>

                                <li>
                                    <input type="submit" value="Go!"/>
                                </li>
                            </ul>
            </form>

    </div> <!-- Wrap end -->

            <!-- Sidebar -->
            <aside>

                <h2>Sidebar</h2>
                <ul class="sidebar">
                                <li class="sidebarli"><a href="#">Lol1</a></li>
                                <li class="sidebarli"><a href="#">Lol2</a></li>
                                <li class="sidebarli"><a href="#">Lol3</a></li>
                                <li class="sidebarli"><a href="#">Lol4</a></li>
                </ul>

            </aside>

        </div> <!-- Content end -->

    <div class="footer">

        <p>Copyright © Mohrdevelopment.com</p>

    </div> <!-- Footer end -->

    </body>

    </html> 
```

**我的 CSS 代码：**

```
body {
        font-family:sans-serif;
        background: url(images/background4.png);
        margin:0px;
    }

        /********************\
        ******* Header *******
        \********************/

    .header
     {
        background: url(images/Header.png);
        text-indent:-9999px;
        width:1092px;
        height:132px;
        margin:auto;
    }

    .headerdiv{
        width:100%;
        margin:0;
        background:gray;

    }

        /********************\
        *** Navigation Bar ***
        \********************/

    .navigation {
        background:black url(Navigation/Navigation/nav_background.png);
        height:40px;
        margin-bottom:0px;
        padding-left:10%;
        font-size: 0; /*remove whitespace*/
        display:block;
        width:100%;
    }

    .navigation li{
        display:inline-block;
        line-height: 40px;
        font-size:16px;
            }

    .navigation li a{
        display:block;
        color:#FFFFFF;
        padding: 2px 10px;
    }

    .navigation li a em{
        height:32px;
        display:inline-block;
        padding: 0 5px 6px 60px;
        font-weight:bold;
        vertical-align: middle;
        background-position: 0 50%;
        font-size:16px;
    }

    .navigation li a:hover{
        color:#00CCFF;
        background: url(Navigation/Navigation/nav_hover.png) no-repeat;
        text-decoration:none;
        padding: 2px 10px;
    }

    .navigation .current a {
        color:#FFFFFF;
        background:url(Navigation/Navigation/nav_hover.png) no-repeat;
        padding: 2px 10px;
    }

    /*Navigation bar icons*/
    .navigation li a em.home, em.photos, em.projects, em.about, em.contact{
        background-repeat: no-repeat;
        margin-bottom:5px;
    }

    .navigation li a em.home {
        background-image: url(Navigation/Icon_images/home.png);

    }

    .navigation li a em.photos{
        background-image: url(Navigation/Icon_images/Photo.png);
    }

    .navigation li a em.projects{
        background-image: url(Navigation/Icon_images/projects.png);
    }

    .navigation li a em.about{
        background-image: url(Navigation/Icon_images/about.png);
    }

    .navigation li a em.contact{
        background-image: url(Navigation/Icon_images/Contact.png);
    }
    /*Navigation bar icons STOP*/

    /* Main Wrapper */
    .wrap {
          margin:auto;
          width:80%;
          background:yellow;
        }

        /********************\
        ******* Content ******
        \********************/

    .content
     {
        background:url(images/outlets.png);
        float:left;
        width:80%;
        height:auto;
        min-width:500px;
        min-height:900px;
        display:inline;
        color:white;
        border-bottom-left-radius: 50px 50px;

    }

    .content h1, p, form, label{
        color:white;
    }

        /********************\
        ******* Sidebar ******
        \********************/

    aside{
        background: url(images/egg_shell2.png);
        float:left;
        width:20%;
        height:inherit;
        min-height:900px;
        min-width:125px;
        display:inline;
        border-bottom-right-radius: 50px 50px;
    }

    aside ul {
        padding-left:1px;
        list-style:none;
    }

        /********************\
        ****** General *******
        \********************/

    ul a {
        text-decoration:none;
        color: #666;
    }

    ul a:hover {
        text-decoration:underline;
        color:black;
    }

    li {
        list-style:none;
        margin-bottom:20px;
    }

    label {
        display: block;
        cursor: pointer;
        color: #292929;
        font-family:sans-serif;
        padding-bottom:8px;
    }

    form ul {
        padding-left:0px;
    }

    textarea {
        width:400px;
        height:220px;

    }

    #contact {
        padding-left:5px;
        font-weight:bolder;
    }

    #Andapp{
    margin-top:50px;
    }

        /********************\
        ******* Footer *******
        \********************/

    .footer{
        float:left;
        height:150px;
        width:100%;
        background-color:gray;
        margin-top:100px;
        text-align:center;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:58:46.130

```
<ul class="navigation">
            <li class="current"><a href="index.html"><em class="home"/>Home</a></li> <!-- Current selection -->
            <li><a href="photos.html"><em class="photos"/>Photos</a></li>
            <li><a href="projects.html"><em class="projects"/>Projects</a></li>
            <li><a href="about.html"><em class="about"/>About</a></li>
            <li><a href="contact.html"><em class="contact"/>Contact</a></li>
        </ul> 
```

`<em>`标签没有关闭。最好将样式抽象到您的 CSS 文件中并专注于 HTML 中的内容。

[您可以通过W3C Validator 工具](http://validator.w3.org/)运行您的 HTML来帮助您解决这些类型的错误。

# ruby-on-rails - 计算月统计

> ID：11675788
> 
> 赞同：3
> 
> 时间：2012-07-26T18:33:13.613
> 
> 标签：ruby-on-rails, postgresql, activerecord, group-by

我有一个捐赠表，我正在尝试计算每个月的总金额。几个月没有任何捐款，我希望结果返回 0。

这是我当前的查询：

```
Donation.calculate(:sum, :amount, :conditions => { 
  :created_at => (Time.now.prev_year.all_year) }, 
  :order => "EXTRACT(month FROM created_at)", 
  :group => ["EXTRACT(month FROM created_at)"]) 
```

返回：

```
{7=>220392, 8=>334210, 9=>475188, 10=>323661, 11=>307689, 12=>439889} 
```

任何想法如何抓住空的月份？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:57:23.333

通常你会离开加入日历表（或[`generate_series`](http://www.postgresql.org/docs/current/static/functions-srf.html#FUNCTIONS-SRF-SERIES)在 PostgreSQL 中）来获取缺失的月份，但使用 Rails 最简单的事情是将你的结果合并到一个零散列中；像这样的东西：

```
class Donation
  def self.by_month
    h = Donation.calculate(:sum, :amount, :conditions => { 
      :created_at => (Time.now.prev_year.all_year) }, 
      :order => "EXTRACT(month FROM created_at)", 
      :group => ["EXTRACT(month FROM created_at)"])
    Hash[(1..12).map { |month| [ month, 0 ] }].merge(h)
  end
end 
```

然后只需调用类方法 ,`h = Donation.by_month`即可获得结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T00:48:58.537

除了*mu 太短的*答案，在 Rails 3.2.12 对我不起作用，ActiveRecord 将键作为字符串返回：

```
h = Donation.calculate(:sum, :amount, :conditions => { 
    :created_at => (Time.now.prev_year.all_year) }, 
    :order => "EXTRACT(month FROM created_at)", 
    :group => ["EXTRACT(month FROM created_at)"]) 
```

返回：

```
{"7"=>220392, "8"=>334210, "9"=>475188, "10"=>323661, "11"=>307689, "12"=>439889} 
```

因此，当我将哈希与零合并时：

```
{1=>0, 2=>0, 3=>0, 4=>0, 5=>0, 6=>0, 7=>0, 8=>0, 9=>0, 10=>0, 11=>0, 12=>0, "7"=>220392, "8"=>334210, "9"=>475188, "10"=>323661, "11"=>307689, "12"=>439889} 
```

小修复（to_s）：

```
Hash[(1..12).map { |month| [ month.to_s, 0 ] }].merge(h) 
```

# c# - 无效的列名 - 但它不是

> ID：11675801
> 
> 赞同：0
> 
> 时间：2012-07-26T18:33:59.610
> 
> 标签：c#, .net, database, entity-framework, razor

当我尝试查看在 WebGrid 中显示产品数据的网页时，我收到“无效列”错误。

我目前正在运行完全相同的代码的实时版本，它可以工作。但是，此本地版本不适用于此 1 个特定页面。

![在此处输入图像描述](../Images/b9033c92084216997b19af2b36022cee.png)

如您所见，下图中引用的代码与错误消息下方描述的列名称*完全匹配。*

我完全被难住了。我不知道现在该做什么。它告诉我“无效列”，但事实并非如此。它就在那里，我三重检查了我的代码中的任何拼写错误（如下所示），一切都很好！

是什么赋予了？

```
<div id="grid">
  @grid.GetHtml(
    headerStyle : "HeaderStyle",
    columns: grid.Columns(
      grid.Column(
        columnName : "PartNumber",
        header : "Part Number",
        style : "PartNumberStyle"
      ),
      grid.Column(
        columnName : "Product",
        header : "Description"
      ),
      grid.Column(
        columnName : "Quantity",
        header : "Quantity"
      ),
      grid.Column(
        columnName : "ZincPlatedCL2UnitPrice",
        header : "Zinc Plated CL2 Unit Price",
        format: @<a href="?Action=Add&PartNumber=@item["PartNumber"]&Product=@item["Product"]&Type=Zinc Plated CL2 Unit Price&Units=1&UnitPrice=@item["ZincPlatedCL2UnitPrice"]&IsBoxed=0">@item["ZincPlatedCL2UnitPrice"]</a>
      ),
      grid.Column(
        columnName : "ZincPlatedCL2BoxPrice",
        header : "Zinc Plated CL2 Box Price",
        format: @<a href="?Action=Add&PartNumber=@item["PartNumber"]&Product=@item["Product"]&Type=Zinc Plated CL2 Box Price&Units=1&BoxPrice=@item["ZincPlatedCL2BoxPrice"]&IsBoxed=1">@item["ZincPlatedCL2BoxPrice"]</a>
      )
    )
  )
</div> 
```

堆栈跟踪

> [InvalidOperationException: 无效的列名“ZincPlatedCL2UnitPrice”。]
> WebMatrix.Data.DynamicRecord.VerifyColumn(String name) +17193
> WebMatrix.Data.DynamicRecord.get_Item(String name) +17
> WebMatrix.Data.DynamicRecord.TryGetMember(GetMemberBinder binder, Object& result ) +7 CallSite.Target(Closure, CallSite, Object) +140 System.Dynamic.UpdateDelegates.UpdateAndExecute1(CallSite site, T0 arg0) +432
> Microsoft.Internal.Web.Utils.DynamicHelper.GetMemberValue(Object obj, String memberName) + 26
> Microsoft.Internal.Web.Utils.DynamicHelper.TryGetMemberValue(Object obj, String memberName, Object& result) +24
> System.Web.Helpers.WebGridRow.TryGetMember(String memberName, Object& result) +57 System.Web.Helpers.WebGridRow.get_Item(String name) +58 CallSite.Target(Closure, CallSite, Object, String) +100
> System.Dynamic .UpdateDelegates.UpdateAndExecute2(CallSite site, T0 arg0, T1 arg1)
> +685 ASP.<>c__DisplayClass1f.b__1c(TextWriter __razor_template_writer) 在 c:\Users\Jase\Documents\Visual Studio 2012\WebSites\One Stop Fasteners\Shared\Products \TekScrews\SelfDrillingMetalUseCL2.cshtml:98 System.Web.WebPages.HelperResult.WriteTo(TextWriter writer) +10
> System.Web.Helpers.<>c__DisplayClass10.b__f(TextWriter tw) +42 System.Web.WebPages.HelperResult.ToString( ) +82
> System.Web.Helpers.<>c__DisplayClass4.b__3(TextWriter __razor_helper_writer) +1444 System.Web.WebPages.HelperResult.ToString() +82
> System.Web.WebPages.HelperResult.ToHtmlString() +9
> System.Web.HttpUtility.HtmlEncode （对象值）+38
> System.Web.WebPages.WebPageBase.Write（对象值）+68
> ASP._Page_Shared_Products_TekScrews_SelfDrillingMetalUseCL2_cshtml.Execute() 在 c:\Users\Jase\Documents\Visual Studio 2012\WebSites\One Stop Fasteners\Shared\ Products\TekScrews\SelfDrillingMetalUseCL2.cshtml:82 System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
> System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors) +69 System.Web.WebPages.WebPage.ExecutePageHierarchy() +151 System.Web.WebPages.StartPage.RunPage() +17 System.Web.WebPages.StartPage .ExecutePageHierarchy() +62
> System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76
> System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContextBase httpContext) +114
> 
> -------------------------------------------------- ------------------ 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17626 堆栈跟踪：
> 
> [InvalidOperationException: 无效的列名“ZincPlatedCL2UnitPrice”。]
> WebMatrix.Data.DynamicRecord.VerifyColumn(String name) +17193
> WebMatrix.Data.DynamicRecord.get_Item(String name) +17
> WebMatrix.Data.DynamicRecord.TryGetMember(GetMemberBinder binder, Object& result ) +7 CallSite.Target(Closure, CallSite, Object) +140 System.Dynamic.UpdateDelegates.UpdateAndExecute1(CallSite site, T0 arg0) +432
> Microsoft.Internal.Web.Utils.DynamicHelper.GetMemberValue(Object obj, String memberName) + 26
> Microsoft.Internal.Web.Utils.DynamicHelper.TryGetMemberValue(Object obj, String memberName, Object& result) +24
> System.Web.Helpers.WebGridRow.TryGetMember(String memberName, Object& result) +57 System.Web.Helpers.WebGridRow.get_Item(String name) +58 CallSite.Target(Closure, CallSite, Object, String) +100
> System.Dynamic .UpdateDelegates.UpdateAndExecute2(CallSite 站点，T0 arg0，T1 arg1)
> +685 ASP.<>c__DisplayClass1f.b__1c(TextWriter __razor_template_writer) 在 c:\Users\Jase\Documents\Visual Studio 2012\WebSites\NameRemoved\Shared\Products\TekScrews \SelfDrillingMetalUseCL2.cshtml:98 System.Web.WebPages.HelperResult.WriteTo(TextWriter writer) +10
> System.Web.Helpers.<>c__DisplayClass10.b__f(TextWriter tw) +42 System.Web.WebPages.HelperResult.ToString() + 82
> System.Web.Helpers.<>c__DisplayClass4.b__3(TextWriter __razor_helper_writer) +1444 System.Web.WebPages.HelperResult.ToString() +82
> System.Web.WebPages.HelperResult.ToHtmlString() +9
> System.Web.HttpUtility.HtmlEncode （对象值）+38
> System.Web.WebPages.WebPageBase.Write（对象值）+68
> ASP._Page_Shared_Products_TekScrews_SelfDrillingMetalUseCL2_cshtml.Execute() 在 c:\Users\Jase\Documents\Visual Studio 2012\WebSites\NameRemoved\Shared\Products\ TekScrews\SelfDrillingMetalUseCL2.cshtml:82 System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
> System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors) +69 System.Web.WebPages.WebPage.ExecutePageHierarchy() +151 System.Web.WebPages.StartPage.RunPage() +17 System.Web.WebPages.StartPage .ExecutePageHierarchy() +62
> System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76
> System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContextBase httpContext) +114
> 
> -------------------------------------------------- ------------------ 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17626

# 更新日期：27/07/2012

* * *

调试时，异常指向这行代码：

```
format: @<a href="?Action=Add&PartNumber=@item["PartNumber"]&Product=@item["Product"]&Type=Zinc Plated CL2 Unit Price&Units=1&UnitPrice=@item["ZincPlatedCL2UnitPrice"]&IsBoxed=0">@item["ZincPlatedCL2UnitPrice"]</a> 
```

![在此处输入图像描述](../Images/010b9e205d4b21efdab0d3e8c8219e1c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:36:26.123

您是否确实检查了本地数据库以确保该列在架构中？与您的实体框架架构相比，您的本地数据库可能是“旧的”。

# django - mark_safe 不工作/仍在 simple_tag 中转义

> ID：11675804
> 
> 赞同：8
> 
> 时间：2012-07-26T18:34:03.883
> 
> 标签：django, django-templates

我正在使用 Django 1.3，我有一个 simple_tag，我需要返回一些未转义的 HTML，无论我做什么，它仍然会将我的 & 转义为 & 和我的| %7C。

```
from django import template
from django.template import loader, Context
from django.utils.safestring import mark_safe

register = template.Library()

@register.simple_tag()
def show_stuff(arg1=None, arg2=None, arg3='someconstant'):

    # Do some stuff

    if someconstant == 'somevalue':
        template_name = 'template1.html'
    else:
        template_name = 'template2.html'

    template = loader.get_template(template_name)
    html = template.render(Context( {'myvar': myvar,} ))
    html = mark_safe(html)
    print type(html)
    return html 
```

打印声明显示

```
<class 'django.utils.safestring.SafeUnicode'> 
```

据我了解，这不应该被逃脱。我在我的模板中调用标签，如下所示：

```
{% show_stuff 'arg1' 'arg2' 'arg3' %} 
```

帮助将不胜感激。

更新：从下面的评论中尝试了以下内容。没有返回错误，但仍然转义 HTML：

```
 ...
    template = loader.get_template(template_name)
    html = template.render(Context( {'myvar': myvar,} ))
    html = mark_safe(html)
    print type(html)
    return html
show_stuff().is_safe=True 
```

还尝试将 template1.html 和 template2.html 的内容包装在

```
{% autoescape off %}
template html contents with & and |
{% endautoescape %} 
```

并用自动转义标签包装模板标签调用本身。没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-01-08T02:15:50.157

旧线程，但我最近遇到了同样的问题。我让它工作python 3.6。将简单标签的值分配给变量 txt 并使用模板标签“{{”输出 txt 并将安全过滤器添加到 txt。

```
{% get_contentvalue user "htmlabout" as txt %}
{{txt|safe}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T20:26:11.407

在与问题作者的讨论中，我们发现这些字符实际上并没有被转义。Scoopseven（作者）使用 Firefox 上下文菜单的“显示选择源”选项查看了源 html。在这种情况下，会显示转义字符。

# haskell - 可以复制 thunk 以提高内存性能吗？

> ID：11675807
> 
> 赞同：26
> 
> 时间：2012-07-26T18:34:12.347
> 
> 标签：haskell, lazy-evaluation

我在 Haskell 中与惰性求值的斗争之一是难以推理内存使用情况。我认为复制 thunk 的能力会让我更容易做到这一点。这是一个例子。

让我们创建一个非常大的列表：

```
let xs = [1..10000000] 
```

现在，让我们创建一个坏函数：

```
bad = do
    print $ foldl1' (+) xs
    print $ length xs 
```

如果没有优化，这会占用几十 MB 的内存。垃圾收集器无法在折叠期间释放 xs，因为稍后计算长度时需要它。

是否可以像这样重新实现此功能：

```
good = do
    (xs1,xs2) <- copyThunk xs
    print $ foldl1' (+) xs1
    print $ length xs2 
```

现在，xs1 和 xs2 将表示相同的值，但在内存中也相互独立，因此垃圾收集器可以在折叠期间释放内存，从而防止内存浪费。（我认为这会稍微增加计算成本？）

显然在这个简单的例子中，重构代码可以很容易地解决这个问题，但是如何重构似乎并不总是很明显。或者有时重构会大大降低代码的清晰度。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-26T20:05:08.353

前段时间我想知道同样的事情，并创建了这样一个 thunk-duplication 函数的原型实现。[你可以在我的预印本“<a href="http://arxiv.org/abs/1207.2017" rel="noreferrer">](http://darcs.nomeata.de/ghc-dup) dup – Explicit un-sharing in haskell”中了解结果，并在 http://arxiv.org/abs/ [/darcs.nomeata.de/ghc-dup](http://darcs.nomeata.de/ghc-dup)。不幸的是，这篇论文在今年的 Haskell Symposium 和 Haskell 实施者研讨会上都没有被接受。

据我所知，这个问题没有现成的解决方案。仅作为单元参数技巧的脆弱变通方法可能由于一种或其他编译器优化而中断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T19:25:37.623

有趣的问题。我不知道如何实现`copyThunk`。但是您还可以做其他事情（抱歉，如果您已经知道这一点）：

```
xsFunction :: () -> [Int]
xsFunction = const [1..10000000]

better = do
  print $ foldl1' (+) $ xsFunction ()
  print $ length $ xsFunction () 
```

在这里它绝对不会把表达式`xsFunction ()`放在一个 thunk 中，它会被计算两次，因此不会造成任何内存膨胀。

* * *

一个有趣的后续行动是：

*   可以实现`copyThunk`吗？
*   Haskell 程序员是否应该在这种相对较低级别的优化中搞乱？我们不能假设 ghc 在这方面比我们聪明吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T19:25:34.977

变成`xs`一个函数。这可能很难看，但很有效，因为它阻止了共享：

```
let xs () = [1..1000000]

good = do
    print $ foldl1' (+) (xs ())
    print $ length (xs ()) 
```

# javascript - 在 jquery 中更新视图模型

> ID：11675817
> 
> 赞同：0
> 
> 时间：2012-07-26T18:34:29.187
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在尝试根据用户操作（在下拉列表框中选择一个值）更新绑定到我的视图的模型。我可以使用它来获取模型`var viewModel = @Html.Raw(Json.Encode(Model));`，我可以访问视图模型并更新属性，但是当我提交表单时，我的模型绑定没有我的更改。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T06:44:25.450

一种可能性是使用 AJAX 将更新的对象发送到服务器：

```
<script type="text/javascript">
    // we serialize the model as a javascript object
    var viewModel = @Html.Raw(Json.Encode(Model));

    // we do some updates
    viewModel.Foo = 'bar';

    // and we post the model back to the server:
    $.ajax({
        url: '@Url.Action("SomeAction", "SomeController")',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(viewModel),
        success: function(result) {
            // do some processing based on the result
            // returned by the controller action
        }
    });
</script> 
```

# avr - ATMega2560 上的 vsnprintf

> ID：11675826
> 
> 赞同：0
> 
> 时间：2012-07-26T18:35:08.273
> 
> 标签：avr, avr-gcc, atmega, printf

我正在使用一个工具包在 ATMega2560 上做一些椭圆曲线密码学。尝试使用工具包中的打印功能时，我得到一个空字符串。我知道打印功能可以正常工作，因为 x86 版本可以毫无问题地打印变量。我对 ATMega 没有经验，并且希望在这件事上提供任何帮助。打印代码包含在下面。

打印大数字的代码（它本身称为 util_print）

```
void bn_print(bn_t a) {
int i;

if (a->sign == BN_NEG) {
    util_print("-");
}
if (a->used == 0) {
    util_print("0\n");
} else {
#if WORD == 64
    util_print("%lX", (unsigned long int)a->dp[a->used - 1]);
    for (i = a->used - 2; i >= 0; i--) {
        util_print("%.*lX", (int)(2 * (BN_DIGIT / 8)),
                (unsigned long int)a->dp[i]);
    }
#else
    util_print("%llX", (unsigned long long int)a->dp[a->used - 1]);
    for (i = a->used - 2; i >= 0; i--) {
        util_print("%.*llX", (int)(2 * (BN_DIGIT / 8)),
                (unsigned long long int)a->dp[i]);
    }
#endif
    util_print("\n");
}
} 
```

实际打印大数字变量的代码：

```
static char buffer[64 + 1];
void util_printf(char *format, ...) {
#ifndef QUIET
#if ARCH == AVR
char *pointer = &buffer[1];
va_list list;
va_start(list, format);
vsnprintf(pointer, 128, format, list);
buffer[0] = (unsigned char)2;
va_end(list);
#elif ARCH == MSP
va_list list;
va_start(list, format);
vprintf(format, list);
va_end(list);
#else
va_list list;
va_start(list, format);
vprintf(format, list);
fflush(stdout);
va_end(list);
#endif
#endif
} 
```

编辑：我确实初始化了 UART，并且可以将 printf 语句输出到控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:16:45.173

我是 RELIC 工具包的作者之一。当前的 util_printf() 函数用于在 Avrora 模拟器中打印，以进行调试。我很高兴您可以根据您的目的调整代码。附带说明一下，缓冲区大小问题已在工具包的最新版本中得到修复。

让我知道您对图书馆还有其他问题。您可以亲自与我联系，也可以直接写信给讨论组。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:06:50.323

vsnprintf 将它的输出存储在给定的缓冲区（在这种情况下是指针变量的地址点），为了让它在控制台上显示（通过 UART），您必须使用 printf 发送缓冲区（尝试添加 printf("% s"，指针) 在 vsnprintf) 之后，如果您使用 avr-libc，请不要忘记在调用 printf 函数之前先初始化 std 流

哦，顺便说一句，您的代码容易受到缓冲区溢出攻击，buffer[64 + 1] 意味着您的缓冲区大小只有 65 个字节，vsnprintf(pointer, 128, format, list); 表示您的应用程序定义的最大缓冲区为 128 字节，请尝试将其更改为低于 65 字节以避免溢出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:03:44.217

好吧，所以我找到了一种解决方法，可以将 bn 数字打印到 ATMega2560 上的标准输出。该工具包附带一个将变量写入字符串 (bn_write_str) 的函数。所以我实现了自己的打印功能：

```
void print_bn(bn_t a)
{
    char print[BN_SIZE]; // max precision of a bn number
    int bi = bn_bits(a); // get the number of bits of the number
    bn_write_str(print, bi, a, 16) // 16 indicates the radix (hexadecimal)
    printf("%s\n"), print);
} 
```

此函数将以十六进制格式打印一个 bn 数字。希望这可以帮助任何使用带有 AVR 的 RELIC 工具包的人。

这会跳过 util_print 调用。

# ios - 具有动态高度的 UITableViewCell 未正确显示

> ID：11675827
> 
> 赞同：1
> 
> 时间：2012-07-26T18:35:09.873
> 
> 标签：ios, uitableview

我有一个未按预期呈现的分组 UITableView。我正在以编程方式将 2 到 5 个 UILabel 添加到每个 UITableViewCell 使用`[cell.contentView addSubview:...]`，并且正在使用`tableView:heightForRowAtIndexPath`基于我添加的标签数量来指定行高。我已经阅读了有关 stackoverflow 的大量相关帖子，并阅读[了 A Closer Look at Table-View Cells](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)，但解决方案对我来说并不适用。在这一点上，我唯一的想法是为每个单元格变化创建一个笔尖（第 1 行有 3 行，第 1 行有 4 行，第 1 行有 5 行）等等......但这似乎有点激烈。

问题截图：

![问题](../Images/95bff25d24b6a84cfb4c75af35d13eb4.png)

我用一个扩展 UITableViewController 的表视图控制器创建了一个测试项目。IBOutlet 已设置。以下是.m的内容：

```
- (id)initWithStyle:(UITableViewStyle)style
{
    return [super initWithStyle:UITableViewStyleGrouped];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1; // Hardcoding for example
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 4; // Hardcoding for example
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Detail Cell";
    // Table view will have between 1 and 4 rows and all cells are different... don't think dequeue is needed in this scenario
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

    NSArray *labels = [self makeLabelsForRows];
    // Add labels for this row
    for (UILabel *label in [labels objectAtIndex:indexPath.row]) {
        [cell.contentView addSubview:label];
    }

    // changing the cell.frame here doesn't seem to help.
    // Removed per Ricard Pérez del Campo's comment
    // CGFloat theHeight = [self tableView:self.tableView heightForRowAtIndexPath:indexPath];
    // cell.frame = CGRectMake(0, 0, 320, theHeight);
    NSLog(@"Cell = %@", cell);
    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Normally these are calculated based on cell content. Hardcoding for example
    if (indexPath.row == 0) return 123.0;
    else if (indexPath.row == 1) return 73.0;
    else if (indexPath.row == 2) return 62.0;
    else if (indexPath.row == 3) return 62.0;
    return 44.0;
}

- (NSArray *)makeLabelsForRows
{
    // Array of arrays containing UILables
    NSArray *retVal = [NSArray array];
    // Stores the height of the row
    double y = 0.0f;

    // Showing all rows and labels for example

    // ROW #1
    NSArray *row1 = [NSArray array];
        UILabel *eventTitleLabel, *calendarTitleLabel, *locationLabel, *dateLabel, *timeLabel;

    eventTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    eventTitleLabel.tag = 2;
    eventTitleLabel.font = [UIFont boldSystemFontOfSize:17.0];
    eventTitleLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    eventTitleLabel.text = @"Event Title";
    eventTitleLabel.backgroundColor = [UIColor clearColor];
    row1 = [row1 arrayByAddingObject:eventTitleLabel];
    y += 21.0f;

    locationLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    locationLabel.tag = 3;
    locationLabel.font = [UIFont systemFontOfSize:15.0];
    locationLabel.textColor = [UIColor darkGrayColor];
    locationLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    locationLabel.backgroundColor = [UIColor clearColor];
    locationLabel.text = @"Event Location";
    row1 = [row1 arrayByAddingObject:locationLabel];
    y += 19.0f;

    calendarTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    calendarTitleLabel.tag = 4;
    calendarTitleLabel.font = [UIFont systemFontOfSize:15.0];
    calendarTitleLabel.textColor = [UIColor redColor];
    calendarTitleLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    calendarTitleLabel.backgroundColor = [UIColor clearColor];
    calendarTitleLabel.text = @"Calendar Title";
    row1 = [row1 arrayByAddingObject:calendarTitleLabel];
    y += 19.0f;

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterFullStyle];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];

    dateLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    dateLabel.tag = 5;
    dateLabel.font = [UIFont boldSystemFontOfSize:12.0];
    dateLabel.textColor = [UIColor blueColor];
    dateLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    dateLabel.backgroundColor = [UIColor clearColor];
    dateLabel.text = [dateFormatter stringFromDate:[NSDate date]];
    row1 = [row1 arrayByAddingObject:dateLabel];
    y += 16.0f;

    [dateFormatter setDateStyle:NSDateFormatterNoStyle];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];

    timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    timeLabel.tag = 6;
    timeLabel.font = [UIFont boldSystemFontOfSize:12.0];
    timeLabel.textColor = [UIColor blueColor];
    timeLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    timeLabel.backgroundColor = [UIColor clearColor];
    timeLabel.text = [dateFormatter stringFromDate:[NSDate date]];
    row1 = [row1 arrayByAddingObject:timeLabel];
    y += 16.0f;

    retVal = [retVal arrayByAddingObject:row1];

    // ROW #2
    y = 0.0f;

    NSArray *row2 = [NSArray array];
    UILabel *rowTitleLabel, *alert1Label, *alert2Label;

    rowTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    rowTitleLabel.tag = 2;
    rowTitleLabel.font = [UIFont boldSystemFontOfSize:15.0];
    rowTitleLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    rowTitleLabel.text = @"Alert";
    rowTitleLabel.backgroundColor = [UIColor clearColor];
    row2 = [row2 arrayByAddingObject:rowTitleLabel];
    y += 21.0f;

    alert1Label = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    alert1Label.tag = 6;
    alert1Label.font = [UIFont boldSystemFontOfSize:12.0];
    alert1Label.textColor = [UIColor blueColor];
    alert1Label.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    alert1Label.backgroundColor = [UIColor clearColor];
    alert1Label.text = @"Alert #1 5 min";
    row2 = [row2 arrayByAddingObject:alert1Label];
    y += 16.0f;

    alert2Label = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    alert2Label.tag = 6;
    alert2Label.font = [UIFont boldSystemFontOfSize:12.0];
    alert2Label.textColor = [UIColor blueColor];
    alert2Label.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    alert2Label.backgroundColor = [UIColor clearColor];
    alert2Label.text = @"Alert #2 15 min";
    row2 = [row2 arrayByAddingObject:alert2Label];
    y += 16.0f;

    retVal = [retVal arrayByAddingObject:row2];

    // ROW #3
    y = 0.0f;

    NSArray *row3 = [NSArray array];
    UILabel *rowTitleLabel2, *urlLabel;

    rowTitleLabel2 = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    rowTitleLabel2.tag = 2;
    rowTitleLabel2.font = [UIFont boldSystemFontOfSize:15.0];
    rowTitleLabel2.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    rowTitleLabel2.text = @"URL";
    rowTitleLabel2.backgroundColor = [UIColor clearColor];
    row3 = [row3 arrayByAddingObject:rowTitleLabel2];
    y += 21.0f;

    urlLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    urlLabel.tag = 6;
    urlLabel.font = [UIFont boldSystemFontOfSize:12.0];
    urlLabel.textColor = [UIColor blueColor];
    urlLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    urlLabel.backgroundColor = [UIColor clearColor];
    urlLabel.text = @"www.here.com";
    row3 = [row3 arrayByAddingObject:urlLabel];
    y += 21.0f;

    retVal = [retVal arrayByAddingObject:row3];

    // ROW #4
    y = 0.0f;

    NSArray *row4 = [NSArray array];
    UILabel *rowTitleLabel3, *notesLabel;

    rowTitleLabel3 = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    rowTitleLabel3.tag = 2;
    rowTitleLabel3.font = [UIFont boldSystemFontOfSize:15.0];
    rowTitleLabel3.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    rowTitleLabel3.text = @"Notes";
    rowTitleLabel3.backgroundColor = [UIColor clearColor];
    row4 = [row4 arrayByAddingObject:rowTitleLabel3];
    y += 21.0f;

    notesLabel = [[UILabel alloc] initWithFrame:CGRectMake(30.0, y, 280.0, 21.0)];
    notesLabel.tag = 6;
    notesLabel.font = [UIFont boldSystemFontOfSize:12.0];
    notesLabel.textColor = [UIColor blueColor];
    notesLabel.backgroundColor = [UIColor clearColor];
    notesLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleHeight;
    notesLabel.text = @"Boom, notes!";
    notesLabel.lineBreakMode = UILineBreakModeWordWrap;
    row4 = [row4 arrayByAddingObject:notesLabel];
    y += 21.0f;

    retVal = [retVal arrayByAddingObject:row4];

    return retVal;
} 
```

每个请求的所有子视图的转储：

```
2012-07-26 14:04:14.333 TestLabels[72259:f803] cell.contentView subviews for row #0 = (
"<UILabel: 0x6da3590; frame = (30 0; 280 21); text = 'Event Title'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 2; layer = <CALayer: 0x6da3630>>",
"<UILabel: 0x6da3c90; frame = (30 21; 280 21); text = 'Event Location'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 3; layer = <CALayer: 0x6da3d80>>",
"<UILabel: 0x6da3e00; frame = (30 40; 280 21); text = 'Calendar Title'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 4; layer = <CALayer: 0x6da3dd0>>",
"<UILabel: 0x6885b20; frame = (30 59; 280 21); text = 'Thursday, July 26, 2012'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 5; layer = <CALayer: 0x6883950>>",
"<UILabel: 0x6883a50; frame = (30 75; 280 21); text = '2:04 PM'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 6; layer = <CALayer: 0x6885790>>"
)

2012-07-26 14:04:14.337 TestLabels[72259:f803] cell.contentView subviews for row #1 = (
"<UILabel: 0x6da8730; frame = (30 0; 280 21); text = 'Alert'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 2; layer = <CALayer: 0x6da6ad0>>",
"<UILabel: 0x6da6c10; frame = (30 21; 280 21); text = 'Alert #1 5 min'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 6; layer = <CALayer: 0x6da70b0>>",
"<UILabel: 0x6da7220; frame = (30 37; 280 21); text = 'Alert #2 15 min'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 6; layer = <CALayer: 0x6da70e0>>"
)

2012-07-26 14:04:14.340 TestLabels[72259:f803] cell.contentView subviews for row #2 = (
"<UILabel: 0xbe71950; frame = (30 0; 280 21); text = 'URL'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 2; layer = <CALayer: 0xbe71a90>>",
"<UILabel: 0xbe719c0; frame = (30 21; 280 21); text = 'www.here.com'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 6; layer = <CALayer: 0xbe71d00>>"
)

2012-07-26 14:04:14.342 TestLabels[72259:f803] cell.contentView subviews for row #3 = (
"<UILabel: 0x6a71750; frame = (30 0; 280 21); text = 'Notes'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 2; layer = <CALayer: 0x6a718e0>>",
"<UILabel: 0x6a717c0; frame = (30 21; 280 21); text = 'Boom, notes!'; clipsToBounds = YES; autoresize = LM+H; userInteractionEnabled = NO; tag = 6; layer = <CALayer: 0x6a716e0>>"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:31:19.560

根据您发布的高度日志，我认为如果您降低第 1 行的高度（而不是 123.0，请尝试 96.0 或 100.0），并确保标签的自动调整大小掩码设置正确。

我认为你的标签有一个 autoresizingMask 和flexibletopMargin。这就是让你的标签贴在 cell.contentView 的底部。让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:42:08.153

使用表格视图，您不必手动管理单元格的框架。表视图委托负责设置其高度。所以在你的

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

你不应该设置单元格框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:54:20.530

UITableView 调用了一个方法（如果它在您的类中），您需要在其中指定每行的高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    CGFloat cellHeight = 44; // default height
    for (int i = 0; i < [labels count]; i++) {
        cellHeight += 44; // or whatever the size of each of the labels you need
    }
    return cellHeight;
} 
```

这只是一个基本循环，您可以在其中为每个标签的单元格高度添加 44 个像素。如果您进入更多自定义绘图等，您可能需要进行更多计算以找出需要绘制单元格的高度。

此外，这种方法有点贵。上面的代码确实很贵，但是如果您开始必须根据换行的文本、图形的布局等来计算高度，它确实会稍微损害旧设备上的滚动帧速率。

# sql - SQL Server 管理工作室作业列表下未列出 SQL Server 作业

> ID：11675829
> 
> 赞同：0
> 
> 时间：2012-07-26T18:35:12.290
> 
> 标签：sql, sql-server-2008, sql-server-2005, sql-agent-job

我为我创建的 SQL Server 代理作业生成了一个脚本。

但是，当我运行脚本时，即使作业已成功创建（能够通过 sysjobs_view 系统视图对其进行验证），但它并未列在 SQL Server 代理作业列表下。

有谁知道问题可能是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:34:24.223

如果 dbrosier 刷新列表的建议不起作用，我会检查您是否在工作列表中设置了过滤器。我还想知道这是否是权限问题，但在这种情况下，您应该看不到任何作业并且应该得到错误。

# javascript - 可点击的热图图表

> ID：11675833
> 
> 赞同：1
> 
> 时间：2012-07-26T18:35:24.007
> 
> 标签：javascript, jquery, html, css, heatmap

我正在尝试从一些静态数据创建热图。数据具有与数据点处的值对应的 x,y 坐标。该值与 URL 相关联，我想让它成为可点击事件，因此当单击热图点时，它将重定向到该 URL。数据就像，

```
data=
[{point:[0,0],value:1,url:'http://www.google.com'},
{point:[0,1],value:2,url:'http://www.yahoo.com'},
{point:[1,0],value:5,url:'http://www.apple.com'},
{point:[1,1],value:10,url:'http://www.netflix.com'}] 
```

我正在使用[heatmap.js](http://www.ajaxshake.com/plugin/EN/874/c25e9e16/html5-canvas-based-heatmaps-heatmap.html)来绘制热图。如果我能产生所需的答案，我可以使用任何其他热图库。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:49:40.660

在此处使用您的数据和热图库是一个快速示例。

[http://jsfiddle.net/mjaric/3ELmM/](http://jsfiddle.net/mjaric/3ELmM/)

它有一些缺点，比如内存使用量，并且取决于你在数据数组中有多少数据。但为了简单起见，我使用闭包将本地变量绑定到点击事件。然后编写内存更轻的解决方案要清楚得多。

# c++ - Exiv2 - 一些图像标签不写，但有些写

> ID：11675838
> 
> 赞同：1
> 
> 时间：2012-07-26T18:35:37.457
> 
> 标签：c++, jpeg, exif, exiv2

使用 Exiv2 库将一些 exif 标签写入我正在运行以下代码的图像，类似于[Exiv2 站点](http://www.exiv2.org/doc/addmoddel_8cpp-example.html)上提供的示例。

然而，有些抛出错误，有些根本不写但不抛出错误。我注意到带有 Exif.Image.* 的标签不起作用，有些带有 Exif.Photo.* 的标签起作用，有些则不起作用，但找不到模式。

我正在使用 JHEAD 检查写入文件的内容。

想知道过去是否有人遇到过这种行为或知道发生了什么？谢谢。

```
Exiv2::ExifData exifData;

try {

 // these work fine
 exifData["Exif.Photo.FNumber"] = Exiv2::Rational(7, 5); 
 exifData["Exif.Photo.ExposureTime"] = Exiv2::Rational(1, 1);
 exifData["Exif.Photo.WhiteBalance"] = uint16_t(1);
 exifData["Exif.Photo.ShutterSpeedValue"] = Exiv2::Rational(1, 1);
 exifData["Exif.Photo.DateTimeOriginal"] = "12:12:12";

 // throw errors
 exifData["Exif.Photo.ISOSpeed"] = int32_t(2); 

 // don't throw error, but don't write to jpg
 exifData["Exif.Photo.GainControl"] = uint16_t(0);
 exifData["Exif.Photo.Saturation"] = uint16_t(100);
 exifData["Exif.Photo.Sharpness"] = uint16_t(2);

Exiv2::Image::AutoPtr image = Exiv2::ImageFactory::open("filepath");
assert(image.get() != 0);

image->setExifData(exifData);
image->writeMetadata();

}
catch (Exiv2::AnyError& e) {
cout << "Caught Exiv2 exception '" << e << "'\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:40:28.697

使用 JPEG 和 TIFF 图像运行此代码，我无法重现所描述的问题；它不会抛出任何异常，并且所有标签都被写入图像。

然而，Exiv2 确实不会写入某些标签。如果目标图像是类似 TIFF 的图像，则会发生这种情况，而 JPEG 不会发生这种情况。被忽略的标签是 Exiv2 认为与图像本身的完整性相关的 TIFF“图像标签”，因为在类似 TIFF 的图像的结构中，图像标签和元数据共存。所有这些图像标签都来自“图像”组 (Exif.Image.*)，例如 Exif.Image.ImageWidth。

如果您可以提供触发所描述行为的复制器（或除上述代码之外的目标图像），请在 dev.exiv2.org 上的 Exiv2 bugtracker 中将其报告为问题。

安德烈亚斯

# python - python类属性

> ID：11675840
> 
> 赞同：10
> 
> 时间：2012-07-26T18:35:43.127
> 
> 标签：python, class, variables

我试图找到扩展类变量的最佳方法。希望到目前为止我提出的方法的一个例子可以说明这一点。

```
class A(object):
    foo = ['thing', 'another thing']

class B(A):
    foo = A.foo + ['stuff', 'more stuff'] 
```

所以我试图让子类继承并扩展父类的类变量。上面的方法有效，但似乎有点笨拙。我愿意接受任何建议，包括使用完全不同的方法完成类似的事情。

显然，如果需要，我可以继续使用这种方法，但如果有更好的方法，我想找到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T19:26:06.953

可以使用元类：

```
class AutoExtendingFoo(type):

    def __new__(cls, name, bases, attrs):
        foo = []
        for base in bases:
           try:
               foo.extend(getattr(base, 'foo'))
           except AttributeError:
               pass
        try:
            foo.extend(attrs.pop('foo_additions'))
        except KeyError:
            pass
        attrs['foo'] = foo
        return type.__new__(cls, name, bases, attrs)

class A(object):
    __metaclass__ = AutoExtendingFoo
    foo_additions = ['thing1', 'thing2']
    # will have A.foo = ['thing1', 'thing2']

class B(A):
    foo_additions = ['thing3', 'thing4']
    # will have B.foo = ['thing1', 'thing2', 'thing3', 'thing4']

class C(A):
    pass
    # will have C.foo = ['thing1', 'thing2']

class D(B):
    pass
    # will have D.foo = ['thing1', 'thing2', 'thing3', 'thing4'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:27:08.800

我肯定会选择实例属性。*（如果我做对了，对于您的情况，它们不一定是静态的？！）*

```
>>> class A:
...     @property
...     def foo(self):
...         return ['thin', 'another thing']
...
>>> class B(A):
...     @property
...     def foo(self):
...         return super().foo + ['stuff', 'thing 3']
...
>>> B().foo
['thin', 'another thing', 'stuff', 'thing 3'] 
```

# git - git stash -> 将隐藏的更改与当前更改合并

> ID：11675841
> 
> 赞同：219
> 
> 时间：2012-07-26T18:35:50.307
> 
> 标签：git, git-merge, git-stash

我对我的分支进行了一些更改，并意识到我忘记了我已经对所述分支进行了一些其他必要的更改。我想要的是一种将我隐藏的更改与当前更改合并的方法。

有没有办法做到这一点？

更多的是为了方便，我最终放弃并首先提交了我当前的更改，然后是我隐藏的更改，但我更愿意一举将它们纳入其中。

* * *

## 回答 #1

> 赞同：332
> 
> 时间：2013-05-17T16:25:02.120

### tl;博士

先跑`git add`。

* * *

我刚刚发现，如果将您未提交的更改添加到索引中（即“分阶段”，使用`git add ...`），那么`git stash apply`（并且可能是`git stash pop`）实际上会进行适当的合并。如果没有冲突，你就是黄金。如果没有，请照常使用`git mergetool`或使用编辑器手动解决它们。

需要明确的是，这是我正在谈论的过程：

```
mkdir test-repo && cd test-repo && git init
echo test > test.txt
git add test.txt && git commit -m "Initial version"

# here's the interesting part:

# make a local change and stash it:
echo test2 > test.txt
git stash

# make a different local change:
echo test3 > test.txt

# try to apply the previous changes:
git stash apply
# git complains "Cannot apply to a dirty working tree, please stage your changes"

# add "test3" changes to the index, then re-try the stash:
git add test.txt
git stash apply
# git says: "Auto-merging test.txt"
# git says: "CONFLICT (content): Merge conflict in test.txt" 
```

...这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-07-26T18:45:13.540

运行`git stash pop`or`git stash apply`本质上是一个合并。除非存储中更改的文件在工作副本中也发生更改，否则您不需要提交当前更改，在这种情况下，您会看到以下错误消息：

```
error: Your local changes to the following files would be overwritten by merge:
       file.txt
Please, commit your changes or stash them before you can merge.
Aborting 
```

在这种情况下，您无法一步将存储应用到当前更改。如果您真的不想要两次提交，您可以提交更改、应用存储、再次提交并压缩这两个`git rebase`提交，但这可能会带来更多麻烦。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-12-29T15:22:17.130

> 我想要的是一种将我隐藏的更改与当前更改合并的方法

这是另一种选择：

```
git stash show -p|git apply
git stash drop 
```

`git stash show -p`将显示最后保存的存储补丁。`git apply`将应用它。合并完成后，可以使用 删除合并的存储`git stash drop`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-14T08:56:44.807

我这样做的方法是先`git add`这样做`git stash apply <stash code>`。这是最简单的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-13T16:15:59.223

正如@Brandan 所建议的，这就是我需要做的事情

```
error: Your local changes to the following files would be overwritten by merge:
       file.txt
Please, commit your changes or stash them before you can merge.
Aborting 
```

遵循这个过程：

```
git status  # local changes to `file`
git stash list  # further changes to `file` we want to merge
git commit -m "WIP" file
git stash pop
git commit -m "WIP2" file
git rebase -i HEAD^^  # I always use interactive rebase -- I'm sure you could do this in a single command with the simplicity of this process -- basically squash HEAD into HEAD^
# mark the second commit to squash into the first using your EDITOR
git reset HEAD^ 
```

并且您将得到完全合并的*本地*更改`file`，准备进行进一步的工作/清理或进行一次良好的提交。或者，如果您知道 的合并内容`file`是正确的，您可以写一条合适的消息并跳过`git reset HEAD^`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-19T12:22:00.877

可能，合并（通过 difftool）从……是的……一个分支并不是最糟糕的主意！

```
> current_branch=$(git status | head -n1 | cut -d' ' -f3)
> stash_branch="$current_branch-stash-$(date +%yy%mm%dd-%Hh%M)"
> git stash branch $stash_branch
> git checkout $current_branch
> git difftool $stash_branch 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-14T10:04:39.673

你可以很容易

1.  提交您当前的更改
2.  解开你的藏匿处并解决冲突
3.  从 stash 提交更改
4.  软重置以提交您来自（最后一次正确的提交）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-05-13T20:52:23.040

另一种选择是对本地未提交的更改进行另一个“git stash”，然后合并两个 git stash。不幸的是，git 似乎没有办法轻松组合两个存储。因此，一种选择是创建两个 .diff 文件并同时应用它们——至少它不是额外的提交并且不涉及十步过程：|

如何：[https ://stackoverflow.com/a/9658688/32453](https://stackoverflow.com/a/9658688/32453)

# c - 称为 PRUNING 的图像处理技术

> ID：11675842
> 
> 赞同：1
> 
> 时间：2012-07-26T18:35:51.293
> 
> 标签：c, opencv

有谁知道如何实现一种称为 PRUNING 的图像处理技术？有什么想法、例子等吗？我正在使用 OpenCV 和 C#，如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:27:10.020

我假设您正在寻找从图像中*删除不需要的杂散和伪影。*您是否考虑过使用基于**形态学**的操作？您可以考虑细化、命中和未命中变换等。[这](http://homepages.inf.ed.ac.uk/rbf/HIPR2/morops.htm)和[这](http://opencv.itseez.com/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html)给出了关于形态学的非常基本的解释。大多数形态学操作都是在 OpenCV 中使用[MorphologyEx](http://opencv.itseez.com/modules/imgproc/doc/filtering.html?highlight=morphologyex#morphologyex)实现的。

# html - 策略性地向页面添加列表项

> ID：11675844
> 
> 赞同：0
> 
> 时间：2012-07-26T18:35:52.883
> 
> 标签：html, css

我有大约 2000 个项目要添加我的页面。它们现在在 word doc 中按字母顺序排列，我想以列表的方式添加它们。由于它们太多了，而且我现在基本上正在逐个添加它们，我需要知道是否有更快的方法我错过了？如果是这样，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:50:20.220

好的，我在这里有一些真正的技巧去[TinyMCE](http://www.tinymce.com/tryit/full.php)，复制粘贴单词列表，全选并使其成为列表，然后按**提交**现在复制粘贴**“来自帖子的源输出”中的所有项目**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:42:49.383

*   打开您的 Dreamweaver 和您正在处理的页面。

*   粘贴文本

*   全选

*   转到属性面板 找到列表按钮，然后单击它。它应该将所有文本转换为列表项 ![在此处输入图像描述](../Images/9d704ffbd60f9e3e338c6c2174db83bf.png)

# php - 在 Magento 安装期间，哪些文件被更改

> ID：11675845
> 
> 赞同：2
> 
> 时间：2012-07-26T18:35:54.397
> 
> 标签：php, database, magento, installation

在 Magento (CE) 安装期间，安装程序会更改哪些文件。

它只是local.xml吗？

基本上，我想知道，因为我想有一个新的代码库来与现有数据库一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:07:39.440

就在最近，我从 svn 将 magento 1.7 解压缩到本地机器，然后安装了 magento（在本地）。当我尝试提交时，似乎没有任何文件被更改，var 文件夹中只有几个文件添加，例如日志，缓存等..当然还有local.xml

# c# - 使用 C# 和实体框架处理重复的数据库条目

> ID：11675850
> 
> 赞同：0
> 
> 时间：2012-07-26T18:36:10.323
> 
> 标签：c#, database, entity-framework, duplicates, object-model

假设我有一个包含许多不同对象的对象模型，然后使用实体框架映射到数据库表。这一切都很好。问题是当我想将更多对象保存到数据库时会发生什么。模型中的对象是相互关联的，因此当我将对象保存到数据库时，它们可能会引用数据库中已经存在的对象。

例如，如果我有一个名为的对象`Person`，它有一个属性`Friends`这本身就是一个人的名单。这意味着数据库中有一个 Persons 表，每个人都有一个由他们的 ID 标识的朋友列表。假设如果两个人的 ID 相同，那么他们就是同一个人，那么我相信如果我再次尝试添加它们，Entity Framework 会抛出错误。所以问题是当我添加另一个已经有朋友列表的人对象时，我想添加不在数据库中的朋友，我不想添加已经在数据库中的朋友。此外，这些人中的每一个都可能有/不在数据库中的朋友，我也希望他们考虑。要考虑的另一件事是，即使该人已经在数据库中，我也想查看他们的朋友列表并添加任何新朋友。

我觉得在使用数据库时这应该是一个相当普遍的问题，但我可能使用了错误的词汇，因为在我的所有搜索中实际上都没有出现任何有用的内容。它主要涉及如何在事后或类似情况下扫描数据库中的重复项。我希望通过实体框架批准的场所在业务逻辑 C# 代码层中处理此问题。任何帮助表示赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:37:31.257

`Dictionary`您提出的问题是有效的，但它与将对象添加到 a或 a没有根本区别`HashSet`。您只需检查某个`Person`或相关`Friend`是否已包含在Databasetable 中，`Dictionary`或者您是否将要包含在 Databasetable 中。使用实体框架的美妙之处在于它使这些操作非常相似。

因此，您可以使用任何一种方法，例如`context.People.Contains(newPerson)`（您必须实现`IEquatable<Person> for that), or`context.People.Find(id)。

同样，您可以使用

```
 foreach(friend in newPerson.Friends)
   {
    if(!context.People.Contains(friend)
      context.People.Add(friend)
  } 
```

# c++ - Clang++ Xcode 4.4 非静态成员初始化和移动构造函数

> ID：11675851
> 
> 赞同：5
> 
> 时间：2012-07-26T18:36:10.043
> 
> 标签：c++, xcode, c++11, clang, member-initialization

我正在将 Xcode 4.4 与山狮一起使用。我似乎无法理解为什么模板中的非静态成员初始化会调用变量的移动构造函数。有没有办法克服这个错误？

示例代码：

```
#include <iostream>
#include <atomic>

//
// This class can compile
//
class Working
{
public:
    int GetValue() { return value_; }

private:
    std::atomic<int> value_{0};
};

//
// This class cannot compile
//
template <typename Ty1>
class NotWorking
{
public:
    int GetValue() { return value_; }

    private:
        std::atomic<int> value_{0}; // <---- error here
};

int main(int argc, const char * argv[])
{
    Working working;
    NotWorking<int> not_working;

    return 0;
} 
```

Xcode 4.4 和 Clang 在该行中抛出错误说：

```
"Copying member subobject of type 'std::atomic<int>' invokes deleted constructor" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:29:12.267

这看起来像是开源 svn trunk 存储库中的一个 clang 错误。您能否在此处提交针对 clang 的错误报告[：](http://llvm.org/bugs/) http : [//llvm.org/bugs/](http://llvm.org/bugs/)？

谢谢！

# python - 出现在目录中的文件比我处理它们的速度更快（pyinotify）

> ID：11675852
> 
> 赞同：4
> 
> 时间：2012-07-26T18:36:20.573
> 
> 标签：python, inotify

我正在使用 pyinotify（process_IN_MOVED 事件）来监视目录中出现的文件。当出现新文件时，会触发该事件，对文件进行某种处理。问题是有时文件出现在目录中的速度比我处理它们的速度要快，这意味着一堆文件不会得到处理。我可以只拥有一个睡眠十秒钟然后醒来寻找新文件或其他东西的功能，但如果可能的话，我真的想坚持基于事件的解决方案。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:47:09.427

一般来说，我会在这里实现一个线程池来处理处理，而事件观察者只会观察事件并将它们传递给池。粗略的例子：

```
(event happens) -> 
Watcher registers the event -> 
puts it into the thread pool queue -> 
thread pool processes the event 
```

这样，观察者将在等待部分之外花费最少的时间，从而大大减少错过更新的机会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:39:38.160

Twisted 有[inotify 支持](http://twistedmatrix.com/documents/current/api/twisted.internet.inotify.html)。你可以给它一个回调来做你的处理。你绝对不想被`sleep`ing。这取决于您要在进程内还是通过另一个进程进行的处理，但您不应该丢失事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T11:31:16.087

正如 Humungus 所说，线程池是一个不错的选择。

我刚刚发布了一些我为这个问题写的代码，在：

[https://github.com/timstaley/autocrunch](https://github.com/timstaley/autocrunch)

它与特定于应用程序的细节有点混乱，但您应该能够根据自己的需要放入替换功能。我可能会在某个时候写一篇带有精简版的博客文章，但现在没有时间。！

# php - CakePHP 2.0 - 基于关系表的顺序

> ID：11675868
> 
> 赞同：0
> 
> 时间：2012-07-26T18:37:24.220
> 
> 标签：php, mysql, cakephp

我正在用 CakePHP 建立一个站点。我有两个表，“类别”和“公司”，第三个将它们连接起来，称为“companies_categories”：

```
companies_categories
`id` int(10) NOT NULL AUTO_INCREMENT,
`company_id` int(10) NOT NULL,
`category_id` int(10) NOT NULL, 
```

我想根据类别中的公司数量列出前 10 个类别，但我不知道该怎么做。

这是我的模型：

```
class Company extends AppModel {
    public $name = 'Company';
     var $hasAndBelongsToMany = array(
        'Category' =>
            array(
                'className' => 'Category',
                'joinTable' => 'companies_categories',
                'foreignKey' => 'company_id',
                'associationForeignKey' => 'category_id',
                'unique' => true,
                )
        );
}

class Category extends AppModel {
    public $name = 'Category';
    public $useTable = 'categories';

    // Set up the relationships
    var $hasAndBelongsToMany = array(
        'Company' =>
            array(
                'className' => 'Company',
                'joinTable' => 'companies_categories',
                'foreignKey' => 'category_id',
                'associationForeignKey' => 'company_id',
                'unique' => true,
            )
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:42:42.810

您可以尝试以下方法：

```
$this->Category->find('list', array(
    'joins' => array(
        'table' => 'companies_categories',
        'alias' => 'CompaniesCategory',
        'type' => 'LEFT',
        'foreignKey' => false,
        'conditions' => 'Category.id = CompaniesCategory.category_id',
    ),
    'order' => 'COUNT(CompaniesCategory.id) DESC',
    'group' => 'Category.id',
    'limit' => 10,
)); 
```

您可能想查看 counterCache，然后它将`company_count`向您的表中添加一个字段，`categories`您可以这样做：

```
$this->Category->find('list', array('order' => 'company_count DESC', 'limit' => 10)); 
```

# php - 转义字符串上的 MySQL 查询语法错误

> ID：11675872
> 
> 赞同：0
> 
> 时间：2012-07-26T18:37:36.837
> 
> 标签：php, mysql

```
INSERT INTO `5` VALUES ('photo', 'headline', 'LA Lakers', 'http://facebook.com/NUMBER', 'Here\'s video from the An...', 'NUMBER', 'http://www.facebook.com/NUMBER/posts/NUMBER', 'NUMBER'), 'https://graph.facebook.com/NUMBER/picture?access_token=AAAGGhZBZB1ZCf4BAD1fNpORWVGtWhUI5u**********************&type=normal') 
```

尝试此查询时出现此错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL     server version for the right syntax to use near ''https://graph.facebook.com/NUMBER/picture?access_token=AAAGGhZBZB1ZC' at line 1 
```

在单个值（不是整个查询）被 php 函数 mysql_real_escape_string 转义之后。

我已将所有配置文件 ID 更改为字符串 NUMBER，并将星号添加到访问令牌以保护我的隐私。这些通常不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:41:39.513

试试这个; 最后一个参数在括号之外。

```
INSERT INTO `5` VALUES ('photo', 'headline', 'LA Lakers', 'http://facebook.com/NUMBER', 'Here\'s video from the An...', 'NUMBER', 'http://www.facebook.com/NUMBER/posts/NUMBER', 'NUMBER', 'https://graph.facebook.com/NUMBER/picture?access_token=AAAGGhZBZB1ZCf4BAD1fNpORWVGtWhUI5u**********************&type=normal') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:41:43.717

您忘记了插入查询的最后一个值中的圆括号......
此外，在表名中使用撇号......
像这样：

```
INSERT INTO '5' VALUES ('photo', 'headline', 'LA Lakers', 'http://facebook.com/NUMBER', 'Here\'s video from the An...', 'NUMBER', 'http://www.facebook.com/NUMBER/posts/NUMBER', 'NUMBER', 'https://graph.facebook.com/NUMBER/picture?access_token=AAAGGhZBZB1ZCf4BAD1fNpORWVGtWhUI5u**********************&type=normal') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:42:01.710

`INSERT INTO`5`VALUES (...), 'https://graph.facebook.com/NUMBER/picture?access_token=AAAGGhZBZB1ZCf4BAD1fNpORWVGtWhUI5u**********************&type=normal'`

看看你的括号，它们过早结束，这可能是错误。

# vim - 回到vim中的字符搜索？

> ID：11675875
> 
> 赞同：29
> 
> 时间：2012-07-26T18:37:53.780
> 
> 标签：vim

在 vim 中进行“首选字符”搜索时是否有返回的快捷方式？就像如果我按下`f , ; ;`找到第三个逗号，但不小心`;`又按下了一个必要的，有没有一种快速的方法可以不用做就返回一个逗号`F ,`？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-26T18:40:25.513

逗号实际上绑定到“在相反方向重复最新的 f、t、F 或 T”。

# backbone.js - 一个backbone.js 模型可以包含多个集合吗？

> ID：11675879
> 
> 赞同：4
> 
> 时间：2012-07-26T18:38:11.400
> 
> 标签：backbone.js, backbone-views, backbone.js-collections

我刚刚开始使用backbone.js，并试图围绕建模概念展开思考。我想使用主干 js 创建一个购物车应用程序，与第 3 方 REST api 接口（不是 rails，不能修改）。

这是 GET 购物车内容的 JSON 响应示例：

```
 {
          "_v" : "12.3",
          "currency" : "USD",
          "product_sub_total" : 96.00,
          "product_total" : 86.00,
          "shipping_total" : null,
          "tax_total" : null,
          "order_total" : null,
          "product_items" : 
          [
            {
              "product_id" : "123",
              "item_text" : "Product foo",
              "quantity" : 2.00,
              "product_name" : "foo",
              "base_price" : 30.00,
              "price" : 60.00
            },
            {
              "product_id" : "456",
              "item_text" : "Product foo",
              "quantity" : 1.00,
              "product_name" : "bar",
              "base_price" : 40.00,
              "price" : 40.00,
              "price_adjustments" : 
              [
                {
                  "promotion_id" : "10% off",
                  "promotion_link" : "http://example.com/dw/shop/v12_3/promotions/10_percent_off",
                  "item_text" : "10% off",
                  "price" : -4.00
                }
              ]
            }
          ],
          "order_price_adjustments" : 
          [
            {
              "promotion_id" : "10$ off",
              "promotion_link" : "http://example.com/dw/shop/v12_3/promotions/10_bugs_off",
              "item_text" : "10$ off",
              "price" : -10.00
            }
          ]
        } 
```

查看这个 JSON 数据，有诸如“product_total”和“shipping_total”之类的汇总数据，其中包含诸如“product_items”和“order_price_adjustments”之类的列表。甚至单个“product_items”也可以有“price_adjustments”的嵌套列表。

如何在backbone.js 中为这个购物车建模？我是否应该为我看到的每个散列（“product_item”、“price_adjustment”）创建一个模型，然后对这些模型的集合进行建模，然后制作一个包含这些集合以及聚合数据的篮子模型？我不知道如何处理这个......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:08:18.517

你真的可以随心所欲地做到这一点。如果您不需要对商品或价格调整数据进行任何操作，可以访问它，我会将其保留为 JavaScript 对象。如果您想定义函数来转换和处理该数据，我会定义`Item`和`PriceAdjustment`模型。

当然，您的`ShoppingCart`模型可以具有称为的属性`items`，并且`priceAdjustments`这些属性是包含这些模型的 Backbone 集合。如果您最终没有将它们定义为模型，请将它们保留为普通数组。

我倾向于在创建 Backbone 模型方面犯错，因为它是微不足道的，并且会为您省去进一步决定您应该首先将它们定义为 Backbone 模型的麻烦。

**简而言之**，我最终可能会得到一个`ShoppingCart`带有 Backbone`Items`和包含模型的`PriceAdjustments`集合的`Item`模型`PriceAdjustment`。即`shoppingCart.get('items')`会返回您的 s 集合`Item`。

# javascript - 是否有具有“单击以转到定义”功能的 OS X JavaScript 编辑器？

> ID：11675882
> 
> 赞同：0
> 
> 时间：2012-07-26T18:38:21.753
> 
> 标签：javascript, macos, editor

之前已经多次提出类似的问题，即[https://stackoverflow.com/questions/1724234/preferred-javascript-editor-for-mac](https://stackoverflow.com/questions/1724234/preferred-javascript-editor-for-mac)或[https://stackoverflow.com/questions/209126/good-javascript-ide-with -jquery 支持](https://stackoverflow.com/questions/209126/good-javascript-ide-with-jquery-support)

在工作中，我将 Visual Studio 与 JetBrains ReSharper 一起使用，单击函数名称以跳转到定义对我来说是一个杀手级功能。

在 Mac OS X 上寻找类似的东西。通常我正在尝试使用 Sublime Text 和 Coda - 也许您知道如何启用**“单击函数名称 = 跳转到定义”**？我只是发现自己单击了 CTRL + 函数名称，但没有任何反应。

感谢您提供任何有用的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:46:37.387

JetBrains WebStorm：

> 转到声明 — 导航到使用简单热键或 ⌘Click 声明相关函数、变量或标签的位置。

![](../Images/539bca9ef46d66c84b115b0484363b0b.png)

[http://www.jetbrains.com/webstorm/features/](http://www.jetbrains.com/webstorm/features/)

# c++ - 调整指针段错误向量的大小

> ID：11675883
> 
> 赞同：1
> 
> 时间：2012-07-26T18:38:35.983
> 
> 标签：c++, vector, resize, segmentation-fault

`std::vector`我一直在遇到这种我无法理解的奇怪行为。

大致上，代码看起来像

```
#include <iostream>
#include <vector>

class MyClass{
public:
  MyClass():
    v_(),
    w_(init_w())
  {};

  ~MyClass()
  {};

  std::vector<int*> init_w()
  {
    v_.resize(4096);
    return v_;
  };
private:
  std::vector<int*> w_;
  std::vector<int*> v_;
};

int main()
{
  MyClass a;
} 
```

运行这个给我一个糟糕的段错误`resize`。如果改为选择较低的值`resize`，则代码可能根本不会出现段错误。

**更新：** 问题在于，与初始化列表所指示的相反，`w_`在`v_`. 因此，在 中`init_w()`，`v_`状态是未定义的。恢复声明`v_`和`w_`声明中的顺序可以解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:46:05.360

> 问题是，与初始化列表所表明的相反， w_ 在 v_ 之前被初始化

你推断是这样，但实际上并非如此。列表的顺序不相关；类中的声明顺序是。因此，如果您想查看成员的*实际*初始化方式，您的初始化列表应该模仿声明顺序。

我的问题是；为什么要使用指针向量开始？您是否意识到`delete`在您的对象超出范围或遭受内存泄漏之前您需要列表中的每个元素？

# c++ - 搜索特定行 c++ tab delimited

> ID：11675884
> 
> 赞同：1
> 
> 时间：2012-07-26T18:38:44.397
> 
> 标签：c++, search, replace, csv

> 帐号类型 金额
> 
> 15 检查 52.42
> 
> 23 节省 51.51
> 
> 11 检查 12.21

是我的制表符分隔文件

我希望能够按帐号搜索行。说如果我输入 23，我想得到那个特定的行。我会怎么做？

更先进的是，如果我想更改特定值，例如帐户 23 中的金额 51.51。我如何获取该值并将其替换为新值？

到目前为止，我只是逐行阅读

> 字符串线；ifstream is("account.txt");

```
 if (is.is_open())
 {
while (std::getline(is, line))  // read one line at a time
{
    string value;
    string parseline;
    std::istringstream iss(line);

    getline(line, parseline);
    cout << parseline << endl;  // do something with the value
    while (iss >> value)    // read one value at at time from the line
    {
        //cout << line << "   ";    // do something with the value
    }
}
is.close();
 }
 else
     cout << "File cant be opened" << endl;

return 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:16:56.963

鉴于每一行都是可变长度的，如果不首先解析整个文件，就无法索引特定行。

但我怀疑你的程序会想要操纵随机的行和列。所以我首先解析整个文件。将每一行放入数组中自己的数据结构中，然后在数组中索引该行。

您可以使用“strtok”将输入拆分为行，然后再次使用 strtok 将每行拆分为字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:54:36.137

如果我要这样做，我会首先编写一些函数来解析整个文件并将数据存储在适当的数据结构中（例如数组或 std::map）。然后我会将数据结构用于所需的操作（例如搜索或编辑）。最后，如果有任何修改，我会将数据结构写回文件。

# asp.net - “/”应用程序中的服务器错误

> ID：11675885
> 
> 赞同：0
> 
> 时间：2012-07-26T18:38:44.163
> 
> 标签：asp.net, sql-server, vb.net, visual-studio-2010

我正在学习 ASP.Net 并尝试在 VS2010 中创建一个默认的 ASP.Net 项目，这是第一次使用 VB.Net 作为编程语言。

运行 ASP.Net 项目后，默认网页会显示在浏览器窗口中。我试图单击显示网页上的登录链接，并显示此错误：

```
The user instance login flag is not supported on this version of SQL Server 
```

我们使用的是 SQL Server 2012 Enterprise。我们还在 Window7 中安装了 IIS7。我们在同一台计算机上安装了 SQL Server、Visual Studio 2010 和 IIS7。

我假设需要创建一个新数据库，但我不知道这个数据库是什么样子的详细信息，或者是否有一个可以运行的脚本来创建它。

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:49:51.180

该应用程序的连接字符串可能已`User Instance=true`设置，仅对 SQL Server Express 有效。您应该从连接字符串中删除该部分。

SQL Server 2012 不再有用户实例，而是选择了 LocalDB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:19:22.803

了解如何做到这一点。

我将连接字符串更改为如下所示：

```
connectionString="data source=.\SQLSERVER; Initial Catalog=aspnetdb;Integrated Security=True;" 
```

问题是由以下原因引起的：

```
AttachDBFilename= 
```

它让我失望，因为我假设 VS2010 会创建正确的连接字符串。

# segmentation-fault - pthread_join() 上的分段错误

> ID：11675887
> 
> 赞同：1
> 
> 时间：2012-07-26T18:38:57.833
> 
> 标签：segmentation-fault

无法理解段错误的情况。

```
int main()
{
     int val;
     pthread_t thread;
 ...........................
     pthread_join(thread,(void **) &val);  
     printf("Val=%d",val);   
 //and here sometimes come segmentation 
 //fault and other times i get correct val value

 ...........................
}

void *Do(void *)
{
    int retval=4;
...............
    pthread_exit((void *) retval);
} 
```

如果我是正确的，pthread_exit() 将地址（值为 4）存储到由 (&val) 指针指向的变量中，这意味着在 pthread_join() 之后 val=4。但是，如果我多次启动程序，我会得到正确的 val 值（即 4）和不同启动时的分段错误。（顺便说一句，在 Do 函数中使用指针和动态分配以正确的方式执行相同的结果）。

请帮帮我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T22:31:28.200

我唯一能想到的是，您正在返回函数 *Do 的局部变量的地址。局部变量存储在为函数分配的堆栈帧中。您正在返回一个指向在线程终止后无效的位置的指针。

见： http:
[//man7.org/linux/man-pages/man3/pthread_exit.3.html](http://man7.org/linux/man-pages/man3/pthread_exit.3.html)

在哪里 说：

> retval 指向的值不应位于调用线程的堆栈中，因为该堆栈的内容在线程终止后未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T19:46:07.717

```
pthread_exit((void *) retval); 
```

这需要一个整数（具有未确定的大小）并将其转换为具有可能不同大小的指针。我会说大多数时候这很好，因为 sizeof(void *) >= sizeof(int)。

```
pthread_join(thread,(void **) &val); 
```

此调用仅在 sizeof(int) == sizeof(void *) 时才有效。如果您在 64 位系统上，则 &val 指向 4 个字节的空间，但您告诉编译器它指向 8。如果此地址位于正确的位置（在分配的虚拟地址空间的末尾），那么它将出现段错误在 pthread_join 中试图写入 void 指针。

你应该做的是：

```
void *retval;
pthread_join(thread, (void **), &retval);
val = (int)retval; 
```

从指针到 int 的强制转换将截断任何更重要的位。此外，如果它是 64 位大端系统，您将永远无法获得正确的 val，因为实际存储数据的 4 个字节是第二个 4 个字节。

与另一个答案相反，通过强制转换为 void * 然后返回所需的整数类型，将整数返回值传回是完全可以的。您只是不想将实际指针传递给您打算取消引用的堆栈上的数据，因为您将调用未定义的行为。归根结底，指针只不过是一个无符号整数，其值通常指向内存中的某个位置。

# php - 根据 geoip 数据生成国家地图

> ID：11675888
> 
> 赞同：1
> 
> 时间：2012-07-26T18:39:11.417
> 
> 标签：php, jquery, map, statistics, geoip

我在这个主题上搜索了很多，但没有找到答案。

我有自己的统计数据包，我在其中保存用户的 geoip 数据（以及一堆其他数据）。我正在使用 maxmind geoip 库来获取此信息。

因此，在我的后端，我将这些数据可视化为基本上有两列的文本，一列是国家名称，另一列是来自该国的访问次数。

我想用这些数据生成一张地图。类似于世界地图，其中突出显示了我访问过的国家/地区。热图会很好，但不是必需的。

我真的不在乎它是用 php（GD 图像库）还是 jquery 生成的，因为我已经将这两种技术用于统计后端。但我真的很想在没有谷歌分析或他们的图形 API 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:01:03.613

我会试着假设。我会尝试这样做的方式......

1.  获取 FullHD（或高分辨率世界地图）
2.  我会在 WGS84 标准中保留的坐标（浮点值，否则很容易转换）
3.  我会尝试将真实坐标接近图像比例，但在此之前......

这项工作的主要部分是数学。我实际上不是数学家，但我知道应该在这里应用它以及为什么。

这里的主要目标是在平面上投影坐标，bec。`WGS84`使用**扁球体**作为参考面（带`radius = 6378137 m`; `flattering = 1/298.257223563`），因此它不是理想的圆周，应该考虑在内。+ 图像应该以`GEO`某种方式绑定（您应该知道此图像的角角坐标@least。如果是这样，这是最简单的情况）。

这种情况的计算量不是很大，一切都导致了基本的平面几何。

这是可以帮助您处理地理空间数据的库[http://www.gdal.org/](http://www.gdal.org/)。

我对您的建议是，如果您对此一无所知，请咨询该领域的一些专家（*可能是某些大学/学院中的 SatCom 规范或 MobCom 规范*）（或者如果您对*and**足够熟悉，请尝试谷歌`math``GEO`*）并要求`GPS`坐标投影的数学模型，`flat surface`你一定会得到答案。

如果您不需要非常高的准确性，请自己尝试一下，也许您会很幸运。

如果您对数学有足够的了解，您可以在 MatLab（在这种情况下更适用）或 Mathcad 中尝试自己，并尝试自己在栅格上定位几个点。

*如果您能在不久的将来找到答案，我会很高兴您将其发布在这里或与我分享您针对特定案例的解决方案。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:33:37.360

*我最终*需要在这里回答我自己的问题。对于其他偶然发现此问题的人：

我一直在使用带有 topojson 扩展名的 d3js 库。 [https://github.com/mbostock/topojson](https://github.com/mbostock/topojson)

# c - 在 C 中打开 .tgz 文件

> ID：11675898
> 
> 赞同：1
> 
> 时间：2012-07-26T18:39:47.093
> 
> 标签：c, buffer, tar, filereader

我正在尝试将 .tgz 文件复制到内存中并将其发送到其他地方。

使用 fopen 我得到一个 NULL 指针，它告诉我 .tgz 文件不是二进制文件，但我想知道是否甚至可以使用 C 标准库和库打开、缓冲和传递 .tgz 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:48:20.733

> 问：我想知道是否甚至可以使用 C 标准库和库打开、缓冲和传递 .tgz 文件？

问：您想按原样复制二进制 .tgz 文件吗？当然 - 小菜一碟:)

还是您想*解释*.tgz 文件，然后复制其*内容*？

如果是后者，我会看“zlib”：

*   [http://www.gzip.org/](http://www.gzip.org/)

> 问：使用 fopen 我得到一个 NULL 指针，它告诉我 .tgz 文件不是二进制文件

答：这告诉你没有这样的事情！您应该能够“fopen（）”*任何*文件......只要它存在，并且只要您拥有正确的权限。

使用“perror()”找出潜在的错误是什么。

# javascript - Jasmine 没有找到 Backbone.js 模型

> ID：11675902
> 
> 赞同：0
> 
> 时间：2012-07-26T18:40:03.227
> 
> 标签：javascript, backbone.js, jasmine

我刚刚开始在 Maven 中使用 Jasmine。我有 Jasmine 工作，但由于某种原因它找不到我的 Backbone 模型。我的 JavaScript src 目录指向包含我的 Backbone.js 模型的文件夹。在我的 JavaScript 测试目录中，我有一个简单的测试：

```
describe('ToDo Model',function()
{
    it('Test',function() {
        var todo = new ToDo();
    });
}); 
```

但我不断得到未定义的 ToDo。我是否必须在我的主干模型文件或任何东西中编写我的测试？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:43:06.730

ToDo 也必须在全局命名空间中。尝试在您的 Chrome/Firefox 控制台中输入以下内容：

窗口.ToDo

如果它返回未定义，那就是问题所在！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:49:33.657

为您的应用程序定义一个全局命名空间通常是一个好习惯，例如：

```
window.Application = {
  Models: {},
  Views: {},
  Collections: {}
}

// etc. 
```

然后，我喜欢这样定义模型：

```
(function (Models) {
  Models.ToDo = Backbone.Models.extend({
    // etc...
  });
})(Application.Models); 
```

这里的命名空间不是必需的，但`Models`我认为在文件顶部看到是一个很好的视觉提示。

# c# - 双向绑定不更新目标 - Metro App

> ID：11675907
> 
> 赞同：1
> 
> 时间：2012-07-26T18:40:18.077
> 
> 标签：c#, xaml, data-binding, windows-8, windows-runtime

我正在使用 VS 2012 和 Windows 8 SDK 构建 Metro 应用程序。在应用程序中，我有这个类（带有相应的结构）

```
// Parameter data structure for tools
public struct ToolParameter
{
    public string Title { get; set; }
    public Object Value { get; set; }
    public string Description { get; set; }
}
// Tool that will be used to execute something on phone
public class Tool
{
    public string Title{ get; set; }
    public ObservableCollection<ToolParameter> Parameters { get; set; }
    public string Description { get; set; }
} 
```

在应用程序的某个页面上，我将类的一个实例绑定到该页面的 dataContext

```
this.DataContext = currentTool; 
```

在页面上，我显示了有关应用程序的各种信息，包括我希望在页面上进行编辑的参数。因此，我使用 TextBox 来显示参数以便可以对其进行编辑，并将其绑定到 ToolParameter 结构的“Value”成员。

```
<TextBox x:Name="ParameterValue" FontSize="15" Text="{Binding Value, Mode=TwoWay}"     TextWrapping="Wrap"/> 
```

不幸的是，当 TextBox 绑定到一个值时，它不会更新，直到它不再具有焦点，所以我添加了一个用户可以单击的按钮，该按钮将更新参数（并从 TextBox 更改焦点）。不幸的是，单击按钮后，尽管焦点发生了变化，但 currentTool 变量中的参数值永远不会改变。我缺少关于数据绑定的东西吗？可能是名为 ParameterValue 的 TextBox 的父级（参数都是 ListView 的一部分）也必须是两种方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:22:09.083

从我所见，你的 TextBox 绑定到`Value`哪个是`ToolParameter`类的属性。页面的 DataContext 类型为`Tool`。Tool 包含`Parameters`的是 ToolParameter 对象的集合。因此，TextBox 需要位于 ItemsCollection 中，该 ItemsSource 设置为绑定到 Parameters 属性。

例子：

```
<StackPanel>
    <TextBlock Text="{Binding Title}"/>
    <TextBlock Text="{Binding Description}"/>

    <!-- showing a ListBox, but can be any ItemsControl -->
    <ListBox ItemsSource="{Binding Parameters}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBox Text="{Binding Value}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</StackPanel> 
```

还要确保您的类`Tool`和`ToolParameter`实现 INotifyPropertyChanged 并且您的属性的设置器触发 PropertyChanged 事件

**更新**：添加对于评论来说太大的信息

[这](http://msdn.microsoft.com/en-us/library/ms752347.aspx#direction_of_data_flow)应该有助于理解绑定中的源/目标。对于您的 TextBox，绑定的源是 Value 属性，而 Target 是 TextBox 的 TextProperty。当源更新时，文本将在 TextBox 内更新。如果您更改了 TextBox 的 TextProperty，那么它将更新您的对象的 Value 属性（前提是模式设置为 TwoWay）。但是，您的工具不会更新，Tool 类的 Parameters 属性也不会更新。如果您希望在 ToolParameter 的属性更新时更新工具对象，则需要订阅添加到 Parameters 集合中的每个 ToolParameter 对象的 PropertyChanged 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:50:33.073

欢迎来到 StackOverflow！

在绑定中，您可以将 UpdateSourceTrigger 指定为“PropertyChanged”：

```
<TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

您遇到的默认值是“LostFocus”。

# css - Bootstrap 导航栏媒体查询

> ID：11675909
> 
> 赞同：1
> 
> 时间：2012-07-26T18:40:27.550
> 
> 标签：css, twitter-bootstrap, media-queries

我通过媒体查询为较小的设备/屏幕尺寸设置了下拉菜单样式，当导航栏处于 uts 全屏模式时，我有下拉菜单和一些子下拉菜单。这在全屏模式下一切正常，但是当我在较小的设备/屏幕尺寸中导航导航栏时，子下拉菜单不会出现？有谁知道我缺少什么才能使这些出现。

引导覆盖和媒体查询

```
 /* Media Queries */

       @media (max-width: 1024px) {
       .nav li { width: 100%; }
       .nav .dropdown ul {display:none; }
       .nav .open ul { display: block; }

      .nav-collapse .nav > li > a, .nav-collapse .dropdown-menu a {
       text-align: center;
       background-color:#211256;
       }

     .nav-collapse .nav > li > a:hover,
     .nav-collapse .dropdown-menu a:hover {
     background-color: #211256;
      color:white;

       }

     .navbar .nav > li  a:hover{
      color:white;
    }

     .navbar .nav .active > a, .navbar .nav .active > a:hover {
     background: #211256;
      color: white;
     text-decoration: none;
    }

   .nav-collapse .nav > li > a, .nav-collapse .dropdown-menu a {
   border-radius: 3px 3px 3px 3px;
   color: white;
    font-weight: bold;
    padding: 6px 15px;
    margin-bottom:2px;

   }

 .navbar .nav li.dropdown .dropdown-toggle .caret, .navbar .nav li.dropdown.open .caret {
  border-bottom-color: white;
  border-top-color: white;
  }

  .navbar .nav li.dropdown.open > .dropdown-toggle, .navbar .nav li.dropdown.active  >  .dropdown-toggle, .navbar .nav li.dropdown.open.active > .dropdown-toggle {
  background-color: transparent;
  color: #211256;
   }
   } 
```

该网站位于

```
 www.newbridges.co.uk 
```

如果有人能对此有所了解，那就太好了

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:53:36.240

由于引导响应，您的导航栏隐藏在 960px 下。

您可以在媒体查询中覆盖此行为：

```
@media (max-width: 1024px) {
 .nav-collapse, .nav-collapse.collapse {
   overflow: visible !important;
   height: auto !important;
 }
 .navbar .btn-navbar {
   display:none;
 }

 .dropdown-menu li:hover .sub-menu {
   display: block !important;
   visibility: visible !important;
 }
} 
```

# ruby - 我可以设置$吗？在测试中？

> ID：11675910
> 
> 赞同：1
> 
> 时间：2012-07-26T18:40:41.023
> 
> 标签：ruby, unit-testing, ipc, ruby-1.9.2

我有一个 Ruby 程序。那个程序去

```
IO.popen('blah') { ... }
if $?.success?
   ... 
```

大多数时候`$?`是一个`Process::Status`对象。有时它是 nil。这会使程序崩溃。很容易修复，对吧？

但是我想写一个测试。

我有模拟 IO.popen 调用的技术，但我不能设置`$?`为零，因为它是只读的。我怎样才能设置`$?`为零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:44:40.910

据我所知，你不能设置这个。通过 C 代码，全局变量实际上可以扩展为函数调用，这就是这里发生的事情 ( `rb_last_status_get`)

最简单的方法是定义一个更容易存根的方法，例如

```
module Process
  def self.last_status
    $?
  end
end 
```

然后使用`Process.last_status`而不是 $?。您显然可以在规范中排除它，如果您对所有神奇的全局变量感到困惑，它会更具可读性。

# r - 将制表符分隔的数据读入 R

> ID：11675917
> 
> 赞同：17
> 
> 时间：2012-07-26T18:41:00.120
> 
> 标签：r, csv, import-from-csv

我正在尝试将一个大的制表符分隔文件读入 R。

首先我尝试了这个：

```
data <- read.table("data.csv", sep="\t") 
```

但它正在读取一些数值变量作为因素

所以我尝试根据我希望每个变量的类型来读取数据，如下所示：

```
data <- read.table("data.csv", sep="\t", colClasses=c("character","numeric","numeric","character","boolean","numeric")) 
```

但是当我尝试这个时，它给了我一个错误：

> 扫描错误（文件，什么，nmax，sep，dec，quote，skip，nlines，na.strings，：scan（）预期'a real'，得到'“4”'

我认为可能是原始原始文件中的某些数值周围有引号，但我不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T18:46:22.390

没有看到你的数据，你有几件事之一：你没有分隔数据的所有选项卡；在单个观察中有嵌入的选项卡；或其他人。

你可以解决这个问题的方法是设置`options(stringsAsFactors=FALSE)`然后使用你的第一行。

检查`str(data)`并尝试找出哪些行是罪魁祸首。一些数值被读取为因子的原因是因为该列中有一些东西被 R 解释为一个字符，因此它将整个列强制转换为字符。它通常需要一些挖掘，但问题几乎肯定出在您的输入文件上。

这是一个常见的数据修改问题，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:37:19.530

```
x <- paste("'",floor(runif(10,0,10)),"'",sep="")
x

 [1] "'7'" "'3'" "'0'" "'3'" "'9'" "'1'" "'4'" "'8'" "'5'" "'8'"

as.numeric(gsub("'", "",x))

 [1] 7 3 0 3 9 1 4 8 5 8 
```

# android - Android直方图均衡算法给了我非常明亮或红色的图像

> ID：11675922
> 
> 赞同：3
> 
> 时间：2012-07-26T18:41:17.407
> 
> 标签：android, image, algorithm

我正在对图像进行直方图均衡化。我首先获取 RGB 图像并将其转换为 YUV。我在 YUV 的 Y' 上运行直方图均衡算法，然后转换回 RGB。是我，还是图像看起来很奇怪？我这样做正确吗？这张图片很亮，其他图片有点红。

这是之前/之后的图像：

![前](../Images/d03873ab85d3acabf27015215f607f24.png) ![后](../Images/99ed58ca897c30827a4e6a924fb7027f.png)

算法（注释值是我之前用于转换的值。两者产生几乎相同的结果）：

```
 public static void createContrast(Bitmap src) {

    int width = src.getWidth();
    int height = src.getHeight();

    Bitmap processedImage = Bitmap.createBitmap(width, height, src.getConfig());

    int A = 0,R,G,B;
    int pixel;
    float[][] Y = new float[width][height];
    float[][] U = new float[width][height];
    float[][] V = new float [width][height];
    int [] histogram = new int[256];
    Arrays.fill(histogram, 0);

    int [] cdf = new int[256];
    Arrays.fill(cdf, 0);
    float min = 257;
    float max = 0;

    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            pixel = src.getPixel(x, y);
            //Log.i("TEST","("+x+","+y+")");
            A = Color.alpha(pixel);
            R = Color.red(pixel);
            G = Color.green(pixel);
            B = Color.blue(pixel);

            /*Log.i("TESTEST","R: "+R);
            Log.i("TESTEST","G: "+G);
            Log.i("TESTEST","B: "+B);*/

            // convert to YUV
            /*Y[x][y] = 0.299f * R + 0.587f * G + 0.114f * B;
            U[x][y] = 0.492f * (B-Y[x][y]);
            V[x][y] = 0.877f * (R-Y[x][y]);*/

            Y[x][y] = 0.299f * R + 0.587f * G + 0.114f * B;
            U[x][y] = 0.565f * (B-Y[x][y]);
            V[x][y] = 0.713f * (R-Y[x][y]);
            // create a histogram
            histogram[(int) Y[x][y]]+=1;
            // get min and max values
            if (Y[x][y] < min){
                min = Y[x][y];
            }
            if (Y[x][y] > max){
                max = Y[x][y];
            }
        }
    }

    cdf[0] = histogram[0];
    for (int i=1;i<=255;i++){
        cdf[i] = cdf[i-1] + histogram[i];
        //Log.i("TESTEST","cdf of: "+i+" = "+cdf[i]);
    }

    float minCDF = cdf[(int)min];
    float denominator = width*height - minCDF;
    //Log.i("TEST","Histeq Histeq Histeq Histeq Histeq Histeq");
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            //Log.i("TEST","("+x+","+y+")");
            pixel = src.getPixel(x, y);
            A = Color.alpha(pixel);
            Y[x][y] = ((cdf[ (int) Y[x][y]] - minCDF)/(denominator)) * 255;
            /*R = minMaxCalc(Y[x][y] + 1.140f * V[x][y]);
            G = minMaxCalc (Y[x][y] - 0.395f * U[x][y] - 0.581f * V[x][y]);
            B = minMaxCalc (Y[x][y] + 2.032f * U[x][y]);*/

            R = minMaxCalc(Y[x][y] + 1.140f * V[x][y]);
            G = minMaxCalc (Y[x][y] - 0.344f * U[x][y] - 0.714f * V[x][y]);
            B = minMaxCalc (Y[x][y] + 1.77f * U[x][y]);
            //Log.i("TESTEST","A: "+A);
            /*Log.i("TESTEST","R: "+R);
            Log.i("TESTEST","G: "+G);
            Log.i("TESTEST","B: "+B);*/
            processedImage.setPixel(x, y, Color.argb(A, R, G, B));
        }
    } 
```

}

我的下一步是绘制前后的直方图。我只是想在这里得到一个意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-21T05:25:00.307

这个问题有点老了，但让我回答一下。

原因是直方图均衡的工作方式。该算法尝试使用所有 0-255 范围而不是给定图像的范围。

因此，如果你给它一个暗图像，它会将相对较亮的像素变为白色。而相对较深的颜色为黑色。

如果你给它一个明亮的图像，出于同样的原因它会变暗。

# css - 悬停在嵌套项上会影响其父项吗？

> ID：11675923
> 
> 赞同：0
> 
> 时间：2012-07-26T18:41:19.310
> 
> 标签：css, drop-down-menu, css-selectors

我有一个使用纯 CSS 的菜单，悬停一个父`li`项显示嵌套列表。一个简化的例子：

```
 <ul id="menu-top" >
    <li class="menu-item">
      <a href="http://localhost/wp5/forums/">Forums</a>
      <ul class="sub-menu">
        <li><a href="http://localhost/wp5/register/">Register</a></li>
        <li><a href="http://localhost/wp5/activate/">Activate</a></li>
        <li><a href="http://localhost/wp5/members/">Members</a></li>
      </ul>
    </li>
  </ul> 
```

的CSS：

```
.navigation ul.menu li:hover { background: #ccc} //hover the parent item changes it bg color

.navigation ul.sub-menu li {
 display:none;
}

.navigation ul li:hover > ul.sub-menu li { display: block; } 
```

它工作正常，但我正在尝试添加“持久”效果，我想在悬停子项目时保持父样式设置。

我试过这个但无法工作：

```
.navigation ul.sub-menu li:hover > .navigation ul.menu li { background: #ccc} 
```

我不知道这是否可以在没有 javscript 的情况下实现，否则，也找不到任何关于在 CSS 中使用“>”的信息。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:58:24.473

`:hover`在被悬停的元素的所有祖先上触发，所以`.navigation ul.menu li:hover { background: #ccc; }`应该可以正常工作。

或者，有一天我们应该能够使用[`:has()`](http://dev.w3.org/csswg/selectors4/#relational).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:01:15.313

```
.menu-item:hover {
     background-color:#ccc;
}
.sub-menu li:hover {
     background-color:#666;
} 
```

# css - 流体宽度 div，右侧有图像

> ID：11675930
> 
> 赞同：0
> 
> 时间：2012-07-26T18:41:42.773
> 
> 标签：css, html

请看看我的小提琴：

[http://jsfiddle.net/gX5r9/](http://jsfiddle.net/gX5r9/)

如果调整浏览器的大小，我希望 div 的宽度为 100%，但是我希望图标图像位于它的右侧。

```
 <div class="theDiv">
     <input type="text" /><img src="http://images.ilias.ca/Firefox-32x32.png" />
 </div>

.theDiv input {
 width:100%;
 height 32px;
 border= 1 px solid;
 border-radius: 6px;    
 }

 .theDiv img{
  display: inline;    
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:47:22.093

```
.theDiv input {
   width:100%;
   height 80px;
   border= 1 px solid;
   border-radius: 6px; 
   padding-top:10px;
   padding-bottom:10px;   
   display:block;  
   background-image:url(http://images.ilias.ca/Firefox-32x32.png);  
   background-repeat:no-repeat;
   background-position:right center;

} 
```

关于检查窗口是否调整大小。看到这个资源[@media](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

**解决方案 2**

```
.theDiv {
  height:32px;
  position:relative;
}
.theDiv input {
   width:100%;
   height 32px;
   border= 1 px solid;
   border-radius: 6px;    
}

.theDiv img{
    position:absolute;
    z-index:666;
    right:10px;   
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:53:58.377

这是使用背景图像执行此操作的一种方法：**[jsFiddle example](http://jsfiddle.net/j08691/gX5r9/8/)**

**HTML**

```
<div class="theDiv">
    <input type="text" />
</div> 
```

​</p>

**CSS**

```
.theDiv input {
   height:32px;
   border: 1px solid  #999;
   border-radius: 6px;    
   width:100%;
   vertical-align:bottom;
}
.theDiv {
    background:url(http://images.ilias.ca/Firefox-32x32.png) 100% 0% no-repeat;
    padding-right:38px;
    height:40px;
} 
```

​</p>

# .htaccess - .htacces 根据子域重定向到不同的

> ID：11675932
> 
> 赞同：1
> 
> 时间：2012-07-26T18:41:51.223
> 
> 标签：.htaccess, wildcard, subdomain

我有个问题。

我正在尝试在具有 1 个域的主机上设置 TEST、CERT 和 PROD 网络空间。
问题是我已经在我的网页中使用子域，因此无法配置 DNS 通配符记录。

**网址在 PROD 上如下所示：** `company1.domain.com` *或* `company2.domain.com`

两者都指向主机上的同一目录。

**我要实现的是：** `company1.domain.com` ->指向目录
`company1.test.domain.com`1->指向目录
`company1.cert.domain.com`2->指向目录3

“company1”必须是通配符。此外，我不希望看到 URL 中显示的目录。

任何人都知道如何做到这一点？
我应该删除现有的 DNS 通配符记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:20:54.403

Ideally, you should be making each of these subdomains into a separate vhost and point each vhost to its own directory. Some hosting companies even allow you to assign subdomains to separate directories.

But if for some reason, they all need to point to the same document root, try adding these rules to the htaccess file in the document root:

```
RewriteEngine On

# for company1
RewriteCond %{HTTP_HOST} company1.domain.com [NC]
RewriteCond %{REQUEST_URI} !^/directory1
RewriteRule ^(.*)$ /directory1/$1 [L]

# for company1.test
RewriteCond %{HTTP_HOST} company1.test.domain.com [NC]
RewriteCond %{REQUEST_URI} !^/directory2
RewriteRule ^(.*)$ /directory2/$1 [L]

# for company1.cert
RewriteCond %{HTTP_HOST} company1.cert.domain.com [NC]
RewriteCond %{REQUEST_URI} !^/directory3
RewriteRule ^(.*)$ /directory3/$1 [L] 
```

# javascript - jQuery Autocomplete with custom select(): 自定义 HTML 中的超链接

> ID：11675935
> 
> 赞同：0
> 
> 时间：2012-07-26T18:42:06.417
> 
> 标签：javascript, jquery, jquery-autocomplete

我有一个 jQuery 自动完成设置，对此我有一些特殊要求。

*   这是“用户配置文件”的自动完成，其中*每个*自动完成条目由 _renderItem 呈现，如下所示：

* * *

用户名：_firstname_lastname_

* * *

电话号码：_clickable_phone_number_

* * *

这部分工作正常。

*   选择后，立即导航到不同的页面。我已经使用自定义选择实现了这一点，该选择使用 window.replace 转到不同的页面（该人的个人资料）

这也很好。

*   最后，“_clickable_phone_number_”链接应该调用另一个 javascript 片段。或者一个简单的超链接

最后一部分是我遇到问题的地方。由于我在选择后立即导航到不同的页面，因此我无法弄清楚如何“防止”此操作。

我可以将 .live 添加到 _clickable_phone_number_ 并运行一些 JS，但我无法停止导航到个人资料页面。

我希望我很清楚。如果没有，我可以进一步解释。

谁能帮助我实现这一目标？基本上，我如何从自定义呈现的 HTML 中进行超链接，尽管有一个导航到不同页面的自定义 select()。

编辑：由于代码片段可能会说清楚，这就是我的意思：

我的 jQuery 自动完成有一个选择，像这样：

```
$('#input').autocomplete({ source: users, minLength: 3,
 select: function(event, ui) 
{ window.location.replace("/profile.asp?id=" + ui.item.value); }

}).data("autocomplete")._renderItem = function (ul, item) { .. } 
```

每个自动完成渲染元素的 HTML：

```
<div class=".ui-menu">
<div class="name">FirstName LastName</div>
<div class="phone">12345</div>
</div> 
```

我有这样的现场活动设置：

`$('.phone').live("click", function() { callPhone($(this).html()); return false; }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:26:43.860

你试过使用[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

您必须稍微更改您的代码，在公开活动中连接您的电话链接，而不是使用实时。

```
$('#input').autocomplete({ 
     source: users, 
     minLength: 3,
     select: function(event, ui){ 
         window.location.replace("/profile.asp?id=" + ui.item.value); 
     },
     open: function(event, ui){
          $('.phone').click(function(e) { 
              e.stopPropagation();
              callPhone($(this).html()); 
              return false; 
           });
     }
 }).data("autocomplete")._renderItem = function (ul, item) { .. } 
```

您不能再使用 .live 的原因是因为 .live 事件直到它们一直冒泡到文档时才会触发，因此您无法停止任何事情。

我没有对此进行测试，但它应该可以工作。

# jquery - jQuery .each() 仅适用于最后一个元素

> ID：11675941
> 
> 赞同：1
> 
> 时间：2012-07-26T18:42:18.163
> 
> 标签：jquery, each

我已经看到了很多类似问题的答案，但对于我的具体情况似乎无法弄清楚。我的 jQuery 逻辑仅适用于我的`.each()`函数中的最后一个元素。谁能帮我理解为什么？最终，我试图将列表中的项目分成两列。

这是HTML：

```
<ul class="sub-menu">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
</ul>
<ul class="sub-menu">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
</ul>
<ul class="sub-menu">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
</ul> 
```

这是我的 jQuery

```
<script type="text/javascript">
jQuery(document).ready(function(){

        var col1 = jQuery('<li class="col1">col1</li>'); // object which I will append the list items into
        var col2 = jQuery('<li class="col2">col2</li>'); // object which I will append the list items into

        jQuery('.sub-menu').each(function() {
            var items = jQuery(this).html(); // get original items from list
            jQuery(this).empty(); // clear original items from list

            jQuery(this).append(col1).append(col2); // just appending new columns for now, will add the original items to either col1 or col2 once this is working.
        });

});
</script> 
```

我的代码正确地捕获了原始列表项并清除了当前`.sub-menu`列表，但随后将列添加到列表中仅发生在`.each()`循环中的最后一个元素中。换句话说，这两列仅添加到最后一列`.sub-menu`，而前两列最终没有列表项。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:51:46.740

您描述的问题是您将 col1 和 col2 附加到第一个列表，然后将**相同的元素**附加到第二个，最后附加到第三个。

您每次都需要创建新元素，或复制原始元素。

这是更新的代码（我`.clone()`在追加 col1 和 col2 的位置添加） var col1 = jQuery('col1'); // 我会将列表项附加到对象中 var col2 = jQuery('col2'); // 我将添加列表项的对象

```
jQuery('.sub-menu').each(function() {
    var items = jQuery(this).html(); // get original items from list
    jQuery(this).empty(); // clear original items from list

    jQuery(this).append(col1.clone()).append(col2.clone()); // just appending new columns for now, will add the original items to either col1 or col2 once this is working.
        });​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:48:38.247

您正在尝试查找：

`var col1 = jQuery('<li class="col1">col1</li>');`

您找不到尚不存在的对象。只需删除该`jQuery`功能，如下所示：

```
var col1 = '<li class="col1">col1</li>';
var col2 = '<li class="col2">col2</li>'; 
```

[http://jsfiddle.net/frnYY/](http://jsfiddle.net/frnYY/)

# json - 将 JSON 对象传递给 MVC 控制器

> ID：11675942
> 
> 赞同：0
> 
> 时间：2012-07-26T18:42:23.367
> 
> 标签：json

我可以成功地对我的 C# 控制器进行 jQuery Ajax 调用并接收回一个 XML 字符串，但我需要反过来收集一些投资组合日期并将它们打包成一个 JSON 对象，以便我可以将它们发送回另一个 C# 控制器。如果这是 C# 问题，那么如果我在错误的论坛中，我深表歉意......但是我想将我的 JSON 对象传递到服务器端控制器......

这是我正在尝试做的事情：

```
 var nodeDatesJson = {"nodedates":        // CREATE JSON OBJECT OF DATE STRINGS
                            { "date": 01/20/2012,
                              "date": "01/21/2012" } };
        getTradeContribs(thisPfId, nodeDatesJson.nodedates.date); 
```

现在调用下一个js函数：

```
 function getTradeContribs(pfid, nodedates) {
        //alert(nodedates);
        $.ajax({                                // GET TRADE CONTRIBS FROM SERVER !!
            url: "/Portfolios/getTradeContribs?portfolioId=" + pfid + "&nodedates=" + nodedates,
            type: "GET",    // or "PUT"
            dataType: "json",               
            async: true,
            success: parseTradeContribs,
            error: function (error) {
                alert("failed in opening Trade Contribs file !!!");
            }
        });
    }
    function parseTradeContribs(data) {
        alert("In parseTradeContribs..." );
        $(data).find("Trade").each(function(){
            $(".TradeContrib").append($(this).text());
        })
    } 
```

并且我的 C# 控制器正在尝试**读取“nodedates”JSON 对象**，但我该**如何**读取呢？

```
 public string getTradeContribs(string portfolioId, **string nodedates**)
        {

            // Build Portfolio Select request here !
            RequestBuilder rzrRequest = new RequestBuilder();

            // REQUEST FOR CONTRIBUTIONS !
            // ... more code here..
            xmlResponse.LoadXml(contribResponse);

            string jsonTest = @" {""nodedates"": ""date"":""01/01/2012""}";

            //return xmlResponse.OuterXml;  // WORKS FINE
            return "<Trade><TradeId>1234</TradeId></Trade>";    // RETURN TEST XML STR

        } 
```

提前谢谢你...鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:26:42.307

在 MVC 操作中接收日期列表的最佳方式是绑定到集合。这意味着您应该将日期和其他属性放在具有以下命名约定的表单中：

```
<input type="hidden" name="dates" value="2012-1-20" />  
<input type="hidden" name="dates" value="2012-1-21" /> 
```

然后你应该序列化这个表单（查看jquery的文档）并将它的数据发布到你的操作中，这将类似于：

```
public ActionResult getTradeContribs(string portfolioId, IList<DateTime> dates) {
  // Do your work here
} 
```

你真的应该看看 MVC 模型绑定和集合绑定：
[模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)
[模型绑定对象](http://www.asp.net/mvc/videos/mvc-2/how-do-i/how-do-i-work-with-model-binders-in-an-mvc-application)

* * *

另外，如果可以的话，您的 javascript 对象有两个同名的属性，这可能不是您的意思。如果你想在一个对象的某处存储多个日期，你应该使用一个数组：

```
 var nodeDatesJson = {"nodedates":  
                        [ "01/20/2012", "01/21/2012" ] }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:00:18.843

对不起，但我不太明白你的疑问......但它是这样的：

也许您应该将格式良好的 json 作为字符串传递并使用一些 C# 解析器。

这样，您可以在服务器端获取与 javascript 中的 Json 对象相同的对象。

=]

# java - Java 和 Web 浏览器显示颜色的差异

> ID：11675943
> 
> 赞同：0
> 
> 时间：2012-07-26T18:42:24.970
> 
> 标签：java, colors, web

所以我知道 Web 浏览器显示颜色的方式之间存在差异，但我只是想知道为什么 Java 显示颜色的方式与 Web 浏览器之间存在差异，以及是否有办法在 Java 程序中对此进行纠正。

我的具体实例：

从这个页面：http: [//xkcd.com/color/rgb/](http://xkcd.com/color/rgb/)

我正在使用颜色“长春花”。它是 RGB 值#8e82fe。

在构建 Java 应用程序时（高级描述，为实验显示彩色对象），颜色与 Web 上的颜色不同。

有没有办法在代码中纠正这个问题？

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:42:17.267

不要使用 XKCD 进行比较。阅读该页面背后的背景（请参阅[此处](http://blog.xkcd.com/2010/03/01/color-name-survey/)和[此处](http://blog.xkcd.com/2010/05/03/color-survey-results/)），该实验与实际颜色无关，而是人们认为颜色的名称是什么。

如果您的 RGB 颜色不匹配，那么您的代码（可能）有问题。尝试在前面添加一个 FF（将其切换为 ARGB），看看是否能解决问题。

此外，如果您使用 IE、Firefox 和 Chrome（我碰巧所有这些都在工作）并将相同的网页放入并比较它们，它们*应该*看起来相同（它们对我来说，无论如何......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:53:10.553

根据[XKCD 的调查](http://xkcd.com/color/rgb/)，大多数人认为长春花的平均值为 #8e82fe。

虽然色彩爱好者网站倾向于将长春花视为#8480d9。

根据[十进制颜色代码](http://www.december.com/html/spec/colordec.html)，长春花被定义为#aaaaff。

Periwinkle的[网页颜色版本](http://www.colorcombos.com/colors/CCCCFF)解析为#ccccff。

当然，这还不[包括长春花的各种色调](http://simple.wikipedia.org/wiki/Periwinkle_%28color%29)。

您可能不会一开始就比较相同的颜色。

# ios - Facebook iOS 移动 Web JS SDK 错误

> ID：11675944
> 
> 赞同：2
> 
> 时间：2012-07-26T18:42:24.690
> 
> 标签：ios, facebook-javascript-sdk

我们已经让 Facebook 在我们的主要桌面应用程序上正常工作。当我将相同的设置代码添加到我们的移动网站时，我收到了来自 JavaScript SDK 的错误：

`Received message of type object from https://s-static.ak.facebook.com, expected a string`

然后，我从这里将设置代码更改为完全相同的副本：[https](https://developers.facebook.com/docs/guides/mobile/web/) ://developers.facebook.com/docs/guides/mobile/web/并收到完全相同的消息。

此错误仅在 Chrome 开发人员工具或 iOS 模拟器中的用户代理为 iOS 或 Android 时显示。当它从桌面运行时，我们没有看到此错误。

知道这里发生了什么吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T17:38:43.823

恕我直言，我认为博科尼克的回答没有抓住重点。您收到消息的直接原因很可能是 javascript`postMessage`方法。它用于将您的网站与返回的对象`window.open`或`iframe`的嵌入式网站进行通信。

```
window.parent.postMessage(message, targetOrigin); 
```

你可能想看看[这篇文章](http://www.codeproject.com/Tips/585663/Communication-with-Cross-Domain-IFrame-A-Cross-Bro)，看看它是如何工作的。

根据[MDN 参考](https://developer.mozilla.org/en-US/docs/Web/API/window.postMessage)，该方法的第一个参数`postMessage`可以是任何类型。尽管如此，*在 Gecko 6.0（Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3）之前， message 参数**必须是 string**。*

我在 Chrome 28.0.1500.72（编写此答案时的最新版本）上测试了该方法，它在传递对象时工作正常，但仍将警告消息抛出到控制台。我相信 facebook 对将一些丰富的数据作为字符串传递感到不舒服，因此他们将其作为对象传递并且根本不关心警告。或者，由于有一种解决方法（例如`JSON.stringify`），他们有一个他们不知道的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T19:44:39.653

我有同样的错误。这不一定是你得到它的原因，但我最终查看了我的 iphone 模拟器接收到的数据包，这是来自 s-statick.ak 的错误：

```
[truncated] <span>Given URL is not allowed by the Application configuration.: One or more of the given URLs is not allowed by the App&#039;s settings.  It must match the Website URL or Canvas URL, or the domain must be a subdomain of one o 
```

对我来说，错误是在我的设备上，我通过 IP 地址（192.168.xx 等）访问该站点，而在本地开发中，我有主机将 localhost 路由到我的 facebook 应用程序配置中的 url。 ..所以没有为应用程序配置IP。

Facebook 不允许我使用 IP 地址，所以似乎唯一的选择是测试部署或 DNS 服务器。希望这可以帮助你。

# linux - 如何包含相关脚本源文件 bashrc

> ID：11675945
> 
> 赞同：2
> 
> 时间：2012-07-26T18:42:25.973
> 
> 标签：linux, bash

我有多个 bash 文件。我想编写一个主 bash 文件，其中将包含当前目录中所有必需的 bash 文件。我试过这样

```
#!/bin/bash
HELPER_DIR=`dirname $0`
.$HELPER_DIR/alias 
```

但是当我在我的 $HOME/.bashrc 中放入以下行时

```
if [ -f /home/vivek/Helpers/bash/main.bash ]; then
    . /home/vivek/Helpers/bash/main.bash
fi 
```

我收到错误没有这样的文件 ./alias。文件别名在那里。如何包含相对 bash 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:46:48.843

改为使用`$( dirname "${BASH_SOURCE[0]}" )`。

我添加了这两行两行`~/.bashrc`：

```
echo '$0=' $0
echo '$BASH_SOURCE[0]=' ${BASH_SOURCE[0]} 
```

并开始 bash：

```
$ bash
$0= bash
$BASH_SOURCE[0]= /home/igor/.bashrc 
```

`source`当您使用(or `.`) 或 in启动脚本时，$0 和 $BASH_SOURCE 之间存在差异`~/.bashrc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:48:39.447

您需要在“点”之后留一个空格

```
. $HELPER_DIR/alias 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-03T20:19:38.073

`$( dirname "${BASH_SOURCE[0]}" )`如果您从同一目录调用脚本，则返回`.`；如果您使用相对路径（例如`../myscript.sh`.

I use `script_dir=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )` to get the directory that the script is in.

Here's an example script to test this functionality:

```
#!/bin/bash
# This script is located at /home/lrobert/test.sh

# This just tests the current PWD
echo "PWD: $(pwd)"

# Using just bash source returns the relative path to the script
# If called from /home with the command 'lrobert/test.sh' this returns 'lrobert'
bash_source="$(dirname "${BASH_SOURCE[0]}")"
echo "bash_source: ${bash_source}"

# This returns the actual path to the script
# Returns /home/lrobert when called from any directory
script_dir=$( cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
echo "script_dir: ${script_dir}"

# This just tests to see if our PWD was modified
echo "PWD: $(pwd)" 
```

# python - 如何从命令行上传和提供静态文件到烧瓶应用程序

> ID：11675946
> 
> 赞同：1
> 
> 时间：2012-07-26T18:42:28.120
> 
> 标签：python, flask

我正在使用 Flask 制作我的个人博客。该博客将使用静态文件来发布博客文章，并且没有数据库。我希望能够通过命令行将博客文章上传到应用程序。

我应该如何实施呢？

我需要某种方式来进行身份验证，所以可能是存储在应用程序目录中某处的哈希值。需要 ssl 以确保密码未被窥探并提供新上传的文件 - 这将包括将其显示为最新的博客条目，并将其添加到档案中。

我将使用 Google AppEngine、Redhat openshift 或 App Fog（尚未决定）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:54:55.990

Curl 可能是基本帖子的最佳选择：

```
myuser@myhost $ curl --data @myblogpost.txt https://www.example.com/blog/fromcli/ 
```

`@`按原样发送文件很重要，请查看 curl 联机帮助页了解详细信息。

但是您可能会考虑编写一个用于命令行的小型 python 应用程序。您可以使用它来处理身份验证和 URL 内容，因此用户只需要输入用户名/密码和帖子本身。

# ruby-on-rails - kaminari 与 ror 分页

> ID：11675953
> 
> 赞同：0
> 
> 时间：2012-07-26T18:42:59.180
> 
> 标签：ruby-on-rails, kaminari

我第一次尝试使用 kaminari 进行分页，但出现错误：

```
views/store/index.html.erb where line #23 raised:

undefined method `current_page' for #<Array:0x3ebe0c0>

Extracted source (around line #23):

20:     </div>
21: </div>
22: <%end%>
23: <%= paginate @buildings %> 
```

控制器>建筑物_控制器

```
def index
    @buildings = Building.all.page(params[:page]).per(1)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @buildings }
    end
  end 
```

商店>索引

```
<%= paginate @buildings %> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:04:14.170

删除`all`在

```
@buildings = Building.all.page(params[:page]).per(1) 
```

像这样

```
@buildings = Building.page(params[:page]).per(1) 
```

你很高兴。
ActiveRecord`all`方法返回一个数组，我相信 Kaminari 不希望数组工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:49:21.367

我已经改变了 kaminari，我已经使用 will_paginate 并且疯狂地工作！

在宝石文件中

gem 'will_paginate', '>= 3.0.pre'

在破折号=>捆绑安装

在商店>索引

```
<%= will_paginate @buildings %> 
```

在控制器> store_controller

@buildings = Building.paginate :page=>params[:page], :order =>'created_at DESC', :per_page=>1

并做了！你很高兴与分页一起去

# php - 在特定行选择 Mysql 数据

> ID：11675954
> 
> 赞同：1
> 
> 时间：2012-07-26T18:43:00.123
> 
> 标签：php, mysql, select, where

我正在尝试建立一个客户电子商务后端。我以前做过很多次这样的事情，并不认为自己对 php 和 mysql 是“新手”，但我被卡住了，不知道出了什么问题。

我只想在特定位置显示 mysql 行的内容（使用“WHERE”命令）。

但是当我加载页面时，内容部分（在表格中）是空的。该位置的表格中肯定有内容，页面上的所有其他内容都显示，除了实际的 customerResults。

这是我的代码：

```
<head>
<title>Customer Summary</title>
<?php  
    session_start();
    require 'database_connect.php';
    $customerTable = "customer";

    if(isset($_GET['customer_click'])){
        $customerId = $_GET['customer_click']; 
    }
?>
</head>
<h3>Customer <?php echo"$customerId"?></h3>
<table align="center" width="600px">
    <tr>
        <td><a href="index.php">Summary</a></td>
        <td><a href="personal.php">Personal</a></td>
        <td><a href="billing.php">Billing</a></td>
        <td><a href="order_history.php">Order History</a></td>
    </tr>
</table>
<table align="center" width="400px">
    <tr>
        <?php 
            $customerSelect = "SELECT * FROM $customerTable WHERE id = '$customerId' ";
            $customerResult = mysql_query($customerSelect);
            if (!$customerResult){
                echo "No results, but why?!?!? </br/>";

            }
            if  (mysql_num_rows($customerResult)==0){
                echo "Results are empty...but why!?!?!";

            }

            while ($customerData = mysql_fetch_assoc($customerResult)){ 
                echo $customerData['id'];
                echo $customerData['email'];
            }

        ?>      
    </tr>
</table> 
```

我可能会忽略一些简单的东西，但我真的无法弄清楚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:48:44.730

让我们来看看：

*   第 27 行：未定义的变量`'customerSelct'`。
*   第 41 行：未定义的变量`'customerDdata'`。
*   第 43 行：未定义的变量`'result'`。

另外[**，请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

使用 PDO 的示例代码：

```
<?php
    try {
        session_start();
        if (!isset($_GET['customer_click'])) {
            throw new Exception('Customer ID not provided.');
        }
        //Assuming the ID must be a number.
        if (!is_numeric($_GET['customer_click'])) {
            throw new Exception('Customer ID must be numeric.');
        }
        $customerID = $_GET['customer_click'];
        $db         = new PDO("mysql:host=localhost;dbname=database_name_here", "user", "pass");
        //Have PDO to not emulate prepared statements by default.
        //Instead use MySQL's native prepare engine.
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        //PDO will throw PDOExceptions on every error.
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $query = "SELECT * FROM `customer` WHERE `id` = :id";
        $stmt  = $db->prepare($query);
        //Bind ID as a number and not as string.
        $stmt->bindValue(":id", $customerID, PDO::PARAM_INT);
        $stmt->execute();
        //Fetch all results into $result.
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }
    catch (PDOException $e) {
        //A database error has occurred!
        die("Database Error occurred! " . $e->getMessage());
    }

    catch (Exception $e) {
        //General error occurred!
        die("Error! " . $e->getMessage());
    }
?>
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

    <pre>
        <?php print_r($result); ?>
    </pre>

</body>
</html> 
```

# hadoop - 如何将 mac 连接到 hadoop/hdfs 集群

> ID：11675956
> 
> 赞同：1
> 
> 时间：2012-07-26T18:43:05.043
> 
> 标签：hadoop, hdfs, cloudera

我有在集群中运行的 CDH，并且我可以通过 ssh 访问机器。我需要将我的 Mac 连接到集群，所以如果我执行 hadoop fs -ls ，它应该会显示集群的内容。我已将 HADOOP_CONF 配置为指向集群的配置。我在集群中运行 CDH4。我在这里遗漏了什么，可以连接吗？

我需要做一些 ssh 密钥设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:10:30.477

您需要确保执行以下操作：

1.  您需要将`HADOOP_CONF_DIR`环境变量设置为指向包含指向集群的配置 XML 的目录。
2.  您的 Mac 应该能够直接访问构成集群的主机（所有主机）。这可以通过 VPN 来完成，例如 - 如果集群受到外部网络的保护。
3.  您的 Mac 应该带有与集群运行相同版本的 Hadoop。

# node.js - 表达强大的方法它们在哪里？

> ID：11675958
> 
> 赞同：0
> 
> 时间：2012-07-26T18:43:23.627
> 
> 标签：node.js, express, formidable

我对这段代码有一个重要的问题

```
form
    .on('error', function(err) {
        throw err;
    })

    .on('field', function(field, value) {
        //receive form fields here
    })

    /* this is where the renaming happens */
    .on ('fileBegin', function(name, file){
            //rename the incoming file to the file's name
            file.path = form.uploadDir + "/" + file.name;
    })

    .on('file', function(field, file) {
        //On file received
    })

    .on('progress', function(bytesReceived, bytesExpected) {
        //self.emit('progess', bytesReceived, bytesExpected)

        var percent = (bytesReceived / bytesExpected * 100) | 0;
        process.stdout.write('Uploading: %' + percent + '\r');
    }) 
```

这些是强大模块的方法......我发现 express.bodyParser 使用强大的模块......但我想调用方法。（'fileBegin'......用快递，我不能

方法在哪里...对象形式在哪里

如您所见，对象表单具有字段和文件

在 express.bodyParser 文件在 req.files 和字段在 req.body 但是当我尝试调用 req.on('fileBegin'... 给我一个错误

有人试试这个？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:47:31.350

该`defer`选项已添加到`multipart`：

```
app.use(connect.multipart({ defer: true })); 
```

后来……</p>

```
app.post('/foo', function (request, response, next) {
  // setting defer exposes multipart's internal IncomingForm object
  var form = request.form; 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:26:49.893

事实证明，该`formidable`对象只是其中的一个局部变量，`connect.multipart`并且永远不会附加到`req`. 看起来你必须推出自己的中间件，`connect.multipart`用作指南（它实际上非常简短和简单）。

# android - 在android中实现标签的最佳方法？

> ID：11675959
> 
> 赞同：2
> 
> 时间：2012-07-26T18:43:37.403
> 
> 标签：android, android-tabhost

我已经阅读了一些在应用程序页面底部实现选项卡的代码。并且代码中没有弃用的方法/类，对我来说，这是实现选项卡的一种非常简单和干净的方法。

但我听说实现选项卡的新方法是使用片段。

那么，哪一个更好呢？为什么？

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabHost
        android:id="@+id/edit_item_tab_host"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:paddingTop="65px" >

            <LinearLayout
                android:id="@+id/edit_item_date_tab"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:padding="5px" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="date"
                    android:textStyle="bold" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/edit_item_geocontext_tab"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:padding="5px" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="lieu"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/edit_item_text_tab"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:padding="5px" >
            </LinearLayout>
        </FrameLayout>
    </TabHost>

</LinearLayout> 
```

`MainActivity`班级：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tab_host = (TabHost) findViewById(R.id.edit_item_tab_host);
        // don't forget this setup before adding tabs from a tabhost using a xml view or you'll get an nullpointer exception
        tab_host.setup(); 

        TabSpec ts1 = tab_host.newTabSpec("TAB_DATE");
        ts1.setIndicator("tab1");
        ts1.setContent(R.id.edit_item_date_tab);
        tab_host.addTab(ts1);

        TabSpec ts2 = tab_host.newTabSpec("TAB_GEO");
        ts2.setIndicator("tab2");
        ts2.setContent(R.id.edit_item_geocontext_tab);
        tab_host.addTab(ts2);

        TabSpec ts3 = tab_host.newTabSpec("TAB_TEXT");
        ts3.setIndicator("tab3");
        ts3.setContent(R.id.edit_item_text_tab);
        tab_host.addTab(ts3);

        tab_host.setCurrentTab(0);

        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:04:20.557

A`TabHost`不能包含片段（嗯，它可以，但它真的很棘手）所以我不建议今天使用它。

片段是要走的路，如果你想实现新的 Tab 机制（集成到`ActionBar`Android 3.0 上可用的“新”机制）并且仍然支持旧的 android 版本，那么可以使用[ActionBarSherlock](http://actionbarsherlock.com/)，一个开源项目，方便使用使用单个 API 跨所有 Android 版本的操作栏设计模式。

现在很多流行的应用程序都使用这个项目（包括谷歌应用程序），所以值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:51:20.013

> Fragment 表示 Activity 中的一种行为或用户界面的一部分。
> 
> [安卓开发者指南。](http://developer.android.com/guide/components/fragments.html)

你的问题似乎措辞有点奇怪。您正在询问`Tabs`是否位于页面底部，但询问您是否应该使用`Fragments`. 这是两个不同的话题。

是的，你应该使用`Fragments`，这是 android 正在走的路线，并将在未来继续走。

位于屏幕`Tabs`底部或顶部是设计决策。取决于什么对用户体验更舒适，实际上与`Fragments`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-11T08:16:04.700

Google 引入了一个名为[BottomNavigationView](https://developer.android.com/reference/android/support/design/widget/BottomNavigationView.html)的新视图，这是一个用于 Android 应用程序的标准底部导航栏。根据指南，您最多可以添加 5 个（标准）项目，并且非常简单，就像 android 的 NavigationView。

请访问[组件指南](https://material.io/guidelines/components/bottom-navigation.html#)，以了解有关设计的更多信息。

# url - 将来自 URL 的响应呈现为 RSS 格式

> ID：11675963
> 
> 赞同：0
> 
> 时间：2012-07-26T18:43:41.863
> 
> 标签：url, rss, controller

我正在创建一个控制器，它从应用程序接收某些参数，然后访问硬编码的 URL。在收到来自 URL 的响应后，我的控制器应该将此响应呈现为 RSS 格式。

为此，我决定使用 XPath 来创建 xml 标记，然后使用 StringBuilder 附加这些标记，然后将结果呈现为文本。这能够在浏览器上显示我想要的方式。

但是，当我尝试查看页面源时，它没有显示任何标签或标题，它只是将其显示为页面上的普通文本。我需要有关如何操作的帮助，以便标题和标签可以出现在页面源中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:23:57.933

我建议让您的控制器将数据作为 JSON 发送，然后创建一个将 JSON 呈现为 rss2/xml 的模板。为获得最佳结果，通过查看提要的组织方式，使您的 JSON 结构易于循环以创建 RSS 提要。

这是[rss2 规范](http://cyber.law.harvard.edu/rss/rss.html)

确保此行位于文件顶部且没有前导空格

```
<?xml version="1.0"?> 
```

还要确保您的内容以“text/xml”作为其内容类型。在 php 中，可以这样设置：

```
header('Content-Type: text/xml'); 
```

见[http://www.electrictoolbox.com/rss-php-content-type/](http://www.electrictoolbox.com/rss-php-content-type/)

# linq - 使用实体框架从数据库中错误选择

> ID：11675966
> 
> 赞同：1
> 
> 时间：2012-07-26T18:44:00.303
> 
> 标签：linq, entity-framework

我有一种方法可以从数据库中选择两个字段，其中第一个字段中的文本匹配某个值

```
public static List<List<string>> SelectForSearch(string letter)
{
    var data = (from p in model.City
                where p.Name.StartsWith(letter)
                select new List<string> { p.Name, p.CountryName }).ToList();
    return data;
} 
```

但它返回给我一个这样的列表：

> [0][0]澳大利亚
> [0][1]巴利纳
> 
> [1][0]贝瑞
> [1][1]澳大利亚
> 
> [2][0]澳大利亚
> [2][1]本迪戈
> ...

Country 和 City 位置没有这样的静态索引：

> [0][0]巴利纳
> [0][1]澳大利亚
> 
> [1][0]贝瑞
> [1][1]澳大利亚
> 
> [2][0]本迪戈
> [2][1]澳大利亚
> ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:15:01.193

您的问题是，在您的 select 语句中，您创建的是字符串列表，而不是使用 Name 和 CountryName 创建类型。List 初始化器允许您在通过将它们放入构造列表时传入值，`{ }`并且您偶然使用了此功能，正如您所看到的，它创建了一个字符串列表，其中名称是第一个元素，国家名称是第二个元素。你想做的更像是：

```
var data = (from p in model.City
            where p.Name.StartsWith(letter)
            select new { City = p.Name, CountryName = p.CountryName }).ToList();
return data; 
```

这是使用匿名类型，这不好，因为您想为返回值声明一个类型。所以你真的应该为存储创建一个类，例如：

```
public class CityCountryPair 
{
    public String City { get; set; }
    public String CountryName { get; set; }
} 
```

那么你的方法就变成了

```
public static List<CityCountryPair> SelectForSearch(string letter)
{
    var data = (from p in model.City
                where p.Name.StartsWith(letter)
                select new CityCountryPair() { City = p.Name, 
                                               CountryName = p.CountryName 
                                              }).ToList();
    return data;
} 
```

# iphone - iPhone推送通知urbanairship，phonegap，c#

> ID：11675971
> 
> 赞同：3
> 
> 时间：2012-07-26T18:44:15.987
> 
> 标签：iphone, cordova, apple-push-notifications

我想创建一个应用程序，它将由服务器通知新事件。（假设我有一家商店，我需要通知我所有的 iPhone 用户我的销售或类似的事情）将下载我的应用程序并运行它然后将其置于后台的用户必须得到通知。我对 iOS 和 Objective-C 很陌生，但如果我没有错，这可以通过苹果推送通知来完成。我一直在阅读这方面的内容，并发现有一些提供商可以让您发送此通知。我的问题是，有没有办法在 C# 中创建自己的通知“中心”并自己向 iPhone-s 发送通知，如果无法做到这一点，是否有任何免费提供商？

还有一件事。在objective-c 应用程序中，您必须订阅您的应用程序才能收听此类事件。您可以使用 phonegap 或其他一些技术创建应用程序，以便它可以与通知一起使用吗？你能说在objective-c中嵌入你的应用程序吗（比如objective-c中的web应用程序）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:30:29.437

当然，您可以编写自己的 C# 程序，将 APN 推送给您的客户（事实上，我自己在许多应用程序中都这样做了）。您必须了解的是，APN 的架构有两个关键事实：

1.  APN 是尽力而为，因此不能保证它们每次都能到达。
2.  当 APNs 到达您的客户端时，它们无法保存大量信息（它们的位数有限，请参阅 Apple 文档）。

由于这些事实，您可能需要拥有自己的服务器应用程序（也可以在 C# 中）来处理将真实信息发送到客户端并确保数据也到达您的客户端。不用说，这个服务器应用程序应该在真实的服务器上运行。也许由于这个事实，一些开发人员开始寻找第三方解决方案，但我个人更喜欢不使用第三方，我自己做所有事情。

除了拥有自己的服务器应用程序之外，您的 iPhone 应用程序还需要某种数据库（可能是 SQLite3）来存储接收到的新闻并在以后显示它们。

**编辑：在下面的评论中回答您的问题：**

对于第一个问题“为什么 iPhone 应用程序必须具有 sql db”。事实上，这不是必须的，正如我在上面的回答中所说，这是可能的或有可能的。要知道您是否需要数据库，这取决于您的应用程序本身的性质。例如，您可能正在向您的客户端推送文本和图像，在这种情况下，您无法将此类数据放入 APN 的有效负载中。另一种可能性，即使用户丢弃了 APN 消息，您也可能不希望丢失已发送的通知，您可能希望稍后在他打开应用程序时再次显示它......所以应用程序的性质决定您是否需要服务器与否。

对于第二个问题“您说您不需要通过第三方发送通知”，让我在回答中澄清一些内容。作为一名 Apple 开发人员，我不认为 Apple 服务器是第三方。换句话说，真正的 APN 只会通过 Apple 服务器发送，我们无法改变这个事实（我们也不想改变它）。因此，最终真正的 APN 将被发送到 Apple 服务器，Apple 服务器将致力于将其传递给实际的客户端。我认为第三方是拥有自己服务器的人，您将想要的消息发送给他，然后他将其发送到Apple服务器。在那种情况下，你和 Appl APN 服务器之间会有人，这就是我所说的第三方，并且可以避免这个第三方，因为您的 C# 代码可以直接连接到 Apple APN 服务器并要求它向客户端发送消息。我希望我澄清了我的观点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:06:47.613

是的，您可以将 APNS 与 phonegap 应用程序一起使用：[Receiving push notification on PhoneGap for iOS](https://stackoverflow.com/questions/5884468/receiving-push-notification-on-phonegap-for-ios)

关于服务器，除了从头开始做所有事情之外，您还有另一个选择。您可以通过 API 使用第三方服务器，似乎 pushwoosh ( [http://pushwoosh.com](http://pushwoosh.com) ) 的人提供了这个选项（他们也提供了 phonegap 集成）

# javascript - 此 jsfiddle url 中的参数

> ID：11675972
> 
> 赞同：2
> 
> 时间：2012-07-26T18:44:20.327
> 
> 标签：javascript, jquery, highcharts, urlencode, jsfiddle

我想知道这个 jsfiddle url 与其他 jsfiddle 链接有何不同，

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)

大多数 jsfiddles 就像[jsfiddle.net/7Yutyu](http://jsfiddle.net/7Yutyu) 但在这种情况下，我看到像 jquery 版本一样传递的参数是如何完成的。我还想知道我们是否可以将某个特定城市（例如东京、纽约、柏林或伦敦）显示或隐藏到 url 查询字符串中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:09:50.103

它与与 GitHub 的集成有关：http: [//doc.jsfiddle.net/use/github_read.html](http://doc.jsfiddle.net/use/github_read.html)

```
URL: http://jsfiddle.net/gh/get/{framework}/{version}/{github_tree}/ 
```

这是他们在文档页面上提供的示例：

```
Example
Demo on the github: http://github.com/zalun/jsFiddleGithubDemo/tree/master/Demo/
URL to jsFiddle: http://jsfiddle.net/gh/get/mootools/1.2/zalun/jsFiddleGithubDemo/tree/master/Demo/
It will load the fiddle with MooTools framework in version 1.2.5 
```

此外，这是问题示例中使用的实际 GitHub 页面： [https ://github.com/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/](https://github.com/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)

至于 tquestion 中关于将变量传递给 jsfiddle 的部分，看起来唯一可以通过这种方式传递的是用于显示 GitHub 代码的框架。

# regex - 为 sed 搜索模式转义路径

> ID：11675973
> 
> 赞同：1
> 
> 时间：2012-07-26T18:44:21.767
> 
> 标签：regex, shell, unix, sed

> **可能重复：**
> [sed，引号中的正斜杠](https://stackoverflow.com/questions/11147323/sed-foward-slash-in-quotes)

在我的 bash 脚本中，我有一个路径字符串，我应该在`sed`模式中使用它。

```
SRC_PATH="$PWD"
sed "s/<SRC_PATH>/$SRC_PATH/g" template.sh > replaced.sh 
```

如何转义`$SRC_PATH`字符串，以便 sed 安全地接受它作为文字替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:52:37.033

你不必逃避它。只需使用其他分隔符：

```
sed "s@<SRC_PATH>@$SRC_PATH@g" template.sh > replaced.sh 
```

但是您必须确保 SRC_PATH 不包含`@`（或其他符号，如果您选择它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:52:03.110

使用`s%$OLDPATH%$NEWPATH%`. 您可以选择分隔符。如果`%`太危险，请考虑`Control-A`。

# javascript - OnDemandGrid (Dgrid) 不会在向下滚动时触发请求（新数据）

> ID：11675976
> 
> 赞同：0
> 
> 时间：2012-07-26T18:44:42.053
> 
> 标签：javascript, dojo, dgrid

好吧，我已经能够让它与 DataGrid 一起工作，但出于某种原因，Dgrid 确实令人印象深刻，同时也非常令人沮丧（很多人推荐它）。到目前为止，我已经能够请求一定数量的数据（只有第一次调用，所以我的请求标头指定返回 25 个项目......），一旦我尝试向下滚动以获得更多项目（所以应该发送额外的请求） 没发生什么事。

基本上这就是使用 jsonrest 构建的商店：

```
define([
    "dojo/store/Memory",
    "dojo/store/JsonRest",
    "dojo/store/Cache",
    "dojo/store/Observable"
    ],
function(
    Memory,
    JsonRest,
    Cache,
    Observable
){

    var contentMemoryStore = new Memory();
    var contentJsonRestStore = new JsonRest({target: "http://dev.mpact.tv:30087/rest/contenus/"});

    contentStore = new Cache(contentJsonRestStore, contentMemoryStore);

    return new Observable(contentStore);
}); 
```

然后，我将此存储传递给 OnDemandGrid 的属性。

我检查了这个人的例子：[http](http://www.speich.net/articles/demos/jsonrest/dojo-demo-dgrid.php) ://www.speich.net/articles/demos/jsonrest/dojo-demo-dgrid.php 我检查了 dgrid 的文档（OnDemandList）：[https ://github.com/SitePen /dgrid/wiki/核心组件](https://github.com/SitePen/dgrid/wiki/Core-Components)

**添加了请求标头/响应标头（但我认为它们是正确的）：** ![在此处输入图像描述](../Images/3202286bfe6143d4a7fa59485349566a.png) ![在此处输入图像描述](../Images/b594c0545129f7380d44269014307e0e.png)

**服务器端代码（在 perl 中）：**

```
$r->headers_out->set('Content-Range', sprintf("items %d-%d/%d", $start, $start 
+ $num_items - 1, $total)); 
```

**更新：**

我用旧的 jsonstore (dojox/data) 做了一个快速测试：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Statut des canaux générés par Gipsy</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></meta>
        <style type="text/css">
            @import "/dojo/dojo/resources/dojo.css";
            @import "/dojo/dijit/themes/tundra/tundra.css";
            @import "/dojo/dojox/grid/resources/Grid.css";
            @import "/dojo/dojox/grid/resources/tundraGrid.css";
            //.grid {
            //    width: 70em;
            //    height: 40em;
            //}
            .Title { text-align: center }
            html, body { height: 100%; margin: 0px; font-size: 14px; }
        </style>
        <script type="text/javascript" src="/dojo/dojo/dojo.js"  djConfig="isDebug:false, parseOnLoad: false"></script>
        <script type="text/javascript">
            dojo.require("dijit.layout.BorderContainer");
            dojo.require("dijit.layout.ContentPane");
            dojo.require("dojox.grid.TreeGrid");
            dojo.require("dijit.tree.ForestStoreModel");
            dojo.require("dojox.data.JsonRestStore");
            dojo.require("dojo.parser");

            dojo.addOnLoad(function(){

                dojo.parser.parse();

                var layout = [
                    { name: "Dossier", field: "repertoire", width: "auto" },
                    { name: "Fichier", field: "fichier", width: "auto" },
                    { name: "Nom", field: "nom", width: "auto" },
                    { name: "Date", field: "date", width: "auto" }
                ];
                //var jsonStore = new dojo.data.ItemFileReadStore({ data: dataItems });
                //var jsonStore = new dojo.data.ItemFileReadStore({ url: "/cgi-bin/senscity/stingray.json", clearOnClose: true });
                var jsonStore = new dojox.data.JsonRestStore({idAttribute: 'id', target: 'http://dev.mpact.tv:30087/rest/contenus'});
                var treeModel = new dijit.tree.ForestStoreModel({
                    store: jsonStore,
                    query: { type: 'canal' },
                    rootId: 'canalRoot',
                    rootLabel: 'Banane',
                    childrenAttrs: ['children']
                });
                var grid = new dojox.grid.TreeGrid({
                    treeModel: treeModel,
                    structure: layout,
                    selectable: true,
                    defaultOpen: false
                }, 'programmatic_grid');
                grid.startup();
                dojo.connect(window, "onresize", grid, "resize");
            });
        </script>
    </head>
    <body class="tundra">
<!-- -->
        <h1 class="Title" style="margin-bottom: 0.5em;">Statut de la programmation</h1>
        <div dojoType="dijit.layout.BorderContainer" style="width: 100%; height: 100%;">
<!--
            <div dojoType="dijit.layout.ContentPane" region="top" style="height: 20pt; padding: 0px; border: 0px;">
            date de dernière mise à jour, décompte de prochaine mise à jour, bouton de mise à jour, case de désactivation de mise à jour automatique
            </div>
-->
            <div dojoType="dijit.layout.ContentPane" region="center">
<!-- -->
                <div id="programmatic_grid"></div>
<!-- -->
            </div>
<!-- -->
        </div>
    </body>
</html> 
```

所以，我猜它必须是商店或网格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:52:42.303

注意 Request 有一个 HTTP Header `Range`。这表明正在请求哪些项目。然后在响应中，您需要包含一个`Content-Range`标题，该标题描述了要返回的项目和可用的总数。

您的响应包括标题：

`Content-Range: items=0-24/123456`

看起来格式需要是：

`Content-Range: items 0-24/66`

来自[JsonRest 文档](http://dojotoolkit.org/reference-guide/1.7/dojo/store/JsonRest.html)：

```
Paging

JsonRest store uses HTTP’s Range header to perform paging. When a request is made for a range of items, JsonRest will include a Range header with an items range unit specifying the range:

Range: items=0-24
On your server, you should look at the Range header in the request to know which items to return. The server should respond with a Content-Range header to indicate how many items are being returned and how many total items exist:

Content-Range: items 0-24/66 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:11:00.163

*我忘了提到我正在使用我的休息框架进行跨域请求（也许应该说......）。*

两天后发现，这是我的问题的原因（我仍然不知道原因或来源）。当我将代码迁移到服务器时，一切正常。在我的 php 服务器上做了一个简单的小测试来填充 onDemandeGrid 并看到它在我的本地主机上工作！

另外，为了绕过跨域，我在我的服务器端休息代码中添加了这个标头（继续在跨域上开发，直到我们有一个像样的开发环境）：

```
Access-Control-Expose-Headers:Content-Range 
```

# graph - 如何从 Gremlin 调用 neo4j GraphAlgoFactory aStar 算法？

> ID：11675980
> 
> 赞同：3
> 
> 时间：2012-07-26T18:44:55.500
> 
> 标签：graph, neo4j, dijkstra, a-star, gremlin

我是一名编码技能平庸的数据科学家，所以直到现在在使用 neo4j 时，我一直避免使用 java 来支持 Cypher 和 Gremlin。

我已经将一堆图形数据推送到 neo4j 中，每个边都有一个权重属性。如果可能的话，我想从 gremlin 控制台中在此图表上运行 aStar 或 dijkstra。JUNG 似乎没有加权最短路径算法，所以我转向了 GraphAlgoFactory，但所有关于它的在线讨论似乎都是在纯 Java 中进行的。

我的目标是在我选择的两个顶点之间获得最短的加权路径，其中权重由边缘上的权重属性决定。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:32:43.923

我会给你一个例子，作为探索你自己的图表的起点。首先启动[Gremlin](http://github.com/tinkerpop/gremlin/wiki/Getting-Started)并定义一个实用方法来创建边缘：

```
def edge(Graph g, Vertex v1, Vertex v2, int weight) {
    e = g.addEdge(null, v1, v2, "connects");
    e.setProperty("weight", weight);
} 
```

现在创建一个具有 4 个节点和 4 条边的简单图：

```
g = new Neo4jGraph("/tmp/dijkstra")
v1 = g.addVertex(1);
v2 = g.addVertex(2);
v3 = g.addVertex(3);
v4 = g.addVertex(4);

edge(g, v1, v2, 13);
edge(g, v1, v4, 20);
edge(g, v2, v3, 3);
edge(g, v4, v3, 40); 
```

由于控制台中的 Gremlin 版本运行在[Groovy](http://groovy.codehaus.org)上，因此您可以无缝混合搭配 Groovy 和 Java 以使用 GraphAlgoFactory：

```
import org.neo4j.graphalgo.GraphAlgoFactory;
import org.neo4j.graphalgo.CommonEvaluators;
import org.neo4j.kernel.Traversal;

dijkstra = GraphAlgoFactory.dijkstra(Traversal.expanderForAllTypes(), CommonEvaluators.doubleCostEvaluator("weight"))
path = dijkstra.findSinglePath(((Neo4jVertex)v1).getRawVertex(), ((Neo4jVertex)v3).getRawVertex())
println path
// (1)--[connects,0]-->(2)--[connects,2]-->(3) weight:16.0 
```

使用 GraphAlgoFactory 的代码主要来自[Neo4j 文档](http://docs.neo4j.org/chunked/milestone/tutorials-java-embedded-graph-algo.html)。唯一的区别是您需要将每个[蓝图顶点](http://tinkerpop.com/docs/javadocs/blueprints/2.0.0/com/tinkerpop/blueprints/Vertex.html)转换为 org.neo4j.graphdb.Node，因为 GraphAlgoFactory 不理解蓝图。

# java - 在java中使用Xpath从一个大的xml文件中提取一个值

> ID：11675981
> 
> 赞同：0
> 
> 时间：2012-07-26T18:44:56.223
> 
> 标签：java, xml, xpath

我想从一个大的 xml 文件中提取一个值（我正在处理的一个更大的 xml 项目的一部分）

所以xml结构是这样的：

```
<m:Report>
    <m:Messages>
        <m:report_type>
            <m:Report_Data> (last value)
                <m:Data_Item> (must be specific type)
                <m:Value> (want this)

After this all tags close properly 
```

所以正确的 xpath 查询看起来像这样：

```
XPathExpression expr = x.compile("//m:Report/m:Messages/m:Report_type/m:Report_Data[m:Data_Iten='PRICE'][last()]/m:Value/text()") ; 
```

我对这个查询不太走运，我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:59:32.497

您的查询中只是有错误。`Report_type`应该是`report_type`并且`Data_Iten`应该是`Data_Item`：

```
XPathExpression expr = x.compile("//m:Report/m:Messages/m:report_type/m:Report_Data[m:Data_Item='PRICE'][last()]/m:Value/text()"); 
```

假设`Data_Item`您的输入数据中有 a `PRICE`，那么这应该会为您提供`<m:Value>`.

# java - 在 Eclipse 中搜索使用特定方法/构造函数的类

> ID：11675982
> 
> 赞同：1
> 
> 时间：2012-07-26T18:44:57.730
> 
> 标签：java

> **可能重复：**
> [Eclipse 查找方法的引用](https://stackoverflow.com/questions/11635325/eclipse-find-references-for-method)

如何在Eclipse（java）中搜索使用特定方法的类（自己的包+其他包）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:50:34.977

我相信您想要“在工作区中查找引用”。这通常绑定到`Ctrl``Shift``G`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:51:09.607

右键单击代码中的方法名称并选择“打开调用层次结构”或在单击方法名称后使用组合键 Ctrl+Alt+H。将打开一个名为 Call Hierarchy 的面板，其中包含项目中调用该方法的所有位置的列表。

您还可以使用文件搜索在整个工作区中搜索文本字符串。这可以通过“搜索”菜单（单击“文件...”）到达。或者使用 Ctrl+H 并单击“文件搜索”选项卡。在“包含文本”字段中键入您要查找的字符串。如果您愿意，您还可以将 *.java 添加到“文件名模式”字段中，以便仅搜索 Java 源代码。否则，将 * 放在文件名字段中，以便搜索工作区中所有文件的内容。

# php - 在 php 中转换 url

> ID：11675984
> 
> 赞同：1
> 
> 时间：2012-07-26T18:45:05.480
> 
> 标签：php, url, character-encoding, encode

我有一个如下形式的网址

```
http://www.site.com/index.php?q=foo boo 
```

当我通过chrome访问url时，chrome将其正确转换为

```
http://www.site.com/index.php?q=foo%20boo 
```

现在，当我将 file_get_contents 与第一个 url 一起使用时，它无法正确读取 url，而当我使用以下 url 时它可以

```
http://www.site.com/index.php?q=foo&nbsp;boo 
```

我应该使用什么 php 函数/函数来将第一个链接转换为最后一个链接，以便将第一个链接上的所有特殊字符（如空格）正确转换为`&nbsp;`最后一个链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:47:41.443

您可以使用 PHP 的`rawurlencode()`：

[http://www.php.net/manual/en/function.rawurlencode.php](http://www.php.net/manual/en/function.rawurlencode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:47:37.747

`&nbsp;`比用HTML 实体替换可破坏空格更安全的选择是用`\xA0`ASCII 字符替换它。他们实际上是[平等](http://en.wikipedia.org/wiki/Non-breaking_space)的。an 中的`&`字符`URL`被视为参数分隔符，因此`&nbsp;`只会导致问题。以下算法可以做你可能正在寻找的东西：

```
$url = 'http://www.site.com/index.php?q=foo boo&r=fii bii';
echo str_replace("\x20", "\xA0", $url);
// result: http://www.site.com/index.php?q=foo boo&r=fii bii (spaces are non-breakable)
echo str_replace("\x20", "&nbsp;", $url);
// result: http://www.site.com/index.php?q=foo&nbsp;boo&r=fii&nbsp;bii 
```

更复杂的算法：

```
echo preg_replace_callback('/[\?&]\w+=([^&]+)/', create_function(
    '$matches',
    'return str_replace("\x20", "\xA0", $matches[0]);'
  ), $url);
// result: http://www.site.com/index.php?q=foo boo&r=fii bii (spaces are non-breakable) 
```

当这些参数被提取出来时：

```
$arr = parse_url($url);
parse_str($arr['query'], $arr);
var_export($arr);
// result for \xA0  : array ( 'q' => 'foo boo', 'r' => 'fii bii', )
// result for &nbsp;: array ( 'q' => 'foo', 'nbsp;boo' => '', 'r' => 'fii', 'nbsp;bii' => '', ) // triple `&` in conflict 
```

# c# - 从表单/控件继承并编写模块化代码

> ID：11675987
> 
> 赞同：0
> 
> 时间：2012-07-26T18:45:15.593
> 
> 标签：c#, winforms, refactoring

我已经编写了几个简单的 GUI 应用程序，但所有的逻辑基本上都写在给定的默认 Form1 类中。

所以我想也许我会把 GUI 逻辑重写到他们自己的类中。例如，FileOpenDialog 的一个类，ListView 的另一个类，等等。这样我的 Form1 类就没有太多不必要的方法，只是用来处理一些基本的东西，在其他 GUI 方法被移动之后可能不会很多。

写了这样的东西作为第一次尝试去某个地方

```
namespace WindowsFormsApplication1
{
    class OpenFileDialog1 : OpenFileDialog
    {
    }
} 
```

但随后 VS 告诉我我不能从密封类型派生。

我还没有尝试过其他课程，但我可能会在某个时候遇到同样的问题。我没有正确继承它吗？还是我必须使用某种变通方法将每个 GUI 元素分成它们自己的类？

也许这不是一个好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:57:58.317

这*是*一个很好的方法。但不要继承自`OpenFileDialog`. 只需创建一个简单的类并将内容放在那里。

像这样的东西（只是一个想法）：

```
class FileDialogStuff
{
    static OpenFileDialog dialog = new OpenFileDialog();

    public static string GetFile()
    {
        DialogResult result = dialog.ShowDialog();
        //Do stuff
        return dialog.FileName;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:48:26.507

根据 c# 规范，一个密封的类不能被继承到另一个类。你必须直接发起。

如果 OpenFileDialog 是密封类，则不能继承它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:19:04.533

根据您的澄清评论，听起来您要么想要一些实用程序类或工厂类。也许像下面这样：

```
public interface IFileOpener
{
    public bool PresentFileOpenDialogToUser();
    public string RequestedFilePath { get; }
}

public class DefaultFileOpener : IFileOpener
{
    private string filePath = default(string);

    public bool PresentFileOpenDialogToUser()
    {
        OpenFileDialog ofd = new OpenFileDialog();
        DialogResult dr = ofd.ShowDialog();
        if (dr == DialogResult.Cancel)
        {
            this.filePath = default(string);
            return false;
        }
        else
        {
            this.filePath = ofd.FileName;
            return true;
        }
    }

    public string RequestedFilePath
    {
        get 
        {
            return this.filePath;
        }
    }
}

public class FileOpenerFactory
{
    public static IFileOpener CreateFileOpener()
    {
        return new DefaultFileOpener();
    }
} 
```

并以您的形式：

```
 private void btnOpenFile_Click(object sender, EventArgs e)
    {
        IFileOpener opener = FileOpenerFactory.CreateFileOpener();
        if (opener.PresentFileOpenDialogToUser())
        {
            //do something with opener.RequestedFilePath;
        }
    } 
```

你甚至可以用部分类做一些事情，所以在你的主要形式中你有类似的东西

```
 private void btnOpenFile_Click(object sender, EventArgs e)
    {
        this.OpenMyFile();
    } 
```

在您的部分课程中，您有：

```
public partial class Form1
{
    private void OpenMyFile()
    {
        IFileOpener opener = FileOpenerFactory.CreateFileOpener();
        if (opener.PresentFileOpenDialogToUser())
        {
            //do something with opener.RequestedFilePath;
        }
    }
} 
```

很多时候，使用部分类作为接口或重点功能的实现非常有用。

# java - android.os.NetworkOnMainThreadException 进入 AsyncTask

> ID：11675988
> 
> 赞同：0
> 
> 时间：2012-07-26T18:45:17.647
> 
> 标签：java, android

我有以下课程：

```
class CargaImgsParaAmpliar extends AsyncTask<Void, Void, Bitmap> {

        final ProgressDialog progressDialog = new ProgressDialog(imagen.this);

        protected void onPreExecute() {
            progressDialog.setTitle("");
            progressDialog.setMessage("Cargando Imagen...");
            progressDialog.show();
        }

        protected Bitmap doInBackground(Void... params) {
            Bitmap mIcon1 = null;
            URL url_value;
            try {
                url_value = new URL(StrUrl);
                mIcon1 = BitmapFactory.decodeStream(url_value.openConnection().getInputStream());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }           
            return mIcon1;
        }

        protected void onPostExecute(Bitmap imagen) {
            m_imageView.setImageBitmap(urlImageToBitmap(StrUrl));
            progressDialog.dismiss();
        }       
    } 
```

我正在 AsyncTask 中进行互联网放电过程，但它仍然给了我例外`android.os.NetworkOnMainThreadException`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:55:37.243

在我看来，`urlImageToBitmap`访问网络但从`onPostExecute`（在 UI 任务上运行）执行。

而且您似乎没有对`imagen`in 参数做任何事情`onPostExecute`。所以检索到的图像`doInBackground`基本丢失了。

# c# - 在 C# 中触发一个事件

> ID：11675990
> 
> 赞同：1
> 
> 时间：2012-07-26T18:45:19.653
> 
> 标签：c#, events, slider

我想要做的是触发滑块的 ValueChanged 事件。我该怎么做？

我不想直接调用 ValueChanged 事件处理程序。

我实际上是在尝试触发事件，就好像用户正在调整 UI 上的滑块一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:15:23.893

引发其他对象的事件对测试很有帮助。下面的代码可以实现：

```
class SomeClass
{
  public event Action SomeEvent;
}

// later
var instance = new SomeClass();
instance.SomeEvent += () => Console.WriteLine("it happeneed");

var flags = BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public;
var type = typeof(SomeClass);
var field = type.GetField("SomeEvent", flags);
var method = field.FieldType.GetProperty("Method", flags);
var target = field.FieldType.GetProperty("Target", flags);
var methodInstance = field.GetValue(instance);
((MulticastDelegate)methodInstance).DynamicInvoke(new object[] { }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T18:49:31.467

你描述的真的做不到。事件只能从声明它们的类中触发。

为什么仍然需要触发 ValueChanged 事件？听起来这个任务是针对 DataModel 或 ViewModel 而不是滑块的。

# html - CSS：增加上边距

> ID：11675993
> 
> 赞同：6
> 
> 时间：2012-07-26T18:45:31.143
> 
> 标签：html, css

我正在尝试以楼梯类型的方式错开一个 div 类，所以它看起来像这样

```
1
 2
  3
   4 
```

编辑：我想更改上边距，因此 .process div 的每个位置都低于它之前的位置。我让它们漂浮，所以它们会并排坐着，但我也希望每个 div 都比上一个低。

当然，我尝试使用`nth-child`它，只是将顶部边距添加到所有元素，因为它从第一个元素开始计数，并简单地将设置的边距添加到所有 div。我知道你可以使用 CSS 创建一个计数器，但是你可以使用 CSS 增加一个边距吗？

**CSS**

```
.process {
    float: left;
    width: 20%;
}

.process:nth-child(1n+2) {
    margin-top: 1em;
} 
```

**HTML**

```
<!-- #dprocess -->
<div id="dprocess">

    <!-- .process -->
    <div class="process">

        <p>Name Goes Here</p>

    <!-- /.process -->
    </div>

    <!-- .process -->
    <div class="process">

        <p>Name Goes Here</p>

    <!-- /.process -->
    </div>

    <!-- .process -->
    <div class="process">

        <p>Name Goes Here</p>

    <!-- /.process -->
    </div>

    <!-- .process -->
    <div class="process">

        <p>Name Goes Here</p>

    <!-- /.process -->
    </div>

    <!-- .process -->
    <div class="process">

        <p>Name Goes Here</p>

    <!-- /.process -->
    </div>

<!-- /#dprocess -->
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:16:19.147

您是否考虑过更改标记？

```
<div>
    1
    <div>
        2
        <div>
            3
            <div>
                4
                <div>
                    5
                </div>
            </div>
        </div>
    </div>
</div>
<style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    div {
        margin-left: 10px;
    }
</style> 
```

该标记似乎也更适合这项工作（考虑到您想要的等级结构）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:18:44.540

因为您的元素集非常有限，所以可以使用复制粘贴：

[http://jsfiddle.net/C4TWc/1/](http://jsfiddle.net/C4TWc/1/)

HTML：

```
<div>name</div>
<div>name</div>
<div>name</div>
<div>name</div>
<div>name</div> 
```

CSS：

```
div {
    float: left;
    width: 20%;
}

div:first-child + div { margin-top: 2em; }
div:first-child + div + div { margin-top: 4em; }
div:first-child + div + div + div { margin-top: 6em; }
div:first-child + div + div + div + div { margin-top: 8em; }
div:first-child + div + div + div + div + div { margin-top: 10em; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:29:22.003

另一种可能的方式（很容易中断）：

[http://jsfiddle.net/C4TWc/2/](http://jsfiddle.net/C4TWc/2/)

HTML：

```
<div>name</div>
<div>name</div>
<div>name</div>
<div>name</div>
<div>name</div> 
```

CSS：

```
div {
    display: block;
}

div ~ div:before {
    content: '';
    width:  20%;
    height: 2em;
    float: left;
} 
```

# html - Maxlength 在 chrome 中计算不正确，但在 FF 中表现良好

> ID：11675997
> 
> 赞同：1
> 
> 时间：2012-07-26T18:45:44.427
> 
> 标签：html

我在文本区域使用 maxlength，并使用 JS 检查剩余的字符数。如果我尝试输入一个简单的字符串

IE：

> 1234567890

反复 maxlength 工作完美，但如果我尝试输入这样的字符串：

> ```
> Welcome!
> 
> 1\. this is a test
> 2\. this is a test
> 3\. this is a test
> 
> hahaahahahahahahaahahahahahahahhahaahahahahahahahahahahahaaaaaaaaaaaaaasddddddddddasdaasdasdasd 
> ```

它在剩下的 6 个字符处停止，但在 FF 上它工作得很好。

我试图对 maxlength 的工作原理进行一些研究，但没有成功，所以我想知道为什么 maxlength 不能在 chrome 上完美运行。可能是因为输入了空格和特殊字符吗？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T20:24:08.320

可以使用简单的代码来演示该问题，例如

```
<textarea maxlength=5 rows=2 cols=10></textarea> 
```

在 Firefox 上，你可以输入“12”，按回车，然后输入“34”，然后就不能再输入了。在 Chrome 上，如果您尝试这样做，您将无法在“3”之后再键入任何内容。

似乎 Chrome 可以正常工作，而 Firefox 不能。的`maxlength`属性`textarea`是 HTML5 的新奇事物，因此正确性的最佳定义是最新的 W3C HTML5 草案或最新的 WHATWG HTML 文档，并且他们同意这个问题（以及大多数其他问题）。

根据[W3C HTML5 对 的定义`textarea`](http://www.w3.org/TR/html5/the-textarea-element.html#attr-textarea-maxlength)，值中的换行符被浏览器规范化为 CR LF（回车，换行，即两个控制字符）。因此，如果您输入“12”，按 enterm，然后输入“3”，则您输入了五个字符，因为换行符算作两个字符。

空格算作字符，特殊字符也是如此。根据 W3C HTML5 草案，一些非常特殊的字符，即基本多语言平面 (BMP) 之外的字符，非常特别：它们将每个字符计为两个字符，因为长度以 16 位代码单元计算。但大多数人从未使用过非 BMP 字符。

# oracle11g - oracle查询：同一个表选择了两次不同的别名但相同的where子句过滤器

> ID：11675998
> 
> 赞同：0
> 
> 时间：2012-07-26T18:45:44.803
> 
> 标签：oracle11g

我有一个这样的查询，我应该重构：

```
SELECT *
  FROM a a1
      ,b common_alias
      ,b common_alias1
 WHERE a1.id = common_alias.id(+)
   AND a1.id = common_alias1.id(+)
   AND common_alias.name = 'XYZ'
   AND common_alias1.name = 'XYZ'
UNION
SELECT *
  FROM a a1
      ,b common_alias
      ,b common_alias1
 WHERE a1.id = common_alias.id(+)
   AND a1.id = common_alias1.id(+)
   AND common_alias.name = 'XYZ'
   AND common_alias1.name = 'PQR' 
```

在我看来，我可以完全删除第一个查询。是否存在删除第一个查询会产生影响的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:54:35.087

`common_alias1.id`应该审查您的外连接条件，它没有效果，因为您也没有外连接`common_alias1.name`。请参阅[第二个表上带有过滤条件的 Oracle 外连接](https://stackoverflow.com/questions/11568425/oracle-outer-join-with-filter-condition-on-the-second-table/11573445#11573445)。

但回到你的问题：不，你不能删除第一部分，你会在哪里得到 XYZ|XYZ 行？有关示例，请参见[http://sqlfiddle.com/#!4/c7dfa/12 。](http://sqlfiddle.com/#!4/c7dfa/12)

但是你可以重构为

```
SELECT a1.*,common_alias.name n1,common_alias1.name n2
  FROM a a1
      ,b common_alias
      ,b common_alias1
 WHERE a1.id = common_alias.id(+)
   AND a1.id = common_alias1.id(+)
   AND common_alias.name = 'XYZ'
   AND (common_alias1.name = 'XYZ' OR common_alias1.name = 'PQR')
; 
```