# StackOverflow 问答 10990000-10990999

# linux - bash中的替换顺序

> ID：10990000
> 
> 赞同：1
> 
> 时间：2012-06-12T02:54:07.053
> 
> 标签：linux, bash, command-substitution, variable-substitution

我需要演示命令替换、变量替换和通配符发生的顺序。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:31:48.253

*   命令替换 < globbing

    ```
    ls $(echo '*') 
    ```

    否则， * 不会被扩展。

*   变量扩展（不是替换）< globbing

    ```
    x='*' ; ls $x 
    ```

    原因同上。

*   变量扩展和命令替换同时出现，从左到右。如果你能想到一个很好的例子，请给我评论，我没有想法。

# ruby - 将预装的 ruby 恢复到 Mac OS X

> ID：10990003
> 
> 赞同：1
> 
> 时间：2012-06-12T02:54:26.513
> 
> 标签：ruby, macos

我知道它永远不应该这样做，但我不小心从我的 Mac OS X 中删除了文件夹 /usr/bin/ruby。这样我就丢失了所有预安装的 ruby​​ 文件。例如，现在在尝试安装 Homebrew 时，我收到错误消息：

> -bash: /usr/bin/ruby: 没有这样的文件或目录

如何将预安装的 ruby​​ 恢复到 /usr/bin？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:56:47.490

只需安装[rvm](https://rvm.io//)并获得最新的 ruby​​。即使是因为 OS X 附带的那个已经过时了（如果我没记错的话应该是 1.8.7）。

如果您可以在几分钟内安装更新版本，则无需重新安装捆绑的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:32:46.033

你能从以下网址下载吗：ftp: [//ftp.ruby-lang.org/pub/ruby/1.8/ruby-1.8.6-p111.tar.bz2](ftp://ftp.ruby-lang.org/pub/ruby/1.8/ruby-1.8.6-p111.tar.bz2)

然后将其编译到您的 /usr/bin 目录中。

您可能仍然需要处理许可/所有权问题。

# twitter-bootstrap - Twitter Bootstrap 和 Bootstrap-Xtra

> ID：10990004
> 
> 赞同：2
> 
> 时间：2012-06-12T02:54:29.623
> 
> 标签：twitter-bootstrap

如果您选择使用 Bootstrap-Xtra，您是否应该包含原始的 bootstrap.css，或者 bootstrap-xtra.css 应该是一个完整的替代品。

例如，bootstrap-xtra 中不存在进度条 CSS 样式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:35:04.917

Bootstrap xtra 旨在替换，但基于 7 个月以上的 twitter bootstrap 旧版本。由于在 twitter 引导程序上添加了新功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T14:47:48.123

您应该改用[Kickstrap](http://getkickstrap.com)。

这也包括其核心的 Bootstrap，但它是分层的，因此即使您不升级 Kickstrap 本身，您也可以在整个开发过程中不断更新 Bootstrap。拥有它还为“应用程序”、主题和 hack 提供了扩展，例如用 Font Awesome 替换字形图标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T15:18:44.033

Bootstrap Xtra 非常适合 bootstrap 的 1.x 版本，但是由于 2.0.x 版本已经添加了很多该功能，您还将面临选择器的一些差异，因为 bootstrap xtra 主要不是为 2.0 编写的。 X。

基本上，Bootstrap Xtra 不会在最新版本的 Bootstrap (2.0.4) 之上提供任何额外的功能，除了图标的不同颜色；但是我建议使用[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)替换，因为这会将图标变成一种字体，可以轻松缩放。

# date - 如何在 twitter-bootstrap 的表单中更改为当前日期

> ID：10990009
> 
> 赞同：0
> 
> 时间：2012-06-12T02:55:18.033
> 
> 标签：date, css, twitter-bootstrap

我想以 twitter bootstrap 的形式将日期更改为当前日期。我希望它可以自动更改，而无需我手动更改。

代码：

```
<label>Created:</label>
<input type="text" value="11/06/2012" id="datepicker"/>
<br/><br/> 
```

我希望自动更改值“06/11/2012”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:41:18.530

好吧，您可以使用 JavaScript：

```
var date = new Date();
document.getElementById('datepicker').value = date.getDate() + '/' + date.getMonth() + '/' + date.getFullYear(); 
```

# java - Java 类加载器混淆

> ID：10990013
> 
> 赞同：2
> 
> 时间：2012-06-12T02:55:56.800
> 
> 标签：java, classloader

我在某处读过，如果`class A`被加载，`ClassLoaderA`那么所有`A`依赖的类都将被加载`ClassLoaderA`。这是真的吗？如果是真的，那为什么我们需要设置上下文类加载器呢？喜欢这个：[http](http://blog.markturansky.com/archives/21) ://blog.markturansky.com/archives/21 ，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:09:16.227

[Javadocs 对类加载](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)器说以下内容：

> ClassLoader 类使用委托模型来搜索类和资源。ClassLoader 的每个实例都有一个关联的父类加载器。当请求查找类或资源时，ClassLoader 实例将在尝试查找类或资源本身之前将对该类或资源的搜索委托给其父类加载器。虚拟机的内置类加载器，称为“引导类加载器”，它本身没有父级，但可以作为 ClassLoader 实例的父级。

因此，您问题中的陈述显然是错误的。

在某些情况下，您可能希望创建一个隔离的类加载器，即不绑定到应用程序类加载器链的类加载器。在这些情况下，您可以创建一个父级为空的类加载器。（即检查[URLClassLoader 类](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)中的构造函数）

这意味着如果这个隔离的类加载器无法找到/加载给定的类，它将立即失败并显示`ClassNotFoundException`. 这也意味着您可以拥有两个独立的类加载器层次结构，而不会相互干扰。

**-编辑-**

我将说明我的答案。假使，假设：

*   我有一个名为的接口，`Creature`位于名为`parent.jar`.
*   我有一个名为的类`Jedi`位于名为`child.jar`.
*   该类`Jedi`实现接口`Creature`。

现在，让我们创建一个类加载器链，独立于当前系统链。

```
ClassLoader parent = new URLClassLoader(new URL[]{parentJar.toURL()}, null);
ClassLoader child = new URLClassLoader(new URL[]{childJar.toURL()}, parent); 
```

现在，我们可以要求子类加载器加载该类`Jedi`。

```
Class<?> klass1 = child.loadClass("com.star.wars.Jedi"); 
```

现在，如果您查询它的类加载器，您将看到它是由子类加载器加载的。到现在为止还挺好。但是它实现的接口呢。这取决于它，但是该`Creature`接口仅对其父类加载器可用，对吗？

好吧，如果您请求，`klass1.getInterfaces()[0].getClassLoader()`您会注意到它是父类加载器。

这证明了陈述：

> 如果类 A 由 ClassLoader A 加载，则 A 所依赖的所有类都将由 ClassLoader A 加载。

是完全错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:09:24.180

你读的是正确的。默认情况下，所有类只是相互引用并最终使用相同的 ClassLoader。您提供的链接解释了如何做相反的事情。在同一个 JVM 中加载的多个类可以具有相同的名称（包括包名称）但定义不同。通常，当它们来自同一库的不同版本时，就会发生这种情况。如何确保使用库版本 1 的代码始终看到版本 1，而使用库版本 2 的代码始终看到版本 2？如您提供的链接中所述，您可以通过引导类加载器隔离类加载器来执行此操作。

# php - 从 PHP 加载页面时创建 JSON 对象

> ID：10990014
> 
> 赞同：1
> 
> 时间：2012-06-12T02:56:00.717
> 
> 标签：php, javascript, json

我正在使用一个使用 JSON 数组绘制时间线的库。

是否可以通过 PHP 创建一个 JSON 对象以在页面加载时与该库一起使用？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T02:59:23.593

当然。只需将对象回显到页面上：

```
<script type="text/javascript">
<?php
    echo 'var yourObj = ', json_encode($yourObject), ';';
?>
</script> 
```

# c++ - 如何在 Intel 语法中使用 clang 生成汇编代码？

> ID：10990018
> 
> 赞同：74
> 
> 时间：2012-06-12T02:56:43.207
> 
> 标签：c++, assembly, x86, clang, intel

正如[这个问题](https://stackoverflow.com/questions/199966/how-do-you-use-gcc-to-generate-assembly-code-in-intel-syntax)所示，使用 g++，我可以做到`g++ -S -masm=intel test.cpp`. 另外，使用 clang，我可以做到`clang++ -S test.cpp`，但`-masm=intel`clang ( ) 不支持`warning argument unused during compilation: -masm=intel`。如何使用 clang 获得英特尔语法？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-08-14T17:44:17.360

正如[@thakis](https://stackoverflow.com/a/23630416/1172350)所指出的，较新版本的 Clang (3.5+) 接受该`-masm=intel`参数。

* * *

对于旧版本，这应该会发出带有 Intel 语法的汇编代码：

```
clang++ -S -mllvm --x86-asm-syntax=intel test.cpp 
```

您可以使用`-mllvm <arg>`从 clang 命令行传入 llvm 选项。遗憾的是，这个选项似乎没有很好的文档记录，因此我只能通过浏览 llvm 邮件列表找到它。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-05-13T11:47:55.820

从 clang [r208683](http://lists.llvm.org/pipermail/cfe-commits/Week-of-Mon-20140512/105330.html)（clang 3.5+）开始，它可以理解`-masm=intel`. 因此，如果您的 clang 足够新，您可以使用它。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-12T03:45:26.757

假设您可以让 Clang 发出正常的 LLVM 字节码，然后您可以使用[llc](http://llvm.org/docs/CommandGuide/llc.html)编译为汇编语言，并使用其`--x86-asm-syntax=intel`选项以 Intel 语法获取结果。

# c++ - 纯虚函数，它是如何工作的

> ID：10990022
> 
> 赞同：1
> 
> 时间：2012-06-12T02:57:18.440
> 
> 标签：c++, virtual-functions

我有一个关于纯虚函数的问题。我不清楚它是如何工作的，以及我们何时需要使用纯虚函数。这是我不明白的例子：

```
file.h

class A
{
public :
            A();
            ~A();

            virtual void func1(void) = 0;
            virtual UINT32 func2(void) = 0;
            UINT32 initialize(void) = 0;
}

file.cpp

UINT32 A:initialize (void)
{
            func1();
            func2();
            return (result);
} 
```

谁能详细解释这个例子实际上做了什么以及结果是什么？我非常感谢您的帮助和知识。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:30:53.157

（注意， for 的声明`initialize()`不应该是虚拟的，并且`initialize()`应该返回的实现`func2()`可能。因为这是一个示例，它实际上并不重要`initialize()`，但它应该正确编译。）

虚函数的主要目的是实现多态性。

类`A`定义了两个纯虚方法，并`initialize`调用它们。这允许程序中的代码在`A`不知道子类的情况下初始化某些类型。可能有许多子类，每个子类在和中的`A`作用可能略有不同。由于只知道的代码有时会通过 初始化不同类型的对象，因此可以称为多态类型。`func1()``func2()``A``A``A`

```
class B : public A {
    void func1 () { std::cout << "B::func1" << std::endl; }
    UINT32 func2 () { return 1; }
};

class C : public A {
    void func1 () { std::cout << "C::func1" << std::endl; }
    UINT32 func2 () { return 2; }
};

void call_initialize (A *a) {
    std::cout << a->initialize()  << std::endl;
}

B b;
C c;
call_initialize(&b);
call_initialize(&c); 
```

输出结果：

```
B::func1
1
C::func1
2 
```

这是多态行为的一个例子，因为输出是不同的，这取决于是否`A`被`B`或子类化`C`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:28:12.653

函数`func1`&`func2`未在 A 中实现（根据显示的代码）。
如果它们被实现，那么它们就会被调用。如果 A 有派生类，并且派生类的对象是多态创建的，即

```
class B : public A
{
 .....
};

A* obj = new B();

obj->initialize(); 
```

如果 B 实现了它们，则调用 B 版本的 func1() 和 func2()。

正如 Ethan 在评论中提到的，您没有从 func2() 获取结果。
所以你需要写

```
UINT32 result = func2(); 
```

或者

```
return func2(); 
```

# php - Codeigniter：表单验证 is_unique 错误未显示

> ID：10990031
> 
> 赞同：0
> 
> 时间：2012-06-12T02:58:46.473
> 
> 标签：php, codeigniter, validation

我正在使用下面的行来检查我的添加用户表单以检查我的数据库中是否不存在电子邮件地址我感觉它工作正常但我无法收到任何错误消息。

```
$this->form_validation->set_rules('userEmail','E-Mail', 'required|valid_email|trim|max_length[99]|xss_clean|is_unique[users.email]'); 
```

在我看来我有`<?php echo validation_errors(); ?>`

我的控制器格式如下：

```
if($this->form_validation->run() === TRUE)
        {
            $userData = array(
                'fName' => $this->input->post('userFirstName', TRUE),
                'lName' => $this->input->post('userLastName', TRUE),
                'email' => $this->input->post('userEmail', TRUE),
                'password' => sha1($this->input->post('userPassword', TRUE))
            );  

            $this->db->escape($userData);
            $this->user_model->addUser($userData);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:50:06.513

我将控制器更改为以下内容：

```
$this->form_validation->set_rules('userEmail','E-Mail', 'required|valid_email|trim|max_length[99]|xss_clean|is_unique[users.email]');
        $this->form_validation->set_rules('userPassword','Password', 'required|trim|max_length[99]|xss_clean');

        if($this->form_validation->run() === TRUE)
            {
                $userData = array(
                    'fName' => $this->input->post('userFirstName', TRUE),
                    'lName' => $this->input->post('userLastName', TRUE),
                    'email' => $this->input->post('userEmail', TRUE),
                    'password' => sha1($this->input->post('userPassword', TRUE))
                );  

                $this->db->escape($userData);
                $this->user_model->addUser($userData);
            }

            $data['contentMangement'] = $this->options_model->systemOptions();
            $data['pageTitle'] = 'Add User';
            $this->load->view('_assets/header', $data);
            $this->load->view('addUser', $data);
            $this->load->view('_assets/footer');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:30:31.123

只需使用 is_unique 预定义的验证规则。传递电子邮件列的表名和列名。

```
$this->form_validation->set_rules('userEmail','E-Mail', 'required|valid_email|trim|max_length[99]|xss_clean|is_unique[users.email]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T12:00:09.817

我们必须以 我的方式为 exp添加到**is_unique的****表名**。

 **```
array(
            'field' => 'email',
            'label' => 'email',
            'rules' => 'trim|required|valid_email|is_unique[users.email]',
            'errors' => array('required'  => 'Please enter a %s.','valid_email' => 'Please enter a valid %s.','is_unique' => 'email already exist.')
        ), 
```

希望你能理解。**

# c# - 检索选定的 ListBoxItem 标记

> ID：10990035
> 
> 赞同：1
> 
> 时间：2012-06-12T02:59:53.570
> 
> 标签：c#, wpf

如何从列表框项中检索标签？我通过从文件中提取值并使用解析的数据生成文本框来构建一个列表，然后我将文本框设为边界的智利。然后我将边框添加到列表框项。所以我想添加一个带有字符串值的标签，然后使用所选项目检索该不可见值。

所以我设置了标签...

```
//created a border above
ListBoxItem item = new ListBoxItem();
item.Tag = path;
item.Content = myBorder;
listBox.Items.Add(item); 
```

现在选择该项目并希望读取该标签，我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:27:23.840

既然你提到你正在使用文本框，你可以尝试这样的事情

```
if(lb.SelectedItem != -1)

    {
        string selectedTagx = ((TextBox)lb.SelectedItem).Tag.ToString();
        //if just a listbox item
         string selectedTagx = ((ListBoxItem)lb.SelectedItem).Tag.ToString();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:25:54.053

您可以将以下内容添加到包含列表框的窗口或用户控件中

```
 public MainWindow()
    {
        InitializeComponent();

        //created a border above
        ListBoxItem item = new ListBoxItem();
        item.Tag = path;
        item.Content = myBorder;
        listBox.Items.Add(item);

        listBox.SelectionChanged += new SelectionChangedEventHandler(listBox_SelectionChanged);
    }

    void listBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        string path = (listBox.SelectedItem as ListBoxItem).Tag as string;
    } 
```

其中“MainWindow()”是窗口或用户控件的构造函数

您还可以在 xaml 中而不是在构造函数中添加事件处理程序

```
<ListBox Height="100" Name="listBox" Width="120"
                 SelectionChanged="listBox_SelectionChanged"/> 
```

# objective-c - AFNetworking HTTP PUT 请求

> ID：10990036
> 
> 赞同：1
> 
> 时间：2012-06-12T02:59:53.913
> 
> 标签：objective-c, afnetworking, http-put

我有以下 API 调用：

```
URL: /api/some-call
Method: PUT
PARAMS: No params 
```

它只是一个简单的 PUT 方法。我正在尝试使用 AFNetworking 来做到这一点，不幸的是，我失败了。这是我现在拥有的：

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSMutableURLRequest *req = [httpClient requestWithMethod:@"PUT" path:@"" parameters:nil];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:req];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Success");
} failure: ^(AFHTTPRequestOperation *operatn, NSError *error) {
    NSLog(@"Failure");
}];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperation:operation]; 
```

然而，这是行不通的。这是为什么？此外，请求中`path`应该包含什么？`PUT`我已经尝试了几件事，这就是我现在所拥有的，我认为*应该*接近正确的。

最后一个问题：`AFNetworking`不使用`ARC`. 这是否意味着我仍然需要在语句`autorelease`的末尾？`NSOperationQueue`

**编辑：** 这是错误`NSLog`：`Failure Error Domain=com.alamofire.networking.error Code=-1011 "Expected status code in (200-299), got 409" UserInfo=0x7a91fb0 {NSErrorFailingURLKey=*the url*/api/some-call, NSLocalizedDescription=Expected status code in (200-299), got 409}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:25:55.863

好。您收到 409 错误代码。

引自[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

> **10.4.10 409 冲突**
> 
> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的
> 
> 供用户识别冲突来源的信息。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题；但是，这可能是不可能的，也不是必需的。
> 
> 响应 PUT 请求时最有可能发生冲突。例如，如果正在使用版本控制并且被 PUT 的实体包含对资源的更改，这些更改与早期（第三方）请求所做的更改相冲突，则服务器可能会使用 409 响应来指示它无法完成请求. 在这种情况下，响应实体可能会以响应 Content-Type 定义的格式包含两个版本之间差异的列表。

这意味着错误是由您的服务器而不是您的代码引起的。除非您提供了一些错误的参数。

好。至于关于“PUT 中的路径应该是什么”的问题。通常我会把 baseURL 作为服务器的域名。这有点像

```
http://localhost 
```

然后我会把路径变成类似的东西

```
@"the/rest/of/the/api/url" 
```

那么只需切换 baseURL 就可以更轻松地在开发服务器和生产服务器之间切换。:)

对于您的最后一个问题，“AFNetworking 不使用 ARC。这是否意味着我仍然需要在 NSOperationQueue 语句末尾自动释放？”

这是否意味着您的项目正在使用 ARC 和 AFnetworking，或者 AFNetworking 没有 ARC。

如果是带有 AFNetworking 的 ARC，则不必这样做。看看这个 [https://github.com/AFNetworking/AFNetworking#arc-support](https://github.com/AFNetworking/AFNetworking#arc-support)

如果它不是带有 AFNetworking 的非 ARC，则您基本上必须自己完成所有内存管理。:) 如果您需要更多信息，请再次联系我，我会相应地进行编辑。:)

希望我在某种程度上有所帮助。

# forms - Drupal 7：在查看节点中有一个编辑字段

> ID：10990038
> 
> 赞同：1
> 
> 时间：2012-06-12T03:00:07.747
> 
> 标签：forms, drupal, drupal-7, field

我有一个内容类型，它只能对某个角色可见（不可编辑）。我已经完全自定义了表单输出（手动输出每个字段，因为它们以某种方式显示）。

但是，我希望该用户能够“编辑”**一个字段，这是我创建的自定义“修订评论”字段。**我可以在表单字段中进行硬编码，当然，如果没有 Drupal 生成的令牌、构建 ID 等，它将无法工作，如下所示：

```
<input type="hidden" name="form_build_id" value="<?php print render($form['#build_id']); ?>">
<input type="hidden" name="form_token" value="<?php print drupal_get_token($form['#token']); ?>">
<input type="hidden" name="form_id" value="<?php print render($form['#form_id']); ?>"> 
```

所以基本上我想知道我可以使用什么解决方法，因为 $form 和它的变量显然只在“编辑”节点时生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T13:57:52.153

如果其他人需要知道，我将其硬编码到模板文件中并且它可以工作：

```
<form class="node-form node-project-form" action="/dashboard" method="post" id="project-node-form" accept-charset="UTF-8">
  <input type="hidden" name="nid" value="<?php print $nodeid; ?>">
  <input type="hidden" name="uid" value="<?php print $user->uid; ?>">
  <div id="revision-comments" style="margin:0">
    <label for="log-comments">Log Message</label>
    <textarea id="log-comments" name="log_comments"" cols="60" rows="4" class="form-textarea"></textarea>
  </div>
  <input type="submit" id="edit-submit" name="op" value="Post Comment" class="form-submit">
</form> 
```

# google-maps - *一些*地标未出现在简单的 KML 中

> ID：10990039
> 
> 赞同：2
> 
> 时间：2012-06-12T03:00:40.470
> 
> 标签：google-maps, google-maps-api-3, kml, google-earth-plugin

这是一个链接作为示例：

[http://goo.gl/maps/s76T](http://goo.gl/maps/s76T)

非常直接的 KML，一些地标 (#10-21) 根本没有显示在地图上。我对 KML 不是很熟悉，但是我一直在阅读、调试和搜索这个问题，但无法弄清楚。图标链接看起来不错，如果我删除大部分其他的地标（比如取出 22-44），地标 #10-21 就会出现。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:29:39.690

谷歌地图在应用 KML 模式规则方面比谷歌地球严格得多。这是 KML 模式所在的位置：http: [//schemas.opengis.net/kml/2.2.0/ogckml22.xsd](http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd)。命名空间将您的 KML 标识为 2.0 版，该版本从未有过官方规范。当前的官方版本是 KML 2.2。2.2 命名空间是“http://www.opengis.net/kml/2.2”。

一般来说，如果您重组 KML 地标，它应该可以工作。几何图形（您的 Point 元素）应该是 Placemark 元素中的最后一件事。对于您正在使用的元素，顺序应该是：

名称 描述 样式 点

此外，没有`creator`属性，您应该`atom:author`在 Document 标签下使用一个元素： [https ://developers.google.com/kml/documentation/kmlreference#atomauthor](https://developers.google.com/kml/documentation/kmlreference#atomauthor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:51:15.753

我发现这个验证器很有用但很烦人：[KML Validator](http://kmlvalidator.com/home.htm)。`<description>`您的标签不在旁边似乎确实有问题`<name>`。

据我所知，您应该引用一种样式，而不是将其包含在点定义中。请参阅：[KML 参考](https://developers.google.com/kml/documentation/kmlreference#style)

谷歌地球不是构建这些的好地方；不仅许多事情的显示方式不同，根据我的经验，它还会破坏您的标签。

至于具体回答您的问题：不太清楚为什么会发生这种情况。尝试为您的积分重新命名或分配 ID，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:14:26.190

这是在 Google 地图上进行 KML 渲染的一个已知问题。提交了一个内部错误，但还没有解决方案的时间表。

# c++ - 从 C++ 中的随机访问文件读取访问冲突

> ID：10990040
> 
> 赞同：0
> 
> 时间：2012-06-12T03:00:41.503
> 
> 标签：c++, file, random, binary, access-violation

我正在制作的这部分程序应该打印出存储在随机访问二进制文件中的所有记录。每次我运行它时，它都会打印出所有记录，然后抛出访问冲突异常：

```
void readFile()
{
    ifstream inFile("hardware.txt", ios::in | ios::binary);

    if(!inFile)
    {
        cerr<<"File could not be opened."<<endl;
        exit(1);
    }

    cout<<left<<setw(10)<<"Account"<<setw(16)
            <<"Name"<<setw(11)<<"Quantity"<<left<<setw(10)<<"Price"<<endl;

    Hardware File;

    inFile.read(reinterpret_cast<char *>(&File), sizeof(Hardware));

    while(inFile && !inFile.eof())
    {
        if(File.getAccountNumber() != 0)
            outputLine(cout, File);

        inFile.read(reinterpret_cast<char *>(&File), sizeof(Hardware));
    }
} 
```

澄清一下，“硬件”是存储在 Hardware.h 中的一个类。

硬件.h

```
#ifndef HARDWARE_H
#define HARDWARE_H

#include <string>
using std::string;

class Hardware
{
public:
Hardware (int = 0, string = "", int = 0, double = 0);

void setAccountNumber(int);
int getAccountNumber() const;

void setName(string);
string getName() const;

void setAmount(int);
int getAmount() const;

void setPrice(double);
double getPrice() const;
private:
int accountNumber;
string name;
int amount;
double price;
};

#endif 
```

硬件.cpp

```
#include <string>
using std::string;

#include "hardware.h"

Hardware::Hardware(int accountNumberValue, string nameValue, int amountValue, double priceValue)                            

{
setAccountNumber(accountNumberValue);
setName(nameValue);
setAmount(amountValue);
setPrice(priceValue);
}

void Hardware::setAccountNumber(int accountValue)
{
accountNumber = accountValue;
}

int Hardware::getAccountNumber() const
{
return accountNumber;
}

void Hardware::setName(string nameValue)
{
name = nameValue;
}

string Hardware::getName() const
{
return name;
}

void Hardware::setAmount(int amountValue)
{
amount = amountValue;
}

int Hardware::getAmount() const
{
return amount;
}

void Hardware::setPrice(double priceValue)
{
price = priceValue;
}

double Hardware::getPrice() const
{
return price;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:40:46.957

正如约阿希姆所说，你不能读到`std::string`那样的东西。

它不是值类型；在内部，它将保存一个指向包含其文本的内存区域的指针。如果您从文件中读取随机二进制块，则该字符串指针可能指向任何地方；取消引用它（例如，通过获取或设置 'name' 的值）可能会引发访问冲突或段错误或其他任何问题。

我会添加几个新方法，像这样（不保证编译或工作！​​）：

```
void Hardware::Serialise(std::ostream& stream) const
{
  stream << accountName << "\n" << accountNumber << "\n" << accountValue << std::endl;
}
void Hardware::Deserialise(std::istream& stream)
{
  char[1024] buffer;
  stream.readsome(buffer, 1024);
  accountName = buffer;
  buffer >> accountNumber >> accountValue;
} 
```

了解对象的内部结构是正确（反）序列化它的关键。处理失败条件、记录间分隔符和使用字符串流而不是固定大小的缓冲区来读取名称，留给读者作为练习。

# ios - 我可以在原生 iOS 应用程序和后端之间共享 Facebook 身份验证吗？

> ID：10990041
> 
> 赞同：3
> 
> 时间：2012-06-12T03:00:43.017
> 
> 标签：ios, facebook, authentication

我正在开发一个涉及原生 iOS 客户端和 Web 后端（如果重要，是 Padrino 应用程序）的项目。我的 Facebook 身份验证对任何一个都可以正常工作；但如果可能的话，我希望用户使用 Facebook 的 iOS SDK 使用本机应用程序登录，然后让这种身份验证以某种方式一直到达我的服务器。另一种方法似乎是要求用户使用 Facebook 登录*两次*，我敢肯定这是不对的。

这可能吗？或者，解决这个问题的标准方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:04:30.847

我以前做过这个，这不是问题。一旦您在 iOS 客户端中获得了正确的令牌，您应该能够与您的服务器共享这些令牌以允许它执行相同的请求。请注意如何将这些敏感令牌发送到您的服务器！

# video-streaming - 如何在 Wowza 中发布 rtmp 流？

> ID：10990044
> 
> 赞同：4
> 
> 时间：2012-06-12T03:00:50.407
> 
> 标签：video-streaming, wowza

我想从 rtmp://someothersite.com/live/ 发布一个 rtmp 流并将 m3u8 流传送到 ios 和 android 设备。

我决定使用 Wowza 并按照本文[http://www.wowza.com/forums/content.php?36进行了一些设置](http://www.wowza.com/forums/content.php?36)

有：

```
Publishing the stream (RTMP based encoder)

Enter the Server URL and Stream Name information below and click the Publish or Start button on the encoder:

Server URL: rtmp://[wowza-address]/live
Stream Name: myStream 
```

我想知道我需要在哪里输入服务器 url 和名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:09:52.317

我认为你可以用两种方式做到这一点。我知道您想从其他任何地方获取流，并希望通过您的 wowza 服务器进行流传输，或者想保存 X 流并开始通过 wowza 重新传输。

第一种方式，你可以通过ffmpeg获得直播

```
ffmpeg -i rtmp://remoteXstreamFromAnyWhereElse/playlist/first -f flv 
```

rtmp://yourWowzaIp:1935/live/now 。

从现在开始，您使用 ffmpeg 进行流式传输并将其重新流式传输到 wowza 。在实时示例中，您可以很好地到达您的“现在”流。

另一个是ffmpeg

```
ffmpeg -i rtmp://remoteZstream/StreamsName/fileName -vcodec copy -acodec copy 
```

-f 新的.avi

另一个 cmd 命令是这样的

```
ffmpeg -i video="new.avi" -r 30 -b:v 128k -f flv rtmp://wowzaIp/live/now2 
```

另一种方式是[对我来说最好的方式]

在 C:\Program Files\Wowza Media Systems\Wowza Media Server 3.1.2\conf 中编辑 xml StartupStream

将以下行添加到

```
<StartupStreams><StartupStream><Application>live/_definst_</Application<MediaCasterType>rtp</MediaCasterType><StreamName>rtsp://yourRemoteZReStreamingProviderServer/App/File<StreamName> </StartupStream> 
```

然后重新启动 wowza 服务器。您可以在控制台中看到流开始。最快的方法是重新流式传输 anystream 。欲了解更多信息，请在 wowza 找到 rlanham。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:27:22.240

您需要下载一个 RTMP 编码器。试试这个： http: [//www.adobe.com/products/flash-media-encoder.html](http://www.adobe.com/products/flash-media-encoder.html)

# c++ - OpenCV - API 位置不是文档吗？

> ID：10990050
> 
> 赞同：3
> 
> 时间：2012-06-12T03:01:37.777
> 
> 标签：c++, windows, opencv

也许我已经被 MSDN 宠坏了，但是我正在寻找 API 位于哪些 DLL 中。这让我发疯了，我已经开始编写一些代码来完成 DLL 导出表，所以我可以找到功能！

就像在 MSDN 上一样，如果我需要一个 Windows 函数，例如 GetModuleHandle()。我去 MSDN 页面：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx)

它告诉我函数的确切位置：

```
Library - Kernel32.lib
DLL - Kernel32.dll 
```

现在对于 OpenCV，我正在寻找函数 cvCreateKalman() 所在的库和 DLL。我根本无法在他们的文档中找到它。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:39:00.587

不幸的是，OpenCV 文档没有该信息，但在 Windows 上，您可以使用[`dumpbin`](http://support.microsoft.com/kb/177429)列出 DLL 的所有导出符号：

```
dumpbin /EXPORTS libopencv_core.dll 
```

这几乎就是[`nm`](http://www.thegeekstuff.com/2012/03/linux-nm-command/)Linux 的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:25:05.660

OpenCV 文档分为模块。 [http://opencv.itseez.com/index.html](http://opencv.itseez.com/index.html)

搜索“卡尔曼”，你会发现它在“视频”模块内。

请注意，它会在版本之间发生变化，因此如果您使用旧版本，请查看此处： http: [//opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

# ruby-on-rails - 在 Rails 3.2.4 中冻结的数组

> ID：10990051
> 
> 赞同：2
> 
> 时间：2012-06-12T03:01:42.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我最近将一个 Rails 应用程序从 3.0.4 更新到 3.2.4，但我遇到了一个奇怪的问题。似乎我的应用程序中的每个数组都已冻结。例如，如果一个数组从数据库中获取一组文章，则该数组将在第一次调用该方法时被实例化并且不会改变。如果数组中的一篇文章在数据库中被删除，它仍然会在数组中引用它。只有当我重新启动服务器时它才会改变。但是，当我调用array.frozen 时？它返回假。当我部署到heroku时，我得到了这个错误：

！！处理请求时出现意外错误：无法修改冻结数组

关于可能导致这种情况的任何建议？我更新了另一个应用程序并没有遇到这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:10:16.067

好吧，我让它工作了。我跑了`heroku run script/rails console`，它给了我一个我还没有看到的新错误。原来在我的环境/production.rb 文件中有一行随机代码，它一定是被意外复制和粘贴的。删除它后，它清除了冻结的阵列问题。在一些不相关的 gem 问题之后，我能够让我的网站重新上线。所以我的建议是检查你的 production.rb 文件并运行 heroku 控制台。

# linux - `which git` 似乎在撒谎？

> ID：10990052
> 
> 赞同：7
> 
> 时间：2012-06-12T03:01:47.390
> 
> 标签：linux, macos

谁能解释一下？ `which git`好像在撒谎……

```
$ which git
/usr/local/bin/git

$ /usr/local/bin/git --version
git version 1.7.9.2

$ git --version
git version 1.7.10.4 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T03:07:14.760

尝试`git`使用以下命令从用于路径查找的 bash 哈希表中刷新：

`hash -d git`

然后再试一次。

*参考文章：*

*   [Linux 或 UNIX 如何理解运行哪个程序 - 第 I 部分](http://www.cyberciti.biz/tips/how-linux-or-unix-understand-which-program-to-run-part-i.html#hashtables)。
*   [在 bash 中，“which”给出了不正确的路径 - Python 版本](https://stackoverflow.com/a/7747378/573083)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:06:52.613

如果您使用`bash`then`type -a`是一个更好的选择，因为它还显示别名，不像`which`.

# python - 检查Python中的密码和用户名输入是否匹配？

> ID：10990053
> 
> 赞同：0
> 
> 时间：2012-06-12T03:01:54.950
> 
> 标签：python, tkinter, tkinter-entry

我做了一个小程序，它会询问你的密码和用户名。输入详细信息后，它应该检查密码和用户名是否正确。我该如何接近并做到这一点？

```
from tkinter import *
from getpass import getpass

def callback():
    print(E1)()

top = Tk()
L1 = Label(top, text="User Name")
L1.grid(row=0, column=0)
E1 = Entry(top, bd = 5)
E1.grid(row=0, column=1)

L1 = Label(top, text="Password")
L1.grid(row=1, column=0)
E1 = Entry(top, bd = 5,show="•")
E1.grid(row=1, column=1)

MyButton1 = Button(top, text="Submit", width=10, command=callback)
MyButton1.grid(row=3, column=1)

top.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:09:21.727

这里有一些代码演示了 getpass 的使用以及如何检查用户提供的密码和散列密码。这忽略了许多问题，例如加盐哈希、存储身份验证数据的适当位置、您需要支持多少用户等。

```
import getpass, hashlib

USER = 'ali_baba'
# hashlib.md5('open sesame').hexdigest()
PASSWORD_HASH = '54ef36ec71201fdf9d1423fd26f97f6b'

user = raw_input("Who are you? ")
password = getpass.getpass("What's the password? ")
password_hash = hashlib.md5(password).hexdigest()

if (user == USER) and (password_hash == PASSWORD_HASH):
    print "user authenticated"
else:
    print "user authentication failed" 
```

如果您不想将用户名存储在代码中，可以这样做：

```
# hashlib.md5('ali_baba:open sesame').hexdigest()
AUTH_HASH = '0fce635beba659c6341d76da4f97212f'
user = raw_input("Who are you? ")
password = getpass.getpass("What's the password? ")
auth_hash = hashlib.md5('%s:%s' % (user, password)).hexdigest()
if auth_hash == AUTH_HASH:
    print "user authenticated"
else:
    print "user authentication failed" 
```

# html - 图片在 Safari 和 Chrome 中的拉伸

> ID：10990056
> 
> 赞同：1
> 
> 时间：2012-06-12T03:02:11.030
> 
> 标签：html, css, firefox, google-chrome, safari

我正在展示很多广告图片。在Firefox中它工作正常。但在 safari 和 chrome 中，它显示了一些拉伸图像。此处附有一个示例。有人知道如何解决这个问题吗？

![火狐](../Images/7e99fc15b1b0117bfe7c96866024ec4f.png)

![Safari 和铬](../Images/092de22e5075c69d01af9b61b4e261b8.png)

我的代码就像，

```
 <style>  
    #globalpsa {
    width:100%;
    height:100%;
    border:3px double #fff;
    margin:2% auto;
    }
   #globalpsa input[type="image"] {
    width:100%;
    height:100%;
    }
    </style>

    <div id="globalpsa">
    <a> 
     <input type="image" src="/images/advert_images/ban2.jpg" alt="globalpsa"    
     name="globalpsa"/>          
     </a>
     </div> 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:04:08.903

删除高度并检查图像。默认情况下，图像是成比例的。

```
<style>  
 #globalpsa {
  width:100%;
  /* height:100%; remove this */
  border:3px double #fff;
  margin:2% auto;
 }
 #globalpsa input[type="image"] {
  width:100%;
  /* height:100%; remove this */
 }
</style> 
```

# visual-studio - Visual Studio 如何在“解决方案文件夹”中查找文件

> ID：10990058
> 
> 赞同：4
> 
> 时间：2012-06-12T03:02:38.583
> 
> 标签：visual-studio

我使用“添加”>“新解决方案文件夹”在 Visual Studio 中创建了一个虚拟文件夹，然后在其中添加了很多项目，有什么方法可以在该特定虚拟文件夹中的所有项目中找到文本，即“解决方案文件夹” 而不是在 VS 提供的任何其他位置选项中，例如“当前项目”、“整个解决方案”和“所有打开的文档”？因为我有一个很大的解决方案，但是一个很小的“解决方案文件夹”，所以我想快速得到搜索结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-24T16:02:36.043

抱歉回复晚了...

如果您准备付款，我强烈建议您使用 Resharper。我个人可以没有它。

使用此工具，您有很好的搜索选择。

我最近面临同样的问题；在解决方案资源管理器中搜索特定文件夹而不是类型。

这是搜索的功能：

[![在此处输入图像描述](../Images/d1dd8d404106185be43f821061c2e4cb.png)](https://i.stack.imgur.com/p38Vh.png)

然后输入你的文件夹...

[![在此处输入图像描述](../Images/16e77dc54c69182984d9d7b7116d86de.png)](https://i.stack.imgur.com/ih6zc.png)

在下拉列表中选择文件夹后，在解决方案资源管理器中选择了指定的文件夹。

# iphone - ios5滑动手势

> ID：10990060
> 
> 赞同：0
> 
> 时间：2012-06-12T03:02:46.320
> 
> 标签：iphone, ios, swipe-gesture

我目前正在编写一个 ios5 应用程序并使用按钮调用两个函数（返回）和（下一步）。我想用滑动手势给他们打电话。

那可能吗？怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:11:40.593

对右方向（下一个按钮）和左方向（后退按钮）使用滑动手势对于左方向：

```
UISwipeGestureRecognizer *swipeLeft =[[UISwipeGestureRecognizer alloc]
    initWithTarget:self action:@selector(didSwipeLeft:)];
swipeLeft.direction=UISwipeGestureRecognizerDirectionLeft;
swipeLeft.numberOfTouchesRequired = 1;
[self.view addGestureRecognizer:swipeLeft];
[swipeLeft release]; 
```

对于正确的方向：

```
UISwipeGestureRecognizer *swipeRight =[[UISwipeGestureRecognizer alloc]
    initWithTarget:self action:@selector(didSwipeRight:)];
swipeRight .direction=UISwipeGestureRecognizerDirectionRight;
swipeRight .numberOfTouchesRequired = 1;
[self.view addGestureRecognizer:swipeRight ];
[swipeRight release]; 
```

你用事件处理它们：

```
 -(void)didSwipeRight
 {
   //For right direction (next button)
 }

  -(void)didSwipeLeft
 {
   //For left direction (back button)
 } 
```

# html - 删除有序列表的左侧间距 (OL)

> ID：10990064
> 
> 赞同：11
> 
> 时间：2012-06-12T03:03:34.657
> 
> 标签：html

默认情况下，有序列表如下所示：

![在此处输入图像描述](../Images/dbd73c2d0c28bee6331264b184a6e7fa.png)

列表左侧有一些间距。有什么办法可以消除这些间距？

这是我想要的：

![在此处输入图像描述](../Images/7a4bfea825fe4c27bf82ff9e9a2b924c.png)

在我的网站上，字体系列和字体大小将由用户动态更改。因此我无法预设 padding-left。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T03:06:51.390

> 在我的网站上，`font-family`和`font-size`将由用户动态更改。因此我无法预设`padding-left`.

为什么这会阻止你使用`padding-left`？当您想要覆盖浏览器的默认样式表时，它绝对是正确的工具。

```
ul {
   padding-left: 0;
   /* If you want you can change the list type from inside or outside */
   list-style: inside decimal;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-12T05:58:44.820

您应该能够将 em 用于可缩放的大小（而不是固定的 px 大小）。这将允许缩放字体大小，但在应用填充时匹配缩放大小。

```
ol { padding-left: 1.8em; } 
```

这是一个[jsfiddle](http://jsfiddle.net/3qTv7/)来说明。将字体大小更改`body`为不同的缩放大小（尝试 1em、2em 等），您会看到该段落与`ol`左侧的匹配。

您可能会发现浏览器以不同的尺寸呈现。1.8em，适用于 Chrome，但对于 Firefox 或 IE，它可能需要 1.6em 或 1.9em。Web 的特点是它是流动的和可扩展的，因此追求像素精度，尤其是在使用用户可缩放的字体时几乎总是没有双赢的局面。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-12T04:22:59.977

```
ol, ol li { margin-left: 0; padding-left: 0; }
ol { margin-left: 1.3em; } 
```

左边的默认间距可能是由 or 的左边距或左边距，`ol`或`li`它们的组合引起的（取决于浏览器）。因此，要获得一些特定的间距，请将所有这些属性设置为零，但其中一个属性设置为您喜欢的值。请注意，此间距需要足够大以容纳列表标记（数字），否则它们将不会出现或将被截断。的值`1.3em`（即字体大小的 1.3 倍）应该对它们适当大，并且在它们的左侧留下很少或没有额外空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T03:05:57.140

是的，默认情况下它将是 40 像素。使用 CSS：

```
ul {padding-left: 1.5em; list-style: decimal;} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T03:25:22.987

如果要确保列表与其父容器的左边界齐平，请使用您自己的列表项目符号图像。

您可以使用以下 CSS 自定义您的 UL：

```
UL {
  margin-left: 0;
  list-style: none outside url("myImage.png");
} 
```

希望这可以帮助！:)

# php - 如何在不干扰我的页面的情况下正确实施 mysite.com/username？

> ID：10990066
> 
> 赞同：2
> 
> 时间：2012-06-12T03:03:53.933
> 
> 标签：php, mysql, url

这一直让我感到困惑，我理解“漂亮 URL”的概念，但无法掌握如何在不妨碍网站布局的情况下实现这一点。

我知道我不能允许人们使用“消息”之类的用户名，因此它不会干扰 /messages 页面，但是我不知道稍后我将添加到我的网站的页面类型......所以例如，如果我想拥有 mysite.com/hub/（我不是 hub.mysite.com 的粉丝）并且有人注册了名称“hub”，我该怎么办？我只是在这一点上搞砸了，需要重命名它还是强制用户更改他们的名字？如果有人可以就我应该如何正确处理这个问题给我建议，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:08:19.930

我也认为这种方法有问题。代替 mysite.com/some-user，mysite.com/users/some-user 怎么样？这样他们就不会干扰您网站的其他部分。

# asp.net - IIS 停止工作

> ID：10990069
> 
> 赞同：0
> 
> 时间：2012-06-12T03:04:18.257
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, iis-7

我正在使用 (C#) 和 (ASP.NET Web API) 和 MS SQL 2008 R2 开发 Web 应用程序，并在 Windows Server 2008 的 IIS7 上托管，所有 API 都以 JSON 格式返回数据

当我从任何 Web 浏览器调用任何 API 并在第一次调用完成之前刷新页面以再次调用时，它会在事件查看器中给我警告，并且在 0 到 5 分钟后，II7 中的工作进程停止了大约 2 分钟（挂起）和在这 2 分钟内来自所有用户的所有 API 调用都不起作用，事件查看器给我一个错误：

**事件查看器中的警告**

```
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 6/5/2012 3:29:10 PM 
Event time (UTC): 6/5/2012 1:29:10 PM 
Event ID: 63adcb812864465cab58e9f870bcbb92 
Event sequence: 5 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/2/ROOT/AAA-2-129833765408950000 
    Trust level: Full 
    Application Virtual Path: /AAA
    Application Path: C:\inetpub\wwwroot\AAA\ 
    Machine name: MyMachine

Process information: 
    Process ID: 9860 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE 

Exception information: 
    Exception type: HttpException 
    Exception message: The remote host closed the connection. The error code is 0x800704CD.
   at System.Web.Http.WebHost.HttpControllerHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Request information: 
    Request URL: My API URL
    Request path: API Path 
    User host address: My IP 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: NT AUTHORITY\NETWORK SERVICE 

Thread information: 
    Thread ID: 8 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
    Is impersonating: False 
    Stack trace:    at System.Web.Http.WebHost.HttpControllerHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

**事件查看器中的错误**

```
An unhandled exception occurred and the process was terminated.

Application ID: /LM/W3SVC/2/ROOT/AAA

Process ID: 9860

Exception: System.AggregateException

Message: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread.

StackTrace:    at System.Threading.Tasks.TaskExceptionHolder.Finalize()

InnerException: System.Web.HttpException

Message: The remote host closed the connection. The error code is 0x800704CD.

StackTrace:    at System.Web.Http.WebHost.HttpControllerHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:57:19.157

公共类内容控制器：ApiController { 动态 json = new JsonObject();

```
 // GET /api/v1/content      
    [HttpGet]
    public IEnumerable<ME_API_V1.Models.Content> GetContent()
    {
        Request.Headers.Add("Accept", "application/json");
        List<ZMSLibrary.ME.Models.Content> contentList = new List<ZMSLibrary.ME.Models.Content>() ;
        try
        {
            //DateTime CurrentDateTime = DateTime.Now;

            var querystring = this.Request.RequestUri.Query;
            var parameters = HttpUtility.ParseQueryString(querystring);

            string userID = parameters["userID"];
            string countryCode = parameters["countryCode"];
            string language = parameters["language"];
            string categoryName = parameters["categoryName"];
            string subcategoryID = parameters["subcategoryID"];
            string count = parameters["count"];
            string start = parameters["start"];
            string platform = parameters["platform"];
            string imageSize = parameters["imageSize"];

            //Check IP Restiriction
            Restriction restiriction = new Restriction(ConfigurationManager.ConnectionStrings["AppSQLConnection"].ToString());
            bool allowedCheck = restiriction.IsUserAllowed(userID);
            if (!allowedCheck)
            {
                dynamic json = new JsonObject();
                json.message = "Authorized Only for Mobinil in Egypt";
                var msg = new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden);
                msg.Content = new StringContent(json.ToString());
                msg.Content.Headers.ContentType.MediaType = "application/json";
                throw new HttpResponseException(msg);
            }
            else
            {

                //Validate input data
                if (InputValidation.isValidUserid(userID) &&
                    InputValidation.isValidCountryCode(countryCode) &&
                    InputValidation.isValidLanguage(language) &&
                    InputValidation.isValidCategory(categoryName) &&
                    InputValidation.isValidUserid(subcategoryID) &&
                    InputValidation.isValidPlatform(platform)
                    )
                {
                    if (!InputValidation.isValidImageSize(imageSize))
                    {
                        imageSize = "high";
                    }

                    if (!InputValidation.isValidUserid(count) || !InputValidation.isValidUserid(start))
                    {
                        start = WebConfigurationManager.AppSettings["DefaultStart"];
                        count = WebConfigurationManager.AppSettings["DefaultCount"];
                    }

                    ContentOperations contentOperations = new ContentOperations();
                    contentList = contentOperations.getContent(subcategoryID, categoryName, count, start, countryCode, userID, ConfigurationManager.ConnectionStrings["AppSQLConnection"].ToString(), WebConfigurationManager.AppSettings["FileFolderName"], imageSize, language, platform);
                    if (contentList != null)
                    {
                        List<ME_API_V1.Models.Content> contentOutputList = new List<ME_API_V1.Models.Content>();
                        foreach (ZMSLibrary.ME.Models.Content c in contentList)
                        {
                            File tempFile = new File();
                            ME_API_V1.Models.Content cTemp = new ME_API_V1.Models.Content();
                            cTemp.contentID = int.Parse(c.ContentID);
                            if (c.Rating == "1")
                                cTemp.userRating = "Like";
                            else if (c.Rating == "0")
                                cTemp.userRating = "Dislike";

                            cTemp.date = String.Format("{0:G}", c.ContentDate);

                            //if (c.Provider.ContentProviderName != "")  //to make the value null instead of ""
                            cTemp.providerName = c.Provider.ContentProviderName;
                            //if (c.Provider.ContentProviderIcon != "")
                            cTemp.providerIconURL = c.Provider.ContentProviderIcon;
                            //if (c.Provider.ContentProviderImage != "")
                            cTemp.providerImageURL = c.Provider.ContentProviderImage;

                            if (language == "AR")
                            {
                                //if (c.ContentArabicTitle != "")
                                cTemp.title = c.ContentArabicTitle;
                                //if (c.ContentArabicSubTitle != "")
                                cTemp.subtitle = c.ContentArabicSubTitle;
                                //if (c.ContentArabicDescription != "")
                                cTemp.description = c.ContentArabicDescription;
                            }
                            else
                            {
                                //if (c.ContentEnglishTitle != "")
                                cTemp.title = c.ContentEnglishTitle;
                                //if (c.ContentEnglishSubTitle != "")
                                cTemp.subtitle = c.ContentEnglishSubTitle;
                                //if (c.ContentEnglishDescription != "")
                                cTemp.description = c.ContentEnglishDescription;
                            }

                            if (categoryName == "Music")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Clip_High")
                                        tempFile.highVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Clip_Low")
                                        tempFile.lowVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Tone")
                                        tempFile.toneURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Song")
                                        tempFile.songURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "YouTube")
                                        tempFile.youtubeID = cf.ContentFileName;

                                }

                            }
                            else if (categoryName == "News")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;

                                }

                            }
                            else if (categoryName == "Videos")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Video_High")
                                        tempFile.highVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Video_Low")
                                        tempFile.lowVideoURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "YouTube")
                                        tempFile.youtubeID = cf.ContentFileName;

                                }

                            }
                            else if (categoryName == "Applications")
                            {
                                foreach (ContentFile cf in c.ContentFiles)
                                {
                                    if (cf.FileType.FileTypeName == "Icon")
                                        tempFile.iconURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "Image")
                                        tempFile.imageURL = cf.ContentFileName;
                                    else if (cf.FileType.FileTypeName == "App_Android" || cf.FileType.FileTypeName == "App_Nokia" || cf.FileType.FileTypeName == "App_Blackberry" || cf.FileType.FileTypeName == "App_iPhone")
                                    {                                           
                                            tempFile.appURL = cf.ContentFileName;                                               
                                    }

                                }

                            }

                            cTemp.files = tempFile;
                            contentOutputList.Add(cTemp);
                        }
                        return contentOutputList;

                    }

                }

                if (contentList == null)
                    throw new Exception();
                else
                {
                    json.message = "Wrong or missing data";
                    var msg = new HttpResponseMessage(System.Net.HttpStatusCode.BadRequest);
                    msg.Content = new StringContent(json.ToString());
                    msg.Content.Headers.ContentType.MediaType = "application/json";
                    throw new HttpResponseException(msg);
                }
            }

        }       
        catch (Exception ex)
        {
            if (ex is HttpResponseException)
            {
                throw;
            }
            else
            {
                json.message = "Error in System";
                var msg = new HttpResponseMessage(System.Net.HttpStatusCode.InternalServerError);
                msg.Content = new StringContent(json.ToString());
                msg.Content.Headers.ContentType.MediaType = "application/json";
                throw new HttpResponseException(msg);
            }
        }

    }

} 
```

# c# - 我在 ViewModel 中的哪里调用模型？

> ID：10990070
> 
> 赞同：3
> 
> 时间：2012-06-12T03:04:20.587
> 
> 标签：c#, wpf, mvvm

我正在学习 MVVM。

我的 View 填充了 ViewModel 中 ObservableCollection 属性的两个组合框（例如属性“ **Oc1** ”和“ **Oc2** ”）。我还有一个属性绑定到**Oc2**所依赖的**Oc1**的选定项（例如属性“ **SelVal** ”） ，因此当属性**SelVal**更改时，**Oc2**需要从数据库中重新获取它的数据。

 ******现在，我想出了一个解决方案，它适用于我的情况，但似乎不遵守*获取*访问器的原则，所以我想知道我可能会遇到什么问题，什么是更好的解决方案？

我目前的解决方案是：

**Oc2**的*get*访问器查询数据库并将其私有字段设置为从数据库返回的值（视图使用该值）。因此，当**SetVal**更改时，我只需在**SetVal***集合访问器中调用 this.RaisePropertyChanged("* **Oc2** ") ，然后视图会请求**Oc2**，后者又会查询数据库并返回更新后的列表。问题是我没有使用*get*访问器来实现它的用途，因为我在其中分配了它的价值。但我喜欢它的是它是自包含的（即我不需要一个“BindOc2”方法，我必须在构造函数中调用，然后在 SelVal*集中再次调用* *************存取器）。请指教。还有什么更好的方法？*************

 ********** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:00:38.527

您的怀疑是正确的，这种方式破坏了 MVVM 模型并且无法使用可以简化您的工作的机制，例如[Expression Blend SDK](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=10801)中可用的[System.Windows.Interactivity](http://msdn.microsoft.com/en-us/library/system.windows.interactivity%28v=expression.40%29.aspx)中的触发器。

在 getter 中加载数据是自找麻烦。它将您的模型绑定到数据访问代码，通过在同一属性中混合不同的关注点，使测试更加困难并且代码更加复杂。此外，墨菲定律规定，在某些时候您只想设置属性而不从数据库重新加载。

更好的解决方案是在可以由命令或触发器调用的单独方法中提取数据加载代码。此方法将修改 Oc2 集合的内容或简单地将其替换为新集合。在任何情况下，属性设置器都会发出正确的通知，并且第二个组合将被更新。

以下示例来自[fabien](https://stackoverflow.com/questions/950501/how-do-you-handle-a-combobox-selectionchanged-in-mvvm/5825183#5825183)在类似 SO question 中的回答：

```
<ComboBox x:Name="fileComboBox" ItemsSource="{Binding FileList, Mode=TwoWay}">                  
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="SelectionChanged">
                <i:InvokeCommandAction 
                        Command="{Binding SelectionChangedCommand}"
                        CommandParameter="{Binding SelectedItems,           
                        ElementName=fileComboBox}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>

    </ComboBox> 
```

大多数框架都支持这种设计。[Caliburn.Micro](http://caliburnmicro.codeplex.com/)提供 了在 UI 事件发生时将调用 ViewModel 方法的[操作](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Actions&referringTitle=Documentation)，以及避免编写触发器 XAML 和相应命令的快捷语法。它只是将事件连接到 ViewModel 方法。XAML 可以像这样简单：

```
<ComboBox x:Name="Oc1" 
    cal:Message.Attach="[Event SelectionChanged] = 
                        [Action ReloadFor($this.SelectedItem)]" /> 
```

该`$this`值是引用 ComboBox 本身的另一个速记。

如果您不想使用触发器，可以将组合的 SelectedItem 属性绑定到 ViewModel 属性，并在此属性更改时执行 Reload 方法，例如：

```
<ComboBox ... SelectedItem={Binding CurrentOC2,Mode=TwoWay} /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:30:51.000

我理解你的沉默，因为是的，为不同的属性提高 PropertyChanged 感觉有点笨拙，但恕我直言，这还不错。

一种更自然的方法是让您的数据库拉入`SelVal`setter，因为这是触发数据更改的原因。然后，您将结果设置`Oc2`为将自动提高 a 的结果`PropertyChanged`。

唯一的问题是，如果您的 Oc2 getter 从未被访问过，您可能会不必要地提取 db 结果，但鉴于您知道您的视图将始终需要它们，我很想更改为此解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T03:24:18.137

你这样做的方式很好。属性 set 和 get 方法通常适用于这种 Binding

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T05:09:13.797

所以换个说法，你有一些类似于 Category、CurrentCategory 和 SubCategory 的东西。当 CurrentCategory 发生变化时，SubCategory 需要刷新。

我觉得你的方法很好。尤其是在 MVVM 中，我到处都能看到这种类型的东西。在 MVVM 之外，对于延迟加载场景（通常调用某种服务方法，而不是内联所有内容），让属性获取器访问数据库是相当常见的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T06:13:31.933

如果这些数据没有改变，你可以在你的视图模型中拥有它。

始终查询数据库不应该是第一选择。

你可以用一种非常简单的方式做到这一点：

```
Dictionary<string, List<string>> cache;
...
List<string> subCat;
if cache.TryGetValue (selVal, out subCat) 
{
    // no need to call database
}
else
{
   // else call database
   // insert result in cache
} 
```***************

# python - 归档 Python Dict 到 JSON 的更高效转换

> ID：10990071
> 
> 赞同：0
> 
> 时间：2012-06-12T03:04:54.823
> 
> 标签：python, json, gzip, converter, abstract-syntax-tree

我有很多 python dict 格式的存档数据，我正在努力将它们转换为 json。如果可以的话，我有兴趣加快这个过程，并且想知道是否有人有任何建议。目前我：

1.  在“多个文件”中获取 gzip 压缩数据
2.  逐行阅读
3.  用 ast 做一个 literal_eval
4.  使用 json 转储来创建所需的 json 字符串
5.  查询线路日期
6.  打开由检测到的日期命名的附加文件
7.  将字符串写入文件
8.  重新启动整个过程

这是我当前的工作代码：

```
import gzip
import ast
import json
import glob
import fileinput
from dateutil import parser

line = []

filestobeanalyzed = glob.glob('./data/*.json.gz')

for fileName in filestobeanalyzed:
        inputfilename = fileName
        print inputfilename # to keep track of where I'm at
        for line in fileinput.input(inputfilename, openhook=fileinput.hook_compressed):
                line = line.strip();
                if not line: continue
                try:
                        line = ast.literal_eval(line)
                        line = json.dumps(line)
                except:
                        continue
                date = json.loads(line).get('created_at')
                    if not date: continue
                date_converted = parser.parse(date).strftime('%Y%m%d')
                outputfilename = gzip.open(date_converted, "a")
                outputfilename.write(line)
                outputfilename.write("\n")

outputfilename.close() 
```

必须有一种更有效的方法来做到这一点，我只是没有看到它。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:05:19.127

首先使用[http://packages.python.org/line_profiler/](http://packages.python.org/line_profiler/)对其进行分析，它会逐行为您提供时间，您也可以尝试对其进行多线程处理，使用多处理池并将文件列表映射到您的函数。

虽然我觉得 IO 可能是个问题，但这又取决于文件的大小。

```
# Assuming you have a large dictionary across a multi-part gzip files.
def files_to_be_analyzed(files):
    lines = ast.literal_eval("".join([gzip.open(file).read() for file in files]))
    date = lines['created_at']
    date_converted = parser.parse(date).strftime('%Y%m%d')
    output_file = gzip.open(date_converted, "a")
    output_file.write(lines + "\n")
    output_file.close() 
```

我仍然不太确定您要达到的目标，但是由于 IO 是杀手，因此请尝试尽可能少地读写。如果您需要在多个目录上工作，那么请查看类似这样的多线程。

```
import gzip
import ast
import json
import glob
import fileinput
from dateutil import parser
from multiprocessing import Pool

# Assuming you have a large dictionary across a multi-part gzip files.
def files_to_be_analyzed(files):
    lines = ast.literal_eval("".join([gzip.open(file).read() for file in files]))
    date = lines['created_at']
    date_converted = parser.parse(date).strftime('%Y%m%d')
    output_file = gzip.open(date_converted, "a")
    output_file.write(lines + "\n")
    output_file.close()

if __name__ == '__main__':
    pool = Pool(processes = 5) # Or what ever number of cores you have
    directories = ['/path/to/this/dire', '/path/to/another/dir']
    pool.map(files_to_be_analyzed, [glob.glob(path) for path in directories])
    pools.close()
    pools.join() 
```

# java - 将 Eclipse Helios 升级到 Indigo

> ID：10990076
> 
> 赞同：0
> 
> 时间：2012-06-12T03:06:05.370
> 
> 标签：java, eclipse, ide

我正在尝试将我的 eclipse helios (3.6.1) 升级到 indigo (3.7.2)。我找到了这个页面[（从 Helios 到 Indigo 很简单）](http://prapicault.blogspot.com//2011/06/from-helios-to-indigo-is-easy.html)，它确定了（可能）加快进程的 2 种方法。我从第一种方法开始（添加 indigo 存储库并使用 Help->Check for Updates），但遇到了很多依赖问题。在做了一些研究后，我发现大多数人建议从一个新鲜的靛蓝实例开始。因此，我继续使用方法＃2。但是我现在遇到的问题是我无法使用所描述的方法导入插件。当我指定上一个应用程序安装的路径时，导入向导告诉我它不是一个有效的位置。

![在此处输入图像描述](../Images/73292bdd5035e005c2cb0cf8560e8eb9.png)

对于人们用来升级 Eclipse 实例的成功方法，我可以获得任何反馈，我们将不胜感激。操作系统是 CentOS 5.5 顺便说一句。

更新：在最初发布问题后，我认为这可能是权限问题，所以我返回并以 root 身份运行 eclipse 3.7.2。然后，导入向导确实接受了以前的 eclipse 实例为有效，但它只为我提供了 eclipse SDK 作为导入选项，这似乎不正确。

![在此处输入图像描述](../Images/058b703985481737b87cfb2e16679f45.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:20:30.747

在删除了导致依赖问题的一两个插件后，我成功地从 Indigo 存储库进行了更新。

然后，我在更新后使用最新版本重新安装了有问题的插件。工作得很好。

# clojure - 如何调试 ClojureScript

> ID：10990077
> 
> 赞同：29
> 
> 时间：2012-06-12T03:06:28.387
> 
> 标签：clojure, clojurescript

对于这个看似愚蠢的问题，我深表歉意，但我已经断断续续地使用 ClojureScript 几个星期了，我无法弄清楚这个简单的问题：

**如何调试 ClojureScript？**

所以这里是问题：

1.  我写我的 *.cjs 文件
2.  我运行 cljsc/build ...
3.  我加载我的网页。
4.  有不好的事情发生。
5.  我打开 Firefox 控制台。
6.  *我在生成*的 js中得到了一行，我觉得难以理解，而且我不知道它来自原始 cljs 文件的哪一行。

**我的问题：**

开发 ClojureScript 应用程序的正确方法是什么？

PS 我看过 ClojureScriptOne——我不喜欢它的地方是它同时将一堆技术串在一起；而且我更愿意在将它们链接在一起之前了解如何单独使用每个*单独的部分。*

我对 ring + mustache + compojure 很满意，[主要是因为我可以使用标准的 Clojure 调试技术]，但 ClojureScript 是另一种野兽。

**更新**：自从第一次提出这个问题以来，情况发生了很大变化。现在调试 ClojureScript 应用程序的正确方法是启用源映射 - [http://github.com/clojure/clojurescript/wiki/Source-maps](http://github.com/clojure/clojurescript/wiki/Source-maps)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T15:18:15.130

**更新**：现在直接使用编译器很简单。但是 lein-cljsbuild 还是很有用的。

使用[lein-cljsbuild](http://github.com/emezeske/lein-cljsbuild)。您可以编写不同的构建（测试、开发、发布）。您可以自动监视文件，以便在您更改它们时快速重新编译。您可以轻松地使用浏览器 repl 直接在浏览器中评估代码。您可以管理依赖项。

特别与您的问题相关 - lein-cljsbuild 还将合理的警告默认值传递给编译器，以便您在浏览器中实际运行代码之前获得详细而准确的警告。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-12T04:25:23.350

**更新：**我冒昧地更改了原始答案，因为它已经过时了，我无法取消标记这个答案并标记一个新答案。

要调试 ClojureScript 使用源映射 - [https://clojurescript.org/reference/source-maps](https://clojurescript.org/reference/source-maps)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-29T05:35:56.207

如果要使用 Chrome 调试器，可以使用以下...

```
(defn debugger []
  (js/eval "debugger"))

(debugger) 
```

这在很大程度上是一个 hack，但它会激活 chrome 的调试模式。

但请记住，Clojure 脚本使用命名空间，这意味着如果您创建了一些变量`thing`，那么它将`my.namespace.thing`在 chrome 控制台中找到（如预期的那样）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-28T15:35:23.967

最近（2013 年 10 月 27 日）David Nolen 发布了一篇博客文章，建议使用 ClojureScript 进行紧密的反馈循环和良好的调试体验。

[http://swannodette.github.io/2013/10/27/the-essence-of-clojurescript/](http://swannodette.github.io/2013/10/27/the-essence-of-clojurescript/)

“这篇简短的文章将使您从零开始开发源映射 ClojureScript，并在文件保存时立即重新编译。”

希望这也能有所帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-17T07:07:31.067

我正在使用[piggieback](https://github.com/cemerick/piggieback)并将我的brepl（浏览器repl）连接到我的nrepl。

这样，您可以在您的 nrepl 实例上测试您的 cljs 代码以获得更快的反馈。您甚至可以在 nrepl 中执行一些 cljs 脚本来更改 dom。至于变量的状态，我使用（js/console.log 变量），就像提到的 Hendekagon 一样。另外，正如 dnolen 所指出的，如果您使用调试模式（:optimization :whitespace）进行编译，那么生成的 javascript 会变得更容易理解，所以我在 chrome js 环境中设置断点。

[添加：2013-07-18] 添加设置 nrepl-brepl 的简要步骤

1.  我在以下教程的帮助下设置了 brepl 环境。 [https://github.com/magomimmo/modern-cljs/blob/master/doc/tutorial-02.md](https://github.com/magomimmo/modern-cljs/blob/master/doc/tutorial-02.md)

    简而言之，您需要在 clojurescript 代码中的某处使用以下代码段。

    ```
    (repl/connect "http://localhost:9000/repl") 
    ```

2.  然后在 emacs 中打开 nrepl（我使用的是 Mx nrepl-jack-in）

3.  在您的 nrepl 中输入以下内容

    ```
    (do
     (require 'cljs.repl.browser)
     (cemerick.piggieback/cljs-repl
       :repl-env
       (doto (cljs.repl.browser/repl-env :port 9000)
         cljs.repl/-setup))) 
    ```

4.  您需要显示在浏览器上运行 cljs 的页面。

5.  通过在 nrepl 上执行以下命令来测试您的 nrepl 是否正常工作。（js/alert“我准备好了！”）

# ruby-on-rails - 在 Heroku 上编译 CSS 资源时出错

> ID：10990090
> 
> 赞同：2
> 
> 时间：2012-06-12T03:08:44.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, heroku, asset-pipeline, sass

我在 Heroku 的 Cedar 堆栈上运行了一个新的 Ruby on Rails 应用程序。该应用程序在本地运行良好。但是，当我尝试登录我的网站时，出现错误：

```
Error compiling CSS asset

Sprockets::FileNotFound: couldn't find the file 'reset.scss'
  (in app/app/assets/stylesheets/application.css:4) 
```

我的文件 application.css 如下所示：

```
/**
 *= require_self
 *= require reset.scss
 *= require_tree .
*/ 
```

然后，在目录资产/样式表中，我有文件

```
application.css
reset.scss
dialog.scss
etc 
```

这个想法是我希望 application.css 将所有 css 资产编译在一起，reset.scss 文件出现在顶部。

这是 Heroku 中的错误吗？为什么它可以在本地完美运行，但不能在 Heroku 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:29:15.263

尝试以下操作

*   确保*application.css*包含在您的布局文件中。如果没有，则添加以下 css 链接标签。

`<%= stylesheet_link_tag "application", :media => "all" %>`

*   重命名`reset.scss`为`reset.css`（如果它是纯 css）或`reset.css.scss`（如果它包含 scss 标记）

*   在您的`application.css`中，您可以只要求 by `*= require reset`。根据 rails 约定，资产的文件扩展名被跳过。

*   摆脱`require_tree`并明确要求每个文件

最后，如果它仍然不起作用。作为一种解决方法，您可以在您的`/config/environment/production.rb`.js 中启用资产的运行时编译。它应该只在第一次命中资产时变慢，因此被编译。初始编译后的请求应该是正常速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:05:52.883

另一种选择是使用“ **rake assets:precompile** ”对资产进行本地编译，然后将它们添加到项目存储库中。

# python - 如何通过 Python 查找与 Windows 文件关联的图标？

> ID：10990092
> 
> 赞同：6
> 
> 时间：2012-06-12T03:09:02.153
> 
> 标签：python, windows, shell, filesystems, shortcut

我正在开发一个 Python 脚本来在 Windows 上进行文件管理。本质上，我希望能够将文件移动到另一个位置，并在它们的位置创建一个 Python 脚本的快捷方式，该脚本将在打开重新定位的文件之前执行中间步骤。我目前可以移动文件、创建功能快捷方式以及设置快捷方式图标图像。我唯一剩下的就是弄清楚如何检测为文件显示的图标。

-需要设置快捷方式的图标（指向'.py'脚本）

- 此图标应与我有路径的任意文件类型、exe 等的图标匹配

- 希望通过 Python 以编程方式完成。os.system() 调用是可以接受的。不需要额外的模块（虽然我已经有了 win32com、winshell、pythoncom 等），因此获得了额外的积分

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:21:49.960

文件类型信息可在[注册表](http://www.awitness.org/delphi_pascal_tutorial/source4/registry_associated_applications.html)中找到。[您可以使用windows 注册表](http://docs.python.org/library/_winreg.html)模块查找文件扩展名的类型。

**编辑**：似乎可以通过 shell32 获得图标，如此[处所示](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=29137)。Python 等效项似乎是`ctypes.windll.shell32.ExtractIconA`，但我不确定语法。

# javascript - 在 $.ajax 成功中遍历 JSON

> ID：10990097
> 
> 赞同：10
> 
> 时间：2012-06-12T03:09:24.103
> 
> 标签：javascript, jquery, ajax

当用户单击按钮时，我想返回一些数据并遍历 JSON，以便我可以将结果附加到表行。

在这一点上，我只是想让我的循环工作，这是我的代码。

我的 JSON 如下返回： {"COLUMNS":["username","password"],"DATA":[["foo", "bar"]]}

```
$("#button").click(function(){

    $.ajax({
        url: 'http://localhost/test.php',
        type: 'get',
        success: function(data) {  
         $.each(data.items, function(item) {
            console.log(item);
            });
        },
        error: function(e) {
            console.log(e.message);
        }
    });

}); 
```

我收到一个 jQuery（第 16 行，a 未定义）错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T03:18:57.573

假设你`JSON`是这样的

```
var item=  {
        "items": [
                  { "FirstName":"John" , "LastName":"Doe" },
                  { "FirstName":"Anna" , "LastName":"Smith" },
                  { "FirstName":"Peter" , "LastName":"Jones" }
                 ]
           } 
```

你可以这样查询

```
$.each(item.items, function(index,item) {        
    alert(item.FirstName+" "+item.LastName)
}); 
```

示例：http: [//jsfiddle.net/4HxSr/9/](http://jsfiddle.net/4HxSr/9/)

**编辑：根据 JSON OP 稍后发布**

您`JSON`没有商品，因此无效。

按照你这样的JSON

```
var item= {  "COLUMNS": [  "username", "password" ],
             "DATA": [    [ "foo", "bar"  ] ,[ "foo2", "bar2"  ]]
          } 
```

你应该像这样查询它

```
console.debug(item.COLUMNS[0])
console.debug(item.COLUMNS[1])

 $.each(item.DATA, function(index,item) {        
    console.debug(item[0])
    console.debug(item[1])
  }); 
```

工作样本：http: [//jsfiddle.net/4HxSr/19/](http://jsfiddle.net/4HxSr/19/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T03:23:09.800

您需要添加：

```
dataType: 'json', 
```

..所以你应该有：

```
$("#button").click(function(){

$.ajax({
    url: 'http://localhost/test.php',
    type: 'get',
    dataType: 'json',
    success: function(data) {  
     $.each(data.COLUMNS, function(item) {
        console.log(item);
        });
    },
    error: function(e) {
        console.log(e.message);
    }
});

}); 
```

.. 以及确保您在每个语句中引用 COLUMNS。

getJson 也是另一种方式。

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# jquery - 如何将正则表达式应用于网页以获取文本字符串 URL 和之前的前一行文本？

> ID：10990099
> 
> 赞同：0
> 
> 时间：2012-06-12T03:10:04.813
> 
> 标签：jquery, regex, replace

大家好，感谢您对此的关注。好吧，我试图用一个词替换每个完整的 youtube 网址。一个例子：

```
http://www.youtube.com/watch?v=lDC0gdrcauI Should be replaced with the word "Video"
http://www.youtube.com/watch?v=ef0wk8QoA34&feature=g-all-u Should be replaced with the word "Video" 
```

到目前为止，这是我的代码。HTML：

```
<p>My brother is great.</p>
<p>http://www.youtube.com/watch?v=ef0wk8QoA34</p> 
```

​ 和 JS：

```
(function($) {

    $(function(){
    var thePage = $("body");
    thePage.html(thePage.html().replace(/My brother/g, 'My Pig').replace(/youtube.com/g, 'video'));
    });

})(jQuery) 
```

一个 JSFiddle 可以在这里找到：http: [//jsfiddle.net/QmRc7/2/](http://jsfiddle.net/QmRc7/2/)

所以，如果你能帮我解决这个问题，那就太好了！谢谢！

PS：对不起，我的帖子不是我编辑的：/

解决了！我只是添加了这个并且对每个人都很好+1！：

```
.replace(/(www.)?youtu(be\.com|\.be)\/(watch\?v=)?([A-Za-z0-9._%-]*)(\&\S+)?/g, '') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:54:38.463

如果我正确理解您的问题（从它的标题），您想在其内容（文本）上使用正则表达式过滤锚标签：

你可以这样[做](http://jsfiddle.net/CCLvz/)：

```
$('a').filter(function() {
    return $(this).text().match(/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/g);
}).each(function() {
    $(this).text($(this).text().replace(/youtube.com/g, 'video'));
}); 
```

代码基本上，选择文本匹配 youtube url 模式的锚标签，我从[这个](https://stackoverflow.com/a/10315969/303270)答案中复制，对于每个匹配的锚标签，替换`youtube.com`为`video`.

* * *

# 回答更新的问题：

你可以这样[做](http://jsfiddle.net/tGSMf/)：

```
$('a').filter(function() {
    return $(this).text().match(/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/g);
}).each(function() {
    $(this).text('Video');
}); 
```

请注意，它不匹配非锚标签，您可以使用`$('*')`而不是`$('a')`选择所有节点。

* * *

第二个单词的变化可以通过这种方式轻松完成：

```
$('p').each(function() {
    $(this).text($(this).text().replace(/My brother/g, 'My Pig'));
}); 
```

不用说，您应该更改选择器以匹配您想要的节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T03:19:19.093

这个正则表达式可能需要更多的调整来获得所有可能的 youtube URL 模式，但这将是一个好的开始：

```
http:\/\/www\.youtube\.com\/[\w?=&-]+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:10:58.370

几个小时后......我终于在你的帮助下解决了这个问题。

```
.replace(/(www.)?youtu(be\.com|\.be)\/(watch\?v=)?([A-Za-z0-9._%-]*)(\&\S+)?/g, '') 
```

# database - 如何在 Heroku 上 rake db:drop 和 rake db:create？

> ID：10990104
> 
> 赞同：45
> 
> 时间：2012-06-12T03:10:58.167
> 
> 标签：database, postgresql, heroku, rake

> **可能重复：**
> [如何在heroku中清空数据库](https://stackoverflow.com/questions/4820549/how-to-empty-db-in-heroku)

我在 Heroku 上有一个 Postgres 数据库。它是免费的测试版之一。在本地，测试时，我经常运行 rake db:drop && rake db:create && rake db:migrate 作为重置数据库的一种方式。

但是，当我尝试在 Heroku 上运行它时，出现错误：

```
Couldn't drop mydatabaseid : #<PG::Error: FATAL:  permission denied for database "postgres"
  DETAIL:  User does not have CONNECT privilege. 
```

嗯，好的，那么我应该如何完全重置我的数据库、迁移和所有内容？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-12T12:11:30.143

该`pg:reset`命令将为您重新创建数据库。示例用法：

```
$ heroku config | grep POSTGRESQL
HEROKU_POSTGRESQL_RED_URL: postgres://somedatabaseurl
$ heroku pg:reset HEROKU_POSTGRESQL_RED_URL
!    WARNING: Destructive Action
!    This command will affect the app: myappname
!    To proceed, type "myappname" or re-run this command with --confirm
> myappname
Resetting HEROKU_POSTGRESQL_RED_URL (DATABASE_URL)... done 
```

该`db:reset`命令将尝试删除数据库，这不是 Heroku 权限允许的。

# android - 在 Android 的 MediaPlayer 服务中播放本地 mp3

> ID：10990106
> 
> 赞同：0
> 
> 时间：2012-06-12T03:11:44.187
> 
> 标签：android, media-player

使用服务内的 MediaPlayer 在 sdcard 上的默认下载文件夹中播放本地 .mp3 存储的最佳方式是什么？

该文件现在正在播放，但是当我尝试调用 .pause() 函数时，什么也没有发生。

```
public class PlayService extends Service{

@Override
public int onStartCommand(Intent intent, int flags, int startId){

    int key = intent.getIntExtra("key", 0);
    MediaPlayer mMediaPlayer = new MediaPlayer();

    FileInputStream fileStream = null;
    try {
        fileStream = new FileInputStream("/sdcard/Download/Bob_Marley-Jammin.mp3");
    } catch (FileNotFoundException e1) {
        e1.printStackTrace();
    }

    try {
        mMediaPlayer.setDataSource(fileStream.getFD());
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        mMediaPlayer.prepare();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    switch (key) {
    case 0: //Play
        if (mMediaPlayer.isPlaying()){
            break;
        }
        else
            mMediaPlayer.start();
        break;
    case 1: //Pause
        if(mMediaPlayer.isPlaying())
            mMediaPlayer.pause();
        break;
    case 2: //Stop
        if(mMediaPlayer.isPlaying()){
            mMediaPlayer.pause();
            mMediaPlayer.seekTo(0);
        }
        break;
    default:
        break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:30:14.160

```
FileInputStream fileStream = new FileInputStream("/sdcard/Download/Bob_Marley-Jammin.mp3");
mMediaPlayer.setDataSource(fileStream.getFD()); 
```

# android - Android：如何停止调用 View.OnTouchListener ACTION_MOVE

> ID：10990117
> 
> 赞同：2
> 
> 时间：2012-06-12T03:14:31.280
> 
> 标签：android, view, ontouchlistener

我有一个简单的滑动动作来`LinearLayout View`使用`TouchListener`。

当我触摸和移动时，问题是`MotionEvent.ACTION_MOVE`不断被调用。

我怎样才能停止`MotionEvent.ACTION_MOVE`被叫？

`v.setOnTouchListener(null)`不好：返回 false 并且不工作。

我只想`MotionEvent.ACTION_MOVE`被叫一次。

```
 private View.OnTouchListener touchEvent = new View.OnTouchListener() {
        private float tempX;
        private final float BASE_VALUE = 100;
        private final boolean LEFT = false;
        private final boolean RIGHT = true;

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

            if(event.getAction() == MotionEvent.ACTION_DOWN){
                tempX = event.getX();
            }

            if(event.getAction() == MotionEvent.ACTION_MOVE){
                if(event.getX() < (tempX + BASE_VALUE)){
                    changeView(LEFT);
                }else if(event.getX() > (tempX + BASE_VALUE)){
                    changeView(RIGHT);
                }
            } 
```

它工作不完美。

但是这个实现还不错（这段代码是我的想法）。

编码：

```
private View.OnTouchListener touchEvent = new View.OnTouchListener() {
    private VelocityTracker mVelocityTracker;
    private float tempX;
    private final int MIN_DISTANCE = 120;
    private final int THRESHOLD_VELOCITY = 200; 
    private final boolean LEFT = false;
    private final boolean RIGHT = true;
    private MotionEvent cancelEvent = MotionEvent.obtain(100, 100, MotionEvent.ACTION_CANCEL, 0, 0, 0);
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        if(event.getAction() == MotionEvent.ACTION_DOWN){
            Log.d(TAG, "Down");
            mVelocityTracker = VelocityTracker.obtain();
            mVelocityTracker.addMovement(event);
            tempX = event.getX();
        }
        if(event.getAction() == MotionEvent.ACTION_MOVE){
            mVelocityTracker.addMovement(event);
            mVelocityTracker.computeCurrentVelocity(100);
            float velocityX = mVelocityTracker.getXVelocity();
            if(tempX - event.getX() > MIN_DISTANCE 
                   && Math.abs(velocityX) > THRESHOLD_VELOCITY){
                   Log.d(TAG, "LEFT");
                   changeView(LEFT);
            }else if(event.getX() - tempX > MIN_DISTANCE 
                   && Math.abs(velocityX) > THRESHOLD_VELOCITY){
                   Log.d(TAG, "RIGHT");
                   changeView(RIGHT);
            }
            v.dispatchTouchEvent(cancelEvent);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T01:24:41.037

制作 SWIPELISTENER。

编码。

```
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public abstract class OnSwipeListener implements OnTouchListener {
public final static int SWIPED_LEFT = 1;
public final static int SWIPED_RIGHT = 2;
public final static int SWIPED_UP = 3;
public final static int SWIPED_DOWN = 4;
public final static int CLICKED = 5;

private int SWIPE_ACTION = 0;
private float firstTouchX = 0;
private float firstTouchY = 0;
private float lastTouchX = 0;
private float lastTouchY = 0;
private int activePointerID;

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    if(event.getAction() == event.ACTION_DOWN){
        final float x = event.getX();
        final float y = event.getY();

        firstTouchX = x;
        firstTouchY = y;

        activePointerID = event.getPointerId(0);

        v.setBackgroundResource(R.drawable.layoutbutton2);
    }

    if(event.getAction() == event.ACTION_UP){
        float dX = lastTouchX - firstTouchX;
        float dY = lastTouchY - firstTouchY;

        final int pointerIndex = event.findPointerIndex(activePointerID);

        if((firstTouchX + 10) == event.getX(activePointerID) &&
                (firstTouchY + 10) == event.getY(activePointerID)){

            SWIPE_ACTION = CLICKED;

        }else{
            if(Math.abs(dX) > Math.abs(dY)){
                if(dX > 0){
                    SWIPE_ACTION = SWIPED_RIGHT;
                }else{
                    SWIPE_ACTION = SWIPED_LEFT;
                }
            }else{
                if(dY > 0){
                    SWIPE_ACTION = SWIPED_DOWN;
                }else{
                    SWIPE_ACTION = SWIPED_UP;
                }
            }
        }
        v.setBackgroundResource(R.drawable.layoutbutton1);
        onSwipe(v, event);
    }
    if(event.getAction() == event.ACTION_MOVE){
        final int pointerIndex = event.findPointerIndex(activePointerID);
        final float x = event.getX(pointerIndex);
        final float y = event.getY(pointerIndex);

        lastTouchX = x;
        lastTouchY = y;

        v.setBackgroundResource(R.drawable.layoutbutton1);
    }
    if(event.getAction() == event.ACTION_CANCEL){
        v.setBackgroundResource(R.drawable.layoutbutton1);
    }

    return true;

}

public int getSwipeTo(){
    return SWIPE_ACTION;
}

abstract public void onSwipe(View v, MotionEvent event);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:42:17.927

我假设您在问如何在用户抬起手指时终止事件？您可以调用 ACTION_UP，就像用户从设备上“抬起”手指一样。

```
 if(event.getAction() == MotionEvent.ACTION_UP){
           //your code, maybe tempX = null;
        } 
```

然后您可以重新初始化您的程序，以便它可以接受另一个用户的触摸。

# iphone - 以下代码中是否存在内存泄漏？

> ID：10990119
> 
> 赞同：0
> 
> 时间：2012-06-12T03:14:57.127
> 
> 标签：iphone, objective-c, cocoa-touch, cocoa, md5

如果我计算一个大于 200Mb 的文件的 MD5 值，应用程序将加速大量内存并崩溃。以下代码中是否存在内存泄漏？有没有更好的方法来计算巨大视频文件的 MD5 值？

```
+ (NSString *) md5ForFileContent:(NSString *)path
{

    NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:path];
    if (handle == nil) {
        return nil;
    }
    CC_MD5_CTX md5;
    CC_MD5_Init (&md5);

    BOOL done = NO;

    while (!done) {

        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        NSData *fileData = [[NSData alloc] initWithData: [handle readDataOfLength:1024]];
        CC_MD5_Update (&md5, [fileData bytes], [fileData length]);

        if ([fileData length] == 0) {
                done = YES;
        }

        [fileData release];
        [pool release];

    }

    unsigned char digest[CC_MD5_DIGEST_LENGTH];
    CC_MD5_Final (digest, &md5);

    NSString *s = [NSString stringWithFormat: @"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x",
               digest[0],  digest[1], 
               digest[2],  digest[3],
               digest[4],  digest[5],
               digest[6],  digest[7],
               digest[8],  digest[9],
               digest[10], digest[11],
               digest[12], digest[13],
               digest[14], digest[15]];
    return s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:13:06.387

[在此处](http://www.joel.lopes-da-silva.com/2010/09/07/compute-md5-or-sha-hash-of-large-file-efficiently-on-ios-and-mac-os-x/)查看潜在的解决方案。它使用 CFReadStream API。

祝你好运

蒂姆

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-12T03:42:09.217

如果你想在一个新的线程中使用这个方法，你必须在方法的头部写下面的代码。

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; 
```

并将这段代码放在方法的末尾

```
[pool release]; 
```

# asp.net-mvc - 检查 MVC 路由中的值以确保其存储在数据库中

> ID：10990122
> 
> 赞同：1
> 
> 时间：2012-06-12T03:15:35.917
> 
> 标签：asp.net-mvc, c#-4.0

我正在使用 MVC4 并在我的 global.asax 中创建了一个自定义路由来获取主机详细信息。

我已经设置了一个产品，让我的用户能够通过“theirbusiness.mydomain.com”登录

我现在想检查用户何时浏览到“randomstore.mydomain.com”，如果存储不存在，则实际存储已经在我的数据库中创建，将用户重定向到页面。

到目前为止我有

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.Add(new SubDomainRoute());
        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Process", action = "Index", id = UrlParameter.Optional },
            constraints: null,
            namespaces: new[] { "WebApplication.Controllers" }
        );
    }

    protected void Application_Start()
    {
        log4net.Config.XmlConfigurator.Configure();
        AreaRegistration.RegisterAllAreas();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }
}

public class SubDomainRoute : RouteBase
{
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        log4net.ILog log = log4net.LogManager.GetLogger(this.GetType());
        log.Info(string.Format("GetRouteData"));
        log.Info(DateTime.Now);
        var url = httpContext.Request.Headers["HOST"];
        var index = url.IndexOf(".");

        if (index < 0)
            return null;
        log.Info(url);
        var subDomain = url.Substring(0, index);
        //check 

        log.Info(subDomain);

        return null;
    } 
```

对我来说，获取变量 subDomain 并在数据库中检查它的最佳方法是什么。在 SubDomainRoute 类中尝试这样做感觉不对

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:13:43.520

如果您想对所有请求进行检查/重定向，那么您可以轻松地`Application_BeginRequest`自行完成。

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
  var context = ((HttpApplication)sender).Context;
  var host = context.Request.Headers["HOST"];

  // check the store is created in database and redirect if not exist.
} 
```

# android - Google Places API - Web 应用程序的方法

> ID：10990125
> 
> 赞同：0
> 
> 时间：2012-06-12T03:16:22.650
> 
> 标签：android, google-places-api

我们可以使用 Google Places API 创建评论系统吗？就像使用他们的 API 来检索有关该地点的信息，然后将 Key 和 Review 存储在数据库中。这可能吗，因为谷歌的条款和条件不是直截了当的。

如果不是谷歌，那么开发它的最佳方法是什么。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:30:07.773

Google Places API 当前不返回与请求的地点相关的评论。[但是，这里](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2477)有一个功能请求，如果您认为在请求响应中返回评论将是一个有用的功能，请为该问题添加星标以提高其优先级并收到未来更改的通知。

根据[Google 地图服务条款第 10.1.3](https://developers.google.com/maps/terms#section_10_1_3) (b)条

> 您不得预取、缓存或存储任何内容

唯一的例外是为了提高应用程序性能而存储内容标识符或参考密钥。

# iphone - NSTimer 滴答声与否

> ID：10990126
> 
> 赞同：1
> 
> 时间：2012-06-12T03:16:45.693
> 
> 标签：iphone, objective-c, xcode, nstimer

如果计时器仍然滴答作响，我的目标是执行一些语句。

```
while (mainTimer == //is Ticking){
//execute things
} 
```

我如何控制我的 NSTimer mainTimer，是否在滴答作响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:36:15.363

您可能会[`isValid`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html#//apple_ref/occ/instm/NSTimer/isValid)用来确定：

```
BOOL running = [mainTimer isValid]; 
```

从文档中：

> 如果接收器仍然能够触发，则为 YES，如果计时器已失效且不再能够触发，则为 NO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T03:36:07.467

[您可以通过NSTimer "](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/instm/NSTimer/isValid) [" 方法](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/instm/NSTimer/isValid)询问您的 " `mainTimer`" 对象是否有效。您还可以通过检查["](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/instm/NSTimer/fireDate) [" 方法](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/instm/NSTimer/fireDate)来查看它何时触发。[`isValid`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/instm/NSTimer/isValid)[`fireDate`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/instm/NSTimer/fireDate)

如果您在单独的“ `NSThread`”（例如在后台）上执行此操作，那么也有一个方便的[“ `isExecuting`”方法](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/occ/instm/NSThread/isExecuting)。

（那里的所有蓝色链接都指向 Apple 文档）

# c++ - 在无限循环中等待时使程序使用更少的 CPU

> ID：10990129
> 
> 赞同：3
> 
> 时间：2012-06-12T03:17:53.743
> 
> 标签：c++, process, cpu-usage

**设置**：我在 C++ 中有这个程序：

```
#include <windows.h>
using namespace std;
int main(){
    HWND window;
    AllocConsole();
    window = FindWindowA("ConsoleWindowClass", NULL);
    ShowWindow(window,0);
while (1){  
if (GetKeyState('A'))
        {
    system("start love.mp3");
    return 0;
        }
    }
return 0;
} 
```

所以程序作为一个进程运行并等待直到按键 A 被按下。然后它播放 love.mp3 文件:)

但是，当程序等待时，它会占用 25% 的 CPU 使用率。

**问**：有没有办法减少这种情况，使程序不会消耗太多的 CPU？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T03:27:03.743

你的程序犯了[忙等待](http://en.wikipedia.org/wiki/Busy_waiting)。

尝试使用[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T03:27:37.717

在循环中调用`Sleep`是有效的，但 IMO，这显然是错误的方式。

相反，我会进行阻塞读取，然后检查结果是否为`A`，并在结果为 时执行您的操作：

```
while ((ch = getch()) != EOF)
    if (ch == 'A') {
        system("start love.mp3");
        break;
    } 
```

这不会错过击键，*而且*它使用的 CPU 时间甚至比调用`Sleep`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T03:22:59.870

您可以很容易地将对 Windows`Sleep()`函数的调用添加到循环中。该参数以毫秒为单位，因此这将大约每秒检查键盘五次：

```
#include <windows.h>
// ...
while (1){  
    if (GetKeyState('A'))
    {
        system("start love.mp3");
        return 0;
    }
    Sleep(200);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T04:19:37.940

**正确**的方法是使用 Windows 钩子，可能是 WH_KEYBOARD 或 WH_KEYBOARD_LL 钩子类型（尽管 WH_GETMESSAGE 也可以）并在那里进行处理。

[在http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx)查看 SetWindowsHookEx 的文档

我还没有测试过这个——只是在运行中把它搅起来——但这里有一个简单的例子，当按下“A”键时应该做你想做的事情。

```
LRESULT __stdcall CALLBACK LoveProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    static int love = 0;

    if((nCode == HC_ACTION) && 
       (wParam == 'A') &&      /* the key pressed was 'A' */
       (lParam & 0x40000000))  /* trigger when the key is pressed */
    {        
        if(love == 0)
            play_romantic_love_song();

        /* but don't overdo it because "Too Much Love Will Kill You" */
        love = 1;
    }

    return CallNextHookEx(hOldKeyHook, nCode, wParam, lParam );
} 
```

您可能还想在 Google 上搜索“*SetWindowsHookEx WH_KEYBOARD*”，因为我很确定 CodeProject 上至少有几篇文章对此进行了解释。我会包含这些链接，但我是从我的 iPhone 上输入的，而且它......很难。

# javascript - 如何从 .js 文件中的 .html 调用 javascript 函数

> ID：10990132
> 
> 赞同：2
> 
> 时间：2012-06-12T03:18:05.107
> 
> 标签：javascript, jquery, html, function

是否可以在 .js 文件中从 .html 文件调用 javascript 函数？例如，我的 foo.js 中有这个：

```
$(document).ready(function() {
    fn(); 
}) 
```

我想调用我的 index.html 中的 fn()：

```
<script type="text/javascript" src="js/foo.js"></script>
<script type="text/javascript">
function fn() {
     .....
}
</script> 
```

当我这样做时，它似乎没有调用 fn()。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T03:19:30.670

您的脚本标签嵌套不正确。

```
<script type="text/javascript">
    function fn() {
         .....
    }
</script>
<script type="text/javascript" src="js/foo.js"></script> 
```

并实际回答您的问题：是的，这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T03:36:48.507

绝对可以，但不推荐。如果您正在调用已嵌套在 html 中的函数，则该函数可能应该在调用它的文件中。当然，除非您有自己的辅助函数和实用函数库，并且您调用的这个函数可以驻留在那里。这将在您的程序逻辑（JavaScript）和您的内容（HTML）之间保持良好的分离。例如：

```
<!-- Your Helper Library that holds useful functions -->
<script type="text/javascript" src="helpers.js"></scrip>

<!-- Your Program Logic that makes use of your helper functions -->
<script type="text/javascript" src="programlogic.js"></scrip> 
```

我希望这有帮助！

-麦克风

# java - 脚本引擎的 ExecutorService 线程间隔间隙

> ID：10990133
> 
> 赞同：0
> 
> 时间：2012-06-12T03:18:07.430
> 
> 标签：java, multithreading, executorservice, scriptengine

这是从 zip 文件中加密条目并将其存储为文件的 java 方法。文件读写没有问题，所以与2-5行无关。问题如下所述...

`ExecutorService`对象（es）用于从`ZipEntry[]`数组（ze）1by1中获取Zip Entry，并由固定数量的线程同时执行它们。每个线程都使用`ScriptEngine`ScriptEngine 数组 (se) 中的一个对象来实现。当一个线程完成其执行时，脚本引擎将为另一个条目腾出空间。问题是对于第一批线程资源（entry），executor没有平均划分entry。因此，发送到单个引擎的条目不止一个，导致死锁

1.  如何在前一个线程之后延迟线程运行几毫秒？

    或者

2.  如何在脚本引擎繁忙时对资源进行排队。但我看不到解决方案：

这是代码：

```
static void encryptzip(ScriptEngine[] sc, String u, String k, ExecutorService es) throws... {
    ZipFile zf = new ZipFile(u);
    ZipEntry[] ze = getEntries(zf);
    byte[][] zb = getArrayOfEntryBytes(zf, ze);
    String p = getExtractionPath(u);
    for(int i=0;i<ze.length;i++){
        encentry ee = new encentry();
        ee.bytes = zb[i];
        ee.entry = ze[i];
        ee.key = k;
        ee.path = p;
        ee.script = getFreeScriptEngine(sc);
        es.execute(ee);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:17:42.677

不管它在`getFreeScriptEngine()` 做什么，回答这个问题很重要。

如果我理解正确，您需要对免费脚本引擎按顺序执行加密算法。这是您并行性的主要来源。因此，您需要将加密任务安排在阻塞队列中，这些任务阻塞在与您需要持有的锁相同的锁（或监视器，如 java 监视器模式中）上，以便正确确定并发、多线程中的“空闲引擎”，运行时（非常简单地将监视器放在“isEngineFree”布尔变量上，可能是“引擎”实例持有？）。一旦您确定了正确的锁，您就可以让`singleThreadedExecutor`“空闲”引擎按顺序执行任务。这可以通过将保存加密任务的“免费引擎”阻塞队列分发给`singleThreadedExecutor`服务来实现。

实际上有更复杂的锁定机制，允许您对所有任务使用相同的阻塞队列，同时仍然保持单任务每个空闲引擎的执行策略。Java Concurrency in Practice 的高级部分，这是一本值得一看的好书，可以为您提供一些指导。

# python - Pygame鼠标点击检测

> ID：10990137
> 
> 赞同：35
> 
> 时间：2012-06-12T03:18:49.133
> 
> 标签：python, mouseevent, pygame

我想知道如何编写代码来检测鼠标点击精灵。例如：

```
if #Function that checks for mouse clicked on Sprite:
    print ("You have opened a chest!") 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-12T07:29:18.307

I assume your game has a main loop, and all your sprites are in a list called `sprites`.

In your main loop, get all events, and check for the `MOUSEBUTTONDOWN` or `MOUSEBUTTONUP` event.

```
while ... # your main loop
  # get all events
  ev = pygame.event.get()

  # proceed events
  for event in ev:

    # handle MOUSEBUTTONUP
    if event.type == pygame.MOUSEBUTTONUP:
      pos = pygame.mouse.get_pos()

      # get a list of all sprites that are under the mouse cursor
      clicked_sprites = [s for s in sprites if s.rect.collidepoint(pos)]
      # do something with the clicked sprites... 
```

So basically you have to check for a click on a sprite yourself every iteration of the mainloop. You'll want to use [mouse.get_pos()](http://www.pygame.org/docs/ref/mouse.html#pygame.mouse.get_pos) and [rect.collidepoint()](http://www.pygame.org/docs/ref/rect.html#Rect.collidepoint).

Pygame does not offer event driven programming, as e.g. [cocos2d](http://cocos2d.org/) does.

Another way would be to check the position of the mouse cursor and the state of the pressed buttons, but this approach has some issues.

```
if pygame.mouse.get_pressed()[0] and mysprite.rect.collidepoint(pygame.mouse.get_pos()):
  print ("You have opened a chest!") 
```

You'll have to introduce some kind of flag if you handled this case, since otherwise this code will print *"You have opened a chest!"* every iteration of the main loop.

```
handled = False

while ... // your loop

  if pygame.mouse.get_pressed()[0] and mysprite.rect.collidepoint(pygame.mouse.get_pos()) and not handled:
    print ("You have opened a chest!")
    handled = pygame.mouse.get_pressed()[0] 
```

Of course you can subclass `Sprite` and add a method called `is_clicked` like this:

```
class MySprite(Sprite):
  ...

  def is_clicked(self):
    return pygame.mouse.get_pressed()[0] and self.rect.collidepoint(pygame.mouse.get_pos()) 
```

So, it's better to use the first approach IMHO.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-10-26T08:29:58.227

`MOUSEBUTTONDOWN`单击鼠标按钮时该事件`MOUSEBUTTONUP`发生一次，释放鼠标按钮时该事件发生一次。该[`pygame.event.Event()`](https://www.pygame.org/docs/ref/event.html#pygame.event.Event)对象有两个属性，提供有关鼠标事件的信息。`pos`是一个存储被点击位置的元组。`button`存储被点击的按钮。每个鼠标按钮都关联一个值。例如，鼠标左键、鼠标中键、鼠标右键、鼠标滚轮向上和鼠标滚轮向下的属性值为 1、2、3、4、5。当按下多个键时，会发生多个鼠标按钮事件。进一步的解释可以在模块的文档中找到[`pygame.event`](https://www.pygame.org/docs/ref/event.html)。

使用对象的`rect`属性[`pygame.sprite.Sprite`](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Sprite)和[`collidepoint`](https://www.pygame.org/docs/ref/rect.html#pygame.Rect.collidepoint)方法查看*Sprite*是否被点击。将事件列表传递给 的[`update`](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group.update)方法，[`pygame.sprite.Group`](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group)以便您可以处理*Sprite*类中的事件：

```
class SpriteObject(pygame.sprite.Sprite):
    # [...]

    def update(self, event_list):

        for event in event_list:
            if event.type == pygame.MOUSEBUTTONDOWN:
                if self.rect.collidepoint(event.pos):
                    # [...]

my_sprite = SpriteObject()
group = pygame.sprite.Group(my_sprite)

# [...]

run = True
while run:
    event_list = pygame.event.get()
    for event in event_list:
        if event.type == pygame.QUIT:
            run = False 

    group.update(event_list)

    # [...] 
```

最小的例子：`[![](../Images/1046507529a28f50314afc43ea70d681.png) repl.it/@Rabbid76/PyGame-MouseClick](https://repl.it/@Rabbid76/PyGame-MouseClick#main.py)`

[![](../Images/b381cc60a4e4d38a4bfbc3857ce26e44.png)](https://i.stack.imgur.com/mW6vv.gif)

```
import pygame

class SpriteObject(pygame.sprite.Sprite):
    def __init__(self, x, y, color):
        super().__init__() 
        self.original_image = pygame.Surface((50, 50), pygame.SRCALPHA)
        pygame.draw.circle(self.original_image, color, (25, 25), 25)
        self.click_image = pygame.Surface((50, 50), pygame.SRCALPHA)
        pygame.draw.circle(self.click_image, color, (25, 25), 25)
        pygame.draw.circle(self.click_image, (255, 255, 255), (25, 25), 25, 4)
        self.image = self.original_image 
        self.rect = self.image.get_rect(center = (x, y))
        self.clicked = False

    def update(self, event_list):
        for event in event_list:
            if event.type == pygame.MOUSEBUTTONDOWN:
                if self.rect.collidepoint(event.pos):
                    self.clicked = not self.clicked

        self.image = self.click_image if self.clicked else self.original_image

pygame.init()
window = pygame.display.set_mode((300, 300))
clock = pygame.time.Clock()

sprite_object = SpriteObject(*window.get_rect().center, (128, 128, 0))
group = pygame.sprite.Group([
    SpriteObject(window.get_width() // 3, window.get_height() // 3, (128, 0, 0)),
    SpriteObject(window.get_width() * 2 // 3, window.get_height() // 3, (0, 128, 0)),
    SpriteObject(window.get_width() // 3, window.get_height() * 2 // 3, (0, 0, 128)),
    SpriteObject(window.get_width() * 2// 3, window.get_height() * 2 // 3, (128, 128, 0)),
])

run = True
while run:
    clock.tick(60)
    event_list = pygame.event.get()
    for event in event_list:
        if event.type == pygame.QUIT:
            run = False 

    group.update(event_list)

    window.fill(0)
    group.draw(window)
    pygame.display.flip()

pygame.quit()
exit() 
```

请参阅[从 Pygame 中的同一精灵类创建具有不同更新（）的多个精灵](https://stackoverflow.com/questions/64419223/creating-multiple-sprites-with-different-updates-from-the-same-sprite-class-i/64456959#64456959)

* * *

鼠标的当前位置可以通过 确定[`pygame.mouse.get_pos()`](https://www.pygame.org/docs/ref/mouse.html#pygame.mouse.get_pos)。返回值是一个元组，表示鼠标光标的 x 和 y 坐标。返回代表所有鼠标按钮状态（或）[`pygame.mouse.get_pressed()`](https://www.pygame.org/docs/ref/mouse.html#pygame.mouse.get_pressed)的布尔值列表。按钮的状态与按钮被按住的时间一样长。当按下多个按钮时，列表中的多个项目是。列表中的第 1、2、3 个元素代表鼠标左键、中键和右键。`True``False``True``True`

Detect 评估对象的`Update`方法中的鼠标状态[`pygame.sprite.Sprite`](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Sprite)：

```
class SpriteObject(pygame.sprite.Sprite):
    # [...]

    def update(self, event_list):

        mouse_pos = pygame.mouse.get_pos()
        mouse_buttons = pygame.mouse.get_pressed()

        if  self.rect.collidepoint(mouse_pos) and any(mouse_buttons):
            # [...]

my_sprite = SpriteObject()
group = pygame.sprite.Group(my_sprite)

# [...]

run = True
while run:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False

    group.update(event_list)

    # [...] 
```

最小的例子：`[![](../Images/1046507529a28f50314afc43ea70d681.png) repl.it/@Rabbid76/PyGame-MouseHover](https://repl.it/@Rabbid76/PyGame-MouseHover#main.py)`

[![](../Images/8d233ab6fcd38ac386fa16b64e4bbedc.png)](https://i.stack.imgur.com/UJVKi.gif)

```
import pygame

class SpriteObject(pygame.sprite.Sprite):
    def __init__(self, x, y, color):
        super().__init__() 
        self.original_image = pygame.Surface((50, 50), pygame.SRCALPHA)
        pygame.draw.circle(self.original_image, color, (25, 25), 25)
        self.hover_image = pygame.Surface((50, 50), pygame.SRCALPHA)
        pygame.draw.circle(self.hover_image, color, (25, 25), 25)
        pygame.draw.circle(self.hover_image, (255, 255, 255), (25, 25), 25, 4)
        self.image = self.original_image 
        self.rect = self.image.get_rect(center = (x, y))
        self.hover = False

    def update(self):
        mouse_pos = pygame.mouse.get_pos()
        mouse_buttons = pygame.mouse.get_pressed()

        #self.hover = self.rect.collidepoint(mouse_pos)
        self.hover = self.rect.collidepoint(mouse_pos) and any(mouse_buttons)

        self.image = self.hover_image if self.hover else self.original_image

pygame.init()
window = pygame.display.set_mode((300, 300))
clock = pygame.time.Clock()

sprite_object = SpriteObject(*window.get_rect().center, (128, 128, 0))
group = pygame.sprite.Group([
    SpriteObject(window.get_width() // 3, window.get_height() // 3, (128, 0, 0)),
    SpriteObject(window.get_width() * 2 // 3, window.get_height() // 3, (0, 128, 0)),
    SpriteObject(window.get_width() // 3, window.get_height() * 2 // 3, (0, 0, 128)),
    SpriteObject(window.get_width() * 2// 3, window.get_height() * 2 // 3, (128, 128, 0)),
])

run = True
while run:
    clock.tick(60)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False 

    group.update()

    window.fill(0)
    group.draw(window)
    pygame.display.flip()

pygame.quit()
exit() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-12T03:25:52.457

[鼠标事件的 pygame 文档在这里](http://www.pygame.org/docs/ref/mouse.html)。

您可以使用与（如果需要）`pygame.mouse.get_pressed`协作的方法。`pygame.mouse.get_pos`

请记住通过主事件循环使用鼠标单击事件。事件循环更好的原因是“短点击”。您可能不会在普通机器上注意到这些，但在触控板上使用点击点击的计算机的点击周期过短。使用鼠标事件可以防止这种情况发生。

**编辑：** 要执行像素完美碰撞，请使用`pygame.sprite.collide_rect()`他们[的 sprites 文档](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.collide_rect)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-16T01:47:23.117

我一直在寻找这个问题的相同答案，经过多次挠头，这就是我想出的答案：

```
# Python 3.4.3 with Pygame
from sys import exit
import pygame
pygame.init()

WIDTH = HEIGHT = 300
window = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption('Crash!')

# Draw Once
rectangle = pygame.draw.rect(window, (255, 0, 0), (100, 100, 100, 100))
pygame.display.update()

# Main Loop
while True:
    # Mouse position and button clicking
    pos = pygame.mouse.get_pos()
    pressed1 = pygame.mouse.get_pressed()[0]

    # Check if rectangle collided with pos and if the left mouse button was pressed
    if rectangle.collidepoint(pos) and pressed1:
        print("You have opened a chest!")

    # Quit pygame
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            exit() 
```

# xcode - 如何在 xcode 中修复我的数学运算以给我正确的答案？

> ID：10990140
> 
> 赞同：1
> 
> 时间：2012-06-12T03:19:08.947
> 
> 标签：xcode, math, operations

我正在构建一个执行大量数学和计算的应用程序。我有显示在标签中的滑块值，我必须在函数中使用这些值来获得最终值。我有这些滑块值（这些数字是我作为用户输入来测试公式并查看它是否有效）：

```
Ageslider=20, weightslider=144, feetslider=5,inchesslider=9.03. 
```

我必须首先将重量、英尺和英寸转换为公制以插入整体公式，但用户不需要查看这些值。将这些转换为公制，公式如下：

```
weightslider/2.2,  feetslider*12*2.54,   inchesslider*2.54. 
```

现在对于整体公式：

```
66.473+5.0033*((feetslider*12.2.54)+(inchesslider*2.54))+13.7516*(weightslider/2.2)-6.755*ageslider 
```

或简化这是原始公式应该是什么：

```
66.473+5.0033*(height in cm)+13.7516*(weight in kg)-6.755*age 
```

当我输入公式时

```
(66.473+5.0033*((feetslider*12.2.54)+(inchesslider*2.54))+13.7516*(weightslider/2.2)-6.755*ageslider) 
```

然后运行程序并使用程序中的测试数字我无法得到最终值等于它应该的值。我已将公式放入 excel 中，并以正确的操作顺序通过我的计算器运行它并得到`1708.7373`. 当我在程序中运行它时，它会出现`1747.7`.

然后我尝试将 (float) 放在公式中滑块值的前面，程序得到了这个`1718.67`：然后我尝试将 (double) 放在滑块值的前面，程序得到了这个：`1689.62`. 这是我正在使用的从 xcode 中复制的实际代码：

```
label.text = [[NSString alloc] initWithFormat:@"%.2f",66.473+(5.0033*((feetslider.value*12*2.54)+(inchesslider.value*2.54)))+(13.7516*(weightslider.value/2.2))-(6.755*ageslider.value)]; 
```

它还提出了警告：Assignment 从整数中生成指针而不进行强制转换。我不知道那个是什么意思。

有人请帮助我，我已经坚持了几个小时试图改变公式以获得正确的答案并摆脱警告，但我无法终生得到它！

谢谢！

更新！！这是我现在拥有的确切代码，但仍然没有给出正确的答案。当我运行程序时，我仍然收到错误“赋值从整数中生成指针而不进行强制转换”。它显示在“if(malebutton = Yes).

-(IBAction)malebutton{ if (malebutton = YES) {

```
 //Intermediate values
    float totalWeight;
    totalWeight = weightslider.value*.45454545;
    float heightFeetToCM;
    heightFeetToCM =feetslider.value*12*2.54;
    float heightInchesToCM;
    heightInchesToCM = inchesslider.value*2.54;
    float totalHeight; 
    totalHeight = heightFeetToCM + heightInchesToCM;

    //Final Component Values
    float calculatedHeight;
    calculatedHeight = 5.0033*totalHeight;
    float calculatedWeight;
    calculatedWeight = 13.7516*totalWeight;
    float calculatedAge;
    calculatedAge = 6.755*ageslider.value;

    //Total Value
    float finalValue;
    finalValue = 66.473 + calculatedHeight + calculatedWeight - calculatedAge;

    totalcaloriesburnedlabel.text = [[NSString alloc] initWithFormat:@"%.2f",finalValue]; 
```

更新 2；

这是我将滑块连接到其标签的方式。它们的格式都是相同的，除了我在每个上显示了多少个小数。

`-(IBAction)changeLabelFeet { feetLabel.text = [[NSString alloc] initWithFormat: @"%.0f",feetSlider.value]; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:30:33.120

从原始答案更新：我回去自己在 Xcode 上尝试过。我开始只写值（浮点年龄 = 20;），看看问题是否出在计算中，最后得到正确的答案，即 1708.74（字符串中的浮点数设置为 .2f）。然后我决定看看从滑块中获取值是否是问题，从滑块上的年龄开始，其他所有内容仍然是硬编码的，我最初得到了错误的答案并很快意识到我没有在 IB 中连接我的滑块. 更正后，我得到了正确的答案。这是我的代码。

。H

```
@interface ViewController : UIViewController {

IBOutlet UILabel *myLabel;
IBOutlet UISlider *ageSlider;
IBOutlet UISlider *weightSlider;
IBOutlet UISlider *feetSlider;
IBOutlet UISlider *inchesSlider;

}

@property (nonatomic, retain) IBOutlet UILabel *myLabel;
@property (nonatomic, retain) IBOutlet UISlider *ageSlider;
@property (nonatomic, retain) IBOutlet UISlider *weightSlider;
@property (nonatomic, retain) IBOutlet UISlider *feetSlider;
@property (nonatomic, retain) IBOutlet UISlider *inchesSlider;

@end 
```

.m

```
@interface ViewController ()

@end

@implementation ViewController

@synthesize myLabel;
@synthesize ageSlider;
@synthesize weightSlider;
@synthesize feetSlider;
@synthesize inchesSlider;

-(void)calculateLabel{

//float age = 20;
float age = ageSlider.value;
NSLog(@"My age slider value is %.2f", ageSlider.value);
//float weight = 144;
float weight = weightSlider.value;
NSLog(@"My weight slider value is %.2f", weightSlider.value);
//float heightFeet = 5;
float heightFeet = feetSlider.value;
NSLog(@"My feet slider value is %.2f", feetSlider.value);
//float heightInches = 9.03;
float heightInches = inchesSlider.value;
NSLog(@"My inches slider value is %.2f", inchesSlider.value);

float weightKG = weight*.454545;
float heightFeetToCM = heightFeet * 12 * 2.54;
float heightInchesToCM = heightInches * 2.54;
float totalHeight = heightFeetToCM + heightInchesToCM;

float calculatedHeight = 5.0033 * totalHeight;
float calculatedWeight = 13.7516 * weightKG;
float calculatedAge = 6.755 * age;

float finalValue = 66.473 + calculatedHeight + calculatedWeight - calculatedAge;

myLabel.text = [NSString stringWithFormat:@"%.2f", finalValue];

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self calculateLabel];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

所以首先，检查以确保你的 NSLog 看起来像这样......

2012-06-17 23:57:53.557 Testing6[1404:10103] 我的年龄滑块值为 20.00

2012-06-17 23:57:53.559 Testing6[1404:10103] 我的体重滑块值为 144.00

2012-06-17 23:57:53.559 Testing6[1404:10103] 我的脚滑块值为 5.00

2012-06-17 23:57:53.559 Testing6[1404:10103] 我的英寸滑块值为 9.03

如果在那之后它不起作用，我唯一能想到的另一件事是，您的滑块可能不会连续更新（也就是显示滑块值的标签向用户显示年龄为 20，但是它真的设置为19）。如果我深入研究我的旧 Xcode 项目，我可能会为您提供帮助。让我知道。

# mysql - 在mysql中使用更新数据库时出错

> ID：10990147
> 
> 赞同：0
> 
> 时间：2012-06-12T03:20:55.103
> 
> 标签：mysql, wampserver

我在带有表的 wamp 服务器中使用命令更新`mobile_brands(id, display_size)`

```
UPDATE `mobile_brands` 
SET display_size="240 x 400" WHERE id=80,
SET display_size="240 x 400" WHERE id=81; 
```

当我运行命令时出错，如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:23:53.943

请参阅文档[`UPDATE`](https://dev.mysql.com/doc/refman/5.0/en/update.html)，您需要多个更新表达式：

```
UPDATE `mobile_brands` SET display_size="240 x 400" WHERE id=80;
UDPATE `mobile_brands` SET display_size="240 x 400" WHERE id=81;
... 
```

# python - sqlalchemy 在删除之前更新另一个模型

> ID：10990148
> 
> 赞同：5
> 
> 时间：2012-06-12T03:20:59.447
> 
> 标签：python, sqlalchemy

我将 sqlalchemy 与 postgresql 一起使用。我是 sqlalchemy 的新手。

我为模型“用户”创建了名为“to_user_id”的 forien 键来建模“邀请”，并且该键不可为空。

当我尝试使用删除模型“用户”的实例时

```
session.delete(user) 
```

并且 sqlalchemy 在删除之前自动将邀请的 to_user_id 设置为 NULL，并且 postgresql 引发以下错误。

```
IntegrityError: (IntegrityError) null value in column "to_user_id" violates not-null constraint 
```

我怎样才能禁用它？

这是我的模型的定义

```
class User(Base):
    '''
    User model
    '''
    __tablename__='User'
    id = Column(Integer,primary_key=True)

class Invitation(Base):
    '''
    Invitation model
    '''
    __tablename__ = 'Invitation'
    __table_args__ = (UniqueConstraint('appointment_id', 'to_user_id'),)
    id = Column(Integer, primary_key=True)

    appointment_id = Column(Integer,ForeignKey('Appointment.id',
        ondelete='CASCADE'), nullable=False)
    appointment = relationship('Appointment', backref=backref('invitations'),
    )

    from_user_id = Column(Integer,ForeignKey('User.id',
        ondelete='SET NULL'), nullable=True)
    from_user = relationship('User', backref=backref('sent_invitations'),
        primaryjoin='Invitation.from_user_id==User.id')

    to_user_id = Column(Integer,ForeignKey('User.id',
        ondelete='CASCADE'), nullable=False)
    to_user = relationship('User',backref=backref('received_invitations'),
        primaryjoin='Invitation.to_user_id==User.id',
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:51:56.917

你应该传递`cascade='delete'`给`to_user` `relationship()`. [请参阅此处的文档](http://docs.sqlalchemy.org/en/rel_0_6/orm/relationships.html#the-relationship-api)。

的`ondelete`参数`ForeignKey`影响 DDL 语句的生成，而不是 ORM 的行为方式。

# ember.js - 在 Ember.js 中创建一个虚假的“上下文”

> ID：10990150
> 
> 赞同：3
> 
> 时间：2012-06-12T03:21:07.137
> 
> 标签：ember.js

当 Ember 遍历对象集合并将它们输出到页面时，例如侧边栏中的链接列表，Ember 为每个元素创建一个上下文。单击该项目时，Ember 将该元素作为上下文传递给方法。

如何随意创建该上下文的虚假版本？我本质上想重用一个当前从 onclick 事件接收上下文的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:59:55.993

不太确定我是否理解这个问题，但会试一试。我认为你想要完成的事情可以通过直接设置上下文来完成，并且可能应该忽略视图。

```
clientsArray
....
    loadProjects: function(view){
        this.set('currentClient', view.context);
    },

    _setProject: function(){
        console.log('loading projects');

        var context = this.get('currentClient');
        PM.projectsArray.set('content', []);
        PM.projectsArray.pushObjects(context.get('projects'));
    }.observes('currentClient')
.... 
```

然后在您的“addProject”方法中，只需将“currentClient”（在 clientArray 中）设置为新的上下文（您的“project”对象）。观察者会捡起它并处理其余的事情。能够观察变化的值并相应地更新上下文是 ember 的优势之一；它可以防止你需要做很多明确的工作。它的目的是让您无需自己编写所有引导代码，由框架完成工作。制作假视图只会使代码复杂化。

# python - Gevent猴子未修补

> ID：10990151
> 
> 赞同：5
> 
> 时间：2012-06-12T03:21:07.483
> 
> 标签：python, monkeypatching, gevent

我正在分多个步骤执行我的程序。其中之一是使用 gevent + 猴子补丁

```
from gevent import monkey; monkey.patch_all() 
```

一切都很好。但是我可以在我用完后取消它吗？我想回到我的默认套接字函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T07:07:37.487

```
reload(socket) 
```

这篇博客文章在这里很好地描述了解决方案：[https ://emptysqua.re/blog/undoing-gevents-monkey-patching/](https://emptysqua.re/blog/undoing-gevents-monkey-patching/)

# c# - C# Metro App UI 更新

> ID：10990152
> 
> 赞同：1
> 
> 时间：2012-06-12T03:21:21.137
> 
> 标签：c#, multithreading, user-interface, microsoft-metro

我的问题与**此[链接](https://stackoverflow.com/questions/9540260/c-sharp-winrt-update-ui-from-thread)**相同。

我正在为**C# 中的 Metro Applications**开发新的 WinRT （win8 发布预览版）。问题是：我的应用程序我的程序**在后台运行一个线程，该线程**从服务器接收消息（实际上，我移植了一个 XMPP 客户端应用程序）。一些信息应该在 UI 中更新。

我试过那个链接。第二种方法似乎对我有用，但我发现VS2012RC 智能感知中**没有 Dispatcher.Invoke(...)**，这意味着没有这种扩展方法。

仔细搜索后，我想也许**这个[链接](https://stackoverflow.com/questions/9931453/metro-ui-update)**可以帮助我。但我不知道如何在这种情况下开始我的应用程序（因为我是 C# 的初学者）。

你能给我一些建议吗？如果您展示一些对我有很大帮助的代码片段，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:54:31.507

在您的 UI 线程中某处运行：

```
CoreDispatcher dispatcher = Windows.UI.CoreWindow.GetForCurrentThread().Dispatcher; 
```

然后从您的后台线程调用您刚刚创建`RunAsync`的变量中的函数。`dispatcher`

```
dispatcher.RunAsync(DispatcherPriority.Normal, <delegate to run on UI thread>); 
```

# django - Django视图不接受url参数

> ID：10990153
> 
> 赞同：0
> 
> 时间：2012-06-12T03:21:29.090
> 
> 标签：django, django-views, django-urls

我一直在尝试在 django 中开发一个简单的网络应用程序，但我遇到了一个错误。基本上不接受url中传递的参数，我得到了

/NECapp/offers/ offer() 处的 TypeError 恰好需要 2 个参数（给定 1 个）

[http://dpaste.com/757822/](http://dpaste.com/757822/)获取完整跟踪

该应用程序的快速概述：用户输入邮政编码并获得与该值相关的对象列表。无论我修改什么，代码总是在这一点上出现不同的错误，所以我将在这里转储大部分代码。由于我尝试过的事情很多，导入中可能有不必要的代码行，可能还有其他地方，所以要小心。

视图.py

```
from django.shortcuts import render_to_response
from django.http import HttpResponse
from models import Offer, ZipCode
from django.http import HttpRequest

def index(request):
    return render_to_response('NECapp/index.html')

def enterzipcode(request):
    return render_to_response('NECapp/enterzipcode.html')

def offers(request, zip):
    return HttpResponse('you entered %zip' %(zip)) 
```

应用程序的 urls.py

```
from django.conf.urls import patterns, include, url
from django.views.generic import ListView

from NECapp.models import Offer
from NECapp import views

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('NECapp',
    url(r'^$', 'views.index', name='index'),
    url(r'^enterzip/$', 'views.enterzipcode', name='zipcode'),
    url(r'^offers/(?P<zip>\d{5})/$', 'views.offers', name='offers'),
    url(r'^offers/$', 'views.offers'),   
) 
```

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:37:33.327

出现错误是因为当您调用 URL /NECapp/offers/?zip=55104 时，由于您已将 zip 作为查询字符串而不是作为参数传递，因此会调用第二个提供 URL 模式，并且由于您没有给出任何默认参数显示错误。异常值：offers() 正好接受 2 个参数（1 个给定）

```
def offers(request, zip):
    return HttpResponse('you entered %zip' %(zip)) 
```

你需要解决两件事：

1）根据您的 URL 模式，您的请求 URL 应该是 /NECapp/offers/55104/ 2）每当第二个 URL 模式被调用时，您都会收到错误。默认情况下修复它 args。

```
def offers(request, zip=""):
    return HttpResponse('you entered %zip' %(zip)) 
```

如果您尝试通过表单发布数据，请将 method="POST" 放入您的表单标签中，并且您不需要两个 URI 模式，因为所有表单数据都将在您的 request.POST 字典中可用。HTML：

```
<form action="/NECapp/offers/" method="post"> 
```

网址.py：

```
url(r'^offers/$', 'views.offers'), 
```

视图.py:\

```
def offers(request):
    zip=request.POST.get("zip")
    return HttpResponse('you entered %zip' %(zip)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:24:40.107

仔细查看您的 urls.py

```
url(r'^offers/(?P<zip>\d{5})/$', 'views.offers', name='offers'), 
```

与冲突

```
url(r'^offers/$', 'views.offers'), 
```

！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T03:38:17.757

要使其工作（`NECapp/offers/`URL），您只需将默认值添加到`zip`.

这是因为您`views.offers`在两种情况下执行视图，具体取决于请求的 URI：

1.  当“ `/offers/`”之后有某些内容时（您已传递邮政编码）-为此，您的 url 模式倒数第二个（带有 的那个`name='offers'`），
2.  当“”之后没有任何内容时`/offers/`（为此，您有最后一个 URL 模式）。

您的视图看起来与此类似：

```
def offers(request, zip=None):
    if zip is None:
        # No zip has been set (/offers/)
        return HttpResponse('you did not enter anything')
    else:
        # Some zip has been set (/offers/some_zip)
        return HttpResponse('you entered %zip' %(zip)) 
```

**编辑：**

Vivek 正确地指出，您正在调用`http://localhost:8000/NECapp/offers/?zip=55104`而不是`http://localhost:8000/NECapp/offers/55104`. 这就是为什么您匹配最后一个 URI 模式（带有`r'^offers/$'`规则的模式）并且在没有参数的情况下调用视图。如果您将使用我的解决方案，您将得到“ `you did not enter anything`”作为响应，因为您没有`zip`在 URL 中传递（实际上是在查询字符串中，如果您想传递，您应该在 URL 的主要部分传递它使用您的 URLconf）。

所以，简而言之，使用我的解决方案并`zip`像这样传递 URL `http://localhost:8000/NECapp/offers/55104`：. 或者，您可以摆脱这种模式，`zip`只使用从查询字符串[`request.GET.get(zip)`](http://django.me/request.GET)中获取。`zip`

# c# - 在 Windows 8 Release Preview 中运行 SharpDX 音频样本崩溃

> ID：10990158
> 
> 赞同：0
> 
> 时间：2012-06-12T03:22:18.403
> 
> 标签：c#, windows-8, sharpdx

我下载了最新的 SharpDX v2.2 并在 SharpDXSamples.sln 中构建了样本

![在此处输入图像描述](../Images/aaab2c64014d20c8296e10fe3ffa45af.png)

当我尝试运行一个使用 XAudio2 的示例时，

![在此处输入图像描述](../Images/494ad57eb3bd790087c79eb9a3b44f90.png)

示例崩溃并出现以下错误

![在此处输入图像描述](../Images/6a43937a3cb2f6715a8f37eeaa384074.png)

这是堆栈跟踪：

```
 at SharpDX.Result.CheckError()
   at SharpDX.Utilities.CreateComInstance(Guid clsid, CLSCTX clsctx, Guid riid, ComObject comObject)
   at SharpDX.XAudio2.XAudio2..ctor(XAudio2Flags flags, ProcessorSpecifier processorSpecifier)
   at SharpDX.XAudio2.XAudio2..ctor()
   at PlayDynamicSound.Program.Main(String[] args) in c:\Users\James\Documents\Visual Studio 2012\Projects\SharpDX-Full-2.2.0\Samples\XAudio2\PlayDynamicSound\Program.cs:line 38
   at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

关于发生了什么的任何想法？我需要安装其他库吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:45:17.137

目前，如果您安装了[DirectX Runtime June 2010 Runtime ，则 SharpDX 桌面示例正在运行](http://www.microsoft.com/en-us/download/details.aspx?id=8109)

它们还没有被移植到使用 DirectX11.1，尽管变化很小。如果要使用 DirectX11.1，则需要将引用的程序集从 standard-net20 更改为 Win8Desktop-net20，并且还需要修复几个编译错误（DirectX11.1 中更改/删除的方法）。

到目前为止，工作一直集中在 Windows 8 Metro 上，但未来的 SharpDX 版本有望提供在 DirectX June 2010 和 DirectX11.1 下运行的兼容桌面示例。

# c# - 多线程 GridView 更新

> ID：10990168
> 
> 赞同：0
> 
> 时间：2012-06-12T03:24:26.883
> 
> 标签：c#

在这里，我在 C# 中使用简单的逻辑。我从两个`DateTimePicker`s 中减去天数并生成与`GridView`总天数相同的行数。我把这个逻辑放在 a`Timer`中，它以 100 毫秒的间隔滴答并自动执行。这适用于 90-100 行，但如果它达到 1000 行，那么程序就会卡住。所以，我想我需要使用线程。我怎样才能做到这一点？我知道基本的多线程，并尝试了这个，但没有奏效：

```
private void timer1_Tick(object sender, EventArgs e)
{
    myMethod();
}

void myMethod() {
    ed_Picker.MinDate = sd_Picker.Value;
    TimeSpan ts = new TimeSpan();

    //GridView.Rows.cont

    label3.Text = ed_Picker.Value.CompareTo(sd_Picker.Value).ToString();
    //dateTimePicker2.MinDate = dateTimePicker1.Value;

    ts = ed_Picker.Value.Subtract(sd_Picker.Value);
    double d;

    d = Math.Ceiling(ts.TotalDays) + 1;
    label3.Text = d.ToString();
    DataGridViewRow row = new DataGridViewRow();

    GridView.RowCount = Int32.Parse(d.ToString()); // This is key line which I like to put in new Thread
    for (int i = 1; i <= GridView.RowCount; i++)
    {
        GridView.Rows[i - 1].Cells[0].Value = sd_Picker.Value.AddDays(Convert.ToDouble(i - 1)).ToLongDateString();
        GridView.Rows[i - 1].Cells[0].ReadOnly = true;
    }
    DateTimeConverter dtc = new DateTimeConverter();
    TimeSpan ts1 = new TimeSpan();

    try
    {
        for (int i = 0; i < GridView.RowCount; i++)
        {
            ts1 += Convert.ToDateTime(GridView.Rows[i].Cells[2].Value).Subtract(Convert.ToDateTime(GridView.Rows[i].Cells[1].Value));
        }
    }
    catch (Exception ex)
    {

    }

    label6.Text = ts1.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:52:36.917

以下是如何使用 BackgroundWorker 进行线程工作和更新 UI 的总体思路：

```
var worker = new BackgroundWorker {WorkerReportsProgress = true};
worker.DoWork += this.ThreadWorkMethod;
worker.ProgressChanged += this.ThreadProgressMethod;
worker.RunWorkerAsync();

...

private void ThreadWorkMethod(object sender, DoWorkEventArgs e)
{
    var worker = (BackgroundWorker)sender;

    for (int i = 0; i = 1000; i++)
    {
        // Time consuming operation
        Thread.Sleep(1000);

        worker.ReportProgress(i * 100d / 1000, i);
    }
}

private void ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    // Here you can access controls, etc.

    if (e.Progresspercentage == 100)
    {
        this.progLabel.Text = "100% Done";
    }
    else
    {
        this.progLabel.Text = string.Format("{0}% ({1} / 1000)",
                                            e.ProgressPercentage,
                                            e.UserState);
    }
} 
```

如果您也想收听该`RunWorkerCompleted`事件 - 您还可以从那里访问控件等。

所以 DoWork 方法就是做硬线程工作，并调用 ReportProgress 以便它可以在需要时适当地更改 UI。当 DoWork 方法完成（返回或完成）时，将自动调用 RunWorkerCompleted 事件。

# c++ - c ++在析构函数中删除向量类成员内存

> ID：10990172
> 
> 赞同：4
> 
> 时间：2012-06-12T03:25:02.973
> 
> 标签：c++, memory-management, vector

我有一个包含向量成员变量的类。我知道存储在堆栈上的向量超出范围时将被清理（即释放内存），但我不确定是否考虑销毁包含向量成员变量的类对象超出范围。

如果不是，那么破坏向量的适当方法是什么？

例如：

```
class fred {
    char *stuff;
    vector<int> v;

    fred() : stuff(), v() {}
    ~fred() {
         if (stuff) free(stuff);
         // now how do I clear up the vector v?  Will it be done automatically?
    }
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T03:28:20.293

矢量已经为您清理了！当一个类被破坏时，它的所有成员析构函数也会被调用。在这种情况下`v`，会调用 's 的析构函数，它会清理它分配的任何内容。

当您以与声明它们的相反顺序到达析构函数的关闭时，将调用非静态成员的 dtor `}`。然后调用您的基类析构函数（如果存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:49:21.157

I think you need not call DTOR for the vector. The DTOR will be called as soon as the object goes out of scope, meaning the DTOR of fred is Called.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:06:11.657

销毁对象总是只有一种方法，那就是通过其析构函数（相反，您可以通过多种方式构造对象）。STL 容器专门设计用于避免在数据结构中对内存进行这种微管理。如果您必须在 STL 容器中显式分配或释放内存，那么您做错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T03:28:05.517

当您销毁 fred 的实例时，将调用向量的析构函数。

# .net - 数据更改时，BindingSource.ListChanged 事件不会触发 - 不应该吗？

> ID：10990173
> 
> 赞同：0
> 
> 时间：2012-06-12T03:25:08.510
> 
> 标签：.net, vb.net, winforms, data-binding, devexpress

我试图让我的网格在数据库中更新基础数据时自动刷新。这不应该工作吗？还是我错过了什么？

我在我的数据集中创建了一个数据表。然后我创建了一个新表单并添加了一个 DataGridView（实际上我使用的是 DevExpress 的 XtraGrid，但我试图让它只与 Microsoft 控件一起使用）。我使用网格左上角的菜单将网格数据源设置为项目数据源中的数据表。然后，这会自动将数据集、BindingSource 和 TableAdapter 添加到表单中。

然后，当我添加一个 BindingSource.ListChanged 事件时，它会在表单加载时触发几次，但在任何基础数据发生更改时不会触发。

当数据库中的数据发生变化时，甚至应该触发吗？还是仅当数据从当前 VB.NET 进程中的其他位置更改时？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:38:55.203

我不确定 DevExpress XtraGrid 的行为，但对于大多数与列表的数据绑定，该`ListChanged`事件仅在列表被替换为全新的不同列表时触发。

如果列表保持不变，但添加了项目，则它不算作更改列表。通常，您需要放置一些列表，其中实现`INotifyCollectionChanged`接口以处理动态添加的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T03:42:49.827

listchanged 事件只会在绑定对象更改时触发，而不是在数据库中的数据更改时触发。

如果您使用 sqlclient 从数据库中检索数据，您可以实现 SQL 依赖[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T03:37:23.123

此事件在基础列表更改或列表中的项目更改时发生。不是当 db 改变时。

在这里，您的数据集或数据表是从数据库中的数据加载的，但加载的数据集或数据表在数据库和数据集数据之间没有实时连接。如果您需要保存/更新或刷新数据集，则必须调用相关方法来完成任务。

如果您从显示数据的同一 UI 更改数据，请调用网格刷新方法以反映对 gridview 的更改。

# go - 用“var”声明一个新的结构实例与在 Go 中使用“new”有什么不同？

> ID：10990174
> 
> 赞同：3
> 
> 时间：2012-06-12T03:25:18.933
> 
> 标签：go

下面的代码创建了一个可用的结构实例，`Car`. 这与使用有什么不同`new(Car)`？

例子：

```
type Car struct {
  make string
}

func Main() {
  var car Car; // how is this different than "car := new(Car)"?

  car.make = "Honda"
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T03:45:01.973

一个定义 Car 变量，另一个返回指向 Car 的指针。

```
var car Car      // defines variable car is a Car
car2 := new(Car) // defines variable car2 is a *Car and assigns a Car to back it 
```

`car := new(Car)`可以这样实现`var car Car`：

```
var x Car
car := &x 
```

# java - 如何获取从 url 下载的文件？（不要在浏览器中打开）

> ID：10990176
> 
> 赞同：1
> 
> 时间：2012-06-12T03:25:40.080
> 
> 标签：java, jsp, spring-mvc, download

我是 java 新手。我需要点击下载选项下载 pdf/txt/.xls 或任何文件。在我的情况下，我在数组列表中有某些值并在 jsp 中显示。在我的名单（名单）中，我有

```
name=rahul
url=files/en/software/rahul.txt
name=roshan
url=files/en/software/roshan.pdf 
```

当我迭代（名单）并在jsp中显示以上内容时，我的jsp

```
<td valign="top">${namelist.name}</td>

<td colspan="2" valign="top">                           
<a href="${namelist.url}"/>
<img src="/images/download.gif" alt="Download" border="0" align="right"></a><br/><br/>
</td> 
```

所以在我的 jsp 中，我在 url 中有很多用户名和相应的文件。单击下载文件在浏览器中打开，网址为 [http://www.xxx.com/files/en/software/roshan.pdf](http://www.xxx.com/files/en/software/roshan.pdf)

但我希望它在弹出窗口中打开，询问用户另存为/打开选项。当将此 url 传递给控制器​​时，我只得到值 /files/en/software/roshan.pdf。我在他们建议使用 response.setHeader("Content-Disposition", "attachment;filename="+name); 的每个地方都进行了搜索。

所以我创建了一个名为下载的控制器，点击下载我映射了这样的网址

```
<a href='<c:url value="/download.sp?name=${namelist.name}&downloadUrl=${namelist.url}"/>'>
<img src="/images/download.gif" alt="Download" border="0" align="right"></a><br/><br/> 
```

在我的控制器中。我不知道该怎么做，我是这样写的

```
public ModelAndView download(HttpServletRequest request, HttpServletResponse response) throws Exception {
        cat.debug(" download: begin");
        ModelAndView modelView = super.handleRequest(request, response);
        String url = request.getParameter("downloadUrl");
        String name = request.getParameter("name");
        response.setHeader("Content-Disposition", "attachment;filename="+name);
        String viewName = "swl_download";
        modelView.setViewName(viewName);
        return modelView;
} 
```

以上是打开具有相同名称的弹出窗口。我想在控制器中包含更多内容，以便单击下载文件应该是 url 中的相同文件（在上述控制器中包含/更改的内容）。请帮我解决这个问题。感谢我提前帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:51:14.813

需要查看 sql_download 视图在做什么。

一般来说，我在视图本身中设置内容配置。所以我的自定义 AbstractView 实现看起来像：

`response.setHeader("Content-disposition", "attachment; filename="+fileName);` `response.setContentType("application/vnd.ms-excel");` `OutputStream out = response.getOutputStream();` `helperClass.exportDataToExcel(data, out);`

内容类型也很重要，它可以帮助您的浏览器选择正确的应用程序来加载文档。

您应该知道这些标头只是对浏览器的建议，浏览器可以自由地以自己的方式解释它们。因此，您将无法强制所有浏览器显示“打开或保存”对话框。

希望这可以帮助。

# node.js - 回调挂钩到 AWS API

> ID：10990182
> 
> 赞同：1
> 
> 时间：2012-06-12T03:26:20.587
> 
> 标签：node.js, amazon-web-services

有谁知道一种方法或是否有人设计了一个聪明的解决方法来将回调/挂钩放入 Amazon API (http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/query-apis.html) 以便执行操作像创建实例一样，当实例处于运行状态时，可以简单地通过回调通知？

我在想我可以在 node.js 中编写一个循环来简单地检查所需的状态并最终在一定数量的请求后超时，但我想听听更好的编程方法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:36:58.277

除非 AWS API 支持某种通知端点（我对 API 不是很熟悉），否则您可能会陷入轮询。但是，您可以使用[an`EventEmitter`](http://nodejs.org/docs/latest/api/events.html)将其隐藏在公开回调的巧妙 API 后面。伪代码：

```
// aws_server.js

var EventEmitter = require('events').EventEmitter;
var util = require('util');

function AwsServer(some_data) {
  this.data = some_data;
  EventEmitter.call(this);
};
util.inherits(AwsServer, EventEmitter);

AwsServer.prototype.createInstance = function() {
  // Do something with an API to create an EC2 instance
  console.log("Creating instance, data:", this.data);

  // Here, you would begin polling for state changes, etc. waiting for
  // the server to change state. We will simulate this with a setTimeout call.
  setTimeout(function() {
    this.emit('running');
  }.bind(this), 3000);
};

module.exports = AwsServer;

// somewhere_else.js

var AwsServer = require('./aws_server')

var newServer = new AwsServer('some_data');
newServer.on('running', function() {
  console.log('New instance is running');
});

newServer.createInstance(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T05:44:39.980

最好的办法是在服务器 init.d 上添加一个 shell 脚本，该脚本将在服务器停止或启动时运行。

对于这个问题可能没用，但其他以编程方式检测实例是否打开的方法是使用 Amazon 的 EC2 shell 工具：

`ec2-describe-instance-status <ec2 instance id>`

[如此处](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeInstanceStatus.html)所述。如果机器没有运行，它将返回空白，如果是，则返回有关它的数据。

# c++ - 有没有办法像我的代码一样在 C++ 中调用多态反射？

> ID：10990184
> 
> 赞同：2
> 
> 时间：2012-06-12T03:26:53.043
> 
> 标签：c++, polymorphism

在 C++ 中，我将该类`Base`作为接口类和 2 个继承类：`Base1`并且`Base2`来自这样的`Base`类：

```
class Base{
    public:
        virtual void printSomething() = 0;
    // Some bla bla code...
};

class Base1 : public Base{
    public:
        Base1();
        void printSomething(); 
};

class Base2 : public Base{
    public:
        Base2();
        void printSomething(); 
}; 
```

通常，在我的 main.cpp 中，我必须包含以下代码：

```
Base *b;
string base_name = "Base1"; // or "Base2" 
if(base_name.compare("Base1") == 0){
     b = new Base1();
}else{
     b = new Base2();
} 
```

所以，我想使用 `Base *b = base_name()`而不是`if()else()`上面的块。在 C++ 中，这可能吗，如何？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T03:32:42.613

与 Java 不同，C++ 不提供对[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)概念的本机支持。您可以编写一个简单的函数来构造特定的`Base`实例。这称为[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)：

```
Base* create_base_instance(string name) {
  if (name == "Base1")
    return new Base1();
  if (name == "Base2")
    return new Base2();
  throw runtime_error("unknown class name");
}

Base *b;
string base_name = "Base1"; // or "Base2" 
b = create_base_instance(base_name); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T03:32:49.717

最简洁的答案是不。长答案是：如果您想要一个惯用的解决方案，请查看[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)设计模式。

另一种方法：您可以在映射中保留由字符串键入的代理对象，并使用该映射来创建这些代理对象（并在需要时克隆它们）。此方法对最终用户隐藏比较并将其推入标准库容器的深处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:46:28.393

使用 std::map 实现工厂模式。

```
template<typename T>
struct Factory
{
    static Base* Create()
    {
        return new T();
    }
};

typedef std::map<std::string, Base* (*)()> FunMap;
FunMap fun;

void Register()
{
    fun.insert(std::pair<std::string, Base*(*)()>("Derived1", Factory<Derived1>::Create));
    fun.insert(std::pair<std::string, Base*(*)()>("Derived2", Factory<Derived2>::Create));
}

void CreateTypeDemo2(const std::string& name)
{
    Base* bp = fun[name]();
    bp->Name();
} 
```

从 main 中，您可以通过这种方式调用该函数。

```
Register();
CreateTypeDemo2("Derived1");
CreateTypeDemo2("Derived2"); 
```

您甚至可以如下所示进行。在方法`CreateDerived2`中，您可以有不同的创建 Derived2() 的实现，而不是
Factory::Create 给我们的默认实现。

```
Base* CreateDerived2()
{
    return new Derived2();
}

void Register()
{
    fun.insert(std::pair<std::string, Base*(*)()>("Derived1",Factory<Derived1>::Create));
    fun.insert(std::pair<std::string, Base*(*)()>("Derived2",CreateDerived2));
} 
```

希望这可以帮助。

# jquery - jquery 导航菜单类似于 home depot 或 amazon

> ID：10990186
> 
> 赞同：0
> 
> 时间：2012-06-12T03:26:58.713
> 
> 标签：jquery, wordpress, menu, navigation

任何人都知道我如何在 wordpress 上创建一个 jquery 菜单，就像在 home depot 或 amazon 中找到的一样。左侧按部门商店下方的菜单？wordpress 有没有非常相似的东西：- 例如插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:45:40.933

虽然您在问题中指定了 jQuery，但您根本不需要任何 javascript；你可以用纯 CSS 来做，比如**[http://meyerweb.com/eric/css/edge/menus/demo.html](http://meyerweb.com/eric/css/edge/menus/demo.html)**和[http://www.noupe.com/css/100-great-css-menu-tutorials .html](http://www.noupe.com/css/100-great-css-menu-tutorials.html)显示。

有许多网站允许您设计自己的菜单并下载代码，例如

*   [http://www.cssmenumaker.com/](http://www.cssmenumaker.com/) ,
*   [http://purecssmenu.com/](http://purecssmenu.com/)，或
*   更多信息请访问[http://www.google.com/search?q=css+menu](http://www.google.com/search?q=css+menu)

# mysql - 分区语法mysql包含错误？

> ID：10990194
> 
> 赞同：1
> 
> 时间：2012-06-12T03:29:14.400
> 
> 标签：mysql, syntax, partitioning

我正在尝试创建下表，

```
CREATE TABLE IF NOT EXISTS `hashes` (
    `hash` binary(20) NOT NULL,
    `name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
    `category` tinyint(1) unsigned NOT NULL DEFAULT '0',
    `indexed` tinyint(1) unsigned NOT NULL DEFAULT '0',
    `dcma` tinyint(1) unsigned NOT NULL DEFAULT '0',
    PRIMARY KEY (`hash`),
    KEY `category` (`category`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci,
PARTITION BY LIST(`category`)( 
    PARTITION p0 VALUES IN(0), 
    PARTITION p1 VALUES IN(1), 
    PARTITION p2 VALUES IN(2), 
    PARTITION p3 VALUES IN(3),
    PARTITION p4 VALUES IN(4),
    PARTITION p5 VALUES IN(5),
    PARTITION p6 VALUES IN(6),
); 
```

分区用于`category`它所在的列`tinyint(1)`，每个数字对应一个类别。据我了解，我不能按枚举分区，但我认为这种方式可行吗？

我哪里错了？

**编辑**

错误如下，

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'PARTITION BY LIST(`category`)( PARTITION p0 VALUES IN(0), PARTITION ' at line 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:29:29.687

有两个语法错误。试试这个代码 -

```
 CREATE TABLE IF NOT EXISTS `hashes`(
      `hash` BINARY(20) NOT NULL,
      `name` VARCHAR(255) COLLATE utf8_unicode_ci DEFAULT NULL,
      `category` TINYINT(1) UNSIGNED NOT NULL DEFAULT '0',
      `indexed` TINYINT(1) UNSIGNED NOT NULL DEFAULT '0',
      `dcma` TINYINT(1) UNSIGNED NOT NULL DEFAULT '0',
--      PRIMARY KEY (`hash`),
      KEY `category` (`category`)
    )
    ENGINE = INNODB
    DEFAULT CHARSET = utf8
    COLLATE = utf8_unicode_ci
    PARTITION BY LIST (`category`) (
      PARTITION p0 VALUES IN (0),
      PARTITION p1 VALUES IN (1),
      PARTITION p2 VALUES IN (2),
      PARTITION p3 VALUES IN (3),
      PARTITION p4 VALUES IN (4),
      PARTITION p5 VALUES IN (5),
      PARTITION p6 VALUES IN (6)
    ); 
```

请注意，我已经注释掉了主键定义。分区有一些限制，其中之一 -*分区表的分区表达式中使用的所有列必须是该表可能具有的每个唯一键的一部分。换句话说，表上的每个唯一键都必须使用表分区表达式中的每一列。*

此处的更多信息 -[分区键、主键和唯一键](http://dev.mysql.com/doc/mysql-reslimits-excerpt/5.1/en/partitioning-limitations-partitioning-keys-unique-keys.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:05:37.003

如果这是您的代码的精确副本，我认为您有一个额外的逗号。

```
PARTITION BY LIST(`category`)( 
  PARTITION p0 VALUES IN(0), 
  PARTITION p1 VALUES IN(1), 
  PARTITION p2 VALUES IN(2), 
  PARTITION p3 VALUES IN(3),
  PARTITION p4 VALUES IN(4),
  PARTITION p5 VALUES IN(5),
  PARTITION p6 VALUES IN(6),
); 
```

去掉最后一个逗号

# java - 我如何使用 removeTableModelListener

> ID：10990196
> 
> 赞同：1
> 
> 时间：2012-06-12T03:29:44.250
> 
> 标签：java, jtable, tablemodel, abstracttablemodel, defaulttablemodel

我在运行时在我的表模型中实现了“addTableModelListener”，但我想再创建一个控件来删除它。我已经搜索了谷歌，但我没有找到任何合适的逻辑来实现删除表模型侦听器。

请帮我实现该`removeTableModelListener`方法。

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ScrollPaneConstants;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableModel;

public class CheckList extends JPanel {

    private static final long serialVersionUID = 1L;
    /**
    * Create the panel.
    */
    static JTable table;
    public int row;
    public int column;
    static MyTableModel model;
    static int t;

    public CheckList() {
        try {
            model = new MyTableModel();
            table = new JTable(model);
            table.setPreferredScrollableViewportSize(new Dimension(100, 70));
            table.setFillsViewportHeight(true);
            table.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);

            // Create the scroll pane and add the table to it.
            JScrollPane scrollPane = new JScrollPane(table);
            scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
            scrollPane.setBounds(10, 132, 998, 522);
            setLayout(null);
            add(scrollPane);

            JButton btnNewButton = new JButton("New button");
            btnNewButton.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent e) {
                    if (model.getRowCount() != 0) {
                        model.getDataVector().removeAllElements();

                    }
                    model.addrows();
                }
            });
            btnNewButton.setBounds(868, 33, 89, 23);
            add(btnNewButton);

            final JComboBox comboBox = new JComboBox();
            comboBox.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent e) {

                    switch (comboBox.getSelectedIndex()) {
                        case 0: {
                            model.removeTableModelListener(table.getModel());

                        }
                        case 1: {

                            model.addTableModelListener(new TableModelListener() {

                                public void tableChanged(TableModelEvent e) {

                                    try {// TODO Auto-generated method stub

                                        row = e.getFirstRow();
                                        column = e.getColumn();
                                        TableModel mod = (TableModel) e.getSource();
                                        String columnName = mod.getColumnName(column);
                                        Object data = mod.getValueAt(row, column);
                                        System.out.println(columnName + "  "
                                            + data + " row is " + row);
                                        System.out.println("value at"
                                            + model.getValueAt(row, 4));
                                        Boolean status = (Boolean) data;
                                        String check;
                                        // int value = (Integer) getValueAt(row, 4);
                                        // System.out.println(value);
                                        if (status == true) {
                                            check = "Recieved";

                                        } else {
                                            check = "not Recieved";
                                        }
                                        System.out.println(check);
                                        // int row1 = row + 1;
                                        model.st.executeUpdate("update temp1 set ["
                                            + columnName + "]='" + check
                                            + "' where [Packet ID]="
                                            + model.getValueAt(row, 4) + "");

                                    } catch (Exception t) {
                                        System.out.println(t);
                                    }

                                }
                            });

                            break;
                        }
                    }
                }
            });
            comboBox.setModel(new DefaultComboBoxModel(new String[]{"view",
                    "edit"}));
            comboBox.setBounds(158, 48, 81, 20);
            add(comboBox);

            JLabel lblNewLabel = new JLabel("Mode");
            lblNewLabel.setBounds(102, 51, 46, 14);
            add(lblNewLabel);

        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public class MyTableModel extends DefaultTableModel implements
        TableCellRenderer, TableModelListener {

        /**
        *
        */
        public void add() {
            addRow(new Object[]{"", "", "   ", "  ", "", " ", new Boolean(status)});
        }

        public void addrows() {

            try {

                st = login.con.createStatement();
                ResultSet re = st.executeQuery("select * FROM temp1 where operator="
                    + managment.log_id + "");

                while (re.next()) {
                    String n1 = re.getString("customer ID");
                    String n2 = re.getString("customer name");
                    String n3 = re.getString("packet id");
                    String n4 = re.getString("packet type");
                    String n5 = re.getString("reciever id");
                    String n6 = re.getString("reciever name");
                    String n7 = re.getString("reciever status");
                    if (n7.equals("Recieved")) {
                        status = true;

                    } else {
                        status = false;
                    }
                    addRow(new Object[]{"" + n1 + "", " " + n2 + "",
                            "   " + n5 + "", "  " + n6 + "", "  " + n3 + "",
                            "  " + n4 + "", new Boolean(status)});
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                System.out.println(e);
            }
        }
        private static final long serialVersionUID = 1L;
        /*
        *
        */
        public Statement st;
        boolean status;
        public int row;
        public int column;

        /**
        *
        */
        public MyTableModel() {
            // TODO Auto-generated constructor stub

            addColumn("sender ID");
            addColumn("sender Name");

            addColumn("Recieving ID");
            addColumn("Reciever Name");

            addColumn("Packet ID");
            addColumn("Packet Category");
            addColumn("reciever status");

        }

        @Override
        public int getColumnCount() {
            // TODO Auto-generated method stub
            return super.getColumnCount();
        }

        @Override
        public int getRowCount() {
            // TODO Auto-generated method stub
            return super.getRowCount();
        }

        @Override
        public String getColumnName(int column) {
            // TODO Auto-generated method stub
            return super.getColumnName(column);
        }

        @Override
        public Object getValueAt(int row, int column) {
            // TODO Auto-generated method stub
            return super.getValueAt(row, column);
        }

        @Override
        public boolean isCellEditable(int row, int column) {

            return super.isCellEditable(row, column);

        }

        public Class<?> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        @Override
        public void setValueAt(Object aValue, int row, int column) {
            // TODO Auto-generated method stub
            super.setValueAt(aValue, row, column);
            // System.out.println("new value");
            // printDebugData();
        }

        @Override
        public Component getTableCellRendererComponent(JTable arg0,
            Object arg1, boolean arg2, boolean arg3, int arg4, int arg5) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void tableChanged(TableModelEvent arg0) {
            // TODO Auto-generated method stub
        }
    }
// @Override
// public void addTableModelListener(TableModelListener l) {
// // TODO Auto-generated method stub
//
// super.addTableModelListener(new TableModelListener() {
//
// @Override
// public void tableChanged(TableModelEvent e) {
//
// try {// TODO Auto-generated method stub
// row = e.getFirstRow();
// column = e.getColumn();
// TableModel mod = (TableModel) e.getSource();
// String columnName = mod.getColumnName(column);
// Object data = mod.getValueAt(row, column);
// System.out.println(columnName + "  " + data
// + " row is " + row);
// System.out.println("value at" + getValueAt(row, 4));
// Boolean status = (Boolean) data;
// String check;
// // int value = (Integer) getValueAt(row, 4);
// // System.out.println(value);
// if (status == true) {
// check = "Recieved";
//
// } else {
// check = "not Recieved";
// }
// System.out.println(check);
// // int row1 = row + 1;
// st.executeUpdate("update temp1 set [" + columnName
// + "]='" + check + "' where [Packet ID]="
// + getValueAt(row, 4) + "");
//
// } catch (Exception t) {
// System.out.println(t);
// }
//
// }
// });
// }

    /*
    * private void printDebugData() { int numRows = getRowCount(); int numCols
    * = getColumnCount();
    *
    * for (int i = 0; i < numRows; i++) { System.out.print(" row " + i + ":");
    * for (int j = 0; j < numCols; j++) { System.out.print(" " + getValueAt(i,
    * j)); } System.out.println(" ");
    *
    * }
    *
    * System.out.println("--------------------------"); }
    */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:34:11.743

将 存储`TableModelListener`在最终的局部变量中。您将可以在 actionPerformed 中访问它：

```
final TableModelListener modelListener = new TableModelListener() {
    ...
};
final JComboBox comboBox = new JComboBox();
comboBox.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        switch (comboBox.getSelectedIndex()) {
            case 0: {
                model.removeTableModelListener(modelListener);
                break;
            }
            case 1: {
                model.addTableModelListener(modelListener);
            }
        }
    }); 
```

作为一般性观察，我会建议创建`TableModelListener`一个类成员变量，但您的许多变量都是`static`. 我建议避免制作这些变量`static`。

# haskell - 解释阅读/显示是如何工作的？

> ID：10990201
> 
> 赞同：0
> 
> 时间：2012-06-12T03:30:30.387
> 
> 标签：haskell

有人可以解释一下阅读/显示是如何工作的。我找不到任何教程。我已经搜索了 4 天的糟糕的 haskell 文档，我感到非常沮丧。

今晚有人可以成为救世主并帮助我将 int 转换为字符串，以便我可以反转字符串值。

谢谢你。

编辑..添加我当前的代码..

```
mult_add d s = d + 10*s

form_number_back d = foldr mult_add 0 d

form_number_front d = reverse[(show $ read (form_number_back(d)))] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:40:03.993

写出类型会有所帮助。

```
 mult_add :: Int -> Int -> Int
 form_number_back :: [Int] -> Int
 read :: [Char] -> Int
 show :: Int -> [Char]
 reverse :: [a] -> [a] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:50:23.873

`read` converts a string to an Int (in your case), whereas `show` converts an Int to a string.

It looks like `form_number_back` returns an `Int`, so you just need to `show` it, not `read` it.

Also, `show` returns a string (in your case, `[Char]`) so there's no need to put another `[...]` around the result.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T03:52:14.443

您的问题似乎是您和其他一些人在 SO 上正在运行的对话的一部分——这对我来说很好——但是试图在没有其他上下文的情况下回答你的问题除了建议你查看 Learn you a Haskell 教程之外很难关于主题：

[http://learnyouahaskell.com/types-and-typeclasses](http://learnyouahaskell.com/types-and-typeclasses)

# sql-server - 在 SQL Server 2008 中排除特殊字符

> ID：10990204
> 
> 赞同：1
> 
> 时间：2012-06-12T03:31:01.043
> 
> 标签：sql-server

我正在尝试编写一个查询来清理/删除数据中的一些异常。我的数据包含以下元素 -

```
VALUE-
<4.5 
```

在这种情况下，我需要的是由于特殊字符而删除这些行或返回以下内容

```
VALUE
4.5 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:34:41.710

你可以做一个简单的更新和替换

```
UPDATE dbo.table 
Set Column1 = Replace(Column1, '<', '') 
```

和任何其他

```
UPDATE dbo.table 
Set Column1 = Replace(Replace(Column1, '<', ''), ';', '') 
```

# android - Android延迟加载在模拟器上工作，而不是在设备中

> ID：10990206
> 
> 赞同：0
> 
> 时间：2012-06-12T03:32:07.813
> 
> 标签：android, android-emulator, lazy-loading

我找到了一个延迟加载的例子，我相信我已经正确地实现了它。它在模拟器中正常工作，但是当我在我的设备上运行相同的代码时，它不起作用。它不会下载图像，并且我已检查以确认该设备已连接到互联网。

我不确定为什么我的代码只能在模拟器上运行，所以我创建了一个新的 AVD，希望删除缓存。在我的新 AVD 上，它像以前一样正常工作，但是当我尝试我的设备时，它一开始可以工作，但仅在两次尝试后就失败了。我的代码仍然没有下载图像。

为什么它可以在 AVD 中运行但不能在我的设备上运行，是否有一个常见的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:57:30.737

使用下面的链接，它对我有用。

[延迟加载列表视图](https://github.com/thest1/LazyList)

# android - Android中推送通知的困惑

> ID：10990211
> 
> 赞同：1
> 
> 时间：2012-06-12T03:32:59.687
> 
> 标签：android, push-notification

我遵循了这个推送通知[教程](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)。

当我完成教程时，我发现有两个类没有使用 which are`AuthenticationUtil`和`MessageUtil`.

此外，[谷歌登录](https://www.google.com/accounts/ClientLogin)，这个链接似乎无法使用。其次，这是 Android 设备的令牌 ID 还是仅帐户？我认为推送通知是将消息推送到 Android 设备的令牌 ID。

另一方面，我发现`bundle.putExtra(key, value)`所有的键都没有使用它。例如放入`"app"`但`C2DMRegistrationReceiver()`没有得到密钥。

在这种情况`sendRegistrationIdToServer()`下，似乎从来没有被召唤过。

我对本教程关于推送通知感到困惑。

谁能指导我或给我关于推送通知的可行教程或示例？

我希望专业人士指出我的错误所在。

这是我的注册ID

```
public static final String[] REGISTRATION_ID = {
        "APA91bFV6MwoAH0UNop69PZ2liKpSBUHSHenIuPzh44_6GdGKzVCLvoH_NM31eMZMVLZi-SAIFwP4iZaE72dSWkIh3GaD0RQYpPm9zO0ARWmnoxFyyyreL_KpQ9Qd_p0broclT12RhA4Ymk0cBT00CmpsbSHIwyxig",
        "APA91bEwmxgvs7zNbKC4p0n4DoTEM73DTihnQgBOP8Gxhf2sVW-fgltugDgS1Fh2S4KvN1wQHbMNJEIzieJ9F1nNPqs3NWeKGbB7IBYpKJq4xmN4Z7uzkjZQQUKGD8jW--AwfQY5McINBto9GAL_87_u5WkIq-kx3g",
        "APA91bH63Zgxn1X_MZ56UzrlRpffvmiLAIsqxvBUTMUHP2O_MT_VU9Ork_edXKHlml-PZSkjKEqdk8EKv5HvxbPdK1Vva3WtmqsPZfhXzEbtNIrwrqIvvRf7hL835rDc4t2E8EKUBj1dX2ta0OxY5pY3Xlhkyb1sBg",
        "APA91bGqT5Wo6eUaMdqT5r9TlGbKSX6GN2W6r-RjrRXz5T5v3j87flcQRyfSajmMNGXuPVe-fwZydRmvyYu63tWnYohDmpJyKkXOxs8Vx6P_FplFQ__ufR_hekwqGOspeUc6bfc8fhbMPGN3Ft9l-bfrghJwwk79jw"}; 
```

消息实用程序

```
public static int sendMessage(String auth_token, String registrationId,
        String message, String title) throws IOException {

    StringBuilder postDataBuilder = new StringBuilder();
    postDataBuilder.append(PARAM_REGISTRATION_ID).append("=")
            .append(registrationId);
    postDataBuilder.append("&").append(PARAM_COLLAPSE_KEY).append("=")
            .append("0");
    postDataBuilder.append("&").append("data.payload").append("=")
            .append(URLEncoder.encode(message, UTF8));
    postDataBuilder.append("&").append("data.title").append("=")
            .append(URLEncoder.encode(title, UTF8));

    byte[] postData = postDataBuilder.toString().getBytes(UTF8);

    // Hit the dm URL.

    URL url = new URL("https://android.clients.google.com/c2dm/send");
    HttpsURLConnection
            .setDefaultHostnameVerifier(new CustomizedHostnameVerifier());
    HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
    conn.setDoOutput(true);
    conn.setUseCaches(false);
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Type",
            "application/x-www-form-urlencoded;charset=UTF-8");
    conn.setRequestProperty("Content-Length",
            Integer.toString(postData.length));
    conn.setRequestProperty("Authorization", "GoogleLogin auth="
            + auth_token);

    OutputStream out = conn.getOutputStream();
    out.write(postData);
    out.close();

    int responseCode = conn.getResponseCode();
    return responseCode;
}

private static class CustomizedHostnameVerifier implements HostnameVerifier {
    public boolean verify(String hostname, SSLSession session) {
        return true;
    }
} 
```

消息发送者

```
public static void main(String[] args) throws IOException {
    String token = AuthenticationUtil.getToken(SecureStorage.USER,
            SecureStorage.PASSWORD);

    for (int i = 0; i < ServerConfiguration.REGISTRATION_ID.length; i++) {
        MessageUtil.sendMessage(token,
                ServerConfiguration.REGISTRATION_ID[i], "12358",
                "印尼羽賽：馬2單1雙止步入選賽");
        System.out.println(ServerConfiguration.REGISTRATION_ID[i]
                .toString());
    }
    System.out.println(token);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:07:21.550

您应该按照[本](https://developers.google.com/android/c2dm/)教程进行 android c2dm 实现。

对于服务器，您可以使用任何东西，互联网上提供的一些代码示例。[对于服务器，我使用了名为“ C2DM Sharp](https://github.com/Redth/C2DM-Sharp) ”的 .NET 库

这个过程非常简单，就像...

*   [首先在 - https://developers.google.com/android/c2dm/signup](https://developers.google.com/android/c2dm/signup)上注册您的 c2dm 谷歌电子邮件
*   在 Android 2.2 或更高版本上运行 android 应用程序并发送您可以在“C2DMReceiver”中获取的注册 ID 或通过写入 LOG 获取该 ID
*   使用服务器代码，出于测试目的，将您的registrationID粘贴到服务器代码中，您就可以开始了。

C2DM 的基本流程是... [为 C2DM 注册电话](https://developers.google.com/android/c2dm/#registering)->[获取registrationID](https://developers.google.com/android/c2dm/#handling_reg) -> 将registrationID 发送到服务器 -> 服务器使用google id 获取auth token ->[服务器使用registrationID 和auth token 发送消息。](https://developers.google.com/android/c2dm/#push)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:57:58.677

**适用于 Android 的 Google 云消息传递**

**重要提示：C2DM（Android 云到设备消息传递框架）已于 2012 年 6 月 26 日正式弃用。**这意味着 C2DM 已停止接受新用户和配额请求。不会向 C2DM 添加任何新功能。但是，使用 C2DM 的应用程序将继续工作。鼓励现有 C2DM 开发人员迁移到新版本的 C2DM，称为 Android 版 Google Cloud Messaging (GCM)。有关更多信息，请参阅 C2DM 到 GCM 迁移文档。开发人员必须使用 GCM 进行新的开发。

请检查以下链接：

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:33:16.217

请在这里查看我的问题：

[C2DM 服务器。我们现在应该使用 OAuth 吗？](https://stackoverflow.com/questions/10859246/c2dm-server-should-we-use-oauth-now)

有一些信息和链接到谷歌组的答案。

简而言之..

似乎 OAuth2 可以工作，但我没有找到任何工作示例来实现

客户端登录有效，这是我困惑的地方。你需要：

1.  设置谷歌帐户。我选择了 mynamec2dm@gmail.com 之类的东西。
2.  使用此电子邮件注册 C2DM。这个很重要。
3.  在服务器端使用您设置的电子邮件/密码来获取身份验证令牌。
4.  使用此令牌从服务器发送消息。

其他一切都与所有教程中的一样。

# sql - 正则表达式替换字符串中的 TO_DATE

> ID：10990213
> 
> 赞同：0
> 
> 时间：2012-06-12T03:33:33.547
> 
> 标签：sql, regex, oracle

我有一个字符串，其中有一个 TO_DATE 函数。我想用 SYSDATE 替换这个 TO_DATE 调用。

例如，我的字符串基本上是一个 SQL 插入或更新，所以我有类似的东西

```
INSERT INTO table_a (col_a, col_b, col_c, updt_dt) VALUES ('A', 'B', 'C', to_date('2012-06-11 22:10:44', 'YYYY-MM-DD HH24:MI:SS')); 
```

我想用这个替换 TO_DATE 调用：

```
INSERT INTO table_a (col_a, col_b, col_c, updt_dt) VALUES ('A', 'B', 'C', SYSDATE); 
```

请记住，整个插入语句位于一个数据库字段中。那么，我怎样才能`regexp_replace`用 SYSDATE 替换 TO_DATE 调用呢？

我正在运行 Oracle 10gR2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:54:08.530

`sed`在 Linux 上使用：

`sed -e "s/to_date([A-Za-z0-9:' ,-]\+)/sysdate/g" <<< "INSERT INTO table_a (col_a, col_b, col_c, updt_dt) VALUES ('A', 'B', 'C', to_date('2012-06-11 22:10:44', 'YYYY-MM-DD HH24:MI:SS'));"`

如果您不使用 linux，则查找/替换正则表达式为：

`s/to_date([A-Za-z0-9:' ,-]+)/sysdate/g`

它应该与编辑器使用的大多数正则表达式引擎兼容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:37:34.193

如果您的字符串仅包含一个 to_date 函数并且 to_date 函数始终具有相同的长度，那么您可以使用 instr 获取 to_date 第一次出现的位置。

您的陈述大致如下所示：

更新 ... 设置字段 = substr(field, 1, instr(..)-1) || '系统日期' || substr(field, instr(..)+99) 其中..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T13:49:49.677

我使用正则表达式来挑选 to_date 部分并替换为 'sysdate': 'to_date[^)]*)'

# fonts - 如何在网页中插入阿拉伯文字？

> ID：10990214
> 
> 赞同：1
> 
> 时间：2012-06-12T03:33:37.080
> 
> 标签：fonts, web

我已经为客户建立了一个网站，我仍在更新它。现在我的客户还想要一个阿拉伯语版本的网站。我对此没有任何经验。如何在 adobe Dreamweaver 中插入阿拉伯语文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:49:21.877

put

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

on `head` tag and then put directly arabic text on your dreamweaver . like

```
<div>بعض النصوص العربية</div> 
```

that will works

# windows - RegSvr32.exe 的 /n 和 /i 参数有什么区别？

> ID：10990216
> 
> 赞同：3
> 
> 时间：2012-06-12T03:33:42.947
> 
> 标签：windows, winapi, com

为了注册一个 COM 服务器，我们在提升模式下运行类似的东西：

```
regsvr32.exe com.dll 
```

要执行每用户注册，请在用户帐户中执行：

```
regsvr32.exe /n /i:user com.dll 
```

regsvr32.exe 支持以下参数：

```
/u - Unregister server 
/i - Call DllInstall passing it an optional [cmdline]; when used with /u calls dll uninstall 
/n - do not call DllRegisterServer; this option must be used with /i 
/s – Silent; display no message boxes (added with Windows XP and Windows Vista) 
```

在 Delphi 中创建 COM 服务器时，导出了以下方法：

```
exports
  DllGetClassObject,
  DllCanUnloadNow,
  DllRegisterServer,
  DllUnregisterServer,
  DllInstall; 
```

我注意到这些会发生：

1.  “regsvr32.exe com.dll”调用 DllRegisterServer。
2.  “regsvr32.exe /u com.dll”调用 DllUnregisterServer。
3.  “regsvr32.exe /n /i:user com.dll”调用 DllInstall。
4.  “regsvr32.exe /u /n /i:user com.dll”调用 DllInstall。

我对参数 /n 和 /i 以及 DllUnregisterServer 和 DllInstall 感到困惑。有什么不同吗？

另外，为什么“/u /n /i:user”调用Dllinstall？我注意到“HKEY_CURRENT_USER\Software\Classes”中的相应注册表项已被删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T04:48:46.723

[DllInstall() 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759846.aspx)解释了差异：

> DllInstall 仅用于应用程序安装和设置。它不应该被应用程序调用。它的用途类似于 DllRegisterServer 或 DllUnregisterServer。与这些函数不同，DllInstall 接受一个输入字符串，该字符串可用于指定各种不同的操作。这允许根据任何适当的标准以多种方式安装 DLL。
> 
> 要将 DllInstall 与 regsvr32 一起使用，请添加一个“/i”标志，后跟一个冒号 (:) 和一个字符串。该字符串将作为 pszCmdLine 参数传递给 DllInstall。如果省略冒号和字符串，pszCmdLine 将设置为 NULL。以下示例将用于安装 DLL。
> 
> regsvr32 /i:"Install_1" dllname.dll
> 
> 调用 DllInstall，bInstall 设置为 TRUE，pszCmdLine 设置为“Install_1”。要卸载 DLL，请使用以下命令：
> 
> regsvr32 /u /i:"Install_1" dllname.dll
> 
> 对于上述两个示例，还将调用 DllRegisterServer 或 DllUnregisterServer。要仅调用 DllInstall，请添加“/n”标志。
> 
> regsvr32 /n /i:"Install_1" dllname.dll

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T03:44:06.990

我的建议是完全跳过使用 regsvr32.exe —— 自己完成这项工作同样容易：

```
int register(char const *DllName) { 
        HMODULE library = LoadLibrary(DllName); 
        if (NULL == library) { 
                // unable to load DLL 
                // use GetLastError() to find out why. 
                return -1;      // or a value based on GetLastError() 
        } 
        STDAPI (*DllRegisterServer)(void); 
        DllRegisterServer = GetProcAddress(library, "DllRegisterServer"); 
        if (NULL == DllRegisterServer) { 
                // DLL probably isn't a control -- it doesn't contain a 
                // DllRegisterServer function. At this point, you might 
                // want to look for a DllInstall function instead. This is 
                //  what RegSvr32 calls when invoked with '/i' 
                return -2; 
        } 
        int error; 
        if (NOERROR == (error=DllRegisterServer())) { 
                // It thinks it registered successfully. 
                return 0; 
        } 
        else 
                return error; 
} 
```

这个特定的代码调用`DllRegisterServer`，但根据需要将其参数化为 call `DllInstall`、`DllUninstall`等是微不足道的。这消除了关于何时调用什么等的任何问题。

# ruby-on-rails - 查找网络应用客户端的操作系统

> ID：10990224
> 
> 赞同：1
> 
> 时间：2012-06-12T03:35:26.440
> 
> 标签：ruby-on-rails, ruby, operating-system, client-side

我有一个要求，我必须找到我的网络应用程序用户的操作系统详细信息。如果用户在 Windows 上运行，它应该给出“Windows 7 ... Blah blah” 如果 Linux “Ubuntu.. blah..blah OR Fedora .. ..” 如果 Debian “任何”版本的 Debian。

谁能建议我们如何做到这一点？我看了一下[sys-uname](https://rubygems.org/gems/sys-uname) gem。但这只是让我知道服务器端信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:47:35.910

你必须使用`request.env['HTTP_USER_AGENT']`

我找到了一个示例代码。

```
 def getBrowser(bt)
    rs=false
    ua=request.env['HTTP_USER_AGENT'].downcase
    isOpera = ua.index('opera') ? true : false
    isSafari = (ua =~ /webkit|khtml/) ? true : false
    isSafari3 = (ua.index('webkit/5')) ? true : false
    isGecko = (!isSafari and ua.index('gecko')) ? true : false
    isGecko3 = (!isSafari and ua.index('rv:1.9')) ? true : false
    isIE = (!isOpera and ua.index('msie')) ? true : false
    isIE7 = (!isOpera and ua.index('msie 7')) ? true : false
    case bt
      when 0  #isKonqueror
        if ua.index('konqueror') then rs=true end
      when 1  #isOpera
        rs=isOpera
      when 2  #isSafari
        rs=isSafari
      when 3  #isSafari2
        rs=isSafari && !isSafari3
      when 4  #isSafari3
        rs=isSafari3
      when 5  #isIE
        rs=isIE
      when 6  #isIE6
        rs=isIE && !isIE7
      when 7  #isIE7
        rs=isIE7
      when 8  #isGecko
        rs=isGecko
      when 9  #isGecko2
        rs=isGecko && !isGecko3
      when 10 #isGecko3
        rs=isGecko3
      when 11 #isWindows
        if ua.index('windows') or ua.index('win32') then rs=true end
      when 12 #isMac
        if ua.index('macintosh') or ua.index('mac os x') then rs=true 
end
      when 13 #isAir
        if ua.index('adobeair') then rs=true end
      when 14 #isLinux
        if ua.index('linux') then rs=true end
      when 15 #isSecure
        s = request.env['SERVER_PROTOCOL'].downcase
        if s.index('https') then rs=true end
    end
    rs
  end 
```

**编辑**：创建另一个操作来确定操作系统

```
def get_operating_system
  if request.env['HTTP_USER_AGENT'].downcase.match(/mac/i)
    "Mac"
  elsif request.env['HTTP_USER_AGENT'].downcase.match(/windows/i)
    "Windows"
  elsif request.env['HTTP_USER_AGENT'].downcase.match(/linux/i)
    "Linux"
  elsif request.env['HTTP_USER_AGENT'].downcase.match(/unix/i)
    "Unix"
  else
    "Unknown"
  end
end 
```

希望能帮助到你！

# redmine - 通过 gmail 的 redmine 电子邮件通知中的错误

> ID：10990226
> 
> 赞同：4
> 
> 时间：2012-06-12T03:35:58.273
> 
> 标签：redmine, ubuntu-10.04

我在 Ubuntu 10.04.2 上设置 redmine

这是我的 email.yml：

```
# Outgoing email settings

production:
  delivery_method: :smtp
  smtp_settings:
    tls:true
    enable_starttls_auto: true
    address: "smtp.gmail.com"
    port: "587"
    domain: "smtp.gmail.com"
    authentication: :plain
    user_name: "******@gmail.com"
    password: "*****"

development:
  delivery_method: :smtp
  smtp_settings:
    tls:true
    address: "smtp.gmail.com"
    port: "587"
    domain: "smtp.gmail.com"
    authentication: :plain
    user_name: "******@gmail.com"
    password: "*****" 
```

我以root身份启动redmine服务器，使用管理员登录redmine，然后**管理>设置>电子邮件通知** ，然后通过单击底部的链接发送测试邮件

但我得到了这个： **发送邮件时发生错误（getaddrinfo：名称或服务未知）**

有人通过gmail成功发送电子邮件吗？请给我一些建议

提前谢谢！

------------追加1----

我将**config/email.yml****中的“** **production:** ”复制到 /etc/redmine/default/configuration.yml中的“ **# ==== SMTP server at using TLS (GMail)production:** ” 并修改“ **#所有环境的默认配置选项**“在**configuration.yml的底部**

 ******有用！

[关闭]******

# c# - 使用 LINQ 过滤 2 个列表

> ID：10990232
> 
> 赞同：1
> 
> 时间：2012-06-12T03:36:42.290
> 
> 标签：c#, .net, linq

我有两个清单：

```
一种。要求的设施
湾。有设施的单位。

```

我想过滤那些具有任何一种“要求的便利设施”的单位。我尝试使用`foreach`循环来实现相同的结果，但我相信使用 LINQ 应该更容易。有人可以帮忙\建议吗？

```
UnitAmenities unitSearchRequestAmenities = unitSearchRequest.Amenities;

var exactMatchApartmentsFilteredByAmenities= new Units();
IEnumerable<string> requestAmenitiesIds =  unitSearchRequestAmenities.Select(element => element.ID);
foreach (var unitCounter in ExactMatchApartments)
{
    IEnumerable<string> unitAmenities = unitCounter.Amenities.Select(element => element.ID);

    foreach (var requestAmenityId in requestAmenitiesIds)
    {
        foreach (var unitAmenity in unitAmenities)
        {
            if (requestAmenityId == unitAmenity)
            {
                exactMatchApartmentsFilteredByAmenities.Add(unitCounter);
                //break to the outmost foreach loop
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:59:45.523

您可以根据是否符合 Intersect 规则进行过滤

```
var matchedAmenities = ExactMatchApartments.Where(ema => ema.Amenities
                                               .Any(x => unitSearchRequestAmenities
                                                   .Count(y => y.ID == x.ID) == 1));
exactMatchApartmentsFilteredByAmenities.AddRange(matchedAmenities); 
```

`Intersect`鉴于默认的 LINQ`Intersect`扩展不支持 lambda 表达式，这有点“自定义” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:49:37.220

很难从您的类型中分辨出来，但我认为以下内容应该可以解决问题

```
from unit in ExactMatchApartments
from amenity in unit.Amenities
join requestedAmenity in unitSearchRequestAmenities
on amenity.ID equals requestedAmenity.ID
select unit 
```

在这种情况下，查询表达式比点表示法更易于阅读和理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:04:11.213

谢谢杰森，我相信它一定是相交而不是例外。我已将代码更改为以下内容：

```
var amenities = unitSearchRequest.Amenities;
if (amenities.Count > 0)
{
    //filter the unit's amenities's id's with the search request amenities's ID's.
    var exactMatchApartmentsFilteredByAmenities= new Units();
    var requestAmenitiesIds = amenities.Select(element => element.ID);
    foreach (var unitCounter in ExactMatchApartments)
    {
        var unitAmenities = unitCounter.Amenities.Select(element => element.ID);
        var intersect    =unitAmenities.Intersect(requestAmenitiesIds);
        if (intersect.Any())
        {
            exactMatchApartmentsFilteredByAmenities.Add(unitCounter);
            break;
        }
    }
} 
```

我将测试代码并在此处更新我的结果。

# apache-flex - Flex：运行时字体加载

> ID：10990238
> 
> 赞同：0
> 
> 时间：2012-06-12T03:37:50.863
> 
> 标签：apache-flex, mxml, font-face

我已经用 3 种不同的 TTF 字体测试了这个片段，但我仍然无法`@font-face`在 Flex 中工作。我在这里错过了什么吗？在 上尝试了绝对路径和相对路径`url()`，没有任何变化。如果我使用任何标准字体（Arial、Verdana、Tahoma ...），`Hello World!`则会出现文本，但是当我尝试使用任何外部字体时，什么都不会显示。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="100%" height="100%">
 <mx:Style>
  @font-face {
      src: url(josefin-sans.ttf);
      fontFamily: JosefinSans;
  }

  .custom {
      fontFamily: JosefinSans;
      fontSize: 36pt;
  }
</mx:Style>
<mx:Text id="text" styleName="custom" text="Hello World!" /> 
```

编译：

```
mxmlc -static-link-runtime-shared-libraries=true flex.mxml 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:20:02.930

当您使用 MX 组件时，您应该嵌入带有`embedAsCFF: false;`标志的字体。

```
@font-face
{
    src: url("josefin-sans.ttf");
    fontFamily: "JosefinSans";
    fontWeight: normal;
    embedAsCFF: false;
} 
```

如果它不起作用，请在调试模式下启动应用程序并注意错误。此外，如果需要，请确保您使用的字体可以显示为粗体和斜体。

# php - 使用 php 发送电子邮件确认邮件

> ID：10990240
> 
> 赞同：-6
> 
> 时间：2012-06-12T03:38:15.500
> 
> 标签：php, email

我使用以下脚本使用 PHP 发送邮件。现在我的要求是发送一封带有唯一链接的确认电子邮件以供点击。这将验证电子邮件 ID

```
 <?php
$to = "user@gmail.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "fromuser@gmail.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:54:37.357

你可以做一些类似于以下的事情：

```
$message = "Please click on this link to verify your email address given <a target='_blank' href='{your_url}/confirm_email.php?id={user given email which is encrypted}'>{your_url}/confirm_email.php?id={user given email which is encrypted}</a>"; 
```

因此，当用户单击邮件中的链接时，它将被重定向到您的 Php 页面（confirm_email.php），您可以在其中解密 id 参数（$_REQUEST['id']）并使用用户已经提供的电子邮件进行验证.

# java - 以编程方式从 Google+ 检索我的所有活动

> ID：10990243
> 
> 赞同：2
> 
> 时间：2012-06-12T03:38:18.183
> 
> 标签：java, google-api, google-plus

我正在尝试编写一个程序来从 Google+ 中检索我的所有活动。我研究了谷歌提供的示例代码，我的程序是这样写的：

```
// Fetch the available activities
Plus.Activities.List listActivities = plus.activities().list("me", "public");

listActivities.setMaxResults(20L);

ActivityFeed feed;
try {
  feed = listActivities.execute();
} catch (HttpResponseException e) {
  log.severe(Util.extractError(e));
  throw e;
}
// Keep track of the page number in case we're listing activities
// for a user with thousands of activities. We'll limit ourselves
// to 5 pages
int currentPageNumber = 0;
String token = "";
while (token != null && feed != null && feed.getItems() != null && currentPageNumber < 5) {
  currentPageNumber++;

  System.out.println();
  System.out.println("~~~~~~~~~~~~~~~~~~ page "+currentPageNumber+" of activities ~~~~~~~~~~~~~~~~~~");
  System.out.println();

  for (Activity activity : feed.getItems()) {

    show(activity);
    System.out.println();
    System.out.println("------------------------------------------------------");
    System.out.println();
  }

  // Fetch the next page
  token = feed.getNextPageToken();
  System.out.println("next token: " + token);
  listActivities.setPageToken(token);
  feed = listActivities.execute();
} 
```

问题是这只允许我检索我的“公共”活动。我也有一些私人活动，但这个程序没有得到它们。问题与

```
plus.activities().list("me", "public"); 
```

此列表函数需要一个输入参数，即要列出的活动集合。在这里，它是“公共的”。我想检索所有活动，而不仅仅是公共活动。但基于

[https://developers.google.com/+/api/latest/activities/list](https://developers.google.com/+/api/latest/activities/list)

要列出的此活动集合的唯一可用输入是“公共”。所以我的问题是：

1.  是否可以以编程方式从 Google+ 检索我的所有活动（公开和非公开）？
2.  如果可能的话，我怎么能用Java做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:44:01.963

官方的 Google+ API 仅提供对公共数据的只读访问权限。因此，您将只能使用“公共”作为活动的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:39:18.183

通过授权，您仅获得这两个范围。

- 了解您在 Google 上的身份 [https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me)

- 查看您的电子邮件地址 [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)

如您所见，它不会开放对非公共活动的访问。

API页面说，

'collection' 的可接受值为： "public" - 由指定用户创建的所有公共活动。

参考：Google+ API 页面。无法在此处链接到它。

# design-patterns - 建议数据库查询接口

> ID：10990250
> 
> 赞同：0
> 
> 时间：2012-06-12T03:39:25.213
> 
> 标签：design-patterns, search, usability, api-design, query-by-example

在处理域对象的专有生物信息学软件上工作时，我必须增强 API，以便外部各方可以访问存储在内部数据库中的 (CRUD) 数据。

数据按类型（例如分子、寡核苷酸和酶）分组，在每个数据中，可以有可嵌套的子集（分子::蛋白质、分子::dna 等）。

由于每种数据类型都有不同的属性，我们使用格式化的查询字符串（类似于广泛使用的[entrez](http://en.wikipedia.org/wiki/Entrez)格式）来指定搜索条件。代码示例如下：

```
IMoleculePersistenceService svc = PersistenceFactory::GetMoleculeService();

// IMoleculePersistenceService::search( <search-string>, <subset> );
IMolecule[] searchResult = svc.search( "Foo[Name] OR 128[Length]", "molecule::protein" ); 
```

我的问题是：

假设用户具有相应的领域知识来理解生物学相关的层次结构。**让搜索函数接受对象而不是格式化字符串****会更好吗？`prototype`**

```
IMoleculePersistenceService svc = PersistenceFactory::GetMoleculeService();

IMoleculeTemplate searchPrototype = svc.GetSearchPrototype();
searchPrototype.SetName( "Foo" );
searchPrototype.SetLength( 128 );

IMolecule[] searchResult = svc.search( searchPrototype, "molecule::protein" );
IMolecule[] searchResult2 = svc.search( svc.GetSearchPrototype( <parameters> ), "molecule::protein" ); 
```

**优点： -**
更易于可视化/理解- 如果可以自动序列化为（格式化）字符串
，则与查询字符串兼容。**缺点：** - 不灵活，因为标准组合是固定的（AND、OR）。`prototype`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:48:39.823

该服务应该只接受一个“原型”。将字符串解析为原型是其自身的特性，并不直接属于服务。我会通过例如首先在 HowTo 中展示示例来推广基于原型的方法，然后再提及解析功能。

在 C# 领域，有`IQueryable`界面——看看[这个问题的答案](https://stackoverflow.com/questions/1578778/using-iqueryable-with-linq)。原型看起来很像`Expression`s，但这对于手头的需求来说可能太通用了。

此外，返回数组可能不是最好的选择，因为这会将实现固定为使用数组。同样在 C# 中，有`IEnumerable`，但我希望看到一些简单`SearchResult`的类提供生成/返回结果数组的能力，因此允许您进行内部更改和优化。**

# java - 不知道如何使用 Jbutton 调用方法

> ID：10990255
> 
> 赞同：0
> 
> 时间：2012-06-12T03:41:01.603
> 
> 标签：java, eclipse, jbutton

我在尝试为此 JButton 编写 if else 语句时遇到了麻烦。我试图让这个 Jbutton 调用
我正在使用 Eclipse 的计算方法，这是 Java

```
import java.awt.EventQueue;

import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.JButton;
import javax.swing.text.JTextComponent;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.io.File;

public class DirectorySize {

protected static final JTextComponent filelist = null;
private JFrame frame;
private JTextField textField;
private JTextField sizeOutput;
protected File file;
protected Object path;
protected long size;
protected Object getContenPane;
protected Object directory;
private int totalFolder;
private int totalFile;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                DirectorySize window = new DirectorySize();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 */
public DirectorySize() {
    initialize();
}

/**
 */
private void initialize() {
    frame = new JFrame();
    frame.setBounds(100, 100, 553, 144);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);

    textField = new JTextField();
    textField.setBounds(10, 11, 402, 35);
    frame.getContentPane().add(textField);
    textField.setColumns(10);

    //JFileChooser to open directory
    JButton directoryButton = new JButton("Directory");
    directoryButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            JFileChooser chooser = new JFileChooser();
            chooser.setFileHidingEnabled(true);
            chooser.setMultiSelectionEnabled(false);
            chooser.setFileSelectionMode    
                           (JFileChooser.DIRECTORIES_ONLY);
            chooser.setDialogType(JFileChooser.OPEN_DIALOG);
            int state = chooser.showOpenDialog(frame);
            if (state == JFileChooser.APPROVE_OPTION )

    textField.setText(chooser.getSelectedFile().getAbsolutePath());

        }
    });
    directoryButton.setBounds(422, 17, 105, 23);
    frame.getContentPane().add(directoryButton);

    //Jbutton to calculate directory size when pressed
    JButton sizeReader = new JButton("Calculate Size");
    sizeReader.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {

            String sizeReader = sizeOutput.getText();
            String fs = "foldersize";
                if(fs == sizeReader){

                }else{

            //sizeOutput.setText(sizeOutput.getText() + totalFolder);
                }
        }
    });
    sizeReader.setBounds(10, 57, 131, 38);
    frame.getContentPane().add(sizeReader);

    sizeOutput = new JTextField();
    sizeOutput.setEditable(false);
    sizeOutput.setBounds(151, 57, 261, 38);
    frame.getContentPane().add(sizeOutput);
    sizeOutput.setColumns(10);

    // exit button for frame
    JButton btnNewButton_2 = new JButton("Exit");
    btnNewButton_2.addActionListener(new ActionListener() {
        private Object exitButton;
        public void actionPerformed(ActionEvent arg0) {

            System.exit(0);

            this.add(exitButton);
        }

        private void add(Object exitButton2) {

        }
    });
    btnNewButton_2.setBounds(422, 65, 105, 23);
    frame.getContentPane().add(btnNewButton_2);

}

  //Calculation method for the directories
  public long getFileSize(File folder) { 
    totalFolder++;  
    System.out.println("Folder: " + folder.getName()); 
    long foldersize = 0; 

    File[] filelist = folder.listFiles(); 
    for (int i = 0; i < filelist.length; i++) { 
        if (filelist[i].isDirectory()) { 
            foldersize += getFileSize(filelist[i]); 
        } else { 
            totalFile++; 
            foldersize += filelist[i].length(); 
        } 
    } 
    return foldersize; 
} 
public int getTotalFolder() { 
    return totalFolder; 
} 
public int getTotalFile() { 
    return totalFile; 
} 
   } 
```

有人可以帮助我并告诉我我做错了什么或我需要做什么谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:14:33.720

尝试以下操作：

```
String SizeReader = SizeOutput.getText().toLowerCase();
if(fs.toLowerCase().equals(SizeReader))
{

}
else
{

} 
```

# javascript - 如何以键值对的形式将数据插入 HTML

> ID：10990259
> 
> 赞同：0
> 
> 时间：2012-06-12T03:41:30.077
> 
> 标签：javascript, html, key-value

我返回了一个填充了一些键值对的表单。根据用户交互，我想将其中一些插入到我的 HTML 中。我使用 AJAX 找到了一些答案，但无法锻炼如何通过 javascript 访问键值对。我还不想使用 jquery，因为我想先了解 javascript 和 DOM 是如何工作的。下面是我想要做的一个想法

```
<script> 
  function changeanchor(urlitem) {
    document.getElementById("urlanchor").innerHTML = "";  
    while ($urls as $url) {
      if (urlitem == $url->item) {
        document.getElementById("urlanchor").innerHTML .= $url->urlanchor;
      }
    }
</script> 
```

我知道“$urls as $url”等是PHP，但我认为这是解释我需要做什么的最简单方法。

我使用 PHP 生成函数调用，但我无法让它在这里显示（不显示代码片段）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:44:47.207

像这样？

```
<script> 
  function changeanchor(urlitem) {
    document.getElementById("urlanchor").innerHTML = ""; 

    for (i in urls) {
      var url = urls[i];

      if (urlitem == url.item) {
        document.getElementById("urlanchor").innerHTML += url.urlanchor;
      }
    }
</script> 
```

`urls`从未定义，因此除非存储具有这些属性`urls`的一堆对象，否则此代码将不会执行。`url`

为了创建一个`url`与您尝试使用的对象一样的对象，请使用 JSON 将其通过管道传输到 JavaScript 或创建一个对象：

```
var urls = [
  {
    'item': 100,
    'urlanchor': 'foo'
  }, {
    'item': 200,
    'urlanchor': 'bar'
  }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:46:54.350

你问的是在圆顶对象中设置键值对数据吗，

```
$('body').data('foo', 52); 
```

帮助链接：-

[http://api.jquery.com/data/](http://api.jquery.com/data/)

# database - Node.js - 使用 NPM 或在模块中打包数据库调用

> ID：10990269
> 
> 赞同：0
> 
> 时间：2012-06-12T03:42:40.450
> 
> 标签：database, node.js, encapsulation, npm

我最近接受了一位技术架构师的采访，他提到他的团队已经开始将所有基于域的数据库调用整合到包中。他说这在共享代码和设计 TDD (should.js) 时具有显着优势。这是推荐的做法吗？使用包来封装此类资源 IO 的优点/缺点是什么？请包括链接，如果有的话。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:54:12.020

您可以使用 npm 包在项目之间共享代码，因为这就是包的作用。从一个包开始可能是一个坏主意。您通常从一个模块开始，如果需要，提取一个包。

# android - 如何将数据传递给上一个活动之前的活动

> ID：10990271
> 
> 赞同：1
> 
> 时间：2012-06-12T03:42:50.903
> 
> 标签：android, android-activity

我有三个活动，例如。A，B和C。A开始B，B开始C。我将从C的后堆栈中删除B。然后我需要在完成C之前将一些数据从C传递给A。我的问题是如何从C 到 A ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:08:12.250

如果您想在完成 C 活动之前将一些数据从 C 传递到 A，那么您可以在 A 活动中使用广播接收器，并可以直接从 C 向 A 发送广播。

在从 A 开始活动 B 之前编写以下代码。此代码将从活动 C 接收数据。

```
BroadcastReceiver brd_receiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals("receive data from C")) {
            // DO YOUR WORK HERE.
        }

    }
};

registerReceiver(brd_receiver, new IntentFilter("receive data from C")); 
```

编写此代码以将数据从活动 C 发送到活动 A。

```
Intent intent = new Intent();
        intent.setAction("receive data from C");
        intent.putExtra(name, value); //SAVE YOU DATA INTO INTENT.
        sendBroadcast(intent); 
```

如果它不起作用，希望它会对您有所帮助，然后告诉我您面临的问题。我认为它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T04:17:48.520

创建一个类并将其设置为 Singleton 类。然后使用 setter 和 getter 方法从一个类中设置值并从另一个类中获取值。

```
public class SingletonObjectDemo {
private String value;
// use setter and getter here...

private static SingletonObject singletonObject;
// Note that the constructor is private
private SingletonObjectDemo() {
    // Optional Code
}
public static SingletonObjectDemo getSingletonObject() {
    if (singletonObject == null) {
        singletonObject = new SingletonObjectDemo();
    }
    return singletonObject;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T03:47:44.803

如果您通过 Intent 启动Activity 以从 A 转到 C，那么您可以通过 putExtra of intent 传递数据。如果您只是通过按返回进入 C，则将数据写入共享首选项等常见位置，以便您可以从 A 访问

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T03:48:11.307

您可以使用`Handler`将数据从一个活动传递到另一个活动，或者您可以使用`startActivityForResult()`. 然后通过使用`setResult(resultCode, data)`，您可以将额外的数据传递给可以在函数中访问的前一个活动`onActivityResult(int requestCode, int resultCode, Intent data)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T03:49:46.987

试试这样;;

在活动C..

```
Intent intent = new Intent(getBaseContext(), A.class);
intent.putExtra("Your_key-ID", value);
startActivity(intent); 
```

在活动 A..

```
Intent sender=getIntent();
String extraData=sender.getExtras().getString("Your_key-ID"); 
```

并检查此链接

[http://mobileorchard.com/android-app-development-using-intents-to-pass-data-and-return-results-between-activities/](http://mobileorchard.com/android-app-development-using-intents-to-pass-data-and-return-results-between-activities/)

# php - 将 javascript 变量传递给 php 函数并正确引用它

> ID：10990273
> 
> 赞同：0
> 
> 时间：2012-06-12T03:42:53.203
> 
> 标签：php, javascript, zend-framework

我使用 Zend Framework ..在我的一个 phtml 文件中我有这个代码

```
<script>
 function foobar(id,type){
   var idarray =  <?php AppNamespace_General::getparentids( ?>id, type<?php ) ?>; // here  the id and type are from js
//the php function returns a json array to the js variable
 ......
  location.href = baseurl +'/somepage/id/'+id;
   } 
```

如何正确地将 js 元素传递给 php 函数

php 函数（已经考虑过通过 ajax 来实现 .. 它相当复杂）

```
public static function getparentids($id, $type, $elmarray = '') {

        if (empty($elmarray)) { //avoiding redeclaration of array
            $elmarray = array();
        }
        switch (strtolower($type)) {
            case 'group':
            case 'product':
            case 'specification':

                $gp_handler = new PackAssist_Model_DbTable_Groups();
                $q = "SELECT * FROM t_groups WHERE group_id = $id";
                $sql = $gp_handler->getAdapter()->query($q);

                break;
            case 'part':
                $pt_handler = new PackAssist_Model_DbTable_Parts();
                $q = "SELECT * FROM t_parts WHERE part_id = $id";
                $sql = $pt_handler->getAdapter()->query($q);
                break;
        }
        $result = $sql->fetchAll();
        $i = 0;
        if (count($result) > 0) {
            foreach ($result as $row) {
                if (isset($row['group_parent_id']) && $row['group_parent_id'] != 0) {
                    if (in_array($row['group_id'], $elmarray)) {
                        $e = $row['group_parent_id'];
                    } else if ($row['group_parent_id'] != 0) {
                        $e = $row['group_id'];
                    }
                } else if (isset($row['part_group_id'])) {
                    $e = $row['part_group_id'];
                } else if ($row['group_parent_id'] == 0) {
                    break;
                }
                if (isset($e) && !empty($e)) {
                    array_push($elmarray, $e);
                }
                self::getparentids($e, 'group', $elmarray);
                $i++;
            }
        } else {
            array_push($elmarray, $id);
        }
        array_pop($elmarray); //removing the group of super parent group which we dont need

        if ($i == 0) { // just encode the array only once
            echo json_encode(array_reverse($elmarray));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:21:27.720

如果您使用 jQuery，您可以执行以下操作来执行 JSON 请求：

```
$.ajax({
    type: 'GET',
    url: '/path/to/script.php',
    data: '{ id: '+id+', type: '+type+' }',
    contentType: 'application/json',
    dataType: 'json',
    success: function(data) {
         dataObject = JSON.parse(data);
         // process data
    },
        error: function(e) {
            console.log(e.message);
        }
}); 
```

您可以在此解决方案中使用现有的 PHP 代码。您指向的 url 只需打印 JSON 结果，就像您当前在`getparentids()`.

# c# - 如何在运行时隐藏表单的框架

> ID：10990274
> 
> 赞同：0
> 
> 时间：2012-06-12T03:43:24.870
> 
> 标签：c#, winforms

我有一个表格。在运行时，如何隐藏表单的框架？（带有表单名称的边框。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T03:44:30.080

将表单的[`FormBorderStyle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formborderstyle.aspx)属性设置为`None`。

# c# - 如何使动画可等待？

> ID：10990277
> 
> 赞同：2
> 
> 时间：2012-06-12T03:43:57.590
> 
> 标签：c#, async-await

很抱歉无法给出更准确的标题，但这就是我想要做的。我有一个方法`foo`可以启动一些 UI 动画。当这些动画完成后，我想发出方法完成的信号。但是，我不想通过事件发出完成信号，而是让方法`awaitable`. 如何才能做到这一点？

```
void foo()
{  
  // start some animations 
   storyboard.Begin();
   storyboard.Completed += (s, e) => { // signal that foo has completed }
} 
```

调用代码应该能够编写：

```
await foo(); 
```

我的实际`foo`比上面的插图更复杂，因为我有一系列动画，它们一个接一个地发生，并且`foo`应该在所有动画完成后完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T04:19:43.697

通常，基于事件完成的事情通过使用 TaskCompletionSource 来“包装”。不幸的是，[MSDN 上的示例](http://msdn.microsoft.com/en-us/library/ee622454)（恕我直言）过于复杂，而不仅仅是单个实例+事件。你会有类似的东西：

```
public Task Foo()
{
    var tcs = new TaskCompletionSource<bool>();
    storyboard.Begin();
    storyboard.Completed += (s, e) => tcs.SetResult(true);
    return tcs.Task;
} 
```

在这种情况下，实际上不需要 TResult，但 TaskCompletionSource 似乎没有非通用版本，我不确定等效模式是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T00:03:44.907

我最近遇到了 Completed 事件没有按时触发，或者有时根本没有触发的情况，即使我在调用 Begin() 之前设置了事件处理程序（这是我发现的大多数其他相关帖子的罪魁祸首） . 所以我一直在寻找一种方法来等待动画结束，然后以相同的方法继续。我最终创建了以下静态方法，该方法将您要等待的情节提要作为参数。

```
public async static Task RunStoryboard(Storyboard Story)
{
    Story.Begin();
    while (Story.GetCurrentState() == ClockState.Active && Story.GetCurrentTime() < Story.Duration)
    {
        await Task.Delay(100);
    }
} 
```

我添加了第二个条件，因为在 Completed 事件从未触发的情况下，ClockState 将始终显示为活动状态，即使在动画完成后也是如此。因此，这需要明确设置情节提要的持续时间，但到目前为止它对我来说效果很好。

# android - flash air mobile 上的鼠标事件和触摸事件的响应缓慢和延迟时间

> ID：10990283
> 
> 赞同：1
> 
> 时间：2012-06-12T03:44:37.590
> 
> 标签：android, iphone, actionscript-3, flash, air

我正在尝试使用 adobe air 在移动设备上制作游戏。一切都很顺利，直到我遇到鼠标点击事件的问题。添加鼠标单击事件侦听器以模拟移动设备上的点击/触摸事件时，我对按钮/电影剪辑的响应非常缓慢。玩家手指点击按钮/电影剪辑到执行后的延迟时间为 1-2 秒（真的很烦人）。所以我想知道我应该更改为 touch_tap 事件而不是鼠标单击事件，并希望事情能永远改变。不幸的是，它并没有真正显示出任何区别。我在 android 上玩了很多游戏（我认为它们是由 flash 制作的），我不明白为什么它们的点击事件和响应时间快得令人难以置信（几乎是在我触摸/点击按钮/电影剪辑之后的瞬间）。任何人都可以帮助我阐明这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:24:23.090

我认为处理 TouchEvent 并没有太大的不同，因为 Flex 框架目前处理 MouseEvents 并且基本上没有这样的延迟。

它提醒我的是我在一些以前版本的 FlashPlayer 和（桌面）AIR 中遇到的一个罕见错误，其中鼠标和键盘事件在某些特定硬件上的某些特定视图上延迟了几分钟（！）（我的意思是一些屏幕上的对象）。这里的重要时刻是说当前帧速率很高且恒定（！），因此这不是一般的性能问题。事件虽然 Adob​​e 说它已修复，但我不太确定，因为他们没有表现出任何确定性。所以尝试检查帧率是否正常，如果是——讨厌的运行时错误......你应该尝试使用显示列表、混合模式、缓存作为位图（如果存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:17:32.347

确保禁用 doubleClick。有时这是延迟响应的原因......猜测触摸输入的双击时间甚至比桌面上的更长......

# java - 线程“main”中的异常 java.lang.NoClassDefFoundError: xxxxx (wrong name: xxxxx) 运行程序时出错

> ID：10990294
> 
> 赞同：1
> 
> 时间：2012-06-12T03:46:18.093
> 
> 标签：java, android, api

我正在尝试在此处运行代码——http: [//code.google.com/p/android-market-api/wiki/HowDownloadApps——](http://code.google.com/p/android-market-api/wiki/HowDownloadApps) 并将此代码放在 Tester.java 文件中（如下所示）。两个 .jar 也与此文件位于同一目录中，分别名为 androidmarketapi-0.6.jar 和 protobuf-java-2.2.0.jar。两者都在我的类路径中（我在 Windows 7 上）。它编译得很好，使用命令“javac Tester.java”。在同一目录中创建一个 Tester.class 文件。

```
 public class Tester {
         public static void main (String[] args) {
                 MarketSession session = new MarketSession(true);
                         System.out.println("login...");
         }

 } 
```

但是，程序不会运行！

```
 java Tester 
```

和

```
 java -cp . Tester 
```

两者都产生以下错误消息：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: Tester
 (wrong name: com/gc/android/market/api/Tester)
     at java.lang.ClassLoader.defineClass1(Native Method)
     at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
     at java.net.URLClassLoader.defineClass(URLClassLoader.java:449) 
```

还有 9~ 更多的这些“at java.net”、“at java.security”、“at sun.misc”、“at sun.launcher”类型的错误消息。

有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:52:47.797

根据错误消息，我可以看到 Tester 在包内`com.gc.android.market.api`

我希望您的控制台命令类似于

`java com.gc.android.market.api.Tester`

# python - 检查 Tkinter Entry 小部件的值

> ID：10990297
> 
> 赞同：1
> 
> 时间：2012-06-12T03:46:32.323
> 
> 标签：python, tkinter

我在这里有一个提交按钮：

```
submit_btn = Button(top, text="Submit", width=10, command=callback)
submit_btn.grid(row=3, column=1) 
```

一旦你点击它，如果输入==“Vincent”，它应该检查上面的输入字段。

这是输入字段：

```
top = Tk()
user_label = Label(top, text="User Name")
user_label.grid(row=0, column=0)
username = Entry(top, bd = 5)
username.grid(row=0, column=1) 
```

有没有办法检查“用户名”条目对象的值是否为“文森特”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:50:29.693

我相信这应该可以解决问题。

```
submit_btn = Button(top, text="Submit", width=10, command=check_vincent)

def check_vincent():
    if username.get() == "Vincent":
        print "Hi, Vincent!"
    else:
        print "Where's Vincent?" 
```

# php - PHP：使用静态变量导致结果不一致

> ID：10990299
> 
> 赞同：0
> 
> 时间：2012-06-12T03:46:51.233
> 
> 标签：php

这里我分享两个函数的代码。两者都返回 PDO 对象的实例。但是，当使用 PDO 连接插入语句时，其中一个工作正常，而另一个则没有。在这两种情况下都使用相同的代码来插入记录。

这是其返回的 PDO 对象与插入语句一起使用的函数。

```
public function getPDO()    {

    /** mysql hostname */
$hostName = 'localhost';

/** mysql database name */
$dbName = 'testDB';

/** db user name */
$userName = 'root';

/** db password */
$password = '';

try {
    $str = "mysql:dbname=$dbName;host=$hostName";
    $db = new PDO($str, $userName, $password );
        return $db;
    }catch(PDOException $e) {
        echo "PDO connection failed. <br />";
        echo $e->getMessage();
        return null;
    }
 } 
```

这是其返回的 PDO 对象不适用于插入语句的函数。在这个函数中，连接字符串和其他连接参数是从类中定义的静态值中读取的。

```
public function getPDO()    {
    try {
        $connStr = "mysql:dbName=".self::$dbName.";host=".self::$hostName;
    $db = new PDO($connStr, self::$userName, self::$password);
        return $db;
    }catch(PDOException $e) {
        echo "PDO connection failed. <br />";
        echo $e->getMessage();
        return null;
    }
 } 
```

以下是静态变量的定义方式：

```
 /** mysql hostname */
static $hostName = "localhost";

/** mysql database name */
static $dbName = "testDB";

/** db user name */
static $userName = 'root';

/** db password */
static $password = ''; 
```

这是一段使用 PDO 对象插入记录的代码。

```
 public function save() {
     //get the PDO
 $db_func = new db_functions();
 $pdo = $db_func->getPDO();
 $query = "INSERT INTO city(name, state, country) VALUES ('Vienna', 'Virginia', 'USA')";
 echo $query;
 $count = $pdo->exec($query);
 if($count > 0) {
     echo '</br> Successful </br>';
 }else  {
     echo '</br> Unsuccessful </br>';
 }

 } 
```

当我使用第二个函数时，PDO 对象创建成功，但插入失败。我没有看到任何错误，但计数为 0 并且数据库中没有记录。

我怀疑这与我在代码中声明和使用静态变量的方式有关。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:41:39.020

它与静态变量无关，您的第二种方法只是没有正确传递数据库名称。它必须是“dbname”而不是“dbName”。

# r - 是否有任何包含 NFL 足球数据的软件包？

> ID：10990302
> 
> 赞同：5
> 
> 时间：2012-06-12T03:47:04.493
> 
> 标签：r

我遇到了 R`baseball`包，其中基本上包含可用于幻想分析的职业棒球数据的整个历史范围。有谁知道 NFL 橄榄球数据是否存在类似的情况？

我知道以前的一些答案提到了 www.pro-football-reference.com 等网站，这些网站提供了每个球员的数据，但我正在寻找聚合数据框格式的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:43:28.430

一个快速的谷歌搜索`NFL football csv data`导致许多有趣的链接，例如[这个](http://www.repole.com/sun4cast/data.html)，或者[这个](http://codeandfootball.wordpress.com/tag/csv/)。[这个链接](http://www.phys.utk.edu/sorensen/cfr/cfr/SportsRanking.html)看起来也很有希望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-30T04:04:26.893

NFLdata.com has a complete historical database, and weekly updates during the season. There might be some other decent sites out there that sell the data, but base on my experience, these guys are the best.

Good luck.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-20T09:53:20.820

现在有：[https](https://github.com/maksimhorowitz/nflscrapR) ://github.com/maksimhorowitz/nflscrapR 它从 NFL 网站上抓取 NFL 数据。它包含自 2009 年以来所有游戏的逐个播放数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T10:55:03.887

看看[http://www.fantasydata.com](http://www.fantasydata.com)

他们为 NFL MLB NBA 和 NHL 提供了一个宁静的 API，在比赛期间拥有实时统计数据。虽然不是免费的，但它是一项付费服务​​。

# python - 如何在 Django 的网页上显示图像？

> ID：10990304
> 
> 赞同：0
> 
> 时间：2012-06-12T03:47:18.157
> 
> 标签：python, django, django-templates, django-views

我想在我的网站上显示图像。我一直在查看 Django 文档和 stackoverflow 上的其他帖子，但我还没有让它工作。
我有一个图像名称“under-construction.jpg”。它位于`/home/di/mysite/myapp/static/images`目录中。

我有一个这样的模板：

```
<img src="{{ STATIC_URL }}images/under_construction.jpg" alt="Hi!" /> 
```

在我的views.py中我有这个：

```
def under_construction(request):
    return render(request, 'under_construction.html') 
```

在我的 settings.py 中，我有这个：

```
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/home/di/mysite/myapp/static',
    '/home/di/mysite/myapp/static/images',
) 
```

我执行`./manage.py collectstatic`了，它把很多文件放在`/home/di/mysite/admin`和`/home/di/mysite/images`. 我该怎么做才能显示我的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T12:16:01.713

我在显示静态图像时遇到了同样的问题。在这方面吃了不少苦头，也花了很多时间。所以想分享我的设置。

**设置.py**

```
STATIC_ROOT = ''  
STATIC_URL = '/static/'      
ADMIN_MEDIA_PREFIX = '/static/admin/'          

import os.path  

STATICFILES_DIRS = (      
    "D:/temp/workspace/offeronline/media",
    (os.path.join( os.path.dirname( __file__ ), 'static' )),  
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',  
) 
```

**网址.py**

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
    # ... the rest of your URLconf here ...  and at the end of the file add the following line
urlpatterns += staticfiles_urlpatterns() 
```

最后将以下代码添加到模板标签中，它可以工作

```
<img src="{{ STATIC_URL }}images/i1.png" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T01:39:02.780

您需要做的就是将 settings.py 编辑为以下 4 点，并在同一文件夹中创建一个新文件夹（静态）settings.py 位于静态文件夹中，您可以在其中创建另一个文件夹（图像）把（under_construction.jpg）

1.  `STATICFILES_DIRS = (os.path.join( os.path.dirname( __file__ ), 'static' ),)`

2.  `STATICFILES_FINDERS = ( 'django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder',)`

3.  `STATIC_URL = '/static/'`

4.  `STATIC_ROOT = ''`

    在你完成上一个之后。你可以写的点
    `<img src="{{ STATIC_URL }}images/under_construction.jpg" alt="Hi!" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:10:16.027

我已经解决了这样的问题。

```
STATIC_ROOT = '/path/to/project/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
) 
```

即使您这样做，Django 也不会直接直接获取文件。您需要为您的每个应用程序链接此静态目录。只需转到 django app 目录运行以下命令..

```
cd /path/to/project/my_proj/my_app
ln -s /path/to/project/static/ 
```

这仅适用于调试模式。您需要在 settings.py 文件中设置 DEBUG = true 。这应该适用于 django 的开发服务器。

Django 不会在生产模式中提供任何静态文件。您需要在生产模式中使用 web-server 提供静态文件。

更多信息可以在[这里](https://docs.djangoproject.com/en/1.4/howto/static-files/)找到..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T04:11:29.447

Django 在开发过程中确实支持静态文件，您可以在视图中使用 django.views.static.serve() 方法来提供媒体文件。

但是使用这种方法对于生产设置来说效率低且不安全。

用于 Apache 中的生产设置

[https://docs.djangoproject.com/en/1.2/howto/deployment/modpython/#serving-media-files](https://docs.djangoproject.com/en/1.2/howto/deployment/modpython/#serving-media-files)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T04:50:17.340

放`STATIC_ROOT = /path/to/copy/files/to`

你添加了吗

```
urlpatterns += patterns('django.contrib.staticfiles.views', url(r'^static/(?P<path>.*)$', 'serve'), 
```

或者你也可以这样做

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# ... the rest of your URLconf here ...

urlpatterns += staticfiles_urlpatterns() 
```

当然尽量不要通过 django 服务静态文件，它确实有一些开销，而是配置你的 http 服务器来服务它们，假设你有一个 http 服务器（nginx 非常好）。

# javascript - Best practice for dying when it's determined a JS plugin didn't receive a required parameter?

> ID：10990312
> 
> 赞同：2
> 
> 时间：2012-06-12T03:48:46.707
> 
> 标签：javascript, jquery, jquery-plugins, raphael

I'm writing a JavaScript plugin that receives a set of settings, some required, some not. It's actually a plugin for Raphael.js but this question extends to jQuery plugins too.

My code looks something like the following:

```
jQuery.fn.myplugin = function (settings) { 
    settings = settings || {};
    var reqParam1= settings.requiredParameter1 || return; //Or throw? //Or ... ?

    /* More code */
} 
```

If I determine that the plugin didn't receive all the required settings, what course of action should I take? The obvious and most conservative choice is to `throw` but what about in the case where the plugin functioning isn't 'essential'? By not 'essential' I mean purely an aesthetic enhancement or less-than-critical to the rest of the page. In this case could it be correct to die silently?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:20:16.850

`throw`如果出现致命问题，例如缺少强制参数，您可以这样做。决定这个插件的功能是否“必要”是调用者的责任。因此，您可以将插件调用包装在 try .. catch 块中，并将消息记录在 catch 块中。

```
try {
    $.myplugin( ... );
}
catch(e) {
    console.log('Feature not enabled');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T04:11:53.223

如果这意味着您的插件无法运行（但尽量将强制参数保持在最低限度），您应该使用强制参数，并为其他所有内容使用默认值。

```
jQuery.fn.myplugin = function (settings) { 
    settings = $.extend({}, $.fn.myplugin.defaults, settings);
    if(!settings.requiredParameter1) throw "Missing requiredParameter1";

    /* More code */
}

jQuery.fn.myplugin.defaults = {
  optionalParameter1: true
} 
```

# bash - Bash：子外壳中的树方向工作不正确

> ID：10990314
> 
> 赞同：1
> 
> 时间：2012-06-12T03:49:13.807
> 
> 标签：bash, stderr, tee

不久前我在 CentOS 机器上测试了它，它运行良好。现在在另一台机器上，我尝试了这个，但它无法工作。什么是不正确的？

```
command 2> >(tee stderr.log >&2) && exit 
```

我收到这条消息。

```
sh: syntax error near unexpected token `>' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:27:41.837

答案在错误消息中。传统的 Bourne shell ( `sh`) 不支持进程替换（例如`>(command)`）。你没有使用 Bash。`chsh`您可以使用该命令更改默认 shell 。

# jquery - marginTop vs marginBottom on a each loop for Jquery

> ID：10990315
> 
> 赞同：0
> 
> 时间：2012-06-12T03:49:20.420
> 
> 标签：jquery, menu, jquery-animate, each, sliding

Hi people I already implementing a movile fixed menu to my site based on jquery but i have a little problem with marginTop and marginBottom inside on a each sentence, the marginBottom is not working it seams like something is missing , plz check it out.

On-live example: [http://www.utxj.edu.mx/menu_example/index.html](http://www.utxj.edu.mx/menu_example/index.html)

My code...

```
$(document).ready(function(){
    $(function() {
            var d=300;

            $('#navigation a').each(function(){
                $(this).stop().animate({
                    'marginTop':'-80px'
                },d+=150);
            });

            $('#navigation > li').hover(function () {
                $('a',$(this)).stop().animate({
                    'marginTop':'-2px'
                },200);
            }, function () {
                $('a',$(this)).stop().animate({
                    'marginTop':'-80px'
                },200);
            }
        );
    });
});

$(document).ready(function(){
    $(function() {
            var d=300;

            $('#navigation2 a').each(function(){
                $(this).stop().animate({
                    'marginBottom':'-80px'
                },d+=150);
            });

            $('#navigation2 > li').hover(function () {
                $('a',$(this)).stop().animate({
                    'marginBottom':'-2px'
                },200);
            }, function () {
                $('a',$(this)).stop().animate({
                    'marginBottom':'-80px'
                },200);
            }
        );
    });
}); 
```

Tnx 4 help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:54:12.200

利润正在做他们应该做的事情。元素将增长以适应动画块的新大小，其余元素将随之拖动。

作为一种解决方案，尝试将元素定位到它们的当前位置并为它们的和属性`relative`设置动画：`top``bottom`

```
li {
  position: relative;
} 
```

# java - splitPane 上的摆动行为

> ID：10990318
> 
> 赞同：2
> 
> 时间：2012-06-12T03:49:33.943
> 
> 标签：java, swing, jsplitpane

```
 JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,
             scrollPane , scrollPane2); 
```

我想做非常微不足道的动作，但它不起作用。

每当我将标签添加到任一滚动窗格时 - 它们根本不显示任何内容。我可以在窗格中显示表格，但这些表格是通过构造函数添加的。尿了很多。

此外，如果 splitPane 只允许两个组件 - 如果我想将窗口分成四个部分怎么办？拆分窗格的拆分窗格？

感谢帮助，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T06:31:58.797

您可以将您的实现与此[示例](https://stackoverflow.com/a/10110232/230513)`JLabel`进行比较，该示例`JPanel`在`JSplitPane`.

![图片](../Images/7e0be5fdcd0016210293c3211f11df40.png)

虽然`JSplitPane`只允许两个组件，但您可以`JSplitPane`在任一窗格中添加另一个组件，以便在任一方向上细分任一侧，*随意*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:15:33.887

`updateUI()`添加组件后不要忘记调用。`JSplitPane`实际上只应该用于拆分为两个组件。如果您需要更多，请考虑使用`TableView`.

# php - 当我将空值视为这样的数组时，为什么 PHP 不会抱怨？

> ID：10990321
> 
> 赞同：31
> 
> 时间：2012-06-12T03:49:58.023
> 
> 标签：php, arrays, null

在 PHP 中，我已[`error_reporting`](http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)设置报告包括通知在内的所有内容。

为什么以下内容不会引发任何通知、错误或其他任何内容？

```
$myarray = null;
$myvalue = $myarray['banana']; 
```

故障排除步骤：

```
$myarray = array();
$myvalue = $myarray['banana'];
// throws a notice, as expected ✔

$myarray = (array)null;
$myvalue = $myarray['banana'];
// throws a notice, as expected ✔

$myarray = null;
$myvalue = $myarray['banana'];
// no notice or warning thrown, $myvalue is now NULL. ✘ Why? 
```

这可能是 PHP 中的一个错误，或者我只是不了解它是如何工作的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T05:15:35.487

通常，当您尝试像使用另一种类型一样使用一种类型的值时，会引发错误或警告，或者发生“类型杂耍”。例如，如果您尝试用 连接两个数字`.`，它们都会被强制转换为字符串并连接起来。

但是，正如[关于 type juggling 的手册页](http://www.php.net/manual/en/language.types.type-juggling.php)中所解释的那样，将非数组视为数组时并非如此：

> 当前未定义自动转换为数组的行为。

实际上，`null`正如您所观察到的，当通过取消引用非数组触发此“未定义行为”时发生的行为是被返回的。这不仅会影响空值 -`null`如果您尝试取消引用数字或资源，您也会得到。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-08T10:07:17.067

*在以下三种类型上使用数组解除引用*语法可能是有效的：

*   数组
*   字符串（访问给定位置的字符）
*   对象（实现 ArrayAccess 接口的对象）

对于所有其他类型，PHP 只返回*未定义的变量*。

数组解引用由[FETCH_DIM_R 操作码](https://github.com/php/php-src/blob/ccf863c8ce7e746948fb060d515960492c41ed27/Zend/zend_vm_def.h#L1159)处理，它使用[zend_fetch_dimension_address_read()](https://github.com/php/php-src/blob/ccf863c8ce7e746948fb060d515960492c41ed27/Zend/zend_execute.c#L1249)来获取元素。

如您所见，NULL 有一种特殊情况，还有一种默认情况，它们都返回*未定义的变量*。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-04T15:22:05.093

从 2006 年开始有一个活跃的[错误报告](https://bugs.php.net/bug.php?id=37676)。

[在文档中，在String](http://php.net/manual/en/language.types.string.php)部分 中对此进行了通知。[![在此处输入图像描述](../Images/fd4398bbe97f24ae67f967f29ffbde30.png)](https://i.stack.imgur.com/6uKjG.png)

# java - Android Button vs TextView - 类似超链接的行为

> ID：10990323
> 
> 赞同：5
> 
> 时间：2012-06-12T03:50:11.823
> 
> 标签：java, android

在 Android 视图上，我想要一些可点击的文本，其工作方式类似于网页超链接。

它看起来就像普通文本（没有按钮边框），但是当被触摸时，我希望文本颜色发生变化，并且我可能还希望它的背景变成相反的颜色。

使用具有透明背景的按钮还是 TextView 更好。我什么时候应该选择一个而不是另一个？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:54:04.443

您可以使用 Button 并制作`selector`背景和文本。

文本选择器.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:color="#0000ff"/> <!-- pressed -->
    <item android:state_focused="true" android:color="@android:color/white"/> <!-- focused -->
    <item android:color="@android:color/white"/> <!-- default -->

</selector> 
```

按钮选择器.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:color="@android:color/white"/> <!-- pressed -->
    <item android:state_focused="true" android:color="#0000ff"/> <!-- focused -->
    <item android:color="#0000ff"/> <!-- default -->

</selector> 
```

在你的布局 xml

```
<Button
     android:id="@+id/button"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:background="@drawable/buttonselector"
     android:text="some text"
     android:textColor="@drawable/textselector" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:17:54.897

hotveryspicy 给出了一个很好的答案，并真正为我指明了正确的方向。谢谢，但我在回复中遇到了一些问题。

我想要的是一个按钮，在其正常状态下具有黑色文本和灰色背景，在其选定状态下具有白色文本的红色背景。像这样：

![在此处输入图像描述](../Images/0ae4b44f83f80b2c34badd10df530062.png)

使用 hotveryspicy 的建议，我遇到了以下问题：

1.  尝试将可绘制对象分配给 textColor 时出现错误。有趣，但我看到其他关于做这种事情的参考。也许 XML 验证现在更严格了？

2.  如果我没有在 buttonselector.xml 中定义一个 android:drawable，我也会得到一个错误。似乎您可以在选择器中设置可绘制对象的颜色，您需要实际创建可绘制对象。

无论如何，这就是我所做的：

我创建了一个[颜色状态资源](http://developer.android.com/guide/topics/resources/color-list-resource.html)，如下所示：

文件：res/colors/link_button.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#ffffff"/> 
    <item android:color="#000000"/> 
</selector> 
```

然后是以下 3 个可绘制对象：

[我的按钮背景使用Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)处于正常状态：文件：res/drawable/link_button.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    <solid  android:color="#cccccc"/>
</shape> 
```

我的按钮背景处于选中状态，也是一个[Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)：文件：res/drawable/link_button_selected.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    <solid  android:color="#ff0000"/>
</shape> 
```

然后我创建了一个可在 2 个形状之间进行选择的[可绘制选择器。](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)文件：res/drawable/link_button_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

 <item 
     android:drawable="@drawable/link_button_selected"
     android:state_pressed="true" />

 <item 
     android:drawable="@drawable/link_button" />
</selector> 
```

然后在我的布局中，我的按钮如下所示：

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:text="Button"
    android:textColor="@color/link_button" 
    android:background="@drawable/link_button_selector"
    /> 
```

感谢大家的帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T03:54:20.860

添加字符串喜欢

```
 <string name="link">'<a href="http://www.google.com" rel="nofollow">Google</a>'</string> 
```

在您的布局中

```
<TextView  
          android:id="@+id/link"  
          android:layout_width="wrap_content"  
          android:layout_height="wrap_content"  
          android:autoLink="all"  
          android:linksClickable="true"  
          android:text="@string/link" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T04:05:49.583

您可以使用 linkify 类链接您的文本。[用几个例子](http://mobile.dzone.com/news/android-%E2%80%93-creating-links-using)来看看[这个](http://developer.android.com/resources/articles/wikinotes-linkify.html)和这个

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-22T17:13:20.847

为了谷歌的缘故：

与其让按钮看起来像一个链接，为什么不让 TextView 可点击呢？这实际上是我想要并为我使用而工作的东西。我希望文本可以点击以产生意图。

```
TextView.setOnClickListener(new View.OnClickListener() 
```

# ios - 没有@synthesizing 的@property 声明

> ID：10990328
> 
> 赞同：0
> 
> 时间：2012-06-12T03:50:47.503
> 
> 标签：ios, properties, synthesize

我正在关注 Joe Conway 的 Big Nerd Ranch iOS Programming，当我看到以下代码时有点困惑。

WebViewController.h

```
#import <Foundation/Foundation.h>
@interface WebViewController : UIViewController
@property (nonatomic, readonly) UIWebView *webView;
@end 
```

WebViewController.m

```
#import "WebViewController.h"

@implementation WebViewController
- (void)loadView 
{
    // Create an instance of UIWebView as large as the screen
    // Tell web view to scale web content to fit within bounds of webview 
}

- (UIWebView *)webView
{
    return (UIWebView *)[self view];
}
@end 
```

不应该综合 .h 文件中声明的属性吗？Xcode 也没有给出警告（它通常在我声明一个具有合成的属性时发出）。

顺便说一下，在书中，他也提到了

> 在 WebViewController.h 中，添加一个属性（但不是实例变量）

声明属性不会自动为您生成实例变量吗？让我知道我错过了什么。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T04:15:28.430

这是一个很好的问题，我认为这个问题的答案有点微妙，而且对于刚开始使用 Objective-C 的人来说往往不是直接的。首先，让我们消除关于属性的神话。神话是这样的：

*Objective-C 属性与实例变量有关*。

这不一定是真的。这*通常*是正确的，但并非在所有情况下都是正确的。这是真的：

*Objective-C 属性声明了一个 getter 和一个 setter 方法*

（或者在`readonly`属性的情况下，只是一个吸气剂）。特别是当您声明一个名为的属性时`foo`（为了讨论，我们假设它不是只读的），您真正要做的唯一一件事就是告诉编译器您正在编写的类有一个名为的方法`-foo`和一个名为的方法`-setFoo:`。通过在 .m 文件中添加`@synthesize foo;`声明，您是在告诉编译器自己生成这些方法。在这里你说，“编译器，创建一个实例变量（也称为）并为我的和访问这个实例变量的方法`foo`生成实现。特别是，返回这个变量的值并设置变量的值。`-foo``setFoo:``-foo``-setFoo:`

请注意，没有必要让编译器为您合成方法。相反，你可以写`-foo`和`-setFoo:`你自己。此外，您无需创建实例变量来支持这些方法的实现。您可以随心所欲地编写它们。

总结一下：`@property`唯一告诉编译器getter和setter方法的存在。然后，您可以：`@synthesize`您的 .m 中的方法或自己编写方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T04:07:32.777

这是因为“ `webView`”getter 方法是在 .m 文件中实现的，因此，“ `@synthesize`”不是必需的。

如果`webView`没有在代码中明确创建“”方法，那么编译器会抱怨该属性没有被合成。在这种情况下，合成一个“只读”属性只会创建一个“getter”方法，它的作用与您在上面的代码中看到的大致相同。

是的，根据[声明属性的 Apple 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)，它说的是“ `@synthesize`”：

> 您使用@synthesize 指令告诉编译器如果您不在@implementation 块中提供它们，它应该为属性合成setter 和/或getter 方法。**如果没有另外声明，@synthesize 指令还会合成适当的实例变量。**

# objective-c - 如何在 iOS 中正确链接第三方库

> ID：10990332
> 
> 赞同：6
> 
> 时间：2012-06-12T03:51:54.600
> 
> 标签：objective-c, ios, xcode, static-libraries

我是 iOS 开发的新手，最近几天遇到了这个库链接问题。

我试图在项目中使用[GMGridView](https://github.com/gmoledina/GMGridView)，但无法使其正常工作。

这个项目是作为静态库发布的，所以我只是将 xcodeproj 文件拖到我的项目中。然后我在*Link Binary With Libraries*中添加了 libGMGridView.a，在*Target Dependencies*中添加了 GMGridView 。我还在*Header Search Paths*中添加了路径。

但是，当我尝试导入 GMGridView.h 时，Xcode 仍然报告 .h file not found 错误。

谁能帮我解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T13:59:14.753

遇到了同样的问题！！！成功了！！！！呜呜呜：

1.  将 GMGridView 文件夹从[https://github.com/gmoledina/GMGridView](https://github.com/gmoledina/GMGridView)复制到您的项目目录
2.  在 xcode 中右键单击任何文件组并选择添加文件
3.  在您的文件夹目录中找到 GMGridView 文件夹并选择 GMGridView.xcodeproj - （不要复制，创建组而不是文件夹，添加目标）
4.  转到您的项目目标 - 搜索 - HEADER_SEARCH_PATHS add- GMGridView/**
5.  在设置中选择构建阶段 - 选择目标依赖项并添加 GMGridView
6.  在设置中选择构建阶段 - 链接二进制库并添加 libGMGridView.a

进口应该是：

```
#import "GMGridView.h"
#import <QuartzCore/QuartzCore.h> 
```

# javascript - JavaScript：当代码长度相同时，重复代码与额外函数

> ID：10990333
> 
> 赞同：1
> 
> 时间：2012-06-12T03:51:55.970
> 
> 标签：javascript, conventions, code-organization, simplify

根据上[一个问题](https://stackoverflow.com/questions/10974493/javascript-quickly-lookup-value-in-object-like-we-can-with-properties/10974721)的答案更新我的代码后，我想出了以下解决方案：

```
var Coder = (function() {
    var controlWords = [
            ['ONE','OO'],
            ['TWO','TT'],
            ['THREE','RR'],
          //['...','..'],
            ['END','NN']
        ],
        map = {
            '0':' ', '1':'_', '2':',',
            '3':'.', '4':'?', '5':'!',
            '6':'\'','7':'"', '8':'(',
            '9':')', 'a':'o', 'b':'d',
            'c':'a', 'd':'e', 'e':'p',
            'f':'i', 'g':'f', 'h':'v',
            'i':'u', 'j':'l', 'k':'m',
            'l':'y', 'm':'q', 'n':'x',
            'o':'b', 'p':'j', 'q':'t',
            'r':'n', 's':'z', 't':'w',
            'u':'k', 'v':'h', 'w':'s',
            'x':'c', 'y':'r', 'z':'g'
        },
        reverseMap = (function() {
            var j, tmp = {};
            for (j in map){
                if (Object.prototype.hasOwnProperty.call(map, j))
                    tmp[map[j]] = j;
            }
            return tmp;
        })(),
        value, i,
        encode = function(data) {
            var input = (typeof data == 'string' ? data : '');
console.log('Input to encode: '+input);
            for (i = 0; i < controlWords.length; i++) {
                value = new RegExp(controlWords[i][0],'g');
                input = input.replace(value,controlWords[i][1]);
            }
console.log('Encode step 1: '+input);
            input = input.replace(/./g, function(c){
                return reverseMap[c]
                    || reverseMap[c.toLowerCase()].toUpperCase();
            });
console.log('Encoding output: '+input);
            return {length: input.length, data: input};
        },
        decode = function(data) {
            var input = (typeof data == 'string' ? data : '');
console.log('Input to decode: '+input);
            input = input.replace(/./g, function(c){
                return map[c]
                    || map[c.toLowerCase()].toUpperCase();
            });
console.log('Decode step 1: '+input);
            for (i = 0; i < controlWords.length; i++) {
                value = new RegExp(controlWords[i][1],'g');
                input = input.replace(value,controlWords[i][0]);
            }
console.log('Decoding output: '+input);
            return {length: input.length, data: input};
        };
    return {encode: encode, decode: decode};
})();
var str = 'ONE Hello, TWO JavaScript THREE World! END',
    enc = Coder.encode(str).data,
    dec = Coder.decode(enc).data; 
```

如您所见，有很多完全或几乎重复的代码。唯一有意义的区别是两种转换发生的顺序，是否`map`使用`reverseMap`，以及每个控制字数组的哪个索引用作正则表达式，哪个用作替换值。

为了遵守将重复代码包装在子函数中并调用该函数的概念，我做了以下尝试。它将两个转换定义为内部函数，然后根据`type`参数的值决定其余的。

```
var Coder = (function() {
    var controlWords = [ /* same */ ],
        map = { /* same */ },
        reverseMap = /* same */,
        code = function(data, type) {
            var input = (typeof data == 'string' ? data : ''),
                mapping, x, y, value, i,
                transform = function() {
                    return input.replace(/./g, function(c){
                        return mapping[c]
                            || mapping[c.toLowerCase()].toUpperCase();
                    });
                },
                replace = function() {
                    for (i = 0; i < controlWords.length; i++) {
                        value = new RegExp(controlWords[i][x],'g');
                        input = input.replace(value,controlWords[i][y]);
                    }
                    return input;
                };
            if (type == 'decode') {
                mapping = map;
                x = 1;
                y = 0;
                input = transform();
                input = replace();
            } else if (type == 'encode') {
                mapping = reverseMap;
                x = 0;
                y = 1;
                input = replace();
                input = transform();
            } else {
                throw new Error('Invalid type argument!');
            }
            return {data: input, length: input.length};
        };
    return {code: code};
})();
var str = 'ONE Hello, TWO JavaScript THREE World! END',
    enc = Coder.code(str, 'encode').data,
    dec = Coder.code(enc, 'decode').data; 
```

但是，您可能会注意到此代码实际上更长。如果我想添加比“编码”和“解码”更多的类型（不打算），它仍然更容易扩展。但目前效率较低？

然后我回到具有两个功能的版本（以避免传递和检查“类型”）：

```
var Coder = (function() {
    var controlWords = [ /* same */ ],
        map = { /* same */ },
        reverseMap = { /* same */ },
        input, mapping, x, y, value, i,
        transform = function() {
            return input.replace(/./g, function(c){
                return mapping[c]
                    || mapping[c.toLowerCase()].toUpperCase();
            });
        },
        replace = function() {
            for (i = 0; i < controlWords.length; i++) {
                value = new RegExp(controlWords[i][x],'g');
                input = input.replace(value,controlWords[i][y]);
            }
            return input;
        },
        encode = function(data) {
            input = (typeof data == 'string' ? data : '');
            mapping = reverseMap;
            x = 0;
            y = 1;
            input = replace();
            input = transform();
            return {length: input.length, data: input};
        },
        decode = function(data) {
            input = (typeof data == 'string' ? data : '');
            mapping = map;
            x = 1;
            y = 0;
            input = transform();
            input = replace();
            return {length: input.length, data: input};
        };
    return {encode: encode, decode: decode};
})();
// Call methods same as first example 
```

这么长的帖子基本上要问，当它并没有真正帮助代码长度并且没有计划扩展代码或将其作为公共项目发布时，哪个更好，重复代码或额外的功能/检查？其中哪一个是最优雅的解决方案，还是有更好的解决方案？

**编辑**

我想到的一般清理它的一种方法是删除 , 和 的变量声明，`mapping`并将它们作为参数传递给and 。这将产生`x``y``replace``transform`

```
decode = function(data) {
    var input = (typeof data == 'string' ? data : '');
    input = transform(map);
    input = replace(1,0);
    return {length: input.length, data: input};
} 
```

# fortran - 在 gfortran 运行时错误消息中隐藏完整路径

> ID：10990334
> 
> 赞同：0
> 
> 时间：2012-06-12T03:52:03.887
> 
> 标签：fortran, gfortran

我正在使用 gfortran 编译一个包含十几个模块的大程序。每当代码中出现错误时，程序都会生成一条错误消息，其中包含发生错误的行号以及该行所属模块的完整路径。例如：

```
At line 1775 of file C:\temp\test.f90 (Unit = 200, file=' ')
Fortran Run time error: File '*' does not exist 
```

我的问题是如何阻止程序列出有问题的模块的完整路径，而是让它只报告发生错误的模块名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:25:27.193

`gfortran`嵌入在编译阶段用于访问源文件的路径。例如，如果您使用文件的完整路径进行编译，您将在调试输出中获得完整路径。如果您使用相对路径编译，您将在输出中获得相对路径：

```
~/tests[520]$ gfortran -o test.x test.f90
~/tests[521]$ test.x
At line 3 of file test.f90 (unit = 200, file = '')
Fortran runtime error: File '' does not exist

~/tests[522]$ gfortran -o test.x ./test.f90
~/tests[523]$ test.x
At line 3 of file ./test.f90 (unit = 200, file = '')
Fortran runtime error: File '' does not exist

~/tests[524]$ gfortran -o test.x ~/tests/test.f90
~/tests[525]$ test.x
At line 3 of file /home/username/tests/test.f90 (unit = 200, file = '')
Fortran runtime error: File '' does not exist 
```

将编译命令更改为仅使用相对路径访问源。

# c# - 即使没有结果，在 LINQ to SQL 查询中按日期获取记录数

> ID：10990335
> 
> 赞同：0
> 
> 时间：2012-06-12T03:52:09.917
> 
> 标签：c#, linq, entity-framework, linq-to-sql

我编写了以下 LINQ-to-SQL 以使我能够获取每天的记录总数。

为了满足我的需要，我想对其进行一些修改。我进行了各种尝试，但始终无法做到正确。

我想列出过去 9 天，即使在此期间没有“打开”。我还想按日/月分组，而不是像下面那样仅按日分组。

我希望得到的输出示例是：

```
DateString   Opens
===================
 9/5         0
10/5         0
11/5         3 
```

ETC...

```
public List<OpensOverTimeViewModel> GetOpensOverTimeViewModel(int eId)
{

    DateTime lastDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day).AddDays(-9);
    DateTime currentDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day).AddDays(1);

    var summary = (from p in db.Opens
                    where (p.ElementId == eId) && (p.Timestamp >= lastDate) && (p.Timestamp <= currentDate)
                    let k = new
                    {
                        Day = p.Timestamp.Day
                    }
                    group p by k into t
                    select new OpensOverTimeViewModel
                    {
                        DateString = t.Key.Day,
                        TotalOpens = t.Count(),
                        ElementName = ""
                    }).ToList();

    return summary;
} 
```

任何有关如何最好地解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:17:19.960

从数据库中取回结果后，您可以在代码中创建左连接

将下面的行放在您的`return summary;`行之前。

```
var allDates = from idx in Enumerable.Range(0, (currentDate - lastDate).Days)
               select lastDate.AddDays(idx);

summary = (
          from allDate in allDates
          join su in summary on allDate.Day equals su.DateString into x
          from su in x.DefaultIfEmpty()
          select new OpensOverTimeViewModel
          {
              DateString = allDate.Day,
              TotalOpens = su == null ? 0 : su.TotalOpens,
              ElementName = ""
          }).ToList(); 
```

要按天/月分组，我建议使用整个日期，`t.Key.Day`替换为.`t.Key.Date``DateString``DateTime`

# asp.net-mvc - 使用输出缓存和其他操作过滤器

> ID：10990337
> 
> 赞同：13
> 
> 时间：2012-06-12T03:52:15.317
> 
> 标签：asp.net-mvc, outputcache, action-filter

我在我的应用程序中的几个操作中添加了输出缓存，以便轻松提升性能。但是，这些操作还需要在每次请求后通过点击 Redis 数据库来增加一个计数器（它是一个视图计数器）。

起初，我想我可以调整操作过滤器的执行顺序，以确保计算视图：

```
public class CountersAttribute : ActionFilterAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        //increment my counter all clever like
        base.OnResultExecuted(filterContext);
    }
} 
```

但这没有用；显然，OutputCacheAttribute 的行为不像正常的操作过滤器。然后我尝试实现自定义输出缓存：

```
public class OutputCacheWithCountersAttribute : OutputCacheAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        //straight to the source to get my headcount!
        base.OnResultExecuted(filterContext);
    }
} 
```

不，也没有用；一旦缓存了动作，动作过滤器似乎就被完全忽略了。真可惜。

那么，呃，我有什么办法（不实现自定义输出缓存提供程序）来确保我的视图被正确计数，并且干净且合理？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T04:46:25.540

顺便说一句，它`OutputCacheAttribute`有一些限制，Paul Hiles 开发的一个名为[DonutOutputCache](http://mvcdonutcaching.codeplex.com/)的自定义属性有助于克服这些限制。

它支持的一项重要功能是您可以拥有一个可以一直调用的操作过滤器，即使该操作是否标有缓存属性。

例如。您希望将操作缓存 5 秒，同时您希望在每次操作使用`LogThis`过滤器收到请求时记录下来，您可以通过以下方式简单地实现这一点，

```
[LogThis]
[DonutOutputCache(Duration=5, Order=100)]
public ActionResult Index() 
```

从[保罗](http://www.devtrends.co.uk/blog/donut-output-caching-in-asp.net-mvc-3#109)，

> 是的，与内置的 OutputCacheAttribute 不同，即使从缓存中检索到页面，操作过滤器也会执行。唯一需要补充的是，您确实需要注意过滤器顺序。如果您的操作过滤器实现 OnResultExecuting 或 OnResultExecuted，那么这些方法将在所有情况下执行，但对于 OnActionExecuting 和 OnActionExecuted，它们只会在过滤器在 DonutOutputCacheAttribute 之前运行时执行。这是由于 MVC 在设置 filterContext.Result 属性时阻止后续过滤器执行的方式，这是我们需要为输出缓存执行的操作。
> 
> 我认为您不能依赖在动作或控制器上定义动作过滤器的顺序。为了确保一个过滤器在另一个过滤器之前运行，您可以使用所有 ActionFilterAttribute 实现中存在的 Order 属性。任何未设置 order 属性的操作，默认值为 -1，这意味着它们将在具有显式 Order 值的过滤器之前执行。
> 
> 因此，在您的情况下，您只需将 Order=100 添加到 DonutOutputCache 属性，所有其他过滤器将在缓存过滤器之前执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T20:29:37.277

即使页面被缓存，您也可以从布局视图进行 AJAX 调用并跟踪访问者。这就是谷歌分析所做的。我建议从布局视图中执行它，因为它将在使用该布局的所有视图中执行。还有一条评论，假设您有两个布局视图：一个用于网站的公共部分，一个用于后端（仅限员工）。您可能对跟踪用户感兴趣，而不是员工，因此这是在 Layout View 进行跟踪的另一个好处。如果将来您想跟踪员工在做什么，您可以为后端布局视图添加不同的跟踪器。我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:59:22.820

原因实际上是在.NET 源中，与DonutOutputCache 无关：

```
public void SetCacheability(HttpCacheability cacheability)
{
  if (cacheability < HttpCacheability.NoCache || HttpCacheability.ServerAndPrivate < cacheability)
    throw new ArgumentOutOfRangeException("cacheability");
  if (HttpCachePolicy.s_cacheabilityValues[(int) cacheability] >= HttpCachePolicy.s_cacheabilityValues[(int) this._cacheability])
    return;
  this.Dirtied();
  this._cacheability = cacheability;
} 
```

换句话说，如果你先设置NoCache（值为1），如果你尝试设置更高的值，它总是会返回，比如4（public）。

唯一的解决方案是分叉项目并将其扩展为您需要的方式，或者发送拉取请求以`protected ICacheHeadersHelper CacheHeadersHelper`标记`DonutOutputCacheAttribute`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-04T17:32:58.490

Use a "Validation Callback" that is executed ALWAYS even if the cached page should be served

```
public class MyCacheAttribute : OutputCacheAttribute
{
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        SaveToLog();

        httpContext.Response.Cache.AddValidationCallback(MyCallback, null);

        base.OnResultExecuting(filterContext);
    }

    // This method is called each time when cached page is going to be served
    private void MyCallback(HttpContext context, object data, ref HttpValidationStatus validationStatus)
    {
        SaveToLog();
    }
} 
```

NOTE: the `SaveToLog()` is called in two places, that's by design (first call when cache is bypassed, seconds call when cached version is served)

# java - Java 记录器消息模板不起作用

> ID：10990340
> 
> 赞同：4
> 
> 时间：2012-06-12T03:52:32.267
> 
> 标签：java, logging

`java.util.logging.Logger`我在我的程序中使用了一个记录器。首先我写了这样的东西：

```
logger.log(Level.INFO, "message"+str); 
```

并且IDE告诉我可以使用消息模板来提高效率，因此IDE将上面的内容更改为：

```
logger.log(Level.INFO, "message{0}", str); 
```

但是当我运行程序时，输出只是：

```
11:43:05[INFO]message{0} 
```

上面的代码有什么问题？我搜索了该方法，每个站点都告诉我它是正确的语法，但它似乎不起作用。

**编辑**：我注意到另一个线程在讨论这个问题，答案是转义单引号。但是，我的原始代码在字符串中没有任何单引号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:22:43.193

您想使用`MessageFormat`该类`log.info(MessageFormat.format("message{0}",string))` 的字符串将替换“{0}”。

# android - 适用于所有平板电脑的通用布局

> ID：10990345
> 
> 赞同：0
> 
> 时间：2012-06-12T03:53:29.370
> 
> 标签：android, layout

我正在家里做项目，其中左侧有 4 个按钮，右侧有 4 个按钮，尺寸为 100 x 100dp。我使用了绝对布局，以便通过给出 x 和 y 值将其正确放置在所需的位置。

这适用于分辨率为 800 * 440 的 7 英寸平板电脑。如果我在三星 Galaxy Tab 或除 800 * 440 以外的任何其他分辨率上安装了 apk，则按钮会随机放置或放在不同的较小位置。

我该如何解决？使用相对布局或不同布局我无法输入按钮大小值？我希望按钮具有特定大小。

有人可以帮我解决这个问题吗？如何将我的按钮放置在任何分辨率的任何平板电脑的相同位置。

等待你的回复！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:31:15.967

这是一个示例，如果您遇到任何问题，下面的布局将始终在中心放置按钮，然后您可以询问我会尽力帮助您..

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:text="Button 1" android:width="100dp"/>

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignParentRight="true"
    android:text="Button 2" android:width="100dp"/>

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:text="Button 3" android:width="100dp"/>

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button3"
    android:layout_alignBottom="@+id/button3"
    android:layout_alignParentRight="true"
    android:text="Button 4" android:height="50dp" android:width="100dp"/> 
```

# database - 如何使用 sql developer 设置自动递增列

> ID：10990347
> 
> 赞同：45
> 
> 时间：2012-06-12T03:53:47.047
> 
> 标签：database, oracle, oracle-sqldeveloper

如何使用 Oracle SQL Developer 将列设置为自动递增？为什么表格被禁用？

![甲骨文 SQL 开发人员](../Images/28e84e2f0d63580f0d6c72818ff880b5.png)

**注意：**图像显示了数据建模器，但问题和最佳答案谈论的是编辑现有数据库。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-12-11T22:31:47.073

如果要使 PK 自动递增，则需要为该主键设置 ID 列属性。

1.  右键单击表格并选择“编辑”。
2.  在“编辑”表窗口中，选择“列”，然后选择您的 PK 列。
3.  转到 ID 列选项卡并选择列序列作为类型​​。这将创建一个触发器和一个序列，并将序列与主键相关联。

请参阅下图以更好地理解。

![在此处输入图像描述](../Images/548b9aacbc48f5ccb537cd9d71597e7a.png)

// 我的来源是：[http ://techatplay.wordpress.com/2013/11/22/oracle-sql-developer-create-auto-incrementing-primary-key/](http://techatplay.wordpress.com/2013/11/22/oracle-sql-developer-create-auto-incrementing-primary-key/)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-12T04:19:47.503

不幸的是，oracle 不像 mysql 那样支持 auto_increment。你需要付出一些额外的努力才能做到这一点。

说这是你的桌子 -

```
CREATE TABLE MYTABLE (
  ID NUMBER NOT NULL,
  NAME VARCHAR2(100)
  CONSTRAINT "PK1" PRIMARY KEY (ID)
); 
```

您将需要创建一个序列 -

```
CREATE SEQUENCE S_MYTABLE
START WITH 1
INCREMENT BY 1
CACHE 10; 
```

和一个触发器——

```
CREATE OR REPLACE TRIGGER T_MYTABLE_ID
BEFORE INSERT
ON MYTABLE
REFERENCING NEW AS NEW
FOR EACH ROW
BEGIN
  if(:new.ID is null) then
  SELECT S_MYTABLE.nextval
  INTO :new.ID
  FROM dual;
  end if;
END;
/

ALTER TRIGGER "T_MYTABLE_ID" ENABLE; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-11T15:33:39.137

您可以在 SQL Modeler 中进行自动增量。在列属性窗口中单击：常规，然后勾选自动增量框。之后，将为您启用自动增量窗口。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-07T06:37:32.997

@tom-studee 你是对的，可以在数据建模器中做到这一点。

双击您的表格，然后转到列部分。在这里双击将具有自动增量的列。在一般部分有一个复选框“自动增量”，只需勾选它。

之后，您还可以转到“自动增量”部分对其进行自定义。

当您保存它并要求数据建模器生成 SQL 脚本时，您将看到代表您的自动增量的序列和触发器。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-30T06:24:09.940

**更新**：在 Oracle 12c 以后，我们可以选择创建自动增量字段，它比触发器和序列更好。

*   右键单击表格并选择“编辑”。
*   在“编辑”表窗口中，选择“列”，然后选择您的 PK 列。
*   转到身份列选项卡并选择“生成为身份”作为类型，将 1 放在开头和增量字段中。这将使该列自动递增。

**见下图**

[![在此处输入图像描述](../Images/d9a336f9c71c611d98533c4d368d1818.png)](https://i.stack.imgur.com/SQQ2Y.png)

**从 SQL 语句**

IDENTITY 列现在在 Oracle 12c 上可用：

```
 create table t1 (
     c1 NUMBER GENERATED by default on null as IDENTITY,
     c2 VARCHAR2(10)
     ); 
```

或指定起始值和增量值，同时防止任何插入标识列（始终生成）（同样，仅限 Oracle 12c+）

```
create table t1 (
    c1 NUMBER GENERATED ALWAYS as IDENTITY(START with 1 INCREMENT by 1),
    c2 VARCHAR2(10)
    ); 
```

**编辑**：如果您遇到任何错误，例如“ORA-30673：要修改的列不是标识列”，那么您需要创建新列并删除旧列。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-07T15:58:58.363

我发现这篇文章看起来有点旧，但我想我会向大家更新我的新发现。

我在 Windows 上使用 Oracle SQL Developer 4.0.2.15。我们的数据库是在 Windows 上运行的 Oracle 10g（版本 10.2.0.1）。

要在 Oracle 中使列自动递增 -

1.  在 Connections 选项卡中打开数据库连接
2.  展开 Tables 部分，右键单击要更改为自动递增的列的表，然后选择 Edit...
3.  选择列部分，然后选择要自动递增的列（主键列）
4.  接下来，单击列列表下方的“标识列”部分，并将类型从无更改为“列序列”
5.  保留默认设置（或者如果您愿意，可以更改序列和触发器的名称），然后单击确定

您的 id 列（主键）现在将自动递增，但序列将从 1 开始。如果您需要将 id 递增到某个点，则必须针对该序列运行一些 alter 语句。
[这篇文章](https://stackoverflow.com/questions/13169375/oracle-data-pump-export-includes-incorrect-sequences/19083814#19083814)有更多细节以及如何克服这个问题。

我在[这里找到了解决方案](http://techatplay.wordpress.com/2013/11/22/oracle-sql-developer-create-auto-incrementing-primary-key/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-12T04:09:30.433

Oracle 没有自动递增列。您需要一个序列和一个触发器。这是一篇解释如何做到这一点的随机博客文章：[http ://www.lifeaftercoffee.com/2006/02/17/how-to-create-auto-increment-columns-in-oracle/](http://www.lifeaftercoffee.com/2006/02/17/how-to-create-auto-increment-columns-in-oracle/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-16T09:51:14.060

如何使用 Oracle SQL Developer 执行此操作：在左侧窗格中，您将在连接下找到“序列”，右键单击并从上下文相关弹出窗口中选择创建新序列。填写详细信息：模式名称、序列名称、属性（以值开头、最小值、最大值、增量值等），然后单击确定。假设您有一个带有使用此 auto_increment 的键的表，在此表中插入时，只需在使用此属性的字段中提供“your_sequence_name.nextval”。我想这应该有帮助！:)

# perl - Perl 形成字符串随机字符串组合

> ID：10990357
> 
> 赞同：2
> 
> 时间：2012-06-12T03:54:41.710
> 
> 标签：perl

我有一个包含大约 25000 条记录的文件，每条记录有超过 13 个条目是药物名称。我想为这些条目形成所有可能的配对组合。例如：如果一行有三个记录 A、B、C。我应该形成组合为 1) AB 2) AC 3)B C。下面是我从互联网上获得的代码，它仅适用于将单行分配给大批：

```
use Math::Combinatorics;

my @n = qw(a b c);
my $combinat = Math::Combinatorics->new(
  count => 2,
  data  => [@n],
);

while ( my @combo = $combinat->next_combination ) {
  print join( ' ', @combo ) . "\n";
} 
```

我正在使用的代码，它不会产生任何输出：

```
open IN, "drugs.txt" or die "Cannot open the drug file";
open OUT, ">Combination.txt";

use Math::Combinatorics;

while (<IN>) {
  chomp $_;
  @Drugs = split /\t/, $_;
  @n = $Drugs[1];

  my $combinat = Math::Combinatorics->new(
    count => 2,
    data  => [@n],
  );

  while ( my @combo = $combinat->next_combination ) {

    print join( ' ', @combo ) . "\n";
  }
  print "\n";
} 
```

你能建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:33:15.670

数组中的所有对都可以直接计算。从您的问题中使用药物 A、B 和 C，您可能会认为它们形成一个方阵。

```
AA  AB  AC
BA  BB  BC
CA  CB  CC 
```

您可能不想要“对角线”对 AA、BB 和 CC。请注意，其余元素是对称的。例如，元素 (0,1) 是 AB， (1,0) 是 BA。在这里，我再次假设这些是相同的，并且您不希望重复。

要从线性代数中借用一个术语，您需要[上三角形](http://en.wikipedia.org/wiki/Triangular_matrix)。假设给定行上的每个药物名称都是唯一的，这样做可以通过构造消除重复项。下面是一个算法。

1.  依次选择每种药物*q*就行。对于其中的每一个，执行步骤 2 和 3。
2.  从紧随*q*的药物开始，然后对列表其余部分中的每种药物*r ，执行步骤 3。*
3.  记录对 ( *q* , *r* )。
4.  记录的列表是所有唯一对的列表。

在 Perl 中，这看起来像

```
#! /usr/bin/env perl

use strict;
use warnings;

sub pairs {
  my @a = @_;

  my @pairs;
  foreach my $i (0 .. $#a) {
    foreach my $j ($i+1 .. $#a) {
      push @pairs, [ @a[$i,$j] ];
    }
  }

  wantarray ? @pairs : \@pairs;
}

my $line = "Perlix\tScalaris\tHashagra\tNextium";
for (pairs split /\t/, $line) {
  print "@$_\n";
} 
```

输出：

```
Perlix Scalaris
Perlix 哈希格拉
Perlix Nextium
斯卡拉里斯哈沙格拉
Scalaris Nextium
哈希格拉 Nextium
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:20:30.930

您设置`@n`为包含数组的第二个值的`@Drugs`数组，请尝试仅`data => \@Drugs`在 Math::Combinatorics 构造函数中使用。

另外，使用严格；使用警告；等等等等等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:10:33.533

我以前为别人回答过类似的问题。对他们来说，他们有一个问题是如何将一个字母列表组合成所有可能的单词。

看看[如何使用 Perl 从一组字母中生成单词列表](https://stackoverflow.com/questions/9105363/how-can-i-generate-a-list-of-words-from-a-group-of-letters-using-perl)。在其中，您将从[我的答案](https://stackoverflow.com/a/9106734/368630)和[ikegami的](https://stackoverflow.com/users/589924/ikegami)[*正确*](https://stackoverflow.com/a/9106118/368630)[答案](https://stackoverflow.com/a/9106118/368630)中看到使用[Math::Combinatorics](http://search.cpan.org/~allenday/Math-Combinatorics-0.09/lib/Math/Combinatorics.pm)的示例。（他用正则表达式做了一些相当有趣的事情）。[](https://stackoverflow.com/a/9106118/368630)

 *我相信其中之一会引导您找到所需的答案。也许当我有更多时间时，我会专门针对您的问题来充实一个答案。我希望这个链接有帮助。*

# php - Wordpress 图库问题 - 编辑后的照片仍显示旧 src

> ID：10990358
> 
> 赞同：1
> 
> 时间：2012-06-12T03:55:19.673
> 
> 标签：php, image, wordpress

当循环浏览 wordpress 画廊以显示投资组合中的图像时，我似乎无法让 wordpress 返回编辑后的图像 src。当我说已编辑时，我的意思是我已经使用 wordpress 图像编辑器裁剪和缩放了图像。出于某种奇怪的原因，所有 src url 都喜欢在管理员中，但是当涉及到通过循环实际输出图像时，我一直返回原始文件。我知道我可以在 Photoshop 等中缩放，但我无法解决的问题让我发疯了！

我尝试将编辑后的图像添加到另一个画廊，但它仍然返回旧的未编辑图像的 src。甚至有可能让 wp 在画廊循环中返回编辑后的图像网址吗？

```
$menu_sets_query = '';

$portfolio_items = -1;

$args = array( 
'post_type' => 'attachment', 
'numberposts' => $portfolio_items, 
'post_status' => null, 
'post_parent' => $post->ID,
'order' => 'ASC',
'orderby' => 'menu_order',
); 
$all_photo_arr = get_posts( $args ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:48:51.530

确保您没有使用任何 WordPress 页面缓存系统。
如果是，请确保清除缓存。

# javascript - 如何显示“正在加载..”而 还没准备好？

> ID：10990362
> 
> 赞同：2
> 
> 时间：2012-06-12T03:55:54.197
> 
> 标签：javascript, html

如何在`<iframe id="pdfViewer" name="pdfViewer" src="foo.pdf"></iframe>`未准备好时显示“正在加载..”？我不是网络开发人员。我的第一次尝试是使用 JavaScript，但是：

```
var xhr = new XMLHttpRequest;
xhr.Open("GET", "foo.pdf");
xhr.onreadystatechange = function()
{
  if(this.readyState == 4) { 
      document.getElementById("container").innerHTML = this.responseText;
   }
}
xhr.send(null); 
```

我不能在这里使用 jQuery 解决方案，因为我不能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:22:23.300

简单的例子：[jsfiddle.net/G5wkS/](http://jsfiddle.net/G5wkS/)

```
var placeholder = document.createElement('div');
placeholder.textContent = 'Loading...';
document.body.appendChild(placeholder);
var iframe = document.createElement('iframe');
iframe.style.setProperty('display', 'none');
placeholder.parentNode.insertBefore(iframe, placeholder.nextSibling);
iframe.addEventListener('load', function() {
    placeholder.parentNode.removeChild(placeholder);
    iframe.style.removeProperty('display');
});
iframe.setAttribute('src', 'http://127.0.0.1/'); 
```

创建一个占位符和一个 iframe（最初是隐藏的）。当然，您也可以选择用 HTML 编写这些内容，并使用您自己的样式和属性将它们放置在您想要的任何位置。然后，一旦 iframe`onload`触发，移除占位符并取消隐藏 iframe。`onerror`如果事件触发，您可能想要做一些不同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:07:36.247

另一种方法见，您可以创建覆盖类型的 div 并以编程方式将其放置在 iframe 上方。一旦内容准备好隐藏覆盖。

# php - PHP中的MVC架构问题

> ID：10990370
> 
> 赞同：0
> 
> 时间：2012-06-12T03:57:36.970
> 
> 标签：php, model-view-controller, oop

我正在经历 PHP 中 MVC 的概念。

我找到了一个显示 HELLO WORLD 的示例代码。

由于我对此很陌生，我不知道如何为 Radio 活动按钮或任何其他接受用户输入并将其存储在数据库中的按钮实现 MVC 架构。

我发现显示 Hello world 的示例代码如下

```
<?php
class Model {
    public $text;

    public function __construct() {
        $this->text = 'Hello world!';
    }
}

class View {
    protected $model;
    protected $controller;

    public function __construct(Controller $controller, Model $model) {
        $this->controller = $controller;
        $this->model = $model;
    }

    public function output() {
        return $this->model->text ;
    }

}

class Controller {
    protected $model;

    public function __construct(Model $model) {
        $this->model = $model;
    }
}

$model = new Model();
$controller = new Controller($model);
$view = new View($controller, $model);
echo $view->output();
?> 
```

我一直在网上寻找答案很长时间，但没有成功。:(

因此，我将不胜感激。如果您能为我提供此示例代码，那将非常棒。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:07:59.850

建议浏览并观看一些 codeigniter 教程，我知道它是一个框架，但会帮助您更好地理解这个概念。

他们很好地解释了 mvc。

也看看这个

[http://net.tutsplus.com/articles/news/how-to-build-a-login-system-for-a-simple-website/](http://net.tutsplus.com/articles/news/how-to-build-a-login-system-for-a-simple-website/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T04:04:18.257

您最好尝试一些 MVC 框架，例如 CodeIgniter，它非常易于理解和使用。

# android - 安卓上的 ARFCN、TMSI、IMSI

> ID：10990377
> 
> 赞同：0
> 
> 时间：2012-06-12T03:59:44.370
> 
> 标签：android, gsm

我正在尝试从连接到 gsm 网络的安卓手机中提取 ARFCN TMSI 和 IMSI。Android API 中没有这样做的文档。我想知道是否有人知道获取这些信息的方法。任何的意见都将会有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:57:45.207

您可以使用[`TelephonyManager`](http://developer.android.com/reference/android/telephony/TelephonyManager.html)获取有关电话服务的一些基本信息，包括[IMSI](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSubscriberId%28%29)，但 TMSI 和其他信息可能不可用。

# authentication - 授权计算机访问 Web 应用程序

> ID：10990379
> 
> 赞同：9
> 
> 时间：2012-06-12T03:59:55.443
> 
> 标签：authentication, security, hmac, one-time-password

我有一个 Web 应用程序，我的任务是添加安全登录以增强安全性，类似于 Google 添加到 Google 帐户的内容。

**用例**

本质上，当用户登录时，我们想要检测用户之前是否授权过这台计算机。如果计算机未获得授权，则向用户发送一个一次性密码（通过电子邮件、SMS 或电话），他们必须输入该密码，用户可以选择记住这台计算机。在 Web 应用程序中，我们将跟踪授权设备，允许用户查看他们上次从该设备登录的时间/地点，并根据他们的选择取消对任何设备的授权。

我们需要一个非常轻量级的解决方案（也就是说，不需要安装客户端软件），并且适用于 Safari、Chrome、Firefox 和 IE 7+（不幸的是）。我们将提供 x509 安全性，它提供了足够的安全性，但我们仍然需要为不能或不会使用 x509 的客户提供解决方案。

我的意图是使用 cookie 存储授权信息（或者，可能使用本地存储，降级为 flash cookie，然后是普通 cookie）。

**一开始脸红**

![初始安全登录序列图](../Images/2627c2bff9a9ed89256999779a04bef0.png) 跟踪两个单独的值（本地数据或 cookie）：表示安全登录令牌的哈希值和设备令牌。这两个值都由 Web 应用程序驱动（和记录），并指示给客户端。SSO 令牌取决于设备以及序列号。这有效地允许设备被取消授权（所有 SSO 令牌都变得无效）并通过使用序列号和使用随机数来减轻重放（虽然不是有效的，这就是我问这个问题的原因）。

**问题**

使用此解决方案，某人可以只复制 SSO 和设备令牌并在另一个请求中使用。虽然序列号将帮助我检测此类滥用并因此取消对设备的授权，但检测和响应只能在有效设备和恶意请求都尝试访问之后发生，这是造成损害的充​​足时间。

我觉得使用 HMAC 会更好。跟踪设备、序列，使用私钥创建随机数、时间戳和散列，然后将散列和这些值作为纯文本发送。服务器做同样的事情（除了验证设备和序列）并进行比较。这似乎更容易，也更可靠......假设我们可以安全地协商、交换和存储私钥。

**问题**

那么，如何安全地为授权设备协商私钥，然后安全地存储该密钥？至少，如果我满足于使用本地存储或闪存 cookie 存储私钥并只是说它“足够好”，是否更有可能？或者，我可以对我的原始草案做些什么来减轻我描述的漏洞？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T03:14:09.243

我怀疑您要求的安全性超出了所描述的系统所能提供的安全性。简而言之，如果您无法控制客户端，它可以（错误）以无数（非预期）方式使用 SSO 和设备令牌，正如您所知。系统的其他部分设计得有多好并不重要。这是您系统的致命弱点。

换句话说，在您所描述的系统中，您正在分配并信任客户端的 Web 浏览器来提供其设备令牌和 SSO 令牌。对？如果是这样，您如何防止这些令牌移动到其他设备？（见下文缓解策略。）

现在，考虑到这一点，正面回答您的问题：

> “那么，我怎样才能安全地协商授权设备的私钥，然后安全地存储该密钥？”

正如我上面解释的那样，这样做并没有什么坏处，但它不会有帮助。

> “至少，如果我满足于使用本地存储或闪存 cookie 存储私钥并只是说它“足够好”，是否更有可能？

我不能告诉你什么是“足够好”。您应该清楚地传达“移动代币”攻击并帮助客户做出明智的决定。

> “或者，我可以对我的原始草案做些什么来减轻我描述的漏洞吗？”

当然，有一些缓解策略取决于您的用户安装基础和您对风险的承受能力。

在我看来，关键问题是——想想可能将令牌从一台机器转移到另一台机器的人的技能和能力——你的缓解策略能否在不降低系统性能和可用性的情况下显着削弱这种行为“诚实”的用户？

这里有一些想法：

*   您可以使用两因素身份验证，例如 RSA SecurID。这不会阻止机器令牌的移动，但需要 TFA 随之移动。

*   您可以尝试混淆或隐藏这些令牌的本地副本，但这似乎只是通过默默无闻的安全性。

*   您可以检查机器的 MAC 地址。如果克隆 MAC 地址比移动设备令牌更难，这可能是一个有用的安全层。

*   您可以尝试要求使用某些自定义浏览器来“锁定”对这些令牌的访问。这只是一个想法；我不知道它是否实用。

*   如果您知道机器不应该在物理上移动，则可以检查网络属性以寻找机器位于不同网络位置的证据，从而寻找物理位置。

*   如果您查询和存储（在服务器上，而不是在客户端上）计算机配置信息，您可以检测令牌是否从具有一种配置的机器移动到具有不同配置的机器。（当然，当机器升级时，这种方法会报错。）

*   您可能需要安装一个为 Web 应用程序提供身份验证 API 的应用程序，而不是存储本地设备令牌。该应用程序可以将自身嵌入计算机上难以破解、根除或移动的某个位置。*（通过这种方式，该应用程序将为机器*提供“双因素身份验证”系统。）

*   与上述想法一致或独立于上述想法，您可以在设备上安装单独的“电话回家”应用程序。它会不时与您的服务器“签入”。如果它更改网络位置、设备配置或停止响应，您可以相应地拒绝访问。

我希望这有帮助。我不认为自己是安全专家，但我喜欢思考设计问题。如果您在[https://security.stackexchange.com/](https://security.stackexchange.com/)上询问，您可能会得到更好的答复）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:10:50.453

如何捕获计算机的 MAC 地址并将该信息也存储在数据库中？如您所知，MAC 地址对于所有计算机都是唯一的，而不是 IP 地址。

[使用 Java 小程序在网页上获取 MAC 地址](https://stackoverflow.com/questions/4467905/getting-mac-address-on-a-web-page-using-a-java-applet)

在线查看有几种方法可以通过网页和小程序捕获 MAC 地址。

# c++ - Boost.Asio 解析器的结果不同

> ID：10990383
> 
> 赞同：6
> 
> 时间：2012-06-12T04:01:32.040
> 
> 标签：c++, sockets, boost, boost-asio, getaddrinfo

我有一个罐头复制器每 5 秒调用一次`boost::asio::ip::tcp::resolver::resolve()`。`localhost`它计算返回的端点数，并将该值与前一次迭代进行比较。

```
#include <boost/asio.hpp>

#include <iostream>

int main(int argc, char *argv[])
{
    if ( argc < 3 ) {
        std::cerr << argv[0] << " host port" << std::endl;
        exit( EXIT_FAILURE );
    }
    const char* host = argv[1];
    const char* service = argv[2];

    boost::asio::io_service io_service;
    boost::asio::ip::tcp::resolver resolver( io_service );

    size_t previous = 0;
    while ( true ) {
        boost::asio::ip::tcp::resolver::iterator i(
                resolver.resolve(
                    boost::asio::ip::tcp::resolver::query( host, service )
                    )
                );
        size_t count( 0 );
        while ( i != boost::asio::ip::tcp::resolver::iterator() ) {
            std::cout << i->endpoint() << std::endl;
            ++i;
            ++count;
        }

        std::cout << "got " << count << " addresses" << std::endl;
        if ( previous == 0 ) {
            previous = count;
        }
        assert( count == previous );

        sleep( 5 );
    }
} 
```

示例会话

```
~> time ./addrinfo_asio localhost 80

...

127.0.0.1:80
got 1 addresses
[::1]:80
127.0.0.1:80
got 2 addresses
addrinfo_asio: addrinfo_asio.cc:35: int main(int, char**): Assertion `count == previous' failed.
Aborted (core dumped)

real    216m20.515s
user    0m0.181s
sys     0m0.193s
~> 
```

你可以看到它找到一个端点（127.0.0.1:80）大约 3.5 小时，然后找到两个（127.0.0.1:80 和 [::1]:80）。我在想

1.  为什么端点数从一变为二？
2.  什么可能导致它？

解析 ipv4 和 ipv6 地址是有意的，我不想将查询限制为 ipv4。我意识到这种行为可能并不特定于 asio，我也有一个`getaddrinfo`直接调用的复制器，它表现出相同的行为。如果相关的话，我的平台是 ppc64 RHEL 6.2。我没有尝试在其他地方复制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:36:35.137

您只能将解析器限制为 IPv4：
ip::tcp::resolver::query(ip::tcp::v4(), host, service)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-08T23:03:07.027

如果您看一下 Chris Kohlhoff（asio 的作者）[在 boost con 2011 上关于 ipv6 和 asio 的演讲](https://raw.githubusercontent.com/boostcon/2011_presentations/master/wed/IPv6.pdf)，他会使用以下技巧。

他对端点列表重新排序，使 ipv4 端点排在列表的首位，并附有评论“现实检查：IPv6 不太可能还可用”。

他的示例代码在 boost 1.47 中发布的 asio 版本中工作，但在我使用的版本（asio 独立 1.18.0）中不再工作，因为他习惯于随着 C++ 的发展不断更改 asio 实现。

无论如何，以下代码适用于 asio 1.18.0，它包含在 boost 1.74 中

```
auto resolverResults(mResolver.resolve(hostName, serviceName));
std::transform(resolverResults.begin(), resolverResults.end(), std::back_inserter(endpoints), [](const asio::ip::basic_resolver_entry<asio::ip::tcp>& entry) { return entry.endpoint(); });
std::stable_partition(endpoints.begin(), endpoints.end(), [](const asio::ip::tcp::endpoint& endpoint) { return endpoint.protocol() == asio::ip::tcp::v4(); });
auto endpointsWithIP4First = asio::ip::tcp::resolver::results_type::create(endpoints.begin(), endpoints.end(), hostName, serviceName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T22:28:39.853

好吧，我不是提升专家，但快速浏览告诉我它似乎`AI_ADDRCONFIG`默认使用（这很好，几乎应该总是使用它）。使用该标志，如果您至少配置了一个全局可路由 IPv6 地址，它只会返回 IPv6 地址。也许您的 IPv6 连接并不总是可用？

# jqgrid - jqgrid动态更改colmodel中的搜索参数

> ID：10990384
> 
> 赞同：1
> 
> 时间：2012-06-12T04:02:09.193
> 
> 标签：jqgrid

我自己添加了一个导航按钮。单击它时，我使用：

```
$("#"+gridId).setColProp('myColumn', { search: true }); 
```

但是我发现一旦我点击搜索按钮，可以搜索或不能搜索的列是定义的，并且不会随着`setColProp`方法而改变。我怎样才能动态改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:57:25.940

问题是`recreateFilter`默认值`false`类似于[recreateForm](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)属性的值的属性。在我看来，属性的默认值应该是`true`（见[我的建议](http://www.trirand.com/blog/?page_id=393/feature-request/change-default-settings-for-recreatefilter-and-recreateform-to-true/#p21082)）。

以任何方式解决问题，您都可以包括

```
$.extend($.jgrid.search, {recreateFilter: true}); 
```

在你的代码中。它将更改 的默认值`recreateFilter`。如何[在演示](http://www.ok-soft-gmbh.com/jqGrid/SearchPropertyDynamically.htm)中验证问题将在此之后得到解决。

# windows - Windows 服务：如何使用 NOP OnStop() 进行清理

> ID：10990387
> 
> 赞同：0
> 
> 时间：2012-06-12T04:02:32.410
> 
> 标签：windows, service, resources, .net-assembly

一个windows服务程序是用C#从ServiceBase类派生的。该服务将在 OnStart() 中加载带有后台线程的程序集，并通过 InvokeMember() 调用从函数入口点开始。在程序集 dll/后台线程内部，程序在运行期间会分配各种系统资源。现在的问题是 OnStop() 实现为 NOP，所以没有我可以使用的钩子。在不更改 OnStop() 实现的情况下，如何在“sc stop aService”停止服务时清理分配的资源？

我尝试了各种方法，但除了更改 OnStop() 之外，似乎没有办法拦截“sc stop”消息。我试图添加一个带有背景清理线程的 try/catch/finally 块，但我无法调用 finally 子句。尝试过 AppDomain UnhandledException 和 ProcessExit 处理程序，但也没有做任何事情。那么 SERVICE_CONTROL_STOP(sc stop) 对后台线程有什么影响？无论如何我可以清理我的程序集/ dll中的资源吗？

# c# - Windows Phone 7 反序列化异常

> ID：10990388
> 
> 赞同：0
> 
> 时间：2012-06-12T04:02:53.530
> 
> 标签：c#, windows-phone-7, xml-serialization

我正在尝试读取已使用 Serialize 保存到 IsolatedStorageFile 的 XML 文件。当我尝试在 try 块中读回 XML 文件时，它会在反序列化步骤中引发异常。难道我做错了什么？我怎样才能解决这个问题？

投注等级：

```
public class Bet
{
    public String Amount { get; set; }
    public String Opponent { get; set; }
    public String Terms { get; set; }
    public int Result { get; set; }
    public String ResultColor { get; set; }

    public Bet(String amount, String opponent, String terms, int result, String rcolor)
    {
        this.Amount = amount;
        this.Opponent = opponent;
        this.Terms = terms;
        this.Result = result;
        this.ResultColor = rcolor;
    }
} 
```

保存/加载投注功能

```
public void SaveBets()
{
    List<Bet> bets = new List<Bet>();

    foreach (Bet item in openBetList)
        bets.Add(item);

    foreach (Bet item in closedBetList)
        bets.Add(item);

    // Write to the Isolated Storage
    XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
    xmlWriterSettings.Indent = true;

    using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
    {
        using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("Bets.xml", FileMode.Create))
        {
            XmlSerializer serializer = new XmlSerializer(typeof(List<Bet>));
            using (XmlWriter xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
            {
                serializer.Serialize(xmlWriter, bets);
            }
        }
    }
}

public void LoadBets()
{
    try
    {
        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("Bets.xml", FileMode.Open))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(List<Bet>));
                List<Bet> data = (List<Bet>)serializer.Deserialize(stream);

                if(data.Count > 0)
                    foreach (Bet item in data)
                    {
                        if (item.Result == 0)
                            openBetList.Add(item);
                        else
                            closedBetList.Add(item);
                    }
            }
        }
    }
    catch
    {
        //add some code here
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:44:41.097

有什么例外？

我记得你需要一个没有参数的构造函数......

# java - JAVA：如何限制一个类在一个级别上扩展

> ID：10990390
> 
> 赞同：0
> 
> 时间：2012-06-12T04:03:34.337
> 
> 标签：java, design-patterns, inheritance

我的问题陈述如下：

我正在用 java 创建一个库，对于某些类，我希望用户应该能够扩展我的类，但仅在一个级别上，这些子类不应该可用于子类化。如果将他们的子类编程为最终的，则可以实现，但决定权将交给他们。我想从我的图书馆控制它。我怎样才能做到这一点 ？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T04:12:54.753

我想你可以用反射来实现这样的东西：

```
public abstract class ExtendOnce {
    public static class Subclass extends ExtendOnce {

    }

    public static class SubSubclass extends Subclass {

    }

    protected ExtendOnce() {
        if (!getClass().getSuperclass().equals(ExtendOnce.class)) {
            throw new RuntimeException(
                    "You extended this class more than once!");
        }
    }

    public static void main(String[] args) {
        System.out.println(new Subclass());
        System.out.println(new SubSubclass()); // throws exception
    }
} 
```

然而，你需要问自己的更重要的问题是*你真的需要这个限制吗？*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T04:14:13.550

您可以使用[Java 反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)并调用[getModifiers()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getModifiers%28%29)来检查该类是否为最终类。

您可能可以从您的超类构造函数中执行此操作。如果没有，您将不得不选择一些需要调用的方法。如果你检测到它不是最终的，你可以抛出一个异常，退出 JVM，或者你想做的任何其他事情来阻止它工作。

但是，我无法想象这样做的充分理由。作为您图书馆的用户，我会对这种任意限制感到恼火。

此外，您的库的用户总是可以将您的对象包装在他们自己的对象中，并通过组合而不是继承来扩展它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-12T04:29:55.640

这很简单。只需写下许可条款。

如果您的软件有用，那么您的要求是不寻常的，但不会破坏交易。例如，我宁愿接受你的要求，也不愿花钱。

如果您的软件没用，那么您的要求是不寻常的，但不会破坏交易。没人会在意。

# eclipse - 直接运行 Xtext 产品

> ID：10990391
> 
> 赞同：2
> 
> 时间：2012-06-12T04:03:40.427
> 
> 标签：eclipse, plugins, eclipse-rcp, xtext, xtend

我在 Xtext 上使用来创建我自己的语言。我的产品使用 Xtend 从我的语言生成 Java，我可以右键单击生成的 Java 文件来运行它。但是我想右击自己的语言文件直接运行，然后IDE会去生成的Java文件运行。为此，我创建了一个命令并为上下文菜单做出了贡献。接下来我应该怎么做才能使 IDE 转到 Java 文件并运行它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:43:42.067

见[http://www.eclipse.org/articles/Article-Java-launch/launching-java.html](http://www.eclipse.org/articles/Article-Java-launch/launching-java.html)

# commit - 如果我对在 Lucene 中先前提交时打开的 IndexWriter 执行 commit()，会发生什么？

> ID：10990401
> 
> 赞同：0
> 
> 时间：2012-06-12T04:05:55.927
> 
> 标签：commit, lucene

[当我浏览Mike McCandless](http://blog.mikemccandless.com/2012/03/transactional-lucene.html)的这篇精彩的博客时，它解释了 Lucene 的事务功能的强大功能以及我们可以保存旧提交并在之前的提交上打开索引编写器的功能。但我的脑海里立刻出现了这个场景。它是在内部为先前提交执行的新提交创建某种分支，还是只是替换该先前提交之后的所有较新提交并仅保留我刚刚在该先前提交上执行的最近提交？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:15:51.480

如果要强制提交，请调用 commit()，或者关闭编写器。**提交完成后，新打开的 IndexReader 实例将看到该提交时对索引的更改**。在此模式下运行时，请注意不要在进行优化或分段合并时刷新您的阅读器，因为这会占用大量磁盘空间。

无论 autoCommit 是什么，IndexReader 或 IndexSearcher 只会看到索引在它打开的“时间点”。阅读器打开后提交给索引的任何更改在重新打开阅读器之前都不可见。

```
void commit()
      Commits all pending changes (added & deleted documents, optimizations, segment merges, added indexes, etc.) to the index, and syncs all referenced index files, such that a reader will see the changes and the index updates will survive an OS or machine crash or power loss.

void commit(Map commitUserData)
      Commits all changes to the index, specifying a commitUserData Map (String -> String). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:31:43.993

事实上，它创建了一个分支：新提交将反映您打开的旧提交，以及您在索引会话期间所做的任何更改。未来提交（在您打开的提交之后）会发生什么取决于您的删除策略。如果它保存了这些提交，那么在任何时候你都可以自由地针对其中一个打开编写器，也可以从它们中创建一个分支。

# formula - 电子表格函数中的最后匹配日期

> ID：10990404
> 
> 赞同：-1
> 
> 时间：2012-06-12T04:06:37.620
> 
> 标签：formula, libreoffice-calc

我有一个电子表格，其中记录了有关个人的日期，以及其他数据，例如：

```
汤姆 | xyz | 2012 年 5 月 2 日  
迪克 | 富 | 2012 年 5 月 2 日  
汤姆 | 酒吧 | 2012 年 6 月 1 日
```

在另一张纸上有一行，我希望能够在其中输入名称，例如`Tom`，并通过公式在以下单元格中检索第一张纸中 LAST（按日期最近）条目的数据。所以第一张是日志，第二张显示最新的。在以下示例中，输入了第一个单元格，其余的是显示第一个工作表中数据的公式：

```
汤姆 | 酒吧 | 2012 年 6 月 1 日
```

依此类推，在日志中显示最新的日期条目。

我被难住了，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:46:17.670

如果您只需要进行一次查找，则可以通过在日志表中添加两个新列来实现：

表 1

```
 | A    | B   | C        | D | E | F
1 | Tom  | xyz | 6/2/2012 |   | * | *
2 | Dick | foo | 5/2/2012 |   | * | *
3 | Tom  | bar | 6/1/2012 |   | * | * 
```

表 2

```
 | A   | B          | C
1 | Tom | =Sheet1.E1 | =Sheet1.F1 
```

*(E1) =`=IF(AND($A1=Sheet2.$A$1;E2=0);B1;E2)`

（即把上面的公式粘贴到 中`E1`，然后用 复制/粘贴到其他单元格中`*`）

解释：如果 A 不是你要找的，那就找下一个；如果是，但有一个非空的下一个，去下一个；否则，得到它。这样，您将选择与您的搜索相对应的最后一个。我假设您想要最后一个条目，而不是“日期最近的条目”，因为这就是您在示例中所要求的。如果我对您的问题的解释有误，请更新它，我可以尝试提供更好的答案。

**更新：**如果日志日期可能出现问题，请按照以下方式获取最后一个条目：

*(F1) =`=IF(AND($A1=Sheet2.$A$1;C1>=F2);C1;F2)`

*(E1) =`=IF(C1=F1;B1;E2)`

在这里，我只是将测试`F2=0`（如果非空，则`C1>=F2`选择下一个）替换为（如果较新，则选择下一个），对于另一列，如果第一个测试也这样做，则选择下一个。

免责声明：我对电子表格非常缺乏经验，上面的解决方案很丑陋，但可以完成工作。例如，如果您希望 Sheet2 中的第 2 行进行另一次查找，则需要在 Sheet1 中再添加两列，等等。

# sencha-touch - GetCmp() 在煎茶中不起作用

> ID：10990409
> 
> 赞同：0
> 
> 时间：2012-06-12T04:08:01.837
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用`getCmp('componentid').hide();` 它不起作用。

```
if (flag_in == 1) {
    console.log('inside if of hide'); 
    Ext.getCmp('inboxQueueId').hide();                                    

    var el = btn.el;  
    Ext.getCmp('inbox_hide').setIconCls('show');                              
    flag_in = 0;
    Ext.getCmp('queueViewPanel').setWidth('100%');

} else {
      console.log('inside else of hide'); 
   Ext.getCmp('inboxQueueId').show();                               

  var element = btn.element;
  Ext.getCmp('inbox_hide').setIconCls('hide');

 flag_in = 1;
 Ext.getCmp('queueViewPanel').setWidth('70%');
 } 
```

如果但`Ext.getCmp('inboxQueueId').hide()`不起作用，它会进入内部。而且它没有给出错误。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:29:42.220

试试这个，

`Ext.getCmp('inboxQueueId').hide('slide', false)`

或者类似的东西，

`Ext.getCmp('inboxQueueId').hide(false)`

我希望这有帮助。:)

# ssis - SSIS：记录集或临时表

> ID：10990421
> 
> 赞同：2
> 
> 时间：2012-06-12T04:10:36.183
> 
> 标签：ssis, recordset

我有一个 SSIS 应用程序需要从不同服务器的 2 个数据库（不是链接）获取数据。我需要获取 2 个数据库之间的匹配名称和 DOB 记录，然后使用结果插入/更新表。我最初的方法是使用 OLE DB 源，然后使用 Merge Join 并将结果放入记录集。然后在控制流上，使用记录集的结果来插入/更新表。但是我在控制流中看不到记录集。替代解决方案是创建临时表。但是临时表是不可见的，因为它们驻留在每个服务器的 tempdb 数据库中。解决这个问题的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:25:50.240

你是什​​么意思`put the results to recordset`？

如果您使用连接连接数据流上的两个源，则连接上的“记录集”将仅在当前数据流期间可用。数据流完成后，您不能在控制流上使用它。

为什么不能只在目标数据库中插入结果集？您可以对同一数据流执行任何其他转换操作，并将结果插入目标数据库。

或者，如果你真的需要在插入数据之前做一些只能在控制流上完成的事情，你可以是的，使用 oleDBDestination 将记录集插入到目标上的临时表上，然后访问另一个数据流（不是非常好方法，不过）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:34:44.553

在这种情况下，我会为工作表保留一个数据库或为这些工作表创建一个模式。

接下来，添加一个 SQL 控制流任务来截断将保存中间结果的表。在此之后，将中间结果集加载到表中，执行操作并可选择再次截断表。

记录集目的地适用于较小的数据集。但是，如果您打算将它用于不适合内存的较大数据集，它将非常慢。

如果您没有可以用作工作区的数据库/模式，则可以使用 RAW 文件来保存中间结果。这些也非常快。

# css - 在 CSS 中更改颜色会更改布局尺寸

> ID：10990425
> 
> 赞同：1
> 
> 时间：2012-06-12T04:11:54.410
> 
> 标签：css, colors

我已将 phpBB 论坛样式中导航栏的颜色从默认的 #AA0000 更改为 #941212（我在 HTML 颜色代码工具中找到）。一旦我这样做了，页面上的所有内容都向左移动并出现了一个垂直滚动条。将颜色改回 #AA0000 可修复布局。为什么颜色会影响布局尺寸？

旧代码是

```
border-bottom: 7px solid #AA0000; 
```

新尝试的代码是

```
border-bottom: 7px solid #941212; 
```

我真的只是改变了6个字符。两种颜色都是红色的。我只在 Chrome（Windows 8 Consumer Preview）中进行了测试。唯一的想法是 941212 是非法颜色或超出 Chrome 的典型支持范围或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:19:06.623

颜色***永远不会***影响布局大小/尺寸。

其他事情正在发生。

使用适当的浏览器，例如 Chrome，您可以查看不正确呈现的元素的计算样式。

请参阅：[**Chrome 开发人员工具：元素样式**](https://developers.google.com/chrome-developer-tools/docs/elements-styles)。

# c# - 用于以 15 秒延迟播放视频的 wpf 应用程序

> ID：10990427
> 
> 赞同：5
> 
> 时间：2012-06-12T04:12:43.877
> 
> 标签：c#, wpf, video-streaming, expression, broadcasting

我有一个使用 Microsoft.expression.encoder 和 framework 4.0 广播视频的 WPF 应用程序，但是在广播时我有 15 秒的延迟。有什么建议可以减少广播时的延迟。

下面是代码

```
using Microsoft.Expression.Encoder.Live; 
using Microsoft.Expression.Encoder;

private void button1_Click(object sender, RoutedEventArgs e)
{ 
    try 
    { 
        EncoderDevice video = null; 
        EncoderDevice audio = null;
        GetSelectedVideoAndAudioDevices(out video, out audio);
        StopJob();

        if (video == null)
        {
            return;
        }

        StopJob();
        _job = new LiveJob();

        if (video != null && audio != null)
        {
            //StopJob();
            _deviceSource = null;
            _deviceSource = _job.AddDeviceSource(video, audio);
            _job.ActivateSource(_deviceSource);

            // Finds and applys a smooth streaming preset        
            //_job.ApplyPreset(LivePresets.VC1HighSpeedBroadband4x3);

            // Creates the publishing format for the job
            PullBroadcastPublishFormat format = new PullBroadcastPublishFormat();
            format.BroadcastPort = 9090;
            format.MaximumNumberOfConnections = 50;

            // Adds the publishing format to the job
            _job.PublishFormats.Add(format);

            // Starts encoding
            _job.StartEncoding();
        }
        //webCamCtrl.StartCapture();
    }
    catch (Exception ex)
    {
        WriteLogFile(this.GetType().Name, "button1_Click", ex.Message.ToString());
    }

} 
```

我正在使用 MediaElement 在我的服务器和客户端系统上显示网络摄像头。

在客户端

```
 try
            {

                theMainWindow.getServerIPAddress();
                IP = theMainWindow.machineIP;
                MediaElement1.Source = new Uri("http://" + IP + ":9090/");
            }
            catch (Exception ex)
            {
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:21:24.293

不幸的是，没有解决方案（至少截至 2011 年 1 月）。据微软称：

“我们在编码过程中添加了几秒钟的延迟，然后在服务器级别进行缓存，可以再增加 5-20 秒，最后 Silverlight 还会缓存几秒钟的延迟。”

[http://social.expression.microsoft.com/Forums/is/encoder/thread/898b2659-c0d5-4c84-8fba-225f58806f5d](http://social.expression.microsoft.com/Forums/is/encoder/thread/898b2659-c0d5-4c84-8fba-225f58806f5d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T18:03:22.557

`PreviewWindow`您可以通过使用 a而不是 a来消除客户端中的一些延迟，从而`MediaElement`绕过在客户端中显示流之前对其进行编码的需要。`PreviewWindow`是一个 WinForms 控件，所以这只适用于 WPF。

在 XAML 中：

```
<WindowsFormsHost>
    <wf:Panel x:Name="PreviewPanel" />
</WindowsFormsHost> 
```

后面的代码：

```
var previewWindow = new PreviewWindow(new HandleRef(this.PreviewPanel, this.PreviewPanel.Handle));
_deviceSource.PreviewWindow = previewWindow;
// ..
_job.ActivateSource(_deviceSource); 
```

# php - Magento - 侧边栏中的类别

> ID：10990428
> 
> 赞同：1
> 
> 时间：2012-06-12T04:12:53.270
> 
> 标签：php, html, magento, xhtml

制作了自己的骨架模板。我想将类别列表从标题移动到名为“left_container”的 div。我怎样才能做到这一点？我正在使用 Magento 1.7。

这种问题已经被问过好几次了，但似乎每次 Magento 更新，实现这一点的旧方法都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:33:48.083

您需要创建一个针对所有类别的自定义菜单侧边栏，您可以下载下一个扩展程序以查看所有类别的示例。这个扩展有一个递归方法来获取所有子结构：

```
http://www.magentocommerce.com/magento-connect/vertical-navigation-with-css-classes.html 
```

我使用这个扩展来制作按自定义属性排序的自定义导航顶部，对我非常有用，希望对你有所帮助。

在扩展中帮助我的代码是下一个：

```
 public function drawOpenCategoryItem($category, $level=0, array $levelClass=null)
{
    $html = array();

    if ($this->_checkLoginCatalog()) return '';
    if (! $category->getIsActive()) return '';

    if (! isset($levelClass)) $levelClass = array();
    $combineClasses = array();

    $combineClasses[] = 'level' . $level;
    if ($this->_isCurrentCategory($category))
    {
        $combineClasses[] = 'active';
    }
    else
    {
        $combineClasses[] = $this->isCategoryActive($category) ? 'parent' : 'inactive';
    }
    $levelClass[] = implode('-', $combineClasses);

    $levelClass = array_merge($levelClass, $combineClasses);

    $levelClass[] =  $this->_getClassNameFromCategoryName($category);

    $productCount = '';
    if ($this->displayProductCount())
    {
        $n = $this->_getProductCount($category);
        $productCount = '<span class="product-count"> (' . $n . ')</span>';
    }

    // indent HTML!
    $html[1] = str_pad ( "", (($level * 2 ) + 4), " " ).'<span class="vertnav-cat"><a href="'.$this->getCategoryUrl($category).'"><span>'.$this->htmlEscape($category->getName()).'</span></a>'.$productCount."</span>\n";

    $autoMaxDepth = Mage::getStoreConfig('catalog/vertnav/expand_all_max_depth');
    $autoExpand = Mage::getStoreConfig('catalog/vertnav/expand_all');

    if (in_array($category->getId(), $this->getCurrentCategoryPath())
        || ($autoExpand && $autoMaxDepth == 0)
        || ($autoExpand && $autoMaxDepth > $level+1)
    ) {
        $children = $this->_getCategoryCollection()
            ->addIdFilter($category->getChildren());

        $children = $this->toLinearArray($children);

        //usort($children, array($this, '_sortCategoryArrayByName'));

        $hasChildren = $children && ($childrenCount = count($children));
        if ($hasChildren)
        {
            $children = $this->toLinearArray($children);
            $htmlChildren = '';

            foreach ($children as $i => $child)
            {
                $class = array();
                if ($childrenCount == 1)
                {
                    $class[] = 'only';
                }
                else
                {
                    if (! $i) $class[] = 'first';
                    if ($i == $childrenCount-1) $class[] = 'last';
                }
                if (isset($children[$i+1]) && $this->isCategoryActive($children[$i+1])) $class[] = 'prev';
                if (isset($children[$i-1]) && $this->isCategoryActive($children[$i-1])) $class[] = 'next';
                $htmlChildren.= $this->drawOpenCategoryItem($child, $level+1, $class);
            }

            if (!empty($htmlChildren))
            {
                $levelClass[] = 'open';

                // indent HTML!
                $html[2] = str_pad ( "", ($level * 2 ) + 2, " " ).'<ul>'."\n"
                        .$htmlChildren."\n".
                        str_pad ( "", ($level * 2 ) + 2, " " ).'</ul>';
            }
        }
    }

    // indent HTML!
    $html[0] = str_pad ( "", ($level * 2 ) + 2, " " ).sprintf('<li class="%s">', implode(" ", $levelClass))."\n";

    // indent HTML!
    $html[3] = "\n".str_pad ( "", ($level * 2 ) + 2, " " ).'</li>'."\n";

    ksort($html);
    return implode('', $html);
} 
```

# paypal - 使用 java 的 Paypal 移动快速结帐

> ID：10990432
> 
> 赞同：0
> 
> 时间：2012-06-12T04:13:17.833
> 
> 标签：paypal

我开发了一个需要与 paypal 集成的移动应用程序，我的后端服务器是 RESTfull java 服务器。因此，为了与贝宝集成，我从客户端获取“deviceReferenceTokenWithAppId”调用后端服务器上的 servlet 以及其他详细信息（cartId..etc），当请求到达 servlet 时，我执行一些后端操作并调用贝宝获取移动支付所需的特定“SetExpressCheckout”令牌。

```
StringBuilder postData = new StringBuilder();
        postData.append(USER).append("=").append(Constants.PAYPAL_MERCHANT_USER);
        postData.append("&").append(PASSWORD).append("=").append(Constants.PAYPAL_MERCHANT_PASSWORD);
        postData.append("&").append(SIGNATURE).append("=").append(Constants.PAYPAL_MERCHANT_SIGNATURE);
        postData.append("&").append(METHOD).append("=").append("SetExpressCheckout");
        postData.append("&").append(VERSION).append("=").append("88");
        postData.append("&").append(AMOUNT).append("=").append(amount.toString());
        postData.append("&").append(CANCEL_URL).append("=").append(Constants.PAYPAL_MERCHANT_CANCEL_URL);
        postData.append("&").append(RETURN_URL).append("=").append(Constants.PAYPAL_MERCHANT_RETURN_URL);
        byte[] postDataArr = postData.toString().getBytes(UTF-8);
        // Hit the the URL.

        URL url = new URL("https://api-3t.sandbox.paypal.com/nvp");
        HttpsURLConnection.setDefaultHostnameVerifier(new CustomizedHostnameVerifier());
        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setDoOutput(true);
        conn.setDoInput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
        conn.setRequestProperty("Content-Length", Integer.toString(postDataArr.length));

        DataOutputStream output = new DataOutputStream( conn.getOutputStream());
        output.write( postDataArr );
        output.flush();
        output.close ();

        rc = conn.getResponseCode(); 
```

我的问题是，如果我调用 paypal nvp，我没有得到有效的令牌作为响应，而是出现以下错误，

```
Key - TIMESTAMP - value : 2012-06-11T18:16:02Z
 Key - CORRELATIONID - value : 207108cab758a
 Key - ACK - value : Failure
 Key - VERSION - value : 88
 Key - BUILD - value : 2975009
 Key - L_ERRORCODE0 - value : 10002
 Key - L_SHORTMESSAGE0 - value : Security error
 Key - L_LONGMESSAGE0 - value : Security header is not valid
 Key - L_SEVERITYCODE0 - value : Error 
```

有人能告诉我为什么我会收到这个错误吗？我在这里错过了什么吗？

如果我能成功获得 TOKEN，接下来我必须将我的 servlet 响应重定向到以下 Url，以将移动结帐视图获取到移动应用程序。

```
https://www.sandbox.paypal.com/webscr?cmd=_express-checkout-mobile&drt="+<deviceReferenceTokenWithAppId>+"&token="+<TOKEN from payal nvp> 
```

如果我在这里做错了，是否有人可以指导我走正确的道路..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:32:30.447

这意味着您的 API 凭据对于您正在访问的端点不正确。
尝试用“密码”替换“密码”；身份验证是通过 PayPal 的“用户”、“密码”和“签名”完成的。

# string - Bash，连接 2 个字符串以引用第三个变量

> ID：10990436
> 
> 赞同：20
> 
> 时间：2012-06-12T04:14:08.247
> 
> 标签：string, bash, variables, concatenation

我有一个 bash 脚本，我在连接 2 个变量以调用 3rd 时遇到了一些问题。

这是脚本的简化，但在阅读文档后语法让我难以理解。

```
server_list_all="server1 server2 server3";
var1 = "server";
var2 = "all";

echo $(($var1_list_$var2)); 
```

这与我得到正确答案的时间差不多，它确认字符串并在标记化时抛出错误。

```
syntax error in expression (error token is "server1 server2 server3.... 
```

在文档中没有真正看到任何内容，但它应该是可行的。

编辑：清理了一下

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-12T04:22:46.180

[Bash 参考手册解释了如何使用参数扩展的简洁功能](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)来进行一些间接操作。在您的情况下，您有兴趣查找名称由其他两个变量定义的变量的内容：

```
server_list_all="server1 server2 server3"
var1=server
var2=all
combined=${var1}_list_${var2}

echo ${!combined} 
```

引用时的感叹号`combined`表示“使用名称由内容定义的变量`combined`”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T04:35:00.217

高级 Bash 脚本指南为您提供了答案 (http://tldp.org/LDP/abs/html/ivr.html)。您有两个选择，第一个是经典 shell：

```
 #!/bin/bash

 server_list_all="server1 server2 server3";
 var1="server";
 var2="all";

 server_var="${var1}_list_${var2}"
 eval servers=\$$server_var;

 echo $servers 
```

或者，您可以使用 bash 快捷方式 ${!var}

```
 #!/bin/bash

 server_list_all="server1 server2 server3";
 var1="server";
 var2="all";

 server_var="${var1}_list_${var2}"
 echo ${!server_var} 
```

任何一种方法都有效。

# html - HTML5 CSS3 和 IFRAME？

> ID：10990437
> 
> 赞同：3
> 
> 时间：2012-06-12T04:14:10.027
> 
> 标签：html, css, seo

我正在尝试删除 iframe 滚动条和框架边框。我**不能**使用`frameborder=0`，`scrolling=no`因为 HTML5 不再支持它们。该`seamless`属性会抛出一个警告，说明它尚未根据 W3C Validator 实现。我在网上找到了一个页面，据说可以`overflow:hidden`用来删除滚动条，但它并没有删除滚动条，至少在我的谷歌浏览器中是这样。我没有检查其他浏览器。而且 frameborder 仍然存在，即使我使用了`border:none`. 我还尝试使用 css 设置 iframe 的宽度和高度，但它不想听。这是我当前的代码：

```
#vidframe
{
    width: 577px;
    height: 358px;
    overflow: hidden;
    border: none;
}

<iframe name="videoframe" id="vidframe" src="video1.html"></iframe> 
```

是的，我可以轻松地将 width=xxx height=xxx 添加到 iframe 标记中，但我的理解是，使用 HTML5 的目标是尽可能多地将编码转换为 CSS ......所以我不应该能够设置样式表中的 iframe 宽度和高度？再次，溢出隐藏没有删除滚动条......和边框：没有没有删除边框......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T04:57:57.603

解决方案是在正在加载到 iframe 的文件的 css 中添加溢出：隐藏。如果文档不是您可以控制其源代码的东西，则使用 javascript 将溢出隐藏属性附加到它的正文。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T05:42:50.097

使用 javascript 删除 iframe 边框和滚动条，请参阅以下链接...

[如何使用javascript从IE中的iframe中删除边框](https://stackoverflow.com/questions/1516803/how-to-remove-border-from-iframe-in-ie-using-javascript)

# sql-server-2008 - 如何授予运行 BULK INSERT 的权限？

> ID：10990439
> 
> 赞同：1
> 
> 时间：2012-06-12T04:14:32.803
> 
> 标签：sql-server-2008, windows-server-2008

我有一个在远程机器上运行的 SQL Server 2008。假设这台机器被称为 XYZ。以下作品：

1.  远程桌面进入XYZ
2.  打开 SSMS，然后连接到在 XYZ 上运行的 SQL Server
3.  运行以下命令：

    ```
    USE SampleDB
    GO

    CREATE TABLE [dbo].[SampleData](
        [ColA] [varchar](50) NULL,
        [ColB] [varchar](500) NULL
    ) ON [PRIMARY]

    GO

    BULK INSERT [dbo].[SampleData]
    FROM "H:\Scratch\OUTPUT_Sample"
    WITH
    (
        FIELDTERMINATOR = '$',
        ROWTERMINATOR = '\n',
        FIRSTROW = 2
    )
    GO 
    ```

这运行得很好。现在，我通过执行以下操作连接到另一个 SQL Server ABC：

1.  远程桌面进入XYZ
2.  打开 SSMS，然后连接到在 ABC 上运行的 SQL Server
3.  运行上面的脚本

我收到以下错误：

```
Msg 4861, Level 16, State 1, Line 2
Cannot bulk load because the file "H:\Scratch\OUTPUT_Scratch" could not be opened. Operating system error code 3(The system cannot find the path specified.). 
```

有人能告诉我如何解决这个问题吗？我想我需要为某个帐户授予一些权限，但不确定如何找出这一点，也不知道授予该帐户什么权限。当我使用时，我也会遇到同样的错误`sqlcmd.exe`。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T04:46:31.130

看起来我[在这里](https://stackoverflow.com/questions/2850205/cannot-bulk-load-the-file-c-data-txt-does-not-exist)找到了答案。总之，看起来该文件应该与 SQL Server 位于同一台机器上才能正常工作。为了让它查找本地文件，它应该通过 UNC 共享或类似的方式来完成。

# javascript - 从 webkit-speech 字段中获取振幅

> ID：10990441
> 
> 赞同：1
> 
> 时间：2012-06-12T04:14:49.673
> 
> 标签：javascript, html, google-chrome, webkit, speech-recognition

我正在使用带有 x-webkit-speech 的输入字段进行语音输入/语音识别。有什么方法可以提取输入的幅度。如果没有，是否有其他方法可以获得幅度。我主要需要幅度来可视化输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:48:27.313

> 有什么方法可以提取输入的幅度。

不

> 如果没有，是否有其他方法可以获得幅度。

使用闪光灯

> 我主要需要幅度来可视化输入。

目前不是一个好主意

# r - R中的嵌套for循环-最终结果的问题

> ID：10990443
> 
> 赞同：2
> 
> 时间：2012-06-12T04:15:11.363
> 
> 标签：r, loops, for-loop, nested

当仅知道分布的矩时，我正在解决重建（或恢复）概率分布函数的问题。我已经用 R 编写了代码，虽然逻辑对我来说似乎是正确的，但我没有得到我想要的输出。

我试图用作近似（或重建或恢复）CDF 的方程就是您在下图中看到的。我正在为等式的右侧编写代码，并将其等同于我在代码中称为 F 的向量。

可以在此处找到包含原始方程式的论文链接。

*   [http://www.sciencedirect.com/science/article/pii/S0167715208000187](http://www.sciencedirect.com/science/article/pii/S0167715208000187)

它在论文中被标记为等式（2）。

这是我写的代码：

```
#R Codes:  
alpha <- 50
T <- 1
x <- seq(0, T, by = 0.1)

# Original CDF equation
Ft <- (1-log(x^3))*(x^3)  
plot(x, Ft, type = "l", ylab = "", xlab = "")

# Approximated CDF equation using Moment type reconstruction
k<- floor(alpha*y/T)  
for(i in 1:length(k))  
{
for(j in k[i]:alpha)  
{  
F[x+1] <- (factorial(alpha)/(factorial(alpha-j)*factorial(j-k)*factorial(k)))*(((-1)^(j-k))/(T^j))*((9/(j+3))^2)
}
}
plot(x[1:7], F, type = "l", ylab = "", xlab = "") 
```

任何帮助都会在这里受到赞赏，因为使用我的代码获得的近似值和图形与原始曲线大不相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:32:59.390

很明显，您的问题出在此处。

```
F[x+1] <- (factorial(alpha)/(factorial(alpha-j)*factorial(j-k)*factorial(k)))*(((-1)^(j-k))/(T^j))*((9/(j+3))^2) 
```

您正试图在 x 中获得不同的东西，是吗？那么，如果这个等式的右手边在 x 中没有任何变化，而左手边有一个使用非整数索引的赋值，你怎么能得到呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:31:50.787

```
 alpha <- 30  #In the exemple you try to reproduce, they use an alpha of 30 if i understood correctly (i'm a paleontologist not a mathematician so this paper's way beyond my area of expertise :) )

    tau <- 1  #tau is your T (i changed it to avoid confusion with TRUE)
    x <- seq(0, tau, by = 0.001)
    f<-rep(0,length(x))  #This is your F (same reason as above for the change). 
    #It has to be created as a vector of 0 before your loop since the whole idea of the loop is that you want to proceed by incrementation.

    #You want a value of f for each of your element of x so here is your first loop:
    for(i in 1:length(x)){

    #Then you want the sum for all k going from 1 to alpha*x[i]/tau:
        for(k in 1:floor(alpha*x[i]/tau)){

    #And inside that sum, the sum for all j going from k to alpha:
            for(j in k:alpha){

    #This sum needs to be incremented (hence f[i] on both side)
                f[i]<-f[i]+(factorial(alpha)/(factorial(alpha-j)*factorial(j-k)*factorial(k)))*(((-1)^(j-k))/(tau^j))*(9/(j+3)^2)
                }
            }
        }

    plot(x, f, type = "l", ylab = "", xlab = "") 
```

# android - Android：ViewPager 中的空指针

> ID：10990447
> 
> 赞同：0
> 
> 时间：2012-06-12T04:15:28.563
> 
> 标签：android, android-viewpager

我正在制作一个使用 ViewPAger 的应用程序，并且我的代码在 S2 和 NOTE 上运行良好，但我检查了 Y，它在 viewPagerAdapter 上给出了异常。我的代码如下：

```
static PagerAdapter mPagerAdapter;
static ViewPager  mViewPager;
 static ViewPagerIndicator mIndicator;
 static String addposition;
public Context _context=this;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create our custom adapter to supply pages to the viewpager.
  mPagerAdapter = new PagerAdapter(getSupportFragmentManager());

    mViewPager = (ViewPager)findViewById(R.id.pager);

    mViewPager.setAdapter(mPagerAdapter); // **Null Pointer Exception** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:34:55.403

你不能写`public Context _context=this;`在全局。您应该在 onCreate() 中初始化内容。

**编辑**

实际上我没有看到你没有使用上下文。我认为 ViewPager 存在问题。可能是你得到了 ViewPager 的空对象。如果您显示您的 xml，那么我们可以提供更好的解决方案

# php - 无法打开流：HTTP 请求失败

> ID：10990449
> 
> 赞同：0
> 
> 时间：2012-06-12T04:15:33.560
> 
> 标签：php, mysql, curl

我的 URL 有问题，它在 2-3 小时之前工作正常，现在停止工作，当我在另一台服务器上使用它时，它似乎在停止工作时再次工作我尝试 curl 没有机会失败，让我知道还有其他方法可以得到它

这是错误

```
Warning: file_get_contents(http://#.#.#/?id=100) [function.file-get-contents]: failed to open stream: HTTP request failed! in 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:23:39.763

可能是您需要设置标题，某些网站不允许您在没有它们的情况下查看它们，试试这个：

```
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
              "Cookie: foo=bar\r\n" .
              "User-Agent:Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)\r\n"
  )
);

$context = stream_context_create($opts);

$html = file_get_contents($url, false, $context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:09:28.387

检查他们是否阻止了您的 IP 地址。

# html - 页脚网格与正文网格对齐

> ID：10990452
> 
> 赞同：-1
> 
> 时间：2012-06-12T04:15:48.057
> 
> 标签：html, css

我有网站[http://change.is/](http://change.is/)我必须将页脚网格与正文网格对齐。

在页脚中，我使用了 4 个不同颜色的 div：- 第一个和第四个与主体网格完美对齐，但问题在于 2 和 3 个 div。

我更改了 2 和 3 div 的背景图像位置，使其与浏览器 100% 缩放级别的主体网格对齐，但是当我们放大和缩小时，2 和 3 div 没有与主体网格保持对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:43:11.407

在较窄的宽度上，您将`background-attachment`属性从切换`fixed`到`scroll`：

在`styles_desktop.css`：

```
.lessons { background:url("../images/f2.png") repeat fixed -80px -39px transparent; 
```

在`styles_tablet.css`：

```
.lessons { background:url("../images/f3.png") repeat scroll 0 0 transparent; 
```

更改`scroll`为`fixed`平板电脑规则，它应该可以工作。

漂亮的网站顺便说一句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:24:06.660

定义**background-attachment:fixed**到它们。像这样写：

```
.lessons {
    background: url("../images/f2.png") repeat fixed -80px -12px transparent;
}
.mentors {
    background: url("../images/f3.png") repeat fixed -80px -12px transparent;
} 
```

# mysql - jQuery 加载 MySQL 获取数组

> ID：10990455
> 
> 赞同：0
> 
> 时间：2012-06-12T04:16:30.203
> 
> 标签：mysql, ajax

我是 jQuery 领域的初学者，我有这样的简单问题：

我想在数组中加载（AJAX）MySQL结果，比如说：

```
$row[0] = first name
$row[1] = last name
$row[2] = phone number 
```

我对 PHP 部分没有任何问题，但是我很难在不同的 id 上显示每个数组内容。因为我发现的语法会加载 PHP 处理的所有内容：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#mysql-result').load('ajax.php');
});
</script> 
```

如何从 PHP 中获取“名字”、“姓氏”和“电话号码”，只需一次加载，我仍然可以将结果放在不同的 . 谢谢你。

**更新**

我给你一个关于我需要什么的真实例子。这是我的名为 ajax.html 的 HTML 文件：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Ajax Trial</title>
</head>

<body>
<div id = "fistname"><!-- ajax result goes here --></div> 
<div id = "lastname"><!-- ajax result goes here --></div>
<div id = "phonenumber"><!-- ajax result goes here --></div>
</body>
</html> 
```

这是我的 PHP 文件，名为 ajax.php ：

```
<?php
require_once 'config-min.php';
$con = mysql_connect($DbServer,$DbUser,$DbPassword);
mysql_select_db($DbName, $con);

$result = mysql_query("SELECT FirstName, LastName, PhoneNumber FROM User WHERE ID = '201' LIMIT 1");
$row = mysql_fetch_array($result);

echo $row[0];
echo $row[1];
echo $row[2];

mysql_close($con);
?> 
```

现在，我的问题还是一样...如何获得这个 PHP 结果（3 个回显），加载一次，然后显示在这 3 个不同的 div 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:24:48.483

您是否尝试过添加到您的 php 代码中：

回声 $firstname。'.$姓氏。' '.$电话号码;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:55:12.577

我也想做你想做的事情。我做了下面的代码，它工作。希望这对你也有帮助。

```
 <script type="text/javascript" src="/jquery.js"></script>
<script>
   $(document).ready(function(){
 $("#form_plat").submit(function(e){

    var str = $(this).serialize();
    row[0]=$('#First_name').val();
    row[1]=$('#last_name').val();
    row[2]=$('#phonenumber').val();

    $.ajax({
            type: "POST",
            url : 'Insert_Into.pl', //if you wish to store in database
            data : {'firstname_name':row[0],'last_name': row[1],'phonenumber':row[2]},
            beforeSend: function() {

                console.log("hey i am here");                   
            },
            success: function(){
                     $('#note').html('Thank you for your submission!');
                     $('#note').hide();                     
                     $("#fields").fadeOut('slow');
            }
         });

    return false;

  });

 });

 </script>); 
```

# actionscript-3 - AS3的attachAudio降低音量？

> ID：10990456
> 
> 赞同：1
> 
> 时间：2012-06-12T04:16:33.480
> 
> 标签：actionscript-3

我在使用“attachAudio”时遇到问题，每当我将麦克风连接到 netstream 时，我正在使用的过程（在音量混合器中）的音频都会下降。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:31:51.280

没有把握。但也许您的意思是这个 Windows 7 设置会降低其他应用程序的声音。

![声音设置](../Images/2677f04bf7965b6829eb0885b1f2bde0.png)

[http://www.mydigitallife.info/adjust-volume-level-when-place-or-receive-telephone-calls-in-windows-7/](http://www.mydigitallife.info/adjust-volume-level-when-place-or-receive-telephone-calls-in-windows-7/)

# html - 如何在表格单元格内垂直对齐 div？

> ID：10990457
> 
> 赞同：33
> 
> 时间：2012-06-12T04:16:34.790
> 
> 标签：html, css, html-table, vertical-alignment

如何将表格单元格内的 div 垂直居中？

HTML：

```
<tr class="rowClass">
    <td class="cellClass">
        <div class="divClass">Stuff</div>
    </td>
</tr> 
```

CSS：

```
.rowClass {
    vertical-align:middle !important;
    height:90px;
}

.cellClass {
    vertical-align:middle !important;
    height:90px;
}

.divClass {
    vertical-align:middle !important;
    height:90px;
} 
```

我知道类定义是多余的，但我一直在尝试很多不同的东西。为什么解决方案（无论是什么）不直观。我尝试过的“明显”解决方案都不起作用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T04:30:46.173

无需`height`在**.divClass**中定义。像这样写：

```
.cellClass {
    vertical-align:middle;
    height:90px;
    border:1px solid red;
} 
```

检查这个[http://jsfiddle.net/ncrKH/](http://jsfiddle.net/ncrKH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:19:35.717

`.divClass { margin-top:auto; }`

**HTML**

```
<table border=1>
<tr class="rowClass">
<td class="cellClass">
    <div class="divClass">Stuff</div>
</td>
</tr>
</table> 
```

**CSS**

```
.rowClass {
vertical-align:middle !important;
height:90px;
}

.cellClass {
vertical-align:middle !important;
height:90px;
}

.divClass {
margin-top:auto; 
 }​ 
```

[Live Example](http://jsfiddle.net/P3QVT/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T05:12:41.003

如果没有任何 css 本身，您可以通过`valign="middle"`尝试此代码来做到这一点。

```
<table width="100%" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <th height="550" align="center" valign="middle" scope="col">

    <div>Hello</div>
    </th>
  </tr>
</table> 
```

# android - 当 TabActivity 处于弃用状态时我该怎么办？

> ID：10990464
> 
> 赞同：2
> 
> 时间：2012-06-12T04:18:09.687
> 
> 标签：android, tabs, deprecated

我尝试使用选项卡活动创建一个项目。但问题是当我声明选项卡活动不起作用时。当我将鼠标放在它上面时，它会显示此文档

`This class is deprecated. New applications should use Fragments instead of this class; to continue to run on older devices, you can use the v4 support library which provides a version of the Fragment API that is compatible down to DONUT..... bla.....bla....bla`.

我认为我的填充不正确，所以我修复了 xml。但它仍然相同。这是我的 Tab xml。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout>
</TabHost> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T04:22:37.410

在软件开发领域，“弃用”是指正在被更新的功能或元素替换的功能或元素，因此您可以使用[**FragmentTabs**](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)来代替 TabActivity 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T04:25:51.143

我认为您正在为您的应用程序实现 TabGroupActivity 实现，其中 setCONtent 选项卡到活动组，Android Api 已弃用 ActivityGroup，因此根据建议您应该使用 Fragments 而不是 TabGroup。查看示例：

[http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)

[http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

# sql-server - 用 CASE 插入语句以避免重复行插入

> ID：10990467
> 
> 赞同：0
> 
> 时间：2012-06-12T04:19:03.383
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我已经编写了以下存储过程，用于在将行插入表之前检查重复项。

但我不能`INSERT`在`CASE`.

我怎样才能编写存储过程来检查它的值`@Ordername`，如果它不存在，那么它应该被插入到数据库中。

```
 CREATE PROCEDURE [Test Procedure ]
          (
          @section varchar(70), 
          @mark varchar(70),
          @qty decimal(18,2),
          @Weight decimal(18,2),
          @dateupdateremark int,
          @OrderName varchar(70)
           )
          AS
       BEGIN
   SET NOCOUNT ON;

       select case(@OrderName)
       when (select OrderName from dbo.tbl_insertxmldetails 
       where(@OrderName) not in (select OrderName from tbl_insertxmldetails))

       then 
       insert into dbo.tbl_insertxmldetails 
       (Section, Mark, QTY,Weight,Dateupdateremark ,OrderName,SystemDate)
       values
       (@Section, @Mark, @QTY,@Weight, @Dateupdateremark,@OrderName,GETDATE())
       else 'File already Exists'
 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:24:51.977

使用 If not exists 子句代替 case 语句来解决您的问题

```
CREATE PROCEDURE [Test Procedure ]
          (
          @section varchar(70), 
          @mark varchar(70),
          @qty decimal(18,2),
          @Weight decimal(18,2),
          @dateupdateremark int,
          @OrderName varchar(70)
           )
          AS
       BEGIN
   SET NOCOUNT ON;

      if not exists (select OrderName from dbo.tbl_insertxmldetails 
       where(@OrderName) not in (select OrderName from tbl_insertxmldetails))

      Begin

         insert into dbo.tbl_insertxmldetails 
         (Section, Mark, QTY,Weight,Dateupdateremark ,OrderName,SystemDate)
         values
         (@Section, @Mark, @QTY,@Weight, @Dateupdateremark,@OrderName,GETDATE())

      End

       else
           Select 'File already Exists' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T04:36:15.480

不用用`NOT IN`，这样就可以了

```
 IF NOT EXISTS(select OrderName from dbo.tbl_insertxmldetails Where OrderName=@OrderName)
 BEGIN

   insert into dbo.tbl_insertxmldetails 
   (Section, Mark, QTY,Weight,Dateupdateremark ,OrderName,SystemDate)
   values
   (@Section, @Mark, @QTY,@Weight, @Dateupdateremark,@OrderName,GETDATE())
END
   ELSE
     'File already Exists' 
```

# symfony - 自动更新模型中的 created_by

> ID：10990469
> 
> 赞同：1
> 
> 时间：2012-06-12T04:19:09.617
> 
> 标签：symfony, doctrine-orm, fosuserbundle

我想为我的模型创建一个 created_by 字段，比如 Product，它会自动更新，我正在使用 FOSUserBundle 和 Doctrine2。将用户 ID 输入产​​品的推荐方式是什么？

我可以在 Product 模型中执行此操作吗？我不知道该怎么做，任何帮助都会很棒。谢谢！

我想在模型中做这样的事情，但我不知道如何获取用户 ID。

```
 /**
     * Set updatedBy
     *
     * @ORM\PrePersist
     * @ORM\PreUpdate
     * @param integer $updatedBy
     */
    public function setUpdatedBy($updatedBy=null)
    {
        if (is_null($updatedBy)) {
            $updatedBy = $user->id;
        }
        $this->updatedBy = $updatedBy;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:47:54.933

要将用户与您想要关联两个实体的产品相关联：http: [//symfony.com/doc/current/book/doctrine.html#entity-relationships-associations](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)

```
/**
 * @ORM\ManyToOne(targetEntity="User", inversedBy="products")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 * You may need to use the full namespace above instead of just User if the
 * User entity is not in the same bundle e.g FOS\UserBundle\Entity\User
 * the example is just a guess of the top of my head for the fos namespace though
 */
protected $user; 
```

对于自动更新字段，您可能在生命周期回调之后：http: [//symfony.com/doc/current/book/doctrine.html#lifecycle-callbacks](http://symfony.com/doc/current/book/doctrine.html#lifecycle-callbacks)

```
/**
 * @ORM\Entity()
 * @ORM\HasLifecycleCallbacks()
 */
class Product
{
    /**
     * @ORM\PreUpdate
     */
    public function setCreatedValue()
    {
        $this->created = new \DateTime();
    }
} 
```

## 编辑

这个讨论讨论了在实体中获取容器，在这种情况下，如果您打算将当前用户与他们编辑的产品相关联，您可以获取 security.context 并从中找到用户 ID： [https://groups.google。 com/forum/?fromgroups#!topic/symfony2/6scSB0Kgds0](https://groups.google.com/forum/?fromgroups#!topic/symfony2/6scSB0Kgds0)

```
//once you have the container you can get the session
$user= $this->container->get('security.context')->getToken()->getUser();
$updated_at = $user->getId(); 
```

也许这就是您所追求的，但不确定将容器放在实体中是否是一个好主意，您能否在产品控制器的更新操作中将用户设置在产品上：

```
public function updateAction(){
   //....
   $user= $this->get('security.context')->getToken()->getUser();
   $product->setUser($user)
} 
```

# jquery - Page transition scripts

> ID：10990470
> 
> 赞同：1
> 
> 时间：2012-06-12T04:19:22.043
> 
> 标签：jquery, html

We are going to build a simple few pages html link. We want to have a page transition effect e.g fly in, fade etc on opening the clicked link. Is there any good sample codes to follow?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:23:31.370

尝试这些链接，全部使用 jquery -

[链接 1](http://devsnippets.com/article/10-transition-effects-the-art-of-showinghiding-content.html)

[链接 2](http://www.noupe.com/jquery/50-amazing-jquery-examples-part1.html)

[链接 3](http://www.1stwebdesigner.com/freebies/advanced-jquery-effects/)

**新编辑**——

对于您请求的链接 ( [http://www.melissahie.com/](http://www.melissahie.com/) )，使用 MOTOOLS 进行过渡效果。检查此 david walsh 链接以更好地理解它，因为它还包含一个示例[http://davidwalsh.name/dw-content/fx.explode.php](http://davidwalsh.name/dw-content/fx.explode.php)。

对于页面幻灯片效果，您也可以查看此链接[http://srobbin.com/jquery-plugins/pageslide/](http://srobbin.com/jquery-plugins/pageslide/)

让我知道您是否仍然缺少某些东西:)

**最新编辑-**

对于对角线效果，请检查此链接——

[http://www.queness.com/post/356/create-a-vertical-horizo​​ntal-and-diagonal-sliding-content-website-with-jquery](http://www.queness.com/post/356/create-a-vertical-horizontal-and-diagonal-sliding-content-website-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:22:58.810

这些家伙有一些很棒的代码来进行页面转换：[http ://tympanus.net/codrops/](http://tympanus.net/codrops/)

例如：[http ://tympanus.net/Tutorials/FullscreenSlitSlider/](http://tympanus.net/Tutorials/FullscreenSlitSlider/)

# mysql - 我可以在mysql中添加用于排序的特殊列吗？

> ID：10990480
> 
> 赞同：1
> 
> 时间：2012-06-12T04:20:17.533
> 
> 标签：mysql, sorting

我的“内容”表有大约 10,000,000 行。

我使用列“register_date”在内容列表中进行排序。但现在我想将“register_date”列用于另一个目的。所以，我即将添加新列，如“seq (bigint)”进行排序。并将索引添加到 seq 列。

如果添加了新行，“seq”将填充最大 seq 值。如果较旧的行需要出现在列表的头部，则将 'seq' 值更改为新的 max seq 值。

在这种情况下，计算 max seq 值、插入、更新成本高吗？不知道哪种方式好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:26:21.603

如果`seq`未搜索建议的值（例如在`WHERE`子句中），则根本不对其进行索引。索引未搜索但经常更新的内容会导致性能降低。

只要大多数检索结果是表的一小部分，`SORT BY seq`就可以有效地管理排序而无需索引。最大的问题是：在什么时候将其编入索引才有意义？为了回答这个问题，一些基准测试是必要的。

# jquery - 如何通过jquery从html编辑.css文件

> ID：10990481
> 
> 赞同：2
> 
> 时间：2012-06-12T04:20:30.923
> 
> 标签：jquery, html, css

是否可以使用 html 文件中的 jquery onclick 事件更改 style.css 文件中的属性属性？

我目前正在使用以下内容，但我想更改 css 文件本身。

```
$('#demo').click(function(){
    $(.#demo').slideUp();
     this.style.backgroundColor = 'red';
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T04:23:25.463

您不能编辑文件本身。但是，您可以通过多种方式覆盖样式。

1.  使用所需规则创建一个新`style`元素并附加到文档中。（[例](http://jsfiddle.net/HackedByChinese/eVA94/)）
2.  选择元素并应用[`.css`](http://api.jquery.com/css/)以更改所需的属性。（[例](http://jsfiddle.net/HackedByChinese/sHRKV/1/)）
3.  `.addClass`定义 CSS 选择器（可能与上面的 #1 一致），并使用和从项目中添加或删除它们`.removeClass`。（[例](http://jsfiddle.net/HackedByChinese/PPbkm/1/)）

对于您描述的行为类型，您将使用#2 或#3（建议使用#3，因为它最容易维护）。这是使用您的示例在实践中的#2：http: [//jsfiddle.net/HackedByChinese/HTNGs/1/](http://jsfiddle.net/HackedByChinese/HTNGs/1/)

```
$('#demo').click(function() {
    $(this).css('background-color', 'red');
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T04:45:38.217

您不能编辑 css 文件本身，但可以更改或添加 css 属性。

这是一个可以帮助您的演示[http://jsfiddle.net/Simplybj/EFsvz/2/](http://jsfiddle.net/Simplybj/EFsvz/2/)

您可以将多个 css 属性添加到您的 html 中，例如

```
 $('#demo').click(function(){
        $(this).css({'background-color':'red','color':'white');
    }); 
```

或者，如果您在样式表中定义了 css 类，例如

```
.makeRed
{
    background-color:red;
    height:100px;
    width:100px;
    margin:5px;
}
 .makeGreen{
    background-color:green;
    height:100px;
    width:100px;
    margin:5px;
} 
```

和标记一样

```
<div id="me" class="makeRed"></div> 
```

然后您可以将 div 的类更改为

```
$('#me').click(function(){
    $(this).removeClass('makeRed').addClass('makeGreen');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T04:23:21.020

你不能编辑 css 文件，如果你想编辑 css 属性/属性，那么你必须像这样使用

```
$(this).css("name","value"); 
```

所以对你来说，它将`$(this).css("background-color","red");`代替 `this.style.backgroundColor = 'red';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T04:31:55.297

您不能仅使用 jquery 编辑 CSS 文件，但您可以创建一个可以打开/保存文件的 php 脚本，然后使用 jquery 将 css 更改传递给该脚本。

查看此链接：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T04:23:01.710

您不能从客户端编辑服务器上的文件。

由于安全原因，这根本不可能，对不起。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T05:05:33.687

还有另一种方法，使用您更改和未更改的属性定义单独的 css 类。然后使用 j query/java 脚本，您可以轻松更改元素的类。希望它会工作...

# javascript - 正则表达式 javascript 添加到表达式

> ID：10990482
> 
> 赞同：0
> 
> 时间：2012-06-12T04:20:33.660
> 
> 标签：javascript, regex, datetime

我必须写一些正则表达式。我做了所有除了以下。我不知道如何仅通过正则表达式添加一些东西。

*   将此更改  `9/28/2005`  为  `09.28.2005`  （我能够用句点替换斜杠，但如何将前导零添加到 9）

*   更改`September 21, 2006`为`21\. September 2006`（可以替换`,`为，`.`但如何更改顺序？）

*   更改`5:00 PM`为`i7:00 Uhr`   （12 到 24 小时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:29:48.323

**第一种情况（用零填充）：**

```
result = subject.replace(/\b(\d)(?=[\/.])/ig, "0$1"); 
```

**第二种情况（变更单）：**

```
result = subject.replace(/\b(january|february|march|april|may|june|july|august|september|october|november|december) +(\d{2}), +(\d{2,4})\b/ig, "$2\. $1 $3"); 
```

**第三种情况（12-24 小时）**

由于 JavaScript RegEx 引擎不支持`If-Then-Else Conditionals`. `pure RegEx pattern`因此，为此目的创建一个既困难又耗时的工作。

* * *

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:41:39.940

只需手动进行数学运算...例如，创建一个函数 GetTimeZoneOffset 并从那里开始...

返回 UTC 和本地时间之间的时区差异：

`var d = new Date()`

`var n = d.getTimezoneOffset();`

的结果值为`n`：`240`

添加差异和中提琴你有一个真实的日期，你可以按照你想要的方式格式化..

# python - Python：透明地处理压缩文件和普通文件

> ID：10990483
> 
> 赞同：3
> 
> 时间：2012-06-12T04:20:45.187
> 
> 标签：python, zip

我想写一个python脚本来处理一些日志文件。该应用程序每周产生大约 1 GB 的日志，并在周末将这些日志压缩到每个大约 50 兆字节。

我不想分开处理 zip 文件和非压缩日志文件的代码，即我不希望`if (zip) then (blah1) else (blah2)`所有代码都在，理想情况下这样的检查应该只发生一次，其余代码应该是相同的。是否有任何方法/库可以统一 zip/普通文件，以便可以使用相同的代码来读取它们。

我不需要写。请注意，我在这里处理目录（和压缩目录），而不仅仅是单个文件，所以我需要能够在两者中移动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:37:33.917

我的基本方法是抽象一个 zip 文件和一个目录，以便它们具有相似的接口。在这里，我选择考虑 zip 文件“规范”并简单地为目录实现`zipfile`'s`namelist()`和`open()`方法。（这类似于 Mark Hildreth 的回答，只是我不是在设计一个全新的 API。）当然，如果需要，您可以实现更多。

工厂函数根据您给它的内容`opencontainer()`返回一个`ZipFile`实例或一个实例。`Directory`（您也可以只使用一种`__new__()`方法`Directory`来执行此操作。）

`namelist()`然后，您可以使用容器的`open()`方法迭代并打开容器内的文件。此时，您有一个`file`对象或来自 zip 文件的类似文件的对象，并且这些 API 在设计上已经相似。

```
import zipfile, os

class Directory(object):
    def __init__(self, path):
        self.path = path
    def namelist(self):
        return os.listdir(self.path)
    def open(self, name):
        return open(os.path.join(self.path, name))

def opencontainer(path):
    if zipfile.is_zipfile(path):
        return zipfile.ZipFile(path)
    return Directory(path)

container = opencontainer(path)
for logname in container.namelist():
    logtext = container.open(logname).read() 
```

这是一个非常粗略的解决方案草图，可能需要一些增强的错误处理和资源管理（上下文管理器可能有助于确保文件关闭）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:20:27.097

我不确定是否有任何库可以做到这一点，但听起来并不难写。基本上，你照你说的做：在开始时检查一次，然后根据你找到的文件类型做出反应。“[策略模式](https://en.wikipedia.org/wiki/Strategy_pattern)”是编程中的一种常见模式，可能看起来像这样......

```
class ZipFileAccessStrategy(object):
    def __init__(self, filename):
         ...open the zipfile...

    def get_file(self, filename):
         ...get a file from the archive....

    def get_files(self, directory):
         ...get a list of all files in a directory in the zip file...

class DirectoryAccessStrategy(object):
    def __init__(self, directory):
         ...store the name of the directory...

    def get_file(self, filename):
         ...get a file relative to this directory....

    def get_files(self, directory):
         ...get a list of all files in a specific path relative to the directory...

filename = '...'
if is_zipfile(filename):
    strategy = ZipFileAccessStrategy(filename)
else:
    strategy = DirectoryAccessStrategy(filename)

# Now we can access whether Zip File or Directory using a common interface
file_list = strategy.get_files('/')
f = strategy.get_file(file_list[0]) 
```

我忽略了一些实现细节，并且还需要担心文件的正确打开/关闭。但是，希望这能给您一个总体思路。

# javascript - 在 Chrome 中使用 JavaScript 执行本地命令

> ID：10990484
> 
> 赞同：2
> 
> 时间：2012-06-12T04:20:45.660
> 
> 标签：javascript, internet-explorer, google-chrome, command-line

我的邮件客户端配置为使用 Chrome 打开邮件中的链接。但有时，当我从我们的票务系统收到邮件时，这在 Chrome 上根本不起作用，我想用 Internet Explorer 打开链接。

因此，我认为 Javascript 用户脚本可能会完成这项工作。我已经搜索过，似乎有办法使用 ActiveX。不幸的是，这在 Chrome 中不起作用。有人知道我会怎么做吗？是否有某种插件或类可以让我在 Chrome 中做这种事情？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:26:58.493

您可以在系统上设置自定义协议处理程序。

例如，您可以在 html 中使用如下协议：

```
<a href="sd:http://www.example.com/">I get opened in IE</a> 
```

然后将 sd 注册为协议，并告诉 Windows 用 IE 打开这些链接

将应用程序注册到 URL 协议

[http://msdn.microsoft.com/en-us/library/aa767914(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa767914(v=vs.85).aspx)

问题：

看起来它通过了协议部分，所以 IE 不知道该怎么做。您可以编写一个非常简单的批处理文件来剥离协议部分，然后启动 IE。

这是一个示例批处理文件：

```
@echo off
set a=%1
start "" "c:\program files (x86)\internet explorer\iexplore.exe" %a:~3% 
```

它创建一个变量“a”，将其设置为第一个参数“%1”，然后开始 iexplore，去掉“a”的前 3 个字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:00:07.987

没有一个简单的解决方案。您可以为此找到的任何解决方案都非常棘手，因为 javascript 并非旨在执行此操作。我能想到的唯一解决方案是使用 chrome 扩展程序根据访问的页面的 url 启动外部应用程序，但我不知道 chrome 扩展程序是否具有该功能。

不确定它会有多大帮助，但[chrome 扩展教程](http://code.google.com/chrome/extensions/getstarted.html)页面可能包含一些有用的东西。

# html - 登录页面在表单标签定义处失败

> ID：10990486
> 
> 赞同：0
> 
> 时间：2012-06-12T04:20:55.770
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

我有以下代码片段

```
<%= form_tag :action => 'process_login'%>
   Username: <%= text_field "user", "fullname" %>&#x00A;
   Password: <%= password_field "user", "password" %>&#x00A;
   <%= submit_tag %>
<%= end_form_tag %> 
```

用作登录我的系统的 index.rb 页面。控制器索引函数如下所示

```
def index    
    @user=MyEmployee.new
    @user.fullname=params[:fullname]
    @user.password=params[:password]
end 
```

错误是

```
undefined local variable or method `end_form_tag' for #<#<Class:0x5cbe468>:0x5cbcb60> 
```

我应该添加或更改什么以使其正常工作？

**更新** 这是我的 process_login 函数

```
def process_login
    if user=MyEmployee.authenticate(params[:fullname])
      session[:id]=user.id
      redirect_to session[:return_to]
    else
      flash[:error]='Login fails, unauthenticated user'
      redirect_to :action => 'login', :fullname=>params[:user][:fullname]
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:59:02.290

您在那里使用*非常非常古老的*语法。`end_form_tag`在 Rails 2 中已弃用。

请改用此语法：

```
<%= form_tag :action => 'process_login' do%>
  Username: <%= text_field "user", "fullname" %>&#x00A;
  Password: <%= password_field "user", "password" %>&#x00A;
  <%= submit_tag %>
<% end %> 
```

您使用的任何指南都`end_form_tag`非常旧，不应再使用。我建议遵循[Rails 教程](http://railstutorial.org)。

# c++ - 如何在 C++ 中更清楚地包含头文件

> ID：10990488
> 
> 赞同：2
> 
> 时间：2012-06-12T04:21:20.817
> 
> 标签：c++, c, header-files

在 C++ 中，我有一些头文件，例如：`Base.h`，以及一些使用`Base.h`：

```
//OtherBase1.h
#include "Base.h"
class OtherBase1{
    // something goes here
};

//OtherBase2.h
#include "Base.h"
class OtherBase2{
    // something goes here
}; 
```

而且，由于标题重复`main.cpp`，我只能使用这两个类中的一个。`OtherBase`如果我想同时使用这两个类，`OtherBase2.h`我必须`#include "OtherBase1.h"`代替`#include "Base.h"`. 有时，我只想使用`OtherBase2.h`而不是`OtherBase1.h`，所以我认为包含`OtherBase1.h`在`OtherBase2.h`. 我该怎么做才能避免这种情况以及包含头文件的最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T04:24:36.530

您应该[在](http://en.wikipedia.org/wiki/Include_guard).`Base.h`

一个例子：

```
// Base.h
#ifndef BASE_H
#define BASE_H

// Base.h contents...

#endif // BASE_H 
```

这将防止多次包含`Base.h`，并且您可以同时使用这两个`OtherBase`标头。标`OtherBase`头也可以使用包含防护。

常量本身也可用于根据特定标头中定义的 API 的可用性对代码进行条件编译。

**选择：** `#pragma once`

请注意，`#pragma once`可以使用它来完成相同的事情，而不会出现与用户创建的`#define`常量相关的一些问题，例如名称冲突，以及偶尔键入`#ifdef`而不是`#ifndef`或忽略关闭条件的小烦恼。

`#pragma once`通常可用，但包括警卫始终可用。事实上，您经常会看到以下形式的代码：

```
// Base.h
#pragma once

#ifndef BASE_H
#define BASE_H

// Base.h contents...

#endif // BASE_H 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T04:31:09.917

您必须使用标头保护来避免重复。

[http://en.wikipedia.org/wiki/Include_guard](http://en.wikipedia.org/wiki/Include_guard)

例如在您`Base.h`添加以下内容：

```
#ifndef BASE_H_
#define BASE_H_

// stuff in Base.h

#endif 
```

有关听到的保护格式，请参阅此 SO 问题

[#include 标头保护格式？](https://stackoverflow.com/questions/314983/include-header-guard-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:25:23.333

为避免与多次导入同一个头文件相关的问题，您可以使用预处理器来防止这种情况。通常的做法是将这些位添加到`Base.h`：

```
#ifndef BASE_H_CONSTANT
#define BASE_H_CONSTANT

// Stick the actual contents of Base.h here

#endif 
```

# javascript - 如何在通过 window.open 或 self.open 为 Chrome 打开的弹出窗口上显示后退和前进按钮？

> ID：10990494
> 
> 赞同：2
> 
> 时间：2012-06-12T04:22:00.153
> 
> 标签：javascript, html, browser

我用下面的代码片段打开弹出窗口

```
 self.open('myJSPPage','ServicePopUp','height=600,width=800,resizable=yes,scrollbars=yes,toolbar=yes,menubar=yes,location=yes'); 
```

窗口打开后，我在弹出窗口中看不到任何后退按钮或前进按钮。我只看到标题，然后是它下面的地址栏，然后是地址栏下的 myJSPPage。我没有得到如何在弹出窗口上显示后退和前进按钮？

**编辑：-**我正在使用谷歌 crome。看起来上面的代码在 IE 上工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:39:02.953

我测试了这个例子，它给了我FF上的前进和后退按钮 [试试这个](http://www.quackit.com/html/codes/html_popup_window_code.cfm)

```
<!-- Codes by Quackit.com -->
<script type="text/javascript">
// Popup window code
function newPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
}
</script>
<a href="JavaScript:newPopup('http://www.quackit.com/html/html_help.cfm');">Open a popup window</a> 
```

jsfiddle live demo for your code an mine 它给了我关于 FF 测试的按钮

**更新：** 是的，你是对的 chrome 没有给出预期的结果

可能重复

[堆栈溢出中的另一个问题](https://stackoverflow.com/questions/2568064/how-to-window-open-with-a-toolbar-in-google-chrome) 不幸的是，Chrome 在使用 window.open 时仅支持一小组窗口功能。如果您认为这是一个错误或问题，您可以在[http://crbug.com](http://crbug.com)提交。

如果您只使用 window.open(url) 那么它将在同一个窗口中打开一个新选项卡，其中包含您想要的按钮。

[jsfiddle 演示](http://jsfiddle.net/sssonline2/wfgPR/)

# python - 将 SQL 文本文件导入 MySQL 时出现 Unicode 到 UTF-8 编码问题

> ID：10990496
> 
> 赞同：0
> 
> 时间：2012-06-12T04:22:01.913
> 
> 标签：python, mysql, unicode, encoding, utf-8

这是场景：

我在包含 Unicode 的 MySQL 数据库中有一个 url。数据库使用 Latin-1 编码。现在，当我使用 Python 从 MySQL 读取记录时，它会转换为 Unicode，因为所有字符串都遵循 Python 中的 Unicode 格式。

我想将 URL 写入文本文件——为此，它需要转换为字节（UTF-8）。这已成功完成。

现在，给定文本文件中的 URL，我想在数据库中查询数据库中这些相同的 url。我通过调用源命令来执行一些选择查询来做到这一点。

结果：我没有得到匹配。

我怀疑问题源于我对 UTF-8 的转换，它以某种方式弄乱了符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:55:00.953

您很可能需要将 mysql shell 客户端设置为使用 utf8。

您可以通过运行直接在 mysql shell 中设置它`set character set utf8`。或者通过添加`default-character-set=utf8`到您的`~/.my.cnf`.

# sql-server-2005 - SQLServer新登录和新数据库用户之间的区别

> ID：10990497
> 
> 赞同：0
> 
> 时间：2012-06-12T04:22:18.620
> 
> 标签：sql-server-2005

> **可能重复：**
> [SQL Server 中用户和登录之间的区别](https://stackoverflow.com/questions/1134319/difference-between-a-user-and-a-login-in-sql-server)

是否足以创建具有所需数据库权限的数据库登录名？还是我需要为此登录创建一个数据库用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:35:57.587

登录是整个 SQL Server 实例的登录帐户 - 一个实例可以包含许多数据库。

用户在数据库级别定义，并与登录相关联以提供交互式访问（权限提供）

登录是服务器端（实例级别）对象。它们的正确名称是“服务器主体”（请参阅​​ sys.server_principals）。服务器范围的权限被授予登录，例如创建数据库或查看服务器状态权限。

用户是一个数据库对象，正确地称为“数据库主体”（参见 sys.database_principals）。他们是数据库权限的接收者，例如创建表或选择。

通常，登录通过匹配的 SID 一对一映射到每个数据库中的用户，但也有一些例外，例如 sysadmin 固定服务器角色的所有成员始终映射到 dbo。

没有登录的用户是 Service Broker 远程身份（请参阅远程服务绑定）和代码签名的特定构造。您永远不必在任何其他上下文中创建一个，如果这样做，您可能做错了。没有登录的用户永远不会被冒充。

# php - Mysql和PHP编码不匹配

> ID：10990508
> 
> 赞同：0
> 
> 时间：2012-06-12T04:22:59.880
> 
> 标签：php, mysql, encoding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:25:41.587

Issue a SQL query `CHARSET utf8` before issuing other commands. This will change the connection character set to UTF-8.

Reference : [http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)

# php - Codeigniter：数据库中数据的简单回显

> ID：10990510
> 
> 赞同：0
> 
> 时间：2012-06-12T04:23:08.227
> 
> 标签：php, sql, codeigniter, model

创建模型的最佳方法是什么，以便我可以像这样从控制器调用它？

`$this->model_model->function->dbname`

我有以下模型，但它很垃圾：

**模型：**

```
function systemName()
{

    $query = $this->db->query("SELECT cms_name FROM options");

    return $query->result();
} 
```

**更新：**

```
function systemOptions($options)
{   
    $this->db->select($options);

    $query = $this->db->get('options');

    return $query->num_rows();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:29:08.980

你为什么想要？为什么不这样称呼它？：

```
 $this->model_model->functionname('dbname'); 
```

* * *

一个完整的模型骨架是这样的：

```
<?php
class Mymodel extends Model
{
    function get_some_entries($number_rows)
    {
            return $result = $this -> db -> query("SELECT id, name
                                            FROM tablename
                                            LIMIT $number_rows");
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:33:37.083

最好的办法？您可能可以阅读 CodeIgniter[通用指南](http://codeigniter.com/user_guide/general/models.html#loading)并根据您的情况进行更改。但基本思想是，您创建模型类，然后从控制器加载。然后只需相应地调用模型函数。例如，

```
class Custom_model extends CI_Model {

function __construct()
{
    parent::__construct();
}

function systemName()
{

    $query = $this->db->query("SELECT cms_name FROM options");
    return $query->result();
}

...
...

function systemOptions($options)
{   
    $this->db->select($options);

    $query = $this->db->get('options');

    return $query->num_rows();
}

}

<?php
class CustomController extends CI_Controller {

public function __construct()
{
    parent::__construct();       
    $this->load->model('custom_model', 'fubar');
}

public function index()
{
    $result = $this->fubar->systemName('dbname'); 
    print_r ($result);
}

}
?> 
```

# php - mysql PHP join - 语法问题

> ID：10990517
> 
> 赞同：0
> 
> 时间：2012-06-12T04:24:16.297
> 
> 标签：php, mysql

我正在尝试加入 3 个表，但我的查询一直出错。我不确定我做错了什么。我的语法一定是做错了什么，但我不太确定哪里出了问题。

```
SELECT project_timecard_tasks.DateTime,
        project_timecard_tasks.Total_Hours,
        project_timecard_tasks.User_ID,
        project_timecard_tasks.Task_ID,
        project_timecard_tasks.Project_ID,
        users.User_ID,
        users.FirstName,
        users.LastName,
        tasks.id,
        tasks.taskName

 FROM project_timecard_tasks

 JOIN project_timecard_tasks ON project_timecard_tasks.User_ID = users.User_ID 
 AND project_timecard_tasks.Task_ID = tasks.id

 WHERE project_timecard_tasks.Project_ID = '$jobNumber' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:38:12.873

你的`JOIN`说法有点不靠谱。试试这个：

```
SELECT project_timecard_tasks.DateTime,
        project_timecard_tasks.Total_Hours,
        project_timecard_tasks.User_ID,
        project_timecard_tasks.Task_ID,
        project_timecard_tasks.Project_ID,
        users.User_ID,
        users.FirstName,
        users.LastName,
        tasks.id,
        tasks.taskName

 FROM project_timecard_tasks

 JOIN users ON project_timecard_tasks.User_ID = users.User_ID 
 JOIN tasks ON project_timecard_tasks.Task_ID = tasks.id

 WHERE project_timecard_tasks.Project_ID = '$jobNumber' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:30:36.640

您正在从三个表中选择数据，`(project_timecard_tasks , users and tasks)`但在`from`子句中您只提到 1 个表。您需要提及所有表名称，例如：

```
 FROM project_timecard_tasks ,users, tasks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:42:53.580

你 JOIN 不正确。您需要指定要加入的表。将其替换为：

```
JOIN users ON project_timecard_tasks.User_ID = users.User_ID 
JOIN tasks ON project_timecard_tasks.Task_ID = tasks.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T04:46:55.150

在第二个连接语句中 删除`AND`并使用。`JOIN`

`JOIN project_timecard_tasks ON project_timecard_tasks.User_ID = users.User_ID JOIN project_timecard_tasks.Task_ID = tasks.id`

# asp.net-mvc-3 - ASP.NET MVC - 将 zetetic 安全性与 NHibernate Membership Provider 集成

> ID：10990518
> 
> 赞同：0
> 
> 时间：2012-06-12T04:24:17.143
> 
> 标签：asp.net-mvc-3, nhibernate, asp.net-membership, bcrypt

zetetic 有一个非常好的加密库，其中包括对 bcrypt2 的支持。看起来它应该足够简单，可以合并到 ASP.NET 成员资格提供程序中（事实上，可以在[此处](http://zetetic.net/blog/2012/3/29/strong-password-hashing-for-aspnet.html)找到默认提供程序的说明）。我正在使用 NHibernate Membership Provider（在[此处](http://nhmemberprovider.codeplex.com)找到），它似乎在其 EncodePassword 函数中硬编码 SHA1 哈希格式。我的问题是，这应该如何适应 BCrypt2（特别是 Zetetic 的包装器）。这是我非常害怕出错的事情，我不愿意自己尝试一下，以免它应该“起作用”但有一些我没有资格发现的隐藏缺陷。

```
 private string EncodePassword(string password)
        {
            string encodedPassword = password;

            switch (PasswordFormat)
            {
                case MembershipPasswordFormat.Clear:
                    break;
                case MembershipPasswordFormat.Encrypted:
                    encodedPassword =
                        Convert.ToBase64String(EncryptPassword(Encoding.Unicode.GetBytes(password)));
                    break;
                case MembershipPasswordFormat.Hashed:
                    HMACSHA1 hash = new HMACSHA1();
                    hash.Key = HexToByte(_machineKey.ValidationKey);
                    encodedPassword =
                        Convert.ToBase64String(hash.ComputeHash(Encoding.Unicode.GetBytes(password)));
                    break;
                default:
                    throw new ProviderException("Unsupported password format.");
            }

            return encodedPassword;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:11:14.803

您是在修改基于 NHibernate 的会员提供程序，还是开箱即用地使用它？如果是后者，它看起来没有任何可扩展性。

ASP.NET SqlMembershipProvider 通过接受哈希算法的名称来工作，通过[HashAlgorithm.Create(name)](http://msdn.microsoft.com/en-us/library/wet69s13)调用一个实例，然后如果算法类型是 KeyedHashAlgorithm 或常规（非键控）HashAlgorithm，则其行为会有所不同。Zetetic.Security 包只是提供了一点胶水来使 BCrypt 和 PBKDF2 与该模型兼容。

NHMembershipProvider 的示例代码无法利用这一点，因为它非常直接地依赖于 HMACSHA1。我注意到 HMACSHA1 不是用于此目的的安全算法，也不是所有用户都可以使用静态盐（它几乎不比没有盐好）。应用 ValidationKey 和 HMACSHA1 仅用于消息完整性。

这是一个示例：

```
public class HashDemo
{
    private static readonly RNGCryptoServiceProvider s_rng = new RNGCryptoServiceProvider();

    public string HashPassword(string pwd, string hashName)
    {
        var alg = HashAlgorithm.Create(hashName);

        if (alg == null)
            throw new ArgumentException("Invalid hash name", "hashName");

        byte[] tohash = System.Text.Encoding.UTF8.GetBytes(pwd);

        var ka = alg as KeyedHashAlgorithm;

        if (ka != null)
        {
            if (ka.Key == null || ka.Key.Length == 0)
            {
                byte[] key = new byte[20];

                s_rng.GetBytes(key);

                ka.Key = key;
            }
            else
            {
                s_rng.GetBytes(ka.Key);
            }
            // TODO: return base64(ka.Key || alg.ComputeHash(tohash))
        }
        else
        {
            var salt = new byte[20];

            s_rng.GetBytes(salt);

            using (var ms = new System.IO.MemoryStream(salt))
            {
                ms.Write(tohash, 0, tohash.Length);

                tohash = ms.ToArray();
            }
            // TODO: return base64(salt || alg.ComputeHash(tohash))
        }
    }
} 
```

# c# - 如何以编程方式确定事件 ID 的描述

> ID：10990520
> 
> 赞同：0
> 
> 时间：2012-06-12T04:24:33.833
> 
> 标签：c#, event-log

我编写了一个实用程序，允许我查看 EventLog 消息、过滤它们的类型、编写它们的时间等。

我发现在过去几个月/自从我购买笔记本电脑以来，我已经有无数次（给予或接受一些）以下条目：

```
Type: Error
Source: WinMgmt
Time Generated: 06/11/2012 20:55:00
Message: The description for Event ID '-1073741814' in Source 'WinMgmt' cannot be found.  The local computer may not have the necessary registry information or message DLL files to display the message, or you may not have permission to access them.  The following information is part of the event:'//./root/CIMV2', 'SELECT * FROM __InstanceModificationEvent WITHIN 60 WHERE TargetInstance ISA "Win32_Processor" AND TargetInstance.LoadPercentage > 99', '0x80041003'
Machine Name: MuleheadedAsteroid 
```

有谁知道我会如何回应这样一个错误的消息以查明问题的根源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:28:07.347

你在这里问两个问题。首先，为什么事件日志条目的格式不正确？（您看到的是消息的参数，但不是完全格式化的消息。首先，我们将修复消息。

似乎注册表损坏，或缺少消息文件 dll。

检查以确保这些注册表项存在，并指向正确的位置：

1) HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\eventlog\Application\WinMgmt

```
Name:  ProviderGuid
Type:  REG_EXPAND_SZ
Value: {1edeee53-0afe-4609-b846-d8c0b2075b1f} 
```

2) HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\WINEVT\Publishers\{1edeee53-0afe-4609-b846-d8c0b2075b1f}

存在的值：

```
Name:  MessageFileName
Type:  REG_EXPAND_SZ
Value: %SystemRoot%\system32\wbem\WinMgmtR.dll

Name:  ResourceFileName
Type:  REG_EXPAND_SZ
Value: %SystemRoot%\system32\wbem\WinMgmtR.dll 
```

3) 最后，在 %SystemRoot%\system32\wbem\WinMgmtR.dll 验证 WinMgmtR.dll 的存在

* * *

其次，事件日志试图告诉我们什么。我用谷歌搜索了错误代码，0x80041003。这立即让我开始讨论如何尝试在权限不足的情况下查询 WMI，尤其是一篇知识库文章：

[安装 Windows Vista Service Pack 1 或 Windows Server 2008 后，事件 ID 10 将记录在应用程序日志中](http://support.microsoft.com/kb/950375/en-us/)

您会注意到 MS 的示例查询与您的几乎相同。因此，似乎有些东西正在运行并在没有足够权限的情况下查询 WMI。

MS 提供了一个脚本来阻止条目出现在知识库文章的解决部分中。

# python - 'str' 和 'str' 不支持的操作数类型。Python

> ID：10990523
> 
> 赞同：0
> 
> 时间：2012-06-12T04:24:49.733
> 
> 标签：python

我有 IF 声明；

```
if contactstring == "['Practice Address Not Available']" | contactstring == "['']": 
```

我不确定出了什么问题（可能是“ ' ”？），但我不断收到标题中提到的错误。

我已经查看了其他问题的答案，但所有这些问题似乎都是关于对字符串使用数学运算，这不是这里的情况。我知道这个问题有点懒，但是我整天都在编码，我已经筋疲力尽了，我只想快速解决这个问题。（Python newb）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T04:30:02.600

`|`是 Python 中的按位或运算符，具有优先级，以便 Python 将其解析为：

```
if contactstring == (""['Practice Address Not Available']"" | contactstring) == "['']": 
```

这会产生您看到的错误。

看来您想要的是一个*逻辑*或运算符，在 Python 中拼写为“或”：

```
if contactstring == ""['Practice Address Not Available']"" or contactstring == "['']": 
```

会做你所期望的。但是，由于您将相同的变量与一系列值进行比较，因此效果会更好：

```
 if contactstring in ("['Practice Address Not Available']", ['']): 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T04:26:59.573

The`|`是一个*位运算* [符](http://www.tutorialspoint.com/python/python_basic_operators.htm)，不适用于字符串...

使用`or`（布尔逻辑运算符）将产生更好的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T04:31:03.253

这里的问题是按位或运算符`|`。在通常可以正常工作的布尔上下文中，但`|`优先级高于`==`Python 尝试首先评估的优先级`"['Practice Address Not Available']" | contactstring`。这两个操作数都是字符串，你不能按位或两个字符串。使用更正确的`or`可以避免这个问题，因为它的优先级低于`==`.

# c++ - 准确设置winsock选择超时

> ID：10990533
> 
> 赞同：5
> 
> 时间：2012-06-12T04:25:48.183
> 
> 标签：c++, c, windows, winapi, winsock

我试图在指定的时间段后让我的接受呼叫超时，我尝试按照这里的建议：

[Winsock 接受超时](https://stackoverflow.com/questions/9683358/winsock-accept-timeout)

在这种情况下，我在调用它时传递了一个 TIMEVAL 结构来选择，问题是当我将 tv.tv_usec 设置为大约 40 分钟左右时，选择调用立即超时，而不是等待我指定的 40 分钟。MSDN 声明 select 的超时是它将等待的最长时间，我如何使 select 或 accept 等待特定的时间段，然后超时？

```
#define WIN32_LEAN_AND_MEAN

#include <Windows.h>

#include <WinSock2.h>
#include <Ws2tcpip.h>

#include <cstdio>
#include <tchar.h>

VOID _tmain( int argc, TCHAR *argv[] )
{
    WSADATA wsaData = { 0 };
    ADDRINFOA hINTs = { 0 };
    PADDRINFOA pResult = NULL;
    SOCKET hServerSocket = INVALID_SOCKET,
           hClientSocket = INVALID_SOCKET;
    TIMEVAL tv = { 0 };
    INT iReturnStatus = -1;
    DWORD dwRecvTimeout = 30000, // Milliseconds
          dwSendTimeout = 30000; // Milliseconds
    fd_set readFDs = { 0 };

    if ( WSAStartup( MAKEWORD( 2, 2 ), &wsaData ) )
    {
        _tprintf_s( TEXT( "WSAStartup Failed\n" ) );
        return;
    }

    ZeroMemory( &hINTs, sizeof( hINTs ) );
    hINTs.ai_family = AF_INET;
    hINTs.ai_socktype = SOCK_STREAM;
    hINTs.ai_protocol = IPPROTO_TCP;
    hINTs.ai_flags = AI_PASSIVE;
    if ( getaddrinfo( NULL, TEXT( "9001" ), &hINTs, &pResult ) )
    {
        WSACleanup();
        _tprintf_s( TEXT( "getaddrinfo Failed\n" ) );
        return;
    }

    if ( ( hServerSocket = socket( pResult -> ai_family, pResult -> ai_socktype, pResult -> ai_protocol ) ) == INVALID_SOCKET )
    {
        freeaddrinfo( pResult );
        WSACleanup();
        _tprintf_s( TEXT( "socket Failed\n" ) );
        return;
    }

    int iResult = bind( hServerSocket, ( pResult -> ai_addr ), pResult -> ai_addrlen );
    if ( iResult == SOCKET_ERROR )
    {
        freeaddrinfo( pResult );
        closesocket( hServerSocket );
        WSACleanup();
        _tprintf_s( TEXT( "bind Failed\n" ) );
        return;
    }
    freeaddrinfo( pResult );

    if ( listen( hServerSocket, SOMAXCONN ) )
    {
        closesocket( hServerSocket );
        WSACleanup();
        _tprintf_s( TEXT( "listen Failed\n" ) );
        return;
    }

    hClientSocket = INVALID_SOCKET;

    for ( ;; )
    {
        tv.tv_usec = 2400000000; // microseconds
        FD_ZERO( &readFDs );
        FD_SET( hServerSocket, &readFDs );
        _tprintf( "select()\n" );
        iReturnStatus = select( 0, &readFDs, NULL, NULL, &tv );

        // Select Error
        if ( iReturnStatus == SOCKET_ERROR )
        {
            _tprintf( "select Failed\n" );
        }
        // Select Success
        else if ( iReturnStatus )
        {
            // Connection Established On Server Socket
            if ( FD_ISSET( hServerSocket, &readFDs ) )
            {
                // Accept Client Connection
                hClientSocket = accept( hServerSocket, NULL, NULL );
                if ( hClientSocket == INVALID_SOCKET )
                {
                    _tprintf( "accept Failed\n" );
                }
                else
                {
                    // Set Recv Timeout
                    setsockopt( hClientSocket, SOL_SOCKET, SO_RCVTIMEO, ( const char * ) &dwRecvTimeout, sizeof( dwRecvTimeout ) );

                    // Set Send Timeout                 
                    setsockopt( hClientSocket, SOL_SOCKET, SO_SNDTIMEO, ( const char * ) &dwSendTimeout, sizeof( dwSendTimeout ) );

                    // Process Client Request(s)
                    // HandleConnection( ClientSocket );
                }
            }
            // Connection Established On Unknown Socket
            else
            {
                _tprintf( "Invalid Socket Returned\n" );
            }
        }
        // Select Timeout
        else
        {
            _tprintf( "select Timeout\n" );
        }

    }
    if ( hServerSocket != INVALID_SOCKET )
        closesocket( hServerSocket );

    return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:41:06.483

> 为什么会这样？

这是根据定义。

[来自MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740560%28v=vs.85%29.aspx)的逐字记录：

> tv_sec 时间间隔，以秒为单位。
> 
> tv_usec 时间间隔，以微秒为单位。此值与 tv_sec 成员结合使用，以表示**不是秒数倍数的时间间隔值**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:52:00.443

问题在于 tv.tv_usec；根据手册页，tv_usec 的类型为“long”。该值 (2400000000)**超出了 long 的范围，**这就是您获得此类选择系统行为的原因。

如果您想选择等待 40 分钟，请确保您使用的是 tv.tv_sec。

# flash - 调试 CutyCapt + Flash

> ID：10990535
> 
> 赞同：4
> 
> 时间：2012-06-12T04:26:07.600
> 
> 标签：flash, ubuntu, cutycapt

我在 Ubuntu 12.04 上有一个系统，它使用 xvfb、CutyCapt 和 Adob​​e Flash 来捕获带有嵌入式 Flash 的 HTML 页面的屏幕截图。所有软件包都是 Ubuntu 12.04 发行版软件包（没有自定义编译）。

xvfb-run --server-args="-screen 0, 1024x768x24" cutycapt --url=http://www.270towin.com/2012_election_predictions.php?mapid=mFh --plugins=on --delay=10 -- out=test.png

该设置适用于捕获 Flash。我遇到的问题是 Flash 对象进行了一些远程数据调用并根据远程数据更改显示状态。我的屏幕截图捕获了 Flash 对象在加载时的状态，但从未捕获远程数据调用后的视觉变化。

使用 tcpdump 我可以看到正在进行适当的数据调用。我尝试将 CutyCapt 延迟最多 90 秒，以查看它是否会捕获新状态，没有骰子。

我感谢任何帮助进一步调试此问题，即使答案是“去这里”。我对 Qt 开发世界不太熟悉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-02T13:07:11.177

你知道 cutycapt 的`delay`参数是毫秒值吗？因此，如果要延迟 10 秒，应该是`10000`，而不是`10`。

这可以解释为什么您没有看到任何状态变化，因为延迟太短了。

# imageresizer - ImageResizer 3.2.1 的编译错误

> ID：10990536
> 
> 赞同：4
> 
> 时间：2012-06-12T04:26:14.163
> 
> 标签：imageresizer

在允许 Nuget 将 ImageResizer 3.1.5 更新到版本 3.2.1 后，我的编译失败并出现多个错误（所有相同类型）：

```
Error 5 Missing compiler required member 'System.Runtime.CompilerServices.ExtensionAttribute..ctor' 
```

显然这是程序集版本不匹配的结果。删除项目中的所有 ImageResizer 引用可以实现无错误编译。

恢复到 ImageResizer 3.1.5 也可以成功编译。

我的项目是一个针对 .NET4 的简单 MVC3 应用程序 - ImageResizer 3.1.5 和 3.2.1 都针对 v2.0.50727

关于如何解决这个问题的任何想法？

感谢期待！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:07:32.017

更新（2012 年 6 月 20 日）：最好的解决方案[是让项目回滚扩展方法支持](https://stackoverflow.com/a/11113191/16689)。ImageResizer 3.2.2 将不再提供扩展方法，但某些功能将在 ResizeSettings 和 Instructions 类中重复，以尽量减少那些已经针对新 alpha API 进行编码的人的损坏。

ImageResizer V4 很可能需要 .NET 3.5，并且会重新引入缺失的功能。

* * *

更新：如果您对此 catch-22 有任何解决方案，[请改为查看此问题。](https://stackoverflow.com/questions/11025100/escape-catch-22-with-extension-attributes-in-net-2-0)

我为这些问题道歉。我仍在尝试收集数据并发现长期解决方案，但这是我目前所拥有的：

**解决方法一：**

在解决方案资源管理器中，展开项目中的 References 文件夹，选择 ImageResizer，然后转到 Properties。将 Aliases 字段从“global”更改为“ir”。

**解决方法 B：**

将您的项目设置为使用 .NET 2.0，保存，然后将其恢复为使用 .NET 3.5 或 .NET 4。

**解决方法 C：**

手动删除您的 System.Core 引用并添加正确的引用。（通常的罪魁祸首是在 3.5 项目中使用 System.Core 3.0 引用的升级项目）。在 ASP.NET 上，您可以[在 web.config](https://stackoverflow.com/a/577527/166893)中执行此操作。

**解决方法 D：**

[恢复到 3.2.0，但前提是您使用的是 C#。](http://imageresizing.net/releases/3-2-alpha-0)

## 为什么会这样

VisualStudio/MSBuild 在编译期间会在项目中找到多个定义，但编译器`System.Runtime.CompilerServices.ExtensionAttribute`没有选择 System.Core 中定义的副本，而是`public`决定使用`internal`ImageResizer.dll 中定义的程序集本地副本。然后它会抱怨，因为其他程序集无法访问它。无名。

## 应该发生什么

Microsoft[过去曾多次使用此技术](http://devhawk.net/2008/09/17/dlr-namespace-change-fire-drill/)而没有出现任何问题，并且已被广泛记录。编译器*应该*选择公共实例以供项目范围内使用，但它选择的是“内部”副本。这并没有影响到许多开发人员；只有少数人可以通过新项目重现它。

## 公共与内部

V2.3.0 将 ExtensionAttribute 定义为`public`而不是`internal`. 这会在 VB 项目中导致编译计时器错误，但在 C# 项目中不会。我立即发布了标记为 的 2.3.1 `internal`，但我现在看到的是 C# 项目的问题。此处为第 22 条军规。

**它适用于其他人......[和微软](http://devhawk.net/2008/09/17/dlr-namespace-change-fire-drill/)！为什么是我？**

[http://www.danielmoth.com/Blog/Using-Extension-Methods-In-Fx-20-Projects.aspx](http://www.danielmoth.com/Blog/Using-Extension-Methods-In-Fx-20-Projects.aspx)

[http://www.codethinked.com/using-extension-methods-in-net-20](http://www.codethinked.com/using-extension-methods-in-net-20)

[http://kohari.org/2008/04/04/extension-methods-in-net-20/](http://kohari.org/2008/04/04/extension-methods-in-net-20/)

[在 .NET 2.0 中使用扩展方法？](https://stackoverflow.com/questions/1522605/using-extension-methods-in-net-2-0?rq=1)

'hack'[甚至出现在 MSDN 杂志上](http://msdn.microsoft.com/en-us/magazine/cc163317.aspx#S7)。

## 你可以如何提供帮助

我需要更多数据才能完全弄清楚这一点。如果您遇到问题，请将项目的 .zip 文件通过电子邮件发送到`support@imageresizing.net`，并附上您的 VisualStudio/.NET 版本号（转到 Visual Studio、帮助、关于，然后单击`Copy Info`，然后将其粘贴到电子邮箱中邮件）。

希望我能够找到触发问题的确切情况。

*更新*- 刚刚找到[这篇文章](http://doogalbellend.blogspot.com/2008/11/predefined-type-is-defined-in-multiple.html)，这意味着唯一的解决方案是创建多个版本的程序集。但[微软没有](http://devhawk.net/2008/09/17/dlr-namespace-change-fire-drill/)！我错过了什么？此外，NuGet 不支持 2.0 和 3.5 版本控制，所以除非我能找到单一程序集解决方案，否则我可能不得不放弃 2.0 支持。

# javascript - .not 方法失败？

> ID：10990544
> 
> 赞同：0
> 
> 时间：2012-06-12T04:27:21.120
> 
> 标签：javascript, jquery, jquery-selectors

我编写了两个 jQuery 函数，其简化版本是这样运行的：

```
$('button.class').not('.selected').on('click', function() {
    console.log('not selected');
    console.log($(this));
    $(this).addClass('selected');
}

$('button.class.selected').on('click', function() {
     console.log('selected');
     console.log($(this));
     $(this).removeClass('selected');
} 
```

单击该按钮**始终**会在控制台中记录以下内容：

```
not selected
[<button class="someClass1 someClass2 selected">Text</button>] 
```

在单击按钮之前，Web Inspector 会显示此内容：

```
<button class="someClass1 someClass2">Text</button> 
```

点击它后：

```
<button class="someClass1 someClass2 selected">Text</button> 
```

再次单击它不会改变任何内容。

切换`addClass()`到`toggleClass()`成功切换`'selected'`打开和关闭，但仍然总是记录`not selected`，这表明我的选择器发生了一些事情。为什么第一个函数总是被调用，即使`'selected'`显然是与`button`元素关联的类之一？

我在测试一些解决方案时注意到，硬编码`'selected'`作为一类会`button`导致相反的问题：只有第二个函数被调用，即使`toggleClass()`按预期工作。通过 jQuery 添加的类不“算”为类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:34:48.587

CSS 选择器在您运行它时进行评估。我不希望`$('button.class.selected')`在页面加载时有任何匹配的元素，所以你的第二个处理程序永远不会执行，因为它永远不会绑定到任何东西。您应该做的是将事件附加到某些基本选择器，例如`$('button.class')`然后在触发事件时进行过滤。

```
$("button.class").on("click", function()
{
    if ($(this).is(".selected"))
    {
        console.log('selected');
        console.log($(this));
        $(this).removeClass('selected');
    }
    else
    {
        console.log('not selected');
        console.log($(this));
        $(this).addClass('selected');
    }
}); 
```

任何一个版本都有效，但一个可能比另一个更合适，这取决于你实际想要做什么。

如果您要做的只是`.selected`在单击按钮时添加/删除，那么这个更简单的版本就可以完成这项工作

```
$("button.class").on("click", function() { $(this).toggleClass("selected"); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:28:52.873

尝试改变：

```
$('button.class').not('.selected') 
```

到：

```
$('button').not('.selected') 
```

和 ：

```
$('button.class.selected') 
```

到：

```
$('button.selected') 
```

# css - 无法将 CSS 样式应用于 jQuery Mobile 创建的按钮

> ID：10990547
> 
> 赞同：0
> 
> 时间：2012-06-12T04:27:49.590
> 
> 标签：css, jquery-mobile

我创建了我的按钮

```
 <a href = "#" data-role = "button" data-theme = "a" id = "button_style" onClick = "check()"> 
```

我试图将样式应用于它

```
.button_style{
     ---
 } 
```

CSS 和 jQueryMobile 效果都不适用于按钮。如果我同时包含 CSS 样式和 jQueryMobile 样式，则 jQueryMobile 效果（如数据主题等）不适用于按钮。但我需要 CSS 样式和 jQueryMobile 样式到 HTML 标记元素。我怎样才能为按钮实现这两个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:45:36.597

好吧，没有看到你到底想要什么是我的尝试：

*   [http://jsfiddle.net/8fUFN/1/](http://jsfiddle.net/8fUFN/1/)

我从其他答案和评论中拼凑而成：

CSS：

```
.button_style {
    width : 40px !important;
    height : 40px !important;
    background: -webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(63,67,75)), color-stop(1, rgb(40,42,47)) );
    background: -moz-linear-gradient( center bottom, rgb(63,67,75) 0%, rgb(40,42,47) 100% ) !important;
    padding: -3px;
    -webkit-border-radius: 9px !important;
} 
```

HTML：

```
<div>
    <a href="#" data-role="button" data-theme="a" class="button_style" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="b" class="button_style" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="c" class="button_style" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="d" class="button_style" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="e" class="button_style" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="a" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="b" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="c" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="d" onClick="check()">Test Button</a>
    <a href="#" data-role="button" data-theme="e" onClick="check()">Test Button</a>
</div> 
```

我的想法是你能用 Theme Roller 做到这一点吗？

*   [http://jquerymobile.com/themeroller/](http://jquerymobile.com/themeroller/)

您还可以尝试一些按钮选项：

*   [http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-options.html](http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-options.html)
*   [http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-themes.html](http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-themes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:30:31.680

你使用 .button_style.. 这表明 button_style 是一个类。但是你有一个 id 是 button_style 的按钮。所以你应该使用

```
#button_style{
 --- 
```

}

检查此链接//已编辑

[http://jsfiddle.net/fLq3C/45/](http://jsfiddle.net/fLq3C/45/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:32:45.123

因为没有使用 Id (#)。您使用了类符号 (.)。因此它不适用

利用

```
#button_style
{
 ---
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T05:01:52.383

我刚刚用你的代码创建了一个[Jsfiddle 。](http://jsfiddle.net/libinvbabu/8fUFN/)通过更改`#button_style`样式可以正常工作。

核实。干杯！！！

# python - 在键/值对列表中查找值

> ID：10990548
> 
> 赞同：2
> 
> 时间：2012-06-12T04:28:25.580
> 
> 标签：python, list

我有 2 个清单

```
old_name_list = [a-1234, a-1235, a-1236]
new_name_list = [(a-1235, a-5321), (a-1236, a-6321), (a-1234, a-4321), ... ] 
```

如果 old_name_list 中的元素存在于 new_name_list 中，我想递归搜索并返回与之关联的值，例如。old_name_list 中的第一个元素返回`a-4321`，第二个元素返回`a-5321`，依此类推，直到 old_name_list 完成。

我尝试了以下方法，但它不起作用

```
for old_name, new_name in zip(old_name_list, new_name_list):
    if old_name in new_name[0]:
        print new_name[1] 
```

是我做错了方法还是我必须对其进行一些小改动？先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T04:31:16.610

`dict()`根据您的第二个列表构建一个，并在其中查找。

```
old_name_list = ["a-1234", "a-1235", "a-1236"]
new_name_list = [("a-1235", "a-5321"), ("a-1236", "a-6321"), ("a-1234", "a-4321") ]

d = dict(new_name_list)

for n in old_name_list:
    print d[n] 
```

您确实需要在诸如“a-1234”之类的字符串周围加上引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T04:31:43.067

用这个：

```
found_items = [item[1] for item in new_name_list if item[0] in old_name_list] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T04:34:19.000

使用字典可能是最好的方法。

```
old_name_list = ['a-1234', 'a-1235', 'a-1236']
new_name_list = [('a-1235', 'a-5321'), ('a-1236', 'a-6321'), ('a-1234, a-4321')]
mapping = dict(new_name_list)
values = [mapping[item] if item in mapping for item in old_name_list]
print values 
```

# php - 在 php 中使用正则表达式获取数据时出错

> ID：10990557
> 
> 赞同：0
> 
> 时间：2012-06-12T04:30:01.827
> 
> 标签：php

我有一个字符串：

```
$text =array();
$text[0] = "Microsoft Windows Phone 7.5 Mango";
$text[1] = "Microsoft Windows Phone 7";

for($i=0; $i<2; $i++){
    preg_match_all('/(Microsoft Windows)<\/i>\s*(.*)/', $text[$i], $value) ;
    print_r($value);
} 
```

当我 print_r($value) 的结果是 array() array()，如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T04:38:56.340

删除`<\/i>`没有出现在输入字符串中的结束 HTML 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:48:13.230

你可以像@Sarke 提到的那样做并删除`<\/i>`. 但是如果这段代码可能需要解析包含这个标签的字符串，那么让你的表达式忽略它：

```
preg_match_all('/(Microsoft Windows)(<\/i>)?\s*(.*)/', $text[$i], $value) ; 
```

另外，我建议不要硬编码数组的长度，而是使用`count()`，如下所示：

```
for($i=0; $i<count($text); $i++) { 
```

这样，如果/当您的`$text`数组中的项目数量发生变化时，您的代码将更具前瞻性。

# symfony - Doctrine/Symfony2 2 实体之间的关系超过 2 种形式

> ID：10990559
> 
> 赞同：1
> 
> 时间：2012-06-12T04:30:02.613
> 
> 标签：symfony, doctrine-orm, associations

当前存在以下内容：

**上市实体**

```
class Listing {

/**
 * @var integer $id
 *
 * @ORM\Column(name="listing_id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $title
 *
 * @ORM\Column(name="title", type="string", length=255)
 */
private $title;

/**
 * @ORM\ManyToOne(targetEntity="IntA\UserBundle\Entity\User", cascade ={"delete"}, inversedBy="listings")
 * @ORM\JoinColumn(onDelete="CASCADE")
 */
protected $user;

 /**
 * @ORM\OneToMany(targetEntity="IntA\UploadBundle\Entity\Gallery", mappedBy="listing_gallery")     
 *
 * @var ArrayCollection $image
 */
private $image;
.
.
.
 /**
 * @ORM\ManyToMany(targetEntity="IntA\Bundle\Entity\Tag", cascade={"persist"})
 * @ORM\JoinTable(name="listing_tag",
 *     joinColumns={@ORM\JoinColumn(name="listing_id", referencedColumnName="listing_id")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="tag_id", referencedColumnName="id")}
 * )
 *
 * @var ArrayCollection $tags
 */
protected $tags; 
```

**标记实体**（存在，但代码与此问题无关）

**画廊实体**

```
class Gallery
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 * 

 * @var integer $gallery_id
 */
protected $gallery_id;
/**

 * @ORM\ManyToOne(targetEntity="IntA\Bundle\Entity\Listing", inversedBy="image")
   @ORM\JoinColumn(name="listing_id", referencedColumnName="listing_id")
 * @var integer 
 */
protected $listing_gallery;

/**
 * @ORM\Column(type="string", length="255")
 * 
 * @var string $name;
 */
protected $name;

/**
 * @ORM\Column(type="string", length="255")
 * 
 * @var string $description;
 */
protected $description;

/**
 * @ORM\Column(type="datetime", name="date_created")
 * 
 * @var DateTime $date_created
 */
protected $date_created;

 /**
 * @ORM\Column(type="datetime", name="date_updated")
 * 
 * @var DateTime $date_updated
 */
protected $date_updated;

 /**
 * @ORM\Column(type="text", length="255")
 * 
 * @var string $url;
 */    
public $url;

public $file = array(); 
```

**画廊控制器**

```
public function uploadAction($id)
{
    $file = new Gallery();
    $images_form    = $this->createForm(new GalleryType(), $file); 
    $form_view = $images_form->createView();
    $form_view->getChild('file')->set('full_name', 'gallery[file][]');
    $request = $this->getRequest();
    #die(var_dump($request->files));
    if ($request->getMethod() === 'POST') {
        $images_form->bindRequest($request);            

        $data = $images_form->getData();   
        #die(var_dump($images_form->getData()->getFile()));

            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($file);

            $related_listing = $em->getRepository('IntABundle:Listing')->find($id);
            $related_listing->setImage($data);

            foreach($images_form->getData()->getFile() AS $singleUploadedFile){

            $related_listing->setImage($singleUploadedFile);
            $em->persist($related_listing);

            }

            $em->flush();

            $uploadedFiles = $em->getRepository('IntABundle:Listing')->findAllImagesPerListing($id);

            return $this->render('UploadBundle:Gallery:view_uploaded.html.twig', array(
                                    'uploadedFiles'      => $uploadedFiles,                                        
                                ));
    }

    return $this->render('UploadBundle:Gallery:upload.html.twig', array(
        'images_form' => $form_view,
        'id' => $id,
    ));

} 
```

创建列表（使用 image=""）在其表单上没有问题。我创建了一个单独的表单，用户可以在其中上传包含多个图像的“图库”。图像上传得很好，但我不明白如何在用户刚刚创建的现有列表对象和他们希望与列表对象关联的图库对象中的图像之间建立连接。

我不确定我解决问题的方法是否正确，或者是否存在更好的方法。现在我可以创建这两个对象，但不能在它们之间建立适当的链接。是否有示例代码可以在两种不同形式之间关联对象？也许我没有找对地方！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:09:31.993

检查教义关系中的拥有和反面：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)

据我所知，您需要从画廊设置关系，因为多方应该是所有者。

IE

```
$gallery->setListing($listing); 
```

而不是

```
$listing->setImage($gallery) 
```

因为当您尝试保存关系时，关系的反面不会存储关系。

这将使您的操作看起来像：

```
public function uploadAction($id)
{
    $file = new Gallery();
    $images_form = $this->createForm(new GalleryType(), $file);
    $form_view = $images_form->createView();
    $form_view->getChild('file')->set('full_name', 'gallery[file][]');
    $request = $this->getRequest();
    if ($request->getMethod() === 'POST') {
        $images_form->bindRequest($request);

        $em = $this->getDoctrine()->getEntityManager();

        $related_listing = $em->getRepository('IntABundle:Listing')->find($id);
        $file->setListingGallery($related_listing);
        $em->persist($file);
        $em->flush();

        $uploadedFiles = $em->getRepository('IntABundle:Listing')
            ->findAllImagesPerListing($id);

        return $this->render('UploadBundle:Gallery:view_uploaded.html.twig', array(
                'uploadedFiles' => $uploadedFiles,
            ));
    }

    return $this->render('UploadBundle:Gallery:upload.html.twig', array(
            'images_form' => $form_view,
            'id' => $id,
        ));
} 
```

# actionscript-3 - Flex 数据网格编辑事件

> ID：10990563
> 
> 赞同：1
> 
> 时间：2012-06-12T04:30:36.157
> 
> 标签：actionscript-3, apache-flex, datagrid, flex3

在我的 flex 应用程序中，我使用具有 5 列的数据网格...其中 3 个是可编辑的...如果我将一个项目添加到网格中，当我按 Enter 键时，光标位置在 Datagrid 单元格中从右到左在网格中移动..通过重复更多的项目......它的工作原理......添加20个项目后光标......移动垂直可编辑的单元格......即：当我点击回车时，它从上到下移动......如何解决这个？？

这是我的网格代码

```
<mx:AdvancedDataGrid id="Do" dataProvider="{GrdPrvider}" keyDown="Do_keyDownHandler(event)" 
                             headerHeight="22" resizeEffect="resize" editable="true" sortExpertMode="true" lockedColumnCount="3" horizontalScrollPolicy="auto" verticalScrollPolicy="auto" width="95%" height="160" x="0" y="10"><mx:columns>
                <mx:AdvancedDataGridColumn headerText="#" editable="false" width="40" dataField="SerialNo" sortCompareFunction="SiNoCompare" />
                <mx:AdvancedDataGridColumn headerText="Desc" editable="false" labelFunction="dgLableFunction" sortCompareFunction="sortableDesc" width="250"/>
                <mx:AdvancedDataGridColumn headerText="Fos" sortable="false" editable="true" width="40"> <mx:AdvancedDataGridColumn headerText="gos" sortable="false" editable="true" width="40"> 
```

对于按键事件，功能如下..

```
protected function Do_keyDownHandler(event:KeyboardEvent):void
        {

            if (event.keyCode == Keyboard.ENTER)
            {
                if(Do.columns[colIdx].editable && event.currentTarget.selectedIndex <= Do.columnCount)
                {

                    var cols:ArrayCollection = new ArrayCollection(Do.columns);
                    var nxtGet:Boolean = false;
                    for(var i:String in cols)
                    {
                        if((int(i) > colIdx) && Do.columns[i].editable && (!nxtGet))
                        {
                            colIdx = int(i);                
                            nxtGet = true;
                        }
                    }
                    if(nxtGet)
                    {
                        Do.editedItemPosition ={rowIndex: event.currentTarget.selectedIndex, columnIndex: colIdx};
                        event.preventDefault();                 
                        Do.dataProvider.refresh();  
                    }
                    else
                    {
                        for(var r:String in  Do.columns)
                        {
                            if(Do.columns[r].headerText == "Fos")
                            {
                                colIdx = parseInt(r);
                            }
                        }               
                        Do.editedItemPosition ={rowIndex: event.currentTarget.selectedIndex+1, columnIndex: colIdx};
                        event.preventDefault();                 
                        Do.dataProvider.refresh();  
                    }

                } 

            }
        } 
```

# qt - Qt拖放QListView删除它被释放的项目

> ID：10990571
> 
> 赞同：5
> 
> 时间：2012-06-12T04:31:29.727
> 
> 标签：qt, drag-and-drop, qlistview

我正在研究一个可排序的小型 QlistView。

```
 iListView = new QListView(this);
    //Creating a standard item model
    iStandardModel = new QStandardItemModel(this);

    //First item
    QStandardItem* item1 = new QStandardItem(QIcon(":/cover-story-album-art.jpg"),"First Item");
    //Second item
    QStandardItem* item2 = new QStandardItem(QIcon(":/cover-story-album-art.jpg"),"Second item");
    //third item 
    QStandardItem* item3 = new QStandardItem(QIcon(":/cover-story-album-art.jpg"),"Third item");

    //Appending the items into model
    iStandardModel->appendRow(item1);
    iStandardModel->appendRow(item2);
    iStandardModel->appendRow(item3);

    //Setting the icon size
    iListView->setIconSize(QSize(40,30));

    //Setting the model
    iListView->setModel(iStandardModel);

    //Setting listview geometry
    iListView->setGeometry(QRect(0,0,240,320));
    iListView->setDragEnabled(true);
    iListView->setAcceptDrops(true);
    iListView->setDragDropMode(QAbstractItemView::InternalMove); 
```

拖放可以工作，但是如果我将项目放在列表末尾以外的任何其他替换项目上，则会出现问题。“拖动”项目替换“释放”项目。

**QListView在不同场景下的截图** ![QListView在不同场景下的截图](../Images/552f6066f22c95f6327d1edbee3d2f52.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T08:26:35.247

那是因为默认情况下设置`QStandardItem`了`Qt::ItemIsDropEnabled`标志。只需使用`QStandardItem::setFlags()`函数将其删除。添加以下行：

```
item1->setFlags(item1->flags() ^ (Qt::ItemIsDropEnabled));
item2->setFlags(item2->flags() ^ (Qt::ItemIsDropEnabled));
item3->setFlags(item3->flags() ^ (Qt::ItemIsDropEnabled));

iListView->showDropIndicator(); // For convenience.. 
```

# iphone - 是否可以将 UIView 的特定区域转换为 iPhone 中的 UIImage

> ID：10990572
> 
> 赞同：1
> 
> 时间：2012-06-12T04:31:34.737
> 
> 标签：iphone, xcode, uiimage

我已经完成了将 UIView 转换为 UIImage 的操作，但我希望将 UIView 的任何特定部分转换为 UIImage 以便有可能

```
UIGraphicsBeginImageContext(view.bounds.size);
[view.layer drawInContext:UIGraphicsGetCurrentContext()];
UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:48:15.670

尝试这个：

```
CGImageRef imageRef = CGImageCreateWithImageInRect([theImage CGImage], someRect);
CGFloat width = CGImageGetWidth(imageRef);
CGFloat height = CGImageGetHeight(imageRef);
CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imageRef);
UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

您首先将从中保存原件`UIImage`，`UIView`然后使用上述方法对其进行裁剪。`someRect`是您想要的原始矩形区域`UIView`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:09:30.523

```
CGImageRef imageRef = CGImageCreateWithImageInRect([theImage CGImage], someRect);
CGFloat width = CGImageGetWidth(imageRef);
CGFloat height = CGImageGetHeight(imageRef);
CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imageRef);
UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
NSData *data= UIImagePNGRepresentation(croppedImage);
UIImage *img = [UIImage imageWithData:data];
UIGraphicsEndImageContext();
return img; 
```

# c# - 如何声明和使用接受基类及其子类作为其参数的方法

> ID：10990581
> 
> 赞同：0
> 
> 时间：2012-06-12T04:32:19.330
> 
> 标签：c#

我想知道如何在 C# 中声明和使用可以将基类以及从基类派生的任何子类作为参数的方法？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:39:29.973

您可以将基类的类型作为参数，但这很麻烦。如果您要访问基类成员，您需要真正了解您的工作。

这种类型的任务通常使用接口来处理。

# google-maps - 我可以在我们的场景中存储地点 api 建议的地点吗？

> ID：10990582
> 
> 赞同：0
> 
> 时间：2012-06-12T04:32:27.777
> 
> 标签：google-maps, google-api

我们在 google app engine for java 上托管了应用程序。在这个应用程序中，我们要求向我们注册的献血者的地址信息。

对于地址部分，我们想使用 google places api，献血者可以开始输入城市名称，我们可以从 places api 中提取它们。然后根据选择，我们可以将地址值存储在 google 数据存储中。

谷歌地图政策对这种类型的数据使用有限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:19:39.120

根据您的澄清，答案是否定的。您希望将每个用户选择的信息永久存储在您的数据库中。根据[Google Maps API 服务条款](http://goo.gl/4WZaM)，第 10.1.3b 节：

> (b) 不得预取、缓存或存储内容。您不得预取、缓存或存储任何内容，除非您可以存储：(i) 有限数量的内容，以提高 Maps API 实施的性能，前提是您临时、安全且在不允许在服务之外使用内容的方式；(ii) Maps API 文档明确允许您存储的任何内容标识符或密钥。例如，您不得使用内容创建独立的“地点”数据库或其他本地列表信息。

如果您打算***暂时***使用这些信息，那么答案是可能的，尽管您应该要求您的法律顾问审查服务条款，以确保您提出的方法不违反条款。

# objective-c - UIView上的CGaffine变换而不变换子视图

> ID：10990587
> 
> 赞同：1
> 
> 时间：2012-06-12T04:33:11.287
> 
> 标签：objective-c, ios, cocoa-touch, transformation, cgaffinetransform

我有一个 uiimageview 的子类，其中有一个按钮作为子视图。我添加了捏合手势以在 uiimageview 上应用缩放仿射变换，但是我不希望按钮（子视图）也被缩放。无论如何要从转换中排除按钮？据我所知，转换会相应地转换视图内的所有内容及其所有子视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:14:56.473

破解它的一种方法是向 UIView 添加一个类别以将转换应用于自身，同时将转换的反转*应用于所有子视图。

*CGAffineTransformInvert 会做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T04:37:22.337

更改视图的视图层次结构，而不是将其`buttons`作为 uiimageview 的子对象，而是创建一个父亲`UIView`并将其添加到它`UIImageView`，`UIButton` 您的新层次结构将是这样的

```
UIView -> UIImageView
       -> UIButton 
```

UIButton 将是 UIImageView 的兄弟而不是它的孩子，现在您可以应用任何转换`UIImageView`并且它不会影响`UIButton`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-15T22:36:13.663

将转换应用到视图层

view.layer.transform = ...

# ms-access - 如何确定 MS Access 安装路径

> ID：10990589
> 
> 赞同：5
> 
> 时间：2012-06-12T04:33:23.570
> 
> 标签：ms-access, command-line

我有一个 MS Access 的命令行调用，如下所示：

```
%Programfiles%\Office11\msaccess.exe 
```

如何消除“Office11”部分，以便生成的调用执行安装的任何版本的 MS Access？我必须在命令行上运行它，因此使用“开始”>“运行”对话框的选项不适用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-03T13:50:25.530

如果您想使用本机 MS Access 功能执行此操作： `SysCmd(acSysCmdAccessDir)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T05:36:07.270

您可以阅读注册表以找到 MSACCESS.EXE 所在的文件夹。这是一个 VBScript 示例。

```
Option Explicit
Dim MSAccPath
Dim RegKey
Dim WSHShell
RegKey = "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\" _
    & "CurrentVersion\App Paths\MSACCESS.EXE\Path"
Set WSHShell = WScript.CreateObject("WScript.Shell")
MSAccPath = WSHShell.RegRead(RegKey)
WScript.Echo "MS Access Path: " & MSAccPath & "MSACCESS.EXE"
Set WSHShell = Nothing 
```

# css - 如何制作一个 div 元素的响应式设计

> ID：10990593
> 
> 赞同：0
> 
> 时间：2012-06-12T04:34:33.363
> 
> 标签：css, responsive-design

我有容器 div 元素，其高度为 100%。buttonGroup div 元素是在jsp**中**填充的，它可以包含多个按钮，所以它的高度会**动态增长**。

buttonGroup div元素占据一定高度后，**剩余****高度**应分配给**displayArea** div元素。如何在 css3 中做到这一点？设计应该是响应式的。

```
<div id="container" style="height: 100%;">
      <div id="buttonGroup">
             <input id="testbtn" type="button" value="Test">
      </div>
      <div id="dislayArea">
          ------ data ------
      </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T04:47:24.590

您可以为此使用**display:table**属性。像这样写：

```
#container{
    display:table;
    width:100%;
    height:100%;
    border:1px solid red;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
}
#buttonGroup{
    background:red;
    display:table-row;
    height:20%;
}
#dislayArea{
    background:green;
    display:table-row;
} 
```

检查这个[http://jsfiddle.net/DV2F5/](http://jsfiddle.net/DV2F5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T04:39:31.260

您可以使用 jQuery 来实现这一点。

像：

```
var bgh = $(document).height() - $("#buttonGroup").prop('scrollHeight');
$("#displayArea").height(bgh); 
```

# android - android嵌套列表

> ID：10990596
> 
> 赞同：1
> 
> 时间：2012-06-12T04:34:38.953
> 
> 标签：android, listview, nested-lists

我是 android 编程新手，我为我的应用程序找到了一些有用的东西，但我似乎找不到如何让一个用字符串数组填充的列表显示一个将用字符串数组填充的新列表. 我想让用户从`top_menu`列表中选择一个项目，然后从那里转到所需区域并显示该数组。

这是我到目前为止所拥有的：

```
public class HelloListActivity extends ListActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  String[] top_menu = getResources().getStringArray(R.array.top_menu);
  setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, top_menu));

  ListView lv = getListView();
  lv.setTextFilterEnabled(true);

  lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
        ???
    }
  });
} 
```

我所有的数组都工作正常，我只是不知道如何根据用户所做的选择用另一个数组重新填充新列表。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:37:34.890

您可以在块中再次 setlistAdaptor `onItemClick()`。

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
        System.out.println("item clicked: "+top_menu[position]);
    }
  }); 
```

# scala - Play 2.0 中的子域

> ID：10990604
> 
> 赞同：4
> 
> 时间：2012-06-12T04:35:01.723
> 
> 标签：scala, playframework, playframework-2.0, subdomain

是否可以在 Play 2.0 conf/routes 中使用子域？喜欢玩 1.1：

```
GET    {client}.mysoftware.com/         Application.index 
```

如何在 Play 2.0 应用中使用子域？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T12:57:36.210

子域配置不是在 Play 级别完成的，而是在反向代理级别完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:46:39.313

不幸的是没有。

这是路由的定义：

```
case class Route(verb: HttpVerb, path: PathPattern, call: HandlerCall) extends Positional 
```

它接受动词（例如`GET`）、路径组件（即不是域或端口，而只是路径组件）和处理程序。

的定义`PathPattern`可以在[这里](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/core/router/Router.scala#L26)找到，据我所知，它不适合域或端口。

# javascript - jquery ajax 帖子已取消

> ID：10990607
> 
> 赞同：6
> 
> 时间：2012-06-12T04:35:55.670
> 
> 标签：javascript, jquery, ajax, post

我想在一组页面上跟踪一组 UI 组件上的鼠标单击事件。为此，我正在使用以下 jquery/ajax 调用（修剪掉 u）：

1.Ajax 调用将添加点击记录。

```
myClickLogger = { 
  endpoint: '/path/to/my/logging/endpoint.html',
  logClickEvent: function(clickCode) {
     $.ajax({
         'type':    'POST',
         'url':     this.endpoint,
         'async':   true,
         'cache':   false,
         'global':  false,
         'data':    {
            'clickCode':clickCode
         },
         'error': function(xhr,status,err){
             alert("DEBUG: status"+status+" \nError:"+err);
         },  
         'success': function(data){
             if(data.status!=200){
                 alert("Error occured!");
             }   
         }   
     }); 
  }   
}; 
```

2.将调用ajax记录器的JQuery单击事件（clickCode是单击按钮/图像的标识符）：

```
$(document).ready(function() {
  $(".myClickEvent[clickName]").click(function() {
      var clickCode = $(this).attr("clickName");
      myClickLogger.logClickEvent(clickCode);
  });
}); 
```

每当被跟踪的按钮单击进入新页面时，浏览器都会“取消”上述 ajax 调用（1.）。

如果我将 'aysnc' 更改为 'false'，则 ajax 调用成功。

此外，不会进入新页面的点击事件会成功。只有进入新页面的点击事件被取消。

我不想使呼叫同步。

任何想法，可能是什么问题？当点击事件进入新页面时，如何保证之前的异步调用完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:49:53.277

因为它是异步的，所以代码将在日志记录发生之前完成。您要做的是将回调传递给异步调用。这将保留异步属性，但仍允许您离开。像这样的东西：

```
 logClickEvent: function(clickCode, callback) {
     $.ajax({
         'type':    'POST',
         'url':     this.endpoint,
         'async':   true,
         'cache':   false,
         'global':  false,
         'data':    {
            'clickCode':clickCode
         },
         'error': function(xhr,status,err){
             alert("DEBUG: status"+status+" \nError:"+err);
         },  
         'success': function(data){
             if(data.status!=200){
                 alert("Error occured!");
             } else {
                 callback();
             }
         }   
     }); 
  }

$(document).ready(function() {
  $(".myClickEvent[clickName]").click(function(e) {
      e.preventDefault(); // This will prevent the link from actually leaving right away
      var clickCode = $(this).attr("clickName");
      var href = $(this).attr('href');
      myClickLogger.logClickEvent(clickCode, function(href){
          if (href)
              window.location = href;
      });
  });
}); 
```

当没有必要时，您可能希望修改未离开页面的任何链接的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T03:02:22.357

我修复了在名为端点服务器的 AJAX 上使用[CORS标头。](http://www.w3.org/TR/cors/)

另见：http: [//blogs.mulesoft.org/cross-domain-rest-calls-using-cors/](http://blogs.mulesoft.org/cross-domain-rest-calls-using-cors/)
另见：http: [//www.biodalliance.org/cors.html](http://www.biodalliance.org/cors.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:52:52.900

您是否使用 Firebug 来跟踪请求？如果是这样，那并不完全正确。如果您使用 Fiddler 检查请求，您可以看到它们是成功的。已取消状态主要意味着“浏览器已取消等待响应”，无论如何您并不真正关心。

# java - JAAS：回调（基于 HTTP 标头有趣）

> ID：10990611
> 
> 赞同：1
> 
> 时间：2012-06-12T04:36:56.970
> 
> 标签：java, jakarta-ee, tomcat, jaas

我使用 NameCallback 和 PasswordCallback 作为用户名和密码。对于用户名和密码，弹出窗口出现在浏览器上，当我输入用户名和密码时，JAAS 验证我的请求。

在wireshark上，我看到401 Unauthorized消息（WWW-Authenticate标头）来了，当我输入带有凭据的用户名/密码HTTP请求时生成（带有授权标头）并转到服务器。

**我的要求：**我不想弹出来。我在其他服务器上的应用程序具有用户名/密码，所以一旦它收到 401，然后基于某些逻辑，它将生成带有授权标头/凭据的 HTTP 请求并将其发回。

**流程：** 用户 -> 其他服务器 -> 我的 Tomcat5.5

在其他服务器上，没有人可以手动输入用户名/密码。应用程序已部署，它只会生成带有凭据的 HTTP 请求并将其发送回 tomcat。

我们可以有任何其他类似这样的回调吗？需要您的帮助。请向我提供反馈以及与方法相关的反馈。

**编辑问题：**

这是实际情况：

UserA 向 XYZ 服务器发起呼叫（SIP 协议）。部署在 XYZ 服务器上的应用程序创建一个 HTTP REST 请求并将其发送到部署了一个应用程序的 Tomcat 服务器，以便获取一些用户帐户详细信息。一旦 HTTP 请求到达 tomcat ，我必须对其进行身份验证。我正在使用 JAASRealm 的 tomcat 实现。

现在进行身份验证，tomcat正在做什么，它会在XYZ服务器上弹出用户名/密码窗口。在XYZ服务器上，由于应用程序已经创建了HTTP请求，所以没有人在这里手动输入用户名/密码（因为这不会去用户 A 设备）。

我正在寻找一种不会出现此弹出窗口的方法，并且部署在 XYZ 服务器中的应用程序应该执行以下操作：

if(response equal 401) 然后创建带有凭据的 HTTP 请求。

所以我一直在寻找一个不会弹出的解决方案。现在清楚了吗，请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:05:49.070

您的应用程序应该使用 java.net.Authenticator 向 HttpURLConnection 提供凭据，而不是直接处理 401 和 WWW-Authenticate 标头。

# c# - 文件夹浏览器对话框，如打开文件对话框

> ID：10990612
> 
> 赞同：20
> 
> 时间：2012-06-12T04:37:01.933
> 
> 标签：c#, winforms

请看下面的快照。这取自 Visual Studio 2008 中的“新项目创建”工作流。

此窗口用于选择将存储项目的文件夹。如何在我的 c# 应用程序中创建类似的窗口？

![在此处输入图像描述](../Images/9f2b2ae687a75600cd8934a9e6ad9b15.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-11T08:01:52.183

它与 Office 中的类似，一个允许选择文件夹的对话框。唯一的区别是选择文件夹按钮被命名为“确定”而不是“选择文件夹”。

```
Microsoft.Office.Interop.Excel.Application app = new Microsoft.Office.Interop.Excel.Application();
Microsoft.Office.Core.FileDialog fileDialog = app.get_FileDialog(Microsoft.Office.Core.MsoFileDialogType.msoFileDialogFolderPicker);
fileDialog.InitialFileName = "c:\\Temp\\"; //something you want
int nres = fileDialog.Show();
if (nres == -1) //ok
{
    Microsoft.Office.Core.FileDialogSelectedItems selectedItems = fileDialog.SelectedItems;

    string[] selectedFolders = selectedItems.Cast<string>().ToArray();

    if (selectedFolders.Length > 0)
    {
        string selectedFolder = selectedFolders[0];
    }
} 
```

当然，您需要添加对 Microsoft.Office.Core（Microsoft Office 14.0 对象库）和 Microsoft.Office.Interop.Excel（Microsoft Excel 14.0 对象库）的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-08T18:49:46.913

我找到了一篇关于默认 FolderBrowserDialog 及其限制的好文章： [http ://www.ssware.com/articles/folderbrowserdialog-unmasked-everything-you-wanted-to-know-about-the-folder-browser-component-from -dotnet-framework.htm](http://www.ssware.com/articles/folderbrowserdialog-unmasked-everything-you-wanted-to-know-about-the-folder-browser-component-from-dotnet-framework.htm)

来自 ssware的第三方组件“Shell MegaPack”（[http://www.ssware.com/megapack.htm ）为 WinForms、ASP.net 和 WPF 提供文件和文件夹浏览器控件等 Windows 资源管理器。](http://www.ssware.com/megapack.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-03T18:33:42.120

如果您可以添加 nuget 包，Microsoft.WindowsAPICodePack.Shell 有一个`CommonOpenFileDialog` 可以在“文件夹模式”下使用的，它应该符合您的预期用途。

```
var directoryDialog = new CommonOpenFileDialog
  {
     IsFolderPicker = true,
     Title = "Select Folder"
  }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T19:45:30.070

我将代码从 C# 修改为 VB，我的环境是 VS2015 + Office 2010。我的代码与 Daniel 的代码略有不同，因为 Daniel 代码中的某些功能仅支持 Office 2003/2007

通过使用新的 excel 实例，它会比打开 OpenFileDialog 或 OpenFolderDialog 慢，但它对用户更友好。我的程序只调用了这个代码一次，所以在我的情况下，为了用户友好而牺牲性能并不是一个问题。

```
Imports Microsoft.Office
Imports Excel = Microsoft.Office.Interop.Excel

Private Sub Button_select_raw_dir_Click(sender As Object, e As EventArgs) Handles Button_select_raw_dir.Click
    Dim raw_app As Excel.Application = New Excel.Application
    Dim raw_data_open_folder_dialog As Microsoft.Office.Core.FileDialog
    raw_data_open_folder_dialog = raw_app.FileDialog(Microsoft.Office.Core.MsoFileDialogType.msoFileDialogFolderPicker)
    raw_data_open_folder_dialog.AllowMultiSelect = False
    raw_data_open_folder_dialog.Title = "Please select the raw data's dir "
    Dim nres As Integer = raw_data_open_folder_dialog.Show()
    Dim sz_SelectedPath As String = Nothing
    If nres = -1 Then '-1 means open... lol
        For Each selectedItems As Object In raw_data_open_folder_dialog.SelectedItems
            sz_SelectedPath = selectedItems.ToString()
        Next
        TextBox_raw_data_dir.Text = sz_SelectedPath
    End If

    raw_app.Quit()
    ReleaseComObject(raw_app)
    GC.Collect()
    GC.WaitForPendingFinalizers()
End Sub

' Release excel objects to avoid memory leak
Public Sub ReleaseComObject(ByRef obj As Object)
    Try
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)
        obj = Nothing
    Catch ex As Exception
        obj = Nothing
        MsgBox("Exception! Failed to release com obj, debug your code.")
    End Try
End Sub 
```

如果你想要一个 C# 版本，我相信你足够聪明，可以将它移植到 C# :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-24T17:08:03.480

请查看[BetterFolderBrowser](https://github.com/Willy-Kimura/BetterFolderBrowser)。它提供了您所需要的以及更多。

> **BetterFolderBrowser**是一个 .NET 组件库，旨在帮助开发人员通过使用与标准[OpenFileDialog](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.openfiledialog?view=netframework-4.7.2)类似的浏览器对话框代替当前的[FolderBrowserDialog](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.folderbrowserdialog?view=netframework-4.7.2)为用户提供更好的文件夹浏览和选择体验，后者仅允许使用其树视图显示格式。这允许使用标准的 Windows 资源管理器对话框更轻松地查看、修改、搜索和选择体验。

# sql - 休眠 - 关系的定义 - 为什么？

> ID：10990613
> 
> 赞同：1
> 
> 时间：2012-06-12T04:37:14.740
> 
> 标签：sql, hibernate

使用hibernate连接表有什么意义或优势，例如：

*   `@OneToMany`
*   `@ManyToOne`
*   `@ManyToMany`
*   `@JoinColumn`

是否在数据库级别定义了关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:57:32.417

有两个主要优点：

能够在持久对象之间导航：

```
order.getProduct().getSupplier().getCompany().getAddress().getStreet(); 
```

能够在 HQL（或 Criteria）查询中使用连接：

```
select address.street from Order order 
inner join order.product product
inner join product.supplier supplier
inner join supplier.company company
inner join company.address address
where order.id = :id 
```

事实上，我想说关联是使 ORM 成为 ORM 的原因。没有它们，您将只能获得基本对象，而不会链接到任何其他对象，并且使用 JDBC 就足够了。

# c++ - 在 C++ 中计算滚动/移动平均线

> ID：10990618
> 
> 赞同：52
> 
> 时间：2012-06-12T04:38:09.833
> 
> 标签：c++, boost, moving-average

我知道这是可以通过以下方式实现的：

[使用 boost::accumulators，我如何重置滚动窗口大小，它会保留额外的历史记录吗？](https://stackoverflow.com/questions/5195990/using-boostaccumulators-how-can-i-reset-a-rolling-window-size-does-it-keep-e)

但我真的很想避免使用boost。我用谷歌搜索并没有找到任何合适或可读的例子。

基本上，我想使用最近的 1000 个数字作为数据样本来跟踪浮点数流的持续流的移动平均值。

实现这一目标的最简单方法是什么？

* * *

我尝试使用圆形阵列、指数移动平均线和更简单的移动平均线，发现圆形阵列的结果最适合我的需要。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-12T04:44:29.080

如果您的需求很简单，您可以尝试使用指数移动平均线。

[http://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average](http://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average)

简而言之，您创建了一个累加器变量，当您的代码查看每个样本时，代码会使用新值更新累加器。您选择一个介于 0 和 1 之间的常数“alpha”，然后计算：

```
accumulator = (alpha * new_value) + (1.0 - alpha) * accumulator 
```

您只需要找到一个“alpha”值，其中给定样本的效果仅持续大约 1000 个样本。

嗯，我不确定这是否适合你，现在我已经把它放在这里了。问题是 1000 是指数移动平均线的一个相当长的窗口。我不确定是否有一个 alpha 可以将平均值分布在最后 1000 个数字上，而不会在浮点计算中出现下溢。但是如果你想要一个较小的平均值，比如 30 个左右的数字，这是一种非常简单快捷的方法。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-12T04:50:22.003

您只需要一个包含 1000 个元素的循环数组（循环缓冲区），在其中将元素添加到前一个元素并存储它。

它变成了一个递增的总和，你总是可以得到任意两对元素之间的总和，然后除以它们之间的元素数量，得到平均值。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-12T05:19:52.887

> 基本上，我想使用最近的 1000 个数字作为数据样本来跟踪浮点数流的持续流的移动平均值。

请注意，以下内容将`total_`as 元素更新为添加/替换，避免了昂贵的*O* (N) 遍历来按需计算求和所需的平均值。

```
template <typename T, typename Total, size_t N>
class Moving_Average
{
  public:
    Moving_Average& operator()(T sample)
    {
        total_ += sample;
        if (num_samples_ < N)
            samples_[num_samples_++] = sample;
        else
        {
            T& oldest = samples_[num_samples_++ % N];
            total_ -= oldest;
            oldest = sample;
        }
        return *this;
    }

    operator double() const { return total_ / std::min(num_samples_, N); }

  private:
    T samples_[N];
    size_t num_samples_{0};
    Total total_{0};
}; 
```

例子：

```
// average of last 3 (from 4) samples...
std::cout << Moving_Average<double, double, 3>{}(4)(7)(2)(6) << '\n';
    // "5\n"

// average of last 3 squares...
Moving_Average<double, double, 3> ma;
for (int i = 0; i < 10; ++i)
    std::cout << (i * i) << ':' << ma(i * i) << ' ';
std::cout << '\n';
    // 0:0 1:0.5 4:1.66667 9:4.66667 16:9.66667 25:16.6667 36:25.6667 49:36.6667 64:49.6667 81:64.6667 
```

`Total`由一个不同的参数`T`来支持，例如`long long`在总计 1000`long`秒时使用 a，`int`对于`char`s 或 a`double`到总计`float`s。

***问题***

这有点缺陷，因为它`num_samples_`可以在概念上回绕到 0，但很难想象任何人有 2^64 个样本：如果担心，使用额外的`bool`数据成员来记录容器`num_samples_`在数组周围循环时第一次填充的时间（最好将一些无害的东西重命名为“ `pos`”）。

另一个问题是浮点精度固有的，可以用一个简单的场景来说明：我们从 开始`T=double`，然后注入样本......`N=2``total_ = 0``{1E17, 1, 2}`

*   1E17，我们执行`total_ += 1E17`，so `total_ == 1E17`，然后注入

*   1，我们执行`total += 1`，但仍然，因为“1”太微不足道而无法改变像 1E17 这样大的数字`total_ == 1E17`的 64 位表示，然后我们注入`double`

*   2，我们执行`total += 2 - 1E17`，其中`2 - 1E17`首先被评估并产生`-1E17`，因为 2 失去了不精确/无意义，所以在我们的总数 1E17 中我们添加 -1E17 并`total_`变为 0，尽管我们想要的当前样本为 1 和`total_`2为 3。我们的移动平均线将计算 0 而不是 1.5。当我们添加另一个样本时，我们将从中减去“最旧的”1，`total_`尽管它从未被正确地合并到其中；我们`total_`和移动平均线可能仍然是错误的。

您可以添加存储最近最近的代码，`total_`如果当前`total_`太小（模板参数可以提供乘法阈值），您可以从数组`total_`中的所有样本重新计算 （并设置为 new ），但是我会把它留给足够关心的读者。`samples_``highest_recent_total_``total_`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-06-12T05:29:49.903

您可以通过对输入流应用加权平均值来近似滚动平均值。

```
template <unsigned N>
double approxRollingAverage (double avg, double input) {
    avg -= avg/N;
    avg += input/N;
    return avg;
} 
```

这样，您无需维护 1000 个存储桶。但是，它是一个近似值，因此它的值不会与真正的滚动平均值完全匹配。

编辑：刚刚注意到@steveha 的帖子。这相当于指数移动平均线，alpha 为 1/N（在这种情况下，我将 N 设为 1000 以模拟 1000 个桶）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-09T20:58:30.787

计算滚动平均值和滚动标准偏差的简单类：

```
#define _stdev(cnt, sum, ssq) sqrt((((double)(cnt))*ssq-pow((double)(sum),2)) / ((double)(cnt)*((double)(cnt)-1)))

class moving_average {
private:
    boost::circular_buffer<int> *q;
    double sum;
    double ssq;
public:
    moving_average(int n)  {
        sum=0;
        ssq=0;
        q = new boost::circular_buffer<int>(n);
    }
    ~moving_average() {
        delete q;
    }
    void push(double v) {
        if (q->size() == q->capacity()) {
            double t=q->front();
            sum-=t;
            ssq-=t*t;
            q->pop_front();
        }
        q->push_back(v);
        sum+=v;
        ssq+=v*v;
    }
    double size() {
        return q->size();
    }
    double mean() {
        return sum/size();
    }
    double stdev() {
        return _stdev(size(), sum, ssq);
    }

}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-01T17:36:55.007

一种方法是将值循环存储在缓冲区数组中。并以这种方式计算平均值。

```
int j = (int) (counter % size);
buffer[j] = mostrecentvalue;
avg = (avg * size - buffer[j - 1 == -1 ? size - 1 : j - 1] + buffer[j]) / size;

counter++;

// buffer[j - 1 == -1 ? size - 1 : j - 1] is the oldest value stored 
```

整个事情在一个循环中运行，其中最近的值是动态的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-25T01:09:10.527

我经常在具有相当疯狂的更新率（50kilosamples/sec）的硬实时系统中使用它，因此我通常预先计算标量。

计算 N 个样本的移动平均值：scalar1 = 1/N；标量2 = 1 - 标量1；// 或 (1 - 1/N) 然后：

平均值 = currentSample*scalar1 + Average*scalar2；

示例：10 个元素的滑动平均值

```
double scalar1 = 1.0/10.0;  // 0.1
double scalar2 = 1.0 - scalar1; // 0.9
bool first_sample = true;
double average=0.0;
while(someCondition)
{
   double newSample = getSample();
   if(first_sample)
   {
    // everybody forgets the initial condition *sigh*
      average = newSample;
      first_sample = false;
   }
   else
   {
      average = (sample*scalar1) + (average*scalar2);
   }
 } 
```

注意：这只是上述 steveha 给出的答案的实际实现。有时更容易理解一个具体的例子。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-12T04:50:58.307

您可以实现一个[环形缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)。制作一个包含 1000 个元素的数组，以及一些用于存储开始和结束索引以及总大小的字段。然后只需将最后 1000 个元素存储在环形缓冲区中，并根据需要重新计算平均值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-03T08:48:50.473

增加@Nilesh 的回答（归功于他），您可以：

*   跟踪总和，不需要每次除然后乘，产生错误
*   避免使用 % 运算符的 if 条件

这是**UNTESTED**示例代码来展示这个想法，它也可以被包装到一个类中：

```
const unsigned int size=10; // ten elements buffer

unsigned int counterPosition=0;
unsigned int counterNum=0;

int buffer[size];
long sum=0;

void reset() {
    for(int i=0;i<size;i++) {
        buffer[i]=0;
    }
}

float addValue(int value) {
    unsigned  int oldPos = ((counterPosition + 1) % size);

    buffer[counterPosition] = value;
    sum = (sum - buffer[oldPos] + value); 

    counterPosition=(counterPosition+1) % size;
    if(counterNum<size) counterNum++;

    return ((float)sum)/(float)counterNum;
}

float removeValue() {
    unsigned  int oldPos =((counterPosition + 1) % size);

    buffer[counterPosition] = 0;
    sum = (sum - buffer[oldPos]); 

    if(counterNum>1) { // leave one last item at the end, forever
        counterPosition=(counterPosition+1) % size;
        counterNum--; // here the two counters are different
    }
    return ((float)sum)/(float)counterNum;
} 
```

应该注意的是，如果缓冲区重置为全零，**则此方法在接收 as 中的第一个值时工作正常**- buffer[oldPos] 为零并且计数器增长。第一个输出是收到的第一个数字。第二个输出是仅前两个的平均值，依此类推，当它们到达时逐渐消失，直到到达`size`项目。

还值得考虑的是，**这种方法与任何其他滚动平均方法一样，是不对称**的，如果您在输入数组的末尾停止，因为最后不会发生相同的衰落（它可能发生在数据结束之后，用正确的计算）。

那是对的。**100 个元素和 10 个缓冲区的滚动平均值给出了**不同的结果：10 个淡入，90 个完美滚动 10 个元素，最后 10 个淡出，**对于 100 个输入的数字，总共有 110 个结果！**您可以选择显示哪些内容（如果最好直接从旧到最近，或者向后，从最近到旧）。

要在结束后正确淡出，您可以继续逐个添加零并每次将项目数减少一，直到到达`size`元素（仍然跟踪旧值的正确位置）。

用法是这样的：

```
int avg=0;
reset();

avg=addValue(2); // Rpeat for 100 times
avg=addValue(3); // Use avg value

...

avg=addValue(-4);
avg=addValue(12); // last numer, 100th input 

// If you want to fade out repeat 10 times after the end of data:

avg=removeValue(); // Rpeat for last 10 times after data has finished
avg=removeValue(); // Use avg value
...
avg=removeValue();
avg=removeValue(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-06T17:35:56.357

我用了一个双端队列......似乎对我有用。这个例子有一个向量，但你可以跳过那个方面，简单地将它们添加到双端队列。

```
#include <deque>

template <typename T>
double mov_avg(vector<T> vec, int len){
  deque<T> dq = {};
  for(auto i = 0;i < vec.size();i++){
    if(i < len){
      dq.push_back(vec[i]);
    }
    else {
      dq.pop_front();
      dq.push_back(vec[i]);
    }
  }
  double cs = 0;
  for(auto i : dq){
    cs += i;
  }
  return cs / len;
}

//Skip the vector portion, track the input number (or size of deque), and the value.

  double len = 10;
  double val; //Accept as input
  double instance; //Increment each time input accepted.

  deque<double> dq;
  if(instance < len){
      dq.push_back(val);
  }
  else {
      dq.pop_front();
      dq.push_back(val);
    }
  }
  double cs = 0;
  for(auto i : dq){
    cs += i;
  }
  double rolling_avg = cs / len; 
```

//为了进一步简化——向它添加值，然后简单地平均双端队列。

```
 int MAX_DQ = 3;
 void add_to_dq(deque<double> &dq, double value){
    if(dq.size() < MAX_DQ){
      dq.push_back(value);
    }else {
      dq.pop_front();
      dq.push_back(value);
    }
  } 
```

我偶尔使用的另一种技巧是使用 mod 覆盖向量中的值。

```
 vector<int> test_mod = {0,0,0,0,0};
  int write = 0;
  int LEN = 5;

  int instance = 0; //Filler for N -- of Nth Number added.
  int value = 0; //Filler for new number.

  write = instance % LEN;
  test_mod[write] = value;
  //Will write to 0, 1, 2, 3, 4, 0, 1, 2, 3, ...
  //Then average it for MA.

  //To test it...
  int write_idx = 0;
  int len = 5;
  int new_value;
  for(auto i=0;i<100;i++){
      cin >> new_value;
      write_idx = i % len;
      test_mod[write_idx] = new_value; 
```

最后一个（hack）没有桶、缓冲区、循环，什么都没有。只是一个被覆盖的向量。它是 100% 准确的（对于向量中的 avg / 值）。很少维护正确的顺序，因为它开始向后重写（在 0 处），因此在示例 {5,1,2,3,4} 等中，第 5 个索引将在 0 处。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-01-27T00:46:21.230

使用列表的 10 个项目的简单移动平均值：

```
#include <list>

std::list<float> listDeltaMA;

float getDeltaMovingAverage(float delta)
{
    listDeltaMA.push_back(delta);
    if (listDeltaMA.size() > 10) listDeltaMA.pop_front();
    float sum = 0;
    for (std::list<float>::iterator p = listDeltaMA.begin(); p != listDeltaMA.end(); ++p)
        sum += (float)*p;
    return sum / listDeltaMA.size();
} 
```

# ruby - 如何存根使用 Ruby MiniTest 引发错误的方法？

> ID：10990622
> 
> 赞同：25
> 
> 时间：2012-06-12T04:38:42.483
> 
> 标签：ruby, minitest

我正在尝试测试模型方法引发错误时触发的 Rails 控制器分支。

```
def my_controller_method
  @my_object = MyObject.find(params[:id])

  begin
    result = @my_object.my_model_method(params)
  rescue Exceptions::CustomError => e
    flash.now[:error] = e.message       
    redirect_to my_object_path(@my_object) and return
  end

  # ... rest irrelevant
end 
```

如何获得 Minitest 存根来引发此错误？

```
it 'should show redirect on custom error' do
  my_object = FactoryGirl.create(:my_object)

  # stub my_model_method to raise Exceptions::CustomError here

  post :my_controller_method, :id => my_object.to_param
  assert_response :redirect
  assert_redirected_to my_object_path(my_object)
  flash[:error].wont_be_nil
end 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-11-23T15:46:12.543

```
require "minitest/autorun"

class MyModel
  def my_method; end
end

class TestRaiseException < MiniTest::Unit::TestCase
  def test_raise_exception
    model = MyModel.new
    raises_exception = -> { raise ArgumentError.new }
    model.stub :my_method, raises_exception do
      assert_raises(ArgumentError) { model.my_method }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-27T17:43:55.177

一种方法是使用 Mocha，Rails 默认加载它。

```
it 'should show redirect on custom error' do
  my_object = FactoryGirl.create(:my_object)

  # stub my_model_method to raise Exceptions::CustomError here
  MyObject.any_instance.expects(:my_model_method).raises(Exceptions::CustomError)

  post :my_controller_method, :id => my_object.to_param
  assert_response :redirect
  assert_redirected_to my_object_path(my_object)
  flash[:error].wont_be_nil
end 
```

# mysql - 程序在特定机器上运行时导致运行时错误

> ID：10990623
> 
> 赞同：1
> 
> 时间：2012-06-12T04:38:52.530
> 
> 标签：mysql, vb6, runtime-error

我有一个在 LAN 上运行良好的 VB 应用程序。服务器是 Windows 2003。我只将整个程序移到了其中一台 PC（XP + WAMP 服务器）上。该程序在本地机器上运行良好，但从另一个工作站运行时，出现以下错误：

> vb 运行时错误 -2147467259 (80004005) [mysql] [odbc 5.1 driver] 无法连接到 xxxx 上的 mysql 服务器 (10060)

xxxx 是用作服务器的 PC 的 IP。

我看到这个论坛上已经发布了类似的消息，但这些都与我的问题无关，因为我的程序在本地运行。VB6 程序使用相同的连接信息。

DB 用户已设置为允许来自任何主机的请求。

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:43:47.493

错误说`cannot connect`。这是网络或防火墙问题，而不是权限问题。

1.  看看能不能ping通服务器。
2.  看看有没有其他东西可以连接到服务器
3.  看看是否有其他 mysql 客户端可以连接。
4.  如果这是第一个尝试连接的 mysql 客户端，请检查服务器的日志以获取线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:31:43.900

首先，非常感谢 wallyk 和 Marc B 引导我检查端口...

这是答案：

实际上原来的 my.ini 有正确的设置。但我做了这两件事：

1.  在**mysqld**部分，我添加了行**enable-named-pipe**。
2.  在 Windows XP 防火墙设置中，我将端口 3306 添加为例外。这是造成我 3 天麻烦的罪魁祸首 :)

然后重新启动 WAMP 服务器，我们就完成了。

我[从 Microsoft 找到了这个链接](http://support.microsoft.com/kb/841251)，这让我想到了做这最后一步。

再次感谢所有这些投入！

# paypal - PayPal IPN / 通用 PayPal 应用程序设计

> ID：10990626
> 
> 赞同：0
> 
> 时间：2012-06-12T04:39:22.453
> 
> 标签：paypal, paypal-ipn

所以我正在做一个二手商品网站。也就是说，人们买卖二手商品的地方，我正在通过 PayPal 上的交易完成所有这些工作。

请记住，这是一个*二手商品网站*，这意味着*每个项目只有一个*，我有一个关于 PayPal 的 IPN 的问题。如果我在一天多的时间里没有收到 PayPal 的 IPN，我就根本不会收到 IPN，这是否合理？也就是说，当我想将项目标记为可用时，我显然想考虑是否有人购买了它们。但我知道这一点的唯一方法是通过 PayPal 的 IPN 服务。我听说这可能需要几个小时，但 IPN 需要几天才能通过吗？我不想仅仅因为有人将它添加到他们的购物车并忘记点击“结帐”而让某件商品几天和几天不可用。

基本上我的问题是......我如何设计我的应用程序，以便它不允许用户购买相同的物品，但有营业额，以便如果用户将物品放在购物车中并忘记它，另一个用户可以购买吗？

还有一个不太概念的问题：PayPal 发送 IPN 是否真的需要一个多小时左右的时间？

**编辑：我也意识到，如果没有 2 个用户购买相同商品的***某些*情况，可能没有节省时间的方法来完成此操作，但如果 99.9% 的时间没有发生这种情况，我可以将其委托给某些人我网站的客户服务部分。我只是想要一些专业的建议，因为我是在线市场的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:00:44.887

此处的 IPN 文档：[https ://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf)

我有自己的网上商店，IPN 响应通常在一小时内完成，我还没有看到一个需要更长的时间，而且大多数响应几乎是即时的。

在收到回复之前，您不应该减少数量 - 这将解决您放弃购物车的问题。如果您让 Paypal 处理数量，我想 Paypal 在处理付款之前不会减少数量。

# javascript - 如何从二进制字符串显示文件？

> ID：10990628
> 
> 赞同：0
> 
> 时间：2012-06-12T04:39:30.497
> 
> 标签：javascript, html, file, binaryfiles

如何显示二进制字符串中的文件？对于图像文件，可以使用`atob()`然后`<img src="data:image/png;base64,..`. 但是以 PDF 文件为例，是否有等价物？或者以某种方式对网络浏览器说`ReadItAs("content-type:application/pdf", binaryPdf);`我希望这很清楚。提前致谢。

**更新**

我试过这个：

```
 var metatag = document.getElementsByTagName("meta")[0];

    metatag.setAttribute("http-equiv", "Content-type");
    metatag.setAttribute("content", "application/pdf");
    document.body.innerHTML = binaryString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:47:10.727

在使用 HttpRequest 下载文件后，您可以选择直接通过 JS 代码呈现它...人们正在为 HTML5 制作 JS PDF 阅读器 - 请参见此处[http://andreasgal.com/2011/06/15/pdf-js/](http://andreasgal.com/2011/06/15/pdf-js/)

另一种选择是使用 iframe 选项嵌入它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:47:44.870

您是否要在浏览器中显示 pdf 文件，请使用 iframe

```
<iframe id="abcdef" src="stargeturl" style="width: 100%; height: 800px;">
    Your browser does <em>not</em> support <code>iframe</code>
</iframe> 
```

# java - IBM purequery 是否有任何有效的开源替代方案来查询内存中的集合？

> ID：10990632
> 
> 赞同：2
> 
> 时间：2012-06-12T04:40:19.060
> 
> 标签：java, data-structures, collections

我们是否有一些 IBM pureQuery 的开源替代品来查询 Java 集合框架的内存集合或复合 Java 对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T04:58:27.020

正如我的评论中提到的，我不完全确定我理解你的问题：我不确定你是否在问是否有 pureQuery 的 OSS 替代品以及 pureQuery 是否适用于 Java 集合框架的内存 DS，如果你想要一个在内存集合上工作的 OSS 替代方案，特别是 Java 集合框架。

但是，我会尝试一下...

# 持久层查询语言/框架

如果您正在寻找一种开源软件，用于与持久层进行基于查询的交互，显而易见的解决方案非常简单：

*   [Java 持久性查询](http://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html)语言，
*   [休眠查询语言（HQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)），
*   [Java 数据对象 (JDO) 查询语言 (JDOQL](http://db.apache.org/jdo/jdoql.html) ) 。

请注意，这些也可以用于内存数据库（如 H2 或 HSQLDb）。

# 集合查询语言/框架

但是，如果要查询集合，有几个项目，例如：

*   [java 查询语言 (JQL)](http://homepages.ecs.vuw.ac.nz/~djp/jql/)语言扩展：

    ```
    ArrayList<String> words = dict.getWords(Puzzle.MEDIUM);
    ArrayList<Integer> gaplengths = puzzle.getGapLengths();

    List<Object[]> matches = selectAll(
        String w : words, 
        Integer i : gaplengths | w.length() == i); 
    ```

*   [Java 的基于堆栈的查询语言 (sqbl4j)](http://code.google.com/p/sbql4j/)语言扩展：

    ```
    List<Product> products = getProductList();
    List<Product> expensiveInStockProducts = #{
        products 
        where unitsInStock > 0 and unitPrice > 3.00
    }; 
    ```

*   [Java 对象 SQL (JoSQL)](http://josql.sourceforge.net/)：

    ```
    List myObjs = getMyObjects ();
    Query q = new Query ();
    q.parse ("SELECT * FROM java.io.File WHERE name LIKE '%.java'");
    QueryResults qr = q.execute (myObjs);
    List res = qr.getResults (); 
    ```

*   [jxpath](http://commons.apache.org/jxpath/)，用于 XPath 表达式的不同方法：

    ```
    Address address = (Address)JXPathContext
        .newContext(vendor)
        .getValue("locations[address/zipCode='90210']/address"); 
    ```

*   Java 的函数式编程库提供了类似的特性，因为它们使您可以访问基本的函数式构造`filter`、、、`map`等……例如，使用`collect`：`transform`

    *   [谷歌番石榴](http://code.google.com/p/guava-libraries/)：

        ```
        Set<String> strings = buildSetStrings();  
        Collection<String> filteredStrings =
            Collections2.filter(strings, Predicates.containsPattern("^J")); 
        ```

    *   [函数式Java](http://functionaljava.org/)：

        ```
        Array<Integer> a = array(97, 44, 67, 3, 22, 90, 1, 77, 98, 1078, 6, 64, 6, 79, 42);
        final Array<Integer> b = a.filter(even); 
        ```

    *   [拉姆达J](http://code.google.com/p/lambdaj/)：

        ```
        // with normal interfaces:
        List<Person> buyersSortedByAges = sort(
            extract(
                select(sales, having(on(Sale.class).getValue(), greaterThan(50000)))
            ), on(Sale.class).getBuyer() 
        ), on(Person.class).getAge());

        // with fluent/chainable intefaces:
        List<Person> buyersSortedByAges = with(sales)
            .retain(having(on(Sale.class).getValue(), greaterThan(50000)))
            .extract(on(Sale.class).getBuyer())
            .sort(on(Person.class).getAge()); 
        ```

* * *

或者，也许您只是在寻找有关[使用 pureQuery 查询内存集合的](http://publib.boulder.ibm.com/infocenter/dstudio/v1r1m0/index.jsp?topic=/com.ibm.datatools.javatool.runtime.doc/topics/cpdqrunqrycol.html)教程？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:18:26.387

还有 CQEngine，它支持索引和查询：[CQEngine](http://code.google.com/p/cqengine/)。

有关更多背景信息，请参见类似问题：[How do you query object collections in Java (Criteria/SQL-like)?](https://stackoverflow.com/questions/93417/how-do-you-query-object-collections-in-java-criteria-sql-like/11712925#11712925)

# c# - 使用 C# 关闭草稿邮件而不保存在 Outlook 中

> ID：10990634
> 
> 赞同：0
> 
> 时间：2012-06-12T04:40:45.353
> 
> 标签：c#, c#-4.0, outlook-addin, outlook-2010

当我尝试在 Outlook 中关闭草稿邮件时，它会要求一个消息框保存、丢弃或取消。我想编写代码以自动丢弃它而不提示该消息。

如果我使用`mailItem.Save();`. 该消息框不会出现。但它将消息保存在我不想要的文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T05:42:23.197

因此，为了使它成为其他人看到的答案-也许您需要做的是以下事情：

1.  保存项目。
2.  关闭作曲家。
3.  删除项目。

这样您就不会在任何文件夹中拥有该项目，并且您仍然可以避免保存提示？

所以只需调用**Item.Delete();** 关闭作曲家后。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:36:13.100

试试下面的东西，我没有测试过下面的工作与否

```
Outlook.Application omApp = new Outlook.Application();
Outlook.NameSpace omNamespace = omApp.GetNamespace("MAPI");
Outlook.Recipient omUser = omNamespace.CreateRecipient("email1@abc.com");
omUser.Resolve();
if (!omUser.Resolved) return; 
Outlook.MAPIFolder omDrafts = omNamespace.GetSharedDefaultFolder(omUser, Outlook.OlDefaultFolders.olFolderDrafts);
Outlook.MailItem omMailItem = (Outlook.MailItem)omDrafts.Items.Add();
omMailItem.To = "email2@abc.com";
omMailItem.Subject = "Test";
omMailItem.Body = "Test email";
omMailItem.Save();
omMailItem.Move(omDrafts); 
```

# image - 添加到 web-app/images 文件夹的图像在 GRAILS 应用程序中得到 404

> ID：10990641
> 
> 赞同：1
> 
> 时间：2012-06-12T04:42:30.423
> 
> 标签：image, grails, http-status-code-404, grails-2.0

这让我发疯。

所以我有一个我正在开发的 grails 2.0 应用程序。今天我在 web-app/images 目录中添加了一个新的 png，但是由于某种原因，当我在浏览器中访问它时它没有显示出来。例如，当我将其粘贴到浏览器中时

```
http://localhost:8080/static/images/logo.png 
```

徽标已送达。我什至清除了我的缓存以确保没有为我提供缓存版本

然后我做了

```
http://localhost:8080/static/images/test.png 
```

我得到一个404。

然后我尝试在终端中卷曲两个网址并获得相同的结果。logo.png 返回图像数据，而 test.png 返回 404 html。

两个图像都在同一个目录中。我什至做了一个 ls -la 来检查权限，它们都是一样的。

奇怪的是它今天早些时候就已经送达了。无法弄清楚发生了什么变化。我什至将我的代码库恢复到早期版本，我得到了同样的错误。

任何建议，将不胜感激！这让我发疯。如此接近完成我正在研究的功能=（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:49:37.913

尝试使用 createLinkTo gsp 标签访问资源。

也可能是缓存问题。您是否尝试过重新部署您的 Web 应用程序？

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T03:40:24.690

^_^ 现在我可以为我解决这个问题。希望这能有所帮助。

我将资源插件从 1.1.6（集成在 Grails 2.2.1 中）更改为最新版本（1.2.RC2）并且它可以工作。

# python - wxpython：将光标设置为绝对屏幕位置并单击

> ID：10990643
> 
> 赞同：0
> 
> 时间：2012-06-12T04:42:44.437
> 
> 标签：python, wxpython, mouse

我在尝试让 WarpPointer 适合我的工作时遇到了一些麻烦。我正在尝试做的场景类似于记录用户的点击，然后在屏幕上重放它们。我已经能够毫无问题地记录屏幕动作和点击；但是，在重放用户录制的内容时，我遇到了困难。

```
def MoveCursorAndClick(self, e):
    # get the current screen position
    sp = self.GetPosition()
    p = self.getNextPosition() # returned in absolute x,y from screen rec
    self.WarpPointer(p.x - sp[0], p.y - sp[1])
    # wx.PostEvent(EVT_LEFT_DOWN, self.GetId()) 
```

显然，上面的代码是不正确的，因为 WarpPointer 似乎只在窗口内工作，而不是全屏。尝试将坐标从功能窗口移开也被证明是很麻烦的，因为它们似乎总是在 Y 方向上偏离大约 50 像素。我目前唯一的假设是我让这变得比它需要的更难，而且由于我对 wxpython 缺乏经验，我没有看到更好的原因。

此外，破坏的 PostEvent 行是我设法通过谷歌搜索的唯一东西，看起来像是将鼠标点击发送到可能是也可能不是另一个窗口的东西的正确方法。这甚至是正确的方向吗？

**更新** 如下所述，没有一个很好的跨平台方式来实现这一点。这是我所做的（在互联网上找到了不同的地方）：

```
def ClickScreenPositon(self, x, y):
    win32api.SetCursorPos((x,y))
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,x,y,0,0)
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,x,y,0,0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:09:43.017

我不认为你可以单独在 wxPython 中做到这一点。[如您所见， wx.Window.WarpPointer()](http://wxpython.org/docs/api/wx.Window-class.html#WarpPointer)只能将鼠标移动到由该窗口控制的区域。同样，您的`wx.EVT_LEFT_DOWN`调用将不起作用，因为您将 ID 设置为窗口，这意味着它是被点击的窗口，而不是在 (x,y) 处的点击。

经过一些简单的谷歌搜索后，我发现[这篇关于 wxPython](http://wiki.wxpython.org/Unit%20Testing%20with%20wxPython)中的单元测试的文章简要介绍了 GUI 级别的测试。这并不完全是你想要做的，但它在概念上是相似的。他们建议使用外部库来操作界面。他们注意到这种方法的主要问题是大多数用于模拟 GUI 交互的工具都在公司许可和/或平台相关。

那篇文章建议在 Windows 系统上使用[pywinauto](http://code.google.com/p/pywinauto/)。出于您的目的，[pywinauto.controls.HwndWrapper](http://pywinauto.googlecode.com/hg/pywinauto/docs/code/pywinauto.controls.HwndWrapper.html)似乎具有您需要的方法；`MoveMouse()`和`Click()`。如果您不使用 Windows 或需要跨平台支持，则需要研究不同的库。

基本上，您需要安装并导入 pywinauto 到您的 wxPython 应用程序中，并调用它的方法而不是 wxPython 的。只要跨平台兼容性不是问题，我认为这是您最简单、最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:34:33.723

wxPython 只有在光标位于 wxPython 生成的窗口、框架或小部件上时才能控制光标。当您离开 wxPython 应用程序的范围时，它会失去对鼠标的控制。那时您必须连接到操作系统。在 Windows 上，PyWin32 包可能是您最好的选择。

还有一个很酷的小项目，叫做 sikuli，如果你能弄清楚如何截取屏幕截图，它也可以工作：http: [//sikuli.org/](http://sikuli.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:21:13.113

我创建了开源应用程序 JW_Record_Playback 用作 python wxwindows 中的记录播放机制。它实际上使用TK / TCL作为外部资源。它在 Linux 上运行良好（在 Suse 和 Ubuntu 发行版中都经过测试）。

请检查： http: [//members.home.nl/wijnenjl/Record_Playback_Python_TclTk_INI_Wx_EN_01.html](http://members.home.nl/wijnenjl/Record_Playback_Python_TclTk_INI_Wx_EN_01.html)

# javascript - 更改 JavaScript 函数中的数组会更改函数外的数组？

> ID：10990647
> 
> 赞同：5
> 
> 时间：2012-06-12T04:43:37.380
> 
> 标签：javascript, arrays, object

为什么这两个脚本的行为不同？我想使用第一个脚本，但在第二个`drawData()`调用中它会改变`data`；这很奇怪，不是我想要发生的。第二个脚本没有这个问题。为什么会这样，我该如何修复第一个脚本？

第一个脚本没有改变`data`：

```
 var data = ["right"];

    function drawData(arrs, type) {
        if (type == "percentage") {
            arrs[0] = "omg";
        }
        console.log(data[0]); // Changed!?
    }
    drawData(data);
    drawData(data, "percentage");
```

第二个脚本：

```
 var data = "right";

    function drawData(arrs, type) {
        if (type == "percentage") {
            arrs = "omg";
        }
        console.log(data); // OK, not changed.
    }
    drawData(data);
    drawData(data, "percentage");
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-19T20:26:56.773

这是分配给局部变量和给定对象的变异之间的区别。

在这两段代码`arrs`中都是一个局部变量，不同于`data`. 但是 的*元素*和其他属性与`arrs`的完全一样`data`。无论您是通过还是通过访问它们，对这些属性值的更改（通常称为对象/数组的*突变*）都是可见的。这正是第一个脚本所做的。`arrs``data`

然而，第二个脚本不会更改 的属性值`arrs`，而是为 分配一个全新的值`arrs`，因此现在它不再与 共享任何属性`data`。这更加明显，因为`data`和`arrs`都是原始值，不能像上一段中解释的那样发生变异。但即使它们是对象或数组，您也会执行以下分配：

```
arrs = [1234]; 
```

它不会影响`data`。仅当您分配给属性/索引而不直接分配给`data`时才会受到影响。`arrs``arrs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:55:28.857

第一个变体修改作为参数传递给函数的对象（恰好是数组） - 所以这种变化可以在函数之外看到。第二个变体为函数参数分配新值（恰好是对数组的引用），但不改变数组本身。

# java - 比较两个字符串，其中一个偏移了一个位置

> ID：10990678
> 
> 赞同：0
> 
> 时间：2012-06-12T04:48:23.137
> 
> 标签：java, string, string-matching

我有两个字符串：

```
String s1 = "hello"; 
String s2 ="_hello"; 
```

当我比较它们时，我希望为这些字符串返回`true`（第二个字符串移动了一个位置）。

我应该使用哪种`String`操作方法？任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:50:38.470

您可以使用`contains()`String 类。

```
String s1 = "hello";
String s2 ="_hello";

if(s2.contains(s1))
   //true 
```

你也可以使用`subString()`

```
s2= s2.subString(1);
if(s2.equalsIgnoreCase(s1))
   //true 
```

是的，你也可以使用`indexOf()`

```
if(s2.indexOf(s1)>-1)
   //true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T04:52:12.457

您应该使用 indexOf 方法：

```
int index=s2.indexOf(s1);

if(index ==-1) // s1 is not present into s2. 
```

else index 是 s2 中匹配 s1 的第一个字符的索引。例如，如果：

```
String s1 = "hello"; String s2 ="_hello"; 
```

索引将为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:51:44.980

我还没有为 android 编程，所以对它持保留态度，但看看 String.indexOf()。我相信 Android 是基于 Java 的，所以这应该会有所帮助。

# html - 在 emacs 中，如何将相同的文本添加到多行？

> ID：10990681
> 
> 赞同：2
> 
> 时间：2012-06-12T04:48:52.623
> 
> 标签：html, emacs, wget, aquamacs

我有一个 HTML 文件，其中包含一堆指向整个数据库的链接。但是 URL 都写成：

```
<a href=/bw/examplefile.html> 
```

当我尝试使用 wget 下载所有链接时，我使用 --base 参数来设置 URL，但它似乎并不能很好地工作。因此，与其摆弄我知道我不会再使用的东西，我只想知道如何在 emacs 中轻松地将 URL 添加到每个链接对象。

我在 Mac 上使用 Aquamacs。不确定这是否有太大的不同，但它可能是有用的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T05:31:40.383

I expect the following is what you want, to turn your relative URLs into absolute URLs (and add the attribute quotes, which is a little nicer).

`M-x` `replace-regexp` `RET` `<a href=\(.+?\)>` `RET` `<a href="http://example.com\1">` `RET`

# javascript - Content.getSelection（）在选定的文本在iframe中不起作用？

> ID：10990690
> 
> 赞同：0
> 
> 时间：2012-06-12T04:50:22.780
> 
> 标签：javascript, firefox, firefox-addon

在 Firefox 扩展开发中，我想从 chrome 页面获取选定的内容，当我使用 content.getSelection() 时，它工作正常。

但如果所选文本在 iframe 中，则它不起作用。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:19:33.340

您需要调用已选择文本`getSelection()`的对象。`window`例如，如果`<iframe id="iframe">`内容文档中有一个，您将使用以下内容来获取该框架中的选择：

```
alert(content.document.getElementById("iframe").contentWindow.getSelection()); 
```

如果您不知道用户在哪里选择了文本并且想要查看所有帧，那么您应该从顶层开始递归地遍历它们，如下所示：

```
function getSelection(wnd)
{
  var result = wnd.getSelection();

  for (var i = 0; !result && i < wnd.frames.length; i++)
    result = getSelection(wnd.frames[i]);

  return result;
}

alert(getSelection(content)); 
```

# ios - 扩展核心数据 UITableView 部分，只有 1 行

> ID：10990694
> 
> 赞同：0
> 
> 时间：2012-06-12T04:50:59.033
> 
> 标签：ios, uitableview, core-data, expand

我有一个应用程序，它使用核心数据并`NSFetchedResultsController`创建一个`UITableView`包含 3 个部分的应用程序，所有部分都基于一个`NSString`名为`itemRange`. 我在创建或将项目放在部分中没有问题，但我想添加一个我不确定如何实现的特定功能。

我希望能够首先每个部分只显示 1 或 2 个项目，然后再有 1 个单元格显示“查看全部”，它会扩展该部分以显示所有项目。

关于如何实施的任何想法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:03:39.193

只需修改您的`numberOfRowsInSection`以显示所需的行数。使用您自己的变量（或其数组）来跟踪每个部分的展开状态。

然后修改`cellForRowAtIndexPath`以显示获取结果控制器提供的内容，或显示“查看全部”单元格。

# ajax - admin-ajax.php 的永久链接

> ID：10990695
> 
> 赞同：0
> 
> 时间：2012-06-12T04:51:13.777
> 
> 标签：ajax, wordpress, permalinks

我正在尝试使用 ajax 在我的 wordpress 站点中加载新页面，使用 wp_nav_menu 和永久链接设置，例如：/wp-admin/admin-ajax.php?post_name=%postname%/ 将请求路由到 admin-ajax where我可以正确处理它（根据 wordpress 文档。）但是 wordpress 只是忽略了我的永久链接并坚持使用其默认链接设置。

这是执行此操作的正确方法还是我会更好地重写 .htaccess 文件，这是否会导致更新到新版本的 wp 时出现问题？

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:34:00.430

CSS Tricks 的 Chris 有一个很棒的 AJAX 页面加载教程，关于他的解决方案操作系统最好的一点是它仍然适用于不支持 JavaScript 的旧浏览器。

# 脚本

```
<script type="text/javascript">
/*
 * Your navigation bar, can be "document" or body if you want to 
 * apply to every link on your site
*/
var $navigation = $("#site-menu");

//Your main content that will be replaces
var body = "#page-body";
var $body = $(body);

$navigation.delegate("a", "click", function() {
    window.location.hash = $(this).attr("href");
    return false;
});

$(window).bind('hashchange', function() {
    var newHash = window.location.hash.substring(1);
    if(newHash) {
        $body.fadeOut(200, function() {
            $body.hide().load(newHash + " " + body, function() {
                $body.fadeIn(200, function() {
                });
            });
        });
    };
});

$(window).trigger('hashchange');
</script> 
```

# 菜单

像往常一样添加您的菜单，确保添加站点菜单 id 一些标签，该标签包含您想要 ajax 加载的菜单链接。

```
<div id="site-menu">
    <?php wp_nav_menu(); ?>
</div> 
```

# 细节

$navigation 下的所有链接都将添加一个单击事件，该事件将更新窗口 url 哈希。该窗口正在侦听哈希更改，并将使用哈希值发出 AJAX 请求以重新加载 $body html。

# 优势

*   历史（后退和前进）导航将起作用：
*   同一个站点将适用于支持 JavaScript 的浏览器和不支持 JavaScript 的浏览器；
*   如果您复制过去的 url，脚本将加载正确的页面；
*   因为我们使用的是委托函数，所以通过 ajax 加载结果添加的任何链接也将添加点击事件

# 坏处

*   您不能再在您的网站上使用锚点

有关更多信息和示例，请参阅：[http ://css-tricks.com/video-screencasts/85-best-practices-dynamic-content/](http://css-tricks.com/video-screencasts/85-best-practices-dynamic-content/)

# css - 如何在 wordpress 帖子缩略图中显示类别？

> ID：10990697
> 
> 赞同：0
> 
> 时间：2012-06-12T04:51:18.853
> 
> 标签：css, wordpress, html

大家好，希望你们一切都好。我正在为我的 wordpress 网站上构建的滑块寻找一些帮助。我似乎无法弄清楚如何显示滑块中显示的每个帖子的类别并将其突出显示。有谁知道我怎么能做到这一点？我当前的代码如下

```
<div id="slides">       
    <?php if (function_exists('yg_randomposts')) {
         $parameters = array(
            'limit' => 10, //Number of posts to show
            //'excerpt' => 60,  //excerpt length (letters)
        'actcat' => true, //get posts current 
            'cusfield' => 'post-image', //custom field name of thumbnail image
            'w' => 250,  //width
            'h' => 250, //height
            'firstimage' => true,  //get first image of post content
            'atimage' => true, //get first attached image of post
            'defimage' => 'http://watchthefeed.com/wp-content/uploads/2012/04/random-post-default.jpg' //default thumbnail image
        );

        //print random posts
        yg_randomposts($parameters);
        } ?>
</div><!--slider container--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:25:01.277

会有`wp_get_post_categories`帮助吗？[您可以在Codex](http://codex.wordpress.org/Function_Reference/wp_get_post_categories)中阅读有关它的更多信息，包括可以传递的用法和参数。

# php - php中的数据库连接

> ID：10990699
> 
> 赞同：-1
> 
> 时间：2012-06-12T04:51:38.947
> 
> 标签：php, mysql, database, class, connection

我有一个类名 db_access 扩展为运行查询的 db_connection；我的类 db_access 有一个名为 result 的方法，你可以看到我只是在我的类中回显属性名称查询，它运行正常。现在我的问题出在 db_connection 中，如何在构造函数中自动运行主机连接？我完成了名为 connect() 的函数并在 run() 中调用它，但我希望它自动运行，（顺便说一下 db_access 也是从某个类扩展的）请帮忙。

```
class db_access extends db_connection
{       
    public function result()
    {           
                echo $this->query;
            $this->run();           

    }       
}

class db_connection{    
      private $link;      

      public function __construct() {    
        $this->link=mysql_connect('localhost','root','') or die(mysql_error());         
        mysql_select_db('jsample');
      }

    public function run(){
        echo $this->query;
        mysql_query($this->query) or die(mysql_error());    
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:08:14.453

一方面，在你的`db_connection::run()`你应该传递`$this->link`给`mysql_query`：

```
public function run()
{
    echo $this->query;
    mysql_query($this->query, $this->link) or die(mysql_error());    
} 
```

其次，您应该检查是否`mysql_select_db()`返回`true`或`false`：

```
if (false === mysql_select_db('jsample', $this->link)) {
    die("Could not select database");
} 
```

第三，你在哪里设置`$this->query`？

最后，您应该使用`PDO`or`mysqli`代替。家庭功能已被弃用，`mysql_`最终将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:11:03.047

您永远不会设置“查询”属性。所以我认为你遗漏了一些代码。我敢打赌，您还为 db_access 遗漏了一个 __construct。在 PHP 中，您必须手动链接您的构造函数。所以在 db_access::_*构造中你需要调用 parent::* _construct()

请参阅[__construct](http://id.php.net/manual/en/language.oop5.decon.php#object.construct)上的 PHP 文档。

# javascript - 避免服务器调用 HTML 对象样式显示属性更改

> ID：10990700
> 
> 赞同：0
> 
> 时间：2012-06-12T04:51:40.367
> 
> 标签：javascript, html, pdf, object

应该怎么做才能避免对 pdf 的服务器请求？我试过`visibility=hidden`和`width=0`.

```
<object class='pdfClass' data='"+conventionId+"/showPdf.html' width='100%' height='600'></object>

function toggleConv() {
    if (...) {
        document.getElementById(conventionId).style.display = 'none';
    } else {
        document.getElementById(conventionId).style.display = ''; //causes a refresh
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:55:29.363

如果它在 HTML 中，它将加载。据我所知，阻止请求的唯一真正方法是在代码中动态添加对象的 url（甚至添加对象本身）：

```
if (...) {
    // Add the data tag here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:04:57.307

**编辑：**

经过测试，我发现以下内容在 Firefox 13 中无需重新加载即可工作：

```
<object id="test" class='pdfClass' data='https://web3.unt.edu/riskman/PDF/Guidelines_on_Staphylococcal_Infections-Athletics__Revised__06-22-06.pdf' width='100%' height='600'></object>

function toggleConv(o){
    var test = document.getElementById('test');

    if (o == true){
        test.style.width = 0;
        test.style.height = 0;
    } else {
        test.style.width = '100%';
        test.style.height = '600px';
    }
} 
```

[http://jsfiddle.net/userdude/KnEYC/2/](http://jsfiddle.net/userdude/KnEYC/2/)

* * *

*原始回复。*请注意，元素的`height`and`width`也需要切换到很少或没有，以防止它继续占用相同的空间。

一种技术是通过将其放置在屏幕外来隐藏它：

```
#test {
    position: relative;
}

function toggleConv(o){
    if (o == true){
        document.getElementById('test').style.left = '-10000px';
        document.getElementById('test').style.top = '-10000px';
    } else {
        document.getElementById('test').style.left = '';
        document.getElementById('test').style.top = '';
    }
} 
```

[http://jsfiddle.net/userdude/KnEYC/](http://jsfiddle.net/userdude/KnEYC/)

# knockout.js - 在 KnockoutJS 中，如何根据观察值动态禁用或启用按钮？

> ID：10990702
> 
> 赞同：1
> 
> 时间：2012-06-12T04:51:46.357
> 
> 标签：knockout.js

我想禁用表单中的按钮，直到选中复选框。我正在查看 Knockout`attr`绑定，但它仅控制元素上属性的值，而不是该属性是否应附加到元素。

这是我尝试过的似乎不起作用的方法：

```
<a href=#" data-bind="attr: $root.isChecked() ? {} : { 'disabled' : 'disabled' }">Save Changes</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T05:03:06.370

您可能希望使用`checked`针对视图模型上的布尔值的绑定来绑定您的复选框，然后您将在按钮上使用`enable`或绑定。`disable`

[http://knockoutjs.com/documentation/enable-binding.html](http://knockoutjs.com/documentation/enable-binding.html)

示例：http: [//jsfiddle.net/rniemeyer/M6BzW/](http://jsfiddle.net/rniemeyer/M6BzW/)

# java - 使用主键更新表，在许多子表中用作外键

> ID：10990703
> 
> 赞同：0
> 
> 时间：2012-06-12T04:52:00.583
> 
> 标签：java, mysql

我想通过java更新一个表（使用mysql）。

```
I have a Test table with structure

id(pk)  name address 
```

还有另一张桌子

```
Practice with following structure

    p_id  id(fk)   branch 
```

现在我想更新测试表，但是根据外键约束我会得到外键约束

> “无法删除或更新父行：外键约束失败

" 因为它也在子表中使用。那么如果我想更新我的测试表，如何仍然更新它？

我正在尝试这种方式。

```
UPDATE Test SET  Test.id=1,NAME='XYZ' 
```

那么我是否需要删除外键约束，然后根据需要更新我的表并再次重新应用这些约束？

在这种情况下，我应该如何更新我的测试表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:10:12.633

我认为你想要做的是：

`UPDATE Test SET NAME='XYZ' WHERE id = 1`

如果这样做`UPDATE Test SET id=1, Name = 'XYZ'`，您将尝试将每条测试记录设置为`id=1`, 和`Name = 'XYZ'`。

查询无疑会失败，因为您不能有超过一行`id=1`.

如果您有一个带有 的测试记录`id=3`，并且您有一个引用该测试记录的练习记录，并且您的 SQL 命令现在尝试将所有 id 更改为 1，则会出现外键约束失败。

因此，外键约束失败。

你确定你有正确的 SQL 查询吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:17:16.270

基本上我从您的陈述`,UPDATE Test SET Test.id=1,NAME='XYZ'`中了解到，您正在尝试更新主键以及数据。

如果您想做上述操作，我建议您执行以下操作。

算法：

第 1 步：使用新 PK 添加新记录
第 2 步：使用新 PK 更新孩子
第 3 步：删除旧记录。

```
 insert into test(id,name,address) values(5,'name','address');
          --where 5 is your new PK.

    --Updating the child table
    update practice set p_id=5 where p_id=1 
          --where 1 is your old id in Test.

    --delete the record
    delete from test where id=1 
```

希望这可以帮助。

# python - 没有运行 Python Django 的 Azure 免费网站

> ID：10990706
> 
> 赞同：1
> 
> 时间：2012-06-12T04:52:41.387
> 
> 标签：python, django, azure, azure-web-app-service

由于 Azure 现在为我们提供了 10 个免费网站，我想我会尝试以 Django 的形式尝试一些新的东西。

我使用 jetbrains 的 PyCharm 创建了一个新的 Django 站点。在 Azure 上创建了一个空站点，添加了一个 MySQL 数据库并在 settings.py 文件中设置了连接字符串。然后我运行了 syncdb 命令，它问了我所有正确的问题并创建了表。我启动了 webmatrix，告诉它打开一个基于文件夹的站点，并给它 Django 应用程序的路径。现在我不知道如何告诉它使用 python 作为 web 请求的处理程序？有谁知道这是否可能？azure 网站上的指南用于部署到虚拟机，而不是免费的网站魔法。我尝试从 helicon tech (http://www.helicontech.com/zoo/) 安装模板，但它在 helicon 依赖项上一直失败。我认为这是因为我使用的是 Win 8 预览版。

从这个页面的 Windows 选项卡上的东西来看[https://www.windowsazure.com/en-us/develop/python/tutorials/web-app-with-django/](https://www.windowsazure.com/en-us/develop/python/tutorials/web-app-with-django/)我不怀疑这很有可能，嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯嗯

虽然总有 IronPython 和 MVC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:12:16.420

Looks like it does support creating Django based projects under the free tier.

> Windows Azure Web Sites provide limited free hosting and rapid deployment – and now you can use Python!

[http://www.windowsazure.com/en-us/develop/python/tutorials/web-sites-with-django/](http://www.windowsazure.com/en-us/develop/python/tutorials/web-sites-with-django/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:13:36.093

目前，您可以在 VM 和“云服务”（webrole）上下文中执行 Django：

[https://www.windowsazure.com/en-us/develop/python/tutorials/web-app-with-django-and-mysql/](https://www.windowsazure.com/en-us/develop/python/tutorials/web-app-with-django-and-mysql/)

和

[https://www.windowsazure.com/en-us/develop/python/tutorials/django-with-visual-studio/](https://www.windowsazure.com/en-us/develop/python/tutorials/django-with-visual-studio/)

正在努力支持“网站”。

# wordpress - 将普通的 Wordpress Post Loop 与 WP_User_Query 相结合

> ID：10990710
> 
> 赞同：0
> 
> 时间：2012-06-12T04:52:54.650
> 
> 标签：wordpress

有人可以告诉我是否可以将普通的 wordpress 循环（帖子）与用户结合起来？例如，在主页上，它将循环通过帖子和用户配置文件？

我已经阅读了 WP_User_Query 并且我希望我可以将它与 WP_Query 或其他东西一起使用。

我想要做的是让帖子和用户个人资料都显示在主页和搜索结果中。

任何想法，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:41:00.360

当然，您只是为用户准备的吗？

[http://codex.wordpress.org/Function_Reference/wp_list_authors](http://codex.wordpress.org/Function_Reference/wp_list_authors)

`<?php wp_list_authors( $args ); ?>`

# java - Expandable ListView 中不同组的不同布局

> ID：10990711
> 
> 赞同：4
> 
> 时间：2012-06-12T04:53:04.977
> 
> 标签：java, android, expandablelistview, android-tablelayout

我需要在我的应用程序中使用可扩展的列表视图，其中每个组都有不同的表格布局。我想为表中的每一行设置 onClick 侦听器。

> 如何在可扩展的列表视图中为不同的组设置不同的布局？
> 
> 或者是否可以通过动态添加行（扩展）和删除它们（隐藏）来使用表格布局执行与可扩展列表视图相同的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:25:27.560

`ExpandableListAdapter`您可以根据例如创建自己的`BaseExpandableListAdapter`。接下来，您应该重写该`getChildView`方法，以便所需的子项具有所需的布局。这是一个简短的示例：

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {
public ArrayList<String> groupItem;
public ArrayList<Object> childItem;
public LayoutInflater minflater;

public MyExpandableListAdapter(ArrayList<String> grList,
            ArrayList<Object> childItem, Context context) {
        groupItem = grList;
        this.childItem = childItem;
        this.context = context;
        minflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

@Override
    public View getChildView(int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        if (convertView == null) {
            if (groupItem.get(groupPosition).equals("desired_group_name")) {
                convertView = minflater.inflate(R.layout.desired_layout, null);
            } else {
                convertView = minflater.inflate(R.layout.other_layout, null);
            }
        }
}
} 
```

如果这个答案不清楚，我可以为您提供整个课程，但是在 Web 上很容易找到示例。

这是我项目中的整个课程。我知道 convertView 应该是可重用的，但是当列表折叠然后重新打开时，我的视图顺序有问题。我只有几个元素，所以从性能角度来看这不是问题。

```
package pl.psnc.iip.hne.android.hneclient.adapter;
import java.util.ArrayList;
import pl.psnc.iip.hne.android.hneclient.R;
import pl.psnc.iip.hne.android.hneclient.json.Device;
import pl.psnc.iip.hne.android.hneclient.json.Devices;
import pl.psnc.iip.hne.android.hneclient.listeners.ImageViewRegisteredListener;
import pl.psnc.iip.hne.android.hneclient.utility.ConnectionUtils;
import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.CheckedTextView;
import android.widget.ImageView;
import android.widget.TextView;

public class DeviceExpandableListAdapter extends BaseExpandableListAdapter {

public ArrayList<String> groupItem;
public ArrayList<Device> tempChild;
public ArrayList<Object> childItem;
public LayoutInflater minflater;

ArrayList<ImageViewRegisteredListener> ivrListeners = null;
public Activity activity;
public Context context;
int idIterator;

public void addImageViewRegisteredListener(
    ImageViewRegisteredListener listener) {
if (!ivrListeners.contains(listener)) {
    ivrListeners.add(listener);
}
}

public void removeImageViewRegisteredListener(
    ImageViewRegisteredListener listener) {
if (ivrListeners.contains(listener)) {
    ivrListeners.remove(listener);
}
}

public DeviceExpandableListAdapter(ArrayList<String> grList,
    ArrayList<Object> childItem, Context context) {
groupItem = grList;
idIterator = 0;
ivrListeners = new ArrayList<ImageViewRegisteredListener>();
this.childItem = childItem;
this.context = context;

minflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

public void setInflater(LayoutInflater mInflater, Activity act) {
this.minflater = mInflater;
activity = act;
}

public int findAppropriateImageForDevice(String type) {
int id = -1;
if (type.equals(Devices.PLOGG)) {
    id = R.drawable.plogg;
} else if (type.equals(Devices.RFID)) {
    id = R.drawable.rfid;
} else if (type.equals(Devices.BARRIER)) {
    // id = -1;
} else if (type.equals(Devices.TEMPLIGHT)) {
    // id = -1;
}
return id;
}

@Override
public Object getChild(int groupPosition, int childPosition) {
return (Device) ((ArrayList<Device>) childItem.get(groupPosition))
    .get(childPosition);
}

@Override
public long getChildId(int groupPosition, int childPosition) {
return 0;
}

@Override
public View getChildView(int groupPosition, final int childPosition,
    boolean isLastChild, View convertView, ViewGroup parent) {
tempChild = (ArrayList<Device>) childItem.get(groupPosition);
Device device = tempChild.get(childPosition);
Log.i(this.getClass().getName(), device.getIp());
if (groupItem.get(groupPosition).equals(Devices.PLOGG)) {
    int newId = -1;
    Integer oldId = ConnectionUtils.getInstance().getPowerIndicatorHT()
        .get(device.getIp());
    if (oldId != null) {
    newId = oldId;
    } else {
    ++idIterator;
    newId = idIterator;
    ConnectionUtils.getInstance().getPowerIndicatorHT()
        .put(device.getIp(), newId);
    }
    convertView = minflater.inflate(R.layout.plogg_item, null);
    ImageView powerIndicator = (ImageView) convertView
        .findViewById(R.id.powerIndicator);

    powerIndicator.setId(newId);

    Integer foundId = ConnectionUtils.getInstance()
        .getPowerIndicatorHT().get(device.getIp());
    if (foundId != null) {
    for (ImageViewRegisteredListener listener : ivrListeners) {
        listener.imageViewRegistered(convertView, foundId,
            device.getIp());
    }
    }

    Log.i(DeviceExpandableListAdapter.class.getName(), "newId: "
        + newId);

} else {
    convertView = minflater.inflate(R.layout.device_item, null);
}
TextView textTop = null;
textTop = (TextView) convertView.findViewById(R.id.toptext);
TextView textBottom = null;
textBottom = (TextView) convertView.findViewById(R.id.bottomtext);

textTop.setText(device.getIp());
textBottom.setText(device.getDescription());

int id = findAppropriateImageForDevice(device.getType());
ImageView image = (ImageView) convertView.findViewById(R.id.icon);
if (id != -1) {
    image.setImageResource(id);
} else {
    image.setImageResource(R.drawable.ic_launcher);
}

return convertView;
}

@Override
public int getChildrenCount(int groupPosition) {
return ((ArrayList<String>) childItem.get(groupPosition)).size();
}

@Override
public Object getGroup(int groupPosition) {
return null;
}

@Override
public int getGroupCount() {
return groupItem.size();
}

@Override
public void onGroupCollapsed(int groupPosition) {
super.onGroupCollapsed(groupPosition);
}

@Override
public void onGroupExpanded(int groupPosition) {
super.onGroupExpanded(groupPosition);
}

@Override
public long getGroupId(int groupPosition) {
return 0;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
    View convertView, ViewGroup parent) {
if (convertView == null) {
    convertView = minflater.inflate(R.layout.group_row, null);
}
CheckedTextView ctv = (CheckedTextView) convertView
    .findViewById(R.id.textView1);
ctv.setText(groupItem.get(groupPosition));
ctv.setChecked(isExpanded);
return convertView;
}

@Override
public boolean hasStableIds() {
return false;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
return true;
}

} 
```

它实际上是这样的：

![ExpandableListAdapter 的视图](../Images/11ade254cffd78b0eddfa170841aebff.png)

# iphone - 如何在 alertview ios 中删除 %20

> ID：10990717
> 
> 赞同：3
> 
> 时间：2012-06-12T04:54:05.927
> 
> 标签：iphone, ios, uiwebview, uialertview

在 ios alertview 我有 %20 符号如何删除它..

![在此处输入图像描述](../Images/ba16f189511819f1aaa6a2d1e5141e94.png)

这是我的代码

```
NSString *titile = result;
NSString *notifiText=txtresult;

alertView = [[UIAlertView alloc]initWithTitle:title message:notifiText delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil, nil];
                [alertView show] 
```

我只想要这样的输出而不是 %20 我想要空间..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T04:59:06.630

由于您可能从 Web 或 JSON/XML 响应中检索警报文本，因此该字符串以“百分比转义”编码。您需要在显示警报之前删除它们。

幸运的是，NSString 有一个方便的方法，名为[`stringByReplacingPercentEscapesUsingEncoding`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByReplacingPercentEscapesUsingEncoding%3a)（我已经链接了 Apple 的文档）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T05:01:20.747

您必须从 NSURLConnection 或某些 Web 服务获取消息文本，请尝试使用以下内容：

```
notifiText = [notifiText stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

看[**`stringByReplacingPercentEscapesUsingEncoding:`**](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByReplacingPercentEscapesUsingEncoding%3a)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-20T09:45:35.253

iOS 7（和 OS X 10.9）中引入了一种称为[stringByRemovingPercentEncoding的方法](https://developer.apple.com/reference/foundation/nsstring/1409569-stringbyremovingpercentencoding?language=objc)

它自动使用`NSUTF8StringEncoding`.

# sql - 不使用别名从多个表中获取具有相同名称的列数据

> ID：10990721
> 
> 赞同：0
> 
> 时间：2012-06-12T04:54:48.553
> 
> 标签：sql, sql-server, join

我有两个具有相同列名的表，但它们与任何主外键无关。它们是两个不同的列。在使用 join 时，我希望结果显示两个列及其实际名称。我收到错误为“yy”指定了多次“xx”列。我知道这可以通过使用别名来解决，但是还有其他解决方案可以让我们使用实际名称获得结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:03:21.253

你应该能够做到

```
SELECT x.foo, y.foo FROM x, y 
```

# jquery - 使用 JSON 时我应该使用 JSON 和最佳实践吗？

> ID：10990727
> 
> 赞同：1
> 
> 时间：2012-06-12T04:55:37.940
> 
> 标签：jquery, ajax, json

我正在使用 Silverstripe 开发一个站点，该站点的一部分需要类似于此的交互式地图 - [http://www.straytravel.asia/south-east-asia-bus-travel/](http://www.straytravel.asia/south-east-asia-bus-travel/)

我目前正在使用 AJAX 访问每个对象的所有信息（包括天数、价格、通行证名称等），这会改变 onmouseover 工作正常但是在浏览多个项目时加载成为一个问题。

我想在本地存储每次传递的信息，这样我可以更快地检索信息。我没有在项目中使用过 JSON，我想知道它是否是最好的解决方案。我目前能够以 JSON 对象的形式检索所有传递信息，但我不知道应该如何使用它。存储为 javascript 变量并通过一些 jQuery 调用访问信息是一个好主意，还是我应该以不同的方式解决这个问题？有没有人有我可以解决的好例子？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:13:37.470

JSON 作为消息格式是 AJAX 的事实标准。它更简洁，更容易解析为 JavaScript 对象，并且 jQuery 可以很好地使用它（例如，使用`.ajax`并将其设置`dataType`为“json”将指示 jQuery 尝试自动将生成的消息解析为来自 JSON 的对象）。

一旦您收到 JSON 消息并将其解析为对象，“存储”是主观的。如果您只是保留对您已经下载的对象的引用以避免再次下载它们，您可能只需要一个地图对象来查找并保留引用。

假设您正在使用某些标识符查找信息，这是一个粗略的示例：

```
var infocache = {}; // keeps copy of previously retrieved info messages

function displayInfo(infoId) { // called when you want to display info, using some identifier
   var callback = function() {
       var info = infocache[infoId];

       // do something with your info object... display in HTML template or whatever.
   };

   if (infocache[infoId]) { 
     callback();
     return;
   }

   $.ajax({
      url:'/myapi/info/get', 
      data: {id: infoId }, 
      dataType:'json', 
      type:'POST', 
      success: function(result) {
             infocache[infoId] = result;
             callback();
           }
     }); 
} 
```

# android - 安卓。金属探测器

> ID：10990728
> 
> 赞同：3
> 
> 时间：2012-06-12T04:55:51.097
> 
> 标签：android

我刚刚观看了这个展示应用程序的视频：

[https://www.youtube.com/watch?v=2qM3Zps_0pE&feature=player_embedded](https://www.youtube.com/watch?v=2qM3Zps_0pE&feature=player_embedded)

3 点 34 分。它在世界范围内如何检测金属？我无法在网上找到任何关于它的信息。谁能给我解释一下？也许提供一些代码或其他东西......

谢谢。

**编辑**

这怎么不是一个真正的问题？这是一个与编程相关的问题，询问您如何使用 Android 设备检测金属。我只是不明白你们中的一些人:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:07:56.747

好吧，您可以使用磁场传感器，我认为他们在该视频中使用的是磁场传感器。

[http://developer.android.com/reference/android/hardware/GeomagneticField.html](http://developer.android.com/reference/android/hardware/GeomagneticField.html)

如果您无法使其正常工作，请发布您的代码，我们可以为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:18:20.313

在视频中，很明显该设备正在测量微型特斯拉 (uT) .. 哈哈，我不知道 Android 有一个名为的类`GeomagneticField`太酷了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:59:55.270

除了 GeomagneticField 类之外，还有 SensorManager 和 TYPE_MAGNETIC_FIELD。

[http://developer.android.com/reference/android/hardware/SensorManager.html](http://developer.android.com/reference/android/hardware/SensorManager.html)

当然，并不是每个设备实际上都会有一个磁力计。它不是 Android 生态系统中支持最广泛的功能。

# java-native-interface - JNI DestroyJavaVM() 在退出时挂起主机应用程序

> ID：10990729
> 
> 赞同：4
> 
> 时间：2012-06-12T04:55:51.830
> 
> 标签：java-native-interface

退出我的本机 C++ 应用程序时，我对 DestroyJavaVM() 进行了 JNI 调用，但它挂起......最终，一旦 Java 意识到资源不再使用，应用程序将关闭（大约 10 到 15 分钟）。不知道它为什么挂起，但我假设在 JVM 端有一些对象没有释放内存。有什么方法可以在 JNI 方面强制进行垃圾收集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T05:34:33.357

从[JNI 规范](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html#destroy_java_vm)的相关部分：

> 如果当前线程没有附加，VM 附加当前线程，然后等待，直到当前线程是唯一的非守护用户级线程。

# c# - 使用 Roslyn 2012 年 6 月 CTP 在 Visual Studio 2012 RC 中更改 C# 交互式窗口的字体和颜色

> ID：10990732
> 
> 赞同：0
> 
> 时间：2012-06-12T04:56:14.273
> 
> 标签：c#, visual-studio-2012, roslyn

默认设置适用于浅色主题，但在深色设置下，默认消息文本保持黑色（实际上错误消息文本颜色也保持不变，但它是红色的，所以没关系）。基本上它看起来与相关问题中的完全一样，但在这种情况下，我使用的是 VS 2012。

> **相关**
> [有没有办法在 Roslyn CTP 中更改 C# Interactive 窗口的字体和颜色？](https://stackoverflow.com/questions/8155616/is-there-a-way-to-change-fonts-and-colors-for-the-c-sharp-interactive-window-in/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:11:13.127

尽管我们确实计划这样做，但我们还没有做任何工作来自动支持黑暗主题。

与此同时，我们所有项目的工具/选项/环境/字体和颜色中都应该有条目，尽管自 10 月 CTP 以来有几个项目的名称发生了变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:47:18.493

在 2012 年 6 月的 CTP 中，您可以使用“文本编辑器”下的以下内容设置 C# 交互式窗口输出字体和颜色：

```
Roslyn - Interactive Window Error Output
Roslyn - Interactive Window Output 
```

输入字体和颜色由普通文本编辑器设置控制。

# javascript - 即使在添加 jQuery 库后，jQuery 中的标签功能也不起作用

> ID：10990734
> 
> 赞同：0
> 
> 时间：2012-06-12T04:56:58.280
> 
> 标签：javascript, jquery

我正在尝试向我的网站添加选项卡以浏览黑白两个子菜单。基本上，当您单击“突出显示”或“新闻”时，该部分中会出现一组新元素。

我添加了 jquery 库：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

但是当我检查控制台时，我仍然收到消息“未捕获类型错误：对象 [对象对象没有方法'选项卡'”未定义。

我添加了库：

```
<script src="public/scripts/applicat.js" type="text/javascript"> </script> 
```

但是当我检查控制台的'$（“body”）并返回一个'null'。（网站上传的文件有这个applic.js文件）

我已经尝试了所有方法，但似乎无法弄清楚如何添加选项卡方法，并且 jQuery 链接到我的 HTML 也没有问题。

这就是 tabs 函数的调用方式（就在正文结束之前）：

```
<script type="text/javascript" charset="utf-8">
jQuery().ready(function() { 
jQuery("#discussion-sections > nav ul").tabs("#discussion-sections > section");
});
</script> 
```

// 额外的问题你知道如何扩展标签页眉的长度以使水平线穿过页面吗？我尝试在定义选项卡的 UL 中添加一个边框底部，但在这种情况下，它甚至会在所选选项卡下方的区域中添加一条线。

谢谢，路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:24:27.997

只需使用它`http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js`，它就会得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:05:35.000

改变

```
<script src="public/scripts/applicat.js" type="text/javascript"> 
```

至

```
<script src="public/scripts/applicat.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:00:51.190

“未捕获的类型错误：对象 [对象对象没有方法'选项卡'”未定义。：-

该库未正确调用。请调用 document.ready 函数中的选项卡方法

# delphi - 如何在 Windows 7（32 位）中安装 Delphi 4

> ID：10990746
> 
> 赞同：0
> 
> 时间：2012-06-12T04:58:38.567
> 
> 标签：delphi, windows-7, delphi-4

我正在尝试在 Windows 7 中安装 Delphi4。我是使用 delphi 的新手。当我尝试对其进行安装时，引发了以下错误。" **config.nt. 系统文件不适合运行 ms-dos 和 microsoft windows 应用程序**"

我在谷歌中查找并尝试了以下步骤。

1.  我试图检查 system32 文件夹中所有 3 个文件 config.nt、autoexec.nt、command.com 的天气。他们都在场。

2.  比我尝试编写从谷歌获取每个文件内容的所有文件并保存它们。然后我用新文件（config.nt、autoexec.nt、command.com）替换了系统 32 中的文件。即使在那之后我也无法安装 Delphi 4。同样的错误信息不断出现。

3.  比我尝试了以下步骤。a. 单击开始，指向设置，然后单击控制面板。b. 双击系统，单击高级选项卡，然后单击环境变量。c.在 User_Name 的用户变量列表中，单击 TMP，然后单击编辑。d.在变量值框中，键入 c:\windows\temp，然后单击确定三次。或者，在“变量值”框中键入不使用长文件名的任何文件夹的路径。e.关闭控制面板。但这也没有帮助。我完全不知道接下来应该尝试什么。如果有任何机构可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:54:16.533

在 Windows Vista 上对我有用（在 Windows 7 上没有尝试过）是为 Delphi 4 创建 SETUP.EXE 的快捷方式，并将快捷方式配置为使用“Windows NT 4”的兼容模式。为此，请打开快捷方式的属性，选择选项卡“兼容性”，选中“以兼容模式运行此程序”并选择所需的操作系统。

使用此快捷方式启动安装程序允许我安装 Delphi 4。

或者，正如其他人所建议的，在 Windows 7 (http://www.microsoft.com/windows/virtual-pc/) 中使用免费的 Windows XP 模式 VM。

# php - 如何使用正则表达式获取匹配格式？

> ID：10990748
> 
> 赞同：0
> 
> 时间：2012-06-12T04:58:39.520
> 
> 标签：php

我有一个“名称+版本名称”格式的示例代码，如下所示：

```
Nokia Belle OS
Symbian Anna OS
Symbian Belle OS, upgradeable to Belle FP1
Symbian OS v9.4, Series 60 rel. 5 
```

我使用此代码获取名称和版本名称：

```
<?php
preg_match_all('/(\b+)\s*OS(\s|,)(\b+)/i', $array[], $arr); // with array[] is name of this text

$name = $arr[1][0];
$version = $arr[2][0]; 
```

但是当我尝试`var_dump`的时候`$arr`，它又返回了我`NULL`。那么，如何获取名称和版本名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:45:20.940

您可以使用简单的正则表达式来获取“名称”和其余部分，然后用于`array_map`更改其余部分的内容，如下所示：

```
<?php
function versionTrim($string) {
  return trim($string, ' ,');
}

$OS = 'Nokia Belle OS
Symbian Anna OS
Symbian Belle OS, upgradeable to Belle FP1
Symbian OS v9.4, Series 60 rel. 5';

preg_match_all('/(.+) OS([^\n]*)/', $OS, $matches);

$names = $matches[1];
$version = array_map(versionTrim, $matches[2]);

var_dump($names);
var_dump($version); 
```

# java - JDBC setNull() 与 Oracle "is null" 产生不同的结果

> ID：10990749
> 
> 赞同：4
> 
> 时间：2012-06-12T04:58:48.113
> 
> 标签：java, oracle, jdbc, null

我正在针对 Oracle 11g 数据库处理 JDBC 中的 PreparedStatement 查询，发现传递空参数的结果与在查询本身中定义“为空”不同。

例如，这个查询：

```
String sql = "SELECT col1 FROM tbl WHERE col2 = ?";
PreparedStatement ps = conn.prepareStatement(sql);
ps.setNull(1, java.sql.Types.INTEGER);
ps.execute(); 
```

与此查询不同：

```
String sql = "SELECT col1 FROM tbl WHERE col2 is null";
PreparedStatement ps = conn.prepareStatement(sql);
ps.setNull(1, java.sql.Types.INTEGER);
ps.execute(); 
```

我很好奇为什么会这样，以及如何避免定义两个单独的 SQL 语句来涵盖“col2 = value”和“col2 is null”两种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T05:02:00.767

这与 Java 无关，实际上，这就是 NULL 在 Oracle 中的工作方式。

与任何事物（甚至与 NULL）相比，NULL 始终为 false，您必须使用 IS NULL。

这也将不返回任何行：

```
SELECT col1 FROM tbl WHERE col2 = NULL 
```

甚至

```
SELECT col1 FROM tbl WHERE NULL = NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T05:03:43.693

我相信这`ps.setNull(1, java.sql.Types.INTEGER)`是为了**将**NULL 数据值插入数据库。

`IS NULL`如果您在 sql 查询中搜索`NULL`数据值，您应该使用。

毕竟，doing`col2 = NULL`也行不通，因为您无法`NULL`使用以下方法比较值`=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-10T09:41:39.743

如果您确定使用 Oracle 数据库，那么您可以使用此语句，它还将接受 NULL 等于 NULL：

```
select col1 from tbl where decode(col2, ?, 1, 0)=1 
```

不是很可读，但比上面的表达式更好。此外，您避免为准备好的语句提供两次相同的值。在 Oracle 11 或 12 上为我工作。

# javascript - jQuery.filter 可以在 body 标签上工作吗？

> ID：10990752
> 
> 赞同：4
> 
> 时间：2012-06-12T04:59:12.133
> 
> 标签：javascript, jquery

我正在使用 jQuery 过滤 ajax 响应以提取返回的页面正文并替换当前页面。我发现如果我过滤“body”上的响应，它什么也不会返回。

例如，要在此页面的控制台中模拟它，我可以运行：

```
$($('html').html()).filter('body') 
```

返回：

```
[] 
```

但是，如果我运行：

```
$($('html').html()).filter('title') 
```

我得到：

```
[<title>​Can jQuery.filter work on the body tag? - Stack Overflow​&lt;/title>​] 
```

任何人都知道为什么或如果这是一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T19:51:25.217

更详细地回答：这里真正的问题`$()`是用于包装来自`$("html").html()`. 根据 jQuery 文档：

从提供的原始 HTML 字符串动态创建 DOM 元素。

在传递复杂的 HTML 时，某些浏览器可能无法生成完全复制所提供的 HTML 源的 DOM。如前所述，我们使用浏览器的`.innerHTML`属性来解析传递的 HTML 并将其插入到当前文档中。在此过程中，某些浏览器会过滤掉某些元素，例如`<html>`、`<title>`、 或`<head>`元素。因此，插入的元素可能不代表传递的原始字符串。（因此在一个浏览器中，您可能会在另一个浏览器中找到标题）

一旦你`$`在一个字符串周围使用，你就会获得一个解析的集合......但这可能会删除你想要使用的一些数据......一个文档中不允许有两个正文元素

但是 $("html").children().filter("body") 会起作用，所以一般来说我会回答你的问题，是的，它可以

我认为您已经找到了解决方案；）但只是提到它：我强烈建议您跳过`$`调用并简单地使用本机方法，如 substring 和 indexOf

```
// try in the browser console
var myString = "<html><head></head><body>foobar</body></html>";
myString.substring(myString.indexOf("<body>"), myString.indexOf("</body>") + 7);
"<body>foobar</body>" 
```

对于 ajax 响应，它应该以完全相同的方式工作，因为它是一个纯字符串。如果不需要提取body标签：

```
// try in the browser console
var myString = "<html><head></head><body>foobar</body></html>";
myString.substring(myString.indexOf("<body>") + 6, myString.indexOf("</body>"));
"foobar" 
```

注意：在查看性能时，本机操作的执行时间不到重新包装`.html()`和调用所需时间的一半`.filter()`

# asp.net - ASP.Net 母版页未响应 Site.css 更改

> ID：10990754
> 
> 赞同：0
> 
> 时间：2012-06-12T05:00:16.360
> 
> 标签：asp.net, css

在调试时，对 Site.css 的更改似乎没有任何效果。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-12T05:00:17.153

Firefox 是调试会话的默认浏览器。在第一次调试运行后，它正在使用 Sites.css 的缓存副本解决方案是关闭 Firefox 历史记录。然后它将每次重新加载 Sites.css

# php - 动态创建和加载多个 iframe

> ID：10990756
> 
> 赞同：0
> 
> 时间：2012-06-12T05:00:19.680
> 
> 标签：php, javascript, jquery

我想根据数据库的搜索结果向页面添加一些 ifamres。我还计划将那些 I 框架放在 Jquery-UI 手风琴菜单中。这样做的最佳方法是什么。我使用 PHP 来动态创建 ifamres。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:04:16.470

```
function searchResult(url){
    $("<iframe>").attr("src", url).appendTo("div#result");
}

searchResult("//www.example.com"); 
```

# java - Android Graphics：如何重现微生物动态壁纸的外观？

> ID：10990758
> 
> 赞同：1
> 
> 时间：2012-06-12T05:00:38.787
> 
> 标签：java, android, graphics, 2d, live-wallpaper

视频示例[在这里](http://www.youtube.com/watch?v=7igZ4CyoB-I)

我正在尝试重现我相信由三星开发的适用于 Android 的 Microbes 动态壁纸的外观。图形编程不是我的强项，我需要一些帮助才能开始。

图片示例[在这里](http://imgur.com/TEpz6)

我假设我可以使用精灵来表示微生物。

*   **翘曲形状**：当微生物静止时，它们更圆。但是，当它们朝一个方向移动时，它们会变得更加椭圆形。我是否用多个精灵状态来表示这个？此外，微生物有不同的大小。我可以从一个基本图像缩放吗？
*   **动画**：偶尔，微生物会摇晃。那么这将是从圆形到椭圆形的精灵然后返回？
*   **颜色**：我是否为每种颜色类型（蓝色、黄色、红色等）有一个单独的精灵，或者有一个基本叠加层并动态分配不同的颜色？此外，有时它们会瞬间比它们的基色更亮一点，这让我认为一些动态分配颜色的方式会比静态精灵更好。动态执行此操作的最佳方法是什么？
*   **发光**：什么样的效果用于使微生物看起来发光？每个微生物周围都有一种弥漫的雾状区​​域。那部分是精灵本身还是涉及着色器？如果是着色器，那具体是什么效果？

如果有一种非精灵方法更容易或资源消耗更少，我会全力以赴。我也打算把它作为动态壁纸，所以效率越高越好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:57:10.480

几个月前我也有同样的问题，现在我制作了[Microb World](https://play.google.com/store/apps/details?id=com.massiveshare.microbworld)。这是基于此动态壁纸在 Google Play 上提供的免费游戏。

我使用过 LibGDX，它是基于 Sprite 的。我的精灵是白色的，我改变了颜色：

这是我找到的最简单的方法。

最难的是管理他们的动作，我的版本和壁纸不一样。我使用[通用补间引擎](http://www.aurelienribon.com/blog/projects/universal-tween-engine)

# mysql - 根据mysql中的唯一日期获取记录

> ID：10990759
> 
> 赞同：0
> 
> 时间：2012-06-12T05:00:44.277
> 
> 标签：mysql, sql

> **可能重复：**
> [仅需要从日期时间字段按日期从 MySQL 数据库中获取记录](https://stackoverflow.com/questions/688013/need-to-get-records-from-mysql-database-by-date-only-from-a-datetime-field)

我的一个表有一个列`added`，其中有日期`'2011-09-22 00:38:23'`，但我想按日期（而不是特定时间）获取数据，那么我该怎么做呢？

我试过这个：

```
SELECT * FROM `tbl_customer` WHERE added='2011-09-22' 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:06:48.590

试试这个——

```
SELECT * FROM tbl_customer WHERE DATE(added) = '2011-09-22'; 
```

[DATE()](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date)函数文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:23:57.493

试试这个：

```
SELECT * FROM tbl_customer WHERE convert(varchar(10),added,120)='2011-09-22' 
```

# node.js - 在 Hubot 脚本中调试/打印

> ID：10990762
> 
> 赞同：13
> 
> 时间：2012-06-12T05:00:54.307
> 
> 标签：node.js, hubot

我正在尝试调试现有的 Hubot 脚本并在将来编写自己的脚本，我需要一种简单的方法来调试它或至少在某处打印值（但不是到通道）。我该怎么做？

如果这可以通过在某些交互式本地模式下使用 Node 来完成，则可以加分。我真的不知道从哪里开始。

Hubot 使用的所有脚本都是用 Coffeescript 编写的。

PS 我正在将 Hubot 与 Hipchat 一起使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-21T23:04:40.110

我不知道这是否有帮助，但我找到了一种检查对象的方法。

```
Util = require "util"

module.exports = (robot) ->
  robot.hear /hi robot/i, (msg) ->
    user = robot.brain.usersForFuzzyName(msg.message.user.name)
    msg.send "#{Util.inspect(user)}" 
```

这允许查看对象的所有元素，这样我就可以弄清楚我做错了什么......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T17:41:57.947

我自己发现了答案：`console.log MSG`在 .coffee Coffeescript 源代码中完全符合我的需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-16T06:49:33.753

您可以使用

```
robot.logger.info "your log message here" 
```

这将像记录其他hubot消息一样记录它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-25T00:21:40.170

在某处发现了这个（咖啡脚本）片段，它记录了所有错误，这对于添加到开发中的机器人非常有帮助。

`robot.error (err, res) -> robot.logger.error "#{err}\n#{err.stack}" if res? res.reply "#{err}\n#{err.stack}"`

# android - Android：我们如何从 xml 字符串的属性中获取值

> ID：10990767
> 
> 赞同：1
> 
> 时间：2012-06-12T05:01:11.750
> 
> 标签：android, xml-parsing, opml

谁能告诉我我们如何解析以下 Xml。我得到以下 xml 作为 HttpGet 方法的响应。我可以以字符串形式存储这个 xml。

```
<?xml version="1.0" encoding="UTF-8"?>

<opml version="1">

    <head>

    <status>200</status>

        </head>

    <body>

<outline type="text" text="General" guide_id="f1" is_default="true"/>

<outline type="text" text="Rock Stations" guide_id="f2"/>

<outline type="text" text="Rock Stations" guide_id="f3"/>

<outline type="text" text="Rock" guide_id="f4"/>

<outline type="text" text="Awdhesh" guide_id="f5"/>

    </body>

</opml> 
```

我想解析`outline`. 而且我还想`text`在列表视图中显示的值。请给我一个示例代码。

提前致谢 ...！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:06:43.900

如果您使用的是 SAXParcer，请参阅 sax parcer 实现示例：

[http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-simple-sax-parser/](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-simple-sax-parser/)

请注意方法

```
public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException 
```

在这里您可以检查属性及其值

```
if(localName.equals("outline"))
    String txtValue= attributes.getValue("text"); 
```

# java - 将图像作为字节数组传输

> ID：10990770
> 
> 赞同：0
> 
> 时间：2012-06-12T05:01:44.527
> 
> 标签：java, android, image, sockets, bytearray

我正在尝试将图像从“服务器”（其目的是发送图像）发送到作为 Android 设备的“客户端”。之间的套接字保持打开状态，图像不断出现。问题是：

1.  我不知道图像的大小（它可以改变）；
2.  图像不是 BMP 格式。

在我下面的代码中：

1.  客户端在图像传输后不会停止读取（`-1`读取时我没有得到），它会在套接字关闭时停止；
2.  完成读取后，输入流不会被清除，并且会一遍又一遍地读取相同的图像。

起初，我尝试发送 2 个我知道大小的 BMP 图像（两者大小相同）。这是服务器代码：

```
 public static void main(String[] args) {
        try {
            ServerSocket s = new ServerSocket(4488);
            System.out.println("Waiting for a connection . . . . ");
            Socket socket = s.accept();
            System.out.println("Connected!");
            DataOutputStream dataOutputStream = new DataOutputStream(socket.getOutputStream());
            Thread.sleep(2000);

            File myImageFile = new File("c:\\1\\a.bmp");
            FileInputStream fis = new FileInputStream(myImageFile);
            byte[] data = new byte[(int) myImageFile.length()];
            byte[] tmp = new byte[0];
            byte[] myArrayImage = new byte[0];
            int len = 0 ;
            int total = 0;

            while( (len = fis.read(data)) != -1 ) {
                total += len;
                tmp = myArrayImage;
                myArrayImage = new byte[total];
                System.arraycopy(tmp,0,myArrayImage,0,tmp.length);
                System.arraycopy(data,0,myArrayImage,tmp.length,len);
            }

            //

            fis.close();

            dataOutputStream.write(myArrayImage);
            dataOutputStream.flush();
            Thread.sleep(2000);

            myImageFile = new File("c:\\1\\b.bmp");
            fis = new FileInputStream(myImageFile);
            data = new byte[(int) myImageFile.length()];
            tmp = new byte[0];
            myArrayImage = new byte[0];
            len = 0 ;
            total = 0;

            while( (len = fis.read(data)) != -1 ) {
                total += len;
                tmp = myArrayImage;
                myArrayImage = new byte[total];
                System.arraycopy(tmp,0,myArrayImage,0,tmp.length);
                System.arraycopy(data,0,myArrayImage,tmp.length,len);
            }

            fis.close();

            dataOutputStream.write(myArrayImage);
            dataOutputStream.flush();
            Thread.sleep(2000);

            socket.close();
            s.close(); 
```

这是客户端代码：

```
 @Override
public void run() {
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    byte[] byteChunk = null;
    int c;

    if (_dataInputStream != null) {
        while (true) {
            try {
                Thread.sleep(200);
            } catch (Exception e) {
            }

            try {
                byteChunk = new byte[1024];

                while ((c = _dataInputStream.read(byteChunk)) != -1){
                    buffer.write(byteChunk, 0, byteChunk.length);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            final Bitmap bitmap = BitmapFactory.decodeByteArray(buffer.toByteArray(), 0, buffer.size());

            if (bitmap != null) {
                _handler.post(new Runnable() {
                    public void run() {
                        _iv.setImageBitmap(bitmap);
                        _iv.invalidate();
                    }
                }); 
            }

                buffer.reset();
        }
    }
} 
```

现在，正如我所说，客户端一直停留在 while 循环上，直到套接字关闭，然后（无论我发送多少图像，因为我在客户端创建了一个仅适合 1 个图像的字节数组）它一直在读取这个一直都是第一张图。

任何想法我做错了什么？

Ps 如果图像不是 BMP，我在客户端代码中编写的解码会起作用吗？我要发送的真实图像是PNG。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T07:20:59.753

您可以先发送图像字节数组的大小，然后在 while 循环中读取字节，直到达到如下大小：

```
DataInputStream in = conn.openDataInputStream();

            // read a length first
            int length = in.readInt();

            if (length <= 0) {
                throw new IOException("Can't read a length");
            }

            // read the image now
            imgData = new byte[length];
            length = 0;

            while (length != imgData.length) {
                int n = in.read(imgData, length, imgData.length - length);

                if (n == -1) {
                    throw new IOException("Can't read a image data");
                }

                length += n;
            }

            in.close(); 
```

[这是这个的编辑版本](http://cccufcg.googlecode.com/svn-history/r21/trunk/ImageTuner/src/imagetuner/bluetooth/BTImageClient.java)

请注意图像的大小是 int 并且它有多个字节，那么您需要使用 writeint。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:43:38.867

除非您使用某种机制来指示输入结束，否则客户端无法知道何时停止从流中读取。

一个简单的解决方法是使用一个固定长度（四个字节，一个 int 对大多数图像来说就足够了）标题，您将其写入流中，告诉客户端以下数据的长度。然后，客户端在停止并等待其他标头或关闭流之前从流中读取该字节数。

另一种方法是使用文件结束分隔符来通知客户端已经遇到输入的结尾。

除了图像本身之外，您还必须在流中写入一些额外的数据（元数据），除非您在输入后关闭流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:12:36.490

只查看了您的客户端代码，但这不适合评论。你需要重新考虑你在做什么；您的想法（我在第一次尝试时也这样*做*）是基于人的而不是基于计算机的。换句话说，你的代码对*我*这个人有意义，但我真的不知道为什么，它对计算机没有意义。

要点：你的`while (true)`循环没有出口——它是无限的。我希望它重复最后一次读入“位图”。

首先，我会摆脱`sleep`代码。现在这个问题令人困惑，如果它有帮助，您可以稍后将其放回去。（我不认为它会，你的阅读会做所有必要的阻塞。）然后你需要一个图像结束标记或其他东西来让你在读取完整图像时脱离读取循环。（或者让它触发放置*在*这个循环中的图像处理代码。）

最后，您需要一个文件结束或*图像*结束标记来将您踢出`while (true)`循环。（回到“重点”。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T06:24:28.200

嗨，但如果你想阅读`jpeg`文件，那么你可以使用这个代码

```
byte[] bytes = new byte[1024 * 1024];
int count = 0;
do
{
    count += in.read(bytes, count, bytes.length - count);
}while (!(count > 4 && bytes[count - 2] == (byte) -1 && bytes[count - 1] == (byte) -39)); 
```

但我无法理解如何阅读`PNG`格式

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-12T08:57:44.080

如果您想发送 PNG，请阅读有关格式 ( [Wiki](http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header) ) 的一些信息。每个块都带有长度前缀，因此您可以通过网络将其原始发送并知道它何时完成！

# codeigniter - Pyro CMS 是否有电子商务插件？

> ID：10990773
> 
> 赞同：0
> 
> 时间：2012-06-12T05:01:58.063
> 
> 标签：codeigniter, e-commerce, pyrocms

*我开始更频繁地使用 PyroCMS 和 Codeignigter；我发现它是一个非常强大的小型 CMS。但是我找不到任何电子商务插件/购物车功能。*

**问题** 有人知道 PyroCMS 是否有可用的购物车插件，还是我必须自己编写？

**EXTRA：** 如果我必须自己编写，是否有一个可以转换为 Pyro Addon 的轻量级 PHP 开源推车？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:40:43.563

有一个名为[PyroCart](http://www.pyrocart.net/)的插件正在开发中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T22:09:20.387

[FireSALE](https://github.com/firesale/FireSALE)也处于 alpha/beta 阶段，几周前我尝试过它时看起来很有希望（产品、类别、运输、发票和可插入的支付网关）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:57:25.213

检查[GoCart](https://github.com/gocart/GoCart)。它是一个基于 CodeIgniter 的电子商务。您可以轻松调整它以适应 Pyro CMS

# prototypejs - 通过prototype.js 将iframe 附加到div

> ID：10990781
> 
> 赞同：1
> 
> 时间：2012-06-12T05:03:07.010
> 
> 标签：prototypejs

我正在使用prototype.js。我想在单击Div 时附加一个I 帧。为此，我正在使用以下代码。

```
//JS Code
Event.observe(window, 'load', function()
{ $('test').observe('click', function()
  {
    $('d1').update ('<iframe src="http://www.abc.com" width="100%" height="300px;" border="0" id="myframe"></iframe>');
   Effect.toggle('d1','slide'); return false;
  });
}); 
```

这工作正常，但问题是我想在渲染 iframe 之前显示加载图像，并且当 iframe 完全加载时图像将被隐藏。为此，我想调用一个回调函数。但我对此一无所知。请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:04:25.180

这是一种方法：

JavaScript：

```
Event.observe('test', 'click', function(event) {
    $('d1').addClassName('loading').update('<iframe src="http://www.abc.com/" width="100%" height="1" border="0" id="myframe" onload="this.setAttribute(\'height\', 300);$(\'d1\').removeClassName(\'loading\')"></iframe>');
    event.stop();
});​​ 
```

HTML：

```
<a href="#" id="test">Test</a>

<div id="d1"></div>​ 
```

一些CSS：

```
#d1 {
   height: 300px;
   background-color: #ccc;
}
#d1.loading {
   background-color: #c00;
   /* put your background loading image as a background-image here */
} 
```

​</p>

# windows-phone-7 - windows phone 分配过多

> ID：10990784
> 
> 赞同：1
> 
> 时间：2012-06-12T05:03:48.830
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-7-emulator

我正在 Windows Phone 模拟器中的 Windows Phone 应用程序上运行 Windows Phone 性能分析工具。

在我的应用程序的最初 4 秒内，我收到“过度分配达到 120% 以上”的警告。但是，当我使用内存选项运行分析器时，我发现内存消耗不超过 20MB 的手机 [模拟器] 内存。

这引起了很多混乱。

请就如何定位那些超出的分配以及消除这些瓶颈的任何建议提供帮助

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:43:27.010

尝试找出导致这种情况的代码部分。开始注释掉部分代码并查看警告出现/消失的时间

# asp.net-mvc-3 - 带有 IoC、存储库模式等的 ASP.NET MVC3 教程

> ID：10990791
> 
> 赞同：0
> 
> 时间：2012-06-12T05:05:06.997
> 
> 标签：asp.net-mvc-3, dependency-injection, repository-pattern, autofac

我将使用 C# 和 razor 引擎启动基于 ASP.NET MVC 3 的新项目。
在说明这个项目之前，我想做一些与存储库模式、依赖注入 Autofac 以及所有这些可以编写更好的代码或易于维护的东西相关的教程。

那么你能给我一些有用的链接或教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:43:01.627

看看 Orchard CMS 的源代码，它包含以上所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:45:18.243

看看[全栈](http://channel9.msdn.com/Series/The-Full-Stack)。它涵盖了您提到的所有内容以及更多内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:26:26.997

我不知道他们是否使用 Autofac，但[NerdDinner](http://nerddinnerbook.s3.amazonaws.com/Intro.htm)可能很适合你。

# django-forms - 使用基于 Django 类的通用视图添加 ManyToManyField 实例

> ID：10990792
> 
> 赞同：0
> 
> 时间：2012-06-12T05:05:18.847
> 
> 标签：django-forms, django-class-based-views

是否可以使用具有 ManyToManyField 关系的基于 django 类的通用视图？例如，将“条目”添加到“类别”：

```
class Category(models.Model):
    title           = models.CharField()
    slug            = models.CharField()
    description     = models.TextField()
    entry           = models.ManyToManyField(Entry,null=True,blank=True)

url(r'^category/(?P<pk>\d+)/add', CreateView.as_view(model=Entry?????), 
```

在这里，我想向现有的 Category 实例添加一个新条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:34:09.810

使用[CreateView](https://docs.djangoproject.com/en/1.3//ref/class-based-views/#createview)创建 Entry，然后通过覆盖`form_valid()`方法将 id 添加到类别中。

# c# - FormLoadEvent 上的 switch 语句

> ID：10990794
> 
> 赞同：0
> 
> 时间：2012-06-12T05:05:22.703
> 
> 标签：c#, winforms, switch-statement

请问这是什么问题：

```
private void Form2_Load(object sender, EventArgs e)
{
    switch (Form2.Tag) //error
    {
        case "desc":
            MessageBox.Show("desc");
        break;

        case "sms":
            MessageBox.Show("sms");
        break;
    }
} 
```

错误：

```
An object reference is required for the non-static field, method, or property System.Windows.Forms.Control.Tag.get 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:07:09.777

你可能是想说`this.Tag`。引用该`Tag`属性将需要 的实例`Form2`，因此您会收到错误消息。

编辑：

忘记`Tag`是一个对象。将其转换为字符串，您的语句应该可以工作：

```
switch ((string)this.Tag) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:13:40.143

由于`Tag`不是静态属性，您将无法通过类名（即 Form2）访问它。Tag 也是`object`您不能在 switch 语句中使用的类型。由于您的案例是字符串类型，您可以尝试以下操作：

```
 string tag = (string) this.Tag;
 switch (tag) //error
      {
           case "desc":
                MessageBox.Show("desc");
                break;
           case "sms":
                MessageBox.Show("sms");
               break;
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:12:55.267

您的代码应该是：

```
switch ((string)this.Tag) 
```

# c++ - 使用 Visual Studio 2010 时，Boost 1.45 - 1.49 与 MySql C++ 连接器 1.1 中断

> ID：10990801
> 
> 赞同：0
> 
> 时间：2012-06-12T05:06:06.933
> 
> 标签：c++, visual-studio-2010, visual-c++, boost, mysql-connector

我有一个在 VS2008 下编译良好的 C++ 项目，但现在我正在运行 VS2010 并且无法回到 2008 年。该项目不再编译，因为我收到“错误 C2371：'int8_t'：重新定义；不同的基本类型”。

我已将问题缩小到使用 Boost 1.4x 和 MySQL C++ 连接器。如果我创建一个 test.cpp 文件并将以下内容放入其中，则会生成错误。

```
// BOOST
#include <boost/filesystem.hpp>
// SQL connector
#include <mysql_connection.h>
#include <cppconn/resultset.h> 
```

我已经重建了 Boost 1.45，但仍然有问题，然后尝试了最新的 1.49，结果相同。MySQL C++ 连接器 (v1.1) 没有更新

我正在寻找此问题的可能建议或解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:20:33.147

原来有一个 MySQL 标志来禁用冲突。这似乎已经为我解决了这个问题。

```
// BOOST
#include <boost/filesystem.hpp>

#define HAVE_INT8_T 1

// SQL connector
#include <mysql_connection.h>
#include <cppconn/resultset.h> 
```

数字我在发布问题后发现了这一点。

# qt - Qt 4.8 中的多项目选择组合框

> ID：10990802
> 
> 赞同：0
> 
> 时间：2012-06-12T05:06:13.470
> 
> 标签：qt, qt4

是否可以使用 Qt 4.8 在组合框中执行多项选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T23:24:29.347

如果您可以选择使用外部库，那么`qxt`除了许多其他非常好的东西之外，还有一个扩展，`qxtcheckcombobox`它似乎涵盖了您需要的功能。请参阅[http://libqxt.bitbucket.org/doc/tip/qxtcheckcombobox.html](http://libqxt.bitbucket.org/doc/tip/qxtcheckcombobox.html)或更一般地：http: [//libqxt.bitbucket.org/doc/](http://libqxt.bitbucket.org/doc/)

# php - wordpress - 唯一场景 - 通过 URL 获取附件 ID

> ID：10990808
> 
> 赞同：3
> 
> 时间：2012-06-12T05:07:11.397
> 
> 标签：php, wordpress, attachment

我遇到了一个独特的场景，我有一个 IMAGE url，但没有一个未附加附件的 ID（我知道这听起来很奇怪 - 但在 wordpress 术语中它是正确的 :-) ）。

我正在插件中使用 wordpress 附件上传表单，用户可以在其中上传图片。然后，他单击填充 $options 字段的“插入帖子”按钮。（标准程序）

然后我需要该图像的 ID。问题是 wordpress 的大部分功能都需要一个 ID 才能工作。

我可以使用如下代码检索该图像的 ID：

```
$image_src = $options['upload_image'] ; // the options field in the plugin that holds the image URL

    $postid_img  = $wpdb->get_var(
        "SELECT ID FROM $wpdb->posts 
         WHERE guid = '$image_src' 
         AND post_type='attachment' LIMIT 1"); 
```

现在`$postid_img`实际上是ID。

那么问题出在哪里？

问题是，只有当所选择的图像大小是完整的图像大小时，此代码才能完美地工作。每当 URL 具有中间图像大小时（例如 - 图像名称，因此 URL 具有像 ImageName **-123x4500** .jpg 这样的后缀大小） - 上述函数将返回**0**。

大多数与 wordpress 附件相关的功能（如`get_intermediate_size()`,`get_attachment_url()`或许多其他功能）都需要**ID**作为参数。但我在此功能阶段没有 ID。

我什至尝试了一个名为的未知函数 `url_to_postid( $url )`——它也失败了。

我知道理论上我可以从表单中删除所有其他尺寸，但这是一种“hack”——不是解决方案——尤其是当我们在一个可能需要与其他插件共存的插件中时。

那么，如何根据具有未知 ID 的“自定义”图像 URL 获取（“完整”图像的）ID，该 URL 在那一刻也未附加（不发布，页面）？

（请注意，所有涉及 post 对象或自定义查询（不是直接 sql）的解决方案都可能会失败，因为此时 - 图像未附加到任何内容 - 即使已上传。）

**编辑我**

（注 2 - URL 上的所有字符串操作，如修剪/正则表达式等，都太危险了。如果我依赖分辨率部分（例如 300x300） - 我永远不知道它会是什么，4digitx4digit，3x4 等。 .如果我依赖“-”字符，则没有保证它不会出现在图像名称本身中。）

**编辑二更新一-**

我找到了一个 Hack 来“解决”这个问题。我写“解决”是因为它适用于我的特定情况，但并非在所有情况下都有效。（感谢 #wordpress IRC 上的 kovshenin 让我朝着正确的方向前进）

我更改了更新输入字段的 jQuery 代码：

```
window.send_to_editor = function(html) {
    imgurl = jQuery('img',html).attr('src');
    jQuery('#upload_image').val(imgurl);
    tb_remove();
    } 
```

到 ：

```
window.send_to_editor = function(html) {
       var attachment_id = 0;
       var classes = jQuery('img',html).attr('class').match(/wp\-image\-([0-9]+)/); // regex to "hijack" the class name (which is the ID)
       if ( classes[1] )
        attachment_id = classes[1];
            imgurl = jQuery('img',html).attr('src');
            jQuery('#upload_image').val(attachment_id); // assign att id.
           tb_remove();
}; 
```

这段代码实际上是从上传表单（其中包含 ID）中获取一个 CLASS 名称，并使用正确的 ID 而不是 URL 填充输入字段。

这充其量是“骇人听闻的”——而不是适用于所有情况的解决方案。但在我的具体情况下 - 它有效。

现在 - 有趣的事实是，如果表单中的这个 CLASS 名称包含 ID - 必须有一种方法来获取它。它在那里存在——因此必须有一些东西（钩子/过滤器/变量）让我抓住——但是什么和在哪里——我不知道，而且仍然没有找到。

@biziclop 建议的解决方案~~似乎~~是正确~~的~~ -~~但由于某种原因，它不适用于我的代码。也许有些小东西必须在那里改变。~~（见更新二）

有人建议使用`backup_sizes`而不是`_wp_attachment_metadata`使用相同的方法 -~~但仍然是 nada~~。

~~如果有人有答案 - 请张贴。我不敢相信没有办法得到它（尤其是当它存在于诸如 class-postID 之类的表单代码上时 :-)~~

**更新二 -**

**@biziclop** 解决方案效果很好。我错过了一个简单的事实，即我的表没有默认重命名 - 因此在使用他的代码“原样”时返回 NULL 数组。（这和试图在没有调试模式的情况下取得进展的愚蠢想法:-)）

再次感谢！

所有上述（和以下）解决方案都可以工作。

我仍然好奇的一件事是上传表单中的上述类。如果它们是使用正确的 ID（类 ID）生成的，则必须有一种方法可以通过简单的钩子/过滤器来获取它们.. 但我想那将是以后的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:01:38.107

附件存储在`wp_posts`和`wp_postmeta`表中。

`wp_posts.guid`似乎在其上传位置包含原始文件名

`wp_postmeta`（其中`meta_key`= `"_wp_attachment_metadata"`）包含一个序列化的（[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)）PHP 数组，其中包含调整大小的文件名等：

a:6:{s:5:"宽度";s:4:"1000";s:6:"高度";s:3:"750";s:14:"hwstring_small";s:23:"高度='96' 宽度='128'";s:4:"文件";s:35:"2010/12/IMG_2543-e1291981569982.jpg";s:5:"尺寸";a:3:{s :9:"缩略图";a:3:{s:4:"文件";s:33:"IMG_2543-e1291981569982-90x67.jpg";s:5:"宽度";s:2:"90"; s:6:"高度";s:2:"67";}s:6:"中等";a:3:{s:4:"文件";s:35:"IMG_2543-e1291981569982-180x135.jpg ";s:5:"宽度";s:3:"180";s:6:"高度";s:3:"135";}s:5:"大";a:3:{s: 4：“文件”；s：35：“IMG_2543-e1291981569982-500x375.jpg”；s：5：“宽度”；s：3：“500”；s：6：“高度”；s：3：“375 ";}}s:10:"image_meta";a:10:{s:8:"光圈";s:1:"0";s:6:"credit";s:0:"";s:6:"相机";s:0 :"";s:7:"标题";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"版权";s:0:""; s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s: 5:"标题";s:0:"";}}"0";s:5:"标题";s:0:"";}}"0";s:5:"标题";s:0:"";}}

WordPress/您可以`post_id`通过调整大小的文件名查找的唯一方法如下：

• 使用 MySQL 预过滤潜在的匹配`LIKE`项（将是 sloooow）：

```
SELECT     wp_posts.ID, wp_postmeta.meta_value
FROM       wp_posts
INNER JOIN wp_postmeta ON wp_posts.ID = wp_postmeta.post_id
                      AND wp_postmeta.meta_key = '_wp_attachment_metadata'
                      AND wp_postmeta.meta_value LIKE '%"IMG_2345-100x100.jpg"%' 
```

[• 通过反序列化（使用http://codex.wordpress.org/Function_Reference/maybe_unserialize](http://codex.wordpress.org/Function_Reference/maybe_unserialize) ？）每个 meta_value来验证/缩小 PHP 中的搜索结果，并手动检查它是否真的与文件名匹配。

### 第二部分。

```
function thumbnail_url_to_id( $file_url ){
  global $wpdb;
  $filename = basename( $file_url );

  $rows = $wpdb->get_results( $wpdb->prepare("
  SELECT     wp_posts.ID, wp_postmeta.meta_value
  FROM       wp_posts
  INNER JOIN wp_postmeta ON wp_posts.ID = wp_postmeta.post_id
                        AND wp_postmeta.meta_key = '_wp_attachment_metadata'
                        AND wp_postmeta.meta_value LIKE %s
  ",'%"'.like_escape($filename).'"%'
  ));

  foreach( $rows as $row ){
    $row -> meta_value = maybe_unserialize( $row -> meta_value );
    //tr( $row );
    var_dump( $row );
  }
}

$files = explode("\n",
'TEST_123-90x67.jpg
TEST_123-90x671.jpg
TEST_123-180x134.jpg
TEST_123-180x1341-90x67.jpg
TEST_123-180x1341.jpg
TEST_123-500x373.jpg
TEST_123-500x3731-90x67.jpg
TEST_123-500x3731-180x134.jpg
TEST_123-500x3731.jpg
TEST_123.jpg
TEST_1231-90x67.jpg
TEST_1231-180x134.jpg
TEST_1231-500x373.jpg
TEST_1231.jpg');
$upload_base = 'http://cc/wordpress/wp-content/uploads/2012/06/';

foreach( $files as $filename ){
  thumbnail_url_to_id( $upload_base.$filename );
} 
```

测试结果：http: [//jsfiddle.net/PcjKA/](http://jsfiddle.net/PcjKA/)

# php - 绝对路径源码php

> ID：10990814
> 
> 赞同：1
> 
> 时间：2012-06-12T05:07:50.273
> 
> 标签：php

这可能只是一个微不足道的问题，但我真的不知道最好的做法是什么，比如使用绝对路径的 javascript、img 或 css

我现在真正使用的是使用这样的代码

```
<?php
$prefix = '//';
$rootFolder = $prefix . $_SERVER['HTTP_HOST'];
?> 
```

所以当我想包含类似jquery的东西时，我只需输入这样的代码

```
<script type="text/javascript" src="<?php echo $rootFolder ?>/jquery-1.7.1.min.js"></script> 
```

这够好吗？或者我应该将前缀修改为“http://”，还是有更好的方法使用另一个超全局变量等？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:14:52.710

这个问题不能以正确的方式回答，因为绝对路径和相对路径在网站上都有各自的重要性。

对于搜索引擎，他们不喜欢具有指向相同网站的绝对链接的网站。现在的现代浏览器已经读取了以网站当前 URL 为前缀的相对路径，除非在 URL 前面使用“/”。因此，当您尝试尽可能多地使用相对路径时，它应该不会造成伤害。

*另一种情况是*，如果您的应用程序可以由多个模块扩展。一般采用一个管理模块和一个用户模块。如果这些模块为 JS、CSS 和其他模块共享一个公共资源文件夹，那么创建相对路径非常有用且容易。

由于您的问题涉及从根文件夹访问资源，因此您应该没问题，即使用相对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:49:37.920

使用`src="/jquery-1.7.1.min.js"`，前导斜杠将转到根目录。所以不管你在哪个文件夹级别，它总能找到它。这基本上是绝对的，但没有协议和域名。

如果您始终在同一台服务器上，则根本不需要主机名（如果您移动域，最好不要包含它）。

# ms-access - Moodles 可以在 MS Access 上运行

> ID：10990817
> 
> 赞同：0
> 
> 时间：2012-06-12T05:08:11.037
> 
> 标签：ms-access, ms-access-2007, moodle

我们正在大学开发一个网站，大学当局不允许我们部署 mysql 数据库服务器，因为许多其他网站都在使用 MS Access。

但是moodle需要mysql服务器是否可以手动创建到moodle的MS Access连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:00:37.043

这是不可能的。Moodle 支持 MySQL、MSSQL、Oracle 和 PostgreSQL。Access 并不是真正适合与 Web 应用程序一起使用的数据库，如果您正在开发任何没有 MySQL 的 Moodle 站点，那么您将被拒绝使用完成这项工作所需的工具。

如果您无法让大学打球，我建议您寻找每月 5 英镑的廉价外部托管解决方案。只要有 PHP5 和 MySQL，任何人都可以。

# android - 如何在 Android 应用程序中安全地存储凭据（密码）？

> ID：10990821
> 
> 赞同：44
> 
> 时间：2012-06-12T05:08:25.747
> 
> 标签：android, security

我想将用于登录我正在开发的金融应用程序的密码存储在安全的地方。在做了一些网上冲浪后，我发现了以下选项，但每个选项都有一定的缺点。

**1）钥匙链。**
仅在操作系统版本 4 中可用。

**2) 共享偏好。**
即使我对数据进行加密，它也会以纯文本形式存储数据，然后通过反编译应用程序代码可能会破坏加密密钥。

**3) 访问密钥库守护进程并在其中存储凭据。**
( [http://nelenkov.blogspot.com/2012/05/storing-application-secrets-in-androids.html](http://nelenkov.blogspot.com/2012/05/storing-application-secrets-in-androids.html) ) 需要另一个密码才能记住。

请建议我一种更好的方法来保护 Android 应用程序（如 iPhone KeyChain）中的凭证信息。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T06:32:44.523

目前在 Android 中不等同于 iPhone 的 KeyChain。如果您想保密，请不要将其存储在设备上。或者至少，不要将加密的密钥/密码存储在设备上。就那么简单。

此外：

1) 即使在 ICS 上，您也不能直接使用 KeyChain 来存储应用程序机密（参见 3 中的博文）

2) 这只是有根手机的问题，或者如果有人可以物理访问设备。

3) 记住一个密码，保护你所有的凭据，比记住多个密码要好得多。此外，在 ICS 上，没有单独的密码，凭证存储受设备解锁密码保护。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-13T06:40:49.393

**散列**是一种解决方案，不要将凭据作为纯文本存储在共享首选项或任何介质中。

只需对密码进行加盐和哈希处理，然后您就可以继续将其存储在 sharedPreferences 或某些嵌入式数据库中。

## **下面是它的工作原理：**

***在线的***

1.  成功登录后，将普通（未散列）密码发送到服务器进行身份验证和授权。

2.  盐既可以生成并从服务器返回到客户端，也可以在客户端生成

3.  然后将其存储为盐并对密码进行哈希处理并存储。

***离线***

1.  我们将使用我们存储的盐对用户输入的密码进行哈希处理

2.  我们将与成功登录时存储的哈希值进行比较

3.  如果两者相等，那么我们会让用户进入，否则我们不会让用户进入。

## **好处：**

1.  所以现在您不必担心版本兼容性。

2.  即使设备已植根，也很难暴力破解哈希。

3.  即使有人反编译/破解了应用程序，也很难进行逆向工程

# function - 在批处理函数内部设置变量时，在批处理函数外部不可见

> ID：10990827
> 
> 赞同：1
> 
> 时间：2012-06-12T05:09:15.357
> 
> 标签：function, batch-file, cmd

我不知道这个批处理文件有什么问题：

```
@ECHO OFF
SET images=./images/
SET cdr=%CD%
SET result=noval

CD %images%
SET images=
:: Density
SET dpi=300

:: Process SVG
FOR %%x IN (%images%*.svg) DO (
  CALL:testFun %%~nx result
  echo res "%result%"
  IF [%result%]==[process] (
    ECHO Converting %%x
    inkscape -d %dpi% -A %images%%%~nx.pdf %images%%%x
  ) ELSE ( ECHO - Skiping %%x, file is uptodate.)
)

:: Process BMP, JPG, PNG, and TIFF
FOR %%x IN (%images%*.jpg,%images%*.bmp,%images%*.png,%images%*.tiff) DO (
  CALL:testFun %%~nx result
  echo res "%result%"
  IF [%result%]==[process] (
    ECHO Converting %%x
    inkscape -d %dpi% -A %images%%%~nx.pdf %images%%%x 
  ) ELSE ( ECHO - Skiping %%x, file is uptodate.)
)

:: Process EPS
FOR %%x IN (%images%*.eps) DO (
  CALL :testFun %%~nx result
  echo res "%result%"
  IF [%result%]==[process] (
    ECHO Converting %%x
    epstopdf --outfile=%images%%%~nx.pdf %images%%%x
  ) ELSE ( ECHO - Skiping %%x, file is uptodate.)
)

CD %cdr%
ECHO.&PAUSE&GOTO:EOF

::Functions

:testFun
SET "file=%1"
FOR /F %%f IN ('dir /Od /B "%file%.*"') DO (SET newest=%%~xf)
echo * Newest file for %file%: %newest%
IF [%newest%]==[.pdf] (echo noprocessing
GOTO :noprocess) ELSE (echo processing
GOTO :process)
:noprocess
SET result=noprocess
GOTO :endfun
:process
SET result=process
:endfun
GOTO:EOF 
```

这个想法是它应该处理目录中的不同图像，只有当图像（源）比生成的 PDF（输出）新时。

但是，有几个问题我不知道为什么会发生。

*   首先，第一个循环一直使用`result`和 print的值`noval`，看起来它正在跳过函数调用。但是，相同的调用方式适用于第二个和第三个循环。

*   其次，在其他循环中（没有出现第一个问题）`result`，在函数内部更改的 的值不存在。好像范围不同。但是，我将它用作全局变量，对吗？`set local`我使用变量作为参考来测试这个版本，但没有任何效果。

我在这里做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:18:05.760

代码按应有的方式运行。您不知道的是在*解析*命令`cmd`时会扩展环境变量。在这种情况下，命令可以是包含块的完整命令。因此，在解析它之后，其中没有任何变量，只有文本。这意味着如果您更改块中的变量并*在**同一块中使用它，*您将看不到更改。*`for`*

 ***要解决此问题，您可以使用延迟扩展，以确保变量在运行单行之前直接扩展（即使在块内），从而缓解此问题。在批处理文件的顶部添加以下内容：

```
setlocal enabledelayedexpansion 
```

然后使用`!result!`而不是`%result%`访问变量的值。***

# c# - 打开/关闭编译器优化标志的 CPU 密集型应用程序

> ID：10990831
> 
> 赞同：1
> 
> 时间：2012-06-12T05:09:52.673
> 
> 标签：c#, .net, multithreading, task-parallel-library, compiler-optimization

我写了一个小程序来比较我的笔记本电脑的性能。为了使程序占用大量 CPU，我使用一些多线程代码（通过 Parallel API 实现）实现了 Rabin-Karp 模式匹配算法。

我注意到，当程序在编译器优化标志关闭的情况下执行时，它所花费的时间比在优化标志打开的情况下执行所需的时间要多得多。

例如：

*   所用时间（优化标志关闭时）：40 秒（大约）
*   所用时间（优化标志打开时）：18 秒（大约）

我很想知道编译器正在应用什么样的优化来增加性能的显着提高。任何关于如何理解在打开/关闭此标志的情况下执行代码时发生了什么的指针都会非常有帮助。

**代码**

```
void Main()
{
    Dictionary<string,bool> collection = new Dictionary<string,bool>();
    IEnumerable<string> commonWords = File.ReadAllLines(@"G:\LINQPad4\words.txt")
        .Where(x => !string.IsNullOrEmpty(x)).Select(t => t.Trim());

    string magna_carta = File.ReadAllText(@"G:\LINQPad4\magna-carta.txt");

    Parallel.ForEach(commonWords,
    () => new Dictionary<string,bool>(),
    (word, loopState, localState) =>
    {
        RabinKarpAlgo rbAlgo = new RabinKarpAlgo(magna_carta,word);
        localState.Add(word,rbAlgo.Match());
        return localState;
    },
    (localState) =>
    {
        lock(collection){
            foreach(var item in localState)
            {
                collection.Add(item.Key, item.Value);
            }
        }
    });

    collection.Dump();
}

public class RabinKarpAlgo
{
    private readonly string inputString;
    private readonly string pattern;
    private ulong siga = 0;
    private ulong sigb = 0;
    private readonly ulong Q = 100007;
    private readonly ulong D = 256;

    public RabinKarpAlgo(string inputString, string pattern)
    {
        this.inputString = inputString;
        this.pattern = pattern;
    }

    public bool Match()
    {
        for (int i = 0; i < pattern.Length; i++)
        {
            siga = (siga * D + (ulong)inputString[i]) % Q;
            sigb = (sigb * D + (ulong)pattern[i]) % Q;
        }

        if(siga == sigb)
            return true;

        ulong pow = 1;
        for (int k = 1; k <= pattern.Length - 1; k++)
            pow = (pow * D) % Q;

        for (int j = 1; j <= inputString.Length - pattern.Length; j++)
        {
            siga = (siga + Q - pow * (ulong)inputString[j - 1] %Q) % Q;
            siga = (siga * D + (ulong)inputString[j + pattern.Length - 1]) % Q;

            if (siga == sigb)
            {
                if (inputString.Substring(j, pattern.Length) == pattern)
                {
                    return true;
                }
            }
        }

        return false;
    }
} 
```

**您可以从以下 gitHub 存储库下载相关文件**：[Rabin-Karp 测试](https://github.com/pawanmishra/Rabin_Karp_Pattern_Search)

**文章**:[性能测试](http://weblogs.asp.net/pawanmishra/archive/2012/06/10/inauguration-of-my-laptop.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:06:58.847

在您的特殊情况下，有 3 个 for 循环，它们位于并行 foreach 中，我坚信大多数优化都是通过动态循环转换完成的，当然还有数学部分。

以下是一些可以用循环完成的示例：[循环转换](http://en.wikipedia.org/wiki/Loop_transformation)

C# 编译器团队的 Eric Lippert 对此有一篇博客文章： [优化开关是做什么的](http://blogs.msdn.com/b/ericlippert/archive/2009/06/11/what-does-the-optimize-switch-do.aspx)

# gridview - 动态改变gridview的内容

> ID：10990833
> 
> 赞同：0
> 
> 时间：2012-06-12T05:10:22.500
> 
> 标签：gridview, templatefield

我有一个带有三个绑定字段列和一个模板字段列的网格视图。
模板字段列具有三个按钮（编辑、查看和删除）。所以每一行都有这三个按钮。

单击编辑按钮时，如何动态更改网格视图的内容？
单击删除按钮时也删除一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:30:44.607

你可以这样做。首先，您需要在计时器或线程中填充 datagridview。其次，为了编辑/删除记录集，您必须使用

私有无效 DataGrid_ABC_CellContentClick（对象发送者，DataGridViewCellEventArgs 网格图）

私有无效 DataGrid_ABC_CurrentCellDirtyStateChanged（对象发送者，EventArgs 网格图）

公共无效DataGrid_ABC_CellValueChanged（对象发送者，DataGridViewCellEventArgs e）

如需更多信息，请随时与我们联系。

# wcf - Silverlight 在调用 WCF 函数时显示超时错误

> ID：10990834
> 
> 赞同：0
> 
> 时间：2012-06-12T05:10:31.410
> 
> 标签：wcf, silverlight, timeout

我正在使用 VS2010、C# 开发 Silverlight 4 Web 应用程序，该应用程序使用 WCF 读取电子邮件。当然，我创建了一个与 WCF 交互的 Silverlight 用户控件，并在我的主 Silverlight 应用程序中使用此用户控件。

有时我在尝试阅读收件箱时收到以下错误消息，似乎应该增加超时，是否可以禁用此超时？由于阅读某些电子邮件可能需要很长时间并且超时会影响性能。我怎么解决这个问题：

```
The HTTP request to 'http://localhost:1968/EmailWCF.svc' has exceeded the allotted timeout. The time allotted to this operation may have been a portion of a longer timeout. 
```

当然，当我将服务和应用程序上传到远程服务器时，我会遇到同样的错误

# google-bigquery - 我们可以请求从 Google Cloud Storage 到 BigQuery 的多少并发上传？

> ID：10990835
> 
> 赞同：0
> 
> 时间：2012-06-12T05:10:35.170
> 
> 标签：google-bigquery

在[doc](https://developers.google.com/bigquery/docs/developers_guide#importingatable)上，它声明您可以将多个文件从 Storage 上传到单独的请求中的表中：

> 创建 CSV 文件以填充表格 - 用于填充表格的数据以 CSV 文件的形式上传。单个源文件的最大大小为 4GB，但您可以在单个请求或单独请求中将多个源文件导入表。

这些请求可以同时发出吗？如果是，每个账户/桶/表的最大并发上传请求数是多少？如果这些数字没有明确的配额，是否意味着您可以通过发出上传请求来尽可能多地增加上传吞吐量？

谢谢，

卡兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:27:51.653

BigQuery 配额在此处列出：[https ://developers.google.com/bigquery/docs/quota-policy](https://developers.google.com/bigquery/docs/quota-policy)

总之，每个导入请求最多可以有 500 个文件（每个文件必须小于 4Gb）。您每分钟可以发出两个导入请求，每天最多 1,000 个导入请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T17:58:15.540

2013 年更新：

总之，每个导入请求最多可以有 10,000 个文件（每个文件必须小于 1Tb，字符串中没有新行）。

[https://developers.google.com/bigquery/docs/quota-policy#import](https://developers.google.com/bigquery/docs/quota-policy#import)

# java - 创建 Riot CMS Spring Java 项目

> ID：10990839
> 
> 赞同：1
> 
> 时间：2012-06-12T05:11:01.823
> 
> 标签：java, spring, spring-mvc, content-management-system

用于创建 Riot CMS Spring Java 项目的步骤

1.  我创建了名为 newRiotDemo 的 Java 动态项目并将 setup.xml (riotfamily.org/setup.xml) 放入 WebContent
2.  然后运行 ​​wget riotfamily.org/setup.xml && ant -f setup.xml 终端
3.  然后刷新webcontent中的project.put index.html。
4.  控制台也不例外，现在没有标记，但在给 localhost:8080/newRiotDemo/riot 时没有得到我想要的管理页面（参考--> [http://www.riotfamily.org/docs/quickstart.html](http://www.riotfamily.org/docs/quickstart.html)）

任何人都可以帮助我如何进一步进行吗？我们应该在哪里包含从[https://github.com/riotfamily/riot/downloads获得的防暴代码](https://github.com/riotfamily/riot/downloads)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:09:42.227

你好，

我在终端中尝试了以下命令==>

mkdir my-riot
cd my-riot git clone git://github.com/riotfamily/riot.git

git clone git://github.com/riotfamily/riot-skeleton.git

cd暴动

git 结帐 9.0.x

ant 安装-发布

cd ../riot-skeleton

git checkout 9.0.x 然后是蚂蚁大战

**获得的输出**==> riot-skeleton.jar & riot-skeleton-mysystemloginname.war & 构建文件夹中的类文件夹

然后我将上面的 riot-skeleton-mysystemloginname.war 导入 eclipse 并在浏览器中获取 localhost:8080/riot-skeleton-mysystemloginname/home/ 页面。

以管理员身份登录时，管理员 localhost:8080/riot-skeleton-mysystemloginname/riot/ 也可以在宠物和主页中看到工具栏。 **注意：-***如果您遇到“CSRF SECURITY ERROR”，只需将此代码放入 riot-servlet.xml*：

```
 <override:properties ref="dwrController">
         <property name="configParams">
           <props>
          <prop key="crossDomainSessionSecurity">false</prop>
           </props>
           </property>
        </override:properties> 
```

我希望该解决方案对某人有用。

# jquery - ajaxSuccess 不会在动态添加的元素上触发

> ID：10990842
> 
> 赞同：0
> 
> 时间：2012-06-12T05:11:21.413
> 
> 标签：jquery

我有这段代码：

```
$('.self_delete').on('ajaxSuccess', function(event, xhr, settings) {
    json = jQuery.parseJSON(xhr.responseText);
    if ($(this).attr('href') == json.delete_url ) {
        alert('going to delete');
        $(this).closest($(this).data('parent-selector')).remove();
    } else {
      alert('not this one!');
    }
}); 
```

这对于页面上已经存在的元素非常有效。但是当我动态添加新元素并单击 .self_delete 元素时，它不会触发 ajaxSuccess （但链接有效）。

如果页面中已经有几个项目，我再添加一个，然后点击最新的一个来触发事件，警报“不是这个！” 将为现有元素触发，但不会为新元素触发。

有任何想法吗？----EDIT----- 我像这样使用委托：

```
$('#lists').on('ajaxSuccess', '.self_delete', function(event, xhr, settings) {
    json = jQuery.parseJSON(xhr.responseText);
    if ($(this).attr('href') == json.delete_url ) {
        alert('going to delete');
        $(this).closest($(this).data('parent-selector')).remove();
    } else {
      alert('not this one!');
    }
}); 
```

现在该事件永远不会触发，即使页面重新加载也是如此。但是选择器很好，因为 $('#lists .self_delete') 确实返回了 a.self_delete 的数组！（去睡觉了，希望醒来的时候有人给点建议！thx！）

---编辑2-----如果我添加这个：

```
$('#lists').on('click', '.self_delete', function(event) {
    alert('going to delete from click');
}); 
```

警报会触发。在所有情况下。所以基本上，似乎 .on() 无法注册 ajaxSuccess 事件！我试图用谷歌搜索，但搜索与 .on() 相关的任何内容就像错过了不可能，这是一个常见的词：-S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:24:41.360

`$('.self_delete').`<- 这部分运行一次 - 第一次加载文档 - 并将您的处理功能附加到类的所有元素`self_delete`。

您需要使用委托。将处理程序附加到包含对象（在下面的示例中， ），并在每次调用处理程序时`.container`进行评估。`.self_delete`

`$('.container').on('ajaxSuccess', '.self_delete', function(event, xhr, settings) ...`

阅读更多关于[`.on()`](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:52:08.193

在聊天室与几个人交谈后，似乎 ajaxSuccess 必须附加到一个元素并且不能冒泡。因此，我通过将 .on() 附加到 .self_delete 项的父项并从那里使用 $.ajax 来解决我的问题，这使我可以按预期访问 ajaxSuccess。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:23:32.213

创建动态内容后，您必须重新应用绑定。

# java - android eclipse中的Web服务

> ID：10990843
> 
> 赞同：0
> 
> 时间：2012-06-12T05:11:23.243
> 
> 标签：java, android, eclipse, web-services

通过 SOAP 方法，我想从 android/eclipse 使用 Web 服务。但是使用 Web 服务的方式是，我必须提供输入，并且它应该必须从 Web 服务返回正确的值。如何实现它？

**网络方法**

```
public class FahrenheitToCelsius {
public double FahrenheitToCelsius(double Fahrenheit)
{
    return ((Fahrenheit - 32) * 5) / 9;
}
} 
```

**.java 类**

```
public class Demo_webserviceActivity extends Activity
{
    /** Called when the activity is first created. */

       private static String NAMESPACE = "http://tempuri.org/";
       private static String METHOD_NAME = "FahrenheitToCelsius";
       private static String SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
       private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

       Button btnFar;
       EditText txtFar,txtCel;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       btnFar = (Button)findViewById(R.id.btnFar);

       txtFar = (EditText)findViewById(R.id.txtFar);
       txtCel = (EditText)findViewById(R.id.txtCel);

       btnFar.setOnClickListener(new View.OnClickListener()
       {

       public void onClick(View v)
       {
         //Initialize soap request + add parameters
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

        //Use this to add parameters
        request.addProperty("Fahrenheit",txtFar.getText().toString());

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;

        try 
        {
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

             //this is the actual part that will call the webservice
             androidHttpTransport.call(SOAP_ACTION, envelope);

             // Get the SoapResult from the envelope body.
             SoapObject result = (SoapObject)envelope.bodyIn;

             if(result != null)
             {
              //Get the first property and change the label text
               txtCel.setText(result.getProperty(0).toString());
             }
             else
             {
               Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
             }
        }
        catch (Exception e) 
         {
           e.printStackTrace();
           }
         }
       });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:21:46.847

从您的 URL 中删除 ?WSDL 并尝试

> 私有静态字符串 URL = "http://www.w3schools.com/webservices/tempconvert.asmx";

# php - PHP：创建一个包含整个数据库数据的数组

> ID：10990844
> 
> 赞同：1
> 
> 时间：2012-06-12T05:11:38.017
> 
> 标签：php, mysql, database, multidimensional-array

我想“自动”将我的所有数据库数据加载到`$db[]`和/或`$_SESSION['db']`. 因此，我只需加载此代码一次，而不是在整个网站上加载零碎。

我能够查询元数据和原始数据，我的问题是创建数组。

假设我有一个`temp`包含列的表，`name`并且`age`我希望能够执行以下操作： -`echo $db['temp']['name'] . "'s age is: " . $db['temp']['age'];`显然我有很多包含很多列的表。这只是一个例子

```
<?php
$dbn = "db_name";
$dbu = "db_user";
$dbp = "db_password";
$hst = 'db_host';

$dbc = mysql_connect($hst,$dbu,$dbp);

$sql_metadata = 
"SELECT `COLUMNS`.`TABLE_NAME` as 'table' , `COLUMNS`.`COLUMN_NAME` as 'column'
FROM `information_schema`.COLUMNS
WHERE `COLUMNS`.`TABLE_SCHEMA` = '$dbn'
ORDER BY TABLE_NAME ASC , `COLUMNS`.`COLUMN_NAME` ASC";

$dbq = mysql_query($sql_metadata, $dbc);
while( $meta = mysql_fetch_array($dbq) )
{
    $sql_rawdata = "SELECT `$meta['column']` FROM `$dbn`.`$meta['table']`";
    $dbq2 = mysql_query($sql_rawdata);
    foreach( ($raw = mysql_fetch_array($dbq2)) as $value) )
    {
        $db = array
                ( 
                $meta['table'] => array( $meta['column'] => $value)
                );
    }
}
print_r($db);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:15:50.910

在进入循环之前声明你的数组，然后填充它：

```
$db = array();

$sql_metadata = 
"SELECT DISTINCT `COLUMNS`.`TABLE_NAME` as 'table' 
FROM `information_schema`.COLUMNS 
WHERE `COLUMNS`.`TABLE_SCHEMA` = '$dbn'";

$dbq = mysql_query($sql_metadata, $dbc);
while( $meta = mysql_fetch_array($dbq) )
{
    $sql_rawdata = "SELECT `$meta['column']` FROM `$dbn`.`$meta['table']`";
    $dbq2 = mysql_query($sql_rawdata);
    $raw = mysql_fetch_array($dbq2);

    foreach($raw as $value )
    {
        $db[$meta['table']][$meta['column']][] = $value;
    }
}
print_r($db); 
```

解释：您创建一个多维数组，表名指向列名。数组末尾的 [] 告诉 PHP 将 $value 的内容存储到 table=>column 的新数组元素中。

这将是获取整个数据的更简单方法：

```
 $sql_rawdata = "SELECT * FROM `".$dbn."`.`".$meta['table']."`";
    $dbq2 = mysql_query($sql_rawdata);

    while($raw = mysql_fetch_assoc($dbq2)){
        foreach($raw as $column => $value )
        {
            $db[$meta['table']][$column][] = $value;
        }
    } 
```

# javascript - jQuery中的函数来操作一组ID

> ID：10990848
> 
> 赞同：2
> 
> 时间：2012-06-12T05:12:15.400
> 
> 标签：javascript, jquery, function

我正在尝试创建一个 jQuery 函数，我可以使用它访问某些元素并操作它们。到目前为止，我只能访问某些 id 并对其进行操作，但我不知道如何编写一个仅将字符串作为参数的函数，并且我基本上可以将这个函数用于我想要操作的所有元素。

这是我到目前为止所拥有的：

```
jQuery(document).ready(function () {

// id for the trigger
var trigger = jQuery('#acf-use_right_column');

if (jQuery(trigger).length) {
    // list of ids to be manipulated
    var ids = jQuery('#acf-content_right_column, #acf-show_content, #acf-show_news, #acf-news_header, #acf-show_newsletter_form');
        // toggle element on click to hide/show 
        trigger.find('input:checkbox').click(function() {
            ids.toggle();
        });
        // hide id in dependence of the state of the checkbox
        trigger.find('input:checkbox').each(function(){
            // if checkbox not checked
            if(!jQuery(this).attr('checked')){ 
                ids.hide();
            }
        });     

}

}); 
```

它允许我操作一组 id。因此，如果我想在我的文档中操作另一组 id，我将不得不再次编写相同的代码。谁能告诉我如何从这段代码中创建一个接受参数的函数？我只想用我想要操作的 id 作为函数的参数字符串来调用函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:10:06.240

比您想象的要简单得多，您可以`javascript`在函数中使用变量，

```
 function myNewFunction(parameter1,parameter2){

      var trigger = jQuery(parameter1);
      if (jQuery(trigger).length) {
           // list of ids to be manipulated
           var ids = jQuery(parameter1+', '+parameter2+'_content, '+parameter2+'_news, '+parameter2+'_header, '+parameter2+'_newsletter_form');
           // toggle element on click to hide/show 
           trigger.find('input:checkbox').click(function() {
                ids.toggle();
           });
           // hide id in dependence of the state of the checkbox
           trigger.find('input:checkbox').each(function(){
           // if checkbox not checked
           if(!jQuery(this).attr('checked')){ 
               ids.hide();
           }
       });     
     }
 }

 myNewFunction('#acf-use_right_column','#acf-show'); 
```

您甚至可以使用字符串数组并使用类似的东西

```
 ...
 compare = ids.lenght-1
 for (var key in idArray){
     if(key!=compare){
        string=string+idArray[key]+', '
     }else{
        string=string+idArray[key]
     }
 }
 ids = jQuery(string)
 ...

 idArray = new Array('#id1','#id2','#id3','#id4') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:57:57.233

您所需要的只是一种将 ID 数组转换为 jQuery 可以理解的 ID 选择器的方法。如果您熟悉 jQuery，这并不难。

```
// Name it whatever you want, 'pancakes' is my 'foo'.
function pancakes(trigger, ids) {
    trigger = $('#' + trigger);
    // `trigger` is a jQuery object already so you don't have to
    // `jQuery(trigger)` here
    if(trigger.length) {
        // This turns `['a','b','c']` into `$('#a,#b,#c')`, the $.map adds the
        // `'#'` prefix to each element of the `ids` array and produces another
        // array with the prefixed `ids`; the `join` sticks the elements of the
        // new array together into a multiple selector.
        ids = $($.map(ids, function(id) { return '#' + id }).join(','));

        // And the rest is as you had it...
    }
} 
```

然后你可以像这样使用它：

```
pancakes(
    'act-use_right_column',
    ['acf-content_right_column', 'acf-show_content', 'acf-show_news', 'acf-news_header', 'acf-show_newsletter_form']
); 
```

参考：

*   [`$.map`](http://api.jquery.com/jQuery.map/)
*   [`join`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)
*   [多重选择器](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:30:17.737

please see the code below, It may not be correct but you can use the appraoch

```
var manipulate=function(tiggerobj, arrayofobj){

// step1 :- use parameter1 fpr id for the trigger
var trigger = jQuery(tiggerobj);

if (jQuery(trigger).length) {
    // list of ids to be manipulated
var ids=new Array();
//step2 :-accumaltae all the ids
for (var ob in arrayofobj){

id.push(jQuery(arrayofobj(ob)));
}

        //step3- toggle element on click to hide/show 
        trigger.find('input:checkbox').click(function() {
            ids.toggle();
        });
        // hide id in dependence of the state of the checkbox
        trigger.find('input:checkbox').each(function(){
            // if checkbox not checked
            if(!jQuery(this).attr('checked')){ 
                ids.hide();
            }
        });     

}

} 
```

Than call this manipulate function where you need

# ruby-on-rails - 控制器路由和表单

> ID：10990853
> 
> 赞同：0
> 
> 时间：2012-06-12T05:13:11.117
> 
> 标签：ruby-on-rails

遵循 RoR[入门](http://guides.rubyonrails.org/getting_started.html)教程后，我添加了另一个模型：

```
$ rails g model Category name:string wdate:date 
```

我将这一行添加`resources :category`到我的 routes.rb 文件中，并复制并粘贴了初始的 Posts 控制器，将名称从 Post 更改为 Category 并将 Posts 更改为 Categories。

我对索引、表单、新建和编辑视图做了类似的事情。

现在，`localhost:3000/category`给我一个空的类别列表，并`/category/new`给我一个输入表单。但是，在提交后，我得到

> 路由错误
> 
> 没有路线匹配 [POST] "/categories"
> 
> 尝试运行 rake 路线以获取有关可用路线的更多信息

按照建议运行`rake routes`表明我有：

```
POST   /category(.:format)          category#create 
```

为什么表单提交到错误的地址？我输入术语“类别”的唯一区域是#index 处理程序中的变量名，所以我不明白为什么表单目标是`/categories`. 我是否必须明确设置`/category`创建路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:45:32.330

你`resources :category`里面的线`config/routes.rb`应该是`resources :categories`.

当你在做的时候`resources`，你应该总是使用资源的复数名称，这样 Rails 会自动为资源的成员路由助手使用单数，例如`edit_category_path(category)`.

然后它将在集合的路由中使用复数形式，例如`form_for`. 因为对象是新的，所以表单将向`/categories`表单数据发出 POST 请求。

# .net - 根据另一个组合框的选定值填充一个组合框

> ID：10990854
> 
> 赞同：2
> 
> 时间：2012-06-12T05:13:21.173
> 
> 标签：.net, wpf, combobox

我有多个组合框（具体来说：3），每个组合框的值都取决于前一个组合框的选定值。有关如何在 WPF 中实现此功能的任何建议？

每个组合框都将 list<> 作为其项目源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:29:06.597

让我们假设您的组合框的名称是`comboBox1`，`comboBox2`下面`comboBox3` 我仅给出一个事件的示例。在此基础上，您可以为所有组合框触发事件。

```
comboBox1.SelectionChanged += new SelectionChangedEventHandler(comboBox1_SelectionChanged); 
```

这是事件调用

```
void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    comboBox2.SelectedIndex = comboBox1.SelectedIndex;
//do other work here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:16:41.747

我的应用程序中确实有类似的东西。您必须使用 ObservableCollection<> 而不是 List<>。

我有 2 个 ComboBoxes，您可以选择在第一个 ComboBox 中“分组”结果，在第二个 ComboBox 中，您可以根据需要进行更详细的说明。

第一个有“安全、国家、部门”，第二个可以有证券、国家或部门的列表……取决于第一个选择。

为此，我将组合框绑定到 ObservableCollection。当用户在 ComboBox1 中选择某些内容时，我将从 SelectionChanged 事件中知道它，并将用国家、部门或证券填充 ComboBox2 的 ObservableCollection。

然后 ObservableCollection<> 将“自动”通知 comboBox2 有新项目并将刷新。

哦，要让它工作，你必须使用 MVVM 模式......但我假设你已经在使用它了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:21:59.233

它应该是这样的：

```
<ComboBox x:Name="cbModels"
 ItemsSource="{Binding ElementName=comboBox1,Path=SelectedItem.Orders}"
 DisplayMemberPath="OrderId"/> 
```

显示在 中选择的客户的`SelectedItem.Orders`订单`comboBox1`。

# javascript - 如何使用 JavaScript 在 Firefox 中将必需的单选输入设为可选？

> ID：10990861
> 
> 赞同：1
> 
> 时间：2012-06-12T05:15:07.320
> 
> 标签：javascript, forms, html, firefox, validation

我试图在我的表单中使用[HTML5 约束验证](https://developer.mozilla.org/en/HTML/HTML5/Forms_in_HTML5#Constraint_Validation)来帮助用户在提交之前发现客户端错误（并且显然也进行服务器端验证）。

我有一种情况，我需要根据用户在其他字段中选择的内容*有条件*地使某些字段成为必填或可选。但是，在 Firefox 中，在较早的时候需要无线电输入后，我无法将**它们设为可选。**我已经尝试在这些无线电输入上删除 required 属性并将 this.willValidate 设置为 false，但无论我做什么，Firefox 似乎仍然认为它们是必需的。

这是一个演示：http: [//jsfiddle.net/rrud/fUcUn/](http://jsfiddle.net/rrud/fUcUn/)

有没有人对我可以在 JavaScript 中尝试告诉 Firefox 在需要这些收音机时使它们成为可选的其他方法有什么想法？

我的示例在 Chrome 和 Opera 中运行良好，在 Firefox 中，所有**非无线电**输入的行为都符合预期……所以这可能只是 Firefox 中的一个错误？我在 Win7 上使用 Firefox 13.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:57:38.213

使用 jQuery 的 prop 方法：$.fn.prop

-> $('input').prop('required', true|false);

[http://jsfiddle.net/trixta/fUcUn/12/](http://jsfiddle.net/trixta/fUcUn/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:29:46.900

**只需将此添加到您的代码中**

> this.checked = false;

你的代码应该看起来像

```
$(function() {
    $("#require").click(function() {
        $("input, textarea, select").attr('required', 'required');
    });
    $("#unrequire").click(function() {
        $("input, textarea, select").removeAttr('required').each(function() {
            this.willValidate = false;
            this.checked = false;
        });
    });
}); 
```

**检查这个小提琴** [http://jsfiddle.net/kabichill/ktfV6/](http://jsfiddle.net/kabichill/ktfV6/)

# google-maps - 在 iOS 5 中使用当前位置和方向打开地图应用程序

> ID：10990867
> 
> 赞同：0
> 
> 时间：2012-06-12T05:15:40.190
> 
> 标签：google-maps, ios5, ios4, core-location

嗨，我尝试使用它打开具有当前位置的地图应用程序，并获取我为方向输入的任何内容的方向。当我单击 iPhone 上的按钮时，没有任何反应，但它被单击了。我究竟做错了什么？

```
NSString *url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=Current+Location&daddr=%@ %@ %@ %@",
                     streetString , cityString, stateString, zipString];
    [[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:06:23.847

Make sure you're escaping the the NSString using stringByAddingPercentEscapesUsingEncoding

```
NSString *url = [NSString stringWithFormat: @"http://maps.google.com/mapssaddr=Current+Location&daddr=%@ %@ %@ %@", streetString , cityString, stateString, zipString];
url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
[[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

# java - 无法在三星智能电视上使用 Flash 加载 HTTPS 验证码

> ID：10990868
> 
> 赞同：6
> 
> 时间：2012-06-12T05:15:40.213
> 
> 标签：java, flash, tomcat, https, samsung-smart-tv

**我使用Java**开发了一个 Web 应用程序，它部署在配置为使用**HTTPS的****Tomcat**下。它在浏览器上运行良好。

 **另一方面，我**在三星智能电视上有一个 Flash 应用程序，**它正在与我的服务器通信。在 HTTP 模式的情况下效果很好。但它无法通过 HTTPS 进行通信。

**奇怪的事情：**
Flash 应用程序将其他 HTTPS 图像资源加载为网络上的验证码！

你能帮我解决这个问题吗？
先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:44:38.787

尝试在端口 443 上运行 Https 并尝试加载 Flash 电影的跨域安全策略以获取更多信息，请访问此处[跨域安全策略](http://kb2.adobe.com/cps/142/tn_14213.html)

如果服务器在“Cache-Control”中包含“no-cache”值，则 Flash 将无法工作，请尝试对其进行编辑。还要检查您的代码基地址是否以 Http 或 Https 开头，如果它以 Http 开头，请尝试制作 Https。您可以在 Flash 的嵌入式代码中查看代码库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:45:56.690

好的，所以如果您说来自其他 HTTPS 来源的图像正在工作，那不可能是三星方面的问题。

你检查了这个生成的验证码的标题吗？它们和其他工作图像中的一样吗？

您检查的其他 HTTPS 来源是否具有有效的 SSL 证书？你的呢？**

# xml - Word 2007 xml图像信息

> ID：10990874
> 
> 赞同：0
> 
> 时间：2012-06-12T05:16:18.723
> 
> 标签：xml, xslt, office-2007, word-2007, wordml

我想知道在 Word 2007 xml 文件中存储有关图像信息的元素。（如高度、宽度、可见度等）。在 Word 2003 xml 中，我发现它在 v : shape 标记中显示如下。

```
<v:shape id="Picture 0" o:spid="_x0000_i1025" type="#_x0000_t75" alt="31.jpg" style="width:2in;height:95.85pt;visibility:visible;mso-wrap-style:square">
<v:imagedata src="wordml://02000001.jpg" o:title="31"/>
</v:shape> 
```

我在 Word 2007 xml 中找不到类似的东西。有人可以告诉我在哪里可以找到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:49:13.907

图像大小存储在使用图形的位置（因为您可以以不同的大小多次使用相同的图形），在与使用图像的位置一致的 a:graphic 标记中。与之前一样，这里的数据不再指向关系 ID。

关系列表位于文件的顶部，您找到的其中一个将具有“图像”类型。关系的属性将是目标的名称（例如 media/image1.jpeg）。这是一个指向图像二进制文件的链接，稍后将位于 pkg:part/pkg:binaryData 元素中。

它看起来有点像这样：

```
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
  <Relationship Id="rId8" Target="media/image1.jpeg" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" />
  .. other relationships
</Relationships>
.. lots more document

<pkg:part pkg:name="/word/media/image1.jpeg" pkg:contentType="image/jpeg"  pkg:compression="store">
    <pkg:binaryData>/9j/7QAsUGhvdG9zaG9wIDMuMAA....blah
</pkg:part>
.. lots more document

<w:drawing>
 <wp:inline distT="0" distB="0" distL="0" distR="0">
   <wp:extent cx="2266950" cy="1543050"/>
    <wp:effectExtent l="19050" t="0" r="0" b="0"/>
    <wp:cNvGraphicFramePr>
    <a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture">
     <pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture">
       <a:blip r:embed="rId8" cstate="print"/>
       <a:ext cx="2266950" cy="1543050"/>
       .. lots more document 
```

# objective-c++ - 如何使用 Jamfile 基于工具集将 cpp 文件编译为 Objective-C++？

> ID：10990875
> 
> 赞同：0
> 
> 时间：2012-06-12T05:16:38.027
> 
> 标签：objective-c++, bjam

我有一个 Jamfile，其中一个 C++ 源必须仅在 darwin 上编译为 Objective-C++。我如何才能让这个示例 Jamfile 仅在 darwin 上将 file2 编译为 Objective-C++？请注意，在这里使用 MM 文件扩展名不是解决方案。

```
import modules ;
import os ;

ECHO "OS =" [ os.name ] ;

SOURCES =
file1
file2 # How do I compile this file as objective-c++ on darwin only?
file3
;

local usage-requirements = 
<include>./include
;

project someproject ;

lib someproject

: # sources
src/$(SOURCES).cpp

: # requirements
<threading>multi
$(usage-requirements)

: # usage requirements
$(usage-requirements)
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:53:59.113

我没有完整的答案，但传统的方法是制定一个新规则来将`.cpp`文件编译为objective-c目标文件。您需要查看文档的[Extender Manual](http://www.boost.org/boost-build2/doc/html/bbv2/extender.html)部分以了解如何做到这一点，但这并不简单，尤其是因为该方法将取决于工具包。

更简单的技巧是在制作目标文件时添加编译标志。（下面的未经测试的代码......）

```
import modules ;
import os ;

ECHO "OS =" [ os.name ] ;

local usage-requirements = 
  <include>./include
  ;

# By putting the (usage) requirements in the project,
# they automatically apply to all targets
project someproject
  : <threading>multi
    $(usage-requirements)
  :
  : $(usage-requirements)
  ;

lib someproject
  : # sources
    src/file1.cpp
    src/file3.cpp
    file2.o
  ;

obj file2.o
  : src/file2.cpp
  : <toolset>gcc:<cxxflags>"-x objective-c++"
  ; 
```

（假设[pmjordan 建议的标志](https://stackoverflow.com/questions/10990875/how-to-compile-cpp-file-as-objective-c-based-on-toolset-using-jamfile#comment14368568_10990875)是正确的。）根据需要更改工具集和标志（或添加适当的行）。

hacky 部分是上面的 jamfile 只能在 gcc 中正常工作。使用其他编译器，它将以 cpp 模式编译。如果您删除该`<toolset>gcc:`部分，则使用其他编译器将失败，除非它们也识别与 gcc 相同的标志。

# c# - 从 XMl 元素导入时，字符串未被识别为有效的日期时间

> ID：10990878
> 
> 赞同：0
> 
> 时间：2012-06-12T05:16:52.490
> 
> 标签：c#, sharepoint-2010

我正在尝试从以下 XML 元素中提取日期时间：

```
<PageSaved type="Date">10/19/2010 11:09:36 AM</PageSaved> 
```

我已经用 C# 编写了以下代码，但我收到一个异常，指出该字符串未被识别为有效的日期时间。

```
foreach (XmlNode child in node.ChildNodes){
    if (child.Name == Importer_Constants.PageSaved){
        PageSaved.Append( HttpUtility.HtmlDecode( child.InnerText.Trim() ) );
    }
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:25:27.513

您应该尝试像这样解析日期：

```
PageSaved.Append(DateTime.ParseExact(HttpUtility.HtmlDecode(child.InnerText.Trim()), "dd/MM/yyy h:mm:ss tt", CultureInfo.InvariantCulture)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:29:34.390

try this

```
PageSaved.Append(DateTime.ParseExact(HttpUtility.HtmlDecode(child.InnerText.Trim()), "dd/MM/yyy h:mm:ss tt", null)); 
```

# android - ListView 的焦点问题

> ID：10990881
> 
> 赞同：1
> 
> 时间：2012-06-12T05:17:34.377
> 
> 标签：android, android-layout, android-widget

我有一个 Search `Activity`，其布局文件如下。

```
<?xml version="1.0" encoding="utf-8"?>
                <LinearLayoutxmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@color/white2" >

                    <EditText
                        android:id="@+id/et_search"
                        android:layout_width="280dp"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_marginBottom="5dp"
                        android:layout_marginLeft="20dp"
                        android:layout_marginRight="20dp"
                        android:layout_marginTop="5dp"
                        android:drawableRight="@drawable/search_20"
                        android:ems="10"
                        android:hint="Search by name" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@color/grey05"
                    android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/tv_name"
                        android:layout_width="1dip"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="20dp"
                        android:layout_weight="0.25"
                        android:text="Name"
                        android:textAppearance="?android:attr/textAppearanceMedium" >
                    </TextView>

                    <TextView
                        android:id="@+id/tv_sno"
                        android:layout_width="1dip"
                        android:layout_height="wrap_content"
                        android:layout_weight="0.25"
                        android:text="Serial No."
                        android:textAppearance="?android:attr/textAppearanceMedium" >
                    </TextView>

                    <TextView
                        android:id="@+id/tv_type"
                        android:layout_width="1dip"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="20dp"
                        android:layout_weight="0.25"
                        android:text="Type"
                        android:textAppearance="?android:attr/textAppearanceMedium" >
                    </TextView>
                </LinearLayout>

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="match_parent"
                    android:layout_height="0dip"
                    android:layout_weight="1"
                    android:transcriptMode="normal" >
                </ListView>

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="2dp"
                    android:layout_marginRight="2dp"
                    android:orientation="horizontal" >

                    <Button
                        android:id="@+id/btn_chkin"
                        android:layout_width="0dip"
                        android:layout_height="50dip"
                        android:layout_marginBottom="5dip"
                        android:layout_marginRight="2dip"
                        android:layout_marginTop="20dip"
                        android:layout_weight="1"
                        android:background="@drawable/custombutton"
                        android:text="Submit" />

                    <Button
                        android:id="@+id/btn_chkout"
                        android:layout_width="0dip"
                        android:layout_height="50dip"
                        android:layout_marginBottom="5dip"
                        android:layout_marginLeft="2dip"
                        android:layout_marginTop="20dip"
                        android:layout_weight="1"
                        android:background="@drawable/custombutton"
                        android:text="Cancel" />
                </LinearLayout>

            </LinearLayout> 
```

顶部有一个搜索`EditText`，中间有一个列表视图，屏幕底部有两个按钮。

我无法集中列表视图中的一项。在列表视图适配器的布局文件中，我设置`android:clickable="false" android:focusable="false"` 了当我选择一个项目时，所选项目没有突出显示..我还尝试将以下代码放入`onItemClick`

# 1

```
 // @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long id) {

        if (lview3 != null) {
            lview3.getChildAt(prevPos).setBackgroundColor(Color.BLACK);         
            lview3.getChildAt(position).setBackgroundColor(Color.BLUE);
        }
        prevPos = position;
    } 
```

# 2

```
 // @Override
public void onItemClick(AdapterView<?> arg0, View arg1, int position,
        long id) {
      lview3.setSelection(position);
} 
```

对于 #1 在模拟器上工作得很好，但在我的三星 Galaxy Y 上，它说 * *“应用程序已意外停止。请重试”**

对于＃2，只要我触摸屏幕上的项目，项目就会突出显示，只要我移开手指，突出显示颜色就消失了。

我的 listview_row.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linLayout_search"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tv_name"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"        
        android:text="Medium Text"
        android:textSize="15sp" />

    <TextView
        android:id="@+id/tv_sno"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"       
        android:text="Medium Text"
        android:textSize="15sp" />

    <TextView
        android:id="@+id/tv_type"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.30"        
        android:text="Medium Text"
        android:textSize="15sp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:14:07.600

您在列表视图中有选择模式。这是在列表视图中进行持久选择的标准代码

```
// inside onCreate method
getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // Make the newly clicked item the currently selected one.
    getListView().setItemChecked(position, true);
} 
```

在此之前，您需要使用选择器设置列表视图项的布局背景

```
android:background="@drawable/activated_background" 
```

激活的背景.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:exitFadeDuration="400">

    <item android:drawable="#ff0099cc" android:state_selected="true"/>
    <item android:drawable="#ff0099cc" android:state_checked="true"/>
    <item android:drawable="#ff0099cc" android:state_activated="true"/>
    <item android:drawable="@android:color/transparent"/>

</selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:12:48.420

Yipeee ... [https://stackoverflow.com/a/10277370/840520](https://stackoverflow.com/a/10277370/840520) 这解决了问题。这是我添加的……在`getView()`我的`ListAdapter`

```
 // set selected item
    LinearLayout activeItem = (LinearLayout) convertView;

    if (position == SearchAssetActivity.selectedItem){
        activeItem.setBackgroundColor(Color.GRAY);
        // for focus on it
        int top = (activeItem == null) ? 0 : activeItem.getTop();
        ((ListView) parent).setSelectionFromTop(position, top);
    }
    else{
        activeItem.setBackgroundColor(Color.BLACK);
    } 
```

# tmux - Mosh 登录自动重新附加 tmux 会话

> ID：10990882
> 
> 赞同：14
> 
> 时间：2012-06-12T05:17:40.540
> 
> 标签：tmux, mosh

我正在使用[Mosh](http://mosh.mit.edu/)和[tmux](http://tmux.sourceforge.net/)

我想在 mosh 连接成功后运行命令“tmux attach -t 0 -d”。

当我通过 mosh 成功登录时，如何自动调用命令重新附加 tmux？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-12T14:28:31.093

这有效：

```
mosh $REMOTE tmux attach   # I didn't expect this to work 
```

但这些都不是：

```
mosh $REMOTE "tmux attach -d"  # This should probably work
mosh $REMOTE tmux attach -d    # This correctly interprets -d as a mosh option 
```

更新：正如 Chris Johnson 指出的那样，您可以使用“--”参数关闭选项处理，以便将整个`tmux`命令作为命令发送到远程服务器：

```
mosh $REMOTE -- tmux attach -t 0 -d 
```

# c - 当我“制作” valgrind 时，我得到了错误

> ID：10990885
> 
> 赞同：2
> 
> 时间：2012-06-12T05:18:16.270
> 
> 标签：c, valgrind

```
Andy@Macbook-Pro~/test/valgrind-3.6.1$ make
make  all-recursive
Making all in include
make[2]: Nothing to be done for `all'.
Making all in VEX
make  all-am
gcc -DHAVE_CONFIG_H -I. -I..  -I.. -I../include -I../VEX/pub -DVGA_amd64=1 -DVGO_darwin=1 -DVGP_amd64_darwin=1 -Ipriv   -arch x86_64 -O2 -g -Wall -Wmissing-prototypes -Wshadow -Wpointer-arith -Wstrict-prototypes -Wmissing-declarations -Wno-format-zero-length -fno-strict-aliasing -mmacosx-version-min=10.5 -fno-stack-protector -Wbad-function-cast -Wcast-qual -Wcast-align -fstrict-aliasing -Wno-long-long  -Wno-pointer-sign -fno-stack-protector -MT libvex_amd64_darwin_a-main_globals.o -MD -MP -MF .deps/libvex_amd64_darwin_a-main_globals.Tpo -c -o libvex_amd64_darwin_a-main_globals.o `test -f 'priv/main_globals.c' || echo './'`priv/main_globals.c
cc1: error: unrecognized command line option ‘-arch’
make[3]: *** [libvex_amd64_darwin_a-main_globals.o] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

这是我执行“./configure”后消息的结尾部分

```
 Maximum build arch: amd64
     Primary build arch: amd64
   Secondary build arch: x86
               Build OS: darwin
   Primary build target: AMD64_DARWIN
 Secondary build target: X86_DARWIN
     Default supp files: exp-ptrcheck.supp xfree-3.supp xfree-4.supp darwin10-drd.supp darwin10.supp 
```

需要帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:29:31.050

You need [`valgrind` 3.7.0](http://valgrind.org/downloads/current.html) to build on Mac OS X Lion (10.7.x), and the UR reports that it will build on Snow Leopard (10.6.x) too. It is known that `valgrind` 3.6.1 does not build on Mac OS X Lion.

There was an earlier version that built on Snow Leopard, but it is long enough ago I don't remember for sure the version numbers. The [news](http://valgrind.org/info/news.html) page indicates that in July 2010, there was initial support for Mac OS X Snow Leopard. I believe that was in `valgrind` 3.6.0\. I still have 3.6.0 installed, though I should delete it since it does not work on Lion. I was unable to get 3.6.1 to work, but that may have been a problem on Lion (and I was distressed for a while until 3.7.0 was released).

# javascript - 如何从单个输入中获取多个文件输入

> ID：10990890
> 
> 赞同：6
> 
> 时间：2012-06-12T05:19:03.287
> 
> 标签：javascript, file, input

## 使用浏览器 firefox 和 chrome

我有一个输入文件元素。

```
<input type='file' id='tempFileInput' multiple></input> 
```

假设我为上面的文件输入框（'tempFileInput'）选择了三个文件；

OnChange 我想为每个文件将三个文件分成三个新的文件输入框。IE

```
<input type='file' id='inputFile_0'></input> 
<input type='file' id='inputFile_1'></input> 
<input type='file' id='inputFile_2'></input> 
```

我正在努力实现这一目标。有什么帮助吗？

//我已经为我想要实现的目标编写了一个小的 JavaScript 片段。

```
var index = 0;
function multipleInputBoxes(tempFileInput){
   var divForm = document.getElementById('divForm');
   var numOfFiles = tempFileInput.files.length;

   for(var i=0; i<numOfFiles; i++){
      var newUploader = document.createElement('input');
      newUploader.type='file';
      newUploader.id = 'inputFile_' + index;

      var file = tempFileInput.files[i];
      ***newUploader.files[0] = file;***
      //above line does not work, as by default due to security reasons input type='file' is read only, and non editable.

      divForm.appendChild(newUploader);
      index++;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-03-24T09:47:58.537

在其他帖子中找到分散的代码并组装了一个工作示例，它将输入文件“多个”文件分解为单个文件，并允许您删除它们或添加新文件而不会丢失先前选择的文件：

JS代码

```
// Requires jQuery

function addFileToNewInput(file, newInput) {
  if (!newInput) { return }

  var dataTransfer = new DataTransfer()
  dataTransfer.items.add(file)
  newInput.files = dataTransfer.files
}

function addFileNameToPreview(file, preview) {
  if (!preview) { return }

  preview.innerText = file.name
}

function breakIntoSeparateFiles(input, targetSelector, templateSelector) {
  var $input = $(input)
  var templateHtml = $(templateSelector).html()

  if (!input.files) { return }

  for(var file of input.files) {
    var $newFile = $(templateHtml).appendTo(targetSelector)
    addFileToNewInput(file, $newFile.find("input")[0])
    addFileNameToPreview(file, $newFile.find(".file-name")[0])
  }

  $input.val([])
} 
```

HTML

```
<!-- Requires bootstrap css for style -->

<form class="m-5">
  <div id="file-list"></div>

  <label for="upload_input" class="btn btn-warning">Upload</label>
  <input
    id="upload_input"
    type="file"
    name="post[attachments][]"
    class="d-none"
    multiple="multiple"
    onchange="window.breakIntoSeparateFiles(this, '#file-list', '#file-preview')"
  />

  <template id="file-preview">
    <div class="file-preview mb-2">
      <span class="file-name"></span>
      <button
        class="btn btn-sm btn-danger ml-2"
        onclick="$(this).closest('.file-preview').remove()"
       >&times;</button>

      <input class="d-none" multiple="multiple" type="file" name="post[attachments][]">
    </div>
  </template>
</form> 
```

我为此写了一篇文章，其中有更多示例：[https ://medium.com/@goncalvesjoao/break-input-file-into-individual-files-and-preview-them-29fdbab925b2](https://medium.com/@goncalvesjoao/break-input-file-into-individual-files-and-preview-them-29fdbab925b2?source=friends_link&sk=f2c20efd0bf9ed66b64acdf087a7c45c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:49:00.690

如果您使用的是 HTML5，则可以使用一个`input`标签选择多个文件。不需要额外的。

使用下面的 HTML5：

`<input type='file' id='tempFileInput' multiple='multiple'></input>`

**更新：**

没有办法做你想做的事。该`files`属性仅出于某种原因而准备就绪。这是为了防止未经用户同意上传文件。如果它不是只读的，那么您可以编写脚本并从用户的计算机上传任何文件，这是一个巨大的安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T02:49:40.180

所以我很难从单个文件输入中访问文件（**s**）并将它们分别保存在每个表单中。因为我可以访问每个文件**`var file = tempFileInput.files[i]`**，所以我创建了一个循环并将每个文件保存在 html 'object' 标记中，并将文件对象保存在 object.value 中。例如

```
var numOfFile = tempFileInput.files.length;
for (var int i=0; i<numOfFile; i++){
    //get file object from the filinput element
    var file = tempFileInput.files[i];

    //create new element
    var newObj = document.createElement('object');
        newObj.id = 'obj_' + i;
        newObj.value = file;

    //append object to new form
    createNewForm(newObj);
}

function createNewForm(newObj){
   ...do something here
   ...
   ...
   newForm.appendChild(newObj);
} 
```

# asp.net-mvc - 如何正确地将带有子对象的 json 建模到 ASP.NET MVC ViewModel？

> ID：10990894
> 
> 赞同：1
> 
> 时间：2012-06-12T05:19:55.480
> 
> 标签：asp.net-mvc, json, serialization, model-binding

给定以下客户端代码片段：

```
var vm = {
  Input : "Label: Value",
  Rules : [
    { Name : "RemoveString",
      Params : [
        "Label: "
      ]
    }
  ]
};

$.post("/API/ApplyRule", vm, function(data) { }); 
```

以及服务器端的以下 ViewModel：

```
[Serializable]
public class ApplyRuleRequestViewModel
{
    public string Input { get; set; }
    public List<RuleViewModel> Rules { get; set; }
}

[Serializable]
public class RuleViewModel
{
    public string Name { get; set; }
    public List<string> Params { get; set; }
} 
```

以及以下控制器代码：

```
public class APIController : Controller
{
    [HttpPost]
    public ActionResult ApplyRule(ApplyRuleRequestViewModel model)
    {
        //Problem here... model is not fully deserialized into the ViewModel object.
        return View();
    }
} 
```

我在尝试序列化客户端 ViewModel 的规则部分时遇到问题。在上面说 //Problem... 的控制器行上调试代码时，我看到顶级对象属性成功了，但不是子对象。所以，我得到类似的东西：

```
var vm = new ApplyRuleRequestViewModel {
  Input = "Label: Value",
  Rules = new List<RuleViewModel> {
     new RuleViewModel { Name = null, Parameters = null }
  }
} 
```

我期待类似的东西：

```
var vm = new ApplyRuleRequestViewModel {
  Input = "Label: Value",
  Rules = new List<RuleViewModel> {
     new RuleViewModel { 
         Name = "RemoveString", 
         Parameters = new List<string> { "Label: " }
     }
  }
} 
```

我在这里做错了什么？为什么它没有正确绑定规则数组？

您是否需要创建自己的自定义模型绑定器才能正确绑定它？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:26:04.793

您可以将消息作为 JSON 发送。

```
var vm = {
  Input : "Label: Value",
  Rules : [
    { Name : "RemoveString",
      Params : [
        "Label: "
      ]
    }
  ]
};

$.postJson("/API/ApplyRule", vm, function(data) { }); // See below for definition of `.postJson`. 
```

最后一个参数`json`将设置接受标头以指示需要 JSON。默认模型绑定器应自动与内置交互`JsonValueProviderFactory`以正确读取结构化消息。

**编辑**错过了一些东西。您需要设置`contentType`，因此`.post`可能无法正常工作。

这是发布 JSON 的辅助方法（不仅仅是 POSTING 和*接收*json，就像 post 那样）。

```
$.postJson = function(url, data, success) {
  $.ajax({
            url: url,
            type: 'POST',
            dataType: 'json',
            data: JSON.stringify(data),
            contentType: 'application/json; charset=utf-8',
            success: success
        }); 
} 
```

# python - 我的线程方法有效吗？

> ID：10990895
> 
> 赞同：0
> 
> 时间：2012-06-12T05:19:58.607
> 
> 标签：python, sockets, gevent

基本上我只想知道我是否为并发套接字线程正确实现了线程。这是我的方法：

```
#!/usr/bin/env python
import sys
import time
from gevent import socket, Timeout, select
from gevent.pool import Pool

def worker(website):
    data = str()
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.setblocking(0)
    s.connect(('google.com',80))
    s.send('HEAD / HTTP/1.1\n\n')

    while True:
        read, w, e = select.select([s], [], [])
        if read:
            data = s.recv(1024)
            if data:
                break

    print ('done')
    return 0

def main():

    pool = Pool(10)
    for item in items:
            pool.spawn(worker, item)
    pool.join() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:20:34.237

线程部分 ( `pool.spawn`) 很好（尽管[`Group.map`](http://www.gevent.org/gevent.pool.html#gevent.pool.Group.map)（或`imap`，或者`imap_unordered`可能更漂亮）。

不过，这`select`是完全没有必要的。由于您使用`gevent`的是修补套接字，因此您可以使用：

```
data = s.recv(1024) 
```

其他几件事：

*   `setblocking`如果您这样做，您将不需要调用。
*   为了完全正确，您应该使用[`socket.sendall`](http://docs.python.org/library/socket.html#socket.socket.sendall).
*   有了`gevent`，你几乎永远不会`select`。如果您需要从十个套接字读取，只需生成十个绿色线程。例如：结果 = `Group().map(lambda s: s.read(), my_sockets)`。
*   虽然我们在这里：使用起来很奇怪`data = str()`-`data = ""`会更加标准。

# jquery - 使用 jquery 将 jquery timepicker 添加到表中动态添加的输入字段

> ID：10990903
> 
> 赞同：1
> 
> 时间：2012-06-12T05:20:36.397
> 
> 标签：jquery, html, timepicker

我有一个使用jquery的clone（）方法在表中动态生成的输入字段的代码。代码如下

```
$(document).ready(function(){
    $("#myTable tr:last input").live("click",function(){
    $(this).parent().parent().clone().appendTo("#myTable");
    });

    }); 
```

我的表格的html代码如下

```
<table id="myTable" class="timingtable" border="1" cellpadding="0" cellspacing="0" align="left" style="width:100%; height:170px;">
  <tr>
    <th>Start time</th>
    <th>End time</th>
    <th>Family</th>
  </tr>
  <tr>
    <td><input type="date" name="start" id="element1" class="datefield" value=""></td>
    <td><input type="date" name="end" id="element2" class="datefield" value="" ></td>
    <td><input type="text"/></td>
  </tr>
  <tr>
   <td><input type="date" name="start" id="element3" class="datefield" value=""></td>
    <td><input type="date" name="end" id="element4" class="datefield" value="" ></td>
    <td><input type="text"/></td>
  </tr>
<tr>
    <td><input type="date" name="start" id="element5" class="datefield" value=""></td>
    <td><input type="date" name="end" id="element6" class="datefield" value="" ></td>
    <td><input type="text"/></td>
  </tr>
<tr>
    <td><input type="date" name="start" id="element7" class="datefield" value=""></td>
    <td><input type="date" name="end" id="element8" class="datefield" value="" ></td>
    <td><input type="text"/></td>
  </tr>
<tr>
   <td><input type="date" name="start" id="element9" class="datefield" value=""></td>
    <td><input type="date" name="end" id="element10" class="datefield" value="" ></td>
    <td><input type="text"/></td>
  </tr>
<tr>
   <td><input type="date" name="start" id="element11" class="datefield" value=""  /></td>
    <td><input type="date" name="start" id="element12" class="datefield" value=""/></td>
    <td><input type="text"/></td>
  </tr>
</table> 
```

我在输入字段中添加了 timepicker，如下所示

```
<script type="text/javascript">
        $(function () {
            $('.datefield').timepicker();
        }); 
```

datefield 是赋予静态输入字段的类名。

我正在获取静态字段的时间选择器，但我没有获取动态生成的输入字段的时间选择器。

我必须做些什么才能让时间选择器也进入动态生成的字段。请为这个问题提供解决方案。

提前致谢.......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:35:22.020

您必须手动更改时间选择器字段的 ID。然后将时间选择器应用于动态添加的字段。只有这样才能奏效。因为 timepicker 使用元素的 ID。

还

```
$(document).ready(function(){
    $("#tableID tr:last input").live("click",function(){
    $(this).parent().parent().clone().appendTo("#tableID");
    });

    }); 
```

而不是这个使用这个

```
$(document).ready(function(){
    $("#tableID tr:last input").live("click",function(){
    $(this).closest('tr').clone().appendTo("#tableID");
    });

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:17:31.957

只是一个疑问，为什么你需要 id 和 class ？

我有一个类似的要求，我只在课堂上做过......因为 id 迎合了独特性。

检查以下链接：

[http://jsfiddle.net/manmohan_menon/6YkyY/4/](http://jsfiddle.net/manmohan_menon/6YkyY/4/)

# jquery - 如何在 Jquery 函数中访问模型数组

> ID：10990904
> 
> 赞同：2
> 
> 时间：2012-06-12T05:20:45.773
> 
> 标签：jquery, asp.net-mvc-3, model-view-controller

我的 HTML 代码中有以下行：

```
<input type="hidden" value="@Model.BgtArray" id="BudgetArray"/> 
```

在这里，BgtArray 是一个二维数组，它被填充到视图本身中。像这样的东西：

```
@for(i=0;i<10;i++)
{@for (j=0;j<10;j++)
   @Model.BgtArray[i][j]= *some value*;
} 
```

如何在 jQuery 函数中访问此数组的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:19:18.553

您正在视图中填充模型？？？？在 MVC 模式中，视图旨在显示以模型形式传递给它们的数据。填充此模型是控制器的责任。

话虽这么说，让我们假设您有一个模型：

```
public class MyViewModel
{
    public int[][] BgtArray { get; set; }
} 
```

它填充在控制器操作中并传递给视图：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            BgtArray = Enumerable
                .Range(1, 10)
                .Select(
                    i => Enumerable
                            .Range(1, 10)
                            .Select(j => i * j)
                            .ToArray()
                )
                .ToArray()
        };
        return View(model);
    }
} 
```

然后我们可以有一个相应的强类型视图，我们可以在其中 JSON 序列化模型并在 javascript 中访问它：

```
@model MyViewModel
<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));
    alert(model.BgtArray[1][2]);
</script> 
```

它将像这样在浏览器中呈现：

```
<script type="text/javascript">
    var model = {"BgtArray":[[1,2,3],[2,4,6],[3,6,9]]};
    alert(model.BgtArray[1][2]);
</script> 
```

就以下行而言：

```
<input type="hidden" value="@Model.BgtArray" id="BudgetArray"/> 
```

它非常没用，因为您无法将整个复杂的对象图存储到隐藏字段中。渲染的结果将是：

```
<input type="hidden" value="System.Int32[][]" id="BudgetArray"/> 
```

这不太可能是您想要实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-12T16:16:49.660

为了解决循环引用的问题（在原始问题的答案下面的评论中提到），我使用了这个而不是`Json.Encode`：

```
@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model)) 
```

在您的类中，使用以下注释使 Json 忽略导致问题的导航属性：

```
[JsonIgnore]
public virtual Item Item { get; set; } 
```

解决方案取自：[使用@Json.Encode 时隐藏模型中的字段](https://stackoverflow.com/questions/21263436/hide-field-in-model-when-using-json-encode)

# php - mySQL - 在单个选择中使用外部参照表从相关表中获取数据

> ID：10990905
> 
> 赞同：1
> 
> 时间：2012-06-12T05:20:46.893
> 
> 标签：php, mysql

我有两个表，A 和 B，它们在 AB_xref 中一起外部参照。目前要从表 B 中获取数据，我将 A 中的所有行行转储到一个数组中，然后遍历每个索引，找到与该 A 行相关的多个 B 行。然后，我将 B 中的行缝合到 A 中的行数组中 - 创建一个嵌套数组。

有没有办法使用单个选择和条件来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:18:07.127

看看这是否能让你接近你想去的地方：

询问：

```
SELECT
   packages.name AS package_name,
   activities.name AS activity_name
FROM
   package_activity_xref pax
INNER JOIN packages ON packages.id = pax.package_id
INNER JOIN activities ON activities.id = pax.activity_id 
```

PHP：

```
$results = get_assoc_array_from_sql($your_query);
$outputArray = array();

foreach($results as $result) {
   if (array_key_exists($result['package_name'], $outputArray)) {
      // we already have an array at this package, push the new item
      array_push($outputArray[$result['package_name']], $result['activity_name']);
   } else {
      // the target array doesn't exist yet, make it
      $outputArray[$result['package_name']] = array($result['activity_name']);
   }
} 
```

基本上，这段代码将遍历整个外部参照表一次（`O(n)`其中外部参照`n`中的记录数）。对于每条记录，它将查看包名称并查看密钥是否存在`$outputArray`。如果不是，则将该键处的值设为具有当前活动名称的数组。如果确实存在，则将当前活动附加到该数组。

如果执行`print_r($outputArray)`后执行，您应该会看到一个数组，`x`其中`x`包含不同包的数量。数组中的每个元素都是另一个数组，`y`其中的元素`y`是给定包的活动数。

注意：您需要`get_assoc_array_from_sql`自己实现，但我假设您已经使用了一些实现，或者您正在使用[mysqli_fetch_assoc()](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)或类似的东西。

# c# - 如何在 selenium 中获取标签文本

> ID：10990906
> 
> 赞同：0
> 
> 时间：2012-06-12T05:20:50.033
> 
> 标签：c#, selenium

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:39:00.250

`Text`为此目的有财产：

```
IWebElement anchor = Driver.FindElementByTagName("a");
string innerText = anchor.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:26:14.833

我找不到 FindElementByTagName() 方法。如果你也有这个问题，也许这可以工作。

```
IWebDriver driver = new RemoteWebDriver(DesiredCapabilities.Firefox());
IWebElement anchor = driver.FindElement(By.TagName("a"));
string text = anchor.Text; 
```

# javascript - 从 Android 代码更改函数值

> ID：10990907
> 
> 赞同：0
> 
> 时间：2012-06-12T05:21:04.917
> 
> 标签：javascript, jquery, android, cordova

我是一名 Android 开发人员，对 JScript/Jquery/Phonegap 等一无所知。我找到了一个示例，并将其网页替换为我的。在我的网页中，我有一个 java 脚本如下：

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">    </script>
<script type="text/javascript">var map;function initialize()
{
var mapDiv = document.getElementById('map-canvas');

map = new google.maps.Map(mapDiv, {center: new google.maps.LatLng(9.0000,-79.5000),zoom: 13,mapTypeId: google.maps.MapTypeId.SATELLITE});
google.maps.event.addListenerOnce(map, 'tilesloaded', addMarkers);}function addMarkers()
{
var bounds = map.getBounds();
var southWest = bounds.getSouthWest();
var northEast = bounds.getNorthEast();
var lngSpan = northEast.lng() - southWest.lng();
var latSpan = northEast.lat() - southWest.lat();
var latLng = new google.maps.LatLng(9.0000,-79.5000);
var marker = new google.maps.Marker({position: latLng,map: map});
}
google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

我想使用我的 android 代码动态更改 Lat-Long 值。请有人指导我这样做。

这些是在 web 视图上加载 html 页面的 android 代码。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.setWebViewClient(new NewsClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setDomStorageEnabled(true);
    mWebView.loadUrl("file:///android_asset/www/map.html");
}

private class NewsClient extends WebViewClient {

    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        System.out.println("URL: " + url);
        view.loadUrl("javascript:changeLocation('" + url + "')");
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:35:30.087

我有一个示例 android 应用程序，其中我使用测试插件作为网关将值从本机代码发送到 Javascript 插件并更新 DOM 值。

[android-cordova-插件](https://github.com/dhavaln/cordova-examples/tree/master/android-cordova-plugin)

如果您熟悉 phonegap 插件，那么代码会更容易理解。我只是在我的 Activity 类中使​​用以下方法来更新 html 端。这`appcomm.updateValues()`是我的网关插件方法，它从本机代码接收值，而无需从 Javascript 发起任何调用。

```
public void sendValue(String value1, String value2) {
        JSONObject data = new JSONObject();
        try {
            data.put("value1", value1);
            data.put("value2", value2);
        } catch (JSONException e) {
            Log.e("CommTest", e.getMessage());
        }
        String js = String.format("window.plugins.appcomm.updateValues('%s');",
                data.toString());
        this.sendJavascript(js);
    } 
```

# mysql - 导入大文件时的 MySQL 奇怪问题：键“PRIMARY”的重复条目

> ID：10990908
> 
> 赞同：1
> 
> 时间：2012-06-12T05:21:24.173
> 
> 标签：mysql, import, phpmyadmin

我的托管公司希望我从 MySQL 4 服务器转移到 MySQL 5.5 服务器。我的数据库相对较大，因为我的网站托管了近 200,000 多名注册用户的数据。

我使用 PHPMyAdmin 导出了所有表，现在我正尝试将它们导入新服务器。一切都很顺利，直到我尝试导入“用户”表。有关信息，这里是它的结构：

```
CREATE TABLE IF NOT EXISTS `user` (
`login` varchar(32) NOT NULL DEFAULT '',
`firstname` varchar(255) NOT NULL DEFAULT '',
`lastname` varchar(255) NOT NULL DEFAULT '',
`email` varchar(255) NOT NULL DEFAULT '',
...
PRIMARY KEY (`login`),
KEY `country_code` (`country_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

没什么壮观的，对吧？使用 PHPMyAdmin 导入选项卡，我上传了 SQL 文件。突然，我收到以下错误：

```
#1062 - Duplicate entry 'Jobi' for key 'PRIMARY' 
```

我立即查询数据库并搜索登录为“Jobi”的用户名。不匹配！

我查看了生成错误的查询并尝试手动执行...

```
INSERT INTO `ft_user`
  (`login`, `firstname`, `lastname`, `email`, ...)
VALUES
  ('Jobi', 'Lorem-First', 'Ipsum-Last', 'xxxxx@yyyy.com', ...); 
```

它工作得很好！

我在我的开发机器上进行了测试并得到了同样的错误。有人可以解释一下我在这里做错了什么吗？

先感谢您。非常感谢任何帮助。

赫维。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:06:35.543

如果输入文件包含具有相同主键值的记录的两个副本，您可能会收到此错误，但是当事务回滚时，该键将不再存在。检查您的输入文件是否有重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T12:43:47.603

在 phpMyAdmin 的设置选项卡中，您可以尝试检查以下值：

Settings -> SQL Queries -> Ignore multiple statement errors 如果您使用的是 CSV 格式：

Settings -> Import -> CSV -> Do not abort on INSERT error 如果您使用的是 SQL 格式：

设置 -> 导出 -> SQL -> 使用忽略插入

# php - PHP 无法初始化 zorba_api 的模块

> ID：10990912
> 
> 赞同：0
> 
> 时间：2012-06-12T05:22:09.253
> 
> 标签：php, windows, zorba

有人知道如何解决此错误吗？

我安装了 zorba，它运行良好，如下所示。

```
C: \>zorba -q 1+1

< ?xml version="1.0" encoding="UTF-8"?>

2
C:\ > 
```

然后我更改了 PHP.ini 以添加扩展模块。

```
extension=zorba_api.dll 
```

然后绑重启Apache，但Apache没有启动。

我无法从 Apache 日志中获得任何消息，

但我收到消息如果我尝试了这个 PHP 操作

```
C: \>php -v

PHP Warning:  PHP Startup: zorba_api: Unable to initialize module

Module compiled with build ID=API20090626,TS,VC9

PHP    compiled with build ID=API20090626,TS,VC6

These options need to match

 in Unknown on line 0

PHP 5.3.4 (cli) (built: Dec  9 2010 21:37:21)

Copyright (c) 1997-2010 The PHP Group

Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies

C:\> 
```

按摩说编译选项在模块和 PHP 之间不匹配。

我想我需要用 VC6 编译的 zorba_api。但我怎样才能得到它？我可以把它带到哪里？

我使用以下产品

Windows Server 2008 R2 标准版

Apache2.2.17

PHP-5.3.4 VC6ts

佐巴 2.1.00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:01:50.633

你可以尝试~~用 VC6 编译 Zorba 或~~使用任何 VS 版本编译 Zorba（风险自负），但将签名更改为 VC6。
*更新：Zorba 不支持 VC6，因为它使用了 C++0x 的一些特性。*

# asp.net - webcal URI 方案上的 ics 文件

> ID：10990915
> 
> 赞同：5
> 
> 时间：2012-06-12T05:22:20.153
> 
> 标签：asp.net, iis, google-calendar-api, icalendar

我使用[DDay iCal 库创建了一个 ics 文件。](http://www.ddaysoftware.com/Pages/Projects/DDay.iCal/) 现在我想用它制作一个日历提要`webcal protocol`。如果我创建的文件的名称是`myCalendar.ics`，则可以使用以下方式访问它：

```
webcal://localhost/myCalendar.ics 
```

我不知道如何实现这一目标。

此外，当我更改 ics 文件中的某些内容（例如活动地点）时，客户端日历代理（例如 Outlook 或 Google 日历）是否会自动获取修改后的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T06:07:28.723

我根据我的组织日历实施了 DDay 日历。

编辑：我通常提供 .ics 文件的完整 URL，并让我的客户将此 URL 粘贴到订阅客户端（在我的情况下为 Outlook）内的 webcal 地址中。我已经在 MS 网站上查找了这个 - 您可以通过在您的 URL 前面加上 webcal:// 而不是 http（或 webcals://，如果使用 SSL）来自动订阅 .ics。见[这里](http://office.microsoft.com/en-us/outlook-help/view-and-subscribe-to-internet-calendars-HA010167325.aspx#BM2)。/编辑

问题 2：是的，日历客户端会在互联网日历中获取更改。例如，Outlook 在正常的 Outlook 发送/接收计划中从 .ics 文件中检索更改。

再次注意，.ics 日历订阅是只读的。如果您希望有一个双向同步日历，那就是另一个问题了...... :)

# java - 如何包装一个字符串

> ID：10990919
> 
> 赞同：1
> 
> 时间：2012-06-12T05:22:50.743
> 
> 标签：java, string

我有一个很长的字符串，例如“The event for mobile”，它们可以是任意长度的字符串，我想显示....在说一定长度之后，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:28:35.153

使用 Apache 公共库的[WordUtils](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html)类。

```
static String wrap(java.lang.String str, 
       int wrapLength, java.lang.String newLineStr, boolean wrapLongWords) 
```

例子 -

```
 String str = "This is a sentence that we're using to test the wrap method";
    System.out.println("Original String 1:\n" + str);
    System.out.println("\nWrap length of 10:\n" + WordUtils.wrap(str, 10));
    System.out.println("\nWrap length of 20:\n" + WordUtils.wrap(str, 20));
    System.out.println("\nWrap length of 30:\n" + WordUtils.wrap(str, 30)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T05:29:50.310

你可以做这样的事情 -

```
 String str = "The event for mobile is here";
    String temp = "";
    if(str !=null && str.length() > 10) {
        temp = str.substring(0, 10) + "...."; // here 0 is start index and 10 is last index
    } else {
        temp = str;
    }
    System.out.println(temp); 
```

输出将是 - 事件 ....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:29:26.227

```
String template = "Hello I Am A Very Long String";
System.out.println(template.length() > 10 ? template.substring(0, 10) + "..." : template); 
```

您可以只查看长度，然后执行`substring`.

或者，如果您可以使用 Apache 的通用 Util，请使用此[WordUtils.wrap()](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/WordUtils.html)。

我之前没有好好搜索，[这个SO Post](https://stackoverflow.com/questions/4212675/wrap-the-string-after-a-number-of-character-word-wise-in-java)正是你想要的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T05:31:35.923

如果您想要完整的单词，请执行以下操作：

```
public static void shortenStringFullWords(String str, int maxLength) {
    StringBuilder output = new StringBuilder();
    String[] tokens = str.split(" ");
    for (String token: tokens) {
        if (output.length() + token.length <= maxLength - 3) {
            output.append(token);
            output.append(" ");
        } else {
            return output.toString().trim() + "...";
        }
    }
    return output.toString().trim();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T05:33:01.157

你可以这样做

```
 String longString = "lorem ipusum ver long string";
    String shortString = "";
    int maxLength = 5;
    if(longString != null && longString.length() > maxLength) {
        shortString = longString.substring(0,maxLength - 1)+"...";
    } 
```

在这里，您可以将 maxLength 更改为您想要的数字。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T05:44:30.850

```
String myString ="my lengthy string";
    int startIndex=0, endIndex=myString.length(), lengthLimit = 10;

    while(startIndex<endIndex) {
        System.out.println(myString.substring(startIndex,  startIndex+lengthLimit));
        startIndex = startIndex+lengthLimit+1;
    } 
```

# css - 如何将布局与完整背景对齐？

> ID：10990921
> 
> 赞同：2
> 
> 时间：2012-06-12T05:23:37.833
> 
> 标签：css, layout

我有一个完整的背景布局，但**白色内容框**的位置有一个意外的位置，它并不总是以不同的屏幕分辨率为中心。我应该让它变成液体还是有弹性的？现在它已经修复了。

我尝试对中间的内容框和边距使用固定宽度的容器：0 auto，但这没有做任何事情

**见代码**：[http ://avisuals.web.fc2.com/testexample.html](http://avisuals.web.fc2.com/testexample.html)

我应该怎么办？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:30:15.583

change as per this in your css file style.css [http://avisuals.web.fc2.com/style.css](http://avisuals.web.fc2.com/style.css)

```
#container{
width: 960px;
margin: 0 auto;
} 
```

and remove margin from

```
#contentbox-top and #content1 and contentbox-bottom 
```

ie

```
#contentbox-top {
margin: 0 auto;
background-image: url(images/content_top.png);
background-repeat: no-repeat;
_background: none;
_filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=images/content_top.png,sizingMethod=crop);
width: 700px;
height: 37px;
position: relative;
z-index: 1;
}

#content1 {
margin: 0 auto;
background: url(images/content_middle.png) repeat-y center;
width: 692px;
position: relative;
}

#contentbox-bottom {
margin: 0 auto;
background-image: url(images/content_bottom.png);
_background: none;
_filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=images/content_bottom.png,sizingMethod=crop);
background-repeat: no-repeat;
width: 700px;
height: 37px;
position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:31:11.220

Set the element that contains the element you want centered to have `text-align:center`. Then set the element you want centered to have a left and right margin of `auto`. Then anything above those needs to have a width that allows it to expand to the width of the screen. Set it to `width:auto` or simply omit the width property.

Looking at your site you want to center `#container` inside the body element. Make sure to also give `#container` the appropriate width.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:35:42.077

要解决您遇到的问题。我认为您应该设置`margin:0 auto`。您设置`margin-top`并`margin-left`在设置之后`margin:0 auto`。我认为这可能会导致问题。

检查[演示小提琴](http://jsfiddle.net/W7V6M/)。

希望它可以帮助你。

# javascript - 在我的脚本上工作的 javascript 剥离标签

> ID：10990924
> 
> 赞同：0
> 
> 时间：2012-06-12T05:24:16.050
> 
> 标签：javascript, strip-tags, zeroclipboard

我正在使用[ZeroClipboard](https://github.com/jonrohan/ZeroClipboard/)从生成器中复制代码，然后用户可以粘贴该代码。我可以轻松地将代码从生成器复制到剪贴板，但是当我在它`.replace`之后添加命令时，`.innerHTML`它也会复制 html 标签`<p>`和`<span>`. 生成器输出的 HTML 如下所示：

```
<div id="jj_yourcode_br" class="jj_yourcode">
    <p>border-radius: <span id="jj_radius">10</span>px; </p>
</div> 
```

以及从元素中获取文本并尝试将 HTML 标记替换为空白值的 javascript。

```
<script type="text/javascript">
    ZeroClipboard.setMoviePath( 'http://joomjunk.co.uk/modules/mod_css3_gen/js/ZeroClipboard.swf' );
    var clip = new ZeroClipboard.Client();

    clip.setText( document.getElementById('jj_yourcode_br').innerHTML.replace(/<\S[^><]*>/g, '' );
    clip.glue( 'd_clip_button' );
</script> 
```

我对 javascript 代码做错了什么，如何修复它以消除这些标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:32:51.367

你错过了`)`那里

```
clip.setText(document.getElementById('jj_yourcode_br').innerHTML.replace(/<\S[^><]*>/g, '' )); 
```

# php - 如何检查删除的记录是否是最后一条记录离开MySQL PHP

> ID：10990927
> 
> 赞同：2
> 
> 时间：2012-06-12T05:24:53.947
> 
> 标签：php, mysql

所以我的网站上有一个评论部分（博客风格），所以每个帖子都有一个评论部分。

我有一个表“帖子”字段（post_id、isComment、标题、时间戳、帖子等）

isComment 是一个布尔值，表示帖子是否有任何评论。如果为 0，则不搜索或显示评论，如果为 1，则查询表评论以获取该帖子的评论。

还有一个表“comments”，其中包含字段（comment_id、post_id、created 等）

post_id 是评论对应的帖子。

目前删除评论的查询是：

```
 "REMOVE FROM comments WHERE comment_id = '$id';" 
```

我想知道的是，是否有任何方法可以确定删除的评论是否是与该帖子对应的最后一条评论？如果是这样，那么我会将该帖子的 isComment 值更改为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:35:36.390

每次删除评论后，您都可以触发查询以查找该帖子的评论数量。

就像是。

```
select count(*) from comments where post_id = (select post_id from comments where comment_id='$id') 
```

// 如果需要，您可以优化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:33:22.297

查询给定帖子的任何评论。如果没有返回任何行，请使用另一个查询重置您的 isComment 标志。（可能有一种更有效的方法来使用数据库来使用其函数来计算行数并采取相应的行动。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:33:51.110

有几种方法可以解决这个问题。首先，您可以只计算剩下的数量并采取相应的行动：

```
SELECT count(*) FROM comments WHERE post_id = '$id' 
```

或者，如果您在删除评论时已经有评论计数，您可以调用`mysql_affected_rows(...)`或`mysqli_affected_rows(...)`确定是否实际删除了某些内容以及删除了多少。

另外，我相信您的原始查询，我相信您的语法应该是 DELETE 而不是 REMOVE？

```
DELETE FROM comments WHERE comment_id = '$id'; 
```

# php - 使用 PHP 控制用户输入的 Javascript / HTML / textarea 并防止 iframe hack

> ID：10990929
> 
> 赞同：0
> 
> 时间：2012-06-12T05:25:04.410
> 
> 标签：php, linux, security, iframe, code-injection

我开发了一个网站，允许用户将小部件嵌入到他们的个人资料中。

这些小部件允许 html 并支持从 youtube 嵌入代码 (iframe) 到 Google Analytics 代码 (JavaScript) 的任何内容。

我最近了解到黑客使用 iframe 和 JavaScript 来利用站点登录和 ftp 访问。

是否有某种 php 解决方案可以集成到我的网站中以避免这些类型的黑客攻击，同时仍然允许用户将 HTML 小部件嵌入到他们的个人资料中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:32:26.920

不。

您无法机械地区分所有“好”JavaScript（例如，Google Analytics）和“坏”JavaScript。（如果没有将您批准的脚本列入白名单，这将不可避免地不允许用户想要的一切，或者将不合适的脚本列入黑名单，这将不可避免地成为一场打地鼠游戏。）

您将需要停止允许用户将任意 HTML 注入您的站点。

# facebook - event_member 不返回所有成员

> ID：10990930
> 
> 赞同：0
> 
> 时间：2012-06-12T05:25:06.140
> 
> 标签：facebook, events

event_member 不返回所有成员。

event_member 似乎没有不公开的成员。

也是文档中的示例事件。 [https://developers.facebook.com/docs/reference/fql/event_member/](https://developers.facebook.com/docs/reference/fql/event_member/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:14:00.903

# java - 在 java 7 中使用 log4j 时找不到 log4j.properties

> ID：10990939
> 
> 赞同：2
> 
> 时间：2012-06-12T05:26:39.363
> 
> 标签：java, log4j, java-7

我已经构建了一个可执行 jar 并使用 log4j。首先我使用 Java6 构建它，它运行完美。但是当我将 JDK 更新到 1.7 版并再次构建我的项目时。似乎找不到该`log4j.properties`文件，因为我找不到我的日志文件和控制台中的日志格式也是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:30:44.560

Have you extracted your .JAR file to ensure that "log4j.properties" exists in the root folder? Are you sure that it is named correctly (it is named "log4j.perperties" in your question).

Troubleshooting suggestions:

1.  Run app with "-Dlog4j.debug" flag and observe log4j output
2.  Run project without "-jar" to avoid jar packaging issues (e.g. "java -cp ./xxx.jar com.pkg.AppClass")
3.  Examine encoding of the log4j.properties file
4.  Attempt manual initialization of log4j within your application, first with an external file then with the internal classpath file

I do not see any obvious JDK7 & log4j conflicts with a few minutes of googling, so it doesn't look like a "known JDK7 issue" to me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:43:02.983

我遇到了类似的问题，即使条目正确，也没有出现日志记录。后来我发现其中一个 jar 文件（jxls-reader-0.9.6.jar）有一个文件 log4j.xml，它首先被加载并用作 log4j 日志记录属性文件，因此我们没有收到日志。我已经从 jar 中删除了 log4j.xml，它工作得非常好。

您可能有类似的问题，希望它可能是类似的解决方案。

# php - PHP中的aiContactSafe更改字段顺序

> ID：10990941
> 
> 赞同：0
> 
> 时间：2012-06-12T05:27:21.463
> 
> 标签：php

我使用 aiContactSafe 创建了表单。但是字段顺序不同。如何更改字段顺序？请一步一步告诉我程序。

![在此处输入图像描述](../Images/689af7396481e39243f76ea68b460835.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:58:04.587

做简单的事情，按照您想要的顺序创建表单字段，然后搜索从数据库中获取字段的查询，并按 ASC 顺序中的条件 id 更改顺序。查询可能在模型中或助手中... .希望这会帮助你....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:43:59.993

字段的顺序在配置文件中设置。每个配置文件都可以有自己的字段顺序。因此，只需访问带有配置文件参数的页面，向下滚动并设置所需字段的顺序即可。

# javascript - 使用 HTML/JavaScript/CSS 沿圆形路径移动 div

> ID：10990942
> 
> 赞同：11
> 
> 时间：2012-06-12T05:27:27.853
> 
> 标签：javascript, html, css

我想使用 HTML/CSS/JavaScript 沿着圆形路径移动一个圆圈。有没有办法做到这一点？圆的代码添加如下：

```
.circle {
    width: 50px;
    height: 50px;
    display: block;
    -webkit-border-radius: 50px;
     -khtml-border-radius: 50px;
       -moz-border-radius: 50px;
            border-radius: 50px;
    color: #fff;
    background-color: #b9c1de;
} 
```

```
<div class="circle"></div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T06:03:16.317

您可以使用纯 css3 实现此目的。像这样写：

**CSS**

```
.dot{
    position:absolute;
    top:0;
    left:0;
    width:50px;
    height:50px;
    background:red;
    border-radius:50%;
}
.sun{
    width:200px;
    height:200px;
    position:absolute;
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-timing-function:linear;
    -webkit-animation-name:orbit;
    -webkit-animation-duration:5s;
    top:50px;
    left:50px;
}

@-webkit-keyframes orbit { 
from { -webkit-transform:rotate(0deg) } 
to { -webkit-transform:rotate(360deg) } 
} 
```

**HTML**

```
<div class="sun">
 <div class="dot"></div>
</div>​ 
```

检查这个[http://jsfiddle.net/r4AFV/](http://jsfiddle.net/r4AFV/)

**更新**

[http://jsfiddle.net/r4AFV/1/](http://jsfiddle.net/r4AFV/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T06:25:13.447

这是我拼凑的一个纯 JavaScript 解决方案。应该有很好的浏览器支持（不需要 CSS3）。它是高度可配置的。确保查看JavaScript 部分*底部的配置选项。*不需要图书馆。

[http://jsfiddle.net/nN7ct/](http://jsfiddle.net/nN7ct/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T05:45:10.337

现在是数学时间！

```
function circle(){
    var width = 10,
        height = 10,
        offsetX = 100,
        offsetY = 100,
        x = Math.cos(new Date()) * width + offsetX;   //Remember high school?
        y = Math.sin(new Date()) * height + offsetY;

    //Do whatever you want here with the coordinates.
    document.getElementsByClassName("circle")[0].style.left = x+"px";
    document.getElementsByClassName("circle")[0].style.top = y+"px";

    setTimeout(circle, 50);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-18T08:43:17.473

使用 CSS 在圆形路径中移动容器 div 有两种方法：

**1）动画CSS变换属性：**
要旋转的元素必须有一个父元素。现在如果你想将孩子移动 60 度，首先将父级旋转 60 度，然后将孩子旋转 -60 度（相反的角度，这样孩子不会看起来倒立）。
使用 CSS 过渡、CSS 动画或 Web Animations API 来执行动画。

关于以下代码：
父级具有相对定位。通过给定相等的高度、宽度、边框半径 = 50% 使其成为圆形，
孩子具有绝对位置。它被赋予了高度和宽度、顶部和左侧属性，因此它出现在父级的顶部中间。

```
#parent {
    position: relative;
    width: 300px;
    height: 300px;
    border: 1px solid rgba(0,0,0,0.1);
    border-radius: 50%;
    transform: rotate(0deg);
    transition: transform 0.7s linear;
}

#child {
    position: absolute;
    width: 80px;
    height: 80px;
    transform: rotate(0deg);
    transition: transform 0.7s linear;
    top: -40px;   
    left: 110px;
    border: 1px solid black;
}

$("#button").on('click', function() {
    $("#parent").css({ transform: 'rotate(60deg)' });
    $("#child").css({ transform: 'rotate(-60deg)' });
}); 
```

[http://usefulangle.com/post/32/moving-an-element-in-circular-path-with-css](http://usefulangle.com/post/32/moving-an-element-in-circular-path-with-css)是我写的一篇博文。还包含一个演示。

**2) 动画 CSS 偏移位置属性：**
使用新的 CSS 运动路径或偏移路径，可以沿任何路径为元素设置动画。但是截至目前（2017 年 1 月），它仅适用于最新版本的 Chrome。
您必须使用*offset-path*属性定义圆形 SVG 路径。然后使用 CSS 过渡、CSS 动画或 Web 动画 API 为该路径 上的*offset-distance属性设置动画。*
除了定义 SVG 路径之外，您还可以设置 set *offset-path: margin-box*。这会将路径定义为父级的边距边界。如果父级已使用边框半径设置为圆形，则路径也将是圆形的。

```
#child {
    offset-path: margin-box;
} 
```

请参阅[http://usefulangle.com/post/33/moving-element-in-circular-path-with-css-offset-path](http://usefulangle.com/post/33/moving-element-in-circular-path-with-css-offset-path)了解有关使用 Motion Path 处理圆形动画的相关博客文章。

# flash - 通过闪存检索页面数据

> ID：10990948
> 
> 赞同：0
> 
> 时间：2012-06-12T05:28:00.717
> 
> 标签：flash, actionscript, flash-builder

所以我需要调用[http://website.com/pagestuff?var1=123&var2=abc](http://website.com/pagestuff?var1=123&var2=abc)并且我需要捕获返回的 json 数据。我一生都无法弄清楚如何捕获随机 url 的 http 响应数据。

```
var apiRequest:URLRequest = new URLRequest("http://lb.website.com/public_api/get_data?t_uuid=6e55c370-9a76-4e7e-b5d9-f6fee4034662");
apiRequest.data.toString(); 
```

就是不会执行。如何以编程方式使用 get 参数发出 http 请求并捕获响应数据。我知道我只是没有找对地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:43:11.490

`Event.COMPLETE`Actionscript 中的请求始终是异步的，因此您必须在数据可用之前进行监听。`URLRequest`本身也不与外部资源通信，需要将其传递给对象`URLLoader`。这是一个例子：

```
private function loadData():void
{
  var request:URLRequest = new URLRequest("http://yourdomain/api/params");
  var loader:URLLoader = new URLLoader();
  loader.addEventListener(Event.COMPLETE, onDataLoaded);
  loader.load(request);
}

private function onDataLoaded(e:Event):void
{
  e.target.removeEventListener(Event.COMPLETE, onDataLoaded);
  var data:String = e.target.data.toString();
  trace(data);
} 
```

# bash - 在 Bash 中将日期时间字符串转换为纪元

> ID：10990949
> 
> 赞同：121
> 
> 时间：2012-06-12T05:28:03.000
> 
> 标签：bash, shell, date

日期时间字符串采用以下格式：06/12/2012 07:21:22。如何将其转换为 UNIX 时间戳或纪元？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-12T05:29:26.067

您正在寻找的是`date --date='06/12/2012 07:21:22' +"%s"`. 请记住，这假设您使用的是 GNU coreutils，因为两者`--date`和`%s`格式字符串都是 GNU 扩展。POSIX 没有指定其中任何一个，因此即使在 POSIX 兼容系统上也没有可移植的方式进行此类转换。

有关其他版本的`date`.

注意： bash`--date`和`-d`option 需要 US 或 ISO8601 格式的日期，即`mm/dd/yyyy`or `yyyy-mm-dd`，而不是 UK、EU 或任何其他格式。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-01-16T06:32:13.570

For Linux, run this command:

```
date -d '06/12/2012 07:21:22' +"%s" 
```

For macOS, run this command:

```
date -j -u -f "%a %b %d %T %Z %Y" "Tue Sep 28 19:35:15 EDT 2010" "+%s" 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-04-28T14:04:04.833

很多这些答案都过于复杂，而且还缺少如何使用变量。这是您在标准 Linux 系统上更简单的方法（如前所述，必须为 Mac 用户调整 date 命令）：

示例脚本：

```
#!/bin/bash
orig="Apr 28 07:50:01"
epoch=$(date -d "${orig}" +"%s")
epoch_to_date=$(date -d @$epoch +%Y%m%d_%H%M%S)    

echo "RESULTS:"
echo "original = $orig"
echo "epoch conv = $epoch"
echo "epoch to human readable time stamp = $epoch_to_date" 
```

结果是 ：

```
RESULTS:
original = Apr 28 07:50:01
epoch conv = 1524916201 
epoch to human readable time stamp = 20180428_075001 
```

或者作为一个函数：

```
# -- Converts from human to epoch or epoch to human, specifically "Apr 28 07:50:01" human.
#    typeset now=$(date +"%s")
#    typeset now_human_date=$(convert_cron_time "human" "$now")

function convert_cron_time() {
    case "${1,,}" in
        epoch)
            # human to epoch (eg. "Apr 28 07:50:01" to 1524916201)
            echo $(date -d "${2}" +"%s")
            ;;
        human)
            # epoch to human (eg. 1524916201 to "Apr 28 07:50:01")
            echo $(date -d "@${2}" +"%b %d %H:%M:%S")
            ;;
    esac
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-04-29T15:09:33.223

只需确定您要使用的时区即可。

```
datetime="06/12/2012 07:21:22" 
```

最流行的使用需要机器时区。

```
date -d "$datetime" +"%s" #depends on local timezone, my output = "1339456882" 
```

但是，如果您有意传递 UTC 日期时间并且想要适当的时区，则需要添加`-u`标志。否则，您将其从本地时区转换。

```
date -u -d "$datetime" +"%s" #general output = "1339485682" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-09T14:15:39.090

# 在bash中将*日期时间字符串*转换为*纪元*的有效方法

避免*无用的重复*分叉，以使翻译**更快**...

`date -f - +%s`我们可以作为后台进程运行，而不是为每个翻译运行 1 个 fork ...

## 介绍

常用语法：

```
epochDate=$(date -d "$InputDate" +%s) 
```

工作正常，但如果重复运行会变得沉重！

在这篇文章中，你会发现

*   一个*快速演示*，在此之后，
*   一些*解释*，
*   可用于许多*Un*x*工具 ( , , ...)的*函数。**`bc``rot13``sed`*

 *### 快速演示

```
fifo=$HOME/.fifoDate-$$
mkfifo $fifo
exec 5> >(exec stdbuf -o0 date -f - +%s >$fifo 2>&1)
echo now 1>&5
exec 6< $fifo
rm $fifo
read -t 1 -u 6 now
echo $now 
```

这必须输出当前的*UNIXTIME*。从那里，你可以比较

```
time for i in {1..5000};do echo >&5 "now" ; read -t 1 -u6 ans;done
real    0m0.298s
user    0m0.132s
sys     0m0.096s 
```

和：

```
time for i in {1..5000};do ans=$(date +%s -d "now");done 
real    0m6.826s
user    0m0.256s
sys     0m1.364s 
```

**从超过6秒到不到半秒！！**（在我的主机上）。

您可以检查`echo $ans`，替换`"now"`为`"2019-25-12 20:10:00"`等等...

或者，一旦*日期子流程*的要求结束，您可以：

```
exec 5>&- ; exec 6<&- 
```

## 原帖（详细解释）

与其按日期运行 1 个*fork*进行转换，不如`date`只运行 1 次并使用相同的进程进行所有转换（这可能会变得更快）！：

```
date -f - +%s <<eof
Apr 17  2014
May 21  2012
Mar  8 00:07
Feb 11 00:09
eof
1397685600
1337551200
1520464020
1518304140 
```

样本：

```
start1=$(LANG=C ps ho lstart 1)
start2=$(LANG=C ps ho lstart $$)
dirchg=$(LANG=C date -r .)
read -p "A date: " userdate
{ read start1 ; read start2 ; read dirchg ; read userdate ;} < <(
   date -f - +%s <<<"$start1"$'\n'"$start2"$'\n'"$dirchg"$'\n'"$userdate" ) 
```

那么现在看看：

```
declare -p start1 start2 dirchg userdate 
```

> （可能会回答类似：

> ```
> declare -- start1="1518549549"
> declare -- start2="1520183716"
> declare -- dirchg="1520601919"
> declare -- userdate="1397685600" 
> ```

这是在一次执行中完成的！

### 使用*长时间运行的*子进程

我们只需要一个*fifo*：

```
mkfifo /tmp/myDateFifo
exec 7> >(exec stdbuf -o0 /bin/date -f - +%s >/tmp/myDateFifo)
exec 8</tmp/myDateFifo
rm /tmp/myDateFifo 
```

（注意：当进程正在运行并打开所有描述符时，我们可以安全地删除 fifo 的文件系统条目。）

那么现在：

```
LANG=C ps ho lstart 1 $$ >&7
read -u 8 start1
read -u 8 start2
LANG=C date -r . >&7
read -u 8 dirchg

read -p "Some date: " userdate
echo >&7 $userdate
read -u 8 userdate 
```

我们可以构建一个小功能：

```
mydate() {
    local var=$1;
    shift;
    echo >&7 $@
    read -u 8 $var
}

mydate start1 $(LANG=C ps ho lstart 1)
echo $start1 
```

## 或者使用*我的* `newConnector`功能

具有*连接**功能*和... _ _ **`MySQL/MariaDB`**`PostgreSQL`**`SQLite`**

 *[您可以在GitHub](https://github.com/F-Hauri/Connector-bash)或我的网站上找到它们的不同版本：[下载](http://f-hauri.ch/vrac/shell_connector.sh)或[显示](http://f-hauri.ch/vrac/shell_connector.sh.txt)。

```
wget https://raw.githubusercontent.com/F-Hauri/Connector-bash/master/shell_connector.bash

. shell_connector.bash 
newConnector /bin/date '-f - +%s' @0 0

myDate "2018-1-1 12:00" test
echo $test
1514804400 
```

**注意：**在*GitHub 上*，functions 和 test 是分开的文件。在*我的站点*上，如果此脚本不是*来源*，则简单地运行测试。

```
# Exit here if script is sourced
[ "$0" = "$BASH_SOURCE" ] || { true;return 0;} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-25T13:45:40.193

```
get_curr_date () {
    # get unix time
    DATE=$(date +%s)
    echo "DATE_CURR : "$DATE
}

conv_utime_hread () {
    # convert unix time to human readable format
    DATE_HREAD=$(date -d @$DATE +%Y%m%d_%H%M%S)
    echo "DATE_HREAD          : "$DATE_HREAD
} 
```**

# java - java中整数比较的相对效率？

> ID：10990954
> 
> 赞同：-1
> 
> 时间：2012-06-12T05:28:45.900
> 
> 标签：java, performance, cpu-architecture

java中整数比较的相对效率是多少？

`==` `>=` `<=` `>` `<`

它取决于物理架构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:30:57.033

我怀疑有很大的不同。如果有，编译器很有可能会将您的表达式转换为最佳测试。如果参数之一为 0，则应该没有区别。

如果您正在做的事情完全不同，我想知道它是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:33:25.010

是的，这取决于您的硬件架构和 JVM：Java 在实现 Java 虚拟机规范的虚拟机中运行，请参阅[http://docs.oracle.com/javase/specs/jvms/se7/html/index.html](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html) . 有各种各样的 JVM，它们都以不同的方式实现 java 代码（例如，此列表中的那些：[https](https://en.wikipedia.org/wiki/List_of_Java_virtual_machines) ://en.wikipedia.org/wiki/List_of_Java_virtual_machines ）每个 JVM 和处理器架构都可以以不同的方式实现您的代码，因此您的确切结果将因他们而异。

也就是说，其他答案是正确的，这些运算符在实践中都应该与实际代码有效地相同。其他运算（例如乘法、浮点运算和更复杂的计算）将对处理器时间产生更大的影响，因为它们执行起来并不简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:41:39.690

它们都是 Java 字节码中形式`if_acmp<cond>`为 、`if_icmp<cond>`、`if<cond>`等的单个操作码，我无法立即回忆起任何硬件架构，其中针对各种条件或不同的循环时间存在显着不同的操作码。在我构建的一两个解释器中，我只实现`<`,`==`和`>`, 并使用跟随来执行其他解释器来节省代码空间`NOT`，但这只是用于玩具语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T06:22:08.817

大多数硬件指令集将这些比较作为两个指令进行比较，然后是一个分支，具体取决于比较的结果。因此，对于大多数硬件上的大多数 JVM 来说，它的 <、<=、= >=、> 还是 != 都没有区别，它是相同的两条指令，但设置了不同的标志。

看到[这个问题](https://stackoverflow.com/questions/1123396/machine-code-to-compare-two-numbers)

当然，这完全取决于指令集以及 JVM 作者和他们的 C 编译器如何选择使用它。

# ios - 如何在屏幕顶部附近通过触摸显示导航栏？

> ID：10990963
> 
> 赞同：0
> 
> 时间：2012-06-12T05:29:29.567
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

我想要做的是首先隐藏导航栏，然后如果用户触摸屏幕顶部（应该在哪里），导航栏将显示大约 1 或 2 秒并消失。

我尝试添加一个与背景颜色相同的按钮，然后在触摸它时显示导航栏，但这似乎不起作用。

另外，我将如何进行演示，以便向用户展示这可行？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:48:59.543

首先在应用委托中隐藏导航栏。然后来到要添加触摸事件的视图控制器，并使用这两种方法：

*   (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event

{

```
//mouseSwiped = NO;
CGPoint touchPoint;
//CGPoint touchPointNavigationBar;
UITouch *touch = [touches anyObject];
touchPoint=[touch locationInView:self.view];
if (self.navigationController.navigationBarHidden==YES) {
    if (touchPoint.y<50) {
        self.navigationController.navigationBarHidden=NO;
        timer=[NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(hideNavigationBar) userInfo:nil repeats:NO];  
        [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];
    }
} 
```

}

-（无效）隐藏导航栏

{

```
self.navigationController.navigationBarHidden=YES;
if ([timer isValid]) {
    [timer invalidate];
    return;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:37:46.757

这是获得输出的方法之一。我正在逐行解释此代码，这将更好地帮助您。

1]

在视图顶部添加一个按钮，并将任何**透明**背景图像添加到该按钮并写入**self.navigationController.navigationBarHidden = YES;** 在 viewDidLoad 中。

// 这将隐藏您的导航栏，现在您可以创建自己的自定义导航栏。

2]

现在在 xib 中使用 sepatare UIView，将其命名为 view2 并与相应的 IBOutlet 连接。

取各自的 IBOutlets 和 IBAction 和两个函数，然后连接到视图和按钮。

> 下面的代码，进入 .h 文件 >>>>>
> 
> > IBOutlet UIButton *btnHideNShow; // 将此连接到按钮
> > 
> > IBOutlet UIView *viewTemp; // 将此连接到视图
> > 
> > -（IBAction）btnHideNShowAction：（id）发件人；// 将此连接到按钮
> > 
> > -（无效）乐趣1；
> > 
> > -（无效）乐趣2；

3]

> > 现在下面的代码进入.m文件>>>>

-(IBAction)btnHideNShowAction:(id)sender{

```
btnHideNShow.hidden = YES;
[NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(fun1) userInfo:nil repeats:NO]; 
```

}

-（无效）乐趣1{

```
viewTemp.frame = CGRectMake(0, 0, 320, 59);
[self.view addSubview:viewTemp];

[NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(fun2) userInfo:nil repeats:NO]; 
```

}

-（无效）乐趣2{

```
[viewTemp removeFromSuperview];
btnHideNShow.hidden = NO; 
```

}

> > 您可以根据您的要求自定义此视图。

# sql-server - 托管 MS Sql 的免费云存储

> ID：10990968
> 
> 赞同：3
> 
> 时间：2012-06-12T05:29:38.817
> 
> 标签：sql-server, visual-studio-2010, azure, cloud

是否有任何免费的云存储，如亚马逊云、谷歌云等。可以让我在上面托管实时 ms sql 数据库。我想用更好的话来说，有没有像 Azure 这样的免费 3rd 方类型软件？然后我会在 Visual Studio 中将它用于应用程序。感谢您的任何提示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:39:26.663

您不能在 Amazon、google 或 Microsoft 存储上托管 MS SQL。要在云上运行 MS SQL 服务器 - 您有以下选项：

1.  在 Azure VM 角色上运行它
2.  将其作为 Windows Azure SQL 数据库运行
3.  在 Amazon RDS 上运行
4.  在亚马逊虚拟机上运行它
5.  在其他 IaaS/DBaaS 上

虽然，我提到的每个选项都有免费套餐 - 如果您超过免费套餐，它们就不是免费的。

# javascript - regular expression to check ' \ '

> ID：10990976
> 
> 赞同：3
> 
> 时间：2012-06-12T05:29:54.007
> 
> 标签：javascript, regex

I am using the following regular expression to check name format.

```
/^([A-Za-z0-9\s_@.-])*$/ 
```

Name should contain only alphanumeric characters,`_`,`@`,`.`,`-`and space. But this regular expression is not restricting '\'.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:52:50.673

尝试这个

[A-Za-z_-@。0-9]{1,250}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:44:55.143

我修改了您的表达式，因为`/^([A-Za-z0-9 _@.-])*$/;` 给出了 \s 空间

尝试这个

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" language="javascript">

function chkit()
{
    var password=document.getElementById('password').value;
   var namep=/^([A-Za-z0-9 _@.-])*$/;

    var name=document.getElementById('name').value;
    if(name!="")
    {
        if(!namep.test(name))
            {
                alert('name not in format');
            }
            else
            {
                alert('name In format');
            }
    }
}

</script>
</head>

<body>
  <p>
    <label for="name">name</label>
    <input name="name" type="text" id="name" onblur="chkit();"  />
  </p>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:53:46.210

您的代码正在运行：

```
Test 1:
"\\".search(/^([A-Za-z0-9\s_@.-])*$/);

//-1

Test 2:
"Apple\\Microsoft".search(/^([A-Za-z0-9\s_@.-])*$/);

//-1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T06:03:47.733

**你可以试试这个**

```
if (/^([\w\s@.-]+)$/i.test(subject)) {
    // Successful match
} else {
    // Match attempt failed
} 
```

# jquery - 切换双击，jquery

> ID：10990979
> 
> 赞同：1
> 
> 时间：2012-06-12T05:30:18.247
> 
> 标签：jquery

如何使用 jquery 在双击时显示或隐藏 div？

```
$("body").dblclick(function() { 
            $("#plot_on_map_form").show("medium").css({top: event.pageY,left: event.pageX});
        },
        function() {
            $("#plot_on_map_form").css({display:"none"});
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:44:18.610

```
<div>Div</div>

$(document).dblclick(function(){
    $('div').toggle();
}); 
```

演示：http: [//jsfiddle.net/dth9R/](http://jsfiddle.net/dth9R/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:35:14.643

根据 jquery docs [http://docs.jquery.com/Events/toggle](http://docs.jquery.com/Events/toggle) 你可以尝试这样的显示和隐藏

```
 $("li").dblclick(function() {
       if($(this).didSomeThing == true){
           $(this).backToNormal();
           $(this).didSomeThing = false;
           return;
       }
       $(this).doSomething();
       $(this).didSomeThing = true;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:10:27.877

您已经使用了两个功能块，但在这种情况下，这在这里不起作用。

使用一个功能块并使用jquery函数toggle()。

这将解决问题。

# jquery - 无效的 XML 错误

> ID：10990987
> 
> 赞同：0
> 
> 时间：2012-06-12T05:31:19.207
> 
> 标签：jquery, xml, parsing

我有以下代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<p id="someElement"></p>
<p id="anotherElement"></p>

<script>
var xml = "<count>1</count><ticketID id='2'><incidentUrl>3</incidentUrl></ticketID>",
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$title = $xml.find( "count" );

/* append "RSS Title" to #someElement */
$( "#someElement" ).append( $title.text() );

/* change the title to "XML Title" */
$title.text( "XML Title" );

/* append "XML Title" to #anotherElement */
$( "#anotherElement" ).append( $title.text() );
</script>

</body>
</html> 
```

上面的代码 - 产生一个错误：无效的 XML

但是，当我将 var xml 更改为： var xml = <count >1</count> 时，它可以正常工作而不会出现任何错误。

为什么是这样 ？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:33:37.657

XML 文档中不能有两个根元素。

请注意，根据[官方语法](http://www.w3.org/TR/REC-xml/#sec-well-formed)，只能有一个“顶级”或“根”元素。

您的示例在顶层同时具有 count 和 ticketId，这是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:34:55.290

您的 XML 有多个根元素

```
<count>1</count><ticketID id='2'><incidentUrl>3</incidentUrl></ticketID> 
```

将其包装在单个容器根元素中，它应该可以工作

```
<container><count>1</count><ticketID id='2'><incidentUrl>3</incidentUrl></ticketID></container> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-14T09:55:06.110

jQuery.parseXML() 将字符串解析为 XML 文档。你的问题..

> 但是，当我将 var xml 更改为： var xml = < count >1</ count > 时，它可以正常工作而不会出现任何错误。
> 
> 为什么是这样？

那是因为您的数据已经是 XML 格式，不需要解析。继续下一行代码。

```
$xml = $( xmlDoc ),
$title = $xml.find( "count" ); 
```

无需解析XML。
希望能帮助到你

# kinect - 如何检测 Kinect 中的运动？

> ID：10990988
> 
> 赞同：0
> 
> 时间：2012-06-12T05:31:20.947
> 
> 标签：kinect, projector

我即将开始 Kinect 开发，希望有人能深入了解以下内容。

我希望在天花板上安装 kinect，就在投影仪下方。投影仪将显示一个有一些鱼的池塘（类似于 Microsoft Windows 7 Touch pack）。

然后我希望能检测到人们进出投影的运动，并添加涟漪或移动鱼等。

我不需要跟踪人们的形状，只需知道他们是否在框架中以及他们在哪里。事实上，如果有人把足球滚过，我也很乐意追踪它。

在接下来的几天里，我将为自己准备一台 Kinect，但如果有人知道这是不可能的，请告诉我。如果有可能，那么任何让我开始的指针都会很棒。

谢谢，帕特里克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:36:44.970

在开始之前，您需要决定使用哪个软件来访问 Kinect。两个最受欢迎的选择是：

*   微软的[Kinect for Windows SDK](http://www.microsoft.com/en-us/kinectforwindows/develop/)
*   [开放式NI](http://www.codeproject.com/Articles/148251/How-to-Successfully-Install-Kinect-on-Windows-Open)

还有[libfreenect](http://openkinect.org/wiki/Main_Page)，但它只提供原始深度数据，在我看来，它比上述两个更难使用。

Kinect for Windows SDK 和 OpenNI 都提供骨骼跟踪，这是一种非常方便的方法来详细检测用户的位置及其身体部位。然而，在您的项目中，骨骼跟踪很可能无法正常工作，因为 Kinect 安装在天花板上并指向下方。所提供的跟踪算法在直接面对用户时效果最佳，并且如果大部分身体是可见的（除了 f

对于您的项目，您可能根本不需要骨架跟踪（它可以在 Kinect for Windows SDK/OpenNI 中停用）。我能想到的一种方法是：

1.  在应用程序开始时，通过测量从 Kinect 到您将投影图像的表面的距离来校准您的软件。
2.  对于您从 Kinect 接收到的每个新深度帧，您检查当前帧和校准帧之间的差异。如果当前帧中有一大块像素比校准帧更靠近传感器，您可以假设它是一个对象。

当然，Kinect 的深度测量并不完美。您必须提供某种纠错功能以过滤掉误报。

Using this approach, you will be able to detect most objects sitting on or moving over the surface.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:13:40.663

I would rather put the sensor on one of the walls, close to the ceiling, instead of on the ceiling pointing directly downwards, this way you will have a better field of view, and you can still use skeleton/user tracking algorithms.

Note that the sensor have a minimum distance of ~50cm so if you have a low ceiling you might encounter problems with people straight under the sensor.

If you use OpenNI you can use Nite's SceneAnalysis, which tracks people, and you can get their center of mass easily.

# java - Android SQLite：使用 onUpgrade 更新数据？

> ID：10990990
> 
> 赞同：2
> 
> 时间：2012-06-12T05:31:31.643
> 
> 标签：java, android, sqlite

假设我有一个 SQLite 数据库，我在一个单独的程序中创建并包含在应用程序启动时要复制的 assets 文件夹中（假设它不存在）。数据库包含两列，A 和 B。假设 A 包含位置列表（巴黎、伦敦、纽约等——用户无法编辑的内容），B 存储用户访问相应位置的次数（用户可以在应用程序内编辑）。

现在假设我在原始数据库中拼写错误的位置名称。我进入我的 SQLite 浏览器，快速修复该条目，保存它，然后替换我的资产文件夹中的旧数据库文件。如何更新已复制的数据库中的 A 列，以反映我对资产文件夹中现在只读数据库所做的更改，而不擦除它们存储的数据？

我最初的印象是使用 onUpgrade，但我看到有人说它只是用于更新数据库的架构。在这种情况下，我的架构没有改变，只有其中的一些数据......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:51:24.773

让我们从头开始。当您使用构造函数 SQLiteOpenHelper 打开数据库时，它将从您那里获取版本信息。

如果数据库不存在，它会调用 onCreate 方法。如果现有数据库的版本低于您的版本，则会调用 onUpgrade 方法。

请阅读 android[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)以获取更多信息。

因此，您可以在 onCreate 方法中插入您的初始信息。您可以在 onUpgrade 方法中更改表或向表中插入一些附加信息。

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:46:50.097

`onUpgrade`用于您需要的东西是正确的。我在升级期间更新了模式和静态数据。我的 onUpgrade 结构如下：

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        if (oldVersion < 211)
        {
            // In this version we transfer Log data into new date keeping format - just milliseconds, no string formatting
            db.execSQL("DROP TABLE IF EXISTS " + LogData.TABLE_NAME);
            db.execSQL(LogData.TABLE_CREATE_SQL);
            logInformation(db, "Application upgraded to 2.1.1 level and existing log data cleared from device.");
        }

        if (oldVersion < 212)
        {
        }

        if (oldVersion < 220)
        {
            db.execSQL("DROP TABLE IF EXISTS " + MailData.MAIL_TABLE_NAME);
        }
    } 
```

# sql - Why does using @Table variables cause Adodb issues in the application?

> ID：10990993
> 
> 赞同：1
> 
> 时间：2012-06-12T05:31:49.207
> 
> 标签：sql, sql-server, tsql, asp-classic, adodb

I have [MySp], A stored procedure.

So check this out.. when I run this it works:

```
 SELECT ID,Name FROM Table 
```

But, When I do this, I get an error on the application side (Adodb)

```
 Declare @Table TABLE(ID int,Name varchar(10))

 --- Inserts into table variable ---
 INSERT INTO @Table
 SELECT ID,Name FROM Table

 --- Returns data from table variable ---
 SELECT ID,Name FROM @Table 
```

Keep in mind, in SQL Console i get the same results for [MySp], but in the application/adodb code i get errors.

ASP Code:

```
Set oRS = Server.CreateObject("Adodb.Recordset")
oRS.Open "[MySp]", Conn
If oRS.EOF Then...  <--Gives an error

 ADODB.Recordset error '800a0e78'
 Operation is not allowed when the object is closed. 
```

Does anyone know why I'm getting this error when I use Table variables in SQL?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T06:33:25.677

尝试[`SET NOCOUNT ON`](http://msdn.microsoft.com/en-us/library/ms189837.aspx)在存储过程的顶部添加。

我有一个模糊的回忆，ADO 曾经对插入/更新/删除返回的结果计数感到困惑。

例如：

```
CREATE PROCEDURE MySP
AS

SET NOCOUNT ON

Declare @Table TABLE(ID int,Name varchar(10))

 --- Inserts into table variable ---
 INSERT INTO @Table
 SELECT ID,Name FROM Table

 --- Returns data from table variable ---
 SELECT ID,Name FROM @Table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T08:58:48.490

我有一个稍微复杂（但类似）的问题，不涉及存储过程。

以为我会分享，以防有人发现自己处于类似的位置。

***问题***

**SQL：**

```
DECLARE @a (
Alpha VARCHAR(10),
Beta INT
);
INSERT @a VALUES
('A', 1)

DECLARE @b (
Gamma DATE,
Delta INT
);
INSERT @b VALUES
('2014-01-01', 1)

SELECT *
FROM @a a
JOIN @b b ON a.Beta = b.Delta 
```

**VBA：**

```
Sub GetData()
    Dim sSql
    Dim oConnection As New ADODB.Connection
    Dim oRecordSet As New ADODB.Recordset

    Call oRecordSet.Open(sSqlQuery, oConnection, adOpenStatic, adLockReadOnly)
    Call oConnection.Open("Provider=SQLOLEDB.1;Server=MyServer;Database=MyDB;Trusted_Connection=Yes;")

    sSql = <as Above>

    Call oRecordSet.Open(sSql, oConnection, adOpenStatic, adLockReadOnly)

    If oRecordSet.RecordCount > 0 Then
        ' DO STUFF WITH DATA
    End If

    ' Close objects
    oConnection.Close
    oRecordSet.Close
End Sub 
```

***解决方案***

**SQL_1**

```
CREATE TABLE #a (
Alpha VARCHAR(10),
Beta INT
);
INSERT #a VALUES
('A', 1) 
```

**SQL_2**

```
CREATE TABLE #b (
Gamma DATE,
Delta INT
);
INSERT #b VALUES
('2014-01-01', 1) 
```

**SQL_3**

```
SELECT *
FROM #a a
JOIN #b b ON a.Beta = b.Delta 
```

**SQL_4**

```
DROP TABLE #a; 
```

**SQL_5**

```
DROP TABLE #b; 
```

**VBA**

```
Sub GetData()
    Dim sSql
    Dim oConnection As New ADODB.Connection
    Dim oRecordSet As New ADODB.Recordset

    Call oConnection.Open("Provider=SQLOLEDB.1;Server=MyServer;Database=MyDB;Trusted_Connection=Yes;")

    sSql = <SQL_1>
    Call oConnection.Execute(sSql)

    sSql = <SQL_2>
    Call oConnection.Execute(sSql)

    sSql = <SQL_3>
    Call oRecordSet.Open(sSql, oConnection, adOpenStatic, adLockReadOnly)
    If oRecordSet.RecordCount > 0 Then
        ' DO STUFF WITH DATA
    End If

    sSql = <SQL_4>
    Call oConnection.Execute(sSql)

    sSql = <SQL_5>
    Call oConnection.Execute(sSql)

    oConnection.Close
    oRecordSet.Close
End Sub 
```

***解释***

基本上我的理解是，VBA 试图在初始 INSERT 之后取回结果，因此将其分成单独的命令（执行）并仅在我们查询所需数据时打开记录集似乎可以解决问题。

一个附带问题是我需要使用临时表（我实际上并没有意识到我有权限这样做，因为它是一个实时数据库而且我以前从未使用过这些），因为我相信变量表会消失我打第二个电话的时间。

***其他需要注意的事项***

*   确保仅在完成所有操作后才关闭连接（最初我从单独的函数调用每个命令，并且每次都打开/关闭连接而不考虑它）
*   确保最后删除临时表

希望这对其他人有帮助！

# apex-code - Writing a test case in apex salesforce for the trigger

> ID：10990994
> 
> 赞同：0
> 
> 时间：2012-06-12T05:31:53.180
> 
> 标签：apex-code

I have written a trigger for unique asset name.I have to write a test case for it can someone please help I am new to apex.

trigger NameTrigger on Asset (before insert)

{

list al = new List ();

al = [select Name from Asset];

if(Trigger.isInsert)

{

```
 For(integer i=0;i<al.size();i++)

 {

   for(Asset a2 : Trigger.New)

     {

       if(al[i].Name == a2.Name)

         {

           a2.Name.addError('This value already Exist');

         }

     }

 } 
```

}

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:32:59.800

触发器的测试类看起来像这样。

```
@isTest
private class AssetTriggerTest {

    private static string assetName = 'TestAsset';
    private static Id accId;

    private static void createAccount(){
        Account acc = new Account(name='TestAcc');
        insert acc;
        accId = acc.Id;
    }

    private static Asset createAsset(){
    if(accId == null)
            createAccount();
        return new Asset(Name=assetName, AccountId=accId);
    }

    private static testMethod void testSingleInsert(){
        insert createAsset();

        List<Asset> assets = [SELECT Id FROM Asset WHERE Name = :assetName];
        system.assertEquals(1, assets.size());
    }

    private static testMethod void testInsertExistingName(){
        insert createAsset();

        Exception e;
        try{
            insert createAsset();
        } catch(Exception ex){
            e = ex;
        }

        system.assertNotEquals(null, e);
        system.assert(e instanceOf system.Dmlexception);
        system.assert(e.getMessage().contains('FIELD_CUSTOM_VALIDATION_EXCEPTION'));
        system.assert(e.getMessage().contains('This name is already used'));
    }

    private static testMethod void testDoubleInsertSameName(){

        Exception e;
        try{
            insert new List<Asset>{createAsset(), createAsset()};
        } catch(Exception ex){
            e = ex;
        }

        system.assertNotEquals(null, e);
        system.assert(e instanceOf system.Dmlexception);
        system.assert(e.getMessage().contains('FIELD_CUSTOM_VALIDATION_EXCEPTION'));
        system.assert(e.getMessage().contains('This name is already used'));

    }

} 
```

该类测试触发器不会停止保存有效数据以及确保它停止创建重复项。我还添加了第三个测试，以确保如果`Trigger.new`集合中也存在重复数据，则不会保存数据。您的触发器目前不适合这种情况，因此我提供了一份副本，说明我将如何纠正此触发器以通过所有三个测试；随意忽略。

```
trigger AssetTrigger on Asset (before insert) {

    Map<string, Asset> newAssets = new Map<string, Asset>();
    for(Asset a : Trigger.new){
        if(!newAssets.containsKey(a.Name))
            newAssets.put(a.Name, a);
        else
            a.Name.addError('This name is already used');
    }

    for(Asset a : [SELECT Name FROM Asset WHERE Name IN :newAssets.keySet()]){
        newAssets.get(a.Name).Name.addError('This name is already used');
    }

} 
```

# c# - Two different applications interacting with each other

> ID：10990995
> 
> 赞同：-1
> 
> 时间：2012-06-12T05:31:53.773
> 
> 标签：c#, java

Hy. i want to make 1 multithreaded application probably in C# and other applications in probably in java. like 1 in C# and 99 in java. all the java applications will connect with 1 C# applications and the architecture will be of Client-Server Architecture. i don't understand how to enable them so that the C# application(Server) can communicate with the java application(Client)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:39:25.153

可能有多种方法可以做到这一点：

1.  使用 Web 服务在应用程序之间进行通信
2.  通过 TCP Listner 建立通信
3.  使用第三方[Java .NET Bridge](http://j-integra.intrinsyc.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:42:09.347

您必须决定通信协议。您可以进行基于套接字的通信，您可以使用 Rest over Http。

在第一种方法中，您的服务器必须侦听套接字并基于您自己的协议，您可以与客户端握手并使用简单的 ascii 文本（可以是分隔的、JSON、XML 或您喜欢的任何内容）进行通信。

在第二种方法中，您可以将服务器部署为 Web 组件并使用 http，最好使用 Rest 设计客户端和服务器可以通信。

如果你生活平静，那就试试 Corba ;-)。

基本上寻找不同的 RPC 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T05:56:06.347

这取决于您将使用哪种通信层。

我的建议如下。

1.  在服务器上使用一些网络服务器，如[njetty](http://code.google.com/p/njetty/)。
2.  然后 C# 代码会以 JSON 的形式发布响应
3.  Java 客户端可以通过 http 向网络服务器发送 JSON 请求。

# html - 如何在带有广告的页面中打开图像？

> ID：10990996
> 
> 赞同：0
> 
> 时间：2012-06-12T05:32:03.077
> 
> 标签：html, image, wordpress

我想在一个也可以显示广告的页面中打开相册中的图像，类似于[此页面](http://www.cinemahour.com/gallery/Monal-Gajjar/Monal-Gajjar-Stills-in-Pink-Saree.html)。单击此相册中的任何图片会在包含一些链接（广告）的页面中打开该图像。我也想为[我的网站](http://www.bollyhive.com/south-zone/tamil-actress-tapsee-hot-dancing-photos)做同样的事情。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:40:14.387

您提供的链接示例不是打开图像，而是打开一个新网页。

也就是说，您可以配置缩略图以打开一个新网页，该网页具有包含广告和其他内容的全尺寸图片。

但是，由于您的缩略图直接打开图像，请考虑使用许多可用的**灯箱克隆**中的一种。特别是，您需要一个`iframe`能够展示您的广告内容的设备。有些也可作为 WordPress 插件使用。

**参考：** [**灯箱克隆矩阵**](http://planetozh.com/projects/lightbox-clones/)

**澄清：**灯箱克隆将打开一个独特的网页，该网页与您的广告一起具有非常大的图像，这就是`iframe`每当点击缩略图时使用播放器的原因。

# python - 如何将密码回显为星号

> ID：10990998
> 
> 赞同：8
> 
> 时间：2012-06-12T05:32:20.330
> 
> 标签：python, passwords, echo, msvcrt, getch

我正在尝试创建一个登录窗口，提示用户输入他们的用户名和密码，尽管输入密码时我正在寻找要打印的星号，例如常见的密码输入（即 - Sekr3t 被回显为：* * * * * *)。

这是我到目前为止的代码，我不知道为什么它不回显星号：

```
import msvcrt
import sys

def login(prompt = '> '):
   write = sys.stdout.write

   for x in prompt:
       msvcrt.putch(x)
   passw = ""

   while 1:
       x = msvcrt.getch()
       if x == '\r' or x == '\n':
           break
       if x == '\b':
           # position of my error
           passw = passw[:-1]
       else:
           write('*')
           passw = passw + x
   msvcrt.putch('\r')
   msvcrt.putch('\n')
   return passw 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:10:41.343

您应该能够通过书写字符来擦除星号`\x08 \x08`。将`\x08`光标向后移动一个位置，空格将覆盖星号，然后最后一个`\x08`将光标再次向后移动，将其放在正确的位置以写入下一个`*`。

我不知道如何确定何时键入退格键，但是您可以轻松做到这一点：只需添加类似`print repr(x)`after you've call的内容`x = msvcrt.getch()`，然后启动程序并按退格键即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T07:26:34.753

我认为这种方式非常简单有效

```
import sys
import msvcrt

passwor = ''
while True:
    x = msvcrt.getch()
    if x == '\r':
        break
    sys.stdout.write('*')
    passwor +=x

print '\n'+passwor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-30T02:42:56.330

这些年来我都这样做了……在壳牌……

有关进一步改进它的想法...... [https://antofthy.gitlab.io/info/crypto/passwd_askpass_stars.txt](https://antofthy.gitlab.io/info/crypto/passwd_askpass_stars.txt)

具有许多花里胡哨且仍在不断发展的最终脚本 [https://antofthy.gitlab.io/software/#askpass_stars](https://antofthy.gitlab.io/software/#askpass_stars)

请注意，您真的不应该将它直接包含在您的程序中，而是将其作为密码助手，以便许多程序可以使用它。EG：使用环境变量（如 TTY_ASKPASS）或其他配置设置程序。

见[https://stackoverflow.com/a/67327327/701532](https://stackoverflow.com/a/67327327/701532)

通过这样做，您不会将用户限制为您提供的内容，而是允许从其他地方获取密码。“ssh”甚至“sudo”也这样做。