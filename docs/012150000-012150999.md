# StackOverflow 问答 12150000-12150999

# html - 使用 django 格式化 HTML 表格

> ID：12150007
> 
> 赞同：0
> 
> 时间：2012-08-27T21:43:20.457
> 
> 标签：html, django, html-table

我正在创建一个电子商务网站，我想构建一个页面，我可以在其中查看创建的所有订单的列表。

如果订单仅包含一种类型的项目，则格式可以正常工作，但是当订购了多种类型的项目时，我想不出一种构建表格的方法。

这是订购 2 件商品时的样子（最后一个条目）：

![在此处输入图像描述](../Images/63c54ae3612f0209cb99bd65185b7421.png)

我希望 #18 的“Queso Burrito”位于“牛排和鸡蛋卷饼”的正下​​方。

这是我的代码：

```
<table>
    <tr>
        <td>#</td>
        <td>Name</td>
        <td>Email</td>
        <td>Phone</td>
        <td>Order</td>
        <td>Order Quantity</td>
        <td>Delivered</td>
    </tr>

    {% for ord in orders %}
    <tr>
        <td>{{ord.pk}}</td>
        <td>{{ord.user.first_name}}</td>
        <td>{{ord.user.email}}</td>
        <td>{{ord.user.get_profile.phone}}</td>

        {% for food in ord.orderitem_set.all %}
            <td>{{food.name}}</td>
            <td>{{food.quantity}}</td>
        {% endfor %}

        <td>x</td>
    </tr>
    {% endfor %}

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:55:22.260

对于多个项目，您通常会看到包含针对每个行项目重复的订单数据的表格。

```
{% for order in orders %}
{% for orderitem in order.items %}
<td>{{order.id}}</td><td>...</td>
{% endfor %}
{% endfor %} 
```

如果您想要完全符合您描述的格式，您可以检查内部循环是否超过其第一项并隐藏您不想重复的字段。

```
<table>
    {% for ord in orders %}
        {% for item in ord.orderitem_set.all %}
        <tr> 
            {% if forloop.counter == 1 %}
                <td>{{ord.pk}}</td>
                <td>{{ord.user.first_name}}</td>
                <td>{{ord.user.email}}</td>
                <td>{{ord.user.get_profile.phone}}</td>
            {% else %}
                <td colspan="4"></td>
            {% endif %}
            <td>{{item.name}}</td>
            <td>{{item.quantity}}</td>
            <td>{% if forloop.counter == 1 %}x{% endif %}</td>
        </tr>
        {% endfor %}
    {% endfor %}

</table> 
```

# c# - 使用 for 循环将 TextBox.Text 添加到列表中

> ID：12150008
> 
> 赞同：1
> 
> 时间：2012-08-27T21:43:21.830
> 
> 标签：c#

我正在尝试获取文本框中的值，从 0-9 依次命名，并使用 for 循环将其添加到列表中。我在语法或其他方面有问题。

这就是我现在所拥有的。

```
for (int i = 0; i <= amt.Count(); i++)
        {
            amt[i] = int.Parse(amtBox[i].Text);
        } 
```

错误是 amtBox 在当前上下文中不存在。

我的问题在我有 amtBox[i].Text 的循环中。我已经尝试了几种方法，VS总是抛出错误。我已经尝试过“amtBox”+ i 并且可以编译，但是当我尝试对其执行某些操作并说“数据类型错误”时会导致错误。

我是 C# 新手，来自 PHP，所以也许这就是我认为这种方法可行的原因。PHP 不关心 C# 真正关心的数据类型。我已经在 PHP 中做了很多次这个确切的事情，没有任何问题。

任何关于另一种方法的建议都值得赞赏，因为我可能完全错了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:55:29.630

一种解决方案是声明一个数组并将 amtBox'es 分配给数组中的各个索引，然后您可以迭代该数组。

```
var amtBoxes = new TextBox[] { amtBox0, amtBox1, .... };
for (int i = 0; i <= amt.Count(); i++)
{
    amt[i] = int.Parse(amtBoxes[i].Text);
} 
```

如果您最终需要在其他地方迭代 TextBox 控件，我会考虑将数组作为对象的实例成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:53:08.983

我想你的文本框被命名为“amtBox”+一个数字。（Name 属性以“amtBox1”为例）

在这种情况下，您可以使用

```
 Control[] t = Controls.Find("amtBox" + i, false); 
```

对于这样的代码

```
for (int i = 0; i <= amt.Count(); i++)  
{  
    Control[] t = Controls.Find("amtBox" + i, false);
    if(t != null && t.Length > 0)
    {
        amt[i] = int.Parse(t[0].Text);  
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:54:40.147

我的理解是，您有名为`amtBox1`、`amtBox2`等的文本框，而您要做的是对它们进行排序。正如您所指出的，这在 PHP 中非常容易。可以使用反射来做你建议的事情，但这很昂贵，而且无论如何，可能有更好的方法来做你正在寻找的事情。

您可以将所有金额框放入一个数组中，然后您所拥有的将起作用：

```
var amtBoxes = new[] {
    amtBox1,
    amtBox2,
    amtBox3
} 
```

# javascript - 弹出窗口内的JQuery UI Datepicker

> ID：12150014
> 
> 赞同：1
> 
> 时间：2012-08-27T21:44:03.917
> 
> 标签：javascript, jquery, html, dom, javascript-framework

我需要你的帮助，

我将如何创建一个 javascript 函数，该函数将动态创建一个带有 JQuery UI Datepicker 的自定义弹出窗口？

非常感谢和感谢您的所有帮助。

周杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:59:12.057

使用 jquery UI 并不太难。

HTML：

```
<div id="dialog">

    <div id="datepicker"></div>

</div> 
```

Javascript：

```
$("#datepicker").datepicker();
$("#dialog").dialog(); 
```

还有一个 jsfiddle 可以看到它的实际效果：http: [//jsfiddle.net/Robodude/kgNZN/](http://jsfiddle.net/Robodude/kgNZN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:59:53.497

**演示** [http://jsfiddle.net/k4pmy/](http://jsfiddle.net/k4pmy/)

**代码**

```
$(document).ready(function() {
    $("#popup").dialog({
        open: function() {
            $('#datePicker').removeAttr("disabled");
        },
        close: function () {
            $('#datePicker').datepicker('hide');
        }
    });

    $("#datePicker").datepicker();

    $("#pop_button").click(function() {
        $('#datePicker').attr("disabled", true);

        $("#popup").dialog("open");
    });
});​ 
```

# sql-server - 执行 SQL Server 存储过程 - 附近的语法不正确

> ID：12150015
> 
> 赞同：1
> 
> 时间：2012-08-27T21:44:08.393
> 
> 标签：sql-server, stored-procedures

我收到以下错误。

> *消息 102，级别 15，状态 1，第 5 行
> “@ExcludedDivisionBracketPartIds”附近的语法不正确。*

我不知道为什么会这样。如果我直接执行存储过程，它工作正常。

```
exec sp_executesql N'EXEC [TEST].[DeleteDivisionBracketPartsTEST]  
@DivisionBracketId 
@ExcludedDivisionBracketPartIds 
@MemberId',
N'@DivisionBracketId int,
@ExcludedDivisionBracketPartIds nvarchar(max),
@MemberId int',
@DivisionBracketId=145,
@ExcludedDivisionBracketPartIds=N'473',
@MemberId=53

ALTER PROCEDURE [TEST].[DeleteDivisionBracketPartsTEST]
    @DivisionBracketId INT,
    @ExcludedDivisionBracketPartIds NVARCHAR(MAX),
    @MemberId INT
AS
BEGIN
    SET NOCOUNT ON; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T21:52:29.630

您错过了@DivisionBracketId 和@ExcludedDivisionBracketPartIds 之后的逗号。

它应该是这样的：

```
exec sp_executesql N'EXEC [TEST].[DeleteDivisionBracketPartsTEST]  
@DivisionBracketId, 
@ExcludedDivisionBracketPartIds, 
@MemberId',
N'@DivisionBracketId int,
@ExcludedDivisionBracketPartIds nvarchar(max),
@MemberId int',
@DivisionBracketId=145,
@ExcludedDivisionBracketPartIds=N'473',
@MemberId=53

ALTER PROCEDURE [TEST].[DeleteDivisionBracketPartsTEST]
    @DivisionBracketId INT,
    @ExcludedDivisionBracketPartIds NVARCHAR(MAX),
    @MemberId INT
AS
BEGIN
    SET NOCOUNT ON; 
```

# spring - Cloudfoundry Spring MongoDB 示例应用程序部署失败

> ID：12150018
> 
> 赞同：3
> 
> 时间：2012-08-27T21:44:33.250
> 
> 标签：spring, mongodb, cloud-foundry

当我尝试使用 MongoDB ( [hello-spring-mongodb](https://github.com/SpringSource/cloudfoundry-samples.git) ) 部署示例 Java Spring 应用程序时，我收到下面粘贴的错误，这表明 MongoDB 服务无法绑定。我在自己的所有应用程序中也遇到了这个错误，从命令行和 STS 3.0.0 部署。关键错误是：

创建名为“mongoDbFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found0

完整跟踪：

```
Bind existing services to 'hello-weeels'? [yN]: 
Create services to bind to 'hello-weeels'? [yN]: y
1: mongodb
2: mysql
3: postgresql
4: rabbitmq
5: redis
What kind of service?: 1
Specify the name of the service [mongodb-9c56b]: 
Create another? [yN]: n
Would you like to save this configuration? [yN]: y
Manifest written to manifest.yml.
Creating Application: OK
Creating Service [mongodb-9c56b]: OK
Binding Service [mongodb-9c56b]: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (3K): OK   
Push Status: OK
Staging Application 'hello-weeels': OK                                          
Starting Application 'hello-weeels': ..
Error: Application [hello-weeels] failed to start, logs information below.

====> /logs/stderr.log <====

Aug 27, 2012 9:17:24 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-54519
Aug 27, 2012 9:17:24 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 392 ms
Aug 27, 2012 9:17:24 PM org.apache.catalina.realm.JAASRealm setContainer
INFO: Set JAAS app name Catalina
Aug 27, 2012 9:17:24 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Aug 27, 2012 9:17:24 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Aug 27, 2012 9:17:24 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
Aug 27, 2012 9:17:24 PM org.cloudfoundry.reconfiguration.CloudAutoStagingBeanFactoryPostProcessor usingCloudService
INFO: Found an instance of org.cloudfoundry.runtime.service.AbstractCloudServiceFactory.  Autostaging will be skipped.
Aug 27, 2012 9:17:25 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Aug 27, 2012 9:17:25 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [] startup failed due to previous errors

====> /logs/stdout.log <====

INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Mon Aug 27 21:17:24 UTC 2012]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [root-context.xml]
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [META-INF/cloud/cloudfoundry-auto-reconfiguration-context.xml]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@c292cb2: defining beans [mongoTemplate,mongoDbFactory,__appCloudJpaPostgreSQLReplacementProperties,__appCloudJpaMySQLReplacementProperties,__appCloudHibernatePostgreSQLReplacementProperties,__appCloudHibernateMySQLReplacementProperties,org.cloudfoundry.reconfiguration.CloudAutoStagingBeanFactoryPostProcessor#0]; root of factory hierarchy
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@c292cb2: defining beans [mongoTemplate,mongoDbFactory,__appCloudJpaPostgreSQLReplacementProperties,__appCloudJpaMySQLReplacementProperties,__appCloudHibernatePostgreSQLReplacementProperties,__appCloudHibernateMySQLReplacementProperties,org.cloudfoundry.reconfiguration.CloudAutoStagingBeanFactoryPostProcessor#0]; root of factory hierarchy
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoTemplate' defined in class path resource [root-context.xml]: Cannot resolve reference to bean 'mongoDbFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoDbFactory': Invocation of init method failed; nested exception is org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found0
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T22:58:08.527

代替：

```
<beans profile="default">
    <mongo:db-factory id="mongoDbFactory" dbname="pwdtest" host="127.0.0.1" port="27017"    username="mongo_user" password="passwd"/>
</beans>

<beans profile="cloud">
    <cloud:mongo-db-factory id="mongoDbFactory"/>
</beans> 
```

和：

```
<mongo:db-factory
    id="mongoDbFactory"
    dbname="${mongo.name}"
    host="${mongo.host}"
    port="27017"
    username="${mongo.username}"
    password="${mongo.password}" /> 
```

...并且 cloudfoundry 自动重新配置将正确完成它的工作。如果仍然有问题，请在 Spring Explorer View > Properties 中右键单击您的项目，然后启用“Beans Validator”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:23:26.090

hello-spring-mongodb 无需更改配置即可运行。它在我的 CF 安装上成功部署。首先，我创建了一个 mongoDB 服务：

```
vmc create-service mongoDB 
```

然后我运行：`vmc push hello-sping-mongodb`从目标目录

```
C:\eclipseWork\Indigo\hello-spring-mongodb\target>vmc push hello-spring-mongodb
Would you like to deploy from the current directory? [Yn]:
Detected a Java SpringSource Spring Application, is this correct? [Yn]:
Application Deployed URL [hello-spring-mongodb.vcap.me]:
Memory reservation (128M, 256M, 512M, 1G, 2G) [512M]:
How many instances? [1]:
Bind existing services to 'hello-spring-mongodb'? [yN]: y
1: mongodb-86f0e
Which one?: 1
Create services to bind to 'hello-spring-mongodb'? [yN]:
Would you like to save this configuration? [yN]:
Creating Application: OK
Binding Service [mongodb-86f0e]: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (2K): OK
Push Status: OK
Staging Application 'hello-spring-mongodb': OK
Starting Application 'hello-spring-mongodb': OK 
```

可以尝试先创建mongoDB服务再推送应用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:48:03.440

似乎云配置文件配置未在您的 root-context.xml 中定义。再次检查您是否具有以下配置：

```
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg ref="mongoDbFactory"/>     
</bean>

<beans profile="default">
    <mongo:db-factory id="mongoDbFactory" dbname="pwdtest" host="127.0.0.1" port="27017" username="mongo_user" password="passwd"/>
</beans>

<beans profile="cloud">
    <cloud:mongo-db-factory id="mongoDbFactory"/>
</beans> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T18:10:22.987

确保服务名称匹配，并更新 cloudfoundry-runtime 版本。请参阅我对另一个问题的回答，[此处](https://stackoverflow.com/questions/12132688/sts-3-0-0-with-spring-roo-1-2-2-cannot-deploy-to-cloudfoundry-with-mongodb-servi/13442938#13442938)有相同的例外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T10:21:56.387

您是否更改了预期的 mongo db 的名称？hello-spring-mondgodb 应用程序[配置](https://github.com/SpringSource/cloudfoundry-samples/blob/master/hello-spring/src/main/resources/root-context.xml)为查找名为“hello”的数据库（SimpleMongoDbFactory 的第二个构造函数 arg）。也许尝试更新此属性以反映您的 mongo db 的名称并重新推送。

希望这可以帮助

克里斯

# javascript - JavaScript 循环遍历数组以检查数值

> ID：12150021
> 
> 赞同：1
> 
> 时间：2012-08-27T21:44:43.010
> 
> 标签：javascript, arrays

我有一个返回值的数组，如下所示：

```
//Eg 1    [ [ "214323", "34243" ], [ "3333", "123" ] ]

//Eg 2    [ [ "214323" ],[ "3333" ] ] 
```

我想验证数组是否只包含没有空格或 null 的数字，否则我想抛出一个错误。这是我的以下代码，它在上面的示例中不起作用。即使所有值都是数字，它也会抛出错误。

```
for (var i = 0; i <= arrayVals.length; i++) {
    if(!(/^\d+$/.test(arrayVals[i]))) {
        err_comp=true;

        }   
}

if( err_comp ==true) {
        alert( 'The value has to be only numeric.');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:48:48.343

您有一个**数组数组**，因此您需要***两个***循环：

```
var err_comp = false;
for (var i = 0; i < arrayVals.length; i++) {
  var arr = arrayVals[i];
  for (var j = 0; j < arr.length; j++) {
    if (!(/^\d+$/.test(arr[j]))) {
        err_comp = true;
    }   
  }
} 
```

否则，您将在测试`/^\d+$/.test([ "214323", "34243" ])`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T21:47:05.890

你不应该使用`<=`，因为你从 0 开始你应该使用`<`：

```
for (var i = 0; i < arrayVals.length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T21:53:45.537

```
multi_arr.every(function(arr) {
    return arr.every(function(n) {
        return /^\d+$/.test(n);
    });
}); 
```

您可以根据需要更改测试，如果需要，可以[`.every`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every#Compatibility)为 IE8 添加补丁。

您可以使您的功能可重用。

```
function forEveryArray(fn) {
    return function every_array(arr) {
        return arr.every(fn)
    }
}

function isNumber(n) { return /^\d+$/.test(n); }

multi_arr.every(forEveryArray(isNumber)); 
```

# php - 与菜单无关的 Joomla 文章漂亮 url

> ID：12150022
> 
> 赞同：2
> 
> 时间：2012-08-27T21:44:44.757
> 
> 标签：php, joomla, joomla1.5

我正在使用 Joomla 1.5 并且有一篇我不想在我的任何菜单中列出的文章。这是一个特殊的促销页面，独家人员将获得链接。有没有办法给文章一个漂亮的 URL？

目前有效的 URL 是`/index.php?option=com_content&view=article&id=35`. 我希望是这样`/15k`。

有人帮我吗？

我已经看到[了这个问题](https://stackoverflow.com/questions/1113634/joomla-urls-an-article-doesnt-have-a-pretty-url-by-itself)，但是 URL 并不是我要找的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:20:39.220

要获得该 URL，您需要打开[Joomla! 的 SEF/SEO 设置](http://docs.joomla.org/Search_Engine_Optimisation)（我假设您已经进行了该设置）。

在 Joomla 中，您必须创建一个新菜单，将其命名为“实用程序菜单”，但不要给它一个“模块标题”——您不想显示此菜单，因此您不需要该模块。

然后创建一个“Single Article”菜单项，别名`15k`为“Utility Menu”中的菜单项。您现在应该可以访问[http://www.yoursite.com/15k上的文章了](http://www.yoursite.com/15k)

如果您想从另一个菜单链接到此菜单项，请创建一个菜单项别名并将其指向 15k 菜单项。如果您想从文章中链接，只需将链接指向 15k 菜单项。

**[编辑]**

在 Joomla 中路由！首先查看用户定义的路径（即菜单及其菜单项），然后如果找不到与所请求资源的匹配项，它会要求特定组件构建路由，并且组件路由器是否是基本的（即几乎每个在 Joomla! 1.5 中单独一个）然后你得到`?option=com_somecomponent&id=X`样式结果。在 2.5 中，这得到了很大改进，但仍然使用相同的路由机制。

# iphone - Xcode“使用未声明的标识符”错误，编译/运行得很好

> ID：12150024
> 
> 赞同：45
> 
> 时间：2012-08-27T21:44:51.197
> 
> 标签：iphone, ios, xcode, ipad, compiler-errors

我遇到了一个非常烦人的问题，它阻碍了我的工作流程。在我的项目中，我到处都有“未声明标识符的用户”错误。它们都参考一个类，特别是一个主题类。我检查了我的导入是否有任何循环引用，没有。我真的很困惑。

这是错误的屏幕截图。我会在构建日志中发布错误以获取更多详细信息，但没有任何错误。它构建和运行得很好......

![在此处输入图像描述](../Images/06b37a48b48cd00100e8b78d790552c9.png)

我试过清理，删除派生数据......有什么想法吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-26T02:23:17.867

我遇到了同样的问题，并注意到所有未声明的标识符都在我的 pch 文件中的文件中声明。

考虑到这一点，我从 pch 文件中删除了其中一条#import 行并重新编译，它按预期失败。然后我将删除的行放回原处，重新编译并正常编译，所有错误错误都消失了。

如果上述解决方案没有，希望这个简单的解决方案可以帮助你们中的一些人。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-27T22:00:36.020

不幸的是，这类错误在 Xcode 中很常见。如果它一直自动刷新其错误列表会很棒，但并非总是如此。发生这种情况时，我强烈建议您重新启动 Xcode，这将刷新其错误缓存并有望解决您的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T22:33:39.197

你如何包括这个类？在大多数情况下，我只是在标题和/或正文中明确包含该类 - 而不是 *.pch 文件。然后这个错误在我的情况下消失了。

有时也可以删除派生数据。您最近是否更改了偏好中的位置。当我将 ramdisk 用于派生数据然后返回默认值时，我也收到此错误。这是最烦人的情况——因为它会导致这个错误出现在几乎每个文件中。

这个错误似乎在 Xcode 4.4 中比以前的版本更频繁地发生。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T15:55:23.507

您是否正确包含了库文件？看看那个。如果我们没有包含正确的文件，或者缺少某些内容或未连接 UI，有时可能会出现 ARC 问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-08T16:16:25.520

对我来说，问题是我创建了 UnityInterface.h/m 文件来处理 obj-c 到 c# 的接口。UnityInterface.h 已由 Unity 定义。我将自己的 UnityInterface 重命名为 _UnityInterface，现在一切正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-15T18:16:31.177

只是为以后可能遇到此问题并且找不到任何这些解决方案的任何人发布此内容：如果您有任何标记为 #if 的语句仅在程序处于调试模式时执行，则显然会导致在内部声明的任何内容当您尝试存档/导出时，它们不会被声明。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-14T08:07:40.803

我有同样的问题。关闭和打开 XCode 没有帮助。

我通过检查其他目标中的错误并修复它们来解决它（我的单元测试目标中有大量错误）。我还将标题链接从 h 文件移动到 m 文件。但我很确定，第一件事很关键。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-11T14:04:24.517

对于遇到同样问题并尝试了上述所有解决方案但没有结果的其他人，也许您应该尝试像我一样的方法。我只是通过从我的 Mac 上拔下我的 iPhone USB 电缆然后重新插入这些电缆来解决这个问题。之后，再次重建，所有未声明的标识符错误都消失了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-31T15:48:05.950

它编译时错误

```
Use of undeclared identifier '<class_name>' 
```

我在开发自己的框架和应用程序时遇到了这个问题。Objective-C 消费者 -> Objective-C 静态框架

Report Navigator 有清晰的描述

```
umbrella header for module '<module_name>' does not include header '<class_name>.h' 
```

解决方案只是`#import <class_name>.h`在框架目标中添加伞头

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-22T05:04:00.963

我有同样的错误。就我而言，它在这行代码中：

```
- (void)playerItemDidReachEnd:(NSNotification *)notification {
      // some code
  } 
```

我的错误信息说：

```
Use of undeclared identifier 'playerItemDidReachEnd' 
```

我尝试将此行添加到 .h 文件中：

```
- (void)playerItemDidReachEnd:(NSNotification *)notification; 
```

我清理了它，我重新启动了我的 macbook，但我仍然收到错误消息。

最后，我决定尝试删除 .h 文件中的行。然后我将其粘贴到文本文件中，然后将其复制并粘贴回 .h 文件中。

现在我清理了，瞧！没有更多的错误。去搞清楚。这有时会在 VBA 中发生。不知何故，一行代码中似乎有看不见的格式。所以我认为xCode可能会发生这种情况。将其剪切，粘贴到文本文件中，剪切出文本文件，然后将其粘贴回原来的位置-在我的情况下对其进行了修复。

---- 更新 ----- 以上是我的回答。抱歉，显然还有其他问题。

清洁后 - 我的错误消失了。现在我尝试构建和运行我的应用程序。错误又回来了！所以这次我在剪掉所有的文本后重新创建了类文件，并将其粘贴到一个文本文件中。我对我的 .m 和 .h 文件都这样做了。但是现在尝试运行后错误又回来了。对不起。我不知道如何完全删除此文本，因为它不是答案。

试图构建和运行我的应用程序。错误又回来了！

还有一个错误消息，我缺少括号（ } ）。最后，我查看了此方法之前的方法，果然它缺少结束括号！就是这样！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-18T10:56:58.193

尝试单击`Product -> Analyze`，然后单击`Product -> Build`。这对我有帮助。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-28T02:20:14.923

回答可能有点晚。

我最近遇到了这个问题。我通过更新我的操作系统然后更新 Xcode 来解决这个问题。我尝试单独更新 Xcode 但没有发生，因为 Xcode 9.4 需要 OS High Sierra 10.13。*

快乐更新:)

# php - php中的文件上传方法？

> ID：12150026
> 
> 赞同：1
> 
> 时间：2012-08-27T21:44:52.033
> 
> 标签：php, mysql, sql

我不知道为什么文件没有上传到数据库中。我试图检查这个方法为什么文件没有上传。这种方法使用了很多时间。并且每次都成功地工作。如果有任何错误，请更正。

```
<?php
//database connection successfully worked.
  $manu = $_POST['manu'];    
if(isset($_POST['img_submit']))
{if($_FILES['file']['name']<>"")
    {$file =time().'_'.$_FILES['file']['name'];
        if (!copy($_FILES['file']['tmp_name'],"file/".$manu))
        {$message = "Invalid File type.Upload only JPEG and GIF files";}            
        if(move_uploaded_file($_FILES['file']['tmp_name'], $manu)) {$msg2 = "The file ".  basename( $_FILES['file']['name']). " has been uploaded";} 
            else{$msg3 = "There was an error uploading the file, please try again!";} }
    echo $query = "insert into upload_image (upload_img) values('".$manu."')";
    mysql_query($query) or die (mysql_error());

}?>    

<form name="form" action="" method="post"  enctype="multipart/form-data">
<table width="100%" border="0" cellspacing="4" cellpadding="5">
  <tr><td align="center" colspan="2">&nbsp;<b>Upload Image</b></td></tr>
   <tr>
    <th width="50%">&nbsp;Image Url :</th>
    <td width="50%">&nbsp;<input type="file" name="manu" value="" /></td>
  </tr>
  <tr><td align="center" colspan="2"><input type="submit" name="img_submit" value="Upload Image" /></td></tr></table></form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T21:53:29.327

你不希望在你的服务器上有这个代码。

```
<?php
    //database connection successfully worked.
    $manu = $_POST['manu'];    
    ...
    if(move_uploaded_file($_FILES['file']['tmp_name'], $manu) 
```

这基本上意味着，如果我可以控制*我*的浏览器（我有），我可以发送一个带有假 MIME 类型和我选择的完整路径的`$_POST['manu']`文件，你的服务器会将此文件保存在*我想要的任何文件夹*中具有写入权限，无需检查。

假设我要在您的服务器代码可能找到它的地方`evil_haxxor_skr1pt.php`使用 MIME 类型上传，*并代表我执行它*......`image/jpeg`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T21:51:11.560

对于初学者，您使用 copy() 函数和 move_uploaded_file()。不要使用复制（）！这是一个很大的安全漏洞！

如果您想保存在数据库中，您需要使用类似[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)的方法来获取文件的所有内容，然后您只需像使用`$manu`变量一样将该数据直接使用到数据库中。不要忘记过滤输入。顺便说一句，不要使用 mysql_* 函数，使用 mysqli_* 函数。mysql_* 已经太旧和过时了。*

# android - 相机图像的内容 URI *仅限*

> ID：12150029
> 
> 赞同：0
> 
> 时间：2012-08-27T21:45:09.967
> 
> 标签：android, camera, uri

我正在使用 ContentObserver 来检测用户何时拍照。此外，我需要在拍摄照片后实际抓取照片。

现在我正在使用 URI MediaStore.Images.Media.EXTERNAL_CONTENT_URI 来检测更改并获取图像。

但是，我注意到我还从第三方非相机应用程序中抓取图像，这些应用程序似乎将照片保存到外部存储中。

我怎样才能只抓取相机图像？

如果不可能知道任意相机应用程序的 URI，是否至少可以获得库存 Android 相机的 URI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:01:27.567

请记住，Android 相机通常（99.999999% 的时间）将光子存储在 DCIM 目录中，因此，您可以在光标中过滤 DCIM。

# javascript - 获取异步生成的li标签的id

> ID：12150038
> 
> 赞同：0
> 
> 时间：2012-08-27T21:46:04.560
> 
> 标签：javascript, jquery, html

如何获取页面加载后异步添加到页面的 li 标签的 id。

我曾尝试使用函数 document.ready 但它在异步 li 数据加载之前加载。

例如，在我的页面中有一个异步加载的新闻数据，我无法控制它。当用户单击新闻链接时，它会转到某个位置，我需要将其更改为其他位置。

我试过以下代码。但它不工作。

```
 $("a[href*='Pages/results.aspx']").each(function(){ 
        var href = $(this).attr('href').replace('/Pages/results.aspx', window.location.pathname);
        $(this).attr("href", href);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:17:13.183

如果您通过 Ajax 加载您的 li 标签，那么我建议您将您的 li 修改函数放入`readystatechange`处理程序中，或者`success`如果您使用的是 JQuery，则将其放入处理程序中。

如果您通过诸如 ASP.net 之类的服务器后端加载 li，则将您的 I 修改函数放入 jQuery`$(window).load`函数中。

见：[http ://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:59:11.473

您是否尝试过创建一个函数来包含新闻提要的创建，然后该代码更改了 li？

我认为这样它会在同一个线程中，并且必须按照你想要的顺序执行。

# json - 当在 JSON 中表示有向图以在 d3.js 中可视化时，将节点与边分开存储？

> ID：12150040
> 
> 赞同：1
> 
> 时间：2012-08-27T21:46:16.697
> 
> 标签：json, graph, d3.js, visualize

我应该将链接与节点分开存储，还是应该是节点属性？

由于节点“有”边缘，我似乎应该以这种方式构造数据：

```
{"nodes":[{"name":"Homepage",
           "links":[{"name":"002","value":"1"}]},
          {"name":"FAQ"}
]} 
```

但是在我有节点之前我不能渲染链接，所以看起来这个结构迫使我分析我的整个图表两次。似乎流行的 d3 示例也将节点与链接分开，例如

```
 {"nodes":[{"name":"Homepage"},
           {"name":"FAQ"}],
  "links":[{"source":"Homepage","target":"FAQ","value":1}]
 } 
```

# java - 如何用命令行编译运行斯坦福的 Karel？

> ID：12150041
> 
> 赞同：2
> 
> 时间：2012-08-27T21:46:29.110
> 
> 标签：java, command-line

该程序可以在同一台机器上的 Eclipse 中流畅地编译和运行，但我真的很想从命令行和我选择的编辑器中工作。

**CollectNewspaperKarel.java**

```
import stanford.karel.*;

    public class CollectNewspaperKarel extends SuperKarel {

        public void run() {
            // You fill in this part
        }

    } 
```

karel.jar 与上述文件位于同一目录中。

**编译**

```
javac -cp karel.jar CollectNewspaperKarel.java 
```

没有错误。

**跑**

```
java -cp karel.jar CollectNewspaperKarel

Exception in thread "main" java.lang.NoClassDefFoundError: CollectNewspaperKarel
Caused by: java.lang.ClassNotFoundException: CollectNewspaperKarel
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:50:40.183

您在运行程序时忘记将您的类包含到类路径中。

试试这个 - 如果在 Windows 上运行：

```
java -cp karel.jar;CollectNewspaperKarel.class CollectNewspaperKarel 
```

或者如果你在 linux 上运行这个：

```
java -cp karel.jar:CollectNewspaperKarel.class CollectNewspaperKarel 
```

然而，还有一件事，你需要在你的类中有 main 方法，否则它将不起作用:)

**更新：**

我找到了以下网站：http: [//ycsoftware.net/setting-up-karel-the-robot-in-eclipse/](http://ycsoftware.net/setting-up-karel-the-robot-in-eclipse/)

看来，如果您的 karel 版本与那里的作者相同，您应该使用以下论点：

在窗户上：

```
java -cp karel.jar;CollectNewspaperKarel.class stanford.karel.Karel code=CollectNewspaperKarel 
```

在 Linux 上：

```
java -cp karel.jar:CollectNewspaperKarel.class stanford.karel.Karel code=CollectNewspaperKarel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:53:21.023

Peter B. 是对的，但是您不能单独运行包含“运行”方法的类，您需要一个公共静态 void(String[] args) 方法使其可运行。

我想在 Eclipse 中，其他一些类被用作“主类”来运行这个东西。

# wordpress - 自动播放 Youtube 嵌入式视频，无需编辑嵌入代码

> ID：12150045
> 
> 赞同：0
> 
> 时间：2012-08-27T21:46:43.133
> 
> 标签：wordpress, video, youtube, embed

我正在为客户（在 Wordpress 中）开发音乐网站，他们希望主页上显示的“精选 Youtube 视频”在页面加载时自动播放。我正在寻找一种不需要客户端在粘贴 Youtube 的嵌入代码时编辑代码的解决方案。有没有办法可以将它硬编码到我的模板文件中？

大多数解决方案都是关于编辑代码以启用自动播放。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:01:03.990

您可以使用 jQuery 操作 html，您可以定位元素并插入自动播放所需的 html，这样每次页面加载时都可以插入它。

[W3Schools](http://www.w3schools.com/jquery/jquery_html.asp)和这个[JQuery](http://api.jquery.com/category/manipulation/)链接应该可以帮助您。

# javascript - 在 jquery 插件的成功事件上操作 DOM

> ID：12150048
> 
> 赞同：0
> 
> 时间：2012-08-27T21:46:50.363
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-mvc

在 jquery 插件成功的情况下，我需要操作 DOM 并创建/使一些新的 html 控件可见...

HTML..

```
<input type="file" name="fileupload" id="fileupload" />

<%=Html.ActionLink("TestA", "TestA", "ControllerA", new { Id = Id})%> 

<%=Ajax.ActionLink("TestB","TestB","ControllerB", new { Id= Id})%> 
```

JS：

```
<script type="text/javascript">
$(function () {

    $('#fileupload').uploadify({
        'buttonText': 'Upload',
        'auto': true,
        'multi': false,
        'swf': '/Uploadify/uploadify.swf',
        'uploader': '/ControllerA/LinkMethod',
        'formData': { 'Id': Id},
        'debug': false,          
        'onUploadSuccess': function (file, data, response) {

         //Here I want to show two action links and disable/invisible the plugin.

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T21:50:34.050

只需调用具有相应 id 值的各个元素即可`show()`。`hide()`

```
 'onUploadSuccess': function (file, data, response) {

        $('#MyIdForLink1').show();
        $('#MyIdForLink2').show();
        $('#pluginId').hide();

 } 
```

# node.js - 为什么meteor.js是同步的？

> ID：12150049
> 
> 赞同：18
> 
> 时间：2012-08-27T21:47:00.847
> 
> 标签：node.js, meteor, node-fibers

代码不会因为同步而降低效率吗？为什么同步编码是一种胜利？我在做一些研究时发现了这两个链接：[http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/，https](http://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/) : [//github.com /Sage/streamlinejs/](https://github.com/Sage/streamlinejs/)

如果目标是防止意大利面条式代码，那么显然您可以使用异步代码，例如 streamline.js，这不是回调金字塔，对吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-28T20:18:58.950

您必须在这里区分两件事：

*   同步函数，如 node's `fs.readFileSync`、`fs.statSync`等。所有这些函数`Sync`的名称中都有一个 (*)。这些功能是真正*同步*和*阻塞*的。如果你调用它们，你会阻塞事件循环并杀死节点的性能。您应该只在服务器的初始化脚本（或命令行脚本）中使用这些函数。
*   库和工具，如*fiber*或*streamline.js*。这些解决方案允许您以*同步方式*编写代码，但您使用它们编写的代码仍将*异步*执行。它们*不会*阻塞事件循环。

(*)`require`也是阻塞的。

Meteor 使用*纤维*。它的代码是用同步风格编写的，但它是非阻塞的。

胜利不在于性能方面（这些解决方案有自己的开销，因此它们可能会稍微慢一些，但它们也可以比缓存等特定代码模式的原始回调做得更好）。胜利以及开发这些解决方案的原因在于可用性方面：它们让您以同步风格编写代码，即使您正在调用异步函数。

**2017 年 1 月 25 日编辑**：我创建了 3 个要点来说明非阻塞纤维： [fibers-does-not-block.js](https://gist.github.com/bjouhier/7d660269b6fae13b7e33081d391c665d)、[fibers-sleep-sequential.js](https://gist.github.com/bjouhier/ab384311dc10d67e2599b367eecc3fa2)、[fibers-sleep-parallel.js](https://gist.github.com/bjouhier/b26e69ff5ecec58dd8d6e62c5d3ebcc4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T22:11:10.623

当使用类似`streamlinejs`. 实际代码**仍将异步运行**。写很多匿名回调函数不是很漂亮，这就是这些东西有帮助的地方。

# android - 无法为 sqlite 数据库实例化活动组件信息

> ID：12150052
> 
> 赞同：1
> 
> 时间：2012-08-27T21:47:26.040
> 
> 标签：android, android-activity, sqliteopenhelper

我正在尝试从 assets 文件夹中读取现有的 sqlite 数据库！但我收到此错误：

`java.lang.runtimeexception unable to instantiate activity componentinfo`

请帮帮我！

这是我的 DataBaseHelper 类：

```
public class DataBaseHelper extends SQLiteOpenHelper {

// The Android's default system path of your application database.
private static String DB_PATH = "/data/data/com.example.sqltest/databases/";

private static String DB_NAME = "test.sqlite";

private SQLiteDatabase myDataBase;

private final Context myContext;

/**`enter code here`
 * Constructor Takes and keeps a reference of the passed context in order to
 * access to the application assets and resources.
 * 
 * @param context
 */
public DataBaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
    this.myContext = context;
}

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 * */
public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (dbExist) {
        // do nothing - database already exist
        } else {

    // By calling this method and empty database will be created into
    // the default system path
    // of your application so we are gonna be able to overwrite that
    // database with our database.
    this.getReadableDatabase();

    this.close();

    try {

        copyDataBase();

    } catch (IOException e) {

        throw new Error("Error copying database");

    }
}

}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
    checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {

        // database does't exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
    myOutput.write(buffer, 0, length);
}

// Close the streams
myOutput.flush();
myOutput.close();
myInput.close();

}

public void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
    SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close() {

    if (myDataBase != null)
        myDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

// Add your public helper methods to access and get content from the
// database.
// You could return cursors by doing "return myDataBase.query(....)" so it'd
// be easy
// to you to create adapters for your views.

} 
```

这是 MainActivity 类：

```
public class MainActivity extends Activity {
DataBaseHelper myDbHelper;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public MainActivity(Context context) {

    myDbHelper = new DataBaseHelper(this);

    try {

        myDbHelper.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        myDbHelper.openDataBase();

    } catch (SQLException sqle) {

        throw sqle;

    }
}
} 
```

谁能提供最简单的代码来显示我现有的 sqlite 数据库的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:17:42.010

我想不出任何好的理由在`constructor`这个 Activity 子类中做任何事情（*在你的情况下*）。**通常你从不直接构造一个活动**，我们经常使用`Intent`，我猜这是你的代码的问题。`onCreate()`使用它而不是它的构造函数，并做你所有的正常静态设置——创建视图，将数据绑定到列表，数据库等等在 onCreate() 中。

**Edit1**：
您可以轻松解决`java.lang.runtimeexception unable to instantiate activity componentinfo`，只需更改 MainActivity ：

```
public class MainActivity extends Activity {
    DataBaseHelper myDbHelper;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myDbHelper = new DataBaseHelper(this);
        try {
            myDbHelper.createDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }
        try {
            myDbHelper.openDataBase();
        } catch (SQLException sqle) {
            throw sqle;
        }
    }
} 
```

**编辑2**：
确保您放置`test.sqlite`在项目的资产文件夹中，并且项目的包名称是`com.example.sqltest`.
如果你的代码没有其他问题，它就可以工作了。这意味着你的数据库复制成功，可以使用了。现在你必须访问并从数据库中获取内容。注意课后的注释：

> 添加您的公共辅助方法以访问和从数据库中获取内容。您可以通过执行“return myDataBase.query(....)”来返回游标，这样您就可以轻松地为您的视图创建适配器。

如果你看到黑页，可能是因为你的布局是空的。你可以使用你的数据库为你的视图创建适配器，这样你的活动就不会是空的。

您可以在这些页面中查看有关`SQLiteOpenHelper`课程的更多详细信息：
[Android SQLite 数据库和 ContentProvider - 教程](http://www.vogella.com/articles/AndroidSQLite/article.html)
[Android SQLite 数据库教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# controls - iPad/iPhone CoreMidi - Mackie Control Emulation（停止、播放按钮）

> ID：12150053
> 
> 赞同：2
> 
> 时间：2012-08-27T21:47:36.257
> 
> 标签：controls, logic, midi, coremidi

我面临着非常困难的问题。

我的任务是模拟 Mackie Control Pro - 停止和播放按钮。

我知道 Note93 (A5) - 它是停止编码器。Note 94 (A5#) 这是播放编码器。基本上我发送 Note On 93, 127 velocity 然后 Note Off 93, 0 velocity 和 Logic 接收停止消息，但在此之后他发疯了，他在循环中发送许多 midi 消息（note on，off 93），当我点击播放，它变得更加疯狂。((((

我如何向网络会话发送消息：

触地

```
 UInt8 midiData[]  = { 0x90, 93, 127};
        [midi sendBytes:midiData size:sizeof(midiData)]; 
```

润色

```
UInt8 midiData[]  = { 0x80, 93, 0};
        [midi sendBytes:midiData size:sizeof(midiData)]; 
```

最有趣的是，当我在 ThumbJam 应用程序（适用于 iPad/iPhone）中播放非 A5、A5# 时，它运行良好。在 eyoControl 应用程序中也是如此，它可以工作。但是当我在 TouchOSC 或 TB MIDI Stuff 或 Midi Designer 中播放 A5、A5# 键时，Logic 再次进入循环。并且在所有应用程序中的 Midi Monitor 消息中都是相同的。疯狂...我无法理解这个（（

有什么区别，所有连接和工作的应用程序似乎都通过 CoreMidi。ps 与 Ableton Live，原因一切正常。按钮工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:18:13.380

找到解决方案。应用程序应该以零速度发送音符，而不是发送音符关闭。

代替 {0x80, keynumber, 0} 使用 {0x90, keynumber, 0}

# android - android在写入后读回标签信息，无需第二次触摸标签

> ID：12150062
> 
> 赞同：1
> 
> 时间：2012-08-27T21:48:17.610
> 
> 标签：android, nfc

我想开发一个写入nfc标签有效载荷的android程序，然后在写入命令后读回标签信息以验证写入。但是，似乎需要删除标签并将其重新输入到 NFC 字段以刷新意图，以便回读写入信息。是否可以一键实现？

或者任何人都知道背景中的详细过程来解释为什么我需要第二次触摸才能回读？据我所知，android设备在屏幕解锁时会查询NFC标签，这是否意味着它将继续在NFC领域读取标签？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T22:32:36.747

无需第二次触摸。当[writeNdefMessage()](http://developer.android.com/reference/android/nfc/tech/Ndef.html#writeNdefMessage%28android.nfc.NdefMessage%29)没有抛出任何异常时，写入成功。如果你真的想检查结果，你可以调用[getNdefMessage()](http://developer.android.com/reference/android/nfc/tech/Ndef.html#getNdefMessage%28%29)从标签中读取当前内容。

# batch-file - 使用 EnableDelayedExpansion 的嵌套变量名称

> ID：12150065
> 
> 赞同：1
> 
> 时间：2012-08-27T21:48:27.390
> 
> 标签：batch-file, variables, cmd, nested, delayedvariableexpansion

我正在编写一个脚本来获取每列的最大长度，我正在尝试将最大长度的长度存储在 _c1...n 变量中。列数未知。

我能够获得每列的长度，创建变量以使用 set _c!i! = !n!, n 是长度，但为了设置特定列的最大长度，我需要将 current 与 max 进行比较并使用类似 !_c!!i!! 这不起作用，任何想法如何引用一个变量，它的名称的哪一部分来自另一个变量？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:14:17.213

我假设您正在使用延迟扩展字符，因为您在一组括号“（）”内工作。这样做会使您的过程更加困难。我知道这种方法更容易阅读，但更难编写代码。

在括号内，我只知道一种访问由一个或多个变量“构建”的变量的方法。也就是使用`call`函数使组装变量“激活”。此方法适用于括号内和括号外。

这是一个小例子：

```
@echo off
setlocal enabledelayedexpansion
(
  set i=10
  set _c!i!=something
  :: below is equivalent to echo !_c10!
  call echo %%_c!i!%%
)
endlocal 
```

输出：

```
something 
```

您几乎可以使用`CALL`前面的 a 来完成没有它的所有操作，但在 XP 或更早版本中，您不能调用内部命令`if`，只能调用 FIND.EXE 等“外部”程序。

如果您可以通过可能使用`call :label`语句在一组括号之外工作，则可以像这样简单地访问变量：

```
@echo off
setlocal enabledelayedexpansion
set i=10
set _c!i!=something

:: The below 2 statements are equivalent to `echo %_c10%`
echo !_c%i%!
call echo %%_c!i!%%

endlocal 
```

输出：

```
something
something 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T03:46:24.893

James K 建议的 CALL 技术会起作用，但它相对较慢并且可能不安全，具体取决于变量的内容。

以下看起来更复杂，但它明显更快更可靠：

```
for %%A in (!i!) do echo !_c%%A! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T07:45:00.473

在您的情况下，如果您的变量仅包含数字，则可能有第三种解决方案。

```
@echo off
setlocal enabledelayedexpansion
(
  set i=10
  set _c!i!=4711

  set /a tmp=_c!i!
  echo !tmp!
) 
```

这是有效的，因为`SET /A`可以访问变量的内容而无需显式扩展字符。

# prism - 使用共享服务 PRISM 的目的

> ID：12150071
> 
> 赞同：3
> 
> 时间：2012-08-27T21:48:42.560
> 
> 标签：prism, communication, prism-4, eventaggregator

prism中共享服务的目的和用途是什么？

什么事情可以让我认为我必须使用共享服务而不是`EventAggegator`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:50:58.483

从`EventAggregator`事件订阅者的角度来看，获得有关应用程序中发生的某些事件的通知非常有用。这样您就**被动地**执行操作，即每当其他人发布事件时。`EventAggregator`当您需要对应用程序中发生的事情做出反应时，您想使用它。

另一方面，通过共享服务，您可以主动执行操作和请求数据。例如，您可以拥有一个公开方法的共享服务，并且您可以在需要时随时解析该服务并**主动**`GetData()`请求数据。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:07:16.440

我不知道其他人如何使用它，但我经常使用它来实现我的应用程序的模块化。例如在 Silverlight 应用程序中出于安全原因只能`OpenFileDialog`返回`Stream`文件。所以我只是构建了一个`IOpenFileService`服务并将其插入到任何需要打开流到文件的 ViewModel 的构造函数中。它也适用于各种 Logger 甚至 Database 层。

服务的另一个有用部分是它们可以独立于其他模块构建和测试。MEF/Unity 将提供所有的粘合剂，以便在构造函数或其他对象的属性中插入现成的对象。

并且不要忘记服务类本身可以使用 MEF/Unity 魔法并将其他服务插入到自身中。

并且对于：您的代码可能很快就会`EventAgregator`因各种定义而过载。`Event`例如`Resize`事件。在 Silverlight 应用程序初始化时，PRISM`Region`控件的过程很慢，因此它们`Regions`被附加到`VisualTree`很晚，并且不知何故他们错过了初始`Resize`事件。我为(via )提供了内部`Resize`事件，然后提供了另一个事件，每个控件将发送给它的子级以调整自己的大小以控制边界。仅用于调整大小的 2 个类...`Region``EventAgregator``Resize``Region``Region``Event`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:23:36.153

我们两者都使用过，但当功能不仅仅是简单的通知时，通常会使用共享服务——`EventAgregator`在某些情况下，我们也会在服务中使用。

For example we have a service for scanning in documents :

```
public interface IDocumentScannerService
{
}

public class DocumentScannerService : IDocumentScannerService
{
} 
```

This would be a pretty bad design to try and implement this with `EventAggregator`.**

# c - SIGPIPE，一个简单的 OpenSSL Web 服务器中的断管

> ID：12150072
> 
> 赞同：2
> 
> 时间：2012-08-27T21:48:46.907
> 
> 标签：c, https, openssl

我正在尝试编写一个使用 OpenSSL 的简单 Web 服务器。我不断收到“断管”错误。即使我处理了错误，似乎套接字也永远不会打开写入。

我究竟做错了什么？

这是我的代码：

```
/*
 * I created tempory certificates like this:
 *
 * openssl req -newkey rsa:1024 -x509 -keyout key.pem -out root.pem
 *
 * I compile like this:
 *
 * gcc -g -o webssl webssl.c -lssl -lcrypto
 *
 * I get this error:
 *
 * Program received signal SIGPIPE, Broken pipe.
 */

#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/stat.h>
#include <fcntl.h>

#include "openssl/bio.h"
#include "openssl/ssl.h"
#include "openssl/err.h"

const char *password = "jake";
const char *KEY_FILE = "key.pem";
const char *CA_LIST = "root.pem";

const char *response = "HTTP/1.0 200 OK\r\nServer : webssl\r\n\r\n<html><head><title>Hello World!</title></head><body><h1>Hello world!</h1></body></html>";

void sigpipe_handle(int x)
{
    printf("broken pipe\n");
}

int password_cb(char *buf, int num, int rwflag, void *userdata)
{
    if(num<strlen(password)+1)
        return 0;
    strcpy(buf, password);
    return strlen(password);
}

int main(int argc, char *argv[])
{
    SSL *ssl = NULL;
    SSL_CTX *ctx = NULL;

    int listenfd, clientfd;
    struct sockaddr_in clientaddr;
    socklen_t addrlen;
    char *port = "8080";

    struct addrinfo hints, *res;

    char buffer[5000];

    SSL_library_init();

    /* Set up a SIGPIPE handler */
    signal(SIGPIPE,sigpipe_handle);

    ctx = SSL_CTX_new(SSLv23_server_method());
    SSL_CTX_use_certificate_chain_file(ctx, KEY_FILE);
    SSL_CTX_set_default_passwd_cb(ctx, password_cb);
    SSL_CTX_use_PrivateKey_file(ctx, KEY_FILE, SSL_FILETYPE_PEM);
    SSL_CTX_load_verify_locations(ctx, CA_LIST, 0);

    memset(&hints, 0, sizeof(hints));
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE;

    getaddrinfo(NULL, port, &hints, &res);
    listenfd = socket(res->ai_family, res->ai_socktype, 0);
    bind(listenfd, res->ai_addr, res->ai_addrlen);
    freeaddrinfo(res);

    listen(listenfd, 15);

    while (1) {
        addrlen = sizeof(clientaddr);
        clientfd = accept(listenfd, (struct sockaddr *)&clientaddr, &addrlen);

        ssl = SSL_new(ctx);
        SSL_set_fd(ssl, clientfd);
        SSL_accept(ssl);

        SSL_read(ssl, buffer, 5000);

        SSL_write(ssl, response, strlen(response));

        SSL_free(ssl);
        close(clientfd);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:12:09.270

你可以试试`signal(SIGPIPE, SIG_IGN)`。这应该使发送返回 EPIPE 错误。否则，您可以在向发送调用发送 MSG_NOSIGNAL 标志的评论中遵循[Kerrek SB的建议。](https://stackoverflow.com/users/596781/kerrek-sb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:25:12.927

[SIGPIPE，一个简单的 OpenSSL Web 服务器中的断管](https://stackoverflow.com/questions/12150072/)

我想我生成的证书是错误的。我需要使用我这样制作的 server.pem：

```
openssl req -newkey rsa:1024 -x509 -keyout key.pem -out root.pem
cat key.pem root.pem > server.pem 
```

我仍然不太确定问题出在哪里，但这段代码有效：

```
/*
 * Created my new server.pem like this:
 *
 * openssl req -newkey rsa:1024 -x509 -keyout key.pem -out root.pem
 * cat key.pem root.pem > server.pem
 *
 * Compiled like this:
 * gcc -o webssl webssl.c -lssl -lcrypto
 *
 */
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netinet/tcp.h>
#include <netdb.h>
#include <fcntl.h>
#include <signal.h>
#include <unistd.h>
#include <string.h>
#include <openssl/ssl.h>

const int PORT = 3000;
const char *CA_LIST = "root.pem";
const char *KEY_FILE = "server.pem";
const char *PASSWORD = "jake";

const char *message = "HTTP/1.0 200 OK\r\nServer: webssl\r\n\r\n<html><head><title>Hi</title></head><body><h1>Hello World!</h1></body></html>";

static int password_cb(char *buf, int num, int rwflag, void *userdata)
{
    if(num<strlen(PASSWORD)+1)
    return(0);

    strcpy(buf,PASSWORD);
    return(strlen(PASSWORD));
}

static void sigpipe_handle(int x) {}

int main(int argc, char *argv[])
{
    struct sockaddr_in sin;
    int sock, s;
    SSL_CTX *ctx = NULL;
    SSL *ssl = NULL;
    char buffer[5000];

    BIO *sbio = NULL;
    BIO *io = NULL;
    BIO *ssl_bio = NULL; 

    SSL_library_init();

    signal(SIGPIPE, sigpipe_handle);

    ctx = SSL_CTX_new(SSLv23_method());
    SSL_CTX_use_certificate_chain_file(ctx, KEY_FILE);
    SSL_CTX_set_default_passwd_cb(ctx, password_cb);
    SSL_CTX_use_PrivateKey_file(ctx, KEY_FILE, SSL_FILETYPE_PEM);
    SSL_CTX_load_verify_locations(ctx, CA_LIST, 0);

    sock = socket(AF_INET, SOCK_STREAM, 0);
    memset(&sin, 0, sizeof(sin));
    sin.sin_addr.s_addr = INADDR_ANY;
    sin.sin_family = AF_INET;
    sin.sin_port = htons(PORT);

    bind(sock, (struct sockaddr *)&sin, sizeof(sin));
    listen(sock, 5);

    while (1) {
        memset(buffer, 0, 5000);

        s = accept(sock, 0, 0);

        sbio=BIO_new_socket(s,BIO_NOCLOSE);
        ssl = SSL_new(ctx);
        SSL_set_bio(ssl,sbio,sbio);

        SSL_accept(ssl);

        io=BIO_new(BIO_f_buffer());
        ssl_bio=BIO_new(BIO_f_ssl());
        BIO_set_ssl(ssl_bio,ssl,BIO_CLOSE);
        BIO_push(io,ssl_bio);

        BIO_gets(io, buffer, 5000);

        BIO_puts(io, message);
        BIO_flush(io);

        SSL_shutdown(ssl);
        SSL_free(ssl);
        close(s);
    }

    return 0;
} 
```

# c - 尝试在 Visual Studio 2010 中执行链表代码时出现未处理的异常

> ID：12150074
> 
> 赞同：-2
> 
> 时间：2012-08-27T21:48:53.900
> 
> 标签：c

```
#include<stdio.h>
#include<conio.h>
#include<malloc.h>
struct node{
int value;
struct node *link;
}*p,**q,*r,*temp;
static int n=0;
void append(struct node **,int);
main(){
append(&p,1);
append(&p,2);
append(&p,3);
append(&p,4);
append(&p,5);
printf("Entered linked list :\n");
//display(p);
getch();
}
void append(struct node **q,int num){
if(n==0){
    struct node *temp=(struct node*)malloc(sizeof(struct node));
    temp->value=num;
    temp->link=NULL;
    *q=p;
    n++;
}
else{
    temp=*q;
    while(temp->link!=NULL)
        temp=temp->link;
    r=(struct node*)malloc(sizeof(struct node));
    r->value=num;
    r->link=NULL;
    temp->link=r;
    //q=p;
}
} 
```

有人可以告诉我为什么这个消息：

> linkedlist.c.exe 中 0x00fa14ea 处的未处理异常：0xC000005：访问冲突读取位置 0x0000004

在 Visual Studio 2010 中运行此程序时即将到来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:05:45.377

在

```
if(n==0){
    struct node *temp=(struct node*)malloc(sizeof(struct node));
    temp->value=num;
    temp->link=NULL;
    *q=p;
    n++;
} 
```

您设置`*q`为全局指针`p`（即`NULL`），您的意思是

```
*q = temp; 
```

当然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:54:06.987

看起来您正在通过 NULL 指针访问数据。您可以通过错误来判断：

```
Access violation reading location 0x0000004 
```

当您收到错误提示您已读取 NULL 附近的位置时，通常意味着您正试图通过 NULL 指针访问成员变量。由于位置是 0x4，因此该成员的偏移量可能是从对象开始的 4。

你唯一`struct`拥有的是这个：

```
struct node{
int value;
struct node *link;
}; 
```

在这里，`value`偏移量为 0x0，`link`偏移量为 0x4，因此错误将出现在您尝试`link`通过 NULL 指针访问成员的地方。

# spring - 使用 Jersey 的 RESTful Web 服务的会话管理

> ID：12150076
> 
> 赞同：6
> 
> 时间：2012-08-27T21:48:57.270
> 
> 标签：spring, hibernate, rest, spring-security, jersey

我正在我的应用程序和 MySQL之间[使用 Jersey 开发一个 Restful Web 服务。](http://www.vogella.com/articles/REST/article.html)`Android, iPhone`我还使用`Hibernate`将数据映射到数据库。

我有一个 sessionId（密钥）。它是在用户登录系统时生成的。

在`User`课堂上：

```
public Session daoCreateSession() {
    if (session == null) {
        session = new Session(this);
    } else {
        session.daoUpdate();
    }
    return session;
} 
```

在`Session`课堂上：

```
Session(User user) {
    this.key = UUID.randomUUID().toString();
    this.user = user;
    this.date = new Date();
}

void daoUpdate() {
    this.key = UUID.randomUUID().toString();
    this.date = new Date();
} 
```

当用户成功登录系统时，我将此 sessionId 发送到移动应用程序客户端。然后，当我想根据登录用户从数据库中获取一些信息时，我会检查此[会话密钥](http://jersey.576304.n2.nabble.com/Security-Basic-Session-or-Encrypted-Key-td3490249.html)作为每个请求的身份验证`in the REST Services`。

例如，对于用户参与的项目列表，我使用`client.GET(SERVER_ADDRESS/project/get/{SessionID})`

位于`client.GET(SERVER_ADDRESS/project/get/{username})`.

如果它不是有效的会话密钥，我将向客户端发送 403 禁止代码。你也可以看看[这里](https://stackoverflow.com/questions/4973454/session-management-how-to-generate-authentication-token-for-rest-service-je)

问题是我不确定我的方法。`cons`对于泽西岛和移动应用程序，您如何看待这种方法？我仍然不知道这种`Session key`方法对我来说是否是个好主意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T17:52:27.220

如果你想使用 SessionId 那么它应该有一个验证时间，像这样：

```
private static final int MINUTES = 90;

public boolean isValid() {
   return System.currentTimeMillis() - date.getTime() < 1000 * 60 * MINUTES;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T10:30:45.720

这是一个已解决的问题 - 像 Tomcat 这样的 servlet 容器已经进行了会话管理，并且可以通过 TCP 广播或使用 memcache 等共享数据源将会话状态分发给集群中的其他容器。

我建议阅读已经可用的内容，而不是无意中重新发明轮子。此外，如果您的应用程序被证明很受欢迎，这将成为一个非常热门的表格。您将如何清除旧的会话 ID？

# cakephp - Cakelog 正在写入多个文件，但我希望它只写入我指定的文件

> ID：12150078
> 
> 赞同：1
> 
> 时间：2012-08-27T21:49:09.607
> 
> 标签：cakephp, logging, cakephp-2.2

我想在`payment.log`. 因此，将其添加到`bootstrap`：

```
CakeLog::config('payment', array(
    'engine' => 'FileLog',
    'file' => 'payment',
)); 
```

当出现问题时：

```
CakeLog::write('payment', 'The is a problem!'); 
```

但是，上面的命令将`This is a problem!`同时登录`payment.log`和`error.log`，而登录到第一个文件就足够了。

此外，如果其他控制器（如 ）中发生任何其他问题`users`，它将登录到这两个文件。虽然它应该只是登录`error.log`

（我的意思是付款错误应该登录`payment.log`，任何其他问题都应该写入`error.log`）

哪里错了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:35:57.500

看起来您可能缺少[配置](http://api.cakephp.org/class/cake-log#method-CakeLogconfig)中的范围选项？

```
CakeLog::config('payments', array(
    'engine' => 'File',
    'scopes' => array('payment', 'order')
)); 
```

然后，您需要指定要写入的范围：

```
CakeLog::write('warning', 'Stuff is broken here', 'payment'); 
```

可能需要一些摆弄才能让它恰到好处，但这应该会有所帮助。

# asp.net - 更新到 Asp.Net MVC 4 RTM 后无法加载类型 HttpControllerConfigurationAttribute

> ID：12150082
> 
> 赞同：7
> 
> 时间：2012-08-27T21:49:28.637
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api, single-page-application

我正在研究最初在 ASP.Net MVC 4 Beta 和 EF 4.3.1 上的单页应用程序。我更新了 MVC 4 和 EF 5 的所有 NuGet 包。现在，每当我调用 ApiController 或 DbDataController 时，都会出现以下异常：

无法从程序集“System.Web.Http，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”加载类型“System.Web.Http.Controllers.HttpControllerConfigurationAttribute”。

```
at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type)
at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)
at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)
at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType& attributeType, IRuntimeMethodInfo& ctor, Boolean& ctorHasParameters, Boolean& isVarArg)
at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes, Boolean isDecoratedTargetSecurityTransparent)
at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeType type, RuntimeType caType, Boolean inherit)
at System.RuntimeType.GetCustomAttributes(Boolean inherit)
at System.Web.Http.Controllers.HttpControllerDescriptor.InvokeAttributesOnControllerType(HttpControllerDescriptor controllerDescriptor, Type type)
at System.Web.Http.Controllers.HttpControllerDescriptor.InvokeAttributesOnControllerType(HttpControllerDescriptor controllerDescriptor, Type type)
at System.Web.Http.Controllers.HttpControllerDescriptor.InvokeAttributesOnControllerType(HttpControllerDescriptor controllerDescriptor, Type type)
at System.Web.Http.Controllers.HttpControllerDescriptor..ctor(HttpConfiguration configuration, String controllerName, Type controllerType)
at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.InitializeControllerInfoCache()
at System.Lazy`1.CreateValue() 
```

根据 MVC 4 发行说明， HttpControllerConfigurationAttribute 已被删除，而不是我明确地使用它。

> 每个控制器配置： ASP.NET Web API 控制器可以被赋予一个自定义属性，该属性实现 IControllerConfiguration 以设置它们自己的格式化程序、操作选择器和参数绑定器。HttpControllerConfigurationAttribute 已被移除。 [MVC 4 发行说明](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253817)

我的问题是此时可能会尝试加载这种类型？

**编辑：**我现在想这是因为自 MVC 4 Beta 以来 SPA 位尚未更新，并且那里有控制器配置属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:52:37.400

每个控制器配置： ASP.NET Web API 控制器可以被赋予一个自定义属性，该属性实现 IControllerConfiguration 以设置它们自己的格式化程序、操作选择器和参数绑定器。HttpControllerConfigurationAttribute 已被删除。MVC 4 发行说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:12:06.457

您的 GAC 中可能有旧版本的 System.Web.Http。我相信在 Beta 版本中我们对 dll 进行了 GAC，因此您会看到这个问题……如果您取消 Gac 这个旧 dll，您应该不会看到这个问题。

# c# - C#获取动态创建标签的id

> ID：12150087
> 
> 赞同：0
> 
> 时间：2012-08-27T21:49:39.453
> 
> 标签：c#, asp.net, sharepoint-2010

我需要能够设置动态生成的标签的 ID，而不是让 SharePoint 在我的标签前面加上一个很长的神秘 ID。这是可能的，还是标签的另一个属性可以在单独的方法中用作唯一标识符？

```
Label animal = new Label();
animal.ID = cat; 
```

此标签的 id 将类似于： `ctl00_m_g_e0c173c0_edf3_4a99_a1dd_7bef33144c0b_ctl00_cat`

我需要它是猫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:21:46.750

要强制客户端 id 与服务器端 id 相同，请使用：

```
animal.ClientIDMode = ClientIDMode.Static; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:53:57.293

您不能设置服务器控件的 ClientId。它是一个只读属性。

您看到的神秘身份实际上是您的控制层级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:56:43.553

如果您尝试使用 javascript 访问控件并使用 jQuery，则可以只使用各种正则表达式选择器：

```
$("label[id$='cat']") 
```

这将寻找一个标签元素，其 id 以 'cat' 结尾

如果您的 javascript 在 aspx 文件中，而不是 js 文件中，您也可以像这样访问它：

```
$('#<%=cat.ClientID %>') 
```

这只会将 Sharepoint 创建的长 id 注入到您的 js 中。关键是它需要驻留在 aspx 文件中，而不是 js 文件中。

# libstdc++ - Boost-MPI HelloWorld 编译问题

> ID：12150091
> 
> 赞同：0
> 
> 时间：2012-08-27T21:50:12.117
> 
> 标签：libstdc++, boost-mpi

编辑：已解决，不正确的升压设置 /facepalm

我一直在尝试在旧系统/集群上安装 boost-mpi。

安装 boost 并使用 bjam --with-mpi 后，我尝试编译 boost-mpi 设置教程附带的 hello_world 示例。我使用 mpic++ 为 bjam 提供了 mpi-autoconfig，当我使用以下内容进行编译时：

```
/../gnu/bin/mpic++ -I/home/user/boost_1_51_0 communicator.cpp -lstdc++ -L/home/user/boost_1_51_0/stage/lib -lboost_mpi -lboost_serialization 
```

我收到以下错误：

```
libboost_serialization.so: undefined reference to `std::basic_istream<char, std::char_traits<char> >& std::basic_istream<char, std::char_traits<char> >::_M_extract<unsigned short>(unsigned short&)@GLIBCXX_3.4.9' 
```

所以我猜测用bjam构建的时候肯定已经找到了GLIBCXX3.4.9，但是之后

```
locate libstdc++.so 
```

我用了

```
"strings /path/to/libstdc++.so | grep LIBCXX" 
```

并且每个只有 3.4.8 作为 GLIBCXX 的最新版本。

我对这个问题感到很困惑。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:00:15.640

这确实意味着`libboost_serialization.so`是用较新版本的 GCC 编译的。

你确定你没有安装其他版本？你的`locate`数据库是最新的吗？显示什么`which g++`？

如果你把`-lstdc++`最后一个放在编译命令中会有帮助吗？由于`liboost_serialization.so`取决于`libstdc++.so`您应该正确订购它们。

# git - 在 Maven 中使用 Git 存储库作为镜像？

> ID：12150093
> 
> 赞同：0
> 
> 时间：2012-08-27T21:50:23.657
> 
> 标签：git, maven

我有一个场景，其中 Maven（运行 Maven 3）项目依赖项（插件 jar 等）托管在 Git 存储库中以便于维护。由于公司政策，我希望为 Maven 设置一个内部镜像，该镜像指向上述 Git 存储库以获取工件。为了在 settings.xml 中设置镜像 url，我似乎无法让 'ssh' 工作：

```
<mirrors>
  <mirror>
    ...
    <mirrorOf>*</mirrorOf>
    <url>ssh://<server_name>/path/repo-name.git</url>
  </mirror>
</mirrors> 
```

我读到 Maven 不支持开箱即用的 ssh，我无法让其他插件工作。有没有更好的方法来让它工作？也许是 git-scm 插件？

# android - Android 视图和屏幕方向

> ID：12150094
> 
> 赞同：0
> 
> 时间：2012-08-27T21:50:31.460
> 
> 标签：android, user-interface

Android中是否可以有两个视图？其中之一是“背景”，当设备旋转时不会旋转。并且顶部的另一个（“UI元素”）在方向改变时旋转？

我知道我可以为整个活动禁用/启用方向更改，但我将如何在一个活动中为单独的视图进行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:05:35.223

我不确定这是否可能，但通常为了支持“横向”和“纵向”方向，您会在“res”文件夹中创建另一个文件夹并将其命名为“layout-land”，然后将 .xml 文件复制到“layout”中" 到 "layout-land" 并对您的 UI 元素进行适当的更改。

如果您想保持背景相同，那么我想您可以将其保持不变，或者您可能必须旋转图像并保存旋转图像的副本以用于横向。

希望这会有所帮助！

# language-agnostic - 从单词集中获取最可能的颜色

> ID：12150095
> 
> 赞同：2
> 
> 时间：2012-08-27T21:50:32.583
> 
> 标签：language-agnostic, nlp

是否有任何现有的库或方法可以让您找出单词集最可能的颜色？例如，黄瓜、苹果、草，它给了我绿色。以前有人朝那个方向工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:42:21.460

如果我必须这样做，我将尝试使用 google image 或其他词根据单词搜索图像，并识别前 n 个结果中最常见的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:37:42.313

如果可能的话，我建议使用一组严格定义的资源，例如 Wikipedia 和[Wordnet](http://wordnet.princeton.edu/)。例如，这里是“熊猫”的 Wordnet：

*S：(n) 大熊猫、熊猫、熊猫熊、浣熊、Ailuropoda melanoleuca（中国和西藏竹林的大型黑白草食性哺乳动物；在某些分类中被认为是熊科或单独科的成员大熊猫科)*

*S：（n）小熊猫、小熊猫、熊猫、熊猫、猫熊、Ailurus fulgens（红褐色旧大陆浣熊状食肉动物；在某些分类中被认为与大熊猫无关）*

由于简洁、精心构造的语言，任何颜色词都很可能很重要。在这里你可以看到熊猫既有黑白的，也有红棕色的。

如果您确定维基百科的子部分（例如“植物描述”），这将有助于提高结果的相关性。此外，维基百科中的第一张图片很可能是最好的“权威”图片。

但是，与所有统计方法一样，您会得到误报（和否定，尽管这些可能不是问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:27:54.237

Daniel 和 Xi.lin 的回答是非常好的想法。沿着同一轴，我们可以将两者与类似于 Xilin 的但更简单的方法相结合：使用您想要查找与“颜色”过滤器相关联的颜色的词查询 Google 图像（参见左下角的栏中）。并查看哪种颜色产生更多结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T03:40:29.407

这听起来像是一个非常合理的 NLP 问题，而且很容易通过 map-reduce 处理。

确定您称之为颜色的单词和短语列表 ['blue'、'green'、'red'、...]。浏览大量句子，对于提到特定颜色的句子，对于该句子中的每个其他单词，`(word, color_name)`在文件中记下。（地图步骤）

然后对于您在语料库中看到的每个单词，汇总您看到的所有颜色以获得类似`{'cucumber': {'green': 300, 'yellow': 34, 'blue': 2}, 'tomato': {'red': 900, 'green': 430'}...}`（减少步骤）

如果你使用足够大的语料库（比如维基百科），并且你知道如何修剪非常小的计数、稀有词，你应该能够制作出非常全面和健壮的字典，将数百万个项目映射到它们的颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T03:40:52.443

另一种方法是在 google 中进行文本搜索，以查找颜色组合和相关单词，并获取结果数量最多的组合。这是一个快速的 Python 脚本：

```
import urllib
import json
import itertools

def google_count(q):
      query = urllib.urlencode({'q': q})
      url = 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&%s' % query
      search_response = urllib.urlopen(url)
      search_results = search_response.read()
      results = json.loads(search_results)
      data = results['responseData']
      return int(data['cursor']['estimatedResultCount'])

colors = ['yellow', 'orange', 'red', 'purple', 'blue', 'green']

# get a list of google search counts
res = [google_count('"%s grass"' % c) for c in colors]
# pair the results with their corresponding colors
res2 = list(itertools.izip(res, colors))
# get the color with the highest score
print "%s is %s" % ('grass', sorted(res2)[-1][1]) 
```

这将打印：

```
grass is green 
```

# python - 在 django 表单数据中选择选项？

> ID：12150096
> 
> 赞同：1
> 
> 时间：2012-08-27T21:50:33.230
> 
> 标签：python, django, django-forms

我基本上是在尝试使用此表单作为检查：如果选择了选项 1（值 0）：渲染页面 1，如果选择了选项 2（值 1）：渲染页面 2。

在我的模板中，我有

```
<form method="POST" action="/account/subscription/"> 
     {% csrf_token %}
     <select size="1">
          <option value="0" name="plan">Plan 1</option>
          <option value="1" name="plan">Plan 2</option>
      </select>
</form> 
```

看法：

```
def subscription(request):
    if request.method != 'POST':
        return HttpResponseRedirect('/signup/additional/')
    else:
        if '0' in request.POST:
            return render_to_response('signup/payment_plan1.html', context_instance=RequestContext(request))
        else:
            return render_to_response('signup/payment_plan2.html', context_instance=RequestContext(request)) 
```

一旦发布...查看我的网络路径，所有帖子返回都是 csrf。我显然做错了什么。我可以在我的视图中使用选择选项作为检查吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:00:24.707

如果要发布某些内容，则需要元素的`name`属性。`select`

```
<select name="foo">
<option value="bar">Bar</option>
</select>

if request.POST.get('foo') == 'bar':
   print 'Bar' 
```

# sql - SQL 简单查询 - 多个条目过滤

> ID：12150098
> 
> 赞同：3
> 
> 时间：2012-08-27T21:50:34.143
> 
> 标签：sql, database, oracle

新手 SQL 查询问题：我正在使用 Oracle SQL Developer。

我有一张桌子：

```
<name>  <color>
steve    red
mark     red
steve    green
john     red
ryan     red 
```

我想做的是让结果只显示颜色列中包含 RED 的名称。
结果将是：

```
 mark
     john
     ryan 
```

由于史蒂夫也有绿色，它不会出现。

外面有人知道吗？

编辑：
谢谢你的回答。我确实看到我应该在结果中说“红色且没有其他颜色”。很抱歉造成混乱，但感谢您的超快速回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:53:02.240

您只需使用一个`WHERE`子句和一个`NOT IN`.

```
SELECT name
FROM yourTable
WHERE color = 'red'
   AND name NOT IN (
                    SELECT name
                    FROM yourTable
                    WHERE color <> 'red'
                ) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e2b78/1)

或者您可以`WHERE`使用`NOT EXISTS`：

```
SELECT name
FROM yourTable t1
WHERE color = 'red'
   AND NOT EXISTS (
                    SELECT  t2.name
                    FROM yourTable t2
                    WHERE  t2.color <> 'red'
                     AND t1.name = t2.name
                ) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e2b78/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T22:16:01.500

只是为了好玩，这里有一个使用窗口函数的解决方案：

```
select *
from (
  select name, 
         color, 
         count(distinct color) over (partition by name) as color_cnt
  from the_table
) t
where color = 'red' 
and color_cnt = 1; 
```

SQLFiddle：[http ://sqlfiddle.com/#!4/d267e/3](http://sqlfiddle.com/#!4/d267e/3)

有一个细微的变化，这*可能*比带有子选择的解决方案更快，因为很可能只需要对表进行一次扫描（尽管其他解决方案可能会使用颜色列上的索引，这可以使两者扫描比单次扫描便宜）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T21:53:57.593

```
SELECT name
FROM yourTable
WHERE color = 'red'
and name not in (
SELECT name
FROM yourTable
WHERE color != 'red') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T21:54:03.890

```
SELECT DISTINCT name
FROM mytable
WHERE color = 'red'
AND name NOT IN (
    SELECT DISTINCT name
    FROM mytable
    WHERE color <> 'red'
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T21:56:17.217

这应该这样做[每个人都有一个适合你的小提琴](http://sqlfiddle.com/#!4/cee24/8)

```
select t.name from t
join 
   (select name,count(1) cnt from t
     group by name
      having count(1) = 1) n
      on t.name = n.name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T21:53:01.410

我想这就是你想要的：

```
SELECT DISTINCT <name> 
FROM <table> 
WHERE <color> = 'red'
AND <name> NOT IN (SELECT DISTINCT <name> 
                     FROM <table> 
                     WHERE <color> != 'red') 
```

# iphone - 核心数据：在索引 x 处获取的对象有一个乱序的部分名称'xxxxxx。对象必须按部分名称排序

> ID：12150101
> 
> 赞同：22
> 
> 时间：2012-08-27T21:50:45.153
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

我知道我不是第一个问这个问题的人，但我真的很难过..

基本上我有一个带有两个按钮的屏幕。每个按钮根据日期将数据加载到下面的表格视图中。在第一个 tableview 的第一次加载（默认选择左侧按钮）时，一切都显示正常。如果我单击右侧按钮，我得到一个空白的 tableview，我得到错误

> 在索引 x 处获取的对象有一个乱序的部分名称“xxxxxx”。对象必须按部分名称排序。

切换回左表视图，数据消失了。两个表视图都是空的。

每个 tableview 有 2 个部分，具体取决于项目的开始时间。如果我消除这些部分，则数据显示正常。不幸的是我需要它们..数据被分为两个部分，如下所示：

```
@interface NSString(agendaSessionKeyPath)
@property (nonatomic, readonly) NSString *sessionSection;
@end

@implementation NSString(agendaSessionKeyPath)

- (NSString *)sessionSection
{
    int timeValue = [[self stringByReplacingOccurrencesOfString:@":" withString:@""] intValue]; //turns 11:00 to 1100
    if (timeValue < 1200)
        return @"Morning";
     else
        return @"Afternoon";
} 
```

获取请求

```
- (void)viewDidLoad
{
     //other viewDidLoad stuff
    [self fetchSessions];
} 
```

根据日期对左右按钮中的数据进行排序的方法：

```
- (void)fetchSessions
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    [dateFormatter setDateFormat:@"yyyy-MM-dd"];

    NSDate* date = nil;
    if (selected == 0) //left button is selected
    {
        date = [dateFormatter dateFromString:@"2012-09-26"];
    }
    else if (selected == 1) //right button is selected
    {
        date = [dateFormatter dateFromString:@"2012-09-27"];
    }

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"date == %@", date];
    [self.fetchedResultsController.fetchRequest setPredicate:predicate];

    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    }
} 
```

获取结果控制器

```
- (NSFetchedResultsController *)fetchedResultsController {
    self.managedObjectContext = [[MATCDatabaseController sharedDatabaseController] managedObjectContext];
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Session"];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"title" ascending:YES];
    NSSortDescriptor *timeSort = [NSSortDescriptor sortDescriptorWithKey:@"timeValue" ascending:YES];
    [fetchRequest setSortDescriptors:@[timeSort, sort]];
    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"startTime.sessionSection"
                                                   cacheName:nil];

    self.fetchedResultsController = theFetchedResultsController;
    [self.fetchedResultsController setDelegate:self];

    return _fetchedResultsController;

} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-27T23:39:20.573

好的，我确实快速浏览了一下。

您使用以下命令初始化 FRC：

```
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:self.managedObjectContext
                                      sectionNameKeyPath:@"startTime.sessionSection"
                                               cacheName:nil]; 
```

这告诉它您的部分标题将通过 key path 获得`startTime.sessionSection`。

现在，提供给 FRC 的获取请求的第一个排序描述符将用于对这些部分进行排序。您首先提供的排序描述符`timeValue`似乎不正确。

您的第一个排序描述符应该为您的部分标题指定排序。改变它，你可能会很高兴。

**编辑**

> 谢谢你们的信息。不过我还是有点失落。您的意思是我应该在 startTime.sessionSection 上添加一个排序描述符，然后再将其分配给 sectionNameKeyPath？我试过了，但仍然没有运气。timeValue 和 startTime.sessionSection 是相关的。会是这样吗？– 鸽舍

您必须确保第一个排序描述符将根据该部分正确排序您的数据。在您的情况下，时间正在被转换为单词。您的初始排序描述符是时间，当数据根据时间排序时，这些部分没有正确排序，这会导致您的错误。

第一个排序描述符**必须**满足节数据。所以，最初，我会尝试...

```
[fetchRequest setSortDescriptors:@[
    [NSSortDescriptor sortDescriptorWithKey:@"startTime.sessionSection"
                                  ascending:NO],
    [NSSortDescriptor sortDescriptorWithKey:@"timeValue"
                                  ascending:YES],
    [NSSortDescriptor sortDescriptorWithKey:@"title"
                                  ascending:YES] ]; 
```

请注意，如果您有大量数据，您可能会发现您的部分机制会变慢。如果发生这种情况，您可能希望将此部分数据添加到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T07:44:25.673

我也有类似的问题，也许有人觉得它有用。

我从 DB 中获取金融交易并按月划分。

DB 有属性 trDate - 这是一个交易日期。但是 trMonth 是一个瞬态属性，例如：

```
- (NSString*)trMonth {
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"LLLL"];
[dateFormatter setLocale:[NSLocale currentLocale]];

return [dateFormatter stringFromDate:trDate];
} 
```

它在 FetchResultsController 中使用如下：

```
...
NSSortDescriptor *sortDate = [[NSSortDescriptor alloc] initWithKey:@"trDate" ascending:YES];

[fetchRequest setSortDescriptors:@[sortDate]];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"trMonth" cacheName:nil];
... 
```

这在生产中运行良好，但是一旦应用程序开始崩溃，在发现根本问题后，我发现（例如）7 月有两个交易：2014 年 7 月和 2015 年 7 月。这是崩溃点，因为 trDate 7 月排序良好2014 < 2015 年 7 月，但我的方法认为它们是同一个月。该解决方案不仅将月份名称用作部分名称，而且将年份用作部分名称：

```
- (NSString*)trMonthYear {
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"LLLL yyyy"]; // added year also
[dateFormatter setLocale:[NSLocale currentLocale]];

return [dateFormatter stringFromDate:trDate];
} 
```

# c++ - C++ 中的析构函数会自动释放类中声明的指针变量的内存吗？

> ID：12150106
> 
> 赞同：1
> 
> 时间：2012-08-27T21:51:07.700
> 
> 标签：c++, memory-management

假设我有以下课程：

```
 class foo{

   int array_allocation(int length){

          array= new int[length];
          return 0;

   }
   private:
      int *array;

   }; 
```

我应该在这里实现`~foo(){ delete []array};`还是隐式完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T21:56:57.777

都不是，你应该`std::vector<int>`改用。我什至不是作为你们班的成员说话，而是作为你们班的成员*说话*。

编辑：不，内存不会自动释放。您需要提供有意义的析构函数、复制构造函数和赋值运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:42:55.957

指针不会自动删除。同样，当复制该类时，复制的是指针而不是内存。您应该遵守[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)设计模式和[三原则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

# ruby-on-rails - 使用变量作为 SQL 活动记录列名打印到文件？

> ID：12150115
> 
> 赞同：0
> 
> 时间：2012-08-27T21:51:59.277
> 
> 标签：ruby-on-rails, ruby, variables, activerecord, printing

这是我的伪代码示例：

```
Mydb.find_by_sql("...").each do |data|
.
.
aFile.print(data.time.to_f, " ", data.column_name, "\n") 
```

我的问题是如何为 column_name 使用变量？我想是这样的：

```
aFile.print(data.time.to_f, " ", data.#{column_name}, "\n") 
```

或者

```
aFile.print(data.time.to_f, " ", data.'#{column_name}', "\n") 
```

或者

```
aFile.print(data.time.to_f, " ", data."#{column_name}", "\n") 
```

但这些没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:55:40.303

你可以试试

```
data.send('column_name') 
```

所以如果返回的 ActiveRecord 有一个属性 'foo'

```
puts(data.foo) 
```

是相同的

```
puts(data.send('foo')) 
```

更新您的评论。

```
@x = X.find(1)
['date','age','sex'].each do |attr|
  puts "The value of #{attr} is #{@x.send(attr)}"
end 
```

# bash - 如何为多个分区编写 sfdisk 或 parted 脚本？

> ID：12150116
> 
> 赞同：11
> 
> 时间：2012-08-27T21:52:11.777
> 
> 标签：bash, partitioning

出于 QA 的目的，我需要能够通过 bash 脚本为 RHEL 和 SLES 分区多达 30 个或更多分区的驱动器。

我试图通过一个“here document”在 BASH 中使用 fdisk 执行此操作，但您可以猜到它在各个步骤中都会爆炸。我认为这是因为输入命令的时间发生在错误的时间并且不同步。我的脚本 10 次中有 1 次可以正常工作。

我看过 parted 和 sfdisk 并不太了解如何使用这些工具。

我只用过fdisk。

我的问题是，使用 fdisk 您可以一遍又一遍地声明“新分区 +1gb”之类的内容，这对我有用，因为在我的脚本中，我不需要跟踪先前的分区或剩余空间或进行任何计算。每次我运行这个函数时，这只会从任何未使用的空间中创建一个额外的 1gb 分区。

有没有办法使用 parted 或 sfdisk （或任何其他已经成为这些发行版一部分的工具），这样我就可以编写一个从 1 到 x 操作的循环，而不必计算剩余空间？有没有人可以分享任何例子？

## 更新

这是我的功能之一的示例。在脚本开始时，我们询问用户要创建的分区数量、它们的大小（对于所有分区都是静态的）以及 FS 的类型（如果有）。此函数创建分区 1 到 3，然后一个不同的函数处理扩展（第 4 个），另一个处理第 5 个到 nn。

正如我之前所说，这个脚本功能齐全；我的问题是，有时发送到 fdisk 的命令似乎到达了错误的时间，这会破坏整个脚本，从而破坏任何自动化。

所以命令是这样发送的：

```
n
p
1

+1M
w 
```

我一直在阅读 fdisk 并了解到它不适合编写脚本，所以我看到的是，在脚本模式下，fdisk 可能会要求`p`我的脚本已经认为是时候发送`1`.

fdisk 对我有用的是，在你指定分区号之后，它已经**计算了下一个空闲扇区**，所以我现在要做的就是发送一个空白行作为我的开始，然后为我的总大小发送 +1M。据我所知，Parted 和 sfdisk 似乎并没有以这种方式工作，而且我在这方面仍然很陌生，无法理解目前如何自动化这些工具。

```
Create1to3Primary_Func() {
    Size=\+$partSize\MB
    for i in {1..3}
    do
        echo " this loop i= $i"
        echo "Creating Partition $i on $targetFull as $targetFull$i using Create1to3Primary_Func()"
        rm -f /tmp/myScript
        echo -e "n" >> /tmp/myScript
        echo -e "p" >> /tmp/myScript
        echo -e "$i" >> /tmp/myScript
        echo -e " " >> /tmp/myScript
        echo -e "$Size" >> /tmp/myScript
        echo -e "w" >> /tmp/myScript
        echo -e "EOF" >> /tmp/myScript
        fdisk $targetFull < /tmp/myScript
        echo "  sleeping Create1to3Primary_Func()"
        sleep 4s
        if [ "$RawOrFs" == "f" ]; then
            mkfsCMD="mkfs.$fsType"
            mkfsFullTarget="$targetFull$i"
            cmdline="$mkfsCMD $mkfsFullTarget -L  'Partition$i'"
            echo "Creating $fsType File System on $mkfsFullTarget"
            $cmdline
        fi
        void="/mnt/mymnt$i"
        if [ ! -d $void ] ; then
            echo "Creating Mount Point /mnt/mymnt$i"
            void="/mnt/mymnt$i"
            mkdir $void
        fi
        echo "Part Probe on  $targetFull "
        partprobe $targetFull ; sleep 4s
    done
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T11:55:34.237

不确定是否得到您真正想要的，但您可能对`sfdisk`可以转储分区布局并使用此布局对其他磁盘进行分区这一事实感兴趣。例如：

```
sfdisk -d /dev/sda > mydiskpartitionslayout 
```

然后在你的脚本中（当然要小心）你可以指定

```
sfdisk /dev/sdx < mydiskpartitionslayout 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-08T17:55:55.677

**磁盘**

`sfdisk`是一个脚本版本`fdisk`

[它是 的一部分`util-linux`](https://git.kernel.org/cgit/utils/util-linux/util-linux.git/tree/disk-utils?h=stable/v2.27)，就像 一样`fdisk`，所以可用性应该是相同的。

可以使用以下命令创建具有占用整个磁盘的单个分区的分区表：

```
echo 'type=83' | sudo sfdisk /dev/sdX 
```

下面解释更复杂的分区表。

要生成示例脚本，请设置您的磁盘之一：

```
sudo sfdisk -d /dev/sda > sda.sfdisk 
```

我的 Lenovo T430 Windows 7 / Ubuntu 双启动上的示例输出：

```
label: dos
label-id: 0x7ddcbf7d
device: /dev/sda
unit: sectors

/dev/sda1 : start=        2048, size=     3072000, type=7, bootable
/dev/sda2 : start=     3074048, size=   195430105, type=7
/dev/sda3 : start=   948099072, size=    28672000, type=7
/dev/sda4 : start=   198504446, size=   749594626, type=5
/dev/sda5 : start=   198504448, size=   618891264, type=83
/dev/sda6 : start=   940277760, size=     7821312, type=82
/dev/sda7 : start=   817397760, size=    61437952, type=83
/dev/sda8 : start=   878837760, size=    61437500, type=83 
```

将脚本保存到文件后，您可以将其应用于`sdX`：

```
sudo sfdisk /dev/sdX < sda.sfdisk 
```

对于`sfdisk`输入，您可以省略设备名称，并使用以下类型的行：

```
start=        2048, size=     3072000, type=7, bootable 
```

如果存在，它们将被忽略，并且设备名称取自命令行参数。

一些解释：

*   标题行：全部可选：
    *   `label`：分区表的类型。[`dos`(MBR)](https://en.wikipedia.org/wiki/Master_boot_record)是旧的，被广泛支持[`gpt`](https://en.wikipedia.org/wiki/GUID_Partition_Table)的，新的闪亮的东西。
    *   `unit`: 只`sector`支持。1 个扇区通常等于 512 字节。查找`cat /sys/block/sda/queue/hw_sector_size`另请参阅：[https ://unix.stackexchange.com/questions/2668/finding-the-sector-size-of-a-partition](https://unix.stackexchange.com/questions/2668/finding-the-sector-size-of-a-partition)
    *   `device`: 信息量只有我觉得
*   分割线：

    *   `start`: 分区开始的磁盘内的偏移量。

        `start`有很好的默认值，通常可以省略：

        *   第一行`start`是 2048，即 1Mb (2048 + 512)，这是磁盘兼容性的合理默认值
        *   进一步`start`默认为第一个未分配的位置
    *   `size`：`man sfdisk`说：`The default value of size indicates "as much as possible"`。因此，要使用单个分区填充磁盘，请使用：`/dev/sda : start=2048, type=83`

    *   `type`: 存储在每个[分区条目](https://en.wikipedia.org/wiki/Master_boot_record#PTE)的引导扇区上的魔术字节。可能的值：[https](https://en.wikipedia.org/wiki/Partition_type) ://en.wikipedia.org/wiki/Partition_type在这个例子中我们观察到：
        *   `7`(`sda1`和)：Windows 支持的文件系统`2`。`3`预装的 Windows 东西和联想恢复分区。`sudo blkid`标签有助于识别它们。
        *   `5`( `sda4`): 扩展主分区，其中会包含其他逻辑分区（因为我们只能有4个带MBR的主分区）
        *   `83`( `sda5`、`7`和`8`)：Linux 支持的分区。对我来说`home`，一个和两个具有不同 Ubuntu 版本的根
        *   `82`( `sd6`): 交换

`fdisk`还可以使用命令读取`sfdisk`脚本，该`I`命令在交互式`fdisk`会话期间“获取”脚本，允许您在写入分区之前进一步自定义。

在 Ubuntu `sfdisk`16.04、2.27.1 上测试。

**格式化并填充分区的图像文件，而不`sudo`**

`sfdisk`这是在不炸毁硬盘的情况下学习使用的好方法：[如何在没有root权限的情况下创建多分区SD磁盘映像？](https://stackoverflow.com/questions/10949169/how-to-create-a-multi-partition-sd-disk-image-without-root-privileges/52850819#52850819)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-29T17:56:37.843

我喜欢的一种方法（我在[本文](http://xmodulo.com/how-to-run-fdisk-in-non-interactive-batch-mode.html)中看到）是直接对 fdisk 输入“编写脚本”，因为它比 sfdisk 更智能地创建“直到磁盘末尾”或“2 GB 大”的分区。例子：

```
echo "d
1
d
2
d
3
n
p
1

+2G
n
p
2

w
" | fdisk /dev/sda 
```

此脚本最多删除 3 个现有分区，创建一个 2 GB 分区（例如交换），然后创建一个可扩展剩余磁盘空间的分区。

相反，如果在 sfdisk 中创建并使用了分区布局，如果有更多可用空间，脚本将不会覆盖整个磁盘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-12T09:54:45.150

自动化重复性任务是自动化生活中的一种常态，如果我们要将它们包含在我们的脚本中，我们需要一种方法来自动为这些程序提供答案。

这是一个名为“Expect”的程序进入自动化的地方。对于基于 Red Hat 的系统，执行以下命令安装“Expect”

百胜安装期望

对于基于 Debian 或 Ubuntu，执行以下命令。

apt-get 安装期望

下面是创建分区 /dev/sdc 的期望脚本

* * *

# !/usr/bin/expect

log_file -a "/tmp/expect.log"

设置超时 600

生成 /sbin/fdisk /dev/sdc

期望“命令（m寻求帮助）：” {发送“n\r”}

期望“p主分区（1-4）”

期望 "" { 发送 "p\r" }

期望“分区号（1-4）：” {发送“1\r”}

期望“第一个圆柱体（1-133544，默认 1）：” {发送“1\r”}

期望 ": " { 发送 "\r" }

期望“命令（m寻求帮助）：” {发送“w\r”}

相互作用

# java - 如何匹配Java中字符串的开头？

> ID：12150118
> 
> 赞同：0
> 
> 时间：2012-08-27T21:52:23.390
> 
> 标签：java, regex

我想匹配一个 HTML 文件：

如果文件以空格开头，然后是结束标记`</sometag>`, `return true`.

否则`return false`。

我用过`"(\\s)*</(\\w)*>.*"`，但不匹配`\n </p>\n </blockquote> ...`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:07:03.577

感谢 Gabe 的帮助。加布是对的。默认情况下`.`不匹配`\n`。我需要设置`DOTALL`模式。

为此，请将 添加`(?s)`到正则表达式的开头，即`(?s)(\\s)*</(\\w)*>.*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:01:23.397

你也可以这样做：

```
Pattern p = Pattern.compile("(\\s)*</(\\w)*>");
Matcher m = p.matcher(s);
return m.lookingAt(); 
```

它只是检查字符串是否以模式开头，而不是检查整个字符串是否与模式匹配。

# android - 能够解析 NFC 文本记录但不能解析 uri？

> ID：12150121
> 
> 赞同：1
> 
> 时间：2012-08-27T21:52:31.493
> 
> 标签：android, android-intent, uri, nfc

好的，所以我一直在玩我的第一个 Android 应用程序，而 NFC 非常受欢迎。我能够成功拾取纯文本类型的记录，但是当我切换到尝试拾取 uri 记录时，手机的浏览器会继续打开而不是我的应用程序。在这一点上我一无所知，所以这就是我得到的......

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:scheme="http" android:host="google.com"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <data android:mimeType="text/plain"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity> 
```

当我阅读标签时，我得到了一个新的意图，但它的动作类型是“MAIN”。只是重新启动吗？如果是这样，为什么文本记录不做同样的事情？我尝试了多个 uri 记录，每次我得到这种行为。这是java src的一部分。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Intent launchIntent = getIntent();
    String action = launchIntent.getAction();
    if(action.equals(NfcAdapter.ACTION_NDEF_DISCOVERED)) {
        Log.i(tag, "MATCH!");
    }

    nfcAdapter = NfcAdapter.getDefaultAdapter(this);
    nfcPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    tagDetected = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);

    tagDetected.addDataScheme("http");
    tagDetected.addDataAuthority("google.com", null);
    filters = new IntentFilter[] { tagDetected };

    techArray = new String[][] {
            new String[] {
                    IsoDep.class.getName()
            },
            new String[] {
                    NfcB.class.getName()
            },
            new String[] {
                    Ndef.class.getName()
            }
    };

}

public void onResume(){
    super.onResume();

    nfcAdapter.enableForegroundDispatch(this, nfcPendingIntent, filters, techArray);

    Intent launchIntent = getIntent();
    String action = launchIntent.getAction();
    if(action.equals(NfcAdapter.ACTION_NDEF_DISCOVERED)) {
        Log.i(tag, "MATCH!");
    } else if(action.equals(NfcAdapter.ACTION_TECH_DISCOVERED)) {
        Log.i(tag, "TECH DISCOVERED");

    } else if(action.equals(NfcAdapter.ACTION_TAG_DISCOVERED)) {
        Log.i(tag, "TAG DISCOVERED");
    }

    Parcelable[] msg = launchIntent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
    //byte[] payloadData = msg.getRecords()[0].getPayload();
    //Log.i(tag, "NUM records = " + Integer.toString(msg.getRecords().length));

}

public void onPause() {
    super.onPause();

    nfcAdapter.disableForegroundDispatch(this);
} 
```

另一个有趣的注意事项是，当我在 enableForegroundDispatch() 调用中不包含技术列表时，应用程序根本不会接收任何由 NFC 产生的意图（在尝试读取 uri 记录时）。任何想法哦明智的互联网？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:37:05.870

启用 ForegroundDispatch 后，意图将通过 到达`onNewIntent()`，因此您需要在 Activity 中覆盖该方法以接收 NFC 意图。

您还需要确保主机名完全匹配。如果标签包含“www.google.com”，则您的意图过滤器应包含相同的名称：`<data android:scheme="http" android:host="www.google.com"/>`和`tagDetected.addDataAuthority("www.google.com", null)`。

# ios - 委托方法永远不会被调用

> ID：12150122
> 
> 赞同：-1
> 
> 时间：2012-08-27T21:52:31.693
> 
> 标签：ios, delegates

第一的。这是我的代码。

绘画视图.h

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
@protocol PaintingViewDelegate
-(void)makeLine:(CGPoint) touch;
@end
//CLASS INTERFACES:
@interface PaintingView : UIView
{
id <PaintingViewDelegate> delegate;
@private
   CGPoint  location;
   CGPoint  previousLocation;
   Boolean  firstTouch;
}
@property(nonatomic, readwrite) CGPoint location;
@property(nonatomic, readwrite) CGPoint previousLocation;
@property(nonatomic, assign) id <PaintingViewDelegate> delegate;
@end 
```

绘画视图.m

```
#import <QuartzCore/QuartzCore.h>
#import <OpenGLES/EAGLDrawable.h>
#import "PaintingView.h"

//CLASS IMPLEMENTATIONS:
@implementation PaintingView
@synthesize  location;
@synthesize  previousLocation;
@synthesize delegate;
// Implement this to override the default layer class (which is [CALayer class]).
// We do this so that our view will be backed by a layer that is capable of OpenGL ES rendering.
+ (Class) layerClass
{
return [CAEAGLLayer class];
}

// Handles the start of a touch
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
CGRect              bounds = [self bounds];
UITouch*    touch = [[event touchesForView:self] anyObject];
firstTouch = YES;
// Convert touch point from UIView referential to OpenGL one (upside-down flip)
location = [touch locationInView:self];
location.y = bounds.size.height - location.y;
    [[self delegate]makeLine:location];
}
...
@end 
```

视图控制器.h

```
#import "PaintingView.h"

@interface GMViewController : UIViewController <AGSMapViewLayerDelegate, PaintingViewDelegate>
{
PaintingView *painting1;
}
...
@end 
```

视图控制器.m

```
...
- (void)viewDidLoad
{
[super viewDidLoad];

painting1 = [[PaintingView alloc] init];
[painting1 setDelegate:self];
}
...
-(void)makeLine(CGPoint) touch
{
NSLog(@"TOUCH");
}
...
@end 
```

我的委托方法永远不会被调用。我从 iOS-developer.net 资源示例中创建了我的委托方法。编译过程中没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:36:37.523

通过使用我的类文件`paintingView's`中的行设置委托来 修复它。`[painting setDelegate: self];``viewController`

# javascript - 如何访问事件对象？

> ID：12150123
> 
> 赞同：0
> 
> 时间：2012-08-27T21:52:31.730
> 
> 标签：javascript, jquery, javascript-events

我有一个与此类似的 Javascript 对象：

```
var MyClass;
MyClass = (function() {

    // private
    var $elems;

    // constructor
    function MyClass(selector) {
        $elems = $(selector);
        $elems.change(myEventHandler(e));
    }

    // event handler
    function myEventHandler(e) {
        var isSelected = ($(e.target).attr('checked') == 'checked');
        if (isSelected) {
            alert('You selected me');
        }
    }

    return MyClass;

})(); 
```

我在我的 html 文档中调用这个类，如下所示：

```
$(function(){ 

    var myClass; 
    myClass = new MyClass(".MySelector");

}); 
```

这给了我错误：

```
Uncaught ReferenceError: e is not defined MyClassJsFile.js:17
    MyClass MyClassJsFile.js:17
    (anonymous function) Step3:36
    f.extend._Deferred.e.resolveWith jquery.min.js:16
    e.extend.ready jquery.min.js:16
    c.addEventListener.B 
```

我以为我在构造函数的这一行中将事件对象传递给事件处理程序：

```
$elems.change(myEventHandler(e)); 
```

在这种情况下如何正确传递事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T21:55:18.220

您正在使用未定义的变量调用事件处理程序。事件处理程序是函数，因此只需传递函数引用而不调用它：

```
$elems.change(myEventHandler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T21:57:26.400

您可以使用：

```
$elems.change(myEventHandler);  // or $elems.on('change', myEventHandler) in 1.7+ 
```

只是将引用传递给正确的处理程序。因为它是您立即*调用*处理程序，然后尝试将（不存在的）返回值绑定到`change`处理程序。

顺便说一句，您对选定框的检查过于复杂。你应该可以写：

```
var isSelected = this.checked; 
```

基于 jQuery 将设置`this`为实际更改的 DOM 元素，您可以立即检查其布尔`checked`属性。

# delphi - 如何在不拉伸的情况下将图标添加到更大尺寸的 ImageList？

> ID：12150128
> 
> 赞同：1
> 
> 时间：2012-08-27T21:52:39.150
> 
> 标签：delphi

我有大小为 72x72 的 ImageList，由 SHGetFileInfo 获得的图标 (HICON) 的句柄（例如大小为 32x32 的大图标）。如何将它添加到这个 ImageList 保持透明度，但不拉伸？现在我在中间绘制一个临时位图所需大小的图标，然后将其添加到 ImageList 中。

```
SHGetFileInfo(PChar(Path + sr.Name), sr.FindData.dwFileAttributes, fi, SizeOf(fi), SHGFI_ICON or SHGFI_LARGEICON or SHGFI_USEFILEATTRIBUTES);
Bmp:=TBitmap.Create;
Bmp.PixelFormat:=pf32bit;
Bmp.SetSize(72, 72);
DrawIcon(Bmp.Canvas.Handle, 20, 20, fi.hIcon);
iIcon:=ImageList_AddMasked(ilThumbs.Handle, Bmp.Handle, 0);
Bmp.Free; 
```

但我认为存在一种更快的方法（无需绘制临时位图）。Also image in ImageList loses transparency and when I set index of this Image in ImageList for ListView item.ImageIndex it looks not pretty (when this item is selected, white background around is present). 有什么办法可以解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:11:47.667

This is the code that I use to perform this task.

Note that I am assuming that the original icon uses 32 bit colour, with alpha channel. That's reasonable in the settings that I use this code, but I can't be sure whether or not it's reasonable for you.

```
uses
  Windows, Graphics;

function CreateIconFromSmallerIcon(IconSize: Integer; SmallerIcon: HICON): HICON;

  procedure GetDIBheaderAndBits(bmp: HBITMAP; out bih: BITMAPINFOHEADER; out bits: Pointer);
  var
    pbih: ^BITMAPINFOHEADER;
    bihSize, bitsSize: DWORD;
  begin
    bits := nil;
    GetDIBSizes(bmp, bihSize, bitsSize);
    pbih := AllocMem(bihSize);
    Try
      bits := AllocMem(bitsSize);
      GetDIB(bmp, 0, pbih^, bits^);
      if pbih.biSize<SizeOf(bih) then begin
        FreeMem(bits);
        bits := nil;
        exit;
      end;
      bih := pbih^;
    Finally
      FreeMem(pbih);
    End;
  end;

  procedure InitialiseBitmapInfoHeader(var bih: BITMAPINFOHEADER);
  begin
    bih.biSize := SizeOf(BITMAPINFOHEADER);
    bih.biWidth := IconSize;
    bih.biHeight := 2*IconSize;//height of xor bitmap plus height of and bitmap
    bih.biPlanes := 1;
    bih.biBitCount := 32;
    bih.biCompression := BI_RGB;
  end;

  procedure CreateXORbitmap(const sbih, dbih: BITMAPINFOHEADER; sptr, dptr: PDWORD);
  var
    line, xOffset, yOffset: Integer;
  begin
    xOffset := (IconSize-sbih.biWidth) div 2;
    yOffset := (IconSize-sbih.biHeight) div 2;
    inc(dptr, xOffset + IconSize*yOffset);
    for line := 0 to sbih.biHeight-1 do begin
      Move(sptr^, dptr^, sbih.biWidth*SizeOf(DWORD));
      inc(dptr, IconSize);//relies on the fact that no padding is needed for RGBA scanlines
      inc(sptr, sbih.biWidth);//likewise
    end;
  end;

var
  SmallerIconInfo: TIconInfo;
  sBits, xorBits: PDWORD;
  xorScanSize, andScanSize: Integer;
  xorBitsSize, andBitsSize: Integer;
  sbih: BITMAPINFOHEADER;
  dbih: ^BITMAPINFOHEADER;
  resbitsSize: DWORD;
  resbits: Pointer;

begin
  Result := 0;
  Try
    if not GetIconInfo(SmallerIcon, SmallerIconInfo) then begin
      exit;
    end;
    Try
      GetDIBheaderAndBits(SmallerIconInfo.hbmColor, sbih, Pointer(sBits));
      if Assigned(sBits) then begin
        Try
          if (sbih.biWidth>IconSize) or (sbih.biHeight>IconSize) or (sbih.biPlanes<>1) or (sbih.biBitCount<>32) then begin
            exit;
          end;

          xorScanSize := BytesPerScanline(IconSize, 32, 32);
          Assert(xorScanSize=SizeOf(DWORD)*IconSize);
          andScanSize := BytesPerScanline(IconSize, 1, 32);
          xorBitsSize := IconSize*xorScanSize;
          andBitsSize := IconSize*andScanSize;
          resbitsSize := SizeOf(BITMAPINFOHEADER) + xorBitsSize + andBitsSize;
          resbits := AllocMem(resbitsSize);//AllocMem zeroises the memory
          Try
            dbih := resbits;
            InitialiseBitmapInfoHeader(dbih^);

            xorBits := resbits;
            inc(PByte(xorBits), SizeOf(BITMAPINFOHEADER));
            CreateXORbitmap(sbih, dbih^, sBits, xorBits);

            //don't need to fill in the mask bitmap when using RGBA
            Result := CreateIconFromResourceEx(resbits, resbitsSize, True, $00030000, IconSize, IconSize, LR_DEFAULTCOLOR);
          Finally
            FreeMem(resbits);
          End;
        Finally
          FreeMem(sBits);
        End;
      end;
    Finally
      if SmallerIconInfo.hbmMask<>0 then begin
        DeleteObject(SmallerIconInfo.hbmMask);
      end;
      if SmallerIconInfo.hbmColor<>0 then begin
        DeleteObject(SmallerIconInfo.hbmColor);
      end;
    End;
  Finally
    DestroyIcon(SmallerIcon);
  End;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:24:34.467

好的，我的解决方案如下：

```
procedure SetAlpha(Bitmap: TBitmap);
type
  PPixelRec = ^TPixelRec;
  TPixelRec = packed record
    B, G, R, Alpha: Byte;
  end;
var
  X, Y: Integer;
  Pixel: PPixelRec;
begin
  for Y := 0 to (Bitmap.Height - 1) do
  begin
    Pixel := Bitmap.ScanLine[Y];
    for X := 0 to (Bitmap.Width - 1) do
    begin
      Pixel.Alpha:=255;
      Inc(Pixel);
    end;
  end;
end;
//skipped
var Bmp: TBitmap;
    fi: TSHFileInfo;
    ImageList1: TImageList;
begin
  ImageList1:=TImageList.CreateSize(72, 72);
  ImageList1.DrawingStyle:=dsTransparent;
  ImageList1.ColorDepth:=cd32Bit;
  SHGetFileInfo('c:\Windows\notepad.exe', FILE_ATTRIBUTE_NORMAL, fi, SizeOf(fi), SHGFI_ICON or SHGFI_LARGEICON or SHGFI_USEFILEATTRIBUTES);
  Bmp:=TBitmap.Create;
  Bmp.SetSize(72, 72);
  SetAlpha(Bmp);
  Bmp.Canvas.Brush.Color:=clWhite;
  Bmp.Canvas.FillRect(Rect(0, 0, 72, 72));
  DrawIcon(Bmp.Canvas.Handle, 20, 20, fi.hIcon);
  fi.iIcon:=ImageList1.Add(Bmp, nil);
  ImageList1.Draw(Canvas, 0, 0, fi.iIcon); //just to see that's alright
end; 
```

# windows-server-2008 - 来自 gmt 的 timeoffset 的 Windows 注册表设置未更新

> ID：12150129
> 
> 赞同：0
> 
> 时间：2012-08-27T21:52:49.400
> 
> 标签：windows-server-2008, timezone-offset, registrykey

Windows 服务器有一个注册表项 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation，其中字段 ActiveTimeBias 将返回您正在运行的机器从 GMT 开始的偏移量（以分钟为单位）。

我们有一个 Web 应用程序，它需要在我们生成的 html 页面上向用户展示他们的当地时间。为此，我们让他们为其时区设置首选项，然后获取上述值，以便可以比较服务器时间和客户端时间并进行正确的计算。

在我们构建的服务器上，这非常有效。我们正在将我们的应用程序部署到 1 层云提供商中，该提供商提供我们配置和使用的 windows 服务器 ami。我们发现，当您在本地服务器上使用时钟控制面板时，TimeZoneInformation 的注册表项是正确的。当我们对这个虚拟机做同样的事情时，除了 ActiveTimeBias 之外，条目都是正确的。

微软告诫不要以惯常的方式欺骗​​个人价值。

社区的问题 - 有没有其他人遇到过这个问题，如果有，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:40:12.420

通常不会直接针对这些注册表项进行编程。例如，在 .Net 中，我们有`TimeZoneInfo`类。它使用相同的数据，但以对开发人员更友好的方式。

关于您的特定问题，`ActiveTimeBias`密钥保存您的服务器设置的时区与 UTC 的当前偏移量。如果您的服务器位于遵循夏令时规则的时区，那么这将每年更改两次。如果您手动更新您的时区并刷新注册表，您会看到它发生了变化。

我能提供的最好建议是，由于服务器的时区可能对任何人都不重要，因此您应该将其设置为 UTC。

另请参阅：[夏令时和时区最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)

# java - 在午夜 (12 AM) 更新小部件失败

> ID：12150134
> 
> 赞同：4
> 
> 时间：2012-08-27T21:53:03.087
> 
> 标签：java, android, date, alarmmanager

我有一个带有小部件的回历日历应用程序。Hijri 日历的日期应在午夜使用 AlarmManager 更改。问题是尽管使用警报管理器来安排午夜更新，小部件并没有在午夜 12 点准确更新。它将在凌晨 12 点到 1 点之间更新。

我哪里错了？

爪哇：

```
private static PendingIntent service = null;
private static long UPDATES_CHECK_INTERVAL = 24 * 60 * 60 * 1000;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
    {

        schedule(context);
        super.onUpdate(context, appWidgetManager, appWidgetIds);
    }

    protected void schedule(Context context) {
        final AlarmManager m = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

        final Calendar TIME = Calendar.getInstance();
        Date now = new Date();
        TIME.add(Calendar.DAY_OF_MONTH, 1);
        TIME.set(Calendar.HOUR_OF_DAY, 0);
        TIME.set(Calendar.MINUTE, 0);
        TIME.set(Calendar.SECOND, 0);
        TIME.set(Calendar.MILLISECOND, 0);

        long firstTime = (TIME.getTimeInMillis()-now.getTime());

        final Intent i = new Intent(context, UpdateService.class);

        if (service == null)
        {
            service = PendingIntent.getService(context, 0, i, PendingIntent.FLAG_CANCEL_CURRENT);
        }

        m.setRepeating(AlarmManager.RTC, firstTime, UPDATES_CHECK_INTERVAL, service);
    } 
```

显现：

```
<receiver android:name="com.example.app.Widget" android:label="Calendar" android:exported="false">
    <intent-filter >
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        <action android:name="android.appwidget.action.APPWIDGET_ENABLED" />
        <action android:name="android.intent.action.TIMEZONE_CHANGED" />
        <action android:name="android.intent.action.TIME_SET" />
        <action android:name="android.intent.action.DATE_CHANGED" />
    </intent-filter>

    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/widget_info" />
</receiver> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:28:18.943

我认为您需要更改与 Calender 和 AlarmManager 相关的代码。

这个日历代表了*第二天午夜*的准确时间。*并且 AlarmManager 将在每天*的那个时候触发意图。

```
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.set(Calendar.SECOND, 0);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.HOUR, 0);
calendar.set(Calendar.AM_PM, Calendar.AM);
calendar.add(Calendar.DAY_OF_MONTH, 1); 

AlarmManager alarmManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, service); 
```

**注意：**我认为您应该在方法中添加上述代码`onEnabled()`。[这里重点介绍一下 AppWidgetProvider 的相关方法](http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)。

# php - php array_intersect 显示没有交集

> ID：12150137
> 
> 赞同：1
> 
> 时间：2012-08-27T21:53:11.880
> 
> 标签：php, arrays, array-intersect

我有两个数组 $t1 和 $t2。当我打印出来时，我得到以下信息：

t1：

```
Array ( [0] => Christina Aguilera [1] => Iron Maiden [2] => Bob Marley ) 
```

t2：

```
Array ( [0] => Bob Marley ) 
```

我正在尝试通过 array_intersect 函数获取数组的公共元素，并且我正在使用以下行：

```
$intersection = array_intersect($t1,$t2); 
```

但是，由于某种原因，当我打印结果 $intersection 时，我得到：

```
Array ( ) 
```

任何人都可以看到它出了什么问题吗？我的函数的代码在下面，但我认为上面应该足以解决它。

```
// For extra information
function findMutualInterests($_uProArray, $_tProArray)
{
    $_commonDetails = null;

    $_fieldNames = array_keys($_uProArray[0]);
    $_uProValues = array_values($_uProArray[0]);
    $_tProValues = array_values($_tProArray[0]);
    //print_r($_uProValues);

    // Iterate over the arrays and find ones in common
    for ($i = 0; $i < count($_uProValues); $i++) {
        $t1 = explode(',',$_uProValues[$i]);
        print_r($t1);
        $t2 = explode(',',$_tProValues[$i]);
        print_r($t2);
        $intersection = array_intersect($t1,$t2);
        print_r($intersection);
        $_commonDetails[$_fieldNames[$i]] = implode($intersection);
    }
    return $_commonDetails;
} 
```

编辑：只是想我会指出上面显示的 $t1 和 $t2 的输出是以下函数的单次迭代的输出。我只是选择了那个作为例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:10:16.573

[您的代码工作正常](http://codepad.viper-7.com/lowysV)，尝试修剪输入字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:08:35.687

你的代码有一个很大的错误。如果您有`$_tProValues`比 in更多的元素，`$_uProValues`您将不会测试`$_tProValues`数组中的所有可能性。那么你将无法测试所有的可能性。这里发生的事情就是这样，你没有测试所有的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:08:37.230

检查上面的评论，因为这很好用：

```
<?php

$a = array (
        0 => 'Christina Aguilera',
        1 => 'Iron Maiden',
        2 => 'Bob Marley'
    );

$b = array (
        0 => 'Bob Marley'
    );

$intersect = array_intersect( $a, $b );

print_r( $intersect );

?> 
```

输出：

```
Array
(
    [2] => Bob Marley
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-22T07:25:00.043

```
**Check the code it is very useful for you ,because this works fine:**

$final_arr = [];
foreach ($a as $a_val) {
      foreach ($b as $b_val) {
        if(in_array(strtolower($a), array_map('strtolower', $b_val))){
            $final_arr[] = $b_val; 
            }
       }
    } 
```

# r - lubridate 的夏令时

> ID：12150138
> 
> 赞同：5
> 
> 时间：2012-08-27T21:29:12.017
> 
> 标签：r, time-series

我在装有 OS X Mountain Lion 的 Mac 上运行 R 2.15.1。我正在尝试使用`lubridate`包 (v 1.1.0) 在 2011 年的美国东部时区以 15 分钟的间隔生成一系列时间。以下似乎应该有效：

```
d0 <- mdy_hms("1/1/2011 5:00:00", tz="UTC")
dspan <- d0 + c(0:35039) * minutes(15)
espan <- with_tz(dspan,tz="America/New_york") 
```

现在，2011 年夏令时开始于 3 月 13 日凌晨 2 点。该日期的前 16 个 espan 值是：

```
espan[(month(espan)==3)&(day(espan)==13)][1:16]

 [1] "00:00:00 EST" "00:15:00 EST" "00:30:00 EST" "00:45:00 EST"
 [5] "01:00:00 EST" "01:15:00 EST" "01:30:00 EST" "01:45:00 EST"
 [9] "03:00:00 EDT" "03:15:00 EDT" "03:30:00 EDT" "03:45:00 EDT"
[13] "04:00:00 EDT" "04:15:00 EDT" "04:30:00 EDT" "04:45:00 EDT" 
```

在上面的输出中，我删除了日期以使其适合此处。但它给了我我所期望的。美国东部标准时间凌晨 1 点后一小时的时间是美国东部时间凌晨 3 点。但是，夏令时于 11 月 6 日结束，以下是 espan 在该日期的前 16 个值：

```
espan[(month(espan)==11)&(day(espan)==6)][1:16]

 [1] "00:00:00 EDT" "00:15:00 EDT" "00:30:00 EDT" "00:45:00 EDT"
 [5] "01:00:00 EDT" "01:15:00 EDT" "01:30:00 EDT" "01:45:00 EDT"
 [9] "01:00:00 EDT" "01:15:00 EDT" "01:30:00 EDT" "01:45:00 EDT"
[13] "02:00:00 EST" "02:15:00 EST" "02:30:00 EST" "02:45:00 EST" 
```

为什么凌晨 1 点 EDT 出现两次？比美国东部时间凌晨 1 点晚一小时的时间不应该是美国东部标准时间凌晨 1 点吗？这是`lubridate`操作系统的问题还是某些怪癖？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:25:51.020

我认为这是一个错误。

```
> seq(as.POSIXct("2011-11-06 00:15:00", tz='America/New_York'), 
      as.POSIXct('2011-11-06 02:45:00', tz='America/New_York'), 
      by='min')[c(TRUE, rep(FALSE, 14))]

 [1] "2011-11-06 00:15:00 EDT" "2011-11-06 00:30:00 EDT" "2011-11-06 00:45:00 EDT"
 [4] "2011-11-06 01:00:00 EDT" "2011-11-06 01:15:00 EDT" "2011-11-06 01:30:00 EDT"
 [7] "2011-11-06 01:45:00 EDT" "2011-11-06 01:00:00 EST" "2011-11-06 01:15:00 EST"
[10] "2011-11-06 01:30:00 EST" "2011-11-06 01:45:00 EST" "2011-11-06 02:00:00 EST"
[13] "2011-11-06 02:15:00 EST" "2011-11-06 02:30:00 EST" "2011-11-06 02:45:00 EST" 
```

# c# - 资源管理器列处理程序外壳扩展排序功能 c#

> ID：12150139
> 
> 赞同：0
> 
> 时间：2012-08-27T21:53:14.457
> 
> 标签：c#, shell, dom, sorting, handler

我正在尝试为 Windows XP 的 .eml 文件创建日期发送列处理程序。使用[链接](http://www.codeproject.com/Articles/3747/Explorer-column-handler-shell-extension-in-C)我可以创建列，但我不知道如何实现自定义排序功能。

有人可以告诉我自定义排序功能是否可行，以及实现此功能的最佳方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:19:03.640

我想我找到了解决方案。shell 将一个`SHCOLUMNINIT`结构传递给 Initialize()。其中一名`SHCOLUMNINIT`成员是`csFlags`。如果将其设置为`SHCOLSTATE_TYPE_DATE`列数据将被视为日期。常量定义可以在这里查看[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762538%28v=vs.85%29.aspx)

# mysql - 在mysql中删除重复记录时遇到问题

> ID：12150143
> 
> 赞同：1
> 
> 时间：2012-08-27T21:53:19.030
> 
> 标签：mysql

我有一个产品表，其中包含列 id_str 而不是 id 的重复产品。我们使用 id_str 来跟踪每个产品。这是我迄今为止尝试过的：

创建了一个临时表并将其截断，然后运行以下查询

```
INSERT INTO products_temp SELECT DISTINCT id_str, id, title, url, image_url, long_descr, mp_seller_name, customer_rating, curr_item_price, base_item_price, item_num, rank, created_at, updated_at, published, publish_ready, categories, feed_id, category_names, last_published_at, canonical_url, is_curated, pr_attributes, gender, rating, stock_status, uploadedimage_file_name, updated_by, backfill_text, image_width, image_height, list_source, list_source_time, list_category, list_type, list_image, list_name, list_domain, notes, street_date, list_product_rank, created_by from products 
```

然而，当我在新表中搜索重复的 id_str 时，这一切都发生了变化：

```
SELECT id_str, COUNT(*) C FROM PRODUCTS GROUP BY id_str HAVING C > 1 
```

我得到的结果与在原始表上的结果相同。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:56:44.850

一个或多个其他列导致插入的行是唯一的。您只是在计数查询中测试 id_str。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:56:36.947

仅使用`SELECT DISTINCT`会删除重复的整行。如果只有一个值相同而其他值不同，它不会删除一行。

假设这`id`是独一无二的，试试这个：

```
 INSERT INTO products_temp
 SELECT id_str, id, title, url, -- etc
 FROM products
 WHERE id IN (SELECT MIN(id) FROM products GROUP BY id_str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:00:50.983

尝试`SELECT id_str, COUNT(*) C FROM PRODUCTS_TEMP GROUP BY id_str HAVING C > 1`

在您的情况下，您再次从原始表中进行选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:41:42.983

这是我发现查找和删除重复项的最简单方法：

注意：由于 InnoDB 引擎存在错误，因此您需要将引擎更改为 MyISAM：

```
ALTER TABLE <table_name> ENGINE MyISAM 
```

然后在使用忽略时向您尝试查找 dup 的列添加唯一索引：

```
ALTER IGNORE TABLE <table_name> ADD UNIQUE INDEX(`<column_name>`) 
```

并将您的数据库引擎改回来：

```
ALTER TABLE <table_name> ENGINE InnoDB 
```

如果你愿意，你可以删除你刚刚创建的索引，但我建议你首先调查一下导致重复的原因。

# coldfusion - CFWheels - 多步骤形式？

> ID：12150150
> 
> 赞同：1
> 
> 时间：2012-08-27T21:53:45.667
> 
> 标签：coldfusion, railo, cfwheels

我想知道如何在 CFWheels 中设置多步骤表单。

显然，我需要在会话等中存储表单数据，但我想从轮子的角度了解以“轮子方式”执行此操作的最佳方法。

我的控制器中是否只有一个操作可以处理此问题？还是最好将表单的每个部分分成单独的操作？

对此和可能的代码示例提出建议将不胜感激。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:52:40.733

我过去的做法是使用 Ajax 调用和 jquery 模式。

虽然 jquery modal 并不重要，但我只是喜欢美学。一个简单的 div 替换也可以。

如果您不能确定用户可以使用 AJAX，那么它对您不起作用，但您可以使用弹出窗口。

对多步骤表单使用 Ajax 调用的优点是您可以将表单内容从一个步骤调整到另一个步骤。另一个优点是您不必将用户数据存储在缓存或会话中。因为每次发送表单时，都可以使用 POST 或 GET。

为此，最快的设置方法是使用名为 RemoteFormHelpers 的插件。然后表单的每个步骤将是一个不同的控制器（或同一个控制器，根据传递的数据使用 switch 语句）

我认为这是一种非常通用的方法，但是你不能做一个使用文件上传的表单，这并不容易，因为 ajax 不会让你在没有严重痛苦的情况下做到这一点。

# jquery - 从 svg 图像开始制作可链接的地图

> ID：12150151
> 
> 赞同：1
> 
> 时间：2012-08-27T21:53:47.847
> 
> 标签：jquery, svg

我有[这个](http://lab.gianiaz.com/Italia.svg)svg 图片。我会使用[jQuery 的 mapHighlight 来](http://davidlynch.org/projects/maphilight/docs/)实现看起来像[这样](http://davidlynch.org/projects/maphilight/docs/demo_usa.html)的东西。最终的结果应该是可缩放的，没有太大的清晰度损失，第三个链接的质量还可以。我怎么能意识到这一点？在 mapHiglight 文档中，不处理 svg。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:20:50.850

我不熟悉 jQuery mapHighlight，但从外观上看，您似乎没有从 SVG 中提取任何数据，您必须自己定义悬停区域。您可以使用一些脚本自动执行此操作，但有一种更简单且更强大的方法：只需使用 CSS：

```
polygon:hover {
  fill: #415262; 
}​ 
```

我不熟悉意大利的地理，但是如果几个多边形构成一个省的一部分，您可以将它们包装在一个`<g>`元素中，然后...

```
g:hover polygon {
  fill: #415262; 
}​ 
```

在此处查看演示：http: [//jsfiddle.net/EaQjD/](http://jsfiddle.net/EaQjD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T09:18:27.457

如果你不想花太多时间来创建这样的地图，但你仍然想获得一些漂亮的东西，我可以推荐我的应用程序，它可以让你[创建可点击的国家地图](http://www.makeaclickablemap.com)。

目前，该应用程序包含 16 个国家/地区，并且正在不断添加州和城市和地图。

# numerical-methods - odeint 流观察者和相关问题

> ID：12150160
> 
> 赞同：3
> 
> 时间：2012-08-27T21:54:10.413
> 
> 标签：numerical-methods

我有一个由 4 个耦合方程组成的系统要求解，还有一个参数 Gamma[i] 要迭代。由于我对 C++ 很陌生，所以我的代码非常初级。如果它在某些部分看起来复杂而优雅，那只是因为我改编了 odeint 的作者的代码。:)

这个问题与（http://stackoverflow.com/questions/12060111/using-odeint-function-definition/12066958#comment16253600_12066958）有关，但不完全相同。请不要删除这个。:(

在代码行之间插入了问题。

```
#include <iostream>
#include <iterator>
#include <algorithm>
#include <boost/numeric/odeint.hpp>
#include <cmath>
#include <vector>
#include <fstream>
#include <iomanip>

using namespace std;
using namespace boost::numeric::odeint;
class NLI_class {
private:
    double gamma;
public:
 NLI_class (double r) : gamma(r) {} 

 void operator()( vector<double> &u , vector<double> &du , double z ) {
            du[0] = u[0]*u[1]*cos(u[3]); //u1
            du[1] = -u[0]*u[0]*cos(u[3]); //u2
            du[2] = gamma * (2/(u[0]*u[0]) - 1/(u[1]*u[1])); //theta
            du[3] = gamma * (1.0/(u[0]*u[0])); //phi1
            du[4] = gamma * (1.0/(u[1]*u[1])); //phi2;

}
}; 
```

问题一：

在我原来的程序中，我有这样的东西将输出通过管道传输到 csv 文件：

```
 inline void save(vector<double>& v, string filename)
  {
ofstream output(filename);
for(int i=0;i<v.size();++i){ 
    output << setprecision(64) << v[i] << endl;
}
   } 
```

我如何调整 streaming_observer 来完成我的 save() 的工作？基本上，我想为每次迭代生成 .csv 文件。在这一点上，我的做法很丑陋，即编译所有内容，打开 Windows 命令提示符，然后将 exe 输出通过管道传输到文本文件。这会生成一个大文件，其中包含所有迭代。

分析大量迭代变得非常痛苦。

```
struct streaming_observer {

 std::ostream &m_out;
 streaming_observer( std::ostream &out ) : m_out( out ) {}

 void operator()( const vector<double> &x , double t ) const
 {
      m_out << t;
      for( size_t i=0 ; i < x.size() ; ++i )
          m_out << "\t" << x[i];
      m_out << "\n";
 }
};

    int main(){

vector<double> x( 5 );
vector<double> Gamma;
vector<double>delta;
const double  pi=acos(-1.0); 
short delta_n=5;
const double delta_step=(2*pi)/delta_n;
const double dz = 0.01;
const double  zeta = 3.0;
const double  theta_initial=0.0;
const double  u20=tanh(zeta); 
const double  u10=sqrt(1.0-(u20*u20)); 

double d=0.0;
double G=0.0;

for(int i=0;i<=delta_n;i++){
    //When i=0, the d=0.0 and G=0.0 are pushed into the vector.
    delta.push_back(d);  
    Gamma.push_back(G);
    // Compute delta and Gamma
    d=d+delta_step; 
    G=-u10*u10*u20*sin(theta_initial+d);
}

save(delta,"delta.csv");
save(Gamma,"Gamma.csv"); 
```

问题#2：我在这里得到的结果与我使用简单的显式欧拉方法得到的结果不一致。因此，我想查看 RK4 系数（最好将它们转储到文件中）或中间步骤。我怎样才能得到这些信息？

```
//Numeric Integration
    for (unsigned i = 0; i < Gamma.size(); ++i) {
        x[0] = u10;
        x[1] = u20;
        x[2] = 0.0;
        x[3] = 0.0;
        x[4] = 0.0;

        NLI_class nli_obj(Gamma[i]);
        integrate_const( runge_kutta4< vector<double > >(), nli_obj, x , 0.0 , 3.0 , dz,streaming_observer( std::cout ) );
}
    } 
```

感谢所有帮助过的人！

编辑：有什么方法可以得到运行错误估计？请注意，u[0]*u[0]+u[1]*u[1]=1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:38:45.360

问题 #1：

我不明白你需要什么样的输出。但是如果你想在每次迭代后写出结果，你可以像这样实现一个输出观察器：

```
struct output_observer
{
    string filename_;
    size_t count_;
    output_observer( const string &filename ) : filename_( filename ) , count_( 0 ) { }
    void operator()( const state_type &x , time_type dt )
    {
        char fn[512] = "";
        sprintf( fn , "%s_%04lu.csv" , filename_.c_str() , count_ );
        ofstream fout( fn );
        for( size_t i=0 ; i<x.size() ; ++i ) fout << x[i] << "\n";
        ++count_;
    }
}; 
```

你可以简单地应用这个观察者

```
integrate_const( runge_kutta4< vector<double > >() , nli_obj , x ,
    0.0 , 3.0 , dz , output_observer( "filename" ) ); 
```

这是所需的功能吗？

问题2 ：

看不到runge_kutta4的中间e步骤。这些系数是经典 Runge-Kutta 方法的标准系数：[http ://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods](http://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods)

问题 #3：

odeint 有几个误差步进器，它们估计在一个步骤中产生的误差。例如，您可以使用 Runge_Kutta Cash Karp 算法；

```
runge_kutta_cash_karp54< state_type > rk;
state_type xerr;
rk.do_step( nli_obj , x , t , xerr ); 
```

它执行一步并估计错误并将错误结果写入 xerr。

# ios - iOS 6.0 地图应用程序的 URL 方案是什么？

> ID：12150161
> 
> 赞同：7
> 
> 时间：2012-08-27T21:54:21.680
> 
> 标签：ios, mapkit, ios6, ios6-maps

以前，在 iOS 应用程序中，您可以使用 Google 地图 URL 方案 (http:maps.google.whatever.whatever) 从应用程序中启动地图应用程序。

有谁知道 iOS 6.0 地图应用程序的新 URL 方案是什么？我找不到任何关于此的新文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:59:12.333

虽然您将通过使用 获得更多控制权`MKMapItem`，但 URL 方案要容易得多。它没有太大变化，您只需将 google.com 替换为 apple.com。[这是文档](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:00:23.143

您需要使用 MKMapItem 打开地图应用程序。查看文档：[文档](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html)

以下是如何使用它：

```
MKMapItem *mapItem=[[MKMapItem alloc] initWithPlacemark:yourPlacemark];
[mapItem openInMapsWithLaunchOptions:@{MKLaunchOptionsMapTypeKey : @(yourMapType), MKLaunchOptionsShowsTrafficKey : @(yourTraffic), MKLaunchOptionsDirectionsModeKey : yourDirectionMode}]; 
```

# hadoop - Hadoop Map-Reduce OutputFormat 用于将结果分配给内存变量（不是文件）？

> ID：12150163
> 
> 赞同：4
> 
> 时间：2012-08-27T21:54:30.137
> 
> 标签：hadoop, io, mapreduce, distributed-objects

（来自 Hadoop 新手）

我想在玩具 Hadoop 概念验证示例中尽可能避免使用文件。我能够从非基于文件的输入中读取数据（感谢[http://codedemigod.com/blog/?p=120）——](http://codedemigod.com/blog/?p=120)它会生成随机数。

我想将结果存储在内存中，以便可以对其进行进一步的（非 Map-Reduce）业务逻辑处理。基本上：

```
conf.setOutputFormat(InMemoryOutputFormat)
JobClient.runJob(conf);
Map result = conf.getJob().getResult(); // ? 
```

似乎做我想做的最接近的事情是以二进制文件输出格式存储结果，并用等效的输入格式将其读回。这似乎是不必要的代码和不必要的计算（我是否误解了 Map Reduce 所依赖的前提？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T23:16:41.343

这个想法的问题在于 Hadoop 没有“分布式内存”的概念。如果您想要“在内存中”的结果，那么下一个问题必须是“哪台机器的内存？” 如果你真的想这样访问它，你将不得不编写自己的自定义输出格式，然后要么使用一些现有的框架来跨机器共享内存，要么再次编写自己的。

我的建议是像往常一样简单地写入 HDFS，然后对于非 MapReduce 业务逻辑，只需通过 FileSystem API 从 HDFS 读取数据开始，即：

```
FileSystem fs = new JobClient(conf).getFs();
Path outputPath = new Path("/foo/bar");
FSDataInputStream in = fs.open(outputPath);
// read data and store in memory
fs.delete(outputPath, true); 
```

当然，它会进行一些不必要的磁盘读取和写入，但是如果您的数据足够小以适合内存，那么您为什么还要担心它呢？如果这是一个严重的瓶颈，我会感到惊讶。

# eclipse - Eclipse 的 scala ide 扩展中的 scala 的“构建管理器”是什么？

> ID：12150165
> 
> 赞同：7
> 
> 时间：2012-08-27T21:54:45.780
> 
> 标签：eclipse, scala, scala-ide

在 Eclipse 中的 Preferences -> Scala -> Compiler -> Build manager 中，我可以选择“buildmanager”。"refined" 和 "sbt" 和有什么不一样？

另外，这是将 sbt 构建文件集成到 Eclipse IDE 中的某种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T22:35:51.490

ScalaIDE 有两个构建管理器，基本上它们是 eclipse 模型和 scala 编译器之间的接口，它们必须做一些事情，比如确定哪些资源需要重新编译以及它如何影响依赖代码。Refined 是原始界面的改进版本，而 sbt 就是 sbt。

SBT 现在是默认设置，我预计精炼会在某个时候消失。

不幸的是，构建管理器在后台非常重要。还没有真正的 Eclipse 项目-> sbt 集成。有一个用于 sbt 的 eclipse 插件，它允许您生成 eclipse 项目文件，但不能将 eclipse 项目与 sbt 紧密集成，类似于 IvyDE 或 m2e。

您可以使用 sbt deliver-local 创建一个依赖项的 ivy 文件，并使用 IvyDE 使您的类路径容器保持最新 - 这与目前的效果一样好。

不过，看到这种情况有所改善，我不会感到惊讶——请查看[路线图](http://scala-ide.org/docs/dev/roadmap.html)。

# windows-phone-7 - 从 WP7 应用程序打开日历

> ID：12150166
> 
> 赞同：0
> 
> 时间：2012-08-27T21:54:48.243
> 
> 标签：windows-phone-7, calendar

我想使用我的 WP7 应用程序将事件添加到手机的日历中，但前段时间我了解到这是不可能的。然后，我想从我的应用程序中打开手机的日历。这可能吗？

类似于以下内容：

```
WebBrowserTask browserTask = new WebBrowserTask();
browserTask.URL = "vnd.youtube:[videoID]?vndapp=youtube_mobile";
browserTask.Show(); 
```

但是日历而不是 youtube

总之感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:29:29.663

抱歉，您无法从自己的应用程序中打开其他应用程序。

# django - 模拟 Django 存储模型 ImageField 后端 S3

> ID：12150169
> 
> 赞同：18
> 
> 时间：2012-08-27T21:55:07.417
> 
> 标签：django, unit-testing, mocking

我有一个由 django-storages 的 S3Boto 支持的带有 ImageField 的模型。我对“上传图像”视图的练习进行了测试，但是它将图像上传到 S3 的事实正在减慢我的测试套件的速度。

为了加快我的测试速度，处理这个问题的最佳实践是什么？我应该模拟 S3Boto 吗？也许有一个内存支持的存储后端非常适合测试（自动清理会很好！）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-12T13:16:31.607

我也刚遇到这个问题。通过使用，我得到了更快的测试[`dj-inmemorystorage`](https://github.com/waveaccounting/dj-inmemorystorage)。

**设置它的快速方法**`test_settings.py`是在与您的设置相同的文件夹中创建一个：

```
from settings import *
DEFAULT_FILE_STORAGE = 'inmemorystorage.InMemoryStorage' 
```

...并调用`./manage.py test --settings=project.test_settings`运行测试。

**我的首选方法**是设置自定义测试运行器：

在`project/test_runner.py`：

```
from django.conf import settings
from django.test.runner import DiscoverRunner

class FastTestRunner(DiscoverRunner):
    def setup_test_environment(self):
        super(FastTestRunner, self).setup_test_environment()
        # Don't write files
        settings.DEFAULT_FILE_STORAGE = 'inmemorystorage.InMemoryStorage'
        # Bonus: Use a faster password hasher. This REALLY helps.
        settings.PASSWORD_HASHERS = (
            'django.contrib.auth.hashers.MD5PasswordHasher',
        ) 
```

*注意：*这也设置了`PASSWORD_HASHER`，因为它[*显着*提高了`User`创建时间](https://web.archive.org/web/20150923161812/http://slacy.com/blog/2012/04/make-your-tests-faster-in-django-1-4/)。*这不应该在生产中设置。*

在`project/settings.py`：

```
TEST_RUNNER = 'project.test_runner.FastTestRunner' 
```

**要求：**

```
pip install dj-inmemorystorage 
```

**更新**：从更改[`django-inmemorystorage`](https://github.com/codysoyland/django-inmemorystorage)为[`dj-inmemorystorage`。](https://github.com/waveaccounting/dj-inmemorystorage)

**更新 2**：删除[`django-discover-runner`](https://pypi.python.org/pypi/django-discover-runner)，因为它现在是 django 中的默认测试运行程序，并修复了`PASSWORD_HASHER`相关博客文章的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:55:28.957

刚刚也遇到了这个问题，所以我想我会提出我的解决方案。我的解决方案使用`Mock`

```
import mock
from django.core.files.storage import FileSystemStorage
from django.test import TestCase

class ATestCase(TestCase):
    def setUp(self):
        # Stuff Happens

    def tearDown(self):
        # more Stuff

    @mock.patch('storages.backends.s3boto.S3BotoStorage', FileSystemStorage)
    def test_file_stuff(self):
        self.assertMagicPonies(True) 
```

一些陷阱 -~~确保您在`MEDIA_ROOT`设置中进行了合理的设置。从 django 1.4 开始，您不能使用测试上下文管理器来覆盖`MEDIA_ROOT`，因此您需要为其单独设置配置 ( [https://code.djangoproject.com/ticket/17787](https://code.djangoproject.com/ticket/17787) )~~这已在 1.6 中修复。另外，请确保您的 upload_to 在正常文件系统中工作，否则您将收到权限错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-08T21:42:43.477

我也使用 S3Boto，但为了测试，我更喜欢自定义设置，包括使用文件系统存储。您可以在一个文件中声明您的自定义设置，然后您可以将其导入并在您的测试用例中使用。即使这样，您也可以模拟文件存储，以便文件实际上不会写入磁盘。

这是一个示例`test_settings.py`

```
# myproject/myproject/test_settings.py

from django.test import override_settings

common_settings = override_settings(
    DEFAULT_FILE_STORAGE='django.core.files.storage.FileSystemStorage',
    PASSWORD_HASHERS=(
        'django.contrib.auth.hashers.UnsaltedMD5PasswordHasher',
    ),
) 
```

用法：

```
 from django.test import TestCase

from myproject.test_settings import common_settings

@common_settings
class MyTestCase(TestCase):
    """Tests go here""" 
```

[在模拟文件系统存储时，您可以在 SO 上](https://stackoverflow.com/a/57845794/6735826)查看我的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T22:29:38.887

我建议使用标准的 Django Storage 进行测试，您可以在其中定义自定义存储路径，并在完成后清理测试套件中的路径。存储和路径都可以在设置中设置并覆盖以进行测试。

# android - 我可以启动android中的数字键盘活动吗？

> ID：12150178
> 
> 赞同：0
> 
> 时间：2012-08-27T21:55:32.830
> 
> 标签：android, android-activity

有没有我可以启动输入密码数字键盘的活动，如下所示？我正在构建一个只能由知道密码的人访问的应用程序。

[http://www.mobilephone.co.in/wp-content/uploads/2010/12/App-Lock-Android.jpg](http://www.mobilephone.co.in/wp-content/uploads/2010/12/App-Lock-Android.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:03:13.463

对此没有特定的 Activity，但您可以使用的是 EditText 的`android:inputType`和`android:password`属性。如果您创建一个包含带有`android:inputType="number"`和的 EditText 的简单布局的活动`android:password="true"`，您将在模拟这种行为的路上。您可能想要执行一些其他操作，例如限制字符数，我建议您尝试一下，并且一旦您有一些要共享的代码和更具体的问题，可能会寻求更多帮助。

# listview - 水平拉伸分组 ListView 的项目

> ID：12150186
> 
> 赞同：5
> 
> 时间：2012-08-27T21:56:12.070
> 
> 标签：listview, windows-runtime, winrt-xaml

![我的应用程序的屏幕截图](../Images/4166b80e8499c98cd4d0feeceb540625.png)

我想水平拉伸列表视图的项目，以便绿色区域（选定的 ItemContainer）从 groupheader 到达右侧。

我尝试将我能想到的每个元素都设置为“Horizo​​ntalAlignment="Stretch"”，但没有任何效果。

这是我的列表视图

```
<ListView
            HorizontalAlignment="Stretch"
            x:Name="AppointmentListView"
            ItemContainerStyle="{StaticResource ListViewItemContainerStyle}"
            ItemsSource="{Binding Source={StaticResource SelectedViewSource}}"
            Grid.Column="1"
            Grid.RowSpan="2">
            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid Width="200">
                                <TextBlock Text="{Binding Converter={StaticResource DateYearStringConv}, Path=Key}" Foreground="White" FontSize="20" FontWeight="Light" Margin="10, 5, 0, 0"/>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="GroupItem">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="GroupItem" >
                                        <StackPanel Orientation="Horizontal" Margin="0, 0, 0, 10" HorizontalAlignment="Stretch">
                                            <ContentPresenter Content="{TemplateBinding Content}" />
                                            <ItemsControl x:Name="ItemsControl" ItemsSource="{Binding GroupItems}"/>
                                        </StackPanel>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch"/>
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>
            </ListView.GroupStyle>
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical"/>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Canvas Width="400" Height="60" Background="Transparent">
                        <TextBlock Text="Here goes the content" />
                    </Canvas>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

物品容器样式

```
<Style x:Key="ListViewItemContainerStyle" TargetType="ListViewItem">
    <Setter Property="HorizontalAlignment" Value="Stretch" />
    <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
    <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="TabNavigation" Value="Local"/>
    <Setter Property="IsHoldingEnabled" Value="True"/>
    <Setter Property="Margin" Value="0,0,0,2"/>
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Top"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListViewItem">
                <Border x:Name="OuterContainer">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PointerOverBorder"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="PointerOverBorder">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Thickness>0</Thickness>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <PointerDownThemeAnimation TargetName="ContentContainer"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="PointerOverBorder">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Thickness>0</Thickness>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="PointerOverPressed">
                                <Storyboard>
                                    <PointerDownThemeAnimation TargetName="ContentContainer"/>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PointerOverBorder"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="PointerOverBorder">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Thickness>0</Thickness>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDisabledThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="contentPresenter"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisual"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused"/>
                            <VisualState x:Name="PointerFocused"/>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="SelectionHintStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.65" To="NoSelectionHint"/>
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="VerticalSelectionHint">
                                <Storyboard>
                                    <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="SelectionBackground" ToVerticalOffset="15"/>
                                    <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="ContentBorder" ToVerticalOffset="15"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="HorizontalSelectionHint">
                                <Storyboard>
                                    <SwipeHintThemeAnimation ToHorizontalOffset="-23" TargetName="SelectionBackground" ToVerticalOffset="0"/>
                                    <SwipeHintThemeAnimation ToHorizontalOffset="-23" TargetName="ContentBorder" ToVerticalOffset="0"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="NoSelectionHint"/>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="SelectionStates">
                            <VisualState x:Name="Unselecting"/>
                            <VisualState x:Name="Unselected"/>
                            <VisualState x:Name="UnselectedPointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="UnselectedSwiping"/>
                            <VisualState x:Name="Selecting">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="White"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill)" Storyboard.TargetName="SelectionBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="#FF82BA00"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Selected">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="White"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill)" Storyboard.TargetName="SelectionBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="#FF82BA00"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="SelectedSwiping">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="White"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill)" Storyboard.TargetName="SelectionBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="#FF82BA00"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="SelectedUnfocused">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="contentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="White"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill)" Storyboard.TargetName="SelectionBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="#FF82BA00"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="DragStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.2" To="NotDragging"/>
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="NotDragging"/>
                            <VisualState x:Name="Dragging">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDragThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="InnerDragContent"/>
                                    <DragItemThemeAnimation TargetName="InnerDragContent"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="DraggingTarget">
                                <Storyboard>
                                    <DropTargetItemThemeAnimation TargetName="OuterContainer"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MultipleDraggingPrimary">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="MultiArrangeOverlayBackground"/>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="MultiArrangeOverlayText"/>
                                    <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDragThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ContentBorder"/>
                                    <FadeInThemeAnimation TargetName="MultiArrangeOverlayBackground"/>
                                    <FadeInThemeAnimation TargetName="MultiArrangeOverlayText"/>
                                    <DragItemThemeAnimation TargetName="ContentBorder"/>
                                    <FadeOutThemeAnimation TargetName="SelectionBackground"/>
                                    <FadeOutThemeAnimation TargetName="PointerOverBorder"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MultipleDraggingSecondary">
                                <Storyboard>
                                    <FadeOutThemeAnimation TargetName="ContentContainer"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="ReorderHintStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.2" To="NoReorderHint"/>
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="NoReorderHint"/>
                            <VisualState x:Name="BottomReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Bottom" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="TopReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Top" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="RightReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Right" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="LeftReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Left" ToOffset="{StaticResource ListViewItemReorderHintThemeOffset}" TargetName="ReorderHintContent"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="DataVirtualizationStates">
                            <VisualState x:Name="DataAvailable"/>
                            <VisualState x:Name="DataPlaceholder">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PlaceholderTextBlock">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PlaceholderRect">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Grid x:Name="ReorderHintContent">
                        <Border x:Name="ContentContainer">
                            <Grid x:Name="InnerDragContent">
                                <Rectangle x:Name="PointerOverBorder" Fill="{StaticResource ListViewItemPointerOverBackgroundThemeBrush}" IsHitTestVisible="False" Margin="1" Opacity="0"/>
                                <Rectangle x:Name="FocusVisual" IsHitTestVisible="False" Opacity="0" Stroke="{StaticResource ListViewItemFocusBorderThemeBrush}" StrokeThickness="2"/>
                                <Rectangle x:Name="SelectionBackground" Margin="0" Opacity="0"/>
                                <Border x:Name="ContentBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="0">
                                    <Grid>
                                        <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" Margin="{TemplateBinding Padding}"/>
                                        <TextBlock x:Name="PlaceholderTextBlock" Foreground="{x:Null}" IsHitTestVisible="False" Margin="{TemplateBinding Padding}" Opacity="0" Text="Xg"/>
                                        <Rectangle x:Name="PlaceholderRect" Fill="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" IsHitTestVisible="False" Visibility="Collapsed"/>
                                        <Rectangle x:Name="MultiArrangeOverlayBackground" Fill="{StaticResource ListViewItemDragBackgroundThemeBrush}" IsHitTestVisible="False" Opacity="0"/>
                                    </Grid>
                                </Border>
                                <TextBlock x:Name="MultiArrangeOverlayText" Foreground="{StaticResource ListViewItemDragForegroundThemeBrush}" FontSize="26.667" FontFamily="{StaticResource ContentControlThemeFontFamily}" IsHitTestVisible="False" Margin="18,9,0,0" Opacity="0" TextWrapping="Wrap" Text="{Binding TemplateSettings.DragItemsCount, RelativeSource={RelativeSource Mode=TemplatedParent}}" TextTrimming="WordEllipsis"/>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:32:21.363

我找到了解决方案！

我必须将 GroupStyle.ContainerStyle 中的 GroupItemTemplate 更改为 Grid

```
<GroupStyle.ContainerStyle>
<Style TargetType="GroupItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="GroupItem" >
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <ContentPresenter Content="{TemplateBinding Content}" />
                    <ItemsControl Grid.Column="1" x:Name="ItemsControl" ItemsSource="{Binding GroupItems}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-04T04:21:19.543

这是标题所需要的：

```
<GroupStyle.HeaderContainerStyle>
    <Style TargetType="ListViewHeaderItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewHeaderItem">
                    <ContentPresenter Content="{TemplateBinding Content}" HorizontalAlignment="Stretch"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</GroupStyle.HeaderContainerStyle> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T22:17:19.957

在您的`ItemContainerStyle`（*AppointmentListView*）上将`HorizontalContentAlignment`属性设置为`Stretch`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-09T19:55:59.723

基于 Alexandre Zollinger Chohfi 的回答，一个更简洁的版本：

```
<GroupStyle.HeaderContainerStyle>
    <Style TargetType="ListViewHeaderItem">
        <Setter Property="HorizontalContentAlignment"
                Value="Stretch" />
    </Style>
</GroupStyle.HeaderContainerStyle> 
```

# uiimageview - 通过行为改变 UIImageView 的高度

> ID：12150189
> 
> 赞同：1
> 
> 时间：2012-08-27T21:56:26.777
> 
> 标签：uiimageview, size

我有一个自定义 tableviewcell，它被加载到 TableView 中，它将不同大小的图像从数组加载到 UIImageView（在 tableviewcell 中），此时图像缩放以适合具有 CGRect CGRectMake(20, 30, 280, 300);

但我想要它做的是保持 Width 280 的设置，并改变 UIImageView 的高度，使图像仍然具有正确的比例

环顾四周，并没有找到答案。我该怎么做呢？

感谢任何帮助

# jquery - Jquery/Ajax 和 IE 问题

> ID：12150191
> 
> 赞同：0
> 
> 时间：2012-08-27T21:56:38.127
> 
> 标签：jquery, svn

我无法从服务器获取我的 Ajax 调用。我正在使用 SVN 版本控制，我的代码在我身边工作，但在我将代码推送到生产端后遇到了麻烦。

这些代码适用于我这边的 FF、Chrome 和 IE。

对于服务器，FF 和 chrome 都在工作，但只有 IE 有问题。

我想知道这里是否有人可以帮助我。非常感谢。

我有

```
//call ajax function
callAjaxToCheck();

//call this function if there are errors
//I am getting Not connect.\n Verify Network error whose status == 0 when using IE on server side only!!!!!

function error_loading(jqXHR, exception){
    if (jqXHR.status === 0) {
        alert('Not connect.\n Verify Network.');
    } else if (jqXHR.status == 404) {
        alert('Requested page not found. [404]');
    } else if (jqXHR.status == 500) {
        alert('Internal Server Error [500].');
    } else if (exception === 'parsererror') {
        alert('Requested JSON parse failed.');
    } else if (exception === 'timeout') {
        alert('Time out error.');
    } else if (exception === 'abort') {
        alert('Ajax request aborted.');
    } else {
        alert('Uncaught Error.\n' + jqXHR.responseText);
    }                 
}

function success(data) { 
    if (data=='jump') {
        $.getScript('inc/haha.js', function() {

            codes....

        });
    }
}

function callAjaxToCheck(){  
    $.ajax({
        url: 'Session.php',
        success: success,
        dataType: "text"
        error: error_loading
    });   
} 
```

**更新代码：**

请查看我的服务器端文件。

我确定我的ajax函数被调用...

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');
    session_start();

     if(isset($_POST['switch'])){
         $_SESSION['image']=$_POST['switch'];

     }

     echo $_SESSION['image']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:21:27.333

`jqXHR.status === 0`表示服务器没有返回任何内容 - 这可能意味着 PHP 端出现致命错误或客户端取消请求。

您的`Session.php`代码是否依赖于已经存在的会话 - 如果无法找到会话会发生什么？我只是问，因为 Internet Explorer 与其他浏览器具有不同的安全模型，当涉及到在某些沙箱中跨 AJAX 请求发送 cookie 时——通常情况下，它的政策是根本不发送任何 cookie（你的 PHP 是否考虑到这一点？帐户？）。

在客户端，你用什么来触发你的`callAjaxToCheck()`. 我知道在上面的代码中它是在程序运行中直接调用的。但是，这可能只是为了在 stackoverflow 上发布而进行的简化。该 AJAX 调用是否曾由按钮或链接触发？

我意识到这里有几个问题并没有真正的明确答案，所以我会做出有根据的猜测并声明它很可能是会话/cookie 问题。考虑到这一点，实现[P3P](http://en.wikipedia.org/wiki/P3P)策略可能会有所帮助，这可以告诉 IE 通过 AJAX 请求发送 cookie - 但是您必须设置正确的策略才能这样做......这可能有点棘手；这就是为什么大多数寻求快速修复的开发人员只需将以下内容复制并粘贴到他们请求的 PHP 文件的顶部：

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

但是，我不推荐这样做，但它可以是一种快速确定它是否有帮助的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:14:31.333

尝试在 jQuery Ajax 调用中设置`cache`为*false 。*

```
function callAjaxToCheck() {  
    $.ajax({
        url: 'Session.php',
        cache: false,
        success: success,
        dataType: "text",
        error: error_loading
    });  
} 
```

# javascript - 如何从 CasperJS 访问 iframe？

> ID：12150194
> 
> 赞同：32
> 
> 时间：2012-08-27T21:56:53.257
> 
> 标签：javascript, iframe, webkit, phantomjs, casperjs

我有一个带有 iframe 的网页。我想使用[CasperJS](http://www.casperjs.org)访问 iframe 的内容。特别是，我需要单击按钮并填写表格。我怎样才能做到这一点？

主网页是 [main.html](http://jim.sh/~jim/tmp/casper/main.html)：

```
<html><body>
<a id='main-a' href="javascript:console.log('pressed main-a');">main-a</a>
<iframe src="iframe.html"></iframe>
<a id='main-b' href="javascript:console.log('pressed main-b');">main-b</a>
</body></html> 
```

iframe 是：

```
<html><body>
<a id='iframe-c' href="javascript:console.log('pressed iframe-c');">iframe-c</a>
</body></html> 
```

我天真的方法：

```
var casper = require('casper').create({
    verbose: true,
    logLevel: "debug"
});

casper.start("http://jim.sh/~jim/tmp/casper/main.html", function() {
    this.click('a#main-a');
    this.click('a#main-b');
    this.click('a#iframe-c');
});

casper.run(function() {
    this.exit();
}); 
```

当然，这不起作用，因为`a#iframe-c`选择器在主框架中无效：

```
[info] [phantom] Starting...
[info] [phantom] Running suite: 2 steps
[debug] [phantom] opening url: http://jim.sh/~jim/tmp/casper/main.html, HTTP GET
[debug] [phantom] Navigation requested: url=http://jim.sh/~jim/tmp/casper/main.html, type=Other, lock=true, isMainFrame=true
[debug] [phantom] url changed to "http://jim.sh/~jim/tmp/casper/main.html"
[debug] [phantom] Navigation requested: url=http://jim.sh/~jim/tmp/casper/iframe.html, type=Other, lock=true, isMainFrame=false
[debug] [phantom] Successfully injected Casper client-side utilities
[info] [phantom] Step 2/2 http://jim.sh/~jim/tmp/casper/main.html (HTTP 200)
[debug] [phantom] Mouse event 'click' on selector: a#main-a
[info] [remote] pressed main-a
[debug] [phantom] Mouse event 'click' on selector: a#main-b
[info] [remote] pressed main-b
[debug] [phantom] Mouse event 'click' on selector: a#iframe-c
FAIL CasperError: Cannot dispatch click event on nonexistent selector: a#iframe-c
#    type: uncaughtError
#    error: "CasperError: Cannot dispatch click event on nonexistent selector: a#iframe-c"
CasperError: Cannot dispatch click event on nonexistent selector: a#iframe-c    
  /tmp:901 in mouseEvent
  /tmp:365 in click
  /tmp/test.js:9
  /tmp:1103 in runStep
  /tmp:324 in checkStep 
```

有什么办法可以使这项工作？涉及直接戳入 phantomjs 的 hack 会很好，但我不知道在那里做什么。

我正在使用 CasperJS 版本 1.0.0-RC1 和 phantomjs 版本 1.6.0。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-27T22:12:22.497

一直在寻找这个，当然我在发布问题后几分钟就找到了答案。

[我可以在这个提交](https://github.com/ariya/phantomjs/commit/f386f7d484)中使用添加到 phantomjs 的新帧切换命令。具体来说，`this.page.switchToChildFrame(0)`和`this.page.switchToParentFrame()`功能。它似乎没有记录，而且似乎为即将发布的版本[更改了方法，但它确实有效：](http://code.google.com/p/phantomjs/issues/detail?id=654)

```
var casper = require('casper').create({
    verbose: true,
    logLevel: "debug"
});

casper.start("http://jim.sh/~jim/tmp/casper/main.html", function() {
    this.click('a#main-a');
    this.click('a#main-b');
    this.page.switchToChildFrame(0);
    this.click('a#iframe-c');
    this.page.switchToParentFrame();
});

casper.run(function() {
    this.exit();
}); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-04T09:16:58.647

从 1.0 开始，您可以使用[withFrame](http://docs.casperjs.org/en/latest/modules/casper.html#withframe)

```
 casper.open("http://www.example.com/page.html", function() {
    casper.withFrame('flashHolder', function() {
      this.test.assertSelectorExists('#the-flash-thing', 'Should show Flash');
    });
  }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T22:02:08.363

事实上，您必须使用`--web-security=no` 提供的新功能`Phantomjs 1.5`才能访问它们 `iFrames`及其内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-28T13:28:49.873

假设我们有不同的帧（frame1 和 frame2），我们必须访问这些帧的不同元素（例如单击或检查 div 标签是否存在）。

```
casper.withFrame('frame1', function() {
    var file = '//*[@id="profile_file"]';
    casper.thenClick(x(file));
});

casper.withFrame('frame2', function() {
  casper.then(function () {
     casper.waitForSelector('#pageDIV',
            function pass() {
                console.log("pass");
            },
            function fail(){
                console.log("fail");
            }
      );
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-04T09:14:59.233

你可以这样做：

```
casper.start("url here...", function() { 
    this.withFrame(0, function() {
        this.evaluate(function() {
            document.querySelector('img#btn_start').click();
        })
    })
}); 
```

您可以将零替换为 iframe 的名称。

# xsd - 我可以将 xml 标记中的值限制为某个字符串加上同一节点中另一个标记的值吗

> ID：12150198
> 
> 赞同：0
> 
> 时间：2012-08-27T21:57:05.490
> 
> 标签：xsd

首先，请原谅我，因为我对 xml/xsd 完全陌生。
我的 xml 文件中的一个节点看起来像这样......

```
<root>
  <XmlDetails>
    <XmlName>SomeName</XmlName>
    ....
    <XmlPath>path/SomeName</XmlPath>
    ...
  </XmlDetails>
  <XmlDetails>
    ...
</root 
```

其中 XmlPath 将包含一些序言字符串（例如“path/”），后跟该节点的 XmlName 值。有没有办法在 xsd 文件中强制执行此操作？

我查看了 union 但我不确定如何获取 XmlName 元素的值。

```
<xs:element name="XmlPath"
  <xs:simpleType>
    <xs:union memberTypes="prolog epilog" />
  </xs:simpleType>
</xs:element>

<xs:simpleType name="prolog">
  <xs:restriction base="xs:string">
    <xs:enumeration value="path/"/>
    <xs:enumeration value="path2/"/>
    <xs:enumeration value="path3/"/>
  </xs:restriction>
</xs:simpleType> 

<xs:??? name="epilog">
  How to get the value of XmlName
</xs:??> 
```

我正在尝试在 xsd 文件中执行的操作是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:19:29.060

基于正在验证的 XML 文件中某些其他元素的内容，在 XSD 中不可能有规则。

您可以做的最好的事情是为 的内容指定正则表达式规则`XmlPath`，例如：

```
<xs:element name="XmlPath">
  <xs:simpleType>
    <xs:restriction base="xs:string">
      <xs:pattern value="\w+/\w+"/>
    </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

（的内容`XmlPath`必须是一个单词后跟'/'后跟另一个单词....）

# c++ - C++ 嵌套 If 语句的可读性

> ID：12150207
> 
> 赞同：2
> 
> 时间：2012-08-27T21:58:12.317
> 
> 标签：c++, if-statement, coding-style, code-readability

对于 if 语句，我有相当复杂的逻辑。我目前正在使用：

```
if(numerical_evaluation) {

    if ((!boolOne && boolTwo) || !boolThree){
        //do stuff
    }
} 
```

其中 boolOne、boolTwo 和 boolThree 是逻辑操作（可能是`x < y`“myObject->getBool”等）。

我不知道如何在不将`||`条件嵌套在第三条`if`语句中的情况下使其易于阅读的更好方法。

我遇到困难的原因是`or`运营商使它看起来`if`可能需要第三个陈述。

一种选择是这样做。

或者，我可以做类似的事情

```
if(x <= y) {

    bool boolFour = false;
    if ((!boolOne && boolTwo))
        boolFour = true;

    if (boolFour || !boolThree){
        //do stuff
    }
} 
```

甚至可以创建一个单独的函数来尝试将所有内容或组合验证为单个返回值？

或者，我可以尝试以不需要的方式重组代码，这可能需要大量时间来完成。

**我的问题：**格式化复杂问题的最佳方式是什么`if`- 其中包括更复杂的评估而不仅仅是`if (!A && B && C)`变化？`||`当您将语句与`&&`语句组合到一行中时，似乎事情变得无可救药地难以理解（尤其是当您对 boolOne、boolTwo 等进行复杂的评估时） 。是否遵循相同的原则 -[格式化具有多个条件的 if 语句的最佳方式](https://stackoverflow.com/questions/253030/best-way-to-format-if-statement-with-multiple-conditions)- 也适用于此处，或者在使用各种逻辑运算符时是否存在根本差异？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T22:01:19.900

这：

```
bool boolFour = false;
if ((!boolOne && boolTwo))
    boolFour = true; 
```

可以更清楚地表达为：

```
bool const boolFour = !boolOne && boolTwo; 
```

通过给出`boolFour`一个好的描述性名称，这种分解复杂表达式和*命名子表达式*的方法可以使代码更具可读性、更容易理解和更容易调试。

如果一个复杂的表达式在多个地方使用，应该使用一个函数来封装公共逻辑。但是，如果表达式仅在一个地方使用，则最好在本地分解表达式并使用命名的 const 变量，以使逻辑接近使用它的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T22:02:16.183

编写一个辅助函数来封装组合的布尔检查。例如：

```
bool isEligibleForReduction(int age) { return age < 12 || age >= 60; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:03:21.227

如果可能的话，我通常会做类似的事情：

```
if(numerical_evaluation) { 

    meaningful_name = (!boolOne && boolTwo);
    other_meaningful_name = !boolThree;
    if (meaningful_name || other_meaningful_name){ 
        //do stuff 
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T22:20:41.610

```
if (!numerical_evaluation) {
    // nothing to do.
} else if (!boolOne && boolTwo || !boolThree) {
    // do whatever
} 
```

当然，正如其他人所说，`boolOne`,`boolTwo`和`boolThree`不是很有帮助的名字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T22:26:07.157

最好的方法是充分利用空白。

```
if( numerical_evaluation &&
    (
        (!boolOne && boolTwo) ||
        !boolThree
    )
  ) {
        //do stuff
} 
```

它并不完全漂亮，但很容易理解。您还可以使用函数来隐藏 if 逻辑。

```
bool my_test( int numerical_evaluation, bool boolOne, bool boolTwo, bool boolThree ) {
    return
        numerical_evaluation &&
        (
            (!boolOne && boolTwo) ||
            !boolThree
        );
}

if( my_test( numerical_evaluation, boolOne, boolTwo, boolThree ) ) {
    // do stuff
} 
```

请记住，如果不是小事，请使用注释让人们了解您正在测试的内容（不需要仅解释 C++ 语法的注释）。即使他们可以很好地阅读您的 if 逻辑，它也可以让他们仔细检查它。好的注释可以让人们快速了解您的程序和大部分逻辑，而无需阅读不必要的细节或任何代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T22:31:24.020

尽管这是一个性能建议，但有时将复杂的布尔表达式更好地表示为表查找。

一些复杂的东西，比如：

```
if( (a && !c) || (a && b && c )) 
{
    category = 1;
}
else if( (b && !a ) || (a && c && !b )
{
   category = 2;
}
else if( c && !a && !b ) 
{
   category = 3;
}
else
{
    category = 0;
} 
```

变成：

```
static int categoryTable[2][2][2] = {
    // !b!c    !bc    b!c    bc
    0,         3,     2,     2,      // !a
    1,         2,     1,     1       // a
};
... 
category = categoryTable[a][b][c]; 
```

代码完成 2 第 614 和 615 页，“用表查找替换复杂的表达式”。

# jquery - live('click') 在桌面上工作，但不在移动浏览器上

> ID：12150210
> 
> 赞同：1
> 
> 时间：2012-08-27T21:59:12.640
> 
> 标签：jquery, mobile, live

我正在尝试创建一个小型辅助导航栏，它将显示在移动设备上。它最终会根据点击的链接显示和隐藏特定的 div。我正在使用颜色变化作为测试，看看一切是否正确。颜色变化在桌面浏览器上效果很好，但在智能手机上不行。

在这里搜索建议后，我尝试了“委托”但没有成功。我相信 live() 无论如何都更适合显示/隐藏功能。我能找到的其他建议似乎都与这种情况无关。我尝试使用 preventDefault 方法而不是返回 false，尽管我不清楚两者之间的实际差异，也没有奏效。

我是一名设计师，而不是开发人员，并且对 jquery 非常陌生，尽管我对基本的编码术语和最佳实践有些熟悉。

```
$('#nav2 a').unbind("click");

$('#nav2 a').live('click',function(){
    $(this).css('color','#F00');
    return false;
}); 
```

HTML 代码如下所示：

```
<div id="nav2"><p><ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="#" class="smOnIssue">In This Issue</a></li>
    <li><a href="#" class="smFeatures">Features</a></li>
    <li><a href="#" class="smArchive">Archive</a></li>
</ul></p></div> 
```

正如我所说，它在桌面上运行良好，但移动端什么也没做。我正在使用最新版本的 jquery。谢谢！我真的很感激你们能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:05:06.640

> “从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:58:19.400

如果你想分离一个附加的事件，`.live()`你应该使用`.die()` 你尝试过“tap”而不是“click”事件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T23:24:37.497

您是否尝试将代码放在 pageinit 中 - 这相当于 document.ready 函数[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)。听起来它没有绑定click事件处理程序的原因是因为该元素在dom中还不可用

```
$(document).bind('pageinit',function(){
    $('#nav2 a').live('click',function(){
        $(this).css('color','#F00');
        return false;
    });
}) 
```

从我上面链接的jquerymobile doc

> **重要提示：使用 $(document).bind('pageinit')，而不是 $(document).ready()**
> 
> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。
> 
> **重要： $(document).bind('pagecreate') 与 $(document).bind('pageinit')**
> 
> 在 Beta 2 之前，对希望操作 jQuery Mobile 增强页面和子小部件标记的用户的建议是绑定到 pagecreate 事件。在 Beta 2 中，通过绑定到 pagecreate 事件而不是直接调用小部件方法，进行了内部更改以解耦每个小部件。结果，绑定到 mobileinit 中的 pagecreate 的用户会发现他们的绑定在每个插件增强标记之前执行。为了与 jQuery UI Widget Factory 的生命周期保持一致，初始化方法在 create 方法之后调用，因此 pageinit 事件为 DOM 和/或 Javascript 对象的后期增强操作提供了正确的时间。简而言之，如果您之前在页面显示之前使用 pagecreate 来操作增强标记，那么您很可能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T23:02:38.820

您所要做的就是将 onclick="" 添加到要在移动浏览器上触发的元素。

```
<div id="nav2" onclick=""><p><ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="#" class="smOnIssue">In This Issue</a></li>
    <li><a href="#" class="smFeatures">Features</a></li>
    <li><a href="#" class="smArchive">Archive</a></li>
</ul></p></div> 
```

# java - 如何使用 ExecutorService 和 Futures 处理 TimeoutException？

> ID：12150213
> 
> 赞同：1
> 
> 时间：2012-08-27T21:59:38.333
> 
> 标签：java, exception-handling, executorservice

我有以下示例代码，假设`MyCallable("B")`执行时间超过一秒，而其他代码执行速度超过一秒。因此在我调用的循环中`Future.get()`，它会抛出一个`TimeoutException`.

```
public static void main(String[] args) {
    ExecutorService es = Executors.newFixedThreadPool(2);

    List<Future<String>> futures = new ArrayList<Future<String>>();

    futures.add(es.submit(new MyCallable("A")));
    futures.add(es.submit(new MyCallable("B")));
    futures.add(es.submit(new MyCallable("C")));
    futures.add(es.submit(new MyCallable("D")));
    futures.add(es.submit(new MyCallable("E")));

    try {
        for(Future<String> f  : futures) {
            try {
                System.out.println("result " + f.get(1, TimeUnit.SECONDS));
            }
            catch (TimeoutException e) {
                // how do I know which MyCallable() has timed out?
            } catch (ExecutionException e) {
                System.out.println(e.getMessage());
            }
        }
    }
    catch (InterruptedException e) {
        e.printStackTrace();
    }
    finally {
        es.shutdown();
    }
} 
```

正如预期的那样，每个 MyCallable() 实例都会执行，但是对于超时的实例，我想执行一些错误处理，这需要知道哪个`Callable`与哪个关联`Future`。

是否有这种关联的机制，还是由我`Callable`来处理它的方法内的所有错误处理`call()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:40:37.013

似乎您可以简单地维护 a`Map<Future<String>, Callable<String>>`而不是 a`List<Future<String>>`并以这种方式检索原始的 Callable 。

如果您想变得非常聪明，您可以采用 OO 风格并扩展 ThreadPoolExecutor 并创建一个 Future 装饰器类。我认为这可能是矫枉过正，但你可以这样做：

```
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;

public class FutureWithCallable<T> implements Future<T> {
    private final Callable<T> callable;
    private final Future<T> wrapped;

    public FutureWithCallable(Future<T> wrapped, Callable<T> callable) {
        this.callable = callable;
        this.wrapped = wrapped;
    }

    public Callable<T> getCallable() {
        return callable;
    }

    @Override
    public boolean cancel(boolean mayInterruptIfRunning) {
        return wrapped.cancel(mayInterruptIfRunning);
    }

    @Override
    public T get() throws InterruptedException, ExecutionException {
        return wrapped.get();
    }

    @Override
    public T get(long timeout, TimeUnit unit) throws InterruptedException,
            ExecutionException, TimeoutException {
        return wrapped.get(timeout, unit);
    }

    @Override
    public boolean isCancelled() {
        return wrapped.isCancelled();
    }

    @Override
    public boolean isDone() {
        return wrapped.isDone();
    }
} 
```

进而：

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.Callable;
import java.util.concurrent.Future;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

    public class ExecutorServiceWithCallable extends ThreadPoolExecutor {

        public ExecutorServiceWithCallable(int corePoolSize, int maxPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue) {
            super(corePoolSize, maxPoolSize, keepAliveTime, unit, workQueue);
        }

        @Override
        public <T> FutureWithCallable submit(Callable<T> callable) {
            Future<T> future = super.submit(callable);
            return new FutureWithCallable<T>(future, callable);
        }

    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-25T07:18:54.433

public class TimeoutException extends Exception 阻塞操作超时时抛出的异常。指定超时的阻塞操作需要一种方法来指示已发生超时。对于许多此类操作，可以返回一个指示超时的值；如果这是不可能或不可取的，则应声明并抛出 TimeoutException。

# svn - Subversion 和 CruiseControl.NET 与 TFS 2012 的集成

> ID：12150215
> 
> 赞同：2
> 
> 时间：2012-08-27T21:59:47.100
> 
> 标签：svn, tfs, cruisecontrol.net

我们决定从 JIRA 切换到 TFS 2012，因为它的项目管理功能，特别是需求管理和测试管理。我们已经熟悉 Subversion 和 CruiseControl.NET，所以我们想继续使用这些工具，但我的问题是“**如果我们选择退出内置的 TFS 版本控制并构建，我们将放弃哪些集成功能服务器管理？** ”

例如，我们希望能够将版本控制变更集与 TFS 工作项相关联。SVN还有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:28:57.983

TFS 与自身有很好的集成，但除此之外没有太多。与其他解决方案相比，这是它的杀手级功能之一。TFS 确实有一个很棒的 AP​​I，不幸的是我没有看到很多人使用它，或者至少如果他们这样做了，他们不会发布他们所做的事情。

工作项可以链接到任何支持 url 的东西，所以你仍然可以将它链接到 SVN 变更集。它与将 tfs 签入链接到工作项不同，例如用于使用 TFS 签入执行此操作的内置 UI 将无法使用。您需要手动完成或找到一个有效的插件。

您可以相当简单地向 tfs 工作项添加一个字段以保存变更集编号，并扩展巡航控制以使用当前构建修订更新此字段中没有值的任何已解决的工作项。可能，但有点工作。

TFS 可以在构建失败时自动创建工作项，我通常将其关闭并改用构建监视器，但是这又是您可能无法开箱即用的另一件事。

与 web ui 的任何集成 - 显然 tfs 只会显示来自其自己的工具的结果，因此虽然您可以使用它来编辑您的工作项，但源代码控制和构建选项卡对您来说毫无用处。

我相信很多测试管理的东西都与 tfs 构建集成在一起，而您可能仍然可以在没有构建控制器的情况下使用实验室管理，但您将失去它的一些最佳优势。

# rest - REST 集合，最佳实践：GET api/CollectionA/ /集合B？

> ID：12150218
> 
> 赞同：6
> 
> 时间：2012-08-27T22:00:21.543
> 
> 标签：rest, collections

我需要能够获取基于对象集合的集合。为此，我正在考虑几种方法，但不确定哪一种最有意义，所以我会同时发布它们。如果有更好的方法我可能没有考虑过，请随时发表您的建议:)

例如，我将使用产品和评论（产品评论）作为资源。

目标：我们希望获得所有产品的评论

方法一：

```
POST api/Products { json: filters, limits, etc } // returns api/Products/<id>
GET api/Products/<id>/Reviews { json: filters, limits, etc } // returns json array 
// ... of reviews present in products
// id in this case would refer to the collection, which would be cached 
```

方法 B：

```
GET api/Reviews { json: filters } // returns json array of reviews, but needs to 
// ... have either all of the product ids passed as an array (not practical with 
// ... huge collections), or needs to have all of the api/Products filters passed, 
// ... in which case making the code unDRY 
```

方法 C：

```
GET api/Reviews { json: filters: { products: 'api/Products?filters' }...
// is this reasonable? 
```

提前感谢您的帮助，如果这个问题是菜鸟，我深表歉意，我还是 REST 新手

方法 D：

```
access individual products
GET api/Product/<id>

access collection of products:
POST api/Products?filters=stuff..
GET api/Products/<id>

access collection of products' reviews

POST api/Products/<id>/Reviews?filters=stuff
GET api/Products/<id>/Reviews/<id>

... this would thus allow us to cache the result easily, does this seem reasonable to you? 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T07:06:28.277

> 目标：我们希望获得所有产品的评论

基本上，`GET /api/products/<id>`应该返回 a `product`，并且`GET /api/products/<id>/reviews`应该返回`reviews`给定的all `product`。

如果您想获取所有`products`内容，您将使用`GET /api/products`. 当您同时考虑`reviews`和`products`作为资源时，我建议您公开所有`reviews`：

```
GET /api/reviews 
```

但你可能想`products` **用**他们的`reviews`. 这意味着使用`/api/products`（例如一组过滤器）**获取**一些产品并使用`reviews`. 该`expand`术语来自 OData 协议：[http](http://www.odata.org/documentation/uri-conventions#ExpandSystemQueryOption) ://www.odata.org/documentation/uri-conventions#ExpandSystemQueryOption 。

你可以这样做：

```
GET /api/products?$expand=reviews

GET /api/products?filter=foo&$expand=reviews 
```

这个 URI 的意思是：“标识`products`每个.`reviews``product`

# python - 在 OSX 上自动截屏

> ID：12150225
> 
> 赞同：2
> 
> 时间：2012-08-27T22:00:39.050
> 
> 标签：python, macos, screen-capture, autopy

我在 osx 10.7.4 上使用 Autopy，模块中的所有内容都可以正常工作，但 capture_screen 方法除外。每当我用它来捕捉屏幕时，它保存的图像都是全黑的。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:49:53.710

已知错误：[https ://github.com/msanders/autopy/issues/32](https://github.com/msanders/autopy/issues/32)

您可以通过以下方式使用`screencapture`OS X 实用程序，而不是 autopy `os.system`：

```
os.system("screencapture foo.png") 
```

# jquery - 使用 jQuery 的 slideToggle NEXT li 元素

> ID：12150228
> 
> 赞同：0
> 
> 时间：2012-08-27T22:00:57.270
> 
> 标签：jquery, list, slidetoggle

尝试使用 jQuery 构建一个常见问题解答页面。这是我正在使用的 js：

```
$("#faq li").click(function (event) {
    event.preventDefault(); 
    $(this).next("#faq li ul").slideToggle("fast");
}); 
```

不知道为什么它不工作，任何帮助表示赞赏。

这是HTML：

```
<ul id="faq">

<li>Where are you located?
<ul>
We are located in Southern Cali!
</ul>
</li>

<li>What are your service times?
<ul>
Our service times are 7:00, 8:00, and 9:00!
</ul>
</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:10:43.690

A`<li>`必须始终是 a 的子级`<ul>`，并且 a`<ul>`不能包含任何其他内容。后一点意味着您的标记无效。

您或许应该改用`<dl>`（定义列表），然后将`<dt>`其用于项目标题和`<dd>`项目文本。那将是专门用于此用例的*列表*：

```
<dl id="faq">
<dt>Where are you located?</dt>
<dd>We are located in Southern Cali!</dd>
<dt>What are your service times?</dt>
<dd>Our service times are 7:00, 8:00, and 9:00!</dd>
</dl> 
```

代码如下（使用事件委托）

```
$("#faq dt").click(function() {
   $(this).next('dd').slideToggle('fast');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:31:02.083

请注意，`ul`您要在单击时展开是 的子级`li`，而不是兄弟级。因此，您应该使用`.children('ul')`而不是`.next('#faq ul li')`.

试试这个：

```
$("#faq li").click(function (event) {
    event.preventDefault(); 
    $(this).children("ul").slideToggle("fast");
}); 
```

Also, this is not a good practice to put the text inside an `ul`. Consider replacing inner `ul` with `div` or other element.

# c# - 包含其自身模型类型列表的模型（递归建模？）

> ID：12150230
> 
> 赞同：4
> 
> 时间：2012-08-27T22:01:04.007
> 
> 标签：c#, asp.net-mvc, dependencies

好的，这可能是微不足道的，但我希望有人能给我一个直截了当的答案。假设您在 MVC 项目中有两个模型，一个模型包含另一个模型的列表。这两个模型看起来像这样：

```
public class Vehicle
{
    [Key]
    public int VehicleId { get; set; }

    public virtual List<Wheel> Wheels { get; set; }
}

public class Wheel
{
    [Key]
    public int WheelId { get; set; }

    [Required]
    public int VehicleId { get; set;}

    [Required]
    public virtual Vehicle { get; set; }
} 
```

现在假设你有同样的东西，但只有一个模型。乍一看，我认为它看起来像这样：

```
public class MyClass
{
    [Key]
    public int MyClassId { get; set; }

    public string MyData { get; set; }

    public virtual List<MyClass> MyClasses { get; set; }
} 
```

这让我很失望，因为`MyClasses`它被指定为导航属性。这意味着每个`MyClasses[i]`都必须有一个`MyClass`属性和另一个`MyclassId`都引用 parent `MyClass`。想了一会儿，我开始头晕。我会以正确的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:54:08.687

使用您的`MyClass`实例：

```
public class Class
{
  [Key]
  public int ClassId { get; set; }
  public string Data { get; set; }
}

public class Classes
{
  public virtual List<Class> Classes { get; set; }
} 
```

在你看来`@model .ViewModels.Classes。不会变得更容易，也不会让自己比你想象的更头晕。

简而言之，不要做循环引用，通过以不同的方式命名一个类来打破循环，这样视图中的模型就会知道要查找什么以及使用什么。您当然**可以**使用圆圈。问题是它的维护是一场噩梦。帮自己一个忙，让你的生活更轻松。

**更新**

```
public class MyClasses
{
  public List<Classes> OtherClasses;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:38:11.383

这是生成正确 SQL 数据库的正确方法：

```
public class MyClass
{
    [Key]
    public int MyClassId { get; set; }

    public string Data { get; set; }

    public virtual Classes Classes { get; set; }
}

public class Classes
{
    [Key]
    public int ClassesId { get; set; }

    [Required]
    public int MyClassId { get; set; }

    public List<MyClass> Classes { get; set; }

    [Required]
    public virtual MyClass MyClass { get; set; }
} 
```

# jquery - 附加元素不适用于 eq 选择器

> ID：12150236
> 
> 赞同：1
> 
> 时间：2012-08-27T22:01:38.160
> 
> 标签：jquery, append, selector

我创建了一段脚本，用于收集页面内容，将其放入`div`页面外的标签中，然后将其从右侧滑入，删除旧`div`标签，然后附加一个新标签，然后再次重复该过程一次另一个页面被选中。

JavaScript：

```
$(window).click(function() {
    $(".container:eq(1)").html("new stuff").slideDown(500, function() {
        $(".container:eq(0)").animate({
            width: "0px",
            opacity: 0
        }, 500, "", function() {
            $(this).remove();
            $(".container").parent().append('<div clas="container"></div>');
            $(".container:eq(1)").hide();
        });
    });
});​ 
```

HTML：

```
<div>
    <div class="container">Test</div>
    <div class="container"></div>
</div>​ 
```

这是一个小提琴：http: [//jsfiddle.net/PVG8r/](http://jsfiddle.net/PVG8r/)

当您单击该页面时，它第一次运行良好，但每隔一次，我希望再次显示“新内容”，而旧的“新内容”会滑开，引入新的“新内容”。我已经测试了一些警报，并且新对象的高度`null`不存在。我可以在 HTML 中看到新元素，但它似乎没有被`$(".container:eq(1)")`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:07:11.520

`class`您在附加的 HTML 中有拼写错误的属性：

改变这个：

```
$(".container").parent().append('<div clas="container"></div>'); 
```

对此：

```
$(".container").parent().append('<div class="container"></div>'); 
```

请参阅此处的工作示例：http: [//jsfiddle.net/jfriend00/aeBrd/](http://jsfiddle.net/jfriend00/aeBrd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T22:07:13.897

你的代码有错别字。在下面的行中：

```
$(".container").parent().append('<div clas="container"></div>'); 
```

`clas`如您所知，应该是`class`。这使它可以正常工作。

# java - Java 8（预发布）接口成员变量

> ID：12150240
> 
> 赞同：17
> 
> 时间：2012-08-27T22:02:14.213
> 
> 标签：java, java-8

Java 8 接口中的公共成员变量是特性还是实现的副作用/缺陷？

这个问题与预发布的 Java 8 版本[lambda-8-b50-linux-x64-26_jul_2012.tar.gz 相关](http://jdk8.java.net/lambda/)。

Java 8 以默认方法的形式为接口引入了新特性。使用 JDK8 lambda 编译器的随意测试允许这种形式的接口：

```
public interface Foo {
  public int foo = 0;
  int foo() default { return foo; }
} 
```

示例实现类型：

```
public class FooImpl implements Foo {
  public int foo = 1;
} 
```

此代码遵循变量阴影的标准约定：

```
Foo f = new FooImpl();
System.out.println(f.foo());
System.out.println(f.foo);
System.out.println(new FooImpl().foo); 
```

输出：

```
0
0
1 
```

文档（JSR 335：Java™ 编程语言版本 0.5.1 的 Lambda 表达式）没有提及成员变量。我倾向于认为编译器过于宽容，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-27T22:44:24.037

接口中的公共字段并不是 Java 8 中的新特性。如果您记得它们是隐式静态和最终的，那么您看到的结果就非常有意义。

# php - 使用类属性缓存数据 - 为什么这是一个坏主意？

> ID：12150243
> 
> 赞同：3
> 
> 时间：2012-08-27T22:02:22.677
> 
> 标签：php, performance, caching, scalability

我最近阅读了许多关于 PHP 应用程序可扩展性的文章。几乎我读过的所有文章都提到了缓存，所以我想出了在类属性中缓存数据库数据的想法，以防止过多的数据库查询。我想分享这个想法，所以我在博客上发布了它，只是让我的老师告诉我这是毫无意义和愚蠢的。除了用无意义和愚蠢这两个词之外，他无法真正解释为什么它很糟糕。有人可以在这里解释为什么这种缓存方法来帮助扩展 PHP 应用程序是不好的吗？

**方法：**

理论：

我认为最好有一个类属性（变量）来存储获取的数据库数据，以防止需要重复将返回相同数据的查询或查询。

如果你不明白，这是我博客中的一个例子：

* * *

我将把 Facebook 带入这个例子，只是为了简化解释。假设我们正在为社交网络重新编码用户类。

```
class FBuser
{

} 
```

此类将包含的明显方法：

```
getStatusUpdates()
getAccountInfo()
getFriendIDs() 
```

最初，这些方法都必须执行数据库查询，以获取所需的数据。但是使用缓存方法，我会定义一个类属性来存储缓存的数据，并且所有数据库查询都在一个方法中进行：

```
class FBuser
{
    private $userCache = array();

    private function getData( $dataToGet = '' )
    {

    //all of my db querying would happen here

    }

} 
```

但在同样的方法中，如果允许的话，我也会寻找缓存：

```
private function getData( $dataToGet = '' , $useCache = true )
{
   //am I allowed to use cache?
   if ( $useCache === true )
   { 
       //does the appropriate data exist in cache?
       if ( isset($this->userCache[ $dataToGet ]) )
       {
           return $this->userCache[ $dataToGet ];//return the cached data, and forget about the DB queries
       }

   }

   //if we get here, caching was disabled or the required data has not yet been cached :(
   //all of my db querying would happen here

   //store the data that's just been fetched by the queries in the cache property

} 
```

这样，我可以`getData( 'the data I want' , true );`在我想从数据库中获取数据时调用，允许我在可能的地方和时间使用缓存的数据。

因此，如果我需要调用或多次调用`getAccountInfo()`，此方法将阻止执行多个 DB 查询 = 有利于扩展（我认为）。`getStatusUpdates()``getFriendIDs()`

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T03:49:40.570

> 为什么这是个坏主意？

严格来说，这***本身*****并不是一个坏主意***，因为它会按照您的预期去做，并且如果您的脚本中有重复的查询，您可以获得一点性能。*

 *然而，在实践中，除非您的脚本正在做一些非常非常*不寻常*的事情，否则您的典型 PHP 脚本的每个请求的数据库调用次数不会超过 15 或 20 次，并且其中可能只有 2 到 3 个重复顶部。如果数据库调用已经相对较快，那么处理 2 或 3 个数据库调用在性能上的差异**可以忽略不计。**更不用说数据库本身可能已经有缓存系统了！

实现一个持久缓存，一个存在于请求之间的缓存，是潜在的性能大奖所在，具体取决于您的应用程序/脚本。

**我不是说“不要这样做”**，我只是说除非您计划在同一个请求/脚本中运行相同的查询数百次，这通常不太可能，否则您不会看到太多没有持久的解决方案；但绝对不会受伤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:58:41.840

你的老师很傻:p

我要说的主要一点是，这种类型的缓存，取决于上下文，实际上非常有帮助。我在我开发的 web 框架中做了一些，这种重构是通过使用 XDebug 仔细分析缓存研磨驱动的。

这样想吧。您的数据库访问是您的 PHP 脚本将执行的一些最昂贵的（就性能而言）工作。很容易找到与 DB 相关的调用占页面总执行时间的 50%（或更多）的页面。为什么不缓存结果，以便数据的任何重用都会自动受益？

在 PHP 资源分配方面没有理由不这样做，因为在幕后，PHP 将共享对 zval 的引用，除非它们被修改，因此您的脚本也不需要更多的堆内存。

对于那些对此表示怀疑的人，我会挑战他们在一个进行一次数据库调用而不是两次调用的页面上运行 XDebug，并向全世界宣布他们看不到显着的结果。当实现这一点的代码如此简单时，为什么不进行改进呢？

现在，有些人可能会指出更持久的缓存形式，并说您应该使用它们来代替它。我不同意这种回应所暗示的普遍性。也许该数据集太大而无法在整个服务器上缓存。例如，当每天只有 1% 的用户登录时，我不会将每个人的数据缓存在内存中。服务器上的内存不值得。也许数据经常更新，在这种情况下，同步成为一个问题/负担，可能超过缓存的好处。我要说的一点是，在某些情况下，更持久的缓存形式并不合适。

保持绿色，每个周期都很重要:)*

# opengl-es - 相邻单元格的纹理瓷砖出血（图像图集）

> ID：12150244
> 
> 赞同：1
> 
> 时间：2012-08-27T22:02:55.320
> 
> 标签：opengl-es, opengl-es-2.0

我有一个图像图集，其中的元素排列在彼此并排的盒子中。当我定位/缩放这些以使它们逐像素渲染时，一切正常。但是，当我开始进行亚像素定位的那一刻，我可能会从地图集中的相邻图像中流血。

如果我理解正确，这是由片段着色器或纹理位置插值引起的。纹理位置边界附近的像素最终会从相邻像素中获取一些值。

虽然我不确定，因为如果我进行一些搜索，这个问题通常只会出现与在 mip-map 中使用图层有关。我的理解是正确的，还是我做错了什么？我知道如何修复它（对于平铺和非平铺纹理），但我想确保我首先掌握了正确的基础知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:07:25.140

这取决于您使用的渲染引擎和平台。

简单的解决方案是在纹理图集中的每个框之间添加一个 1 像素的透明边框，这应该可以解决大多数情况下的伪影问题。

在普通 OpenGL 中，顶点位置是浮动的，因此很容易实现亚像素精度。当您将精灵放置在非整数边界上时，opengl 实现自然会发生抗锯齿。质量取决于 OpenGL 的实现，您也可以使用 glHint() 来确保安全。

[glHint() 文档](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glHint.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:15:30.900

据我所知，是的，当您进行子像素操作时，您会得到像素相互混合，这正是 MSAA 实际用于实现抗锯齿的。

# php - MySQL 触发器在 PHP 假定时不会触发，但从命令行触发

> ID：12150245
> 
> 赞同：3
> 
> 时间：2012-08-27T22:03:02.607
> 
> 标签：php, mysql, zend-framework

我正在 PHP + Zend 框架上实现一个非常简单的会计程序。我设置了这个触发器：

```
CREATE TRIGGER consolidate_balance BEFORE INSERT ON balance FOR EACH ROW 
BEGIN 
    IF (NEW.amount IS NOT NULL) THEN 
        UPDATE accounts SET accounts.balance = accounts.balance + NEW.amount WHERE accounts.id = NEW.account_id; 
    END IF;
END 
```

我的脚本只在表格上插入`balance`并从表格中选择`accounts`以获取余额。

**问题**：当 PHP 执行 INSERT 查询时，触发器没有被触发（或者它不起作用）。但是，如果我从 MySQL 日志中复制查询并将其粘贴到 MySQL 的命令行客户端中，它确实可以工作并且我得到了所需的结果（`accounts`表已正确更新）。想法？

以防万一，所有查询都由 Zend_Db_Table_Row 的实例处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:49:46.703

这个问题的解决方案再明显不过了。随着插入`balance`表格，我的脚本正在更新`accounts`表格。`Zend_Db_Table_Row`现在，如果我使用框架中提供的类，这将不是问题。但是我很久以前就对其进行了定制，以将过滤器应用于集合中的每一行，如下所示（简化为这个答案的问题）：

```
class Mauro_Db_Table_Row extends Zend_Db_Table_Row {
    // Pre-update logic
    function _update() {
        $data = $this->toArray();
        $data = $filters->filter($data);
        $this->setFromArray($data);
    }
} 
```

所以我把它改成这样：

```
class Mauro_Db_Table_Row extends Zend_Db_Table_Row {
    // Pre-update logic
    function _update() {
        $diffData = array_intersect_key($this->_data, $this->_modifiedFields);
        $data = $filters->filter($diffData);
        $this->setFromArray($data);
    }
} 
```

现在只有修改过的字段被过滤`$account->balance`保持不变。

我还向[`REVOKE`](http://dev.mysql.com/doc/refman/5.0/en/revoke.html)用户添加了一些特定于列的语句，我的脚本使用这些语句将此类敏感数据的安全屏障加倍：P。

# javascript - .show() 不会改变效果或方向

> ID：12150247
> 
> 赞同：0
> 
> 时间：2012-08-27T22:03:10.640
> 
> 标签：javascript, jquery

我有一些我正在使用 JQuery`.show()`和`.hide()`函数的 div，但是我无法更改效果/方向。

HTML

```
<li><a class="link" name="box1">HOME</a></li>
<li><a class="link" name="box2">ABOUT ME</a></li>

<div id="box1">
  SOME CONTENT
</div>

<div id="box1">
  SOME CONTENT
</div> 
```

JavaScript

```
$(".link").click(function(){
    $('.container').hide();
    $('#'+$(this).attr('name')).show();   
}); 
```

简单地使用`.show()`并且`.hide()`看起来有效。`.show('slide')`也有效。然而`.show('fold')`还是`.show('blind')`没有。也不会试图改变动画的方向/速度。例如：

```
$(".link").click(function(){
    $('.container').hide('slide', {direction:'up'}, 1000);
    $('#'+$(this).attr('name')).show('slide', {direction: 'up'}, 1000);   
}); 
```

重要的是它首先显示 div 的底部，这就是我不使用 .slideDown 函数的原因。

尝试查看文档和在线教程，但无法找出它不起作用的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:06:36.083

对于“增强”动画效果，您必须包含 jQuery UI 库（或者可能只是动画核心的特定实现）。

从 API 页面`show()`：

> 从 jQuery 1.4.3 开始，可以使用命名缓动函数的可选字符串。缓动函数指定动画在动画中不同点的进展速度。jQuery 库中唯一的缓动实现是默认的，称为摇摆，以及以恒定速度进行的一种，称为线性。使用插件可以使用更多的缓动功能，最著名的是[jQuery UI 套件](http://jqueryui.com/)。

所以'just' jQuery 可用的命名动画是'linear' 和'swing'。包括 jQuery UI 会打开[其他几个](http://jqueryui.com/docs/show/)（链接，因为转录它们似乎毫无意义）。

要从他们的 CDN 链接到 Google 托管的 jQuery UI：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script> 
```

参考：

*   [谷歌的 CDN 代码库](https://developers.google.com/speed/libraries/devguide)。
*   [`show()`](http://api.jquery.com/show/).

# asp.net - ASP.Net 连接错误

> ID：12150248
> 
> 赞同：1
> 
> 时间：2012-08-27T22:03:10.543
> 
> 标签：asp.net, sql, iis, connection-string

我在需要与 SQL 数据库通信的 IIS 服务器上运行 ASP.Net Web 应用程序。下面是我正在使用的连接字符串：

```
<add name="myConn"
     connectionString="data source=serverName;initial catalog=dbName;integrated security=True; Trusted_Connection=Yes;"
     providerName="System.Data.SqlClient" /> 
```

这是我继续收到的错误：

```
Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. 
```

我检查了其他几个有类似错误的线程，但找不到任何解决方案。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:40:31.810

这是具有集成安全性的 MS SQL Server，对吧？

如果是这样，只需打开 SSMS 并转到（您的数据库）/安全性/用户，右键单击用户并选择“新用户...”。

从用户类型下拉列表中，选择“Windows 用户”。然后单击“用户名”字段旁边的“...”，这将打开熟悉的 Windows 用户选择对话框，其中应包含匿名登录用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:16:41.527

连接到 SQL Server 数据库时，有两种处理安全性的方法。数据库服务器本身的配置将告诉您哪种方式甚至可用。

1.  综合安全。
    这意味着您将以运行网站的同一用户身份执行查询。对于 IIS 7，这是应用程序池用户。有时这被配置为网络服务、本地服务、本地系统或 ApplicationPoolIdentity。如果数据库服务器与您的 Web 服务器不同（不应该如此），那么您通常必须使用应用程序池身份的域帐户才能使其正常工作。该域帐户应该对您的数据库服务器具有适当的权限。这里的另一种选择是使用模拟。无论哪种方式，这是一个复杂的设置，您应该研究并与您的网络管理员一起工作。

2.  SQL Server 安全性。这是大多数人熟悉的传统用户名/密码。您通常需要修改配置以删除“integrated security=true”部分并提供实际的用户名和密码。请注意，数据库服务器本身需要配置为使用 sql server 用户名，并且用户应该具有适当的权限来对数据库执行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:12:43.013

在你的catalog=dbName后面，我会输入

UID=dbUserID；密码=dbPassword；

当然填写你的 dbUserID 和你的 dbPassword

高温高压

# php - 我在这个 php 程序中的语法错误在哪里

> ID：12150251
> 
> 赞同：-3
> 
> 时间：2012-08-27T22:03:25.677
> 
> 标签：php, mysql, syntax-error

我把自己逼疯了，想弄清楚我在哪里搞砸了。我已经通过这个程序 100 次，我仍然无法弄清楚为什么它没有运行。正在调用的数据库中的所有区域都不是空白的，并且所有变量都是从前一页正确带入的。

```
$host="localhost";
    $username="root";
    $password="sunbuggy";
    $database="mpg";
    $table="m";

mysql_connect($host,$username,$password) or die( "unable to connect to mysql server");
    mysql_select_db($database) or die( "Unable to select database"); 

        $driver=$_POST['driver'];
        $shuttle=$_POST['shuttle'];
        $gas=$_POST['gas'];
        $miles=$_POST['miles'];
        $cost=$_POST['cost'];

$getlastpri= "(SELECT * FROM '$table' ORDER BY `prikey` DESC)";

$sql=mysql_query($getlastpri);
$i=0;
$num=mysql_result($prime,$i,$prikey);
$shut=NULL;
while ($shut != $shuttle){
$shut=mysql_result($sql,$i,shuttle);
    $i++;}
if($shut == $shuttle)
    {$pastmiles=mysql_result($sql,$i,miles);}
else
    $pastmiles=Null;                        

if($pastmiles=Null):
    {$milestravled=Null;}
else:
$milestravled=$miles-$pastmiles;

$milespergallon=($milestravled/$gas);

$abc= "INSERT INTO $table VALUES ('','$driver','$shuttle','$gas','$miles','$cost', '$milestravled','$milespergallon')";
mysql_query($abc);

mysql_close();
echo "Your latest information has been input into the server";
?>` 
```

提前非常感谢。亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:08:14.253

我可以看到的一个错误是您在此处使用了表名周围的引号：

```
$getlastpri= "(SELECT * FROM '$table' ORDER BY `prikey` DESC)"; 
```

它应该是：

```
$getlastpri= "SELECT * FROM `$table` ORDER BY `prikey` DESC"; 
```

不过也可能有其他错误。

你的代码是一团糟，说得好听。您应该分小部分构建应用程序，一次只编写几行代码，然后测试这几行代码是否按预期工作。有经验的程序员不会在不测试任何代码的情况下编写大量代码，然后期望它在第一次尝试时就可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:07:54.360

从我一眼看去，这`if/else`是错误的：

```
if($pastmiles=Null):
{$milestravled=Null;}
else: 
```

应该

```
if($pastmiles == Null){
    $milestravled=Null
} 
```

编辑：

或者正如@Kolink 在评论中指出的那样，您可以使用以下语法：

```
<?
if($a):
    echo $a;
    if($b) {
      echo $b;
    }
else:
    echo $c;
endif;
?> 
```

编辑2：

正如@lserni 指出的那样，您分配的是NULL，而不是比较它。你需要使用`==`不`=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:09:55.227

您在这里（至少）有一个错误：

```
if($pastmiles=Null):
    {$milestravled=Null;}
else:
    $milestravled=$miles-$pastmiles; 
```

IF 的主体是一个赋值，而不是一个检查。它总是设置`$pastmiles`为 NULL，即使它一开始不是 NULL。

你应该写：

```
if (NULL == $pastmiles)
    ... 
```

== 使它成为一个相等性检查，并且首先放置 NULL，将确保如果你再次忘记一个 =，PHP 将抛出一个错误，而不是像什么都没发生一样继续。

# css - 为什么我的 Internet Explorer 条件格式不起作用？

> ID：12150253
> 
> 赞同：1
> 
> 时间：2012-08-27T22:03:44.740
> 
> 标签：css, internet-explorer-8, conditional-statements

我在css中有以下代码：

```
<!--[if IE 7]>
 <style type="text/css">.slider li .slider-content{margin-left:-605px;}</style>
<![endif]-->

<!--[if gte IE 8]>
<style type="text/css">.slider li .slider-content{margin-left:-630px;}</style>
<![endif]--> 
```

我在 IE9 中进行测试，当我选择 IE8 标准模式并查看 Internet 开发人员工具时，我看到左边距：-605px（而不是 -630px）

你能想到为什么 IE8 模式下的这段代码会使用 IE7 设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:19:51.530

浏览器版本取决于浏览器模式设置，而不是文档模式设置。

如果您选择浏览器模式“IE 7”和文档模式“IE 8 标准”，它将使用 IE 7 来确定条件代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:29:40.777

在您的网页中包含此元标记以启用 IE8 模式：

```
 < meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

# ruby - Rails：如何将自定义参数传递给控制器 方法？

> ID：12150254
> 
> 赞同：1
> 
> 时间：2012-08-27T22:03:44.247
> 
> 标签：ruby, ruby-on-rails-3

我对 Rails 相当陌生。

我想跟踪一篇文章的阅读频率，以便按受欢迎程度对它们进行排名。因此，我将`read_count`在`posts`表中有一个数据库列，每次调用#show 时都会增加 1。

但是，如果管理员已登录并想通过 #show 方法预览帖子，我不希望`read_count`增加。

我认为传递一个自定义参数，例如`preview=true`在 params 哈希中是最好的。`read_count`然后，#show 只有在`preview`评估为 false 或 nil时才会增加。但是，我该怎么做呢？`preview=true`添加到 params 哈希的正确方法是什么？

或者在控制器上实现#preview 方法会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:06:42.037

怎么样做类似的事情：

```
@post.read_count.increment! unless user_signed_in? && current_user.admin? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:06:02.213

为什么不通过控制器操作本身来发送参数而不是发送参数呢？如果它被击中并且不是管理员，那么增加计数，似乎是一个更简单的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:18:37.627

以下答案之一可能是更好的方法，但要回答您如何传递额外参数的问题。您可以将它们添加到 url 帮助程序的末尾，因此如果您现有的链接如下所示：

link_to '显示'，post_path(id)

只需将其更改为：

link_to '显示'，post_path(id) + '?preview=true'

# android - 自定义 BaseAdapter 上的过滤器不起作用

> ID：12150256
> 
> 赞同：0
> 
> 时间：2012-08-27T22:03:51.777
> 
> 标签：android, filter, baseadapter

我有一个 BaseAdapter 并想使用过滤器。它充满了对象 (1)。我想使用“名称”字段进行过滤。当我尝试使用过滤器时，它给了我错误。检查代码：

对象接触

```
public class Contato {
    public static final String CONTATO_NOME = "contato_nome";
    public static final String CONTATO_ORG = "contato_org";
    public static final String CONTATO_ID = "contato_id";

    public static String[] colunas = {"_id", Contato.CONTATO_NOME, Contato.CONTATO_ORG, Contato.CONTATO_ID};

    public long _id;
    public String nome;
    public String org;
    public String id;

    public Contato () {
    }

    public Contato (String nome, String org, String id) {
        this.nome = nome;
        this.org = org;
        this.id = id;
    }

    public Contato (long _id, String nome, String org, String id) {
        this.id = id;
        this.nome = nome;
        this.org = org;
        this.id = id;
    }

    public static String[] getColunas() {
        return colunas;
    }
    public static void setColunas(String[] colunas) {
        Contato.colunas = colunas;
    }

    public long get_Id() {
        return _id;
    }
    public void set_Id(long _id) {
        this._id = _id;
    }

    public String getNome() {
        return nome;
    }
    public void setNome(String nome) {
        this.nome = nome;
    }

    public String getOrg() {
        return org;
    }
    public void setOrg(String org) {
        this.org = org;
    }

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
} 
```

基本适配器

```
public class ContatoListAdapter extends BaseAdapter implements Filterable {
    private Context context;
    private List<Contato> lista;
    private TextView nome;
    private TextView org;
    private LayoutInflater inflater;

    public ContatoListAdapter(Context contexto, List<Contato> lista) {
        this.context = contexto;
        this.lista = lista;
    }

    public int getCount() {
        return lista.size();
    }

    public Object getItem(int position) {
        return lista.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // Recupera a atividade da posição atual
        Contato c = lista.get(position);

        if (position == 0) {

            inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.contato_linha_lista, null);
            // Atualiza o valor do TextView
            nome = (TextView) view.findViewById(R.id.txtContatoListaNome);
            nome.setText(c.nome);

            org = (TextView) view.findViewById(R.id.txtContatoListaOrganizacao);
            org.setText(c.org);

            return view;

        } else {

            inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.contato_linha_lista, null);

            // Atualiza o valor do TextView
            nome = (TextView) view.findViewById(R.id.txtContatoListaNome);
            nome.setText(c.nome);

            org = (TextView) view.findViewById(R.id.txtContatoListaOrganizacao);
            org.setText(c.org);

            return view;

        }
    }

    public Filter getFilter() {
        return new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint,
                    FilterResults results) {
                lista = (List<Contato>) results.values;
                ContatoListAdapter.this.notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                List<Contato> filteredResults = getFilteredResults(constraint);

                FilterResults results = new FilterResults();

                results.values = filteredResults;

                return results;
            }
        };
    }

    protected List<Contato> getFilteredResults(CharSequence constraint) {
        // TODO Auto-generated method stub
        return null;
    } 
```

过滤器的调用

```
Util.etxtTelaContatosListaBuscar
                .addTextChangedListener(new TextWatcher() {
                    public void afterTextChanged(Editable s) {
                    }

                    public void beforeTextChanged(CharSequence s, int start,
                            int count, int after) {
                    }

                    public void onTextChanged(CharSequence s, int start,
                            int before, int count) {
                        if (Util.adapter != null)
                            Util.adapter.getFilter().filter(s);
                    }
                }); 
```

编辑：

在搜索字段中输入内容后出现的错误：

> 关闭虚拟机
> 
> 线程以未捕获的异常退出 (group=0x4001d7d0)
> 
> 致命例外：主要
> 
> java.lang.NullPointerException
> 
> 在 com.datalabrasil.dtldiscover.ContatoListAdapter.getCount(ContatoListAdapter.java:28)
> 
> 在 android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:778)
> 
> 在 android.database.DataSetObservable.notifyChanged(DataSetObservable.java:31)
> 
> 在 android.widget.BaseAdapter.notifyDataSetChanged(BaseAdapter.java:50)
> 
> 在 com.datalabrasil.dtldiscover.ContatoListAdapter$1.publishResults(ContatoListAdapter.java:85)
> 
> 在 android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)
> 
> 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 在 android.os.Looper.loop(Looper.java:123)
> 
> 在 android.app.ActivityThread.main(ActivityThread.java:4627)
> 
> 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 在 java.lang.reflect.Method.invoke(Method.java:521)
> 
> 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
> 
> 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
> 
> 在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:18:56.990

```
protected List<Contato> getFilteredResults(CharSequence constraint) {
        // TODO Auto-generated method stub
        return null;
    } 
```

我认为你必须填写这个方法的主体，返回正确的结果:)

**编辑：**试试这个：

```
protected List<Contato> getFilteredResults(CharSequence constraint) {
    ArrayList<Contacto> filteredList = new ArrayList<Contato>(); 
    for (Contato c:lista) { 
        if (c.nome.trim().toLowerCase().startsWith(constraint.toString().trim().toLowerCase())) { // you can also use contains instead of startsWith...whatever you need 
            filteredList.add(c); 
        } 
    } 
    return filteredList;
    } 
```

**编辑＃2：**在for循环中使用类似或类似的东西可能会更好`getAllContato()`，而不是lista，因为过滤后，过滤后的结果会重写变量lista，这意味着每次过滤时，您将拥有越来越少的项目您的列表...在这种情况下，您正在过滤过滤的项目等等...我希望您能明白我想说的话。:)

# permissions - 支持分层角色/权限的角色提供者？

> ID：12150260
> 
> 赞同：2
> 
> 时间：2012-08-27T22:04:27.567
> 
> 标签：permissions, asp.net-membership, roleprovider

我正在构建一个具有分层角色的 Web 应用程序。

例如，管理员、mod、用户角色。

如果用户是版主，并且 .IsInRole("User") 已完成，那么它将返回 true，因为 mod 在用户之上。还将有一个权限表允许（true）/拒绝（false）用于不同角色的各种操作。

还会有不同的“起始”角色会向下分支；admin2、mod2、user2，但普通 mod 不会被视为 user2，只会被视为普通用户。

是否有任何库允许这种类型的角色/权限功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:44:13.573

我会强烈考虑在角色中使用基于声明的方案。但是，我的反应是创建一个自定义 IPrincipal 对象，覆盖 IsInRole 方法，并为您的角色（您知道，1、2、4、8）值使用按位标志枚举。

我的开源项目有一个基于声明的工作实现。 [https://github.com/wcpro/scaffr-generated](https://github.com/wcpro/scaffr-generated)

# iphone - iOS MKMapView，底部有位置搜索

> ID：12150268
> 
> 赞同：2
> 
> 时间：2012-08-27T22:05:27.817
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试构建一个 iOS 5 应用程序，其中的地图填充了用户位置周围的点。地图嵌套在导航控制器中，底部有一个搜索栏。搜索栏连接到搜索栏下方的 UITableView（用于搜索结果）。所有这三个视图都在 UIScrollView 中。

层次结构如下：

*   导航控制器
    *   用户界面视图
        *   滚动视图（包含以下3个）
            *   地图视图
            *   搜索栏
            *   表视图

对于无法发布图片，我深表歉意，但我可以将您引导至另一个执行几乎完全相同的操作的应用程序，即[Dark Sky](http://darkskyapp.com "阴暗的天空")。

这就是我想要发生的事情：当用户在搜索栏中点击时，视图会向上滚动，显示带有结果的表格视图（同时也显示取消按钮）。搜索并找到某些内容或取消后，视图将向下滑动以再次显示地图（底部有搜索栏）。[这与Dark Sky](http://darkskyapp.com "阴暗的天空")完美结合。

我已经看到其他一些可以解决我的问题的问题，但是，它们都没有完全说明解决方案。关于如何实现这一点的任何最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:06:13.403

你几乎肯定不想在`UIScrollView`这里。仅当您希望用户控制滚动时才使用它。

您可以使用现有的[UISearchDisplayController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchDisplayController_Class/Reference/Reference.html)功能，如[TableSearch](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html)示例中所示。请注意，虽然该示例中的背景视图是`UITableView`，但这*不是*用于显示搜索结果的示例表。如果您更改背景表格的样式，您可以看到这一点。因此，您也可以使用 an`MKMapView`作为背景，并且仍然有一个搜索结果表。

如果 UISearchDisplayController 提供的过渡行为不适合，您将需要自己创建搜索结果表并为其设置动画。在您的界面设计中，将搜索结果表放在屏幕下方的视线之外。当用户搜索时，使用[UIView animateWithDuration:animations:](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3a)将表格移动到正确的位置。（只需使表格框架与地图框架具有相同的值。）

如果您允许旋转到不同的设备方向，您可能需要在旋转发生时更新表格位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:14:47.723

当用户完成输入搜索文本时，您不能手动设置滚动视图的内容偏移量吗？

按地图视图的负高度偏移滚动视图。

```
myScrollView.contentOffset = CGSizeMake(0, -heightOfMapView); 
```

或者使用 CGAffineTransformMakeTranslation

```
myScrollView.transform = CGAffineTransformMakeTranslation(0, -heightOfMap); 
```

然后，当您想要返回地图时，请使用重置转换转换：

```
myScrollView.transform = CGAffineTransformMakeTranslation(0, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:03:31.253

只是一个想法：每个 TableView 都有一个属性 tableHeaderview：

```
@property(nonatomic, retain) UIView *tableHeaderView 
```

把`searchBar`和 放在`mapView`里面`tableHeaderView`。因此，您将`tableHeaderView`用作容器视图并相应地滚动`tableView`，因此它只显示`tableHeaderView`.

# liferay-6 - 在 Liferay 6.1 中，是否可以仅在日期时间字段上按日期搜索 ServiceBuilder portlet？

> ID：12150274
> 
> 赞同：0
> 
> 时间：2012-08-27T22:05:46.457
> 
> 标签：liferay-6, alloy-ui

我通过 Service Builder 创建了一个 portlet，它存储了一些用户数据以及日期。

**我的service.xml**文件的相关部分

```
<entity name="ServiceAgreement" local-service="true" remote-service="false">
    <column name="agreementId" type="long" primary="true"></column>
    <column name="agreementVersion" type="double"></column>
    <column name="userId" type="long"></column>
    <column name="agreementTimestamp" type="Date"></column><!-- column w/ the trouble -->
    <column name="groupId" type="long"></column>
    <column name="companyId" type="long"></column>
    <order by="asc">
        <order-column name="agreementTimestamp"></order-column>
    </order>
    <finder name="G_AT" return-type="Collection">
        <finder-column name="groupId"></finder-column>
        <finder-column name="agreementTimestamp"></finder-column>
    </finder>
    <finder name="SignedDate" return-type="Collection">
        <finder-column name="agreementTimestamp"></finder-column>
    </finder>
... 
```

我目前正在编写另一个 portlet，它将成为存储在第一个 portlet 中的数据的报告 portlet。

我遇到的问题是，当我使用标签按日期执行搜索时，我没有从数据库中得到我*知道*的日期的任何响应。我已经将问题追溯到 ServiceBuilder 构建的“findbysignedDate”方法，按日期搜索，*精确到毫秒*！

我要检索的记录： ![要检索的记录](../Images/0c9624e82f02bfd2a4a472728c8f7977.png) 例如，我的报告 portlet 包含：

```
int month = Integer.parseInt(request.getParameter("dateMonth"));
int day = Integer.parseInt(request.getParameter("dateDay"));
int year = Integer.parseInt(request.getParameter("dateYear"));
GregorianCalendar cal = new GregorianCalendar();
cal.clear();
cal.set(year, month, day);
Date signedDate = cal.getTime();

try {
   if(signedDate == null || signedDate.getTime() < 0) {
     throw new PortalException("Invalid date input provided.");
} else {
    _log.debug("Signed Date: " + signedDate.toString());

    //get TOS data
    JSONArray tosArray = LiferayHelper.getTOSsBySignedDate(signedDate);
... 
```

'tosArray' 中没有返回任何内容。但是，如果我这样写：

```
int month = Integer.parseInt(request.getParameter("dateMonth"));
int day = Integer.parseInt(request.getParameter("dateDay"));
int year = Integer.parseInt(request.getParameter("dateYear"));
GregorianCalendar cal = new GregorianCalendar();
cal.clear();
cal.set(year, month, day,18,49,15); //getting REALLY specific here...
cal.add(Calendar.MILLISECOND, 958);
Date signedDate = cal.getTime();

try {
   if(signedDate == null || signedDate.getTime() < 0) {
     throw new PortalException("Invalid date input provided.");
} else {
    _log.debug("Signed Date: " + signedDate.toString());

    //get TOS data
    JSONArray tosArray = LiferayHelper.getTOSsBySignedDate(signedDate);
... 
```

然后 tosArray 包含正确的数据。

我只想拉回一天（24 小时）的所有数据。有谁知道是否有解决此问题的内置方法？还是我需要重写我的 service.xml 文件？我是否不得不编写自己的搜索方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:58:12.627

答案是使用 Service Builder 将为您构建的自定义查询。在 Liferay in Action 的第 7 章末尾找到了这个。

Liferay 网站上提供了简要概述。
[http://www.liferay.com/community/wiki/-/wiki/Main/Service+Builder+Finders](http://www.liferay.com/community/wiki/-/wiki/Main/Service+Builder+Finders)

请注意 Liferay 为这些查找器强制执行的严格命名约定合同。我挣扎了将近一整天，试图让服务生成器自动构建我的新查找器类，结果发现它失败了，因为我没有将查找器命名为服务生成器所期望的。

# sql - 在一个查询中实现多个排序和限制

> ID：12150275
> 
> 赞同：1
> 
> 时间：2012-08-27T22:06:00.133
> 
> 标签：sql, database, postgresql

我需要进行查询，以显示组织顺序按组织排名递减的顺序。但是，如果组织有当前正在发生的事件，它们将显示在顶部（按排名排序）然后显示即将发生事件的组织，最后显示没有发生任何事情的组织。

一个组织可以同时拥有当前正在发生和即将发生的事件，并且每个事件都有多个，但它只选择一个事件，并且该组织只出现在类别下

当前发生的优先级高于即将发生的事件，因此该组织仅在同时具有当前发生的事件和即将发生的事件时才会出现在当前发生的事件中

这是输出应该是什么的示例

**目前正在发生**

*   组织 1（等级 3）- 事件 1
*   组织 2（等级 2） - Event2
*   组织 3（等级 1） - Event3

**即将到来**

*   组织 5（等级 3） - Event4
*   组织 4（等级 2） - Event5
*   组织 6（等级 2） - Event6

**没有**

*   组织 7（等级 3） - Event7
*   组织 8（等级 2） - Event8
*   组织 9（等级 2） - Event9

这是一个示例表设置

组织 id - 名称 - 等级

事件 ID - 组织 ID - 名称 - 状态（2 = 当前正在发生，1 = 即将发生，0 = 没有）

正如我所说，状态列仅包含 2、1 或 0，我相信这可以执行 ORDER BY

如果有人可以写一个示例查询，我将不胜感激！我无法按状态对事件进行排序，然后同时按它们的等级对这些事件的组织进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:34:00.017

例子：

```
SELECT o.*, max(e.status) AS org_status
FROM   organization o
JOIN   event e ON e.organiszation_id = o.organization_id
GROUP  BY o.organization_id
ORDER  BY org_status DESC, o.rank DESC, o.name; 
```

请注意，我将其用`organization_id`作主键，因为在数据库中的多个表`organization`中使用非描述性名称是一种反模式。`id`

`o.organization_id`作为主键的事实也只允许我`GROUP BY o.organization_id`- 这从 PostgreSQL 9.1 开始有效。

# python - 来自 Python 服务器的“权限被拒绝”

> ID：12150285
> 
> 赞同：1
> 
> 时间：2012-08-27T22:06:36.700
> 
> 标签：python, io, hosting

所以基本上，我对 Python 有点陌生。我创建了一个服务器，让它运行良好，文件和所有内容都显示出来。

但问题是，每次我尝试在 Python 中打开文件进行读/写时，我的终端都会抛出“拒绝访问”错误。

你知道，这是一个基本的服务器：

```
#!/usr/bin/env python
import BaseHTTPServer
import CGIHTTPServer
import cgitb

cgitb.enable();
server = BaseHTTPServer.HTTPServer;
handler = CGIHTTPServer.CGIHTTPRequestHandler;
address = ("",80);
handler.cgi_directories = ["/home"];

httpd = server(address,handler);
print("Working . . . ");
httpd.serve_forever(); 
```

没什么太花哨的。所以我启动服务器，然后当用户导航到页面时，“/home/file.py”包含以下代码：

```
#!/usr/bin/env python
f = open("asdf.txt","w"); 
```

什么都没有发生，当我检查运行服务器的终端时，它说，

```
 localhost - - [27/Aug/2012 17:58:18] "GET /home/file.py HTTP/1.1" 200 -
 Traceback (most recent call last):
   File "/home/SERVER/home/file.py", line 4, in <module>
     f = open("asdf.txt","w");
 IOError: [Errno 13] Permission denied: 'asdf.txt' 
```

我已经查找了一段时间，但我还没有找到解决方案。这可能是一个非常简单的解决方案，可以让专业的 Python 用户大开眼界，但要考虑到所有自学成才的程序员都必须从某个地方开始。对我来说，我现在有点落后，至少在 Python 方面。

我尝试了一些我从互联网上找到的解决方案（以及“可能已经有你答案的问题”），比如导入“os”并使用它来指定创建文件的确切位置。我尝试在 SERVER 文件夹和包含 Python 脚本的文件夹上使用“sudo chmod g+w”。但是这些互联网解决方案都没有帮助我。

我也会记得接受答案。

我试图使问题尽可能准确。所以如果你还有什么需要知道的，我可以更新一下。

由于这是一个“权限被拒绝”错误，我怀疑这是 Python 的错，并且可能是我没有在某处设置的一些权限。但我不知道他们会在哪里或在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:47:04.283

如果您阅读[CGIHTTPServer](http://docs.python.org/library/cgihttpserver.html)上的 python 文档：

> 请注意，出于安全原因，CGI 脚本将使用用户nobody 的UID 运行。CGI 脚本的问题将转换为错误 403

所以这似乎有点棘手，除非您愿意放弃所有最佳实践并让任何人在您的文件夹中执行操作。

# facebook - Facebook帖子没有应用程序是什么意思

> ID：12150286
> 
> 赞同：0
> 
> 时间：2012-08-27T22:06:39.027
> 
> 标签：facebook, facebook-graph-api

Facebook Graph API 文档表明 post 对象有一个应用程序元素：http: [//developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

但我们通常根本看不到应用程序元素。发生这种情况时，是否意味着该帖子是通过 Facebook 网站上的浏览器创建的？

这是一个例子： [https ://graph.facebook.com/7976226799_10151201757386800?access_token=XXXX](https://graph.facebook.com/7976226799_10151201757386800?access_token=XXXX)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:13:28.883

是的。这就是它的意思。如果没有应用程序，则表示它是使用 Facebook 自己的界面制作的。

# javascript - 获取日期和货币格式

> ID：12150291
> 
> 赞同：2
> 
> 时间：2012-08-27T22:07:10.460
> 
> 标签：javascript, jquery, html, localization, geolocation

有没有一种方法可以让我使用 JavaScript 获取用户对日期和货币格式的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:12:47.637

您可以通过[HTML5 地理位置](http://html5demos.com/geo)（或服务器端）了解用户的位置。并根据位置，了解币种。但是你需要一张国家地图 -> 货币。

HTML 基本示例：

```
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else{
    alert("Geolocation is not supported by this browser.");
  }
}
function showPosition(position) {
  alert("Latitude: " + position.coords.latitude + " Longitude: " + position.coords.longitude) 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:17:35.093

如果本地计算机解析（和输出）格式为 dd-mm-yyyy 的日期字符串，这会将 Date 的“ddmm”属性设置为 true，如果本机格式为 mm-dd-yyyy，则设置为 false。

```
Date.ddmm= (function(){
    return Date.parse('2/6/2009')== 1243915200000;
})(); 
```

# javascript - 当 html 选择/选项更改时，需要更新输入字段

> ID：12150292
> 
> 赞同：0
> 
> 时间：2012-08-27T22:07:11.943
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ajax

在我的 Rails 应用程序中，我有一个从模型生成的选择标签（用户可以选择不同的国家）。我想更新当用户选择不同选项时可以在同一视图中找到的 text_field （用于国家电话代码）的值。我需要根据用户选择的选项（国家）从模型中提取需要放在 text_field 中的值（国家代码）。我试图用几种不同的方式解决这个问题，但我似乎陷入了困境。请帮忙。

```
View:
     <%= f.label :country %>
     <%= select("user", :country, Country.all.collect{ |c| c[0] }, {prompt: "-- Select Country --"} )%>

     <%= f.text_field :country_code, size: 4, readonly: true %> 
```

我可以根据国家名称获取国家代码。

```
country_code = Country.find_country_by_name('united states').country_code 
```

**更新：** 我尝试使用以下 javascript 但我不确定如何提取我正在寻找的值：

```
Javascript:
   $ -> 
   $("select#user_country").change -> 
    $("input#user_country_code").val( MISSING VALUE ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:45:24.747

您可以使用 javascript 执行此操作。创建一个在选择字段更改时绑定的函数。然后在您的应用程序中创建一个 API 调用，该调用将响应您要对表单进行的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:51:15.313

您的选择器上有一个额外的右花括号 ( } )。我不确定咖啡脚本的语法。

```
$("select#user_country}") 
```

# windows-server-2008-r2 - AD FS 2.0 是否需要声明感知代理？

> ID：12150294
> 
> 赞同：0
> 
> 时间：2012-08-27T22:07:32.503
> 
> 标签：windows-server-2008-r2, adfs2.0

我注意到对于 AD FS 1.0 服务器，它的 Web 服务器有一个 adfs 声明感知代理。我想知道 AD FS 2.0 服务器是否以相同的方式工作并且需要一个声明感知代理 2.0 来提供 Web 服务？如果是这样，我该如何安装此声明感知代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:13:34.690

不 - 它没有。它没有代理的概念。ADFS 直接支持被动（浏览器）和主动（Web 服务）。

# objective-c - 什么用于核心数据排序？

> ID：12150296
> 
> 赞同：1
> 
> 时间：2012-08-27T22:07:46.020
> 
> 标签：objective-c, ios, core-data, sql-order-by

在 SO [Ordered CoreData 记录上解决这个问题](https://stackoverflow.com/questions/7767542/ordered-coredata-records)

我知道无法通过 orderID 对核心数据中的数据进行排序。当您使用：

```
sortDescriptorWithKey:@"name" ascending:YES 
```

它按字母顺序排序，当您选择时`NO`，顺序似乎是随机的，但并非每次都在新发布时。

有谁知道正在选择什么顺序？如果它是随机的，那么它不是必须每次都改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:08:44.407

应该是下降了

# c# - 将数据表转换为 oracledataReader

> ID：12150297
> 
> 赞同：1
> 
> 时间：2012-08-27T22:07:51.040
> 
> 标签：c#, .net, visual-studio, oracle, ado.net

我可以像将 DataTable 转换为 DataTableReader 一样将数据表转换为 OracleDataReader

```
DataTable.CreateDataReader(). 
```

有什么方法可以从 DataTable 中生成 OracleDataReader 吗？

我真的想要一些关于[这个问题的建议](https://stackoverflow.com/questions/12149618/passing-oraclelob-as-parameter-to-a-function)

另外，告诉我是否有办法将数据表列转换为 OracleLob 类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-03T17:40:26.287

可能为时已晚，但它可以帮助某人。

IDataReader resultBanner = (IDataReader)objDatatable.CreateDataReader();

# c# - 用于下一个和上一个日期的 c# Lambda 表达式

> ID：12150298
> 
> 赞同：2
> 
> 时间：2012-08-27T22:07:51.543
> 
> 标签：c#, asp.net-mvc-3, lambda

我有以下数据库表“日期”：

```
DateId      Date
1       08/05/2012
2       08/01/2012
3       08/25/2012
4       08/15/2012
5       08/22/2012
..... 
```

要获取最近的日期，我使用以下表达式：

```
var recentDate = db.Date.OrderByDescending(d => d.Date).FirstOrDefault(); 
```

我如何使用 recentDate 来使用 lambda 表达式获取上一个日期或下一个日期？

当我尝试使用 latestDate 时，我收到一条错误消息：

```
operator > cannot be applied to operands of type 'System.DateTime' and 'App.Models.Date 
```

这是我在前一个日期尝试的：

```
var previous date = top10Date.Where(d => d.Date > latestDate).OrderBy(d => d.Date).FirstOrDefault(); 
```

上面的表达对吗？我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:11:44.853

您正在尝试将 DateTime 与 App.Models.Date 进行比较，编译器不知道如何进行比较。

您可能正在尝试执行以下操作：

```
var previous date = top10Date.Where(d => d.Date > latestDate.Date).OrderBy(d => d.Date).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:26:37.670

您的 recentDate 不是 DateTime，它是整个 Date 对象......只需选择 Date 部分，您也将带回更少的数据。

```
var recentDate = db.Date.OrderByDescending(d => d.Date).Select(d => d.Date).FirstOrDefault(); 
```

# mysql - 如果用户已经在购物车中有东西，建议他可以购买什么

> ID：12150308
> 
> 赞同：37
> 
> 时间：2012-08-27T22:08:17.257
> 
> 标签：mysql, database, machine-learning

我正在开发我将出售食品的电子商店。我想要一个建议框，我会根据他在购物车中已有的东西建议我的用户还可以购买什么。如果他有啤酒，我希望他通过降低他也会购买的概率来推荐薯条和其他东西。但我希望我的算法能够学习根据所有用户之前的购买来推荐杂货。我应该从哪里开始？我有杂货桌`user_id`，，`item_id`和`date`类似的。如何在没有暴力破解的情况下制作建议框，这是不可能的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-29T22:56:49.867

您描述的是推荐引擎；更具体地说是协同过滤。它是亚马逊“买了 x 的人也买了 y”功能和 Netflix 推荐引擎的核心。

这是一项不平凡的工作。例如，要获得任何对远程有用的东西，可能需要的不仅仅是首先建立电子商务网站。

例如：

*   您不想推荐已经在购物篮中的商品。
*   你不想推荐已经在篮子里的东西的更便宜的版本。
*   您不想推荐缺货的商品。
*   您不想推荐统计上有效但没有意义的商品（“嘿，你买了尿布，为什么不买啤酒？” - 有一个故事说，在超市，有*一个*统计相关性，因为爸爸出去晚上买尿布，同时拿起六包）。
*   您*确实*想推荐现在正在促销的商品
*   您*现在不想*推荐与促销中的商品相似的商品

当我尝试一个类似的项目时，很难向非技术人员解释计算机根本不理解推荐啤酒和尿布是不合适的。一旦我们得到基本解决方案的工作，构建排除和边缘案例逻辑至少需要同样长的时间。

实际上，我认为这些是您的选择：

*   手动维护相关产品。耗时，但不太可能导致怪异。
*   使用现成的解决方案 - SaaS 或包含支持此功能的 R 之类的库。
*   推荐（半）随机产品。有一组你想推荐的产品，随机选择一个——例如，促销产品、“畅销”列表中的产品、价格低于 x 的产品。排除可能有问题的类别。

所有这些选择都可以在合理的时间内实现；从头开始构建一个合适的解决方案的问题在于，每个人都会根据亚马逊来衡量它，而且他们对你有一点领先……

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T10:10:39.900

[这是数据挖掘中的Apriori](http://nikhilvithlani.blogspot.sg/2012/03/apriori-algorithm-for-data-mining-made.html#!/2012/03/apriori-algorithm-for-data-mining-made.html)算法解决的一个常见问题。您可能需要创建另一个表来维护此统计信息，然后根据首选组合提出建议

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-02T23:01:50.943

嗯……那么您正在寻找产品推荐引擎……嗯，它们基本上有三种风格：

*   **协同过滤**
*   **基于内容的过滤**
*   **混合推荐系统**

   第一个收集并存储有关用户活动、偏好、行为等的数据……然后将这些数据发送到一个引擎，将其分成*用户通道*。每个频道都有特定的喜好和厌恶。因此，当您有一个新访问者时，他或她将被分类并被分配一个特定的*用户配置文件*。然后将根据此配置文件的喜欢/不喜欢显示项目。

   现在，基于内容的过滤使用了一种不同的方法——一种不太社​​交的方法——只考虑用户以前的浏览历史、他的偏好和活动。本质上，这将根据*该用户*之前喜欢/购买的内容创建推荐。

   但为什么只选择其中之一，对吧？混合推荐系统使用两者来提供*个性化但社会化的推荐*。在提供建议时，这些通常更准确。

   我认为，当您有大量用户涌入时，协同过滤是一个不错的选择——每月只有 42 个用户访问您的网站，很难建立良好的渠道。第二个选项，基于内容，更适合拥有大量产品的小型网站 - 但是，恕我直言，第三个是适合你的 - 构建一些可以让用户从一开始就开始并收集他们生成的所有数据的东西，在未来，能够提供类似亚马逊的推荐体验！

   构建其中之一并非易事，因为我相信您已经知道......但我强烈推荐这本书（使用个人历史过滤！）它在过去对我来说真的很重要：[http://www .amazon.com/Algorithms-Intelligent-Web-Haralambos-Marmanis/dp/1933988665](https://rads.stackoverflow.com/amzn/click/com/1933988665)

祝你好运，好好学习！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-29T17:13:27.433

根据其他购买该商品的顾客的购物习惯进行交叉销售。假设您的数据库（订单表）中有此购买历史记录：

1.  啤酒、薯条、苏打水
2.  啤酒、苏打水
3.  苏打水、蛋糕
4.  薯条、啤酒
5.  蛋糕、薯条、啤酒

然后，如果您的客户的购物车中有啤酒，则根据您客户的购物习惯，您可以轻松进行查询并查看与啤酒相关的商品是：

1.  筹码（3次）
2.  苏打水（2次）
3.  蛋糕（1次）

然后你可以推荐薯条和苏打水……你的购买历史越多，系统给出的建议就越准确。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-27T22:22:40.840

我认为最好的方法是对您的物品进行分类并使用该信息来做出选择。

我在一个杂货网站上做了这个，结果效果很好。这个想法是将项目交叉分组到多个类别中。

例如，让我们拿一根香蕉。它是一种水果，但也常与玉米片或麦片一起用于早餐。谷物也是早餐食品，但某些谷物可能被认为是健康食品，而另一些则是含糖食品。

使用这种方法，您可以快速开始制作这样的表格：

```
Item         | Category
-------------+------------
Banana       | Breakfast
Banana       | Quick
Banana       | Fruit
Banana       | Healthy
Museli       | Breakfast
Museli       | Healthy
Sugar Puffs  | Breakfast
Sugar Puffs  | Treat
Kiwi Fruit   | Fruit
Kiwi Fruit   | Healtyh
Kiwi Fruit   | Dessert
Milk         | Breakfast 
```

通过像这样的简单查找，您可以根据这些分组轻松找到要推荐的好项目。

假设某人的篮子里有香蕉、Museli 和糖泡芙。

那是三份早餐，两份健康，一份不是那么多。

建议牛奶，因为它匹配所有三个。没有冲动购买？再试一次，扔一个猕猴桃。等等等等。

这里的想法是匹配许多不同类别的项目（尤其是那些可能不直接出现的项目），并使用这些计数为您的客户推荐最好的项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-01T12:11:27.930

您可能会喜欢*非负矩阵分解*算法，它可以完全满足您的需求（除了 Neville K 提到的东西）。购买杂货的数据库表将是分解的矩阵。一个因素是包含人们一起购买的东西的矩阵。该矩阵将比您将每个杂货店与所有其他杂货店进行比较的矩阵小得多。它会自动找到组合在一起的杂货“组”，例如 Fluffeh 建议的类别，您会自动找到这些。执行步骤：

1.  每天或每周：在购买的杂货表上运行分解以找到新的“趋势”。保存因子矩阵。
2.  如果有新的购物车到达：使用购物车作为参数调用求解器，您将获得一个包含非常适合的产品的购物车。建议尚未在购物车中的东西。

有人已经提到了《*编程集体智能*》一书。这是一个好的开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-01T10:57:28.490

1 - categorize each product as 3 layered categorization (Type/function/price) as example so when a specific product selected, u can ignore all other categories this will save too much time and effort, then u can select random products from the same (类型/功能/价格）放入您的建议框。

这是如果您不想陷入理论机器智能或复杂算法编码的麻烦中。

祝你今天过得愉快 ：）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-05T19:17:00.457

就像上面每个人所说的那样，完成这项工作的关键是实施

*“x 个用户”还购买了“y 个项目”*

基本上，您需要做的是在现有数据库中试验更多的表行和列，或者链接新的，以保留有关人们查看的产品的统计数据。**您需要的一个非常**重要的列是评分或喜欢（不是 Facebook 喜欢）

您将需要新表，例如：

*   朋友表（将 user_ID 链接在一起形成“朋友”）
*   Like 表（将链接 Friends 表和 Product 表以获取“匹配”产品）
*   统计表（将链接到 Like 表和 Product 表）

您还需要使用额外的列更新现有表，例如：

*   Product_table 每个产品的平均评级（0-5/0-10/0-100 或类似 0/1）

如果**用户 x**和**用户 y**是朋友，他们的 ID 将在 Friends 表中匹配。Like 表将采用一个产品，其中**两个用户是朋友**，并且喜欢**产品 z**，其中一个：（*评分 0-5/0-10/0-100；喜欢 0/1）*您决定哪种方法。

当一个产品被喜欢/评分时，它的 ID 将使用 +X 或 -X 更新特定列名称产品评分，具体取决于它的评分或喜欢。如果产品被评分或喜欢，您还需要确定平均正面。一个例子是 50% 的评分和 100 个喜欢的点赞。

完成所有这些后，当用户 x 购买产品时，您可以匹配以查看是否：

*   用户有朋友
*   用户的朋友也购买了产品 y
*   朋友对产品 y 的评分/喜欢是多少
*   用户 x 的朋友评价高或喜欢哪些其他产品
*   用户 x 的朋友评价差或不喜欢哪些其他产品

您可以做的不仅仅是推荐产品。只需一点点努力，您就可以与人们及其朋友达成热门交易。新产品出现在市场上，与产品 z 一样，只有更好。如果 X 人和他们所有的朋友都喜欢产品 z，他们可能会喜欢并购买新产品。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-03T14:00:37.763

我认为最好的方法是使用“标签模式”。例如：

```
products Table:
=================================
product_id
product_name

tags Table:
=================================
tag_id
tag_name

tags_products Table:
=================================
id_product
id_tag

products registry example:
=================================
1 | Beer
2 | Chips
3 | Cake

tags registry example:
=================================
1 | beer
2 | chips
3 | cake

tags_products registry example:
=================================
1 | 2
1 | 3
2 | 1
2 | 3
3 | 1 
```

然后，您可以关联所有您想要的内容并轻松进行查询:)

要开心。

问候。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-28T05:34:00.503

有两种基本方法可以做到这一点：

1.  手动将数据库中的项目相互关联（耗时但灵活）。
2.  根据过去的购买情况自动确定其他人购买的物品。

看起来你倾向于后者。我为一个销售各种商品并根据其他客户过去购买的商品推荐相关商品的网站写了类似的东西。这是我使用的查询：

```
SELECT items.*, COUNT( cartitems.itemid ) AS c FROM 
items
LEFT JOIN cartitems ON ( cartitems.itemid = items.id )
LEFT JOIN carts ON ( carts.id = cartitems.cartid )
WHERE (
    carts.id IN (
        /* Every cart with this item: */
        SELECT cartitems.cartid
        FROM cartitems
        WHERE ( cartitems.itemid = 123456 )
    )
        AND
    ( cartitems.itemid != 123456 ) /* Items other than this one */
        AND
    carts.checkedout = TRUE /* Carts that have checked out */
)
GROUP BY cartitems.itemid
ORDER BY c DESC
LIMIT 5 
```

此示例假设他们正在查看的项目的 id 为 123456。“购物车”表包含过去的购买记录。“cartitems”表包含过去购买的单个项目。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-27T22:17:15.180

您可以使用人工神经网络来学习根据以前的购买来组合不同的产品。

以下是有关该主题的两个资源：

[http://en.wikipedia.org/wiki/Artificial_neural_network](http://en.wikipedia.org/wiki/Artificial_neural_network)

[http://www.ai-junkie.com/ann/evolved/nnt1.html](http://www.ai-junkie.com/ann/evolved/nnt1.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-29T22:37:47.503

在为您的问题寻找有意义的答案时，我偶然发现了这份文件：

[分析消费者购买行为的主题跟踪模型](http://ijcai.org/papers09/Papers/IJCAI09-239.pdf)

我只阅读了文档的一部分，但看起来它可能是您问题的理论答案。我希望它有所帮助。

# php - 将球员推进到下一场比赛 - 锦标赛括号（需要一些逻辑）

> ID：12150313
> 
> 赞同：1
> 
> 时间：2012-08-27T22:08:42.473
> 
> 标签：php, javascript, html, logic

我很难想出一个合乎逻辑的方法来让球员在我的锦标赛中进入一场新的比赛。你可以在这里看到这个例子：http: [//www.stickyflames.com/brackets.php?id=3](http://www.stickyflames.com/brackets.php?id=3)

比赛从 1 到参加比赛的玩家人数。（在示例中为 1-8）。使用问题的第一部分来查看我的比赛是如何设置的：[如何逐轮确定树中的元素（锦标赛括号）？](https://stackoverflow.com/questions/8625052/how-to-determinate-round-by-element-in-tree-tournament-brackets)

下面是一个要演示的场景：Example1 赢得了他的比赛，所以他被扔到了第 5 场比赛的第 1 场。而 Example2 赢得了他的比赛，并进入了第 5 场比赛的第 2 场比赛。另一方面，Example3 和 Example4 被放入了 M6 赛位。

你们中有人知道一些数学算法可以计算出他们应该在哪里结束比赛吗？（插槽可以使用模数确定，所以不用担心）

谢谢一堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:36:28.597

编辑：这是他正在寻找的答案。要根据匹配计算回合数：

```
Math.round(match# / 2) + Round-1-match-count 
```

很高兴你能自己解决：]

另一种看待它的方式：

让我们在这里重新设计问题。现在看起来你正在适应这种树

```
1 
      5       
2
          7
3 
      6  
4 
```

类似的事情，你有点想要一个算法，它将得到 1/2 到 5、3/4 到 6 等。我敢打赌你可以为此制定一个公式，但它可能比必要的要复杂一些。如果你想一想，1/2 永远不必输入 6，3/4 永远不必输入 5，等等。事实上，我认为这样看会更容易、更准确：

```
0a 
      2a       
1a
          3a
0b 
      2b  
1b 
```

我知道你的代码现在是如何格式化的，但如果你想区分它们，你可以做 a's 和 b's 。

现在向上移动的算法只是

```
if (spot == 0) { 
    spot=spot+2;     //we'll move it to the next because 0 is the only exception
} else {             //if odd  
    spot=spot+1;     //ideally we only need to add one to move to the next bracket
} 
```

您只能使用`parseInt`获取号码。可是等等！因为它们是相同的编号，它如何知道要去哪个插槽？这就是我们可以使用字母的原因。字符串最酷的地方在于，它们只是串在一起的字符数组。例子：

```
var word = "Hello";
word[0] = "H"; 
```

所以你可以通过这样做来访问这封信，`spot[1]`这样你就可以确保a's坚持a's，b's坚持b's。希望这可以帮助。

哦，还有最后一件事。您可能想知道 3a 怎么样？那里没有b。好吧，我不完全确定你是否想要一封信，但如果你确实想要它，你可以制作你的代码来查看 ab 是否存在。如果没有，则将其放入 a 中，因为这是它唯一可以去的地方。

# java - 带有时间戳的 Eclipse 调试输出文件

> ID：12150315
> 
> 赞同：4
> 
> 时间：2012-08-27T22:08:47.060
> 
> 标签：java, eclipse, debugging, console

在 Eclipse 调试/运行 Java 应用程序中是否可以将标准输出定向到名称中具有生成时间戳的文件？

目前，我将输出发送到文本文件（例如 server.log），然后它被覆盖或附加（如果我设置了复选框）。但是，我想知道是否有办法在配置中包含时间戳，以便每次使用生成的名称和当前时间（以毫秒为单位）创建日志文件......例如 server_1346105152004.log ？我想保留每个日志，并且每次重新启动时都会创建一个具有不同名称的新日志。

有没有人这样做？

请注意：我不是在寻找完成此任务的日志框架，我目前在不同的应用程序上使用多个框架来完成此任务。我只是想知道这是否可以在 Eclipse 运行/调试菜单中实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-13T07:04:48.773

错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=384844](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384844)现已修复。**现在可以使用 eclipse ${current_date}**变量将 eclipse 控制台输出重定向到带有时间戳的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:22:37.103

这是大多数 Java 日志框架为您所做的。使用标准输出进行日志记录的想法非常陈旧。我个人最喜欢的日志框架是[slf4j](http://www.slf4j.org/)，但[log4j](http://logging.apache.org/log4j)和[logback](http://logback.qos.ch/)也很流行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:12:33.530

是的。您需要做的就是创建一个时间戳并在开始记录时检查它。如果一个日志晚于另一个，则创建新文件，否则覆盖。

# php - php rawurldecode 不会产生相同的字符串传递给 rawurlencode

> ID：12150319
> 
> 赞同：1
> 
> 时间：2012-08-27T22:09:05.500
> 
> 标签：php, codeigniter

我需要能够在我的站点 URL 的 URI 段中包含空格和括号（该段用于 DB 查询）。所以，我`rawurlencode()`是一个字符串，然后`rawurldecode()`是接收页面中的同一个字符串，但它并不完全相同。空格很好，但括号留在其十六进制字符代码中。这完全搞乱了我的数据库查询。知道为什么`rawurldecode`不生成传递给的 EXACT 字符串`rawurlencode()`吗？

原始字符串 = 康普顿社区学院 (CA)

编码字符串 =

```
 Compton%20Community%20College%20%28CA%29 
```

解码字符串的 vardump 是

```
 string(38) "Compton Community College (CA)" 
```

在查看页面源

```
 "Compton Community College &#40;CA&#41;" 
```

*编辑*

好吧，显然这可能是 Codeigniter 的事情（我正在使用）。编码

```
<a href='<?php echo site_url('college/'.rawurlencode($player['college'])); ?>'> 
```

产生正确的网址`http://localhost/ff/index.php/college/Compton%20Community%20College%20%28CA%29`

最终的 URI 段在以下函数中作为参数接收

```
function view_college($college = FALSE)
{
    if($college === FALSE)
    {//no college provided
        redirect('');
    }
    $college = rawurldecode($college); 
```

并且此时字符串已经是上面显示的形式。所以也许我搞砸了，或者只是不能指望 CI 正确传递字符串。:-( 想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:11:29.860

如果您不想使用 ID（可能出于 SEO 原因），您可以向 db - web url 添加另一个字段，并编写大学名称的网络安全版本...在您的示例中，它可能类似于**Compton-Community-College-CA**甚至小写。

完整网址：

```
http://localhost/ff/index.php/college/Compton-Community-College-CA 
```

[CodeIgniter 的 URL Helper](http://codeigniter.com/user_guide/helpers/url_helper.html)有一个很好的功能：**url_title()**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:03:29.423

**不 不 不。不要那样做。多么令人头疼！**

将你所有的大学都放在一个数据库中，并使用一个自动递增的整数`id`列来钻取它的内容：

如果你`<base>`在里面放一个 HTML 元素`<head>`来定义你的根：

`<base href="http://localhost/yourapp/">`

然后您可以非常简单地编写它：

`<a href='college/<?= $id;?>'><?= $name;?></a>`

本质上将呈现如下行为的代码：

`<a href='http://localhost/yourapp/college/5'>Some Community College</a>`

* * *

**更新 1：**在@Frank Farmer 发表评论后，我建议保留自动递增`id`字段，但在 URL 中使用它收回。相反，以编程方式生成一个单独的字母数字 SEOid 并将其用于搜索引擎优化。相同的基本链接结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T20:16:20.293

有点晚了，但发生在我身上，我找到了这个解决方案。

问题出在CI 的**URI**类的**_filter_uri**函数中。这就是他们在该功能中所做的：

 **```
// Convert programatic characters to entities
$bad    = array('$',        '(',        ')',        '%28',      '%29');
$good   = array('&#36;',    '&#40;',    '&#41;',    '&#40;',    '&#41;');

return str_replace($bad, $good, $str); 
```

所以你必须反转它，然后应用**rawurldecode**：

```
function view_college($college = FALSE)
{
   if($college === FALSE)
   {//no college provided
      redirect('');
   }
   $bad = array('&#36;',    '&#40;',    '&#41;',    '&#40;',    '&#41;');
   $good   = array('$',     '(',        ')',        '%28',      '%29');

   $college = str_replace($bad, $good, $college);
   $college = rawurldecode($college); 
```**

# javascript - 在移动 Safari 中禁用同源策略

> ID：12150320
> 
> 赞同：17
> 
> 时间：2012-08-27T22:09:25.500
> 
> 标签：javascript, html, ipad, mobile-safari, same-origin-policy

我有一个最初为在某些汽车上运行而编写的 HTML5/JavaScript 应用程序。基本上，我需要将我的应用程序设置为在浏览器中运行，以便向客户进行简单的演示。

我正在使用 jQuery .ajax，由于同源策略而导致问题。我找到了很多在桌面浏览器中禁用此功能的方法，但在移动浏览器中却没有。

我的目标是在 iPad 上的 Mobile Safari 中演示该应用程序。有什么方法可以暂时禁用 iPad 上的同源策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-26T13:01:15.800

我在煎茶应用程序中遇到了同样的问题。我通过设置我的 javascript ajax 调用的基本路径来解决，例如：

```
var BASEPATH = 'http://192.168.1.200/myapp';

$.ajax({
  url: BASEPATH+'/someaction'
}); 
```

从手机上我访问它`http://192.168.1.200/myapp`

我的问题是，我只能通过 IP 访问移动设备，但 ajax 调用指向本地主机。

希望这个技巧有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T09:48:41.043

您需要运行 Web 服务器，而不是文件协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T08:23:37.153

尝试在您的 ajax 调用中使用 JSONP。它将绕过同源策略。

[http://learn.jquery.com/ajax/working-with-jsonp/](http://learn.jquery.com/ajax/working-with-jsonp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T14:49:10.577

基本上，你需要一个标题。

将此代码放在您要向其发送跨域请求的页面顶部。

```
<?php header("Access-Control-Allow-Origin: *"); ?> 
```

请注意 *，因为这允许任何网站向发送该标头的页面发送请求。

* 可以替换为域，例如 example.com、example.net。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-23T03:57:42.503

如果您使用对公共代理的 ajax 调用，它可以在 Javascript 中实现，该代理基本上删除了相同的原始标头。或者您可以编写一个 php curl 获取页面，在其中调用使用 ajax。有关这方面的代码，请查看此博文：

[http://thewebtimes.tumblr.com/post/90549614884/access-forbidden-webpages-with-javascript](http://thewebtimes.tumblr.com/post/90549614884/access-forbidden-webpages-with-javascript)

# python - 从另一个程序中杀死一个后台程序

> ID：12150321
> 
> 赞同：1
> 
> 时间：2012-08-27T22:09:30.100
> 
> 标签：python, linux, background

所以我正在运行一个 python 脚本：它在后台启动一个日志程序 做一堆东西。然后停止记录程序。

所以我有两个问题：1）我知道要运行一个后台程序，我可以调用：os.system("test_log_prog &") 但我也可以这样做：os.system("test_echo_prog > logfile.log &") 什么的相等的？

2) 如何关闭 test_echo_prog？对于该程序，我使用的是 pkill "test_log_prog" 但由于某种原因，它在使用 > logfile.log 时不起作用.....

提前致谢！

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:20:13.013

你可以使用 Python 的 os.kill 通过它的 pid 杀死一个进程，向它发送一个像 SIGTERM 或 SIGINT 一样的任意信号。如果它不会死，请尝试 SIGKILL。

您可以使用 pidof 程序查找进程的 pid，或者如果您使用 subprocess.Popen，您可以从 popen 对象中获取 pid，而无需生成另一个子程序。os.system 不再受到青睐，至少与 subprocess.Popen 相比没有。

# c# - 线段构造函数中的布尔值

> ID：12150325
> 
> 赞同：0
> 
> 时间：2012-08-27T22:09:59.540
> 
> 标签：c#, wpf

MSDN 将[LineSegment](http://msdn.microsoft.com/en-us/library/ms602523.aspx) `LingSegment( Point p, bool isStroked)`描述为方法/构造函数*，用于初始化 LineSegment 类的新实例，该实例具有指定的端点和布尔值，用于确定此 LineSegment 是否被描边。*

[http://msdn.microsoft.com/en-us/library/ms602523.aspx](http://msdn.microsoft.com/en-us/library/ms602523.aspx)

当线段的绘制几乎完成时，我正在使用它...意思是创建了点 A，现在必须创建结束点，这使得它但是将布尔参数更改为 false 或 true (isStroked) 不会产生任何效果线条外观的变化。

isStroked 参数到底是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:43:09.460

它确定[PathSegment.IsStroked](http://msdn.microsoft.com/en-us/library/system.windows.media.pathsegment.isstroked.aspx)属性。

> 当您在 PathFigure 中的描边和非描边 PathSegment 部分之间切换时，它被认为与 Pen 的破折号相同。Pen 对象的 DashCap 属性确定描边 PathSegment 对象末端的形状。

因此，基本上，如果您的 LineSegment 是较大路径的一部分，则 IsStroked 确定它是虚线的绘制部分还是未绘制部分。

# java - 奇怪的 java.lang.ClassCastException 错误

> ID：12150326
> 
> 赞同：3
> 
> 时间：2012-08-27T22:10:04.263
> 
> 标签：java, netbeans-7, classcastexception

我使用 Java 和 Netbeans 7.2 这是一个简单的 JFrame 形式。它连接到 SQLite 数据库，从一个表中检索所有记录并将其放入 JTable 小部件（表 1）中。它工作正常。

但是，我添加了 4 个文本字段，这些字段应该填充 JTable 中已单击的行的值。

当单击处理程序启动时，它仅在第一个文本字段中插入第一列值，然后弹出错误消息说 (java.lang.ClassCastException)。

我只是不知道哪一行是问题所在。调试器打印有关“无法编译的代码”的错误（我不知道如何使用调试器）。

```
private void Table1MouseClicked(java.awt.event.MouseEvent evt)      {                                    

    try{
        int row = Table1.getSelectedRow();
        String rowId = (Table1.getModel().getValueAt(row, 0).toString());
        String sql = "select * from ljudi where ID='"+rowId+"';";
        pst = conn.prepareStatement(sql);
        rst = pst.executeQuery();

        if(rst.next()){

            String name = rst.getString("ime");
            String surname = rst.getString("prezime");
            String address = rst.getString("adresa");
            String telephone = rst.getString("telefon");

            txt_ime.setText(name);
            txt_prezime.setText(surname);
            txt_adresa.setText(address);
            txt_telefon.setText(telephone);
        }
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null,e);
    }
} 
```

我什至注释了方法中的所有代码，只要我单击表格行，输出窗口就会显示错误消息。

```
run:
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException
at java.lang.Class.cast(Class.java:2990)
at org.jdesktop.beansbinding.Binding.convertForward(Binding.java:1312)
at org.jdesktop.beansbinding.Binding.getSourceValueForTarget(Binding.java:844)
at org.jdesktop.beansbinding.Binding.refreshUnmanaged(Binding.java:1222)
at org.jdesktop.beansbinding.Binding.refresh(Binding.java:1207)
at org.jdesktop.beansbinding.AutoBinding.tryRefreshThenSave(AutoBinding.java:162)
at org.jdesktop.beansbinding.AutoBinding.sourceChangedImpl(AutoBinding.java:227)
at org.jdesktop.beansbinding.Binding.sourceChanged(Binding.java:1411)
at org.jdesktop.beansbinding.Binding.access$1200(Binding.java:38)
at org.jdesktop.beansbinding.Binding$PSL.propertyStateChanged(Binding.java:1618)
at org.jdesktop.beansbinding.PropertyHelper.firePropertyStateChange(PropertyHelper.java:212)
at org.jdesktop.beansbinding.ELProperty.notifyListeners(ELProperty.java:688)
at org.jdesktop.beansbinding.ELProperty.access$800(ELProperty.java:155)
at org.jdesktop.beansbinding.ELProperty$SourceEntry.processSourceChanged(ELProperty.java:312)
at org.jdesktop.beansbinding.ELProperty$SourceEntry.sourceChanged(ELProperty.java:326)
at org.jdesktop.beansbinding.ELProperty$SourceEntry.propertyChange(ELProperty.java:333)
at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:339)
at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:276)
at org.jdesktop.swingbinding.adapters.BeanAdapterBase.firePropertyChange(BeanAdapterBase.java:112)
at org.jdesktop.swingbinding.adapters.JTableAdapterProvider$Adapter$Handler.tableSelectionChanged(JTableAdapterProvider.java:81)
at org.jdesktop.swingbinding.adapters.JTableAdapterProvider$Adapter$Handler.valueChanged(JTableAdapterProvider.java:91)
at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:167)
at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:147)
at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:194)
at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:388)
at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:398)
at javax.swing.DefaultListSelectionModel.setSelectionInterval(DefaultListSelectionModel.java:442)
at javax.swing.JTable.changeSelectionModel(JTable.java:2352)
at javax.swing.JTable.changeSelection(JTable.java:2421)
at javax.swing.plaf.basic.BasicTableUI$Handler.adjustSelection(BasicTableUI.java:1085)
at javax.swing.plaf.basic.BasicTableUI$Handler.mousePressed(BasicTableUI.java:1008)
at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:263)
at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:262)
at java.awt.Component.processMouseEvent(Component.java:6264)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6032)
at java.awt.Container.processEvent(Container.java:2041)
at java.awt.Component.dispatchEventImpl(Component.java:4630)
at java.awt.Container.dispatchEventImpl(Container.java:2099)
at java.awt.Component.dispatchEvent(Component.java:4460)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4235)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
at java.awt.Container.dispatchEventImpl(Container.java:2085)
at java.awt.Window.dispatchEventImpl(Window.java:2478)
at java.awt.Component.dispatchEvent(Component.java:4460)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
BUILD SUCCESSFUL (total time: 8 seconds) 
```

任何帮助深表感谢。

谢谢

PS 如您所问，完整的堆栈跟踪在这里，我想就是这样。

PPS我以不同的方式解决了它：

```
try 
    {
    int pozicija = jTable1.getSelectedRow();

    String rowId = jTable1.getModel().getValueAt(pozicija, 0).toString();

    String ime = jTable1.getModel().getValueAt(pozicija,1).toString();

    String prezime = jTable1.getModel().getValueAt(pozicija,2).toString();

    String adresa = jTable1.getModel().getValueAt(pozicija,3).toString();

    String telefon = jTable1.getModel().getValueAt(pozicija,4).toString();

    jTextField1.setText(ime);
    jTextField2.setText(prezime);
    jTextField3.setText(adresa);
    jTextField4.setText(telefon);
    jLabel2.setText(rowId);
    }
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null, e);
    } 
```

我没有在数据库上运行查询，而是使用了 jTable 模型中的相同字段值。工作正常，这样做的目的是填充文本字段以编辑记录。

我认为没有必要再次查询数据库？

顺便提一句。我在“ProgrammingKnowledge”的 youtube 教程中看到了第一个示例。它解释了许多基本的东西。

谢谢你的想法。

# objective-c - ARC/MRR - 是设置还是什么？

> ID：12150332
> 
> 赞同：0
> 
> 时间：2012-08-27T22:10:42.763
> 
> 标签：objective-c

抱歉，这可能是一个非常糟糕的问题。我刚开始学习 Obj-C，我不明白这一点：

我是否在某个地方选择是否使用 ARC/MRR/... 进行内存管理？它是一个设置还是取决于我如何编写我的代码？

请像我 5 一样解释 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:14:12.467

这是一个构建设置。在 Xcode 中，单击您的项目文件，选择 Build Settings，搜索`arc`：

![在此处输入图像描述](../Images/5ea1dea8e96a401c91c16b3de9f69ccd.png)

有关如何使用或不使用 ARC 编写代码的详细信息，请参阅[文档](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。这不是一个简短的答案可以概括的东西。您可能还想查看关于 ARC: [Introduction to ARC](https://developer.apple.com/videos/wwdc/2011/?id=323)的 WWDC '11 和 '12 视频。

# python - 带有电话正则表达式的 Python“无效语法错误”

> ID：12150334
> 
> 赞同：0
> 
> 时间：2012-08-27T22:10:47.870
> 
> 标签：python

我正在尝试根据[另一个堆栈溢出问题中提供的模式创建一个电话正则表达式。](https://stackoverflow.com/a/123666/773210)

这是我用来在 Python 中创建它的语法：

```
def phoneRegex = r'^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$' 
```

但是，在运行此代码时出现错误：

```
^ SyntaxError: invalid syntax 
```

我究竟做错了什么？我需要以某种方式逃避角色吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T22:12:45.327

这是`def`声明。把它拿出来。你`def`用来定义函数。那不是一个函数，那是一个字符串的赋值。

# date - Informix，过程，将字符串转换为时间

> ID：12150336
> 
> 赞同：1
> 
> 时间：2012-08-27T22:11:04.107
> 
> 标签：date, stored-procedures, time, informix

我想从 c# 调用下面的 informix sp，但无法编译它。我想向它传递一个像'2012-11-22'这样的字符串和两次像'08:15:00'这样的字符串，并将它们转换为一个日期和两个日期时间，但我似乎找不到正确的informix函数。我花了一整天的时间试图弄清楚这一点，感谢任何帮助。

不确定下面的代码是否会编译，因为我必须删除一些敏感部分，但我希望它足以给你这个想法。

我认为 TO_DATE 函数不正确

```
create procedure up_myproc(
calndr_dt CHAR(15)
, actvty_typ CHAR(5)
, actvty_start_tm CHAR(15)
, actvty_end_tm CHAR(15)
, actvty_cap SMALLINT
)

DEFINE calendar_activity_id int;
DEFINE activity_details_id int;

-- calendar activity
insert into caa61140 (
caa61140001
, caa61140004
, caa61140005
)
values (
0
, org_id
, DATE(calndr_dt)
);

LET calendar_activity_id = DBINFO('sqlca.sqlerrd1');

-- activity details
insert into caa61240 (
caa61240001
, caa61240002
, caa61240003
, caa61240004
)
values (
0
,calendar_activity_id
, TO_DATE(actvty_start_tm, "%H:%M" )
, TO_DATE (actvty_end_tm, "%H:%M" )
);

LET activity_details_id = DBINFO('sqlca.sqlerrd1');

-- calendar matter
insert into caa61340(caa61340001
, caa61340002)
SELECT activity_details_id
, caa60840003 matter_typ
  FROM caa60840 -- valid matter types;
  WHERE caa60840001=org_id
  AND caa60840002=actvty_typ;

end procedure; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:11:08.857

我解决这个问题的方法是使用 Informix 的隐式转换功能：

```
CREATE PROCEDURE up_myproc(
    calndr_dt       DATETIME YEAR TO DAY,
    actvty_typ      CHAR(5),
    actvty_start_tm INTERVAL HOUR TO SECOND,
    actvty_end_tm   INTERVAL HOUR TO SECOND,  
    actvty_cap      SMALLINT)

    DEFINE tm_1 DATETIME YEAR TO SECOND;
    DEFINE tm_2 DATETIME YEAR TO SECOND;

    LET tm_1 = EXTEND(clndr_dt, YEAR TO SECOND) + actvty_start_tm;
    LET tm_2 = EXTEND(clndr_dt, YEAR TO SECOND) + actvty_end_tm;

    ... 
```

这里的关键决定是将时间视为 INTERVAL HOUR TO MINUTE 而不是 DATETIME HOUR TO MINUTE。如果您有正式的 DATETIME HOUR TO MINUTE 参数，则需要转换为 INTERVAL 以便进行算术运算。您可以添加 DATETIME 和 INTERVAL；结果是一个日期时间。您可以减去两个 DATETIME 值；结果是一个间隔。您可以添加或减去两个 INTERVAL 值，结果是一个 INTERVAL。但仅此而已。因此，要获得从 DATETIME HOUR TO SECOND 的 INTERVAL，您需要减去 DATETIME(00:00:00) HOUR TO SECOND。

你可以用字符串参数调用这个修改后的函数，就像你现在所做的那样。

如果你不能忍受这样改变界面，那么：

```
CREATE PROCEDURE up_myproc(
    calndr_dt_str       DATETIME YEAR TO DAY,
    actvty_typ          CHAR(5),
    actvty_start_tm_str CHAR(15),
    actvty_end_tm_str   CHAR(15),  
    actvty_cap          SMALLINT)

    DEFINE calndr_dt       DATETIME YEAR TO DAY;
    DEFINE actvty_start_tm INTERVAL HOUR TO SECOND;
    DEFINE actvty_end_tm   INTERVAL HOUR TO SECOND;  

    DEFINE tm_1 DATETIME YEAR TO SECOND;
    DEFINE tm_2 DATETIME YEAR TO SECOND;

    LET actvty_dt       = actvty_dt_str
    LET actvty_start_tm = actvty_start_tm_str;
    LET actvty_end_tm   = actvty_end_tm_str;
    LET tm_1            = EXTEND(clndr_dt, YEAR TO SECOND) + actvty_start_tm;
    LET tm_2            = EXTEND(clndr_dt, YEAR TO SECOND) + actvty_end_tm;

    ... 
```

这仍然依赖于转换，但将它们隐藏在过程主体中并使它们显式。

*未经测试的代码；我可能忽略了一些东西。*

# javascript - 动态高度/最大高度和溢出

> ID：12150340
> 
> 赞同：0
> 
> 时间：2012-08-27T22:11:48.097
> 
> 标签：javascript, jquery, css

我正在为我的应用程序创建一个任务管理器，并且我正在尝试计算小部件的高度，然后在满足要求时执行某些操作。基本上我想得到窗口的高度减去另一个数字来获得任务小部件的最大高度（已经设置了最小高度）。然后我想动态获取 div 的实际高度，如果它等于最大高度，我想更改一些 css 属性。我正在使用 jquery 1.5.2 来执行此操作。这是我所拥有的...

```
$(document).ready(function() {
//Get the height for #tasks
var tH = Math.round($(window).height() - 463);
$('#tasks').css('height', tH); //Make it the max height
var ti = Math.round($("#tasks").height()); //Get actual height of #tasks

if(tH==ti){ // If #tasks actual height is equal to the max-height than do...
    //alert('true');
    $('.taskItems').css('width', '172px');
    $('.tT, .tD').css('width', '135px');
    console.debug(ti + ' ' + tH);
}else{
    alert(tH + ' ' + ti); 
    console.debug(ti + ' ' + tH);
}
}); 
```

只要**"alert('true')"**首先触发并且**"max-height"**更改为**"height"** ，这效果很好。

当警报被注释掉时，if 语句停止工作。

当。。。的时候

> $("#tasks").css('height', tH) 改为 $("#tasks").css('max-height', tH)

价值观非常糟糕。示例：78/130。CSS如下...

```
#tasks {
    border:1px solid #D1D1D1;
    border-top:none;
    color:rgb(82,124,149);
    display:inline-block;
    font-size:12px;
    margin:0px 0px 0px 1px;
    overflow:auto;
    width:194px;
} 
```

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:08:31.223

每次调整窗口大小时，我都会使用以下内容：

```
jQuery(document).ready(function () {

    jQuery(window).resize(function () {
        //alert("window changed");
        resizeDivs();
    });
});

function resizeDivs() {
    var clientWidth = jQuery(window).width();
    var clientHeight = jQuery(window).height();
    var newHeight = 100;
    var newWidth = 100;

    var firstDatasegment = jQuery(".datasegment")[0];

    if (!jQuery(firstDatasegment).width()) {
        currentWidth = jQuery(firstDatasegment).clientWidth;
        newHeight = currentWidth - (currentWidth / 7);
        newWidth = currentWidth;
    }
    else {
        //currentWidth = jQuery(".datasegment")[0].css("width");
        currentWidth = jQuery(firstDatasegment).width();
        newHeight = currentWidth - (currentWidth / 7);
        newWidth = currentWidth;
    }

    jQuery(".datasegment").height(newHeight);
    jQuery(".sidemenu").height(clientHeight);
    jQuery(".maindatacontent").height(clientHeight);
    jQuery(".text-glow").css("font-size", (clientWidth / 50) + "px");
    jQuery(".hovermenuicon .menudesc").not('.bucketText').css("font-size", (clientWidth / 50) + "px");
    jQuery("td.menudesc span:first-child").not('.bucketText').css("font-size", (clientWidth / 50) + "px");
    jQuery(".sidemenudesc").css("font-size", (clientWidth / 80) + "px");
    jQuery(".datavalue").css("font-size", (clientWidth / 80) + "px");
    jQuery(".mainmenuitem").css("font-size", (clientWidth / 50) + "px");
    jQuery(".qireportgridview table").css("font-size", (clientWidth / 80) + "px");
    jQuery(".scrolldivbig").height(clientHeight);
} 
```

为了让我为您提供更多帮助，我需要查看您最基本的 html 以使其正常工作，然后我将使用工作示例相应地更改代码。

hth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:12:17.673

1.  你也可以`$('').height()`用作二传手！-->`$('#tasks').height(th);`

2.  使用 $('').css('height': myVal) 时请记住，您需要指定一个单位（例如 px）。你现在不这样做。

3.  你是什​​么意思

> 当警报被注释掉时，if 语句停止工作。

当您删除警报时，您的 else-branch 没有做任何事情。

# c++ - 为什么这段代码会产生竞争条件？

> ID：12150342
> 
> 赞同：3
> 
> 时间：2012-08-27T22:12:02.933
> 
> 标签：c++, multithreading, c++11, race-condition

这是我第一次尝试使用`std::future`.

我要同时解析三个不同的文件。三个功能分别做到这一点。称为和。`parseSentences`_ 它们中的每一个都使用一个非常简单的 lambda 函数在单独的线程中启动： ，其中是一个静态变量，函数是我之前命名的三个函数之一。`parseTags``parseLinks``std::async``[]() { parser->function(); }``parser`

```
int parser::start()
{
    int ret = SUCCESS;
    ASSERT( m_output != nullptr );
    static parser * thisParserInstance = this;

    // parsing files
    std::future<int> parseSentence = std::async(std::launch::async, []() { return thisParserInstance->parseSentences(); } );
    std::future<int> parseLinksResult = std::async(std::launch::async, []() { return thisParserInstance->parseLinks(); } );
    std::future<int> parseTagsResult = std::async(std::launch::async, []() { return thisParserInstance->parseTags(); } );

    // retrieving the results
    ret = parseSentence.get();
    const int linksResult = parseLinksResult.get();
    const int tagsResult = parseTagsResult.get();

    if (ret == SUCCESS)
        ret = linksResult == SUCCESS ? tagsResult : linksResult;

    return ret;
} 
```

现在，当我在 gdb 中运行我的程序时，在破坏一个`std::future`局部变量时会发生分段错误。那时有 2 个线程正在运行。线程#1 的调用堆栈在[这里](http://pastebin.com/yrBTDre6)。线程#2 的调用堆栈在[这里](http://pastebin.com/swcqkceF)。

请注意，`this`第一个调用堆栈中的指针为空，导致分段错误。

如果有人有线索，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:17:30.563

这里有一个大问题：

```
static parser * thisParserInstance = this; 
```

这是在您第一次调用该函数时初始化的，然后在以后的调用中保持不变。因此，如果您在一个对象上调用该函数，销毁该对象，然后在第二个对象上调用它，您实际上将处理指向已失效对象的悬空指针。这肯定会产生未定义的行为。

没有理由使用静态变量；lambda 可以捕获`this`并作用于正确的对象。或者更简单地说，正如评论中所建议的，使用可变参数形式`async`绑定`this`到成员函数：

```
std::async(std::launch::async, &parser::parseSentences, this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:36:43.690

对不起大家。

这是解决方案：[C++ 0x 的 gcc 实验实现上的 std::future 异常](https://stackoverflow.com/questions/3930700/stdfuture-exception-on-gcc-experimental-implementation-of-c0x)

与 链接后`-lpthread`，错误消失了。不过，感谢您的其他评论，它们非常有帮助。

# java - 无法弄清楚如何将 getNewArrayFrom 方法与 Scanner 输入一起使用？

> ID：12150347
> 
> 赞同：0
> 
> 时间：2012-08-27T22:12:42.457
> 
> 标签：java, arrays, string, arraylist

我不知道我是否含糊不清，但我的主要目标是创建一个程序，在该程序中它要求用户输入一组单词（任何给定数量），然后告诉我哪个是第一个和最后一个在字母表中，最短和最长。到目前为止，我有这个：

```
public static void main(String[] args)
{
    Scanner Keyboard = new Scanner(System.in);

    double[] Words = getNewArrayFrom(Keyboard);
    displayList(Words);

    int choice = 1;
    while(choice > 0)
    {
        System.out.println("What would you like to do?");
        System.out.println("1) Enter a new list of up to over 9000 words.");
        System.out.println("2) Find the shortest, longest, and first and last alphabetically from the list.");
        System.out.println("0) Exit the Program");

        choice = Integer.parseInt(Keyboard.nextLine());

        if(choice < 0 || choice > 2)
        {
            System.out.println("Invalid Choice Number " + choice);
            choice = 1;
            continue;
        }
        if(choice == 1)
        {
            //Enter the Words one at a time
            System.out.println("Enter each of the words.");
            for(int i = 0; i < 9001; i++)
            {
                System.out.print((i+1) + "> ");
                Words = Keyboard.nextLine();
                Words = getNewArrayFrom(Keyboard);
            }
        }
        else if(choice == 2)
        {

        }
    }
} 
```

}

对不起，我不知道我在做什么。我都是凭记忆写的，我真的不知道该怎么办。

我的主要观点只是试图允许 getNewArrayFrom() 方法从输入字符串创建一个数组（如果选择）。如果您至少可以指出如何让它打印最短和最长以及第一个和最后一个字母单词的方式或方向，那么我将永远感激不尽！

对不起，英语不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:55:23.153

由于这是伪作业，我将省略细节。

我将假设所有用户输入都来自一行，即，他们提供一个输入字符串，例如`apple banana orange grape`. 我还将假设每个单词都用空格分隔。

我会使用 Scanner 读取单行输入，查看[nextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)。然后我会用空格分割从扫描仪返回的行，您可以使用循环手动执行此操作，`indexOf(...)`并将`substring(...)`其存储在您创建的数组中，或者我们可以使用[split()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)来获得内置的 Java 字符串函数为我们处理这部分。

如果你使用`some_str.split(...)`，它会自动给我们一个 String[] 数组，所以你可以根据需要返回它。

# javascript - Jquery“对象没有方法”

> ID：12150351
> 
> 赞同：1
> 
> 时间：2012-08-27T22:12:49.397
> 
> 标签：javascript, jquery, html, jquery-plugins

我注意到这个问题已经回答了与各种开发人员 jquery 安装有关的问题，但是我遇到了这个错误，我试图找出是什么冲突/导致我的脚本中出现这个错误消息。我已经尝试在我的网站上安装一个 jQuery 轮播，我以前在以前的网站上使用过，但是我的代码中的某些东西阻止了这个轮播工作。这是否与 HTML 5 样板原型有关？

有没有人可以指出这个问题？

[点击这里](http://iamnatesmithen.com/bodyworks/index.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:15:03.497

您遇到的问题是`jQuery is not defined`因为您在文档末尾加载它，并且它应该是在任何 jQuery 插件之前加载的第一个

换句话说，这两个脚本：

```
<script src="js/vendor/modernizr-2.6.1.min.js"></script>
<script src="js/ResponsiveSlides.js"></script> 
```

必须在之后

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:18:49.877

ResponsiveSlides.js 依赖于 jQuery。这应该在 jQuery 之后加载

将 Modernizr 留在脑海中。根据他们的网站：

> “我们建议将 Modernizr 放在头部的原因有两个：HTML5 Shiv（在 IE 中启用 HTML5 元素）必须在正文之前执行，如果您使用 Modernizr 添加的任何 CSS 类，您将想要防止 FOUC。”

# php - PHPUnit - 模拟相同类型的嵌套对象

> ID：12150353
> 
> 赞同：0
> 
> 时间：2012-08-27T22:12:52.293
> 
> 标签：php, unit-testing, phpunit

假设我有一个 Config 类型的对象，它或多或少地存储了一堆键/值对。如果值是一个数组，它将数组转换为一个新的 Config 实例，将数组的值存储在其中。当然，这可以在多个级别上无限期地进行。

模拟这种类型的对象的最佳方法是什么？我对 PHPUnit 相当陌生，所以很可能存在一个非常简单的解决方案，但目前我不确定如何继续。

根据我目前的经验，创建 Config 的模拟也不会传播到包含的 Config 对象（在我的 __set() 魔术方法中，它基本上是`new self($array)`在到达`$data`.

这是对象应如何表现的示例：

```
$data = array(
    'one' => 'unus',
    'two' => 'duo',
    'three' => array(
        'a' => 'alpha',
        'b' => 'beta'
    )
);

$config = new Config($data);

// I should be able to do this:
echo $config->three->a;          // Outputs "alpha"
echo get_class($config->three);  // Outputs "Config" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:05:32.823

编写测试的问题没有太多上下文，但我的理解是最简单的术语，您希望能够通过“->”导航以达到您想要的值。

研究使用新的 StdClass

例如

```
$config = new StdClass;
$config->three = new StdClass;
$config->three->a = 'alpha'; 
```

# prng - 两个 PRNG 可以用不同的种子产生相同的数字吗？

> ID：12150354
> 
> 赞同：0
> 
> 时间：2012-08-27T22:12:55.527
> 
> 标签：prng

我知道如果您将相同的种子与两个不同的 PRNG 一起使用，您将收到相同的数字序列。有谁知道是否可以用两个不同的种子生成相同的数字？如果是这样，几率是多少？

我对此进行了测试并收到了一些奇怪的结果。如果我有两个相同 PRNG 的实例，并且每次都用两个不同的随机种子播种它们。随机数必须在 0 到 1000 之间。在 10,000,000 次迭代后，我得到相同的数字 1046 次。如果我每次都没有播种它们，我会收到大约相同的次数（1033）。我不明白什么？如果您不每次都重新播种，我认为几率会更大（嗯，也许不是）。就像从两副牌中挑选两张牌一样。如果我不每次都洗牌，我会认为如果我这样做，几率会有所不同。

谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:31:03.557

几率取决于您使用的 PRNG。假设它生成均匀分布的数字并且您的种子是随机选择的*，那么它只是您可以表示的不同数字数量的函数。

*随机意味着与前一个种子无关，也不知道正在使用的算法。

对于 32 位整数，您可以表示 2^32 个不同的数字，因此给定一个整数，另一个足够随机数相同的几率是 1/(2^32)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:29:28.750

这个问题的答案将取决于您使用的是哪个 PRNG。不同的实现有不同的保证。如果你幸运的话，文档会告诉你这些保证是什么。

然而，任何体面的 PRNG 对于任何有效的种子都会有一个很长的周期。所以两个不同的种子产生相同的下一个数字的几率应该很小。（我希望大约为 1/(2^N)，其中 N 是它正在使用的数据类型中的位数。）

最后，我想知道这是否真的是您需要的信息。听起来您对唯一性而不是随机性有某种要求。如果您关心的是唯一性，那么有更好的解决方案。古老的经典是在某个地方保留一个持续增加的计数器，并且持续时间足够长。您还可以使用[GUID](http://en.wikipedia.org/wiki/Universally_unique_identifier) - 许多现代平台都有用于创建它们的库代码。

# apache - 如何获取同一文档 Apache CouchDB 的多个修订版的正文？

> ID：12150355
> 
> 赞同：1
> 
> 时间：2012-08-27T22:12:59.067
> 
> 标签：apache, couchdb, couchapp

此处提出了一个类似的问题[Getting full list of revisions on document level using CouchDB-Python?](https://stackoverflow.com/questions/4966427/getting-full-list-of-revisions-on-document-level-using-couchdb-python) ，但我想做的也是**在一个请求中检索同一文档的每个修订版的正文**。我想有效地建立一个修订列表，同时显示过去的文档正文。

根据 HTTP API：[http://wiki.apache.org/couchdb/HTTP_Document_API](http://wiki.apache.org/couchdb/HTTP_Document_API)，

“您可以使用参数**open_revs=["rev1","re​​v2",...]一次****获取多个修订**的正文，或者您可以使用 open_revs=all 获取所有叶修订（请参阅 Replication_and_conflicts）。JSON 返回一个带有指向文档的“ok”键或指向 rev 字符串的“缺失”键的对象数组”

 **但是，当我使用**AJAX**选项 **open_revs: ["3-9e93308666d43721e80580acaedd149b","2-6a3187f50d51756820f1908eab7fcf3f","1-e9a0482bf9a120bd03fb5ff03cdd2d3d"]**运行查询时，我从 Erlang 服务器返回了一个无效的json请求。

我检查了从数组**revs_info**参数中检索到的修订号，但仍然没有成功。

我在想另一种可能的方法是遍历**rev_info**数组并为每个修订主体重新查询服务器，但这似乎效率太低。

执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:01:41.440

你试过包括论点`include_docs=true`吗？没有看到您提出的请求，所以我无法判断它是否相关，但如果它是查看请求，[这里是它的记录位置](http://wiki.apache.org/couchdb/HTTP_view_API)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T20:06:44.660

参数的值`?open_revs`是 JSON 编码的字符串数组。在您在对另一个答案的评论中给出的示例中，您不包括括号或引号，只包括逗号分隔的 ID。这就是您收到 JSON 错误的原因。

（是的，括号和引号也必须进行 URL 转义！）**

# c# - 从/到子属性 DateTime 映射 DateTime

> ID：12150358
> 
> 赞同：0
> 
> 时间：2012-08-27T22:13:20.083
> 
> 标签：c#, automapper

基本上，我有一个`DateTime`在“表面”上的类，另一个是另一个类的复杂属性中的类的一部分，我想在这些类型`DateTime`之间来回映射......`DateTime`

```
public class AModel {
    DateTime DateFrom { get;set; }
    DateTime DateThru { get;set; }
}  
public class BModel {
    ModelDateCollection DateFromClass { get;set; }
    ModelDateCollection DateThruClass { get;set; }
}  
public class ModelDateCollection {
    DateTime Date { get;set; }
    String Display { get; } // Example Readonly for Date Display
    DateTime FirstOfMonth { get; } // Another Example to extend Complex Class
} 
```

对于我正在使用的地图的初始化：

```
CreateMap<BModel, AModel>()
            .ForMember(d => d.DateFrom, s => s.MapFrom(src => src.DateFromClass.Date)) 
```

而且，如您所见，我正在尝试将 Property 映射`DateFromClass.Date`到 destination `DateFrom`。

我也打算映射到另一个方向：

```
CreateMap<AModel, BModel>()
            .ForMember(d => d.DateFrom, s => s.MapFrom(src => new ModelDateCollection(src.DateFrom))) 
```

根据下面的异常，我无法按原样来回映射这些 DateTime 值。

> 无法将“System.DateTime”类型的对象转换为“ModelDateCollection”类型。-> 尝试将 AModel 映射到 BModel 使用 AModel 到 BModel 的映射配置引发了“AutoMapper.AutoMapperMappingException”类型的异常。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:40:07.053

好的……一切都解决了。事实证明，这个例子有点不对劲，因为我一开始就不确定这个问题。正如您将在我的类定义中看到的那样，DateFrom 和 DateFromClass 共享不同的名称……嗯，在我的示例中，它们实际上具有相同的名称……所以，新的类结构如下：:

```
public class AModel { 
    DateTime DateFrom { get;set; } 
    DateTime DateThru { get;set; } 
}   
public class BModel { 
    ModelDateCollection DateFrom { get;set; } 
    ModelDateCollection DateThru { get;set; } 
}   
public class ModelDateCollection { 
    DateTime Date { get;set; } 
    String Display { get; } // Example Readonly for Date Display 
    DateTime FirstOfMonth { get; } // Another Example to extend Complex Class 
} 
```

这是关键...即使类型不同，Automapper 首先希望从具有相同名称的项目映射到具有相同名称的匹配成员...无论类型如何！因此，痛苦的答案只是重命名属性，如果您要尝试映射...目前 Automapper 在查看引导程序以应用任何自定义逻辑之前不会查看名称和类型。

# java - 将多行发送到mysql数据库

> ID：12150364
> 
> 赞同：0
> 
> 时间：2012-08-27T22:13:37.570
> 
> 标签：java, mysql, rows

所以我想将一个用户发送到一个mysql数据库的列：用户、技能、时间现在，我希望它能够为同一个用户添加多行但有不同的时间等等，我该怎么做? 这是我将其发送到数据库的代码：

```
 public static boolean recentActivity(Player paramPlayer){
    try {
        Statement statement = con.createStatement();
        ResultSet group = statement.executeQuery("SELECT * FROM recentactivity WHERE user = '"+ paramPlayer.getDisplayName() + "'");
        if (!group.next() && !paramPlayer.levelTime.equals(""))
                statement.execute("INSERT INTO `recentactivity`(`user`, `skill`, `time`) VALUES('"+ paramPlayer.getDisplayName() +"', '"+ paramPlayer.levelledSkill +"', '"+ paramPlayer.levelTime +"')");
    } catch (Exception localException) {
        return false;
    }
    return true; 
```

然后我有这个使用它：

```
 java.util.Date dt = new java.util.Date();
    java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat("dd-MMM-yyyy HH:mm:ss");
    String currentTime = sdf.format(dt);
    player.levelledSkill = skill;
    player.levelTime = ""+currentTime+"";
    Hiscores.recentActivity(player); 
```

有什么帮助吗？

架构：

```
CREATE TABLE IF NOT EXISTS recentactivity ( 
    user varchar(255) NOT NULL
    , skill int(11) NOT NULL
    , time varchar(255) NOT NULL
    , PRIMARY KEY (user) 
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:21:42.420

从[文档](http://dev.mysql.com/doc/refman/5.5/en/insert.html)中：

```
INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    {VALUES | VALUE} ({expr | DEFAULT},...),(...),...
    [ ON DUPLICATE KEY UPDATE
        col_name=expr
            [, col_name=expr] ... ] 
```

所以，忽略你不使用的东西......

```
INSERT INTO tbl_name (col_name,...)
    VALUES | VALUE (expr,...),(...),... 
```

只需添加一个逗号和一组新的括号，您就可以添加额外的记录，令人作呕。例如：

```
"INSERT INTO `recentactivity`(`user`, `skill`, `time`) 
    VALUES('"+ paramPlayer.getDisplayName() +"', '"+ paramPlayer.levelledSkill +"', '"+ paramPlayer.levelTime +"')" 
    + ",('"+ paramPlayer2.getDisplayName() +"', '"+ paramPlayer2.levelledSkill +"', '"+ paramPlayer2.levelTime +"')" 
```

或者，您可以使用 StringBuilder 或任何数量的东西来迭代循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:23:31.323

IIUC 您想为同一用户添加多行。

但是，您的代码中有两个地方阻止您这样做。

第一部分是在 java 中：

如果 (!group.next()

它搜索该用户是否已经存在一行，只有在没有时才执行 INSERT。

但是，该代码可以防止发生 SQL 异常。在您的 SQL 模式中，用户是表的主键，因此您不能使用同一用户插入两行。

您应该更改这两个位置（删除主键，删除 !group.next），但首先检查应用程序的其余部分是否仍然可以处理与同一用户相关的多行，因为它似乎被设计为防止这种情况多于允许它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:37:39.250

我认为如果您关闭 AutoCommit 可以做到这一点。

> 自动提交模式意味着当一个语句完成时，该语句上的方法 commit 会被自动调用。自动提交实际上使每个 SQL 语句成为事务。提交发生在语句完成或执行下一条语句时，以先到者为准。对于返回 ResultSet 的语句，当检索到 ResultSet 的最后一行或显式关闭 ResultSet 时，该语句完成。

因此，在创建 ResultSet 的实例后，请编写以下内容：

```
group.AutoCommit(False); 
```

在 AutoCommit 之后编写 SQL 插入语句

完成后，并希望将它们作为一个块调用放入数据库

```
group.commit(); 
```

[关于使用 AutoCommit 的示例](http://blog.maettig.com/2005/04/26/jdbc-and-auto-commit-example)

# .htaccess - .htaccess RewriteRule 阻止目录访问

> ID：12150367
> 
> 赞同：0
> 
> 时间：2012-08-27T22:13:58.053
> 
> 标签：.htaccess, mod-rewrite, redirect, http-redirect

当我添加“虚 URL”功能时，我必须修改我的 .htaccess 文件，该功能允许我的网站成员以 myWebsite/membersName 的形式输入一个 url 并被转发到他们的主页，直到添加虚 URL 功能之前myWebsite/member-profile.php?member_id=123456 的形式

一切正常，除了如果 URL 指向诸如 myWebsite/someDirectory 之类的目录，我将被重定向到我的 .htaccess 文件中指定的错误页面。

我是一名 PHP 程序员，但我对 RewriteRules 或它们的条件不太熟悉。下面我从我的 Linux 服务器的根目录中粘贴了我的整个 .htaccess 文件。有人可以帮我找出问题所在吗？

```
SuPHP_ConfigPath /home/helcupor/public_html
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

#for files, append .php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

#for vanity urls redirect to url2id.php
RewriteCond %{REQUEST_FILENAME} >""
RewriteRule ^([^\.]+)$ url2id.php?vanityName=$1 [L]

AuthUserFile "/home/helcupor/.htpasswds/public_html/passwd"

ErrorDocument 404 /routing.php
#AuthName "/admin/" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:24:21.643

尝试在以下条件下更改此条件`#for vanity urls`：

```
RewriteCond %{REQUEST_FILENAME} >"" 
```

至：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f 
```

您要确保潜在成员名称不是现有资源（目录或文件）。否则，只需提供资源。不确定您要与您所拥有的条件进行比较。`%{REQUEST_FILENAME}`var 仍然是成员名称。

# html - 在 html 根元素的 lang 属性中定义多种语言？

> ID：12150369
> 
> 赞同：36
> 
> 时间：2012-08-27T22:14:16.433
> 
> 标签：html, meta-tags, lang

我想为一个文档确定不止一种语言，因为它有不止一种语言可用。如果我使用：

```
<meta http-equiv="content-language" content="en,de,fr" /> 
```

这不是 W3C 有效的，验证器说我应该在根的`lang`属性中定义它，但是这个属性只支持一种语言：

```
<html lang="en"> 
```

工作，但不是

```
<html lang="de,en,fr"> 
```

那么我应该在哪里定义呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-01-20T23:46:24.813

所有属性只支持一种语言，所以我相信你应该只定义一种语言；应该设置最重要的语言。如果您在一个文档中有多种语言，则无法完成此操作，因此这里是解决您问题的信息：

lang 和 xml:lang 属性不允许您将多种语言分配给单个文档。因此，如果您正在编写具有多种语言的网页，您有两种选择：

1.  使用属性定义主要语言`lang`，然后`lang`在文档中的元素上调用具有属性的次要语言
2.  `lang`根据需要在文档的特定部分定义：

    ```
    <div lang="fr-CA" xml:lang="fr-CA">
    Canadian French content...
    </div>
    <div lang="en-CA" xml:lang="en-CA">
    Canadian English content...
    </div>
    <div lang="nl-NL" xml:lang="nl-NL">
    Netherlands, Dutch content...
    </div> 
    ```

我有一些多语言页面，我确实使用了第二个选项。

您可能想阅读[http://www.w3.org/TR/2007/NOTE-i18n-html-tech-lang-20070412/#ri20060630.133619987](http://www.w3.org/TR/2007/NOTE-i18n-html-tech-lang-20070412/#ri20060630.133619987)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T06:04:32.670

Content-Language HTTP 标头的含义以及它的`meta`标记代理项的含义是，它声明了文档的语言或目标受众的语言（相关的 RFC 是矛盾的），*而不是*其他一些文档的语言（如当前文件的翻译）。header 的实际作用很小，*如果*HTML 标记中没有语言信息，可能仅限于使用命名为文档语言的第一种语言。

要表明文档有其他语言版本，您可以使用如下标签

```
 <link rel="alternate" hreflang="de" href="foobar.de.html"> 
```

请参阅HTML 4.01 规范中的[12.3.3 链接和搜索引擎](http://www.w3.org/TR/html401/struct/links.html#h-12.3.3)。

无法保证这会产生任何影响。它可能会影响搜索引擎，但不会超过普通链接。一些旧的浏览器版本具有基于此类元素选择文档替代版本的命令，但该功能似乎已被删除。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T21:12:52.773

您使用什么 HTML 版本？在**HTML 4.01**中，您使用`Content-Language`多种语言是**有效**的。在**HTML5**中，[它不是](http://www.w3.org/TR/html5/the-meta-element.html#attr-meta-http-equiv-content-language).

但即使对于 HTML 4.01，也不推荐使用`Content-Language`for元素： [HTTP 标头、元元素和语言信息 (W3C)](http://www.w3.org/International/questions/qa-http-and-lang)`meta`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-27T22:19:40.550

你不能这样使用它。

您必须使用包含所有所需字符的编码（例如，支持整个 Unicode 范围的 UTF-8），或者使用命名实体或数字引用来包含正在使用的编码之外的字符。

[http://bytes.com/topic/html-css/answers/154652-multiple-languages-one-document](http://bytes.com/topic/html-css/answers/154652-multiple-languages-one-document)

更新

如果使用 HTML5，那么您可以对每个元素使用 lang。这意味着如果您有一个包含普通话的 div，只需为该 div 定义一个属性 lang="zh-CN"，例如 . （[什么是过时的元 http-equiv=content-language 的 HTML5 替代方案。](https://stackoverflow.com/questions/8116812/meta-http-equiv-content-language-is-obsolete)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-03T21:11:32.367

正如其他海报和 W3C 所指出的那样，您不能在标签的`lang`属性中指定一种以上的语言。`html`

[*但是，如“我应该为混合语言页面使用什么属性值？”的*](https://stackoverflow.com/questions/7076837/what-html-lang-attribute-value-should-i-use-for-a-mixed-language-page/61019662#61019662)[答案](https://stackoverflow.com/questions/7076837/what-html-lang-attribute-value-should-i-use-for-a-mixed-language-page/61019662#61019662)*所示。`div`，您可以使用和标签等元素标记页面的不同部分，`span`以指示页面上使用的不同语言（或对其他语言的引用）。*

 *此外，您可以创建元数据，为页面的目标受众描述多种语言，而不是特定文本范围的语言。为此，您需要让服务器发送 HTTP`Content-Language`标头中的信息。如果您的目标受众会说一种以上的语言，则 HTTP 标头允许您使用以逗号分隔的语言列表。

下面是一个 HTTP 标头示例，该标头声明资源是英语、印地语和旁遮普语的混合体，来自 W3C 的文章[在 HTML 中声明语言](https://www.w3.org/International/questions/qa-html-language-declarations#metadata)：

```
Content-Language: en, hi, pa 
```

**请注意：**由于您应该始终在`html`标签上使用语言属性，并且语言属性始终覆盖 HTTP 标头信息，因此这确实成为一个很好的点。HTTP 标头应仅用于提供有关整个文档的预期受众的元数据，并且`html`应使用标记上的语言属性来声明内容的默认语言。

有关最后一种技术的详细信息，请参阅[HTTP 标头、`meta`元素和语言信息](https://www.w3.org/International/questions/qa-http-and-lang)。有关一般语言声明和标记，请参阅[在 HTML 中声明语言](https://www.w3.org/International/questions/qa-html-language-declarations)。*

# r - 收益率曲线包 R

> ID：12150370
> 
> 赞同：2
> 
> 时间：2012-08-27T22:14:17.573
> 
> 标签：r

我想使用 Nelson-Siegel 模型插入收益率曲线。我是 R 语言的新手，但决定使用“产量曲线”包（可在此处[获得 http://cran.r-project.org/web/packages/YieldCurve/index.html](http://cran.r-project.org/web/packages/YieldCurve/index.html)和文档链接：[http://cran .r-project.org/web/packages/YieldCurve/YieldCurve.pdf](http://cran.r-project.org/web/packages/YieldCurve/YieldCurve.pdf)）我面临两个问题：

1）我不明白为什么以下代码（文档中的第 6 页）的第 6 行和第 7 行中 NSrates 的前 2 个参数采用这种格式：

```
data(FedYieldCurve)
tau <- c(3, 6, 12, 60, 84, 120)
mediumTerm <- c(12,60,84)
NSParameters <- Nelson.Siegel(rate=FedYieldCurve[1:10,],
                              maturity=tau, MidTau=mediumTerm )
y <- NSrates(NSParameters[5,1:3],
             NSParameters$lambda[5],tau)
plot(tau,FedYieldCurve[5,],main="Fitting Nelson-Siegel yield curve", type="o")
lines(tau,y, col=2)
legend("topleft",legend=c("observed yield curve","fitted yield curve"),
col=c(1,2),lty=1)
grid() 
```

2）如何从曲线中提取一定的收益率？例如，如果我的期限为 12 个月，它的相关收益率是多少？

非常感谢您花时间回答我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:08:44.700

查看 的帮助页面`NSrates`。

它需要 3 个参数：

> betaCoeff：beta 系数的向量或矩阵。
> 
> lambdat：估计的 lambda 值
> 
> 到期日：收益率曲线的到期日要返回的利率。

对于`betaCeff`，您显示的代码使用`NSParameters[5, 1:3]`，或

```
 beta_0    beta_1   beta_2
5 13.7156 -1.468064 1.237194 
```

这是一个`data.frame`。虽然`data.frame`没有明确声明为可能的输入，但函数的第一行将其转换为 a `matrix`（假设您使用的是 CRAN 版本）

```
if(is.vector(betaCoeff)) betaCoeff <- matrix( betaCoeff, 1, 3) 
```

对于`lambdat`，您显示的代码使用`NSParameters$lambda[5]`的是`numeric`用于估计 lambda 的值。

最后的论点是`maturity`。您显示的代码使用`tau`的是

```
> tau
[1]   3   6  12  60  84 120 
```

根据文档，该功能将

> 返回矩阵对象中的利率，其中行数等于 nrow(betaCoeff)，列数等于 length(maturity)。

在这种情况下，你得到

```
> y
           3        6       12      60       84      120
[1,] 12.7394 13.05852 13.40245 13.6897 13.69721 13.70273 
```

如果你只想要 12 个月`maturity`，那么只传递`12`给`maturity`参数。

```
> NSrates(NSParameters[5,1:3], NSParameters$lambda[5], 12)
           12
[1,] 13.40245 
```

# php - 以编程方式在 Magento 中配置新产品，设置自定义 entity_id

> ID：12150371
> 
> 赞同：1
> 
> 时间：2012-08-27T22:14:20.597
> 
> 标签：php, magento, entity-attribute-value

```
#$obj (stdClass Object), $obj->products_id = given int value

$product = Mage::getModel("catalog/product")->load($obj->products_id);
$product->setId($obj->products_id); //not working, the session is cancelled
$product->setEntityId($obj->products_id); //not working, the session is cancelled
$product->setProductId($obj->products_id); //working but in "catalog_product_entity" the "entity_id" is created using the auto-increment (from the last registered ID)
//-------------------------------------------------
$product->save();
//-------------------------------------------------
$product->getId(); //loading the "entity_id"
$product->getProductId(); //loads the product id 
```

我想要做的是.. 将 $obj->products_id 加载到“entity_id”（“catalog_product_entity”）中。

有什么建议么？！相同的逻辑已应用于“目录/类别”并且它有效但在“目录/产品”上不起作用..

谢谢你

# c# - 将 Iesi ISet 与 NHibernate 一起使用

> ID：12150372
> 
> 赞同：0
> 
> 时间：2012-08-27T22:14:28.427
> 
> 标签：c#, nhibernate, iesi-collections

我在这里遗漏了一些东西！

我正在使用 ISet 在我的 NHibernate winform c# 项目中映射集合。

现在我想做这样的事情：

```
Person _person=new Person();

Address _address1=new Address();
_person.Addresses.Add(_address1);
_address1.Person=_person;

Address _address2=new Address();
_person.Addresses.Add(_address2);
_address2.Person=_person;

_session.Save(_person); 
```

现在地址是一个`HashedSet<Address>`，当我尝试添加 _address2 时，“添加”方法返回 false，因为地址 ID 为空且无法添加对象..._address1 ID 也为空！

如何解决？

丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:40:36.863

您需要在 Address 上设置一些属性并实现对象相等，以便 set 实现可以测试相等性。例如，我怀疑 Address Id 是一个很好的平等测试。相反，您可能想要测试数字、街道、城市等是否相等。

# css - CSS3变换比例坚持到底

> ID：12150377
> 
> 赞同：12
> 
> 时间：2012-08-27T22:14:47.993
> 
> 标签：css, frontend, transform, scale

是否可以使用 transform: scale(x) 属性，同时保持元素粘在页面底部？（默认情况下，如果相对于元素的中心进行缩放，如下所示）

[![默认缩放行为](../Images/a1fc42cbeef74d1dff4e744ed48da403.png)](https://i.stack.imgur.com/z4lZI.gif)
[（来源：[w3schools.com](http://www.w3schools.com/css3/transform_scale.gif)）]

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-27T22:23:38.477

使用[`transform-origin`](http://webdesign.about.com/od/css3styleproperties/p/transform-origin.htm)属性：

```
element{
    -webkit-transform : scale(0.5);
    -moz-transform : scale(0.5);
    -o-transform : scale(0.5);
    -ms-transform : scale(0.5);
    transform : scale(0.5);

    -webkit-transform-origin : 50% 100%;
    -moz-transform-origin : 50% 100%;
    -o-transform-origin : 50% 100%;
    -ms-transform-origin : 50% 100%;
    transform-origin : 50% 100%;
} 
```

这是[一个现场演示](http://jsfiddle.net/Sa9eS/1/)，展示了`transform-origin`实际操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:19:33.150

问题是您是否可以选择对象的轴。我不知道这个问题的答案，我猜它可能不是。

如果您真的无法设置“轴”，则必须在同时移动框的同时对其进行变换。

# java - 是否有用于在 SOAP 标头中指定和传播相关 ID 的 WS-* 标准？

> ID：12150378
> 
> 赞同：4
> 
> 时间：2012-08-27T22:14:58.953
> 
> 标签：java, soap, wsdl

我正在寻找用于在 SOAP 标头中传播相关 ID（以 UUID 的形式）的 WS-* 标准。我的场景与 SOAP/JMS 有关，我想放置一个相关 ID，该 ID 在消息通过各种端点时保留。WS-Addressing 有点像相关的，但是这更多地与原始消息 ID 有关。如果我们使用 WS-Addressing 并且保持一致，那么可以跨多个调用重新构建消息链。但是，我希望只有一个相关 ID。

在过去的项目中，我们只有一个关联 ID，但它进入了 SOAP 标头中的自定义模式。无论如何，在我在当前项目上定义另一个自定义模式之前，我想知道我是否遗漏了某个 WS-* 标准中的某些内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-04T09:03:15.953

只是偶然发现了这个老问题。也许其他人可以从我到目前为止的发现中受益。

看看：[https ://lists.w3.org/Archives/Public/xml-dist-app/2001Jul/att-0260/soap-correlation-01.html](https://lists.w3.org/Archives/Public/xml-dist-app/2001Jul/att-0260/soap-correlation-01.html)

# c# - 构建程序导航

> ID：12150381
> 
> 赞同：0
> 
> 时间：2012-08-27T22:15:04.950
> 
> 标签：c#, wpf, caliburn.micro

我正在开发一个 WPF 应用程序，我使用 Caliburn-Micro 来处理 MVVM 管道。我使用 CM 中的事件聚合器来监听导航事件。目前，事件之间没有任何共性。所以我有一个 OrderNavigationEvent、QuoteNavigationEvent、PriceBookNavigationEvent 等......

我考虑过沿着几个枚举创建一个通用的 NavigationEvent 类，该类具有我需要的导航事件的所有不同类型。就像是：

```
public enum NavigationDestinations
{
    Orders,
    Quotes,
    PriceBook
}

public enum NavigationOptions
{   
    Open,
    New,
    Listing
}

public class NavigationEvent
{
    public NavigationDestinations NavigationDestination {get; set;}
    public NaviationOptions NavigationOption {get; set;}
    public int Id {get; set;}
} 
```

然后我可以设置一个 Handle(NavigationEvent message)，然后归结为大量的 IF 语句。它会工作，但是**呃**。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:01:51.607

我不建议创建一个没有共性的事件类的“基”**类**。你违反了**单一职责原则**。您的三个事件在发布时需要做一些不同的事情。

我建议将它们分开并将 _eventAggregator.Publish( **class** ) 调用到一个类并让订阅者订阅它。

如果您需要在一堂课中进行三项此类活动，那么请执行三项**`IHandle<OrderNavigationEvent>, IHandle<QuoteNavigationEvent>, IHandle<PriceBookNavigationEvent>`**

并让班级订阅**`_eventAggregator.Subscribe(this);`**它，然后您将消除多 IF 对它的检查，当某个事件发布时，您可以专注于某个功能。

然后，每个事件都有三个不同的句柄

```
public void Handle(QuoteNavigationEvent eventArgs)
{
  ...
}

public void Handle(OrderNavigationEvent eventArgs)
{
 ...
}

public void Handle(PriceBookNavigationEvent eventArgs)
{
 ...
} 
```

# visual-studio-2010 - 为什么我的 Visual Studio 2010 Silverlight 解决方案在“干净”上完全崩溃？

> ID：12150386
> 
> 赞同：3
> 
> 时间：2012-08-27T22:15:54.243
> 
> 标签：visual-studio-2010, reference, namespaces, silverlight-5.0, solution

在清洁之前，一切都正确构建，我能够全天进行重大更改/重建。我决定“清洁解决方案”，这立即破坏了一切。找不到对命名空间的任何引用，如下面的错误所示：

`The type or namespace name '(insert_name)' could not be found (are you missing a using directive or an assembly reference?`

在这个解决方案中，它占了 631 个错误。似乎没有重建/建筑组合可以解决它。我很难在网上找到很多关于这个的东西，所以我想我会在这里发帖看看是否有人有一些想法。

还可能值得注意的是，这个解决方案只是从同事那里复制到我的机器上，所以它可能与此有关？虽然，它在清洁之前建造得非常好。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:07:12.250

我看到以下可能性：

*   您有一些对使用绝对路径的库的引用，该绝对路径在一台机器上有效，而在另一台机器上无效。例如，您使用 Silverlight Toolkit，但两台计算机上都没有安装它，或者其中一台计算机是 32 位，另一台是 64 位，您只能在 x64 上获得 Program Files (x86)。

*   您对使用在一台机器上有效而不是另一台机器上有效的相对路径的库有一些引用。例如，您有 X:\Work\Project\Project.sln，它使用 ..\..\Tools\Library.dll 引用 X:\Work\Tools\Library.dll，而另一台机器在 X:\Work 中有它\Tools\SomeLib\Library.dll。

在这两种情况下，您都应该看到一个“root”错误，表明找不到库的 DLL。有时，查看输出窗口而不是错误窗口会更容易发现。

# ruby-on-rails - 无法关联类别和帖子

> ID：12150388
> 
> 赞同：0
> 
> 时间：2012-08-27T22:16:15.383
> 
> 标签：ruby-on-rails

我正在使用[http://www.youtube.com/watch?v=PUHmX18Zmyk](http://www.youtube.com/watch?v=PUHmX18Zmyk)视频制作博客。我的帖子模型是

```
class Post < ActiveRecord::Base
  attr_accessible :body, :publish_date, :title, :user_id
  validates_presence_of :title, :body, :publish_date, :user_id
  belongs_to :user
  has_and_belongs_to_many :categories
end 
```

类别模型是

```
class Category < ActiveRecord::Base
  attr_accessible :name
  validates_presence_of :name
  has_and_belongs_to_many :posts
end 
```

在视频中，他使用此类代码在新帖子中生成类别列表

```
<%  f.association :categories, :as => :checkboxes %> 
```

但我有错误

```
undefined method `association' for #<ActionView::Helpers::FormBuilder:0xb5e82b40> 
```

制作类别列表的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:40:25.233

您应该查看 rails 文档以制作一个选择框，这将允许您选择类别名称，但将 category_id 与帖子一起发送。

[http://guides.rubyonrails.org/form_helpers.html#making-select-boxes-with-ease](http://guides.rubyonrails.org/form_helpers.html#making-select-boxes-with-ease)

# c# - 在通用列表中存储继承的类 - 请提出建议

> ID：12150391
> 
> 赞同：-1
> 
> 时间：2012-08-27T22:17:17.037
> 
> 标签：c#, generic-list

我正在构建一个简单的形状设计器，它很简单——将形状添加到一个区域，你可以调整它们的大小并通过拖放来移动它们——想想 VS 中的表单设计器。

目前我有一个 Shape 的基类，它表示常见的属性（位置、大小）和方法。其他代表设计器对象的类继承自 Shape，例如 Circle、Square 等。我将对象存储在通用列表中，例如`List<Shape>`

我的问题是关于 List 与其他通用数据结构，以及何时使用它们。

**编辑**：感谢 Mathias 指出我真正的意思。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:23:15.837

> 我的问题是：存储形状的最佳方式是什么？如果不是为什么不呢？

这真的取决于。主要关注点之一应该是您如何使用形状列表。访问、插入和删除的速度将根据您使用的集合类型而变化。

例如：

*   如果您按索引访问是您的主要关注点，那么`List<T>`是合适的。
*   如果您只是在迭代，但需要经常添加和删除形状，那么`LinkedList<T>`或类似的结构*可能*是有益的。这提供了快速枚举，但插入或删除比 a 快得多`List<T>`（特别是如果您从列表中间删除）。

# php - 如何在 PHP 中从命令行捕获 stderr

> ID：12150394
> 
> 赞同：2
> 
> 时间：2012-08-27T22:17:37.053
> 
> 标签：php, c, compiler-construction

我想创建一个 C/C++ 的在线编译器。

到目前为止，我已经开发了以下代码：

```
<?php
error_reporting(E_ALL);
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
}
else
{

    move_uploaded_file($_FILES["file"]["tmp_name"],$_FILES["file"]["name"]);
    compile();
}
function compile()
{
$a=shell_exec('gcc -o Compile Compile.c');
echo $a;
$b=shell_exec('./Compile');
echo $b;
}
?> 
```

文件 Compile.c 正在上传，然后由 gcc 编译。我想做的是：

*   编译出错时从 stderr 读取错误并显示在网页上。
*   如果没有错误，则在输入文件上执行代码并显示执行时间，如果时间超过特定值，则显示超出时间限制错误。

我搜索了互联网，发现如果编译语句附加了“2>&1”为

```
$a=shell_exec('gcc -o Compile Compile.c 2>&1'); 
```

然后编译错误的输出返回到分配的变量（在上面的例子中是 $a），但不是没有它。所以我的问题是如何检查错误，然后在网页上显示它而不附加“2>&1”，如果没有错误，然后执行上面给出的第二步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:13:39.543

proc_open() 的正确使用如下所示：

```
$process = proc_open('gcc -o Compile Compile.c', array(
    0 => array('pipe', 'r'), // STDIN
    1 => array('pipe', 'w'), // STDOUT
    2 => array('pipe', 'w')  // STDERR
), $pipes);

if(is_resource($process)) {
    // If you want to write to STDIN
    fwrite($pipes[0], '...');
    fclose($pipes[0]);

    $stdOut = stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    $stdErr = stream_get_contents($pipes[2]);
    fclose($pipes[2]);

    $returnCode = proc_close($process);
} 
```

这将执行 shell 命令并为您提供对 STDIN、STDOUT 和 STDERR 的详细控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:56:02.463

PHP 包含大量用于执行外部进程的函数，每个函数都有自己的一组缺陷。

在这种特殊情况下，您可以通过使用`exec`（并使用 将 stderr 重定向到 stdout `2>&1`）来保持一些简单性。返回值，虽然是字符串，但没用；它只是输出的最后一行；但是，第二个参数应该是一个填充了输出的数组（每行一个条目），第三个参数`return_var`将告诉您编译是否成功：`0`表示成功，否则表示失败。

# jquery - jquery val() 与 Eric Martin 的简单模态形式

> ID：12150396
> 
> 赞同：0
> 
> 时间：2012-08-27T22:18:05.400
> 
> 标签：jquery, simplemodal

在使用 Eric Martin 的 Simple Modal 表单时，我遇到了获取文本字段值的问题。`$('#pcs_'+id).val();`似乎什么都不返回（下面的变量 _t 未定义）。

以“弹出”模式形式生成的 HTML 部分：

```
<form><input type="text" id="pcs_25" value="1"> pcs </form> 
<a id="add_basket_25" onclick="return add2Basket(25);" class="button basket_list options_true" href="/emarket/basket/put/element/25/">add to basket</a> 
```

JS部分：

```
function add2Basket(id){

    var _t = $('#pcs_'+id).val(); 
    _t = $.trim(_t); 

    var rege = /^[\d]{1,}$/;    // numbers 
    if(rege.test(_t)){          //do something 
        var add2cartlink = $('#add_basket_'+id).attr('href'); 
        add2cartlink += _t; 
        // window.location.href = add2cartlink;
        return false;
    }  
    else {
        alert("Only numbers allowed!"); 
        return false;           
    }
} 
```

请注意，这在模态表单之外可以正常工作，并且只有在模态表单容器中才会出现问题。

过去有没有人遇到过这样的事情？

**补充**：如果显式调用，如`$('#pcs_25').val()`or `$('#pcs_25').attr('value')`，则返回的是硬编码到 HTML 部分的值，即`<input type="text" id="pcs_25" value="1">`. 它似乎忽略了手动输入到文本字段中的值。

**已解决：**之前我应该​​猜到 Simple Modal 将表单的输入文本字段复制到生成的 html 中，因此`id='pcs_25'`生成的 html 页面中实际上有 2 个元素。所以 jquery 选择器需要更高的精度。 `$('.simplemodal-data #pcs_'+id).val()`解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:14:56.253

对于以下 html，我可以使以下工作：

```
<form>
    <input type="text" id="pcs_25" value="1"> pcs  
<a id="add_basket_25" class="button basket_list options_true" href="/emarket/basket/put/element/25/">add to basket</a>
    <br/>
    <input type="text" id="pcs_26" value="1"> pcs  
<a id="add_basket_26" class="button basket_list options_true" href="/emarket/basket/put/element/26/">add to basket</a>

</form>​ 
```

使用以下简化的 JavaScript，您可以在不需要任何正则表达式的情况下进行开发：

```
jQuery(".button.basket_list").click(function () {
    event.preventDefault(); //stops the click from going through
    //alert(jQuery(this).prev().val());
    var amountToAdd = parseInt(jQuery(this).prev().val()); //the parseint function will sometimes strip non numeric values off from the end of the text value
    alert(amountToAdd);
    if (amountToAdd) {
            //window.location.href = jQuery(this).attr('href'); //If we still need to go somewhere
    }
    else
    {
        alert("Only numbers allowed!");
    }
}); 
```

这只是选择锚元素之前的文本框元素，并使用它的值。

请参阅此处的示例：http: [//jsfiddle.net/webwarrior/Lbxj6/9/](http://jsfiddle.net/webwarrior/Lbxj6/9/)

如果您不想那样工作，则将 rel="25" 添加到超链接，并像我在以下示例中所做的那样使用它。 [http://jsfiddle.net/webwarrior/L6PN5/3/](http://jsfiddle.net/webwarrior/L6PN5/3/)

```
<form>
    <input type="text" id="pcs_25" value="1"> pcs  
<a id="add_basket_25" class="button basket_list options_true" href="/emarket/basket/put/element/25/" rel="25">add to basket</a>
    <br/>
    <input type="text" id="pcs_26" value="1"> pcs  
<a id="add_basket_26" class="button basket_list options_true" href="/emarket/basket/put/element/26/" rel="26">add to basket</a>

</form> 
```

和javascript：

```
jQuery(".button.basket_list").click(function () {
    event.preventDefault(); //stops the click from going through
    //alert(jQuery(this).prev().val());
    var ID = jQuery(this).attr('rel');
    var amountToAdd = parseInt(jQuery(".simplemodal-data #pcs_" + ID).val()); //the parseint function will sometimes strip non numeric values off from the end of the text value
    alert(amountToAdd);
    if (amountToAdd) {
            //window.location.href = jQuery(this).attr('href'); //If we still need to go somewhere
    }
    else
    {
        alert("Only numbers allowed!");
    }
});​ 
```

hth

# java - 在多台 Windows 机器上自动安装基于 Java 的软件

> ID：12150397
> 
> 赞同：5
> 
> 时间：2012-08-27T22:18:16.750
> 
> 标签：java, windows, deployment, build, build-automation

我正在处理一个需要部署到多个 Windows 服务器的 Java 项目。我正在尝试确定自动执行此操作的正确方法。我的第一选择是走 cygwin/ssh 路线并使用像 fabric 这样的部署框架来自动化一切。

**谁能提供可用于实现相同目标的其他方法，以及为什么这将是首选解决方案的原因？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:34:56.857

您可以尝试生成 MSI 包并使用[组政治](http://support.microsoft.com/kb/816102)部署它。

可能，该主题与您有关：[使用 maven 创建安装程序](https://stackoverflow.com/questions/1378129/how-to-create-installers-with-maven)

# sparql - 给定公司名称列表，如何获取公司名称、网站 url、成立年份、员工人数等

> ID：12150399
> 
> 赞同：4
> 
> 时间：2012-08-27T22:18:38.293
> 
> 标签：sparql, dbpedia

我有一个公司名称列表，例如 Microsoft Corp、Kimberly Clark Corporation 等，对于每家公司，我想检索以下字段：

1.  其公司标志
2.  谷歌地图的地理标识符
3.  网址
4.  成立年份
5.  证券交易所和证券交易所股票代码
6.  一种获取过去几天股价的方法
7.  关于/来自维基百科的摘要
8.  子公司和母公司名单。例如，对于波音来说，它将是 Jeppessen 和 Availl, Inc 等。

我研究过 Sparql 和 Dbpedia。关于如何提出 sparql 查询来检索其中一些信息的任何建议？（我不需要检索所有字段，只需几个字段即可开始。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T01:08:13.673

您可以开始使用这样的查询：

```
select * where {
  values ?company { dbpedia:Microsoft
                    <http://dbpedia.org/resource/Apple_Inc.>
                    dbpedia:Kimberly-Clark
                  } 
  OPTIONAL { { ?company dbpprop:logo ?logo  FILTER(isIRI(?logo)) }
             UNION 
             { ?company foaf:depiction ?logo FILTER(isIRI(?logo)) } }
  OPTIONAL { ?company dbpedia-owl:abstract ?abstract 
             FILTER(langMatches(lang(?abstract),"EN")) }
  OPTIONAL { ?company geo:lat ?latitude ;
                      geo:long ?longitude }
  OPTIONAL { ?company dbpedia-owl:foundingDate ?foundingDate }
  OPTIONAL { ?company dbpedia-owl:wikiPageExternalLink ?externalLink }
  OPTIONAL { ?company dbpprop:symbol ?stockSymbol }
  OPTIONAL { ?company dbpedia-owl:subsidiary ?subsidiaryPage }
} 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http://dbpedia.org&query=select%20%2a%20where%20%7B%0D%0A%20%20values%20?company%20%7B%20dbpedia%3aMicrosoft%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Chttp://dbpedia.org/resource/Apple_Inc.%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dbpedia%3aKimberly-Clark%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%0D%0A%20%20OPTIONAL%20%7B%20%7B%20?company%20dbpprop%3alogo%20?logo%20%20FILTER%28isIRI%28?logo%29%29%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20UNION%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20?company%20foaf%3adepiction%20?logo%20FILTER%28isIRI%28?logo%29%29%20%7D%20%7D%0D%0A%20%20OPTIONAL%20%7B%20?company%20dbpedia-owl%3aabstract%20?abstract%20%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20FILTER%28langMatches%28lang%28?abstract%29,%22EN%22%29%29%20%7D%0D%0A%20%20OPTIONAL%20%7B%20?company%20geo%3alat%20?latitude%20;%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20geo%3along%20?longitude%20%7D%0D%0A%20%20OPTIONAL%20%7B%20?company%20dbpedia-owl%3afoundingDate%20?foundingDate%20%7D%0D%0A%20%20OPTIONAL%20%7B%20?company%20dbpedia-owl%3awikiPageExternalLink%20?externalLink%20%7D%0D%0A%20%20OPTIONAL%20%7B%20?company%20dbpprop%3asymbol%20?stockSymbol%20%7D%0D%0A%0D%0A%20%20OPTIONAL%20%7B%20?company%20dbpedia-owl%3asubsidiary%20?subsidiaryPage%20%7D%0D%0A%7D&format=text/html&timeout=0&debug=on)

[我基于我在Microsoft](http://dbpedia.org/page/Microsoft)、[Kimberly-Clark](http://dbpedia.org/page/Kimberly-Clark)和[Apple, Inc.](http://dbpedia.org/page/Apple_Inc.)的 DBpedia 页面上看到的属性。数据不是特别干净，因此，我在查询中添加了一些过滤器：

*   并非所有这些都列出子公司，并且 Microsoft 的子公司属性与子公司无关，而是一个可能列举一些子公司的页面）。

*   一些公司的标志信息不好（因此`FILTER`带有 s `isIRI`）。例如，Apple`dbpprop:logo`是整数`150`。我认为这来自 Wikipedia infobox line `| logo = [[File:{{#property:p154}}|150px]]`，其中`150`被拉出而不是更有意义的值。过滤依据`isIRI`有点帮助。

*   有些公司有多个成立日期。我不确定您如何决定使用多个中的哪一个。

*   虽然公司页面通常列为外部链接，但并非所有与页面关联的外部链接都是公司页面。我不确定您如何选择一个作为公司页面。

综上所述，您似乎可以从 DBpedia 获得很多此类信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T12:51:35.923

您可以从以下 sparql 查询开始。它检索名称为“Apple Inc.”的主题的所有三元组。

```
select distinct ?subject ?predicate ?object where { 
  ?subject ?predicate ?object .
  ?subject <http://xmlns.com/foaf/0.1/name> "Apple Inc."@en .
} 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=++++select+distinct+%3Fsubject+%3Fpredicate+%3Fobject+where+%7B+%0D%0A++++++%3Fsubject+%3Fpredicate+%3Fobject+.%0D%0A++++++%3Fsubject+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2Fname%3E+%22Apple+Inc.%22%40en+.%0D%0A++++%7D&format=text%2Fhtml&timeout=30000&debug=on)

```
subject     predicate   object
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://www.w3.org/2002/07/owl#Thing
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/ontology/Company
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://www.opengis.net/gml/_Feature
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/ontology/Organisation
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/ontology/Agent
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://schema.org/Organization
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/ComputerCompaniesOfTheUnitedStates
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/SoftwareCompaniesOfTheUnitedStates
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/RetailCompaniesOfTheUnitedStates
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/CompaniesEstablishedIn1976
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/ComputerHardwareCompanies
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://umbel.org/umbel/rc/Organization
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/Company108058098
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/HomeComputerHardwareCompanies
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/CompaniesBasedInCupertino,California
http://dbpedia.org/resource/Apple_Inc.  http://www.w3.org/1999/02/22-rdf-syntax-ns#type     http://dbpedia.org/class/yago/MobilePhoneManuFACturers 
```

# plone - Plone 的 portal_catalog(portal_type="File") 没有返回我在 ZMI portal_catalog 页面中看到的所有对象

> ID：12150401
> 
> 赞同：3
> 
> 时间：2012-08-27T22:18:44.527
> 
> 标签：plone

在很长一段时间没有使用 Plone 后，我又开始使用它了。我们已经用 Plone 4.0.5 建立了一个 Intranet。我们已经将大量文件（主要是文件）上传到内部网。

该站点是使用具有 ZEO 配置的 Plone Unified Installer 安装的。一些产品（鸡蛋）被添加到我们的 buildout.cfg

ZEO 服务器和客户端都在运行；我正在做：

```
 $ bin/client1 debug
 Starting debugger (the name "app" is bound to the top-level Zope object)
 ... several warnings ...
 >>> 
```

现在，我像这样查询目录：

```
 >>> len(app.plone.portal_catalog(portal_type="File"))
 17 
```

但是，如果转到 ZMI 并遍历 portal_catalog/Indexes，转到 portal_type 并浏览，“文件”项具有更多的元素。

这可能是因为我没有登录：

```
 >>> from Products.CMFCore.utils import _getAuthenticatedUser
 >>> _getAuthenticatedUser(app.ca.portal_catalog)
 <SpecialUser 'Anonymous User'> 
```

如何将控制台置于管理员用户的“上下文”中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T22:27:17.770

目录未返回所有条目可能有多种原因：

*   他们的许可不允许你看到他们，句号。在这方面使用匿名用户当然没有帮助。:-)

*   条目已过期；他们的过期日期现在已经过去，您无权查看这些内容。同样，使用非特权用户也无济于事。

*   您正在使用多语言设置，并且项目不是“当前”语言。如果您的查询包含`Language='all'`此过滤器，则该过滤器将被禁用。

要在控制台上设置替代用户（最好是具有该`Manager`角色的用户），请使用以下代码：

```
from AccessControl.SecurityManagement import newSecurityManager

site = app['Plone'] # Adjust as needed
# Assuming your username is 'admin', adjust as needed again:
user = app.acl_users.getUser('admin').__of__(site.acl_users) 
newSecurityManager(None, user) 
```

就个人而言，每当我使用控制台时，我都会使用以下代码段；如果在我的 Quicksilver 架子上有这个以便于访问。首先我输入：

```
site_id = '<id of Plone site>' # Adjust as needed 
```

然后粘贴：

```
import transaction, pdb
from zope.interface import implementedBy
from zope.component import getUtility, queryUtility, queryAdapter
from Zope2 import debug
from Acquisition import aq_inner, aq_parent, aq_chain
from zope.app.component.hooks import setSite, getSiteManager
from Testing.makerequest import makerequest
from AccessControl.SecurityManagement import newSecurityManager, getSecurityManager

try:
    import readline
except ImportError:
    print "Module readline not available."
else:
    import rlcompleter
    readline.parse_and_bind("tab: complete")

app = makerequest(app)
site = app[site_id]
setSite(site)
user = app.acl_users.getUser('admin').__of__(site.acl_users)
newSecurityManager(None, user) 
```

现在我已经完成了 readline 以及在我的网站上做一些真正的破坏所需的一切！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T06:13:16.343

对于非常特殊的情况（例如迁移），您可以使用

```
results = catalog.unrestrictedSearchResults(...) 
```

这将返回所有结果而不过滤（绕过所有安全检查等）

然而，这种方法是官方的一种私有方法，并且如书面所述：小心使用它。

# powershell - PowerShell：条件“if”语句的奇怪行为

> ID：12150402
> 
> 赞同：1
> 
> 时间：2012-08-27T22:18:47.087
> 
> 标签：powershell, match, behavior, conditional-statements

看看下面的代码。如果我只用第一个“if”语句运行它，我会得到想要的结果。添加第二个“if”语句（如下所示），我没有得到想要的结果。这里有什么问题以及为什么 PowerShell 以两种不同的方式表现！

```
$CACHE_OS = ""
$OPERATINGSYSTEM = "WIN832_9200"

if ( $OPERATINGSYSTEM -match "WIN832" ) { $CACHE_OS = "WIN832" } else { $CACHE_OS = $OPERATINGSYSTEM }
if ( $OPERATINGSYSTEM -match "WIN864" ) { $CACHE_OS = "WIN864" } else { $CACHE_OS = $OPERATINGSYSTEM }

$CACHE_OS 
```

仅供参考：将条件语句格式化为单行，以便于上面阅读和解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:26:14.220

这是预期的行为。我认为您可能误解了控制流程的进展方式。

```
$CACHE_OS = ""
$OPERATINGSYSTEM = "WIN832_9200"

if ( $OPERATINGSYSTEM -match "WIN832" )  # true
{
  $CACHE_OS = "WIN832"  # $cache_os set to "WIN832"
}
else
{
  $CACHE_OS = $OPERATINGSYSTEM
}

# at this point $cache_os has a value of "WIN832"

if ( $OPERATINGSYSTEM -match "WIN864" ) # false
{
  $CACHE_OS = "WIN864"
}
else # control goes here
{
  $CACHE_OS = $OPERATINGSYSTEM   # $cache_os is re-assigned, new value is "WIN832_9200"
}

$CACHE_OS  # output the current value ("WIN832_9200") 
```

也许您的意思是使用`elseif`语句？

```
$CACHE_OS = ""
$OPERATINGSYSTEM = "WIN832_9200"

if ( $OPERATINGSYSTEM -match "WIN832" )
{
  $CACHE_OS = "WIN832"
}
elseif ( $OPERATINGSYSTEM -match "WIN864")
{
  $CACHE_OS = "WIN864"
}
else
{
  $CACHE_OS = $OPERATINGSYSTEM
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:42:55.357

它按预期工作。在第一个 IF 中，$OPERATINGSYSTEM 匹配“WIN832”，因此 $CACHE_OS 设置为“WIN832”，正如您所料，**ELSE 语句列表未执行**。

在第二个 IF 中，$OPERATINGSYSTEM 不匹配“WIN832”，因此跳过了 IF 语句列表并**开始执行 ELSE 部分**，并为 $CACHE_OS 分配了 $OPERATINGSYSTEM 的值，即“WIN832_9200”。

# php - PHP Exec() 和 Python 脚本可扩展性

> ID：12150405
> 
> 赞同：4
> 
> 时间：2012-08-27T22:18:52.980
> 
> 标签：php, python, exec

我有一个通过 exec() 和 cgi 执行 Python 脚本的 php 应用程序。

我有很多页面可以做到这一点，虽然我知道 WSGI 是长期发展的更好方式，但我想知道对于中小流量这种安排是否可以接受。

我问是因为一些帖子提到 Apache 必须为 Python 解释器的每个实例生成一个新进程，这会增加开销，但我不知道它对于一个较小的项目有多大意义。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:08:56.207

在 CGI 的情况下，服务器每次收到请求时都会启动 PHP 解释器的副本。PHP 依次启动 Python 进程，该进程在 exec() 之后被终止。启动两个进程并在每个请求上执行所有导入都会产生巨大的开销。

在 FastCGI 或 WSGI 的情况下，服务器保持几个进程预热（运行进程的最小和最大数量是可配置的），因此以一些内存为代价，您每次都无需启动新进程。但是，您仍然必须在每次 exec() 调用时启动/停止 Python 进程。如果您可以在没有 exec() 的情况下使用 Python 应用程序，例如将 PHP 部分移植到 Python，它将大大提高性能。

但是正如您提到的，这是一个小项目，因此唯一重要的标准是您当前的服务器是否可以承受当前负载。

# php - 用于路由散列 URL 的 htaccess/php 解决方案

> ID：12150413
> 
> 赞同：0
> 
> 时间：2012-08-27T22:19:57.097
> 
> 标签：php, regex, .htaccess, url-rewriting

> **可能重复：**
> [使用 PHP + .htaccess 访问 GET 变量](https://stackoverflow.com/questions/3375680/access-get-variables-with-php-htaccess)

我正在尝试编写 .htaccess 和 PHP 脚本的组合来执行以下操作：

如果 URL = [http://mysite.com/XXXXXXX](http://mysite.com/XXXXXXX) 重定向到[http://mysite.com/subdir/index.php?var=XXXXXXX](http://mysite.com/subdir/index.php?var=XXXXXXX)

其中 XXXXXXX 是长度为 7 个字符的任何字母数字字符串，没有 .php 扩展名。

这是我目前所拥有的

```
RewriteEngine On
RewriteRule ^(.*)$ index.php?code=$1
RewriteRule ^subdir/(.*)$ index.php?code=$1 [L,QSA] 
```

任何帮助将不胜感激。

更新：感谢您的回复，链接有所帮助，但我认为我遇到问题的地方是条件。

```
RewriteEngine On
RewriteCondition [HAS 7 ALPHANUM CHARS]  <--HERE
RewriteRule ^(.*)$  /subdir/index.php?code=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:26:20.740

尝试简单：

```
RewriteEngine On
RewriteRule (^|/)([a-z0-9]{7})/?$ index.php?code=$2 [L,QSA,NC] 
```

正则表达式`(^|/)([a-z0-9]{7})/?$`确保匹配 URI 的最后一部分，在最后一部分之后`/`并且正好有 7 个数字/字母。

所以这些将匹配：

```
/123abcD
/123abcD/
/something/098eif2
/foo/bar/path/1q2w3rT 
```

# tomcat - 从 Maven Tomcat 插件运行 war 文件——插件是否使用了错误的文件？

> ID：12150414
> 
> 赞同：5
> 
> 时间：2012-08-27T22:20:00.307
> 
> 标签：tomcat, maven, war, vaadin

我正在使用 Vaadin 开发一个 Web 应用程序并对其进行配置，以便它可以在开发、登台和生产环境中运行。我的问题是我无法让 Tomcat7 Maven 插件运行我的 war 文件。战争文件很好——我已经用编辑器检查过它。我在我的 spring-context.xml（我称之为 applicationContext.xml）中使用占位符来代替数据库信息。我使用 Maven 资源过滤来用真实数据替换占位符。这适用于战争文件。

但是，当我尝试使用 Tomcat7 Maven 插件运行时，出现以下错误（我遗漏了清理和测试消息）：

```
[INFO] 
[INFO] --- gwt-maven-plugin:2.4.0:compile (default) @ dpt ---
[INFO] auto discovered modules [com.catalystitservices.nike.dpt.widgetset.DptWidgetset]
[INFO] com.catalystitservices.nike.dpt.widgetset.DptWidgetset is up to date. GWT compilation skipped
[INFO] 
[INFO] --- maven-war-plugin:2.2:war (default-war) @ dpt ---
[INFO] Packaging webapp
[INFO] Assembling webapp [dpt] in [C:\Projects\DPT\target\dpt]
[INFO] Processing war project
[INFO] Copying webapp webResources [C:\Projects\DPT\src/main/webapp/] to [C:\Projects\DPT\target\dpt]
[INFO] Copying webapp resources [C:\Projects\DPT\src\main\webapp]
[INFO] Webapp assembled in [1407 msecs]
[INFO] Building war: C:\Projects\DPT\target\dpt.war
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ dpt ---
[INFO] Installing C:\Projects\DPT\target\dpt.war to C:\Users\ksnortum\.m2\repository\com\nike\dpt\dpt\1.1-SNAPSHOT\dpt-1.1-SNAPSHOT.war
[INFO] Installing C:\Projects\DPT\pom.xml to C:\Users\ksnortum\.m2\repository\com\nike\dpt\dpt\1.1-SNAPSHOT\dpt-1.1-SNAPSHOT.pom
[INFO] 
[INFO] >>> tomcat-maven-plugin:1.1:run (default-cli) @ dpt >>>
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ dpt ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.5.1:compile (default-compile) @ dpt ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] <<< tomcat-maven-plugin:1.1:run (default-cli) @ dpt <<<
[INFO] 
[INFO] --- tomcat-maven-plugin:1.1:run (default-cli) @ dpt ---
[INFO] Running war on http://localhost:8080/dpt
[INFO] Creating Tomcat server configuration at C:\Projects\DPT\target\tomcat
Aug 27, 2012 2:51:57 PM org.apache.catalina.startup.Embedded start
INFO: Starting tomcat server
Aug 27, 2012 2:51:57 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.29
Aug 27, 2012 2:51:58 PM org.apache.catalina.core.ApplicationContext log
INFO: Set web app root system property: 'webapp.root' = [C:\Projects\DPT\src\main\webapp\]
Aug 27, 2012 2:51:58 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing log4j from [classpath:log4j.properties]
Aug 27, 2012 2:51:58 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
27.08.2012 14:51:58 INFO  (ContextLoader.java:272) - Root WebApplicationContext: initialization started
27.08.2012 14:51:58 INFO  (AbstractApplicationContext.java:500) - Refreshing Root WebApplicationContext: startup date [Mon Aug 27 14:51:58 PDT 2012]; root of context hierarchy
27.08.2012 14:51:58 INFO  (XmlBeanDefinitionReader.java:315) - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml]
27.08.2012 14:51:58 INFO  (XmlBeanDefinitionReader.java:315) - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext-security.xml]
27.08.2012 14:51:59 INFO  (SpringSecurityCoreVersion.java:33) - You are running with Spring Security Core 3.1.0.RELEASE
27.08.2012 14:51:59 INFO  (SecurityNamespaceHandler.java:57) - Spring Security 'config' module version is 3.1.0.RELEASE
27.08.2012 14:51:59 INFO  (HttpSecurityBeanDefinitionParser.java:229) - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 300, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 800, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1200, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1300, Root bean: class [org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1400, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1700, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1800, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1900, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2000]
27.08.2012 14:51:59 INFO  (PropertiesLoaderSupport.java:177) - Loading properties file from file [C:\Projects\DPT\target\classes\log4j.properties]
27.08.2012 14:51:59 INFO  (DefaultSingletonBeanRegistry.java:433) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3358fd70: defining beans [org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,cdbController,forecastController,genericGridController,productionPlanController,productionScheduleReportController,actualsDao,cdbDao,dateDimDao,developerDao,factoryCapacityOverrideDao,factoryDao,familyDao,forecastDao,globalTotalOverrideDao,linePlanDao,modelOfferingDao,multiSourceDao,productionCategoryDao,productionPlanDao,regionDao,dptApplication,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.config.internalBeanConfigurerAspect,org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor#0,org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,txManager,messageSource,localeResolver,com.catalystitservices.nike.util.VaadinApplicationObjectSupport#0,dataSource,jdbcTemplate,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.DefaultSecurityFilterChain#0,org.springframework.security.web.DefaultSecurityFilterChain#1,org.springframework.security.web.DefaultSecurityFilterChain#2,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#3,org.springframework.security.provisioning.InMemoryUserDetailsManager#0,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource#0,org.springframework.security.access.vote.AffirmativeBased#1,org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor#0,org.springframework.security.methodSecurityMetadataSourceAdvisor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
Aug 27, 2012 2:51:59 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Could not resolve placeholder 'db.driverClassName' in string value [${db.driverClassName}] 
```

这是我对正在发生的事情的解释。如果我错了，请告诉我。

Vaadin 使用 GWT，因此可以编译。然后war文件被组装和安装。资源被复制和过滤。Maven 检查它是否需要编译，但它不需要。然后 Tomcat 启动并开始自我配置。当它到达 applicationContext.xml 中的数据源时，它会窒息，因为它找到的是占位符而不是真实数据。但为什么？资源已经运行，war 文件和 war 目录有正确的数据。

这是我的 POM 的一部分。我已经改变了很多，但这就是我的目标：

```
<build>
    <finalName>dpt</finalName>

    <filters>
        <filter>src/main/resources/props/dev.properties</filter>
    </filters>

    <resources>
        <resource>

            <!-- Currently, log4j.properties -->
            <directory>src/main/resources</directory>
            <filtering>true</filtering>

            <includes>
                <include>**/*.properties</include>
            </includes>
        </resource>
    </resources>

    <plugins>

        <!-- WAR file plugin -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>${mavenWarPlugin}</version>

            <configuration>
                <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
                <warName>dpt</warName>

                <filters>
                    <filter>src/main/resources/props/dev.properties</filter>
                </filters>

                <webResources>
                    <resource>

                        <!-- Currently, spring context files -->
                        <directory>src/main/webapp/</directory>
                        <filtering>true</filtering>

                        <includes>
                            <include>**/*.xml</include>
                        </includes>
                    </resource>
                </webResources>
            </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T22:16:44.600

事实证明这是 tomcat7-maven-plugin 中的一个错误，或者至少它没有像我预期的那样工作。当它从 Maven 运行 Tomcat 服务器时，它不使用 war 文件或目录中的配置文件。你可以在我做的一个 Github 项目中看到这一点：

[点击这里](https://github.com/ksnortum/Tomcat7MavenPluginTester)

**编辑**：好的，这本身不是一个错误，但 Tomcat 插件和资源过滤插件不会相互通信。没有理由他们应该这样做，除了如果您过滤资源，Tomcat 插件将永远找不到它们。

您必须明确告诉 Tomcat 插件过滤的资源在哪里。默认值为 ${project.build.directory}/${project.build.finalName}，因此您可以将其添加到 Tomcat 插件配置中：

```
<project>
  ...
  <build>
    ...
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>${tomcat7MavenPlugin}</version>

        <configuration>
          ...

          <!-- Have Tomcat look in the file filtering folder -->
          <warSourceDirectory>
            ${project.build.directory}/${project.build.finalName}
          </warSourceDirectory>
        </configuration>
        ... 
```

# iphone - 关闭由子视图中的 UITextField 触发的 iPhone 键盘

> ID：12150415
> 
> 赞同：1
> 
> 时间：2012-08-27T22:20:07.483
> 
> 标签：iphone, objective-c, ios, xcode

我的**`ViewController`**包含一个**子视图**：

**sub`UIView`**位于( **`NameSubViewController`class with XIB)**。

子视图包含一个**`UITextField`**.

* * *

我添加了这个动作：

**`- (IBAction)textFieldReturn:(id)sender;`**

在**`NameSubViewController`**课堂上并将其连接到 XIB 中文件所有者的文本字段（退出时结束）。

但是当我点击返回时，日志会给我一条错误消息，并且模拟器中没有任何反应。

这是相关代码：

* * *

**视图控制器.h：**

```
@property (nonatomic, strong) UIView *nameSubView; 
```

**ViewController.m (viewDidLoad):**

```
UIViewController *nameController = [[NameSubViewController alloc] initWithNibName:@"NameSubViewController" bundle:nil];
nameSubView = [nameController view];

[self.view addSubview:nameSubView]; 
```

* * *

**NameSubViewController.h:**

```
#import <UIKit/UIKit.h>

@interface NameSubViewController : UIViewController

@property (nonatomic, strong) IBOutlet UITextField *textField;

- (IBAction)textFieldReturn:(id)sender;
//Not working.. Connected from files owner to textField with option didEndOnExit 
```

**NameSubViewController.m:**

```
-(IBAction)textFieldReturn:(id)sender
{
[sender resignFirstResponder];
} 
```

* * *

**当我点击返回时，我在日志中收到此消息：**

`AppName[6656:f803] -[CALayer textFieldReturn:]: unrecognized selector sent to instance 0x6e99d40 2012-08-28 02:51:26.954 AppName[6656:f803] *** WebKit discarded an uncaught exception in the webView:shouldInsertText:replacingDOMRange:givenAction: delegate: <NSInvalidArgumentException> -[CALayer textFieldReturn:]: unrecognized selector sent to instance 0x6e99d40`

**并且键盘不会被解雇。什么可能导致我的问题？**

视图控制器：

[http://www.flickr.com/photos/80427098@N07/7877111708/in/photostream](http://www.flickr.com/photos/80427098@N07/7877111708/in/photostream)

NameSubViewController，在 ViewController 的 subView 中显示的视图：

[http://www.flickr.com/photos/80427098@N07/7877111596/in/photostream](http://www.flickr.com/photos/80427098@N07/7877111596/in/photostream)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:30:30.387

您是否打算让代表成为 CALayer？[CALayer textFieldReturn:]

现在，它是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:13:58.043

我终于自己找到了解决方案。这真的很简单，我只需要为 NameSubViewController 创建一个类`UIView`并将 textfieldReturn 代码放入 UIView 类中：

```
#import <UIKit/UIKit.h>

@interface NameSubView : UIView

@property (nonatomic, strong) IBOutlet UITextField *textField;

- (IBAction)textFieldReturn:(id)sender;

@end 
```

键盘按原样返回！有意义，因为只有**UIView**作为主视图的子视图加载，没有子视图视图控制器。ViewController 永远不应该是另一个视图的子视图，只有它的视图应该，所以代码必须写在子视图 UIView 类中。不是子视图 UIViewController 类！

# mysql - 多个组的 SQL 查询将每个组组合为 AND 语句并在每个组内组合为 OR 语句

> ID：12150417
> 
> 赞同：0
> 
> 时间：2012-08-27T22:20:13.413
> 
> 标签：mysql

我有一个复杂的导航，可以对内容库进行排序。导航对应类别，图库需要根据导航中选择的类别显示不同的内容组合。导航结构如下：

```
GROUP 1
category 1
category 2
category 3

GROUP 2
category 4
category 5
category 6

GROUP 3
category 7
category 8
category 9 
```

我需要编写一个 MySQL 查询，将每个组内的所有项目视为 OR 语句。因此，选择类别 1 和类别 2，应返回同时标记为类别 1 和类别 2 的所有项目。

并且，每个组之间的项目需要被视为 AND 语句。因此，选择类别 1 和类别 4 只会返回同时包含在类别 1 和类别 4 中的项目。

我可以以简单的形式完成这两个查询，但是当我需要在每个组中包含多个具有多个类别的组时，我似乎无法完成它。

在英语中，最终查询需要能够执行以下操作：

```
"category 1" OR "category 2" OR "category 3" 
AND
"category 4" OR "category 5"
AND
"category 6" OR "category 7" 
```

为此，我一直在为许多查询的许多版本而苦苦挣扎，目前我没有一个可行的答案。作为参考，如果值得的话，这是我目前拥有的：

```
SELECT ct.entry_id,
    ct.entry_date AS date,
    ct.title AS title,
    cp.cat_id AS category_id
FROM exp_channel_titles AS ct
LEFT JOIN exp_channel_data AS cd ON ct.entry_id = cd.entry_id
LEFT JOIN exp_category_posts AS cp ON ct.entry_id = cp.entry_id
WHERE ct.channel_id = '2'                        
AND ct.site_id = '1'

AND cp.cat_id IN (119)
AND cp.cat_id IN (121)

GROUP BY ct.entry_id 
ORDER BY ct.entry_date DESC 
```

where 原因中的 cat_id 行似乎是需要整理的。我也尝试过使用 HAVING，这是我在广义上工作的，但我并不真正理解它，所以我尝试修改它以用于更具体的用途（如果它甚至是正确的使用方式）我' m 没有得到任何有用的结果。以下查询中的变量是根据检查的类别动态构建的：

```
AND ct.entry_id IN (SELECT entry_id
                FROM exp_category_posts 
                WHERE cat_id IN (".$category_ids.") 
                GROUP BY entry_id
                HAVING COUNT(DISTINCT cat_id) = " . 
                count($category_array) . ") 
```

任何指导将不胜感激。

更新：感谢戈登的回答，我现在有一个有效的查询。虽然查询的某些部分是动态构建的（例如选择了哪些类别 ID），但这里是查询的静态版本以供参考：

```
SELECT ct.entry_id,
   ct.entry_date AS date,
   ct.title AS title,
   cp.cat_id AS category_id
FROM exp_channel_titles AS ct
LEFT JOIN exp_channel_data AS cd ON ct.entry_id = cd.entry_id
LEFT JOIN exp_category_posts AS cp ON ct.entry_id = cp.entry_id
WHERE ct.channel_id = '2'                        
AND ct.site_id = '1'
GROUP BY ct.entry_id 
HAVING MAX(CASE WHEN cp.cat_id IN (119,122) THEN 1 ELSE 0 END) = 1 AND
       MAX(CASE WHEN cp.cat_id IN (129,127) THEN 1 ELSE 0 END) = 1 AND
       MAX(CASE WHEN cp.cat_id IN (140) THEN 1 ELSE 0 END) = 1 
ORDER BY ct.entry_date DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:36:50.330

因此，您似乎有一个表 category_posts，每个 entry_id 有多行。您希望 entry_id 各行中的类别满足您的条件。

这需要一个有子句：

```
select cp.entry_id
from category_posts cp left outer join
     group1 g1
     on cp.cat_id = g1.cat_id left outer join
     group2 g2
     on cp.cat_id = g2.cat_id left outer join
     group3 g3
     on cp.cat_id = g3.cat_id
group by cp.entry_id
having max(case when g1.cat_id is not null then 1 else 0 end) = 1 and
       max(case when g2.cat_id is not null then 1 else 0 end) = 1 and
       max(case when g3.cat_id is not null then 1 else 0 end) 
```

也就是说，每个组至少有一个代表类别。

# matlab - foo（x，y：z）的MATLAB含义是什么

> ID：12150423
> 
> 赞同：0
> 
> 时间：2012-08-27T22:21:16.773
> 
> 标签：matlab

这是示例代码：

```
TorqueCurve = [0 400 800 1200 1600 2000 2400];
TorqueCurve(1,2:6); 
```

我目前没有 MATLAB 的副本，所以我自己无法测试，但我想知道：

我的假设是否正确，即第一个声明创建了一个内容为 0、400、800 等的单维变量？

在散文（英​​语）中，第二行的确切含义是什么？它在访问什么，以及如何访问？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:26:08.050

第一行声明一个大小为 1×7 的数组，其中包含`0`、`400`等。

第二行从第 1 行提取第 2 到第 6 列，相当于 write `TorqueCurve(1,[2 3 4 5 6])`。

结果，如果您评估最后没有分号的行，您将看到打印到命令窗口，`400` `800`等等，因为 Matlab 索引是基于 1 的。

# php - 搜索和替换数组php中键的值

> ID：12150436
> 
> 赞同：1
> 
> 时间：2012-08-27T22:22:41.020
> 
> 标签：php, arrays, search, replace

我有这样的数组：

```
array(
    [0] => Array
    (
        [q_id] => 314
        [answer_type] => RI
        [answer] => 3438
        [user_id] => 
    )

[1] => Array
    (
        [q_id] => 286
        [answer_type] => NM
        [answer] => 5
        [user_id] => 
    )

[2] => Array
    (
        [q_id] => 207
        [answer_type] => SS
        [answer] => 1
        [user_id] => 1
    )
 ) 
```

对于所有具有 user_id 值或为空的问题，它预计具有相同的 user_id。我想用现有的 user_id 替换空的 user_ids。

除了循环 / array_walk 之外，还有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:26:01.293

不要这么想。

```
$arr = array_map(function ($val) use ($user_id) {
    if (empty($val['user_id'])) {
        $val['user_id'] = $user_id;
    }

    return $val;
}, $arr); 
```

我当然假设你有 PHP 5.3+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:33:32.127

无论如何，您将需要循环。由于尚不清楚数组的大小/数组的排序方式，因此没有多少方法可以在不遍历它们的情况下分配值。

外箱思考。通常，该数组将在脚本中的某处使用，并且将有代码来访问该数组中的值。当您访问数组时，是否有机会将所需的 user_id 分配给输出？

# java - 使用 Commons HTTPClient 自定义 HTTP 标头？

> ID：12150440
> 
> 赞同：3
> 
> 时间：2012-08-27T22:23:15.537
> 
> 标签：java, apache-commons-httpclient

是否可以使用 Jakarta Commons HTTP 客户端添加您自己的标头？似乎他们只希望您覆盖默认标头（例如：用户代理）：[http ://hc.apache.org/httpclient-3.x/apidocs/constant-values.html#org.apache.commons.httpclient .params.HttpMethodParams.USER_AGENT](http://hc.apache.org/httpclient-3.x/apidocs/constant-values.html#org.apache.commons.httpclient.params.HttpMethodParams.USER_AGENT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:52:48.007

它在 HttpGet 和 HttpPost 类上。奇怪的是他们在两个地方都有它，每个地方都有不同的功能。例如：

```
httpGet.setHeader(name, value); 
```

# node.js - 使用 node.js 改造现有的 Backbone 应用程序以进行服务器端渲染？

> ID：12150442
> 
> 赞同：5
> 
> 时间：2012-08-27T22:23:25.023
> 
> 标签：node.js, backbone.js, serverside-javascript

我有一个 Web 应用程序，其当前结构是使用骨干网和客户端模板在浏览器中呈现所有内容，从 Python 驱动的 JSON API 中提取所有动态内容。一些应用程序内容足够，我不介意将它提供给 Google 并支持非 JS 客户端，所以我一直在考虑转向一种架构，其中第一个请求由渲染的 Node 应用程序处理第一个页面并提供它渲染，之后如果启用 JS 来渲染后续请求，Backbone 将接管客户端，因为它们现在正在工作。

我知道一些努力（比如[Development Seed's bone](https://github.com/developmentseed/bones)）来实施这种策略，但他们似乎期望一个预先计划好的应用程序考虑到他们的使用，无论好坏，我的不是。

我正在寻找可以使这种过渡更容易的工具、库等。如果在某些领域为非 JS 客户提供略有不同的体验是可行的，则可以加分。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:36:00.943

Airbnb 有一篇关于这方面的好文章。我想这个空间在接下来的几个月里会发展得很快。

[http://nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product](http://nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product)

# css - SMACSS、语义类名和嵌套元素

> ID：12150444
> 
> 赞同：8
> 
> 时间：2012-08-27T22:23:30.950
> 
> 标签：css, html, semantics

我刚刚阅读[了 CSS 的可扩展和模块化架构](http://smacss.com/)，它让我思考了一些事情。Snook 的两条原则是：

1.  **增加一段 HTML 和内容的语义价值**
2.  **降低对特定 HTML 结构的期望**

因此，这意味着使用语义类名称而不是依赖非语义元素类型进行定位。例如，而不是定位`.someClass h5`，我可能会定位，`.someClass-title`这样如果 h5 被换成别的东西，事情就不会中断。

就我个人而言，我发现以元素的名称编码元素的层次结构有点令人不快（即使它在语义上是正确的）。我宁愿做`.someClass .title`. 但是要使用像标题一样通用的类，您需要接受这个类将在许多不同的上下文中使用。

那么，如果我知道它会被选择器中的前一个项目命名，那么在完全不同的上下文中使用同一个类有什么问题吗？

例如，假设我的网站中有三个不同的地方，其中一类“标题”是有意义的：

**HTML**

```
<header class="pageHeader">
   <h1 class="title">Some Title</h1>
</header>

...

<article class="leadArticle>
   <h3 class="title">Some Article Title</h3>
</article>

...

<ul class="productPreviews">
   <li class="product">
      <h5 class="title">Some Product Name</h5>
   </li>
</ul> 
```

**CSS**

```
.pageHeader .title
{

}

.leadArticle .title
{

}

.productPreview .product .title
{

} 
```

*编辑：正如[Alohci](https://stackoverflow.com/users/42585/alohci)在下面的回答中提到的那样，标题标签并非没有语义，所以也许这不是最好的例子。*

显然，在这些上下文中我可能会做一些与标题完全不同的事情，但是标题对于它的模块命名空间来说绝对有意义，而且我从来没有打算将标题用作一般选择器。

这似乎勾选了所有方框。它语义丰富，与实现完全解耦。例如，如果将最后一个示例更改为 ol 或一堆 div，则不会破坏任何内容，并且如果将 title 包装在 div 中，它仍然会成为目标。

这对我来说很有意义，但我没有看到这种方法被大量使用，我想知道为什么。一个明显的缺点是您在选择器中链接类，但我认为这比命名每个类名更可取。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T21:48:24.610

我更喜欢使用 .title 之类的类，而不是只选择 h5 元素，因为我觉得它更多地将 HTML 与 CSS 分离。如果无论出于何种原因，您认为 h4 或 h6 更适合文档大纲或其他一些元素/原因，如果您选择 element(h5) 与选择 class(.标题）。

这就是为什么我更喜欢将 ALL THE THINGS 与元素选择器分类的原因，因为标记可能会随着时间而改变。如果您在一个没有看到很多更新的较小站点上工作，这可能不是问题，但最好注意这一点。

**至于在完全不同的上下文中使用同一个类有什么问题，如果你知道它将被选择器中的前一个项目命名，我对此有不同的想法。**

一方面，我想到了一些问题，例如，如果没有父选择器，.title 的使用/含义/角色可能为空。(.pageHeader .title) 虽然我认为 .title 是一个非常好的类名，但其他开发人员可能很难理解它的含义来自父选择器，例如`.pageHeader .title`

另一个问题是，如果您将 .title 类用于模块中的多个“标题”实例，您可能会遇到问题。基本思想是，如果试图在模块内扩展 .title 的可重用性，则提供的局部范围后代选择器有时可能会受到太大限制。我设置了一个代码演示来展示我在[这里](http://codepen.io/bjankord/pen/GuEDH)谈论的内容。

另一方面，后代选择器是最常用的选择器之一，特别是为了它们的作用域目的。

[Tim Murtaugh 是A List Apart](http://alistapart.com/)的开发人员之一（不确定他是否是首席开发人员） ，他在个人网站上的大部分[样式都使用后代选择器。](http://timmurtaugh.com/wp-content/themes/basicmaths/css/style.default.css?ver=1.1)

我最近一直在探索这个和 BEM，并且同意你的结论，“这比命名每个类名更可取。”

我更喜欢 .pageHeader .title{...} 与 .pageHeader__title{...} 但在某些情况下，一种方法可能比另一种方法更有益。

与大多数事情一样，这取决于，但我认为如果你不让嵌套太深并且考虑如何使用它们，后代选择器是提供本地范围样式的强大且良好的解决方案，同时也为全局提供解决方案范围样式。

例如：

```
/* Globally scoped styles for all .title(s) */
.title{
   font-family: serif;
   font-weight: bold;
}

/* Locally scoped styles for individual .title(s) */
.pageHeader .title {
    color: #f00;
}

.leadArticle .title {
    color: #00f;
}

.productPreview .product .title {
   color: #0f0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:50:24.063

我觉得这个没什么好说的。你所做的很好，尽管它不是为 CSS 组织标记的唯一方法。要理解的重要一点是类名不是 CSS 的一部分，它们是 HTML 的一部分。

因此，应用于元素的类在 HTML 术语中不是由它们在 DOM 树中的祖先“命名空间”，而是独立存在的。因此，在示例中使用“title”作为每个元素的类名是合理的，因为它们在标题方面都是相似的。

一个相反的例子是使用“note”的类名，其中一个元素表示一种注释，但在另一个元素上表示音符，然后假设可以通过检查祖先元素来区分它们的含义. 这不是 HTML 类应该如何工作的。

注意到关于`<h5>`. 在 CSS 选择器中使用元素名称只是描述要设置样式的元素之间关系的另一种方式。`.product h5`作为选择器的意思是“在类'产品'的子树的上下文中设置第五级标题，就像这样......”。这是一个不同的陈述，`.product .title`它的意思是“在类'product'的子树的上下文中类'title'的样式元素......”。两种说法都很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-08T15:03:20.623

需要注意的一件非常重要的事情是，浏览器从右到左而不是从左到右读取 CSS，因此如果您将选择器构建为几层深度，那么浏览器要做的工作就更多了。

```
.pageHeader .title {}
.leadArticle .title {}
.productPreview .product .title {} 
```

所以这是一个 .title 但在不同的上下文中。渲染时浏览器将检查子元素是否放置在特定父元素内，然后它将应用相应的规则。

```
.pageHeader-title {}
.leadArticle-title {}
.productPreview .product-title {} 
```

这里我们有 3 个非常不同的标题（不是一个！），所以浏览器不会做任何额外的计算，也不会检查孩子是否是特定父母的孩子。我们这里还有更扁平的模块结构，这总是很好。

永远记住，嵌套选择器并以相同的方式命名它们但在不同的上下文中会影响性能那么重要的是要知道如何正确地构建你的标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T15:30:39.203

它有时被称为“父子关系”（[http://thesassway.com/advanced/modular-css-naming-conventions](http://thesassway.com/advanced/modular-css-naming-conventions)），通常建议使用`.page-header-title`.

在您的情况下`.page-header`，可以将其视为组件和`.title`组件。RCSS ( [https://github.com/rstacruz/rscss/](https://github.com/rstacruz/rscss/) ) 标准倡导者`.page-header > .title`。我个人认为这不是一个好主意。考虑以下：

```
<header class="page-header">
<h2 class="title">
  <span class="tooltip">
    <span class="title">..</span>
  </span>
</h2>
</header> 
```

`.tooltip > .title`无意中继承自`.page-header > .title`.

所以我会去`.page-header-title`。

当您确实打算从基类继承标题时，只需将类添加到 HTML 元素

```
<header class="page-header">
<h2 class="page-header-title title">
</h2>
</header> 
```

现在`page-header-title`包含特定于组件的样式并`title`增加了抽象标题样式。是的，它很冗长，但很安全。在这里，如果有任何兴趣，我对如何保持风格级联理智并拥有干净和明显的抽象的详细意见[https://github.com/dsheiko/pcss](https://github.com/dsheiko/pcss)

# ruby-on-rails - 将代码注入红宝石状态机？

> ID：12150448
> 
> 赞同：3
> 
> 时间：2012-08-27T22:23:50.983
> 
> 标签：ruby-on-rails, ruby, state-machine

我想对 pluginaweek 状态机（https://github.com/pluginaweek/state_machine）进行猴子补丁，以便我可以从 mixin 模块将代码注入状态机。有谁知道如何在状态机中定义一个新方法来做到这一点？或者，也许有更好的方法来做我想要完成的事情？

假设，

```
class Artifact < ActiveRecord::Base
  include Provisionable # << This module makes the magic method 'provision',
                        # << below, available

  state_machine :machine_state, :initial => :s_initial do
    # ...
    provision(:param1, :param2, :param3) # << The Question: how to define
                                         # << this in the Provisionable mixin
                                         # << module, below
    ...
  end
...
end

module Provisionable
  #
  # << provision() is supposed to inject the desired code into the state machine:
  #
  def provision

    # << Code sample to be injected begins here:
    event :parameterize do
      transition :s_unprovisioned => :s_initial
    end
    before_transition :s_unprovisioned => :s_initial do |artifact, transition|
      transition.args.each_pair do |param, value|
        # etc...
      end
    end
    # >> Code to be injected ends here.

  end
end 
```

对于那些购买状态机的人，我强烈推荐这个。

谢谢！

[稍后添加：]我制定了一个解决方案，希望对其他人有所帮助。我没有混入一个模块，而是修改了 state_machine 以添加实例方法来注入代码。

```
StateMachine::Machine.class_eval do
    def inject_provisioning()

        event :start do
            transition :s_initial => :s_provisioning
        end
        after_transition :s_initial => :s_provisioning do |goal, transition|
            # Do useful stuff here
            true
        end

        event :provision do
            transition :s_provisioning => :s_completed
        end

        before_transition :s_provisioning => :s_completed do |goal, transition|
            artifact_type = transition.args[0]
            params = transition.args[1]
            # Useful stuff here
            true
        end

        after_transition :s_provisioning => :s_completed do |goal, transition|
            artifact_type = transition.args[0]
            params = transition.args[1]
            # Useful stuff here
        end
    end

    def inject_expiration()
        event :chron do
            expired_callback = lambda \
                do |goal|
                    return false if goal.expires_at == :never
                    goal.expires_at.to_i < DateTime.now.to_i
                end
            active_callback = lambda \
                do |goal|
                    return true if goal.expires_at == :never
                    goal.expires_at.to_i >= DateTime.now.to_i
                end
            transition all - :s_expired => :s_expired, :if => expired_callback
        end

        before_transition all - :s_expired => :s_expired do |goal, transition|
            goal.undo
        end
    end 
```

现在，当我在类中打开 state_machine 定义时，我可以进行简单的类似宏的调用来注入代码：

```
state_machine :machine_state, :initial => :s_initial do
    inject_provisioning
    inject_expiration
end 
```

希望其他人觉得这很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:21:34.587

很难确切地说出您要做什么，但希望这段代码会有所帮助

```
class Artifact < ActiveRecord::Base
  extend Provision

  attr_accessible :some_value, :state

  state_machine :state, :initial => :initial do
    event :foo do
      transition :initial => :bar
    end

    Artifact.provision(self, :param1, :param2, :param3)

    event :fud do
      transition :bar => :initial
    end

  end
end 
```

注意 - 我们混合使用`extend`而不是`include`- 将方法放在类级别而不是实例，将`self`（这是状态机）传递给方法

```
module Provision
  def provision(state_machine, *args)

    state_machine do
      event :provision do
        transition :initial => :provisioned
      end

      event :deprovision do
        transition :provisioned => :deprovisioned
      end

      before_transition :provisioned => :deprovisioned do |item, transition|
        # transition.args.length == 0
        args.each do |arg|
          puts arg
        end
      end
    end

  end
end 
```

# html - 如何将网页的各个部分居中

> ID：12150449
> 
> 赞同：0
> 
> 时间：2012-08-27T22:24:01.653
> 
> 标签：html, center, webpage

我正在开发一个分成三部分的网站。我在绝对中心有图像，左右有文字。当网页的宽度改变时，我如何将每个单独的部分居中，使其按比例居中？涉及margin-left/right auto的东西？

希望一切都有意义..

谢谢！

文字图

| 1 | 2 | 3 |

拉伸网页

| * * 1 * * | * * 2 * * | * * 3 * * |

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:49:57.770

如果您提前知道每列内容的宽度，则可以使用 3 个缩放 div 来表示列，每个列都包含一个固定宽度的居中 div 用于内容。

在正文中，对于三列，您可以拥有（将像素宽度替换为适合您页面的大小）：

```
 <div class="outer" style="margin-left:0; margin-right:67%;">
    <div class="inner" style="width: 100px;">
    <p>some text</p><p>more text</p></div></div>

    <div class="outer" style="margin-left:33%; margin-right:33%;">
    <div class="inner" style="width: 200px;">
    <img src="someimage"></div></div>

    <div class="outer" style="margin-left:67%; margin-right:0;">
    <div class="inner" style="width: 150px;">
    <p>and another<br>piece of text</p></div></div> 
```

并且，在头部，每种类型的 div 的样式。

```
 <style type="text/css">
    .outer {
    position:absolute;
    width:33%;
    }
    .inner {
    margin-left:auto;
    margin-right:auto;
    }
    </style> 
```

根据您网站的需要，对于每个内部 div，您可以设置绝对大小、设置相对大小（作为包含 33% 宽度 div 的百分比）或设置绝对左边距和右边距宽度。

# .htaccess - htaccess 值未传递给脚本 $1 和 $2

> ID：12150451
> 
> 赞同：1
> 
> 时间：2012-08-27T22:24:10.717
> 
> 标签：.htaccess, mod-rewrite, rewrite

我不完全确定出了什么问题，很可能我的 htaccess 是错误的。无论如何，服务器上有两个文件，一个名为“club.php”，另一个名为“image.php”，club.php 被重新编写，看起来像一个目录；俱乐部1

没有重写 ex 的 url 看起来像这样；club.php?cid=1 *cid 是俱乐部 ID*

现在 image.php 文件的目标是通过路径从数据库调用图像并将其显示给用户，而无需在服务器上公开实际的图像路径。

为此，有两个值被传递到查询“cid”和“type”中。我当前的 htaccess 的问题是，每当有一个反斜杠添加到 club1 时，它就会停止工作并且显示数据同样发生在 image.php 上，它不再工作了。

因为我使用的是 club1/some-page-name 风格的架构，所以需要反斜杠。但遗憾的是，它们不适用于我目前的重写规则。

这是我目前的 htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteRule ^club([0-9]+) index.php?clubID=$1 [L]

    RewriteRule ^image/_header([0-9]+)_([0-9]+) image.php?cid=$1&type=$2 [L]

        <IfModule mod_env.c>
             SetEnv SEO_SUPPORT 1
        </IfModule>
</IfModule> 
```

有人可以指出我做错了什么以及我可以做些什么来解决反斜杠问题。预先感谢您。

文件树

```
http://localhost/dev1
       - index.php
       - image.php
       - club.php
       - .htaccess
       -> php
          - db.class.php
          - functions.class.php
       -> css
          - menu.css
       -> js
          - html5handler.js
       -> uploads 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:09:08.593

发现了问题。问题是因为 /page 在 club# 之后被添加到 url 中，它强制图像脚本指向主目录而不是它的测试目录 /dev1 所以 url 会变成

image/_header1_4 而不是 dev1/image/_header1_4

所以最后这不是htaccess问题

# objective-c - 如何通过渐变的alpha来掩盖cocos2d中的精灵？

> ID：12150454
> 
> 赞同：5
> 
> 时间：2012-08-27T22:25:04.880
> 
> 标签：objective-c, opengl-es, cocos2d-iphone, mask

我想这样做，以便 CCNode（可能是 CCLayer、CCSprite 等）可以用着色器遮盖其所有子节点，以便在它们接近节点边界时逐渐遮盖它们，而无需修改它们的不透明度直接取值。例如，菜单可能如下所示：

![带有在边缘附近消失的项目的菜单](../Images/037e569596898dc4f884b54f20f44ca8.png)

在这种情况下，掩码将是一个渐变，可能看起来像这样：

![在此处输入图像描述](../Images/3872d4a21269f6b8f961ebc66d8c97d4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:02:28.607

我知道这可能不是您想要的机制，但我最近想要一个以循环方式变化的渐变 alpha。我有一些会围绕精灵旋转的文本，我只希望它在圆圈顶部时可见。

对我来说最简单的方法是创建一个圆形带子的精灵，其中带子在底部是完全“黑色”，在顶部逐渐变回完全透明。

通过将其放在 z 顺序的上方，我得到了我想要的效果。我想你可以通过这种方式达到同样的效果

要查看它的实际效果，请查看我的应用程序的主菜单，Claustrophobic。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:39:56.693

[Ray Wenderlich 的网站上](http://www.raywenderlich.com/4428/how-to-mask-a-sprite-with-cocos2d-2-0)提供了创建遮罩精灵的基本教程，但我不确定它是否也允许您遮罩子节点。如果没有，那么您可能必须使用`CCRenderTexture`, 将子节点绘制到纹理，然后最后使用教程中创建的遮罩节点对其进行遮罩。

# c++ - static_cast/dynamic_cast：它会改变对象吗？

> ID：12150455
> 
> 赞同：0
> 
> 时间：2012-08-27T22:25:13.100
> 
> 标签：c++, pointers, casting

`static_cast`我对 C++有一些疑问`dynamic_cast`。他们是否通过保留已经设置的成员变量（除了那些不能从派生传递到基的变量）将指针指向的对象从一个类*完全*`A`更改为一个类？`B`

我注意到如果我有类似的东西

```
struct Base
{
    Base() { }
    virtual ~Base() { }
    virtual void Method() { cout << "Base Method"; }
};

class Derived : public Base
{
public:
    virtual void Method() { cout << "Override Method"; }
};

struct Derived2 : public Derived
{
    Derived2() { cout << "Derived2 constructor"; }
    void Method() { cout << "Override2 Method"; }
};

int main()
{       
    Base *myPointer = new Derived();    
    static_cast<Derived2*>(myPointer)->Derived2::Method();   
    delete myPointer;    
    return 0;
} 
```

构造函数没有被调用，但是方法被调用了。这怎么可能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T22:27:59.403

演员表根本不会改变对象。它们只为您提供指向继承层次结构中相关类类型的不同*指针：*

```
Derived x;

Base         * p = &x;
AnotherClass * q = dynamic_cast<AnotherClass*>(p);

// q may or may not be NULL 
```

例如，如果我们有一个层次结构`AnotherClass : Base`和`Derived : AnotherClass`（并且`Base`是多态的），上述动态转换就会成功。

*当您已经知道*您有一个更派生的动态类型，但碰巧只有一个指针或对基的引用`static_cast`时，通常可以使用A。

 *（静态转换永远不能用于从虚拟基础进行转换，在这种情况下，您*总是*需要`dynamic_cast`.）*

# internet-explorer-9 - 当您有图像和内容（div）时，jquery easyslider 在 IE8 和 IE9 上是否损坏？

> ID：12150457
> 
> 赞同：2
> 
> 时间：2012-08-27T22:25:35.920
> 
> 标签：internet-explorer-9, easyslider

我使用 easyslider，它在 Firefox、IE 7 中运行良好，但在 IE 8/9 中，当我有内容和图像时，最奇怪的事情发生了。背景图像与我拥有的内容不一致。

所以如果它有：

*   图片 1 与内容 1
*   图片 2 与内容 2
*   图 3 与内容 3

一切总是排队，但在 IE9 中，我看到：

*   图片 1 与内容 2
*   图片 2 与内容 3
*   图 3 与内容 1

当我将浏览器更改为兼容模式时，它又可以正常工作了，但是如果我将其删除，它就会回到上面的问题。很奇怪。

这是我的CSS：

```
 <style type="text/css">
    .slider-container
    {
        width: 639px;
        overflow: hidden;
        background: url(http://www.mysite.com/image.png) no-repeat -0px top transparent;
        height: 291px;
        padding: 2px 0 0 4px;
        position: relative;
    }
    .slider
    {
        width: 639px;
        height: 271px;
        overflow: hidden;
        position: relative;
        margin-top: 0;
        margin-left: 0px;
    }
    #slider
    {
        width: 639px;
        height: 271px;
        overflow: hidden;
        position: relative;
        margin-top: 0;
        margin-left: -43px;
    } 
```

这是我的html：

```
 <div class="slider-container">
    <div id="slider">
        <ul class="slider">

                 <li>
                    <img alt="" id="slide1" src="http://www.internationalnetworksolutions.net/images/1245854909_content_graphic_cost-savings.jpg" style="width: 639px; height: 271px" />
                    <div class="slider-content">
                        <p class="title">Title1</p>
                        <p class="text">Text1</a></p>
                    </div>
                </li>

                 <li>
                    <img alt="" id="slide2" src="http://media.treehugger.com/assets/images/2011/10/20081023-altamont-pass-wind-turbine.jpg" style="width: 639px; height: 271px" />
                    <div class="slider-content">
                        <p class="title">Title 2</p>
                        <p class="text">Text 2</a></p>
                    </div>
                </li>

                 <li>
                    <img alt="" id="slide5" src="http://www.psdgraphics.com/wp-content/uploads/2009/03/world-map-background.jpg" style="width: 639px; height: 271px" />
                    <div class="slider-content">
                        <p class="title">Title 3</p>
                        <p class="text">Text 3</a></p>
                    </div>
                </li>

        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:03:02.300

您是否正确设置了 DOCTYPE？也许：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"> 
```

我也觉得这很有用：

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/> 
```

也去掉多余的

```
</a> 
```

在滑块内容中...

背景CSS上的-0px还有什么意义？

# c++ - TinyXML 循环遍历元素

> ID：12150465
> 
> 赞同：9
> 
> 时间：2012-08-27T22:26:13.470
> 
> 标签：c++, xml

使用 TinyXML 读取 xml 文件。我想循环多个元素，但由于某种原因，它只循环第一个元素。一个简短的示例 xml 文件将是：

```
<root>
    <wave_manager name="WaveManager01">
    </wave_manager>
    <wave_manager name="WaveManager02">
    </wave_manager>
</root> 
```

循环的代码是：

```
TiXmlElement* root = _waveDoc.FirstChildElement("root");
for(TiXmlElement* e = root->FirstChildElement("wave_manager"); e != NULL; e = root->NextSiblingElement("wave_manager"))
{
    string wmName = e->Attribute("name");

} 
```

所以这只循环一次并且wmName确实显示WaveManager01，但是for循环存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-01-05T23:08:45.943

您的`for`声明是在每次迭代时将元素重置`e`为根。它应该转到列表中的下一个元素 - `e`。

这是正确的代码：

```
TiXmlElement* root = _waveDoc.FirstChildElement("root");

for(TiXmlElement* e = root->FirstChildElement("wave_manager"); e != NULL; e = e->NextSiblingElement("wave_manager"))
{
    string wmName = e->Attribute("name");

} 
```

# r - gofstat 结果：AD 和 KS 测试

> ID：12150467
> 
> 赞同：0
> 
> 时间：2012-08-27T22:26:28.640
> 
> 标签：r

我正在使用 fitdistr 包的 gofstat 函数来运行 Anderson-Darling 和 Kolmogorov-Smirnov 测试。我的结果是（p=0,05）：

```
$chisq
[1] 11.64559

$chisqbreaks
V149    V113     V12    V133    V152    V157    V146    V127 
0.00001 0.00341 0.00461 0.00571 0.00681 0.00931 0.01161 0.01601 

$chisqpvalue
[1] 0.07035865

$chisqdf
[1] 6

$chisqtable
       obscounts theocounts
<= 1e-05   12.000000   8.613365
<= 0.00341  8.000000  10.913812
<= 0.00461  8.000000   5.108425
<= 0.00571  8.000000   5.114935
<= 0.00681  8.000000   5.385660
<= 0.00931  8.000000  12.362122
<= 0.01161  8.000000  10.182407
<= 0.01601  8.000000  12.960688
> 0.01601   9.000000   6.358586

$ad
[1] 1.449119

$adtest
[1] "rejected"

$ks
[1] 0.1278385

$kstest
[1] "not rejected" 
```

我的问题是：我怎么知道 AD 和 KS 被拒绝了？在网上搜索我发现[http://www.eridlc.com/onlinetextbook/index.cfm?fuseaction=textbook.appendix&FileName=Table7](http://www.eridlc.com/onlinetextbook/index.cfm?fuseaction=textbook.appendix&FileName=Table7)有一个 KS 表`n=77`，D 的最大值是 0.15.... 但应该程序是否还返回最大 D 值和 AD 的等效值？给出 KS 和 AD 值而不是它们的最大值的目的是什么？如果我没有看到明显的东西，我很抱歉。谢谢！

编辑：如果您使用，请`gofstat`注意使用`adk.test`并`ks.test`比较结果。`adk.test`并且由于结果差异很大，因此也使用大量值和 bootstrap。在我的情况下，`gofstat`AD测试被拒绝为Normal但使用`adk.test`它不是......`p-values`大约0,20（n = 100000）......

# javascript - 使用 Jquery 选择一个 td 元素

> ID：12150470
> 
> 赞同：1
> 
> 时间：2012-08-27T22:26:59.293
> 
> 标签：javascript, jquery

我想通过我的表的'td'，检查数据属性并根据该属性做一些事情。我这样做了：

```
<li id="person1" data-city="Boston, New York, San Fransisco">
    Person name 1
</li>
<li id="person1" data-city="down, Washington">
    Person name 2
</li>
<td data-city="down"> TEST </td>

$('li[data-city*="down"]').css('color','red');​ 
```

[http://jsfiddle.net/fR8rJ/3/](http://jsfiddle.net/fR8rJ/3/)

但我不能让它适用于 'td' 元素。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:29:07.060

你不能有一个 orphan `td`，它不是有效的 HTML，jQuery 不允许你选择它。它需要在 a 内`tr`，它本身也需要在一个`table`元素内：

```
<table>
  <tr>
    <td data-city="down"> TEST </td>
  </tr>
</table> 
```

只有这样你才能执行`$('td[data-city*="down"]').css('color','red');`。

**[演示](http://jsfiddle.net/fR8rJ/5/)**。

# r - 使用 data.table 加速 rollapply

> ID：12150472
> 
> 赞同：6
> 
> 时间：2012-08-27T22:27:01.450
> 
> 标签：r, dataframe, data.table, apply, xts

我是 data.tables 的新手，如果这是一个非常基本的问题，我深表歉意。

我听说 data.tables 在处理大量数据时显着提高了计算时间，因此想看看 data.table 是否能够帮助加快 rollapply 功能。

如果我们有一些单变量数据

```
xts.obj <- xts(rnorm(1e6), order.by=as.POSIXct(Sys.time()-1e6:1), tz="GMT") 
colnames(xts.obj) <- "rtns" 
```

宽度为 100 且 ap 为 0.75 的简单滚动分位数需要非常长的时间...

即代码行

```
xts.obj$quant.75 <- rollapply(xts.obj$rtns,width=100, FUN='quantile', p=0.75) 
```

似乎需要永远...

data.table 有什么可以加快速度的吗？即是否有可以应用的通用滚动功能？

也许是将 xts 对象转换为 data.table 对象以加速执行功能然后在最后重新转换回 xts 的例程？

提前致谢

hlm

ps 我似乎没有在 data.table 邮件列表上得到太多回复，所以我在这里发帖，看看我是否能得到更好的回复。

pps 快速了解另一个使用数据帧的示例，data.table 解决方案似乎比 rollapply 函数花费的时间更长，即如下所示：

```
> x <- data.frame(x=rnorm(10000))
> x.dt <- data.table(x)
> system.time(l1 <- as.numeric(rollapply(x,width=10,FUN=quantile,p=0.75)))   
   user  system elapsed 
   2.69    0.00    2.68 
> system.time(l <- as.numeric(unlist(x.dt[,lapply(1:((nrow(x.dt))-10+1), function(i){ x.dt[i:(i+10-1),quantile(x,p=0.75)]})])))
   user  system elapsed 
  11.22    0.00   11.51 
> identical(l,l1)
[1] TRUE 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T03:26:32.820

datatable 在这里无关紧要-您实际上是`sapply`在向量上运行，这几乎是您可以获得的最快的操作（除了转到 C 之外）。数据框和数据表总是比向量慢。您可以通过使用直向量（没有 xts 分派）获得一点好处，但快速完成此操作的唯一简单方法是并行化：

```
> x = as.vector(xts.obj$rtns)
> system.time(unclass(mclapply(1:(length(x) - 99),
                      function(i) quantile(x[i:(i + 99)], p=0.75), mc.cores=32)))
   user  system elapsed 
325.481  15.533  11.221 
```

如果您需要更快，那么您可能需要编写一个专门的函数：天真的应用方法重新排序每个明显浪费的块 - 您需要做的就是删除一个元素并在下一个元素中排序以获得分位数，所以如果你这样做，你可以预期大约 50 倍的加速 - 但你必须自己编写代码（所以只有更频繁地使用它才值得......）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T04:09:25.000

`data.table`通过按键拆分数据来快速工作。我认为`data.table`目前不支持滚动键，或者在`by`or`i`参数中会执行此操作的表达式。

`data.table`您可以使用子集比 a更快的事实`data.frame`

```
DT <- as.data.table(x)
.x <- 1:(nrow(DT)-9)
system.time(.xl <- unlist(lapply(.x, function(.i) DT[.i:(.i+10),quantile(x,0.75, na.rm = T)])))
   user  system elapsed 
   8.77    0.00    8.77 
```

或者，您可以构建唯一标识滚动 ID 的关键变量。宽度 = 10，因此我们需要 10 列（用 填充`NA_real_`）

```
library(plyr) # for as.quoted
.j <- paste0('x',1:10, ':= c(rep(NA_real_,',0:9,'),rep(seq(',1:10,',9991,by=10),each=10), rep(NA_real_,',c(0,9:1),'))')

 datatable <- function(){
   invisible(lapply(.j, function(.jc) x.dt[,eval(as.quoted(.jc)[[1]])]))
x_roll <- rbind(x.dt[!is.na(x1),quantile(x,0.75),by=x1],
  x.dt[!is.na(x2),quantile(x,0.75),by=x2],
  x.dt[!is.na(x3),quantile(x,0.75),by=x3],
  x.dt[!is.na(x4),quantile(x,0.75),by=x4],
      x.dt[!is.na(x5),quantile(x,0.75),by=x5],
      x.dt[!is.na(x6),quantile(x,0.75),by=x6],
      x.dt[!is.na(x7),quantile(x,0.75),by=x7],
      x.dt[!is.na(x8),quantile(x,0.75),by=x8],
      x.dt[!is.na(x9),quantile(x,0.75),by=x9],
      x.dt[!is.na(x10),quantile(x,0.75),by=x10],use.names =F)

setkeyv(x_roll,'x1')

invisible(x.dt[,x1:= 1:10000])
setkeyv(x.dt,'x1')
x_roll[x.dt][, list(x,V1)]}

l1 <- function()as.numeric(rollapply(x,width=10,FUN=quantile,p=0.75))
lapply_only <- function() unclass(lapply(1:(nrow(x) - 9), function(i) quantile(x[['x']][i:(i + 9)], p=0.75)))

benchmark(datatable(),l1(),lapply_only(), replications = 5)
##            test replications elapsed relative user.self 
## 1   datatable()            5    9.41 1.000000      9.40      
## 2          l1()            5   10.97 1.165781     10.85        
## 3 lapply_only()            5   10.39 1.104145     10.35 
```

## 编辑---基准测试

`data.table`比 rollapply 和 raw lapply 更快。我无法测试并行解决方案。

# java - 将字节流输出到标准输出

> ID：12150473
> 
> 赞同：5
> 
> 时间：2012-08-27T22:27:06.450
> 
> 标签：java, base64, stdout, encryption

我有以下函数，它解密 base64 文件并将其写入 txt 文件。但是，我希望它输出到标准输出，而不是写入文本文件。你能建议我们怎么做吗

```
CipherOutputStream cos = new CipherOutputStream(os, cipher);
    doCopy(is, cos);

}

public static void doCopy(InputStream is, OutputStream os) throws IOException {
    byte[] bytes = new byte[64];
    int numBytes;
    while ((numBytes = is.read(bytes)) != -1) {
        os.write(bytes, 0, numBytes);
    } 
```

因此，与其将 os.write 流写入 txt 文件，不如将其写入标准输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T22:31:43.640

[PrintStream](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html)（stdout 类）有一个 write 方法，可以调用该方法将 byte[] 写入 stdout。

# jquery - jQuery 网格字符集

> ID：12150475
> 
> 赞同：2
> 
> 时间：2012-08-27T22:27:14.810
> 
> 标签：jquery, character-encoding, struts2-jquery, jqgrid

我目前正在使用 jQuery Grid 来显示用西班牙语编写的数据，数据完美地显示为带有重音符号 (´) 但是每当我尝试使用重音符号搜索数据时，服务器都会得到一个格式错误的字符串，例如 ∫√ 而不是带有重音符号的字母。

我也确信这是一个 jQuery Grid 问题，因为我能够发送带有重音的数据，并在同一页面中提交表单。

我还在标题中添加了内容类型，如下所示：

```
<%@ page contentType="text/html;charset=UTF-8" %>
<sj:head jquerytheme="redmond" locale="es" /> 
```

这是我与 struts2 插件一起使用的 jQuery 网格的代码。

```
<s:url id="remoteurl" action="tabla-historial-director"  />
<s:url id="selectperiodourl" action="periodos" />

<sjg:grid
    id="grid"
    caption="Trabajos Terminales dirigidos"
    dataType="json"
    href="%{remoteurl}"
    pager="true"
    navigator="true"
    navigatorAdd="false"
    navigatorDelete="false"
    navigatorEdit="false"  
    gridModel="gridModel"
    rowList="3,10,15,20"
    rowNum="10"
    hidegrid="false"
    gridview="true"
    viewrecords="true"
>
    <sjg:gridColumn 
    align="center"  
        name="numRegistro"
        index="numRegistro"
        title="No. de registro"
        width="120"
        sortable="true"
        search="true"
        searchoptions="{sopt:['eq']}"
    />
    <sjg:gridColumn
        name="titulo"
        index="titulo"
        title="Título"
        width="840"
        search="true"
        searchoptions="{sopt:['cn']}"
    />
    <sjg:gridColumn
        align="center"
        name="tipo"
        index="tipo"
        title="Tipo"
        width="60"
        search="false"
    />
    <sjg:gridColumn
        align="center"
        name="periodo"
        index="periodo"
        title="Periodo"
        width="80"
        search="true"
        surl="%{selectcountrysurl}"
        searchoptions="{sopt:['eq'], dataUrl : '%{selectperiodourl}'}"
        searchtype="select"
    />
    <sjg:gridColumn
        align="center"
        index="objetivo"
        name="objetivo"
        editable="true"
        sortable="true"
        hidden="true"
        editrules="{ edithidden : true } "
        title="Objetivo"
        width="20"
    />
    <sjg:gridColumn 
        search="false"
        sortable="false"
        name="idTT"
        key="true" 
        title="Acción"
        width="80"
        formatter="formatLink"
    />
</sjg:grid> 
```

请我想知道如何使用搜索按钮和西班牙口音，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:21:48.670

有人可能在这里解决了类似的问题： [JQuery punctuation for spanish (ó, í, etc.) not working in IE8](https://stackoverflow.com/questions/2607008/jquery-punctuation-for-spanish-o-i-etc-not-working-in-ie8)

他做了以下事情：

```
header("text/html; charset=iso-8859-1"); 
```

以下是此答案中的更多线索： [jQuery AJAX Character Encoding](https://stackoverflow.com/questions/553463/jquery-ajax-character-encoding-problem)

这家伙说：“UTF-8 应该处理所有的重音和外来字符——为什么不在你的数据源上使用它呢？

首先，一切都应该是 UTF-8。我在 notepad++ 中加载了文件，转换为 utf-8 并手动将字符更改为重音。一旦完成，一切都会像魅力一样工作。

顺便说一句，除非您的服务器被定义为 php-process .html 文件，否则您使用 ajax 加载的文件不会获得您的 iso 字符集。如果您坚持使用 iso 字符集，请请求 php 文件而不是 html 文件，并在标题中定义字符集（而不是在文件本身中）”

这对你有帮助吗？

您可以随时尝试 html 友好代码，并将它们替换为您的搜索： [http ://webdesign.about.com/od/localization/l/blhtmlcodes-sp.htm](http://webdesign.about.com/od/localization/l/blhtmlcodes-sp.htm)

另一个人在这里遇到了一些西班牙语字符问题：http: [//ianloic.com/2009/12/27/jquery-selector-escaping/](http://ianloic.com/2009/12/27/jquery-selector-escaping/)

他写了一个转义函数，可能不是你想要的：

```
(function($) {
if ($) {
var escape_re = /[#;&,\.\+\*~':"!\^\$\[\]\(\)=>|\/\\]/,
escapeCharacters = {
‘#’: 1,
‘;’: 1,
‘&amp;’: 1,
‘,’: 1,
‘.’: 1,
‘+’: 1,
‘*’: 1,
‘~’: 1,
‘\”: 1,
‘:’: 1,
‘”‘: 1,
‘!’: 1,
‘^’: 1,
‘$’: 1,
‘[': 1,
']‘: 1,
‘(‘: 1,
‘)’: 1,
‘=’: 1,
‘&gt;’: 1,
‘|’: 1,
‘/’: 1,
‘\\’: 1
};
$.escape = function(s){
var ret = ”, offset;
if (s && ((offset = s.search(escape_re)) !== -1)) { // look for an occurence of a special character
ret = s.substr(0, offset) + ‘\\’ + s[offset];
for(var i=offset + 1, len=s.length, ch; i < len; i++){ // assume that another special character may occur so we just loop through the rest of the string
ch = s[i];
ret += (escapeCharacters[ch]? '\\': '') + ch;
}
}
return ret;
};
}
})(window.jQuery); 
```

hth

# html - 编辑失败后重新显示带有错误消息的表单 (PUT)

> ID：12150476
> 
> 赞同：0
> 
> 时间：2012-08-27T22:27:16.077
> 
> 标签：html, forms, rest, spring-mvc

我正在尝试创建一个 Spring MVC 控制器，该控制器可以`Player`使用 HTML 表单创建和编辑简单的域对象 (a)。[最好以 RESTful 方式](https://stackoverflow.com/questions/46004/how-do-you-implement-resource-edit-forms-in-a-restful-way)。当提交的表单中有错误时，我遇到了编辑问题。我希望客户端（浏览器）显示错误消息和原始表单，以便用户可以更正并重新提交。

但我无法让它发挥作用。出现错误时，我可以让 Web 应用程序重新显示原始表单，但没有错误消息。我认为是因为在这种情况下我的代码会重定向到表单页面。我尝试删除重定向，但随后 Web 服务器抱怨`PUT`该资源不允许。我需要做什么？

这是我的控制器的相关代码：

```
 @Controller
 @RequestMapping({
    "/player"
 })
 public class PlayerController {

    @RequestMapping(value = "/{id}/edit", method = RequestMethod.PUT)
    public String editPlayer(@PathVariable("id")
    final long id, @Valid
    @ModelAttribute(Model.PLAYER)
    final PlayerModel player, final BindingResult result) {
       if (!result.hasErrors()) {
          final Player playerEntity = playerService.find(id);
          playerEntity.setName(player.getName());
          playerService.update(playerEntity);
          return "redirect:/player/" + id;
       } else {
          return "redirect:/player/" + id + "/edit";
       }
    }

    @RequestMapping(value = "/{id}/edit", method = RequestMethod.GET)
    public String showEditPlayerPage(@PathVariable("id")
    final long id, final org.springframework.ui.Model model) {
       createModel(id, model);
       return View.EDIT_PLAYER;// the player editing page
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public String showPlayerPage(@PathVariable("id")
    final long id, final org.springframework.ui.Model model) {
       // ...
       return View.PLAYER;// the read-only view of a player
    }

    // Other code
 } 
```

我在 上有 JSR-303 验证注释，如果太短或太长`PersonModel`会触发验证失败。`name`编辑表单的 HTML 是这样的：

```
 <form:form commandName="player" method="PUT">
    <fieldset>
       <table>
          <tr>
             <th><label for="player_name">Player Name:</label></th>
             <td><form:input path="name" size="64" maxlength="64"
                   id="player_name" /> <br /> <small
                id="player_name_msg">Not empty, but no more
                   than 64 characters.</small> <form:errors path="name"
                   class="error" /></td>
          </tr>
       </table>
       <input type="submit" value="Submit"></input>
    </fieldset>
 </form:form> 
```

* * *

**编辑：**

需要明确的是，对于表格有效的情况，一切正常。我有用于将 PUT 转换为 POST 的 servlet 过滤器，它似乎工作正常。

* * *

**编辑2：**

实验和修补表明我的控制器正在执行；PUT 的拒绝发生*在*我的控制器执行后。似乎 Spring 不喜欢对 PUT 的响应使用视图名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:28:32.900

所以，我的问题的一个原因是坚持使用 HTTP PUT 来改变玩家实体（资源）。我坚持这样做是因为我相信这是纯粹的 RESTful 做事方式：POST 用于创建，PUT 用于更改。但似乎我和其他人错了：[使用 POST 进行更改是可以的](http://roy.gbiv.com/untangled/2009/it-is-okay-to-use-post)。

我因此改变了我的控制器：

```
 @Controller
 @RequestMapping({
    "/player"
 })
 public class PlayerController {

    @RequestMapping(value = "/{id}", method = RequestMethod.PUT)
    @ResponseStatus(HttpStatus.NO_CONTENT)
    public void editPlayer(
       @PathVariable("id") final long id,
       @Valid @ModelAttribute(Model.PLAYER) final PlayerModel player,
       final BindingResult result) {
       // ...
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.POST)
    @ResponseStatus(HttpStatus.CREATED)
    public String editPlayerWithView(
       @PathVariable("id") final long id,
       @Valid @ModelAttribute(Model.PLAYER) final PlayerModel player,
       final BindingResult result) {
       // ...
       if (result.hasErrors()) {
          return View.EDIT_PLAYER;
       } else {
          // ...
          return View.PLAYER;
       }
    }

    @RequestMapping(value = "/{id}/edit", method = RequestMethod.GET)
    public String showEditPlayerPage(
       @PathVariable("id") final long id,
       final org.springframework.ui.Model model) {
       // ...
       return View.EDIT_PLAYER;
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public String showPlayerPage(
       @PathVariable("id") final long id,
       final org.springframework.ui.Model model) {
       // ...
       return View.PLAYER;
    } 
```

我对我的表格做了一个简单的改变：

```
 <form:form commandName="player" action="/player/${player.id}">
    <!-- ... -->
 </form:form> 
```

现在，我可以查看、创建和更改播放器实体（资源），使用 HTML 表单进行创建和更改，并尝试进行无效创建或更改，从而在表单中向用户显示错误消息。

我可以给我的答案加上副标题，我是如何学会停止担心并喜欢这篇文章的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:45:35.090

您需要添加`HiddenHttpMethodFilter`您`web.xml`的才能进行`PUT/DELETE` 工作：

```
<filter>
    <filter-name>httpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>httpMethodFilter</filter-name>
    <servlet-name>your-servlet</servlet-name>
</filter-mapping> 
```

来自 Spring 文档：

> ... 虽然 HTTP 定义了这四种方法，但 HTML 只支持两种：GET 和 POST。幸运的是，有两种可能的解决方法：您可以使用 JavaScript 执行 PUT 或 DELETE，或者简单地使用 'real' 方法作为附加参数执行 POST（建模为 HTML 表单中的隐藏输入字段）。后一个技巧就是 Spring 的 HiddenHttpMethodFilter 所做的。这个过滤器是一个普通的 Servlet 过滤器，因此它可以与任何 Web 框架（不仅仅是 Spring MVC）结合使用。只需将此过滤器添加到您的 web.xml 中，带有隐藏 _method 参数的 POST 就会转换为相应的 HTTP 方法请求。

完整的参考[在这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/view.html#rest-method-conversion)。

**编辑：**

尝试使用`<url-mapping/>`标签而不是`<servlet-name/>`：

```
<filter>
    <filter-name>httpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>httpMethodFilter</filter-name>
    <url-mapping>/*</url-mapping>
</filter-mapping> 
```

# c++ - 使用 wxWidget 创建一个带浮雕的矩形区域

> ID：12150483
> 
> 赞同：-1
> 
> 时间：2012-08-27T22:27:57.987
> 
> 标签：c++, wxwidgets

我最近开始使用 wxWidget，它是一个非常强大的 GUI API，从现在开始我想创建一些带有浮雕标志的矩形，例如：“flat”、“raised”、“sunken”等等，但我没有看到任何[http://docs.wxwidgets.org/trunk/classes.html#letter_T](http://docs.wxwidgets.org/trunk/classes.html#letter_T)网站指南中的内容，我可以使用它来实现此自定义小部件。有人可以帮助我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:57:07.263

wxWindow 类支持以下样式：

wxBORDER_DEFAULT：窗口类将决定要显示的边框类型（如果有）。

wxBORDER_SIMPLE：在窗口周围显示细边框。

wxSIMPLE_BORDER 是这种风格的旧名称。

wxBORDER_SUNKEN：显示下陷边框。

wxSUNKEN_BORDER 是这种风格的旧名称。

wxBORDER_RAISED：显示凸起的边框。

wxRAISED_BORDER 是这种风格的旧名称。

这些和更多的细节可以在 [http://docs.wxwidgets.org/trunk/classwx_window.html找到](http://docs.wxwidgets.org/trunk/classwx_window.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:24:58.750

有两种窗口，它们自己出现的顶层窗口，以及出现在内部或至少“属于”另一个窗口的子窗口。除了顶层窗口之外的每个窗口都应该有一个父窗口。

您创建的窗口没有父窗口，也不是顶层窗口。在创建任何其他窗口之前，您应该首先创建一个 wxFrame，它是一个顶级窗口。

您应该看一下示例应用程序，尤其是名为“最小化”的应用程序，它展示了如何编写表现良好的应用程序。一旦你理解了它是如何工作的，你就可以修改示例代码来做你想做的事。

# java - 视差 XY 和旋转 - 平铺计算

> ID：12150486
> 
> 赞同：12
> 
> 时间：2012-08-27T22:28:17.963
> 
> 标签：java, android, math, opengl-es, andengine

我有这个代码来绘制我的视差背景

```
pGLState.pushModelViewGLMatrix();
final float cameraWidth = pCamera.getWidth();
final float cameraHeight = pCamera.getHeight();
final float shapeWidthScaled = this.mShape.getWidthScaled();
final float shapeHeightScaled = this.mShape.getHeightScaled();

//reposition

float baseOffsetX = (pParallaxValueX * this.mParallaxFactorX);
if (this.mRepeatX) {
    baseOffsetX = baseOffsetX % shapeWidthScaled;
    while(baseOffsetX > 0) {
            baseOffsetX -= shapeWidthScaled;
    }
}

float baseOffsetY = (pParallaxValueY * this.mParallaxFactorY);
if (this.mRepeatY) {
    baseOffsetY = baseOffsetY % shapeHeightScaled;
    while(baseOffsetY > 0) {
        baseOffsetY -= shapeHeightScaled;
    }                              
}

//draw

pGLState.translateModelViewGLMatrixf(baseOffsetX, baseOffsetY, 0);
float currentMaxX = baseOffsetX;
float currentMaxY = baseOffsetY;
do {     

    //rows     

    this.mShape.onDraw(pGLState, pCamera);
    if (this.mRepeatY) {
        currentMaxY = baseOffsetY;   

        //columns  

        do {       
            pGLState.translateModelViewGLMatrixf(0, shapeHeightScaled, 0);
            currentMaxY += shapeHeightScaled;                                              
            this.mShape.onDraw(pGLState, pCamera);
        } while(currentMaxY < cameraHeight);      

        //end columns

        pGLState.translateModelViewGLMatrixf(0, -currentMaxY + baseOffsetY, 0);                                    
    }

pGLState.translateModelViewGLMatrixf(shapeWidthScaled, 0, 0);
currentMaxX += shapeWidthScaled;
} while (this.mRepeatX && currentMaxX < cameraWidth); 

//end rows

pGLState.popModelViewGLMatrix(); 
```

不旋转相机时一切正常。

旋转时，我认为平铺 ( `this.mShape`) 应该再绘制四次（顶部、底部、左侧和右侧），因此角落中的空白区域不可见。例如，当旋转 45 度时，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T02:35:30.647

从解释看来，你有一组 2x2 的瓷砖，你想旋转它们。但是当你这样做的时候，角落里有缝隙吗？所以不要这样做

```
 [][]
    [][] 
```

2x2 瓷砖套装这样做

```
 [][][]
    [][][]
    [][][] 
```

设置 3x3 瓷砖并将其置于中心瓷砖的中心，然后在其周围填充。

如果重要的是你有一个 4 瓷砖图案，中间有一个公共角落，那么你将不得不这样做

```
 [][][][]
    [][][][]
    [][][][]
    [][][][] 
```

4x4 瓷砖套装。基本上只是围绕你的 2x2 构建。现在，当您旋转背景时，角落不会有间隙。

其余的只是数学。

在 opengl 中，您正在旋转世界，而不是对象。所以这样想，你正在旋转 x,y,z 平面

```
 |
        |
    ---------
        |
        | 
```

也

```
 \      /
      \    /
       \  /
        ><
       /  \
      /    \
     /      \ 
```

所以现在几何图形将旋转到它被绘制的位置加上旋转。因此，如果我在 x,y,z (10,0,0) 有一个角的正方形，该点仍将位于 (10,0,0) 但 X 轴将旋转 45' 所以对象将在 XY 平面上以 45' 角距 (0,0,0) 的原点 10 个 X 单位距离。

所以它只是关于在偏移处重绘你的瓷砖。

# python - 带有自动模块在 sphinx 文档中生成的所有类的目录/列表

> ID：12150491
> 
> 赞同：6
> 
> 时间：2012-08-27T22:29:29.080
> 
> 标签：python, python-sphinx

我有一个 python 包，我即将从 epydoc 迁移到 sphinx。包本身记录了 sphinx 自动模块功能。现在我想在我的文档模块开头的一个简单列表/表格中总结我模块中的所有类，或者在 toc-tree 中更好（？）。

我的自动模块部分（在 pymunk.rst 中）看起来像

```
.. automodule:: pymunk
    :members:
    :undoc-members:
    :show-inheritance:
    :inherited-members: 
```

然后在 pymunk.constraint.rst

```
.. automodule:: pymunk.constraint
    :members:
    :undoc-members:
    :show-inheritance:
    :inherited-members: 
```

等等。在每个文件中，我想要一个所有类的列表，因此无需滚动浏览整个文档或巨大的索引即可轻松获得可用内容的概述。最终结果类似于

```
pymunk
    pymunk.Space
    pymunk.Circle
    ... 
```

我的主要目标是构建到 html。

现在我正在考虑用 javascript 做一些聪明的事情来提取和插入一个列表，但一定有更好的方法吗？

（文档的当前状态：http: [//pymunk.readthedocs.org/en/latest/pymunk.html](http://pymunk.readthedocs.org/en/latest/pymunk.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:04:13.557

jQuery 被证明是做到这一点的简单方法。

我将此添加到我想要索引的原始 rst 文件中：

```
.. container:: custom-index

    .. raw:: html

        <script type="text/javascript" src='_static/pymunk.js'></script> 
```

这样一个 div 被插入到 html 输出中，这样脚本就可以放在我想要这个索引的所有文件中，并且在顶部有一个标题。

然后在 pymunk.js 中提取类、函数和数据标签并放入索引中。

使用 javascript 方法解决这个问题的缺点是，在 TOC 侧边栏中很难有一个完整的类索引，因为现在它只是从当前页面中选择要包含在索引中的项目。在每个页面加载时创建索引也是一项工作，如果它是一个大模块，在某些浏览器中可能会感觉很慢。

完整的js代码如下：

```
$(function (){
var createList = function(selector){

    var ul = $('<ul>');
    var selected = $(selector);

    if (selected.length === 0){
        return;
    }

    selected.clone().each(function (i,e){

        var p = $(e).children('.descclassname');
        var n = $(e).children('.descname');
        var l = $(e).children('.headerlink');

        var a = $('<a>');
        a.attr('href',l.attr('href')).attr('title', 'Link to this definition');

        a.append(p).append(n);

        var entry = $('<li>').append(a);
        ul.append(entry);
    });
    return ul;
}

var c = $('<div style="float:left; min-width: 300px;">');

var ul0 = c.clone().append($('.submodule-index'))

customIndex = $('.custom-index');
customIndex.empty();
customIndex.append(ul0);

var x = [];
x.push(['Classes','dl.class > dt']);
x.push(['Functions','dl.function > dt']);
x.push(['Variables','dl.data > dt']);

x.forEach(function (e){
    var l = createList(e[1]);
    if (l) {        
        var ul = c.clone()
            .append('<p class="rubric">'+e[0]+'</p>')
            .append(l);
    }
    customIndex.append(ul);
});

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-11T23:15:39.287

Sphinx 现在有一个自动摘要[扩展](http://www.sphinx-doc.org/en/1.6/ext/autosummary.html)，它基于 autodoc 构建摘要和目录树。这样，您只需将以下行插入您的`pymunk.rst`:

```
.. currentmodule:: pymunk

.. autosummary::
   :nosignatures:

   Space
   Circle 
```

# php - apc_fetch() 对象总是返回 done=1 和 total = current

> ID：12150499
> 
> 赞同：2
> 
> 时间：2012-08-27T22:29:48.603
> 
> 标签：php, javascript, apc

这没有任何用处。无论文件大小如何，我都会立即完成 100%。我不知道还能说什么，但显然必须说些什么，否则不会发布。

ini 文件片段：

```
; If you only provide the name of the extension, PHP will look for it in its
; default extension directory.

apc.rfc1867 = on
apc.rfc1867_freq = 100k
apc.max_file_size = 1024M
upload_max_filesize = 1024M
post_max_size = 1024M
apc.shm_size = 512M

;;;;;;;;;;;;;;;;;;;
; Module Settings ;
;;;;;;;;;;;;;;;;;;; 
```

进度 PHP 脚本：

```
if ($status = apc_fetch('upload_'._GET['up_id'])) {
    if ($status['done']) $percent = 100;
    else if ($status['total'] == 0) $percent = 0;
    else $percent = $status['current'] / $status['total'] * 100;
    echo $percent;
    //echo json_encode($status);
} 
```

Javascript：

```
var setupProgress = function() {
    var pbar;
    var started = false;
    var count = 0;
    $('#upload-form').submit(function() {
        $('#upload-form').hide();
        pbar = $('#progress_bar');
        pbar.parent().show();
        $('#upload_frame').load(function () {
            started = true;
            alert('Upload Complete!');
            pbar.parent().hide(400);
        });
        setTimeout(function () {
            updateProgress($('#uid').val(), pbar, started);
        }, 1000);
    });

    var updateProgress = function(id) {
        var time = new Date().getTime(); //make URL unique to prevent caching
        $.get('get_progress.php', {up_id:id, t:time}, function (data) {
            id$('prog_test').innerHTML += '<br />' + ++count + ':' + data;
            var progress = parseInt(data, 10);
            if (progress < 100 || !started) {
                started = progress < 100;
                setTimeout(function () {
                    updateProgress(id);
                }, 500);
            }
            started && pbar.css('width', progress+'%') && $('#progamt').html(progress+"%");
        });
    };
}; 
```

HTML：

```
<form id="upload-form" style="display:none" enctype="multipart/form-data" action='process_upload_phixed_image.php?<?= session_name(); ?>=<?= session_id(); ?>' method = "post" target="upload_frame">
    <div class="custom_file_upload">
        <span class="browse"></span>
        <span class="file_info">no file selected</span>
        <input type="hidden" name="APC_UPLOAD_PROGRESS" id="uid"  value="<?= $up_id; ?>"/>
        <input class="file_upload" type="file" id="phix_upload" name="file" />
    </div>
    <label>Price<input id="artist_price" name="artist_price" type="text" value=""></label>
    <label>Comment<input id="artist_comment" name="artist_comment" type="text" value=""></label>
    <div id="upload_btns">
        <input id="phix-upload" type="submit" value="Upload">
        <input id="cancel-upload" type="reset" value="Cancel">
    </div>
    <input id="upload_user_id" name="user_id" type="hidden" value="">
    <input id="loadedimage_source_id" name="loadedimage_source_id" type="hidden" value="">
    <iframe style="display:none" id="upload_frame" name="upload_frame" frameborder="0" border="0" src="" scrolling="no" scrollbar="no" ></iframe>
</form>
<div style="display:none" id="progress_bar_wrapper" class="rounded-small"><div id="progress_bar"><div id="progamt"></div></div></div>
<div style="display:none" id="prog_test">placeholder for progress checking</div> 
```

# mysql - Select Distinct 2 Columns

> ID：12150503
> 
> 赞同：0
> 
> 时间：2012-08-27T22:30:26.040
> 
> 标签：mysql, sql, rdbms

I have the following table: `ID1 , ID2, Name, Sex`

In the table there are records with duplicate ID1 but different ID2,name and sex -- Also there are records with duplicate ID2 and different ID1,Name and sex. Both ID1 and ID2 can have null values but not for same entry. I need to select non duplicate record for id1 and id2 e.g.

```
id1   id2      name    sex
10     null    jack     M
10     null    tom      M
null   40      jennie   F
null    32     jenie    F
null    32     emma     M
10     null    stevie   M 
```

Need a select query to return:

```
id1   id2     name     sex
10     any    any      any (any means it can be either jack,tom,stevie)
null   40     jennie   F
null   32     any      any2 (any2 meaning jeniw or emma) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:58:32.590

You could use an `EXISTS` in your `WHERE` clause:

```
select t1.id1,
  t1.id2,
  name,
  sex
from yourtable t1
where exists (select *
              from yourtable t2
              where t1.id1 = t2.id1
               or t1.id2 = t2.id2)
group by t1.id1, t1.id2 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/ecf6d/6)

# java - 添加新行后，JTable 不显示新模型

> ID：12150504
> 
> 赞同：3
> 
> 时间：2012-08-27T22:30:28.437
> 
> 标签：java, swing, netbeans, jtable, defaulttablemodel

我无法重新绘制我的 jTable。我必须重新运行所有应用程序以显示 addRow。

这是代码：

MainPage.java [http://pastebin.com/6FZL1pKC](http://pastebin.com/6FZL1pKC)

```
public class Mainpage2 extends javax.swing.JFrame {

public static DefaultTableModel tripModel;
/**
 * Creates new form carpoolingui
 */
public Mainpage2(){
    try {
        tripModel = MPtable.myModel(Parser.parsa_tratta(Database.doRequest("SELECT * from tratte")));
    } catch (Exception ex) {
        Logger.getLogger(Mainpage2.class.getName()).log(Level.SEVERE, null, ex);
    }
    initComponents();
}
....
jTable1.setModel(tripModel);
....
public void tripRepaint() throws MalformedURLException, Exception{
        System.out.println(jTable1.getModel());
        tripModel = MPtable.myModel(Parser.parsa_tratta(Database.doRequest("SELECT * from tratte")));
        jTable1.setModel(tripModel);
        jTable1.repaint();

        System.out.println(jTable1.getModel());
        System.out.println(tripModel); 
```

最后 3 个 println() 表明模型已经改变！大声笑{} 输出：

Tratta AGGIUNTA

javax.swing.table.DefaultTableModel@1ca7e4a

博洛尼亚

...

卡坦扎罗

NEW_DEPARTURE_ADDED

javax.swing.table.DefaultTableModel@17​​d54dd

javax.swing.table.DefaultTableModel@17​​d54dd

所以它有效..但它没有显示新模型！

AddTrip.java [http://pastebin.com/t0LqF91a](http://pastebin.com/t0LqF91a)

```
Carpooling2.mainPage2.tripRepaint(); 
```

MPTable.java [http://pastebin.com/2gXvYNLC](http://pastebin.com/2gXvYNLC)

```
 public class MPtable {

public static DefaultTableModel myModel(Tratta[] tratta_array){
    int i;

    DefaultTableModel model = new DefaultTableModel();
    model.addColumn("ID");
    model.addColumn("LUOGO PARTENZA");
    model.addColumn("LUOGO ARRIVO");
    model.addColumn("DATA");
    model.addColumn("ORA PARTENZA");
    model.addColumn("ORA ARRIVO");
    model.addColumn("COSTO (€)");
    model.addColumn("POSTI DISPONIBILI");
    model.addColumn("AUTISTA");
    model.addColumn("INFORMAZIONI");

    for (i=0; i<tratta_array.length; i++){
            System.out.println(tratta_array[i].getLuogoPartenza());
            }

    for (i=0; i<tratta_array.length; i++){
        model.addRow(new Object[] {
                tratta_array[i].getId(),
                tratta_array[i].getLuogoPartenza(),
                tratta_array[i].getLuogoArrivo(),
                tratta_array[i].getData(),
                tratta_array[i].getOraPartenza(),
                tratta_array[i].getOraArrivo(),
                tratta_array[i].getCosto(),
                tratta_array[i].getPostiDisponibili(),
                tratta_array[i].getAutista(),
                tratta_array[i].getInfo()
                }
        );
    }
    return model;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:33:38.057

您需要通知表格，结构和/或数据已更改。此处回答了问题，例如：[JTable 如何在插入删除或更新数据后刷新表模型。](https://stackoverflow.com/questions/3179136/jtable-how-to-refresh-table-model-after-insert-delete-or-update-the-data)

# css - 如何更改 Alex 的 Gorbatchev SyntaxHighlighter 中的字体大小？

> ID：12150508
> 
> 赞同：4
> 
> 时间：2012-08-27T22:30:57.780
> 
> 标签：css, syntax-highlighting, syntaxhighlighter

我尝试更改[Alex Gorbatchev 的 SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/) `.css`主题文件中的字体大小，并`font-size`在`<pre>`标签等中使用，但没有任何反应。大小不会改变。

**PD**：这是[shCore.css](http://code.google.com/p/isuru89-syntax-highlight-compiled/source/browse/trunk/CSS/shCore.css?spec=svn8&r=8)主文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:08:14.353

在您发布的代码示例中有几个地方可以更改字体大小。由于尚不清楚您的目标是哪一个，因此请从以下内容开始：

```
.syntaxhighlighter {
  width: 100% !important;
  margin: 1em 0 1em 0 !important;
  position: relative !important;
  overflow: auto !important;
  font-size: 2em !important; 
} 
```

上面的示例将 更改`font-size`为 2em

# objective-c - 在标头中声明许多方法

> ID：12150510
> 
> 赞同：2
> 
> 时间：2012-08-27T22:31:00.880
> 
> 标签：objective-c

我试图学习 obj-c，这是我不明白的东西。我知道一些 c#，所以有人可以尝试用 ac#y-way 来解释这一点，我也许可以更好地理解它:)

```
#import <Foundation/Foundation.h> @interface Car : NSObject
@interface Car : NSObject
  {
  int year;
  NSString *make;
  NSString *model;
  }

  **- (void) setMake:(NSString *) aMake andModel:(NSString *) aModel andYear: (int) aYear;**
  - (void) printCarInfo;
  - (int) year;
@end 
```

我想我**理解**变量的声明，但我没有得到它的方法（s？）。有人可以解释这是做什么的（粗体代码）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:48:08.977

您学习中缺少的概念是“选择器”。它本质上就像“装饰”一个方法签名，其语义比带括号的参数传递所能获得的语义更多。我们倾向于为我们的方法原型使用描述性的、类似句子的“选择器”。例如，考虑这个基本函数：

```
void function setDimensions(int width, int height); 
```

在 Objective-C 中，我们会这样写：

```
- (void) setWidth:(int) newWidth height:(int) newHeight; 
```

并且“选择器”（[这是 Objective-C 中的一流概念](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)）是**setWith:height:**（包括冒号，但没有其他任何内容）。这就是在该类上唯一标识该方法的*东西。*

调用该方法发生在运行时，当您向该对象发送一条消息，并将参数放在选择器中的冒号之后。因此，消息具有三个基本组成部分：接收者、选择器和放置良好的参数：

```
[anObject setWidth: 1024 height: 768]; 
```

这里，`anObject`是接收者，`setWidth:height:`是选择器（帮助运行时找到方法），参数是：`newWidth = 1024; newHeight = 768;`.

然后在方法的实现中，只需像您期望的那样使用 newWidth 和 newHeight ：

```
- (void) setWidth:(int) newWidth height:(int) newHeight; {
    self.width = newWidth; // 1024
    self.height = newHeight; // 768
} 
```

起初它可能看起来很尴尬和多余，但当你习惯它之后，你会更喜欢它，并发现自己用其他语言编写更长、更语义化的函数名称。

与选择器相关的概念在与一些*[Objective-C 运行时](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)*的基础知识一起学习时会更好地理解，特别是“发送消息”（而不是“调用方法”）的概念以及*在运行时，而不是编译*的事实。根据您在消息中使用的选择器查找实际方法的*时间。*这发生在运行时的事实为高度动态的架构提供了显着的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:37:06.353

在 Objective-C 方法中有命名参数。方法声明语法如下：

```
- (returnValue)nameOfArgument1:(typeOfArgument1)nameOfVariable1 
               nameOfArgument2:(typeOfArgument2)nameOfVariable2 
               nameOfArgument3:(typeOfArgument3)nameOfVariable3; 
```

换行符当然是可选的，但您需要用至少一个空格分隔参数。第一行的 - 符号表示这是一个实例方法（与类方法相反，它应该以 + 符号开头）。

.m 文件中的实现看起来完全相同，只是将分号替换为实现：

```
- (returnValue)nameOfArgument1:(typeOfArgument1)nameOfVariable1 
               nameOfArgument2:(typeOfArgument2)nameOfVariable2 
               nameOfArgument3:(typeOfArgument3)nameOfVariable3 {
    // Implementation
    // Return something of type "returnValue".
} 
```

你会像这样从其他地方调用这个方法：

```
[myObject nameOfArgument1:variableToPass1 
          nameOfArgument2:variableToPass2
          nameOfArgument3:variableToPass3]; 
```

我希望这能让事情更清楚一些。

# python - Numpy/Scipy 模数函数

> ID：12150513
> 
> 赞同：0
> 
> 时间：2012-08-27T22:31:07.077
> 
> 标签：python, numpy, scipy

Numpy 的“**模数**”函数在代码中用于检查某个时间是否是时间步长的整数倍。

但是看到了一些奇怪的行为。

*   `numpy.mod(121e-12,1e-12)`返回 1e-12
*   `numpy.mod(60e-12,1e-12)`返回“**一个非常小的值**”（与 1e-12 相比）。

如果你玩`numpy.mode('122-126'e-12,1e-12)`它会随机给出 0 和 1e-12。

有人可以解释为什么吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:46:27.390

根据文档，`np.mod(x1,x2)=x1-floor(x1/x2)*x2`. 这里的问题是您正在使用非常小的值，一个黑暗的域，浮点错误（截断......）经常发生并且结果通常是不可预测的......我认为你不应该花很多时间担心关于那个。

# jquery - Jquery 脚本在一个页面上什么都不做，但在另一个页面上

> ID：12150518
> 
> 赞同：1
> 
> 时间：2012-08-27T22:32:12.710
> 
> 标签：jquery, asp.net, web, webpage

我有一个小 JQuery 脚本，是从一个有外国页面的人那里得到的。

```
$(function () {
    var $txt = $('input[id$=TextBoxFiltroProv]');
    var $ddl = $('select[id$=DropDownListProv]');
    var $items = $('select[id$=DropDownListProv] option');

    $txt.keyup(function () {
        searchDdl($txt.val());
    });

    function searchDdl(item) {
        $ddl.empty();
        var exp = new RegExp(item, "i");
        var arr = $.grep($items,
                function (n) {
                    return exp.test($(n).text());
                });

        if (arr.length > 0) {
            countItemsFound(arr.length);
            $.each(arr, function () {
                $ddl.append(this);
                $ddl.get(0).selectedIndex = 0;
            }
                );
        }
        else {
            countItemsFound(arr.length);
            $ddl.append("<option>No Items Found</option>");
        }
    }

    function countItemsFound(num) {
        $("#para").empty();
        if ($txt.val().length) {
            $("#para").html(num + " items found");
        }
    }
}); 
```

它适用于已经呈现所有内容（HTML 控件）并在更新面板中包含一些元素的页面。但在另一页上，我有 2 个更新面板和一个面板（它开始隐藏）。控件位于 ASP.net PANEL 内。¿ 是控件被隐藏的问题吗？在那种情况下，当面板可见并且它的控件已经呈现时，我如何告诉 JQuery 启动这段代码？我想我错过了一些东西，但我看不到它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:34:22.980

如果在更新面板中动态添加元素，则必须设置委托以绑定到事件。这样，当动态添加元素时，jquery 将确保按照声明绑定事件。

下面是一个示例，在该示例中，`document`我想将具有给定选择器`input[id$=TextBoxFiltroProv]`的任何元素绑定到`keyup` `event`现有的`onload`或者在 is 之后添加到 DOM`document`中`ready`。

例子：

```
$(document).on('keyup', 'input[id$=TextBoxFiltroProv]', function () {
      searchDdl($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T17:56:58.637

我已经解决了这个问题，这是因为更新面板，我添加了以下代码，用一个名为 BindEvents 的函数包围了我的主代码，并在更新面板中添加了这个脚本：

```
 <asp:UpdatePanel...>
<ContentTemplate>
     <script type="text/javascript">
                    Sys.Application.add_load(BindEvents);
     </script>
</ContentTemplate>
    </asp:UpdatePanel> 
```

# javascript - Tropo 设置声音不起作用？

> ID：12150525
> 
> 赞同：1
> 
> 时间：2012-08-27T22:32:59.870
> 
> 标签：javascript, node.js, tropo

我正在尝试使这条线工作：

```
tropo.say("Some text","kate"); 
```

[文档](https://www.tropo.com/docs/scripting/international_speaking_other_languages.htm)

但是这条线破坏了`node.js`我正在编写的应用程序。如果我不指定声音，那么它可以正常工作。例如：

```
tropo.say("Some text"); 
```

这里有任何 tropo 大师可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:33:02.760

您链接到脚本文档，但您的应用程序是 WebAPI。这是来自这些文档的脚本：

```
var http = require('http');
var tropo_webapi = require('tropo-webapi');

var server = http.createServer(function (request, response) {

    var tropo = new TropoWebAPI();

    // (value, as, name, required, voice)
    tropo.say("Hello, how are you?.", null, null, null, "kate");

    response.end(TropoJSON(tropo));

}).listen(8000); 
```

[https://www.tropo.com/docs/webapi/international_speaking_other_languages.htm](https://www.tropo.com/docs/webapi/international_speaking_other_languages.htm)

我相信这已经在 IRC 中解决了，但是将上面的内容发布给任何其他用户查看。

Justin Dupree
客户体验总监
Voxeo Labs

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:47:23.667

您传递的参数错误。您已经发布了指向[文档](https://www.tropo.com/docs/scripting/international_speaking_other_languages.htm)的链接，其中清楚地表明它应该是：

```
say("Some text",{voice:"kate"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:07:40.813

Kate 的声音仅适用于英式英语。您在应用程序中指定的语言（如果有）。默认为美国英语，您可用的女性声音为 Allison（默认）、Susan、Vanessa、Veronica。日志应该为您提供有关正在发生的事情的线索。[如果您仍然遇到问题，请在Tropo 论坛](https://www.tropo.com/forums/)中提问。Voxeo 的 Extreme Support 非常适合提供及时和有用的帮助。

# gpgpu - cuda无效配置错误9

> ID：12150526
> 
> 赞同：4
> 
> 时间：2012-08-27T22:33:11.757
> 
> 标签：gpgpu, nvidia, gpu

我有一个 Cuda 应用程序；在首先为各种数组分配 cuda 内存后，程序循环执行：将数据传输到 GPU，在 GPU 上处理内核，从 GPU 传回数据。第一个数据集由 GPU 正确处理并返回。此后后续数据集生成错误 9：无效配置。

由于我不取消或重新分配内存，我不相信我内存不足。我已经三重检查了网格和块的尺寸，这些都在界限内：（200,0,0）和（720,20,0）。

我还应该看什么来了解无效的配置是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T12:38:04.557

> 我已经三重检查了网格和块的尺寸，这些都在界限内：（200,0,0）和（720,20,0）。

y 和 z 维度不能为零。它们必须至少为 1。

=> ( 200, 1, 1) 和 (720, 20,1)

# objective-c - 在选择之前取消选中 Mac 应用程序的菜单项 setState:NSOffState

> ID：12150530
> 
> 赞同：1
> 
> 时间：2012-08-27T22:33:30.713
> 
> 标签：objective-c, cocoa

我有一个带有子菜单的 Mac 应用程序。可以选中每个项目以指示哪个项目处于活动状态。我用这样的代码做到这一点：

```
[sender setState:NSOnState]; 
```

但是，每次我单击一个新项目时，以前的项目都会保持选中状态。

[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MenuList/Articles/MenuItemStates.html)状态：

> 在响应组中所有命令的操作方法中，使用 setState: 取消选中当前标记的菜单项：
> 
> [当前项设置状态：NSOffState]；

我不太确定这是如何工作的。我对 Objective C 和 Cocoa 很陌生。有人有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:29:45.860

因此，如果您有：

```
Item A
    Item 1
    Item 2
    Item 3 
```

你想要它，以便对于项目 1-3 一次只能检查一个，我要做的是：为每个菜单项创建 IBOutlets 并将它们分组到 awakeFromNib 中的数组中。当您从每个项目发出呼叫时，循环遍历该数组，用于`setState:NSOffState`关闭所有内容，然后再次使用您的`setState:NSOnState`呼叫重新打开新单击的项目。

# sql - SQL Server 2005 - 相同的查询、相同的服务器、两个不同的执行计划

> ID：12150535
> 
> 赞同：1
> 
> 时间：2012-08-27T22:33:57.413
> 
> 标签：sql, indexing

几个星期以来，我一直在与我们服务器上的一个持续问题作斗争。有一个简单的查询可以在几个不同的存储过程中运行，但在其中一些存储过程中，查询可能需要将近 4 分钟才能运行。一些过程具有完全相同的查询，并且它们在 < 1 秒内运行。从查询窗口运行它会在 < 1 秒内返回。

我无法重新创建它 - 我无法运行用户正在运行的过程（因为它会更改数据），并且我们的测试服务器上不会出现问题。我有时可以重新编译（F5）该过程，这似乎重新创建了执行计划，并修复了一段时间，但它总是返回。

查询很简单：

```
SELECT '1' 
FROM TRANSACTION_LOG WITH (NOLOCK) 
WHERE TYPE = 15 AND SERIAL_NO = @P_TRAVELER_SERIAL 
```

*   `TRANSACTION_LOG`有 ~90m 行
*   `TYPE`有一个非聚集索引
*   `SERIAL_NO`有一个非聚集索引

经过一些研究和分析器捕获后，我在执行计划中发现了一些奇怪的东西。我设法在快速运行时捕获执行计划，在运行缓慢时捕获另一个执行计划。这些来自完全相同的过程，完全相同的查询 - 唯一的区别是`@P_TRAVELER_SERIAL`参数的值：

快速地：

```
Compute Scalar(DEFINE:([Expr1005]=CASE WHEN [Expr1006] THEN (1) ELSE (0) END))          
  |--Nested Loops(Left Semi Join, DEFINE:([Expr1006] = [PROBE VALUE]))
    |--Constant Scan
    |--Filter(WHERE:([MICS].[dbo].[Transaction_Log].[TYPE]=(15)))
      |--Nested Loops(Inner Join, OUTER REFERENCES:([Bmk1000], [Expr1010]) WITH UNORDERED PREFETCH)
        |--Index Seek(OBJECT:([MICS].[dbo].[Transaction_Log].[IX_SERIAL_NO]), SEEK:([MICS].[dbo].[Transaction_Log].[SERIAL_NO]=[@P_TRAVELER_SERIAL]) ORDERED FORWARD)
        |--RID Lookup(OBJECT:([MICS].[dbo].[Transaction_Log]), SEEK:([Bmk1000]=[Bmk1000]) LOOKUP ORDERED FORWARD) 
```

慢的：

```
Compute Scalar(DEFINE:([Expr1005]=CASE WHEN [Expr1006] THEN (1) ELSE (0) END))
  |--Nested Loops(Left Semi Join, DEFINE:([Expr1006] = [PROBE VALUE]))
    |--Constant Scan 
    |--Table Scan(OBJECT:([MICS].[dbo].[Transaction_Log]), WHERE:([MICS].[dbo].[Transaction_Log].[TYPE]=(15) AND [MICS].[dbo].[Transaction_Log].[SERIAL_NO]=[@P_TRAVELER_SERIAL])) 
```

为什么它会在一个计划中使用索引查找，而在另一个计划中使用表扫描？这是相同的查询和相同的程序？表活动与它有什么关系吗？这是一张繁忙的桌子...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:43:04.953

这对我来说听起来像是一个参数嗅探问题。发生的情况是，随着时间的推移，SQL Server 确定您的过程的执行计划已过时，并且下次执行该过程时会编译一个新计划。不幸的是，当这种情况发生时，SQL 服务器在确定为过程生成（和缓存）什么计划时使用当前传入的值。如果当时传入的值不常见，SQL Server 可能会构建并随后缓存执行表扫描的执行计划。虽然这对于传入的不常见值可能是最佳的，但对于将从索引搜索中受益的值显然不是那么理想。

有关详细信息和可能的解决方法，请参阅此 technet 博客文章。 [http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)

# javascript - Javascript eventemitter 多个事件一次

> ID：12150540
> 
> 赞同：16
> 
> 时间：2012-08-27T22:34:25.890
> 
> 标签：javascript, node.js, dom-events, eventemitter

`eventemitter`尽管欢迎其他事件库建议，但我正在使用节点。

如果触发了多个事件，我想运行一次函数。应该监听多个事件，但如果任何一个事件触发，它们都会被删除。希望此代码示例演示了我正在寻找的内容。

```
var game = new eventEmitter();
game.once(['player:quit', 'player:disconnect'], function () {
  endGame()
}); 
```

处理这个最干净的方法是什么？

注意：需要单独移除绑定的函数，因为还会绑定其他监听器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T23:16:28.997

像这样“扩展” EventEmitter：

```
var EventEmitter = require('events').EventEmitter;

EventEmitter.prototype.once = function(events, handler){
    // no events, get out!
    if(! events)
        return; 

    // Ugly, but helps getting the rest of the function 
    // short and simple to the eye ... I guess...
    if(!(events instanceof Array))
        events = [events];

    var _this = this;

    var cb = function(){
        events.forEach(function(e){     
            // This only removes the listener itself 
            // from all the events that are listening to it
            // i.e., does not remove other listeners to the same event!
            _this.removeListener(e, cb); 
        });

        // This will allow any args you put in xxx.emit('event', ...) to be sent 
        // to your handler
        handler.apply(_this, Array.prototype.slice.call(arguments, 0));
    };

    events.forEach(function(e){ 
        _this.addListener(e, cb);
    }); 
}; 
```

我在这里创建了一个要点：[https](https://gist.github.com/3627823) ://gist.github.com/3627823 其中包括一个示例（您的示例，带有一些日志）

[**更新**]以下是我的实现的改编，`once`它只删除了被调用的事件，如评论中所要求的：

```
var EventEmitter = require('events').EventEmitter;

EventEmitter.prototype.once = function(events, handler){
    // no events, get out!
    if(! events)
        return; 

    // Ugly, but helps getting the rest of the function 
    // short and simple to the eye ... I guess...
    if(!(events instanceof Array))
        events = [events];

    var _this = this;

    // A helper function that will generate a handler that 
    // removes itself when its called
    var gen_cb = function(event_name){
        var cb = function(){
            _this.removeListener(event_name, cb);
            // This will allow any args you put in 
            // xxx.emit('event', ...) to be sent 
            // to your handler
            handler.apply(_this, Array.prototype.slice.call(arguments, 0));
        };
        return cb;
    };

    events.forEach(function(e){ 
        _this.addListener(e, gen_cb(e));
    }); 
}; 
```

我发现 node.js 已经`once`在 EventEmitter 中有一个方法：查看[这里的源代码](https://github.com/fabriceleal/node/blob/master/lib/events.js#L177)，但这可能是最近添加的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T23:15:00.780

像这样的东西怎么样：

```
var game = new EventEmitter();

var handler = function() {
  game.removeAllListeners('player:quit');
  game.removeAllListeners('player:disconnect');
  endGame();
};

game.on('player:quit', handler);
game.on('player:disconnect', handler); 
```

您可以编写一个包装器`on`并`removeAllListeners`能够传入一个数组（例如，循环数组并为每个元素调用`on`或）。`removeAllListeners`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-13T21:35:16.113

使用 的[`first`](http://reactivex.io/documentation/operators/first.html)运算符[`Rx.Observable`](http://reactivex.io/documentation/observable.html)：

```
let game = new EventEmitter();
let events = ['player:quit', 'player:disconnect'];

//let myObserver = Rx.Observable.fromEventPattern(handler => {
//  events.forEach(evt => game.on(evt, handler));
//}).first();

let myObserver = Rx.Observable.merge(...events.map(evt => Rx.Observable.fromEvent(game, evt))).first();

myObserver.subscribe(() => {
  // clean up
  console.log('Goodbye!!');
});

game.emit('player:quit'); // Goodbye!!
game.emit('player:quit'); // No output
game.emit('player:disconnect'); // No output
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/5.4.0/Rx.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/EventEmitter/5.1.0/EventEmitter.min.js"></script>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T19:22:46.917

不幸的是，您还没有任何类似的东西。

我查看[EventEmitter2](https://github.com/hij1nx/EventEmitter2)但我认为有一个问题......（[#66](https://github.com/hij1nx/EventEmitter2/issues/66)，[#31](https://github.com/hij1nx/EventEmitter2/issues/31)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T09:07:07.770

下面的方法怎么样

```
var myEmitter = new CustomEventEmitter;
myEmitter.onceAny(['event1', 'event2', 'event3', 'event4'], function() {
        endGame();
}); 
```

当 CustomEventEmitter 看起来像这样时

```
function CustomEventEmitter() {};

// inherit from EventEmitter
CustomEventEmitter.prototype = new EventEmitter;

CustomEventEmitter.prototype.onceAny = function(arrayEvents, callback) {
    // generate unique string for the auxiliary event
    var auxEvent = process.pid + '-' + (new Date()).getTime();

    // auxiliary event handler
    var auxEmitter = new EventEmitter;

    // handle the event emitted by the auxiliary emitter
    auxEmitter.once(auxEvent, callback);

    for (var i = 0; i < arrayEvents.length;  i++) {
        this.once(arrayEvents[i], function() {
            auxEmitter.emit(auxEvent);
        });
    }

} 
```

两个事件处理程序的级联会产生所需的结果。您正在使用辅助 EventEmitter，但它的详细信息隐藏在 CustomEventEmitter 模块中，因此该模块的使用非常简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T13:41:13.637

这是处理此工作流程的通用辅助函数。您需要传递对事件发射器对象的引用、事件名称数组和事件处理函数。处理所有附加、分离和传递参数到您的处理程序。

```
// listen to many, trigger and detach all on any
function onMany(emitter, events, callback) {
    function cb() {
        callback.apply(emitter, arguments);

        events.forEach(function(ev) {
            emitter.removeListener(ev, cb);
        });
    }

    events.forEach(function(ev) {
        emitter.on(ev, cb);
    });
} 
```

还有一个使用示例：

```
// Test usage
var EventEmitter = require('events').EventEmitter;
var game = new EventEmitter();

// event list of interest
var events = ['player:quit', 'player:disconnect'];

// end game handler
function endGame() {
    console.log('end the game!');
}

// attach
onMany(game, events, endGame);

// test. we should log 'end the game' only once
game.emit('player:disconnect');
game.emit('player:quit'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-10T21:50:26.477

我刚遇到类似的事情，尽管在这里分享。可能它对您的情况也有帮助吗？

我有一个看起来像这样的模块：

```
require('events').EventEmitter;
function Foobar = {};
Foobar.prototype = new EventEmitter();
Foobar.prototype.someMethod = function() { ... }

module.exports.getNewFoobar = function() {
    return new Foobar();
}; 
```

有趣的是：这在 node.js 0.8.x 之前一直有效，但不再有效。问题是这一行：

```
Foobar.prototype = new EventEmitter(); 
```

使用这一行，**所有**创建的实例都共享，并且与 Javascript 中的非标量值相同的 EventEmitter 始终是引用。显然 node.js 改变了一些关于模块的内部行为，因为这在以前是有效的。

解决方案是使用允许正确继承的 util 类。

```
require('events').EventEmitter;
var util = require('util');

function Foobar = {};
util.inherits(Foobar, EventEmitter);

Foobar.prototype.someMethod = function() { ... }

module.exports.getNewFoobar = function() {
    return new Foobar();
}; 
```

希望这可以帮助。

# php - 随机化字符串字符

> ID：12150541
> 
> 赞同：3
> 
> 时间：2012-08-27T22:34:27.180
> 
> 标签：php

我正在寻找一个函数来更改字符串中的字符顺序。

例如，我有这个字符串 : `"How are you?"`，用这个字符串作为参数调用函数会返回类似的东西：`"wuayero Ho?"`或类似的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T22:36:16.547

PHP 有一个方便的[**str_shuffle**](http://php.net/manual/en/function.str-shuffle.php)函数

# c# - Task.Factory.StartNew 并不总是启动任务

> ID：12150542
> 
> 赞同：1
> 
> 时间：2012-08-27T22:34:34.657
> 
> 标签：c#, .net, task-parallel-library

我看到这种奇怪的行为，运行时有时`Task.Factory.StartNew`在调用时不会启动任务。我专门在调试器中检查它，但由于某种原因，任务没有运行。这种情况偶尔会发生，有时任务会启动，有时不会。

```
Task.Factory.StartNew(() =>
                        {
                            Extract(fileName);
                        }, TaskCreationOptions.LongRunning);  

        private static void Extract(String fileName)
        {
   Trace.WriteLine("Extract------------------     ---------------      ---");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:42:56.393

任务代码可能*正在*运行，但您没有看到输出，因为它没有（总是）被刷新到您的屏幕/文件/任何内容。

尝试在您的 WriteLine 之后调用[Trace.Flush](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.flush.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T06:16:19.190

我刚刚遇到了类似的问题，尽管我确实花了几个星期的时间来钻研代码以将其挑出来。所以 Task.StartNew 使用了 ThreadPool，如果没有可用的任务将被排队，因此延迟和我无法通过隔离测试找到这个错误的原因，因为我总是有足够的线程在游泳池。oO 多线程乐趣 :) 你可以通过创建和管理你自己的线程池类来解决这个问题。

# c# - JavaScript 等价于 C# 的 DynamicObject？

> ID：12150544
> 
> 赞同：5
> 
> 时间：2012-08-27T22:34:50.767
> 
> 标签：c#, javascript

为了清楚起见，继承 DynamicObject 的类（当然在 C# 中）与 JavaScript 的动态变量的概念不同。DynamicObject 允许实现者以编程方式确定对象具有哪些成员，包括方法。

**编辑**：我知道 JavaScript 对象可以在运行时添加任何成员。这根本不是我要说的。这是一个 C# 示例，展示了 DynamicObject 的作用：

```
public class SampleObject : DynamicObject
{
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = binder.Name;
        return true;
    }
}

dynamic obj = new SampleObject();
Console.WriteLine(obj.SampleProperty);
//Prints "SampleProperty". 
```

当访问 obj 的成员时，它使用 TryGetMember 以编程方式确定该成员是否存在以及它的值是什么。简而言之，成员的存在是在请求时确定的，而不是通过事先添加来确定的。我希望这能稍微澄清一下这个问题。如果您想知道，我正在尝试确定是否可以在 JavaScript 中创建一个对象，当函数调用语法用于它时，如下所示：

```
myAPI.uploadSomeData(data1, data2) 
```

uploadSomeData 调用转到类似“TryGetMember”的函数，该函数使用名称“uploadSomeData”执行 $.ajax 调用以生成 URL，返回值是结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:37:55.353

令人惊讶的是，仅仅几周的偶尔 JavaScript 研究后，我设法找到了两个答案：

[ES6 代理](http://soft.vub.ac.be/~tvcutsem/proxies/)

[noSuchMethod](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/noSuchMethod)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:10:19.473

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-10T10:01:29.710

我堆积了类似的问题并编写了以下代码：

```
 const dynamicFunc = (input) => {
        const handler = {
            get: (obj, prop) => {

                // edge case when .toString() is calling for dynamic prop - just return any string
                if (typeof prop === 'symbol') {
                    return () => "custom_dynamic_str";
                }

                const isPropExist = typeof obj[prop] !== 'undefined';

                if (isPropExist) {
                    const val = obj[prop];

                // if null or undefined was set
                if (val == null || typeof val === 'undefined') {
                     return val;
                }

                // if value was created not by this method - return value
                if (!val.__isDynamic) {
                    return val;
                }

                return dynamicFunc(val);

          }
                obj[prop] = () => dynamicFunc({});
                obj[prop].__isDynamic = true;
                return dynamicFunc(obj[prop]);
            },
            set(target, prop, value) {
                //  if our custom function was set to dynamic
                if (typeof value === 'function') {
                    // wrap it to unwrap in get
                    target[prop] =
                        {
                            __isSetAsFunction: true,
                            func: value
                        };
                }
                else {
                    target[prop] = value;
                }
                return true;
            },
            apply: function (target, thisArg, argumentsList) {
                return dynamicFunc({});
            }
        };

        let proxy = new Proxy(input, handler);
        return proxy;
    };
    return dynamicFunc(baseObj); 
```

我在这里使用 Proxy 类作为基本解决方案，所以用两个词表示 - 每次您尝试访问某个属性时，如果它不存在，它就会创建该属性。是时候编辑了，因为我遇到了很多问题，需要解决它们，所以:)

**样本：**

```
let ob = dynamic();
ob.test1.test2.test3('hello from Belarus!','qwerty').test5.t('test');

//we could assign properties on the fly : 
ob.myProp.pyProp2 = 2;

console.log(ob.myProp.pyProp2) // "1" will be outputed

// some tests using chai and chai-spies: 
    dynamic().genericProperties.anyFunc().myprop.test();
    let obj = dynamic({ predefinedObjValue: 3 });
    obj.prop1.prop2.test = 1;
    obj.prop1.prop3.test = 2;
    obj.prop2.myfunc = () => { };

    expect(obj.prop1.prop2.test).to.be.equal(1);
    expect(obj.prop1.prop3.test).to.be.equal(2);
    expect(obj.predefinedObjValue).to.be.equal(3);

    const myFuncSpy = chai.spy.on(obj.prop2, 'myfunc');
    obj.prop2.myfunc();
    expect(myFuncSpy).to.have.been.called(); 
```

它也不会导致任何错误，您可以定义自己的基础对象并且它不会被覆盖：

```
let ob = dynamic({mycustomProp : 1});
ob.test1.test2.test3('asdasd','tt').test5.t('test'); //without error

console.log(ob.mycustomProp) // "1" will be outputed 
```

工作样本：[https ://codesandbox.io/s/craky-liskov-myf65](https://codesandbox.io/s/cranky-liskov-myf65)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T23:16:25.990

编辑1：您可以使用typeof检查方法是否存在： If(typeof(obj.methodName)!= "undefined"){ //call methodName } 如果要专门检查函数，其类型将返回“功能”。但是，我不知道有什么方法可以获取函数的签名，尽管如果你的函数能很好地处理空值，JavaScript 是相当宽容的。

原始答案我相信 Ethan Brown 有这个权利，因为所有 Javascript 对象基本上只是变量的名称-值对，有时是函数。尝试以下代码来提醒任何给定对象的所有属性和方法的列表：

```
function obj(prop){
    this.prop = prop;
    this.setProp = function setProp(prop){this.prop = prop};
                                         }
        var myObj = new obj("something");
    myObj.setProp("anything else");
var getKeys = function(obj){
    var keys = [];
   for(var key in obj){
      keys.push(key);
   }
   return keys;
}
alert(getKeys(myObj)); 
```

请注意，这与Slashnick[如何列出 JavaScript 对象的属性中使用的过程相同](https://stackoverflow.com/questions/208016/how-to-list-the-properties-of-a-javascript-object)

# java - 使用 Velocity 创建 SOAP 消息

> ID：12150548
> 
> 赞同：0
> 
> 时间：2012-08-27T22:35:20.693
> 
> 标签：java, velocity

我需要使用 Velocity 创建一个 SOAP 消息。我只是想知道如何从 Velocity 模板中获取 SOAP 消息对象？据我所知，速度模板被评估为字符串。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:43:03.437

不确定这是否仍然相关，您可以使用速度（作为字符串）生成 SOAP XML 消息，然后使用普通 HTTP 客户端执行 POST。您是否使用某种框架，必须将速度输出反序列化为 SOAP 消息对象？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:01:14.970

Velocity 确实只输出 a `String`，因此您有一个选择：将 XML 重新解析为一个对象。

# sql - 从 Heroku 访问 Rails sample_app 登录页面失败

> ID：12150554
> 
> 赞同：0
> 
> 时间：2012-08-27T22:36:23.827
> 
> 标签：sql, ruby-on-rails, heroku

我正在学习铁轨。我在Michael Hartl 的 rails 教程的[第 7 章。](http://ruby.railstutorial.org/chapters/sign-up#sec-deploying_to_production_with_ssl_)我正在尝试创建一个注册页面，用户可以在其中创建帐户。当我从本地环境`localhost:3000`（

检查我发现的heroku日志：

```
Started GET "/signup" for [an ip address...] at 2012-08-27 21:36:15 +0000

Processing by UsersController#new as HTML

ActionView::Template::Error (Missing partial /shared/error_messages with 
{:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:

* "/app/app/views"

Rendered users/new.html.erb within layouts/application (38.9ms)

6:     <%= form_for(@user) do |f| %>
Completed 500 Internal Server Error in 137ms

5:   <div class="span6 offset3">
):

4: <div class="row">
app/views/users/new.html.erb:6:in     
  `_app_views_users_new_html_erb___3412900076253353202_33302880'

7:       <%= render '/shared/error_messages' %>

8:       <%= f.label :name %>
app/views/users/new.html.erb:7:in `block in 
  _app_views_users_new_html_erb___3412900076253353202_33302880'

9:       <%= f.text_field :name %> 
```

现在我跑了：

```
$ heroku run rake db:migrate 
```

我已经包含`'pg', '0.12.2'`在我的 gemfile 中。

我还使用以下方法回滚了heroku db：

```
$ heroku pg:reset HEROKU_POSTGRESQL_WHITE 
```

然后重新迁移它

```
$ heroku run rake db:migrate 
```

无济于事。有任何想法吗？这很奇怪，因为网页的其他所有方面都有效，而且整个工作都在我的本地环境中有效。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:11:57.743

Krule 正确地发现了问题。我已经将目录命名为 sample_app/app/views/Shared，而它应该是 sample_app/app/views/shared。

值得注意的是，在 git 中更改目录的大小写有点挑战性，因为 git 不区分大小写。我必须执行这些命令

> $ git mv 共享 shared2
> 
> $ git mv shared2 共享
> 
> $ git commit -m "你的信息在这里"
> 
> $ git添加-A
> 
> $ git推送

然后推到heroku：

> $ git push heroku
> 
> $ heroku 打开

感谢您快速准确的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:41:21.293

您缺少部分内容：

```
Missing partial /shared/error_messages with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder] 
```

检查它是否已添加到 git。

# android - 仅类似于电话的数字软键盘

> ID：12150558
> 
> 赞同：5
> 
> 时间：2012-08-27T22:36:52.063
> 
> 标签：android, android-widget, user-input, android-edittext, android-softkeyboard

我想要一个类似手机的软键盘，只允许输入数字。

我可以使用 inputType="number" 实现“只有数字”（默认为软键盘，但只允许输入数字）和使用 inputType="phone" 的类似电话的样式。但是当像数字|电话一样组合在一起时，即使样式是类似电话的，软键盘也允许使用数字以外的符号。

我想要类似电话的风格，因为数字按钮更大，更容易按下，我只需要输入数字。

除了创建自定义键盘之外还有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T23:05:27.590

直接设置输入类型时可以强制键盘为数字，不确定是否有额外的按钮

```
EditText t = (EditText) findViewById(R.id.edittext1);

t.setRawInputType(Configuration.KEYBOARD_12KEY); 
```

或者

```
t.setRawInputType(InputType.TYPE_CLASS_PHONE); 
```

我很久以前就用过第一个，它工作正常，不确定最近的 Android 版本。

但是，您不能影响布局。他们的键盘由当前执行键盘的应用程序提供，它可以做任何它想做的事情。甚至像给你 2 个按钮让用户输入莫尔斯电码之类的东西，比如[https://play.google.com/store/apps/details?id=org.emergent.android.morseime](https://play.google.com/store/apps/details?id=org.emergent.android.morseime)。

如果那是你得到的键盘不是你想要的，你必须自己实现 - 一个相对简单的 10 个按钮的布局并没有那么多工作。

# php - 模型查找返回 CakePHP 中的所有行

> ID：12150566
> 
> 赞同：0
> 
> 时间：2012-08-27T22:37:57.070
> 
> 标签：php, cakephp, cakephp-2.0

这个问题让我很困惑，我希望你能帮助我。

我在 CakePHP (2.x) 中有一个模型，它引用了另一个模型，如下所示：

```
<?php
App::uses('MyClass2', 'Model');
class MyClass1 extends AppModel { 
```

稍后在课堂上，我`find('all')`呼吁`MyClass2`：

```
$params = array(
    'MyClass2.user_id' => $user_id
);
$my_class2 = new MyClass2();
$data = $my_class2->find('all', $params); 
```

但不是只返回匹配的行`$user_id`，而是返回数据库中的每一行。我可以确认`$user_id`已正确保存在数据库中并且已正确初始化，但它仍然始终返回所有数据，而不仅仅是匹配的行`$user_id`。我应该怎么做才能从`MyClass2`内部获取数据`MyClass1`只匹配正确的`$user_id`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:40:40.687

您需要`conditions`在参数中添加数组:)

```
$params = array(
    'conditions' => array(
        'MyClass2.user_id' => $user_id
    )
); 
```

# android - 不能同时运行两个或多个安卓模拟器

> ID：12150567
> 
> 赞同：1
> 
> 时间：2012-08-27T22:37:58.987
> 
> 标签：android, sockets, android-emulator, emulation

我想在android中测试一个服务器/客户端套接字聊天程序，我想同时运行两个模拟器**，**我已经搜索了很多但我没有得到任何地方。我通过运行“emulator -avd test”两次尝试命令提示符，其中 test 是先前创建的 avd，但只有第一个模拟器出现，第二个没有出现，但是当我检查 Windows 任务管理器时，有两个“模拟器”实例。 exe”正在运行。即使我在“程序文件（x86）”文件夹中复制“android”文件夹并分别运行每个“AVD 管理器”，它也不起作用。在这种情况下，运行第二个模拟器时，命令提示符屏幕上会出现警告：

警告：数据分区警告：缓存分区已在使用中。变化不会持续！

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:52:01.107

您需要创建两个单独的 AVD（test1 和 test2）。据我所知，您不能有两个正在运行的同一个 AVD 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T00:22:19.333

尝试从用户目录中的文件夹中清除`AVD cache`和图像文件。`.android`

在此之前停止所有模拟器，如果正在运行则停止进程，然后手动删除`AVD`，并创建一个新的。

# macos - 从命令行使用 URL 打开 Safari 并获取进程句柄

> ID：12150569
> 
> 赞同：15
> 
> 时间：2012-08-27T22:38:32.153
> 
> 标签：macos, process, safari

我知道 MacOS 中有几种方法可以从命令行使用给定 URL 打开 Safari，例如

```
open -a Safari http://stackoverflow.com 
```

或作为 AppleScript

```
tell application "Safari" to open location "http://stackoverflow.com/" 
```

但是，如果我以编程方式启动进程，我只会获得 open/applescript 进程的句柄（在 Safari 启动后立即退出）。

如何使用给定的 URL 启动 Safari 并获取 Safari 进程的句柄（我仍然无法将 URL 作为命令行参数传递给 Safari 可执行文件的原因）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T15:57:12.900

在 AppleScript 中，使用 URL 打开 Safari 后

```
tell application "Safari" to open location "http://stackoverflow.com/" 
```

您可以通过以下方式获取流程对象

```
tell application "System Events" to set proc to application process "Safari" 
```

proc 对象将附加 pid、bundle id 等。

另请注意，Safari 5+ 运行在[多进程架构中](http://trac.webkit.org/wiki/WebKit2)：一个主进程和多个渲染进程，上面的代码只会让您获得主进程；渲染进程不容易访问，控制任何单独的渲染进程也没有多大意义。

# git - 为什么 git fetch 没有做任何改变

> ID：12150574
> 
> 赞同：1
> 
> 时间：2012-08-27T22:39:47.760
> 
> 标签：git, merge

我想做 git fetch 而不是 git pull。但是当我进行 fetch 时，它从未提到过像“这个”文件需要合并或类似的东西。为什么会这样？。如果我不知道这些文件需要合并，那么 git fetch 解决什么目的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:59:13.180

要扩展 anio 的正确答案，`git fetch`请更新所谓的*远程跟踪分支*。您可以将远程跟踪分支视为远程服务器上的代理。例如，假设您在克隆存储库时，其中有三个提交：

```
+----------------------------------+
| Remote repository (origin):      |
| master: A-B-C                    |
+----------------------------------+

+-------------------------------------------------------+
| Your repository:                                      |
| remotes/origin/master: A-B-C (remote tracking branch) |
| master: A-B-C (your working branch)                   |
+-------------------------------------------------------+ 
```

现在假设有人做了一些工作并推动了一些工作，比如提交 D 和 E。现在图片看起来像这样：

```
+----------------------------------+
| Remote repository (origin):      |
| master: A-B-C-D-E                |
+----------------------------------+

+-------------------------------------------------------+
| Your repository:                                      |
| remotes/origin/master: A-B-C (remote tracking branch) |
| master: A-B-C (your working branch)                   |
+-------------------------------------------------------+ 
```

请注意，您的存储库没有更改；对远程存储库的更改不会自动推送到您的存储库。但是，如果您这样做`git fetch`，它只会更新您的*远程跟踪分支*：

```
+----------------------------------+
| Remote repository (origin):      |
| master: A-B-C                    |
+----------------------------------+

+-----------------------------------------------------------+
| Your repository:                                          |
| remotes/origin/master: A-B-C-D-E (remote tracking branch) |
| master: A-B-C (your working branch)                       |
+-----------------------------------------------------------+ 
```

请注意您的远程跟踪分支现在如何拥有来自远程存储库的所有最新信息，但您的工作分支尚未更新，因为这样做需要合并（在这种情况下是快进合并，因为您没有完成任何工作）。

仅此`git fetch`而已；它只更新远程跟踪分支，它不会告诉您将合并什么。要查看将合并什么，请参阅链接 anio 提到（[如何在 git 中预览合并？](https://stackoverflow.com/questions/5817579/how-can-i-preview-a-merge-in-git)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:42:38.933

git fetch 下载更改但不进行合并。git pull 就是这样做的。你想预览 git merge 会做什么吗？然后看到这个：[如何在 git 中预览合并？](https://stackoverflow.com/questions/5817579/how-can-i-preview-a-merge-in-git)

由于撤消失败的 git merge 非常容易，所以我个人只是进行 git merge 并查看我得到了什么冲突。大多数时候，合并进行得非常顺利。如果我遇到太多冲突或改变主意，很容易撤消 git 合并：

```
git reset --hard HEAD 
```

Git 让尝试变得很容易。不要害怕。

# c# - 选择一个项目两次或多次

> ID：12150575
> 
> 赞同：1
> 
> 时间：2012-08-27T22:39:51.153
> 
> 标签：c#, windows-phone-7, listbox, datacontext, selectedindex

我有一个带有 DataContext 的列表框。当我选择一个项目时，我无法再次选择相同的项目。当对象很多时这不是问题，但有时，一个post-service返回我一个只有一个元素的列表，如果用户选择了元素，他想再次选择它，他将无法做到。任何人都知道如何解决这个问题

总之感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:36:39.083

试试这个，它对我有用.. :)

```
 public void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
  {
        ListBox listBox = sender as ListBox;

        if (listBox != null && listBox.SelectedItem != null)
        {
            // do work
        }

        listBox.SelectedIndex = -1;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:05:26.573

正如 Thierry 所问的，为什么您希望用户再次选择相同的项目？

如果只是这种边缘情况，您有一个项目填充列表框，那么我会问，默认情况下是否选择了单个项目（或返回多个项目的第一个项目）？如果是这样，请尝试在列表框中将 IsSynchronizedWithCurrentItem 属性设置为 False。没有看到代码，很难提供更好的答案。

如果每次用户选择一个项目时都有代码运行，无论它是否相同，您都可能遇到工作流问题。您可能想看看是否可以重构该区域的代码以更改工作流程。

如果您无法通过选择一个项目来更改工作流程，即使它是相同的，您可能需要将列表框中的每个项目都设为一个按钮，并将按钮的控件模板更改为文本块的控件模板。这将允许您绑定到 Command 属性并明确知道用户单击了哪个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T00:12:08.017

如果您使用 a`ListBox`来执行导航之类的操作，那么您希望用户能够连续多次选择一个项目是有道理的。这是你如何做到的：

“问题”只是`ListBox`通知您*更改*，并且选择相同的项目不是*更改*。因此，在方法结束时使其无效，并在开始时检查您的无效状态。

```
public void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
   var lb = (ListBox)sender;
   if (lb.SelectedIndex == -1) return;

  //your selection logic here

   lb.SelectedIndex = -1;
} 
```

# c++ - 模板 MSVC 中的嵌套名称

> ID：12150576
> 
> 赞同：3
> 
> 时间：2012-08-27T22:40:05.957
> 
> 标签：c++, visual-studio, templates

我有一些代码，我不明白，为什么它不能在`MSVC`（2010 Express，2012 RC）中编译并在其他编译器中编译（例如`gcc 4.7`）。是错误`MSVC`（我试图在谷歌中搜索，但找不到此错误的描述），还是我做了一些标准不支持的事情？

```
template<typename T, T Val>
struct integral_c
{
    typedef integral_c<T, Val> type;
    static const T value = Val;
};

typedef integral_c<bool, true> true_;
typedef integral_c<bool, false> false_;

template<bool Cond, typename T = void>
struct enable_if
{
    typedef T type;
};

template<typename T>
struct enable_if<false, T>
{
};

template<typename T>
struct is_int : false_
{
};

template<>
struct is_int<int> : true_
{
};

template<typename T, typename = void>
struct identity_if_int
{
};

template<typename T>
struct identity_if_int<T, typename enable_if<is_int<T>::type::value>::type>
{
    typedef T type;
};

int main()
{
    identity_if_int<int>::type t = 0;
} 
```

[http://liveworkspace.org/code/311b71954b168862b19043ba49670856](http://liveworkspace.org/code/311b71954b168862b19043ba49670856)

`MSVC`说，那`enable_if<false>`没有成员`type`。当我`identity_if_int`喜欢

```
template<typename T>
struct identity_if_int<T, typename enable_if<is_int<T>::value>::type>
{
    typedef T type;
}; 
```

一切正常。问题是什么？任何帮助和 MSDN（或其他）的链接将不胜感激。

# objective-c - 使用按钮复制和粘贴文本

> ID：12150586
> 
> 赞同：2
> 
> 时间：2012-08-27T22:40:45.017
> 
> 标签：objective-c, ios, xcode

我想知道我必须在IB操作按钮下编写什么代码，这样当我单击称为复制的按钮时，它将复制指定文本视图中的文本，然后当您单击粘贴时，它将粘贴一些文本指定的文本视图。

我在这方面找不到任何东西。有没有人有一些代码或一个好的教程的链接？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T22:45:52.910

查看[`UIPasteboard`类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPasteboard_Class/Reference.html)。

## 放

```
-(IBAction)copyText
{
    [[UIPasteboard generalPasteboard] setString:myTextView.text];
} 
```

## 得到

```
myTextView2.text = [[UIPasteboard generalPasteboard] string]; 
```

# java - 鼠标监听器只有一个实例有效

> ID：12150590
> 
> 赞同：1
> 
> 时间：2012-08-27T22:41:11.667
> 
> 标签：java, swing, components, awt, mouselistener

因此，我以以下方式将鼠标侦听器设置为 java 组件：

```
int[] monsters = new int[12];
        monsters[0] = MonsterSelector.BL_BLUE_BUFF;
        monsters[1] = MonsterSelector.BL_RED_BUFF;
        monsters[2] = MonsterSelector.BL_WOLVES;
        monsters[3] = MonsterSelector.BL_WRAITHS;
        monsters[4] = MonsterSelector.BL_GOLEMS;
        monsters[5] = MonsterSelector.BARON;
        monsters[6] = MonsterSelector.PU_BLUE_BUFF;
        monsters[7] = MonsterSelector.PU_RED_BUFF;
        monsters[8] = MonsterSelector.PU_WOLVES;
        monsters[9] = MonsterSelector.PU_WRAITHS;
        monsters[10] = MonsterSelector.PU_GOLEMS;
        monsters[11] = MonsterSelector.DRAGON;    
for(int monster = 1; monster < MonsterSelector.LAST+1; monster++){
        final int currentMonster = monsters[monster-1];
        ImageView iv = new ImageView(images.get(currentMonster), 50, 50);
        ivs.put(currentMonster, iv);
        ivs.get(currentMonster).addMouseListener(this); 
    } 
```

我在课堂上有以下鼠标监听器的实现：

```
 @Override
    public void mouseReleased(MouseEvent e) {

        Component src = (Component) e.getSource();

        Log.e(TAG, ""+src.getName());
    } 
```

现在的问题是只有第一个 mouselistener 集真正给出了输出。其余的只是忽略。我究竟做错了什么？我不能在多个对象上设置相同的鼠标监听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:36:52.327

I'd guess that either `MonsterSelector.LAST` isn't set to the highest value it should be. Or that you're initialising `MonsterSelector.BL_BLUE_BUFF`, `MonsterSelector.BL_RED_BUFF`, etc. to all have the same int value?

# git - Windows 中的 GitHub 克隆 URL，无需使用 GitHub 的 Windows 官方客户端

> ID：12150594
> 
> 赞同：0
> 
> 时间：2012-08-27T22:41:32.057
> 
> 标签：git, github, github-for-windows

谢谢阅读！;) 我只是在学习 Git 和 GitHub 的东西，所以我正在阅读一个教程，其中一个步骤说我需要在 GitHub 的网站上获取我的“克隆 URL”和“公共克隆 URL”。tuto 不是最新的，所以目前如果我去 GitHub 的网站，我看到一个“在 Windows 中克隆”按钮，它强制我安装“GitHub for Windows”官方客户端。

即使这可行，我来自 Linux 环境，在我目前的工作中，我需要使用 Windows 是否需要 ¬¬ 我已经安装并配置了 Cygwin、Console2 和 Msysgit 以与 Git Bash 和这些软件一起使用能够使用控制台，所以当我想要的只是这个克隆 URL 的东西时，我发现被迫使用 Windows 客户端令人沮丧......

所以，我的问题是，如何在不安装此 Windows 客户端的情况下获取此 URL？有办法吗？我是不是误会了什么？我只是想学习 GIT 和 GitHub，这样我就可以在办公室工作了。

有任何想法吗？？？？

非常感谢！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:54:14.217

URL 应该就在“在 Windows 中克隆”按钮旁边，如此[处所示](https://github-images.s3.amazonaws.com/help/remotes-url.png)

“HTTPS”和“Git Read-Only”等各种选项对应较新版本的“Clone URL”和“Public Clone URL”。

# objective-c - Cocoa-Touch - 如何解析本地 Json 文件

> ID：12150595
> 
> 赞同：13
> 
> 时间：2012-08-27T22:41:44.220
> 
> 标签：objective-c, ios, json, cocoa-touch

我是 iOS 开发的新手，我正在尝试解析本地 Json 文件，例如

`{"quizz":[{"id":"1","Q1":"When Mickey was born","R1":"1920","R2":"1965","R3":"1923","R4","1234","response","1920"},{"id":"1","Q1":"When start the cold war","R1":"1920","R2":"1965","R3":"1923","rep4","1234","reponse","1920"}]}`

这是我的代码：

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"json"];
NSString *myJSON = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL];
// Parse the string into JSON
NSDictionary *json = [myJSON JSONValue];

// Get all object
NSArray *items = [json valueForKeyPath:@"quizz"];

NSEnumerator *enumerator = [items objectEnumerator];
NSDictionary* item;
while (item = (NSDictionary*)[enumerator nextObject]) {
    NSLog(@"clientId = %@",  [item objectForKey:@"id"]);
    NSLog(@"clientName = %@",[item objectForKey:@"Q1"]);
    NSLog(@"job = %@",       [item objectForKey:@"Q2"]);
} 
```

我在此站点上找到了一个示例，但出现以下错误

-JSONValue 失败。错误是：在对象键之后不需要令牌“值分隔符”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T22:54:24.323

JSON 具有严格的键/值表示法，R4 和响应的键/值对不正确。试试这个：

```
NSString *jsonString = @"{\"quizz\":[{\"id\":\"1\",\"Q1\":\"When Mickey was born\",\"R1\":\"1920\",\"R2\":\"1965\",\"R3\":\"1923\",\"R4\":\"1234\",\"response\":\"1920\"}]}"; 
```

^(如果您从文件中读取字符串，则不需要所有斜杠)
您的文件将是这样的：

> {"quizz":[{"id":"1","Q1":"米奇出生时","R1":"1920","R2":"1965","R3":"1923", "R4":"1234","re​​sponse":"1920"},{"id":"1","Q1":"什么时候开始冷战","R1":"1920","R2": "1965","R3":"1923","R4":"1234","响应":"1920"}]}

* * *

我用这段代码测试过：

```
NSString *jsonString = @"{\"quizz\":[{\"id\":\"1\",\"Q1\":\"When Mickey was born\",\"R1\":\"1920\",\"R2\":\"1965\",\"R3\":\"1923\",\"R4\":\"1234\",\"response\":\"1920\"}, {\"id\":\"1\",\"Q1\":\"When start the cold war\",\"R1\":\"1920\",\"R2\":\"1965\",\"R3\":\"1923\",\"R4\":\"1234\",\"reponse\":\"1920\"}]}";
NSLog(@"%@", jsonString);
NSError *error =  nil;
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding] options:kNilOptions error:&error];

NSArray *items = [json valueForKeyPath:@"quizz"];

NSEnumerator *enumerator = [items objectEnumerator];
NSDictionary* item;
while (item = (NSDictionary*)[enumerator nextObject]) {
    NSLog(@"clientId = %@",  [item objectForKey:@"id"]);
    NSLog(@"clientName = %@",[item objectForKey:@"Q1"]);
    NSLog(@"job = %@",       [item objectForKey:@"Q2"]);
} 
```

我的印象是，您复制了旧代码，因为您没有使用苹果的序列化和 Enumerator 而不是[Fast Enumeration](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)。整个枚举的东西可以简单地写成

```
NSArray *items = [json valueForKeyPath:@"quizz"];
for (NSDictionary *item in items) {
    NSLog(@"clientId = %@",  [item objectForKey:@"id"]);
    NSLog(@"clientName = %@",[item objectForKey:@"Q1"]);
    NSLog(@"job = %@",       [item objectForKey:@"Q2"]);
} 
```

甚至更喜欢[基于块的枚举](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW5)，如果需要快速和安全的枚举，您是否有额外的索引。

```
NSArray *items = [json valueForKeyPath:@"quizz"];
[items enumerateObjectsUsingBlock:^(NSDictionary *item , NSUInteger idx, BOOL *stop) {
    NSLog(@"clientId = %@",  [item objectForKey:@"id"]);
    NSLog(@"clientName = %@",[item objectForKey:@"Q1"]);
    NSLog(@"job = %@",       [item objectForKey:@"Q2"]);
}]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-30T10:25:08.213

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"json"];
NSString *myJSON = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL];
NSError *error =  nil;
NSArray *jsonDataArray = [NSJSONSerialization JSONObjectWithData:[myJSON dataUsingEncoding:NSUTF8StringEncoding] options:kNilOptions error:&error]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T22:56:22.060

使用[jsonlint.com](http://jsonlint.com)查找 JSON 字符串中的错误。
在这种情况下，它表示您附近有无效的 JSON`"R4"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T22:55:42.527

您的 json 文件中似乎有错字。

替换
`"R4","1234","response","1920"`为`"R4":"1234","response":"1920"`
和
`"rep4","1234","reponse","1920"`_`"rep4":"1234","response":"1920"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-18T08:16:32.867

**Swift 2.3** 我使用实用方法将 JSON 文件转换为 Dictionary：

```
func getDictionaryFromJSON(jsonFileName: String) -> [String: AnyObject]? {
    guard let filepath = NSBundle.mainBundle().pathForResource(jsonFileName, ofType: "json") else {
        return nil
    }

    guard let data = NSData(contentsOfFile: filepath) else {
        return nil
    }

    do {
        let dict = try NSJSONSerialization.JSONObjectWithData(data, options: []) as? [String: AnyObject]
        return dict
    } catch {
        print(error)
        return nil
    }
} 
```

# c++ - MFC C++ 后台线程

> ID：12150596
> 
> 赞同：1
> 
> 时间：2012-08-27T22:42:09.367
> 
> 标签：c++, mfc, background-thread

我正在制作一个 MFC（文档/视图）应用程序，我希望它在后台持续监听设备何时连接，然后自动复制设备上的文件，而无需用户交互或暂停/打扰他们正在做的事情.

创建工作线程与拥有后台线程一样吗？我会将它创建为文档文件中的函数还是单独的类？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:19:46.113

是的，它们表现为普通的后台线程，你有一个获取参数的函数，然后你可以进入你的监听器循环。我会把这个函数放在单独的类中，也许是单例类的形式，这样你就可以轻松地启动/停止你的设备监听器。如果您需要将此工作线程的进度信息发送到 GUI，请使用 PostMessage 到您的 GUI 窗口。

一如既往，MSDN 提供了大量文档：http: [//msdn.microsoft.com/en-us/library/975t8ks0%28v=vs.80%29](http://msdn.microsoft.com/en-us/library/975t8ks0%28v=vs.80%29)

# android - 将字符串数组列表保存到共享首选项

> ID：12150597
> 
> 赞同：11
> 
> 时间：2012-08-27T22:42:19.610
> 
> 标签：android, arraylist, sharedpreferences

在 API 级别 8中保存`ArrayList`字符串的最佳方法是什么？`SharedPreferences`我现在能想到的唯一方法是将所有字符串保存到一个用逗号分隔的字符串中并以这种方式保存。但我不知道字符串是否有最大大小。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-27T23:40:16.187

如果你能保证你`String`的 s in`ArrayList`不包含逗号，你可以简单地使用

```
List<String> list = new ArrayList<String>();
...
editor.putString(PREF_KEY_STRINGS, TextUtils.join(",", list)); 
```

并阅读列表

```
String serialized = prefs.getString(PREF_KEY_STRINGS, null);
List<String> list = Arrays.asList(TextUtils.split(serialized, ",")); 
```

您受到设备内存的限制。使用后台线程读取/写入共享首选项是一种很好的做法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-27T22:46:33.763

我建议您将数组列表保存为 Android 中的内部存储文件。例如，对于名为 的数组列表`text_lines`：

内部存储文件 IO（写入）：

```
try {
   //Modes: MODE_PRIVATE, MODE_WORLD_READABLE, MODE_WORLD_WRITABLE
   FileOutputStream output = openFileOutput("lines.txt",MODE_WORLD_READABLE);
   DataOutputStream dout = new DataOutputStream(output);
   dout.writeInt(text_lines.size()); // Save line count
   for(String line : text_lines) // Save lines
      dout.writeUTF(line);
   dout.flush(); // Flush stream ...
   dout.close(); // ... and close.
}
catch (IOException exc) { exc.printStackTrace(); } 
```

内部存储文件 IO（读取）：

```
FileInputStream input = openFileInput("lines.txt"); // Open input stream
DataInputStream din = new DataInputStream(input);
int sz = din.readInt(); // Read line count
for (int i=0;i<sz;i++) { // Read lines
   String line = din.readUTF();
   text_lines.add(line);
}
din.close(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T22:48:14.967

有一个方法，`putStringSet()`, in `SharedPreferences.Editor`，如果你的字符串是`Set`. （也就是说，没有重复）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-27T23:07:32.983

如果您正在使用无法使用 put/getStringSet() 的 api（如级别 8），那么这是一个可能的解决方案，但如果您想存储更大的列表，这将**非常昂贵**且不**灵活。**我的意思是，如果性能很重要，那么为简单的类似数组的结构创建类似地图的数据结构会产生巨大的开销。

要保存它：

```
public static void writeList(Context context, List<String> list, String prefix)
{
    SharedPreferences prefs = context.getSharedPreferences("YourApp", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = prefs.edit();

    int size = prefs.getInt(prefix+"_size", 0);

    // clear the previous data if exists
    for(int i=0; i<size; i++)
        editor.remove(prefix+"_"+i);

    // write the current list
    for(int i=0; i<list.size(); i++)
        editor.putString(prefix+"_"+i, list.get(i));

    editor.putInt(prefix+"_size", list.size());
    editor.commit();
} 
```

要检索它：

```
public static List<String> readList (Context context, String prefix)
{
    SharedPreferences prefs = context.getSharedPreferences("YourApp", Context.MODE_PRIVATE);

    int size = prefs.getInt(prefix+"_size", 0);

    List<String> data = new ArrayList<String>(size);
    for(int i=0; i<size; i++)
        data.add(prefs.getString(prefix+"_"+i, null));

    return data;
} 
```

并实际使用它：

```
List<String> animals = new ArrayList<String>();
animals.add("cat");
animals.add("bear");
animals.add("dog");

writeList(someContext, animals, "animal"); 
```

并检索它：

```
List<String> animals = readList (someContext, "animal"); 
```

**如果您不限于使用 SharedPreferences，请考虑使用[SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)！**

# wordpress - php wordpress 函数返回警告：缺少参数 1

> ID：12150600
> 
> 赞同：0
> 
> 时间：2012-08-27T22:42:40.230
> 
> 标签：wordpress, function, warnings, mamp

我编写了这几个函数，它们将一个爆炸的自定义字段字符串与帖子永久链接交替：

（自定义字段应如下所示：例如 Google++http//:google.com"）

```
// Custom Permalink
function custom_permalink($url){
    global $post;
    $link = get_post_meta($post->ID,'link',true);
    if ($link) {
        $pieces = explode("++", $link);
        $url = $pieces[1];
    } else {
        $url = the_permalink();
    }
    return $url;
}

// Via Text
function via_text($url){
    global $post;
    $link = get_post_meta($post->ID,'link',true);
    if ($link) {
        $pieces = explode("++", $link);
        $url = ' <span><a href="'.$pieces[1].'">Via '.$pieces[0].'</a></span>';
    } else {
        $url = ' ';
    }
    return $url;
} 
```

...在 MAMP 服务器上测试时可以正常工作，但在部署时它们会返回：

“警告：缺少参数 1”

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:15:45.903

好的...我想通了...当一个类被实例化并且构造函数没有默认参数时会发生这种情况...

这是工作功能...

```
 // Custom Permalink
    function custom_permalink($url='') {
        global $post;
        $link = get_post_meta($post->ID,'link',true);
        if ($link) {
            $pieces = explode("++", $link);
            $url = $pieces[1];
        } else {
            $url = the_permalink();
        }
        return $url;
    }

    // Via Text
    function via_text($url='') {
        global $post;
        $link = get_post_meta($post->ID,'link',true);
        if ($link) {
            $pieces = explode("++", $link);
            $url = ' <span><a href="'.$pieces[1].'">Via '.$pieces[0].'</a></span>';
        } else {
            $url = ' ';
        }
        return $url;
    } 
```

万一有人需要……他们做什么：

如果有带有自定义字段“链接”的帖子（例如：Google++http://google.com），该函数将用自定义链接替换永久链接。所以在主题调用中： echo custom_permalink(); ...而不是 the_permalink();

via_text() 函数的工作方式略有不同；它调用一个自定义字段“链接”的跨度标签，如下所示：

```
 <span><a href="http://google.com">Via Google</a></span> 
```

希望这对其他人有用

:)

# qt - 为什么我在处理 jpeg 图像时不能链接到 opencv 和 qt？

> ID：12150605
> 
> 赞同：1
> 
> 时间：2012-08-27T22:43:14.797
> 
> 标签：qt, opencv, libjpeg

当应用程序链接到 OpenCV 2.3 或 2.4 时，从 jpeg 文件加载 QImage 对象失败。当我尝试从 jpeg 文件创建 QImage 时程序出现段错误

```
QImage( "some-jpeg.jpg" ) 
```

仅当应用程序与 opencv 的 highgui 库链接时，这才是正确的。

我正在使用 OpenCV 2.4 和 Qt 4.8.1 在 Ubuntu 12.04 上构建

有谁知道为什么会发生这种情况以及我该如何解决这个问题？我的研究项目使用 OpenCV 的图像处理代码，前端依赖于 Qt。

我已经向 Qt (https://bugreports.qt-project.org/browse/QTBUG-27032) 提交了错误报告。我在 OpenCV 上试过，但他们的注册项目很糟糕，因为它接受了注册信息，但随后拒绝尝试登录......

qt-cv-jpg-test.pro

```
QT += core gui

TARGET = qt-cv-jpg-test
TEMPLATE = app

INCLUDEPATH += /usr/local/include
LIBS += -L/usr/local/lib -lopencv_highgui -lopencv_core

SOURCES += main.cpp 
```

主文件

```
#include <QImage>
#include "opencv2/core/core.hpp"
#include "opencv2/highgui/highgui.hpp"

int main(int argc, char *argv[])
{
    QString fileName = "some-jpeg.jpg";
    cv::Mat cvImage = cv::imread( fileName.toStdString() );
    QImage qtImage( fileName );
    return 0;
} 
```

程序段错误，但这里是堆栈：

```
0   jpeg_CreateDecompress   /usr/local/lib/libopencv_highgui.so.2.4 0   0x7ffff7ae55fc  
1   ??  /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqjpeg.so  0   0x7ffff0549ee7  
2   ??  /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqjpeg.so  0   0x7ffff054a18f  
3   QImageReader::read(QImage*) /usr/lib/x86_64-linux-gnu/libQtGui.so.4 0   0x7ffff6c3f0c8  
4   QImageReader::read()    /usr/lib/x86_64-linux-gnu/libQtGui.so.4 0   0x7ffff6c3f6f7  
5   QImage::load(QString const&, char const*)   /usr/lib/x86_64-linux-gnu/libQtGui.so.4 0   0x7ffff6c348dc  
6   QImage::QImage(QString const&, char const*) /usr/lib/x86_64-linux-gnu/libQtGui.so.4 0   0x7ffff6c34a75  
7   main    main.cpp    9   0x400d10 
```

我真的不知道为什么 opencv 方法会出现在堆栈的底部。我构建了opencv，告诉它在文件系统上使用libjpeg。我在系统上安装了 libjepg 6.2 和 libjpeg8。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:43:30.370

我遇到了同样的错误 - 我们昨天晚上发现了问题。

我假设您已经使用 BUILD_JPEG 或 OPENCV_BUILD_3RDPARTY_LIBS 标志构建了 OpenCV。此外，OpenCV 安装在 /usr/local/lib 中。在这种情况下，OpenCV 是用它自己的 libjpeg 构建的，它静态链接到 opencv_highgui 库中。

因此，当您创建 QImage 并将 opencv_highgui 链接到项目/应用程序时，链接器将搜索 jpeg_CreateDecompress 函数（该函数由 Qt 内部使用），它首先会在 opencv_highgui 库中找到。Qt 所期望的版本（在 Ubuntu 12.04 中是 libjpeg8）和 OpenCV 发布的版本（libjpeg62）之间应该存在一些不兼容。

因此，存在一个简单的解决方案 ;-) - 构建 OpenCV 而不附带 libjpeg (BUILD_JPEG=OFF) 并使用系统共享库。

# python - Django - 从媒体目录提供文件

> ID：12150607
> 
> 赞同：2
> 
> 时间：2012-08-27T22:43:23.797
> 
> 标签：python, django

我已将一个新网站部署到我的登台和生产服务器，但由于某种原因，媒体目录中的图像显示 404 错误。图像的路径是正确的，并且图像位于该路径：

```
<img src="/media/projects/hair/2012/test-1/13221803.jpg" alt="Slide 1" width="570" height="270" style="">

ls -la ~/.virtualenvs/website/project/media/projects/hair/2012/test-1
total 144
drwxr-x--- 2 username username   4096 Aug 27 16:43 .
drwxr-x--- 3 username username   4096 Aug 27 16:43 ..
-rwxrwxr-x 1 username username 131719 Aug 27 16:43 13221803.jpg 
```

设置.py：

```
MEDIA_ROOT = os.path.join(PROJECT_ROOT, 'media')
MEDIA_URL = '/media/' 
```

我是否因为图像文件嵌套在其他目录中而遇到问题？从静态目录中提供文件就好了，有什么想法吗？

谢谢，

杰森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:57:47.643

你的 urls.py 有这个目标吗？

```
 urlpatterns += patterns('',
            (r'^media/(?P<path>.*)$', 'django.views.static.serve', {
                    'document_root': settings.MEDIA_ROOT})) 
```

# ios - UIScrollView w/ Large CATiledLayer + Overlay 可以快速渲染

> ID：12150609
> 
> 赞同：4
> 
> 时间：2012-08-27T22:43:47.453
> 
> 标签：ios, uiscrollview, catiledlayer

我已经工作了好几个星期了（iOS），但我似乎无法找到一个可以接受的解决方案。

要求

*   显示 10000x10000 像素的背景图像
*   缩放和滚动响应
*   具有自定义绘图的顶部叠加层
*   叠加中的元素是交互式的（点击和突出显示元素等），并且可以打开或关闭片段。
*   iOS 4.0

把它想象成一个虚构城镇的地理地图，上面画着一个疯狂的道路、线路、区域和建筑物系统。CGPaths 与各种不透明度填充、一些图标图像等的混合。它就像一个更复杂的谷歌地图应用程序版本。

我试过的：

* * *

**1 - 多个 CATiled 层**

查看层次结构：

*   滚动视图
*   ->容器视图
*   -->TiledView (CATiledLayer 10000x10000)
*   --->OverlayView (CATiledLayer 10000x10000)

结果：左右从魔术苹果缓存中掉落瓷砖。两个 CATiledlayers 似乎不是正确的路径。覆盖的更新并不快。

* * *

**2 - OverlayView 的子类 TiledView**

查看层次结构：

*   滚动视图
*   ->OverlayView（TiledView CATiledLayer 10000x10000 的子类）

结果：渲染覆盖更新的时间太长。更新瓷砖缓慢

* * *

**3 - 带有单个容器视图的滚动视图**

查看层次结构：

*   滚动视图
*   ->容器视图（10000x10000）
*   -->OverlayView (CALayer 10000x10000)
*   -->TiledView (CATiledLayer 10000x10000)

结果：无法正常工作，因为 OverlayView 占用了太多内存。TileView 很好，因为它由 CATiledLayer 支持

* * *

**4 - 使用滚动委托和 CTM 缩放/平移来模拟大的 OverlayView**

查看层次结构：

*   OverlayView (CALayer 1024x768)
*   滚动视图
*   ->平铺视图（CATiledLayer 10000x10000）

结果：我使用滚动视图代表来调整覆盖视图的偏移和缩放。这种方法的问题在于，drawrect 每秒调用 100 次，而覆盖视图的绘制速度不够快，因此它完全滞后到 1fps。

* * *

这就是我所在的位置。我觉得这最后一种方法很重要，但需要一些疯狂的工作来驯服drawrect的疯狂。其他想法是尝试在 OpenGL 中解决一些问题。

在我开始做这些之前，我想我会问社区看看他们会做什么/已经做了什么面对类似的要求。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:24:21.363

我的建议是在你的滚动视图中有两个视图。背景 CATiledLayer 视图。第二个视图是位于背景视图上方的自定义 UIView - 这是您进行自定义绘图的地方。自定义视图应该有一个 drawRect: 方法，它现在什么都不做。

因此，您在 customView 中没有任何内容尝试此操作，并确保滚动等是您想要的。如果问题出在后台视图中并且您需要解决该问题。

此时，您的自定义视图开始绘制内容。请注意，您将在 drawRect 中获得要更新的矩形。也许您有一千个项目可能需要在整个画布上绘制 - 因此每个项目都有一个 frame 属性，因此您可以确定给定当前缩放和框架需要绘制的内容。你只画那些项目。

这种通用技术过去对我来说效果很好。

编辑2：

因此，在设备上运行时，我复制了“无法分配”消息。所以计划 B。你可以做的是有一个容器视图，它有两个视图——滚动视图和一个新的 UIView 子类。scrollView 有巨大的怪物视图。子类视图有一个正好是 UIScrollView 框架的框架。

然后，您将确保收到 scrollView 消息“scrollViewDidScroll:”，可能还有其他消息。

当 scrollView 稳定时，或者您收到上述消息时，自定义 UIView 子类会收到一条消息，说明 draw 但使用的偏移量是 scrollView contentOffset。

自定义类要做的工作是一样的。它没有使用它的 drawRect 原点，而是使用该点并通过 scrollView 的 contentOffset 偏移它。现在，当您绘制时，您正在寻找在 drawRect:rect 中通过滚动视图偏移正偏移的点范围内的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:27:16.890

我画了一次基于路径的地图，但我没有背景图像，只有路径。我只使用了一个带有drawrect的视图（没有滚动视图）并自己实现了滚动/缩放。那里存在一些性能问题，尤其是在具有高分辨率的 ipad3 上，因为它在分配全分辨率图像上下文时存在问题。

*   不要在路径上使用阴影等，这会影响你的表现。
*   预先计算路径/对象的所有边界框并按某种顺序存储它们，以便您可以尽快查找可见路径/对象。
*   为不同的缩放级别使用不同详细的路径集。

但最后我认为openGL是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-15T16:24:37.183

老问题，但对于每个为此苦苦挣扎的人。您应该使用两个以相同方式缩放/滚动的平铺视图，但覆盖视图不应是背景视图的子视图。也就是说，你应该有：

*   滚动视图
*   ->容器视图
*   -->TiledView (CATiledLayer 10000x10000)
*   -->OverlayView (CATiledLayer 10000x10000)

然后对于绘图速度，它真的归结为你如何为覆盖进行绘图。对于每个图块，您应该确保只绘制覆盖图块的内容，而不是所有其他落在图块边界之外的东西。

# python - Python设置差异不起作用

> ID：12150612
> 
> 赞同：1
> 
> 时间：2012-08-27T22:44:46.547
> 
> 标签：python

在以下代码中；

```
all_digits = set(range(10))
print all_digits
for i in range(102,167):
    digits = set(k for k in (str(i)))
    if len(digits) != 3:
        continue
    print "digits:", digits
    remaining_digits = all_digits - digits
    print "remaining:", remaining_digits 
```

数字集包含 3 个元素。我想要它们的一组差异，但是，`remaining_digits`总是有所有数字。我在这里做错了什么？这是我得到的输出示例；

```
set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '2'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '3'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '4'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '5'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '6'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '7'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
digits: set(['1', '0', '8'])
remaining: set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T22:47:35.420

`all_digits`是 10 个整数`0`的集合`9`，而`digits`是 1 字符字符串的集合，例如`"0"`. 由于类型不同，因此设置差异无法按预期工作。

为了让它像你想要的那样工作，要么使用所有整数，要么使用所有字符串，例如：

```
all_digits = set(map(str, range(10))) 
```

# objective-c - 轻按情节提要中的按钮时的不同图像

> ID：12150614
> 
> 赞同：12
> 
> 时间：2012-08-27T22:44:56.573
> 
> 标签：objective-c, ios, xcode, uibutton

我有一个按钮，我想在突出显示状态时使用不同的背景图像，通常我会使用类似的东西

```
[buttonObject setBackgroundImage:[UIImage imageNamed:@"buttonDown.png"] 
                        forState:UIControlStateHighlighted]; 
```

但是该按钮位于 .storyboard 文件中，而不是代码中。
在这种情况下我应该使用什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-27T22:48:58.117

您也可以通过从下拉菜单中选择状态来为 IB 中的不同状态设置不同的属性：

![在此处输入图像描述](../Images/dfdb2127e1bd8512d856c2c918c2155c.png)

如果你想用代码来做，你必须设置一个插座并将图像设置在`awakeFromNib`.

```
@property (nonatomic, weak) IBOutlet UIButton *button; 
```

要连接插座，您`Ctrl`从按钮 - 拖动到您的文件所有者（可能是视图控制器）并选择上面定义的插座。

然后您可以访问代码中的按钮：

```
- (void)awakeFromNib {
    [button setBackgroundImage:[UIImage imageNamed:@"buttonDown.png"] 
                      forState:UIControlStateHighlighted];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:52:29.443

为什么不使用插座？

从 Apple 文档[配置视图。](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhone101/Articles/05_ConfiguringView.html)

希望有帮助。

# c++ - CUDA 共享内存原子错误

> ID：12150615
> 
> 赞同：1
> 
> 时间：2012-08-27T22:45:06.657
> 
> 标签：c++, c, cuda, gpu, atomic

我正在使用具有 1.3 计算能力和 nvcc 编译器驱动程序 4.0 的 Tesla C1060。我正在尝试对线程块进行一些本地计算。每个线程块都有一个共享数组，该数组首先初始化为零值。为了通过线程块的线程同步并发更新（添加）到共享数据，我使用 CUDA atomicAdd 原语。

一旦每个线程块准备好其共享数据数组中的结果，共享数据数组中的每个条目就会迭代地合并（使用 atomicAdd）到全局数据数组中的相应条目。

下面是一个与我基本上试图做的非常相似的代码。

```
#define DATA_SZ 16
typedef unsigned long long int ULLInt;

__global__ void kernel( ULLInt* data, ULLInt ThreadCount )
{
  ULLInt thid = threadIdx.x + blockIdx.x * blockDim.x;
  __shared__ ULLInt sharedData[DATA_SZ];

  // Initialize the shared data
  if( threadIdx.x == 0 )
  {
    for( int i = 0; i < DATA_SZ; i++ ) { sharedData[i] = 0; }
  }
  __syncthreads();

  //..some code here

  if( thid < ThreadCount )
  {
    //..some code here

    atomicAdd( &sharedData[getIndex(thid), thid );

    //..some code here        

    for(..a loop...)
    { 
      //..some code here

      if(thid % 2 == 0)
      {           
        // getIndex() returns a value in [0, DATA_SZ )
        atomicAdd( &sharedData[getIndex(thid)], thid * thid );
      }
    }
  }
  __syncthreads();

  if( threadIdx.x == 0 )
  {
    // ...
    for( int i = 0; i < DATA_SZ; i++ ) { atomicAdd( &Data[i], sharedData[i] ); }
    //...
  }
} 
```

如果我使用 -arch=sm_20 进行编译，我不会收到任何错误。但是，当我使用 -arch=sm_13 选项编译内核时，出现以下错误：

```
ptxas /tmp/tmpxft_00004dcf_00000000-2_mycode.ptx, line error   : Global state space expected for instruction 'atom'
ptxas /tmp/tmpxft_00004dcf_00000000-2_mycode.ptx, line error   : Global state space expected for instruction 'atom'
ptxas fatal   : Ptx assembly aborted due to errors 
```

如果我评论以下两行，我不会在 -arch=sm_13 中遇到任何错误：

```
atomicAdd( &sharedData[getIndex(thid), thid );
atomicAdd( &sharedData[getIndex(thid)], thid * thid ); 
```

有人可以建议我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:09:49.177

在 CUDA C 编程指南中找到了解决方案：在共享内存上运行的原子函数和在 64 位字上运行的原子函数仅适用于计算能力 1.2 及以上的设备。在共享内存中的 64 位字上运行的原子函数仅适用于计算能力为 2.x 及更高版本的设备。

所以基本上我不能在这里使用 ULLInt 来共享内存，不知何故我需要使用 unsigned int

# android - 安卓手机AP Ping客户端

> ID：12150619
> 
> 赞同：0
> 
> 时间：2012-08-27T22:45:54.847
> 
> 标签：android, connection, client, ping, access-point

我想 ping 我的移动 AP 的客户端。这样我想看看客户端是否真的连接到我的热点，因为*/proc/net/arp*仅在我关闭热点时刷新。

这是我的异步任务：

```
 protected Boolean doInBackground(Object... arg0) {
    // TODO Auto-generated method stub
    try {
        InetAddress ip = (InetAddress) arg0[0];
        this.context = (Context) arg0[1];
        return connected =  ip.isReachable(5000);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return false;
}

@Override
protected void onPostExecute(Boolean result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);
    android.widget.Toast.makeText(this.context, String.valueOf(this.connected), android.widget.Toast.LENGTH_SHORT).show();

} 
```

当您的设备未植根时，是否有办法 ping 客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T21:52:42.683

既然你有一个 IP 地址，你可以这样**做**：

```
public static String ping(String _ip) {

    try {
        String command = "ping -c 10 " + _ip;
        Process p = null;
        p = Runtime.getRuntime().exec(command);
        int status = p.waitFor();
        InputStream input = p.getInputStream();
        BufferedReader in = new BufferedReader(new InputStreamReader(input));
        StringBuffer buffer = new StringBuffer();
        String line = "";
        while ((line = in.readLine()) != null) {
            buffer.append(line);
            buffer.append("\n");
        }
        String bufferStr = buffer.toString();
        return bufferStr;
    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    return null;
} 
```

# javascript - javascript时间戳插入字符串变量

> ID：12150623
> 
> 赞同：2
> 
> 时间：2012-08-27T22:46:03.213
> 
> 标签：javascript, html

首先，我没有编程经验，这足以让我陷入困境。我想知道是否有人可以编写一行代码来将数字时间戳添加到 HTML 页面上的现有字符串变量中。该变量需要通过将静态文本元素 (SOP) 与时间戳相结合来创建半随机标识符：

```
map("orderNumber") = "SOP+TIMESTAMP" 
```

谁能以我可以将其粘贴到 HTML 页面中的方式为我编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:48:52.063

您可以使用对象的`getTime()`方法`Date`生成时间戳，然后将其添加到静态文本元素的末尾：

```
map("orderNumber") = "SOP" + (new Date().getTime()) 
```

# ember.js - Ember.js 多个，命名的插座用法

> ID：12150624
> 
> 赞同：44
> 
> 时间：2012-08-27T22:46:20.997
> 
> 标签：ember.js, outlet

我有一个应用程序，它有一个视图层，分为三个部分：

1.  侧边栏
2.  工具栏-左侧
3.  工具栏-右侧

我花了几个小时试图找到对谷歌有用的东西，但我没有运气。我需要一个简短而完整的应用程序示例，说明如何使用带有命名插座的 Router 和 connectOutlet 来执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-27T15:56:08.867

使用新路由器，您可以执行以下操作：

```
{{outlet "menu"}}
{{outlet}} 
```

在您的路线中，您可以处理网点的内容：

```
// application route
Ember.Route.extend({
    renderTemplate: function() {
        // Render default outlet   
        this.render();
        // render extra outlets
        this.render("menu", {
            outlet: "menu",
            into: "application" // important when using at root level
        });
    }
}); 
```

不过，您应该有一个`menu`-template 。

[你可以在这里](https://api.emberjs.com/ember/3.13/classes/Route/methods/render?anchor=render)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-27T23:41:48.217

在您的应用程序模板中，您需要将命名出口声明为`{{outlet sidebar}}`. 对于您提到的工具栏也是如此。

编辑：其余的已经过时了。正如@dineth 所说，请参阅[渲染模板](http://emberjs.com/guides/routing/rendering-a-template)。

~~然后在您的路线中（可以说`App.NavigationView`是您要坚持的路线）：~~

 ~~```
App.Router = Em.Router.extend({    
    root: Em.Route.extend({
        index: Em.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet('sidebar', 'navigation');
            }
        })
    })
}); 
```~~ 

侧边栏示例：http: [//jsfiddle.net/q3snW/7/](http://jsfiddle.net/q3snW/7/)

~~请参考有关帮助程序的此文档，以及[有关](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_outlet)回调的此[文档。](http://emberjs.com/api/classes/Ember.ControllerMixin.html#method_connectOutlet)`{{outlet}}``.connectOutlet`~~

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-02T22:49:25.560

**更新：由于 Ember api 更改，此代码已过时。**

我已经达到了一个点，我可以说我找到了最适合自己的解决方案。

```
<script type="text/x-handlebars" data-template-name="application">
<div class="container">
    <div class="toolbar">{{outlet toolbar}}</div>
    <div class="main">{{outlet dashboard}}</div>
    <div class="sidebar">{{outlet sidebar}}</div>
</div>
</script> 
```

使用这样的应用程序模板，我可以选择在哪里呈现视图。像这样：

```
App.router = Ember.Router.create({
    enableLogging: true,
    location: 'history',
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/admin/',
            redirectsTo: 'login'
        }),
        login: Ember.Route.extend({
            route: '/admin/login/',
            doLogin: function(router, context) {
                "use strict";
                router.transitionTo('dashboard', context);
            },
            connectOutlets: function (router, context) {
                "use strict";
                router.get('applicationController').connectOutlet('login', "login");
            }
        }),
        dashboard: Ember.Route.extend({
            route: '/admin/dashboard/',
            doLogout: function(router, context) {
                "use strict";
                router.transitionTo('login', context);
            },
            connectOutlets: function (router, context) {
                "use strict";
                router.get('applicationController').connectOutlet('sidebar', 'sidebar');
                router.get('applicationController').connectOutlet('toolbar', 'toolbar');
                router.get('applicationController').connectOutlet('dashboard', 'dashboard');
            }
        })
    })
}); 
```

我有三个视图，从解决方案的角度来看并不重要，它们被渲染到它们的出口。

希望这对其他人有帮助。

# eclipse - log4j 无法创建日志文件

> ID：12150627
> 
> 赞同：1
> 
> 时间：2012-08-27T22:46:37.270
> 
> 标签：eclipse, log4j

我正在尝试在我的 Java Web 应用程序中使用 log4j。我使用的是 Tomcat 6。问题是永远不会创建日志文件。

log4j.properties 在类路径中，这意味着：

*   My_Project 名称
*   Java 资源
    *   源代码
    *   代码
    *   log4j.properties

在我使用的源代码中：

```
private static Logger log = Logger.getLogger(myclass.class); 
```

然后当我试图写一行时：

```
log.error("here the error message", e); 
```

还有我的 log4j.properties 文件：

```
 log4j.rootLogger=A1,file

log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d{ISO8601} %5p [%t] %c{1}:%L - %m%n

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.maxFileSize=5000KB
log4j.appender.file.maxBackupIndex=20
log4j.appender.file.File=URLFILE/file.log
log4j.appender.file.threshold=DEBUG
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ISO8601} %5p [%t] %c{1}:%L - %m%n 
```

为什么当我运行它时，永远不会创建日志文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:22:20.040

我不能帮你处理你的`log4j.properties`文件，但我可以给你一个`log4j.xml`我使用的工作文件：

```
<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

  <appender name="FILE" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="${catalina.home}/logs/Log.log"/>
    <param name="DatePattern" value="'.'yyyy-MM-dd"/>
    <param name="Append" value="true"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %p - %m%n"/>
    </layout>
  </appender>

    <!--                           -->
    <!-- setup log4j's root logger -->
    <!--                           -->
    <root>
        <level value="DEBUG" />
        <appender-ref ref="FILE"/>
    </root>

</log4j:configuration> 
```

我相信 xml 配置无论如何都是配置 log4j 的首选方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:00:49.947

您已经在 src 中放了一个 log4J.property 文件，那就是 gud .. 只需在 lib 中放一个 log4J.jar 文件...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:12:07.133

你的类路径中有 log4j.jar 吗？

也许您还必须设置根记录器级别。`log4j.rootLogger= DEBUG, A1,file`

# c# - Linq 不重复计数

> ID：12150628
> 
> 赞同：5
> 
> 时间：2012-08-27T22:46:44.803
> 
> 标签：c#, linq

我有一些数据返回如下：

```
Model { Guid Id } 
```

我有一个 int 的总项目，`int totalCount`。

我试图从作为类别 1 返回的数据中获取不同的计数，并将总项目减去类别 1 的计数作为类别 2。

我有以下 linq 来获取类别 1 的不同计数，但是如何将类别 2 的计数添加到 IEnumerable 中？

```
var result = data.
    GroupBy(x => x.Id).
    Select(x => new { Category = "1", Value = x.Select(v => v.Id).Distinct().Count() }).
    GroupBy(x => x.Category).
    Select(x => new Item { Category = x.Key, Value = x.Sum(y => y.Value) }); 
```

并且项目类有 2 个成员：类别的字符串和值的小数。

谢谢！

* * *

编辑：所以我有以下数据`IEnumerable<Model> data`，它包含以下数据：

```
{ Id: 1 }
{ Id: 2 }
{ Id: 2 }
{ Id: 1 }
{ Id: 3 }
{ Id: 4 } 
```

和总计数 = 10。

我想从数据中获取 Id 的不同计数，在这种情况下为 4，作为类别 1，而 totalCount - 不同的项目为类别 2。因此，对于结果，我将有`IEnumerable`以下`Item`内容：

```
{ Category: "1", Value: 4 }, { Category: "2", Value: 6 } 
```

现在我的 linq 语句只返回`{ Category: "1", Value: 4 }`，我不知道下一步该做什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T23:47:18.210

你的问题不是很清楚，但我认为这就是你想要的：

```
int totalCount = data.Count();
int distinctCount = data.Select(x => x.Id).Distinct().Count();
List<Item> result = new List<Item>
{
    new Item() { Category = "1", Value = distinctCount },
    new Item() { Category = "2", Value = totalCount - distinctCount },
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:43:32.220

一天结束时您需要两件物品，还是只能作为一次退货的一部分？你可以这样做：

```
var result = data.
    GroupBy(x => x.Id).
    Select(x => new { 
       DistinctCount = x.Select(v => v.Id).Distinct().Count(),
       TotalCount = data.Count()
    }); 
```

这或类似的东西可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T05:06:25.090

我使用数据结构来面对这种情况。

```
Dictionary< string, List< YOUR_TYPE >> dictionary = new Dictionary<string, List< YOUR_TYPE >> (); 
```

我们可以从源获得不同的密钥。

```
var keys = YOUR_DATA_SOURCE.Select(item => item.YOUR_KEY_NAME ).Distinct(); 
```

就像 SQL ：“SELECT DISTINCT YOUR_KEY_NAME FROM YOUR_DATA_SOURCE”。

```
foreach (var key in keys) {
    var list = new List< YOUR_TYPE > ();
    list.AddRange (dataSource.Where (x => x.YOUR_Filter_Property == YOUR_KEY_NAME ).ToList ());

    dictionary.Add (key, list);
} 
```

然后我们可以使用 Dictionary 的默认功能，如“ContainKey”、“Keys”来帮助我们。

# ruby - Ruby 从 json 文件中放置键而不是值

> ID：12150629
> 
> 赞同：1
> 
> 时间：2012-08-27T22:46:48.547
> 
> 标签：ruby, json

我对 ruby​​ 和 json 有疑问。我有一个 json 文件，其中包含从互联网上抓取的信息。对于以下问题，我将使用硬编码文件，其语法如下：

```
[{
  "day": "20120827_234558",
  "entries": [
    {
      "rank": "3",
      "club": "SuS Schalke 1896 e.V.",
      "votes": "126"
    },
    {
      "rank": "4",
      "club": "TuS Hamborn-Neumühl 07 e.V.",
      "votes": "120"
    }
]
},{
  "day": "20120827_234700",
  "entries": [
    {
      "rank": "1",
      "club": "TLV Germania 1901 Essen-Überruhr",
      "votes": "210"
    },
    {
      "rank": "2",
      "club": "Rumelner TV",
      "votes": "141"
    }
]
}] 
```

然后我编写了一个 ruby​​ 脚本，它从文件中加载 json 并将其放入哈希中，从 Internet 获取一些信息（以及在此示例中硬编码），将这些新信息添加到哈希中，将哈希转换为 json 和再次将其存储在文件中。

```
require 'rubygems'
require 'open-uri'
require 'json'

fname = 'ranking.json'

json = JSON.load(File.open(fname))

json.each do |ranking|
  puts 'entry:'
  puts ranking['day']
end

puts "\n";

new_data = Array.new
new_data = { "day" => "20120828_234558", "entries" => "sgankhask" }
json << new_data.to_json

json.each do |ranking|
  puts 'entry:'
  puts ranking['day']
end 
```

所以这只是简单地将 json 格式的数据附加到已经存在的 json 中。

但是如果我执行这个脚本，我会得到以下输出：

```
entry:
20120827_234558
entry:
20120827_234700

entry:
20120827_234558
entry:
20120827_234700
entry:
day 
```

我对最后一行感到困惑。我假设最后一行是`entry: 20120828_234558`. 看起来，Ruby 使用哈希的键（'day'）而不是值（'20120828_234558'）？

我的脚本有什么问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:16:51.477

JSON 是一种用于表示数据结构的字符串格式。在 Ruby 中，这些数据结构用散列（有时称为字典或映射）和数组等表示。

您添加的最后一项 new_data，您`to_json`首先调用它，将其转换为 JSON 格式的字符串。所以你的数据看起来像这样：

```
[{"day"=>"20120827_234558",
  "entries"=>
   [{"rank"=>"3", "club"=>"SuS Schalke 1896 e.V.", "votes"=>"126"},
    {"rank"=>"4", "club"=>"TuS Hamborn-Neumühl 07 e.V.", "votes"=>"120"}]},
 {"day"=>"20120827_234700",
  "entries"=>
   [{"rank"=>"1", "club"=>"TLV Germania 1901 Essen-Überruhr", "votes"=>"210"},
    {"rank"=>"2", "club"=>"Rumelner TV", "votes"=>"141"}]},
 "{\"day\":\"20120828_234558\",\"entries\":\"sgankhask\"}"] 
```

看看最后一项实际上是一个字符串，而不是一个哈希？因此，当您说 时`ranking['day']`，它不是询问其 key 的哈希值`'day'`，而是询问字符串的 substring `'day'`，这就是它打印错误值的原因。

一般来说，当你对这样的数据感到困惑时，你可以使用该`p`方法。`puts`将输出人类阅读的内容，但`p`以将它们表示为数据的方式打印它们。例如，我通过`p json`在打印它们的循环之前添加来解决这个问题。

那么什么时候使用 JSON 呢？当您准备好将数据序列化回文件时。

* * *

另请注意，这样做会更好，`json = JSON.load(File.read fname)`因为您已经打开了文件，但从未关闭过它（而且看起来更干净）。

此外，`new_data = Array.new`实际上并没有做任何事情，因为您将其设置为下一行的哈希。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T23:16:43.247

主要问题与以下几行有关：

```
new_data = Array.new
new_data = { "day" => "20120828_234558", "entries" => "sgankhask" }
json << new_data.to_json 
```

加载 JSON 后，它就是一个 ruby​​ 数组。不是 JSON 数据类型或其他任何东西。

上述语句将 new_data 添加为字符串 (to_json)。

您需要执行以下操作：

```
new_data = { "day" => "20120828_234558", "entries" => "sgankhask" }
json << new_data 
```

那应该行得通。

顺便说一句，如果您要将 new_data 吹走并将其分配为哈希，那么将其分配为 Array.new 是毫无意义的。

# r - 基于物种的特征值模拟随机二分网络 - 在 R 中

> ID：12150630
> 
> 赞同：3
> 
> 时间：2012-08-27T22:46:57.737
> 
> 标签：r, phylogeny

我想在 R 中创建二分网络。例如，如果您有两种类型的物种的 data.frame（只能跨物种交互，不能在物种内交互），并且每个物种都有一个特征值（例如，捕食者的嘴允许谁吃掉哪种猎物），我们如何根据物种的特征模拟一个网络（也就是说，两个物种只有在它们的特征值重叠时才能相互作用）？

更新：这是我正在尝试做的一个最小示例。1）创建系统发育树；2）在系统发育上模拟性状；3）创建基于物种特征值的网络。

```
# packages
install.packages(c("ape","phytools"))
library(ape); library(phytools)

# Make phylogenetic trees
tree_predator <- rcoal(10)
tree_prey <- rcoal(10)

# Simulate traits on each tree
trait_predator <- fastBM(tree_predator)
trait_prey <- fastBM(tree_prey)

# Create network of predator and prey
## This is the part I can't do yet. I want to create bipartite networks, where 
## predator and prey interact based on certain crriteria. For example, predator
## species A and prey species B only interact if their body size ratio is
## greater than X. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:42:01.920

答案的格式实际上取决于您接下来要做什么，但这里有一个尝试：

```
set.seed(101)
npred <- nprey <- 10
tree_predator <- rcoal(npred)
tree_prey <- rcoal(nprey)

## Simulate traits on each tree
trait_predator <- fastBM(tree_predator)
trait_prey <- fastBM(tree_prey) 
```

（我用于`set.seed(101)`重现性，所以这些是我的特征结果......

```
> trait_predator
         t1          t9          t4          t8          t5          t2 
-2.30933392 -3.17387148 -0.01447305 -0.01293273 -0.25483749  1.87279355 
         t6         t10          t3          t7 
 0.70646610  0.79508740  0.05293099  0.00774235 
> trait_prey
         t10           t7           t9           t6           t8           t1 
 0.849256948 -0.790261142  0.305520218 -0.182596793 -0.033589511 -0.001545289 
          t4           t5           t3           t2 
-0.312790794  0.475377720 -0.222128629 -0.095045954 
```

...)

你生成的值是在一个无界的空间上，所以取它们的比率是没有意义的；我们假设它们是大小的*对数*`exp(x-y)`，捕食者/猎物的大小比也是如此。任意地，我假设截止值是 1.5 ...

用于`outer`比较所有捕食者和猎物的特征：这会创建一个二元 (0/1) 矩阵。

```
bmatrix <- outer(trait_predator,trait_prey,
      function(x,y) as.numeric(exp(x-y)>1.5)) 
```

一种可视化结果的方法...

```
library(Matrix)
image(Matrix(bmatrix),xlab="Prey",ylab="Predator",sub="") 
```

![在此处输入图像描述](../Images/eeeb68912f4b57800ead6975c7cf8146.png)

例如，您可以看到捕食者 #6（`t2`在上面的输出中标记）非常大（log size=1.87），所以它吃掉了所有的猎物......

使用`igraph`（我这里的一些方法有点老套）

```
library(igraph)

edges <- which(bmatrix==1,arr.ind=TRUE)  ## extract vertex numbers
## distinguish prey (columns) from pred (rows)
edges[,2] <- npred+edges[,2]             

gg <- graph.bipartite(rep(1:0,c(npred,nprey)),
             c(t(edges))) 
## c(t(edges)) collapses the two-column matrix to a vector in row order ...
## now plot ...
plot(gg,vertex.color=rep(c("cyan","pink"),c(npred,nprey)),
     edge.arrow.mode=">") 
```

这与上面的矩阵格式相匹配——捕食者 1 和 2（= 顶点 1 和 2）不吃任何人，猎物 2（= 顶点 12）被许多不同的捕食者吃掉......这种表示更漂亮但不一定更清晰（例如，捕食者 7 和 8 都吃猎物 2（顶点 12），但它们的箭头重合）。但是，如果您想应用图论方法，那么将它的`igraph`形式化可能会很好（并且有很多用于绘制图形的布局选项）。

![在此处输入图像描述](../Images/c509f906200e55760693eaea7c1b6821.png)

# ios - 暂停后台运行的ios应用程序

> ID：12150631
> 
> 赞同：0
> 
> 时间：2012-08-27T22:47:00.927
> 
> 标签：ios, multitasking

我正在编写一个有时需要在后台运行的应用程序（类似于导航器，如果导航处于活动状态，则应该继续，如果不是，则应该暂停）；用户单击主页后如何强制强制应用程序状态？（在后台暂停或执行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:03:28.573

你可以试试这个：

```
exit(0); 
```

在应用程序委托状态下，无论是后台、前台还是最适合您的情况。

# c# - C#：在不选择文本的情况下更改 WinForm RichTextBox 的字体样式

> ID：12150634
> 
> 赞同：3
> 
> 时间：2012-08-27T22:47:12.860
> 
> 标签：c#, winforms, richtextbox, syntax-highlighting

我`RichTextBox`在我的代码中使用 a 来显示语法突出显示的代码。现在，在每次击键时，我都必须重新解析所有标记并重新为它们重新着色。但是为 a 中的单个单词着色的唯一方法是逐个`WinForm richtextbox`选择这些单词并使用 SelectionFont 为它们着色。

但是，如果用户的输入速度非常快，那么我选择单个单词会导致非常明显的闪烁（所选单词具有 Windows 蓝色背景的东西，这会导致闪烁）。有什么办法可以让我在不选择它们的情况下为单个单词着色（从而导致所选文本周围出现蓝色突出显示）。我尝试`SuspendLayout()`在着色期间使用禁用渲染，但这没有帮助。提前致谢！

这是我的代码：

代码：

```
private void editBox_TextChanged(object sender, EventArgs e) {
  syntaxHighlightFromRegex(); 
}

private void syntaxHighlightFromRegex() {      
  this.editBox.SuspendLayout();

  string REG_EX_KEYWORDS = @"\bSELECT\b|\bFROM\b|\bWHERE\b|\bCONTAINS\b|\bIN\b|\bIS\b|\bLIKE\b|\bNONE\b|\bNOT\b|\bNULL\b|\bOR\b"; 
  matchRExpression(this.editBox, REG_EX_KEYWORDS, KeywordsSyntaxHighlightFont, KeywordSyntaxHighlightFontColor);
}

private void matchRExpression(RichTextBox textBox, string regexpression, Font font, Color color) {
  System.Text.RegularExpressions.MatchCollection matches = Regex.Matches(this.editBox.Text, regexpression, RegexOptions.IgnoreCase);
  foreach (Match match in matches) {
     textBox.Select(match.Index, match.Length); 
     textBox.SelectionColor = color;
     textBox.SelectionFont = font;
  }
} 
```

MyRichTextBox 内部（源自 RichTextBox）：

```
public void BeginUpdate() {
  SendMessage(this.Handle, WM_SETREDRAW, (IntPtr)0, IntPtr.Zero);
}
public void EndUpdate() {
  SendMessage(this.Handle, WM_SETREDRAW, (IntPtr)1, IntPtr.Zero);
}
[DllImport("user32.dll")]
private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);
private const int WM_SETREDRAW = 0x0b; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:29:05.457

尽管看起来您合并了 Hans 的语法高亮文本框，但看起来您并没有使用它。

突出显示这些单词时，您需要在突出显示之前记住光标所在的位置和长度，因为在您的代码中，您正在移动光标而不是放回光标。

如果没有错误检查，请尝试将您的代码更改为：

```
void editBox_TextChanged(object sender, EventArgs e) {
  this.editBox.BeginUpdate();
  int lastIndex = editBox.SelectionStart;
  int lastLength = editBox.SelectionLength;
  syntaxHighlightFromRegex();
  editBox.Select(lastIndex, lastLength);
  this.editBox.SelectionColor = Color.Black;
  this.editBox.EndUpdate();
  this.editBox.Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:36:22.533

糟糕，原来我错误地使用了汉斯代码。我应该调用 BeginUpdate() 来停止绘制控件并调用 EndUpdate() 来重新开始绘制它。我反其道而行之。

感谢大家（尤其是汉斯）的所有帮助！

# sql - SQL Server 触发器更新和增量计数器

> ID：12150636
> 
> 赞同：1
> 
> 时间：2012-08-27T22:47:25.653
> 
> 标签：sql, sql-server, database, triggers

我有两张桌子。一个表中有一个字段，用于简单地保存一个计数器，另一个表有许多搜索字段，其中一个字段必须包含另一个表中的计数器值。

我正在尝试创建一个触发器

1.  当第二个表中发生更新时，将第一个表中的值加 1
2.  第一个表中的增量值将用于设置第二个表中的字段
3.  只有当第二个表中发生更新并且字段（即状态）等于特定值时，才会出现 1 和 2。
4.  处理多条记录的 1,2 和 3。

1）我已经设法编写了这个触发器，但是 a）它看起来非常慢 b）我找到了一篇解释得很好的文章，但正如示例所示，这仅适用于一个记录。如果更新了多条记录，它确实提供了一个解决方案，但我的问题是如何处理为每条记录增加第一个表中的值，然后为每条记录更新一个新值？

知道为什么它很慢（好吧，使用 sql server 管理控制台）？

我找到的文章可以在[http://benreichelt.net/blog/2005/12/13/making-a-trigger-fire-on-column-change/找到](http://benreichelt.net/blog/2005/12/13/making-a-trigger-fire-on-column-change/)

我根据这篇文章写的触发器如下：

```
CREATE TRIGGER [dbo].[trig_DataTable] ON [dbo].[DataTable]
FOR UPDATE
AS
IF UPDATE(Status)
BEGIN
SET NOCOUNT ON;

  DECLARE @newStatus NVARCHAR(50)
  DECLARE @oldStatus NVARCHAR(50)   
  DECLARE @maxRefNo INT

  DECLARE @id BIGINT

  SET @maxRefNo = (SELECT MAX(RefNo) FROM CounterTable) + 1
  UPDATE CounterTable SET RefNo = @maxRefNo

  SET @newStatus = (SELECT Status FROM Inserted)
  SET @oldStatus = (SELECT Status FROM Deleted)

  IF (@newStatus != @oldStatus) AND (@newStatus = 'Approved')
  BEGIN   
    SET @Id = (SELECT Id FROM Inserted)
    UPDATE DataTable
    SET UniqueRef = @maxRefNo
    WHERE Id = @Id
  END

END 
```

关于上述问题的另一个快速问题！由于上述触发器仅适用于单个记录，我是否需要使用 where 部分？需要这个似乎没有意义。

不是很重要，因为我需要的是与上面相同的行为，但它需要处理包含在 INSERTED/DELETED 表中的多个记录。

我能否编写一个函数来获取下一个可用数字并更新 CounterTable，然后从文章中解释的类似 SQL 调用此函数

```
INSERT INTO PriceHistory(ItemId, OldPrice, NewPrice, UniqueRef)
 SELECT I.ItemId, D.Price, I.Price, dbo.GetNextRefNo()
 FROM INSERTED I INNER JOIN DELETED D ON I.ItemId = D.ItemId
 WHERE I.Price != D.Price 
```

我不确定说实话......我会在一秒钟内试一试，但如果你们中的任何人对如何实现这一点有任何想法，请告诉我......会很棒！谢谢。

我希望以上是有道理的。

干杯。

T。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:20:49.793

使用下面的查询：

```
CREATE TRIGGER [dbo].[trig_DataTable] ON [dbo].[DataTable]
FOR UPDATE
AS BEGIN
    SET NOCOUNT ON;
    DECLARE @maxRefNo INT
    DECLARE @id BIGINT

    SET @maxRefNo = ISNULL((SELECT MAX(RefNo) FROM CounterTable),0)

    UPDATE CounterTable 
    SET RefNo = @maxRefNo + (SELECT COUNT(*) 
                            FROM INSERTED A 
                            INNER JOIN DELETED D ON D.id=A.id
                            WHERE A.STATE = 'Approved'
                              AND A.STATE <> D.State)

    UPDATE DataTable
    SET UniqueRef = @maxRefNo + ROW_NUMBER() OVER (ORDER BY A.id)
    FROM INSERTED A
    INNER JOIN DELETED D ON D.id = A.id
    WHERE DataTable.Id = A.Id
        AND A.STATE = 'Approved'
        AND A.STATE <> D.State
END 
```

当您编写触发器时，必须使用插入表中的多条记录执行该触发器。没有任何记录。

# java - 无法使 repaint() 工作

> ID：12150637
> 
> 赞同：2
> 
> 时间：2012-08-27T22:47:26.327
> 
> 标签：java, swing, graphics, repaint, paintcomponent

我的课看起来像这样。

```
import java.awt.*;
import javax.swing.*;

public class Painter extends JPanel {
    int x=200;
    int y=200;
    int newX;
    int newY;

    Painter(){
           setPreferredSize(new Dimension(400,400));
    }

    public void moveSquare(int newX, int newY){
           if(newY != y|| newX != x){
                repaint(x,y, 10, 10);
                y = newY;
                x = newX;
                repaint(x,y, 10, 10);
           }        
    }

    public void paintComponent(Graphics g){
           super.paintComponent(g);
           g.setColor(Color.BLACK);
           g.fillRect(x, y, 10, 10);
    }
} 
```

这些方法是从另一个类调用的。的价值观`x`和`y`确实改变了他们应该的方式。然而，方块并没有移动。我在这里做错了吗？

编辑是的，我叫“超级”。我只是在这里复制和编辑代码时不小心删除了它。现在重新编辑它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:49:35.047

你需要打电话`super.paintComponent(g)`而不是`paintComponent(g)`

在

```
public void paintComponent(Graphics g) 
```

否则你会无限循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:41:39.730

调用`repaint(x, y, w, h)`仅将选择区域设置为脏；`Graphics`在此边界周围设置一个剪辑，因此您只会看到那里发生的变化。不带任何参数使用`repaint()`会将整个区域标记为脏 :-)

根据关于 AWT 的 Oracle 文章`paint`（可在[此处](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#callback)找到），

> 当 AWT 调用此方法时，`Graphics`对象参数会预先配置适当的状态以在此特定组件上绘图：
> 
> *   Graphics 对象的*颜色*设置为组件的`foreground`属性。
> *   Graphics 对象的*字体*设置为组件的`font`属性。
> *   Graphics 对象的*平移*设置为坐标 (0,0) 表示组件的左上角。
> *   Graphics 对象的*剪辑矩形*设置为需要重新绘制的组件区域。

要对此进行测试，请尝试打印`g.getClip`:-)

我给你个提示...

> ```
> java.awt.Rectangle[x=0,y=0,width=10,height=10]
> java.awt.Rectangle[x=0,y=0,width=10,height=10]
> java.awt.Rectangle[x=0,y=0,width=10,height=10] 
> ```

这里有一个固定`moveSquare`...

```
public void moveSquare(int newX, int newY){
  if (newY != y|| newX != x) {
    y = newY;
    x = newX;
    repaint();
  }        
} 
```

# algorithm - 在计划中制作树

> ID：12150644
> 
> 赞同：1
> 
> 时间：2012-08-27T22:48:17.520
> 
> 标签：algorithm, recursion, tree, scheme, binary-tree

```
(define (entry tree) (car tree))
(define (left-branch tree) (cadr tree))
(define (right-branch tree) (caddr tree))
(define (make-tree entry left right) (list entry left right))

(define (mktree order items_list)
  (cond ((= (length items_list) 1)
         (make-tree (car items_list) '() '()))
        (else 
         (insert2 order (car items_list) (mktree order (cdr items_list))))))

(define (insert2 order x t)
  (cond ((null? t) (make-tree x '() '()))
      ((order x  (entry t))
       (make-tree (entry t) (insert2 order x (left-branch t)) (right-branch t)))
      ((order  (entry t) x )
       (make-tree (entry t) (left-branch t) (insert2 order x (right-branch t))))
      (else t))) 
```

结果是：

```
(mktree (lambda (x y) (< x y)) (list 7 3 5 1 9 11))
(11 (9 (1 () (5 (3 () ()) (7 () ()))) ()) ()) 
```

但我试图得到：

```
(7 (3 (1 () ()) (5 () ())) (9 () (11 () ()))) 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:24:23.837

在这里，试试这个：

```
(define (mktree order lst)
  (let loop ((lst  lst)
             (tree '()))
    (if (null? lst)
        tree
        (loop (cdr lst) (insert order (car lst) tree)))))

(define (insert order ele tree)
  (cond ((null? tree)
         (make-tree ele '() '()))
        ((order ele (entry tree))
         (make-tree (entry tree)
                    (insert order ele (left-branch tree))
                    (right-branch tree)))
        ((order (entry tree) ele)
         (make-tree (entry tree)
                    (left-branch tree)
                    (insert order ele (right-branch tree))))
        (else tree))) 
```

它按预期工作：

```
(mktree < '(7 3 5 1 9 11)) 
> '(7 (3 (1 () ()) (5 () ())) (9 () (11 () ()))) 
```

您的`insert2`过程很好，但是该`mktree`过程应该表示为列表上的迭代，累加器跟踪到目前为止插入的元素的树。这有两个效果：

1.  `mktree`现在是尾递归的并且
2.  列表中元素的迭代顺序颠倒了

最后一个特别会解决您的问题：即使您的解决方案生成二叉树，order 属性也会与您的预期相反。请注意，反转输入列表也将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:22:22.737

Oscar Lopez 的答案是正确的，由于 insert2 函数调用的递归性质，它首先使 S 表达式完全展开，然后从列表的最后 2 个元素开始评估（在您的情况下为 9 和 11） ...作为证明，您可以看到，如果您以相反的顺序放入列表中，您会得到正确的结果：

`(mktree (lambda (x y) (< x y)) (list 11 9 1 5 3 7))`

`(7 (3 (1 () ()) (5 () ())) (9 () (11 () ())))`

# ruby-on-rails - 在开发环境中运行的所有测试相关任务——Rails 3

> ID：12150645
> 
> 赞同：1
> 
> 时间：2012-08-27T22:48:21.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, development-environment, environment

当我运行一个应该在测试环境中运行的任务时，它正在开发中运行。这包括`rake test:(units/functionals/integration)`和`rake db:test:prepare`。副作用是每次我运行测试时它都会覆盖我的数据库。我重命名了开发数据库，​​现在它一直抱怨找不到我的旧数据库（中的那个`database.yml`）。环境正在`require 'rails'`我的`application.rb`. 我是否缺少某种简单的配置？

编辑：如果我运行附加了 的测试`RAILS_ENV=test`，它们将在测试环境中运行。但是，我实际上无法运行它们，因为我有待处理的迁移（所有迁移）。运行`rake db:test:prepare RAILS_ENV=test`给了我同样的挂起迁移错误。

更新：数据库已迁移，我的测试正在进行中。我仍然觉得每次运行测试`RAILS_ENV=test`都不是正确的方法

更新：我发现如果我将`def env`railties 更改为默认为“test”，则环境变为 test。那是

```
def env
  @_env ||= ActiveSupport::StringInquirer.new(ENV["RAILS_ENV"] || ENV["RACK_ENV"] || "development")
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:05:38.483

将此行更改`ENV ||= "test"`为`ENV = "test"``spec_helper`

如果您使用 Capybara 并且在开发模式下运行 rails 服务器，那么 Capybara 将使用它而不是启动测试实例。

可以在这里找到修复：

[如何在 Capybara 中使用测试数据库？](https://stackoverflow.com/questions/8662554/how-to-use-the-test-database-with-capybara)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:19:13.417

解决方案是使用`ENV["RACK_ENV"]`而不是我尝试过的其他选项。我仍然不确定为什么其他人没有工作，但我会称这个问题已解决。

很简单...

# android - 防止后退按钮关闭对话框

> ID：12150646
> 
> 赞同：79
> 
> 时间：2012-08-27T22:48:24.627
> 
> 标签：android, back

我试图阻止在 Android 中按下后退按钮时关闭 AlertDialog 框。我[在这个线程](https://stackoverflow.com/questions/4779954/disable-back-button-in-android)中遵循了两种流行的方法，并且使用 System.out.println 我可以看到在这两种情况下代码都会执行。但是，后退按钮*仍会*关闭对话框。

我可能做错了什么？最终，我试图阻止后退按钮关闭对话框 - 这是第一次运行应用程序时显示的免责声明，我不希望用户有任何选择，只能按下“接受”按钮命令应用程序继续。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-08-27T22:50:13.890

只需使用以下[`setCancelable()`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setCancelable%28boolean%29)功能：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setCancelable(false); 
```

这可以防止后退按钮关闭对话框，但如果您选择使用它，“否定”按钮会保持不变。

* * *

虽然任何不想接受您的服务条款的用户都可以按下主页按钮，但根据 Squonk 的评论，这里还有两种方法可以防止他们“退出”用户协议。一个是简单的“拒绝”按钮，另一个覆盖对话框中的后退按钮：

```
builder.setNegativeButton("Refuse", new OnClickListener() {
           @Override
           public void onClick(DialogInterface dialog, int which) {
               finish();
           }
       })
       .setOnKeyListener(new OnKeyListener() {
           @Override
           public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
               if(keyCode == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_UP)
                   finish();
               return false;
           }
       }); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-01-23T13:29:09.483

为了防止后退按钮关闭一个Dialog（不依赖于Activity），只需以下代码：

```
alertDialog.setOnKeyListener(new DialogInterface.OnKeyListener() {
    @Override
    public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
        // Prevent dialog close on back press button
        return keyCode == KeyEvent.KEYCODE_BACK;
    }
}); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-08-31T08:47:23.680

使用时，`DialogFragment`您需要调用`setCancelable()`片段，而不是对话框：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    dialog = new ProgressDialog(getActivity());
    dialog.setIndeterminate(true);
    dialog.setMessage(...);
    setCancelable(false);

    return dialog;
} 
```

调用`dialog.setCancelable()`似乎没有效果。似乎`DialogFragment`没有注意到对话框的可取消性设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-29T17:35:40.213

采用`setCancelable(false)`

```
SampleDialog sampleDialog = SampleDialog.newInstance();
sampleDialog.setCancelable(false);
sampleDialog.show(getSupportFragmentManager(), SampleDialog.class.getSimpleName()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-16T12:15:10.760

只有这对我有用：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
builder.setTitle(title);
builder.setMessage(content);

/**
 * Make it when the Back button is pressed, the dialog isn't dismissed.
 */
builder.setOnKeyListener(new DialogInterface.OnKeyListener() {
    @Override
    public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
        if(keyCode == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_UP) {
            Utilities.makeToast(getContext(), "There is no way back!");
            return true; // Consumed
        }
        else {
            return false; // Not consumed
        }
    }
});

Dialog dialog = builder.create();

/**
 * Make it so touching on the background activity doesn't close the dialog
 */
dialog.setCanceledOnTouchOutside(false);

return dialog; 
```

如您所见，我还添加了一条`dialog.setCanceledOnTouchOutside(false);`线，因此在对话框之外点击也不会导致它被关闭。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-17T17:06:04.493

在 JQuery Mobile 中，弹出窗口会在 url 中添加一个哈希，以下代码允许后台在打开时关闭弹出窗口并在关闭时返回应用程序。您可以对自定义 ui 框架使用相同的逻辑。

```
@Override
public void onBackPressed() {

    // check if modal is open #&ui-state=dialog

    if (webView.getVisibility() == View.VISIBLE && webView.getUrl().contains("#&ui-state=dialog")) {
        // don't pass back button action
        if (webView.canGoBack()) {
            webView.goBack();
        }
    } else {
        // pass back button action
        super.onBackPressed();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-10T11:13:20.783

添加`setCancelable(false)`以阻止后退按钮关闭对话框。

例如 ：

```
AlertDialog.Builder builder = AlertDialog.Builder(this)
Dialog dialog = builder.create()
dialog.setCancelable(false)
dialog.setCanceledOnTouchOutside(false) 
```

这将防止用户在按下后退按钮或在对话窗口外触摸时取消对话

# php - 在联系表单中实现 jQuery AJAX

> ID：12150647
> 
> 赞同：1
> 
> 时间：2012-08-27T22:48:39.337
> 
> 标签：php, javascript, jquery

我想将 AJAX 实现为联系表单，这是我到目前为止的代码......

```
$("#contact_form").validate({
     meta: "validate",
     submitHandler: function (form) {
             $('#contact_form').hide();
             $('#sucessmessage').append("<h4 class='form_thanks'>Thanks, your email has been sent! We will get back to you as soon as possible</h4>");
             return false;
             form.submit();
     },
     /* */
     rules: {
             name: "required",

lastname: "required",
             // simple rule, converted to {required:true}
             email: { // compound rule
                     required: true,
                     email: true
             },
             subject: {
                     required: true,
             },
             message: {
                     required: true
             }
     },
     messages: {
             name: "Please enter your name.",
lastname: "Please enter your last name.",
             email: {
                     required: "Please enter email.",
                     email: "Please enter valid email"
             },
             subject: "Please enter a subject.",
             message: "Please enter a message."
     },
}); /*========================================*/
}); 
```

如何在其中实现 AJAX jQuery 代码（发布到 PHP 文件）？

谢谢

马特

编辑：对缩进感到抱歉，我比那更整洁，但我责怪 Dreamweaver！:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:00:50.777

添加此功能：

```
$('#contact_form').submit(function(){
    $.post($(this).attr('action'), $(this).serialize(), function(data){
        // whatever you want to do post submit
    });
    return false;
}); 
```

虽然没有测试..您可能需要将它添加到“form.submit”部分，具体取决于代码其他部分的外观。

# javascript - 解释分号的简单方法

> ID：12150650
> 
> 赞同：3
> 
> 时间：2012-08-27T22:49:11.550
> 
> 标签：javascript

我的妻子正在通过 Codecademy (Javascript) 工作，并且对分号感到沮丧。她问我哪些行需要以分号结尾。她才刚开始，所以我不想在这里用“陈述”、“表达”等来吓唬她​​。我只是告诉她不要理会分号，毕竟是 JS ;)

那我应该怎么解释呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T23:10:06.417

1.  分号结束每一件事。
2.  你不想要它，`if(test)`因为它会结束那件事（事实上 - 它不是无效的，你只是真的不想在那里结束它）。同样与`for(a;b;c)`（但里面的每一件事`for` 都是一个东西）。
3.  `x = 2 + 1 + 3 + 4 + 5 * 10 + 2;`是一个单一的东西，否则你就不会拥有全部金额。即使超过三四行，你也希望它是一个总和——一个单一的东西。
4.  大括号将几件事组合成一件大事。由于它们已经是有目的的东西，所以它们不需要分号。但它不会受伤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:55:47.700

简单的规则是所有语句必须以分号结尾。诸如表达式、块和函数声明之类的东西不以分号结尾。也许以下有帮助。

块不以分号结尾：

```
if ( /*condition */ ) { // start of block, no semicolon
  ...                   // function body
}                       // end of block, no semicolon 
```

其他块也是如此，例如*do..while*、*while*、*for..in*等。

函数声明没有分号（它们使用块）：

```
function foo() { // start of block
  ...            // code, may be statements with semicolons and more blocks
}                // end of block, no semicolon 
```

看起来像块但不是的东西：

```
// Object literal isn't a block, it's a statement so uses {}
var obj = {name: 'fred', sex: 'male'};

// Object literal over several lines has one semicolon at the end
var obj = {
    name: 'fred',
    sex: 'male'
}; 
```

作为语句的函数表达式：

```
(function(){...}());  // expression in (), the
                      // terminating semicolon makes it a statement 
```

超过几行：

```
(function(){  // Start of block (function body) doesn't use semicolon
    ...
 }()          // block end, no semicolon.  Can't end statement here
              // (unbalanced parenthesis) so no semicolon after ()
);            // but end of statement does need semicolon 
```

请注意，函数表达式可以只是表达式。

例如，函数调用传递调用函数表达式的结果（注意函数表达式主体中的分号终止语句）：

```
foo( (function(){alert('hey'); return 'ho';}()) );

function foo(s) {
  alert(s);
} 
```

要测试是否需要分号，请删除两行代码之间的换行符：

```
var a = 'foo';
alert(a); 
```

删除换行符：

```
var a = 'foo'; alert(a); // works 
```

删除分号：

```
var a = 'foo' alert(a); // fails 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T22:54:28.720

我的 Javascript 有点生疏，但我相信你可以摆脱：每一行，除非它已经以 } 或 { 结尾。然后只需确保每个语句都在新行上，尽管考虑到最初的问题，我认为这不是问题。

并且不以分号结束行是一个坏主意。在某些情况下它实际上不起作用。

### 编辑

在几乎所有情况下它都应该没问题，并且在另一个答案中发布的文章是一个很好的阅读，但是我仍然坚持我对分号的热爱*。

# c++ - 用于动态重新加载 /usr/share/zoneinfo 数据库的库/代码？

> ID：12150651
> 
> 赞同：4
> 
> 时间：2012-08-27T22:49:20.253
> 
> 标签：c++, c, linux, timezone, zoneinfo

由于系统`/usr/share/zoneinfo`数据库更新相当频繁，我希望能够在一个运行时间很长的 C++ 程序中动态加载（并重新加载）它。

现在我知道标准库将使用这个数据库，但我怀疑它是否提供动态重新加载它（或者至少我在谷歌上找不到任何关于它的信息。）

我可以使用任何 C 或 C++ 库或代码来执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:08:07.883

我是个白痴。提供 zoneinfo 数据库的 IANA 还提供[了一个使用它的库](http://www.iana.org/time-zones)。有趣的是，我通过阅读 postgresql 源代码发现了这一点。

我不确定这是否足够，但它是公共领域许可的，所以至少我可以将它拉入我的代码并根据我的需要进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:10:51.330

`localtime`等人使用由 设置的时区转换信息[`tzset`](http://pubs.opengroup.org/onlinepubs/007904875/functions/tzset.html)，因此您通常可以通过设置`TZ`某个值、调用`tzset`、设置回并再次调用来重新加载该信息。这适用于 glibc，但您可能应该在其他平台上进行检查。

否则，您将使用其他一些非 Posix API 来访问 zoneinfo 数据库，并且您应该查看该库用于重新加载其数据的设施。

# ios - 无法使用以编程方式创建的覆盖从笔尖加载的图像视图

> ID：12150652
> 
> 赞同：0
> 
> 时间：2012-08-27T22:49:20.783
> 
> 标签：ios

我在包含 UIImageView 的 xib 中有一个视图。我正在设置要在 xib 中显示的图像，它会正确加载和显示。

但是在某些情况下，我希望在运行时将加载的图像替换为另一个图像，所以我这样做：

```
NSArray* viewObjects  = [[NSBundle mainBundle] loadNibNamed:@"ParentView"owner:self options:nil];
id object = [viewObjects objectAtIndex:0];
parentView *parentView = (ParentView*)[viewObjects objectAtIndex:0];

UIImage *image = [UIImage imageNamed: @"iconName"];
UIImageView *iv = [[UIImageView alloc] initWithImage: image];
iv.frame = parentView.icon.frame;
parentView.icon = iv; 
```

parentView.icon 是一个 UIImageView。image 变量不是 nil，在代码执行时 iv 也不是。

iconName 是一个名为“iconName@2x.png”的 .png，它在我的项目中，如果我将它设置为 .xib 中的 UIImageView，那么它会正确加载并显示。但是，如果我在 .xib 中设置另一个图标并尝试在运行时用上面的代码替换它，那么它不会被替换。

我不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:53:53.667

您正在创建一个新的图像视图，但不要将其添加到视图层次结构中。要么使用现有的图像视图并为其分配一个新的视图，`UIImage`要么将新创建的视图添加到使用`addSubview`.

# ruby - 我可以在哪里/如何托管我的小型、数据库驱动、Sinatra 驱动的 Ruby 应用程序？Heroku 限制数据库连接

> ID：12150653
> 
> 赞同：2
> 
> 时间：2012-08-27T22:49:27.710
> 
> 标签：ruby, database, heroku, hosting, sinatra

这是我的应用程序：[价格通胀计算器](http://tranquil-peak-3911.herokuapp.com/)。如果单击“计算”，您可能会收到与服务器相关的错误。当我在 Sinatra 中测试应用程序时，我收到一条错误消息

```
PG::Error: FATAL: too many connections for role "********" 
```

经过调查，[Heroku 将其免费数据库限制为 20 个连接](https://devcenter.heroku.com/articles/heroku-postgres-starter-tier#limits)。

我想继续在 Heroku 上开发小型应用程序（尤其是数据库驱动的应用程序），但如果我无法绕过这个限制，我可能无法做到。我愿意每月支付 50 美元来获得一个允许更多连接的数据库，但我还不知道这是否值得。

我的问题是：有谁知道是否可以免费绕过这个限制，或者是否有 Heroku 的替代品可以托管数据库驱动的 Sinatra 应用程序？

这是我使用的将通货膨胀数据添加到数据库的代码：

```
require 'rubygems'
require 'rest-client'
require 'nokogiri'
require 'sequel'

### MAKE CPI DATABASE ###
db_name = 'DATABASE_NAME_HERE'
DB = Sequel.postgres(db_name,:user=>'USER_NAME',:password=>'PASSWORD',:host=>'HOST',:port=>5432,:sslmode=>'require')
    DB.create_table! :cpi_nsa_annual do
        primary_key :id
        Integer :year
        Float :cpi
    end # DONE: DB.create_table :cpi_nsa_annual do
cpi_annual = DB[:cpi_nsa_annual]
### DONE MAKING CPI DATABASE ###

post_url = "http://data.bls.gov/pdq/SurveyOutputServlet"

post_params = {
    'delimiter'=>'comma',
    'output_format'=>'html',
    'output_type'=>'column',
    'periods_option'=>'all_periods',
    'series_id'=>'CUUR0000SA0',
    'years_option'=>'all_years'
}

if page = RestClient.post(post_url,post_params)
    npage = Nokogiri::HTML(page)
    data = npage.css('table.regular-data tbody tr')

    data.each{|row|
        month_prefix = (row.css('th')[2].text)[0]
        year = row.css('th')[1].text
        month = (row.css('th')[2].text)[1..2]
        cpi = row.css('td').text

        if month_prefix=='M' and month=='13'
                cpi_annual.insert(
                    :year=>year,
                    :cpi=>cpi
                ) # DONE: cpi_annual_insert
                p ["YEAR",year,cpi]
        end # DONE: month_prefix=='M' and month!='13'
    }
end # DONE: if page
p cpi_annual.each{|row| p row} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:50:48.517

看起来你真的不需要一个数据库来完成你在那个应用程序中想要的东西。您不能将年费率存储在您的 ruby​​ 代码中的数组中吗？

```
$inflation_rates = {"1999" => 2.19, "2000" => 2.97, "2001" => 3.73} 
```

或者我可能误解了您的应用程序是如何工作的。

我在 Heroku 上托管了带有数据库的小型 Sinatra 应用程序，没有任何问题。20个连接限制已经足够了。你确定这不是你的应用程序的错吗？也许它使用了过多的连接？你能发布你的代码吗？

此外，[OpenKeyVal](http://openkeyval.org/)是一个很棒的免费键/值数据存储，没有连接限制（唯一的限制是键必须小于 64KB）。它可能会迫使您更改代码，但至少值得研究。因为您可以使用 JSONP 调用存储数据，所以您可以构建一个在单个静态 html 文件中使用数据存储的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:29:53.297

meub 建议您将数据存储在数据库之外的答案是合理的，但如果您觉得您真的想坚持使用数据库，请尝试查看您的应用程序使用如此多连接的原因。

如果您运行`select * from pg_stat_database WHERE datname = 'yourdbname'`“numbackends”字段，将告诉您有多少连接正在连接到您的数据库。如果您对 Heroku 进行全新部署，然后访问您的应用几次，连接数是否会增加？也许您需要关闭连接。

如果您`DB[:cpi_nsa_annual].disconnect`在代码末尾添加，连接数是否会随着每次页面加载而停止增加？

# c# - Entity Framework 5 Key 命名，代码优先

> ID：12150662
> 
> 赞同：8
> 
> 时间：2012-08-27T22:50:29.627
> 
> 标签：c#, code-generation, entity-framework-5

当它们由 Add-Migration 生成时，我的键名（索引、主键和外键）中不能有 [.]（句点），所以我尝试编写一个 CSharpMigrationCodeGenerator，但不幸的是，这似乎不允许您更改外键或索引名称。主键名称可以设置为覆盖创建表的一部分：

```
protected override void Generate(
    CreateTableOperation createTableOperation, IndentedTextWriter writer)
    {
        createTableOperation.PrimaryKey.Name = "USE THIS NAME";
        base.Generate(createTableOperation, writer);
    } 
```

但我真正需要的是一种方法来确保它刚刚删除了句号（这意味着覆盖自定义名称生成器） - 但我看不出如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T14:36:12.807

这个问题不再存在，并且在当时非常具体。在过去的一年里，随着工具的发展，事情已经发生了变化，因此不再真正相关，因为您不需要以这种方式解决问题。

非常感谢您的阅读和评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T14:18:26.190

您没有尝试过使用[电动工具](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)先追溯生成代码吗？

它不仅会从数据库为您生成代码优先类，您还可以自定义生成对象的 T4 模板以处理独特的场景（例如自定义命名逻辑来处理保留字符）。我的 entity.tt 在每个生成的对象上方都有以下内容：-

```
[MetadataType(typeof(<#= efHost.EntityType.Name #>_Validation))] 
```

这意味着我可以将所有数据验证转移到一个单独的类中，该类在重新创建对象时不会被覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T09:36:45.323

通过实体框架代码首先迁移您可以更改外键或索引名称，您可以在此处的示例中看到：http: [//msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx) [http://www。 dotnetcurry.com/showarticle.aspx?ID=889](http://www.dotnetcurry.com/showarticle.aspx?ID=889)

# mysql - 使用mysql在表中显示上个月和当前月份的数据

> ID：12150663
> 
> 赞同：0
> 
> 时间：2012-08-27T22:50:32.920
> 
> 标签：mysql

我试图显示同一列的三个不同数字在mysql查询中，我想保持一个月静态：四月，所以会是这样的情况我想显示当前月份，上个月和静态我正在使用的一年中的月份，在这种情况下，让我们坚持 2012 年

```
Example
Tablename:payment

   id ,  pay_date,    amount
    1    2012-02-12    1000
    2    2012-03-11    780
    3    2012-04-15    890
    4    2012-05-12    1200
    5    2012-06-12    1890
    6    2012-07-12    1350
    7    2012-08-12    1450 
```

所以我想要做的是显示`amount`四月份的列，正如我所说我想保持该行静态：`890`当前月份可以说当前月份是八月：`1450`和上个月的金额是七月`1350`：：所以最终结果将是这样的：

```
april_amount   current_month_amount  previous_month_amount
     890                 1450                 1350 
```

但是我被困在这里：

```
select amount as april_amount
from payment
where monthname(pay_date) LIKE 'April'
and year(pay_date) LIKE 2012 
```

我希望问题写得足够清楚，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:09:29.867

如果结果可以是行而不是列：

```
SELECT MONTHNAME(pay_date), amount FROM payment

WHERE  pay_date BETWEEN '2012-04-01'
                    AND '2012-04-30'

    OR pay_date BETWEEN CURRENT_DATE
                      - INTERVAL DAYOFMONTH(CURRENT_DATE) - 1 DAY
                    AND LAST_DAY(CURRENT_DATE)

    OR pay_date BETWEEN CURRENT_DATE
                      - INTERVAL DAYOFMONTH(CURRENT_DATE) - 1 DAY
                      - INTERVAL 1 MONTH
                    AND LAST_DAY(CURRENT_DATE - INTERVAL 1 MONTH) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/5d791/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:58:47.877

我可能离这里很远。但是尝试：

```
select top 1 
  p.amount, c.amount, n.amount 
from payment c
  inner join payment p ON p.pay_date < c.pay_date
  inner join payment n ON n.pay_date > c.pay_date
where monthname(c.paydate) LIKE 'April'
  and year(c.pay_date) LIKE 2012
order by p.pay_date DESC, n.pay_date ASC 
```

编辑，我没有正确阅读您的问题。我打算上个月、现在和下个月。1分钟，我会再试一次。

```
select top 1 
  p.amount AS april_amount, c.amount AS current_month_amount, n.amount AS previous_month_amount
from payment c
  inner join payment p ON monthname(p.pay_date) = 'April' AND year(p.pay_date) = 2012
  inner join payment n ON n.pay_date > c.pay_date
where monthname(c.paydate) = monthname(curdate())
  and year(c.pay_date) = year(curdate())
order by n.pay_date ASC 
```

这假设每月只有 1 个条目。

好的，所以我有一段时间没有用mysql写了。这是适用于您的示例数据的方法：

```
select
  p.amount AS april_amount, c.amount AS current_month_amount, n.amount AS previous_month_amount
from payment AS c
  inner join payment AS p ON monthname(p.pay_date) LIKE 'April' AND year(p.pay_date) LIKE 2012
  inner join payment AS n ON n.pay_date < c.pay_date
where monthname(c.pay_date) LIKE monthname(curdate())
  and year(c.pay_date) LIKE year(curdate())
order by n.pay_date DESC
limit 1 
```

上个月加入的表的名称违反直觉`n`，但这有效。我在 WAMP 安装中验证了它。

要每月处理聚合，您可以使用子选择。性能可能会在非常大的表（数百万行或更多）上受到影响。

```
SELECT SUM( a.amount ) AS april_amount, 
 (
  SELECT SUM( c.amount ) 
  FROM payment c
  WHERE MONTH( c.pay_date ) = MONTH( CURDATE( ) )
 ) AS current_month_amount, 
 (
  SELECT SUM( p.amount ) 
  FROM payment p
  WHERE MONTH( p.pay_date ) = MONTH( CURDATE( ) - INTERVAL 1 
  MONTH )
 ) AS previous_month_amount
FROM payment a
WHERE MONTHNAME( a.pay_date ) =  'April'
AND YEAR( a.pay_date ) =2012 
```

# asp.net-mvc - 需要客户端验证 mvc 2 编号错误

> ID：12150665
> 
> 赞同：1
> 
> 时间：2012-08-27T22:51:04.693
> 
> 标签：asp.net-mvc, client-side-validation

我有一个具有此模型的 ASP.NET MVC2 项目：

```
 [DisplayName("Valor(%)")]
    [Required(ErrorMessage = "Este dato es requerido")]
    public decimal HOJ_ATI_CONT_SAPO_VALOR1  { get; set; }

    [DisplayName("Valor(%)")]
    public decimal HOJ_ATI_CONT_SAPO_VALOR2 { get; set; } 
```

看法：

```
Html.EnableClientValidation(); 
```

以及输出客户端验证：

```
 {
        "FieldName": "HOJ_ATI_CONT_SAPO_VALOR1",
        "ReplaceValidationMessageContents": true,
        "ValidationMessageId": "HOJ_ATI_CONT_SAPO_VALOR1_validationMessage",
        "ValidationRules": [
            {
                "ErrorMessage": "Este dato es requerido",
                "ValidationParameters": {},
                "ValidationType": "required"
            },
            {
                "ErrorMessage": "The field Valor(%) must be a number.",
                "ValidationParameters": {},
                "ValidationType": "number"
            }
        ]
    },
    {
        "FieldName": "HOJ_ATI_CONT_SAPO_VALOR2",
        "ReplaceValidationMessageContents": true,
        "ValidationMessageId": "HOJ_ATI_CONT_SAPO_VALOR2_validationMessage",
        "ValidationRules": [
            {
                "ErrorMessage": "The Valor(%) field is required.",
                "ValidationParameters": {},
                "ValidationType": "required"
            },
            {
                "ErrorMessage": "The field Valor(%) must be a number.",
                "ValidationParameters": {},
                "ValidationType": "number"
            }
        ]
    } 
```

为什么十进制字段添加默认的必需属性？我需要删除所需的验证类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:45:10.300

你的小数必须是可空的，否则 MVC 会使它们成为必需的；

```
[DisplayName("Valor(%)")]
[Required(ErrorMessage = "Este dato es requerido")]
public decimal? HOJ_ATI_CONT_SAPO_VALOR1  { get; set; }

[DisplayName("Valor(%)")]
public decimal? HOJ_ATI_CONT_SAPO_VALOR2 { get; set; } 
```

我相信这是因为没有空小数这样的东西——如果小数没有设置，那么它将被存储为“0”。如果您尝试将空白字段传递给 MVC 操作方法上的小数参数，这一点会更清楚。

# spring - Spring：CustomizableTraceInterceptor 没有被调用

> ID：12150666
> 
> 赞同：2
> 
> 时间：2012-08-27T22:51:04.990
> 
> 标签：spring, aspectj, spring-aop

我的拦截器声明如下所示：

```
<bean id="loggingInterceptor"
      class="org.springframework.aop.interceptor.CustomizableTraceInterceptor">
    <property name="enterMessage" value="Enter: $[targetClassShortName].$[methodName]($[arguments])"/>
    <property name="exitMessage" value="Exit: $[targetClassShortName].$[methodName](...) returning [$[returnValue]]"/>
</bean> 
```

使用切入点：

```
<aop:config proxy-target-class="true">
    <aop:advisor advice-ref="loggingInterceptor"
                 pointcut="execution(public * com.mycompany.server..*.*(..))"/>
</aop:config> 
```

但是没有来自 CustomizableTraceInterceptor 的踪迹。

*   我在切入点验证包是正确的
*   我确实检查了它设置为跟踪的日志记录级别。
*   我验证了 spring-aop.jar 是 maven 依赖项之一
*   将 aspectjrt 和 aspectjweaver 添加到 maven 依赖项

我什至实现了我自己的拦截器，它扩展了 CustomizableTraceInterceptor 并重写了 writeToLog 方法，放置 System.out.println 只是为了查看该类是否被调用。它没有。

有人能看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:55:59.510

您需要设置 bean CustomizableTraceInterceptor 的 loggername 属性。还要确保将日志级别设置为跟踪。

您可以为记录器类声明任何名称 - 您正在编写它作为跟踪 log4j 配置的一部分。

# jquery - 对 PageMethod 的 ASP.NET jQuery AJAX 调用返回带有 200 响应的 parsererror

> ID：12150667
> 
> 赞同：2
> 
> 时间：2012-08-27T22:51:05.677
> 
> 标签：jquery, .net, ajax, json, parse-error

据我所知，问题是 PageMethod 没有返回 JSON。我是否必须在服务器端执行其他操作才能正确格式化返回值？还有什么我想念的吗？

（注意：我现在正在为 IE8 测试这个）

在客户端（使用 jQuery 1.8.0）：

```
$.ajax({
            type: "POST",
            url: "Test.aspx/GetDate",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: SuccessFunction,
            error: ErrorFunction
        }); 
```

在服务器端：

```
<WebMethod()> _
Public Shared Function GetDate() As String
    Return Date.Now.ToString
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:42:11.057

好的，所以我根据[这个](https://stackoverflow.com/questions/583116/call-asp-net-pagemethod-webmethod-with-jquery-returns-whole-page)较旧的问题来解决这个问题。*事实证明，我的web.config*文件`system.web`部分需要以下内容：

 *```
<httpModules>
  <add name="ScriptModule" 
     type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
</httpModules> 
```

如果您使用 Visual Studio 创建“AJAX 网页”，我想这是自动为您设置的，但我试图向较旧的 ASP.NET 页面添加一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:43:56.547

以下对我有用：

```
function GetShoppingCartData() {
    jQuery.ajax({
        type: "POST",
        url: "DesktopModules/EcomDnnProducts/AjaxProductDisplay.aspx/GetShoppingCartData",
        data: "{'CartId': '" + jQuery(".shoppingcartid").attr("value") + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        cache: false,
        success: function (msg) {
            //jQuery('#productattributesdata').text(msg.d);
            buildShoppingCart(msg.d);
        },
        fail: function (msg) {
            jQuery('#productattributesdata').text(msg.d);
        }
    });
} 
```

您不需要“数据：....”位

我必须对我的 ASP 页面进行更改才能使其正常工作。我的功能如下所示：

```
 <System.Web.Services.WebMethod()> _
    Public Shared Function GetShoppingCartData(ByVal CartId As String) As String
        Dim ReturnString As String = ""

        Try

            ReturnString  = "test1;test2;test3"

        Catch ex As Exception
            'ProcessModuleLoadException(Me, exc)
            Dim DataLogger As New DataLogger
            DataLogger.WriteToEventLog("Error", ex.Message & " - " & ex.StackTrace)
        End Try

        Return ReturnString
    End Function 
```

看看有没有其他设置...

将以下内容添加到 web.config 以授予要调用的事物的权限：

```
<httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
      </customHeaders>
    </httpProtocol>
  </system.webServer> 
```

不确定这是否是缺少的位。

更多资源： http: [//msdn.microsoft.com/en-us/library/byxd99hx (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/byxd99hx(v=vs.80).aspx)

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=109](http://www.dotnetcurry.com/ShowArticle.aspx?ID=109)

[http://forums.asp.net/t/1298480.aspx/1](http://forums.asp.net/t/1298480.aspx/1)

HTH 肖恩*

# java - 为什么使用率低于 MaxHeapFreeRatio 时分配的堆内存没有缩小？

> ID：12150668
> 
> 赞同：5
> 
> 时间：2012-08-27T22:51:08.280
> 
> 标签：java, heap-memory

我有一个 java 服务器任务，它占用内存。一方面，我怀疑它是否曾经超过 MinHeapFreeRatio，但这是猜测。更有趣的是，GC 将成熟代减少到大约 2%，但从未减少为堆分配的内存。

```
堆配置：
   MinHeapFreeRatio = 40
   MaxHeapFreeRatio = 70
   MaxHeapSize = 3221225472 (3072.0MB)

   新大小 = 268435456 (256.0MB)
   MaxNewSize = 268435456 (256.0MB)
   OldSize = 805306368 (768.0MB)
   新比率 = 7
   幸存者比率 = 8
   PermSize = 21757952 (20.75MB)
   MaxPermSize = 176160768 (168.0MB)

堆使用：
新一代（伊甸园 + 1 个幸存者空间）：
   容量 = 241631232 (230.4375MB)
   使用 = 71657320 (68.3377456665039MB)
   免费 = 169973912 (162.0997543334961MB)
   29.65565312351675% 已使用
伊甸空间：
   容量 = 214827008 (204.875MB)
   使用 = 47322984 (45.130714416503906MB)
   免费 = 167504024 (159.7442855834961MB)
   22.028414602320392% 已使用
从太空：
   容量 = 26804224 (25.5625MB)
   使用 = 24334336 (23.20703125MB)
   免费 = 2469888 (2.35546875MB)
   90.78545232273838% 已使用
到太空：
   容量 = 26804224 (25.5625MB)
   使用 = 0 (0.0MB)
   免费 = 26804224 (25.5625MB)
   0.0% 已使用
并发标记扫描生成：
   容量 = 2952790016 (2816.0MB)
   使用 = 66930392 (63.829795837402344MB)
   免费 = 2885859624 (2752.1702041625977MB)
   2.2666830908168447% 已使用
烫发一代：
   容量 = 45752320 (43.6328125MB)
   使用 = 27404664 (26.13512420654297MB)
   免费 = 18347656 (17.49768829345703MB)
   59.89786747426142% 已使用

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T23:58:46.107

显然有多种因素会导致 MaxHeapFreeRatio 无法兑现：

*   最小堆大小 ( `-Xms`) 覆盖此 (AFAIK)。
*   -XX:ParallelGC 开关禁止堆收缩 - [https://forums.oracle.com/forums/thread.jspa?messageID=6438432](https://forums.oracle.com/forums/thread.jspa?messageID=6438432)
*   收缩仅在完整 GC 后发生 - [https://forums.oracle.com/forums/thread.jspa?messageID=95578​​61](https://forums.oracle.com/forums/thread.jspa?messageID=9557861)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:13:03.463

从操作系统为堆保留的内存量由 min heap 和 max heap、参数`-Xms`和`-Xmx`java 命令行决定。各种垃圾收集器比率和其他配置都是内部的，不会影响 JVM 使用的总内存量，只是它如何安排内存中的东西。

通常，当人们设置服务器时，他们将其设置`-Xms`为`-Xmx`相同的值，以避免调整堆大小的额外性能成本，并且如果堆需要增长，则必须在服务器运行时创建连续的内存空间。这意味着从操作系统为堆保留的内存量永远不会因为垃圾收集而减少，它只是被释放以放入新的 JVM 数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-29T19:32:59.103

在 JRE 1.7 中，您可以使用`-XX:+UseG1GC -XX:MinHeapFreeRatio=5 -XX:MaxHeapFreeRatio=15`. 但是，要缩小内存，您仍然需要通过调用显式调用 GC `System.gc()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-26T12:31:54.330

我使用了组合 -XX:+UseG1GC -XX:ParallelGCThreads=15 -XX:MinHeapFreeRatio=30 -XX:MaxHeapFreeRatio=70 -verbosegc -XX:+PrintGCDetails -Dsun.rmi.dgc.client.gcInterval=60000 -Dsun.rmi。 dgc.server.gcInterval=100000 它保存了我的系统崩溃使用的内存达到 99.8% 然后释放。

谢谢：沙希德·阿巴西

# python - 如何使用 numpy 对数组和矩阵进行排序

> ID：12150669
> 
> 赞同：0
> 
> 时间：2012-08-27T22:51:21.333
> 
> 标签：python, numpy

我有一个 CSR 稀疏的数组`y`和矩阵`X`。

我需要做一个随机排序`y`和 X ，其中每一行`y`对应于`X`.

使用 NumPy，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:16:38.360

为了获得随机排序，您可以尝试使用该`np.random.shuffle`功能。

```
# Create an array of indices
indices = np.arange(y.size)
# Randomize it
np.random.shuffle(indices) 
```

您现在可以使用花哨的索引`indices`来随机化。`y``y_new = y[indices]`

您可以使用相同`indices`的方法对矩阵进行重新排序，但请注意，CSR 矩阵不支持花哨的索引。您必须将其转换为 LIL，对其重新排序，然后将其重新转换为 CSR。

# asp.net - MVC 代码重构

> ID：12150672
> 
> 赞同：4
> 
> 时间：2012-08-27T22:51:48.660
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-areas

我有一个巨大的 MVC 应用程序，但不幸的是 MVC 区域没有在初始开发中使用。该应用程序变得如此模块化，以至于我们觉得有一个很好的例子来使用区域。将整个代码移动到“区域”结构有多容易或多难.. 是否有任何重大挑战/代码返工等我必须注意的事情？我可以只创建新区域并将控制器视图模型移动到适当的存储桶中吗？它工作正常吗？我是否过度简化了事情？如果有人以前采取过这条路线，将不胜感激反馈，评论..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T23:00:37.097

该应用程序适用于区域。由于分离，它将使其更易于维护和逻辑查看。但是，您将遇到一些困境。

**命名空间**

第一个很可能是命名空间。当您分离出具有依赖关系的连接逻辑或模型时，如果将依赖类放置在区域中，它们的命名空间引用可能需要更改。幸运的是，Visual Studio 可以使用简单的“解决”功能来处理这些问题。如果您尝试编译并向您显示所有存在问题的地方，编译器应该会抛出。很难预见所有这些事件将发生在哪里。但是，很可能不需要很多 using 指令，因为许多不同控制器使用的大部分内容应该在一个地方。

**路由**

如果您要使用区域，几乎您使用的每个操作链接都必须更改。您将被迫更改它们以代表新区域。

无区域（在基地）：

```
@Html.ActionLink("Label For Link", "ActionName", "ControllerName", new { area = "" }, null) 
```

具体区域：

```
@Html.ActionLink("Label For Link", "ActionName", "ControllerName", new { area = "SpecificAreaName" }, null) 
```

您可能还需要更改`return RedirectToAction`您拥有的任何代码。

基地面积：

```
return RedirectToAction("ActionName", "ControllerName"); 
```

具体区域：

```
return RedirectToAction("ActionName", "ControllerName", new { Area = "SpecificAreaName" }); 
```

除此之外，你应该很好。

# asp.net-web-api - 带有 Thinktecture.IdentityModel 的 Asp.net Webapi CORS

> ID：12150675
> 
> 赞同：0
> 
> 时间：2012-08-27T22:52:04.617
> 
> 标签：asp.net-web-api, thinktecture-ident-model

我正在研究使用 Thinktecture.Identitymodel 解决 Asp.net Webapi CORS 问题，如此 URL [http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-中所述thinktecture-identitymodel/](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)

我正在使用 .Net 4.5 的 VS2012 我在这里遇到了几个问题：

1）这是我提出请求时遇到的错误

> 试图以与数组不兼容的类型访问元素 在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。System.ArrayTypeMismatchException：试图以与数组不兼容的类型访问元素。
> 
> [ArrayTypeMismatchException: 试图将元素作为与数组不兼容的类型访问。]
> System.Collections.Generic.List`1.Insert(Int32 index, T item) +62
> Galaxy.CorsConfig.RegisterCors(HttpConfiguration config) +99
> Galaxy。 WebApiApplication.Application_Start() +377
> 
> [HttpException (0x80004005): 试图以与数组不兼容的类型访问元素。]
> System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +12864673
> System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] 处理程序）+175
> System.Web.HttpApplication.InitSpecial（HttpApplicationState 状态，MethodInfo[] 处理程序，IntPtr appContext，HttpContext 上下文）
> +304 System.Web.HttpApplicationFactory.GetSpecialApplicationInstance（IntPtr appContext，HttpContext 上下文）+404
> System.Web .Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +475
> 
> [HttpException (0x80004005): 试图以与数组不兼容的类型访问元素。]
> System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12881540 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159 System.Web。 HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +12722601

我的应用程序池指向 Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

2）我的第二个问题是在做WebApi中提到的事情之后。我还需要为 IIS 添加 HTTPmodule 吗？

它应该很容易上手。我不知道我在这里错过了什么。任何指针都受到高度赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:11:45.820

我遇到了一个非常相似的问题，因为 Thinktecture.IdentityModel.Web 1.4 引入了 HttpClient 0.6，它引用了 System.Net.Http* v2.0 程序集，但 MVC 中的 HttpHanders 列表需要 4.0。一旦我删除了 Web pkg 及其依赖项，一切就恢复正常了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:23:52.370

我发现我的程序集版本不匹配。我的实际项目在 .Net 4.0 中，而 Thinktecture 在 .Net 4.5 中。

一旦我修复它就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T18:41:32.977

与上述 Ben 的解决方案类似，我使用 Thinktecture.IdentityModel v3.5.0 时出现了这个问题，因为我的 web.config 中引用了旧版本的 System.Net.Http (2.2.13.0) 并安装在 bin 文件夹中。

从我的 web.config 中删除dependentAssembly 绑定并删除旧的 System.Net.Http .dll 解决了这个问题。

这是针对 .NET 4.5 项目的。

# c# - 如何避免这种潜在的“写操作运行时异常”？

> ID：12150681
> 
> 赞同：4
> 
> 时间：2012-08-27T22:53:09.017
> 
> 标签：c#, arrays, winforms, resharper

使用此代码：

```
for (int row = 0; row < PlatypusGridRowCount; row++) {
    // Save each row as an array
    var currentRowContents = new string[ColumnCount];
    // Add each column to the currentColumn
    for (int col = 0; col < ColumnCount; col++) {
        currentRowContents[col] = this.GetPlatypusValForCell(row, col);
}
// Add the row to the DGV
dataGridViewPlatypus.Rows.Add(currentRowContents); 
```

Resharper 谈到最后一行：“从字符串 [] 到对象 [] 的协变数组转换可能导致写入操作时出现运行时异常”

所以我让它进行它想要的更改（“将局部变量的类型更改为对象 [] ...”），以便代码变成这样：

```
...
    object[] currentRowContents = new string[ColumnCount];
... 
```

然后，当我重新运行 Resharper 检查时，我再次从 Resharper 收到完全相同的警告消息（“从字符串 [] 到对象 [] 的协变数组转换可能导致写入操作时出现运行时异常”），但这次在线上：

```
object[] currentRowContents = new string[ColumnCount]; 
```

然后我让它再次做它的事情（“将局部变量的类型更改为字符串 [] ...”）

...因此，这会将该行更改为：

```
string[] currentRowContents = new string[PLATYPUS_COL_COUNT]; 
```

...（IOW，它将其更改回第一个版本，但使用显式而不是隐式字符串数组声明）；但是 ReSharper 的后续运行会希望我将 string[] 更改为 var 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:02:57.470

当数组用于从中检索数据时，您的代码绝对完美。

不幸的是，ReSharper 无法检测到是否有对该数组的写入（全局程序验证目前在计算机科学中是未解决的问题 :)），并且如果对数组元素进行了分配，则程序将在运行时抛出异常，如果除了字符串之外的东西被分配给。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T23:16:33.210

我想它想要

```
object[] currentRowContents = new object[ColumnCount] 
```

如果您将字符串 [] 赋予需要对象 [] 的东西，那么该东西将任何对象分配到该数组中是合法的。因此，您的代码在编译时是合法的，但在运行时可能会引发异常（如果将字符串以外的内容分配给数组元素）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T23:20:44.147

If you have no other reason for currentRowContents to be a string array, you can just declare it as `var currentRowContents = new object[ColumnCount];` thus eliminating the co-variant array conversion

**or just read hatchet's answer, which is the same as mine but written by a faster typist;)

# javascript - 在Phonegap / iOS中按下主页按钮时访问localStorage

> ID：12150682
> 
> 赞同：8
> 
> 时间：2012-08-27T22:53:25.480
> 
> 标签：javascript, ios, html, cordova

每次按下主页按钮时，在我的应用程序（Phonegap/iOS）退出之前，我都需要将我的 javascript 代码中的一些值存储在 html5 本地存储中。据我了解， pause() 和 resume() phonegap 事件不会在 iOS 上触发（iOS 怪癖）。按下设备主页按钮时如何存储javascript值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:24:44.467

您可以在知道它们的时候将值存储在 localStorage 中，而不要等到用户按下 Home。

# listview - 在 Metro App XAML 的 ListView 中设置 SelectedItem 的样式

> ID：12150683
> 
> 赞同：5
> 
> 时间：2012-08-27T22:53:27.970
> 
> 标签：listview, windows-runtime, winrt-xaml

我无法在 Metro 应用列表框中设置所选项目的样式。

我已经为包含我想更改颜色的 TextBlock 的项目创建了 DataTemplate。我从 WPF 中尝试了很多东西，但它们不适用于 Metro，如 DataTemplate.Triggers、Style.Triggers 等。我还尝试制作 ItemContainerStyle 模板的副本，但由于它使用 ContentPresenter 来显示我的 DataTemplate 我不知道要更改什么来实现我想要的。值转换器也是如此，因为我不知道如何使用 RelativeSource 为转换器提供 ListBoxItem 的 IsSelected 属性...。

感谢帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:16:40.667

您更改 ItemContainerStyle 是完全正确的。如果您在 Visual Studio 或 Blend 中，请右键单击 ListView 并选择

编辑其他模板 -> 编辑生成的项目容器 [ItemContainerStyle] -> 编辑副本

这样做时，不要启用“编辑当前”，这一点很重要。如果是，请找到该模板并将其删除（它可能是一个空模板，而您需要完整的模板）。

这将为 ListViewItem 创建一个样式。ListViewItem 中有很多控件，其中大多数处理选择或其他状态。您需要对`Selected`VisualState 进行更改。

# linux - selinux context_new 返回值

> ID：12150684
> 
> 赞同：0
> 
> 时间：2012-08-27T22:53:27.970
> 
> 标签：linux, selinux

根据[文档](http://linux.die.net/man/3/context_new)，“成功时返回零”，但没有提到的函数返回 0。它们都返回`const char *`或无效。有人可以澄清在哪种情况下会返回 0 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:46:06.777

在 selinux 官方邮件列表上提出这个问题后，这是一个错误，他们会修复它。context_new 实际分配内存块

# javascript - Javascript翻译模板

> ID：12150686
> 
> 赞同：1
> 
> 时间：2012-08-27T22:53:49.920
> 
> 标签：javascript, jquery, facebook, jquery-templates, xfbml

我目前正在重新实现 Facebook 的国际化 XFBML 标签的前端，该标签已经被破坏了一段时间。我快完成了，但有一个问题：在不丢失子节点信息的情况下替换标记化的翻译。

对于背景，翻译标签看起来像这样：

```
<fb:intl>
Text goes here and you can have {a-token} like this.
<fb:intl-token name="a-token">parameters</fb:intl>
</fb:intl> 
```

你给他们传递一个这样的字符串： `Text goes here and you can have {a-token} like this.`

你会得到一个这样的翻译字符串：`El texto va aquí y usted puede tener {a-token} como ésta.`

即使您可以输入动态数据，这也可以让您只翻译一次字符串。很酷的部分（和问题）是您可以嵌套这些字符串。因此，除了令牌内部的“参数”纯文本之外，它内部可能还有另一个嵌套`fb:intl`标签（其中可能有另一个嵌套标签，等等）。

我想要做的是在不丢失子节点上下文的情况下进行替换。因此，我只想获取`<fb:intl-token>`标签并将其移动以替换`{token}`代表其在字符串中的位置的标签。

关于如何有效地做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:40:21.220

经过相当多的黑客攻击，我能够想出一个解决方案。

伪代码是这样的：

1.  使用 jQuery 克隆原始元素`.clone(true)`（以维护所有原始数据等）。
2.  用 清空克隆的元素`.empty()`。
3.  将 设置`.html()`为将标记的正则表达式替换为 html 元素，以便可以通过 jQuery: 轻松操作它们`.replace(/{([a-zA-Z\-]+)}/, '<span id="$1"></span>')`。
4.  循环遍历原始元素的`fb:intl-token`子元素并为每个子元素执行`$(this).insertBefore(placeHolder);`（其中 placeHolder 是步骤 3 中替换的标记——这就是它的 id 基于标记名称的原因）
5.  从克隆的元素中删除占位符。
6.  用克隆替换原始元素。

到目前为止，这似乎只是花花公子。

# jquery - 如何模板化 socket.io 发送到页面的数据？

> ID：12150688
> 
> 赞同：0
> 
> 时间：2012-08-27T22:54:10.530
> 
> 标签：jquery, node.js, socket.io

我在这里为 socket.io 构建了一个小型测试平台：[https](https://creativespace.nodejitsu.com/ideas) ://creativespace.nodejitsu.com/ideas我遇到了一个挑战，每次新用户通过 socket.io 发送数据时，我都必须更新页面这些新数据，我可以在 socket.io 中处理得很好，但事后如何处理模板呢？我使用翡翠来渲染我的页面。有什么方法可以再次使用翡翠来动态地向页面呈现新内容？还是我必须编写一个 jquery 解决方案？

任何帮助都会摇滚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:40:31.463

尝试 jquery 模板并将 html 嵌入到您的页面中

使用 jquery 模板：

[http://api.jquery.com/category/plugins/templates](http://api.jquery.com/category/plugins/templates)

# xcode4.4 - 我在 XCode 4.4 中将 Quartz Composer 放在哪里

> ID：12150691
> 
> 赞同：1
> 
> 时间：2012-08-27T22:54:21.450
> 
> 标签：xcode4.4, quartz-composer

新的 Xcode 4.4 不包括 Quartz Composer 并且没有安装在 Macintosh HD / Developer 文件夹中，而是作为应用程序中的应用程序安装。Quartz Composer 必须从 Apple Developer 网站单独下载。伤害。Graphics Tools 包含一系列工具，其中有 QC。我的问题是：我在哪里安装这些图形工具？在 dmg 中没有关于安装的信息。有什么帮助吗？Tnks约瑟夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:29:13.933

`.app`您可以随心所欲地复制捆绑包。我建议简单地将它们复制到`/Applications`，就像任何其他应用程序包一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T15:47:49.147

将它们放在 Xcode.app/contents 的 Applications 文件夹中

这样它们就会出现在 xcode>Open Developer Tools 菜单中

# mysql - 使用 Delphi XE2 的 MySQL 解决方案是什么？

> ID：12150695
> 
> 赞同：2
> 
> 时间：2012-08-27T22:54:30.217
> 
> 标签：mysql, delphi, delphi-xe2, zeos

Zeos Lib 仍然不适用于 Delphi XE2。任何人都知道一个免费的组件集来处理 MySQL 和 Zeos/Interbase 组件一样好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:38:18.560

如果使用 RADStudio，您可以使用免费[的 FireDAC](http://www.embarcadero.com/products/rad-studio/firedac)。**FireDAC 支持从 Delphi 和 C++Builder 到 InterBase、SQLite、 MySQL**、SQL Server、Oracle、PostgreSQL、DB2、SQL Anywhere、Advantage DB、Firebird、Access、Informix、DataSnap 等
的本地高速直接访问。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T03:28:45.897

今年 2013 Zeos 数据库库现在与 XE2 和 XE3 兼容。我推荐它。**

# javascript - JavaScript：检索属性值的括号表示法

> ID：12150696
> 
> 赞同：2
> 
> 时间：2012-08-27T22:54:49.047
> 
> 标签：javascript

我正在编写 codecademy.com JavaScript 教程。这节课是关于对象的。我觉得这个问题很简单，但我没有得到答案。如果我更好地理解说明，答案对我来说可能会更清楚。

我将值设置为变量aProperty，现在我应该按照最终注释中的说明进行操作，即使用变量“aProperty”打印第一个属性的值。我在下面包含了“课程介绍”，以帮助解释课程试图教授的内容。

问题：假设我正确设置了变量 aProperty，您将如何使用变量 aProperty 检索 James 对象的第一个值。

```
var james = {
    job: "programmer",
    married: false
};

// set to the first property name of "james"
var aProperty = james.job; 

// print the value of the first property of "james" 
// using the variable "aProperty" 
```

**课程介绍**

> 最后，让我们回顾一下检索属性值。在本节中，我们一直在使用点表示法来获取对象属性的值：
> 
> ```
> someObj.propName 
> ```
> 
> 但是，请记住，我们也可以使用括号表示法：
> 
> ```
> someObj["propName"] 
> ```
> 
> 括号表示法的一个优点是我们不仅限于在括号中使用字符串。我们还可以使用其值为属性名称的变量：
> 
> ```
> var someObj = {propName: someValue}; var myProperty = "propName"; someObj[myProperty] 
> ```
> 
> 最后一行与使用 someObj["propName"] 完全相同。
> 
> 利用使用带有括号表示法的变量的能力。
> 
> 在第 7 行，将 aProperty 设置为 james 中第一个属性的字符串（即作业属性）。
> 
> 然后使用括号表示法和 aProperty 打印 james 的作业。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T22:57:07.130

```
var aProperty = 'job';
console.log(james[aProperty]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T13:42:58.720

尝试这样的事情：

```
var james = {
job: "programmer",
married: false
};

var aProperty = "job";

console.log( james[aProperty] ); 
```

# r - 计算运行中位数时缺少值？

> ID：12150697
> 
> 赞同：4
> 
> 时间：2012-08-27T22:54:51.923
> 
> 标签：r, missing-data

我想平滑时间序列以避免虚假的抖动/错误。换句话说，我想做一些非常局部的鲁棒平滑。

我在 zoo 包中遇到了 rollmean 和 rollmedian，但遇到了问题，因为我的向量中有一个 NA。然后我在某处读到那些动物园功能使用运行，这就是问题所在。

==例子==

```
median(c(1,1,1,2,2,2,7,NA,1,2,3,10,10,10),na.rm = TRUE)
runmed(c(1,1,1,2,2,2,7,NA,1,2,3,10,10,10),k=3) 
```

第一行返回 2，但如果`na.rm = TRUE`不包括在内，则返回 NA。第二行返回`Error in runmed(c(1, 1, 1, 2, 2, 2, 7, NA, 1, 2, 3, 10, 10, 10), k = 3) : NA/NaN/Inf in foreign function call (arg 1)`。无法将 na.rm 参数添加到该行。

**我怎样才能跑起来处理 NA？**顺便说一句，rollmean 返回一个直到 NA 为止都是正确的向量，然后为之后的每个值返回 NA。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T23:01:34.307

利用`na.omit`

```
runmed(na.omit(c(1,1,1,2,2,2,7,NA,1,2,3,10,10,10)),k=3)
# [1]  1  1  1  2  2  2  2  2  2  3 10 10 10
#attr(,"k")
#[1] 3 
```

或使用**zoo** ( , , , , 等)中的`na.*`功能之一，例如**`na.locf``na.approx``na.spline``na.aggregate`**

 **```
runmed(na.locf(c(1,1,1,2,2,2,7,NA,1,2,3,10,10,10)),k=3)
#[1]  1  1  1  2  2  2  7  7  2  2  3 10 10 10
#attr(,"k")
#[1] 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T06:14:23.933

`runquantile`从[caTools 包](https://cran.r-project.org/web/packages/caTools/index.html)中查看。**

# javascript - jQuery .data() 和存储日期信息

> ID：12150698
> 
> 赞同：1
> 
> 时间：2012-08-27T22:55:02.730
> 
> 标签：javascript, jquery, datetime

我正在使用 jQuery 的 .data() 来回传递一个 JSON 对象。数组中的字段之一是表示日期的字符串。当我将字符串放入 .data() 函数时，它是一个字符串。当我检索它时，它是一个 js Date 对象（并且它附加了不正确的时区信息）。有没有办法阻止这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:11:09.513

It sounds like you're using the HTML5-style data attributes with jQuery .data(), which does coerce the values to the best match, see [jQuery online docs about .data()](http://api.jquery.com/data/#data-html5)

The work around is to use the .attr() method instead.

```
<div id="mydiv" data-two="2">

$('#mydiv').data('two') -> 2 // a number
$('#mydiv').attr('data-two') -> "2"  // a string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:04:37.793

我有完全相同的东西。

我有以下代码：

```
<div class="datasegment red" data-id="0045" data-name="0045" data-level="red" style="opacity: 1; height: 142.28571428571428px; ">
        <a class="datavalue" href="#" style="font-size: 24px; ">0045</a>
    </div> 
```

和 Javascript

```
var ID = jQuery(this).data("id"); 
```

当我在字段中有“0045”时，它直接将其转换为我不想要的整数。

然后我将其更改为：

```
var ID = "";
ID = jQuery(this).attr("data-id"); 
```

然后它正确地返回了我需要的字符串“0045”。

在某些情况下这是一个大问题，我仍然没有找到下降的解决方法。

hth。肖恩

# python - （略-）线性规划

> ID：12150700
> 
> 赞同：1
> 
> 时间：2012-08-27T22:55:14.257
> 
> 标签：python, math, numpy, linear-algebra, linear-programming

我有一个线性子空间`S = [v1 v2 v3 v4] = [1 1 1 2]t`，其中 t 是一些标量实数。

我想根据以下内容对 S 进行转换：`[v1 v2 v3 v4] = [A 2A*B 3*C 10]`

我`T = [A B C]`用上述规则定义一个新子空间的最快方法是什么，它是 S 的转换？

在此示例中， 的`T`值为`T = [A B C] = [1 0 1/3]t + [0 1/2 0]`。我通过在上面的转换规则中根据 v1、v2、v3 和 v4 找到 A、B 和 C 来得到这个。`A = v1`和`B = v2/(2A) = v2/(2*v1)`和`C = v3/3`。然后，我用我在上面 S 中找到的 v1、v2 和 v3 的值替换。在这种情况下`A = 1t`， 和`B = (1/2)*(v2/v1) = 1/2`和`C = (1/3)t`。

我想在 Python 中以编程方式确定这一点。我不能真正追求改变基础的转换（[http://en.wikipedia.org/wiki/Change_of_basis](http://en.wikipedia.org/wiki/Change_of_basis)），因为转换不是严格线性的。

但是，我可以保证转换只包括标量和变量 A、B 和 C 的一次幂。

编辑：我希望解决方案*不*涉及符号数学工具包。

Edit2：除了追求这一点的最简单方法外，我还想要一个可以实际扩展到大型阵列（1000 个组件）的解决方案。

# php - PHP / RSS Feed 约会设置

> ID：12150703
> 
> 赞同：1
> 
> 时间：2012-08-27T22:55:21.637
> 
> 标签：php, rss

我有一个从我设计的自定义博客生成的 RSS 提要；但是，我的一篇文章每天都会出现在我的 RSS 阅读器上。我终于检查了日期，发现它每天都显示，但从 2000 年开始。谷歌阅读器显示日期为每日更新帖子的日期，但查看 XML 代码，即显示 2000 年。所有其他帖子都是显示为 1969 年。

以下是我的 php 代码设置方式：

```
$rssfeed.='<pubDate>'.date("D, d M Y H:i:s O",strtotime($date)).'</pubDate>'; 
```

这是正确的方法吗？

编辑：我可能是个白痴——我没有在我的代码中将 $date 显示为变量——出于好奇，应该有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:59:35.787

> **pubDate**频道中内容的发布日期。例如，《纽约时报》每天发布一次，发布日期每 24 小时翻转一次。那是频道的 pubDate 发生变化的时候。RSS 中的所有日期时间都符合**RFC 822**的日期和时间规范，但年份可以用两个字符或四个字符（首选四个）表示。 *2002 年 9 月 7 日星期六 00:00:01 GMT*

见：[http ://cyber.law.harvard.edu/rss/rss.html](http://cyber.law.harvard.edu/rss/rss.html)

```
$fromStringDate = strtotime($date);
if (!$fromStringDate) throw new Exception(sprintf('Date-Failure in "%s"', $date));
$rfc822Date = date("r", $fromStringDate);
$rssfeed .= sprintf('<pubDate>%s</pubDate>', $rfc822Date); 
```

另见： http: [//php.net/date](http://php.net/date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:44:06.313

我想通了这个问题，这里是完整的代码：

```
while ($row = mysql_fetch_array($result)) {
    extract($row);
    $rssfeed.='<item>';
    $rssfeed.='<title>'.$title.'</title>';
    $rssfeed.='<description>'.validate($news).'</description>';
    $rssfeed.='<pubDate>'.date('r',$date).'</pubDate>';
    $rssfeed.='</item>';
} 
```

`$date`在倒数第二行所说的地方，我`strtotime`出于某种原因将其包裹起来。我删除了它，一切都很好！

# ruby-on-rails - rails 和 mongomapper 一种关系：创建新条目

> ID：12150706
> 
> 赞同：1
> 
> 时间：2012-08-27T22:55:32.437
> 
> 标签：ruby-on-rails, mongomapper, relation

我正在使用 mongomapper 创建简单的 rails 应用程序来做一些库存：基本上，我希望能够定义替换单元应该是什么。

所以我有模型：

```
class Replacement
  include MongoMapper::Document
  set_collection_name 'asset_replacements'
  key :device, String
  one :current, :class_name => 'Asset'
  one :replacement, :class_name => 'Asset'
end

class Asset
  include MongoMapper::Document
  set_collection_name 'assets__collection'
  key :_id, Mongo:ObjectId
  key :vendor, String
  key :model, String
end 
```

我有一个form.erb：

```
<%= form_for(@replacement) do |f| %>
  <div class="field">
    <%= f.label :device %><br />
    <%= f.text_field :device %>
  </div>
  <div class="field">      
    <%= f.label :current_id %><br />
    <%= f.collection_select :current, Asset.sort(:model), :id, :model %>
  </div>
  <div class="field">      
    <%= f.label :replacement_id %><br />
    <%= f.collection_select :replacement, Asset.sort(:model), :id, :model %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

控制器是：

```
def create
  p = params[:replacement]
  @replacement = Replacement.new( p )

  respond_to do |format|
    if @replacement.save
      format.html { redirect_to @replacement, notice: 'Replacement was successfully created.' }
      format.json { render json: @replacement, status: :created, location: @replacement }
    else
      format.html { render action: "new" }
      format.json { render json: @replacement.errors, status: :unprocessable_entity }
    end
  end
end 
```

问题是，当我`Replacement`在 Rails 应用程序上创建新应用程序时，出现以下错误：

```
NoMethodError in ReplacementsController#create
  undefined method `each_pair' for "50381cb24ed00a707c0000c1":String 
```

看来我很难将 and 的字符串`replacement`与`current`可用的 mongo 对象匹配。

我尝试使用 进行查找`Asset.find( BSON::ObjectId.from_string( p['current'] )`，这不会引发错误，但似乎也没有将关系放入 mongo 集合中。

我在做什么错？

# java - 如何在命令行上接收意图的结果？

> ID：12150710
> 
> 赞同：0
> 
> 时间：2012-08-27T22:55:42.480
> 
> 标签：java, android, adb

假设我使用 adb adb shell am start -a android.intent.action.MAIN -n -e key1 value1 调用一个活动有没有办法在 shell 提示符下接收它的结果（*）？[我试过 -W 但即使在活动“完成”后仍然卡住 - ed]

*   *   至少我正在寻找 Activity 的返回代码，能够看到某种可解析形式的返回结果意图会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:02:48.660

您可以尝试`System.exit(CODE);`返回返回码，但这并不是很有用（除非您真的有理由这样做）。

# bash - 通过在 bash 中突出显示来复制

> ID：12150714
> 
> 赞同：-1
> 
> 时间：2012-08-27T22:56:11.483
> 
> 标签：bash, shell, copy

我试图以这样一种方式设置我的 bash，即每当我突出显示（通过用鼠标选择它）任何文本时，它都会自动复制到剪贴板。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:14:34.103

X11 有一个与剪贴板不同的选择概念。您可以通过中键单击目标轻松粘贴最后一个选择。

# ios - 将项目添加到情节提要-IB 中的原型单元格时出现奇怪的错误

> ID：12150715
> 
> 赞同：43
> 
> 时间：2012-08-27T22:56:19.940
> 
> 标签：ios, uitableview, iboutlet

我有一个相当大的项目（约 20 个场景）。其中之一是带有自定义 UITableViewController 类的 TableViewController。我给了单元格一个重用标识符，并为其添加了一个标签。当我尝试 Ctrl+拖动标签到 UITableViewController 头文件以创建插座时，我收到以下错误：

> 错误：非法配置：连接“tableInfoView”不能将原型对象作为其目标。

这是什么？我是否忽略了一些明显的东西？还是我需要创建一个自定义单元类并将出口拖到那里？如果是这样，我该如何指定 UITableViewController 中每个单元格唯一显示的数据？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-25T09:32:28.520

事实上，您不能只从`UITableView`委托视图控制器中的动态单元原型中创建一个出口。

您必须子类化`UITableViewCell`，然后将该类归因于您的原型。

然后你可以Ctrl-Drag从标签到`UITableViewCell`子类头文件。

`UITableViewCell`最后，在将头文件导入其中后，您可以在委托代码中访问此插座。

Apple[在](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)“动态行内容的技术”部分对此进行了记录。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-10T11:58:10.287

或者你可以给标签一个标签（例如100）并使用

```
myLabel = [myTableView viewForTag:100]; 
```

得到标签

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T12:24:20.487

我自己也有同样的错误。只是为未来的读者增加一个潜在的根本原因：

在我的例子中，我将一个控件（在这种情况下为按钮）从一个原型单元格复制到下一个原型单元格，并且该操作仍然引用了相邻单元格。我的桌子有几个不同的原型单元。

事实上，它实际上是正确连接到原型单元的 UITableViewCell 的正确子类，因此很难真正看到错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-02T08:20:04.260

标记标签，您可以在视图控制器中的任何位置访问标签，就像从表视图中使用 viewWithTag 一样。

```
 UILabel *destinationLabel = (UILabel *)[self.tableView viewWithTag:1];

    destinationLabel.text = @"Label Destaination"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T12:22:07.717

我遇到了同样的问题，但后来发现这只是一个愚蠢的错误。 **我错误地将标签从 Cell 拖到了控制器的`@interface`**

这也可能是你的问题。只需交叉检查一次。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-22T17:09:08.173

为原型单元设置故事板中.m文件中使用的正确重用标识符。我有同样的情况，这对我有帮助

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-03-27T09:47:15.817

如果问题仍然存在，在做完所有事情之后，只需移除所有插座并小心地重新加入它们，这对我来说效果很好。

# python - 金字塔返回新会话

> ID：12150718
> 
> 赞同：2
> 
> 时间：2012-08-27T22:56:43.197
> 
> 标签：python, session, pyramid, cornice

我使用 Cornice 制作 RESTful url。

我安装了金字塔烧杯并将包含添加到我`__init__.py`的文档中指定的。

而已。然后我在我的观点中这样做了：

```
p_desc = """Service to post session. """
p = Service(name='p',\
                    path=root+'/1',\
                    description=register_desc)
g_desc = """Service to get session. """
g = Service(name='g',\
                    path=root+'/2',\
                    description=g_desc)

@g.get()
def view2(request):
    print request.session
    return Response()

@p.post()
def view1(request):
    print 'here'
    request.session['lol'] = 'what'
    request.session.save()
    print request.session
    return Response() 
```

这就是我的结果

```
>>> requests.post('http://localhost/proj/1')
<Response [200]>
>>> requests.get('http://localhost/proj/2')
<Response [200]>

Starting HTTP server on http://0.0.0.0:6543
here
{'_accessed_time': 1346107789.2590189, 'lol': 'what', '_creation_time': 1346107789.2590189}
localhost - - [27/Aug/2012 18:49:49] "POST /proj/1 HTTP/1.0" 200 0

{'_accessed_time': 1346107791.0883319, '_creation_time': 1346107791.0883319}
localhost - - [27/Aug/2012 18:49:51] "GET /proj/2 HTTP/1.0" 200 4 
```

如您所见，它会返回新会话。如何获得相同的会话以便我可以访问相同的数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T23:00:31.460

会话通过发送给客户端的 cookie 进行跟踪。因此，您的“客户端”（`requests`库）实际上需要再次发送该 cookie：

```
resp = requests.post('http://localhost/proj/1')
cookies = resp.cookies

requests.get('http://localhost/proj/2', cookies=cookies) 
```

更好的是使用[`requests.Session`设置](https://requests.readthedocs.io/en/latest/user/advanced/#session-objects)：

```
with requests.Session() as s:
    s.post('http://localhost/proj/1')
    s.get('http://localhost/proj/2') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T23:24:34.910

为了说明[@Martijn Pieters 的答案](https://stackoverflow.com/a/12150748/4279)：

```
import requests

def t(r, url="http://httpbin.org/cookies"): 
    print(r.get(url).json['cookies'])

with requests.session() as s:
    t(requests)             # request without session
    t(s)                    # request within session
    t(s, "http://httpbin.org/cookies/set?name=value")  # set cookie
    t(requests)             # request without session
    t(s)                    # request within session 
```

### 输出

```
{}                  # request without session
{}                  # request within session
{u'name': u'value'} # set cookie
{}                  # request without session
{u'name': u'value'} # request within session 
```

# android - android应用包名可以包含非英文字符吗？

> ID：12150719
> 
> 赞同：3
> 
> 时间：2012-08-27T22:56:55.080
> 
> 标签：android, naming-conventions, package

android应用包名可以包含非英文字符吗？

例如，它可以是 com.android.नमस्ते

在执行此操作之前，我将 eclipse 设置为使用 UTF-8（Windows->Preferences->General->workspace->Text encoding to UTF-8）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T22:59:12.767

不可以。Java 包应遵循 java 包命名约定。请参阅[Android 文档](http://developer.android.com/guide/topics/manifest/manifest-element.html#package)

# spring - 弹簧形式多选帖子

> ID：12150720
> 
> 赞同：0
> 
> 时间：2012-08-27T22:56:58.143
> 
> 标签：spring, jsp, spring-mvc

我有一个弹簧形式的多选字段。

```
<form id="form1" modelattribute="masterInfo">
<select id="company" multiple="multiple" size=2 path="companynamesList[0].companyid" id="companyId">
<option value="1">amazon</option>
<option value="2">ebay</option>
<option value="3">woot</option>
</select>
....

</form> 
```

modelattribute（支持 obj）`MasterInfo.java`有一个列表`companynamesList`以及它的 getter 和 setter。

如果用户同时选择 amazon 和 ebay，则只向控制器发送 ebay(2)。我希望列表中同时填充 2 和 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:51:20.553

您应该使用 AutoPopulatingList 进行转换，此功能在 spring 中可用，用于将列表数据转换为模型列表。[例子](http://java-sandbox.cloudfoundry.com/autopopulatinglist)

# backbone.js - 在此示例中，Backbone 的 require.js 依赖项在哪里解决？

> ID：12150724
> 
> 赞同：1
> 
> 时间：2012-08-27T22:57:20.653
> 
> 标签：backbone.js, requirejs

在 Addy Osmani 的 require.js + Backbone 的 ToDo MVC 示例中：[https](https://github.com/addyosmani/todomvc/blob/gh-pages/dependency-examples/backbone_require/js/main.js) ://github.com/addyosmani/todomvc/blob/gh-pages/dependency-examples/backbone_require/js/main.js ，他正在使用

```
Backbone.history.start() // line #31 
```

实际上不需要Backbone。这如何/为什么起作用？垫片是否启用此功能？还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:20:25.763

如果您查看代码，[view/app.js](https://github.com/addyosmani/todomvc/blob/gh-pages/dependency-examples/backbone_require/js/views/app.js)实际上需要 Backbone。

主干垫片正在导出**全局**主干变量。

如果没有其他模块实际上需要 shim，则不会加载它，因此将无法访问它。

您可以尝试删除 main.js 中的“视图/应用程序”要求，以亲自查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T01:30:29.383

正如@ChristiMihai 提到的，Backbone 创建了一个全局 Backbone 对象，正确。让我举一个例子，说明我在 Require.js / Backbone / Handlebars 应用程序中所做的事情：

首先，我在 Require config 中包含`<head>`：

```
var require_config = {
  baseUrl: "/javascripts",
  waitSeconds: 5,
  paths: {
    'cdnjs': 'http://ajax.cdnjs.com/ajax/libs',
    'aspnetcdn': 'http://ajax.aspnetcdn.com/ajax',
    'cloudflare': 'http://cdnjs.cloudflare.com/ajax/libs',
    'local': '/javascripts'
  }
}

if (typeof require !== 'undefined') {
  require.config(require_config);
} else {
  var require = require_config;
} 
```

之后，我启动了一个 require 模块，例如：

```
define([
  'app'
],
function() {
  console.log('Homepage module');
  /*

  ... this is the meat of your app...
  you can add other dependencies beside `app` too

  */
}); 
```

现在`app`是通过 baseUrl 解析的主要依赖项，`/javascripts/app.js`并按顺序包含所有必要的 deps，如下所示：

```
define([
  'order!cdnjs/json2/20110223/json2',
  'order!cloudflare/underscore.js/1.3.1/underscore-min',
  'order!cloudflare/backbone.js/0.9.2/backbone-min',
  'order!handlebars/handlebars-1.0.0.beta.6.min',
  'order!lib/ns',
  'bootstrap'
], function(){}); 
```

# regex - 匹配和替换多个 $variables

> ID：12150725
> 
> 赞同：1
> 
> 时间：2012-08-27T22:57:35.537
> 
> 标签：regex, perl

我正在尝试编写一个非常基本的 shell 到 python 转换器，我在替换变量时遇到了一些麻烦。例如，我想要：

```
echo $var1 $var2 $var3
echo $var1 $var2 $var3 $var4 
```

成为：

```
print var1, var2, var3
print var1, var2, var3, var4 
```

目前，它变成：

```
print var1, var2 var3
print var1, var2 var3, var4 
```

我的正则表达式是：

```
$string =~ s/(\$[a-z]+[a-z0-9]*)(\s+\S+)/$1,$2/gi; 
```

由于某种原因，即使设置了全局修饰符，它也不会再次将正则表达式应用于匹配字符串的第二部分。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:17:41.493

保持接近你的正则表达式，试试这个：

```
use strict;
use warnings;

my $string = '$var1 $var2 $var3 $var4$var5';

$string =~ s/\$([a-z][a-z0-9]*)\s*/$1, /gi;
$string =~ s/,\s*$//; #removing trailing comma
print $string . "\n"; 
```

**输出：**

```
var1, var2, var3, $var4 
```

或者我会简单地这样做，这可能会或可能不会与您可能拥有的其他一些东西一起使用。

```
s/\$(\w+)\s*/$1, /g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:38:51.457

使您的替换以变量是否出现在行尾为条件

```
$string =~ s{\$([a-z]+[a-z0-9]*)(\s*$)?}{ defined $2 ? $1 : "$1," }ge; 
```

对应的子`$2`模式是`(\s*$)?`。使`?`匹配成为可选的，因此`$2`仅当该模式匹配成功时才定义，也就是说，对于行上的最后一个变量——即使存在不可见的尾随空格也是如此。对于“内部”变量，在末尾附加一个逗号。否则，仅使用变量名即可。

例如

```
#! /usr/bin/env perl

use strict;
use warnings;

while (defined(my $string = <DATA>)) {
  $string =~ s{\$([a-z]+[a-z0-9]*)(\s*$)?}{ defined $2 ? $1 : "$1," }ge;
  $string =~ s/\becho\b/print/g;  # for demo only
  print $string, "\n";
}

__DATA__
echo $var1 $var2 $var3
echo $var1 $var2 $var3 $var4 
```

输出：

```
打印 var1、var2、var3
打印 var1、var2、var3、var4
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T23:43:24.657

您只需要将您的正则表达式修改为：

```
$string =~ s/\$([a-z][a-z0-9]*)(?:\s*|$)/$1, /gi; 
$string =~ s/,\s*$//; #courtesy Hameed 
```

非捕获组将确保变量以空格结尾，或者根本没有空格，或者位于行尾。

这也将匹配回声`$var1 $var2 $var3 $var4$var6`和输出`var1, var2, var3, var4, var5, var6`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T06:48:50.297

一旦它与 (\s+\S+) 匹配，正则表达式引擎已移动通过第二个变量。前瞻断言将允许它在不消耗字符串的情况下检查前面的内容

```
 $string =~ s{
   \$ 
   ( [a-z]+[a-z0-9]* )  # capture varname
   (?=\s+\S+)           # lookahead
 } {$1,}gix ; 
```

请注意，我既不匹配也不捕获 \s+S+ 因此无需将其作为 $2 包含在替换字符串中。/x 允许我将正则表达式隔开并添加添加注释。

注意 - 其他答案可能会更接近您想要做的事情。我只是在解释您关于不匹配第二个变量的具体查询。

# javascript - Explorer 9 上的 html5 视频缓存

> ID：12150727
> 
> 赞同：1
> 
> 时间：2012-08-27T22:57:59.593
> 
> 标签：javascript, html, internet-explorer, .htaccess, html5-video

我有一些`<video>`使用 javascript 动态创建和加载的 s，`document.createElement`然后我使用屏幕外画布对它们进行采样并弄乱它们。

在每个浏览器中都非常有趣并且运行良好....等待它...除了 IE9（惊喜）。

问题是：当我清除缓存并重新加载 IE 时，一切都很好，但是当视频被缓存时，IE 开始抱怨：

```
DOM Exception: SECURITY_ERR (18) 
```

我现在已经阅读了互联网上有关此的所有内容，基本上是 IE 很愚蠢，因为这个错误实际上是关于 CORS 的，这不可能是 CORS 问题

**所以问题：**

有没有办法可以使用 .htaccess 来强制 IE9（并且只有 IE9）来防止 IE9 缓存视频，或者我是否必须对视频文件名进行小马查询？

真的非常感谢！

**编辑：答案**

除了下面 FlavorScape 的回答之外，在对他的链接上的参考文献进行了一些试验之后，这段代码似乎可以工作：

```
BrowserMatchNoCase "MSIE" isIE

<IfDefine isIE>
    ExpiresByType video/ogg                 "access plus 0 seconds"
    ExpiresByType audio/ogg                 "access plus 0 seconds"
    ExpiresByType video/mp4                 "access plus 0 seconds"
    ExpiresByType video/webm                "access plus 0 seconds"
</IfDefine> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:19:02.910

当我访问我不想缓存的东西时，我通常会在文件名中添加一个查询字符串。

例如：

```
someVideo.mp4?poop=Math.Round( Math.random()*10000) 
```

您可以在服务器标头上设置 no-cache。见[参考](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

这是如何在 .htaccess [http://www.askapache.com/htaccess/apache-speed-cache-control.html](http://www.askapache.com/htaccess/apache-speed-cache-control.html)

```
Cache-Control   = "Cache-Control" ":" 1#cache-directive
    cache-directive = cache-request-directive
         | cache-response-directive
    cache-request-directive =
           "no-cache"                          ; Section 14.9.1
         | "no-store"                          ; Section 14.9.2
         | "max-age" "=" delta-seconds         ; Section 14.9.3, 14.9.4
         | "max-stale" [ "=" delta-seconds ]   ; Section 14.9.3
         | "min-fresh" "=" delta-seconds       ; Section 14.9.3
         | "no-transform"                      ; Section 14.9.5
         | "only-if-cached"                    ; Section 14.9.4
         | cache-extension                     ; Section 14.9.6
     cache-response-directive =
           "public"                               ; Section 14.9.1
         | "private" [ "=" <"> 1#field-name <"> ] ; Section 14.9.1
         | "no-cache" [ "=" <"> 1#field-name <"> ]; Section 14.9.1
         | "no-store"                             ; Section 14.9.2
         | "no-transform"                         ; Section 14.9.5
         | "must-revalidate"                      ; Section 14.9.4
         | "proxy-revalidate"                     ; Section 14.9.4
         | "max-age" "=" delta-seconds            ; Section 14.9.3
         | "s-maxage" "=" delta-seconds           ; Section 14.9.3
         | cache-extension                        ; Section 14.9.6
    cache-extension = token [ "=" ( token | quoted-string ) ] 
```

或者您可以尝试设置无缓存文档标题，但我认为这只适用于文档本身。

# javascript - 静音数据uri？

> ID：12150729
> 
> 赞同：5
> 
> 时间：2012-08-27T22:58:12.043
> 
> 标签：javascript, html, text, base64, data-uri

有谁知道将数据 uri 设置为有效静音的方法？我真的很想看看是否存在这样的东西！谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T23:11:21.893

A 0-second WAVE file:

```
data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAAABmYWN0BAAAAAAAAABkYXRhAAAAAA== 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T03:39:28.160

**我喜欢数据 uri，所以我这样做了：**

http://doiop.com/silent[DOT]mp3

**这指向**

http://tinyurl[DOT]com/silentmp3

**这指向**

```
data:audio/x-wav;base64,UklGRooWAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAAZGF0YWYWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 
```

**这是**

导出为 WAV 的 quicktime ：

```
52 49 46 46 8A 16 00 00 57 41 56 45 66 6D 74 20
10 00 00 00 01 00 01 00 22 56 00 00 44 AC 00 00
02 00 10 00 64 61 74 61 66 16 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 
```

**此命令的输出**

说 -o silent.aiff ""

**通过这个方便的页面返工**

[http://femalefaust.blogspot.com/p/blog-page.html](http://femalefaust.blogspot.com/p/blog-page.html)

**非常喜欢**

# javascript - 使用 ASP、javascript 和 Ajax 检查重复值

> ID：12150733
> 
> 赞同：0
> 
> 时间：2012-08-27T22:58:27.597
> 
> 标签：javascript, asp.net, sql, ajax

提交时，我必须检查发布到数据库的信息是否与表中已经存在的任何内容相匹配。如果它确实检测到重复，它将中断发布并提示用户已存在重复并允许他们更改数据以便他们可以重新提交。我目前正在使用 asp 和 javascript 将信息发布到数据库，但是已经阅读了这个 ajax 将是检查重复值的方法。顺便说一句，我不能使用 PHP :(。有没有人有一些很棒的资源或关于如何做到这一点的见解？感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:16:37.217

使用来自 javascript 的 Ajax Pagemothods 调用并检查数据库中的重复条目。这不会回发页面。尝试以下链接获取`pagemethods`示例

[http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX](http://aspalliance.com/1922_PageMethods_In_ASPNET_AJAX)

# php - “不同”ajax 调用引用的表单提交按钮

> ID：12150743
> 
> 赞同：2
> 
> 时间：2012-08-27T22:59:55.093
> 
> 标签：php, jquery, ajax, form-submit

我在 html“表单”中有两个提交按钮：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="ajax.js"></script>
<input type="text" name="field1" id="field1" />
<input type="text" name="field2" id="field2" />
<form id="form1" action="" method ="post">
<input type="submit" value="check data" id="checkdata" name="checkdata" /><p>
<input type="submit" value="download" id="download" name="download" /><p> 
```

我必须通过ajax调用从“同一页面”中的两个单独的“php”代码中获取按钮单击的查询结果。我有第一个按钮的脚本，但我无法为第二个按钮分配查询，该按钮必须引用另一个 php 代码：

```
$(document).ready(function(){
    $("#checkdata").click(function(){
        var field1 = $("#field1").val();
        var field2 = $("#field2").val();
            var datastr ='&field1=' + field1 + '&field2=' + field2;
            $("#response").css("display", "block");
            $("#response").html("setting parameters... ");
            $("#response").fadeIn("slow");
            setTimeout("send('"+datastr+"')",2000);
        return false;
    });
});
function send(datastr){
    $.ajax({    
        type: "POST",
        url: "some_php_code.php",
        data: datastr,
        cache: false,
        success: function(html){
        $("#response").fadeIn("slow");
        $("#response").html(html);
        setTimeout('$("#response").fadeOut("slow")',2000);
    }
    });
} 
```

你能给我一些提示吗？或者有没有其他方法可以做到这一点？

（我已经检查了你可能会提到我的所有相关问题。就像这个问题只与一个 ajax 调用有关 [jQuery 提交 ajax 表单和 2 个提交按钮](https://stackoverflow.com/questions/3275640/jquery-submit-ajax-form-with-2-submit-buttons)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:10:45.047

只需添加以下功能。

```
$(document).ready(function(){
    $("#download").click(function(){
        var field1 = $("#field1").val();
        var field2 = $("#field2").val();
            var datastr ='&field1=' + field1 + '&field2=' + field2;
            $("#response").css("display", "block");
            $("#response").html("setting parameters... ");
            $("#response").fadeIn("slow");
            setTimeout("send('"+datastr+"')",2000);
        return false;
    });
}); 
```

或更好：

```
 $(document).ready(function(){
        $("#checkdata").click(function(){
            SendData();
        });
        $("#download").click(function(){
            SendData();
        });
    });

function SendData() {

    var field1 = $("#field1").val();
    var field2 = $("#field2").val();
    var datastr ='&field1=' + field1 + '&field2=' + field2;
    $("#response").css("display", "block");
    $("#response").html("setting parameters... ");
    $("#response").fadeIn("slow");
    setTimeout("send('"+datastr+"')",2000);
    return false
} 
```

hth

# objective-c - 如何在我的 UIView 中放置一个小图像

> ID：12150747
> 
> 赞同：0
> 
> 时间：2012-08-27T23:00:27.517
> 
> 标签：objective-c, ios, xcode4

我想在 UIView 中放置一系列图像...我希望能够使用三个不同的 .png 文件（红色、黄色、绿色）作为状态指示器来更改每个图像的颜色。除了实际绘制矩形并填充它之外，还有更简单的方法吗？

研究工作：我用谷歌搜索并查看了 SO，没有发现任何与此相关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:10:49.597

有很多方法可以做到这一点。我认为最简单的方法是将 UIViews 作为**子视图**添加到您的主视图或您的父 UIView。

您可以设置视图的框架以及背景颜色。看到这个链接

[将uiview作为子视图添加到主视图](https://stackoverflow.com/questions/1426882/adding-uiview-as-a-subview-to-the-main-view)

您也可以使用图像，但由于它是纯色，因此当您可以以编程方式渲染颜色时使用图像需要大量额外的存储空间等。

如果是一系列矩形，您可以将 UIView 存储在某种数据结构中，以便在运行时动态更改颜色。如果您不移动它们，则在框架/几何中初始化，以便它们位于正确的位置，然后将它们作为数组或类似的成员访问。

如果你想为图像添加渐变，这是我发现的最好的东西：

[iPhone 上 UIView 和 UILabels 上的渐变](https://stackoverflow.com/questions/422066/gradients-on-uiview-and-uilabels-on-iphone/1931498#1931498)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:29:32.873

我想通了...我拿了一个 UIButton，将类型更改为“自定义”，调整大小（32 x 32）并根据情况以编程方式更改图像。

*   [按钮 setImage:<#(UIImage *)#> forState:<#(UIControlState)#>]

感谢你们俩让思维过程运行起来……：D

# java - 如何在 Java 中制作通用列表？

> ID：12150750
> 
> 赞同：0
> 
> 时间：2012-08-27T23:00:48.157
> 
> 标签：java, arrays, generics, arraylist

我希望重新发明轮子，并在 Java 中创建自己的通用数组支持列表类，类似于 ArrayList。是的，我知道这很愚蠢，但这是一种学术追求。问题是您无法实例化泛型类型的数组

```
public class MySuperCoolList<E> {
   E[] array;

   public MySuperCoolList<E> () {
      array = new E[10]; // ERROR: cannot do this!
   }
} 
```

这个问题肯定有解决方案，因为 Java 的 ArrayList 也在做同样的事情。问题是，怎么做？如何实例化泛型类型的数组`E`？它是如何在 ArrayList 中完成的（如果有人知道的话）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:05:38.977

> 它是如何在 ArrayList 中完成的（如果有人知道的话）？

它是开源的。看看[源代码`ArrayList`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java)：

```
/**
 * The array buffer into which the elements of the ArrayList are stored.
 * The capacity of the ArrayList is the length of this array buffer.
 */
private transient Object[] elementData; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:06:39.530

在这种情况下，您可能想使用 Array of Object Type ，因为对象类型可以容纳所有内容，代码如下：

```
public class MySuperCoolList<E> {
    Object[] array;

    public MySuperCoolList () {
       array = new Object[10];
    }

    public E get(int index){
       return (E) array[index];
    }

    public void put(int index,E val) {
      array[index] = val;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T23:12:02.260

```
public MySuperCoolList<E>(final Class<? extends E> type) {
  array = (E[]) Arrays.newInstance(type, 10);
} 
```

见[`Arrays.newInstance`](http://goo.gl/NaaPi)。这是如何`Arrays.copyOf`工作的。

我在[这里](http://ideone.com/ScgNX)放置了一个 PoC 。

```
int[] vals = (int[]) Array.newInstance(Integer.TYPE, 10);
vals[0] = 500;
System.out.println(vals);
System.out.println(vals.length);
System.out.println(Arrays.toString(vals)); 
```

如您所见，输出符合预期：

```
[I@fb53f6
10
[500, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

# iphone - 尝试将远程图像加载到表中但仍无法正确缓存

> ID：12150752
> 
> 赞同：0
> 
> 时间：2012-08-27T23:01:01.543
> 
> 标签：iphone, image, loading

我正在尝试将图像加载到表格中，但我仍然在闪烁。正在加载图像，但在滚动时会在下一个缩略图图像加载之前短暂闪烁。是的，知道 Apple 有一个示例和各种框架，但这是非常简单的代码，只是在加载下一个图像之前该死的闪烁。其他一切正常。谢谢！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"customCell";

CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil){
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:nil options:nil];

    for (id currentObject in topLevelObjects) {
        if ([currentObject isKindOfClass:[CustomCell class]]) {
            cell = (CustomCell *)currentObject;
            break;
        }
    }
}

NSString *myUrl = [[items objectAtIndex:indexPath.row] objectForKey:@"myUrl"];

NSURL *url = [NSURL URLWithString:url];

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
dispatch_async(queue, ^{
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];
    dispatch_sync(dispatch_get_main_queue(), ^{
        [[cell imageView] setImage:image];
        [cell setNeedsLayout];
    });
});

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:58:07.977

您正在使用`UITableView`. 这意味着您可以获得一个`dequeueReusableCellWithIdentifier`已经有图像集的单元格。所以首先你需要用`[[cell imageView] setImage:nil]`. 然后在调度块内，您无法确定单元格是否仍在屏幕上。您需要检查索引路径是否仍然相同，否则您会将图像设置为错误的单元格：

```
dispatch_async(queue, ^{
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];
    dispatch_sync(dispatch_get_main_queue(), ^{
        if ([[tableView indexPathForCell:cell] compare:indexPath] == NSOrderedSame) {
            [[cell imageView] setImage:image];
            [cell setNeedsLayout];
        }
// alternative:    
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        if (cell)
            cell.imageView.image = image;
    });
}); 
```

我建议使用`NSOperation`子类来加载远程图像而不是使用`dataWithContentsOfURL`- 然后您也可以在单元格离开屏幕时取消图像加载。还可以考虑使用图像缓存以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:38:49.100

我有一个类似的问题，您需要检查图像是否已加载。您当前的代码只是加载图像，但是如果单元格已经有图像怎么办？您不希望每次用户滚动表格时都执行此任务。

看看我问的问题。

[表视图滚动异步](https://stackoverflow.com/questions/11486828/table-view-scrolling-async)

# c# - 将 Windows 按键发送到应用程序

> ID：12150758
> 
> 赞同：4
> 
> 时间：2012-08-27T23:02:23.847
> 
> 标签：c#, .net, vb.net, keyboard-shortcuts, keyboard-events

> **可能重复：**
> [如何检测当前按下的键？](https://stackoverflow.com/questions/1100285/how-to-detect-the-currently-pressed-key)

**（编辑：对于它的价值，这不是重复的......不知道为什么会这样投票）**

我有一个小型计时器应用程序，我们在办公室使用它来跟踪项目花费的时间。有一个开始和停止按钮，以及一个项目和任务字段。当我们休息、吃午饭和其他事情时，我们会停止该项目的计时器，然后重新启动它。这是一项重复性的任务，通常涉及从其他几个窗口后面挖出窗口，然后在休息后也一样。

我想要做的是将 WindowKey+W 分配给工作计时器应用程序，让它不仅将计时器应用程序带到前面并聚焦它，而且让它切换开始/停止。

我已经尝试了许多搜索，但我似乎无法将示例范围缩小到我想要的范围内。我确实知道您可以打开 Windows 快捷方式的属性并分配一个快捷键来启动程序，并且（我猜？）如果您已经打开了该应用程序并且它被设置为只允许它的一个程序实例会把那个程序带到最前面？？？也许..

无论如何..但该方法不会接受 WindowsKey 作为有效的组合键。而且我不知道它是否可以以某种方式将该组合键传递给程序。

我很感激这里的任何帮助或指导！！

**编辑 - 答案更新**

谢谢@huadianz 的回答！我将您的代码转换为 VB：

```
Public Const MOD_WIN As Integer = &H8
Public Const KEY_W As Integer = &H57

<DllImport("user32.dll")> _
Public Shared Function RegisterHotKey(hWnd As IntPtr, id As Integer, fsModifiers As Integer, vlc As Integer) As Boolean
End Function

<DllImport("user32.dll")> _
Public Shared Function UnregisterHotKey(hWnd As IntPtr, id As Integer) As Boolean
End Function

Public Sub RegisterKeys()
    RegisterHotKey(Me.Handle, 1, MOD_WIN, KEY_W)
End Sub

Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
    MyBase.WndProc(m)

    If (m.Msg = &H312) Then
        Me.TopMost = True
        Me.PlayPauseTimer()
        Me.TopMost = False
    End If
End Sub 
```

有趣的是，`Me.BringToFront()`在 Win7 中的这种情况下，实际上并不会将应用程序置于最前面，`Me.Focus()`. 但是，`Me.TopMost = True`有效，但它具有使窗口始终位于顶部的次要效果。将其设置为`True`，切换计时器，然后将其设置回`False`效果很好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:35:32.167

如果您想要完整的操作系统集成，您可以使用 PInvoke 挂钩到内核输入函数。

您正在寻找的是 explorer.exe Windows API 函数，这里有详细描述：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)

使用 PInvoke，您可以调用此 C++ 函数

```
[DllImport("user32.dll")]
private static extern bool RegisterHotKey(IntPtr hWnd, int id, int fsModifiers, int vlc);
[DllImport("user32.dll")]
private static extern bool UnregisterHotKey(IntPtr hWnd, int id);

public const int MOD_WIN = 0x00000008;
public const int KEY_W = 0x00000057

public static void RegisterKeys()
{
    RegisterHotKey((IntPtr)this.Handle, 1, MOD_WIN, KEY_W);
}

protected override void WndProc(ref Message m)
{
    base.WndProc(ref m);

    if (m.Msg == 0x0312)
        this.Visible = !this.Visible;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:12:16.923

我还建议查看 Auto Hotkey：[http](http://www.autohotkey.com/) ://www.autohotkey.com/ 。如果您所追求的只是在按键上将窗口发送到前面，那么您可能会发现学习 AHK 并编写脚本来这样做（只有 1 或 2 行）比用 C# 或 VB 编写东西更快。

*编辑*关于自动按下按钮，如果它被设置为默认按钮，那么你可以发送回车键击给它。否则，您甚至可能需要向窗口发送鼠标单击。一旦你完成了第一部分，两者都不是特别困难。

`#W::MsgBox "This is a message box. You just need to use something like send to send keystrokes and other commands to the window you want to control, instead of the this message box."`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T23:07:23.173

您可以使用 Windows [SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)。如果您查看该链接，它会显示应用 ctrl、alt 或 shift 键的代码和语法。我想您可以将这些键发送到您的应用程序以模拟快捷键。

# php - 具有 2 个相同名称的关联数组？

> ID：12150759
> 
> 赞同：1
> 
> 时间：2012-08-27T23:02:39.453
> 
> 标签：php

我正在编写一个 PHP 脚本，该脚本会根据上传的 CSV 文件更新一些跟踪号。导入工作了一段时间，然后导出开始在值周围加上引号。我认为这会很好，但它开始拒绝文件。做了一些调试和 var_dumps，我发现了一个我以前从未见过的非常奇怪的情况——一个具有两个*同名*索引的关联数组。我运行了设置字段的代码（如下所示）并添加了一行：

```
$v['order_id'] = '119205'; 
```

运行该行后，var_dump 如下：

```
array(15) {
  ["order_id"]=>
  string(6) "119205"
  ["Tracking Number"]=>
  string(22) "6735675476254654756"
  ["Postage"]=>
  string(4) "1.64"
  ["order_id"]=>
  string(6) "119205"
} 
```

为简洁起见，删除了一些字段。如您所见，有两个`["order_id"]`索引。这怎么可能？

这是设置上面转储的数组值的代码：

```
$v = array();
    foreach ($map as $k => $n) {
    $v[$n] = @$data[$k];
} 
```

`$map`作为 CSV 标题行。尝试在`$v['order_id']`不运行该`$v['order_id'] = '119205';`行的情况下进行引用会导致此错误：

```
Notice:  Undefined index: order_id in /dir/to/php/file/php_file.php</b> on line 29 
```

`$v`手动设置索引按预期工作，毫无问题地提取其余数据。

**编辑：**

转储 array_keys 导致：

```
[0]=>
string(11) "order_id" 
```

和：

```
[14]=>
string(8) "order_id" 
```

使第一个*三个字符*更长。

var_export 仍然产生相同的索引。

我怎样才能摆脱这些看不见的字符？我已经`$v[trim($n)] = @$data[$k];`在`foreach()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:06:01.553

试试`var_dump(array_keys($v))`。找到看起来像的键`order_id`并确保字符串的长度正好是 8。我怀疑那里可能有一个 NUL 字符，这会使它的长度为 9 并导致它不响应`order_id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:09:22.900

引用：

> 在 的输出中`var_dump()`，空字节不可见。

从技术上讲，您不能在数组中的 PHP 中有两次相同的键。可能是`var_dump`这里没有给出正确的键（例如，可能删除了一些空字符或其他不可显示的字符）。

相反，您可能想检查发生了什么：

```
var_dump(array_keys($data)); 
```

也许它有帮助，以下是一个相关的问题，它演示了何时`var_dump`隐藏一些信息：

*   [PHP中的数组到对象和对象到数组 - 有趣的行为](https://stackoverflow.com/questions/6325447/array-to-object-and-object-to-array-in-php-interesting-behaviour/6325631#6325631)

# android - 将 android:windowBackground 设置为 @null 会导致滚动涂抹？

> ID：12150761
> 
> 赞同：8
> 
> 时间：2012-08-27T23:03:16.067
> 
> 标签：android, android-adapterview

我正在使用 sherlock 操作栏库来支持许多设备。我有一个`viewPager`有 3 个片段：

*   一个和一个`listView`，每个项目都有一个`textView`和一个`imageView`
*   第二个有一个`gridView`，每个项目都有一个`textView`和一个`imageView`
*   第三个现在只有一个`textView`。

正如我在 google IO 视频中听到的那样（并且因为 Lint 告诉我），建议将下一个样式用于所有活动：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

  <style name="AppTheme" parent="@style/Theme.Sherlock">
    <item name="android:windowBackground">@null</item>
  </style>

</resources> 
```

这在许多设备上都对我有用。

然而，在模拟器上，使用版本 2.3.3 和 Galaxy nexus 上，当我滚动（或者其中的`viewPager`任何一个`adapterViews`）时，一切都变得模糊，所以我得到了很多白色像素，好像没有刷新一样。

我什至尝试为`android:cacheColorHint="#00000000"`我所有的 adapterViews 设置，但它仍然会发生。

到底是怎么回事？我该如何解决这个问题？我喜欢添加上述内容，因为它消除了每个应用程序出现的 Galaxy S3 丑陋的渐变背景。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T01:31:36.137

如果你用其他东西覆盖它，你应该只将背景设置为 nul。要么： - 在主题中将背景设置为 null 并在布局中添加新背景，或者 - 将主题中的背景设置为所需的颜色/图像。

# jquery - 将 jquery 点击事件绑定到设置中的 id

> ID：12150768
> 
> 赞同：0
> 
> 时间：2012-08-27T23:04:53.473
> 
> 标签：jquery

我试图为我在命名空间文件中的设置创建一个 jquery 绑定

我的命名空间设置是这样的：

```
abc.settings = {
   saveBtnId : "#saveitem",
   cancelBtnId : "#cancelItem"
}; 
```

ETC

我正在尝试这个：

```
 $(abc.settings.saveBtnId , abc.settings.cancelBtnId).bind("click", function(e) {
             e.preventDefault();
             var type = $(this).attr("data-id");
             alert(type);
   }); 
```

问题是，我没有收到任何错误（如预期的那样），但我使用来自 CDN 的最新 jquery 也没有收到任何绑定。

现在如果我在这里有点跛脚，你将不得不原谅我，但现在已经很晚了，大脑中的能量正在耗尽，但一如既往地感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:07:11.297

尝试这个：

```
$(abc.settings.saveBtnId + "," + abc.settings.cancelBtnId).bind(... 
```

您想要的是一个计算结果为的选择器`"#saveitem,#cancelItem"`，因此您需要用逗号将变量连接在一起。

您当前正在做的是将两个单独的参数传递给`$()`看起来像是`$(selector, context)`语法的类型，除了`context`应该是 DOM 元素、文档或 jQuery 对象，而不是第二个字符串。有关要`$()`执行的参数的更多信息，请查看[doco](http://api.jquery.com/jquery/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:14:23.387

这应该这样做：

```
$.each(['saveBtnId', 'cancelBtnId'], function(v, i) {
    $(abc.settings[v]).on('click', function() {
       ...
    });
}); 
```

它使用一个字符串数组（可能已预先分配给另一个变量）并从您的命名空间中找到适当的属性并绑定单击处理程序。

或者，要保留您的命名空间属性：

```
$.each([abc.settings.saveBtnId, abc.settings.cancelBtnId], function() {
    $(this).on('click', function() {
       ...
    });
}); 
```

# c - C 标准库的综合开源测试套件

> ID：12150769
> 
> 赞同：10
> 
> 时间：2012-08-27T23:05:16.113
> 
> 标签：c, unit-testing, open-source, standard-library, libc

我正在寻找 C 标准库的测试套件（主要用于不接触“外部世界”的算法，so `strcpy()`, `memcmp()`, `itoa()`& likes）。

我尝试下载 GCC 源代码，但它们非常大，我很难找到可以在其中重复使用的任何东西......

（需要明确的是，这个问题是关于 ANSI C 标准库，而不是 POSIX 或其他。另外，我希望测试相当可移植。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:51:46.487

[公共领域的 C 库](http://pdclib.e43.eu/)有非常简单的测试用例，它们嵌入在每个源代码文件中。例如：[memcpy](http://hg.pdclib.e43.eu/pdclib/src/2f16e6c01b73/functions/string/memcpy.c)，[strtol](http://hg.pdclib.e43.eu/pdclib/src/2f16e6c01b73/functions/stdlib/strtol.c)

[Newlib](http://sourceware.org/newlib/)将测试用例组织为一个测试套件。它们更复杂，但几乎没有涵盖所有功能：[memcpy](http://sourceware.org/cgi-bin/cvsweb.cgi/src/newlib/testsuite/newlib.string/memcpy-1.c?rev=1.1&content-type=text/x-cvsweb-markup&cvsroot=src)

# xml - 如何将数据库查询的行转换为 XML 文件？

> ID：12150775
> 
> 赞同：3
> 
> 时间：2012-08-27T23:06:16.613
> 
> 标签：xml, database, delphi, delphi-xe2

我正在开发一个 Delphi 应用程序，该应用程序需要从一段时间的工作中提取行并将它们转换为单个 XML 文件，以便上传到第 3 方 Web 服务。

有没有可用的组件或库来做到这一点？如果不是，那么构建 DB2XML 转换器的最佳代码方法是什么？

我注意到大多数 XML 问题都是关于如何将其转换为另一种类型的数据。

注意：数据库将是 MySQL 或 Firebird。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T03:36:45.190

您可以使用该[`TDataSetProvider`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.Provider.TDataSetProvider)组件来填充[`TClientDataSet`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DBClient.TClientDataSet)TDataSet 内容，然后使用该[`SaveToFile`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DBClient.TCustomClientDataSet.SaveToFile)方法创建 xml 文件。

试试这个样本

```
procedure DataSetToXML(DataSet  : TDataSet; const FileName:string);
var
 LProvider : TDataSetProvider;
 LClient   : TClientDataSet;
begin
   LProvider:=TDataSetProvider.Create(nil);
   try
     LProvider.DataSet:=DataSet;
     LClient:=TClientDataSet.Create(nil);
     try
       DataSet.DisableControls;
       try
        if not DataSet.Active then
          DataSet.Active:=True;
        LClient.SetProvider(LProvider);
        LClient.Active:=True;
        LClient.SaveToFile(FileName, dfXMLUTF8);
       finally
         DataSet.EnableControls;
       end;
     finally
       LClient.Free;
     end;
   finally
     LProvider.Free;
   end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:32:54.603

您可以将表放在 TClientDataSet 中，然后使用 XMLData 属性导出为 XML。

# cocoa - 如何使用 Cocoa (Mac) 绘制两个 NSOpenGLViews

> ID：12150776
> 
> 赞同：1
> 
> 时间：2012-08-27T23:06:31.973
> 
> 标签：cocoa, opengl, nsopenglview

我想使用 XCode 在 Cocoa App 中绘制两个 NSOpenGLViews，每个视图中都有不同的东西。我想我必须使用 NSOpenGLContext 和 SetView 方法。但我还没有找到如何准确地使用它。我必须在哪里使用这个电话？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T02:05:19.467

听起来您需要使用的是模型/视图/控制器模式。您应该将数据（中的变量`MyOpenGLView1`）放入模型对象中。然后，两个 OpenGL 视图都应该访问该模型对象。这是将应用程序的功能从演示文稿中分离出来的常用方法。

# domain-driven-design - 如果我使用域事件，我应该使用存储库模式添加项目还是创建事件？

> ID：12150778
> 
> 赞同：1
> 
> 时间：2012-08-27T23:06:55.360
> 
> 标签：domain-driven-design, repository-pattern, ddd-repositories, domain-events

我正在尝试理解[Udi Dahan 说明的](http://www.udidahan.com/2009/06/14/domain-events-salvation/)关于在特定情况下添加新域实体的域事件模式。

现在通常使用实体创建它们，然后通过存储库添加它们。我想我还会这样做吗？

我的例子是我们通常将资产添加到系统中。像这样：

```
 var asset= new Asset();
/*bunch of prop setting*/
 _assetRepository.Add(asset); 
```

然而，资产创建是我们希望遵循某些流程的结果。因此，开发人员建议我们不再需要这样做，因为它可以由域事件处理：

```
var asset= new Asset();
   /*bunch of prop setting*/
asset.Create(location); 
```

现在 create 方法将引发一个事件并由一个 create 事件处理程序处理，该事件处理程序基本上只是将其插入到 repo 中，并做一些其他的事情给创建位置的仓库经理发送电子邮件等。

然而，在资产上创建事件对我来说看起来非常活跃。然而，在领域中，人们谈论正在创建的新资产。所以我们不确定。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T05:49:14.683

我已经为这个问题苦苦挣扎了很长时间。但没有好的解决办法。我认为，

*   域事件不应在其所属的聚合成功持久化之前发布或处理

*   **发布任何领域**事件不是应用层的责任

到目前为止，我认为最好的方法是利用 AOP。我们可以在聚合中“触发”事件，但不是立即分派它们，而是将其保存在队列中，并在相应的事务成功后真正分派它。
我们可以定义一个自定义的@Transactional 拦截器来实现这一点，从而使应用服务不知道任何“事件发布”的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:11:36.337

created 域事件应该在`Asset`类的构造函数中引发，因为那是创建该特定实体的时间。在您当前的实现中，这将是错误的，因为 Asset 实体提供了无参数构造函数。相反，创建一个具有所有必需属性作为参数的构造函数，从而防止创建处于不一致状态的资产实体。它可能看起来像这样：

```
public class Asset
{
  public Asset(string prop1, decimal prop2) 
  {
    this.Prop1 = prop1;
    this.Prop2 = prop2;
    DomainEvents.Raise(new AssetCreated(prop1, prop2));
  }

  public string Id { get; private set; }
  public string Prop1 { get; private set; }
  public decimal Prop2 { get; private set; }
} 
```

创建实体后，您仍然必须使用存储库来持久化实体。这可能是有问题的，因为处理程序`AssetCreated`无法引用其 ID，因为在收到通知时尚未分配它。如果使用事件溯源，则创建事件将显式存储在底层事件存储中。

# ruby-on-rails - 使用单个控制器从四个模型中收集完全相同的数据的非冗余方式？

> ID：12150781
> 
> 赞同：0
> 
> 时间：2012-08-27T23:07:21.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model, controller

我只是不想复制和粘贴。一定有更好的方法。

我有一个控制器，它使用单个模型将一些数据收集到两个数组中。然后我有一个在图中使用这些数组的单一视图（index.html.erb）。这很简单。这是整个视图。显然，来自控制器的数组是@buildStepArrays 和@buildDates。

```
<% chart = GChart.line(:title=>"Build Times", :size=>"1000x300", :data=>@buildStepArrays, :colors=>@colors, :legend=>@buildDates) %>
<% chart.axis(:left) %>
<%= image_tag chart.to_url %> 
```

控制器在这里

```
def index
    # These three arrays should be the same size
    @buildStepArrays = []
    @buildDates = []
    @totalBuildTimes = []  

    @latestId = Env2.last().BuildId
    @latestId = @latestId - 1

    for buildNumber in (@latestId-4)..@latestId
        @build = Env2.find_all_by_BuildId(buildNumber)
        totalTime = 0
        @currentBuildTimes = []
        for step in @build
            @currentBuildTimes << step.Minutes
            totalTime += step.Minutes.to_i
        end
        @buildStepArrays << @currentBuildTimes.map { |e| e.nil? ? 0 : e }
        @totalBuildTimes << totalTime
        @buildDates << @build.last().Created
        @colors = [["FF1300"], ["FF8C00"], ["FFFF00"], ["00CC00"], ["1240AB"]]
    end
end 
```

我想做的是从四个模型（四个不同数据库中的同一张表）中收集**完全相同的**数据，而不仅仅是一个，然后在视图上显示四个图表而不是一个。我对 Rails 知之甚少，不知道如何正确地做到这一点。我现在唯一的想法是将代码复制并粘贴到我的控制器中四次，然后更改变量名称。这太可怕了。我应该做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:23:06.873

尝试这个

控制器

```
def index
  @data = [Env1, Env2, Env3].map do |model|
    data = Hash.new
    data[:title] = "Build Times"
    data[:buildStepArrays] = []
    data[:buildDates] = []
    data[:totalBuildTimes] = []  

    data[:latestId] = model.last().BuildId
    data[:latestId] = data[:latestId] - 1

    for buildNumber in (data[:latestId]-4)..data[:latestId]
      data[:build] = model.find_all_by_BuildId(buildNumber)
      totalTime = 0
      data[:currentBuildTimes] = []
      for step in data[:build]
        data[:currentBuildTimes] << step.Minutes
        totalTime += step.Minutes.to_i
      end
      data[:buildStepArrays] << data[:currentBuildTimes].map { |e| e.nil? ? 0 : e }
      data[:totalBuildTimes] << totalTime
      data[:buildDates] << data[:build].last().Created
      data[:colors] = [["FF1300"], ["FF8C00"], ["FFFF00"], ["00CC00"], ["1240AB"]]
    end
  end
end 
```

看法

```
<% @data.each do |data| %>
  <% chart = GChart.line(:title=>data[:title], :size=>"1000x300", :data=>data[:buildStepArrays], :colors=>data[:colors], :legend=>data[:buildDates]) %>
  <% chart.axis(:left) %>
  <%= image_tag chart.to_url %>
<% end %> 
```

* * *

我只是将所有内容都放入哈希中，但您最好将需要在视图中渲染的内容放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:58:41.647

实现此目的的一种方法是创建包含重复代码的模块，在您的情况下，至少重复四次。你要做的仍然是为每个模型创建控制器文件......

```
class ModelAController < ApplicationController
  include BasicActions
  before_filter get_model      

  def get_model
    @model = self.class.to_s.gsub("Controller").classify
  end
end 
```

您会注意到 'get_model' 方法，这很重要，因为它将@model 变量设置为保存您正在处理的类。我没有确认确切的代码来获取 coass 名称文本，所以你必须玩弄它。你可能会在你的模块中使用@model。

这是一个骨骼模块：

```
module BasicActions

  def some_method
    ...
  end 
```

对于呈现的每个操作，您仍然需要所有相关视图，但是有一些方法可以将其限制为一组视图......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T00:18:40.990

最优雅的解决方案可能是使用演示者。Presenters 可以帮助您清理视图中的逻辑或清理控制器中的太多实例变量。后者似乎是这里的情况。

使用演示者可以让您：

*   优化数据库查询，在您的情况下从所有四个数据库执行单个查询。
*   通过允许您直接为演示者中的操作编写测试，可以更轻松地测试您的代码。

如果不了解更多有关您的应用程序的信息，很难准确地说出您将如何构建演示者，但我可以为您提供一些带有样机代码的通用指南，只是为了向您展示它是如何工作的。

与其简单地从四个不同的模型中定义实例变量，不如在控制器中定义一个类似于以下的新操作：

/app/controllers/charts_controller.rb

```
...
def show
    @data = ChartPresenter.new(argument)
end
... 
```

然后，您将在新目录中定义新的演示者类，并使用与视图中所需的输出相对应的操作：

/app/presenters/chart_presenter.rb

```
class ChartPresenter

    def initialize(data)
        @data = data
    end

    def method_name
        ...
    end

end 
```

/app/views/chart.html.erb

```
...
<%= @data.method_name %>
... 
```

### 参考

*   [RailsCasts #287 - 从头开始​​的演示者](http://railscasts.com/episodes/287-presenters-from-scratch)- 仅适用于 RailsCasts Pro 订阅者
*   [简化您的 Ruby on Rails 代码：Presenter 模式，单元插件](http://kpumuk.info/ruby-on-rails/simplifying-your-ruby-on-rails-code/)- 它来自 2009 年，但可能有用。

### 附言

大多数教程会告诉你编辑你`config/application.rb`的设置`config.autoload_paths`到你的演示者目录。但是，在 Rails 3 中，**这不再是必需的**，因为下面的所有内容`/app/*`都会自动添加。

# html - 如果选中收音机，则标签周围的边框

> ID：12150784
> 
> 赞同：1
> 
> 时间：2012-08-27T23:07:53.687
> 
> 标签：html, css

> **可能重复：**
> [如果选中复选框，则突出显示标签 (html/css)](https://stackoverflow.com/questions/5275857/highlight-label-if-checkbox-is-checked-html-css)

如果选中收音机，我希望标签获得红色边框。

到目前为止的代码：

**HTML：**

```
<center style="margin-top:20px;">

<label class="big">
This is a box 1
<input name="radio-group1" type="radio" />
</label>

<br/>

<label class="big">
This is a box 2
<input name="radio-group1" type="radio" class='sex' />
</label>

</center> 
```

**CSS：**

```
.big {
    display:block;
    width:100px;
    height:100px;
    background-color:gainsboro;
    cursor:pointer;
}

.big:hover {

    border:1px solid blue;
} 
```

请不要 JS 解决方案。我一直在尝试使用兄弟和儿童选择器，但没有成功。

> **JSFIDDLE：http: [//jsfiddle.net/QqVCu/10/](http://jsfiddle.net/QqVCu/10/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:09:29.107

您可以使用[`:checked`selector](http://reference.sitepoint.com/css/pseudoclass-checked)，但这仅适用于复选框本身。否则[没有办法](https://stackoverflow.com/a/4059479/917077)在纯 CSS 中做到这一点 - 你将不得不求助于 JavaScript（我确实意识到你说过你想避免 - 但纯 CSS 不会这样做）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:16:48.047

您必须重新排列 HTML，以便 label/red-border-element 出现在收音机之后。

# HTML

```
<center style="margin-top:20px;">

<div class="big">
    <input id="box1" name="radio-group1" type="radio" />
    <label for="box1">This is a box 1</label>
</div >

<br/>

<div class="big">
    <input id="box2" name="radio-group1" type="radio" />
    <label for="box2">This is a box 2</label>
</div >

</center> 
```

# CSS

```
.big {
    display:block;
    width:100px;
    height:100px;
    background-color:gainsboro;
    cursor:pointer;
    position: relative;
}

.big:hover {

    border:1px solid blue;
}

label {
    width: 100%;
    height: 100%;
    display: block;
}

input[type="radio"] {
    position: absolute;
    top: 20px;
    left: 50%;
}

input[type="radio"]:checked + label {
    border: red 1px solid;
}
​ 
```

[http://jsfiddle.net/QqVCu/12/](http://jsfiddle.net/QqVCu/12/)

但它开始变得奇怪了。一点 javascript 不会受到伤害。

编辑：[这个版本更干净一些](http://jsfiddle.net/T7ALB/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T23:45:15.723

您正在尝试的内容对于您的 html 的当前结构是不可能的。没有父选择器之类的东西。但是有一个兄弟选择器，它可以用来完成你所追求的。首先，您必须将 html 重组为如下内容：

```
<div>      
    <input name="radio-group1" id="box1" type="radio" />
    <label class="big" for="box1">
    This is a box 1</label>   
</div>

<div >    
    <input name="radio-group1" id="box2" type="radio" class='sex' /> 
    <label class="big" for="box2" >
    This is a box 2</label>
</div> 
```

我制作了标签和输入兄弟姐妹而不是父/子。由于它们的 id 和属性，它们仍然可以正常工作。我还更改了他们的顺序，以便能够使用下一个兄弟选择器。额外的 div 需要做一些绝对定位，以按照您在小提琴中的相同顺序将它们放回原处。

接下来我添加了几行css。真正的魔法发生在这里：

```
div input:checked+label  {
    border: 1px solid red;   
} 
```

这将选择一个输入的所有“下一个兄弟”，该输入被检查并且有一个 div 作为父级。你可以进一步微调它只在收音机上工作，实际上我会在包装器 div 中添加一个类，但这只是一个“概念证明”。我添加的其余 css 只是一些定位，以模仿您在示例中的布局。这也需要一些微调。

工作示例在这里：http: [//jsfiddle.net/QqVCu/14/](http://jsfiddle.net/QqVCu/14/)

# android - 未应用相对布局重力？

> ID：12150785
> 
> 赞同：10
> 
> 时间：2012-08-27T23:08:10.390
> 
> 标签：android, android-layout, android-widget

我有一个具有以下布局的活动：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/testlayoutOverlays"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/testlayoutMain"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/testlayout_bottom"
        android:layout_width="fill_parent"
        android:layout_height="62dp"
        android:background="#122334" >

        <ImageView
            android:id="@+id/testbtnBlock"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_alignParentLeft="true"
            android:layout_gravity="left|center_vertical"
            android:contentDescription="Test1"
            android:padding="@dimen/padding_medium"
            android:src="@drawable/btnblock" />

        <TextView
            android:id="@+id/testtxtZoomPan"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/testbtnX"
            android:layout_toRightOf="@+id/testbtnBlock"
            android:gravity="center_horizontal"
            android:text="@string/txtZoomPan"
            android:textColor="#FFFFFF" />

        <ImageView
            android:id="@+id/testbtnX"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_alignParentRight="true"
            android:layout_gravity="right|center_vertical"
            android:contentDescription="Test2"
            android:padding="@dimen/padding_medium"
            android:src="@drawable/btnx" />
    </RelativeLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/testlayoutPuzzleInfo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:orientation="horizontal" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@+id/testlayoutChronoErrors"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <Chronometer
                android:id="@+id/testchronometer"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:format="@string/chronometer_initial_format"
                android:gravity="center" />

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/testlayoutErrors"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <ImageView
                    android:layout_width="1px"
                    android:layout_height="20dp" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

</RelativeLayout> 
```

和以下代码：

```
package minmaxdev.android.picrossanywhere;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Gravity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.support.v4.app.NavUtils;

public class TestActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);

    // Capture our button from layout
    ImageView button = (ImageView) findViewById(R.id.testbtnBlock);
    // Register the onClick listener with the implementation above
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            RelativeLayout rv = (RelativeLayout) findViewById(R.id.testlayoutOverlays);
            rv.setGravity(Gravity.CENTER);

            Button btnRetry = new Button(TestActivity.this);
            btnRetry.setId(R.id.btnRetry);
            btnRetry.setBackgroundResource(R.drawable.btnselector);
            RelativeLayout.LayoutParams prmBtn = new RelativeLayout.LayoutParams(Util.DPsToPixels(200, getResources()), Util.DPsToPixels(40, getResources()));
            prmBtn.setMargins(0, 120, 0, 0);
            btnRetry.setLayoutParams(prmBtn);
            // btnRetry.setGravity(Gravity.CENTER_HORIZONTAL);
            btnRetry.setText("Retry");
            btnRetry.setOnClickListener(new ImageView.OnClickListener() {
                public void onClick(View v) {
                    Intent intent = getIntent();
                    finish();
                    startActivity(intent);
                }
            });
            rv.addView(btnRetry);
        }

    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_test, menu);
    return true;
}
} 
```

我想知道：为什么我的动态创建的 Button（命名`btnRetry`）没有出现在屏幕的中心，因为我将父 RelativeLayout 重力设置为 center with `rv.setGravity(Gravity.CENTER)`？

非常感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T23:13:26.597

答案很简单。Gravity 适用于内容， layout_gravity 适用于使用它的视图。来源基本上：[https ://stackoverflow.com/a/3482757/180538](https://stackoverflow.com/a/3482757/180538)

尝试使用[LayoutParams](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)`addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE);`

回答您对重力的理解：您是对的，但我想[文档](http://developer.android.com/reference/android/widget/RelativeLayout.html#setGravity%28int%29)中的这些信息很重要：

> 请注意，由于 RelativeLayout 认为每个子项相对于彼此的定位很重要，因此设置重力会影响所有子项在父项中作为单个单元的定位。这发生在孩子已经相对定位之后。

我目前无法测试您的布局，但我的猜测是应用重力的时间不会产生预期的结果。

就我个人而言，我只会在 LinearLayouts 和`centerInParent`RelativeLayouts 中使用重力。

# ios5 - 自定义UITabBar中的More UIBarButtonItem

> ID：12150788
> 
> 赞同：1
> 
> 时间：2012-08-27T23:08:57.547
> 
> 标签：ios5, customization, uitabbar, uitabbaritem

由于 iOS 5 Apple 提供了一个 API 来自定义`UITabBarItems`in`UITabBar`对象。我特指以下选择器：

`setFinishedSelectedImage:withFinishedUnselectedImage:`

这一切都适用于常规按钮，但我似乎无法自定义“更多”按钮以匹配其他按钮的样式。这就是我正在做的事情：

```
tabBarController.viewControllers = tabBarControllerArray;
    tabBarController.moreNavigationController.navigationBar.tintColor = [UIColor blackColor];
    UITabBarItem *more = tabBarController.moreNavigationController.tabBarItem;
     if ([more respondsToSelector:@selector(setFinishedSelectedImage:withFinishedUnselectedImage:)]){
        [more setFinishedSelectedImage:[UIImage imageNamed:@"BarIcon-More.png"]
           withFinishedUnselectedImage:[UIImage imageNamed:@"BarIcon-More.png"]
         ];
    } else {
        more.image = [UIImage imageNamed:@"BarIcon-More.png"];
    } 
```

结果如下，它没有拾取我自定义的更多图像。

![未激活的更多按钮](../Images/1f10f6e4ba5670e7b1fdeb472f77b890.png) ![丑陋的活动更多按钮](../Images/23165cd9c08206fcd9940a5e70719682.png)

我见过很多技巧来替换更多按钮，但是必须有更好的方法来做到这一点，对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T20:02:40.107

解决方案很愚蠢。

我认为`UITabBarItems`in`moreNavigationController`是只读的，但事实并非如此。所以只需执行以下操作：

```
tabBarController.moreNavigationController.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"More" image:[UIImage imageNamed:@"BarIcon-More.png"] tag:0]; 
```

并且与上面相同的自定义代码有效。

# jpa - 解析查询的语法错误 (JPA)

> ID：12150790
> 
> 赞同：1
> 
> 时间：2012-08-27T23:09:10.970
> 
> 标签：jpa, jpql

我正在尝试使用以下代码

```
Query query;
query = entityManager.createQuery("SELECT g.name FROM group g INNER JOIN user_group ug INNER JOIN user u ON u.id = ug.userid AND ug.groupoid = g.id AND u.name = ?1 AND u.password = ?2");
query.setParameter(1, user.getName());
query.setParameter(2, user.getPassword());

Object result = (Object) query.getSingleResult();
String name = (String) result; 
```

当我运行代码时出现以下异常

```
Caused by: Exception [EclipseLink-8023] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Syntax error parsing the query [SELECT g.name FROM group g INNER JOIN user_group ug INNER JOIN user u ON u.id = ug.userid AND ug.groupoid = g.id AND u.name = ?1 AND u.password = ?2].
Internal Exception: org.eclipse.persistence.internal.libraries.antlr.runtime.EarlyExitException
    at org.eclipse.persistence.exceptions.JPQLException.syntaxError(JPQLException.java:352)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.handleRecognitionException(JPQLParser.java:354)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.addError(JPQLParser.java:246)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.reportError(JPQLParser.java:363)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.joinAssociationPathExpression(JPQLParser.java:2746)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.join(JPQLParser.java:2364)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.identificationVariableDeclaration(JPQLParser.java:2179)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.fromClause(JPQLParser.java:2043)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectStatement(JPQLParser.java:364)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.document(JPQLParser.java:281)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.parse(JPQLParser.java:134)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.buildParseTree(JPQLParser.java:95)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:215)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:190)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:142)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:126)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1475)
    ... 71 more 
```

当我在 mysql 控制台上运行 sql 代码时，它可以工作。我想我没有正确执行 JPQL。

有谁知道如何进行正确的查询？

编辑：我的小组课程是：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package model.entities;

import java.io.Serializable;
import java.util.Collection;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

/**
 *
 * @author Felipe
 */
@Entity
@Table(name = &quot;grupo&quot;)
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = &quot;Grupo.findAll&quot;, query = &quot;SELECT g FROM Grupo g&quot;),
    @NamedQuery(name = &quot;Grupo.findById&quot;, query = &quot;SELECT g FROM Grupo g WHERE g.id = :id&quot;),
    @NamedQuery(name = &quot;Grupo.findByNome&quot;, query = &quot;SELECT g FROM Grupo g WHERE g.nome = :nome&quot;)})
public class Grupo implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = &quot;Id&quot;)
    private Integer id;
    @Size(max = 255)
    @Column(name = &quot;Nome&quot;)
    private String nome;
    @JoinTable(name = &quot;usuario_grupo&quot;, joinColumns = {
        @JoinColumn(name = &quot;GrupoID&quot;, referencedColumnName = &quot;Id&quot;)}, inverseJoinColumns = {
        @JoinColumn(name = &quot;UsuarioID&quot;, referencedColumnName = &quot;Id&quot;)})
    @ManyToMany(fetch = FetchType.EAGER)
    private Collection&lt;Usuario&gt; usuarioCollection;

    public Grupo() {
    }

    public Grupo(Integer id) {
        this.id = id;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getNome() {
        return nome;
    }

    public void setNome(String nome) {
        this.nome = nome;
    }

    @XmlTransient
    public Collection&lt;Usuario&gt; getUsuarioCollection() {
        return usuarioCollection;
    }

    public void setUsuarioCollection(Collection&lt;Usuario&gt; usuarioCollection) {
        this.usuarioCollection = usuarioCollection;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Grupo)) {
            return false;
        }
        Grupo other = (Grupo) object;
        if ((this.id == null &amp;&amp; other.id != null) || (this.id != null &amp;&amp; !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return &quot;model.entities.Grupo[ id=&quot; + id + &quot; ]&quot;;
    }

} 
```

我的用户类是：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package model.entities;

import java.io.Serializable;
import java.util.Collection;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.ManyToMany;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

/**
 *
 * @author Felipe
 */
@Entity
@Table(name = &quot;usuario&quot;)
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = &quot;Usuario.findAll&quot;, query = &quot;SELECT u FROM Usuario u&quot;),
    @NamedQuery(name = &quot;Usuario.findById&quot;, query = &quot;SELECT u FROM Usuario u WHERE u.id = :id&quot;),
    @NamedQuery(name = &quot;Usuario.findBySenha&quot;, query = &quot;SELECT u FROM Usuario u WHERE u.senha = :senha&quot;),
    @NamedQuery(name = &quot;Usuario.findByNome&quot;, query = &quot;SELECT u FROM Usuario u WHERE u.nome = :nome&quot;)})
public class Usuario implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = &quot;Id&quot;)
    private Integer id;
    @Size(max = 255)
    @Column(name = &quot;Senha&quot;)
    private String senha;
    @Size(max = 255)
    @Column(name = &quot;Nome&quot;)
    private String nome;
    @ManyToMany(mappedBy = &quot;usuarioCollection&quot;, fetch = FetchType.EAGER)
    private Collection&lt;Grupo&gt; grupoCollection;

    public Usuario() {
    }

    public Usuario(Integer id) {
        this.id = id;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getSenha() {
        return senha;
    }

    public void setSenha(String senha) {
        this.senha = senha;
    }

    public String getNome() {
        return nome;
    }

    public void setNome(String nome) {
        this.nome = nome;
    }

    @XmlTransient
    public Collection&lt;Grupo&gt; getGrupoCollection() {
        return grupoCollection;
    }

    public void setGrupoCollection(Collection&lt;Grupo&gt; grupoCollection) {
        this.grupoCollection = grupoCollection;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Usuario)) {
            return false;
        }
        Usuario other = (Usuario) object;
        if ((this.id == null &amp;&amp; other.id != null) || (this.id != null &amp;&amp; !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return &quot;model.entities.Usuario[ id=&quot; + id + &quot; ]&quot;;
    }

} 
```

注意：这些类是由 Netbeans 生成的。注 2：有些名称是葡萄牙语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:16:47.477

实际上，如果您想通过用户名和密码获取组名，您可以按如下方式重写您的查询：

```
SELECT g.nome FROM Grupo g INNER JOIN g.usuarioCollection u 
WHERE u.nome = ?1 AND u.senha = ?2 
```

由于`JPQL`您使用的是对象而不是表，因此您将使用带有和注释的字段的`JOIN`子句。`association fields``@OneToMany``@ManyToMany`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:52:12.177

你有`FROM group g`. 不是`group`保留字吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:13:39.683

您的查询是 SQL 查询，而不是 JPQL 查询。JPQL！= SQL。我还建议不要通过用户名+密码来查询用户，因为这非常昂贵。而是按用户的主键查询用户。您的查询应如下所示：

```
select g.name from group g where :user in g.users 
```

该`:user`参数应该是一个用户实体。你可以这样设置：

```
query.setParameter("user", user); 
```

话虽如此，请告诉我“密码”列仅包含加密和加盐密码。

# java - 使用模板进行 Java 打印

> ID：12150793
> 
> 赞同：0
> 
> 时间：2012-08-27T23:09:23.313
> 
> 标签：java, templates, printing, jasper-reports

我有一个在 .NET 中开发的应用程序，我正在将它转移到 Java 环境中。应用程序（除其他外）打印双淘汰括号，填写团队/参赛者名称。我也想做同样的事情，但能够将括号换成不同的系统（单次淘汰等）。旧程序绘制了整个括号，我想创建一个括号模板并在打印之前将数据放入模板中会更容易。

通过搜索，我发现了很多关于 Jasper Reports 的建议。我已经研究过了，它似乎是一个非常强大的报告引擎，这远远超出了我的需要。那里有更小、更简单的打印模板库吗？我需要能够从 Windows 和 Mac 平台打印。

任何建议，将不胜感激。

谢谢。

# ubuntu-12.04 - 无法在 ubuntu 12.04 中设置双显示器

> ID：12150797
> 
> 赞同：2
> 
> 时间：2012-08-27T23:09:48.907
> 
> 标签：ubuntu-12.04

升级到 12.04 后，我的双显示器停止工作。在我尝试设置 id Settings/Display 后，我收到错误：

无法应用所选的显示器配置：所需的虚拟大小不适合可用大小：请求=（3840、1080）、最小值=（320、200）、最大值=（1920、1920）

无法应用配置：%s GDBus.Error:org.gtk.GDBus.UnmappedGError.Quark._gnome_2drr_2derror_2dquark.Code3：所需的虚拟大小不适合可用大小：请求=（3840、1080），最小值=（320、200），最大值=(1920, 1920)

如果我尝试在 AMD 催化剂控制中心编辑它（我运行这个命令 gksu amdcccle），我会得到：

（进程：2955）：GLib-CRITICAL **：g_once_init_leave：断言“结果！= 0”失败

（进程：2955）：GLib-GObject-CRITICAL **：/build/buildd/glib2.0-2.32.3/./gobject/gtype.c:2722：您忘记调用 g_type_init()

（进程：2955）：GLib-CRITICAL **：g_once_init_leave：断言“结果！= 0”失败

（进程：2955）：GLib-GObject-CRITICAL **：g_object_new：断言“G_TYPE_IS_OBJECT（object_type）”失败

尝试多次恢复 xorg.conf 并重新开始，但没有帮助。我安装了 Ati Radeon HD 3450 视频卡和 ATI/AMD 专有的 FGLRX 驱动程序。

谢谢你的帮助。

# mysql - Square brackets in MySQL LIKE

> ID：12150806
> 
> 赞同：2
> 
> 时间：2012-08-27T23:11:13.610
> 
> 标签：mysql, sql, sql-like

I have a table (let's call it A) with a text field called `references_int` which has numerous values. One example is `'internal\reference[111]'`.

If I do

```
SELECT * 
FROM A 
WHERE references_int LIKE 'internal\\reference[111]' 
```

it will return zero rows. But if I replace `LIKE` with `=` it works.

I use a framework that simplifies find queries, but it uses `LIKE`.. Is there a way for it to work?

No idea if it's a bug or a feature.

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T23:18:34.100

逃脱每个`\`：

```
SELECT * 
FROM A 
WHERE references_int LIKE 'internal\\\\reference[111]' 
```

默认情况下，如果您不指定`ESCAPE`字符`LIKE`，`\`则假定为 , 根据[文档](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)。另一种方法是使用不同的`ESCAPE`字符：

```
SELECT * 
FROM A 
WHERE 'internalrefer\\ence[111]' LIKE 'internalrefer\\ence[111]' ESCAPE '#' 
```

# machine-learning - 将弱学习器组合成强分类器

> ID：12150810
> 
> 赞同：6
> 
> 时间：2012-08-27T23:11:29.117
> 
> 标签：machine-learning, artificial-intelligence, decision-tree, classification, adaboost

如何将几个弱学习器组合成一个强分类器？我知道公式，但问题是在我读过的每篇关于 AdaBoost 的论文中，只有公式没有任何示例。我的意思是 - 我的学习者和他们的权重很弱，所以我可以按照公式告诉我的去做（将学习者乘以它的权重，再加上另一个乘以它的权重，再加上一个等等），但我该怎么做呢？我的弱学习者是决策树桩。他们得到了属性和阈值，那么我要乘什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T20:48:45.023

如果我正确理解了您的问题，那么您可以很好地解释提升如何将弱分类器集成到具有大量图像的强分类器中：

[www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/DownloadMaterial/Lectures/Lecture8.pdf](http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/DownloadMaterial/Lectures/Lecture8.pdf)

基本上你是通过分离超平面的加权组合来创建一个更复杂的决策表面（在讲义中显示的很棒的图）

希望这可以帮助。

**编辑**

要实际做到这一点：

在第 42 页中，您会看到`alpha_t = 1/2*ln((1-e_t)/e_t)`可以在 for 循环中轻松计算的公式，或者如果您正在使用一些数字库（我正在使用非常棒的 numpy）直接通过向量运算。`alpha_t`是在 adaboost 内部计算的，所以我假设你已经有了这些。

您在第 38 页有数学公式，大 sigma 代表总和。 `h_t`是弱分类器函数，它返回 -1（否）或 1（是）。 `alpha_t`基本上是弱分类器有多好，因此在强分类器的最终决定中它必须说多少（不是很民主）。

我从来没有真正使用过forloops，但我会更容易理解并且更独立于语言（这是pythonish伪代码）：

```
strongclassifier(x):
    response=0
    for t in T: #over all weakclassifiers indices
        response += alpha[t]*h[t](x)
    return sign(response) 
```

这在数学上称为权重和弱响应之间的点积（基本上：strong(x) = alpha*weak(x)）。

> [http://en.wikipedia.org/wiki/Dot_product](http://en.wikipedia.org/wiki/Dot_product)

**编辑2**

这就是strongclassifier(x)内部发生的情况：分离超平面基本上是在函数weak(x)中决定的，所以所有weak(x)=1的x都在超平面的一侧，而weak(x)=-1在超平面的另一边。如果您考虑它在平面上有线条，那么您有一个平面将平面分成两部分（总是），一侧是（-），另一侧是（+）。如果你现在有 3 条无限的三角形线，它们的负边朝外，你将在三角形内部得到 3 个（+），在外部得到 1 或 2 个（-），结果（在强分类器中）成一个三角形区域，该区域为正，其余为负。这是一个过度简化，但重点仍然存在，并且在更高维度上完全类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:29:56.063

在 vanilla Ada Boost 中，您不会将学习者乘以任何权重。相反，您增加了错误分类数据的权重。假设您有一个数组，例如 [1..1000]，并且您想使用神经网络来估计哪些数字是素数。（愚蠢的例子，但足以演示）。

想象一下，你有 NeuralNet 类。您实例化第一个，n1 = NeuralNet.new。然后你就有了训练集，即另一个从 1 到 1000 的素数数组。（你需要为一个数字组成一些特征集，比如它的位数。）。然后你训练 n1 来识别你的训练集上的素数。让我们假设 n1 很弱，因此在训练期结束后，它将无法正确地将所有数字 1..1000 分类为素数和非素数。让我们假设 n1 错误地说 27 是素数而 113 是非素数，并犯了一些其他错误。你做什么工作？您实例化另一个 NeuralNet，n2，并将 27、113 和其他错误数字的权重从 1 增加到 1.5，并将正确分类的数字的权重从 1 减少到 0.667。然后你训练n2。训练后，你 会发现n2纠正了n1的大部分错误，包括no。27，但没有。113 仍然分类错误。所以你实例化 n3，将 113 的权重增加到 2，将 27 和其他现在正确分类的数字的权重减少到 1，并将旧的正确分类的数字的权重减少到 0.5。等等...

我够具体了吗？

# wcf - CommunicationException 总是/几乎总是服务问题吗？

> ID：12150813
> 
> 赞同：0
> 
> 时间：2012-08-27T23:11:57.257
> 
> 标签：wcf, wcf-client

与 WCF 服务通信时收到以下异常。

**CommunicationException：底层连接已关闭：服务器关闭了预期保持活动状态的连接。**

并非每次调用都会发生此错误，并且 WCF 服务托管在由多个服务器组成的池中。我不知道有多少，因为我不知道服务。

我在 MSDN 上找到了以下文章，该文章指出，此错误很多时候是由服务引起的，并不是真正涉及消息网络传输的异常。

[http://msdn.microsoft.com/en-us/library/ms734691(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms734691(v=vs.100).aspx)

是否有特定的网络配置会导致此超时发生...例如，连接池空闲超时为 100 秒，服务器保持活动状态为 120 秒，服务器和客户端之间的网络路由器空闲超时为60 秒。

正在使用的绑定配置很简单... BasicHttpBinding 配置如下

valuescloseTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:03:00" sendTimeout="00:03:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard " maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true"

# git - “git rm *.log”与“git rm \*.log”有什么区别？

> ID：12150819
> 
> 赞同：1
> 
> 时间：2012-08-27T23:13:17.287
> 
> 标签：git

据说我们需要引用`*`in：

```
git rm \*.log 
```

因为 Git 有它的内部文件扩展。但是有什么问题或者使用它与使用它有什么区别：

```
git rm *.log 
```

或在另一种情况下，例如

```
git rm log/*.log 
```

如果外壳扩展它与让 git 扩展它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:18:43.010

第一个（转义）示例由 git 扩展，并将匹配所有跟踪的文件，无论它们是否实际存在于树中。第二个由 shell 扩展，并且只匹配存在的文件。例如，doing`rm *.log; git rm *.log`将从您的目录中删除文件，但**不会**将它们从 git 索引中删除。事实上，“git rm”命令会返回一个错误，因为你没有指定任何文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:25:29.333

我不使用 git，所以这更像是一般的思路。

看看这个：

```
stieber@gatekeeper:~$ echo *.cpp
Test1.cpp Test2.cpp Test.cpp 
```

对比

```
stieber@gatekeeper:~$ echo \*.cpp
*.cpp 
```

现在，如果“echo”是在源代码存储库上运行的东西，那么第一个版本将专门处理我的工作目录中存在的文件，这可能与第二个版本使用“git”时使用的列表相同，也可能不同。软件扩展通配符。我的工作目录可能只是源代码存储库知道的文件的一个子集。

在许多情况下，工作目录应该几乎就是存储库所拥有的，在这种情况下应该没有真正的区别，但是您也可以在存储库上执行诸如“擦除所有这些文件”之类的操作，而无需先检查它们（你为什么要，如果你想删除它们......）

根据 git 处理路径名的方式，使用路径名指定模式可能会有更大的不同：/*.cpp 将专门列出我的根目录中的文件，这些文件可能不属于任何存储库。将其转义为 /\*.cpp 可能会告诉存储库软件在它使用的任何内部根目录中处理匹配的文件。

# android - 从 Android 设备上的浏览器调用条形码扫描仪

> ID：12150822
> 
> 赞同：1
> 
> 时间：2012-08-27T23:13:48.873
> 
> 标签：android, barcode, zxing

所以我找到了很多关于如何使用[http://zxing.appspot.com/scan](http://zxing.appspot.com/scan)来做到这一点的例子，但它似乎只适用于少数几个设备。我已经让它在 HTC Evo View 上工作。但在三星 Galaxy Tab 和 ZTE Optik 上，它只会将我带到一个页面，告诉我我没有安装 Zxing 条形码应用程序，即使我安装了。有没有其他人遇到过这种不一致，如果有，你找到解决方案了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:07:46.183

据我了解，这真的取决于应用程序与平台交互以将 URL 解析为网站以外的其他内容。有些浏览器可以，有些不可以；我当然已经看到了这两种行为，或者在不同的上下文中看到了不同的行为——例如，输入 URL 似乎不会触发它。

我自己没有任何关于哪些浏览器会触发 Intent 或不会触发 Intent 的信息，但我相信 Chrome 和衍生产品会触发。我不知道这两个不起作用的确切原因是什么。

我不相信有任何方法可以强制这种行为，因为应用程序可以直接处理链接，如果它真的想要并且让它远离任何平台处理程序。

# android - 我可以在我的 android-app 中使用哪些控件？

> ID：12150823
> 
> 赞同：4
> 
> 时间：2012-08-27T23:13:56.330
> 
> 标签：android, tabs, fragment

我在 Android 应用程序中看到了一个很棒的用户控制组件。我不知道它是什么。这是这个应用程序的屏幕截图：

![图片](../Images/8ab9d7b01db7264c12a80959f88ea51e.png)

我对“拇指”标签下的用户控件组件感兴趣。它是什么？我已经用谷歌搜索了，但只找到了`TabActivity`已经弃用的功能。

我必须使用什么来使它看起来像上面的屏幕截图？

我发现了这个关于选项卡控件的博客[条目；](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)这是制作该选项卡控件的正确方法吗？

我想在 Android 2.2+ 下使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:42:50.170

您在寻找类似 iPhone 的标签栏吗？这是Android标签栏上的几个例子，其他几个例子检查它是否对你有帮助.. [Iphone Like Tab bar in Android](http://www.technotalkative.com/android-iphone-like-tab-bar-in-android/)

干杯

# php - 如何将 IPTC 数据从一张图像复制到另一张图像？

> ID：12150827
> 
> 赞同：5
> 
> 时间：2012-08-27T23:14:32.607
> 
> 标签：php, metadata, iptc

我正在开发一个图像处理器脚本来基本上调整图像大小。问题是当我制作调整大小的图像副本时，它也不会复制 IPTC 数据。所以我一直在检查 IPTC PHP 函数（iptcparse 和 iptcembed），但我很困惑。使用 iptcparse 非常简单。它将所有数据放入一个数组中，然后我使用 print_r 将其打印出来。但据说有用的一个是 iptcembed，因为它允许您（顾名思义）将 IPTC 嵌入到您的图像中。从 php.net 观看示例我不太明白。我是否必须手动创建数组才能将其嵌入到新图像中。我想有一种简单的方法可以复制一个图像 IPTC 的数据并将其嵌入到另一个图像中。

欢迎任何答案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:33:21.380

我想，这很简单。要从旧图像中获取 iptc 数据，您只需使用 getimagesize 和 iptcparse 函数。

在 php.net 上，您找到了这个例子来达到这个目的

```
<?php
$size = getimagesize('./test.jpg', $info);
if(isset($info['APP13']))
{
    $iptc = iptcparse($info['APP13']);
    var_dump($iptc);
}
?> 
```

将此示例与 iptcembed 方法结合使用，您将拥有所需的一切

# c# - C# 循环遍历 IEnumerable 以进行使用前 n 个和后 n 个元素的计算

> ID：12150831
> 
> 赞同：7
> 
> 时间：2012-08-27T23:16:17.813
> 
> 标签：c#, list, foreach, ienumerable

我发现自己经常处理一个 IEnumerable 对象，我需要遍历该对象，并为每个元素进行计算，该元素取决于 n 个紧接在前面和后面的对象。

一个常见的例子是计算滚动平均值，但有时计算比这更复杂，并且依赖于列表中每个元素的几个字段

我永远不确定构建循环的最佳方式。效率很重要，但可维护性和可读性更重要。

*   有时我转换为 List 然后使用 for 循环来获取元素 [i-1],[i],[i+1] 然后执行我的计算。

*   其他时候，我将其保留为 IEnumerable，但我“缓存”了前几个元素，因此在 foreach 循环中到达 [i+1] 之前，我不会为 i 进行计算。

*   我还考虑使用链表，这样我就可以使用 .Previous 和 .Next 方法。

关于哪种技术最好使用的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T23:29:03.153

一种选择是制作一种扩展方法，该方法提供您可以使用的滚动“窗口”。这将允许您以简单的方式编写循环：

```
IEnumerable<IList<T>> CreateRollingWindow(IEnumerable<T> items, int size)
{
    LinkedList<T> list = new LinkedList<T>();

    foreach(var item in items)
    {
        list.AddLast(item);
        if (list.Count == size)
        {
            yield return list.ToList();
            list.RemoveFirst();
        }
    }
} 
```

然后，您可以将算法简单地编写为：

```
foreach(var window as collection.CreateRollingWindow(5))
{
    double rollingAverage = window.Average(); // window is IList<T> here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:28:25.483

这是一个简单的实现：

```
public static IEnumerable<double> RollingAverage(this IEnumerable<double> values, int count)
{
    var queue = new Queue<double>();
    foreach (var v in values)
    {
        queue.Enqueue(v);
        if (queue.Count == count)
        {
            yield return queue.Average();
            queue.Dequeue();
        }
    }
} 
```

它可能可以改进，但它似乎工作......

编辑：这是一个稍微好一点的版本（它不需要枚举队列来计算平均值）：

```
public static IEnumerable<double> RollingAverage(this IEnumerable<double> values, int count)
{
    var queue = new Queue<double>();
    double sum = 0.0;
    foreach (var v in values)
    {
        sum += v;
        queue.Enqueue(v);
        if (queue.Count == count)
        {
            yield return sum / count;
            sum -= queue.Dequeue();
        }
    }
} 
```

# html - 从 Google Cloud Storage 提供 HTML 文件

> ID：12150834
> 
> 赞同：2
> 
> 时间：2012-08-27T23:16:26.323
> 
> 标签：html, google-app-engine, cdn

像任何网络服务器一样，使用 CDN 提供静态 HTML 文件真的有什么问题吗？

我们正在 Google App Engine 上开发 CMS，并正在修改提供发布到静态 html 文件的想法。这是使用 Google App Engine 的 Google Cloud Storage Python API 在几分钟内完成的。

但是，虽然 HTML 文件在其他浏览器中可以正常交付，但 Chrome 会自动在本地下载 HTML 文件，然后不会在浏览器选项卡中打开。

任何方向表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:06:47.667

不，这没有错，很可能您`Content-Type`的错误或`Content-Disposition`.

当您使用[Cloud Storage API](https://developers.google.com/appengine/docs/python/googlestorage/overview#Using_Google_Storage)创建文件时，将其设置`mime_type`为`'text/html'`并跳过`content_disposition`.

# binary - 理解编码的 hbase 值

> ID：12150844
> 
> 赞同：3
> 
> 时间：2012-08-27T23:17:11.743
> 
> 标签：binary, hex, hbase

我目前正在调查一个数据被损坏的错误，我们不确定这是在哪个组件中发生的。我正在尝试从 Hbase 中读取值，但由于编码而无法理解它们。有人告诉我它是“二进制编码的十六进制”（无论这意味着什么）。**有谁知道如何解码这些值？**任何解决方案将不胜感激；无论是我可以下载的一些实用程序还是一步一步的手动过程。以下是我的 hbase 扫描中的一些示例行。

`column=m:----_daily_count, timestamp=1345766400000, value=\x00\x00\x00\x01` `column=a:utc_offset, timestamp=1346025600000, value=\xFF\xFF\x9D\x90`
`column=m:----_daily_count, timestamp=1344816000000, value=\x00\x00\x00\x03`

---- 正在替换可能泄露未发布产品信息的数据类型的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:02:04.907

不确定这是否有帮助，但 HBase 不理解类型，并且基本上将所有内容存储为字节序列。从十六进制编码到实际字节值很容易：

```
\x00\x00\x00\x01 
```

是字节序列：

```
0 0 0 1 
```

如果我不得不猜测，这些值应该是多头的，所以上面的只是 1L。

您可以使用 java API（特别是 org.apache.hadoop.hbase.util.Bytes 类）将字节序列转换为 java 中的实际类型，但要理解它，您需要知道他们被序列化了。此外，这假设写入数据的任何内容也是用 java 编写的和/或具有相同的字节序。

如果您了解 ruby​​，您还可以使用字符串类的 unpack() 方法，该方法可以理解这些字节序列，但您仍然需要知道类型/字节顺序才能这样做，如果它不是原语，它可能会赢不行。

# jquery - 从 jQuery 中提取值并传递给 $_GET 或 php 变量

> ID：12150847
> 
> 赞同：1
> 
> 时间：2012-08-27T23:18:06.597
> 
> 标签：jquery, get

我是 jQuery 的新手（或所有的 javascript，真的），但我知道我在 php 和基本编程方面的方式 - 抱歉，如果我的问题听起来完全愚蠢，我会尽力学习。

我正在使用[TechBrij上概述的座位选择 jQuery 脚本](http://techbrij.com/780/seat-reservation-with-jquery)

这是选择座位的代码部分（来自飞机/公共汽车座位的布局）

```
$('.' + settings.seatCss).click(function () {
    if ($(this).hasClass(settings.selectedSeatCss)){
        alert('This seat is already reserved');
    } else{
        $(this).toggleClass(settings.selectingSeatCss);
    }
});
$('#btnShowNew').click(function () {
    var str = [], item;
    $.each($('#place li.' + settings.selectingSeatCss + ' a'), function (index, value) {
        item = $(this).attr('title');
        str.push(item);
    });
    alert(str.join(','));
}) 
```

单击按钮后，选定的席位会显示在警报窗口中，而我正是想要该值。

我现在想将选定的座位号传递到`$_GET`（或只是传递到一个 php 变量中，然后我可以将其用作`$_GET`值并在 PHP 中继续使用它）。如果我理解正确，我需要以某种方式获取变量“str”？我该怎么做？

另外，有没有办法限制脚本一次只允许一个选定的座位？现在它只会在我点击一个已经预订的座位时发出警报，我可以选择任意数量的座位，切换它们选择/取消选择等等。只需将其设置为单击设置为“selectingSeatCss”的座位将导致警报，我猜也会阻止我取消选择它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:48:43.340

您问题的第二部分可能值得提出自己的问题，但至于主要问题：

如果您尝试将 JavaScript 变量传递给 PHP 脚本，则需要使用 ajax：

```
var seats = str.join(',');
var request = $.ajax({
    type: 'GET',
    url: '/the/script/url.php?seats=' + seats,
    success: function (response) {
         // do something with response
    }
}); 
```

您可能想在此处阅读有关 jQuery 的更多信息：http `$.ajax`: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

`seats`虽然，根据您要执行的操作，在页面上使用 JavaScript 对值做一些事情确实可能更有意义。如果您想将其保存到数据库，您可能希望将其发送到您的 PHP 脚本。

**更新**

要将值放入表单并提交表单，请创建一个常规 HTML 表单（您可以放入`display: none`css 以隐藏它），然后：

```
var seats = str.join(',');
$('#formId input[name=seats]').val(seats).submit(); 
```

在此示例中，表单可能如下所示：

```
<form id="formId" action="/path/to/script.php" method="post">
    <input name="seats" type="text" value="" />
    <input type="submit" value="submit" />
</form> 
```

然后该值将可用于接收脚本`$_POST['seats']`

# c# - 为什么我填充的 DataGridView 单元格（DataGridViewTextBoxCell 实例）显示省略号？

> ID：12150848
> 
> 赞同：1
> 
> 时间：2012-08-27T23:18:18.763
> 
> 标签：c#, winforms, datagridview, formatting, datagridviewtextboxcell

当我在 DataGridView 中使用值（例如“1”）填充选定单元格时，而不是简单地显示“1”，它们会显示“1...”

为什么会这样，我怎样才能防止省略号点显示？

## 更新

这是请求的代码（如下）。它看起来像什么的尖叫声（暂停，出于某种原因，posterous 不接受它作为一个点凸起或一个松鸦钉）。

无论如何，DGV 看起来像这样：

```
00:00 | 1...
00:15 | 
00:30 | 1...
00:45 | 1... 
```

...应该是什么时候：

```
00:00 | 1
00:15 | 
00:30 | 1
00:45 | 1 
```

正如最后一行的注释中所指出的，在测试数据中，电话值只是“1”。将鼠标悬停在该值上会显示“1”的工具提示/提示（不是“1...”或类似的）。

```
private void CreateAndPopulateDGVPlatypusScheduleCells()
{
    // Add the needed columns
    if (dataGridViewPlatypusSchedule.Columns.Count == 0) {
        for (int i = 0; i < PLATYPUS_SCHEDULE_COL_COUNT; i++) {
            string colName = string.Format("Column{0}", i + 1);
            dataGridViewPlatypusSchedule.Columns.Add(colName, colName);
            dataGridViewPlatypusSchedule.Columns[i].AutoSizeMode = DataGridViewAutoSizeColumnMode.None;
            dataGridViewPlatypusSchedule.Columns[i].Resizable = DataGridViewTriState.False;

            DataGridViewCell cell = new DataGridViewTextBoxCell();
            if (i % 4 == 0) {
                cell.Style.BackColor = Color.Bisque;
                dataGridViewPlatypusSchedule.Columns[i].CellTemplate = cell;
                dataGridViewPlatypusSchedule.Columns[i].Width = 41;
                dataGridViewPlatypusSchedule.Columns[i].ReadOnly = true;
            } else {
                cell.Style.BackColor = Color.White;
                dataGridViewPlatypusSchedule.Columns[i].CellTemplate = cell;
                dataGridViewPlatypusSchedule.Columns[i].Width = 13;
                dataGridViewPlatypusSchedule.Columns[i].ReadOnly = false;
            }
        }
    }

    // Add the needed rows
    if (dataGridViewPlatypusSchedule.Rows.Count == 0)
    {
        for (int row = 0; row < PlatypusScheduleGridRowCount; row++) {
            // Save each row as an array
            string[] currentRowContents = new string[PLATYPUS_SCHEDULE_COL_COUNT];
            // Add each column to the currentColumn
            for (int col = 0; col < PLATYPUS_SCHEDULE_COL_COUNT; col++)
            {
                currentRowContents[col] = this.GetPlatypusScheduleTimeStringForCell(row, col);
            }
            // Add the row to the DGV
            dataGridViewPlatypusSchedule.Rows.Add(currentRowContents);
        }
    }

    int dow = this.GetDOWAsInt(ActiveDow);
    listQHduckBill = InterpSchedData.GetPlatypusScheduleForFunnyMammal(platypusId, dow);
    foreach (var duckBill in listQHduckBill)
    {
        int QHCell = duckBill.QH;
        string ph1 = duckBill.PH1;
        string ph2 = duckBill.PH2;
        string ph3 = duckBill.PH3;
            if (!(string.IsNullOrWhiteSpace(ph1)))
        {
            PopulatePlatypusScheduleCell(QHCell, 1, ph1);
        }
        if (!(string.IsNullOrWhiteSpace(ph2))) {
            PopulatePlatypusScheduleCell(QHCell, 2, ph2);
        }
        if (!(string.IsNullOrWhiteSpace(ph3))) {
            PopulatePlatypusScheduleCell(QHCell, 3, ph3);
        }
    }
}

private void PopulatePlatypusScheduleCell(int cellToPopulate, int offset, string phoneVal)
{
    int timeColumnBase = (cellToPopulate / PLATYPUS_SCHEDULE_COL_COUNT);
    string colName = this.GetColumnToPopulate(timeColumnBase, offset);
    int rowToPopulate = GetRowToPopulate(cellToPopulate);
    DataGridViewRow dgvr = dataGridViewPlatypusSchedule.Rows[rowToPopulate];
    dgvr.Cells[colName].Value = phoneVal; // <- This (phoneVal) is "1" but displays as "1..."
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:37:50.177

我使用了 引用的 msdn 代码，但合并了 StringFormat 对象，并将花哨的深红色和蓝色替换为黑色（用于内容字体）和 blanchedalmond，以融入我的网格。我从 msdn 代码中更改的三件事已注明/注释：

```
private void dataGridViewLifeSchedule_CellPainting(object sender, DataGridViewCellPaintingEventArgs e) {
    // 1\. This is used to replace what is StringFormat.GenericDefault in the msdn code with strFormat
    StringFormat strFormat = new StringFormat();
    strFormat.Trimming = StringTrimming.None; 

    Rectangle newRect = new Rectangle(e.CellBounds.X + 1,
    e.CellBounds.Y + 1, e.CellBounds.Width - 4,
    e.CellBounds.Height - 4);

    using (
        Brush gridBrush = new SolidBrush(this.dataGridViewLifeSchedule.GridColor),
        backColorBrush = new SolidBrush(e.CellStyle.BackColor)) {
        using (Pen gridLinePen = new Pen(gridBrush)) {
            // Erase the cell.
            e.Graphics.FillRectangle(backColorBrush, e.CellBounds);

            // Draw the grid lines (only the right and bottom lines; 
            // DataGridView takes care of the others).
            e.Graphics.DrawLine(gridLinePen, e.CellBounds.Left,
                e.CellBounds.Bottom - 1, e.CellBounds.Right - 1,
                e.CellBounds.Bottom - 1);
            e.Graphics.DrawLine(gridLinePen, e.CellBounds.Right - 1,
                e.CellBounds.Top, e.CellBounds.Right - 1,
                e.CellBounds.Bottom);

            // Draw the inset highlight box.
            e.Graphics.DrawRectangle(Pens.BlanchedAlmond, newRect); // 2\. It is Pens.Blue in the msdn code

            // Draw the text content of the cell, ignoring alignment. 
            if (e.Value != null) {
                e.Graphics.DrawString((String)e.Value, e.CellStyle.Font,
                    Brushes.Black, e.CellBounds.X + 2, // 3\. It is Brushes.Crimson in the msdn code
                    e.CellBounds.Y + 2, strFormat);
            }
            e.Handled = true;
        }
    }
} 
```

# file - 用于在 .txt 文件中查找特定文本的 Bat 文件

> ID：12150853
> 
> 赞同：0
> 
> 时间：2012-08-27T23:18:54.643
> 
> 标签：file, search, batch-file, filter, find

只是想知道批处理文件中是否有任何代码可以在 .txt 文件中找到某个文本或单词。

例如：

1.  快速的棕色狐狸跳过懒狗\mark{1}
2.  敏捷的 \mark{10} 棕色狐狸跳过懒狗
3.  敏捷的棕色狐狸跳过懒惰的\mark{100}狗
4.  敏捷的棕色狐狸跳过懒狗 \mark{1000}
5.  \mark{1} 快速棕色狐狸跳过懒狗
6.  敏捷的棕色狐狸跳过懒狗 \mark{100}
7.  敏捷的棕色狐狸 \mark{30} 跳过懒惰的狗

正如您从上面的示例中看到的那样，我想搜索“\mark{Number here}”这个词，以及是否有可能出现相同的词，例如第一行和第五行, 它只会显示第一行的 "\mark{1}" 而忽略第五行的相同单词

所以结果将打印在一个txt文件中：

1.  \标记{1}
2.  \标记{10}
3.  \标记{100}
4.  \标记{1000}
5.  \标记{30}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:37:00.487

如果您下载像 Windows 的 sed（或者 Windows 的 grep）这样的工具，这应该相对容易。Gnu 项目免费提供 Windows 的 sed 和 grep。

使用 VBScript、JScript 或 powershell 的正则表达式功能也应该相对容易。

但我想我会尝试使用本地批处理。FINDSTR 支持原始的正则表达式，但它无法提取匹配的文本，因此批处理解决方案相当复杂。

下面的解决方案可以在一行上找到多个标记。它还能够计算每个不同标记的出现次数。SET 搜索和替换不区分大小写，所以我被迫让整个解决方案不区分大小写。

该解决方案只能处理长度约为 8191 字节或更短的行。

只要包含标记的行数相对较少，即使对于非常大的文件，性能也应该很好。

```
@echo off
setlocal disableDelayedExpansion
set "file=test.txt"
set LF=^

::The two blank lines above are critical to create linefeed - do not remove.

::Clear any existing \mark variables
for /f "delims==" %%A in ('2^>nul set \mark{') do set "%%A="

::Find all lines that contain at least one valid mark and call a routine
::to parse out all marks
for /f eol^=^%LF%%LF%delims^= %%A in (
  'findstr /ri \mark{[0-9][0-9]*} "%file%"'
) do (
  set "ln=%%A"
  call :parseMarks
)

::Create file containing found marks only
>marks.txt (
  for /f "delims==" %%A in ('set \mark{') do echo %%A
)

::Create file containing found marks with counts
>markCounts.txt set \mark{

::Print the results
echo Here is a list of found marks
echo -----------------------------
type marks.txt
echo(
echo Here is a list of found marks with the counts
echo ---------------------------------------------
type markCounts.txt

exit /b

:parseMarks
setlocal enableDelayedExpansion
set "ln2=!ln:*\mark{=!"
if !ln2! neq !ln! (
  for /f "tokens=1* delims=}" %%B in ("x!ln2!x") do (
    endlocal
    echo(%%B|findstr /xr x[0-9][0-9]* >nul && (
      for /f "delims=x" %%D in ("%%B") do set /a \mark{%%D}+=1
    )
    set "ln=%%C"
  )
  if defined ln goto :parseMarks
)
exit /b 
```

这是我使用的 test.txt 文件。它有许多问题测试用例，使批处理解决方案变得困难。

```
The \mark{} quick brown fox jump \mark{1} over the lazy dog
The quick \mark{10} brown fox jump over the \mark{99a} lazy dog
The quick \mark{}99} brown fox jump over the lazy \mark{100} dog! \MARK{22}!
The quick brown fox jump over the lazy dog \mark{1000} \mark{99
;The \mark{1} quick brown fox jump over the lazy dog
The \mark{!!99} quick brown fox jump over the lazy dog \mark{100}
\mark{22}The quick brown fox \mark{30} jump over the lazy dog
exclude \mark{100a}
exclude \mark{}
include \MARK{22} 
```

这是我的结果

```
Here is a list of found marks
-----------------------------
\mark{1000}
\mark{100}
\mark{10}
\mark{1}
\mark{22}
\mark{30}

Here is a list of found marks with the counts
---------------------------------------------
\mark{1000}=1
\mark{100}=2
\mark{10}=1
\mark{1}=2
\mark{22}=3
\mark{30}=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:04:08.040

如果您想在没有非 Microsoft 实用程序的情况下执行此操作，可以使用以下方法：

**注意：**此方法使用来自 dostips.com 的 strlen.bat 例程，该例程可在[此处获得](http://www.dostips.com/DtCodeCmdLib.php#strLen)

```
@echo off
setlocal enabledelayedexpansion
for /f "tokens=*" %%x in (findOnce.txt) do call :work "%%x"
echo #%linenum% lines.
endlocal
goto :eof

:work
set line=%~1
if not "!line:\mark{=!"=="!line!" (
  call strlen line len
  for /l %%y in (0,1,!len!) do (
    if "!line:~%%y,1!"=="\" (
      set clip= \
    ) else (
      if "!clip!" neq "" ( 
        set clip=!clip!!line:~%%y,1!
        if "!line:~%%y,1!"=="}" (
          call :getcheck "!markset!" "!clip!"
          if "!markset!"=="" (
            set /a linenum=!linenum! + 1
            set markset=!markset!!clip!
            echo !linenum! !clip!
            set clip=
          ) else if "!check!"=="!markset!" (
            set /a linenum=!linenum! + 1
            set markset=!markset!!clip!
            echo !linenum! !clip!
            set clip=
          )
        )
      )
    )
  )
)
goto :eof

:getcheck
  set markset=%~1
  set clip=%~2
  call set check=%%markset:!clip!=%%
  if  "!check:~-1!"=="=" set check=!check:~,-1!
  if "!check:~1,1!"==" " set check=!check,~1!
goto :eof 
```

# android - Android - 防止对话框关闭软键盘

> ID：12150857
> 
> 赞同：1
> 
> 时间：2012-08-27T23:19:22.877
> 
> 标签：android, android-input-method, android-windowmanager

我试图在 EditText 获得焦点时强制显示软键盘，无论用户是否单击了 EditText 视图。奇怪的是，如果导致 EditText 获得焦点的动作源自 Dialog onClick 动作，则键盘将永远不会显示。

这是一个简单的例子： main.xml 源代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:focusable="true"
              android:focusableInTouchMode="true"
              android:clickable="true"
        >
    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Hello World, MyActivity"
            />
    <Button android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Show Dialog"
            android:onClick="showDialog"/>
    <Button android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Set Input Focus"
            android:onClick="setInputFocus"/>
    <EditText android:id="@+id/myEditText"
            android:layout_width="fill_parent"
              android:layout_height="wrap_content"/>
</LinearLayout> 
```

和活动：

```
public class MyActivity extends Activity {

    EditText myEditText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myEditText = (EditText)findViewById(R.id.myEditText);
        myEditText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(hasFocus){
                    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.showSoftInput(myEditText,InputMethodManager.SHOW_IMPLICIT);
                } else {
                    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0);
                }
            }
        });
    }

    public void showDialog(View v){
        new AlertDialog.Builder(this).setItems(new CharSequence[]{"Set Input Focus"}, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                myEditText.requestFocus();
            }
        }).create().show();
    }

    public void setInputFocus(View v){
        myEditText.requestFocus();
    }

} 
```

单击“设置输入焦点”按钮时，视图编辑文本将获得焦点，并且键盘将显示。但是，如果您要单击对话框中的“设置输入焦点”项，键盘将短暂显示然后立即消失（通常根本不会显示）。似乎对话框关闭正在关闭我们在单击事件期间告知要打开的键盘，但 EditText 仍然保持焦点。

所以我的问题是，如何防止对话框关闭软输入窗口？:-) 非常感谢任何建议。谢谢！

# excel - 使用单元格中的值作为公式中的单元格引用？

> ID：12150861
> 
> 赞同：38
> 
> 时间：2012-08-27T23:19:43.610
> 
> 标签：excel, excel-formula

我想知道如何从另一个单元格的值中提取单元格引用并将它们插入到公式中。

举个简单的例子：

在单元格 A1 我有这个：`COUNT(B4:H4)`

我不是在设置公式时选择范围，而是希望这个范围是动态的，基于其他单元格中的值。

所以，我想输入单元格引用：在 中`cell B4`，我会输入`C5`，然后在 中`H4`输入`C8`。如何设置我的公式来查看单元格内部`B4`，`H4`然后返回由这些单元格中的值定义的范围（`C5:C8`在这种情况下......）所以最后，单元格 A1 将返回`C5:C8`

我希望这是有道理的。这似乎很简单，但我似乎无法找到有关它的信息。提前致谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-27T23:33:49.953

采用`INDIRECT()`

```
=SUM(INDIRECT(<start cell here> & ":" & <end cell here>)) 
```

# scala - 有没有办法在使用 trait 时避免重复类型参数？

> ID：12150864
> 
> 赞同：2
> 
> 时间：2012-08-27T23:20:04.847
> 
> 标签：scala

考虑这段代码

```
val map = new HashMap[(String, String), Set[(String, Int, Double, Int)]] 
        with MultiMap[(String, String),     (String, Int, Double, Int)] 
```

有没有办法在不重复类型参数定义的情况下使用 Multimap 特征？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T23:23:17.967

您可以使用*类型别名*来减少重复

```
type K = (String, String)
type V = (String, Int, Double, Int) 
```

然后你的地图变成

```
val map = new HashMap[K, Set[V]] with MultiMap[K, V] 
```

然而，作为一种风格规则，我认为在代码中大量使用*TupleN*特征并不是一个好主意，原因如下：

*   它们更难重构（例如，如果您需要额外的字段）
*   它们代表什么不太明显

考虑到创建定制类的开销只有：

```
case class K(p1: String, p2: String) 
```

这通常是值得的！

# java - How to catch user choice of jradiobutton in jpopupmenu?

> ID：12150866
> 
> 赞同：2
> 
> 时间：2012-08-27T23:21:10.960
> 
> 标签：java, swing, actionlistener, jpopupmenu, jradiobutton

I have been able to show a popup menu in my frame and the menu items, a group of radio buttons may be navigated with the arrow keys. When the user presses Enter/Return the popup menu is no longer visible and I assume that it is possible to determine which button was chosen and assign an action.

```
 private static final JPopupMenu popupSyncTIR = new JPopupMenu();
    popupSyncTIR.setLabel("Sensor Synced to Clock");
    ButtonGroup grpTIR = new ButtonGroup();
    JRadioButtonMenuItem rbTIRMenuItem;
    rbTIRMenuItem = new JRadioButtonMenuItem("Sync TIR-A to clock");
    rbTIRMenuItem.setFont(new Font("Dialog", Font.BOLD, 16));
    grpTIR.add(rbTIRMenuItem);
    popupSyncTIR.add(rbTIRMenuItem);
    rbTIRMenuItem = new JRadioButtonMenuItem("Sync TIR-B to clock");
    rbTIRMenuItem.setFont(new Font("Dialog", Font.BOLD, 16));
    rbTIRMenuItem.setSelected(true);
    grpTIR.add(rbTIRMenuItem);
    popupSyncTIR.add(rbTIRMenuItem);
    rbTIRMenuItem = new JRadioButtonMenuItem("Sync TIR-C to clock");
    rbTIRMenuItem.setFont(new Font("Dialog", Font.BOLD, 16));
    grpTIR.add(rbTIRMenuItem);
    popupSyncTIR.add(rbTIRMenuItem); 
```

I have also implemented key mapping for the whole frame like this:

```
/**
 * alt-T period synch TIR sensor w/clock
 */
@SuppressWarnings("serial")
private static void registerSyncTIRAction() {
    javax.swing.Action tirSync = new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            setTIRSensorSync();
        }
    };
    KeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_T,
            java.awt.event.InputEvent.ALT_DOWN_MASK);
    ((JComponent) contentPanel).getActionMap().put("TirSync", tirSync);
    ((JComponent) contentPanel).getInputMap(
            JComponent.WHEN_IN_FOCUSED_WINDOW).put(keyStroke, "TirSync");

}

/** 
 * Show the TIR popup
 */
private static void setTIRSensorSync() {
    popupSyncTIR.show(pnlTIR, 10, 10); 
} 
```

How do I determine what radio button was selected before the user pressed Enter?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:37:07.560

就像您使用不在菜单中的单选按钮一样 :-) 使用操作：

```
Action actionA = new AbstractAction("Synch A to clock") {

    @Override
    public void actionPerformed(ActionEvent e) {
        // do stuff A
    }
};
JRadioButtonMenuItem buttonA = new JRadioButtonMenuItem(actionA);
Action actionB = new AbstractAction("Synch B to clock") {

    @Override
    public void actionPerformed(ActionEvent e) {
        // do stuff B
    }
};
JRadioButtonMenuItem buttonB = new JRadioButtonItem(actionB);
ButtonGroup ... // add buttons to group
JPopupMenu ... // add buttons to menu 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:33:17.747

结果的值仍然存储在您添加到弹出菜单的组件中。

您需要为您的弹出窗口和监视器方法实现一个[PopupMenuListener 。](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/PopupMenuListener.html)`popupMenuWillBecomeInvisible`

调用时，您将需要在弹出菜单中查询所选组件的组件。

如果您仍然可以直接引用它们（即在类上下文中），则可以直接访问它们。

次佳将通过对弹出菜单进行子分类来实现。

```
public class ChoicesPopupMenu exends JPopupMenu {

    JRadioButtonMenuItem rbAClock;
    JRadioButtonMenuItem rbBClock;
    JRadioButtonMenuItem rbCClock;

    // Construct the UI ...

    public boolean isAClockSelected() {
        return rbAClock.isSelected();
    }

    // Other selection checkers...

} 
```

或者，您可以遍历`JPopupMenu`

```
public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {
    JPopupMenu menu = (JPopupMenu)e.getSource();
    for (Component comp : menu.getComponents()) {
        if (comp instanceof JRadioButton) {
            JRadioButton rb = (JRadioButton)comp;
            if (rb.isSelected()) {
                // Figure out which one is selected...
            }
        }
    }
} 
```

# ruby-on-rails - Ruby On Rails：对 ActiveRecord has_one 关联感到困惑

> ID：12150871
> 
> 赞同：0
> 
> 时间：2012-08-27T23:22:14.280
> 
> 标签：ruby-on-rails, activerecord

这是一个说明我的问题的简单示例：

假设我有两个模型 Car 和 Color，其中 Color 有两个属性 Name 和 HexValue。

我希望 Car 有一种颜色，但我不希望 Car 和 Color 之间存在 1-1 关系。

如何创建指定此关联的关联？我知道我可以向 Car 添加一个外键，它引用 Color 中的单个条目，但我觉得这不是一种优雅的方式，因为您必须连接两个表才能获得汽车的颜色。无论如何我可以创建一个关系，我可以只做 car1.color.name 来获取颜色的名称吗？

请记住，我不想创建 1-1 关系，我只想要一组颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:24:39.840

车应该`belong_to :color`，颜色应该`has_many :cars`。

# python - 在 OrderedDict 中更改键而不丢失顺序

> ID：12150872
> 
> 赞同：29
> 
> 时间：2012-08-27T23:22:30.863
> 
> 标签：python, ordereddictionary

从...开始

```
OrderedDict([('a', 1), ('c', 3), ('b', 2)]) 
```

有可能最终得到

```
OrderedDict([('a', 1), ('__C__', 3), ('b', 2)]) 
```

确保`'__C__'`项目之前`'b'`和之后，`'a'`即保持秩序？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T23:29:06.757

你可以试试：

```
>>> d = OrderedDict([('a', 1), ('c', 3), ('b', 2)])
>>> d
OrderedDict([('a', 1), ('c', 3), ('b', 2)])
>>> d2 = OrderedDict([('__C__', v) if k == 'c' else (k, v) for k, v in d.items()])
>>> d2
OrderedDict([('a', 1), ('__C__', 3), ('b', 2)]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-19T13:14:42.573

如果你想改变当前的字典对象：

```
def change_key(self, old, new):
    for _ in range(len(self)):
        k, v = self.popitem(False)
        self[new if old == k else k] = v 
```

这通过迭代整个`OrderedDict`（使用它的长度）并将[其第一项](https://docs.python.org/3/library/collections.html#collections.OrderedDict)（通过传递`False`给`.popitem()`：此方法的默认值是弹出最后一项）弹出到`k`和`v`（分别代表*key*和*value*）中来工作；然后在`OrderedDict`.

通过对字典的整个大小重复这个逻辑，它有效地完全旋转了字典，从而重新创建了原始顺序。

# html - 在 HTML 中绝对居中表格

> ID：12150876
> 
> 赞同：0
> 
> 时间：2012-08-27T23:23:18.967
> 
> 标签：html, css, html-table, center, dreamweaver

我使用 Dreamweaver 将图像切割成不同的部分；本质上，每一块都被“切割”并存储在 HTML 表格中。（根据我的理解）。

将这个“表格”居中以使图像位于我的网页中间的正确方法是什么？（水平和垂直）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:26:53.737

尝试在表格标签中使用`align="center"`和`valign="middle"`

# ios - 在容器视图中嵌入表格时控件消失

> ID：12150878
> 
> 赞同：0
> 
> 时间：2012-08-27T23:23:37.403
> 
> 标签：ios, uitableview

我有一个带有一个原型单元格的表格视图。例如，如果我为此添加标签，则它在应用程序运行时可见。如果我随后将此表视图嵌入到容器视图中，则单元格仍然可见，但标签会消失。这是一个已知的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:56:21.437

当您将它添加到容器视图时，您可能会再次收到对 tableCell 的请求，这可能就是您的问题所在。将日志消息添加到您的 dataSource 委托和委托方法，并查看表在做什么。

我一直在移动视图，在容器视图中有 tableViews，一切正常。还要确保在 tableView 移动时对它有一个强引用，这样它就不会被 dalloced 然后重新创建。使用日志消息，您应该能够对其进行分类。

# applescript - Spotify AppleScript 奇怪的艺术作品行为和意外的 SpotifyImageData

> ID：12150881
> 
> 赞同：0
> 
> 时间：2012-08-27T23:24:15.203
> 
> 标签：applescript, spotify, scripting-bridge

我使用 Scripting Bridge (Cocoa) 来访问 Spotify 的 AppleScript 方法和属性。例如，我需要访问当前播放曲目的插图。

在我的大多数机器上，Spotify 推送了一个普通的`NSImage`类实例，我可以通过类似的东西访问它`[[spotifyApp currentTrack] artwork]`，并且一切都按预期工作。

但是在我的一台机器和一个朋友的机器上——而不是一个类的实例——我通过调用 still same`NSImage`变得非常奇怪。这个类没有方法（我试图通过 Objective-C 运行时机制搜索这些方法），也没有属性。我不能将它用作，因为它实际上*不是*图像。它是什么？我应该如何处理？这个奇怪的错误只出现在 Spotify 的最新版本中，在以前的版本中没有发现。`SpotifyImageData``[[spotifyApp currentTrack] artwork]``NSImage`

 *我所有的机器都安装了相同版本的 OS X 和最新版本的 Spotify。此外，我的 Mac 上没有使用第三方系统范围的实用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:35:34.093

根据脚本定义文件，它是“图像数据：TIFF 格式的图像数据”。我从未真正使用过 Cocoa Scripting，但尝试将其转换为 NSData。*

# linux - 使用“echo”通过管道传递值

> ID：12150883
> 
> 赞同：-1
> 
> 时间：2012-08-27T23:24:22.067
> 
> 标签：linux, oracle, pipe, echo

我在用着 `Linux 2.6.x.x.x
SUSE Linux Enterprise Server 10 (i586)`

我想知道的问题是**如何通过管道将值传递给命令？**
在所有其他操作系统上，包括`DOS`，我可以使用：

```
echo <value> | <command> 
```

但是`Linux`，这似乎不起作用。

例如，我想将 a 传递给根据从文件中读取的内容设置`Database Name`的命令。`Oracle``Environment Variables``Database``oratab`

通常，该命令将运行为：

```
 . oraenv   (to source environment variable settings) 
```

然后，它会提示您输入数据库名称。

但是，如果我运行: `echo <some_db_name> | . oraenv` ，它会在没有提示的情况下工作，并且在除此版本的 Linux 之外的每个平台上的脚本中都很有用。

有任何想法吗？

```
$ <> /home/oracle>echo $SHELL   
/bin/bash 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:38:20.433

在 Unix 上，管道用于在另一个程序的输入中传递一个程序的输出。

前任：

```
$ echo "b c a e d" | tr " " "\n" | sort 
a
b
c
d
e 
```

来自[http://www.orafaq.com/wiki/Oraenv](http://www.orafaq.com/wiki/Oraenv)

非交互式（便于编写脚本）：

```
$ export ORACLE_SID=orcl
$ export ORAENV_ASK=NO
$ . oraenv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:58:20.710

您是否已经尝试过这样的事情？：

> 回声“表” | ./oraenv -

其中“-”表示 /dev/stdin

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T00:58:08.283

所以如果我理解正确，你想设置 user `profile`。通常，环境变量`EXPORTED`位于`profile`文件中。但是，如果您想建立自己的配置文件，您可以向用户询问值，例如

```
echo "Enter the DB Name:"    #This is optional but can be used in case if someone runs the script like $ . ./oraenv
read ORACLE_SID    # ORCL_SID is a variable
. oraenv 
```

一旦你在`oraenv`命令中放置类似上面的东西`echo <db name>|. ./oraenv`应该可以工作。另一种方法是使用命令行参数，如

```
if [ $# -lt 1 ]             # $# is the number of arguments passed to the script
then
    echo "DB Name must be entered"
    exit 0
else
    ORACLE_SID =$1             # initialize $1 is the first arg which is the db name, consecutive args can be accessed by $2, $3 and so on.
    . oraenv
fi 
```

完成上述操作后，以下命令应该可以工作。

```
$ . ./oraenv oradev 
```

说了这么多，该`oraenv`实用程序是一个 Oracle 实用程序，您将无法编辑或修改该实用程序。所以最好的方法是`EXPORTING`运行前的变量`oraenv`，上面的解决方案适用于自定义`oraenv`脚本（如果你想写一个）。

# actionscript-3 - 用户输入数学方程

> ID：12150890
> 
> 赞同：1
> 
> 时间：2012-08-27T23:24:56.230
> 
> 标签：actionscript-3

我有一个程序，它采用用户给出的数学方程并绘制方程的图形（函数）。

问题是出于安全考虑，我无法将初始方程传递到计算机上（即，我需要编写自己的程序来分解方程、括号和所有内容，并在其中单独编写每个除法、乘法、加法和减法方程）。

这个过程需要大量时间，因此使我的程序“太慢”。

有谁知道解决这个问题的方法？

我正在使用 Flash Pro CS5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:59:32.910

您可能会发现这很有帮助： [http ://www.kirupa.com/forum/showthread.php?251592-Equation-Parser](http://www.kirupa.com/forum/showthread.php?251592-Equation-Parser)

# cuda - GTX 680 是否支持并发数据传输

> ID：12150892
> 
> 赞同：3
> 
> 时间：2012-08-27T23:25:25.577
> 
> 标签：cuda, gpu, cuda-streams

我预计 GTX 680（它是最新版本的 GPU 之一）能够进行并发数据传输（双向并发数据传输）。但是当我运行cuda SDK“Device Query”时，“Concurrent copy and execution”这个词的测试结果是“Yes with 1 copy engine”，这意味着GPU不能进行并发数据传输。

我想知道我的测试结果是否也发生在你身上？您能与我分享哪些设备能够进行并发数据传输吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T00:17:14.437

Tesla 卡和模块上提供双拷贝引擎：

[http://www.nvidia.com/object/why-choose-tesla.html](http://www.nvidia.com/object/why-choose-tesla.html)

[http://www.nvidia.com/docs/IO/43395/NV-DS-Tesla-C2075.pdf](http://www.nvidia.com/docs/IO/43395/NV-DS-Tesla-C2075.pdf)

此外，某些 Quadro 型号提供双拷贝引擎，例如：

[http://www.nvidia.com/docs/IO/40049/Dual_copy_engines.pdf](http://www.nvidia.com/docs/IO/40049/Dual_copy_engines.pdf)

[http://www.nvidia.com/object/quadro-k5000.html](http://www.nvidia.com/object/quadro-k5000.html)

# asp.net - 转移旧的 DotNetNuke 站点

> ID：12150894
> 
> 赞同：0
> 
> 时间：2012-08-27T23:25:38.137
> 
> 标签：asp.net, dotnetnuke

我正在尝试帮助客户将旧的 DotNetNuke 站点移动到新主机（旧主机正在关闭）

DNN 站点运行版本 3.2（根据 DotNetNuke.dll 上的右键单击 > 详细信息 > 产品版本）。

我很难找到关于这个旧版本的信息。

这需要什么版本的 ASP.NET？

新主机有 .NET 2 和 4。有可能在 .NET 2 机器上设置吗？

有没有什么地方可以得到这方面的原始手册？（DNN 站点只回溯到第 5 版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:26:20.503

The general process of moving a site is:

*   Copy all the files in the website folder to new server
*   Backup and restore the database on the new server
*   Configure IIS for the new site
*   Edit connection string in web.config for new sql server credentials

You can find some docs that shipped with the release at [http://dotnetnuke.codeplex.com/releases/view/19992](http://dotnetnuke.codeplex.com/releases/view/19992).

I also noticed that the 3.x line requires .Net1.1, the 4.x line uses .Net2\. That was way before my involvement with DNN.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:29:43.950

3.2 在 1.1 上运行。我在 2.0 上已经取得了一些成功，但这将取决于模块。不过，您很可能希望在 1.1 上使用它。

# python - 试图找出错误并修复。Python批量重命名程序

> ID：12150896
> 
> 赞同：0
> 
> 时间：2012-08-27T23:25:56.623
> 
> 标签：python, python-2.7

我正在为学校作业[http://cit.dixie.edu/cs/1410/asst_bulkrename.html](http://cit.dixie.edu/cs/1410/asst_bulkrename.html)做这个。我刚刚完成编码，现在无法弄清楚我做错了什么。当我使用“python bulk.py sub iphone”从命令行运行它时，“sub”是包含图像的文件夹，“iphone”是前缀，我得到这个错误：

```
linux@ubuntu:~/Documents$ python bulk.py sub iphone
Directory: ['sub']
Prefix: iphone
['pic 4', 'pic 5', 'red sky (another copy).jpg', 'pic 3', 'pic 8 ', 'red sky (copy).jpg', 'pic 7', 'pic 6', 'red sky.jpg', 'pic 1', 'pic 2', 'red sky (4th copy).jpg', 'red sky (3rd copy).jpg']
Traceback (most recent call last):
File "bulk.py", line 173, in <module>
main()
File "bulk.py", line 152, in main
inorder = sortByMTime(path, matching)
File "bulk.py", line 37, in sortByMTime
for file in matching:
TypeError: 'NoneType' object is not iterable 
```

我想我已经盯着代码太久了，完全错过了一些东西。任何帮助都是极好的。

```
import os
import sys
import random

directory = []
prefix = []
path = []

def filterByExtension(root, allfiles, extensions):
  matching = []
  ext = []
  for i in allfiles:
    name = i
    dot = name.rfind('.')
    ext = name[dot::].lower()
    if ext not in extensions:
      continue
    else:
      path = os.path.join(root, name)
      if not os.path.isfile(path):
        print "Error 404, file not found. Loading"
        print "blue screen of death in 10 seconds"
        print "unless mistake is corrected accordinly"
        continue
        matching.append(name)
    return matching

def sortByMTime(root, matching):
  presort = []
  for file in matching:
    path = os.path.join(root, file)
    mtime = os.path.getmtime(path)
    presort.append((mtime, file))
    presort.sort()
  print "Here is the presorted shtuff",presort
  return presort

def assignNames(prefix, inorder):
  count = ''
  digits = 0
  count = str(len(inorder))
  digits = len(count)
  template = '%%0%dd' % digits
  newnames = {}
  count = 0
  for i in inorder:
    count += 1
    s = template % count
    newnames[i[1]] = prefix+s+'.'+i[1].split('.')[1]
  print "Here are the new names that will be used",newnames
  return newnames

def makeTempName(allfiles):
  n = random.randant(1,1000000000)
  t = '__temp' + str(n) + '__'
  while t in allfiles:
    n+=1
    t = '__temp' + str(n) + '__'
  return t

def makeScript(inorder, newnames, tempname):
  script = []
  print
  print "a"
  print
  for elt in inorder:
    print
    print "b"
    print
    chain = []
    inthechain ={}
    if elt not in newnames:
      continue
    elif newnames[elt] == elt:
      del newnames[elt]
      continue
    elif newnames[elt] not in newnames:
      print "Script Output"
      script.append((elt,newnames[elt]))
      del newnames [elt]
      continue
    else:
      link = elt
      while True:
        target = newnames[elt]
        chain.append((link,target))
        inthechain[link] = True
        link = target
        if link not in newnames:
          break

    chain.reverse()
    for (a,b) in chain:
      script.append(a,b)
      del newnames[a]
  return script

def doRenames(path, script):
  for entry in script:
    print entry[0],'---->',entry[1]
  oldpath = os.path.join(path, entry[0])
  newpath = os.path.join(path, entry[1])
  if os.path.exists(newpath):
    print "Error 404, file name seems to alrady exist"
    sys.exit(1)
  os.rename(oldpath, newpath)

def main():

  if len(sys.argv) <= 1 or len(sys.argv) > 3:
    print "You have messed up, please check your arguments again"
    sys.exit(1)

  elif len(sys.argv) == 3:    
    directory = sys.argv[1]
    path = os.path.abspath(directory)
    dirname = os.path.basename(path)
    print "Directory: ", sys.argv[1:-1]
    print "Prefix: ", sys.argv[-1]
    allfiles = []
    allfiles = os.listdir(sys.argv[1])
    print allfiles
    extensions = []
    extensions = ['jpeg','jpg','png','gif']
    matching = filterByExtension(path, allfiles, extensions)
    inorder = sortByMTime(path, matching)
    newnames = assignNames(prefix, inorder)
    tempname = makeTempName(allfiles)
    script = makeScript(inorder, newnames, tempname)
    renamed = doRenames(path, script)

  else:
    directory = sys.argv[1]
    path = os.path.abspath(directory)
    dirname = os.path.basename(path)    
    print "Directory: ", path
    print "Prefix: ", dirname

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:31:24.147

In `filterByExtension`,在 for 循环内，因此如果为空或使用 跳过每个条目，`return matching`则可以跳过（导致返回值） 。修复缩进以消除此错误。`None``allfiles``continue`

# javascript - 如何使用 Firefox 扩展 API 刷新书签

> ID：12150897
> 
> 赞同：0
> 
> 时间：2012-08-27T23:26:11.303
> 
> 标签：javascript, api, firefox

我正在编写一个自动对书签进行排序的 Firefox 扩展。

一切正常，除了一件事：

书签不刷新。

书签已排序，但 Firefox 不会刷新书签列表。

我正在使用[书签观察](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavBookmarksService#addObserver%28%29)器来了解何时添加书签。

在[onItemAdded() 方法](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavBookmarkObserver?redirectlocale=en-US&redirectslug=nsINavBookmarkObserver#onItemAdded%28%29)中，我调用我的排序函数。该文件夹已排序，但 Firefox 不显示它。如果我关闭 Firefox 并重新打开它，则该文件夹已排序。如果我单击“显示所有书签”并单击文件夹，我也可以看到它已排序。

我在我的扩展程序中添加了一个按钮，当我单击它时，书签会毫无问题地进行排序。当书签在书签插入或移动后立即排序时，就会出现此问题。

顺便说一句，当用户移动书签时，我的扩展程序也会对书签进行排序。如果我在同一文件夹中移动书签，书签会刷新。但是，如果我将书签移动到另一个文件夹中，它们不会刷新。

所以我寻找一种方法来刷新 Firefox 书签以在正确的时间显示排序的文件夹。

有没有办法做到这一点？如果没有，你有什么建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:37:35.423

我通过使用 setTimeout() 解决了我的问题，以便脚本在排序前等待一秒钟。这工作正常，书签得到排序和刷新。

# git - 为什么 git log 不默认为 git log --follow？

> ID：12150899
> 
> 赞同：20
> 
> 时间：2012-08-27T23:26:18.400
> 
> 标签：git

如果我们曾经将文件移动到不同的位置或重命名它，它以前的所有历史都会丢失在 中`git log`，除非我们特别使用`git log --follow`. 我认为通常情况下，预期的行为是我们也希望看到过去的历史，而不是在重命名或移动后“切断”，那么有没有理由`git log`不默认使用`--follow`标志？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-08-16T20:34:49.543

注意：从 git 2.6 (Q3 2015) 开始，git log 可以**默认**跟随历史记录一个文件！

请参阅[David Turner (](https://github.com/dturner-tw) [)的](https://github.com/dturner-tw)[提交 076c983](https://github.com/git/git/commit/076c98372e7d3c86d269c1526349a67b73904330)（2015 年 7 月 8 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 2dded96](https://github.com/git/git/commit/2dded96052114c7b902d90f80f75a30eb64d860a))^(中，2015 年 8 月 3 日）)[`dturner-tw`](https://github.com/dturner-tw)
^([`gitster`](https://github.com/gitster))

> # `log`: 添加“ `log.follow`”配置变量
> 
> 从事具有大部分线性历史且频繁重命名整个文件的项目的人可能希望`git log --follow`在检查位于单个路径中的内容的生命周期时始终使用“”。
> 
> **当设置了配置变量*并且*命令行上有一个（并且只有一个）路径时，教导命令表现得好像`--follow`从命令行给出了“”`log.follow`***。*

 *```
git config log.follow true 
```

注意：还有一个（奇怪的是在 2020 年和 Git 2.25 中仍然没有记录）`--no--follow`选项，它可以覆盖`log.follow`配置设置。
[Vser](https://stackoverflow.com/users/2622010/vser)提出了一个[补丁](https://public-inbox.org/git/85e71c97-9e0a-863e-179f-a6e1f14365ce@voucoux.fr/T/#u)。
Jeff King (peff) 指出了[我在讨论中提到](https://chat.stackoverflow.com/transcript/message/48479226#48479226)的相同提交：[commit aebbcf5](https://github.com/git/git/commit/aebbcf57972961c221c75dee039a17be8cfae1ad)，Git 1.8.2，2012 年 9 月，在哪里`--no-follow`被引入。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T23:37:31.310

大概是因为`git log`通常用于显示整体提交历史，而不是单个文件或路径的历史。该`--follow`选项仅在您查看单个文件时才相关（并且在您命名多个文件时不起作用）。由于这不是最常见的情况，因此将其添加为默认值并没有任何意义。

如果你想让它成为你自己的默认值，你总是可以创建一个别名：

```
git config --global alias.lf 'log --follow' 
```

现在你可以做得到`git lf <filename>`你想要的行为。

**注意：**如果您想向邮件列表提出您要求的更改并查看人们的想法，您可以在**[此处](http://git-scm.com/community)**进行。或者，更好的是，您可以**[提交补丁](https://github.com/git/git/blob/master/Documentation/SubmittingPatches)**！*

# grails - Grails gorm：在其他表中查找缺失的条目

> ID：12150900
> 
> 赞同：1
> 
> 时间：2012-08-27T23:26:22.890
> 
> 标签：grails, grails-orm

我有两个表：EventSession 和 EventTrack

EventSession 有很多 EventTrack，但也可以没有 EventTrack。EventTrack 属于 EventSession。

如何获取没有 EventTrack（零）的所有 EventSession。就像是：

```
def es = EventSession.createCriteria()
def _es = es.list {
   count("eventTracks") == 0  // I know this is wrong
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:14:27.423

HQL 可以为您做到这一点：

```
String hql = "select e from EventSession e " +
             " where not exists(select 1 from EventTrack t where t.eventSession = e)"
List<EventSession> eventsWithoutTracks = EventSession.executeQuery(hql) 
```

我认为您可以对`createCriteria()`左外连接执行相同的操作，过滤 EventTrack 的 id 为空的位置（未测试）

```
def es = EventSession.createCriteria().list() {
  eventTracks {
    isNull('id')
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:49:29.593

[哪里](http://grails.org/doc/latest/guide/GORM.html#whereQueries)：

`EventSession.where { count(eventTracks) == 0 }`

[标准](http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html)：

```
EventSession.withCriteria {
  isEmpty 'eventTracks'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T00:17:05.870

EventSession.findAllByEventTracksIsNull() 怎么样？

# php - 有没有办法在不使用 eval() 的情况下读取预先解析为结果 HTML 的本地 PHP 文件？

> ID：12150901
> 
> 赞同：1
> 
> 时间：2012-08-27T23:26:43.723
> 
> 标签：php, parsing, local-files

这似乎应该是一个明显、快速的解决方案，但事实并非如此。

我有一个本地文件，它执行一些数据库工作并输出 HTML，我们称之为`file1`. 我有另一个文件需要使用其中的一些信息，但不需要自己生成它，`file2`.

我的计划是将预解析的 PHP（此时为 HTML）`file2`拉入 . 这显然可以用 来处理`eval()`，但我宁愿不这样做。类似的东西`wget()`可能会起作用，但如果可能的话，我宁愿不要从我的 PHP 脚本运行命令行。

在避免上述两个选项的同时是否有解决方案，还是我必须硬着头皮使用其中一个？

**快速澄清：**`file1`未使用全部。`file2`砍掉它需要的部分，因此简单地输出所有生成的 HTML`file1`是不可行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:30:54.770

您可以尝试以下方法来缓冲输出并将其保存到变量中：

```
ob_start();
include "file1.php";
$content = ob_get_contents();
ob_end_clean(); 
```

现在您的`$content`遗嘱包含源文件的“回显”输出。

`ob_*`功能是内容缓冲系列。他们暂时禁用向 输出数据`STDOUT`，而是将回显的内容存储在缓冲区中。[文档](http://php.net/manual/en/function.ob-start.php)。

[Ideone 上的示例](http://ideone.com/SFbh3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:29:08.227

file_get_contents("http://Full.URL"); 并使其通过 30 个字符..

- 编辑 -

好的。

当您在 URL 上尝试 file_get_contents 时，php 将请求 URL，就像 good-o-wget 一样。您也可以使用它来触发脚本。

检查[http://www.php.net/manual/en/function.file-get-contents.php](http://www.php.net/manual/en/function.file-get-contents.php)了解更多信息。

# python-2.7 - 如何在 Python 中随机播放一列（年）并保留相应的列值？

> ID：12150908
> 
> 赞同：2
> 
> 时间：2012-08-27T23:27:33.283
> 
> 标签：python-2.7

我有一个包含五列的文本文件。第一列有年份（2011 年到 2040 年），第二列有 Tmax，第三列有 Tmin，第四列有 Precip，第五列有 Solar 30 年。我想编写一个 python 代码，将第一列（年份）洗牌 10 次，其余列中包含相应的原始值，即：我只想洗牌年份列 10 次，以便第 1 年将有相应的价值观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:39:00.840

将文本读取为行列表，每行是列的列表或元组。该`csv`模块可能对此有用。

然后只是洗牌。该`random`模块有一个名为`shuffle`.

编辑：

假设输入格式为 CSV（逗号分隔值）：

```
import csv
import random

input_path = r"path\to\input"
output_path = r"path\to\output"

with open(input_path, "rb") as file:
    rows = list(csv.reader(file, delimiter=","))

random.shuffle(rows)

with open(output_path, "wb") as file:
    csv.writer(file, delimiter=",").writerows(rows) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:04:29.740

你熟悉 NumPy 吗？一旦将数据保存在 numpy`ndarray`中，就可以轻而易举地在保持列顺序的同时打乱行，而无需创建许多临时对象。

您可以使用诸如`np.genfromtxt`读取数据文件并创建`ndarray`具有不同命名字段的功能。然后，您可以使用该`np.random.shuffle`函数重新组织行。

# wpf - 在 WPF 的堆栈面板中对齐左侧和右侧的控件

> ID：12150914
> 
> 赞同：76
> 
> 时间：2012-08-27T23:28:44.123
> 
> 标签：wpf, xaml, layout, alignment, stackpanel

我有以下代码：

```
<DockPanel>
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
        <RadioButton Content="_Programs" 
                    IsChecked="{Binding Path=ProgramBanksSelected}" IsEnabled="{Binding Path=ProgramsEnabled}" Margin="8" />
        <StackPanel>
            <Label Content="Master" Height="28" Name="MasterFileStatus" VerticalContentAlignment="Center"/>
        </StackPanel>
    </StackPanel>
    ... 
```

单选按钮应放在堆栈面板的左侧（我删除了一些按钮以免使示例混乱），标签（我暂时放在嵌套的 StackPanel 中）应位于右侧。

我已经尝试了很多对齐组合，但我无法在右侧获得标签。我应该添加什么来实现这一点？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-08-27T23:36:35.487

只是不要使用`StackPanel`, `StackPanels` ***stack***。出于显而易见的原因，它们确实不允许在它们堆叠的方向上对齐。使用[`Grid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx), 列定义如下：

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
</Grid.ColumnDefinitions> 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2017-02-15T23:24:42.620

即使这是旧的，如果有人像我一样遇到这个，这里有一个简单的解决方案。

制作一个新网格，并在该网格内放置两个具有不同水平对齐方式的堆栈面板。

```
<Grid>
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
        <!--Code here-->
    </StackPanel>
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
        <!--Code here-->
    </StackPanel>
</Grid> 
```

可能的问题是，现在如果没有额外的处理，两者可能会相互重叠。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-27T23:36:24.877

由于您已将`StackPanel`的方向设置为`Horizontal`，因此该`HorizontalAlignment`属性将不适用于子元素。如果您需要额外的控件，您可以保留`StackPanel`，但我建议切换到`Grid`（除其他外）来构建您想要的布局。

此外，这`Grid`将允许您控制每列的​​实际宽度：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="50" />
        <ColumnDefinition Width="150" />
    </Grid.ColumnDefinitions>

    <RadioButton
        Grid.Column="0"
        ...
    />

    <Label
        Grid.Column="1"
        ...
    />
</Grid> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-26T07:48:40.497

用户@pasx 是对的。您应该使用 DockPanel 并将 RadioButton 停靠在左侧，将带有标签的 StackPanel 停靠在右侧。

```
<DockPanel>

    <DockPanel 
        DockPanel.Dock="Top" 
        LastChildFill="False" >

        <RadioButton 
            DockPanel.Dock="Left" 
            Content="_Programs" 
            IsChecked="{Binding Path=ProgramBanksSelected}"
            IsEnabled="{Binding Path=ProgramsEnabled}" 
            Margin="8" />

        <StackPanel
            DockPanel.Dock="Right">

            <Label 
                Content="Master" 
                Height="28" 
                Name="MasterFileStatus" 
                VerticalContentAlignment="Center"/>

        </StackPanel>

    </DockPanel>
    ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-05T14:49:38.960

如示例所示，以嵌套方式使用 Stackpanel 方向类型。网格宽度设置为父宽度以实现全宽度。

```
<StackPanel x:Name="stackBlah" Orientation="Vertical">
    <StackPanel Orientation="Horizontal">
        <Grid Width="{Binding ActualWidth, ElementName=stackBlah}" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
            </Grid.RowDefinitions>

            <StackPanel Grid.Column="0" HorizontalAlignment="Left" >
                <Button Content="Some button" />
            </StackPanel>
            <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                <ToggleSwitch Header="Some toggle" AutomationProperties.Name="ToggleNotifications"/>
            </StackPanel>
        </Grid>
    </StackPanel>
</StackPanel> 
```

# java - 调用者对象方法来销毁另一个对象

> ID：12150919
> 
> 赞同：0
> 
> 时间：2012-08-27T23:29:07.823
> 
> 标签：java

如果我创建类型的对象和类型的`lion`对象`prey`，我想做：

```
lion.eat(prey) 
```

在。。。期间

```
lion.energy=energy+10,as an example.
prey=null 
```

但我也想从逻辑生态系统中彻底摧毁猎物。

我知道垃圾收集器和所有这些，而且你们所说的关于垃圾收集器的所有事情都会在没有任何东西指向它时立即销毁该对象。

但我正在一个虚拟生态系统中实现一个包含数百万狮子和鹿实例的遗传算法。现在如何消除死去的动物？

请不要开玩笑，我厌倦了总是在垃圾收集器和对象谋杀的相同答案上绊倒，我想要一个解决方案的描述，以在逻辑上从狮子方法中取消引用猎物对象。

```
public class prey
{
  int energy=10;
}

public class lion
{
  int energy=0;

  public void eat(prey aDeer)
  {
    this.energy=aDeer.energy+this.energy; ///acumulate energy values from prey
    aDeer=null;//destroys the object from ecosystem, which seems impossible to do in java
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:36:11.927

您已经拥有数百万的猎物，并且可能将它们存储在一个集合中；例如，一个`ArrayList`. 从`ArrayList`;中删除一个项目非常简单。调用它的`.remove()`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:53:30.437

正如已经提到的，您不能在 Java 中执行显式内存管理。您所能做的就是确保没有引用使死对象保持活动状态（双关语！）并让垃圾收集器完成其工作。请注意，这可能比显式内存管理更有效，特别是在大量小对象被破坏的情况下。

如果您的人口总体规模的变化比其成员出生和死亡的速度慢得多，那么您可能确实，正如@veer 建议的那样，考虑保留一个动物池，而不是创建新对象，当它们从池中提取它们时出生并在他们死后返回那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:00:50.323

如果对象的创建和销毁是瓶颈（通过分析而不是猜测来查找），您可以将所有动物放入数组（或数组列表以允许增长，如果最大人口未知），在每个动物中存储其当前索引，以及何时杀死动物，将其与最后一个活着的动物交换并减少活体动物的计数器。简而言之，按照前面的建议制作动物池。如果只有少数动物留给下一代，请考虑 2 个阵列，只需遍历前一个并处理生活到新一代并切换这些阵列。

但是为了使它有用，你需要让所有动物（在给定的数组中）在结构上是相同的，所以曾经的鹿可以成为下一次的兔子。所以要么只有动物类，要么每个物种一个数组。

PS。不要试图找到手动销毁对象的方法，要么找到避免创建和销毁对象的方法（特别是如果生成大小没有太大变化，那么每个人都将再次被需要）或依赖 GC。

# java - 从 Java 服务器下载 HTTP

> ID：12150921
> 
> 赞同：4
> 
> 时间：2012-08-27T23:29:20.177
> 
> 标签：java, http, java-server

我需要编写一个小型 Java 服务器，可以通过 Web 浏览器访问以下载文件，最好使用套接字。谁能指出我正确的方向，因为我只能找到相反的示例（使用 java 客户端从 http 下载）。

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:34:11.543

如果不需要，不要重新发明轮子，嵌入 Jetty 来做到这一点：[http ://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T23:47:04.210

根据您的所有要求（即协议限制），您可以开始查看

*   [关于插座](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)
*   如前所述，您可以考虑使用[Jetty](http://jetty.codehaus.org/jetty/)
*   [Apache](http://httpd.apache.org/)或[Tomcat](http://tomcat.apache.org/)
*   几乎任何其他 HTTP 服务器？

它将归结为：

*   您想进入多少复杂性（时间和精力）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T00:01:48.153

您还可以为此使用 3rd 方库，例如[JBoss Netty](https://netty.io/)和[Apache MINA](http://mina.apache.org/)或[Apache HTTP Comp](http://hc.apache.org/)。另外，我对此不太了解，但新的 JDK7 有一些[新的 NIO api](http://docs.oracle.com/javase/7/docs/api/)可能也可以完成这项工作。

这是一个使用 Apache HC 编写 [的示例 HTTP 服务器。](http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpServer.java)

注意：我认为做这种事情的流行方式是使用“Web Sockets”，您可以在我提供的链接中找到有关它的信息。

# url - 双斜杠 URL 样式在哪里合法？("//connect.facebook.net")

> ID：12150928
> 
> 赞同：4
> 
> 时间：2012-08-27T23:30:48.833
> 
> 标签：url

我最近看到了这种风格的 URL：

```
//connect.facebook.net/ 
```

我想这意味着：如果当前页面是 http，则转到`http://connect.facebook.com/`，如果是 https，则转到`https://connect.facebook.com/`. 在哪些浏览器/版本中是合法的？它是什么时候引入标准的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:42:00.977

是的。当前标准§4.2。RFC 3986。

最初在 RFC 1808, 1995 中给出，这是第一个专门定义相对 URI 的 RFC，尽管 RFC 1630, 1994 给出了稍微不同的定义，但仍然允许这样做。

有比这些 RFC 更早的文档，所以如果有人能找到该文档的存档版本`ftp://info.cern.ch/pub/www/doc/http-spec.txt`（第一个版本是 1991 年），那么如果该文档给出了这样的表格，他们也许可以给出更早的日期，但它需要比我现在能做的更多的历史研究工作。

从本质上讲，它们总是被允许的，当然，因为有任何我们可以称之为标准的东西，该标准允许它。

# ember.js - 以前在 jsfiddle 上工作的 emberjs1.0-pre 表单返回“错误”：“请使用 POST 请求”

> ID：12150929
> 
> 赞同：0
> 
> 时间：2012-08-27T23:30:53.730
> 
> 标签：ember.js

这段代码** [http://jsfiddle.net/wagenet/ACzaJ/8/](http://jsfiddle.net/wagenet/ACzaJ/8/) **几天前还在工作，当我今天回到它时，它抛出**{"error": "Please use POST request"}**，当我单击**添加按钮** 此外，jsfiddle editor.js 总是在这一行抛出异常： **function stop(){cc = stop; 抛出 StopIteration;};** 有谁知道这个问题的原因。

非常感谢

**更新**

***请向下滚动查看我发布的许多更新作为补充彼得最初答案的答案。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:48:12.703

这里有很多问题。

1.  你实际上并没有使用 1.0 pre，你使用的是 master。
2.  在master中，您需要调用`App.initialize()`事件侦听器才能工作
3.  您不应该在按钮上设置`{{action}}`助手。表单视图已经有一个方法，当表单上发生事件时`submit`会自动调用该方法。`submit`
4.  有问题`valueBinding`。它似乎是一个 Ember 错误，因为如果您删除`id="new-todo"`.
5.  解决所有这些问题后，我还看到了 Metamorph 错误。我没有尝试比这更远的调试，因为您现在可能应该只使用 1.0 pre。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:09:43.553

**更新 1**

根据下面@Peter Wagenet 的建议，表单现在将条目或输入记录到控制台，但它不会显示在 jsfiddle 的结果部分，而是显示在 jsfiddle 结果部分或页面上仍然是这个错误 {"error": "请使用 POST 请求"}

** [http://jsfiddle.net/ACzaJ/18/](http://jsfiddle.net/ACzaJ/18/)

**更新 2**

在这个小提琴[http://jsfiddle.net/ACzaJ/19/](http://jsfiddle.net/ACzaJ/19/)中，我通过添加 event.preventDefault(); 成功消除了这个错误 {"error": "Please use POST request"}; Todos.TodoFormView 中的提交操作。这允许我们使用任意视图方法作为操作处理程序。

现有问题是表单的输入仅显示在控制台上，而不显示在 jsfiddle 结果部分，虽然结果部分没有显示错误，但更新后的 fiddle 的控制台中出现了一个新错误：

*未捕获的错误：无法对不在 DOM 中的 Metamorph 执行操作。*

**终于解决了**

我需要注释掉 App.initialize() 才能按预期工作，另见彼得回答的第 2 点。这是工作小提琴** [http://jsfiddle.net/ACzaJ/20/](http://jsfiddle.net/ACzaJ/20/)。

类似于上面的工作小提琴，但为文本字段指定了 id="new-todo"，因此这意味着 ember 没有影响 'id' 的错误，请参见 Peter 的第 4 点。[http://jsfiddle.net/ACzaJ/21/](http://jsfiddle.net/ACzaJ/21/)

我不知道为什么使用 App.initialize() 会使应用程序无法工作，但我的猜测是，App.initialize 可以与其他部分一起使用，例如用于路由的路由器、ApplicationController 和 ApplicationView 中的 {{outlet}}车把，我不需要这个小提琴。

**终于终于彻底解决了**

** [http://jsfiddle.net/tQWn8/](http://jsfiddle.net/tQWn8/)， ** [http://jsfiddle.net/tQWn8/1/](http://jsfiddle.net/tQWn8/1/)（第二个链接使用指定的id）。我能够让它与 App.initialize 一起工作。但是我必须声明上面列出的所有组件并将路由器传递给 App.initialize，就像这个 App.initialize(router)。如果你不这样做，那么你会得到旧的错误

*未捕获的错误：无法对不在 DOM 中的 Metamorph 执行操作。*

有关更多信息，请参阅 emberjs 初始化函数的文档：

[http://docs.emberjs.com/?#doc=Ember.Application&method=initialize&src=false](http://docs.emberjs.com/?#doc=Ember.Application&method=initialize&src=false)

非常感谢 Peter Wagenet 的指导

# c++ - 在动态转换后调用特定的类方法 - 奇怪的行为

> ID：12150931
> 
> 赞同：2
> 
> 时间：2012-08-27T23:31:05.963
> 
> 标签：c++, pointers, casting

这是一个与我发布的另一个问题不同的问题，我有这段代码：

```
class Base
{
public:
    Base()
    {

    };

    virtual void Method()
    {
        cout << "Base Method";
    }
};

class Derived : public Base
{
public:
    virtual void Method()
    {
        cout << "Override Method";
    }
};

class Derived2 : public Derived
{
public:

    Derived2()
    {

        cout << "Derived2 constructor";
    }
    void Method()
    {
        cout << "Override2 Method";
    }
};

int main()
{

    Base *myPointer = new Derived();

    dynamic_cast<Derived2*>(myPointer)->Derived2::Method();

    Sleep(700);

    delete myPointer;

    return 0;
} 
```

如果我写

```
dynamic_cast<Derived2*>(myPointer)->Method(); 
```

有一个失败（dynamic_cast 返回 NULL 并且 NULL->Method() 引发异常）这是我所期待的，但是如果我写

```
dynamic_cast<Derived2*>(myPointer)->Derived2::Method(); 
```

该函数甚至无需调用 Derived2 构造函数即可成功。方法甚至不是静态函数，这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:34:20.560

您通过在 NULL 指针上调用成员函数触发了未定义的行为。如果使用`dynamic_cast`，则必须在取消引用之前检查返回的指针是否为 NULL，或者 100% 确保您*永远不会*转换为不是被转换对象的类型或其父对象之一的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:37:38.657

当你这样做时，`Derived2::Method();`你正在告诉编译器确切地调用什么函数。这意味着它将*直接*调用它。（另外，你的成员函数什么都不做，也不依赖任何成员变量，所以很容易直接调用它并且不会因为它不访问任何东西而崩溃）。但是，在您的第一个示例中，由于您没有明确告诉它要调用哪个函数，它必须查找该函数，但是由于您在空指针上调用它，因此程序崩溃了。

但是，无论哪种情况，您都在调用未定义的行为，而我上面解释的只是一个实现细节，可能与其他实现有所不同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T23:35:58.950

未定义的行为。您的代码违反了严格的别名，即使您的实现存在错误并且在应该（或者如果您将其更改为或强制转换）时`dynamic_cast` *没有*返回 NULL以及通过尝试执行此功能而产生的一堆其他卑鄙的东西。你观察到的输出是无关紧要的。`static``reinterpret`

# jquery - 图像映射异常

> ID：12150932
> 
> 赞同：1
> 
> 时间：2012-08-27T23:31:10.230
> 
> 标签：jquery, imagemap

这是一个棘手的问题，我觉得它缺少关于这些图像映射如何工作的知识。反正..

此处可见的问题[http://luff.redlinestaging.com/index.php?option=com_content&view=article&id=35](http://luff.redlinestaging.com/index.php?option=com_content&view=article&id=35)

JS代码：

```
jQuery(document).ready( function() {
    jQuery.get('map.php?country=canada', function(output) {
        jQuery('#map').html( output );
        addClickMap();
    });
}); 

function showState(e) {
    //console.log( jQuery(this).is(':hidden' ) );
    var title = jQuery(this).attr( 'title' );
    var stateClass = '.' + title;
    jQuery(stateClass).addClass( 'hover' );
}

function hideState(e) {
    //console.log( jQuery(this).is(':hidden' ) );
    var title = jQuery(this).attr( 'title' );
    var stateClass = '.' + title;
    jQuery(stateClass).removeClass( 'hover' );
}

function addClickMap() {
    if( jQuery('#canada') ) {       
        jQuery('#canada area').each( function() {
            //jQuery(this).hoverIntent( showState, hideNav );
            jQuery(this).mouseenter( showState );
            jQuery(this).mouseleave( hideState );
            jQuery(this).click( function( e ) {
                e.preventDefault();
            });
        });
    }
} 
```

代码：

```
#map {
    width:100%;
}

.map {
    width:100%;
    height:100%;
    position:relative;
}

area {
    position:absolute;
    top:0px;
    left:0px;
    z-index: 1001;
    display:block;
    visibility:visible;
}

.canada {
    background-image:url(/map/map_canada.png);
    background-repeat:no-repeat;
}

.hover {
    display:block !important;
}   

.state {
    position:absolute;
    z-index:2;
    top:0px;
    left:0px;
    display:none;
}

.AB {
    top:375px;
    left:342px; 
}

.BC {
    top: 308px;
    left: 236px;
}

.SK {
    top: 394px;
    left: 406px;
}

.NB {
    top: 550px;
    left: 784px;
}

.MB {
    top: 405px;
    left: 486px;
}

.NT {
    top:198px;
    left: 321px; 
}

.NL {
    top: 380px; 
    left: 765px;
}  

.NU {
    top:-4px;
    left: 397px;
} 

.ON {
    top: 456px;
    left: 535px;
} 

.PE { 
    top: 532px;
    left: 820px;
}

.NS {
    top: 551px;
    left: 811px;
}

.QC {
    top: 364px; 
    left: 655px;
}

.YT {
    top:180px;
    left:243px;
}

Generated HTML dump from PHP for Canada:

    <div class="map canada"> 
        <img src="/map/map_canada.png" usemap="#canada" class="map_canada"/>
                <div class="state AB" style="background-image:url(/map/icons/AB.png); width:107px; height:182px; background-repeat:no-repeat;">
        </div>
            <div class="state BC" style="background-image:url(/map/icons/BC.png); width:143px; height:239px; background-repeat:no-repeat;">
        </div>
            <div class="state MB" style="background-image:url(/map/icons/MB.png); width:112px; height:170px; background-repeat:no-repeat;">
        </div>
            <div class="state NB" style="background-image:url(/map/icons/NB.png); width:56px; height:55px; background-repeat:no-repeat;">
        </div>
            <div class="state NL" style="background-image:url(/map/icons/NL.png); width:170px; height:164px; background-repeat:no-repeat;">
        </div>
            <div class="state NT" style="background-image:url(/map/icons/NT.png); width:189px; height:218px; background-repeat:no-repeat;">
        </div>
            <div class="state NS" style="background-image:url(/map/icons/NS.png); width:83px; height:68px; background-repeat:no-repeat;">
        </div>
            <div class="state NU" style="background-image:url(/map/icons/NU.png); width:372px; height:425px; background-repeat:no-repeat;">
        </div>
            <div class="state ON" style="background-image:url(/map/icons/ON.png); width:207px; height:217px; background-repeat:no-repeat;">
        </div>
            <div class="state PE" style="background-image:url(/map/icons/PE.png); width:39px; height:42px; background-repeat:no-repeat;">
        </div>
            <div class="state QC" style="background-image:url(/map/icons/QC.png); width:216px; height:259px; background-repeat:no-repeat;">
        </div>
            <div class="state SK" style="background-image:url(/map/icons/SK.png); width:97px; height:176px; background-repeat:no-repeat;">
        </div>
            <div class="state YT" style="background-image:url(/map/icons/YT.png); width:118px; height:189px; background-repeat:no-repeat;">
        </div>
        </div>
    <map id="canada" name="canada">
        <area shape="poly" coords="410,552,446,401,500,413,485,568," href="#" title="SK" />
        <area shape="poly" coords="488,568,503,413,552,419,596,463,545,519,542,572," href="#" alt="" title="MB" />
        <area shape="poly" coords="597,466,548,524,546,569,590,589,608,575,641,599,687,629,666,668,700,651,738,619,673,642,691,602,686,589,680,535,655,515,653,485,627,481," href="#" alt="" title="ON" />
    </map> 
```

如您所见，它可以很好地悬停鼠标，但将 mouseout 事件调用为 early，或将 mouseleave 事件调用为 early（任您选择，两者都不起作用）。它有时也不是很敏感，但这与我真正关心的问题不同，因为它在鼠标移动时似乎一个接一个地触发 mouseover 和 mouseout 事件。有没有办法让这不那么混乱？

如果无法做到这一点，您认为最好的方法是什么？a) 简化设计并使用 maphilight b) 编写一些非常复杂的函数，根据鼠标位置检测鼠标悬停？将来我们可能希望将自定义图像设计放入每个州/省，因此需要完整的图像显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:25:16.237

我在你的函数中设置了一个断点`hideState`并查看了这些属性：

*   `e.target`
*   `e.relatedTarget`

第一个是触发事件的元素。正如预期的那样，这是该地区。对于鼠标进入/退出事件，第二个是鼠标移动到的区域。在这种情况下，它是：

```
<div class="state SK hover" 
    style="background-image:url(/map/icons/SK.png); 
     width:97px; height:176px; background-repeat:no-repeat;">
</div> 
```

所以你有一系列矩形 DIV 覆盖在图像映射的顶部。当您显示 DIV 时，在鼠标所在的同一区域，它成为最顶层，因此鼠标退出`area`并进入`div`导致您看到的问题。

为了解决这个问题，你需要确保 imagemap 始终是最顶层，但你仍然可以`div`通过它看到元素。您可以通过制作图像的副本并使图像映射透明（但 z-index 比 div 高）来做到这一点。基本上，你有 3 层：最下面一层是可见图像；第二个是您的`div`元素，最上面的一个是图像映射（但完全透明）。标记是这样的：

```
 <img src="http://luff.redlinestaging.com/map/map_canada.png" 
        class="map_canada" 
        style="position: absolute; left: 0; top: 0">

    <img src="http://luff.redlinestaging.com/map/map_canada.png" 
        usemap="#canada" 
        class="map_canada" 
        style="z-index: 1000; opacity: 0; position: absolute; left: 0; top: 0;"> 
```

需要将`position: absolute`两个图像放在一起。您会注意到第一个没有图像映射。这不是必需的。这只是为了展示：这是您可以看到的背景图像。第二个是图像映射，但`opacity:0`使其不可见，并`z-index:1000`确保它始终位于顶部，即使您稍后由于鼠标悬停事件添加 div 也是如此。所以图像映射仍然具有最高优先级，但它不会隐藏实际图像或将在其后面渲染的 div。

工作示例：

[http://jsfiddle.net/eZTV3/](http://jsfiddle.net/eZTV3/)

另一种方法是使用[ImageMapster](http://www.outsharked.com/imagemapster)，它是一个 jquery 插件来为您执行此操作，而无需管理每个区域的备用图像。也就是说 - 您可以为其提供一个备用图像，它将使用来自每个相应区域的数据来填充高光。网站上的第一个演示显示了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:32:28.680

我已将以下内容添加到 SK：

```
.SK:hover {
    display:block !important;
    background-image:url("http://luff.redlinestaging.com/map/icons/SK.png"); 
    width:97px; 
    height:176px; 
    background-repeat:no-repeat;
} 
```

如果您查看我的示例，您会发现 SK 没有这个问题。

[http://jsfiddle.net/webwarrior/d2nNN/10/](http://jsfiddle.net/webwarrior/d2nNN/10/)

我仍在试图弄清楚为什么...

也许 CSS 悬停可能最终就足够了，但加载速度可能会很慢。当我尝试删除 Javascript 时，CSS 悬停什么也没做。

这里的“ON”状态也很好用：

[http://jsfiddle.net/webwarrior/d2nNN/13/](http://jsfiddle.net/webwarrior/d2nNN/13/)

hth。

# c# - 如何避免过多访问数据库

> ID：12150938
> 
> 赞同：0
> 
> 时间：2012-08-27T23:31:51.633
> 
> 标签：c#, asp.net, sql-server, performance

我有这些课程

```
class Match
{
  int MatchID,
  int TeamID, //used to reference Team
  ... other fields
} 
```

注意：比赛实际上有 2 支球队，这意味着 2 个 TeamID

```
class Team
{
   int TeamID,
   string TeamName
} 
```

在我看来，我需要显示`List<Match>`TeamName。所以我添加了另一个字段

```
class Match
{
  int MatchID,
  int TeamID, //used to reference Team
  ... other fields

  string TeamName;
} 
```

我现在可以

```
Match m = getMatch(id);
m.TeamName = getTeamName(m.TeamId); //get name from database 
```

但是对于 a `List<Match>`，`getTeamName(TeamId)`将去数据库获取每个 TeamID 的 TeamName。

对于每页 10 个匹配项的页面，这可能是`(10x2Teams)=20`数据库之旅。

为了避免这种情况，我想到了一次加载所有内容，将其存储在内存中，然后只在内存中查找 TeamName。这让我重新思考如果记录是 5000 或更多会怎样。

有更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:39:02.333

执行每页缓存 - 将当前 10 个匹配项列表中存在的 id 列表放在一起，然后加载具有这些 id 之一的所有团队。

你没有说你是如何访问你的数据的，但是如果你使用的是 SQL，那么 IN 是你的朋友。

```
select * from teams were id in ('1', '2', '3', '4') 
```

或者，您可以首先使用 join 语句为球队加载比赛，然后在填充比赛数据的同时填充球队数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:59:51.780

我同意到目前为止给出的答案。我只是想扩展马特的答案。如果您需要对象中的所有数据，那么在一次访问数据库中发出多个 sql 语句会更有效。这将在单个数据库命中返回多个表。

# asp.net - IO.StreamReader(filename)

> ID：12150940
> 
> 赞同：1
> 
> 时间：2012-08-27T23:32:05.400
> 
> 标签：asp.net, vb.net, relative-path, streamreader

为什么我不能使用相对路径`IO.StreamReader("Resources/file.txt")`？

我正在使用一个网络应用程序，所以显然该文件不会位于我的开发机器和服务器之间的相同绝对位置。

如何修复我的文件名路径以便它找到文件？

作为参考，我在路径“Resources/file.txt”中有一个文件（相对于调用它的页面），但愚蠢的函数正在根目录“C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE 。” 以防万一，我目前使用的是 .NET 3.5。

谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:38:29.260

那是因为您的工作文件夹不是 Web 根目录所在的位置，而是应用程序所在的位置。开发时，它位于 Visual Studio 应用程序所在的位置，而在实时服务器上，它将位于 IIS 应用程序所在的位置。

使用虚拟路径，以及将`Server.MapPath`其映射到相对于 Web 根目录的文件夹的方法：

```
StreamReader(Server.MapPath("Resources/file.txt")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:34:02.230

使用 HttpContext.Current.Server.MapPath(filename) 以字符串形式查找文件的相对路径，然后将其传递给 IO.StreamReader，如下所示：

```
Dim sr As New IO.StreamReader(HttpContext.Current.Server.MapPath(filename))
Dim text As String = DirectCast(sr, IO.TextReader).ReadToEnd() 'gives you text 
```

# php - 如何让 emacs 在 php 控件结构之间缩进 html 块？

> ID：12150942
> 
> 赞同：2
> 
> 时间：2012-08-27T23:32:27.640
> 
> 标签：php, html, emacs, mode, indentation

我已经尝试了我能找到的每一种 php/html 模式（包括 nxHTML），但找不到一种能以我想要的方式缩进的模式。这是我的文件包含的示例：

```
<?php if (a == 5): ?>
<span>test</span>
<?php endif; ?> 
```

我希望 emacs 缩进将 if/endif 视为元素的代码，如下所示：

```
<?php if (a == 5): ?>
  <span>test</span>
<?php endif; ?> 
```

for 循环和其他结构也是如此。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:49:36.440

我已经编写了主要模式 web-mode.el（可在[http://web-mode.org](http://web-mode.org)上找到）。此模式专为包含 CSS/JS/PHP/JSP 的 HTML 模板而设计。它根据块的类型缩进和合成颜色。HTML 缩进非常健壮（标签和属性的缩进）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:53:27.693

你可能不得不自己动手。如果您要做的只是确保像`<?php if ....: ?>`开始缩进这样的块，并`<?php endif; ?>`停止该级别的缩进，这取决于您的 elisp 技能，这可能不是那么难。您甚至可以构建一个从 nxml 模式派生的新模式，并以这种方式修改缩进。

对于它的价值，试图让它在 nxHTML 中工作可能是一场彻底的灾难。主要是因为您会尝试跨模式边界缩进。

好消息是您可能可以使用正则表达式来处理所有 PHP 愚蠢的替代语法。坏消息是... PHP 愚蠢的替代语法！

# crystal-reports - 水晶报表难点

> ID：12150946
> 
> 赞同：0
> 
> 时间：2012-08-27T23:33:20.387
> 
> 标签：crystal-reports, report

帮助！请！我正在使用水晶报表使用餐厅 POS 系统。我正在尝试修改员工工时报告并需要一些帮助。这是一个非常简单的报告，它搜索每个员工，然后报告他们的工作时间。它按给定时间段的日期和工作代码排序。我重新排列了排序功能，以便它根据工作代码而不是日期列出小时数。现在，我需要它为每个工作代码提供“总小时数”。像这样的东西：

乔·史密斯工作代码：菜 6/13 下午 1 点 4:30 下午 3 小时 30 分钟 6/14 下午 2 点 6:00 下午 4 小时 00 分

总小时数：7 小时 30 分钟（这就是我所缺少的）

工作代码：巴士 6/13 5 PM 10:00 PM 5h 00 min 6/14 7 PM 11:30 PM 4h 30 min

总小时数：9 小时 30 分钟

该报告已经为我提供了工时细分并按工作代码对其进行排序，但我需要它来告诉我每个工作代码的总工时。如果你PM我，我可以给你发送报告的屏幕截图和打印出来，这样可能更有意义。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:48:07.043

[在考虑了这里](http://www.convenientsolutionsllc.com/Uploads/HourReport.jpg)和[这里](http://www.convenientsolutionsllc.com/Uploads/ReportLayout.jpg)的证据之后，看起来你只需要在这些部分中调整一些元素。

看起来 Group1 是员工，而 Group2 是工作代码（我不知道 Group3 是什么，但这并不重要）......但是根据设计器屏幕截图，您的 Group2 页脚被抑制或有条件地抑制。这至少是部分问题，因为那是您所追求的摘要（`{@SumHoursJobCode}`公式）需要去的地方。

它看起来像`{@SumHoursJobCode}`预期的那样工作，因为它为您提供了最后一个作业代码组的正确总和，它只需要移动到 Group2 页脚并且需要显示页脚。

# javascript - 如何提取完整的 Polymaps svg 字符串

> ID：12150947
> 
> 赞同：1
> 
> 时间：2012-08-27T23:33:32.443
> 
> 标签：javascript, canvas, svg

我正在尝试使用 canvg 将包含 json 层的 Polymaps 地图保存为图像文件，如此处[所述](https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser)。我遇到的问题是，当我尝试使用 XML 序列化程序构造 svg 字符串时，子元素的内容不包含在字符串中。这些元素是存储地理信息的地方，因此我的 svg 字符串不包含将地图绘制到画布上的必要信息。

知道为什么会发生这种情况或如何在 svg 字符串中包含所有 svg 子元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:47:42.160

一段时间后回到这个问题，我相信我已经解决了。

Polymaps 仅允许您在“加载”和“显示”功能中访问包含地理信息（在我的情况下是从 json 文件上传）的地图的“g”子元素。在“加载”或“显示”函数中循环遍历最后一个地图特征时，沿着 svg DOM（在我的例子中是 feature.parentNode.parentNode.parentNode.parentNode）。然后使用 XML 序列化程序提取字符串。如果要在提取的字符串中完全保留地图样式，则必须将 CSS 地图样式转换为内联样式。

# objective-c - 在 XPC 服务守护进程中查看可用的字典？

> ID：12150949
> 
> 赞同：0
> 
> 时间：2012-08-27T23:33:47.863
> 
> 标签：objective-c, c, osx-mountain-lion, inter-process-communicat, xpc

在支持 xpc 的 osx 机器上运行着一堆启动守护进程和代理。要查看它们是否支持 IPC over xpc，我会查找任何 xpc 函数，尤其是 xpc_connection_create。我的理解是，为了与这些进程对话，必须通过 xpc api 制作字典，然后将其传递给广告的 com.* 服务。有没有办法查看字典的参数应该是每个进程，而不是传递随机的东西？

以上逻辑如有错误，欢迎指正。任何建议或评论都是有帮助的，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:15:25.667

XPC 连接用于创建与 XPC 服务的连接，或与另一个发布 mach 服务的进程进行 IPC。

“xpc_connection_create”创建用于向连接的其他对等方发送消息的连接。应该定义通信的协议，因此，通常两个对等点属于同一方。

换句话说，如果您不拥有这些守护程序/代理，并且没有关于与它通信的协议的公共文档（无论是否通过 XPC）。用这些流程进行 IPC 几乎是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-02T13:23:05.010

上面的答案充其量是不正确的，最坏的情况是错误的。

虽然这两个对等点确实应该由同一方拥有，但事实并非如此。许多 Apple 的守护进程确实通过 XPC 进行通信，唯一的问题是，它们是否可以从沙箱的范围内访问。一个惊人的数字是。几乎没有“几乎不可能”——非常有可能，并且对于除 Apple 文档之外的调试和调整非常有用。

要获取协议，您可以创建一个库来插入 xpc_connection_send_message_[with_reply/syc]，然后使用 DYLD_INSERT_LIBRARIES。通过这种方式，您将获得完整的字典转储。

# ruby - `initialize'：CheckDir:Class 的未定义方法 `dirpathname='（NoMethod 错误）

> ID：12150952
> 
> 赞同：0
> 
> 时间：2012-08-27T23:34:01.743
> 
> 标签：ruby, class-method

我是一个新的 ruby​​ 人，我试图制作一个小程序，但有些东西困扰着我，我找不到解决方案。请给我提意见。我正在使用 Ubuntu 12.04

会有3个文件。main.rb、create.rb 和 check.rb

当我运行这个问题时，我遇到了这样的错误；

`initialize': undefined method`dirpathname=' 用于 CheckDir:Class (NoMethodError)

[main.rb]

```
#!/usr/bin/env ruby

BASE_DIR = File.join('','home','local','tester','code','www','test')
APP_ROOT = File.dirname(__FILE__)

$:.unshift(File.join(APP_ROOT, 'lib'))

require 'create'

THEME_DIR = ARGV[0]

if !THEME_DIR
  puts "Usage: ruby #{__FILE__} <the name of theme directory>\n\n"
  exit!
end

sym = CreateSymlink.new(THEME_DIR)
sym.launch! 
```

[创建.rb]

```
#!/usr/bin/env ruby
require 'check'

class CreateSymlink
  def initialize(path=nil)
    CheckDir.dirpathname = BASE_DIR + "/" + path
    if CheckDir.dir_exists?
      puts "The #{path} is already existed! Bye."
      exit!
    end
  end

  def launch!
    puts "yeah"
    #lets_start(path)
  end
end 
```

[检查.rb]

```
#!/usr/bin/env ruby

class CheckDir
  @@dirpathname = nil
  def self.dirpathname(path=nil)
    @@dirpathname = File.join(BASE_DIR, path)
  end

  def self.dir_exists?
    if @@dirpathname && File.directory?(@@dirpathname)
      return true
    else
      return false
  end
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:39:47.157

它正在寻找调用的方法`dirpathname=`（不存在）而不是`dirpathname`（确实存在）。

重命名方法（通过添加“=”）以使用“setter magic”或调用该方法`dirpathname(value)`

* * *

它有助于重点阅读错误消息..

> CheckDir:Class (NoMethodError) 的未定义方法**dirpathname=**

.. 请注意，**=** *是*消息（“方法”）名称的一部分，请参阅[本教程关于 Ruby 语法糖](http://rubylearning.com/satishtalim/ruby_syntactic_sugar.html)。

在 Ruby 中，语法`obj.method = value`是糖，`obj.method=(value)`而糖又是`obj.__send__(#method=, value)`. 也就是说，消息“method=”以“value”作为第一个参数发送到“obj”。

# python - 鼠标在.rect上“单击”时的Pygame动作？

> ID：12150957
> 
> 赞同：5
> 
> 时间：2012-08-27T23:34:22.043
> 
> 标签：python, mouseevent, pygame, rect

我一直在编写一个测试函数来了解 pygame.rect 上的鼠标“单击”操作将如何产生响应。

至今：

```
def test():
    pygame.init()
    screen = pygame.display.set_mode((770,430))
    pygame.mouse.set_visible(1)
    background = pygame.Surface(screen.get_size())
    background = background.convert()
    background.fill((250,250,250))
    screen.blit(background, (0,0))
    pygame.display.flip()

    ## set-up screen in these lines above ##

    button = pygame.image.load('Pictures/cards/stand.png').convert_alpha()
    screen.blit(button,(300,200))
    pygame.display.flip()

    ## does button need to be 'pygame.sprite.Sprite for this? ##
    ## I use 'get_rect() ##
    button = button.get_rect()

    ## loop to check for mouse action and its position ##
    while True:
        for event in pygame.event.get():
            if event.type == pygame.mouse.get_pressed():
                ## if mouse is pressed get position of cursor ##
                pos = pygame.mouse.get_pos()
                ## check if cursor is on button ##
                if button.collidepoint(pos):
                    ## exit ##
                    return 
```

我在谷歌上遇到过人们正在使用或建议使用`pygame.sprite.Sprite`图像类的页面，我认为这就是我的问题所在。我已经检查了 pygames 文档并且方法之间没有太大的凝聚力，恕我直言。我显然遗漏了一些简单的东西，但是，我认为`get_rect`pygames 中的图像能够检查按下时鼠标位置是否在其上方？

编辑：我想我需要调用该`pygame.sprite.Sprite`方法来使图像/矩形交互？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T02:53:20.297

好吧，如果有人感兴趣或有类似的问题，这就是我需要改变的。

首先，删除：

```
button = button.get_rect() 
```

然后：

```
screen.blit(button, (300, 200)) 
```

应该：

```
b = screen.blit(button, (300, 200)) 
```

这将`Rect`在屏幕上创建按钮所在的区域。

继续：

```
if event.type == pygame.mouse.get_pressed() 
```

我改为：

```
if event.type == pygame.MOUSEBUTTONDOWN and event.button == 1: 
```

`pygame.mouse.get_pressed()`获取所有三个鼠标按钮（MOUSEBUTTONDOWN、MOUSEBUTTONUP 或 MOUSEMOTION）的状态。我还需要添加`event.button == 1`以指定这是按下的“鼠标左键”按钮。

最后：

```
`if button.collidepoint(pos):` 
```

至：

```
`if b.collidepoint(pos):` 
```

使用`Rect`b 的碰撞点方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T17:01:40.323

我认为rect方法调用collidepoint，而不是collide* *r* *point。这是文档的[链接](http://www.pygame.org/docs/ref/rect.html#pygame.Rect.collidepoint)！

# iphone - iPhone 将图像保存到文档目录

> ID：12150959
> 
> 赞同：1
> 
> 时间：2012-08-27T23:35:00.883
> 
> 标签：iphone, objective-c, ios

我正在从用户的照片库中检索图像，并将该图像保存在文档目录中。我目前正在根据用户在文本字段中输入的内容命名图片。这可行，但文本字段并不是图片的好名称。我想使用某种唯一标识符来命名图片。

有什么想法或建议吗？我只是不想在用户保存大量照片时发生冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:42:49.493

一种方法是使用 UUID。这是一个例子：

```
// return a new autoreleased UUID string
- (NSString *)generateUuidString
{
  // create a new UUID which you own
  CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);

  // create a new CFStringRef (toll-free bridged to NSString)
  // that you own
  NSString *uuidString = (NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuid);

  // transfer ownership of the string
  // to the autorelease pool
  [uuidString autorelease];

  // release the UUID
  CFRelease(uuid);

  return uuidString;
} 
```

或 ARC 版本：

```
// Create universally unique identifier (object)
CFUUIDRef uuidObject = CFUUIDCreate(kCFAllocatorDefault);

// Get the string representation of CFUUID object.
NSString *uuidStr = (__bridge_transfer NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidObject);
CFRelease(uuidObject); 
```

更简单的 iOS6+ 解决方案：

```
NSString *UUID = [[NSUUID UUID] UUIDString]; 
```

更多信息在这里： [http ://blog.ablepear.com/2010/09/creating-guid-or-uuid-in-objective-c.html 在这里：](http://blog.ablepear.com/2010/09/creating-guid-or-uuid-in-objective-c.html) [http](http://en.wikipedia.org/wiki/Universally_unique_identifier) : //en.wikipedia.org/wiki/Universally_unique_identifier

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T23:42:59.263

昨天我不得不用一些变化来解决同样的问题：将图片保存在临时目录中，因为图片将被上传到 Dropbox。

我所做的是获取自 UNIX 纪元以来重命名图像的秒数。

这是整个方法。您需要对其进行修改以满足您的需求，但您应该从中获得解决问题的要点：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *imageToUpload = [info objectForKey:UIImagePickerControllerOriginalImage];

    NSDate *dateForPictureName = [NSDate date];
    NSTimeInterval timeInterval = [dateForPictureName timeIntervalSince1970];
    NSMutableString *fileName = [NSMutableString stringWithFormat:@"%f", timeInterval];
    NSRange thePeriod = [fileName rangeOfString:@"."]; //Epoch returns with a period for some reason.
    [fileName deleteCharactersInRange:thePeriod];
    [fileName appendString:@".jpeg"];
    NSString *filePath = [NSTemporaryDirectory() stringByAppendingPathComponent:fileName];
    NSData *imageData = [NSData dataWithData:UIImageJPEGRepresentation(imageToUpload, 1.0)];
    [imageData writeToFile:filePath atomically:YES];

    [[self restClient] uploadFile:fileName toPath:currentPath withParentRev:nil fromPath:filePath];

    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T23:43:57.447

假设您的目标是用户输入的内容具有您想要附加到照片的某些含义，那么只需在标题末尾增加一个数字，直到找到一个有效的数字

例如

> 野餐日.jpg
> 
> 野餐日 1.jpg
> 
> 野餐日 2.jpg

# ruby-on-rails - Rails 合并多个源

> ID：12150961
> 
> 赞同：0
> 
> 时间：2012-08-27T23:35:07.487
> 
> 标签：ruby-on-rails, activerecord

我想将用户模型中的两个关系合并为一个关系

我有以下数据库设置：

```
class User < ActiveRecord::Base
  has_many :shared_cards
  has_many :card_instances
  has_many :shared_card_instances, through: :shared_cards, source: :card_instances
end

class CardInstance < ActiveRecord::Base
  belongs_to :user
  belongs_to :shared_card
end

class SharedCard < ActiveRecord::Base
  belongs_to :user
  has_many :card_instances
end 
```

我想将用户表中的 'card_instances' 和 'shared_card_instances' 合并到示例 'all_card_instances'

我想合并它们的原因是因为我想得到一个 ActiveRecord::Relation 以便我可以直接对所有对象进行搜索和排序

编辑：

我目前的做法：

```
all_card_instances = CardInstance.find_by_id(user.card_instances.pluck(:id) | user.shared_card_instances.pluck(:id)) 
```

现在我可以直接在返回的 ActiveRecord::Relation 对象上调用“.order”和我的 pg_search_scope

但是这种方式我相信它会首先从两个源中获取所有对象，然后在合并查询中再次获取它们，这会进行不必要的查询。

# c# - 更新到 .NET MVC 3 的完整手动方式

> ID：12150966
> 
> 赞同：0
> 
> 时间：2012-08-27T23:35:58.637
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, c#-4.0

MY 公司有严格的“不允许安装软件”政策。我们目前使用的是安装时附带的 VS2010 和 MVC 2。我们想升级到 MVC 3，但由于政策的原因，我们不能使用标准的 MVC 3 工具安装程序，也没有用于下载或安装软件包的 nuget。

那么有什么方法可以手动将我们的项目添加/升级​​到 MVC 3，以便我们使用最新最好的东西？是否像获取dll文件并将其注册到GAC一样简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:09:33.310

我相信这是你能做的最好的。

我相信没有完全 100% 的手动方式。仍然需要移动一些东西，听起来你可能有限制问题，但这里是[来源：](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading)

要将现有的 ASP.NET MVC 2 应用程序手动升级到版本 3，请执行以下操作：

在您的计算机上创建一个新的空 ASP.NET MVC 3 项目。该项目将包含升级所需的一些文件。将以下文件从 ASP.NET MVC 3 项目复制到 ASP.NET MVC 2 项目的相应位置。您需要更新对 jQuery 库的任何引用以说明新文件名 (jQuery-1.5.1.js)：

```
/Views/Web.config
/packages.config
/scripts/*.js
/Content/themes/*.* 
```

将空的 ASP.NET MVC 3 项目解决方案的根目录中的 packages 文件夹复制到解决方案的根目录中，该根目录位于解决方案的 .sln 文件所在的目录中。如果您的 ASP.NET MVC 2 项目包含任何区域，请将 /Views/Web.config 文件复制到每个区域的 Views 文件夹中。在 ASP.NET MVC 2 项目的两个 Web.config 文件中，全局搜索并替换 ASP.NET MVC 版本。找到以下内容： System.Web.Mvc, Version=2.0.0.0 将其替换为以下内容：

System.Web.Mvc, Version=3.0.0.0 在解决方案资源管理器中，删除对 System.Web.Mvc 的引用（指向版本 2 中的 DLL），然后添加对 System.Web.Mvc (v3.0.0\. 0)。添加对 System.Web.WebPages.dll 和 System.Web.Helpers.dll 的引用。这些程序集位于以下文件夹中： %ProgramFiles%\ Microsoft ASP.NET\ASP.NET MVC 3\Assemblies %ProgramFiles%\ Microsoft ASP.NET\ASP.NET Web Pages\v1.0\Assemblies 在解决方案资源管理器中，右-单击项目名称并选择卸载项目。然后再次右键单击项目名称并选择 Edit ProjectName.csproj。找到 ProjectTypeGuids 元素并将 {F85E285D-A4E0-4152-9332-AB1D724D3325} 替换为 {E53F8FEA-EAE0-44A6-8774-FFD645390401}。保存更改，右键单击项目，然后选择重新加载项目。在应用程序的根 Web.config 文件中，

```
<add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, 
     PublicKeyToken=31BF3856AD364E35" />

<add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral,
     PublicKeyToken=31BF3856AD364E35" /> 
```

如果项目引用任何使用 ASP.NET MVC 2 编译的第三方库，请将以下突出显示的 bindingRedirect 元素添加到配置部分下应用程序根目录中的 Web.config 文件中：

```
<runtime>
   <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <dependentAssembly>
       <assemblyIdentity name="System.Web.Mvc"
           publicKeyToken="31bf3856ad364e35"/>
       <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0"/>
     </dependentAssembly>
   </assemblyBinding>
</runtime> 
```

# c - 将整数数组转换为无符号字符数组

> ID：12150970
> 
> 赞同：0
> 
> 时间：2012-08-27T23:36:43.507
> 
> 标签：c

例如，我在整数数组中存储了一个“位”

```
int a = {1,0,1,1} 
```

如何将整数数组“位”转换为无符号字符“位”？

和互惠的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:42:05.160

```
int int_array[] = {1, 0, 1, 1};
unsigned char uc_array[sizeof int_array / sizeof *int_array];
for (size_t i = 0; i != sizeof int_array / sizeof *int_array; ++i)
  uc_array[i] = int_array[i]; 
```

（您的示例代码有缺陷：标量变量的初始化程序太多）

# forms - vb6 表单自动重新加载

> ID：12150971
> 
> 赞同：2
> 
> 时间：2012-08-27T23:36:43.710
> 
> 标签：forms, events, vb6

我正在开发一个很久以前由其他人编写的 VB6 应用程序。当它做它的事情时，表单在退出时重新加载以尝试重试（？）。

有谁知道这将如何完成，以便我可以停止它。我已经挖掘了整个程序，但看不到会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:08:18.400

很可能表单或其控件之一在它被卸载后被引用***，***这导致它重新加载。

判断是什么原因的最简单方法是运行表单，在事件末尾放置一个[BreakPoint](http://msdn.microsoft.com/en-us/library/aa231226%28v=vs.60%29.aspx)`Form_Load` ，然后关闭它。然后，当它重新加载时，按 F8 键（希望*）直接进入导致它的代码行之后的代码行。

一旦确定了原因是什么，就应该相对简单地修改代码以防止它发生。

**定时器事件或其他异步代码可能会将执行从罪魁祸首代码中转移出去，在这种情况下，您必须首先在立即窗口中停止任何影响进程 - 定时器等 - 在您开始使用 F8 前进之前。*

# python - django id 整数限制

> ID：12150973
> 
> 赞同：14
> 
> 时间：2012-08-27T23:36:56.533
> 
> 标签：python, django, sqlite, django-postgresql

Django 模型或数据库后端中的 AutoField 是否有限制？

我正在处理的 Django 项目可能会在某些数据库表中看到很多对象，这些对象在短时间内会超过 40000 个。

我将 Sqlite 用于开发，将 Postgresql 用于生产。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T02:58:15.793

添加此作为答案。Django 将其映射到串行列，这意味着最大值在 20 亿范围内（准确地说是 2,147,483,647）。虽然这对于大多数应用程序来说不太可能成为问题，但如果这样做，您可以将类型更改为 bigint，这将使您极不可能到达 64 位 int 空间的末尾。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-07-07T12:41:06.907

添加新信息`Django 2.x`：

* * *

Django[`AutoField`](https://docs.djangoproject.com/en/2.0/ref/models/fields/#autofield)是一个[`IntegerField`](https://docs.djangoproject.com/en/2.0/ref/models/fields/#django.db.models.IntegerField). 文档`IntegerField`说：

> 从`-2.147.483.648`to的值`2.147.483.647`在 Django 支持的所有数据库中都是安全的。

`AutoField`默认情况下仅使用正数，因此值可以从`1`到`2.147.483.647`。

* * *

由于`Django 1.10`也有一个[`BigAutoField`](https://docs.djangoproject.com/en/2.0/ref/models/fields/#bigautofield)，它与 非常相似[`BigIntegerField`](https://docs.djangoproject.com/en/2.0/ref/models/fields/#bigintegerfield)。文档`BigAutoField`说：

> 一个 64 位整数 [...]，保证适合从`1`到的数字`9.223.372.036.854.775.807`。

现在，文档并没有明确说明这个字段，但是通过使用单词`is garanteed to fit`，我假设这适用于 Django 支持的所有数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-15T08:30:01.910

正如其他人提到的那样，您是否使用`int`or `bigint`，您分别拥有 `2.147.483.648`or`9.223.372.036.854.775.808`值。

如果您认为超过这些数字，您可以进行分片。简而言之，分片是一种通过将同一表的不同行存储在跨多个数据库的多个表中来对数据进行水平分区的一种方式。

Django 有许多可用的分片库（例如[django-sharding](https://github.com/JBKahn/django-sharding)）

# sql - 在 SSIS 中创建唯一列

> ID：12150974
> 
> 赞同：0
> 
> 时间：2012-08-27T23:37:03.287
> 
> 标签：sql, sql-server-2005, ssis

我有一个 SSIS 包，它需要一个表并查找很多其他列，最终得到一个数据集，例如：

```
ItemID | ProductGroupCode | Product Code
1      |  AAAA            |
2      |  AAAA            |
3      |  BBBB            |
4      |  BBBB            |
5      |  CCCC            | 
```

ItemID 是唯一的。我需要通过将 ProductGroupCode 连接到从 1700 开始的 4 位数字来创建唯一的 ProductCode。

所以数据看起来像：

```
ItemID | ProductGroupCode | Product Code
1      |  AAAA            | AAAA1000
2      |  AAAA            | AAAA1001
3      |  BBBB            | BBBB1000
4      |  BBBB            | BBBB1001
5      |  CCCC            | CCCC1000 
```

但是，它还需要检查产品表中是否不存在产品代码。产品代码 AAAA1000 很有可能已经存在。如果是这种情况，那么它应该增加产品代码。

我可以用 SQL 中的游标来做到这一点，表“ProductImportHalfWay”是 SSIS 包中途的数据集

```
DECLARE @ProductCode VARCHAR(10),
        @CurrentProductCode VARCHAR(10),
        @ItemID INT,
        @ProductNumber INT

SELECT @ProductNumber = 0, @CurrentProductCode = ''

DECLARE productGroupCodes CURSOR FAST_FORWARD
FOR SELECT distinct ProductGroupCode, ItemID
FROM ProductImportHalfWay 
ORDER BY ProductGroupCode 

OPEN productGroupCodes
    FETCH NEXT FROM productGroupCodes INTO @ProductCode, @ItemID

    WHILE @@FETCH_STATUS = 0
    BEGIN
        IF @CurrentProductCode <> @ProductCode
        BEGIN
            SET @CurrentProductCode = @ProductCode
            SET @ProductNumber = 1699 --set to 1699 so that we can add 1 to get 1700
        END

        SET @ProductNumber = @ProductNumber + 1
        WHILE EXISTS (SELECT 1 FROM Product WHERE ProductCode = @ProductCode + CAST(@ProductNumber AS VARCHAR(4)))
        BEGIN
            SET @ProductNumber = @ProductNumber + 1
            --print 'increase'
        END     

        UPDATE ProductImportHalfWay
        SET ProductGroupCode = @ProductCode + CAST(@ProductNumber AS VARCHAR(4))
        WHERE ItemID = @ItemID

        FETCH NEXT FROM productGroupCodes
        INTO @ProductCode, @ItemID
    END
CLOSE productGroupCodes
DEALLOCATE productGroupCodes 
```

但我不知道如何把它放在数据转换的中间（而且我真的不想输出“ProductImportHalfWay”表）

* * *

编辑：额外的示例如果数据库中已经存在 ProductCode AAAA1000，那么导入的记录将通过

```
ItemID | ProductGroupCode | Product Code
1      |  AAAA            | AAAA1001
2      |  AAAA            | AAAA1002
3      |  BBBB            | BBBB1000
4      |  BBBB            | BBBB1001
5      |  CCCC            | CCCC1000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:10:11.063

到目前为止，我们想出的最好方法是进行数据转换以设置记录，将其保存到临时表中，运行我在问题中包含的 SQL，然后运行另一个从临时表中读取的数据转换完成进口

# php - mysql sql错误

> ID：12150980
> 
> 赞同：0
> 
> 时间：2012-08-27T23:37:42.430
> 
> 标签：php, mysql, sql

我应该得到一个 id 与另一个 id 匹配的所有行......

这是代码，我必须链接 2 个表...

```
SELECT *
  FROM acw_papers_web
  WHERE id_paper_web = ( SELECT id_paper_web
                           FROM acw_papers_web_autores
                           WHERE nombre_autor_pw LIKE'%Chicaiza%' ) 
```

我得到错误：`Subquery returns more than 1 row`

我注意到为什么...

但是用一个获取每个id并为每个id发送查询的php代码（我正在使用它）修复它，我想用sql来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:40:04.193

您正在尝试为一个`=`条件分配多个值：

改用`in`：

```
SELECT 
    * 
FROM 
    acw_papers_web 
WHERE 
    id_paper_web in (
        SELECT 
            id_paper_web 
        FROM 
            acw_papers_web_autores 
        WHERE 
            nombre_autor_pw like '%Chicaiza%'
            ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T00:21:48.773

您也可以使用`EXISTS()`而不是`IN()`，这可能会快一点。

```
SELECT a.id_paper_web 
  FROM acw_papers_web as a 
  WHERE  
  EXISTS
  (
    SELECT b.id_paper_web 
    FROM acw_papers_web_autores as b
    WHERE b.nombre_autor_pw like '%Chicaiza%' AND b.id_paper_web = a.id_paper_web
  ) 
```

**[演示](http://sqlfiddle.com/#!2/4f0e3/1)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T23:40:47.127

您可以将 = 更改为 IN。

```
SELECT * FROM acw_papers_web WHERE id_paper_web IN (SELECT id_paper_web FROM acw_papers_web_autores WHERE nombre_autor_pw like '%Chicaiza%') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T23:42:13.943

用运算符 IN 替换 = 符号：

```
SELECT * FROM acw_papers_web
WHERE id_paper_web IN (
    SELECT id_paper_web FROM acw_papers_web_autores
    WHERE nombre_autor_pw like '%Chicaiza%'
) 
```

# c# - WCF - 是否可以使用 HttpListener 或套接字来监听 WCF ChannelFactory

> ID：12150983
> 
> 赞同：2
> 
> 时间：2012-08-27T23:37:49.013
> 
> 标签：c#, wcf, sockets, websocket, communication

我正在实现一个小的通信库来取乐，它的工作方式非常像 wcf。所有实现都基于 webRequest 和 HttpListener。

我在问是否有一种方法可以与 wcf 进行收听或交流，以及我可以使用哪个传输层来做到这一点……我不是在问它是否难以做到或需要很长时间。只是问是否有人知道怎么做：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:35:04.170

WCF 使用不同的[绑定](http://msdn.microsoft.com/en-us/library/ms733027.aspx)来确定用于在客户端和服务器之间交换消息的协议。使用 WebRequest 等非 WCF 机制与服务通信的难度取决于您为服务选择的绑定。

大多数 WCF 绑定利用 SOAP 标准的变体通过各种传输（HTTP、TCP 等）交换消息，并且很难正确和完整地实现这些。WCF 中最简单的基于 SOAP 的绑定是[BasicHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)，它是用于可互操作 Web 服务的整个[WS-I Basic Profile](http://www.ws-i.org/profiles/basicprofile-1.1-2004-08-24.html)标准的实现。

但是，有一个绑定[WebHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpbinding.aspx)使用[REST](http://www.xfront.com/REST-Web-Services.html)样式的 HTTP 请求而不是 SOAP 进行所有通信。REST 服务非常容易理解，您基本上只需在 HTTP 请求中将方法参数作为 GET 或 POST 参数传递。尝试与该绑定进行互操作可能是您最好的选择。

# ruby - Ruby - 轻松从哈希数组中获取键和值

> ID：12150990
> 
> 赞同：0
> 
> 时间：2012-08-27T23:38:55.520
> 
> 标签：ruby, rubymotion

有一个单对哈希数组，如下所示：

```
arguments = [{:name=>"ABCD"},{:title=>"Awesome"},{:number=>4}] 
```

我需要循环并把每一个都作为一个关键和价值。现在，我正在这样做：

```
def methodname(*arguments, &block)
  arguments.each do |arg|
    arg.each do |key, value|
      # use my key and value
    end
  end
  # use the &block here in awesome ways
end 
```

伊克。必须是更好的方法，所以我问是否有人知道。我已经搜索并且似乎无法在 StackOverflow 上找到这个特定的问题，但如果它在那里，请告诉我。

编辑：在代码示例中添加了上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:50:49.393

如果期望参数是唯一的......

```
arguments.inject({},:merge).each { ... } 
```

FWIW - 如果您可以更改此数据结构，那么这样做可能是个好主意。此数据更好地表示在单个哈希中。

您还可以以不同的方式定义您的方法并完全避免该问题。

```
irb(main):011:0> def foo(kwargs={},&block)
irb(main):012:1>    pp kwargs
irb(main):013:1> end
irb(main):025:0> foo(:biz=>1,:baz=>2)
{:biz=>1, :baz=>2}
=> nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T23:56:34.187

由于这不是一个常见的习语，所以你不会在那里找到一个真正干净的解决方案。无论如何，这是一个不错的选择：

```
arguments.map(&:first).each do |key, value|
    # use key and value for something
end 
```

该解决方案利用了这样一个事实，即`Hash`作为`Enumerable`，有一个`first`方法可以返回迭代时产生的第一个结果，所以`{:foo => :bar}.first == [:foo, :bar]`. 通过所有哈希映射它，你很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T23:55:41.477

```
arguments.each do |arg|
  (key, value), = *arg
  # use my key and value
end 
```

我猜您是否认为这是“更好的方法”主要取决于您的队友是否了解分配在 Ruby 中的工作方式。

# javascript - Ecma 5.1 和 HTML 5

> ID：12150993
> 
> 赞同：0
> 
> 时间：2012-08-27T23:39:04.007
> 
> 标签：javascript, html, ecmascript-5

这两者之间有直接关系吗？是否有必要在 HTML5 页面中使用 ECMA 5.1 脚本语言 (javascript)。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:49:54.113

我不确定我是否理解你的问题。

`HTML5`是用于构建元素的标记，`ECMA`是用于操作它（并执行一些其他任务）的一系列语言。

如果您希望所有（无论如何）浏览器都能够理解您的代码，那么保持[ECMA 5.1 标准](http://www.ecma-international.org/publications/standards/Ecma-262.htm)是一个好主意。但是，`HTML 5`作为标准，并不要求您使用任何脚本语言。事实上`HTML 5`，除了……HTML 之外，它并不关心其他任何事情。

# c# - 从 finally 抛出异常时，未评估 Catch 块

> ID：12150994
> 
> 赞同：17
> 
> 时间：2012-08-27T23:39:03.710
> 
> 标签：c#, .net, specifications, .net-4.5

这个问题的出现是因为以前在 .NET 4.0 中工作的代码在 .NET 4.5 中因未处理的异常而失败，部分原因是 try/finallys。如果您想了解详细信息，请在[Microsoft connect](https://connect.microsoft.com/VisualStudio/feedback/details/759833/cryptostream-behaves-differently-in-net-4-5-breaks-existing-net-4-0-code)中阅读更多信息。我用它作为这个例子的基础，所以它可能有助于参考。

### 编码

对于选择不阅读此问题背后的详细信息的人，以下是发生这种情况的条件的快速浏览：

```
using(var ms = new MemoryStream(encryptedData))
using(var cryptoStream = new CryptoStream(encryptedData, decryptor, CryptoStreamMode.Read))
using(var sr = new StreamReader(cryptoStream)) 
```

这个问题是`Dispose`CryptoStream 的方法抛出了异常（因为它们在 using 语句中，这些异常恰好是从两个不同的 finally 块中抛出的）。当`cryptoStream.Dispose()`被 调用时`StreamReader`，`CryptographicException`被抛出。第二次`cryptoStream.Dispose()`被调用，在它的 using 语句中，它抛出一个`ArgumentNullException`

以下代码从上面提供的链接中删除了大部分不必要的代码，并将 using 语句展开为 try/finallys 以清楚地表明它们被抛出到 finally 块中。

```
using System;
using System.Security.Cryptography;
namespace Sandbox
{
    public class Program
    {
        public static void Main(string[] args)
        {
            try
            {
                try
                {
                    try
                    {
                        Console.WriteLine("Propagate, my children");
                    }
                    finally
                    {
                        // F1
                        Console.WriteLine("Throwing CryptographicExecption");
                        throw new CryptographicException();
                    }
                }
                finally
                {
                    // F2
                    Console.WriteLine("Throwing ArgumentException");
                    throw new ArgumentException();
                }
            }
            catch (ArgumentException)
            {
                // C1
                Console.WriteLine("Caught ArgumentException");
            }
            // Same behavior if this was in an enclosing try/catch
            catch (CryptographicException)
            {
                // C2
                Console.WriteLine("Caught CryptographicException");
            }

            Console.WriteLine("Made it out of the exception minefield");
        }
    }} 
```

注意：try/finally 对应于引用代码中扩展的 using 语句。

输出：

```
    传播，我的孩子们
    抛出 CryptographicExecption
    抛出参数异常
    捕获的参数异常
    按任意键继续 。. .

```

似乎`CryptographicException`从未执行过 catch 块。但是，删除该 catch 块会导致异常终止运行时。

### 更多信息

编辑：这已更新为规范的最新版本。我碰巧从 MSDN 上抢到的那个有更旧的措辞。 `Lost`已更新为`terminated`.

深入了解 C# 规范，第 8.9.5 和 8.10 节讨论异常行为：

*   当抛出异常时，包括从 finally 块内部，控制权被转移到封闭的 try 语句中的第一个 catch 子句。这将继续尝试语句，直到找到合适的语句。
*   如果在执行 finally 块期间抛出异常，并且已经传播**了异常，则终止该异常**

“终止”使第一个异常似乎永远被第二个抛出的异常隐藏，尽管它似乎不是正在发生的事情。

### 我确定问题就在这里

在大多数情况下，很容易可视化运行时在做什么。代码执行到`F1`抛出异常的第一个 finally 块 ( )。随着异常的传播，第二个异常从第二个 finally 块 ( `F2`) 中抛出。

根据规范，`CryptographicException`抛出的 from`F1`现在已终止，运行时正在寻找`ArgumentException`. `ArgumentException`运行时找到一个处理程序，并为( )执行 catch 块中的代码`C1`。

这是它变得模糊的地方：规范说第一个异常将被终止。`C2`但是，如果从代码中删除`CryptographicException`第二个 catch 块（就`C2`目前而言，代码不会因未处理的异常而终止，因此表面上它*似乎*正在处理异常，但实际上块中的异常处理代码从未执行过。

### 问题

问题基本相同，但为了具体而重新措辞。

1.  `CryptographicException`由于`ArgumentException`封闭的 finally 块引发的异常而终止，因为删除该`catch (CryptographicException)`块会导致异常未处理并终止运行时，它是如何终止的？

2.  `CryptographicException`由于运行时似乎正在处理`catch (CryptographicException)`块存在的时间，为什么块内的代码没有执行？

* * *

### 额外信息 编辑

我仍在研究此问题的实际行为，并且许多答案对于至少回答上述问题的部分内容特别有帮助。

`catch (CryptographicException)`另一个奇怪的行为是 .NET 4.5 和 .NET 3.5 之间的差异，当您运行带有注释的代码块时会发生这种情况。.NET 4.5 将抛出`CryptographicException`并终止应用程序。但是，.NET 3.5 的行为似乎更符合异常所在的 C# 规范。

```
传播，我的孩子们
抛出 CryptographicExecption

未处理的异常：System.Security.Cryptography.CryptographicException [...]
ram.cs：第 23 行
抛出参数异常
捕获的参数异常
走出了异常雷区

```

在 .NET 3.5 中，我看到了我在规范中读到的内容。异常变为“丢失”或“终止”，因为唯一需要捕获的是`ArgumentException`. 因此，程序可以继续执行。我的机器上只有 .NET 4.5，我想知道这是否发生在 .NET 4.0 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T01:31:43.693

.NET 中的异常处理有 3 个不同的阶段：

*   一旦执行 throw 语句，第一阶段就会启动。CLR 去寻找一个范围内的 catch 块，该块表明它愿意处理异常。在这个阶段，在 C# 中，*没有代码执行*。从技术上讲，可以执行代码，但 C# 中没有公开该功能。

*   一旦找到了 catch 块并且 CLR 知道从哪里恢复执行，阶段 2 就开始了。然后它可以可靠地确定需要执行哪些 finally 块。任何方法堆栈帧也会展开。

*   一旦所有 finally 块都完成并且堆栈被展开到包含 catch 语句的方法，阶段 3 就开始了。指令指针设置为 catch 块中的第一条语句。如果此块不包含更多的 throw 语句，则在 catch 块之后的语句处正常执行。

因此，您的代码片段中的核心要求是范围内有一个 catch (CryptographicException)。没有它，阶段 1 将失败，CLR 不知道如何恢复执行。线程死了，通常也会根据异常处理策略终止程序。finally 块都不会执行。

如果在第 2 阶段，finally 块抛出异常，则正常的异常处理序列将立即中断。最初的异常是“丢失”，它永远不会进入第 3 阶段，因此无法在您的程序中观察到。异常处理从第 1 阶段开始，现在寻找新的异常并从 finally 块的范围开始。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T23:53:01.427

> 如果在 finally 块执行期间抛出异常，并且已经传播了异常，则该异常将丢失

基本上，执行时会发生什么：

*   `CryptographicException`最后被扔进inner。
*   外部作用域最终执行，并抛出`ArgumentException`. 由于此时“CryptographicException”被“传播”，因此它丢失了。
*   最终捕获发生，并被`ArgumentException`捕获。

> ...并且第一个异常简单地消失在以太中是没有意义的，只是因为从不同的 finally 块中抛出了另一个异常。

根据您引用的 C# 语言规范，这正是发生的情况。第一个异常 ( `CryptographicException`) 有效地消失了——它“丢失了”。

但是，您只能通过显式使用 来达到此状态`finally`，因此我相信假设您在提供错误处理时考虑到了这种期望或可能性（正如您当时使用`try`的那样，这意味着您已经接受了您可能有例外）。

这基本上在规范中详细解释（您引用`8.9.5`的文本参考本节）：`8.10`

> 如果 finally 块抛出另一个异常，则终止当前异常的处理。

第一个例外，在你的情况下`ArgumentException`，基本上“消失”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T22:07:24.167

事实证明，我*并不*疯狂。根据我对这个问题的回答，我认为我似乎很难理解规范中如此清楚地概述了什么。真的一点都不难掌握。

事实是规范是有道理的，而行为却不是。当您在较旧的运行时中运行代码时，这种情况更加明显，它的行为**完全**不同......或者至少*看起来*如此。

### 快速回顾

我在 x64 Win7 机器上看到的：

*   .NET v2.0-3.5 -`CryptographicException`抛出时的 WER 对话框。击中 后`Close the program`，程序继续运行，就好像从未抛出过 execption。应用程序**未终止**。这是阅读规范所期望的行为，并且由在 .NET 中实现异常处理[的架构师明确定义。](http://blogs.msdn.com/b/cbrumme/archive/2003/10/01/51524.aspx)

*   .NET v4.0-4.5 - 不显示 WER 对话框。相反，会出现一个窗口，询问您是否要调试程序。单击`no`会导致程序立即终止。之后不再执行 finally 块。

事实证明，几乎任何试图回答我的问题的人都会得到与我完全相同的结果，这就解释了为什么没有人能回答我的问题，即为什么运行时会从它吞下的异常中终止。

### 它永远不是你所期望的

谁会怀疑**即时调试器**？

您可能已经注意到，在 .NET 2 下运行应用程序会产生与 .NET 4 不同的错误对话框。但是，如果您像我一样，您会在开发周期中期待该窗口，因此您没有随便想想。

vsjitdebugger 可执行文件强制终止应用程序，而不是让它继续。在 2.0 运行时，`dw20.exe`并没有这种行为，其实你首先看到的就是那个 WER 消息。

由于 jit 调试器终止了应用程序，它使它**看起来**不符合规范所说的，而实际上它确实如此。

为了测试这一点，我通过将注册表项从 1 更改为 0 来禁用 vsjitdebugger 在失败时启动。`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug\Auto`果然，应用程序忽略了异常并继续运行，就像 .NET 2.0 一样。

![在 .NET 4.0 中运行](../Images/3abe376886b4c1f50ad3d9f5ee301973.png "在 .NET 4.0 中运行")

* * *

事实证明，有一种解决方法，尽管实际上没有理由解决这种行为，因为您的应用程序正在终止。

1.  当即时调试器窗口弹出时，选中`Manually choose the debugging engines`并单击是，您要调试。
2.  当 Visual Studio 为您提供引擎选项时，单击取消。
3.  这将导致程序继续运行，或弹出 WER 对话框，具体取决于您的机器配置。如果发生这种情况，告诉它关闭程序并不会真正关闭它，它会继续运行，就好像一切正​​常。

# c# - Lambda 表达式的性能优势

> ID：12150995
> 
> 赞同：3
> 
> 时间：2012-08-27T23:39:09.623
> 
> 标签：c#, performance, lambda

我对 C# 中的 lambda 表达式很陌生，我倾向于不使用它们，因为我不知道最小化代码之外的好处是什么。它们在某些/所有情况下效率更高吗？或者除了将更多代码放在一行中之外，他们还能实现什么奇妙的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T23:42:38.093

> 它们在某些/所有情况下效率更高吗？

一般来说，Lambda 表达式与性能效率的关系不如开发人员的效率。

它们是一种以比手工编写方法更有成效的方式创建方法的方法。话虽如此，他们对（直接）提高性能没有任何作用。

但是，通过正确利用以功能方式工作的框架（即：使用 LINQ），您*可以*增加编写高效代码的可能性，因为框架本身可能已经高度优化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T23:49:28.253

Lambda 表达式并没有更高的性能，它们只是更简单。它们主要用于：

*   创建委托
*   为 LINQ 创建表达式
*   将局部变量放入代表的捕获中

创建委托时，编译器创建的代码就像您创建了一个命名方法并获得该方法的委托一样。

```
Func<int, int> mul = n => n * 2; 
```

相比：

```
public static int Mul(int n) {
  return n * 2;
}

Func<int, int> = Mul; 
```

创建表达式时，编译器会创建一个表达式树，可以将其转换为委托或由 LINQ 提供程序使用以转换为其他内容。例如，Linq To Sql 提供程序会将表达式转换为 SQL 代码。

在创建使用在创建委托的方法中声明的局部变量的委托时，会在该变量所在的位置自动创建一个闭包对象，而不是将变量放在堆栈上。这类似于通过将变量设置为声明该方法的类中的字段来使该变量可用于命名方法。

```
int x = 2;
Func<int, int> mul = n => n * x; 
```

相比：

```
public class Closure {

  public int x;

  public int Mul(int n) {
    return n * x;
  }

}

Closure c = new Closure;
c.x = 2;

Func<int, int> mul = x.Mul; 
```

# regex - 在正则表达式中指定第一次出现

> ID：12150996
> 
> 赞同：0
> 
> 时间：2012-08-27T23:39:18.367
> 
> 标签：regex, string

我正在写一些正则表达式代码。我怎样才能只搜索字符串出现在文本中的第一个实例。例如，如果我想搜索出现在文本中的第一个数字（我不关心其他数字，也不希望它们突出显示），我如何在 Regex 中指定它？

我正在编写原始 Regex 代码并在 Rubular.com 和 regexpal.com 等在线测试仪上对其进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:43:50.340

这就是正则表达式默认的工作方式，您通常必须提供全局选项或使用特定函数来查找所有匹配项。

因此，如果您要使用正则表达式`\d+`查找一个或多个数字，则正则表达式引擎将仅匹配第一组数字（第一个数字）。

请注意，如果您使用的是在线工具或文本编辑器而不是编程语言，则情况可能并非如此，因此如果这没有帮助，请指定您执行正则表达式搜索的方式。

您可以使用以下正则表达式来获取第一个捕获组中的第一个数字，并且不匹配其他任何内容：

```
^[^\d]*(\d+) 
```

解释：

```
^         # start of string
[^\d]*    # match zero or more non-digit characters
(\d+)     # match one or more digits and place them in the first capture group 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:16:38.647

[大多数使用正则表达式导向引擎的正则表达式工具总是返回最左边的匹配项。](http://www.regular-expressions.info/engine.html)

> 正则表达式引擎总是返回最左边的匹配，因为引擎“渴望”报告匹配。引擎永远不会超过这一点来查看是否有任何“更好”的匹配。第一场比赛被认为足够好。

但是使用正则表达式引擎的工具（如 Notepad++、EditPad 和数百万其他工具）已将其配置为应突出显示所有匹配项。（这对文本编辑器很有意义）（对于大多数在线正则表达式测试人员也是如此）。

要解决您的问题，如果您使用 .NET Regex 库之类的 Regex 库，则可以使用[Regex.Match](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)获取第一个匹配的出现。
例如，在 C# 中：

```
string regexPattern = "\d";
string inputText = @"Ka3jf7we8ewdv"; 
Regex r = new Regex(regexPattern);
Match m = r.Match(inputText);
Console.WriteLine(m.Value); 
```

# c# - 你如何从这个 xml 文件中获取后代元素？

> ID：12150999
> 
> 赞同：0
> 
> 时间：2012-08-27T23:39:28.663
> 
> 标签：c#, windows-phone-7.1.1

xml:

[http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP?ZIP=48183](http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP?ZIP=48183)

这是我的代码：

```
 private void GetWeather()
    {
        WebClient web = new WebClient();
        web.DownloadStringCompleted += new DownloadStringCompletedEventHandler(web_DownloadStringCompleted);
        string uriAddr = "http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP?ZIP=48183";
        web.DownloadStringAsync(new Uri(uriAddr));
    }
    void web_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            MessageBox.Show("error");

        }

        XElement XmlWeather = XElement.Parse(e.Result);

        foreach (var item in XmlWeather.Descendants("WeatherReturn"))
        {
            // code to get element info
        }

    } 
```

我什至无法进入 foreach 语句。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:45:55.567

您需要包含命名空间：

```
XNamespace ns = "http://ws.cdyne.com/WeatherWS/"; 
```

然后你可以打电话`XmlWeather.Descendants(ns + "WeatherReturn")`