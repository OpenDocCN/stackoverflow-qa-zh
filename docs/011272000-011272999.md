# StackOverflow 问答 11272000-11272999

# opencv - 处理实时数据，绕过 CvloadImage

> ID：11272005
> 
> 赞同：-1
> 
> 时间：2012-06-30T06:28:50.893
> 
> 标签：opencv, opencvdotnet

这是我们使用 Opencv 显示和处理图像的方式：

```
int _tmain(int argc, _TCHAR* argv[]) {
    IplImage* img = cvLoadImage( "MGC.jpg" );
    cvThreshold( img, img,  200, 255, CV_THRESH_BINARY );
    cvNamedWindow( "Example1", CV_WINDOW_AUTOSIZE );
    cvShowImage("Example1", img);
    cvWaitKey(0);
    cvReleaseImage( &img );
    cvDestroyWindow( "Example1" );
    return 0;
} 
```

现在你能帮我实现我的目标，如下所述：

```
int _tmain(int argc, _TCHAR* argv[]) {
    Some code here (using some API other than OpenCv).... // Captures a frame and  
    //streams the data into a buffer Buf
    Buffer B= Buf; // B contain binary image data i.e 16 bit pixel values
    cvThreshold( B, B,  200, 255, CV_THRESH_BINARY );//Notice I am putting B and not an 
                                                     //Image(legal?)
    cvNamedWindow( "Example1", CV_WINDOW_AUTOSIZE );
    cvShowImage("Example1", B); //Notice I am putting B and not an Image(legal?)   
    cvWaitKey(0);
    cvReleaseImage( &B );
    cvDestroyWindow( "Example1" );
    return 0;
} 
```

请注意，我在第二个代码片段中没有使用任何硬盘读/写操作，如下所示：

```
 IplImage* img = cvLoadImage( "MGC.jpg" ); 
```

基本上我正在处理实时场景，因此我绕过了耗时的`cvLoadImage`. 显然没有将数据保存到硬盘中，我的整个数据仍然在`Buffer B`. 这节省了我的时间，这对我的应用程序至关重要。

**注意：**事实是我将对 进行更多处理`Buffer B`，例如应用`cvminmaxloc`等。*但是所有这些功能都需要从磁盘加载的图像，而不是像我这样的缓冲区。*

有人可以为我指明正确的方向，以实现使用缓冲区而不是存储在硬盘中的图像的目标吗？我在理解 openCV 功能时犯了一些错误吗？

**更新：**

下面的建议可`imdecode`用于从缓冲区读取图像。如上所述，实际上我将使用 OpenCv 函数对图像进行处理，`CVMinMaxLoc`例如

```
 cvThreshold( src, src,  200, 255, CV_THRESH_BINARY ); 
```

现在我可以把`Buffer`作为第一个参数而不是 Image in`cvThreshold( )`吗？如果不是，那么使用 openCv 函数处理`Buffers`（包含像素值）的替代方法是什么？如果没有使用缓冲区的直接方法，那么实现此目标的间接方法是什么？解决方法是什么？

简而言之，我不想在进行任何处理之前将数据带到硬盘上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:48:52.473

了解 OpenCV 的大部分 C 接口都处理`IplImage`，而`Buffer`不是任何其他自定义数据类型。换句话说，做：

```
Buffer B = Buf; 
cvThreshold( B, B,  200, 255, CV_THRESH_BINARY ); 
```

将发出编译错误，因为`cvThreshold()`需要将数据封装在`IplImage`.

我不想冒成为明显船长的风险，但您需要转换`Buffer`为`IplImage`. 那么你是如何做到这一点的，有人可能会问。嗯，`IplImage`是一个简单的数据类型，将这些重要的信息放在一起：

*   图片的**尺寸**（宽/高）；
*   图像的**位深度**；
*   **通道**数；
*   以及图像的**数据**（像素）；

以及[如何`IplImage`从头开始](https://stackoverflow.com/a/10125322/176769)创建？呼叫[`cvCreateImageHeader()`](http://opencv.willowgarage.com/documentation/operations_on_arrays.html#createimageheader)后跟[`cvSetData()`](http://opencv.willowgarage.com/documentation/operations_on_arrays.html?highlight=cvsetdata#cvSetData)。

**注意**：对于*深度*参数，您可能希望使用[IPL_DEPTH_16U 或 IPL_DEPTH_16S](http://opencv.willowgarage.com/documentation/basic_structures.html#iplimage)。如果您的图像是 RGB，则*通道数*为 3。使用完毕后`IplImage`，不要忘记调用`cvReleaseImage()`释放它的资源。

我相信真正的挑战是：你将如何从`Buffer`. 祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:11:34.643

C++ OpenCV API 中有一个[`imdecode`](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#imdecode)函数可以解码存储在内存缓冲区中的图像。但是遗留 C API 中没有类似物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:55:57.213

我认为您不能将缓冲区（如您所说的具有像素值）代替 src ，即以下从磁盘加载的图像

```
 cvThreshold( src, src,  200, 255, CV_THRESH_BINARY ); 
```

一种方法可能是在 MAT 中转换缓冲区，然后使用 cvThreshold。

可能有更多经验的人可能会对此发表评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:47:49.343

您应该将缓冲区转换为 openCV 类型[Mat](http://opencv.willowgarage.com/documentation/c/core_basic_structures.html#cvmat)

[这里](https://stackoverflow.com/questions/7734469/converting-basler-image-to-opencv)做了类似的事情

# android - 实施购物车

> ID：11272007
> 
> 赞同：6
> 
> 时间：2012-06-30T06:28:51.973
> 
> 标签：android, sqlite, android-activity, global-variables, shopping-cart

我正在制作一个我正在实施购物车的 Android 应用程序。当用户选择一个项目时，它会被添加到他/她在应用程序中的购物车/购物袋中。一旦他/她添加了一个项目，他就会再次看到菜单，他可以在其中添加更多项目。现在我想知道如何在购买过程中保存这些物品。我的意思是保存在包中的物品，我如何将它们保存在我的安卓应用程序中？我应该使用 Android SQLite 数据库吗？或使用 putextra/getextra 并浏览活动？还是我应该使用全局变量（类似于继承 Application 类）？

或者有没有其他更好的方法来实现这样的事情？我需要在我的包中显示的详细信息是：产品名称、价格、数量以及与产品相关的一些其他属性/选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T06:36:10.420

以额外的方式传递购物车项目或使用 Application 类太不稳定了。如果您的应用程序崩溃，用户退出应用程序，android 决定关闭您的应用程序，.. 基本上任何关闭您的应用程序.. 用户将丢失其购物车中的内容。

SQLite 将是存储此类数据的不错选择。您还可以将购物车存储在用户手机上的 xml 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:36:14.403

> 还有其他更好的方法来实现这样的事情吗？

首先你要明白什么*是* [购物车软件](http://en.wikipedia.org/wiki/Shopping_cart_software)？但是，您可以在 android 中开发[购物车客户端](http://www.androiddom.com/2011/02/android-shopping-cart-tutorial.html)（教程）。

购物车系统具有服务器应用程序（您可以使用`RESTful`Web 服务、servlet 和过滤器开发）和客户端应用程序（您可以开发 Web 客户端或 Android 客户端）。RESTful Web 服务，它公开`Shopping Cart API`并且您可以将它们（Web 服务）与 Android UI 和网络 API（Apache http 客户端）进行交互。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-23T10:26:15.050

一种方法是将您的购物车存储在公共静态变量中。由于我必须为我的几个 Android 应用程序实现购物车，因此我尝试为它创建一个库项目。

您可以在此处查看：[https](https://github.com/tonyvu2014/android-shoppingcart) ://github.com/tonyvu2014/android-shoppingcart ，有关如何使用该库的示例在此处：[https ://github.com/tonyvu2014/android-shoppingcart-demo](https://github.com/tonyvu2014/android-shoppingcart-demo)

# php - SimplePie 不显示 Google RSS 提要

> ID：11272008
> 
> 赞同：0
> 
> 时间：2012-06-30T06:29:17.303
> 
> 标签：php, simplepie

我正在使用 SimplePie 来获取 RSS 提要。除 Google RSS 外，所有其他 RSS 提要均显示。我检查了`echo $feed->error()`，错误显示

> 此 XML 文档无效，可能是由于字符无效。XML 错误：EntityRef：期待 ';' 在第 1 行第 248 列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:52:58.780

将 https 换成 http。我遇到了同样的问题，我尝试了 Inj2011 发布的 RSS xml（评论员之一）。当我查看他的提要和我的提要时，不同之处在于协议。然后我使用http，而不是https，瞧……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T20:14:26.877

使用“$feed->set_raw_data()”而不是“$feed->set_feed_url()”，例如：

```
$feed->set_raw_data(file_get_contents($rssurl)); 
```

# javascript - 为什么这个用于插入 Adsense 广告的 Javascript 代码不起作用？

> ID：11272010
> 
> 赞同：1
> 
> 时间：2012-06-30T06:29:27.900
> 
> 标签：javascript, adsense

从[这个问题的建议](https://stackoverflow.com/q/11243398/184108)开始，我做了一些搜索，在[这个网站](http://www.webmasterworld.com/google_adsense/4397994.htm)上找到了一些代码，旨在在页面加载*后将*Google Adsense 广告插入我网页上的特定位置。就我而言，我在 Javascript 中进行了一些检查，将 JSON 数据发送回我的服务器，然后根据从该 JSON 获得的响应，我决定是否显示 Google Adsense 广告。

由于我是从网上得到这段代码，并不是我自己写的，所以有很多我没有得到，在某些地方我不得不根据我认为需要的内容填写详细信息，但我在猜测一点点。这就是我当前使用的代码的外观：

```
if(userStatus.status == 0)
{
    console.log("google ad should show");

    window["google_ad_client"] = 'ca-pub-0000000000000000';
    window["google_ad_slot"]  = "0000000000";
    window["google_ad_width"]  = 320;
    window["google_ad_height"]  = 50;

    window.adcontainer = document.getElementById('google-ad');
    window.adhtml = '';

    function mywrite(html)
    {
        adhtml += html;
        if(html == '</iframe>')
        {
            adcontainer.innerHTML = adhtml;
        }
    };

    document.write_ = document.write;
    document.write = mywrite;

    script = document.createElement('script');
    script.src='http://pagead2.googlesyndication.com/pagead/show_ads.js';
    script.type='text/javascript';
    document.body.appendChild(script);
} 
```

似乎它几乎可以工作了。

当我在启用了 Firebug 的 Firefox 中查看我的页面时，我看到我的控制台日志消息正在显示，所以我知道我已经通过了所有条件。

我还尝试使用直接写入 HTML 的代码来运行广告，以确认 Google 已接受我的网站并且他们将展示广告。当我这样做时，广告显示正常，所以我相信我的 Asense 帐户没有问题。

但是，虽然调用`http://pagead2.googlesyndication.com/pagead/show_ads.js`被附加到页面末尾，但广告参数似乎并未按预期写入`google-ad`DIV。

因此，广告没有显示。

我的代码哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:22:18.247

原来问题出`if(html == '</iframe>')`在线路上。我原以为这与 Google 如何构建 adsense 广告有关，但它一定与最初编码的人需要如何构建他们的 HTML 有关。

不过，就我而言，我根本不需要它。我的代码现在已更改为：

```
function mywrite(html)
{
    adhtml += html;
    adcontainer.innerHTML = adhtml;
}; 
```

令我惊讶的是，它有效！我现在有一个 Google Adsense 广告，它将根据页面加载后检索的 JSON 数据的结果显示。

此外，对于任何可能想要做类似事情的人来说，进一步的提示：首先将您的 Google 广告硬编码到 HTML 中，以确保它可以正常工作并且 Google 已经接受了它，然后再尝试使用 Javascript 或其他任何东西做任何花哨的事情。如果我早点意识到这一点，我可能会为自己节省一些时间。

希望能帮助其他可能想做同样事情的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:58:07.347

我不确定......这里有一些评论：

1.  我希望你`google-ad`已经创建了 div id 框。

2.  `document.write`只工作**一次**！
    当页面正在创建并且 DOM 正在形成时。因此，该代码必须位于 js 执行的最顶层。
    `write`如果 DOM/Page 已经形成，将无法工作。

# c# - 如何使 ToolStripDropDownButton 项目字体加粗？

> ID：11272015
> 
> 赞同：0
> 
> 时间：2012-06-30T06:29:57.320
> 
> 标签：c#, winforms, toolstripdropdown

我正在尝试格式化 ToolStripDropDownButton 项目

```
btn1.DropDown.ForeColor = Color.Gray; //this works
btn1.DropDown.Font.Bold = true; //this doesn't work. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:33:12.400

问题是字体内的属性是只读的。解决方案是创建一个新字体，如下所示：

```
btn1.DropDown.Font = new Font(btn1.DropDown.Font, FontStyle.Bold); 
```

# html - VBscript 和查找输入信息

> ID：11272018
> 
> 赞同：0
> 
> 时间：2012-06-30T06:30:09.190
> 
> 标签：html, scripting, vbscript, client-side, hta

是的，我是一个使用 VBScript 客户端的异教徒。实际上，我对 HTA 很着迷，并且正在尝试将 VBscript 合二为一。无论如何.. 这样做的总体目标是能够将输入写入 txt 文件。 ..我遇到了一条错误消息“需要对象”，它指向我用来存储输入信息的 FormContent 变量……我不确定这里发生了什么，我认为要么 A）我我失败得很惨 B）我没有正确理解价值是如何被拉出来的 C）我失败了......（另外作为旁注，我稍后会在验证中添加，所以不要对我吠叫：[关于任何想法这是怎么回事？

```
<html>
<HTA:APPLICATION 
     APPLICATIONNAME="HerpDerp"></HTA:APPLICATION>
     <head>
         <meta content="en-us" http-equiv="Content-Language">
         <!--Using VBscript to write data to file (create object, open, append, write, close). -->
         <script type="text/vbscript">
         Sub Submit_OnClick
            dim filesys, filetxt, FormContent
            Set FormContent =  document.getElementById(Text1)
            Set filesys = CreateObject("Scripting.FileSystemObject")
            Set filetxt = filesys.OpenTextFile("C:\\MyFile.txt", 8, True) 
            filetxt.WriteLine(FormContent.value)
            filetxt.Close  
        End Sub         

        </script>

     </head>
<form name="Form1">
<p><input name='Text1' style="width: 671px; height: 112px" type='text' id='Text1'></p>
<p><input name='Submit' style="width: 215px" type='button' value='Submit'></p>
</form>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:38:25.287

Text1 是一个字符串。您需要这样对待它（用引号括起来）。

但是.... 作为一般建议，不要使用 HTA。HTA 是十多年前编写的一套陈旧的技术，几乎完全未被 Microsoft 维护。

# android - 没有得到sim信息

> ID：11272019
> 
> 赞同：1
> 
> 时间：2012-06-30T06:30:58.303
> 
> 标签：android, wifi, sim-card, telephonymanager

在我的应用程序中，我使用 . 检查 Sim 是否存在`simState == TelephonyManager.SIM_STATE_ABSENT`。如果 Sim 存在，我将收集所有 Sim 信息，例如 Sim 运营商名称、Sim 国家/地区等。如果我关闭 WiFi，即使它存在，我也会得到 Sim 缺席，并且我没有得到任何 Sim 详细信息。（电话管理员无法访问 sim当 wifi 未连接时。）

1.  WiFi关闭时，还有其他方法可以获取SIM卡信息吗？

```
TelephonyManager telephonyManager =
  ((TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE));
int simState = telephonyManager.getSimState();
if (simState == TelephonyManager.SIM_STATE_ABSENT){
        Log.d("hello", "network disconnected"); 
        operatorParam.add("Not found");
        operatorParam.add("Not found");
        operatorParam.add("Not found");
        operatorParam.add("Not found");
        operatorParam.add("Not found");
        operatorParam.add("Not found");

    } else {

        Log.d("hello", "network connected");
        if (telephonyManager.getNetworkOperatorName() != null) {
            operatorParam.add(telephonyManager.getNetworkOperatorName());
            Log.d("operator", "getoperator name not null: "
                    + telephonyManager.getNetworkOperatorName());

        } else {
            operatorParam.add("Not found");
        }

        if (telephonyManager.getSimOperatorName() != null) {
            operatorParam.add(telephonyManager.getSimOperatorName());
        } else {
            operatorParam.add("Not found");
        }

        if (telephonyManager.getSimOperator() != null) {
            operatorParam.add(telephonyManager.getSimOperator());
        } else {
            operatorParam.add("Not found");
        }

        if (telephonyManager.getSimSerialNumber() != null) {
            operatorParam.add(telephonyManager.getSimSerialNumber());
        } else {
            operatorParam.add("Not found");
        }

        if (telephonyManager.getSimCountryIso() != null) {
            operatorParam.add(telephonyManager.getSimCountryIso());
        } else {
            operatorParam.add("Not found");
        }

        if (telephonyManager.getSubscriberId() != null) {
            operatorParam.add(telephonyManager.getSubscriberId());
        } else {
            operatorParam.add("Not found");
        }

       } 
```

提前致谢。

# asp.net-mvc-3 - MVC3 - 用户登录和重定向基于他们的角色

> ID：11272021
> 
> 赞同：0
> 
> 时间：2012-06-30T06:31:18.103
> 
> 标签：asp.net-mvc-3, redirect, role

我的挑战是根据用户的角色将用户重定向到他们的区域我放置了一个箭头以重定向到一个区域，但如果角色不是此角色类型，我需要放置一个异常来处理另一个区域。

我将如何修改默认登录控制器操作：

```
[HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                  return RedirectToAction("Index", "Home", new { area = "Client" });

                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:17:14.757

我想到了。这个直截了当的答案绝对没有任何帖子，所以请随时重新发布：

```
 [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    if (Roles.IsUserInRole(model.UserName, "UserRoleOne"))
                    {
                        return RedirectToAction("Index", "Home", new { area = "AreaForUserRoleOne" });
                    }
                    else
                    {
                        if (Roles.IsUserInRole(model.UserName, "UserRoleTwo"))
                        {
                            return RedirectToAction("Index", "Home", new { area = "AreaForUserRoleTwo" });
                        }
                    }
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:27:03.120

这可能是您正在寻找的：

```
 [Authorize(Users="Smith, Steve", Roles="Admin, PowerUser")] 
```

用户：允许访问操作方法的用户名的逗号分隔列表。

Roles ：以逗号分隔的角色名称列表。要访问操作方法，用户必须至少具有这些角色之一。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)

# perl - Perl 提交到一个页面，然后再次提交

> ID：11272022
> 
> 赞同：3
> 
> 时间：2012-06-30T06:31:27.533
> 
> 标签：perl

我有以下代码：

```
$IEDocument = $IE->{Document};
$Forms = $IEDocument->all;
$form = $forms->item{'search');
$form->click;

# it clicks the search button which submits to a page
# then I do the following

$doc = $IE->{Document}; #Not sure if correct
$forms = $doc->{DocumentElement}->{InnerHTML};
$form = $forms->item('field');
$form->{value} = "12345";

# The following code must submit to a page, then put new info in an input field on that new submitted page 
```

但它不起作用，有什么办法做到这一点？我研究了这么多，有人建议使用 WWW::Mechanize，但是当我使用它时，我无法截取页面，因为 Mechanize 只是在 CMD 中显示它在做什么，并没有真正打开浏览器。（顺便说一句，有没有办法用 WWW::Mechanize 打开浏览器，看看实际发生了什么？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:47:44.090

请提供一些有关它的**详细信息**

> 不工作

要截屏，您可以使用 WWW::Mechanize::Firefox 模块：

```
use WWW::Mechanize::Firefox;
my $mech = WWW::Mechanize::Firefox->new();
$mech->get('http://google.com');

my $png = $mech->content_as_png(); #you have a screen in $png now 
```

# php - 注册后php-Facebook重定向？

> ID：11272023
> 
> 赞同：0
> 
> 时间：2012-06-30T06:31:59.780
> 
> 标签：php, facebook

我正在使用 php sdk 将用户登录到网站。另外我正在使用redirect_uri 重定向到login.php 我正在使用用户ID 设置cookie。然后我正在检查 cookie 是否存在我正在使用 header 函数来引导用户回到 main.php

```
<?php   if(isset($_COOKIE['id']) == false){

        require_once('scripts/facebook.php');
        $config = array('appId' => 'xxx','secret' => 'xxx');
        $params = array('scope' => 'email,offline_access,user_birthday', 'redirect_uri' => 'http://www.xxx.com/login.php');
        $facebook = new Facebook($config);
        $user = $facebook->getUser(); 

        if($user) {

            try {

            $user_profile = $facebook->api('/me','GET');
        $userid = $user_profile['username'];

                //insert cookie
                $expire = time() + 31556926;
                $cookie_id = $user_profile['username'];
                setcookie("id", $cookie_id, $expire);
                header('Location: main.php');

          } catch(FacebookApiException $e) {
                            $login_url = $facebook->getLoginUrl($params);
                            echo '<img src="assets/login.png"><br>';
                            echo '<a href="' . $login_url . '"><img src="assets/facebook_login.png"></a>';
                            error_log($e->getType());
                            error_log($e->getMessage());
          }   
        } else {

            $login_url = $facebook->getLoginUrl($params);
            echo '<img src="assets/login.png"><br>';
            echo '<a href="' . $login_url . '"><img src="assets/facebook_login.png"></a>';
        }//end facebook
        }else{
            //if cookie id is set
            header('Location: main.php');
            }
    ?> 
```

现在，问题是当用户对应用程序进行身份验证时，它正在重定向到登录页面。这意味着 php 页面没有被刷新。我怎么解决这个问题 ？更新：如果用户刷新页面或再次单击登录，他将自动重定向到 main 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:05:52.253

我在这里有同样的问题。我通过 Facebook PHP 函数 getLoginURL() 将网站用户重定向到使用 Facebook 网站登录。一旦用户进入 Facebook 的登录屏幕并被重定向回我的网站，页面就不会刷新。这意味着我无法为当前登录的用户更新页面显示。这似乎有点愚蠢 - 因为我认为这将是显而易见的“默认”事情。

如果我/您添加客户端 Facebook JS 和根 div，则该过程适用于 Facebook JS 驱动的页面重新加载 - 但是基于拉入客户端 Facebook JS 的重新加载是我可以不依赖的依赖项 - 它只是增加臃肿并使事情复杂化。任何对如何解决此问题有任何其他想法的人。

客户端 JS 放置在您的结束 body 标记之前：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: '<?php echo $facebook->getAppID() ?>',
      cookie: true,
      xfbml: true,
      oauth: true
    });
    FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
    });
    FB.Event.subscribe('auth.logout', function(response) {
      window.location.reload();
    });
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
  }());
</script> 
```

# c++ - 系统挂起 OpenGLES 调用

> ID：11272024
> 
> 赞同：0
> 
> 时间：2012-06-30T06:32:29.970
> 
> 标签：c++, opengl-es

我想使用 OpenGLES (Win32/C++/VS2010) 绘制简单的三角形。所以我没有任何错误，但系统挂断了 OpenGLES 调用。

我可以在我的机器上编译和运行不同的游戏引擎，一切正常，但我不能画一个简单的三角形！

游戏循环仍在运行，所以我收到了更新和绘制事件，我看到了我的三角形，但是 OpenGLES 调用太慢了，系统挂了！

```
1\.  Creating and initializing EGL stuff.

2\.  glViewport(0, 0, 800, 480);

3\.  glClearColor(/*black*/);

4\.  glClear(GL_COLOR_BUFFER_BIT);

5\.  GLfloat vertices[] = {1,0,0, 0,1,0, -1,0,0};

6\.  glEnableClientState(GL_VERTEX_ARRAY);

7\.  glVertexPointer(3, GL_FLOAT, 0, vertices);

8\.  glDrawArrays(GL_TRIANGLES, 0, 3);

9\.  glDisableClientState(GL_VERTEX_ARRAY);

10\. glFlush();

11\. eglSwapBuffers(...) 
```

* * *

游戏日志显示了一些非常奇怪的东西！

```
NO TAG:     Updated:    0ms.
NO TAG:     Rendered:   0ms.
NO TAG:     Updated:    1ms.
NO TAG:     Rendered:   1ms.
NO TAG:     Updated:    0ms.
NO TAG:     Rendered:   0ms.
NO TAG:     Updated:    1ms.
NO TAG:     Rendered:   1ms.
NO TAG:     Updated:    0ms.
NO TAG:     Rendered:   1ms.
NO TAG:     Updated:    1ms.
NO TAG:     Rendered:   0ms.
NO TAG:     Updated:    567ms.
NO TAG:     Rendered:   478ms. 
```

例如，每 50 个循环都有一个缓慢的绘制和更新调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:47:32.340

问题在于缺少这些行：

```
if (! m_hAccelTable || ! TranslateAccelerator(msg.hwnd, m_hAccelTable, &msg))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
} 
```

现在，我的应用程序没有挂断，但它什么也不渲染。

# android - 获取目标主机不得为空或在 Android 的 http get 方法中的参数中设置

> ID：11272027
> 
> 赞同：0
> 
> 时间：2012-06-30T06:33:11.073
> 
> 标签：android, http, http-get

请帮我找出我试图在谷歌上找到很多次但我无法找到它的解决方案的问题答案。

首先我得到这个例外

```
 java.lang.IllegalArgumentException: Illegal character in query at index 130 
```

比在我的代码中添加此代码之后。

```
String restUrl = URLEncoder.encode(url, "UTF-8");
HttpGet httpget = new HttpGet(restUrl); 
```

然后我得到了这个例外

```
java.lang.IllegalStateException: Target host must not be null, or set in parameters. 
```

请帮我解决这个异常。请。

这是我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:35:38.377

[Android：如何将带有空格的 URL 字符串解析为 URI 对象？](https://stackoverflow.com/questions/2593214/android-howto-parse-url-string-with-spaces-to-uri-object)

实际上，您应该对“无效”字符进行 URLEncode。由于字符串实际上包含完整的 URL，因此很难对其进行正确的 URL 编码。您不知道应该考虑哪些斜杠 / 哪些不应该考虑。您无法事先在原始字符串上进行预测。这个问题确实需要在更高的层次上解决。那个字符串是从哪里来的？它是硬编码的吗？然后自己相应地更改它。它是作为用户输入出现的吗？验证它并显示错误，让用户自己解决。

# django - PyCharm 和 Django 的请求对象自动完成

> ID：11272031
> 
> 赞同：1
> 
> 时间：2012-06-30T06:33:39.593
> 
> 标签：django, autocomplete, namespaces, pycharm

我在 Django 中使用 PyCharm，但 Django 的`request`对象有问题。当我写一个像这样的视图时：

```
# File: views.py

def page(request):

    foo = request.G[TAB]   # When I click TAB here, it can't auto-complete
                           # GET unless I used it somewhere else.

    return render_to_response("page.html") 
```

看起来 PyCharm 看不到该对象`request`。我该如何解决或解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:08:24.103

因为像你尝试的那样在 Django 中使用 get 参数不是一个好主意而且我认为 PyCharm 开发人员试图教我们编写 DRY 代码

[https://docs.djangoproject.com/en/dev/topics/http/urls/](https://docs.djangoproject.com/en/dev/topics/http/urls/)

```
#urls.py

...
url(r'^page/(?P<page_number>[0-9]*)$', 'app_name.views.pages'),
... 
```

和

```
#app_name: views.py
...
from django.shortcuts import render
def test_page(request, page_number=1):
    return render(request, 'test_tpl.html',{'page_number': page_number})
... 
```

# maven - 如何使用 maven 发布本地和远程 ejb api

> ID：11272033
> 
> 赞同：2
> 
> 时间：2012-06-30T06:34:08.033
> 
> 标签：maven, ejb

我有一个带有无状态会话 bean 的 ejb。我有每个 bean 的接口，可以从另一台机器的另一个 ejb 访问或远程调用。在 invy 中，我记得我们正在使用类似的东西：publish-remote、publish-api。maven可以做同样的事情吗？

在单独的 jar 中发布接口，以包含在另一个项目中。

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T09:05:38.093

Maven 能够使用 maven-ejb-plugin 自行生成您的客户端 jar：[http ://maven.apache.org/plugins/maven-ejb-plugin/index.html](http://maven.apache.org/plugins/maven-ejb-plugin/index.html)

```
<build>
    [...]
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-ejb-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <!-- this is false by default -->
          <generateClient>true</generateClient>
        </configuration>
      </plugin>
    </plugins>
    [...]
  </build> 
```

然后，它将生成一个客户端，您将能够将其用作依赖项：

```
<project>
  [...]
  <dependencies>
    <dependency>
      <groupId>com.example</groupId>
      <artifactId>ejb-project</artifactId>
      <version>1.0-SNAPSHOT</version>
      <type>ejb-client</type>
    </dependency>
  </dependencies>
  [...]
</project> 
```

或更好

```
<project>
  [...]
  <dependencies>
    <dependency>
      <groupId>com.example</groupId>
      <artifactId>ejb-project</artifactId>
      <version>1.0-SNAPSHOT</version>
      <type>ejb</type>
              <classifier>client</classifier>
    </dependency>
  </dependencies>
  [...]
</project> 
```

我没有任何真实的例子（我在我的个人计算机上，而不是我的工作计算机上），但我记得我们在第二种方法中使用了依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:52:20.400

如果您有单独的 Maven 项目，这是分离接口（api）和实现的常用方法。当然，您可以单独部署接口和实现。

# osx-lion - 为 NSPopover 配置字段编辑器

> ID：11272037
> 
> 赞同：0
> 
> 时间：2012-06-30T06:35:07.813
> 
> 标签：osx-lion, fieldeditor, nspopover

可可新手在这里：我似乎首先进入了所有真正神秘的东西。我想要一个 NSTextField，点击时默认选择其中的内容，并且我可以在其中更改选择颜色。我在这个论坛上找到了足够多的东西，让我开始了解现场编辑的奥秘。我有 NSTextField 子类，并覆盖了 becomeFirstResponder 方法：

```
- (BOOL) becomeFirstResponder {
    if (!super.becomeFirstResponder) return NO;
    NSTextView * fieldEditor = (NSTextView *) [self.window fieldEditor:YES forObject:self];
    [fieldEditor performSelector:@selector(selectAll:) withObject:fieldEditor afterDelay:0];
    [fieldEditor setSelectedTextAttributes:selectionColor];
    return YES; } 
```

其中 selectionColor 是一个单项 NSDictionary，其 NSColor 对象键入 NSBackgroundColorAttributeName。这对于窗口和面板上的文本字段非常有效，但对于 NSPopover 视图中的字段根本不起作用。事实上，它使文本选择变得不可能。仍然可以在字段中单击并键入，但在文本中拖动光标以选择它会失败。我只能得出结论，我以某种方式错误地配置了字段编辑器。我是否正确引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:54:21.423

我希望我在回答我自己的问题时遵循 stackOverflow 协议。简短的回答是，显然，我发布的代码非常适合 NSPopovers。我认为它不起作用的可能原因是我称为 selectionColor 的 NSDictionary 对象没有被正确初始化。我在这里有一个 Emily Litella 时刻：“哦……没关系！” 在我看来，现在唯一的问题是我花了很长时间才找到这个。

# java - 泽西岛日志过滤器

> ID：11272045
> 
> 赞同：1
> 
> 时间：2012-06-30T06:36:13.837
> 
> 标签：java, web-services, jakarta-ee, log4j, jersey

我将日志过滤器添加到我的 Jersey rest webservices 客户端，我看到所有 Jersey 日志都打印在 catalina.out 而不是我的应用程序特定日志文件。有时，我还会看到在 catalina.out 而不是应用程序日志文件中打印 spring/jsp 错误。

我的 log4j.properties 中有以下关于 spring 的内容。我也应该为泽西岛添加一些东西吗？我知道这是一个 log4j 配置问题，如果有人可以回复，将不胜感激。

```
 log4j.logger.org.springframework=warn 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:17:16.233

如果您需要将球衣日志重定向到文件，请按照[此处](https://stackoverflow.com/questions/3760305/outputting-jersey-logging-to-a-file)的建议尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:21:14.427

我认为您需要适当地设置您的记录器级别。

调试 < 信息 < 警告 < 错误 < 致命

当您用于记录的 logger 为 lower level 时，则 log 下降到较高级别。

[http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)

这可能是您的日志下降到顶级的原因

# blackberry - 使用 Push SDK 低级 API 找不到捆绑资源

> ID：11272048
> 
> 赞同：1
> 
> 时间：2012-06-30T06:36:19.690
> 
> 标签：blackberry

我使用以下帖子作为指南 - [http://supportforums.blackberry.com/t5/BlackBerry-Push-Development/Push-SDK-using-low-level-APIs/td-p/1173007](http://supportforums.blackberry.com/t5/BlackBerry-Push-Development/Push-SDK-using-low-level-APIs/td-p/1173007)。

Push.java 类编译成功。但是当我尝试运行它（java Push）时，我收到以下错误：

```
java.util.MissingResourceException: Can't find resource for bundle    java.util.PropertyResourceBundle, key use.public.push
        at java.util.ResourceBundle.getObject(ResourceBundle.java:374)
        at java.util.ResourceBundle.getString(ResourceBundle.java:334)
        at net.rim.pushsdk.commons.DefaultPropertyStore.getProperty(DefaultPropertyStore.java:62)
        at net.rim.pushsdk.commons.PropertyStore.getBooleanProperty(PropertyStore.java:90)
        at net.rim.pushsdk.commons.PushSDKPropertiesImpl.isUsingPublicPush(PushSDKPropertiesImpl.java:345)
        at net.rim.pushsdk.pap.control.PapControl.isUsingPublicPush(PapControl.java:176)
        at net.rim.pushsdk.pap.PapServiceImpl.push(PapServiceImpl.java:90)
        at Push.main(Push.java:46)
nattyp@arya:~/projects/push/test$ 
```

我的目录列表是

```
drwxr-xr-x 3 nattyp nattyp  4096 Aug 25  2007 org
drwxr-xr-x 3 nattyp nattyp  4096 Apr 29  2011 net
-rw-r--r-- 1 nattyp nattyp 12614 Jun 22 11:07 PushSDK.properties
-rw-r--r-- 1 nattyp nattyp   741 Jun 22 11:07 pushsdk-pap-context.xml
-rw-r--r-- 1 nattyp nattyp  1472 Jun 22 11:07 pushsdk-commons-context.xml
-rw-r--r-- 1 nattyp nattyp  8483 Jun 22 11:07 pap_2.1.dtd
-rw-r--r-- 1 nattyp nattyp  8417 Jun 22 11:07 pap_2.0.dtd
-rw-r--r-- 1 nattyp nattyp  2260 Jun 22 11:07 log4j.xml
-rw-r--r-- 1 nattyp nattyp  2646 Jun 22 12:17 Push.class
-rw-r--r-- 1 nattyp nattyp  2257 Jun 22 12:28 Push.java
 The org and net directories are the jar extract from pap-1.1.0.16.jar and commons-pushsdk-1.1.0.16.jar. 
```

我错过了什么？

# c++ - 多线程环境中的 XSetWMProtocols 和 glXCreateContext 调用顺序

> ID：11272054
> 
> 赞同：0
> 
> 时间：2012-06-30T06:37:20.400
> 
> 标签：c++, multithreading, x11, glx

**编辑：**我在下面发布了一个很好的解决整个渲染器分离问题的方法。

我最近在多线程 X11 环境中使用 OpenGL。我找到了以下[教程](http://rosario3d.wordpress.com/2011/01/24/xlib-opengl-programming-and-multithreading/)，它可以编译、链接并运行良好。

但是，在尝试根据自己的需要调整代码后，我遇到了一个奇怪的问题。

教程中XCreateWindow、glXCreateContext、XSelectInput、XSetWMProtocols的调用顺序如下：

```
param[i].win = XCreateWindow(param[i].d_, root, 200,200, 
                   300,200, 0, visInfo->depth, InputOutput, visInfo->visual,
                   CWColormap,
                   &windowAttr);
param[i].ctx = glXCreateContext(param[i].d_, visInfo,  NULL, True);
XSelectInput(d, param[i].win, StructureNotifyMask);
XSetWMProtocols(d, param[i].win, &(delMsg), 1); 
```

请注意，XCreateWindow 和 XSelectInput/XSetWMProtocols 使用不同的显示连接。

但是，当更改调用顺序时

```
param[i].win = XCreateWindow(param[i].d_, root, 200,200, 
                   300,200, 0, visInfo->depth, InputOutput, visInfo->visual,
                   CWColormap,
                   &windowAttr);
XSelectInput(d, param[i].win, StructureNotifyMask);
XSetWMProtocols(d, param[i].win, &(delMsg), 1);
param[i].ctx = glXCreateContext(param[i].d_, visInfo,  NULL, True); 
```

该程序失败

> X Error of failed request: BadWindow (invalid Window parameter)
> Major opcode of failed request: 2 (X_ChangeWindowAttributes)
> Resource id in failed request: 0x5000002 Serial number of failed request: 17 Current serial number in output stream: 18

这似乎是由 XSetWMProtocols 引起的。

由于使用了不同的显示连接，如果整个事情一开始就不起作用，我不会感到惊讶。但不知何故，在调用 glXCreateContext 之后，一切似乎都神奇地好起来了。

我对 X11/GLX 编程比较陌生，我错过了什么吗？glXCreateContext 执行了什么样的魔法？还是发生了其他事情？或者也许我应该继续前进，因为 OpenGL 和多线程似乎总是会导致问题。

**我的解决方案：**

我很懒，只是使用教程中的方法。这一直有效，直到将 freetype 添加到我的项目中，这突然又给了我一个 BadWindow 崩溃。所以，即使一切看起来都很好，***当你在不同的线程中工作时，X11 会在你不在的时候认真地处理一些内存***。（不是我，我用 valgrind 检查过）

我目前的解决方案是 nm 评论的：我将所有内容都放入一个 GUI 线程（X11 和 GL/GLX 调用）中，其资源永远不可用于其他线程。但是，必须记住两件事，因为它可能会减慢渲染循环：

*   缓慢的消息处理延迟渲染（如下 ilmale 所述）
*   缓慢的渲染延迟消息处理（我担心）

第一个问题很容易解决。创建一个 stl deque 或列表或任何容器，您可以在其中为您的应用程序逻辑排队相关的 XEvent，然后从另一个线程中获取它们。只要确保您的 STL 是线程安全的，并且毫无疑问地实现您自己的队列。通过在容器大小上设置等待条件，您甚至可以模拟 XNextEvent 之类的阻塞调用。

第二个问题很棘手。您可能会争辩说，如果渲染器的速度为 1 fps 或更慢，那么游戏或应用程序无论如何都是无用的。那是真实的。但是，如果您能够处理一些终止信号（例如销毁窗口原子），即使您的速度为 0.1 fps，那将会很整洁。我能想到的唯一解决方案是在渲染每千个左右的精灵后检查新消息。将它们发送到您的容器并继续渲染。当然，在这种情况下，您永远不能让渲染线程随时运行用户脚本或其他未知代码。但我想，无论如何，这将使将渲染与其他线程分开的想法毫无意义。

希望这可以帮助。

：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:51:11.400

我基本上在跨平台项目中经历了多线程 X11 和 Win32 的相同试验。

我注意到的一件事是 X11 并没有像上面的帖子那样修改内存。当然，各种命令的顺序有些奇怪，但是一旦你做对了，它似乎就相当稳定了。

*具体来说，几乎*让我认输的一项是后台 GPU 处理！正是这种非常奇怪且难以捕捉的运行时竞争条件让我认为应该归咎于操作系统。

在将纹理发送到显示列表中的卡片后（咳，在实现 freetype 时也是如此），立即绘制资源*有时会*导致字体显示列表轻微损坏，即使是以后的绘制也是如此。显示列表本身已损坏，我什至求助于实现全局 OpenGL 锁定只是为了证明线程不是罪魁祸首。但*为什么*它会被破坏？操作系统？不，GPU。

我相信共享的 GLX 上下文会在某些卡上强制执行不同的行为，尤其是我系统上的 nvidia。不是其他线程导致了我的麻烦，而是 createContext 调用上的共享标志加上在使用资源之前缺少 glFinish() 。这和我将在下面解释的一些最佳实践。

在 99% 的运行中，即使使用多线程，它也可以在*没有*glFinish() 的情况下正常工作。只有在加载时才会发生这种情况，因此不断停止/重新启动应用程序最终会暴露它。如果它毫无问题地加载了所有内容，则该应用程序将从那里正常运行。如果有问题，图像会一直损坏，直到我重新加载它。

通过遵守这些简单的规则，所有问题都得到了解决。

1.  在非 main() 线程中创建第二个 GLContext。（不要在同一个线程中创建两个上下文并给第二个线程指针，这样不稳定）
2.  在第二个线程中加载资源时，在将结果放入要使用的队列*之前添加一个 glFinish() 。*（简单地说，glFinish() 在使用资源之前）
3.  在第二个线程内的第二个上下文中调用 makeCurrent() 后，调用 getCurrentContext() 函数并等待它为非 NULL，然后再让*任*一线程执行其他 OpenGL 资源加载或调用。*有时在第二个线程它（makeCurrent）返回但getCurrentContext（）在某些*视频卡上可能仍为NULL一会儿。不确定驱动程序为什么或如何让这种情况发生，但检查可以防止应用程序崩溃。

我在我的 6-Thread+ 应用程序中实施了这些做法，奇怪的 1-off 腐败问题消失了，再也没有回来。

事实证明，从我的经验来看，X11 并不是那么卑鄙……显卡是，但它真的比什么都挑剔。在我的情况下，我什至使用 typedefs 使用非特定函数编写 Linux/Windows 代码，这会使事情进一步复杂化，如果采取适当的预防措施，这仍然是一个易于管理的野兽:)。

如果您问我，这很古怪，但不是“不惜一切代价避免”的问题。我希望这篇文章有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:58:07.823

我同意 nm，我是编写教程的人。:D 我试图解决的问题是将事件循环与渲染循环分离，这样我就可以在不影响渲染的情况下重播事件，反之亦然。我正在编写一个 LUA 框架，而我的“processMessage(event)”函数可能会调用用户定义的 Lua 函数。

在编写事件循环时，我遇到了很多问题，就像您遇到的那样，我还尝试了在 Fedora 上工作但在 Ubuntu 上崩溃的 XCB，经过一番头疼后，我找到了具有不同显示的解决方案（对于 X 服务器是像服务不同的进程）与共享的 GlContext 和另一个用于加载的线程（纹理和网格）。

回到你的问题：

```
XSetWMProtocols(...) 
```

想要创建窗口的相同显示，但仅在某些版本的 X 上。这就是我现在使用 Qt 的原因。

# environment-variables - NSIS - 如何在系统变量中设置环境变量

> ID：11272066
> 
> 赞同：3
> 
> 时间：2012-06-30T06:39:18.953
> 
> 标签：environment-variables, nsis

我想在我的应用程序的系统变量路径中设置环境变量。如何使用 nsis 进行设置？

例如：`C:\Program Files\Sample\bin`，我想在系统变量中设置这个路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:30:14.203

有几种方法可以做到这一点。我假设您想永久设置它，而不仅仅是为安装程序

如另一个答案所述，您可以使用 ns::Exec 或 ExecWait 运行 setx 。这样做的缺点是 setx 仅随 Windows Vista 或更高版本提供。Windows XP 用户不会设置他们的路径。SET 命令仅用于进程，不会永久设置路径。

您可以使用 ReadEnvString 读取当前路径，将其格式化为您想要的格式，然后使用 WriteRegExpandStr 将其输出。请参阅[http://nsis.sourceforge.net/Setting_Environment_Variables](http://nsis.sourceforge.net/Setting_Environment_Variables)。这样做的缺点是您必须自己完成路径的所有格式设置，并且您必须复制已经在 EnvVarUpdate 函数中为您完成的工作 - 如下所述......

我使用的方法是 EnvVarUpdate 函数。你可以在这里找到这个函数的代码；[http://nsis.sourceforge.net/Environmental_Variables:_append,_prepend,_and_remove_entries](http://nsis.sourceforge.net/Environmental_Variables%3a_append,_prepend,_and_remove_entries)

将此功能与您的示例路径一起使用；

```
${EnvVarUpdate} $0 "PATH" "A" "HKLM" "C:\Program Files\Sample\bin" ; appends to the system path

${EnvVarUpdate} $0 "PATH" "A" "HKCU" "C:\Program Files\Sample\bin" ; appends to the user path 
```

这允许您选择附加或前置，它允许您删除您在卸载程序中添加的内容。

请注意，具有默认编译二进制文件的 NSIS 的最大字符串长度为 1024 个字符。如果路径比这长，如果您不应用上面链接中列出的补丁，您可能会损坏它。首选的解决方案是下载将字符串长度设置为 8192 个字符的 makensis 二进制文件，或者自己编译源并设置更长的字符串长度。你可以在这里找到更多信息；[http://nsis.sourceforge.net/Special_Builds](http://nsis.sourceforge.net/Special_Builds)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:58:31.960

您可以使用`set`添加/更改环境变量，也可以使用`setx`永久设置一个（就像您通过计算机属性添加它一样）。

[这是setx](http://technet.microsoft.com/en-us/library/cc755104%28v=ws.10%29.aspx)和[set](http://technet.microsoft.com/en-us/library/cc754250%28v=ws.10%29)的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T17:25:11.497

1.  对于仅包含一个值或一个目录的简单变量，请参见
    [http://nsis.sourceforge.net/Setting_Environment_Variables#Exisiting_Variables](http://nsis.sourceforge.net/Setting_Environment_Variables#Exisiting_Variables)
2.  对于保存路径列表的变量，请参见
    [http://nsis.sourceforge.net/Environmental_Variables:_append%2C_prepend%2C_and_remove_entries#Function_Code](http://nsis.sourceforge.net/Environmental_Variables:_append%2C_prepend%2C_and_remove_entries#Function_Code)

然而，第二种解决方案需要包含一个 .nsh 文件，并且不清楚如何完全重置变量。它具有删除、附加或添加到以分号分隔的条目列表（例如 PATH 变量）的功能。

# javascript - JQuery parents().eq(2) 和 .parent().parent() 没有表现？

> ID：11272069
> 
> 赞同：0
> 
> 时间：2012-06-30T06:40:07.973
> 
> 标签：javascript, jquery

这是我的代码：

```
function showNotification(title, message) {
    var newNotification = $('<div></div>');
    var newNotificationHeader = $('<div>' + title + '</div>');
    var newNotificationCloser = $('<div></div>');
    newNotificationCloser.click(function(){
        closeNotification($(this).closest('notification'));
    });
    var newNotificationMessage = $('<div>' + message + '</div>');

    newNotification.attr('class', 'notification');
    newNotification.css('opacity', 0);
    newNotificationHeader.attr('class', 'notificationHeader');
    newNotificationCloser.attr('class', 'notificationCloser');

    newNotificationMessage.attr('class', 'notificationMessage');

    newNotificationHeader.append(newNotificationCloser);
    newNotification.append(newNotificationHeader);
    newNotification.append(newNotificationMessage);

    $('body').append(newNotification);
    newNotification.animate({left: '10px', opacity:1}, 400).delay(15000).animate({top: '61px', opacity:0}, 500);

}

function closeNotification(notificationWindow) {
    notificationWindow.animate({top: '61px', opacity:0}, 500);
} 
```

基本上我正在尝试嵌套几个 div，然后将它们附加到正文中。

我的 closeNotification() 函数期望主 div 具有“通知”类。我不能使用 ID，因为在任何给定时间页面上可能有多个通知。

```
<body>
    <div class="notification">
        <div class="notificationHeader">
            <div class="notificationCloser">
            </div>
        </div>
        <div class="notificationMessage">
        </div>
    </div>
</body> 
```

我曾尝试在notificationCloser的点击代码中使用以下两种方法：

```
closeNotification($(this).parent().parent()); 
```

和

```
closeNotification($(this).parents().eq(1)); 
```

奇怪的是，这些似乎不起作用，但以下将隐藏身体：

```
closeNotification($(this).parent().parent().parent()); 
```

和

```
closeNotification($(this).parents().eq(2)); 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:58:25.643

快速回答：使用`.closest('.notification')`而不是`.parent()`.

但我想建议你一种不同的方法。使用模板将使这更容易推理和清理您的代码。

制作它们的一种简单方法是将它们包装在脚本标签中（类型未知，因此被忽略）

```
<body>
    <script type="text/template" id="notification-template">
        <div class="notification">
            <div class="header">
                <div class="close"></div>
            </div>
            <div class="message"></div>
        </div>
    </script>
</body> 
```

（适用于所有浏览器，但如果您对它不满意，您可以将`div.notification`元素扔到页面中`display:none`并克隆它）

然后我们为通知对象创建一个构造函数：

```
function Notification(title, message){
    // create new DOM element based on the template
    var el = this.el = $(Notification.template);
    el.find('.header').text(title);
    el.find('.message').text(message);
    // close event handler, make sure `this` inside
    // the 'hide' function points to this Notification object
    el.find('.close').click($.proxy(this.hide, this));
}

// save the template code here once
Notification.template = $('#notification-template').text();

// methods
Notification.prototype = {
    show: function(){
        this.el.appendTo(document.body);
    },
    hide: function(){
        this.el.remove();
    }
}; 
```

可以这样使用：

```
var bacon_warning = new Notification("Out of bacon", "You've ran out of bacon");
bacon_warning.show(); 
```

# c++ - 64 位系统的预定义宏

> ID：11272073
> 
> 赞同：2
> 
> 时间：2012-06-30T06:41:22.680
> 
> 标签：c++, gcc, 64-bit, 32bit-64bit

我必须编写一个函数来为不同的（32/64 位）机器搜索不同的目录。例如 ：

```
 //if 64 bit
 Opts.AddPath("/usr/include/x86_64-linux-gnu");

 //if 32 bit
 Opts.AddPath("/usr/include/i386-linux-gnu"); 
```

是否有一个预定义/编译器定义的宏可以让我选择特定的代码。

我在 Ubuntu 机器上使用 gcc。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:47:21.703

[本页](http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)建议`__LP64__`和`_LP64`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:43:31.590

您可以在编译代码时使用 -D 标志来定义常量（[链接](http://gcc.gnu.org/onlinedocs/gcc-4.4.6/gcc/Preprocessor-Options.html#Preprocessor-Options)）

# mongoid - 断言无法导入大量数据

> ID：11272076
> 
> 赞同：0
> 
> 时间：2012-06-30T06:41:29.170
> 
> 标签：mongoid, mongodb

当我做 200,000 条记录的 mongo 导入时，我的一半记录只被插入，其余的被留下，但如果我导入 10,000 条记录，它们就会成功导入。我的日志的一小部分如下所示。我用 1gb ram 运行 ubuntu linux 11.04。

```
 Fri Jun 29 23:10:38 [conn7] insert doctor_development.alabama_nps exception: file /home/abhay/data/db/doctor_development.1 open/create failed in createPrivateMap (look in log for more information) code:13636 3ms
Fri Jun 29 23:10:38 [conn7] ERROR: mmap private failed with out of memory. (64 bit build)
Fri Jun 29 23:10:38 [conn7] Assertion: 13636:file /home/abhay/data/db/doctor_development.1 open/create failed in createPrivateMap (look in log for more information)
0x588cb2 0x75b95e 0x75c853 0x8a07cb 0x89c0e2 0x89c7c5 0x89ca3f 0x8a1b52 0x8a1d57 0x8aede9 0x8b04bb 0x8817f8 0x887371 0x889825 0xa9c576 0x638937 0x2b8a68736d8c 0x2b8a691d604d 
 ./mongod(_ZN5mongo11msgassertedEiPKc+0x112) [0x588cb2]
 ./mongod(_ZN5mongo8MongoMMF13finishOpeningEv+0x1be) [0x75b95e]
 ./mongod(_ZN5mongo8MongoMMF6createESsRyb+0x63) [0x75c853]
 ./mongod(_ZN5mongo13MongoDataFile4openEPKcib+0x14b) [0x8a07cb]
 ./mongod(_ZN5mongo8Database7getFileEiib+0x102) [0x89c0e2]
 ./mongod(_ZN5mongo8Database12suitableFileEPKcibb+0x55) [0x89c7c5]
 ./mongod(_ZN5mongo8Database11allocExtentEPKcibb+0x7f) [0x89ca3f]
 ./mongod(_ZN5mongo10outOfSpaceEPKcPNS_16NamespaceDetailsEibNS_7DiskLocE+0x112) [0x8a1b52]
 ./mongod(_ZN5mongo26allocateSpaceForANewRecordEPKcPNS_16NamespaceDetailsEib+0x77) [0x8a1d57]
 ./mongod(_ZN5mongo11DataFileMgr6insertEPKcPKvibbPb+0x4a9) [0x8aede9]
 ./mongod(_ZN5mongo11DataFileMgr16insertWithObjModEPKcRNS_7BSONObjEb+0x4b) [0x8b04bb]
 ./mongod(_ZN5mongo14checkAndInsertEPKcRNS_7BSONObjE+0xa8) [0x8817f8]
 ./mongod(_ZN5mongo14receivedInsertERNS_7MessageERNS_5CurOpE+0x441) [0x887371]
 ./mongod(_ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_11HostAndPortE+0x1155) [0x889825]
 ./mongod(_ZN5mongo16MyMessageHandler7processERNS_7MessageEPNS_21AbstractMessagingPortEPNS_9LastErrorE+0x76) [0xa9c576]
 ./mongod(_ZN5mongo3pms9threadRunEPNS_13MessagingPortE+0x287) [0x638937]
 /lib/x86_64-linux-gnu/libpthread.so.0(+0x6d8c) [0x2b8a68736d8c]
 /lib/x86_64-linux-gnu/libc.so.6(clone+0x6d) [0x2b8a691d604d]
Fri Jun 29 23:10:38 [conn7] insert doctor_development.alabama_nps exception: file /home/abhay/data/db/doctor_development.1 open/create failed in createPrivateMap (look in log for more information) code:13636 3ms
Fri Jun 29 23:10:38 [conn7] ERROR: mmap private failed with out of memory. (64 bit build)
Fri Jun 29 23:10:38 [conn7] Assertion: 13636:file /home/abhay/data/db/doctor_development.1 open/create failed in createPrivateMap (look in log for more information)
0x588cb2 0x75b95e 0x75c853 0x8a07cb 0x89c0e2 0x89c7c5 0x89ca3f 0x8a1b52 0x8a1d57 0x8aede9 0x8b04bb 0x8817f8 0x887371 0x889825 0xa9c576 0x638937 0x2b8a68736d8c 0x2b8a691d604d 
 ./mongod(_ZN5mongo11msgassertedEiPKc+0x112) [0x588cb2]
 ./mongod(_ZN5mongo8MongoMMF13finishOpeningEv+0x1be) [0x75b95e]
 ./mongod(_ZN5mongo8MongoMMF6createESsRyb+0x63) [0x75c853]
 ./mongod(_ZN5mongo13MongoDataFile4openEPKcib+0x14b) [0x8a07cb]
 ./mongod(_ZN5mongo8Database7getFileEiib+0x102) [0x89c0e2]
 ./mongod(_ZN5mongo8Database12suitableFileEPKcibb+0x55) [0x89c7c5]
 ./mongod(_ZN5mongo8Database11allocExtentEPKcibb+0x7f) [0x89ca3f]
 ./mongod(_ZN5mongo10outOfSpaceEPKcPNS_16NamespaceDetailsEibNS_7DiskLocE+0x112) [0x8a1b52]
 ./mongod(_ZN5mongo26allocateSpaceForANewRecordEPKcPNS_16NamespaceDetailsEib+0x77) [0x8a1d57]
 ./mongod(_ZN5mongo11DataFileMgr6insertEPKcPKvibbPb+0x4a9) [0x8aede9]
 ./mongod(_ZN5mongo11DataFileMgr16insertWithObjModEPKcRNS_7BSONObjEb+0x4b) [0x8b04bb]
 ./mongod(_ZN5mongo14checkAndInsertEPKcRNS_7BSONObjE+0xa8) [0x8817f8]
 ./mongod(_ZN5mongo14receivedInsertERNS_7MessageERNS_5CurOpE+0x441) [0x887371]
 ./mongod(_ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_11HostAndPortE+0x1155) [0x889825]
 ./mongod(_ZN5mongo16MyMessageHandler7processERNS_7MessageEPNS_21AbstractMessagingPortEPNS_9LastErrorE+0x76) [0xa9c576]
 ./mongod(_ZN5mongo3pms9threadRunEPNS_13MessagingPortE+0x287) [0x638937]
 /lib/x86_64-linux-gnu/libpthread.so.0(+0x6d8c) [0x2b8a68736d8c]
 /lib/x86_64-linux-gnu/libc.so.6(clone+0x6d) [0x2b8a691d604d] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:49:47.793

这不是最好的答案，但它奏效了。我使用了 mongodb 2.0.6，它给出了上面提到的各种错误，但是当我将它降级到 1.8.5 时，它就像魅力一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:39:16.230

对我来说，问题是 32 位系统中的 2gb 限制：http: [//blog.mongodb.org/post/137788967/32-bit-limitations](http://blog.mongodb.org/post/137788967/32-bit-limitations)

# sql - 如何在选择和分组中仅按一列编写对多列的查询

> ID：11272083
> 
> 赞同：0
> 
> 时间：2012-06-30T06:43:11.487
> 
> 标签：sql, sql-server

我有一个查询

```
select t1.id,t1.col1,t1.col2,t2.col1,t2.col2,sum(t2.col3) as total
From table1 t1
join table2 t2 on t1.id=t2.id
where t1.col =@col
Group by t1.id 
```

它给了我一个错误

> t1.col1 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

如何在 group by 子句中选择多列和单列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:50:10.893

简单地说，你不能在子句中选择多列`Group By`，除非你把它们放在某个组函数中，例如 AVG、MIN、MAX 等，或者你在`Group BY`子句本身中添加所有列。

```
 select t1.id,t1.col1,t1.col2,t2.col1,t2.col2,sum(t2.col3) as total
   From table1 t1
   join table2 t2 on t1.id=t2.id
   where t1.col =@col
   Group by t1.id , ,t1.col1,t1.col2,t2.col1,t2.col2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:46:56.383

如果 t1.col1,t1.col2,t2.col1,t2.col2 是数字列，则可以`min, max`使用。对于字符串列，您需要在`groupby`Statement中使用它们

# java - 计数和查找事件的有效方法（乐透分析）

> ID：11272086
> 
> 赞同：2
> 
> 时间：2012-06-30T06:43:33.447
> 
> 标签：java, grouping

我想要实现两件事：1）从乐透结果中找出配对号并存储到哈希表。2）以有效的方式循环乐透结果，计算频率并将频率结果添加到对数哈希表中。

我想构建一个能够告诉我对数频率的程序。

```
For a list / array of number , example :
    4, 12, 20 , 32, 48, 50
    2, 22, 20 , 32, 38, 40
    4, 12, 20 , 25, 33, 44
    1, 11, 20 , 31, 48, 50
    1, 12, 20 , 36, 47, 51 
```

我想要的结果：

```
 Pair Number     |      Repeat Times
    4, 12                          2
    4, 20                          2
    12, 20                         3
      .                            .
      .                            . 
```

列出所有可能的对数自动
列表/数组中不需要的数据。存储数据以便于分组的任何其他建议？地图 ？

除了循环之外，还有什么有效的方法可以对重复次数进行分组和计数？

感谢任何建议和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:37:25.557

为了清楚起见，假设您从由元素（或数字，在本例中）`n`组成的集合开始。`c`您的问题是找到所有集合中大小为 2 的所有唯一子集的聚合频率（即跨越所有集合）。

为此，请遍历每个集合并考虑该集合中的每一对元素并在哈希表中维护其频率。当您考虑一对时，如果它已经存在于哈希表中，则将其值加 1；否则，将其添加到值为 1 的哈希表中。您的代码将类似于下面的伪代码。

```
hashtable h
for s in sets:
   for i in s.size():
       for j > i in s.size():
            pair p = (s[i],s[j])
            if h.exists(p):
                h[p]++
            else:
                h.put(p,1) 
```

由于这种方法具有限制为`n`、`c`和的三重嵌套循环`c`，因此该算法可以`O(nc^2)`及时执行。

考虑一个极端情况，其中每个可能的大小为 2 的子集都是唯一的。在这种情况下，您的频率表将由`n × c choose 2`元素组成。在大 O 表示法中，这个值减少到`O(nc^2)`. 因此，最好的解决方案并不优于`O(nc^2)`，这正是上述算法的速度。

# python - 从 xml 文档中提取全部信息

> ID：11272088
> 
> 赞同：-3
> 
> 时间：2012-06-30T06:43:35.550
> 
> 标签：python, xml, linux, ubuntu-10.04

说我有一个xml文档books.xml，它是：

```
<bookstore>
    <book category="web">
        <author>XYZ</author>
        <title>abc</title>
    </book>
</bookstore> 
```

在我要存储的文件中：书店

图书类别

网络

作者

xyz

美国广播公司

标题

我一般如何为任何 xml 文档提取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:48:25.437

您可以使用[sphinx](http://sphinxsearch.com)搜索来索引您的文件。它工作得非常快，有 python 类来运行查询，可以建立索引跳过 xml 标签注释等。

# cordova - 我们如何将数据库与 Windows 7 手机差距集成？

> ID：11272089
> 
> 赞同：1
> 
> 时间：2012-06-30T06:43:52.710
> 
> 标签：cordova

我是 Windows 7 phonegap 的新手。我想使用本机应用程序存储和检索数据。我不知道如何存储和显示从本机到phonegap（HTML）页面的检索数据。

谁能指导我如何使用phonegap访问sqlite。？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:13:39.803

不幸的是，Windows Phone 7 不支持 phonegap/cordova 中的 SQLite。我还没有找到解决这个问题的任何方法

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-30T07:06:54.110

您需要使用 Web 数据库在 Phonegap 应用程序中存储和检索数据。

这是该数据库的一个示例：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>
    <script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
    <script type="text/javascript" charset="utf-8">
    // Wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);
    // Populate the database
    function populateDB(tx) {
      tx.executeSql('DROP TABLE IF EXISTS DEMO');
      tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
      tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
      tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
    }
    // Query the database
    function queryDB(tx) {
      tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
    }
    // Query the success callback
    function querySuccess(tx, results) {
      var len = results.rows.length;
      console.log("DEMO table: " + len + " rows found.");
      for (var i=0; i<len; i++){
        console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);
      }
    }
    // Transaction error callback
    function errorCB(err) {
      console.log("Error processing SQL: "+err.code);
    }
    // Transaction success callback
    function successCB() {
      var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
      db.transaction(queryDB, errorCB);
    }
    // PhoneGap is ready
    function onDeviceReady() {
      var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
      db.transaction(populateDB, errorCB, successCB);
    }
  </script>
</head>
<body>
  <h1>Example</h1>
  <p>Database</p>
</body>
</html> 
```

有关 Phonegap 数据库教程的更多信息，请查看此链接：[PHONEGAP DATABASE TUTORIAL](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)。那里提供了完整的指南。

祝你好运。

阿米尔汗一世。

# javascript - 如何在网站中自定义新闻容器

> ID：11272099
> 
> 赞同：0
> 
> 时间：2012-06-30T06:45:53.193
> 
> 标签：javascript

我在 iFrame 中使用代码将新闻嵌入网站。我无法自定义 iFrame。

```
<iframe src="http://www.google.com/uds/modules/elements/newsshow/iframe.html?topic=n,p,s,n&rsz=small" frameborder="0" width="728" height="90" marginwidth="0" marginheight="0"></iframe>here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:56:29.320

如果要自定义 iframe 的内容，跨域 iframe 是不可能的。浏览器不允许访问任何跨站点的 DOM 对象。如果它是同一个域，那么它是可能的。我认为在您的情况下，它看起来是跨域框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T10:43:22.263

您可以自定义 iframe 本身（边框宽度、颜色等），但不能更改源 URL 的内容。但是，我要注意，如果源 URL 没有设置背景颜色，您可以使用 CSS 样式语句从 iframe 设置默认内容背景颜色。

顺便说一句，请注意谷歌“新闻节目”已被弃用很长时间，现在不再有效。

这是一个 Google 新闻 RSS 替代品，它在很多方面都更好：

[http://www.gooplusplus.com/news-frame-guide.html](http://www.gooplusplus.com/news-frame-guide.html)

请参阅此处的论坛文章：

[http://crunchbang.org/forums/viewtopic.php?id=26985](http://crunchbang.org/forums/viewtopic.php?id=26985)

# git - 我的 ubuntu 终端发生了变化，有什么问题吗？

> ID：11272103
> 
> 赞同：0
> 
> 时间：2012-06-30T06:46:32.657
> 
> 标签：git, terminal

我什至不能正确地将它变成一个问题，或者即使它是一个问题。由于某些事情（可能是我，可能是更新？）。我的终端现在看起来像

```
drew@think$  cd drewPlay
~/drewPlay
drew@think$ (git::master) 
```

在 ~/path 没有显示之前，(git::master) 也没有。我很好奇我做了什么来实现这一点，并且很可能我需要如何解决这个突出的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:14:35.210

在您的`.bashrc`文件中查找`PS1`变量 - 我敢打赌它包含`__git_ps1`帮助程序并以换行符开头`\w`- 类似于：

```
PS1='\w\n\u@\h\$$(__git_ps1 " (git::%s)") ' 
```

... 会产生您所看到的提示。如果是这种情况，您可以通过将其更改为：

```
PS1='\u@\h:\w\$ ' 
```

...但是`__git_ps1`非常棒:)

# emacs - 在 emacs24 中捕获表时出错

> ID：11272104
> 
> 赞同：3
> 
> 时间：2012-06-30T06:46:41.110
> 
> 标签：emacs, emacs24

我有以下要捕获为表格的文本：

```
question,answer
id,id
content,question_id
,content 
```

我`M-x table-capture`用

行分隔符：`,`

列分隔符：换行符 ( `C-q C-j`)

运行它时，emacs 会引发以下错误：

`downcase: Symbol's value as variable is void: collection`

我不知道出了什么问题。任何帮助将非常感激。

- 编辑 -

phils 建议打开调试。报告的错误是：

```
Debugger entered--Lisp error: (void-variable collection)
  completing-read("Justify (default left): " (("left") ("center") ("right")) nil t nil table-capture-justify-history "left")
  (downcase (completing-read (format "Justify (default %s): " default) (quote (("left") ("center") ("right"))) nil t nil (quote table-capture-justify-history) default))
  (intern (downcase (completing-read (format "Justify (default %s): " default) (quote (("left") ("center") ("right"))) nil t nil (quote table-capture-justify-history) default)))
  (if (and (string= col-delim-regexp "") (string= row-delim-regexp "")) (quote left) (intern (downcase (completing-read (format "Justify (default %s): " default) (quote (("left") ("center") ("right"))) nil t nil (quote table-capture-justify-history) default))))
  (let* ((completion-ignore-case t) (default (car table-capture-justify-history))) (if (and (string= col-delim-regexp "") (string= row-delim-regexp "")) (quote left) (intern (downcase (completing-read (format "Justify (default %s): " default) (quote (("left") ("center") ("right"))) nil t nil (quote table-capture-justify-history) default)))))
  (list (mark) (point) (setq col-delim-regexp (read-from-minibuffer "Column delimiter regexp: " (car table-col-delim-regexp-history) nil nil (quote table-col-delim-regexp-history))) (setq row-delim-regexp (read-from-minibuffer "Row delimiter regexp: " (car table-row-delim-regexp-history) nil nil (quote table-row-delim-regexp-history))) (let* ((completion-ignore-case t) (default (car table-capture-justify-history))) (if (and (string= col-delim-regexp "") (string= row-delim-regexp "")) (quote left) (intern (downcase (completing-read (format "Justify (default %s): " default) (quote (... ... ...)) nil t nil (quote table-capture-justify-history) default))))) (if (and (string= col-delim-regexp "") (string= row-delim-regexp "")) "1" (table--read-from-minibuffer (quote ("Minimum cell width" . table-capture-min-cell-width-history)))) (if (and (not (string= col-delim-regexp "")) (string= row-delim-regexp "")) (string-to-number (table--read-from-minibuffer (quote ("Number of columns" . table-capture-columns-history)))) nil))
  (let ((col-delim-regexp) (row-delim-regexp)) (barf-if-buffer-read-only) (if (table--probe-cell) (error "Can't insert a table inside a table")) (list (mark) (point) (setq col-delim-regexp (read-from-minibuffer "Column delimiter regexp: " (car table-col-delim-regexp-history) nil nil (quote table-col-delim-regexp-history))) (setq row-delim-regexp (read-from-minibuffer "Row delimiter regexp: " (car table-row-delim-regexp-history) nil nil (quote table-row-delim-regexp-history))) (let* ((completion-ignore-case t) (default (car table-capture-justify-history))) (if (and (string= col-delim-regexp "") (string= row-delim-regexp "")) (quote left) (intern (downcase (completing-read (format "Justify (default %s): " default) (quote ...) nil t nil (quote table-capture-justify-history) default))))) (if (and (string= col-delim-regexp "") (string= row-delim-regexp "")) "1" (table--read-from-minibuffer (quote ("Minimum cell width" . table-capture-min-cell-width-history)))) (if (and (not (string= col-delim-regexp "")) (string= row-delim-regexp "")) (string-to-number (table--read-from-minibuffer (quote ("Number of columns" . table-capture-columns-history)))) nil)))
  call-interactively(table-capture record nil)
  command-execute(table-capture record)
  smex-read-and-run(("toggle-debug-on-error" "auto-fill-mode" "table-capture" "scratch" "table-justify" "table-insert" "replace-string" "customize-themes" "erc" "grep" "butterfly" "dired" "customize-group" "customize-option" "text-mode" "gist-region" "python-else" "python-mode" "magit-status" "customize-face" "package-install" "replace-rectangle" "diredp-do-bookmark" "ps-print-region-with-faces" "flymake-python-pyflakes-load" "rvm-activate-corresponding-ruby" "cd" "mf" "ri" "5x5" "arp" "dbx" "dig" "ert" "ftp" "gdb" "irc" "jdb" "kbd" "man" "mpc" "pdb" "pwd" "rsh" "sdb" "xdb" "yow" "calc" "dark" "diff" ...))
  smex()
  call-interactively(smex nil nil) 
```

- 编辑 -

经过一些调试后，如果我`(ido-ubiquitous-mode t)`在我的 emacs 初始化脚本中设置，我可以断定会发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T00:10:26.673

就像@phils 说的那样，从 开始`emacs -Q`，然后给我们提供带有版本信息的重现步骤。它也适用于 Emacs 24。

你有没有像 ido 一样开启完成包？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:58:55.667

我终于想到这是因为一个[已知问题](https://bugs.launchpad.net/emacs-snapshot/+bug/1003928)`ido-ubuquitous`

# android - 将按钮对齐到屏幕底部

> ID：11272106
> 
> 赞同：4
> 
> 时间：2012-06-30T06:47:02.093
> 
> 标签：android, xml, android-layout, android-linearlayout, android-relativelayout

我在框架布局中有两个按钮，并希望它们在屏幕底部对齐，一个在另一个下方。

使用`android:layout_gravity="bottom"`使它们彼此重叠。我对 Relativelayout 没有任何问题，但 relativelayout 不支持`android:layout_gravity="bottom"`

我的 XML 布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg"
    android:orientation="vertical" >

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/scanit"
        android:layout_gravity="bottom"
        android:text="Button 1" />
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/inf"
        android:layout_gravity="bottom"
        android:text="Button 2" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T07:05:04.607

为此使用下面的布局代码，它可能会对您有所帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/mLlayoutBottomButtons" >
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/mLlayoutBottomButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button2" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T06:55:51.457

使用`android:gravity="bottom"`和`relative layout`使用`android:layout_alignParentBottom="true"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-04T17:43:09.963

我的理解是，只要您指定上面的其他小部件将填充额外的空间，您就可以拥有一个布局/一组小部件来占据屏幕底部。这是使用布局权重参数完成的。在这里，我根据需要将两个按钮放入带有方向的线性布局中。然后上面的其余小部件在另一个重量 = 1 的布局中。重量为 1 的布局增长并且不覆盖按钮。

[博客文章更详细地显示了这一点](http://harisankar-krishnaswamy.blogspot.in/2013/07/android-ui-activity-to-show-license.html)。

这将如下所示![屏幕在这里](../Images/dab4457d0796d52131d29033f9318f97.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T06:59:53.443

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:gravity="bottom"
   >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Button1" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1" 
    android:text="Button2" />

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-14T06:13:18.143

在任何线性或相对布局下方使用下面的代码。我已应用权重将按钮平分为底部的两半。恩乔伊

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/mLlayoutBottomButtons">
        <LinearLayout
            android:orientation="horizontal"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:layout_alignParentBottom="true"
            android:layout_gravity="bottom">
            <Button
                android:text="Cancel"
                android:layout_width="0sp"
                android:layout_weight="0.5"
                android:layout_height="wrap_content"
                android:id="@+id/button1" />
            <Button
                android:text="OK"
                android:layout_width="0sp"
                android:layout_weight="0.5"
                android:layout_height="wrap_content"
                android:id="@+id/button2" />
        </LinearLayout>
    </RelativeLayout> 
```

# php - 像谷歌一样的分页背后的逻辑

> ID：11272108
> 
> 赞同：37
> 
> 时间：2012-06-30T06:47:23.903
> 
> 标签：php, oop, class, pagination

谷歌分页行为背后的逻辑是什么？

我的分页器是这样的：

```
[1]  2   3  ...  184   >
 <   1  [2]  3   4  ...  184   >
 <   1   2  [3]  4   5  ...  184   >
 <   1   2   3  [4]  5   6   ...  184   >
 <   1  ...  3   4  [5]  6    7   ...  184   >
 <   1  ...  4   5  [6]  7    8   ...  184   >
 <   1  ...  5   6  [7]  8    9   ...  184   >
 <   1  ...  6   7  [8]  9    10  ...  184   > 
```

这是上述示例的实时版本：http: [//www.dev.thomaskile.me/](http://www.dev.thomaskile.me/?page=test-zone&module=Paginator) ?page=test-zone&module=Paginator 。
我知道为什么会这样；我已将当前页面每一侧显示的页码数量设置为两 (2)。

我宁愿让数字的范围像这样相等：

```
[1]  2   3   4   5   6   7   8   ...   184   >
 <   1  [2]  3   4   5   6   7   ...   184   >
 <   1   2  [3]  4   5   6   7   ...   184   >
 <   1   2   3  [4]  5   6   7   ...   184   >
 <   1  ...  3   4  [5]  6   7   ...   184   >
 <   1  ...  4   5  [6]  7   8   ...   184   >
 <   1  ...  5   6  [7]  8   9   ...   184   >    
 <   1  ...  6   7  [8]  9   10  ...   184   > 
```

在开始和结束时我需要进行一些更改，但不知道如何使它成为一个简单的操作......
我也想让它变得灵活。这意味着我希望能够更改每一侧的所需页面数，并让脚本扩展并计算所有内容......

**到目前为止，这是我的代码：**

```
/**
 *  page controller buttons 
 *  @param str $this->querySting      href="URL string"
 *  @param str $this->pageIdentifier  $_GET['this-name']
 *  @param int $this->numPages        Total amount of pages
 *  @param int $this->midRange        Number of pages to show on each side of current page
 */

public function prevPage() 
{
    if ($this->currentPage > 1){ 
        $prevPage = ($this->currentPage - 1); 
        return '<a href="'.$this->queryString.'&'.$this->pageIdentifier.'='.$prevPage.'" class="prev">prev</a>'; 
    }
}
public function nextPage() 
{
    if ($this->currentPage < $this->numPages) { 
        $nextPage = $this->currentPage + 1;
        return '<a href="'.$this->queryString.'&'.$this->pageIdentifier.'='.$nextPage.'" class="next">next</a>';  
    }  
}
public function firstPage() 
{
    if ($this->currentPage > ($this->midRange + 1)) {  //  if number of pages between "currentPage" and "firstPage" exceeds $midRange with 1...
        $firstPage .= '<a href="'.$this->queryString.'&'.$this->pageIdentifier.'=1" class="first">1</a>';  //  ...show "first page"-link
        if ($this->currentPage > ($this->midRange + 2)) {   //  if number of pages between $currentPage and "first page" exceeds $midRange with more than 1
            $firstPage .= '&hellip;';  //  add "..." between "1st page"-link and first page in $range
        }
    }
    return $firstPage;
}
public function lastPage() 
{
    if ($this->currentPage < ($this->numPages - $this->midRange)) {  //  if number of pages between "currentPage" and "last page" is equal to $midRange
        if (($this->currentPage < ($this->numPages - $this->midRange) - 1)) {  //  if number of pages between $currentPage and "last page" exceeds $range with more than two
            $lastPage .= '&hellip;';  //  add "..." between "last page"-link and last page in $range
        } 
        $lastPage .= '<a href="'.$this->queryString.'&'.$this->pageIdentifier.'='.$this->numPages.'" class="last">'.$this->numPages.'</a>';   //  show "last page"-link
    }
    return $lastPage;
}

#  Range of pages between (prev first ...) and (... last next)
public function listPages() 
{
    for ($i = ($this->currentPage - $this->midRange); $i < (($this->currentPage + $this->midRange) + 1); $i++){
       if (($i > 0) && ($i <= $this->numPages))  //  if page number are within page range
       {
          if ($i == $this->currentPage) { $listPages .= '<a class="current">'.$i.'</a>'; }  //  if we're on current page
          else { $listPages .= '<a href="'.$this->queryString.'&'.$this->pageIdentifier.'='.$i.'">'.$i.'</a>'; }  //  if not current page
        }
    }
    return $listPages; 
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-30T13:05:00.077

这就是我为分页所做的。

```
$startPage = $currentPage - 4;
$endPage = $currentPage + 4;

if ($startPage <= 0) {
    $endPage -= ($startPage - 1);
    $startPage = 1;
}

if ($endPage > $totalPage)
    $endPage = $totalPage;

if ($startPage > 1) echo " First ... ";
for($i=$startPage; $i<=$endPage; $i++) echo " {$i} ";
if ($endPage < $totalPage) echo " ... Last "; 
```

* * *

我相信我的代码是不言自明的，但我会尝试用简单的英语来解释它。首先，在生成 Pagination 之前，您需要知道两件事：**$totalPage**和**$currentPage**。

**第 1 步**：假设当前页面在中间范围内。$startPage 和 $endPage 存储分页尝试生成的页面范围。

**Step 2** : 如果**$startPage**为负数，则需要补**$endPage**。

**第 3 步**：如果**$endPage**超出**$totalPage**，则**$endPage**是最后一页。

**第 4 步**：将分页生成 HTML。（这取决于你希望你的分页看起来如何。我将简单地使用纯文本来表示我的分页）

```
if ($startPage > 1) echo " First ... ";
for($i=$startPage; $i<=$endPage; $i++) echo " {$i} ";
if ($endPage < $totalPage) echo " ... Last "; 
```

* * *

**修复了我之前逻辑的缺陷**

```
$startPage = ($curPage < 5)? 1 : $curPage - 4;
$endPage = 8 + $startPage;
$endPage = ($totalPage < $endPage) ? $totalPage : $endPage;
$diff = $startPage - $endPage + 8;
$startPage -= ($startPage - $diff > 0) ? $diff : 0;

if ($startPage > 1) echo " First ... ";
for($i=$startPage; $i<=$endPage; $i++) echo " {$i} ";
if ($endPage < $totalPage) echo " ... Last "; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-05T15:10:40.253

这次谈话对我来说是一个很好的开始！但是我想要一个更接近原始问题意图的分页器，即：
1）可以包含在一个带有变量的函数中，以改变总页数、当前页数和当前要显示的每一侧的页数。
2）保持一个恒定的宽度，类似于原帖：

```
 <  [1]   2    3    4    5    6   7    ...   99   >
 <   1   [2]   3    4    5    6   7    ...   99   >
 <   1    2   [3]   4    5    6   7    ...   99   >
 <   1    2    3   [4]   5    6   7    ...   99   >
 <   1    2    3    4   [5]   6   7    ...   99   >
 <   1   ...   4    5   [6]   7   8    ...   99   >
 <   1   ...   5    6   [7]   8   9    ...   99   >
 <   1   ...   92   93  [94]  95  96   ...   99   >
 <   1   ...   93   94  [95]  96  97   98    99   >
 <   1   ...   93   94   95  [96] 97   98    99   >
 <   1   ...   93   94   95   96 [97]  98    99   >
 <   1   ...   93   94   95   96  97  [98]   99   >
 <   1   ...   93   94   95   96  97   98   [99]  > 
```

3) 继续显示数字“2”而不是“...”，如果你有 1 ... 3
4) 最后也是一样的。

所以这就是我所做的。我正在使用另一种语言（coffeescript）进行编码，但无论如何它应该可以作为良好的 sudo 代码：

```
get_pages_array = (total_page, each_side, curr_page) ->
    if total_page <= (2*each_side)+5
        # in this case, too few pages, so display them all
        start_page = 1
        end_page = total_page
    else if curr_page<=each_side+3
        # in this case, curr_page is too close to the beginning
        start_page = 1
        end_page = (2*each_side)+3
    else if curr_page >= total_page - (each_side+2)
        # in this case, curr_page is too close to the end
        start_page = total_page - (2*each_side) - 2
        end_page = total_page
    else
        # regular case
        start_page = curr_page - each_side
        end_page = curr_page + each_side
    return_me = []
    if start_page> 1
        return_me.push "1"
    if start_page>2
        return_me.push "..."
    for x in [start_page..end_page]
        return_me.push x
    if end_page<total_page-1
        return_me.push "..."
    if end_page<total_page
        return_me.push total_page
    return return_me 
```

我将此代码用于each_side = 2，所以我确定它可以工作。

编辑：根据@Vextil 固定逻辑

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T20:02:52.400

**这真是太棒了！**我想我让这个分页器按照我描述的方式工作。
请在此处查看并尝试一下[http://dev.thomaskile.me/?page=test-zone&module=Paginator](http://dev.thomaskile.me/?page=test-zone&module=Paginator)并让我知道...

经过大量的逻辑数学研究，我终于得出了这个结论：
为了使这个行为在不同层次上如此不同，必须有一些`if`, `elsef`-s 来分别处理每个层次上的逻辑。我会尝试解释，但发现很难以一种好的方式去做......

这些是我正在谈论的级别：

*   如果 currentPage == firstPage ：
    计算从第二页开始在 currentPage 之后显示多少页。
    这个计算需要根据最多有多少页框来完成。*（中值是这里的关键因素）*

    ```
    [1] 2   3    4    5    6    7    8   ...   184   > 
    ```

*   elseif currentPage*介于*firstPage 和 midRange 值之间。
    将范围内的页面减少一页，以防止添加 prevPage 后将整个分页器向右移动。计算要在 currentPage 之前和之后显示的页面，以保持整个页面的数量相等。

    ```
    <   1  [2]   3    4    5    6    7   ...   184   >
    <   1   2   [3]   4    5    6    7   ...   184   >
    <   1   2    3   [4]   5    6    7   ...   184   > 
    ```

*   elseif midRange 值在每一侧都达到最大值。这意味着我们在某个地方的中间。
    中范围页面 + 当前页面 + 中范围页面。我猜很直截了当...

    ```
    <   1  ...   3    4   [5]   6    7   ...   184   >
                          ...
                          ...
                          ...
    <   1  ...  178  179 [180] 181  182  ...   184   > 
    ```

*   elseif currentPage*在*midRange 值和 lastPage之间
    几乎和开头一样。不同之处在于计算一个静态页码以开始页面，然后计算在当前页面之前/之后显示的页面......
    *（顺便说一下，这个周末我很头疼）*

    ```
    <   1  ...  178  179  180 [181] 182  183   184   >
    <   1  ...  178  179  180  181 [182] 183   184   >
    <   1  ...  178  179  180  181  182 [183]  184   > 
    ```

*   elseif currentPage == numPages（总页数）。与 firstPage 操作几乎相同...计算需要多少页才能填满整个内容并计算从哪里开始...

我现在需要做的是让代码本身变得更好......

```
 <   1  ...  178  179  180  181  182  183  [184]  > 
```

在我的情况下，“问题”是整个分页器应该根据 midRange 值计算所有内容，而不是别的。为了让我在未来的任何项目中执行这个分页器，我所要做的就是：

```
 $paginator = new paginator((int));  //  e.g. number of total results from a db request 
```

在大多数情况下，我可能需要添加个人查询字符串以确保其`a href`正常工作：

```
 $paginator->set_queryString('my querystring'); 
```

这几乎就是全部。我已经设置了几个像这样的可选功能：

```
 $paginator->set_resultsPerPage((int));
    $paginator->set_midRange((int));
    $paginator->set_pageIdentifier('querystring-pageNumber-identifier-name-for-get');  //  whatever I needed 
```

最后我像这样显示分页器页面控制器：

```
 $paginator->pageController('full');  //  full, med, min for different styles. 
```

如果这些都不够好，我可以像这样调用每个按钮：

```
 $paginator->prevPage();
    $paginator->firstPage();
    $paginator->listPages();
    $paginator->lastPage();
    $paginator->nextPage();
    $paginator->pageJumper();
    $paginator->perPageSelector(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-18T19:09:54.083

这是一个 Python 程序，它显示了如何正确执行此操作：

```
def main():
    num_pages = 13
    page = 12

    window = 5
    start = page - window
    end = page + window - 1
    if start <= 0:
        end = end - start + 1
        start = 1
    if end > num_pages:
        end = num_pages
        start = max(end - (window * 2) + 1, 1)

    for no in range(start, end + 1):
        print "{}*".format(no) if page == no else no

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T08:55:14.817

我假设您的分页具有以下结构：

**number_of_active_page + 单独（...）+ page（184）+ next_page（>）**

您可以将 number_of_active_page 设置为 8 （包括 prev_page(<) + pages （...和页码）

```
[1]  2   3   4   5   6   7   8         ...     184       > 
```

```
[number_of_active_page(设置为 8)] + 单独 + page + next_page  
```

```
 <   1  ...  3   4  [5]  6   7         ...     184       > 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-01T18:05:47.317

Hear 是一个简单的分页显示示例：

```
$paginationDisplay = ""; // Initialize the pagination output variable
// This code runs only if the last page variable is not equal to 1, 
// if it is only 1 page we require no paginated links to display
if ($lastPage != "1"){
  // This shows the user what page they are on, and the total number of pages
  $paginationDisplay .= 'Page <strong>' . $pn . 
            '</strong> of ' . $lastPage. 'last';
  // If we are not on page 1 we can place the Back button
  if ($pn != 1) {
     $previous = $pn - 1;
     $paginationDisplay .=  '&nbsp;  <a href="' . 
            $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> Back</a> ';
    } 
    // Lay in the clickable numbers display here between the Back and Next links
    $paginationDisplay .= '<span>' . $centerPages . '</span>';
    // If we are not on the very last page we can place the Next button
    if ($pn != $lastPage) {
        $nextPage = $pn + 1;
        $paginationDisplay .=  '&nbsp;  <a href="' . 
            $_SERVER['PHP_SELF'] . '?pn=' . $nextPage . '"> Next</a> ';
    } 
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-12T10:47:54.433

这是我的分页逻辑

```
$pLinks = 5; // Links per page 
$pMids = 3;  
$pTot = 10; // Total page 
$pSel = 1  // Selected page 

if (($pSel <= $pMids) || ($pTot <= $pLinks)) {
    $sPage = 1;                
    $ePage = ($pTot <= $pLinks) ? $pTot : $pLinks;
} else {
    $etPage = $pSel + ($pMids - 1);            
    $ePage = ($etPage <= $pTot) ? $etPage : $pTot;            
    $sPage = $ePage - ($pLinks - 1);            
}

if ($pSel > $sPage) {
    $sL = '<a href="#" id="1">First</a>';
    $sN = '<a href="#" id="'.($pSel-1).'">&laquo;</a>';
} else {
    $sL = 'First';
    $sN = '&laquo;';
}

if ($pSel < $ePage) {
    $eL = '<a href="#" id="'.$pTot.'">End</a>';
    $eN = '<a href="#" id="'.($pSel+1).'">&raquo;</a>';
} else {
    $eL = 'End';
    $eN = '&raquo;';
}

$pOptions = '';

$pOptions .= '<span class="iPage">'.$pSel.'/'.$pTot.'</span>';
$pOptions .= '<span class="renderFL">'.$sL.'</span>';
$pOptions .= '<span class="renderPN">'.$sN.'</span>';

for ($i = $sPage; $i <= $ePage; $i++) {
    if($i != $pSel) {
        $pOptions .= '<span><a href="#" id="'.$i.'">'.$i.'</a></span>';
    } else {
        $pOptions .= '<span class="selected">'.$i.'</span>';
    }
}

$pOptions .= '<span class="renderPN">'.$eN.'</span>';
$pOptions .= '<span class="renderFL">'.$eL.'</span>'; 
```

结果将如下所示：

```
1  -> [1] 2 3 4 5
2  -> 1 [2] 3 4 5
3  -> 1 2 [3] 4 5
..
5  -> 3 4 [5] 6 7
6  -> 4 5 [6] 7 8
..
8  -> 6 7 [8] 9 10
9  -> 6 7 8 [9] 10
10 -> 6 7 8 9 [10] 
```

# android - Android：从 JNI 方法中获取随机数

> ID：11272111
> 
> 赞同：6
> 
> 时间：2012-06-30T06:48:58.657
> 
> 标签：android, c++, c, android-ndk

我正在使用 NDK 创建一个数学运算的演示，例如加法、减法、乘法和除法。

我能够制作库并从本机代码中获取响应，但结果不正确，我的意思是它是随机静态值。

**Calculator.c 类**

```
#include <stdio.h>
#include <jni.h>

jint
Java_com_example_jni_calculator_Calculator_add(JNIEnv* env, jint a, jint b) {
    return (jint)(a + b);
}

jint
Java_com_example_jni_calculator_Calculator_substract(JNIEnv* env, jint a, jint b) {
    return (jint)(a - b);
}

jint
Java_com_example_jni_calculator_Calculator_multiply(JNIEnv* env, jint a, jint b) {
    return (jint)(a * b);
}

jint
Java_com_example_jni_calculator_Calculator_devide(JNIEnv* env, jint a, jint b) {
    return (jint)(a / b);
} 
```

**Calculator.java**类，用于加载库和启动本机方法。

```
public class Calculator {

    static {
        System.loadLibrary("Calculator");
    }

    public native int add(int a, int b);
    public native int substract(int a, int b);
    public native int multiply(int a, int b);
    public native int devide(int a, int b);
} 
```

我正在使用下面的代码来显示结果：

```
int num1 = Integer.parseInt(txtNumber1.getText().toString().trim());
int num2 = Integer.parseInt(txtNumber2.getText().toString().trim());
tvResult.setText(String.format("%1$d + %2$d is equals to %3$d", num1, num2, mCalculator.add(num1, num2))); 
```

**输出**

![在此处输入图像描述](../Images/85e86b7c9d8ecf0778db6299b6e8f883.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T06:49:33.840

您正在声明非静态方法并且不传递对“jobject”的引用 - 这就是您在返回值中得到垃圾的原因。

要修复这个错误，您必须在本机代码中为“jobject”添加一个额外的参数，就在“env”参数之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T08:56:13.470

以下是 Sergey 回答的一些补充示例代码：

C/C++ 方面：

```
JNIEXPORT jint JNICALL Java_com_marakana_NativeLib_add
  (JNIEnv *, jobject, jint, jint); 
```

Java端：

```
 public native int add( int v1, int v2 ); 
```

来源：[https ://thenewcircle.com/s/post/49/using_ndk_to_call_c_code_from_android_apps](https://thenewcircle.com/s/post/49/using_ndk_to_call_c_code_from_android_apps)

再次感谢 Sergey K.、RobinHood 和 Dharmendra！

# bash - 似乎不起作用的 bash 函数定义

> ID：11272114
> 
> 赞同：3
> 
> 时间：2012-06-30T06:49:03.237
> 
> 标签：bash, ls

前几天我正在尝试使用 shell 函数，目的是覆盖`ls`命令。目的是让shell首先调用我的`ls`函数，然后如果第一个开关是“-y”做一件事，否则调用常规`/bin/ls`，但结果的行为方式我不明白。

为了启用它，我决定使用“-y”作为开关，因为：

```
$ ls -y
ls: invalid option -- 'y'
Try `ls --help' for more information. 
```

所以它不能破坏`ls`. 无论如何，将问题简化为最简单的问题，并使用其他几个示例来帮助突出问题：

```
$ function ls() { [[ "y$1" == "y-y" ]] && echo LS ; } 
$ function less() { [[ "y$1" == "y-y" ]] && echo LESS ; }
$ function try() { [[ "y$1" == "y-y" ]] && echo TRY ; } 
```

所以我要压倒一切`ls`，`less`并定义`try`哪个就像“控制”标本:)

现在以这种方式调用：

```
$ ls ; less ; try 
```

它的行为符合预期（无输出），但是：

```
$ ls -y ; less -y ; try -y
LESS
TRY 
```

`ls`无法工作，但`less`覆盖确实如此，“控制”也是如此。

在 stackoverflow 或 askubuntu 的其他地方（但我暂时失去了参考）我看到了一个暗示`ls`是 builltin 的例子，但是：

```
$ which ls
/bin/ls 
```

和：

```
$ builtin ls
bash: builtin: ls: not a shell builtin 
```

所以它似乎不在我的系统上（即使它是我实际上也看不出它为什么会这样）。

我想知道解释是什么？这并不重要，但我想了解发生了什么。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T07:18:24.940

不使用`which`，使用`type`。如果你有类似的东西

```
$ type ls
ls is aliased to `ls --color=auto' 
```

然后您的函数将在交互式 shell 中失败。`.bashrc`在您或任何定义的地方删除它。你也可以使用`unalias`内置的。

如果在函数中运行与函数同名的命令，还需要避免递归。

```
ls()
    if [[ $1 == -y ]]; then
        shift
        ...
    else
        command ls "$@"
    fi 
```

`function`此外，如果您决定使用关键字定义函数，请确保您知道自己在做什么。`funcname() compound-command`在撰写本文时，如果您需要 POSIX 兼容性，请使用 POSIX 样式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T07:16:23.507

为 设置别名很常见，`ls`您可能就是这种情况。首先处理别名，这是简单的文本替换。您的示例中发生的情况是：

```
A) `ls` is replaced with `ls --color=auto` 
B) Your `ls` function is called with the replaced text and your -y option 
C) Your function checks "$1", which is --color=auto 
```

下面显示了此行为的示例：

```
$ function ls() { [[ "y$1" == "y-y" ]] && echo LS ; }
$ ls -y
$ type ls
ls is aliased to `ls --color=auto'
$ unalias ls
$ type ls
ls is a function
ls ()
{
    [[ "y$1" == "y-y" ]] && echo LS
}
$ function ls() { [[ "y$1" == "y-y" ]] && echo LS ; }
$ ls -y
LS
$ alias ls="ls --color=auto"
$ ls -y
--color=auto -y 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T07:17:04.363

我猜是

```
$ alias ls 
```

会告诉你原因。

# javascript - 有超时的循环函数

> ID：11272117
> 
> 赞同：1
> 
> 时间：2012-06-30T06:49:20.073
> 
> 标签：javascript, loops

我想要两个函数（一个向下的动画和一个向上的动画）在一个循环中一个接一个地执行，两个动画之间有几秒钟的超时。但是不知道用JS怎么说……</p>

这是我到目前为止所拥有的：

功能一

```
// Play the Peek animation - downwards
function peekTile() {
    var peekAnimation = WinJS.UI.Animation.createPeekAnimation([tile1, tile2]);

    // Reposition tiles to their desired post-animation position
    tile1.style.top = "-150px";
    tile2.style.top = "-150px";

    peekAnimation.execute();
} 
```

功能二

```
// Play the Peek animation - upwards
function unpeekTile() {
    var peekAnimation = WinJS.UI.Animation.createPeekAnimation([tile1, tile2]);

    // Reposition tiles to their desired post-animation position
    tile1.style.top = "0px";
    tile2.style.top = "0px";

    peekAnimation.execute();
} 
```

这是如何执行这两个功能的草图：

```
var page = WinJS.UI.Pages.define("/html/updateTile.html", {
    ready: function (element, options) {

    peekTile();
    [timeOut]
    unpeekTile();
    [timeOut]
    peekTile();
    [timeOut]
    unpeekTile();
    [timeOut]

    and so on …
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:03:51.360

您可以使用`setTimeout`or来执行此操作`setInterval`，因此执行您想要的简单功能是：

```
function cycleWithDelay() {
    var delay = arguments[arguments.length - 1],
        functions = Array.prototype.slice.call(arguments, 0, arguments.length - 1),
        pos = 0;
    return setInterval(function () {
        functions[pos++]();
        pos = pos % functions.length;
    }, delay);
} 
```

用法对你来说是这样的：

```
var si = cycleWithDelay(peekTile, unpeekTile, 300); 
```

并阻止它：

```
clearInterval(si); 
```

这只会循环调用列表中每`delay`毫秒下一个函数的函数，并在调用最后一个函数时从开头重复。这将导致您的`peekTile`, 等待, `unpeekTile`, 等待,`peekTile`等。

如果您更喜欢随意启动/停止，也许更通用的解决方案更适合您：

```
function Cycler(f) {
    if (!(this instanceof Cycler)) {
        // Force new
        return new Cycler(arguments);
    }
    // Unbox args
    if (f instanceof Function) {
        this.fns = Array.prototype.slice.call(arguments);
    } else if (f && f.length) {
        this.fns = Array.prototype.slice.call(f);
    } else {
        throw new Error('Invalid arguments supplied to Cycler constructor.');
    }
    this.pos = 0;
}

Cycler.prototype.start = function (interval) {
    var that = this;
    interval = interval || 1000;
    this.intervalId = setInterval(function () {
        that.fns[that.pos++]();
        that.pos %= that.fns.length;
    }, interval);
}

Cycler.prototype.stop = function () {
    if (null !== this.intervalId) {
        clearInterval(this.intervalId);
        this.intervalId = null;
    }
} 
```

示例用法：

```
var c = Cycler(peekTile, unpeekTile);
c.start();

// Future
c.stop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:57:36.640

您使用每 1000 毫秒`setInterval()`调用`unpeekTile()`一次，然后在函数结束时调用 1000 毫秒后`setTimeOut()`运行：`peekTile()``unpeekTile()`

```
function peekTile() {
    var peekAnimation = WinJS.UI.Animation.createPeekAnimation([tile1, tile2]);

    // Reposition tiles to their desired post-animation position
    tile1.style.top = "-150px";
    tile2.style.top = "-150px";

    peekAnimation.execute();
}

function unpeekTile() {
       /* your code here */
     setTimeout(peekTile, 1000);
}

setInterval(unpeekTile, 1000); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-30T08:24:41.520

看看[小提琴](http://jsfiddle.net/kFnTW/)

```
var animation  = (function () {
     var peekInterval, unpeekInterval, delay;
     return {
          start: function (ip) {
              delay = ip;
              peekInterval = setTimeout(animation.peekTile, delay);
          },
          peekTile: function () {
             //Your Code goes here
             console.log('peek');
             unpeekInterval = setTimeout(animation.unpeekTile, delay);
          },
          unpeekTile: function () {
            //Your Code goes here
            console.log('unpeek');  
            peekInterval = setTimeout(animation.peekTile, delay);
          },
          stop: function () {
              clearTimeout(peekInterval);
              clearTimeout(unpeekInterval);
          }
    }
         })();
animation.start(1000);
// To stop

setTimeout(animation.stop, 3000); 
```

​我不能在全局范围内使用`this`而不是 animation.peekTile`setTimeout`

# sql-server - SQL - 为每个匹配返回一行

> ID：11272120
> 
> 赞同：1
> 
> 时间：2012-06-30T06:49:44.240
> 
> 标签：sql-server

我不完全确定如何表达我正在寻找的东西，这使得搜索变得困难。但我想做的是为每个不同的列匹配返回一条记录

表结构：

```
ItemHolderId Name
------------ --------------------------------------------------
1            Holder A
2            Holder B

ItemId      Data                                               ItemHolderId
----------- -------------------------------------------------- ------------
1           Item A                                             1
2           Item B                                             1
3           Item C                                             1
4           Item D                                             1
5           Item E                                             2
6           Item F                                             2
7           Item G                                             2 
```

我希望为每个物品持有者 ID 选择一个物品。例如，它只会选择项目 A 和项目 E。对于每个匹配的列，顺序无关紧要。我希望我以明智的方式解释这一点。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T06:54:50.907

如果您使用的是 SQL Server **2005**及更高版本（您在这方面不够具体），则一种方法是使用 CTE（通用表表达式）。

使用此 CTE，您可以按某些条件（即您的）对数据进行分区，`ItemHolderId`并让 SQL Server 为每个分区从 1 开始为所有行编号，并按其他一些条件排序（您需要*一些*条件 - 您使用的是给你）。

所以尝试这样的事情：

```
;WITH PartitionedComponents AS
(
   SELECT 
       ih.ItemHolderID, ih.Name, d.Data,
       ROW_NUMBER() OVER(PARTITION BY ih.ItemHolderID ORDER BY d.Data DESC) AS 'RowNum'
   FROM 
       dbo.ItemHolder ih
   INNER JOIN 
       dbo.ItemHolderData d ON ih.ItemHolderID = d.ItemHolderID
   WHERE
       ComponentId IN (.....) 
       AND ConsoleTimeStamp <= (threshold)
)
SELECT 
   ItemHolderID, Name, Data
FROM 
   PartitionedComponents
WHERE
   RowNum = 1 
```

在这里，我只为每个“分区”（即每个`ItemHolderId`）选择最后两个条目 - 按“数据”列以降序方式排序。

这是否接近你正在寻找的东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T07:08:53.543

您可以使用`row_number()`用户对数据进行分区，然后以 '1' 作为`[rank]`. 通过这种方式，您可以控制数据的分区和排序，以控制哪些记录被赋予“1”的值，从而返回......

```
/* Setup tables for query */
declare @tbl1 table (ItemHolderId int, Name varchar(32))
declare @tbl2 table (ItemId int, Data varchar(32), ItemHolderId int)

insert into @tbl1 values (1, 'Holder A'), (2, 'Holder B')

insert into @tbl2 values (1, 'Item A', 1), (2, 'Item B', 1), (3, 'Item C', 1), (4, 'Item D', 1)
insert into @tbl2 values (5, 'Item E', 2), (6, 'Item F', 2), (7, 'Item G', 2)

/* Select data */
select t2.*, row_number() over (partition by t1.ItemHolderId order by t2.ItemHolderId) as [rank]
into #temp
from @tbl1 t1 inner join @tbl2 t2 on t1.ItemHolderId = t2.ItemHolderId

select ItemId, Data, ItemHolderId from #temp where [rank] = 1

drop table #temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:02:57.177

我认为您也可以对 itemholderid 列使用 group by 功能，我猜它会有所帮助。

```
select 
   rownum itemId, 
   tmp.name , 
   tmp.itemholderid  
from 
   (select 
       min(t.name) name, 
       t.itemholderid  
    from 
       table_name t 
    group by t.itemholderid
   )tmp; 
```

# php - 在 PHP-MySQL 中处理数百个同时更新请求的最佳方法？

> ID：11272124
> 
> 赞同：-2
> 
> 时间：2012-06-30T06:50:50.193
> 
> 标签：php, mysql, database, database-performance, sql-update

我在 5-10 秒内在单个表上收到 100 个同时行更新请求，这会导致问题，它实际上并没有更新行，也没有给出任何错误`mysql_query($query)`响应。

请提出这可能是什么原因，我该如何解决这个问题？

表中有大约 20 万条记录。这可能是问题之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:15:15.593

检查您的存储引擎配置。听起来您实际上并没有执行“太多”插入，但是如果您在紧张的服务器上（例如廉价的共享主机），切换到更适合大量插入/更新的引擎可能会有所帮助：

[比较 InnoDB 和 MyISAM 的性能](https://blogs.oracle.com/MySQL/entry/comparing_innodb_to_myisam_performance)

其他可能/可能不适用于您的特定情况的潜在解决方案：

1）减少正在更新的表上的索引数量，以提高更新/插入的速度。

2）将传入的编辑缓存到一个较小的表（没有索引），然后定期同步它们。

3）将插入合并到单个查询中（尽管这听起来对您不起作用）将它们全部插入到内存临时表中，然后 INSERT INTO ... SELECT FROM ... 对目标进行单个事务桌子。

# iphone - 在 ios 4.0 中弹出视图时 viewWiillappear 不会调用

> ID：11272133
> 
> 赞同：0
> 
> 时间：2012-06-30T06:53:22.320
> 
> 标签：iphone, objective-c, ios

ViewWillappear 在按下一个控制器时被调用，但是当你弹出这个控制器时，在这种情况下 viewwillappear 不会在 ios 4.3.5 中调用。但它在 ios 5.0 中运行良好。它有点紧急。请告诉我。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:56:31.320

只需将 viewWillAppear 消息发送到您的视图控制器，然后再将其添加为子视图/PopView。（有一个 BOOL 参数告诉视图控制器它是否被动画显示。）

`[myViewController viewWillAppear:NO];`

查看节拍器示例中的 RootViewController.m。

（我实际上发现 Apple 的示例项目很棒。除了 HelloWorld 之外还有很多；）

# c - 读取 64kb 块中的文件

> ID：11272135
> 
> 赞同：2
> 
> 时间：2012-06-30T06:53:29.077
> 
> 标签：c, file, io

我想创建一个将文件复制到某个位置的函数。我想知道在 64kb 块中阅读它会是有益的天气吗？还是我应该动态分配缓冲区？还是我应该只使用 system() 函数在命令行上执行此操作？

我的意思是这样的：

```
int copy_file(const char *source, const char *dest)
{
    FILE *fsource, *fdest;
    int readSize;
    unsigned char buffer[64*1024]; //64kb in size

    fsource = fopen(source, "rb");
    fdest = fopen(dest, "wb");
    if(!fsource)
        return 0;
    if(!fdest)
    {
        fclose(fsource);
        return 0;
    }

    while(1)
    {
        readSize = fread(buffer, 1, sizeof(buffer), fsource);
        if(!readSize)
            break;
        fwrite(buffer, 1, readSize, fdest);
    }

    fclose(fsource);
    fclose(fdest);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T06:59:45.020

最佳读取大小将非常依赖于平台。2 的幂绝对是个好主意，但如果不进行测试，很难说哪种尺寸最好。

如果你想看看 cp 是如何复制文件的，你可以看看最[前沿的源代码](http://git.savannah.gnu.org/cgit/coreutils.git/tree/src/cp.c)

# c - Pthreads：主线程和子线程堆栈大小之间的关系

> ID：11272137
> 
> 赞同：0
> 
> 时间：2012-06-30T06:53:36.743
> 
> 标签：c, linux, gcc, pthreads

我试图了解 Linux 中 pthreads 库的堆栈分配。这里有几个问题：

A）什么是主线程？- 那是运行 C `main(`) 程序的线程吗？

B) 主线程的堆栈分配是多少？是那个`ulimit -s`尺寸吗？

C) 子线程的堆栈分配是多少？是那个`ulimit -s`尺寸吗？

D）主线程和其他线程的堆栈大小是依赖的？

E) 进程栈和线程栈是共享的吗？我如何决定进程堆栈（比如`a.out`）大小。

F) 这些信息在 NPTL 和 LinuxThreads 实现之间是否有所不同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:28:04.360

A：是的
B：是的
C：也许。

如果在创建线程时使用的 pthread_attr_t 没有指定堆栈大小，并且如果`ulimit -s`不是无限的，`ulimit -s`则将确定新创建的线程的堆栈大小。

D：问题不清楚。它们不相互依赖，但`ulimit -s`在某些条件下它们确实相互依赖。

E. 是与否。它们在内存可见性的意义上是共享的——主线程可以读取和写入其他线程的堆栈变量，反之亦然。但是每个线程都在自己的堆栈上执行，如果两个线程开始在同一个堆栈上执行，那将是一场灾难。

F. 没有。

# .net - C++/CLI DLL 中的本机代码

> ID：11272141
> 
> 赞同：0
> 
> 时间：2012-06-30T06:54:29.653
> 
> 标签：.net, visual-studio-2010, c++-cli

我希望尽可能接近实时，所以我的意图是让代码中最关键的部分不受管理（我不希望 GC 阻止执行）。所以我尝试了这个：

```
class Native 
{
public:
    int GetValue() 
    {       
        return 1;
    }
};

ref class Managed 
{
public:
    void Test() 
    {
        Native n;
        Console::WriteLine(n.GetValue());
    }
}; 
```

ILDASM 显示编译为 IL 的 Native::GetValue。是否可以保持此类/功能不受管理？专用的非托管 dll 是唯一的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:21:55.033

看起来我需要#pragma 指令：

```
#pragma unmanaged

class Native 
{
public:
    int GetValue() 
    {       
        return 1;
    }
};

#pragma managed

ref class Managed 
{
public:
    void Test() 
    {
        Native n;
        Console::WriteLine(n.GetValue());
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:00:16.683

C++-CLI 是托管扩展，允许您直接使用 .NET 功能，例如`Console.WriteLine`您在示例中显示的功能。它被编译成托管程序集。如果您想要非托管代码，则必须指示编译器生成非托管代码。但在这种情况下，显然您将不得不忘记 .NET 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:26:27.020

嗯，我可能误解了你的要求，但我对此感到窒息：

> 我不希望 GC 阻止执行

这取决于您使用的互操作方案，但通常您无法通过简单地使应用程序的某些部分不受管理来阻止执行线程的暂停。任何沿其调用堆栈具有 CLR 根的线程都可能被 GC 劫持和停止，无论该线程是否恰好执行“非托管”代码。

# latex - 如何在乳胶中打印这些字符？

> ID：11272148
> 
> 赞同：-1
> 
> 时间：2012-06-30T06:55:52.857
> 
> 标签：latex

我想在 LaTeX 中打印这些字符集（在双引号内）“<code>\r\t \n[]<>"?'()!#$%&*+-\/,:;.@" . 我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:28:39.687

好吧，我自己找到了答案

```
$\backslash$r$\backslash$t $\backslash$n[]\textless\textgreater\textquotedblright?\textquoteright()!\#\$\%\&*+-$\backslash$\slash,;:.@ 
```

# c# - 有没有办法防止在另一个事件结束之前触发某些事件？

> ID：11272152
> 
> 赞同：0
> 
> 时间：2012-06-30T06:57:00.277
> 
> 标签：c#, events, datagridview

在下面的代码中，SelectionChanged 事件在 RowsAdded 结束之前被触发，我怎样才能使事件原子？

```
private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
    {
        dataGridView1.CurrentCell = dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[1];
        dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[1].Selected = true;
    }

private void dataGridView1_SelectionChanged(object sender, EventArgs e)
    {
        if (dataGridView1.CurrentRow != null)
        {
            //Something
        }
    } 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:09:00.753

`SelectionChanged`*在处理过程中*被触发，`RowsAdded`因为您通过更改. 添加一行不会导致两个事件都被触发——您在处理第一个事件时会引发第二个事件。（事实上​​，你可能造成了两次，因为处理程序中的两行似乎都改变了选择）。 *`dataGridView1_RowsAdded``SelectionChanged`*

 *如果您不想`dataGridView1_SelectionChanged`在 RowsAdded 处理程序中运行，则需要暂时​​取消订阅该事件：

```
dataGridView1.SelectionChanged -= dataGridView1_SelectionChanged;
// change the selection... 
dataGridView1.SelectionChanged += dataGridView1_SelectionChanged; 
```

或者更好的是，重新设计您在 SelectionChanged 处理程序中所做的事情，使其适用于事件的所有实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:39:37.513

您可以覆盖您想要控制的事件，然后在被覆盖的事件中放置一个 if 条件，并控制它何时触发以及何时不触发。马赫迪*

# asp.net - CuteWebUI.Uploader（Ajax 上传器）

> ID：11272154
> 
> 赞同：0
> 
> 时间：2012-06-30T06:57:02.007
> 
> 标签：asp.net, vb.net

问题 1。当通过 CuteWebUI.Uploader 的 AjaxUplaoder 上传图像文件时，它会像这样保存文件

```
persisted.057fe17e-9707-4f3a-91b7-250239b19c2f.10.JPG.resx 
```

其中“10.jpg”是图像文件名，其他“persisted.057fe17e-9707-4f3a-91b7-250239b19c2f.10.JPG.resx”我不知道这是什么？

请帮我从这个给定的格式“persisted.057fe17e-9707-4f3a-91b7-250239b19c2f.10.JPG.resx”中提取文件名，这样我就可以在 ASP.Net 的图像控制上显示通过这个上传的图像文件的图像Ajax 上传器。这个 ajax 上传器的属性 'args.filename' 给出了 'FileUploaded' 事件的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:04:14.387

在这里寻找您的问题的解决方案：http: [//ajaxuploader.com/document/scr/html/How-to-save-uploaded-file.htm](http://ajaxuploader.com/document/scr/html/How-to-save-uploaded-file.htm)

# java - 带有惰性列表的json数据

> ID：11272157
> 
> 赞同：-1
> 
> 时间：2012-06-30T06:57:40.113
> 
> 标签：java, android

我正在尝试显示通过 json 从服务器获取的数据。我如何使用惰性列表来显示该数据。我当前的代码不起作用，我不知道为什么。请帮我。修改当前代码将很有帮助。

这是我的代码

```
public class MainActivity extends Activity {

ListView list;
LazyAdapter adapter;
JSONParser jsons = new JSONParser();
UserFunctions userFunctions = new UserFunctions();
JSONArray data = null;
ArrayList<HashMap<String, String>> inboxList;
String[] tS;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    inboxList = new ArrayList<HashMap<String, String>>();

    List<String> t = new ArrayList<String>(); 
    List<String> im = new ArrayList<String>();

    list=(ListView)findViewById(R.id.list);
    adapter=new LazyAdapter(this, tS, mTitles);
    list.setAdapter(adapter);

    Button b=(Button)findViewById(R.id.button1);
    b.setOnClickListener(listener);

    /********************************/

    JSONObject json = userFunctions.homeData();

    Log.e("Data", json.toString());

    // Check your log cat for JSON reponse
    //Log.d("Inbox JSON: ", json.toString());

    try {
        data = json.getJSONArray("data");
        Log.d("inbox array: ", data.toString());
        // looping through All messages
        for (int i = 0; i < data.length(); i++) {
            JSONObject c = data.getJSONObject(i);

            // Storing each json item in variable
            String uid = c.getString("uid");
            String name = c.getString("name");
            String success = c.getString("success");
            String profile_img = c.getString("profile_image");
            //String date = c.getString(TAG_DATE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put("uid", uid);
            map.put("name", name);
            map.put("success", success);
            map.put("profile_image", profile_img);

            t.add(profile_img);

            // adding HashList to ArrayList
            inboxList.add(map);
        }

        tS = new String[t.size()];
        t.toArray(tS);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /*******************************/
}

@Override
public void onDestroy()
{
    list.setAdapter(null);
    super.onDestroy();
}

public OnClickListener listener=new OnClickListener(){
    public void onClick(View arg0) {
        adapter.imageLoader.clearCache();
        adapter.notifyDataSetChanged();
    }
};

private String[] mTitles = {
        "title 1", "title 2", "title 3", "title 4", "title 5", "title 6", "title 7", "title 8", "title 9", "title 10",
        "title 11", "title 12", "title 13", "title 14", "title 15", "title 16", "title 17", "title 18", "title 19", "title 20",
        "title 21", "title 22", "title 23", "title 24", "title 25", "title 26", "title 27", "title 28", "title 29", "title 30",
        "title 31", "title 32", "title 33", "title 34", "title 35", "title 36", "title 37", "title 38", "title 39", "title 40",
        "title 41", "title 42", "title 43", "title 44", "title 45", "title 46", "title 47", "title 48", "title 49", "title 50",
        "title 51", "title 52", "title 53", "title 54", "title 55", "title 56", "title 57", "title 58", "title 59", "title 60",
        "title 61", "title 62", "title 63", "title 64", "title 65", "title 66", "title 67", "title 68", "title 69", "title 70",
        "title 71", "title 72", "title 73", "title 74", "title 75", "title 76", "title 77", "title 78", "title 79", "title 80",
        "title 81", "title 82", "title 83", "title 84", "title 85", "title 86", "title 87", "title 88", "title 89", "title 90",
        "title 91", "title 92", "title 93", "title 94", "title 95", "title 96", "title 97", "title 98", "title 99", "title 100",
        "title 101", "title 102", "title 103", "title 104"
};

} 
```

这是我的 logcat 输出

```
06-30 08:49:25.210: E/AndroidRuntime(31245): FATAL EXCEPTION: main
06-30 08:49:25.210: E/AndroidRuntime(31245): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fedorvlasov.lazylist/com.fedorvlasov.lazylist.MainActivity}: java.lang.NullPointerException
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.os.Looper.loop(Looper.java:130)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.app.ActivityThread.main(ActivityThread.java:3691)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at java.lang.reflect.Method.invokeNative(Native Method)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at java.lang.reflect.Method.invoke(Method.java:507)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at dalvik.system.NativeStart.main(Native Method)
06-30 08:49:25.210: E/AndroidRuntime(31245): Caused by: java.lang.NullPointerException
06-30 08:49:25.210: E/AndroidRuntime(31245):    at com.fedorvlasov.lazylist.LazyAdapter.getCount(LazyAdapter.java:29)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.widget.ListView.setAdapter(ListView.java:485)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at com.fedorvlasov.lazylist.MainActivity.onCreate(MainActivity.java:41)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-30 08:49:25.210: E/AndroidRuntime(31245):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
06-30 08:49:25.210: E/AndroidRuntime(31245):    ... 11 more 
```

这是我的懒惰适配器

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private String[] data;
private String[] titles;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, String[] d, String[] mTitles) {
    activity = a;
    data=d;
    titles = mTitles;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.item, null);

    TextView text=(TextView)vi.findViewById(R.id.text);
    TextView title=(TextView)vi.findViewById(R.id.textView_title);
    ImageView image=(ImageView)vi.findViewById(R.id.image);
    text.setText("item "+position);
    title.setText("Title: " + titles[position]);
    imageLoader.DisplayImage(data[position], image);
    return vi;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:31:38.330

问题出在您的适配器设置中，没有数据您已设置发生异常的适配器
添加此行

```
adapter=new LazyAdapter(this, tS, mTitles);
list.setAdapter(adapter); 
```

在这条线之后

```
 t.toArray(tS); 
```

还有一件事是在你的活动中首先检查你在**mTitles**中的哪些地方有评估数据我在你的活动中没有得到任何代码

# grails - 了解 Grails 中的单元测试

> ID：11272159
> 
> 赞同：2
> 
> 时间：2012-06-30T06:57:49.137
> 
> 标签：grails, groovy, grails-2.0

我是一个 grails 初学者。并试图理解单元测试..当我创建域类时，`Author`grails 会自动`AuthorControllerTests`为该域创建一个测试控制器。

所以 。在测试控制器中，第二行是 @Mock(Author)

这是什么意思..当我模拟一个域类时我得到了什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:43:02.017

只是为了添加一些东西，当您需要隔离代码的“单元”时，模拟很有用，例如您的控制器。

通过隔离，我们的意思是编写简单的组件来重新编写和模拟所有依赖项。这个简单的组件就是我们所说的 Mocks。

这里的 Grails 使您可以模拟域类，这将使您的测试更容易，因为它不会将信息存储在数据库中。

如果要测试整个堆栈，从控制器到数据库，这就是我们所说的集成测试。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:37:50.303

[正如它在有关测试的大量文档中](http://grails.org/doc/latest/guide/testing.html)所说：

> Mock 注释创建任何协作者的模拟版本。有一个 GORM 的内存实现，它将模拟与 GORM API 的大多数交互。对于那些不会自动模拟的交互，您可以使用内置支持以编程方式定义模拟和存根。

AuthorControllerTests 也是 AuthorController 的测试，而不是 Author 域类。

# android - 从动态创建的视图中获取用户输入

> ID：11272160
> 
> 赞同：0
> 
> 时间：2012-06-30T06:57:54.683
> 
> 标签：android, user-input, data-storage, android-inflate, textwatcher

我遇到了无法从第二个膨胀视图获取用户输入的问题。我已经上传了一张图片到这个网站[http://postimage.org/image/b4syhdzrr/](http://postimage.org/image/b4syhdzrr/) 因为我仍然不允许直接在 SO 上发布图片。

如您所见，TextView 仅显示前两个 EditText 输入 + 计算，但未考虑第三个输入。（数字的第一个 EditText 未膨胀）

因为我不确定最终用户需要多少 EditText。我应该如何从所有 EditText 获取用户输入？

这是我尝试过的方法，设置了 SharePreferences 以将用户输入存储在 TextWatcher 内的 OnClickListener 内，但是使用此代码，即使 TextWatcher 为空，Plus 按钮的 OnClickListener 也会使应用程序崩溃。

```
public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            int position = spinner.getSelectedItemPosition();
            switch (position) {
            case 0:
                ll = (LinearLayout) findViewById(R.id.llSetView);
                ll.removeAllViews();
                View person1 = View.inflate(BillCalculator1.this,R.layout.person1, null);
                ll.addView(person1);

                btP1Add = (Button) ll.findViewById(R.id.buttonP1Add);
                btP1Gst = (Button) ll.findViewById(R.id.buttonP1GST);
                btP1Add.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        llNewRow = (LinearLayout) findViewById(R.id.llP1AddNewRow);
                        etNewRow = (EditText) findViewById(R.id.editTextNewRow);
                        View newRow = View.inflate(BillCalculator1.this,R.layout.newrow, null);
                        llNewRow.addView(newRow);

                        TextWatcher input = new TextWatcher() {
                            public void afterTextChanged(Editable s) {
                            }
                            //SharedPreferences here

                            public void beforeTextChanged(CharSequence s,
                                    int start, int count, int after) {
                            }

                            public void onTextChanged(CharSequence s,
                                    int start, int before, int count) {
                            }
                        };

                    }
                }); 
```

膨胀视图的 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/editTextNewRow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal"
    android:hint="Enter new amount">

    <requestFocus />
</EditText> 
```

对编程和 Android 非常陌生，如果需要任何其他信息，请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:51:35.170

我会尝试另一种方法来解决您正在尝试做的事情。我会`TextWatcher`为膨胀添加一个特殊的`EditText`并将用户输入的值存储在`ArrayList`. 首先，您的班级需要两个额外的字段：

```
private ArrayList<String> mData = new ArrayList<String>(); // this will store the entered values
private static int counter = 0; // to identify the rows 
```

创建一个实现`TextWatcher`接口的类，如下所示：

```
 public class InputWatcher implements TextWatcher {

            private int mRowNumber;

            public InputWatcher(int rowNumber) {
                mRowNumber = rowNumber;
            }

            @Override
            public void afterTextChanged(Editable s) {
                // here you'll add the text as the user enters it in the correct position in the
                mData.set(mRowNumber, s.toString());                    
            }
     } 
```

然后：

```
int position = spinner.getSelectedItemPosition();
switch (position) {
case 0:
     mData.clear();
     counter = 0;
     ll = (LinearLayout) findViewById(R.id.llSetView);
     ll.removeAllViews();
     // I sure hope that you have the Buttons with the id button1Add and buttonP1GST in the layout that you inflate
     // otherwise the code will throw a NullPointerException when you use them below
     View person1 = View.inflate(BillCalculator1.this,R.layout.person1, null);
     ll.addView(person1);
     btP1Add = (Button) ll.findViewById(R.id.buttonP1Add);
     btP1Gst = (Button) ll.findViewById(R.id.buttonP1GST);
     btP1Add.setOnClickListener(new View.OnClickListener() {

           public void onClick(View v) {
                 // add an entry in the data holder for this row
        mData.add("");
        View newRow = View.inflate(BillCalculator1.this,
                        R.layout.newrow, null);
        EditText justAdded = (EditText) newRow
                        .findViewById(R.id.editTextNewRow);
        justAdded.addTextChangedListener(new InputWatcher(counter));
        ll.addView(newRow);
        counter++;
           }
     }); 
```

当需要计算总数时，在 a 中`Button`，`OnClickListener`只需执行以下操作：

```
@Override
public void onClick(View v) {
        int storedSize = mData.size();
    int sum = 0;
    for (int i = 0; i < storedSize; i++) {
        sum += Integer.parseInt(mData.get(i).equals("") ? "0"
                            : mData.get(i));
    }
    Toast.makeText(getApplicationContext(), "Total" + sum,              Toast.LENGTH_SHORT).show();
} 
```

从您的图片中，我不明白您是否已经从`EditText`布局中的一个开始（+ 左侧的那个`Button`）。如果是这种情况，那么您必须手动设置`InputWatcher`它并移动`counter`增量，然后再添加`InputWatcher`添加行的位置。

# javascript - 在 a 元素中省略 href 属性？

> ID：11272163
> 
> 赞同：0
> 
> 时间：2012-06-30T06:58:26.110
> 
> 标签：javascript, html

很多次与 javascript 一起编写 html 代码，我创建`<a>`元素。

我的问题是，我可以忽略 href 属性吗？因为我宁愿添加一个 ID 属性并在那里处理点击。

大多数时候，当我这样做时，不是为了转到不同的页面，而是为了执行某种 ajax 调用。

我讨厌在 url 中有 #，它看起来很丑。

我是否应该使用不同的元素，即 a`<span>`并使用类对其进行修改以使其看起来像链接？

谢谢J

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T08:46:34.037

如果你有一个没有`href`的链接，它不是一个链接，它可能是一个**按钮**，你应该使用一个，而不是一个链接。

**[按钮 VS。链接 - 用户体验.SE](https://ux.stackexchange.com/q/5493)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T07:07:38.673

**如果您不想在 href 中使用任何值**

```
<a href="javascript:void(0)"​ >link</a> 
```

**如果不想添加 href 但想要光标的指针样式**

```
<a style="cursor:pointer">link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:10:27.960

是的！`href`如果目的是只实现点击事件而不是`link`某些页面或选项卡，则不需要使用属性。

您可以通过一些或直接`a`使用 CSS 设置标签样式`classname``a{ cursor: pointer; color: blue;}`

但是如果未分配属性，则不能使用样式`a`元素`a:link``href`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T07:22:55.890

您不一定需要带有`a`标签的href。它基本上将它与另一个区分开来，并使其看起来可点击。您可以`a`根据您的目的使用 onclick 或任何其他元素。

```
<a class="lookClickable" onclick="doSomething()">Click Me</a> 
```

（上面的内容可能不是`a`too like`span`等`div`。

# javascript - 在运行时添加复选框并将它们保存在 HTML 文件代码中

> ID：11272164
> 
> 赞同：0
> 
> 时间：2012-06-30T06:58:28.757
> 
> 标签：javascript

我想创建一个 html（使用 javascript）文件，我想在运行时在其中添加/删除复选框，将它们保存在 html 代码中，以便下次打开文件时可以使用它们。我不想使用服务器（所以没有 JSP 或 PHP）。

请告诉我是否可以仅使用javascript？如果是，请指向我可以获得更多信息的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:01:41.770

可以使用[HTML5 本地存储](http://diveintohtml5.info/storage.html)甚至[客户端数据库存储](http://www.aquim.com/web-article-237.html)。如果您不知道浏览器是否支持它们，另一种可能性是使用持久性 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:01:59.440

我很确定这不可能以您仅在浏览器中的 javascript 中请求的方式进行（javascript 无法写入源文件）。

例如，您可能有一些运气，例如存储您在 localStorage 中添加的复选框的定义，然后在重新加载页面时重新加载/重绘相同的定义。

# algorithm - 使用瞳孔和闪烁 xy 坐标估计凝视

> ID：11272176
> 
> 赞同：0
> 
> 时间：2012-06-30T07:01:13.733
> 
> 标签：algorithm, image-processing, human-computer-interface, eye-tracking

我已经设法使用opencv跟踪中心xy坐标和瞳孔半径。

现在我想用它来测量凝视。

如果有人可以帮助我解决它的理论部分，也许我将能够对其进行编码。

任何开源程序也可以。

**更新：**我现在也能够追踪角膜上的闪光。根据我的在线研究，将瞳孔的坐标与闪烁进行比较以估计凝视。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:41:14.587

终于从 SO 本身获得了一些领先优势 -

[https://stackoverflow.com/a/4454006/1458387](https://stackoverflow.com/a/4454006/1458387)

# python - Wordpress XmlRpc Python 错误

> ID：11272182
> 
> 赞同：2
> 
> 时间：2012-06-30T07:02:32.013
> 
> 标签：python, wordpress, xml-rpc

我正在使用用 python 编写的以下 wordpress xmlrpc 模块：

但是当我运行程序时出现以下错误。你知道如何解决这个程序吗？这是我得到的错误

```
Traceback (most recent call last):
  File "<pyshell#28>", line 1, in <module>
    wp.call(NewPost(post, True))
  File "C:\Python27\lib\site-packages\wordpress_xmlrpc\base.py", line 27, in call
    raw_result = server_method(*args)
  File "C:\Python27\lib\xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "C:\Python27\lib\xmlrpclib.py", line 1578, in __request
    verbose=self.__verbose
  File "C:\Python27\lib\xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "C:\Python27\lib\xmlrpclib.py", line 1297, in single_request
    return self.parse_response(response)
  File "C:\Python27\lib\xmlrpclib.py", line 1467, in parse_response
    p.feed(data)
  File "C:\Python27\lib\xmlrpclib.py", line 557, in feed
    self._parser.Parse(data, 0)
ExpatError: junk after document element: line 2, column 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:01:26.443

当您的调用响应不是有效的 XML 时，通常会发生此错误。例如，如果它以换行符开头，如下所示：

```
\n<?xml version="1.0"?>\n<methodResponse>\n<params>\n<param>\n<value>\n
<array><data>\n  <value><string>wp.getUsersBlogs</string></value> 
```

某些版本的 WordPress（或某些已安装的插件）似乎存在此问题。不幸的是，这意味着问题不在于您的代码，而在于您正在与之通信的 WordPress 实例。

# c - 如何对非常大的数字进行排序

> ID：11272186
> 
> 赞同：-2
> 
> 时间：2012-06-30T07:03:34.487
> 
> 标签：c

如何对非常大的数字进行排序，例如

```
03 10103538 2222 1233 6160 0142 
03 10103538 2222 1233 6160 0141 
30 10103538 2222 1233 6160 0141 
30 10103538 2222 1233 6160 0142 
30 10103538 2222 1233 6160 0141 
30 10103538 2222 1233 6160 0142 
```

在 C 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:10:02.677

这是一个类似的 SPOJ 问题 [http://www.spoj.pl/problems/SBANK/](http://www.spoj.pl/problems/SBANK/)

您可以使用`Radix sort`或简单地解决它`Binary Search Tree`（我就是这样做的）。

以下是您将在 C++ 中执行的操作（在 C 中实现您自己的`std::map`// ）`std::set``binary search tree`

```
 map<string,int> tab;
    map<string,int>::iterator it;
    char acc[40];
    int n;
    scanf("%d\n",&n);
    for(int i=0;i<n;i++)
    {
        gets(acc);
        tab[acc]++;
    }
    for(it=tab.begin();it!=tab.end();it++)
    {
        printf("%s %d\n",it->first.c_str(),it->second);
    }
    printf("\n"); 
```

我上面的程序还打印相等数字的计数，我认为您的问题中没有指定。因此，在这种情况下，一个简单的 std::set 或一个简单的二叉搜索树也可以工作。尽管在上述问题中，我可以很容易地用 std::set 而不是 std::map 解决。

# php - 如何使倒数计时器不会在页面刷新时重置

> ID：11272190
> 
> 赞同：0
> 
> 时间：2012-06-30T07:04:25.900
> 
> 标签：php, mysql, timer, countdown

我正在为我的项目创建一个在线考试页面。我有一个倒数计时器，但它会在页面刷新时重置。我怎样才能让它不重置？通过从 db 获取时间来设置计时器。我正在使用 php mysql。请帮我。这是我的代码。

```
<?php
   $result=mysql_query("select * from test where testid='29'");
   while($time=mysql_fetch_array($result)){
      $dateFormat  = "d F Y -- g:i a";
      $targetDate  = time() + ($time['duration']*60);
      $actualDate  = time();
      $secondsDiff = $targetDate - $actualDate;
      $remainingDay      = floor($secondsDiff/60/60/24);
      $remainingHour     = floor(($secondsDiff-($remainingDay*60*60*24))/60/60);
      $remainingMinutes  = floor(($secondsDiff-($remainingDay*60*60*24)-($remainingHour*60*60))/60);
      $remainingSeconds  = floor(($secondsDiff-($remainingDay*60*60*24)-($remainingHour*60*60))-($remainingMinutes*60));
      $actualDateDisplay = date($dateFormat,$actualDate);
      $targetDateDisplay = date($dateFormat,$targetDate);
   }
?>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <title>Untitled Document</title>
   <script type="text/javascript">
      var days = <?php echo $remainingDay; ?>  
      var hours = <?php echo $remainingHour; ?>  
      var minutes = <?php echo $remainingMinutes; ?>  
      var seconds = <?php echo $remainingSeconds; ?> 
      function setCountDown ()
      {
          seconds--;
          if (seconds < 0){
             minutes--;
             seconds = 59
          }
          if (minutes < 0){
              hours--;
              minutes = 59
          }
          if (hours < 0){
              hours = 23
          }
          document.getElementById("remain").innerHTML = "  "+hours+" hr "+minutes+" min    "+seconds+" sec";
          SD=window.setTimeout( "setCountDown()", 1000 );
          if (minutes == '00' && seconds == '00') { 
              seconds = "00"; window.clearTimeout(SD);
              window.location = "result.php"
          } 

       }
    </script>

</head>
<body onLoad="setCountDown();">
   <div id="remain">
         <?php echo "$remainingHour hours, $remainingMinutes minutes, $remainingSeconds seconds";?>
   </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:11:58.763

您应该将值读入会话变量并在之后使用它：

```
<?php
session_start();
if (isset($_SESSION['targetdate'])) {
    // session variable_exists, use that
    $targetDate = $_SESSION['targetdate'];
} else {
    // No session variable, red from mysql
    $result=mysql_query("select * from test where testid='29' LIMIT 1");
    $time=mysql_fetch_array($result);
    $dateFormat = "d F Y -- g:i a";
    $targetDate = time() + ($time['duration']*60);
    $_SESSION['targetdate'] = $targetDate;
}

$actualDate = time();
$secondsDiff = $targetDate - $actualDate;
$remainingDay     = floor($secondsDiff/60/60/24);
$remainingHour    = floor(($secondsDiff-($remainingDay*60*60*24))/60/60);
$remainingMinutes = floor(($secondsDiff-($remainingDay*60*60*24)-         ($remainingHour*60*60))/60);
$remainingSeconds = floor(($secondsDiff-($remainingDay*60*60*24)-    ($remainingHour*60*60))-($remainingMinutes*60));
$actualDateDisplay = date($dateFormat,$actualDate);
$targetDateDisplay = date($dateFormat,$targetDate);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:08:58.990

当用户开始考试时，将开始时间保存在数据库中。将它用于一切。不要依赖客户端代码，因为用户可以轻松修改它。

如果您保存开始时间，您就知道用户何时开始以及当前时间是什么。您可以使用它来查看时间是否到了。javascript 计时器可以很好地显示剩余时间，但它应该从数据库中获取该信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T07:09:38.723

您可能需要使用examId 字段和datetimeStarted 注册像active_exams 这样的表。然后将计时器加载为该考试自开始以来的秒数。

您可以使用 cookie、localStorage 甚至会话创建一些解决方法，但请记住，用户可以修改（或者至少在会话的情况下可以忘记）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-04T06:47:35.667

如果您在数据库中为特定用户保存了计时​​器的“开始时间”，则页面刷新并不重要。

从数据库中获取这个“开始时间”并计算它以获得消耗的时间，并相应地显示剩余或经过的时间。

# java - Jython：pythonic 等效于 java.util.concurrent.Callable？

> ID：11272192
> 
> 赞同：1
> 
> 时间：2012-06-30T07:04:50.133
> 
> 标签：java, python, jython, future, callable

我将一个简单的pythonic队列与一个pythonic Thread子类结合使用......

```
class WorkerThread( threading.Thread ):
  def __init__( self, *args, **kvargs ):
    threading.Thread.__init__( self, *args, **kvargs )
    self.input_queue = Queue()

  def send( self, item ):
    assert type( item ) is list
    assert item # i.e. must have at least one element
    # check that first item is callable
    assert hasattr( item[ 0 ], "__call__" )
    self.input_queue.put( item )

  def close( self ):
    self.input_queue.put( None )
    self.input_queue.join()

  def run( self ):
    while True:
      method_call_elements = self.input_queue.get()
      if method_call_elements is None: # "poison pill"
        break
      method_args = method_call_elements[ 1 : ]
      method_call_elements[ 0 ]( *method_args ) 
      self.input_queue.task_done()
    self.input_queue.task_done()
    return 
```

...所以你提交的是一个列表，其中的第一项是一个方法，可选的其他元素是你可能想要提供给该方法的任何参数。NB 不能在 Java 中做这种有趣的事情！

问题是：是否有一个简单的 Pythonic 方法从被调用的方法中返回一个值？在 Java 中，显然您可以使用 Callable 和 Future 接口。并且使用更多这样的 Java 类，我可以看到如何更改代码……我想确实有几种可能性。但我只是想知道 Python 是否有任何处理“未来”类型情况的规定？

顺便说一句，我查看了权威指南[http://www.jython.org/jythonbook/en/1.0/Concurrency.html](http://www.jython.org/jythonbook/en/1.0/Concurrency.html) - 但这似乎没有提供任何非 Java 解决方案

***之后：***

任何有兴趣的人，这是我面向 Java 的解决方案：

```
@property
def size( lmm_self ):
  class FindNodeMapSizeTask( Callable ):
    def call( self ):
      genLog.info( "thread %s - inside FindNodeMapSizeTask.call()", Thread.currentThread().id )
      return len( lmm_self.id_to_node_map )
  size_result = FutureTask( FindNodeMapSizeTask() )
  lmm_self.internal_ops_worker_thread.send([ size_result.run ])
  genLog.info( "thread %s - waiting for Future.get()...", Thread.currentThread().id )
  map_size = size_result.get()
  genLog.info( "thread %s - ... got Future.get(): %s", Thread.currentThread().id, map_size)
  return map_size 
```

典型输出：

线程 20 - 等待 Future.get()...

线程 21 - 在 FindNodeMapSizeTask.call() 内部

线程 20 - ...得到 Future.get(): 1121

树大小：1121

size_result.get() 会阻止 size(lmm_self) 的返回，直到 len(...) 传递其结果，即使在 def send() 中的 method_call_elements = self.input_queue.get() 之后放置了 sleep(1)。

工作正常，但当然使用 Java FutureTask。任何对此的pythonic解决方案都会引起我的兴趣......

***后来还是***

嗯...咨询我的 Beasley Python Essential Reference，我可以看到使用 threading.Event 沿着这些路线做某事的非常清晰的方法...

# php - 如何通过单击显示数组和按钮？

> ID：11272196
> 
> 赞同：-2
> 
> 时间：2012-06-30T07:05:25.637
> 
> 标签：php, javascript, jquery

我有一个带有按钮的简单表格：`<button class='btn btn-info' href='#'>More</button>`，我需要当用户单击“更多”按钮时，数组（例如 $records）和“更少”按钮将显示在“更多”按钮下。例如，`$records[0]="1", $records[1]="2"`。拜托，我不太了解 JavaScript 和 JQuery，但我需要使用 Ajax。所以，我非常需要你的帮助。谢谢你。

**更新：**

```
$("button.btn-info").click(function() {
    alert('click');
}); 
```

这是通过“更多按钮”单击的代码，但我不知道如何在此按钮下编写 $records 数组，最后带有“更少”按钮（将通过单击隐藏数组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:36:56.783

PHP（仅示例）：

```
<?php
   $records = array(1,2,3,4,5,6,7);
?> 
```

HTML：

```
<html>
<body>
<div id="more">
    <button>More</button>
</div>
<div id="less" style="display: none;">
    <div id="codes" style="border-top: 1px dotted #d0d0d0;">
        <?php
           for($i=0; $i<count($records); $i++) {
              printf("$records[%d] = %d<br />",$i,$records[$i]);
           }
        ?>
    </div>
</div>
</body>
</html>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JS：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var i = 1;
    $('div#more button').click(function() {
        $('div#less').toggle();
        if (i) { $(this).html('Less'); i=0; } else { $(this).html('More'); i=1; }
    });
});​
</script> 
```

PS 不要忘记包含 jQuery 插件，否则这将不起作用。

编辑：就是这样`jquery.min.js`

演示小提琴：http: [//jsfiddle.net/fe9wv/](http://jsfiddle.net/fe9wv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:42:08.370

您可以为此使用 Jquery，下面是一个粗略的示例假设：所有按钮都有一个 ID（通过 ajax 获取数据所需的）您拥有按钮的表格单元格，也有一个显示样式为隐藏和类为'数据跨度'

```
 $('.btn-info').live('click',function(){
           var id = $(this).attr('id');
           $.ajax({
                    type : "POST",
        url: "YOUR TARGET URL",
                    dataType : "HTML",//you can also use JSON
                    data     : 'id=' + id,
            success: function(data)
           {

                       $(this).siblings('.dataspan').html(data);
                       $(this).siblings('.dataspan').append('<button class="hidedata"  value="HIDE"/>');
                       $(this).siblings('.dataspan').show();
           }
    }); 
      });

//FOR hiding the data
$('.hidedata').live('click' , function(){
      $(this).siblings('.dataspan').hide();
}); 
```

请注意，根据最新的 JQuery 版本，.live 功能已被弃用，如果您使用的是最新版本，我强烈建议您切换到委托功能

# c# - 如何从 ARRAYLIST 中删除重复值

> ID：11272198
> 
> 赞同：0
> 
> 时间：2012-06-30T07:05:39.417
> 
> 标签：c#

我有一个数组列表，其中包含来自不同数据库的值，但它存储了一些重复值，因此，我想删除重复值并仅在数组列表中存储唯一值。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-30T07:45:39.737

让我们尝试另一种方法。而是删除重复项，避免添加任何重复项。这在您的环境中可能更有效。这是一个示例代码：

```
ArrayList<String> myList = new ArrayList<string>();
foreach (string aString in myList)
{
    if (!myList.Contains( aString ))
    {
        myList.Add(aString);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T07:15:51.120

您可以将 ArrayList 替换为[HashSet](http://msdn.microsoft.com/en-us/library/bb359438(v=vs.90).aspx)。从文档中：

```
The HashSet<T> class provides high performance set operations. A set is a collection that contains no duplicate elements, and whose elements are in no particular order. 
```

如果绝对有必要使用 ArrayList，您可以使用一些 Linq 通过[Distinct](http://msdn.microsoft.com/en-us/library/bb348436.aspx)命令删除重复项。

```
var distinctItems = arrayList.Distinct() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-12T09:30:40.197

您可以在使用 ArrayList 时使用此代码

```
ArrayList arrayList;
//Add some Members :)
arrayList.Add("ali");
arrayList.Add("hadi");
arrayList.Add("ali");

//Remove duplicates from array
  for (int i = 0; i < arrayList.Count; i++)
    {
       for (int j = i + 1; j < arrayList.Count ; j++)
           if (arrayList[i].ToString() == arrayList[j].ToString())
                 arrayList.Remove(arrayList[j]);
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T07:40:13.000

如果可以，您应该使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438%28v=vs.90%29.aspx)或任何其他集合类。这种操作效率更高。HashSet 的主要默认值是不保证元素的顺序与您的原始列表保持相同（这可能是也可能不是问题，具体取决于您的规范）。

否则，如果您需要保持顺序，但只需要在枚举值时删除重复项，则可以使用 linq 中的[Distinct](http://msdn.microsoft.com/en-us/library/bb348436%28v=vs.90%29.aspx)方法。请小心，不要在每次修改数组列表时运行此查询并复制结果，因为它可能会影响您的性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T09:08:18.960

```
 Hashtable ht = new Hashtable();
        foreach (string item in originalArray){
            //set a key in the hashtable for our arraylist value - leaving the hashtable value empty
            ht[item] = null;
        }

    //now grab the keys from that hashtable into another arraylist
    ArrayList distincArray = new ArrayList(ht.Keys); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-30T07:23:48.800

如果必须使用 ArrayList，请使用**Sort**方法。这是一个很好的链接[@Sort Method of ArrayList](http://msdn.microsoft.com/en-us/library/8k6e334t.aspx)。列表排序后，然后使用算法迭代/比较所有元素并删除重复项。

玩得开心，

汤米奎

# c# - 字典中用于检查键是否存在的逻辑

> ID：11272206
> 
> 赞同：0
> 
> 时间：2012-06-30T07:08:20.520
> 
> 标签：c#, algorithm, dictionary, logic

字典不能有两个具有相同键的值。请说明在确定密钥是否存在时使用了哪种逻辑/算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:13:32.077

Eric Lippert 在他的[博](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)文中彻底解释了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:14:45.297

Dictionary 的**ContainsKey**方法呢？

有很多方法可以检查密钥，但我认为这种方法是最优雅的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:11:53.113

简单把它放在try catch

如果键存在将保留在尝试中，否则如果不存在将进入捕获

```
Dictionary<string, int> dic = new Dictionary<string, int>();

string str = "";
try
{
   int a = dic["keytofind"];
   str = "Key Found";
}
catch(Exception)
{
   str = "Key Not Found";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:24:44.507

Trie 数据结构用于存储密钥。使用这种数据结构的好处： 1.节省存储空间。2\. 在 O(Log(n)+constant) 中，可以确定密钥是否存在的复杂度。

有关 trie 数据结构的更多详细信息，请参见[此处](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=usingTries)

# c - 对象之间的 Lua 引用

> ID：11272208
> 
> 赞同：0
> 
> 时间：2012-06-30T07:08:28.117
> 
> 标签：c, oop, garbage-collection, lua

我在 C 中实现了 Simple Lua 类。类的用法​​：

```
require("test")
function foo()
    local t1 = test()
    local t2 = test()
    t1:attach(t2)
    return t1
end
o = foo()
-- some code
o = nil 
```

附加功能：

```
int class_attach(lua_State *L)
{
    module_data_t *mod = luaL_checkudata(L, 1, "test");
    luaL_checktype(L, 2, LUA_TUSERDATA);
    module_data_t *child = lua_touserdata(L, 2);
    printf("%p->%p\n", (void *)mod, (void *)child);
    return 0;
} 
```

从函数 t2 返回后，对象被 gc 清理。有没有可能防止这种情况。在 t1 和 t2 对象之间设置引用？（仅在清理父模块（t1）后才调用 __gc 元方法（t2 对象））。

简单的方法是使用表：

```
function foo()
    ret = {}
    ret[1] = test()
    ret[2] = test()
    ret[1]:attach(ret[2])
    return ret
end 
```

但这不是有趣的方式。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:08:28.347

我过去也遇到过同样的问题。这样做的简单原因是 Lua 不知道 C 代码中建立的连接（现在还没有，但我想它会在某个地方完成）。

您不必使用表格方法，只需在 Lua 端链接两个对象/表格/任何内容：

```
function foo() 
    local t1 = test() 
    local t2 = test() 
    t1:attach(t2)
    t1._dummy_link = t2
    return t1 
end 
```

请记住，这仅适用于 1:1 的关系。对于更复杂的东西，您仍然必须使用某种表格或类似的方法。可能最干净的方法是在 Lua 端进行链接，并在 C 代码中添加一个回调，以防还有 C 代码要运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:12:33.890

您可以在 Lua 注册表中设置它。这实际上是一个只能在 C 代码中访问的全局表。你可以设置`registry[t1] = t2;`. 只要您在`t1`'s中适当地取消设置它`__gc`。这也可以扩展到`1:n`映射，例如您可以`registry[t1].insert(t2)`为多个“孩子”做的事情。

# javascript - Javascript - 等待网络工作者完成？

> ID：11272216
> 
> 赞同：1
> 
> 时间：2012-06-30T07:10:10.993
> 
> 标签：javascript, ajax, web-worker, topic-modeling

作为项目的一部分，我正在 javascript 中实现主题建模的[LDA算法。](http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation)单击按钮后，将调用执行 LDA 的函数。然而，由于这是一项非常繁重的任务，因此在调用该函数时浏览器会挂起大约 15 秒（即使在处理过程中加载动画 gif 也不起作用）。

所以我将该功能实现为[web worker](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html)。这解决了挂起问题，但现在加载动画会在几秒钟内消失，而结果会在 12-14 秒后显示。

有什么方法可以让加载器在处理过程中进行动画处理？我的意思是在加载动画消失之前等待网络工作者完成计算。

脚本被异步调用，加载器附加到 jQuery 的 ajax 事件中

```
$('#spinner').bind("ajaxSend", function() {
   $(this).show();
}).bind("ajaxComplete", function() {
   $(this).hide();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:51:51.147

在启动（重）工作逻辑之前激活微调器，并在工作器完成后禁用微调器：

```
var worker = new Worker('workerscript.js');
worker.onmessage = function(event) {
    // Do something with event.data, then hide the spinner.
    $('#spinner').hide();
};
$('#spinner').show();
worker.postMessage({args: ' foo bar '}); 
```

`workerscript.js`看起来像这样：

```
self.onmessage = function(event) {
    var results;
    // do something
    ...
    // Done:
    postMessage(results);
}; 
```

# javascript - 在表单提交之前获取上传图像的图像高度和宽度

> ID：11272218
> 
> 赞同：0
> 
> 时间：2012-06-30T07:10:19.843
> 
> 标签：javascript, image, dimension

**如何在表单提交之前**使用 jQuery 或 Javascript获取上传图像的高度和宽度？

```
<input type="file" /> 
```

我需要检查要上传的图像的宽度和高度是否等于选择的宽度和高度。我找到[了这个链接](http://jsfiddle.net/4N6D9/1/)。但它只适用于 FF 和 Chrome，不适用于 IE7 和 IE8。

谁能告诉我任何其他方法来获取尺寸以便它在所有浏览器中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:27:22.157

您可以创建一个图像对象，创建图像对象后，从显示要上传的图像的图像标签中获取图像，然后您可以按照前面写的方法获取图像的尺寸。

```
var v=new Image();
v.src=document.getElementById("up_img").getAttribute('src');
alert(v.width); 
```

请记住，您必须使用 Base64 方法来获取要在图像标签中显示的图像，我不知道 ie 是否支持它，但它是 Chrome、Firefox、Opera 中可用的 HTML5 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:20:34.793

出于安全考虑，IE9、IE8、IE7不支持访问客户端电脑上的文件；这就是为什么你没有得到任何宽度或高度的原因。您需要将图像上传到服务器上，然后将其显示到某个图像控件并获取高度和宽度。您可以设置`visibility:hidden`是否不希望图像可见。

鸟瞰图

一种方法是在上传时显示进度条，同时使用 Ajax 将文件保存到服务器上的临时文件夹中，并将图像名称作为临时 ID 并将 ID 存储在数据库中（以便稍后删除它) 然后将其显示在图像控件中。然后得到高度和宽度。

# java - 如何使用java创建可附加的excelsheet

> ID：11272221
> 
> 赞同：11
> 
> 时间：2012-06-30T07:10:58.287
> 
> 标签：java, excel, apache-poi, jxl

我想创建一个可附加的 excel 表。就像我有四列 stream1 stream2 stream3 stream4

第一次我只插入数据的第一列（stream1）之后我想一一填满其他列。

这是我正在使用的代码：

```
 public void createFile(Jqueue stream1, Jqueue stream2, Jqueue stream3, Jqueue stream4) {
    try {

        String filename = "path";
        boolean alreadyExists = (new File(filename)).exists();

        HSSFRow rowhead = sheet1.createRow((short) 0);
        rowhead.createCell((short) 0).setCellValue("Stream 1");
        rowhead.createCell((short) 1).setCellValue("Stream 2");
        rowhead.createCell((short) 2).setCellValue("Stream 3");
        rowhead.createCell((short) 3).setCellValue("Stream 4");

        int i = 1;
        while (!stream1.isEmpty()) {
            String urlstream1 = "";
            String urlstream2 = "";
            String urlstream3 = "";
            String urlstream4 = "";
            HSSFRow row = sheet1.createRow((short) i);
            try {
                if (stream1.size() > 0) {
                    urlstream1 = stream1.dequeue().toString();
                }
            } catch (Exception ex) {
            }
            try {
                if (stream2.size() > 0) {
                    urlstream2 = stream2.dequeue().toString();
                }
            } catch (Exception ex) {
            }
            try {
                if (stream3.size() > 0) {
                    urlstream3 = stream3.dequeue().toString();
                }
            } catch (Exception ex) {
            }
            try {
                if (stream4.size() > 0) {
                    urlstream4 = stream4.dequeue().toString();
                }
            } catch (Exception ex) {
            }
            row.createCell((short) 0).setCellValue(urlstream1);
            row.createCell((short) 1).setCellValue(urlstream2);
            row.createCell((short) 2).setCellValue(urlstream3);
            row.createCell((short) 3).setCellValue(urlstream4);
            i++;
        }

        FileOutputStream fileOut = new FileOutputStream(filename);
        hwb.write(fileOut);
        fileOut.close(); 
```

但这不是可附加的代码。它逐行插入数据。

thx 在先进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:55:01.687

我想你的代码稍作改动就可以了。

尝试更换

> 诠释 i = 1;

具有以下内容：

> int i = sheet1.getLastRowNum() + 1;

您还需要稍微更改读取和写入文件的实现。

# joomla - Joomla 将文件存储在数据库中

> ID：11272224
> 
> 赞同：0
> 
> 时间：2012-06-30T07:11:21.837
> 
> 标签：joomla

我正在使用 Joomla 2.5

我想将用户上传的内容（如图像或一般文件）存储在数据库中而不是服务器中。

默认情况下是否有任何现有设置可用于执行此操作？

注意：我对用户上传的文件感兴趣。Joomla 自己的文件可以保留在服务器上或数据库中，我都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:05:41.167

数据库不存储图像之类的东西，它存储的信息。图像等始终存储在服务器上。您唯一能做的就是将图像上传到服务器后，它会在数据库中存储有关它的信息，例如格式、尺寸等。使用诸如[Phoca Gallery](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery/3150)或[JoomGallery 之](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery/5481)类的画廊是个好主意。更多可以在[这里找到。](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery)

如果您正在寻找通用文件上传器，请随意使用我的[SWFUpload 组件](http://extensions.joomla.org/extensions/core-enhancements/file-management/21091)，该组件仅用于在管理后端上传，但它是一个非常简单的组件，因此如果您需要，可以轻松集成到其他组件中。

# java - SQL命令如何将值附加（插入）到数据库中

> ID：11272225
> 
> 赞同：0
> 
> 时间：2012-06-30T07:11:33.840
> 
> 标签：java, sql, insert, playframework-2.0

我的问题是如何在 sql 中将值插入 DB。我有一个可以有多个电子邮件的用户。如何将多封电子邮件插入一个对象？我不想将全新的用户对象添加到新行中。我只想更新新电子邮件并将其附加到数据库中现有用户的电子邮件字段中。

我这样做了：

```
JPA.em().createQuery
        ("insert into User (email) select (email) from User where USERNAME=? VALUES (?)")
        .setParameter(1, username).setParameter(2, email).executeUpdate(); 
```

但它不起作用，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:19:24.717

从数据库中获取用户，将其现有电子邮件与新值连接起来，然后保存用户。

JPA 使用实体并为您生成 SQL 查询。您通常只使用查询从数据库中获取实体。这些查询是 JPQL 查询，而不是 SQL 查询。

看起来您的架构未正确规范化。一个用户实体应该有许多电子邮件实体（OneToMany 关联），而不是将所有电子邮件塞入用户的单个 CLOB 字段中。这就是您可以从数据库中搜索和获取单个电子邮件的方式，如果您不需要它们，则可以在没有所有电子邮件的情况下获取用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:16:32.340

我不知道 JPA 但查询应该是

```
JPA.em().createQuery
        ("insert into User (email) select (email) from User where USERNAME=? VALUES (?)")
        .setParameter(1, username).setParameter(2, email).executeUpdate(); 
```

应该

```
JPA.em().createQuery("UPDATE User 
                      SET email =? 
                      WHERE USERNAME=? ")
                      .setParameter(1,email )
                      .setParameter(2,username)
                      .executeUpdate(); 
```

# xml - JAXB 枚举验证

> ID：11272232
> 
> 赞同：1
> 
> 时间：2012-06-30T07:13:27.007
> 
> 标签：xml, validation, enums, xsd, jaxb

如何在 JAXB 中使用 XSD 验证枚举值？`minOccurs = "0"`如果设置了错误的值但缺少值是好的（ ），我想抛出一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:52:35.380

它可以使用 XML Schema 中的类型限制和枚举来完成。[有关一些文档](http://msdn.microsoft.com/en-us/library/ms256219.aspx)，请参阅此链接

看一个代表性别的示例类型。

```
<xsd:simpleType name="gender">
  <xsd:restriction base="xs:string">
  <xsd:enumeration value="M"/>
  <xsd:enumeration value="F"/>
</xsd:restriction> 
```

JAXB 将生成这样的枚举：

```
@XmlType(name = "gender")
@XmlEnum
public enum Gender {

  M,
  F;

  public String value() {
    return name();
  }

  public static Gender fromValue(String v) {
    return valueOf(v);
  }

} 
```

并相应地验证您的输入。如果你`minOccurs="0"`在这样的类型的元素上使用，你应该得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:51:51.413

解决方案：

```
 SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = sf.newSchema(this.getClass().getClassLoader().getResource("XSD FILE UNDER WEB-INF/classes"));
    unmarshaller.setSchema(schema); 
```

# emacs - 如何在 Emacs 的 org-mode 中使公式变大？

> ID：11272236
> 
> 赞同：23
> 
> 时间：2012-06-30T07:14:11.293
> 
> 标签：emacs, latex, org-mode

我发现 Org-mode + LaTeX 是一个非常棒的工具。如何更改公式的比例？目前它对我来说太小了。我知道如何缩放 Emacs 字体 ( `C-x``+`)，但这不适用于 LaTeX 公式。

如何在 Org 模式下使 LaTeX 公式更大？

我已经厌倦了更改一些参数，但问题仍然存在。

感谢您的耐心等待！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-30T08:18:43.700

根据 [文档](http://orgmode.org/manual/Previewing-LaTeX-fragments.html#Previewing-LaTeX-fragments)

或者`(info "(org) Previewing LaTeX fragments")`

```
You can customize the variable `org-format-latex-options' to
influence some aspects of the preview. In particular, the `:scale'
(and for HTML export, `:html-scale') property can be used to
adjust the size of the preview images. 
```

快速 `C-h``v``org-format-latex-options``RET` 给我们：

```
org-format-latex-options is a variable defined in `org.el'.
Its value is (:foreground default :background default :scale 1.0 :html-foreground "Black" :html-background "Transparent" :html-scale 1.0 :matchers
             ("begin" "$1" "$" "$$" "\\(" "\\["))

Documentation:
Options for creating images from LaTeX fragments.
[snip]
:scale       a scaling factor for the size of the images, to get more pixels
[snip] 
```

例如，要将比例设置为`2.0`：

```
(setq org-format-latex-options (plist-put org-format-latex-options :scale 2.0)) 
```

# php - PHP mail() 显示为垃圾邮件

> ID：11272238
> 
> 赞同：-2
> 
> 时间：2012-06-30T07:14:37.863
> 
> 标签：php

这是我的注册电子邮件示例，它向用户发送电子邮件以激活他们的帐户。

```
//send activation email

$to      = $email;
$subject = "Activate your account!";
$headers = "From: Example.com\r\n";
$headers .= "CC: $email\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$server = "http://www.example.com";

ini_set("SMTP", $server);
$body = "<table style='border-top:1px solid #707070;border-bottom:1px solid #707070;margin-top:5px;'>";
$body .= "<tr><td colspan='2'><span style='font-family:arial;font-size:12px;color:#000000;'>Your login details are as follows; </span></td></tr>";
$body .= "<tr style='background-color:#f2f4f6;margin-bottom:5px;'><td>Username:</td><td>$username</td></tr>";
$body .= "<tr style='background-color:#f2f4f6;margin-bottom:5px;'><td>Password:</td><td>$password</td></tr></table>";
$body .= "<table><tr><td><span style='font-family:arial;font-size:12px;color:#000000;'>Follow the link:</span></td>";
$body .= "<td><a style='text-decoration:underline;font-family:arial;font-size:12px;color:#264971' href='http://www.example.com/activate.php?id=$lastid&code=$random'>http://www.example.com/activate.php?id=$lastid&code=$random</a></td>";
$body .= "</tr></table>";
$body .= "</body></html>";

//function to send email

if (mail($to, $subject, $body, $headers)) {} 
```

在测试用户注册时，激活电子邮件最终会出现在垃圾邮件文件夹中。我需要改变什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:30:48.810

这个 shd**工作**！

```
 <?
  $headers .= "Organization: Sender Organization\r\n";
  $headers .= "MIME-Version: 1.0\r\n";
  $headers .= "Content-type: text/plain; charset=iso-8859-1\r\n";
  $headers .= "X-Priority: 3\r\n";
  $headers .= "X-Mailer: PHP". phpversion() ."\r\n"
?> 
```

从[这里](http://www.velvetblues.com/web-development-blog/avoid-spam-filters-with-php-mail-emails/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:19:31.500

这对我来说看起来很正常。您的电子邮件显示为垃圾邮件的原因有很多（通常与电子邮件服务器和客户端的类型、接收到的垃圾邮件过滤引擎以及您的域/服务器的历史活动有关）。

使用经过身份验证的 SMTP 或 IMAP 服务器和可靠的提供商而不是匿名的本地 SMTP 服务器可能会获得更好的结果（因为它可能是未知的，或者对于大多数大型网络邮件提供商来说是不安全的）。

（几乎）永远不会被标记为垃圾邮件的唯一可靠方法是要求用户将您添加到他们的白名单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:25:14.797

使用 phpMailer smtp 方法既简单又好用。 [http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

或者您可以使用此代码，可能会对您有所帮助：

```
function email($to,$name,$subject,$message)
{
    $content='<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>'.$subject.'</title>
    </head>
    <body>
    '.$message.'
    </body>
    </html>';
    $smtp_server = "mailserver.domain.com";
    $port = 25;
    $mydomain = "domain.com";
    $username = "info@domain.com";
    $from = "From Name";
    $password = "myEmailPassword";
    $headers = "From: $from <info@domain.com>\r\n";
    $headers .= "To: $name <$to>\r\n";
    $headers .= "Reply-To: info@domain.com\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=UTF-8\r\n";
    $handle = fsockopen($smtp_server,$port);
    fputs($handle, "HELO $mydomain\r\n");
    fputs($handle, "AUTH LOGIN\r\n");
    fputs($handle, base64_encode($username)."\r\n");
    fputs($handle, base64_encode($password)."\r\n");
    fputs($handle, "MAIL FROM:<$username>\r\n");
    fputs($handle, "RCPT TO:<$to>\r\n");
    fputs($handle, "DATA\r\n");
    fputs($handle, "$headers \nSubject: $subject \n$content \r\n");
    fputs($handle, ".\r\n");
    fputs($handle, "QUIT\r\n");
} 
```

# jquery - 如何在淡出时添加加载器图像

> ID：11272244
> 
> 赞同：0
> 
> 时间：2012-06-30T07:15:40.370
> 
> 标签：jquery

如何在 jquery 中在淡出时添加加载器图像。我能够淡出，但我无法在淡出时添加加载图像

```
$(".form1,.form2").fadeOut(800).load('src','loader.jpg').fadeIn() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:49:25.167

您无法使用加载函数加载图像... jquery 中的加载函数将加载一个页面（类似于 iframe）；您可以在 src 中使用加载器图像创建图像标签并使用样式隐藏然后使用 like

```
<script>
$('.form1').fadeOut(800, function() {         
         $("#loader").show();      
  });

$('.form1').fadeIn(800, function() {
    $("#loader").hide();      
});
</script> 
```

也请访问链接，[http://jsfiddle.net/emVyb/](http://jsfiddle.net/emVyb/)

# javascript - 无法在 Javascript 中删除以前的数组

> ID：11272248
> 
> 赞同：0
> 
> 时间：2012-06-30T07:16:27.330
> 
> 标签：javascript

我将设计一个实时搜索引擎，从数据库中获取数组。当我运行此代码时，它会使用先前的结果给出当前结果。我想删除以前的结果。这是我的 Javascript 代码。

```
var searchTable=document.getElementById('searchResults');<br>
var tbody=searchTable.getElementsByTagName('tbody');
var queryResult=http.responseText;
var keyArray=queryResult.split("|");
keyArray.shift();
var arrayLength=keyArray.length;
//console.log(keyArray);
var y=document.getElementsByTagName('tbody')[0];
for(var i=0;i<arrayLength;i++) {
    var trEl=document.createElement("tr");
    var tdEl=document.createElement("td");
    var trtdEl=trEl.appendChild(tdEl);
    var textNode=document.createTextNode(keyArray[i]);
    trtdEl.appendChild(textNode);
    y.insertBefore(trEl,y.firstChild);
} 
```

请帮帮我。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:20:56.183

在`for`循环之前，您必须删除元素的所有子元素`y`。放这样的东西：

```
while (y.firstChild) y.removeChild(y.firstChild); 
```

# android - 如何在列表视图行之间提供背景或空间并避免android中的点击事件

> ID：11272250
> 
> 赞同：0
> 
> 时间：2012-06-30T07:16:35.473
> 
> 标签：android

如何在android中的一行列表视图之间提供空间或背景或分隔线。我已经在列表视图中实现了onitem单击。如果用户单击背景或空间或分隔线，如何避免背景的点击事件？有人能告诉我该怎么做? 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:23:56.357

使用 Android ListView 分隔符

```
<ListView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:id="@+id/cashItemsList"
     android:cacheColorHint="#00000000"
     android:divider="@drawable/list_divider" android:dividerHeight="1dp"></ListView> 
```

或者

[Android ListView 分隔符](https://stackoverflow.com/questions/3979218/android-listview-divider)

创建 res/drawable/divider.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape
  xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient android:startColor="#ffcdcdcd" android:endColor="#ffcdcdcd" android:angle="270.0" />
</shape> 
```

在 listview 项的 styles.xml 中，我添加了以下几行：

```
<item name="android:divider">@drawable/divider</item>
    <item name="android:dividerHeight">1dp</item> 
```

# javascript - Ajax 动态菜单 Ruby on Rails

> ID：11272251
> 
> 赞同：1
> 
> 时间：2012-06-30T07:16:38.203
> 
> 标签：javascript, ruby-on-rails, jquery

我正在实施一个类别和子类别。但是，它只使用了一个带有 gem 'awesome_nested_set' 的模型，所以当我单击我的第一个 collection_Select 时，它将处理我的 Ajax 并为我的控制器返回一个即时变量并获取第二个集合选择的类别。我差不多完成了，但我还有一个小问题。

1.  当我加载页面时，它给了我一个错误：“可能需要一个数组实例”。我知道为什么会这样，那是因为我在加载页面的时候，其实是加载了js，但是一开始，我并没有点击第一个collection_select。我无法从选择中获取值，我的控制器也无法从那里获取参数。

2.  我确实尝试不运行部分，但我的 Firebug 控制台显示为红色，但我看到它可以从第一个 collection_select 中获取参数。

这是我的[要点.gihub](https://gist.github.com/2995276)

提供了完整的代码，请指导我，我需要一些修改...

# android - 在 ubuntu 12.10 中制作 android 应用程序

> ID：11272253
> 
> 赞同：0
> 
> 时间：2012-06-30T07:17:07.653
> 
> 标签：android

我已经在 ubuntu 12.10 上安装了 eclipse juno。当我尝试制作一个简单的android项目时，它会制作这样一个项目：

```
package com.tanvi.alarm;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

在 res 文件夹中还有一个名为 menu 的新文件夹。在为项目提供选项时，我没有选择任何菜单选项。该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:22:40.523

这只是示例一项选项菜单的默认示例（在带有菜单按钮的手机/模拟器上打开）。如果您不需要任何选项菜单，只需删除菜单 res 文件夹和 onCreateOptionsMenu 方法。有关菜单的更多信息，请查看[菜单教程](http://developer.android.com/guide/topics/ui/menus.html)

# c# - 如何在c#中读取html表格

> ID：11272254
> 
> 赞同：2
> 
> 时间：2012-06-30T07:17:12.807
> 
> 标签：c#, asp.net

```
<table id="mytable" runat="server"> 
<thead>
    <tr>
        <td >
            </td>
                        <td>
                                    Minute
                                </td>
                                <td 
                                 Category Name
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td >
                                    10
                                </td>
                                <td>

                                </td>
                                <td>
                                    <span></span>
                                </td>
                            </tr>
                            <tr >
                                <td>
                                </td>
                                <td>
                                    15
                                </td>
                                <td>
                                    <span></span>
                                </td>
                            </tr>

</table> 
```

这是我的 html 表在这里我必须在 c# 中找到每行的第一个单元格第二个单元格第三个单元格数据我如何找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:20:37.440

您可以尝试[Html 敏捷包](http://htmlagilitypack.codeplex.com/)API 来解析 html 文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:38:06.080

一种选择是通过添加 id 和 runat=server 属性使单元格成为服务器控件，然后您可以作为 htmlcontrols 访问它们 - [http://msdn.microsoft.com/en-us/library/system.web.ui。 htmlcontrols.htmlcontrol.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.aspx)

然后，您可以使用中继器来生成每一行。然后为转发器的 ItemDataBound 事件创建一个方法 - [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)

这允许您最初从合适的数据源填充数据，如果您的数据源发生更改，您可以简单地将源重新绑定到转发器以使其更新。

如何查找跨度标签的示例：

```
<span id="span1" runat="server"></span> 
```

如上所述添加属性。

然后在中继器 ItemDataBound 方法内

```
e.Item.FindControl("span1")).innerText= "Hello John"; 
```

请注意使用 innerText 方法在 span 标签中添加内容。

您只需要将所需的特定元素制作成服务器控件。

# c# - P/Invoke 调用中的 AccessViolationException

> ID：11272256
> 
> 赞同：2
> 
> 时间：2012-06-30T07:17:27.670
> 
> 标签：c#, .net, c

我正在通过 P/Invoke 调用编写一个小型 zlib 包装器。它在 64 位目标（64 位 C# 构建，64 位 DLL）上完美运行，但在 32 位目标（32 位 C# 构建，32 位 DLL）上引发 AccessViolationException。

这是引发异常的 C# 签名和代码：

```
[DllImport(Program.UnmanagedDll, CallingConvention = CallingConvention.Cdecl)]
private static extern ZLibResult ZLibDecompress(byte[] inStream, uint inLength, byte[] outStream, ref uint outLength);

internal enum ZLibResult : byte {
        Success = 0,
        Failure = 1,
        InvalidLevel = 2,
        InputTooShort = 3
}

internal static ZLibResult Decompress(byte[] compressed, out byte[] data, uint dataLength) {
    var len = (uint) compressed.Length;
    fixed (byte* c = compressed) {
        var buffer = new byte[dataLength];
        ZLibResult result;
        fixed (byte* b = buffer) {
            result = ZLibDecompress(c, len, b, &dataLength);
        }
        if(result == ZLibResult.Success) {
            data = buffer;
            return result;
        }
        data = null;
        return result;
    }
} 
```

这是 C 代码（使用 MinGW-w64 编译）：

```
#include <stdint.h>
#include "zlib.h"

#define ZLibCompressSuccess         0
#define ZLibCompressFailure         1

__cdecl __declspec(dllexport) uint8_t ZLibDecompress(uint8_t* inStream, uint32_t inLength,
                                                     uint8_t* outStream, uint32_t* outLength)
{
    uLongf oL = (uLongf)*outLength;
    int result = uncompress(outStream, &oL, inStream, inLength);
    *outLength = (uint32_t)oL;
    if(result == Z_OK)
        return ZLibCompressSuccess;
    return ZLibCompressFailure;
} 
```

我已经查看了所有内容，但无法弄清楚为什么在 32 位版本而不是 64 位版本上会发生访问冲突。ZLibDecompress 在从 C 应用程序调用时可以很好地解压缩相同的流，但在从我的 C# 应用程序调用时会引发访问冲突。

有谁知道为什么会发生这种情况？

**编辑：** 更新了我的代码，仍然在 32 位版本上遇到访问冲突，但不是 64 位。

C#代码：

```
[DllImport(Program.UnmanagedDll, CallingConvention = CallingConvention.Cdecl)]
private static extern ZLibResult ZLibDecompress(
    [MarshalAs(UnmanagedType.LPArray)]byte[] inStream, uint inLength,
    [MarshalAs(UnmanagedType.LPArray)]byte[] outStream, ref uint outLength);

internal static ZLibResult Decompress(byte[] compressed, out byte[] data, uint dataLength) {
    var buffer = new byte[dataLength];
    var result = ZLibDecompress(compressed, (uint)compressed.Length, buffer, ref dataLength);
    if(result == ZLibResult.Success) {
        data = buffer;
        return result;
    }
    data = null;
    return result;
} 
```

C代码：

```
__declspec(dllexport) uint8_t __cdecl ZLibDecompress(uint8_t* inStream, uint32_t inLength,
                                 uint8_t* outStream, uint32_t* outLength) {
    uLongf oL = (uLongf)*outLength;
    int result = uncompress(outStream, &oL, inStream, inLength);
    *outLength = (uint32_t)oL;
    if(result == Z_OK)
        return ZLibCompressSuccess;
    return ZLibCompressFailure;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T09:42:10.667

```
 fixed (byte* b = buffer) {
        result = ZLibDecompress(c, len, b, &dataLength);
    } 
```

不，那行不通。*fixed*关键字提供了一种高度优化的方式来确保垃圾收集器移动对象不会造成麻烦。它不是通过固定对象来做到这一点（如文档所说），而是通过将`b`变量暴露给垃圾收集器来做到这一点。然后它会看到它引用缓冲区并更新`b`它何时移动的值`buffer`。

然而，在这种情况下这不起作用，值的副本*被*`b`传递给 ZlibDecompress()。垃圾收集器无法更新该副本。当 ZLibDecompress() 运行时发生 GC 时，结果会很差，本机代码将破坏垃圾收集堆的完整性，最终导致 AV。

您不能使用*fixed*，必须使用 GCHandle.Alloc() 固定缓冲区。

但也不要那样做，你帮助太多了。pinvoke marshaller 已经非常擅长在必要时固定对象。`instream`将and参数声明`outstream`为 byte[] 而不是 byte*。并直接传递数组而不做任何特别的事情。此外，`outlength`应该声明参数`ref int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:47:46.460

在 64 位中，只有一个适用于 Windows 的 ABI（没有 cdecl/stdcall），因此 32 位的问题似乎与调用约定有关。您的参数指针将进入错误的寄存器，并且本机函数访问了错误的内存区域。

要解决此问题：

1.  尝试注释掉本机函数中的行（看看它是否崩溃 - 是的，这不是调用约定）

2.  尝试使用调用约定“cdecl/stdcall”

3.  要检查所有内容，请尝试转储指针值并查看它们在本机/托管函数中是否一致。

编辑：

然后是指针的问题。您在 C# 中分配数组（因此它们驻留在托管堆中）。您必须使用“[MarshalAs(UnmanagedType.LPArray)]”属性对它们进行编组。

```
[DllImport(Program.UnmanagedDll, CallingConvention = CallingConvention.Cdecl)]
private static extern ZLibResult ZLibDecompress(
     [MarshalAs(UnmanagedType.LPArray)] byte[] inStream,
     uint inLength,
     [MarshalAs(UnmanagedType.LPArray)] byte[] outStream,
     ref UInt32 outLength); 
```

[In,Out] 修饰符也可能有帮助。

是的，正如汉斯所说，固定指针并且不允许它们被垃圾收集。

```
byte[] theStream = new byte[whateveyouneed];
// Pin down the byte array
GCHandle handle = GCHandle.Alloc(theStream, GCHandleType.Pinned); 
IntPtr address = handle.AddrOfPinnedObject(); 
```

然后将其作为 IntPtr 传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:40:25.223

实际问题是由 MinGW-w64 生成错误的 DLL 引起的。在构建 zlib 时，我一直在将 -ftree-vectorize 传递给 gcc，它正在生成 32 位 CLR 不喜欢的代码。使用不太激进的优化选项后，代码运行良好。

# ruby-on-rails - 如何扫描 url 以查找带有空格和特殊字符的特定字符串？

> ID：11272257
> 
> 赞同：0
> 
> 时间：2012-06-30T07:17:54.350
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在我的请求 URL 上使用 stringscanner 以获取用户当前选择的类别的名称，但我在处理空格和特殊字符时遇到了困难。

```
request.url.scan(/\?category=\w+/).to_s.gsub('?category=', '') 
```

URL 示例后跟结果

```
http://localhost:3000/search?category=dog&search=&utf8=%E2%9C%93 => ["dog"]
http://localhost:3000/search?category=dog.com&search=&utf8=%E2%9C%93 => ["dog"]
http://localhost:3000/search?category=dog+cat&search=&utf8=%E2%9C%93 => ["dog"] 
```

我正在尝试获取 ["dog"] ["dog.com"] 和 ["dog cat"]，但目前卡住了。有任何想法吗？

注意：考虑从类别中删除空格并用破折号替换它们作为多个空格可能是有问题的，但如果可以创建一个函数来统治它们，那就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:00:45.557

这是 Rails，你有理由不只是使用`params[:category]`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T07:27:16.417

如果您尝试提取参数，则可以使用[parse_query](http://apidock.com/rails/Rack/Utils/parse_query)：

```
uri = "http://localhost:3000/search?category=dog+cat&search=&utf8=%E2%9C%93"
result = Rack::Utils.parse_query(URI(uri).query) #=> {"category"=>"dog cat", "search"=>"", "utf8"=>"\xE2\x9C\x93"}
result["category"] #=> dog cat 
```

# java - 如果没有配置事务，会出现异常吗？

> ID：11272260
> 
> 赞同：0
> 
> 时间：2012-06-30T07:18:06.860
> 
> 标签：java, spring, hibernate, transactions

我正在使用 spring/hibernate 独立应用程序。如果我不配置交易，我会低于 excpetion。

```
Exception in thread "Thread-1" org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here 
```

在 spring/hibernate 集成应用程序中是否必须进行事务配置？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:25:56.007

基本上，是的。[休眠文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation)说：

> 数据库或系统事务边界始终是必需的。在数据库事务之外不能与数据库进行通信（这似乎使许多习惯于自动提交模式的开发人员感到困惑）。始终使用明确的事务边界，即使对于只读操作也是如此。根据您的隔离级别和数据库功能，这可能不是必需的，但如果您始终明确划分事务，则没有缺点。当然，单个数据库事务将比许多小型事务执行得更好，即使是读取数据也是如此。

# php - 如何在 html 中呈现多级 mysql 查询（codeIgniter）

> ID：11272261
> 
> 赞同：1
> 
> 时间：2012-06-30T07:18:07.280
> 
> 标签：php, mysql, html, codeigniter

这是mysql查询

```
SELECT * 
FROM users AS up
JOIN users AS u ON up.id = u.parent_id
JOIN users AS uc ON u.id = uc.parent_id
WHERE up.id =16 
```

这是视图文件中的输出

```
 <?php foreach($query->result() as $q): ?>
    <?php echo $q->id; ?>

    <?php endforeach; ?> 
```

mysql 结果给出了 3 个级别的结果，但在 html 中它只输出 1 个级别，并且是最后一个级别，但我需要在层次结构中呈现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:24:27.980

将您的查询更改为：

```
SELECT up.id AS id1, u.id AS id2, uc.id AS id3
FROM users AS up
JOIN users AS u  ON up.id =  u.parent_id
JOIN users AS uc ON  u.id = uc.parent_id
WHERE up.id = 16 
```

然后您可以访问三个级别`id1`：`id2`和`id3`：

```
<?php
  foreach($query->result() as $q) {
    echo $q->id1;
    echo $q->id2;
    echo $q->id3;
  }
?> 
```

# css - Clojure：用于 CSS 的 DSL

> ID：11272262
> 
> 赞同：12
> 
> 时间：2012-06-30T07:18:16.640
> 
> 标签：css, clojure

## 语境

CSS 缺少变量、函数等内容……

Clojure 非常适合编写 DSLS。

我目前已经在使用 Clojure+Ring+Compojure 作为后端；ClojureScript 用于编写 Javascript 以与 Google Closure 类进行交互。

我希望能够在 Clojure 中创建 CSS。

# 问题

有没有好的 Clojure DSL 来创建 CSS？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-04T09:49:45.003

我在这里参加聚会有点晚了，但你可能想去[Garden](https://github.com/noprompt/garden)结帐。它是一个“功能齐全”的 Clojure CSS DSL，内置支持单位运算、颜色操作、媒体查询等等。该项目相当活跃，问题通常会得到维护者（我！）的及时关注。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T12:27:09.433

查看[http://clojure-libraries.appspot.com/cat/Web+Server+Libraries](http://clojure-libraries.appspot.com/cat/Web+Server+Libraries)和[http://clojure.org/libraries](http://clojure.org/libraries)，看起来选项如下：

*   cssgen - [http://github.com/paraseba/cssgen](http://github.com/paraseba/cssgen)
*   clj 风格 - [https://github.com/rathwell/clj-style](https://github.com/rathwell/clj-style)
*   neman.css - [http://bitbucket.org/ksojat/neman/](http://bitbucket.org/ksojat/neman/)
*   加卡 - [https://github.com/briancarper/gaka](https://github.com/briancarper/gaka)

我没有使用过它们中的任何一个，但看起来你可能会用 cssgen 或 clj-style 获得最好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:26:38.490

可能是这些链接会帮助你

[http://www.vijaykiran.com/2012/01/11/web-application-development-with-clojure-part-1/](http://www.vijaykiran.com/2012/01/11/web-application-development-with-clojure-part-1/)

[http://clojure.org/libraries](http://clojure.org/libraries)

**Enlive** -Html 模板 **Enlive**是一个用于 Clojure 的基于选择器（à la CSS）的模板库，它有两部分：一个 HTML 文件和一个 clj 文件中某处的 deftemplate 表单。

**Sandbar** -html 会话等

# java - Hadoop的Reducer运行在哪台机器上

> ID：11272264
> 
> 赞同：3
> 
> 时间：2012-06-30T07:18:34.457
> 
> 标签：java, hadoop, mapreduce, hdfs, bigdata

如果我有一个 4 节点集群，其中 1 台机器是 namenode，其余 3 台机器是 datanodes，如果我将 reducer 的数量设置为 1，哪些数据节点将运行 reducer？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:32:37.923

namenode 和 datanode 是 HDFS 进程而不是 MapReduce。我假设您有 3 个任务跟踪器节点。其中一个将运行它。不能保证是哪一个。Hadoop 通常将计算移动到它需要的数据附近，但对于 reducer，它们从映射器而不是 HDFS 中提取数据。您可以说 Hadoop 会更喜欢负载较少且至少有一个 reduce 槽的节点。

# excel - 具有自动计算功能的 MS Word 表

> ID：11272266
> 
> 赞同：4
> 
> 时间：2012-06-30T07:18:39.870
> 
> 标签：excel, ms-word

我正在尝试在底部设置一个带有公式的表格，以获取上面单元格的总和。我试图在底部放置一个单元格公式，它工作正常。问题是当数据发生变化时它不会自动更新（您需要按 F9）。

另一个问题是添加到单元格的公式可能会通过按退格键被删除。

我试图为 MS Excel 复制单元格（因为 MS Excel 在其公式中具有自动更新功能），但在粘贴到 MS Word 时它不起作用。

有没有办法解决这个问题？比如创建宏，或者从 MS Excel 复制单元格的不同方式等。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:29:08.043

在**MS Word**中，“自动”与**MS Excel 中**的不同。在**MS Excel 中**，如果您更改值，带有公式的单元格会自动更新。**在MS Word**中情况并非如此。您必须选择该字段并按`F9`

我建议通过此链接

**主题**：计算 Word 表格中的总计和其他值

**链接**： http: [//office.microsoft.com/en-us/word-help/calculate-totals-and-other-values-in-a-word-table-HP005256736.aspx](http://office.microsoft.com/en-us/word-help/calculate-totals-and-other-values-in-a-word-table-HP005256736.aspx)

**从上面的链接引用**

> 注意: Word 将计算结果作为字段插入到您选择的单元格中。如果更改引用单元格中的值，则可以通过选择字段然后按 F9 来更新计算。
> 
> 注意：Microsoft Word 表格计算必须手动重新计算。考虑使用 Microsoft Excel 执行复杂的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-20T06:03:14.843

您知道有一种方法可以让 Excel 电子表格对象在任何单元格发生更改时自动重新计算所有单元格。在 Word 2013 中，当您双击插入的 excel 对象时，它将打开电子表格。从“公式”菜单中只需选择“计算选项”，然后选择“自动”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:38:39.433

MS Word 仅用于文字处理。您最好使用 excel 进行此类工作。
您可以在 Excel 中保留一个包含公式的表格。每当您想更改某些内容时，请在 excel 文件中进行更改，然后再次复制粘贴到 word 文件中。
我认为这是最方便的方式。

祝你好运......！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-02-17T12:35:56.537

每次我在 Word 表中插入新行时，我都可以更新最后一行中的总计，但不能更新一般总计，例如 =B62-C62-D62（这些列的总计）。我有 12 张这样的桌子（每月一张）。

我创建了一个宏来解决这个问题：

```
Dim X As Integer, Y As Integer, A As String

For Y = 1 To ActiveDocument.Tables.Count 'Walk through all tables
  X = ActiveDocument.Tables(Y).Rows.Count 'Get row number of last row
  A = Mid$(Str(X), 2) 'trim preceding space
  ActiveDocument.Tables(Y).Cell(X, 1).Formula Formula:="=B" & A & "-C" & A & "-D" & A
Next

ActiveDocument.Fields.Update 'Refresh totals 1st round
ActiveDocument.Fields.Update 'Refresh totals 2nd round 
```

然后将宏作为按钮放在快速访问工具栏中。

为我工作！

# blackberry - 从 json 格式的字符串转换为 json 对象的问题

> ID：11272275
> 
> 赞同：0
> 
> 时间：2012-06-30T07:20:50.200
> 
> 标签：blackberry, json

我有一个 web servlet，它返回一个 json，它作为 json 格式的字符串存储在我的 bb 移动应用程序中。

现在我想解析字符串以从中提取值......使用

```
JSONObject jsobject = new JSONObject(jsonString); 
```

返回错误：

> json 必须以 { 开头

我生成的 JSON 是这种格式

```
[
   {"LASTNAME":"akre","FIRSTNAME":"swapnil"},
   {"LASTNAME":"akre","FIRSTNAME":"swapnil"},
   {"LASTNAME":"akre","FIRSTNAME":"swapnil"}
] 
```

这是由 jsonlint.com 验证的正确格式....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:31:41.870

我假设你正在使用[这个库](http://www.json.org/java/index.html)。

您的 JSON 是一个数组，因此您必须使用`JSONArray`该类来解析它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:33:56.583

是的，json 必须以 开头`{`和结尾`}`，你可以做的就是把你的 json 数组放入 `{}`，这样它就会被正确解析。JsonLint 解析部分 json，这就是为什么它显示它是正确的。您可以尝试如下

是的，json 必须以 开头`{`和结尾`}`，你可以做的就是把你的 json 数组放入`{}`，这样它就会被正确地解析为 jsonobject。JsonLint 也解析了部分 json，这就是为什么它显示它是正确的

```
{
    "data": [
        {
            "LASTNAME": "akre",
            "FIRSTNAME": "swapnil"
        },
        {
            "LASTNAME": "akre",
            "FIRSTNAME": "swapnil"
        },
        {
            "LASTNAME": "akre",
            "FIRSTNAME": "swapnil"
        }
    ]
} 
```

# php - PHP：有效地创建大 HTML 表

> ID：11272278
> 
> 赞同：2
> 
> 时间：2012-06-30T07:21:36.780
> 
> 标签：php, mysql, object, foreach, html-table

我正在根据我的 MySQL 数据库中的某些信息制作一个 HTML 表。我需要从数据库中获取的表包含行（*rowid*、*rowname*）、列（*columnid*、*columnname*）和单元格数据的数据。一个表，将行和列中的 ID 链接在一起（*cellid*、*rowid*、*columnid*、*somedata*）。该表如下所示：

```
__________| column1  | column2  | column3  | ...
     row1 | somedata | somedata |          |
----------|----------|----------|----------|-----
     row2 | somedata |          | somedata |
----------|----------|----------|----------|-----
...       |          |          |          | 
```

我的方法是使用几个嵌套的 foreach 循环，如下所示：

```
$rows = new Rows();        //These objects are containers for objects
$columns = new Columns();  //that hold some of the database data. 
$alldata = new Alldata();  //MySQL queries within these objects are irrelevant, I think. They already get the relevant data

$count = count($alldata);

echo "<table>";
echo "<tr>";
echo "<td>&nbsp;</td>";

foreach ($columns->getColumns() as $column) {
    echo "<td>".$column->getColumnname()."</td>";
}

echo "</tr>";

foreach ($rows->getRows() as $row) {
    echo "<tr>";
    echo "<td>".$row->getRowname()."</td>";

    foreach ($columns->getColumns() as $column) {
        $last = 1;

        foreach ($alldata->getAlldata() as $data) {
            if ($data->getCID() == $column->getID() & $data->getRID() == $row->getID()) { //If the column has data the related to the row
                echo "<td>".$data->getSomedata()."</td>";
                break;
            }
            if ($last == $count) { //if loop couldn't find any entries, it prints an empty cell
                echo "<td>&nbsp;<td>";
            }
            $last++
        }
    }
    echo "</tr>";
}
echo "</table>"; 
```

暴力破解，当数据库中的任何表上有数百行数据并且我不喜欢这样时，显然这不是很有效的方法。**有什么想法可以提高效率吗？有没有更好的方法来创建我需要的表格？**

编辑：
思考这个问题一周终于给了我一些答案。就是这么简单！
我对我的*Column*对象类做了一些修改。以前，我的代码遍历了数据库中*celldata表上所有可能的条目。*现在*Column*对象获取一个 celldata 数组，*其中*columnid*匹配*，我可以仅使用该数据进行比较。

```
$rows = new Rows();
$columns = new Columns();

echo "<table>";
echo "<tr>";
echo "<td>&nbsp;</td>";

foreach ($columns->getColumns() as $column) {
    echo "<td>".$column->getColumnname()."</td>";
}

echo "</tr>";

foreach ($rows->getRows() as $row) {
    echo "<tr>";
    echo "<td>".$row->getRowname()."</td>";

    foreach ($columns->getColumns() as $column) {
        $last = 1;
        $count = count($column->getAlldata());

        foreach ($column->getAlldata() as $data) {
            if ($data->getCID() == $column->getID() & $data->getRID() == $row->getID()) {
                echo "<td>".$data->getSomedata()."</td>";
                break;
            }
            if ($last == $count) {
                echo "<td>&nbsp;<td>";
            }
            $last++
        }
    }
    echo "</tr>";
}
echo "</table>"; 
```

快得多，虽然仍然是暴力破解，但要处理的数据量更少。当然，现在的问题是*Column*对象可能会执行相当多的 MySQL 查询，具体取决于有多少*Column*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:42:36.180

`$alldata`如果您通过连接表并在查询中指定`ORDER BY`子句来确保从 MySQL 获取的数据正确排序：

```
SELECT   data.*
FROM     data RIGHT JOIN rows USING (rowid) RIGHT JOIN columns USING (columnid)
ORDER BY rowname, columnname; 
```

然后你只需要按顺序输出每个单元格：

```
echo '<table>';

echo '<thead>'
echo '<tr>';
echo '<th>&nbsp;</th>';
foreach ($columns->getColumns() as $column) {
    echo '<th scope="col">', htmlentities($column->getColumnname()), '</th>';
}
echo '</tr>';
echo '</thead>';

echo '<tbody>';
$data = $alldata->getAlldata();
foreach ($rows->getRows() as $row) {
    echo '<tr>';

    echo '<th scope="row">', htmlentities($row->getRowname()), '</th>';
    foreach ($columns->getColumns() as $column) {
        $d = each($data);
        echo '<td>', ($d ? htmlentities($d[1]->getSomedata()) : '&nbsp;'), '</td>';
    }

    echo '</tr>';
}
echo '</tbody>';

echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:26:46.467

解决此问题的最佳方法是重写查询`$alldata`，使其按照您想要的顺序，如 eggyal 建议的那样。如果由于某种原因你不能这样做，你可以`$alldata`在开始时迭代并从中创建一个正确索引的数组。像这样的东西：

```
$ordereddata = array();
foreach($alldata as $d) {
    $ordereddata[$d->getCID()][$d->getRID()] = $d->getSomedata();
} 
```

现在你可以`foreach($alldata)`用这个替换你的循环：

```
if(isset($ordereddata[$column->getID()][$row->getID()])) {
    echo "<td>{$ordereddata[$column->getID()][$row->getID()]}</td>";
} else {
    echo "<td>&nbsp;</td>";
} 
```

# iphone - 无法在文件夹中创建 plist 文件

> ID：11272284
> 
> 赞同：0
> 
> 时间：2012-06-30T07:22:46.123
> 
> 标签：iphone

我在方法中编写了这样的代码`Viewdidload`。但它不创建文件`.plist`。

我不知道代码是wi8还是错误。我必须在哪里写？

```
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory =  [paths objectAtIndex:0]; //2
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"data1.plist"]; //3
NSFileManager *fileManager = [NSFileManager defaultManager];

if ( ![fileManager fileExistsAtPath:path] ) {
    NSString *pathToSettingsInBundle = [[NSBundle mainBundle] 
    pathForResource:@"data1" ofType:@"plist"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:01:25.200

您刚刚创建了一条路径，您应该尝试将其加载到 NSDictionary 中。

```
NSDictionary* mydictionary = [ NSDictionary dictionaryWithContentsOfFile: pathToSettingsInBundle]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:17:53.983

在 if 块内添加第二行

```
[fileManager copyItemAtPath:pathToSettingsInBundle toPath:path error:&error]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T10:14:10.263

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 

NSString *documentsDirectory = [paths objectAtIndex:0]; 

plistpath = [[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:@"Product.plist"]]; 
```

接着

```
[array writeToFile:path atomically:YES]; 

[Whatever [Array or Dictionary] you want to Write in Plist] 
```

如果仍未创建 plist，则检查您的数组或字典是否必须为空。

# cobertura - 为什么 cobertura 将多模块 maven 项目中除一个模块之外的所有模块的代码覆盖率报告为零？

> ID：11272285
> 
> 赞同：0
> 
> 时间：2012-06-30T07:22:52.577
> 
> 标签：cobertura

我正在尝试使用 cobertura 为我们的多模块 maven 项目生成代码覆盖率报告。在我运行 mvn clean 然后运行 ​​mvn package 之后。然后，在我们运行 JUnit 测试的模块之一中，为该模块生成的覆盖率报告与预期的一样正确。但覆盖范围仅适用于少数包裹。并非所有包都包括在内。请记住，它是一个多模块项目，具有一个父 POM，每个子模块都有自己的 POM。我是否还应该在每个子 POM 中包含 cobertura maven 插件详细信息？

但是，在其他 /target/site/cobertura 目录中生成的单个模块特定覆盖率报告对于线路覆盖率和分支覆盖率都报告为零。

我是否在我的父 POM 中遗漏了什么？我没有对目录中的任何子 POM 进行任何更改。请让我知道如何使用 cobertura 为多模块 maven 项目生成代码覆盖率报告。

这是我的父 POM 的样子。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>cobertura-maven-plugin</artifactId>
    <version>2.5.1</version>
    <configuration>
        <formats>
            <format>html</format>
            <format>xml</format>
        </formats>
    </configuration>
    <inherited>true</inherited>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>cobertura</goal>
            </goals>
       </execution>
   </executions>
</plugin> 
```

...

```
<dependencies>
    <dependency>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>2.5.1</version>
        <type>plugin</type>
        <scope>package</scope>
    </dependency>
</dependencies> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T10:31:27.123

根据文档，作为构建的一部分运行的插件和作为报告的一部分运行的插件之间存在区别： [http ://maven.apache.org/guides/mini/guide-configuring-plugins.html](http://maven.apache.org/guides/mini/guide-configuring-plugins.html)

您使用“执行”表明您在“构建”下拥有插件，而显然它属于“报告”下 - 根据 cobertura 使用页面：http: [//mojo.codehaus.org/cobertura-maven-plugin/usage.html](http://mojo.codehaus.org/cobertura-maven-plugin/usage.html)

尝试从“build”中完全删除 cobertura 插件，而是将其放在“reporting”下：

```
<project>
    <!-- project stuff-->
    <build>
        <!-- build stuff -->
    </build>
    <reporting>
        <plugins>
            <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cobertura-maven-plugin</artifactId>
            <version>2.2</version>
                <configuration>
                    <formats>
                        <format>html</format>
                    </formats>
                </configuration>
            </plugin>
        </plugins>
    </reporting>
</project> 
```

然后运行它

```
mvn cobertura:cobertura 
```

或与

```
mvn site 
```

# c# - 如何使用 Drupal 将用 C# 编写的应用程序上传到网站上？

> ID：11272286
> 
> 赞同：-1
> 
> 时间：2012-06-30T07:22:55.313
> 
> 标签：c#, drupal-7

请回答 Dummies ;) ... Web 编程的绝对新手，尤其是 Drupal 的新手。我们有一些用 C# 编写的模块，可以访问 MySQL 中的数据库并在其上工作（它实际上是一个学生信息系统。我们有一些用 C# 创建的表单，学生可以通过该接口将他们的详细信息输入数据库，我们有桌面应用程序对这些数据起作用）。现在我们需要创建一个网站，以便学生可以通过互联网输入信息。我们不能用 PHP 重写整个模块，我们想用 Drupal 来创建网站。那么该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:00:31.723

不是真正的直接答案，而是您需要考虑的一些要点。这将有多复杂取决于您在 C# 代码和 Drupal 之间需要多少互操作性。

Drupal 是否需要使用用 C# 编写的表单才能在数据库中输入数据，或者是否可以直接从 PHP 完成数据输入（如，是否需要对 C# 表单中的数据进行任何验证或处理？ ?) 如果没有，似乎最简单的方法是在 Drupal 中构建一个页面，可以将数据直接输入 MySQL 数据库。

否则，让程序相互通信的最简单方法可能是将数据输出为另一种格式——例如 XML 或 JSON。（[这是一个使用 JSON 作为中间数据类型的人的类似问题](https://stackoverflow.com/questions/2709349/sending-data-from-a-php-script-to-a-c-sharp-applicaiton)）您可以让您的 PHP 表单在临时文件夹中创建一个 XML 文档，C# 程序每 X 分钟轮询此文件夹中的新文件并将它们用作输入其应用。

这实际上取决于您的工作流程——数据处理需要多快？数据流是流入/流出还是仅流入——即是否需要向用户返回一组结果？

# android - 如何在android中停止Intent服务

> ID：11272299
> 
> 赞同：2
> 
> 时间：2012-06-30T07:25:45.100
> 
> 标签：android, service

我创建了一项意向服务。现在我想停止该服务的活动如何停止该服务？我的代码是：

我的活动.java

```
@Override
public void onCreate(Bundle savedInstanceState) {

Intent intent = new Intent(this, myService.class);
intent.putExtra("myHand", new Messenger(this.myHand)); 
startService(intent);

} 
```

我的服务.java

```
public class myService extends IntentService {

@Override
protected void onHandleIntent(Intent intent) {

String signal = intent.getAction();
if (signal != null && signal.equals("stop")) {

stopSelf();

} else {
t.schedule(new TimerTask() {System.out.println("print")}, 0, 10000);

}

}
} 
```

单击按钮停止服务

```
Intent in = new Intent(this, myService.class);
in.setAction("stop");
stopService(in); 
```

谁能帮我停止服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T07:41:40.643

来自[IntentService的文档](http://developer.android.com/reference/android/app/IntentService.html)

> IntentService 是按需处理异步请求（表示为 Intent）的服务的基类。客户端通过 startService(Intent) 调用发送请求；**该服务根据需要启动，使用工作线程依次处理每个 Intent，并在工作结束时自行停止。**

换句话说，您不必停止`IntentService`- 当它没有更多工作要做时，它会自行终止。

**编辑：**

回顾你的代码，似乎你不想停止`IntentService`你想停止的`TimerTask`???

```
t.schedule(new TimerTask() {System.out.println("print")}, 0, 10000); 
```

我不知道是什么`t`，但我猜它是一个`Timer`. 如果是这种情况，它将自行运行`Thread`并尝试终止它`IntentService`是没有意义的 - 而是杀死它`Timer`。

另外，为什么要使用 an`IntentService`创建任何类型的对象来维护自己的执行线程？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T07:46:29.313

> 现在我想停止该服务的活动如何停止该服务？

`IntentService`停止自己，你不应该，你不能调用`stopSelf()`.

处理完所有请求后，将`IntentService`自行停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:42:06.400

据我所知，`IntentHandler`创建一个单独的新线程，完成它的工作，然后杀死自己。

所以我认为你不需要明确地停止它的活动。

# php - 检索 sqlite 表值

> ID：11272302
> 
> 赞同：0
> 
> 时间：2012-06-30T07:26:11.927
> 
> 标签：php, sqlite

只是一个我想问的知识问题：

例如，我有一个从 sqlite3 数据库中检索到的表：

```
ID     Name       Address      Email            Actions
1     Mary       Canada       Mary@yahoo.com    Modify
2     John       New York     John@gmail.com    Modify 
```

点击 Mary 等特定行上的操作（修改）后，会提示下一个网页修改记录。那么如何检索表值并将其带到下一个网页呢？

仅供参考，我目前正在使用 sqlite3 和 php。请告知是否有任何方法可以做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:37:10.803

如果我正确理解您的问题：

当您遍历结果集并创建 HTML 时，您需要将行 ID 添加到修改链接中，例如：

```
// Pass $id to the next page
<a href="page-to-modify.php?id=$id">Modify</a> 
```

$id 将是您数据库中的值，因此每行都会更改。

然后在“page-to-modify.php”上检索 $id，例如：

```
// ID to fetch from the database
$id = intval($_GET['id']); 
```

然后，您可以再次为此 ID 选择数据并填充您的编辑页面。

希望这可以帮助。

# android - apk 文件不显示在主屏幕上

> ID：11272303
> 
> 赞同：-1
> 
> 时间：2012-06-30T07:26:24.267
> 
> 标签：android, apk

我有一些示例项目。

当我在我的机器上运行它时，成功编译并在控制台上显示下面的消息，

```
[2012-06-30 12:44:03 - VoiceNotes] Uploading VoiceNotes.apk onto device 'HT96WKF01301'
[2012-06-30 12:44:03 - VoiceNotes] Installing VoiceNotes.apk...
[2012-06-30 12:44:06 - VoiceNotes] Success!
[2012-06-30 12:44:06 - VoiceNotes] \VoiceNotes\bin\VoiceNotes.apk installed on device
[2012-06-30 12:44:06 - VoiceNotes] Done! 
```

但在我的设备屏幕上找不到 apk 文件，

当我检查设置-> 应用程序-> 管理应用程序时，apk 文件就在那里。

它被定位在哪里以及如何在设备上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:35:30.907

为此，您必须在清单文件中提及 Launcher。

检查你的`AndroidManifest.xml`

```
<activity
   android:name=".YourMainActivityNameHere"
   android:label="@string/app_name">
       <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>
</activity> 
```

# java - 问题相关 hibetnate 获取“org.hibernate.PropertyValueException”非空属性引用空

> ID：11272305
> 
> 赞同：0
> 
> 时间：2012-06-30T07:26:34.933
> 
> 标签：java, hibernate, spring-mvc

我面临 org.hibernate.PropertyValueException 的问题：非空属性引用空值或瞬态值：com.master.model.AccountLoan.account。有两个表Accout和AccountLoan，下面是Account的表结构

帐户 -

```
 create table ACCOUNT
    (
      ac_id               INTEGER not null,
      ac_name               VARCHAR2(40) not null,
      ac_islocked           CHAR(1) not null
    ) 
```

下面是账户贷款的表格结构

AccountLoan--

```
 create table ACCOUNT_LOAN
    (
      al_id            INTEGER not null,
      al_ac_id         INTEGER not null,
      al_loanA   NUMBER(15,2),
      al_loanB   NUMBER(15,2)
      ) 
```

对于这两个表数据都是来自单个 jsp 的单个添加按钮单击。添加功能工作正常。账户贷款是可选的，如果用户不填写 LoanA 和 LoanB 字段，则账户贷款中没有记录，如果用户填写 LoanA 和 LoanB 字段，则记录插入到账户贷款表中。

**目标**

我想更新没有账户贷款的账户记录。当我更新账户记录时，抛出异常——org.hibernate.PropertyValueException：非空属性引用空值或瞬态值：com.master.model.AccountLoan.account。

下面是两个模型 java 文件。

```
import java.math.BigDecimal;

public class Account extends BaseM
{   
    private String name;            
    private Boolean isLocked;
    private AccountLoan accountLoan;

    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
      this.name = name;
    }

    public Boolean getIsLocked()
    {
        return isLocked;
    }

    public void setIsLocked(Boolean isLocked)
    {
        this.isLocked = isLocked;
    }

    public AccountLoan getAccountLoan()
    {
        return accountLoan;
    }

    public void setAccountLoan(AccountLoan accountLoan)
    {
        this.accountLoan = accountLoan;
    }

}

Account Loan model java file

import java.math.BigDecimal;

public class AccountLoan extends BaseM
{
    private BigDecimal loanA;   
    private BigDecimal loanB;   
         private Account account;

    public BigDecimal getloanA()
    {
        return loanA;
    }

    public void setloanA(BigDecimal loanA)
    {
        this.loanA= loanA;
    }

    public BigDecimal getloanB()
    {
        return loanB;
    }

    public void setLoanInterest(BigDecimal loanB)
    {
        this.loanB= loanB;
    }

         public Account getAccount()
    {
        return account;
    }
    public void setAccount(Account account)
    {
        this.account = account;
    }

}

Account.hbm.xml

<hibernate-mapping>
    <class name="com.master.model.Account" table="ACCOUNT" dynamic-update="true">
        <id name="id" column="AC_ID" type="long">
            <generator class="com.common.support.IdGenerator">
                <param name="sequence">ACID_SEQ</param>
            </generator>
        </id>                    
       <one-to-one name="accountLoan" class="com.master.model.AccountLoan" cascade="all"/>       

      <property name="name" column="AC_NAME" type="string" />       
      <property name="isLocked" column="AC_ISLOCKED" type="yes_no" />
</class>
</hibernate-mapping>

AccountLoan.hbm.xml

<hibernate-mapping>

    <class name="com.master.model.AccountLoan" table="ACCOUNT_LOAN" dynamic-update="true">
        <id name="id" column="AL_ID" type="long">
            <generator class="com.common.support.IdGenerator">
                <param name="sequence">ALID_SEQ</param>
            </generator>
        </id>

       <many-to-one name="account" class="com.master.model.Account" unique="true">
           <column name="AL_AC_ID" not-null="true" />
       </many-to-one>    

       <property name="loanA" column="AL_LOANA" type="big_decimal" /> 
       <property name="loanB" column="AL_LOANB" type="big_decimal" />

    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:40:40.940

首先，使您的映射看起来像[文档中描述的](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#assoc-bidirectional-121)那样。一对一需要一个 property-ref 属性。

然后，确保`AccountLoan.account`在要将 AccountLoan 附加到 Account 时初始化属性。初始化`Account.accountLoan`字段是不够的。

# continuous-integration - 如何更好地组织 Hudson 或 Jenkins 的工作？

> ID：11272312
> 
> 赞同：2
> 
> 时间：2012-06-30T07:27:19.500
> 
> 标签：continuous-integration, hudson, jenkins

简单地说：假设我的**.../hudson[jenkins].../jobs**目录下有 300 个不同类型的工作，并且我有 300 个目录，每个目录包含一个工作。我想根据他们的目的组织所有这些工作，我想知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:21:50.680

使用[来自 Cloudbees 的插件文件夹](https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Folders+Plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:51:25.957

Jenkins 允许您根据名称、个人选择等定义视图并包含作业。这些视图将在初始屏幕上显示为选项卡。

# string - 找到最短的子段

> ID：11272320
> 
> 赞同：2
> 
> 时间：2012-06-30T07:28:44.750
> 
> 标签：string, algorithm

我想知道我应该应用哪种算法。

他们是给定的句子和单词列表。我们必须找到包含单词列表中所有单词的第一个最短子段。

例如：

> 句子 - 这是我解决过的最好的问题

单词列表 -

> 是
> 
> 最好的
> 
> 这个

答案应该是：

> 这是最好的

如果有很多这样的子段，那么我们必须打印包含最少单词并且出现在句子中的第一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:50:27.847

这是我解决上述问题的方法。

**1** . 取2个指针头尾都指向0

现在移动头指针，直到头指针指向的单词是一个有效的关键字；现在将其标记为头部。

**2** . 现在移动尾指针，直到句子包含所有给定关键字至少一次；现在将其标记为尾巴。

这是包含所有有效关键字的第一个有效子段并计算它的长度

**3** . 现在检查头部的词频 - 如果它大于 1，现在将头部指针移动到句子中一个有效关键字的词，并且它包含词频为 1。

**4** . 现在检查是否所有关键字都存在 - 如果是，计算它的长度并将其存储为最小子段。

**5** . 如果它不包含所有有效关键字，现在移动尾部指针，直到找到所有关键字并计算其长度，如 (tail-head+1)；如果它大于最小一则忽略它。

**6** . 现在继续这个过程，直到给定句子的最后一个关键字

上述方法的复杂度为o(n)。

例如让我们采取这个句子

`Hi this is a funny world this is a good experience with this world`

我需要找到3个关键字

```
this
is
world 
```

首先考虑需要2个哈希表，现在将所有需要的关键字存储在所需的表中。

现在将 head 和 tail 作为 0 现在检查 hi 是一个有效的关键字，因为它不会移动 head

现在检查下一个关键字，即 this ，现在这是一个有效的关键字，所以计数 1 并将这个单词位置存储为 head 。所以现在 head 是 1

现在移动尾指针，所以下一个关键字是“是”，它是一个有效的，因此增加计数现在类似地检查一个有趣的关键字，因为它们不是有效的，因此将尾移动到世界

现在 world 是一个有效的，count 是 3，tail 是 4，只要 count == no of required keywords（在我们的例子中是 3），这意味着我们的段包含所有有效的关键字

现在它的长度是 (4-1+1)=4

现在检查头部单词的频率它是一个因此如果我们移动这个头部指针那么我们将不会得到一个有效的段

所以现在将尾指针移动到下一个单词 this 现在将 this 的频率从 1 更新为 2 并且计数器变为 4

所以现在我们可以移动我们的头指针现在移动到一个关键字现在更新计数器为 3 因为我们的段此时不会包含这个因为我们已经从这个关键字移动了头指针

现在再次计数为 3，因此再次计算它的长度为 4

所以检查 head 关键字的 freq 是否为 1 因此将尾指针移动到下一个关键字现在是关键字 freq 大于 1 因此现在移动 head 指针，直到我们得到一个有效关键字，其 freq 为 1 现在获得的关键字是 world 和 head 位置是5，尾部位置为 7，计数器为 3，因此计算长度为 7-5+1，即 3，因此这是我们迄今为止发现的最小长度

现在移动尾部，直到头部的关键字频率大于 1 现在我们的尾部最终变为 13

现在将头部从 5 移动到 6 计算它的长度，它变成 13-6+1 即 8 所以忽略它

现在进一步我们不能移动我们的尾巴，因此打印从 min_head 到 min_tail 的单词作为最终结果

在我们的例子中，答案是

这是世界

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:38:54.340

考虑以下简单的方法 -

为句子中的每个单词做一个字典映射（枚举）。喜欢 -

> this[1] is[2] the[3] best[4] problem[5] i[6] have[7] ever[8] 已解决[9]

假设所有都是句子中不同的单词。

现在，一次取一个单词，并记录该单词的最大值和最小值作为键。在这种情况下，它将分别是 4 和 1。返回限制范围内的字符串。

# php - cakephp 页面中的更多查询

> ID：11272322
> 
> 赞同：1
> 
> 时间：2012-06-30T07:29:01.740
> 
> 标签：php, cakephp, cakephp-model

我有一个问题，如果我想在我的页面中搜索： - 最后 10 个注册用户 - 最后 10 个登录用户 - 最后 10 个插入产品的用户

这些查询不止一个，在我的控制器中，我必须进行更多查询，并且每个查询都将其放入一个变量中，对吗？

类似的东西？

```
$first_query = $this->User->find ('all', array(
                    'conditions' => array(...)
            )); 
$second_query = $this->User->find ('all', array(
                    'conditions' => array(...)
            )); 
$third_query = $this->User->find ('all', array(
                    'conditions' => array(...)
            )); 
```

在我看来，我将使用变量`$first_query`, `$second_query`,`$third_query`

查询是正确的还是更好地划分控制器上的更多功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:16:59.153

不，你这样做的方式是“方式”。不过，您可能应该以不同的方式命名它们，因为变量不包含任何查询，但结果和“第一”、“第二”等对内容没有任何说明。我会打电话给他们`$lastRegisteredUsers`，`$lastLoggedInUsers`等等。

如果条件非常相似，例如如果您只想从一个类别或某个类别中选择用户，您可以将该条件存储在一个变量中并重用它，而不是复制粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:33:32.227

您可以在控制器的操作方法中使用以下代码： 您可以将模型关联映射到自身。这将为您返回预期的结果。

```
$this->User->bindModel(array('belongsTo' => array('LastRegUser' => 
                                                                  array(
                                                                        'className' => 'User',
                                                                        'foreignKey' => 'id',
                                                                        'conditions' => array(...)),
                                                  'LoggedInUser' => array(
                                                                        'className' => 'User',
                                                                        'foreignKey' => 'id',
                                                                        'conditions' => array(...)) ..... ))); 
```

然后您可以简单地使用以下代码来使用以下代码获取所有用户。

```
$users = $this->User->find('all'); 
```

# html - 使用文本缩进保持背景图像到位

> ID：11272325
> 
> 赞同：1
> 
> 时间：2012-06-30T07:29:18.787
> 
> 标签：html, css

我在 a 中有以下 html `<div>`：

```
<span class="footer-icons">
    <a href="#;" class="facebook" title="Facebook">Facebook</a>
    <a href="#;" class="twitter" title="Twitter">Twitter</a>
</span> 
```

还有我的 CSS：

```
#footer .footer-icons {
    float: right;
    margin-right: 10px;
}
#footer .footer-icons {
    text-indent: -9999px;
}
#footer .footer-icons .facebook {
    background: url("../images/new/footer-icons.png");
} 
```

这样做的问题`text-indent`是导致背景图像也移动。我将如何使它可以“转义文本”（例如，使用文本缩进：-9999px）并保持背景图像到位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:42:56.477

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/qdFNM/5/](http://jsfiddle.net/surendraVsingh/qdFNM/5/) **（更新）**

添加 display:inline-block 并为该 div 提供与图像相同的宽度和高度。

**CSS**

```
.footer-icons {
    margin-right: 10px;
}
.footer-icons {
    text-indent: -9999px;
}
.footer-icons .facebook {
    background: url("https://dl.dropbox.com/u/19982181/fab/fb.jpg") no-repeat left top ;
    width:20px; height:20px;
    display:inline-block;
}
.footer-icons .twitter {
    background: url("https://dl.dropbox.com/u/19982181/fab/tw.jpg") no-repeat left top ;
    display:inline-block;
    width:20px; height:20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:08:37.883

这是另一种方法，使用`<i>`，这是[Twitter 的 Bootstrap 文档](http://twitter.github.com/bootstrap/base-css.html#icons)为他们的图标建议的：

**注意**- 这是链接友好的。当然，`A`可以使用标签代替`i`. 但这也有效：

```
<div id="footer">
    <span class="footer-icons">
        <a href="#;" class="facebook" title="Facebook">
            <i class="facebook"></i>Facebook
        </a>
        <a href="#;" class="twitter" title="Twitter">
            <i class="twitter"></i>Twitter
        </a>
    </span>
</div> 
```

在 上`margin-right`，由于 jsFiddle 的`Result`标签覆盖妨碍了我，我移动了它。

```
#footer .footer-icons {
    float: right;
    margin-right: 100px;
    overflow: auto;
}
.footer-icons a {
    font-size: 0;
}
.footer-icons i {
    font-family: Georgia;
    font-size: 35px;
    padding: 0 0 0 35px;
    background-repeat: no-repeat;
    background-position: 0 0;
}
.footer-icons i.facebook {
    background-image: url(http://goo.gl/QrKCc);
}
.footer-icons i.twitter {
    background-image: url(http://goo.gl/QrKCc);
} 
```

[http://jsfiddle.net/userdude/qdFNM/10/](http://jsfiddle.net/userdude/qdFNM/10/)

* * *

***原始答案***

```
<div id="footer">
    <span class="footer-icons">
        <i class="facebook"></i>
        <a href="#;" class="facebook" title="Facebook">Facebook</a>
        <i class="twitter"></i>
        <a href="#;" class="twitter" title="Twitter">Twitter</a>
    </span>
</div>

#footer .footer-icons {
    float: right;
    margin-right: 10px;
    overflow: auto;
}
.footer-icons a {
    display: none;
}
.footer-icons i {
    font-size: 35px;
    padding: 0 0 0 35px;
    background-repeat: no-repeat;
    background-position: 0 0;
}
.footer-icons i.facebook {
    background-image: url(http://goo.gl/QrKCc);
}
.footer-icons i.twitter {
    background-image: url(http://goo.gl/QrKCc);
} 
```

[http://jsfiddle.net/userdude/qdFNM/4/](http://jsfiddle.net/userdude/qdFNM/4/)

# python - 为什么 Amazon S3 签名 URL 在本地有效，但在生产服务器上无效？

> ID：11272326
> 
> 赞同：4
> 
> 时间：2012-06-30T07:29:23.950
> 
> 标签：python, django, boto

我想知道是什么原因导致这个签名的 URL 方法在本地工作但不能在真实服务器中工作？

在本地它会产生一个在 12 秒后过期的 URL，但在服务器中它返回一个过期的 URL？

```
def s3_signed_url(file_path):
    import boto
    s3conn = boto.connect_s3(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
    bucket = s3conn.get_bucket(BUCKET_NAME, validate=False)
    key = bucket.new_key(file_path)
    signed_url = key.generate_url(expires_in=12)
    return signed_url

@never_cache
def enjoy_the_show(request, movie_id):
    m = get_object_or_404(Movie, pk=movie_id)
    iOS = is_ios_device(request)
    if (iOS is True):
        movie_path = m.m3u8_url
        movie_path = movie_path.replace('https://s3.amazonaws.com/domain.com','')
        signed_url = s3_signed_url(movie_path)
        return render_to_response('movies/enjoy_show_iOS.html', {'signed_url':signed_url,'movie': m,'is_logged_in':is_logged_in(request)},context_instance=RequestContext(request))
    else:
        return render_to_response('movies/enjoy_show.html', {'movie': m,'is_logged_in':is_logged_in(request)},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:21:05.860

问题解决了。这是一个时区问题。可以通过在两台服务器上正确配置时区和/或考虑时差来解决此问题。

# c# - 连续观察 sql 表中的特定值

> ID：11272327
> 
> 赞同：1
> 
> 时间：2012-06-30T07:30:12.633
> 
> 标签：c#, asp.net, sql-server

我正在尝试将本地计算机与我的 Web 应用程序连接。我需要从本地计算机获取一些数据并将其插入到我的在线表中。用户单击一个按钮并将一个新列添加到名为 request 的在线表中，该表具有“状态” new”一开始。我选择了 sql 依赖项，它作为 Windows 服务安装在本地机器上，它检查请求表中是否有任何新的插入。该服务从本地机器获取一些数据并将其发布到在线数据库并更改请求表中的状态字段为“已更新”。

现在我的问题是如何通知我的网站所需的数据已插入表中？我需要持续观察请求表，直到状态列中的值更改为更新。我可以去线程或计时器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:35:04.203

您可以在您的网站使用的实时数据库中编写一个 INSERT 触发器。

使用另一个表 RequestUpdates 并编写一个 INSERT 触发器，将值添加到实时数据库中的表 RequestUpdates 中。

设计您的网站以加载 RequestUpdates 表。并且当用户登录并查看请求时，将实时表中的状态更改为已查看。

这样，将显示下一次未查看的新请求。

# javascript - Javascript - 使用 cookie 存储整数

> ID：11272331
> 
> 赞同：1
> 
> 时间：2012-06-30T07:30:39.747
> 
> 标签：javascript, html, cookies

我正在尝试使用 cookie 来存储单个整数，因此当用户刷新页面时，我能够检索他们之前的数字（以阻止出现双倍的视频）。

实现这一目标的最低要求是什么？

```
var randomNumber = Math.floor((Math.random()*10)+1);

document.cookie=(randomNumber); 
```

设置 cookie：

```
document.cookie = 'mycookie=' + randomNumber + ";max-age=" + (300) + ";"; 
```

读取 cookie：

```
var cookie = document.cookie;

alert(decodeURIComponent(cookie)); 
```

cookie 包含其他一些随机内容，例如 push=1 和 mycookie。我应该在添加随机数之前将 cookie 设置为 null 吗？

至于获取 mycookie 的值，我只是将 cookie 分配给一个字符串并从中解析 mycookie 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:39:24.803

泰米尔语的评论很中肯。如果您希望超过最小 cookie 使用量，请使用这些 quirksmode 函数：

```
cookie_create = function (name,value,days) {
    var expires, date;

    if (days) {
        date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = "; expires="+date.toGMTString();
    }
    else expires = "";
    document.cookie = name+"="+value+expires+"; path=/";

expires = date = null;
};

cookie_read = function (name) {
    var nameEQ = name + "=",
    ca = document.cookie.split(';'),
    len = ca.length,
    i, c; 

    for(i = 0; i < len; ++i) {
        c = ca[i];
        while (c.charAt(0) === ' ') c = c.substring(1); //,c.length);
        if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length); //,c.length);
    }

nameEQ = name = ca = i = c = len = null;
return null;
};

cookie_erase = function (name){
    cookie_create(name,"",-1);
name = null;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:32:36.517

您可以使用[document.cookie](http://www.quirksmode.org/js/cookies.html)在 javascript 中读取/写入 cookie：

```
document.cookie = 'mycookie=' + randomNumber + '; path=/'; 
```

如果您希望 cookie 即使在用户关闭浏览器后仍然存在，您可以指定一个`expires`日期。

# iphone - 有没有使用在 2 个视图控制器之间传递数据整数的示例？

> ID：11272334
> 
> 赞同：1
> 
> 时间：2012-06-30T07:31:26.470
> 
> 标签：iphone, ios5, xcode4.3

我的数据只是数字，我想将它从 VC1 传递到 VC2 进行下一次计算，而不是在标签上显示。也许这不是使用下面的代码传递数据字符串的问题。但我不知道如何传递数字整数，例如`a = b x c`. 我想将它从 VC1 带到 VC2 以进行下一步计算，例如`a + d = e`. 我声明 a, b, c, d, e 在 .h 文件中是 int

这就是我用来传递字符串数据的方式。但是如何为整数做呢？

```
ProcessViewController *ProcessData = [[ProcessViewController alloc]initWithNibName:nil bundle:nil];        
self.processViewData = ProcessData;
processViewData.labelViewString = labelView.text; // pass to VC2
[self presentModalViewController:ProcessData animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:41:45.233

在第二个视图控制器的 .h 文件中，您需要添加一个属性：

```
@property (nonatomic) int someInt; 
```

并且显然在第二个 VC 的 .m 文件中综合了这个属性。

然后，一旦你初始化了 ProcessViewController，你就可以在第一个 VC 中设置它的属性：

```
processData.someInt = someOtherInt;
[self presentModalViewController]; 
```

编辑：请注意，如果需要，您也可以使用 NSNumber 属性（不确定在这种情况下为什么会这样做）。如果您这样做并且您没有使用 ARC，那么您还需要释放该财产。

# gcc - 为什么我的 lib 搜索路径不适用于 gcc 和 MinGW

> ID：11272339
> 
> 赞同：0
> 
> 时间：2012-06-30T07:32:08.387
> 
> 标签：gcc, linker, mingw, search-path

我正在尝试在 Windows 7 的 MinGW 下使用 gcc 编译示例

为什么会这样：

```
$ gcc -m32 -o cube.exe cube.o shader.o matrix.o window.o 
/c/dev/mixed/SDKs/Extracted/OpenGLESEmulatorv1.3.0/examples/OpenGLES_20/cube/libEGL.lib 
```

但这不会：

```
$ gcc -m32 -o cube.exe cube.o shader.o matrix.o window.o
-L/c/dev/mixed/SDKs/Extracted/OpenGLESEmulatorv1.3.0/examples/OpenGLES_20/cube 
-llibEGL.lib 
```

它失败了：

```
c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/bin/ld.exe: cannot find -llibEGL.lib
collect2.exe: error: ld returned 1 exit status 
```

-L 不应该添加正确的搜索路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:26:34.333

根据 MinGW 文档， -l 参数将 lib 添加到前面，将 .a 添加到末尾，或者只是将 .lib 添加到末尾。从末尾删除 .lib 可以编译。

# objective-c - popupovercontrol的uiviewtable中没有出现导航栏

> ID：11272340
> 
> 赞同：0
> 
> 时间：2012-06-30T07:32:09.713
> 
> 标签：objective-c, ios, cocoa-touch, ipad

我有 PopupoverControl，这个弹出窗口有 UIViewtablecontrol，其中一个 UITable 控件应该导航到另一个 UIViewtablecontrol 但它不导航这是第一个 uitableview 中的选择代码：

```
OpenFileViewController *openfileview = [[OpenFileViewController alloc] initWithNibName:@"OpenFileViewController" bundle:nil v_files:[self GetFiles] v_ui:parentview];
        UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:openfileview];
        [self.navigationController presentModalViewController:navController animated:YES]; 
```

在两个 uiviewtable 的 .xib 文件中，我启用了带导航栏的顶部栏，但它没有出现，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:00:08.033

不需要 new `navController`，试试这个：

```
[self.navigationController pushViewController:openfileview animated:YES]; 
```

**编辑**：

弹出框的根视图控制器应该是一个`UINavigationController`对象，所以在创建弹出框时试试这个：

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController: optionw];
UIPopoverController *optioandiaglog= [[UIPopoverController alloc] initWithContentViewController:navController]; 
```

# php - 简单的表单不会重定向到电子邮件中的给定操作

> ID：11272345
> 
> 赞同：0
> 
> 时间：2012-06-30T07:32:53.170
> 
> 标签：php, email

我想要达到的目标：

我有一个简单的 html 表单，我通过 phpmailer 发送了该表单，并且电子邮件已成功发送。但问题是当我点击电子邮件中的提交按钮时，表单没有重定向到任何地方，没有显示任何警报等。

形式是：

```
<table align='center' width='630' border='0' cellspacing='0' cellpadding='4' style="border-collapse:collapse;">
    <form action='http://www.example.com/users/mailing/mail_layout/post_buyer_form_mail.php' name="dataform" method='post'>
        <tr>
            <td  colspan="2" align='left'><label style='font-weight:bold;font-family:Arial;font-size:12px;'>Product you are looking to By :</label><br />
                <input style='font-size:11px;color:#666;padding:3px;' name='pb_title' size='120' />
            </td>
        </tr>
        <tr>
            <td colspan="2" align='left' valign='top'><label style='font-weight:bold;font-family:Arial;font-size:12px;'>Describe your Buying Requirements in details :</label><br />
                <textarea name="pb_requirement" style='font-size:11px;color:#666;padding:3px;resize:none;' cols="86" rows="5"></textarea>
            </td>
        </tr>
        <tr>
            <td><input type="submit" name="submit" value="submit"/>
            </td>
        </tr>
    </form>
</table> 
```

无法理解问题出在哪里，这是我第一次将完整的表格发送到电子邮件并重定向它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:49:08.227

尝试将表单标签放在表格标签周围，看看是否有帮助。

```
<form...>
  <table>
  ...
  </table>
</form> 
```

希望有帮助

# d - 无法编译一些简单的 D 代码

> ID：11272347
> 
> 赞同：3
> 
> 时间：2012-06-30T07:33:12.630
> 
> 标签：d

我正在编译一些简单的代码：

```
import std.c.time;
.
.
.
timespec zero;
nanosleep(&zero, null);
.
.
. 
```

我得到的是：

```
Error: undefined identifier timespec
Error: undefined identifier nanosleep 
```

`std.c.time`只是 C 的捷径`time.h`。如果我调用中定义的其他函数`time.h`，比如说`clock()`，没关系。如果我用 C 编写类似的代码（带`nanosleep()`），没关系。在`time.h`我看到`timespec`并且`nanosleep`声明被放在了一些下`#ifdef`，可能它与我的问题有关吗？

我怎样才能让它编译？

我的工作环境是：dmd v2.059 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T08:01:27.837

`timespec`并且`nanosleep`在 C99 标准中被提及 0 次。它不是标准 C 的一部分，无法在标准`time.h`文件中找到，因此无法在`std.c.time`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T11:15:08.017

正如 nightcracker right 所指出的，`nanosleep()`它不属于 C99 标准，但它属于 POSIX，因此，所需要的只是`import core.sys.posix.time;`. 一个普遍的结论，搜索 D 库/接口。

# r - igraph 轴 xlim ylim 绘图不正确

> ID：11272349
> 
> 赞同：8
> 
> 时间：2012-06-30T07:33:19.827
> 
> 标签：r, plot, igraph

如果我制作图表`g`：

```
g <- read.table(text="

 A  B   W

 1  55  3
 2  55  5
 3  99  6 ",header=TRUE)

library(igraph)
g <- graph.data.frame(g) 
```

和坐标矩阵：

```
y<-1:5
x<-c(0.1,0.1,0.2,0.2,0.8)
l<-data.frame(x,y)
l<-as.matrix(l) 
```

我可以根据自定义坐标和绘图轴绘制带有节点位置的图形。

```
plot(g,layout=l,rescale=F,axes=TRUE,ylim=c(0,6),xlim=c(0,1)) 
```

![带有错误轴的图形](../Images/a0e3a7c3df5ecbf8835af7e7b572980c.png)

但是 xaxis 限制不能正常工作，我认为会被 yaxis 限制改变。如何控制我想要的 xaxis，例如将其保持在 0 和 1 之间。

IE `plot(x,y,xlim=c(0,1),ylim=c(0,6))`

这是一个错误吗？如果是并且无法解决，是否还有另一个具有相同功能的软件包？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T10:29:43.717

简短的回答是，您需要将`asp`调用的参数设置为 plot`0`为默认值`asp = 1`，它会产生您看到的行为（即，它不是错误，而是功能）。带有解释的长答案如下。

* * *

正如您正确注意到的那样，`xaxis`根据`yaxis`. 具体来说，x 轴的高数和低数之间的距离与 大致相同`yaxis`：

*   如果`yaxis = c(0,6)`，则 x 轴从 -3 变为 4。`6 - 0 = 6`并且`4 - (-3) = 7`
*   如果`yaxis = c(0,3)`，则 x 轴从 -1 变为 2。`3 - 0 = 2 - (-1) = 3`

Igraph 似乎在轴之间保持恒定的比率。

如果你调用`?plot.igraph`（使用`igraph`对象调用的绘图函数，也可以通过 找到`help(package = "igraph")`），你会在下面找到`See Also`：

> `igraph.plotting`有关绘图参数的详细说明

如果您单击此链接（或调用`?igraph.plotting`）并查看参数，您会发现：

> `asp`一个数字常数，它给出了绘图的 asp 参数，即纵横比。如果您不想提供纵横比，请在此处提供 0。
> 它被 tkplot 和 rglplot 忽略。
> 
> 默认为 1。

因此 aspect 参数`asp`默认为`1`igraph 中。如果您想要另一个比率，请将其设置为`0`：

```
plot(g,layout=l,rescale=F,axes=TRUE,ylim=c(0,6),xlim=c(0,1), asp = 0) 
```

这回答了你的问题。但是，请注意，这些点现在相当大。您可能想要使用以下参数（可在 上找到，`?igraph.plotting`但请注意，许多参数需要`vertex.`像我所做的那样加上前缀）：

*   `vertex.size` 默认为 15，5 似乎更好
*   `vertex.label.cex`默认为 1，0.8 似乎更好。

以下产生了一个更好的情节：

`plot(g,layout=l,rescale=F,axes=TRUE,ylim=c(0,6),xlim=c(0,1), asp = 0, vertex.size = 5, vertex.label.cex = 0.8)`

![更好的情节](../Images/a7bc94660d650543093b9f093496defb.png)

# vb.net - setadded 语句中的错误

> ID：11272350
> 
> 赞同：0
> 
> 时间：2012-06-30T07:33:27.723
> 
> 标签：vb.net

下面的代码 dr.SetAdded() 语句给出了这样的错误：

“setadded 和 setmodified 只能在 datarowstate 不变的数据行上调用” 现在该怎么办？

```
 dBindSet.AcceptChanges()

         For Each dt As DataTable In dBindSet.Tables

   BindingContext(dt).EndCurrentEdit()

          For Each dr As DataRow In dt.Rows

                    dr.SetAdded()

                    dr.Item("CREATEDON") = strServerDate
                    dr.Item("CREATEDBY") = iUserID

                 Next
            Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:56:49.350

方法`SetAdded`更改`RowState` 为已添加。在 OP 中，您正在更新字段，因此您不必调用此方法。

如果您想调用此方法，请检查`RowState`.

```
For Each dr As DataRow In dt.Rows
   If dr.RowState=DataRowstate.Unchanged Then
      dr.SetAdded()
   End If
   dr.Item("CREATEDON") = strServerDate
   dr.Item("CREATEDBY") = iUserID
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:09:53.057

如果我理解正确，您需要在表中已更改或插入的每一行中设置数据表的“CREATEDON”和“CREATEDBY”字段。如果是这种情况，您不应该调用`AcceptChanges`，因为这会将`RowState`每个 DataRow 的属性重置为`Unchanged`并且您将无法处理更改的行（并且数据库更新将失败）

```
' Don't call this, you will loose the RowState info....
'dBindSet.AcceptChanges()
For Each dt As DataTable In dBindSet.Tables
    ' Not really needed here. It serves to update the UI. 
    'BindingContext(dt).EndCurrentEdit()
    For Each dr As DataRow In dt.Rows
        if(dr.RowState = DataRowState.Added OrElse dr.RowState = DataRowState.Modified then            
            dr.Item("CREATEDON") = strServerDate
            dr.Item("CREATEDBY") = iUserID
        end if
    Next
Next 
```

# ios - 来自IOS的Facebook帖子不起作用

> ID：11272359
> 
> 赞同：1
> 
> 时间：2012-06-30T07:36:20.760
> 
> 标签：ios, facebook, facebook-graph-api, facebook-wall

我正在尝试将我的 IOS 应用程序中的某些内容发布到 Facebook 提要。以下是我在代码中包含的测试。

```
Facebook *facebook = [[Facebook alloc] initWithAppId:FB_APPID_REMOTE andDelegate:self];

// Create the parameters dictionary that will keep the data that will be posted.
NSMutableDictionary *fbParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"My test app", @"name",
                               @"http://www.google.com", @"link",
                               @"FBTestApp app for iPhone!", @"caption",
                               @"This is a description of my app", @"description",
                               @"Hello!\n\nThis is a test message\nfrom my test iPhone app!", @"message",              
                               nil];
[facebook requestWithGraphPath:@"me/feed" andParams:fbParams andHttpMethod:@"POST" andDelegate:self]; 
```

但是，我没有看到帖子更新到我的 Facebook 提要。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:28:43.760

使用`AppDelegate`将导致返回到`View`您从`ViewController`. 但是由于您没有收到任何明显的错误日志或崩溃，我认为这是`Facebook graph protocol`.

替换`"me/feed"`为`"feed"`对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:54:44.680

该方法`requestWithGraphPath`返回一个对象`FBRequest`。因此，您可以检查`request.state`以确定请求的状态，并检查`request.error`到底是什么问题。

# android - Android MAC 地址上的 BUG 或正常行为？

> ID：11272361
> 
> 赞同：1
> 
> 时间：2012-06-30T07:36:39.510
> 
> 标签：android, android-wifi

我正在尝试获取 Wifi 的 MAC 地址、BSSID 和 LINK_speed。我注意到即使 Wifi 关闭，所有三个都显示有值。我关闭手机然后再打开，但没有打开wifi。该应用程序在对这三个项目进行任何询问时崩溃，我无法尝试/捕获错误。如果我打开wifi然后关闭我可以询问项目并且应用程序运行良好。它就像 BSSID 和 LINKSPEED 真的是'LAST'BSSID 和'LAST'LINKSPEED。开机后对MAC地址视而不见，但没有打开wifi正常行为？有没有办法捕获错误以防止应用程序强制关闭？

```
 WifiManager wifi;
    wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
    WifiInfo wifiInfo = wifi.getConnectionInfo();
    int ipAddress = wifiInfo.getIpAddress();
    ipAddress = wifiInfo.getIpAddress();
    //above work no matter whether wifi on or off before

    String BSSID=wifiInfo.getBSSID();  //<<<<< ERRORS FORCE CLOSE IF NOT EVER CONNECTED
    int WifiLinkSpeed=wifiInfo.getLinkSpeed(); printi("link speed",WifiLinkSpeed);  
    String MacAddress=wifiInfo.getMacAddress(); Log.e("MAC address",MacAddress);
    //All three of these FORCE close if WIFI has never been turn on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:59:44.713

试试这个，

```
WifiManager wifiManager = (WifiManager) Settings.cntxt.getSystemService(Context.WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
strMacAddr = wifiInfo.getMacAddress();
if(strMacAddr==null) {
    strMacAddr = "Unknown MAC";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:44:01.780

尽管您确实说过您尝试过 try/catch ...您正在捕获哪些错误/异常？显然不是正确的。

自从我进行任何 Android 编程以来已经有一段时间了，但这就是问题的症结所在……弄清楚当您尝试这些功能时会触发哪个异常。

```
try {
    // don't declare variables inside block, you'll limit scope
    BSSID=wifiInfo.getBSSID();  //<<<<< ERRORS FORCE CLOSE IF NOT EVER CONNECTED
    WifiLinkSpeed=wifiInfo.getLinkSpeed(); printi("link speed",WifiLinkSpeed);  
    MacAddress=wifiInfo.getMacAddress(); Log.e("MAC address",MacAddress);
    //All three of these FORCE close if WIFI has never been turn on
}
catch { /* something bad happened, handle it */ }
// continue on since all is good in the world today... 
```

# java - 方法中的局部变量类型错误

> ID：11272363
> 
> 赞同：4
> 
> 时间：2012-06-30T07:36:56.810
> 
> 标签：java, bytecode, java-bytecode-asm

我正在使用 ASM 4 动态生成一些类。一切都很顺利，直到我开始生成代码来进行异常处理。生成的字节码在底部。这是我得到的错误：

```
java.lang.VerifyError: Instruction type does not match stack map in method some.eval.ToEvaluate$0.apply()Ljava/lang/Object; at offset 44
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getConstructor0(Class.java:2714)
at java.lang.Class.newInstance0(Class.java:343)
at java.lang.Class.newInstance(Class.java:325)
    ... 
```

这是字节码：

```
// Compiled from com/pkg/some/Source.java (version 1.7 : 51.0, super bit)
public class some.eval.ToEvaluate$0 extends com.pkg.lang.Lambda0 {

  // Method descriptor #7 ()V
  // Stack: 1, Locals: 1
  public ToEvaluate$0();
    0  aload_0 [this]
    1  invokespecial com.pkg.lang.Lambda0() [9]
    4  return
      Line numbers:
        [pc: 0, line: 1]
        [pc: 0, line: 2]
        [pc: 4, line: 3]
      Local variable table:
        [pc: 0, pc: 5] local: this index: 0 type: new some.eval.ToEvaluate(){}

  // Method descriptor #13 ()Ljava/lang/Object;
  // Stack: 5, Locals: 3
  public java.lang.Object apply();
     0  getstatic com.pkg.some.Primitives.equal : com.pkg.lang.Lambda [19]
     3  checkcast com.pkg.lang.Lambda2 [21]
     6  getstatic com.pkg.some.Primitives.divide : com.pkg.lang.Lambda [26]
     9  checkcast com.pkg.lang.Lambda2 [21]
    12  ldc2_w <Long 1> [27]
    15  invokestatic java.lang.Long.valueOf(long) : java.lang.Long [34]
    18  ldc2_w <Long 0> [35]
    21  invokestatic java.lang.Long.valueOf(long) : java.lang.Long [34]
    24  invokevirtual com.pkg.lang.Lambda2.apply(java.lang.Object, java.lang.Object) : java.lang.Object [39]
    27  astore_1 [v1]
    28  goto 44
    31  astore_2 [e]
    32  new some.lambda.ToRun$1 [41]
    35  dup
    36  invokespecial some.lambda.ToRun$1() [42]
    39  aload_2 [e]
    40  invokevirtual com.pkg.lang.Lambda1.apply(java.lang.Object) : java.lang.Object [47]
    43  astore_1
    44  ldc2_w <Long -1> [48]
    47  invokestatic java.lang.Long.valueOf(long) : java.lang.Long [34]
    50  invokevirtual com.pkg.lang.Lambda2.apply(java.lang.Object, java.lang.Object) : java.lang.Object [39]
    53  areturn
      Exception Table:
        [pc: 6, pc: 28] -> 31 when : java.lang.Throwable
      Line numbers:
        [pc: 6, line: 50]
        [pc: 12, line: 21]
        [pc: 18, line: 21]
        [pc: 31, line: 51]
        [pc: 32, line: 52]
        [pc: 44, line: 54]
        [pc: 44, line: 21]
      Local variable table:
        [pc: 0, pc: 54] local: this index: 0 type: new some.eval.ToEvaluate(){}
        [pc: 28, pc: 31] local: v1 index: 1 type: java.lang.Object
        [pc: 32, pc: 44] local: e index: 2 type: java.lang.Throwable
        [pc: 44, pc: 44] local: v2 index: 1 type: java.lang.Object
      Stack map table: number of frames 2
        [pc: 31, same_locals_1_stack_item, stack: {java.lang.Throwable}]
        [pc: 44, full, stack: {com.pkg.lang.Lambda2}, locals: {some.eval.ToEvaluate$0, java.lang.Object}]
} 
```

我使用 ASMifier 开始：

```
public static Object trycatch(Object test, Lambda1 handler) {
    Object v;
    try {
        v = test;
    } catch (Throwable e) {
        v = handler.apply(e);
    }
    return v;
} 
```

但后来我不得不修改它以使其通用。这是生成 try/catch 部分的代码：

```
 int varOffset = context.getVarOffset();

    Label l0 = new Label();
    Label l1 = new Label();
    Label l2 = new Label();
    Label l3 = new Label();
    Label l4 = new Label();
    Label l5 = new Label();

    // mv.visitLocalVariable("v", "Ljava/lang/Object;", null, l1, l2, 2); // 2 == varOffset + 0
    context.push(1, new VarInfo(varOffset, "v1", l1, l2, false, "java/lang/Object"));
    // mv.visitLocalVariable("v", "Ljava/lang/Object;", null, l3, l5, 2); // 2 == varOffset + 0
    context.push(1, new VarInfo(varOffset, "v2", l3, l5, false, "java/lang/Object"));
    // mv.visitLocalVariable("e", "Ljava/lang/Throwable;", null, l4, l3, 3); // 3 == varOffset+1
    context.push(1, new VarInfo(varOffset + 1, "e", l4, l3, false, "java/lang/Throwable"));

    mv.visitTryCatchBlock(l0, l1, l2, "java/lang/Throwable");
    mv.visitLabel(l0);
    mv.visitLineNumber(50, l0);

    args[0].visit(context, mv); // mv.visitVarInsn(ALOAD, 0); // execute block
    mv.visitVarInsn(ASTORE, varOffset); // store v, the result

    mv.visitLabel(l1);
    mv.visitJumpInsn(GOTO, l3);
    mv.visitLabel(l2);
    mv.visitLineNumber(51, l2);
    // mv.visitFrame(Opcodes.F_SAME1, 0, null, 1, new Object[] { "java/lang/Throwable" });
    mv.visitVarInsn(ASTORE, varOffset + 1); // e
    mv.visitLabel(l4);
    mv.visitLineNumber(52, l4);

    args[1].visit(context, mv); // mv.visitVarInsn(ALOAD, 1); // catch block
    mv.visitVarInsn(ALOAD, varOffset + 1); // e

    mv.visitMethodInsn(INVOKEVIRTUAL, "com/pkg/lang/Lambda1", "apply", "(Ljava/lang/Object;)Ljava/lang/Object;");
    mv.visitVarInsn(ASTORE, varOffset); // store v, the result

    mv.visitLabel(l3);
    mv.visitLineNumber(54, l3);
    // mv.visitFrame(F_APPEND, 1, new Object[] { "java/lang/Object" }, 0, null);
    mv.visitVarInsn(ALOAD, varOffset); // load v, the result
    // mv.visitInsn(ARETURN);
    mv.visitLabel(l5);
    // mv.visitLocalVariable("test", "Ljava/lang/Object;", null, l0, l5, 0);
    // mv.visitLocalVariable("handler", "Lcom/pkg/lang/Lambda1;", null, l0, l5, 1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:32:20.713

我基于以下假设回答问题：

```
// mv.visitLocalVariable("v", "Ljava/lang/Object;", null, l1, l2, 2); // 2 == varOffset + 0
context.push(1, new VarInfo(varOffset, "v1", l1, l2, false, "java/lang/Object")); 
```

你的意思是`context.push`创建一个`mv.visitLocalVariable`.

我认为必须先访问标签`l1`，然后才能访问局部变量。`l2`

[请参阅方法访问者](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/MethodVisitor.html)的 ASM4 java doc

> visitTryCatchBlock 必须在作为参数传递的标签被访问*之前*被调用，并且 visitLocalVariable 和 visitLineNumber 方法必须在作为参数传递的标签被访问*之后*被调用。

不遵守上述规定可能会导致堆栈图生成错误。因此，将`context.push`移到底部之后`mv.visitLabel(l5)`应该生成具有正确堆栈映射的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T00:25:26.403

我在 ASM 列表上询问，有人好心地提供了这个提示：

“尝试使用带有 checkDataFlow 选项的 CheckClassAdapter 以获得更多详细信息。”

这与一些故障排除解决了问题。我很确定这与未正确区分绑定变量的范围有关，并且需要使用 visitLocalVariable 声明本地变量。至少这是我在它不工作和它开始工作之间修复的事情之一。

# eclipse - 安装 ADT 插件时出错“无法完成安装”

> ID：11272368
> 
> 赞同：3
> 
> 时间：2012-06-30T07:37:18.577
> 
> 标签：eclipse

无法完成安装，因为找不到一项或多项所需项目。

```
 Software being installed: 
Android Native Development Tools 20.0.0.v201206242043-391819 
(com.android.ide.eclipse.ndk.feature.group 20.0.0.v201206242043-391819) 
```

软件详情：

```
Eclipse SDK : 4.2
jdk-7-windows-i586
Windows 7 
```

如何解决此“找不到所需项目”错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:43:35.413

问题是您使用的是 Windows 7，而在 Windows 7 中，默认情况下管理员权限不可用。

所以只需右键单击Eclipse图标并选择“以管理员身份运行”，然后单击帮助->安装新软件->然后粘贴ADT插件的URL->单击全选->下一步->完成，它将继续安装

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T13:13:44.987

通过 Eclipse 安装 ADT 时，只需确保您已检查： 在安装期间联系所有更新站点以查找所需的软件。这对我有帮助。

还尝试更新 Eclipse（帮助 -> 检查更新）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:22:37.490

访问[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)并下载“Eclipse for Mobile Developers”版本。然后按照 ADT 插件的安装步骤进行操作。

# django - 与 Django 的骨干关系

> ID：11272370
> 
> 赞同：2
> 
> 时间：2012-06-30T07:37:49.300
> 
> 标签：django, backbone.js

我正在构建一个在后端运行 Django 的 Backbonejs 应用程序。在我的 Django 中，我有类似`Author`、和的模型`books`，并且它们彼此相关。在 Backbone 中，我有一个模型，当我这样做时，我将其相关模型放在一个数组中。我应该这样继续还是最好在 Backbone 中创建相同的模型并在它们之间建立相同的关系？（与骨干关系）另外，假设我选择第二个选项，当我这样做并获得相关模型时，骨干关系应该直接识别它吗？`shelf``user``Author``fetch()``fetch()`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:39:42.863

我会建议利用 Backbone 关系——特别是如果您希望应用程序稍后会变得有些复杂。

可能您不必更改服务器端代码，您可以获得 Backbone 关系来实例化包含在您获取的模型的 JSON 中的任何相关模型。因此，如果对于作者查询，您的后端返回：

```
[{
    name: "Hemingway, Ernest", 
    books: [
         {name: "For whom the bell tolls", ISBN: 1234},
         {name: "The sun also rises", ISBN: 2345}
    ]
}] 
```

...并且您已经定义了作者和书籍之间的多对多关系 Backbone 关系也将实例化书籍。

# ubuntu - 在 Fabric 脚本中调用 bash 别名

> ID：11272372
> 
> 赞同：11
> 
> 时间：2012-06-30T07:37:55.450
> 
> 标签：ubuntu, alias, fabric

我在`~/.bash_aliases`远程 ubuntu 服务器上的文件中有别名。该文件以标准方式从文件中加载`~/.bashrc`，如下所示：

```
if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi 
```

该`~/.bashrc`文件依次从`~/.profile`如下所示的文件中加载（也以标准方式）：

```
if [ "$BASH" ]; then
  if [ -f ~/.bashrc ]; then
    source ~/.bashrc
    echo ".profile loaded .bashrc"
  fi
fi
mesg n 
```

我发现我的别名在我的结构命令中不可用，例如当我在结构脚本中执行此操作时：

```
run("aliased_command") 
```

我得到这个输出：

```
run: aliased_command
out: .profile loaded .bashrc
out: /bin/bash: aliased_command: command not found
Fatal error: run() encountered an error (return code 127) while executing 'aliased_command' 
```

现在，我通过使用 ssh 登录服务器并运行，设法在结构之外重现了这一点：

```
~# /bin/bash -l -c aliased_command 
```

从外壳（nb`/bin/bash -l -c`是织物的默认值，请参见[此处](http://docs.fabfile.org/en/1.4.0/usage/env.html#shell)）我得到相同的输出：

```
.profile loaded .bashrc:
/bin/bash: aliased_command: command not found 
```

在对相关主题进行了相当多的搜索之后，我在某处读到没有为非交互式 shell 导出别名，然后我设法使用`/bin/bash -l -c -i`（`-i`将 bash 设置为交互模式）解决了这个问题。

然后我将以下内容添加到我的 fabfile.py 中：

```
env.shell = "/bin/bash -l -c -i" 
```

现在我可以在我的结构命令中使用别名......太好了！

* * *

所以我的问题是：

*   这个解决方案有什么问题吗？如果是这样，我该怎么办？

*   是否有其他人在他们的 fabfile 中运行别名时遇到问题？

*   有什么明显的原因可以解释为什么我可能会遇到这个问题而其他人不会？

*   谁能指出我描述这个问题和解决方案的链接等？并解释他们是如何找到他们的...... :)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-30T07:51:57.763

这是主要问题的快速答案，以节省阅读我长问题的人，只需添加

```
env.shell = "/bin/bash -l -i -c" 
```

到您的 fabfile.py ，您应该能够在您的结构命令中使用别名，非常棒！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T07:58:54.607

是的，您完全正确，默认情况下，bash shell 在非交互式会话中不会扩展别名。

请参阅手册页中有关别名的部分：http: [//linux.die.net/man/1/bash](http://linux.die.net/man/1/bash)

> 当 shell 不是交互式时，别名不会展开，除非 expand_aliases shell 选项使用 shopt 设置（参见下面 SHELL BUILTIN COMMANDS 下的 shopt 描述）。

因此，要允许这种情况发生在非交互式会话中，请将其包含在您的`.profile`.

```
shopt -s expand_aliases 
```

这将使别名在非交互式会话和您的结构脚本中可用，而无需求助于交互式会话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T13:45:02.237

我怀疑 bash 不导出别名的行为背后的原因是别名的设计主要是为交互式 shell 用户提供一种机制来定义快速快捷方式或缩写。在您的脚本中，您应该使用完整的命令（即`ls -l`，而不是`ll`）以提高可读性。不要让人们为了阅读你的项目源代码而学习你所有的别名。如果您的别名真的如此重要，请考虑使它们成为独立的 shell 脚本或至少是 shell 函数。我认为您会发现在非交互式源代码中使用别名极为罕见，也许您应该重新考虑您的实现。

# linux - 在 Bash 中查找和替换不间断空格字符

> ID：11272374
> 
> 赞同：0
> 
> 时间：2012-06-30T07:38:38.400
> 
> 标签：linux, bash, sed

我有一个包含一些特殊字符的文档，例如不间断空格、不间断连字符等。我想规范化这个文档并用空格替换这些特殊字符。另外，由于本文档的内容是从不同的资源中收集的，所以我在其中有不同形式的“Yeh”（ی），我想将它们规范化。

是否可以使用**sed**命令查找和替换文档中的 unicode 字符？我可以使用 Unicode 代码代替字符的表面形式吗？例如，我可以在 sed 命令中使用 x00a0 代替不间断空格吗？如何？

* * *

抱歉解释不好。我的文档以 UTF8 编码，并且包含非英文字符。例如，我有一份阿拉伯语文件、一份乌尔都语文件和一份波斯语（波斯语）文件。现在我想用另一个字符替换这些文件中的一些字符。通过规范化，我的意思是我想将所有形式的“Yeh”替换为一种形式。（正如您现在可能看到的那样，这个字符在阿拉伯语中有多种形式，但为了简化和一些处理问题，我想统一所有这些形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:06:46.390

要处理 UTF-8 文件，您必须从头到尾解析每个字符。如果您需要有效地做到这一点，您必须编写一个真正的程序，而不是尝试编写一个解决方案的脚本。

如果您只想编写脚本，将其转换为 UTF-16 然后处理字符会更容易。

一个相当低效的方法是：

```
#!/bin/bash
function px {
 local a="$@"
 local i=0
 while [ $i -lt ${#a}  ]
  do
   printf \\x${a:$i:2}
   i=$(($i+2))
  done
}
(iconv -f UTF8 -t UTF16 | od -x |  cut -b 9- | xargs -n 1) |
if read utf16header
then
 px $utf16header
 out=''
 while read line
  do
   if [ "$line" == "000a" ]
    then
     out=$out$line
     px $out
     out=''
    else
     # put your coversion logic here.
     # e.g
     # if [ "$line" == "0031" ] ;  then
     #    line="0041"
     # fi
     out=$out$line
   fi
  done
fi | iconv -f UTF16 -t UTF8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:28:55.167

这可能对您有用（GNU sed）：

```
echo abcd | sed 'p;y/\x61\x62\x63/ABC/'
abcd
ABCd 
```

# mysql - 在一行中显示数据（来自多行）

> ID：11272380
> 
> 赞同：2
> 
> 时间：2012-06-30T07:39:28.517
> 
> 标签：mysql

以下是我所拥有的

```
++++++++++++++++++++++++
+ id + field1 + field2 +
++++++++++++++++++++++++
+ 1  +  1     +        +
+ 1  +        +   1    +
+ 2  +  1     +        +
+ 2  +        +   2    +
++++++++++++++++++++++++ 
```

我想要的是

```
++++++++++++++++++++++++
+ id + field1 + field2 +
++++++++++++++++++++++++
+ 1  +  1     +   1    +
+ 2  +  1     +   2    +
++++++++++++++++++++++++ 
```

我想将行组合起来并在一行中显示用户的数据，而不是像我在表中那样的多行。

知道怎么做吗？

**注意**：我没有任何具有所有字段数据的行。而且我没有任何具有以下情况的用户。

```
++++++++++++++++++++++++
+ id + field1 + field2 +
++++++++++++++++++++++++
+ 3  +  1     +        +
+ 3  +  1     +   1    +
++++++++++++++++++++++++ 
```

一行中只有 1 个数据，每个用户只有两行。

我试过了

```
SELECT id, concat(field1), concat(field2) from myTable
GROUP BY id; 
```

但它不会来。

## [sqlfiddle 中的数据](http://sqlfiddle.com/#!2/5aadf/6)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:45:35.613

在聚合分组数据时，您需要使用 MySQL 的[聚合函数之一。](http://dev.mysql.com/doc/en/group-by-functions.html)要么使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)（非聚合字符串函数）[`CONCAT()`](http://dev.mysql.com/doc/en/string-functions.html#function_concat)，要么（更适合数字数据）使用[`SUM()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_sum)：

```
SELECT id, SUM(field1), SUM(field2) FROM myTable GROUP BY id 
```

## [演示](http://sqlfiddle.com/#!2/d6452/2)

# node.js - 在 Windows 上使用 nodejs 捕获数据包

> ID：11272383
> 
> 赞同：5
> 
> 时间：2012-06-30T07:39:49.910
> 
> 标签：node.js, pcap, libpcap, winpcap

node.js v0.8.0 , XP / WIN7 (不是 Cygwin)

谷歌发现 node_pcap ( [https://github.com/mranney/node_pcap](https://github.com/mranney/node_pcap) )

但它只支持 osx 和 linux。

有没有适用于 windows 的模块？

谢谢。

.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-11T19:32:17.587

如果你想要更跨平台的东西（例如通过 WinPcap 与 Windows 兼容），我写了`cap`一会儿：[https ://github.com/mscdex/cap](https://github.com/mscdex/cap)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-26T07:25:32.623

我试图在 Windows 机器上捕获、解码和监视 AMF 请求，并提出了以下解决方案，用于使用[node.js](http://www.nodejs.org)、[edge.js](https://github.com/tjanczuk/edge#what-you-need)和[pcap.net 库](http://pcapdotnet.codeplex.com/)捕获数据包。

确保您拥有正确的 node.js 版本（32 位或 64 位）以及 edge.js 的要求

还要确保更改/删除代码中第 64 行周围的数据包过滤器。

```
var edge = require('edge');

var PacketCap = edge.func('cs', function () {/*
    #r "PcapDotNet.Base.dll"
    #r "PcapDotNet.Core.dll"
    #r "PcapDotNet.Core.Extensions.dll"
    #r "PcapDotNet.Packets.dll"
    #r "System.Xml.dll"
    #r "System.Xml.Linq.dll"

    using System.Collections.Generic;
    using System.Linq;
    using PcapDotNet.Core;
    using PcapDotNet.Packets;
    using PcapDotNet.Packets.IpV4;
    using PcapDotNet.Packets.Transport;
    using PcapDotNet.Packets.Http;
    using System.Text;
    using System.Collections;

    async (dynamic data) => {
        var NodeOut = (Func<object,Task<object>>)data.NodeOut;
        IList<LivePacketDevice> allDevices = LivePacketDevice.AllLocalMachine;
        if (allDevices.Count == 0)
        {
            Console.WriteLine("No interfaces found! Make sure WinPcap is installed.");
        }

        // Print the list
        for (int i = 0; i != allDevices.Count; ++i)
        {
            LivePacketDevice device = allDevices[i];
            Console.Write((i + 1) + ". " + device.Name);
            if (device.Description != null)
                Console.WriteLine(" (" + device.Description + ")");
            else
                Console.WriteLine(" (No description available)");
        }

        int deviceIndex = 0;
        do
        {
            Console.WriteLine("Enter the interface number (1-" + allDevices.Count + "):");
            string deviceIndexString = Console.ReadLine();
            if (!int.TryParse(deviceIndexString, out deviceIndex) ||
                deviceIndex < 1 || deviceIndex > allDevices.Count)
            {
                deviceIndex = 0;
            }
        } while (deviceIndex == 0);

        // Take the selected adapter
        PacketDevice selectedDevice = allDevices[deviceIndex - 1];

        // Open the device
        using (PacketCommunicator communicator = 
            selectedDevice.Open(65536,                                  // portion of the packet to capture
                                                                        // 65536 guarantees that the whole packet will be captured on all the link layers
                                PacketDeviceOpenAttributes.None, // promiscuous mode
                                1000))                                  // read timeout
        {
            Console.WriteLine("Listening on " + selectedDevice.Description + "...");

            using (BerkeleyPacketFilter filter = communicator.CreateFilter("src host 127.0.0.1 and port 80"))
            {
                // Set the filter
                communicator.SetFilter(filter);
            }

            // Retrieve the packets
            Packet packet;
            do
            {
                var encoding = Encoding.Default;
                PacketCommunicatorReceiveResult result = communicator.ReceivePacket(out packet);
                if (packet == null) { continue; }
                if (packet.Ethernet == null) { continue; }
                if (packet.Ethernet.IpV4 == null) { continue; }
                if (packet.Ethernet.IpV4.Tcp == null) { continue; }
                if (packet.Ethernet.IpV4.Tcp.Http == null) { continue; }

                int sourcePort = packet.Ethernet.IpV4.Tcp.SourcePort;
                int destinationPort = packet.Ethernet.IpV4.Tcp.DestinationPort;
                IpV4Address sourceAddress = packet.Ethernet.IpV4.Source;
                IpV4Address destinationAddress = packet.Ethernet.IpV4.Destination;

                IpV4Datagram ip = packet.Ethernet.IpV4;
                TcpDatagram tcp = ip.Tcp;
                HttpDatagram http = tcp.Http;
                string httpBody = "";
                string httpHeader = "";

                try
                {
                    // parse packet
                    await NodeOut(System.Convert.ToBase64String(packet.Buffer));
                }
                catch (Exception ex)
                {
                    //Console.WriteLine(ex.Message);
                }
            } while (true);
        }
        return "Program Exit!";
    }
*/});

var payload = {
NodeOut: function(input, callback) {
        //console.log("base64 -> " + input)
        var data = new Buffer(input, 'base64');
        try {
            strPacket = data.toString('binary');
            console.log(strPacket + "\r\n");
        }
        catch(error) {
          console.log(error.stack);
        }
        callback(null, "test");
    }
}

PacketCap(payload, function (error, result) {
    if (error) throw error;
    console.log(result);
}); 
```

我的来源：[http ://www.techresx.com/programming/packet-capture-nodejs-edgejs/](http://www.techresx.com/programming/packet-capture-nodejs-edgejs/)

# android - 如何限制文本编辑的输入

> ID：11272388
> 
> 赞同：0
> 
> 时间：2012-06-30T07:40:57.507
> 
> 标签：android, android-edittext

我正在制作一个编辑文本，我想强制用户输入小于 200 的数字，我见过有人展示如何限制字符数，但有谁知道如何在不使用 800 部分的情况下限制用户输入如果声明？IE。用户可以输入 1-199 之间的任何数字，但不能输入数字 201。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:59:00.910

我不清楚您的意思是将字段限制为少于 200 个字符，还是限制为小于 200 的数值（例如“199”）。如果是后者，则设置属性`android:inputType="number"`，然后`OnFocusChangeListener`在 EditText 中添加一个，实现`onFocusChange()`检查 EditText 值的方法，如果无效则更改/警报/删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:03:40.253

首先设置你的编辑文本输入类型编号，然后

```
 edittext.addTextChangedListener(new TextWatcher(){
    public void afterTextChanged(Editable s) {}
    public void beforeTextChanged(CharSequence s, int start, int count, int after){}
    public void onTextChanged(CharSequence s, int start, int before, int count){
        String strEnteredVal = edittext.getText().toString();

        if(!strEnteredVal.equals("")){
        int num=Integer.parseInt(strEnteredVal);
        if(num<200){
         edittext.setText(""+num);
        }else{
         edittext.setText("");
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T08:03:58.897

适用于 Android 的数字微调器/选择器

根据 Android 时间选择器对话框中使用的 Google 内部数字微调器（尚未公开），找到了一个方便的 Android 数字微调器。

它是在 Apache 2.0 下发布的，可以找到

[http://www.quietlycoding.com/?p=5](http://www.quietlycoding.com/?p=5)

有

mStart = DEFAULT_MIN；mEnd = DEFAULT_MAX；

在 java 文件的顶部，我已经声明了 DEFAULT_MAX 和 DEFAULT_MIN：

```
private static final int DEFAULT_MAX = 200;
private static final int DEFAULT_MIN = 0; 
```

![在此处输入图像描述](../Images/ccaa8d9b5839d627bed0fe50c59f8184.png)

# c++ - 堆上的对象和引用

> ID：11272389
> 
> 赞同：5
> 
> 时间：2012-06-30T07:41:03.097
> 
> 标签：c++, language-lawyer

在回答[这个问题](https://stackoverflow.com/questions/11272292/returning-by-reference-of-a-value-stored-as-a-pointer-memory-leak)时，我有点困惑。我们都知道，由于 C++ 复制语义，这可以正常工作：

```
int *some_obj = new int(42);
int a_copy = *some_obj;

delete some_obj;

printf("The answer is %d\n", a_copy); 
```

但是这个呢？

```
int *some_obj = new int(42);
int& a_ref = *some_obj;

delete some_obj;

printf("The answer is %d\n", a_ref); 
```

这是访问已删除的内存吗？

[可能以各种形式多次询问，但这对谷歌不太友好。哎呀，我不能写一个像样的标题。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T07:43:44.917

是的。所以这是不允许的。（您可以通过使用具有更改值的析构函数的类来确保看到差异。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:49:20.480

确切地。第二个示例访问已释放的内存。引用的实现是指针。非常简单。引用是一个不能更改的指针，它具有不同的访问运算符表示法。它们之间没有其他区别。

# javascript - jQuery，引导程序：input.val() 未定义，即使 jsfiddle 工作正常

> ID：11272391
> 
> 赞同：0
> 
> 时间：2012-06-30T07:41:40.937
> 
> 标签：javascript, jquery, twitter-bootstrap

我在这里有一个 jsfiddle：http: [//jsfiddle.net/hhimanshu/ukYek/](http://jsfiddle.net/hhimanshu/ukYek/)

这在 jsfiddle 上工作得很好，但是当我在我的应用程序中做同样的事情时，萤火虫说

```
input.val() is undefined

$('#create-playlist-button').attr('disabled',input.val().length==0); 
```

我做了一些谷歌搜索，发现了一个相关的[问题](https://stackoverflow.com/questions/5006045/jquery-val-is-undefined)

**更新** 小提琴更新 - [http://jsfiddle.net/hhimanshu/ukYek/4/](http://jsfiddle.net/hhimanshu/ukYek/4/)（问题仍然相同）

**问题**
- 当 javascript 已经加载并且表单段在 ajax 事件中加载得有点晚时，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:46:35.563

这是你的小提琴的更新版本 - [http://jsfiddle.net/vwvm2/1/](http://jsfiddle.net/vwvm2/1/)

变化

1) 将 id 放在 html 输入文本上

2）使用 $(this) 这是输入字段

# iphone - 文档目录在objective c中存储数据或缓存好？

> ID：11272393
> 
> 赞同：0
> 
> 时间：2012-06-30T07:41:49.937
> 
> 标签：iphone, objective-c, ios, xcode

朋友们，我需要存储超过 100 mb 的 zip 格式数据，我在解压缩这个 zip 文件后得到数据，解**压缩数据的大小超过 70 mb**，**所以我的问题是哪个存储位置适合保存这些数据，目前我正在使用缓存，但是当我在缓存中写入数据时，它会在设备上发出内存警告**，然后有时应用程序会崩溃。

此 zip 文件包含 html 页面和图像。

我也检查了这个[链接](https://stackoverflow.com/questions/7679918/best-way-to-store-and-load-large-amount-of-data-in-objective-c)，但没有得到答案来存储来自服务器的 zip 格式的 html 和图像。

任何小的帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:44:15.833

不要试图一次将整个 ZIP 文件读入内存！向您发出内存警告的不是设备上的永久存储（闪存），而是您耗尽了 RAM。是的，Documents 或 Library 目录可以很好地存储您的应用程序数据，只是要小心内存管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T07:49:58.013

就像 H2CO3 所说的那样，内存警告确实是由一个块将其全部读入 RAM 引起的。除此之外，请务必遵循[Apple](https://developer.apple.com/icloud/documentation/data-storage/)关于数据存储的指南。如果保存的数据是临时的，请确保不要将其存储在您的文档目录中，否则您的应用程序可能会被拒绝（根据经验）。

# javafx-2 - JavaFx 2.1、2.2 TableView 更新问题

> ID：11272395
> 
> 赞同：3
> 
> 时间：2012-06-30T07:42:11.160
> 
> 标签：javafx-2

我的应用程序使用 JPA 将数据读入 TableView，然后修改并显示它们。该表刷新了 JavaFx 2.0.3 下的修改记录。在 JavaFx 2.1、2.2 下，表格不再刷新更新。我发现其他人也有类似的问题。我的计划是继续使用 2.0.3，直到有人解决了 2.1 和 2.2 下的问题。现在我知道这不是一个错误，也不会被修复。嗯，我不知道如何处理这个。以下是从示例演示修改的代码以显示问题。如果我从表中添加新记录或删除旧记录，表刷新正常。如果我修改了一条记录，在执行添加、删除或排序操作之前，表格不会刷新更改。如果我删除修改后的记录并再次添加，表格会刷新。但是修改后的记录放在表格的按钮上。好吧，如果我删除修改后的记录，添加相同的记录然后将记录移动到原始位置，表将不再刷新。下面是一个完整的代码，请对此有所了解。

```
 import javafx.application.Application;
    import javafx.beans.property.SimpleStringProperty;
    import javafx.collections.FXCollections;
    import javafx.collections.ObservableList;
    import javafx.event.ActionEvent;
    import javafx.event.EventHandler;
    import javafx.geometry.HPos;
    import javafx.geometry.Insets;
    import javafx.geometry.Pos;
    import javafx.scene.Group;
    import javafx.scene.Scene;
    import javafx.scene.control.*;
    import javafx.scene.control.cell.PropertyValueFactory;
    import javafx.scene.layout.GridPane;
    import javafx.scene.layout.HBox;
    import javafx.scene.layout.VBox;
    import javafx.scene.text.Font;
    import javafx.stage.Modality;
    import javafx.stage.Stage;
    import javafx.stage.StageStyle;

    public class Main extends Application {

        private TextField firtNameField = new TextField();
        private TextField lastNameField = new TextField();
        private TextField emailField = new TextField();
        private Stage editView;
        private Person fPerson;

        public static class Person {

            private final SimpleStringProperty firstName;
            private final SimpleStringProperty lastName;
            private final SimpleStringProperty email;

            private Person(String fName, String lName, String email) {
                this.firstName = new SimpleStringProperty(fName);
                this.lastName = new SimpleStringProperty(lName);
                this.email = new SimpleStringProperty(email);
            }

            public String getFirstName() {
                return firstName.get();
            }

            public void setFirstName(String fName) {
                firstName.set(fName);
            }

            public String getLastName() {
                return lastName.get();
            }

            public void setLastName(String fName) {
                lastName.set(fName);
            }

            public String getEmail() {
                return email.get();
            }

            public void setEmail(String fName) {
                email.set(fName);
            }
        }
        private TableView<Person> table = new TableView<Person>();
        private final ObservableList<Person> data =
                FXCollections.observableArrayList(
                new Person("Jacob", "Smith", "jacob.smith@example.com"),
                new Person("Isabella", "Johnson", "isabella.johnson@example.com"),
                new Person("Ethan", "Williams", "ethan.williams@example.com"),
                new Person("Emma", "Jones", "emma.jones@example.com"),
                new Person("Michael", "Brown", "michael.brown@example.com"));

        public static void main(String[] args) {
            launch(args);
        }

        @Override
        public void start(Stage stage) {
            Scene scene = new Scene(new Group());
            stage.setTitle("Table View Sample");
            stage.setWidth(535);
            stage.setHeight(535);
            editView = new Stage();

            final Label label = new Label("Address Book");
            label.setFont(new Font("Arial", 20));

            TableColumn firstNameCol = new TableColumn("First Name");
            firstNameCol.setCellValueFactory(
                    new PropertyValueFactory<Person, String>("firstName"));
            firstNameCol.setMinWidth(150);

            TableColumn lastNameCol = new TableColumn("Last Name");
            lastNameCol.setCellValueFactory(
                    new PropertyValueFactory<Person, String>("lastName"));
            lastNameCol.setMinWidth(150);
            TableColumn emailCol = new TableColumn("Email");
            emailCol.setMinWidth(200);
            emailCol.setCellValueFactory(
                    new PropertyValueFactory<Person, String>("email"));

            table.setItems(data);
            table.getColumns().addAll(firstNameCol, lastNameCol, emailCol);
    //--- create a edit button and a editPane to edit person   
            Button addButton = new Button("Add");
            addButton.setOnAction(new EventHandler<ActionEvent>() {

                @Override
                public void handle(ActionEvent event) {
                    fPerson = null;
                    firtNameField.setText("");
                    lastNameField.setText("");
                    emailField.setText("");
                    editView.show();
                }
            });
            Button editButton = new Button("Edit");
            editButton.setOnAction(new EventHandler<ActionEvent>() {

                @Override
                public void handle(ActionEvent event) {
                    if (table.getSelectionModel().getSelectedItem() != null) {
                        fPerson = table.getSelectionModel().getSelectedItem();
                        firtNameField.setText(fPerson.getFirstName());
                        lastNameField.setText(fPerson.getLastName());
                        emailField.setText(fPerson.getEmail());
                        editView.show();
                    }
                }
            });
            Button deleteButton = new Button("Delete");
            deleteButton.setOnAction(new EventHandler<ActionEvent>() {

                @Override
                public void handle(ActionEvent event) {
                    if (table.getSelectionModel().getSelectedItem() != null) {
                        data.remove(table.getSelectionModel().getSelectedItem());
                    }
                }
            });
            HBox addEditDeleteButtonBox = new HBox();
            addEditDeleteButtonBox.getChildren().addAll(addButton, editButton, deleteButton);
            addEditDeleteButtonBox.setAlignment(Pos.CENTER_RIGHT);
            addEditDeleteButtonBox.setSpacing(3);

            GridPane editPane = new GridPane();
            editPane.getStyleClass().add("editView");
            editPane.setPadding(new Insets(3));
            editPane.setHgap(5);
            editPane.setVgap(5);
            Label personLbl = new Label("Person:");
            editPane.add(personLbl, 0, 1);
            GridPane.setHalignment(personLbl, HPos.LEFT);

            firtNameField.setPrefWidth(250);
            lastNameField.setPrefWidth(250);
            emailField.setPrefWidth(250);
            Label firstNameLabel = new Label("First Name:");
            Label lastNameLabel = new Label("Last Name:");
            Label emailLabel = new Label("Email:");

            editPane.add(firstNameLabel, 0, 3);
            editPane.add(firtNameField, 1, 3);
            editPane.add(lastNameLabel, 0, 4);
            editPane.add(lastNameField, 1, 4);
            editPane.add(emailLabel, 0, 5);
            editPane.add(emailField, 1, 5);
            GridPane.setHalignment(firstNameLabel, HPos.RIGHT);
            GridPane.setHalignment(lastNameLabel, HPos.RIGHT);
            GridPane.setHalignment(emailLabel, HPos.RIGHT);

            Button saveButton = new Button("Save");
            saveButton.setOnAction(new EventHandler<ActionEvent>() {

                @Override
                public void handle(ActionEvent event) {
                    if (fPerson == null) {
                        fPerson = new Person(
                                firtNameField.getText(),
                                lastNameField.getText(),
                                emailField.getText());
                        data.add(fPerson);
                    } else {
                        int k = -1;
                        if (data.size() > 0) {
                            for (int i = 0; i < data.size(); i++) {
                                if (data.get(i) == fPerson) {
                                    k = i;
                                }
                            }
                        }
                        fPerson.setFirstName(firtNameField.getText());
                        fPerson.setLastName(lastNameField.getText());
                        fPerson.setEmail(emailField.getText());
                        data.set(k, fPerson);
                        table.setItems(data);

    //  The following will work, but edited person has to be added to the button
    //
    //                    data.remove(fPerson);
    //                    data.add(fPerson);

    // add and remove refresh the table, but now move edited person to original spot, 
    // it failed again with the following code
    //                    while (data.indexOf(fPerson) != k) {
    //                        int i = data.indexOf(fPerson);
    //                        Collections.swap(data, i, i - 1);
    //                    }
                    }
                    editView.close();
                }
            });
            Button cancelButton = new Button("Cancel");
            cancelButton.setOnAction(new EventHandler<ActionEvent>() {

                @Override
                public void handle(ActionEvent event) {
                    editView.close();
                }
            });

            HBox saveCancelButtonBox = new HBox();
            saveCancelButtonBox.getChildren().addAll(saveButton, cancelButton);
            saveCancelButtonBox.setAlignment(Pos.CENTER_RIGHT);
            saveCancelButtonBox.setSpacing(3);

            VBox editBox = new VBox();
            editBox.getChildren().addAll(editPane, saveCancelButtonBox);

            Scene editScene = new Scene(editBox);
            editView.setTitle("Person");
            editView.initStyle(StageStyle.UTILITY);
            editView.initModality(Modality.APPLICATION_MODAL);
            editView.setScene(editScene);
            editView.close();

            final VBox vbox = new VBox();
            vbox.setSpacing(5);
            vbox.getChildren().addAll(label, table, addEditDeleteButtonBox);
            vbox.setPadding(new Insets(10, 0, 0, 10));

            ((Group) scene.getRoot()).getChildren().addAll(vbox);

            stage.setScene(scene);
            stage.show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-29T07:07:05.337

查看 TableView.java 代码，有私有 refresh() 只是执行

```
getProperties().put(TableViewSkinBase.REFRESH, Boolean.TRUE); 
```

最后，下面的代码对我有用（Java8）。（注意，常量的名称不是 REFRESH 而是 RECREATE）

```
tableView.getProperties().put(TableViewSkinBase.RECREATE, Boolean.TRUE); 
```

（阅读 javafx 的代码，这将强制重新创建单元格）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T10:39:45.693

请参阅[在 Tableview 中更新行的答案](https://stackoverflow.com/a/10914381/682495)。添加这些吸气剂，它就可以工作了。
此外，由于`data`它`ObservableList`被设置为 tableView 的项目，因此对该列表的任何更改`data`都将反映到该列表中`table.getItems()`。即无需`table.setItems(data)`再次。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-21T11:50:07.167

我找到了一个简单的解决方法来触发[JavaFX 2.1 TableView refresh items](https://stackoverflow.com/questions/11065140/javafx-2-1-tableview-refresh-items)中的 TableView 刷新。它为我解决了这个问题。

将此添加到您的代码中：

```
tableView.getColumns().get(0).setVisible(false);
tableView.getColumns().get(0).setVisible(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-04T00:46:26.790

JavaFX 控件的基于通知的更新通常要求支持您的 GUI 的数据模型对象的属性满足 JavaFX Bean 的最低定义。

下面举例说明了 JavaFX 属性满足这些要求所需的最少代码：

```
public class Client extends DB {

    private IntegerProperty id =         new SimpleIntegerProperty();
    private StringProperty  lastName =   new SimpleStringProperty();
    private StringProperty  firstName =  new SimpleStringProperty();

    public final int getID() {return this.id.get(); }
    void setID(int id) { this.id.set(id); }
    public final IntegerProperty idProperty() { return this.id; }

    public final String getLastName() { return this.lastName.get(); }
    public final void setLastName(String ln) { this.lastName.set(ln); }
    public final StringProperty lastNameProperty() { return this.lastName; }

    public final String getFirstName() { return this.firstName.get(); }
    public final void setFirstName(String fn) { this.firstName.set(fn); }
    public final StringProperty firstNameProperty() { return this.firstName; }
    :
    :
} 
```

浏览您的代码，您的属性似乎不满足 JavFX Bean 的要求。因此，不会发生基于通知的自动更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-04T00:20:13.587

我遇到了同样的问题，经过一番搜索，这是我的解决方法。我发现如果列被删除然后重新添加，表就会更新。

```
public static <T,U> void refreshTableView(final TableView<T> tableView, final List<TableColumn<T,U>> columns, final List<T> rows) {
    if (tableView == null) {
        throw new NullPointerException();
    }
    if (columns == null) {
        throw new NullPointerException();
    }
    if (rows == null) {
        throw new NullPointerException();
    }

    tableView.getColumns().clear();
    tableView.getColumns().addAll(columns);

    ObservableList<T> list = FXCollections.observableArrayList(rows);
    tableView.setItems(list);
} 
```

使用示例：

```
refreshTableView(myTableView, Arrays.asList(col1, col2, col3), rows); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-01T18:02:30.333

这对我有用

```
@FXML 
private void refreshTableView()
{
  firstNameCol.setVisible(false);
  lastNameCol.setVisible(false);
  emailCol.setVisible(false); 
  firstNameCol.setVisible(true);
  lastNameCol.setVisible(true);
  emailCol.setVisible(true);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T15:12:47.397

我有同样的问题，并且无法添加`SimpleStringProperty`到 JPA 使用的 POJO 中，这使得这有点问题。但在我看来，这应该是可以解决的问题，因为我注意到以下行为：

1.  在我的应用程序中，单击表格中的一行会在屏幕上填充一些文本字段，然后用户可以对其进行编辑。
2.  此时，用户可以保存数据，或使用相同或更改的数据创建新项目。如果用户创建了一个新项目，然后将其插入到 tableview 表示的 observable 列表中，则更改会立即反映在 tableview 的内容中。但是，如果用户只是保存更改，则新数据不会反映在表中。要将新数据放入列表中，我只是在做

    ```
    trialList.set(currentIndex, tempTrial); 
    ```

3.  我认为这是一个可修复的问题：如果我将受影响的行滚动到表格的视野之外，然后将其向后滚动，则现在会显示“新”值。

希望这可以解决。抱歉，这不是一个答案，可以这么说，但可能会为修复提供一些见解。

# php - 使用 GET 方法 php

> ID：11272398
> 
> 赞同：0
> 
> 时间：2012-06-30T07:42:15.650
> 
> 标签：php, get

我现在尝试制作管理面板，并希望添加 3 个部分：

1.  编辑帖子
2.  删除后
3.  添加帖子

在文件 admin.php 我使用 sesions，但我不知道如何分隔这 3 个部分。我想在页面 admin.php 中使用这种方法制作 3 部分：

1.  /admin.php?id=编辑
2.  /admin.php?id=删除
3.  /admin.php?id=添加

我想问你这个决定是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:46:56.333

即使建议使用 POST，这也是正确的，因为对于新手黑客来说使用起来有点困难。还要确保您检查用户有权访问危险部分，例如“编辑”和“删除”。

同样作为安全建议，您应该将 admin.php 文件的名称更改为不太容易找到的名称：任何潜在的黑客都有自动化工具来尝试最知名的管理部分名称以尝试进入。如果名称是唯一的，它甚至在尝试打破它之前都会增加难度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:58:52.457

您的回答“但我不知道如何分隔这 3 个部分”：

```
if(isset($_GET['id'])){
    switch($_GET['id']){
        case 'add':
            //your code
        break;
        case 'edit':
            //your code
        break;
        case 'delete':
            //your code
        break;
        default:
            //your code if some one pass anything else add/edit/remove
    }
} 
```

我在我的代码中使用相同的方式并且没有问题，但是您应该检查您的代码安全性。

如我错了请纠正我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:21:53.933

我会以这样一种方式构造代码，以便我的每个管理页面都继承自一个安全基类。所有子类都可以实现它们所需的任何功能，因此您不会拥有一个巨大的文件，并且从安全的角度来看，它们都可以轻松维护。然后，您进入系统的主要入口点可以是一个 admin.php 页面，该页面使用简单的 switch 语句或其他方法来路由请求，根据您的 http 参数调用正确的类和方法。

# scala - SBT 上带有 Scala 的 EBean（InterruptedException：睡眠中断）

> ID：11272399
> 
> 赞同：0
> 
> 时间：2012-06-30T07:42:27.740
> 
> 标签：scala, exception, sbt, ebean, interrupted-exception

我正在尝试在 SBT 上使用 Scala 运行 EBean，但出现错误。

这是代码（来自：[http](http://www.avaje.org/ebean/getstarted_props.html#test) ://www.avaje.org/ebean/getstarted_props.html#test 的测试）：

```
object Main extends App {
    val sql = "select count(*) as count from dual"
    val row = Ebean.createSqlQuery(sql).findUnique()
    val i = row.getInteger("count")
    println("Got " + i + "  - DataSource good.")
} 
```

这是错误：

```
[info] Loading project definition from /Volumes/etam/lift/hello-ebean/project
[info] Set current project to Main (in build file:/Volumes/etam/lift/hello-ebean/)
[info] Running hello.Main 
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.core.BootupClassPathSearch search
INFO: Classpath search hits in jars[ebean-2.7.7.jar] pkgs[com.avaje.ebeaninternal.server.bean, com.avaje.ebean.meta]  searchTime[51]
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.lib.sql.DataSourcePool initialise
INFO: DataSourcePool [h2] autoCommit[false] transIsolation[READ_COMMITTED] min[1] max[25]
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.core.DefaultServerFactory setDatabasePlatform
INFO: DatabasePlatform name:h2 platform:h2
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.subclass.SubClassManager$1 run
INFO: SubClassFactory parent ClassLoader [sbt.classpath.ClasspathUtilities$$anon$1]
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.deploy.DeployOrmXml findAllOrmXml
INFO: Deployment xml [orm.xml]  loaded.
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager logStatus
INFO: Entities enhanced[0] subclassed[0]
runScript
executing 1 of 2 SET REFERENTIAL_INTEGRITY FALSE
executing 2 of 2 SET REFERENTIAL_INTEGRITY TRUE
... end of script
runScript
... end of script
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.transaction.log.FileTransactionLoggerWrapper initialiseLogger
INFO: Transaction logs in: logs
Got 0  - DataSource good.
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.lib.BackgroundThread$Runner run
SEVERE: null
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at com.avaje.ebeaninternal.server.lib.BackgroundThread$Runner.run(BackgroundThread.java:168)
    at java.lang.Thread.run(Thread.java:680)
2012-06-30 09:36:51 com.avaje.ebeaninternal.server.transaction.log.FileTransactionLogger run
INFO: Interrupted TxnLogBufferWriter
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at com.avaje.ebeaninternal.server.transaction.log.FileTransactionLogger.run(FileTransactionLogger.java:206)
    at java.lang.Thread.run(Thread.java:680)
[success] Total time: 1 s, completed 2012-06-30 09:36:51 
```

项目有什么问题？

GIT 存储库：[https](https://github.com/odwrotnie/hello-ebean) ://github.com/odwrotnie/hello-ebean ；主类：[https](https://github.com/odwrotnie/hello-ebean/blob/master/main/src/main/scala/hello/main.scala) ://github.com/odwrotnie/hello-ebean/blob/master/main/src/main/scala/hello/main.scala ；配置：[https](https://github.com/odwrotnie/hello-ebean/blob/master/main/src/main/resources/ebean.properties) ://github.com/odwrotnie/hello-ebean/blob/master/main/src/main/resources/ebean.properties 。

在此先感谢，埃塔姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T21:34:32.630

默认情况下，`run`在与 sbt 本身相同的 jvm 中执行应用程序，以加快周转时间。在这种情况下，`run`认为 main 方法终止后只剩下守护线程。它继续中断那些剩余的线程，这会给出您看到的异常。它必须这样做，因为这是在不实际关闭它的情况下伪造 jvm 关闭的最好方法。

这些异常看起来并不太有害，但是您可以通过在分叉的 jvm 中运行应用程序来消除它们。要启用此功能，请将以下内容添加到您的构建设置中

```
fork in run := true 
```

此处描述了 sbt 如何在同一 jvm 中运行项目代码：[http ://www.scala-sbt.org/release/docs/Detailed-Topics/Running-Project-Code.html](http://www.scala-sbt.org/release/docs/Detailed-Topics/Running-Project-Code.html)

分叉在这里描述：[http ://www.scala-sbt.org/release/docs/Detailed-Topics/Forking.html](http://www.scala-sbt.org/release/docs/Detailed-Topics/Forking.html)

# jsf - 根据 TLD，标签 panelGrid 的属性对齐无效

> ID：11272402
> 
> 赞同：0
> 
> 时间：2012-06-30T07:42:33.360
> 
> 标签：jsf, tld

我开发了具有以下方面的应用程序

*   动态网页模块 2.5
*   JavaServer Faces 1.2
*   爪哇 5

我使用的是 Rich Faces 3.2，服务器是 Tomcat 6

我收到一个错误

```
Attribute align invalid for tag panelGrid according to TLD. 
```

我确实
[按照TLD链接布局无效](https://stackoverflow.com/questions/8730744/the-layout-attribute-is-invalid-according-to-the-specified-tld)

但它并没有解决我的问题，因为我已经在使用 JSF 1.2。这个错误的可能原因是什么。我可以给出以下提示

*   该项目最初是在没有安装 JavaServer Facet 的情况下开发的
*   我添加了 JSF 1.2 和 Rich faces（对于我需要合并的一些增强功能）。
*   从那以后我开始收到这个错误。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:30:55.473

另一个问题无关紧要。`layout`当您尝试使用该属性时，它与该属性有关`align`。的`layout`属性`<h:panelGrid>`是在 JSF 1.2 中引入的。`align`从未支持该属性`<h:panelGrid>`。`<h:panelGrid>`根据[其 TLD 文档](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/1.2_MR1/docs/tlddocs/h/panelGrid.html)，此属性未列在 JSF 1.2 标记的受支持属性中。

因此，**删除**该`align`属性并使用 CSS 来做任何你想做的事情。

# php - 数据库中的 PHP 会话

> ID：11272405
> 
> 赞同：14
> 
> 时间：2012-06-30T07:42:47.383
> 
> 标签：php, database, session

如何将会话存储在数据库中？我用这段代码做到了：

```
 function write ($session_id, $session_data)
// write session data to the database.
{
    if (!empty($this->fieldarray)) {
        if ($this->fieldarray['session_id'] != $session_id) {
            // user is starting a new session with previous data
            $this->fieldarray = array();
        } // if
    } // if

    if (empty($this->fieldarray)) {
        // create new record
        $array['session_id']   = $session_id;
        $array['date_created'] = getTimeStamp();
        $array['last_updated'] = getTimeStamp();
        $array['session_data'] = addslashes($session_data);
        $this->_dml_insertRecord($array);
    } else {
        // update existing record
        if (isset($_SESSION['logon_user_id'])) {
            $array['user_id']  = $_SESSION['logon_user_id'];
        } // if
        $array['last_updated'] = getTimeStamp();
        $array['session_data'] = addslashes($session_data);
        $this->_dml_updateRecord($array, $this->fieldarray);
    } // if

    return TRUE;

} // write 
```

但是我应该如何像以前一样自动删除它。我的意思是如何在超时后自动删除会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-10T02:00:36.643

很久以前我不得不处理这个问题，有两个解决方案，这两个都不漂亮，但它就在这里。

1.  按照事件的顺序（松散地），您的脚本将检查是否有会话 ID 发送到服务器，然后它将查看该会话是否在您的数据库中，以及该会话是否已过期。建立与会话数据库的连接后，您可能会考虑对过期日期超过当前时间戳的所有记录运行 DELETE 查询。然后搜索用户刚刚发送的ID。每次人们使用您的网站时，都会以这种方式进行清理

2.  下一个方法，您可能会考虑另外做，是有一个 CHRON 作业或其他自动脚本，它经常运行以清除会话表中的过期条目。如果您的网站收到少量且不频繁的流量，这是一个很好的方法。

方法的组合是这样的。在验证会话时，在脚本中检查找到会话数据时的过期日期。如果找到 ID，但会话已过期，则删除会话并开始新的会话。如果您这样做，您将不必遇到太多 ID 冲突问题或大量查询减慢服务器速度。您仍然可以在每天结束时运行您的 chron 作业以运行完整的清理。

确保您的系统是否有某种类型的注销按钮，手动注销的行为将触发用户会话的删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-13T20:20:34.707

看看[HTTP_Session2](http://pear.php.net/manual/en/package.http.http-session2.php)。来自 PEAR 文档：

> **HTTP_Session2**提供额外的功能，例如使用 DB 和 MDB2 包**存储会话数据的数据库。**它还引入了新的方法，例如 isNew()、useCookies()、setExpire()、setIdle()、isExpired()、isIdled() 等。

如果您想实现您的，请查看`MDB2.php`该包内的代码。它包含一个垃圾收集方法 (gc)，结合[session_set_save_handler](http://php.net/manual/en/function.session-set-save-handler.php)应该可以解决问题。

# python - 执行 python 脚本时出现错误 500

> ID：11272413
> 
> 赞同：-1
> 
> 时间：2012-06-30T07:44:01.843
> 
> 标签：python, apache, cgi

我最近重新安装了我的 Ubuntu PC（到 12.04）并且不得不重新设置 apache。
local.domain.com 指向 localhost（虚拟主机）。
[http://local.domain.com/script.py?query=string](http://local.domain.com/script.py?query=string)
script.py 被修改为 755。
在我的 .htaccess 中，我有：

```
Options +ExecCGI
AddHandler cgi-script .py
```

但我得到一个**500 : Internal Server Error**。
**cat /var/log/apache2/error.domain.com.log**什么也没显示。
如果我在命令行中执行 python script.py 我得到：

```
 <!-- The above is a description of an error in a Python program, formatted
     for a Web browser because the 'cgitb' module was enabled.  In case you
     are not reading this in a Web browser, here is the original traceback:

Traceback (most recent call last):
  File "script.py", line 32, in <module>
    queryHash = hashlib.sha224(os.environ['QUERY_STRING']).hexdigest()
  File "/usr/lib/python2.7/UserDict.py", line 23, in __getitem__
    raise KeyError(key)
KeyError: 'QUERY_STRING'

--> 
```

所以我不认为 py 脚本有什么问题。以前可以用。但由于某种原因，它没有在浏览器中执行。我还能错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:44:48.930

错误就在您面前：

```
Traceback (most recent call last):
  File "script.py", line 32, in <module>
    queryHash = hashlib.sha224(os.environ['QUERY_STRING']).hexdigest()
  File "/usr/lib/python2.7/UserDict.py", line 23, in __getitem__
    raise KeyError(key)
KeyError: 'QUERY_STRING' 
```

这表示它无法访问密钥`QUERY_STRING`。它甚至为您提供了发生错误的确切代码行：

```
File "script.py", line 32
queryHash = hashlib.sha224(os.environ['QUERY_STRING']).hexdigest() 
```

`QUERY_STRING`尚未为 apache 用户设置环境变量。你以前是怎么弄这套的？您可能需要在 httpd 配置文件中设置它，对于 Ubuntu，我不确定它在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:27:26.313

Ubuntu 12.04 有 python 2.7。我的脚本的 shebang 行是：

```
#!/usr/bin/env python2.6
```

# c# - 如何在本地 CultureInfo 中获取 DayOfWeek？

> ID：11272417
> 
> 赞同：1
> 
> 时间：2012-06-30T07:44:59.427
> 
> 标签：c#, winforms, datetime, cultureinfo

```
DateTime dt = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1);
string day = dt.DayOfWeek.ToString();
day = day.Substring(0, 1).ToUpper();
MessageBox.Show(day); // result is "F" 
```

如何以当地语言 (CultureInfo) 获得结果，例如 - 法国，我在哪里可以找到用于此目的的语言参考列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T07:54:26.837

假设您已经拥有`CultureInfo`，您可以使用：

```
string dayName = dateTime.ToString("dddd", culture); 
```

然后您需要自己获取它的第一个字符 - 没有自定义日期/时间格式。您可以使用`ddd`缩写的*日期*名称，但这通常是三个字符，而不是一个。

至于文化列表 - 您可以使用[`CultureInfo.GetCultures`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx). 它会因平台而异，并且可能会随着时间甚至 .NET 的版本而变化。

顺便说一句，这段代码并不理想：

```
DateTime dt = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1); 
```

如果您碰巧在一年年底的午夜之前调用它*，*您可以获得“旧”年，然后将一月作为月份。您应该评估`DateTime.Now`(or `DateTime.Today`) 一次，然后使用相同的值两次：

```
DateTime today = DateTime.Today;
DateTime startOfMonth = new DateTime(today.Year, today.Month, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T07:50:00.677

直接来自 MSDN：[MSDN on DateTime with CultureInfo](http://msdn.microsoft.com/en-us/library/5hh873ya.aspx)

```
DateTime dt = DateTime.Now;
// Sets the CurrentCulture property to U.S. English.
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
// Displays dt, formatted using the ShortDatePattern
// and the CurrentThread.CurrentCulture.
Console.WriteLine(dt.ToString("d")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T07:51:03.717

如有必要，尝试`dt.ToString("dddd")`然后操作该字符串。请参阅[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T08:19:35.190

```
DateTime    dateValue    =    new    DateTime(2008,    6,    11);      
Console.WriteLine(dateValue.ToString("ddd",    
                  new    CultureInfo("fr-FR"))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-02T12:45:20.527

就这么简单：

```
var culture = new CultureInfo("da-DK");
var datestring =datetime.ToString("dd MMMMM yyyy kl. hh:mm",culture) 
```

# macos - 用于 Mac 仪表板小部件和 Safari 扩展的网页内容和 XmlHttpRequest 之间的会话状态持久性

> ID：11272418
> 
> 赞同：2
> 
> 时间：2012-06-30T07:45:13.340
> 
> 标签：macos, widget, dashboard, safari-extension, mac-dashboard-widget

我已经在 Apple 的 Safari 开发论坛上发帖，但没有收到任何回复，所以想尝试在其他地方交叉发帖以获取想法：

我问这个问题是关于这两个

Safari Extension（工具栏类型 AJAX 扩展） Mac OS X 仪表板小部件

我假设两者都会相似，因为它们使用 WebKit 渲染引擎？

我想知道用于维护内置会话状态支持（cookie？）的引擎是否共享并保持浏览器引擎（HTML、JS、CSS、图像等）在页面上加载的 Web 内容与发出的请求之间的会话通过 XmlHttpRequest 对象。

我正在移植一个需要在 Web 内容和 XmlHttpRequest 对象之间共享的会话状态的 AJAX 应用程序。（即会话状态没有明确的 cookie 管理，至少我使用的 Web 服务 API 没有定义）。

我成功地将应用程序移植到 Chrome、Opera、Windows 7/Vista 小工具。它无法在 iGoogle 和 Mac OS X 小部件上运行。Safari 扩展端口的结果好坏参半 - 它在某些情况下有效，但在其他情况下无效。

我还做了一个 Microsoft .HTA 端口（HTA 应用程序 = 通过 IE 运行的 Web 应用程序，没有普通 Web 应用程序的安全限制，如跨域 XmlHttpRequests）并注意到它仅适用于 IE7+（由于本地 XmlHttpRequest 的实现差异IE7+ 与早期 IE 的 MS XML 版本）

我还咨询了 iGoogle 的讨论/支持小组，并了解到 iGoogle 也不支持此类会话状态支持。

我通过使用 Flash 组件执行似乎能够共享整个浏览器会话并因此工作的 XmlHttpRequests 来解决 iGoogle 问题。我正在尝试为 Mac 小部件，它似乎没有工作。Safari 工具栏扩展可以使用 Flash 吗？

在任何情况下发布此线程以获得更多见解，例如 Safari/Mac 是否像 iGoogle 并且不支持 Web 内容和 XmlHttpRequest 之间的共享会话（或者甚至不支持 cookie）。

仅供参考，我正在开发的应用程序如下，您可以尝试我必须调查的问题。当会话状态支持失败时，您会收到需要正确输入代码的错误消息（在这种情况下，这就是 Web 服务返回的内容，对用户没有多大帮助）。

[http://code.google.com/p/autosmsclients/](http://code.google.com/p/autosmsclients/)

我已经在那里托管了 Mac OS X 小部件和 Safari 扩展的代码。

# javascript - 如何在javascript中一个一个地执行批处理文件

> ID：11272429
> 
> 赞同：0
> 
> 时间：2012-06-30T07:47:11.453
> 
> 标签：javascript

我必须在 JavaScript 中执行两个批处理文件。以下是我的代码：

```
var shell = new ActiveXObject('WScript.Shell');
shell.Run('c:\\batch1.bat');
shell.Run('c:\\batch2.bat'); 
```

根据上面的代码发生的是两个批处理文件同时执行。但是，我希望先执行batch1.bat，然后当它完成执行时，它应该从执行batch2.bat 开始。如何在 JavaScript 中做到这一点。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:49:37.027

一个简单的解决方案是从 batch1 调用 batch2。它们不是同时执行的，只是彼此非常接近。

也试试：

```
result = shell.Run(stuff, true); 
```

如这篇文章所示：[如何以编程方式等待 Shell 命令完成运行？](https://stackoverflow.com/questions/5968356)

# c# - 我们如何在 Drupal CMS 中集成我们的 C# 代码

> ID：11272430
> 
> 赞同：3
> 
> 时间：2012-06-30T07:47:30.840
> 
> 标签：c#, drupal, content-management-system

我们有 C# 代码，它是我们的后端。现在我们需要在我们用 Drupal 开发的网站中使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T08:08:48.280

据我所知，没有简单的方法可以做到这一点。你基本上有2个选择：

1.  用php重写代码。但是，可能无法做到这一点，这取决于代码的作用。
2.  将 c# 代码公开为外部 web 服务（例如使用 WCF），然后使用该 web 服务。Drupal 能够做到 -[更多信息](http://drupal.org/project/services/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:15:12.387

一个草率的解决方案也是在带有 iframe 的 Drupal 页面中显示您的 C# 页面。我也同意 empi 的回答，即根据您的要求在 php 或 Web 服务中重写代码。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-30T08:04:41.703

您可以在 C# 中构建 DLL 项目（类库）并将 DLL 用作 drupal 项目中的引用。
不确定这一点，以前从未做过。
你最好多研究。
但是，在另一个应用程序中使用 .NET 代码的最佳方法是将所需的代码构建到 DLL 项目中，并以您想要使用的任何语言使用。

# android - 从android中的当前获取过去7天的日期

> ID：11272431
> 
> 赞同：15
> 
> 时间：2012-06-30T07:47:38.713
> 
> 标签：android

我正在尝试获取今天日期前 7 天的日期。我正在使用 SimpleDateFormat 来获取今天的日期。

```
SimpleDateFormat sdf1 = new SimpleDateFormat("dd/MM/yyyy"); 
```

请指导我完成这个

更新了我认为最有用的答案

```
SimpleDateFormat sdf=new SimpleDateFormat("dd/MM/yyyy");
String currentDateandTime = sdf.format(new Date());
Date cdate=sdf.parse(currentDateandTime);
Calendar now2= Calendar.getInstance();
now2.add(Calendar.DATE, -7);
String beforedate=now2.get(Calendar.DATE)+"/"+(now2.get(Calendar.MONTH) + 1)+"/"+now2.get(Calendar.YEAR);
Date BeforeDate1=sdf.parse(beforedate);
cdate.compareTo(BeforeDate1); 
```

谢谢你的回复

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T07:53:25.283

使用`java.util.Calendar`，将其设置为今天的日期，然后减去 7 天。

```
Calendar cal = GregorianCalendar.getInstance();
cal.setTime(new Date());
cal.add(Calendar.DAY_OF_YEAR, -7);
Date 7daysBeforeDate = cal.getTime(); 
```

**编辑：**在 Java 8 中，使用包中的类可以更容易地完成`java.time`：

```
final LocalDate date = LocalDate.now();
final LocalDate dateMinus7Days = date.minusDays(7);
//Format and display date
final String formattedDate = dateMinus7Days.format(DateTimeFormatter.ISO_LOCAL_DATE);
System.out.println(formattedDate); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T07:55:12.003

你可以试试这个

```
import java.util.Calendar;

public class AddDaysToCurrentDate {

  public static void main(String[] args) {

    //create Calendar instance
    Calendar now = Calendar.getInstance();

    System.out.println("Current date : " + (now.get(Calendar.MONTH) + 1)
                        + "-"
                        + now.get(Calendar.DATE)
                        + "-"
                        + now.get(Calendar.YEAR));

    //add days to current date using Calendar.add method
    now.add(Calendar.DATE,1);

    System.out.println("date after one day : " + (now.get(Calendar.MONTH) + 1)
                        + "-"
                        + now.get(Calendar.DATE)
                        + "-"
                        + now.get(Calendar.YEAR));

    //substract days from current date using Calendar.add method
    now = Calendar.getInstance();
    now.add(Calendar.DATE, -10);

    System.out.println("date before 10 days : " + (now.get(Calendar.MONTH) + 1)
                        + "-"
                        + now.get(Calendar.DATE)
                        + "-"
                        + now.get(Calendar.YEAR));

  }
}

/*
Typical output would be
Current date : 12-25-2007
date after one day : 12-26-2007
date before 10 days : 12-15-2007
*/ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T07:52:00.083

[Android 获取日期前 7 天（一周）](https://stackoverflow.com/questions/3747490/android-get-date-before-7-days-one-week)

```
Date myDate = dateFormat.parse(dateString); 
```

然后要么计算出你需要减去多少毫秒：

```
Date newDate = new Date(myDate.getTime() - 604800000L); // 7 * 24 * 60 * 60 * 1000 
```

或者使用 java.util.Calendar 类提供的 API：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(myDate);
calendar.add(Calendar.DAY_OF_YEAR, -7);
Date newDate = calendar.getTime();
Then, if you need to, convert it back to a String: 
```

最后

```
String date = dateFormat.format(newDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-03T06:58:42.303

您可以使用此 kotlin 函数获取当前日期之前的任何日期。

```
/**
 * get specific date before current date
 * [day] number of day
 * [month] number of month
 * [year] number of year
 * [count] number of day, month, year
 *
 * return date
 */
fun getBeforeDate(day: Boolean = false, month: Boolean = false, year: Boolean = false, count: Int = 0): String{

    val currentCalendar = Calendar.getInstance()
    val myFormat = "dd/MM/yyyy"  // you can use your own date format
    val sdf = SimpleDateFormat(myFormat, Locale.getDefault())
    if (day){
        currentCalendar.add(Calendar.DAY_OF_YEAR, -count)
    }else if(month){
        currentCalendar.add(Calendar.MONTH, -count)
    }else if(year){
        currentCalendar.add(Calendar.YEAR, -count)
    }else{
        // if user not provide any value then give current date
        currentCalendar.add(Calendar.DAY_OF_YEAR, 0)
        // or you can throw Exception
        //throw Exception("Please provide at least one value")
    }

    return sdf.format(currentCalendar.time)
} 
```

# c++ - 计算 (a^b)%MOD

> ID：11272437
> 
> 赞同：9
> 
> 时间：2012-06-30T07:48:53.667
> 
> 标签：c++, math

我想编写计算 pow(a,b)%MOD 值的代码。我使用 C++ 编写代码。

但问题是 b 的值可能非常大。我知道 log(b) 时间复杂度方法。但是，b 的值可能不适合 C++ 的“long long”数据类型。例如 b 可以是第 1000000000 个斐波那契数。如此大的数字的精确计算本身是不可能的（在时间限制内）。

PS：

*   pow(a,b) 表示 a*a*a*a*... b 次。
*   X % MOD 是指 X 除以 MOD 所得的余数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T08:15:45.387

这是一个典型的任务。请（或者，真的，请！）阅读有关[Euler 的 totient 函数的](http://en.wikipedia.org/wiki/Euler%27s_totient_function)信息。

然后是[欧拉定理](http://en.wikipedia.org/wiki/Euler%27s_theorem)。

问题是您可以将 a^b 大幅减少到 a^(b % phi(MOD))。是的，您将需要某种整数分解方法，但仍然没有关于实际计算所需功率的疯狂想法。

在我年轻的时候，我们手工制作了这样的样本 :) 即使数字远远超出 32/64 位范围。

编辑：嗯，你生活和学习。2008年获得的结果是：

“totient 是 gcd 的离散傅立叶变换：(Schramm (2008))”

所以计算 phi(b) 不需要知道它的因数。

编辑（2）：

[Carmichael 函数](http://en.wikipedia.org/wiki/Carmichael_function)是您需要计算得到任何 a、b 和 MOD 的正确答案的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-09T15:56:48.393

我用这个功能来解决这个问题

UVA 374 - 大模组

[http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=310](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=310)

```
// a^b % T

// with Exponentiation by squaring (http://en.wikipedia.org/wiki/Exponentiation_by_squaring#Basic_method)

// if a very large use
// R=(unsigned long long)(R*a)%T;

int restOfPot(long long a,int b,int T)
{
    a%=T;
    long long R=1;

    while(b)
    {
        if(b&1) R=(R*a)%T;
        a=(a*a)%T;
        b>>=1;
    }

    return int(R);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T08:22:31.637

要处理非常大的数字，请查看[boost 的 Multiprecision](http://www.boost.org/doc/libs/1_55_0/libs/multiprecision/doc/html/index.html)库。它有一个 powm() 函数可以很好地用于此目的。

来自[泛型整数运算](http://www.boost.org/doc/libs/1_55_0/libs/multiprecision/doc/html/boost_multiprecision/tut/gen_int.html)：</p>

> ```
> template <class Integer>
> Integer powm(const Integer& b, const Integer& p, const Integer& m); 
> ```
> 
> 返回 b ^p % m。

例子：

```
#include <boost/multiprecision/cpp_int.hpp>

boost::multiprecision::cpp_int pow("8912627233012800753578052027888001981");
boost::multiprecision::cpp_int mod("0x86f71688cdd2612c117d1f54bdae029");
boost::multiprecision::cpp_int base(12345);

boost::multiprecision::cpp_int result = powm(base, pow, mod);

std::cout << "result is: " << result << std::endl; 
```

印刷：

```
result is: 5758534182572671080415167723795472693 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T07:56:22.920

首先：`^`在 C/C++ 中**不是**幂的运算符。事实上，没有运营商可以做到这一点。`^`表示按位**XOR**。您必须使用`pow(base, exp)`可以在标题`math.h`或`cmath`.

对于如此庞大的数字，使用`double`或`long double`（确切的长度和生成的数据类型可能因您的平台而异），但有时您会偶然发现精度问题，因此根据您的用例，您最好的选择可能是使用的值的大小自定义数据类型（编辑：例如来自链接问题之一中的库之一）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T07:59:24.417

我建议使用专门的数学库。这看起来也像加密，所以我建议使用加密库。GNU 一定有一个你可以使用的。这是因为在加密货币中，在许多情况下，可能会选择指数以使用普通数学库无法假设的快捷方式进行有效计算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-09T09:48:51.097

> 但是，b 的值可能不适合 C++ 的“long long”数据类型。例如 b 可以是第 1000000000 个斐波那契数。

对于这样的事情，有一个简单的解决方法：召回

> a^(b+c) == a^b * a^c mod d

您可以使用与计算斐波那契数相同的递归来计算您询问的特定产品——您根本不需要大数或模幂！

有时出现的另一个版本是

> a^(b*c) = (a^b)^c mod d

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-24T07:17:09.737

```
#include<bits/stdc++.h>
using namespace std;

#define mod 1000000007
#define ll long long

ll power(ll x, ll y)
{
    if ( y == 0)
        return 1;
    ll temp = power(x, y / 2);
    if (y % 2 == 0)
        return (temp * temp) % mod;
    else
        return (((temp * temp) % mod) * x) % mod;
}
ll dmod(ll x)
{  
    return ((x + mod) % mod);
}

ll modular_power(ll x, ll y)
{
    ll ans = 1;
    while (y)
    {
        if (y & 1)ans = dmod(ans * x);
        y /= 2;
        x = dmod(x * x);
    }
    return ans;
}

int main()
{ 
    ll a, b;
    cin >> a >> b;
    ll ans1 = modular_power(a, b);
    ll ans2 = power(a, b);
    //  both answers are same
    cout << ans1 << " " << ans2 ;
} 
```

# objective-c - IB中的核心数据关系绑定

> ID：11272438
> 
> 赞同：0
> 
> 时间：2012-06-30T07:49:01.837
> 
> 标签：objective-c, xcode, macos, core-data, cocoa-bindings

我有一个简单的程序，将购买信息存储在核心数据存储中。该模型类似于以下内容。

实体：Student(lastName,firstName) 与 (BoughtPackage) 的关系

BuyPackage 与 (Payment) 和 (Package) 的关系

付款（类型，金额）

包装（名称，价格）

结构看起来像 ![在此处输入图像描述](../Images/527f6a75eaccbba08c240eaacab40d08.png)

我想首先在表格中显示学生列表，然后在详细信息表中格式化我的那个学生的购买。

到目前为止，我已经能够创建一个 NSArrayController 来保存 Student 实体的数据，但不知道如何传播购买详细信息表。我将如何单独使用 IB 来完成此任务，或者有可能吗？如果是这样，我将如何以编程方式进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:14:21.790

是的，无需编写任何代码即可主要在 IB 中执行此操作。但这对于SO答案来说太宽泛了

你真的需要阅读

[https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/cocoabindings.html](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/cocoabindings.html)

文档集中有一个教程，标题为

> 使用绑定开发 Cocoa 应用程序简介：教程

我找不到网页链接。随便搜一下标题。

但也要整理你的模型。看起来你所有的关系都是一对一的

例如。我希望学生可能有很多 BoughtPackages，因此存在一对多的关系，并且与 BoughtPackage 到付款的关系相同。

祝你好运

# javascript - 使用 Python 加密并在 jQuery/Javascript 中解密？

> ID：11272450
> 
> 赞同：0
> 
> 时间：2012-06-30T07:50:33.420
> 
> 标签：javascript, python, encryption

我有一些 JSON 数据需要在将其发送到客户端之前进行加密。我可以像这样使用 pycrpto 加密数据：

```
from Crypto.Cipher import AES
key = '0123456789abcdef'
mode = AES.MODE_CBC
encryptor = AES.new(key, mode)
text = jsonData
ciphertext = encryptor.encrypt(text) 
```

然后我可以将它发送到客户端。现在我需要使用 jQuery/Javascript 将密文转换为纯文本。[jsaes](http://point-at-infinity.org/jsaes/)是 Javascript 中 AES 的实现。它可以用来将数据解密回纯文本吗？或者我可以使用其他任何库来完成此任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:58:04.743

你直截了当的回答就是韦斯所说的。

然而，存在安全传输密钥的问题。（可以使用私钥/公钥机制，但是加密数据没有意义，因为您已经使用了 P/P 机制）

SSL/HTTPS 是为客户端和服务器之间的安全“交易”而创建的，我建议您使用这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:53:11.537

您应该能够使用任何 AES 实现对其进行解密，只需确保使用`mode`与加密它的相同（在本例中为密码块链或 CBC）

[http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)

PyCrypto 虽然不错，但对你来说可能有点太低了。你可能想看看在 Python 中使用类似 GPGME 的东西：http: [//pyme.sourceforge.net/](http://pyme.sourceforge.net/)

# c++ - 编译时的整数值

> ID：11272451
> 
> 赞同：5
> 
> 时间：2012-06-30T07:50:44.213
> 
> 标签：c++, enums, compile-time

我必须在不同的文件中用一些整数 id 写一些常量。例如：

```
#define MESSAGE_FIRST 0 
```

在其他文件中：

```
#define MESSAGE_ANOTHER 1 
```

有什么方法可以在编译时自动获取该 ID？就像是：

```
#define MESSAGE_AUTO GetNextId() 
```

我不能在这里使用枚举，因为这个指令将在不同的文件中。

谢谢。

ps GCC, Linux

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T08:38:51.257

您可以使用继承和函数重载进行编译时计数器：

```
template<unsigned int n> struct Count { bool data[n]; };
template<int n> struct Counter : public Counter<n-1> {};
template<> struct Counter<0> {};
Count<1> GetCount(Counter<1>);

#define MAX_COUNTER_NUM 64
#define COUNTER_VALUE (sizeof(GetCount(Counter<MAX_COUNTER_NUM + 1>())) / sizeof(bool))
#define INC_COUNTER Count<COUNTER_VALUE + 1> GetCount(Counter<COUNTER_VALUE + 1>); 
```

[您可以在这里](http://ideone.com/0t0Np)看到它的实际效果。也适用于 msvc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:07:33.157

你说你正在使用GCC。GCC 有一个（AFAIK per-file）宏调用`__COUNTER__`，每次使用后递增一。

请注意，这是一个扩展，不包含在标准 C++ 中。

另一种选择是使用枚举：

```
enum {
    FIRST = 0,
    SECOND,
    THIRD
}; 
```

或者您可以使用如下预处理器指令手动执行此操作：

```
#define FIRST 0
#define SECOND (1 + FIRST)
#define THIRD (1 + SECOND) 
```

# node.js - express.js 中的中间件功能范围

> ID：11272454
> 
> 赞同：9
> 
> 时间：2012-06-30T07:51:09.050
> 
> 标签：node.js, scope, express, connect, middleware

我正在学习 express.js / node.js 并且对 javascript 原型模型有很好但不是很好的理解。因此，我对中间件在 express.js 的路由机制中的堆叠方式有点困惑。

假设我们有这个[代码](http://expressjs.com/guide.html#route-middleware "来源")

```
function andRestrictTo(role) {
    return function(req, res, next) {
       req.authenticatedUser.role == role
           ? next() : next(new Error('Unauthorized'));
   }
}

app.del('/user/:id', loadUser, andRestrictTo('admin'), function(req, res){
    res.send('Deleted user ' + req.user.name);
}); 
```

由于 andRestrictTo(role) 返回一个中间件，它在路由链中执行——我明白了。然而：

1.  返回函数中req、res、next参数从何而来？我猜想“链”以某种方式对其进行排队并分配参数，但这对于更深入的理解来说有点太模糊了......

2.  作为 next 参数引发的 Error 发生了什么？错误是否会破坏中间件链？

3.  如果我想将限制机制打包到一个单独的文件/模块（如安全框架）中，该怎么做？

如果有人能指出基本想法会很酷:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T10:24:39.140

1)`req`并且`res`来自 Express JS 的源头，即 Node.JS`http.createServer`处理程序（这两个变量在实际命中 Express 处理程序之前都进行了一些修改）。此时 Express 保存了所有路由的数组，并对每条路由应用`req`,`res`和函数。函数知道我们目前在哪个中间件（由于一些范围技巧）并像这样调用它：带你到下一个处理程序。`next``next``next()`

2）当错误被引发（实际上不是*引发*，而是传递给）时，该`next`函数会将您带到错误处理程序，您可以使用`error`方法定义错误处理程序，`app`例如（取自[Express 文档](http://expressjs.com/guide.html#error-handling)）：

```
app.error(function(err, req, res, next){
    if (err instanceof NotFound) {
        res.render('404.jade');
    } else {
        next(err);
    }
}); 
```

提升`error`会破坏中间件链并将您带到错误处理程序链（如您所见，您也可以`next`在错误处理程序中使用）。

3）一点都不难：

**安全.js**

```
module.exports = function(req, res, next) {
    console.log('Security middleware!');
    next();
} 
```

**应用程序.js**

```
app.get('/', require('./security'), ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:23:20.867

1) Express 的（实际上是 Connect 的）路由代码接受一个 HTTP 请求并开始将它传递给所有中间件函数，使用请求附带的`req`and调用它们中的每`res`一个，并添加`next`调用路由代码的部分将控制权传递给链中的下一个中间件函数。

2) 没有引发错误（只有`throw`语句实际上可以引发错误）。路由代码识别出中间件函数返回了一个`Error`对象，并适当地处理它。

3）您只需将其放入导出的模块中`andRestrict`（如果它是模块中唯一可外部使用的函数，您将设置`exports=andRestrict`然后使用 调用它`require('mymodule')`）；否则，您将`exports.andRestrict=<body of your function>`分两步设置和调用它：`mymodule=require('mymodule')`早期和`mymodule.andRestrict`稍后（例如，当将其作为中间件传递时））。

# spring - 为 Spring Web RestTemplate 设置 Apache HttpComponents PoolingClientConnectionManager

> ID：11272456
> 
> 赞同：3
> 
> 时间：2012-06-30T07:51:43.313
> 
> 标签：spring

我正在使用`RestClient`连接到远程 JSON API。以前，在 Spring 3.0 中，我使用的是 Commons HTTPClient。我发现由于旧的多线程连接管理器中有很多锁定，性能很低。

我现在想尝试 Apache HttpComponents 4.2，因为看起来他们修复了锁定。我想将`PoolingClientConnectionManager`用作构造函数参数`DefaultHttpClient`，它将为不同的类自动装配。

挑战在于设置`PoolingClientConnectionManager`连接管理器。我想要与 JSON API 提供程序的大量并发连接。这些使用`HttpRoute`对象来表示主机名。但是，如[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/PoolingClientConnectionManager.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/PoolingClientConnectionManager.html)中所述，`PoolingClientConnectionManager`使用一种`setMaxPerRoute(HttpRoute, int maxConnections)`方法。

我如何设置连接管理器一个 Spring context.xml 文件，因为它不使用简单的设置器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:09:24.363

如何通过扩展 PoolingClientConnectionManager 来包装它，然后使用表示路由/最大值的 Bean 创建设置器。IE。

```
// Your bean
public class RouteMax() {
  private HttpRoute httpRoute;
  private int max;
  ... setters/getters
}

// Extending the PoolingClientConnectionManager
...
public class CustomPoolingClientConnectionManager extends PoolingClientConnectionManager {
...
public setRouteMax(RouteMax routeMax) {
  super.setMaxPerRoute(routeMax.getHttpRoute(), routeMax.getMax());
} 
```

..然后在您的 Spring 配置中，您可以使用 RouteMax bean 设置 routeMax 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T07:04:35.080

在 Spring context.xml 文件中，使用 PoolingClientConnectionManager 配置 httpClient 的更好方法是：

```
<bean id="httpClient" class="org.apache.http.impl.client.DefaultHttpClient">
<constructor-arg>
<bean class="org.apache.http.impl.conn.PoolingClientConnectionManager">
<property name="maxTotal" value="100" />
<property name="defaultMaxPerRoute" value="50" />
</bean>
</constructor-arg>
</bean> 
```

maxTotal 和 defaultMaxPerRoute 属性应该根据手册进行配置：

[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e627](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e627)

# linux - 在 Linux 主机上放置 PHP 框架的位置

> ID：11272460
> 
> 赞同：1
> 
> 时间：2012-06-30T07:52:09.160
> 
> 标签：linux, hosting, vps, php

我有一个托管我的 5 个网站的 Linux (CentOS) 主机。有两种不同的 PHP 框架（Yii 和 Zend），我的每个网站都基于其中一个。哪里是存放它们的合适地方，有什么权限？我虽然有两种变体，但我怀疑其中任何一种都是正确的做法。

在我的项目中，例如`/home/example.com/public_html/index.php`我会做`require_once($pathToFrameworkInitFile)`

变体 1：

在,权限为 755`/usr/local/`的用户下：`root`

```
/usr/local/frameworks/yii/yii-1.1.9/
/usr/local/frameworks/yii/yii-1.1.10/
/usr/local/frameworks/zend/zend-1.11.12/ 
```

变体 2：

在`frameworks`权限为 755 的用户下： /home/frameworks/yii/yii-1.1.9/ /home/frameworks/yii/yii-1.1.10/ /home/frameworks/zend/zend-1.11.12/

变体 3：

```
I hope that you might suggest something better. 
```

如您所想-我对主机具有完全的root访问权限，并且我自己管理网站和主机，因此我正在寻找最佳（或至少足够好）的做法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:54:36.183

在阅读了有关[Unix FS Hierarchy Standard](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)的更多信息后，我决定将框架放入：

```
/opt/php-frameworks/yii-(version)
/opt/php-frameworks/zend-(version) 
```

具有 755 权限，在 root 帐户下。大多数最佳实践表明该框架应该脱离 docroot，并且`/opt`对于 php 框架之类的库来说似乎是理想的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:02:19.990

这是非常主观的。你可以把它放在你想要的地方。我喜欢把 web 应用程序放在`/opt/www/project`or中`/var/www/project`。

而且我不喜欢分享应用程序的框架部分。考虑将项目移动到新服务器，或更新框架。

所有者必须是更改文件的用户。如果您是 root，则让 root 拥有框架文件。

# php - 在 PHP 中将悉尼日期时间更改为 GMT

> ID：11272464
> 
> 赞同：0
> 
> 时间：2012-06-30T07:52:46.920
> 
> 标签：php, datetime

我有一个包含日期/时间的字符串，我知道它目前在澳大利亚/悉尼时区。

我现在需要将其更改为 GMT 时间。

我试过这个，但它没有改变日期：

```
$dateString = '2012-06-29 11:09:12'; // this is in Australia/Sydney timezone
$gmtDate = gmdate('Y-m-d H:i:s', strtotime($dateString));
print_r($gmtDate); // output is 2012-06-29 11:09:12 
```

如何以某种方式从 gmt 中减去偏移量，对不起，有点困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T07:57:01.237

也许您的网络服务器没有设置在澳大利亚/悉尼时区？以下答案将对您有所帮助：[如何将 php 日期格式转换为 GMT，反之亦然？](https://stackoverflow.com/questions/5454779/how-to-convert-php-date-formats-to-gmt-and-vice-versa)

这是您可以执行的操作：

```
$melbourne = new DateTimeZone('Australia/Melbourne');
$gmt = new DateTimeZone('GMT');

$date = new DateTime('2011-12-25 00:00:00', $melbourne);
$date->setTimezone($gmt);
echo $date->format('Y-m-d H:i:s');
// Output: 2011-12-24 13:00:00
// At midnight on Christmas eve in Melbourne it will be 1pm on Christmas Eve GMT.

echo '<br/>';

// Convert it back to Australia/Melbourne
$date->setTimezone($melbourne);
echo $date->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T07:57:33.047

在脚本中使用 ini_set() 将当前时区设置为例如在洛杉矶使用的时区，您可以这样做：

```
ini_set('date.timezone', 'America/Los_Angeles'); 
```

对日期和时间函数的所有后续请求都将使用美国/洛杉矶作为时区。

如果您需要在脚本中执行此操作，例如，如果您使用的 Web 服务器与您希望在脚本中使用的日期和时间位于不同的时区，那么您应该确保在开始时进行调用您的脚本（或者，如果可以的话，将设置移到 .htaccess 文件中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T08:20:27.847

PHP 支持时区，请在此处查看：

[date_default_timezone_set 函数](http://php.net/manual/en/function.date-default-timezone-set.php) [支持的时区列表](http://php.net/manual/en/timezones.php)

前任：

```
date_default_timezone_set('Australia/Sydney');
echo date('Y-m-d H:i:s') . '<br/>';

date_default_timezone_set('Asia/Jakarta');
echo date('Y-m-d H:i:s') . "<br/>"; 
```

# c# - 在列表视图中添加扩展器作为项目

> ID：11272465
> 
> 赞同：0
> 
> 时间：2012-06-30T07:52:54.623
> 
> 标签：c#, wpf, wpf-controls

我有一个`ListView`我想在其中插入一个`Expander`控件作为项目（例如在第三列中）。什么功能/方法`ListView`可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:42:58.337

您可以像这样更改 ItemTemplate：

```
<ListView>
  <ListView.ItemTemplate>
    <DataTemplate>
      <Expander Header="{Binding Title}">
        <TextBlock Text="{Binding Description}" />
      </Expander>
    </DataTemplate>
  </ListView.ItemTemplate>
</ListView> 
```

# html - Flask-Jinja2 FOR 语句不打印假定值

> ID：11272466
> 
> 赞同：1
> 
> 时间：2012-06-30T07:52:57.037
> 
> 标签：html, flask, jinja2

我是一个尝试 Flask/Jinja2 和 SQL-Alchemy 的新手。

使用 Jinja2 模板时，我有一个关于 html 输出的问题。

我的视图函数如下所示：

```
from app import app
from flask import render_template
from init_database import init_db
from app.models import Provider

@app.route('/update')
def update():
    provider = Provider.query.get_or_404(1)
    return render_template("update.html", provider=provider) 
```

我的模板如下所示：

```
{% extends "layout.html" %}
{% block content %}
<div class="page">
    <ul>
    { % for provider in prov %}
        <li>
            {{ provider.nzbprovider }}
            {{ provider.rssfeed }}
        </li>
    { % endfor %}
    </ul>
</div>
{% endblock %} 
```

当我运行应用程序时，浏览器中的输出如下所示：

```
{ % for provider in prov %}
Peter Johnson
Michael Manning
{ % endfor %} 
```

为什么它会显示 Jinja 标签？我忘记了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:59:35.907

Jinja 标记分隔符中有空格：`{ %`将（带空格）更改为`{%`（不带空格）

# silverlight - 用于 Windows Phone 的 SOAP

> ID：11272473
> 
> 赞同：1
> 
> 时间：2012-06-30T07:54:30.787
> 
> 标签：silverlight, windows-phone-7, soap, windows-phone-7.1, windows-phone

谁能指导我如何构建 SOAP 服务并将其托管在服务器中并将其回调到 Windows Phone 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:19:27.363

MSDN 上有大量关于在 Windows Phone 上使用 Web 服务（以及 REST 服务）的资源。你可以在这里找到其中的一些：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487167%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487167%28v=vs.92%29.aspx)

[http://msdn.microsoft.com/en-us/library/cc197958%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc197958%28VS.95%29.aspx)

[http://hadyelsahar.wordpress.com/2011/10/08/webservices-in-wp7/](http://hadyelsahar.wordpress.com/2011/10/08/webservices-in-wp7/)

完整的视频教程位于：

[http://msdn.microsoft.com/en-us/gg241261.aspx](http://msdn.microsoft.com/en-us/gg241261.aspx)

希望，这些链接会有所帮助。

Mayur Tendulkar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T07:58:34.717

也许[这](http://msdn.microsoft.com/en-us/gg241261.aspx)对你有帮助。

# performance - 用户空间与内核空间程序性能差异

> ID：11272478
> 
> 赞同：7
> 
> 时间：2012-06-30T07:55:17.070
> 
> 标签：performance, caching, kernel, cache-control

我有一个顺序用户空间程序（某种内存密集型搜索数据结构）。该程序的性能（以 CPU 周期数衡量）取决于底层数据结构的内存布局和数据缓存大小 (LLC)。

到目前为止，我的用户空间程序已经调到死了，现在我想知道是否可以通过将用户空间代码移入内核（作为内核模块）来获得性能提升。我可以想到以下提高内核空间性能的因素......

1.  没有系统调用开销（每个系统调用获得多少 CPU 周期）。这不太重要，因为我几乎没有在我的程序中使用任何系统调用，除了在程序启动时分配内存。
2.  控制调度，我可以创建一个内核线程并让它在给定的内核上运行而不会被丢弃。
3.  我可以使用 kmalloc 内存分配，因此可以更好地控制分配的内存，还可以通过控制分配的内存来更精确地控制缓存着色。值得尝试吗？

我对内核专家的问题...

*   我是否错过了上述列表中可以进一步提高性能的任何因素？
*   是否值得尝试，或者直接知道我不会得到太多的性能改进？
*   如果内核中的性能提升是可能的，是否有任何估计它可以获得多少增益（任何理论猜测）？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T10:05:57.743

**关于第 1 点**：内核线程仍然可以被抢占，所以除非你进行大量系统调用（你不是），否则这不会给你带来太多好处。

**关于第 2 点**[`sched_setaffinity()`](http://linux.die.net/man/2/sched_setaffinity)：您可以在 Linux 上使用通过设置其亲和性将线程固定到特定核心。

**关于第 3 点**：您期待什么额外的控制？您已经可以使用`mmap()`. 这已经让您可以控制缓存的集合关联性，并且您可以将内联汇编或编译器内在函数用于任何手动预取提示或非临时写入。在内核和用户空间中分配的内存之间的主要区别在于`kmalloc()`分配有线（不可分页）内存。我不明白这会有什么帮助。

我怀疑您会在使用 SIMD、多线程或进行进一步的算法或内存优化的并行化方面看到更好的投资回报率。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T11:30:11.880

为您的程序创建一个专用`cpuset`程序并将所有其他进程移出它。然后使用 FIFO 调度策略将您的进程的优先级提高到实时，例如：

```
struct sched_param schedparams;
// Be portable - don't just set priority to 99 :)
schedparams.sched_priority = sched_get_priority_max(SCHED_FIFO);
sched_setscheduler(0, SCHED_FIFO, &schedparams); 
```

不要在单核系统上这样做！

保留足够大的堆栈空间`alloca(3)`并触及所有分配的堆栈内存，映射足够多的堆空间，然后使用`mlock(2)`或`mlockall(2)`固定进程内存。

即使您的程序是顺序程序，如果在多插槽 Nehalem 或 post-Nehalem Intel 系统或 AMD64 系统上运行，NUMA 效果也会减慢您的程序。使用 API 函数`numa(3)`来分配和保持尽可能靠近程序执行的 NUMA 节点的内存。

尝试其他编译器 - 其中一些可能比您当前使用的编译器优化得更好。例如，英特尔的编译器在布局指令方面非常激进，以便从乱序执行、流水线和分支预测中受益。

# jquery - 打印区域功能不起作用

> ID：11272479
> 
> 赞同：1
> 
> 时间：2012-06-30T07:55:37.220
> 
> 标签：jquery

我正在尝试使用 jQuery`printarea()`函数在我的网页上打印特定区域。它不起作用并返回错误。并且它显示像 tolowerCase 的错误是未定义的 *错误*

> 返回 (media.toLowerCase() == "" || media.toLowerCase() == "打印")

*jQuery*

```
function printDiv() {
    $('#dvTokenArea').printArea();
}​

<div id="dvTokenArea" runat="server">
     <asp:Label ID="lblTokenNumber" runat="server" Text="Print ME !!!!!!!!!!!!">    </asp:Label>
</div>
<asp:Button ID="btnPrintToken" runat="server" Text="Print"
     OnClientClick="javascript:printDiv();" />​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:22:38.737

正如 Pencho Ilchev 所说，这是由 .attr() 的 jQuery 1.6 BC 中断引起的。这是 PrintArea 插件的固定分支：

[https://github.com/djozsef/jquery.printarea.js](https://github.com/djozsef/jquery.printarea.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:05:16.923

这是插件中返回错误的代码：

```
$(document).find("link")
            .filter(function(){
                    return $(this).attr("rel").toLowerCase() == "stylesheet";
                })
            .filter(function(){ // this filter contributed by "mindinquiring"
                    var media = $(this).attr("media");
                    return (media.toLowerCase() == "" || media.toLowerCase() == "print")
                })
            .each(function(){
                    head += '<link type="text/css" rel="stylesheet" href="' + $(this).attr("href") + '" >';
                }); 
```

您没有提供足够的信息来确定，但我相信`media`您的元素没有属性，`link`并且您使用的是 JQuery 1.6 或更高版本，`undefined`如果未设置属性，则会返回。

[从 attr 文档：](http://api.jquery.com/attr/)

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。

因此，如果您没有`media`在属性设置为 的`link`元素`rel`上设置属性`stylesheet`，`toLowerCase()`则将在媒体上调用`undefined`.

# c# - 即使在使用 Flickr.Net API 时使用 Backgroundworker 后，表单 UI 也会冻结

> ID：11272482
> 
> 赞同：0
> 
> 时间：2012-06-30T07:56:07.117
> 
> 标签：c#, .net, winforms, dll, flickr

我正在尝试使用 Flickr.net API 上传一些图像。图像已上传，但用户界面冻结。我已在后台工作人员中插入了上传代码

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    foreach (var item in imagelist)
    {
        flickr.UploadPicture(item, Path.GetFileName(item), null, null, true, false, true);
    }
    MessageBox.Show("Success");
} 
```

flickr 对象是之前从另一个表单创建的，并传递给这个表单。`if(worker.IsBusy==false){backgroundWorker1.RunWorkerAsync();}`当一个按钮被点击时，我打电话给工人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:45:21.677

造成这种情况的两个常见原因是，您的代码段太简短而无法缩小范围。首先是 ReportProgress 方法，事件处理程序在 UI 线程上运行。如果您过于频繁地调用它，那么 UI 线程可能会被调用请求淹没并花费太多时间来处理它们。它不再执行其常规职责，例如响应绘制请求和处理用户输入。因为一旦处理完调用请求，就会有另一个等待被调度。UI 线程实际上并没有被冻结，它看起来就是这样。净效果是一样的。您需要通过减慢工作人员的速度或减少调用 ReportProgress 的频率来修复它。

第二个原因是您的*闪烁*对象不是线程安全的，并且它本身确保它以线程安全的方式使用。通过自动编组从工作线程到 UI 线程的调用。这对于 COM 组件很常见，这种封送处理是 COM 的核心特性。同样，UI 线程实际上并没有被冻结，但它仍然不会处理绘画和输入，因为它正忙于上传照片。您需要通过在工作线程上创建*闪烁对象来修复它。*很有可能您无法使用 BackgroundWorker 执行此操作，因此此类组件通常需要一个 STA 线程来泵送消息循环。这需要 Thread.SetApartmentState() 和 Application.Run()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:09:38.560

如果您正在执行以下操作：

```
while(worker.IsBusy)
{
} 
```

等待它完成，这将挂起，因为它将 UI 线程绑定在循环中，并且由于后台工作人员需要调用 UI 线程以安全地设置忙属性，因此存在死锁。

# algorithm - 对单链表进行排序的最佳就地排序算法是什么

> ID：11272492
> 
> 赞同：7
> 
> 时间：2012-06-30T07:58:12.657
> 
> 标签：algorithm, mergesort, space-complexity

我一直在阅读就地排序算法来对链表进行排序。根据维基百科

> 合并排序通常是对链表进行排序的最佳选择：在这种情况下，实现合并排序相对容易，它只需要`Θ(1)`额外的空间，而链表的缓慢随机访问性能使得其他一些算法（例如快速排序）表现不佳，而其他算法（例如堆排序）则完全不可能。

据我所知，归并排序算法*不是*就地排序算法，并且具有`O(n)`辅助的最坏情况空间复杂度。现在，考虑到这一点，我无法确定是否存在合适的算法来对具有`O(1)`辅助空间的单链表进行排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T10:10:49.663

**正如 Fabio A. 在评论中指出的那样，以下合并和拆分实现所隐含的排序算法实际上需要 O(log n) 堆栈帧形式的额外空间来管理递归（或它们的显式等效项）。使用完全不同的自下而上方法可以实现 O(1) 空间算法。**

这是一个 O(1) 空间合并算法，它通过将较低项目从每个列表的顶部移动到新列表的末尾来简单地构建一个新列表：

```
struct node {
    WHATEVER_TYPE val;
    struct node* next;
};

node* merge(node* a, node* b) {
    node* out;
    node** p = &out;    // Address of the next pointer that needs to be changed

    while (a && b) {
        if (a->val < b->val) {
            *p = a;
            a = a->next;
        } else {
            *p = b;
            b = b->next;
        }

        // Next loop iter should write to final "next" pointer
        p = &(*p)->next;
    }

    // At least one of the input lists has run out.
    if (a) {
        *p = a;
    } else {
        *p = b;        // Works even if b is NULL
    }

    return out;
} 
```

`p`可以通过对要添加到输出列表的第一项进行特殊处理来避免指针到指针，但我认为我这样做的方式更清晰。

这是一个 O(1) 空间拆分算法，它简单地将一个列表分成 2 个大小相等的部分：

```
node* split(node* in) {
    if (!in) return NULL;    // Have to special-case a zero-length list

    node* half = in;         // Invariant: half != NULL
    while (in) {
        in = in->next;
        if (!in) break;
        half = half->next;
        in = in->next;
    }

    node* rest = half->next;
    half->next = NULL;
    return rest;
} 
```

请注意，`half`它只向前移动了一半的次数`in`。在此函数返回时，最初传递的列表`in`将被更改，使其仅包含第一个 ceil(n/2) 个项目，返回值是包含剩余 floor(n/2) 个项目的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:41:38.613

这不知何故让我想起了我对[荷兰国旗问题问题](https://stackoverflow.com/a/11214693/417685)的回答。

经过一番思考，这就是我的想法，让我们看看这是否可行。我想主要问题是合并排序在`O(1)`额外空间中的合并步骤。

我们对链表的表示：

```
[ 1 ] => [ 3 ] => [ 2 ] => [ 4 ]
  ^head                      ^tail 
```

您最终完成了此合并步骤：

```
[ 1 ] => [ 3 ] => [ 2 ] => [ 4 ]
  ^p                ^q       ^tail 
```

存在`p`和`q`我们要合并的段的指针。

只需在`tail`指针后添加节点。如果在尾部`*p <= *q`添加。`p`

```
[ 1 ] => [ 3 ] => [ 2 ] => [ 4 ] => [ 1 ]
  ^p       ^pp      ^q/qq    ^tail    ^tt 
```

否则，添加`q`.

```
[ 1 ] => [ 3 ] => [ 2 ] => [ 4 ] => [ 1 ] => [ 2 ]
  ^p       ^pp      ^q       ^qq/tail          ^tt 
```

（跟踪我们列表的结尾`q`变得很棘手）

现在，如果你移动它们，你会很快忘记你在哪里。您可以通过一种巧妙的方式来移动指针或将长度添加到等式中。我绝对更喜欢后者。方法变为：

```
[ 1 ] => [ 3 ] => [ 2 ] => [ 4 ]
  ^p(2)             ^q(2)    ^tail 
```

```
[ 3 ] => [ 2 ] => [ 4 ] => [ 1 ]
  ^p(1)    ^q(2)             ^tail 
```

```
[ 3 ] => [ 4 ] => [ 1 ] => [ 2 ]
  ^p(1)    ^q(1)             ^tail 
```

```
[ 4 ] => [ 1 ] => [ 2 ] => [ 3 ]
  ^p(0)/q(1)                 ^tail 
```

```
[ 1 ] => [ 2 ] => [ 3 ] => [ 4 ]
  ^q(0)                      ^tail 
```

现在，您可以使用该`O(1)`额外空间来移动元素。

# zend-framework - Zend_Loader 包含不抛出异常

> ID：11272497
> 
> 赞同：0
> 
> 时间：2012-06-30T07:58:39.037
> 
> 标签：zend-framework, exception, include, zend-loader

我发现当 Zend 尝试自动加载一个不存在的文件时，它会抛出一个我无法在 try/catch 块中捕获的错误。当我使用时`class_exists`也会发生这种情况。我已经通过破解 zend 解决了这个问题：

```
if ($once) {
    if (!@include_once ($filename)) {
        throw new Exception("Failed to include $filename");
    }
    // include_once $filename;
}
else {
    if (!@include ($filename)) {
        throw new Exception("Failed to include $filename");
    }
    // include $filename;
} 
```

注释掉的行是zend 的原件。现在我可以捕获无法包含文件时引发的异常。任何人都可以提出一种更清洁的方法来做到这一点，它不涉及黑客 zend 吗？

我在 Zend 版本 1.11.10 上，有问题的代码是 Zend_Loader 第 146 行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:35:37.943

而不是使用 include 或 include_once 尝试使用`Zend_Loader::loadClass()`

这是API：`Zend_Loader::loadClass($class, $dirs)`

一个例子：

```
Zend_Loader::loadClass('Container_Tree',
    array(
        '/home/production/mylib',
        '/home/production/myapp'
    )
); 
```

现在介绍一下它是如何工作的：

> 通过将下划线替换为操作系统的目录分隔符并附加*'.php'* ，将指定类的字符串转换为相对路径。在上面的示例中，*'Container_Tree'* 在 Windows 上变为*'Container\Tree.php' 。*
> 
> 如果*$dirs*是一个字符串或一个数组，*Zend_Loader::loadClass()* 按照提供的顺序搜索目录。第一个匹配文件被加载。*如果指定的$dirs*中不存在该文件，则搜索 PHP 环境的 include_path。
> 
> 如果加载后找不到文件或类不存在，*Zend_Loader::loadClass()* 抛出**Zend_Exception**。

这应该允许您对任何不存在的类使用 try/catch 块。Zend_Loader::loadFile() 也有类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:23:08.280

不要尝试自动加载不存在的类。如果由于某种原因您尝试自动加载的类可能存在也可能不存在，请使用`class_exists()`调用包装该部分代码。

我想不出你为什么要`class_exists()`在失败时抛出异常，因为它的唯一目的是让你检查类的存在。

# vim - 默认启用 Vim 语法高亮

> ID：11272501
> 
> 赞同：131
> 
> 时间：2012-06-30T07:59:14.900
> 
> 标签：vim, vim-syntax-highlighting

我知道如何通过在编辑器中运行来在 vim 中打开和关闭语法突出显示：

```
:syntax on/off 
```

但是我希望默认启用语法突出显示，所以我不必每次运行 vim 时都打开它。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-06-30T08:00:20.687

编辑您的`$HOME/.vimrc`(Unix/Linux/OSX) 或`$HOME/_vimrc`(Windows) 以包含以下行：

```
syntax on 
```

**编辑**

如果你在启动 Vim 时语法高亮不起作用，你可能没有 `$HOME/.vimrc`or （从现在开始`$HOME/_vimrc`统称为）。`vimrc`在这种情况下，您有两种选择：

*   创建一个空的`vimrc`.
*   复制`vimrc_example.vim`为您的`vimrc`（推荐，谢谢@oyenamit）。您可以`vimrc_example.vim`在运行时目录中找到。

运行时目录的位置因操作系统而异：

*   在我的系统（Arch Linux 和 Mac，感谢@totophe）上，它位于`/usr/share/vim/vim73`.
*   在 Windows 上，它位于`\Program Files\Vim\vim73`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-03T22:24:38.633

此外，要突出显示**特定文件类型**（或编程语言扩展名）的语法，您可以使用以下命令，而文件已经在 Vim 中打开并且您想尝试动态突出显示语法：

```
:set filetype=php 
```

或快捷方式：

```
:se ft=php 
```

上面的命令将改变当前打开文件的语法高亮，就像它应该是 PHP 代码一样。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-28T11:54:07.767

取消注释 vimrc 文件中的“syntax on”。

移动到目录，

```
cd /etc/vim/

vim vimrc 
```

现在搜索*“语法”* 并取消注释。保存并在 vim 中重新打开文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-09T03:52:04.717

对于由于使用未启用语法模块的 TurnKeyLinux 而到达这里的任何人，`vim-tiny`请尝试本文安装完整`vim`

[http://www.turnkeylinux.org/forum/support/20140108/solved-bash-command-not-found-after-replacing-package](http://www.turnkeylinux.org/forum/support/20140108/solved-bash-command-not-found-after-replacing-package)

**tl;博士**

```
# apt-get remove vim-tiny
# apt-get install vim
# hash vim
# vim 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-20T17:53:45.100

我还发现这是`vimtutor`.

`vimtutor`要找到它，您可以在终端（我在 Mac 上使用）中键入命令，然后向下滚动以查看是否有一个名为的课程`CREATE A STARTUP SCRIPT`（对我来说是第 7.2 课），其中描述了如何设置初始`vimrc`文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-18T19:52:08.097

在我的`$HOME/.vimrc`我加载了一个配色方案（solarized），发现我需要在加载插件`syntax on` *后放置。*如果是在加载插件之前它不起作用。

```
" this turns syntax highlighting on by default

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin 'lifepillar/vim-solarized8'

syntax on 
```

```
" this does not turn syntax highlighting on by default

syntax on

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin 'lifepillar/vim-solarized8' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-12T19:18:19.520

按照上述答案中的建议查找 vimrc_example.vim

```
Command : sudo find /usr -iname "vimrc_example.vim" 
```

# iphone - 图标已经包括光泽效果不起作用 ios 5

> ID：11272502
> 
> 赞同：0
> 
> 时间：2012-06-30T07:59:24.033
> 
> 标签：iphone, ios, ipad, ios5

我正在设置我的项目 info-plist 文件图标已经包含设置 yes.but 的光泽效果键。但是，在 iOS5 sdk 中不起作用，我正在尝试构建和清理我的项目文件夹但是，不起作用我尝试了很多方法但是，不适用于 ios5 sdk 和 Xcode 4.2.3。我正在设置我的项目信息列表，如下面的屏幕截图：

![在此处输入图像描述](../Images/62925b36fe6db1a48fadcb8511935839.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:44:40.623

正如您已经得到答案，对于 Xcode 4.2 (Snow leopard) 的用户，Dinesh 的解决方案将不起作用。在这里您可以右键单击 info.plist 文件，然后作为源代码打开。

寻找这个，并替换`<false/>`为`<true/>` 下`<key>UIPrerenderedIcon</key>`

```
<dict>
    <key>CFBundlePrimaryIcon</key>
    <dict>
        <key>CFBundleIconFiles</key>
        <array>
            <string>iconNormal.png</string>
            <string>iconRetina.png</string>
        </array>
        <key>UIPrerenderedIcon</key>
        <true/>
    </dict>
</dict> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:14:48.900

下面 xcode 最新版本上的大多数 iOS 5 图标错误发布我的分析器将完美地为我工作，我添加了 prerender 复选框勾选项目目标摘要！

跟随链接一定会有所帮助！

[图标已经包含光泽效果](https://stackoverflow.com/questions/6972650/icon-already-includes-gloss-effects/11272329#11272329)

欢迎！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:19:09.393

```
Just drag and drop the icon image in to place, here is the sample screenshot 
```

![在此处输入图像描述](../Images/c3f43f3b1132fc43590bf6b9a38afcec.png)

# jquery - 删除部分内的空元素组合

> ID：11272507
> 
> 赞同：1
> 
> 时间：2012-06-30T07:59:51.827
> 
> 标签：jquery

在多个部分（手风琴）中，我有段落和无序列表（动态生成）的组合。

我想要实现的是删除空标签/一个或另一个，如果为空，则两者都删除。如果“p”和“ul”元素都为空，则删除其父“节”。

```
<section>
    <span>-</span>
    <h3>(a)Heading</h3>
    <div class="acc-box" style="display: block;">
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <ul></ul>
    </div>
</section>
<section>
    <span>-</span>
    <h3>(b)Heading</h3>
    <div class="acc-box" style="display: block;">
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <ul>
            <li><a href="#" target="new.window">link</a></li>
            <li><a href="#" target="new.window">link</a></li>
            <li><a href="#" target="new.window">link</a></li>
            <li><a href="#" target="new.window">link</a></li>
        </ul>
    </div>
</section>
<section>
<span>-</span>
<h3>(d)Heading</h3>
<div class="acc-box" style="display: block;">
    <p>text here</p>
    <ul></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:00:51.217

遍历每个部分并获取您感兴趣的元素。然后过滤它们以仅获取空的元素。如果两个集合的大小相同，则它们都是空的，您可以删除相应的部分。如果不是，则仅删除空元素。

```
$('.acc-box').each(function() {
    var $elements = $(this).children('p, ul'), // get all intersting elements
        $empty = $elements.filter(function() { // get empty ones
             return $.trim($(this).text()) === "";
        });

    if($empty.length === $elements.length) { // all are empty
        $(this).closest('section').remove(); // remove section
    }
    else {                                   // otherwise
        $empty.remove();                     // remove empty elements
    }
}); 
```

[**演示**](http://jsfiddle.net/jqTJE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:52:49.943

嘿，你可以试试这个：http: [//jsfiddle.net/qjyzc/](http://jsfiddle.net/qjyzc/)

你也可以做同样的事情`li`。

希望这会有所帮助，让我知道我是否错过了什么，

**代码**

```
$('p')
    .filter(function() {
        return $.trim($(this).text()) === ''
    })
    .remove()​ 
```

# javascript - mouseup 在文档滚动按钮上

> ID：11272510
> 
> 赞同：-1
> 
> 时间：2012-06-30T08:00:08.367
> 
> 标签：javascript, jquery, mouseup

当鼠标在文档中“向上”时，此代码有效：

```
$(document).on("mouseup", function () {
    alert("mouseup");
}); 
```

但是如何制作`alert()`，当鼠标在滚动按钮上时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:17:50.523

使用 jQuery API：

```
.mouseup( handler(eventObject) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T04:33:07.977

```
$(document).mouseup(function(e){
    if(e.which == 2){                //2 is the code for the middle button
        //some codes...
    }
}); 
```

[http://jsfiddle.net/DerekL/3wmaK/](http://jsfiddle.net/DerekL/3wmaK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:03:34.633

您可以使用[“滚动”事件处理程序](http://api.jquery.com/scroll/)：

```
$(window).scroll(function() {
  alert("mouseup");
}); 
```

# javascript - 定义函数的不同形式

> ID：11272515
> 
> 赞同：-3
> 
> 时间：2012-06-30T08:00:57.037
> 
> 标签：javascript, jquery

以下形式的函数定义有什么区别：

```
$.myFunction = function() {
    //function body
};

var myFunction = function() {
    //function body
};

$(myFunction = function() {
    //function body
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T08:05:04.697

第一个添加一个函数`myFunction`，`$`可以是任何内部使用的 JavaScript 库，例如**jQuery、mooTools、Prototype**等`$`。

在第一个函数中，您只需将自己的函数添加到由`$`.

* * *

第二个是与**函数声明相对的****函数表达式**，它具有以下形式：

 **```
function myFunction() {
  //function body
} 
```

* * *

第三个看起来很奇怪，但它也是在 JavaScript 库的上下文中使用的**函数表达式**`$`，因为无论该库的含义是什么。

* * *

要了解更多关于函数表达式和函数声明之间的区别，请查看这篇优秀的帖子：

*   [命名函数表达式揭秘](http://kangax.github.com/nfe/)

您需要记住的函数表达式和函数声明之间最重要的区别是函数声明无论在哪里声明都是可用的（因为它们被提升到顶部）而函数表达式只有在它之前或在某个地方定义时才能运行为您以后的代码。一个例子是：

```
foo1(); // alerts "I am function declaration"
foo2(); // error, undefined function

function foo1() {
 alert('I am function declaration');
}

var foo2 = function() {
  alert('I am function expression');
};

foo1(); // alerts "I am function declaration"
foo2(); // alerts "I am function expression" 
```

* * *

仅供参考，还有自调用匿名函数和自调用命名函数：

```
// self invoking anonymous function
(function(){
  // code
})();

// self invoking named function
(function foo(){
  // code
})(); 
```

并且使用这些字符将函数声明转换为函数表达式：

```
! function(){
  // code
})();

+ function foo(){
  // code
})(); 
```

请注意，自调用函数在解析后立即运行，因为`()`在其签名的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:18:54.980

```
$.myFunction = function() {
    //function body
}; 
```

这将创建一个函数作为`$`对象的属性。如果您使用的是 jQuery，那么`$`它就是全局`jQuery`对象。你会调用这个函数`$.myFunction()`

* * *

```
var myFunction = function() {
    //function body
}; 
```

这将创建一个分配给名为 的变量的函数`myFunction`。如果您在另一个函数中执行此操作，则`myFunction`仅在该范围内可用。

* * *

```
$(myFunction = function() {
    //function body
}); 
```

这个是做两件事的，我们把它分解成两个步骤来更清楚：

```
myFunction = function() {    // step 1
    //function body
};
$(myFunction);               // step 2 
```

1.  第一步是创建一个分配给名为 的*全局*变量的函数`myFunction`。该变量是全局的，因为您没有使用`var`关键字。一般来说，您可能不想使用全局变量，当它的定义不是很明显时当然也不想使用。
2.  第二步是（假设您使用 jQuery）传递`myFunction`给 jQuery 以在 DOM 完成加载时执行。有关更多信息，请参阅[jQuery 文档](http://api.jquery.com/jquery/#jQuery3)。

    将函数传递给jQuery而不将其分配给任何变量更为常见，即

    ```
    $(function() {
        //function body
    }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:06:02.493

好吧，实际上只有其中一个是我所说的函数定义，第二个。第一个是使用该函数扩展全局 jQuery 对象（或任何其他使用美元符号的库），第三个是奇怪的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T08:11:15.007

假设“$”代表 jQuery（这在这里看起来很明显），第三种语法定义了一个匿名函数并将其作为参数传递给 jQuery，这是为 jQuery.DocumentReady 注册回调的快捷方式。**

# php - 如果我使用 bcrypt() 作为我的密码，我应该如何使用 AJAX 来验证它们？

> ID：11272517
> 
> 赞同：0
> 
> 时间：2012-06-30T08:00:59.267
> 
> 标签：php, ajax, security, hash, bcrypt

好的，所以我终于明白了如何使用 bcrypt() 服务器端和 PHP... 来散列和验证密码。但是如何在不将密码传输到服务器的情况下验证密码（即客户端验证）。

以某种方式通过 AJAX 将存储的哈希发送到客户端并使用客户端版本的 bcrypt() verify 来检查密码与哈希是否安全？或者是通过 AjAX 将密码传输到服务器来验证密码的唯一方法？如果是后者，我将如何安全地传输它？如果是前者，我在哪里可以找到 bcrypt() 验证函数的客户端版本？

下面是我为 bcrypt() 哈希类编写的 PHP 代码：

```
class Bcrypt {

    private $rounds;

    public function __construct($rounds = 12) {
        if (CRYPT_BLOWFISH != 1) {
            throw new Exception("bcrypt not supported in this installation. See http://php.net/crypt");
        }

        $this->rounds = $rounds;
    }

    public function hash($input) {
        $hash = crypt($input, $this->getSalt());

        if (strlen($hash) > 13) {
            return $hash;
        }

        return false;
    }

    public function verify($input, $existingHash) {
        $hash = crypt($input, $existingHash);
        return $hash === $existingHash;
    }

    private function getSalt() {
        $salt = sprintf('$2a$%02d$', $this->rounds);
        $bytes = $this->getRandomBytes(16);
        $salt .= $this->encodeBytes($bytes);
        return $salt;
    }

    private $randomState;

    private function getRandomBytes($count) {
        $bytes = '';

        if (function_exists('openssl_random_pseudo_bytes') && (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')) { // OpenSSL slow on Win
            $bytes = openssl_random_pseudo_bytes($count);
        }

        if ($bytes === '' && is_readable('/dev/urandom') && ($hRand = @fopen('/dev/urandom', 'rb')) !== FALSE) {
            $bytes = fread($hRand, $count);
            fclose($hRand);
        }

        if (strlen($bytes) < $count) {
            $bytes = '';

            if ($this->randomState === null) {
                $this->randomState = microtime();
                if (function_exists('getmypid')) {
                    $this->randomState .= getmypid();
                }
            }

            for ($i = 0; $i < $count; $i += 16) {
                $this->randomState = md5(microtime() . $this->randomState);

                if (PHP_VERSION >= '5') {
                    $bytes .= md5($this->randomState, true);
                }
                else {
                    $bytes .= pack('H*', md5($this->randomState));
                }
            }

            $bytes = substr($bytes, 0, $count);
        }

        return $bytes;
    }

    private function encodeBytes($input) {
        // The following is code from the PHP Password Hashing Framework
        $itoa64 = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

        $output = '';
        $i = 0;
        do {
            $c1 = ord($input[$i++]);
            $output .= $itoa64[$c1 >> 2];
            $c1 = ($c1 & 0x03) << 4;
            if ($i >= 16) {
                $output .= $itoa64[$c1];
                break;
            }

            $c2 = ord($input[$i++]);
            $c1 |= $c2 >> 4;
            $output .= $itoa64[$c1];
            $c1 = ($c2 & 0x0f) << 2;

            $c2 = ord($input[$i++]);
            $c1 |= $c2 >> 6;
            $output .= $itoa64[$c1];
            $output .= $itoa64[$c2 & 0x3f];
        } while (1);

        return $output;
    }
} 
```

通过以下方式运行：

```
$bcrypt = new Bcrypt(10);

$hash = $bcrypt->hash('password');
$isGood = $bcrypt->verify('password', $hash); //verifies if the password is the same as the on that has been hashed 
```

我的问题有点长，但我真的想让我的网站安全。我正在使用 SSL，但我想消除尽可能多的漏洞——因此，我想尽可能地限制我传输的私人数据量。特别是用户凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:07:35.470

我不会那样做的。如果您这样做，攻击者将对您的散列算法完全开放，并且可以访问散列密码，并可以访问**结果**。

不，请您的服务器为您进行验证，并让它返回`1`或`0`成功或失败。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-12T09:05:04.760

伙计，您必须将密码以加密形式存储在数据库中。万一攻击者设法访问您的数据库，他只拥有哈希值，如果您使用良好的加密，这对他没有多大帮助。这是关于用户保护的，因为大多数人在许多平台上重复使用相同的密码。这是密码哈希的主要目标。几乎每个平台都以纯文本形式发送密码（甚至亚马逊等）。加密是在 SSL 中完成的。您当然可以在客户端加密密码并在服务器端加密它们（双重加密）。但是由于用户可以在逻辑上访问加密脚本（否则他将无法在客户端加密）和哈希，

SSL 很好。

# android - 查询未收到彩信

> ID：11272522
> 
> 赞同：0
> 
> 时间：2012-06-30T08:02:09.253
> 
> 标签：android, sms, mms

我正在实现这里讨论的方法[How to Read MMS Data in Android](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android)。这是代码片段：

```
ContentResolver contentResolver = getContentResolver();
final String[] projection = new String[]{"*"};
Uri uri = Uri.parse("content://mms-sms/conversations/");
Cursor query = contentResolver.query(uri, projection, null, null, null); 
```

当我尝试通过光标获取数据时，我没有得到彩信的 ID。我只得到 SMS 消息的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:08:52.233

将您的代码更改为：

```
ContentResolver contentResolver = getContentResolver();

final String[] projection = new String[]{"*"};

Uri MMSSMS_FULL_CONVERSATION_URI = Uri.parse("content://mms-sms/conversations");  

Uri uri  = MMSSMS_FULL_CONVERSATION_URI.buildUpon().  
     appendQueryParameter("simple", "true").build(); 

Cursor query = contentResolver.query(uri, projection, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:45:14.610

我的代码是正确的。它只需要此代码即可获取消息的 id

```
cursor.moveToFirst();
String address = cursor.getString(cursor.getColumnIndex("_id")); 
```

# javascript - 是否有等效于 webmock 来测试客户端代码

> ID：11272523
> 
> 赞同：7
> 
> 时间：2012-06-30T08:02:22.173
> 
> 标签：javascript, testing

客户端代码是否有等效于 webmock 或 vcr 的方法？...或者是否可以使用 webmock 和客户端代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T07:19:07.753

您可以使用 sinon 的[FakeXMLHttpRequest](http://sinonjs.org/docs/#FakeXMLHttpRequest)或[nock](https://github.com/flatiron/nock)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T21:49:39.893

[用于测试浏览器和外部站点之间交互的重写 Web 代理。适用于 ruby​​ + rspec](https://github.com/oesmith/puffing-billy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-16T12:08:21.503

现在，试试[Mockttp](https://www.npmjs.com/package/mockttp)。

它可以模拟 Node 和浏览器的请求，它使用真实请求，从而为您提供比 Nock 等人更准确的结果，它可以模拟为假服务器（重新配置目标 URL）或拦截代理（向真实的 URL，并截取部分/全部）。

它还很好地支持并行运行测试，这是全局模拟库无法做到的，以及许多其他不错的现代功能。

# javascript - Javascript 重新加载中断 cookie 删除

> ID：11272525
> 
> 赞同：0
> 
> 时间：2012-06-30T08:02:53.857
> 
> 标签：javascript

所以我使用 CodeIgniter 框架通过下面的 javascript 注销用户：

```
//If logged in:
$('#logout').click(function() {
    $.ajax({url:'/auth/logout',
        success: function(data){
            $('#navigation').html(data);
        },
        error: function(jqXHR, textStatus, errorThrown)
        {
            document.write(errorThrown);
        }
    });
    location.reload(true);
}); 
```

只要我注释掉location.reload(true);，这段代码就成功调用了auth/logout函数，将用户注销，手动刷新页面就可以看到。但是，在重新加载活动的情况下，cookie 不会被删除并且用户保持登录状态。如何确保在重新加载页面之前删除 cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:04:26.773

您需要将重新加载放在成功函数中，如下所示：

```
$.ajax({url:'/auth/logout',
    success: function(data){
        $('#navigation').html(data);
        location.reload(true);
    },
    error: function(jqXHR, textStatus, errorThrown)
    {
        document.write(errorThrown);
    }
}); 
```

您正在同步重新加载页面，而请求是异步的，这意味着重新加载是在 AJAX 完成之前发生的。

# php - TYPO3：TCA 如何将 UID 作为父 UID 添加到新表

> ID：11272527
> 
> 赞同：0
> 
> 时间：2012-06-30T08:03:12.450
> 
> 标签：php, typo3, typoscript, typo3-tca

我想创建一个新的内容类型（广告），我在`tt_content`表格中创建了一个广告容器`CType`= ' `ad_container`'，现在我需要将广告放在这个容器中。所以我想创建一个新表`tx_adcontent`。每个广告容器都包含多个广告，我的困惑是对于前端渲染我还有一些其他代码来获取这些广告参数并以特定的模板结构显示。

因此，要从当前 pid 的特定 uid 中获取广告，我需要在我的新表中`tx_adcontent`作为 parent_uid 引用，否则我不能将广告放在相应的容器中。（每个页面包含多个广告容器。）

最后我的意图是放入`parent_uid`新表`tx_adcontent`。我如何做到这一点`TCA`，如何在 TCA 中进行配置。否则我需要手动将其输入`parent_uid`到文本字段中，是否可以在那里插入任何自动字段？（我不想在我的后端编辑表单中显示该 ID，但需要将其自动插入到 db table( `tx_adcontent`)）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:09:27.237

使用[Extension Kickstarter](http://typo3.org/extensions/repository/view/kickstarter)创建自己的扩展，这将允许您

*   在现有表中创建新列
*   为您的记录创建新表
*   创建一个新的`ContentType`和一些基本的 PHP 类

等。最重要的是将为您自己的表创建适当的 SQL 模式和 tca 配置，`pid`默认情况下它还将包含字段。它将存储创建记录的页面的 UID。

如果您不想从头开始扩展您的工作，您可以仔细检查创建的元素并将您需要的内容复制/粘贴到当前解决方案中。

虽然它的方式更长，但没有更简单的方法可以开始扩展开发。

# actionscript-3 - 在 ActionScript 3 中动态创建多个形状

> ID：11272534
> 
> 赞同：0
> 
> 时间：2012-06-30T08:04:30.017
> 
> 标签：actionscript-3, flash, animation

这是我使用的代码。我正在尝试动态创建多个形状并使用它们创建动画（函数 drawLine）。我的结果只显示了一个动画（第一个），然后什么也没有。应该是6个动画。我认为 addChild() 函数并没有像我想要的那样创建多个形状。

```
 import flash.display.Shape;

var startPoint:Point = new Point();
var endPoint:Point = new Point();

var prog:Number = 0;
var bonus:Number = 1;
var frames:int = 150;

var numbers:Array = new Array();

numbers[0] = new Array();
numbers[0][0] = 460;
numbers[0][1] = 100;

numbers[1] = new Array();
numbers[1][0] = 10;
numbers[1][1] = 20;

numbers[2] = new Array();
numbers[2][0] = 10;
numbers[2][1] = 100;

numbers[3] = new Array();
numbers[3][0] = 10;
numbers[3][1] = 180;

numbers[4] = new Array();
numbers[4][0] = 160;
numbers[4][1] = 20;

numbers[5] = new Array();
numbers[5][0] = 160;
numbers[5][1] = 100;

numbers[6] = new Array();
numbers[6][0] = 160;
numbers[6][1] = 180;

numbers[7] = new Array();
numbers[7][0] = 310;
numbers[7][1] = 20;

numbers[8] = new Array();
numbers[8][0] = 310;
numbers[8][1] = 100;

numbers[9] = new Array();
numbers[9][0] = 310;
numbers[9][1] = 180;

var fullDate:String = "271524";

var i:Number;
var pom:Number;
var shapes:Vector.<Shape> = new Vector.<Shape>();
for (i=0; i < fullDate.length; i++){

    pom = int(fullDate.charAt(i));
    shapes[i] = new Shape();
    addChild(shapes[i]);

    trace(numbers[pom+1][0]);
    drawLine(numbers[pom][0], numbers[pom][1], numbers[pom+1][0], numbers[pom+1][1], 120);
}

function drawLine(startX:Number, startY:Number, endX:Number, endY:Number, time:Number = 120):void {
    startPoint.x = startX;
    startPoint.y = startY;
    endPoint.x = endX;
    endPoint.y = endY;

    frames = time;
    prog = 0;
    this.addEventListener(Event.ENTER_FRAME, tick);
}

function drawLineTick(progress:Number):void{
    for each(var shape:Shape in shapes)
    {
        shape.graphics.clear();
        shape.graphics.lineStyle(14,0x2dfdfd);

        shape.graphics.moveTo(startPoint.x,startPoint.y);
        shape.graphics.lineTo(startPoint.x + ((endPoint.x - startPoint.x) * progress), startPoint.y + ((endPoint.y - startPoint.y) * progress));

    }

}

function tick(e:Event):void {
    if(prog >= frames){
        this.removeEventListener(Event.ENTER_FRAME, tick);
    }

    drawLineTick(prog / frames);    
    prog += bonus;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:58:12.453

问题是，`s`仅指`Shape`您创建的最后一个。尝试这样的事情：（目前，所有形状都在每个形状的顶部，所以你不会看到多个动画，但你可以调整它）

```
fullDate = "174689";
var shapes:Vector.<Shape> = new Vector.<Shape>();
for (i=0; i < fullDate.length; i++){
    pom = int(fullDate.charAt(i));

    shapes[i] = new Shape();
    addChild(shapes[i]);
    drawLine(numbers[pom][0], numbers[pom][1], numbers[pom+1][0], numbers[pom+1][1], 50);
}

function drawLine(startX:Number, startY:Number, endX:Number, endY:Number, time:Number = 120):void {
    startPoint.x = startX;
    startPoint.y = startY;
    endPoint.x = endX;
    endPoint.y = endY;

    frames = time;
    prog = 0;
    this.addEventListener(Event.ENTER_FRAME, tick);
}

function drawLineTick(progress:Number):void{
    for each(var shape:Shape in shapes)
    {
        shape.graphics.clear();
        shape.graphics.lineStyle(14,0x2dfdfd);

        shape.graphics.moveTo(startPoint.x,startPoint.y);
        shape.graphics.lineTo(startPoint.x + ((endPoint.x - startPoint.x) * progress), startPoint.y + ((endPoint.y - startPoint.y) * progress));

    }

}

function tick(e:Event):void {
    if(prog >= frames){
        this.removeEventListener(Event.ENTER_FRAME, tick);
    }

    drawLineTick(prog / frames);    
    prog += bonus;
} 
```

# c - 如何从 ssh 会话中获取伪终端主文件描述符？

> ID：11272536
> 
> 赞同：2
> 
> 时间：2012-06-30T08:04:38.737
> 
> 标签：c, pty, pts

在 C 或 bash 中，

我想知道，如果可能的话，您如何从 ssh 会话内部获取伪终端主机的文件描述符，该主机负责获取该会话的从属设备（pts）的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:56:11.447

shell进程没有主文件描述符，只有从属。

shell 的父进程（无论是 sshd 还是 xterm 或 screen 等等）通过调用`getpt(3)`or来创建一个新的主进程`posix_openpt(3)`。该函数返回主文件描述符。`grantpt(3)`然后父进程通过调用、`unlockpt(3)`和`ptsname(3)`的组合来获取从文件描述符`open(2)`。这适用于 Linux 和其他 POSIXized 系统，其他 *nixes 可能使用其他功能，但最终结果是相同的。父进程具有主/从文件描述符对。

然后，从属描述符和仅从属描述符作为其标准输入、输出和错误传递给 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:26:29.877

来自 Solaris 5.8 PTS(7D) 手册页 - STREAMS 伪 tty 从驱动程序

```
Only one open is allowed on a master device. 
```

我想这回答了我的问题:)
编辑：实际上它没有，因为如果有办法获取文件描述符，我不需要再次打开，它是一个文件描述符，哈哈，不需要打开

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:49:32.570

在基于 unix 的系统上，您可以通过打开`/dev/tty`. 在许多情况下，您的程序已经将其作为标准输入、标准输出和标准错误打开，但即使您的程序正在使用标准输入、标准输出或标准错误重定向来调用，`/dev/tty`也会为您提供进程的控制终端。

# javascript - 是否有任何 JavaScript IDE 能够在 IntelliSense 中显示所有使用的对象字段和方法？

> ID：11272541
> 
> 赞同：3
> 
> 时间：2012-06-30T08:05:37.383
> 
> 标签：javascript, ide, javascript-intellisense

例如，我正在使用 Google Maps API，我想查看所有可能的字段和方法。

```
<script type="text/javascript" src="https://www.google.com/jsapi"> </script>
<script type="text/javascript">
var ge;
google.load("earth", "1"); 
```

如果我输入`google.`我想查看每个可用的功能和字段

现在我使用 Visual Web Developer 2010 Express，它只显示可用于所有对象的基本方法，如 toString()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:29:46.343

据我所知还没有，但是您可以使用这个简单的代码来“打印”对象中的所有内容。
它很粗糙，但它有效:)

```
// Obj.keys(); strict
// Object.getOwnPropertyNames( obj ) strict
get_keys = function get_keys (obj) {    // all inhereted keys

    var keys = [], key;

    for(key in obj)
    {
        //if (obj.hasOwnProperty(key)) {keys.push(key);}
        keys.push(key);
    }
    obj = key = null;
    return keys;
};
stringify_object = function stringify_object(obj){

    var keys = get_keys(obj),
    str = '',
    i, len = keys.length;

    for(i=0; i < len; ++i)
    {
        str += i + ": " +keys[i] + ' : ' + obj['"'+keys[i]+'"'] +'\n\n';
    }

obj = keys = i = len = null;
    return str;
}; 
```

# mysql - 从多行中查找最大数据

> ID：11272544
> 
> 赞同：3
> 
> 时间：2012-06-30T08:05:54.167
> 
> 标签：mysql, group-by, max

以下是我所拥有的

```
++++++++++++++++++++++++
+ id + field1 + field2 +
++++++++++++++++++++++++
+ 1  +  1     +        +
+ 1  +  23    +        +
+ 1  +        +   1    +
+ 1  +        +   33   +
+ 2  +  55    +        +
+ 2  +        +   2    +
+ 2  +        +   23   +
++++++++++++++++++++++++ 
```

我想要的是

```
++++++++++++++++++++++++
+ id + field1 + field2 +
++++++++++++++++++++++++
+ 1  +  23    +   33   +
+ 2  +  55    +   23   +
++++++++++++++++++++++++ 
```

我想组合这些行（具有最大数据）并在一行中显示用户的数据，而不是像我在表中那样的多行。

知道怎么做吗？

**注意**：我没有任何具有所有字段数据的行。一行中只有 1 个数据，每个用户有两行或更多行。

我试过了

```
SELECT id, GROUP_CONCAT(MAX(field1)), GROUP_CONCAT(MAX(field2)) from myTable
GROUP BY id; 
```

但它给出的错误为

```
Invalid use of group function: 
```

## [sqlfiddle 中的数据](http://sqlfiddle.com/#!2/4503b/4)

这个问题比我之前的问题有点高级，***[在一行中显示数据（来自多行）](https://stackoverflow.com/questions/11272380/showing-data-in-one-row-from-multiple-rows)***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:08:43.980

```
SELECT id, MAX(field1), MAX(field2) FROM myTable GROUP BY id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T08:09:27.170

这个简单的查询应该可以解决问题。

```
SELECT id, MAX(field1), MAX(field2)
FROM myTable
GROUP BY id; 
```

它将具有相同 id 的所有行分组，并为每列选择每个组内的最大值

# php - 防止用户编辑隐藏的表单域

> ID：11272548
> 
> 赞同：1
> 
> 时间：2012-06-30T08:06:52.437
> 
> 标签：php, jquery

我目前有一组隐藏的输入，这些值是用 jQuery 改变的。

```
echo "<input type='hidden' id='stack-information-1' value='$clickedtitle' readonly />
<input type='hidden' id='stack-information-2' value='$guidelinename' readonly />
<input type='hidden' id='stack-information-4' value='$clickedid' readonly />
<input type='hidden' id='stack-information-5' value='$starter' readonly />
<input type='hidden' id='stack-information-6' value='$category' readonly />
    <input type='hidden' id='stack-information-7' value='$sid' readonly />
    <input type='hidden' id='stack-information-8' value='$clickedposition' readonly />
    <input type='hidden' id='stack-information-9' value='0' readonly />"; 
```

我不希望用户能够通过黑客等方式更改这些值。这不是有价值的信息，只是整数和不重要的字符串。但是，我采取了哪些安全措施来防止用户更改这些值？我是否将值保存在会话中？.. 如果是，我如何使用 jquery 访问值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T08:10:53.557

将它们存储在客户端的任何位置将使它们可以被读取。

我建议它们是否只是暂时相关的值，以便将它们存储在会话中，并在处理与它们相关的任何调用时仅在后端处理它们。（即根本不将它们输出给客户端）。

如果您的 javascript 需要它们对页面进行一些修改，则应将该逻辑重新定位到后端并通过 ajax 调用以“询问服务器”js 应该做什么。

# javascript - 为文件输入元素选择文件后，焦点不会返回到元素/页面

> ID：11272549
> 
> 赞同：0
> 
> 时间：2012-06-30T08:07:17.953
> 
> 标签：javascript, jquery, internet-explorer

选择文件后，我必须单击页面上的任意位置才能再次与页面交互。这很烦人，我不希望我的用户不得不处理这个问题。有没有办法在没有第一次点击的情况下将焦点返回到页面？

我应该注意到这只发生在 IE 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:12:15.650

好吧，我无法解释，但我想我找到了原因。我现在在另一台计算机上，这里不存在问题。我唯一能想到的是，我昨晚使用的计算机是一台通过一致性模式在 VM 中运行 Windows 7 的 Mac……这与它有关。

# javascript - 从地图中删除多边形

> ID：11272552
> 
> 赞同：10
> 
> 时间：2012-06-30T08:07:48.567
> 
> 标签：javascript, leaflet

要求：使用Leaflet js maps api，当客户点击标记时，应该在标记的正下方绘制一个矩形，根据标记居中。然后单击另一个标记应删除以前的矩形并在新单击的标记下方绘制另一个矩形。

问题：我正在使用下面的代码来绘制一个多边形，我可以看到一个矩形。它在标记上绘制矩形。然后通过单击另一个标记，正在绘制一个新的矩形。但是旧的矩形也仍然存在。

问题：我应该如何实现该行为，以便在单击新标记时，旧矩形将从地图中删除？

```
 //polygon

var latBlockSize = 0.002;
var lngBlockSize = 0.002;
var route = [
      new L.LatLng(parseFloat(customer.MailingAddress.Lat) + latBlockSize, parseFloat(customer.MailingAddress.Lng) - lngBlockSize),
      new L.LatLng(parseFloat(customer.MailingAddress.Lat) + latBlockSize, parseFloat(customer.MailingAddress.Lng) + lngBlockSize),
      new L.LatLng(parseFloat(customer.MailingAddress.Lat) - latBlockSize, parseFloat(customer.MailingAddress.Lng) + lngBlockSize),
      new L.LatLng(parseFloat(customer.MailingAddress.Lat) - latBlockSize, parseFloat(customer.MailingAddress.Lng) - lngBlockSize)
   ];

window.polygon = new L.Polygon(route);

window.map.addLayer(window.polygon); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T05:59:54.630

我自己想通了。

这是解决方案：

```
window.map.removeLayer(window.polygon); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-27T16:49:54.860

这也很有效，用 Leaflet 1.2.0 测试过。

`window.polygon.remove()`

# gwt - 阻止应用程序在特定浏览器上运行

> ID：11272553
> 
> 赞同：-1
> 
> 时间：2012-06-30T08:07:50.670
> 
> 标签：gwt

当我构建 GWT 应用程序时，它可以在 IE、chrome、firefox 等所有浏览器上运行，只要为该浏览器安装了 GWT 插件。
我想知道如何防止 GWT 应用程序在特定浏览器上运行，即如果我不希望我的 GWT 应用程序在 Firefox 上运行，我该如何实现？我需要对代码进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:17:47.517

添加`<set-property name="user.agent" value="ie6,ie8,ie9,safari,opera" />`到您的`*.gwt.xml`文件中，它将无法在 Firefox 中加载（仅供参考，Firefox 的`user.agent`令牌是`gecko1_8`）。

例如，如果您不想支持 IE6 和 IE7，则不需要为它们编译，并且可以通过从值列表中删除`ie6`标记来减少编译时间。`user.agent`

# javascript - 如何使用 Graphiti.js 创建包含嵌套对象的图形？

> ID：11272557
> 
> 赞同：0
> 
> 时间：2012-06-30T08:08:23.767
> 
> 标签：javascript

是否可以在 graphiti.js 中创建嵌套对象图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:52:35.950

但是我能够使用装饰方法做到这一点，并且效果很好。

```
ivr.shape.menu.Menu = graphiti.shape.basic.Rectangle.extend(
{
  TitleLocator : graphiti.layout.locator.Locator.extend({
        init: function(parent) { this._super(parent); },
        relocate:function(index, figure){
            var bb = this.getParent().getBoundingBox();
            var tbb = figure.getBoundingBox();
            figure.setPosition(bb.getWidth()/2-tbb.getWidth()/2,-10);
        }
    }),
  init: function( strTitle ) {
    this.subElements = {};
    this.subElements.title = new graphiti.shape.basic.Label(strTitle);
    this.addFigure(this.subElements.title, new this.TitleLocator(this));

    this.calculateSize();
  }
} 
```

那有多错？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T22:54:22.460

目前不支持嵌套图形。

对不起

安德烈亚斯

# javascript - 使用 BSF 后处理器中使用的变量作为另一个采样器中的参数

> ID：11272565
> 
> 赞同：1
> 
> 时间：2012-06-30T08:09:00.157
> 
> 标签：javascript, jmeter, load-testing

我在采样器中添加了一个 BSF 后处理器。
后处理器中的脚本是：

```
var array = JSON.parse(prev.getResponseDataAsString());

array.forEach(function(object)
{
  OUT.println("patient_id: "+object.patientId);
  OUT.println("fname: "+object.fname);
  OUT.println("lname: "+object.lname);
}); 
```

现在我想在另一个请求的参数中使用 object.patientId、object.fname、object.lname 值作为参数。

例如

```
Thread Group
- Sampler1
    BSF Post-Processor
- Sampler2 
```

我想将 Sampler1 的 BSF 后处理器 javascript 中的变量用作 Sampler2 中的参数。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:09:48.913

轻松：[BSF PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#BSF_PostProcessor)提供对 Jmeter 变量/属性的读/写访问：

> vars - ( JMeterVariables) - 提供对变量的读/写访问权限：vars.get(key); vars.put(key,val); vars.putObject("OBJ1",new Object()); vars.getObject("OBJ2");
> 
> props - (JMeterProperties - class java.util.Properties) - 例如 props.get("START.HMS"); props.put("PROP1","1234");

在最简单的情况下，您可以使用

```
vars.put(patientId,object.patientId.toString());
vars.put(fName,object.fname.toString());
vars.put(lName,object.lname.toString()); 
```

在您的 BSF PostProcessor 中设置变量，然后获取它们的值，例如

```
vars.get("patientId") 
```

或者

```
${patientId} 
```

但是由于您一次提取 foreach 循环中的所有记录，因此您不能使用这种方式。

在这种情况下，您必须更好地使用以下内容：将在 foreach 循环中提取的所有记录值写入 csv 文件，然后使用例如[CSV Data Set Config](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)在循环中逐一读取记录并使用值以及你的采样器2：

```
While Controller
    CSV Data Set Config
    Sampler 2 
```

...同样，如果我找到另一种更好的方法，我会很高兴知道的。

# php - 使用 HMVC codeigniter 创建表单

> ID：11272567
> 
> 赞同：0
> 
> 时间：2012-06-30T08:09:01.500
> 
> 标签：php, codeigniter, forms, hmvc

我正在尝试在 codeigniter 中使用 HMVC 创建一个表单，但它显示`Fatal error: Call to undefined function form_open()`错误我在 application/library 文件夹中包含 Controller.php 、 Modules.php 和 MY_Router.php ，它再次显示错误.. 这是我的代码：- 用于控制器:-

```
<?php
class First extends MX_Controller {
    public function index()
    {
        $this->load->view('welcome_message');
    }
} 
```

?>

供查看：-

```
<html>
<body>
    <h1> hey this is first module.. </h1>
    <?php

        echo form_open('first/login');
        echo form_input('username',username);
        echo form_password('password',password);
        echo form_submit('Login',submit);
        form_close();

    ?>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:09:56.337

您需要加载表单助手：

```
$this->load->helper('form'); 
```

# python - 在 Lion 编译错误时安装 matplotlib

> ID：11272568
> 
> 赞同：0
> 
> 时间：2012-06-30T08:09:10.873
> 
> 标签：python, build, installation, matplotlib, python-2.7

我正在尝试在 OS X Lion 上安装 matplotlib（+ numpy、pandas 等），但它似乎没有正确构建。我遵循以下说明：http: [//jholewinski.org/blog/installing-matplotlib-on-os-x-10-7-with-homebrew/](http://jholewinski.org/blog/installing-matplotlib-on-os-x-10-7-with-homebrew/)没有这样的运气。

整个输出很长，所以我把它贴在这里： http: [//pastebin.com/ab6E1AB2](http://pastebin.com/ab6E1AB2)

重要的位：

```
In file included from ./CXX/Python2/Extensions.hxx:52:
./CXX/Python2/Objects.hxx:1052:17: error: no matching function for call to
      '_PyComplex_FromCComplex'
            set(PyComplex_FromCComplex (v), true);
                ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/local/include/complexobject.h:24:35: note: expanded from macro
      'PyComplex_FromCComplex'
#define PyComplex_FromCComplex(c) _PyComplex_FromCComplex(&c)
                                  ^~~~~~~~~~~~~~~~~~~~~~~
/usr/local/include/pypy_decl.h:488:24: note: candidate function not viable: 1st
      argument ('const Py_complex *' (aka 'const Py_complex_t *')) would lose
      const qualifier
PyAPI_FUNC(PyObject *) _PyComplex_FromCComplex(Py_complex *arg0);
                       ^
In file included from src/ft2font.cpp:3:
In file included from src/ft2font.h:6:
In file included from ./CXX/Extensions.hxx:40:
In file included from ./CXX/Python2/Extensions.hxx:52:
./CXX/Python2/Objects.hxx:2215:32: error: no matching function for call to
      'PyString_AsEncodedObject'
                return String( PyString_AsEncodedObject( ptr(), ...
                               ^~~~~~~~~~~~~~~~~~~~~~~~
/usr/local/include/pypy_decl.h:363:24: note: candidate function not viable: 2nd
      argument ('const char *') would lose const qualifier
PyAPI_FUNC(PyObject *) PyString_AsEncodedObject(PyObject *arg0, char ...
                       ^
In file included from src/ft2font.cpp:3:
In file included from src/ft2font.h:6:
In file included from ./CXX/Extensions.hxx:40:
In file included from ./CXX/Python2/Extensions.hxx:52:
./CXX/Python2/Objects.hxx:2221:28: error: no matching function for call to
      'PyString_AsDecodedObject'
            return Object( PyString_AsDecodedObject( ptr(), encoding, ...
                           ^~~~~~~~~~~~~~~~~~~~~~~~
/usr/local/include/pypy_decl.h:362:24: note: candidate function not viable: 2nd
      argument ('const char *') would lose const qualifier
PyAPI_FUNC(PyObject *) PyString_AsDecodedObject(PyObject *arg0, char ...
                       ^
In file included from src/ft2font.cpp:3:
In file included from src/ft2font.h:6:
In file included from ./CXX/Extensions.hxx:40:
In file included from ./CXX/Python2/Extensions.hxx:52:
./CXX/Python2/Objects.hxx:3311:12: error: use of undeclared identifier
      'PyNumber_Coerce'; did you mean 'PyNumber_Check'?
        if(PyNumber_Coerce(&p1,&p2) == -1)
           ^~~~~~~~~~~~~~~
           PyNumber_Check
/usr/local/include/pypy_decl.h:239:17: note: 'PyNumber_Check' declared here
PyAPI_FUNC(int) PyNumber_Check(PyObject *arg0);
                ^
In file included from src/ft2font.cpp:3:
In file included from src/ft2font.h:6:
In file included from ./CXX/Extensions.hxx:40:
In file included from ./CXX/Python2/Extensions.hxx:52:
./CXX/Python2/Objects.hxx:3311:32: error: too many arguments to function call,
      expected 1, have 2
        if(PyNumber_Coerce(&p1,&p2) == -1)
           ~~~~~~~~~~~~~~~     ^~~
/usr/local/include/pypy_decl.h:239:12: note: 'PyNumber_Check' declared here
PyAPI_FUNC(int) PyNumber_Check(PyObject *arg0);
           ^
/usr/local/include/Python.h:14:28: note: expanded from macro 'PyAPI_FUNC'
# define PyAPI_FUNC(RTYPE) RTYPE
                           ^
5 errors generated.
error: command '/usr/bin/clang' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:29:39.393

我看到你正在使用 PyPy - 它不支持 matplotlib（至少现在）。改用默认的 python (CPython) 会更好。

# android - 每分钟同步帐户

> ID：11272571
> 
> 赞同：5
> 
> 时间：2012-06-30T08:09:27.223
> 
> 标签：android, android-syncadapter

在我的以下行`AccountAuthenticatorActivity`之后，我尝试为帐户设置同步选项：`addAccountExplicitly`

```
ContentResolver.setIsSyncable(account, authority, 1);
ContentResolver.setSyncAutomatically(account, authority, true);
int seconds = getResources().getInteger(R.integer.syncFrequencySeconds);
ContentResolver.addPeriodicSync(account, authority, new Bundle(), seconds); 
```

`syncFrequencySeconds`设置为 86400（每 24 小时）。但是我的同步适配器仍然每分钟触发一次。我究竟做错了什么？（同步本身没有任何问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:16:14.353

`SyncResult.stats`自己解决了：当与 ContentResolver-Operations 不匹配时，同步适配器会重复。当它们匹配时，同步按预期触发。

更新：另一个问题是，我在同步操作期间调用了 ContentResolver.notifyUpdate。删除它，这很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-26T20:55:44.157

我`SyncAdapter`每分钟都在跑步，不尊重`pollFrequency`间隔。我只使用查询将本地数据发送到远程服务器（在 上`SyncAdapter`）。我没有更新`SyncAdapter`.

但是我的本地数据正在使用其他服务以非常短的时间间隔更新（从 BLE 设备接收数据）。

为了解决这个问题，我必须更改`notifyChange`对我的数据提供者的所有调用以包含附加参数`syncToNetwork: false`（查看[notifyChange](https://developer.android.com/reference/android/content/ContentResolver.html#notifyChange(android.net.Uri,%20android.database.ContentObserver,%20int))文档）。

```
//getContext().getContentResolver().notifyChange(uri, null);
getContext().getContentResolver().notifyChange(uri, null, false); 
```

此更改不会影响我`CursorAdapter`在`Activity`更新表格后立即显示数据的方式。

分配适当的值`syncResult.stats`并没有解决我的问题。

# c# - 为什么我不能使用 c# 将数组绑定到依赖属性？

> ID：11272574
> 
> 赞同：-1
> 
> 时间：2012-06-30T08:09:44.853
> 
> 标签：c#, silverlight, windows-phone-7, data-binding, dependency-properties

**我做什么**
创建一个用户控件，它的 DependencyProperty 之一绑定到字符串数组

```
 public static readonly DependencyProperty TaskListProperty =
    DependencyProperty.Register("TaskList",
                                typeof(string[]),
                                typeof(MainControl),
                                null);

    public string TaskList
    {
        get { return (string[])GetValue(TaskListProperty); }
        set { SetValue(TaskListProperty, value); }
    } 
```

**我收到**
此代码的错误

```
 get { return (string[])GetValue(TaskListProperty); } 
```

> > 错误：无法将类型“字符串 []”隐式转换为“字符串”

**为什么**
会出现这个错误，我不把它的源类型注册到字符串数组吗？如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T08:26:51.650

错误信息是正确的。您忘记了`[]`您的属性类型。

```
public string[] TaskList
{
    get { return (string[])GetValue(TaskListProperty); }
    set { SetValue(TaskListProperty, value); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:08:52.300

至于错误，@Michael 和@herzmeister 是对的，你忘了`[]`。但是为了避免性能警告[CA1819: Properties should not return arrays](http://msdn.microsoft.com/en-us/library/0fss9skc.aspx)我建议您更改属性以返回一个集合，如果可以的话。

# java - 加密和解密字符串

> ID：11272575
> 
> 赞同：2
> 
> 时间：2012-06-30T08:09:47.020
> 
> 标签：java, android, encryption

我有一个关于加密和解密字符串的问题

我必须通过网络发送一个加密字符串。（一个 android 应用程序是客户端）这是我到目前为止所做的

```
byte[] input = getByteArray(filePath);//get the message stored in a file as a byte array 
```

通过阅读一些教程，我设法将字符串消息发送到字节数组并使用 javax.crypto 对其进行加密

```
Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding");

cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec); 
```

加密的 msg 被检索为字节数组

```
byte[] encrypted 
```

我什至设法使用反向方法对其进行解密并再次获取消息

但是当我尝试将此加密的字节数组转换为字符串（通过网络传递它）然后将其重新转换为字节数组时，我的问题就出现了

我试过这个

```
String encryptedStrn = new String(encrypted); // convert to string 
```

当我通过 byte[] enc = encryptedStrn.getBytes() 将其转换为字节数组时；

并使用此 enc 数组解密，但输出不正确。

我是否错过了一些有关转换的基本内容。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T08:13:17.307

正如 CodeInChaos 在评论中所写，您不应使用`String(byte[])`构造函数从不透明的二进制数据创建字符串。字符串构造函数用于已使用 ASCII、UTF-8 等编码进行编码的*文本数据*。不透明的二进制数据（例如加密结果或图像文件）*不是*以相同方式编码的文本数据，因此您最终丢失信息。

您应该改用 base64，它将*任何*二进制数据编码为 ASCII。为此有各种 3rd 方库，包括一个很好的[公共领域](http://iharder.net/base64)库。或者，在 Android 上，您可以只使用[`Base64`](http://developer.android.com/reference/android/util/Base64.html)该类。

此外，即使您*正在*编码或解码真实文本，也不应该使用`String.getBytes()`and`String(byte[])`构造函数——它们使用平台默认编码，这几乎总是错误的选择。相反，您应该使用显式采用 a`CharSet`或字符编码名称的重载。如果您能够控制两端，UTF-8 通常是一种很好的编码 - 如果您只控制一端，您需要知道另一端期望哪种编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:13:35.037

您应该对密文进行 base64 编码。不要只是将其转换为字符串。字符串不是二进制数据的容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T08:20:02.660

```
 public string EncryptUser(string userID)
    {
        using (var cryptoProvider = new DESCryptoServiceProvider())
        using (var memoryStream = new MemoryStream())
        using (var cryptoStream = new CryptoStream(memoryStream, cryptoProvider.CreateEncryptor(DESKey, DESInitializationVector), CryptoStreamMode.Write))
        using (var writer = new StreamWriter(cryptoStream))
        {
            writer.Write(userID);
            writer.Flush();
            cryptoStream.FlushFinalBlock();
            writer.Flush();
            return Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);
        }
    }

    public string DecryptUserID(string userID)
    {
        using (var cryptoProvider = new DESCryptoServiceProvider())
        using (var memoryStream = new MemoryStream(Convert.FromBase64String(userID)))
        using (var cryptoStream = new CryptoStream(memoryStream, cryptoProvider.CreateDecryptor(DESKey, DESInitializationVector), CryptoStreamMode.Read))
        using (var reader = new StreamReader(cryptoStream))
        {
            return reader.ReadToEnd();
        }
    } 
```

# oracle - 在 Oracle 过程中添加条件事务行为

> ID：11272576
> 
> 赞同：2
> 
> 时间：2012-06-30T08:09:55.107
> 
> 标签：oracle, transactions

在 oracle 10g 中，每个表的每个操作（插入、选择、更新、删除）都有一个存储过程。实际上，每个操作每个表可以有多个过程，例如在选择的情况下，它可以是 SelectList、SelectOneRecord、Search（使用动态查询）。

这些程序都没有事务。

有时我必须在一个事务中组合多个操作。例如，在一个表中插入并在另一个表中更新，都在一个事务中。为此，我制作了一个具有事务的单独程序。这个程序然后调用这两个程序。

为了在单个事务中启用上述组合过程调用，我没有在过程中放置​​任何事务行为，如上所述。

大多数时候我只需要执行一项操作，例如在一张表中插入。由于插入过程没有事务行为，因此我必须创建一个具有事务行为的单独过程，并且该过程调用插入过程。

我最终得到了许多基本程序（一张表，一项操作）和许多基本上是基本程序包装器的事务程序。

我的问题是，是否有某种方法可以在基本程序中具有条件事务行为。我的意思是一些 if 条件，我可以在其中放置事务逻辑，以便事务行为可以根据我传递的某些参数打开或关闭。然后当我只想做一个操作时，比如在一个表中插入，我调用带有事务行为的基本过程；而当我想在一个事务中调用两个过程，例如在一个事务中插入一个表并在另一个表中更新全部在一个事务中，然后我制作一个单独的事务过程并调用两个没有事务行为的基本过程。

以下是调用另一个过程并将其包装在事务中的事务过程：

```
BEGIN
    SAVEPOINT the_start;

    BasicProcedure(<list of parameters>);

    COMMIT;

    EXCEPTION
         WHEN OTHERS THEN

         BEGIN
             ROLLBACK TO the_start;
             RAISE;
         END;
END; 
```

我可以很好地将保存点行和提交行放在 if 语句中，但我也可以将异常块放在 if 语句中。我必须将异常块放在 if 语句中吗？如果我在程序中捕获异常怎么办，当异常发生时它会自动回滚吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T21:05:02.797

您编写的内容称为 Table API。有些人对他们发誓，其他人则对他们进行诅咒。Table API 的案例基本上是：模块化和代码重用。反对的理由主要是性能：它们鼓励逐行或逐表处理，而定制的 SQL 连接会更有效。

我个人站在栅栏的两边。目前我更喜欢定制代码：它使交易更容易处理。

这让我想到了你的情况。表 API 应该是通用的并且在所有情况下都可用。这意味着他们无法控制事务的管理：这完全属于调用 Table API 方法的程序。这些程序是实现业务逻辑的代码：业务事务由许多构成工作单元的活动组成。所有这些都必须成功才能使事务成功，否则业务事务需要回滚。如果 Table API 命令发出它们自己的提交，随后的失败将使业务事务处于不一致的状态。 [ACID](http://en.wikipedia.org/wiki/ACID)适用于此级别以及单个 SL 级别。

这实际上与在其中编写带有定制 SQL 的存储过程没有什么不同。

* * *

> “我不清楚你是否提倡制作业务逻辑事务存储过程。”

这是一个很大的领域，设计 PL/SQL 应用程序比业务逻辑要多。（如果你可以使用时间机器，你应该回到 Open World 2009 来观看我关于“使用 Intent 设计 PL/SQL”的演讲）

但从广义上讲，是的，PL/SQL 层的面向外部的方面应该由业务逻辑 API 组成，围绕工作单元（即业务事务）进行组织。

> “这样的程序是自主交易吗？”

绝对不。自治事务仅适用于一个目的：记录和审计活动，我们需要永久记录所发生的事情，而不会影响更广泛的事务。该编译指示的任何其他用途都是等待发生的混乱或数据损坏错误。

商业交易是纯粹而简单的交易。存储过程应该拥有提交，或者他们应该将提交推迟到调用程序。

# knockout.js - 使用下拉列表计算的 Observable 的性能

> ID：11272578
> 
> 赞同：3
> 
> 时间：2012-06-30T08:10:20.877
> 
> 标签：knockout.js

我在推入名为“游戏”的可观察数组中的每个项目上重新渲染模板时遇到问题。它是由一个名为“gamesCount”的计算 observable 引起的，它需要向每个人发送订阅以使用新计数更新他们的数组。如果我从代码中删除“gamesCount”，则完全运行得很快。我有 128 个下拉列表与“gamesCount”共享这个数组，并且需要他们更新有多少“游戏”。我怎样才能提高这方面的表现？

```
app.viewModel.members.bracket = {
        games: ko.observableArray([
            { left: ko.observable(50), top: ko.observable(50), height: ko.observable(96), width: ko.observable(150), reverse: false, type: 1, awayTeam: { display: ko.observable('') }, homeTeam: { display: ko.observable('')} },
            { left: ko.observable(50), top: ko.observable(150), height: ko.observable(96), width: ko.observable(150), reverse: false, type: 1, awayTeam: { display: ko.observable('') }, homeTeam: { display: ko.observable('')} },
            { left: ko.observable(50), top: ko.observable(250), height: ko.observable(96), width: ko.observable(150), reverse: false, type: 1, awayTeam: { display: ko.observable('') }, homeTeam: { display: ko.observable('')} },
            { left: ko.observable(800), top: ko.observable(232), height: ko.observable(426), width: ko.observable(150), reverse: true, type: 1, awayTeam: { display: ko.observable('') }, homeTeam: { display: ko.observable('')} }
        ]),
    };

app.viewModel.members.bracket.gameCount = ko.computed(function () {
        var games = this.games().length;

        var numbers = [];
        for (var i = 0; i < games; i++) {
            numbers.push(i + 1);
        }
            return numbers;

}, app.viewModel.members.bracket);

        <div data-bind="foreach: members.bracket.games">
              @Html.DropDownList("GameNumber", new SelectList(Enumerable.Empty<string>()), new { @class = "select-bracket", data_bind = "options: $root.members.bracket.gameCount, dropdownlist: {}, optionsCaption:' - Game - '" })                      
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:38:03.793

关于 DOM 操作和每次更新数组需要创建的 N ²个列表项， Tom 可能是正确的。`games`您至少可以使用以下方式优化`games`数组创建：

```
vm.gameCount = ko.computed(function () {
  var games = this.games().length,
    numbers = new Array(games);

  for (var i = 0; i < games; i++) {
    numbers[i] = i + 1;
  }

  return numbers;
}, vm); 
```

[工作的jsFiddle](http://jsfiddle.net/kevingorski/BGEyx/3/)

这可能不如保留游戏 # 数组并仅在计算时对其进行必要的更改那样有效，但它是可读的。

# android - Sencha 应用在 IOS 和 Android 上太慢了

> ID：11272579
> 
> 赞同：1
> 
> 时间：2012-06-30T08:10:20.977
> 
> 标签：android, ios, performance, sencha-touch, sencha-touch-2

我写了一个有点小的应用程序，但它在 IOS 和 Android 设备上运行非常缓慢，在我看来，该设备需要很多时间来呈现 GUI。

我确保在启动时需要每个组件，我的应用程序由 5 个选项卡面板组成，每个选项卡面板都包含一个带有多个面板的导航视图，我已将导航视图的 autoDestroy 属性设置为 true。

我使用了 sencha 2.0.0.0 和 2.0.1.1 和 phone gap cordova 1.7.0 ，cordova 1.8.0

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T18:51:00.380

> 我确保在启动时需要每个组件

因此，您的应用程序启动缓慢。主要原因是所有元素都在启动时添加到 DOM 树中（您可以通过 Chrome 的调试器工具检查应用程序的 DOM 树以查看它）。

在某处讨论了优化应用程序响应能力的最佳实践，这里是其中之一：

[PhoneGap 1.4 包装 Sencha Touch 2.X - 性能如何？](https://stackoverflow.com/questions/10085637/phonegap-1-4-wrapping-sencha-touch-2-x-what-about-performance/10085756#10085756)

对于您的情况，更好的实施方法是：

1.  将您的应用程序分为 2 个主要视图，一个`Ext.TabBar`和一个`Ext.Container`
2.  聆听 TabBar 点击的变化，如果用户从一个选项卡更改为另一个选项卡，请在主容器中删除您的视图并添加适当的视图。它确保**您的应用程序在任何时候都只包含 2 个视图**。

希望能帮助到你。

# php - 如何用星号替换某些字符

> ID：11272581
> 
> 赞同：3
> 
> 时间：2012-06-30T08:10:40.593
> 
> 标签：php

我对 PHP 有一个简单的任务，但由于我不熟悉正则表达式或其他东西......我不知道我要做什么。

我想要的其实很简单...

假设我有这些变量：

```
$Email = 'john@example.com'; // output : ****@example.com
$Email2 = 'janedoe@example.com'; // output : *******@example.com
$Email3 = 'johndoe2012@example.com'; // output : ***********@example.com

$Phone = '0821212121'; // output : 082121**** << REPLACE LAST FOUR DIGIT WITH * 
```

如何用 PHP 做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-30T08:20:43.557

你需要一个特定的功能。对于邮件：

```
function hide_mail($email) {
    $mail_segments = explode("@", $email);
    $mail_segments[0] = str_repeat("*", strlen($mail_segments[0]));

    return implode("@", $mail_segments);
}

echo hide_mail("example@gmail.com"); 
```

对于电话号码

```
function hide_phone($phone) {
    return substr($phone, 0, -4) . "****";
}

echo hide_phone("1234567890"); 
```

看到了吗？没有使用一个正则表达式。但是，这些函数不检查有效性。您需要确定什么样的字符串是什么，并调用适当的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T14:13:16.333

对于电子邮件，此函数保留首字母：

```
function hideEmail($email)
{
    $parts = explode('@', $email);
    return substr($parts[0], 0, min(1, strlen($parts[0])-1)) . str_repeat('*', max(1, strlen($parts[0]) - 1)) . '@' . $parts[1];
}

hideEmail('hello@domain.com'); //  h****@domain.com
hideEmail('hi@domain.com');    //  h*@domain.com
hideEmail('h@domain.com');     //  *@domain.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:23:34.447

我尝试了一个单一的正则表达式解决方案，但由于可变长度的星号，我认为这是不可能的。也许是这样的：

```
function anonymiseString($str)
{
  if(is_numeric($str))
  {
     $str = preg_replace('/^(\d*?)\d{4}$/', '$1****');
  }
  elseif(($until = strpos($str, '@')) !== false)
  {
     $str = str_repeat('*', $until) . substr($str, $until + 1);
  }
  return $str;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T21:11:03.580

我创建了一个函数来做到这一点，对我来说很好。我希望有所帮助。

```
function ofuscaEmail($email, $domain_ = false){

    $seg = explode('@', $email);
    $user = '';
    $domain = '';

    if (strlen($seg[0]) > 3) {
        $sub_seg = str_split($seg[0]);
        $user .= $sub_seg[0].$sub_seg[1];
        for ($i=2; $i < count($sub_seg)-1; $i++) { 
            if ($sub_seg[$i] == '.') {
                $user .= '.';
            }else if($sub_seg[$i] == '_'){
                $user .= '_';
            }else{
                $user .= '*';
            }
        }
        $user .= $sub_seg[count($sub_seg)-1];
    }else{
        $sub_seg = str_split($seg[0]);
        $user .= $sub_seg[0];
        for ($i=1; $i < count($sub_seg); $i++) { 
            $user .= ($sub_seg[$i] == '.') ? '.' : '*';
        }
    }

    $sub_seg2 = str_split($seg[1]);
    $domain .= $sub_seg2[0];
    for ($i=1; $i < count($sub_seg2)-2; $i++) { 
        $domain .= ($sub_seg2[$i] == '.') ? '.' : '*';
    }

    $domain .= $sub_seg2[count($sub_seg2)-2].$sub_seg2[count($sub_seg2)-1];

    return ($domain_ == false) ? $user.'@'.$seg[1] : $user.'@'.$domain ;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-30T18:48:36.783

> 输出：a******@gmail.com

```
$email = str_replace(substr($old_email, 1, strlen(explode("@", $old_email)[0])-1), "**********", $old_email); 
```

这是对上述问题的快速解决；它确保仅显示扩展名时电子邮件地址的第一个字符。您可以增加或减少星号的数量，具体取决于

# drag - 我如何制作像 Corona 中愤怒的小鸟那样的关卡滑块？

> ID：11272582
> 
> 赞同：1
> 
> 时间：2012-06-30T08:10:42.297
> 
> 标签：drag, slide, coronasdk, scene, levels

我怎样才能为像 Corona 中的愤怒的小鸟或三星 Galaxy S2 主页那样的级别制作滑块？当我拖动场景时，它会带来场景的其他部分。我怎么能在科罗纳做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:42:38.023

这可能对您有用：[https ://stackoverflow.com/a/7229683/1369488](https://stackoverflow.com/a/7229683/1369488)

您可以制作一个比屏幕更长的显示组，其中包含您所有的关卡图标。使用“moved”触摸事件来感知用户何时拖动，并让显示组根据触摸的位置移动。

# javascript - 获取突出显示的文本

> ID：11272586
> 
> 赞同：1
> 
> 时间：2012-06-30T08:12:06.533
> 
> 标签：javascript, jquery, asp.net, highlight, selectedtext

当我在 中选择一些文本时`<div>`，我希望突出显示的文本出现在 div 正下方的文本框中。我该怎么做？

```
<div>
    My text goes here.
</div>
<asp:TextBox ID="txt" runat="server"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T08:20:15.073

**工作演示** [http://jsfiddle.net/KgtW5/](http://jsfiddle.net/KgtW5/) **或使用 DIV 演示** [http://jsfiddle.net/KgtW5/3/](http://jsfiddle.net/KgtW5/3/)

`.on`接口：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

我已经为您需要的人定制了它。

好的链接：和大提示：[获取突出显示/选定的文本](https://stackoverflow.com/questions/5379120/jquery-get-the-highlighted-text)

希望演示对您有所帮助，如果我错过了什么，请告诉我！`:)`

**代码**

```
$('textarea').on('select', function() {
    var foo = getSelectionText();
    $('#hulk').val(foo);
});

function getSelectionText() {
    var text = "";
    if (window.getSelection) {
        text = window.getSelection().toString();
    } else if (document.selection && document.selection.type != "Control") {
        text = document.selection.createRange().text;
    }
    return text;
}​ 
```

**html**

```
<textarea>Some default text; HUlk is very cool innit</textarea>
<br/>

<input type="text" id="hulk" />
​ 
```

**图片**

![在此处输入图像描述](../Images/6d0f7251c3b66580553f5d1c675156d3.png)

# cocoa - 我可以在 Interface Builder 中移动自动布局约束吗？

> ID：11272587
> 
> 赞同：5
> 
> 时间：2012-06-30T08:12:11.653
> 
> 标签：cocoa, autolayout

有时，自动布局约束会捕捉到错误的锚点——比如当我希望将控件锚定到其上方的控件并且自动布局约束被锚定到窗口底部时。有没有办法移动约束？ASCII 艺术应该更清楚地说明这一点。这就是我所拥有的：

```
+------------------------+
|                        |
| [x] Some checkbox      |
|                        |
| [x] Another checkbox   |
|     |                  |
|     | ← autolayout     |
|     |   constraint     |
|     |                  |
+-----+------------------+ 
```

而这正是我想要的：

```
+------------------------+
|                        |
| [x] Some checkbox      |
|     | ← A.C.           |
| [x] Another checkbox   |
|                        |
|                        |
|                        |
|                        |
+------------------------+ 
```

我可以通过向上移动下部复选框将约束锚定到上部复选框，但这不是我想要的，我希望垂直空间更大。（复选框只是为了说明，我的真实用例有不同的看法。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T14:16:49.233

1.  选择 2 个复选框
2.  单击界面构建器右下角的“H”图标
3.  选择**垂直间距**

![在此处输入图像描述](../Images/0e6da20e901bab8e43721c07e5c9d133.png)

* * *

现在选择无用的约束并将其删除：

![在此处输入图像描述](../Images/452732893f3549aaa3d2a06e0aec82ff.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T18:28:22.377

不，您不能移动约束或将其更改为相对于不同的视图。正如 David Chu 所说，您可以移动视图，直到它自动获得您想要的约束类型，然后更改约束的值以将视图移回您想要的位置。但是，您也可以手动创建所需的约束，然后删除您不需要的自动约束（有时会遇到一些困难）。以下是您的情况：

选中 2 个复选框，然后使用 Editor > Pin > Vertical Spacing 菜单添加您想要的约束（或使用 IB 布局视图右下角的 3 个按钮的中间来获得相同的菜单）。此时，不需要的自动约束应该变得多余并从紫色切换到蓝色。然后，您可以选择它并删除它。可以使用这些 Pin 和 Align 菜单中的项目创建每种约束。

我发现获得你想要的约束总是有可能的，尽管它与 Xcode 添加的自动约束进行了一场战斗，有时还有一个难题是要找出为什么它们没有从紫色变为蓝色。例如，在添加一些自定义约束后直接移动视图，您会发现 Xcode 可能已经删除了您添加的大部分约束并重新添加了自动约束，即使对于窗口中其他看似随机的视图，而不仅仅是您的那个感动！祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:04:48.997

尝试移动下方的复选框，使其在自身和上方的复选框之间成为支柱。然后单击支柱并单击右侧面板中的属性框。在那里，您应该能够取消选中“标准”框并将其设置为您想要的间距。

# xcode - 打开从 git 存储库克隆或提取的项目时 Xcode 4 崩溃

> ID：11272588
> 
> 赞同：0
> 
> 时间：2012-06-30T08:12:21.543
> 
> 标签：xcode, git, xcode4, crash, clone

将我的项目推送到远程并将其拉回另一台机器后，当我尝试在 Xcode 4.3.2 中打开它时出现此崩溃：

![在此处输入图像描述](../Images/5fd69b7f2572a7dd92af15c3e72ad11d.png)

项目包内容： ![在此处输入图像描述](../Images/7581cfcfff66aed3284122155ab53592.png)

这个项目每次都会发生这种情况。我试图通过清理*pbxuser*和*mode1v3*文件中的 proect 包内容来解决它，但没有效果。这可能是什么原因以及如何修复它？有没有**xcodeproj**修复工具或分析器？可能是我的 gitattributes 文件的错吗？：

```
*.pbxproj -crlf -diff -merge 
```

我不在 tis 项目上使用 .gitignore（项目很小）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:01:37.473

我过去有过这种情况...在一个已知的好项目上启动 Xcode，关闭所有窗口，然后通过 File->Open 找到 .xcodeproj 文件，然后选择您的新项目。当时为我解决了这个问题，希望对你有用：让我有点难过。

# mysql - SQL 选择 -> 产品 -> 评论 -> 用户

> ID：11272589
> 
> 赞同：0
> 
> 时间：2012-06-30T08:12:33.143
> 
> 标签：mysql, sql

感谢您花时间帮助解决此问题；）我是 SQL 新手，希望在一个查询中解决一些问题，但我不知道该怎么做。-

基本上我有一张产品表、一张用户表和一张评论表，由 products.id -> comments.pid 和 user.id -> comments.uid 链接，

我想知道仅创建 1 个查询并获取所有带有子评论的产品（包括用户名）的最佳做法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T08:17:29.887

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
SELECT *
FROM   products
  LEFT JOIN comments ON products.id = comments.pid
  LEFT JOIN user     ON user.id     = comments.uid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:02:15.943

学习joins是解决此类问题的最佳方法

解释

我们在这里要做的是创建一个虚拟表，它根据某些关系获取记录。

我在这里创建了三个表

*   产品
*   用户
*   注释

并且之间存在关系集

1.  产品和评论表 - 使用 product.id 和 comments.prod_id
2.  用户和评论表 - 使用 user.id 和 comments.user_id

现在您可以使用 join 过滤结果

`SELECT product.id,user.name,comments.DATA FROM comments LEFT JOIN product ON comments.prod_id = product.id INNER JOIN USER ON comments.user_id = USER.id;`

或者如果您不想使用连接，您可以简单地创建一个关系，但请注意，使用连接是最好的方法

```
SELECT product.id,USER.name,comments.DATA 
FROM product,USER,comments
 WHERE product.id = comments.prod_id AND USER.id = comments.user_id; 
```

你可以在这里查看结果

[SqlFiddle](http://sqlfiddle.com/#!2/fe6b5/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:16:58.897

**`JOIN`**你可以试试这个，而不是使用，

```
select p.id,u.name,c.data
from products as p,user as u,comment as c
where p.id = c.pid and u.id = c.uid; 
```

# c# - Visual Studio 中应用的发布/调试级别是什么？

> ID：11272590
> 
> 赞同：1
> 
> 时间：2012-06-30T08:12:33.400
> 
> 标签：c#, visual-studio-2010, compilation, release

我目前正处于项目的最后阶段。作为我努力的一部分，我一直在重新组织主要的 MVC 解决方案以使用对预编译库的引用，而不是在一个解决方案中包含 15 个不同的项目。

我的问题与应用发布/调试开关的位置有关。

例如，我的低级库是在调试模式下构建的，而我的主要 Web 客户端应用程序是在发布模式下构建的。

项目会以发布模式（因为这是主应用程序的配置）还是调试模式（因为主应用程序依赖于以调试模式编译的二进制文件）构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:32:37.300

在您描述的场景中，您的 Web 项目将构建为“发布”程序集，并将依赖于“调试”程序集。引用的原因是“发布”和“调试”程序集（除非使用非默认选项）之间的唯一区别是分别排除或包含调试符号和程序集中 IL 的优化。所以，这是一个完全有效的情况，有一个引用调试程序集的发布程序集，尽管它可能不是你想要的。因为调试程序集中会有更多的 IL（因为它内置了 wirhout 优化）让 JIT 做更多的工作来尝试优化它将在机器上运行的代码，这可能会导致运行时体验不那么优化、速度较慢。

根据您是否对引用的程序集进行数字签名，您可以使用构建后任务将调试编译的引用程序集替换为项目输出的发布编译程序集。

可以提出一个论点，即您不应该在用于创建它们的解决方案之外引用调试编译的程序集，因为将 DLL 作为文件引用（而不是在 IDE 中进行项目引用）的操作假设是程序集是它包含的功能的经过测试的完成版本。

总之，您的项目的编译方式不依赖于它所引用的程序集的构建配置，但如果可能，您应该改为引用这些程序集的发布编译版本。

# asp.net - 如何通过在地址栏中输入 url 来阻止用户访问我的 Web 应用程序文件夹和文件？

> ID：11272599
> 
> 赞同：1
> 
> 时间：2012-06-30T08:14:36.590
> 
> 标签：asp.net, html

我正在使用我自己的身份验证方法，通过 cookie 以及数据库中的用户名和密码验证，但是当我调试我的应用程序时，我可以通过直接输入没有登录的 url 来访问任何文件夹和图像、pdf 等类型的文件。因此，我希望将所有这些类型的对文件夹和文件的未经授权的访问都重定向到 default.aspx 页面。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:17:22.347

**试试这些**

1.  使用 Asp.net 身份验证，了解更多信息[转到此处](http://msdn.microsoft.com/en-us/library/eeyk640h.aspx)
2.  使用 global.asax 文件 beginrequest 事件，在那里执行您的自定义代码以检查有效用户，了解更多信息[Go here](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.beginrequest.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:21:35.553

尝试这个，

```
 <location path="[subdir1]">
            <system.web>
              <authorization>
                            <deny users ="?" />
                    <allow users ="*" />
              </authorization>
            </system.web>
       </location> 
```

更改为`[subdir]`您要保护的文件夹。有关更多信息，请参见[此处](http://support.microsoft.com/kb/316871)

# c++ - 国家和语言代码检测

> ID：11272602
> 
> 赞同：4
> 
> 时间：2012-06-30T08:14:52.620
> 
> 标签：c++, qt, localization, freedesktop.org

我需要在 Qt 中检测用户的语言和国家代码。该代码必须与[http://standards.freedesktop.org/desktop-entry-spec/latest/ar01s04.html](http://standards.freedesktop.org/desktop-entry-spec/latest/ar01s04.html)上的标准相匹配。

我试过 QLocale，但它在 countryToString 和 languageToString 中返回了完整的国家和语言名称。（我需要短代码，比如“en”而不是“English”。）

其中一种方法是创建 QLocale::Language 和 QString 的映射。但是有没有更快更简单的方法呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T08:20:07.143

见[QLocale::name()](http://qt-project.org/doc/qt-4.8/qlocale.html#name)

> 以“language_country”形式的字符串返回此区域设置的语言和国家/地区，其中语言是小写的两个字母的[ISO 639](http://en.wikipedia.org/wiki/ISO_639) 语言代码，国家是大写的两个或三个字母的 [ISO 3166](http://en.wikipedia.org/wiki/ISO_3166)国家代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T08:24:06.057

除了 Paul 的回答之外，还有[QLocale::uiLanguages()](http://qt-project.org/doc/qt-4.8/qlocale.html#uiLanguages)和[QLocale::bcp47Name()](http://qt-project.org/doc/qt-4.8/qlocale.html#bcp47Name)应该给出变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T12:51:40.773

当我们谈论**正确**检测用户首选项中实际设置的国家（Windows 上的控制面板/位置，OS X 上的首选项/区域）时，您应该使用[https://github.com/crystalidea/qt-detect-user-country](https://github.com/crystalidea/qt-detect-user-country)

# azure - 从 DC 中托管的服务器迁移到 Azure

> ID：11272607
> 
> 赞同：1
> 
> 时间：2012-06-30T08:16:28.677
> 
> 标签：azure, hosting, web-hosting, cloud-hosting, self-hosting

我经营自己的英国托管和网页设计公司。

我们在英国的一个 DC 中拥有大约 10 台物理服务器，并托管大约 300 个网站、电子邮件服务器和 Web 应用程序。它们都在带有几个 linux VM 的 windows 服务器平台上。

我现在有一个 Windows Azure 帐户，我已经在我的 azure 帐户中设置了一个中型 windows 2008 服务器，并希望开始使用它来托管和迁移我的一些网站和服务到我的 azure 帐户和新服务器上。考虑到也许我可以将我所有的服务转移过来，并摆脱对我在 DC 中的任何物理服务器的需求。

我的问题是，我仍然在为这将持续花费我多少钱而苦苦挣扎。

帐单区域并没有真正告诉我太多，因为它只是将我的帐单显示为 0.00 英镑。它显示了我的使用情况，但我真的很难将我当前使用的资源与它在 azure 中的计费方式进行比较？它甚至没有告诉我如果我不接受审判会付出什么代价。

如果它比在我当前的 DC 中托管要花费我更多的成本，我不想移动 Web 托管站点。

我正在考虑将许多站点移动到我设置的新服务器上，因为它比我当前的一些服务器更好，所以会看到很大的好处，我什至考虑在我的 Azure 帐户中设置一个更大的服务器，但又一次不确定那个盒子的真实成本很难比较。

我是否只需要查看计算器并选择我将部署的服务器数量，选择我需要多少存储空间和带宽？或者我是否还需要查看计费区域中的项目 - 例如：

计算单元、存储事务、数据传出、数据传入

当我设置服务器时，它没有问我想要多少存储空间，它只是在实际服务器中设置了大约 150GB 可用空间。

任何建议，因为我真的认为这是我想在接下来的 12 个月内使用的东西，但如果我最终迁移了东西，它会比我的正常托管花费更多，而且我必须在结束时将东西全部移回12 个月。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:25:49.557

因为您使用的是[Windows Azure 虚拟机](http://msdn.microsoft.com/en-us/library/windowsazure/jj156003)，所以您应该首先使用[虚拟机定价计算器](https://www.windowsazure.com/en-us/pricing/calculator/?scenario=virtual-machines)。此计算器仅显示与您的方案相关的成本，存储交易成本除外。以下是您必须考虑的成本明细：

## 虚拟机

虚拟机成本在账单上显示为计算单位。在整个 Windows Azure 虚拟机预览版中，每个核心每小时的成本为 0.08 美元。一旦虚拟机全面上市，Windows 虚拟机的成本将为每小时 0.115 美元，Linux 虚拟机的成本为 0.085 美元。使用计算器，您可以看到中型实例使用两个内核，因此在预览期间按每小时 0.16 美元计费。您必须根据自己的最佳判断来确定需要多少虚拟机以及它们应该有多大。

## 贮存

您必须为 VHD 中实际使用的数据付费。假设您有一台附加了一个 VHD 的虚拟机。如果 VHD 的大小为 200GB，但仅使用 100GB，则您必须每月支付 100GB 的费用。

## 带宽

微软现在只对出口数据传输（从数据中心传出的数据）收费。通过此定价更改，计费区域的数据传输部分将始终为 0.00。希望您已经对当前的出站数据使用情况有了一个很好的了解。如果是这样，您只需将带宽滑块移动到正确的位置即可计算带宽成本。

## 存储事务

[如果您向下滚动到此博客文章](http://blogs.msdn.com/b/windowsazure/archive/2012/06/28/data-series-exploring-windows-azure-drives-disks-and-images.aspx)的事务部分，您将看到存储事务是如何计算的。基本上，每次写入操作计算一个事务，每个读取操作可能计算一个事务，具体取决于数据是否被缓存。存储交易的成本可以忽略不计，因为您只需为每 100,000 笔交易支付 1 美分。这就是为什么存储事务被排除在计算器之外的原因。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:36:45.020

在输入框中回答这样的问题，在细节表达上是有限的。如果您的使用量低于选定的限制，成本计算器可以为您提供有关成本上限的估计值。根据我的个人经验，如果您选择更高的使用限制并将使用量保持在您的预测限制范围内，则不会有任何隐藏费用。但实际情况可能大不相同，因为您一开始可能无法正确估计使用情况，这可能会在以后改变成本。

要将传统的 Web 托管解决方案迁移到 Windows Azure，最新版本的 Windows Azure 虚拟机是最合适的，因为这需要最低的迁移复杂性。因此，您将选择的 VM 大小将具有固定资源（计算、本地存储、网络带宽、磁盘 I/O 等），并且只要您在限制范围内，成本将是固定的，因此不会产生看不见的费用。

Windows Azure 存储随用随付（范围约 0.012 美元/GB 取决于使用限制）并且没有限制。当从传统的网络托管迁移到云环境时，由于应用程序架构设计，我看到云存储使用量减少了，而虚拟机存储量增加了，因此可能不会花费很多。

您将看到成本变化的地方是数据出/入，很难预测，因为这完全取决于应用程序的使用情况，因此您必须将其视为可变成本。

您还可以联系[Windows Azure 虚拟机论坛](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforLinux/threads)，那里有专门的 Windows Azure 虚拟机资源来回答您的此类问题。

最后，我还要补充一点，Windows Azure 虚拟机仍处于预览模式，因此最好将您的一些业务带到 Windows Azure VM 作为试用和测试目的，因为现在无论您认为您可能遇到什么问题（因为它是预览版），这可能会导致服务中断。

# android - 安装apk，找不到adb命令

> ID：11272608
> 
> 赞同：9
> 
> 时间：2012-06-30T08:16:36.100
> 
> 标签：android, apk

我想在我的模拟器上安装 apk，我找到了这个页面[如何安装 apk](http://blog.freewarelovers.com/2010/08/how-to-install-apk-files-on-android.html) 和[这个线程](https://stackoverflow.com/questions/8744758/adb-is-not-recognized-as-internal-or-external-command-on-windows)

我的问题是当我在命令行中输入 adb 时，我得到了这个：

```
'adb' is not recognized as an internal or external commands 
```

我`path`在windows上设置了前进，路径是我的工具导向器`sdk directory`，我的意思是我设置的路径是`C:\Program Files (x86)\Android\android-sdk\tools`，我在windows 7上工作

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-30T08:46:28.520

首先将您的 Android SDK 路径添加`"C:\Android\android-sdk\platform-tools"`到您的操作系统路径中

其次使用此命令重新启动 adb：

```
adb kill-server
adb start-server 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T09:16:51.490

**1 步骤**如果您有多个模拟器而不是关闭所有模拟器并通过 Window--> AVD Manger 打开模拟器-> 并选择您想要安装 apk 的任何一个模拟器并通过单击 Strat 启动该模拟器

**2 步骤**打开**Command Promot**并输入到android sdk 的**Platform-tools**文件夹的路径，如 cd **C:\Program Files (x86)\Android\android-sdk\platform-tools**如果 64 位其他明智**C:\Program Files\Android\ android-sdk\平台工具**

**3 步**adb install Path Upto ur apk 表示您放置 apk 的文件夹的路径 示例**adb install C:\User\Download\facebook.apk**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T08:27:07.213

尝试这个

首先将您的当前目录更改为平台工具

```
cd C:\Program Files\Android\android-sdk\platform-tools 
```

然后在模拟器上安装你的apk

```
adb install "<Path to your apk file>" 
```

例如

```
adb install "c:\Apps\abc.apk" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-06T23:00:35.610

对于 Mac 用户

1.  进入`/Users/your-user-name/Library/Android/sdk/platform-tools`目录

2.  **./adb your-command** （例如：./adb devices）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T08:51:18.833

您可以在没有命令的情况下拉取 apk，第 1 步在编辑器中选择 ddms 视图第 2 步选择模拟器或设备第 3 步选择 Fle Explorer 第 4 步选择 sdcard，然后在此处选择带有设备图标的右角推送和拉取选项选择推送选项并选择您的 apk 位置和推它第 5 步现在你可以看到你的 apk 安装在模拟器或设备中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-30T08:36:54.350

添加

```
C:\Android\android-sdk\platform-tools 
```

和

```
C:\Android\android-sdk\platform-tools 
```

到您的路径环境变量

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-30T08:20:24.930

尝试将其更改为

从

**`C:\Program Files (x86)\Android\android-sdk\tools`**

至

**`C:\Program Files (x86)\Android\android-sdk\platform-tools`**

如果不起作用，那么您也可能需要重新启动系统。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-22T12:09:55.813

启动终端并编写以下命令

对于 MAC

```
./adb kill-server
./adb start-server 
```

对于 Windows

```
adb kill-server
adb start-server 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-12T10:13:03.170

就我而言，我 `%LOCALAPPDATA%\Android\Sdk\platform-tools`的*系统路径*没有运气。

我将它移到了我的*用户路径*中，它运行良好。

PS 我个人使用[https://rix0rrr.github.io/WindowsPathEditor/](https://rix0rrr.github.io/WindowsPathEditor/)，非常简单明了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-26T22:37:49.920

对我来说这是完美的工作

转到文件夹android安装转到平台工具并尝试以下命令

```
./adb reverse tcp:8081 tcp:8081 
```

运行您的应用程序后

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-18T13:56:37.630

对于 Mac - 在 bash/zsh 配置文件中添加下一行：

```
export PATH="$HOME/Library/Android/sdk/platform-tools:$PATH" 
```

# crystal-reports-2010 - 不支持的操作。JRC 引擎处理的文档无法在 C 堆栈中打开。

> ID：11272609
> 
> 赞同：2
> 
> 时间：2012-06-30T08:16:37.937
> 
> 标签：crystal-reports-2010

我的问题似乎相似，但情况不同。我将 Windows Server 2003 64 位与 Visual Studio 2010、Crystal Report 13.02.456 Runtime（64 位）用于框架 4.0 和用于 Visual Studio 2010 的 Crystal 报告版本。

该报告在调试模式下完美运行。1.但当它最初部署在 IIS 上时，它开始给出 jscript 'bobj' 缺失错误。2.后来我搜索了互联网并将 Crystalreportviewer13 文件夹从 IIS 文件夹复制到我的应用程序根文件夹。3.错误更改为“不支持的操作”。由 JRC 引擎处理的文档无法在 C++ 堆栈中打开。

任何帮助都会很棒，因为我还找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:52:59.053

此问题可能是由于加载 rpt 文件时路径不正确造成的。也可能是其他事情，但当然这是首先要检查的事情。

[在此处](http://scn.sap.com/thread/2011850)、[此处](http://scn.sap.com/thread/1860995)和[此处](http://scn.sap.com/thread/1975259)查看论坛帖子

# c# - 将 .DLL 绑定/附加到 .EXE

> ID：11272610
> 
> 赞同：1
> 
> 时间：2012-06-30T08:16:43.867
> 
> 标签：c#, dll, binding

我在 C# 中有我的项目，在 C# 中有一个 .dll。我已经看到可以在其他语言中包含 dll 并在运行时从 exe 中提取 .dll。

我将如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:34:34.950

您可以将程序集作为资源文件嵌入到另一个程序集中（只需转到项目属性并打开资源部分）。

接下来，您可以在运行时将资源文件检索到流中，方法是使用[`Assembly.GetManifestResourceStream()`](http://support.microsoft.com/kb/319292).

最后，您可以将程序集加载到当前应用程序域或单独的应用程序域中[`Assembly.Load(byte\[\])`](http://msdn.microsoft.com/en-us/library/h538bck7.aspx)（通过将资源流加载到字节数组中）。

因此，您可以直接从内存中加载资源程序集，而无需先将其保存到磁盘。

您现在可以使用[`Assembly.GetType`](http://msdn.microsoft.com/en-us/library/y0cd10tb.aspx)重载之一从程序集中加载类型。当然，您可能希望在主程序集和资源程序集之间定义一些协定，以便您可以使用此程序集内的自定义类型。

# c# - 为什么这个锁语句不起作用？

> ID：11272616
> 
> 赞同：4
> 
> 时间：2012-06-30T08:17:46.720
> 
> 标签：c#, locking

```
class Program
{
    static object test = new object();
    static void Main(string[] args)
    {
        new Program().test2();
        Console.ReadKey();
    }

    public void test1()
    {
        lock (test)
        {
            Console.WriteLine("test1");
        }
    }

    public void test2()
    {
        lock (test)
        {
            test1();
            Console.WriteLine("test2");
        }
    }
} 
```

上面的代码是否应该首先完成 test2() 的 lock 语句中的语句，然后转到 test1()？（即输出不应该是这样的吗？：test2 test1）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-30T08:22:21.487

不。事件的顺序（标识代表调用堆栈或逻辑操作）是：

*   主要调用 test2
    *   test2 尝试获取与测试对象关联的监视器（`lock`语句的开头）
        *   监视器当前是无主的。成功！
        *   当前线程现在“拥有”该监视器，计数为 1
    *   test2 调用 test1
        *   test1 尝试获取测试对象的监视器（`lock`语句的开头）
            *   监视器当前拥有......但由当前线程拥有。成功！
            *   当前线程仍然“拥有”监视器，计数为 2
        *   test1 打印“test1”
        *   test1 释放监视器（`lock`语句结束）
            *   当前线程仍然“拥有”监视器，计数为 1
        *   test1 返回
    *   test2 打印“test2”
    *   test2 释放监视器（`lock`语句结束）
        *   监视器现在是无主的（因此另一个线程可以获取它）
    *   test2 返回

重要的是要注意监视器是可*重入的*——如果当前线程已经拥有监视器，那么再次尝试获取它只会增加计数，而不是阻塞。

如果监视器*不是*可重入的，则输出不会是“test2，test1”——它只是死锁。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-30T08:24:24.060

监视器在同一线程上可*重入。*避免意外死锁非常重要，如果没有这种行为，您的代码将完全冻结。

Mutex 也是可重入的，而 Semaphore 则不是。

实现非常简单。监视器存储两条信息。进入它的线程的所有者 Thread.ManagedId 和一个计算它进入次数的计数器。所以第一个锁可以进入，因为它不属于它，它将所有者设置为您的线程并将计数设置为 1。第二个锁允许进入，因为线程 ID 匹配，计数增加到 2。在结束时第二次锁定，计数再次递减到 1。在第一个结束时，计数递减到 0 并重置所有者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T08:22:34.253

锁定不应该在单线程场景中使用。它的目的是用于对相同方法或对象实例的跨线程调用。

您注意到的行为是正常的。

当两个或多个线程可以同时访问它们时，您通常希望同步对资源（变量、集合等）的访问。

# linux - 尽管正确设置了日志级别，Printk 仍不打印

> ID：11272617
> 
> 赞同：0
> 
> 时间：2012-06-30T08:17:47.313
> 
> 标签：linux, printk

我的问题是，我正在尝试将驱动程序构建到内核中。我决定用一个简单的 Hello World 程序来测试我的代码。代码如下所示：

```
#include <linux/kernel.h>
#include <linux/err.h>
#include <linux/module.h>
#include <linux/init.h>
#include <linux/printk.h>

int __init my_init(void)
{
    printk(KERN_ALERT "Hello world\n");
    return 0;
}

device_initcall(my_init);
//subsys_initcall(my_init); 
```

另外， cat /proc/sys/kernel/printk 显示 7 4 1 7 从 .config 文件中，我找到“CONFIG_DEFAULT_MESSAGE_LOGLEVEL=4”

我正在使用 Makefile 中的 obj-y += 制作文件。我发现'make'可以构建模块，但启动后dmesg或/var/log/下没有出现printk输出。

我想知道驱动程序是否根本没有内置到内核中。有什么方法可以检查吗？

感谢：D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:29:33.660

I solved the problem. I found out that the printk statements were actually getting printed on the console, but got wiped out from dmesg due to the large number of other messages getting printed. I increased the size of dmesg, and now it stores the printk statements.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T06:18:01.567

您可以使用

```
lsmod command
    OR
cat /proc/modules 
```

命令来检查您的驱动程序是否已加载。

查看您的代码，我觉得 __init 应该替换为 module_init 或 __initcall。这些内核签名确保模块 init 在插入时被调用。

您可以使用 insmod 测试您的驱动程序，并通过调用 dmesg 检查它是否记录了消息。

# c# - 基本单元测试与单元测试

> ID：11272620
> 
> 赞同：17
> 
> 时间：2012-06-30T08:18:11.353
> 
> 标签：c#, asp.net-mvc, unit-testing

我正在做一个 MVC 项目，想知道是使用基本单元测试还是单元测试，我阅读了关于两者的文章/解释，但看不出两者之间有多大区别。主要区别是什么？哪个更适合带有数据库后端的大型应用程序？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T08:34:22.797

`Basic Unit Test`Visual Studio 的项目模板和项目模板之间的区别在于`Unit Test`后者包括对 、 和 例程的支持`ClassInitialize`，这些`ClassCleanup`例程允许您在测试夹具之前/之后执行一些代码，以及在每个单元测试之前/之后执行一些代码。如果您在单元测试中不需要此类功能，则可以使用生成以下文件的基本模板：`TestInitialize``TestCleanup`

```
[TestClass]
public class UnitTest2
{
    [TestMethod]
    public void TestMethod1()
    {
    }
} 
```

当然，如果您想稍后支持此功能，您总是可以将相应的例程添加到基本单元测试中。

# android - Android 按钮悬停事件

> ID：11272621
> 
> 赞同：5
> 
> 时间：2012-06-30T08:18:19.583
> 
> 标签：android, events, button, hover, pressed

我使用 XML 文件显示具有 2 种状态（正常、按下）的按钮。如何知道何时按下按钮？是否有像 onClick --> onPressed 这样的事件，或者我怎样才能找到它？

这是我使用的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_focused="true" android:state_pressed="false" android:drawable="@drawable/buttonbluepressed" />
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/buttonbluepressed" />
    <item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/buttonbluepressed" />
    <item android:drawable="@drawable/buttonblue"/>
</selector> 
```

这是我使用它的方式：

```
<Button
    android:id="@+id/button_choose"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/choose_button"
    android:onClick="onButtonClicked"
    android:text="@string/button_choose" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-30T08:20:25.000

您可以将[setOnTouchListener](http://developer.android.com/reference/android/view/MotionEvent.html)用作：

```
button.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_DOWN){
                    //Button Pressed
                }
                if(event.getAction() == MotionEvent.ACTION_UP){
                     //finger was lifted
                }
                return false;
            }
        }); 
```

# javascript - Highcharts - 无法使用 JSON / 没有 PHP 加载外部数据

> ID：11272623
> 
> 赞同：0
> 
> 时间：2012-06-30T08:18:31.330
> 
> 标签：javascript, json, csv, highcharts

我正在使用 HighCharts / HighStocks 并尝试将数据从我的报告软件自动传递到图表中，而不使用 PHP 文件，但我无法弄清楚如何正确使用我的语法。

坦率地说，我认为这超出了我的范围。我不是 AJAX/Javascript/JSON 编码器。我的技能在别处，在这里阅读并阅读了大约 40 页的帖子后，我希望有人可以帮助我。

显然，当我在本地使用该示例时，它可以正常工作，但是当我尝试更改 get JSON 行中的源数据时，我只是得到一个空页面/没有图表。很长一段时间以来，我一直在用头撞墙，但没有任何运气。

**HTML 代码：**

```
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Highstock Example</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(function() {$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) { 
// Create the chart
window.chart = new Highcharts.StockChart({
chart : {
renderTo : 'Container'
},
rangeSelector : {
selected : 1
},
title : {
text : 'This is the header'
},
series : [{
name : 'AAPL',
data : data,
tooltip: {
valueDecimals: 2
}
}]
});
});
});
 </script>
</head>
<body>
<script src="../js/highstock.js"></script>
<script src="../js/modules/exporting.js"></script>
<div id="Container" style="height: 500px; min-width: 500px;"></div>
<p>Testing</p>
</body>
</html> 
```

据我所知，这是我需要更改的行：

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) { 
```

在我的本地服务器上，我可以使用以下链接从报告工具（从 SQL 数据库中读取）中提取数据。

```
//localserver/query=ZZZ 
```

这输出为：

```
[{f1:"[[1338732000000,29119.439],"},
{f1:"[1338818400000,30367.229],"},
{f1:"[1338904800000,29221.893],"},
{f1:"[1339336800000,29640.756]]"}] 
```

*或者我可以这样传递：*

```
[[1338732000000,29119.439],
[1338818400000,30367.229],
[1338904800000,29221.893],
[1338991200000,31075.204],
[1339077600000,29449.717],
[1339336800000,29640.756]] 
```

*我很欣赏上面的数据格式与 HighCharts 的预期略有不同。*

**我的问题是：**

a) 是否可以在不使用 PHP 文件的情况下通过本地服务器的按需数据填充高图？

一切都在同一个/本地服务器上。报告软件有一个 web 元素，可以查询 SQL 数据库并返回数据集。

基本上我想替换这个：

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) { 
```

有了这个：

```
$.getJSON('http://localserver/query=ZZZ', function(data) { 
```

原因是报告软件允许用户更改日期、变量（例如国家/地区）等，然后我希望它能够更新图表。

b) 我可以在 html 中解析/翻译 JavaScript 中的数据吗？

我认为我遇到的一半问题是让报告软件和 Highcharts Javascript 握手。我已经尝试过他们网站上的本地 csv 示例，但我根本无法让它工作，也无法在任何地方找到完整的 html/javascript 示例。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:03:06.150

*   是的，您可以使用从 SQL 查询生成的 JSON 来填充 Highcharts。这里的关键是在 .getJSON 回调函数中初始化图表并循环遍历 JSON 数据以将点添加到图表中。

这是一些示例代码，希望可以帮助您入门：

```
<script type="text/javascript">
    var chart = null;

    function createChart() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
            },
            xAxis: {
                type: 'datetime',
                title: {
                    text: 'Time'
                }
            },
            yAxis: {
                title: {
                    text: 'Some data'
                }
            },
            series: [{
                data: [],
                name: 'some data',
                type: 'line'
            }],
        });
    }

    $(document).ready(function() {
        // Fetch JSON...
        $.getJSON('http://localhost/script.php', function(res, textStatus, jqXHR) {
            if (res.success) {
                // Populate the chart...
                var points = [];
                $.each(res.points, function(i, val) {
                    points.push({ x : val.x, y : val.y });
                });
                createChart();
                chart.series[0].setData(points);
            }
        });
    });
</script> 
```

# php - 如何根据查询字符串使特定页面部分可见

> ID：11272627
> 
> 赞同：0
> 
> 时间：2012-06-30T08:19:12.217
> 
> 标签：php, get

我想要一个包含 3 个部分的页面：

```
<?php
session_start();
if (isset($_SESSION['login'])) {
    echo "Work";
    $_GET['id'] = 'edit';
?>
<a href="protected.php?if=edit">Edit post</a>
<?php
}
else {
    echo "notWork";
}
if (isset($_GET['id']) && $_GET['id'] == 'edit') {
    echo "Editing  . . .";
}?> 
```

但我不知道如何做那个页面“编辑”，只有当我们去链接时才可见`protected.php?if=edit`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:25:48.010

好的。只需使用以下代码检查您的页面引用：

```
$_SERVER['HTTP_REFERER'] 
```

更多文档在这里 [http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:24:10.250

我认为你应该使用`$_GET['if']`而不是`$_GET['id']`作为 url 参数被命名`if`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T08:29:13.020

所以，如果我去页面`protected.php`并且参数`if`是`edit`，请更改代码。有错别字！

```
<?php
    if (isset($_GET['if']) && $_GET['if'] == 'edit') {
        echo "Editing  . . .";
    }
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T08:30:08.393

您可以根据通过 URL 传递的 id 包含编辑页面。就像是：`if($_GET['id'] == edit) include('edit.php')`

但是，这样做无需进一步检查，每个人都可以通过猜测`id`. 因此，您宁愿在每次包含某些内容时检查用户权限。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T08:33:25.473

如果要从 url 读取传递的值，可以使用 $_GET['if'] 或 $_REQUEST['if'] 来获取该值。

也正如你所说的“页面有 3 个部分”，所以我认为你只想在某个部分显示，那么你应该使用 elseif => [http://php.net/manual/en/control-structures.elseif.php](http://php.net/manual/en/control-structures.elseif.php)

# xaml - 当 WindowsPhone 中的 Amount < 0 时，TextBlock 的背景应该是红色的

> ID：11272629
> 
> 赞同：0
> 
> 时间：2012-06-30T08:19:28.013
> 
> 标签：xaml, c#-4.0, windows-phone-7.1

基本上，当金额为负时，我将金额绑定到 Windows Phone 中的 TextBlock，我应该将背景颜色更改为红色。

我们可以通过 0 % c# 代码的 xaml 实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:50:34.417

```
<TextBlock ... Background="{Binding Amount, Converter={StaticResource AmountToBackgroundBrushConverter}" /> 
```

只需制作您自己的 AmountToBackgroundBrushConverter

# emacs - 如何在 Emacs Lisp 中创建列视图？

> ID：11272632
> 
> 赞同：17
> 
> 时间：2012-06-30T08:20:02.340
> 
> 标签：emacs, lisp, elisp

我正在用 Elisp 编写自己的模式。它基本上是一个简单的 crud 应用程序，显示可以通过 minibuffer 操作的数据行。我想为这些行创建一个看起来像 emacs 包管理器的视图：数据列很好地对齐。实现这种观点的最佳方式是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-17T19:42:58.673

菲尔斯的回答让我走上了正轨。虽然没有教程或简单的例子，所以我创建了一个。下面是一个表格列表模式导数的示例，它具有静态数据并且可以打印当前列的 ID：

```
(define-derived-mode mymode tabulated-list-mode "mymode" "Major mode My Mode, just a test"
  (setq tabulated-list-format [("Col1" 18 t)
                               ("Col2" 12 nil)
                               ("Col3"  10 t)
                               ("Col4" 0 nil)])
  (setq tabulated-list-padding 2)
  (setq tabulated-list-sort-key (cons "Col3" nil))
  (tabulated-list-init-header))

(defun print-current-line-id ()
  (interactive)
   (message (concat "current line ID is: " (tabulated-list-get-id))))

(defun my-listing-command ()
  (interactive)
  (pop-to-buffer "*MY MODE*" nil)
  (mymode)
  (setq tabulated-list-entries (list 
                (list "1" ["1" "2" "3" "4"])
                (list "2" ["a" "b" "c" "d"])))
  (tabulated-list-print t)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:53:09.177

如果您查看您提到的包列表功能的代码，您会发现它使用`package-menu-mode`了源自`tabulated-list-mode`.

*   `M-x` `find-function` `RET` `package-menu-mode` `RET`
*   `C-h``f` `tabulated-list-mode` `RET`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T19:58:25.943

我一直使用 org-mode 来完成这类任务。

This should be a starting point for your development, because you already have nice tables.

# php - Magento 版本升级不使用 SSH

> ID：11272637
> 
> 赞同：0
> 
> 时间：2012-06-30T08:20:20.327
> 
> 标签：php, magento

大家下午好

我想在不使用 SSH 的情况下将 magento 版本 1.3.x 升级到 1.7.x。有什么方法可以在不使用 SSH 的情况下进行升级。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:14:51.943

[来源](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/upgrade_using_magento_connect)

*   在管理员中转到 System/Magento Connect/Magento Connect Manager

*   将 magento-core/Mage_All_Latest 粘贴到 Paste extension key 中进行安装：，然后单击 Install

*   您可能会在下面的梨形窗口中收到类似这样（以及更多）的消息

*   magento-core/Mage_All_Latest 需要包“magento-core/Mage_Core_Modules”（版本 >= 1.1.8，版本⇐ 1.2，排除版本：1.2），安装版本为 1.1.6

*   在 Manage Existing Extensions 的最右侧，单击 Check for Upgrades

*   具有可用升级的软件包行现在将显示为黄色。

*   在选择的每一行中选择最新版本。

*   现在单击提交更改。

*   现在再次将 magento-core/Mage_All_Latest 粘贴到粘贴扩展密钥中以安装：，然后单击安装。

# open-source - 哪个用于订阅的开源电子商务解决方案？

> ID：11272644
> 
> 赞同：3
> 
> 时间：2012-06-30T08:21:00.767
> 
> 标签：open-source, e-commerce, subscription

我们计划为我们的网站建立一个新商店。我们希望它能够处理订阅。作为软件编辑，我们将出售我们的支持服务和 SaaS 产品的订阅。

该解决方案必须能够在国际环境中管理续订、发票生成（欧洲有增值税，国际没有增值税）。

我们还必须能够使用 API 或使用可理解的数据库模型将其与我们的供应系统集成。

最后一件事，我们的网站基于 Drupal。我们已经对 Ubercart 进行了一些测试，但并不令人满意。

谢谢你的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T19:05:29.897

有许多`Open source`电子商务平台可用。其中`Magento`对我来说看起来不错。[您可以在这里](http://incept09.hubpages.com/hub/The-Best-5-Free-Open-Source-E-Commerce-Platform)查看选项。如果您真的在寻找可以集成的东西，`Drupal`那么这就是少数几个选项[之一](http://www.drupalecommerce.org/)。

# c - 如何将带有空格的字符串解析为数组？

> ID：11272650
> 
> 赞同：0
> 
> 时间：2012-06-30T08:22:16.903
> 
> 标签：c, shell

> **可能重复：**
> [在 C 中使用分隔符拆分字符串](https://stackoverflow.com/questions/9210528/split-string-with-delimiters-in-c)

我正在Linux中编写一个程序来模拟Shell。基本思想是首先使用 fgets 获取用户输入的一行，它应该类似于`"ls -l"`，然后我将此字符串解析为“ls”和“-l”，然后构造一个二维数组，`char *array[] = {"ls","-l"},`然后使用`execvpe`需要三个参数：第一个也来自输入，即上面给出的示例中的“ls”，第二个是数组，第三个是一个指针，如数组，我在其中指定了一些目录。

问题是将像“ls -l”这样的字符串解析成二维数组。我打算使用`malloc`创建数组。在 C 中解析字符串似乎很不方便。

有没有什么好方法可以将字符串解析`"asd dg rg grhr"`为数组，如`{"asd","dg","rg","grhr"}`.

此外，任何有关以另一种方式模拟 shell 的建议都值得赞赏。

# jquery-ui - jquery UI 选择菜单和 knockout.js 性能

> ID：11272654
> 
> 赞同：0
> 
> 时间：2012-06-30T08:22:54.873
> 
> 标签：jquery-ui, knockout.js

我正在尝试让 jquery ui selectmenu 插件与 knockout.js 配合使用，包括添加选项并对其进行更新。我在下面有工作代码，但性能不是很好。有没有更好的选择。我做超时的原因是因为数组有时还没有绑定到选择并且选择菜单是空的。

[https://github.com/fnagel/jquery-ui/wiki/Selectmenu](https://github.com/fnagel/jquery-ui/wiki/Selectmenu)

```
ko.bindingHandlers.dropdownlist = {
        update: function (element, valueAccessor, allBindingsAccessor) {

            var values = ko.utils.unwrapObservable(valueAccessor());
            var allBindings = allBindingsAccessor();

                if (allBindings.options) {
                    setTimeout(function () {
                        $(element).selectmenu("destroy").selectmenu(values || {});
                    }, 0);
                } else {
                    $(element).selectmenu(values || {});
                }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:54:25.073

如果将 'dropdownlist' 绑定放在 'options' 绑定之后，则不需要超时，例如`options: speeds, value: selectedSpeed, dropdownlist: {style: 'popup'}`. 此外，根据您发布的选择菜单链接，每次选项更改时都不需要调用“销毁”方法。

正如我在您最近提出的另一个关于性能的问题中所评论的那样，请查看[此博客文章](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)。

这是一个使用 selectmenu 绑定（我修改过）的小提琴，演示了两种操作底层 observableArray 的方法及其性能：[jsfiddle](http://jsfiddle.net/antishok/PFddY/)

# java - 为 InheritanceType.SINGLE_TABLE 的未知 DiscriminatorValue 映射 Hibernate 实体

> ID：11272660
> 
> 赞同：9
> 
> 时间：2012-06-30T08:24:19.073
> 
> 标签：java, hibernate, jpa

我有一个经典的休眠`@Inheritance(strategy=InheritanceType.SINGLE_TABLE)`模式`@DiscriminatorFormula`。它工作正常。但是，数据库中有大约 500 个不同的值，`@DiscriminatorValue`我需要将其中大约 30 个映射到 Java 类（子类），其余映射到父 Java 类。

该问题可以建模为 Animal 类的示例继承。

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorFormula("...")
public class Animal implements Serializable {
  ...
  @Column
  public String getName() { ... }
} 
```

所以我在 Java 代码中定义了大约 30 个 Animal 的子类`@DiscriminatorValue`。当 Hibernate 发现鉴别器的未知值时，它会抛出`WrongClassException`. 但是，我需要将这些未知的鉴别器值映射到一个实体，最好是 Animal 类。（在这种情况下，我只需要使用 getName() 方法。）

我知道一种解决方案是将 SQL CASE 放入其中，`@DiscriminatorFormula`但随后我必须在其中说明所有 30 个已知的鉴别器值（当我需要添加其他值时再加上更多）。所以我正在寻找更灵活的解决方案。

PS这是一个遗留代码，所以我不能改变模型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T10:32:20.300

[tscho](https://stackoverflow.com/users/994168/tscho)为我指明了正确的方向，因此我能够为我的案例找到解决方案。评估`@DiscriminatorValue`特殊值`@DiscriminatorValue("null")`和`@DiscriminatorValue("not null")`。第二个适合我。

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorFormula("...")
@DiscriminatorValue("not null")
public class Animal implements Serializable {
  ...
  @Column
  public String getName() { ... }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-18T15:01:32.050

好消息。我刚刚在新的用户指南中记录了这种行为。这是[JIRA](https://hibernate.atlassian.net/browse/HHH-10966)问题。

基本上，您有两种选择：

*   `@DiscriminatorValue("not null")`当没有与底层数据库列值匹配的显式鉴别器值映射时，作为备用策略。
*   `@DiscriminatorValue("null")`当数据库列值为空时。通常，您会将其用于基类。

[Hibernate 博客](http://in.relation.to/2016/07/19/null-andnot-null-discriminator-values/)上也有一个详细的示例。

# javascript - Routing.navigate vs document.location.hash

> ID：11272664
> 
> 赞同：4
> 
> 时间：2012-06-30T08:24:36.977
> 
> 标签：javascript, backbone.js, marionette, backbone-routing

我已经使用`backbone.marionette`. 当`Marionette.ItemView`我从 a 触发事件时`document.location.hash`：

```
 document.location.hash = '#tasks/' + this.model.get('id'); 
```

1.a) 它改变了 URL 1.b) 它触发了 appRoutes

`Routing.navigate`如果我从同一个地方触发：

```
router.navigate('#tasks/' + this.model.get('id')) 
```

2.a) 它按预期更改 URL 2.b) 它不会触发 appRoutes。

知道为什么会发生 2.b 吗？问题可能出在哪里？

谢谢。

```
var Router = Marionette.AppRouter.extend({
    appRoutes: {
        'tasks': 'tasks',
        'tasks/:id': 'taskDetail',
        '*defaults': 'tasks'
    }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T08:26:30.173

您需要添加`{trigger: true}`

```
router.navigate('#tasks/' + this.model.get('id'), {trigger: true}) 
```

通常我扩展路由器，然后添加我自己的导航，它会自动添加`{trigger: true}`. 我理解开发人员为什么这样做，但这不是我曾经使用过的方式:)

# c# - 从 .config 文件中获取值

> ID：11272669
> 
> 赞同：0
> 
> 时间：2012-06-30T08:25:37.967
> 
> 标签：c#, wpf

我编写基本代码，这是 WPF 项目...

```
string a = ConfigurationManager.AppSettings["SetUserDB"];
MessageBox.Show(a); 
```

但是变量`a`是空的，为什么？我`System.Configuration`在项目中使用...

我的配置文件在这里：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="SetUserDB" value="RemoteDBHavana" />
  </appSettings>
</configuration> 
```

现在，我可以重命名配置文件的值吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:30:57.027

如果您有一个名为 的可执行文件`App1.exe`，则配置文件必须与该可执行文件位于同一目录中并命名为`App1.exe.config`. 这是 .NET 用来加载配置文件的约定。

# c# - 数据协定已知类型和一组相互继承的接口

> ID：11272672
> 
> 赞同：8
> 
> 时间：2012-06-30T08:26:12.637
> 
> 标签：c#, wcf, exception-handling, datacontractserializer, known-types

我开发（重写到 WCF）一个文件解析 web 服务接受`string[]`和返回`ISection[]`，但实际上这是一组嵌套接口：

```
namespace Project.Contracts // Project.Contracts.dll
{
    public interface ISection { }

    public interface ISummarySection : ISection { }

    public interface IDataSection : ISection { }
} 
```

和类：

```
namespace Project.Format.A // Project.Format.A.dll
{
    [DataContract]
    public class SummarySectionFormatA : ISummarySection { }

    [DataContract]
    public class DataSectionFormatA : IDataSection { }
} 
```

服务接口及其实现：

```
[ServiceContract]
public interface IService // Project.Contracts.dll
{
    ISection[] Parse(string format, string[] data);
} 

[ServiceKnownType(typeof(SummarySectionFormatA))] // tried this also
[ServiceKnownType(typeof(DataSectionFormatA))]
public class Service : IService // Project.Service.dll
{
    public ISection[] Parse(string format, string[] data)
    {
        return Factory.Create(format).Parse(data);
    }
} 
```

我尝试`declaredTypes`在服务器和客户端上进行配置：

```
<system.runtime.serialization>
  <dataContractSerializer>
    <declaredTypes>
      <add type="Project.Contracts.ISumarySection, Project.Contracts">
        <knownType type="Project.Format.A.SummarySectionFormatA, Project.Format.A" />
      </add>
      <add type="Project.Contracts.IDataSection, Project.Contracts">
        <knownType type="Project.Format.A.DataSectionFormatA, Project.Format.A" />
      </add>
    </declaredTypes>
  </dataContractSerializer>
</system.runtime.serialization> 
```

但仍然得到同样的错误：

> “不应使用数据合同名称‘DataSection:http://schemas.example.com/Parse’键入‘DataSectionFormatA’。

或者

> 基础连接已关闭：连接意外关闭。

我无法使用 KnownTypeAttribute 装饰接口，因为 Contracts 项目不引用 Format 项目，并且引用会破坏设计。这就是为什么我想使用配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:18:04.010

看看下面的代码

```
[ServiceContract]
[ServiceKnownType(typeof(SummarySectionFormatA))]
[ServiceKnownType(typeof(DataSectionFormatA))]
public interface IService {}

public class Service : IService {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:23:49.910

我相信你应该稍微改变你的实现......看看这个[问题](https://stackoverflow.com/questions/4720730/wcf-and-interfaces-on-data-contracts)，看看它是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:03:45.413

试图使这个工作：

```
[KnownType("GetKnownType")]
public class Section
{
    static Type[] GetKnownType()
    {
        return new[]
        {
            Type.GetType("Project.Format.A.DataSectionFormatA, Project.Format.A")
        };
    }
} 
```

但似乎**服务器和客户端都必须引用**Project.Format.A.dll 才能使其工作（方法不返回 null）

# php - 带数字的字符串的gettext

> ID：11272675
> 
> 赞同：2
> 
> 时间：2012-06-30T08:26:27.520
> 
> 标签：php, text, numbers, gettext

我想使用 gettext 来翻译一个句子并保持原样，就像在这些例子中一样：

```
"i am 100 years old" -> Tengo 100 años de edad (spanish)
"i am 10 years old"   -> Tengo 10 años de edad (spanish)

"i slept 24 hours a day" ->  Ich schlief 24 Stunden am Tag (german)
"i slept 4 hours a day" ->   Ich schlief 4 Stunden am Tag (german) 
```

我猜字符串应该是这样的：`'i slept #24# hours a day'`但我不确定......

无论字符串中的具体数字是多少（可能是某种格式），有什么方法可以翻译字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:38:16.500

您谈论的问题很容易通过以下方式解决：

```
$translation = gettext("I am %d years old");
$phrase      = sprintf($translation, $n); 
```

但实际上还有另一个问题。在某些语言中，数字后面的名词（在您的示例中为“年”）根据使用的数字而不同。它不仅仅是单/复数形式：例如，在俄语中

```
"I am 10 years old" = "Мне 10 лет"
"I am 21 years old" = "Мне 21 год" 
```

对于这些类型的翻译，您应该使用更高级[的 ngettext](http://www.php.net/manual/en/function.ngettext.php) () 函数，如下所示：

```
setlocale(LC_ALL, 'cs_CZ');
printf(ngettext("%d window", "%d windows", 1), 1); // 1 okno
printf(ngettext("%d window", "%d windows", 2), 2); // 2 okna
printf(ngettext("%d window", "%d windows", 5), 5); // 5 oken 
```

是的，数字本身被使用了两次：首先是在 中获取正确形式的名词`ngettext`，然后是在 中填充占位符`printf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:30:58.227

如果你总是知道格式，[`sscanf`](http://php.net/sscanf.php)可以帮助你。

```
sscanf('i am %d years old', $years);
$newString = sprintf('Tengo %d años de edad', $years); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:32:38.407

您可以在翻译后使用替换数字。

```
str_replace('#NUM#', $num,  gettext('i slept #NUM# hours a day')); 
```

# c# - 将数据插入表格 - Visual Studio 中的 Web 服务

> ID：11272680
> 
> 赞同：0
> 
> 时间：2012-06-30T08:26:51.473
> 
> 标签：c#, visual-studio, web-services

我正在尝试使用 Web 服务将数据插入到使用 Visual Studio 的表中。当我 eun 时，选择方法并输入参数，然后单击 Invoke 按钮，我收到以下错误。我检查了插入语句的语法，并尝试使用不同的语法。但我遇到了同样的错误。我究竟做错了什么？

```
System.Data.SqlClient.SqlException: Incorrect syntax near the keyword 'User'.
  at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
  at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
  at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
  at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
  at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
  at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
  at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
  at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
  at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
  at Service.register(String fname, String lname, String email, String num, Int32 locID) 
```

//向表中插入值的Web方法//

```
[WebMethod]
public void register(string fname, string lname, string email, string num, int locID)
{
    SqlConnection conn;
    conn = ConnectionManager.GetConnection();
    conn.Open();
    string cmdString = "INSERT into User values(@fname,@lname,@email,@num,@locID)";
    SqlCommand sqlCommand = new SqlCommand(cmdString, conn);
    sqlCommand.CommandType = CommandType.Text;

    sqlCommand.Parameters.Add("@fname", SqlDbType.Text).Value = fname;
    sqlCommand.Parameters.Add("@lname", SqlDbType.Text).Value = lname;
    sqlCommand.Parameters.Add("@email", SqlDbType.Text).Value = email;
    sqlCommand.Parameters.Add("@num", SqlDbType.Text).Value = num;
    sqlCommand.Parameters.Add("@locID", SqlDbType.Text).Value = locID;
    sqlCommand.ExecuteNonQuery();
    conn.Close();
} 
```

///连接管理器类///

```
public class ConnectionManager
 {
    public static SqlConnection NewCon;
     public static string ConStr ="Data Source=ACER-PC\\SQLEXPRESS;Initial Catalog=DisasterAlert;Integrated Security=True";

    public static SqlConnection GetConnection()
   {
        NewCon = new SqlConnection(ConStr);
        return NewCon;
   }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:30:08.133

“用户”是 SQL 的保留字。试试这个

```
"INSERT into [User] values(@fname,@lname,@email,@num,@locID)" 
```

# sql-server - 选择最少 customerID 的数量

> ID：11272682
> 
> 赞同：0
> 
> 时间：2012-06-30T08:26:59.050
> 
> 标签：sql-server

```
Product_Code  Month  Qty  Area  CustomerID
------------  -----  ---  ----  ----------
820300182     01     1    M1    100078
820300182     01     50   M1    100168
820300182     01     20   M1    100188
820300182     01     10   M1    100618
820300182     01     10   M1    100938
820300182     01     20   M1    100988
820300182     01     25   M1    110158 
```

我想得到`Qty`最低限度`customerID`。

例如，

```
Product_Code  Month  Qty  Area  CustomerID
------------  -----  ---  ----  ----------
820300182     01     1    M1    100078 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:32:44.477

**试试这个**

```
Select Qty
from tableName
where CustomerID = ( select min(CustomerID) from tableName ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:15:19.333

假设您要查找具有最低 CustomerId 的记录：

```
SELECT TOP 1 [Product_Code], [Month], [Qty], [Area], [CustomerID]
FROM [TABLE]
ORDER BY [CustomerId] ASC 
```

但是，如果您需要找到数量最少的记录，则将订单更改为

```
ORDER BY [Qty] ASC 
```

# ios - IOS Facebook单例并获取头像

> ID：11272684
> 
> 赞同：0
> 
> 时间：2012-06-30T08:27:34.760
> 
> 标签：ios, facebook, singleton

我正在尝试从 UIViewController 获取个人资料图片。

我的 Facebook 在单例课程中。从 UIViewController [[myfacebook shared requestWithGraphPath:@"me/picture" andDelegate:self];
如果我第一次需要登录或应用程序启动，这不起作用。因为正在调用授权并调用了didlogin。

这条线没有被击中。- (void)request:(FBRequest *)request didLoad:(id)result {

我该如何解决这些场景 1.Singleton Facebook 实例类，2.从 UIViewController 调用 3.需要登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:08:13.220

我建议创建一个名为 FacebookSingletonDelegate 的协议

```
@class FacebookSingleton; 

@protocol FacebookSingletonDelegate <NSObject>

- (void) facebookSingletonDidLogin:(FacebookSingleton *) facebookSingleton;

- (void) facebookSingletonDidNotLogin:(FacebookSingleton *) facebookSingleton;

- (void) facebookSingletonDidLogout:(FacebookSingleton *) facebookSingleton;

- (void) facebookSingleton:(FacebookSingleton *)facebookSingleton
            request:(FBRequest *) request
            didLoad:(id)result;

@end 
```

然后在您的 FacebookSingleton.h 中创建一个属性，例如

```
@property (nonatomic, strong) id<FacebookSingletonDelegate> delegate; 
```

然后让您的视图控制器符合协议 -

```
@interface MyViewController<FacebookSingletonDelegate> 
```

然后，将自己设置为视图控制器中的委托，例如 -

```
myViewController.delegate = self; 
```

然后，从 FacebookSingleton 实现 (FacebookSingleton.m) 触发委托方法 -

```
- (void)request:(FBRequest *)request didLoad:(id)result 
{
  [self.delegate facebookSingleton:self request:request didLoad:result]; 
} 
```

然后，您可以在视图控制器中实现以下方法 -

```
- (void) facebookSingleton:(FacebookSingleton *)facebookSingleton
            request:(FBRequest *) request
            didLoad:(id)result
{
 // the view controller will receive the event in here
} 
```

# android - 如何在android中的Textview和Tabbedview之间添加空格

> ID：11272685
> 
> 赞同：0
> 
> 时间：2012-06-30T08:28:13.137
> 
> 标签：android

我有相对布局，因为我放置了两个文本视图，一个图像视图和选项卡视图。我在底部有标签视图。我想在 tabview 和 imageview 之间添加空间。如何实现它？

这是源代码

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="6dip">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="100dip"
        android:layout_height="100dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="6dip"
        android:scaleType="center"
        android:src="@drawable/ic_launcher"/>

    <TextView
                    android:text="Hello world"
                    android:id="@+id/serviceName" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" 
                    android:singleLine="true" 
                    android:focusable="true" 
                    android:focusableInTouchMode="true" 
                    android:freezesText="true"></TextView>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/icon"
        android:layout_alignLeft="@+id/serviceName"
        android:gravity="center_vertical"
        android:text="123456789"
        android:textSize="30dip" />

  <TabHost
    android:id="@android:id/tabhost"
    android:layout_below="@+id/icon"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

          <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:32:19.303

**试试**这个

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="6dip">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="100dip"
        android:layout_height="100dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="6dip"
        android:scaleType="center"
        android:src="@drawable/ic_launcher"/>

    <TextView
                    android:text="Hello world"
                    android:id="@+id/serviceName" 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" 
                    android:singleLine="true" 
                    android:focusable="true" 
                    android:focusableInTouchMode="true" 
                    android:freezesText="true"></TextView>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/icon"
        android:layout_alignLeft="@+id/serviceName"
        android:gravity="center_vertical"
        android:text="123456789"
        android:textSize="30dip" />

  <TabHost
    android:id="@android:id/tabhost"
    android:layout_below="@+id/icon"
    android:layout_marginLeft="6dip"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

          <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost> 
```

# php - php数据差异导致致命错误

> ID：11272691
> 
> 赞同：0
> 
> 时间：2012-06-30T08:29:12.153
> 
> 标签：php

我有一个来自数据库的日期值，我想计算今天日期和该数据库日期之间的差异。

来自数据库的日期是

```
2012-06-11 18:20:40 
```

我使用此代码查看值

```
 echo date('Y-m-d H:i:s');
    echo $result['dt_pub_date']; 
```

我写了这段代码

```
$val=date('Y-m-d H:i:s') ->diff($result['dt_pub_date']); 
```

但收到此错误

```
Fatal error: Call to a member function diff() on a non-object in..... 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T08:36:34.503

`date()`函数不返回 DateTime 对象，只返回字符串。

您需要使用 DateTime 对象。

```
$now = new DateTime();
$val = $now->diff(new DateTime($result['dt_pub_date'])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T08:36:14.823

该函数`date()`返回一个字符串；所以你不能调用`diff()`它（它不是一个对象）。我猜你正在尝试使用`DateTime::diff()`. 所以：创建一个`DateTime`可以调用的对象`diff()`。

# allegro - 有没有办法在 Allegro 4.2 中通过 x 和 y 移动形状？

> ID：11272693
> 
> 赞同：1
> 
> 时间：2012-06-30T08:29:16.957
> 
> 标签：allegro

我是 allegro 的新手，所以这可能是一个简单的问题。

我想知道是否有一种方法可以将快板形状移动 x,y 而不用填充我用黑色圆圈制作的圆圈并制作一个新圆圈。

目前我有一个while循环，通过移动用黑色圆圈填充当前圆圈并用x和y制作一个新的圆圈来移动圆圈，这有点不同我想知道是否有办法移动快板形状x,y 因为它似乎让我的游戏变慢了。

这是当前使用这种方式的时间：

```
int x=100;
int y = 100;
int tempX,tempY; 
 while(1)
{
tempX=x;
tempY=y;
    circlefill ( screen, tempX, tempY, 20, makecol( 0,0, 0));
    circlefill ( screen, x, y, 20, makecol( 0, 0, 255))
x+=10;
y+=10;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:49:49.100

您需要使用缓冲区。

设置图形模式后，创建一个`SCREEN_W,SCREEN_H`大的位图。然后在每一帧上，清除该位图，在 处绘制蓝色圆圈`x, y`，然后将缓冲区绘制到屏幕上。

我建议您查看 Allegro 附带的许多示例或阅读教程，因为您需要学习许多基本但重要的东西。

另外，我强烈推荐使用 Allegro 5，因为它是积极开发的，并且有一个更适合现代硬件的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T02:38:46.327

正如 Matthew 所说，您想使用缓冲区，它就像一个虚拟屏幕，您可以在其中写入所有想要的位图，**然后再将**其显示在屏幕上，它的大小必须与您的屏幕大小相同。

忘记`TempX`and `TempY`，而不是`circlefill (screen, x, y, 20, makecol(0,0,255))`先调用你制作一个位图（通常命名为**buffer**，呵呵..），从现在开始你将所有图形直接绘制到它，所以不要使用`screen`use `buffer`。当你完成每一帧时，你把这个缓冲区“blit”到屏幕上，如下所示：

```
blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h); 
```

然后你只需调用`clear_bitmap(buffer)`并再次开始绘制并重复。这样，您不必跟踪对象先前的位置以在将其再次绘制到新位置之前将其擦除，想象一下如果您必须擦除而不是黑色背景并用另一块填充背景，CPU 将会受到打击每次移动某物时生成一个位图？

# javascript - 在 javascript 变量中获取 div 数据的副本

> ID：11272694
> 
> 赞同：1
> 
> 时间：2012-06-30T08:29:43.463
> 
> 标签：javascript, jquery, forms

HTML 部分：-

```
<form id="inquiryform" method="" />
    <h2>INQUIRY FORM</h2>
    <div class="margin5">
        <div class="floatleft width100"><span class="borderbottom">Party Name</span> </div>
        <div class="floatleft"><input type="text" name="PartyName" size="60"/></div>
        <div class="clear"></div>
    </div>
</form>
<div> <input type="button" id="submitform" value="Send Mail"/></div> 
```

jQuery :-

```
$(document).ready(function () {
    $('#submitform').click(function(){
        var data = 'message='+$('#inquiryform').html();
        alert(data);
    });
}); 
```

当我单击我的发送邮件按钮时，它将确定我想要获取的 html 部分，但是当我在文本框中输入内容时，`data`变量始终为空。我想喜欢我在文本框中写的任何东西，它必须是`data`变量的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:35:11.637

在结果中输入的文本`<input>`不会显示在`.html()`结果中，因为它不会更改 DOM。它只会影响元素的`value` *属性*（而不是*属性*）。

如果你想检索它的值，你应该使用`$("[name=PartyName]").val()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:01:45.600

在 ' ' 行之前添加此`var data=...`行：

```
$('#inquiryform :text').attr('value',function(){
    return $(this).val();
}); 
```

这将在所有标签上添加“ `value`”属性。`input[type="text"]`

[**演示**](http://jsfiddle.net/Ny5RH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T13:47:45.847

如果您想要表单的每个元素的所有数据（不是 html，只是数据），请使用[serialize()](http://api.jquery.com/serialize/)

# php - 如何防止浏览器执行我在页面上添加为示例/示例的 PHP 代码

> ID：11272695
> 
> 赞同：-5
> 
> 时间：2012-06-30T08:29:44.400
> 
> 标签：php

我想在网页上粘贴一些 PHP 代码示例但是浏览器会将其视为普通 PHP 代码并执行它而不是将其视为文本。如何做到这一点...我希望答案很简单，但已经暗示了我。我在这上面花了大约 2 个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:49:11.430

而不是使用`<?php ... ?>`使用`&lt;?php ... ?&gt;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:35:40.047

浏览器不执行您的 php 代码，您的服务器执行。要从 php 页面输出 php 代码，请不要将其包含在块中。

```
<html>
<?php
  echo 'this will show some example code';
?>
<code>
  echo 'this is some example code';
</code>
<?php
  echo 'that was some example code';
?>
</html> 
```

您可能需要使用`<pre></pre>`而不是代码标签，我不确定它是否支持浏览器，但它应该得到很好的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:34:10.080

PHP 代码在服务器端执行，而不是在浏览器中。为了防止代码执行使用[转义序列](http://www.boulder.swri.edu/~joel/esc_chars.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T11:06:54.510

```
<?php
    highlight_file("file_to_format.php");
?> 
```

# javascript - 如何在javascript中创建图像上的图像

> ID：11272698
> 
> 赞同：1
> 
> 时间：2012-06-30T08:30:04.553
> 
> 标签：javascript, html, css

我想对同一页面中的不同图像做两件事，我看了一遍，找不到答案，如果有人可以帮助我，我会很高兴。

在第一张图片中，我想在它的侧面放一个较小的图片，然后将大图片悬停在上面，小图片会发生变化并出现标题。

此外，在第二张图像中，我希望始终出现一个较小的图像，如果您将鼠标悬停在大图像上，则会出现图像的边框，并且图像下方的文字将被涂成不同的颜色。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:28:40.523

尝试通过 javascript 在悬停的元素上设置更大的 z-index。较小的图像和一些文本在另一个元素上的位置可以例如使用 position: absolute; 和 z-index（通过 javascript/jquery）。

# macos - clamxav 自制 mac os x

> ID：11272699
> 
> 赞同：7
> 
> 时间：2012-06-30T08:30:06.007
> 
> 标签：macos, homebrew

在 Mac OS X 10.6.8 上，我刚刚安装了 Homebrew。它打破了 ClamXav。所以我卸载了它，并安装了 Homebrew 的 clamav。在安装过程结束时，我收到了这个：

/`Warning: /usr/local/sbin is not in your PATH You can amend this by altering your ~/.bashrc file`

我不知道我接下来该怎么办？我应该从什么路径修改？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T23:09:02.620

```
/etc/profile
~/.bash_profile
~/.bash_login
~/.profile 
```

（OS X 从这些文件中获取您的路径。如果第一个存在，它会抓取该路径，然后移动到下一个文件以获取更多信息，依此类推......有关更多信息，请访问：[http ://ss64.com /osx/syntax-bashrc.html](http://ss64.com/osx/syntax-bashrc.html)

寻找`~/.bash_profile`等...直到你看到你的路径设置在哪里。大多数情况下，您的路径通常已设置，`~/.bash_profile`因此请先检查该文件，如果它不在其中，而是在另一个文件中，请将其更改为`~/.bash_profile`

可能这些文件都不存在，在这种情况下，当您运行`brew doctor`/usr/local/bin 不在 /usr/bin/ 之前的命令时，自制软件会抱怨。编辑您的`~/.bash_profile`以满足自制软​​件和 clamxav 的要求。

为了使事情尽可能简单并解决您的问题，请找到`~/.bash_profile`并：

没有路径或没有`~/.bash_profile`：如果没有路径，打开或创建文件并输入以下行：`export PATH=/usr/local/bin:/usr/local/sbin:$PATH`

如果您需要创建文件，您可以使用 terminal.app 甚至 textedit 来创建，但我建议使用终端。

1.  打开 Terminal.app -> 当提示时运行：`cd ~`进入你的主目录，虽然你应该在那里。
2.  `touch .bash_profile`这会创建空文件。
3.  `pico .bash_profile`-> 现在在这个屏幕粘贴：`export PATH=/usr/local/bin:/usr/local/sbin:$PATH`
4.  插入路径后，只需按 Key:`Enter`即可保存并`Control + X`退出。-> 最后，您不妨使用以下命令更新 bash：`source .bash_profile`

如果`~/.bash_profile`存在路径但 /usr/local/sbin 不包括在内，则通过附加到任何部分来添加它，在目录用分号分隔`/usr/local/sbin/`之后放置它可能是个好主意。`/usr/local/bin:`确保保持格式一致。

要确保 /usr/local/sbin 在您的路径中，请打开终端并运行：`echo $PATH`您应该在输出中的某处看到 /usr/local/sbin。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T17:25:05.570

我遇到了同样的问题，只是为了添加到 Bobs 的答案中，我发现该行`usr/local/sbin`必须添加到`/etc/paths`

那是运行 OS X 10.7.4

# c# - VfW : 改变视频分辨率

> ID：11272705
> 
> 赞同：0
> 
> 时间：2012-06-30T08:31:18.267
> 
> 标签：c#, winapi, video, video-capture, vfw

我正在尝试更改 VfW（Windows 视频）中的视频捕获分辨率，但我找不到任何有用的结构或方法。似乎更改视频设置的唯一方法是使用`CAPTUREPARMS`结构。但它没有设置视频捕获分辨率的任何字段。

任何建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:34:30.937

通过与捕获设备关联的格式对话框更改分辨率。您应该弹出格式对话框，`WM_CAP_DLG_VIDEOFORMAT`然后用户可以使用驱动程序提供的选项以交互方式更改分辨率，然后您通过[`CAPSTATUS`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756939.aspx)结构获得新设置。

# gwt - GWT 中托管/开发模式和 Web 模式之间的区别

> ID：11272707
> 
> 赞同：0
> 
> 时间：2012-06-30T08:31:25.757
> 
> 标签：gwt

我是 GWT 的新手，听说有人使用托管/开发模式和 Web 模式这两个术语。
有人可以解释这些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:10:32.430

我会尽快尝试，

在 Eclipse 中，您实现 java 代码。在开发时，您可以在开发模式下运行您的应用程序。像这样运行，gwt 客户端的东西由 eclipse 插件作为 java 代码运行。允许调试，在控制台中跟踪。

当您在 web 模式下运行它时，在外部服务器上，您必须导出/部署战争文件。在此之前，您运行了 gwt 编译器，该编译器将 java 代码转换为与每个浏览器功能完全匹配的多种 javascript。

当您执行“google>compile gwt”时，这些被称为“排列”

开发模式的好处是：跟踪，实时调试，但有点慢。

Web 模式的好处是：速度，无论客户端浏览器如何。

希望这会有所帮助，欢迎其他人扩展此回复。

# python - 如何在 Kivy 中使用 GridLayout？

> ID：11272708
> 
> 赞同：4
> 
> 时间：2012-06-30T08:31:33.203
> 
> 标签：python, kivy

我想在我的 kivy 程序中使用简单的网格布局，但我不合适的例子；

这是我的代码：

```
 import kivy
 from kivy.uix.gridlayout import GridLayout
 from kivy.app import App
 from kivy.uix.button import Button

 layout = GridLayout(cols=2, row_force_default=True, row_default_height=40)
 layout.add_widget(Button(text='Hello 1', size_hint_x=None, width=100))
 layout.add_widget(Button(text='World 1'))
 layout.add_widget(Button(text='Hello 2', size_hint_x=None, width=100))
 layout.add_widget(Button(text='World 2'))

 raw_input() 
```

最后我看不到任何结果（只有一个白色窗口，没有任何网格）

感谢您的关注

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T13:27:02.443

您错过了创建初始 App 类并运行它：

```
import kivy
from kivy.uix.gridlayout import GridLayout
from kivy.app import App
from kivy.uix.button import Button

class MyApp(App):
    def build(self):
        layout = GridLayout(cols=2, row_force_default=True, row_default_height=40)
        layout.add_widget(Button(text='Hello 1', size_hint_x=None, width=100))
        layout.add_widget(Button(text='World 1'))
        layout.add_widget(Button(text='Hello 2', size_hint_x=None, width=100))
        layout.add_widget(Button(text='World 2'))
        return layout

MyApp().run() 
```

如果您使用 raw_input()，您将打破应用程序循环。如果您想做交互式编码，请查看 kivy.interactive 模块。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-20T10:59:04.897

如果你将使用 python3 raw_input 函数将不起作用

# joomla - 如何在我的 Joomla 2.5 组件中管理语言？

> ID：11272710
> 
> 赞同：0
> 
> 时间：2012-06-30T08:31:39.453
> 
> 标签：joomla, multilingual, joomla2.5

我正在为 Joomla 2.5 编写一个图库组件，其中图像具有三个属性，类似于类别，应该以选定的语言显示。当前目标是支持三种语言。

想象一下数百个车辆图像。每个图像都被分配了一个类型（“van”或“truck”或“bus”）、一个颜色名称（“aquamarine”、“deep cabinet green”）以及一个团队名称——所有这些列表项都有翻译, 并且是从有限数量的项目中选择的。

所以我的选择是：

1.  使用 Joomla 类别，即创建三个类别集`com_my.type`, `com_my.color`,`com_my.team`并分别添加三种语言；
2.  `[id, language, text]`管理组件内的语言：添加带有字段的额外表格。

根据您的经验，哪一个会更智能且易于管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:10:50.930

这种事情不应该很复杂。只需使用`JText::_('TEXT_INPUT_HERE')`并将其翻译成每个语言文件。将语言存储在数据库中对用户不是很友好，因为有很多人将扩展翻译成他们选择的语言，因为默认情况下不支持。使用 Joomla 的多语言支持翻译扩展与 J1.5 和 J2.5 相同

# c++ - 如何在 C++ 中运行“源”命令

> ID：11272720
> 
> 赞同：2
> 
> 时间：2012-06-30T08:33:01.797
> 
> 标签：c++, shell

我有一个 C++ 应用程序，我希望该应用程序始终使用源代码运行我的脚本之一。

我用了：

```
system("source myscript"); 
```

但它不起作用并且无法识别“源”命令。如果我省略“源”，myscript 将执行，但使用源它不起作用。

有没有在 C++ 中运行源命令的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:42:34.600

您不能调用`source`using `system`，因为它是 shell-builtin 而不是实际的可执行文件。

如果你想获取 shell 脚本的变量，你必须以另一种方式获取脚本中设置的变量。一种方法是编写一个包装脚本来获取您的脚本，然后简单地将所有导出的变量打印到标准输出。然后，您的 C 程序可以调用包装脚本，逐行迭代输出并将其每个环境变量设置为脚本输出的值（这假设包装脚本本身不产生任何输出）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T08:38:59.777

`source`是一个shell命令，不是一个独立的程序。`source`在当前 shell 中执行一个 shell 脚本，允许该脚本访问当前环境中的 shell 变量和函数。

您的 C++ 程序不是 shell，在您的 C++ 程序进程“内部”以完全不同的语言执行脚本是没有意义的。

# installshield - 使用 Install Shield 2009 以其他用户身份更新或卸载应用程序

> ID：11272722
> 
> 赞同：0
> 
> 时间：2012-06-30T08:33:39.673
> 
> 标签：installshield

我为我的 VB6.0 exe 使用 install shield 2009 设置了一个 MSI，它正在工作。问题是如果用户 A（第一个用户）运行了安装程序来安装应用程序，而我们正在尝试使用用户 B（第二个用户）运行更新。它不允许我们这样做。当我们要卸载应用程序时也是如此。

您能否建议是否是由于 Windows 提供的某些限制，或者如果不是，我们如何让其他用户运行更新或卸载以与其他人一起运行安装程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:00:36.157

听起来您是按用户而不是按机器安装的。如果是这样，用户 A 执行的任何安装都将超出用户 B 的范围。您必须卸载并重新安装为 PerMachine。

请注意，这由 ALLUSERS 属性控制，除非您有特殊需要，否则 InstallShield 默认值“2”可能是您应该保留的值。

# php - 如何更改php函数将结果发送到jquery ajax

> ID：11272731
> 
> 赞同：-3
> 
> 时间：2012-06-30T08:35:31.687
> 
> 标签：php, jquery, ajax

我有很多用于用户通知的代码，它做了很多 mysql 工作，所以它需要等待时间。jquery ajax 适用于 php 文件。如何使用 jquery 将 php 结果发送到网页？

当前代码：

```
<? echo db_cache("main_top_naver_cache", 300, "naver_popular('naver_popular', 4)"))?> 
```

想要的代码：但它显示错误。php函数的结果不会发送到div elment。htmlspecialchars 没用。

```
<div id='a'>
<div id='b'>
<script type="text/javascript">
    $("#test1").html( " <? echo htmlspecialchars(db_cache("main_top_naver_cache", 300, "naver_popular('naver_popular', 4)"))?> " );
</script> 
```

IE 调试器显示错误 ... SCRIPT 1015:... 未完成的 sting 常量 ...

```
<script type="text/javascript">
$("#test1").html( " &lt;style&gt;
/* http://html.nhncorp.com/uio_factory/ui_pattern/list/3 */
.section_ol3{position:relative;border:1px solid #ddd;background:#fff;font-size:12px;font-family:Tahoma, Geneva, sans-serif;line-height:normal;*zoom:1}
.section_ol3 a{color:#666;text-decoration:none}
.section_ol3 a:hover,
.section_ol3 a:active,
.section_ol3 a:focus{text-decoration:underline}
.section_ol3 em{font-style:normal}
.section_ol3 h2{margin:0;padding:10px 0 8px 13px;border-bottom:1px solid #ddd;font-size:12px;color:#333}
.section_ol3 h2 em{color:#cf3292}
.section_ol3 ol{margin:13px;padding:0;list-style:none}
.section_ol3 li{position:relative;margin:0 0 10px 0;*zoom:1}
.section_ol3 li:after{display:block;clear:both;content:&quot;&quot;}
.section_ol3 li .ranking{display:inline-block;width:14px;height:11px;margin:0 5px 0 0;border-top:1px solid #fff;border-bottom:1px solid #d1d1d1;background:#d1d1d1;text-align:center;vertical-align:top;font:bold 10px Tahoma;color:#fff}
.section_ol3 li.best .ranking{border-bottom:1px solid #6e87a5;background:#6e87a5}
.section_ol3 li.best a{color:#7189a7}
.section_ol3 li .num{position:absolute;top:0;right:0;font-size:11px;color:#a8a8a8;white-space:nowrap}
.section_ol3 li.best .num{font-weight:bold;color:#7189a7}
.section_ol3 .more{position:absolute;top:10px;right:13px;font:11px Dotum, 돋움;text-decoration:none !important}
.section_ol3 .more span{margin:0 2px 0 0;font-weight:bold;font-size:16px;color:#d76ea9;vertical-align:middle}
&lt;/style&gt;

&lt;div class=&quot;section_ol3&quot;&gt;
    &lt;ol style='text-align:left;'&gt;
  &lt;li class='best'&gt;&lt;span class='ranking'&gt;1&lt;/span&gt;&lt;a    href='http://search.naver.com/search.naver?where=nexearch&amp;query=%B9%AB%C7%D1%B5%B5%C0%FC&amp;sm=top_lve' onfocus='this.blur()' title='무한도전' target=new&gt;무한도전&lt;/a&gt;&lt;span class='num'&gt;+42&lt;/span&gt;&lt;/li&gt;&lt;li class='best'&gt;&lt;span class='ranking'&gt;2&lt;/span&gt;&lt;a href='http://search.naver.com/search.naver?where=nexearch&amp;query=%B1%E8%C0%E7%BF%AC&amp;sm=top_lve' onfocus='this.blur()' title='김재연' target=new&gt;김재연&lt;/a&gt;&lt;span class='num'&gt;+123&lt;/span&gt;&lt;/li&gt;&lt;li class='best'&gt;&lt;span class='ranking'&gt;3&lt;/span&gt;&lt;a href='http://search.naver.com/search.naver?where=nexearch&amp;query=%C0%CC%C7%CF%C0%CC&amp;sm=top_lve' onfocus='this.blur()' title='이하이' target=new&gt;이하이&amp;lt;/a&gt;&lt;span class='num'&gt;+90&lt;/span&gt;&lt;/li&gt;&lt;li &gt;&lt;span class='ranking'&gt;4&lt;/span&gt;&lt;a href='http://search.naver.com/search.naver?where=nexearch&amp;query=%BA%D2%C8%C4%C0%C7%B8%ED%B0%EE2&amp;sm=top_lve' onfocus='this.blur()' title='불후의명곡2' target=new&gt;불후의명곡2&lt;/a&gt;&lt;span class='num'&gt;+87&lt;/span&gt;&lt;/li&gt;  &lt;/ol&gt; 
```

</div> "

```
 ); </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:11:05.313

而不是直接使用**echo**您可以`json_encode()`用来对数据进行编码，然后使用 echo 将其发送到`jquery`，这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T01:10:14.250

正确的代码

```
<?
// http://huddak.net/bbs/board.php?bo_table=cm_free&wr_id=3629
function remove_nr($str) {
    $reg_e = array('/\n/', '/\r/', '/\"/', "/<\/script>/i"); 
    $reg_p = array(' ', ' ', '\\"', "<\/SCRIPT>"); 

    return preg_replace($reg_e, $reg_p, $str);
}
?>

<script type="text/javascript">
$("#test1").html( " <? echo remove_nr( trim( db_cache("main_top_naver_cache", 300, "naver_popular('naver_popular', 4)")))?> " ); 
</script> 
```

您可以对 jquery 加载执行耗时的 php 代码。这使您的页面加载非常棒。

# sql-server - SQL Server 中的 ANSI_NULLS 标志？

> ID：11272733
> 
> 赞同：3
> 
> 时间：2012-06-30T08:35:50.220
> 
> 标签：sql-server, tsql, sql-server-2005

`SET ANSI_NULLS`我可以通过使用`SET ANSI_NULLS OFF`或更改值`SET ANSI_NULLS ON`

`Question #1` 我怎样才能得到*当前*值？

`Question #2` 设置值是否应用于查询？桌子？实例？整个数据库？

`Question #3`如果我要进入一家这样做的公司，`if myNullParam <>null`我应该检查的地方是什么（db？schema？query？）告诉他们——*这行得通，还是不行*？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T09:03:40.120

1.  `select databasepropertyex('MyDatabaseName', 'IsAnsiNullsEnabled')`会告诉你数据库默认值。Hitesh 的回答将告诉您当前会话的价值。
2.  数据库有一个默认设置，每个会话都可以覆盖数据库默认值。
3.  会话值。但是，MSDN 文档说`For a script to work as intended, regardless of the ANSI_NULLS database option or the setting of SET ANSI_NULLS, use IS NULL and IS NOT NULL in comparisons that might contain null values.` 所以虽然它可能有效，但它肯定违反了最佳实践。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T08:50:16.083

答案 1

您可以在下面运行查询以获取是否设置了 ANSI_NULLS。

```
DECLARE @options INT
SELECT @options = @@OPTIONS
IF ( (32 & @options) = 32 ) PRINT 'ANSI_NULLS' 
```

如果打印`ANSI_NULLS`则`ANSI_NULLS`设置或未设置。

你可以在这里找到更多帮助[http://www.mssqltips.com/sqlservertip/1415/determining-set-options-for-a-current-session-in-sql-server/](http://www.mssqltips.com/sqlservertip/1415/determining-set-options-for-a-current-session-in-sql-server/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-01T14:27:52.110

您可以使用此查询来获取给定数据库的属性：

```
SELECT is_ansi_nulls_on FROM sys.databases WHERE name = 'yourDatabase' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T06:21:44.117

您可以通过以下方式检查所有设置

dbcc 用户选项

# c# - UI 事件是否按照触发顺序进行排队和处理

> ID：11272735
> 
> 赞同：0
> 
> 时间：2012-06-30T08:36:17.100
> 
> 标签：c#, .net, silverlight, windows-phone-7

在 WP7 应用程序（或 Silverlight）中，从 UI 触发的事件是否按照触发顺序排队和处理？例如，如果我非常快速地单击按钮 1、按钮 2 和按钮 3，这三个单击事件是否会以相同的顺序和顺序运行（在 UI 线程上）。

我正在尝试对此进行确认。我似乎找不到任何文件来支持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:51:39.690

是的，因为 UI 事件都在同一个 UI 线程上处理。当您谈论单个线程时，没有“并发”。因此，在处理另一个 UI 事件时无法触发其他 UI 事件——它们*不会*像您怀疑的那样排队和处理。事实上，您可以`Thread.Sleep`在按钮单击处理程序中放置一个并冻结 UI（您不能单击其他按钮）。在 Sleep 语句超时且处理程序存在*后*，UI 将再次响应，您将能够单击下一步按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:39:35.770

我不这么认为，它会像 UI 线程中的并发任务/活动一样运行。

# php - PHP PDO 标准获取公式尽可能快速和安全

> ID：11272741
> 
> 赞同：1
> 
> 时间：2012-06-30T08:37:00.807
> 
> 标签：php, object, pdo, formula

多年来，我一直使用 mySQL。大错。PDO 绝对是要走的路，我已经学会了艰难的道路。

但我还不太明白，也没有发现这些教程特别有用。

安全性和速度是我使用 mySQL 的主要问题。如果我想说从那里获取信息，标准 PDO 公式会是什么样子

```
$variable1 - SQL TABLE
$variable2 - FIELD TO MATCH
$variable3 - MATCH WITH THIS 
```

然后假设在每个找到的行中有给定数量的字段，一旦找到它大概看起来像`$row['field_name'];`

如果我能根据这个例子看到这是如何完成的，我想我可能可以管理其余的部分。

此外，如果您知道 w3schools 对 mySQL 查询但对 PDO 所做的事情的良好链接，那么我也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:00:58.593

完全记录，它看起来像这样：

```
<?php

try {
//Start connection
    $pdo = new PDO("mysql:host=localhost;dbname=database_name", "user", "password");
/*
* Set attributes
*/
//Throw exceptions on errors
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
//Disable prepared statements emulations
    $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $table_name = "example_table";
    $field = "example_field";
    $value = "example_value";

    $query = <<<MySQL
    SELECT *
        FROM `$table_name`
        WHERE `$field` = :value
MySQL;

//Prepare the statement
    $stmt = $pdo->prepare($query);

//Bind values to placeholders
    $stmt->bindValue(":value", $value);

//Execute the statement
    $stmt->execute();

/*
* Fetching results
*/
//Fetch all results as an associative array.
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
} catch (PDOException $e) {
    die("An error has occurred! " . $e->getMessage());
} 
```

# jquery - 为什么我在一个字段值中得到单引号错误，而不是在 json 数据类型的 jquery ajax 帖子中的另一个？

> ID：11272754
> 
> 赞同：0
> 
> 时间：2012-06-30T08:39:01.887
> 
> 标签：jquery, sql, json

我正在尝试在 json 数据类型的 jquery 中使用 ajax 发布数据。我正在使用 json 的 stringify 方法来避免单引号，但它不是针对一个值这样做，而是针对其他值。我很困惑。我也尝试使用替换功能，但没有用。

以下是我的jQuery代码，

```
$.ajax({
                    type: "POST",
                    url: "<%=ResolveUrl("~/QualityComplaintService.asmx") %>/DoesVariantExists",                    
                    contentType: "application/json; charset=utf-8",
                    data: "{categoryId: '" + category.val() + "', subcategoryId: '" + subcategory.val() + "', brandId: '" + brand.val() + "', variant: '" + variant.val() + "'}",
                    dataType: "json",
                    success: function(msg) {
                        var d = msg.d;
                        if (d == true)
                        {
                           alert("Variant already exists! Please choose another one.");
                           return false;
                        }
                        else
                        {
                        var parameter = {
                                            categoryId: category.val(),
                                            subcategoryId: subcategory.val(),
                                            brandId: brand.val(),
                                            size: size.val(),
                                            variant: variant.val(), 
                                            chkIsActive: chkActive
                                        };
                            $.ajax({
                                type: "POST",
                                url: "<%=ResolveUrl("~/QualityComplaintService.asmx") %>/RegisterVariant",                    
                                contentType: "application/json; charset=utf-8",
                                data: JSON.stringify(parameter),
                                dataType: "json",
                                success: function(msg) {
                                    __doPostBack('<%=btnAdd.ClientID.Replace("_", "$") %>','');
                                }
                            });
                        }                    
                    }
            }); 
```

当我运行上面的代码时，我可以在大小字段中插入单引号，但是当我在变量字段中插入单引号时会出错。但是具有相同的数据类型。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:40:37.847

在您的第一个 AJAX 请求中，您有以下行：

```
data: "{categoryId: '" + category.val() + "', subcategoryId: '" + subcategory.val() + "', brandId: '" + brand.val() + "', variant: '" + variant.val() + "'}", 
```

显然应该将其替换为`JSON.stringify`以避免可怕的字符串连接，一旦其中一个参数包含一些特殊字符（例如单引号）就会中断：

```
data: JSON.stringify({ 
    categoryId: category.val(), 
    subcategoryId: subcategory.val(), 
    brandId: brand.val(), 
    variant: variant.val()
}), 
```

您的第二个 ajax 调用似乎很好，因为您正确使用了该`JSON.stringify`方法。

# ruby-on-rails - Rails 路由错误？

> ID：11272755
> 
> 赞同：0
> 
> 时间：2012-06-30T08:39:01.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing

我正在尝试使用此 url 访问我的 checkpoints#index 方法： `http://localhost:3000/lessons/introductions/checkpoints/`

但我得到这个错误：

> `No route matches {:action=>"show", :controller=>"checkpoints", :lesson_id=>#<Checkpoint id: 1, checkpoint: "Definition of Monetary Policy", url: "http://www.youtube.com/watch?v=HX3wOWN9-sM", objective: "Define monetary policy", description: "Welcome to this series of lectures on monetary poli...", question: "What is the definition of monetary policy?", hint: "It is the deliberate manipulation of something OR s...", answer: "-", lesson_id: 8, created_at: "2012-06-29 07:21:47", updated_at: "2012-06-30 08:24:15", slug: "definition-of-monetary-policy">}`

这不应该是这种情况，因为在我的“rake routes”中：

```
 lesson_checkpoints GET    /lessons/:lesson_id/checkpoints(.:format)          checkpoints#index
                         POST   /lessons/:lesson_id/checkpoints(.:format)          checkpoints#create
   new_lesson_checkpoint GET    /lessons/:lesson_id/checkpoints/new(.:format)      checkpoints#new
  edit_lesson_checkpoint GET    /lessons/:lesson_id/checkpoints/:id/edit(.:format) checkpoints#edit
       lesson_checkpoint GET    /lessons/:lesson_id/checkpoints/:id(.:format)      checkpoints#show
                         PUT    /lessons/:lesson_id/checkpoints/:id(.:format)      checkpoints#update
                         DELETE /lessons/:lesson_id/checkpoints/:id(.:format)      checkpoints#destroy` 
```

它不会加载#index 操作而不是#show 操作吗？有谁知道这个错误的可能原因？

这就是我的 routes.rb 的样子：

```
resources :lessons do
  resources :checkpoints
end  

resources :lessons

resources :topics do
  resources :lessons
end 

#Devise Routes
devise_for :users

resources :subjects do
  resources :topics
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:01:21.637

我认为您没有提到“介绍”的路线。

```
resources :lessons do
   resources :introductions
end 

resources :introductions do
   resources :checkpoints
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:20:54.093

我看到两个问题：

1.  我认为为您的课程模型设置friendly_id 存在一些问题。您的friendly_id 设置将Checkpoint 对象作为您的课程的友好ID，而不是课程的标题，这是您从给定的URL 中想要的。

2.  您的路线声明不正确。您两次声明资源“课程”。

 ````
resources :lessons do  
  resources :checkpoints  
end  
resources :lessons 
````  `您可以在控制台中检查您的friendly_id 的正确性：

```
lesson = Lesson.create(name: 'introduction')
lesson.friendly_id #=> should output 'introduction' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T08:17:33.000

我发现了问题：我的friendly_id 是正确的。在我看来，错误本身就是错误的。我已经定义了两次资源，所以我可以访问 localhost/lessons/blahblah 的 url。这对我有用。我的视图文件需要编辑（从默认的未嵌套文件开始），一旦更正，一切都会再次顺利进行。`

# javascript - Javascript中的函数链

> ID：11272758
> 
> 赞同：1
> 
> 时间：2012-06-30T08:39:29.420
> 
> 标签：javascript, javascript-events

在 javascript 中，我们以准并行方式触发函数

```
window.onload=function(){
document.getElementById("test").addEventListener('click', function1(), false);
//consider it takes 3 seconds to be completed
document.getElementById("test").addEventListener('click', function2(), false);
} 
```

完全执行后`function2()`我们如何开火？`function1()`

在 jQuery 中，我们可以将一系列函数链接为（例如）：

```
$(this).fadeIn(3000).fadeOut(2000); 
```

如何在纯 javascript 中进行这种功能更改？

**编辑：**为了回应负面评论和投票，我提供了这个例子：

```
function delay(time, func){
setTimeout(func,time);
}

delay(2000,function(){alert('Function 1');});
delay(1000,function(){alert('Function 2');}); 
```

在此示例中，您将首先看到“功能 2”的警报。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T08:50:40.230

如果`function1`是异步的，则必须对其进行修改，以便调用者可以传递一个回调，该回调将在完成后执行，例如 jQuery 的[ajax](http://api.jquery.com/jQuery.ajax/)方法提供回调，例如成功、错误、...：

```
window.onload = function() {
    function1(function() {
        // the callback is executed once function1 completes so
        // we can now invoke function 2
        function2();
    });
}; 
```

顺便说一下，可以用更简洁的方式写成：

```
window.onload = function() {
    function1(function2);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T17:11:54.057

我稍微修改了代码，使其使用 JSON 和更多类似 JQuery 的...

```
function $c(func){
    var obj;
    if(func=='alert'){
        obj={
            'queue':[],
            'timeout':null,
            'alert':function(timeout,prompt){
                obj.queue.push({timeout:timeout,prompt:prompt});
                if(obj.timeout==null){
                    obj.timeout=setTimeout(obj.do_alert,timeout);
                }
                return obj;
            },
            'do_alert':function(){
                var current=obj.queue.shift();
                alert(current.prompt);
                if(obj.queue.length>0){
                    obj.timeout=setTimeout(obj.do_alert,obj.queue[0].timeout);
                }else{
                    obj.timeout=null;
                }
            },
        };
    }else if(func=='write'){
        obj={
            'queue':[],
            'timeout':null,
            'write':function(timeout,text){
                obj.queue.push({timeout:timeout,text:text});
                if(obj.timeout==null){
                    obj.timeout=setTimeout(obj.do_write,timeout);
                }
                return obj;
            },
            'do_write':function(){
                var current=obj.queue.shift();
                var node=document.createTextNode(current.text);
                document.body.appendChild(node);
                if(obj.queue.length>0){
                    obj.timeout=setTimeout(obj.do_write,obj.queue[0].timeout);
                }else{
                    obj.timeout=null;
                }
            },
        };
    }
    return obj;
}

$c('alert').alert(1000,"This is an alert...").alert(3000,"...sequence.");
$c('write').write(1500,"Writing with...").write(1000," delay.").write(1000," Yay!"); 
```

**说明：**
这将创建一个`$c`返回对象的函数`obj`。`obj`取决于传递的参数，因此它包含不同的使用方法。单独的调用形成不同的队列，因此可以按顺序或并行两种方式完成作业。对函数的调用也会返回`obj`，因此函数调用可以链接在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T03:39:35.793

如果事件是同步的，则有`Continuum`按顺序运行函数的功能：

```
function keyedSequence(key, fn) {
  fn = fn || this;
  key.push({fn:fn});

  return function() {
    for(var i=0, n, full=1; i<key.length; i++) {
      n = key[i];
      if(n.fn == fn) {
        if(!n.called) n.called = 1, n.args = key.slice.call(arguments);
        if(!full) break
      }
      if(!n.called) full = 0
    }

    if(full) for(i=0; i<key.length; i++)
      n = key[i], key[i] = {fn:n.fn}, n.fn.apply(n, n.args);
  }
}
Function.prototype.seq = keyedSequence; 
```

您提供一个空数组作为键。使用相同键键入的功能将组合在一起。

```
window.onload = function() {
  var key = [];
  document.getElementById("test1").addEventListener('click', function1.seq(key), false);
  document.getElementById("test2").addEventListener('click', function2.seq(key), false);
} 
```

单击`test2`，然后单击`test1`，执行顺序仍然是`function1`then `function2`。

另一种调用方式是：

```
window.onload = function() {
  var key = [];
  document.getElementById("test1").addEventListener('click', keyedSequence(key, function1), false);
  document.getElementById("test2").addEventListener('click', keyedSequence(key, function2), false);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T08:52:11.697

如果没有以明确的方式编写这些事件处理程序，则无法判断函数设置的每个事件处理程序何时被触发。

如果函数 1 说“单击 X 时执行某项操作”或“20 秒后执行某项操作”或“收到 HTTP 响应时执行某项操作”，并且您希望函数 2 在其中任何一个发生后运行，那么您需要将其设置在“某物”级别，而不是“调用函数 1”级别。

```
delay(2000,function(){
    alert('Function 1');
    delay(1000,function(){alert('Function 2');});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T16:14:04.947

您可以像这样使用自确定函数（或“延迟函数确定”）：

```
var selfDetermine = function() {
    alert("Hi, this is the first time we meet.");
    selfDetermine = function() {
        alert("Hello again!");
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-21T19:47:04.970

您可以利用`jQuery.when()`延迟一个函数的执行，直到另一个函数完成它的执行。

像这样的东西应该适合你：

```
$.when(delay(2000,function(){alert('Function 1');})).done(delay(1000,function(){alert('Function 2');})); 
```

[关于 when() 的 jQuery 文档](http://api.jquery.com/jquery.when/)

# google-apps-script - Google 协作平台上的 Google 书签框

> ID：11272759
> 
> 赞同：1
> 
> 时间：2012-06-30T08:39:35.693
> 
> 标签：google-apps-script, google-sites

有没有办法获得（显示在以下链接下）谷歌网站页面/侧栏上的“添加书签”框（或等效链接）？

[https://www.google.com/bookmarks/](https://www.google.com/bookmarks/)

已编辑（为了更清楚：）

我想在我的 google 网站上有一个框/链接，该用户（使用 gmail 帐户登录）可以单击，并且当前页面 URL 会自动弹出，以便在其“Google 书签服务”（不在浏览器上）中添加书签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:14:37.630

不幸的是，没有 Google Bookmarks API。谷歌为大多数晦涩的服务提供了一个 API，我不确定为什么书签被遗漏了。如果他们这样做了，您就有机会使用 Google Apps 脚本。

在 Apps 脚本之外，您可以尝试使用[此小工具](http://www.google.com/ig/directory?type=gadgets&url=www.google.com/ig/modules/bookmarks.xml)并将其插入您的网站。它可能需要一些调整（您可以查看源代码），但有助于调整超出 Apps 脚本和站点的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:37:08.083

看看这个旧的讨论，也许它可以解决你的疑问

[http://productforums.google.com/forum/m/#!topic/sites/1Y14SOmc3qY](http://productforums.google.com/forum/m/#!topic/sites/1Y14SOmc3qY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T12:00:07.313

GAS 是一种云脚本语言，这意味着它运行在服务器上，而不是在您的计算机上。它与您的浏览器的交互非常有限，我不认为添加书签是可以在这种情况下完成的。您也可以在[Google 网站论坛上询问/搜索](http://productforums.google.com/forum/#!forum/sites)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-09T19:02:58.280

您可以使用共享 URL 来执行此操作。喜欢这个网址：

```
https://www.google.com/bookmarks/mark?op=edit&bkmk={url}&title={title}&annotation={text}&labels={hash_tags} 
```

您可以将其中任何一个设置为您想要的任何内容，或者只是不将它们包含在 URL 中：

*   `bkmk`：保存您的网址。
*   `title`: 持有你的头衔。
*   `annotation`: 保存您的文本。
*   `labels`：保存您的关键字或主题标签。

我维护了一个社交分享 URLs GitHub 项目，看看我们吧！[GitHub：社交分享网址](https://github.com/bradvin/social-share-urls)。

[![社交分享网址](../Images/80f76ec3827227f0c745b62a5b15dff5.png)](https://i.stack.imgur.com/8rEut.jpg)

# php - php正则表达式解析mailTo

> ID：11272761
> 
> 赞同：1
> 
> 时间：2012-06-30T08:39:37.740
> 
> 标签：php, regex

我有以下 html 源字符串：

```
<a href="mailto:abcd@test.com?body=This%20is%20the%20body%20-123-&subject=Subject%20Text&Content-Type=text/plain">Reply To Post</a> 
```

从上面我要提取的字符串中：

1.  电子邮件地址是 mailto: 之后和之前的部分？
2.  身体
3.  主题

任何有关正则表达式的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:00:08.317

第二部分不需要正则表达式。[它可以被解析为查询字符串](http://php.net/manual/en/function.parse-str.php)，IMO。

类似于：（`$s`是`href`以下代码中的值）

```
preg_match("/mailto:(.*?)\?(.*)/",$s,$matches);

echo "Email:" . $matches[1] . "\n";
parse_str($matches[2],$output);
echo "Body: " . $output['body'] . "\n";
echo "Subject: " . $output['subject'] . "\n"; 
```

实际上，如果您确定字符串以完全相同的方式出现，您也可以将子字符串从“:”索引的偏移量到“?”的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T09:05:44.100

这将假设您只有一个 mailto 链接：

```
// $str will be your string content from the question
if (preg_match('/"mailto:([^"]+?)/', $str, $matches) && false !== ($info = parse_url($matches[1]))) {
        $emailAddress = $info['path'];
        $emailParameters = array();
        if (isset($info['query'])) {
                parse_str($info['query'], $emailParameters);
        }
        var_dump($emailAddress, $emailParameters);
} 
```

它从第一个引号匹配`"mailto:`到第一个结束引号，并用于`parse_url`完成其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T09:04:11.167

没有在 PHP 中尝试过，但在[Regex Hero](http://regexhero.net/tester/)中可以正常工作：

`"mailto:([\w%.+-]+?@[\w.-]+?)(?:[?&](?:body=(.*?)|subject=(.*?)|[\w-]+=.*?))+?"`

这应该会产生以下捕获组：

*   1：电子邮件地址
*   2：身体
*   3：主题

不过，您可能想做一些更深入的测试，因为我不确定我是否拥有所有有效的邮件地址。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T08:48:22.043

尝试这个

```
$m = preg_match("/mailto:(.+?)\?/"); 
```

它与后跟冒号的单词匹配`mailto`，后跟一个捕获组（括号），其中包含`.`一次或多次`+`非贪婪的任何字符（？ - 这将使捕获尽可能短）后跟一个（转义）问号（`\?`)

# ruby-on-rails-3 - simple_form 渲染单选按钮组，带有 （ X ）标签和 twitter 引导程序？

> ID：11272764
> 
> 赞同：7
> 
> 时间：2012-06-30T08:41:07.113
> 
> 标签：ruby-on-rails-3, radio-button, twitter-bootstrap, simple-form

我尝试了一段时间使用 simple_form 创建下面的示例，但是 + 标签并修复了一些样式。任何人都知道如何解决：

*   删除**2**不知道它们来自哪里（在生产中似乎很奇怪的 i18n 错误，它会抛出一大堆 I18n ）
*   在单选按钮之后有文本男性或女性

![标签输出](../Images/aece07ba22e1dd2c4c64408fc1aca303.png)

是以下代码的结果：

```
 .clear
    = f.label "Gender"
    = f.collection_radio_buttons(:gender, [['Male', 'icon_male'], ['Female', 'icon_female']],
                                 :first, :last,
                                 :item_wrapper_class => 'horizontal',
                                 ) do |gender|
      = gender.label { image_tag("/assets/icons/16x16/#{gender.text}.png") + gender.radio_button  }

    .clear
    .ruler 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T02:00:01.667

要删除 2s 并在其中正确使用文本标签：

```
= f.label "Gender"
= f.collection_radio_buttons(:gender, [['Male', 'icon_male'], ['Female', 'icon_female']],
                             :first, :last,
                             :item_wrapper_class => 'horizontal',
                             ) { |gender| gender.label { image_tag("/assets/icons/16x16/#{gender.text}.png") + gender.radio_button + gender.text } } 
```

删除`=`之前的`gender.label`将删除2s。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-13T22:38:54.567

Rubytastic 你的答案中有一个额外的逗号。这是@23inhouse 建议的正确代码。它对我有用

*   导轨 3.1.3
*   简单形式 2.0.2
*   哈姆 3.1.4
*   haml-rails 0.3.4

```
 = simple_form_for @object_new do |f|
      .clear
      = f.label "Gender"
      - f.collection_radio_buttons(:gender, [['Male', 'icon_male'], ['Female', 'icon_female']], :first, :last, :item_wrapper_class => 'horizontal') do |gender|
        = gender.label { image_tag("rails.png") + gender.radio_button  }
      .clear
      .ruler
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-14T01:45:15.140

最终工作片段：

```
= f.label "Gender"
- f.collection_radio_buttons(:gender, [['Male', 'icon_male'], ['Female', 'icon_female']], :first, :last, :item_wrapper_class => 'horizontal') do |gender|
  = gender.label { image_tag("/assets/icons/16x16/#{gender.text}.png") + gender.radio_button  }
.clear
.ruler 
```

# javascript - ThreeJS 中的即时渲染

> ID：11272765
> 
> 赞同：2
> 
> 时间：2012-06-30T08:41:11.963
> 
> 标签：javascript, rendering, three.js

给定这样的示例代码：

```
<html>
    <body>
        <span id='canvas'></span>                 
    </body>

<script src="Three.js"></script>
<script>    
    var renderer = new THREE.CanvasRenderer();
    renderer.setSize(500, 500);
    document.getElementById('canvas').appendChild(renderer.domElement);

    var scene = new THREE.Scene();

    var camera = new THREE.PerspectiveCamera(36, 1, 0.1, 3000);
    camera.position.set(0, 0, 50);
    scene.add(camera); 

    renderer.render(scene, camera);
    alert('0');
    foo();
    alert('3');

    function foo() {
        var x = new THREE.Mesh(new THREE.SphereGeometry(5, 5, 5), new THREE.MeshNormalMaterial());
        scene.add(x);
        renderer.render(scene, camera);
        alert('1');
        bar();
    }

    function bar() {
        var y = new THREE.Mesh(new THREE.CubeGeometry(20, 20, 20), new THREE.MeshNormalMaterial());
        scene.add(y);
        renderer.render(scene, camera);
        alert('2');
    }

</script>

</html> 
```

（此示例不是实际项目的一部分，但它有助于解释问题。）目标是在执行零警报时什么都看不到，然后在第一个警报之前看到一个球体，然后在之前看到一个立方体第二个警报。事实上，所有渲染都在第三次警报之后执行。但是我们需要在从 foo() 和 bar() 返回之前得到一个结果。

为什么我们必须在全局范围内执行渲染？
有什么方法可以在不离开功能的情况下渲染场景？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:01:05.180

也许这段代码会提供您正在寻找的效果？

```
<script src="Three.js"></script>
<script>  

// insert global variable declarations here 
var loopNumber = 0;

init();
animate();

function init()
{
     // insert standard Three.js setup/initialization code here
}

function animate() 
{
    requestAnimationFrame( animate );
    render();       
    update();
}

function update()
{
    loopNumber++;
    if (loopNumber == 1)
        foo();
    if (loopNumber == 2)
        bar();
}

function render() 
{
    renderer.render( scene, camera );   
} 
```

# .htaccess - 如何使用 htaccess 隐藏网页名称

> ID：11272768
> 
> 赞同：0
> 
> 时间：2012-06-30T08:41:32.050
> 
> 标签：.htaccess, mod-rewrite

应用重定向规则后，我想在 URL 中隐藏网页名称：

这些是我的 .htaccess 文件的内容：

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} ^192\.168\.199\.129$
RewriteCond %{REQUEST_URI} !/index2.html$ [NC]
RewriteRule ./* http://multiserver.example.com/user1/index2.html [R=301,L] 
```

上面的规则让我可以将具有特定 ip 的用户重定向到我想要的页面，但之后我还想在用户的浏览器地址栏中隐藏新网页的名称（这里是 index2.html），以便 URL正在显示成为 multiserver.example.com/user1/。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:22:45.693

代替浏览器重定向 ( `[R=301]`)，使用内部代理标志：`[P]`

```
RewriteRule ./* http://multiserver.example.com/user1/index2.html [P,L] 
```

这样，浏览器的地址栏就不会改变，因为它没有得到服务器的 301 响应。

# php - cURL php动态http地址加载

> ID：11272769
> 
> 赞同：0
> 
> 时间：2012-06-30T08:41:40.543
> 
> 标签：php, curl

我正在使用 cURL 来获取其 http 地址是动态的网页的内容。我能够在每个时刻检测到动态地址。但是，当我执行它时，我会收到消息

```
User information is disabled.
This operation cannot be accepted. User certification is invalid or date expired.
Update page. 
```

我究竟做错了什么？

# database - Fabric.js - 如何使用自定义属性在服务器上保存画布

> ID：11272772
> 
> 赞同：63
> 
> 时间：2012-06-30T08:42:17.680
> 
> 标签：database, json, savechanges, fabricjs

我希望能够将当前画布的状态保存到服务器端数据库，可能是 JSON 字符串，然后使用`loadFromJSON`. 通常，这很容易使用：

```
var canvas = new fabric.Canvas();
function saveCanvas() {
    // convert canvas to a json string
    var json = JSON.stringify( canvas.toJSON() );

    // save via xhr
    $.post('/save', { json : json }, function(resp){ 
        // do whatever ...
    }, 'json');
} 
```

进而

```
function loadCanvas(json) {

  // parse the data into the canvas
  canvas.loadFromJSON(json);

  // re-render the canvas
  canvas.renderAll();

  // optional
  canvas.calculateOffset();
} 
```

但是，我还使用内置`Object#set`方法在要添加到画布的织物对象上设置了一些自定义属性：

```
// get some item from the canvas
var item = canvas.item(0);

// add misc properties
item.set('wizard', 'gandalf');
item.set('hobbit', 'samwise');

// save current state
saveCanvas(); 
```

问题是，当我检查服务器端的请求时，我发现我的自定义属性没有从画布中解析出来并与其他所有内容一起发送。这可能与方法如何`toObject`删除对象类中不是默认属性的任何内容有关。解决这个问题的好方法是什么，这样我就可以从服务器发送的 JSON 字符串中保存**和恢复画布，并且恢复的画布也将包含我的自定义属性？**谢谢。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-30T17:28:18.233

好问题。

如果您正在向对象添加自定义属性，那么这些对象可能在某种程度上是“特殊的”。似乎对它们进行子类化是一个合理的解决方案。

例如，下面是我们如何将 a 子类`fabric.Image`化为命名图像。然后，这些图像对象可以具有“Gandalf”或“Samwise”之类的名称。

```
fabric.NamedImage = fabric.util.createClass(fabric.Image, {

  type: 'named-image',

  initialize: function(element, options) {
    this.callSuper('initialize', element, options);
    options && this.set('name', options.name);
  },

  toObject: function() {
    return fabric.util.object.extend(this.callSuper('toObject'), { name: this.name });
  }
}); 
```

首先，我们给这些对象一个类型。此类型用于`loadFromJSON`自动调用`fabric.<type>.fromObject`方法。在这种情况下，它会是`fabric.NamedImage.fromObject`。

然后我们覆盖`initialize`（构造函数）实例方法，以便在初始化对象时也设置“name”属性（如果给定了该属性）。

然后我们覆盖`toObject`实例方法以在返回的对象中包含“名称”（这是结构中对象序列化的基石）。

最后，我们还需要实现`fabric.NamedImage.fromObject`我之前提到的那个，以便`loadFromJSON`知道在 JSON 解析期间调用哪个方法：

```
fabric.NamedImage.fromObject = function(object, callback) {
  fabric.util.loadImage(object.src, function(img) {
    callback && callback(new fabric.NamedImage(img, object));
  });
}; 
```

我们在这里加载一个图像（来自“object.src”），然后创建一个实例`fabric.NamedImage`。请注意，此时构造函数已经处理了“name”设置，因为我们之前覆盖了“initialize”方法。

我们还需要指定它`fabric.NamedImage`是一个异步“类”，这意味着它`fromObject`不返回实例，而是将其传递给回调：

```
fabric.NamedImage.async = true; 
```

现在我们可以尝试一下：

```
// create image element
var img = document.createElement('img');
img.src = 'https://www.google.com/images/srpr/logo3w.png';

// create an instance of named image
var namedImg = new fabric.NamedImage(img, { name: 'foobar' });

// add it to canvas
canvas.add(namedImg);

// save json
var json = JSON.stringify(canvas);

// clear canvas
canvas.clear();

// and load everything from the same json
canvas.loadFromJSON(json, function() {

  // making sure to render canvas at the end
  canvas.renderAll();

  // and checking if object's "name" is preserved
  console.log(canvas.item(0).name);
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-04-21T10:16:52.587

哇。我在这里错过了什么吗？

我已经做过很多次了，它不需要任何花哨的子类化。

文档涵盖了它： http: [//fabricjs.com/docs/fabric.Canvas.html#toJSON](http://fabricjs.com/docs/fabric.Canvas.html#toJSON)

只需在对 toJSON() 的调用中包含一组属性名称作为字符串。

例如

```
canvas.toJSON(['wizard','hobbit']); 
```

希望.... 对于奖励积分，您可以添加一个 reviver 功能，该功能将补充您的自定义属性。

同样，这在文档中有所介绍，并有一个示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-13T14:55:06.573

我有同样的问题，但我不想扩展 fabric.js 类。

我编写了一个函数，该函数将织物画布作为参数并返回带有我的特殊属性的字符串化版本：

```
function stringifyCanvas(canvas)
{
    //array of the attributes not saved by default that I want to save
    var additionalFields = ['selectable', 'uid', 'custom']; 

    sCanvas = JSON.stringify(canvas);
    oCanvas = JSON.parse(sCanvas) ;
    $.each(oCanvas.objects, function(n, object) {
        $.each(additionalFields, function(m, field) {
            oCanvas.objects[n][field] = canvas.item(n)[field];
        });
    });

    return JSON.stringify(oCanvas);     
} 
```

当我使用时，特殊属性似乎正确导入`canvas.loadFromJSON()`，我正在使用 fabric `1.7.2`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-17T14:51:25.627

更简单的方法是在字符串化后添加属性：

```
var stringJson = JSON.stringify(this.canvas);
var objectJson = JSON.parse(string.Json);

//remove property1 property
delete objectJson.property1;

//add property2 property
delete objectJson.property2;

// stringify the object again
stringJson = JSON.stringify(objectJson);

// at this point stringJson is ready to be sent over to the server
$http.post('http://serverurl/',stringJson); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-30T17:43:44.090

如果不想在每次调用时都指定要使用的自定义属性`canvas.toJSON()`，并且不想使用复杂的子类化方法，这里有一个非常简单的扩展 Fabric 方法的`toObject`方法。

```
//EXTEND THE PROPS FABRIC WILL EXPORT TO JSON
fabric.Object.prototype.toObject = (function(toObject) {
    return function() {
        return fabric.util.object.extend(toObject.call(this), {
            id: this.id,
            wizard: this.wizard,
            hobbit: this.hobbit,
        });
    };
})(fabric.Object.prototype.toObject); 
```

然后您可以在 Fabric 对象上设置自定义属性。

```
item.set("wizard","gandalf");
item.set("hobbit","bilbo"); 
```

当您调用`canvas.toJSON()`这些属性时，这些属性将持续输出。如果您随后使用`canvas.loadFromJSON()`JSON 输出，自定义属性将被导入并应用于 Fabric 对象。

# html - 如何在 Nokogiri 中正确解析这个糟糕的 html？

> ID：11272773
> 
> 赞同：1
> 
> 时间：2012-06-30T08:42:30.663
> 
> 标签：html, ruby, nokogiri

我正在尝试用 Nokogiri 解析这个 HTML：

```
<div class="times">
<span style="color:"><span style="padding:0 ">&lrm;</span><!--  -->16:45&lrm;</span>
<span style="color:"><span style="padding:0 "> &nbsp;&lrm;</span><!--  -->19:30&lrm;</span> 
<span style="color:"><span style="padding:0 "> &nbsp;&lrm;</span><!--  -->22:10&lrm;</span>
</div> 
```

我只想获取插入数组的时间。

我像这样设置了一个gsub：

```
 block.css('div.times span').text.gsub(" ","").gsub("&nbsp","") 
```

但后来我得到了一个字符串，我有点卡住了。有没有一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:00:13.557

最简单的可能是：

```
block.at('div.times').text.scan /\d{2}:\d{2}/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:16:22.967

您可以做的一件事是在字符串中保留空格，然后[`String#split`](http://ruby-doc.org/core-1.9.3/String.html#method-i-split)将其转换为数组：

```
block.css('div.times span').text.gsub("&nbsp","").split(' ') 
```

在这种情况下，您可能还需要删除从左到右的标记，并且我认为您不需要替换不间断空格，因此您可以尝试以下操作：

```
block.css('div.times span').text.gsub("\u200e", '').split(' ') 
```

（`\u200e`是从左到右的标记）。

Nokogiri 的另一种选择是使用[xpath](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-xpath)而不是 CSS，这将使您能够直接选择所需的文本节点，然后用于`map`转换为字符串数组：

```
block.xpath('//div[@class="times"]/span/text()').map(&:text) 
```

# php - codeigniter 表单验证错误

> ID：11272775
> 
> 赞同：2
> 
> 时间：2012-06-30T08:42:41.797
> 
> 标签：php, arrays, codeigniter, validation

在我的控制器中，我正在设置这样的规则

```
$this->form_validation->set_rules("contact_name[]","Contact Name","required|max_length[25]|xss_clean|htmlspecialchars");
        $this->form_validation->set_rules("contact_title[]","Contact Title","required|max_length[25]|xss_clean|htmlspecialchars");
        $this->form_validation->set_rules("contact_main[]","Contact Main Number","required|max_length[45]|xss_clean|htmlspecialchars");
        $this->form_validation->set_rules("contact_direct[]","Contact Direct Number","required|max_length[45]|xss_clean|htmlspecialchars");
        $this->form_validation->set_rules("contact_cell[]","Contact Cell Number","required|max_length[45]|xss_clean|htmlspecialchars");
        $this->form_validation->set_rules("contact_primary","Primary","required|max_length[45]|xss_clean|htmlspecialchars");
        $this->form_validation->set_rules("contact_fax[]","Fax","required|max_length[105]|xss_clean|htmlspecialchars");
        $this->form_validation->set_rules("contact_email[]","Contact Email ID","required|max_length[105]|xss_clean|htmlspecialchars"); 
```

html是=>

```
 <input type="text" name="contact_name[]" value="Dileep" class="t_contact_name">
     //and some others too as name as array 
```

发布后我会得到这样的东西

```
array
  'company' => string 'Sccc' (length=4)
  'name' => string 'Ajay ccc' (length=8)
  'address' => string 'ccsd' (length=4)
  'city' => string 'City name' (length=9)
  'state' => string '20' (length=2)
  'zip' => string '665996555' (length=9)
  'country' => string '6' (length=1)
  'category' => string 'popular' (length=7)
  'credit' => string '2566' (length=4)
  'website' => string 'ccc' (length=3)
  'primary_flag' => string '1' (length=1)
  'discount' => string '0' (length=1)
  'payment_terms' => string '6' (length=1)
  'customerid' => string 'ccc' (length=3)
  'notes' => string 'cc' (length=2)
  'contact_name' => 
    array
      0 => string 'Dileep' (length=6)
      1 => string 'Dileep' (length=6)
      2 => string 'Dileep' (length=6)
      3 => string 'Dileep' (length=6)
      4 => string 'Dileep' (length=6)
      5 => string 'Dileep' (length=6)
      6 => string 'Dileep' (length=6)
      7 => string 'Dileep' (length=6)
      8 => string 'Dileep' (length=6)
  'contact_primary' => 
    array
      0 => string 'true' (length=4)
      1 => string 'false' (length=5)
      2 => string 'false' (length=5)
      3 => string 'false' (length=5)
      4 => string 'false' (length=5)
      5 => string 'false' (length=5)
      6 => string 'false' (length=5)
      7 => string 'false' (length=5)
      8 => string 'false' (length=5)
  'contact_title' => 
    array
      0 => string 'Curio' (length=5)
      1 => string 'Curio' (length=5)
      2 => string 'Curio' (length=5)
      3 => string 'Curio' (length=5)
      4 => string 'Curio' (length=5)
      5 => string 'Curio' (length=5)
      6 => string 'Curio' (length=5)
      7 => string 'Curio' (length=5)
      8 => string 'Curio' (length=5)
  'contact_main' => 
    array
      0 => string '66558-66554-6665' (length=16)
      1 => string '66558-66554-6665' (length=16)
      2 => string '66558-66554-6665' (length=16)
      3 => string '66558-66554-6665' (length=16)
      4 => string '66558-66554-6665' (length=16)
      5 => string '66558-66554-6665' (length=16)
      6 => string '66558-66554-6665' (length=16)
      7 => string '66558-66554-6665' (length=16)
      8 => string '66558-66554-6665' (length=16)
  'contact_direct' => 
    array
      0 => string '5555-666-555' (length=12)
      1 => string '5555-666-555' (length=12)
      2 => string '5555-666-555' (length=12)
      3 => string '5555-666-555' (length=12)
      4 => string '5555-666-555' (length=12)
      5 => string '5555-666-555' (length=12)
      6 => string '5555-666-555' (length=12)
      7 => string '5555-666-555' (length=12)
      8 => string '5555-666-555' (length=12)
  'contact_cell' => 
    array
      0 => string '555-6654-555' (length=12)
      1 => string '555-6654-555' (length=12)
      2 => string '555-6654-555' (length=12)
      3 => string '555-6654-555' (length=12)
      4 => string '555-6654-555' (length=12)
      5 => string '555-6654-555' (length=12)
      6 => string '555-6654-555' (length=12)
      7 => string '555-6654-555' (length=12)
      8 => string '555-6654-555' (length=12)
  'contact_fax' => 
    array
      0 => string '996-5565-656' (length=12)
      1 => string '996-5565-656' (length=12)
      2 => string '996-5565-656' (length=12)
      3 => string '996-5565-656' (length=12)
      4 => string '996-5565-656' (length=12)
      5 => string '996-5565-656' (length=12)
      6 => string '996-5565-656' (length=12)
      7 => string '996-5565-656' (length=12)
      8 => string '996-5565-656' (length=12)
  'contact_email' => 
    array
      0 => string 'mailer@mail.com' (length=20)
      1 => string 'mailer@mail.com' (length=20)
      2 => string 'mailer@mail.com' (length=20)
      3 => string 'mailer@mail.com' (length=20)
      4 => string 'mailer@mail.com' (length=20)
      5 => string 'mailer@mail.com' (length=20)
      6 => string 'mailer@mail.com' (length=20)
      7 => string 'mailer@mail.com' (length=20)
      8 => string 'mailer@mail.com' (length=20)
  'userfile2' => string '' (length=0)
  'contact_log' => 
    array
      0 => string 'Waiting for the release....' (length=27)
  'contact_time' => 
    array
      0 => string '6/30/12' (length=7)
  'contact_duedate' => 
    array
      0 => string '12/01/2012' (length=10) 
```

但是当我运行表单验证时，我遇到了一些错误

```
A PHP Error was encountered

Severity: Warning

Message: mb_strlen() expects parameter 1 to be string, array given

Filename: libraries/Form_validation.php

Line Number: 1003
A PHP Error was encountered

Severity: Warning

Message: htmlspecialchars() expects parameter 1 to be string, array given

Filename: libraries/Form_validation.php

Line Number: 619 
```

真正的问题是什么或我做错了什么？

**编辑**

请检查输入名称是否为数组，有多个相同类型的值。所以我需要使用字段名称作为数组。

根据 codeigniter 表单验证，我可以使用包含字段名称作为数组来验证表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:50:54.087

您的输入由数组组成，而函数`max_length`并`htmlspecialchars`期望一个字符串。

当只有一个值时，使用这种类型的输入：

```
<input type="text" name="contact_name" value="Dileep" class="t_contact_name"> 
```

在必须使用数组的输入上，不要使用上述函数。

# ruby-on-rails - （使用 phusion 乘客 + Nginx）运行具有多个实例名称和相同端口（80）的相同 Rails 应用程序

> ID：11272776
> 
> 赞同：2
> 
> 时间：2012-06-30T08:43:03.733
> 
> 标签：ruby-on-rails, nginx, passenger, virtualhost

**注意：**我是 ruby​​ on rails 和服务器托管的新手，我无法表达我的愿景作为问题，如果我错了或纠正我，请原谅我。

嗨，我有一个使用 ruby​​ on rails 开发的产品，将托管在具有 32 GB 内存和 8 核服务器处理器的专用服务器中。每个客户端都应该有单独的数据库和单独的 rails 实例。我正在复制 - 使用单独的文件夹为每个客户端复制代码并提供不同的数据库名称，因此每个都用作不同的实例。

**例如：**

我有一个主临时域

```
www.product.com 
```

对于每个客户端，我需要将单独的子域映射到具有相同端口（80）但具有不同 rails 实例名称的同一服务器

```
www.client1.product.com
www.client2.product.com
www.clientn.product.com 
```

据我所知，如果我启动 rails 实例，每个实例都将从单独的端口号开始

```
client1 with start at port 3001
client2 with start at port 3002
client3 with start at port 3003 
```

**我的问题是如何将端口 80 的所有实例映射到适当的相同子域**

如果我访问

`www.client4.product.com` ，我需要让应用程序在端口 3004 中运行

**更新：**

***任何人都可以为上述场景发布 phusion 乘客 + Nginx 的步骤***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:22:24.557

使用 Phusion Passenger + Apache，实现您想要的最简单的方法是使用 VHOST。

只需在不同的文件夹中签出您的项目：

*   /var/www/rails/client1/
*   /var/www/rails/client2/
*   /var/www/rails/client3/
*   /var/www/rails/client4/

然后为 /etc/apache2/sites-available/client1.foobar.com 中的每个客户端创建一个 VHOST 文件

```
<VirtualHost *:80>
        ServerName client1.foobar.com
        DocumentRoot /var/www/rails/client1/current/public

        <Directory /var/www/rails/client1/current/public>
                Allow from all
                Options -MultiViews
        </Directory>

</VirtualHost> 
```

然后将该 VHOST 添加到托管域 a2ensite client1.foobar.com 的列表中

然后你重新加载 apache /etc/init.d/apache2 reload

我以为您使用 capistrano 进行部署，这就是我添加“当前”文件夹的原因，但如果您不这样做，只需删除该部分（并真正考虑采用 capistrano）

我还假设你的服务器是一个 linux 机器，但如果它不仅仅是阅读 apache 的关于重新加载配置和添加新 VHOST 的文档（并且真的考虑拥有一个 linux 服务器）

PS：哦，如果您不使用 capistrano 并且您对代码库进行了更新，请不要忘记触摸应用程序目录中的“tmp/restart”文件来告诉乘客重新启动 rails 进程。但不要尝试在生产中使用“rails server”命令；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:55:26.597

这是 nginx + 乘客的最小服务器块的示例

```
server {
        listen 80;
        server_name client1.foobar.com;
        root /var/www/rails/client1/current/public;

    passenger_enabled on;
} 
```

配置 nginx 的常用方法是创建一个子目录“sites-available”，在其中放置一个名为“client1.foobar.com”的文件，其中包含此代码段，然后在另一个名为“sites-enabled”的子目录中为该文件创建一个符号链接. 最后，在 http 块内的 nginx.conf 中添加以下行

```
include /path/to/your/sites-enabled/*; 
```

不要忘记重新加载/重新启动您的 nginx。

这种使用符号链接的方式允许您通过删除符号链接轻松禁用您想要的任何站点，而不会丢失您的配置文件。

您可以在此处找到一些示例和更多文档：[http ://www.modrails.com/documentation/Users%20guide%20Nginx.html](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)

# html - CSS UL 列表标签问题

> ID：11272781
> 
> 赞同：0
> 
> 时间：2012-06-30T08:44:05.160
> 
> 标签：html, css, tabs

我创建了以下

![在此处输入图像描述](../Images/6d13f2b939781e89009ca4d884059a16.png)

而且我不知道如何修复选项卡之间的间距。

也许解决方案非常简单，但我无法弄清楚。

我尝试了几种方法，但找不到解决方案。

请问有什么问题吗？

在这里你可以找到代码：http: [//jsfiddle.net/SFw6V/](http://jsfiddle.net/SFw6V/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:47:40.887

问题出在**标签 li**类中

**问题：** `display:inline-block`向右添加额外的边距

**两种解决方案：**

1.  `display:block`&`float:left`
2.  `margin-right:-4px;`

**工作小提琴：http:** [//jsfiddle.net/surendraVsingh/SFw6V/2/](http://jsfiddle.net/surendraVsingh/SFw6V/2/)

*更好的解释和不同的解决方案：* [http ://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T08:47:29.470

它们有一个边距，因为它们之间有一个空白字符（空格，`）：`

 ````
<ul class='tabs'>
    <li data-tab="#tab1">
        Tab 1
    </li><li data-tab="#tab2"> <!-- remove spaces -->
        Tab 2
    </li><li data-tab="#tab3"> <!-- remove spaces -->
        Tab 3
    </li>
</ul> 
```

[http://jsfiddle.net/SFw6V/1/](http://jsfiddle.net/SFw6V/1/)`

# jquery - 使用 for 循环中的数据设置属性

> ID：11272785
> 
> 赞同：0
> 
> 时间：2012-06-30T08:44:33.087
> 
> 标签：jquery

我有以下代码

```
for(var i = 0; i < data.length; i++) {
       var item = data[i];
       $('.client-content').append("<li>"+"<b>"+i +"</b>" + " : " +item[0] + " : " + item[1]+"<a href='#' class='link-right'>Edit</a>" + "<a href='#' class='link-right'>Delete</a>"+"</li>" + "<br/>"); 
```

`item[0]`是我想要作为我的 id 属性的记录 id。我希望我`<li>`有 id 。我该`item[0]`怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:47:30.950

```
for(var i = 0; i < data.length; i++) {
       var item = data[i];
       $('.client-content').append("<li id='"+item [0]+"'>"+"<b>"+i +"</b>" + " : " +item[0] + " : " + item[1]+"<a href='#' class='link-right'>Edit</a>" + "<a href='#' class='link-right'>Delete</a>"+"</li>" + "<br/>"); 
```

# java - 使用java将信息从文本文件输入到网页

> ID：11272787
> 
> 赞同：1
> 
> 时间：2012-06-30T08:45:19.697
> 
> 标签：java, html, parsing

我正在构建一个程序来从一个网页获取信息并将其输入另一个网页，解析信息的原始页面不是问题，但我不知道如何从文本文件中获取该信息并进入文本字段使用脚本的不同网站。谷歌没有帮助，那么这可以用 java 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:04:32.417

您可以采取 2 条路线来执行此操作：

1) 使用[HttpClient](http://hc.apache.org/httpcomponents-client-ga)之类的库，并将您收集的信息直接发布到网站上。

2）使用像[Selenium](http://seleniumhq.org/)这样的 Web 测试框架与浏览器交互并填写表单。

选项 1 是迄今为止最强大和最快的，但是 (2) 让您使用目标可能依赖的任何客户端代码 (javascript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:02:48.487

如果问题是如何在 Java 中以编程方式提交表单，我建议查看[Apache HTTP Components Client](http://hc.apache.org/httpcomponents-client-ga/index.html)，这是一个为您完成所有艰苦工作的类库。

文档非常好，所以我建议你至少先阅读[他们的教程](http://hc.apache.org/httpclient-3.x/tutorial.html)，但这是我从他们的网站借来的一个小代码片段，它展示了如何发布带有变量用户和密码的表单

```
PostMethod post = new PostMethod("http://jakarata.apache.org/");
NameValuePair[] data = {
  new NameValuePair("user", "joe"),
  new NameValuePair("password", "bloggs")
};
post.setRequestBody(data);
// execute method and handle any error responses.
...
InputStream in = post.getResponseBodyAsStream();
// handle response. 
```

现在，我同意 Marijn 和 Jared 的观点，如果这是一次性的，那可能就不值得了，使用 cURL 或 Selenium 等一些创造性的脚本将是解决问题的更快方法。

# jquery - Ajax 数据表 bSortable

> ID：11272789
> 
> 赞同：1
> 
> 时间：2012-06-30T08:45:52.183
> 
> 标签：jquery, ajax

我正在使用 ajax dataTable 查看书籍列表，我正在使用 cakePHP。这是我调用 ajax 数据表的脚本：

```
$(document).ready(function() {
    oTable = $('#base_discount').dataTable({
        "bProcessing": true,
        "bServerSide": true,
        "sPaginationType": "full_numbers",
        "aoColumns"   : [{"sClass": "center"}, null, null,{"sClass": "center"} ,{"sClass": "center"},{"sClass": "center"},{"sClass": "center"}, {"bSortable": true,"sClass": "center"}, **{"bSortable": false,"sClass": "center"}**],
        "sAjaxSource": "<?php echo BASE_PATH?>xxx/xxx.ctp"
    });
}); 
```

在`aColumns`我设置`bSortable`为`false`的最后一列以及最后一列中，我将复选框设置为选中和取消选中全部。这是一个检查和取消选中的脚本：

```
function toggle(source) {
    checkboxes = document.getElementsByName('foo');
    for(var i in checkboxes)
        checkboxes[i].checked = source.checked;
} 
```

此复选框工作正常。但在数据表中，最后一列的网格显示如下：![在此处输入图像描述](../Images/aa2ca0b71d8bb701dcb730959c74e728.png)

请帮我...

谢谢你

# iphone - IOS/Iphone 人脸识别

> ID：11272805
> 
> 赞同：0
> 
> 时间：2012-06-30T08:48:36.673
> 
> 标签：iphone, ios, augmented-reality, face-recognition

> **可能重复：**
> [如何在 iOS 上执行面部识别？](https://stackoverflow.com/questions/8020842/how-can-i-perform-facial-recogntion-on-ios)

使用 IOS5 的 iPhone 可以进行人脸检测。我们如何实现人脸识别。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T13:39:44.740

OpenCV 非常适合人脸识别，但我相信 Core Image 是一个更简单的选择。Core Image 有[CIDetector](http://developer.apple.com/library/mac/#documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html)和[CIFaceFeature等类](http://developer.apple.com/library/ios/#documentation/CoreImage/Reference/CIFaceFeature/Reference/Reference.html)

查看 Core Image 人脸检测的这些教程：

*   [iOS 5 使用 Core Image 进行人脸检测](http://www.bobmccune.com/2012/03/22/ios-5-face-detection-with-core-image/)
*   [在 iOS 5 中使用 Core Image 轻松进行人脸检测](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)

希望这可以帮助！

# python - Python 的 argparse 选择限制了打印

> ID：11272806
> 
> 赞同：3
> 
> 时间：2012-06-30T08:48:43.137
> 
> 标签：python, argparse

目前我希望 Python 的 argparse 模块只打印出 '1 - 65535' 而不是 {1, 2, 3, ... 65535}，但文档似乎没有为此提供任何方法。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T08:51:56.207

[`formatter_class`您可以通过设置选项](http://docs.python.org/library/argparse.html#formatter-class)来更改默认设置的格式。

我会[继承 HelpFormatter 类](http://hg.python.org/cpython/file/2.7/Lib/argparse.py#l147)来改变它格式化你的`choices`值的方式。这个类正式是一个“实现细节”，但我怀疑它会随着新的 python 版本发生很大变化。

该[`_metavar_formatter`方法](http://hg.python.org/cpython/file/2.7/Lib/argparse.py#l555)格式化`{1, 2, ..., 65535}`字符串，您的子类可以覆盖它：

```
class RangeChoiceHelpFormatter(HelpFormatter):
    def _metavar_formatter(self, action, default_metavar):
         if action.metavar is not None:
             result = action.metavar
         elif action.choices is not None:
             result = '{%s .. %s}' % (min(action.choices), max(action.choices])
         else:
             result = default_metavar

          def format(tuple_size):
              if isinstance(result, tuple):
                  return result
              else:
                  return (result, ) * tuple_size
          return format 
```

另一种选择是*不对*如此大的范围使用`choices`参数，而是定义一个新的[参数类型](http://docs.python.org/library/argparse.html#type)。

这只是一个可调用的，传递了一个字符串，引发了`argparse.ArgumentTypeError`，`TypeError`或者`ValueError`如果字符串不能转换为目标类型，或者转换后的值：

```
class IntRange(object):
    def __init__(self, start, stop=None):
        if stop is None:
            start, stop = 0, start
        self.start, self.stop = start, stop

    def __call__(self, value):
        value = int(value)
        if value < self.start or value >= self.stop:
            raise argparse.ArgumentTypeError('value outside of range')
        return value 
```

您可以将其用作参数类型，如下所示：

```
parser.add_argument('foo', type=IntRange(1, 65536)) 
```

并调整您的帮助消息以指示可以接受的值。

# asp.net-mvc-3 - ajax 不刷新 mvc3 中的页面

> ID：11272808
> 
> 赞同：1
> 
> 时间：2012-06-30T08:49:43.460
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我有 2 个单选按钮 1 接受工作并提供文件上传选项，第二个按钮将不提供文件上传选项

单击提交时，此数据将保存在数据库中

我为此编写了ajax函数如下：

```
 $(document).ready(function () {
            $('#rmrkRjct').click(function () {
        var url1 = "/Mycontroller/function1";
        $.ajax({
            type: "POST",
            url: url1,
            success: function () {

            }
        });
    }); 
```

这是调用我的函数 bt 没有显示更新的视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T08:57:11.817

你似乎没有在你的`success`回调中做太多事情。它是空的。因此，当 AJAX 请求完成时，这个空虚被执行并且你得到了预期的结果：什么都没有发生。如果您调用的控制器操作返回一些部分视图，您可能希望用它刷新您的 DOM：

```
success: function (result) {
    $('#id_of_some_element_that_you_want_to_refresh').html(result);
} 
```

# java - 有没有一种简单的方法来显示（收到）传入的多部分邮件（电子邮件）？

> ID：11272811
> 
> 赞同：0
> 
> 时间：2012-06-30T08:50:30.387
> 
> 标签：java, email, frameworks

**我正在开发一个 Java Web 应用程序，在某些情况下我必须显示传入邮件的内容。**它可以是任何类型的邮件（普通邮件、多部分邮件）。

你可以猜到我对 text/plain 或 text/html 没有任何问题。我什至设法显示多部分电子邮件的文本部分。但...

当我想显示内联图像和/或处理附件（使它们可下载）时，问题就出现了。

**基本上，我正在寻找一个可以通过将邮件解析为更易于处理甚至显示的格式（？）来帮助我工作的框架。**

请注意，目前我一般不会寻求有关 java 邮件 API 的帮助。我只是不想自己实现这一点。

提前致谢！戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:43:51.913

请在以下帖子中查看我的解决方案： [Java Mail - 以字符串形式读取附件](https://stackoverflow.com/questions/12054093/java-mail-read-in-the-attachment-as-string/12057124#12057124)

（社区维基回答）

# scala - Scala：为什么 PECS 原则不适用于 Function1？

> ID：11272819
> 
> 赞同：3
> 
> 时间：2012-06-30T08:51:52.090
> 
> 标签：scala

在 Effective Java 中，Joshua Bloch 讨论了 PECS（Producer-Extends，Consumer-Super）的原理。

我对此的理解是，为了增加 API 的灵活性，输入（产生的集合）应该是协变的，输出（消费的集合）应该是逆变的。

实现此原则的函数可以具有以下签名：

```
private static void func( ArrayList<? extends Object> input, ArrayList<? super Integer> output) 
```

但是，在 Scala 中，Function1 trait 具有以下签名：

```
trait Function1[-T1, +R] extends AnyRef 
```

T1（输入类型）是逆变的，而 R（输出类型）是协变的。

我的理解正确吗？如果是这样，为什么 PECS 没有应用于 Scala 的 Function1 特征？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T02:35:27.437

Joshua 是正确的，Scala 也是如此。事实上，Scala 强制执行此规则，因此您无需担心。Java，因为它没有方差注释并且必须在调用站点处理存在性，所以需要它们来指导程序员进行正确的设计。

Scala 在定义站点有方差注释，而 java 在调用站点有存在论。调用的输出是定义的输入，反之亦然。

A`Function1`没有从它的参数中读取，也没有写入它的结果，这就是`reduce`在 Joshua 的例子中所做的。相反，您必须将其`Function1` *视为*一个集合。

当您写入集合时，该集合是消费者。与函数类似：当您调用它时，您正在写入它。因此，正在写入的输入参数必须是逆变的。

同样，当您从集合中读取时，该集合就是生产者。您通过查看函数的结果来读取函数，因此输出参数必须是协变的。

如您所见，这正是`Function1`符号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T10:33:06.517

通配符`func`适用于传递给方法的类型。它们意味着任何 ArrayList 都可以作为输入传递`ArrayList<Object>`，`ArrayList<Number>`也`ArrayList<Integer>`可以作为输出传递。该方法本身不是通用的。

对于 scala Function1 类型，差异适用于类型，因此`Function1[AnyRef, Integer]`可以在`Function[AnyRef, Number]`需要 a 的地方使用 a 。

# android - Android中的垂直和水平手势

> ID：11272821
> 
> 赞同：8
> 
> 时间：2012-06-30T08:51:57.703
> 
> 标签：android, android-layout

我希望我的 GestureOverlayView 能够检测纯水平和垂直手势。

来自[http://android-developers.blogspot.com/2009/10/gestures-on-android-16.html](http://android-developers.blogspot.com/2009/10/gestures-on-android-16.html)

> "orientation：表示下方视图的滚动方向。在这种情况下，列表垂直滚动，这意味着任何水平手势（如action_delete）都可以立即被识别为手势。以垂直笔划开头的手势必须至少包含一个要识别的水平组件。换句话说，不能将简单的垂直线识别为手势，因为它会与列表的滚动冲突。

似乎是一个 catch-22，如果 android:orientation 设置为垂直，我只能进行水平滑动，如果 android:orientation 设置为水平，我只能进行垂直滑动。我怎样才能绕过这个要求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T10:01:21.117

我在一次黑客马拉松上遇到了这个问题。没有办法用 GestureOverlayView 解决它，所以你必须使用运动事件。然而，GestureOverlayView 可以使用更“详细”的手势，比如一个圆圈。我注意到的是 GestureOverlayView 最适合封闭的人物。所以，motionEvent 传感器就是这样。[我在这里](https://stackoverflow.com/questions/937313/android-basic-gesture-detection/938657#938657)找到了代码。我也修改了 Gav 对垂直滑动的回答。虽然还没有测试过，但肯定它应该可以工作。

这是一个例子：

```
public class SelectFilterActivity extends Activity implements OnClickListener
{

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;
View.OnTouchListener gestureListener;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* ... */

    // Gesture detection
    gestureDetector = new GestureDetector(new MyGestureDetector());
    gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    };

}

class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            // downward swipe
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY)
                Toast.makeText(SelectFilterActivity.this, "Downward Swipe", Toast.LENGTH_SHORT).show();
 else if (Math.abs(e2.getY() - e1.getY()) > SWIPE_MAX_OFF_PATH && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY)
                Toast.makeText(SelectFilterActivity.this, "Upward Swipe", Toast.LENGTH_SHORT).show();
            // right to left swipe
            else if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(SelectFilterActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(SelectFilterActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }

} 
```

现在将其添加到您想要进行手势检测的视图中，

```
// Do this for each view added to the grid
    imageView.setOnClickListener(SelectFilterActivity.this); 
    imageView.setOnTouchListener(gestureListener); 
```

[为Gav](https://stackoverflow.com/users/111734/gav)的代码干杯！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T11:06:09.967

您所要做的就是将 GestureStrokeAngleThreshold 设置为接近 90 的值（我使用的是 90f）

角度阈值的默认值为 40.0f，因此您的简单垂直手势将被跳过

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T05:10:13.747

你看过[http://developer.android.com/training/gestures/index.html](http://developer.android.com/training/gestures/index.html)吗？我需要更多关于您尝试使用水平和垂直手势做什么的信息，以提供更具体的建议。但是有一个触摸区域可以通过水平滑动来做一件事，而通过垂直滑动来做另一件事是绝对可能的。重要的是不要寻找完美的直线，因为您的用户将无法制作它们。

编辑（1）：你看过[http://www.vogella.com/articles/AndroidGestures/article.html](http://www.vogella.com/articles/AndroidGestures/article.html)吗？Vogella 似乎在用他的例子暗示你可以在`GestureOverlayView`. 这是你想要做的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:02:18.833

也许不是最好的方法，但您可以通过扩展来覆盖默认行为`GestureOverlayView`

您需要覆盖该`private Rect touchMove(MotionEvent event)`方法并摆脱方向检查：

```
if (box.squareness > mGestureStrokeSquarenessTreshold ||
    (mOrientation == ORIENTATION_VERTICAL ?
        angle < mGestureStrokeAngleThreshold :
        angle > mGestureStrokeAngleThreshold)) {

    mIsGesturing = true;
    ...
    ...
} 
```

这是唯一使用方向的地方，因此无需进行大量修改。只是一个简单的扩展/覆盖。

当然，要做到这一点*，*你会添加一个`ORIENTATION_NONE`并检查它，就像他们为[Replicant Project](http://replicant.us/)所做的那样，但我想这取决于你是否会再次需要该功能。

# android - 布局问题，希望底部的按钮保持静止并且仍然能够从以前的视图中读取

> ID：11272827
> 
> 赞同：0
> 
> 时间：2012-06-30T08:52:38.467
> 
> 标签：android, layout, scrollview, android-relativelayout

这种问题很难搜索，最好用图像来解释。这是我目前的形象。 ![底部按钮但无法读取 String4 的值](../Images/19b526332abc173f3dfdc6d79d7a246a.png)

按钮位于底部，但我无法读取 String4 的值。我尝试了 padding、layout_margin 、更改 layout_width 和 layout_height 等，但徒劳无功。有人能帮我一下吗？任何类型的信息表示赞赏。

我的布局是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/labelInfo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/priceInfo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/description"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/brand"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </LinearLayout>
    </ScrollView>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/goToUrl"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"

            android:text="@string/buy" />
    </RelativeLayout>

</RelativeLayout> 
```

请注意有滚动条，因为第一个 TextView 的值可能很长。我知道一个解决方案是使用 Listview，但我将其保留为最后的手段。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:29:40.153

首先制作**footer.xml**如下图

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/footer_bar"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

android:layout_gravity="bottom">

<LinearLayout
    android:id="@+id/footer_bar_bg"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:orientation="horizontal"
    android:minHeight="50dp"
     android:layout_alignParentBottom="true" android:layout_centerHorizontal="true">

<Button
    android:id="@+id/footer_my_account"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_gravity="right"
    android:layout_toRightOf="@+id/sepview2"
    android:layout_weight="0.35"
    android:text="My Account"

    />

</LinearLayout>
</RelativeLayout> 
```

在此更改您的布局后，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

     >
<include layout="@layout/footer"   android:layout_alignParentBottom="true"   /> 
 <ScrollView

   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:layout_alignParentTop="true"
   android:layout_above="@+id/footer_bar_bg"
   android:layout_marginBottom="50dp"
 >
        <LinearLayout   
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:orientation="vertical" >

            <TextView
               android:id="@+id/labelInfo"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content" 
               android:textColor="#fff"
               android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc"
               />

            <TextView
               android:id="@+id/priceInfo"
               android:layout_width="fill_parent"
               android:textColor="#fff"
               android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc"

               android:layout_height="wrap_content" />

            <TextView
               android:id="@+id/description"
               android:layout_width="fill_parent"
               android:textColor="#fff"
               android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc"

               android:layout_height="wrap_content" />

            <TextView
               android:id="@+id/brand"
               android:layout_width="fill_parent"
               android:textColor="#fff"
               android:text="cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc"

               android:layout_height="wrap_content" />
        </LinearLayout>
    </ScrollView> 

</RelativeLayout> 
```

# ios - applicationDidBecomeActive：无法推送适当的视图

> ID：11272830
> 
> 赞同：0
> 
> 时间：2012-06-30T08:53:15.720
> 
> 标签：ios, pushviewcontroller, application-state

参考我的问题[，在收到服务器请求的响应后一定时间间隔后更改选项卡视图](https://stackoverflow.com/questions/11242816/change-tab-view-after-certain-time-interval-received-as-response-from-server-req)，我使用以下代码显示应用程序进入活动状态时的会话超时消息

AppDelegate.m 中的方法：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // to check the session
    XTabViewController *XTabViewCon = [[XTabViewController alloc] init];
    [XTabViewCon pushViewUponCheckedSession];
    [XTabViewCon release];
} 
```

XTabViewController.m 中的方法

```
- (void)pushViewUponCheckedSession {
    //THIS IS VERY IMPORTANT. IT CHECKS FOR SESSION
    if ([[[ApplicationContext alloc] dataManager ] checkSession]) {
        [self showSessionAliveView];
        //here I can write something that will push a view that was seen last before leaving app to inactive state. May be NSNotification could help me
    }
    else {
        [self showSessionTimeOutView];
    }
}
- (void)showSessionTimeOutView {
    //show activity indi
    waitingIndicator = [[MyWaitingIndicator alloc]init];
    [self.view addSubview:waitingIndicator];
    [waitingIndicator setHidden:YES];
    [waitingIndicator stopAnimating];
    //push session timeout view
    SessionTimeOutViewController *sessionTimeOutView = [[SessionTimeOutViewController alloc] init];
    [[self navigationController] pushViewController:sessionTimeOutView animated:NO];
    [sessionTimeOutView release];
    [waitingIndicator release];
}

- (void)showSessionAliveView {
    SessionAliveView *sessionAliveViewList = [[SessionAliveView alloc] init];
    [[self navigationController] pushViewController:sessionAliveViewList animated:YES];
    [sessionAliveViewList release];
} 
```

我的问题是：

`pushViewUponCheckedSession`当我在选项卡之间切换以检查会话是否过期时使用它时，它（ ）工作正常。

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    //if X Tab is selected then & only then call this method
    if (tabBarController.selectedIndex == 2) {
         [XTabViewCon pushViewUponCheckedSession];
    }

} 
```

**但它无法在checkedSession 上显示SessionTimeOutViewController 的视图** 当应用程序进入活动状态时，我是否需要执行诸如刷新先前视图之类的操作。然后通过检查会话来填充适当的视图。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:39:32.720

Releasing XTabViewCon just after your method call is dangerous no ? You have to be sure that your aren't using your object before releasing it.

# sql-server - 在 SQL Server 中更改“默认”

> ID：11272831
> 
> 赞同：3
> 
> 时间：2012-06-30T08:53:21.587
> 
> 标签：sql-server, sql-server-2008-r2

我`default`在 SQL Server 2008 表中有自定义值。

与此类似

```
CREATE DEFAULT [dbo].[Default_Timestamp]
AS 
   GetDate() 
```

现在我想更改该默认值。

```
CREATE DEFAULT [dbo].[Default_Timestamp]
AS 
   GETUTCDATE() 
```

在我可以编辑现有的之前，我需要删除第一个并重新创建它。

```
DROP DEFAULT [dbo].[Default_Timestamp] 
```

它给出了以下错误。

> 消息 3716，级别 16，状态 3，第 4 行
> 默认的“dbo.Default_Timestamp”无法删除，因为它绑定到一个或多个列。

由于默认值已被少数表使用，因此我无法删除并重新创建一个新表。

我知道在重新创建它之前，我需要从这个默认值中取消绑定所有表。

任何人都可以提供一个脚本来列出与该默认值绑定的所有表和列吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:08:56.447

这是一个多步骤的过程：

1）找到`object_id`您的默认值：

```
DECLARE @DefaultObjectID INT
SELECT @DefaultObjectID = OBJECT_ID('Default_Timestamp') 
```

2）查找引用该默认值的所有列：

```
SELECT 
    ColumnName = c.Name,
    TableName = t.Name,
    UnbindCmd = 'EXEC sp_unbindefault ''' + t.Name + '.' + c.name + ''''
FROM sys.columns c
INNER JOIN sys.tables t ON c.object_id = t.object_id
WHERE default_object_id = @DefaultObjectID 
```

这将生成一个`UnbindCmd`命令列表，以实际`DEFAULT`从这些列中删除 。

3) 现在，从您的 SQL Server Mgmt Studio 窗口中复制该列，并在新的查询窗口中执行它以实际“取消绑定”所有这些列的默认值

4) 现在定义你的新默认值

**但是：**这些天来，我本身可能*不会*定义一个新`DEFAULT`的 - 你不能直接在有问题的列上设置默认约束吗？

```
ALTER TABLE dbo.YourTable
ADD CONSTRAINT DF_YourTable_TimeStamp
DEFAULT GETUTCDATE() FOR YourColumnName 
```

似乎更容易进入未来！当您明确命名您的约束时，如果需要，您还可以轻松找到并再次删除该约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-03T16:00:10.453

当我在我的数据库中发现一些旧样式默认值时，我遇到了这个问题，我必须在我的数据库中大量更新uses_ansi_nulls 和uses_quoted_identifier。

这是我最终编写的代码，用于将旧样式默认值 (CREATE DEFAULT sp_BindDefault) 替换为新样式 (ALTER TABLE)。

```
DECLARE @strSQL varchar(max)
        , @DBName varchar(50) = DB_NAME();

DROP TABLE IF EXISTS #tmp;

SELECT  IDENTITY(int, 1,1) AS ID,
        UnbindCmd = 'EXEC sp_unbindefault ''' + t.Name + '.' + c.name + ''';',
        DropCmd = 'DROP DEFAULT IF EXISTS [' + SCHEMA_NAME(SO.schema_id) + '].[' + OBJECT_NAME(SO.object_id) + '];',
        CreateCmd = 'ALTER TABLE [' + SCHEMA_NAME(t.Schema_id) + '].[' + t.Name + ']'
                    + ' ADD CONSTRAINT df_' + REPLACE(t.Name, ' ', '') + '_' + REPLACE(c.Name, ' ', '')
                    + ' DEFAULT (' + RIGHT(m.definition, LEN(m.definition) - CHARINDEX(' AS ', m.definition) - 3)
                    + ') FOR ' + QUOTENAME(c.Name) + ';'
INTO    #tmp
FROM    sys.sql_modules m
        join sys.columns c on c.default_object_id = m.object_id
        INNER JOIN sys.tables t ON c.object_id = t.object_id
        JOIN sys.objects SO ON SO.object_id = C.default_object_id
WHERE   (m.uses_ansi_nulls = 0 
        OR m.uses_quoted_identifier = 0)
ORDER BY
        t.name
        , c.name;

BEGIN TRANSACTION
    BEGIN TRY
        DECLARE UnbindCursor CURSOR LOCAL FAST_FORWARD
        FOR SELECT  UnbindCmd
            FROM    #tmp
            ORDER BY
                    ID;

        OPEN UnbindCursor;

        FETCH NEXT FROM UnbindCursor INTO @strSQL;

        WHILE @@FETCH_STATUS = 0
            BEGIN
                EXEC (@strSQL);

                FETCH NEXT FROM UnbindCursor INTO @strSQL;
            END

        CLOSE UnbindCursor;
        DEALLOCATE UnbindCursor;

        DECLARE DropCursor CURSOR LOCAL FAST_FORWARD
        FOR SELECT  DropCmd
            FROM    #tmp
            GROUP BY
                    DropCmd
            ORDER BY
                    MIN(id)

        OPEN DropCursor;

        FETCH NEXT FROM DropCursor INTO @strSQL;

        WHILE @@FETCH_STATUS = 0
            BEGIN
                EXEC (@strSQL);

                FETCH NEXT FROM DropCursor INTO @strSQL;
            END

        CLOSE DropCursor;
        DEALLOCATE DropCursor;

        DECLARE CreateCursor CURSOR LOCAL FAST_FORWARD
        FOR SELECT  CreateCmd
            FROM    #tmp
            ORDER BY
                    id

        OPEN CreateCursor;

        FETCH NEXT FROM CreateCursor INTO @strSQL;

        WHILE @@FETCH_STATUS = 0
            BEGIN
                EXEC (@strSQL);

                FETCH NEXT FROM CreateCursor INTO @strSQL;
            END

        CLOSE CreateCursor;
        DEALLOCATE CreateCursor;

        COMMIT TRANSACTION
    END TRY
    BEGIN CATCH
        DECLARE @ErrorMessage nvarchar(4000)
                , @ErrorSeverity int
                , @ErrorState int;

        SELECT   
            @ErrorMessage = ERROR_MESSAGE(),
            @ErrorSeverity = ERROR_SEVERITY(),  
            @ErrorState = ERROR_STATE();  

        IF XACT_STATE() <> 0 ROLLBACK TRANSACTION;

        RAISERROR (@ErrorMessage, -- Message text.  
                    @ErrorSeverity, -- Severity.  
                    @ErrorState -- State.  
                    );  
    END CATCH 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T11:37:02.180

`default_object_id`您可以通过查看in找到使用默认对象的列[`sys.columns`](http://msdn.microsoft.com/en-us/library/ms176106.aspx)：

> 默认对象的 ID，无论它是独立对象 sys.sp_bindefault，还是内联、列级 DEFAULT 约束。

知道这一点很容易构建一个脚本，该脚本将所有列与默认对象解除绑定，并将默认值替换为基于约束的默认值：

```
use master;
go

if db_id('test') is not null
    drop database test;
go

create database test;
go

use test;
go

create default foo as 1;
go

create table t1 (a int);
create table t2 (b int);
go

exec sp_bindefault 'foo', 't1.a';
exec sp_bindefault 'foo', 't2.b';
go

drop default foo;
-- Msg 3716, Level 16, State 3, Line 2
-- The default 'foo' cannot be dropped because it is bound to one or more column.
go

declare crs cursor static forward_only read_only for
select object_schema_name(object_id) as schema_name,
        object_name(object_id) as object_name,
        name as column_name
    from sys.columns where default_object_id = object_id('foo');
open crs;

declare @schema_name sysname, @object_name sysname, @column_name sysname, @sql nvarchar(max);

fetch next from crs into @schema_name, @object_name, @column_name;
while @@fetch_status = 0
begin
    set @sql = N'exec sp_unbindefault ' + quotename(
        quotename(@schema_name) + N'.'+
        quotename(@object_name) + N'.'+
        quotename(@column_name), '''');
    print @sql;
    exec sp_executesql @sql;
    set @sql = N'alter table ' +
        quotename(@schema_name) + N'.' + 
        quotename(@object_name) + N' add constraint ' + 
        quotename(N'default_' + @column_name) + N' default 2 for ' +
        quotename(@column_name);
    print @sql;
    exec sp_executesql @sql;
    fetch next from crs into @schema_name, @object_name, @column_name;
end

close crs;
deallocate crs;
go

drop default foo;
-- it now succeeds
go 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T11:07:25.277

我从未将 CREATE DEFAULT 或 DROP DEFAULT 视为独立命令，但只知道添加或删除默认约束的 CONSTRAINT 子句。

SSMS 2008 生成以下代码（在表设计器中单击鼠标右键，“生成更改脚本...”）：

```
ALTER TABLE dbo.T ADD CONSTRAINT
    DF_T_DateTimeColumn DEFAULT getdate() FOR DateTimeColumn
GO

ALTER TABLE dbo.T
    DROP CONSTRAINT DF_T_DateTimeColumn
GO
ALTER TABLE dbo.T ADD CONSTRAINT
    DF_T_DateTimeColumn DEFAULT getutcdate() FOR DateTimeColumn
GO 
```

更新：

我承认，我从未使用过 EXEC sp_bindefault，但我认为不鼓励使用它，正如[MSDN](http://msdn.microsoft.com/en-us/library/ms177503.aspx)所说：

> 此功能将在 Microsoft SQL Server 的未来版本中删除。不要在新的开发工作中使用此功能，并尽快修改当前使用此功能的应用程序。我们建议您改用 ALTER TABLE 或 CREATE TABLE 语句的 DEFAULT 关键字来创建默认定义。

当然，这也适用于[sp_unbindefault](http://msdn.microsoft.com/en-us/library/ms188913.aspx)。

# paypal - PayFlow 定期付款退款

> ID：11272834
> 
> 赞同：4
> 
> 时间：2012-06-30T08:53:57.647
> 
> 标签：paypal, recurring, payflowpro, payflowlink

当我使用 PayFlow 定期付款时，是否可以在最后一次交易中通过 PayPal PayFlow API 进行退款。谢谢， 马切克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-03T05:36:14.337

对此的简单回答是“是”。

您需要像正常交易一样记入贷方。参数是：

```
USER
VENDOR
PARTNER
PWD
TENDER=C // C = credit card, P = PayPal
TRXTYPE=C //  S = Sale transaction, A = Authorisation, C = Credit, D = Delayed Capture,
ORIGID=XXXX // ORIGID to the PNREF value returned from the original transaction 
```

然后您可能需要取消重复交易以阻止它再次发生。参数是：

```
USER
VENDOR
PARTNER
PWD
ACTION=C // C = Cancel
TRXTYPE=R //  R = Recurring
ORIGPROFILEID=XXXX // Original Profile ID (of the recurring transaction) 
```

[https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_payflowpro_recurringbilling_guide.pdf](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_payflowpro_recurringbilling_guide.pdf)

# sql-server - 执行过程时从字符串转换日期时间时转换失败

> ID：11272836
> 
> 赞同：0
> 
> 时间：2012-06-30T08:54:12.890
> 
> 标签：sql-server, oracle, procedure

我需要你的支持来解决转换问题。我喜欢的代码

```
ALTER PROCEDURE [WORKFLOW_APP].[DIAGNOSISCD_CAR]
        @v_monthstr    CHAR ,
        @v_monthend    CHAR ,
        @v_year        CHAR ,
        @v_state_cd    CHAR ,
        @v_claim_key   CHAR ,
        @v_contractor  CHAR

DECLARE @v_makedatestr   VARCHAR(10)
DECLARE @v_makedateend   VARCHAR(10)

SELECT @v_makedatestr  = '01-' + @v_monthstr + '-' + @v_year
SELECT @v_makedateend  = '01-' + @v_monthend + '-' + @v_year

SELECT @v_datebegin  = CONVERT(DATETIME, @v_makedatestr,105)----error
SELECT @v_dateend  = DATEADD(D, -DAY(DATEADD(M, 1, CONVERT(DATETIME, @v_makedateend ,105))), DATEADD(M, 1, CONVERT(DATETIME, @v_makedateend ,105)))---error 
```

该代码使用工具形成并手动更改了某处。

我正进入（状态

> '从字符串转换日期时间时转换失败。'

在“错误”评论。

我尝试使用转换、转换函数但无法解决。

任何人都建议错误并为该错误编写适当的转换代码。

我正在将 Oracle 存储过程转换为 SQL Server 2005。

我正在使用 SQL Server Management Studio Express 2005。

上面的代码有什么问题，正确的代码是什么？

任何代码？??????////// 用于正确转换

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:09:12.060

如果您在具有不同文化相关设置的服务器中运行脚本，则将字符串转换为日期时间的方式可能会导致不同的结果。

对于作为字符串的日期时间，我建议您遵循从年份开始构建字符串的规则，然后是月份，依此类推`yyyy-MM-dd`...。

```
SELECT @v_makedatestr  = @v_year + '-' + @v_monthstr + '-01' 
SELECT @v_makedateend  = @v_year + '-' + @v_monthend + '-01' 
```

然后你可以做一个演员：

```
cast(@v_makedatestr as datetime);
cast(@v_makedateend as datetime); 
```

# java - 不推荐使用 findPreference() 方法？- 安卓

> ID：11272839
> 
> 赞同：49
> 
> 时间：2012-06-30T08:54:48.503
> 
> 标签：java, android, android-fragments, deprecated, android-preferences

我想检测 a`Preference`中包含的 a何时`ListView`被点击，以便我可以启动一个意图来管理该选择。

我会在我的布局`XML`文件中这样做：

```
<Preference android:title="About" android:key="myKey"></Preference> 
```

我的`java`代码中包含以下内容：

```
Preference myPref = (Preference) findPreference("myKey");
myPref.setOnPreferenceClickListener(new OnPreferenceClickListener() {
             public boolean onPreferenceClick(Preference preference) {
                 //open browser or intent here
             }
         }); 
```

但该方法[`public Preference findPreference (CharSequence key)`](http://developer.android.com/reference/android/preference/PreferenceGroup.html#findPreference%28java.lang.CharSequence%29)已被弃用。

1.  是否有未弃用的等价物？
2.  如果没有，如果我仍然使用它怎么办？
3.  如何`Fragments`帮助我以更好的方式完成我的任务？在这里检查：[不推荐使用方法的首选项](https://stackoverflow.com/questions/6503496/preferences-without-deprecated-methods)。

* * *

在这里您可以检查`XML`我的活动具有的布局结构，以及应用程序的快照：

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <Preference 
        android:key="about" 
        android:title="@string/titleAbout" 
        android:summary="@string/summaryAbout" 
    />

    <Preference 
        android:key="labelTaxonomy" 
        android:title="@string/titleLabelTaxonomy" 
        android:summary="@string/summaryLabelTaxonomy" 
    />

</PreferenceScreen> 
```

**快照：**

![快照](../Images/185319d0a6f03a15390a9a7fe96337fe.png)

单击 About（或 Access Label Taxonomy）`Preference`后，我想打开`intent`某种类型的（也可能是视频或其他任何内容……名称具有误导性）。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-30T11:46:58.627

> 是否有未弃用的等价物？

如果你`PreferenceFragment`在 API Level 11+ 设备上使用，你会调用`findPreference()`它。否则，请致电`findPreference()`您的`PreferenceActivity`，因为您别无选择。

> 如果没有，如果我仍然使用它怎么办？

它会起作用的。

> Fragments 如何帮助我以更好的方式完成任务？

API 级别 11+`PreferenceFragment`作为构建`PreferenceActivity`. 欢迎您使用它们，但如果您仍然支持旧设备，则不能`PreferenceFragment`用于这些设备。

话虽如此：

> 我想检测何时单击 ListView 中包含的首选项，以便我可以启动管理该选择的意图。

为此，您不需要 Java 代码。利用：

```
 <PreferenceScreen
            android:title="@string/title_intent_preference"
            android:summary="@string/summary_intent_preference">

        <intent android:action="android.intent.action.VIEW"
                android:data="http://www.android.com" />

    </PreferenceScreen> 
```

[（如JavaDocs 中`PreferenceActivity`](http://developer.android.com/reference/android/preference/PreferenceActivity.html)所见）

这将在首选项 UI 中创建一个条目，单击该条目时，将使用指定的`Intent`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-11T13:14:55.003

如果您使用片段，则可以在首选项片段的基础上使用方法“findPreference()”。

```
public class CustomActivity extends PreferenceActivity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_custom);

      CustomFragment customFragment = (CustomFragment) getFragmentManager().findFragmentById(R.id.custom_fragment);
      EditTextPreference textPreference = (EditTextPreference) customFragment.findPreference("preference_key");

      textPreference.setOnPreferenceClickListener(new OnPreferenceClickListener() {
         public boolean onPreferenceClick(Preference preference) {
             //open browser or intent here
         }
     });
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-22T16:47:14.007

**2018 更新** 今天，`onPreferenceTreeClick`为此必须在 Preference 片段中覆盖该方法。例如：

```
public class MySettingsFragment extends PreferenceFragment {

    @Override
    public boolean onPreferenceTreeClick (PreferenceScreen preferenceScreen,
                                          Preference preference)
    {
        String key = preference.getKey();
        if(key.equals("someKey")){
            // do your work
            return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-15T10:48:03.690

也许[文档](http://developer.android.com/reference/android/preference/PreferenceActivity.html)链接不清楚。但是使用该功能非常简单。例如，您可以将其用作这样的 twitter 页面

```
<PreferenceCategory android:title="Share" >
 <PreferenceScreen
        android:title="Twitter"
        android:summary="Follow me at Twitter">

    <intent android:action="android.intent.action.VIEW"
            android:data="https://twitter.com/" />

</PreferenceScreen>
</PreferenceCategory> 
```

它不需要任何java代码。感谢CommonsWare！

# iphone - 向上滚动时使 UIScrollView 中的 UIView 粘在顶部

> ID：11272847
> 
> 赞同：18
> 
> 时间：2012-06-30T08:56:12.770
> 
> 标签：iphone, objective-c, ios, ipad, uiscrollview

因此，在 UITableView 中，当您有部分时，部分视图会粘在顶部，直到下一部分与其重叠，然后将其替换在顶部。我想要一个类似的效果，基本上我的 UIScrollView 中有一个 UIView，代表 UIView 部分以及它何时到达顶部。我希望它留在那里而不是被抬高。我该怎么做呢？我认为这需要在 layoutSubviews 或 scrollViewDidScroll 中完成，并对 UIVIew 进行操作..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-27T09:52:08.097

要在 UIScrollView 中创建 UIView 在向上滚动时粘在顶部，请执行以下操作：

```
func createHeaderView(_ headerView: UIView?) {
    self.headerView = headerView
    headerViewInitialY = self.headerView.frame.origin.y
    scrollView.addSubview(self.headerView)
    scrollView.delegate = self
}

func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let headerFrame = headerView.frame
    headerFrame.origin.y = CGFloat(max(headerViewInitialY, scrollView.contentOffset.y))
    headerView.frame = headerFrame
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-22T20:03:49.400

基于 EVYA 响应的 Swift 解决方案：

```
var navigationBarOriginalOffset : CGFloat?

override func viewWillAppear(animated: Bool) {
    super.viewWillAppear(animated)
    navigationBarOriginalOffset = navigationBar.frame.origin.y
}

func scrollViewDidScroll(scrollView: UIScrollView) {
    navigationBar.frame.origin.y = max(navigationBarOriginalOffset!, scrollView.contentOffset.y)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-06T10:16:17.187

Evya 的解决方案效果很好，但是如果您使用 Auto Layout，则应该执行以下操作（Auto Layout 语法是用[Masonry](https://github.com/Masonry/Masonry)编写的，但您明白了。）：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

    //Make the header view sticky to the top.
    [self.headerView mas_remakeConstraints:^(MASConstraintMaker *make) {
        make.top.equalTo(self.scrollView.mas_top).with.offset(scrollView.contentOffset.y);
        make.left.equalTo(self.scrollView.mas_left);
        make.right.equalTo(self.scrollView.mas_right);

        make.height.equalTo(@(headerViewHeight));
    }];

    [self.scrollView bringSubviewToFront:self.headerView];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T14:29:04.600

如果我没记错的话，[2010 WWDC ScrollView](https://developer.apple.com/videos/wwdc/2010/?id=104)演示文稿准确地讨论了如何在其他元素围绕它滚动时将视图保持在固定位置。观看视频，您应该有一个明确的实施方法。

它本质上是基于 scrollViewDidScroll 回调来更新帧（尽管内存在细节上有点模糊）。

# c++ - 调用函数覆盖值

> ID：11272850
> 
> 赞同：-2
> 
> 时间：2012-06-30T08:56:50.407
> 
> 标签：c++

我有几个作为结构实现的配置标志。我创建一个对象。我用标志调用对象的方法，最终触发两个标志之间的比较。但是，此时，其中一个标志已被某种方式覆盖。

为了澄清，这是一个非常简化的代码版本，应该说明我所看到的：

```
class flag_type { unsigned int flag; /*more stuff*/ };
flag_type FLAG1
flag_type FLAG2

class MyObject {
    public:
        void method1(const flag_type& flag_arg) {
            //conditionals, and then:
            const flag_type flag_args[2] = {flag_arg,flag_arg};
            method2(flag_args);
        }
        void method2(const flag_type flag_args[2]) {
            //conditionals, and then:
            method3(flag_args[0]);
        }
        void method3(const flag_type& flag_arg) { //Actually in a superclass
            //stuff
            if (flag_arg==FLAG1) { /*stuff*/ }
            //stuff
        }
};

int main(int argc, const char* argv[]) {
    //In some functions called by main:
    MyObject* obj = new MyObject();

    //Later in some other functions:
    obj->method1(FLAG1);
} 
```

使用调试器和打印语句，我可以确认 FLAG1 和 flag_arg/flag_args 在“method1”和“method2”中都很好。但是，当我到达方法 3 时，“FLAG1.flag”已损坏，因此比较失败。

现在，虽然我通常不这样做，而且它通过了 MSVC 在最严格设置下的静态代码分析，但对我来说，这看起来像是缓冲区溢出的行为。

我通过查看没有发现任何此类错误，但当然通常不会。我的问题是
A：我在其他地方搞砸了吗？我意识到我没有分享任何真正的代码，但我已经错过了什么吗？这个方案在我重写大部分代码之前就已经奏效了。
B：有没有比更仔细地挑选代码直到找到它更简单的方法？该代码是跨平台的，所以我已经将其设置为在 Ubuntu 机器上使用 Valgrind 进行检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:56:18.557

感谢那些试图提供帮助的人。不过，应该注意的是，该代码仅*用于说明目的*；我从头开始输入它以显示一般情况正在发生；不编译。回想起来，我意识到要求人们在这么少的信息上解决它是不公平的——尽管我的实际问题“有没有比更仔细地挑选代码更简单的方法”并没有真正关心实际解决问题—— - 只是如何处理它。

As to this question, on Ubuntu Linux, I got "stack smashing" which told me more or less where the problem occurred. Interestingly, the traceback for stack smashing was the most helpful. Long story short, it was an embarrassingly basic error; strcpy was overflowing (in the operators for ~, | and &, the flags have a debug string set this way). At least it wasn't *me* who wrote that code. Always use strncpy, people :P

# asp.net-mvc - 在asp.net mvc 4中格式化日期时间

> ID：11272851
> 
> 赞同：57
> 
> 时间：2012-06-30T08:57:10.100
> 
> 标签：asp.net-mvc, asp.net-mvc-4, datetime-format

如何在 asp.net mvc 4 中强制日期时间的格式？在显示模式下，它按我的意愿显示，但在编辑模式下却没有。我正在使用 displayfor 和 editorfor 和 applyformatineditmode=true 和 dataformatstring="{0:dd/MM/yyyy}" 我试过的：

*   web.config（两者）中的全球化与我的文化和 uiculture。
*   在 application_start() 中修改文化和 uiculture
*   日期时间的自定义模型绑定器

我不知道如何强制它，我需要输入日期为 dd/MM/yyyy 而不是默认值。

更多信息：我的视图模型是这样的

```
 [DisplayName("date of birth")]
    [DataType(DataType.Date)]
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
    public DateTime? Birth { get; set; } 
```

鉴于我使用`@Html.DisplayFor(m=>m.Birth)`但它按预期工作（我看到格式）并输入我使用的日期，`@Html.EditorFor(m=>m.Birth)`但如果我尝试输入类似 13/12/2000 的内容会失败，错误是它不是有效日期（12/ 13/2000 和 2000/12/13 按预期工作，但我需要 dd/MM/yyyy）。

自定义模型绑定器在 application_start() b/c 中调用，我不知道还有哪里。

使用`<globalization/>`我尝试过的`culture="ro-RO", uiCulture="ro"`其他文化，这些文化会给我 dd/MM/yyyy。我还尝试在 application_start() 中基于每个线程设置它（这里有很多例子，关于如何做到这一点）

* * *

对于所有将阅读此问题的人：只要我没有客户验证，Darin Dimitrov 的答案似乎就可以工作。另一种方法是使用自定义验证，包括客户端验证。我很高兴在重新创建整个应用程序之前发现了这一点。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-30T09:20:55.317

啊啊啊，现在清楚了。您似乎在绑定值时遇到问题。不是在视图上显示它。事实上，这是默认模型绑定器的错误。您可以编写并使用一个自定义的，它将考虑`[DisplayFormat]`您模型上的属性。我在这里说明了这样一个自定义模型绑定器：[https ://stackoverflow.com/a/7836093/29407](https://stackoverflow.com/a/7836093/29407)

* * *

显然有些问题仍然存在。这是我在 ASP.NET MVC 3 和 4 RC 上的完整设置。

模型：

```
public class MyViewModel
{
    [DisplayName("date of birth")]
    [DataType(DataType.Date)]
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
    public DateTime? Birth { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel
        {
            Birth = DateTime.Now
        });
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

看法：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.LabelFor(x => x.Birth)
    @Html.EditorFor(x => x.Birth)
    @Html.ValidationMessageFor(x => x.Birth)
    <button type="submit">OK</button>
} 
```

自定义模型绑定器的注册`Application_Start`：

```
ModelBinders.Binders.Add(typeof(DateTime?), new MyDateTimeModelBinder()); 
```

以及自定义模型绑定器本身：

```
public class MyDateTimeModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var displayFormat = bindingContext.ModelMetadata.DisplayFormatString;
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        if (!string.IsNullOrEmpty(displayFormat) && value != null)
        {
            DateTime date;
            displayFormat = displayFormat.Replace("{0:", string.Empty).Replace("}", string.Empty);
            // use the format specified in the DisplayFormat attribute to parse the date
            if (DateTime.TryParseExact(value.AttemptedValue, displayFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
            {
                return date;
            }
            else
            {
                bindingContext.ModelState.AddModelError(
                    bindingContext.ModelName,
                    string.Format("{0} is an invalid date format", value.AttemptedValue)
                );
            }
        }

        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

现在，无论您在 web.config (`<globalization>`元素) 中设置了什么文化或当前线程文化，自定义模型绑定器`DisplayFormat`在解析可空日期时都将使用属性的日期格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-08T15:57:18.223

客户端验证问题可能是由于*jquery.validate.unobtrusive.min.js*中的 MVC 错误（即使在 MVC 5 中），它**不接受任何日期/日期时间格式**。不幸的是，您必须手动解决它。

**我最终的工作解决方案：**

```
$(function () {
    $.validator.methods.date = function (value, element) {
        return this.optional(element) || moment(value, "DD.MM.YYYY", true).isValid();
    }
}); 
```

您必须在之前包括：

```
@Scripts.Render("~/Scripts/jquery-3.1.1.js")
@Scripts.Render("~/Scripts/jquery.validate.min.js")
@Scripts.Render("~/Scripts/jquery.validate.unobtrusive.min.js")
@Scripts.Render("~/Scripts/moment.js") 
```

您可以使用以下方法安装 moment.js：

```
Install-Package Moment.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T08:56:16.220

谢谢达林，对我来说，能够发布到 create 方法，它只有在我将 BindModel 代码修改为：

```
public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    var displayFormat = bindingContext.ModelMetadata.DisplayFormatString;
    var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

    if (!string.IsNullOrEmpty(displayFormat) && value != null)
    {
        DateTime date;
        displayFormat = displayFormat.Replace("{0:", string.Empty).Replace("}", string.Empty);
        // use the format specified in the DisplayFormat attribute to parse the date
         if (DateTime.TryParse(value.AttemptedValue, CultureInfo.GetCultureInfo("en-GB"), DateTimeStyles.None, out date))
        {
            return date;
        }
        else
        {
            bindingContext.ModelState.AddModelError(
                bindingContext.ModelName,
                string.Format("{0} is an invalid date format", value.AttemptedValue)
            );
        }
    }

    return base.BindModel(controllerContext, bindingContext);
} 
```

希望这可以帮助别人......

# android - 媒体播放器被绞死

> ID：11272853
> 
> 赞同：0
> 
> 时间：2012-06-30T08:57:58.047
> 
> 标签：android, android-mediaplayer, emulation

我的列表包含 12 首歌曲，单击按钮时它必须无限循环移动。我的媒体播放器在模拟器中工作正常，但如果我在 htc 移动设备中连续按下按钮 32 次，它就会卡住。

```
 public void onClick(View v) 

        {
            if(count==listlen)
                count=-1;
            if(count<listlen)
            {
             count=count+1;
            }
             loadpitch(concatstr);
         } 
```

负载间距有这个

```
 try
                        {  
                        if(sp.isChecked()||sm.isChecked())
                        {

                            mp.reset();
                            mp=MediaPlayer.create(this,resID);
                            mp.setLooping(true);
                        }
                        if(play==true)
                        {
                          mp.start();
                        }
                    } 
```

其中 listlen 是预定义列表的长度 loadpitch 是加载歌曲的函数 sp 和 sm 是切换按钮！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:20:53.717

在启动媒体播放器 onclick 时以这种方式检查您的媒体播放器

```
 if (mPlayer!=null) {
            mPlayer.stop();
            mPlayer.release();
            }
        mPlayer= MediaPlayer.create(YourActivity.this,song);
        mPlayer.start(); 
```

# c++ - C++ ARMA方法和回归分析

> ID：11272856
> 
> 赞同：4
> 
> 时间：2012-06-30T08:58:48.310
> 
> 标签：c++, statistics, regression

是否有任何实现 ARMA 方法及其变体的 C++ 库？对于这种分析，我会很高兴有一个成熟的发行版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:46:58.403

我不知道有任何本地 C++ 库来计算 ARMA 模型。但是，如果方便对您来说比原始性能更重要，您可以间接地做到这一点：

*   使用[R](http://www.r-project.org/)计算[ARMA](http://rss.acs.unt.edu/Rdoc/library/tseries/html/arma.html)模型
*   使用[RCCP](http://dirk.eddelbuettel.com/code/rcpp.html)将 C++ 链接到 R（反之亦然）

# android - 从数据库android中保存的联系人更新Listview的问题

> ID：11272857
> 
> 赞同：0
> 
> 时间：2012-06-30T08:59:31.337
> 
> 标签：android

大家好，请遇到这个麻烦，我似乎不明白为什么。基本上我想做的是通过联系人 api 选择一个联系人，保存在数据库中，然后在列表视图中显示。但由于某种原因，在我获得联系人详细信息后，不再调用我的自定义适配器，它仅在首次创建活动时调用，因此为空。请问我可能错过了什么。谢谢你。

这是我的代码：

```
public class GroupDetails extends FragmentActivity implements OnClickListener, LoaderCallbacks<Cursor> {

//variable for debugging the application

public static final String TAG = "MyApp.Debug";

    //request code for using with action pick intent
    static final int PICK_CONTACT = 1;

    //initial variables
    Button add_button;
    TextView label;
    ListView list;
    ResponderDB dbadapter;
    DueCustomCursorAdapter cursoradapter;
    //DueCustomCursorLoader loader;

    //cursor to retrieve contact details 
    private Cursor contactsCursor;

    String groupname;
    long rowId;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.group_detail_list);

 //only intialize here. database will be open in custom cursor loader

dbadapter = new ResponderDB(this); 

        getSupportLoaderManager().initLoader(0, null, this);
        /*Read intent and the extras passed*/
           Bundle extra = getIntent().getExtras();

            if(!extra.isEmpty() || extra.equals(null)){
             groupname = extra.getString("group_name");
             rowId = extra.getLong("rowId");
            }

        list = (ListView)findViewById(android.R.id.list);
        add_button = (Button)findViewById(R.id.add_button_id);
        label = (TextView)findViewById(R.id.group_label_id);

        Log.d(TAG, "calling custom adapter here now");
        cursoradapter = new DueCustomCursorAdapter(GroupDetails.this, null, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER );
        list.setAdapter(cursoradapter);

        add_button.setOnClickListener(this);

    }

    @Override
    public void onClick(View view) {
        int selection = view.getId();
        if(selection == R.id.add_button_id){

            Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(intent, PICK_CONTACT);
        }

    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data){
        if(requestCode == PICK_CONTACT){
            getContactInfo(data);
        }
    }

    private void getContactInfo(Intent intent) {

        String number = null; 
        String name = null; 

        String[] projection = {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, 
                ContactsContract.CommonDataKinds.Phone.NUMBER};

        CursorLoader loader = new CursorLoader(this,intent.getData(),
                null,null,null,null);

        contactsCursor = loader.loadInBackground();
        if(contactsCursor.moveToFirst()){

        String id = contactsCursor.getString(contactsCursor.getColumnIndex(ContactsContract.Contacts._ID));
        name = contactsCursor.getString(contactsCursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

        //get the Phone Number
        Cursor numberCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI
                , null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] {id}, null);
        while(numberCursor.moveToNext()){
            number = numberCursor.getString(numberCursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
        }

        }

        Log.d(TAG, "Successfully added contacts for group");
        //dbadapter.updateGroup(rowId, values);

        dbadapter.saveContacts(name, number, String.valueOf(rowId));
        cursoradapter.notifyDataSetChanged();
        getSupportLoaderManager().getLoader(0).onContentChanged();
    }

    public static final class DueCustomCursorLoader extends SimpleCursorLoader {
        public static final String TAG = "MyApp.Debug";
        public static int RETRIEVE_CODE = 1;

        ResponderDB dbadapter1;
        int retrieveCode;

        public DueCustomCursorLoader(Context context, ResponderDB dbadapter) {
            super(context);
           this.dbadapter1= dbadapter;

        }

        public DueCustomCursorLoader(Context context, ResponderDB dbadapter, int retrieveCode){

            super(context);
            this.dbadapter1 = dbadapter;
            this.retrieveCode = retrieveCode;
        }

        @Override
        public Cursor loadInBackground() {
            Cursor cursor = null;

            dbadapter1.open();

                cursor = dbadapter1.readContact(retrieveCode);

            return cursor;
        }

    }

    public class DueCustomCursorAdapter extends CursorAdapter {
        public static final String TAG = "SmsResponder.Debug";
        private Context myContext;

        public DueCustomCursorAdapter(Context context,Cursor c, int flags) {
            super(context, c, flags);
            myContext = context;

        }

        //never seem to get here 
        @Override
        public void bindView(View view, Context context, Cursor cursor) {

            ViewHolder holder = (ViewHolder)view.getTag();
            String contactName = cursor.getString(cursor.getColumnIndexOrThrow(ResponderDB.NAME));
            String contactNumber = cursor.getString(cursor.getColumnIndex(ResponderDB.NUMBER));

            Log.d(TAG, "contact name is " + contactName);
            Log.d(TAG, "contact number is " + contactNumber);

            holder.contact_name.setText(contactName);
            holder.contact_number.setText(contactNumber);
        }

        @Override   
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            ViewHolder holder = new ViewHolder();

                View view = LayoutInflater.from(myContext).inflate(R.layout.group_detail_item, parent,false);
                holder.contact_name = (TextView)view.findViewById(R.id.group_item_id);
                holder.contact_number = (TextView)view.findViewById(R.id.group_subitem_id);
                view.setTag(holder);

                return view;     
        }

    }

    static class ViewHolder {
          TextView text;
          TextView contact_name;
          TextView contact_number;
          CheckBox checkbox;
        }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle arg1) {

        return new DueCustomCursorLoader(GroupDetails.this, dbadapter, (int)rowId);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        cursoradapter.swapCursor(data);

    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {

        cursoradapter.swapCursor(null);
    }

} 
```

我没有从数据库中得到任何问题，所以这里没有添加代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:50:46.160

将联系人保存到数据库后，您需要重新启动Loader() 以重新查询您的数据库并再次调用 onLoadFinished 以允许适配器使用新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:12:07.663

我会尝试颠倒这两行（在我看来，你告诉列表在更新光标之前更新自身）：

```
 cursoradapter.notifyDataSetChanged(); 
   getSupportLoaderManager().getLoader(0).onContentChanged(); 
```

对此：

```
 getSupportLoaderManager().getLoader(0).onContentChanged();
   cursoradapter.notifyDataSetChanged(); 
```

# android - 如果在键盘上按下任何键，如何获取消息（Toast）

> ID：11272861
> 
> 赞同：0
> 
> 时间：2012-06-30T09:00:20.640
> 
> 标签：android

我的应用程序需要一个编辑文本，当我在该编辑文本中输入任何内容时。它应该显示一条消息，例如（按下 Enter 键、按下 Tab 键、按下空格键）等。有没有办法做到这一点。我在做这个

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
 etext =(EditText)findViewById(R.id.editText1);
 etext.setOnKeyListener(this);
 }
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
     if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
          Toast.makeText(this, etext.getText(), Toast.LENGTH_SHORT).show(); //show tost here
          return true;
     }
    return false;
}* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:01:58.727

使用[setOnKeyListener](http://developer.android.com/reference/android/view/View.html)作为：

```
final EditText edittext = (EditText) findViewById(R.id.edittext);
edittext.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
       if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
          Toast.makeText(this, "show message here", Toast.LENGTH_SHORT).show(); //show tost here
          return true;
     }
   return false;
 } 
```

**编辑：**您可以在这里找到所有内容：http `keyEvent`: [//developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html)

# iphone - iOS - 将变量传递给视图控制器

> ID：11272864
> 
> 赞同：2
> 
> 时间：2012-06-30T09:00:58.017
> 
> 标签：iphone, ios, uiviewcontroller

我有一个带有视图控制器的视图，当我在屏幕上显示这个视图时，我希望能够从调用类将变量传递给它，以便我可以设置标签等的值。

首先，我只是尝试为其中一个标签创建一个属性，然后从调用类中调用它。例如：

```
SetTeamsViewController *vc = [[SetTeamsViewController alloc] init];
vc.myLabel.text = self.teamCount;
[self presentModalViewController:vc animated:YES];
[vc release]; 
```

然而，这并没有奏效。所以我尝试创建一个便利初始化程序。

```
SetTeamsViewController *vc = [[SetTeamsViewController alloc] initWithTeamCount:self.teamCount]; 
```

然后在`SetTeamsViewController`我有

```
- (id)initWithTeamCount:(int)teamCount {
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        // Custom initialization
        self.teamCountLabel.text = [NSString stringWithFormat:@"%d",teamCount];
    }
    return self;
} 
```

但是，这也不起作用。它只是加载我在 nib 文件中给出的标签的任何值。我用`NSLog()`s 乱扔代码，它传递了正确的变量值，只是没有设置标签。

任何帮助将不胜感激。

编辑：我刚刚尝试在我指定的初始化程序中设置一个实例变量，然后在 viewDidLoad 中设置标签，这样就可以了！这是最好的方法吗？

此外，当关闭此模式视图控制器时，我也会更新调用 ViewController 视图中按钮的文本。但是，如果我再次按下此按钮（再次显示模态视图），而另一个视图正在屏幕上显示动画，则该按钮暂时再次具有其原始值（来自笔尖）。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T09:11:42.623

在初始化视图控制器时，在 initWithNibName 方法中，驻留在视图控制器中的视图尚未初始化，您还不能设置它们的属性。做任何你需要的是基于“viewDidLoad”方法的视图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T10:18:00.157

我不是专业人士，但这可能会对您有所帮助。

在 header`view1.h`中，声明所需的属性：

```
// view1.h

@interface view1 : UIViewController {
    NSString *passingVariable;
}

@property (nonatomic, strong) NSString *passingVariable;

@end 
```

然后在 的实现中`view1`，综合变量：

```
// view1.m

@implementation view1

@synthesize passingVariable;

// the rest of the implementation

@end 
```

最后，在另一个视图控制器 view2 的实现中：

```
// view2.m

#import "view1.h"

@implementation view2

-(IBAction)changeview
{
    view1 *myview = [[view1 alloc] init];

    myview.passingVariable = @"Hello Variable";

    [self.navigationController pushViewController:myview animated:YES];
}

@end 
```

在这里，我试图从`view2`视图 1 移动并初始化`view1`. 希望这会帮助你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T14:02:03.647

在这里，我将 ViewController 的标签文本传递给 SecondViewController 的标签文本

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    // please make your control on XIB set these IBOutlet's
    //I'm not showing how to connect these with XIB

    IBOutlet UILabel *lblView;
    IBOutlet UIButton *buttonGo;   
}
//this is method which will push the view
-(IBAction)buttonGoClickAction:(id)sender; 
```

**视图控制器.m**

```
-(IBAction)buttonGoClickAction:(id)sender
{
    SecondViewController *secondViewObject = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
    //before pushing give the text
    secondViewObject.string = lblView.text;
    [self.navigationController pushViewController:secondViewObject animated:YES];
} 
```

**SecondViewController.h**

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController
{
    IBOutlet UILabel *labelView;
    NSString *string;
}
//set the string property
@property(nonatomic, retain) NSString *string;

@end 
```

**第二视图控制器.m**

```
 #import "SecondViewController.h"

 @implementation SecondViewController
 //synthesize string here
 @synthesize string;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    //Here you will get the string 
    labelView.text = string;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T11:19:42.117

首先，如果您是通过 Interface Builder 制作的，请检查是否在 xib 中附加了此标签 IBOutlet....

像这样使用它......

```
SetTeamsViewController *vc = [[SetTeamsViewController alloc] initWithTeamCount:teamCount]; 
```

在 .h 文件中获取一个字符串变量并在此处设置该字符串 .. *NSSting* *str in .h

```
- (id)initWithTeamCount:(int)teamCount {
    self = [super init];
    if (self) {
        // Custom initialization
       str = [NSString stringWithFormat:@"%d",teamCount];
    }
    return self;
 } 
```

*并在viewDidLoad:*或*viewWillApear:*中设置标签

 *```
 self.teamCountLabel.text = str; 
```

愿这对你有帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-30T11:28:26.407

正如 stavash 所说，xib 中的控件是在加载视图中创建的。更准确地说，它们是使用该行创建的：

```
 [super viewDidLoad]; 
```

所以，mylabel 在那个时间之前不存在（它是 nil）。

最简单的方法是这样做：

```
 SetTeamsViewController *vc = [[SetTeamsViewController alloc] init];
    [self presentModalViewController:vc animated:YES];
    vc.myLabel.text = self.teamCount;
    [vc release]; 
```

更长但更正确的路径是在 SetTeamsViewController 类中有一个成员 NSString*，在显示窗口之前将其设置为 teamCount，并在视图中加载以将该成员值放入标签中。

镉

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-30T09:21:31.127

这取决于您的需要。您可以使用**Singleton**类在不同类之间共享变量。定义您希望在 DataClass 中共享的所有变量。

在 .h 文件中（其中 RootViewController 是我的 DataClass，用您的新类替换名称）

```
+(RootViewController*)sharedFirstViewController; 
```

在 .m 文件中

```
//make the class singleton:-    
+(RootViewController*)sharedFirstViewController    
{    
    @synchronized([RootViewController class])
     {
        if (!_sharedFirstViewController)
            [[self alloc] init];

        return _sharedFirstViewController;
    }

    return nil;
}

+(id)alloc
{
    @synchronized([RootViewController class])
    {
        NSAssert(_sharedFirstViewController == nil, 
                 @"Attempted to allocate a second instance of a singleton.");
        _sharedFirstViewController = [super alloc];
        return _sharedFirstViewController; 
    }
    return nil;
}

-(id)init {
    self = [super init];
    if (self != nil) {
        // initialize stuff here
    }
    return self;
} 
```

之后，您可以在像这样的任何其他类中使用您的变量

```
[RootViewController sharedFirstViewController].variable 
```

希望对你有帮助:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-19T01:15:57.947

使用 Storyboard，正确的方法是在 performSegueWithIdentifier 中将 indexPath 作为 sender 参数传递

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [self performSegueWithIdentifier:@"segueIdentifier" sender:indexPath];

} 
```

并在目标控制器中设置属性：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString: @"segueIdentifier"]) {

        NSIndexPath *indexPath = sender;

        DetailViewController *dest = [segue destinationViewController];

        dest.usersArray = [self.usersArray objectAtIndex:indexPath.row];

    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T18:49:55.547

每当我需要另一个类来获取上一个类中的变量时，我所做的就是设置一个全局类来存储值，以防我需要它们在更多位置或在界面中设置@public 变量。可以使用您为下一个视图创建的控制器来设置这些变量。

控制器->pub_var1 = val1；控制器->pub_var2 = val2;

这将在您将视图传递给根控制器之前或在您调用下一个视图之前完成。您将需要 #import "class.h" 以便您可以访问这些公共变量。

如果不清楚，我可以显示代码*

# javascript - Javascript：移动浏览器的“视点”

> ID：11272866
> 
> 赞同：1
> 
> 时间：2012-06-30T09:01:11.167
> 
> 标签：javascript, html, css, viewport

我有一个包含许多越界内容的页面，并且由于我设置`body{overflow:hidden}`了 ，它们不在视口之外。因此，我想将一个函数附加到一个按钮，该按钮将移动**浏览器的 PoV，**以便越界内容进入视口。

我现在能想到的是设置`body{position:relative}`和使用 jQuery 来`animate()`代替 body。但就性能而言，有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:03:28.690

尝试设置正确数量的像素`document.documentElement.scrollLeft`，`.scrollTop`以便视口显示您想要的内容。

注意：在 Firefox 中，您应该`document.body`改为设置。对于跨浏览器解决方案，请同时设置它们，其中一对应保持为 0。

# asp.net - 自定义网格视图

> ID：11272870
> 
> 赞同：1
> 
> 时间：2012-06-30T09:02:22.797
> 
> 标签：asp.net

我有 Gridview，我想从数据库（SQL）中检索一些信息。并根据他们，显示典型信息。例如：我从 DB 中读取“膳食”字段，但我想在我的网格视图中显示午餐。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:10:42.443

您可以使用 a`TemplateField`来根据需要更改值，例如：

```
<asp:TemplateField HeaderText="Infos">
    <ItemTemplate ><%#GetTypicalInfo(Container.DataItem)%></ItemTemplate>
</asp:TemplateField> 
```

和后面的代码：

```
protected string GetTypicalInfo(object oItem)
{
    string cInfo = DataBinder.Eval(oItem, "cDataField").ToString();

    switch (cInfo)
    {
        case "Meal":
            return "lunch";

        default:
            return cInfo;
    }   
} 
```

# objective-c - 尝试将变量传递给布尔函数时的stackoverflow

> ID：11272871
> 
> 赞同：0
> 
> 时间：2012-06-30T09:02:33.367
> 
> 标签：objective-c, xcode, boolean, parameter-passing

我创建了一个计数计时器（在标签上）和一个包含标签整数值的变量（命名为计数）。我还创建了一个函数来检查我的数字是 7，除以 7 还是包含 7。当我尝试将我的计数值传递给检查函数时，我的应用程序是堆栈。我尝试了很长时间来找出堆栈溢出发生的原因，但我没有成功。我该如何解决？这是我的代码：

```
-(IBAction)start:(id)sender
{
    timer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(updateTimer:) userInfo:nil repeats:YES];

    MainInt = 0;
    numbersTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(countup) userInfo:nil repeats:YES]; 
}
-(void)countup
{
    MainInt += 1;
    numbersLabel.text = [NSString stringWithFormat:@"%i", MainInt];
    count = numbersLabel.text.intValue;
    NSLog(@"num: %d", count);

   if ([self checknum:(count) == false]) {
   NSLog(@"BOOM");
   }

}
-(BOOL)checknum:(int)number
{
    while (number<10) 
    {
        if(number ==7)
        {
            NSLog(@"boom, i=%d", number);
            return true;
        }

    }

    while (number>=10 && number<1000) 
    {
        if(number % 7 == 0)
        {
            NSLog(@"boom i=%d", number);
            return true;

        }

        if([self revese:(number)])
        {
            NSLog(@"boom reverse num = %d", number);
            return true;

        }

    }

    return false;   
}

-(BOOL) revese:(int)number
{
    if(number < 10 && number != 7)
        return false;
    if(((number % 10) == 7) || ((number / 10) == 7))
        return true;
    else {
        [self revese:(number / 10)];
    }
    return false;

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:55:11.993

该声明

```
if ([self checknum:(count) == false]) {
   NSLog(@"BOOM");
} 
```

是胡说八道。你问得很有效

```
BOOL isLessThanOne = (count < 1);
if ([self checksum:isLessThanOne]) {
           NSLog(@"BOOM");
} 
```

将其更改为

```
if ([self checksum:count] == NO) {
       NSLog(@"BOOM");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:23:00.647

有很多问题，但首先是这些：

```
while (number<10) 
```

//

```
while (number>=10 && number<1000) 
```

您需要一个 if/else 类型的条件语句。你现在的方式，因为你从不调整 的值`number`，如果你稍后在代码中测试的严格条件没有得到满足，你将陷入无限循环。更像是：

```
if(number<10){ 
// do some tests

} else if (number<1000){
// do some other tests

} 
```

还有其他问题，但这些只是一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T09:26:44.723

很难说，因为我无法真正看到你在做什么，但如果你有堆栈溢出，很可能你的问题`revese`是递归函数。我敢打赌，你有一个特定的值被传递给`revese`它，导致它被一遍又一遍地调用，基于你在条件语句中使用的一些不寻常的逻辑。您应该使用调试器仔细检查此功能，以确定发生这种情况的原因。

# c# - Naudio，如何判断播放完成

> ID：11272872
> 
> 赞同：5
> 
> 时间：2012-06-30T09:02:38.367
> 
> 标签：c#, naudio

我正在使用 NAudio 库来编写一个简单的 WinForms 录音机/播放器。我的问题是如何判断播放已完成？之后我需要关闭波流。

我知道下面列出了一个 PlaybackStopped 事件：

```
wfr = new NAudio.Wave.WaveFileReader(this.outputFilename);
audioOutput = new DirectSoundOut();
WaveChannel32 wc = new NAudio.Wave.WaveChannel32(wfr); 
audioOutput.Init(wc);
audioOutput.PlaybackStopped += new EventHandler<StoppedEventArgs>(audioOutput_PlaybackStopped);
audioOutput.Play(); 
```

但是这个 PlaybackStopped 事件似乎只能通过调用来触发`audioOutput.stop()`，有谁知道如何确定播放是否完成？

我为这个问题创建了一个开源项目，你可以在这里找到它：[https ://code.google.com/p/stack-overflow-questions/](https://code.google.com/p/stack-overflow-questions/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T07:52:13.803

`PlaybackStopped`当您手动停止播放或`IWaveProvider`您正在使用的 Read 方法返回 0时会引发该事件。这里的问题是`WaveChannel32`当源流结束时不会停止返回数据，因此播放永远不会结束。该`PadWithZeroes`属性应设置为 false 以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-09T11:44:59.137

正如@Mark Heath另外描述的那样，我想添加Naudio的编码示例，它将在Debug/Sound Folder文件夹中播放一个mp3文件并等到它没有完成。播放完成可以通过以下方式检查`waveOut.PlaybackState == PlaybackState.Stopped`

```
play_string = @"SOUND/space.mp3";
var reader = new Mp3FileReader(play_string);
var waveOut = new WaveOut(); // or WaveOutEvent()
waveOut.Init(reader);
waveOut.Play();
while (waveOut.PlaybackState != PlaybackState.Stopped) ; // Wait untill the playing isn't finished. 
```

# python - 扭曲与多处理事件和队列不兼容？

> ID：11272874
> 
> 赞同：6
> 
> 时间：2012-06-30T09:02:58.967
> 
> 标签：python, twisted, multiprocessing

我正在尝试模拟使用扭曲运行的应用程序网络。作为我模拟的一部分，我想同步某些事件并能够为每个进程提供大量数据。我决定使用多处理事件和队列。但是，我的进程正在挂起。

我写了下面的示例代码来说明问题。具体来说，（大约 95% 的时间在我的沙桥机器上）**“run_in_thread”函数完成，但是直到我按下 Ctrl-C 后才调用“print_done”回调。**

此外，我可以更改示例代码中的一些内容以使其工作更可靠，例如：减少衍生进程的数量、从 reactor_ready 调用 self.ready.set 或更改 deferLater 的延迟。

我猜在扭曲反应器和阻塞多处理调用（如 Queue.get() 或 Event.wait() 之间存在竞争条件？

我遇到的问题到底是什么？我的代码中是否有我遗漏的错误？我可以解决这个问题还是扭曲与多处理事件/队列不兼容？

其次，像 spawnProcess 或 Ampoule 这样的东西会是推荐的替代品吗？（如[Mix Python Twisted with multiprocessing? 中所建议的那样？](https://stackoverflow.com/questions/5715217/mix-python-twisted-with-multiprocessing)）

编辑（根据要求）：

我尝试过 glib2reactor selectreactor、pollreactor 和 epollreactor 的所有反应器都遇到了问题。epollreactor 似乎给出了最好的结果，并且对于下面给出的示例似乎工作正常，但在我的应用程序中仍然给我同样（或类似）的问题。我会继续调查。

我正在运行 Gentoo Linux 内核 3.3 和 3.4、python 2.7，并且我尝试过 Twisted 10.2.0、11.0.0、11.1.0、12.0.0 和 12.1.0。

除了我的沙桥机器外，我在双核 AMD 机器上也看到了同样的问题。

```
#!/usr/bin/python
# -*- coding: utf-8 *-*

from twisted.internet import reactor
from twisted.internet import threads
from twisted.internet import task

from multiprocessing import Process
from multiprocessing import Event

class TestA(Process):
    def __init__(self):
        super(TestA, self).__init__()
        self.ready = Event()
        self.ready.clear()
        self.start()

    def run(self):
        reactor.callWhenRunning(self.reactor_ready)
        reactor.run()

    def reactor_ready(self, *args):
        task.deferLater(reactor, 1, self.node_ready)
        return args

    def node_ready(self, *args):
        print 'node_ready'
        self.ready.set()
        return args

def reactor_running():
    print 'reactor_running'
    df = threads.deferToThread(run_in_thread)
    df.addCallback(print_done)

def run_in_thread():
    print 'run_in_thread'
    for n in processes:
        n.ready.wait()

def print_done(dfResult=None):
    print 'print_done'
    reactor.stop()

if __name__ == '__main__':
    processes = [TestA() for i in range(8)]
    reactor.callWhenRunning(reactor_running)
    reactor.run() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T15:50:15.433

简短的回答是肯定的，Twisted 和 multiprocessing 彼此不兼容，您无法像尝试那样可靠地使用它们。

在所有 POSIX 平台上，子进程管理与处理密切相关`SIGCHLD`。POSIX 信号处理程序是进程全局的，每种信号类型只能有一个。

Twisted 和 stdlib`multiprocessing`不能同时`SIGCHLD`安装处理程序。只有其中一个可以。这意味着其中只有一个可以可靠地管理子进程。您的示例应用程序无法控制其中哪些将赢得该能力，因此我预计其行为会因该事实而产生一些不确定性。

但是，您的示例更直接的问题是您在父进程中加载​​ Twisted，然后使用`multiprocessing`fork*而不是执行*所有子进程。Twisted 不支持这样使用。如果你 fork 然后 exec，没有问题。但是，缺少新进程（可能是使用 Twisted 的 Python 进程）的 exec 会导致 Twisted 无法解释的各种额外共享状态。在您的特定情况下，导致此问题的共享状态是用于实现`deferToThread`. 由于父进程和所有子进程共享 fd，当父进程试图唤醒主线程以传递`deferToThread`调用结果时，它很可能会唤醒*其中一个子进程*. 子进程没有什么有用的事情可做，所以这只是浪费时间。同时，父线程中的主线程永远不会醒来，也不会注意到您的线程任务已完成。

您可以通过在创建子进程之前不加载任何 Twisted 来避免此问题。就 Twisted 而言，这会将您的使用变成一个单进程用例（在每个进程中，它最初会被加载，然后该进程根本*不会*继续分叉，因此不存在如何分叉和扭曲互动了）。这意味着在创建子进程之前甚至不导入 Twisted。

当然，这只对 Twisted 有帮助。您使用的任何其他库都可能遇到类似的问题（您提到了 glib2，这是另一个库的一个很好的例子，如果您尝试像这样使用它会完全窒息）。

我强烈建议不要使用该`multiprocessing`模块。相反，使用任何涉及 fork*和*exec 的多进程方法，而不是单独使用 fork。安瓿属于这一类。

# c - (a/b) mod n 表示大数？

> ID：11272877
> 
> 赞同：3
> 
> 时间：2012-06-30T09:03:31.697
> 
> 标签：c, modulo

我需要计算第一个 n tetranacci 数字的总和，但我使用的公式

```
sn = (f(n+2)+2*f(n)+f(n-1)-1)/3 
```

有一个部门。
我正在`f(n) modulo 10^9 + 7`计算第 n 个 tetranacci 项。在某些情况下，它给出了正确的答案，但不是全部。

有人可以帮我了解如何计算它的正确逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:15:03.690

对于模算术，用模逆代替乘法除法。

如果`k*d ≡ 1 (mod m)`和`n`是 的倍数`d`，则

```
n/d ≡ ((n % m)*k % m) (mod m) 
```

你可以看到

```
k = (f*m + 1)/d
n*k = (n*(f*m + 1))/d = ((n*f)*m + n)/d = (n/d)*(f*m) + (n/d) 
```

现在，`n/d`假设是一个整数，因此`(n/d)*(f*m)`是 的倍数`m`，所以

```
n*k ≡ n/d (mod m) 
```

并且因为

```
n*k ≡ (n % m)*k (mod m) 
```

命题如下。

在这种情况下，`d = 3`和`m = 10^9 + 7`，所以`k = (10^9 + 8)/3 = 333333336`。

但是，如果`n`不是的倍数，则*不起作用*`d`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:06:34.240

如果你的号码在一个数字数组中，你可以使用这个来计算这个大数字的 mod：

```
long mod_ans = 0;

for(i = 0; i < digits_array_length; i++)

{

    int digit = digits_array[i];
    mod_ans = (mod_ans * 16 + digit) % num;
} 
```

# python - 没有所有字段的 django ModelForm - 自动填充它们

> ID：11272879
> 
> 赞同：2
> 
> 时间：2012-06-30T09:03:49.367
> 
> 标签：python, django, django-generic-views, django-forms

我想自动填充模型的一个字段。它拥有一个客户端IP。

我已经定义了一个 CreateView 如下：

```
class MyView(CreateView):

  def post(self, request, *args, **kwargs):
    self.form_class.client_ip = request.META.get('REMOTE_ADDR')
    super(MyView, self).post(request, *args, **kwargs)

  model = MyModel   
  form_class = MyForm 
```

和 MyForm 那样：

```
class MyForm(forms.ModelForm):
  class Meta:
    model = MyModel
    exclude = ('ip',) 
```

而且我不知道如何填写这个排除的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:49:33.893

在`MyView`您应该添加一个调用的方法`get_initial`，该方法返回表单的初始值（作为字典）。例如：

```
def get_initial(self):
    return { 'ip': ... } 
```

然后在创建表单时使用这些初始值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:48:10.863

排除的字段必须手动填写。您可以查看可以添加到`request.POST`dict 的中间件处理器，您可以覆盖`__init__`on `MyForm`, [first call super] 然后设置模型的`ip`字段。中间件处理器还可以添加`POST`一些其他请求级别的属性，使其可供将来使用。

# drag-and-drop - AutoCAD：从我托管在 Paletteset 中的 ListBox 拖放 *.dwg 文件

> ID：11272880
> 
> 赞同：0
> 
> 时间：2012-06-30T09:03:51.457
> 
> 标签：drag-and-drop, autocad

我在 AutoCAD 2012 中使用 PalettSet 托管我的 .Net ListView 控件。ListView 项的 Tag 属性包含 *.dwg 文件的路径。我想从 ListView 中拖动，同时使用 Item.Tag 属性选择 dwg 文件并将其放在 AutoCAD 绘图区域中，我希望结果是**绘图将插入那里**，就像我们通常拖动 *.dwg 文件和将其放在绘图区域

我已经阅读了有关使用 Jig 类的拖放块的信息，并且我尝试了一些示例代码，但使用了内置的 Circle 类。

**我是否必须先从 dwg 文件中读取块，然后附加到鼠标并进行拖放操作？**

我其实很迷茫...

有人可以指导我吗？非常感谢您的回复...

谢谢一堆....

法鲁克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:13:48.613

最后我解决了这个问题，但经过长时间的研究和代码测试。我编写了代码（通过阅读多个博客），将 *.dwg 文件中的块插入到当前的 AutoCAD 文档中，但后来我意识到许多块包含属性，并且在添加 dwg 时可能需要处理一些块。

所以最后，我决定调用 AutoCAD 的 INSERT 命令，而不是编写自己的代码。这是其他研究员的代码。

请注意，这里我将其作为硬编码 dwg 文件名和路径的示例，而在我的实际应用程序中，将从 ListBox.Tag 属性中读取 DWG 文件路径。

```
[CommandMethod("InsertDWG")]
static public void SendCmd()
{
    string DWGFile = @"D:\sym\1047.DWG";
    string InsertCmd = @"_.-INSERT " + DWGFile + '\r' + '\n';
    Document doc = Application.DocumentManager.MdiActiveDocument;
    doc.SendStringToExecute(InsertCmd, true, false, false);
} 
```

**注意：**您应该使用 SendStringToExecute() 方法保留 '\r' + '\n' （将充当 Enter 或回车），否则 AutoCAD 将获取命令字符串，但将等待用户输入。

希望这对某人有益。

最好的问候法鲁克

# android - R 无法解析为新安装的 eclipse 上的变量

> ID：11272882
> 
> 赞同：0
> 
> 时间：2012-06-30T09:04:01.540
> 
> 标签：android, adt, eclipse-juno

在过去的两个小时里，我一直在寻找堆栈溢出问题，并尝试了很多东西，但没有任何效果。

我今天早上刚刚安装了 eclipse juno，我`R cannot be resolved to a variable`在我创建的任何项目中都遇到了这个错误。此外，即使在我构建项目之后，我也看不到 gen 文件夹下的任何文件。我已经尝试过干净的项目，`ia32 libs`为运行 ubuntu 的 64 位系统安装，尝试更改文件夹位置，重新启动系统但没有任何效果。

生成的代码是：

```
package tanvi.alarm;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        />

</RelativeLayout> 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="tanvi.alarm"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:07:23.307

检查你是否有这条线

```
import android.R; 
```

如果，将其删除并再次清理并构建项目。

同样的事情[在这里](https://stackoverflow.com/questions/11250135/missing-package-in-gen-folder-with-r-in-android/11250175#11250175)解决了。检查我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T20:53:47.197

我和你有同样的问题，但是在 Windows 中，我找到了解决方案。

您必须检查您的**SDK 的文件夹权限**。我将位于我的第二个 HDD 中的 SDK 文件夹移动到一个新文件夹中，并且一切正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-20T22:05:25.183

我刚刚花了一天时间寻找解决此问题的方法。

就我而言，我从 Eclipse 开始：Help->Check for Updates。这些更新了，然后我打开了 SDK 管理器并在那里更新了一些包。

之后，我在新项目中出现“R 无法解决错误”，在其他项目中出现“找不到 *.apk”

我的解决方案是再次帮助->检查 Eclipse 中的更新，然后再次打开 SDK 管理器，并且有少量额外的包可用于更新。这些更新在我第一次查找更新时不可用。

我在第二轮更新后重新启动了 Eclipse，之后一切都很好。

希望这对将来的某人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-19T13:13:07.550

升级到 Juno 后，我遇到了这个问题。它已通过使用 Android SDK Manager 安装 Android SDK Build-tools 修复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T01:44:51.393

如果以上没有解决，请检查您的`/res`文件夹，其中 xml 文件可能有错误。由于此错误`R.Java`文件将不会更新，因此可能会出现上述问题。如果 xml 文件中有错误，它可能在`res-values-strings.xml`. 如果使用了任何字符串值，请尝试删除该错误并更新您的 Androidmanifest.xml。

这将自动解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T10:27:50.747

我昨天自己安装了朱诺，一开始不得不费力，但现在一切似乎都在工作。您没有说您安装了哪个 SDK，但我假设您使用的是最新的 SDK (r20)，因为您似乎已经点缀了所有其他的 Is。但是，由于 r20 是目前与 Juno 一起使用的唯一版本，因此最好检查一下您是否不确定。

不出所料，您在问题中提供的代码按原样工作，因此问题不存在。但是，如果您提供的其中一个 XML 文件中存在错误，则需要在`R`生成类之前修复这些错误。

或者，如果您之前安装了 Eclipse 的 3.x 版本，您是否仍在使用相同的工作区来运行 Juno？如果是这样，我建议在一个新的工作区重新开始，看看你是否有同样的问题。即使`-clean`在旧工作区上使用也不会削减它。如果您想继续使用旧的工作区目录，请删除其中的*.metadata*目录并重试，尽管之后您需要导入任何现有项目。

老实说，如果这是工作区冲突，我会感到惊讶，因为我希望您遇到更多问题，只是*R 无法解决*错误，但我只是想覆盖基础。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T09:49:12.970

我必须在我的 ubuntu 12.04 上安装这个库`sudo apt-get install ia32-libs`（我的系统是 64 位的）。并在 eclipse 重新启动时，生成了文件。

如果问题仍然存在，请检查是否`Project -> Build Automatically`选择了 。选择后，项目应该运行良好。

# java - 如何在java中格式化文件的系统路径？

> ID：11272884
> 
> 赞同：2
> 
> 时间：2012-06-30T09:04:27.923
> 
> 标签：java, file-io, replace, file-location

我想`c.txt`在 windows 中读取 java 中的文件。那么任何人都可以建议我如何在java中格式化文件的系统`D:\a\b\c.txt`路径`D:/a/b/c.txt`？我知道它会像这样工作，`D:\\a\\b\\c.txt`但我想使用它`D:/a/b/c.txt`。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:15:29.360

我不确定您的问题，但硬编码`/`或`\`. 使用 Java[`File.separator`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#separator)来帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:12:12.997

您可以使用`char`替换：[http ://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)

例子：

```
String pathToFile = "D:\\a\\b\\c.txt";
pathToFile = pathToFile.replace('\\','/'); <-- with ' and not " 
```

文档`replace(char, char)`：

> 返回一个新字符串，该字符串是用 newChar 替换此字符串中所有出现的 oldChar 所产生的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T09:12:52.943

您可以使用[文件](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)API

```
File f = new File("c.txt");
System.out.println(f.getAbsolutePath());
System.out.println(f.getCanonicalPath()); 
```

或者只是简单的子字符串

```
String fname = "D:\\a\\b\\c.txt".replace('\\', '/');
System.out.println(fname); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T09:06:48.160

```
String file="D:\\a\\b\\c.txt";
file=file.replace('\\','/');
System.out.println(file); 
```

输出`D:/a/b/c.txt`

但是，如果您试图使其更加依赖于平台，您应该使用`File.separator`（用于基于字符串的替换）或`File.separatorChar`（用于基于字符的替换）。

# ios - iOS中objective-c中的属性错误

> ID：11272889
> 
> 赞同：0
> 
> 时间：2012-06-30T09:05:43.560
> 
> 标签：ios, class, properties, interface, definition

我已经开始了新的 iOS 项目，并且在 ViewControler 头文件中只添加了一个属性。但它给了我错误：

> “属性”之前的预期说明符限定符列表

这是代码：

```
#import <UIKit/UIKit.h>

@interface QuoteGenViewController : UIViewController {

    @property (retain) NSArray *myQuotes;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:35:09.667

Here the general structure of a class interface

```
@interface Class : Superclass
{
    // Instance variable declarations.
    // Theirs definition could be omitted since you can declare them
    // in the implementation block or synthesize them using declared properties.
}
// Method and property declarations.
@end 
```

Since a property provides a simple way to declare and implement an object’s accessor methods (getter/setter), you need to put them in the *Method and property declarations* section.

I really suggest to read [ocDefiningClasses](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html) doc for this.

Hope that helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T09:10:03.920

您的代码应如下所示：

```
#import <UIKit/UIKit.h>

@interface QuoteGenViewController : UIViewController {

}

@property (retain) NSArray *myQuotes;

@end 
```

# cakephp - cakePHP 发现不尊重 belongsTo 关联

> ID：11272892
> 
> 赞同：0
> 
> 时间：2012-06-30T09:05:55.693
> 
> 标签：cakephp, cakephp-model

我在获取 model->find() 调用以尊重我建立的 belongsTo 关联时遇到问题。

这是协会：

```
var $belongsTo = array('User' => array('className'  =>'User',
                                       'foreignKey' => 'id',
                                   'fields'     => array('username')
                                       )
                      ); 
```

这是 find 调用：

```
$this->set('broadcasters_list', $this->Broadcaster->find('all',  
                                                         array('fields'=>array('id')
                                                         ))); 
```

现在来说一件非常奇怪的事情；我在 Broadcaster 模型上有一个分页调用，在调用时，它尊重 belongsTo 关联并从 User 模型返回必要的信息。

保重，李

编辑：

我查看了正在构建的查询，这就是我所拥有的：

对于查找命令：

```
SELECT `Broadcaster`.`id` FROM `broadcasters` AS `Broadcaster` LEFT JOIN `users` AS `User` ON (`Broadcaster`.`id` = `User`.`id`) LEFT JOIN `images` AS `profile_image` ON (`profile_image`.`user_id` = `Broadcaster`.`id` AND image_type = 3) WHERE 1 = 1 
```

对于分页调用：

```
SELECT `Broadcaster`.`id`, `Broadcaster`.`key_id`, `Broadcaster`.`session_id`, `Broadcaster`.`broadcast_mode`, `Broadcaster`.`next_guest_id`, `Broadcaster`.`one_to_one_credits`, `Broadcaster`.`one_to_many_credits`, `Broadcaster`.`avilable_for_private`, `Broadcaster`.`connect_type`, `Broadcaster`.`commission`, `Broadcaster`.`credits`, `Broadcaster`.`enabled`, `User`.`username`, `profile_image`.`file_id` FROM `broadcasters` AS `Broadcaster` LEFT JOIN `users` AS `User` ON (`Broadcaster`.`id` = `User`.`id`) LEFT JOIN `images` AS `profile_image` ON (`profile_image`.`user_id` = `Broadcaster`.`id` AND image_type = 3) WHERE `enabled` = 1 LIMIT 10 
```

除了要检索的字段外，一切看起来都一样。我错过了那里的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:02:59.857

你有foreignKey 错误。外键是当前表中的值，链接到外表中的键，所以在这种情况下它应该是 user_id

```
var $belongsTo = array('User' => array('className'  =>'User',
                                       'foreignKey' => 'user_id',
                                   'fields'     => array('username')
                                       )
                      ); 
```

# html - IE7中的搜索栏对齐

> ID：11272893
> 
> 赞同：0
> 
> 时间：2012-06-30T09:05:58.843
> 
> 标签：html, css, internet-explorer-7

问题是搜索按钮出现在下一行而不是 pf 侧输入，这仅在 ie7 中，在所有浏览器中都可以正常工作 #search-form { background: #e1e1e1; /* 非 css3 浏览器的后备颜色 */ width: 365px;

```
/* Gradients */
background: -webkit-gradient( linear,left top, left bottom, color-stop(0, rgb(243,243,243)), color-stop(1, rgb(225,225,225)));
background: -moz-linear-gradient( center top, rgb(243,243,243) 0%, rgb(225,225,225) 100%);

/* Rounded Corners */
border-radius: 17px; 
-webkit-border-radius: 17px;
-moz-border-radius: 17px;

/* Shadows */
box-shadow: 1px 1px 2px rgba(0,0,0,.3), 0 0 2px rgba(0,0,0,.3); 
-webkit-box-shadow: 1px 1px 2px rgba(0,0,0,.3), 0 0 2px rgba(0,0,0,.3);
-moz-box-shadow: 1px 1px 2px rgba(0,0,0,.3), 0 0 2px rgba(0,0,0,.3);
}

/*** TEXT BOX ***/
input[type="text"]{
background: #fafafa; /* Fallback color for non-css3 browsers */

/* Gradients */
background: -webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(250,250,250)), color-stop(1, rgb(230,230,230)));
background: -moz-linear-gradient( center top, rgb(250,250,250) 0%, rgb(230,230,230) 100%);

border: 0;
border-bottom: 1px solid #fff;
border-right: 1px solid rgba(255,255,255,.8);
font-size: 16px;
margin: 4px;
padding: 5px;
width: 250px;

/* Rounded Corners */
border-radius: 17px; 
-webkit-border-radius: 17px;
-moz-border-radius: 17px;

/* Shadows */
box-shadow: -1px -1px 2px rgba(0,0,0,.3), 0 0 1px rgba(0,0,0,.2);
-webkit-box-shadow: -1px -1px 2px rgba(0,0,0,.3), 0 0 1px rgba(0,0,0,.2);
-moz-box-shadow: -1px -1px 2px rgba(0,0,0,.3), 0 0 1px rgba(0,0,0,.2);
}

/*** USER IS FOCUSED ON TEXT BOX ***/
input[type="text"]:focus{
outline: none;
background: #fff; /* Fallback color for non-css3 browsers */

/* Gradients */
background: -webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(255,255,255)), color-stop(1, rgb(235,235,235)));
background: -moz-linear-gradient( center top, rgb(255,255,255) 0%, rgb(235,235,235)  100%);
}

/*** SEARCH BUTTON ***/
input[type="submit"]{
background: #44921f;/* Fallback color for non-css3 browsers */

/* Gradients */
background: -webkit-gradient( linear, left top, left bottom, color-stop(0, rgb(79,188,32)), color-stop(0.15, rgb(73,157,34)), color-stop(0.88, rgb(62,135,28)), color-stop(1, rgb(49,114,21)));
background: -moz-linear-gradient( center top, rgb(79,188,32) 0%, rgb(73,157,34) 15%, rgb(62,135,28) 88%, rgb(49,114,21) 100%);

border: 0;
color: #eee;
cursor: pointer;
float: right;
font: 16px Arial, Helvetica, sans-serif;
font-weight: bold;
height: 30px;
margin: 4px 4px 0;
text-shadow: 0 -1px 0 rgba(0,0,0,.3);
width: 84px;
outline: none;

/* Rounded Corners */
border-radius: 30px; 
-webkit-border-radius: 30px;
-moz-border-radius: 30px;

/* Shadows */
box-shadow: -1px -1px 1px rgba(255,255,255,.5), 1px 1px 0 rgba(0,0,0,.4);
-moz-box-shadow: -1px -1px 1px rgba(255,255,255,.5), 1px 1px 0 rgba(0,0,0,.2);
-webkit-box-shadow: -1px -1px 1px rgba(255,255,255,.5), 1px 1px 0 rgba(0,0,0,.4);
}
/*** SEARCH BUTTON HOVER ***/
input[type="submit"]:hover {
background: #4ea923; /* Fallback color for non-css3 browsers */

/* Gradients */
background: -webkit-gradient( linear, left top, left bottom, color-stop(0, rgb(89,222,27)), color-stop(0.15, rgb(83,179,38)), color-stop(0.8, rgb(66,143,27)), color-stop(1, rgb(54,120,22)));
background: -moz-linear-gradient( center top, rgb(89,222,27) 0%, rgb(83,179,38) 15%, rgb(66,143,27) 80%, rgb(54,120,22) 100%);
}
input[type="submit"]:active {
background: #4ea923; /* Fallback color for non-css3 browsers */

/* Gradients */
background: -webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(89,222,27)), color-stop(0.15, rgb(83,179,38)), color-stop(0.8, rgb(66,143,27)), color-stop(1, rgb(54,120,22)));
background: -moz-linear-gradient( center bottom, rgb(89,222,27) 0%, rgb(83,179,38) 15%, rgb(66,143,27) 80%, rgb(54,120,22) 100%);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:19:02.850

输入提交和输入文本所在的div对于ie7来说可能太小（宽度），所以为ie7使用不同的样式表，为ie7定义不同的宽度属性。您只发布了输入框的 css，但我猜。无论如何，尝试将浮动左或右也用于 input[type="text"] 并同时提供提交和文本输入，**显示：块；**并定义它们的宽度和高度，也可能是 ie7 的行高（以像素为单位）。

# c# - 从数据库中获取引用数据时出错

> ID：11272894
> 
> 赞同：0
> 
> 时间：2012-06-30T09:06:47.707
> 
> 标签：c#

我有疑问，当我从数据库中获取数据时，如果数据库中有一些引用的数据，例如 D`DUN。该数据被插入到数据库中。当我执行选择查询时：

```
 Select city from glmast where glname='" + list_customer.Items[i].Value + "' 
```

在 list_cutomer 中有一些数据，其中插入了一些数据，如 D`DUN，如引号。所以它给出了像未封闭的报价一样的错误。

所以，这将如何解决，因为并非所有字段都包含引号。

请帮帮我.. Mitesh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:08:53.060

在构建 SQL 查询时，您永远不应该使用字符串连接。您应该使用参数化查询。不仅您的代码会在您所描述的情况下中断，而且更糟糕的是，您的代码容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击，如果您的应用程序落入恶意用户的手中，您的数据库将被破坏。

所以参数化的查询：

```
string sql = "SELECT city FROM glmast WHERE glname = @glname";
using (var conn = new SqlConnection("Some connection string"))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.Parameters.AddWithValue("@glname", list_customer.Items[i].Value);
    using (var reader = cmd.ExecuteReader())
    {
        while (reader.Read())
        {
            // do something with the results
        }
    }
} 
```

# javascript - 在节点中关闭范围

> ID：11272900
> 
> 赞同：1
> 
> 时间：2012-06-30T09:07:37.687
> 
> 标签：javascript, node.js

在一个快递应用程序中，我能够做到这一点

```
function donothing() {
}
donothing() 
```

但不是这个

```
(function donothing() {
})() 
```

第二个样本失败

```
TypeError: undefined is not a function 
```

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:27:57.540

您的`;`代码可以正常工作。

反而

```
 (function donothing() {
})() 
```

采用

```
;(function donothing() {
    })() 
```

# c++ - 替换 C++ 矩阵类中特定颜色的所有像素

> ID：11272903
> 
> 赞同：3
> 
> 时间：2012-06-30T09:08:44.193
> 
> 标签：c++, opencv

1）我有一个矩阵类

```
Mat src = imread("/pic.png", 0) 
```

[http://i1265.photobucket.com/albums/jj502/anizilla/demo_result.png](http://i1265.photobucket.com/albums/jj502/anizilla/demo_result.png)

我想将上面给定图像中的所有白色像素替换为黑色。

有没有办法用另一个特定的 RGB 值替换所有像素？

2）当我使用 -

```
src.col(0).row(0) 
```

我得到了正确的值。有没有办法提取每个 RGB 通道的值？

3）当我使用 -

```
src.at<Vec2b>(0,0)[0]; 
```

我得到垃圾值（如`.`和`!`）。如果我使用，我会得到垃圾价值`<Vec2d>`

但。当我使用

```
src.at<Vec2s>(0,0)[0]; 
```

我得到了通道 0 的正确值，并且，

```
src.at<Vec2s>(0,0)[1];
src.at<Vec2s>(0,0)[2]; 
```

返回垃圾号码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T10:20:26.093

如果你做对了，这很简单。

1.  使用显式模板实例化，例如

    ```
    Mat3b src = imread("/pic.png", 0); 
    ```

2.  使用迭代器：

    ```
    for (Mat3b::iterator it = src.begin(); it != src.end(); it++) {
        if (*it == Vec3b(255, 255, 255)) {
            *it = Vec3b(0, 0, 0);
        }
    } 
    ```

抱歉，第一个建议的解决方案 ( `src.setTo(newMat, (src == old));`) 仅适用于单通道矩阵。

# oracle - PL/SQL 中的 DDL 语句？

> ID：11272904
> 
> 赞同：6
> 
> 时间：2012-06-30T09:08:46.540
> 
> 标签：oracle, plsql, ddl

我正在尝试下面的代码在[PL/SQL](http://en.wikipedia.org/wiki/PL/SQL)中创建一个表：

```
DECLARE
    V_NAME VARCHAR2(20);
BEGIN
    EXECUTE IMMEDIATE 'CREATE TABLE TEMP(NAME VARCHAR(20))';
    EXECUTE IMMEDIATE 'INSERT INTO TEMP VALUES(''XYZ'')';
    SELECT NAME INTO V_NAME FROM TEMP;
END;
/ 
```

该`SELECT`语句失败并出现以下错误：

```
PL/SQL: ORA-00942: table or view does not exist 
```

是否有可能一个接一个地`CREATE, INSERT and SELECT`在一个 PL/SQL 块中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T10:16:24.470

我假设您正在执行以下操作：

```
declare
   v_temp varchar2(20);
begin
   execute immediate 'create table temp(name varchar(20))';
   execute immediate 'insert into temp values(''XYZ'')';

   select name into v_name from temp;
end; 
```

在编译时，表 ,`TEMP`不*存在*。它还没有被创建。由于它不存在，因此您无法从中进行选择；因此，您还必须动态执行 SELECT。尽管您可以使用语法，但在这种*特殊*情况下实际上不需要执行 SELECT 。[`returning into`](http://docs.oracle.com/cd/E11882_01/timesten.112/e21639/sqlexamples.htm#TTPLS330)

```
declare
   v_temp varchar2(20)
begin
   execute immediate 'create table temp(name varchar2(20))';
   execute immediate 'insert into temp 
                      values(''XYZ'')
                      returning name into :1'
                returning into v_temp;
end; 
```

但是，需要动态创建表通常表明架构设计不当。这应该没有必要。

我可以推荐[René Nyffenegger 的](https://stackoverflow.com/users/180275/rene-nyffenegger)帖子[“为什么动态 SQL 不好？”](http://www.adp-gmbh.ch/ora/bad_dynamic_sql.html) 从性能的角度来看，您应该尽可能避免使用动态 SQL。[另请注意，您对SQL 注入](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#LNPLS01109)更加开放，应该使用绑定变量并[`DBMS_ASSERT`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_assert.htm)帮助防范它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:28:21.347

如果您多次运行该程序，即使在修改程序以将 select 语句作为动态 SQL 运行或使用 return into 子句后，您也会收到错误。因为当你第一次运行程序时，它会毫无问题地创建表，但是当你下次运行它时，因为表已经第一次创建并且你没有 drop 语句，它会导致错误：“表已经存在于数据库”。所以我的建议是在 pl/sql 程序中创建表之前，请始终检查数据库中是否已经存在同名的表。您可以使用存储元数据的数据字典视图/系统表来执行此检查，具体取决于您的数据库类型。

对于 Oracle 中的示例，您可以使用以下视图来决定是否需要创建表：

DBA_TABLES、ALL_TABLES、USER_TABLES

# apache-flex - 如何用户 unloadStyleDeclarations？

> ID：11272913
> 
> 赞同：0
> 
> 时间：2012-06-30T09:09:18.390
> 
> 标签：apache-flex, flex4

我有一个 flex4 应用程序（mx+spark）。当我使用：

```
FlexGlobals.topLevelApplication.styleManager.loadStyleDeclarations(skinName, true); 
```

这很好用：应用了新样式。

问题是当我应用一种新样式时，它混合了两者：发生这种情况是因为我需要先卸载样式。

我尝试卸载它：

```
FlexGlobals.topLevelApplication.styleManager.unloadStyleDeclarations("style/normal.swf",false); 
```

我总是得到一个错误：

```
ReferenceError: Error #1069: La property 0 cannot be found on Number 
  and there is no default value.
    at normal/unloadOverrides()[null/normal-generated.as:721]
    at normal/unload()[null/normal-generated.as:676] 
```

关于如何在 Flex4 中加载/卸载 swf css 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:07:58.783

下次调用以下方法之一并将 update 属性设置为 true 时，样式将被更新：

```
clearStyleDeclaration()

loadStyleDeclarations()

setStyleDeclaration()

unloadStyleDeclarations() 
```

通常，如果您多次调用这些方法之一，则仅在最后一次调用时将此属性设置为 true，以便 Flex 不会`styleChanged()`多次调用该方法。

更多信息[在这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/styles/IStyleManager.html#setStyleDeclaration%28%29)。

# python - 使用 Eclipse 完成 SimpleCV 代码

> ID：11272914
> 
> 赞同：1
> 
> 时间：2012-06-30T09:09:20.403
> 
> 标签：python, eclipse, simplecv

在遇到一些问题后，我最近设法让 SimpleCV 启动并运行。我现在安装了一个可以工作的 SimpleCV，并将它与 Eclipse Indigo 一起使用。但是，我从 SimpleCV 导入的所有内容都标记为红色，并且 Eclipse 声明它找不到指定的导入（即使导入的函数工作正常）。

有什么方法可以让 Eclipse 识别来自 SimpleCV 的导入，以便我可以使用它的 Ctrl-Space 代码完整功能？

我尝试将“SimpleCV”添加到 Forced Builtins，但没有成功。（当我对 OpenCV 遇到同样的问题时，我就是这样做的，然后它就起作用了）

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:41:23.527

SimpleCV 中的导入非常糟糕。我一直在努力解决您遇到的同样问题。他们不想修复它的原因（根据他们在他们网站上的回答（[http://help.simplecv.org/question/472/code-completion-with-eclipse/](http://help.simplecv.org/question/472/code-completion-with-eclipse/)）并不是因为他们“都使用vim、emacs、vi”，但是因为他们的很多代码都依赖于使用 * 导入将很多库拉入本地命名空间。这充其量是懒惰的编程，否则真的很糟糕。

哎呀，你甚至不能自己导入他们的一些文件，因为它们依赖于 SimpleCV **init** .py 文件和已经导入的 base.py 文件。这两个文件都有很多一揽子导入。我想知道为什么 import SimpleCV 需要超过 2 秒才能在我的带有 SSD 的电脑上运行。现在我知道了。

他们的 init.py 文件有这些导入：

```
from SimpleCV.base import *
from SimpleCV.Camera import *
from SimpleCV.Color import *
from SimpleCV.Display import *
from SimpleCV.Features import *
from SimpleCV.ImageClass import *
from SimpleCV.Stream import *
from SimpleCV.Font import *
from SimpleCV.ColorModel import *
from SimpleCV.DrawingLayer import *
from SimpleCV.Segmentation import *
from SimpleCV.MachineLearning import * 
```

他们的 base.py 文件还有更多的导入：

```
import os
import sys
import warnings
import time
import socket
import re
import urllib2
import types
import SocketServer
import threading
import tempfile
import zipfile
import pickle
import glob #for directory scanning
import abc #abstract base class
import colorsys
import logging
import pygame as pg
import scipy.ndimage as ndimage
import scipy.stats.stats as sss  #for auto white balance
import scipy.cluster.vq as scv    
import scipy.linalg as nla  # for linear algebra / least squares
import math # math... who does that 
import copy # for deep copy
import numpy as np
import scipy.spatial.distance as spsd
import scipy.cluster.vq as cluster #for kmeans
import pygame as pg
import platform
import copy
import types
import time

from numpy import linspace
from scipy.interpolate import UnivariateSpline
from warnings import warn
from copy import copy
from math import *
from pkg_resources import load_entry_point
from SimpleHTTPServer import SimpleHTTPRequestHandler
from types import IntType, LongType, FloatType, InstanceType
from cStringIO import StringIO
from numpy import int32
from numpy import uint8
from EXIF import *
from pygame import gfxdraw
from pickle import * 
```

您知道他们声称要转换所有这些不同的 CV 库并将“Pythonic”方法应用于它们。但是这种进口混乱只是清楚地证明了他们错了。

我修复他们的导入的尝试是从他们的 init.py 文件中删除所有这些 import *，这有助于解决它在 eclipse 中出现的代码完成延迟。然后将SimpleCV egg 目录（C:\Python27\Lib\site-packages\simplecv-1.3-py2.7.egg）作为外部库导入eclipse。在那之后，我能够运行这个：

```
from SimpleCV.ImageClass import Image 
```

导入颜色也是如此：

```
from SimpleCV.Color import Color 
```

有周期性进口，所以要小心那些，因为它们可能会咬你。在导入 SimpleCV.ImageClass 之前尝试导入 SimpleCV.Color 时，我自己也有过一个。请注意，通过上述说明，我似乎能够从 Eclipse 获得代码完成。

# php - 以下步骤对保护我的登录过程是否有意义？

> ID：11272916
> 
> 赞同：1
> 
> 时间：2012-06-30T09:09:31.920
> 
> 标签：php, security, login, system

您好，我想建立一个不错的登录系统，我正在考虑这些步骤，希望您能告诉我这对黑客和破解者是否真的有效:)

1-在我的登录表单中，每次加载页面时，我都会生成这些 SESSION 变量

```
SESSION1 = random()
SESSION2 = random()
SESSION3 = random()
SESSION4 = time()
SESSIONHASHKEY = array(){[SESSION1 digits]};
SESSIONRESULT = hash(Concatenation of caracters at position  situated inside the SESSIONHASHKEY array from the SESSION2);
Set the name of the button of the login to the SESSION3 number) 
```

2-在我的登录表单（用户输入用户名和密码）和我的身份验证页面（我的代码将验证用户名和密码是否正确）之间放置一个名为 auth.php 的文件

```
if !isset SESSION1 redirect login page
if !isset SESSION2 redirect login page
if !isset SESSION3 redirect login page
if !isset SESSION4 redirect login page

if SESSION1 digits array != SESSIONHASHKEY redirect loginpage
if MD5(concatenation of caracters at position situated inside the SESSIONHASHKEY) != SESSIONRESULT redirect loginpage

if !isset loginbutton_{SHA256(MD5(SHA256(MD5(SHA256(SESSION3)))))} redirect login page
if (time() - SESSION4) >10 redirect loginpage 
```

如果测试成功通过，我将重定向到在会话中传递用户名和密码的身份验证页面

这是我的场景，所以我希望你能帮助我定义看起来像过程的安全级别:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:55:54.430

据我所知，您并没有从引入中间页面所增加的所有复杂性中受益。除此之外，您正在对哈希哈希的哈希进行哈希处理（显着增加重复哈希的可能性）并显着增加登录的处理时间。

除非你有特定的理由去尝试做任何不必要的复杂事情，否则不要试图重新发明轮子。在网络上可以找到比这种方法更多的简单和安全（如果不是更多的话）。

本文提供了一些构建安全登录的良好实践： [PHP Secure Login Tips And Tricks](http://hungred.com/useful-information/php-secure-login-tips-and-tricks/)

# android - ListView 项内的水平滚动视图？

> ID：11272918
> 
> 赞同：6
> 
> 时间：2012-06-30T09:10:07.983
> 
> 标签：android, android-layout

我有一个在中心`ListView`使用 a 的项目布局。`HorizontalScrollView`我已经`android:descendantFocusability="blocksDescendants"`在我的父母上使用了 android 属性“”，`LinearLayout`以便这些`ListView`项目仍然可以选择。

我遇到的问题是，当单击`ListView`项目的一部分时`HorizontalScrollView`，`ListView`不会调用项目单击事件。

如何获取`HorizontalScrollView`调用`ListView`列表项点击事件的点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:37:27.990

HorizontalScrollView doesn't have **"onClick()"**, see this [http://developer.android.com/reference/android/widget/HorizontalScrollView.html](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)

It support gestures and have **"onTouchEvent(MotionEvent ev)"**

So you can use it as click. See followin demo which I hav prepared.

```
//      Followin  code will not work  for HorizontalScrollView
        /*hsv1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(HorizontalListActivity.this, tvMiddle.getText().toString().trim(), Toast.LENGTH_SHORT).show();
            }
        });*/

        hsv1.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Toast.makeText(YourActivity.this, "Your Msg", Toast.LENGTH_SHORT).show();
                return false;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T21:46:27.877

如下向适配器类添加布尔变量 touchDown 和 touchUp 似乎效果很好：

```
private class MyListAdapter extends ArrayAdapter<MyObject>{
    ...
    //touch down + touch up with no other motion events in between = click
    boolean touchDown = false;
    boolean touchUp = false;
    private int iHostViewID;
    ...

    public MyListAdapter(Context context,int viewResourceId, List<MyObject> objects) {
        super(context, textViewResourceId, objects);
        iHostViewID = viewResourceId;
    }

    @Override
    public View getView(int pos, View convertView, ViewGroup parent){
        View itemView = convertView;

        //iff we cannot re-use a view
        if(itemView == null){
            LayoutInflater inflater = (
            (LayoutInflater)hContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            itemView = inflater.inflate(iHostViewID, null);
        }

        final View hItemView = itemView;
        final int hPosition = pos;
        ...
        final HorizontalScrollView textDataSV = 
        (HorizontalScrollView)itemView.findViewById(R.id.widget_hsv);
        textDataSV.setOnTouchListener(new OnTouchListener(){

                @Override
                public boolean onTouch(View v, MotionEvent event) {

                    if(event.getAction() == MotionEvent.ACTION_DOWN){

                        touchDown = true;
                    }
                    else if(event.getAction() == MotionEvent.ACTION_UP){

                        touchUp = true;
                     }

                    else{

                        touchDown = false;
                        touchUp = false;
                    }

                    if(touchDown && touchUp){
                        //click 
                        //mMyListView is the reference to the list view
                        //instantiated in the view controller class responsible
                        //for setting this adapter class as the list view's adapter
                        mMyListView.performItemClick(hItemView, hPosition, 
                        hItemView.getId());
                    }

                    return false;
                 }
         });
    }
} 
```

它远非完美，但应该适用于大多数标准用例

# ruby - 如何在Ruby中对数组中对象的属性求和

> ID：11272929
> 
> 赞同：53
> 
> 时间：2012-06-30T09:12:24.010
> 
> 标签：ruby, arrays, object, sum, inject

我知道为了在 Ruby 中对数组元素求和，可以使用注入方法，即

```
array = [1,2,3,4,5];
puts array.inject(0, &:+) 
```

但是我如何总结对象数组中对象的属性，例如？

例如，有一个对象数组，每个对象都有一个属性“现金”。所以我想把他们的现金余额加起来。就像是...

```
array.cash.inject(0, &:+) # (but this doesn't work) 
```

我意识到我可能会创建一个仅由属性 cash 组成的新数组并将其相加，但如果可能的话，我正在寻找一种更清洁的方法！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-30T09:13:57.343

```
array.map(&:cash).inject(0, &:+) 
```

或者

```
array.inject(0){|sum,e| sum + e.cash } 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-12-17T21:01:54.420

在 Ruby On Rails 中，您还可以尝试：

`array.sum(&:cash)`

它是注入业务的捷径，对我来说似乎更具可读性。
[http://api.rubyonrails.org/classes/Enumerable.html](http://api.rubyonrails.org/classes/Enumerable.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-30T09:15:14.050

`#reduce`需要一个块（这`&:+`是创建 proc/block 的快捷方式`+`）。这是做你想做的事情的一种方式：

```
array.reduce(0) { |sum, obj| sum + obj.cash } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-02T20:47:34.690

最简洁的方式：

```
array.map(&:cash).sum 
```

如果地图的结果数组包含 nil 项：

```
array.map(&:cash).compact.sum 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-08T00:25:16.583

如果求和的起始值为 0，则单独的 sum 与注入相同：

```
array.map(&:cash).sum 
```

我更喜欢块版本：

```
array.sum { |a| a.cash } 
```

因为 Proc from 符号通常太有限（没有参数等）。

（需要 Active_Support）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-12T18:17:59.683

这里有一些有趣的基准

```
array = Array.new(1000) { OpenStruct.new(property: rand(1000)) }

Benchmark.ips do |x|
  x.report('map.sum') { array.map(&:property).sum }
  x.report('inject(0)') { array.inject(0) { |sum, x| sum + x.property } }
  x.compare!
end 
```

和结果

```
Calculating -------------------------------------
             map.sum   249.000  i/100ms
           inject(0)   268.000  i/100ms
-------------------------------------------------
             map.sum      2.947k (± 5.1%) i/s -     14.691k
           inject(0)      3.089k (± 5.4%) i/s -     15.544k

Comparison:
           inject(0):     3088.9 i/s
             map.sum:     2947.5 i/s - 1.05x slower 
```

如您所见，注入速度更快

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-30T10:58:29.867

不需要在inject中使用initial并且plus操作可以更短

```
array.map(&:cash).inject(:+) 
```

# java - 如何在摇摆中将面板保存为图像？

> ID：11272938
> 
> 赞同：14
> 
> 时间：2012-06-30T09:14:20.983
> 
> 标签：java, image, swing, panel, graphics2d

您好我想将包含标签和按钮等组件的面板转换为图像文件。

我已经完成了以下代码。图像已保存。但面板的内容不可见或未保存。谁能告诉我如何保存面板及其组件。

代码：

```
package PanelToImage;

import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.*;

public class sample extends JPanel {

public JPanel firstpanel;
public JPanel secondpanel;
JLabel label1, label2;
JButton button1, button2;

public sample() {
    firstpanel = new JPanel();
    firstpanel.setSize(400,300); 
    firstpanel.setBackground(Color.RED);
    secondpanel = new JPanel();
    secondpanel.setBackground(Color.GREEN);
    secondpanel.setSize(400,300); 

    label1 = new JLabel("label1");
    label2 = new JLabel("label2");
    button1 = new JButton("button1");
    button2 = new JButton("button2");

    firstpanel.add(label1);
    firstpanel.add(button1);

    secondpanel.add(label2);
    secondpanel.add(button2);

    saveImage(firstpanel);

    add(firstpanel);

    // add(secondpanel);
}

public static void main(String args[]) {

    JFrame frame = new JFrame();
    sample sam = new sample();
    frame.setContentPane(sam);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 300);

}

private void saveImage(JPanel panel) {
    BufferedImage img = new BufferedImage(panel.getWidth(), panel.getHeight(), BufferedImage.TYPE_INT_RGB);
    panel.paint(img.getGraphics());
    try {
        ImageIO.write(img, "png", new File("E://Screen.png"));
        System.out.println("panel saved as image");

    } catch (Exception e) {
        System.out.println("panel not saved" + e.getMessage());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-30T09:25:06.903

此代码适用于我（在 中`JFrame`）：

```
Container c = getContentPane();
BufferedImage im = new BufferedImage(c.getWidth(), c.getHeight(), BufferedImage.TYPE_INT_ARGB);
c.paint(im.getGraphics());
ImageIO.write(im, "PNG", new File("shot.png")); 
```

也许您使用过自定义面板。如果为真，请尝试在面板方法`super.paint(g)`的开头添加。`paint`

**编辑**：您必须在显示框架`saveImage` *后调用：*

```
public static void main(String args[]) {
    ...
    frame.setSize(400, 300);
    sam.saveImage(sam.firstpanel);
} 
```

**编辑2**：这是保存的图像（因为布局很少，但它应该工作的证明）：

![在此处输入图像描述](../Images/7d2330bb885c5c3ae6b7eea51bb2edf5.png)

我在 中调用了`saveImage`as last 调用`main`，并在用户 dir ( `new File("Screen.png")`) 中使用了一个文件，如[nIcE cOw](https://stackoverflow.com/questions/11272938/how-to-save-panel-as-image-in-swing)所说。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T14:17:51.573

在这里尝试这个示例程序，而不是使用`getGraphics()`似乎你必须使用`createGraphics()`你`BufferedImage`将要制作的东西。

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.*;

public class SnapshotExample
{
    private JPanel contentPane;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Snapshot Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBackground(Color.WHITE);
        JLabel label = new JLabel("This JLabel will display"
                        + " itself on the SNAPSHOT", JLabel.CENTER);
        contentPane.add(label);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        makePanelImage(contentPane);
    }

    private void makePanelImage(Component panel)
    {
        Dimension size = panel.getSize();
        BufferedImage image = new BufferedImage(
                    size.width, size.height 
                              , BufferedImage.TYPE_INT_RGB);
        Graphics2D g2 = image.createGraphics();
        panel.paint(g2);
        try
        {
            ImageIO.write(image, "png", new File("snapshot.png"));
            System.out.println("Panel saved as Image.");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {           
                new SnapshotExample().displayGUI();
            }
        });
    }
} 
```

# c - goto 不使用 ?: C 中的运算符

> ID：11272947
> 
> 赞同：1
> 
> 时间：2012-06-30T09:15:05.233
> 
> 标签：c, goto, conditional-operator

出于学习目的，我编写了以下代码片段：

```
for(int i=0;i<10;i++)
{
  for(int j = 0;j<5;j++)        
  {
    //(i==j && i==3)? (goto found) : printf("stya here\n");        
    if(i==j && i==3){goto found;} else {printf("stay here\n");}
  }
}

found:
  printf("yes I am here"); 
```

但是我想知道当我发现内部循环中省略的语句没有给出错误时，现在我对 if-else 并不总是可以用`?:`运算符替换感到困惑。这里的事实是什么？为什么注释语句会出错？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T09:19:45.053

运算符`?:`不能替代. `if`它仅适用于表达式：`condition ? expr1 : expr2`其中两个子表达式`expr1`和`expr2`是相同类型（然后整个表达式是相同类型）。

`goto`不是表达，是陈述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T09:42:44.657

我对 C 语言不够精通，无法解释为什么这在语法上不起作用，但在意图的意义上， ?: 三元运算符形式旨在作为条件表达式（产生结果），而不是作为控制流机制。使用 if 语句，您可以为变量选择一个值或更改应用程序的流程。例如

```
//Change flow

if(x ==0)
{
   //do this
} 
else
{
 //goto some label
} 
```

或者

```
//Change value
    if(x == 0)
    {
      y = 1;
    }
    else
    {
      y = 2;
    } 
```

三元仅用于第二种情况，作为条件表达式，即

```
y = (x ==0) ? 1 :2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-20T15:54:58.593

实际上，如果您的编译器支持扩展[Statement Expressions](https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html#Statement-Exprs)，您尝试使用 goto 和三元运算符执行的操作是可能的，顾名思义，此扩展允许您在表达式或子表达式中编写语句，就像这样：

```
(rand() % 2) ? ({goto lbl1;}) : ({goto lbl2;}); 
```

使用这些语句可能非常有用（主要用于优化宏），但通常会导致非常脏的代码，就像我给出的示例一样 :)

因此，为了补充其他答案，我会说在 C99/11 中没有扩展是不可能的，但最近的大多数编译器都支持一堆扩展，可以让你做非标准的很酷的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T09:19:57.607

“goto found”表达式的结果是什么？我不知道，编译器也不知道，所以`?`无法确定表达式的结果，因此出现错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T09:30:33.737

一般来说，`?:`运算符不能替代经典的`if() ... else() ...`. 如果两个运算符（和条件）都是值或返回值的表达式，则可以这样使用它。您不能将它们与`goto`,`break`或之类的语句一起使用`continue`。

以下是可能的：

```
condition ? dothis() : dothat(); // there's no assignment, but it's still valid
var = condition ? dothis() : othervar;
condition ? (var=4, othervar=3) : (somevar = 1); 
```

但是你不能包含任何不是表达式的东西（即没有任何价值或结果的东西）：

```
condition ? continue : break; // statements letting the execution continue somewhere else
condition ? {var = 4; othervar = 3;} : dothat(); // trying to inline scopes/multiple exressions
var = condition ? while(var) {var--;} : 5; // similar, inlining a complete loop 
```

可以完成最后这些示例，但它们需要您使用`if()`或函数体来调用：

```
if (condition) continue; else break;
condition ? (var = 4, var = 3) : dothat();
var = condition ? dotheloop(var) : 5; // ok, this could be 'var = condition ? 0 : 5;' but... example code 
```

# python - PyQt4 @pyqtSlot：kwarg 的结果是什么？

> ID：11272951
> 
> 赞同：8
> 
> 时间：2012-06-30T09:15:41.357
> 
> 标签：python, pyqt, pyqt4, signals-slots

通过阅读[本文](https://www.riverbankcomputing.com/static/Docs/PyQt4/new_style_signals_slots.html#the-pyqtslot-decorator)，出现了两个问题：

1\. 它说

> 有时需要将 Python 方法显式标记为 Qt 插槽

虽然我总是使用 @pyqtSlot 装饰器，因为它说：

> 将信号连接到修饰的 Python 方法还具有减少内存使用量的优势，并且速度稍快

我问自己：在哪些具体情况下是必要的？并且：不使用@pyqtSlot 装饰器有什么好处吗？

2\. result关键字参数，它的作用是什么？

```
@pyqtSlot(int, result=int)
def foo(self, arg1):
    """ C++: int foo(int) """ 
```

它看起来像返回值的类型，但 AFAIK 您在发出信号时无法检索返回值。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T10:33:31.570

1.  由于 PyQt 架构，它更快。PyQt 将 python 插槽转换为 C++ 插槽，以便与 Qt 框架进行通信。当您将 Python 方法显式标记为 Qt 插槽并为其提供 C++ 签名时，PyQt 代码不必猜测 C++ 签名本身，因为它已经指定。这可能会提高重型项目的性能。

2.  仅当您想将插槽作为普通函数调用时才需要返回值。

**编辑**：似乎该[`QMetaObject.invokeMethod`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qmetaobject.html#invokeMethod)方法执行了一个插槽并使用它的返回值。

# jsf - 在单个 JSF 中使用两个控制器时发生 ClassCastException

> ID：11272952
> 
> 赞同：1
> 
> 时间：2012-06-30T09:16:50.663
> 
> 标签：jsf, jakarta-ee, jpa, netbeans, glassfish

我正在使用 Netbeans 使用 JPA 开发 JSF 应用程序。我创建实体类，然后通过 Netbeans 从实体类生成 JSF 页面。它创建一个 AbstractFacade、为每个实体扩展抽象外观的外观、每个实体的控制器 bean 和一个 JSF 页面。然后我改变并使用这些生成的代码来创建我的逻辑。

**当我在单个 JSF 页面中使用两个控制器 bean 时，**会*间歇性地出现* ClassCastException 。但是当我重新启动 GLassFish 服务器时，异常消失了一段时间并再次出现，我无法找出是什么引发了更改。例如，考虑有一个名为 Atm 的实体的情况。它有一个属性 MedicineGroup，它也是另一个实体。当要通过 JSF 页面保存来自 Atm 实体的对象时，我让所有 MedicineGroups 调用 MedicineGroupController 并将其分配给 Atm 对象的选定 GenericName 属性。在发生 ClassCastException 之前，此逻辑运行良好。

 **（大多数JSF页面都使用上述相同的方法。Atm实体具有Vtm的属性。Ampp具有Atm atm，MeasurmentUnitstrengthUnit，Doublestrength，Double rol等peoperties。）

我也可以通过更改逻辑来完成相同的事情，这样每个 JSF 页面只有一个控制器，但是如果可以在同一个 JSF 页面中引用多个控制器 bean，那就很容易了。

这里有什么问题？

* * *

我在下面列出了一些重要的代码。

JSF 页面的相关部分。

```
<h:selectOneListbox id="txtGroup" value="#{vtmController.current.medicineGroup}" size="5" >
    <f:selectItems value="#{medicineGroupController.items}" var="gp" itemValue="#{gp}" itemLabel="#{gp.name}"/>
</h:selectOneListbox> 
```

* * *

实体类的示例

```
@Entity
@Inheritance
public class Vtm extends PharmaceuticalItem implements Serializable {

@ManyToOne
MedicineGroup medicineGroup;

public MedicineGroup getMedicineGroup() {
    return medicineGroup;
}

public void setMedicineGroup(MedicineGroup medicineGroup) {
    this.medicineGroup = medicineGroup;
}

} 
```

* * *

控制器类示例，其中包括一个自动生成的转换器。

```
@ManagedBean
@SessionScoped
public final class VtmController {

@EJB
private VtmFacade ejbFacade;
SessionController sessionController = new SessionController();
List<Vtm> lstItems;
private Vtm current;
private DataModel<Vtm> items = null;
private int selectedItemIndex;
boolean selectControlDisable = false;
boolean modifyControlDisable = true;
String selectText = "";

public VtmController() {
}

public List<Vtm> getLstItems() {
    return getFacade().findBySQL("Select d From Vtm d");
}

public void setLstItems(List<Vtm> lstItems) {
    this.lstItems = lstItems;
}

public int getSelectedItemIndex() {
    return selectedItemIndex;
}

public void setSelectedItemIndex(int selectedItemIndex) {
    this.selectedItemIndex = selectedItemIndex;
}

public Vtm getCurrent() {
    if (current == null) {
        current = new Vtm();
    }
    return current;
}

public void setCurrent(Vtm current) {
    this.current = current;
}

private VtmFacade getFacade() {
    return ejbFacade;
}

public DataModel<Vtm> getItems() {
    items = new ListDataModel(getFacade().findAll("name", true));
    return items;
}

public static int intValue(long value) {
    int valueInt = (int) value;
    if (valueInt != value) {
        throw new IllegalArgumentException(
                "The long value " + value + " is not within range of the int type");
    }
    return valueInt;
}

public DataModel searchItems() {
    recreateModel();
    if (items == null) {
        if (selectText.equals("")) {
            items = new ListDataModel(getFacade().findAll("name", true));
        } else {
            items = new ListDataModel(getFacade().findAll("name", "%" + selectText + "%",
                    true));
            if (items.getRowCount() > 0) {
                items.setRowIndex(0);
                current = (Vtm) items.getRowData();
                Long temLong = current.getId();
                selectedItemIndex = intValue(temLong);
            } else {
                current = null;
                selectedItemIndex = -1;
            }
        }
    }
    return items;

}

public Vtm searchItem(String itemName, boolean createNewIfNotPresent) {
    Vtm searchedItem = null;
    items = new ListDataModel(getFacade().findAll("name", itemName, true));
    if (items.getRowCount() > 0) {
        items.setRowIndex(0);
        searchedItem = (Vtm) items.getRowData();
    } else if (createNewIfNotPresent) {
        searchedItem = new Vtm();
        searchedItem.setName(itemName);
        searchedItem.setCreatedAt(Calendar.getInstance().getTime());
        searchedItem.setCreater(sessionController.loggedUser);
        getFacade().create(searchedItem);
    }
    return searchedItem;
}

private void recreateModel() {
    items = null;
}

public void prepareSelect() {
    this.prepareModifyControlDisable();
}

public void prepareEdit() {
    if (current != null) {
        selectedItemIndex = intValue(current.getId());
        this.prepareSelectControlDisable();
    } else {
        JsfUtil.addErrorMessage(new MessageProvider().getValue("nothingToEdit"));
    }
}

public void prepareAdd() {
    selectedItemIndex = -1;
    current = new Vtm();
    this.prepareSelectControlDisable();
}

public void saveSelected() {
    if (selectedItemIndex > 0) {
        getFacade().edit(current);
        JsfUtil.addSuccessMessage(new MessageProvider().getValue("savedOldSuccessfully"));
    } else {
        current.setCreatedAt(Calendar.getInstance().getTime());
        current.setCreater(sessionController.loggedUser);
        getFacade().create(current);
        JsfUtil.addSuccessMessage(new MessageProvider().getValue("savedNewSuccessfully"));
    }
    this.prepareSelect();
    recreateModel();
    getItems();
    selectText = "";
    selectedItemIndex = intValue(current.getId());
}

public void addDirectly() {
    JsfUtil.addSuccessMessage("1");
    try {

        current.setCreatedAt(Calendar.getInstance().getTime());
        current.setCreater(sessionController.loggedUser);

        getFacade().create(current);
        JsfUtil.addSuccessMessage(new MessageProvider().getValue("savedNewSuccessfully"));
        current = new Vtm();
    } catch (Exception e) {
        JsfUtil.addErrorMessage(e, "Error");
    }

}

public void cancelSelect() {
    this.prepareSelect();
}

public void delete() {
    if (current != null) {
        current.setRetired(true);
        current.setRetiredAt(Calendar.getInstance().getTime());
        current.setRetirer(sessionController.loggedUser);
        getFacade().edit(current);
        JsfUtil.addSuccessMessage(new MessageProvider().getValue("deleteSuccessful"));
    } else {
        JsfUtil.addErrorMessage(new MessageProvider().getValue("nothingToDelete"));
    }
    recreateModel();
    getItems();
    selectText = "";
    selectedItemIndex = -1;
    current = null;
    this.prepareSelect();
}

public boolean isModifyControlDisable() {
    return modifyControlDisable;
}

public void setModifyControlDisable(boolean modifyControlDisable) {
    this.modifyControlDisable = modifyControlDisable;
}

public boolean isSelectControlDisable() {
    return selectControlDisable;
}

public void setSelectControlDisable(boolean selectControlDisable) {
    this.selectControlDisable = selectControlDisable;
}

public String getSelectText() {
    return selectText;
}

public void setSelectText(String selectText) {
    this.selectText = selectText;
    searchItems();
}

public void prepareSelectControlDisable() {
    selectControlDisable = true;
    modifyControlDisable = false;
}

public void prepareModifyControlDisable() {
    selectControlDisable = false;
    modifyControlDisable = true;
}

@FacesConverter(forClass = Vtm.class)
public static class VtmControllerConverter implements Converter {

    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        VtmController controller = (VtmController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "vtmController");
        return controller.ejbFacade.find(getKey(value));
    }

    java.lang.Long getKey(String value) {
        java.lang.Long key;
        key = Long.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Long value) {
        StringBuffer sb = new StringBuffer();
        sb.append(value);
        return sb.toString();
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof Vtm) {
            Vtm o = (Vtm) object;
            return getStringKey(o.getId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type "
                    + object.getClass().getName() + "; expected type: " + VtmController.class.getName());
        }
    }
}
} 
```

* * *

立面示例

```
@Stateless
public class VtmFacade extends AbstractFacade<Vtm> {
@PersistenceContext(unitName = "HOPU")
private EntityManager em;

@Override
protected EntityManager getEntityManager() {
    return em;
}

public VtmFacade() {
    super(Vtm.class);
}

} 
```

* * *

生成的抽象外观和我所做的更改。

```
public abstract class AbstractFacade<T> {

protected Class<T> entityClass;

public AbstractFacade(Class<T> entityClass) {
    this.entityClass = entityClass;
}

protected abstract EntityManager getEntityManager();

public void create(T entity) {
    getEntityManager().persist(entity);
}

public void edit(T entity) {
    getEntityManager().merge(entity);
}

public void remove(T entity) {
    getEntityManager().remove(getEntityManager().merge(entity));
}

public T find(Object id) {
    return getEntityManager().find(entityClass, id);
}

public List<T> findAll(boolean withoutRetired) {
    return findAll(null, null, withoutRetired);
}

public List<T> findAll() {
    javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
    javax.persistence.criteria.CriteriaQuery<T> cq = cb.createQuery(entityClass);
    javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
    return getEntityManager().createQuery(cq).getResultList();
}

public List<T> findAll(String fieldName) {
    return findAll(fieldName, "", false);
}

public List<T> findAll(String fieldName, boolean withoutRetired) {
    return findAll(fieldName, "", withoutRetired);
}

public List<T> findAll(String fieldName, String fieldValue) {
    return findAll(fieldName, fieldValue, false);
}

public List<T> findBySQL(String temSQL) {
    TypedQuery<T> qry = getEntityManager().createQuery(temSQL, entityClass);
    return qry.getResultList();
}

public List<T> findBySQL(String temSQL, Map<String, Date> parameters) {
    TypedQuery<T> qry = getEntityManager().createQuery(temSQL, entityClass);
    Set s=parameters.entrySet();
    Iterator it=s.iterator();
    while (it.hasNext()){
        Map.Entry m=(Map.Entry)it.next();
        Date pVal =  (Date) m.getValue();
        String pPara=(String) m.getKey();
        qry.setParameter(pPara, pVal, TemporalType.DATE);
        System.out.println("Parameter " + pPara + "\tVal" + pVal);
    }
    return qry.getResultList();
}    

private void test(Class myClass, Object ob) {
}

public List<T> findAll(String fieldName, String fieldValue, boolean withoutRetired) {
    javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
    javax.persistence.criteria.CriteriaQuery<T> cq = cb.createQuery(entityClass);
    javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
    ParameterExpression<String> p = cb.parameter(String.class);
    Predicate predicateField = cb.like(rt.<String>get(fieldName), fieldValue);
    Predicate predicateRetired = cb.equal(rt.<Boolean>get("retired"), false);
    Predicate predicateFieldRetired = cb.and(predicateField, predicateRetired);

    if (withoutRetired && !fieldValue.equals("")) {
        cq.where(predicateFieldRetired);
    } else if (withoutRetired) {
        cq.where(predicateRetired);
    } else if (!fieldValue.equals("")) {
        cq.where(predicateField);
    }

    if (!fieldName.equals("")) {
        cq.orderBy(cb.asc(rt.get(fieldName)));
    }

    return getEntityManager().createQuery(cq).getResultList();
}

public List<T> findExact(String fieldName, String fieldValue, boolean withoutRetired) {
    javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
    javax.persistence.criteria.CriteriaQuery<T> cq = cb.createQuery(entityClass);
    javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
    ParameterExpression<String> p = cb.parameter(String.class);
    Predicate predicateField = cb.equal(cb.upper(rt.<String>get(fieldName)), fieldValue.toLowerCase());
    Predicate predicateRetired = cb.equal(rt.<Boolean>get("retired"), false);
    Predicate predicateFieldRetired = cb.and(predicateField, predicateRetired);

    if (withoutRetired && !fieldValue.equals("")) {
        cq.where(predicateFieldRetired);
    } else if (withoutRetired) {
        cq.where(predicateRetired);
    } else if (!fieldValue.equals("")) {
        cq.where(predicateField);
    }

    if (!fieldName.equals("")) {
        cq.orderBy(cb.asc(rt.get(fieldName)));
    }

    return getEntityManager().createQuery(cq).getResultList();
}

public T findByField(String fieldName, String fieldValue, boolean withoutRetired) {
    List<T> lstAll = findExact(fieldName, fieldValue, true);
    if (lstAll.isEmpty()) {
        return null;
    } else {
        return lstAll.get(0);
    }
}

public T findFirstBySQL(String temSQL) {
    TypedQuery<T> qry = getEntityManager().createQuery(temSQL, entityClass);
    try {
        return qry.getResultList().get(0);
    } catch (Exception e) {
        System.out.println(e.getMessage());
        return null;
    }
}

public <U> List<T> testMethod(U[] a, Collection<U> all) {
    List<T> myList = new ArrayList<T>();
    return myList;
}

public <U> List<T> findAll(String fieldName, int searchID, boolean withoutRetired) {

    javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
    javax.persistence.criteria.CriteriaQuery<T> cq = cb.createQuery(entityClass);
    javax.persistence.criteria.Root<T> rt = cq.from(entityClass);

    if (withoutRetired) {
        cq.where(cb.and(cb.equal(rt.get("retired"), false)),
                (cb.equal(rt.get(fieldName).get("id"), searchID)));
    } else {
        cq.where(cb.equal(rt.get("retired"), false));
    }

    return getEntityManager().createQuery(cq).getResultList();
}

public int count() {
    javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
    cq.select(getEntityManager().getCriteriaBuilder().count(rt));
    javax.persistence.Query q = getEntityManager().createQuery(cq);
    return ((Long) q.getSingleResult()).intValue();
}

public Double findAggregateDbl(String strJQL){
    Query q= getEntityManager().createQuery(strJQL);
    try{
        return (Double) q.getSingleResult();
    }catch (Exception e){
        System.out.println(e.getMessage());
        return 0.0;
    }
}

} 
```

* * *

这是异常引用的代码。

```
 AtmController controller = (AtmController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "atmController"); 
```

在不同的实例中，这个对应的地方相同，但控制器不同。当错误发生一次时，尽管 JSF 页面访问后缀，相同的控制器给出错误，但在服务器重新启动后，控制器会根据错误开始发生的页面而有所不同。

这是完整的堆栈跟踪。（控制器类的名称会根据我用来访问的 JSF 页面而有所不同。）

```
INFO: java.lang.ClassCastException: gov.sp.health.bean.VtmController cannot be cast to gov.sp.health.bean.AtmController
java.lang.ClassCastException: gov.sp.health.bean.VtmController cannot be cast to gov.sp.health.bean.AtmController
    at gov.sp.health.bean.AtmController$VtmControllerConverter.getAsObject(AtmController.java:252)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:171)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectOneValue(MenuRenderer.java:202)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:319)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:508)
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1590)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIForm.visitTree(UIForm.java:344)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:376)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:252)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1170)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

AtmController 内的转换器

```
@FacesConverter(forClass = Atm.class)
public static class AtmControllerConverter implements Converter {

    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        AtmController controller = (AtmController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "atmController");
        return controller.ejbFacade.find(getKey(value));
    }

    java.lang.Long getKey(String value) {
        java.lang.Long key;
        key = Long.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Long value) {
        StringBuffer sb = new StringBuffer();
        sb.append(value);
        return sb.toString();
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof Atm) {
            Atm o = (Atm) object;
            return getStringKey(o.getId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type "
                    + object.getClass().getName() + "; expected type: " + AtmController.class.getName());
        }
    }
} 
```

* * *

VtmController 内的转换器

```
@FacesConverter(forClass = Vtm.class)
public static class VtmControllerConverter implements Converter {

    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        VtmController controller = (VtmController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "vtmController");
        return controller.ejbFacade.find(getKey(value));
    }

    java.lang.Long getKey(String value) {
        java.lang.Long key;
        key = Long.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Long value) {
        StringBuffer sb = new StringBuffer();
        sb.append(value);
        return sb.toString();
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof Vtm) {
            Vtm o = (Vtm) object;
            return getStringKey(o.getId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type "
                    + object.getClass().getName() + "; expected type: " + VtmController.class.getName());
        }
    }
} 
```

* * *

MedicineGroupController 内的转换器

```
@FacesConverter(forClass = MedicineGroup.class)
public static class MedicineGroupControllerConverter implements Converter {

    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        MedicineGroupController controller = (MedicineGroupController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "medicineGroupController");
        return controller.ejbFacade.find(getKey(value));
    }

    java.lang.Long getKey(String value) {
        java.lang.Long key;
        key = Long.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Long value) {
        StringBuffer sb = new StringBuffer();
        sb.append(value);
        return sb.toString();
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof MedicineGroup) {
            MedicineGroup o = (MedicineGroup) object;
            return getStringKey(o.getId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type "
                    + object.getClass().getName() + "; expected type: " + MedicineGroupController.class.getName());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T09:54:23.467

我为每个 selectOneListbox 使用了转换器。错误没有发生后记。下面是我使用的类似示例。（与上面的代码不完全相同）

初始转换器

```
@FacesConverter(forClass = Investigation.class)
public static class InvestigationControllerConverter implements Converter {

    public InvestigationControllerConverter() {
    }

    @Override
    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        InvestigationController controller = (InvestigationController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "investigationController");
        return controller.ejbFacade.find(getKey(value));
    }

    java.lang.Long getKey(String value) {
        java.lang.Long key;
        key = Long.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Long value) {
        StringBuilder sb = new StringBuilder();
        sb.append(value);
        return sb.toString();
    }

    @Override
    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof Investigation) {
            Investigation o = (Investigation) object;
            return getStringKey(o.getId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type "
                    + object.getClass().getName() + "; expected type: " + InvestigationController.class.getName());
        }
    }
} 
```

后来我改成这样。

```
 @FacesConverter("ixcon")
    public static class InvestigationConverter implements Converter {

        public InvestigationConverter() {
        }

@Override
    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        InvestigationController controller = (InvestigationController) facesContext.getApplication().getELResolver().
                getValue(facesContext.getELContext(), null, "investigationController");
        return controller.getEjbFacade().find(getKey(value));
    }

    java.lang.Long getKey(String value) {
        java.lang.Long key;
        key = Long.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Long value) {
        StringBuilder sb = new StringBuilder();
        sb.append(value);
        return sb.toString();
    }

    @Override
    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof Investigation) {
            Investigation o = (Investigation) object;
            return getStringKey(o.getId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type "
                    + object.getClass().getName() + "; expected type: " + InvestigationController.class.getName());
            }
        }
    } 
```

我在这样的 JSF 页面中使用了该转换器。

```
 <p:autoComplete  converter="ixcon" widgetVar="aIx" id="acIx" forceSelection="true" value="#{investigationItemValueFlagController.investigation}" completeMethod="#{investigationController.completeItem}" var="ix" itemLabel="#{ix.name}" itemValue="#{ix}" size="30"  style="width: 400px;">
                                <p:ajax process="acIx iif" update="iif tbl" event="itemSelect"/>
                            </p:autoComplete> 
```**

# asp.net - asp net更新gridview行

> ID：11272955
> 
> 赞同：0
> 
> 时间：2012-06-30T09:17:25.257
> 
> 标签：asp.net, .net, gridview

我正在尝试更新 gridview 行，但我不断收到重复的异常错误。我正在使用 c#。我正在使用 3 层架构。我可以插入记录，但无法更新记录。请帮忙谢谢

```
<asp:GridView ID="GridView3" runat="server" AutoGenerateColumns="False" AutoGenerateEditButton="True" OnRowEditing="EditRecord" OnRowUpdating="UpdateRecord" DataKeyName = "payClaimId">
<Columns>
<asp:TemplateField HeaderText="Duty ID">
<ItemTemplate><%# DataBinder.Eval(Container.DataItem, "dutyId")%></ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Pay Claim ID">
<ItemTemplate><%# DataBinder.Eval(Container.DataItem, "payClaimId")%></ItemTemplate>
<EditItemTemplate><asp:TextBox ID="txtpayclaimid" runat="Server" ReadOnly ="true" Text ='<%# Eval("payClaimId") %>'></asp:TextBox></EditItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Date Submitted">
<ItemTemplate><%# DataBinder.Eval(Container.DataItem, "printeddate", "{0:d}")%></ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Date Worked">
<ItemTemplate><%# DataBinder.Eval(Container.DataItem, "dateWorked", "{0:d}")%></ItemTemplate>
<EditItemTemplate><asp:TextBox ID="txtdateworked" runat="Server" Text ='<%# Eval("dateWorked", "{0:d}") %>'></asp:TextBox></EditItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Total Hours">
<ItemTemplate><%# DataBinder.Eval(Container.DataItem, "totalHours")%></ItemTemplate>
<EditItemTemplate><asp:TextBox ID="txttotalhours" runat="Server" Text ='<%# Eval("totalHours") %>'></asp:TextBox></EditItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Status">
<ItemTemplate><%# DataBinder.Eval(Container.DataItem, "status")%></ItemTemplate>
</asp:TemplateField>

</Columns>
</asp:GridView>
 private void loaddata()
    {
        DataTable dt = new DataTable();
        Timesheet ts = new Timesheet();
        dt = ts.gettimesheetrecords(Convert.ToInt32(txtboxeid.Text));
        GridView3.DataSource = dt;
        GridView3.DataBind();
    }

    protected void EditRecord(object sender, GridViewEditEventArgs e)
    {

        GridView3.EditIndex = e.NewEditIndex;

        loaddata();

    }
    protected void UpdateRecord(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow row = (GridViewRow)GridView3.Rows[e.RowIndex];
        TextBox pcid = (TextBox)row.FindControl("txtpayclaimid");
        TextBox dworked = (TextBox)row.FindControl("txtdateworked");
        TextBox tHours = (TextBox)row.FindControl("txttotalhours");
        int payClaimId = int.Parse(pcid.Text);
        string dateWorked = Convert.ToString(dworked.Text);
        double totalHours = double.Parse(tHours.Text);
        int res = 0;
        PayClaim pc = new PayClaim();

        try
        {
            res = pc.updatepayclaim(payClaimId, dateWorked, totalHours);
            if (res > 0)
            {
                statuslabel.Text = "Record saved";
                GridView3.EditIndex = -1;

                loaddata();
            }
            else
            {
                statuslabel.Text = "Duplicates";
            }
        }
        catch (Exception ex)
        {
            statuslabel.Text = "Error";
        }
        finally
        {
            pc = null;
        }
    } 
```

我的插入赔付方法

```
public int updatepayclaim(int payClaimId, string dateWorked, double totalHours)
    {

        dbCon = new OleDbConnection(sConnection);

        dbCon.Open();
        OleDbCommand com = dbCon.CreateCommand();
        com.CommandText = "Update PayClaim Set totalHours=?, dateWorked=? where payClaimId=?";
        try
        {
            com.Parameters.AddWithValue("payClaimId", payClaimId);
            com.Parameters.AddWithValue("dateWorked", dateWorked);
            com.Parameters.AddWithValue("totalHours", totalHours);
            return com.ExecuteNonQuery();
        }
        catch
        {
            throw;
        }
        finally
        {
            com.Dispose();
            dbCon.Close();
            dbCon.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:41:34.817

我认为为了回答您的问题，您需要显示 PayClaim updatepayclaim 方法的代码。

根据您的描述，我假设您收到异常，而不仅仅是大于 0（res > 0）的返回码并将标签设置为 Duplicates - 因为如果您通过显示的代码获得异常，您的状态标签将是“错误”。 '

请说清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T23:04:19.167

我不认为这是正确的语法。我会尝试这样的事情：

```
com.CommandText = "Update PayClaim Set totalHours='@pTotalHours', dateWorked='@pDateWorked' where payClaimId='@pPayClaimId'";
try
{
    com.Parameters.AddWithValue("@pPayClaimId", payClaimId);
    com.Parameters.AddWithValue("@pDateWorked", dateWorked);
    com.Parameters.AddWithValue("@pTotalHours", totalHours);
    return com.ExecuteNonQuery();
} 
```

我也很想知道 的值`res`，如果它是 -1 表示错误或 0 表示没有更新行（你可以将它初始化为非零，如 -2，以确保后者）。

# java - 将死线程对象包装在新线程对象中以重新启动它

> ID：11272958
> 
> 赞同：3
> 
> 时间：2012-06-30T09:17:54.610
> 
> 标签：java, multithreading

我想重新启动一个线程以供某些用途，例如在下面的代码中。

```
class Ex13 implements Runnable {
    int i = 0;

    public void run() {
        System.out.println("Running " + ++i);
    }

    public static void main(String[] args) throws Exception {
        Thread th1 = new Thread(new Ex13(), "th1");
        th1.start();
            //th1.join() 
        Thread th2 = new Thread(th1);
        th2.start();
    }
} 
```

当我执行上述程序时，有时我得到的输出为 Running 1 Running 2，有时我只得到 Running 1 经过几次运行后，我只得到 Running 1 作为输出。我对这种行为感到非常惊讶。任何人都可以帮助我理解这一点。如果我把 join() 那么我只得到 Running 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:30:39.447

我不知道你为什么需要这个，但是（请注意，这段代码并不能确保 th1 总是在 th2 之前执行）：

```
public static class Ex13 implements Runnable {
    AtomicInteger i = new AtomicInteger(0);
    CountDownLatch latch;
    Ex13(CountDownLatch latch) {
        this.latch = latch;
    }
    public void run() {
        System.out.println("Running " + i.incrementAndGet());
        latch.countDown();
    }
}

public static void main(String[] args) throws Exception {
    CountDownLatch latch = new CountDownLatch(2);
    Ex13 r = new Ex13(latch);
    Thread th1 = new Thread(r, "th1");
    th1.start();
    Thread th2 = new Thread(r);
    th2.start();
    latch.await(); // wait until both theads are executed
    System.out.println("Done");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T14:49:56.517

您重用`Thread`实例，而不是`Runnable`. 线程将其`run()`方法覆盖为

```
public void run() {
    if (target != null) {
        target.run();
    }
} 
```

其中 target 是`Runnable`你给构造函数的那个​​。除此之外，`Thread`还有一个`exit()`由VM调用的方法，该方法将target设置为null（原因是[这个](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4006245)bug）。所以如果你的第一个线程有机会完成它的执行，它的`run()`方法几乎是空的。添加`th1.join()`证明了这一点。

如果您想保留某些状态，则需要保留对您的`Runnable`实例的引用，而不是`Thread`. 这种方式`run()`方法不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T09:22:13.363

您希望 i 的递增同步，即

```
public class Ex13 implements Runnable {
    int i=0;
    public void run() {
        System.out.println("Running "+ increment());
    }
    private synchronized int increment() {
        return ++i;
    }
} 
```

Java 教程给出了一个非常相似的场景[对此进行了很好的解释。](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)问题是递增变量不是原子操作。每个线程都需要先读取 i 的当前状态，然后再将其设置为新值。限制一次将变量递增到一个线程的访问可确保您获得一致的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T10:02:16.640

要查看 System.out.println 中发生的情况，您还可以打印线程名称：

```
Thread t = Thread.currentThread();
String name = t.getName();
System.out.println("name=" + name); 
```

我看到您使用相同的可运行对象调用两个线程，因此它们都将使用相同的“i”变量，为了让您获得 Running 1 Running 2，您需要同步“i”

# git - 从一个分支切换到另一个分支时，目标分支是否应该继承索引和更改的文件？

> ID：11272959
> 
> 赞同：0
> 
> 时间：2012-06-30T09:18:16.973
> 
> 标签：git

在 Git 中，我有一个实验分支 ( `EXP-12`)。我在那里做了一些更改，但我还没有准备好提交。我需要对master进行调整。

我去找师傅。

两种情况是可能的：

1.  如果我在 on 时将我的更改包含在索引中`EXP-12`，它们也会出现在主分支的索引中。
2.  如果我在 on 时没有将我的更改包含到 index 中`EXP-12`，那么这些文件也将显示为未在 master 分支上提交的更改。

我的问题是我希望一切都在 master 上并且`EXP-12`是分开的。我想做一些“实验性”更改`EXP-12`> 转到 master > 在 master 上进行更改 > 为提交 ( `git add -A`) > 提交所有内容 > 切换回 EXP-12 并继续实验。现在，如果我这样做，我在 master 分支上的提交将包括在`EXP-12`.

这背后的逻辑是什么？还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:26:47.577

这个问题的一个经典解决方案是使用`git stash`- 当你在时，`EXP-12`你可以这样做：

```
git stash save --keep-index "Some work-in-progress on EXP-12" 
```

...然后像往常一样将分支更改为master，做一些工作，改回来，并应用最近的存储：

```
git checkout master

[... do some stuff ...]

git checkout EXP-12

git stash pop 
```

但是，我个人更喜欢创建一个正在进行的提交，然后：

*   改变它`git commit --amend`
*   将分支移回上一个提交，但将所有工作保留为未暂存的更改：`git reset HEAD^`
*   ...或用于`git rebase -i <EARLIER-COMMIT>`将多个正在进行的提交压缩在一起。

创建实际提交相对于使用 stash 的优势在于，您可以在任何提交上应用 stash，而不仅仅是您保存它的那个提交，而正常提交会向前移动该分支并与较早的提交相关联。

# apache - 如何允许通过 comodo 防火墙访问我的 apache 网络服务器

> ID：11272960
> 
> 赞同：1
> 
> 时间：2012-06-30T09:18:23.517
> 
> 标签：apache, configuration, firewall

谁能解释我如何允许通过 comodo 防火墙访问我的 apache 网络服务器？

我是防火墙配置的新手，因此非常感谢您提供安静的详细解释或指向良好教程/示例的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-28T09:09:07.653

即使这是一个老问题，但我今天遇到了这个问题，因为我已经弄清楚了这一点，并认为它可能也可以帮助某人：为了解决这个问题，我必须在防火墙`Global Rules`部分添加一个规则以允许端口 80 的传入连接. 另外，如果您在路由器后面，请不要忘记将端口 80 也转发到您的本地 IP。

# php - 具有多个参数的php mysql查询并获得每个结果

> ID：11272964
> 
> 赞同：1
> 
> 时间：2012-06-30T09:19:05.403
> 
> 标签：php, mysql

我试图想出一种方法来形成一个查询，我可以在其中查询我需要的每个参数，并在每个参数的基础上获取结果。我尝试了 AND/OR 的组合，但没有得到预期的结果。

我想做的查询的基础是

```
select fb_wall, fb_checkin, phone 
from member_prefs where 
memeberid = 21 
OR memeberid = 22 
OR memeberid = 23 
OR memeberid = 24 
```

问题是，我需要在其中一个成员没有数据时忽略并继续查询（或捕获 id，所以如果找到一个，我可以在事后在另一个查询中添加它的行但仍然保留查询进行）。

现在我的虚拟数据是 4 个成员中的 3 个有数据，如果我在查询中执行 AND，则一个没有，查询停止并且不产生任何结果。好像我做 OR 我似乎只返回其中一组数据。

我想要做的是在查询构建一个数组来传递之后，看起来像

```
array(
   [0] array("memberid"=>21, "fb_wall"=>0, "fb_checkin"=>1, "phone"=>0),
   [1] array("memberid"=>22, "fb_wall"=>1, "fb_checkin"=>0, "phone"=>1),
   [2] array("memberid"=>24, "fb_wall"=>1, "fb_checkin"=>1, "phone"=>1)
) 
```

只是似乎在形成初始查询时遇到了一点问题，就像我说的那样，如果我可以在这种情况下传递 23 其他地方，那么我可以在该 id 上为同一个表运行一个插入命令，这很棒但不需要这里的一切都需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:27:09.487

怎么样：

```
//parameter data
$members = array(
    22 => null,
    23 => null,
    24 => null,
    25 => null
);
//make a comma separated list of ids
$ids = implode(',', array_keys($members));
//generate query text
$sql = '
    select memberid, fb_wall, fb_checkin, phone 
    from   member_prefs 
    where  memberid in ('.$ids.')
';
$result = mysql_query($sql);
while ($row = mysql_fetch_row($result)) {
    $members[$row[0]] = $row;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:23:00.450

从具有相关键的数组开始，并在读取行时替换元素。

```
$ares = array(21 => null, 22 => null, 23 => null, 24 => null); 
```

# php - 为什么查询成功后我从 mysqli_result::free 收到致命错误？

> ID：11272966
> 
> 赞同：0
> 
> 时间：2012-06-30T09:19:09.413
> 
> 标签：php, mysql

为什么此函数成功执行数据库查询，但仍然导致**致命错误：调用非对象上的成员函数 free()**？

```
private function record_login()
{
    $user_id = $this->user_id;
    $time = time();
    $ip_address = $this->ip_address;

    $link = $this->db_connect();

    $query = "INSERT INTO login_log (user_id, login_time, ip_address)
                    VALUES ('$user_id', '$time', '$ip_address')";

    $result = $link->query($query);

    if (!$result) {
        $this->log_error(); // This function does NOT get called
    }

    $result->free();
    $link->close();     
    return true;
} 
```

编辑：
这是上面的 db_connect() 函数：

```
private function db_connect() 
{
    $link = new mysqli('localhost', 'my_user', 'my_password', 'my_db');
    if(mysqli_connect_errno()) { 
        die(mysqli_connect_error());
    }  
    else {
        return $link;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:22:14.793

选择查询返回资源，插入查询不返回。你只能释放资源

# windows-installer - MSI 使用 installshield2009

> ID：11272967
> 
> 赞同：0
> 
> 时间：2012-06-30T09:19:12.213
> 
> 标签：windows-installer, installshield

有没有办法在 installshield 2009 中为用户设置一些按摩，以便在以下情况下提示 -

1.  他们重命名设置或文件名被更改？
2.  安装程序是从网络位置运行的吗？
3.  UAC 功能何时开启？

任何建议都将受到高度赞赏和欢迎。

谢谢，维迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:47:01.030

Windows Installer 提供了检测 1 和 2 的属性。

1.  [`OriginalDatabase`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370562%28v=vs.85%29.aspx)属性保存 .msi 文件的路径。
    仔细阅读注意事项：Windows Installer 在缓存包时会重命名包。所以你的安装必须应对这个问题。
2.  [`SourceDir`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371857%28v=vs.85%29.aspx)属性保存包含安装包的目录。
    您必须在使用该属性之前安排[`ResolveSource`操作。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371232%28v=vs.85%29.aspx)同样，您必须小心这一点，`ResolveSource`例如，不要在卸载期间安排操作。
3.  据我所知，Windows Installer 不支持直接检测 UAC 是否启用。

如果您想检测引导程序是否`setup.exe`被重命名或从网络运行，那是另一回事，我无法帮助您。

* * *

请说明为什么需要检测这两种情况。

1.  为什么您的设置的命名方式会有所不同？
    我不认为用户经常重命名设置文件。如果您的安装程序包仅包含在一个文件中，我看不出重命名不好的任何原因。

    > **Vidya：**我不确定，但用户说当他们尝试重命名设置时，他们会收到与某些编译相关的消息，并且设置不允许他们重命名设置。

2.  如果从网络位置运行设置会发生什么变化？
    可以从网络位置安装 Windows Installer 程序包。在管理安装的情况下，从网络位置执行安装甚至是一种常见的情况。

    > **Vidya：**问题是当我们从网络位置安装 MSI 并尝试对已安装的设置运行更新时，它显示“找不到文件”</p>

3.  如果您知道 UAC 处于打开或关闭状态，您会在设置中做什么？
    Windows Installer 本身可以很好地与 UAC 配合使用。您只需要关心您编写的自定义操作：它们必须是 UAC 感知的。这一点总结为只有一个要求：只有延迟操作必须对系统进行修改，延迟操作在系统上下文中运行；其他自定义操作在当前登录用户的上下文中运行。在没有 UAC 的情况下，此要求也适用于 Windows XP：在非延迟操作中修改系统设置是一种不好的做法。

    > **Vidya：**基本上，我们希望在 UAC 开启且用户没有管理权限时向用户发送消息，或者只是通知他们在运行设置之前将 UAC 设置为最低。

# node.js - 有什么方法可以在退出时在节点 js 中启动异步操作？

> ID：11272970
> 
> 赞同：1
> 
> 时间：2012-06-30T09:19:30.583
> 
> 标签：node.js, optimization, process

Node js 模块在操作过程中请求远程服务上的一些资源，最好在退出时释放。我们知道有很好的：

```
process.on('exit', function() {
    // ...
}); 
```

但是据说它不会等待任何异步操作完成。所以问题是是否有任何解决方法（应该有一些，因为它是相当广泛的用例）？也许可以开始单独的过程或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:23:31.600

我见过的唯一解决方法是添加一个等待循环，而不是从 .on('exit', 函数完成/返回，直到一个属性已全局更新。完全是一个笨拙的设计明智的做法，非常糟糕的做法，但我已经看到它适用于短调用（我认为有一些超时，但我从不费心去研究细节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:26:02.993

我认为您可以/应该在之前进行清理`on('exit'`）通过收听`ctrl-c`这篇[文章](https://stackoverflow.com/a/9299388/11926)中的信号。

# asp.net-mvc-3 - MVC 3 RAZOR 编码逻辑即使在 @{ } 中也会呈现为文本

> ID：11272971
> 
> 赞同：0
> 
> 时间：2012-06-30T09:19:36.357
> 
> 标签：asp.net-mvc-3, razor, razor-declarative-helpers

以下代码行有什么问题？

```
 <table>
        @{
            string subGroup = "";

            foreach (var item in Model)
            {

                if (item.SubGroupName != subGroup)
                {
                    subGroup = item.SubGroupName;
            <tr style="background-color: #C1E0FF; text-align: left">
                <td colspan="2">
                    @item.SubGroupName;
                </td>
            </tr>
                }
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.configurationitemkey)
                </td>
            <td>
                if (item.IsBoolean)
                @Html.DisplayFor(modelItem => item.IsAvailable)
                else
                @Html.DisplayFor(modelItem => item.ConfigurationItemValue)
            </td>

            </tr>
            }
        }
    </table> 
```

以下代码行即使在 @{ } 内也会呈现为测试

```
<td>
    if (item.IsBoolean)
    @Html.DisplayFor(modelItem => item.IsAvailable)
    else
    @Html.DisplayFor(modelItem => item.ConfigurationItemValue)
</td> 
```

指导我在 MVC RAZOR 中实现此类编程逻辑的最佳方式

谢谢

@保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:24:07.420

您是否尝试过`@`在它们之前放置一个标签，因为它们之前的标签`<td>`意味着 Razor 解析器已切换回 HTML 上下文而不是服务器端代码：

```
@{
    string subGroup = "";
}

<table>
    @foreach (var item in Model)
    {
        if (item.SubGroupName != subGroup)
        {
            subGroup = item.SubGroupName;
        }
        <tr style="background-color: #C1E0FF; text-align: left">
            <td colspan="2">
                @item.SubGroupName;
            </td>
        </tr>

        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.configurationitemkey)
            </td>
            <td>
                @if (item.IsBoolean)
                {
                    @Html.DisplayFor(modelItem => item.IsAvailable)
                }
                else
                {
                    @Html.DisplayFor(modelItem => item.ConfigurationItemValue)
                }
            </td>
        </tr>
    }
</table> 
```

备注：在您展示的示例中，您似乎没有`subGroup`在代码中的任何地方使用该变量，但无论如何我都将其包括在内，因为这可能只是您真实代码的简化版本，您可能需要它。

# php - phpmyadmin 自动注销时间

> ID：11272973
> 
> 赞同：92
> 
> 时间：2012-06-30T09:19:38.500
> 
> 标签：php, mysql, database, cookies, phpmyadmin

如何更改 phpmyadmin 自动注销时间？

它会在 1440 秒后自动注销，这对我来说非常低。如何更改选项或完全删除登录请求？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-08-08T05:42:47.347

更改 php.ini 将更改服务器上运行的所有网站的会话持续时间。要仅为 PhpMyAdmin 更改它，请打开`config.inc.php`并添加：

```
$sessionDuration = 60*60*24*7; // 60*60*24*7 = one week
ini_set('session.gc_maxlifetime', $sessionDuration);
$cfg['LoginCookieValidity'] = $sessionDuration; 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2014-11-11T19:08:40.973

在 PHPMyAdmin 4 中，这不再出现在 config.inc.php 文件中。而是在浏览器中转到 PHPMyAdmin。确保您处于 localhost 级别以查看“设置”链接。然后设置设置>功能>更改“登录cookie有效性”的值>保存

![指示](../Images/71fbe105b513469ad128b4fe77d1e1c3.png)

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2012-06-30T09:48:45.080

创建或编辑您的`php.ini`文件并在其中设置此变量值：

`session.gc_maxlifetime = 1440`

整数以秒为单位。500000 秒是 5.7 天。然后重启apache。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-08-07T06:10:41.537

您可以在 phpmyadmin Web 界面更改 cookie 时间会话功能

```
Settings->Features->General->Login cookie validity 
```

或者

如果要更改配置文件中的“登录cookie有效性”，则打开phpmMyAdmin配置文件，`config.inc.php`在PHPMyAdmin的根目录下。（根目录通常是/etc/phpmyadmin/）

找到 config.inc.php 后，搜索下面的行并将其设置为您希望 phpmyadmin 超时的秒数：

```
['LoginCookieValidity'] 
```

如果找不到上述行，只需添加以下内容：

```
$cfg['Servers'][$i]['LoginCookieValidity'] = <your_new_timeout>; 
```

例如：

```
$cfg['Servers'][$i]['LoginCookieValidity'] = 3600 * 3; 
```

上述示例中的超时设置为 3 小时。

`session.gc_maxlifetime`可能会限制会话有效性，如果会话丢失，登录 cookie 也会失效。因此，我们可能需要在`php.ini`配置文件中设置 session.gc_maxlifetime（文件位置在 ubuntu 中是 /etc/php5 /apache2/php.ini）。

```
session.gc_maxlifetime = 3600 * 3 
```

* * *

**[关于 LoginCookieValidity 的 phpMyAdmin 文档](http://docs.phpmyadmin.net/en/latest/config.html#cfg_LoginCookieValidity)**

$cfg['LoginCookieValidity']

类型： *整数 [秒数]*
默认值： *1440*

定义登录 cookie 的有效期。请注意 php 配置选项 session.gc_maxlifetime 可能会限制会话的有效性，如果会话丢失，登录 cookie 也会失效。所以最好将 session.gc_maxlifetime 设置为至少与 $cfg['LoginCookieValidity'] 相同的值。

*笔记：*

1.  如果您的服务器崩溃并且无法加载您的 phpmyadmin 页面，请在 /var/log/apache2/error.log 检查您的 apache 日志。如果您`PHP Fatal error: Call to a member function get() on a non-object in /path/to/phpmyadmin/libraries/Header.class.php`在第 135 行上，请执行`chmod 644 config.inc.php`. 那应该处理错误。
2.  如果您收到警告： ， 则按上述`Your PHP parameter session.gc_maxlifetime is lower that cookie validity configured in phpMyAdmin, because of this, your login will expire sooner than configured in phpMyAdmin.`更改。`session.gc_maxlifetime`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-09-21T21:09:21.920

仅对于本地安装，您可以完全删除登录和超时 - 这似乎是您所追求的。通过将授权类型更改为“config”并在配置文件中输入您的数据库用户名和密码，您将自动登录。添加到`config.inc.php`：

```
$cfg['Servers'][$i]['verbose'] = '';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = '';
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'username';
$cfg['Servers'][$i]['password'] = 'password';
$cfg['Servers'][$i]['AllowNoPassword'] = false; 
```

当然，如果您在 Internet 上的服务器上执行此操作，一些厚脸皮的家伙会兴高采烈地下载您的所有密码并删除您的网站。这仅适用于在您自己的笔记本电脑上运行的开发服务器。

这些天来自定义 phpmyadmin 的一种更简单的方法是访问[http://www.example.com/phpmyadmin/setup/](http://www.example.com/phpmyadmin/setup/)，一次保存所有设置部分，点击底部的保存或下载，将生成的文件复制到您的root phpmyadmin 目录，然后对其进行 chmod。即使它是本地服务器，您也必须关闭写入权限，因为 phpmyadmin 在允许您登录之前会检查这一点。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-15T05:14:14.080

在 wamp 文件夹中探索目录 'apps\phpmyadmin4.5.2' 并打开 config.inc.php 文件。然后在现有代码下添加这一行。

```
'$cfg['LoginCookieValidity'] = 3600 * 10; //login cookie validity extended upto 10 hours'. 
```

就这样...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-05T10:38:16.023

对于在 Ubuntu 18.04 上运行的`phpMyadmin` **5.0.2**，我将文件编辑如下：

1.  `sudo nano /usr/share/phpmyadmin/libraries/classes/Config/Forms/User/FeaturesForm.php`

2.  找到方法`public static function getForms()`并添加**LoginCookieValidity**字段

    ```
    public static function getForms()
    {
        $result = [
            'General' => [
                'VersionCheck',
                'NaturalOrder',
                'InitialSlidersState',
                'LoginCookieValidity', //Added this line if it missing
                ...........
          } 
    ```

3.  保存文件，现在您将能够从用户界面更改值。

**[设置 -> 常规 -> 功能 -> 登录 Cookie 有效性]**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-20T06:36:21.673

`Server:localhost -> Settings -> Features -> General -> Login cookie validity`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-01-14T15:32:24.727

我有 phpmyadmin 4.9.2。并尝试配置 LoginCookieValidity，但我有自动注销 :( 如果您使用本地主机，您可以尝试[https://docs.phpmyadmin.net/en/latest/config.html#example-for-ip-address-limited-autologin](https://docs.phpmyadmin.net/en/latest/config.html#example-for-ip-address-limited-autologin)

```
if ($_SERVER["REMOTE_ADDR"] == "127.0.0.1") {
    $cfg['Servers'][$i]['auth_type'] = 'config';
    $cfg['Servers'][$i]['user'] = 'root';
    $cfg['Servers'][$i]['password'] = 'yourpassword';
} else {
    $cfg['Servers'][$i]['auth_type'] = 'cookie';
} 
```

# iphone - 如何分配相同类型类的单独内存空间

> ID：11272978
> 
> 赞同：0
> 
> 时间：2012-06-30T09:20:00.697
> 
> 标签：iphone

嗨，我的程序将小图像添加到主视图。我有这个撤消按钮来删除最近添加的图像（子视图）。当它有所有不同的图像时它工作正常，但是当有两个相同的图像时它会发生错误。我认为这是因为它都指向相同的原始 png 文件。但我不知道如何解决它。请给我一些提示。

```
add{  
    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"pah%d",tagNum]];
    TouchImageView *touchImageView = [[TouchImageView alloc] initWithFrame:imageRect];
    imageCounter++;
    touchImageView.tag = imageCounter;
    touchImageView.image = image;
    touchImageView.center = CGPointMake(160.0, 230.0);
    [view addSubview:touchImageView];
}

undo{
       [[self.view viewWithTag:imageCounter] removeFromSuperview];
    imageCounter--;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:27:56.017

如果您只需要删除最近添加的图像...那么每次添加图像时都会像这样存储它的引用-它将与ARC很好地配合...

```
 UIImageView *imageView = touchImageView; 
```

然后在您的删除最近添加的图像按钮中单击

```
 for(UIImageView *iV in view.subviews)
 {
    if(iV == imageView)
    {
       [iV removeFromSuperView];
    }
 } 
```

我认为它会工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:47:57.087

我怀疑这是您的问题，但 `imageNamed:`使用内部缓存系统将图像缓存在内存中。每次你要求`[UIImage imageNamed:@"foo"]`你得到相同的 UIImage 实例。

您可能希望使用`imageWithContentsOfFile:`它来返回 UIImage 的唯一实例。

尝试一下，看看它是否有所作为。

# image-processing - Haralick 的标注算法很好的解释

> ID：11272979
> 
> 赞同：1
> 
> 时间：2012-06-30T09:20:32.100
> 
> 标签：image-processing, computer-vision, image-segmentation, labeling

你会如何解释 Haralick 的标注算法（带有前言和后向迭代）？

# java - 如何在 Play 2.0 中将多个参数传递到模板中？

> ID：11272984
> 
> 赞同：10
> 
> 时间：2012-06-30T09:21:00.957
> 
> 标签：java, templates, parameters, rendering, playframework-2.0

我想像这样同时向我的模板渲染两件事：

```
String one = "one"; 
String two = "two";
return ok(template.render(one,two)); 
```

但 Playframework 说，这是错误的。那么怎么可能同时渲染2个值呢？我应该将它们保存到列表中吗？但后来我必须在我的模板中再次解压它.. :(

请帮忙！感谢任何帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-30T09:40:04.387

2.0 中的播放模板只是 Scala 函数，因此您需要在模板的开头声明参数（从第 1 行开始）：

```
@(one: String, two: String)

This is first param: @one <br/>
This is second param: @two 
```

检查[模板文档](http://www.playframework.org/documentation/2.0.2/JavaTemplates)以获取详细信息

## 地图

另一方面，如果您需要传递大量相同类型的变量，那么这`Map`也是一个很好的解决方案：

```
public static Result index() {

    Map<String, String> labels = new HashMap<String, String>();

    labels.put("first", "First label");
    labels.put("second", "Second label");
    // etc etc
    labels.put("hundredth", "Label no. 100");

    return ok(template.render(labels));
} 
```

`template.scala.html`

```
@(labels: Map[String, String])

@labels.get("first") <br/>
@labels.get("second") <br/>
.....
@labels.get("hundredth") 
```

## 查看模型

最后，为了使事情更加类型安全，您可以创建自己的`view models`（示例）：

```
package models.view;

import java.util.Date;

public class MyViewModel {

    public String pageTitle = "";
    public Date currentDate = new Date();
    public Integer counter = 0;
    // etc...

} 
```

控制器：

```
public static Result myActionUsingModel() {
    MyViewModel data = new MyViewModel();
    data.pageTitle = "Ellou' World!";
    data.counter = 123;

    return ok(myViewUsingModel.render(data));
} 
```

看法：

```
@(data: models.view.MyViewModel)

<h1>@data.pageTitle</h1>

<div>Now is: @data.currentDate</div>
<div>The counter value is: @data.counter</div> 
```

# css - 用 css 分隔表单元素

> ID：11272988
> 
> 赞同：1
> 
> 时间：2012-06-30T09:21:17.560
> 
> 标签：css

我正在寻找一种巧妙的方式来分隔我的表单元素，但我不太确定如何去做。

目前，我正在使用普通`<br/>`的空间，但我想知道是否有更好的方法来使用类或 id

```
<form>
  Message: <input type="text" class="msg" name="message" /><br/><br/>
   <input type="submit" class="c-add" value="Add" />
   <input type="submit" class="c-update" value="Update" />
  </form> 
```

我在想

```
 .c-add + .c-update{
  margin-right:100px;
  } 
```

但这不是有效的css。解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T09:30:50.570

`.c-add + .c-update`是一个有效的 CSS 选择器。它选择所有带有“c-update”类的元素，紧跟在带有“c-add”类的元素之后。示例：[DEMO](http://jsfiddle.net/b4TYj/)（[CSS 选择器参考](http://www.w3schools.com/cssref/css_selectors.asp)）

## 解决方案

您可以用逗号分隔多个选择器。您不需要给每个输入一个唯一的类名。仅当您想为它们设置独特的样式时才需要这样做。由于您没有提供有关预期结果的信息，因此我使用不同的解决方案制作了一个演示：

[**演示**](http://jsfiddle.net/xxwJu/)

HTML 标记：

```
<form class="form">
   <label>Message:</label><input type="text" class="msg" name="message" />
   <input type="submit" class="add" value="Add" />
   <input type="submit" class="update" value="Update" />
</form> 
```

请注意，我用标签包裹了“消息”，这是更好的标记。

CSS 制作单行内联表单：

```
.form input {
    margin-right: 0.5em;
}

.form label {
    float: left;
    margin-right: 0.5em;
} 
```

CSS 制作多行表单：

```
.form input {
    display: block;
    margin-bottom: 1em;
}

.form label {
    float: left;
    margin-right: 0.5em;
} 
```

您可以通过为每个输入元素或类型使用特定的类来混合使用这两种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T09:23:39.870

使用逗号分隔选择器。

```
.c-add, .c-update { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T09:24:24.970

结构，也许是这样的：

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
    <ul>
        <li>
            <label>
                <span>Name</span>
                <input type="text" name="name" />
                <small class="errorText"><?php echo ($_POST["name"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <label>
                <span>Email</span>
                <input type="text" name="email" />
                <small class="errorText"><?php echo ($_POST["email"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <label>
                <span>Subject</span>
                <input type="text" name="subject" />
                <small class="errorText"><?php echo ($_POST["subject"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <label>
                <span>Message</span>
                <textarea name="message" cols="80" rows="7"></textarea>
                <small class="errorText"><?php echo ($_POST["message"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <input type="submit" name="submit" value="Send" />
        </li>
    </ul>
</form> 
```

和相同的CSS：

```
* {font-family: Segoe UI, Tahoma;}
h1 {font-weight: bold; font-size: 14pt; padding: 5px 0; margin: 5px 0; border: 1px solid #999; border-width: 1px 0;}
input[type='submit'] {padding: 5px 20px; cursor: pointer;}
ul, li {display: block; list-style: none; margin: 0; padding: 0;}
ul li {padding: 5px 0;}
ul li label span {display: block; cursor: pointer;}
ul li label .errorText {color: #f00; font-weight: bold; vertical-align: top;}
ul li label textarea {width: 300px;} 
```

你可以在这里看到一个现场演示：[Demo](http://jsfiddle.net/JHE22/)

# c# - 实体框架类问题中的两个相同的类类型

> ID：11272990
> 
> 赞同：5
> 
> 时间：2012-06-30T09:21:33.110
> 
> 标签：c#, entity-framework, entity-framework-4.1

我正在实现允许用户互相关注的功能。我有数据库表：

```
User{UserId, FirstName, LastName etc.}
Followings{FollowerUserId, FollowingUserId, CreatedOnDate etc.} 
```

所以我添加了 EF 类：

```
public class Follow
    {
        [Key, Column(Order = 1)]
        public Guid FollowerUserId { get; set; }
        [Key, Column(Order = 2)]
        public Guid FollowUserId { get; set; }        
        public DateTime CreatedOnDate { get; set; }

        public virtual User Follower { get; set; }
        public virtual User Following { get; set; }
    } 
```

最后两个虚拟属性会导致问题。当我打电话时：

```
var model = con.Follows.Where(x => x.FollowerUserId == uid); 
```

我得到以下异常：

```
Invalid column name 'Following_UserId'. 
```

该问题可能是由于一个类中有两个 User 对象引起的。知道如何解决这个问题吗？
**更新**

```
public class User
    {

        public Guid UserId { get; set; }
        ...
        public virtual ICollection<Follow> Following { get; set; }
        public virtual ICollection<Follow> Followers { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:07:19.320

我认为原因是外键属性 ( `FollowerUserId`and `FollowUserId`) 和导航属性 ( `Follower`and `Following`) 不遵守命名约定，因此 EF 无法将第一个属性识别为外键。您可以通过使用属性显式指定 FK 属性来解决此问题`[ForeignKey]`：

```
public class Follow
{
    [Key, Column(Order = 1), ForeignKey("Follower")]
    public Guid FollowerUserId { get; set; }
    [Key, Column(Order = 2), ForeignKey("Following")]
    public Guid FollowUserId { get; set; }        

    public DateTime CreatedOnDate { get; set; }

    public virtual User Follower { get; set; }
    public virtual User Following { get; set; }
} 
```

**编辑**

至少第二个属性不遵守命名约定，第一个看起来不错。因此，或者您可以通过将第二个 FK 属性重命名`FollowUserId`为：

```
public Guid FollowingUserId { get; set; } 
```

...因为导航属性被调用`Following`。

**编辑 2**

关于您的更新：您需要添加`[InverseProperty]`属性来告诉 EF 哪些导航属性属于一起：

```
public class Follow
{
    [Key, Column(Order = 1), ForeignKey("Follower")]
    public Guid FollowerUserId { get; set; }
    [Key, Column(Order = 2), ForeignKey("Following")]
    public Guid FollowUserId { get; set; }        

    public DateTime CreatedOnDate { get; set; }

    [InverseProperty("Followers")]  // refers to Followers in class User
    public virtual User Follower { get; set; }
    [InverseProperty("Following")]  // refers to Following in class User
    public virtual User Following { get; set; }
} 
```

# javascript - “bbcode”脚本不工作

> ID：11272991
> 
> 赞同：0
> 
> 时间：2012-06-30T09:21:42.173
> 
> 标签：javascript, jquery, if-statement

这是脚本的 jQuery 变体（它不起作用）：

```
<script language="javascript">
$("div.post-content").each(function(){
    if($(this).innerHTML.indexOf("[/float]") != -1) {
        pattern= /\[float=(.*?)\]([^\[]*)\[\/float\]/gi
        $(this).html($(this).innerHTML.replace(pattern, "<span style='float: $1;'>$2</span>"))
    }
})
</script> 
```

这是纯 Javascript 变体（完美运行）：

```
<script language="javascript">
posts=document.getElementsByTagName("div")
for(x in posts) if(posts[x].className=="post-content") {
    post = posts[x].innerHTML;
    if(post.indexOf("[/float]") != -1) {
        pattern = /\[float=(.*?)\]([^\[]*)\[\/float\]/gi
        posts[x].innerHTML = posts[x].innerHTML.replace(pattern, "<span style='float: $1;'>$2</span>")
    }
}
</script> 
```

该脚本的作用：

1.  它找出所有带有 class 的 div `post-content`。
2.  它检查是否有 bbcode 的结束标签。
3.  通过使用正则表达式，它寻找给定 bbcode 标记的模式。
4.  它用 html 元素替换 bbcode 标签。

我不知道我在这里做错了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:29:14.510

`innerHTML`使用 jQuery 时不要使用。分配值时是错误的（内存泄漏），读取值时是一种不好的做法。利用

```
$(this).html() 
```

或者，如果你真的想要，

```
$(this)[0].innerHTML 
```

jQuery 对象返回一个没有属性的*数组*`innerHTML`。但话又说回来，使用`.html()`更多 jQuery 风格的代码。

# php - 使用 PHP 在页面中提取 Javascript 的源代码

> ID：11272995
> 
> 赞同：0
> 
> 时间：2012-06-30T09:22:36.163
> 
> 标签：php, javascript, browser

我正在尝试从[页面](http://myiframe12.altervista.org/channel1.php)中查找嵌入式流链接。当我检查该页面的源代码时，它返回类似于以下内容：

```
<script type='text/javascript'> swidth='640', sheight='460';</script>
<script type='text/javascript' src='http://www.sawlive.tv/embed/hqfootyerech1'></script> 
```

[这](http://www.sawlive.tv/embed/hqfootyerech1)也返回如下代码：

```
http://sawlive.tv/embed/watch/xxxxxxx_ 
```

我试图`file_get_contents`爬到[http://www.sawlive.tv/embed/hqfootyerech1](http://www.sawlive.tv/embed/hqfootyerech1)但它没有返回任何东西。

该页面仅从[http://myiframe12.altervista.org/加载](http://myiframe12.altervista.org/)

有没有办法获取页面的完整源代码，包括嵌入页面和脚本？我可以使用 Firefox 检查该页面上加载的元素，但源代码不同。

我听说过 Selenium2。但也不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:58:13.910

你应该使用`file_get_content`. 如果您使用 http 或文件路径调用它，则会有所不同。

如果您想获得源代码，您应该编写：

```
file_get_contents('path/to/YOUR/FILE.php'); 
```

您可能使用不同的 URL 调用了一个文件，如果您使用 http，您只能看到 PHP 脚本的输出，因此请使用路径。

我认为您无法访问不在您域中的文件的源代码，但我不确定。

**编辑：**

万一这不起作用，我发现了这段代码，未经测试，但也应该可以工作：

```
ob_start();
include "yourfile.php";
$myvar = ob_get_contents();
ob_end_clean(); 
```

# c - 在没有 main() 的情况下执行共享库

> ID：11272997
> 
> 赞同：0
> 
> 时间：2012-06-30T09:22:56.327
> 
> 标签：c, linux, gcc, shared-libraries

当我运行共享库时，它被执行了。如果没有 main() 程序，这是怎么发生的？开始执行的入口点是什么？

```
ubuntu@ubuntu:~$ /lib/i386-linux-gnu/libc.so.6

GNU C Library (Ubuntu EGLIBC 2.15-0ubuntu10) stable release version 2.15, by Roland McGrath et al.
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.
Compiled by GNU CC version 4.6.3.
Compiled on a Linux 3.2.14 system on 2012-04-19.
Available extensions:
    crypt add-on version 2.1 by Michael Glad and others
    GNU Libidn by Simon Josefsson
    Native POSIX Threads Library by Ulrich Drepper et al
    BIND-8.2.3-T5B
libc ABIs: UNIQUE IFUNC
For bug reporting instructions, please see:
<http://www.debian.org/Bugs/>.
ubuntu@ubuntu:~$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:26:09.937

共享库确实*具有*功能`main()`；只是大多数*人没有*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T09:39:53.960

`-e entry`假设您使用 GNU 链接器，您可以使用选项（或`--entry=entry`长选项符号）指定入口点。

如果您通过 间接调用链接器`gcc`，请使用`-Wl,-e,entry`.