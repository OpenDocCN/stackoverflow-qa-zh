# StackOverflow 问答 10832000-10832999

# powershell - 如何在 PowerShell 中写入控制台？

> ID：10832000
> 
> 赞同：154
> 
> 时间：2012-05-31T10:41:42.573
> 
> 标签：powershell

我对打印（回显）到控制台的各种方式有些困惑。我已经看到有多种方法可以将输出写入控制台，例如：

```
Write-Host "Hello world1"
"Hello World2"
Out-Host -InputObject "Hello World3" 
```

所有三种方式都将打印到控制台。中间那个更简单，更简洁，更容易使用。我还发现，当您编写一个函数时，例如：

```
function GetValues()
{
    "1"
    "2"
} 
```

它仍然在管道中返回两个字符串：

而且我仍然可以打印出这些值：

```
foreach ($s in GetValues)
{
    Write-Host "s: " $s
} 
```

我发现只使用带引号的字符串并不总是出现在自定义主机上，而且我不得不使用[Write-Host](http://technet.microsoft.com/en-us/library/hh849877.aspx)来获取要在自定义主机上打印的值。

不知何故，我觉得这令人困惑。`"Print something"`应该是别名还是`Write-Host`意图是什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-31T10:46:10.200

PowerShell 的默认行为只是将掉出管道的所有内容转储，而不会被另一个管道元素拾取或分配给变量（或重定向）到`Out-Host`. 做什么`Out-Host`显然取决于主机。

仅仅让事情脱离管道并*不能替代*在`Write-Host`主机应用程序中输出文本的唯一原因。

如果要输出，请使用`Write-*`cmdlet。如果您想从函数中返回值，那么只需在没有任何 cmdlet 的情况下将对象转储到那里。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-05-31T10:55:58.557

中间一个写入管道。`Write-Host`并`Out-Host`写入控制台。'echo' 也是`Write-Output`写入管道的别名。写入控制台的最佳方式是使用`Write-Host`cmdlet。

当一个对象被写入管道时，它可以被链中的其他命令使用。例如：

```
"hello world" | Do-Something 
```

但这不起作用，因为`Write-Host`写入控制台而不是管道（Do-Something 不会得到字符串）：

```
Write-Host "hello world" | Do-Something 
```

# excel - 增加excel中包含数字的每一行

> ID：10832001
> 
> 赞同：0
> 
> 时间：2012-05-31T10:41:42.797
> 
> 标签：excel

我收到了一份格式如下的 excel 文档：

```
A |  B  |
1 | abc |
  | def |
2 | abc |
  | def |
  | ghi |
3 | abc |
  | def | 
```

所以基本上我有第一列，其中包含每两行的有序数字。我想插入一行，例如在 2 和 3 之间，以便新行编号为 3，并且它下面的行相应更新，即 3 变为 4，4 变为 5，依此类推。

我并没有真正使用excel，但我很好奇是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:49:12.127

在 A1 中，输入以下公式：

```
=IF(MOD(ROW(A1),2)=1,(ROW(A1)+1)/2,"") 
```

并将该公式复制到范围的底部。每次插入新行时，都需要手动将公式复制到插入行的第一个单元格中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:51:26.363

b列有没有模式，用来区分是否需要跳转到下一个数字？如果是这样，请使用：在 cel A2 及更多：

```
=IF(B2 = "abc",A1+1,A1) 
```

使用条件格式，隐藏重复的数字：`=A2=A1`

# mysql - “喜欢”系统数据库

> ID：10832006
> 
> 赞同：1
> 
> 时间：2012-05-31T10:42:04.330
> 
> 标签：mysql, database

我正在开发 Web 应用程序，我必须像 facebook 一样实现“喜欢”系统。应用程序将有一些客户可以“喜欢”的产品类别。所以我已经开始创建数据库，但我遇到了一个障碍。据我了解，有两种方法可以做到这一点：

第一的。创建一个数据库表，字段为“id、user_id、item_category、item_id”。当用户单击“喜欢”按钮时，信息将与各种产品类别（item_category）一起保存在此表中。

第二。为某些类别的项目创建多个表。例如，“tbl_item_category_1, tbl_item_category_2, tbl_item_category_3”的字段为“user_id, item_id”。

如果能更深入地了解这种数据库结构的最佳实践，那就太好了。哪个工作得更快？更合乎逻辑/实用？我将只使用几类项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:45:08.993

我会选择第一个版本，其表结构类似于：

```
User Table: PK id
id
username

Category Table: PK id
id
categoryname

Like Table: PK both user_id and catgory_id
user_id
category_id 
```

这是一个带有表结构演示的[SQL Fiddle](http://sqlfiddle.com/#!2/d48f8/2)，其中包含两个示例查询，以提供用户的总喜欢数和按类别的总喜欢数

第二个 - 创建多个表是一个糟糕的主意。如果您有 50-100 个类别试图查询这些表，那将是可怕的。它将变得完全无法管理。

如果您有多个表试图获得总喜欢数将是：

```
Select count(*)
from category_1
JOIN category_2
    ON userid = userid
join category_3
    ON userid = userid
join ..... 
```

使用一张桌子，毫无疑问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:44:11.403

第一种方法是正确的。永远不要为项目类别创建多个表，这会使维护代码成为一场噩梦，并使查询变得丑陋。

事实上，一般规则是任何动态的（即变化的）都不应存储为一组静态对象（例如表）。如果您认为以后可能会添加一种新类型的*“某物”*，那么您需要一个*“某物”类型*表。

例如，想象一下尝试计算用户喜欢的项目数量。使用第一种方法，你可以做`SELECT COUNT(*) FROM likes WHERE user_id = 123`，但在第二种方法中，你需要做一个 JOIN 或 UNION，这对性能不利，对可维护性不利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:45:23.407

第一种方法是正确的。因为您不知道您将拥有多少个类别，并且很难获取数据。

# python - 将列表列表转换为元组列表

> ID：10832008
> 
> 赞同：0
> 
> 时间：2012-05-31T10:42:10.757
> 
> 标签：python, list, tuples

我有一个列表列表：

```
[['AB', '132'], ['C D'], ['EFG'], ['HJ K', '2  1']] 
```

我正在尝试将其转换为元组列表：

```
[('AB', '132'), ('C D', ''), ('EFG', ''), ('HJ K', '2  1')] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T10:43:31.863

非常简单，只需使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)来循环源列表并将每个元素转换为元组，方法是直接将项目传递给[`tuple`builtin](http://docs.python.org/library/functions.html#tuple)：

```
>>> example = [['AB', '132'], ['C D'], ['EFG'], ['HJ K', '2 1']]
>>> [tuple(i) for i in example]
[('AB', '132'), ('C D',), ('EFG',), ('HJ K', '2 1')] 
```

或者，如果您喜欢函数式编程，请[`map`](http://docs.python.org/library/functions.html#map)改用：

```
>>> map(tuple, example)
[('AB', '132'), ('C D',), ('EFG',), ('HJ K', '2 1')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:44:49.940

一种可能性是使用`map(tuple, l)`：

```
In [1]: l=[['AB', '132'], ['C D'], ['EFG'], ['HJ K', '2  1']]  

In [2]: map(tuple, l)
Out[2]: [('AB', '132'), ('C D',), ('EFG',), ('HJ K', '2  1')] 
```

缺点是在 Python 3 中，这将返回一个可迭代的而不是一个列表。如果您必须有一个列表，则需要将其拼写为`list(map(tuple, l))`（这适用于 Python 2 和 3）。

在 Python 2 和 3 中都可以使用的另一种方法是使用列表推导：

```
[tuple(x) for x in l] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:43:38.697

[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)会将列表中的每个元素转换为一个元组：

```
data = [['AB', '132'], ['C D'], ['EFG'], ['HJ K', '2 1']]
[tuple(elem) for elem in data] 
```

给出：

```
[('AB', '132'), ('C D',), ('EFG',), ('HJ K', '2 1')] 
```

# c# - 使用 DecelerationEnded 会干扰其他回调

> ID：10832014
> 
> 赞同：2
> 
> 时间：2012-05-31T10:42:26.070
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

我正在尝试将**DecelerationEnded**回调与MT.Dialog 元素上的“ Tapped ”回调**结合使用。**我不能让两者同时工作。

当 DecelerationEnded 回调被注释掉时，“点击”回调起作用。当它被评论时，“点击”回调不会再被触发（而 DecelerationEnded 会）。

当 DecelerationEnded 调用移动到 Root 的设置之上时，按钮“点击”回调起作用，但 DecelerationEnded 回调不起作用。将回调设置延迟到 ViewWillAppear 也不能解决任何问题。

有什么解决办法吗？

示例代码：

```
public class TestController : DialogViewController
{
    public TestController () : base(UITableViewStyle.Plain, null, true)
    {
        // Create list of 20 buttons.
        Section s = new Section();

        for (int i = 0; i < 20; i++ )
        {
            s.Add(new StringElement("test " + i, () => {
                Console.WriteLine("Tapped"); // Tapped callback.
            }));
        }

        Root = new RootElement("Test") {s};

        // The following line causes all the "tapped" handlers to not work.
        this.TableView.DecelerationEnded += HandleDecelerationEnded;
    }

    void HandleDecelerationEnded (object sender, EventArgs e)
    {
        Console.WriteLine ("Deceleration Ended");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:37:22.373

在 MonoTouch 中，您可以使用 C# 风格的回调或 Objective-C 风格的回调，但它们不能混合在一起：

[http://docs.xamarin.com/ios/advanced_topics/api_design#Delegates](http://docs.xamarin.com/ios/advanced_topics/api_design#Delegates)

在内部，MonoTouch.Dialog 库通过提供处理所有事件的完整子类来实现其功能。如果您使用 C# 语法，它会将内置处理程序替换为在这种情况下仅响应 DecelerationEnded 的代理。

如果你想连接到这个，你需要继承现有的“Source”类，并通过覆盖 CreateSizingSource 来创建它，它应该提供你的类的一个新实例。这是您需要重写以提供相同行为但使用您自己的类的虚拟方法：

```
public virtual Source CreateSizingSource (bool unevenRows)
{
    return unevenRows ? new SizingSource (this) : new Source (this);
} 
```

您可以只继承 SizingSource 并覆盖减速方法那里的方法。

TweetStation 有一个示例显示了这是如何完成的：它使用相同的事件来确定何时从屏幕上删除未读推文的数量。

# windows-7 - VB6 应用程序出现问题，将对话框置于前面并专注于 Windows 7

> ID：10832022
> 
> 赞同：5
> 
> 时间：2012-05-31T10:43:03.717
> 
> 标签：windows-7, com, vb6, activex

我有一个用 Visual Basic 6 编写的小型实用程序应用程序，多年来一直在 XP 客户端上愉快地运行，直到最近一个使用 Windows 7 的客户端通知并告诉我行为不同。

当我的 VB 应用程序显示对话框时，它保持隐藏状态，直到用户在任务栏中单击它。

我更改了代码，而不是使用“.show vbModal”命令，而是改为以非模态方式显示表单，然后添加了各种 API 调用，如 BringWindowToFront 和 SetWindowPos 使其成为最重要的并调用 .focus 表单，尽管有这些额外的说明，但我能达到的最佳结果是使表单闪烁，提示用户单击它。

无论我尝试过什么，我都无法在没有用户干预的情况下将窗口显示在最上面，并且有焦点。

笔记。这是一个 ActiveX exe 项目，由 Win16 应用程序通过 COM 调用。

有没有其他人遇到过这种行为并知道解决方案？

任何建议/建议表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T11:11:18.283

应用程序不能（不对 Windows 撒谎）窃取焦点。调用应用程序应该真正调用[`AllowSetForegroundWindow()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632668%28v=vs.85%29.aspx)（如果它在 win16 上可用）以允许 COM 进程窃取焦点，或调用[`SetForegroundWindow()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)自身。

`SetForegroundWindow()`有关设置焦点的条件，请参阅帮助。

# java - custom class loader for android?

> ID：10832029
> 
> 赞同：5
> 
> 时间：2012-05-31T10:43:16.650
> 
> 标签：java, android, reflection, mobile, javassist

I'm writing an instrumentation library that I'd like to work on both desktop and mobile (Android).

It functions by:

1.  Exposing a main which takes a single parameter, the main of the target class
2.  Installing a class loader which intercepts all classes as they are loaded and instruments them

Like so:

```
 // Expects args[0] to contain the name of the INNER main
    public static void main(String[] args) throws Throwable {
            String className = args[0];
            String [] newArgs = new String[0];

            if(args.length > 1) {
                    newArgs = Arrays.copyOfRange(args, 1, args.length-1);
            }

            System.out.println("Bootstrapping " + className);

            Loader s = new Loader(ClassLoader.getSystemClassLoader().getParent());
            Class<?> c = s.loadClass(className);
            c.getDeclaredMethod("main", new Class[] { String[].class }).invoke(
                            null, new Object[] { newArgs });
    } 
```

The question is this:

How can I do roughly the same thing for an android app?

One idea is to modify the android manifest to replace the existing activities with "wrapper" activities, that then install class loaders and call into the original underlying activity. Is there a better way?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T11:49:03.623

There is a project called [droidbox](http://code.google.com/p/droidbox/) to detect android malware. There is a code that can help you a lot.

```
package com.loader;

import dalvik.system.DexClassLoader;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class LoaderActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        DexClassLoader dLoader = new DexClassLoader("/sdcard/DroidBoxTests.apk","/sdcard/", null, ClassLoader.getSystemClassLoader().getParent());

        Class calledClass = null;
        try {
            calledClass = dLoader.loadClass("droidbox.tests.DroidBoxTests");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Intent it=new Intent(this, calledClass);
        it.setClassName("droidbox.tests", "droidbox.tests.DroidBoxTests");
        startActivity(it);
    }
} 
```

# javascript - 如何使用 Mocha 运行单个测试？

> ID：10832031
> 
> 赞同：383
> 
> 时间：2012-05-31T10:43:19.467
> 
> 标签：javascript, mocha.js

我使用 Mocha 来测试我的 JavaScript 内容。我的测试文件包含 5 个测试。是否可以运行特定测试（或一组测试）而不是文件中的所有测试？

* * *

## 回答 #1

> 赞同：451
> 
> 时间：2012-05-31T12:29:32.733

尝试使用[mocha 的`--grep`选项](https://mochajs.org/#usage)：

```
 -g, --grep <pattern>            only run tests matching <pattern> 
```

您可以使用任何有效的 JavaScript 正则表达式作为`<pattern>`. 例如，如果我们有`test/mytest.js`：

```
it('logs a', function(done) {
  console.log('a');
  done();
});

it('logs b', function(done) {
  console.log('b');
  done();
}); 
```

然后：

```
$ mocha -g 'logs a' 
```

运行单个测试。请注意，此 greps 跨越所有`describe(name, fn)`和`it(name, fn)`调用的名称。

考虑对命名空间使用嵌套`describe()`调用，以便于定位和选择特定集合。

* * *

## 回答 #2

> 赞同：203
> 
> 时间：2012-08-31T19:21:30.387

根据您的使用模式，您可能只想*使用*. 我们使用 TDD 风格；它看起来像这样：

```
test.only('Date part of valid Partition Key', function (done) {
    //...
} 
```

只有这个测试将从所有文件/套件中运行。

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2016-08-18T07:37:02.833

如果您正在使用`npm test`（使用 package.json 脚本），请使用额外`--`的参数将参数传递给 mocha

例如`npm test -- --grep "my second test"`

**编辑**：看起来`--grep`可能有点挑剔（可能取决于其他论点）。你可以：

修改package.json：

```
"test:mocha": "mocha --grep \"<DealsList />\" .", 
```

或者使用`--bail`似乎不那么挑剔的

```
npm test -- --bail 
```

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2019-05-17T16:53:01.860

只需在“描述”、“它”或“上下文”之前使用 .only。我使用“$npm run test:unit”运行，它只执行带有 .only 的单元。

```
describe.only('get success', function() {
 // ...
});

it.only('should return 1', function() {
  // ...
}); 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2017-10-16T09:17:50.663

## 运行单个测试——按文件名——</h2>

**实际上，如果您从 mocha.opts 中删除 glob 模式（例如），也可以通过文件名**（不仅仅是通过“it()-string-grepping”）运行单个 mocha 测试`./test/**/*.spec.js`，分别创建一个副本，而无需：

```
node_modules/.bin/mocha --opts test/mocha.single.opts test/self-test.spec.js 
```

这是我的 mocha.single.opts （只是缺少上述 glob 行不同）

```
--require ./test/common.js
--compilers js:babel-core/register
--reporter list
--recursive 
```

**背景：**虽然您可以覆盖 opts-File 中的各种开关（以 开头`--`），但您[不能覆盖 glob](https://github.com/mochajs/mocha/issues/1444#issuecomment-64114261)。该链接也有一些解释。

**提示：**如果`node_modules/.bin/mocha`让您感到困惑，请使用本地包 mocha。`mocha`如果您已全局安装它，您也可以编写 just 。

* * *

如果您想要以下的舒适`package.json`： 仍然：`**/*`从您的 中删除 -ish glob `mocha.opts`，将它们插入此处，以进行所有测试，将它们留在单次测试中：

```
"test": "mocha ./test/**/*.spec.js",
"test-watch": "mocha -R list -w ./test/**/*.spec.js",
"test-single": "mocha",
"test-single-watch": "mocha -R list -w", 
```

用法：

```
> npm run test 
```

分别

```
> npm run test-single -- test/ES6.self-test.spec.js 
```

[注意`--`](https://github.com/mochajs/mocha/issues/1444#issuecomment-64114261)which 将其后的任何文本链接到`npm`脚本

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2017-08-09T12:57:51.003

有多种方法可以做到这一点。

*   如果您只想从整个测试用例列表中运行一个测试，那么您**只能**在测试用例之前编写。

    ```
    it.only('<test scenario name>', function() {
      // ...
    }); 
    ```

    或者您也可以执行 mocha grep 命令，如下所示

    ```
    mocha -g <test-scenario-name> 
    ```

*   如果你想运行一个 describe 部分中的所有测试用例，那么你也可以只写 describe。

    ```
    describe.only('<Description of the tests under this section>', function() {
      // ...
    }); 
    ```

*   如果您有多个测试文件并且只想运行其中一个，则可以按照以下命令进行操作。

    ```
    npm test <filepath> 
    ```

    例如：

    ```
    npm test test/api/controllers/test.js 
    ```

    这里 'test/api/controllers/test.js' 是文件路径。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-02-28T13:44:11.923

你可以试试“it.only”

```
 it.only('Test one ', () => {

            expect(x).to.equal(y);
        });
it('Test two ', () => {

            expect(x).to.equal(y);
        }); 
```

在这第一个只会执行

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-11-30T05:29:18.420

嗨，上述解决方案对我不起作用。运行单个测试的另一种方法是

```
mocha test/cartcheckout/checkout.js -g 'Test Name Goes here' 
```

这有助于从单个文件和特定名称运行测试用例。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-12-18T16:22:59.157

查看[https://mochajs.org/#usage](https://mochajs.org/#usage) 我们看到简单地使用

> 摩卡测试/我的文件

将工作。您可以在末尾省略“.js”。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-07-08T04:16:37.650

**对于那些希望运行单个文件**但无法使其工作的人，对我有用的是我需要将我的测试用例包装在如下描述套件中，然后使用描述标题，例如“我的测试描述”作为模式.

```
describe('My Test Description', () => {
  it('test case 1', () => {
    // My test code
  })
  it('test case 2', () => {
  // My test code
  })
}) 
```

然后运行

`yarn test -g "My Test Description"`

**或者**

`npm run test -g "My Test Description"`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-06-29T12:16:34.977

使用[Mocha`--fgrep`](https://mochajs.org/#command-line-usage)（或仅 -f），您可以选择包含字符串的测试，例如：

```
mocha -f 'my test x' 
```

将运行包含`my test x`,或块`it()`的所有测试。`describe()``context()`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-11-04T16:34:57.950

不知道为什么使用 npm 测试时 grep 方法对我不起作用。这虽然有效。由于某种原因，我还需要指定测试文件夹。

```
npm test -- test/sometest.js 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-18T16:25:52.653

将所有测试合并到一个 test.js 文件中，并且您的包 json 添加脚本为：

```
 "scripts": {
  "api:test": "node_modules/.bin/mocha --timeout 10000 --recursive api_test/"
}, 
```

在您的测试目录上键入命令：

```
npm run api:test 
```

# regex - 如何用sed替换\或/？

> ID：10832033
> 
> 赞同：1
> 
> 时间：2012-05-31T10:43:22.667
> 
> 标签：regex, sed

如何在文本文件中替换/或\？我试图“逃脱”这些角色，但到目前为止没有成功

echo '/// \\' | sed 's////some_text/'

显然行不通。

谢谢 BM

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T10:46:13.703

`echo "\\\message\//" | sed 's;[\/];REPLACEMENT-TEXT;g'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T07:17:31.333

如果您不想更改分隔符，那么这个

`sed 's/[\\/]/U/g' temp.txt`

# joomla - Nginx Joomla 国际化 URL 重写

> ID：10832034
> 
> 赞同：0
> 
> 时间：2012-05-31T10:43:24.080
> 
> 标签：joomla, url-rewriting, nginx, multilingual

我将 Joomla 与 Nginx 结合使用，我目前正在尝试为支持多种语言（意大利语、法语、中文和德语）的网站实现一些 URL 重写

网址在域名后有国家代码，如下所示：
`http://www.example.com/fr/test/test.html`
或
`http://www.example.com/de/test/test.html`

我正在寻找重写网址，所以国家代码是子域的一部分：
所以
`http://www.example.com/fr/test/test.html`
变成
`http://fr.example.com/test/test.html`

有没有办法通过 Nginx 实现这一点，或者我应该研究 Joomla 的第三方扩展（不是我最喜欢的选择）。

谢谢 ！！

**更新：**
我不够清楚：我希望来自重写 URL 的重定向是透明的。这是我想出的，感谢VBart的帮助：

```
server {  
  server_name ~^(?<lang>.+)\.example\.com$;  
  location / {  
    rewrite /(.*)$ /$lang/$1 break;  
    proxy_pass http://www.example.com;  
    proxy_redirect http://www.example.com http://$lang.example.com/$request_uri;  
  }  
} 
```

现在，Nginx 有没有办法在提供的内容中动态修改链接？即：我希望生成页面中的所有链接看起来像`http://fr...`而不是`http://.../fr/...`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:54:56.643

```
server {
    server_name ~^(?<lang>.+)\.example\.com$;
    ...
}

server {
    server_name www.example.com;
    rewrite ^/(?<lang>[a-z]+)(?<rest>.+)$ http://$lang.example.com$rest? permanent;
} 
```

相反的例子：

```
server {
    server_name ~^(?<lang>.+)\.example\.com$;
    return 301 http://www.example.com/$lang$request_uri;
}

server {
    server_name www.example.com;
    ...
} 
```

# tinymce - 将本机编辑器用于 textarea（或 JS 驱动的所见即所得编辑器）的方法？

> ID：10832035
> 
> 赞同：3
> 
> 时间：2012-05-31T10:43:25.013
> 
> 标签：tinymce, textarea, browser-extension, background-service

我正在寻找一种使用我最喜欢的“本机”编辑器 Sublime Text 2 来填充文本区域和/或所见即所得编辑器（如 TinyMCE）的方法。

我想要某种守护进程、服务或浏览器扩展来等待文本区域上的焦点事件，并打开一个新的 Sublime Text 2 窗口供我输入。每次我保存时（可能是文件在我关心的一个临时目录中），后台守护进程/服务/扩展/…更新网络表单字段的内容。

对于我的理想场景来说就这么多。您知道有什么方法可以使这成为可能（仅供参考，我在 OS X Lion 下工作）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:13:00.990

我不知道您使用的是什么浏览器，但**Firefox**有一个名为“ [It's all text](https://addons.mozilla.org/en-us/firefox/addon/its-all-text/) ”的扩展，您可以在其中：

> 右键单击文本区域，选择“全是文本！” 并在您选择的编辑器中编辑文本。

您也可以创建快捷方式而不是右键单击。

[编辑]现在**谷歌浏览器**有：[https ://github.com/Cacodaimon/GhostTextForSublimeText](https://github.com/Cacodaimon/GhostTextForSublimeText)

*PS 在理想的世界中，所有文本区域都应该是小的 ST2 窗口......*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T12:00:46.590

当然，这是可能的。

您需要为其编写浏览器扩展程序。

在您使用的任何浏览器上寻找一个片段保存插件，浏览源代码，弄清楚它是如何工作的，然后制作一个适合您的用例的插件。

同时，重复：`Ctrl+C`, `Alt-Tab`, `Ctrl-V`!

# jquery - 在 jquery 中使用闭包

> ID：10832042
> 
> 赞同：0
> 
> 时间：2012-05-31T10:43:41.043
> 
> 标签：jquery, jquery-plugins

我正在创建一个 jquery 插件以在运行时附加事件和事件处理程序：

的HTML：

```
<table id="digitalInputsTable">
<thead>
    <th>Name</th>
    <th>Value</th>
    <th>State</th>
    <th>Enabled</th>
    <th>Polarity</th>
    <th>Ignore Reset</th>       
</thead>
<tbody>
    <tr>      
        <td>
            <span class="">Name1</span>     
        </td>
        <td>
            <span class="">0</span>
        </td>
        <td>
            <span class="">Normal</span>
        </td>
        <td>
            <input type="checkbox" value="true" class="" jqmon="0" jqreg="0" id="digitalInputsTable_checkbox_03">
        </td>
        <td>
            <select class="" jqmon="0" jqreg="0" id="digitalInputsTable_select_04">
                <option value="0=Alarm">0=Alarm</option>
                <option value="1=Alarm">1=Alarm</option>
            </select>     
        </td>
        <td>          
            <input type="checkbox" value="true" class="" jqmon="0" jqreg="0" id="digitalInputsTable_checkbox_05">       
        </td>
    </tr>
</tbody> 
```

数据结构：

```
$("#digitalInputsTable").bindEvents({
    parentControl: "digitalInputsTable",
    controls: [
        {   
            id: undefined, 
            name: "checkbox", 
            idStartsWith: "digitalInputsTable_checkbox_",               
            event: "click", 
            callbackHandler: "checkboxCallback"             
        },
        {
            id: undefined,
            name: "checkbox",
            idStartsWith: "digitalInputsTable_checkbox_",
            event: "blur",
            callbackHandler: "blurCallback"
        },
        {
            id: undefined,
            name: "select", 
            idStartsWith: "digitalInputsTable_select_",                 
            event: "change", 
            callbackHandler: "selectCallback"               
        }
    ]   
}); 
```

插件：

```
$.fn.bindEvents = function(options) {           
for(var i = 0; i < options.controls.length; i++) {      
    var control = options.controls[i];
    switch(control.name) {
        case "checkbox":
            control.name = ":checkbox";
            break;          
    }

    if(control.id) {
        // find control by ID.
        // Attach event to the control.
    }
    else if(control.idStartsWith) {         
        $("#" + options.parentControl).find(control.name + "[id^=" + control.idStartsWith + "]")
                                    .bind(control.event, function(e) {                                          
                                        function(ctrl) {                                                
                                            eval(ctrl.callbackHandler + "();");
                                        };                                          
                                    }(control));
    }
}; 
```

};

问题：
勾选复选框时，无法调用复选框的“checkboxCallback”回调函数。可能是我错误地使用了闭包。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:53:23.650

这不是一个完整的答案，但它应该为您指明正确的方向。基本上，当您循环`options.controls`并需要在将来对它们执行操作时，您需要使用闭包来分隔它们。

```
$.fn.bindEvents = function(options) {
    // loop through the controls
    for (var i = 0, control; control = options.controls[i]; ++i) {
        // close over the current item
        (function(ctrl) {
            // you can safely use ctrl now

            // call the callback like so
            ctrl.callbackHandler();
        }(control));
    }
}; 
```

顺便说一句，不要`eval`用来调用回调，只需传递函数引用：

```
callbackHandler: checkboxCallback 
```

我添加了如何在`$.fn.bindEvents`函数内部调用它的示例。

# ruby-on-rails-3 - 设计和用户配置文件

> ID：10832043
> 
> 赞同：0
> 
> 时间：2012-05-31T10:43:51.183
> 
> 标签：ruby-on-rails-3, devise

我已经设置了一个测试应用程序并设置了负责身份验证的设置，此外我还设置了一个组件，在注册后将它们发送到创建配置文件页面，效果很好。

我遇到的问题是，当登录用户去编辑他们的个人资料时，很容易更改查询字符串并访问其他用户数据 -

```
http://localhost:3000/profiles/1/edit 
```

我的问题是如何将其锁定到当前用户，以便只能编辑他们的数据？

罗比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:58:59.720

我会去一个`before_filter`。

```
# in profiles controller
class ProfilesController < ApplicationController

  before_filter :find_profile
  before_filter :check_if_authorized 

  def find_profile
    @profile = Profile.find(params[:id])
  end

  def check_if_authorized
    render :status => 404 and return unless current_user == @profile.user
  end

end 
```

假设：

*   设计模型被命名`User`
*   用户有一个个人资料
*   您已经在检查用户是否已登录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:07:33.020

您可以将令牌身份验证与会话一起使用，以实现更精确和安全的身份验证。

将 devise :token_authenticable 添加到模型 User 这将在每次创建用户时在 users 表的 field authentication_token 字段中创建一个身份验证令牌。

然后去 before_filter :verify_auth_token

```
def verify_auth_token
  if current_user.authentication_token == params[:auth_token]
   return true 
  else
   return false
  end
end 
```

编辑请求也应该是 http:///profiles/1/edit?auth_token=12wqaasaeaad

# c# - 过滤后的 GridView 的排序

> ID：10832046
> 
> 赞同：-1
> 
> 时间：2012-05-31T10:44:05.253
> 
> 标签：c#, asp.net, sorting, gridview, filter

**问题：**

我想允许在我的 GridView 上进行排序（ASC/DESC）和过滤。

我已经设法通过我`DropDownList`的. 但是，当用户从 DropDownList 中选择一个过滤器，然后尝试对结果数据进行排序时，GridView 会“忘记”当前选择的过滤器并仅对我的所有数据进行排序，而不是像您期望的那样对过滤后的数据进行排序。`DataBound``GridView`

**我试过的：**

这是我的过滤代码...

```
private void FilterGridView()
{
     SqlCommand command = new SqlCommand();
     SqlConnection connection = new SqlConnection();
     connection.ConnectionString = WebConfigurationManager.ConnectionStrings[1].ConnectionString;

     command.CommandText = string.Format("SELECT * FROM Products WHERE {0} = 1", ddlProdFilter.SelectedValue);

     if (ddlProdFilter.SelectedValue == "on_sale")
     {
            command.CommandText = "SELECT * FROM Products INNER JOIN ProductVariants ON [Products].product_id = [ProductVariants].product_id WHERE [ProductVariants].on_sale = 1";
     }
     else if (ddlProdFilter.SelectedValue == "*")
     {
            command.CommandText = "SELECT * FROM Products";
     }

     command.Connection = connection;

     SqlDataAdapter sqlAdapter = new SqlDataAdapter(command);
     DataSet ds = new DataSet();

     sqlAdapter.Fill(ds);

     if (ds.Tables[0].Rows.Count == 0)
     {
          pnlNoProducts.Visible = true;
     }
     else
     {
          pnlNoProducts.Visible = false;
     }

     gvAllProducts.DataSource = ds;
} 
```

下拉列表中选择的值对应于我表中的列名。

这是我的排序代码...

```
private void SortGridView(string sortExpression, string sortDir)
{
     SqlCommand command = new SqlCommand();
     SqlConnection connection = new SqlConnection();
     connection.ConnectionString = WebConfigurationManager.ConnectionStrings[1].ConnectionString;

     if (!string.IsNullOrEmpty(sortDir))
     {
         command.CommandText = "SELECT * FROM Products ORDER BY " + sortExpression + " " + sortDir;
     }

     command.Connection = connection;

     SqlDataAdapter sqlAdapter = new SqlDataAdapter(command);
     DataSet ds = new DataSet();
     sqlAdapter.Fill(ds);

     DataTable dt = new DataTable();

     dt = ds.Tables[0];

     gvAllProducts.DataSource = dt;
} 
```

其中`sortExpression`对应于选定`DataBound`字段，例如`product_id`，最后，`sortDir`是一个会话变量，用于准确跟踪回发之间的排序顺序。

事件处理程序。

```
protected void gvAllProducts_OnSorting(object sender, GridViewSortEventArgs e)
{
     if (e.SortDirection == SortDirection.Ascending && SessionHelper.GetSessionStringValue("SORT_DIRECTION") != "DESC")//if ascending and the last sort order wasn't descending, sort by DSC
     {
         SessionHelper.SetSessionValue("DESC", "SORT_DIRECTION");
     }
     else if (SessionHelper.GetSessionStringValue("SORT_DIRECTION") == "DESC")//otherwise, if the last sort order was desc, sort asc
     {
         SessionHelper.SetSessionValue("ASC", "SORT_DIRECTION");
     }

     SortGridView(e.SortExpression, SessionHelper.GetSessionStringValue("SORT_DIRECTION"));
     BindDataSource();
     e.Cancel = true;
}

protected void ddlProdFilter_SelectedIndexChanged(object sender, EventArgs e)
{
     FilterGridView();
     BindDataSource();
}

protected void gvAllProducts_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
     gvAllProducts.PageIndex = e.NewPageIndex;
     FilterGridView();
     BindDataSource();
} 
```

我尝试在进行排序时/之后调用过滤代码，这很有意义，但同样的事情也会发生。我已经用谷歌搜索了大约 2 个小时，但找不到解决方案。

以前有没有人遇到过这个问题？你能在这里提供一个潜在的解决方案或一些指导吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:01:05.103

通过在我的排序查询中包含 ddl 值来管理它的工作：

```
 private void SortGridView(string sortExpression, string sortDir, string filter)
        {
            SqlCommand command = new SqlCommand();
            SqlConnection connection = new SqlConnection();
            connection.ConnectionString = WebConfigurationManager.ConnectionStrings[1].ConnectionString;

            if (filter == "*")
            {
                command.CommandText = "SELECT * FROM Products ORDER BY " + sortExpression + " " + sortDir;
            }
            else if (filter == "on_sale")
            {
                command.CommandText = "SELECT * FROM Products INNER JOIN ProductVariants ON [Products].product_id = [ProductVariants].product_id WHERE [ProductVariants].on_sale = 1 ORDER BY [Products]." + sortExpression + " " + sortDir;
            }
            else
            {
                command.CommandText = "SELECT * FROM Products WHERE " + filter + " = 1 ORDER BY " + sortExpression + " " + sortDir;
            }

            command.Connection = connection;

            SqlDataAdapter sqlAdapter = new SqlDataAdapter(command);
            DataSet ds = new DataSet();
            sqlAdapter.Fill(ds);

            DataTable dt = new DataTable();

            dt = ds.Tables[0];

            gvAllProducts.DataSource = dt;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:55:35.167

您在 SortGridView(..) 方法中的查询没有考虑 ddl 值。您应该调用您的 FilterGridView(..) 方法 OnSorting 事件或类似事件（例如，将其称为 BindGrid()）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:03:25.530

与其使用 void 方法，不如`FilterGridView`使用“层”方法来检索适当的数据。它应该返回一个正确填充的 DataSet 或 Collection 对象，而不是直接分配数据源。这样，您的检索方法将设置任何必要的过滤和/或排序条件。然后在您的操作方法中，您将指定：

```
 gvAllProducts.DataSource = GetFilteredSortedData(); 
```

如果您需要，您可以构建它以便它接受参数并为默认的“空”值使用重载。

# android - Listview 内的左右对齐行

> ID：10832049
> 
> 赞同：2
> 
> 时间：2012-05-31T10:44:12.400
> 
> 标签：android, listview

我想实现像iphone sms这样的接口：

![怎么做](../Images/cde08a15b2cf8d1eb9d61c109f2790fc.png)

现在我有我的自定义 ChatAdapter 的聊天列表视图，传入和传出消息从不同的布局膨胀：

输出布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:background="@drawable/question_bubble"
    android:paddingBottom="10dp"
    android:paddingLeft="20dp"
    android:paddingRight="27dp"
    android:paddingTop="10dp"
    android:textColor="@color/BlackColor"
    android:textSize="18sp" /> 
```

传入布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:autoLink="all"
    android:background="@drawable/answer_bubble"
    android:paddingLeft="27dp"
    android:paddingRight="20dp"
    android:paddingTop="10dp"
    android:paddingBottom="10dp"    
    android:textColor="@color/BlackColor"
    android:textSize="18sp"/> 
```

我使用“layout_gravity”，但它在列表视图中不起作用。结果：

![我的界面](../Images/d04c86b62dcd7e7513733478da34c934.png)

如何将问题消息对齐到右侧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T10:51:45.810

将包装器布局添加到将具有and的项目布局（例如 a `LinearLayout`），这会将内部/调整到正确的位置。`layout_width="match_parent"``gravitiy="left"/"right"``Layout``TextView`

一般来说，强烈建议不要使用`wrap_content`a 中的项目`ListView`，这会使`ListView`'`onMeasure`方法被重复调用并减慢您的应用程序的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:59:59.720

```
You can try this one:
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    **android:layout_width="fill_parent"**
    android:layout_height="wrap_content"
    **android:gravity="right"** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T18:11:12.990

我目前也在研究这个问题。无法使用此处提到的建议。对我来说，它只能通过使用：`linearlayout.setGravity(Gravity.RIGHT);`并在适配器方法中`setGravity(Gravity.LEFT);`扩展标准布局后以编程方式起作用。`getView`这些线性布局的宽度为 ，`wrap_content`并且是宽度为 的线性布局的子级`match_parent`。也不要忘记在每次通过 请求视图时都这样做`getView`，而不仅仅是 if `convertView==null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-06T13:57:13.007

如果您遇到此类问题，请确保您的文本布局设置为此格式

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/bubble_layout_parent"
android:layout_width="match_parent"
android:layout_height="wrap_content">

<LinearLayout
    android:id="@+id/bubble_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:background="@drawable/chat_bubble_right">

    <TextView
        android:id="@+id/message_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:maxEms="12"
        android:text="Hi! new message"
        android:textColor="@color/colorWhite"
        android:textSize="15sp" />
</LinearLayout> 
```

请注意，父 LinearLayout 宽度设置为 match_parent 而其他设置为 wrap_content。这让我熬了好几个小时。

# c# - 如何过滤 IQueryable 整棵树？

> ID：10832056
> 
> 赞同：0
> 
> 时间：2012-05-31T10:45:05.067
> 
> 标签：c#, where, iqueryable

我有`Contact`包含`Communication`子查询的查询，其中包含`CommunicationExtension`子查询

```
static class Program
    {
        public class Contact
        {
            public int ContactID { get; set; }
            public List<Communication> Communications { get; set; }
            public DateTime? DeletionDate { get; set; }
        }

        public class Communication
        {
            public int CommuncationID { get; set; }
            public List<CommunicationExtension> CommunicationExtensions { get; set; }
            public DateTime? DeletionDate { get; set; }
        }

        public class CommunicationExtension
        {
            public int CommunicationExtensionID { get; set; }
            public int AreaCode { get; set; }
            public DateTime? DeletionDate { get; set; }
        }

        static void Main(string[] args)
        {
            IQueryable<Contact> q = GenerateData();
            IQueryable<Contact> result =
                q.Where(c => c.DeletionDate == null && 
                    c.Communications.Where(co => co.DeletionDate == null && 
                        co.CommunicationExtensions.Where(ce => ce.DeletionDate == null));
        }

        private static IQueryable<Contact> GenerateData()
        {
            return new List<Contact>
                       {
                           new Contact
                               {
                                   ContactID = 1,
                                   DeletionDate = DateTime.Now,
                                   Communications =
                                       new List<Communication>
                                           {
                                               new Communication
                                                   {
                                                       CommuncationID = 1,
                                                       DeletionDate = DateTime.Now,
                                                       CommunicationExtensions = 
                                                       new List<CommunicationExtension>
                                                           {
                                                               new CommunicationExtension
                                                                   {
                                                                       CommunicationExtensionID = 1,
                                                                       AreaCode = 5,
                                                                       DeletionDate = null
                                                                   }
                                                           }
                                                   },
                                               new Communication
                                                   {
                                                       CommuncationID = 2,
                                                       DeletionDate = null,
                                                       CommunicationExtensions = 
                                                       new List<CommunicationExtension>
                                                           {
                                                               new CommunicationExtension
                                                                   {
                                                                       CommunicationExtensionID = 2,
                                                                       AreaCode = 55,
                                                                       DeletionDate = DateTime.Now
                                                                   }
                                                           }
                                                   }
                                           }
                               },
                           new Contact
                               {
                                   ContactID = 2,
                                   DeletionDate = null,
                                   Communications =
                                       new List<Communication>
                                           {
                                               new Communication
                                                   {
                                                       CommuncationID = 1,
                                                       DeletionDate = null,
                                                       CommunicationExtensions = 
                                                       new List<CommunicationExtension>
                                                           {
                                                               new CommunicationExtension
                                                                   {
                                                                       CommunicationExtensionID = 3,
                                                                       AreaCode = 54,
                                                                       DeletionDate = null
                                                                   }
                                                           }
                                                   },
                                               new Communication
                                                   {
                                                       CommuncationID = 2,
                                                       DeletionDate = DateTime.Now,
                                                       CommunicationExtensions = 
                                                       new List<CommunicationExtension>
                                                           {
                                                               new CommunicationExtension
                                                                   {
                                                                       CommunicationExtensionID = 4,
                                                                       AreaCode = 5565,
                                                                       DeletionDate = null
                                                                   }
                                                           }
                                                   }
                                           }
                               }
                       }.AsQueryable();
        }
    } 
```

当我尝试构建它时，我收到错误：

运算符“&&”不能应用于“bool”和“System.Collections.Generic.IEnumerable”类型的操作数

在线的：

```
IQueryable<Contact> result =
                q.Where(c => c.DeletionDate == null && 
                    c.Communications.Where(co => co.DeletionDate == null && 
                        co.CommunicationExtensions.Where(ce => ce.DeletionDate == null))); 
```

我需要过滤所有未删除的数据（`DeletionDate == null`）。在我的场景中，数据库中有大约 200 个表，每个表都包含可为空的字段`DeletionDate`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:40:09.310

这是问题所在：

```
c.Communications.Where(co => co.DeletionDate == null && 
    co.CommunicationExtensions.Where(ce => ce.DeletionDate == null) 
```

这两行不返回布尔值，因此您的`Where`调用不知道如何处理它。您是否想要任何至少有一个未删除`Communications`和的联系人`CommuincationExtensions`？如果是这样，那么将`Where`调用更改为`Any`它应该可以工作。但是，请注意，在实际与您打交道时，您`Contacts`仍然需要过滤掉任何已删除的`Communications`/`CommunicationExtensions`因为无论如何关系只会为您提供相关记录。换句话说，`contact.Communications`将返回 all`Communications`与 that 相关的`Contact`，`comm.CommunicationExtensions`并将返回 all `CommunicationExtensions`，因此您仍然需要在处理它们时过滤掉任何已删除的记录。

# mysql - SQL 检查约束使值只允许部分数字和其他部分只允许字母

> ID：10832061
> 
> 赞同：0
> 
> 时间：2012-05-31T10:45:19.530
> 
> 标签：mysql, sql, sql-server

我一直在寻找年龄来尝试找到这个问题的答案，但还没有找到一个这样做的例子来帮助我解决如何实现它。

我正在创建一个表，我想要 MS SQL 服务器中的一列是 CHAR(5) 数据类型，但我希望它只允许它的前 2 个字符有一个字母，后面的 3 个字符只能是数字。我见过像“CHECK (UnitCode NOT LIKE '%[^A-Z0-9]%')”这样的东西，它仅限于字母和数字，但并不强制只允许哪些字符可以或不能是数字或字母。

如果有人能指出我正确的方向，我会非常感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:48:15.227

`WHERE column LIKE '[A-Z][A-Z][0-9][0-9][0-9]'`

假设一个“字母”确实是 AZ 而不是别的（例如重音字符或非欧洲字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:25:13.847

您应该在创建表时指定约束检查：

> CREATE TABLE table_with_data ( data_to_check CHAR(5), CONSTRAINT data_format_chk CHECK ((SUBSTRING(data_to_check FROM 1 FOR 2) LIKE '[a-zA-Z]') AND (CAST(SUBSTRING(data_to_check FROM 3 FOR 3) AS SIGNED) 0 和 999) ) );

# java - 安排 Java 应用程序每天运行的最有效方法

> ID：10832062
> 
> 赞同：0
> 
> 时间：2012-05-31T10:45:23.290
> 
> 标签：java, timer, batch-file, scheduled-tasks

我有一个从 FTP 服务器下载文件的 java 应用程序，我需要它每天运行。我只是想知道安排它运行的最佳方法是什么。我目前正在考虑的选项是[Windows 调度程序](http://support.microsoft.com/kb/308569)和[Java 计时器任务](http://www.roseindia.net/java/example/java/util/CertainAndRepeatTime.shtml)。

目前，我让 Windows 调度程序指向运行我的程序的批处理文件。

如果有人在该领域有任何知识，我会很高兴收到你的来信！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:47:34.703

查看Windows上的[AT TASKS和 unix 上的](http://support.microsoft.com/kb/313565)[CRON JOBS](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)。这些可以运行您的 Java 程序。

您还应该看看[Quartz](http://www.quartz-scheduler.org/)，它是一个基于 Java 的作业调度系统。

您也可以从此[链接](https://stackoverflow.com/questions/1498837/how-to-run-a-task-daily-from-java)获得帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:00:21.230

为什么不使用 EJB 3 的 @Schedule 功能？如果您的服务器不支持 EJB 3，请使用 Quartz、Timer 和 TimerTask 类。

# sql-server - 分区导致运行总计查询

> ID：10832067
> 
> 赞同：2
> 
> 时间：2012-05-31T10:45:34.433
> 
> 标签：sql-server, sql-server-2008

我正在寻找一种快速方法来在按特定列分区的大型 SQL Server 2008 数据集中创建累积总计，可能通过使用**多重赋值变量解决方案**。作为一个非常基本的示例，我想在下面创建“cumulative_total”列：

```
user_id | month | total | cumulative_total

1       | 1     | 2.0   | 2.0
1       | 2     | 1.0   | 3.0
1       | 3     | 3.5   | 8.5

2       | 1     | 0.5   | 0.5
2       | 2     | 1.5   | 2.0
2       | 3     | 2.0   | 4.0 
```

传统上，我们使用相关子查询来完成此操作，但是在大量数据（超过 200,000 行和几个不同类别的运行总数）上，这并没有给我们提供理想的性能。

我最近在这里阅读了有关使用多个赋值变量进行累积求和的信息：

[http://sqlblog.com/blogs/paul_nielsen/archive/2007/12/06/cumulative-totals-screencast.aspx](http://sqlblog.com/blogs/paul_nielsen/archive/2007/12/06/cumulative-totals-screencast.aspx)

在该博客的示例中，累积变量解决方案如下所示：

```
UPDATE my_table
SET @CumulativeTotal=cumulative_total=@CumulativeTotal+ISNULL(total, 0) 
```

对于上面示例中的单个用户（用户 1 或用户 2）求和，此解决方案似乎非常快。但是，我需要按用户有效分区 - 给我按月按用户的累计总数。

有谁知道扩展多个赋值变量概念来解决这个问题的方法，或者除了相关子查询或游标之外的任何其他想法？

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T12:23:22.570

如果您不需要存储数据（您不应该这样做，因为您需要在任何行更改、添加或删除时更新运行总计），并且如果您不信任古怪的更新（您不应该，因为它不能保证工作，并且它的行为可能会随着修补程序、服务包、升级甚至基础索引或统计信息的变化而改变），您可以在运行时尝试这种类型的查询。这是 MVP Hugo Kornelis 创造的“基于集合的迭代”的方法（他在[SQL Server MVP Deep Dives的一章中发布了类似的内容](http://manning.com/nielsen/)）。由于运行总计通常需要在整个集合上使用游标，对整个集合进行古怪的更新，或者随着行数的增加而变得越来越昂贵的单个非线性自连接，这里的技巧是循环一些有限的集合中的元素（在这种情况下，对于每个用户，每行的“排名”以月份为单位 - 并且您只为该排名的所有用户/月份组合处理每个排名一次，因此不是循环遍历 200,000 行，最多循环 24 次）。

```
DECLARE @t TABLE
(
  [user_id] INT, 
  [month] TINYINT,
  total DECIMAL(10,1), 
  RunningTotal DECIMAL(10,1), 
  Rnk INT
);

INSERT @t SELECT [user_id], [month], total, total, 
  RANK() OVER (PARTITION BY [user_id] ORDER BY [month]) 
  FROM dbo.my_table;

DECLARE @rnk INT = 1, @rc INT = 1;

WHILE @rc > 0
BEGIN
  SET @rnk += 1;

  UPDATE c SET RunningTotal = p.RunningTotal + c.total
    FROM @t AS c INNER JOIN @t AS p
    ON c.[user_id] = p.[user_id]
    AND p.rnk = @rnk - 1
    AND c.rnk = @rnk;

  SET @rc = @@ROWCOUNT;
END

SELECT [user_id], [month], total, RunningTotal
FROM @t
ORDER BY [user_id], rnk; 
```

结果：

```
user_id  month   total   RunningTotal
-------  -----   -----   ------------
1        1       2.0     2.0
1        2       1.0     3.0
1        3       3.5     6.5 -- I think your calculation is off
2        1       0.5     0.5
2        2       1.5     2.0
2        3       2.0     4.0 
```

当然，您*可以*从这个表变量更新基表，但是为什么要麻烦，因为这些存储的值只有在下次任何 DML 语句触及该表时才有效？

```
UPDATE mt
  SET cumulative_total = t.RunningTotal
  FROM dbo.my_table AS mt
  INNER JOIN @t AS t
  ON mt.[user_id] = t.[user_id]
  AND mt.[month] = t.[month]; 
```

由于我们不依赖任何类型的隐式排序，因此这是 100% 支持的，并且值得与不受支持的古怪更新进行性能比较。即使它没有击败它但接近它，您也应该考虑使用它恕我直言。

至于 SQL Server 2012 解决方案，Matt 提到，`RANGE`但由于此方法使用磁盘假脱机，因此您还应该使用 进行测试，`ROWS`而不是仅使用`RANGE`. 这是您的案例的一个简单示例：

```
SELECT
  [user_id],
  [month],
  total,
  RunningTotal = SUM(total) OVER 
  (
    PARTITION BY [user_id] 
    ORDER BY [month] ROWS UNBOUNDED PRECEDING
  )
FROM dbo.my_table
ORDER BY [user_id], [month]; 
```

将此与`RANGE UNBOUNDED PRECEDING`或根本不进行比较`ROWS\RANGE`（这也将使用`RANGE`磁盘假脱机）。即使计划看起来稍微复杂一些（一个额外的序列项目操作员），上面的总持续时间也会更短，I/O 也会*更少*。

我最近发表了一篇博客文章，概述了我在特定运行总计场景中观察到的一些性能差异：

[http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals](http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:01:14.420

您在 SQL Server 2008 中的选择是相当有限的 - 因为您可以根据上述方法（称为“古怪更新”）执行某些操作，或者您可以在 CLR 中执行某些操作。

就我个人而言，我会选择 CLR，因为它可以保证工作，而古怪的更新语法不是正式支持的（因此可能会在未来的版本中中断）。

您正在寻找的古怪更新语法的变化类似于：

```
UPDATE my_table
SET @CumulativeTotal=cumulative_total=ISNULL(total, 0) + 
        CASE WHEN @user=@lastUser THEN @CumulativeTotal ELSE 0 END, 
    @user=lastUser 
```

值得注意的是，在 SQL Server 2012 中引入了`RANGE`对窗口函数的支持，因此这可以以最有效的方式表达，同时 100% 得到支持。

# authentication - 像我的世界一样的游戏认证？

> ID：10832069
> 
> 赞同：0
> 
> 时间：2012-05-31T10:45:46.363
> 
> 标签：authentication, minecraft

我正在用 C# 制作游戏，并且想知道如何验证用户身份。我希望它类似于我的世界，用户创建一个帐户并可以支付使他们的帐户溢价。团队中的人了解大多数语言，因此这不是限制。我们有相当大的预算，所以这也不是限制。

我该怎么做呢？如果您知道如何执行此操作并且想成为团队的一员，只需发表评论即可。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:52:22.153

仅在 .NET 框架内，您就有多种选择。您可以允许冒充匿名访问网站的某些部分，并为付费帐户维护不同的用户（不需要是广告/每个付费帐户的任何用户）。

如果您不想为每个帐户使用 AD 用户等，您可以编写一个身份服务来传回令牌，从而允许您的游戏/网站以特定用户身份登录该人。如果您想要基于声明的身份，您可以使用 WIF SDK。

如果您对每个用户基于 AD 的基本身份验证感到满意，那非常简单。您可以从 AD 中提取用户的原则，以查看他们是否在付费组等中。

# android - android上的主要数据模型

> ID：10832071
> 
> 赞同：0
> 
> 时间：2012-05-31T10:46:00.573
> 
> 标签：android

我有一个包含许多活动的 android 应用程序。我有一个单例类，其中包含我的主要数据模型，所有活动都可以访问该模型以获取数据。

问题是有时android GC决定在后台应用程序时销毁我的单例（当您按下主页按钮时）。无论如何我可以绕过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:51:22.613

我在我当前的应用程序中遇到了这个确切的问题，它需要在各种“单例”类中保留大量数据。我遇到的问题和你的情况一样；即，有时当将应用程序带回前台时，一些静态“单例”类已被破坏。

我认为，问题在于此类课程的“生命周期”永远无法很好地定义或预测。毕竟，它是一个持有对自身的引用的类，所以当系统想要获取一些资源时，它很容易被垃圾收集。

您可能已经知道扩展`android.app.Application`是使用传统单例的众所周知的替代方法。对我有用的解决方案是将数据单例类的实际实例保存在 的扩展类中`android.app.Application`，其生命周期已明确定义。任何其他想要访问这些单例的类都可以使用`Application`类中的 getter 来获取它们。

因此，例如，我有一个名为`AppState`extends的类`Application`，它包含以下实例：

```
import android.app.Application;

public class AppState extends Application {
    ...

    // "Singleton" instances that this Application extension looks after
    private MSData   singletonInstanceMSData;

    public AppState() {
        ...
        singletonInstanceMSData = new MSData();
        ...

    // ---------------- Singleton instance control ----------------

    public MSData getMSData(){
        return singletonInstanceMSData;
    }

    // I also provide the means to 'reset' the instances on startup (this is
    // something I need to do for my application - you may or may not need to)
    public void resetControllerSpecificData(){
        singletonInstanceMSData.reset();
        ... 
```

不要忘记，如果你扩展你需要修改你的清单`Application`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:30:05.307

AFAIR，lifespan os singleton 是他的类加载器的寿命 - 也是完整的 VM 。当用户点击主页按钮时，您的应用程序进入后台并可能被破坏 - 您无法对它做任何事情。你最好的选择是在你的 onPause() 回调中保存任何必要的东西（或者如果你真的偏执，就在每次更改 datza 时使用 write through）

# c# - 如果 asp:Panel 生成一个 div，什么生成一个跨度？

> ID：10832077
> 
> 赞同：2
> 
> 时间：2012-05-31T10:46:17.033
> 
> 标签：c#, .net, user-controls

我想知道如何使用 asp:Control 插入跨度（不是在 cs 中，而是在 aspx 中构建它）而不是 div。

有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T10:53:46.783

通常，该`asp:Label`控件使用特定格式的范围。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T11:14:35.763

可能我误解了这个问题；如果你想要一个`<span>`那么为什么不简单地使用一个`<span>`标签呢？

如果您想在后面的代码中控制它，您可以`runat="server"`像添加任何其他控件一样添加属性。

例如：

```
<span runat="server" ID="MySpan">Some content</span> 
```

在你后面的代码中：

```
private void Page_Load(object sender, EventArgs args )
{
    MySpan.Visible = false;
} 
```

# java - java-construct 从二维整数数组设置并返回设置为二维整数数组

> ID：10832083
> 
> 赞同：-5
> 
> 时间：2012-05-31T10:46:46.597
> 
> 标签：java

我已使用以下代码将 2D Integer array[n][3] 转换为 LinkedHashSet （用于删除行中的重复项）。

```
 final Set<Set<Integer>> r = new LinkedHashSet<Set<Integer>>();
  for(Integer[] row:orderedpair3k) 
  r.add(new LinkedHashSet<Integer>(Arrays.asList(row))); 
```

如何将其转换回二维数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:53:16.130

假设这是家庭作业...

`size()`第 1 步：创建一个带有外部的数组`Set`

`Sets`第 2 步：在外部循环`Set`

第三步：对每个内部`Set`使用`toArray(new Integer[0])`获取内部数组

第 4 步：将新的内部数组分配到外部数组的正确位置。

# javascript - 如何使用jquery从url中删除url的一部分？

> ID：10832084
> 
> 赞同：0
> 
> 时间：2012-05-31T10:46:49.817
> 
> 标签：javascript, jquery

我有一个 javascript 变量

```
var url =  http://www.abc.it/it/security/security.aspx?security=pdfcompare&../securitycomparepdf/default.aspx?SecurityTokenList=blab]2]0]blab$ALL|blab]2]0]blab$ALL|blab]2]0]blab$ALL; 
```

我需要`"../securitycomparepdf/default.aspx?"`使用 jquery 从中删除部分，以便变量变为

```
http://www.abc.it/it/security/security.aspx?security=pdfcompare&SecurityTokenList=blab]2]0]blab$ALL|blab]2]0]blab$ALL|blab]2]0]blab$ALL; 
```

有人可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:48:27.597

为你做了一个演示：http: [//jsfiddle.net/B3Uwj/27/](http://jsfiddle.net/B3Uwj/27/)（来自@tats_innit）

```
url = url.replace("../securitycomparepdf/default.aspx?", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:49:52.300

使用以下 JS

```
var url = "http://www.abc.it/it/security/security.aspx?security=pdfcompare&../securitycomparepdf/default.aspx?SecurityTokenList=blab]2]0]blab$ALL|blab]2]0]blab$ALL|blab]2]0]blab$ALL";

url = url.replace("../securitycomparepdf/default.aspx?","");

​alert(url);​ 
```

[在此处](http://jsfiddle.net/wCGDj/)查看实时示例

# sharepoint - 未在 sharepoint 中显示的图像打印出来

> ID：10832090
> 
> 赞同：0
> 
> 时间：2012-05-31T10:47:20.283
> 
> 标签：sharepoint, sharepoint-2010

我正在使用 Sharepoint 2010，并创建了一些自定义可视化 Web 部件。在这些 Web 部件的 html 中，我正在显示位于 layouts 文件夹下的图像。

它们正确显示，但是，当我打印网站预览或尝试打印页面时，图像消失了！

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:12:30.737

这可能是因为 CSS，当您使用不同的 CSS 进行打印时，SharePoint 默认会隐藏一些元素，请参阅此[链接](http://www.w3.org/TR/CSS2/media.html)以了解其工作原理。使用上述方法检查您的图像是否被隐藏。

# php - 如何添加 到 php 字符串

> ID：10832091
> 
> 赞同：-1
> 
> 时间：2012-05-31T10:47:22.487
> 
> 标签：php, wordpress

我对 PHP 有点陌生，我正在尝试在 PHP 变量中添加一个标签。

这就是我所拥有的，但它不起作用。

```
$linkText .= "<span>" . ( 'Reply', $this->_slug ) . "</span>"; 
```

谁能指出我正确的方向？

谢谢 ：）

更新：

这是完整的工作代码：

```
$linkText = __( 'Reply', $this->_slug );
$linkAttrs['href'] = "http://twitter.com/intent/tweet?in_reply_to={$tweet->id_str}";
$linkAttrs['class'] = 'in-reply-to';
$linkAttrs['title'] = $linkText;
$widgetContent .= $this->_buildLink( $linkText, $linkAttrs ); 
```

我在这里要做的是在 $linkText 周围添加一个标签，以便我得到类似的结果

```
<a href="#"><span>Title</span></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:49:48.237

```
$linkText .= '<span>Reply ' . $this->_slug . '</span>'; 
```

不需要括号，您基本上可以使用`.`. 我已将“回复”合并到跨度标记中，因为它们都是字符串，只有 PHP 变量`$this->_slug`和字符串需要用`.`

[这是 PHP 中字符串的手册页](http://uk3.php.net/manual/en/language.types.string.php)。

根据您的更新，并查看[twitter 插件源代码](https://plugins.svn.wordpress.org/twitter-widget-pro/trunk/wp-twitter-widget.php)，这是我认为您需要的代码：

```
$linkText = '<span>' . __( 'Reply', $this->_slug ) . '</span>';
$linkAttrs['href'] = "http://twitter.com/intent/tweet?in_reply_to={$tweet->id_str}";
$linkAttrs['class'] = 'in-reply-to';
$linkAttrs['title'] = $linkText;
$widgetContent .= $this->_buildLink( $linkText, $linkAttrs, true ); 
```

我还向 传递了一个`true`参数，以`buildLink()`防止`<span>`标签被转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:51:16.527

您正在尝试连接括号而不将其放在一对引号之间，并且您应该使用点而不是逗号。

```
$linkText .= "<span>(Reply " . $this->_slug . ")</span>"; 
```

PS 如果您认为我弄错了并且您不需要它们，请删除括号：)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:51:42.527

如果我做对了，我不确定，但如果 $this->_slug 是一个函数，你必须这样调用它：

```
$linkText .= "<span>" . $this->_slug('Reply') . "</span>"; 
```

# ruby-on-rails - 使用 Scope 搜索或 Multisearch 时 pg_search 的性能？

> ID：10832098
> 
> 赞同：1
> 
> 时间：2012-05-31T10:47:48.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pg-search

目前，我正在研究伟大的 pg_search gem 的可能性以及范围搜索和多搜索之间的差异。

**pg_search_scope**似乎是我想使用的更优雅的解决方案，但我对性能感兴趣，因为我没有看到为此构建的任何索引（与**mutlisearch**不同），我应该对手动使用的列进行索引吗？有硬汉吗？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:32:07.177

pg_search 只生成查询，因此将 GIN 或 GIST 索引添加到您的列应该有助于提高性能，但是根据您正在执行的搜索组合，您需要添加的确切索引会有所不同。可能有帮助的讨论在这里 - [https://github.com/Casecommons/pg_search/issues/15](https://github.com/Casecommons/pg_search/issues/15)

# android - 如何在android中清除我的listview

> ID：10832102
> 
> 赞同：0
> 
> 时间：2012-05-31T10:48:17.427
> 
> 标签：android, listview, listadapter

我已将我的 ListAdapter 包含在我的 EMPLOYEE 类中。并且 list1 包含从 webservices 获取的 Empname、Eno、Salary 的值。现在在员工屏幕中显示 5 条记录后...当我单击 Depatrment Activity 并返回 Employee 时。 .. 最初的 5 条记录被附加到列表中，现在有 10 条记录，依此类推.. 过程是这样进行的......请帮助我，以免添加重复项，并且必须刷新列表.

注意：clear() 或 notifydatasetchanged()、invalidate() 不起作用。

```
ListAdapter adapter = new SimpleAdapter(this, list1,
R.layout.employee, new String[] { "EmpName","Eno", "Salary" }, new int[]
 {R.id.ename, R.id.eno,R.id.sal});

    setListAdapter(adapter);
Listview lv = getListView();

    lv.setTextFilterEnabled(true);

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            pos = position;
            registerForContextMenu(getListView());

        }

    });

    TextView tvdept = (TextView) findViewById(R.id.Department); 
    tvdept.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
        startActivity(new Intent(Employee.this, Department.class));
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:41:16.633

没有看到更多代码，很难确定，但我会冒险猜测......

当您离开活动并返回时，框架会尝试将您恢复到您使用`savedInstanceState`捆绑包的位置。它使用它来重新创建您上次在该活动中所处的位置。听起来您已经在`onCreate`方法中设置了列表并且没有检查`savedInstanceState`捆绑包，因此当您返回活动时，框架正在恢复您的列表，然后继续进入您的代码并重新创建列表（在此情况下再次添加相同的数据）。

尝试将您的列表创建代码包装在一个`if`检查`savedInstanceState`捆绑包是否存在的代码中。

像这样：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   if (savedInstanceState == null) {
       // do your list setup here
   }
 } 
```

使用它，如果您返回活动并且框架保存了您的状态，它将简单地恢复它而不运行您的列表创建代码。

I know this doesn't answer the actual question, but it should solve the root issue (duplicating list data on return to activity).

# mysql - Mysql：相同的查询，不同的结果

> ID：10832106
> 
> 赞同：0
> 
> 时间：2012-05-31T10:48:27.853
> 
> 标签：mysql, sql

编辑：

抱歉，查询不可读，我在截止日期前。我设法通过将此查询分成两个较小的查询并在 Java 中执行一些业务逻辑来解决问题。还是想知道为什么这个查询可以随机时间返回两个不同的结果。

因此，它会随机返回一次所有预期结果，其他时间只返回一半。我注意到，当我编写它时加入每个连接，并在每次连接后执行，最后它会返回所有预期的结果。因此，如果存在某种 MySql 内存或其他限制，它不会在连接中占用整个表，那么我会徘徊。还阅读不确定的查询，但不知道该说什么。

请帮助，询问是否需要澄清，并提前感谢您。

```
RESET QUERY CACHE;

SET SQL_BIG_SELECTS=1;

set @displayvideoaction_id = 2302;
set @ticSessionId = 3851;

select richtext.id,richtextcross.name,richtextcross.updates_demo_field,richtext.content from
(
select listitemcross.id,name,updates_demo_field,listitem.text_id from
(
select id,name, updates_demo_field, items_id from
(
SELECT id, name, answertype_id, updates_demo_field, 
@student:=CASE WHEN @class <> updates_demo_field THEN 0 ELSE @student+1 END AS rn,
@class:=updates_demo_field AS clset FROM
(SELECT @student:= -1) s,
(SELECT @class:= '-1') c,
(
select id, name, answertype_id, updates_demo_field from
(
select manytomany.questions_id from
(
select questiongroup_id from
(
select questiongroup_id from `ticnotes`.`scriptaction` where ticsession_id=@ticSessionId and questiongroup_id is not null
) scriptaction
inner join 
(
select * from `ticnotes`.`questiongroup` 
) questiongroup on scriptaction.questiongroup_id=questiongroup.id
) scriptgroup
inner join 
(
select * from `ticnotes`.`questiongroup_question` 
) manytomany on scriptgroup.questiongroup_id=manytomany.questiongroup_id
) questionrelation
inner join 
(
select * from `ticnotes`.`question`
) questiontable on questionrelation.questions_id=questiontable.id
where updates_demo_field = 'DEMO1' or updates_demo_field = 'DEMO2'
order by updates_demo_field, id desc
) t
having rn=0
) firstrowofgroup
inner join 
(
select * from `ticnotes`.`multipleoptionstype_listitem`
) selectlistanswers on firstrowofgroup.answertype_id=selectlistanswers.multipleoptionstype_id
) listitemcross
inner join 
(
select * from `ticnotes`.`listitem` 
) listitem on listitemcross.items_id=listitem.id
) richtextcross
inner join 
(
select * from `ticnotes`.`richtext` 
) richtext on richtextcross.text_id=richtext.id; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:53:23.420

我的第一印象是 - 不要使用捷径来描述您的表格。我迷路了，`td3`那么……我猜你也可能迷路了。如果您更明智地命名您的别名，那么出错并将 6 与 8 或其他任何内容混合在一起的机会就会更少。`td6``tdx3`

只是一个建议:)

mySQL 没有限制，所以我的赌注是人为错误 - 某处连接逻辑失败。

# android - 在操作栏 ShareActionProvider 上设置自定义共享图标

> ID：10832108
> 
> 赞同：15
> 
> 时间：2012-05-31T10:48:34.800
> 
> 标签：android, actionbarsherlock, shareactionprovider

我正在尝试设置图标 ShareActionProvider，需要一个纯白色而不是半透明的白色。

但是 share_menu.xml 和代码中的设置不起作用。只是想知道在扩展 ShareActionProvider 之前是否有人有解决方法。（我正在使用 actionbarsherlock）

```
@Override
public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
    inflater.inflate(R.menu.share_menu, menu);
    MenuItem actionItem = menu.findItem(R.id.share_action_provider);

    ShareActionProvider actionProvider = (ShareActionProvider) actionItem.getActionProvider();
     actionProvider.setShareIntent(mShareIntent);

    // re-setting the icon as it's not being picked up from the menu xml file
    actionItem.setIcon(R.drawable.ic_action_share);

    super.onCreateOptionsMenu(menu, inflater);

} 
```

share_menu.xml

```
 <item android:id="@+id/share_action_provider"
        android:showAsAction="ifRoom"
        android:title="@string/share_with"
        android:icon="@drawable/ic_action_share"
        android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider" /> 
```

更新：也尝试将其设置为样式，但没有乐趣

```
<style name="Theme.MyApp" parent="Theme.Sherlock.Light">
        <item name="actionModeStyle">@style/ActionModeStyle</item>
        <item name="android:actionModeStyle">@style/ActionModeStyle</item>
</style>

<style name="ActionModeStyle" parent="Widget.Sherlock.ActionMode">
      <item name="actionModeShareDrawable">@drawable/ic_action_share</item>
  </style> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T17:52:00.137

当我想要自定义操作栏时，通常我首先看的是 ActionBarSherlock 主题和样式。

我发现 Sherlock 主题使用了[theme.xml](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/values/abs__themes.xml#L43)文件中的“actionModeShareDrawable”。

尝试更改您的主题以直接包含“actionModeShareDrawable”项目。

```
<style name="Theme.MyApp" parent="Theme.Sherlock.Light">
    <item name="actionModeShareDrawable">@drawable/ic_action_share</item>
</style> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-20T23:50:55.720

需要`AppCompat`对 2 种样式进行更改：

1)

```
<style name="MyAppTheme" parent="@style/Theme.AppCompat.Light.DarkActionBar">
    <item name="actionBarWidgetTheme">@style/Theme.AppCompat.CustomShareIcon</item>
    <item name="android:actionBarWidgetTheme">@style/Theme.AppCompat.CustomShareIcon</item>
</style> 
```

换句话说，`attr:actionModeShareDrawable`在你`MyAppTheme`的指定不是你真正需要的，但它应该在你`attr:actionBarWidgetTheme`的下面提到：

2)

```
<style name="Theme.AppCompat.CustomShareIcon" parent="@style/Theme.AppCompat">
    <item name="actionModeShareDrawable">@drawable/abc_ic_menu_share_holo_dark</item> <!-- your icon goes here -->
</style> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-07T10:27:37.770

更新：忘记下面的TRICKY方式，只需子类ShareActionProvider，在`onCreateActionView`Method中返回null，并在menu.xml文件中提供你自己的图标，一切都会好起来的

============================

我发现了一个非常棘手但非 ActionBarSherlock 特定的方式：

1.  子类 ShareActionProvider，只需稍作调整：

    ```
    @Override
    public View onCreateActionView() {
        View target = super.onCreateActionView();
        ViewGroup viewGroup = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.actionbutton_share, null);
        ImageView overlay = (ImageView) viewGroup.findViewById(R.id.overlay);
        ViewGroup container = (ViewGroup) viewGroup.findViewById(R.id.container);
        container.addView(target);
        container.getLayoutParams().width = overlay.getLayoutParams().width;
        container.getLayoutParams().height = overlay.getLayoutParams().height;
        return viewGroup;
    } 
    ```

2.  创建一个布局文件（R.layout.actionbutton_share），将原始视图放在顶部但对用户透明（注意“android:alpha=0”部分）：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@+id/container"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:alpha="0" />

        <ImageView
            android:id="@+id/overlay"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="7dp"
            android:layout_marginRight="7dp"
            android:src="@drawable/yours_whatever_share_icon"
            tools:ignore="ContentDescription" />

    </RelativeLayout> 
    ```

3.  在 menu.xml 文件中使用被黑的 ShareActionProvider

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-14T14:28:56.397

**vivimice**的解决方案很好，但是最后使用的共享应用的图标也被隐藏了。

我将自定义共享图标作为没有任何 ShareActionProvider 的通用菜单项，只是在 onOptionsItemSelected() 方法中使用了以下代码：

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, getResources().getText(R.string.send_to))); 
```

它创建的不是弹出菜单，而是选择器对话框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-18T18:08:34.990

您可以像这样覆盖非公共属性。

```
<style name="Theme.MyApp" parent="android:Theme.Holo">
        <item name="*android:actionModeShareDrawalbe">@drawable/icon</item>
</style> 
```

(*) 表示引用 Android 中的非公共资源

# android - androidaidl，无法绑定到服务？

> ID：10832110
> 
> 赞同：1
> 
> 时间：2012-05-31T10:48:46.387
> 
> 标签：android, aidl

有没有人知道为什么？

活动

```
 private IExternalDeviceScannerService myService = null;
private ServiceConnection serviceConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName arg0, IBinder arg1) {
        // TODO Auto-generated method stub
        myService = IExternalDeviceScannerService.Stub.asInterface(arg1);
    }

    public void onServiceDisconnected(ComponentName name) {
        // TODO Auto-generated method stub
    }
};
    ......
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent intent = new Intent(this, ExternalDeviceScannerService.class);
    bindService(intent, serviceConnection,
            Context.BIND_AUTO_CREATE);
    .... 
```

服务

```
class ScannerServiceAIDL extends IExternalDeviceScannerService.Stub {
.......
}
    @Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return new ScannerServiceAIDL();
} 
```

我的活动从未连接到服务，即使我等了几秒钟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-08T12:53:47.793

我测试了您的代码并毫无问题地执行了代码。我认为您在项目的任何地方都犯了任何错误。我成功执行的代码如下。

## IExternalDeviceScannerService.aidl

```
package com.example.aidltest;

interface IExternalDeviceScannerService
{
    int getIntValue();
} 
```

## 清单.xml

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="22" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
     >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <service android:name=".ExternalDeviceScannerService"></service>
</application> 
```

## 活动

```
private IExternalDeviceScannerService myService = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Intent intent = new Intent(this, ExternalDeviceScannerService.class);
    // Bind service here
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
}

protected void onDestroy() {
    super.onDestroy();
    unbindService(mConnection);
    myService = null;
}

private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        myService = IExternalDeviceScannerService.Stub.asInterface(service);
        if (myService != null){
            try {
                Log.i("Value from AIDL", myService.getIntValue() +  "");
            } catch (RemoteException e) {
                e.printStackTrace();
            }
        }            
    }

    public void onServiceDisconnected(ComponentName className) {
        myService = null;
    }
}; 
```

## 服务

```
public class ExternalDeviceScannerService extends Service {

    private static final String LOG_TAG = "Service";

    @Override
    public void onCreate() {
        super.onCreate();
        Log.i(LOG_TAG, "Service Started.");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.i(LOG_TAG, "Service Stopped.");
    }

    final class ScannerServiceAIDL extends IExternalDeviceScannerService.Stub {
        public int getIntValue() throws RemoteException {
            return 20;
        }
    }
    @Override
    public IBinder onBind(Intent intent) {
        Log.i(LOG_TAG, "Service Bound.");
        return new ScannerServiceAIDL();
    }   
} 
```

与 AIDL 玩得开心！！！谢谢

# perl - 我无法正常输出

> ID：10832111
> 
> 赞同：0
> 
> 时间：2012-05-31T10:48:53.413
> 
> 标签：perl, user-input

每次我得到一个字符作为输入时，我都试图从文件中打印一个字符。我的问题是它打印了整行。我知道这是一个逻辑问题，我只是不知道如何解决它。

```
use Term::ReadKey;
$inputFile = "input.txt";
open IN, $inputFile or die "I can't open the file :$ \n";

ReadMode("cbreak");
while (<IN>) {  
    $line = <IN>;
    $char = ReadKey();
    foreach $i (split //, $line) {          
        print "$i" if ($char == 0);         
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:52:42.740

将`ReadKey`呼叫移动到`foreach`循环中。

* * *

```
use strictures;
use autodie qw(:all);
use Term::ReadKey qw(ReadKey ReadMode);

my $inputFile = 'input.txt';
open my $in, '<', $inputFile;

ReadMode('cbreak');
while (my $line = <$in>) {
    foreach my $i (split //, $line) {
        my $char = ReadKey;
        print $i;
    }
}

END { ReadMode('restore') } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:04:03.560

您的原始代码有3个问题：

*   您只读取一次字符（在`for`循环外）

*   您在测试时从输入文件中读取了 1 行`while (<IN>) {`（丢失该行！），然后再读取另一`$line = <IN>;`行 - 因此，在您的逻辑中仅读取 #d 行

*   `print "$i"`打印 1 行没有换行符，因此，您看不到分隔字符

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T08:49:11.923

我的脚本读取目录中的所有文件，然后放入列表中，从给定列表中选择一个随机文件。之后，每次从用户获取输入字符时，它都会从文件中打印一个字符。

```
#!C:\perl\perl\bin\perl

use Term::ReadKey qw(ReadKey ReadMode);
use autodie qw(:all);
use IO::Handle qw();
use Fatal qw( open );
STDOUT->autoflush(1);

my $directory = "codes";                                                                                #directory's name
opendir (DIR, $directory) or die "I can't open the directory $directory :$ \n";                         #open the dir
my @allFiles;                                                                                           #array of all the files
while (my $file = readdir(DIR)) {                                                                       #read each file from the directory
    next if ($file =~ m/^\./);                                                                          #exclude it if it starts with '.'
    push(@allFiles, $file);                                                                             #add file to the array
}
closedir(DIR);                                                                                          #close the input directory

my $filesNr = scalar(grep {defined $_} @allFiles);                                                      #get the size of the files array
my $randomNr = int(rand($filesNr));                                                                     #generate a random number in the given range (size of array)
$file = @allFiles[$randomNr];                                                                           #get the file at given index
open IN, $file or die "I can't open the file :$ \n";                                                    #read the given file

ReadMode('cbreak');                                                                                     #don't print the user's input           
while (my $line = <IN>) {                                                                               #read each line from file
    foreach my $i (split //, $line) {                                                                   #split the line in characters (including \n & \t)
        print "$i" if ReadKey();                                                                        #if keys are pressed, print the inexed char
    }
}
END { 
    ReadMode('restore')                                                                                 #deactivate 'cbreak' read mode
} 
```

# android - 如何阻止我的自定义复选框图标覆盖 android 上的文本？

> ID：10832113
> 
> 赞同：0
> 
> 时间：2012-05-31T10:49:00.510
> 
> 标签：android, checkbox, size

对于我设置的复选框，我有一个带有自定义图标（大于默认图标）的复选框：

```
mon  = new BitmapDrawable(BitmapFactory.decodeResource(getResources(), R.drawable.checkbox_on));
moff = new BitmapDrawable(BitmapFactory.decodeResource(getResources(), R.drawable.checkbox_off));

state = new StateListDrawable();
state.addState(new int[] {-android.R.attr.state_checked}, moff);
state.addState(new int[] { android.R.attr.state_checked}, mon);

cb.setButtonDrawable(state); 
```

它在手机上运行良好，但在具有更大屏幕和分辨率的平板电脑上，图标更大，但同时文本比手机小得多，图标覆盖文本的前几个字母。我怎样才能防止这种情况？

**编辑：**

我确认问题出在自定义复选框图标的大小与默认复选框图标不同。两种设备的尺寸似乎不同，所以有没有办法找出默认复选框图标的尺寸，以便我可以对自定义图标的尺寸或填充进行必要的调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T13:14:11.050

仍然在寻找解决方案的人请在复选框属性中使用以下行

`android:drawablePadding="15dp"`

这将解决重叠的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:08:18.833

这会因为不同的屏幕密度而发生，我们可以通过使用以下代码来避免：检查[CheckBox and text 之间的问题间距](https://stackoverflow.com/questions/4037795/android-spacing-between-checkbox-and-text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:21:10.937

我通过根据 dpi 动态缩放复选框图标来解决它。所以它总是合适的，文字也可以：

```
int gg = (int) (this.getResources().getDisplayMetrics().density * cb_info.getCompoundPaddingLeft());
mon  = new BitmapDrawable(BitmapFactory.decodeResource(getResources(), R.drawable.checkbox_on ));
int scalex = gg;
int scaley = mon.getBitmap().getHeight() * gg / mon.getBitmap().getWidth ();

mon  = new BitmapDrawable(Bitmap.createScaledBitmap( BitmapFactory.decodeResource(getResources(), R.drawable.checkbox_on ), scalex, scaley, true));
moff = new BitmapDrawable(Bitmap.createScaledBitmap( BitmapFactory.decodeResource(getResources(), R.drawable.checkbox_off), scalex, scaley, true)); 
```

# facebook - 重定向到 graph.facebook.com/oauth/authorize 后卡住

> ID：10832114
> 
> 赞同：0
> 
> 时间：2012-05-31T10:49:02.687
> 
> 标签：facebook, facebook-graph-api, redirect

我有个问题。在我的网站正常之前，但今天有一个错误：

重定向到之后

[https://graph.facebook.com/oauth/authorize?client_id=<xx>&redirect_uri=http%3A%2F%2Fapps.facebook.com%2Ffaniticsleague%2Fsessions%2Fcreate&scope=publish_stream,email,user_birthday,offline_access](https://graph.facebook.com/oauth/authorize?client_id=%3C%20xx%20%3E&redirect_uri=http://apps.facebook.com/faniticsleague/sessions/create&scope=publish_stream,email,user_birthday,offline_access)

我的网站卡住了。

谁能帮帮我？？？

注意：< xx > -> 是来自 Facebook 的密钥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:20:13.730

'xx' 不应该是密钥，它应该是应用程序 ID，即该应用程序的 126048607473896 - 在该调用中不需要密钥。

此外，`offline_access`不[推荐使用](https://developers.facebook.com/roadmap/offline-access-removal/)，您应该查看当前文档以及您正在使用的任何教程

# c++ - 无法启动抽象类，因为成员是抽象的

> ID：10832117
> 
> 赞同：0
> 
> 时间：2012-05-31T10:49:14.237
> 
> 标签：c++, clone, abstract

我是多态的新手，这是一个与此类似的问题，[但](https://stackoverflow.com/questions/10532366/cannot-instantiate-abstract-class-because-members-are-abstract)解决方案对我没有帮助。确切的错误是：

> Circle.cpp(34)：错误 C2259：“Circle”：由于以下成员，无法实例化抽象类：“void Shape::particle(const Ray &,const int&)”：是抽象的

我试图阅读这个，我认为是 clone() 成员函数，调用 Circle 的复制构造函数将它的状态复制到新创建的 Circle 对象中并尝试初始化“粒子”（它不能这样做）。如果我是对的：我该如何纠正？如果我错了......它在做什么（我做错了什么）以及如何纠正它。

```
class Shape {
public:

virtual void particle(const Ray& ray, const int& count) = 0;      
...
virtual Shape* clone()  const = 0;   
private:
vector<Ray>  incoming_ray; 
vector<int>  counts;
};

class Circle : public Shape {
public:
Circle* clone()  const;   //covariant return type
virtual void
particle(const Ray& ray, const int& count);
 ...
}; 
```

接着

```
Circle* Circle::clone()  const { return new Circle(*this); }

void
Circle::particle(const Ray& rays, const int& count){
incoming_ray.push_back(inc_ray);
counts.push_back(counts);}; 
```

我试过了

```
virtual void particle(const Ray& ray, const int& count) const = 0; 
                                                          ^ 
```

但仍然有同样的错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:51:42.827

```
virtual void particle(const Ray& ray, const int& count) const = 0;
                                                        ^^^^^^ 
```

使它成为一种完全不同的方法。并且不一样：

```
virtual void particle(const Ray& ray, const int& count) = 0; 
```

最终，您所拥有的是派生类中的一个新方法，它是纯虚拟的，它不会覆盖基类的纯虚拟方法。由于没有overidding，它为您的派生类留下了一个它没有实现的继承的纯虚函数，并且它使您的派生类也成为抽象类。

覆盖基类虚拟方法您需要在基类中具有完全相同的方法定义才能覆盖它（尽管允许协*变类型）。*

# firefox-addon - 如何将上下文菜单背景设置为 OS 默认样式而不是透明

> ID：10832121
> 
> 赞同：0
> 
> 时间：2012-05-31T10:49:38.797
> 
> 标签：firefox-addon, contextmenu, xul

在我的 Firefox 扩展中，我有一个分配了上下文菜单的树。上下文菜单显示并且功能正常，但背景是透明的。树的行数据通过上下文菜单显示。如何将其设置为默认的操作系统上下文菜单样式？

我的 XUL`treechildren`标记与分配的菜单

```
<treechildren id="my_children" contextmenu="my_context">

</treechildren> 
```

XUL 上下文菜单

```
<popup id="my_context">
   <menuitem label="Start" oncommand="myApp.start()"/>
</popup> 
```

我注意到 Tamper Data 扩展也有同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:26:18.970

解决方案非常简单。从[标签的](https://developer.mozilla.org/en/XUL/popup)[文档中`<xul:popup>`](https://developer.mozilla.org/en/XUL/popup)：

> popup 元素等同于应该使用的[menupopup元素。](https://developer.mozilla.org/en/XUL/menupopup)

只需替换`<popup>`为`<menupopup>`. 自从我认为是 Firefox 4 以来，该`<popup>`标签已经被弃用和取消样式有一段时间了。您可能从一个非常过时的代码示例中得到它。

# c# - 如何使用带有 C# 的 Asp.net 在 Telerik 树视图中填充 XML

> ID：10832125
> 
> 赞同：1
> 
> 时间：2012-05-31T10:49:57.587
> 
> 标签：c#, xml, asp.net-mvc-3

嗨，我正在使用**带有 MVC3 的 Web 应用程序**。我是这个带有**Telerik 树视图**控件的 MVC3 的新手。谁能告诉我一些使用 MVC 模式将**XML 文件填充到 Telerik 树视图中的示例？**

我的 XML 文件代码是：

```
<Department>
  <Employee>
     <Salary value="20000">
     <Designation value="Developer">
  </Employee>
  <Experience>
     <Grade value="G2">
     <Age value="26">
     <YearsOfExperience value=4>
  </Experience>
  <Reward>
     <Rating value="3">
  </Reward>
</Department> 
```

这是我的 XML 文件内容。这里**Department**是我的**根节点**，**Employee、Experience**和**Reward**是**同一个级别**的节点。Salary、designation、grade、age和rating是以上节点的**子**节点。

现在我想使用 MVC 将此 XML 文件填充到 Telerik 树视图控件中。谁能告诉我Controller，View，CSHTML的过程？

我怎样才能实现这个实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:56:10.903

LoadContentFile 方法要求 XML 采用特定于 RadTreeView 的预定义格式：

```
 <Tree>
   <Node Text="North America" Expanded="True" Value="1">
     <Node>
        <Node>
        </Node>
     </Node>
   </Node>
 </Tree> 
```

# visual-studio-2010 - VS 2010 中的 _set_sbh_threshold

> ID：10832130
> 
> 赞同：0
> 
> 时间：2012-05-31T10:50:24.803
> 
> 标签：visual-studio-2010, visual-studio-2008

我正在尝试移植使用 VS 2008 开发的应用程序。我已将项目导入 VS 2010 并构建它。我有几个与`_set_sbh_threshold`功能有关的错误。在[MSDN](http://msdn.microsoft.com/en-us/library/a6x53890%28v=vs.71%29.aspx)中，我发现 Windows Vista 或 Windows 7 不支持此功能。此外，此功能已从 VS 2010 *malloc.h*文件中删除。那么，VS 2010 中是否有任何等效功能？也许在新的 Windows 中使用这个功能根本没有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:56:53.120

由于 Windows Vista 及更高版本不使用此值来设置 SBH 大小，因此通过该函数设置它没有意义。如果您正在寻找的是一个单一版本的代码，它将在从 95 开始的所有 Windows 版本中按预期运行，那么您很不走运，将不得不维护 2 个单独的版本。

# css - css3 不透明度谷歌网站

> ID：10832132
> 
> 赞同：2
> 
> 时间：2012-05-31T10:50:36.047
> 
> 标签：css, opacity, sites

我尝试在谷歌网站中为我的网站制作一个透明的容器，以便背景图像可见。

我猜 google 网站不支持 css3 的 opacity 属性，那么有没有其他方法可以做到这一点？谢谢我试过

> 过滤器：阿尔法（不透明度=50）；-moz 不透明度：0.50；不透明度：0.50；-khtml-不透明度：0.5；但它不被认可。
> 
> 警告：您的 HTML 包含一些不允许的标签。这些已从您的更改中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:41:09.707

如果允许，您可以通过将半透明的 1px x 1px .p​​ng 图像应用到容器的背景来做到这一点。

```
.yourContainer {
background:transparent url(myTransparentImage.png) repeat;
} 
```

# javascript - 无法存储 Javascript 日期

> ID：10832134
> 
> 赞同：1
> 
> 时间：2012-05-31T10:50:38.023
> 
> 标签：javascript, html

我在使用 javascript 时遇到了一个奇怪的问题：在某个变量中存储新的 Date().getTime() 时，它变为 0。

```
 console.log(new Date().getTime()); // Shows the timestamp
    p.channels[p.chann].startTime = new Date().getTime();
    console.log(p.channels[p.chann].startTime); // Shows 0 
```

变量 p.channels[p.chann].startTime 完全存在（否则无论如何都会显示错误......）

有谁知道这个问题可能来自哪里？哦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:49:05.060

问题是，我的变量是一个音频元素，我可以在其中创建 startTime 值，但它被设置为 0 并且不能设置为其他任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:00:21.500

我创建了一个[JS Fiddle](http://jsfiddle.net/Sohnee/a7KyJ/)来证明它有效。

```
p = {};
p.channels = [];
p.chann = 0;
p.channels[p.chann] = {};

p.channels[p.chann].startTime = new Date().getTime();

document.write(p.channels[p.chann].startTime); 
```

此失败的可能原因是`p.chann`在设置和提取值之间已更改，或者`p.channels[p.chann]`尚未设置为对象（您可以通过注释掉 where 行来测试`p.channels[p.chann] = {};`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:02:01.533

由于此代码有效，唯一的问题可能是`p.channels[p.chann].startTime`在您检索值时是否存在，或者在您的实际代码中您正在读取不同的值（可能`p.chann`同时更改，因为您处于循环中或您创建了一个闭包......很难说）

```
var p = {
    chann    : 0,
    channels : [
       { startTime : 0 }
    ]    
};

p.channels[p.chann].startTime = new Date().getTime();
console.log(p.channels[p.chann].startTime); // Shows the value 
```

# cakephp - 变量数据库设置 Cakephp

> ID：10832136
> 
> 赞同：0
> 
> 时间：2012-05-31T10:51:02.630
> 
> 标签：cakephp

我正在寻找一种在 Cakephp 中创建变量数据库的方法。我正在创建一个网站，其中数据库设置（用户、密码、db）取决于登录的用户。数据库设置来自另一个数据库。提前致谢，

亚伦

- 回答

感谢您的快速回复。我知道如何在数据库之间切换，但数据库设置必须是可变的。例子

```
 $db = $this->DB_SET['DB_SET']['db']; //from model DB_SET the database 
    $db_login= $this->DB_SET['DB_SET']['login'];
    $db_host= $this->DB_SET['DB_SET']['host'];
    $db_pass= $this->DB_SET['DB_SET']['pass'];
    var $db2 = array(
            'driver' => 'mysql',
            'persistent' => false,
            'host' => $db_host,
            'login' => $db_login,
            'password' => $db_pass,
            'database' => $db,
            'prefix' => '',
            'encoding' => 'UTF8',
            'port' => '',
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:10:54.013

如果您希望即时创建数据库连接，您可能需要使用[`ConnectionManager::create()`](http://api20.cakephp.org/class/connection-manager#method-ConnectionManagercreate).

```
// get logged in user's id and create a connection for them
$id = $this->Auth->user('id');
ConnectionManager::create("user_$id_db", array(
  'driver' => 'mysql',
  'persistent' => false,
  'host' => $db_host,
  'login' => $db_login,
  'password' => $db_pass,
  'database' => $db,
  'prefix' => '',
  'encoding' => 'UTF8',
  'port' => '',
)); 
```

然后设置您的模型以在您准备好时使用它。

```
// get logged in user's id and use their connection
$id = $this->Auth->user('id');
$this->Model->setDataSource("user_$id_db"); 
```

# visual-studio-2010 - Visual Basic 2010 中的参数

> ID：10832145
> 
> 赞同：0
> 
> 时间：2012-05-31T10:51:24.710
> 
> 标签：visual-studio-2010, parameters

如何在我的 vb 应用程序中使用参数？

我想这样做，以便当参数为“/ y”时，我想要这样的事情发生

```
if parameter = "/y" then 
    msgbox("you used the parameter /y")
else
    msgbox("you dint use any parameter")
end if 
```

当我使用参数“/ y”时，我希望这样的事情发生，这些参数在用于 ex 时使用：我在 cmd 上运行 .exe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:57:46.880

您可以将 Sub Main() 更改为

```
Sub Main(ByVal cmdArgs() As String) 
```

并以这种方式使用参数数组。这在许多版本的 VB.NET 中都是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:57:40.210

传入的命令行参数将可用于您的应用程序[`Main`的过程。](http://msdn.microsoft.com/en-us/library/ms235406.aspx)

这些以字符串数组的形式出现。

# php - PHP ASP 之类的标签和输出变量的方式

> ID：10832149
> 
> 赞同：0
> 
> 时间：2012-05-31T10:51:34.267
> 
> 标签：php, variables, tags

我想知道是否有任何方法可以在 HTML 中插入 PHP 变量而无需使用`echo`. 在 ASP 中，您可以使用`<%=variable%>`，但在 PHP 中，您必须始终使用`echo`. 在 phpBB 源代码中，我看到它`{VARIABLE}`用于执行此操作，但我不知道他们如何实现它。我确信它与 PHP 配置无关。你知道一些与此相关的参考资料或信息吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:52:29.420

如果您启用了短标签*，您可以使用以下语法输出内容：

```
<?=$variableName?> 
<?="Hello world"?> 
```

*[手册](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)指出 short_open_tags 仅在 php 5.4 之前需要，此语法将始终适用于 5.4+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:53:39.670

`<?= $var ?>`等于`<?php echo $var; ?>`

# sql - 在 SQL 中使用内部联接缺少关键字错误

> ID：10832151
> 
> 赞同：0
> 
> 时间：2012-05-31T10:51:42.733
> 
> 标签：sql, inner-join

我是 SQL 新手，因此在增强 SQL 查询方面遇到了一些问题。

基本上有两个表：一个是ef_dat_app_ef_link，另一个是ef_dat_lspd_machine_type_model

这是我正在谈论的查询。我在第 10 行添加了一个内部连接，这是所有问题的基础。

```
select country_isocode as country,
language_isocode as language, model_number,
machine_type_model_name model_name,machine_type_group_id,
machine_type_model_id, product_type_name product_type,
machine_type_model_id_to,filenet_link 
from ef_dat_lspd_machine_type_model,
cross join ef_dim_lspd_country_language
left join ef_dat_lspd_model_country 
using (machine_type_model_id, country_isocode)
inner join ef_dat_app_ef_link on  (ef_dat_lspd_machine_type_model.lpmd_revenue_pid = ef_dat_app_ef_link.ef_product_revenue_pid)
where (ef_dat_app_ef_link.country_isocode='US' or ef_dat_app_ef_link.country_isocode='CA') and ef_dat_app_ef_link.language_isocode='en'
join ef_dat_lspd_product_type using (product_type_id)
left join ef_dat_lspd_model_relationship on (machine_type_model_id_from = machine_type_model_id) 
where (discontinue_date is null or discontinue_date > sysdate) and
(announce_date is null or announce_date <= sysdate)
and (machine_type_model_id in (select machine_type_model_id from ef_dat_lspd_model_parts)
or not machine_type_model_id_to is null) order by machine_type_model_id 
```

下面是我应该处理的未更改的查询。

```
select  country_isocode as country,
language_isocode as language,

machine_type_model_id,
product_type_name product_type,machine_type_model_id_to,
image_url
from ef_dat_lspd_machine_type_model cross join ef_dim_lspd_country_language 
left join ef_dat_lspd_model_country using (machine_type_model_id, country_isocode) 
join ef_dat_lspd_product_type using (product_type_id) 
left join ef_dat_lspd_model_relationship on (machine_type_model_id_from =    machine_type_model_id)
where (discontinue_date is null or discontinue_date > sysdate) and
(announce_date is null or announce_date <= sysdate) and
(machine_type_model_id in (select machine_type_model_id from ef_dat_lspd_model_parts) or >not machine_type_model_id_to is null)
order by machine_type_model_id 
```

现在在 ef_dat_app_ef_link 表中有一个包含图像、国家代码和语言代码的链接以及一个收入 ID，另一个是 ef_dat_lspd_machine_type_model，其中包含图像链接和更多列。我想要做的是，创建一个查询，它将替换 ef_dat_app_ef_link 表中的拉取图像，其中该表中的收入 ID 等于另一个表中的收入 ID。当按收入 ID 搜索表格时会出现很多列，这就是为什么我想拉出一行语言为“en”，国家为“US”或“CA”的行。

我添加了一个内部连接语句以达到相同的效果，但它始终为缺少的关键字引发 ORA00905 错误。

我已将我所做的更改用斜体表示。抱歉，代码的表现如此糟糕。我无法弄清楚如何让它看起来更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:56:30.033

您在现有查询的中间添加了一个 WHERE 子句。一个查询中不能有多个 WHERE 子句，也不能将它放在表连接的中间。

![图解问题](../Images/bde8d898b24696965f12298eaa941afa.png)

将您添加的 WHERE 子句合并到预先存在的子句中（由快照中的绿色箭头指示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:56:05.727

你不能像那样混合结构，你必须这样做

```
select *
from t
join t1
join t2
where 
and
or
order by 
```

你不能这样做

```
select *
from t
join t2
where
order 
join 
where
order 
```

尝试

```
select country_isocode as country,
language_isocode as language, model_number,
machine_type_model_name model_name,machine_type_group_id,    
machine_type_model_id, product_type_name product_type,
machine_type_model_id_to,filenet_link 
from ef_dat_lspd_machine_type_model
cross join ef_dim_lspd_country_language
left join ef_dat_lspd_model_country 
using (machine_type_model_id, country_isocode)
inner join ef_dat_app_ef_link on  (ef_dat_lspd_machine_type_model.lpmd_revenue_pid = ef_dat_app_ef_link.ef_product_revenue_pid)
join ef_dat_lspd_product_type using (product_type_id)
left join ef_dat_lspd_model_relationship on (machine_type_model_id_from = machine_type_model_id) 
where (ef_dat_app_ef_link.country_isocode='US' or ef_dat_app_ef_link.country_isocode='CA') and ef_dat_app_ef_link.language_isocode='en'
and (discontinue_date is null or discontinue_date > sysdate) and
(announce_date is null or announce_date <= sysdate)
and (machine_type_model_id in (select machine_type_model_id from ef_dat_lspd_model_parts)
or not machine_type_model_id_to is null) order by machine_type_model_id 
```

# iphone - “setTitle”方法不起作用

> ID：10832160
> 
> 赞同：0
> 
> 时间：2012-05-31T10:52:09.137
> 
> 标签：iphone, uibutton

每个人。我正在开发 iphone 应用程序。

我尝试在我的代码中更改按钮的标题。当我单击一个按钮时，标题将更改其他文本。

所以，我使用 setTitle 方法，但应用程序被杀死了。

代码如下。

```
-(IBAction)deleteProject:(id)sender{

    UIButton *button = (UIButton *) sender;
    if (addButton.enabled == YES ){

        addButton.enabled = NO ;

        //Here, the code is stopped.
        [button setTitle:@"Back" forstate:UIControlStateNormal];
        //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

        [mainTableView setEditing:YES animated:YES];
    }

    else{

        addButton.enabled = YES;

        //Here, the code is stopped. V
        [button setTitle:@"Delete" forstate:UIControlStateNormal];
        //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

        [mainTableView setEditing:NO animated:YES];
    }
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:04:07.960

您将参数传递`sender`到您的`deleteProject:`方法中。这个参数是 type `id`，可以是任何东西。

您将其转换为`UIButton`并尝试将其用作`UIButton`.

你得到的例外是`[UIBarButtonItem setTitle:forState:]`

这应该告诉你这`sender`根本不是一个`UIButton`，它是一个`UIBarButtonItem`:)

您可以对此进行测试，但将此代码放在`deleteProject:`方法的开头。

```
if (NO == [sender isKindOfClass:[UIButton class]]) {
    NSLog(@"Oh no, sender isn't a button, it's a %@", [sender class]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:59:59.050

大写字母**S**`setTitle:forState:`

此外，`==`用于比较，`=`用于分配。作业总是`true`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:09:14.223

您拼错了 UIButton 类中的 setTitle:forState 方法。为了您的方便，更正了下面的拼写。

```
 -(IBAction)deleteProject:(id)sender{

    UIButton *button = (UIButton *) sender;
    if (addButton.enabled == YES ) // you could also use if (addButton.enabled)
    {

        addButton.enabled = NO ;

        [button setTitle:@"Back" forState:UIControlStateNormal];

        [mainTableView setEditing:YES animated:YES];
    }

    else // addButton.enabled == NO
    {

        addButton.enabled = YES;

        [button setTitle:@"Delete" forState:UIControlStateNormal];

        [mainTableView setEditing:NO animated:YES];
    }
 } 
```

# facebook - 使用 XID 向粉丝页面评论发布消息

> ID：10832162
> 
> 赞同：0
> 
> 时间：2012-05-31T10:52:13.293
> 
> 标签：facebook, post, web, comments

我目前正在尝试使用 XID 向粉丝页面发布消息。我想知道如何使用 XID 发布消息。

我目前可以使用以下方法使用 xid 检索评论： [https ://graph.facebook.com/316366498417595?access_token=_TOKEN_KEY_](https://graph.facebook.com/316366498417595?access_token=_TOKEN_KEY_)

谁能告诉我如何使用 XID 发布消息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:58:15.263

您可以通过执行类似的调用来发布消息：

`https://graph.facebook.com/316366498417595/feed?message=_MESSAGE_&access_token=_TOKEN_KEY_`

# c# - CompositeCollection 中可变数量的 CollectionContainer

> ID：10832164
> 
> 赞同：0
> 
> 时间：2012-05-31T10:52:21.023
> 
> 标签：c#, .net, wpf

假设我有一个画布，我想在其上显示属于可变数量组的多个 X 和 Y 样本。

我有一个 ViewModel，它有一个 ObservableCollection 组。我可以通过将 itemscontrol 绑定到其中一个类来显示所选组的所有示例。但现在我想展示组合的所有样本。我找到了允许这样做的 CompositeCollection，但我似乎无法找到如何将组集合绑定到 CompositeCollection，以便我可以添加和删除组并自动更新画布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:05:31.077

`CollectionViewSource`支持组的概念，`HierarchicalDataTemplate`支持分层数据的显示。在我看来，您应该能够在两者之间创建一个解决方案

# javascript - 在 Javascript 中获得下一个 12 个月的结果被搞砸了

> ID：10832179
> 
> 赞同：5
> 
> 时间：2012-05-31T10:53:18.060
> 
> 标签：javascript, date

我有以下代码用于生成从今天开始的未来 12 个月（含）的列表：

```
function DateUtilFunctions() {
    var self = this;

    var monthNames = new Array();

    monthNames[0] = "January";
    monthNames[1] = "February";
    monthNames[2] = "March";
    monthNames[3] = "April";
    monthNames[4] = "May";
    monthNames[5] = "June";
    monthNames[6] = "July";
    monthNames[7] = "August";
    monthNames[8] = "September";
    monthNames[9] = "October";
    monthNames[10] = "November";
    monthNames[11] = "December";

    self.getNext12MonthNamesWithYear = function () {
        var months = new Array();
        var today = new Date(Date());

        var loopDate = new Date();
        loopDate.setTime(today.valueOf());

        var todayPlus12Months = new Date(today.setMonth(today.getMonth() + 12));

        while (loopDate.valueOf() < todayPlus12Months.valueOf()) {
            alert(loopDate);
            alert(loopDate.getMonth());
            var month = monthNames[loopDate.getMonth()];

            months.push(month + ' ' + loopDate.getFullYear());
            loopDate.setMonth(loopDate.getMonth() + 1);
        }

        return months;
    };
} 
```

调用的结果`getNext12MonthNamesWithYear()`是：

*   “2012 年 5 月”
*   “2012 年 7 月”
*   “2012 年 8 月”
*   “2012 年 5 月”
*   “2012 年 7 月”
*   “2012 年 8 月”
*   “2012 年 9 月”
*   “2012 年 10 月”
*   “2012 年 11 月”
*   “2012 年 12 月”
*   “2013 年 1 月”
*   “2013年2月”
*   “2013 年 3 月”
*   “2013年4月”
*   “2013 年 5 月”

如您所知，列表的开头有点奇怪，因为缺少“六月”，加上“五月”、“七月”和“八月”出现了两次。

自然地，我在这里做错了；有人可以帮帮我吗？

编辑：

根据 micadelli 的评论，这是我使用的解决方案：

```
function DateUtilFunctions() {
    var self = this;

    var monthNames = new Array();

    monthNames[0] = "January";
    monthNames[1] = "February";
    monthNames[2] = "March";
    monthNames[3] = "April";
    monthNames[4] = "May";
    monthNames[5] = "June";
    monthNames[6] = "July";
    monthNames[7] = "August";
    monthNames[8] = "September";
    monthNames[9] = "October";
    monthNames[10] = "November";
    monthNames[11] = "December";

    self.getNext12MonthNamesWithYear = function () {
        var months = new Array();
        var today = new Date();
        var tmpDate = new Date();
        var tmpYear = tmpDate.getFullYear();
        var tmpMonth = tmpDate.getMonth();
        var monthLiteral;

        for (var i = 0; i < 12; i++) {
            tmpDate.setMonth(tmpMonth + i);
            tmpDate.setFullYear(tmpYear);
            monthLiteral = monthNames[tmpMonth];

            months.push(monthLiteral + ' ' + tmpYear);

            tmpYear = (tmpMonth == 11) ? tmpYear + 1 : tmpYear;
            tmpMonth = (tmpMonth == 11) ? 0 : tmpMonth + 1;
        }

        return months;
    };
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T12:29:12.000

不要试图操纵`Date`对象 - 只需使用它来获取月份和年份的初始值，然后对结果使用简单的算术：

```
function getNext12MonthNamesWithYear() {
    var now = new Date();
    var month = now.getMonth();
    var year = now.getFullYear();

    var names = ['January', 'February', 'March', 'April', 'May', 'June',
                 'July', 'August', 'September', 'October', 'November', 'December'];

    var res = [];
    for (var i = 0; i < 13; ++i) {
        res.push(names[month] + ' ' + year);
        if (++month === 12) {
            month = 0;
            ++year;
        }
    }
    return res;
} 
```

[在http://jsfiddle.net/alnitak/SQQdg/](http://jsfiddle.net/alnitak/SQQdg/)工作演示

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-17T18:29:51.040

这是我使用[Moment.js的解决方案](http://momentjs.com/)

**未来 12 个月**

```
let months = [];
let monthsRequired = 12

for (let i = 1; i <= monthsRequired; i++) {
  months.push( moment().add(i, 'months').format('MMMM YYYY') )
}

console.log(months)
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
```

**以防万一您需要前 12 个月**

```
let months = [];
let monthsRequired = 12

for (let i = monthsRequired; i >= 1; i--) {
  months.push( moment().subtract(i, 'months').format('MMMM YYYY') )
}

console.log(months)
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T11:26:56.057

我看不出这不起作用的任何原因

```
function DateUtilFunctions() {
   var self = this;

   var monthNames = new Array();

   monthNames[0] = "January";
   monthNames[1] = "February";
   monthNames[2] = "March";
   monthNames[3] = "April";
   monthNames[4] = "May";
   monthNames[5] = "June";
   monthNames[6] = "July";
   monthNames[7] = "August";
   monthNames[8] = "September";
   monthNames[9] = "October";
   monthNames[10] = "November";
   monthNames[11] = "December";

   self.getNext12MonthNamesWithYear = function () {
     var months = new Array();
     var today = new Date();
     var tmpDate = new Date();
     var tmpYear = tmpDate.getFullYear();
     var tmpMonth = tmpDate.getMonth();
     var monthLiteral;

     for (var i = 0 ; i < 12 ; i++) {
        tmpDate.setMonth(tmpMonth + i);
        tmpDate.setFullYear(tmpYear);
        monthLiteral = monthNames[tmpMonth];
        months.push(monthLiteral + ' ' + tmpYear);
        tmpMonth = (tmpMonth == 11) ? 0 : tmpMonth+1;
        tmpYear = (tmpMonth == 11) ? tmpYear+1 : tmpYear;
     }

     return months;
   };
} 
```

**JS斌**
[http://jsbin.com/aqezom](http://jsbin.com/aqezom)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T12:08:14.110

这是一个工作版本。如果值大于 12，则不能直接执行 setMonth。此外，某些月份没有 31 日，这会导致意外结果。JS 在这里[提琴 FIDDLE](http://jsfiddle.net/gbsandeep/MKq68/)

```
 var monthNames = new Array();

    monthNames[0] = "January";
    monthNames[1] = "February";
    monthNames[2] = "March";
    monthNames[3] = "April";
    monthNames[4] = "May";
    monthNames[5] = "June";
    monthNames[6] = "July";
    monthNames[7] = "August";
    monthNames[8] = "September";
    monthNames[9] = "October";
    monthNames[10] = "November";
    monthNames[11] = "December";

var today = new Date();
var currentMonth = today.getMonth();
var i;
for (i = 0 ; i < 12 ; i++) {
    var newMonth = currentMonth + i;
    var newYear = newMonth > 11 ? today.getFullYear() + 1: today.getFullYear();
    newMonth = newMonth > 11? (newMonth - 12): newMonth;

    var newDate = new Date(newYear, newMonth, '1');

    console.log(monthNames[newDate.getMonth()] + ' ' + newDate.getFullYear());
}

​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-25T09:47:31.880

我还需要一份过去 12 个月的清单，这就是我所做的：

```
var theMonths = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
var today = new Date();
var aMonth = today.getMonth();
var i;
for (i=0; i<12; i++) {
    document.writeln(theMonths[aMonth] + '<br>'); //here you can do whatever you want...
    aMonth++;
    if (aMonth > 11) {
        aMonth = 0;
    }
} 
```

# php - 使用没有表单的 post 发送数据

> ID：10832184
> 
> 赞同：0
> 
> 时间：2012-05-31T10:53:27.407
> 
> 标签：php, html

我想使用 POST 发送数据，而不创建表单。我知道很多人会建议会议。但这是我的用例。

一个 php 脚本创建一个以时间戳为名称的文件夹。时间戳会传递到所有后续调用的页面，这些页面将存储与该事务、日志等相关的文件。如果我使用会话并且用户打开另一个应用程序实例，会话时间将发生变化并造成很多骚扰。

那么有没有一种方法可以让我在不需要POST表格的情况下打发时间。

谢谢拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:17:51.350

通过 jquery 发送时间戳：

```
$(document).ready(function() {
   $.post("index.php",{"timestamp":new Date().getTime()});
}); 
```

在 PHP 中：

```
if (isset($_POST["timestamp"])) { $timestamp = $_POST["timestamp"]; } 
```

# java - 使用多个参数连接两个表的条 件

> ID：10832186
> 
> 赞同：0
> 
> 时间：2012-05-31T10:53:30.927
> 
> 标签：java, database, hibernate, join, criteria

我有两个相关的表：

```
+-----------+           +----------+
|   First   |  *     1  |  Second  |
+-----------+ --------- +----------+
| fk_Second |           | id       |
| version   |           | ...      |
| ...       |           | y        |
| x         |           +----------+
+-----------+ 
```

Hibernate 有一个`ManyToOne`定义 from`First`到`Second`。这`{fk_Second, version}`是表中`composite-id`的一个`First`（尽管我认为在这种情况下它不相关）。

我正在尝试编写 Criteria 调用，它在 SQL 中看起来像：

```
SELECT * FROM First WHERE 
   First.fk_Second = Second.id AND 
   First.x = Second.y 
```

我在生成最后一位时遇到了麻烦 - 额外的连接条件。

```
Criteria c = session.createCriteria(First.class);
   .createCriteria("second", "join_between_first_and_second")
   .add(Restrictions.eqProperty("y", "x")   // <- fails: "x" is not found 
```

在这种情况下我不能使用 HQL 查询。有什么不同的写法吗？这可以写成避免 subquery/`DetachedCriteria`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:04:41.220

```
Criteria c = session.createCriteria(First.class, "first");
c.createAlias("first.second", "theSecond");
c.add(Restrictions.eqProperty("first.x", "theSecond.y"); 
```

如果您没有为属性添加别名，则该属性被视为条件根实体的一部分（在本例中为 First）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:03:58.957

尝试 HQL **'With'**子句..

```
SELECT f.* FROM First f left join Second s ON f.fk_Second = s.id with f.x = s.y; 
```

# jquery - 在函数中调用 ajax 函数 (jQuery)

> ID：10832191
> 
> 赞同：0
> 
> 时间：2012-05-31T10:53:51.673
> 
> 标签：jquery, ajax, asynchronous

```
 function getCChatStatus() {
    jQuery.ajax({
        type: "POST",
        url: "index.php?page=CChatAction",
        data: { action: "getStatus" }
    }).done(function(msg) {
        var cChatStatus = jQuery.parseJSON(msg);
        return cChatStatus;
    });
}

function CChatOptions() {
    var test = getCChatStatus();
    alert(test);
} 
```

正在返回“测试未定义”。如何解决这个问题？我已经尝试过异步：假。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:00:44.647

ajax 函数是异步的，在您调用警报时尚未返回。

```
function getCChatStatus(callback) {
    jQuery.ajax({
        type: "POST",
        url: "index.php?page=CChatAction",
        data: { action: "getStatus" }
    }).done(function(msg) {
        var cChatStatus = jQuery.parseJSON(msg);
        callback.call(cChatStatus);
    });
}

function CChatOptions() {
    getCChatStatus(function(test) {
        alert(test);
    });
} 
```

你也可以这样做：

```
function getCChatStatus() {
    var CChat = jQuery.ajax({
        type: "POST",
        url: "index.php?page=CChatAction",
        data: { action: "getStatus" }
    });
    return CChat;
}

function CChatOptions() {
    var cChatStatus = getCChatStatus();
    cChatStatus.done(function(msg) {
        alert(jQuery.parseJSON(msg));
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:00:28.923

如果您使用 jQuery.ajax 之类的异步函数，则必须使用回调函数来评估结果。

因此，您的 getter 必须是异步的：

```
function getCChatStatus(callback){
  jQuery.ajax({/*...*/})
  .done(function(){
     callback(jQuery.parseJSON(msg))
  })
} 
```

你的测试必须看起来像：

```
function CChatOptions() {
  getCChatStatus(function(status){
    alert(status)
  })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:59:12.833

你的`getCChatStatus()`函数没有返回任何东西。即使使用`async: false`，您的函数也需要返回`$.ajax()`调用的返回值。考虑返回从异步调用中获得的实际可观察​​对象`$.ajax()`并使用它，而不是运行同步 AJAX 请求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-31T11:04:21.127

**试试这个应该工作！**

```
 function getCChatStatus() {
        $.ajax({
            type: "POST",
            url: "index.php?page=CChatAction",
           success:function(msg){
            var cChatStatus = jQuery.parseJSON(msg);
            alert(cChatStatus); //if this alert works then that test will work..
            return cChatStatus;
        });
    }

    function CChatOptions() {
        var test = getCChatStatus();
        alert(test);
    } 
```

# css - 使用嵌套 div 的页脚

> ID：10832193
> 
> 赞同：0
> 
> 时间：2012-05-31T10:54:00.767
> 
> 标签：css, html

我正在尝试向我的网站添加页脚，但文本一直在移动。

```
<div id="footer">
  <div id="footerchild">
    <a href=".html">1</a>
  </div>
  <div id="footerchildone">
    <a href=".html">2</a>
  </div>
  <div id="footerchildtwo">
    <a href=".html">3</a>
  </div>
  <div id="footerchildthree">
    <a href=".html">4</a>
  </div>
</div> 
```

和CSS

```
#footer {
  margin-left: 100px;
  background: #812;
  box-shadow: 1px 2px 40px 1px #444;
  border: 1px solid black;
  width: 1040px;
  height: 300px;
  position: absolute;
}

#footerchildone {
  float: right;
  margin-right: 500px;
  margin-top: -22px;
}

#footerchildtwo {
  float: right;
  margin-right: 350px;
  margin-top: -22px;
}

#footerchildthree {
  float:right;
  margin-top: -22px;
  margin-right: -250px;
} 
```

我希望每列都以特定距离为中心，但是当我移动例如 childthree 时，第二个孩子随之而来。它不应该是这样的，因为我给了他们每个人一个单独的 div。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:07:11.807

我想你正在努力做到这一点：

[http://jsfiddle.net/65GaS/5/](http://jsfiddle.net/65GaS/5/)

就这么简单，不然我误会你了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:20:37.007

[http://jsfiddle.net/vvjAJ/](http://jsfiddle.net/vvjAJ/)

HTML

```
<div id="footer">
<div id="footerchild"><a href=".html">1</a></div>
<div id="footerchildone"><a href=".html">2</a></div>
<div id="footerchildtwo"><a href=".html">3</a></div>
<div id="footerchildthree"><a href=".html">4</a></div>
</div> 
```

HTML

```
#footer
{margin-left: 100px;background: #812;box-shadow: 1px 2px 40px 1px #444;border: 1px solid black;width: 1040px;height: 300px;position: absolute;}
#footerchild{float:left;width:260px;margin-top: 50px;text-align:center;}
#footerchildone{float: left;width:260px;text-align:center;margin-top: 50px}
#footerchildtwo{float: left;width:260px;text-align:center;margin-top: 50px}
#footerchildthree{float:left; margin-top: 50px;text-align:center;width:260px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:49:51.813

您需要添加 text-align:center 以使父 div 的文本居中并使每个子 div 为 position:relative; 显示：内联块；它会自动对齐父 div 的中心，并确保删除子 div 的 float:right。希望这对你有用。

# google-chrome-extension - 在本地存储 chrome 扩展中插入来自文件流的数据

> ID：10832194
> 
> 赞同：0
> 
> 时间：2012-05-31T10:54:02.440
> 
> 标签：google-chrome-extension, local-storage

我已经在本地存储中创建了表，并且也成功地在本地存储中插入了单行，但是当我使用流式文本文件将其逐行插入本地存储时，不会插入数据。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:35:31.770

在没有实际代码的情况下，我能给出的唯一建议是在存储之前对文件文本进行 base64 编码：

```
localStorage.setItem( btoa( myfiletext ) ); 
```

`atob`再次获取时不要忘记对其进行解码。

# java - Java 启动、停止和恢复线程

> ID：10832199
> 
> 赞同：1
> 
> 时间：2012-05-31T10:54:23.587
> 
> 标签：java, multithreading, mp3

我正在使用 javazoom 中的库在 java 中制作 mp3Player。我已经设法启动和停止 mp3，但我无法恢复它。有谁知道如何做到这一点？

这是 MP3Player 类：

```
public class MP3Player extends JFrame{

public MP3Player(){
    JPanel jpBottom = new JPanel();
    JButton btnPlay = new JButton("Play");
    JButton btnPause = new JButton("Pause");

    jpBottom.add(btnPause);
    jpBottom.add(btnPlay);

    Container cp = this.getContentPane();
    BorderLayout bl = new BorderLayout();
    cp.setLayout(bl);
    cp.add(jpBottom, BorderLayout.SOUTH);

    btnPlay.addActionListener(
            new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    if(t.isInterrupted()){
                        t.resume();
                    } else{
                        t.start();
                    }
                }
            }
    );

    btnPause.addActionListener(
            new ActionListener() {
                public void actionPerformed(ActionEvent e){
                   t.interrupt();
                }
            }
    );

    this.setVisible(true);
    this.setSize(250, 100);
    this.setTitle("MP3 Player");
    this.setLocation(100, 100);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

Thread t = new Thread(new PlayerThread("file:///C://a.mp3"));

public static void main(String[] args) {
    MP3Player n = new MP3Player();
}
} 
```

PlayerThread 类：

```
public class PlayerThread implements Runnable{

    String path;
    PlayerThread(String path){
        this.path = path;
    }

    public void run(){
        try{
            URL url = new URL(path);
            InputStream in = url.openStream();
            AdvancedPlayer pl = new AdvancedPlayer(in);
            pl.play();
        }
        catch(Exception e){
            System.out.println("Error: "+e);
        }
    }

    public void pause(){
        Thread.interrupted();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:11:09.477

看起来你做了很多假设事情会“正常工作”，而不是阅读你正在使用的库的 API。

首先，中断线程只是在该线程上设置一个标志。按照惯例，阻塞调用通常会定期检查这个标志，并通过抛出一个`InterruptedException`if 来提前终止。但这不是自动保证，调用者不能强行中断另一个线程。您需要确保中断会按照您的预期进行。

您的`pause()`方法是双重错误的，因为您甚至没有设置中断标志；`Thread.interrupted()` *检查*当前线程是否被中断（返回一个布尔值）。

让我们回到基础 - 你通过调用来播放声音`AdvancedPlayer.play()`。如何让 AdvancedPlayer 暂停？查看它的[文档](http://www.javazoom.net/javalayer/docs/docs1.0/javazoom/jl/player/advanced/AdvancedPlayer.html)，它似乎不支持以任何明显的方式暂停。（有一种`stop()`方法，但我不相信它会从同一个地方恢复）。而且由于该方法不抛出`InterruptedException`，几乎可以保证它*不响应中断*。

但是，有一个`BasicPlayer`类确实有暂停。有什么理由不能使用它，例如（忽略异常）：

```
public class PlayerThread implements Runnable{
    final BasicPlayer player;

    PlayerThread(String path){
        player = new BasicPlayer(new URL(path).openStream());
    }

    public void run(){
        player.player();
    }

    public void pause() {
        player.pause();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:03:49.477

首先，fhe`Thread.interrupted()`测试线程是否被中断。它不会打断它。

其次，中断`AdvancedPlayer`实例的效果不是由 javadocs 定义的。

第三，*看起来*你应该通过调用来停止播放器的方式`stop()`，但没有指定的暂停方式。

* * *

> 是用 Thread.stop() 完成的吗？

`Thread.stop()`停止 Java 线程，但这并不意味着播放器将停止播放。这取决于播放器库代码的实现方式。

此外，`Thread.stop()`它是一个已弃用的 API，如果使用它可能会导致各种问题。

* * *

FWIW，javazoom API 对我来说看起来有点乱，而且这些库似乎已经有 10 年没有被触及了。您是否考虑过寻找更新且设计更好的产品？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:11:18.643

首先，您应该停止使用 Thread.suspend 和 Thread.resume，因为它们已被弃用且容易出现死锁。相反，您应该在 PlayerThread 中有某种标志，例如说 isPaused 在单击 playBtn 时将其设置为 true 或 false，基于标志应该使用 playthread 播放或暂停音乐。另外请注意，一旦线程死亡，您可以再次启动它，所以我认为在 playBtns actionPerformed 中启动线程似乎不是一个好主意（虽然我不知道你的整个设计）

# javascript - 为什么Javascript会抛出这个错误

> ID：10832205
> 
> 赞同：0
> 
> 时间：2012-05-31T10:54:38.187
> 
> 标签：javascript, jsp

我有以下javascript，我想将str的值分配给表单“form”中的隐藏字段“abc”。它在警报框中产生 str 的值，但是当我尝试使用“document.forms[form].abc.value=str;”将该值分配给 abc 时 然后抛出以下错误...

```
Message: 'document.forms.form.abc' is null or not an object
Line: 140
Char: 5
Code: 0 
```

变量 image_url 包含一个动态生成的 url，例如`http://localhist/local/..../1234.jpg`

我该如何摆脱这个...

```
<script language="JavaScript">
        function imgurl()
        {
            var str=image_url;
            alert("Image Stored @"+str);

            document.forms["form"].abc.value=str;
            //document.getElementById('url').innerHTML=str;

        }
    </script>

 <form name="form">
    <input type="button" value="URL" onclick="javascript:imgurl();">
                            </td><br>
            <td valign=top>
                <div id="upload_results" style="border:2px black"></div><br/>
                <input type="hidden" name="abc" value="">
                <br/><p id="url"/>
            </td>
            </tr>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:57:51.310

使用标识。

```
<input type="hidden" id="abc" name="abc" value=""> 
```

JavaScript：

```
function imgurl() {
    document.getElementById("abc").value = img_url;
} 
```

# image - javafx 2.1 编辑 Image 后无法更新 ImageView

> ID：10832207
> 
> 赞同：0
> 
> 时间：2012-05-31T10:54:41.810
> 
> 标签：image, imageview, javafx-2

我创建了一个 ImaveView 并影响了一个 Image 对象。图像显示正确。我还创建了一个按钮来打开一个新阶段（其中显示图像）和一些滑动条来进行图像处理。那么现在在进行一些编辑之后，如何使用新图像更新我的 ImageView ？

这是我所做的：

```
//Boutton Traitement d'image
Button btnImageProcess = new Button("Traitement d'Image");
btnImageProcess.setOnAction(new EventHandler<ActionEvent>() {

    public void handle(ActionEvent event) {
        ImageProcess imageProcess = new ImageProcess();
        imageImageProcess = new Image(ImagePathImageProcess);
        imageViewImageProcess = ImageViewBuilder.create().image(imageImageProcess).build();
        ColorAdjust colorAdjust = ColorAdjustBuilder.create().build();
        imageViewImageProcess.setEffect(colorAdjust);
        // 
        Label saturationLabel = LabelBuilder.create().text("Saturation").build();
        GridPane.setConstraints(saturationLabel, 0, 0);
        Slider saturationSlider = SliderBuilder.create().value(50).build();
        colorAdjust.saturationProperty().bind(saturationSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(saturationSlider, 1, 0);
        GridPane.setHgrow(saturationSlider, Priority.ALWAYS);
        Label saturationValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        saturationValueLabel.textProperty().bind(colorAdjust.saturationProperty().multiply(100).
                asString("%.2f%%"));
        GridPane.setConstraints(saturationValueLabel, 2, 0);
        // 
        Label hueLabel = LabelBuilder.create().text("Hue").build();
        GridPane.setConstraints(hueLabel, 0, 1);
        Slider hueSlider = SliderBuilder.create().value(50).build();
        colorAdjust.hueProperty().bind(hueSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(hueSlider, 1, 1);
        GridPane.setHgrow(hueSlider, Priority.ALWAYS);
        Label hueValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        hueValueLabel.textProperty().bind(colorAdjust.hueProperty().multiply(100).asString("%.2f%%"));
        GridPane.setConstraints(hueValueLabel, 2, 1);
        // 
        Label brightnessLabel = LabelBuilder.create().text("Brightness").build();
        GridPane.setConstraints(brightnessLabel, 0, 2);
        Slider brightnessSlider = SliderBuilder.create().value(50).build();
        colorAdjust.brightnessProperty().bind(brightnessSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(brightnessSlider, 1, 2);
        GridPane.setHgrow(brightnessSlider, Priority.ALWAYS);
        Label brightnessValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        brightnessValueLabel.textProperty().bind(colorAdjust.brightnessProperty().multiply(100).
                asString("%.2f%%"));
        GridPane.setConstraints(brightnessValueLabel, 2, 2);
        // 
        Label contrastLabel = LabelBuilder.create().text("Contrast").build();
        GridPane.setConstraints(contrastLabel, 0, 3);
        Slider contrastSlider = SliderBuilder.create().value(50).build();
        colorAdjust.contrastProperty().bind(contrastSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(contrastSlider, 1, 3);
        GridPane.setHgrow(contrastSlider, Priority.ALWAYS);
        Label contrastValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        contrastValueLabel.textProperty().bind(colorAdjust.contrastProperty().multiply(100).asString("%.2f%%"));
        GridPane.setConstraints(contrastValueLabel, 2, 3);

        //Validate Button
        Button btnValider = new Button("Valider");
        btnValider.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent event) {

                imageProcessStage.hide();
                ImageView imageView2 = new ImageView(imageViewImageProcess.getImage());
                imageView.setImage(imageViewImageProcess.getImage());

            }
        });

        GridPane.setConstraints(btnValider, 1, 4);
        GridPane.setHgrow(btnValider, Priority.ALWAYS);
        btnValider.setTranslateX(imageImageProcess.getWidth() / 12);
        btnValider.setTranslateY(7);

        //Validate Button
        Button btnReset = new Button("Reset");
        btnReset.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent event) {
                ImageProcess ip = new ImageProcess();
                ip.setImagePath(ImagePathImageProcess);
                ip.start();
                imageProcessStage.close();
            }
        });
        GridPane.setConstraints(btnReset, 1, 4);
        GridPane.setHgrow(btnReset, Priority.ALWAYS);
        btnReset.setTranslateX(imageImageProcess.getWidth() / 12 + 82);
        btnReset.setTranslateY(7);

        //
        GridPane sliderGrid = GridPaneBuilder.create().children(saturationLabel, saturationSlider, saturationValueLabel,
                hueLabel, hueSlider, hueValueLabel,
                brightnessLabel, brightnessSlider, brightnessValueLabel,
                contrastLabel, contrastSlider, contrastValueLabel, btnValider, btnReset).build();

        imageViewImageProcess.setFitWidth(imageImageProcess.getWidth() / 3);
        imageViewImageProcess.setTranslateY(20);
        //imageView.setFitHeight(image.getHeight()/2);
        imageViewImageProcess.setPreserveRatio(true);
        imageViewImageProcess.setSmooth(true);
        imageViewImageProcess.setCache(true);

        rootImageProcess = BorderPaneBuilder.create().center(imageViewImageProcess).top(sliderGrid).
                build();

        imageProcessStage.setTitle("Traitement d'image");
        sceneImageProcess = new Scene(rootImageProcess);
        sceneImageProcess.getStylesheets().add(ImageProcess.class.getResource("ImageProcess.css").
                toExternalForm());
        imageProcessStage.setScene(sceneImageProcess);
        imageProcessStage.show();

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:19:41.333

你有...

```
ImageView imageView2 = new ImageView(imageViewImageProcess.getImage());
imageView.setImage(imageViewImageProcess.getImage()); 
```

这看起来没什么用

# ubuntu - 打开 HDFS 文件夹

> ID：10832211
> 
> 赞同：1
> 
> 时间：2012-05-31T10:54:58.163
> 
> 标签：ubuntu, hadoop

美好的一天我对 Hadoop 中的以下命令有一些疑问（因为我是 Linux/Ubuntu 的新手）：

```
 bin/hadoop dfs -copyFromLocal /tmp/folder /user/hduser/folder 
```

这会将文件从本地文件系统复制到 HDFS；是否可以从 Ubuntu 的 GUI 访问 HDFS？不在shell中使用“-ls”？就像在，我想打开 HDFS 文件所在的文件夹......这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:06:08.763

您有一些在本地操作系统中“挂载”HDFS 的选项，请参阅：

*   [http://wiki.apache.org/hadoop/MountableHDFS](http://wiki.apache.org/hadoop/MountableHDFS)

# php - php文本记录中的空行

> ID：10832212
> 
> 赞同：0
> 
> 时间：2012-05-31T10:55:00.653
> 
> 标签：php

我对数据库中的记录有一点问题。

我正在使用 php 来检索数据，当我记录我的记录（描述）时，我想要：如果有一些文本在我的文本行之间有一些空格，我想打印空行。

我的记录示例：一些文本

其他文字

我想打印我的记录文本之间的空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:57:39.813

您的问题不完整，请下次提供一些代码。

但我认为您搜索的[nl2br](http://php.net/manual/en/function.nl2br.php)函数将 \n 替换为
HTML 标记。

```
echo nl2br($row['description']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:07:39.583

您可以使用

```
<?php
 echo "Some text";
?>
 &nbsp;<?php echo "Other Text";
?> 
```

# c# - .mdf 文件不响应 SqlCommand.ExecuteNonQuery

> ID：10832215
> 
> 赞同：0
> 
> 时间：2012-05-31T10:55:09.687
> 
> 标签：c#, sql-server-2005, linq-to-sql

我的本地数据库有一个奇怪的问题。我将它添加为一个`.mdf`文件，并在其中创建了 2 个表。

我测试了连接，消息框指出连接工作正常。

当我尝试从我的 C# 应用程序将数据插入该数据库时，就会出现问题。我尝试了两种不同的方法：

1.  通过使用`SqlCommand.ExecuteNonQuery("INSERT INTO ....")`
2.  通过使用`.dbml`文件 (Linq-to-SQL) 数据上下文

当我尝试插入数据时，没有抛出错误，但也没有数据插入到数据库中。可能是什么问题呢？

我在 VS 2010 和 SQL Server 2005 中使用 C# 来制作我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:11:13.493

MDF 文件的大多数感知问题往往归结为以下之一：

*   我实际上打开了什么文件？
*   每次运行应用程序时，我的构建/运行过程实际上是否会复制该文件？
*   我是否有吞噬异常的无偿错误处理？

检查您的连接字符串，并查看执行文件夹（而不是项目文件夹），直到您**非常**确定正在打开哪个文件。它应该在您工作后更新（确保您正确处理连接等）。

另外：尝试在插入后立即在新的数据上下文中获取数据，所以看看它是否进入。

# database - 如何查找冲突日期的计数

> ID：10832217
> 
> 赞同：0
> 
> 时间：2012-05-31T10:55:18.287
> 
> 标签：database, sqlite, count, conflict

当他在下表中已经存在的开始日期和结束日期之间输入开始和结束日期时，我想限制用户。

例如：用户尝试插入日期开始日期 2/6/2012 和结束日期 4/6/2012；此日期介于下表中的事件 e2 之间，因此不允许用户插入它。

```
 ------------------------------------------------------------------------
 id               event               startdate    enddate
 ------------------------------------------------------------------------
 11                e1                 31/5/2012    1/6/2012
 12                e2                 1/6/2012     4/6/2012
 13                e3                 5/6/2012     6/6/2012
 14                e4                 15/6/2012    16/6/2012 
```

我想计算那些与其他事件冲突的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:24:47.850

```
select tbl.startdate, count(tbl.startdate)
from YourTable tbl
where 
exists(select * from YourTable tbl2 where ((tbl2.startdate>=tbl.startdate AND tbl2.startdate<=tbl.enddate) OR (tbl2.enddate>=tbl.startdate AND tbl2.enddate<=tbl.enddate)))
group by tbl.startdate 
```

# java - Intellij Idea 或 Eclipse 中的私有最终合成映射生成宏

> ID：10832219
> 
> 赞同：3
> 
> 时间：2012-05-31T10:55:21.920
> 
> 标签：java, eclipse, ide, refactoring, intellij-idea

*我发现我需要经常支持组合而不是继承，因此我需要生成的许多代码行都是由 the`private final Contract implementation`和`Contract`接口方法之间的映射组成的。*

### （可预测的）映射示例

```
public abstract class Sloth<T> extends BaseAnimal implements Valuator<T> {

    private final Valuator<T> valuator = new GenericValuator<T>();

    @Override
    public void setValue(T value) {
        valuator.setValue(value);
    }

    @Override
    public void clearValue() {
        valuator.clearValue();
    }

    @Override
    public T getDefault() {
        return valuator.getDefault();
    }

    @Override
    public T getValue() {
        return valuator.getValue();
    }

    @Override
    public void addStorageBidListeners(OnStorageBid<T>... onStorageBid) {
        valuator.addStorageBidListeners(onStorageBid);
    }

} 
```

* * *

有没有办法**自动生成**这个映射：

*   原则上只提供接口和实现就足够了？
*   目前我正在手动写出所有`valuator.`映射，我希望有这样一种自动重构的捷径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:20:22.133

您可以使用`Alt + Ins`然后选择`Delegate methods..`

在第一步中，您应该选择您的财产。在您的示例中，它是评估器。在下一步中选择方法。

# javascript - 如何将返回值与文本结合起来

> ID：10832232
> 
> 赞同：0
> 
> 时间：2012-05-31T10:56:16.837
> 
> 标签：javascript

我想将 ukaccess 函数的返回值结合到 setarea 函数设置的值中，但我没有足够的经验知道下一步该做什么。希望代码到目前为止是正确的。

```
function ukaccess(){

    var dbasedata = document.forms[0]._dbase_name.value;
        dbasedata = dbasedata.toUpperCase();

    if  (dbasedata.indexOf("UK_CONTACTS")>-1) {
        return "UK_CONTACTS";
    }
    }

function setarea(){

    var postcode2 = document.forms[0]._postalcode.value;
    var trim_pcode = (postcode2.substr(0,8));
        trim_pcode = trim_pcode.toUpperCase();
        trim_pcode = trim_pcode.replace(/\s/g, "");

    if (trim_pcode == "W1W6UW" || trim_pcode == "W1G8HU") {
        //alert("London-Xover");
        document.forms[0]._area.value = "North London" [ukaccess function return value here]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:58:01.957

尝试

```
document.forms[0]._area.value = "North London" + ukaccess(); 
```

# iphone - 如何在 iOS 中最有效、最高效地存储数据，尤其是存储便笺实例

> ID：10832235
> 
> 赞同：1
> 
> 时间：2012-05-31T10:56:29.203
> 
> 标签：iphone, objective-c, ios

我正在开发一个阅读文本内容的应用程序。在那个阅读器中，我需要像 iBooks 一样的便笺功能。我想将这些笔记保存在我的设备中。如何保存输入的文本内容？以及如何再次重新打开输入的文本（即）在哪里/如何存储输入的文本？

```
UIMenuItem *item = [[[UIMenuItem alloc] initWithTitle: @"Wikipedia" action: @selector(wiki:)] autorelease];
UIMenuItem *item1 = [[[UIMenuItem alloc] initWithTitle: @"Dictionary" action: @selector(dict:)] autorelease];
UIMenuItem *item2 = [[[UIMenuItem alloc] initWithTitle: @"Highlight" action: @selector(highlighting:)] autorelease];
UIMenuItem *item3 = [[[UIMenuItem alloc] initWithTitle: @"Notes" action: @selector(noteMaking:)] autorelease];

[menuController setTargetRect:CGRectMake(100, 100, 320, 100) inView:self.view];
[menuController setMenuVisible:YES animated:YES];
[menuController setMenuItems: [NSArray arrayWithObjects: item,item1,item2,item3,nil]];

-(void) noteMaking:(id) sender
{
    notes = [[UITextView alloc] initWithFrame:CGRectMake(100, 100, 620, 520)];
    notes.text = @"";
    notes.scrollEnabled = YES;

    [self.view addSubview:notes];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:28:06.653

有几种方法可以在 iOS 上存储数据。这完全取决于它是哪种类型的数据以及您愿意存储多少数据。最好和可靠的选择是将数据存储在 CoreData 中。这基本上是**ORM（对象关系映射）**。

# 核心数据：

![在此处输入图像描述](../Images/7351affda400f67145b24af409f9cfca.png)CoreData 是最好、最可靠的数据管理框架。专门用于非常大量的数据。出于您的目的，我建议您使用书籍、页面和注释表创建数据库。CoreData 将从它创建实体类，稍后您可以轻松地持久化数据。

## 数据库：

![在此处输入图像描述](../Images/835e3486fd5d5db7a84a8bd9f8dec06b.png)

您可以根据需要更改属性。但是，您不必严格使用 Coredata。另一个不可靠的选择是使用。`.plist`files 这基本上是一个 XML 文件。

# .plist

![在此处输入图像描述](../Images/ab1fb5babc387e68f643504b26515df4.png).plit 文件可以存储在您的 Document 目录中，并且可以随时检索和保存。当您阅读它时，它将被解析，您将获得易于遍历的 NSDictionary 对象。虽然这对您来说不是一个很好的选择，因为您将处理大量数据并且 CRD 操作将非常昂贵。

# 结论 ：

通读这些链接，这些链接非常详细地了解您应该使用什么来在 iOD 中持久化数据。也给出了例子。

*   [苹果CoreData例子及理解](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Articles/01_StartingOut.html)

# 第三方教程

*   [Tutplus 有史以来最棒的资源](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk_store-data/)

# javascript - keyup(function()) ajax 请求延迟 - jQuery

> ID：10832237
> 
> 赞同：2
> 
> 时间：2012-05-31T10:56:34.243
> 
> 标签：javascript, ajax, jquery

我有一个 jQuery Ajax 请求，我想用文本输入调用它，所以我将它嵌套在`keyup(function()`. 这工作正常。

```
$("#text_box").keyup(function() {
 //AJAX REQUEST
}); 
```

但这有时会出现问题。当我非常快速地输入一些文本时，我得到的输入词的结果省略了原始输入词的一些最后一个字母（可能是浏览器的一些问题）。我希望在一秒钟内没有输入活动时发送 ajax 请求，我的意思是，如果我输入文本非常快并休息一秒钟（意味着我进行了输入）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:01:43.560

听起来好像您从以前的 ajax 调用中获得了结果。使用带有`setTimeout`和的计时器`clearTimeout`。

```
var timer = null;

$("#text_box").keyup(function() {
  if(timer) {
    clearTimeout(timer);
  }

  timer = setTimeout(someFunction, someDelay);
}); 
```

哪里`someFunction`是执行 ajax 调用的函数，并且`someDelay`是在用户键入之后，在执行调用之前要等待的延迟，以毫秒为单位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:04:14.427

由于您已经在使用 jQuery，您可以使用 Ben Aleman 的[debounce](http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/)插件。

页面示例

```
// Bind the not-at-all debounced handler to the keyup event.
  $('input.text').keyup( text_1 );

  // Bind the debounced handler to the keyup event.
  $('input.text').keyup( $.debounce( 250, text_2 ) ); // This is the line you want! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T07:16:23.447

我的天啊。对于将在 2014 年进行搜索的人...

```
function sendAjax() {
    setTimeout(
        function() {
            $.ajax({
                url: "url.php",
                type: "POST",
                data: data,
                success: function(data) {
                    $("#result").html(data);
                }
            });
        }, 2000);
}

<input onkeyup="function()"> 
```

# asp.net-mvc-3 - 如何在asp.net mvc3中添加一组单选按钮

> ID：10832241
> 
> 赞同：4
> 
> 时间：2012-05-31T10:56:42.063
> 
> 标签：asp.net-mvc-3

我有类似调查的内容，并希望用户从对某个问题的一组答案中选择一个选项。这是我正在谈论的一个例子。

[单选按钮](https://lh3.googleusercontent.com/-zCPU8bmXjQ0/T8dNzJP31MI/AAAAAAAAAE0/3CUjjaWdn_0/s663/Example.PNG)[1]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T11:03:16.987

如果您在代码中使用 html 助手，这应该会对您有所帮助：

```
 @Html.RadioButton("rbGrp", "1", true )<label>Option 1</label>
 @Html.RadioButton("rbGrp", "2", false )<label>Option 2</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T08:03:43.583

您可以在输入类型单选中设置组名

```
 <input type="radio" name='group1' value="Milk"> Milk 

    <input type="radio" name='group1' value="Butter"> Butter 
```

# php - 加快 pdf 的感知下载/生成速度

> ID：10832249
> 
> 赞同：1
> 
> 时间：2012-05-31T10:57:27.770
> 
> 标签：php, pdf, pdf-generation, download

我正在动态生成 PDF，这需要几秒钟，我想做的是让浏览器在生成 pdf 之前开始下载，这样用户就不会坐在那里想知道它是否正在工作。

我的想法是刷新标题然后生成并输出pdf，但是如果没有要刷新的东西我就无法刷新。
开头的空格也会影响/使pdf文件无效。即“%PDF-1.4”而不是“%PDF-1.4”

它的 PHP5.2 使用 Zend pdf 生成器。

**更新**

据我所知，它不会影响 pdf 的可读性，但对 IE 也没有任何影响。

所以最好的解决方案是做一个下载站点样式的保存页面，它只是元刷新或 js 重定向到实际的 pdf 生成脚本。

或者也许[这个不错的小技巧](https://stackoverflow.com/a/4168965/428)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:00:42.483

下载空数据然后下载真实文件没有有意义的方法，那就是尽早开始下载。

我建议显示一些动画，说明 PDF 文件正在准备中，并且下载将立即开始。这样，用户就知道发生了什么事（而动画让他不会认为浏览器死机/崩溃了），您可以按照通常的方式传输文件。

# c++ - 删除目录的功能仅在调试完成后将其删除 C++

> ID：10832251
> 
> 赞同：1
> 
> 时间：2012-05-31T10:57:31.567
> 
> 标签：c++, debugging, directory

我在 C++ 中有这个代码来删除其中包含文件的目录：

```
void*  hFind = INVALID_HANDLE_VALUE;
        WIN32_FIND_DATA ffd;

        hFind = FindFirstFile((fullpath+"\\" + _docname + "\\"+"*").c_str(), &ffd);

        do //delete all the files in the directory
        {
            // check if it is a file
            if (!(ffd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY))
            {
                string s = (fullpath+_docname+"\\").append(ffd.cFileName);
                remove(s.c_str());
            }
        }
        while (FindNextFile(hFind, &ffd) != 0);
        removeDirectory(fullpath+"\\" + _docname);      
        FindClose(hFind); 
```

问题是 - 实际上只有在我关闭调试器后才会删除该目录。调试时，该目录无法访问，但仍然存在，这让我很烦恼。您知道如何修复它以完全删除文件夹吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:05:48.840

交换最后两行可能会解决此问题：在删除目录之前关闭句柄

```
FindClose( hFind );
removeDirectory( fullpath + "\\" + _docname ); 
```

# android - 资产中带有本地字体文件的Android WebView远程URL？

> ID：10832253
> 
> 赞同：14
> 
> 时间：2012-05-31T10:57:36.253
> 
> 标签：android

我正在尝试在资产文件夹中引用本地字体文件，如下所示：-

```
@font-face {
    font-family: 'MyFont';
    src: url('file:///android_asset/MyFont.ttf');  
} 
```

然后使用

```
webView.loadUrl("http://www.dummy.com/page_that_uses_font_css.html"); 
```

但这似乎不起作用，我搜索了堆栈和网络，发现大多数做类似事情的例子只能用 loadDataWithBaseURL(...);

我也尝试过覆盖`WebResourceResponse WebViewClient.shouldInterceptRequest(...)`，但似乎@font-face src 引用没有被此方法拾取，因此无法将我的字体作为资产流返回。

甚至有可能以其他方式做到这一点吗？

如果有人可以推荐替代方案或提供有关此问题的帮助，将不胜感激。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:17:07.163

看来您也可以更改html代码。您的 HTML 看起来如何？

# java - Java 数字错误

> ID：10832255
> 
> 赞同：5
> 
> 时间：2012-05-31T10:57:39.670
> 
> 标签：java

我正在尝试修复以下 Java 代码，

我无法弄清楚为什么打印输出仍然是 5。

```
public class simpleMath
{
    public static void main(String[] args) 
    {
        int number=5;
        half(number);

        System.out.println("5 divided by 2 is: " + number);

    }

    private static double half(int number) {
         number =  number/2;
         return number;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T10:58:56.193

因为您没有重新分配返回的值。

```
int number = 5;
number = half(number); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-31T10:58:26.143

当您调用该函数时，您将丢弃它的返回值：

```
half(number); 
```

你可能打算写：

```
number = half(number); 
```

此外，在 Java 中，参数是按值传递的。这意味着，即使您`number`在函数内部进行了更改，更改也不会传播回调用者。

还有几个问题：

**问题 1：**建议的更改会将结果存储在 中`number`，这是一个整数变量。因此，`half()`-- 类型`double`-- 的结果将被截断为整数。为了避免精度损失，您要么必须更改`number`为浮点变量，要么将结果存储在适当类型的不同变量中。

**问题2：**以下使用*整数除法*：

```
number =  number/2; 
```

结果被截断为整数，即`5 / 2`is `2`。然后将后者转换为`double`(2.0)，这是函数返回的内容。

要修复，请像这样更改函数：

```
private static double half(int number) {
     return number / 2.0;
} 
```

PS 浮点数有很多不直观的属性。我建议看一下[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:00:09.650

您传递按值完成的原始数据类型。您需要在方法 half() 中提供 SOP 编辑​​：需要通过将方法 half() 返回的结果分配给 number 或在 SOP 本身中调用此方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:07:38.723

为什么`half(number)`不修改函数中`number` **声明**的`main()`？这是因为您将传递`number`给`half()`函数的值来评估，即您将值的副本提供`number`给`half()`函数。因此，无论函数`half()`做什么`number`都不会反映**在**. 如果要更新其值，则需要分配to in的返回值。`number`**`main()``half()``number``main()`**

 **还有其他情况，比如变量阴影，我不打算详细讨论，因为它可能会让你感到困惑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T11:00:03.453

这是因为您没有分配 to 的返回值`half()`-`number`它被计算但未使用。

你需要说：

```
number = half(number); 
```

你目前拥有它的方式只有`number`在通过引用而不是值传递时才有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T11:17:49.693

```
int number =5;
half(number); 
```

Java 不支持按引用传递。所以在这种情况下，我们传递的值是 5 而不是数字的引用。

因此，如果我们想捕获更改，那么方法调用应该是这样的 -

```
public class simpleMath
{
    public static void main(String[] args) 
    {
        int number =5;
        number  = half(number);

        System.out.println(" 5 divided by 2 is:"+ number);

    }

    private static double half(int number) {
         number =  number/2;
         return number;
    }
} 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-05-31T11:05:28.307

首先，您需要了解分配给变量的类型。您应该将代码更改为如下所示：

```
 public class simpleMath
    {

        public static void main(String[] args) 
        {
            double number = 5;
            double answer = half(number);

            System.out.println(" 5 divided by 2 is:"+ answer);

        }

        private static double half(double number) {
             number =  number/2.0;
             return number;
        }

    } 
```

看看我现在如何使用返回值以及如何除以 2.0？这些更改将为您提供您正在寻找的结果。**

# android - Android 应用程序在纵向模式下强制关闭，但在横向模式下运行良好

> ID：10832258
> 
> 赞同：0
> 
> 时间：2012-05-31T10:57:41.287
> 
> 标签：android, exception

我是安卓新手。当我运行我的应用程序时，它在横向模式下运行良好，但在纵向模式下，应用程序被强制关闭，在日志中显示以下内容

```
05-31 16:48:30.958: W/KeyCharacterMap(428): No keyboard for id 0
05-31 16:48:30.958: W/KeyCharacterMap(428): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-31 16:50:45.728: D/AndroidRuntime(484): Shutting down VM
05-31 16:50:45.728: W/dalvikvm(484): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-31 16:50:45.758: E/AndroidRuntime(484): FATAL EXCEPTION: main
05-31 16:50:45.758: E/AndroidRuntime(484): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kalmas/com.kalmas.Kalma2}: java.lang.NullPointerException
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.os.Looper.loop(Looper.java:123)
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 16:50:45.758: E/AndroidRuntime(484):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 16:50:45.758: E/AndroidRuntime(484):  at java.lang.reflect.Method.invoke(Method.java:521)
05-31 16:50:45.758: E/AndroidRuntime(484):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-31 16:50:45.758: E/AndroidRuntime(484):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-31 16:50:45.758: E/AndroidRuntime(484):  at dalvik.system.NativeStart.main(Native Method)
05-31 16:50:45.758: E/AndroidRuntime(484): Caused by: java.lang.NullPointerException
05-31 16:50:45.758: E/AndroidRuntime(484):  at com.kalmas.Kalma2.onCreate(Kalma2.java:52)
05-31 16:50:45.758: E/AndroidRuntime(484):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-31 16:50:45.758: E/AndroidRuntime(484):  at          android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-31 16:50:45.758: E/AndroidRuntime(484):  ... 11 more
05-31 16:50:48.108: I/Process(484): Sending signal. PID: 484 SIG: 9 
```

我的 Kalma2.java 的代码是

```
package com.kalmas;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class Kalma2 extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        final MediaPlayer   kalma2  =   MediaPlayer.create(this,   R.raw.kalma2);
        super.onCreate(savedInstanceState);
    setContentView(R.layout.kalma2);

    ImageView prev2 =   (ImageView)findViewById(R.id.prev2);

    prev2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            kalma2.stop();
            startActivity(new Intent(Kalma2.this,Kalma1.class));
        }
    });

    ImageView   next2   =   (ImageView)findViewById(R.id.next2);
    next2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            kalma2.stop();
            startActivity(new Intent(Kalma2.this,Kalma3.class));
        }
    });

    ImageView pause =   (ImageView)findViewById(R.id.pause2);
    pause.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            kalma2.pause();
        }
    });

    ImageView play  =   (ImageView)findViewById(R.id.play2);
    play.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            kalma2.start();
        }
    });

    ImageView kalma =   (ImageView)findViewById(R.id.kalma2);

    kalma.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            kalma2.start();
        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:14:02.637

据我所知，在第 52 行，您尝试将点击侦听器附加到 ImageView。

```
ImageView play  =   (ImageView)findViewById(R.id.play2);
play.setOnClickListener(new OnClickListener() { ... 
```

你确定你的布局包含一个 ID 为 play2 的 ImageView 吗？也很高兴拥有 kalma2.xml 的代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:12:15.677

在没有看到您的布局并确切知道第 52 行是什么的情况下，很难说，但最可能的问题是您的一个`findViewById`调用返回 null，当您使用它尝试设置 clickListener 时，您会得到 NPE。

检查 id 并确保您匹配大小写以及 id。

# android - 向 Android 2.3 添加屏幕截图功能

> ID：10832261
> 
> 赞同：0
> 
> 时间：2012-05-31T10:57:44.043
> 
> 标签：android, screenshot, android-service, android-source, android-framework

我正在为 Android 2.3 实现屏幕截图功能（我知道 ICS 已经有屏幕截图功能）。我使用 Android Screenshot Library（简称 ASL）项目作为基础，我正在修改它以满足我的需要。我也可以为它自由修改Android的源代码。目标是拥有类似于 Galaxy Note 的功能：您使用按键组合截取屏幕截图，然后显示一个编辑器，允许您随意更改图像。您可以在任何地方截取屏幕截图：在主屏幕上、在使用应用程序时等。

现在我有 3 个工作部分：一个捕获屏幕缓冲区的本机二进制文件，一个与本机二进制文件对话并检索屏幕截图的服务，以及编辑器。但我不确定如何将这三件事结合在一起。可以将本机二进制文件添加到 Android 预构建部分，并且可以修改 init.rc 以在启动时以 root 身份执行它（尽管我仍然必须这样做）。编辑器是一个简单的应用程序，也可以包含在 Android 中。但我仍然不知道如何处理该服务。

理想情况下，我想捕获一个按键组合（比如电源按钮和降低音量，或者可能是前面的两个按钮），这将触发服务。然后，该服务将调用二进制文件以截取屏幕截图并启动意图以打开带有屏幕截图的编辑器。但是，据我所知，服务无法捕捉按键。此外，服务必须绑定某个地方才能知道何时必须截屏，所以我想我应该修改Android本身以启动服务并在启动时绑定到它，但是缺少有关Android源代码的文档我不知道从哪里开始寻找。

有谁知道Android的哪个组件负责按键，我应该在哪里绑定我的服务？我的方法甚至可能吗？

提前感谢您提供任何可能的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:39:49.077

看看[这里](https://stackoverflow.com/questions/3356325/how-to-intercept-a-hard-key-pressed-in-a-service)。它建议使用相机按钮，这肯定比重载其他系统按钮更好。

# c++ - Tcl API 如何从 Tcl 获取列表

> ID：10832265
> 
> 赞同：6
> 
> 时间：2012-05-31T10:57:55.123
> 
> 标签：c++, tcl

Tcl 8.4

在我的 Tcl 脚本中：

```
set foo1 false
set foo2 "yes"
set foo3 [list item1 item2 item3] 
```

有一个 API 可以获取像 foo1 或 foo2 这样的标量。例如：`Tcl_GetVar(tcl_interp, string("foo1").c_str(), flags)`。我想知道是否有任何 API 可以从 Tcl 获取列表（如 foo3）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:12:45.273

这是一个两阶段的事情。您首先使用`Tcl_GetVar`函数系列之一获取值，然后获得您感兴趣的列表片段（通常使用`Tcl_SplitList`or `Tcl_ListObjGetElements`）。

作为一个更具体的例子：

```
////// FETCH FROM VARIABLE //////
// The NULL is conventional when you're dealing with scalar variable,
// and the 0 could be TCL_GLOBAL_ONLY or 
Tcl_Obj *theList = Tcl_GetVar2Ex(interp, string("foo1").c_str(), NULL, TCL_LEAVE_ERR_MSG);
if (theList == NULL) {
    // Was an error; message in interpreter result...
}

////// EXTRACT ELEMENTS //////
int objc;
Tcl_Obj **objv;
if (Tcl_ListObjGetElements(interp, theList, &objc, &objv) == TCL_ERROR) {
    // Not a list! error message in interpreter result...
}

////// WORK WITH VALUES //////
for (int i=0 ; i<objc ; i++) {
    const char *value = Tcl_GetString(objv[i]);
    // Whatever...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:08:25.187

我不确定，但[`Tcl_ListObjGetElements`](http://www.tcl.tk/man/tcl8.5/TclLib/ListObj.htm)看起来像你想要的。或者，[`Tcl_ObjGetVar2`](http://www.tcl.tk/man/tcl8.5/TclLib/SetVar.htm)也可以返回 a `Tcl_Obj`，然后您可以使用 Tcl API 的其余部分来操作它以处理列表对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-24T08:39:09.667

嗨，我发现这个有用的链接包含处理列表的示例：

参考：：[https ://www.tcl.tk/man/tclx8.2/TclCommandWriting.3.html](https://www.tcl.tk/man/tclx8.2/TclCommandWriting.3.html)

```
int Tcl_LreverseObjCmd(notUsed, interp, objc, objv)
    ClientData    notUsed;              /* Not used. */
    Tcl_Interp   *interp;               /* Current interpreter. */
    int           objc;                 /* Number of arguments. */
    Tcl_Obj     **obj;                  /* Argument strings. */
{
    int listObjc, lowListIndex, hiListIndex;
    Tcl_Obj **listObjv;
    char *temp, *resultList;
    Tcl_Obj **newListObjv;

    /* Verify argument count.  Since we take only one argument, argument
     * count must be 2 (command plus one argument).
     */
    if (objc != 2)
        return TclX_WrongArgs (interp, objv [0], "list");

    /* Create an object to handle the new list we're creating */
    newListObjv = Tcl_NewObj();

    /* Crack the list at objv[1] into its own count and array of object
     * pointers.
     */
    if (Tcl_ListObjGetElements (interp, objv[1], &listObjc, &listObjv) != TCL_OK) {
        return TCL_ERROR;
    }

    /* For each element in the source list from last to first, append an
     * element to the new list.
     */
    for (listIndex = listObjc - 1; listIndex >= 0; listIndex--) {
        Tcl_ListObjAppendElement (interp, newListObjv, listObjv[listIndex]);
    }
FIX: NEED TO RETURN THE LIST.
    return TCL_OK;
} 
```

# javascript - 我如何编辑我的 js，以便在输出输出之前清除表单

> ID：10832267
> 
> 赞同：0
> 
> 时间：2012-05-31T10:58:13.120
> 
> 标签：javascript

你好，我正在研究一个 html 颜色生成器，并在某个地方找到了一个 javascript，只有这个脚本在你按下 make 代码时不会清除输出

所以我的问题是我必须在我的代码中添加什么，以便在输入新结果之前清除输出

这是我的javascript：

```
function is_valid(color_list)
{
var colors = (color_list.toLowerCase()).split(',');
var hex    = '0123456789abcdef';
var valid  = true;

for (var i = 0; (i < colors.length) && valid; i++)
{
    if (colors[i].length != 6) valid = false;

    for (var j = 0; j < colors[i].length; j++)
    {
        if (hex.indexOf(colors[i].charAt(j)) < 0) valid = false;
    }
}

return valid;
}

function hex_to_dec(n)
{
// n will always be passed in as a string

var c = '0123456789abcdef';

n = n.toLowerCase();

return c.indexOf(n.charAt(0)) * 16 + c.indexOf(n.charAt(1));
}

function hex_to_rgb(hex)
{
// hex will always be passed in as a string

var srgb = '';

for (var i = 0; i < 6; i += 2)
    srgb = srgb + hex_to_dec(hex.substring(i, i + 2)) + ',';

return srgb.substring(0, srgb.length - 1);
}

function two_color_fade(txt, color1, color2)
{
var htm = '';

if (txt.length == 0) return htm;

// color1 and color2 are strings from the comma delimited color_list

// s1 and s2 are now in form 255,00,33

var s1 = hex_to_rgb(color1);
var c1 = s1.split(',');

var s2 = hex_to_rgb(color2);
var c2 = s2.split(',');

for (var i = 0; i < 3; i++)
{
    c1[i] = parseInt(c1[i]);
    c2[i] = parseInt(c2[i]);
}

var inc = new Array(3);

for (var i = 0; i < 3; i++)
{
    if (txt.length - 1 > 0)
    {
        inc[i] = (c2[i] - c1[i]) / (txt.length - 1);
    }
    else
        inc[i] = c2[i];
}

for (var i = 0; i < txt.length; i++)
{
    htm = htm + '<font color="' + rgb_to_hex(c1[0], c1[1], c1[2]) + '">' + txt.charAt(i) + '<\/font>';

    // test print out
    //htm += '<font color="' + rgb_to_hex_wtv(c1[0], c1[1], c1[2]) + '">' +
    //i + ': ' + c1[0] + ',' + c1[1] + ',' + c1[2] + '<\/font><br>';

    for (var j = 0; j < 3; j++) c1[j] += inc[j];
}

return htm;
}

function multi_color_fade(txt, color_list)
{
var htm = '';
var color_count = 0;
var chunk_count = 0;
var chunks = new Array();

var colors = (color_list.toLowerCase()).split(',');

var num_chunks = colors.length - 1;

var quotient  = Math.floor(txt.length / num_chunks);
var remainder = txt.length % num_chunks;

for (var i = 0; i < num_chunks; i++)
{
    chunks[i] = quotient;

    if (i >= (num_chunks - remainder)) chunks[i]++;
}

for (var i = 0; i < txt.length; i += chunks[chunk_count++])
{
    // The substr method would be eaiser, but WebTV can't handle substr.
    // str.substr(i, j) is same as str.substring(i, i + j)
    htm += two_color_fade(txt.substring(i, i + chunks[chunk_count]), colors[color_count], colors[color_count + 1]);

    color_count++;
}

return htm;
}

function fade(frm)
{
var col_list = '';

var txt = frm.intxt.value;

// preset or custom color scheme?
    col_list = frm.selPresets.options[frm.selPresets.selectedIndex].value;

if (txt.length == 0)
{
    alert('You need to enter some text.');
    frm.intxt.focus();
    return;
}

frm.outtxt.value += multi_color_fade(txt, col_list);
}

function rgb_to_hex(r, g, b)
{
// r, g, and b are numbers, not strings

// correct function returns 255 if n > 255 and 0 if n < 0

// The "correct" function doesn't really need to be called, since
// rgb_to_hex will take care of anything < 256 or > -1, but just
// to be on the safe (WebTV) side...
r = correct(r);
g = correct(g);
b = correct(b);

var h = ((r << 16) | (g << 8) | (b)).toString(16);

while (h.length < 6) h = '0' + h;

return '#' + h;
}

function correct(n){if(n>255)return 255;if(n<0)return 0;return n}

// --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:01:42.780

我猜：

```
frm.outtxt.value += multi_color_fade(txt, col_list); 
```

应该：

```
frm.outtxt.value = multi_color_fade(txt, col_list); 
```

您想更改值，而不是附加到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:01:34.490

添加类似这样的东西，基本的 javascript dom 操作

```
element = document.getElementById(<control-id>);
element.innerHTML = "";

or element.value = ""; 
```

# android - 如何判断声音是否仍在soundpool中播放

> ID：10832278
> 
> 赞同：0
> 
> 时间：2012-05-31T10:58:52.747
> 
> 标签：android, soundpool

我希望使用 soundpool 播放一系列声音，但想等到每个声音完成后再开始下一个声音。我找不到任何`.isPlaying()`类型的功能。有吗？

# c#-4.0 - 是否有任何等价于始终为真的 lambda 表达式？

> ID：10832283
> 
> 赞同：0
> 
> 时间：2012-05-31T10:59:08.440
> 
> 标签：c#-4.0, lambda, equivalent

我正在使用一系列名为 RelayCommand 的命令，这些命令有一个要执行的函数和一个返回布尔值的函数，告诉你是否可以执行第一个函数。事实上，我大部分时间都在使用 lambda 表达式 () => true。有什么表达式可以用来使它更具可读性吗？像 System.TrueFunction 或类似的东西。

在上下文中查看它：

```
 this.PasteFromExcelCommand = new RelayCommand(PasteFromExcel, this.OneRowSelected);
  this.SaveCommand = new RelayCommand(this.SaveSession, CanSave);
  this.SwitchViewCommand = new RelayCommand(this.SwitchView, () => true);
  this.ExitCommand = new RelayCommand(this.Exit, () => true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:05:03.123

没有内置任何内容，但您可以轻松创建自己的：

```
public bool TrueFunc()
{
  return true;
}

this.ExitCommand = new RelayCommand(this.Exit, TrueFunc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:13:09.267

只需创建自己的

```
static readonly Func<bool> TrueFunc = () => true; 
```

并像这样使用它

```
new RelayCommand(this.Exit, TrueFunc); 
```

# jsf-2 - 程序化 PrimeFaces 菜单栏在 MyFaces 中不起作用，但在 Mojarra 中起作用

> ID：10832284
> 
> 赞同：0
> 
> 时间：2012-05-31T10:59:11.467
> 
> 标签：jsf-2, primefaces, myfaces

我试图实现一个程序化菜单栏，其中项目元素对方法的调用会抛出一个 actionListener。这不适用于 myfaces 2.1.6，但适用于 mojarra 2.1.8。我的代码有错误吗？myfaces有错误吗？

这是我的代码：

**xhtml**

```
 <h:form>
            <p:tabView id="head" dynamic="true" cache="true" style="width:972px;">
                <p:tab id="tab1" title="Config">
                </p:tab>
                <p:tab id="tab2" title="Result">
                    <p:menubar model="#{someBean.menu}" autoDisplay="false" />
                </p:tab>
            </p:tabView>
        </h:form> 
```

**豆java**

```
public MenuBean() {
        FacesContext facesCtx = FacesContext.getCurrentInstance();
        ELContext elCtx = facesCtx.getELContext();
        ExpressionFactory expFact = facesCtx.getApplication().getExpressionFactory();

        menu = new DefaultMenuModel();

        Submenu submenu = new Submenu();
        submenu.setLabel("Dynamic Submenu 1");

        MenuItem item = new MenuItem();
        item.setValue("Dynamic Menuitem 1.1");
        item.setId("item1");
        item.setAjax(false);
        MethodExpression actionListener = expFact.createMethodExpression(elCtx, "#{someBean.hello}", null, new Class[] { ActionEvent.class });
        item.addActionListener(new MethodExpressionActionListener(actionListener));

        submenu.getChildren().add(item);

        menu.addSubmenu(submenu);

        submenu = new Submenu();
        submenu.setLabel("Dynamic Submenu 2");
        item = new MenuItem();
        item.setValue("Dynamic Menuitem 2.1");
        item.setAjax(false);
        item.setId("ite3");
         actionListener = expFact.createMethodExpression(elCtx, "#{someBean.hello}", null, new Class[] { ActionEvent.class });
        item.addActionListener(new MethodExpressionActionListener(actionListener));

        submenu.getChildren().add(item);

        menu.addSubmenu(submenu);}
        public void hello(ActionEvent event) {  System.out.println("hola2");} 
```

有什么建议么？或从 MyFaces 更改为 Mojarra

# mysql - 在MySQL中计算风向的平均值

> ID：10832287
> 
> 赞同：6
> 
> 时间：2012-05-31T10:59:38.420
> 
> 标签：mysql, trigonometry, degrees, atan2, radians

我每 10 秒在新行上有一张风向表（以及其他天气值）。方向存储为度数：0 - 360。

* * *

## 目的

这个平均值是什么意思？数据库每 10 秒存储一行信息。对于性能问题，我想将 5 天之前的数据汇总到每小时一条（平均）行。

使用温度很容易实现： avg(temp) 可以解决问题，因为温度不会在不同的值之间跳跃。

在盛行的风中，要获得这个“平均值”要困难得多。

* * *

以度为单位计算平均风向并不像使用聚合函数 avg() 那样简单，因为它是一个圆，例如：

```
dir1 = 10; dir2 = 350;
avg() = (10+350)/2 = 180; 
```

哪个不准确；它应该是：0 或 360。

因此，我在大学里的三角学课程在我的脑后想，如果我将它转换为弧度，并计算 x 和 y 分量，我将能够重新计算平均方向。

在 php 中，$w['w'] 是存储在数据库中的方向。

```
while($w = $stmt->fetch()){
    $x += cos(deg2rad($w['w']));
    $y += sin(deg2rad($w['w']));     
}

$angle = atan2($y, $x);
$angle = 360 + round(rad2deg($angle)); 
```

**这个公式正确吗？**

如果这个公式是正确的；理想情况下，我想获得 MySQL 的完整功能。我用它做了这个；但我发现很多（）的......

```
(360 + degrees(atan2(sum(sin(radians(W))), sum(cos(radians(W))))))) AS angle 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-21T12:30:22.597

最初建议的问题是它总是添加 360，而实际上，如果 atan2 给出否定结果，您只想添加 360。这可以用 IF 语句进行排序，但它比原来的还要笨重！

```
IF( degrees (atan2( sum(sin(radians(WindDirection))) , sum(cos(radians(WindDirection))) ) )<0,
360+degrees ( atan2( sum(sin(radians(WindDirection))), sum(cos(radians(WindDirection))) )),
degrees(atan2(sum(sin(radians(WindDirection))), sum(cos(radians(MastDirection))) )) ) AS angle 
```

第二种解决方案不能用于时间平均，因为它不是聚合函数。

我管理的最佳解决方案实际上使用了一个存储函数，如果您对数据库具有以下权限，则可以创建该函数：

```
CREATE FUNCTION Vavg (sumsindir FLOAT,sumcosdir FLOAT) 
RETURNS FLOAT DETERMINISTIC 
RETURN IF( DEGREES(ATAN2(sumsindir,sumcosdir))<0,360+DEGREES(ATAN2(sumsindir,sumcosdir)) , DEGREES(ATAN2(sumsindir,sumcosdir))) 
```

然后，您可以通过在查询中调用函数来计算平均值：

```
SELECT VavgTest( sum(sin(radians(WindDirection))),sum(cos(radians(WindDirection))) ) AS vectorAverage FROM table GROUP BY HOUR(MyTimestamp),DAYOFYEAR(MyTimestamp),YEAR(MyTimestamp)
ORDER BY MyTimestamp; 
```

我已经将 group by 包括在内，以表明平均程序随后适用于任何平均时间段。

我怀疑，实际的最佳答案是使用用户定义的函数，但我没有做到这一点，因为它必须在 C 或 C++ 中完成，而且我没有这些语言的任何背景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:12:03.217

如果我们在圆上绘制方向，我们会看到在这种情况下您所追求的“平均值”落在圆的较短部分（绿色部分）的中间。较长段的中点位于另一段的中点的完全相反侧。

![圆图](../Images/dcf03b46ff6bfdeb5945ea190bdba504.png)

一个简单的`(A+B)/2`计算给出较长或较短段的中点。如果它是较长的段，则可以找到较短的段，`S1 = (S2+180) % 360`其中`S2`较长的段在哪里（并且`%`是[模运算符](http://dev.mysql.com/doc/refman/5.6/en/mathematical-functions.html#function_mod)）。

现在剩下要做的就是确定何时获得较长的段，何时获得较短的段，即何时`ABS(B-A) > 180`。

将所有这些放在一起，计算将是：

```
( (A+B)/2 + IF( ABS(B-A) > 180, 180, 0 ) ) % 360 
```

这很可能比三角函数快得多。

如评论中所述，如果两个方向彼此完全相反（如 0° 和 180°），则“平均值”可能位于圆的任一侧（90° 或 270°）。你只需要决定选择哪一个。在这种情况下，上述公式将选择 90°。如果您想要 270°，请将比较从 更改`>`为`>=`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T04:55:39.733

我有这个解决方案，用于计算 SQL Server 2008 中多个值的每日平均风向。##Day 是时间序列值的一天。

```
SELECT @DayMean =
CASE WHEN ABS(@DayMax - @DayMin) > 180 THEN --this line could be wrong, might need to compare consecutive values
  CASE WHEN AVG(CASE WHEN (Value > 180) THEN Value-360 ELSE Value END) < 0 
    THEN 
      360+AVG(CASE WHEN (Value > 180) THEN Value-360 ELSE Value END)
    ELSE
      AVG(CASE WHEN (Value > 180) THEN Value-360 ELSE Value END)
  END
ELSE
  AVG(Value)
END
FROM ##Day 
```

灵感来自此页面上的倒数第二篇文章[http://www.control.com/thread/1026210133](http://www.control.com/thread/1026210133)，然后在 excel 中计算出来。

这条线可能是错误的，但是 excel 中的计算涉及找到连续数字之间的差异，包括最后一个值减去零，这对我来说没有多大意义（可能只是因为比较连续值比 min 更容易和max在excel中）。

```
CASE WHEN ABS(@DayMax - @DayMin) > 180 THEN 
```

因此，也许应该是“如果任何值超过 180”，或者“如果连续点之间的最大“距离”超过 180”。后一种情况的解决方案可能会使计算速度慢得多。

请在可能的地方批评和纠正:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:08:14.817

看看这个： [http ://www.h2ns.com/media/tech-notes/tn09.pdf](http://www.h2ns.com/media/tech-notes/tn09.pdf)

在我的情况下，我有一张每 20 或 30 秒记录一次风向（度）和速度的表格，所以我需要在 1 分钟内取平均值。

我使用这样的 SQL 语句：

```
select
    DATE_FORMAT(ut,'%Y-%m-%d %H:%i:00'),
    SQRT(POW(avg(WS*sin(RADIANS(WD))),2)+ POW(avg(WS*cos(RADIANS(WD))),2))
as UV, ATAN(avg(WS*sin(RADIANS(WD))) / avg(WS*cos(RADIANS(WD))))
as AV
from Weather
GROUP BY DATE(ut),HOUR(ut),MINUTE(ut); 
```

# r - 将列表的特定子列表强制转换为具有基数 R 的矩阵/数据框

> ID：10832288
> 
> 赞同：2
> 
> 时间：2012-05-31T10:59:41.570
> 
> 标签：r

我需要从列表的特定子列表创建数据框。我知道这个特定子列表中的数据结构是不变的。对于一个列表，我发现 do.call() 可以解决问题：

```
lst<-list(l1="aa", l2="ab", l3="ac")
fun.sublst1<-function(n) {
    a<-c("a",1,n)
    return(a)
 }
lstoflst<-lapply(lst, fun.sublst1)
do.call(rbind,lstoflst) # create a data frame from a list 
```

但是，如果我有一个包含列表的列表并且我想遍历特定的子列表，我将无法使用 do.call(rbind,lstolflst$A) 创建数据框。

```
# section list of list
fun.sublst2<-function(n) {
    a<-c("a",1,n)
    b<-c("b",2)
    return(list(A=a,B=b))
}
lstoflst<-lapply(lst, fun.sublst2)
# result should create a dataframe consisting of all sublists $A
t(cbind(lstoflst$l1$A,lstoflst$l2$A,lstoflst$l3$A)) 
```

使用笨拙的代码，它看起来像这样。

```
dat<-t(as.data.frame(lstoflst[[1]][[1]]))
for(i in 2:length(lstoflst)) {
     dat<-rbind(dat,t(lstoflst[[i]][[1]]))
} 
```

有没有一种优雅的方法可以用基础 R 来做到这一点？我猜 do.call(rbind,lstoflst, ???) 与其他一些参数会做。我想我需要传递索引或索引函数。有什么帮助吗？

我搜索了，但我的搜索词没有运气。应该早就解决了。无论如何，希望你能指导我。谢谢

**编辑：**更改了标题，因为我的示例仅生成矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:08:04.110

如果您知道所需列表组件的名称（在本例中为“A”），则可以将列表中的每个列表作为子集：

```
lsSub <- lapply(lstoflst, "[[", "A") 
```

然后`rbind`那个

```
do.call(rbind, lsSub)
#    [,1] [,2] [,3]
# l1 "a"  "1"  "aa"
# l2 "a"  "1"  "ab"
# l3 "a"  "1"  "ac" 
```

但正如 Joran 指出的那样，这不是`data.frame`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:14:53.050

这看起来很笨拙，但有效。

```
do.call(rbind, 
  lapply(lstoflst, function(x){xx <- x[names(x) %in% "A"]; do.call(rbind, xx)})
)

  [,1] [,2] [,3]
A "a"  "1"  "aa"
A "a"  "1"  "ab"
A "a"  "1"  "ac" 
```

* * *

也许有人可以用 做一些聪明的事情`rapply`，但我无法让它工作。

# html5boilerplate - HTML5 样板构建脚本 - 目录不存在

> ID：10832289
> 
> 赞同：0
> 
> 时间：2012-05-31T10:59:49.543
> 
> 标签：html5boilerplate, build.xml

我正在尝试运行构建脚本并遇到 BUILD FAILED 消息。与发布文件夹有关，特别是图像目录。错误：

`Directory does not exist: /Users/lewis/Sites/slb-framework/publish/httpdocs/assets/img`

似乎它正在寻找发布文件夹中的目录，但在脚本创建发布文件夹之前，该目录将不存在，据我所知。

我正在使用不同的目录结构，并修改了 project.properties 以指向资产文件夹的正确子目录，但它在开始图像压缩时失败了。

我已经安装了 jpegtran 和 optipng。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:45:47.537

据我所知，您的图像文件夹需要与 HTML5 样板目录结构中的指示一致。如果仍然存在问题，请在 Github 存储库中打开一个问题：[https ://github.com/h5bp/ant-build-script/issues](https://github.com/h5bp/ant-build-script/issues)

# html - 如何将表格滚动到第 11 行之外？

> ID：10832290
> 
> 赞同：0
> 
> 时间：2012-05-31T10:59:50.593
> 
> 标签：html, css

我想将表格插入两行 ( `<hr /> <hr>`) 并保持每行的高度，以便第 11 行以外的行不会看到它们，而是通过滚动。我的代码 html 很长，更容易进入链接示例。谢谢 [看例子](http://www.centerwow.com/stackoverflow/shape/TableEdit1.php)

```
style code:
html { height: 100%; width: 100%; }
body { height: 100%; width: 100%; margin: 0; padding: 0; border: 0; background: #FFFFFF;
  font: 13px/15px Verdana,Arial,Helvetica,sans-serif; }
img { border: none; }
table, tr, td, tr { 
    border-collapse:collapse; 
    vertical-align: top; 
    text-align: left;
    font: 13px/15px Verdana,Arial,Helvetica,sans-serif; }
a { color: #8D0D19;}

table.bordered tr th, table.bordered tr td { 
    border: 1px solid #000000;

    }
table caption, table th, table td {
    margin: 2px;
    padding: 2px 2px;
    vertical-align: top;
}

#pagination .selected { font-weight: bold; color: #8D0D19;}
table tr.odd {
    background: none repeat scroll 0 0 #E5E5E5;
}
table tr.even {
    background: none repeat scroll 0 0 #F0FFF0;
}
table{
    margin: 5px auto;
}
#tablestyle{
    height:250px;
}
th {
    background: azure;
    color: #000000;
    font-weight: bold;
}
table tr.even:hover,  .hover{
    background:#A2D2E1;
    }

table tr.odd:hover, .hover{
    background:#BBB2E1;
    }
table tD:hover, .hover{
    background:#FFFF00;
    }
.display{
    background:red;
    width:250px;
    height:20px;
    font-size:20px;
}   
.edittd
{
font-size:14px;
width:200px;
background-color:yellow;
border:solid 1px #000;
padding:4px;
}
.statuSnoChange{
    font-size:14px;
    width:100px;
   height:20px;
    background:azure;
}
.statuSChange{
    font-size:14px;
    width:150px;
     height:20px;
    background:#FFFF00;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:04:37.040

添加`overflow:auto;`到`#tablestyle`，这将使您的 div 滚动过去`250px`，这是当前高度

# c# - 探亲？

> ID：10832294
> 
> 赞同：1
> 
> 时间：2012-05-31T11:00:06.937
> 
> 标签：c#

我正在做一个像这样的虚拟村庄项目。有 50 名男性和 50 名女性，他们老了，随机与某人结婚，他们有孩子，当他们达到 80 岁时，他们开始死亡。我有一个名为人类的抽象 C# 类：

```
abstract class Human
{
    enum GenderType { Male, Female };

    int Age;
    bool Alive;
    string Name;
    GenderType Gender;

    Human Father;
    Human Mother;
    Human Partner;
    Human[] Children;

    public abstract bool Check(ref List<Human> People, int Index);
} 
```

和两个来自人类班的孩子，叫做男人和女人。我的问题是如何覆盖 Man/Woman 类中的 Check 方法，以便能够检测非法结婚的女性/男性亲属。例如母亲、姐妹、阿姨、嫂子、岳母等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:11:58.870

就我个人而言，我会为不同的关系向基类添加辅助属性。使高级代码非常容易理解。您只需根据需要为不同的关系添加新的助手/属性。

## 像这样的东西：

```
public class Human
{
    ...
    public List<Human> Parents
    {
        get {return new List<Human>(){Mother, Father};}
    }

    public List<Human> Siblings
    {
        get
        {
            List<Human> siblings = new List<Human>();
            foreach (var parent in Parents)
            {
                siblings.AddRange(parent.Children);
            }
            return siblings;
        }
    }
}

public class Man : Human
{
    public override bool Check(ref List<Human> People, int Index)
    {
        // Do basic checks first
        if (!base.Check(People, Index))
        {
            return false;
        }
        var person = People[Index];
        // Can't marry your mother/father
        if (this.Parents.Contains(person)
        {
             return false;
        }
        // Can't marry your sister/brother
        if (this.Siblings.Contains(person))
        {
             return false;
        }
        // ... etc for other relationships
        return true;   /// Not rejected... yes you can marry them... (if they want to!)
    }
} 
```

我还将适用于男性和女性的基本检查放在`Human`课堂上，并首先从男性和女性检查中调用基本检查（如上面的代码所示）。

```
public class Human
{
    public virtual bool Check(ref List<Human> People, int Index)
    {
        var person = People[Index];
        // Can't marry yourself!
        if (this == person)
        { 
             return false;
        }
        if (this.Gender == person.Gender)
        {
             return false;  // Unless the village is New York or Brighton :)
        }
        if (!person.Alive)
        {
             return false;  // Unless vampires/zombies are allowed
        }
        if (Partner != null)
        {
             return false;  // Unless village supports bigamy/poligamy in which case use a collection for Partner and rename to Partners.
        }
    }
} 
```

我想你会发现大多数检查同样适用于男性和女性，因为同性检查很早就发生了，所以大多数检查可能会进入基类`Check`。

*注意：是的，您可以使用而不是列表来做很多这样的事情`yield return`，但是您还需要考虑目标受众:)*

# mysql - 报告以列出新老用户的每日、每月或每年访问

> ID：10832301
> 
> 赞同：2
> 
> 时间：2012-05-31T11:00:33.797
> 
> 标签：mysql, sql, sql-server-2008, ms-access

我有 2 个具有以下表结构的表 -

**用户**（**UserID** int、**Name** varchar(50)、**DateCreated** datetime）和

**UserLogin**（**Id** int、**UserId** int、**DateLoggedIn**日期时间）

我需要按以下格式生成每天/每月/每年登录应用程序的用户的报告 -

**日期、新用户、旧用户、总用户**

**日期**- 为报告选择的日期

**NewUser** - 如果用户第一次登录应用程序，他将被视为新用户，否则视为旧用户。

**OldUser** - 第一次访问后的后续用户登录。

比如用户A在15号登录一个月，15号被当成新用户，但是后续访问网站时作为老用户，需要在报表上报老用户。同样，如果用户 B 在 2012 年 4 月 30 日登录过一次，那么以后他将被视为旧用户。

你们可以给我一个查询以输出报告吗？

我的数据如下——

用户表

```
| 用户名 | 姓名 | 创建日期 |
|--------|-------------|-------------|
| 1 | 拉杰维尔 | 2012-01-01 |
| 2 | Manoj Tyagi | 2011-08-10 |
| 3 | 拉古潘迪 | 2009-05-13 |
| 4 | 巴詹拉尔 | 2012-05-01 |
| 5 | 萨比尔辛格 | 2011-08-03 |

```

用户登录表

```
| 身份证 | 用户名 | 日期登录 |
|----|--------|--------------|
| 1 | 1 | 2012-04-27 |
| 2 | 1 | 2012-05-25 |
| 3 | 1 | 2012-05-28 |
| 4 | 2 | 2012-03-21 |
| 5 | 2 | 2012-05-30 |
| 6 | 3 | 2012-05-20 |
| 7 | 4 | 2012-05-29 |
| 8 | 5 | 2012-04-22 |
| 9 | 3 | 2012-05-15 |

```

我确实需要一个月的全部数据（不需要如此不同）....理想情况下，根据我提供的数据，我应该得到以下信息

```
| 月 | 新用户 | 老用户 | 用户总数 |
|-------|---------|----------|------------|
| 3 | 1 | 0 | 1 |
| 4 | 2 | 0 | 2 |
| 5 | 2 | 4 | 6 |

```

由于用户 id 3 在 5 月份登录了两次，他的第一次访问应该被视为新访问，第二次访问应该被视为旧访问。

TIA,

帕里托什·艾莉亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:10:51.740

您可以在连接日期在登录表和用户表之间执行外连接，然后计算每个表中不同的用户 ID：

```
SELECT   DATE(l.DateLoggedIn)                                AS Date,
         COUNT(DISTINCT u.UserID)                            AS NewUsers,
         COUNT(DISTINCT l.UserId) - COUNT(DISTINCT u.UserID) AS OldUsers,
         COUNT(DISTINCT l.UserId)                            AS TotalUsers
FROM     UserLogin                                           AS l
  LEFT JOIN Users                                            AS u
         ON l.UserId = u.UserID
        AND DATE(l.DateLoggedIn) = DATE(u.DateCreated)
GROUP BY Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:33:29.770

我认为这显示了逻辑，但可能没有最高的性能。

```
 ;With NewUser as (
        Select ul.UserID
          , Min(ul.DateLoggedIn) as NewDate
        from dbo.USERLOGIN as ul
        group by UserID)

    Select 
      Month(l.DateLoggedIn) as ThisMonth
      , (Select Count(*) from dbo.USERLOGIN as ul 
         inner join NewUser as nu 
         on ul.UserID = nu.UserID
              and ul.DateLoggedIn = nu.NewDate 
         where Month(ul.DateLoggedIn) = Month(l.DateLoggedIn)
        ) as NewUsers
      , (Select Count(*) from dbo.USERLOGIN as ul 
         where Month(ul.DateLoggedIn) = Month(l.DateLoggedIn)
            AND not exists (Select * from NewUser as nu
             where ul.UserID = nu.UserID
                            and ul.DateLoggedIn = nu.NewDate)
        ) as OldUsers
      , Count(*) as TotalUsers
    from dbo.USERLOGIN as l
    group by Month(l.DateLoggedIn)

-- a little testing code
 CREATE TABLE [dbo].[USERLOGIN](
        [ID] [int] NOT NULL,
        [USERID] [int] NOT NULL,
        [DateLoggedIn] [date] NOT NULL
    )
    ;
    insert INTO dbo.USERLOGIN 

    select 1, 1, '2012-04-27'
    union all
    Select 2, 1, '2012-05-25'
    union all
    Select  3 , 1,'2012-05-28'
    union all
    Select 4 ,  2,'2012-03-21'
    union all
    Select 5 , 2,'2012-05-30'
    union all
    Select 6 , 3 ,'2012-05-20'
    union all
    Select 7 , 4 ,'2012-05-29'
    union all
    Select 8 , 5,'2012-04-22'
    union all
    Select  9 , 3,'2012-05-15' 
```

# c# - 使用 CodeDom 以编程方式编译 c#windpws 表单中的 C 代码？

> ID：10832307
> 
> 赞同：3
> 
> 时间：2012-05-31T11:00:47.910
> 
> 标签：c#, c, winforms

我正在制作一个 C 编译器，我必须知道是否可以使用 CodeDom 在 c# 中编译 C 代码，目前我正在使用以下代码来编译 c# windows 形式的 C# 代码？

有没有简单的方法来编译 C 语言的代码？

```
using System.CodeDom.Compiler;
using System.Diagnostics;
using Microsoft.CSharp;
private void button1_Click(object sender, System.EventArgs e)
{
   CSharpCodeProvider codeProvider = new CSharpCodeProvider();
   ICodeCompiler icc = codeProvider.CreateCompiler();
   string Output = "Out.exe";
   Button ButtonObject = (Button)sender;

   textBox2.Text = "";
   System.CodeDom.Compiler.CompilerParameters parameters = new 
   CompilerParameters();
   //Make sure we generate an EXE, not a DLL
   parameters.GenerateExecutable = true;
   parameters.OutputAssembly = Output;
   CompilerResults results = icc.CompileAssemblyFromSource(parameters, textBox1.Text);

   if (results.Errors.Count > 0)
   {
       textBox2.ForeColor = Color.Red;
       foreach (CompilerError CompErr in results.Errors)
       {
           textBox2.Text = textBox2.Text +
                       "Line number " + CompErr.Line +
                       ", Error Number: " + CompErr.ErrorNumber +
                       ", '" + CompErr.ErrorText + ";" +
                       Environment.NewLine + Environment.NewLine;
       }
   }
   else
   {
       //Successful Compile
       textBox2.ForeColor = Color.Blue;
       textBox2.Text = "Success!";
       //If we clicked run then launch our EXE
       if (ButtonObject.Text == "Run") Process.Start(Output);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:05:20.357

您没有制作编译器。您正在为编译器创建*接口。*不，你不能用`CodeDom`这个。为什么不直接使用 C 编译器呢？您可以为此目的使用大量资源。捕获`STDOUT`- 有编译器输出格式的一般准则，解析它们应该是一项相当简单的任务。

您也可以尝试研究嵌入 C 解释器。现在*这*可能很有趣。更有趣的是：编写自己的 C 解释器（比编译器更容易实现）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:14:12.890

我认为您正在关注 -[如何使用 C# 编译器以编程方式编译代码](http://support.microsoft.com/kb/304655)。

在为您的工作使用任意代码之前，请仔细检查它是否适合您的要求。您正在使用的是 .net 框架内部编译帮助程序类。检查该文章的以下几行。

> .NET Framework 公开了允许您以编程方式访问 C# 语言编译器的类。如果您想编写自己的代码编译实用程序，这可能很有用。

和要求

*   视觉工作室
*   Visual C# 语言编译器

那么如何`c program`使用这些.net 库类进行编译。

> 您可以使用 c 编译器 exe，并使用该编译器可以在控制台应用程序中编译文件或使用`Process`.net 中的类。

您可以从命令行编译 c，只需在 c# 中使用相同的代码，`redirectstandardoutput`即可获得同样显示的输出。

```
Process proc = new Process();
proc.StartInfo.FileName = "compiler name";
proc.StartInfo.RedirectStandardOutput = true;
proc.Start();
string output = proc.StandardOutput.ReadToEnd(); 
```

[参考](http://www.daniweb.com/software-development/csharp/threads/185366/how-to-programmatically-compile-c-code-using-c-language)

# windows-8 - “文本框监听器”

> ID：10832312
> 
> 赞同：0
> 
> 时间：2012-05-31T11:01:31.267
> 
> 标签：windows-8, windows-runtime

我正在创建一个应用程序，其中包含左侧的文本框供用户输入，在应用程序的右侧，它包含数字按钮（1 - 9 和退格）

我如何让我的文本框听那些按钮，以便当我点击右侧的按钮时，它会将数字添加到左侧的文本框中。我尽量不做 IF else 语句，因为我发现它效率不高。

每次单击右侧的按钮时，我只需要填写一个文本框。另一个问题是，是否有“BackSpace”的代码，这样当我点击 Backspace 时，文本框上只有 1 个数字会被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:23:29.200

您使用每个按钮的单击事件来更新文本框的内容。

# enums - 是否可以使用 JAXB2 将枚举映射到字符串值？

> ID：10832314
> 
> 赞同：1
> 
> 时间：2012-05-31T11:01:36.223
> 
> 标签：enums, jaxb, schema

需要生成这样的枚举类：

```
public enum FileTypes {
TEXT("txt");
DOC("doc");
ENTERPRISE_ARCHIVE("ear");
} 
```

是否可以使用 jaxb 生成这样的枚举？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:52:02.877

您需要使用 typesafeEnumClass 绑定。

1.  有一个命名约定，你给你的枚举提供后缀“Enum”。

2.  为您的每个 xsd:enumeration 值（其字符串值是您的文本描述）指定一个 xsd:annotation，指定 Java 枚举值，如下所示：

    ```
     <xsd:enumeration value="ear">
            <xsd:annotation>
                <xsd:appinfo>
                    <jaxb:typesafeEnumMember name="ENTERPRISE_ARCHIVE" />
                </xsd:appinfo>
            </xsd:annotation>
        </xsd:enumeration> 
    ```

3.  然后按如下方式修改您的 bindings.xjb 文件，以使名称以 Enum 结尾的所有 XSD 定义类型成为具有 typesafeEnumClass 绑定的 Java 枚举：

    ```
    <bindings node="//xs:simpleType[substring(@name,string-length(@name)-3) = 'Enum']" multiple="true" required="false">
            <typesafeEnumClass />
    </bindings> 
    ```

# javascript - Ember.js ViewState 不附加视图

> ID：10832316
> 
> 赞同：3
> 
> 时间：2012-05-31T11:01:42.193
> 
> 标签：javascript, ember.js

我有以下 ViewState 定义：

```
App.LoggedIn = Ember.ViewState.create({
  view:  App.TopbarView.extend({
    elementId: 'topbar'
  }), 
```

无论如何我可以指定我希望将此视图附加到带有 topbar id 的元素吗？

我唯一能找到的是在输入处理程序中设置创建视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:18:37.877

大概您将在 StateManager 中使用该 ViewState，对吗？

如果是，则将 stateManager 的 rootElement 设置为 topbar，当进入该状态时，该视图将附加到该元素。

例如：

```
App.loggedIn = Ember.ViewState.create({
    view: App.TopbarView
});

App.stateManager = Ember.StateManager.create({
    rootElement: 'topbar',
    loggedIn: App.loggedIn
}); 
```

如果您无法走这条路，您可以修改视图状态的 enter 函数以找到 topbar 元素并将视图附加到它。说得通？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-02T10:51:41.963

您需要传递 View 的实例而不是“view”属性的类。尝试这个

```
App.LoggedIn = Ember.ViewState.create({
  view:  App.TopbarView.create({
  elementId: 'topbar'
}) 
```

# c - 当 C 需要特殊类型的 makefile 时，将 Fortran 90 与 C 混合？

> ID：10832322
> 
> 赞同：0
> 
> 时间：2012-05-31T11:02:10.260
> 
> 标签：c, makefile, fortran, mixing

我有一个 FORTRAN 代码，它需要一个 C 例程来计算度量。C 例程包括 .c 和 .h 文件，在文档中它是这样写的：

> 如果你想在自己的C/C++代码中嵌入hypervolume函数，计算hypervolume( `fpli_hv`)的主要函数在文件中自带`hv.c`。将它添加到您自己的代码中的一种简单方法是将 Makefile.lib 包含到您的 Makefile 中并链接到`fpli_hv.a`. 导出的函数是："

```
double fpli_hv(double *front, int d, int n, double *ref); 
```

makefile.lib 也如下：

```
VARIANT    ?= 4

HV_SRCS    = hv.c
HV_HDRS    = hv.h
HV_OBJS    = $(HV_SRCS:.c=.o)
HV_LIB     = fpli_hv.a

$(HV_LIB): $(HV_OBJS)
    @$(RM) $@
    $(QUIET_AR)$(AR) rcs $@ $^

## Augment CFLAGS for hv.[co] objects
hv.o: CPPFLAGS += -D VARIANT=$(VARIANT)

## Dependencies:
$(HV_OBJS): $(HV_HDRS) 
```

如何在 FORTRAN makefile 中嵌入这个 C 例程？您能否帮助我，也许可以提供一个说明性的例子。我搜索了这个问题并找到了一些示例，但它们都显示了不需要操作 makefile 的简单示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:57:27.720

包括`Makefile.lib`到另一个`Makefile`应该添加一个名为的新目标`fpli_hv.a`（也将定义`HV_LIB`宏）。您应该将其作为依赖项添加到用于构建 Fortran 代码的 makefile 中的目标之一。例如：

原始`Makefile`，用于构建 Fortran 代码

```
...

myprog.exe: <list of object files>
    $(FC) -o $@ $^

... 
```

修改应该很简单：

```
...

include Makefile.lib

...

myprog.exe: <list of object files> $(HV_LIB)
    $(FC) -o $@ $^ $(HV_LIB)

... 
```

或者，如果您不打算经常更改和重新编译 C 代码，那么您可以简单地构建库，然后将类似这样的内容添加到您的 Fortran 中`Makefile`：

```
...

LIBHV = /path/to/fpli_hv.a

...

myprog.exe: <list of object files>
    $(FC) -o $@ $^ $(LIBHV) 
```

可能原始的超卷`Makefile`已经包含`Makefile.lib`，因此您应该能够通过类似于`make fpli_hv.a`超卷源代码所在的目录中的内容来构建库。

# java - 是否可以重复从通道写入和读取？

> ID：10832325
> 
> 赞同：1
> 
> 时间：2012-05-31T11:02:31.610
> 
> 标签：java, netty

我正在尝试反复从通道写入和读取，但在第二次写入尝试时失败，因为在读取第一个响应后，NioWorker 已经关闭了通道。

我用谷歌搜索了一整天，但没有找到任何线索。如何在同一个通道上进行写-读-写-读操作？

**部分 org.jboss.netty.channel.socket.nio.NioWorker 源码：**

```
private void processSelectedKeys(Set<SelectionKey> selectedKeys) throws IOException {
    for (Iterator<SelectionKey> i = selectedKeys.iterator(); i.hasNext();) {
        SelectionKey k = i.next();
        i.remove();
        try {
            int readyOps = k.readyOps();
            if ((readyOps & SelectionKey.OP_READ) != 0 || readyOps == 0) {
                if (!read(k)) {
                    // Connection already closed - no need to handle write.
                    continue;
                }
            }
            if ((readyOps & SelectionKey.OP_WRITE) != 0) {
                writeFromSelectorLoop(k);
            }
        } catch (CancelledKeyException e) {
            close(k);
        }

        if (cleanUpCancelledKeys()) {
            break; // break the loop to avoid ConcurrentModificationException
        }
    }
}

private boolean read(SelectionKey k) {
    final SocketChannel ch = (SocketChannel) k.channel();
    final NioSocketChannel channel = (NioSocketChannel) k.attachment();

    final ReceiveBufferSizePredictor predictor =
        channel.getConfig().getReceiveBufferSizePredictor();
    final int predictedRecvBufSize = predictor.nextReceiveBufferSize();

    int ret = 0;
    int readBytes = 0;
    boolean failure = true;

    ByteBuffer bb = recvBufferPool.acquire(predictedRecvBufSize);
    try {
        while ((ret = ch.read(bb)) > 0) {
            readBytes += ret;
            if (!bb.hasRemaining()) {
                break;
            }
        }
        failure = false;
    } catch (ClosedChannelException e) {
        // Can happen, and does not need a user attention.
    } catch (Throwable t) {
        fireExceptionCaught(channel, t);
    }

    if (readBytes > 0) {
        bb.flip();

        final ChannelBufferFactory bufferFactory =
            channel.getConfig().getBufferFactory();
        final ChannelBuffer buffer = bufferFactory.getBuffer(readBytes);
        buffer.setBytes(0, bb);
        buffer.writerIndex(readBytes);

        recvBufferPool.release(bb);

        // Update the predictor.
        predictor.previousReceiveBufferSize(readBytes);

        // Fire the event.
        fireMessageReceived(channel, buffer);
    } else {
        recvBufferPool.release(bb);
    }

    // NioWorker closes the channel, making it impossible to write additional messages.
    if (ret < 0 || failure) {
        k.cancel(); // Some JDK implementations run into an infinite loop without this.
        close(channel, succeededFuture(channel));
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:05:12.593

Netty 不会关闭连接，除非用户关闭它或对等方关闭它。请确保没有引发异常。

# python - “是”和“==”之间的区别

> ID：10832326
> 
> 赞同：6
> 
> 时间：2012-05-31T11:02:33.883
> 
> 标签：python

> **可能重复：**
> [“foo is None”和“foo == None”之间有什么区别吗？](https://stackoverflow.com/questions/26595/is-there-any-difference-between-foo-is-none-and-foo-none)

真的是一个很简单的问题。

有什么区别：

```
if a.b is 'something': 
```

和

```
if a.b == 'something': 
```

原谅我的无知

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T11:03:09.873

第一个检查*身份*，第二个检查是否*相等*。

例子：

使用的第一个操作`is` *可能会*或*可能不会*导致`True`这些项目（即字符串）在内存中的存储位置。

```
a='this is a very long string'
b='this is a very long string'

a is b
False 
```

检查，[id()](http://docs.python.org/library/functions.html#id)显示它们存储在不同的位置。

```
id(a)
62751232

id(b)
62664432 
```

由于字符串相等，第二个操作 ( `==`) 将给出。`True`

```
a == b
True 
```

另一个例子表明它`is`可以是`True`or `False`（与第一个例子相比），但`==`按照我们期望的方式工作：

```
'3' is '3'
True 
```

这意味着与上面示例中的两个较长字符串不同，这两个短文字都存储在同一内存位置。

```
'3' == '3'
True 
```

不出所料，这是我们所期望的。

我相信`is`使用[id()](http://docs.python.org/library/functions.html#id)来确定是否引用了内存中的相同对象（有关更多详细信息，请参阅下面的@SvenMarnach 评论）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:04:48.543

`a is b`如果`a`和`b`是*同一个对象*，则为真。它们可以比较相等，但可以是不同的对象，例如：

```
>>> a = [1, 2]
>>> b = [1, 2]
>>> c = b
>>> a is b
False
>>> a is c
False
>>> b is c
True
>>> a == b == c
True 
```

# ms-word - 如何找到某个单词的所有实例并替换为同一个单词的超链接？

> ID：10832328
> 
> 赞同：3
> 
> 时间：2012-05-31T11:02:38.287
> 
> 标签：ms-word

我想要一个宏或方法来查找和替换带有超链接的大型单词文档中的单词实例，该超链接的显示文本与原始单词相同。

示例：我将搜索“项目”并将所有实例替换为超链接 www.example.com，显示文本仍为“项目”。

我发现许多宏非常接近但不是我需要的。例如，来自此站点的宏

[如何以编程方式编辑 Word 文档中的所有超链接？](https://stackoverflow.com/questions/3355266/how-to-programmatically-edit-all-hyperlinks-in-a-word-document)

..将更改文档中的所有超链接地址及其显示文本。我想我可以使用内置的查找和替换将“项目”的所有实例更改为超链接，然后使用该宏来更改显示文本。但是，内置的查找和替换功能不会创建超链接，您必须将光标移动到未链接的文本并按空格/回车来激活它。这在大型文档中是不可行的。

说实话，如果它只改变正常的正文而不是所有的文本，那就太棒了，所以我可以保持标题和标题不变。我想这可以通过使用内置的查找和替换来仅替换普通文本，然后使用宏来添加超链接，也许。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:30:03.647

1.选择超链接并按Ctrl+C。这会将超链接复制到剪贴板。（可能需要创建 1 个超链接进行复制）

2.按 Ctrl+H 显示查找和替换对话框的替换选项卡。

3.在“查找内容”框中，输入要替换的字符串/单词。

4.在替换为框中，输入^c。

5.单击全部替换。

不是宏但有效。您可以将其记录为宏，然后您将拥有您所追求的宏。

使用格式选项仅选择要替换的格式样式。

# ruby-on-rails-3 - Rails 3 - 多态关联的唯一选择？

> ID：10832333
> 
> 赞同：0
> 
> 时间：2012-05-31T11:02:51.093
> 
> 标签：ruby-on-rails-3, build, associations, polymorphic-associations, belongs-to

我有 3 个基本模型：文章、评论和用户。目前评论嵌套在文章中，但是文章的所有评论都显示在文章显示页面上。我的“问题”是评论应该属于用户和文章。现在，在我的 comments_controller 的创建操作中，同时执行 2 个构建操作有点困难。我基本上想要的是

```
 @comment = @article.comments.build(params[:comment]) 
```

和一个

```
 @comment = @user.comments.build(params[:comment]) 
```

在我的comments_controller 的同一个创建操作中。当然，如果我没记错的话，你不能同时执行两条线。至少它不会做我想要的。

在我的评论中，我想调用评论的用户信息来获取 user_name 和他的头像。我可以在我的评论表中添加一个 user_name 列并使用

```
 @user = current_user
    @comment = @article.comments.build(params[:comment])
    @comment.user_name = @user.name 
```

但是当我想通过回形针插件显示评论的用户头像时，这有点笨拙并且变得复杂。

使用多态关联与用户和文章模型的“可评论”界面建立评论（与文章和用户）的2个关联是唯一可能的方法吗？我觉得即使这在逻辑上也不是很干净，因为用户并不是真正可评论的，而是发表评论。当然，这种缺乏逻辑对应用程序来说不是问题，但是在我看来，对于属于多个模型的评论这种相当常见的情况，是否没有其他解决方案？任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:43:25.653

评论模型应该有 article_id 和 user_id 的列。尝试在您的 form_for 中放置一个隐藏字段：

```
<%= f.hidden_field(:comment_id, :value => @comment.id) %> 
```

然后，当您调用它时，`@comment = current_user.comments.build(params[:comment])`它应该被传递。然后你就可以打电话了`@comment.user.user_name`。

# java - 使用 java 在 google 电子表格上上传数据

> ID：10832336
> 
> 赞同：0
> 
> 时间：2012-05-31T11:03:10.587
> 
> 标签：java, gdata, google-sheets

我正在寻找一种使用 Atom 技术将数据上传到谷歌电子表格的方法。谁能指导我该怎么做？我想制作一个基于核心 Java 的解决方案。到目前为止，我已经想出了使用 ListEntry 输入数据的方法，但是使用 Atom 我不知道该怎么办？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:30:47.847

[在https://developers.google.com/google-apps/spreadsheets](https://developers.google.com/google-apps/spreadsheets)查看更新的电子表格 API 文档，所有示例都包含一个协议选项卡，描述要发送以执行该任务的原始 XML 请求。

# java - Java“对象”到“？”

> ID：10832339
> 
> 赞同：1
> 
> 时间：2012-05-31T11:03:23.723
> 
> 标签：java, generics

我试图更改通用地图

```
private final Map<String, Object> dataObject; 
```

到

```
private final Map<String, ?> dataObject; 
```

吸气剂从

```
public Map<String, Object> getDataObject() {
  return dataObject;
} 
```

到

```
public Map<String, ?> getDataObject() {
  return dataObject;
} 
```

但二传手：

```
public void addDataObject(final String key, final Object value) {
  dataObject.put(key, value);
} 
```

不能毫无错误地配置任何想法？还是我在尝试使用“？”时做错了？通用的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:12:53.253

参数化你的类而不是使用通配符：

```
class Container<T> {
  private final Map<String, T> dataObject;

  public Map<String, T> getDataObject() {
    return dataObject;
  }

  public void addDataObject(final String key, final T value) {
    dataObject.put(key, value);
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:07:15.680

如果地图实际上是一个，`Map<String,String>`那么你可以打电话`addDataObject("key", Integer.valueOf(1972))`，那会很糟糕。所以`dataObject`必须保持原样。您可以更改`getDataObject`，但这可能无济于事，并且让客户端代码不得不处理通常不受欢迎的通配符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T11:27:49.200

您已经在 dataObject 之前放置了 final 修饰符..您如何使用 set 方法更改 final 变量的值？？？？（不可能违反 final 的定义）。

你可以像这样改变你的代码 -

```
private final Map<String, ? super Object> dataObject=null; 
```

# c - 如何找到循环安装设备的文件？

> ID：10832350
> 
> 赞同：2
> 
> 时间：2012-05-31T11:04:20.013
> 
> 标签：c, linux, mount, ioctl, mount-point

问题：

如果我循环挂载一个文件，像这样

```
mount /volumes/jfs.dsk /mnt/jfs -t jfs -o loop 
```

那么幕后发生的事情是

```
losetup /dev/loop1 /volumes/jfs.dsk
mount /dev/loop1 /mnt/jfs -t jfs -o loop 
```

我现在的问题：
如果我有 /dev/loop1，我怎样才能找到这个设备属于哪个文件？
例如，给定“/dev/loop1”作为输入，我怎样才能找回 /volumes/jfs.dsk ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:34:17.750

我想打电话：

```
strace losetup /dev/loop1 
```

然后谷歌搜索会给你答案。

根据我在 PC 上看到的情况，调用了回送设备 ioctl 0x4c05 的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:03:05.983

来自[losttup(8)](http://linuxcommand.org/man_pages/losetup8.html)手册页

> 如果仅给出 loopdev 参数，则显示相应循环设备的状态。

所以你只需要使用

```
$ losetup /dev/loop1
/dev/loop1: [0802]:4751362 (/volumes/jfs.dsk) 
```

如果您有最新的内核（2.6.37 或更高版本），您还可以在`/sys/block/loopX/loop/backing_file`.

```
$ cat /sys/block/loop1/loop/backing_file
/volumes/jfs.dsk 
```

如果你想这样做有问题（你没有明确指出，但你已经添加了`c`标签），你应该使用 LOOP_GET_STATUS 或 LOOP_GET_STATUS64 ioctl 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T07:20:43.647

由于没有人知道具体答案，我在这里回答以供其他人参考：

```
public static string loopfile_from_sysfs(string device)
{
    string res = null;
    Mono.Unix.Native.Stat st;
    System.IntPtr f;

    //if (stat(device, &st) || !S_ISBLK(st.st_mode))
    //if (System.Convert.ToBoolean(Mono.Unix.Native.Syscall.stat(device, out st)) || !S_ISBLK((int) st.st_mode))
    //  return null;

    Mono.Unix.Native.Syscall.stat(device, out st);

    const string _PATH_SYS_DEVBLOCK = "/sys/dev/block";
    string strPath = string.Format("{0}/{1}:{2}/loop/backing_file", _PATH_SYS_DEVBLOCK, gnu_dev_major(st.st_rdev), gnu_dev_minor(st.st_rdev));

    f = Mono.Unix.Native.Syscall.fopen(strPath, "r");
    if (f == IntPtr.Zero)
        return null;

    Mono.Unix.Native.Syscall.fclose(f);

    res = System.IO.File.ReadAllText(strPath);
    strPath = null;
    return res;
} // End Function loopfile_from_sysfs

public static string loopdev_get_loopfile(string device)
{
    string res = loopfile_from_sysfs(device);

    if (res == null)
    {
        loop_info lo = new loop_info();
        loop_info64 lo64 = new loop_info64();

        int fd;

        if ((fd = Mono.Unix.Native.Syscall.open(device, Mono.Unix.Native.OpenFlags.O_RDONLY)) < 0)
            return null;

        if (UnsafeNativeMethods.ioctl(fd, LOOP_GET_STATUS64, ref lo64) == 0)
        {
            //lo64.lo_file_name[LO_NAME_SIZE-2] = '*';
            //lo64.lo_file_name[LO_NAME_SIZE-1] = 0;
            //res = strdup((char *) lo64.lo_file_name);
            res = lo64.lo_file_name;
            Console.WriteLine("LOOP_GET_STATUS64");

        }
        else if (UnsafeNativeMethods.ioctl(fd, LOOP_GET_STATUS, ref lo) == 0)
        {
            //lo.lo_name[LO_NAME_SIZE-2] = '*';
            //lo.lo_name[LO_NAME_SIZE-1] = 0;
            //res = strdup((char *) lo.lo_name);
            res = lo.lo_name;
            Console.WriteLine("LOOP_GET_STATUS");
        }

        Mono.Unix.Native.Syscall.close(fd);
    } // End if (res == null)

    return res;
} // End Function loopdev_get_loopfile 
```

这是 C 版本：

```
static char *loopfile_from_sysfs(const char *device)
{
    FILE *f;
    struct stat st;
    char buf[PATH_MAX], *res = NULL;
    // PATH_MAX: 4096

    if (stat(device, &st) || !S_ISBLK(st.st_mode))
        return NULL;

    #define _PATH_SYS_DEVBLOCK "/sys/dev/block"
    snprintf(buf, sizeof(buf), _PATH_SYS_DEVBLOCK "/%d:%d/loop/backing_file",
            major(st.st_rdev), minor(st.st_rdev));

    f = fopen(buf, "r");
    if (!f)
        return NULL;

    if (fgets(buf, sizeof(buf), f)) {
        size_t sz = strlen(buf);
        if (sz) {
            buf[sz - 1] = '\0';
            res = strdup(buf);
        }
    }

    fclose(f);

    printf("loopfile_from_sysfs Result: %s\n", res);
    return res;
}

char *loopdev_get_loopfile(const char *device)
{
    char *res = loopfile_from_sysfs(device);

    if (!res) {
        struct loop_info lo;
        struct loop_info64 lo64;
        int fd;

        if ((fd = open(device, O_RDONLY)) < 0)
            return NULL;

        if (ioctl(fd, LOOP_GET_STATUS64, &lo64) == 0) {
            lo64.lo_file_name[LO_NAME_SIZE-2] = '*';
            lo64.lo_file_name[LO_NAME_SIZE-1] = 0;
            res = strdup((char *) lo64.lo_file_name);
            printf("LOOP_GET_STATUS64\n");

        } else if (ioctl(fd, LOOP_GET_STATUS, &lo) == 0) {
            lo.lo_name[LO_NAME_SIZE-2] = '*';
            lo.lo_name[LO_NAME_SIZE-1] = 0;
            res = strdup((char *) lo.lo_name);
            printf("LOOP_GET_STATUS\n");
        }
        close(fd);
    }
    return res;
} 
```

# android - 如何在 sql 数据库中插入字符串？

> ID：10832359
> 
> 赞同：-1
> 
> 时间：2012-05-31T11:04:45.940
> 
> 标签：android, sql, database, image

我有一个存储在字符串中的图像路径：

```
if(uri != null) {
              Cursor cursor = getContentResolver().query(uri, new String[] {   
                                       android.provider.MediaStore.Images.ImageColumns.DATA}, 
                                       null, null, null);
                    cursor.moveToFirst();
                    String image = cursor.getString(0);             
                    cursor.close(); 
```

如何将此字符串插入/检索到该数据库中/从该数据库中检索？

```
private static final String DATABASE_CREATE =
    "create table " + DATABASE_TABLE + " ("
            + KEY_ROWID + " integer primary key autoincrement, "
            + KEY_IMAGE + " text not null)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:13:33.400

你应该使用`ContentValues`实例和`insert()`方法`SQLiteDatabase`。

```
ContentValues cv = new ContentValues();
cv.put(<column>, <data>);   
cv.put(<column>, <data>);
cv.put(<column>, <data>);       
db.insert(<tableName>, <columnHackNull>, cv); 
```

这种方式一般推荐且干净。

**编辑：**

对于从数据库中检索数据，基本示例：

```
String SELECT_QUERY = "SELECT * FROM Table";
Cursor c = db.rawQuery(SELECT_QUERY , null); 
```

或使用 whereArgs

```
String SELECT_QUERY = "SELECT * FROM Table WHERE id = ?";
String[] whereArgs = {"<data>","<data>"};
Cursor c = db.rawQuery(SELECT_QUERY , whereArgs ); 
```

# c# - 使用正则表达式从字符串中提取多个数字

> ID：10832361
> 
> 赞同：8
> 
> 时间：2012-05-31T11:04:48.163
> 
> 标签：c#, .net, regex

我有一个包含两个或更多数字的字符串。这里有一些例子：

```
"(1920x1080)"
" 1920 by 1080"
"16 : 9" 
```

我如何从中提取**单独**的数字，如“1920”和“1080”，假设它们将被一个或多个非数字字符分隔？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T11:07:57.223

基本的正则表达式是：

```
[0-9]+ 
```

您将需要使用该库来查看所有匹配项并获取它们的值。

```
var matches = Regex.Matches(myString, "[0-9]+");

foreach(var march in matches)
{
   // match.Value will contain one of the matches
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T11:11:23.737

您可以通过以下方式获取字符串

```
MatchCollection v = Regex.Matches(input, "[0-9]+");
foreach (Match s in v)
            {
                // output is s.Value
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:07:47.437

```
(\d+)\D+(\d+) 
```

之后，自定义此正则表达式以匹配您将使用的语言的风格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:09:47.353

您可以使用

```
string[] input = {"(1920x1080)"," 1920 by 1080","16 : 9"};
foreach (var item in input)
{
    var numbers = Regex.Split(item, @"\D+").Where(s => s != String.Empty).ToArray();
    Console.WriteLine("{0},{1}", numbers[0], numbers[1]);
} 
```

输出：

```
1920,1080
1920,1080
16,9 
```

# jquery - jQuery移动表格行 - 漂亮的效果

> ID：10832363
> 
> 赞同：3
> 
> 时间：2012-05-31T11:04:48.937
> 
> 标签：jquery, animation, jquery-plugins

我正在开发一个简单的建议投票系统，用户可以在其中 +1 或 -1 建议（以类似于堆栈溢出率问题的方式）。

这些建议呈现在一个长表中，+1 或 -1 是通过 ajax 完成的，因为该表按项目的投票数量排序，当一个为 +1 或 -1 时，表失去了它的顺序。

我知道我可以使用表格排序器 jQuery 插件来解决这个问题，但它很容易丢失你 +-'d 的项目，你知道如何在跟随它的同时将行向上/向下移动吗？（也许类似于在 iPhone 上进行订购的方式？）带有流畅的动画？

谢谢你的时间，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-04T21:24:49.370

我设法使用一些图书馆解决了这个问题，并使它看起来相当不错。实际上发生的是在后台制作了一个重复的表格，然后应用了动画并交换了两个表格。

请参阅[http://jsfiddle.net/NP4t3/1/](http://jsfiddle.net/NP4t3/1/)并投票赞成或反对！

它基于[http://www.scottlogic.co.uk/2011/01/animating-html-ranking-tables-with-javascript/](http://www.scottlogic.co.uk/2011/01/animating-html-ranking-tables-with-javascript/)的工作，然后我添加了自动排序！

所有代码都在小提琴中（包括图书馆的），希望这对某人有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:39:54.910

我不知道有任何插件可以做到这一点。不过你可以自己写一个。我会采取以下方法：

*   创建一个具有可识别行的表。
*   在绝对定位的 div 中创建第二个隐藏表。
*   当您想移动一行时，将其与主表分离（也许您想保留一份副本或空行作为占位符）并将其添加到您现在可以显示的第二个表并将其飞到所需的目的地并将其从临时表添加回主表。

哦，stackoverflow上有一个问题：[在可排序的UI中制作表格行动画向上移动](https://stackoverflow.com/questions/3997238/making-a-table-row-animate-upward-movement-in-sortable-ui)

我认为这应该让你开始

# bash - bash 等待打开完成

> ID：10832367
> 
> 赞同：0
> 
> 时间：2012-05-31T11:05:13.340
> 
> 标签：bash

[我只是在这里](https://stackoverflow.com/questions/10830314/bash-using-a-file-name-as-input)问了一个问题，这让我想到了另一个问题。是否可以从 bash 命令打开的任何编辑器中获取退出代码

```
open -t ... 
```

如果我可以在用户退出文本编辑器后执行某个操作（并且还可以确定他们是否在文档打开时保存了文档），那就太好了。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:21:39.500

您真的想要退出代码，还是只是确认用户已退出文本编辑器？该`-W`选项会导致`open`等到编辑器退出后再自行退出。美元的价值？我怀疑是 的退出代码`open`，而不是编辑器。由于编辑器可能是 的子进程`launchd`，而不是您的 shell，因此我不确定您如何检索编辑器的退出代码。

# php - 如何将此数组转换为下面的数组

> ID：10832370
> 
> 赞同：-3
> 
> 时间：2012-05-31T11:05:22.323
> 
> 标签：php, arrays, multidimensional-array

我试图在加入两个 sql 表后检索记录。结果数组如下：

```
Array
(
[0] => Array
    (
        [optionId] => 150
        [price] => 2.00
        [name] => 1 Ice
        [languageId] => 4
    )

[1] => Array
    (
        [optionId] => 150
        [price] => 2.00
        [name] => Ek Burph
        [languageId] => 1
    )

[2] => Array
    (
        [optionId] => 151
        [price] => 5.00
        [name] => 2 Ice
        [languageId] => 4
    )

[3] => Array
    (
        [optionId] => 151
        [price] => 5.00
        [name] => Do Burph
        [languageId] => 1
    )

) 
```

我想将此数组转换为以下格式，以便在我的应用程序中轻松解析。

```
Array
(
[0] => Array
    (
        [optionId] => 150
        [price] => 2.00
        [languages]=>array(
           [0]=>array(
              [name] => 1 Ice
              [languageId] => 4
           )
           [1]=>array(
              [name] => Ek Burph
              [languageId] => 1
           )
        )
    )

[1] => Array
    (
        [optionId] => 151
        [price] => 5.00
        [languages]=>array(
           [0]=>array(
              [name] => 2 Ice
              [languageId] => 4
           )
           [1]=>array(
              [name] => Do Burph
              [languageId] => 1
           )
        )
    )

) 
```

IE。我需要在 PHP 中对属于同一 optionId 的项目进行分组，但无法弄清楚如何。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:15:49.497

自己搞定了：

```
 $array2 = array();
    $f = 0;
    if($array1){
        foreach($array1 as $option){
            $i = 0;
            foreach($array2 as $option2){
                if($option2['optionId'] == $option['optionId']){
                    $array2[$i]['language'][] = array('name'=>$option['name'],'languageId'=>$option['languageId']) ;
                    $f = 1;
                }
                $i++;
            }

            if(!$f){
                $array2[$i]['optionId'] = $option['optionId'];
                $array2[$i]['price'] = $option['price'];
                $array2[$i]['language'][] = array('name'=>$option['name'],'languageId'=>$option['languageId']);
            }

            $f = 0;
        }
    } 
```

# php - jQuery textchanged 绑定发生在不相关的按键上

> ID：10832371
> 
> 赞同：0
> 
> 时间：2012-05-31T11:05:22.667
> 
> 标签：php, jquery, api, text

这是我的代码：

```
var tourl;
$(document).ready(function(){
    $("input#url").bind("textchange",showPage);
    $("input#url").bind("textchange",toggleButtons);
    $("input#url").focus();

    $("form#surlform").submit(function(){
        var url = $("input#url").val(); 
        $.get("api/create.php?a=&url=" + url, function(data) {
                $("input#url").val(data);
                $("input#url").select();
                $('#button').hide();
                $('#hbutton').show();
                tourl = data;
                $('#hbutton').bind('click', function() {
                    window.location = tourl + "-";
                });
            });

        return false;
    });
    });

$(document).click(function(){
    showPage();
});
$(document).mousemove(function(){
    showPage();
});
function toggleButtons() {
    $('#hbutton').hide();
    $('#button').show();
} 
```

正如你所看到的，数据被输入到表单中，jQuery 停止了正常的表单提交，而是联系了一个 API。在来自 API 的响应中，它将文本框文本更改为响应并突出显示它。然后它将提交按钮更改为链接到 API 输出的按钮（它是一个 URL）。我正在使用绑定到 textchange 事件，然后在更改表单字段中的文本时将按钮更改回来。

但是，它不会在字段中的文本实际更改时触发，而是似乎在任何按键上。例如，如果我想复制输出，我会使用 Ctrl+C 来执行此操作，但是当我这样做时，它会将其计为正在更改的文本并将按钮更改回来。

有没有什么办法可以只在框中的文本实际更改*时才触发？*

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:20:24.460

而不是使用`textchange`事件，我会使用`change`事件（并且不明白为什么使用`bind`......）：

```
$(document).ready(function(){
    $("input#url").change(function(){
        showPage();
        toggleButtons();
    });
    $("input#url").focus();
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:50:34.683

将最后的文本保存到 var 中并与实际文本进行比较，如下所示：

```
var lastText = jQuery('parentElement element').val();
jQuery('parentElement').on('keyup', 'element', function() {
    if(jQuery(this).val() !== lastText) {
        // do what do you want
    }

    lastText = jQuery(this).val();
}); 
```

**[演示](http://jsfiddle.net/2fMWh/3/)**

# jquery - Joomla 中的 Dom 元素删除导致提交按钮不起作用。但是单击任何其他按钮会提交表单

> ID：10832372
> 
> 赞同：0
> 
> 时间：2012-05-31T11:05:24.777
> 
> 标签：jquery, dom, memory-leaks, joomla, formfield

我正在创建一个自定义 Joomla 2.5 表单域。这旨在显示在 Joomla 的管理员面板中。
该字段允许用户添加任意​​数量的选项。每个选项都由用户在单独的文本框中输入。每个文本框都是在单击`(+)`按钮时动态创建的（使用 jQuery）

`jQuery(lihtml).insertBefore( jQuery(plusbutton).closest('li') );`

`lihtml`要插入的 html 代码 在哪里。

用户还可以通过单击`(-)`按钮删除任何现有选项

`jQuery(minusbutton).closest('li').remove();`

这些所有功能都可以正常工作，尽管在**删除**一个选项后，如果我们**添加**一些其他选项，那么一切都会很好。但是以下顺序会导致问题：

`REMOVE-OPTION -> SAVE`选项已删除，但保存不起作用
`REMOVE-OPTION -> SAVE -> ADD-OPTION`表单已提交，因此单击按钮时会调用保存方法。

我知道有一些冲突，可能与 DOM 或 jQuery 内存泄漏有关，但不确定。

我可以看到该`save`按钮更新了`task`字段（*隐藏*），但只有在单击按钮`customfield.apply`后才会调用实际提交。`(+)`

`NOTE:`除了保存之外，同样的情况也适用于 Joomla 中的任何工具栏按钮，例如另存为新、取消等。

# python - python字典匹配两个字典中的键值

> ID：10832373
> 
> 赞同：8
> 
> 时间：2012-05-31T11:05:25.623
> 
> 标签：python

在下面显示的字典中，我想检查 aa 中的键是否与 bb 中的键匹配，以及与之对应的值是否与 bb 中的匹配。是否有更好的方法来编写此代码

```
 aa = {'a': 1, 'c': 3, 'b': 2}
  bb = {'a': 1, 'b': 2}

  for k in aa:
    if k in bb:
      if aa[k] == bb[k]:
         print "Key and value bot matches in aa and bb" 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-31T11:08:15.750

使用集合查找所有等价物：

```
for (key, value) in set(aa.items()) & set(bb.items()):
    print '%s: %s is present in both aa and bb' % (key, value) 
```

这里的`&`运算符为您提供两组的[交集](http://docs.python.org/library/stdtypes.html#set.intersection)；或者你可以写：

```
set(aa.items()).intersection(set(bb.items())) 
```

请注意，这确实会创建两个 dicts 的完整副本，因此如果它们非常大，那么这可能不是最好的方法。

一个捷径是只测试按键：

```
for key in set(aa) & set(bb):
    if aa[key] == bb[key]:
        print '%s: %s is present in both aa and bb' % (key, value) 
```

在这里，您只需复制每个 dict 的键以减少内存占用。

使用 Python 2.7 时，dict 类型包括直接创建所需集合的[附加方法：](http://docs.python.org/library/stdtypes.html#dict.viewitems)

```
for (key, value) in aa.viewitems() & bb.viewitems():
    print '%s: %s is present in both aa and bb' % (key, value) 
```

这些在技术上是[字典视图](http://docs.python.org/library/stdtypes.html#dictionary-view-objects)，但出于此问题的目的，它们的作用相同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T11:10:50.317

这可以写成单行`all`：

```
all(bb[k] == v for k, v in aa.iteritems() if k in bb) 
```

它也是更具声明性的方法，可以更好地传达意图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:11:24.720

如果要遍历所有匹配的键/值对，可以使用

```
for key, value in aa.viewitems() & bb.viewitems():
    ... 
```

(Python 2.7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-19T08:01:50.753

```
aa = {'a': 1, 'c': 3, 'b': 2}
bb = {'a': 1, 'b': 2}

[k for k,v in aa.items() if k in bb]

['a', 'b'] 
```

蟒蛇 3

# django - 提交 Django-Form 后如何将数据渲染到另一个模板？

> ID：10832378
> 
> 赞同：3
> 
> 时间：2012-05-31T11:05:53.903
> 
> 标签：django, django-forms, django-templates, django-views

我想做以下事情：

*   用户将打开一个页面`network_form.html`，即填写包含两个字段的表单（参见 form.py）*   提交该表格后。服务器将根据这两个字段进行计算，并将计算的数据渲染到另一个页面，即`subnet_network.html`

看看from.py：

```
 class SubnetCreateFrom(forms.Form):
     Subnet_Address = forms.CharField(max_length=40)
     IP_Address = forms.CharField(max_length=40) 
```

现在我想提交这些表单字段并希望在这些字段的基础上处理一些查询。所以，我写了以下 vies.py：

```
 def subnet_network(request):
   if request.method == 'POST':
      form = SubnetCreateFrom(request.POST)
      if form.is_valid():
         subnet = form.data['Subnet_Address']
         ip = form.data['IP_Address']
         # Here i am manipulating the data using the above subnet and ip fields and pass the data in the form of parameter to the follwing method. i.e. get_host_list
         subnet_network_detail(request,get_hosts_list) #[1]
         return HttpResponseRedirect('../../list/')
 extra_context = {
     'form': SubnetCreateFrom(initial={'user': request.user.pk})
 }
 return direct_to_template(request, 'networks/network_form.html',
                          extra_context) 
```

模板network_form.html：

```
 <form action="" method="POST">
        {{ form.as_p }}
    <input type="submit" value="{% trans "Show Host" %}"/>
  </form> 
```

当用户在单击提交按钮后填写表单时。Ot 应该打开一个显示处理数据的新页面，即`get_host_list`. 这就是为什么我从上面定义的 subnet_network 方法的中间调用了一个 subnet_network_detail 方法，以便我们可以将该数据渲染到下一个模板。这是正确的方法吗？

subnet_network_detail 的定义如下：（也在同一个views.py中）

```
 def subnet_network_detail(request,list_hosts):
    extra_context = {
       'subnet_hosts': list_hosts
       }#[2]
    return direct_to_template(request, 'networks/subnet_network.html',
                           extra_context) 
```

上述方法的 URL 模式如下：

```
url(r'^myapp/netmask/create/$',
    'subnet_network', name='subnet_network'),
url(r'^myapp/netmask/select/$',
    'subnet_network_detail', name='subnet_network_detail') 
```

URL 模式是否有问题。为什么我无法呈现从`SubnetCreateForm`另一个模板访问的数据，即`subnet_network.html`. 这是调用该方法或将数据呈现到模板的正确方法吗？

当我检查 pdb 将其放在不同的不同位置时，会发生以下事情：

```
[1] I used the python debugger at this position and it shows an error i.e. subnet_network_detail receiving one parameter and you are passing it two

[2] After removing the pdb syntax from [1] and putting at this position i check whether the data is passing to this function or not and it was. I am getting the data what i want in list_hosts variable 

And also after removing the pdb syntax from [2] position it redirect to the page what we have written in HttpResponseRedirect in the first method 
```

# jquery - 使用 'find' 和选择器和过滤器 ':not' 和一些选择器

> ID：10832385
> 
> 赞同：0
> 
> 时间：2012-05-31T11:06:29.577
> 
> 标签：jquery, filter, find

有人知道吗？或者可以告诉我在哪里失踪？

该指令有效（过滤器中只有一个选择`:not`器）

IE：

```
$('#menuStato > li > a').find('+ ul > li:not(.toggleMenuActions)') 
```

当我使用 :not 过滤器时，内部有两个或多个类选择器，由一个以查找函数`','`开头的选择器分隔`'+'`

结果是一个空数组

IE：

```
$('#menuStato > li > a').find('+ ul > li:not(.toggleMenuActions, .toggleMenuFooter, .nascosto)') 
```

像下面这样写的相同指令有效......（我只是将`' > a '`第一个括号移到第二个括号

IE：

```
$('#menuStato > li').find(' > a + ul > li:not(.toggleMenuActions, .toggleMenuFooter, .nascosto)') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:18:17.453

`find`应该检索*后代*元素，而在您的第一个选择器中

```
$('#menuStato > li > a').find('+ ul..) 
```

你正在寻找一个*兄弟*元素（这就是为什么你的最后一个语句

```
$('#menuStato > li').find(' > a...) 
```

正常工作）

问候，法布里齐奥。

# sql - AS WELL 对基于一组的值求和？

> ID：10832387
> 
> 赞同：0
> 
> 时间：2012-05-31T11:06:31.517
> 
> 标签：sql, sql-server

如果我在餐桌上，说 10 列。8 列数据和 2 列（1 和 2）作为标识符。

我想为 col1 和 col2 的每种可能情况计算 8 列的“结果”。

假设 distinct(value) col1 给出 {A,B,C} 而 distinct(value) col2 给出 {D,E,F} 我想总结数据（8 列中的任何一个）GROUP'd BY：

*   广告
*   甲，乙
*   A,F
*   A,(所有 col2)
*   乙，丁
*   是
*   乙，乙
*   B,(所有 col2)
*   光盘
*   C,E
*   C,F
*   C,(所有 col2)
*   (所有 col1),(所有 col2)
*   D，（所有 col1）
*   E，（所有 col1）
*   F，（所有 col1）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:09:22.847

```
SELECT
    SUM(colx) OVER (PARTITION BY Col1)       AS [All of col1],
    SUM(colx) OVER (PARTITION BY Col2)       AS [All of col2],
    SUM(colx) OVER (PARTITION BY Col1, Col2) AS [PerCol1Col2Pair],
    SUM(colx) OVER ()                        AS [All of col1 and All of col2]
FROM
    MyTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:32:05.517

在我看来，您想要`GROUP BY CUBE()`（参见[GROUP BY (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177673.aspx)）：

```
SELECT
  col1,
  col2,
  COUNT(*) AS cnt
FROM atable
GROUP BY CUBE(col1, col2) 
```

这将产生如下结果：

```
col1 col2 cnt
---- ---- --------
广告     *x[广告]*
AE      *x [AE]*
一种 … …
BD      *x [BD]* 
BE      *x [BE]*
乙……
A NULL   *x [AD]* + *x [AE]* + ...
B 空  *x [BD]* + *x [BE]* + ...
空 D      *x [AD]* + *x [BD]* + ...
NULL E      *x [AE]* + *x [BE]* + …
…………
NULL NULL   *x [AD]* + *x [AE]* + … + *x [BD]* + *x [BE]* + …

```

# java - java中的日期和时间

> ID：10832389
> 
> 赞同：0
> 
> 时间：2012-05-31T11:06:43.707
> 
> 标签：java, date, primefaces

我正在使用 spring webflow 和 primefaces 开发一个应用程序并使用 mysql。问题是当我注册例如 15.ma 的日期时。2012\. 它在数据库中注册正确，但是当我显示它时。它显示在 2012 年 5 月 14 日之前的一天。我使用这个标签来显示日期，我相信它会给显示的日期增加 1 天。我说的另一件事是，当我调试时，我看到时间显示如下：CEST 5 月 9 日星期三 00:00:00 CEST。我相信这是在中欧夏季时区。我想知道是什么问题？

```
<p:column headerText="Submited Date">
    <h:outputText value="#{item.submitedDate}">
         <f:convertDateTime pattern="dd-MMM-yyyy" ></f:convertDateTime>
    </h:outputText>
</p:column> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T12:08:35.910

尝试添加

```
<context-param> 
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</p‌​aram-name> 
    <param-value>true</param-value> 
</context-param> 
```

对于您的 web.xml，这`param-name`是不言自明的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:17:49.720

在时区我发现了这个

此属性设置解释日期/时间信息的时区。根据 java.util.TimeZone.getTimeZone() 的 Java API 文档，该值必须是计算结果为 java.util.TimeZone 实例的值绑定表达式，或者是作为时区 ID 的字符串。

目前尚不清楚为什么日期会偏移一天。

# android - 适用于 Android 2.1 的 AdMob

> ID：10832390
> 
> 赞同：0
> 
> 时间：2012-05-31T11:06:45.253
> 
> 标签：android, admob

我正在使用 AdMob SDK 6.0.1，适用于 android 4+，但我无法让它适用于 android 2.1。有没有办法获得以前的 AdMobSDK？还是其他方式？

编辑1：

> ## 尼克：
> 
> 您的 android:targetSdkVersion 应该足够高（例如 15），例如，您的 android:minSdkVersion 可以是 7。这样它就可以与最新的 AdMobSDK 一起使用。另请参阅：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

这不起作用：

```
error: Error: String types not allowed (at 'configChanges' with value 'keyboard|keyboardHidden|orientation| screenLayout|uiMode|screenSize|smallestScreenSize'). 
```

如果我删除 screenSize 和 Smallest Screen 会出现以下错误：

```
The android:configChanges value of the com.google.ads.AdActivity must include screenSize. 
The android:configChanges value of the com.google.ads.AdActivity must include smallestScreenSize. 
```

正在运行的应用程序的问题：

![视图错误](../Images/38bb3a4be87111f403bcf8b05b17b7ca.png)

编辑：2解决方案：

> ## 安德里亚·布雷索林：
> 
> 在 Eclipse 中，转到“Project (menu)->Properties->Android”并确保选择 Android 3.2 或更高版本作为 Project Build Target（这是使编译器在编译时知道 configChanges 中的所有项目的关键）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:31:23.000

这是使 AdMob 在 Android 2.1 及更高版本上运行所需要的：

*   在您的**AndroidManifest.xml**文件集中`<uses-sdk android:minSdkVersion="7"/>`（这使您的应用可用于 Android 2.1 及更高版本的设备）
*   在 Eclipse 中，转到“ *Project (menu)->Properties->Android* ”并确保选择**Android 3.2**或更高版本作为**Project Build Target**`configChanges` （这是让编译器在编译时知道所有项目的关键）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:16:07.990

您`android:targetSdkVersion`应该足够高（例如 15），例如您`android:minSdkVersion`可以是 7。这样它就可以与最新的 AdMobSDK 一起使用。

另请参阅：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# ios - EKEvent 编辑不起作用

> ID：10832394
> 
> 赞同：1
> 
> 时间：2012-05-31T11:07:32.003
> 
> 标签：ios, uitableview, ios5, ekeventkit

我正在 iOS5 中开发 EKEvent。我可以添加、删除、列出事件，但现在的问题是当我尝试编辑现有事件时，“完成”按钮会产生问题。它不会进入 eventEditViewController: 方法。可能是什么问题？任何帮助将不胜感激。取消和删除按钮正在工作。当我编辑事件并单击“完成”时，控制台显示
`Calendar: unable to save: (null)`.

这是我尝试过的代码..

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    EKEventEditViewController* eventViewController = [[EKEventEditViewController alloc] init];
    event = [self.events objectAtIndex:indexPath.row];

    eventViewController.event = event;
    eventViewController.editViewDelegate = self;
    [self presentModalViewController: eventViewController animated:YES];
    [eventViewController release];
}

-(void)eventEditViewController:(EKEventEditViewController *)controller
         didCompleteWithAction:(EKEventEditViewAction)action {
    EKEvent *thisEvent = controller.event;
    NSError *error;
    if ([controller.event.endDate isEqualToDate:controller.event.startDate]) {
        controller.event.endDate = [controller.event.startDate dateByAddingTimeInterval:1.0]; // add one second
    }
    switch (action) {
        case EKEventEditViewActionCancelled:
            // User tapped "cancel"
            NSLog(@"Canceled");
            break;
        case EKEventEditViewActionSaved:
            NSLog(@"Saved");
            [controller.eventStore saveEvent:controller.event span: EKSpanFutureEvents error:&error];
            break;
        case EKEventEditViewActionDeleted:
            // User tapped "delete"
            NSLog(@"Deleted");
            // delete the event from event list
            [self.events removeObject:thisEvent];
            // delete the event from event store
            [self.eventStore removeEvent:thisEvent span:EKSpanThisEvent error:nil];
            // reload the tableView
            [self.tableOutlet reloadData];
            break;
        default:
                NSLog(@"Default");
            break;
    }

    [self dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T09:34:32.277

根据[文档](http://developer.apple.com/library/ios/#documentation/EventKitUI/Reference/EKEventEditViewControllerClassRef/Reference/Reference.html)，

> 事件存储
> 
> 必须在显示视图之前设置此属性。

所以，

```
eventViewController.eventStore = <your event store>;
eventViewController.editViewDelegate = self;

[self presentModalViewController: eventViewController
                        animated: YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:11:28.890

我遇到过同样的问题。问题出在我定义的地方`eventStore`- 可能当你展示`eventViewController`你甚至看不到 Calendar 属性时。

在`AppDelegate`：

```
 __eventStore = [[EKEventStore alloc] init]; 
```

在你的课上（我把这个放在`viewDidLoad`）：

```
if (self.eventStore == Nil){
    id appDelegate = (id)[[UIApplication sharedApplication] delegate]; 
    self.eventStore = [appDelegate eventStore];   
} 
```

最后`didSelectRowAtIndexPath`在你展示视图之前把它放进去

```
eventViewController.eventStore = [self eventStore]; 
```

# php - 如何在网站中制作搜索框？

> ID：10832398
> 
> 赞同：-5
> 
> 时间：2012-05-31T11:07:47.593
> 
> 标签：php, mysql, html

我设计了一个 php 语言的网站。我的网站上有一个搜索框。现在我想让它可用意味着如果用户想要搜索任何东西，他可以在那里输入并可以获得所需的结果。这是否需要使用 php 或者使用 HTML 标签很容易发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:48:08.210

## 基本搜索

网站上的大多数简单搜索不会搜索网站的结构，它们使用 MySQL 中的 LIKE 语法在相关数据库表的文本字段中查找术语。因此，如果您有一个博客，您可以让您的用户以这种方式在博客正文中进行搜索，并返回包含该术语的条目列表。通过一些巧妙的计数，您甚至可以按该术语出现的次数对该列表进行排序。

在这些情况下，当用户在搜索框中键入“taco”并按 Enter 键时，用户会被带到一个 PHP 页面，该页面在数据库上运行 LIKE 查询，并向用户显示包含 Taco 一词的博客文章。

## 真实搜索

严格来说，以上不是网站搜索。如果您的网站包含大量平面 HTML 页面和其他以某种方式不在数据库中的页面，您将需要抓取您的网站并通过搜索该数据来公开数据。[谷歌可以为你设置这个。](http://www.google.com/cse/)您还可以使用各种 3rd 方工具。但是，学习如何自己构建网络爬虫可能是一个很好的练习。

以下是生成 URL 数据库的网络爬虫的基本步骤。这个兔子洞永远延伸，所以这只是您进行有效搜索所需的最低限度。

### 数据库

您的数据库将只有一个表。该表需要这些字段：

*   （整数）ID
*   (var_char) 网址
*   （文字）文字
*   （时间戳）LastChecked

### 履带式

爬虫本身需要使用 cron 调度程序连续运行或每隔几分钟运行一次。它需要执行这些最低限度的操作：

1.  从数据库中加载具有最早 LastChecked 时间的页面。（如果数据库中没有页面，则为根页面）
2.  更新 LastChecked 时间。
3.  使用 cURL 或其他方法从页面获取 HTML。
4.  如果页面的文本内容已更改，请更新此 URL 的数据库记录。
5.  查找页面上的所有锚标记`<a href="http://www.mysite.com/taco/">Tacos!</a>`并创建所有这些 URL 的数组。
6.  修剪列表中不在您网站上的所有链接。（否则，您将抓取整个网络）
7.  如果 URL 尚未在数据库中，请添加它。收获页面的文本并同时插入。
8.  从 1 开始重复。

显然，这只会创建所有页面及其上的文本的列表，但这足以使您能够使用基本搜索中的相同技术来为您的站点创建搜索。

### 改进

您可以通过一些简单的方法改进上述爬虫。

*   在表格上添加一个“错误”字段。如果 URL 有 HTML 错误代码且没有数据，则存储该代码。您可以从搜索中排除这些内容，同时它会像一个方便的链接检查器一样工作。
*   您可以添加一个新表用于在您存储的位置进行排名：URL ID、计数和 URL 的检查状态。正常运行站点上的每个 URL 并更新此表上的计数。检查主列表中的所有 URL 后，将“计数”移动到主表中的新“排名”字段。转储排名表并重新开始。您将拥有一个不断更新的页面排名，您可以根据这些排名对结果进行排序。
*   您可以通过在每次抓取时存储整个页面内容的 MD5 哈希来收集自动“上次更改”数据，每当您重新抓取页面并且此 MD5 更改时，您可以存储新文本并向新表添加时间戳更改时间和 URL ID。使用此数据，您可以构建页面的预期更改率。然后，您可以将“偏移”字段添加到主表，并将其添加到 LastChecked 的所有时间戳。这样，您重新排序主列表以比其他页面更频繁地重新检查某些页面，因为它们更新更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:17:03.250

最简单的方法是添加谷歌（或其他搜索引擎）站点搜索。您不需要 PHP，但需要一点 HTML。

[谷歌网站搜索](http://www.google.com/cse/)

虽然 google 站点搜索是最简单的解决方案，但您也可以使用自己的 PHP 搜索解决方案或使用 3rd 方脚本，例如这个

[3rd 方搜索蜘蛛脚本](http://www.hotscripts.com/listing/zoom-search-engine-add-search-to-your-site-php/)（我自己也没有使用过它，也没有附属，它是您可能在互联网上找到的一种脚本的示例，而不是推荐）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:37:33.070

最好的事情是你应该使用谷歌搜索来实现谷歌搜索并不难。您必须提供有关您的网站的信息，并且将生成一个脚本，您必须将其放在您的 html 页面上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:12:56.500

您无法使用 HTML 标记执行此类功能。*PHP 在技术上*不是必需的（有替代方案），但在您的情况下，可能的答案是：是的，您需要使用 PHP。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-17T10:17:47.800

**这是搜索栏的 php 代码**

HOME html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn , em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, input , textarea, fieldset, legend, table, caption, tbody, tfoot, thead, tr, th, td { margin:0; 填充：0；边界：0；大纲：0；}

```
$keyword=trim($_POST["keyword"]); 

//check if the keyword is empty 

if($keyword==""){ 

echo"no keywords"; 

exit; 

} 

//With above, you can give hints to your users when they forget to enter a keyword. Now let's go through all the files or articles in your website. 

function listFiles($dir){ 

$handle=opendir($dir); 

while(false!==($file=readdir($handle))){ 

if($file!="."&&$file!=".."){ 

//if it is a directory, then continue 

if(is_dir("$dir/$file")){ 

listFiles("$dir/$file"); 

} 

else{ 

//process the searching here with the following PHP script 

} 

} 

} 

} 

//The following scripts read, process files and check whether the files contain $keyword. If $keyword is found in the file, the file address will be saved in an array-type variable. 

function listFiles($dir,$keyword,&$array){ 

$handle=opendir($dir); 

while(false!==($file=readdir($handle))){ 

if($file!="."&&$file!=".."){ 

if(is_dir("$dir/$file")){ 

listFiles("$dir/$file",$keyword,$array); 

} 

else{ 

//read file 

$data=fread(fopen("$dir/$file","r"),filesize("$dir/$file")); 

//avoid search search.php itself 

if($file!="search.php"){ 

//contain keyword? 

if(eregi("$keyword",$data)){ 

if(eregi("(.+)",$data,$m)){ 

$title=$m["1"]; 

} 

else{ 

$title="no title"; 

} 

$array[]="$dir/$file $title"; 

}

} 

} 

} 

} 

} 

//define array $array 

$array=array(); 

//execute function 

listFiles(".","php",$array); 

//echo/print search results 

foreach($array as $value){ 

list($filedir,$title)=split("[ ]",$value,"2"); 

echo "$value"."
\n"; 

}  
        ?>
hello
</body>
</html> 
```

# ruby - Ruby - 如何将单换行符更改为双换行符？

> ID：10832401
> 
> 赞同：0
> 
> 时间：2012-05-31T11:08:03.177
> 
> 标签：ruby, regex

假设我在一个名为“tao”的文件中有这个：

```
If you can talk about it, it ain't Tao. If it has a name, it's just another thing.  
Tao doesn't have a name. Names are for ordinary things. 
```

我想用红宝石打开它，并将其更改为：

```
If you can talk about it, it ain't Tao. If it has a name, it's just another thing.

Tao doesn't have a name. Names are for ordinary things. 
```

我知道如何读取文件，并将内容放入字符串（我们称之为`tao_string`），但我不确定如何将单换行符更改为双换行符。我会通过正则表达式怀疑某些东西，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:09:29.227

你可以这样做[`gsub`](http://ruby-doc.org/core-1.9.3/String.html#method-i-gsub)：

```
tao_string2 = tao_string.gsub("\n", "\n\n") 
```

或就地[`gsub!`](http://ruby-doc.org/core-1.9.3/String.html#method-i-gsub-21)：

```
tao_string.gsub!("\n", "\n\n") 
```

这将用双换行符替换字符串中的*所有*换行符。

# iphone - 如何使用 UISearchBar 作为输入附件视图？

> ID：10832402
> 
> 赞同：0
> 
> 时间：2012-05-31T11:08:02.833
> 
> 标签：iphone, objective-c, ios, uisearchbar

我正在尝试使用 UISearchBar 作为输入附件视图，以便它可以与键盘一起动画呈现，我的第一个解决方案是，

1.  创建一个新类 MySearchBar，它扩展 UISearchBar 并实现 UIResponder 的 inputAccessoryView 属性。
2.  在我的视图控制器中，我创建了一个名为 mySearchBar 的新 MySearchBar 实例，**并将其 inputAccessoryView 设置为它自己**（这会创建循环引用，但我有代码可以打破它）。
3.  每次我想显示搜索栏时，我首先将它添加到控制器的视图中，然后调用它的 becomeFirstResponser 方法。
4.  键盘出现后，调用 [[mySearchBar inputAccessoryView] becomeFirstResponser]。

这在我的带有 iOS 4.3 的 iPhone 4 上运行良好。但是，在 iPhone 5.0 模拟器上，只有在我点击搜索栏后才会显示键盘（见下图）。

![](../Images/0487a28941d08304a5d1c44141b6413a.png)

然后我尝试我的第二个解决方案，

1.  创建一个名为 MyTextField 的新类，它扩展 UITextField，在实现中创建一个 UISearchBar 并将其用作 MyTextField 的输入附件视图。
2.  在我的视图控制器类中，我将一个虚拟 MyTextField 添加到视图层次结构中。
3.  每次我想显示搜索栏时，我只需调用 [myTextField becomeFirstResponser]。
4.  键盘出现后，调用 [[myTextField inputAccessoryView] becomeFirstResponser]。

使用此解决方案，我可以毫无问题地显示键盘，并专注于输入附件视图（搜索栏），但是，当搜索栏被聚焦时，我无法输入任何文本。

有谁知道出了什么问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:25:19.293

我在将 UISearchBar 设置为其自己的输入附件视图时遇到了类似的问题。第一次点击 - 栏会移动，第二次点击 - 键盘显示。关闭键盘完全从屏幕上移除了该栏。我的解决方案是手动响应键盘显示和隐藏通知，并取消输入附件。然后我会相应地为栏设置动画。如果您的搜索栏不像我的那样位于底部，您将不得不根据您的需要定制动画。我希望这是有帮助的！

在 viewDidLoad 中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

其他方法：

```
- (NSTimeInterval)keyboardAnimationDurationForNotification:(NSNotification*)notification {    
    NSDictionary* info = [notification userInfo];
    NSValue* value = [info objectForKey:UIKeyboardAnimationDurationUserInfoKey];
    NSTimeInterval duration = 0;
    [value getValue:&duration];

    return duration;
}

-(void)keyboardWillShow:(NSNotification*)n {

    CGRect frame = CGRectMake(self.mSearchBar.frame.origin.x, self.mSearchBar.frame.origin.y - 216, self.mSearchBar.frame.size.width, self.mSearchBar.frame.size.height);

    [UIView animateWithDuration:[self keyboardAnimationDurationForNotification:n] delay:0 options:UIViewAnimationOptionLayoutSubviews animations:^{
    self.mSearchBar.frame = frame;
    } completion:nil];
}

-(void)keyboardWillHide:(NSNotification*)n {
    CGRect frame = CGRectMake(self.mSearchBar.frame.origin.x, self.mSearchBar.frame.origin.y + 216, self.mSearchBar.frame.size.width, self.mSearchBar.frame.size.height);

    [UIView animateWithDuration:[self keyboardAnimationDurationForNotification:n] delay:0 options:UIViewAnimationOptionLayoutSubviews animations:^{
    self.mSearchBar.frame = frame;
    } completion:nil];
} 
```

完成后移除观察者是个好主意（可能在 viewDidUnload 中）：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

# json - 如何发布表单然后处理 jsonp 响应？

> ID：10832409
> 
> 赞同：0
> 
> 时间：2012-05-31T11:08:22.223
> 
> 标签：json, jquery, jsonp

我对如何处理这个问题感到非常困惑。我在这个论坛上阅读了很多关于使用 jQuery.ajax 和 jQuery.post 将表单作为 JSON 和 JSONP“发布”的帖子。但是，我使用接受常规表单 POST 并返回 JSONP 响应的网络服务。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:13:54.627

定义的 JSONP，例如，在[Wikipedia](http://en.wikipedia.org/wiki/JSONP)上只支持获取请求。因此，不可能使用 POST 请求作为一种使用 JSONP 检索跨域 JSON 数据的技术。

# solr - 如何让 Solr/Lucene 忽略空间？

> ID：10832410
> 
> 赞同：1
> 
> 时间：2012-05-31T11:08:24.253
> 
> 标签：solr, full-text-search, search-engine, lucene

如何让 Solr/Lucene 忽略空间？我想要实现的是让搜索引擎匹配搜索短语，例如，ie。仅索引“香港”时的“香港”。

据我所知，我应该使用一些文本分析器。我找不到任何描述这种方法的好资料。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:31:29.067

您可以使用 ShingleFilterFactory 创建单词组合。您需要设置 tokenSeparator="" 以删除标记之间的空间。如果您仍想搜索单个单词，您可能希望保留 outputUnigrams=true。

```
 <fieldType name="text_shingle" class="solr.TextField" positionIncrementGap="100">
   <analyzer>
      <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      <filter class="solr.ShingleFilterFactory" minShingleSize="2" maxShingleSize="2"
         outputUnigrams="true" outputUnigramsIfNoShingles="false" tokenSeparator=""/>
    </analyzer>
  </fieldType> 
```

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ShingleFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ShingleFilterFactory)

不过你需要小心。ShingleFilter 将为文档中的所有内容创建组合。例如“need to be carel”会产生“needto becareful”。. 这个例子看起来不错让我们看看这个：“Are the eaters also”将产生“arethe Theaterseatersalso”。查询“剧院”将导致误报命中。

如果您要索引短文档，例如人名，那么我当然建议使用 ShingleFilter，因为组合总是用于人名。但是，如果您正在索引文档，则需要知道您正在组合什么。在这种情况下，同义词过滤器可能更适合。您可以从字典创建组合并将它们与 SynonymFilterFactory 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:40:48.500

您的案例中的搜索条件不同。
您需要使用[solr.SynonymFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory)并将此组合定义为同义词。
查看上面链接中的示例。
这将使您能够同时搜索 hong kong 和 hongkong 并仍然得到结果。

通常[WordDelimiterFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)将用于没有空格的组合。
它用于诸如更改大小写或字母数字组合之类的情况，您希望使用任何组合进行搜索。

例如
，Wi-fi 应该可以通过 wifi、wifi、wi fi 等搜索 ....
iPhone 应该可以搜索为 iphone、iPhone、i phone 等...
j2se 可以通过 j2se、j 2 se 等搜索...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:41:32.693

你必须知道这些空格什么时候相关，所以你有单词列表，你应该使用同义词......参见[SynonymFilterFactory的文档](http://lucene.apache.org/solr/api/org/apache/solr/analysis/SynonymFilterFactory.html)

# php - MySql/php utf8 似乎无法正常工作

> ID：10832412
> 
> 赞同：2
> 
> 时间：2012-05-31T11:08:28.947
> 
> 标签：php, mysql, utf-8

所以我有一个具有相同字段的“utf8_general_ci”表。

我无法输入任何 utf8 字符，它们都显示为 '????' ，然后我将表更改为“MyISAM”，现在我可以从 PhpMyAdmin 插入 utf8 数据（第一次发生这种情况）。

但它仍然无法从 PHP 端工作。当我插入'āāā'时它显示为'???'，但奇怪的是如果我插入'žžžēēē'它显示为'žžž???' 所以一些 utf8 字符有效吗？PHP 文件是 UTF-8

```
CREATE TABLE IF NOT EXISTS `company` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARACTER SET=utf8 COLLATE=utf8_general_ci AUTO_INCREMENT=5 ;

$dbConnection = mysql_connect("localhost","*****","*****");
mysql_query("SET NAMES 'utf8'", $dbConnection);
mysql_query("SET CHARACTER SET 'utf8'", $dbConnection);
mysql_select_db('cherrysystem', $dbConnection);
mysql_query("INSERT INTO `company` (`title`) VALUES ('āāčč')",$dbConnection); 
```

**解决**

好的，所以我的问题是我必须将 MySql ini 文件设置为使用 utf8。默认情况下，它是别的东西，我使用的是 Wamp 服务器，它总是在没有额外配置的情况下工作，但在这种情况下不是。

```
 character-set-server=utf8
 collation-server=utf8_general_ci 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:14:18.830

显然，您处理数据的方式不是“Unicode”。

以下是我最常见的 7 名嫌疑人：

*   包含代码的 PHP 文件本身不是 UTF-8
*   数据库连接必须符合 Unicode ( *SET NAMES 'utf8'* )
*   如果从非 unicode 源导入，则插入的数据必须是**utf8 编码，例如**
*   检查用于存储数据的表**和列**
*   用于显示数据的 HTML 文件不是 UTF（与第 1 点相同）
*   声明的 HTML 字符集`meta tags`也必须是 utf-8
*   ...没有第 7 点（也许在评论中）

希望这可以帮助！

# android - 大文件不会从我的 android 应用程序上传到服务器

> ID：10832415
> 
> 赞同：0
> 
> 时间：2012-05-31T11:08:37.880
> 
> 标签：android, file-upload

私人无效doFileUpload（字符串现有文件名）{

```
 System.out.println("exsistingFileName: " + exsistingFileName);

    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";

    int bytesRead, bytesAvailable, bufferSize;

    byte[] buffer;

    int maxBufferSize = 1 * 1024 * 1024;

    String urlString = "SERVER_URL+"/uploadpic2.php";

    try {
        System.out.println("exsistingFileName: " + exsistingFileName);
        FileInputStream fileInputStream = new FileInputStream(new File(
                exsistingFileName));
        URL url = new URL(urlString);
        conn = (HttpURLConnection) url.openConnection();
        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        /*conn.setReadTimeout(TIMEOUT_CONNECTION);
        conn.setConnectTimeout(TIMEOUT_SOCKET);*/
        // conn.setChunkedStreamingMode(1024);
        conn.setFixedLengthStreamingMode(fileInputStream.available() + 89
                + exsistingFileName.length());
        conn.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);
        dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        System.out.println("exsistingFileName: " + exsistingFileName);
        dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                + exsistingFileName + "\"" + lineEnd);
        dos.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);

        buffer = new byte[bufferSize];

        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        try {
            while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);

                System.out.println("MAX BUFFER SIZE IS : " + maxBufferSize);
                System.out
                        .println("BYTES AVAILABLE IS : " + bytesAvailable);
                System.out.println("BUFFER SIZE IS : " + bufferSize);

                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
        } catch (Exception e) {

            System.out.println("OUT OF MEMORY ERROR");
        }

        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        try {
            inStream = new DataInputStream(conn.getInputStream());
            String str;

            while ((str = inStream.readLine()) != null) {
                Log.e("Error: ", "Server Response" + str);
            }
            inStream.close();

            // Toast.makeText(this, "File Uploaded Successfully",
            // Toast.LENGTH_LONG).show();

        } catch (IOException ioex) {
            Log.e("Error: ", "error: " + ioex.getMessage(), ioex);
        }
        try {
            fileInputStream.close();
            dos.flush();
            dos.close();
            dos = null;
        } catch (Exception e) {
            System.out.println("STREAM CLOSED ERROR");
        }

    } catch (MalformedURLException ex) {
        Log.e("Error:", "error: " + ex.getMessage(), ex);
    }

    catch (IOException ioe) {
        Log.e("Error:", "error: " + ioe.getMessage(), ioe);
    }

} 
```

我有这段代码可以将 fie 上传到服务器，但是我无法上传大小超过 8MB 的文件；它给出了 FileNotFoundException 异常，即找不到 SERVER_URL+"/uploadpic2.php"。请任何机构帮助我解决此错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:14:37.807

根据此[网页](http://support.modwest.com/content/5/219/en/i-can_t-upload-a-file-larger-than-8mb-through-a-php-script.html)，您需要更改 php 配置文件中的设置。

限制在那里执行

```
post_max_size = 16M
upload_max_filesize = 16M 
```

我也认为这条线

`String urlString = "SERVER_URL+"/uploadpic2.php";`

应该读

`String urlString = SERVER_URL + "/uploadpic2.php";`

**更新**

我发现[了另一个](https://stackoverflow.com/questions/9543338/how-to-read-chunked-data-from-phone-gap-file-upload-in-android)与你类似的问题。根据那个问题，这看起来像是 phoneGap 的问题。

# javascript - 与对象属性同名的原型属性

> ID：10832420
> 
> 赞同：0
> 
> 时间：2012-05-31T11:09:11.207
> 
> 标签：javascript, prototype-programming

我有一小段代码使用相同的名称分配原型属性和对象属性。在创建对象后访问`testNumber`它将始终显示对象属性，我理解它会首先在对象上查找属性，然后在对象原型中查找，然后在原型的原型等中查找。

但我的问题是，在这种情况下有没有办法直接访问原型的属性？[只是一个注释，我不知道我什么时候真正需要在实践中这样做，但这只是我想为自己的理智找出的东西]。

```
function MyObject1(formalParameter){

    this.testNumber = formalParameter;
}

​MyObject1.prototype.testNumber​ = 55;

var mine = new MyObject1(10);
alert(mine.testNumber); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:14:51.813

`constructor`您可以通过实例的属性访问原型：

```
alert(mine.constructor.prototype.testNumber); 
```

如果你对原型做了奇怪的事情而不保留它的`constructor`属性，或者你有一个`constructor`因某种原因调用的实例属性，则将无法工作。

# java - TestNG：一个@Test 有多个@DataProvider

> ID：10832422
> 
> 赞同：27
> 
> 时间：2012-05-31T11:09:17.380
> 
> 标签：java, testing, automated-tests, testng, dataprovider

我正在`TestNG`使用`Eclipse`.

是否可以逐步为两个数据提供者提供**相同**的测试功能？

我可以将两个提供商合二为一，但这不是我想要的。

我需要（不像在这个例子中那样）生成独立的数据。

```
@DataProvider(name = "dataSet1")
public Object[][] createDataX() {
    return new Object[][] { { 1, 1 }, { 2, 2 } };
}

@DataProvider(name = "dataSet2")
public Object[][] createDataY() {
    return new Object[][] { { 0, 0 }, { 3, 3 } };
} 
```

我想对两个提供商进行相同的测试。这可能吗？

```
@Test(dataProvider = "dataSet1") // ??? and "dataSet2" ???
public void testThisFunction(int val1, int val2) {
    boolean solution = oracle(val1,val2);
    assert (solution);
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-31T18:22:26.040

不，但没有什么能阻止您将这两个数据提供者合并为一个并将其指定为您的数据提供者：

```
public Object[][] dp1() {
  return new Object[][] {
      new Object[] { "a", "b" },
      new Object[] { "c", "d" },
  };
}

public Object[][] dp2() {
  return new Object[][] {
      new Object[] { "e", "f" },
      new Object[] { "g", "h" },
  };
}

@DataProvider
public Object[][] dp() {
  List<Object[]> result = Lists.newArrayList();
  result.addAll(Arrays.asList(dp1()));
  result.addAll(Arrays.asList(dp2()));
  return result.toArray(new Object[result.size()][]);
}

@Test(dataProvider = "dp")
public void f(String a, String b) {
  System.out.println("f " + a + " " + b);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-30T20:08:57.343

```
@DataProvider
public Object[][] combinedDataProvider() {
    // Using stream to combine the two separate data providers.
    return Stream.of(dp1(), dp2())
                 .flatMap(Arrays::stream)
                 .toArray(Object[][]::new);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-24T01:35:01.123

请参考这个答案：

[TestNG 使用多个 DataProviders 和单个测试方法](https://stackoverflow.com/questions/25549443/testng-using-multiple-dataproviders-with-single-test-method)

它更干净，适用于更复杂的事情。

也许有人也会需要它，我`public static T[] concatAll(T[] first, T[]... rest)`用不同的方式重写了这个方法：

```
public static Object[] concat(Object[] first, Object[] second) {
    Object[] result = ArrayUtils.addAll(first, second);
    return result;
} 
```

* * *

## 回答 #4

> 赞同：-10
> 
> 时间：2016-01-15T07:06:28.370

是的，

你可以写@Test(dataProvider="name_of_first_dataprovider,name_of_second_dataprovider")

# c# - 在 Linq-to-Sql 中确定更新后更改了哪些属性

> ID：10832423
> 
> 赞同：2
> 
> 时间：2012-05-31T11:09:22.660
> 
> 标签：c#, linq-to-sql

> **可能重复：**
> [如何确定在 Linq-To-Sql 对象中更改了哪些字段](https://stackoverflow.com/questions/1378378/how-to-determine-which-fields-where-changed-in-a-linq-to-sql-object)

如何确定更新 linq-to-sql 中的实体对象时更新了哪些属性，例如：

```
public class User 
{
    public int Id { get; set; }
    public string Name {get; set; }
    public string LastName { get; set; }
}

public void UpdateUser(User user)
{
    using (var entity = new CoolEntity())
    {
        user.Name = user.Name + "%";
        entity.SubmitChanges();

        //Now here, I would love to know that "Id" and "LastName" is not changed
        //but the "Name" property of the object is updated. 
    }
} 
```

我知道这听起来有点难，也许我的方法是不可能的；但这是针对日志结构的；因为我需要记录更新对象属性的更新详细信息。

我很想知道是否有任何属性标志可以让我识别更改。

# ios - 如何在地图上定位公司（mapkit iOS）

> ID：10832434
> 
> 赞同：1
> 
> 时间：2012-05-31T11:09:52.657
> 
> 标签：ios

我正在开发一个简单的地图，我想使用例如公司名称在地图上找到一家公司。例如，“苹果公司”。

你知道我该怎么做吗？

非常感谢！

问候，雅舒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:35:09.793

您需要有一个实现 MKAnnotation 协议的类。这是一个例子

```
@interface MapPin : NSObject<MKAnnotation> {
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
}

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, readonly) NSString *title;
@property (nonatomic, readonly) NSString *subtitle;

- (id)initWithCoordinates:(CLLocationCoordinate2D)location placeName:(NSString *)placeName description:(NSString *)description;

@end 
```

这是实现：

```
@implementation MapPin

@synthesize coordinate;
@synthesize title;
@synthesize subtitle;

- (id)initWithCoordinates:(CLLocationCoordinate2D)location placeName:placeName description:description {
    self = [super init];
    if (self != nil) {
        coordinate = location;
        title = placeName;
        [title retain];
        subtitle = description;
        [subtitle retain];
    }
    return self;
}

- (void)dealloc {
    [title release];
    [subtitle release];
    [super dealloc];
}

@end 
```

然后，在您的 MapView 中，您需要添加您的公司位置，如下所示。

```
CLLocationCoordinate2D coord = [[[CLLocation alloc] initWithLatitude:35.936902 longitude:-79.024953] coordinate];//Here you need to mention your company latitude and longitude
MapPin *pin = [[MapPin alloc] initWithCoordinates:coord placeName:@"Apple Inc" description:@""];
[map addAnnotation:pin]; 
```

希望这会有所帮助....

# linux - 结构变量上的 gdb 观察点

> ID：10832435
> 
> 赞同：7
> 
> 时间：2012-05-31T11:09:52.943
> 
> 标签：linux, gdb, watchpoint

我有这样的结构：

```
 struct A 
    {
        int a; 
        char b; 
    }; 
```

这个结构在大代码的不同地方被引用。指向这个结构的指针被传递给不同的函数，因此这个结构中的变量被更新。我想在这个结构中的变量 a 上设置一个观察点，因为它遍历许多函数。看看如何变化。如何设置这个观察点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:45:25.040

首先设置一个*断点*，在其中使用*break*创建结构的实例，例如

```
break myfile.c:9 
```

然后只需使用*watch*设置一个观察点，比如

```
watch myStructInstance.a 
```

对于变量*a*或

```
watch *0x7ffff75177f0 
```

为内存地址。*使用print*可以很容易地获得内存地址，例如

```
print &myStructInstance.a 
```

现在每次修改变量 a 或给定的内存地址时，gdb 都会中断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-07T22:04:36.163

在调试我的虚拟内存模拟器时，我遇到了同样的问题。问题是如何密切关注结构中的数据。

我尝试使用 print 来检查，但这太吵了。因为我必须打印出超过 15 个变量。

我也尝试过使用观察点，但在我的机器上，我只能设置不超过 4 个硬件观察点。这甚至不接近我的目标。

最后，我通过在 .gdbinit 文件中使用用户定义的函数找到了我的解决方案。例如，如果我想观看我的结构数组，使用

```
define lookintoStructs
    if mystruct != 0x0
        print mystruct[0]
        print mystruct[1]
        print mystruct[2]
        print mystruct[3]
        print mystruct[4]
        print mystruct[5]
    end
end 
```

为了更方便使用，我想让它挂钩到我在 gdb 中的下一条指令。

```
define hook-next
    lookintoStructs
end 
```

因此，当我在 gdb 中调用 next 或 n 时，可以自动调用 lookintoStructs。对我来说很好。

# php - 如何在 sphinx config source sql 中为多个字段设置分组依据

> ID：10832437
> 
> 赞同：0
> 
> 时间：2012-05-31T11:10:21.060
> 
> 标签：php, search, configuration, sphinx

我需要为我的 sphinx 配置源 sql 中的多个字段设置分组依据。

```
select f1,f2,f3,f5 from table group by f2,f3,f5; 
```

像这样我需要sql

为此，我创建了这样的源

```
source myindex
{
    type            = mysql

    sql_host        = localhost
    sql_user        = root
    sql_pass        = root
    sql_db          = mydb
    sql_port        = 3306  # optional, default is 3306
    sql_query = \
    select f1,f2,f3,f4 from table;

    sql_group_column = f2;
    sql_group_column = f3;
    sql_group_column = f4;

} 
```

我知道我的配置文件是否正确？

```
WARNING: key 'sql_group_column' is deprecated in /etc/sphinx/sphinx.conf line 27; use 'sql_attr_uint' instead 
```

我的狮身人面像版本是 204。现在我在旋转索引时遇到了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:39:20.263

改变

```
sql_group_column = f2;
sql_group_column = f3;
sql_group_column = f4; 
```

至

```
sql_attr_uint = f2;
sql_attr_uint = f3;
sql_attr_uint = f4; 
```

或者对不同的属性类型 f2、f3、f4 使用[Sphinx 属性](http://sphinxsearch.com/docs/2.0.4/attributes.html)

# php - 从目录查看和下载文件

> ID：10832439
> 
> 赞同：0
> 
> 时间：2012-05-31T11:10:27.490
> 
> 标签：php

我目前有一个脚本，允许用户查看目录中的文件。我想知道如何使这些文件也可下载。我认为它与 index.php 有关，但不确定。以为我最好检查并澄清我的脚本如下。

```
 <?php

$path = "/home/phpprac/assesment"; 

$dir_handle = @opendir($path) or die("Unable to open $path"); 

while ($file = readdir($dir_handle)) { 

if($file == "." || $file == ".." || $file == "index.php" ) 

    continue; 
    echo "<a href=\"$file\">$file</a><br />"; 

} 
// Close 
closedir($dir_handle); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:21:13.020

您需要知道文件的完整路径。

所以，如果你有服务器根路径**/home/phpprac/**，你的路径是**/** assesment ，你需要写链接：

```
echo "<a href=\"/assesment{$file}\">$file</a><br />"; 
```

其他可能性是您链接到文本文件并且浏览器需要打开而不是下载。您可以通过制作 php 脚本来修复，打开一个文件并使用标题**“Content-Type：application/force-download”发送它**

```
<?
$file_name = $_GET['file'];
header('Content-Type: application/force-download');
readfile($file_name);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:31:52.853

您的文件应该是可下载的。您可以使用丑陋的`continue`语句 过滤您的扩展，如下所示

```
 foreach (glob('*.{jpg,gif,zip,doc}', GLOB_BRACE) as $filename) {
        echo "<a href=".$filename." target='_blank'>".$filename."</a><br/>";
    } 
```

# ruby-on-rails - Ruby 在文件中查找字符串并打印结果

> ID：10832440
> 
> 赞同：14
> 
> 时间：2012-05-31T11:10:27.650
> 
> 标签：ruby-on-rails, ruby

自从我将 ruby​​ 用于此类事情已经很长时间了，但是我忘记了如何打开文件、查找字符串以及打印 ruby​​ 找到的内容。这是我所拥有的：

```
#!/usr/bin/env ruby
f = File.new("file.txt")
text = f.read
if text =~ /string/ then
puts test
end 
```

我想确定 config/routes.rb 中的“文档根”（路由）是什么

如果我打印字符串，它会打印文件。

我觉得我不记得这是什么很愚蠢，但我需要知道。

希望我可以让它打印出来：

```
# Route is:
blah blah blah blah 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T11:31:04.260

```
File.open 'file.txt' do |file|
  file.find { |line| line =~ /regexp/ }
end 
```

这将返回与正则表达式匹配的第一行。如果您想要*所有*匹配的行，请更改[`find`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)为[`find_all`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find_all).

它也更有效率。它一次遍历一行，而不将整个文件加载到内存中。

此外，该[`grep`](http://www.ruby-doc.org/core-2.1.1/Enumerable.html#method-i-grep)方法可用于：

```
File.foreach('file.txt').grep /regexp/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:32:09.073

获取根的最简单方法是：

```
rake routes | grep root 
```

如果你想用 Ruby 来做，我会选择：

```
File.open("config/routes.rb") do |f|
  f.each_line do |line|
    if line =~ /root/
      puts "Found root: #{line}"
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:30:27.760

在里面`text`你有整个文件作为一个字符串，你可以使用正则表达式来匹配它`.match`，或者像 Dave Newton 建议的那样，你可以遍历每一行并检查。例如：

```
f.each_line { |line|
  if line =~ /string/ then
    puts line
  end
} 
```

# opencv - opencv 函数 CvBGStatModel

> ID：10832441
> 
> 赞同：4
> 
> 时间：2012-05-31T11:10:36.623
> 
> 标签：opencv, background-subtraction

我只是想知道这个函数**CvBGStatModel()**是如何工作的。我的意思是说用于此的算法是什么，以及与平均和帧差算法相比，它如何提供更好的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:39:30.760

CvBGStatModel() 是一个类，而不是一个函数。例如，您可以像这样创建此类：

```
IplImage* temp = NULL;
temp = cvLoadImage( "temp.jpg" );
CvBGStatModel* background_model = cvCreateGaussianBGModel(temp); 
```

您必须调用一个函数才能更新背景/前景模型（[参见示例](http://www.openvov.com/blog/?p=161)）：

```
cvUpdateBGStatModel( temp, background_model ); 
```

**“与平均和帧差算法相比，它如何提供更好的结果”**

因为它将像素信息存储为能够更好地表示该像素的高斯分布的混合。这意味着在几帧期间改变其值的像素不会被视为前景，只要更好地表示它的高斯被视为背景。高斯是加权的。最长的高斯分布被认为是背景，它的权重就越大。帧差异算法只考虑帧之间的差异，而不考虑这些差异的一致性/可信度。

# c++ - 头文件中的 C++ 空接口析构函数

> ID：10832442
> 
> 赞同：1
> 
> 时间：2012-05-31T11:10:44.440
> 
> 标签：c++

在 C++ 中，我有一个头文件，它定义了一个带有空虚拟析构函数的抽象类（接口）：

```
class I
{
  public:

    virtual ~I() {}
}; 
```

*   问题1：空析构函数的目标代码是否会在每个包含Ih的.cpp文件的目标文件中生成？
*   问题 2：如果问题 1 的答案是肯定的，这会是一个问题吗（不同目标文件中的方法相同）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T11:14:50.190

不，它不会。类定义中定义的方法是自动的`inline`，所以不用担心。

请注意，`inline`在二进制文件中被标记并实际内联的方法是不同的。`inline`只是一个标记（充其量是编译器提示）。尤其是`virtual`功能。无论方法是否被标记，多态性都可以保证工作`inline`。

# javascript - jQuery - “$ 符号未定义”

> ID：10832445
> 
> 赞同：0
> 
> 时间：2012-05-31T11:10:50.193
> 
> 标签：javascript, jquery

我在我的网站上成功使用了一些插件大约 6 个月，突然间我开始收到我的一个脚本的这条消息：“$ 未定义”。

这是有问题的代码行：`$.widget("ui.ImageColorPicker", uiImageColorPicker);`

我正在使用这个插件和几乎最新的启用 noConflict 的 jQuery：http://github.com/Skarabaeus/ImageColorPicker[我](http://github.com/Skarabaeus/ImageColorPicker)没有改变任何东西 6 个月（我没有更新 jQuery）。我确信它在 2 周前还可以正常工作，但现在突然坏了。

编辑：错误消失了。我正在删除示例网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T11:39:40.700

它看起来像一个变量范围问题。

尝试将第一行更改为：

```
(function($){ 
```

最后一行：

```
})(jQuery); 
```

通过这样做，我们将`jQuery`对象传递给插件周围的匿名函数，但是通过引用它作为`$`块内的代码可以使用“普通”jQuery 编写，同时仍然在页面的其余部分保持 noConflict 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:33:54.353

请试试这个

```
<script type="text/javascript" src="other_lib.js"></script> //In your case try Imagecolorpicker js
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

[参考](http://api.jquery.com/jQuery.noConflict/)$.noConflict();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:14:36.417

尝试使用显式`jQuery`对象而不是它的`$`别名。
例如：

```
jQuery.widget("ui.ImageColorPicker", uiImageColorPicker); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:28:02.083

看起来`jQuery.Widget`是在该页面上定义的。试试那个，而不是`$.widget`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T11:46:16.240

首先，确保包含 jQuery UI。尝试使用`jQuery.widget`. 如果这不起作用，请使用：

`e = jQuery; // you can use anything else than $`

现在，你应该输入`e.widget("ui.ImageColorPicker", uiImageColorPicker);` 而不是你所拥有的。

# arrays - MIPS 在数组中移动元素

> ID：10832448
> 
> 赞同：0
> 
> 时间：2012-05-31T11:10:59.593
> 
> 标签：arrays, mips

我有一个数组，我应该能够在其上提取它的第一个元素。以下元素，如位置 1,2.. 应移动到前一个位置。例如：我的数组是这样的： 3, 4, 5, 6 我提取 3 并且空白空间被 4 占据，留下一个空的空间被 5 占据，依此类推。我怎么能那样做？起初我考虑加载第二个元素并将其存储到第一个元素的位置......但似乎它不起作用......有没有更简单的方法来做到这一点？提前致谢

# c# - 刷新网格的特定单元格而不加载整个网格视图

> ID：10832451
> 
> 赞同：1
> 
> 时间：2012-05-31T11:11:09.257
> 
> 标签：c#, asp.net, .net, gridview, refresh

有没有办法刷新网格视图的单元格而不刷新 c# asp.net 中的整个网格视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:30:14.403

您可以使用模板字段，将 UpdatePanel 放入其中并以这种方式刷新该单个单元格。您只需要以某种方式启动刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:28:46.960

您可能必须在单元格中使用嵌套的 UpdatePanel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:00:38.110

如果您不想在 GridView`UpdatePanel`的*每个*单元格中都放置一个，则可以在常规的完整回发中刷新一个单元格。网格的内容将是往返的，但不一定会完整查询您的数据源。

首先，确保您的网格不会在每次回发时重新绑定，例如将您的网格包裹`gv.DataSource = x; gv.DataBind();`在`if (!this.IsPostBack)`.

然后你应该能够按照以下方式做一些事情

```
((Label)gv.Rows[x].Cells[y].FindControl('myLabel')).Text =
    GetDataItemNumber(x).FieldForColumnY.ToString(); 
```

请记住，这可能与数据源中的第 th 项`gv.Rows[x]`不对应，包括标题行等。您可能需要遍历检查例如 ID 以找到正确的行。`x``Rows``Rows`

免责声明：我以前从未真正*这样做过*，但应该有可能......

# sql - 在 SQL Server 中使用 UNION with ORDER

> ID：10832457
> 
> 赞同：1
> 
> 时间：2012-05-31T11:11:19.150
> 
> 标签：sql, sql-server, sql-server-2008

我想使用 检索两个表的最新记录`UNION`，它返回数据，但不返回最新记录，即使使用`ORDER BY`. 这是我的查询：

```
 SELECT TOP(1) OwnerID,NewsTitle,NewsCreationDate,NewsTitle,NewsEnglishName 
FROM TheaterNews 
    UNION
    SELECT TOP(3) OwnerID,NewsTitle,NewsCreationDate,NewsTitle,NewsEnglishName  
FROM MoviesNews
    ORDER BY 3 DESC 
```

这是查询的输出：
![使用 UNION 输出](../Images/6ef0a028e035a55d552d471d1d65eb77.png)

但最新的记录`TheaterNews`是更新的：

```
SELECT  OwnerID,NewsTitle,NewsCreationDate,NewsTitle,NewsEnglishName 
FROM TheaterNews 
ORDER BY NewsCreationDate DESC 
```

![TheatreNews 表的最新记录](../Images/975e7cfd080af48c2f59c576b999a204.png)

我怎样才能解决这个问题？即使用另一种方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:17:18.350

`order by`应用于联合的整个结果，而不是单独的查询，因此在`top`结果排序之前应用 。

使用子查询对单独的结果进行排序：

```
SELECT * FROM (
  SELECT TOP(1) OwnerID,NewsTitle,NewsCreationDate,NewsTitle,NewsEnglishName
  FROM TheaterNews
  ORDER BY 3 DESC
) x
UNION
SELECT * FROM (
  SELECT TOP(3) OwnerID,NewsTitle,NewsCreationDate,NewsTitle,NewsEnglishName
  FROM MoviesNews
  ORDER BY 3 DESC
) y 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:18:33.673

因为 top 子句在 order by 子句之前执行。试试这个

```
 Select * from (SELECT TOP(1) OwnerID,NewsTitle,NewsCreationDate,       
                    NewsEnglishName 
                 FROM TheaterNews      ORDER BY 3 DESC) as tn
  UNION
  Select * From (SELECT TOP(3)       
                 OwnerID,NewsTitle,NewsCreationDate,NewsEnglishName  
                 FROM MoviesNews     ORDER BY 3 DESC) as mn
  ORDER BY 3 DESC 
```

外部 order by 将对联合结果进行排序

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:48:58.550

这应该适用于您的实例。可能是一个粗略的解决方案，但您会得到答案。您可以用@tables 替换#tables。

```
SELECT TOP(1) 
    OwnerID,
    NewsTitle,
    NewsCreationDate,
    NewsEnglishName 
into
    #Table1
FROM 
    TheaterNews 
ORDER BY 3 DESC

SELECT TOP(3) 
    OwnerID,
    NewsTitle,
    NewsCreationDate,
    NewsEnglishName
into
    #Table2
FROM 
    MoviesNews
ORDER BY 3 DESC

select * from #Table1
union
select * from #Table2

drop table #Table1
drop table #Table2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:16:38.853

试试这个：

```
Select * From ( SELECT TOP(1) OwnerID,NewsTitle,NewsCreationDate,NewsTitle,NewsEnglishName 
    FROM TheaterNews ORDER BY NewsCreationDate DESC) as tempA
        UNION
     Select * From  ( SELECT TOP(3) OwnerID,NewsTitle,NewsCreationDate,NewsTitle,NewsEnglishName  
    FROM MoviesNews ORDER BY NewsCreationDate DESC) as tempB 
```

# mysql - 如何在不同服务器的 MySQL 库之间迁移数据？

> ID：10832460
> 
> 赞同：1
> 
> 时间：2012-05-31T11:11:25.123
> 
> 标签：mysql, sql, database-migration

我有两个具有不同架构的表：

基地 A，表 T1：

```
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`title` varchar(255) NOT NULL DEFAULT '',
`uid` int(11) NOT NULL DEFAULT '0',
`language` varchar(12) NOT NULL DEFAULT '' 
```

底座 B，表 T2：

```
`ID` int(11) NOT NULL AUTO_INCREMENT,
`Type` varchar(10) COLLATE utf8_unicode_ci DEFAULT NULL,
`UserID` int(11) NOT NULL,
`Name` varchar(100) COLLATE utf8_unicode_ci NOT NULL, 
```

我需要以这种方式将数据从 T1 传输到 T2：

```
A.T1.id    -> B.T2.ID
A.T1.title -> B.T2.Name
A.T1.uid   -> B.T2.UserID 
```

如您所见`A.T1.language`，`B.T2.Type`不需要字段。

我认为我应该通过 CSV 转储来进行此迁移。但这就是我想出的全部。

任何想法？

**更新**

谢谢你们的回答。请原谅我不够清楚，我应该强调我的表在不同的基础上，甚至在不同的服务器上。因此，将一个表中的字段插入到另一个表中并不容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:20:39.470

您可以使用`UPDATE`和`SELECT`查询的组合来做到这一点。但是，由于`TABLE 1`具有类型的列并且具有`title`类型的列可能会产生问题。`VARCHAR(255)``TABLE 2``Name``VARCHAR(100)`

以下查询可以执行此迁移，但是任何列`title`长度超过 100 的行都将**缩短**为 100。

```
INSERT INTO T2 
(ID, Name, UserID) 
SELECT id, SUBSTR(title, 0, 100), uid 
FROM T1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:13:50.457

使用如下[`INSERT ... SELECT`](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)语法

```
INSERT INTO `B`.`T2` (`ID`, `Name`, `UserID`)
SELECT `id`, `title`, `uid` FROM `A`.`T1` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:13:59.453

它们在同一个数据库上吗？在这种情况下：

```
INSERT INTO T2 (ID, Name, UserID) 
SELECT id, title, uid FROM T1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:38:54.833

我有什么理由必须将限制添加到您的 int 字段，例如 INT(10) 而不仅仅是 INT？

您对数据传输的解释与您的基表不一致？

无论如何，您可能在此处遇到的问题是您的某些列限制是不同的，因此如果源列中的字符串比目标列长，您要么必须使它们相同，要么将它们SUBSTRING 到目标表中，例如如果您尝试将“这是我的字符串”插入 VARCHAR(10) 列，您将收到截断错误。

要将数据插入目标表，您可以使用以下命令：

```
INSERT INTO [Destination Table] (ID, Name, uid)

SELECT
  ID,
  SUBSTRING(title, 0, 100) as 'Name',
  uid
FROM
  [Source Table] 
```

这将起作用，但您将牺牲名称列上的数据。我建议为您的目标列提供与源表相同的数据类型和限制。

# android - 将 webview 内容保存到 android 存储并加载它

> ID：10832462
> 
> 赞同：3
> 
> 时间：2012-05-31T11:11:58.977
> 
> 标签：android, html, webview, storage

我想制作一个具有 webview 布局的 android 应用程序。这是我申请的标准：

1.  应用程序第一次启动时，webview 会加载一个 url（可能是 facebook、google 等） webview.loadUrl("http://www.google.com");

2.  加载 url 后，应用程序将加载的 url 保存到 android 内部存储中“特定位置”的 HTML 视图 (file.htm)。因此，假设我打开“google.com”，应用程序将 google 的网页保存为 HTML 文件（假设文件名“google.htm”），当我转到那个“特定位置”并单击“google .htm" 文件，它使用 android 的 HTML 查看器显示 google 网页。

3.  当应用程序再次启动时，或者简单地说应用程序再次加载 URL（在本例中为“google.com”），它不会从“google.com”页面获取，而是从“google.htm”获取内部存储android上的文件。因此，从用户的角度来看，该应用程序仍然可以加载网页，即使它没有连接到互联网。

为了简单起见，

1.  应用程序开始->转到指定的url->检查存储
2.  如果指定的 url 在存储中有 HTML 文件，则从存储中加载
3.  否则它会从网络加载 url。

任何人都可以帮我提供代码和解释吗？对此，我真的非常感激。谢谢大家 :D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T14:55:08.880

当页面完成加载时，您可以使用 WebView 的 Javascript 接口返回整个 HTML 源代码。为此，您需要将自己的 WebViewClient 分配给 WebView。

为此，请在您的 Activity 类中使​​用类似于以下内容的内容——**确保您的 Activity 实现了 Observer**：

```
public void onCreate(Bundle savedInstanceState) {
    // ...

    webView.setWebViewClient(new MyWebViewClient());
    HtmlJSInterface htmlJSInterface = new HtmlJSInterface();
    webView.addJavascriptInterface(htmlJSInterface, "HTMLOUT");
    htmlJSInterface.addObserver(this);

    // ...
}

// Called when our JavaScript Interface Observables are updated.
@Override
public void update(Observable observable, Object observation) {

    // Got full page source.
    if (observable instanceof HtmlJSInterface) {
        html = (String) observation;
        onHtmlChanged();
    }
}

private void onHtmlChanged() {
    // Do stuff here...
}

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        // When each page is finished we're going to inject our custom
        // JavaScript which allows us to
        // communicate to the JS Interfaces. Responsible for sending full
        // HTML over to the
        // HtmlJSInterface...
        isStarted = false;
        isLoaded = true;
        timeoutTimer.cancel();
        view.loadUrl("javascript:(function() { "
                + "window.HTMLOUT.setHtml('<html>'+"
                + "document.getElementsByTagName('html')[0].innerHTML+'</html>');})();");
        }
    }
} 
```

然后，您将要创建 HtmlJSInterface 类，如下所示：

```
 public class HtmlJSInterface extends Observable {
  private String html;

  /**
   * @return The most recent HTML received by the interface
   */
  public String getHtml() {
    return this.html;
  }

  /**
   * Sets most recent HTML and notifies observers.
   * 
   * @param html
   *          The full HTML of a page
   */
  public void setHtml(String html) {
    this.html = html;
    setChanged();
    notifyObservers(html);
  }
} 
```

# android - 从联系我们页面发送邮件到特定的 emailid

> ID：10832464
> 
> 赞同：-3
> 
> 时间：2012-05-31T11:12:02.533
> 
> 标签：android, email

我已经尝试过了...但是当我提交表单时，它会发送到撰写邮件...我只想通过单击提交按钮来发送邮件...请帮助我...

```
Intent mailintent = new Intent(android.content.Intent.ACTION_SEND);
mailintent.setType("text/plain");
mailintent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]        
         {"amitk.123@gmail.com" , "ankush.123@gmail.com"});
mailintent.putExtra(android.content.Intent.EXTRA_SUBJECT, "info...");         
startActivity(mailintent); 
```

和

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

在清单文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:21:39.667

我认为您正在尝试以编程方式发送电子邮件，而无需打开电子邮件编辑器。

如果是这样，您可以检查此[链接](https://stackoverflow.com/a/2033124/1376688)

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T12:13:49.703

```
package com.contact;
import java.util.regex.Pattern;
import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.content.Intent;
import android.graphics.drawable.AnimationDrawable;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;

public class ContactusActivity extends Activity {
    // Initializing variables
    EditText inputName;
    EditText inputEmail;
    EditText inputphone;
    EditText inputcomment;
    ImageView iv;

    public final Pattern EMAIL_ADDRESS_PATTERN = Pattern.compile(
            "[a-zA-Z0-9+._%-+]{1,256}" +
            "@" +
            "[a-zA-Z0-9][a-zA-Z0-9-]{0,64}" +
            "(" +
            "." +
            "[a-zA-Z0-9][a-zA-Z0-9-]{0,25}" +
            ")+"
        );
    String regexStr = "^[0-9]$";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        inputName = (EditText) findViewById(R.id.name);
        inputEmail = (EditText) findViewById(R.id.email);
        inputphone = (EditText) findViewById(R.id.phone);
        inputcomment = (EditText) findViewById(R.id.comment);
        Button sendmail = (Button) findViewById(R.id.sendmail);
        final ImageView iv= (ImageView) findViewById(R.id.test_image);
        iv.setBackgroundResource(R.animator.animation);

        sendmail.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                String strname=inputName.getText().toString();
                String strmail=inputEmail.getText().toString();
                String strphone=inputphone.getText().toString();
                String strcmnt=inputcomment.getText().toString();

                if(strname.length() == 0  || strmail.length() == 0 
                         || strphone.length() == 0 || strcmnt.length() == 0 )   
                {

                Dialog d=new Dialog(ContactusActivity.this);
                d.setContentView(R.layout.dialog);
                d.setTitle("");
                d.show();
                    //Toast toast=Toast.makeText(ContactusActivity.this, "please fill all the details.....", 7000);
                    //toast.setGravity(Gravity.CENTER,0,0);
                      //  toast.show();

                }
                 else

                     if(strcmnt.length() <=20) {
                         Dialog d=new Dialog(ContactusActivity.this);
                            d.setContentView(R.layout.comment);
                            d.setTitle("");
                            d.show();

                        }
                     else

                         if(strname.length() <=3) {
                             Dialog d=new Dialog(ContactusActivity.this);
                                d.setContentView(R.layout.name);
                                d.setTitle("");
                                d.show();

                         }
                     else

                         if(strphone.length() <10 || strphone.length() >10) {
                             Dialog d=new Dialog(ContactusActivity.this);
                                d.setContentView(R.layout.phone);
                                d.setTitle("");
                                d.show();

                            }

                     else{

                        if(checkEmail(strmail)){ 

                 String result=strname +"\n"+ strmail+"\n" + strphone+"\n" + strcmnt;
                Intent mailintent = new Intent(android.content.Intent.ACTION_SEND);
               mailintent.setType("text/plain");
                mailintent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[] {"amitk.cql@gmail.com" , "ankush.cql@gmail.com"});
                mailintent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Please collect my info...");

                mailintent.putExtra(android.content.Intent.EXTRA_TEXT, result ); 

                startActivity(Intent.createChooser(mailintent, "Sending mail..."));
                inputName.setText("");
                inputEmail.setText("");
                inputphone.setText("");
                inputcomment.setText("");

                         }
                         else
                        {
                             Dialog d=new Dialog(ContactusActivity.this);
                            d.setContentView(R.layout.email);
                            d.setTitle("");
                            d.show();

                        }

                        }
            }

             });
       //  iv.setOnClickListener(new OnClickListener(){

        //  public void onClick(View v) {

                AnimationDrawable anim= (AnimationDrawable)  iv.getBackground();
                anim. start();
            }

       // });

   // }

    private boolean checkEmail(String strmail) {
        return EMAIL_ADDRESS_PATTERN.matcher(strmail).matches();

}

} 
```

# javascript - 将json编码为字符串

> ID：10832471
> 
> 赞同：3
> 
> 时间：2012-05-31T11:12:38.213
> 
> 标签：javascript, encryption, encoding

我很感兴趣谷歌如何编码 POST 参数。在一个应用程序中，我发现了以下方法，假设我有以下对象：

```
selection={"ty":"mc","cl":{"loc_type":0,"si":9,"aps":false},"sr":[]} 
```

在 POST 请求中，它采用以下形式：

```
 selection=%7B%22ty%22%3A%22mc%22%2C%22cl%22%3A%7B%22loc_type%22%3A0%2C%22si%22%3A9%2C%22aps%22%3Afalse%7D%2C%22sr%22%3A%5B%5D%7D 
```

这里应用了哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:21:27.037

`encodeURIComponent`使用和`JSON.stringify`函数可以达到同样的效果：

```
"selection=" + encodeURIComponent(JSON.stringify(selection)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:16:16.643

它被称为 URL 编码。

它将非 ASCII 字符和在 URI 方案中具有特殊含义的字符替换为 ASCII 表示：每个不可打印的字符将被写入该字符的 ASCII 表中的索引`%xy`位置。`xy`

有许多开箱即用的编程语言支持它：

*   在 JavaScript 中，您可以使用 encodeURIComponent() 或 encodeURI() 函数。

您可以像这样轻松调用它，例如：

```
var myjson = '{my:json}';
url_encoded_json = encodeURIComponent( myjson );
alert(url_encoded_json); 
```

在其他语言中：

*   PHP 有 rawurlencode() 函数。
*   ASP 具有 Server.URLEncode() 函数。
*   Python 有 urllib.urlencode() 函数。
*   Java 有 java.net.URI(url).toASCIIString() 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:19:12.493

它只是 URL 编码

查看内置函数 encodeURIComponent(str) 和 encodeURI(str)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:20:58.710

javascript中的方法称为`encodeURIComponent()`write

```
alert(encodeURIComponent('{"ty":"mc","cl":{"loc_type":0,"si":9,"aps":false},"sr":[]}')); 
```

# android - 在android中将pdf转换为epub的jar文件

> ID：10832474
> 
> 赞同：1
> 
> 时间：2012-05-31T11:12:49.437
> 
> 标签：android

有没有办法在android中将pdf文件转换为epub或epub转换为pdf。我没有询问任何应用程序来转换文件。我问的是任何可转换的库。

# c# - DataGridView 并将单元格值保存到复杂的底层数据源

> ID：10832476
> 
> 赞同：1
> 
> 时间：2012-05-31T11:12:54.150
> 
> 标签：c#, winforms

我正在使用 EF 返回带有一对多标志的进程列表。标志是唯一的，它们可能会根据需要增加或减少。数据结构大致翻译为：

```
public enum FlagTypes
{
    OnlyOnWeekends,
    OnlyOnHolidays
}

public class Process
{
    public DateTime Date { get; set; }
    public String Description { get; set; }
    public Dictionary<FlagTypes, Flag> Flags { get; set; }
}

public class Flag
{
    public FlagTypes Type { get; set; }
    public bool Enabled { get; set; }
} 
```

我想在 DataGridView 中显示它，如下所示：

```
Date | Description | OnlyOnWeekends | OnlyOnHolidays [|... more flags as needed] 
```

..同时也使它可编辑。

我能够解决 DataGridView 的限制，以使用自定义列和单元格显示表格

```
public class EnumerationColumn : DataGridViewColumn
{
    public FlagTypes EnumerationType { get; set; }

    public EnumerationColumn(FlagTypes enumerationType)
        : base(new EnumerationCell())
    {
        EnumerationType = enumerationType;
    }

    public override DataGridViewCell CellTemplate
    {
        get
        {
            return base.CellTemplate;
        }
        set
        {
            // Ensure that the cell used for the template is a EnumerationCell.
            if (value != null &&
                !value.GetType().IsAssignableFrom(typeof(EnumerationCell)))
            {
                throw new InvalidCastException("Must be a EnumerationCell");
            }
            base.CellTemplate = value;
        }
    }

    public class EnumerationCell : DataGridViewCheckBoxCell
    {
        private EnumerationColumn Parent
        {
            get
            {
                var parent = base.OwningColumn as EnumerationColumn;
                if(parent == null)
                {
                    throw new NullReferenceException("EnumerationCell must belong to a EnumerationColumn");
                }
                return parent;
            }
        }

        private Dictionary<FlagTypes, Flag> GetFlags(int rowIndex)
        {
            var flags = base.GetValue(rowIndex) as Dictionary<FlagTypes, Flag>;
            return flags ?? new Dictionary<FlagTypes, Flag>();
        }

        protected override object GetValue(int rowIndex)
        {
            var flags = GetFlags(rowIndex);
            if (flags.ContainsKey(Parent.EnumerationType))
            {
                return flags[Parent.EnumerationType].Enabled;
            }
            return false;
        }
    }
} 
```

并创建列

```
grid.AutoGenerateColumns = false;
grid.DataSource = processes; // List<Process>

var dateCol = new CalendarWidgetColumn();
dateCol.DataPropertyName = "Date";
dateCol.HeaderText = "Date";

var descCol = new DataGridViewTextBoxColumn();
descCol.DataPropertyName = "Description";
descCol.HeaderText = "Description";

grid.Columns.Add(dateCol);
grid.Columns.Add(descCol);

foreach(string name in Enum.GetNames(typeof(FlagTypes)))
{
    FlagTypes flag;
    if(FlagTypes.TryParse(name, out flag))
    {
        var enumCol = new EnumerationColumn(flag);
        enumCol.DataPropertyName = "Flags";
        enumCol.HeaderText = String.Format("{0}?", name);
        grid.Columns.Add(enumCol);
    }
} 
```

我无法弄清楚如何拦截调用以保存到 DataSource，因此它抛出一个异常，试图将 bool（复选框值）设置为 Dictionary（Flags DataProperty）。我看过 CellValuePushed 事件，但事后会触发。有任何想法吗？

或者也许是一种更简单的方法来解决这一切？

（最终我想用 BindingList 包装进程列表，这样我也可以直接从 DataGridView 创建新行）

* * *

## 解决方案（如下@Erez Robinson 所建议）

**第 1 步**：修改 DataStructure 以允许轻松访问底层字典

```
public enum FlagType
{
    OnlyOnWeekends,
    OnlyOnHolidays
}

public class Process
{
    public DateTime Date { get; set; }
    public String Description { get; set; }
    public Dictionary<FlagType, Flag> Flags { get; set; }

    public bool this[FlagType flagType]
    {
        get
        {
            if(!Flags.ContainsKey(flagType))
            {
                Flags.Add(flagType, new Flag(flagType, false));
            }
            return Flags[flagType].Enabled;
        }
        set
        {
            Flags[flagType].Enabled = value;
        }
    }
}

public class Flag
{
    public FlagType Type { get; set; }
    public bool Enabled { get; set; }

    public Flag(FlagType flagType, bool enabled)
    {
        Type = flagType;
        Enabled = enabled;
    }
} 
```

**第 2 步**：创建一个从 ITypedList 派生的容器

```
class ProcessCollection : List<Process>, ITypedList
{
    protected IProcessViewBuilder _viewBuilder;

    public ProcessCollection(IProcessViewBuilder viewBuilder)
    {
        _viewBuilder = viewBuilder;
    }

    #region ITypedList Members

    protected PropertyDescriptorCollection _props;

    public PropertyDescriptorCollection GetItemProperties(PropertyDescriptor[] listAccessors)
    {
        if (_props == null)
        {
            _props = _viewBuilder.GetView();
        }
        return _props;
    }

    public string GetListName(PropertyDescriptor[] listAccessors)
    {
        return ""; // was used by 1.1 datagrid
    }

    #endregion
} 
```

**第 3 步**：将动态属性创建移至 ViewBuilder

```
public interface IProcessViewBuilder
{
    PropertyDescriptorCollection GetView();
}

public class ProcessFlagView : IProcessViewBuilder
{
    public PropertyDescriptorCollection GetView()
    {
        List<PropertyDescriptor> props = new List<PropertyDescriptor>();

        props.Add(new DynamicPropertyDescriptor(
            typeof(Process),
            "Date",
            typeof(DateTime),
            delegate(object p)
            {
                return ((Process)p).Date;
            },
            delegate(object p, object newPropVal)
                {
                    ((Process)p).Date = (DateTime)newPropVal;
                }
        ));

        props.Add(new DynamicPropertyDescriptor(
            typeof(Process),
            "Description",
            typeof(string),
            delegate(object p)
            {
                return ((Process)p).Description;
            },
            delegate(object p, object newPropVal)
                {
                    ((Process) p).Description = (string) newPropVal;
                }
        ));

        foreach (string name in Enum.GetNames(typeof(FlagType)))
        {
            FlagType flag;
            if (FlagType.TryParse(name, out flag))
            {

                props.Add(new DynamicPropertyDescriptor(
                              typeof (Process),
                              name,
                              typeof (bool),
                              delegate(object p)
                                  {
                                      return ((Process) p)[flag];
                                  },
                              delegate(object p, object newPropVal)
                                  {
                                      ((Process) p)[flag] = (bool) newPropVal;
                                  }
                              ));
            }
        }

        PropertyDescriptor[] propArray = new PropertyDescriptor[props.Count];
        props.CopyTo(propArray);

        return new PropertyDescriptorCollection(propArray);
    }
} 
```

**第 4 步**：将集合绑定到 DataGridView

```
ProcessCollection processes = new ProcessCollection(new ProcessFlagView());

// Add some dummy data ...
processes.Add( ... );

// If you want a custom DataGridViewColumn, bind it before you bind the DataSource
var dateCol = new CalendarColumn();
dateCol.DataPropertyName = "Date";
dateCol.HeaderText = "Date";
grid.Columns.Add(dateCol);

grid.DataSource = processes; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:19:37.827

您可以从 DataGridView 派生并使用`new`关键字隐藏 DataSource 属性。

但我认为你需要改变你的概念。
我不会碰datagridview。

将这些标志公开为单独的属性。将这些类添加到绑定列表。
您可以使用反射动态创建属性。

请阅读这篇文章，它将为您指明正确的方向：[ITypedList](http://jopinblog.wordpress.com/category/design-patterns/)

# ios - Cocoa touch：多行文本输入

> ID：10832478
> 
> 赞同：0
> 
> 时间：2012-05-31T11:13:03.607
> 
> 标签：ios, cocoa-touch, textinput

在我`UIViewController <GLKViewDelegate>`选择对象时需要进行简单的文本输入。

UIKit 中是否有一个简单的多行文本输入弹出窗口可供使用？

我已经找到`UIAlertView`了，`alertViewStyle=UIAlertViewStylePlainTextInput`但这只是一个简单的行输入。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:28:54.200

`UIAlertView`如果您的意思是是否存在与 a`UITextView`而不是 a等效的文本输入`UITextField`，那么答案是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:25:28.160

你的问题不是很清楚。但我认为[UIActionSheet](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)是你需要的。

**编辑**

*你可以试试这个*

***在 un .h 文件中将其设置为像这样的委托***

```
@interface NameOfYourClass : UIViewController <UIActionSheetDelegate> 
```

***并将此代码添加到 un .m 文件中***

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Action Sheet" delegate:self cancelButtonTitle:@"Cancel Button" destructiveButtonTitle:@"Destructive Button" otherButtonTitles:@"Other Button 1", @"Other Button 2", nil];

    actionSheet.actionSheetStyle = UIActionSheetStyleBlackOpaque;

    [actionSheet showInView:self.view]; 
```

**编辑2**

因此，这是将文本字段添加到您的 allertview 的方法

```
UIAlertView *newAlert =[[UIAlertView alloc] initWithTitle:@"ADD item" message:@"Put it blank textfield will cover this" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];

    UITextField *newTextField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
    newTextField.text=@"";
    [newTextField setBackgroundColor:[UIColor whiteColor]];
    [newTextField setKeyboardAppearance:UIKeyboardAppearanceAlert];
    [newTextField setAutocorrectionType:UITextAutocorrectionTypeNo];

    [newTextField setTextAlignment:UITextAlignmentCenter];
    [newAlert addSubview:newTextField];

    [newAlert show]; 
```

# windows-installer - MSI 升级并保留注册表项？

> ID：10832482
> 
> 赞同：1
> 
> 时间：2012-05-31T11:13:28.123
> 
> 标签：windows-installer, upgrade, uninstallation

我们有一个产品，1.0，在现场。我正在尝试更新该产品的安装程序，以便它可以安装旧版本，以安装新版本 2.0。我正在使用 Visual Studio 2010 安装项目来执行此操作。

我维护了 UpgradeCode，并将删除早期版本设置为 true，新的安装程序将成功安装旧版本，删除旧版本。

但是，旧 MSI 的卸载似乎是在安装新 MSI*之后*发生的。两个 MSI 都部署了相同的注册表项（因为我们使用它们的代码没有更改）……但这意味着当旧的 MSI 卸载时，它会删除这些注册表项。而且由于卸载是在安装新的 MSI 之后发生的……这些密钥就消失了。

有没有简单的方法来防止这种情况？这似乎是一个非常正常的用例，但我不知道如果旧安装程序删除了这些注册表项，我应该如何维护它们。

编辑：所以，我想出了如何在流程的早期移动 RemoveExistingProduct 步骤。我仔细检查过——是的，在 VS2005 中它是第一个完成的，在 2010 年它几乎是最后一个完成的。我不确定他们希望它如何工作，如果旧的卸载程序删除了新安装程序添加的东西......无论如何，这只是获取 Orca 并编辑步骤的序列号的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:01:19.180

听起来您可能需要将[RemoveExistingProducts](http://msdn.microsoft.com/en-us/library/aa371197%28VS.85%29.aspx)操作放在安装程序序列中 - 可能放在 InstallValidate 操作中。

恐怕我不知道如何使用 Visual Studio 完成此任务 - 我使用 Advanced Installer，因为我发现它为构建和管理安装包提供了更简单的界面。

# jenkins - Jenkins Email-ext 插件 - 令牌

> ID：10832486
> 
> 赞同：19
> 
> 时间：2012-05-31T11:13:40.550
> 
> 标签：jenkins, jelly, email-ext

嗨，我正在使用[Jenkins Email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)。

我在哪里可以找到我可以在电子邮件的 html 内容中引用的所有内容的列表？

例如：我最近发现您可以使用以下方法将参数值放入邮件中：

```
${ENV,var="variable_name"} 
```

但是说我想获取构建日志或构建号或构建状态（通过失败）。您是否知道是否有一个文档列出了此插件中可引用的所有数据。

谢谢！！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-31T11:22:10.290

在作业配置页面上：

选中“可编辑电子邮件通知”框 -> 查找“内容令牌参考”（位于“附件”和“矩阵项目触发器”之间）-> 单击`?`右侧的 。

# objective-c - HTML解析器。解析但结果为空

> ID：10832494
> 
> 赞同：0
> 
> 时间：2012-05-31T11:13:53.753
> 
> 标签：objective-c, ios, html-parsing

我正在尝试使用 HTMLParser解析[此页面。](https://www.deutsche-bank-pbc.pl/index.php/l1/kursy_walut)使用列：“waluta”、“kupno”和“sprzedaż”。我的代码：

```
NSError * error = nil;
HTMLParser * parser = [[HTMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:@"https://www.deutsche-bank-pbc.pl/index.php/l1/kursy_walut"] error:&error];   
if (error) {
    NSLog(@"Error: %@", error);
    parser = nil;
    return;
}
NSLog(@"parser = %@", parser);
HTMLNode * bodyNode = [parser doc]; // получаем родительский элемент

HTMLNode *mynode = [bodyNode findChildWithAttribute:@"id" matchingName:@"container_c" allowPartial:NO]; // Берем div с id="all"
HTMLNode *mynode2 = [mynode findChildTag:@"table"];

NSArray *newsList = [mynode2 findChildrenOfClass:@"table_td_1"];
NSLog(@"newsList = %@",newsList];
for (HTMLNode *news in newsList) {
    NSLog(@"element = %@",[news allContents] );
} 
```

第一个 NSLog 显示了用 HTMLNode 对象填充的 NSArray。但是我循环中的 NSLog 显示了空元素：

```
2012-05-31 13:10:31.981 [11178:f803] element = 
2012-05-31 13:10:31.982 [11178:f803] element = 
2012-05-31 13:10:31.983 [11178:f803] element = 
2012-05-31 13:10:31.983 [11178:f803] element = 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:44:09.247

不确定 HTMLParser，
但是为什么不使用 WebView 并且一旦加载文档，通过其 dom 元素访问所有属性/属性，
不需要在 UI 上加载它们，但我很确定，这种方法会起作用。

# algorithm - 查找二叉树是否为二叉搜索树

> ID：10832496
> 
> 赞同：33
> 
> 时间：2012-05-31T11:13:54.990
> 
> 标签：algorithm, binary-tree, binary-search-tree

今天我有一个面试，我被要求编写一个程序，它接受一个二叉树，如果它也是一个二叉搜索树则返回 true，否则返回 false。

我的方法1：执行有序遍历并将元素存储在 O(n) 时间内。现在扫描元素的数组/列表并检查第 i^个索引处的元素是否大于第 (i+1)^个索引处的元素。如果遇到这样的条件，则返回 false 并跳出循环。（这需要 O(n) 时间）。最后返回真。

但是这位先生希望我提供一个有效的解决方案。我尝试过，但没有成功，因为要确定它是否是 BST，我必须检查每个节点。

此外，他指出我要考虑递归。我的方法2：如果对于任何节点 N N->left 是 < N 和 N->right > N ，并且 N 的左节点的有序后继小于 N 并且有序后继，则 BT 是 BST N的右节点大于N，左右子树是BST。

但这将是复杂的，运行时间似乎并不好。如果您知道任何最佳解决方案，请提供帮助。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-31T11:37:13.363

以下答案是一个众所周知的问题：

```
public boolean isValid(Node root) {
     return isValidBST(root, Integer.MIN_VALUE,
          Integer.MAX_VALUE);
}
private boolean isValidBST(Node node, int l, int h) {
     if(node == null)
         return true;
     return node.value > l 
         && node.value < h
         && isValidBST(node.left, l, node.value)
         && isValidBST(node.right, node.value, h);
} 
```

递归调用确保子树节点在其祖先的范围内，这很重要。运行时间复杂度为 O(n)，因为每个节点都被检查一次。

另一种解决方案是进行中序遍历并检查序列是否已排序，特别是因为您已经知道提供了二叉树作为输入。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-19T05:56:42.190

@Dhruv 提供的答案很好。除此之外，这是另一种在 O(n) 时间内工作的解决方案。
在这种方法中，我们需要跟踪前一个节点。在每次递归调用中，我们都会检查前一个节点数据和当前节点数据。如果当前节点数据小于前一个，我们返回 false

```
int isBST(node* root) {
  static node* prev  = NULL;

  if(root==NULL)
    return 1;

  if(!isBST(root->left))
    return 0;

  if(prev!=NULL && root->data<=prev->data)
    return 0;

  prev = root;
  return isBST(root->right);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:22:51.017

```
boolean b = new Sample().isBinarySearchTree(n1, Integer.MIN_VALUE, Integer.MAX_VALUE);
.......
.......
.......
public boolean isBinarySearchTree(TreeNode node, int min, int max){
  if(node == null){
    return true;
  }

  boolean left  = isBinarySearchTree(node.getLeft(), min, node.getValue());
  boolean right = isBinarySearchTree(node.getRight(), node.getValue(), max);

  return left && right && (node.getValue()<max) && (node.getValue()>=min);      
} 
```

欢迎评论。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:24:44.177

我认为第二种方法是对的。可以递归方式遍历树。在每次迭代中，可以存储当前子树的下界和上界。如果我们要检查具有根 x 的子树，并且子树的边界是 l 和 h，那么我们只需要检查 l <= x <= h 并检查具有边界 l 和 x 的左子树，以及右一个边界为 x 和 h。

这将具有 O(n) 复杂度，因为我们从根开始，并且每个节点仅作为某个子树的根检查一次。此外，递归调用需要 O(h) 内存，其中 h 是树的高度。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-21T08:55:54.107

上面有一些使用 INTEGER.MAX AND MIN 的示例我看不出通过它们的理由及其意义，如果我错了，请纠正我或解释原因。

更多的二叉搜索树可能有通过 compareTo 方法或 Cooper 比较的对象..（因此 Integer.MIN 和 Integer.MAX 不适合该模型）我正在编写一个返回 true 或 false 的代码，必须调用（root_node ,true) 如果是 bst 则返回 true 否则返回 false

```
void boolean isBSt( node root_node, boolean passed_root)
{

  if ( node==null){
        if ( passed_root)
        return false;
        // you have passed null pointer as 
        //root of the tree , since there is no 
        // valid start point we can throw an exception or return false      
        return true;
   }

  if( node.right !=null ) 
     if ( node.right.data <= node.data)
   return false;

  if ( node.left !=null ) 
        if ! ( node.left.data <= node.data) 
    return false;

  return ( isBST( node.right , false) && isBST( node.left, false ) )

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-09-27T00:01:44.987

看看这个解决方案：http: [//preparefortechinterview.blogspot.com/2013/09/am-i-bst.html](http://preparefortechinterview.blogspot.com/2013/09/am-i-bst.html)

它解释了不同的方法，并为您提供了一种通用且有效的方法。希望能帮助到你。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-10T04:32:42.187

这是另一个解决方案，它使用 2 个辅助函数来使用辅助函数 minValue 和 maxValue 为每个节点计算子树中的最小值和最大值

```
int isBST(struct node* node)
    {
      if (node == NULL)
        return(true); 

      /* false if the max of the left is > than us */
        if (node->left!=NULL && maxValue(node->left) > node->data)
            return(false); 

      /* false if the min of the right is <= than us */
        if (node->right!=NULL && minValue(node->right) < node->data)
            return(false); 

      /* false if, recursively, the left or right is not a BST */ 
         if (!isBST(node->left) || !isBST(node->right))
           return(false); 

      /* passing all that, it's a BST */
          return(true);
    } 
```

# c# - 如何访问 aspx 页面上的子对象字符串？

> ID：10832497
> 
> 赞同：2
> 
> 时间：2012-05-31T11:13:54.953
> 
> 标签：c#, asp.net, repeater, child-objects

我正在尝试使用一个具有子对象的类，该对象具有一个字符串 - 我正在尝试使用我的 aspx 页面上的内联 C# 代码来访问它。

更具体地说，假设我正在使用具有 Title 属性（字符串）的“上传”类的对象。上传对象也可以具有“文件”属性（对象）。每个 File 对象都有一个 Url 属性（字符串）。

我可以像这样访问标题：

```
<%# ((Upload)Container.DataItem)["Title"] %> 
```

这很好用。但是，我如何访问文件的 URL？因为以下不起作用：

```
<%# ((File)((Upload)Container.DataItem)["File"]).Url %> 
```

正如您可以从语法中猜到的那样，这一切都在一个 asp 中继器中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:25:47.997

你可以尝试类似的东西

```
<%# Bind("File.Url") %> 
```

或者

```
<%# DataBinder.Eval(Container.DataItem, "File.Url") %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T11:49:00.040

尝试这个：

`<%# ((Upload)Container.DataItem).File.Url %>`

你得到容器数据项并转换它。拥有对象后，您可以像调用任何其他对象一样调用它的属性和方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:31:05.823

我只是给你一个样本，你可以自己实现：-

1.  首先创建一个服务器端代码以返回文件的 URL。
2.  然后从客户端调用该函数以获取传递给它的标题的 URL。

下面是一个返回带有后缀点的文本的示例

第 1 步：创建服务器端代码以返回带有后缀点的文本

```
public string ReturnDotSuffix(string strValue, int iFontSize, int iWidth)

{
    string strReturnValue = string.Empty;
    try
    {
        CommonLib objCommonLib = new CommonLib();
        strReturnValue = objCommonLib.SuffixDots(strValue, iFontSize, iWidth);

    }
    catch (Exception ex)
    {
        HandleException.ExceptionLogging(ex.Source, ex.Message, true);
    }
    return strReturnValue;
} 
```

第 2 步：从客户端调用它。

Text='<%# ReturnDotSuffix((string)DataBinder.Eval(Container.DataItem, "MessageTitle"),8,170) %>'

在您的情况下也可以这样做。

# windows - 在 64 位 Windows 中跳过驱动程序登录的解决方法

> ID：10832499
> 
> 赞同：4
> 
> 时间：2012-05-31T11:14:00.033
> 
> 标签：windows, driver, kmdf

我是个人，而不是公司，我正在研究虚拟内核模式设备驱动程序。我知道我可以测试签名驱动程序并在测试模式下运行。但是我想免费分发我的驱动程序，但我没有资源通过 verisign 或 globalsign 购买签名，因为它非常昂贵，而且我没有通过这个驱动程序获得任何收益。

此外，对某些用户来说，测试签署驱动程序将是一项艰巨的任务。所以我想知道是否有任何解决方法可以在 64 位中使用没有签名的驱动程序？就像在兼容 32bit 的情况下运行它，或者可以代表用户自签名驱动程序的脚本。

* * *

> **所以现在的问题本质上是，如果我分发此过程中提到的所有 exe 并制作一个脚本来运行所有这些命令。那么驱动程序可以由用户使用脚本签名吗？**
> 
> 程序 ：
> 
> 1.执行Inf2Cat.exe /driver:"U:\MyDriver" /os:7_X64
> 
> 2.在WDK中找到makecert.exe Makecert -r -pe -ss PrivateCertStore -n "CN=TestCertforWDK" TestCert.cer
> 
> 3.使用WDK中的Signtool.exe对cat文件进行签名 Signtool sign /v /s PrivateCertStore /n TestCertForWDK /t [http://timestamp.verisign.com/scripts/timestamp.dll](http://timestamp.verisign.com/scripts/timestamp.dll) "U:\MyDriver\MyDriver.cat"
> 
> 4.使用WDK中的Signtool.exe对驱动进行签名 Signtool sign /v /s PrivateCertStore /n TestCertForWDK /t [http://timestamp.verisign.com/scripts/timestamp.dll](http://timestamp.verisign.com/scripts/timestamp.dll) "U:\MyDriver\MyDriver.sys"
> 
> 5.在测试机上，导入证书：certmgr.exe /add TestCert.cer /s /r localMachine root
> 
> 6.将其添加到受信任的发布者列表 certmgr.exe /add TestCert.cer /s /r localMachinetrustedpublisher
> 
> 7.验证驱动Signtool的标志 verify /pa /v MyDriver.sys
> 
> 8.验证cat文件签名Signtool verify /pa /v /c MyDriver.cat MyDriver.inf

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:48:57.013

所以这个问题的答案是一个很大的不。很抱歉，但除非您找到用户驱动的解决方法，或者某些公司愿意赞助（签署您的驱动程序），否则这是不可能的（我的意思是不可能的 :)）。此功能已在 Windows 中实现，以防止安装讨厌的 rootkit。

尽管它可能看起来很苛刻，但它阻止了许多 rootkit 能够安装在用户计算机上。事实上，微软最近修补了一个与驱动程序签名相关的漏洞，该漏洞允许黑客在 Windows 中使用微软的签名引擎对系统接受的驱动程序进行签名。

我非常怀疑您是否找到了一种以编程方式解决此问题的方法。如果你这样做，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T08:17:50.097

让驱动程序签名是在用户计算机上获取驱动程序并轻松运行它的唯一正确方法。您不能期望用户将机器置于测试签名模式。我认为您可以参考测试签名成本来了解它的成本，我建议您考虑到您的驱动程序的长期投资。不确定费率是否有任何变化。

[https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/9a839ac3-4438-43bb-b1b8-4ed8da58ab45/how-much-does-it-cost-to-get-hck-certificates?forum=呸呸呸](https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/9a839ac3-4438-43bb-b1b8-4ed8da58ab45/how-much-does-it-cost-to-get-hck-certificates?forum=whck)

# php - 如何在新的一天开始后在 php 中创建一个新的文本文件以实现连续运行的进程

> ID：10832504
> 
> 赞同：2
> 
> 时间：2012-05-31T11:14:16.427
> 
> 标签：php

我正在运行一个蜘蛛（连续进程），当发生错误时，我正在创建一个错误日志文件（errorlog.txt）。但是，一旦新的一天开始，即上午 12 点之后，错误仍会写入前一天的文件中。

例如：如果我在 5 月 30 日运行蜘蛛，一旦时间是上午 12 点并且蜘蛛中发生任何错误，错误仍然会写入 5 月 30 日的文本文件中。一旦发生错误，如何创建新文件并且第二天又开始了？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:32:07.077

将日期添加到日志文件名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T00:15:14.307

我知道已经很晚了，但也许这个答案会对某人有所帮助

在写入报告文件之前，使用 date() 函数命名它，如下所示

```
date_default_timezone_set('Europe/Istanbul'); // set to your time region
$report_file = "report".date("d-m-Y").".html"; 
```

然后当您写入文件时，使用 $report_file 作为输出

```
file_put_contents($report_file,'<div class="fancy"> your fancy report data here </div>',FILE_APPEND); 
```

这样你的脚本每天都会创建每日报告

# jquery - JQuery循环，我怎样才能为不同的图像设置间隔，这样我就可以让一些图像一起出现

> ID：10832505
> 
> 赞同：0
> 
> 时间：2012-05-31T11:14:18.500
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我正在使用 jquery 循环，这是我的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style type="text/css">
pre { display:none }
#main h2 { text-align: center }
#right { cursor: pointer }
#twitter-widget { width: 300px; float: right; margin-left: 20px; height: 200px; }
.twitterSearchTitle { font-family: 'trebuchet ms' }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
<script type="text/javascript">

$(function() {
// run the code in the markup!
$('#demos pre code').each(function() {
    eval($(this).text());
});

});
</script>
</head>
<body>

<div id="main">

<div id="demos">
    <div id="two" class="pics">
        <img id="letter-i" src="02.jpg" width="300" height="330" />
        <img id="veggi2" src="05.jpg" width="300" height="330" />
    </div>

    <pre><code class="mix">$('#two').cycle({ 
                    fx:     'fade', 
                    speed:   300, 
                    timeout: 3000, 
                    pause:   1 
                    });
    </code></pre>
    </td><td>
</body>
</html> 
```

我想要做的想法有点难以解释，以一种非常简单的方式，我希望我的图像以不同的间隔淡入和淡出。更准确地说，例如在我的代码中，考虑`div`我`id="two"`希望第一张图像更快地更改为第二张图像，而第二张图像更慢地更改为第一张图像。

使用我的代码，图像以相同的速度淡入和淡出。我需要知道如何为每个图像设置不同的间隔。

The main idea is that certain groups of images appear together, So I want to synch the intervals some how that I have the following pattern 1-2-3 -> 1-4-3 -> 5-4-6 -> 1-4-3 -> 1-2-3 ->... (imagine that I have images 1,2,3,4,5,6, for example 1-2-3 shows that images 1 and 2 and 3 apear together, and -> shows the transition)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:19:44.210

I figured it out, instead of setting different intervals for each image I defined the groups of picture that I wanted to show together, then I set my cycles between these groups:

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style type="text/css">
pre { display:none }
#main h2 { text-align: center }
#right { cursor: pointer }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
<script type="text/javascript">

$(function() {
// run the code in the markup!
$('#demos pre code').each(function() {
    eval($(this).text());
});

});
</script>
</head>
<body>

<div id="main">

<div id="demos">
 <div id="slider">

    <div id="bxo" class="pics">
        <img id="letter-b" src="01.jpg" width="300" height="330" />
        <img id="veggi1" src="02.jpg" width="300" height="330" />
        <img id="letter-o" src="03.jpg" width="300" height="330" />

    </div>
    <div id="bio" class="pics">
        <img id="letter-b" src="01.jpg" width="300" height="330" />
        <img id="letter-i" src="05.jpg" width="300" height="330" />
        <img id="letter-o" src="03.jpg" width="300" height="330" />
    </div>
    <div id="xix" class="pics">
        <img  id="veggi2" src="04.jpg" width="300" height="330" />
        <img id="letter-i" src="05.jpg" width="300" height="330" />
        <img  id="veggi3" src="06.jpg" width="300" height="330" />
    </div>
    <div id="bio" class="pics">
        <img id="letter-b" src="01.jpg" width="300" height="330" />
        <img id="letter-i" src="05.jpg" width="300" height="330" />
        <img id="letter-o" src="03.jpg" width="300" height="330" />
    </div>

       </div>
       <pre><code class="mix">$('#slider').cycle(
    { 
                    fx:     'fade', 
                    speed:   500, 
                    timeout: 3000, 
                    pause:   1 
                    });
                    </code></pre>
 </body>
 </html> 
```

# mysql - 将 CSV 转换为 MySQL (MyISAM) 的磁盘大小

> ID：10832506
> 
> 赞同：0
> 
> 时间：2012-05-31T11:14:25.653
> 
> 标签：mysql, csv

在将当前 CSV 文件转换为 MyISAM 表之后，我正在寻找对数据库表大小的大致估计。我知道 CSV 的文件大小，我需要估计 MyISAM 的文件大小。我想它会更大，因为索引（只需 1 个简单索引就足够了），但是多少？大约是2倍、10倍还是50倍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:27:40.517

大概您正在寻找容量规划大小数据以提供给您的服务器管理员。

如果您的 CSV 文件的总大小小于 200-300 兆字节，只需告诉她“2 GB 或更少”。

如果你的 CSV 文件比这个大，你肯定需要运行一些试验来解决这个问题。请注意，索引不一定小于它们索引的数据，并且它们可以比线性增长更快。

如果您正在与您的服务器管理员争论少于几千兆字节的任何数量的磁盘空间，那么不幸的证据表明您的组织缺乏资金和人才。

在这种情况下，您将不得不向他们证明：在您的个人计算机上加载数据库，测量 myISAM 文件的大小，并告诉他们您的想法。

# java - 从字符串中修剪/删除不需要的简单字符串（使用 Scanne.next() 从文件中获取）以使用 Double.parseDouble() 解析双精度

> ID：10832508
> 
> 赞同：0
> 
> 时间：2012-05-31T11:14:31.700
> 
> 标签：java, parsing, java.util.scanner

我有一个文本 (file.txt) 文件。该文件加载在扫描仪内。

在文件中有不同的行，每行有两个双精度值和一个整数值除以空格。

像这样：

```
1.0 1.2 2
0.9 1.0 10
50.4 9.2 20 
```

我需要完成三个数组。

每个数组对应一列。就像是：

```
double[] x = {1.0,0.9,50.4}
double[] y = {1.2,1.0,9.2}
double[] z = {2,10,20} 
```

我尝试使用此代码：

```
 double x[]= new double [3];
        double y[]= new double [3];
        double z[]= new double [3];

        File f = new File(ClassLoader.getSystemResource(file.txt).toURI());
        Scanner sc = new Scanner(f);
        String aux;

        for (int i=0;i<3;i++){
               aux = sc.next();
               x[i] = Double.parseDouble(aux);
               aux = sc.next();
               y[i] = Double.parseDouble(aux);
               aux = sc.next();
               z[i] = Double.parseDouble(aux);
       } 
```

但是当第一个 Double.ParseDouble() 我得到“NumberFormatException”。

我进行了调试，变量 aux 具有双精度值（例如：1.0），因此 Double.parseDouble(aux) 应该可以工作。

奇怪的是它说（当异常启动时）“aux”类似于 '1.0（之前带有 '）

有没有办法删除每个符号：比如 ' 或 , 或 . 或“bom”（如“特殊空间”）等等？我的意思是..不需要指定可能符号的完整列表，因为我不知道文件的“不可见”符号列表（我的意思是：编辑文件时我看不到的符号）。

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:31:30.260

您确定您的文件输入与您所说的完全一样吗？

我将您的确切文件输入复制/粘贴到一个名为“numbers.txt”的文件中并运行下面的类。似乎完全按预期工作：

```
public class NumberParser
{
    public static void parseData(String resourceName)
    {
        Scanner s = new Scanner(NumberParser.class.getResourceAsStream(
             resourceName));

        double [] x = new double[3];
        double [] y = new double[3];
        int [] z = new int[3];

        for (int i = 0; i < 3; i++)
        {
            x[i] = s.nextDouble();
            y[i] = s.nextDouble();
            z[i] = s.nextInt();
        }

        System.out.println(Arrays.toString(x));
        System.out.println(Arrays.toString(y));
        System.out.println(Arrays.toString(z));
    }

    public static void main(String[] args)
    {
        parseData("numbers.txt");
    }
} 
```

如果您的输入与您所说的不完全一样（使用逗号、引号等），但基本上是由这些标记分隔的数字，您可以将分隔符（有意义的标记之间的内容）设为除您要查找的内容之外的任何内容：

```
public static void parseMessedUpData(String resourceName)
{
    Scanner s = new Scanner(NumberParser.class.getResourceAsStream(
        resourceName));
    s.useDelimiter("[^0-9.]++"); // <-------

    double [] x = new double[3];
    double [] y = new double[3];
    int [] z = new int[3];

    for (int i = 0; i < 3; i++)
    {
        x[i] = s.nextDouble();
        y[i] = s.nextDouble();
        z[i] = s.nextInt();
    }

    System.out.println(Arrays.toString(x));
    System.out.println(Arrays.toString(y));
    System.out.println(Arrays.toString(z));
} 
```

# hibernate - 如何告诉休眠忽略抽象方法

> ID：10832509
> 
> 赞同：2
> 
> 时间：2012-05-31T11:14:33.313
> 
> 标签：hibernate, inheritance, mapping, transient

我有一个抽象类和 2 个继承自它的类。这个类有一个抽象方法

```
@Transient
public abstract String getFullName(); 
```

此方法不应映射到数据库中。但是它导致了一个问题，因为我无法运行我的应用程序。如果我删除它一切正常。那么我如何告诉hibernate忽略这个方法。

两个类的实现方法相同

```
@Transient
@Override
public String getFullName() {
    return this.getShot().getFullName() + "/" + this.getName();
} 
```

抽象类是这样注释的

```
@Entity
@Table(name = "Components")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "Type", discriminatorType = DiscriminatorType.STRING) 
```

其他注释在 getter 方法上，它们工作正常。如果我删除不应该放入 db 的抽象方法（因此是瞬态的），它一切正常。所以我的问题是上面这个抽象方法

给我的错误是

java.lang.RuntimeException：构造服务'ValueEncoderSource'的异常：调用服务贡献方法org.apache.tapestry5.hibernate.HibernateModule.contributeValueEncoderSource（MappedConfiguration，boolean，HibernateSessionSource，Session，TypeCoercer，PropertyAccess，LoggerSource）时出错：构造服务'HibernateSessionSource '：调用构造函数公共 org.apache.tapestry5.internal.hibernate.HibernateSessionSourceImpl(org.slf4j.Logger,java.util.List) 时出错：无法实例化默认 tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]

下划线的原因

引起：在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:57) 的 java.lang.reflect.InvocationTargetException： 45) at java.lang.reflect.Constructor.newInstance(Constructor.java:525) at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:105) ... 87 更多原因：org.hibernate。 PropertyNotFoundException: 在 org.hibernate.property.BasicPropertyAccessor 的 org.hibernate.property.BasicPropertyAccessor.createSetter(BasicPropertyAccessor.java:262) 类 com.bomahabo.flow.domain.project.shot.ShotComponent 中找不到属性 fullName 的设置器.getSetter(BasicPropertyAccessor.java:255) at org.hibernate.mapping.Property.getSetter(Property.java:309) at org.hibernate.tuple.entity.PojoEntityTuplizer.buildPropertySetter(PojoEntityTuplizer.java:304) at org.hibernate.tuple .entity.AbstractEntityTuplizer.(AbstractEntityTuplizer.java:156) 在 org.hibernate.tuple.entity.PojoEntityTuplizer.(PojoEntityTuplizer.java:77) ... 92 更多

有任何想法吗？

# linux - cc: 无法识别的选项“-KPIC”

> ID：10832513
> 
> 赞同：2
> 
> 时间：2012-05-31T11:14:40.127
> 
> 标签：linux, gcc, makefile

我的makefile中有以下内容：

```
CC = cc -g -KPIC 
```

当我运行 makefile 时，出现以下错误。

```
cc -g -KPIC   -DORA817 -DIDA_VERSION='"ISP-RG-V5.10.7GEN2A"' -c -g  -DDEBUG -DDEBUGLEVEL=0  -I../include -I../../../include -c \
        -o ../obj/checkdate.o ../src/checkdate.c
cc: unrecognized option '-KPIC' 
```

我的 gcc 版本是 gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-44)。知道为什么会发生此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:18:58.617

正如编译器所说，发生此错误，因为`-KPIC`不是有效选项。

也许你的意思是`-fPIC`？

# regex - 正则表达式：匹配至少两个搜索词

> ID：10832519
> 
> 赞同：3
> 
> 时间：2012-05-31T11:14:57.777
> 
> 标签：regex, search

我有一个搜索词列表，我想要一个匹配所有至少有两个项目的正则表达式。

术语：战争|军队|战斗|叛军|冲突

比赛：**叛军**和**军队**之间的**战争**导致了本周的几次**冲突。**（4 次命中）

 ******不匹配：在反恐**战争**中，奥巴马政府希望增加无人机袭击的次数。（仅 1 次命中）

背景：我使用 tiny-tiny rss 来收集和过滤大量新闻报道项目的提要。我每天收到 1000 - 2000 个提要项目，并希望按关键字过滤它们。通过使用 |OR 表达式，我得到了很多误报，所以我想我可以只在一个提要项中要求两个匹配项。

谢谢！

编辑：

我对正则表达式知之甚少，所以到目前为止我一直坚持使用简单的 |OR 运算符。我尝试将搜索词放在括号中 (war|fighting|etc){2,}，但只有当一个项目使用相同的词两次时才匹配。

EDIT2：对不起，我是正则表达式等的新手。事实是：正则表达式查询一个 mysql 数据库。它作为过滤器输入到 tt-rss 后端，它只允许一行（尽管理论上无限数量的字符）。在将提要项目导入 mysql 数据库时使用过滤器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T11:20:22.790

```
(.*?\b(war|army|fighting|rebels|clashes)\b){2,} 
```

如果您需要避免匹配相同的术语，您可以使用：

```
.*?\b(war|army|fighting|rebels|clashes).*?(\b(?!\1)(war|army|fighting|rebels|clashes)\b) 
```

它匹配一个术语，但通过使用否定前瞻来避免再次匹配相同的术语。

在java中：

```
Pattern multiword = Pattern.compile(
    ".*?(\\b(war|army|fighting|rebels|clashes)\\b)" +
    ".*?(\\b(?!\\1)(war|army|fighting|rebels|clashes)\\b)"
);
Matcher m;
for(String str : Arrays.asList(
        "war",
        "war war war",
        "warm farmy people",
        "In the war on terror rebels eating faces"

)) {
    m = multiword.matcher(str);
    if(m.find()) {
        logger.info(str + " : " + m.group(0));
    } else {
        logger.info(str + " : no match.");
    }
} 
```

印刷：

```
war : no match.
war war war : no match.
warm farmy people : no match.
In the war on terror rebels eating faces : In the war on terror rebels 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:24:41.320

这不是（完全）正则表达式的工作。更好的方法是扫描文本，然后计算唯一匹配组。

在 Ruby 中，根据匹配计数进行分支非常简单。例如：

```
terms = /war|army|fighting|rebels|clashes/
text = "The war between the rebels and the army resulted in..."

# The real magic happens here.
match = text.scan(terms).uniq

# Do something if your minimum match count is met.
if match.count >= 2
  p match
end 
```

这将打印`["war", "rebels", "army"]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:37:52.370

如果你想用一个正则表达式来做这一切，那可能并不容易。

但是，您可以执行以下操作：

```
<?php
...
$string = "The war between the rebels and the army resulted in several clashes this week. (4 hits)";

preg_match_all("@(\b(war|army|fighting|rebels|clashes))\b@", $string, $matches);
$uniqueMatchingWords = array_unique($matches[0]);
if (count($uniqueMatchingWords) >= 2) {
    //bingo
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:21:31.253

正则表达式可以解决问题，但正则表达式会非常庞大​​。

请记住，它们是简单的工具（基于有限状态自动机），因此没有任何记忆可以让他们记住已经看过的单词。因此，即使可能，这样的正则表达式也可能看起来像一大堆或（例如，对于每个可能的输入顺序或其他东西，一个“或”）。

我建议自己进行解析，例如：

```
var searchTerms = set(yourWords);
int found = 0;
foreach (var x in words(input)) {
    if (x in searchTerms) {
        searchTerms.remove(x);
        ++found;
    }
    if (found >= 2) return true;
}
return false; 
```******

# c# - SharePoint 2010 列表视图保存事件

> ID：10832520
> 
> 赞同：3
> 
> 时间：2012-05-31T11:15:05.560
> 
> 标签：c#, sharepoint-2010, splist, spview

我试图在列表视图上捕获保存事件，而不是列表本身。这样我就可以停止保存某些视图。

我试过 List SPListEventReciever，但这似乎只捕获列表本身的事件，而不是视图。

编辑：正如下面评论中提到的，我试图阻止人们保存的视图是外部列表上的默认视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:37:52.937

在您的情况下，我会尝试以下方法：

*   完全删除普通用户修改列表的权限（如果可以接受）。这仍然应该让他们创建*个人*观点。
*   编写将采用个人视图、分析它、（删除它？）和（使用提升的权限）创建等效的公共视图的代码。（遗憾的是，您不能只更改`PersonalView`属性。）小心捕捉用户可以在 create-a-view UI 上执行的所有操作 - 这将是最棘手的部分。
    *   可以选择编写类似的代码以允许将视图从公共切换回个人（检查它不是默认视图或您要保护的任何其他视图。）
    *   可以选择跟踪谁“拥有”这些自定义视图之一，例如在隐藏列表中，并且只允许所有者将视图恢复为个人视图。
*   编写此代码的界面，例如允许用户从相关视图中选择的应用程序页面，或功能区上的自定义操作。

# java - Java regex matcher.find 偶尔会失败

> ID：10832521
> 
> 赞同：1
> 
> 时间：2012-05-31T11:15:10.193
> 
> 标签：java, regex

我有正则表达式，它解析模板中使用的 freemarker 宏的所有名称（例如来自`<@macroName />`I need only `macroName`）。模板通常很大（大约 3 万个字符）。带有正则表达式的 Java 代码如下所示：

```
Pattern pattern = Pattern.compile(".*?<@(.*?)[ /].*?", 
                                  Pattern.DOTALL | Pattern.UNIX_LINES);
Matcher matcher = pattern.matcher(inputText);
while(matcher.find()){
    //... some code
} 
```

但有时会发生我得到这个异常：

```
java.util.regex.Pattern$Curly.match1(Pattern.java:3814)
java.util.regex.Pattern$Curly.match(Pattern.java:3763)
java.util.regex.Pattern$Start.match(Pattern.java:3072)
java.util.regex.Matcher.search(Matcher.java:1116)
java.util.regex.Matcher.find(Matcher.java:552)
... 
```

有人知道为什么会发生这种情况，或者有人可以确定我使用的正则表达式是否优化得很好吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:22:25.277

因为`<@macro macroName />`您的正则表达式看起来有点复杂。要么有些事情（特殊情况）`<@macro macroName />`没有描述，要么正则表达式太努力了。尝试：

```
<@macro\s+(\S+)\s+/> 
```

您现在应该在组#1 中有宏的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:22:29.563

您可以摆脱领先`.*?`，因为您不需要在匹配之前/之间使用文本。正则表达式引擎将负责扫描下一场比赛，它会比你正在做的更有效。只需给它标签本身的模式，然后别挡道。

您可以摆脱*尾随* `.*?`，因为它从不做任何事情。想一想：它不情愿地尝试匹配零个或多个任何字符。这意味着它尝试做的第一件事就是什么都不匹配。该尝试将成功（总是可能不匹配任何内容），因此它永远不会尝试消耗更多字符。

你可能想要这样的东西（）：

```
<@(\w+)[\s/] 
```

...或用 Java 语言：

```
Pattern p= Pattern.compile("<@(\\w+)[ /]"); 
```

您不需要 DOTALL（无点）或任何其他修饰符。

# windows - Windows 键盘键的 ascii 代码和功能键 (F1 - F12) 和其他键（如 shift、capslock、backspace、ctrl 等）的代码

> ID：10832522
> 
> 赞同：4
> 
> 时间：2012-05-31T11:15:20.647
> 
> 标签：windows, keyboard, ascii, hex

为了编写一个与键盘相关的应用程序，我想要我键盘上按键的 ASCII 码列表。

它是一个 Windows 键盘：

![在此处输入图像描述](../Images/48858b7bacf66d304c55f0305367582f.png)

从哪里可以得到代码？如果我得到十六进制的代码，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-08T07:42:56.347

您可以通过在浏览器控制台中运行（注入）以下 JavaScript 代码来获取所有`keyCode`值（甚至是键）。`Function`粘贴以下代码，然后按 Enter。然后单击页面中的任意位置以从控制台中移除光标。

然后按您想要十六进制键码的任何键

这是代码：

```
 document.addEventListener("keydown", function (e) {
      code = (e.keyCode);
      console.log("In decimal "+e.keyCode);
      var hex = code.toString(16);
      console.log("In hex "+hex);
    }, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:37:27.020

您正在寻找的内容被称为 **Scancode** [here](http://www.quadibloc.com/comp/scan.htm)和[here](http://en.wikipedia.org/wiki/Scancode)。在 linux 上有一个命令`showkey`可以打印他们按下的键的扫描代码。但是，在 Windows 上，您可能需要编写程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:24:22.353

Function (F1-F12)、Control、Windows 或 Alt 键没有 ascii 代码。

如果您需要的是大多数语言中已经定义的字符的 ASCII。

看看这个，它还包括十六进制代码

[带十六进制的 ASCII 表](http://www.asciitable.com/)

# wordpress - 为什么我必须使用必需的参数？

> ID：10832523
> 
> 赞同：0
> 
> 时间：2012-05-31T11:15:21.157
> 
> 标签：wordpress, add-filter

为什么，当我想使用

```
add_filter( 'author_link', 'foo', 10, 3 );
function foo ( $link, $author_id, $author_nicename ) {} 
```

为什么我必须使用 3 个必需参数？

为什么我不能这样做：

```
add_filter( 'author_link', 'foo' );
function foo ( $author_id ) {} 
```

很高兴获得一些关于此的文章。提前致谢。

WP-dev 中的 PS 初学者。^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:52:52.830

理论上允许这样做，但不能保证第二个和第三个参数会正确传递给您的函数。如果您需要确保正确传递前两个参数，则应声明如下：

add_filter('author_link', 'foo', 10, 2); 函数 foo ( $link, $author_id ) {}

[您可能想在http://codex.wordpress.org/Plugin_API](http://codex.wordpress.org/Plugin_API)上阅读有关 API 的更多信息

# java - 使用同一类的按钮关闭 JFrame

> ID：10832526
> 
> 赞同：2
> 
> 时间：2012-05-31T11:16:04.190
> 
> 标签：java, swing, jframe

基本上，我想做的是`JFrame`在同一个类中用一个按钮关闭 a 。我有 2 节课`Class1`和`Class2`. 当我点击“添加数据”按钮时`Class1`，它会打开`Class2`（有点像一个对话框），`Class2`当我点击“完成”按钮时我想关闭它。

-------------------------------------------Class1------ -------------

```
public class Class1 extends JFrame{

private JPanel contentPane;

      public Class1(){
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 355, 251);
        contentPane = new JPanel();
        contentPane.setBackground(Color.WHITE);
        contentPane.setForeground(Color.BLACK);
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

//Add labels and other relevant content here

        JButton addData = new JButton("Add Data");
        addData.setBounds(32, 135, 130, 23);
        contentPane.add(addData);
        addData.addActionListener(new addDataActionListener());
      }
class addDataActionListener implements ActionListener{

        public void actionPerformed(ActionEvent arg5) {
            Class2 co = new Class2();
            co.setVisible(true);
        //opening the Class2 JFrame
        }

    }

} 
```

-------------------------------------------Class2------ -------------

```
public class Class2 extends JFrame {

    private JPanel contentPane;

      public Class2(){
        setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
        setBounds(100, 100, 415, 238);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

//Add labels and other relevant content here

        JButton done = new JButton("Done");
        done.setBounds(206, 164, 89, 23);
        contentPane.add(done);
        done.addActionListener(new doneActionListener());
      }

    class doneActionListener implements ActionListener{
        public void actionPerformed(ActionEvent e) {

        //add stuff that needs to be done

            Class2 co2 = new Class2();
            co2.setVisible(false);
            co2.dispose();
} 
```

但是，当我单击“完成”按钮时，它会执行所有其他操作，但不会关闭 Class2 中的框架。如果有人可以让我知道它是如何完成的，将不胜感激。

附言。我是 Java 新手（大约 4 个月前开始）。对不起，如果我不够清楚。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:21:23.570

你`doneActionListener`的做错事了。

您的代码实际上是在创建新`Class2`实例并关闭它，而不是关闭当前打开的实例。

尝试这个：

```
class doneActionListener implements ActionListener{

    private JFrame toBeClose;

    public doneActionListener(JFrame toBeClose) {
        this.toBeClose = toBeClose;
    }

    public void actionPerformed(ActionEvent e) {
        toBeClose.setVisible(false);
        toBeClose.dispose();
    }
} 
```

和

```
public Class2(){   
    // other code 
    // pass this to doneActionListener to be close
    done.addActionListener(new doneActionListener(this));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:20:26.203

我不明白在 doneActionListener 中对 co2 的需求。我相信您可以通过将最后几行更改为：

```
 this.setVisible(false);
   this.dispose(); 
```

不过，我没有测试它。如果解决方案有效，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:23:00.167

*   不要创建多个[JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)，如果您需要弹出窗口，请查看带有父级的[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)`JFrame`

*   不要扩展`JFrame`，您必须创建局部变量，否则您不能在层次结构中丢失对此`Object`的`JComponents`引用

*   我会改用[CardLayout](https://stackoverflow.com/a/10823493/714968)，[关于 CardLayout 的教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

*   隐藏`JFrame`你必须`JFrame#setDefaultCloseOperation(HIDE_ON_CLOSE)`或从`JButtons ActionListener`代码调用`JFrame#setVisible(false)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-23T11:33:23.030

我实际上是在寻找相同的答案，发现在`ActionListener`与您对应的部分中，`JButton`您应该插入

```
this.setVisible(false);

this.dispose(); 
```

只是终止并隐藏当前`JFrame`和父级`JFrame`将恢复，而整个程序终止包括

```
System.exit(0); 
```

这将使所有的`JFrame`'s dissapear

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T11:44:07.503

****在 doneActionListener 中尝试这些更改****

```
 class doneActionListener implements ActionListener{
        public void actionPerformed(ActionEvent e) {

        //add stuff that needs to be done

            SetVisible(false); //since its already extending the JFrame

    } 
```

或者干脆使用 .... **System.exit(0);**

# rmi - 远程 JMX 调用上的 NoRouteToHostException / NoSuchHostException

> ID：10832528
> 
> 赞同：7
> 
> 时间：2012-05-31T11:16:11.667
> 
> 标签：rmi, jmx, jboss6.x, centos5

我在 Centos 5.6 服务器上对 JBoss 6 进行远程 JMX 调用时遇到问题。我以前在 Debian 服务器上运行相同的应用程序时能够做到这一点。

```
./twiddle.sh --server=service:jmx:rmi:///jndi/rmi://SERVER:1090/jmxconnector invoke foo:service=bar baz

Caused by: java.net.NoRouteToHostException: No route to host
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:189)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595) 
```

如果我在 SERVER 上本地运行相同的调用，则会成功。我已经用 iptables 打开了端口 1090，我可以通过 telnet 连接到 SERVER:1090。`hostname -i`返回正确的 IP 地址。

我也试过用`-Djava.rmi.server.hostname=localhost`. 如果我这样做，那么我会得到一个不同的异常：

```
Caused by: java.rmi.NoSuchObjectException: no such object in table
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
    at javax.management.remote.rmi.RMIServerImpl_Stub.newClient(Unknown Source)
    at javax.management.remote.rmi.RMIConnector.getConnection(RMIConnector.java:2327)
    at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:279)
    at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
    at org.jboss.console.twiddle.Twiddle.createMBeanServerConnection(Twiddle.java:322)
    at org.jboss.console.twiddle.Twiddle.connect(Twiddle.java:331)
    at org.jboss.console.twiddle.Twiddle.access$400(Twiddle.java:60)
    at org.jboss.console.twiddle.Twiddle$1.getServer(Twiddle.java:217) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T14:06:20.087

事实证明，除了端口 1090，JMX/RMI 还使用动态分配的端口，该端口被防火墙阻止。因此，如果合适，请完全禁用防火墙，否则这似乎是一种替代方案（我还没有尝试过）：

[http://olegz.wordpress.com/2009/03/23/jmx-connectivity-through-the-firewall/](http://olegz.wordpress.com/2009/03/23/jmx-connectivity-through-the-firewall/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T21:49:51.430

我所做的是这样的：

更新文件 activemq.xml 并指定 rmiServerPort。

```
<managementContext createConnector="true" connectorPort="SOME_PORT" rmiServerPort="SOME_OTHER" jmxDomainName="org.apache.activemq"/> 
```

通过更新您的 iptables 条目来允许这两个端口，重新启动 activemq，它应该可以工作。

# python - Twisted irc python bot - 缓冲消息

> ID：10832531
> 
> 赞同：3
> 
> 时间：2012-05-31T11:16:17.117
> 
> 标签：python, twisted, irc, bots

> “为什么我用 transport.write 发送的数据需要很长时间才能到达连接的另一端？”
> 
> Twisted 只能在您放弃对反应器的执行控制后才能发送数据。例如，如果您有一个无限循环将数据写入传输，则数据将永远不会真正发送，因为控制永远不会离开您的代码并返回反应堆。”

我在扭曲的常见问题解答中发现了这一点，这正是我的问题。有没有办法解决这个问题，所以我可以立即发送消息而不是等待循环完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:42:08.023

不可以。您不能立即发送消息。控制必须返回到事件循环。幸运的是，您真正要解决的问题（从对问题的评论推断），限制您发送的消息的速率，并不需要能够做到这一点。相反，停止`time.sleep`在循环中使用并开始使用`reactor.callLater`来延迟代码的执行。或者使用 IRC API 的特性来为你做这些事情（你似乎已经发现了，`lineRate`）。

# javascript - jQuery ajax 调用的参数化成功函数

> ID：10832532
> 
> 赞同：1
> 
> 时间：2012-05-31T11:16:22.203
> 
> 标签：javascript, ajax

我想创建一个函数来调用 jQuery $.ajax 函数，其参数指示成功事件后必须调用的成功函数名称。

像这样的东西，但我不知道如何填写“完整”参数，或者即使可以这样做：

```
function callService(successFunctionName){
$.ajax({
 url: "serviceURL",
 type: "POST",
 data: "request",
 contentType: "text/xml; charset=\"utf-8\"",
 complete: successFunctionName
});

}

succesFunction1(){
}

successFunction2(){
} 
```

**编辑：我必须澄清successFunctionName是一个字符串**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:21:26.940

If`successFunctionName`是一个字符串，您可以使用`window[successFunctionName]`. 如果它是函数本身，它应该已经工作了

```
function callService(successFunctionName) {
    $.ajax({
        //...
        complete: (typeof successFunctionName === "string" ? window[successFunctionName] : successFunctionName)
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:23:06.817

你所做的是正确的。

打电话给你时，`callService`你会这样做：

```
callService(function(resp)
{
    alert('Success: ' + resp);
}): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:24:15.500

我想你想回电 Ajax 成功，不完整？

为了成功：

```
 $.ajax({
   ......    
   success: successFunctionName

  }); 
```

对于完整的：

```
 $.ajax({
   ......    
  }).done(function(){
     successFunctionName();
  }); 
```

# sql - 使用 smo 创建表中的错误

> ID：10832533
> 
> 赞同：0
> 
> 时间：2012-05-31T11:16:25.667
> 
> 标签：sql, sql-server-2008, exception, c#-4.0, smo

我正在尝试`testtable`在 winforms 应用程序中使用 SQL Server 管理对象 (SMO) 创建一个简单的表。

```
Database db = srv.Databases["model"];
Table t = new Table(db,"testtable");

DataType dt = new DataType(SqlDataType.Int);
Column c = new Column(t, "ID", dt);
c.Nullable = false;
t.Columns.Add(c);

dt = new DataType(SqlDataType.VarChar, 100);
c = new Column(t, "Name", dt);
t.Columns.Add(c);

try
{
    Index i = new Index(t, "PK");
    IndexedColumn ic = new IndexedColumn(i, "ID");
    i.IndexedColumns.Add(ic);
    i.IndexKeyType = IndexKeyType.DriPrimaryKey;
    i.Create();
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message.ToString());
} 
```

但每次它显示

> 索引 PK 创建失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:44:14.973

i was missing.. `table.create()`.. problem is solved.

# c++ - 如何检测导致内存泄漏 C++ 的行的实际位置？

> ID：10832541
> 
> 赞同：-1
> 
> 时间：2012-05-31T11:17:03.987
> 
> 标签：c++, pointers, memory-leaks

我有一个包含内存泄漏的 C++ 应用程序，尽管我正在使用“Leakdiag”和“LDGrapher”，但我不知道泄漏在哪里？！我也在使用“_CrtDumpMemoryLeaks();” 函数给我这样的结果：

```
etected memory leaks!
Dumping objects ->
{657} normal block at 0x00D93B98, 52 bytes long.
 Data: < N   N          > D8 4E D9 00 D8 4E D9 00 00 00 00 00 CD CD CD CD 
{656} normal block at 0x00D93AF0, 108 bytes long.
 Data: <(        ;  (   > 28 F0 12 00 00 00 00 00 98 3B D9 00 28 F0 12 00 
{655} normal block at 0x00D94ED8, 52 bytes long.
 Data: < ;   ;          > 98 3B D9 00 98 3B D9 00 CD CD CD CD CD CD CD CD 
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\occcont.cpp(923) : {641} normal block at 0x00D92100, 12 bytes long.
 Data: <            > F6 06 0A 00 00 00 00 00 00 00 00 00 
```

我怎样才能知道内存泄漏的真实位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:33:52.430

您可以重载全局 new 和 delete 运算符，并且每次使用 new 进行分配时，都会将指针的地址与`__LINE__`和`__FILE__`信息一起存储在某个容器中。当您删除某些内容时，您将其从容器中删除。当您的应用程序退出时，转储容器的内容。然后，您将知道您忘记取消分配的分配。您可以使用内存地址作为键，文件和行信息作为值的映射容器。

我认为这是尽可能接近内存泄漏的真实位置。

# c# - 测试会员提供者锁定用户方法

> ID：10832546
> 
> 赞同：1
> 
> 时间：2012-05-31T11:17:32.720
> 
> 标签：c#, tdd, asp.net-membership

这可能是相当基本的问题。我正在学习会员提供者和 tdd，所以就在这里。我想从我的 app.config 中读取 maxpasswordattempts 并使用该值来锁定用户，让我们说在密码尝试错误后 30 分钟。

**子** 问题如何读取存储在 app.config 中的数据并在下面的测试代码中使用

使用 tdd 的示例应该很棒。类似 **问题的东西**

```
[TestMethod]
public void CanLockUserAfterIncorrectPassowrdAttempts()
{

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:21:50.013

看一下我写的[pgProvider实现；](https://code.google.com/p/pgprovider/)它具有支持最大错误登录尝试的单元测试。

（具体来说，[这个测试夹具](https://code.google.com/p/pgprovider/source/browse/trunk/pgProvider.Tests/MembershipProvider/SecurityFeatures.cs)）

# php - PHP：将字符串切割成多个字符块

> ID：10832553
> 
> 赞同：1
> 
> 时间：2012-05-31T11:18:19.223
> 
> 标签：php, count, split, character

我有一个名为 $data 的变量，其中包含一个巨大的字符串（27338 个字符）。

此字符串将是 pdf 文件的内容。

我需要在 pdf 文件的每一页末尾添加一个脚注。

我计算出每页 2642 个字符。

如何将 $data 切成 2642 个字符的块，以便添加脚注？

我正在努力：

```
$split = preg_split('/(.{0,2642})\s/',
                    $data,
                    0,
                    PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);

$count = count($split);
foreach ($split as $key => $page) {

    echo $page; echo "<br><br>";
} 
```

但是每个 $page 显示的字符远少于 2642 个。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:25:18.183

我从未将它用于大量数据，但将字符串拆分为等长元素的一种方法是使用 str_split 函数（请参阅[http://php.net/str_split](http://php.net/str_split)）

用法：

```
$array = str_split('some text', 2); 
```

你会得到一个元素长度为 2 的数组（最后一个除外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:20:14.267

您可以使用 substring-function，它将从不同的字符串创建一个特定的子字符串（具有定义的长度）。

```
substr($STRING, A, B); //where $string is the original string, 
                       //A is the position where to start cutting
                       //B is how long the newly created string should be (it's optional!)
$text = "ABCDEF";
echo substr($text, 2, 2); //will give you "CD" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:27:42.770

这？

```
define("CHUNK_SIZE",2642);
$string = "big..";
$chunks = array();
for($x=0,$sz=strlen($string);$x<$sz;$x+=CHUNK_SIZE) {
   $chunks[] = substr($string,$x,$x+CHUNK_SIZE);
}
$chunks[0..n] += FOOTNOTE 
```

然后：

```
implode("",$chunks); 
```

# asp.net - 解析特定的网站数据并将它们存储在 db 表中

> ID：10832554
> 
> 赞同：1
> 
> 时间：2012-05-31T11:18:29.107
> 
> 标签：asp.net, parsing, web

我想从需要用户/通行证的站点解析一个表行（当前名称为 eg.test）并将其存储在数据库表中。这可以在asp.net（或asp.net mvc4）中完成吗？

*我有用户名/密码 *网站登录表格是：[http ://exat.ru/toursearch/](http://exat.ru/toursearch/)

谢谢 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:21:32.813

我认为您正在谈论网络抓取，而 ASP.net 可能不适合您正在尝试的内容。有许多网络抓取框架，例如

[http://scrapy.org/](http://scrapy.org/)用于 python

或者

[http://spyderwebtech.wordpress.com/2008/08/07/scraping-websites-with-curl/](http://spyderwebtech.wordpress.com/2008/08/07/scraping-websites-with-curl/)使用 CURL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:24:53.577

您可以查看可以为您获取站点数据的“HttpWebRequest”。尽管您可能必须使用自定义解决方案对其进行解析

# windows-phone-7 - 如何上传图像wp7服务器端。？

> ID：10832556
> 
> 赞同：1
> 
> 时间：2012-05-31T11:18:39.623
> 
> 标签：windows-phone-7, image-uploading

你好我有IsolatedStorageFile，这个文件是图像，所以我想将此图像上传到服务器端以使用Avatar，这样我如何上传我的图像字节[]。

我的代码是这样的。

```
 using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
            {
                // Open the file - error handling omitted for brevity
                // Note: If the image does not exist in isolated storage the following exception will be generated:
                // System.IO.IsolatedStorage.IsolatedStorageException was unhandled 
                // Message=Operation not permitted on IsolatedStorageFileStream 
                using (IsolatedStorageFileStream isfs = isf.OpenFile("myImage.jpg", FileMode.Open, FileAccess.Read))
                {
                    // Allocate an array large enough for the entire file
                    data = new byte[isfs.Length];
                    // Read the entire file and then close it
                    isfs.Read(data, 0, data.Length);
                    isfs.Close();
                }
            }

            // Create memory stream and bitmap
            MemoryStream ms = new MemoryStream(data);
            BitmapImage bi = new BitmapImage();
            // Set bitmap source to memory stream
            bi.SetSource(ms); 
```

如何将此字节 [] 上传到 webClient 或 HttpwebRequest。？

谢谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:30:17.197

您是否查看了以下链接：[文件上传](http://gregdoesit.com/2009/10/file-upload-in-silverlight-a-simple-solution/)。这应该有效。

# javascript - 使用 setInterval 启动两个函数并让它们立即启动，没有延迟

> ID：10832557
> 
> 赞同：2
> 
> 时间：2012-05-31T11:18:48.750
> 
> 标签：javascript, audio

我正在尝试创建一个场景，其中我有两个变量（或更多）都分配给它们自己的 setInterval 对象，并且每个 setInterval 对象都有不同的函数和不同的毫秒值。目标是通过启动重复播放两个不同音频文件的功能在两者之间创建节奏。

我遇到的当前问题是这样的：

如果一个设置间隔设置为 1000，而另一个设置为 500，则每个设置都不会立即*开始*。毫秒延迟是*开始时间的一部分*。我想知道如何省略开始时间的延迟，以便两个功能立即启动，但随后它们各自保持各自的间隔时间。

到目前为止，我提出的“逻辑”类似于创建一个函数，该函数立即播放没有毫秒值的音频，然后将另一个函数分配给 setInterval，该函数在下一个开始播放 x 毫秒数“打”补差价。我很好奇逻辑是否合理，或者这是一个我不知道的“传统”javascript解决方案存在的问题。似乎有一种更简单的方法。

我还没有开始编码，尽管如果有人已经解决了这个问题，我不想在我不得不这样做之前给自己挖个洞。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:24:23.630

我避免使用 setInterval。相反，我使用 setTimeout 和这样的模式：

```
function someThing() {
    // do something ...
    setTimeout(someThing, 2000);
    // or do something after setting the timeout ...
}

// either delay the start:
// setTimeout(someThing, 1000);
// or start right away
someThing() 
```

但是，如果您真的想使用 setInterval，那么类似的模式可以工作：

```
function someThing(firstTime) {
    if (firstTime === true) {
        console.log('setting interval for someThing');
        setInterval(someThing, 1000);
    }

    console.log('someThing called');
}
someThing(true); 
```

# ios - NSOperationQueue 和磁盘 I/O 阻塞

> ID：10832558
> 
> 赞同：1
> 
> 时间：2012-05-31T11:18:51.047
> 
> 标签：ios, nsoperation, nsoperationqueue

`UITableViews`当要求一个单元格时，我每个都有 3个，异步加载一个图像`NSOperation`。在我插入单元之前，这一切正常，此时 cellForRow 被调用，操作被创建并添加到队列中。

然而，队列中的操作不会再处理几秒钟，有时是几秒钟。我有另一个队列正在做一些图像处理并将图像保存到磁盘；我怀疑这两个队列都在争夺磁盘 I/O，但我不确定。理想情况下，当处理图像时，它应该由单元格下一个加载。但似乎处理是首先完成的，并且单元永远没有机会加载，即使我尝试了队列/线程优先级。有经验的能指导一下吗？

# jquery-mobile - jQuery mobile：使用按钮的正确方法？

> ID：10832560
> 
> 赞同：0
> 
> 时间：2012-05-31T11:19:03.547
> 
> 标签：jquery-mobile

我从 jQuery mobile 开始，我的按钮有一些问题。

Web 应用程序是一个购物清单。它显示要购物的商品列表，并在页脚按钮中显示我可以对商品执行的操作。

行动是：

1.  增加要购买的物品数量
2.  减少要购买的物品数量
3.  在列表中向上移动项目
4.  在列表中向下移动项目
5.  添加新项目
6.  删除项目
7.  修改物品文字描述

这些操作是在 javascript 中实现的并且工作正常。我遇到的问题是控制按钮和相关操作。

根据经验，我已经看到，对于递增和递减而言，使用处于活动状态的按钮会更方便，对于其他操作，最好使用选中的项目并在按下按钮时对选中的项目应用操作. 添加项目时，该项目将插入到所选项目之前，如果在未选择任何项目时按下，则新项目将附加到列表中。

我也想有2种模式。在一种模式下，仅显示递增和递减按钮，用户可以更新其列表中的项目数。在另一种模式下，用户正在修改其列表。在第二种模式下，需要选择的项目。

我设法通过使用 .on() 方法作为委托来关联我的项目列表的默认操作。

```
$('#itemList').on( "click", ".item", function(evt)
    { ctrl.doAction($(evt.currentTarget)); }); 
```

这是我用来测试第一种模式的 html 代码。

```
<!-- footer -->
<div data-role="footer" data-position="fixed" class="ui-bar" id="btnBar" >
    <a href="" data-role="button" data-icon="plus" id="btnPlus"> Plus </a>
    <a href="" data-role="button" data-icon="minus" id="btnMinus"> Minus </a>
</div>
<!-- /footer --> 
```

我应该把什么作为 href 值？我不想重新加载页面。在某些示例中，我看到“#”。

这就是我将操作与按钮相关联的方式：

```
$('#btnPlus').on( "tap", function(evt) 
    { ctrl.doAction = ctrl.increment; }); 
```

我遇到的另一个问题是按钮单击操作没有反馈。当我单击一个按钮时，我希望它会在短时间内突出显示。这不会发生。

浏览器也有不同的行为。在 Firefox 中，单击的按钮会出现一个蓝色光环，显然表明它具有焦点。但是该按钮未显示为活动状态。

如果我输入“#！” 作为 Android 上的 href （不知道是什么意思），单击的按钮显示为活动状态。

我应该使用 click 还是 tap 作为事件类型？我怎么能写 click 或 tap ？

如何实现显示为 active 和 inactive 的两种状态按钮？如何使用操作按钮：按下时总是显示非活动和反馈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:55:19.980

我自己解决了这个问题。

1.  为了在页脚中的按钮组之间切换，我在我的 HTML 文档中创建了多个页脚，其中 style="display:none" 在隐藏的页脚中。没有这个的会显示。我为每个页脚分配了一个特定的 ID，以便我可以编写 $("#footer1").hide(); $("#footer2").show();

2.  我有在页脚之间切换的按钮。必须使用“mouseup”事件调用页脚切换事件处理程序。这是它在 iPad 和 Android 手机上工作所必需的。

3.  要更改外观，请不要使用此处建议的 .button() 。利用：

    $("#myButton") .removeClass("ui-btn-up-a ui-btn-down-a ui-btn-hover-a") .addClass("ui-btn-up-b") .attr( “数据主题”，“b”）；

注意：我的代码中有一个错误导致绝望的头发拉扯

# uitableview - 使用 UISearchBar 使用 prepareForSegue 传递 indexPath.row 时遇到问题

> ID：10832564
> 
> 赞同：6
> 
> 时间：2012-05-31T11:19:33.387
> 
> 标签：uitableview, uisearchbar, uistoryboardsegue

我有一段时间让整个 Core Data、Storyboard、UISearchBar 三重奏按应有的方式一起工作。终于用 Core Data 成功建表，用 Search Text 缩小项目范围，并修改了 prepareForSegue，还有一个小问题......

当我单击表中的任何项目以转到详细信息视图时，未过滤表中的一切都很好。PrepareForSegue 被调用，细节完美呈现。

当我搜索时，我的表被过滤（我现在要过滤数组选项而不是第二个 NSFetchedResultsController，但不是因为缺乏尝试！）。

当我单击过滤列表中的项目时，会调用 prepareForSegue 并推送详细信息视图，但是，它总是从列表中的第一项中提取详细信息！

例如，如果我搜索“c”并且列表缩小到“Charlie”和“Cookie”，当我选择“Charlie”时，我会看到“Charlie”的详细视图。当我选择“Cookie”时，不幸的是，我还看到了“查理”的详细视图

我假设 prepareForSegue 代码是问题所在（可能是错误的？）。这是代码：

```
 SampleTVC *sampleDetailTVC = segue.destinationViewController;
    sampleDetailTVC.delegate = self;

    // Store selected Role in selectedRole property
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
  //  self.selectedRole = [self.fetchedResultsController objectAtIndexPath:indexPath];
    if (savedSearchTerm){
        self.selectedRole = [self.searchResults objectAtIndex:indexPath.row];
    } else {
        self.selectedRole = [self.fetchedResultsController objectAtIndexPath:indexPath];
    }
    NSLog(@"Passing selected role (%@) to SampleTVC", self.selectedRole.name);
    sampleDetailTVC.role = self.selectedRole; 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T21:28:58.437

Thanks to Phillip Mills, for the answer:

just simply had to add:

```
 indexPath = [self.searchDisplayController.searchResultsTableView indexPathForSelectedRow]; 
```

full sample:

```
 SampleTVC *sampleDetailTVC = segue.destinationViewController;
    sampleDetailTVC.delegate = self;
     // Store selected Role in selectedRole property
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    //  self.selectedRole = [self.fetchedResultsController objectAtIndexPath:indexPath];
    if (savedSearchTerm){
         indexPath = [self.searchDisplayController.searchResultsTableView indexPathForSelectedRow];
    self.selectedRole = [self.searchResults objectAtIndex:indexPath.row];
    } else {
        self.selectedRole = [self.fetchedResultsController objectAtIndexPath:indexPath];
     }
    NSLog(@"Passing selected role (%@) to SampleTVC", self.selectedRole.name);
    sampleDetailTVC.role = self.selectedRole; 
```

# java - 如何将 Web 服务部署到亚马逊 EC2？

> ID：10832565
> 
> 赞同：6
> 
> 时间：2012-05-31T11:19:42.237
> 
> 标签：java, eclipse, web-services, amazon-ec2

我刚刚创建了一个 Web 应用程序并将其部署到 Amazon EC2，但现在我想创建一个 Java Web 服务并将其部署到 Amazon AWS 中的实例，以便能够在我的应用程序中使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:45:16.900

有许多可能的配置。这可以是其中之一：

1.  在启用 AJP 的情况下启动应用程序服务器（可能是 tomcat）。
2.  使用 apache HTTP 服务器 JK 模块将 Web 服务器连接到 Tomcat 应用程序。
3.  在应用服务器上部署您的 Web 应用程序，并使其使用外部域名或 ip 生成 WSDL。例如： http: [//www.domain.com/application/service](http://www.domain.com/application/service)
4.  确保 Amazon 防火墙为该实例打开了端口 80。
5.  如果您使用域名，请将您的 DNS 指向该主机。

# c# - 将整数转换为三位数

> ID：10832567
> 
> 赞同：18
> 
> 时间：2012-05-31T11:19:49.080
> 
> 标签：c#, asp.net, integer, digits

我有一个整数变量。如果它的 1-9 它只显示为“1”或“9”，我希望将变量转换为 3 位数字，即。“001”或“009”等有什么想法吗？我正在使用 C#、ASP.Net

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-31T11:44:57.640

利用

```
int X = 9;

string PaddedResult = X.ToString().PadLeft (3, '0'); // results in 009 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/92h5dc07.aspx)和[此处](http://msdn.microsoft.com/en-us/library/66f6d830.aspx)的MSDN 参考资料。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-31T11:46:19.437

关于什么

```
var result = String.Format("{0:000}", X);
var result2 = X.ToString("000"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-17T12:27:58.947

```
int i = 5;
string tVal=i.ToString("000"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-10T16:07:57.520

来自：[https ://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings#DFormatString](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings#DFormatString)

“D”（或十进制）格式说明符将数字转换为十进制数字字符串 (0-9)，如果数字为负数，则以减号为前缀。

精度说明符指示结果字符串中所需的最小位数。如果需要，该数字在其左侧填充零以产生精度说明符给出的位数。

喜欢：

```
int value; 

value = 12345;
Console.WriteLine(value.ToString("D"));
// Displays 12345
Console.WriteLine(value.ToString("D8"));
// Displays 00012345

value = -12345;
Console.WriteLine(value.ToString("D"));
// Displays -12345
Console.WriteLine(value.ToString("D8"));
// Displays -00012345 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:00:43.437

```
int i = 5;
string retVal = i.ToString().PadLeft(3, '0'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-07T00:29:51.347

您也可以使用此代码

```
int k = 5;
string name =  $"name-{k++:D3}.ext"; 
```

# android - getExternalFilesDir 文件夹 + 清除数据

> ID：10832568
> 
> 赞同：0
> 
> 时间：2012-05-31T11:19:50.260
> 
> 标签：android, database, sd-card

我将我的数据库和一些文件保存在`getExternalFilesDir()`.

当我去`Settings>Applications>Manage applications->MyApp`选择`Clear Data`文件时仍然保留在那里是否正常？

# windows-7 - 如何在 Windows 7 上获取 type1 字体的脚本名称

> ID：10832570
> 
> 赞同：1
> 
> 时间：2012-05-31T11:19:53.547
> 
> 标签：windows-7, fonts, postscript

如何在 64 位 Windows7 上获取脚本名称、类型 1 字体的完整路径？这些 API 由 Adob​​e ATM 库提供，仅适用于 32 位 win OS，如 ATMGetPostScriptName、ATMGetFontPaths 等。

据我所知，操作系统现在支持类型 1 字体。我可以通过 GetFontData、RegQueryMultipleValues 等获取 TTF 和 OTF 字体的所有这些字体信息，但这些 API 无法用于 type1 字体（.pfm、.pfb 字体）。

我第一次使用这个论坛，希望有人能尽快帮助我。

提前致谢， 维金德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-07T18:33:43.163

我有一个类似的问题，我想要 postscript 名称并将字体转换为 postscript。该解决方案位于一个名为 ttf2pt1 的小库中，位于[http://ttf2pt1.sourceforge.net/README.html](http://ttf2pt1.sourceforge.net/README.html)

您需要的例程如下。该例程使用 OutlineTextMetrics 挖掘出字体的所有各种内部名称。nameFace 值是您想要的值。

```
short i;
short val;
long offset;
OUTLINETEXTMETRIC *otm;
UINT nSize;
UINT retVal;
char *sptr;
char *nameFamily;
char *nameFace;
char *nameStyle;
char *nameFull;
int fontType;
char otmBuffer[4096];

SelectObject(hdc, theFont);
nSize = GetOutlineTextMetrics(hdc, 0, NULL);
if(nSize){
    otm = (OUTLINETEXTMETRIC *) otmBuffer;
    retVal = GetOutlineTextMetrics(hdc, nSize, otm);

    val = otm->otmTextMetrics.tmPitchAndFamily;

    offset = (long) otm->otmpFamilyName;
    sptr = &otmBuffer[offset];
    nameFamily = sptr;
    offset = (long) otm->otmpFaceName;
    sptr = &otmBuffer[offset];
    nameFace = sptr;
    offset = (long) otm->otmpStyleName;
    sptr = &otmBuffer[offset];
    nameStyle = sptr;
    offset = (long) otm->otmpFullName;
    sptr = &otmBuffer[offset];
    nameFull = sptr;

    if(val & TMPF_TRUETYPE){
        fontType = kFontTypeTrueType;
    }
    else{
        if(val & TMPF_VECTOR){
            fontType = kFontTypePostscript;
        }
    }
}
else{
    fontType = kFontTypeUnknown;
} 
```

# mysql - 在 mySQL 中成功加入时复制一行

> ID：10832571
> 
> 赞同：1
> 
> 时间：2012-05-31T11:20:00.043
> 
> 标签：mysql

首先，我想说的是，我确实看到这是一种愚蠢的做事方式——而且我可以没有我所要求的生活，但是很高兴看看这是否可能。

好的，想象一下我有这些表 - 它们不是我真正拥有的，但它仍然应该显示同样的问题：

```
mutex: (table, row_id)
events: (id, title, location)
files: (id, title, filesize)

groups: (id, name)
groups_to_content: (group_id, table, row_id) 
```

在当前这个时间点，如果我想返回有关特定用户创建的所有事件和文件的详细信息，我可以使用极其复杂但快速的视图来做到这一点。那一点，我没有问题。

但是，我确实有一个问题是与团体有关。在我目前的观点中 - 如果一个文件/事件没有被分配给一个组，那么`group_id`当然会是 NULL。如果我已将一个事件分配给一个组（通过`groups_to_content`），它`group_id`当然也会被填充：

```
+---------+----------+------------+--------------------+
|  table  |  row_id  |  group_id  |  title             |
+---------+----------+------------+--------------------+
|  event  |  1       |  NULL      |  some event        |
|  event  |  2       |  NULL      |  some event        |
|  event  |  3       |  1         |  grouped event     |
+---------+----------+------------+--------------------+ 
```

但是，我希望它*包含*由拥有它的组拥有的事件（系统中可以有多个组所有权）和`group_id`as `NULL`，如下所示：

```
+---------+----------+------------+--------------------+
|  table  |  row_id  |  group_id  |  title             |
+---------+----------+------------+--------------------+
|  event  |  1       |  NULL      |  some event        |
|  event  |  2       |  NULL      |  some event        |
|  event  |  3       |  NULL      |  grouped event     |
|  event  |  3       |  1         |  grouped event     |
+---------+----------+------------+--------------------+ 
```

这是可能吗？

# .net - 如何解耦 ObservableCollection？

> ID：10832573
> 
> 赞同：1
> 
> 时间：2012-05-31T11:20:21.723
> 
> 标签：.net, multithreading, thread-safety, threadpool, observablecollection

我开发了一个数据采集子系统作为 DLL，它使用自己的线程捕获数据并使用 ObservableCollections 发布数据。我面临几个问题，因为事件的消费者在收到 ObservableCollection 事件时会执行昂贵的操作，这使得我的引擎捕获数据的速度比预期的要慢。

我计划在不同的线程中发送事件以避免这个问题，但我有几个问题：

```
public class ObservableCollection2
{
    public void Add()
    {
        _internalObservableCollection.Add();
        new Thread() { => Raise the event }
    }
} 
```

1.  这是标准解决方案已经解决的问题吗？看起来线程争用应该是相对常见的。
2.  使用线程不会严重降低应用程序的性能？
3.  使用 ThreadPool 不会使用所有可用的线程，因为在子系统中每秒发送 100 到 200 个通知是正常的？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:26:16.097

关于这种情况可以做些什么，有几个想法。

1.  客户端不能在事件处理程序中执行繁重的代码——毕竟，他们知道他们正在阻塞处理。因此客户端必须记住集合已更改，并将处理卸载到私有线程中。
2.  为每个事件使用一个新线程并不是最好的解决方案。如果你还是这样做，也许线程池线程是一个更好的主意。
3.  如果有关更改的消息经常出现，也许您想限制通知，并以更大的包发送它们？我不知道开箱即用的解决方案，但也许 Rx 扩展会有所帮助。
4.  `ObservableCollection`是一个相当沉重的课。我个人只在视图模型中使用它来从视图绑定，并且在模型中我求助于一个包含内部集合的自制类，并在需要时发送所需的事件。这样我就可以更好地控制发生的事情。

# iphone - 将多个 UIImage 插入“容器”

> ID：10832578
> 
> 赞同：1
> 
> 时间：2012-05-31T11:20:28.930
> 
> 标签：iphone, objective-c, ios, animation, uiimageview

我想知道是否可以将多个图像插入到objective-c中的“容器”中。

例如，如果我有一个前轮、后轮和汽车车身的图像。我可以将这些都放在一个容器中，以便当我移动或转换（缩放、旋转）容器时，里面的所有图像都会执行那个动作吗？同时，我可以让容器内的一个或多个图像执行动画。

我希望这很清楚，并且我已经正确解释了我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:40:42.367

不确定容器，
但我有另一种方法，

为什么不制作一个自定义视图并将所有图像放入其中，然后可以对该视图执行所有操作，

我正在发布一些重要的方法，让我知道它是否适合你，我可能会分享更多细节

```
 -(void)refreshSession{
        // check all the added view, if needs to be displayed, then displayed them. 
        int visibleViews = [self getVisibleViews];

        if(visibleViews ==  0 ){
            // if no more views to be displayed, then then let it not be visible, 
            [[self window] orderOut:self];

            // do it will not be visible to anyone 
            return;
        }

        [self resize:visibleViews];

        int viewsPerSide = [self getViewsPerRow];//ceil(sqrt(count)); 

        int count = [pViewArray count];

        int viewIndex=0;
        NSInteger index = 0;
        NSPoint curPoint = NSZeroPoint;

        // Starting at the bottom left corner
        // we should check all visible views 
        for ( int i = 0; i < count ; i++ ) {

            // it will give only the view that needs to be shown
            NSView *subview = [self getViewAtIndex:i];//(NSView *)[pViewArray objectAtIndex:i];

            // is this visible 
            if(![self isViewVisibleAtIndex:i])
                continue;

            // is view visible 

            // if we have view to display then lets display it. 
            if(subview){
                //[[[self window] contentView]setBackgroundColor:[NSColor blackColor]];
                [[[self window]contentView] addSubview:subview ];
                [self checkMask:viewIndex view:subview];
                viewIndex++;

                // let all the frame have same rect, regardless what are those 
                NSRect frame = NSMakeRect(curPoint.x, curPoint.y, BOXWIDTH, BOXHEIGHT);
                // add them into the subview 
                NSRect newFrame = [self integralRect:frame];
                [subview setFrame:newFrame];
                [[subview animator] setFrame:[self integralRect:frame]];

                [self setSubViewMask:subview ContentView:[[self window]contentView]];

                // Now set the point 
                curPoint.x += BOXWIDTH + SEPARATION;                        // Stack them horizontally
                if ((++index) % viewsPerSide == 0) {                        // And if we have enough on this row, move up to the next
                    curPoint.x = 0;                
                    curPoint.y += BOXHEIGHT + SEPARATION;

                }
            }
        }
        NSArray *pSubViewsArray = [[[self window]contentView]subviews];
        int arrayCount = [pSubViewsArray count];

        debugLog<<"Array Count"<<arrayCount<<endl;

    } 
```

# asp.net - 使用 UTL_DBWS 包从 oracle(PL/sql) 调用 .net WS (OPERATION_STYLE=document)

> ID：10832581
> 
> 赞同：1
> 
> 时间：2012-05-31T11:20:44.590
> 
> 标签：asp.net, web-services, oracle, plsql

我已经使用 ASP.NET 创建了一个 Web 服务。我试图通过 UTL_DBWS 包从 PL/sql 程序访问这个 url。执行后我收到以下错误：

ORA-29532: Java 调用因未捕获的 Java 异常而终止：端口：{http://tempuri.org/}Service1Soap 不包含操作：信封

你们中的任何人都可以告诉我缺少哪些配置步骤。

我真的很感谢你的帮助。

调用 asp.net 服务的 Oracle 程序是：

```
create or replace procedure check_dbws

AS

    l_service          UTL_DBWS.service;
    l_call             UTL_DBWS.call;

    l_wsdl_url         VARCHAR2(32767);
    l_namespace        VARCHAR2(32767);
    l_service_qname    UTL_DBWS.qname;
    l_port_qname       UTL_DBWS.qname;
    l_operation_qname  UTL_DBWS.qname;

    l_xmltype_in       SYS.XMLTYPE;
    l_xmltype_out      SYS.XMLTYPE;
    p_fault_node         xmltype;
    l_return           NUMBER;
    l_int_type  utl_dbws.qname;
    l_string_type utl_dbws.QNAME;
BEGIN

    l_wsdl_url := 'http://localhost/TestWebService/Service1.asmx?wsdl';
    l_namespace := 'http://tempuri.org/';

    l_service_qname := UTL_DBWS.to_qname(l_namespace, 'Service1');
    l_port_qname := UTL_DBWS.to_qname(l_namespace, 'Service1Soap');
    l_operation_qname := UTL_DBWS.to_qname(l_namespace, 'DBConnect');

    l_service := UTL_DBWS.create_service (
    wsdl_document_location => URIFACTORY.getURI(l_wsdl_url),
    service_name => l_service_qname);

    l_call := UTL_DBWS.create_call (
    service_handle => l_service,
    port_name => l_port_qname,
    operation_name => l_operation_qname);
    utl_dbws.set_property (l_call,'SOAPACTION_USE','TRUE');
    utl_dbws.set_property (l_call,'SOAPACTION_URI', 'DBConnect');

    utl_dbws.set_property(l_call,'ENCODINGSTYLE_URI', 'http://schemas.xmlsoap.org/soap/encoding/');
    utl_dbws.set_property(l_call,'OPERATION_STYLE', 'document'); 

    l_string_type :=utl_dbws.to_qname('http://www.w3.org/2001/xmlschema','String'); 
    utl_dbws.add_parameter(l_call,'Request',l_string_type,'ParameterMode.IN');
    utl_dbws.set_return_type(l_call,l_string_type);
    l_xmltype_in:=sys.xmltype('<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v002="http://tempuri.org/DBConnect">
    <soapenv:Header/>
    <soapenv:Body>
    <DBConnect>
    <Name>Test</Name>
    <DBConnect>
    </soapenv:Body>
    </soapenv:Envelope>');

    l_xmltype_out := UTL_DBWS.invoke (call_handle => l_call,,request => l_xmltype_in);
    p_fault_node := l_xmltype_out.extract('//soap:Fault', 'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/');
    if (p_fault_node is not null) then
        dbms_output.put_line(p_fault_node.getclobval());

        l_return:=2;
    elsif l_xmltype_out is not null then
        dbms_output.put_line(l_xmltype_out.getclobval());
        l_return:=1;
    else
        dbms_output.put_line('errorin fault'||sqlerrm);
        l_return:=0;
    end if;

    UTL_DBWS.release_call (call_handle => l_call);
    UTL_DBWS.release_service (service_handle => l_service);
    dbms_output.put_line(l_result.AccessVarchar2);
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:51:50.800

在这里看看我的[答案](https://stackoverflow.com/questions/6493433/utl-dbws-calling-a-web-service-from-oracle/6510287#6510287)；您可能没有使 UTL_DBWS 工作所需的所有 Java 类。而且，根据我在那里的回答，我将重申，我发现使用 UTL_HTTP 比使用 UTL_DBWS 更容易并继续使用 UTL_HTTP，因为我遇到了 UTL_DBWS 的许多限制和问题。

# javascript - 如何在javascript中设置文本框的只读属性

> ID：10832587
> 
> 赞同：5
> 
> 时间：2012-05-31T11:21:21.380
> 
> 标签：javascript, asp.net

我有一个文本框，我需要将其属性设置为只读...如何设置？我试过

```
document.getElementbyid("txtbox").readonly=true;
document.getElementbyid("txtbox").disable=true;
document.getElementbyid("txtbox").setattribute("readonly","readonly"); 
```

所有这些都不适合我。禁用正在工作，但将控制值作为空值传递给数据库......这对我来说又是一个问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T11:22:02.020

您可以通过 javascript 将 ASP.NET 文本框设置为只读。方法如下：

```
<script type="text/javascript">
    function setReadOnly(){
        var textbox = document.getElementById("TextBox1");
        textbox.readOnly = "readonly";//readOnly is cese-sensitive
        }

<body onload=" setReadOnly ()">
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </div>
    </form>
</body> 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T11:27:56.190

正确的方法是：

```
document.getElementById("txtbox").setAttribute("readonly", "true"); 
```

或者对于 jQuery 爱好者：

```
$("#txtbox").attr("readonly", true); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T11:28:21.610

您的问题中的代码有很多问题。如果您的属性名称正确，第一个示例将起作用：

```
document.getElementById("txtbox").readOnly = true; 
```

注意大写字母（`getElementById`代替`getElementbyid`和`readOnly`代替`readonly`）。

这是上面的一个[工作示例](http://jsfiddle.net/Jmfva/)。

至于您的第二次尝试，属性是`disabled`，不是`disable`。而你的第三次尝试，方法是`setAttribute`，不是`setattribute`。如您所见，JavaScript 区分大小写！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T01:52:01.430

```
<script type="text/javascript">

function loading() {

    var input_text = document.getElementById("text");
    input_text.setAttribute("readOnly", true);
    } 
```

对我很有效.......使用带有属性的驼峰式...... readOnly不像只读......

# ajax - jQuery get 返回错误

> ID：10832593
> 
> 赞同：0
> 
> 时间：2012-05-31T11:21:31.320
> 
> 标签：ajax, jquery

为什么这个简单的 ajax 会显示带有“错误”的警报？

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready( function(){
    $.ajax({
                url: "http://www.google.com", 
                success: function(data) { alert(data); }, 
                error: function(req, err) { alert(err);}
         });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:28:37.997

您不能直接使用 javascript 执行此操作，但如果您使用服务器，还有其他方法可以执行此操作。

javascript部分：

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script> 
<script type="text/javascript"> 
    $(document).ready(function(){
         $.ajax({
             url: "http://yourserver/geturl.php?url=http://www.google.com",
             // or url: "http://yourserver/geturl.aspx?url=http://www.google.com",
             success: function(data) {
                 alert(data);    
             }, 
             error: function(req, err) {
                 alert(err);
             }
         });
    }); 
 </script> 
```

服务器部分（用于**geturl.php**）：

```
<?php
    echo file_get_contents($_GET["url"]);
?> 
```

或与 asp.net 相同的逻辑。

**关键部分在这里，代码运行 javascript 和 php(aspx) 应该在同一个域上。**

# java - 从一点到另一点画一个拱门

> ID：10832599
> 
> 赞同：1
> 
> 时间：2012-05-31T11:21:46.623
> 
> 标签：java, swing, graphics, awt, graphics2d

我在一条垂直线上给出了 2 个点，(x0,y0) 和 (x0,y1)，我想将这两个点与一个开始的拱形连接起来（看起来像一个环 - 或像半个圆周 - ）在 (x0,y0) 并在 (x0,y1) 结束。

如果连接看起来像一个从开始指向结束的箭头，那将是完美的。

所有这些都使用图形或其他东西。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:13:51.223

下面的代码产生了这个截图，它会在两点之间画一个半圆+最后添加一个箭头：

![截图](../Images/4c6915e049e8b6733e3c024d72540f4c.png)

代码：

```
JFrame frame = new JFrame("Test");
frame.add(new JComponent() {
    Point p1, p2; boolean first;
    {
        p1 = p2 = new Point();
        setPreferredSize(new Dimension(400, 400));
        addMouseListener(new MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent e) {
                if (first) p1 = e.getPoint(); else p2 = e.getPoint();
                first = !first;
                repaint();
            }
        });
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.fillRect(p1.x-1, p1.y-1, 3, 3); g.drawString("p1", p1.x, p1.y);   
        g.fillRect(p2.x-1, p2.y-1, 3, 3); g.drawString("p2", p2.x, p2.y);

        double angle = Math.atan2(p2.y - p1.y, p2.x - p1.x);
        int diameter = (int) Math.round(p1.distance(p2));

        Graphics2D g2d = (Graphics2D) g;
        g2d.translate(p1.x, p1.y);
        g2d.rotate(angle);
        g2d.drawArc(0, -diameter/2, diameter, diameter, 0, 180);
        g2d.fill(new Polygon(new int[] {0,10,-10}, new int[] {0,-10,-10}, 3));
    }
});
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:33:45.917

*   [Java 2D API 概念概述包含有关](http://docs.oracle.com/javase/tutorial/2d/overview/index.html)[几何原语](http://docs.oracle.com/javase/tutorial/2d/overview/primitives.html)的教程

*   在这里你可以找到你的问题的答案，[这里有一堆例子](http://www.java2s.com/Tutorial/Java/0261__2D-Graphics/Catalog0261__2D-Graphics.htm)

*   绘画注意`AWT Component`有没有方法`paint()`，`Swing JComponent`有没有方法`paintComponent()`

*   为了获得更好的帮助，请尽快使用[SSCCE](http://sscce.org/)编辑您的问题，展示您的问题：

> 我在一条垂直线上给出了 2 个点，(x0,y0) 和 (x0,y1)，我想将这两个点与一个开始的拱形连接起来（看起来像一个环 - 或像半个圆周 - ）在 (x0,y0) 并在 (x0,y1) 结束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:51:49.550

这是一个弧形绘制示例：

```
public class ArcExample extends JComponent
{
    protected void paintComponent ( Graphics g )
    {
        super.paintComponent ( g );

        Graphics2D g2d = ( Graphics2D ) g;
        g2d.setRenderingHint ( RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON );

        g2d.setColor ( Color.RED );
        g2d.drawArc ( 0, 0, getWidth (), getHeight (), 90, -180 );
    }

    public Dimension getPreferredSize ()
    {
        return new Dimension ( 200, 200 );
    }

    public static void main ( String[] args )
    {
        JFrame frame = new JFrame ();
        frame.add ( new ArcExample () );
        frame.pack ();
        frame.setLocationRelativeTo ( null );
        frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
        frame.setVisible ( true );
    }
} 
```

# c# - WCF 和托管 Windows 服务之间的通信

> ID：10832602
> 
> 赞同：1
> 
> 时间：2012-05-31T11:21:54.093
> 
> 标签：c#, asp.net, wcf, windows-services

[这个问题是对此](https://stackoverflow.com/questions/10754255/how-to-make-a-asp-net-website-communicate-with-tcp-server-application)的跟进

在我目前正在进行的项目中，我有一个 windows 服务，它实际上是一个 TCP/IP 服务器，它连接到一组硬件。windows 服务从硬件收集数据并存储到数据库中，还可以发送一些硬件配置命令.. 有一个asp.net网站，用户可以通过它向windows服务请求一些数据，甚至通过windows服务发送一些硬件配置命令..

到目前为止，我正在考虑在 Windows 服务中托管 WCF 并让 asp.net 使用该服务。所以，当用户通过网站请求时，我希望 WCF 调用我的 Windows 服务中的一些过程。有可能吗？如果是请解释..我已经搜索了很多这种类型的通信，但都是徒劳的..如果不可能，请建议我使用 WCF 的替代方法...请帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:59:02.953

如果您将 WCF 服务设为单例，则可以为其创建一个实例并将其传递给 ServiceHost。您可以向构造函数传递一个在 Windows 服务中实现的接口，WCF 服务可以使用该接口与 Windows 服务通信 - 此接口实现可以充当 WCF 服务和 Windows 服务之间通信的代理

# javascript - 使用 javascript 正则表达式将 XML 标记转换为大写

> ID：10832609
> 
> 赞同：0
> 
> 时间：2012-05-31T11:22:17.977
> 
> 标签：javascript, regex

我正在尝试将 XML 标记转换为大写，同时保留属性和文本的大小写。所以例如

```
<Mytag Category="Parent">Value1</Mytag> 
```

变成

```
<MYTAG Category="Parent">Value1</MYTAG> 
```

我有一个正确匹配 XML 标记的正则表达式，但 upperCase 函数似乎不起作用。

```
myXmlElement.replace(/<(\/)*([a-zA-Z_0-9]+)([^>]*)>/g,"<$1" + "$2".toUpperCase() + "$3>") 
```

我也尝试过使用`String.prototype.toUpperCase.apply("$2")`，以及将函数作为替换参数传递

```
myXmlElement.replace(/<[\/]*([a-zA-Z_0-9]+)[^>]*>/g,
                    function($1,$2,$3){return <$1 + $2.toUpperCase() + $3>}) 
```

但这不起作用，因为 $1,$2,$3 似乎指的是整个匹配元素（$1 = ， $2 = ）

我确定我在这里忽略了一些微不足道的事情，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:45:37.143

如果要匹配标签名称前后的字符，需要在匹配模式中放入大括号：

```
var pattern = /<([\/]*)([a-zA-Z_0-9]+)([^>]*)>/g 
var newTag = myElement.replace(pattern, function(full, before, tag, after) { 
  return "<" before + tag.toUpperCase() + after + ">"
}) 
```

替换函数将`full`匹配表达式作为第一个参数。这就是为什么你可以忽略它。之后，您的模式的任何匹配大括号都将作为参数传递。

# cloud - 用于记录创建和修改的 Apex 代码

> ID：10832611
> 
> 赞同：0
> 
> 时间：2012-05-31T11:22:25.653
> 
> 标签：cloud, salesforce, apex-code

我是在 APEX 中为 salesforce.com 编写代码的新手。我有一个包含 10 个字段的对象“UnProc”，它是“POPULATED”。我还有两个对象（“帐户和联系人”），每个对象有 5 个字段，必须填充这些对象。我必须使用批处理 apex 和调度程序编写 APEX 代码，以便我可以为“帐户”和“联系人”创建新记录，以记录“UnProc”中已经存在的记录。在使用 UnProc 记录填充 Account 和 Contact 字段之后。必须删除 UnProc 记录。

我已经阅读了 saleforce.com 上与批处理顶点和调度程序相关的文档，并且已经理解并为它们创建了类结构。我被困在的地方是记录检索、创作等。数据库是我的弱点，这就是我无法通过它的原因。伪代码或某些代码行可能很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:04:52.170

通常使用 SOQL 从 Apex 代码中的数据库中检索记录。[此处](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_select.htm)概述了基本语法。

从数据库中检索记录并作为 sObjects 发送回数据库，这些sObjects 本质上是字段的集合。SOQL 查询通常会返回一个 sObject 列表，如下所示：

```
list<UnProc__c> unProcs = [select accountField1__c, accountField2__c, ... contactField1__c, contactField2__c, ... contactField5__c from UnProc__c]; 
```

检索到这些记录后，您可以创建新的 Account 和 Contact 记录，只需创建 Account 和 Contact sObjects 的列表，从 UnProc 对象填充它们的字段，然后将它们提交到数据库，如下所示：

```
list<Account> accs = new list<Account>();
list<Contact> cons = new list<Contact>();
Account acc;
Contact con;
for(UnProc__c up : unProcs) {
    acc = new Account();
    con = new Contact();
    acc.field1 = up.accountField1;
    acc.field2 = up.accountField2;
    ...
    con.field1 = up.contactField1;
    con.field2 = up.contactField2;
    ...
    con.field5 = up.contactField5;
    accs.add(acc);
    cons.add(con);
}
database.insert(accs);
database.insert(cons); 
```

在 Apex 中，您应该在记录集合中检索并提交到数据库，而不是单独提交，因为在单个执行上下文中可以运行的查询和提交数量是有限的。

# android - 重新启动应用程序后Android SQLiteDatabase为空

> ID：10832613
> 
> 赞同：3
> 
> 时间：2012-05-31T11:22:36.667
> 
> 标签：android, sqlite

有人可以告诉我如何在重新启动应用程序后使我的数据库不为空：现在，当我重新启动它时它是空的。但我需要保留我插入的数据。

我已经尝试过问这个问题，但没有人告诉我我的错误。

这是我的代码：

```
public class DataBaseFactory   {

private SQLiteDatabase db;
private final Context context;
private SD_util sdUtil;
private static String DB_NAME = "nyam_db.db3";
private static String DB_PATH = "/data/data/com.st.nyam/databases/";
private static String TAG = "DataBaseFactory";
private static int DATABASE_VERSION = 1;
// private final String INSERT_RECEPY =
// "INSERT into RECEPIES ('id', 'recepy', 'author') VALUES (?, ?, ?)";

private final String SELECT_RECIPES = "SELECT * FROM recipes";
private final String SELECT_RECIPE_BY_ID = "SELECT * FROM recipes WHERE ID = ?";
private final String SELECT_COUNT_RECIPE_BY_ID = "SELECT count(*) FROM recipes WHERE ID = ?";
private final String SELECT_STEPS = "SELECT * FROM steps";
private final String SELECT_TABLES = "SELECT name FROM sqlite_master WHERE type= 'table' ORDER BY name";
private final String SELECT_STEPS_BY_ID = "SELECT * FROM steps where recipe_id = ?";
private final String INSERT_STEP = "INSERT INTO steps ('id', 'recipe_id', 'body', 'photo_file_name') VALUES (?,?,?,?) ";
private final String INSERT_RECIPE = "INSERT INTO recipes ('id', 'title', 'description', 'user_id', 'favorites_by', 'main_photo_file_name') VALUES (?,?,?,?,?,?) ";
private final String DELETE_RECIPE = "DELETE FROM recipes WHERE id = ?";
private final String DELETE_STEPS_BY_RECIPEID = "DELETE FROM steps WHERE recipe_id = ?";

public DataBaseFactory(Context ctx) {
    context = ctx;
    sdUtil = new SD_util();
    SQLiteDatabase temp_db = ctx.openOrCreateDatabase(DB_NAME,
            Context.MODE_PRIVATE, null);
    temp_db.close();
    try {
        Log.i(TAG, "Copy intenting");
        copyDataBase();
    } catch (IOException e) {
        Log.e(TAG, e.getMessage());
    }
    Log.i(TAG, "Temp created");
    if (db == null) {
        db = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null,
                SQLiteDatabase.OPEN_READWRITE);
    }
    Log.i(TAG, "Temp opened");
}

private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    } catch (SQLiteException e) {
        // database does't exist yet.
        e.printStackTrace();
    }
    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

public void openDataBase() throws SQLException {
    // Open the database
    String myPath = DB_PATH + DB_NAME;
    db = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READONLY);
}

private void copyDataBase() throws IOException {
    // Open your local db as the input stream
    InputStream myInput = context.getAssets().open("db/" + DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    Log.i(TAG, "Copy data");
    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public ArrayList<RecipeGeneral> getRecipes() {
    ArrayList<RecipeGeneral> recipes = new ArrayList<RecipeGeneral>();
    Cursor c = db.rawQuery(SELECT_RECIPES, null);
    Log.d(TAG, "getRecipes()");
    if (c != null && c.getCount() > 0) {
        c.moveToFirst();
        do {
            Log.d(TAG, "Getting recipe");
            RecipeGeneral recipe = ModelUtil.getRecipeFromCursor(c);
            recipes.add(recipe);
            Log.d(TAG, "Getting recipe added");
        } while (c.moveToNext());

    }
    c.close();
    return recipes;
}

public ArrayList<Step> getStepsByRecipeId(int recipeId)
        throws ParseException {
    Log.d(TAG, "In getStepsByRecipe");
    ArrayList<Step> steps = new ArrayList<Step>();
    Cursor c = db.rawQuery(SELECT_STEPS_BY_ID,
            new String[] { Integer.toString(recipeId) });
    Log.d(TAG, "Get Query getStepsByRecipe");
    try {
        if (c != null && c.getCount() > 0) {
            c.moveToFirst();
            do {
                Log.d(TAG, "Getting step getStepsByRecipe");
                Step step = ModelUtil.getStepFromCursor(c);
                steps.add(step);
                Log.d(TAG, "Getting step added getStepsByRecipe");
            } while (c.moveToNext());
        }
    } finally {
        if (c != null) {
            c.close();
        }
    }
    c.close();
    return steps;

}

/*
 * public ArrayList<Step> getSteps() throws ParseException { ArrayList<Step>
 * steps = new ArrayList<Step>(); Cursor c = db.rawQuery(SELECT_STEPS,
 * null); if (c != null && c.getCount() > 0) { c.moveToFirst(); do { Step
 * step = new Step(); step.setId(c.getInt(c.getColumnIndex("id")));
 * step.setRecipe_id(c.getInt(c.getColumnIndex("recipe_id")));
 * step.setBody(c.getString(c.getColumnIndex("body")));
 * step.setPhoto_file_name
 * (c.getString(c.getColumnIndex("photo_file_name")));
 * step.setPhoto_content_type
 * (c.getString(c.getColumnIndex("photo_content_type")));
 * step.setPhoto_file_size(c.getInt(c.getColumnIndex("photo_file_size")));
 * step.setPhoto_updated_at(new
 * SimpleDateFormat("yyyy.MM.dd G HH:mm:ss").parse
 * (c.getString(c.getColumnIndex("photo_updated_at"))));
 * step.setCreated_at(new
 * SimpleDateFormat("yyyy.MM.dd G HH:mm:ss").parse(c.getString
 * (c.getColumnIndex("created_at")))); step.setUpdated_at(new
 * SimpleDateFormat
 * ("yyyy.MM.dd G HH:mm:ss").parse(c.getString(c.getColumnIndex
 * ("updated_at"))));
 * step.setPhoto_processing(c.getInt(c.getColumnIndex("photo_processing")));
 * steps.add(step); } while (c.moveToNext()); } c.close(); return steps; }
 */

public ArrayList<Recipe> fetchRecipesByQuery(String query)
        throws ParseException {
    ArrayList<Recipe> recipes = new ArrayList<Recipe>();
    Cursor c = db.query(true, "virt", null, "description " + " Match "
            + "'*" + query + "*'", null, null, null, null, null);
    try {
        Log.i(TAG, "Get Query");
        if (c != null && c.getCount() > 0) {
            c.moveToFirst();
            do {
                Log.i(TAG, "Getting recipe");
                // Recipe recipe = ModelUtil.getRecipeFromCursor(c);
                // recipes.add(recipe);
                Log.i(TAG, "Getting recipe added");
            } while (c.moveToNext());
        }
    } finally {
        if (c != null) {
            c.close();
        }
    }
    return recipes;
}

public void addRecipeToFavorites(Recipe recipe, Bitmap bitmap) {
    Log.d(TAG, "addRecipeToFavorites begin");
    if (!isRecipeExists(recipe.getId())) {
        ArrayList<Step> steps = recipe.getSteps();
        Log.d(TAG, "Adding  recipe to favorites addRecipeToFavorites()");
        sdUtil.saveRecipeImage(bitmap, recipe.getImg_url());
        db.execSQL(
                INSERT_RECIPE,
                new String[] { Integer.toString(recipe.getId()),
                        recipe.getTitle(), recipe.getDescription(),
                        recipe.getUser(),
                        Integer.toString(recipe.getFavorites_by()),
                        recipe.getImg_url() });
        if (recipe.getSteps() != null) {
            for (Step step : steps) {
                Object[] params = new Object[] { step.getImg_url() };
                new DownloadImageStep().execute(params);
                Log.d(TAG, "Adding step to favorites addRecipeToFavorites()");
                addStepToFavorites(step, recipe.getId());
            }
        } else {
            Log.d(TAG, "No steps in this recipe");
        }
    } else {
        Log.d(TAG, "Recipe already added");
    }
}

private void addStepToFavorites(Step step, int recipe_id) {
    db.execSQL(
            INSERT_STEP,
            new String[] { Integer.toString(step.getNumber()),
                    Integer.toString(recipe_id), step.getInstruction(),
                    step.getImg_url(), });

}

public void deleteRecipeFromFavorites(Recipe recipe) {
    Log.d(TAG, "deleteRecipeFromFavorites begin");
    if (isRecipeExists(recipe.getId())) {
        if (recipe.getSteps() != null) {
            for (Step step : recipe.getSteps()) {
                Log.d(TAG, "Boolean stepimage deleted = " + sdUtil.deleteImageFromSD(step.getImg_url().replace('/', '&')));
            }
            deleteStepsFromFavoritesByRecipeId(recipe.getId());
        } else {
            Log.d(TAG, "No steps in this recipe");
        }
        Log.d(TAG, "Image name in database = " + recipe.getImg_url().replace('/', '&'));
        Log.d(TAG, "Boolean recipeimage deleted = " + sdUtil.deleteImageFromSD(recipe.getImg_url().replace('/', '&')));
        Log.d(TAG, "Deleted rows: " + db.delete("recipes", "id=?", new String[] {Integer.toString(recipe.getId())}));
    } else {
        Log.d(TAG, "Recipe doesn`t exist");
    }
}

private void deleteStepsFromFavoritesByRecipeId(int recipeId) {
    Log.d(TAG, "deleteStepsFromFavoritesByRecipeId begin");
    db.delete("steps", "recipe_id=?", new String[] { Integer.toString(recipeId)});

}
/*
 * public void putRecepy(Recepy recepy) { db.execSQL(INSERT_RECEPY, new
 * String[] {Integer.toString(recepy.getId()), recepy.getRecepy(),
 * recepy.getAuthor()}); }
 */
public boolean isRecipeExists(int id) {
    Cursor c = db.rawQuery(SELECT_RECIPE_BY_ID,
            new String[] { Integer.toString(id) });
    try {
        Log.d(TAG, "isRecipeExists before c.movetoFirst()");
        if (c.moveToFirst()) {
            if (c != null && c.getCount() > 0) {
                Log.d(TAG, "Checking passed");
                //Recipe recipe = ModelUtil.getRecipeFromCursor(c);
                //Log.d(TAG, "RECIPEExists: " + recipe.toString());
                return true;
            }
        }
    } finally {
        if (c != null) {
            c.close();
        }
    }
    return false;
}

private class DownloadImageStep extends AsyncTask<Object, Void, Object> {

    @Override
    protected Object doInBackground(Object... o) {
        Bitmap outBitmap = null;
        try {
            sdUtil.saveStepImage((String) o[0]);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return outBitmap;
    }
} 
```

}

**更新：** 我发现了我的错误。它在构造函数中。我不必创建 temp_db 并调用 copyData();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:37:09.930

我发现了我的错误。它在构造函数中。我不必创建 temp_db 并调用 copyData();

# php - 取两张表，并根据账户计算总计

> ID：10832614
> 
> 赞同：-3
> 
> 时间：2012-05-31T11:22:39.953
> 
> 标签：php, mysql

我有两张表，一张是accounts，一张是account_trans，accounts 表有关于个人账户的记录，account_trans 表中所有的交易都是根据account id 插入的。

**帐户**表有这些，

```
account_id, account_holder_name, ..... 
```

**account_trans**表有这些字段，

```
trans_id, account_id, debit_amount, credit_amount .... 
```

现在我想在单个页面上显示所有帐户，并且我想显示`credit-debit=total-balance`每个帐户的余额（）。我想使用单个 mysql 查询。

输出应该是这样的

```
Account Holder Name |  Account Balance (Credit Amount - Debit Amount = Balance Amount)

Account Holder Name2 |  Account Balance2 (Credit Amount2 - Debit Amount2 = Balance Amount2) 
```

对此有任何建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:29:24.753

有很多方法可以做到这一点。其中之一如下。我假设一个 account_id 在`account_trans`表中会有很多借方和贷方。

尝试这个 -

```
 SELECT accounts.account_holder_name
        (acc.credit - acc.debit) AS balance
 FROM accounts,
      (SELECT account_id
              SUM(IFNULL(debit_amount, 0)) debit,
              SUM(IFNULL(credit_amount, 0)) credit
       FROM account_trans
       GROUP BY account_id) acc
 WHERE accounts.account_id = acc.account_id 
```

# c# - 使用 SqlDataAdapter 从 C# 调用存储过程

> ID：10832620
> 
> 赞同：1
> 
> 时间：2012-05-31T11:23:19.937
> 
> 标签：c#, sql, dataadapter

我有一个存储过程，它已经过良好的测试，可以在 SQL Server Management Studio 中完美运行。该过程所做的只是检查表中是否存在记录，如果存在则返回它，或者创建它然后如果不存在则返回它。

该过程如下所示：

```
CREATE proc [dbo].[spInsertSerialBatch] 

@MOS_JOB varchar(12), --PASSED COMMAND LINE
@MOS_LOT varchar(4) = NULL, --PASSED COMMAND LINE
@MES_USER varchar(12) = 'NOT PASSED',--PASSED COMMAND LINE
@COMPUTERNAME varchar(100) = 'NOT PASSED' --ENVIRONMENT VARIABLE

as .... 
```

我使用了一个SqlDataAdapter，我已经反复使用过，没有任何问题。设置如下所示：

```
 using (SqlCommand sqlComm = new SqlCommand("dbo.spInsertSerialBatch", serialBatchDataConnection))
                    {
                        if (serialBatchDataConnection.State != ConnectionState.Open)
                        {
                            serialBatchDataConnection.Open();
                        }

sqlComm.CommandType = CommandType.StoredProcedure;
                    sqlComm.Parameters.AddWithValue("@MOS_JOB", options.jobNumber);
                    sqlComm.Parameters.AddWithValue("@MOS_LOT", options.lotNumber);
                    sqlComm.Parameters.AddWithValue("@MES_USER", options.userId);
                    sqlComm.Parameters.AddWithValue("@COMPUTERNAME", System.Environment.MachineName);

                    SqlDataAdapter sda = new SqlDataAdapter(sqlComm);
                    DataTable dt = new DataTable();

                    int rowsAffected = sda.Fill(dt);

} 
```

然后我在 Fill 执行后检查表的结果。当表中存在该行时它工作正常，但如果它不存在，并且存储过程需要生成它，则 Fill 返回 0 行并且数据表保持为空。没有错误/异常被抛出，我只是没有得到任何结果。

我想我可以将代码更改为使用 ExecuteNonQuery 而不是使用 DataAdapter，但我认为这不应该起作用；我更喜欢使用数据表（在某些情况下可能会导致不止一行），而不是使用数据读取器并循环数据以获取结果。

关于为什么这可能会失败的任何建议？我查看了这个网站和其他类似网站上的几篇帖子，但没有找到满意的答案。非常感谢任何建议。

谢谢，

加里

整个 sp 非常大，可能太专有而无法发布......

```
 --return inserted rows
        SELECT 'CREATED' as [spRESULT], o.* 
        FROM @output o 

        END         

/*
    * Return existing SerialBatch(s)
    */
    BEGIN

        SELECT 'RETRIEVED' as [spRESULT], s.* 
        FROM SerialBatch s
        WHERE SerialBatchId = @formattedId

        UNION 
        /* 
        * pull in products that have components that need labels as well
        */
        SELECT 'RETRIEVED' as [spRESULT],s.* 
        FROM SerialBatch s
        WHERE SerialBatchParentId = @formattedId
    END 
```

存储过程到此结束。我尝试执行 DataReader，结果是一样的......当 sp 必须创建它时，我没有得到任何结果，但它再次在 SQL Server Management Studio 中完全独立运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:16:20.957

问题解决了。事实证明，传递给 Oracle 的 OpenQuery 字符串正在将空字符串转换为 NULL 并阻止返回新行。我需要添加的只是检查 NULL 和空字符串：

```
if @MOS_LOT IS NULL or @MOS_LOT = ''
    set @MOS_LOT = ' ' --EMPTY STRINGS BEING EQUIVALENT TO NULLS 
```

# javascript - 使用 javascript 克隆一个 div 并使其 ID 成为唯一的孩子

> ID：10832624
> 
> 赞同：0
> 
> 时间：2012-05-31T11:23:56.670
> 
> 标签：javascript

我需要克隆一个 div，并且在克隆 div 中的所有元素后应该有唯一的 id。我只需要使用 javascript 而不是 jquery 来执行此操作。

谁能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:51:46.823

以下代码克隆一个元素，使用递归函数将随机 id 分配给克隆的元素及其子元素，并将其附加到文档正文。根据您的需要进行调整。另请参阅[此 jsfiddle](http://jsfiddle.net/KooiInc/e62sw/)

```
var someClone = someDiv.clone(true), children = someClone.childNodes;
someClone.id = Math.floor(1000+Math.random()*10000).toString(16);
reId(children);

function reId(nodes){
 for (var i=0;i<nodes.length;(i+=1)){
   var children = nodes[i].childNodes;
   nodes[i].id = Math.floor( 1001+Math.random()*10000 ).toString(16);
   if (children.length){
       reId(children);
   }
 }
}     

document.body.appendChild(someClone); 
```

# jquery - 父级后的jquery，查找元素

> ID：10832630
> 
> 赞同：2
> 
> 时间：2012-05-31T11:24:25.630
> 
> 标签：jquery, find, parent

我正在尝试访问`$('.delete_button').click()`事件的父级以查找`p`标签并替换其内容，但是在这段代码中我似乎看不到我在哪里做错了：

jQuery：

```
//inside $('.delete_button').click() evvent
$(this).parent('.news_container').find('p').html(no_featured_news).removeClass('existing').addClass('description'); 
```

HTML：

```
<div class="news_container">
   <p class="existing">Lorem Lipsum</p>
   <button class="delete_button" data-id="1605361"></button>
</div> 
```

任何想法为什么上面的 jquery 代码找不到`p`标签？我究竟做错了什么？

## 更新

jQuery点击事件：

```
$('.delete_news_order').click(function(){

  var image = $(this);
  if (id===undefined)
    id = $(this).data('id');

  console.log($(this).data('id'));

  $.post('do.php', { OP: "delete_order", id: id }, function(result){

      $(this).siblings('p').html(no_featured_news).removeClass('existing').addClass('description');
      ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:28:04.757

它应该可以正常工作。但您可以[`siblings`](http://api.jquery.com/siblings/)改用：

```
$('.delete_button').click(function() {
    $(this).siblings('p')
        .html("Text")
        .removeClass('existing')
        .addClass('description');
}); 
```

# oracle - 将查询结果导出到一组 INSERT 语句？

> ID：10832631
> 
> 赞同：3
> 
> 时间：2012-05-31T11:24:27.533
> 
> 标签：oracle, export

在 Oracle 中，我需要使用 SELECT 语句的结果生成一组 INSERT 语句。基本上与 Toad for Oracle 将表的内容导出到文件或剪贴板上的一组插入语句的方式相同。这可能吗？

原因是我的一些几何数据是 WGS84 格式，当我访问它时它需要是英国国家网格。这在 Oracle 中不是问题，因为我可以简单地使用 SDO_CS.Transform(date, srid) 但是在 SQL Server 中这是不可能的。我的意图是在 Toad 中生成 INSERTS，然后它们在 SQL Server 上运行它们，以便使用预先转换的数据填充几何列。这意味着在 SELECT 期间在 Oracle 中应用转换。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T11:56:41.600

我不太明白您是如何尝试从 TOAD 导出数据的。但它应该按如下方式工作：

1.  在 TOAD 编辑器窗口中运行您的 SELECT 语句。
2.  在带有结果的数据网格中按鼠标右键，然后选择“导出数据集...”。
3.  从第一个下拉菜单中选择“插入语句”。
4.  单击确定。

# r - 在R中消除星期几的歧义

> ID：10832632
> 
> 赞同：2
> 
> 时间：2012-05-31T11:24:33.187
> 
> 标签：r, date

我有一个特定的开始时间和一周中的指定日期。

```
start = as.POSIXct(1234567, origin = "1970-1-1")
format(start, format = "%A %c")
target1 = "TUE"
target2 = "Wednesday" 
```

我想要的是在开始之后找到与一周中相应日期匹配的第一天。（希望对于用户如何输入星期几目标有点灵活）有什么想法吗？我想字符串查找表可能会起作用，但必须有一种更简洁的方法。

如果解决方案可以矢量化，则可以加分......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:51:33.413

我还没有尝试过矢量化（不确定是否可以），但这是一个尝试：

```
find_day <- function(start,target){
    target <- tolower(target)
    next_week <- as.Date(start) + 1:7
    next_week[match(target,substr(tolower(weekdays(next_week)),1,nchar(target)))]
} 
```

它应该接受一天的任何长度或大写的缩写。如何使用它：

```
> find_day(start,"TUE")
[1] "1970-01-20"
> find_day(start,"friday")
[1] "1970-01-16" 
```

# java - 在 SVNKit 中解析 URL

> ID：10832635
> 
> 赞同：2
> 
> 时间：2012-05-31T11:24:43.920
> 
> 标签：java, svn, url, svnkit

我正在尝试解析 URL 以获得当前的分支或主干。

```
public SVNConnector(String s_Url, String login, String password, String project) {
        try {
            url = SVNURL.parseURIEncoded(s_Url);
            ISVNAuthenticationManager authManager = new BasicAuthenticationManager(login, password);
            DAVRepositoryFactory.setup();
            repository = SVNRepositoryFactory.create(url, null);
            repository.setAuthenticationManager(authManager);
            this.projectName = project;
            latestRevision = repository.getLatestRevision();
        } catch (SVNException svne) {
            logger.error("Impossible to connect to SVN repository. s_Url: "+s_Url+" login:"+login+" password: "+password, svne);
        }
    } 
```

我的 URL 类似于`http://10.61.128.222/svn/i18ntest/trunk`or `http://10.61.128.222/svn/PFT/branches/protoi18n`，我需要一个可以输入此 URL 的方法，它会返回`/trunk/`or `/branches/protoi18n/`，所以我可以运行它：

```
public List<OutputElement> retrieveI18nFiles() throws SVNException {
        List<OutputElement> outs = new ArrayList<OutputElement>();
        String path = url.getPath()+"/core/src/main/resources/fr/gefco/"+projectName+"/i18n/"; // this is not working!

        latestRevision = repository.getLatestRevision();

        // For some reason, type safety is not insured in SVNKit, even if generics are around for some years, now
        Collection<SVNDirEntry> entries = repository.getDir(path, latestRevision, (SVNProperties)null, (Collection<SVNDirEntry>)null);
        for (SVNDirEntry entry : entries) {
            OutputElement out = new OutputElement();
            out.setEntry(entry);
            out.setOut(retrieveOutputStream(entry,path));
            outs.add(out);
        }
        return outs;

    } 
```

`url.getPath()`正在返回`/svn/i18ntest/trunk/`，这不是我需要的。当然，我可以解析它以获得我需要的位，但我想首先知道 SVNKit 是否提供任何已经证明的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:33:38.673

使用时，`SVNRepository`您需要相对于存储库根目录的路径。您可以使用检索存储库根 URL `SVNURL root = repository.getRepositoryRoot(true)`，然后使用它来获取您和存储库根 URL`SVNURLUtil.getRelativeURL(root, url, false)`之间的相对路径。`url`

# javascript - 输入复选框真或选中或是

> ID：10832640
> 
> 赞同：36
> 
> 时间：2012-05-31T11:24:49.823
> 
> 标签：javascript, html, checkbox, html-input

我已经看到了预选复选框的三种实现方式。我开始使用checked="checked" 因为我认为这是“正确”的方式（但是从来没有像“checked”="yes" 那样）。我正在考虑更改为 checked="true" 因为它看起来更具可读性并且更容易编写 JavaScript 代码。请注意，同样的问题适用于其他属性，例如“disabled”=“disabled”与“disabled”=“true”。只要我保持一致，使用“真实”是首选方法吗？谢谢

```
<input type="checkbox" checked="checked" value="123" name="howdy" />
<input type="checkbox" checked="true"    value="123" name="howdy" />
<input type="checkbox" checked="yes"     value="123" name="howdy" /> 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-31T11:27:55.670

只有`checked`和`checked="checked"`是有效的。您的其他选项取决于浏览器中的错误恢复。

`checked="yes"`并且`checked="true"`特别糟糕，因为它们暗示了这一点`checked="no"`，`checked="false"`并将默认状态设置为*未选中*......他们不会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:39:39.153

根据[W3C](http://www.w3.org/TR/1999/REC-html401-19991224/interact/forms.html#h-17.4)检查输入的属性可以不存在/省略或将“检查”作为其值。这不会使其他值无效，因为浏览器实现没有限制允许“true”、“on”、“yes”等值。为了保证您将编写一个跨浏览器的复选框/收音机，请按照[W3C](http://www.w3.org/TR/1999/REC-html401-19991224/interact/forms.html#h-17.4)的建议使用 checked="checked" 。

disabled、readonly 和 ismap 输入的属性以同样的方式进行。

**已编辑**

正如@Quentin 警告的那样，空不是checked、disabled、readonly 和ismap 输入属性的有效值

# sql - SQL比较整行

> ID：10832643
> 
> 赞同：1
> 
> 时间：2012-05-31T11:25:07.903
> 
> 标签：sql, sql-server-2008, compare, rows

在 SQL Server 2008 中，我有一些巨大的表（200-300+ 列）。每天我们都会运行一个批处理作业，生成一个新表，并在表名后附加时间戳。

桌子没有PK。

我想要一种比较两个表中的 2 行的通用方法。显示哪些 cols 具有不同的值就足够了，但显示这些值将是完美的。

非常感谢

感谢您的回答。我最终编写了自己的 C# 工具来完成这项工作——因为我不允许在我的公司安装第 3 方软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:38:01.183

您可以从 SELECT 查询创建 RPT 文件，然后使用 Beyond Compare 来查看差异。

此外，red-gate 有一些工具可以比较数据库表，但我认为它们很昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:40:02.690

有几种工具可以为您做到这一点。

我最喜欢的是[Red Gate SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/index-b?utm_source=google&utm_medium=cpc&utm_content=brand_aware&utm_campaign=sqlcompare&gclid=CLOM5eu3qrACFYuc7QodFSaQTg)。

如果您没有钱，请使用开源解决方案。有几种

[数据库比较](http://dbcompare.codeplex.com/)

[OpenDBDiff](http://opendbiff.codeplex.com/)

# android - 使用 Intents 选择保存文件位置

> ID：10832644
> 
> 赞同：2
> 
> 时间：2012-05-31T11:25:09.120
> 
> 标签：android

询问用户保存文件的位置的最佳方式是什么？目前，我已经设法让 OI 文件管理器用于使用 Intent.ACTION_GET_CONTENT 选择要加载的文件，但我想知道是否有办法以类似的方式选择保存位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:01:43.100

以下适用于 OI 文件管理器：

```
Intent intent = new Intent("org.openintents.action.PICK_FILE");
intent.putExtra("org.openintents.extra.BUTTON_TEXT", "Save");
intent.putExtra("org.openintents.extra.TITLE", "Choose save location");
try {
    startActivityForResult(intent, SAVE_FILE_REQUEST_CODE);
} catch (ActivityNotFoundException e) {
    //TODO: Handle no save file activity found
} 
```

但是，我不确定这是否是最好的解决方案，因为它使用 OpenIntents 操作而不是内置的 Android 操作。文件管理器之间的兼容性如何？即这是否适用于所有流行的，如 Astro 和 ES？

# windows - 自日期或修订版以来更改的 SVN 导出文件 (Windows svn.exe)

> ID：10832647
> 
> 赞同：4
> 
> 时间：2012-05-31T11:25:13.207
> 
> 标签：windows, svn

我有一个 sql 脚本存储库，其中一些会随着我们每个月的发布而改变（每个月都会改变不同的脚本）。

我正在尝试自动化部署包的编译，并希望能够导出自上次发布以来已更改的所有脚本，该版本具有已知日期和已知修订版。

SVN 分支是每个版本，SVN 标签是每个版本。

我已经用谷歌搜索并知道这`svn diff --summarize -r {2012-05-01} svn://server/path/to/ > files.txt`给了我所有更改的列表，但是我如何使用该列表仅使用 Windows CMD 导出那些文件 - 我找到的所有示例都是针对 Linux 并使用 Linux 命令。

在 SVN 中还有其他直接的方法吗？（使用 SVN 导出？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:42:58.973

1.  使用修订号作为开始修订，而不是日期：它更防弹
2.  使用修订范围，即使最终修订是 HEAD：它更防弹

    *   您甚至可以在 Windows 上使用 Bash，并使用 Bash 脚本
    *   您可以安装 Ruby 并使用 Ruby 脚本（或将 Ruby 编译为 exe）

最后

*   您可以手动安装 TortoiseSVN 并在 GUI 中准备树

或者

*   编写自己的差异输出解析器（PoserShell 会这样做）

`>svn diff --summarize -r 26:34 http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/`

`A http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Dr%C3%A6p%C3%A6r.ma%C3%BEar.sv%C3%A6nskan.man.eller.smalensk%C3%A6n.txt`

`M http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.en.txt`

`M http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.fr.txt`

`M http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.de.txt`

`M http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk`

（复制所有文件，在第一个字符中包含 A|M，或预先 grep 所有字符串，在我的示例中路径基/过滤最后一个字符串之后有斜杠/）

# jquery - 在元素之前计算元素

> ID：10832649
> 
> 赞同：8
> 
> 时间：2012-05-31T11:25:20.243
> 
> 标签：jquery

这是一个例子：

```
<div class="create-q"></div>
<div class="create-q"></div>
<div class="create-q"></div>
<div class="create-q"></div> <-- im in this class : I want to know how many div with class "create-q" there is before this one. (3 in this example)
<div class="create-q"></div>
<div class="create-q"></div> 
```

我知道如何计数，但不知道如何在它到达指定的 div 时停止它。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-31T11:28:24.837

If`mydiv`是对您正在查看的元素的引用：

```
var n = $(mydiv).index('.create-q'); 
```

将给出该 div 的索引，因为它们是从零开始的，也恰好是前面 div 的数量。

与`.prevAll()`此不同的是，无论 div 是否具有共同的父级，它都会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:28:32.910

您可以使用 jquery 的[prevAll](http://api.jquery.com/prevAll/)方法，

如果`currentelem`是对您的元素的引用，那么，

```
$(currentelem).prevAll().length 
```

会给你在同一个父或容器中你的元素之前的元素数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:29:12.887

如果您有目标元素，只需执行以下操作：

`$(this).prev(".create-q").length`和`$(this).next(".create-q").length`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-31T11:42:36.187

您可以使用 jQuery 循环遍历选定的元素

[参考示例](http://www.electrictoolbox.com/loop-through-selected-elements-jquery-revised/)

[参考 jQuery](http://api.jquery.com/jQuery.each/)

[jsfiddle 演示](http://jsfiddle.net/sssonline2/kq4K8/)

```
<div id="example">
<div  class="create-q">1</div>
<div  class="create-q">2</div>
<div  class="create-q">3</div>
<div  class="create-q">thisOne</div>
<div class="create-q">5</div>
<div  class="create-q">6</div>
</div> 
```

```
function example(thisOne) {
    var count=0;
    var hrefs = '';  
    $('#example div').each(function(idx, item) {  
        //alert(item); return object HTMLDivElement
        hrefs += item.innerHTML+ '\n' ;  
        count+=1;
        if(item.innerHTML==thisOne)
        {
//this is what you want the nubmber of elements before thisOne
            alert(count-1);
            return 0;
        }
    });
    window.alert(hrefs);

} 
```

# iphone - 为什么 CoreMotion 从未调用此 CMDeviceMotionHandler？

> ID：10832650
> 
> 赞同：2
> 
> 时间：2012-05-31T11:25:21.540
> 
> 标签：iphone, ios, core-motion

我在我的项目中包含了 CoreMotion 框架，并在我的视图控制器的标题中导入了 CoreMotion 框架：

```
#import <CoreMotion/CoreMotion.h> 
```

然后在 -viewDidLoad 中，我有这个简单的测试代码，我在带有 iOS 4.3 的 iPhone 4 上运行：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    CMMotionManager *motionManager = [[CMMotionManager alloc] init];
    [motionManager setDeviceMotionUpdateInterval:0.1];

    CMDeviceMotionHandler  motionHandler = ^(CMDeviceMotion *motion, NSError *error) {

        NSLog(@"foo");

    };

    [motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue currentQueue] withHandler:motionHandler];

    NSLog(@"merde!");
} 
```

当我在设备上运行项目并移动它时，我从来没有得到“foo”日志。另外，我尝试在运动处理程序块中设置断点，它永远不会停在那里。但我确实得到了“merde！” 日志，所以这段代码肯定会被执行。

为什么核心运动不调用我的处理程序？我的 iPhone 4 可以正常工作。加速度计和陀螺仪可以在其他应用程序中完美运行。没有硬件错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:37:54.793

我有非常相似的代码成功运行，同样适用于[iOS 事件处理指南](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html#//apple_ref/doc/uid/TP40009541-CH4-SW22)中的可用示例（只有一个适用于陀螺仪数据的示例）。但有一个主要区别：

所有实现都持有自己的对操作队列的引用，`operationQueue = [[NSOperationQueue currentQueue] retain];`或者自己构建。所以希望这有助于在您的日志中获得更多的“merde”;-)

# iphone - 如何禁用合适视图的水平滚动？

> ID：10832651
> 
> 赞同：0
> 
> 时间：2012-05-31T11:25:25.083
> 
> 标签：iphone

> **可能重复：**
> [禁用 UITableView 水平滚动](https://stackoverflow.com/questions/10309821/disable-uitableview-horizontal-scroll)

请任何人告诉我如何禁用tableview的水平滚动..

请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:49:01.343

如果您的 tablecontentview 宽度与您的视图宽度相同，它将不会以水平方式滚动，但如果您希望您的 tableview 不反弹，那么您可以禁用 tableview 的反弹

m_TableView.bounces = 否；

# layout - DOJO ContentPane 内部 DIV 高度在 ContentPane 调整大小时发生变化

> ID：10832653
> 
> 赞同：2
> 
> 时间：2012-05-31T11:25:33.130
> 
> 标签：layout, dojo, dijit.layout, contentpane

我正在使用 DOJO 的`ContentPane`模块。我`div`在其中一个窗格中有一个元素，我需要给它一个特定的高度 - 比它的高度小 100 像素，`ContentPane`以便在您通过拖动拆分器`div`更改大小时动态更改其高度。`ContentPane`我是 Dojo 的新手，如果有人可以帮助我，我会很高兴。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:19:49.583

`BorderContainers`我认为最好的解决方案是通过正确设置嵌套`splitters`，因为这种方式`dijit/layout`将负责调整大小，您无需编写任何 JavaScript 代码，您的布局将完全基于 CSS。

解释起来有点麻烦，所以我在 jsFiddle 为您创建了一个工作示例：http: [//jsfiddle.net/phusick/Ayg8F/](http://jsfiddle.net/phusick/Ayg8F/) + 图表：

![在此处输入图像描述](../Images/f477d9c09121ba9ad3c9ea17d1183d50.png)

注意：不要忘记设置`height: 100%`为`html`,`body`和顶部`BorderContainer`。

此解决方案的缺点是您必须将 plain 替换`divs`为`ContentPanes`. 如果您不想或不能，您可以在大小更改时使用`dojo/aspect`并连接`BorderContainer`或手动`ContentPane` `resize`调整大小：`divs`

```
require([
    "dojo/ready",
    "dojo/aspect",
    "dijit/registry",
    "dijit/layout/ContentPane",
    "dijit/layout/BorderContainer"
], function(
    ready,
    aspect,
    registry
) {

    ready(function() {
        var bc = registry.byId("borderContainer1");
        aspect.after(bc, "resize", function() {
            // calculate and set <div> size here
            console.log("resize divs");
        });
    });  
});​ 
```

# android - 排序列表 h2 数据库

> ID：10832658
> 
> 赞同：2
> 
> 时间：2012-05-31T11:25:51.547
> 
> 标签：android, database, internationalization, collation, h2

我正在尝试在 Android 设备上设置新 H2 数据库的排序规则，我有两个疑问：

如果我没有指定使用排序规则的数据库的排序规则名称。

在哪里可以找到存在并支持 H2 的不同排序规则的列表？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:19:29.750

默认情况下，使用 String.compareTo （字典顺序 - 请参阅 Android 文档了解详细信息）。

您可以使用 set collat​​ion[设置整理](http://h2database.com/html/commands.html#set_collation)器（有关详细信息，请参阅文档）。`new Locale(...)`根据排序规则的设置方式，使用其中一个构造函数。您需要检查 Android 文档中支持哪些语言/国家/地区/变体。

# c++ - 来自已编译代码的“重父”类

> ID：10832660
> 
> 赞同：2
> 
> 时间：2012-05-31T11:26:01.720
> 
> 标签：c++, qt, multiple-inheritance

以下案例：假设有一个二进制库定义了“Base”类，以及它的许多子类（“Derivative1”、“Derivative2”等）。

我想在我自己的代码中扩展这些子类，但是因为我的扩展对于所有子类都是相同的，因为它们只处理 Base 的一部分，所以对每个 Derivative 类进行子类化并一遍又一遍地添加相同的代码会很乏味。

我的第一个想法是简单地编写一个可以为我完成工作的类模板，但是因为我正在处理的库是 Qt，所以 QObject 挫败了我。我的第二个想法是使用宏来生成每个类结构，但这也被 moc 所阻挠。

标题中的“reparent”是因为我想到了从 Base 派生并创建 BaseExtended，然后以某种方式告诉编译器将每个 Derivative 重新设置为这个扩展类。有没有办法例如在“BaseExtended”虚拟中声明“Base”，然后只写

```
class Derivative1Extended : public Derivative1, public BaseExtended {} 
```

并让 BaseExtended 中的虚拟 Base 指向 Derivative1 中的 Base，从而基本上“挤压”我在 Base 和 Derivative1 之间的扩展？

（顺便说一句，我试图使上述内容尽可能通用，但我实际上正在做的是尝试为每个 QWidget 派生添加“focusIn”和“focusOut”信号，而不是一遍又一遍地编写相同的代码我使用的 QWidget 子类）

编辑：作为参考，这是我当前的实现：

```
// qwidgetfs.h
class QLineEditFS : public QLineEdit
{
    Q_OBJECT

private:
    void focusInEvent(QFocusEvent *);
    void focusOutEvent(QFocusEvent *);

public:
    QLineEditFS(QWidget *parent = 0);
signals:
    void focusReceived(QWidgetFS::InputType);
    void focusLost();
};

// qwidgetfs.cpp
QLineEditFS::QLineEditFS(QWidget *parent /*= 0*/)
    : QLineEdit(parent)
{}

void QLineEditFS::focusInEvent(QFocusEvent *e)
{
    QLineEdit::focusInEvent(e);
    emit focusReceived(QWidgetFS::InputText);
}

void QLineEditFS::focusOutEvent(QFocusEvent *e)
{
    QLineEdit::focusOutEvent(e);
    emit focusLost();
} 
```

这对 QSpinBoxFS、QComboBoxFS、QCheckBoxFS 等重复...相反，我只想在公共类 QWidgetFS 中定义这个逻辑，然后将其“注入”到从 QWidget 派生的其他类中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:15:13.317

我不确定您是否真的能够在不修改 Qt 并重新编译它的情况下执行您的建议。

也许为了做你想做的事，你可以使用安装在你想要处理焦点事件的对象上的事件过滤器？

小测试应用程序：

标题：

```
class FocusEventFilter : public QObject
{
    Q_OBJECT
public:
    FocusEventFilter(QObject* parent)
        : QObject(parent)
    {}

Q_SIGNALS:
    void focusIn(QWidget* obj, QFocusEvent* e);
    void focusOut(QWidget* obj, QFocusEvent* e);

protected:
    bool eventFilter(QObject *obj, QEvent *e);
};

class testfocus : public QMainWindow
{
    Q_OBJECT

public:
    testfocus(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~testfocus();

public Q_SLOTS:
    void onFocusIn(QWidget*, QFocusEvent*);
    void onFocusOut(QWidget*, QFocusEvent*);

private:
    Ui::testfocusClass ui;
}; 
```

执行

```
#include <QFocusEvent>
#include "testfocus.h"

bool FocusEventFilter::eventFilter(QObject *obj, QEvent *e)
{
    if (e->type() == QEvent::FocusIn) {
        bool r = QObject::eventFilter(obj, e);
        QFocusEvent *focus = static_cast<QFocusEvent*>(e);
        QWidget* w = qobject_cast<QWidget*>(obj);
        if (w) {
            emit focusIn(w, focus);
        }
        return r;
    } 
    else if (e->type() == QEvent::FocusOut) {
        bool r = QObject::eventFilter(obj, e);
        QFocusEvent *focus = static_cast<QFocusEvent*>(e);
        QWidget* w = qobject_cast<QWidget*>(obj);
        if (w) {
            emit focusOut(w, focus);
        }
        return r;
    } 
    else {
        // standard event processing
        return QObject::eventFilter(obj, e);
    }
}

testfocus::testfocus(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
    ui.setupUi(this);

    FocusEventFilter* filter = new FocusEventFilter(this);

    ui.lineEdit->installEventFilter(filter);
    ui.lineEdit_2->installEventFilter(filter);

    connect(filter, SIGNAL(focusIn(QWidget*, QFocusEvent*)), this, SLOT(onFocusIn(QWidget*, QFocusEvent*)));
    connect(filter, SIGNAL(focusOut(QWidget*, QFocusEvent*)), this, SLOT(onFocusOut(QWidget*, QFocusEvent*)));
}

testfocus::~testfocus()
{

}

void testfocus::onFocusIn(QWidget* obj, QFocusEvent*)
{
    obj->setStyleSheet("background-color:#aaaaff;");

}

void testfocus::onFocusOut(QWidget* obj, QFocusEvent*)
{
    obj->setStyleSheet("background-color:#ffaaaa;");
} 
```

当然，YMMV。每个对象总是可以有一个单独的过滤器。这种方法意味着您可以避免从所有事物中派生。效率不高，但应该可以。

您可以在事件过滤器本身中做您想做的事情，而不是使用信号/槽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:08:55.457

我过去用模板做过这样的事情。问题是你不能使用信号。

我是在没有编译器的情况下输入的，所以请善待:)：

```
template<typename T>
class FSWidget: public T
{
public:
    FSWidget()
    {
        _delegate = NULL;
    }

    setDelegate(FSDelegate *delegate)
    {
        _delegate = delegate;
    }

protected:
    virtual void focusInEvent(QFocusEvent *e)
    {
        T::focusInEvent(e);
        if (_delegate) {
            _delegate->focusInEvent(this);
        }
    }

    virtual void focusOutEvent(QFocusEvent *e)
    {
        T::focusOutEvent(e);
        if (_delegate) {
            _delegate->focusOutEvent(this);
        }

    }

private:
    FSDelegate *_delegate;
}; 
```

所以，好处是当你需要使用它时，你基本上可以创建一个这样的类：

```
FSWidget<QLineEdit *> lineEdit = new FSWidget<QLineEdit *>;
lineEdit->setDelegate(delegate); 
```

您可以放入任何您想要的东西而不是 QLineEdit，它会起作用。

然后 FSDelegate 可能只是一个接口，您可以将其混入任何需要对信息采取行动的类中。它可能是其中之一：

```
class FSDelegate
{
public:
    virtual void focusInEvent(QWidget *w) = 0;
    virtual void focusOutEvent(QWidget *w) = 0;
}; 
```

如果你总是在 focusInEvent 和 focusOutEvents 上做同样的事情，你可以实现这些函数并创建一个真正的 Mixin 类。

希望这可以为您避免一些代码重复。

# java - 如何在 vtd-xml 中获取父元素？

> ID：10832662
> 
> 赞同：2
> 
> 时间：2012-05-31T11:26:07.577
> 
> 标签：java, xpath, vtd-xml

我有一个 xpath 查询，我可以获得所有属性及其各自的值

但现在我想知道这些属性属于哪个元素？

这是我的 xml：

```
<?xml version='1.0' encoding='UTF-8'?>
<osm version="0.6" generator="osmconvert 0.5Z">
<bounds minlat="51.60542" minlon="-0.1854331" maxlat="51.69193" maxlon="-0.0088394"/>
    <node id="195870" lat="51.6844148" lon="-0.1772914" version="4" timestamp="2008-10-07T19:42:43Z" changeset="136213" uid="508" user="Welshie">
        <tag k="highway" v="motorway_junction"/>
        <tag k="ref" v="24"/>
    </node>
<node id="33206602" lat="51.6084884" lon="-0.0365496" version="4" timestamp="2011-09-23T16:54:00Z" changeset="9378015" uid="28024" user="dbisping">
        <tag k="amenity" v="fuel"/>
        <tag k="fuel:biodiesel" v="yes"/>
        <tag k="fuel:biogas" v="no"/>
        <tag k="fuel:cng" v="no"/>
        <tag k="fuel:diesel" v="no"/>
        <tag k="fuel:hydrogen" v="no"/>
        <tag k="fuel:lpg" v="no"/>
        <tag k="fuel:octane_100" v="no"/>
        <tag k="fuel:octane_95" v="no"/>
        <tag k="fuel:octane_98" v="no"/>
        <tag k="name" v="Pure Fuels"/>
        <tag k="self_service" v="no"/>
    </node>
    </osm> 
```

和我写的代码：

```
import com.ximpleware.*;

public class Test2
{
    public static void main (String[] abc)
    {
        VTDGen vg = new VTDGen();
        vg.parseFile("C:\\workspace\\sample osm xml\\1.xml",false);

        VTDNav nav = vg.getNav();
        AutoPilot ap = new AutoPilot(nav);
        try {
            //ap.selectXPath("/osm/node/tag[@k='amenity']");
            ap.selectXPath("//node/tag");
            while (ap.evalXPath() != -1 )
            {

                //getting attribute first element
                int val = nav.getAttrVal("k");
                if (val != -1)
                {
                    String element = "The element or node is ??? ";
                    String o = "key = " + nav.toNormalizedString(val) + " value = " +nav.toString(val + 2);
                    System.out.print(element);
                    System.out.println(o);
                }

            }
        } catch (XPathParseException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        } catch (XPathEvalException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        } catch (NavException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:24:07.447

vn.toElement(vn.PARENT) 怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T21:25:43.983

我也有同样的问题，我无法处理（我也在处理 OSM 数据）

我使用了一种方法，但我认为它对于像 OSM 这样的大量数据效率不高

我正在尝试以某种方式获取节点，当我看到节点时，我尝试获取其父 ID

```
int wayIndex = 1;

        while (way_id_counter != -1)
        {
            start = System.currentTimeMillis();
            wayID = vn.toString(way_id_counter+1);
            apSubNode_id.resetXPath();
            apSubNode_id.selectXPath("//way[" + wayIndex +"]/nd/@ref");
            way_node_id_counter = apSubNode_id.evalXPath();

            while (way_node_id_counter != -1)
            {
                subNodeID = vn.toString(way_node_id_counter+1);
                //System.out.println("Sub node id is " + subNodeID);
                way_node_id_counter = apSubNode_id.evalXPath();
            }
            wayIndex++;
            way_id_counter = apWay_id.evalXPath();
            //System.out.println("Way id is " + wayID);
            //break;
            end = System.currentTimeMillis();
            System.out.println(end - start);
        } 
```

它是嵌套的（在您的情况下，先搜索方法，然后搜索这种方式中的节点或这种方式中的标签，但直到现在我还没有找到一个好的解决方案）

希望它有所帮助

# google-play - 应用程序与平板电脑不兼容

> ID：10832664
> 
> 赞同：11
> 
> 时间：2012-05-31T11:26:11.740
> 
> 标签：google-play, tablet, android

我已经构建了一个 Android 应用程序......用于手机......但我不介意扩大我的受众并让平板电脑所有者也下载它......老实说。它在平板电脑上看起来不是很整洁......但我并不介意。我至少会给他们选择。

不幸的是，我无法使用平板电脑在 Google Play 商店/Android 市场上找到该应用程序！当我直接在浏览器中启动 url 时，我被重定向到 Play 商店，但它显示“此应用与您的设备不兼容”

我没有在我的 Manifest 中指定任何内容，例如“android:xlargeScreens”（默认应该是 true，对吗？我也没有在 Store Publish 页面中指定任何设备限制

不幸的是，我只有一台平板电脑可以测试它......所以我不知道是平板电脑故障，我的应用程序故障还是 Play 商店的故障......

我有一个 HP Touchpad (CM9)....这是相当实验性的设备 - 但其他手机应用程序在该设备上运行没有问题

在开发过程中，我还将平板电脑用作测试设备，并在其上启动了应用程序。所以我真的不知道为什么Play商店禁止我下载该应用程序....

我的清单或我的 XML 布局是否有任何特殊要求必须匹配，以便 Play 商店也为平板电脑用户打开它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T11:59:54.380

平板电脑可能不支持您的应用所需的某些功能。您可以将它们设置为应用程序“不需要”（这意味着您应该在代码中使用它们之前检查它们是否实际可用）。

它是这样完成的：

```
<!-- features -->
<uses-feature android:name="android.hardware.telephony"  android:required="false" /> 
```

其他可能的特征是：

> android.hardware.camera
> 
> android.hardware.camera.autofocus
> 
> android.hardware.location.gps
> 
> android.hardware.location
> 
> android.hardware.location.network

有关功能<->权限之间关系的完整列表，您可以查看：

[http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

请参阅“功能参考”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T11:55:56.720

将以下代码写入您的 android manifest.xml 文件以使应用程序平板电脑兼容。

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T19:40:09.087

我解决了自己的问题：

我做了两件事：

1 - 我禁用了“触摸屏”

```
<uses-feature android:name="android.hardware.touchscreen"  android:required="false" /> 
```

这会禁用 ADVANCE 触摸屏控制（如轻弹等）

但我认为这样做的原因如下：

2 - 几个小时后，我在 Play 商店发布页面中禁用了复制保护，我可以在平板电脑上找到我的应用并安装它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-23T18:43:44.903

Android 文档明确提到，如果您的应用支持 v3.1+，那么您应该在 AndroidManifest.xml 中有标签

[http://developer.android.com/guide/practices/screen-compat-mode.html](http://developer.android.com/guide/practices/screen-compat-mode.html)

# php - PHP preg_match_all - 如何从 HTML 中获取内容？

> ID：10832665
> 
> 赞同：1
> 
> 时间：2012-05-31T11:26:12.473
> 
> 标签：php, html, regex

$Content 包含 HTML 文档

```
 $contents = curl_exec ($ch) 
```

我需要从以下位置获取内容：

```
 <span class="Menu1">Artur €2000</span> 
```

它重复了好几次，所以我想将它保存到数组中

我尝试这样做：

```
 preg_match_all('<span class=\"Menu1\">(.*?)</span>@si',$contents,$wynik2); 
```

但我有一个错误

`Warning: preg_match_all() [function.preg-match-all]: Unknown modifier '('`

你们能帮帮我吗？编辑： $contents = curl_exec ($ch)

已解决：该错误是由于 CURLed 网站上的错误 HTML 造成的：

```
 <span class="Menu1">Content</tr> 
```

代替：

```
 <span class="Menu1">Content</tr> 
```

我没想到有人会写错 HTML。谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T11:28:00.257

您忘记了第一个分隔符 ( `@`)：

```
$contents = '<span class="Menu1">Artur $2000</span> somehtml <span class="Menu1">Mark $1000</span>';
preg_match_all('@<span class="Menu1">(.*?)</span>@si', $contents, $wynik2);

print_r($wynik2);
/*
Array
(
    [0] => Array
        (
            [0] => <span class="Menu1">Artur $2000</span>
            [1] => <span class="Menu1">Mark $1000</span>
        )

    [1] => Array
        (
            [0] => Artur $2000
            [1] => Mark $1000
        )

)
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:35:44.760

你应该`|`在你的正则表达式的开头和结尾加上这个符号“”：

```
preg_match_all("|<span class=\"Menu1\">(.*?)</span>|U",$contents,$wynik2); 
```

# actionscript - 如何在不同的角度停止旋转的动画剪辑，然后跟随其他动画剪辑，动作脚本 3

> ID：10832667
> 
> 赞同：1
> 
> 时间：2012-05-31T11:26:20.040
> 
> 标签：actionscript, rotation

我有一个压力计，它需要从最小值旋转到最大值。现在，我将压力计作为图片，将箭头作为电影剪辑。我让它以正确的速度旋转，但不知道如何在最低/最高压力下停止它。

它应该像这样工作：

我有两个电影剪辑/按钮；一种用于模拟更大的压力，一种用于模拟较小的压力。当用户按下“更多压力”电影剪辑/按钮时，压力开始上升，压力计内的箭头开始转动。在压力上升的同时，另一个movieclip（“stamp”）将向上推动。

然后是另一个电影剪辑/按钮，“压力较小”模拟压力下降；按下时，与压力上升时箭头停止的点相同，将开始向最小值下沉，印章将再次下降。

因此，当用户按下“更多压力”时，压力会上升到最大值，并且一旦用户停止按下按钮，动画就会停止（戳记和箭头）。如果用户按下“降低压力”，箭头就会从它停止的地方开始下沉。

到目前为止，这是我的代码：**pil1** = manometerarrow，stamp = **stamp**和“less pressure”/“more pressure” = **Lpress** / **mpress**

```
addEventListener (Event.ENTER_FRAME, rotate);
function rotate(event:Event):void
{
  pil1.rotation = pil1.rotation+1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:11:07.300

ymutlu 走在正确的轨道上。鼠标按下事件只会在鼠标被按下时执行一次。要使对象在按下鼠标时连续旋转，您需要在每一帧上增加或减少对象的旋转。我认为以下应该可以解决问题：

```
import flash.events.MouseEvent;
import flash.events.Event;

var rotate = 0;

Hpress.addEventListener(MouseEvent.MOUSE_DOWN, Hpressed); 
Hpress.addEventListener(MouseEvent.MOUSE_UP, removeEnterFrame);
Lpress.addEventListener(MouseEvent.MOUSE_DOWN, Lpressed);
Lpress.addEventListener(MouseEvent.MOUSE_UP, removeEnterFrame);

function Hpressed(e:MouseEvent):void 
{ 
    rotate = 1; 
    addEnterFrame();
} 

function Lpressed(e:MouseEvent):void 
{ 
    rotate = -1;
    addEnterFrame();
}

function addEnterFrame():void
{
    this.addEventListener(Event.ENTER_FRAME, update);
}

function removeEnterFrame(e:MouseEvent):void
{
    this.removeEventListener(Event.ENTER_FRAME, update);
}

function update(e:Event):void
{
    pil1.rotation += rotate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:40:22.697

保持变量状态，如果最大按钮按下或最小按钮按下，并在 enterframe 循环中检查它。对您的评论进行了编辑答案，希望您能解决。

```
addEventListener (Event.ENTER_FRAME, rotate);
function rotate(event:Event):void
{
   if(isMaxDown) // true when max button down
     pil1.rotation = Math.min(presMax,pil1.rotation+1);  // presMax is max value that pressure can go
   if(isMinDown) // true when min button down
     pil1.rotation = Math.max(presMin,pil1.rotation-1);// presMin is min value that pressure can go
}

// isMaxDown and isMinDown are global values.
Hpress.addEventListener(MouseEvent.MOUSE_DOWN, Hpressed);
Lpress.addEventListener(MouseEvent.MOUSE_DOWN, Lpressed); 
Hpress.addEventListener(MouseEvent.MOUSE_UP, H_up);
Lpress.addEventListener(MouseEvent.MOUSE_UP, L_up); 
function H_up(e:MouseEvent):void {
 isMaxDown=false;
} 
function L_up(e:MouseEvent):void {
 isMinDown=false; 
} 
function Hpressed(e:MouseEvent):void {
 isMaxDown=true;
} 
function Lpressed(e:MouseEvent):void {
 isMinDown=true; 
} 
```

这段代码会对您有所帮助，但可能这不是休闲做类似事情的途径。

# java - 使用 Joda 时间库格式化日期

> ID：10832669
> 
> 赞同：5
> 
> 时间：2012-05-31T11:26:37.053
> 
> 标签：java, datetime, jodatime

在 java 类中，我从 mm/dd/yyyy 中的 datepicker-input 表单中获取日期为字符串“renewDate”。

当我尝试使用 joda 时间库更新代码时

```
DateTime expireDate = new DateTime(renewDate);
// i get error at above line
updateOrganization.setRenewdate(expireDate.toDate());
organizationDAO.update(updateOrganization); 
```

但是如果我以 ie 格式格式化日期，从 mm/dd/yyyy 到 yyyy-mm-dd 并将其发送到 java 类，它工作正常。

如何在 Java 类中将日期从 mm/dd/yy 格式化为 yyyy-mm-dd。输入是字符串格式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T11:30:42.263

您正在使用的构造函数的有效格式列表在[ISODateTimeFormat 的 javadoc 中](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTimeParser%28%29)有详细说明，其中不包括“mm/dd/yyyy”：

> 日期时间 = 时间 | 日期选择时间
> 时间 = 'T' 时间元素 [偏移量]
> 日期选择时间 = 日期元素 ['T' [时间元素] [偏移量]]
> 日期元素 = 标准日期元素 | 排序日期元素 | 星期日期元素
> 标准日期元素 = yyyy ['-' MM ['-' dd]]
> ord-日期元素 = yyyy ['-' DDD]
> 星期日期元素 = xxxx '-W' ww [ '-' e]
> 时间元素 = HH [分钟元素] | [分数]
> min-element = ':' mm [second-element] | [分数]
> 第二元素 = ':' ss [分数]
> 分数 = ('.' | ',') 数字+
> 偏移量 = 'Z' | (('+' | '-') HH [':

[您可以使用DateTimeFormatter](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html)解析不同的格式（注意 MM 为大写月份）：

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("MM/dd/yyyy");
DateTime expireDate = fmt.parseDateTime(renewDate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:32:06.127

您需要使用静态方法[parse 解析](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#parse%28java.lang.String,%20org.joda.time.format.DateTimeFormatter%29)日期，因为构造函数假定字符串为 ISO 格式

您需要的日期格式如下

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("MM/dd/yyyy");
DateTime expireDate = DateTime.parse( renewDate, fmt ); 
```

# html - 如何将我们网站上的内容分享到 google plus

> ID：10832670
> 
> 赞同：0
> 
> 时间：2012-05-31T11:26:50.210
> 
> 标签：html

如何将我们网站上的内容分享到 google plus

我试过这样

```
<a href="javascript:void(0);" onclick="window.open('https://plus.google.com/share?url=<?php echo urlencode('http://example.com');?>&via=example', 'Share on Google Plus', 'width=600,height=400,left=450').focus();" > 
```

在这里，我无法分享我网站上的内容。这怎么可能？我想分享内容（例如：你好）到带有分享功能的 goggle plus

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:35:39.253

是的。您可以从您的应用中粘贴必须设置为默认数据的内容。[https://developers.google.com/+/web/share/interactive#button_attr_calltoactionurl](https://developers.google.com/+/web/share/interactive#button_attr_calltoactionurl)

这里没什么可做的。。

只需在开发人员部分创建一个 google plus 应用程序。然后粘贴以下部分

```
<button
  class="g-interactivepost"
 data-contenturl="https://plus.google.com/pages/"
  data-contentdeeplinkid="/pages"
  data-clientid="xxxxx.apps.googleusercontent.com"
  data-cookiepolicy="single_host_origin"
  data-prefilltext="Engage your users today, create a Google+ page for your business."
  data-calltoactionlabel="CREATE"
  data-calltoactionurl="http://plus.google.com/pages/create"
  data-calltoactiondeeplinkid="/pages/create">
  Tell your friends
</button> 
```

然后更改数据客户端 ID。现在它将按照您的期望工作。享受 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:33:24.107

谷歌推出分享按钮已经有一段时间了。你可以在他们的开发者页面上找到这个。[[这里]](https://developers.google.com/+/plugins/share/?utm_source=blog&utm_medium=gplusdevelopers&utm_campaign=shareplugin)

将生成的代码粘贴到您的网页上，然后 API 将自动接收该页面的链接。

# permissions - 向给定文件夹上的本地应用程序池组授予写入权限

> ID：10832673
> 
> 赞同：1
> 
> 时间：2012-05-31T11:27:07.420
> 
> 标签：permissions, iis-7.5, application-pool

我有一个 IIS 7.5 独立 Web 服务器。我有 5 个站点，每个站点都有大约 9 个应用程序池。

现在，我需要能够授予对本地文件夹的写入权限。我想我可以创建一个名为“AppPool - Site1”的本地组，并授予该组对给定文件夹的正确权限。然后我可以为 Site1 添加部分或全部应用程序池，我应该没问题，但是......不......

它似乎不起作用。如果我授予单个用户“IIS APPPOOL\Site1 - appPool 1”完全相同的权限，它就可以工作。

我想与小组一起做这件事，以保持维护容易。

有没有人有任何想法或线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:00:51.470

应用程序池是伪用户。它们是名为 IIS_IUSRS 的组的成员。我已成功将此组添加到 C: 驱动器文件夹。

# iis-7 - 如何更改 .NET 4 的 IIS 7 服务器范围的 SMTP 设置

> ID：10832676
> 
> 赞同：1
> 
> 时间：2012-05-31T11:27:17.573
> 
> 标签：iis-7, web-config, smtp

我正在尝试为 .NET 4 Web 应用程序配置 IIS 7 SMTP 设置，因此所有站点都使用相同的主机。我已经在 IIS 管理器中为服务器配置了主机，但这仅由 .NET 2 Web 应用程序获取。

.NET 4.0 应用程序不拾取主机。

有没有办法为 .NET 4 指定机器范围的 SMTP 设置？服务器是 x64。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:18:07.630

我找到了答案：您需要将该`<system.net>`部分添加到您的 machine.config 文件中，用于框架，例如

```
<system.net>
        <mailSettings>
            <smtp from="blah@blah">
                <network host="123.321.123.321" port="25" defaultCredentials="true" />
            </smtp>
        </mailSettings>
</system.net> 
```

IIS7 仍将其 SMTP 设置存储在 metabase.xml 文件中，但是您可以通过 machine.config 为框架配置它，因为这具有优先权。

你只需要记住，如果你在 64 位服务器上，路径是

> C:\Windows\Microsoft.NET\Framework64

# asp.net-mvc - 在 asp.net mvc 应用程序中显示 Lync Precense 指示器（带弹出窗口）

> ID：10832677
> 
> 赞同：2
> 
> 时间：2012-05-31T11:27:37.483
> 
> 标签：asp.net-mvc, lync

如何将 Lync 指示器添加到我的 Web 应用程序（Intranet，所有用户都运行 lync）？

我找到了这个链接

*   [参与创建 silverlight 应用程序](http://msdn.microsoft.com/en-us/library/hh243697)
*   [似乎不提供弹出功能](http://htmlpresencecontrols.codeplex.com)

还有其他选择吗？

我在想这很简单，只需下载一些库并添加一个 lync 类就可以用电子邮件做一个 div，但看起来情况并非如此。也许我错过了什么

谢谢你的帮助

拉尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:34:03.167

如果您在组织中的任何地方部署了 Sharepoint，则可以使用[此技巧](http://geekswithblogs.net/jacobladams/archive/2011/05/03/use-hmtl-and-javascript-to-display-presence-controls-in-sharepoint.aspx)轻松显示状态（通过利用 sharepoint 功能）。

# c# - 使用 Linq 更新主表时更新子记录的有效方法

> ID：10832680
> 
> 赞同：2
> 
> 时间：2012-05-31T11:27:47.467
> 
> 标签：c#, linq, linq-to-sql, entity-framework-4, linq-to-entities

我目前使用只能像这样更新单个表的通用存储库类

```
public abstract class MyRepository<T> : IRepository<T>
        where T : class
{

    protected IObjectSet<T> _objectSet;
    protected ObjectContext _context;

    public MyRepository(ObjectContext Context)
    {
        _objectSet = Context.CreateObjectSet<T>();
        _context = Context;
    }

    public IQueryable<T> GetAll()
    {
        return _objectSet.AsQueryable();
    }

    public IQueryable<T> Find(Expression<Func<T, bool>> filter)
    {
        return _objectSet.Where(filter);
    }

    public void Add(T entity)
    {
        _objectSet.AddObject(entity);
        _context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Added);
        _context.SaveChanges();
    }

    public void Update(T entity)
    {
        _context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified);
        _context.SaveChanges();
    }

    public void Delete(T entity)
    {
        _objectSet.Attach(entity);
        _context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Deleted);
        _objectSet.DeleteObject(entity);
        _context.SaveChanges();
    }

} 
```

对于我的 EDMX 设计器生成的每个表类，我创建另一个像这样的类

```
public class CustomerRepo : MyRepository<Customer>
{
    public CustomerRepo (ObjectContext context)
        : base(context)
    {

    }
} 
```

对于我需要对特定表进行的任何更新，我这样做：

```
Customer CustomerObj = new Customer();
CustomerObj.Prop1 = ...
CustomerObj.Prop2 = ...
CustomerObj.Prop3 = ...
CustomerRepo.Update(CustomerObj); 
```

当我只更新名为 Customer 的特定表时，这非常有效。现在，如果我还需要更新另一个名为 Orders 的 Customer 的子表的每一行，我需要对 MyRepository 类进行哪些更改。订单表将有多个客户记录和多个字段的记录，例如 Field1、Field2、Field3。

所以我的问题是： 1.）如果我只需要根据条件更新 Orders 表的某些行的 Field1 和基于不同条件的其他行的 Field2，那么我需要做哪些更改？

2.）如果没有这样的条件，并且所有子行都需要更新为所有行的相同值，那么我需要做什么更改？

感谢您抽出宝贵的时间。期待您的投入...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:41:00.820

您的主要问题是您试图更新断开连接的实体（即`var myCustomer = new Customer()`）而不将其附加到数据上下文。有关如何附加断开连接的实体的详细信息，请参阅[此答案。](https://stackoverflow.com/a/3594608/176651)在您的情况下，我认为这可能会变得复杂，因为不仅需要附加父实体，还需要附加所有子实体。

在您的情况下，我的建议是对首先从上下文中检索到的实体执行更新，因此将已经附加到它。在这种情况下，这些实体将自己跟踪更改。您无需将实体附加到您的上下文或调用`_context.ObjectStateManager.ChangeObjectState`。同样，看一下[我前面提到](https://stackoverflow.com/a/3594608/176651)的对附加实体执行更新的示例的相同答案。加载父对象后，您只需对其及其子对象应用任何更改，然后`SaveChanges`在完成所有操作后调用上下文中的方法。

**注意：**默认情况下，EF 将延迟加载任何子关系（即子对象、集合等）。但是，在某些情况下，您可能希望在加载父对象的同时显式/急切地加载子对象，而不是延迟加载（您可以在[此处](http://msdn.microsoft.com/en-us/library/bb896272.aspx)找到文档）。

# java - 如何使程序能够安装

> ID：10832682
> 
> 赞同：5
> 
> 时间：2012-05-31T11:27:55.377
> 
> 标签：java, deployment

我已经完成了使用 netbeans 开发我的 java 应用程序。现在我想把它给别人。如何更改它以便用户可以直接安装和运行我的应用程序，而无需从 IDE 或命令行运行它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:31:57.910

你有几个选择：

1.  如果“安装”意味着单击并运行您的应用程序的图标，您可以创建一个安装程序来执行此操作。您没有指定目标操作系统。我建议像 Wise 这样的安装程序使用谷歌搜索。
2.  您可以使用启动命令文件创建可执行 JAR 以供用户执行。
3.  您可以使用 Java Web Start。

您必须假设您的用户群安装了正确版本的 JVM，并且可供您的应用使用。

你没有说任何关于数据库或其他服务的事情，所以我假设你有一个要启动的 main 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:34:18.277

对于没有依赖关系的简单应用程序，最简单的方法是创建一个可执行的 JAR 文件。

对于复杂的应用程序，您需要将主 JAR 和它所依赖的其他东西打包，并以用户可以安装的方式呈现。这可能是一个简单的 ZIP 文件（或等效文件）供用户解压缩。（例如，Eclipse 就是这样分发的）。或者，它可能是一个花哨的安装程序......您需要编写或生成它。（有各种各样的安装程序生成器：一些免费/开源，其他商业。）

基本上，您需要平衡用户的“易于安装”与您准备花费在为您的应用程序创建安装程序基础架构上的工作量（和金钱）。

或者，如果您准备好将应用程序托管在 Web 服务器上并从 Web 服务器启动，那么 Java WebStart 是安装程序的一个很好的替代方案，尤其是因为它不需要让用户重新安装以获取更新版本的你的申请。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:36:32.287

[查看此处](http://javabyexample.wisdomplug.com/java-concepts/34-core-java/63-make-an-installer-for-your-java-applications.html)介绍的一些免费打包安装程序。您应该了解应如何在“干净”机器上设置应用程序，并将其描述给您使用的工具。

我过去使用过 IZPack，对此非常满意。您还需要知道如何将您的应用程序打包到 jars/wars/ears（或其他）中。

我希望这能给你一个凝视点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:42:10.357

你可以试试[JSmooth](http://jsmooth.sourceforge.net/)，看看它是如何为你工作的。我以前没用过，但我的一个同事用了好几次，他似乎对它很满意。

# git - 如何在 mac 中使用 putty.ppk 用 git 克隆 peoject？

> ID：10832691
> 
> 赞同：1
> 
> 时间：2012-05-31T11:28:23.623
> 
> 标签：git, osx-snow-leopard, clone, putty

我是 MAC OS 和 GIT 的新手，我必须在 MAC OS 10.6.8 下使用 GIT 克隆一个项目。

我所做的一切如下：

1.  下载并安装 GIT

    ```
    $ git --version
    git version 1.7.5.4 
    ```

2.  下载并安装 PuTTY

我所拥有的都是

1.  测试.ppk
2.  test_putty.ppk
3.  ssh://git@:/~/folder1/subfolder1/test.git

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:09:59.717

我不知道具体在 OSX 和 PuTTY 下提供了哪些工具，但你需要做两件事之一

*   将 PPK 中的公钥和私钥导出到 ~/.ssh/id_rsa / 和 ~/.ssh/id_rsa.pub 作为 OpenSSH 密钥。在 Windows 上，您可以使用 PuTTYGen 通过加载 PPK 文件来执行此操作，它将显示 OpenSSH 的相应信息。这样您就可以使用本机 ssh 客户端。
*   如果有 Windows“plink”的 OSX 模拟，请查看是否可以将环境变量 GIT_SSH 设置为指向此可执行文件。

我希望这会有所帮助。我想我可能会混淆这个问题。

如果您希望仅使用 OpenSSH 样式访问，则需要从 PPK 文件中读取公钥和私钥（假设 Windows PuTTYGen）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:38:47.533

只是询问，但你为什么需要使用腻子，这是工作任务还是什么？我以为 OSX 自带了自己的 openssh 客户端？

通常它应该只是

```
git clone ssh://git@:/~/folder1/subfolder1/test.git 
```

这不适用于您的安装吗？我认为这是您提供的伪 URI，因为通常您需要指定要通过 ssh 克隆的主机，例如 git@somehost.com/folder/blah.git （如果可能/允许您可以发布完整的 git 位置/你使用的命令？）

如果您遇到任何身份验证错误，请确保您的身份文件 (~/.ssh/authorized_keys) 已设置为适当的权限，并且已填充了远程位置的正确密钥。

# javascript - 主干模型数组字段变化导致类变化

> ID：10832699
> 
> 赞同：0
> 
> 时间：2012-05-31T11:29:03.300
> 
> 标签：javascript, backbone.js

我有一个问题，在默认情况下使用数组创建模型时。也许我错过了什么？

```
 $(document).ready(function(){
        Person = Backbone.Model.extend({
            defaults:{
                children:[]
            },        
            add: function(child){
                var children_array = this.get('children');
                children_array.push(child);
                this.set({children:children_array});
            }
        });

//create with default constructor
        var person = new Person();
//add 2 child
        person.add('John');
        person.add('Jane');
        alert(person.get('children'));

//create another one    
        var person1 = new Person();    
//already have 2 children!
        alert(person1.get('children'));    

        var person2 = new Person({children: []});    
//that's work
        alert(person2.get('children'));    
    }) 
```

演示：http: [//jsfiddle.net/GA68X/2/](http://jsfiddle.net/GA68X/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:07:24.837

> 请记住，在 JavaScript 中，对象是通过引用传递的，因此如果您包含一个对象作为默认值，它将在所有实例之间共享。

[http://documentcloud.github.com/backbone/#Model-defaults](http://documentcloud.github.com/backbone/#Model-defaults)

试试这个：

```
 Person = Backbone.Model.extend({
     defaults: function () {
         return {
             children: []
         }
     },        
     ...
}); 
```

[http://jsfiddle.net/UBdQp/1/](http://jsfiddle.net/UBdQp/1/)

# android - 如何将 imageview 运行时添加到 listview

> ID：10832700
> 
> 赞同：1
> 
> 时间：2012-05-31T11:29:10.587
> 
> 标签：android, listview, android-lazyloading

我在这个文本视图中有一个数组列表，用国家/地区名称固定，但图像不固定，它是 10,50,100，但第一个国家/地区名称比所有创建的动态图像视图的图像都显示，所以列表视图和这个国家名称和图像超过1 如何处理这个listview 我已经用tablelayout 做到了这一点，但我不知道tablelayout 延迟加载所有延迟加载都是针对listview 而不是针对tablelayout 所以我想问这在像tablelayout 这样的listview 中是否可行，所以我可以这样做谢谢提前

在这里您可以看到图像，以便您更好地理解 ![在此处输入图像描述](../Images/ae71c1bd82f90e22d04d70137c2e8a71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:34:43.563

根据上面的评论：

1.  GridView 布局的链接：http: [//pastebin.com/DXfut3eM](http://pastebin.com/DXfut3eM)
2.  自定义 GridView 项目的链接：http: [//pastebin.com/57fC9uuk](http://pastebin.com/57fC9uuk)
3.  主要活动的链接：http: [//pastebin.com/bft4uuRT](http://pastebin.com/bft4uuRT)
4.  根据 Fedor 的延迟加载示例使用的适配器链接：http: [//pastebin.com/dkP0NWju](http://pastebin.com/dkP0NWju)

请注意，我没有包含指向 Fedor 示例中常见的其他文件的链接。它们几乎相同，只需稍作改动即可满足我的要求。使用他 github 上的股票文件，这将与我的完全相同。

希望这会有所帮助，祝你好运。

# c# - 线程顺序执行？

> ID：10832702
> 
> 赞同：5
> 
> 时间：2012-05-31T11:29:12.630
> 
> 标签：c#, .net, multithreading, .net-4.0, clr

我有这个简单的代码：（*我在 linqpad 中运行*）

```
void Main()
{
    for ( int  i=0;i<10;i++)
     {
      int  tmp=i;
      new Thread (() =>doWork(tmp)).Start();
     }
}

 public void doWork( int h)
 {
 h.Dump();
 } 
```

该`int tmp=i;`行用于捕获变量-因此每次迭代都有自己的值。

2个问题：

**1）**数字*不是*连续的，而线程执行是！

**2)**有时我得到的数字*少于*10 个！

以下是一些执行输出：

![在此处输入图像描述](../Images/74b8327925a1688e85768b1075dbc369.png)![在此处输入图像描述](../Images/9a498896ab94f140c530ee7ef5b0047d.png)![在此处输入图像描述](../Images/6b2a06391b2efc90c38c8091c220462a.png)![在此处输入图像描述](../Images/78cfd5d914a890bc61b0b71b25c57b2b.png)

**问题**：

1）为什么会发生案例1，我该如何解决？

2）为什么会发生案例2，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T11:33:57.827

不应期望它们是连续的。每个线程都获得**内核选择**的优先级。可能会**发生**它们看起来是连续的，纯粹是每个开始时的性质，但这纯粹是机会。

为了确保它们都完成 - 将每个新线程标记为`IsBackground = false`，以便它保持可执行文件处于活动状态。例如：

```
new Thread(() => doWork(tmp)) { IsBackground = false }.Start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:38:06.410

您不应该期望线程之间有任何排序。

如果您启动一个新线程，它只会被添加到操作系统的管理结构中。最终，线程调度程序将出现并为线程分配一个时间片。它可以以循环方式执行此操作，选择一个随机的，使用一些启发式方法来确定哪个看起来最重要（例如，拥有一个在前台的窗口）等等。

如果输出的顺序是相关的，您可以在之后对其进行排序，或者 - 如果您在工作开始之前就知道顺序 - 使用一个数组，其中每个线程都有一个索引，它应该将其结果写入其中。

以您的示例的方式创建新线程也非常慢。对于微任务，使用线程池至少要快一个数量级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:35:51.360

线程以不可预知的顺序执行，如果主线程在其他线程之前完成，您将无法获得所有数字（dump() 将不会执行）。如果您将线程标记为 IsBackground = false，您将获得所有线程。第一个没有真正的解决方案，除了不使用线程（或加入线程，这实际上是一样的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:38:04.953

线程管理的本质是随机的。您可以解决这两个任务，但开销太大。

1.  问题出现在控制台（或您用于转储的线程）上并发多个线程，同步机制的覆盖是可能的但很复杂并且会导致性能降低
2.  在调用所有线程之前退出（请参阅@Marc Gravell 的回答）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:12:54.463

如果排序很重要，您可能希望利用共享队列并使用信号量来确保一次只有一个线程在队列顶部运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-02T03:02:19.787

您可以订购线程执行，但必须由您专门针对特定问题和特定解决方案执行。

> 例如：您希望线程 1、2、3 完成代码的第 1 阶段，然后它们按照 ID 的顺序（您分配的这些 ID）进入下一阶段。

你可以使用**信号量**来实现行为——搜索块同步和互斥以及Test-and-set方法。

# facebook-graph-api - 如何将 Facebook 聊天集成到 php 网站或应用程序中

> ID：10832707
> 
> 赞同：0
> 
> 时间：2012-05-31T11:29:42.850
> 
> 标签：facebook-graph-api, integration, facebook-chat

我想知道，如何将 facebook 聊天集成到我的应用程序中，我做了很多研发并阅读和实施了很多示例，但没有奏效。

所以如果你有一个确定的想法或应用程序或任何使它发生的事情，请回复它..

提前致谢..

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-31T11:34:47.390

您可能想查看直播插件：http: [//developers.facebook.com/docs/reference/plugins/live-stream/](http://developers.facebook.com/docs/reference/plugins/live-stream/)

# cakephp - 当从它传递ajax请求时，在cake php中获取当前页面参数'$this->params'

> ID：10832709
> 
> 赞同：1
> 
> 时间：2012-05-31T11:30:02.763
> 
> 标签：cakephp, cakephp-1.3

`$this->params`当从它传递ajax请求时，在cake php中获取当前页面参数

是否可以将基本页面参数直接获取到 cake php 中的 ajax 请求函数

例如

`http://localhost/pages/view/2` 是我的基本路径。

我正在 `/pages/customFunction`从基本页面请求一个 ajax。

`function customFunction()`是否可以在不通过 ajax的情况下将基本页面参数作为 'pages' 、 'view' 和 2 在里面 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:42:10.843

不，除非您使用会话将信息存储在那里。

您正在发出两个 https 请求，一个用于添加，另一个用于 customFunction。这就是http的工作原理。

只需将您用于 add 方法的相同参数传递给 ajax 请求中的 custumFunction。我认为完成这项工作没有问题。

# facebook - Facebook 聊天 API - XMPP 输入暂停通知

> ID：10832718
> 
> 赞同：1
> 
> 时间：2012-05-31T11:30:30.603
> 
> 标签：facebook, xmpp, chat, typing

我正在使用 XMPP 协议通过 Facebook 聊天发送和接收消息。我可以接收消息，也可以收到打字通知。

我的问题是我没有收到“打字暂停”通知。

我的应用程序已成功执行身份验证程序，当用户输入消息时，我收到“正在撰写”消息，但是当他停止输入时，我没有收到[XEP-0085](http://xmpp.org/extensions/xep-0085.html)协议中记录的“暂停”消息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:13:08.547

答案很可能是 Facebook 不支持`<paused/>`. 仅支持XEP`<active/>`并且`<composing/>`是[绝对需要的。](http://xmpp.org/extensions/xep-0085.html#bizrules-support)

您的客户应该`<paused/>`适当地处理，但也可以处理不接收它的问题。

# c# - EPSON TM-88IV型热敏打印机如何知道纸张用完

> ID：10832719
> 
> 赞同：3
> 
> 时间：2012-05-31T11:30:31.467
> 
> 标签：c#, .net, status, epson, thermal-printer

我有 EPSON 热敏打印机，型号 TM-88IV。我能够获得打印机的各种属性，但找不到任何获得以下状态：

1.  纸没了
2.  打印机处于错误状态
3.  打印机关闭

我正在使用以下代码：

```
string printerName = "EPSON";
string query = string.Format("SELECT * from Win32_Printer WHERE Name LIKE '%{0}%'", printerName);
ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
ManagementObjectCollection coll = searcher.Get();

foreach (ManagementObject printer in coll)
{
    MessageBox.Show(printer.Properties["Name"].Name + " - " + printer.Properties["Name"].Value
        + "\n" +
        printer.Properties["PrinterStatus"].Name + " - " + printer.Properties["PrinterStatus"].Value
        + "\n" +
        printer.Properties["DetectedErrorState"].Name + " - " + printer.Properties["DetectedErrorState"].Value
        + "\n" +
        printer.Properties["ExtendedDetectedErrorState"].Name + " - " + printer.Properties["ExtendedDetectedErrorState"].Value
         + "\n" +
        printer.Properties["ExtendedPrinterStatus"].Name + " - " + printer.Properties["ExtendedPrinterStatus"].Value
        );
} 
```

我得到了上述属性的各种值，但无法将其映射到打印机的状态。

输出是

```
Name: EPSON TM-T88IV
PrinterStatus : 3
DetectedErrorState: 0
ExtendedDetectedErrorState: 0
ExtendedPrinterStatus: 2 
```

我已经安装了随打印机一起提供的 CD 中的 EPSON TM-88IV 驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:09:28.193

显然`DetectedErrorState`并`ExtendedDetectedErrorState`显示`0`这意味着**Unknown**。这是否意味着这台打印机不支持此属性，您当前的驱动程序不支持它，或者其他什么 - 我不知道。还有你的`ExtendedPrinterStatus`节目`2`，这意味着**Unknown**。

您`PrinterStatus`说`3`这意味着**空闲**，因此您无法从中收集任何有用的信息。

尝试查询`PrinterState`. 虽然这是一个很长的镜头，因为这个属性被标记为过时，但是嘿，这只是一行代码，看看它会返回什么。

有关每个返回值含义的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/aa394363%28VS.85%29.aspx)

**编辑**
由于这台打印机应该支持*自动状态返回*( **ASB** ) 通知，您可能能够直接从打印机读取该状态，而不是使用 WMI。[有关 ASB 的详细信息，请参阅此 SO question](https://stackoverflow.com/questions/514231/epson-pos-printer-automatic-status-back-specification)。[这是您的打印机的规格](http://www.novopos.ch/client/EPSON/TM-T88IV/TM-T88IV%20Specification/t88ivs_e_g.pdf)

# java - Android - PDF 诠释。- 新实例失败 - 无法实例化

> ID：10832720
> 
> 赞同：1
> 
> 时间：2012-05-31T11:30:41.213
> 
> 标签：java, android, pdf, jar, integrate

我已尝试集成此 PDF Viever，但收到此崩溃消息：

```
05-31 11:20:48.717: D/ddm-heap(235): Got feature list request

05-31 11:21:16.117: D/dalvikvm(235): newInstance failed: p0 i0 [0 a1

05-31 11:21:16.127: D/AndroidRuntime(235): Shutting down VM

05-31 11:21:16.127: W/dalvikvm(235): threadid=3: thread exiting with uncaught exception (group=0x4001b188)

05-31 11:21:16.127: E/AndroidRuntime(235): Uncaught handler: thread main exiting due to uncaught exception

05-31 11:21:16.137: E/AndroidRuntime(235): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{net.sf.andpdf.pdfviewer/net.sf.andpdf.pdfviewer.PdfViewerActivity}: 
java.lang.InstantiationException: net.sf.andpdf.pdfviewer.PdfViewerActivity

05-31 11:21:16.137: E/AndroidRuntime(235):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417) 
```

这就是我尝试实现的：[https ://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)

集成活动的帮助文本说：

```
1) Add PdfViewer.jar into your project's build path

2) Copy the following drawable resources from PdfViewer/res/drawable into YourProject/res/drawable
     left_arrow.png
     right_arrow.png
     zoom_in.png
     zoom_out.png

3) Copy the following layout resources from PdfViewer/res/layout into YourProject/res/layout
     dialog_pagenumber.xml
     pdf_file_password.xml

!!THIS IS WHERE THE PROBLEM LIES!! - SE BELOW

4) ***Derive your PDF activity from net.sf.andpdf.pdfviewer.PdfViewerActivity***

5) Using the default drawables and layouts:
     public int getPreviousPageImageResource() { return R.drawable.left_arrow; }
     public int getNextPageImageResource() { return R.drawable.right_arrow; }
     public int getZoomInImageResource() { return R.drawable.zoom_in; }
     public int getZoomOutImageResource() { return R.drawable.zoom_out; }
     public int getPdfPasswordLayoutResource() { return R.layout.pdf_file_password; }
     public int getPdfPageNumberResource() { return R.layout.dialog_pagenumber; }
     public int getPdfPasswordEditField() { return R.id.etPassword; }
     public int getPdfPasswordOkButton() { return R.id.btOK; }
     public int getPdfPasswordExitButton() { return R.id.btExit; }
     public int getPdfPageNumberEditField() { return R.id.pagenum_edit; }

6) Invoke your PdfViewActivity derived with the following code:
     Intent intent = new Intent(this, YourPdfViewerActivity.class);
     intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, "PATH TO PDF GOES HERE");
     startActivity(intent); 
```

我尝试将 pdfviewer 活动 .jar 集成为外部 JAR 或在资产文件夹中实现它并从那里加载 Jar。PdfViewer 活动位于 src 类文件夹（sf.net.andpdf.....）中，我也将其命名为 100%，就像代码是“创建的”一样。

显现：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Niels"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity android:name=".PdfViewerActivity" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.PDFVIEWERACTIVITY" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
     </activity>        
    <activity android:name=".PdfViewerActivity" />               
</application> 
```

尼尔斯.Java：

```
 public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1 : 

            try{    
        Intent intent = new Intent(this, PdfViewerActivity.class /*i called this without "Your" as the actual class is named without "Your"*/ );
         intent.putExtra(net.sf.andpdf.pdfviewer.PdfViewerActivity.EXTRA_PDFFILENAME, "R.drawable.untitled" /*-> untitled.pdf*/);
         startActivity(intent); }
            catch (Exception e){                        
            e.printStackTrace();
            } 
```

那么关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:19:42.297

好的，问题是缺少 pdfactivity 的实例化。

我创建了新课程：

pdfReader.java：

```
package net.sf.andpdf.pdfviewer;

public class PdfReader extends PdfViewerActivity {
@Override
public int getPreviousPageImageResource() {
    // TODO Auto-generated method stub
    return 0;
} 
```

因此，我更改了此部分：

```
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1 : 
        try {   
            Intent intent = new Intent(this, PdfReader.class /*the name changed*/);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, "R.drawable.untitled");
            startActivity(intent); 
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

最后，我也将新活动添加到清单中。

这解决了这个问题，虽然我遇到了“无法解决超类”的新问题 - 这将进入一个新问题。

# git - 通过 git rebase --interactive 编辑提交时如何保留提交消息？

> ID：10832722
> 
> 赞同：15
> 
> 时间：2012-05-31T11:31:02.810
> 
> 标签：git

我目前正在一个 `git rebase --interactive`会话中，我正在编辑一个提交。我正在按照[如何拆分隐藏在历史中的 Git 提交的建议进行操作？](https://stackoverflow.com/questions/4307095/git-how-to-split-up-a-commit-buried-in-history)即我跑了`git reset HEAD^`，做了我的修改。现在我希望 rebase 继续，这需要我提交我的更改。我想修改我的旧提交消息，但问题是，如果我运行，我会在实际修改*之前*`git commit --amend`给出提交的提交消息——我当然不想合并我的更改为该提交。

 *那么如何为我现在正在处理的提交检索我的旧提交消息？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-14T20:25:35.770

虽然[CharlesB 的解决方案是正确的并且可能更容易](https://stackoverflow.com/users/11343/charlesb)，但原始发布者在他想要编辑的提交***之前***看到提交消息的原因是因为他使用了 的`--amend`标志`git commit`，它修改***了之前的***提交。

不要使用`--amend`提交您的更改，只需使用`git commit`不带标志的标志，它不会触及之前的提交。您还可以传入一个选项，以重用您使用重置的提交中的提交消息`git reset head^`：

```
git commit --reuse-message=HEAD@{1}

# Or use -C, which is the same thing, but shorter:
git commit -C HEAD@{1} 
```

`HEAD@{1}`指向你之前的提交`git reset head^`。您也可以直接为该提交传递 sha id。

从[文档](https://www.kernel.org/pub/software/scm/git/docs/git-commit.html)：[_`git commit`](https://www.kernel.org/pub/software/scm/git/docs/git-commit.html)

> ```
> -C <commit>
> --reuse-message=<commit> 
> ```
> 
> 获取现有的提交对象，并在创建提交时重用日志消息和作者信息（包括时间戳）。

当然，就像我说的，CharlesB 的解决方案更简单，因为如果你不做第一个`git reset head^`，你可以直接进行更改并修改你试图修改的提交，当你这样做时你会自动得到上一个提交消息`git commit --amend`，您不必为此传递提交 sha。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T12:16:36.403

[如果您不想要它，](https://stackoverflow.com/questions/10832722/how-do-i-keep-the-commit-message-when-editing-commits-via-git-rebase-interacti#comment14104282_10832722)为什么要遵循有关提交拆分的说明？

您不会重置为`HEAD^`，这仅适用于拆分提交时。只需在 中标记要编辑的提交`rebase -i`，进行更改，`commit --amend`然后`rebase --continue`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T20:14:12.207

[我在git-commit(1)](https://www.kernel.org/pub/software/scm/git/docs/git-commit.html)和[git-reset(1)](https://www.kernel.org/pub/software/scm/git/docs/git-reset.html)中调整了一些例子：

```
$ git reset HEAD^
$ git add ...                 # stage the first part of your split
$ git commit -m 'part one'
$ git commit -a -c ORIG_HEAD  # start with the earlier commit message 
```

如果您担心做一些可能会改变的事情`ORIG_HEAD`，您可以这样做：

```
$ SAVED=$(git rev-parse HEAD)
$ git reset HEAD^
...
$ git commit -a -c $SAVED   # start with the earlier commit message 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-12T20:35:43.883

我有另一个答案似乎更简单，尽管没有记录。

```
$ git reset HEAD^
$ git add ...               # stage the first part of your split
$ git commit -m 'part one'
$ git commit -a -F $(git rev-parse --git-dir)/rebase-merge/message 
```*

# iphone - 在 APP 购买 BOOL 值未保存在 iPhone 中

> ID：10832725
> 
> 赞同：0
> 
> 时间：2012-05-31T11:31:09.980
> 
> 标签：iphone, ios5, in-app-purchase, nsuserdefaults

我正在使用我的应用程序中的 NSUser 默认值进行应用内购买.. 一切正常......但是当我在后台删除应用程序时，isPurchased 和 isFailed 的布尔值没有存储......购买一次后......并删除后台应用程序..我的应用程序再次要求购买新关卡..如果我点击购买它显示“您已经购买”并且锁正在打开...但是我想要，如果用户购买了一次关卡在后台删除应用程序后，它不应该要求下次购买...如果不删除后台应用程序它工作正常...我必须做些什么来存储 isPurchased 和 isFailed 值删除应用程序后背景..当在main.m的后台自动释放池中删除应用程序时正在调用..

```
enter code here 
```

AppDelegate.m

```
 MyStoreAbserver *observer = [[MyStoreAbserver alloc] init];
[[SKPaymentQueue defaultQueue] addTransactionObserver:observer];

if([[[NSUserDefaults standardUserDefaults] objectForKey:@"isPurchased"] isEqualToString:@"true"])
    isPurchased = YES;
else
    isPurchased = NO;
isFailed = NO; 
```

视图控制器.m

```
-(void)callInAppPurchase
{
if ([SKPaymentQueue canMakePayments])
{
    // Display a store to the user.
    [self requestProductData];
    waitLabel.text = @"Please Wait...";
    //[self showLoadingState];

    SKPayment *payment = [SKPayment paymentWithProductIdentifier:kPaper1Identifier];
    [[SKPaymentQueue defaultQueue] addPayment:payment];

else 
{
    // Warn the user that purchases are disabled.

    UIAlertView *alertMsg = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"In App Purchases are disabled in your Apple account, to buy the coupon please enable In App Purchases for your Apple account." delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK",nil];
    [alertMsg show];
    [alertMsg release];
}
}
- (void) requestProductData
{

    SKProductsRequest *request= [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:kPaper1Identifier]];
    request.delegate = self;
    [request start];

}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response

{
waitLabel.text = @"";
[request release];
NSLog(@"the details of the product are %@",response.products);
} 
```

# dynamic - Lisp 动态范围：一个强大的简短示例推理它？

> ID：10832726
> 
> 赞同：1
> 
> 时间：2012-05-31T11:31:11.777
> 
> 标签：dynamic, scope, lisp

大师们到处说：“*动态作用域比词法作用域更强大。* ”但直到现在我还没有看到一个让我信服的简洁示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:20:50.010

多年前，当我使用 Clipper5 语言（原始 DBIII 编程语言的扩展实现）时，我已经习惯了动态作用域。

如果使用得当，动态作用域非常有用，因为它允许在调用链中传递参数，而无需让中间函数知道它们。这使得仅在所需位置（即参数的来源和使用参数的位置）添加例如新参数变得容易。

假设您有一个调用“print-shipment-documentation”的“close-order”，该调用调用“print-invoice-row”的“print-invoice”。如果您需要添加一个影响发票行打印方式的新参数，您可以在顶级“关闭订单”函数中添加一个用户选项，使用该值设置一个动态变量并仅处理该值在“打印发票行”中。

函数接口链将保持该参数的“干净”，仅列出要传递的基本数据。

这类似于使用全局变量，但它是“正确的”，因为它在调用后不会保持“脏”，并且在大多数支持线程的实现中，它甚至可以从多个线程中使用而不会出现问题（每个线程都有自己的值）。

过去我发现将这种方法用于“配置”值的能力非常有用。但是，您必须注意避免不必要的名称冲突。

另一个很好用的例子是`*standard-output*`在 Common Lisp 中，即一个值，否则你需要存储在全局中（就像 C 语言一样），或者另一个明显不切实际的替代方案是将它传递给可能需要它的每个函数（直接使用它或调用可能需要它的函数）。

制作`*standard-output*`一个动态变量可以让 Common Lisp 程序避免在任何地方引用它，但仍然保持在需要时将标准输出重定向到其他东西的能力（并且以比 C 更简洁的方式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T15:40:30.703

我最喜欢的例子在 Emacs 论文中得到了很好的解释：[http ://www.gnu.org/software/emacs/emacs-paper.html#SEC17](http://www.gnu.org/software/emacs/emacs-paper.html#SEC17)

> 动态范围很有用。考虑一下编辑图片功能，它是用来临时对某些编辑命令稍作改动，以便更方便地编辑排列成二维图片的文本。例如，更改打印字符以替换现有文本，而不是将其推到右侧。编辑图片的工作原理是动态绑定参数变量的值，然后将编辑器作为子程序调用。编辑器“退出”命令导致返回到编辑图片子例程，该子例程立即返回到编辑器的外部调用。在此过程中，动态变量绑定被取消。
> 
> 动态绑定对于命令调度表的元素特别有用。例如，用于编写消息回复的 RMAIL 命令临时定义字符 Control--Meta--Y 以将原始消息的文本插入到回复中。始终定义实现此命令的函数，但 Control--Meta--Y 不会调用该函数，除非正在编辑回复。回复命令通过动态绑定 Control--Meta--Y 的调度表条目然后将编辑器作为子例程调用来实现这一点。当编辑器的递归调用返回时，用户编辑的文本作为回复发送。
> 
> 动态范围不必是唯一提供的范围规则，只要它可用就可以了。

# java - 将 XSD 转换为 Java 时生成多个 JAXB 对象

> ID：10832728
> 
> 赞同：0
> 
> 时间：2012-05-31T11:31:17.400
> 
> 标签：java, xml, spring, xsd, jaxb

我正在尝试使用 Spring 和 JAXB 将 XSD/XML 文件转换为 java JAXB 对象我正在使用的架构具有如下所示的字段：

```
<simpleType name="productType">
 <restriction base="string"/>
</simpleType>   

<complexType name="child">
 <sequence>
   <element name="product" type="productType" maxOccurs="unbounded"/>
  </sequence>       
</complexType>

<element name="products">
 <complexType>
   <sequence>
     <element ref="child"/>
   </sequence>
 </complexType>
</element> 
```

当 JAXB 使用上述模式时，它会生成两个类：

```
Products.java
Child.java 
```

其中“孩子”是 Products 类中的一个对象作为列表：

```
@XmlElement(required = true)
protected List<Child> child; 
```

这在将 XML/XSD 文件转换为 JAXB 对象时很好，但是当以相反的方式进行转换时，即将 Hibernate 或只是一个简单的 javabean 转换为 JaxB 对象，映射字段非常困难。在上面的例子中，我必须首先创建“子”对象，将它们放在一个列表中，然后创建“产品”对象。

似乎 JAXB 为我在 XSD 文件中定义的每种类型生成一个类。

您可以想象对于具有多个级别内部标签的非常大的 xml 文件，这会造成多么混乱。无论 xml 文件中有多少级别，是否都可以生成单个 JAXB 对象？（即不为 XSD 文件中定义的每种类型创建单独的类。）

# symfony - Symfony2：ManyToMany 关系和 Collection 表单类型

> ID：10832730
> 
> 赞同：3
> 
> 时间：2012-05-31T11:31:25.737
> 
> 标签：symfony, doctrine-orm

在我的 Symfony2 项目中，我面临着多对多关系的 Collection 表单类型的大问题。

环境：- Symfony 2.0.14 - Doctrine 2.1

这是一些代码：

发布实体

```
class Post
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @ORM\Column(type="string", length=255, nullable=false)
 */
private $title;

/**
 * @ORM\ManyToMany(targetEntity="Tag", inversedBy="posts", cascade={"persist"})
 * @ORM\JoinTable(name="posts_tags")
 */
private $tags;

public function setTags(\Doctrine\Common\Collections\ArrayCollection $tags)
{
    foreach($tags as $tag)
    {
        $tag->addSnippet($this);
    }
}

public function addTag(\My\BlogBundle\Entity\Tag $tags)
{
    $this->tags[] = $tags;
}

public function getTags()
{
    return $this->tags;
} 
```

标记实体

```
class Tag
{
/**
 * @var integer $id
 * 
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $name
 * 
 * @ORM\Column(type="string", length=100, unique=true, nullable=false)
 */
private $name;

/**
 * @var Snippet
 * 
 * @ORM\ManyToMany(targetEntity="Post", mappedBy="tags") 
 */
private $posts;

public function addSnippet(\My\BlogBundle\Entity\Post $posts)
{
    $this->posts[] = $posts;
} 
```

PostType 表单类

```
->add('tags', 'collection', array(
            'type' => new TagType(),
            'allow_add' => true,
            'prototype' => true,
            'by_reference' => false,
        )) 
```

一切正常，但是在插入数据库中已经存在的标签时会引发错误`SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'tag1' for key 'UNIQ_6FBC94265E237E06'`。

您对此问题有任何解决方法还是我遗漏了什么？我的控制器是由`app/console`.`enter code here`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:16:35.460

好吧，我对教义的处理不多，但似乎您在同一个集合中插入了一个具有相同 ID/名称的标签。我认为您可以在插入之前检查标签是否存在

```
public function existTags(\Doctrine\Common\Collections\ArrayCollection $tags)
{
    foreach($this->tags as $tag)
    {
        if ( $tag->getID() === $tags->getId() )
            return true;
    }
    return false;
} 
```

进而

```
public function addTag(\My\BlogBundle\Entity\Tag $tags)
{
    if ( !$this->existTag($tags) );
        $this->tags[] = $tags;
} 
```

这些是我的模型：

```
namespace models;

/**
 * @Entity
 * @Table(name="tag")
 */
class Tag
{

    /**
     * @Id @Column(type="integer", nullable=false, name="id")
     * @GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @Column(type="string", nullable=false)
     */
    protected $name;

    public function getId(){ return $this->id; }
    public function getName(){ return $this->name; }

    public function setId($id){ $this->id = $id; }
    public function setName($name){ $this->name = $name; }

} 
```

博客条目：

```
namespace models;

use \Doctrine\Common\Collections\ArrayCollection;

/**
 * @Entity
 * @Table(name="entry")
 */
class Entry
{

    /**
     * @Id @Column(type="integer", nullable=false, name="id")
     * @GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @Column(type="string", nullable=false, name="body")
     */
    protected $body;

    /**
     * @ManyToMany(targetEntity="Tag")
     * @JoinTable(name="entry_tagged",
     *      joinColumns={@JoinColumn(name="entry_id", referencedColumnName="id")},
     *      inverseJoinColumns={@JoinColumn(name="tag_id", referencedColumnName="id")}
     *      )
     */
    private $tags;

    public function __construct(){
        $this->tags = new ArrayCollection();
    }

    public function existTag(models\Tag $tag)
    {
        foreach($this->tags as $temp)
        {
            if ( $tag->getID() === $temp->getId() )
                return true;
        }
        return false;
    }

    public function addTag(models\Tag $tag)
    {
        if ( !$this->existTag($tag) );
            $this->tags->add($tag);
    }

    public function getId(){ return $this->id; }
    public function getBody(){ return $this->body; }
    public function getTags(){ return $this->tags; }

    public function setId($id){ $this->id = $id; }
    public function setBody($body){ $this->body = $body; }
    public function setTags($tags){ $this->tags = $tags; }

} 
```

最后，使用的连接表是“entry_tagged”，如下所示：

```
entry_id | tag_id 
```

# wpf - WPF - 采用父级的大小

> ID：10832745
> 
> 赞同：16
> 
> 时间：2012-05-31T11:32:29.113
> 
> 标签：wpf, size, parent

我试图找出调整某些控件大小的最佳方法，但不能完全正确。我有一个添加自定义控件的窗口：

```
<Grid x:Name="LayoutRoot">
    <my:RateGraph Grid.Column="0" x:Name="rateGraph1" Height="88" Width="380" />
</Grid> 
```

然后，我希望调整 XAML 中定义的此控件的子组件的大小，以填充高度、宽度或两者。然而，我发现如果我取消显式宽度/高度并尝试使用 VerticalAlignment="Stretch" 之类的东西，那么我可以控制大小为 0...我做错了什么？

```
<rb:RateBase x:Class="RateBar.RateGraph"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:rb="clr-namespace:RateBar"
             xmlns:sd="clr-namespace:System.Windows.Data"
             mc:Ignorable="d">
    <RangeBase.Resources>
        <rb:JScriptConverter x:Key="JScript" TrapExceptions="False"/>
        <ControlTemplate x:Key="rateGraphTemplate" TargetType="{x:Type rb:RateBase}">
            <Canvas HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <rb:Axis Width="320" Height="88"/>
                <Rectangle Height="88" Fill="#9690EE90" x:Name="progress">
                    <Rectangle.Width>
                        <MultiBinding Converter="{StaticResource JScript}" ConverterParameter="values[0]/values[1]*values[2]">
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Value"/>
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Maximum"/>
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Width"/>
                        </MultiBinding>
                    </Rectangle.Width>
                </Rectangle>
                <Polygon Fill="#FF06B025" x:Name="graph" />
                <Label Canvas.Left="0" Width="380" HorizontalContentAlignment="Right" Foreground="Black" Content="{Binding Path=Caption, RelativeSource={RelativeSource TemplatedParent}}">
                    <Canvas.Bottom>
                        <MultiBinding Converter="{StaticResource JScript}" ConverterParameter="(values[2]*0.8)/values[1]*values[0]">
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Rate"/>
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="RateMaximum"/>
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Height"/>
                        </MultiBinding>
                    </Canvas.Bottom>
                </Label>
                <Line X1="0" X2="380" Stroke="Black">
                    <Canvas.Bottom>
                        <MultiBinding Converter="{StaticResource JScript}" ConverterParameter="(values[2]*0.8)/values[1]*values[0]">
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Rate"/>
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="RateMaximum"/>
                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Height"/>
                        </MultiBinding>
                    </Canvas.Bottom>
                </Line>
            </Canvas>
        </ControlTemplate>
    </RangeBase.Resources>
</rb:RateBase> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-05-12T18:43:42.340

我试图做类似的事情，发现这很好用：

```
 Width="{Binding RelativeSource={RelativeSource FindAncestor, 
    AncestorType={x:Type ListBox}},Path=ActualWidth}" 
```

签出：[social.msdn.microsoft](https://social.msdn.microsoft.com/Forums/vstudio/en-US/fb882b44-dee0-41de-a10c-819de9a53f1a/force-a-usercontrols-width-to-stretch-to-parent-container-width?forum=wpf)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-31T12:33:16.523

和属性主要用于设置*请求*`Width`的尺寸。`Height`

 *如果您使用带有拉伸等功能的动态布局，请绑定到`ActualWidth`and`ActualHeight`属性：

```
<Binding RelativeSource="{RelativeSource ...}" Path="ActualWidth"/> 
```*

# ios - 解析第 3 方网站的 iOS 应用程序的拒绝几率

> ID：10832747
> 
> 赞同：2
> 
> 时间：2012-05-31T11:32:42.527
> 
> 标签：ios, app-store, submit, appstore-approval

我正在开发一个 iPhone 应用程序，它可以解析来自 3rd 方网站的 HTML，并以更方便的方式显示解析后的内容。作为工作流程的一部分，该应用程序接受信用卡信息，然后将其传递到第三方网站，就像在普通浏览器中一样。

您认为我的应用被 Apple 拒绝的几率有多高？

只是为了澄清，接受信用卡不是我的选择。我正在使用的网站将此步骤作为其用户交互的一部分。我的应用程序所做的只是将每个步骤中丑陋的 HTML 包装成一个可读、可用且易于导航的用户界面，该用户界面具有移动外观。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:37:17.070

在为 Apple 申请时，请始终记住一件事。他们希望客户是这样的，

![在此处输入图像描述](../Images/34b8fb3fc0baf0127e16c9a5ed8d24d8.png)

# 但

当第三方网站更改其内容时，您的应用程序肯定会失败。你的客户和苹果的客户都会有这样的感觉。

![在此处输入图像描述](../Images/3d61b419bac70403c627127912d67eb4.png)

# 结论

永远不要编写从长远来看会破坏您的应用程序或创造一些非常糟糕的用户体验的东西。

# 和

苹果拒绝了纽约时报要求客户提供信用卡详细信息的申请。因此，如果我们在任何时候询问信用卡详细信息，我们的申请都没有机会通过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:40:22.977

当您提交应用程序时，您不会向 Apple 提供源代码，因此我怀疑他们是否会知道您正在**抓取**网站，而不是使用普通的 Web 服务 API。特别是如果您访问的网站使用的是 HTTPS。我猜网站的支付部分是安全的，但也许不是其余的？

即使该站点没有使用 SSL 加密，我也没有看到任何迹象表明 Apple 审阅者正在使用网络嗅探器并检查 HTTP 响应的内容并将其与您的 UI 显示的内容进行比较。

我不同意其他关于此设计（第 3 方网站抓取）脆弱的评论，但这不是您的问题，所以我不会继续说下去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:51:03.457

如果 Apple 因此拒绝了您的应用程序，我会感到惊讶。然而，话虽如此，做你所做的事情通常不是一个好主意。唯一的例外是，如果您（或其他人）打算在每次对网站进行任何更改时虔诚地维护和更新应用程序。

另一方面，如果它是获取应用程序设置的一次性项目，那么之后它将被搁置并且不受支持，我强烈建议您重新考虑您的设计。

无论哪种方式，只要你的代码是半体面的，如果苹果拒绝它，我会感到非常惊讶（绝对值得检查苹果的指导方针，以检查你没有违反他们的任何规则）。

希望这可以帮助。

**注意：**关于信用卡信息的部分有点狡猾。我之所以这么说是因为亚马逊最近与苹果发生了问题，因为他们通过他们的 Kindle 应用程序进行支付，但苹果并没有收到约 30% 的分成（因为支付是通过亚马逊自己的服务器等处理的）。如果您正在接受付款，您可能会面临同样的问题 - 值得牢记！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:49:40.327

我认为 Apple 不会拒绝您的应用程序解析网站并以修改后的更用户友好的方式呈现部分/全部内容。

我确实认为，如果应用程序中使用了所支付的内容或服务，它会拒绝你的应用程序，如果它要求信用卡付款。例如，如果它是数字杂志订阅，您将被拒绝。如果是为一双鞋付款，您将不会被拒绝。

# ruby-on-rails-3 - 使用 form_for 和 .new 时如何防止污染 rails 对象？

> ID：10832748
> 
> 赞同：0
> 
> 时间：2012-05-31T11:32:46.000
> 
> 标签：ruby-on-rails-3, form-for

我有一个模型：

```
class Activity < ActiveRecord::Base
    has_many   :activity_states
end 
```

我想为新的活动状态呈现选项并呈现现有的活动状态。但是，当我使用此 form_for 时：

```
<%= form_for activity.activity_states.new, :remote => true do |f| %>
    <%= f.hidden_field :state_type, :value => activity_state_type %>
    <%= f.hidden_field :activity_id %>
    <%= f.submit submit_label, :disable_with => 'sending...' %>
<% end %> 
```

为了创建新的临时 activity_state 模型以用作新 activity_states 的基础，它会用`nil`活动状态污染活动对象，而不是 Activity 具有活动状态：

```
[#<ActivityState id: 7353, activity_id: 2033, state_type: 0, created_at: "2012-05-31 11:06:50">, 
#<ActivityState id: 7354, activity_id: 2033, state_type: 1, created_at: "2012-05-31 11:06:53">, 
#<ActivityState id: 7355, activity_id: 2033, state_type: 2, created_at: "2012-05-31 11:06:59">] 
```

由于以下原因，它还具有几个`nil`附加在中间渲染的这些 activity_state 对象`.new`：

```
#<ActivityState id: nil, activity_id: 2033, state_type: nil, created_at: nil> 
```

导致：

```
[#<ActivityState id: 7353, activity_id: 2033, state_type: 0, created_at: "2012-05-31 11:06:50">, 
#<ActivityState id: 7354, activity_id: 2033, state_type: 1, created_at: "2012-05-31 11:06:53">, 
#<ActivityState id: 7355, activity_id: 2033, state_type: 2, created_at: "2012-05-31 11:06:59">,
#<ActivityState id: nil, activity_id: 2033, state_type: nil, created_at: nil>,
#<ActivityState id: nil, activity_id: 2033, state_type: nil, created_at: nil>] 
```

然后，当我遍历活动的活动状态并渲染它们时，事情就会变得混乱。我尝试了一种巧妙的方法来解决这个问题：`<% activity.activity_states.pop %>`在每个 form_for 之后，但这在 Heroku 上的生产中不起作用，因为它抱怨试图修改冻结的数组。

请对这样做的“正确”方式有任何想法吗？我知道我在这里没有理解一些非常基本的东西，也知道我通过为 id 字段插入一个隐藏字段（[然后可以被恶意用户操纵](https://stackoverflow.com/questions/6965791/form-for-new-related-model/6966019#comment14109104_6966019)）打开了一个漏洞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:46:57.880

到目前为止，我有一个解决方案，在 的`show`方法中`activity controller`，包括：

```
@new_activity_state = @activity.activity_states.new
@activity.activity_states.pop 
```

并在部分视图中（我将`@activity`其作为局部变量传递`activity`）：

```
<% new_activity_state = @new_activity_state || activity.activity_states.new %>
<%= form_for new_activity_state, :remote => true do |f| %>
    <%= f.hidden_field :state_type, :value => activity_state_type %>
    <%= f.hidden_field :activity_id %>
    <%= f.submit submit_label, :disable_with => 'sending...' %>
<% end %> 
```

Heroku 的生产环境现在不反对 .pop，这很棒 :D 但是有更好的方法吗？

# iphone - 如何在 UILabel 它的背景框上设置阴影？

> ID：10832751
> 
> 赞同：3
> 
> 时间：2012-05-31T11:33:05.680
> 
> 标签：iphone, background, uilabel, layer, shadow

我有一个 UILabel 并且这个标签有一个填充的背景色（它是我的 textView 的标题）。我想启用一个阴影，以便这个暗影落在 textview 上。

我已经在我的标签文本上实现了阴影。

```
 descriptionLabel.layer.shadowColor = [[UIColor blackColor] CGColor];
        descriptionLabel.layer.shadowOffset = CGSizeMake(4.0f, 0.0f);
        descriptionLabel.layer.shadowOpacity = 1.0f;
        descriptionLabel.layer.shadowRadius = 1.0f; 
```

但是我希望在标签的完整框架下方有阴影（而不是文本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:37:12.833

您可以将阴影路径更改为显式矩形，而不是使用图层内容：

```
CGPathRef shadowPath = CGPathCreateWithRect(descriptionLabel.bounds, NULL);
descriptionLabel.layer.shadowPath = shadowPath;
CGPathRelease(shadowPath); 
```

在向视图添加阴影时，这也是提高渲染性能的一种非常常见的技术。绘制一个固定的矩形阴影将比基于图层内容的阴影快很多倍。

# javascript - 在不解析的情况下获取 ajax 输出

> ID：10832753
> 
> 赞同：1
> 
> 时间：2012-05-31T11:33:10.253
> 
> 标签：javascript, jquery, ajax, json

我有一个 jquery - ajax 请求正在运行，它以 json 格式提供输出。如果我的猜测是正确的，我们得到的 ajax 响应就是解析一个。我想获得原始原始数据，即无需解析的响应。可能吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:38:45.410

删除`dataType : "json",`或将其更改为`dataType : "text",`或仅访问[对象](http://api.jquery.com/jQuery.ajax/#jqXHR)`responseText`的属性（取决于您要对数据执行的操作）。[`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR)

有关更多详细信息，*请阅读文档*：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:23:15.513

如果你 100% 确定你得到了一个 JavaScript 对象（我总是从一个`$.ajax()`方法解析我的返回），那么你需要对你的对象进行**字符串化。**

见： http: [//www.json.org/js.html](http://www.json.org/js.html)

在这里：[https](https://github.com/douglascrockford/JSON-js) ://github.com/douglascrockford/JSON-js下载“json.js”文件。

使用此文件，您可以`parse`根据`stringify`需要。

因此，要获得文本版本，您将执行以下操作：

```
var sObj = JSON.stringify(j);
console.log(sObj); 
```

但是，根据我的阅读，您将需要解析返回对象：

> 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；

所以它被格式化为一个 JSON“字符串”，它仍然需要被解析或 (quick anddirty) `eval`'d

# php - DateTime 类和上个月

> ID：10832754
> 
> 赞同：14
> 
> 时间：2012-05-31T11:33:12.377
> 
> 标签：php, datetime

我对 DateTime 类有一些奇怪的行为。
今天是 2012-05-31。时区是“欧洲/维尔纽斯”。
以下代码

```
 $date = new DateTime('last month');
 echo $date->format('Y-m-d'); 
```

输出`2012-05-01`。这是一个php错误吗？顺便说一句，`$date = new DateTime('-1 month');`输出相同。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-31T11:49:30.143

对于有 31 天的月份来说，这似乎是特殊情况：

> 请注意，当在有 31 天的月份的最后一天使用时，“-1 月”可能会产生意外结果 *[（来自[http://www.php.net/manual/de/datetime.formats.relative.php#102947](http://www.php.net/manual/de/datetime.formats.relative.php#102947)）]*

你可以做的是：

```
$date = new DateTime('last day of last month'); // this is "2012-04-30" now
/// 'first day of last month' would work either, of course 
```

然后这取决于你要对日期做什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T11:38:32.597

我认为您需要有一个已经存在的日期时间并对其进行修改，如下所示：

```
<?php
$d = new DateTime( date("Y-m-d") );
$d->modify( 'last day of previous month' );
echo $d->format( 'Y-m-d' ), "\n";
?> 
```

# android - android listFragment 崩溃

> ID：10832755
> 
> 赞同：0
> 
> 时间：2012-05-31T11:33:13.010
> 
> 标签：android, list, android-fragments

我在基于 tabHost 的应用程序中有一个 ListFragment

在我的标签上只有带有“扩展片段”的线性布局，它工作正常，

但我需要在我的一个选项卡上放置一个 ListFragment，

所以当我用 ListFragment 触摸标签时应用程序崩溃，;(

这里是“tab_fragment”的代码

```
package com.orchard.elasto;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.ListFragment;
import android.support.v4.app.LoaderManager.LoaderCallbacks;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.LinearLayout;
import android.widget.SimpleAdapter;

//public class Tab2Fragment extends Fragment { //primera pregunta, lo puedo hacer asi o con FragmentActivity
public class Tab2Fragment extends FragmentActivity { //primera pregunta, lo puedo hacer asi o con FragmentActivity

    private FragmentManager fm;
    private ListFragment list;
    private List<Map<String, String>> listItems;
    private String[] froms;
    private int[] viewIds;

/////////////

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.tab_frag2_layout);
        fm = super.getSupportFragmentManager();
        this.listItems = new ArrayList<Map<String, String>>();
        this.list = (ListFragment)fm.findFragmentById(R.id.index_list);
        //set OnClick Listener
        this.list.getListView().setOnItemClickListener(new AdapterView.OnItemClickListener() {

            /* (non-Javadoc)
             * @see android.widget.AdapterView.OnItemClickListener#onItemClick(android.widget.AdapterView, android.view.View, int, long)
             */
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                switch(position) {
                case 0:
                    //IndexActivity.this.startActivity(new Intent(IndexActivity.this, TabsFragmentActivity.class));
                    Log.i("mako", " es zeroo");
                    break;
                case 1:
                    //IndexActivity.this.startActivity(new Intent(IndexActivity.this, ViewPagerFragmentActivity.class));
                    Log.i("mako", " es uno");

                    break;
                case 2:
                    //IndexActivity.this.startActivity(new Intent(IndexActivity.this, TabsViewPagerFragmentActivity.class));
                    Log.i("mako", " es dos");

                    break;
                }

            }

        });

        //this.froms = new String[] {"name"};
        //this.viewIds = new int[] {android.R.id.text1};
    }
    /* (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onResume()
     */
    @Override
    protected void onResume() {
        // bind data to the view
        if (this.listItems.isEmpty()) {
            this.bind(0, "name", "Tab Fragments Example");
            this.bind(1, "name", "ViewPager Example");
            this.bind(2, "name", "Tabs View Pager");
        }
        // Initialise List Adapter
        this.list.setListAdapter(new SimpleAdapter(this, this.listItems, android.R.layout.simple_list_item_1, this.froms, this.viewIds));
        super.onResume();
    }

    /**
     * Binds the key-value data pair to the list item at the specified list position 
     * @param pos List item position
     * @param col the column name
     * @param val column value
     * @return the mapping of column values
     */
    private Map<String, String> bind(int pos, String col, String val) {
        Map<String, String> map = null;
        if (!this.listItems.isEmpty() && pos < this.listItems.size()) 
            map = this.listItems.get(pos);
        else if (map == null) {
            map = new HashMap<String, String>();
            this.listItems.add(Math.min(pos, this.listItems.size()), map);
        }
        map.put(col, val);
        return map;
    }
} 
```

这里是我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#00FF00">

    <fragment
        android:name="android.support.v4.app.ListFragment"
        android:id="@+id/index_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

错误日志：

```
error::
05-31 21:07:38.402: W/dalvikvm(264): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-31 21:07:38.412: E/AndroidRuntime(264): FATAL EXCEPTION: main
05-31 21:07:38.412: E/AndroidRuntime(264): java.lang.ClassCastException: com.orchard.elasto.Tab2Fragment
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
05-31 21:07:38.412: E/AndroidRuntime(264):  at com.orchard.elasto.ElastoTabsActivity.onTabChanged(ElastoTabsActivity.java:145)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:356)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.widget.TabHost.setCurrentTab(TabHost.java:341)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.view.View.performClick(View.java:2408)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.view.View$PerformClick.run(View.java:8816)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.os.Handler.handleCallback(Handler.java:587)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.os.Looper.loop(Looper.java:123)
05-31 21:07:38.412: E/AndroidRuntime(264):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 21:07:38.412: E/AndroidRuntime(264):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 21:07:38.412: E/AndroidRuntime(264):  at java.lang.reflect.Method.invoke(Method.java:521)
05-31 21:07:38.412: E/AndroidRuntime(264):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-31 21:07:38.412: E/AndroidRuntime(264):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-31 21:07:38.412: E/AndroidRuntime(264):  at dalvik.system.NativeStart.main(Native Method)
05-31 21:07:38.442: W/ActivityManager(70):   Force finishing activity com.orchard.elasto/.ElastoTabsActivity 
```

编辑，ElastoTabsActivity 的代码：

```
package com.orchard.elasto;

import java.util.HashMap;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.view.View;
import android.widget.TabHost;
import android.widget.TabHost.TabContentFactory;

public class ElastoTabsActivity extends FragmentActivity implements TabHost.OnTabChangeListener{

    private TabHost mTabHost;
    private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, ElastoTabsActivity.TabInfo>();
    private TabInfo mLastTab = null;
    /**
     * 
     * @author mwho
     *
     */
    private class TabInfo {
         private String tag;
         private Class<?> clss;
         private Bundle args;
         private Fragment fragment;
         TabInfo(String tag, Class<?> clazz, Bundle args) {
             this.tag = tag;
             this.clss = clazz;
             this.args = args;
         }

    }
    /**
     * 
     * @author mwho
     *
     */
    class TabFactory implements TabContentFactory {

        private final Context mContext;

        /**
         * @param context
         */
        public TabFactory(Context context) {
            mContext = context;
        }

        /** (non-Javadoc)
         * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
         */
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }

    }
    /** (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
     */
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabs_layout);
        initialiseTabHost(savedInstanceState);
        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); //set the tab as per the saved state
        }
    }

    /** (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
     */
    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); //save the tab selected
        super.onSaveInstanceState(outState);
    }

    /**
     * Initialise the Tab Host
     */
    private void initialiseTabHost(Bundle args) {
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();
        TabInfo tabInfo = null;
        ElastoTabsActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab1").setIndicator("Tab 1"), ( tabInfo = new TabInfo("Tab1", Tab1Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        ElastoTabsActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab2").setIndicator("Tab 2"), ( tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        ElastoTabsActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab3").setIndicator("Tab 3"), ( tabInfo = new TabInfo("Tab3", Tab3Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        // Default to first tab
        this.onTabChanged("Tab1");
        //
        mTabHost.setOnTabChangedListener(this);
    }

    /**
     * @param activity
     * @param tabHost
     * @param tabSpec
     * @param clss
     * @param args
     */
    private static void addTab(ElastoTabsActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
        // Attach a Tab view factory to the spec
        tabSpec.setContent(activity.new TabFactory(activity));
        String tag = tabSpec.getTag();

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        tabInfo.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);
        if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
            FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();
            ft.detach(tabInfo.fragment);
            ft.commit();
            activity.getSupportFragmentManager().executePendingTransactions();
        }

        tabHost.addTab(tabSpec);
    }

    /** (non-Javadoc)
     * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
     */
    public void onTabChanged(String tag) {
        TabInfo newTab = this.mapTabInfo.get(tag);
        if (mLastTab != newTab) {
            FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(this,
                            newTab.clss.getName(), newTab.args);
                    ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            this.getSupportFragmentManager().executePendingTransactions();
        }
    }
} 
```

所以我做错了什么，或者错过了请！

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:01:32.677

你在 com.orchard.elasto.ElastoTabsActivity.onTabChanged(ElastoTabsActivity.java:145) 做了错误的对象转换

就行 newTab.fragment = Fragment.instantiate(this, newTab.clss.getName(), newTab.args);

您正在尝试实例化 Tab2Fragment，它是从 FragmentActivity 扩展而来的。上面的代码期望 Fragment 子类的类名。这就是你得到 ClassCastException 的原因。

# iphone - 我该怎么做才能调整 UIView 的大小以适应其子视图？

> ID：10832756
> 
> 赞同：1
> 
> 时间：2012-05-31T11:33:17.383
> 
> 标签：iphone, objective-c, ios, uiview, sizetofit

我知道我必须使用 -sizeThatFits: 方法并在 superView 中覆盖它。但是，我应该在这种方法中做什么？我应该只计算我的视图的新大小，还是应该向它的子视图发送一些消息？也许 -sizeThatFits: 和 -sizeToFit: 消息？而且，我应该何时以及如何向我的 superView “说”是时候调整其框架的大小了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:04:32.360

**关于你问题的第一部分：**你的`-sizeThatFits:`实现不应该调用`-sizeToFit:`子视图。前者是一种*计算*视图大小的方法（根本不改变它），而后者实际上*改变*了视图的大小。

您绝对可以将`-sizeThatFits:`呼叫转发到您的子视图，如果这有助于您的视图大小计算。

**关于您问题的第二部分：**通常，您不应该告诉您的超级视图何时调整视图大小。它应该是相反的：控制器或父视图应该首先尝试调整子视图的大小。

来自 Apple 的文档：`sizeThatFits - Implement this method if you want your view to have a different default size than it normally would during resizing operations. For example, you might use this method to prevent your view from shrinking to the point where subviews cannot be displayed correctly.`

文档的意思是，如果您的`-sizeThatFits:`实现从不返回低于特定大小的框架：该大小基本上将成为调整大小操作期间视图的最小大小。

**PS：**因为在您的问题主题中，您是在询问如何调整视图大小以适应其内容 - 您应该为此目的使用 sizeToFit 。您需要自己为自定义视图实现该方法。

# php - 用另一个数组中的权重对数组进行排序

> ID：10832760
> 
> 赞同：0
> 
> 时间：2012-05-31T11:33:37.753
> 
> 标签：php

我得到两个数组

```
$check = getmxrr ( $domain, $mxhosts, $weight ); 
```

我想将第三个数组中的 mxhosts 从最低到最高权重。

为简单起见，让我们使用简单的数组名称和值：

```
$s = array('slowest','fast','very slow', 'slow','very fast', 'fastest');
$n = array( 40,       10,    30,          20,    5,           0       ); 
```

现在，使用这段代码，我可以得到我正在寻找的有序数组：

```
$o = array_combine($n, $s);
ksort($o); 
```

但是，如果存在具有相同权重的元素，则只有具有重复权重的最后一个元素会出现在有序数组中。

有没有没有这个问题的类似（低占用空间）解决方案？

示例性案例如下。

*权重值是唯一的。输出正常*：

> ```
> [0] => fastest
> [5] => very fast
> [10] => fast
> [20] => slow
> [30] => very slow
> [40] => slowest 
> ```

*我们有相同重量的元素。输出不正常（快没了）*：

```
$n = array( 40,       10,    30,         10,       20,    5,           0       );
$s = array('slowest','fast','very slow','fast2', 'slow','very fast', 'fastest'); 
```

> ```
> [0] => fastest
> [5] => very fast
> [10] => fast2
> [20] => slow
> [30] => very slow
> [40] => slowest 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:10:39.660

由于您认为主机名是唯一的，因此请切换组合的顺序

```
$n = array( 40,       10,    30,         10,       20,    5,           0       );
$s = array('slowest','fast','very slow','fast2', 'slow','very fast', 'fastest');
$o = array_combine($s, $n); 
```

并在维护键的同时使用 asort 对值进行排序

```
asort($o); 
```

比您排序的主机名在 array_keys 中

```
var_dump(array_keys($o));
array(7) {
  [0]=>
  string(7) "fastest"
  [1]=>
  string(9) "very fast"
  [2]=>
  string(5) "fast2"
  [3]=>
  string(4) "fast"
  [4]=>
  string(4) "slow"
  [5]=>
  string(9) "very slow"
  [6]=>
  string(7) "slowest"
}

var_dump($o);
array(7) {
  ["fastest"]=>
  int(0)
  ["very fast"]=>
  int(5)
  ["fast2"]=>
  int(10)
  ["fast"]=>
  int(10)
  ["slow"]=>
  int(20)
  ["very slow"]=>
  int(30)
  ["slowest"]=>
  int(40)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:52:25.097

你可以这样做：

```
$s = array('slowest','fast', 'slow', 'fastest', 'slow 2');
$n = array( 40, 10, 20, 0, 20);

$res = array();
foreach ($n as $k => $v) {
    $res[$v] .= count($res[$v]) ? ",{$s[$k]}" : $s[$k];
}

ksort($res);
$res = explode(',', implode(',', $res));

print_r($res);
/*
Array
(
    [0] => fastest
    [1] => fast
    [2] => slow
    [3] => slow 2
    [4] => slowest
)
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:59:13.440

试试这个

```
function cmp($a, $b)
{
    if ($a > $b)
        return 1;
    elseif ($b > $a)
        return -1;
    else
       return 0;
}

uksort($array, 'cmp'); 
```

# autoloader - 我正在尝试配置 behat 并看到一个错误 - 无法打开流：/usr/bin/behat 中没有这样的文件或目录

> ID：10832761
> 
> 赞同：2
> 
> 时间：2012-05-31T11:33:38.337
> 
> 标签：autoloader, behat

PHP 警告：require_once(behat/autoload.php)：打开流失败：第 23 行的 /usr/bin/behat 中没有这样的文件或目录 PHP 致命错误：require_once()：打开失败所需的“behat/autoload.php” (include_path='.:/usr/bin/pear:/usr/lib/php:/Users/steve/perforce/') 在第 23 行的 /usr/bin/behat

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:12:13.443

您是否在以下位置之一拥有该文件：/usr/bin/pear/behat/autoload.php 或：/usr/lib/php/behat/autoload.php: 或 /Users/steve/perforce/behat/autoload .php

我确定它不存在。如果是 BASE_PATH.'my_folder' 之类的其他地方，请添加此路径以包含此类路径

```
set_include_path(BASE_PATH.'my_folder',get_include_path()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T10:35:43.467

这可能是由于安装损坏。我建议你用 composer 安装 behat，如果你想全局安装它然后运行

`$ composer global require behat/behat`

然后确保将作曲家路径添加到`$PATH`变量中。

将 behat 作为项目的本地依赖项使用起来要容易得多。我不确定您是否将它用于 PHP 项目，但如果您是，那么我建议不要全局安装它，而是在您的 composer.json 文件中将其添加为开发依赖项：

```
{
  "require-dev": {
    "behat/behat": "~3.0"
  }
} 
```

然后运行`composer update`以在本地安装它。然后，您可以通过运行来访问它`vendor/bin/behat`。

根据个人经验，由于每个项目可能需要其他本地库，全局安装 behat 可能会给您带来问题。这现在可能已经解决了，但是当一个本地项目的行为依赖项与另一个项目不同时，我遇到了问题。

# django - 在管理员中显示通过“通过”定义的 m2m 字段

> ID：10832767
> 
> 赞同：7
> 
> 时间：2012-05-31T11:33:59.857
> 
> 标签：django, admin, models, m2m

我有以下模型类：

```
class Category(models.Model):
    category = models.CharField('category', max_length=200, blank=False)

class Book(models.Model):
    title = models.CharField('title', max_length=200, blank=False)
    categories = models.ManyToManyField(Category, blank=False, through='Book_Category')

class Book_Category(models.Model):
    book = models.ForeignKey(Book)
    category = models.ForeignKey(Category) 
```

在管理界面中添加新书对象时，我还想添加一个新类别和 book_category 关系。

如果我将BookAdmin 中的**类别包括为**

```
class BookAdmin(admin.ModelAdmin):
    fieldsets = [
        (None, {'fields': ['categories', ]}), ... 
```

我得到`can't include the ManyToManyField field 'categories' because 'categories' manually specifies a 'through' model`错误。

有没有办法实现所需的功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T11:43:03.140

```
class CategoryInline(admin.TabularInline):
    model = Book_Category
    extra = 3 # choose any number

class BookAdmin(admin.ModelAdmin):
    inlines = (CategoryInline,)

admin.site.register(Book, BookAdmin) 
```

[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)

# php - PHP：如何将多维数组动态转换为单维

> ID：10832768
> 
> 赞同：2
> 
> 时间：2012-05-31T11:34:01.757
> 
> 标签：php, multidimensional-array, array-merge

我有一个这样的数组

```
array(4) {
  [0]=>
  array(2) {
    [0]=>
    string(10) "2012-05-23"
    [1]=>
    string(10) "2012-05-31"
  }
  [1]=>
  array(2) {
    [0]=>
    string(10) "2012-05-30"
    [1]=>
    string(10) "2012-06-07"
  }
  [2]=>
  array(2) {
    [0]=>
    string(10) "2012-06-02"
    [1]=>
    string(10) "2012-06-07"
    }
} 
```

我想把这个数组变成

```
 array(6) {
    [0]=>
    string(10) "2012-05-23"
    [1]=>
    string(10) "2012-05-31"
    [2]=>
    string(10) "2012-05-30"
    [3]=>
    string(10) "2012-06-07"
    [4]=>
    string(10) "2012-06-02"
    [5]=>
    string(10) "2012-06-07"
    } 
```

我想动态地做。我的意思是我可以在这里有一个 100 维的数组。所以一定是循环中的东西:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:37:49.633

```
$final_array =array();
foreach ($data as $val)
 {
    foreach($val as $val2)
     {
        $final_array[] = $val2;
     }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T11:41:36.640

```
function makeArray($finalArray,$element) {
 foreach ($element as $key => $value){
  if(is_array($value)) makeArray($finalArray,$value);
  else $finalArray[] = $value;
 }
} 
```

如果您想要“通用”解决方案，这就是

显然你必须第一次调用它，`$finalArray`作为一个空数组和`$element`你的起始数组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-15T17:40:18.467

使用以下代码：

```
$it =  new RecursiveIteratorIterator(new RecursiveArrayIterator($data));

$l = iterator_to_array($it, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T11:38:15.317

在 php 文档评论中有大量扁平化策略：http: [//php.net/manual/en/function.array-values.php](http://php.net/manual/en/function.array-values.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T11:38:34.590

我只会使用下划线；） [http://brianhaveri.github.com/Underscore.php/](http://brianhaveri.github.com/Underscore.php/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T11:39:52.067

简单搜索从[PHP.net 文档返回](http://www.php.net/manual/en/function.array-values.php#104184)

```
<?php 
/** 
 * Flattens an array, or returns FALSE on fail. 
 */ 
function array_flatten($array) { 
  if (!is_array($array)) { 
    return FALSE; 
  } 
  $result = array(); 
  foreach ($array as $key => $value) { 
    if (is_array($value)) { 
      $result = array_merge($result, array_flatten($value)); 
    } 
    else { 
      $result[$key] = $value; 
    } 
  } 
  return $result; 
} 
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T11:40:22.153

可能你正在寻找

[数组遍历递归](http://www.php.net/manual/en/function.array-walk-recursive.php)函数

> 将用户定义的函数 funcname 应用于输入数组的每个元素。此函数将递归到更深的数组中。

# c# - 发送UDP广播，接收多条消息

> ID：10832770
> 
> 赞同：40
> 
> 时间：2012-05-31T11:34:04.347
> 
> 标签：c#, udp, broadcasting

我有 2 个程序，1 个用于发送 UDP 广播消息，1 个用于侦听此广播。我的问题是，有时当我发送广播时，接收者会收到 2 条消息。为什么？

**收货人代码：**

```
public class Receiver {
  private readonly UdpClient udp = new UdpClient(15000);
  private void StartListening()
  {
    this.udp.BeginReceive(Receive, new object());
  }
  private void Receive(IAsyncResult ar)
  {
    IPEndPoint ip = new IPEndPoint(IPAddress.Any, 15000);
    byte[] bytes = udp.EndReceive(ar, ref ip);
    string message = Encoding.ASCII.GetString(bytes);
    StartListening();
  }
} 
```

**发件人代码：**

```
public class Sender {
  public void Send() {
    UdpClient client = new UdpClient();
    IPEndPoint ip = new IPEndPoint(IPAddress.Broadcast, 15000);
    byte[] bytes = Encoding.ASCII.GetBytes("Foo");
    client.Send(bytes, bytes.Length, ip);
    client.Close();
  }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-31T11:39:43.647

严格来说，IP 网络中的数据包重复是网络允许的行为，即使这次您会以某种方式摆脱它，您也必须能够在您的软件中处理它。如果您只是想知道为什么会在您的特定情况下发生这种情况……乍一看，我认为您的代码没有任何问题。您的计算机以太网端口上是否有多个 IP 地址？我认为[wireshark](http://www.wireshark.org/)可能有助于获取有关正在发生的事情的更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T11:43:31.437

UDP 数据包不可靠，您完全有可能两次获得相同的数据包，甚至根本没有，当使用 udp 时，您需要在数据中包含某种唯一 ID，以便您可以丢弃错误或请求重新发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-18T06:08:00.050

原因是当您广播时，您会将消息发送到网络中的所有端点。由于您在同一个网络中，因此您将收到相同的消息，因为它是广播的。您可以为此编写自定义过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-09T04:01:02.877

请记住，(1) UDP 数据包对于同一路由器上的所有客户端都非常可靠，并且 (2) 当从服务器到客户端有多个可用路径时，可能会发生数据包重复。

我在虚拟机上遇到了这个问题，比我更聪明的网络专家解决了这个问题，他向虚拟机添加了一个虚拟 NIC，让我运行“路由删除”和“路由添加”命令。

具体来说（在 Windows 10 虚拟机上），如果新的虚拟网卡是 10.10.10.10： route delete 224.0.0.0 mask 240.0.0.0 route add 224.0.0.0 mask 240.0.0.0 10.10.10.10

# nhibernate - NHibernate：实现多对多关系

> ID：10832776
> 
> 赞同：3
> 
> 时间：2012-05-31T11:34:27.670
> 
> 标签：nhibernate, fluent-nhibernate, many-to-many

我有 2 个具有多对多关系的表。

```
public class User
{
   public virtual Guid Id { get; set; }
   public virtual UInt64 UserId { get; set; }
   public virtual IList<Group> Groups{ get; set; }
}

public class Group
{
   public virtual Guid Id { get; set; }
   public virtual Guid GroupGuid  { get; set; }
   public virtual IList<User> Users{ get; set; }
} 
```

我使用 Fluent NHibernate 来自动映射它们，如下所示：

```
.Override<User>(obj => obj.HasManyToMany(x => x.Groups).Table("UserToGroup").Cascade.AllDeleteOrphan())

.Override<Group>(obj => obj.HasManyToMany(x => x.Users).Table("UserToGroup").Cascade.AllDeleteOrphan().Inverse()) 
```

当我添加包含组列表的用户时，所有表已更新确定：在用户表中插入新用户。OK 在组表中插入新组。OK 在UserToGroup 表中插入新关系。好的

我使用以下代码添加用户（包括组）：

```
public void AddUser(User userData, IList<Guid> groupIds)
{
   User user = new User();
   user.UserId = userData.UserId;

   IList<User> Users = new List<Users();
   Users.Add(user);

   IList<Group> groups = new List<Group>();

   foreach (Guid groupId in groupIds)
   {
      Group grp = new Group();
      grp.GroupGuid = groupId;
      grp.Users = Users;
      groups.Add(grp);
   }

   user.Groups = groups;
   Session.Save(user);
} 
```

问题：当我添加一个包含 Group 表中已经存在的 GroupGuid 的新用户时，一条新记录被插入到 Group 表中，具有相同的 GroupGuid 和新 id。

问题：

1.  如何让 NHibernate 只向组表添加新的 GroupGuid id？并且仍然在 UserToGroup 表中添加一个关系，将新用户与现有组相关联。

2.  在 AddUser 方法中 - 我应该用实体设置双方，即用组列表设置 user.Groups 并用用户列表设置 group.Users 吗？

谢谢，海蒙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:58:26.343

您遇到这种情况的原因是，当您将未关联的 Group 实体与您的 User 对象相关联时，您可能会使用它们。所以你需要从数据库中加载它们。

或者，您可以切换到使用 Guid 作为实体的 id，而不是您设置的任何其他主键。

要回答您的第二个问题，您应该只能设置关系的一侧。但是，我很困惑为什么你会有 2 个单独的关系表。您通常只需要 1 个其他表：

```
User
Group
UserGroup 
```

# amazon-s3 - 如何在 Amazon S3 中查找零字节文件

> ID：10832777
> 
> 赞同：12
> 
> 时间：2012-05-31T11:34:37.233
> 
> 标签：amazon-s3, s3cmd

有没有办法以编程方式在 Amazon S3 中查找零字节文件？

bucket的总大小超过100G，
我不太可能同步回服务器，然后做一个

```
find . -size 0 -type f 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T02:10:13.733

将 s3cmd 与 awk 结合起来应该很容易做到这一点。

注意：s3cmd 输出 4 列，日期、时间、大小和名称。您希望将大小（第 3 列）与 0 匹配并输出对象名称（第 4 列）。这应该可以解决问题...

```
$ s3cmd ls -r s3://bucketname | awk '{if ($3 == 0) print $4}'
s3://bucketname/root/
s3://bucketname/root/e 
```

如果您想查看所有信息，只需放下 4 美元，让它只显示打印。

```
$ s3cmd ls -r s3://bucketname | awk '{if ($3 == 0) print}' 
2013-03-04 06:28         0   s3://bucketname/root/
2013-03-04 06:28         0   s3://bucketname/root/e 
```

内存方面，这应该没问题，因为它是一个简单的存储桶列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T06:11:16.483

只需使用[Boto](http://docs.pythonboto.org/en/latest/)：

```
from boto import S3Connection
aws_access_key = ''
aws_secret_key = ''
bucket_name = ''
s3_conn = S3Connection(aws_access_key, aws_secret_key)
s3_conn.get_bucket(bucket_name)
for key in bucket.list():
    if key.size == 0:
        print(key.key) 
```

关于文件数量，Boto 以每次 1000 个（aws 限制）请求文件元数据（不是实际文件内容），并且它使用生成器，因此内存使用量很小。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-29T21:08:05.960

JMSE Query:

```
aws s3api list-objects --bucket $BUCKET --prefix $PREFIX --output json --query 'Contents[?Size==`0`]' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T05:58:34.683

在 amazon s3 上没有直接搜索大小为零字节的文件的过程。您可以通过列出所有对象然后根据大小对这些项目进行排序来做到这一点，然后您可以将所有零文件大小放在一起。

如果您想获取大小为零的所有文件的列表，那么您可以使用 Bucket Explorer 并列出所选存储桶的对象，然后单击大小标题（按大小排序）它会将零字节大小的文件保持在一起。

**披露**：我是 Bucket Explorer 的开发人员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T14:48:38.277

使用基本模式匹配查找零长度文件：

```
hdfs dfs -ls -R s3a://bucket_path/ | grep '^-' | awk -F " " '{if ($4 == 0) print $4, $7}' 
```

# drools - Drools 在运行时禁用规则

> ID：10832778
> 
> 赞同：9
> 
> 时间：2012-05-31T11:34:42.727
> 
> 标签：drools, rule-engine

我正在开始一个 Drools 和 Drools Guvnor 的项目。

我的规则部署在 drools guvnor 中。当您进行软件包发布构建和发布时，我的规则引擎实例可以通过 drools Guvnor 公开的 pkg 文件访问这些规则。

这一切都很好，我正在寻找的是在运行时禁用规则的解决方案。

我现在唯一的解决方案是去 guvnor，归档规则，然后构建 + 发布包含该规则的包。

没有别的策略吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T16:13:09.657

有几种方法可以解决这个问题，具体取决于您的要求和架构。

*   **一种方法**是在不同的 guvnor 包中定义规则的每个子集。在构建您的 kbase 时，您可以只加载具有您想要的 kbase 规则的包。

*   **另一种方法**是始终加载所有规则，但使用“启用”表达式动态启用/禁用规则。请注意，这种情况下的规则仍在评估中，但可以阻止它们激活。对于您希望根据插入会话的事实启用/禁用规则的情况，这是一种有用的技术。例如：

    规则 X 启用（）然后...

    上面的布尔表达式可以访问来自规则条件的变量绑定，以及规则属性、注释，如果您想定义条件以激活 DRL 外部的规则，显然您还可以访问帮助程序类中的静态方法文件。

*   **第三种方法**是使用议程过滤器。在这种情况下，您加载所有规则，使用事实创建会话，并在执行规则时使用议程过滤器。议程过滤器是您可以自己实现的接口，也可以使用 Drools 附带的一些过滤器。在触发每个规则之前调用过滤器，然后可以否决或允许引擎执行规则。请注意，在这种情况下，所有规则都会被评估和激活，但只有过滤器允许触发的规则才会被触发。例如，如果您只想触发名称以“X”开头的规则，您可以使用以下代码行：

    ksession.fireAllRules(new RuleNameStartsWithAgendaFilter("x"));

    更多信息，这里是界面：

    [https://github.com/droolsjbpm/droolsjbpm-knowledge/blob/master/knowledge-api/src/main/java/org/drools/runtime/rule/AgendaFilter.java](https://github.com/droolsjbpm/droolsjbpm-knowledge/blob/master/knowledge-api/src/main/java/org/drools/runtime/rule/AgendaFilter.java)

    这是文档（向下滚动到主题 3.3.3.4.1）：

    [http://docs.jboss.org/drools/release/5.4.0.Final/drools-expert-docs/html_single/index.html#d0e2792](http://docs.jboss.org/drools/release/5.4.0.Final/drools-expert-docs/html_single/index.html#d0e2792)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:48:39.067

您可以为工作记忆中某些事实的存在添加条件。就像是：

```
rule "RuleA"
when
  not( RuleADisabled() )
  ....
then
  ....
end 
```

并禁用java代码中的规则：

```
ksession.insert( new RuleADisabled() ); 
```

# c++ - 比较两个 google::protobuf::Message 对象的最简单方法是什么？

> ID：10832783
> 
> 赞同：24
> 
> 时间：2012-05-31T11:35:44.337
> 
> 标签：c++, comparison, protocol-buffers

我想比较两个任意`google::protobuf::Message`对象。

我假设对象是相等的

*   它们的描述包含具有相同字段编号和相应字段类型的字段。
*   它们的反射具有相同的字段集（以及相同数量的重复字段）和相等的相应字段值。

我知道，我可以自己编写这样的比较函数，但可能已经有一些简单或预定义的解决方案？

另外，我可能遗漏了一些关于此类对象不可比性的主要问题——我想知道是不是这样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-09-02T11:32:04.013

您可以为此使用[google::protobuf::util::MessageDifferencer](https://github.com/google/protobuf/blob/master/src/google/protobuf/util/message_differencer.h)。看看[我的回答here](https://stackoverflow.com/a/32351914/1842128)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T20:42:26.267

来自[https://groups.google.com/d/msg/protobuf/5sOExQkB2eQ/ZSBNZI0K54YJ](https://groups.google.com/d/msg/protobuf/5sOExQkB2eQ/ZSBNZI0K54YJ)：

> 在 C++ 中，您可以将两者序列化并比较字节。或者，您可以编写一些代码，通过反射遍历字段并比较它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-22T13:16:56.587

我的经验告诉我，比较取决于消息结构。如果您有类似消息结构的深树，那么不要比较是否必须快速完成。

例如，我有一个 7 个节点的深度结构（不要问为什么），但对我来说，逐个字段比较是个不错的主意。

您可以使用的一个刻度是获取重复字段的大小并进行比较。但是您仍然依赖于消息结构和大小。

# sql-server-2008 - 如果找到结果，则 SQL 查询返回，否则继续查询直到结束行

> ID：10832789
> 
> 赞同：1
> 
> 时间：2012-05-31T11:36:07.200
> 
> 标签：sql-server-2008

我在 sql 中有 10 个表，并从 id 与 UNION ALL 匹配的表中获取记录；但我的问题是结果发现查询停止进一步处理；就像c#函数中的return语句一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:54:48.027

```
select ... from T1 where ...
if @@RowCount = 0
   select ... from T2 where ...
if @@RowCount = 0
   select ... from T3 where ... 
```

如果您需要对结果进行额外处理，您可以使用`SELECT INTO`临时表或`INSERT`/`SELECT`到表变量。

**编辑**：根据 OP 的评论，我可以建议：

```
declare @Table1 as Table ( Id Int )
declare @Table2 as Table ( Id Int )
declare @Table3 as Table ( Id Int )
declare @Result as Table ( Id Int, Source VarChar(10) )

-- Try changing the following line to use different tables and values.
insert into @Table2 ( Id ) values ( 42 )

insert into @Result
  select Id, 'Table1' from @Table1 where Id = 42
if @@RowCount = 0
  insert into @Result
    select Id, 'Table2' from @Table2 where Id = 42
if @@RowCount = 0
  insert into @Result
    select Id, 'Table3' from @Table3 where Id = 42

select * from @Result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:06:48.960

如果您打算继续使用 UNION ALL 是不可能的。

您为什么不一次选择并在每次选择后检查您是否有所需的信息？如果是，则结束它，如果不是，则继续并进行另一次选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:18:15.943

```
IF (exists(select 1 from table1 where condition))
   select col1, col2 from table1 
   where condition
else if(exists(select 1 from table2 where condition))
   select col1, col2 from table2 
   where condition
else if(exists(select 1 from table3 where condition))
   select col1, col2 from table3 
   where condition
... continue until table10 
```

# ruby-on-rails - 重构控制器

> ID：10832797
> 
> 赞同：0
> 
> 时间：2012-05-31T11:36:52.907
> 
> 标签：ruby-on-rails

我有一个插页式控制器操作，可根据管理员的角色属性重新路由管理员。根据角色类型，管理员将被定向到同一控制器中的 4 个操作之一（或一个 catch 操作）。这很好用，因为在每种情况下，每个动作都只有一个视图。但我想将视图分成 10 个不同的页面，我不确定如何构建控制器。

如果将这 4 个案例拆分到不同的控制器中，每个案例将具有相同的 10 个操作，并且信息会有所不同，信息量会因角色而异，变量之类的内容也会略有不同。

我应该将每个移出到它自己的控制器并使用 dashboard#index 将它们路由到那里吗？我是否必须运行`rails g controller dashboard/free`等以将 4 个仪表板控制器添加到它们自己的子文件夹中，或者是否有更明智的方法来在架构上处理它？

# 路线

```
match "/dashboard/index" => 'dashboard#index'
match "/dashboard/free" => 'dashboard#free', :as => :dashboard_free
match "/dashboard/standard" => 'dashboard#standard', :as => :dashboard_standard
match "/dashboard/premium" => 'dashboard#premium', :as => :dashboard_premium
match "/dashboard/super" => 'dashboard#super', :as => :dashboard_super 
```

# 执行重定向的仪表板控制器

```
def index
  path = case current_admin.role
    when 'free'
      dashboard_free_path
    when 'standard'
      dashboard_standard_path
    when 'premium'
      dashboard_premium_path
    when 'super'
       dashboard_super_path
    else
      no_access_path
  end
  redirect_to path
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:06:39.917

我会`rails g controller dashboard/free`像你说的那样使用等生成单独的控制器，但是让每个控制器都从你的 DashboardController 而不是 ApplicationController 继承。这样，如果任何操作完全相同，则只需在 DashboardController 中定义即可；或者您可以将通用代码放在那里供他们共享。取决于它是什么，将共享代码放在帮助程序、模型甚至是包含在 DashboardController 中的 lib/ 中的自定义模块中也可能是有意义的。

您可能还想在视图中大量使用局部视图，以便也可以共享通用视图代码。

# django - django-socialregistration 和 django-userena

> ID：10832806
> 
> 赞同：1
> 
> 时间：2012-05-31T11:37:07.437
> 
> 标签：django

我发现这段代码可以将 django-userena 连接到 socialregistration。我是社会登记的新手。我该怎么处理这段代码？

```
from socialregistration.signals import connect as profile_connect 
```

从 userena.managers 导入 ASSIGNED_PERMISSIONS

```
@receiver(socialregistration_signals.connect, sender = FacebookProfile, dispatch_uid = 'facebook.connect')
def social_connect_callback(sender, user, profile, client, **kwargs):
"""
Create a profile for this user after connecting

"""
# Create a userena user.
# TODO: You could make it prettier by setting a ``activation_key`` of ``ALREADY_ACTIVATED``
# and looking at good values for the other fields of the model.
userenaSignup = UserenaSignup.objects.get_or_create(user=user)

# Create profile for user
try:
    new_profile = Profile.objects.get(user=user)
except:
    new_profile = Profile.objects.create(user=user)

# Give permissions to view and change profile
for perm in ASSIGNED_PERMISSIONS['profile']:
    assign(perm[0], user, new_profile)

# Give permissions to view and change itself
for perm in ASSIGNED_PERMISSIONS['user']:
    assign(perm[0], user, user) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:31:30.513

如 Django 的文档[https://docs.djangoproject.com/en/dev/topics/signals/#connecting-receiver-functions](https://docs.djangoproject.com/en/dev/topics/signals/#connecting-receiver-functions)中所述 ，您可以在 models.py 中放置此代码，在本例中是在 userena 的模型中。 py

顺便说一句，你从哪里得到这个代码？我也在尝试将 userena 与 socialregistration 联系起来

**编辑：**我在 github 上找到了要点（https://gist.github.com/1351169/）我想你是敏捷技术；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T11:38:21.960

这是一个如何将 django social auth (pipeline) 与 userena 连接的示例。这个 [例子](https://gist.github.com/mexekanez/0eb55cd2caf47affaa80)展示了如何连接social auth pipeline和userena（userena需要监护人权限），所以这个例子就解决了。

# ios - 用户是否看到 iOS 应用程序中使用的捆绑包 ID？

> ID：10832807
> 
> 赞同：1
> 
> 时间：2012-05-31T11:37:12.120
> 
> 标签：ios

我在项目中使用的捆绑包 ID（以及在我将应用程序提交到 AppStore 时将使用的包 ID）是否会被任何地方的用户看到？

我在项目的包 ID 中使用的 URL 与我的公司 URL 不同。我拥有我的捆绑包 ID 使用的 URL；我只是不想向用户透露这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:10:18.370

据我所知，捆绑标识符供您参考。它不会显示在应用商店中。只有应用 ID 会显示在 URL 中。对于应用程序来说，这不会改变。

你甚至可以有不同的应用程序名称和包标识符..

# php - PHP MVC 从头开始 - 如何连接这些类？

> ID：10832813
> 
> 赞同：4
> 
> 时间：2012-05-31T11:37:25.657
> 
> 标签：php, model-view-controller

首先，我知道

*   不要重新发明轮子
*   MVC 有很多框架。

这不是为了制作工作，而是为了我的爱好项目。我从头开始编写 MVC 是为了更深入地了解 MVC，并让我自己满意。最后，我可以对自己说：“*哥们，你做到了。你自己写了一个MVC框架！* ”

* * *

我现在的问题。通常，我们会在 MVC 中编写一些类，并且从一开始就在那里。我们通常称它们为 , `Bootstrapper`, `Router`,`Registry`和`Config`。可能还有更多，但我现在想专注于这些。通常，每个请求我们不需要这些类的多个实例（单例？）。我认为从名称本身就很清楚这些类的作用。所以现在我的问题：

谁先开始（我认为是`Bootstrapper`）？这些类是如何联系在一起的？他们都需要单身吗？我们如何使这些（`Bootstrapper`可能是例外）的实例可用于应用程序中的其他类（也许我们使用单例）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:48:56.577

由于我现在正在做同样的事情，所以这是我的观点：

*   不要使用魔法`Bootstrapper`或`Core`类`Initializer`。最好将该功能放在一个`bootstrap.php`或`init.php`文件之类的东西中。在我的项目中，这样的文件包含其他类之间的所有“连接”（`Router`创建的实例，注入不同的工厂等等）。

*   不要在您的应用程序中使用全局状态（`Register`并且`Config`最有可能引入全局状态）。我建议您观看[此讲座播放列表](http://www.youtube.com/watch?v=4F72VULWFvc&feature=BFa&list=PL875699DFC24B7BAE)以获得一些见解。

*   如果答案是“单身”，你问错了问题

*   应用程序从哪里开始，取决于您如何创建代码，但不应从类内部踢出它。想想可能需要了解您的框架如何工作的其他人（包括您，6 个月后）。挖着想换个班，光是去魔法`init()`功能就很烦了。

*   了解什么是[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))和[得墨忒耳法则](http://c2.com/cgi/wiki?LawOfDemeter)。

[..我的两分钱]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:56:17.920

您的问题与 MVC 关系不大，更多与使用全局变量或全局值有关。

许多此类，通常每个类需要一个实例（“单例”），并且在某些情况下，无法避免单例，在您的情况下，可以拥有它们。

许多书籍，教程没有教什么，它应该如何在何时何地初始化单例。它从编程语言变为编程语言。

而且，在网站的情况下，变量在更改到另一个页面时会丢失它们的值，这变得很复杂。

有一个称为“会话变量”的概念，它与单例一起工作，允许在从一页切换到另一页时保留值：

[http://php.net/manual/en/session.examples.basic.php](http://php.net/manual/en/session.examples.basic.php)

假设您有一个网站。它有几个文件和几个页面。其中一些 php 文件被直接调用并被视为“网页”，例如“index.php”。

其他 php 文件，是库文件，被其他文件“必需”或“包含”，它们本身不被视为“网页”。

当用户单击 wbe 页面中的链接，并且浏览器调用另一个网页时，所有这些值都可能丢失。它不像在桌面应用程序中打开另一个表单。

想想，当用户第一次进入网站时（例如：“index.php”）：主文件“包含”或“需要”其他文件，并初始化全局变量或单例：

```
<?php
// filename: "config.php"

// another includes or requires here

class Config
{
   // begin data section
   public static $UserName;  
   public static $UserPassword;  
   // end data section

   // begin singleton section
   private static $_instance;

   public static function getInstance()
   {
      if (!self::$_instance instanceof self)
      {
         self::$_instance = new self;
      }
      return self::$_instance;
   }
   // end singleton section

   // start session section
   public static function SaveSession()
   {
     $_SESSION['config_username'] =  Config::$UserName;
     $_SESSION['config_password'] =  Config::$UserPassword;
   }   

   public static function RestoreSession()
   {
     Config::$UserName = $_SESSION['config_username'];
     Config::$UserPassword = $_SESSION['config_password'];
   }   
   // end session section

} // class Config

?>    

<?php
// filename: "index.php"

include ("config.php");
// another includes or requires here

class Application
{
   public static function main()
   {
      // prepare session variables
      session_start();

      // prepare singletons here
      $instance = Config::getInstance();

      // this code its an example
      $instance->UserName = "johndoe";
      $instance->UserPassword = "123";
      $instance->SaveSession();

      // all the page construction goes here
      // ...
   }
} //

// program starts here:
Application::main();

?> 
```

当用户更改到另一个页面时，应用程序必须将会话数据重新加载到单例中。

```
<?php
// filename: "customers.php"

include ("config.php");
// another includes or requires here

class Application
{
   public static function main()
   {
      // copy data from session to singletons
      $instance->RestoreSession();

      // all the page construction goes here
      // ...
   }
} //

// program starts here:
Application::main();

?> 
```

单例之间没有关系，通常它们是独立的值。

干杯。

# c# - WPF父菜单项调用子菜单项的命令

> ID：10832817
> 
> 赞同：2
> 
> 时间：2012-05-31T11:37:48.843
> 
> 标签：c#, .net, wpf, xaml

我的 WPF / Xaml 应用程序有一个带有文件和编辑菜单项的顶级菜单。文件菜单项包含保存和退出菜单项。只有 Save 项绑定到 ICommand。编辑菜单为空。

当我第一次单击 File 以展开菜单时，SaveCommand.CanExecute 方法被错误地调用。然后，当我选择保存时，再次调用 CanExecute 方法（之后调用 Execute）。

当我随后单击文件时，CanExecute 没有执行。当我再次单击保存时，CanExecute 和 Execute 被正确调用。

单击 Edit 或 Exit 不会触发 CanExecute 或 Execute。

如何防止 File menuitem 第一次调用 SaveCommand.CanExecute ？也许我的代码或管道（绑定）不正确？

下面是 MainWindow.xaml（MainWindow.xaml.cs 只包含自动生成的代码）

```
<Window x:Class="MyApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyApp.ViewModels"
    Title="Blah" Height="350" Width="525">

    <Window.DataContext>
    <local:MyFirstViewModel />
</Window.DataContext>

<Menu>
    <MenuItem Header="File" Name="mnItmFile" >
        <MenuItem Name="mnItmSave" Header="Save"  Command="{Binding Path=SaveCommand}"/>
        <MenuItem Header="Exit"/>
    </MenuItem>
    <MenuItem Header="Edit"/>
</Menu>
</Window> 
```

下面是视图模型。

```
using System;
using System.Windows.Input;
using System.ComponentModel;

namespace MyApp.ViewModels
{
 public class MyFirstViewModel : INotifyPropertyChanged
 {
public ICommand SaveCommand
{
  get { return new MyFirstCommand(); }
}

public event PropertyChangedEventHandler PropertyChanged;
protected virtual void OnPropertyChanged(string propertyName)
{
  PropertyChangedEventHandler handler = this.PropertyChanged;
  if (handler != null)
  {
    var e = new PropertyChangedEventArgs(propertyName);
    handler(this, e);
  }
 }
}
} 
```

这是命令。

```
using System;
using System.Windows.Input;

namespace MyApp.Commands
{
 public class MyFirstCommand : ICommand
{
private static int i = 0; //debug helper
public bool CanExecute(object parameter)
{
  i++; //count num of times this method is called
  return true;
}

public void Execute(object parameter)
{
  //do some stuff
  int x = 5;
  x++;
}
public event EventHandler CanExecuteChanged;

}
} 
```

我正在使用 .NET Framework 4 和 VS2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:50:55.873

> 当我第一次单击 File 以展开菜单时，SaveCommand.CanExecute 方法被错误地调用。

不，这是预期的行为。单击“文件”菜单时，会显示所有子菜单项，包括“保存”菜单项。第一次单击“文件”菜单后，“保存”菜单项调用该`CanExecute`方法，因为第一次*显示*“保存”菜单项。

它需要`CanExecute`在第一次显示时调用该方法，因为它是否会变灰，具体取决于结果。

之后，每当你点击“文件”菜单时，它就不需要再次调用 CanExecute，因为它从第一次就已经知道结果了。`CanExecuteChanged`除非您的 ICommand 引发事件，否则它不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:20:08.273

你可以试试 RoutedUICommands：

```
 <Window x:Class="Combobox.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    xmlns:local="clr-namespace:Combobox">
<Window.DataContext>
    <local:MyFirstViewModel />
</Window.DataContext>
<Window.CommandBindings>
    <CommandBinding Command="Save" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed"></CommandBinding>
    <CommandBinding Command="Close" CanExecute="CommandBinding_CanExecute_1" Executed="CommandBinding_Executed_1"></CommandBinding>
</Window.CommandBindings>
    <Menu>
    <MenuItem Header="File" Name="mnItmFile" >
        <MenuItem Name="mnItmSave" Header="Save"  Command="Save"/>
        <MenuItem Header="Exit" Command="Close"/>
    </MenuItem>
    <MenuItem Header="Edit"/>
</Menu> 
```

.....私有无效CommandBinding_CanExecute（对象发送者，CanExecuteRoutedEventArgs e）{e.CanExecute = true; }

```
 private void CommandBinding_Executed(object sender, ExecutedRoutedEventArgs e)
    {

    }

    private void CommandBinding_CanExecute_1(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = true;
    }

    private void CommandBinding_Executed_1(object sender, ExecutedRoutedEventArgs e)
    {

    } 
```

# selenium - 使用 Selenium 2 HTMLUnit Webdriver 读取 cookie 时出现异常

> ID：10832818
> 
> 赞同：0
> 
> 时间：2012-05-31T11:37:49.030
> 
> 标签：selenium, webdriver

我正在尝试使用 Selenium Webdriver 设置然后读取 Cookie。添加 Cookie 工作正常。但是，当我尝试读取 cookie 时，Selenium 会引发异常。

1.  我正在使用 Selenium 的 Java API。
2.  测试用例使用 TestNG 运行。5.12 版
3.  Selenium webdriver-htmlunit 版本 0.9.7376

**测试用例代码**

```
 import org.openqa.selenium.WebDriver;
      import org.openqa.selenium.Cookie;
      .
      .
      .
      WebDriver driver = ....
    // Now set the cookie. This one's valid for the entire domain

    Cookie testCookie = new Cookie.Builder("myCookie", "cookieValue").domain("localhost").path("/").build();
    //Works fine till here
    driver.manage().addCookie(testCookie);

    //breaks here
    String cookieFromBrow = driver.manage().getCookieNamed("myCookie").toString();
    System.out.println("Cookie :- [" + cookieFromBrow + "]"); 
```

* * *

**堆栈跟踪**

```
java.lang.NoSuchMethodError: org.openqa.selenium.internal.ReturnedCookie.<init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/Date;Z)V
at org.openqa.selenium.htmlunit.HtmlUnitDriver$HtmlUnitOptions.getCookies(HtmlUnitDriver.java:851)
at org.openqa.selenium.htmlunit.HtmlUnitDriver$HtmlUnitOptions.getCookieNamed(HtmlUnitDriver.java:812)
at com.medomain.site.test.SampleResultPageIntlITCase.initTestPage(SampleResultPageIntlITCase.java:150)
at com.medomain.site.test.SampleResultPageIntlITCase.testFindCaseForm(SampleResultPageIntlITCase.java:123)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.Invoker.invokeMethod(Invoker.java:702)
at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:894)
at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1219)
at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
at org.testng.TestRunner.privateRun(TestRunner.java:768)
at org.testng.TestRunner.run(TestRunner.java:617)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
at org.testng.SuiteRunner.run(SuiteRunner.java:240)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:87)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1185)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1110)
at org.testng.TestNG.run(TestNG.java:1022)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:109)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:202)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:173) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:40:43.153

问题是似乎缺少的方法`getSecure()`。`org.apache.commons.httpclient.Cookie`

您似乎进入了[JAR 地狱](http://en.wikipedia.org/wiki/JAR_hell#JAR_hell)，并且您的项目中的一些库/依赖项在版本中相互冲突`org.apache.commons.httpclient`。您使用的 WebDriver 需要 3.1 版。检查项目的所有依赖项，找到有问题的库以及`httpclient`真正进入类路径的版本。

尝试使用两者中较新的一种 - 如果这没有帮助，祝你好运:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T17:44:34.443

我不知道我的解决方案是否对您有帮助，但我会尝试。

我遇到了类似的问题...当我使用 HtmlUnit Webdriver 并且我想下载一个文件时，当我必须将 WebDriver 与 CookiesStore 链接时，我的应用程序无法运行，并且既不显示错误也不显示异常...

经过几次搜索和调试我的应用程序后，我发现 HtmlUnit 通过内省加载了几个库......其中一个是 gson（在我的例子中是 gson-2.3.1.jar）（显然，我的项目不需要这个库。 。 错误的！）。所以，我把这个库放在我的项目中，瞧……一切都没有问题。

希望对你有帮助

# php - 如何更改 Sublime text 2 中类属性的颜色？

> ID：10832823
> 
> 赞同：7
> 
> 时间：2012-05-31T11:38:01.683
> 
> 标签：php, syntax-highlighting, sublimetext, sublimetext2

目前，这是突出显示所有变量的代码，包括类属性（它们是红色的）：

```
 <dict>
        <key>name</key>
        <string>Variables</string>
        <key>scope</key>
        <string>variable, support.variable</string>
        <key>settings</key>
        <dict>
            <key>fontStyle</key>
            <string></string>
            <key>foreground</key>
            <string>#dc322f</string>
        </dict>
    </dict> 
```

如何仅更改类属性的颜色？

`$object->property = 'xxx';`

所以`$object`应该还是红色，但我想要`property`不同的颜色

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T21:24:51.277

`variable.other.property`应该做的伎俩：

```
<dict>
    <key>name</key>
    <string>Variables</string>
    <key>scope</key>
    <string>variable.other.property</string>
    <key>settings</key>
    <dict>
        <key>fontStyle</key>
        <string></string>
        <key>foreground</key>
        <string>#00ff00</string>
    </dict>
</dict> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:48:39.527

改变：

```
<string>variable, support.variable</string> 
```

至：

```
<string>variable.other.property</string> 
```

# mysql - 如果第一次更新执行成功，则执行第二次更新

> ID：10832827
> 
> 赞同：0
> 
> 时间：2012-05-31T11:38:14.500
> 
> 标签：mysql, sql, stored-procedures

**存储过程**

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `Sample`(IN itemId INT, IN itemQnty 
DOUBLE, IN invID INT)

BEGIN

DECLARE crntQnty DOUBLE;
DECLARE nwQnty DOUBLE;

SET crntQnty=(SELECT `QuantityOnHand` FROM `item` WHERE id=itemId);
SET nwQnty=itemQnty+crntQnty;
UPDATE `item` SET `QuantityOnHand`=nwQnty WHERE `Id`=itemId;

UPDATE `inventoryentry` SET `Status` = 1 WHERE `InventoryID`=invID AND 
`ItemID`=itemId;

END$$ 
```

在这个存储过程中，我有两个更新语句。如果第一次更新执行成功然后第二次执行。需要进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:43:47.837

在第一个之后，`UPDATE`您可以检查受`ROW_COUNT()`.

如果`ROW_COUNT()`返回所需的更新次数（可能 > 0），则只触发 second `UPDATE`。

`UPDATE`你可以通过`IF - END IF`检查受影响的行数来围绕第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:43:23.993

用于`SELECT ROW_COUNT();`确定是否有任何行受到影响。如果计数大于零或等于预期的行数，则更新成功。

# css - 按钮不显示图像

> ID：10832835
> 
> 赞同：0
> 
> 时间：2012-05-31T11:38:40.950
> 
> 标签：css, image, class, button, extjs

我在我的 extjs 脚本中使用了 3 个按钮。奇怪的是我没有看到他们。如果我使用萤火虫检查元素我看到这个

```
<button id="button-1051-btnEl" class="x-btn-center" autocomplete="off" role="button" hidefocus="true" type="button">
<span id="button-1051-btnInnerEl" class="x-btn-inner" style="">&nbsp;</span>
<span id="button-1051-btnIconEl" class="x-btn-icon" style="background-image: url("../resources/themes/images/default/grid/page-prev.gif");">&nbsp;</span>
</button> 
```

那是正确的 gif 文件，它在服务器上。这与溢出有关吗？

我希望你能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:12:49.170

如[本例](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/custom-form.html)所示，您应该一起使用 x-btn-icon 和 x-tbar-page-next css 类，以显示“下一页”按钮图像。我建议您覆盖 x-tbar-page-next css 类以使用自定义图像。

快速参考[示例的](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/custom-form.html)“下一页”按钮的重要部分：

```
<button id="button-1020-btnEl" type="button" class="x-btn-center" hidefocus="true" role="button" autocomplete="off" data-qtip="Next Page" style="height: 16px; ">
    <span id="button-1020-btnInnerEl" class="x-btn-inner" style="">&nbsp;</span>
    <span id="button-1020-btnIconEl" class="x-btn-icon x-tbar-page-next" style=""></span>
</button> 
```

# .net - 从同一类的多个线程更新

> ID：10832839
> 
> 赞同：-2
> 
> 时间：2012-05-31T11:38:47.703
> 
> 标签：.net, vb.net, multithreading, richtextbox

我有这个类，我有一个循环从同一个类启动多个线程。这一切都是从主窗体完成的。

现在我想从这些类中更新 main 上的richtextbox。

我已经尝试了那些 begininvokes 等，但没有任何效果，没有错误但也没有输出。

这里是启动线程的代码：

```
 Private PingObjects(100000) As Account 'Account is the class and login is the sub in it...
        PingObjects(I) = New Account
        Threads(I) = New Threading.Thread(AddressOf PingObjects(I).login)
        Threads(I).IsBackground = True
        Threads(I).Start() 
```

为了更新 rtb，我使用 MainForm.log.text = "....." 没有任何反应，没有错误。我也尝试过使用开始调用程序方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:00:19.437

当然，
应该使用 Control.Invoke() 从不同于主 UI 线程的线程更新控件。
我整理了一些东西让你试试

```
' at the form level
Private Delegate Sub UpdateRTB(ByVal Msg As String)

' your thread function
Private Sub Login()
    Dim Data As String = "your message for the RTB"
    rtb.Invoke(New UpdateRTB(AddressOf MainForm.UpdateRTBMessage), Data)
End Sub

' the UI updater.
Private Sub UpdateRTBMessage(ByVal msg as String)
    rtb.Text = msg
End Sub 
```

我在这里假设您的 RichTextBox 被命名为 rtb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:25:05.750

找到了解决方案！

我在另一个论坛学分上找到了解决方案： facebookdoom on HF

```
Delegate Sub AppenLogDelegate(ByVal update As String)
Public Sub AppendLog(ByVal update As String) Implements Interface1.AppendLog
    If log.InvokeRequired Then
        log.Invoke(New AppenLogDelegate(AddressOf AppendLog), update)
    Else
        log.AppendText(update & vbCrLf)
    End If
End Sub 
```

在主窗体中

制作新的接口类：-

公共接口 Interface1 Sub AppendLog(ByVal update As String) 结束接口

把它放在线程类中：

Private ReadOnly _form As Interface1

Public Sub New(ByVal form As Form) _form = form End Sub

用法 ：-

_form.AppendLog("aaaaaa")

# c - 将指针传递给多维数组

> ID：10832842
> 
> 赞同：1
> 
> 时间：2012-05-31T11:39:05.810
> 
> 标签：c, arrays, pointers

我有一个二维整数数组，它代表图中的几个点。

```
int16_t myPoints[][3] = {
  {0, 0},
  {20, 40},
  {14, 92}}; 
```

如何将指针传递给能够读取这些坐标的函数？

就像是？

```
void foo(int16_t *coordinates[][]) {
   drawPoint(x[0], y[0]);
   drawPoint(x[1], y[1]);
   ... 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:44:07.177

声明函数时只有第一个维度是未知的，因此您必须像这样声明/定义函数：

```
void foo(int16_t coordinates[][3])
{
    drawPoint(coordinates[0][0], coordinates[1][0]);
    drawPoint(coordinates[0][1], coordinates[1][1]);
    drawPoint(coordinates[0][2], coordinates[1][2]);
} 
```

然后你可以像普通函数一样调用它：

```
foo(myPoints); 
```

**编辑：**您的数组声明不正确，我也错过了。它应该是：

```
int16_t myPoints[][2] = {
  /* List of points */
}; 
```

现在你有了一个合适的坐标数组，它可以是任意长的。

为了让函数知道条目的数量，你必须将它传递给函数，所以新的函数声明将是：

```
void foo(int16_t coordinates[][2], int number_of_points); 
```

不要担心复制，编译器足够聪明，只将指针传递给数组，所以它不会复制整个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:58:11.563

规则是当“N-element array of `T`”类型的表达式出现在大多数上下文中时，它将被转换为“pointer to `T`”类型的表达式。

`myPoints`是“3 元素数组的 3 元素数组`int16_t`”类型的表达式。因此，当`myPoints`出现在大多数上下文¹（例如函数调用）中时，它将被替换为“指向 3 元素数组的指针”类型的表达式`int16_t`，或者`int16_t (*)[3]`。

如果你想调用`foo`as `foo(myPoints)`，那么原型需要是

```
void foo(int16_t (*coordinates)[3]) 
```

或者

```
void foo(int16_t coordinates[][3]) 
```

在函数参数声明的上下文中`T a[N]`，`T a[]`、 和`T *a`都是等价的，并且都声明`a`为指向 的指针`T`。请注意，*这只*适用于函数参数声明。

* * *

^(1 - 该规则的例外情况是数组表达式是一元运算符`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:43:14.440

通过对函数的参数重复正确的声明：

```
void foo(int16_t coordinates[][3])
{
  ...
} 
```

您必须包括所有数组维度，除了紧跟在变量名称之后的维度，这是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T16:23:08.400

> 但这会将整个数组复制到 foo 还是只是将指针传递给它？我也只知道每个条目总是有两个坐标，但我不知道会有多少条目。

如果要传递可变长度数组，则必须将元素的数量作为单独的参数传递，或者数组的最后一个元素必须以某种方式指示它是最后一个元素，以便您可以使用 while( ) 循环（例如添加 NULL 来终止字符串）。

```
enum STATUS { OK, END };
STATUS bar(int16_t x, int16_t y);  /* bar() checks to see if this is the last element */

void foo(int16_t coordinates[][2])
{
    int i = 0;
    while( END != bar(coordinates[i][0], coordinates[i][1]) )
    {
        drawPoint(coordinates[i][0], coordinates[i][1]);
        ++i;
    }
} 
```

# xml - 循环函数中的规避错误（用于从 Twitter 中提取数据）

> ID：10832854
> 
> 赞同：4
> 
> 时间：2012-05-31T11:39:56.113
> 
> 标签：xml, r, loops, twitter

我创建了一个循环函数，它使用搜索 API 以一定的时间间隔（假设每 5 分钟一次）提取推文。这个函数做了它应该做的事情：连接到 twitter，提取包含特定关键字的推文，并将它们保存在 csv 文件中。但是偶尔（每天 2-3 次）循环会因为以下两个错误之一而停止：

*   htmlTreeParse 中的错误（URL，useInternal = TRUE）：为[http://search.twitter.com/search.atom?q=](http://search.twitter.com/search.atom?q=) 6.95322e-310tst&rpp=100&page=10创建解析器时出错

*   UseMethod（“xmlNamespaceDefinitions”）中的错误：没有适用于“xmlNamespaceDefinitions”的方法应用于“NULL”类的对象

我希望你能通过回答我的一些问题来帮助我处理这些错误：

*   是什么导致这些错误发生？
*   如何调整我的代码以避免这些错误？
*   如果遇到错误（例如通过使用 Try 函数），我如何“强制”循环继续运行？

我的功能（基于网上找到的几个脚本）如下：

```
 library(XML)   # htmlTreeParse

    twitter.search <- "Keyword"

    QUERY <- URLencode(twitter.search)

    # Set time loop (in seconds)
    d_time = 300
    number_of_times = 3000

    for(i in 1:number_of_times){

    tweets <- NULL
    tweet.count <- 0
    page <- 1
    read.more <- TRUE

    while (read.more)
    {
    # construct Twitter search URL
    URL <- paste('http://search.twitter.com/search.atom?q=',QUERY,'&rpp=100&page=', page, sep='')
    # fetch remote URL and parse
    XML <- htmlTreeParse(URL, useInternal=TRUE, error = function(...){})

    # Extract list of "entry" nodes
    entry     <- getNodeSet(XML, "//entry")

    read.more <- (length(entry) > 0)
    if (read.more)
    {
    for (i in 1:length(entry))
    {
    subdoc     <- xmlDoc(entry[[i]])   # put entry in separate object to manipulate

    published  <- unlist(xpathApply(subdoc, "//published", xmlValue))

    published  <- gsub("Z"," ", gsub("T"," ",published) )

    # Convert from GMT to central time
    time.gmt   <- as.POSIXct(published,"GMT")
    local.time <- format(time.gmt, tz="Europe/Amsterdam")

    title  <- unlist(xpathApply(subdoc, "//title", xmlValue))

    author <- unlist(xpathApply(subdoc, "//author/name",  xmlValue))

    tweet  <-  paste(local.time, " @", author, ":  ", title, sep="")

    entry.frame <- data.frame(tweet, author, local.time, stringsAsFactors=FALSE)
    tweet.count <- tweet.count + 1
    rownames(entry.frame) <- tweet.count
    tweets <- rbind(tweets, entry.frame)
    }
    page <- page + 1
    read.more <- (page <= 15)   # Seems to be 15 page limit
    }
    }

    names(tweets)

    # top 15 tweeters
    #sort(table(tweets$author),decreasing=TRUE)[1:15]

    write.table(tweets, file=paste("Twitts - ", format(Sys.time(), "%a %b %d %H_%M_%S %Y"), ".csv"), sep = ";")

    Sys.sleep(d_time)

    } # end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:48:25.480

这是我使用`try`Twitter API 解决类似问题的解决方案。

我在向 Twitter API 询问一长串 Twitter 用户中每个人的关注者数量。当用户的帐户受到保护时，我会收到一个错误，并且在我输入`try`函数之前循环会中断。使用`try`允许循环通过跳到列表中的下一个人来继续工作。

这是设置

```
# load library
library(twitteR)
#
# Search Twitter for your term
s <- searchTwitter('#rstats', n=1500) 
# convert search results to a data frame
df <- do.call("rbind", lapply(s, as.data.frame)) 
# extract the usernames
users <- unique(df$screenName)
users <- sapply(users, as.character)
# make a data frame for the loop to work with 
users.df <- data.frame(users = users, 
                       followers = "", stringsAsFactors = FALSE) 
```

这是`try`处理错误的循环，同时使用从 Twitter API 获得的关注者计数填充 users$followers

```
for (i in 1:nrow(users.df)) 
    {
    # tell the loop to skip a user if their account is protected 
    # or some other error occurs  
    result <- try(getUser(users.df$users[i])$followersCount, silent = TRUE);
    if(class(result) == "try-error") next;
    # get the number of followers for each user
    users.df$followers[i] <- getUser(users.df$users[i])$followersCount
    # tell the loop to pause for 60 s between iterations to 
    # avoid exceeding the Twitter API request limit
    print('Sleeping for 60 seconds...')
    Sys.sleep(60); 
    }
#
# Now inspect users.df to see the follower data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:49:49.427

我的猜测是，您的问题对应于 twitter（或您与网络的连接）出现故障或速度缓慢或其他原因，因此得到了不好的结果。你试过设置

```
options(error = recover) 
```

然后下次遇到错误时，会为您提供一个不错的浏览器环境。

# php - 推进 populateRelation 一对多关系不填充关系

> ID：10832855
> 
> 赞同：1
> 
> 时间：2012-05-31T11:39:59.487
> 
> 标签：php, symfony-1.4, propel

**我对populateRelation**有一个问题，让我们解释一下，我们有一些文章，这篇文章可以有标签，所以我们做另一个表 article_tag，这在推进中做 ArticleTag 对象，让我们找到所有文章

```
$Articles = ArticleQuery::create()->find(); 
```

好的，所以我们现在拥有所有文章，现在我们想要为每篇文章拥有所有这些标签，所以我们开始：

```
$Articles->populateRelation('ArticleTag'); 
```

然后是我们做的一些观点：

```
foreach($Articles as $Article) {
  // some stuff
  foreach($Article->getArticleTags() as $ArticleTag) { // this should not do query!
    // some additional stuff
  }
} 
```

当我在 db 中有 1 200 篇文章时，使用**populateRelation**查询下降到 600，但对于文章和文章标签应该只有 2 个。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:52:28.487

我在这里给出了一个关于递归填充相关对象[的答案。](https://stackoverflow.com/questions/10110033/recursively-hydrate-all-related-objects-in-propel/10110270#10110270)

您只需要在查询中[明确`joinWith`表](http://www.propelorm.org/reference/model-criteria.html#minimizing_queries)：

```
$articles = ArticleQuery::create()->joinWith('Article.ArticleTag')->find();

// this won't perform others queries
// not sure about getArticleTags or getArticleTag
foreach($articles->getArticleTags() as $ArticleTag) { } 
```

# vbscript - Windows 7 x64 下与 Microsoft.Jet.OLEDB.4.0 提供程序的 OLE DB 连接

> ID：10832857
> 
> 赞同：0
> 
> 时间：2012-05-31T11:40:01.453
> 
> 标签：vbscript, windows-7-x64, adodb, oledbconnection

我有简单的脚本：

```
Set oConn = CreateObject("ADODB.Connection")

fPath = "c:\temp"

oConn.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & fPath & "\;Extended 
Properties='text;HDR=No;FMT=Delimited'"

if oConn.Errors.Count>0 then
   Wscript.Echo "Error!!!" & oConn.Errors(0).Description & " code: " & Conn.Errors(0).Number
End if 
```

尝试通过命令在 Windows 7 x64 Professional 或 Ultimate 上运行：

`c:\Windows\SysWOW64\cscript.exe 1.vbs`

它以错误结束：

> 错误代码 0x80040e21，多步 OLE DB 操作生成错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。

如果使用 C# 或 VB.NET 做同样的事情，一切都会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:49:15.840

**fPath**是用来保存一个字符串的，所以你不能使用**Set**。

**添加**

编辑（和格式化）您的问题可能是个好主意。

您是否阅读[过这篇关于使用 64 位驱动程序的文章](http://www.connectionstrings.com/Articles/Show/using-jet-in-64-bit-environments)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:55:47.030

您可以在 64 位机器上以 32 位方式运行脚本，那么您可能不会遇到错误，请参阅我的答案以检查您正在运行的方式并在必要时以 32 位方式重新启动脚本。

[cscript.exe 打开一个窗口](https://stackoverflow.com/questions/10716682/cscript-exe-opens-a-window/10718940#10718940)

# spring-mvc - Spring MVC 和 JDBC 数据源

> ID：10832859
> 
> 赞同：0
> 
> 时间：2012-05-31T11:40:03.143
> 
> 标签：spring-mvc, error-handling, datasource

在您看到的用于`servlet-context.xml`在 Spring MVC Web 应用程序中配置的所有示例中，所需的任何数据源都在此文件中配置为 bean，可能使用容器中定义的连接池。例如，在我`servlet-context.xml`的 for my中，`org.springframework.web.servlet.DispatcherServlet`我初始化了我的数据源：

```
<jee:jndi-lookup id="dataSource"
jndi-name="java:comp/env/jdbc/ora1"
expected-type="javax.sql.DataSource"
resource-ref="true" /> 
```

如果在数据库由于某种原因关闭的情况下，Web 应用程序在初始化阶段出错并将 Java 堆栈跟踪的一码半抛出到浏览器中，如下所示：

```
javax.servlet.ServletException: Servlet.init() for servlet appServlet threw exception at      
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1214) at  
org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:809) at 
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:615) 
```

... 等等。

**我有两个问题：**

1.  是否可以捕获此错误并显示对用户更友好的内容？我个人对此表示怀疑，因为 servlet 无法超越这个`init()`阶段。
2.  在 servlet 上下文中初始化数据源并在需要连接时从 @Controller 动态执行**是否**有效？与更传统的方法一样，例如：

    ```
    public static DataSource getJndiDataSource() throws NamingException {
        Context initialContext = new InitialContext();
        DataSource ds = (DataSource)initialContext.lookup("java:comp/env/jdbc/ora1");
        return ds;
    } 
    ```

感谢您的任何回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:47:14.093

1.  用户永远不应该看到异常，期间。您应该配置一个友好的错误页面，告诉用户该站点已关闭并稍后再回来。堆栈跟踪应该只出现在您的日志中。您需要详细信息才能找出问题所在。
2.  不，这应该由应用服务器在您的应用启动之前处理。连接池应该在您的应用启动之前成功初始化。不要尝试在 Controller 中执行此操作。

也许您的连接池配置不正确。我建议彻底擦洗以确保它是正确的。您可以使用几个参数，例如在从池中释放连接之前检查连接等。查看这些参数。

更新：

DBA 总是有可能关闭数据库。我建议您与他们进行对话，以便他们为您提供提醒和中断窗口。使您的应用可以显示“停机维护”页面，例如 Stack Overflow。

# google-apps-script - 在 UI 服务中如何获取 RichTextArea 的内容？

> ID：10832863
> 
> 赞同：0
> 
> 时间：2012-05-31T11:40:14.177
> 
> 标签：google-apps-script

RichTextArea 类没有 setName() 所以我想知道如何在 Handler 函数中使用它的内容。该[文档](https://developers.google.com/apps-script/class_richtextarea?hl=fr-FR)指的是 Google Web Toolkit，但我不知道如何在 GAS 中使用它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:02:45.077

Saurabh 本人报告的跟踪器存在问题。 [问题 504：RichTextArea#setName 不存在](http://code.google.com/p/google-apps-script-issues/issues/detail?id=504)

但从报告的外观来看，他们似乎并没有为此努力。所以，我想我们现在能做的就是给这个问题加注星标并发表评论，试图引起人们的注意。

# android - 比较android sqlite数据库中的日期（存储为字符串）？

> ID：10832864
> 
> 赞同：18
> 
> 时间：2012-05-31T11:40:18.297
> 
> 标签：android, sqlite, date

我将日期存储`String`在我的数据库中，格式如下：

```
YYYY-MM-DD HH:MM:SS 
```

这是支持的格式之一（[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)）。现在我想将这些存储的日期（嗯，字符串）与另一个日期进行比较。我的日期存储在 column `column_date`，所以我正在尝试这个：

```
SELECT  * FROM MyTable
WHERE 
(Date(column_date) >= Date (2000-01-01) AND Datetime(column_date) <= Datetime (2050-01-01)) 
```

当我阅读文档时，`The date and time functions use a subset of IS0-8601 date and time formats. The date() function returns the date in this format: YYYY-MM-DD.`我想，我做得对 - 我从存储的字符串创建日期并将其与从另一个字符串创建的日期进行比较。

但它不起作用，即使`column_date`是今年的日期，而且你可以看到开始和结束日期非常仁慈。也试过这个（使用日期时间而不是日期）：

```
SELECT  * FROM MyTable
    WHERE 
    (datetime(column_date) >= Date (2000-01-01) AND datetime(column_date) <= Datetime (2050-01-01)) 
```

和这个（使用 between 代替 <= 和 >=）

```
SELECT  * FROM MyTable
    WHERE 
    (Date(column_date) between Date (2000-01-01) AND Datetime (2050-01-01)) 
```

以及所有其他可能的组合。我到底做错了什么，是我愚蠢，还是文档在撒谎，或者我错过了一些非常重要的事情？试图找到解决方案几个小时，但没有任何效果......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-31T12:02:36.070

如果您将日期存储为格式中的字符串

```
YYYY-MM-DD HH:mm:ss 
```

====> 那么您的日期字段是 DateTime 数据类型

因此你必须使用这样的查询

```
select * 
  from MyTable 
  where mydate >= Datetime('2000-01-01 00:00:00') 
  and mydate <= Datetime('2050-01-01 23:00:59') 
```

您还可以使用@Joop Eggen 给出的片段与运算符之间的th 相同的方法。

**BETWEEN**运算符在逻辑上等价于一对比较。**"x BETWEEN y AND z"**等价于**"x>=y AND x<=z"**，除了在 BETWEEN 中，x 表达式只计算一次。见 sqlite3[文档](http://www.sqlite.org/lang_expr.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T11:47:46.327

```
SELECT *
FROM MyTable
WHERE 
    column_date BETWEEN '2000-01-01 00:00:00' AND '2050-01-01 23:00:59' 
```

应该做的伎俩。这仅使用字符串，但您说这很合适。

错误是缺少时间部分或仅对日期部分不做 substr。然后数据/时间转换函数也可能给出错误的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T11:50:26.423

我想你的问题在这里...

```
AND Datetime(column_date) <= Datetime (2050-01-01)) 
```

你为什么在这里使用日期时间而不是日期？

试试这个：

```
SELECT  * FROM MyTable WHERE (Date(column_date) >= Date (2000-01-01) AND Date(column_date) <= Date (2050-01-01)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T17:29:46.170

SQLite 表中归档的日期将为 TEXT，日期数据应存储为“2012-12-31 00:12:00”格式，比较不会给您带来麻烦，如果我们认为字段是 date_from 和 date_to 并且我们正在存储当前日期在 to_date 那么我们应该得到当前日期如下和

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        String to_date = sdf.format(new Date()); 
```

并且 SQL 查询应该是

```
 crs = db.rawQuery(
      "SELECT _id, date_from, date_to, done_or_not, list_name " +
      "FROM list_tbl " +
      "WHERE " +
      "date_from <= Datetime('"+to_date+"') AND date_to >= Datetime('"+to_date+"')", null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-11T09:36:42.023

比较 android SQLite 数据库中的日期（存储为字符串）。`12/07/2015`在格式中使用日期并使用如下查询：

```
SELECT * FROM tableName WHERE Date >=('12/07/2015') and appointmentDate <('13/07/2015')"; 
```

这对我有用。

# java - Hibernate 在 JoinTable (List<>) 中声明复合主键

> ID：10832865
> 
> 赞同：4
> 
> 时间：2012-05-31T11:40:19.840
> 
> 标签：java, hibernate, composite-primary-key, pie-chart

* * *

## Hibernate 在 JoinTable (List<>) 中声明复合主键

* * *

如何使用 HQL（Hibernate 查询语言）在边表中声明复合主键？以前我在课堂上声明了一个可连接的，一切正常，它创建了两列的复合主键。这是我使用的代码：

**之前（工作）**

```
@Id
@SequenceGenerator(name="someSequence", sequenceName="SEQ_APP", allocationSize =1)
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="appSequence")
@Column(name="id")
private int setting_id;

@OneToOne
private User user;

@ManyToMany
@JoinTable(
        name="tbl_settings_objectproxy",
        joinColumns = @JoinColumn(name = "id"),
        inverseJoinColumns = @JoinColumn( name = "objectproxy_id")
)
private Set<SomeObject> objectproxy; 
```

现在我整理了所有内容，将 Set 更改为 List 并添加了另一个边桌。现在hibernate按照它应该做的那样创建两个边表，但它没有声明任何主键......有人知道如何解决这个问题吗？这是我的新代码：

**之后（它不再创建复合主键，它甚至没有声明任何主键）**

```
@Id
@SequenceGenerator(name="someSequence", sequenceName="SEQ_APP", allocationSize =1)
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="appSequence")
@Column(name="id")
private int setting_id;

@OneToOne
private User user;

@ManyToMany
@JoinTable(
    name="tbl_settings_objectproxy",
    joinColumns = @JoinColumn(name = "id"),
    inverseJoinColumns = @JoinColumn( name = "objectproxy_id")
    )
private List<SomeObject> objectProxyForSomething; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:08:27.830

**答案/解决方案：**

1.  **将 List<> 更改为 Set<>** *将在这种情况下发挥所有作用。*

2.  *您可以* **使用 HQL 手动创建表。**

3.  *如果您喜欢使用 List，我只知道一种* **使用“columnDefinition”声明（单个）主键的方法，您可以通过** **使用“@UniqueConstraint”注释设置唯一约束***来将两个列设置为唯一，* *如下所示：*

 **** * *

```
@ManyToMany
@JoinTable(
    name="tbl_settings_objectproxy_for_something",
    joinColumns = @JoinColumn(name = "id", columnDefinition = "int primary key"),
    inverseJoinColumns = @JoinColumn( name = "objectproxy_id")
    uniqueConstraints = {@UniqueConstraint(columnNames={"id", "objectproxy_id"})}
    )
private List<SomeObject> SomeObjectProxy; 
```

投票赞成 JB Nizet 的评论，因为这些是他的解决方案，但他在评论中给出了它们而不是答案。***

# javascript - 东京时区和首尔时区的区别

> ID：10832866
> 
> 赞同：1
> 
> 时间：2012-05-31T11:40:21.593
> 
> 标签：javascript, timezone

我需要区分东京和首尔时区，它们都具有相同的偏移量而不是 DST 偏移量。

我正在使用 javascript 来计算偏移量。还查看了解析字符串以获取时区的名称，这似乎不是一个好主意。

请让我知道如何区分这两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:58:59.680

如果 Offset 和 DST 是您拥有的*唯一*信息并且它们在两种情况下都*相同*，那么您显然**无法**区分它们。

因此，您将需要另一条信息。您似乎可以从时间字符串中提取的时区名称听起来是一个很好的标识符。您应该使用[zone.tab 文件中](http://en.wikipedia.org/wiki/Zone.tab)的正式名称。

您不应该依赖 Date 的[`toString()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toString)or [`toTimeString()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toTimeString)，它们被[指定](http://es5.github.com/#x15.9.5.2)为依赖于实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:00:00.143

`new Date()`似乎包括时区名称。

对于东京，它返回：

```
Thu May 31 2012 21:09:04 GMT+0900 (JST) 
```

对于首尔，它返回：

```
Thu May 31 2012 21:09:04 GMT+0900 (KST) 
```

但是，这取决于浏览器/操作系统。

否则，您可以尝试确定用户的地理位置（基于 IP 地址）或为用户提供其时区中的区域/地区列表以供选择。

# python - 发送包含节日志信息的电子邮件

> ID：10832870
> 
> 赞同：0
> 
> 时间：2012-05-31T11:40:36.317
> 
> 标签：python, logging, xmpp, sendmail

我正在处理来自该节的信息，其中一个目标是检查是否存在错误并通过电子邮件发送通知。

我能够做的是捕获错误（IqError 或 IqTimeout）并发送一封带有书面信息的通用电子邮件：

```
except IqTimeout:
  USERNAME = 'user'
  PASSWORD = 'password'
  sender = 'someguy@myemail.com'
  receivers = 'bshell@myemail.com'
  message = """From: SomeGuy <someguy@myemail.com>
        To: Barbara Shell <bshell@myemail.com>
        Subject: Alert of an Error

        This is a test e-mail message: IqTimeout
        """
        smtpObj = smtplib.SMTP('smtp.sendmail.net', 123)
        smtpObj.login(USERNAME, PASSWORD)
        smtpObj.sendmail(sender, receivers, message)         
        print "Successfully sent email" 
```

我还尝试使用“错误”节中的信息打印日志，但只有一个字段：

```
logging.error("Could not register account. Error code: %s" %e.iq['error']['code']) 
```

我想要的是我的节中要发送到电子邮件的错误信息，基本上可以这样处理：

```
To: bshell@myemail.com
From: someguy@myemail.com
Subject: Alert of an Error

This is your error: 

RECV: <iq to="bshell@myemail.net/36457242971338462713453506"    from="chat.test.net" id="3" type="error"><oo xmlns="http://chat.net/profile" /><error code="404" type="cancel"><remote-server-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas" /></error></iq> 
```

我在用python写。如果您需要更多信息，我将非常愿意回答！

提前致谢！

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:43:03.003

如果您想在您的电子邮件中包含收到的错误节，您只需执行以下操作：

```
except IqError as e:
    ...
    message = """...

    RECV: %s""" % e.iq 
```

如果您只想提取部分错误数据，您可以使用以下任何一种：

```
e.iq['error']['code']
e.iq['error']['type']
e.iq['error']['condition']
e.iq['error']['text'] 
```

其中，在您的示例中将分别提供：

```
'404'
'cancel'
'remote-server-not-found'
"" # Because no human friendly text was included 
```

现在，这可能是您面临的问题。当您捕捉到`IqError`异常时，`e.iq`响应节是包含可以像上面一样访问的错误数据的响应节。如果您正在捕捉`IqTimeout`，那么`e.iq`就是从未收到响应的*原始节。*在这种情况下，确实没有错误的 XML 可以从中提取数据。当然，您可能仍然会得到看起来像错误数据的内容，但这可能是由于在访问时插入了错误元素（`e.iq['error']`如果不存在）。

别忘了还有`sleek@conference.jabber.org`SleekXMPP 相关帮助的空间。

——兰斯

# c# - 无法使用 ToolStripLayoutStyle.Table 在 ToolStrip 中以编程方式调整 ToolStripItem 的大小

> ID：10832876
> 
> 赞同：4
> 
> 时间：2012-05-31T11:40:58.197
> 
> 标签：c#, toolstripitem

我想以编程方式用项目填充 ToolStrip。toolStrip1.LayoutStyle 必须是**ToolStripLayoutStyle.Table**。但是我无法更改项目的宽度，即使我这样做了，宽度也会恢复为默认值。

```
ToolStripLabel tslCheck = new ToolStripLabel("First Text"),
                           tslSumm = new ToolStripLabel("second Text:"),
                           tslError = new ToolStripLabel("third text:"),
                           tslAccount = new ToolStripLabel("fourth text"),
                           tslProvider = new ToolStripLabel("fifth text");
ToolStripTextBox tbCheck = new ToolStripTextBox(),
                           tbAccount = new ToolStripTextBox(),
                           tbSumm = new ToolStripTextBox(),
                           tbError = new ToolStripTextBox();
TableLayoutSettings tsSettings;

ToolStripComboBox cbProvider = new ToolStripComboBox();       

protected void toolStrip1_Construct()
{
    toolStrip1.LayoutStyle = ToolStripLayoutStyle.Table;            
    tsSettings = toolStrip1.LayoutSettings as TableLayoutSettings;
    tsSettings.RowCount = 2; 
    tsSettings.ColumnCount = 6;

    cbProvider.DropDownStyle = ComboBoxStyle.DropDownList;

    ///adding controls
    toolStrip1.Items.AddRange(new ToolStripItem[]
    {
        tslCheck,
        tbCheck,

        tslAccount,
        tbAccount,

        tslProvider,
        cbProvider,

        //second row
        tslSumm,
        tbSumm,

        tslError,
        tbError
    });

    tbAccount.Width = 1000; //Width is still remains 100
    cbProvider.Width = 500; //Width is still remains 121
} 
```

但是，如果我在 VisualDesigner 中进行，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:36:40.113

您必须将`AutoSize`属性设置为 false：

```
ToolStripComboBox cbProvider = new ToolStripComboBox() { AutoSize = false }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-19T20:18:35.607

实际上对我有用的是设置 Size 属性而不是 Width 属性：

```
cbProvider.Size = new Size(40, 20); 
```

高度被忽略，但宽度被正确设置

# java - 带有套接字的 BufferedWriter 与 PrintWriter？

> ID：10832877
> 
> 赞同：0
> 
> 时间：2012-05-31T11:41:05.380
> 
> 标签：java, bufferedreader

在这种情况下，[优化套接字 java](https://stackoverflow.com/questions/10813570/optimize-perfomance-in-sockets-java)中的性能，使用套接字、BufferedWriter 或 PrintWriter 哪个更好？

每个线程（客户端）中的套接字以行的形式发送格式化的数据，带有 CR 的字符串。在 BufferedWriter 中，我会在 write() 之后使用 newLine 吗？

谢谢你的帮助。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:53:01.283

BufferedWriter的 [Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)特别指出：

> 除非需要快速输出，否则建议将 BufferedWriter 包装在任何 write() 操作可能代价高昂的 Writer 周围，例如 FileWriters 和 OutputStreamWriters。例如，
> 
> ```
>  PrintWriter out
>    = new PrintWriter(new BufferedWriter(new FileWriter("foo.out"))); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:19:19.950

PrintWriter 吞下所有异常。除非您每次调用它时都非常小心地检查错误，并且准备好不知道这些错误实际上是什么，否则它通常不应该在您需要了解所有异常的网络上使用。使用 BufferedWriter。

# c# - 访问令牌密钥和秘密在 DropNet 中不起作用

> ID：10832878
> 
> 赞同：1
> 
> 时间：2012-05-31T11:41:05.310
> 
> 标签：c#, oauth, dropbox, dropnet

我将 DropNet 用于 Dropbox OAuth，但我有一个主要问题 - 我无法存储访问令牌密钥和机密，因为存储它们毫无意义。存储机制不是问题，也不是关键问题——问题在于：

```
private void dropboxUpload()
{
    DropNetClient _Dclient = new DropNetClient("xxxxxxxxxxxxxxx", "yyyyyyyyyyyyyyy");
    _Dclient.UseSandbox = true;
    if (!dropboxLoggedIn)
    {
            _Dclient.GetToken();
            string url = _Dclient.BuildAuthorizeUrl();
            Process.Start(url);
            if (MessageBox.Show("Click OK after you have allowed Sizester to create and access a sub-folder called Sizester in a folder called Apps in your Dropbox account.", "Sizester access request", MessageBoxButtons.OKCancel) != System.Windows.Forms.DialogResult.OK)
            {
                return;
            }
        }
        try
        {
            if (!dropboxLoggedIn)
            {
                _Dclient.GetAccessToken();
                dropboxAsecret = _Dclient.UserLogin.Secret;
                dropboxAtoken = _Dclient.UserLogin.Token;
            }
            else
            {
                _Dclient.UserLogin.Token = dropboxAtoken;
                _Dclient.UserLogin.Secret = dropboxAsecret;
            }
            dropboxLoggedIn = true;
            //...
            _Dclient.UploadFile("/", fileE, FileToByteArray(newFilePath));
            MessageBox.Show("Successfully uploaded to Dropbox.", "Uploaded to Dropbox");
        }
        catch (Exception dropboxEx)
        {
            MessageBox.Show("Error: " + dropboxEx.Message);
        }
    } 
```

这里的问题是 - 第一次上传正常，但第二次没有 - 虽然 dropboxLoggedIn 为真，并且访问令牌密钥和秘密存储正常，但它不上传文件，但更奇怪的是它不返回任何错误或异常。如果发生同样的事情，我将 GetToken 移出。我知道我在某个地方做错了，但我不知道在哪里。我已经剥离了一些代码部分，如文件路径并获取不相关的文件。我为 Twitter 做了同样的事情，但它在那里没有问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:50:39.933

此链接应该有助于解决该问题： [http ://forums.dropbox.com/topic.php?id=61115&replies=6](http://forums.dropbox.com/topic.php?id=61115&replies=6)

基本上，您需要`DropNetClient _Dclient`从 Upload File 方法中初始化您的实例。当您获得访问令牌时，您应该将其保存在您的会话或配置文件中，并且每次上传文件时都不需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T22:14:19.730

从第 3 行的外观来看，你搞砸了：`if (!dropboxLoggedIn)`

因此，只有在用户未登录但第二次尝试您所说的应该是真的时，您才继续，从而跳过所有上传代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T22:12:25.580

好的，所以问题在于对象的初始化 - 如果你这样做：

```
DropNetClient _Dclient = new DropNetClient("xxxxxxxxxxxxxxx", "yyyyyyyyyyyyyyy");
_Dclient.UseSandbox = true;
_Dclient.UserLogin.Token = "zzzzzzzzzzzzzzz";
_Dclient.UserLogin.Secret = "wwwwwwwwwwwwww"; 
```

这是行不通的——相反，它需要像这样初始化：

```
DropNetClient _Dclient = new DropNetClient("xxxxxxxxxxxxxxx", "yyyyyyyyyyyyyyy","zzzzzzzzzzzzzzz","wwwwwwwwwwwwww");
_Dclient.UseSandbox = true; 
```

我不确定我在某些文档或论坛中在哪里找到了第一个代码示例，但这是错误的。如果您使用它 - 不会发生错误或异常，但不会完成 Dropbox 文件上传或操作。如果你使用第二个，一切都会奏效。

# php - 按时间戳排序一个已经按时间戳排序的mysql结果

> ID：10832879
> 
> 赞同：0
> 
> 时间：2012-05-31T11:41:12.363
> 
> 标签：php, mysql

你好，我做了一个查询，其中首先从数据库中获取 uid 的朋友，并根据该通知从数据库中获取。问题是假设用户 a 的两个朋友是用户 b 和用户 c，那么他们的通知应该在我这样查询之后出现

> 用户 b 更新了个人资料
> 
> 用户 c 评论
> 
> 用户 b 喜欢
> 
> 用户 c 评价

这些是根据时间戳排列的

但它的到来安排为每个朋友单独的时间戳

喜欢

> 用户 b 喜欢
> 
> 用户 b 更新了个人资料
> 
> 用户 c 评论
> 
> 用户 c 评价

我的代码

```
 $frndnoti=mysql_query("select friend_id from friend_list where uid=$id and status='1'");
while($bow=mysql_fetch_array($frndnoti))
{
$frnnid=$bow['friend_id'];

$sql3=mysql_query("select * from notification 
  where title_text='Global Notification'  
    and user_id in ($id , $frnnid)
   and owner_user_id=$frnnid 
   and is_seen=0  
   order by time_stamp DESC");

while($row=mysql_fetch_array($sql3))
{
      and so on..... 
```

$sql3 的结果可以根据时间戳重新排列吗？在它被取走之后？或者有什么方法可以改进这个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:22:44.760

经过长时间的思考并尝试我想出了它的仪式查询，我在这里写了查询，以便它可以帮助后来卡住的人

```
$sql3=mysql_query("select n.*,f.friend_id,f.uid,f.status from notification
n,friend_list f  where f.uid='$id' and f.status='1' and n.title_text='Global 
Notification'   and n.user_id in ('$id' , f.friend_id)  and n.owner_user_id=f.friend_id
 and n.is_seen='0'  order by n.time_stamp desc");

while($row=mysql_fetch_array($sql3))

{
 and so on..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:23:12.557

可能是因为您正在嵌套查询并将子查询结果按friend_id 插入到数组中。要么使用 php 对时间戳的返回结构进行排序，要么使用一个查询来获取所有通知：

select * from notification where title_text='Global Notification'
and user_id = $id or user_id in (selectfriend_id from friend_list where uid=$id and status='1') and owner_user_id in (selectfriend_id from friend_list where uid=$id and status='1') and is_seen=0
order by time_stamp DESC

尽管由于重复的嵌套查询，我不太喜欢那个。

附加问题：

*   查询中 user_id 和 owner_user_id 的用途是什么？
*   通知是如何插入到通知表中的？
*   title_text 的目的是什么？
*   拉出通知后是否设置了 is_seen 标志？是否再次需要通知？使用队列会更容易。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T12:02:48.617

双重检查`time_stamp`数据类型是时间戳。重命名您的列`time_stamp`，然后重试。如果这也不起作用，另一种方法是您可以使用 PHP 数组排序函数对数组进行降序排序。

# objective-c - 标签文本在 IBAction 方法中没有改变

> ID：10832881
> 
> 赞同：0
> 
> 时间：2012-05-31T11:41:22.150
> 
> 标签：objective-c, uibutton, label, action, uilabel

我正在尝试计算用户将手指按住按钮的时间，并将此时间以秒为单位显示为 label.text ...（最多 10 秒）一切正常，但 label.text在动作结束时更新（我只有一个按钮和一个标签......）

我的标题：

```
#import <UIKit/UIKit.h>
#import <CoreFoundation/CFData.h>
@interface TwisterViewController : UIViewController {
  UILabel *label;
  CFTimeInterval presstime;
}

@property(nonatomic,retain) IBOutlet UILabel *label;
-(IBAction) fingeron;

@end 
```

我的m文件

```
#import "TwisterViewController.h"
@implementation TwisterViewController
@synthesize label;
-(IBAction) fingeron
{
  int holdtime;
  presstime = CFAbsoluteTimeGetCurrent();
  holdtime = (int) (CFAbsoluteTimeGetCurrent() - presstime);
  NSString *holdtimetext; 
  while (holdtime <= 10) {
    holdtimetext = [NSString stringWithFormat:@"%d", holdtime];
    label.text = holdtimetext;
    holdtime = CFAbsoluteTimeGetCurrent() - presstime;
  }
  presstime = 0;
} 
```

因此 label.text 为空 9 秒，并且在操作的 and 中显示“10”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:48:40.423

克里特岛计时器为此

```
timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(fingerOn) userInfo:nil repeats: YES]; 
```

然后使用自己的方法

```
 -(IBAction) fingeron
    {
        int holdtime;
    presstime = CFAbsoluteTimeGetCurrent();
    holdtime = (int) (CFAbsoluteTimeGetCurrent() - presstime);
    NSString *holdtimetext; 
    while(holdtime <= 10)
    {
        holdtimetext = [NSString stringWithFormat:@"%d", holdtime];
        label.text = holdtimetext;
        holdtime = CFAbsoluteTimeGetCurrent() - presstime;
    }
    presstime = 0;
} 
```

# java - 映射中具有 Object 类型值的异常问题

> ID：10832882
> 
> 赞同：0
> 
> 时间：2012-05-31T11:41:23.120
> 
> 标签：java, string, map, boolean, classcastexception

按照代码块。

```
Map<String, Object> personDetailMap = new HashMap<String, Object>();
personDetailMap.put("name", "isuru");
personDetailMap.put("is-male", true);
(String)personDetailMap.get("is-male"); 
```

最终语句导致异常：ClassCastException cannot cast Boolean to String 另请注意，我尝试读取的值是原始类型 boolean

我的问题是 personDetailMap 将返回一个 Class Object 的对象，那么为什么它会给 String 一个 Boolean 强制转换异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:46:31.647

`personDetailMap.put("is-male", true);``Boolean`通过将原语装箱`boolean`到对象中 来存储 a 。`personDetailMap.get("is-male");`返回相同`Boolean`的 .

然后您尝试将其`Boolean`转换为 a`String`尽管这两个类没有关系。演员表失败了，你得到了那个例外。

该语句`(String) anObject;`只有在`anObject` **是**一个字符串时才有效（字符串是最终的，没有任何子类）。

如果您确实想将布尔值转换为字符串，可以使用以下方法：

```
String boolStr = personDetailMap.get("is-male").toString(); // boolStr = "true" 
```

# windows-mobile - 如何在 Windows Mobile 中获取 ComboBox 的 TAP？

> ID：10832886
> 
> 赞同：0
> 
> 时间：2012-05-31T11:41:43.307
> 
> 标签：windows-mobile, windows-mobile-6.5

我是 Windows 移动应用程序的新手。我正在为触摸设备（带有硬件键的设备）开发一个 Windows 移动应用程序。我想以编程方式找出用户点击组合框（通过手指/手写笔）或按下箭头键（使用箭头键进行列表遍历）之间的区别。因为在这两种情况下它都会调用 selectedIndexChanged。ComboBox TAP 或 swipe 是否有任何事件？

任何帮助表示赞赏。

谢谢马尼什库马尔
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:01:27.373

没有这样的事件。

我的建议是在表单事件 Click 中标记手指/触控笔点击，并在事件 KeyDown 中标记箭头键按下。这样您就可以在 SelectedIndexChange 事件中将两者分开。就像是：

```
enum InteractionType
{
    Click,
    KeyDown
}

private InteractionType _userInteractionType;

private void form_Click(object sender, EventArgs e)
{
    _userInteractionType = InteractionType.Click;
}

private void form_KeyDown(object sender, KeyEventArgs e)
{
    e.Handled = true;
    switch (e.KeyCode)
    {
        case Keys.Up:
        case Keys.Down:
            _userInteractionType = InteractionType.KeyDown;
            break;
    }
}

private void comboBox_SelectedIndexChanged(object sender, EventArgs e)
{
    switch (_userInteractionType)
    {
        case InteractonType.Click:
            // do something
            break;
        case InteractionType.KeyDown;
            // do something else
            break;
    }
} 
```

如果您需要在很多地方经常这样做，那么可能值得为您的项目创建一个表单基类，并通过覆盖 OnClick 和 OnKeyDown 来做一些类似的事情。

# sql-server - Navision - 将 NTEXT 列从 SQL Server 传输到 xml 文件

> ID：10832887
> 
> 赞同：1
> 
> 时间：2012-05-31T11:41:50.747
> 
> 标签：sql-server, xmldom, navision

目前我不知道如何从`NTEXT`SQL Server 中的列获取值到 navision 中的 XML 文件。我尝试了很多方法，但它们都不起作用。

这是我迄今为止的尝试：

```
PROCEDURE ExportProdInfo@10();
VAR
  shortDesc@1001 : Text[1000];
  longDesc@1002 : BigText;
  metaDesc@1003 : Text[1000];
  xmlText@1004 : Text[200];
  tmpText@1005 : Text[200];
BEGIN
  //
  // Get the product information directly from database then export to xml file
  //

  xmlDOM.loadXML('</xml>');
  xmlNode := xmlDOM.createNode('element', 'sampleFile', 'namespace');

  IF ISCLEAR(ADOrs[1]) THEN
      CREATE(ADOrs[1]);

  QueryString :=
  'SELECT TOP 1 ProdOptProdNumber, ProdOptLongDescription, ProdOptShortDescription, ProdOptMetaDescription FROM ProductOption';
  MakeVars;
  ADOrs[1].Open(Ascii2Ansi(QueryString),ADOConn,OpenMethod,LockMethod);
  IF NOT ADOrs[1].EOF THEN REPEAT

  //XmlDOM.save('C:\testXML.xml');
    shortDesc := GetFieldStr('ProdOptShortDescription');
    //longDesc.ReadGetFieldStr('ProdOptLongDescription');
    metaDesc := GetFieldStr('ProdOptShortDescription');

    tmpBigText.GETSUBTEXT(tmpText, 0, 10);
    MESSAGE(tmpText);
    ADOrs[1].MoveNext;
  UNTIL ADOrs[1].EOF;

  CLEAR(ADOrs[1]);
END;

PROCEDURE GetFieldStr@13(FieldName@1048200 : Text[1024]) RetVal : Text[1024];
VAR
  tmpText@1001 : Text[250];
  pos@1002 : Integer;
  numberOfByte@1003 : Integer;
BEGIN
  pos := 1;
  ADOStream.Type := 2; // text mode
  ADOStream.Open;
  ADOStream.WriteText(ADOrs[1].Fields.Item(FieldName).Value);
  xmlNode.nodeTypedValue := ADOStream.Read();
  ADOStream.Close;
END; 
```

我的问题是：如何将`NTEXT`SQL Server 中的变量值获取到 Navision 中的 xmlNode？

错误是：`.. is not allowed in this context`

# javascript - 如何将输入标签插入到 td 标签中？

> ID：10832888
> 
> 赞同：1
> 
> 时间：2012-05-31T11:41:57.343
> 
> 标签：javascript, jquery, html-table

我有生成表格的代码。你可以看到下面的代码：

```
function createDynamicTable(tbody, rows, cols) {
         if (tbody == null || tbody.length < 1) return;
         for (var r = 1; r <= rows; r++) {
             var trow = $("<tr>");
             for (var c = 1; c <= cols; c++) {
                 var cellText = "Cell " + r + "." + c
                 $("<td>")
                         .addClass("tableCell")
                         .text(cellText)
                         .data("col", c)
                         .appendTo(trow);
             }
             trow.appendTo(tbody);
         }
     } 
```

结果是：

```
<table id="tbl" border="1">
<tbody>
<tr>
<td class="tableCell">Cell 1.1</td>
<td class="tableCell">Cell 1.2</td>
<td class="tableCell">Cell 1.3</td>
<td class="tableCell">Cell 1.4</td>
</tr>
</tbody>
</table> 
```

我希望添加每个`<td></td>`=> `<td><input><input/></td>`Tagas。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:44:57.023

稍微修改一下你的函数，它会`input`为每个单元格添加字段：

```
function createDynamicTable(tbody, rows, cols) {
    if (tbody == null || tbody.length < 1) return;
    for (var r = 1; r <= rows; r++) {
        var trow = $("<tr>");
        for (var c = 1; c <= cols; c++) {
            var input = $("<input />");
            $("<td>").addClass("tableCell")
                .append(input)
                .data("col", c)
                .appendTo(trow);
        }
        trow.appendTo(tbody);
    }
} 
```

**演示：http:** [//jsfiddle.net/Xt33h/](http://jsfiddle.net/Xt33h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:44:28.593

你可以这样做：

```
$('#tbl td:last').after('<td><input><input/></td>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:47:44.907

将 for （生成单元格的位置）更改为

```
for (var c = 1; c <= cols; c++) {
    var cellText = "Cell " + r + "." + c
    var td = $("<td>")
        .addClass("tableCell")
        .text(cellText)
        .data("col", c)
        .appendTo(trow);

    $('<input />').appendTo(td);
} 
```

# c# - 在实体中使用继承 (TPH) 时如何使用动态 linq

> ID：10832894
> 
> 赞同：0
> 
> 时间：2012-05-31T11:42:28.267
> 
> 标签：c#, linq, entity-framework, entity-framework-4, entity-framework-4.1

1.  我正在创建一个表达式构建器或查询构建器来查询一个特定的实体。该实体称为 RequestBase，该实体具有一些属性，但还有 3 个其他实体继承自 Request Base。

2.  因为我使用的是 TPH，所以只创建了一个带有鉴别器列的表，而所有其他属性都在 RequestBase 表中创建。

3.  问题是当使用动态 LINQ 查询不在 RequestBase 实体中而是在子实体中的属性时。

****请求库代码****

```
public class RequestBase
    {
        public int RequestBaseId { get; set; }
        public string CurrentStatus { get; set; }
        public string RequestNumber { get; set; }
        public DateTime RequestDate { get; set; }
        public bool IsOnHold { get; set; }

        public virtual Dealer Dealer { get; set; }
        public virtual Requester Requester { get; set; }
        public virtual Vehicle Vehicle { get; set; }

        public virtual ICollection<Attachment> Attachments { get; set; }
        public virtual ICollection<WorkflowHistory> WorkflowHistories { get; set; }

} 
```

** **EcoBonusRequest 的代码****

```
public class EcoBonusRequest : RequestBase
    {
        public string BrandReturnedVehicle { get; set; }

        public string TypeReturnedVehicle { get; set; }

        public string ChassisReturnedVehicle { get; set; }

        public string DestructionCertificateNumberReturnedVehicle { get; set; }

        public decimal AmmountWithVAT { get; set; }

        public decimal AmmountWithoutVAT { get; set; }

        public decimal Percentage { get; set; }

        public DateTime VehicleDesctructionDate { get; set; }

        public virtual Customer Customer { get; set; }

        public string Comments { get; set; }
    } 
```

****查询构建器的代码****

```
private string BuildQuery()
            {
                var sb = new StringBuilder();
                //var list = RequestBaseBL.GetRequestByCustomQuery("RequestNumber == \"12\"");

                #region 1st ROW of the QUERY
                if (ColumnType(DdlColumn1.SelectedValue) == "Text")
                {
                    if(DdlOperator1.SelectedValue == "==")
                    {
                        sb.Append(DdlColumn1.SelectedValue);
                        sb.Append(DdlOperator1.SelectedValue);
                        sb.Append("\"" + TxtValue1.Text + "\"");
                    }
                    if (DdlOperator1.SelectedValue == "<>")
                    {
                        sb.Append(DdlColumn1.SelectedValue);
                        sb.Append(DdlOperator1.SelectedValue);
                        sb.Append("\"" + TxtValue1.Text + "\"");
                    }
                    if (DdlOperator1.SelectedValue == "LIKE")
                    {
                        sb.Append(string.Format("{0}.Contains(\"{1}\")", DdlColumn1.SelectedValue, TxtValue1.Text));
                    }
                    if (DdlOperator1.SelectedValue == "NOT LIKE")
                    {
                        sb.Append(string.Format("!{0}.Contains(\"{1}\")", DdlColumn1.SelectedValue, TxtValue1.Text));
                    }
                }

                if (ColumnType(DdlColumn1.SelectedValue) == "Number")
                {
                    sb.Append(DdlColumn1.SelectedValue);
                    sb.Append(DdlOperator1.SelectedValue);
                    sb.Append(TxtValue1.Text);
                }

                if (ColumnType(DdlColumn1.SelectedValue) == "Date")
                {
                    sb.Append(DdlColumn1.SelectedValue);
                    sb.Append(DdlOperator1.SelectedValue);
                    sb.Append(TxtValue1.Text);
                }

                if (ColumnType(DdlColumn1.SelectedValue) == "Bool")
                {
                    sb.Append(DdlColumn1.SelectedValue);
                    sb.Append(DdlOperator1.SelectedValue);
                    sb.Append(TxtValue1.Text);
                }

                #endregion  

                return sb.ToString();
            }

        #endregion 
```

****生成的应该执行的 sql** **

```
public IQueryable<RequestBase> GetRequestByCustomQuery(string strql)
            {
                return _context.RequestBases.Where(strql);
            }

? sb.ToString()
"AmmountWithVat=1" 
```

****错误****

> “RequestBase”类型中不存在属性或字段“AmmountWithVat”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:04:21.097

以下将起作用：

```
 public IQueryable<RequestBase> GetRequestByCustomQuery(string strql)
    {
         return _context
               .RequestBases
               .OfType<EcoBonusRequest>()   //
               .Where(strql);
    } 
```

您可以轻松调整此功能：

```
 public IQueryable<T> GetRequestByCustomQuery<T>(string strql)
        where T :  RequestBase
    {
         return _context
               .RequestBases
               .OfType<T>()   //
               .Where(strql);
    } 
```

所以问题是如何在 BuildQuery() 中获取该类型。不容易，但这就是你设置它的方式。

# apache - 所有子域都指向一个带有 .htaccess 的文件

> ID：10832896
> 
> 赞同：1
> 
> 时间：2012-05-31T11:42:36.317
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

尝试了几件事，基于[此](https://stackoverflow.com/a/6844715/502649)我正在尝试下面的代码，但它不起作用。实际上，当我尝试使用时，它会显示托管面板页面。

我正在使用我自己的服务器，用于管理[ispCP](http://isp-control.net/)已安装。

我要做的是，除了原始域和 www，将所有子域重定向到一个 php 文件。

```
Options -MultiViews
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

#RewriteCond %{REQUEST_URI} !^/parent/ 
RewriteCond %{HTTP_HOST} !=domain.com
RewriteCond %{HTTP_HOST} !=www.domain.com
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com$
RewriteRule (.*) /subpage.php?page=%1%{REQUEST_URI} [L] 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:15:33.537

ServerAlias 配置解决了我的问题。显然我需要一个通配符。这是***.domain.com**

```
ServerAlias www.domain.com domain.com *.domain.com 
```

# php - 使用 ajax 发布到 php 文件 - 安全性

> ID：10832899
> 
> 赞同：2
> 
> 时间：2012-05-31T11:42:38.950
> 
> 标签：php, mysql, ajax, security, cordova

我正在使用 phonegap 开发 iOS 应用程序。用户首先必须注册或登录。（ajax: post to php file on my webserver, like here: [PHP AJAX login, 这种方法安全吗？](https://stackoverflow.com/questions/3336636/php-ajax-login-is-this-method-secure)）。

信息需要发送到mySQL数据库，用户可以上传图片，...

现在我想知道是否有办法阻止其他人发布到我的 php 文件。

在我看来，制作一些脚本来添加数千个假账户，或者上传数千张图片会很简单。

我读到：[POST 方法、Ajax 和安全性？](https://stackoverflow.com/questions/1936146/post-method-ajax-and-security)，但我似乎没有找到在 phonegap 应用程序中实现这一点的方法。

如何确保我是唯一可以使用这些 php 文件的人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:50:53.923

保存您的 PHP 会话 cookie 并在您的应用程序中使用普通会话进行身份验证。这样，您只需验证自己一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:47:27.403

您可以将身份验证令牌添加到您的 ajax 请求的标头中，并在您的 php.ini 文件中进行检查。例如

> ```
>  $.ajax({
>         url: "https://your.url.com/page",
>         headers: { 
>             "Auth-Token": "auth_key2134"
>         }
>     }); 
> ```

# java - 如何将整个第二个数组附加到java中的第一个数组

> ID：10832902
> 
> 赞同：0
> 
> 时间：2012-05-31T11:42:47.573
> 
> 标签：java, arrays, append, concat

我知道，我们可以复制或附加数组的元素。但是，我在一个数组中有大约 100 个元素。有没有其他可用的方法，所以我可以将数组附加到第一个数组。

考虑我有这两个数组。

```
 String name1[]={"abc", "def", "ghi"};
 String name2[]={"jkl", "mno", "pqr"}; 
```

我想在 name1 的末尾附加 name2 数组。

请帮我。

将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:49:56.480

[番石榴](https://github.com/google/guava)提供[`Arrays.concat(T[], T[], Class<T>)`](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/ObjectArrays.html#concat(T[],%20T[],%20java.lang.Class)).

参数 FYI的原因`Class`是因为泛型数组具有明显的向上转换趋势。如果你这样做了`Arrays.concat(Integer[], Long[])`，你想要一个`Object[]`背部吗？还是一个`Number[]`？Guava 让你指定，所以没有歧义......而且因为所有替代方案都可能导致`ClassCastException`运行时不可预测的 s 。

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:55:25.487

您将不得不创建一个新数组。

使用泛型而不使用任何外部库的简单实现：

```
public static void main(String[] args) {
    String [] a1 = { "a", "b" };
    String [] a2 = { "c", "d", "e", "f" };

    System.out.println(Arrays.toString(append(a1, a2)));
}

public <K> K[] append(K[] a1, K[] a2) {
    K[] a1a2 = Arrays.copyOf(a1, a1.length + a2.length);
    for (int i = a1.length; i < a1a2.length; i++) {
        a1a2[i] = a2[i - a1.length];
    }
    return a1a2;
} 
```

OBS：正如 Louis Wasserman 在他的回答中评论的那样，Java 将向上转换数组，这可能是一个问题。例如，如果您为上面的 append 方法提供 Long[] 和 Integer[]，它将编译但您将`java.lang.ArrayStoreException`在运行时得到一个！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:44:27.607

您将不得不创建一个新数组。因为数组的长度是固定的。

```
 String[] list = new String[name1.length+name2.length] 
```

您可以循环两个数组并将每个元素添加到新数组

你也可以使用 apache commons lang library

```
 String[] both = ArrayUtils.addAll(first, second); 
```

# android - 更改区域设置后更改通知栏中的字符串

> ID：10832903
> 
> 赞同：4
> 
> 时间：2012-05-31T11:42:52.653
> 
> 标签：android, localization, android-resources

我有几个用于不同语言的 string.xml 文件，当我更改语言环境时，一切正常，我活动中的所有标签都更改了，通知中的标签除外。

是否有类似“刷新”命令发送到通知？刷新字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:50:33.053

此问题已在不同论坛上多次报告。可能最合适的解决方案/解决方法可以在这里找到：
[android - locale notification, need to dump cache](https://stackoverflow.com/questions/9776313/android-locale-notification-need-to-dump-cache)

亲切的问候，
博

# android - LinearLayout 未设置所需的 layout_height 属性

> ID：10832904
> 
> 赞同：5
> 
> 时间：2012-05-31T11:42:59.423
> 
> 标签：android, styles, themes, android-linearlayout

我正在制作布局并应用一些样式。所以：

```
<style name="LayoutSmallMap">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">180dip</item>
        <item name="android:background">@drawable/rounded_corner</item>
        <item name="android:layout_margin">5dip</item>
        <item name="android:padding">3dip</item>
</style> 
```

我用这个：

```
<LinearLayout 
       style="@style/LayoutSmallMap">

</LinearLayout> 
```

但是当我在手机出现错误之前测试手机时，现在状态：

**LinearLayout 未设置所需的 layout_height 属性**

他没有在我的风格中找到属性？

**不知道这是否是最好的解决方案，但它对我有用：** Target SDK: 2.3 and **minSdkVersion="7"**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:52:30.000

您不应该在样式中使用 android:layout_width 和 android:layout_height。如下修改您的代码。

```
<style name="LayoutSmallMap">
        <item name="android:background">@drawable/rounded_corner</item>
        <item name="android:layout_margin">5dip</item>
        <item name="android:padding">3dip</item>
</style>

<LinearLayout 
       android:layout_width="fill_parent" 
       android:layout_height="180dip"  
       style="@style/LayoutSmallMap">

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:50:36.073

试试这个

```
<style name="LayoutSmallMap">         
    <item name="android:background">@drawable/rounded_corner</item>
    <item name="android:layout_margin">5dip</item>
    <item name="android:padding">3dip</item>
</style> 
```

布局

```
<LinearLayout 
    android:layout_width="fill_parent"
   android:layout_height="180dib"
    style="@style/LayoutSmallMap">

 </LinearLayout> 
```

# opengl - 四条纹理变形

> ID：10832909
> 
> 赞同：3
> 
> 时间：2012-05-31T11:43:19.943
> 
> 标签：opengl, textures, texture-mapping

我有一个 GL_QUAD_STRIP 我是纹理映射。四边形条本身折叠起来形成一个紫外线球体。本质上，四边形通常不是由矩形制成的，而是梯形。

我遇到了纹理失真问题。纹理坐标是正确的（例如，它们在应有的位置很好地排列）。问题在于梯形面本身。

我希望梯形脸较大端的纹素对着更大的区域，但脸似乎分成两个三角形。它看起来类似于仿射纹理映射（但我不认为它是；它看起来仍然是正确的，而且我不希望它会被使用）。

我知道显卡通常会在内部将四边形缩小为三角形，但我不希望这会影响纹理。. .

所以，我不知道这里发生了什么。有什么想法吗？

以下是不良行为的示例。低分辨率地球纹理，最近过滤，无 mipmap 或各向异性： ![在此处输入图像描述](../Images/5bad50a9d06703f8fec8254092f491b1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:25:58.313

这是对简单四边形进行纹理处理时的经典问题。这是因为（就像你猜对的那样）四边形被分解成单独的三角形。这些三角形又是独立纹理的。

问题是，三角形内的纹理坐标是从顶点线性插值的（虽然透视正确，但这在这里没有帮助）。你可以把它想象成不知道这个梯形的第四个顶点的光栅化器，它只看到单独的三角形。因此它假设三角形到纹理空间的变换是完全仿射的，因此三角形是平行四边形的一部分。

要解决这个问题，您需要做的是通过使用完整的 4 维纹理坐标而不是简单的 2D texcoords，从简单的 2D 仿射纹理空间转移到投影纹理空间，就像[在此处](http://www.xyzw.us/~cass/qcoord/)解释的那样。你基本上做了 GL 已经用透视正确插值做的事情，但是使用你自己的透视投影作为纹理坐标（除了已经为顶点位置完成的透视投影）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T13:05:10.860

每个部分在正面渲染时是否正确渲染（以完全正方形）？

您可以在渲染之前尝试以下命令：

```
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST); 
```

> **GL_PERSPECTIVE_CORRECTION_HINT**表示颜色、纹理坐标和雾坐标插值的质量。如果 GL 实现不能有效地支持透视校正参数插值，则提示 GL_DONT_CARE 或 GL_FASTEST 可以导致颜色和/或纹理坐标的简单线性插值。

# c# - 在 C# 中呈现不同的事件类型

> ID：10832910
> 
> 赞同：1
> 
> 时间：2012-05-31T11:43:20.700
> 
> 标签：c#, asp.net

好的，所以我有 3 个不同的类（rl 事件的类型）每个事件都有不同的属性

例如游泳课有温度、PH值、游泳长度等下一个事件是自行车课有自行车类型、轮胎宽度等

现在这些事件都有一个日期，我想在列表中按日期排序。

现在每个类都必须根据设计进行不同的渲染，所以我有点困惑我应该如何解决这个问题？

正在考虑创建一个对象列表，然后将所有类型的所有事件按日期排序传递到列表中，然后遍历列表并根据我得到的对象类型，将其绑定到用户控件并呈现它..

这是最好的方法吗？还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:04:22.863

创建一个所有事件派生自的基类。这个基类应该有一个`public virtual`被调用的方法`Render`和`DateTime`字段。

从该类派生所有事件类并覆盖该`Render`方法，以便每个事件类都可以“呈现自己”。

您需要做的就是保留一个按时间戳排序的基类实例列表，然后调用`Render`。

样本：

```
public class BaseEvent
{
    public DateTime TimeStamp;

    public virtual void Render() { }
}

public class Swimming : BaseEvent
{
    public override void Render()
    {
        // Code to render a Swimming instance
    }
}

public class Cycling: BaseEvent
{
    public override void Render()
    {
        // Code to render a Cycling instance
    }
} 
```

跟踪所有事件的列表：

```
private List<BaseEvent> m_events; 
```

渲染所有事件：

```
foreach (BaseEvent e in m_events)
    e.Render(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:57:38.707

创建一个包含 dateTime 的类，然后创建基于它的其他类。然后您可以创建一个基类列表，并将对象转换为扩展类并使用它们。这是一个工作示例

**编辑**哇我对此感到困惑，不知道如何解释它，所以请要求澄清，我会尽力而为

```
 public Form1()
    {
        InitializeComponent();
        List<Sport> Sports = new List<Sport>();
        //create a swim object and give it some data
        Swimming swim1 = new Swimming();
        //create a cycle object and give it some data
        Cycling cycle1 = new Cycling();
        swim1.PH = 5;
        cycle1.BikeType = 2;
        // add the two objects to a list of base class
        Sports.Add(swim1);
        Sports.Add(cycle1);

        //iterate through the list of base class and cast the objects to their extended class
        //display a independent property of each just to prive it works.
        foreach (Sport s in Sports)
        {
            if (s is Cycling)
            {
                MessageBox.Show(((Cycling)s).BikeType.ToString());
            }
            else if (s is Swimming)
            {
                MessageBox.Show(((Swimming)s).PH.ToString());
            }

        }
    }
}

class Sport
{
    DateTime DateAndTime = new DateTime();
}
class Swimming : Sport
{
    public int PH = 0;
    public int temperature = 0;
}
class Cycling : Sport
{
    public int BikeType = 1;
    public int TireSize = 26;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:48:09.400

是的，这是一个很好的方法。

但尽量避免自己渲染控件。将它们添加到父容器控件的 Controls 集合中。Asp.net 将以这种方式呈现控件本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:13:06.063

几乎就像 Thorsten Dittmar 的解决方案，但如果您将列表绑定到 GridView 等控件，则无需关心 Render() 方法。反而：

1）声明一个新的枚举：

```
public enum EventType {Swimming, Cycling, etc} 
```

2) 像在类声明中一样将枚举值传递给基类

```
public class Cycling: BaseEvent

    {
        public Cycling() : base(EventValue.Swimming)
    } 
```

3) 向 BaseEvent 添加构造函数，同时添加 Event 属性

```
public class BaseEvent
{
    public BaseEvent(EventType type)
    {
        Event = type;
    }

    EventType Event { get; set; }
    DateTime EventDate ....
} 
```

4）然后将类型列表绑定`List<BaseEvent>`到您的控件并在 OnItemDataBound 事件中根据 Event 属性值呈现您想要的任何内容

# java - 再次读取同一文件时的内存管理

> ID：10832912
> 
> 赞同：0
> 
> 时间：2012-05-31T11:43:27.343
> 
> 标签：java, linux, memory

我想知道linux在一遍又一遍地读取文本文件时是否会在内存中保留一些东西（以便下次加快速度）？我没有修改文本文件。只是阅读。

谢谢 ！

雷米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:48:45.793

是的，Linux 内核会将未使用的内存分配给[缓冲磁盘访问](http://linux.about.com/od/lsa_guide/a/gdelsa44.htm)（这就是为什么如果你使用`top`你会看到，在积极使用的情况下，你通常看不到多少可用 RAM）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:51:12.457

在 linux 内核中，read() 系统调用将您的数据加载到页面缓存中，如果下次您在同一位置执行 read() 时该数据仍然存在，那么是的，它将从此缓存中读取并加快速度.

您可以在本[教程](http://www.linux-tutorial.info/modules.php?name=MContent&pageid=310)中阅读更多内容，只需在 google 和其他搜索引擎中进行研究即可。

# jquery - 有关 Flot plothover 的更多信息

> ID：10832925
> 
> 赞同：1
> 
> 时间：2012-05-31T11:44:26.203
> 
> 标签：jquery, flot

是否可以在 Flot plothover 中显示更多信息而不是

```
 x = item.datapoint[0]
 y = item.datapoint[1] 
```

我将在我的数据中添加 3 个信息，例如：y、x、someinfo

```
[1337341819000, 7.00000000, 3.95000000] 
```

第一个是日期，第二个是金额，第三个是我将在悬停中显示的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T16:21:24.047

我的数据点中包含很多信息，例如工具提示、链接 ID 等。

示例数据点：`[1325980800000,5,1,"6 x 4mg patch", 3]`

示例绘图：

```
placeholder.bind('plothover', function (event, pos, item) {
    if (item && (item.series.type == 's_points' || item.series.type == 't_points')) {
        showTooltip(item.pageX, item.pageY, item.series.data[item.dataIndex][3]);
        $('canvas').css('cursor', 'pointer');
    } else {
        $('[id^="pointTooltip"]').remove();
        $('canvas').css('cursor', 'auto');
    }
}); 
```

您只需要按顺序按索引查找该数据点，然后从任何数组中提取您需要的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T13:28:11.827

Item 不仅包括数据点，还包括它的系列以及该系列在数据数组中的点的索引。在[API 文档](http://people.iola.dk/olau/flot/API.txt)中搜索“plothover”以查看完整参考。

要添加更多信息，您可以：

1.  构建从系列/索引到附加信息的外部映射，然后在悬停处理程序中进行查找

2.  提供一个修改 datapoints.format 的 processRawData 钩子（如 processRawData 下的文档中所述）以添加第三个非数字值，然后将显示在 item.datapoint 中。这种方法需要更多的工作，但会得到你正在寻找的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T21:19:33.237

我使用了类似于下面代码的东西：

`enter code here`

```
function showTooltip(x, y, contents) {
            $('<div id="tooltip">' + contents + '</div>').css( {
                position: 'absolute',
                display: 'none',
                //float: 'left',
                top:  y - 40,
                left: x - 30,
                border: '1px solid #fdd',
                padding: '2px',
                'background-color': '#eee',
                opacity: 0.80
            }).appendTo("body").fadeIn(200);
         }

        var previousPoint = null;
        $("#divname").bind("plothover", function (event, pos, item){
            $("#x").text(pos.x.toFixed(2));
            $("#y").text(pos.y.toFixed(2));
            if (item) {
                if (previousPoint != item.dataIndex){
                    previousPoint = item.dataIndex;

                    $("#tooltip").remove();
                    var x = item.datapoint[0].toFixed(2),
                        y = item.datapoint[1].toFixed(2);

                        showTooltip(item.pageX, item.pageY,
                                item.series.label +"- "+ y);
                                                    }
                    }
                else {
                    $("#tooltip").remove();
                    previousPoint = null;
                    }

            }); 
```

# json - 读取 Windows phone 7 联系人并以 json 格式存储

> ID：10832929
> 
> 赞同：0
> 
> 时间：2012-05-31T11:44:29.120
> 
> 标签：json, windows-phone-7, serialization, contacts

我是 wp7 编程的新手，我想知道如何在 wp7 中以 json 格式存储所有联系人，包括名字、姓氏、电子邮件和电话号码。现在我能够读取这些东西并存储在隔离的存储文件中，但我需要它们作为 Json。

在此先感谢，任何帮助将不胜感激。

嗨，这是我的代码，但现在我面临从 mycontacts 类的数据成员中获取值以便可以将其传递给 json 序列化程序的问题。你能帮我解决这个问题吗？我想将值存储在对象中，以便可以使用您提供的方式将其转换为。

private void ButtonContacts_Clk(object sender, RoutedEventArgs e) { Contacts cContacts = new Contacts(); cContacts.SearchCompleted += new EventHandler(ContactsSearch); cContacts.SearchAsync(String.Empty, FilterKind.DisplayName, null); }

```
 void ContactsSearch(object sender, ContactsSearchEventArgs e)
    {
        for (int i = 0; i < e.Results.Count(); i++)
        {
            var ContactsData = from m in e.Results
                      select new mycontacts
                      {
                          DisplayName = m.DisplayName,
                          PhoneNumber = m.PhoneNumbers.FirstOrDefault()  
                       };
        }
    }

}

public class mycontacts
{
   public String fname { get; set; }
   public String lname { get; set; }
   public String DisplayName { get; set; }
   public String[] email { get; set; }
   public Phone[] phone_num;
}
public class Phone
{
    public String number { get; set; }
    public int type { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:02:26.047

这是在 windows phone 中将对象转换为 JSON 字符串的简单代码片段：

```
Contact c = new Contact("FirstName", "LastName", "email@email.com", "9808928");
/// Serialize to JSON
DataContractJsonSerializer serializer = new DataContractJsonSerializer(c.GetType());
MemoryStream ms = new MemoryStream();
serializer.WriteObject(ms, c);
string json = Encoding.Default.GetString(ms.ToArray()); 
```

希望这可以帮助！

# java - 如何使用 Java Process 读取 mysql 控制台输出

> ID：10832936
> 
> 赞同：1
> 
> 时间：2012-05-31T11:44:49.983
> 
> 标签：java, mysql, windows, console

我目前正在使用 Java 编写一个 Windows shell 模拟器。当我使用 Process.getOutputStream() 方法读取和显示程序的输出时，大多数程序似乎都可以正常工作。当我从我的程序运行 MySql 控制台时，这似乎并不适用。MySql 似乎没有打印到默认的系统控制台。

如何连接到 MySql 控制台以显示其输出并允许用户通过我的模拟器提供输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-19T09:47:31.807

我认为有两个问题需要解决。首先是救援输出，您可以使用这篇文章（[http://www.javaworld.com/article/2071275/core-java/when-runtime-exec---won-t.htm](http://www.javaworld.com/article/2071275/core-java/when-runtime-exec---won-t.htm)）来了解救援输出。所以我使用命令行通过 switch -e 来拯救 mysql 命令行软件的输出：

```
 try {
                FileOutputStream fos = new FileOutputStream("c:/test.txt");
                Runtime rt = Runtime.getRuntime();
                Process proc = rt.exec("mysql.exe -u root -e \"select * from table_name\" database_name");

                StreamGobbler errorGobbler = new StreamGobbler(
                        proc.getErrorStream(), "ERROR");

                StreamGobbler outputGobbler = new StreamGobbler(  proc.getInputStream(), "OUTPUT", fos);

                errorGobbler.start();
                outputGobbler.start();

                int exitVal = proc.waitFor();
                System.out.println("ExitValue: " + exitVal);
                fos.flush();
                fos.close();
            } catch (Throwable t) {
                t.printStackTrace();
            } 
```

# java - Axis2 在名为类的模式中使用 wsdl2java 和属性生成失败

> ID：10832937
> 
> 赞同：1
> 
> 时间：2012-05-31T11:44:56.360
> 
> 标签：java, axis2, axis

我有一个巨大的遗憾：我正在尝试从axis2生成一个带有wsdl2java的WS客户端。问题是：在底层架构中是以下定义：

```
<xsd:attribute name="Class" type="ClassType"> 
```

这导致生成一个 java 类，其中定义了一个属性“类”并声明了一个 javabean 样式的访问器：

```
ClassType getClass () 
```

好吧，你可以看到问题;）

getClass 已经被 Object 继承并声明为 final - 那么如何通过使用轴来解决这个问题？

非常感谢您的帮助，我真的被困在这里了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:40:40.963

以下命令为我解决了这个问题：

```
wsdl2java.bat -uri PHub.wsdl -d jaxbri -ssi 
```

由于默认绑定是 ADB，因此我提供了 JAXB 样式的绑定来解决问题。JAXB 也像 ADB 样式一样生成类，但是生成的实例变量被命名为“clazz”，因此生成的 getter 被命名为 getClazz()（而不是 getClass，Object 已经提供了 finalized 并且 ADB 尝试覆盖失败的部分）

# c++ - 为什么匿名命名空间内的函数/对象有外部链接？

> ID：10832940
> 
> 赞同：16
> 
> 时间：2012-05-31T11:44:57.373
> 
> 标签：c++

为什么在匿名命名空间中定义的符号（函数和变量）没有与 static 关键字一样的内部链接？如果一个功能在外部不可见/不可访问，那么有外部链接的原因是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-31T11:53:45.777

在 C++03 中，禁止将具有内部链接的名称用作模板参数[*]。因此，未命名命名空间中的大多数事物的名称都具有外部链接，以允许它们与模板一起使用。您可以通过声明它在未命名的命名空间中显式地给出名称内部链接`static`，就像在命名或全局命名空间中一样。

这两件事在 C++11 中都发生了变化——未命名命名空间中的名称默认具有内部链接 (3.5/4)，并且具有内部链接的名称可以用作模板参数。

[*] 对于类型，它必须具有外部链接。对于对象和函数，如果其*地址*用作模板参数，则它必须具有外部链接，尽管例如可以将具有内部链接的 const 整数的*值用作模板参数。*

# javascript - 设置一个 div 显示属性来阻止给它淡入淡出效果

> ID：10832950
> 
> 赞同：0
> 
> 时间：2012-05-31T11:45:34.663
> 
> 标签：javascript, scriptaculous

我需要将 div 的显示属性设置为阻止给出淡入淡出效果，淡入淡出功能不会将 div 的显示属性更改为阻止。所以div是看不到的。我该怎么做？

```
$('lesson-'+tab).setStyle({
display: 'block'
});

<div id='lesson'>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:11:17.110

您可以`FadeIn`将其属性设置为的元素`{display:none}`

```
<div id='lesson'>
</div> 
```

CSS：

```
#lesson{
    display:none;
    height:100px;
    width:100px;
    background-color:red;
} 
```

jQuery

```
$(document).ready(function(){
    $("#lesson").fadeIn(1000);
}); 
```

演示链接[http://jsfiddle.net/uttara/TnHbJ/](http://jsfiddle.net/uttara/TnHbJ/)

# c# - .net 4 应用程序池中的非托管内存

> ID：10832953
> 
> 赞同：1
> 
> 时间：2012-05-31T11:45:42.177
> 
> 标签：c#, asp.net, iis-7, unmanaged-memory

我正在尝试在 .net 4 应用程序中追踪一些非托管内存的来源

（这是好奇心……我没有什么大问题，我只是想知道它是什么）

我的应用程序当前包含 1 个文件：index.html - 包含“hello world”

从内存分析器中，我加载了 index.html 并且它消耗的很少（事实上，配置文件并没有启动 int）

然后我加载 /fish（它不存在），现在突然我们总共使用了大约 57MB，其中 54MB 是非托管内存。

对于一个空的应用程序来说，这似乎有很多内存 - 以及非托管内存中的内容

有一个 2.4MB 的“分配给 .NET 的未使用内存”，这是我完全预料到的。

奇怪的是，如果我将应用程序池切换到.net 2，内存不会以这种方式跳跃

正如我所说，我很好奇，但我在网上找不到任何关于它的信息。

# algorithm - 段树中的数据映射和延迟传播

> ID：10832954
> 
> 赞同：14
> 
> 时间：2012-05-31T11:45:42.650
> 
> 标签：algorithm, data-structures, segment-tree, data-mapping

看起来整个互联网上只有一篇关于 Segment Tree 中延迟传播的好文章，它是： [http ://www.spoj.pl/forum/viewtopic.php?f=27&t=8296](http://www.spoj.pl/forum/viewtopic.php?f=27&t=8296)

我理解仅更新查询节点并标记其子节点的概念。但是我的问题是，如果我先查询子节点然后再查询父节点怎么办。

在这棵树中（连同堆数组中的位置）

```
 0->[0 9]
      1->[0 4]    2->[5 9]
   3->[0 2] 4->[3 4]  5->[5 7] 6->[8 9]
 ..................................... 
```

第一个查询，如果我更新[0 4]，它的数据将被改变，它的孩子将被标记。第二个查询，是段[0 9]的读取状态。

在这里，我面临这个问题。我的段树实现是这样的，每个节点的值是其左右子节点的总和。因此，当我更新节点的值时，我必须更新它的所有父节点。为了解决逻辑问题，现在我正在更新节点的所有父节点（直到它到达树的根）。但这会对性能造成影响，我使用分段树进行快速批量更新的整个目的都被扼杀了。

谁能解释一下，我在使用分段树时哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-20T01:30:15.737

我将惰性更新操作与正常更新操作进行对比，以及这如何改变查询操作。

在正常的单个更新操作中，您更新树的根，然后递归地仅更新树的所需部分（从而为您提供`O(log(n))`速度）。如果您尝试对范围更新使用相同的逻辑，您可以看到它如何恶化`O(n)`（考虑非常广泛的范围，并看到您主要需要更新树的两个部分）。

因此，为了克服这个`O(n)`想法，只有在您真正需要时才更新树（查询/更新先前更新的段，从而使您的更新变得懒惰）。所以这是它的工作原理：

*   树的创建完全一样。唯一的细微差别是您还创建了一个数组，其中包含有关潜在更新的信息。
*   当您更新树的节点时，您还检查它是否需要更新（来自先前的更新操作），如果是 - 您更新它，标记孩子将来要更新并取消标记节点（懒惰）
*   当您查询树时，您还会检查节点是否需要更新，如果需要更新它，请将其标记为子节点，然后再取消标记。

下面是一个更新和查询的例子（解决最大范围查询）。如需[完整代码，请查看本文](http://se7so.blogspot.com/2012/12/segment-trees-and-lazy-propagation.html)。

```
void update_tree(int node, int a, int b, int i, int j, int value) {
    if(lazy[node] != 0) { // This node needs to be updated
        tree[node] += lazy[node]; // Update it
        if(a != b) {
            lazy[node*2] += lazy[node]; // Mark child as lazy
            lazy[node*2+1] += lazy[node]; // Mark child as lazy
        }
        lazy[node] = 0; // Reset it
    }

    if(a > b || a > j || b < i) // Current segment is not within range [i, j]
        return;

    if(a >= i && b <= j) { // Segment is fully within range
        tree[node] += value;
        if(a != b) { // Not leaf node
            lazy[node*2] += value;
            lazy[node*2+1] += value;
        }
        return;
    }

    update_tree(node*2, a, (a+b)/2, i, j, value); // Updating left child
    update_tree(1+node*2, 1+(a+b)/2, b, i, j, value); // Updating right child
    tree[node] = max(tree[node*2], tree[node*2+1]); // Updating root with max value
} 
```

和查询：

```
int query_tree(int node, int a, int b, int i, int j) {
    if(a > b || a > j || b < i) return -inf; // Out of range

    if(lazy[node] != 0) { // This node needs to be updated
        tree[node] += lazy[node]; // Update it
        if(a != b) {
            lazy[node*2] += lazy[node]; // Mark child as lazy
            lazy[node*2+1] += lazy[node]; // Mark child as lazy
        }
        lazy[node] = 0; // Reset it
    }

    if(a >= i && b <= j) // Current segment is totally within range [i, j]
        return tree[node];

    return max(query_tree(node*2, a, (a+b)/2, i, j), query_tree(1+node*2, 1+(a+b)/2, b, i, j));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:48:42.367

当您查询段树中的节点时，您需要确保其所有祖先以及节点本身都已正确更新。您在访问查询节点时执行此操作。

在访问查询节点时，您会遍历从根到查询节点的路径，同时处理所有待处理的更新。由于您需要访问 O(log N) 个祖先，因此对于任何给定的查询节点，您只需执行 O(log N) 个工作。

这是我用于延迟传播的段树的代码。

```
// interval updates, interval queries (lazy propagation)  
const int SN = 256;  // must be a power of 2

struct SegmentTree {

    // T[x] is the (properly updated) sum of indices represented by node x
    // U[x] is pending increment for _each_ node in the subtree rooted at x 
    int T[2*SN], U[2*SN];

    SegmentTree() { clear(T,0), clear(U,0); }

    // increment every index in [ia,ib) by incr 
    // the current node is x which represents the interval [a,b)
    void update(int incr, int ia, int ib, int x = 1, int a = 0, int b = SN) { // [a,b)
        ia = max(ia,a), ib = min(ib,b); // intersect [ia,ib) with [a,b)
        if(ia >= ib) return;            // [ia,ib) is empty 
        if(ia == a && ib == b) {        // We push the increment to 'pending increments'
            U[x] += incr;               // And stop recursing
            return; 
        }
        T[x] += incr * (ib - ia);          // Update the current node
        update(incr,ia,ib,2*x,a,(a+b)/2);  // And push the increment to its children
        update(incr,ia,ib,2*x+1,(a+b)/2, b);
    }

    int query(int ia, int ib, int x = 1, int a = 0, int b = SN) {
        ia = max(ia,a), ib = min(ib,b); //  intersect [ia,ib) with [a,b)
        if(ia >= ib) return 0;          // [ia,ib) is empty 
        if(ia == a && ib == b) 
            return U[x]*(b - a) + T[x];

        T[x] += (b - a) * U[x];           // Carry out the pending increments
        U[2*x] += U[x], U[2*x+1] += U[x]; // Push to the childrens' 'pending increments'
        U[x] = 0;

        return query(ia,ib,2*x,a,(a+b)/2) + query(ia,ib,2*x+1,(a+b)/2,b);
    }
}; 
```

# python - python从值创建新的dict键

> ID：10832956
> 
> 赞同：0
> 
> 时间：2012-05-31T11:45:58.743
> 
> 标签：python, dictionary

我有一个哈希数组，例如：

```
detail = [{'name': 'Adam'}, {'name': 'Jackie'}] 
```

现在我想做的是创建一个新的字典，例如：

```
{'name' : 'Sandra'} 
```

我所做的是：

```
for i in detail:
    for key_in_i in i:
        dict(key_in_i = 'Sandra') 
```

我想得到的是`{'Name': 'Sandra'}`. 但是，如果我这样做，我会得到，`{'key_in_u': 'Sandra'}`因为我已将密钥设置为`key_in_i`. 我不知道如何从 for 循环访问新字典的键值。如果它是在 Ruby 中，我会做`#{key_in_i}`的，它会给我所需的价值。我也试过`new_dict = dict("%s" %key = i[key])`，但它给了我错误`key cannot be the expression`。如果有人能帮我解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:48:13.550

在这种特殊情况下，最简单的解决方案是

```
for i in detail:
    print dict.fromkeys(i, "Sandra") 
```

您还可以使用字典文字：

```
for i in detail:
    for key_in_i in i:
        {key_in_i: "Sandra"} 
```

（不确定您实际上想要实现什么，因为您的示例代码实际上什么也没做。）

# javascript - 用于检测文件下载的 Chrome API

> ID：10832957
> 
> 赞同：3
> 
> 时间：2012-05-31T11:46:09.610
> 
> 标签：javascript, google-chrome, google-chrome-extension

我需要编写一个 Chrome 扩展程序来跟踪文件下载日期和速度。是否有任何 Google Chrome API 来检测文件何时开始/结束下载？

谢谢，-J。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:51:51.267

现在管道里有东西！

[http://developer.chrome.com/extensions/downloads.html](http://developer.chrome.com/extensions/downloads.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:28:42.023

不，在撰写本文时不是。

[Chrome 扩展 API 文档](http://code.google.com/chrome/extensions/api_index.html)目前不包含此类功能。

实验[性下载 API](http://code.google.com/chrome/extensions/trunk/experimental.downloads.html)未涵盖您需要的功能，但可能值得在进行更改时重新检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:31:27.480

跟踪开始和停止可以通过 onCreated/onChanged/search() 来完成，它们已经实现并且可能会在几周左右的时间内从实验版发布到 dev 分支中。我将在 Google Chrome 开发者 G+ 信息流上发布公告。

可以近似跟踪下载速度，但显示在架子和 chrome://downloads 中的速度不能通过当前指定的扩展 api 直接访问。如果存在无法通过近似方法很好地满足的用例，我们将考虑公开信息。

api何时发布到稳定分支还没有确定的计划。

# c# - 从汽车经销商网站提取价格、里程和位置的好方法是什么？

> ID：10832960
> 
> 赞同：-2
> 
> 时间：2012-05-31T11:46:18.393
> 
> 标签：c#, java, machine-learning

我已经爬取了一些汽车网站并试图从这些网站中提取信息。我需要以下信息 - Vin、里程、价格和位置。我尝试了正则表达式方法，但它无法扩展，因为我有大约 20000 个网站要提取。我想尝试机器学习进行提取。

一些上下文：我下载的所有网页都有 vins。我使用正则表达式来找出它。在某些网页中，价格表示为以下任何词 - 价格，市场价格，eprice，互联网价格，MSRP。有一些价格文本被划掉，并提供另一个较低的价格，以防打折。我希望我的程序考虑到这一点，并忽略划掉的价格考虑其他价格。里程表示为里程或里程。

我想过使用 wrapperduction ，但是如果网站更改了网站的模板，那么这种方法将不起作用。此外，这种方法需要时间来为每个网站的每个模式训练一个分类器。

那么我应该使用什么样的方法或算法来从网页中提取价格里程和位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:51:21.343

有不同的方法来解析一个 html 站点：

1.  你可以使用正则[表达式](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

2.  [XPath](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C)也可用于选择内容

3.  但最好的方法是使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)

**HTML 敏捷性示例：**

```
var doc = new HtmlWeb().Load(url);
var comments = doc.Descendants("div")
                  .Where(div => div.GetAttributeValue("class", "") == "comment"); 
```

[在这里](http://olussier.net/2010/03/30/easily-parse-html-documents-in-csharp/)，您可以找到通过 C# 解析 HTML 字段的不同方法的概述（包括示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:48:42.513

你可以看看[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。它允许您使用 CSS 选择器解析 HTML 并提取必要的信息。它可以使您的代码以某种方式对网站设计和结构的变化更具弹性。

# javascript - 能够在 jQuery 插件中的滚动位置上自动播放

> ID：10832964
> 
> 赞同：3
> 
> 时间：2012-05-31T11:46:37.730
> 
> 标签：javascript, jquery, jquery-plugins

我正在开发我的第一个 jQuery 插件。在其中我需要一个动画来在滚动位置上自动播放。我尝试了很多想法，但没有成功。最后我将自动播放功能放在插件中并在我的 HTML 中调用这。

```
$(document).ready(function () {
    $(window).scroll(function () {
        jQuery.fn.autoplayAnimation();
 }); 
```

有什么方法可以将 document.ready() 或 window.scroll() 放入我的插件中并使其像在 HTML 中一样工作。任何帮助都会很充实..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:52:21.383

您想在页面加载时自动分配事件吗？

你为什么不把它放在你的插件文件中：

```
(function($){

//your plugin code

$(document).ready(function () {
    $(window).scroll(function () {
        jQuery.fn.autoplayAnimation();
    });
});

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:55:37.180

```
$(window).scroll(scrollHandler);
function scrollHandler(){
   jQuery.fn.autoplayAnimation();
} 
```

# spring - 需要了解 spring mvc 项目中的自动装配 bean？

> ID：10832969
> 
> 赞同：0
> 
> 时间：2012-05-31T11:47:17.523
> 
> 标签：spring, hibernate, annotations, autowired

在我的 spring mvc+hibernate+annotations 项目中，我有这三个类

**UserServiceImpl.java**

```
@Service("userService")  
public class UserServiceImpl implements UserService {  
@Autowired  
private UserDAO userDAO;  
//other codes  
} 
```

**UserDAOImpl.java**

```
@Repository("userDAO")  
public class UserDAOImpl implements UserDAO {  
@Autowired  
private SessionFactory sessionFactory;  
//other codes  
} 
```

**注册控制器.java**

```
@Controller  
@RequestMapping("/registration.htm")  
public class RegistrationController {  
@Autowired  
private UserService userService;  
//other codes  
} 
```

在我的**dispatcher-servlet.xml**我添加了以下内容

```
<context:annotation-config />  
<context:component-scan base-package="com.alw.controllers,com.alw.DAOs,com.alw.services" /> 
```

和

```
<bean id="sessionFactory"  
class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"> 
```

当我运行该项目时，出现以下异常：

```
Error creating bean with name 'registrationController':  
Injection of autowired dependencies failed;  
nested exception is org.springframework.beans.factory.BeanCreationException:  
Could not autowire field: private com.alw.services.UserService  
    com.alw.controllers.RegistrationController.userService; 
```

和

```
Error creating bean with name 'sessionFactory' defined in ServletContext resource  
    [/WEB-INF/dispatcher-servlet.xml]:  
Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError:  
    org/apache/commons/pool/impl/GenericObjectPool 
```

有人能指出我在哪里失踪吗？
这已经占用了我今天的一整天。

**编辑：**
我添加了 commons.pool 但没有结果。
我有这些例外。

```
Error creating bean with name 'registrationController':  
Error creating bean with name 'userService':  
Error creating bean with name 'userDAO':  
Error creating bean with name 'sessionFactory' defined in ServletContext  
    resource [/WEB-INF/dispatcher-servlet.xml]:  
Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError:  
Could not initialize class org.hibernate.cfg.AnnotationConfiguration 
```

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:54:55.793

第二个很简单：您缺少包含`org.apache.commons.pool.impl.GenericObjectPool`在 CLASSPATH 中的 JAR。

问题是：哪个类加载器？Java EE 应用服务器具有类加载器的层次结构。我猜您想将该 JAR 添加到您的服务器 /lib 目录中，以便在设置连接池时可以使用它。

第一个我不清楚。尝试将您的基础包更改为“com.alw”，看看是否可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:10:51.733

正如 duffymo 指出的那样，您的类路径中缺少[公共资源池](http://commons.apache.org/pool/)。至于另一个问题，当你说你得到错误 1*​​和*错误 2 时，你的意思是你在不同的时间得到两个不相关的错误，还是你得到*由错误 2 引起的*错误 1。如果你在同时登录，它们可能是同一件事，其中第二个是第一个的原因。

另一方面，您犯了一个常见错误，即将所有服务 bean 放入属于 DispatcherServlet 的上下文中。如果您还在根上下文中声明 bean，那也可能会给您带来问题。请参阅此其他答案及其链接答案，以了解 Spring MVC 应用程序中根上下文和子上下文之间的区别：

[为什么 DispatcherServlet 创建另一个应用程序上下文？](https://stackoverflow.com/questions/7833767/why-dispatcherservlet-creates-another-application-context/7836031#7836031)

尤其：

[Spring-MVC：什么是“上下文”和“命名空间”？](https://stackoverflow.com/questions/7451325/spring-mvc-what-are-a-context-and-namespace/7451389#7451389)

# php - 更好的方法使用 PHP 创建图像缩略图

> ID：10832973
> 
> 赞同：-1
> 
> 时间：2012-05-31T11:47:31.127
> 
> 标签：php, gd, thumbnails

我需要上传三种尺寸的图片以显示在我的页面中：`1-large 2-medium 3-small`现在我有两种选择和两种方式。

1 - 上传图片时，PHP GD 库生成三种尺寸的图片并放在任何文件夹中：示例：在`/images/`文件夹中

```
test-larg.jpg 

test-medium.jpg 

test-small.jpg 
```

和显示：

```
<img src="/images/test-small.jpg" alt=""> 
```

2 - 我上传原始图像并放在任何文件夹中。然后，对于每种尺寸（大/中/小），使用图像中的 GD 库生成图像。例如：[TimThumbs](http://www.darrenhoyt.com/2008/04/02/timthumb-php-script-released/) / [phpthumbs()](http://phpthumb.sourceforge.net)等...

方法 ：

```
<img src="/scripts/timthumb.php?src=/images/whatever.jpg&h=150&w=150&zc=1" alt=""> 
```

更好的方法 ？更好的选择？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:01:38.833

我的建议是结合这两种方法：

*   在图像上传时，什么都不做（如果需要，可以将图像元数据添加到数据库中）
*   在调用“thumbnail.php?src=/images/whatever.jpg&h=150&w=150&foo=bar”时，请查看，如果您已经拥有此尺寸的图像 - 如果是，请将其归还，如果没有，则创建并存储它作为文件

这表示，

*   您只创建真正需要的图像，从而节省 CPU 和存储空间
*   如果删除/替换图像，则必须清理缓存

# python - HTTP 请求标头的 Python 正则表达式

> ID：10832974
> 
> 赞同：2
> 
> 时间：2012-05-31T11:47:40.290
> 
> 标签：python, regex, regex-negation

我有一个关于 Python 正则表达式的问题。我没有太多关于 Python 正则表达式的信息。我正在处理 HTTP 请求消息并使用正则表达式解析它们。如您所知，HTTP GET 消息就是这种格式。

```
GET / HTTP/1.0
User-Agent: Wget/1.12 (linux-gnu)
Accept: */*
Host: 10.2.0.12
Connection: Keep-Alive 
```

我想解析消息的 URI、方法、用户代理和主机区域。我对这份工作的正则表达式是：

```
r'^({0})\s+(\S+)\s+[^\n]*$\n.*^User-Agent:\s*(\S+)[^\n]*$\n.*^Host:\s*(\S+)[^\n]*$\n'.format('|'.join(methods)), re.MULTILINE|re.DOTALL) 
```

但是，当消息出现时

```
GET / HTTP/1.0
Host: 10.2.0.12
User-Agent: Wget/1.12 (linux-gnu)
Accept: */*
Connection: Keep-Alive 
```

由于主机或用户代理的位置已更改，我无法捕获它们。所以我需要一个通用的正则表达式来捕获所有这些，即使主机、方法、uri 的位置在消息中发生了变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:54:25.600

> 可读性很[重要（Python 之禅）](http://www.python.org/dev/peps/pep-0020/)

用于`findall()`您要查找的每个子表达式。这样，您的正则表达式将简短、易读且独立于子表达式的位置。

定义一个简单易读的正则表达式：

```
>>> user=re.compile("User-Agent: (.*?)\n") 
```

使用两个不同的 http 标头对其进行测试：

```
>>> s1='''GET / HTTP/1.0
    Host: 10.2.0.12
    User-Agent: Wget/1.12 (linux-gnu)
    Accept: */*
    Connection: Keep-Alive'''
>>> s2='''GET / HTTP/1.0
    User-Agent: Wget/1.12 (linux-gnu)
    Accept: */*
    Host: 10.2.0.12
    Connection: Keep-Alive'''
>>> user.findall(s1)
['Wget/1.12 (linux-gnu)']
>>> user.findall(s2)
['Wget/1.12 (linux-gnu)'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:57:57.907

像这样将整个标题解析成字典？

```
headers = """GET / HTTP/1.0
Host: 10.2.0.12
User-Agent: Wget/1.12 (linux-gnu)
Accept: */*
Connection: Keep-Alive"""

headers = headers.splitlines()
firstLine = headers.pop(0)
(verb, url, version) = firstLine.split()
d = {'verb' : verb, 'url' : url, 'version' : version}
for h in headers:
    h = h.split(': ')
    if len(h) < 2:
        continue
    field=h[0]
    value= h[1]
    d[field] = value

print d

print d['User-Agent']
print d['url'] 
```

# php - 如何在 php joomla 中将文本框值读入会话？

> ID：10832978
> 
> 赞同：0
> 
> 时间：2012-05-31T11:47:48.453
> 
> 标签：php, joomla

我在这里想要实现的是，当用户在下面的文本框中输入数据时，如何将文本框的值传递给“金额”？

顺便说一句，它是为 Joomla 数据库..

```
<input type="text" id="amount" name="amount" value=0 value="<?php $session =& JFactory::getSession(); $session->set('amount', ''); ?>"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:38:13.187

1.  将输入-标签放入-标签中（将表单的动作设置为POST）
2.  添加提交按钮，用于提交表单
3.  在服务器端，您可以使用`$_POST['amount']`（输入标签的名称）获取值
4.  将此值分配给会话`$_SESSION['amount'] = $_POST['amount']`。或者您可以在代码示例中使用 Joomla 语法：

> $session =& JFactory::getSession();
> 
> ```
> $session->set('amount', $_POST['amount']) 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:13:32.873

获取 POST 值作为

```
$amount = JRequest::getInt('amount'); //filtered as INT
$amount = JRequest::get('amount'); 
```

常见的

```
JRequest::get('post'); //all var send via post method
JRequest::get(); //all var send via post or get method. If u too lazy 
```

对于以下链接的会话检查：http: [//docs.joomla.org/How_to_access_session_variables_set_by_an_external_script](http://docs.joomla.org/How_to_access_session_variables_set_by_an_external_script) [http://ostraining.com/howtojoomla/how-tos/development/how-to-use-sessions-in-joomla](http://ostraining.com/howtojoomla/how-tos/development/how-to-use-sessions-in-joomla)

# c# - 字典序列化反序列化问题

> ID：10832979
> 
> 赞同：1
> 
> 时间：2012-05-31T11:47:50.200
> 
> 标签：c#, json, rest, openrasta

我正在使用`OpenRasta`框架来`REST API`实现。我在类中有字段类型`Dictionary<string, string>`。我正在使用 REST 控制台（Google Chrome 插件）对此进行测试。在 GET 请求资源后，它会以以下格式给我响应。

```
<CustomCheckBoxes>
        <d2p1:KeyValueOfstringstring>
            <d2p1:Key>Check1</d2p1:Key>
            <d2p1:Value>1</d2p1:Value>
        </d2p1:KeyValueOfstringstring>
</CustomCheckBoxes> 
```

但是，当我在 XmlDataContractCodec 中反序列化时对同一资源的 POST 请求使用相同的 XML 时，它会给出异常**。反序列化类型为 Resource 的对象时出错。前缀“d2p1”未定义**

我对我提到的领域有一个特定的要求，所以我使用字典。有没有其他方法来序列化/反序列化字典？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:15:56.937

如果序列化程序只知道该命名空间，则可以在将其传递给反序列化程序之前尝试将其删除。

喜欢`s/d2p1://g`。

# project-management - 自托管项目社区替代方案

> ID：10832982
> 
> 赞同：1
> 
> 时间：2012-05-31T11:48:09.757
> 
> 标签：project-management, wiki, bug-tracking, hosted

我正在寻找在 Intranet 上使用的自托管 CodePlex 克隆。它应该是基于网络的，最好是开源的，但也可以是商业的。

我需要的重要功能是：

*   讨论平台
*   项目文档的 Wiki
*   Mercurial 集成（可选）
*   问题跟踪器（可选）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:14:11.630

我发现了一些替代方案：

*   Redmine（开源，可通过BitNami Installer轻松安装）
*   TRAC（开源）
*   JIRA（商业）
*   GitHub Enterprise（商业）

我目前正在评估Redmine。

# ruby-on-rails - 分页是否可以按某些列排序，但不能按模型上的其他列排序

> ID：10832991
> 
> 赞同：0
> 
> 时间：2012-05-31T11:48:29.167
> 
> 标签：ruby-on-rails, will-paginate

我正在使用 Ruby 1.8.7 对 Rails 2 应用程序进行一些维护。我正在使用 will_paginate。

我有以下问题：调用 current_user.products.paginate(:page => 1, :order => " **updated_at asc** ") 时，它按预期根据产品中的 updated_at 属性进行排序。

但是，当调用 current_user.products.paginate(:page => 1, :order => " **deleted_at asc** ") 时，它不会像预期的那样在released_at 上排序。事实上，我是否指定根据“asc”或“desc”进行排序并不重要，我会返回相同的集合。

updated_at 和released_at 都是模型上定义的属性，存在于数据库中，所有值都非空。模型上没有定义 default_scope。

什么可能导致这种情况以及如何纠正这种情况？

在下面添加 Desc 产品（为简洁起见，我仅列出相关字段）：

| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |

| 发布_at | 日期时间 | 是 | | 空 | |

| 更新时间 | 日期时间 | 是 | | 空 | |

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:44:48.387

Product 模型继承自一个也定义了released_at 属性的模型。release_at 的方法在 Ruby on Rails 代码中被重载，因此如果在 Product 的实例产品上调用 product.released_at，那么它实际上会在父模型上调用released_at 值。因此，从 rails 控制台看，它总是看起来好像 release_at 不是 null 并且包含一个值。

但是，直接查看数据库会显示 Release_at 在 Product 模型中为空，因此，即使 will_paginate 请求正确通过，也不会进行排序，因为值都是相同的（空）。在对 updated_at 属性执行完全相同的查询的情况下，排序有效，因为该属性不为空。我错过了这个，因为我从 Rails 控制台而不是直接在 MySQL 中检查空值。

我的解决方案是在 Product 模型上定义一个 named_scope，它根据父模型中的值进行排序。然后我在命名范围上调用分页函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T12:02:03.010

有时它需要为排序字段定义一个索引才能使其工作。

# php - 简单的 PHP 东西：变量评估

> ID：10832992
> 
> 赞同：0
> 
> 时间：2012-05-31T11:48:29.913
> 
> 标签：php, variables, evaluate

好的，很抱歉，如果之前有人问过这个问题，但我不知道搜索它的关键字。情况是：

```
$sentence = ' $subject is a genius ';
$subject = " Einstein ";
echo( $sentence ); 
```

我怎样才能让它呼应“爱因斯坦是个天才”，但在定义 $subject 之前继续定义变量 $sentence ？

您可能意识到这是使用模板的基本概念。是的，我正在努力实现它。多谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:56:05.570

尝试使用`sprintf`：

```
$sentence = '%s is a genius';
$subject  = 'Einstein';
echo sprintf($sentence, $subject); 
```

这将输出`Einstein is a genius`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:03:26.517

```
$sentence = '$subject is a genius';
$output = str_replace('$subject', ' Einstein ', $sentence);
echo( $output ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:50:38.943

使用 concatenator `.`，这个“粘贴”字符串在一起。

```
$sentence = "is a genius.";
$subject = "Einstein";

echo $subject." ".$sentence; 
```

或者你的意思可能是这个？不太明白“稍后评估”的意思。

```
$sentence = "is a genius.";
$subject = "Einstein";

$fullsentence = $subject." ".$sentence;

echo $fullsentence; 
```

**编辑**我认为您正在寻找 Frietkot 他的答案；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:54:03.517

```
$sentence = "is a genius.";
$subject = "Einstein";

echo '"'. $subject." ".$sentence .'"'; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-31T11:53:36.050

更改变量的顺序并在句子字符串上加双​​引号 变量不会在单引号中求值

```
$subject = " Einstein ";
$sentence = " $subject is a genius ";
echo( $sentence ); 
```

# c - 结构指针转换及其内存分配

> ID：10832993
> 
> 赞同：0
> 
> 时间：2012-05-31T11:48:38.983
> 
> 标签：c

这里的重点是`int header = (((int)(txUserPtr) - 4))`UserTypes和struct指针强制转换的代码说明很有帮助！我应该如何设置传入指针`txUserPtr`，以便`Fun()`跳过以下行。我不想执行`error()`。

```
typedef union UserTypes
{
    SAUser           AUser;
    BUser            BUser;
    SCUser           CUser;
    SDUser           DUser;
} UserTypes;

typedef struct AUser
{
    int              userId;
    int              dbIndex;
    ChannelType      ChanType;
 } AUser;
typedef struct AUser
{
    int              userId;
    int              dbIndex;
    ChannelType      ChanType;
 } AUser;

typedef struct BUser
{
    int              userId;
    int              dbIndex;
    ChannelType      ChanType;
 } BUser;

typedef struct CUser
{
    int              userId;
    int              dbIndex;
    ChannelType      ChanType;
 } CUser;

typedef struct DUser
{
    int              userId;
    int              dbIndex;
    ChannelType      ChanType;
 } DUser;

//this is the function I want to test

void Fun(UserTypes * txUserPtr)
{

   int header = (*((int*)(txUserPtr) - 4));

   //the problem is here
   //how should i set incoming pointer "txUserPtr" so that 
   //Fun() would skip following lines.
   // I don't want to execute error()

        if((header & 0xFF000000) != (int)0xAA000000)
        {
            error("sth error\n");
        }
   /*the following is the rest */ 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:36:54.203

代码依赖于未定义的行为，以及各种实现定义的行为。在您的代码中的某处应该有一个看起来类似于

```
typedef struct 
{
  unsigned int header;
  UserTypes user;
} AHeaderPlusUserTypes; 
```

找到该结构后，修复代码：

```
void Fun (AHeaderPlusUserTypes* txUserPtr)
{
  if((txUserPtr->header & 0xFF000000u) != 0xAA000000u)
  {
    error("sth error\n");
  }
  /*the following is the rest */ 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:47:22.853

这段代码怎么样？

```
void Fun (int header, UserTypes* txUserPtr)
{
  // exactly safe code
  if ( header & 0xFF000000u) != 0xAA000000u ) {
    error("sth error\n");
  }
  /*the following is the rest */ 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:53:28.553

很难理解这个问题。

您希望避免指针在其最重要的位中具有某种位模式，但尚不清楚指针是否仍期望以某种方式包含您可以在已删除代码中访问的某些内容的地址。

我认为，为了解决这个问题，需要更多关于您平台的确切内存映射的信息。