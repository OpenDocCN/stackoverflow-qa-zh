# StackOverflow 问答 11534000-11534999

# javascript - Three.js：将 3d 位置转换为 2d 屏幕位置

> ID：11534000
> 
> 赞同：7
> 
> 时间：2012-07-18T03:45:47.390
> 
> 标签：javascript, three.js

我有一个位置（x，y，z）的3D对象。如何计算该对象的屏幕位置（x，y）？

我已经搜索了它，一种解决方案是我必须找出投影矩阵，然后将 3D 位置点乘以该矩阵，以将其投影到某个 2D 观察表面（计算机屏幕）上。但我不知道如何在 Three.js 中找到这个矩阵。

我尝试了这样的转换函数，但它给出了不正确的结果

```
function Point3DToScreen2D(point3D){
            var screenX = 0;
            var screenY = 0;
            var inputX = point3D.x - camera.position.x;
            var inputY = point3D.y - camera.position.y;
            var inputZ = point3D.z - camera.position.z;
            var aspectRatio = renderer.domElement.width / renderer.domElement.height;
            screenX = inputX / (-inputZ * Math.tan(camera.fov/2));
            screenY = (inputY * aspectRatio) / (-inputZ * Math.tan(camera.fov / 2));
            screenX = screenX * renderer.domElement.width;
            screenY = renderer.domElement.height * (1-screenY);
            return {x: screenX, y: screenY};
        } 
```

预先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-12T17:28:56.217

对我来说，这个功能有效（Three.js 版本 69）：

```
function createVector(x, y, z, camera, width, height) {
        var p = new THREE.Vector3(x, y, z);
        var vector = p.project(camera);

        vector.x = (vector.x + 1) / 2 * width;
        vector.y = -(vector.y - 1) / 2 * height;

        return vector;
    }
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T04:17:02.107

我最后通过这段代码完成了它：

注意：div 参数 = canvas dom 元素。

```
function toScreenXY( position, camera, div ) {
            var pos = position.clone();
            projScreenMat = new THREE.Matrix4();
            projScreenMat.multiply( camera.projectionMatrix, camera.matrixWorldInverse );
            projScreenMat.multiplyVector3( pos );

            var offset = findOffset(div);

            return { x: ( pos.x + 1 ) * div.width / 2 + offset.left,
                 y: ( - pos.y + 1) * div.height / 2 + offset.top };

        }
function findOffset(element) { 
          var pos = new Object();
          pos.left = pos.top = 0;        
          if (element.offsetParent)  
          { 
            do  
            { 
              pos.left += element.offsetLeft; 
              pos.top += element.offsetTop; 
            } while (element = element.offsetParent); 
          } 
          return pos;
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T03:37:54.873

查看演示中的源代码：http: [//stemkoski.github.com/Three.js/Mouse-Over.html](http://stemkoski.github.com/Three.js/Mouse-Over.html)

我相信你感兴趣的对象是 THREE.Projector(); 例如，您可以使用它来自动计算，从屏幕上的鼠标光标位置创建光线并将其投影到场景中。

# mongodb - Amazon EC2 上的 Mongodb

> ID：11534007
> 
> 赞同：3
> 
> 时间：2012-07-18T03:46:22.907
> 
> 标签：mongodb, amazon-ec2

我对Mongodb和EC2了解不多。所以作为外行，我的问题是，如果 mongodb 服务器安装在 STANDARD SMALL EC2 LINUX/UBUNTU 实例上，mongodb 服务器可以处理多少 I/O（每秒 kb/mb/gb）。

是否有任何公式或软件或网站可以告诉服务器的最大强度或输出？

注意：Mongodb 和 EC2 实例以默认模式安装。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T05:47:54.227

没有一个特定的公式可以确定您可以在服务器上运行什么，因为这将根据您的服务器配置以及您的应用程序（和服务器）当时实际在做什么而有很大差异。还将有一个平均负载与峰值负载..这可能要高得多。

例如：

*   如果您的工作数据集大于可用 RAM，您的服务器可能会花费大量时间将文件从磁盘移动到内存
*   如果您在与数据库服务器相同的实例中运行 Web 服务器 .. 两者将争夺可用资源
*   如果您正在进行大量数据更新，您的服务器将使用比相同数量的读取更多的资源
*   如果您在没有适当索引的情况下进行搜索，您的数据库服务器将使用更多资源

对于 MongoDB，一个有用的起点是关于[Optimization](http://www.mongodb.org/display/DOCS/Optimization)的文档。

您应该为资源监控设置一些主动服务（例如[Munin](http://munin-monitoring.org/)），以了解您的应用程序随着时间的推移的使用模式。

要估算您的应用程序可以处理的内容，您还可以尝试使用众多基准测试工具之一进行[负载测试。](https://stackoverflow.com/questions/1449169/tools-to-benchmark-web-services)那里的关键是制定准确的测试配置文件，并确定要解决的潜在性能热点/弱点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T05:42:34.430

TL/DR：在我们的测试中，使用 EBS 的 M1.Large 可以（平均）每秒处理大约 250 个非顺序 i/o 操作。在大小测试中，这通常不会超过每秒 20-30MB。这是 AWS 的“高”IO 设置的一部分。对于 Smalls，它们属于“中等”IO，所以为了安全起见，它大约是该输出的 1/2 到 2/3……尽管在全面披露中，我们还没有对较小的实例进行任何测试。

更长，更漫无边际的答案...

这是一个复杂的问题，因为它最终取决于您的活动数据集有多大，以及它是否明显超过与该实例关联的 1.7GB RAM。不适合内存的数据越多，MongoDB 将不得不去磁盘获取数据的次数越多，并且当数据库等待（臭名昭著的）Amazon IO 返回时，您的应用程序将更多地等待数据库向它请求数据。

此外，使用 MongoDB 的锁，如果您更容易受到较慢的 IO 的影响（即插入和更新......主要是更新），那么争用也会让您受益。

此外，如果您不想担心这些问题并且能够有效地扩展，您可以使用其中一种 MongoDB 托管服务（如 MongoHQ ...免责声明，我是创始人），因为它们允许您有效地扩展随着您的成长，您可以更轻松地在不同级别测试 IO。

因此，RAM 和 I/O 性能是选择实例时需要考虑的重要因素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T04:10:44.757

此 AWS 白皮书可能会有所帮助： http: [//media.amazonwebservices.com/AWS_NoSQL_MongoDB.pdf](http://media.amazonwebservices.com/AWS_NoSQL_MongoDB.pdf)

# r - R中的梯形图与百分比

> ID：11534008
> 
> 赞同：0
> 
> 时间：2012-07-18T03:46:32.673
> 
> 标签：r

我正在使用[plotrix](http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=plotrix:bumpchart)生成梯形图。我想在每条线上显示相关百分比。谁能帮忙。非常感谢。

这是我的代码：

```
library(plotrix) 
args <- commandArgs(TRUE) 
pdfname <- args[1] 
datafile <- args[2] 
pdf(pdfname, width=12,height=12) 
eqdata = read.csv(datafile , header = T,sep=",") 
educattn <- as.matrix(eqdata[2:3]) 
rownames(educattn) <- eqdata$ques 
colnames(educattn) <- c('Cummulative','Current') 
p <- bumpchart(educattn,main="Percentile ranking correlation plot",rank=TRUE,col=rainbow(17),mar=c(5,20,5,20)) 
print(p) 
dev.off() 
```

这是输出![梯形图](../Images/985c9ca44aebbd220eb1849add53269a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:09:13.907

首先，我将停止将其作为脚本运行，并在与 R 的交互式会话中使用代码。然后您可以看到代码在做什么并调整不同的步骤。所以打开命令行参数捕获，然后创建 pdf 并尝试以交互方式工作。未经测试：

```
library(plotrix) 
## define this appropriately
datafile <- "..."

## header is TRUE and sep is "," by default
eqdata = read.csv(datafile) 
educattn <- as.matrix(eqdata[2:3]) 
rownames(educattn) <- eqdata$ques 
colnames(educattn) <- c('Cummulative','Current') 
p <- bumpchart(educattn,main="Percentile ranking correlation plot",rank=TRUE,col=rainbow(17),mar=c(5,20,5,20)) 
print(p) 
```

# applescript - AppleScript 计数和记录条目

> ID：11534010
> 
> 赞同：0
> 
> 时间：2012-07-18T03:46:51.440
> 
> 标签：applescript

我对 AppleScript 非常陌生；我觉得我已经掌握了窍门，但就这个问题而言，假设我知道的不多。

我正在尝试制作一个程序来记录我的日常跑步。到目前为止，我已经用以下代码显示了我一天跑了多远以及花了多长时间（我也有平均速度）：

```
display alert "Do you know how far you ran today?" buttons {"Yes", "No"} default button "Yes"
set ans to button returned of the result
if ans is "No" then
    tell application "Safari"
        activate
        do JavaScript "window.open('maps.google.com/')"; in document 1
    end tell
end if
set dis to text returned of (display dialog "How many miles did you run today?" default answer "")
set tim to text returned of (display dialog "How many minutes did that take?" default answer "")
set speed to tim / dis
display dialog "Today you ran " & dis & " miles in " & tim & "minutes" & return & "at a " & speed & " minute mile pace."
end 
```

我想要的是某种方法来获得一周的平均距离、时间和速度，以及总距离。我还希望它能够跟踪平均距离时间和速度以及总距离。理想情况下，脚本会输出如下内容：

> 今天你以 x 分钟的速度在 x 分钟内跑了 x 英里。您最近以 x 分钟的速度在 x 分钟内平均跑了 x 英里。总共，你跑了 x 分钟，以 x 分钟英里的速度跑了 x 英里

我认为可以通过将最后一天的数据添加到平均数乘以许多条目然后将其除以条目加一来解决此问题，但我不知道如何做到这一点，并且可能有一种更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:02:26.553

这似乎是一个有趣的问题，所以我给你写了一个脚本。您的跑步记录会保存到应用程序支持文件夹中名为 RunningTracker.txt 的文件中。每条记录都是一个由{日期、英里、分钟}组成的列表。

如果您需要修改运行记录文件，您只需将文件读入applescript，根据需要调整列表列表，然后将其写回文件。可以从下面的代码中复制其中的读写部分。

无论如何，这是代码。祝你好运。

```
property appName : "RunningTracker"
set saveFile to (path to application support folder from user domain as text) & appName & ".txt"

-- initial question
display dialog "Do you know how far you ran today?" buttons {"Show Statistics", "No", "Yes"} default button "Yes" with title appName
set ans to button returned of the result
if ans is "No" then
    open location "http://maps.google.com"
    return
else if ans is "Show Statistics" then
    set showStatistics to true
else
    set showStatistics to false
end if

-- get the list of stored records
set theRecords to {}
try
    set theRecords to read file saveFile as list -- get the stored values
end try

-- get todays record and save it to the saveFile
if showStatistics then
    if theRecords is {} then
        display dialog "There are no running records yet. Please create a record before proceeding!" buttons {"Quit"} default button 1 with title appName
        return
    else
        set todaysRecord to item -1 of theRecords
    end if
else
    set todaysRecord to getNewRecord()
    set end of theRecords to todaysRecord
    set success to writeTo(saveFile, theRecords, list, false)
    if not success then
        display dialog "Error: could not write todays data to the saveFile!" buttons {"Quit"} default button 1 with title appName
        return
    end if
end if

-- create todays statistics
set todayDate to item 1 of todaysRecord
set todayMiles to item 2 of todaysRecord
set todayMins to item 3 of todaysRecord
set todaysStatistic to dateString(todayDate) & return & todayMiles & " miles in " & todayMins & " mins ==> " & decimalRound(todayMins / todayMiles, 2) & " mins/mile"

-- create weekly and total statistics
set weeklyMiles to 0
set weeklyMins to 0
set totalMiles to 0
set totalMins to 0
set secondsPerWeek to 7 * days
set weeklyDate to missing value
repeat with aRecord in my theRecords
    set thisDate to item 1 of aRecord
    if (todayDate - thisDate) is less than or equal to secondsPerWeek then
        if weeklyDate is missing value then set weeklyDate to (item 1 of aRecord)
        set weeklyMiles to weeklyMiles + (item 2 of aRecord)
        set weeklyMins to weeklyMins + (item 3 of aRecord)
    end if
    set totalMiles to totalMiles + (item 2 of aRecord)
    set totalMins to totalMins + (item 3 of aRecord)
end repeat
set weeklyStatistic to dateString(weeklyDate) & " - " & dateString(todayDate) & return & weeklyMiles & " miles in " & weeklyMins & " mins ==> " & decimalRound(weeklyMins / weeklyMiles, 2) & " mins/mile"
set totalStatistic to "Total (" & (count of theRecords) & " records)" & return & totalMiles & " miles in " & totalMins & " mins ==> " & decimalRound(totalMins / totalMiles, 2) & " mins/mile"

-- display the statistics
display dialog todaysStatistic & return & return & weeklyStatistic & return & return & totalStatistic buttons {"Quit"} default button 1 with title appName

(*========== SUBROUTINES ============*)
on getNewRecord()
    set dis to text returned of (display dialog "How many miles did you run today?" default answer "" with title appName)
    set tim to text returned of (display dialog "How many minutes did that take?" default answer "" with title appName)
    return {current date, dis as number, tim as number}
end getNewRecord

on writeTo(targetFile, theData, dataType, apendData) -- write to a file
    try
        set targetFile to targetFile as text
        set openFile to open for access file targetFile with write permission
        if apendData is false then set eof of openFile to 0
        write theData to openFile starting at eof as dataType
        close access openFile
        return true
    on error
        try
            close access file targetFile
        end try
        return false
    end try
end writeTo

on decimalRound(theNum, sigDigits) -- round a number
    try
        theNum as number
        sigDigits as number
        set roundedNum to (round (10 ^ sigDigits * theNum) rounding as taught in school) / (10 ^ sigDigits)
    on error
        set roundedNum to theNum
    end try
    return roundedNum
end decimalRound

on dateString(d)
    return ((month of d) as text) & space & day of d & ", " & year of d
end dateString 
```

# apache - .htaccess 将根目录重定向到子域

> ID：11534015
> 
> 赞同：0
> 
> 时间：2012-07-18T03:47:27.027
> 
> 标签：apache, .htaccess

我正在尝试解决我当前共享主机配置的一些烦恼，但是在按照我的意愿设置所有内容时遇到了一些问题。

目前，我有以下文件夹结构：

```
/
/.htaccess
  /example
  /example1
  /example2
  /example3 
```

在共享主机上，主域自动设置为指向根目录。为了将主域指向子域，我在根文件的 .htaccess 中添加了以下内容：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L]

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteCond %{REQUEST_URI} !^/example/
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /example/$1
RewriteCond %{HTTP_HOST} ^(www.)?example.com$
RewriteRule ^(/)?$ example/ [L] 
```

这会正确地重写 URL，以便转到 example.com 显示 /example/ 子目录中的内容。问题是根目录的子目录没有以相同的方式重写，这不是我希望实现的功能。例子：

```
http://www.example.com/            = /example
http://www.example.com/example/    = /example
http://www.example.com/example1/   = /example1
http://www.example.com/example2/   = /example2
http://www.example.com/example3/   = /example3 
```

我想要发生的是以下情况：

```
http://www.example.com/            = /example
http://www.example.com/example/    = /example/example
http://www.example.com/example1/   = /example/example1
http://www.example.com/example2/   = /example/example2
http://www.example.com/example3/   = /example/example3 
```

我对应该发生的事情的理解如下：

1.  收到对[http://www.example.com](http://www.example.com)的请求。
2.  第一个条件不匹配，HTTP_HOST 不匹配 ^example.com$
3.  第二个条件：匹配 ^www.example.com
4.  第三个条件：没有 REQUEST_URI，所以它不匹配 ^/example/
5.  第四和第五：我试过有和没有这些，但似乎并没有改变结果。我的理解是，如果未注释这些行，我会在我现在拥有之前看到不需要的内容（如果文件名和目录存在，则不会进行重写）。
6.  将请求重写到 example.com/example/
7.  第六个条件：将 URL 与特定域匹配。
8.  始终重写以使用该 URL 的 /example/ 子目录。

这似乎确实有效，但如果我尝试访问[http://www.example.com/example2/](http://www.example.com/example2/)，我就会遇到问题。由于 REQUEST_URI 不匹配 /example/，我的想法是它应该重写到 /example/example2，但这显然不会发生。

我无权访问 Apache 配置或设置 VirtualHosts 的能力，所以我希望有某种方法可以使用 .htaccess 规则来做到这一点。任何关于我如何使这个简单任务过于复杂的见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:16:59.157

据我所知，如果根目录中的目录与传入的请求匹配（即，如果根目录中存在 example1，则将 RewriteCond 重写为 /example1 将忽略根目录中的 .htaccess 文件从未触发错误页面）。

我对此的解决方案最终没有我希望的那么优雅，但它似乎正在工作。希望它可以帮助任何偶然发现这个问题的人。

在 example1、example2 和 example3 目录中，我修改了 .htaccess 文件以包含以下内容（根据目录更改 example1）：

```
RewriteCond %{HTTP_HOST} ^(www\.)example\.com$ [NC]
RewriteRule ^(.*)$ /example/example1/$1 [L] 
```

这会强制主域提供我为其创建的子目录中的内容，即使根目录中有匹配的目录。

# jquery - 如何在不使用 for 循环的情况下更改多个 jQuery 选定对象的样式？

> ID：11534017
> 
> 赞同：2
> 
> 时间：2012-07-18T03:47:35.573
> 
> 标签：jquery, loops, for-loop, textarea

基本上，我试图根据文本区域的行数来改变它的高度，这与问题无关，但这里是在不使用 for 循环的情况下向每个文本区域添加事件侦听器的编码：

```
$('textarea').keyup(function(event) {
    this.style.height = Math.floor(this.scrollHeight / 11) + '.1em';
}); 
```

这是我的 for 循环：

```
for (i=0; i<$('textarea').length; i++) {
    $('textarea')[i].style.height = Math.floor($('textarea')[i].scrollHeight / 11) + '.1em';
} 
```

for 循环完美地工作，但只是为了简洁高效的编码，我希望它看起来更像是第一个编码，而不需要 for 循环。

另外，请注意，if 文档中的所有这些都是准备好的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:50:27.637

你可以试试`each()`方法：

```
$('textarea').each(function(){
     $(this).css('height', Math.floor(this.scrollHeight / 11) + '.1em')
}) 
```

[jQuery.each()](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T03:52:09.537

我有点晚了，我同意最佳答案！+1

```
$('textarea').each(function(ele){
  ele.style.height = Math.floor(ele.scrollHeight / 11) + '.1em';
}}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T03:53:14.290

```
$('textarea').keyup(function(event) {

    // change height of all textarea including current
    $('textarea').css('height', Math.floor(this.scrollHeight / 11) + '.1em');

    // But using this like following
    // will change height of current textarea

    // $(this).css('height', Math.floor(this.scrollHeight / 11) + '.1em');

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T04:01:52.240

```
$('textarea').keyup(function() {

      $("textarea").each(function () {
        this.height(Math.floor(this.scrollHeight / 11) + '.1em')

      });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T04:07:59.630

我想通过代码悖论来增强答案。

```
var jq_textarea = $('textarea');
jq_textarea.keyup(function(event) {
    jq_textarea.css('height', Math.floor(this.scrollHeight / 11) + '.1em');
}); 
```

基本上，它可以让您免于每次击键时的 DOM 遍历。

# hosting - 在 Network Solutions 或 Web 托管服务中托管 Google Apps 的 MX 记录是否更好？

> ID：11534018
> 
> 赞同：0
> 
> 时间：2012-07-18T03:47:36.770
> 
> 标签：hosting, mx-record

客户一直在使用网络托管服务托管他们的 MX Record for Google Apps。MX 记录也已由网络托管服务处理。他们正在将他们的网站迁移到新的托管服务。那么问题来了，使用网络解决方案托管 MX 记录还是新的网络托管服务更好？到目前为止，无论哪种方式的争论都是，如果他们使用网络托管服务，他们就有 CPANEL 并且如果需要，支持会很好地提供帮助。另一个论点是 MX 记录应该由为其域托管 DNS 的 Network Solutions 托管，因为由于某种原因，Web 托管服务已关闭，公司的电子邮件仍然可以使用。此外，如果将来网站转移到另一个网络托管服务，

有人有经验或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:13:36.753

幸福的结局是我正在使用 Web 托管服务托管 MX 记录。您不能让 Network Solutions 为指向 Web 托管服务的同一个域托管 MX 记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:20:33.287

通常，网络托管公司会为您提供其名称服务器的 FQDN。您需要做的就是将这些（通常是ns1和ns2形式的两个）放在您的域控制面板中。这样做很容易，因为他们通常会为您处理所有条目（A，MX）。
如果你走这条路，你需要明确要求他们更改 MX 值并将它们指向谷歌，因为你没有使用他们的邮件服务。

由于 Network Solutions 为您提供了一个名称服务器条目，因此您可以自己使用它，而不是依赖它们。正如您自己所提到的，好处是，无论您将来选择切换域时，您都不会在电子邮件中看到任何小的停机时间（尽管要防止这种情况并不难）。在这种情况下，您只需要询问虚拟主机的 A 条目（IP 地址）即可。还要确保指向您拥有的任何子域（www、邮件等）

# iphone - 使用委托和故事板传回数据

> ID：11534020
> 
> 赞同：3
> 
> 时间：2012-07-18T03:47:42.453
> 
> 标签：iphone, xcode, ios5

在我正在开发的应用程序中，我在掌握将委托与 Storyboard 结合使用时遇到了一些问题。我查看了其他一些搜索，包括[Passing data back :Delegate method not called](https://stackoverflow.com/questions/11522428/passing-data-back-delegate-method-not-called)，但无济于事。在这一点上，我已经删除了我的应用程序中的所有内容，除了我的两个视图的基础知识。第一个视图是一个基本视图控制器，带有一个按钮，当按下该按钮时，它会转到模式视图，其中在文本字段中输入一个数据。保存按钮位于该模式视图上，当按下该按钮时，将返回到第一个视图。当然，我也想将输入的数据发送回第一个视图。听起来很简单？当然可以，但在某个地方我无法让它工作。似乎我的代表电话从未打过。这是代码：

MyDayViewController.h - 这是第一个视图控制器

```
#import <UIKit/UIKit.h>
#import "AddRatingModalViewController.h"

@interface MyDayViewController : UIViewController <AddRatingDelegate>

@property (strong, nonatomic) IBOutlet UIButton *addRatingBtn;
@property (strong, nonatomic) IBOutlet UIButton *addAccompBtn;
@property (strong, nonatomic) IBOutlet UILabel *ratingLabel;

@end 
```

MyDayViewController.m

```
#import "MyDayViewController.h"

@implementation MyDayViewController
@synthesize addRatingBtn;
@synthesize addAccompBtn;
@synthesize ratingLabel;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"ToRatingVC"])
{
    NSLog(@"Setting MyDayVC as a delegate of AddRatingMVC");

    AddRatingModalViewController *addRatingController = segue.destinationViewController;
    addRatingController.delegate = self;
}
}

- (void)theSaveButtonTapped:(AddRatingModalViewController *)controller withRating:(NSNumber*) rating
{
NSLog(@"In theSaveButtonTapped method of MyDayVC");
ratingLabel.text = [[NSString alloc]initWithFormat:@"%@", rating];

[self dismissModalViewControllerAnimated:YES];
}

- (void)viewDidUnload
{
[self setAddRatingBtn:nil];
[self setAddAccompBtn:nil];
[self setRatingLabel:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

@end 
```

AddRatingModalViewController.h - 这是模态视图控制器

```
#import <UIKit/UIKit.h>

@class AddRatingModalViewController;

@protocol AddRatingDelegate
- (void)theSaveButtonTapped:(AddRatingModalViewController *)controller withRating:(NSNumber*) rating;
@end

@interface AddRatingModalViewController : UIViewController

@property (nonatomic, weak) id <AddRatingDelegate> delegate;
@property (strong, nonatomic) IBOutlet UITextField *addRatingTextField;

- (IBAction)cancelBtnPressed:(id)sender;
- (IBAction)saveBtnPressed:(id)sender;

@end 
```

AddRatingModalViewController.m

```
#import "AddRatingModalViewController.h"

@implementation AddRatingModalViewController
@synthesize addRatingTextField;
@synthesize delegate;

- (IBAction)cancelBtnPressed:(id)sender {
[self dismissModalViewControllerAnimated:YES];
}

- (IBAction)saveBtnPressed:(id)sender {
NSNumber *ratingARMVC = [NSNumber numberWithInteger:[addRatingTextField.text integerValue]];
NSLog(@"The entered Rating in ARMVC is %@", ratingARMVC);

NSLog(@"Telling the MyDayVC Delegate that Save was tapped on the AddRatingTVC");
[self.delegate theSaveButtonTapped:self withRating:ratingARMVC];

}

- (void)viewDidUnload
{
[self setAddRatingTextField:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

@end 
```

控制台的输出如下：

```
2012-07-16 16:49:16.384 MyDayDelTest[4695:f803] Setting MyDayVC as a delegate of AddRatingMVC
2012-07-16 16:49:39.274 MyDayDelTest[4695:f803] The entered Rating in ARMVC is 7
2012-07-16 16:49:39.275 MyDayDelTest[4695:f803] Telling the MyDayVC Delegate that Save was tapped on the AddRatingTVC 
```

这正好在委托调用应该在 Save 方法中进行之前。任何帮助将不胜感激！我应该说，当我不使用情节提要时，测试可以工作，但我确实需要它来处理情节提要，因为我的应用程序的其余部分都在使用它们。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:41:00.723

@pina0004[在这里找到了答案](https://stackoverflow.com/questions/9618418/implementing-delegation)。总之，如果推送的 VC 确实是 UINavigationController 的根 VC，则 segue destinationViewController 不会指向推送的 VC，而是（不太直观）指向它是根的导航控制器。

这已经解决了，但我认为这是过度使用委托模式的一个例子。在这种情况下，被推送的 VC 需要向原始报告一个字符串，并且问题使用指向原始的委托指针，谁的唯一“委托”工作是保存字符串并关闭模态 VC。我认为有更好的选择：

*   传递模型：与其告诉被推送的 VC 谁是推送的 VC，不如给它一个指向其模型的指针（在本例中为字符串）。让被推送的 VC 更改模型，然后使用几种技术之一让推送者发现模型已更改。
*   消除自己：从方法的命名方式上看不是很明显，但是模态呈现的 VC 可以消除自己。推送的 VC 可以在其 viewWillAppear 方法中检查模型状态，该方法将在推送的 VC 即将消失时运行。
*   [KVO](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html)：原始 VC 可以要求在特定模型属性更改时得到通知。这将使推送发现模型状态更改，并在需要时关闭模态 VC。
*   [通知](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)：推送的 VC 或模型可以发布状态更改通知。推送的 VC 可以订阅并响应。这对于应用程序可能更普遍感兴趣的状态更改特别有用。
*   [块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)：推送的 VC 可以使用块来交出一些在发生重要事情时应该运行的代码。该块在推送 VC 的上下文中运行。这是一种非常易读的方法，可以使因果代码块彼此靠近，甚至共享相同的变量名。

# c++ - 在不增加引用计数的情况下迭代共享指针映射？

> ID：11534028
> 
> 赞同：2
> 
> 时间：2012-07-18T03:49:42.843
> 
> 标签：c++, map, c++11, shared-ptr

我想知道下面的代码是否会导致每个共享指针**的引用计数增加**，或者优化器是否会足够聪明地认识到我们实际上并没有**复制**指针，只是**取消引用**它。

```
std::map<int, std::shared_ptr<foo>> map;

...

for (auto kv : map)
    kv.second->func(); 
```

`kv`是一个`std::pair<int, std::shared_ptr<foo>>`

由于基于范围的 for 循环将返回一个 stack-allocated `std::pair`，它又存储了 的**副本**，`std::shared_ptr`我相信此时引用计数会增加。

但是，很明显这个副本只是临时的，这里的目的不是复制所有权，而只是取消引用当前拥有的副本。

但是由于创建该对会导致*副作用*，即引用计数的增加，这是否意味着优化器将无法优化此副本，或者编译器/优化器编写者识别此用例并能够优化出副本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T03:56:29.640

优化器*无权*优化它，不管它是否可以。

在您的循环中，有两个相同的副本`shared_ptr`；一个存储在`kv`，另一个存储在`map`. 那时有两个人是无法回避的事实。

如果它对您来说*真的很*重要，您可以使用`auto &kv`. 这样，`kv`是对存储在中的对的引用`map`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:59:25.500

我认为在这种情况下增加引用计数是一件“好事”。考虑以下假设代码：

```
for (auto kv : map) {
    releaseAllOtherReferencesToAnyFooThatsNot(kv.second);  // Does what the name says.
    kv.second->tryToCauseACrash();
} 
```

我希望在这种情况下，至少， kv.second 将引用该对象以使其保持活动状态。

# ios - Core Data 逻辑分布？

> ID：11534033
> 
> 赞同：4
> 
> 时间：2012-07-18T03:50:09.270
> 
> 标签：ios, cocoa, core-data, nsmanagedobject, nsmanagedobjectcontext

我使用 Core Data 已经有一段时间了，但我只是问了自己一个问题，我自己总是倾向于创建某种本地存储类来管理 Core Data 模型，这将是一个有参考的单例类对于托管对象上下文，我有创建新托管对象、删除对象、保存等的方法……而且我的托管对象子类实际上只是模型。

但我也经常与其他人的项目一起工作，有时其他开发人员倾向于以类方法的形式向托管对象子类添加更多逻辑，并且有一个非常简单或有时根本没有核心数据“包装器”类。

例如，我通常会这样做：

```
User *me = [[MyDataStore getInstance] createUserWithName:@"Daniel"]; 
```

而其他宁愿有：

```
User *me = [User userWithName:@"Daniel"]; 
```

显然后者更好，并且在我看来更人性化，但最终可能会产生很多零散的代码，但另一方面，我的解决方案意味着你有一个非常大的文件，一旦它通过一定的长度。

我想知道其他人是否可以分享他们对此的看法。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:22:59.917

从 MVC 的角度来看，将逻辑代码放在 NSManagedObject 子类中是更正确的做法。就个人而言，我觉得这样做更合乎逻辑，即这段代码创建了一个新的 User 实例，所以我将它放在 User 类中。

在实践层面上，我曾经讨厌将逻辑代码放在我的 NSManagedObject 子类中，因为如果我修改了我的模型，它会全部消失，但是我现在使用[MoGenerator](https://github.com/rentzsch/mogenerator/)来处理所有这些，我不必担心我的自定义逻辑被覆盖。

最近我倾向于尝试和利用 CoreData 的另一件事是抽象实体。它们不仅非常适合简化您的模型，还可以简化您的自定义逻辑，我的意思是它基本上只是围绕 CoreData 进行子类化。

只是我的意见和目前对我有用的方法，希望它对某人有所帮助，期待任何其他贡献！

# sql - 运行 HiveQL 查询的 Shell 脚本

> ID：11534034
> 
> 赞同：1
> 
> 时间：2012-07-18T03:50:11.003
> 
> 标签：sql, bash, shell, unix, hive

我是 Unix Shell 脚本世界的新手。我想从 unix shell 脚本运行一个简单的 sql 查询并将结果输出到 .txt 文件中，然后将该 .txt 文件作为电子邮件的附件发送。

SQL 查询并将输出通过管道传输到 txt 文件：

```
SELECT count(*) from pds_table > a.txt; 
```

如何从 shell 脚本执行此操作并将输出发送到 txt 文件，然后将该 txt 文件作为电子邮件的附件发送。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T06:48:40.417

```
hive -e 'SELECT count(*) from pds_table' > a.txt 
```

您可以在此处找到更多信息：[https ://cwiki.apache.org/confluence/display/Hive/LanguageManual+Cli](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Cli)

之后，您应该可以使用 mutt 在任何您喜欢的地方发送带有附件的电子邮件。请注意，您需要创建一些漂亮的 preformatted_mail.txt 文件，该文件看起来像您想要的那样。

```
#!/bin/bash
hive -e 'SELECT count(*) from pds_table' > attachment.tmp
mutt -s "Daily logs" -a attachment.tmp some@email.you.like < preformatted_mail.txt 
```

# windows - 适用于 Windows 用户的 Git CRLF

> ID：11534035
> 
> 赞同：3
> 
> 时间：2012-07-18T03:50:14.500
> 
> 标签：windows, git, gitattributes, core.autocrlf

我知道有很多关于这个问题的文章。但我为此苦苦挣扎了几个星期，但没有成功。

我正在尝试使用[github](https://help.github.com/articles/dealing-with-line-endings)上描述的最佳实践。所以我添加了一个 .gitattributes 文件，例如它看起来像这样：

```
*.cs text 
```

而且我已经标准化了所有文件的行尾。现在我有干净的工作副本，没有什么可提交的。但是现在，如果我在任何 Windows 文本编辑器中打开一个罚款并进行一些随机更改，保存文件，撤消该更改，我会看到该文件已更改。我知道这是因为文件现在具有 Windows 样式的行尾。但这是一种可怕的工作方式，文件没有任何变化，我希望 git 在没有`git reset --hard`. 在这种情况下你会推荐什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T06:04:17.843

如果您不想将文件的 eol 样式改回 windows，请不要让 git 执行任何“自动”转换。
因此，与“[来自 GitHub 的最佳实践](https://help.github.com/articles/dealing-with-line-endings)”相反：

```
git config --global core.autocrlf true 
```

如果您真的（我的意思是*真的*）需要一个特定目录中的一组特定文件来获得特定的 eol 样式，请将其添加到所述目录中的[`.gitattributes`文件中，这意味着](http://git-scm.com/docs/gitattributes)**不使用`text=auto`**，只有“ `text eol=lf or crlf`”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:40:48.767

这里真正的问题是：你在做什么，和谁一起工作？

除非你在做 OSS 工作，否则所有这些属性混淆是不值得的。对于有一群人的组织，通过设置关闭自动换行结束转换：

```
core.autocrlf false 
```

这涵盖了大多数情况。

如果你在 GitHub 上有一个子模块，你可以在每个 repo 的基础上进行设置。

# facebook - 使用 Koala 按名字搜索 Facebook

> ID：11534038
> 
> 赞同：2
> 
> 时间：2012-07-18T03:50:32.487
> 
> 标签：facebook, koala, koala-gem

之前，Koala/facebook 会让我这样做：

`graph.search("Ted", {:type => "user"})`

现在，它返回一个空数组。

现在似乎只能通过不常见的名称或全名进行搜索。例如：

`graph.search("Ted Turner", {:type => "user"})`

...返回结果，如下所示：

`graph.search("Lizbeth", {:type => "user"})`.

如何使用考拉按名字搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:17:55.833

这可能是由于 Facebook 处理搜索结果的方式。

基本上，他们所做的是首先获取 (X) 请求的结果。其次，他们根据隐私过滤结果（删除不想被搜索的用户）。最后他们归还剩下的东西。

所以假设考拉要求 100 个用户，而 Facebook 发现的前 100 个用户都设置了隐私来隐藏自己；结果将是 Facebook 返回一个空列表，而考拉什么也没给你。

详细信息可以在这里找到：[https ://developers.facebook.com/blog/post/478/](https://developers.facebook.com/blog/post/478/)

有可能的解决方案，但没有一个真的那么好：1）增加您请求的结果数量（通过选项，或者改为编写 FQL 查询）2）如果您得到一组空的结果，立即使用分页来再试一次，这次是要求下一页。这意味着如果您询问前 100 个用户，什么都得不到，立即询问 101-200 的列表。但是，请确保限制执行此操作的次数，因为您可能不希望它进行太多调用。

我知道，两者都不是很好的解决方案。没有告知您缺少哪些条目的事实使得很难获得正确的集合，因此您可能不得不处理不完整的列表。

# android - 如何清除 EditText 中的选择？

> ID：11534039
> 
> 赞同：11
> 
> 时间：2012-07-18T03:50:47.323
> 
> 标签：android, android-edittext, textselection

您如何以编程方式从 中删除选择`EditText`？我试过了：

```
myEditText.setSelection(selectionEnd); 
```

但这只会在当前选择的末尾创建一个长度为 0 的选择。我也试过`Selection.removeSelection(mySpannable)`了，它只是在文本的开头放置了一个空选择。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T03:58:47.873

呼唤`myEditText.clearFocus();`。我认为这就是你需要的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-27T04:30:34.710

要将选择移到顶部：

```
edit_text.setSelection(0); 
```

要将选择移至底部：

```
edit_text.setSelection(edit_text.getText().length()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:23:20.853

```
EditText message = (EditText) findViewById(R.id.sendText);
String text = message.getText().toString();
message.setText(null); 
```

# vb.net - 在 dll [VB.NET] 中创建一个表单

> ID：11534040
> 
> 赞同：1
> 
> 时间：2012-07-18T03:50:47.947
> 
> 标签：vb.net

我想在 DLL 中创建一个表单，并能够从另一个项目中调用它。我在 Delphi 中做过这个，但我在 VB.NET 中需要这个（刚开始使用它）

[我在德尔福的测试](https://stackoverflow.com/questions/2077208/move-project-into-dll)

[delphi-central.com](http://www.delphi-central.com/formdll.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:53:12.683

您可以添加 System.Windows.Forms 程序集的引用并添加表单。或者您可以直接添加表单。

```
public void ShowSettings()
{
Form1 frm = new Form1();
frm.Show();
} 
```

你可以调用这个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:07:31.170

我认为为此创建一个要好得多`User Control`。**[看这里。](http://msdn.microsoft.com/en-us/library/c316f119%28v=vs.71%29.aspx)**

# apache-pig - 使用 PigLatin 删除重复项

> ID：11534041
> 
> 赞同：9
> 
> 时间：2012-07-18T03:50:58.583
> 
> 标签：apache-pig

我正在使用 PigLatin 过滤一些记录。

```
User1  8 NYC 
User1  9 NYC 
User1  7 LA 
User2  4 NYC
User2  3 DC 
```

该脚本应删除用户的重复项，并保留这些记录之一。类似于 linux 中的独特命令。

输出应该是：

```
User1 8 NYC 
User2 4 NYC 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-19T08:30:47.653

对于您的特定示例 distinct 将无法正常工作，因为您的输出包含所有输入列`($0, $1, $2)`，您只能对具有列`($0, $2)`or`($0)`和 loss的投影执行 distinct `$1`。

为了为每个用户选择一个记录（任何记录），您可以使用 a`GROUP BY`和嵌套`FOREACH`with `LIMIT`。前任：

```
inpt = load '......' ......;
user_grp = GROUP inpt BY $0;
filtered = FOREACH user_grp {
      top_rec = LIMIT inpt 1;
      GENERATE FLATTEN(top_rec);
}; 
```

这种方法将帮助您获得在字段子集上唯一的记录，并限制每个用户的输出记录数，您可以控制这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:00:16.410

Pig 提供 DISTINCT 命令来选择唯一数据。如果要在字段上使用 distinct 在 foreach 嵌套块中使用 Distinct。

# jquery - 剥皮脚本在小提琴中有效，但不是实时的

> ID：11534043
> 
> 赞同：1
> 
> 时间：2012-07-18T03:51:42.550
> 
> 标签：jquery

这是一个[工作小提琴](http://jsfiddle.net/8cypx/12/)的链接，这是它不起作用的[实时页面。](http://apecharmony.co.uk/Untitled-2.php)

单击“单击”后，它应该检查域是否有值，如果没有，它会将 div 装扮成错误框。“点击”将变成一个按钮，并且会有一个输入文本框，但由于没有域，结果应该只是打开对话框。在小提琴中工作但不是实时代码：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.21/themes/base/jquery-ui.css" type="text/css" media="all" />

<div onclick="check_domain_input()">Click</div>

<div id="dialog" title="Attention!" style="display:none">
    Please enter a domain name to search for.
</div>

<script>
    function check_domain_input()
    {        
        $( "#dialog" ).dialog(); // Shows the new alert box.

        var domain_val = document.getElementsByName('domain');

        if (domain_val[0].value.length > 0)
        {
            return true;
        }

        $( "#dialog" ).dialog();

        return false;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:54:09.473

默认情况下，jQuery 不附带 jQueryUI。包括它。

[http://www.jqueryui.com](http://www.jqueryui.com)

编辑：下面的评论暗示混乱。

在您的 jsFiddle 中，在左侧面板上的 jQuery 库选择下方，您勾选了“jquery ui”。这是另一个 javascript 库，是 jQuery 的扩展。您可以在上面的链接下载它。

它有默认的 UI 皮肤，这是您已经包含的 CSS 文件。

您还需要在 jQuery 之后/之后包含 jQueryUI 脚本。

编辑：只需在之后添加这一行`<script src="js/jquery.js"></script>`

`<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>`

# javascript - 如何检测客户端是否能够使用 execCommand() 粗体文本

> ID：11534044
> 
> 赞同：1
> 
> 时间：2012-07-18T03:51:44.513
> 
> 标签：javascript, iframe, wysiwyg, execcommand

我正在使用 execCommand() 从头开始​​制作所见即所得的编辑器。**当用户没有选择**文本时，我想禁用我的格式按钮（对齐、粗体、斜体、下划线、颜色、大小、系列等）。

我在 IFRAME 中有文档代码，在 IFRAME 之外是按钮/脚本。我使 iframe 的文档 contentEditable 并打开了 designMode。

我该怎么做才能确定是否选择了任何文本？

如果可能的话，我怎样才能知道用户的光标是否在 DIV 元素内的任意位置以进行文本对齐？我确信我可以使用它来检测光标是否也在已经加粗的文本或类似文本中。

```
<iframe src="/builder/ajax/load?id=1"></iframe>
<script type="text/javascript">
  function init() {
     // editor is defined in another script as the iframe.contentWindow.document
     editor.body.contentEditable = "true";
     editor.body.designMode = "on";
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:59:23.313

这可以使用我刚刚发现的[queryCommandSupported](http://msdn.microsoft.com/en-us/library/ms536681%28VS.85%29.aspx)和[queryCommandEnabled来完成！](http://msdn.microsoft.com/en-us/library/ms536676%28VS.85%29.aspx)

# 2d - 如何使用 Playstation Mobile SDK 的 SpriteList 处理超过 200 个的精灵？

> ID：11534048
> 
> 赞同：2
> 
> 时间：2012-07-18T03:52:42.563
> 
> 标签：2d, sprite, bullet, playstation

我正在开发包含数百颗子弹的 2D 射击游戏，并根据 PlayStation 移动 SDK 教程实现了一个简单的测试，而降低帧速率是我的主要问题。

场景计划生成继承自 SpriteUV 的子弹对象，并将每个生成的对象添加到 SpriteList 中，如下所示，结果是超过 200 的子弹显示 55~60 fps。以下是我上传到社区的问题和代码的链接。

*   [http://community.eu.playstation.com/t5/GameEngine2D/SpriteList-SpriteUV-and-bullet-sprites-more-than-200/td-p/16539301](http://community.eu.playstation.com/t5/GameEngine2D/SpriteList-SpriteUV-and-bullet-sprites-more-than-200/td-p/16539301)

用 200 颗子弹显示帧速率变慢是正常的，还是我在处理 SpriteUV 和 SpriteList 的方式完全错误？如果没有错，我该如何处理超过 200 个的精灵？(约300~500)

*   Bullet_01.png：8 x 8 像素，2.8 kb（是否太大？）

*   学习教程：[http ://www.gamefromscratch.com/post/2012/06/04/PlayStation-Studio-SDK-Tutorial-Using-SpriteLists.aspx%29](http://www.gamefromscratch.com/post/2012/06/04/PlayStation-Studio-SDK-Tutorial-Using-SpriteLists.aspx%29)

# java - Java中抛出的大量异常

> ID：11534055
> 
> 赞同：0
> 
> 时间：2012-07-18T03:53:26.583
> 
> 标签：java, exception-handling, application-server

我们被要求监控正在运行的批处理作业的性能。批处理作业在 Jeus Application Server 上运行，并且在 48 核 HP UX 服务器上运行。有问题的批处理作业有大约 1500 个线程。发生最多的异常是 NumberFormatException。批处理作业不会终止，它会继续运行。

在使用 HPJmeter 进行监控时，我注意到有数千个异常被抛出。NumberFormat 只是较常见的一种，但还有更多。我有以下问题：

*   这是否表明设计/编码不好？
*   应用服务器通常会处理很多异常而不报告它们吗？
*   这会影响正在运行的应用程序的性能吗？（在大约 45 分钟的运行时间内抛出了大约 11000 个异常）

谢谢，阿迪亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:05:09.100

1.  是的，特别是因为开发人员还没有经历过并且至少将这些包含在自定义异常中。否则，它们应该作为警告输出到日志文件。日志库的存在是有原因的。
2.  如果异常是真实的，那么可能是由于代码被破坏或数据集发生变化。我建议至少跟踪一项工作以了解错误发生的原因。之前在工作中处理过 PB 级的数据，我知道这有多令人沮丧，但如果该工作的输出随后被消耗并给您带来问题，您以后将不得不付出代价。
3.  如果抛出异常的计算路径相对较轻，那么与任何计算相比，来自异常的 IO 和函数调用将花费很多。但是，鉴于您在 45 分钟内只有 11k 异常，即每秒 4 次。当然这很糟糕，但假设没有其他应用程序也执行大量 IO，那么这不会严重阻碍您的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:58:55.493

对此的明显反应将是

1.  您的批处理作业试图做的很多事情很可能没有完成。
2.  但你永远不知道，一个疯狂的开发人员会尝试在一个 catch 块中修复问题，然后吃掉异常（假阴性）
3.  如果代码一直工作到现在并且刚刚开始抛出异常，则可能是您的数据集已更改或开发人员正在抛出正确的异常。

# java - 使用java开发RESTful API时如何控制异常？

> ID：11534062
> 
> 赞同：4
> 
> 时间：2012-07-18T03:54:22.267
> 
> 标签：java, spring, api, rest

我正在为我们的客户开发 RESTful API。
如果发生错误，我将显示错误信息。
错误信息协议如下所示。

```
{ 
    "status": "failure",
    "error": {
        "message": "", 
        "type": "",
        "code": 0000 
    } 
} 
```

在编程层面，如何控制异常？
现在我已经制作了自定义异常类扩展`Exception`类。（不是 RuntimeException）
这种方法好还是不好？使用 RuntimeExcepion 会更好吗？
我的自定义异常类是...

```
public class APIException extends Exception {
    public enum Code {      
        // duplicated exceptions
        ALREADY_REGISTERED(1001),

        // size exceptions
        OVER_KEYWORD_LIMIT(2001),
        OVER_CATEGORY_LIMIT(2002),
        TOO_SHORT_CONTENTS_LENGTH(2003),
        TOO_SHORT_TITLE_LENGTH(2004),

        // database exceptions
        DB_ERROR(3001),

        // unregistered exceptions
        UNREGISTERED_NAME(4001),

        // missing information exceptions
        MISSING_PARAMETER(5001),

        // invalid information exceptions
        INVALID_PARAMETER(6001),
        INVALID_URL_PATTERN(6002);

        private final Integer value;
        private Code(Integer value) {
            this.value = value;
        }
        public Integer getType() {
            return value;
        }
    }

    private final Code code;

    public APIException(Code code) {
        this.code = code;
    }
    public APIException(Code code, Throwable cause) {
        super(cause);
        this.code = code;
    }
    public APIException(Code code, String msg, Throwable cause) {
        super(msg, cause);
        this.code = code;
    }
    public APIException(Code code, String msg) {
        super(msg);
        this.code = code;
    }

    public Code getCode() {
        return code;
    }
} 
```

并使用这样的 APIException 类...

```
public void delete(int idx) throws APIException {
    try {
        Product product = productDao.findByIdx(idx);
        if (product.getCount() > 0) {
            throw new APIException(Code.ALREADY_REGISTERED,
                    "Already registered product.");
        }
        productDao.delete(idx);
    } catch (Exception e) {
        throw new APIException(Code.DB_ERROR,
                "Cannot delete product. " + e.getMessage());
    }
} 
```

哪个更好地制作自定义异常类或使用存在的异常，如非法参数异常。
如果制作自定义异常类更好，我应该在 Exception 或 RuntimeException 之间扩展什么？
请向我推荐像我的情况这样的好例子。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:46:00.477

由于您使用的是 Spring，我建议：

1.  扩展 RuntimeException 并让异常传递到控制器

2.  如果您的异常类对您要在错误 XML 中返回的属性进行建模，请对异常进行注释，以便它可以作为响应返回（包括`@ResponseStatus`如果它们都具有相同的状态代码）。

3.  在您的控制器上实现一个或多个`@ExceptionHandler`方法，以返回异常`@ResponseBody`并确保 HttpServletResponse 正确。就像是：

    ```
    @ExceptionHandler
    @ResponseBody
    public ErrorResponse handleAPIException(APIException e, HttpServletResponse response) {
    // Set any response attributes you need...
        return e; // or some other response
    } 
    ```

# jquery - 在 jQuery Mobile 中仅激活 AJAX 功能

> ID：11534072
> 
> 赞同：0
> 
> 时间：2012-07-18T03:56:02.930
> 
> 标签：jquery, mobile, jquery-mobile

我真的很喜欢 jQuery mobile 的 AJAX 和缓存功能。我目前正在构建一个应用程序，只想包含这些特定功能。将 jQuery mobile 包含到我的 Web 应用程序（css + js）中，完全彻底地破坏了我的布局。

我尝试只包含此功能所需的 CSS，但很难确定什么是必需的，什么不是。

有没有人试过这个？如果是这样，有什么提示吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T09:04:41.083

可以选择使用[http://jquerymobile.com/download-builder/构建自定义库](http://jquerymobile.com/download-builder/)

# jquery - jquery + 查看具有 ID 和自定义数据属性的 div 是否存在

> ID：11534075
> 
> 赞同：1
> 
> 时间：2012-07-18T03:56:39.180
> 
> 标签：jquery, html

![在此处输入图像描述](../Images/0f1766a1de01e08e525082a3fde18939.png)

我有上述情况，我需要能够检查是否存在具有 id=profile 和自定义数据属性的 div - 例如“hobartcity77”。

我一直在测试这段代码：

```
 if($('div#mainContainer div#'+urlType).find('[data-unique='+urlUnique+']').length > 0) {

 } 
```

但是它只匹配第一个 div - 它似乎没有通过列表进行搜索。

我怎样才能得到这个来搜索 div 的列表，看看我是否有匹配项。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:59:38.697

在您的代码中使用`find()`是多余的，因为您的第一个选择器选择了 div 并`find()`尝试在选定的 div 中找到另一个 div，试试这个：

```
if($('#mainContainer div[data-unique='+urlUnique+']').length > 0) { 
```

*请注意，ID 必须是唯一的*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:58:14.317

您不能`id`对多个元素使用相同的。将它们更改`id`为`class`然后继续。

```
if( $('div#mainContainer div[data-unique='+ urlUnique +']' ).length > 0 ) {

} 
```

# android - Android FLAG_ACTIVITY_CLEAR_TOP 无法正常工作？

> ID：11534079
> 
> 赞同：2
> 
> 时间：2012-07-18T03:56:53.790
> 
> 标签：android, android-intent, android-activity, flags

我真的不明白所有这些标志是如何工作的，因为我完全按照文档所说的去做，但这并没有解决我的问题。我的活动是这样启动的：（第一个）活动A->活动B->（第二个）活动A。如果我按下按钮，它会返回到活动B->活动A->退出应用程序。现在我想从 Activity B 声明的第二个 Activity A 中，当按下返回时，它将跳过 Activity B 和第一个 Activity A，并立即退出应用程序。这是代码：

从 A 到 B：

```
TabActivityGroupAbs parentActivity = (TabActivityGroupAbs) ((Activity) ctx).getParent();
detailIntent = new Intent(parentActivity, B.class);
parentActivity.startChildActivity("BFromA", detailIntent); 
```

从 B 到 A：

```
TabActivityGroupAbs parentActivity = (TabActivityGroupAbs) ((Activity) ctx).getParent();
detailIntent = new Intent(parentActivity, A.class);
detailIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
detailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
parentActivity.startChildActivity("AFromB", detailIntent); 
```

从 B 到 A，我添加了 flags `FLAG_ACTIVITY_CLEAR_TOP`。但它并没有清除任何东西。当我按回时，它仍然转到活动 B，然后又转到 A。我做错什么了？

似乎没有任何标志在起作用。从A到B，我把：

```
detailIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY); 
```

它应该防止 B 被放入活动堆栈。但事实并非如此。从第二个活动A开始，按回时它仍然回到B。

现在我应该怎么做才能退出应用程序而不是从第二个活动 A 回到 B。

编辑：我忘了提。从B到A，如果我调用finish（）来杀死活动B，然后从第二个活动A，当按回时，它会回到第一个活动A。为什么活动A在这里有2个实例，尽管我设置了FLAG_ACTIVITY_CLEAR_TOP？真的很奇怪。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-01T04:29:38.600

**读一遍，flag_activity_clear_top 的使用永远不会有问题**

以下是关于**Flag_Activity_Clear_Top 用法的简单说明。**

**一种正确使用的衬垫配方：**

***它总是清除调用活动和被调用活动之间的中间活动（如果有的话）。***

这是一个活动流程：

活动 A -> 活动 B -> 活动 C（使用标志活动清除​​顶部转到 D）-> 活动 D

**在上面的序列中，当我们按回到达 D 时，我们将得到 Activity C->Activity B-> Activity A**，***因为在 Activity C 和 Activity D 之间没有中间活动***

**这里一些开发人员的神话是 -**

通过使用 C 中的标志 activity clear top 到达活动 D 后，他们期望从 D 中按下后退键会将他们带到应用程序之外。*这永远不会发生*。

**Flag_Activity_Clear_Top 总是清除两个活动之间的中间活动（如果有）**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T04:11:42.960

```
From B to A, I add the flags FLAG_ACTIVITY_CLEAR_TOP. But it didn't clear anything. When I pressed back, it still went to Activity B, and then A again. What did I do wrong? 
```

`FLAG_ACTIVITY_CLEAR_TOP`清除中间活动而不是以前的活动，要从堆栈中删除活动 B，您必须在调用活动 A 时调用 B 中的完成（）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:10:14.443

您可以使用以下方法来启动和关闭子活动

```
public ArrayList<String> mIdList;
/**
 * Starts an Activity as a child Activity to this.
 * 
 * @param Id
 *            Unique identifier of the activity to be started.
 * @param intent
 *            The Intent describing the activity to be started.
 * @throws android.content.ActivityNotFoundException.
 */
public void startChildActivity(String Id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(Id,
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        mIdList.add(Id);
        setContentView(window.getDecorView());
    }
}

/**
 * This is called when a child activity of this one calls its finish method.
 * This implementation calls {@link LocalActivityManager#destroyActivity} on
 * the child activity and starts the previous activity. If the last child
 * activity just called finish(),this activity (the parent), calls finish to
 * finish the entire group.
 */
@Override
public void finishFromChild(Activity child) {
    LocalActivityManager manager = getLocalActivityManager();
    int index = mIdList.size() - 1;

    if (index < 1) {
        finish();
        return;
    }

    manager.destroyActivity(mIdList.get(index), true);
    mIdList.remove(index);
    index--;
    String lastId = mIdList.get(index);
    Intent lastIntent = manager.getActivity(lastId).getIntent();
    Window newWindow = manager.startActivity(lastId, lastIntent);
    setContentView(newWindow.getDecorView());
} 
```

例子：

```
startChildActivity("Merchants", new Intent(this,MerchantScreen.class)); 
```

# c++ - C++ - 用 %20 替换空格

> ID：11534081
> 
> 赞同：1
> 
> 时间：2012-07-18T03:57:12.330
> 
> 标签：c++, visual-c++

我正在寻找一种方法来准备用作 URL 的字符串。

代码的基础是您输入您要查找的内容，然后它会打开一个浏览器并显示您输入的内容。我正在学习 C++，所以这是一个学习程序。请尽可能具体，因为我是 C++ 新手。

这是我正在尝试做的事情：

```
cin >> s_input;
transform(s_input.begin(), s_input.end(), s_input.begin(), tolower);
s_input = "start http://website.com/" + s_input + "/0/7/0";
system(s_input.c_str()); 
```

但我试图用“%20”替换用户输入的所有空格。我以这种方式找到了一种方法，但它一次只能处理一个字母，我需要使用完整的字符串而不是字符数组来完成。这是我尝试过的方法：

```
cin >> s_input;
transform(s_input.begin(), s_input.end(), s_input.begin(), tolower);
using std::string;
using std::cout;
using std::endl;
using std::replace;
replace(s_input.begin(), s_input.end(), ' ', '%20');
s_input = "start http://website.com/" + s_input + "/0/7/0";
system(s_input.c_str()); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T05:54:13.110

如果您有 Visual Studio 2010 或更高版本，您应该能够使用[正则表达式](http://en.cppreference.com/w/cpp/regex)来搜索/替换：

```
std::regex space("[[:space:]]");
s_input = std::regex_replace(s_input, space, "%20"); 
```

**编辑：**如何使用六参数版本[`std::regex_replace`](http://en.cppreference.com/w/cpp/regex/regex_replace)：

```
std::regex space("[[:space:]]");
std::string s_output;
std::regex_replace(s_output.begin(), s_input.begin(), s_input.end(), space, "%20"); 
```

该字符串`s_output`现在包含更改后的字符串。

您可能必须将替换字符串更改为`std::string("%20")`.

如您所见，我只有五个参数，那是因为第六个应该有一个默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:36:41.043

`std::replace`只能用单个元素替换单个元素（在这种情况下为字符）。您正在尝试用三个替换单个元素。你需要一个特殊的功能来做到这一点。Boost 有一个，叫做[`replace_all`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/algorithm/replace_all.html)，你可以像这样使用它：

```
boost::replace_all(s_input, " ", "%20"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:14:07.080

如果你谷歌：C++ UrlEncode，你会发现很多命中。这是一个：

[http://www.zedwood.com/article/111/cpp-urlencode-function](http://www.zedwood.com/article/111/cpp-urlencode-function)

# python - 如何在 wxpython/python 中恢复最小化的窗口/框架

> ID：11534082
> 
> 赞同：0
> 
> 时间：2012-07-18T03:57:19.087
> 
> 标签：python, wxpython

我在 python 脚本中有 2 帧。一旦第一个最小化，第二个就会显示。关闭第二个后，如何使原始的从最小化到恢复。

到目前为止，这是我的代码：

```
import wx
import wx.media
import os

class MainWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Music Player',size=(900,600), style=wx.MINIMIZE_BOX|wx.SYSTEM_MENU|wx.CAPTION|wx.CLOSE_BOX|wx.CLIP_CHILDREN)
        wx.Frame.CenterOnScreen(self)
        panel=wx.Panel(self)
        panel2=wx.Panel(panel,-1, (0,0), (160,600))
        ##wx.Frame.Maximize(self)
        panel.SetBackgroundColour('grey')
        panel2.SetBackgroundColour('black')

        ##MENU AND STATUS BAR
        status=self.CreateStatusBar()
        menubar=wx.MenuBar()
        file_menu=wx.Menu()
        help_menu=wx.Menu()

        ID_FILE_NEW = 1
        ID_FILE_LOAD = 2
        ID_FILE_EXIT = 3

        file_menu.Append(ID_FILE_NEW,"New Window","This will open a new window")
        file_menu.Append(ID_FILE_LOAD,"Load...", "This will let you choose a song to load")
        file_menu.Append(ID_FILE_EXIT,"Exit","This will exit the program")

        menubar.Append(file_menu,"File")
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, self.newWin, None, 1)
        self.Bind(wx.EVT_MENU, self.Load, None, 2)        
        self.Bind(wx.EVT_MENU, self.Close, None, 3)

##        heading = wx.StaticText(panel, -1, "Music Player",pos=(345,10))
        font1 = wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.BOLD)
        font2 = wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.BOLD)
##        heading.SetFont(font1)

        try:
            self.mc = wx.media.MediaCtrl(self)
        except NotImplementedError:
            raise

        loadButton = wx.Button(panel2, -1, "Load File", pos=(30,10))
        self.Bind(wx.EVT_BUTTON, self.Load, loadButton)

        playButton = wx.Button(panel2, -1, "Play", pos=(30,50))
        self.Bind(wx.EVT_BUTTON, self.Play, playButton)

        pauseButton = wx.Button(panel2, -1, "Pause", pos=(30,90))
        self.Bind(wx.EVT_BUTTON, self.Pause, pauseButton)

        stopButton = wx.Button(panel2, -1, "Stop", pos=(30,130))
        self.Bind(wx.EVT_BUTTON, self.Stop, stopButton)

        self.playbackSlider = wx.Slider(panel, size=(400,45), pos=(310,50))
        self.playbackSlider.SetRange(0,self.mc.Length())
        self.Bind(wx.EVT_SLIDER, self.onSeek, self.playbackSlider)
        self.playbackSlider.SetBackgroundColour('grey')

        self.volumeCtrl = wx.Slider(panel, value=50, minValue=0, maxValue=100, style=wx.SL_VERTICAL|wx.SL_INVERSE, pos=(180,40))
        self.volumeCtrl.Bind(wx.EVT_SLIDER, self.onSetVolume)

        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.onTimer)
        self.timer.Start(100)

        self.Bind(wx.EVT_ICONIZE, self.newWin2)          

        self.st_file = wx.StaticText(self, -1, "**Nothing** Please click the \"Load File\" Button", pos=(310,10))
        playing = wx.StaticText(self, -1, "Now Playing: ", pos=(165,10))
        playing.SetFont(font2)
        self.st_file.SetFont(font1)
        playing.SetBackgroundColour('grey')
        self.st_file.SetBackgroundColour('grey')
        playing.SetForegroundColour('white')
        self.st_file.SetForegroundColour('white')

    def newWin2(self, event):
        if self.IsIconized() == True:
            self.new = NewWindow(parent=None, id=-1)
            self.new.Show()

    def newWin(self, event):
            self.new = NewWindow(parent=None, id=-1)
            self.new.Show()

    def Close(self, event):
        box=wx.MessageDialog(None, 'Are you sure you want to exit?', 'Exit program?', wx.YES_NO)
        answer=box.ShowModal()
        if answer==wx.ID_YES:
            self.Destroy()

    def Load(self, event):
        dlg = wx.FileDialog(self, "Choose a media file", "songs", "", "*.*", wx.OPEN)
        if dlg.ShowModal() == wx.ID_OK:
            path = dlg.GetPath()
            self.doLoadFile(path)
        dlg.Destroy()

    def doLoadFile(self, path):
        if not self.mc.Load(path):
            wx.MessageBox("Unable to load %s: Unsupported format?" % path, "ERROR", wx.ICON_ERROR | wx.OK)

        else:
            folder, filename = os.path.split(path)
            self.st_file.SetLabel('%s' % filename)
            self.mc.SetBestFittingSize()
            self.mc.Play()

    def Play(self, event):
        self.mc.Play()
        self.playbackSlider.SetRange(0,self.mc.Length())

    def Pause(self, event):
        self.mc.Pause()

    def Stop(self, event):
        self.mc.Stop()

    def onSetVolume(self, event):
        self.currentVolume = self.volumeCtrl.GetValue()
        self.mc.SetVolume(float(self.currentVolume) / 100)

    def onTimer(self, event):
        offset = self.mc.Tell()
        self.playbackSlider.SetValue(offset)

    def onSeek(self, event):
        offset = self.playbackSlider.GetValue()
        self.mc.Seek(offset)

class NewWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self, parent, id, 'New Window', size=(130,150), pos=(0,0), style=wx.MINIMIZE_BOX|wx.CLOSE_BOX)
        self.SetBackgroundColour('grey')

        playButton = wx.Button(self, -1, "Play", pos=(5,10))
        self.Bind(wx.EVT_BUTTON, self.Play, playButton)

        pauseButton = wx.Button(self, -1, "Pause", pos=(5,40))
        self.Bind(wx.EVT_BUTTON, self.Pause, pauseButton)

        stopButton = wx.Button(self, -1, "Stop", pos=(5,70))
        self.Bind(wx.EVT_BUTTON, self.Stop, stopButton)

        closeButton = wx.Button(self, -1, "Close", pos=(5,120))
        self.Bind(wx.EVT_BUTTON, self.Close, closeButton)

    def Play(self, event):
        self.mc.Play()
        self.playbackSlider.SetRange(0,self.mc.Length())

    def Pause(self, event):
        self.mc.Pause()

    def Stop(self, event):
        self.mc.Stop()

    def onSetVolume(self, event):
        self.currentVolume = self.volumeCtrl.GetValue()
        self.mc.SetVolume(float(self.currentVolume) / 100)

    def Close(self, event):
        self.Destroy()
        ################## I WANT TO ADD WHATEVER I NEED TO HERE TO RESTORE THE MINIMIZED FRAME AFTER THE CLOSE BUTTON IS PRESSED.

##RUN##

if __name__=='__main__':
        app=wx.PySimpleApp()
        frame=MainWindow(parent=None,id=-1)
        frame.Show()
        app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:07:46.030

```
the_app.SetTopWindow(wxFrameObject)
wxFrameObject.Maximize() 
```

可能有用......这就是我们使用的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:33:44.203

您应该使用 myFrameObject.Raise() 使其脱离最小化状态。wx.STAY_ON_TOP 标志用于使框架在未最小化时保持在所有其他框架的顶部，但如果您已最小化框架，它将不会做任何事情。

# scala - 无法使用 Akka Teskit 找到 Within 方法

> ID：11534085
> 
> 赞同：0
> 
> 时间：2012-07-18T03:57:37.447
> 
> 标签：scala, intellij-idea, akka

我看到很多文档引用了 TestKit 上的“Within”方法。我的工具似乎有问题，因为我无法导入该方法。

使用示例： [http](http://doc.akka.io/docs/akka/2.0.2/scala/testing.html) ://doc.akka.io/docs/akka/2.0.2/scala/testing.html 至少从 2.0 起应该可用 [http://doc.akka.io/api/akka/2.0 /akka/testkit/TestKit.html](http://doc.akka.io/api/akka/2.0/akka/testkit/TestKit.html)

![在此处输入图像描述](../Images/69a9ee7404f6d66a46e33375babebec5.png)

# objective-c - 为什么我真的需要使用协议

> ID：11534090
> 
> 赞同：0
> 
> 时间：2012-07-18T03:58:37.180
> 
> 标签：objective-c, ios

> **可能重复：**
> [了解 Objective-C 中的 @Protocols](https://stackoverflow.com/questions/5738428/understanding-protocols-in-objective-c)
> [Objective C 协议的使用](https://stackoverflow.com/questions/7617615/objective-c-protocols-usage)

我刚开始学习目标 C，我似乎不太了解协议。我对 Objective-C 中的协议的理解是，您指定一些方法定义而无需实际为其编写代码。这意味着，无论谁决定继承我的类，都必须实现我所需的所有方法。

我的问题是，协议是否会产生额外的开销，而这并不是真正需要的。如果我在我的新类中需要一个方法，我可以实现它。为什么我需要从协议继承？

为什么我不能忽略使用协议而只根据需要创建方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:03:59.510

除此之外，协议是让编译器帮助您避免常见错误的一种方式。在这种情况下，您可以指定一个类将调用另一个类（通常是委托）的特定方法。然后编译器将检查以确保其他类（委托）实际实现了这些方法，如果没有，则给您一条警告消息。由于未定义的选择器（方法），在编译时获取消息比在运行时崩溃更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:13:51.887

> 我的问题是，协议是否会产生额外的开销，而这并不是真正需要的。

没有额外的开销。

> 如果我在我的新类中需要一个方法，我可以实现它。为什么我需要从协议继承？

好吧，如果这是满足您需求的理想路径，您当然可以为您的通用实现声明一个子类。如果您尝试这样做，您可能会遇到我在下面概述的问题。

协议经常被使用，因为它们不是实际的物理类型。它是方法和/或其他协议的接口。通常，它们既小又专业。由于 objc 不提供多重继承，因此协议对于短扩展非常方便。

查看作为复杂子类并继承一个或多个协议的类型；举`NSString <NSCoding, NSCopying, NSMutableCopying, NSObject>`个例子。知道 objc 使用单继承，请考虑如何实现此类并从所有这些协议“继承” - 然后考虑在为所有 Foundation 类型实现此之后传递这些类型时它对客户端的影响。类层次结构和接口变得非常混乱。许多类中的变体数量将爆炸式增长，以容纳所有这些类型作为参数。大多数人会在那之前停下来，然后放弃类型安全——这也是一个非常糟糕的主意。使用协议，您可以在一个简单的语言功能中“实现此接口”和类型安全（多重继承很快变得非常难看）。

# xslt - 在转换之前是否有一种 DRY 方法来转换值？

> ID：11534091
> 
> 赞同：0
> 
> 时间：2012-07-18T03:58:40.267
> 
> 标签：xslt

可以说我有以下xml。

```
<root>
  <data>
    <a>ATTITUDE_ANNOYED</a>
    <b>ATTITUDE_CAUTIOUS</b>
    <c>25</c>
    <d>30</d>
  </data>
</root> 
```

忽略我的输出模式，我希望我的输出将 A 呈现为“谨慎”（比恼火高一级），B 呈现为“高兴”（比谨慎高一级），我想对 C 和 D 执行一些数学运算将值转换为稍微不同的东西。

我在这里看过一堆类似的问题（而且我是 XSLT 的新手，所以也许我不太明白）但是很多解决方案似乎是“在线”的，即您修改转换它的结果。这没关系，但在我的真实示例中，有很多这些值，我不想在多个位置（DRY）执行完全相同的转换。我只想在开始转换之前或多或少地预处理整个文档并将一堆值转换为其他值（仅使用几个公式）。

实现这一目标的最佳方法是什么？我对性能不是特别感兴趣，所以有没有一种方法可以运行先前的转换以轻松转换特定值而不修改结构？

更新：（DevNull 询问我的输出需求）输出并未完全确定。我正在尝试帮助 CivFanatics 的一个小组制作一份指南，说明其值源自 xml 文件的 AI 之间的差异。有大量的领导者和大量的价值观需要转换，目前每个领导者需要花费 2 个小时，最终的格式还没有决定，所以我想我们都可以通过使用类似的东西来节省时间XLST。

这是我正在处理的演示的粗略示例。

```
<xsl:template match="data"> 
  <h3>Attitude Thresholds</h3>
  <table border="1">
    <tr><td>Will open borders</td><td><xsl:value-of select="a"/></td></tr>
    <tr><td>Will trade techs</td><td><xsl:value-of select="b"/></td></tr>
  </table>
</xsl:template> 
```

澄清 A 和 B 是 OpenBordersRefuseAttitudeThreshold 和 TechRefuseAttitudeThreshold。如果这些是 WillOpenBordersAt 和 WillTradeTechAt 而不是 xml 文件中的原始值，则该指南更具可读性，因此我需要将它们微调为最终输出的值。

还讨论了其他转换：

```
iWonderConstructRand -> Builds Wonders

0 -> 0/10
5 -> 1/10
10 -> 2/10
15 -> 3/10
20 -> 4/10
25 -> 5/10
30 -> 6/10
35 -> 7/10
40 -> 8/10
45 -> 9/10
50 -> 10/10 
```

这就是诸如 C 或 D 之类的值。它们的范围在 0-50 之间，为了便于阅读，应该将它们放入 0-10 格式。这些值也有很多。

还有像“GoodieBaddie”这样的转换，从 0 到 10 不等。我们希望将其转换为：

```
0-3  -> Bad(x)
4-6  -> Neutral(x)
7-10 -> Good(x) 
```

其中 (x) 是原始值。我是否在这里使用了正确的工具来完成这项工作，还是处于临界状态？我认为 XLST 将是一个不错的选择，它可以让其他贡献者不必依赖开发人员来更改格式/布局（因为 xlst 比 C# 或 Python 更容易编辑）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:07:46.083

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:attitudes>
   <a val="1">ANNOYED</a>
   <a val="2">CAUTIOUS</a>
   <a val="3">PLEASED</a>
 </my:attitudes>

 <xsl:variable name="vAttitudes" select="document('')/*/my:attitudes/*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[starts-with(., 'ATTITUDE_')]/text()">
  <xsl:variable name="vVal" select=
  "$vAttitudes[. = substring-after(current(), '_')]/@val"/>

  <xsl:value-of select="concat('ATTITUDE_', $vAttitudes[@val = $vVal+1])"/>
 </xsl:template>

 <xsl:template match="*[floor(.) = .]/text()">
  <xsl:value-of select="concat(round(. div 5), '/10')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <data>
        <a>ATTITUDE_ANNOYED</a>
        <b>ATTITUDE_CAUTIOUS</b>
        <c>25</c>
        <d>30</d>
    </data>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <data>
      <a>ATTITUDE_CAUTIOUS</a>
      <b>ATTITUDE_PLEASED</b>
      <c>5/10</c>
      <d>6/10</d>
   </data>
</root> 
```

# javascript - 在jquery中从开始日期计算结束日期

> ID：11534096
> 
> 赞同：0
> 
> 时间：2012-07-18T03:59:18.473
> 
> 标签：javascript, date

我需要在给定开始日期和持续时间的情况下计算结束日期。开始日期是日期，持续时间是年数。所以结束日期将是：`start date + duration - 1 day`。

例如，开始日期是`15/06/2012`，持续时间是 12 个月，那么结束日期是`14/06/2013`。

我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T12:03:03.657

我总是创建 7 个函数来处理 JS 中的日期：addSeconds、addMinutes、addHours、addDays、addWeeks、addMonths、addYears。

你可以在这里看到一个例子：http: [//jsfiddle.net/tiagoajacobi/YHA8x/](http://jsfiddle.net/tiagoajacobi/YHA8x/)

如何使用：

```
var now = new Date();
console.log(now.addWeeks(3));
console.log(now.addYears(1));
console.log(now.addDays(-20)); 
```

这是功能：

```
Date.prototype.addSeconds = function(seconds) {
    this.setSeconds(this.getSeconds() + seconds);
    return this;
};

Date.prototype.addMinutes = function(minutes) {
    this.setMinutes(this.getMinutes() + minutes);
    return this;
};

Date.prototype.addHours = function(hours) {
    this.setHours(this.getHours() + hours);
    return this;
};

Date.prototype.addDays = function(days) {
    this.setDate(this.getDate() + days);
    return this;
};

Date.prototype.addWeeks = function(weeks) {
    this.addDays(weeks*7);
    return this;
};

Date.prototype.addMonths = function (months) {
    var dt = this.getDate();

    this.setMonth(this.getMonth() + months);
    var currDt = this.getDate();

    if (dt !== currDt) {  
        this.addDays(-currDt);
    }

    return this;
};

Date.prototype.addYears = function(years) {
    var dt = this.getDate();

    this.setFullYear(this.getFullYear() + years);

    var currDt = this.getDate();

    if (dt !== currDt) {  
        this.addDays(-currDt);
    }

    return this;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:11:49.373

您不能在 jQuery 中执行此操作，您必须像这样使用 Javascript：

```
<script type="text/javascript">

    // Todays date in milliseconds
    var today=new Date().getTime();

    // Add milliseconds in a year (minus one day) to todays date
    var yearLater=new Date(today + ((31557600 - 86400) * 1000));
    document.write(yearLater);

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:17:51.213

您不需要 jQuery 来添加日期。Javascript 足以做到这一点。

```
var myDate=new Date(year,month,date,0,0,0).getTime();
var day_milli= 1000*60*60*24;
var newDate=new Date(myDate + day_milli * (duration -1));
alert(newDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T06:19:11.513

Javacript Date 对象的一个​​经常被忽略的特性是，将单个日期属性（日期、月份、年份等）设置为超出其正常范围的值将自动调整其他日期属性，以便生成的日期有效。

例如，如果`d`是一个日期，那么您可以在 20 天后根据需要调整月份甚至年份，并将日期设为日期`d.setDate (d.getDate () + 20)`。`d`

使用它，以下函数采用开始日期和持续时间对象并返回指定时间段之后的日期：

```
function dateAfter (date, duration) {
  if (typeof duration === 'number') // numeric parameter is number of days
    duration = {date:duration};

  duration.year && date.setYear (date.getYear () + duration.year);
  duration.month && date.setMonth (date.getMonth () + duration.month);
  duration.date && date.setDate (date.getDate () + duration.date);
  return date;
}

// call as follows :

var date = dateAfter (new Date (2012, 5, 15), {year: 1}); // adds one year
console.log (date);

date = dateAfter (date, {month:5, date: 4});  // adds 5 months and 4 days
console.log (date);

date = dateAfter (date, 7 * 4);  // adds 4 weeks
console.log (date);

// to return the end date asked by the op, use 
var date = dateAfter (new Date (2012, 5, 15), {year: 1, date: -1}); 
```

# javascript - 用 jQuery 组合两个表单输入值

> ID：11534098
> 
> 赞同：1
> 
> 时间：2012-07-18T03:59:24.797
> 
> 标签：javascript, jquery, forms, input

所以我的表单上有一个隐藏字段，其中包含一个 URL（EG - [http://www.domain.com?asset=](http://www.domain.com?asset=)）

我需要做的是在表单提交时从复选框中提取值并将其附加到我隐藏表单中的值，以便结果看起来像：

[http://www.domain.com?asset=123abc](http://www.domain.com?asset=123abc)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:10:07.577

```
$("hiddenfield").val($("hiddenfield").val() + "123abc"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:37:13.847

```
var url = 'http://www.domain.com?asset=',
    jq_checkbox = $('input#my-check-box'), // suppose id of your checkbox is my-check-box
    jq_hidden = $("input#my-hidden-field"), // and id of your hidden field is my-hidden-field
    jq_form = $('form#my-form') // and id of your form is my-form
        .submit(function(){
            jq_hidden.val(url + jq_checkbox.val());
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:38:16.993

简单地在表单提交或单击事件上调用此函数，您希望在此处获得所需的输出，我通过警报检查输出

```
<script>
function check(){

    var checkbox=   $("#checkbox").val();
    var hidden_val= $("#url").val()+checkbox;

        alert(hidden_val);
}
</script> 
```

这里

复选框是复选框 ID url 是隐藏的项目 ID

希望对你有帮助

# screensaver - 减少/压缩屏幕保护程序文件大小

> ID：11534103
> 
> 赞同：0
> 
> 时间：2012-07-18T04:00:06.340
> 
> 标签：screensaver, windows-screensaver

我必须为想要跨分支安装它的客户制作屏幕保护程序。由于带宽限制，屏幕保护程序需要低于 500KB 文件大小。实际屏幕保护程序内容约为 200KB。我尝试的大多数屏幕保护程序实用程序似乎在实际内容之上添加了 1-1.5MB 的开销。

他们共享了一个由其他开发人员完成的 .SCR，大小为 400KB。任何人都可以分享有关实现这一目标的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:04:55.460

您可以尝试使用[UPX](http://upx.sourceforge.net/)`.scr`压缩文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:03:45.170

`.scr`文件只是重命名的`.exe`文件，因此您不必使用特殊工具 - 您可以通过使用您喜欢的任何编程语言编写 Windows 程序来创建一个。

他们必须接受某些命令行参数：

*   `/s`– 以全屏模式启动屏幕保护程序。
*   `/c`– 显示配置设置对话框。
*   `/p ####`– 使用指定的窗口句柄显示屏幕保护程序的预览。

这里有一个示例 C# 项目：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686421.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686421.aspx)

# c# - C# Web 服务，如何接收 JSON

> ID：11534104
> 
> 赞同：4
> 
> 时间：2012-07-18T04:00:35.297
> 
> 标签：c#, javascript, asp.net-mvc, json, web-services

我用 jquery 制作了一个 JSON 字符串，我想将它发送到 C# web api 控制器。

这是 JSON 对象的示例

```
{"Name":"","Type":"4","Meals":["2","3"],"Excludes":["Beef","Chicken"]} 
```

我试图用这样的 URL 发送它

```
API/Recipe/Search?json={"Name":"","Type":"4","Meals":["2","3"],"Excludes":["Beef","Chicken"]} 
```

像这样使用我的控制器：

```
public class RecipeController : ApiController
{

    [HttpGet]
    public string Search(searchObject json)
    {
        return "Asdasd";
    }
 } 
```

像这样

```
 public class RecipeController : ApiController
{

    [HttpGet]
    public string Search(string json)
    {
        searchObject search = (searchObject)JsonConvert.DeserializeObject(json);

        return "Asdasd";
    }
} 
```

但在这两种情况下，控制器都不会拾取它。我正在使用 MVC4。

这是我用来拨打电话的 Jquery。apiLink 是我在上面发布的链接。

```
$.getJSON(apiLink, function (data) {
        var items = [];

        $.each(data, function (key, val) {
            items.push('<li id="' + key + '">' + val + '</li>');
        });

        $('<ul/>', {
            'class': 'my-new-list',
            html: items.join('')
        }).appendTo('body');
    }); 
```

如何让控制器接收 JSON 对象？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:14:31.067

您应该在方法中使用 POST 属性，这样您就可以将复杂的对象发布到 Web API，

您可以为 JSON 创建一个类，从[json 到 cSharp](http://json2csharp.com/)

```
public class SearchObject
{
    public string Name { get; set; }
    public string Type { get; set; }
    public List<string> Meals { get; set; }
    public List<string> Excludes { get; set; }
} 
```

然后在您的 web api 中，使用 HttpPost 属性指定方法，Web API 将负责将 post 中的 json 反序列化到您的模板。

```
[HttpPost]
public string Search(SearchObject json)
{
    return "Asdasd";
} 
```

您可以尝试 fiddler，用于发出发布请求，在请求标头中指定类型：

> 内容类型：应用程序/json

并在请求正文中粘贴您的 json，然后执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:22:46.440

看起来您已经收到了回复，但这里是一个有效解决方案的代码：

注意：我在MVC3中使用了JsonResult Actions，但是原理是一样的

控制器：

```
 public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost] // requires HttpPost attribute
        public JsonResult SendData(SearchObject payload)
        {
            // do something here

            return Json(new { status = "Success" });
        }
    }

    public class SearchObject
    {
        public string Name { get; set; }
        public string Type { get; set; }
        public List<string> Meals { get; set; }
    } 
```

看法：

```
@{
    ViewBag.Title = "Index";
}
<script src="../../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $.ajaxSetup({ accepts: "application/json" });
    $.ajax({
        url: '@Url.Action("SendData")', type: "POST",
        success: function (data) {
            alert(data.status); 
        },
        error: function (a, b, c) { },
        data: { 'Name':'Glenn','Type':'4','Meals':["1","2"] }
    });
</script>

<h2>Index</h2> 
```

希望这可以帮助...

# css - Rails css/scss 优先级

> ID：11534109
> 
> 赞同：2
> 
> 时间：2012-07-18T04:00:48.243
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, sass

我试图弄清楚 CSS 优先规则是如何在 Rails 中工作的。

我有一个应用程序，我想为不同的控制器使用不同的 css 规则，如果我将一些 css 添加到 css.scss 文件之一，它会影响所有控制器页面。

管理员.css.scss：

```
body {
    background: #fff;
} 
```

rsv_ps.css.scss

```
body {
    background: url("DSC_1581.JPG") no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='DSC_1581.JPG', sizingMethod='scale');
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='DSC_1581.JPG', sizingMethod='scale')";
} 
```

如果我去两者`http://localhost:3000/admin`或`http://localhost:3000/rsvps/new`，他们都有背景图像。

任何以 admin.css.scss 样式表开头的网址不应该`http://localhost:3000/admin`使用 rsv_ps.css.scss 样式表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:33:33.897

@meagar 和 @catfish 的评论是正确的。（不知道他们为什么不把答案放在帖子里）

单独的页面仅用于组织，而不是用于保持 css 分离。资产管道会将单独的 css 文件合并并最小化为一个大文件。

因此，您需要使用特定的选择器自己分离样式。

就像是

```
# for admin
body.admin {

}

#html
<body class='admin'>

# for everything else
body.default {

}

#html
<body class='default'> 
```

在布局中指定标记

```
<body class="<%= @admin ? 'admin' : 'default' %>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:40:25.710

您始终可以删除该行`*= require_tree .`，然后手动设置清单以包含您要编译成的文件`application.css`（您也可以转换`application.css`为`application.css.scss`并使用`@import`）。这意味着您可以使用`stylesheet_link_tag`帮助程序将特定样式表添加到每个视图。*请注意，您必须将`.css/.scss`需要编译的文件（不包含在 中`application.css`）添加到`config/environments/production.rb`*

您也可以只在 body 上使用特定的 css 类供管理员使用，这将覆盖默认的正文样式：

```
<body class='<%= 'admin' if @admin %>'> 
```

并`@admin`在控制器中设置过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-04T14:08:14.457

`Rails assets pipeline`为所有包含的内容创建一个`minified`版本`css`并将其添加到每个页面。

您需要`selectors`对不同的页面使用单独的。否则还有一个选择是使用`layout`它来分隔它，但是创建多个布局只是为了区分`css`每个页面并不是一个好方法。

# ruby-on-rails - rails ajax破坏日期选择器

> ID：11534110
> 
> 赞同：0
> 
> 时间：2012-07-18T04:00:54.860
> 
> 标签：ruby-on-rails, ajax

我有一个使用 ajax 和 :remote => true 的编辑表单。在edit.js.erb中使用不显眼的javascript，我打电话

```
$("#entries").html("<%= escape_javascript(render('form')) %>"); 
```

它更新了 edit.html.erb 中名为条目的 div。ajax 工作正常，表单被重新渲染，但现在日期选择器不起作用。我该如何解决？我认为首次加载页面时会初始化日期选择器，但我不知道如何更改此行为。

我正在使用这个日期选择器。

[http://dl.dropbox.com/u/143355/datepicker/datepicker.html](http://dl.dropbox.com/u/143355/datepicker/datepicker.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:08:38.537

每次进行 ajax 调用时都需要进行初始化。因为每个 ajax 请求都会更改 html 表单。

所以在edit.js.erb中添加datepicker初始化

```
$('[data-datepicker]').datepicker(); 
```

# perl - forks::Super sh: fork: retry: No Child Process

> ID：11534112
> 
> 赞同：0
> 
> 时间：2012-07-18T04:01:19.777
> 
> 标签：perl, process, fork

**最终更新：**我真的不知道如何解释它，但问题不再发生了。如果我找出解决问题的方法，我会发布答案。

我有一组 perl 脚本，用于在 16 核 Fedora 17 机器上执行大量类似的命令。到目前为止，每次我需要更改命令的生成方式时，我都会使用其中一个旧脚本作为模板编写一个新脚本，而且我之前从未遇到过代码问题（嗯，自从我编写了无论如何，原始的脚本集）。重要的是要注意旧脚本仍然可以正常工作，所以我认为这不是系统问题，我主要关注我（可能）搞砸代码的地方。

这是工作脚本的精简版本：

```
use Forks::Super MAX_PROC => 24, ON_BUSY => 'block';
#...
foreach my $fi (@FILES){
    #...
    $runMe = 'java -Xmx2048m weka.classifiers.'. $class .' -t '. $TR .' -T '. $TE .' -c 1 > '. $OUT;
    fork { cmd =>  $runMe};
    #...
}
waitall;
print("\nDone!\n"); 
```

这是损坏脚本的精简版本：

```
use Forks::Super MAX_PROC => 24, ON_BUSY => 'block';
#...
foreach my $n (@FI){
    if($n =~ m/^\d+$/){
            #...
        foreach my $f (@files){
            if($f =~ m/(\d+).arff/){
                print "starting interval $1 ... \n";
                #...
                $runMe = 'java -Xmx2048m weka.classifiers.'. $class .' -t '. $TR .' -T '. $TE .' -c 1 > '. $OUT;
                fork { cmd =>  $runMe );                
            }
        }
    }
}
waitall;
print("\nDone!\n"); 
```

这是脚本的输出（部分）：

```
starting interval 12 ...
starting interval 3 ...
sh: fork: retry: No child processes
starting interval 30 ...
starting interval 6 ...
Use of uninitialized value $signal_pid in print at /usr/local/share/perl5/Forks/Super/Job.pm line 991, <DATA> line 261.
Use of uninitialized value $exec_pid in waitpid at /usr/local/share/perl5/Forks/Super/Job.pm line 918, <DATA> line 261. 
```

错误`sh: fork: retry: No child processes`、`uninitialized value $signal_pid`和`uninitialized value $exec_pid`出现在看似随机的输出点上，并且随着程序运行时间的延长而越来越多。

*更新：* `$ ulimit -a`返回`max user processes (-u) 1024`比我为 Forks::Super 设置的 24 以及我在这台远程机器上运行的 4 个终端要多得多。鉴于另一个脚本工作正常并且这个脚本返回`No child processes`，我认为我不能清理/等待我在第二个脚本中创建的所有进程。我只是无法弄清楚`waitall`第一个和第二个脚本之间的调用有什么不同。

*更新：* 使用该`Forks::Super::Debug => 1`选项，这里是一些有代表性的输出：

```
starting interval 30 ...
14694 23:24:05.735:  New job created: {pid=;state=NEW;cmd=java -Xmx2048m weka.classifiers.lazy.IBk -K 3 -t /foo/arff_files/$
14703 23:24:05.735:  Signal pid for 14703 is 14708
14694 23:24:05.736:  fork(): {pid=;state=NEW;style=cmd;cmd=[java -Xmx2048m weka.classifiers.lazy.IBk -K 3 -t /foo/arff_file$
14694 23:24:05.736:  _can_launch(): system not busy. launch ok.
14694 23:24:05.736:  fork: launch approved for job
14694 23:24:05.736:  Job will use /bar/.fhfork14694/.fh_007.signal to get signal pid.
14707 23:24:05.737:  Executing command [ java -Xmx2048m weka.classifiers.lazy.IBk -K 3 -t /home/share/data/arff_files/trainers_l1o_curv$
Use of uninitialized value $signal_pid in print at /usr/local/share/perl5/Forks/Super/Job.pm line 991, <DATA> line 261.
Use of uninitialized value $signal_pid in concatenation (.) or string at /usr/local/share/perl5/Forks/Super/Job.pm line 995, <DATA> lin$
14707 23:24:05.737:  Signal pid for 14707 is
Use of uninitialized value $exec_pid in waitpid at /usr/local/share/perl5/Forks/Super/Job.pm line 918, <DATA> line 261.
14707 23:24:05.737:  waitpid returned -1, exit code of 14707 was -1 72057594037927935
starting interval 6 ...
14694 23:24:05.739:  New job created: {pid=;state=NEW;cmd=java -Xmx2048m weka.classifiers.lazy.IBk -K 3 -t /foo/arff_files/$
14694 23:24:05.739:  fork(): {pid=;state=NEW;style=cmd;cmd=[java -Xmx2048m weka.classifiers.lazy.IBk -K 3 -t /foo/arff_file$
14694 23:24:05.739:  _can_launch(): system not busy. launch ok.
14694 23:24:05.740:  fork: launch approved for job
14694 23:24:05.740:  Job will use /bar/programs/.fhfork14694/.fh_008.signal to get signal pid.
14694 23:24:05.740:  launch(): CORE::fork() returned undefined!
current file is 2 
```

我相当确定问题是进程没有及时消亡/被清理以创建新进程。`ps -aux`同意有很多孩子在跑步，即使他们没有出现`top`在我杀死父母之前和之后的前 50 行。该`waitall;`调用应防止脚本在其孩子还活着时退出，并且`MAX_PROC => 24`应防止一次启动超过 24 个孩子，所以我不确定在任何给定时刻运行太多是如何发生的。

如果`waitall`是我遇到麻烦的原因，那么当每次连续调用脚本时问题会变得更糟，这就是我看到的情况。但如果是这种情况，我不应该看到我在`top`. 看的时候`top`，一开始我看到有24个孩子在跑，然后在第一次运行结束后，我看到孩子的数量减少到没有，然后再次执行，还有另外24个孩子在执行……这是我在其他脚本中看到的正常模式。但是稍后，或者如果我终止脚本（使用`pkill perl`并`pkill java`确保没有与任务相关的进程处于活动状态）并重新启动它，那么我会在`top`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:44:24.203

我只是分享我对此的发现。

工作脚本只包含一个循环，而损坏的脚本包含一个嵌套循环，假设它的进程比工作脚本多。

```
sh: fork: retry: No child processes 
```

没有子进程是一个系统错误，表示它不能派生更多。所以在执行的时候，代码可能会fork更多的进程，从而导致这个错误。

```
MAX_PROC => 24 
```

您一次只给 24 个进程执行，如果它尝试分叉超过这 24 个，根据`ON_BUSY => 'block'`，它将等待并重试创建子进程，直到成功。在模块文档[Forks::Super](http://search.cpan.org/~mob/Forks-Super-0.63/lib/Forks/Super.pm#on_busy)中，它说如果系统 fork 调用失败，它将失败。从错误中您可以清楚地看出系统无法进行更多分叉。只需添加一个`$count++`变量并找出将分叉的进程数。也请尝试[Forks::Super::DEBUG](http://search.cpan.org/~mob/Forks-Super-0.63/lib/Forks/Super.pm#MODULE_VARIABLES)，以便您获得更多线索。

`$ ulimit -a`不返回最大进程数，实际上它返回用户可以运行的最大线程数。尝试`ps aux`让您更清楚地了解当前正在运行的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T14:22:58.573

由于没有提供答案，我想我会加入这个较旧的线程，因为我刚刚经历过这个。我的 Fedora 20 盒子已经运行好几个星期了，周五离开办公室没有问题，周一早上进来发现我无法解锁我的 xscreensaver 会话。任何键或鼠标移动只会导致屏幕闪烁。按 Ctrl-Alt-F2 得到一个文本控制台，我登录并得到了你列出的相同消息。我发出的每个命令（首先是 sudo su -）都给了我“bash: fork: retry: no child processes”，然后最终该命令将完成。

我终于能够查看一个进程列表，似乎没有什么异常，因为我的 ulimit 设置是正常的，但我在 maxuprc 和打开文件的限制下。内存使用也很好。我确实注意到的一件事是，我的 firefox 进程（和 firefox 插件容器进程）都在消耗过多的 CPU，仅从上周开始就消耗了数百小时。我杀死了这两个进程，然后我的系统很好，之后就没有问题了。

我不记得我打开了哪些选项卡，即使任何选项卡会被认为是有问题的，但无论哪种方式，这些过程（或至少其中一个）绝对是原因。

希望有帮助。

# python - Python 列表推导：是否可以一次指定包含两个元素？

> ID：11534113
> 
> 赞同：2
> 
> 时间：2012-07-18T04:01:24.593
> 
> 标签：python, list-comprehension

到目前为止，在 Python 中，我只见过指定一次包含一个元素的列表推导。例如，它们都采用以下形式

```
[f(x) for x in <iterable>] 
```

有没有办法一次指定多个元素？例如，

```
[f(x), g(x) for x in <iterable>] 
```

我问是因为我想创建一个列表推导来计算某个数字 x 的所有除数，但我想尽可能有效地做到这一点。现在我正在使用以下内容，

```
[y for y in range(1,x+1) if x%y == 0] 
```

但我想做这样的事情，

```
[y, x/y for y in range(1, sqrt(x)+1) if x%y == 0] 
```

因为这样会更有效率。顺便说一句，我没有这样做的实际理由。有人告诉我，这只是一个具有挑战性的问题，目标是尽可能用最小、最有效的列表理解来完成。

提前致谢。

**编辑**：好的，看起来我必须使用元组。我试图避免这种情况，因为我必须创建另一个函数来展平列表，这会使我的解决方案更长。

**编辑2**：以防万一有人偶然发现这个问题，我在原来的问题中想要做的答案是这样的：

```
[y for x in <iterable> for y in f(x), g(x)] 
```

它在列表推导中使用嵌套的 for 循环来完成工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T04:53:25.087

您可以将其展平到位

```
[y if i else x/y for y in range(1, sqrt(x)+1) for i in 0,1 if x%y == 0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T04:04:49.770

您可以分配给元组

```
[(y, x/y) for y in range(1, int(sqrt(x))+1) if x%y == 0] 
```

与您的基本问题无关，但与您的示例无关：我必须将第二个参数转换`range()`为 an，`int`因为在我的测试代码中`sqrt()`导致了 a 。`float`

**更新**重新**编辑**帖子：

要展平这个元组列表：

```
In [24]: s
Out[24]: [(1, 20), (2, 10), (4, 5)] 
```

用这个：

```
In [25]: import operator 
```

创建一个元组：

```
In [26]: reduce(operator.add, s, ())
Out[26]: (1, 20, 2, 10, 4, 5) 
```

创建一个列表：

```
In [27]: list(reduce(operator.add, s, ()))
Out[27]: [1, 20, 2, 10, 4, 5] 
```

**注意**：@jamylak 在有用的评论中指出，`reduce`运行`operator.add`顺序为 O(N^2)，使用`itertools.chain`会更有效率。随着列表大小的增加，这变得更加重要，在这种情况下应该考虑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T04:04:56.343

是的，你可以做到。您只需要在元素周围加上括号。你得到的是一个元组列表。

```
>>> [(x, x+1) for x in range(5)]
[(0, 1), (1, 2), (2, 3), (3, 4), (4, 5)] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T04:04:31.443

哦，这么近：

```
[(y, x/y) for y in range(1, sqrt(x)+1) if x%y == 0] 
```

可以生成一个元组列表，这些当然可以包含多个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T04:05:04.907

是的，绝对是，只需在值周围使用括号：

```
[(y, x/y) for y in range(1, sqrt(x)+1) if x%y == 0] 
```

# java - Java 代码似乎只使用了两个并发线程

> ID：11534116
> 
> 赞同：1
> 
> 时间：2012-07-18T04:01:41.177
> 
> 标签：java, concurrency

我有大约 40000 个可能需要重新粉刷的对象。他们中的大多数都没有出现在屏幕上，所以我似乎可以通过同时进行检查来节省很多工作。但是，我的 CPU 使用率从未超过 15%，所以它似乎仍然只使用一个内核。我是否正确实现了线程？如果是这样，为什么我的所有核心都没有被使用？有没有更好的方法可以利用我所有的核心？

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);

    if (game.movables.size() > 10000)
    {
        final int size = game.drawables.size();
        final Graphics gg = g;
        Thread[] threads = new Thread[8];
        for (int j = 0; j < 8; ++j)
        {
            final int n = j;
            threads[j] = new Thread(new Runnable()
            {
                public void run()
                {
                    Drawable drawMe;
                    int start = (size / 8) * n;
                    int end = (size / 8) * (n + 1);
                    if (n == 8) end = game.drawables.size(); // incase size
                                                             // % 8 != 0
                    for (int i = start; i < end; ++i)
                    {
                        drawMe = game.drawables.get(i);
                        if (drawMe.isOnScreen())
                        {
                            synchronized (gg)
                            {
                                drawMe.draw(gg);
                            }
                        }
                    }
                }
            });
            threads[j].start();
        }

        try
        {
            for (int j = 0; j < 8; ++j)
                threads[j].join();
        }
        catch (InterruptedException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    else
    {
        for (Drawable drawMe : game.drawables)
        {
            if (drawMe.isOnScreen())
            {
                drawMe.draw(g);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T04:33:05.190

正如已经指出的那样，`synchronized (gg)`它有效地序列化了所有绘图，因此由于线程创建和其他开销，您可能比单线程代码*慢。*

然而，我写这篇文章的主要原因是 Swing，这大概是，**不是**线程安全的。所以这个程序的行为不仅可能是坏的，而且是未定义的。

像这样的线程错误在一些带有一些 java 运行时参数和一些图形驱动程序的机器上会出现。到过那里。做到了。不好。

[JOGL](http://jogamp.org/jogl/www/)将让您直接访问 GPU，这是加速渲染的最可靠方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:00:12.690

要做到这一点，您可以首先将每个 drawMe 放入一个（正确同步的）列表中，然后在连接完成后将它们实际绘制在一个循环中。您无法加快绘图速度（尽管如果您已经完成了 99% 的 drawMe，您将大大减少所需的时间），但如果`isOnScreen()`有点复杂，您将从核心中获得一些真正的工作。

[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)将使您无需同步添加到列表中。

下一步可能是使用阻塞队列而不是列表，因此绘制代码可以与可见性检查并行运行。随着八次检查的进行，他们应该远远领先于图纸。（但我认为所有阻塞队列要么需要同步，要么自己同步。我会跳过这个并坚持使用 CLQ 和第一个解决方案。更简单，可能更快。）

而且（正如 Gene 指出的），与 Swing 相关的所有内容都从 EventQueue 开始。把它留在那里，否则生活会变得奇怪。只有您自己的代码（*不*引用 UI）应该在您的线程中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:32:31.797

由于您已经没有绘制任何屏幕外的对象，因此通过执行上述操作您可能获得的收益非常少。

我什至会说你让情况变得更糟，但是引入`synchronize`哪个很慢，并且还引入了导致上下文切换的线程，这很昂贵。

为了提高性能，您或许应该考虑使用不同的绘图库，例如 Java2D 绘图库，它是 JDK 的一部分：http: [//java.sun.com/products/java-media/2D/index.jsp](http://java.sun.com/products/java-media/2D/index.jsp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T04:09:35.117

我不确定 java 将如何处理这个问题，但是如果你像你正在使用的那样跨范围引用某些东西`final int n`（因为当循环停止时它超出范围），其他语言会爆炸并死掉。考虑使其成为可运行对象的字段。此外，您在进行所有实际工作的同时也在图形对象上进行同步。很可能您并没有从中获得任何真正的性能提升。您可能会受益于显式检查对象是否并行显示在屏幕上，这是一个只读操作，将屏幕上的对象添加到其他类型的集合或集合中，然后按顺序渲染。

# javascript - 如何在 PhoneGap 应用程序中使用 SQLite 数据库？

> ID：11534118
> 
> 赞同：2
> 
> 时间：2012-07-18T04:01:44.517
> 
> 标签：javascript, android, sqlite, cordova

我正在使用 PhoneGap 为 Android 开发一个应用程序。

我必须使用现有的 SQLite 数据库（mydatabase.sqlite）。我应该如何打开数据库并对其执行操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:29:07.780

我认为[这](https://stackoverflow.com/questions/11201179/how-to-make-changes-in-phonegap-apache-cordova-api)回答了你的问题。基本上，您需要一个 cordova(phonegap) 插件才能使用任何 SQLite db，否则它使用 webkit 实现创建的那个。

# android - Android 核心故障中的 openssl-fips-2.0

> ID：11534124
> 
> 赞同：2
> 
> 时间：2012-07-18T04:02:33.950
> 
> 标签：android, android-ndk, openssl, fips

我已经使用 ndk-r8 为 Android 成功构建了 openssl-fips-2.0 + openssl-1.0.1c。
我在 Mac OSX 上进行交叉编译。

但是，我无法通过 FIPS_mode_set(1)。我收到以下错误：“FIPS 例程：FIPS_check_incore_fingerprint：指纹不匹配”

我正在使用从 openssl-fips-2.0/util/incore 提供的 incore 脚本。

我的设置如下：

```
# Edit this to wherever you unpacked the NDK
export ANDROID_NDK=/home/android-ndk-r8

# Edit to wherever you put incore script
export FIPS_SIG=$PWD/openssl-fips-2.0/util/incore

PATH=$ANDROID_NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin:$PATH; export PATH
export MACHINE=armv7l
export RELEASE=2.6.32.GMU
export SYSTEM=android
export ARCH=arm
export CROSS_COMPILE="arm-linux-androideabi-"
export ANDROID_DEV="$ANDROID_NDK/platforms/android-14/arch-arm/usr"
export HOSTCC=gcc 
```

任何想法为什么我不能通过内核指纹验证？在交叉编译时我需要什么特别的 wrt incore 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:15:48.410

如果进行静态库构建，则需要运行 fipsld 工具以在链接时添加正确的指纹。

如果进行共享库构建，这将在幕后自动完成。

# c++ - 为什么当 typedef const 指针与额外的 const 一起使用时编译器不会出错？

> ID：11534126
> 
> 赞同：5
> 
> 时间：2012-07-18T04:03:28.097
> 
> 标签：c++, pointers, constants, language-lawyer

以下给出了预期的错误：

```
int* const const p = new int; // g++ error: duplicate cv-qualifier 
```

但下面没有给出任何错误，即使它相当于上面的一个：

```
typedef int* const intp_const;
intp_const const p = new int;  // ok !
        // ^^^^^ duplicate ? 
```

为什么编译器会忽略额外的`const`？

[注：`intp_const const`与 不同`const char* const`，因为`*p = <value>;`是可能的。]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T04:20:37.253

在 7.1.5 [dcl.type] (C++03) 中，声明当通过 typedef 引入时允许冗余 cv 限定符：

> const 或 volatile 可以与任何其他类型说明符结合使用。但是，除了通过使用 typedef (7.1.3) 或模板类型参数 (14.3) 引入时，禁止使用冗余 cv 限定符，在这种情况下忽略冗余 cv 限定符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T04:23:29.557

7.1.6 p 2 禁止`const`在同一个*decl-specifier-seq中使用多个*

> 作为一般规则，在声明的完整 decl-specifier-seq 或 type-specifier-seq 或 trailing-type-specifier-seq 中最多允许一个类型说明符。此规则的唯一例外情况如下：
> 
> — const 可以与除自身之外的任何类型说明符组合。

7.1.6.1 p 1 允许通过 typedef 使用：

> 有两个 cv 限定符，const 和 volatile。如果 cv-qualifier 出现在 decl-specifier-seq 中，则声明的 init-declarator-list 不应为空。[ 注意：3.9.3 和 8.3.5 描述了 cv 限定符如何影响对象和函数类型。— 尾注]**冗余的 cv 限定被忽略。**[ 注意：例如，这些可以由 typedefs 引入。——尾注]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:23:52.283

至于使用 typedef 允许它背后的原因——我想这是因为它是无害的，如果编译器不允许它，解决它可能会很烦人。您已经告诉编译器您希望它是 const，所以它就这么做了。没有必要挑剔你已经有效地说了两次。

但是，在同一个声明中出现两次的 const 没有真正的目的，很容易避免，因此给出了诊断。

# iphone - 保持背景的滑动菜单（Xcode 4.3）

> ID：11534128
> 
> 赞同：0
> 
> 时间：2012-07-18T04:03:34.687
> 
> 标签：iphone, ios, menu, xcode4.3, sliding

我一直在寻找一种方法，使菜单从屏幕顶部向下移动 80 像素，并在用户从上到下滑动手指时让屏幕向下滑动（80 像素）（并在他们滑动时反转它）从上到下将其发送回来）。我该怎么做呢？任何事情都有帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T04:33:53.870

1.  创建一个 UISwipeGestureRecognizer 并将其添加到您希望它出现的视图中：

    ```
    UISwipeGestureRecognizer *swipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipe:)];
    [swipeGesture setDirection:UISwipeGestureRecognizerDirectionDown];
    [self.view addGestureRecognizer:swipeGesture]; 
    ```

2.  创建一个实例变量来保存您的菜单视图并将其添加到屏幕外的视图（注意 -80 y 坐标）：

    ```
    menuView = [[UIView alloc] initWithFrame:CGRectMake(0, -80, 320, 80)];
    //add whatever controls you need to the menu view, or load it from a nib
    [self.view addSubview:menuView]; 
    ```

3.  定义一个在检测到向下滑动时将菜单滑动到视图上的方法：

    ```
    -(void)swipe:(UISwipeGestureRecognizer*)sender {
            [UIView animateWithDuration:0.5 animations:^{
                [menuView setFrame:CGRectMake(0, 0, 320, 80)];
        }];
    } 
    ```

如果您希望屏幕随之向下滑动或您可能希望发生的任何其他事情，请向动画块添加其他操作。

要使用向上滑动移除视图，您可以创建另一个 UISwipeGestureRecognizer，但带有`UISwipeGestureRecognizerDirectionUp`方向。制作另一种方法来反向滑动菜单。

希望能帮助到你。

# regex - htaccess 正则表达式匹配 HTTP_HOST 的所有部分

> ID：11534130
> 
> 赞同：1
> 
> 时间：2012-07-18T04:03:46.780
> 
> 标签：regex, .htaccess, mod-rewrite

如果您想在没有解释的情况下阅读我的问题，请跳到下面的粗体标题。

好的，伙计们，我们开始吧。首先，我拥有的代码：

```
AddType text/x-server-parsed-html .html .htm

RewriteEngine On
RewriteBase /

# checking to see if it's a secure request, then set environment var "secure" to either       "s" or ""
#
RewriteCond %{SERVER_PORT}s ^(443(s)|[0-9]+s)$ [NC]
RewriteRule ^(.+)$ - [env=secure:%2] [NC]

# Gets the value of the subdomain and puts it into environment variable "sub"
#
RewriteCond %{HTTP_HOST} ^([^\.]*)(\.)?example.com [NC]
RewriteRule ^(.*)$ - [env=sub:%1] [NC]

# Determines if the sub domain is blank, w, or ww, then redirects w/301 to www...
#
RewriteCond %{ENV:sub} ^(w|ww|)$
RewriteRule ^(.*)$ http%{ENV:secure}://www.example.com/$1 [R=301,L]

# Gets the highest sub domain and adds it as a top subdirectory to each request
#
RewriteCond %{REQUEST_URI}:example/%{ENV:sub} !^/([^/]+)[^:]*:\1 [NC]
RewriteRule ^(.*)$ /example/%{ENV:sub}/$1 [L]

#ErrorDocument 404 /pagenotfound
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1&%{QUERY_STRING} [PT] 
```

所以，一切都按预期工作，除了我必须明确设置域，我无法找出正则表达式来获取它，因此它可以在不同的域中工作。以下是它的工作原理：

它首先确定请求是否安全，并将其保存以备后用。

接下来，它对到 example.com 的请求执行 301 重定向，该请求将“w”、“ww”或“”作为 www.example.com 的子域，从而强制该站点的所有请求使用 www.example。 com，除非您指定 (w|ww|www) 以外的子域，例如“test”或“dev”或任何设置。

接下来，它获取子域的值（它将始终存在，因为您请求过类似“dev.example.com”或已重定向到“www.example.com”），并重写（不是重定向）请求到下两层的子目录。设置完成后，这将是根目录中“example”下的“www”目录。

最后，它将 URI 重写（而不是重定向）漂亮，那里没问题，它按照我喜欢的方式工作。

目录结构如下：在根目录中，这里托管的每个站点（例如，另一个站点、第三站点）都有一个目录。对于这个 htaccess 文件，它们都是完全无关的。在每个目录中，至少有两个目录，“www”和“dev”。生产站点文件在“www”中，开发文件在“dev”中。在这里也可以有一个用于测试环境的“test”目录，或者你想要的任何其他目录，这就是我设置它的方式。

# 所以，我想要的是这样的：

```
Rewritecond %{HTTP_HOST} ^(match sub domain).(match domain).(match TLD) [NC]
RewriteRule ^(.*)$ -[env=sub:%1,env=domain:%2,env=tld:%3] [NC] 
```

我知道第二行可以正常工作，它只是第一行的正则表达式，我无法弄清楚。请记住，可能会或可能不会指定子域，并且在域之前可能会或可能不会有句点。

这将允许整个脚本处理托管在根目录中的任何站点，如允许我重写第 23 行所描述的那样：

```
RewriteRule ^(.*)$ http%{ENV:secure}://www.%{ENV:domain}.%{ENV:tld}/$1 [R=301,L] 
```

第 29 行如下：

```
RewriteCond %{REQUEST_URI}:%{ENV:domain}/%{ENV:sub} !^/([^/]+)[^:]*:\1 [NC] 
```

所以，我想我已经非常清楚地解释了我所拥有的、我正在努力做的以及我希望实现的目标。任何人都可以帮助第 15 行的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:08:17.080

> I know that line two of this works correctly, it's just the regex of line one I can't figure out. Keep in mind, there may or may not be a sub domain specified, and there may or may not be a period preceding the domain.

Your regex will look something like this:

```
Rewritecond %{HTTP_HOST} ^(([^\.]+)\.)?([^\.]+)\.([^\.]+)$ [NC]
RewriteRule ^(.*)$ - [env=sub:%2,env=domain:%3,env=tld:%4] 
```

Which will change the rule line as well (you were missing a space after the "-"), because **`%1`** now backreferences the dot as well.

# algorithm - 如何阅读PDF文件的内容？

> ID：11534131
> 
> 赞同：1
> 
> 时间：2012-07-18T04:03:49.127
> 
> 标签：algorithm, nlp, artificial-intelligence

我目前正在撰写我的论文，该应用程序将使用**自然语言问答**。我已经阅读了几个想法并关注了有关自然语言问答的讨论，但我似乎找不到好的答案。

**问题：如何从 PDF、纯文本或 MS Word 文件中获取答案？**

如果我想在 PDF 文件中搜索主题，我会使用`Ctrl`+`F`来查找主题/想法，但它不会返回所有详细信息；就像目录一样，它会给出一章的起始页和结束页。这就是我想要的逻辑。它将在不使用页码或编号的情况下确定章节的结束位置。有没有能够做到这一点的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:27:52.400

我使用[iTextPDF](http://itextpdf.com/)来阅读 PDF 文件内容。

# java - ActiveMQ 中的主题创建

> ID：11534136
> 
> 赞同：1
> 
> 时间：2012-07-18T04:04:16.480
> 
> 标签：java, activemq, authority

[http://docs.oracle.com/javaee/1.4/api/javax/jms/Session.html#createTopic(java.lang.String](http://docs.oracle.com/javaee/1.4/api/javax/jms/Session.html#createTopic(java.lang.String) ) 这个API说这`session.createTopic(topicname)`不是为了创建物理主题。这是什么意思？

如果我希望一组具有“admin”权限的用户负责创建主题，而另一组具有“write”权限的用户负责向该主题发布消息，我该如何实现？看来后一组也必须拥有“admin”的权限，因为他们必须使用这种方法： `session.createTopic(topicname)`。

如何区分“admin”和“write”权限？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T13:27:16.283

JMS 规范的意思是 createTopic(String) 用于为您提供逻辑句柄（javax.jms.Topic，Destination 的子类型），您随后可以在其他调用中使用该句柄，例如 createProducer(Destination) 或 createConsumer(Destination) . 在 ActiveMQ 中恰好[会同时创建一个物理目标](http://activemq.apache.org/how-do-i-create-new-destinations.html)。

如果您想确保用户只能发布到已创建的目标，请分配该组的读写权限，而不是管理员。显然，假设这些主题已经存在 - 如果它们不存在，那么您将抛出异常。

您还没有确切说明您希望如何管理主题创建，但是如果您可以在 ActiveMQ 配置中执行此操作以便[在启动时创建](http://activemq.apache.org/configure-startup-destinations.html)它们，那么在目标块中定义这些主题：

```
<broker xmlns="http://activemq.apache.org/schema/core">
  <destinations>
    <topic physicalName="topic.1" />
    <topic physicalName="topic.2" />
  </destinations>
</broker> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T06:29:14.407

JMS api 不用于管理，仅用于使用现有主题和队列。在 ActiveMQ 中，默认是物理队列/主题在需要时自动创建（有人正在向它发送/从它消费）。

如何在 JMS 实现中创建物理对象是特定于供应商的，您应该检查在 ActiveMQ 中是如何处理的。

[这在 AMQ 中是如何处理的](http://activemq.apache.org/how-do-i-create-new-destinations.html)

# open-source - 使用 IDE 开发 OpenSplice DDS 应用程序

> ID：11534148
> 
> 赞同：0
> 
> 时间：2012-07-18T04:05:53.660
> 
> 标签：open-source, ide, data-distribution-service

我一直在尝试在 Eclipse 平台上配置 Open Splice，但我没有取得任何进展。我在 Java Standalone 模式下使用 Open Splice DDS。我使用的 Eclipse 平台是面向 Java EE 开发人员 (Helios) 的 Eclipse 版本。

问题是：当我尝试创建运行配置时，我需要从左侧菜单中选择应用程序类型。似乎没有可用的应用程序类型可用于为批处理文件创建工作运行配置。我希望能够从 Eclipse 内部启动、停止和打开拼接，以及运行预处理器和我的应用程序，而无需使用 cmd 控制台。我是 Eclipse 和 OpenSplice 的新手，任何帮助对我来说都非常重要。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T10:08:07.907

如果您正在开发 Java 应用程序，现在可以使用 OpenSplice Mobile，它是用于 j2se 和 Android 的纯 Java DDS 实现。

OpenSplice Mobile 带有一个 mvn 构建系统，可以很容易地用于创建 eclipse 项目（或简单地导入到 eclipse 或 IntelliJ 中）。

您可以在以下位置找到一些示例：

[https://github.com/kydos/mobile-dds-demo](https://github.com/kydos/mobile-dds-demo)

并获得 OpenSplice Mobile：

[http://www.prismtech.com/opensplice/software-downloads](http://www.prismtech.com/opensplice/software-downloads)

一个+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:34:47.380

> 问题是：当我尝试创建运行配置时，我需要从左侧菜单中选择应用程序类型。似乎没有可用的应用程序类型可用于为批处理文件创建工作运行配置。

此解释假定您处于 Java 透视图中。其他观点将非常相似或相同。

不要使用`Run Configurations`对话框。取而代之的是，`Run`在菜单中选择，它将显示`External Tools`为它的底部项目，其中有一个 sub-item `External Tools Configurations...`。单击该按钮将显示一个对话框，在左侧显示可能的配置类型列表。选择类型`Program`，然后单击`New Launch Configuration`列表左上角的图标。在右侧，将出现许多编辑框，允许您更改此启动配置的名称（您可以设置为类似的名称`ospl start`）设置启动命令（例如`ospl.bat`通过选择`Browse...`），其参数（例如`start`）和其他几个喜欢工作目录和环境变量。

完成后点击应用。从现在开始，该`ospl start`命令可以通过`Run`菜单项运行，`External Tools`然后`ospl start`. 将此设为收藏夹，以便将其在菜单中向上移动以减少点击次数。

可以为您要启动的任意数量的应用程序重复该过程。

# cqrs - CQRS - 当命令无法解析到域时

> ID：11534149
> 
> 赞同：2
> 
> 时间：2012-07-18T04:05:59.350
> 
> 标签：cqrs

我正试图围绕CQRS。我从[此处](https://github.com/MarkNijhof/Fohjin)提供的代码示例中绘制。请温柔我对这种模式很陌生。

我正在查看登录方案。我喜欢这种情况，因为在我读过的任何示例中都没有真正体现出来。在这种情况下，我不知道用户的聚合 ID 是什么，或者即使有一个，因为我一开始只是用户名和密码。

在 fohjin 示例中，事件总是从域中触发（如果需要），并且命令处理程序调用域上的某些方法。但是，如果用户登录无效，我就没有域可以调用任何东西。此外，fohjin 项目中定义的大多数（如果不是全部）基本命令/事件类都传递一个聚合 id。

在 LogonFailure 事件的情况下，我可能想要更新 LogonAudit 报告。

所以我的问题是：如何处理无法解析为特定聚合的命令？那将如何流动？

```
 public void Execute(UserLogonCommand command)
    {
        var user = null;//user looked up by username somehow, should i query the report database to resolve the username to an id?

        if (user == null || user.Password != command.Password)
            ;//What to do here? I want to raise an event somehow that doesn't target a specific user
        else
            user.LogonSuccessful();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:32:25.800

您应该考虑到大多数情况下 CQRS 和 DDD 仅适用于系统的某些部分。用 CQRS 概念对整个系统进行建模是非常罕见的——它最适合具有复杂业务领域的部分，我不会在特别复杂的业务场景中调用日志记录用户。事实上，在大多数情况下，它根本与业务无关。当用户已经被识别时，实际的业务域就开始了。

要记住的另一件事是，由于最终的一致性，尽可能多地使用查询端进行检查是非常有益的，而不需要创建任何命令/事件的事件。

但是，假设有关成功/失败用户登录的信息是有意义的，我将通过以下步骤为您的场景建模

1.  用户提供名称和密码
2.  名称/密码针对某种查询数据库进行验证
3.  当提供的凭据有效时，RegisterValidUserCommand(userId) 被执行，这会导致正确的事件
4.  如果提供的凭据无效，则执行 RegisterInvalidCredentialsCommand(providedUserName)，这会导致正确的事件

关键是检查用户凭据不一定是业务领域的一部分。

也就是说，还有另一个相关概念，其中并非每个命令或事件都需要与业务相关，因此可以处理不需要加载聚合的事件。

例如，您希望更改仅供参考的数据，并且绝不会影响系统的业务概念，例如有关人的性别的信息（再次假设它没有业务意义）。

在这种情况下，当您处理 SetPersonSexCommand 时，实际上不需要加载聚合，因为该信息甚至不必位于实体上，而是创建 PersonSexSetEvent，注册并发布，以便查询端可以将其投影到屏幕/报告.

# php - 为什么 joomla 中的管理员无法从 php.ini 中获取价值？

> ID：11534150
> 
> 赞同：2
> 
> 时间：2012-07-18T04:06:10.930
> 
> 标签：php, joomla, joomla2.5

我使用主机 Cpanel，在 php.ini 中我将值 upload_max _file_size 从 2M（默认）编辑为 15M

构建我的主机：

```
/www/administrator/
/www/components/    
    ... 
/www/php.ini
/www/test.php 
```

在 test.php 我`echo phpinfo()`是结果是 ![php.ini](../Images/a466db6b932c0103be6071b942a6e29a.png)

但是在 joomla 中我检查 sysinfo 结果是 ![php.ini](../Images/e7a687215a42b54d26728327d242b0d8.png)

如何修复joomla中的upload_max_filesize，我已经重启了这个主机apache

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:12:03.767

是的，它在 php.info 中的真实 upload_max_filesize，但在 joomla 2.5 系统信息 [jasa pembuatan 网站中仍然是 2M](http://www.joglomedia.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:29:05.197

`php.ini`你创造`/www/administrator/php.ini`

添加此代码：

```
upload_max_filesize = 15M
post_max_size = 15M 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:15:20.557

PHP.ini 配置

```
上传最大文件大小：15M
post_max_size: 90M
最大执行时间：10000
内存限制：128M
```

# orm - Coldfusion ORM关系id列表

> ID：11534151
> 
> 赞同：2
> 
> 时间：2012-07-18T04:06:30.493
> 
> 标签：orm, coldfusion, many-to-many

我想知道是否有一种简单的方法可以使用 ORM 获取与冷融合组件中的源对象相关的所有目标对象的 ID 列表？

我可以看到您可以为一对多关系进行集合映射，但我使用的是多对多关系。我不想获取对象数组，然后遍历它以获取每个 id。

是否有任何内置函数或属性可以做到这一点？

我认为像下面的代码示例这样的东西有点太重了，因为它正在获取整个查询，然后从中获取单个列。

```
valuelist(  EntityToQuery( object.getRelationalFields() ).id  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:39:52.953

有时使用 ORM 没有意义，现在是时候了。使用好旧`<cfquery>`的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:01:25.097

我认为[ORMExecuteQuery](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSfd7453be0f56bba45b6e22cb12308efc3aa-8000.html)可能对您有用，如下所示：

```
result = ORMExecuteQuery("select id from Model as m where m.parent.id = :id", {id = 123}); 
```

*实际子句格式取决于关系定义。*

在一个`result`中，您将拥有模型 PK 数组。

# ajax - ajax-jquery 在选择的更改事件上不适用于 Spring MVC

> ID：11534153
> 
> 赞同：1
> 
> 时间：2012-07-18T04:06:44.757
> 
> 标签：ajax, jquery, spring-mvc

我是 Spring MVC 的新手。我希望我的jsp页面使用ajax填充另一个选择框的更改事件的选择框..

jsp页面就像..

```
 <c:url var="RatePlanOfClientURL" value="/ratePlansofUser.jav" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <link rel="stylesheet" href="Scripts/jquery-ui-1.8.16/themes/base/jquery-ui.css" type="text/css" /> 
    <link rel="stylesheet" href="Scripts/jquery-ui-1.8.16/themes/base/jquery.ui.autocomplete.css" type="text/css" />
      <script src="Scripts/jquery-ui-1.8.16/jquery-1.6.2.js"></script>
      <script type="text/javascript" src="Scripts/jquery-ui-1.8.16/ui/jquery-ui.js"></script> 
      <script type="text/javascript" src="Scripts/jquery-ui-1.8.16/ui/jquery.ui.core.js"></script>
      <script type="text/javascript" src="Scripts/jquery-ui-1.8.16/ui/jquery.ui.position.js"></script>
      <script type="text/javascript" src="Scripts/jquery-ui-1.8.16/ui/jquery.ui.widget.js"></script>
    <script type="text/javascript">
        window.scrollTo(0, 1);
    </script>

    <script type="text/javascript">
    $(document).ready(function() { 
              $("#parentClient").change(function(){
                  $.getJSON('${RatePlanOfClientURL}', {
                      clientId : $(this).val(),
                        ajax : 'true'
                    },
                    function(data) {
                                alert("hai");
                        var html = '<option value="">Select '+$("#parentClient").val()+'</option>';
                        var len = data.length;
                        for ( var i = 0; i < len; i++) {
                            html += '<option value="' + data[i].rateID + '">' + data[i].rateName
                                    + '</option>';
                        }
                        html += '</option>';

                    $('#ratePlanList').html(html);
                });
            });
        });

    </script>

<fieldset>
<div>
 <label> Parent Account</label>
                       <form:select id="parentClient" path="reseller.clientResellerParentId" class="addDropdown">
                                 <form:option value="0" label="Select Parent"></form:option> 
                                <form:options items="${ClientList}" itemValue="clientId" itemLabel="clientName"/>
                            </form:select>
</div>

<div>
<label >Rate Plan</label>
                           <form:select id="ratePlanList" path="reseller.resellerRateplan.ratePlanID" class="addDropdown">
                                <form:option value="0" label="Select RatePlan"></form:option> 
                                <form:options items="${RatePlanList}" itemValue="rateID" itemLabel="rateName"/>
                            </form:select>
                            <form:errors path="reseller.resellerRateplan.ratePlanID" cssStyle="color:red"></form:errors>
</div>
</fieldset> 
```

在我的控制器类中

```
@RequestMapping(value = "/ratePlansofUser.jav", method = RequestMethod.GET)
    public @ResponseBody List<RatePlanData> ratePlansForClient(
            @RequestParam(value = "clientId", required = true) Integer clientId,
            HttpSession session) 
    {
        System.out.println("Reached Controller for "+clientId);
        return ratePlanService.getRatePlanForClient(clientId);
    } 
```

Atlast 我拥有的数据库控制器类

```
 public List<RatePlanData> getRatePlanForClient(int id)
     {
        Criteria myCriteria = sessionfactory.getCurrentSession().createCriteria(RatePlanData.class);

        myCriteria.add(Restrictions.eq("clientID",id ));  

        return myCriteria.list();
     } 
```

每当我更改我的 parentclient 选择框时，控制器方法都会调用（`System.out.println("Reached Controller for "+clientId);`正在打印）。当我选择一个没有孩子的父母时，该脚本中的警报框正在显示。但是当我打电话给有孩子的父母时，它不起作用（那个警报框没有显示，但`System.out.println("Reached Controller for "+clientId);`正在控制台打印）。

谁能指出可能是什么问题？

提前致谢..

编辑..我用firebug检查了脚本中ajax函数中的变量数据。当我选择没有孩子的父母时，它将数据的值显示为“[]”。它只是在遇到函数（数据）时跳过所有脚本。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:27:17.380

首先，您需要确保您的服务调用不会引发任何异常。其次，如果没有例外，您可能会缺少 spring 标签生成的 Id / 元素名称（假设您使用的是 spring 标签库）

# java - JSP + Eclipse + TomCat：无法解析为类型

> ID：11534156
> 
> 赞同：3
> 
> 时间：2012-07-18T04:07:24.297
> 
> 标签：java, eclipse, jsp, tomcat

我知道这个问题已经被问过很多次了，但是到目前为止，以前给出的答案都没有对我有用，这是我的代码：

```
<html>
  <head>
    <title>Programa</title>
  </head>
  <body>
    <div>
      Introduzca una palabra a buscar:
      <input type="text" id="INPUT">

      <%@ page import="java.net.URL" %>
      <%@ page import="com.google.gson.*" %>
      <%@ page import="java.net.URLEncoder" %>
      <%@ page import="java.io.InputStreamReader" %>
      <%@ page import="java.io.InputStream" %>
      <%@ page import="java.io.Reader" %>
      <%@ page import="javax.swing.*" %>
      <%@ page import="java.awt.event.*;" %>

      <%!
      int min(int a,int b) {
          return (a>b)? b:a;
      }
      int edit_distance(String a,String b) {
          int n = a.length(), m = b.length(),costo;
          int[][] mat = new int[n+1][m+1];
          for(int i=0;i<=n;++i) mat[i][0] = i;
          for(int j=0;j<=m;++j) mat[0][j] = j;

          for(int i=1;i<=n;++i) {
            for(int j=1;j<=m;++j) {
              costo = a.charAt(i-1) == b.charAt(j-1)? 1 : 0;
              mat[i][j] = min(min(mat[i-1][j] + 1,mat[i-1][j-1] + costo),mat[i][j-1] + 1);
            }
          }
          return mat[n][m];
      }
      String resultados_de_la_busqueda(String search) { //Básicamente lo que hace esta función es devolverte una cadena con los resultados de la búsqueda
          StringBuffer RES = new StringBuffer("<html>");
          String google = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q="; //El enlace para buscar en google
          String charset = "UTF-8";
          URL url;
          Reader reader;
          try {
            url = new URL(google + URLEncoder.encode(search, charset));
            try {
              reader = new InputStreamReader(url.openStream(), charset);
              GoogleResults results = new Gson().fromJson(reader, GoogleResults.class);
              for(int i=0;i<3;++i) {
                RES.append(results.getResponseData().getResults().get(i).getTitle());
                RES.append("<br/>");
                RES.append("<a href=\"");
                RES.append(results.getResponseData().getResults().get(i).getUrl());
                RES.append("\">" + results.getResponseData().getResults().get(i).getUrl() + "</a>");
                RES.append("<br/><br/>");
              }
            } catch(Exception e) {}
          } catch(Exception e) {}
          return RES.toString();
      }
      %>

      <%
      //Se supone que acá debo mostrar el resultado de la búsqueda...
      out.println(resultados_de_la_busqueda("taringa"));
      %>
    </div>
  </body>
</html> 
```

这是我得到的错误：

```
org.apache.jasper.JasperException: No se puede compilar la clase para JSP: 

Ha tenido lugar un error en la línea: 47 en el archivo jsp: /Programa.jsp
GoogleResults cannot be resolved to a type
Gson cannot be resolved to a type 
```

对导致问题的原因有任何想法吗？

编辑1：

这是 GoogleResults 类：

```
import java.util.List;

public class GoogleResults {

  private ResponseData responseData;
  public ResponseData getResponseData() { return responseData; }
  public void setResponseData(ResponseData responseData) { this.responseData = responseData; }
  public String toString() { return "ResponseData[" + responseData + "]"; }

  static class ResponseData {
    private List<Result> results;
    public List<Result> getResults() { return results; }
    public void setResults(List<Result> results) { this.results = results; }
    public String toString() { return "Results[" + results + "]"; }
  }

  static class Result {
    private String url;
    private String title;
    public String getUrl() { return url; }
    public String getTitle() { return title; }
    public void setUrl(String url) { this.url = url; }
    public void setTitle(String title) { this.title = title; }
    public String toString() { return "Result[url:" + url +",title:" + title + "]"; }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T04:16:01.113

好像没有接你的课...

执行项目>清理，然后刷新 (F5)。

希望这会有所帮助，这是我从这里得到的：

[点击这里](http://philip.yurchuk.com/2008/12/03/eclipse-cannot-be-resolved-to-a-type-error/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T20:48:57.987

有时，如果您将项目导入新工作区，如果 JRE 与新工作区中的先前工作区不同，则会遇到此问题，请尝试更改构建路径中的 jre 系统库。行得通

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-23T14:21:45.633

在我的 java 自动更新后，这发生在我身上。检查 JRE 是否正确设置： R单击项目，选择 Build Path ->configure Build Path ，转到库路径并确保正确配置了 JRE 系统库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:06:13.333

始终将您的课程放在包中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T18:25:38.077

确保您的 GoogleResults.class 正在 WEB-INF/classes/ 下编译

在我看来，您应该在 .jsp 的开头导入此文件。

希望这有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-20T11:19:10.770

创建新项目。从旧项目复制此新项目中的所有文件。删除旧项目并重命名新项目。

就是这样。它会正常工作

# php - 在另一个数组的任何位置插入新项目数组

> ID：11534160
> 
> 赞同：-1
> 
> 时间：2012-07-18T04:07:33.737
> 
> 标签：php, arrays

如何将新项目添加到数组？例如进入数组的中间？我们应该使用`array splice`还是`array merge`？
你能解释一下这两个功能之间的区别吗？

说我有

```
$a1=array("a"=>"Horse","b"=>"Dog","c"=>"Cow",);
$a2=array("d"=>"Cat"); 
```

现在我需要在 2 位置添加 $a2 。

我应该使用哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:21:02.657

您可以使用[array_push](http://php.net/manual/en/function.array-push.php)在任何位置添加数组。..array_splice 也可以使用。.
示例：[array_splice](http://www.ferolen.com/blog/insert-into-add-element-to-array-at-specific-position-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:33:02.723

您可以使用[`array_splice`](http://php.net/array_splice)，但不会保留您的密钥。

```
$a1 = array("a"=>"Horse", "b"=>"Dog", "c"=>"Cow");
$a2 = array("d"=>"Cat");

array_splice($a1, 2, 0, $a2);

// $a1 is now: array("a"=>"Horse", "b"=>"Dog", 0=>"Cat", "c"=>"Cow"); 
```

如果你想`Cat`拥有 的键`d`，你可以混合使用 of[`array_slice`](http://php.net/array_slice)和[数组联合运算符](http://php.net/manual/en/language.operators.array.php)( `+`)：

```
$a1 = array_slice($a1, 0, 2) + $a2 + array_slice($a1, 2);

// $a1 is now: array("a"=>"Horse", "b"=>"Dog", "d"=>"Cat", "c"=>"Cow"); 
```

# javascript - Xcode，获得未知序列的骑行？

> ID：11534166
> 
> 赞同：0
> 
> 时间：2012-07-18T04:08:50.133
> 
> 标签：javascript, ios, replace

```
 NSString* attribute_list = [wvPage stringByEvaluatingJavaScriptFromString:
            @"var attrs=document.getElementsByClassName('attributes-list')[0].innerHTML;attrs = attrs.replace(/(?:<\!\-\-[^\-]*\-\->|<li[^>]*>|&nbsp;|\ )/ig, '');attrs = attrs.replace(/<\/li[^>]*>/ig, '|');"]; 
```

以上是我的代码。我想用 JavaScript 替换。

一切正常，但我收到警告。我怎样才能禁止这些警告？

```
Unknown escape sequence '\!'
Unknown escape sequence '\-'
... 
```

和这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:24:59.527

您正在使用`@""`允许特殊转义字符的字符串（例如，想想如何`\n`神奇地变成换行符）。这意味着代码中不打算以这种方式解析的*每个*反斜杠都必须*加倍*，以便逐字保留。

例如：

```
@"var attrs=document.getElementsByClassName('attributes-list')[0].innerHTML;attrs = attrs.replace(/(?:<\\!\\-\\-[^\\-]*\\-\\->|<li[^>]*>|&nbsp;|\\ )/ig, '');attrs = attrs.replace(/<\\/li[^>]*>/ig, '|');"]; 
```

# javascript - 在使用 javascript 再次声明之前清除或删除变量

> ID：11534168
> 
> 赞同：0
> 
> 时间：2012-07-18T04:09:05.350
> 
> 标签：javascript

我对 javascript 非常陌生，并且正在搞乱一些数学。我目前有：

```
<input disabled="disabled" type="text" id="backer-prediction-answer" width="100" value="" />

<FORM> 
    <INPUT type="button" value="Apply" name="button1" onclick="apply()">
</FORM>

<script>
var backerPrediction1 = document.getElementById("backer-prediction-1").value;
var backerPrediction2 = document.getElementById("backer-prediction-2").value;
var backerPrediction3 = document.getElementById("backer-prediction-3").value;
var backerPrediction4 = document.getElementById("backer-prediction-4").value;

function apply(){
    var backers = parseInt(backerPrediction1,10) + parseInt(backerPrediction2,10);
    document.getElementById("backer-prediction-answer").value = (backers);
}
</script> 
```

我希望能够点击应用并重新计算。我需要在再次声明之前删除变量吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:17:14.183

将变量 backerPredictionX 移动到函数内，以便每次应用时都会对它们进行评估（）

```
<script>

function apply(){
    var backerPrediction1 = document.getElementById("backer-prediction-1").value;
    var backerPrediction2 = document.getElementById("backer-prediction-2").value;

    var backers = parseInt(backerPrediction1,10) + parseInt(backerPrediction2,10);
    document.getElementById("backer-prediction-answer").value = (backers);
}
</script> 
```

* * *

使用 jquery（代码未验证）：

```
function apply(){
    var backerPrediction1 = $("#backer-prediction-1").val();
    var backerPrediction2 = $("#backer-prediction-2").val();

    var backers = parseInt(backerPrediction1,10) + parseInt(backerPrediction2,10);
    $("#backer-prediction-answer").val(backers);
} 
```

# regex - 如何在正则表达式中使用 awk 变量？

> ID：11534173
> 
> 赞同：40
> 
> 时间：2012-07-18T04:09:43.860
> 
> 标签：regex, awk

我有一个名为**domain**的文件，其中包含一些域。例如：

```
google.com
facebook.com
...
yahoo.com 
```

我还有另一个名为**site**的文件，其中包含一些网站的 URL 和编号。例如：

```
image.google.com   10
map.google.com     8
...
photo.facebook.com  22
game.facebook.com   15
.. 
```

现在我要计算每个域的 url 编号。例如：**google.com**有**10+8**。所以我写了一个这样的awk脚本：

```
BEGIN{
  while(getline dom < "./domain" > 0) {
    domain[dom]=0;
  }
  for(dom in domain) {
    while(getline < "./site" > 0) {
      if($1 ~/$dom$)   #if $1 end with $dom {
        domain[dom]+=$2;
      }
    }
  }
} 
```

但是代码`if($1 ~/$dom$)`并没有像我想要的那样运行。因为正则表达式中的变量 $dom 是按字面解释的。所以，第一个问题是：

**有没有办法`$dom`在正则表达式中使用变量？**

然后，因为我是新来写脚本

**有没有更好的方法来解决我遇到的问题？**

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-01-31T11:56:02.627

`awk`如果您不使用`//`正则表达式标记，则可以匹配变量。

`if ( $0 ~ regex ){ print $0; }`

在这种情况下，将所需的正则表达式构建为字符串

```
regex = dom"$" 
```

然后匹配`regex`变量

```
if ( $1 ~ regex ) {
  domain[dom]+=$2;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-18T04:30:52.937

首先，变量`dom`不是`$dom`——考虑`$`作为一个运算符来提取存储在变量中的列号的值`dom`

其次， awk 不会插入中间的内容`//`——那只是一个字符串。

您想要`match()`第二个参数可以是被视为正则表达式的字符串的函数：

```
if (match($1, dom "$")) {...} 
```

我会编写一个解决方案，例如：

```
awk '
  FNR == NR {domain[$1] = 0; next}
  {
    for (dom in domain) {
      if (match($1, dom "$")) {
        domain[dom] += $2
        break
      }
    }
  }
  END {for (dom in domain) {print dom, domain[dom]}}
' domain site 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:29:36.903

您显然想读取`site`文件一次，而不是每个条目一次`domain`。不过，解决这个问题是微不足道的。

同样，`awk`（字段`$0`..`$9`等除外）中的变量不以 .. 为前缀`$`。特别是，`$dom`是由变量标识的字段编号`dom`（通常，这是`0`因为域字符串不会转换为任何其他数字）。

`site`我认为您需要找到一种方法来从从文件中读取的数据中获取域。我不确定您是否需要处理具有国家域的`bbc.co.uk`站点，例如 GTLD（`google.com`等）中的站点。假设您不处理国家/地区域，您可以使用：

```
BEGIN {
    while (getline dom < "./domain" > 0) domain[dom] = 0
    FS = "[ .]+"
    while (getline  < "./site" > 0)
    {
        topdom = $(NF-2) "." $(NF-1)
        domain[topdom] += $NF          
    }
    for (dom in domain) print dom "  " domain[dom]
} 
```

在第二个`while`循环中，有`NF`字段；`$NF`包含计数，并且`$1`..`$(NF-1)`包含域的组件。因此，`topdom`最终包含顶级域名，然后用于索引到在第一个循环中初始化的数组。

给定问题中的数据（减去点线），输出为：

```
yahoo.com  0
facebook.com  37
google.com  18 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T05:53:54.270

使用`awk`脚本的一种方法：

```
BEGIN {
    FS = "[. ]"
    OFS = "."
}

FNR == NR {
    domain[$1] = $0
    next
}

FNR < NR {
    if ($2 in domain) {
        for ( i = 2; i < NF; i++ ) {
            if ($i != "") {
                line = (line ? line OFS : "") $i
            }
        }
        total[line] += $NF
        line = ""
    }
}

END {
    for (i in total) {
        printf "%s\t%s\n", i, total[i]
    }
} 
```

像这样运行：

```
awk -f script.awk domain.txt site.txt 
```

结果：

```
facebook.com    37
google.com  18 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-14T08:24:17.563

上述答案的问题是，如果您使用字符串而不是正则表达式 /.../，则不能使用“元字符”（例如，\< 表示单词开头的单词边界）。如果您有一个域 xyz.com 和两个站点 ab.xyz.com 和 cd.prefix_xyz.com，则这两个站点条目的编号将添加到 xyz.com

这是使用 awk 的管道和 sed 命令的解决方案：...

```
for(dom in domain) {
    while(getline < "./site" > 0) {
        # let sed replaces occurence of the domain at the end of the site
        cmd = "echo '" $1 "' | sed 's/\\<'" dom "'$/NO_VALID_DOM/'"
        cmd | getline x
        close(cmd)
        if (match(x, "NO_VALID_DOM")) { 
          domain[dom]+=$2;
        }
    }
    close("./site") # this misses in original code
} 
```

...

# tsql - T-sql 中的记录顺序随统计信息更新而变化

> ID：11534181
> 
> 赞同：0
> 
> 时间：2012-07-18T04:10:55.430
> 
> 标签：tsql, sql-server-2008-r2, table-statistics

我在给定查询中遇到记录顺序问题。

```
SELECT 
EA.eaid, --int , PK of table1
EA.an, --varchar(max)
EA.dn, --varchar(max)
ET.etid, --int
ET.st --int
FROM dbo.table1 EA
JOIN dbo.table2 ET ON EA.etid = ET.etid
JOIN @tableAttribute TA ON EA.eaid = TA.id -- TA.id is int and is not a PK
ORDER BY ET.st 
```

ET.st 列的值对于给定场景中的所有记录都是相同的。

查询给出的记录顺序在更新统计信息时随机变化。有时它按 EA.eaid 的顺序排列，有时按 TA.id 的顺序排列。

请解释这种行为。统计数据如何影响这里的排序？

我正在使用 sql server 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:15:06.180

`ORDER BY`除非由子句指定，否则从数据库查询返回的行的顺序是未定义的。由于您只是排序，`ET.st`并且此列的所有值都相同，因此结果将以不确定的顺序返回（基于优化器确定的计划和使用的索引的顺序）。更新索引统计信息允许查询优化器选择最好的（通常是最确定的）索引；查询计划很可能已更改，从而导致出现不同的排序。

在我看来，您想订购的东西不是`ET.st`.

# ruby-on-rails - 更新 faye 事件监听器中的 activerecords

> ID：11534184
> 
> 赞同：0
> 
> 时间：2012-07-18T04:11:01.557
> 
> 标签：ruby-on-rails, faye, rackup

我正在编写一个 Rails 应用程序，它需要跟踪用户的状态以查看他们是否可用、忙碌或离线。我正在使用 private_pub gem，它在下面使用 Faye。当用户登录时，他订阅频道 /user/[:user_id]。当他们使用 Faye 的订阅事件侦听器订阅时，我想将用户的状态更新为 ONLINE。我在 private_pub.ru 文件的末尾添加了这段代码：

```
server = PrivatePub.faye_app

server.bind :subscribe do |client_id, channel|
  if /\/user\/*/.match(channel)
      m = /\/user\/(?<user_id>\d+)/.match(channel)
      user_id = m[:user_id]
  end
  user = User.find(user_id)
  user.status = 1 # 1 means online
end

run server 
```

问题是每次用户订阅时，瘦服务器都会报告：

```
[ERROR] [Faye::RackAdapter] uninitialized constant User 
```

我想我需要某些文件才能在 rackup 文件中使用 activerecords。但我不知道怎么做。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:46:10.607

在我们的项目中，我们决定将 redis 用于类似的情况。

宝石文件：

```
gem 'redis-objects' 
```

Faye：使用redis-rb写入状态

```
require 'redis'
Redis.current = Redis.new(:host => '127.0.0.1', :port => 6379)

# init faye server
...

server.bind(:subscribe) do |client_id, channel|
  if /\/user\/*/.match(channel)
    m = /\/user\/(?<user_id>\d+)/.match(channel)
    Redis.current.set("user:#{m[:user_id]}:online_status", "1")
  end
end 
```

Rails：使用 redis-objects gem 在用户模型中读取它。

```
class User < ActiveRecord::Base
  include Redis::Objects
  value :online_status
end

@user.online_status # returns "1" if channel is connected 
```

希望这可以帮助。

# android - Android 应用程序崩溃：无法实例化活动 ComponentInfo

> ID：11534187
> 
> 赞同：0
> 
> 时间：2012-07-18T04:11:23.707
> 
> 标签：android, android-logcat

```
07-18 04:48:22.465: E/AndroidRuntime(19105): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.liamwli.fa.yearbook/com.liamwli.fa.yearbook.Home}: java.lang.NullPointerException 
```

那是我得到的错误。

我在清单中定义了 Home 类：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.liamwli.fa.yearbook"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Holo" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Home"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Holo" >
            <intent-filter>
                <action android:name="com.liamwli.fa.yearbook.HOME" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

当我在主要活动中添加 putExtras 行时，它才开始这样做：

```
enter.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                myname = name.getText().toString();
                Intent i = new Intent("com.liamwli.fa.yearbook.HOME");
                i.putExtra("myname", myname);
                startActivity(i);       
            }
        }); 
```

那么，任何人都可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:17:10.063

用这个：

```
Intent i = new Intent(context,otherActivity.class); 
```

该活动的上下文，您要从其开始活动。otherActivity 是您要开始的活动的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:27:19.840

试试这个

```
Intent i = new Intent(MainActivity.this,Home.class);
i.putExtra("myname", myname);
startActivity(i); 
```

而且我认为清单中不需要这

```
 <intent-filter>
            <action android:name="com.liamwli.fa.yearbook.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:27:34.327

像这样改变

```
Intent i = new Intent(MainActivity.this, Home.class);
i.putExtra("myname", myname);
startActivity(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T04:27:53.367

试试这个...

```
Intent i = new Intent( YourActivityName.this , otherActivity.class); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T10:13:05.523

好的，我看了看，好像我在 onCreate 方法之外设置了一个变量内容。所以这就是它不起作用的原因。

# c# - C#复制粘贴多次不起作用

> ID：11534194
> 
> 赞同：0
> 
> 时间：2012-07-18T04:11:47.353
> 
> 标签：c#

在 Visual C# 中，我试图从多个文本框（一次一个）中获取文本并将它们粘贴到记事本中。我通过复制到剪贴板、alt-tab、然后粘贴到记事本来做到这一点……然后再粘贴到其他文本框。这段代码代表了这个想法：

```
subBox1.SelectAll();
subBox1.Copy();
SendKeys.Send("%{TAB}");    // alt+tab
SendKeys.Send("^v");        // paste
SendKeys.Send("{TAB}");     // tab

subBox2.SelectAll();
subBox2.Copy();
SendKeys.Send("^v");
SendKeys.Send("{TAB}");

subBox3.SelectAll();
subBox3.Copy();
SendKeys.Send("^v");
SendKeys.Send("{TAB}"); 
```

如您所见，这从三个文本框（名为 subBox1、2 和 3）复制和粘贴。但是，由于某种原因，只有最后一个文本框的内容被复制了。如果我注释掉第三个框也会发生这种情况......在这种情况下，只有第二个文本框的内容被复制。正如您在此处看到的，我已经尝试使用 SelectAll() 和 Copy() 以及 Clipboard 类。两者都有相同的问题。

例如，如果文本框内容分别是“asdf”、“qwer”和“zxcv”，我看到的只是“zxcv”三遍。

知道为什么会这样吗？我已经坚持了大约一个小时，不知道发生了什么。

万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:20:53.300

SendKeys 不会等待其他应用程序处理您发送的键，因此当记事本开始处理您的按键时，您的程序已经将`subBox3`' 的文本复制到其他文本的顶部。

您需要改用[SendWait](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx)。

同样，您可以使用以下内容，而不是发送 Alt+Tab：

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetForegroundWindow(IntPtr hWnd);

// ... 

SetForegroundWindow(FindWindow(null, "Untitled - Notepad")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:20:56.637

我会使用 SendMessage 来获得更准确的结果。要使用 SendMessage，您首先需要一个有效的记事本文本区域的窗口句柄。这可以通过多种方式完成，但我更喜欢只使用我的简单子查找功能。

您将需要以下命名空间导入和 PInvoke 声明：

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Collections.Generic;
using System.Text;

//pinvoke
[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);

[DllImport("user32.dll")]
[return:MarshalAs(UnmanagedType.Bool)]
private static extern bool GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount);

[DllImport("user32.dll")]
private static extern int GetWindowTextLength(IntPtr hWnd);

[DllImport("user32.dll")]
[return:MarshalAs(UnmanagedType.Bool)]
private static extern bool EnumChildWindows(IntPtr hParent, delChildWndProc callback, IntPtr lpParam);
//delegate callback for EnumChildWindows:
[return:MarshalAs(UnmanagedType.Bool)]
private delegate bool delChildWndProc(IntPtr hWnd, IntPtr lParam); 
```

现在，进入子窗口查找。基本上与 FindWindowEx 类似，但我想自己写，它可以检索多个窗口，这很不错。它使用以下包装类来描述调用之间的信息：

```
private class WindowLookup
{
    public string LookupName { get; private set; }
    public List<IntPtr> MatchedChildren { get; private set; }
    public int Depth { get; set; }
    public int MaxDepth { get; set; }

    public WindowLookup(string lookup, int maxdepth)
    {
        this.MatchedChildren = new List<IntPtr>();
        this.LookupName = lookup;
        this.MaxDepth = maxdepth;
        if (this.MaxDepth > 0)
            this.MaxDepth++; //account for the depth past the parent control.
        this.Depth = 0;
    }
} 
```

然后以下函数完成所有工作：

```
private static List<IntPtr> FindAllWindows(IntPtr hParent, string className, int maxdepth = 0)
{
    var lookup = new WindowLookup(className, maxdepth);
    var gcAlloc = GCHandle.Alloc(lookup);
    try
    {
        LookupChildProc(hParent, GCHandle.ToIntPtr(gcAlloc));
    }
    finally
    {
        if (gcAlloc.IsAllocated)
            gcAlloc.Free();
    }
    return lookup.MatchedChildren;
}

private static bool LookupChildProc(IntPtr hChild, IntPtr lParam)
{
    var handle = GCHandle.FromIntPtr(lParam);
    WindowLookup lookup = null;
    if (handle.IsAllocated && (lookup = handle.Target as WindowLookup) != null)
    {
        if (lookup.Depth < lookup.MaxDepth || lookup.MaxDepth == 0)
        {
            lookup.Depth++;
            var builder = new StringBuilder(256);
            if (GetClassName(hChild, builder, builder.Capacity) && builder.ToString().ToLower() == lookup.LookupName.ToLower())
                lookup.MatchedChildren.Add(hChild);
            EnumChildWindows(hChild, LookupChildProc, lParam);
        }
    }
    return true;
} 
```

您无需过多担心这些功能的实现，它们会按原样工作。关键是使用这些功能，您可以很容易地找到`notepad`'s`Edit`窗口（您输入的文本区域）的句柄。

```
var notepads = Process.GetProcessesByName("notepad");
if (notepads.Length > 0)
{
    foreach(var notepad in notepads) //iterate through all the running notepad processes. Of course, you can filter this by processId or whatever.
    {
        foreach(var edit in FindAllWindows(notepad.MainWindowHandle, "Edit"))
        {
            //next part of the code will go here, read on.
        }

    }
} 
```

现在，我离开代码的地方是当时正在运行的每个记事本进程的“编辑”窗口的循环中间。现在我们有了一个有效的窗口句柄，我们可以使用 SendMessage 向它发送内容。特别是附加文本。我编写了以下函数来处理将文本附加到遥控器：

```
private static void AppendWindowText(IntPtr hWnd, string text)
{
    if (hWnd != IntPtr.Zero)
    {
        //for your reference, 0x0E (WM_GETTEXTLENGTH), 0xB1 (EM_SETSEL), 0xC2 (EM_REPLACESEL)
        int len = SendMessage(hWnd, 0x000E, IntPtr.Zero, IntPtr.Zero).ToInt32();
        var unmanaged = Marshal.StringToHGlobalAuto(text);
        SendMessage(hWnd, 0x00B1, new IntPtr(len), new IntPtr(len));
        SendMessage(hWnd, 0x00C2, IntPtr.Zero, unmanaged);
        Marshal.FreeHGlobal(unmanaged);
    }
} 
```

现在我们有了 AppendWindowText 函数，您可以在上面的嵌套循环中添加一个函数调用（我放注释的地方）：

```
AppendWindowText(edit, "Some text here"); 
```

你有它。这是一个有点罗嗦的回应，但最终这种方法比使用 SendKeys 和聚焦窗口等要可靠得多。你永远不需要失去你自己的应用程序的焦点。

如果您有任何问题，请随时发表评论，我会尽我所能回答。

干杯，
J

编辑：一些参考资料：

[SendMessage 函数 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)
[EnumChildWindows 函数 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633494%28v=vs.85%29.aspx)
[使用 SendMessage 附加文本](http://support.microsoft.com/kb/109550)

# asp.net - Telerik 或 Devexpress 调度程序

> ID：11534201
> 
> 赞同：1
> 
> 时间：2012-07-18T04:12:49.030
> 
> 标签：asp.net, drag-and-drop, telerik, devexpress, scheduler

我们需要在我们的一个应用程序中使用调度程序。浏览后，我们发现了一些工具可以做到这一点。

我们为此找到了两个主要的第三方组件——Telerik **Scheduler**和**Devexpress 调度程序。**

我们需要另一个功能，比如我们需要将一些数据从另一个控件拖到这个调度程序。

所以这两个都给出了这个选项

对于 Telerik： [http ://demos.telerik.com/aspnet-ajax/scheduler/examples/draganddropintegration/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/scheduler/examples/draganddropintegration/defaultcs.aspx)

对于 Devexpress：[http ://documentation.devexpress.com/#WindowsForms/CustomDocument2274](http://documentation.devexpress.com/#WindowsForms/CustomDocument2274)

所以对于这个功能，哪个更好；我找不到这两种产品的调度程序组件的任何确切比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:32:28.490

这是一个主观问题，但两者的控制都不错，并且有很好的支持和丰富的功能集。我的建议是对两者都进行试用，看看它如何与您的喜好、总体设计以及您试图用它实现的目标相匹配。

# google-apps-script - 从 Google Apps Directory 获取电子邮件联系人列表？

> ID：11534203
> 
> 赞同：-1
> 
> 时间：2012-07-18T04:13:03.867
> 
> 标签：google-apps-script

有没有其他方法可以访问 Google Apps 脚本中 Google Apps Directory 下的电子邮件联系人？

正如我尝试过的替代方法一样：Google Apps 脚本中的 UserManager.getAllUsers() 以访问用户信息，但随后面临访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:23:08.817

UserManager 的文档说

> 此类允许管理员在 Google Apps 域中创建、更新、检索和删除用户。要使用此类，您必须首先在您的域上启用 Provisioning API。对于下一代控制面板，通过登录到您的管理员帐户启用 API，然后选择域设置和用户设置选项卡以选中启用供应 API 的复选框。如果您的控制面板不是下一代，请通过登录到您的管理员帐户并单击用户和组选项卡来启用 API。然后单击 Settings 子选项卡，选中复选框以启用 Provisioning API 并保存您的更改。

您能否确认您已启用下一代控制面板或 API。

# c# - 如何使用 C# 连续查询数据库？

> ID：11534204
> 
> 赞同：-2
> 
> 时间：2012-07-18T04:13:08.257
> 
> 标签：c#, sql-server

我想编写 C# 代码来帮助我连续查询数据库。

如果某个来源向数据库输入了一个条目（不确定何时输入），它应该由我的代码处理。（简单地说，我的代码应该始终监视数据库中的条目）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:18:19.640

你想达到什么目的？如果它在缓存中保持相对静态但仍可能更改的数据集（例如供应商列表）是最新的，Simon Whitehead 的 SqlDependency 提案将为您提供很好的服务。如果它正在处理更类似于请求（例如订单）的东西，那么具有激活功能的服务代理（内部或外部）应该是一个不错的选择。无论哪种方式，关键是不要让您的代码不断进入数据库说“有什么适合我的吗？”。相反，让数据库告诉您的应用程序什么时候有事情要做并采取相应的行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:17:13.620

你基本上有两个主要选择。

首先，您可以在表中添加一个额外的列，它是一个位字段，可能称为“HasBeenProcessed”。然后，您可以安排检查 HasBeenProcessed 为 0 的任何列。对其进行处理，然后将该列更新为 1。

或者，[您可以查看这篇 StackoverFlow 帖子](https://stackoverflow.com/questions/342031/net-sql-server-database-monitoring-insert-update-delete)，该帖子描述了使用 SqlDependency 类在结果集出现不同时引发事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T04:28:07.443

如果您使用的是 SQL Server 2008 R2 或 SQL Server 2012，则可以使用[StreamInsight](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/business-intelligence/complex-event-processing.aspx)针对数据更改和模式设置事件。如果您使用的是以前的版本 > 2005，则可以使用 Notification Services（尽管 StreamInsight 要优越得多，并且基本上取代了 Notification Services）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T08:48:33.443

将 WebService 添加到您的代码中。
向表中添加插入和更新触发器。
创建一个可以从触发器调用的 CLR 函数。
在该 CLR 函数中，使用所有必要的数据调用 Web 服务。
在 web 服务中，根据传递的参数做任何你需要做的事情。
添加配置表，并输入 Web 服务 URL。
将 url 作为参数传递给您的 CLR 函数。
您应该异步调用 Web 服务，以便将延迟降到最低。

**注意：**
我认为也可以从纯 SQL 调用 Web 服务，因此不一定需要 CLR。

# mysql-python - MySQL-python 错误

> ID：11534205
> 
> 赞同：0
> 
> 时间：2012-07-18T04:13:17.317
> 
> 标签：mysql-python

我已经下载了 MySQL-python 连接器并使用它安装了它

```
$ sudo python setup.py install. 
```

从 python shell 导入该包时，会引发以下错误。请帮帮我。

```
import MySQLdb
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/dist-packages/MySQLdb/__init__.py", line 19, in <module>
    import _mysql
  File "build/bdist.linux-i686/egg/_mysql.py", line 23, in <module>
  File "build/bdist.linux-i686/egg/_mysql_api_util.py", line 78, in setup_platform_namespace
ImportError: No module named _mysql_unix.api 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:03:17.867

我的安装`MySQLdb`不包含名为`_mysql_api_util.py`. 谷歌搜索它表明它来自另一个名为`jaraco.mysql`. 也许您之前尝试过安装它，但现在它与`MySQLdb`? 你可以卸载它然后再试一次吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T08:59:36.837

我建议一种不同的方法，使用`python-mysqldb`包和操作系统包管理器。MySQLdb 的安装不容易通过其他方式完成。

**Ubuntu/Debian**：`apt-get install python-mysqldb`

**基于 CentOS/rpm**：`yum install mysql-python`

**软呢帽**：`dnf install python-mysql`

# jquery - 发出多个 AJAX 请求的最实用方法

> ID：11534208
> 
> 赞同：2
> 
> 时间：2012-07-18T04:13:39.520
> 
> 标签：jquery

有点像 jQuery noobie 这里.. 我想知道是否有一种方法可以将多个 AJAX 请求合并到一个 JSON 对象中？例如。如果我有...

```
$.ajax({
  dataType: 'json',
  url: "test1.html",
  context: document.body
}).done(function() { 
  $(this).addClass("done");
}); 
```

**和**

```
$.ajax({
  dataType: 'json',
  url: "test2.html",
  context: document.body
}).done(function() { 
  $(this).addClass("done");
}); 
```

是否可以合并两者，所以我只有一个 JSON 对象。如果是这样，这无论如何都会有益吗？或者有没有更实用的方法来处理多个 AJAX 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:26:20.127

每个 ajax 函数都需要更改为返回一个 Deferred 对象，该对象在所有完成后管理调用的回调。当您的所有 ajax 调用成功完成时，该`done()`函数被链接以声明要运行的代码。`$.when`

该`done()`函数接收每个 ajax 调用的参数。每个参数都包含一个参数数组，这些参数将传递给该 ajax 调用的成功回调。因此，如果您查阅文档，您会看到[Deferred 对象的强大功能](http://api.jquery.com/category/deferred-object/)。

这将在您的代码中添加您需要的冲击力。希望这可以帮助。保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:50:41.870

你可以做一个小把戏。使用它时必须小心，以免弄乱。我给你一个整体逻辑，你可以做完整的实现。

```
function fireAjax(functions_list)
{
 // The variable functions_list will contain the list of functions like "getUsers,getStatsData,getTopnews"

  $.ajax({
    //bla bla bla
    data:{"getUsers[group_id]":group_id,"getUsers[foo]":bar,"getStatsData[limit]":limit},
    success:function(json_result)
            {
              // You have to form the result also according to the function names like
              /* { getUsers:[user1,user2,user3....],
                   getStatsData[stats1,stats2.....],
                   bla bla bla...
                  } */
                  // handle your responses here one by one
            }
   })

} 
```

# ruby-on-rails - 如何在路由级别而不是在操作级别重定向？

> ID：11534210
> 
> 赞同：0
> 
> 时间：2012-07-18T04:13:44.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, redirect, routes

我想重定向`campaigns#index`到`newsletters#index`路由级别 ( `config/routes.rb`)。

**配置/路由.rb**

```
#match '/campaigns' => redirect('/newsletters')             # something like this
resources :campaigns do
  put 'send_preview'
  put 'send_actual'
  put 'unschedule'
end 
```

以下测试成功，但我希望它成功，因为路由级重定向，而不是动作级重定向。

**测试/功能/campaigns_controller_test.rb**

```
class CampaignsControllerTest < ActionController::TestCase

test "get index should redirect to newsletters" do
  get :index
  assert_redirected_to newsletters_path
end 
```

**应用程序/控制器/campaigns_controller.rb**

一旦路由级重定向工作，我想摆脱这个动作：

```
def index
  redirect_to newsletters_path
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:57:08.300

您的评论行

```
match '/campaigns' => redirect('/newsletters') 
```

正在工作，而且

```
match '/campaigns', to: 'newsletters#index' 
```

也在工作。

# heroku - 1and1 域名重定向 HTTP 或 Frame 与 Heroku 主机？

> ID：11534212
> 
> 赞同：8
> 
> 时间：2012-07-18T04:14:09.223
> 
> 标签：heroku, url-redirection

所以我从 1and1 购买了一个域，说它是`www.mysite.com`，并在 Heroku 上托管我的应用程序`myapp.herokuapp.com`。我有两个用于转发域的选项 - HTTP 和 Frame。HTTP 转发似乎只是将我的 URL 从`www.mysite.com`to重定向`myapp.herokuapp.com`，这不是我想要的。但是我遇到了框架重定向的问题——如果我在我的网站上导航到不同的页面（例如`myapp.herokuapp.com/users`），它仍然会`www.mysite.com`在顶部显示，但不是`www.mysite.com/users`。如何让 URL 路径正确显示？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T04:30:12.180

您不想使用 (i)frame 方法 - 这是一种不好的做法，您会遇到现在遇到的问题。

您可能想要做的是：

1.  将 www.yourdomain.com 附加到您的 Heroku 应用程序（通过 Web 界面或 CLI[1]）
2.  设置 CNAME 记录以指向`www`您`yourapp.herokuapp.com`的 DNS 提供商，或者如果您还没有 DNS 托管，则使用 Zerigo DNS[2] 插件（听起来像*您*）
3.  （可选）通过您的 DNS 提供商/域注册商设置重定向以将[http://yourdomain.com](http://yourdomain.com)指向[http://www.yourdomain.com](http://www.yourdomain.com) - 这是可选的，但很有用，因为 Heroku 不建议将您的根域 (yourdomain.com) 到他们的 A 记录，以防他们发生变化。
4.  （可选）从您的应用程序代码或类似代码中将[http://myapp.herokuapp.com/ 重定向](http://myapp.herokuapp.com/)到[http://www.yourdomain.com/](http://www.yourdomain.com/)（例如，如果您使用 Rack 提供内容，则为 config.ru）

[1] [https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains) [2] [https://addons.heroku.com/zerigo_dns](https://addons.heroku.com/zerigo_dns)

# java - 在 jar 文件之外创建和读取 xml 文件

> ID：11534219
> 
> 赞同：0
> 
> 时间：2012-07-18T04:15:13.803
> 
> 标签：java, file-io, jar

最近一直在问很多，我所有的帖子都是关于同一个问题，但在不同的阶段和不同的可能答案（因为具体问题与上一个不同，但密切相关）。所以，如果看起来我在重复我的问题，我很抱歉。事实上，我不是。我一直在谷歌和这里搜索，但似乎没有一个答案能解决我的问题，或者我弄错了。

好吧，我的文件层次结构是：

```
+ MyGame
  + build.xml
  + src
  + ThisIsWhereEclipsePutsTheXMLFile
  + build
    + manyFoldersWithClassFiles
    + aSpecialFolderWhereTheEntryPointIs

    + ThisIsWhereIWantMyXMLfileToBe.xml
    + game.jar 
```

我的问题基本上是这样的：我的程序应该将其状态保存到文件中，然后读取该文件。该文件应该在 .jar 文件之外（只有一个），在同一个文件夹中。该文件可以存在或不存在。如果它存在，它应该覆盖它。

在我之前的问题中，我询问了[如何读取同一目录中的 xml 文件](https://stackoverflow.com/questions/11532179/read-a-xml-file-thats-in-the-same-directory)。当我从 Eclipse 使用它时，我得到的答案实际上解决了我的问题。

但我需要用我的整个程序创建一个 .jar 文件，并且我需要我的程序在我要求它执行此操作时创建这样的 xml 文件。

我的 save() 是这样的，当我在 Eclipse 上运行它时它似乎可以工作，但是当我运行它执行我的 .jar 文件时它不会工作：

```
public void save(Game game) throws IOException{
    Document doc = DocumentHelper.createDocument();
    doc.add(game.save());
    File save=null;
    save = new File("save.xml");

    FileWriter writer = new FileWriter(save);
    doc.write( writer);
    writer.close();
} 
```

这就是我从文件中获取信息的方式：

```
public Game getinfofromxml() throws IOException{
    Game game;
    SAXReader reader = new SAXReader();
    try{
        URL fileWithData= new File( "save.xml" ).toURI().toURL();
        Document document = reader.read(fileWithData);
        Element alreadySavedGame= document.getRootElement();
        game= getGameSaved(alreadySavedGame);
    }catch(DocumentException ex){
        throw new IOException();
    }
    return game;
} 
```

同样，这适用于 Eclipse，但是当我从我的 jar 文件中运行它时，这将不起作用。在 Eclipse 中，xml 文件是在 MyGame 文件夹中创建的，但不是在我的 .jar 文件夹中。当我执行我的 .jar 时，根本没有创建任何 XML。

现在，我一直在阅读这可能与类路径有关。那么，让我告诉你我是如何编译它的：

1）我运行Ant，它会生成构建目录。它不会自动创建 .jar。2）我创建 Manifest.txt 文件，我在其中写道：

```
 Main-Class: aSpecialFolderWhereTheEntryPointIs.MyMainClass
 Class-Path: . 
```

3）我在cmd上创建.jar文件： `jar cfm myGame.jar Manifest.txt *`

所以，我不认为我在那里犯了太多错误......

蚂蚁可能与它有关吗？任何想法？事先谢谢（对不起我的英语）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:25:41.533

停止考虑“当前目录”并放置配置。如[本答案](https://stackoverflow.com/a/10771948/418556)`user.home`所述。很长一段时间以来，操作系统制造商一直告诉我们*不要*把 config. 应用程序目录中的设置。

 *另请参阅“Java 程序如何使用 jar 中的文件进行读写？”的[答案。](https://stackoverflow.com/questions/5052311/how-can-a-java-program-use-files-inside-the-jar-for-read-and-write/5052359#5052359)了解更多提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:20:34.507

您写入和读取文件的方式是使用当前启动目录的相对路径...这取决于您启动 jvm 的位置以及您希望它写入和读取文件的位置。*

# php - PHP：将包含数据分配给变量？

> ID：11534222
> 
> 赞同：0
> 
> 时间：2012-07-18T04:15:45.037
> 
> 标签：php, include, strip-tags

这在逻辑上是我想要实现的目标：

```
$variable = include "file.html"; 
strip_tags($variable); 
```

1.  可能吗
2.  如果没有，我如何对我想要包含的文件的内容运行 strip_tags 函数。我只想获取文件的文本内容，而不是 html 数据。

希望我说得通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:17:57.403

您愿意使用`file_get_contents`( [http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php) ) 而不是`include`.

例子：

```
<?php
$file = 'file.html';
$data_without_html_tags = strip_tags(file_get_contents($file));
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T04:23:19.787

您可以通过缓冲缓存轻松地做到这一点：

```
ob_start();
include("whatever.html");
$whateverHtml = ob_get_clean(); 
```

更多关于输出控制[的信息](http://php.net/manual/en/book.outcontrol.php)。

# algorithm - 使用 1-1 函数从 id 生成代码

> ID：11534225
> 
> 赞同：3
> 
> 时间：2012-07-18T04:16:24.737
> 
> 标签：algorithm, function, mapping

有没有好的可逆 1-1 函数可以将一个整数映射到另一个整数？例如，给定范围 0-5，我想找到一个映射：

```
0->3
1->2
2->4
3->5
4->1
5->0 
```

此外，映射应该看起来是随机的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:24:50.177

您可以按升序填充数组并打乱它。如果不是最有效的内存，这通常会表现得相当好。

您还可以依赖封闭的离散变换，例如乘法。如果你有 2 个数字，P 和 K，那么（我认为）只要 P 和 K 互质，P^n mod K 将产生长度为 (K - 1) 的非重复伪随机序列，范围从 1 到K. 离散数学的这种特殊表现是密码学的前提之一。从序列倒退到指数被称为离散对数问题，这也是传统 RSA 安全的原因。

你要求一个可逆算法。如果您跟踪指数，您可以毫不费力地从 P^n mod K 转到 P^(n-1) mod K。您可以采取一些捷径从幂倒退到在密码学中不起作用的指数，因为算法的某些参数被故意丢弃以使其更难。

也就是说，如果您在处理此问题时碰巧通过解决离散日志问题来破坏 RSA，请务必让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:31:05.490

您可以使用分组密码生成这样的排列，而不必将整个事物保存在内存中（就像您要对列表进行洗牌一样）。我前段时间写了一篇关于它的博客文章，你可以在[这里](http://blog.notdot.net/2007/9/Damn-Cool-Algorithms-Part-2-Secure-permutations-with-block-ciphers)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:21:51.877

置换多项式怎么样？请参阅本文中的第 3 部分：[http](http://webstaff.itn.liu.se/~stegu/jgt2012/article.pdf) ://webstaff.itn.liu.se/~stegu/jgt2012/article.pdf它用于那里的噪音，但它看起来与您想要的完全一样。

它建议构造函数的形式`(Ax^2 + Bx) mod M`。这些函数中只有一小部分是可逆的/产生排列，但如果它存在的话，应该不难找到实际的逆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:12:45.840

[在范围内的非重复随机搜索算法](https://stackoverflow.com/questions/7116619/non-repetitive-random-seek-in-a-range-algorithm)中讨论了与此类似的内容。我很感兴趣，把一些想法放在[http://www.mcdowella.demon.co.uk/PermutationFromHash.html](http://www.mcdowella.demon.co.uk/PermutationFromHash.html)

# c# - 使用编程语言模拟外设行为

> ID：11534226
> 
> 赞同：0
> 
> 时间：2012-07-18T04:16:32.917
> 
> 标签：c#, java, c++, controls, peripherals

> **可能重复：**
> [在 C# 中获取鼠标位置](https://stackoverflow.com/questions/1316681/getting-mouse-position-in-c-sharp)

是否可以在其中一个端口上模拟外围设备，例如鼠标，并编写一个可以将点击发送到显示器上的 (x,y) 的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:26:59.983

是的你可以。几年前我为 NUnitForms 做了一个 MouseController。查看[http://nunitforms.sourceforge.net/](http://nunitforms.sourceforge.net/)

鼠标控制器的源代码在[http://nunitforms.svn.sourceforge.net/viewvc/nunitforms/trunk/nunitforms/source/NUnitForms/MouseController.cs?revision=32&view=markup](http://nunitforms.svn.sourceforge.net/viewvc/nunitforms/trunk/nunitforms/source/NUnitForms/MouseController.cs?revision=32&view=markup)

关键是使用Win32函数SendInput；[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx)

SendInput 函数将联合作为输入，C# 不容易支持。我所做的是定义两个函数 SendMouseInput 和 SendKeyboardInput 指定不同的输入结构但调用相同的函数。

```
[DllImport("user32.dll", EntryPoint="SendInput", SetLastError=true)]
internal static extern int SendMouseInput(int cInputs, ref MOUSEINPUT pInputs, int cbSize);

[DllImport("user32.dll", EntryPoint="SendInput", SetLastError=true)]
internal static extern int SendKeyboardInput(int cInputs, ref KEYBDINPUT pInputs, int cbSize); 
```

# java - 文本字段不会更新

> ID：11534237
> 
> 赞同：1
> 
> 时间：2012-07-18T04:18:38.313
> 
> 标签：java, swing

我的主类代码，问题是当变量从另一个类更改时，我的文本字段不会更新，它会更改变量，它只是字段不会更新

```
 //frame set up
    super("Calculator");
    setSize(500, 500);
    setResizable(false);
    super.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    super.setVisible(true);

    JPanel main = new JPanel();
    JPanel stats = new JPanel();

    //layouts

    GridLayout mainV = new GridLayout(5, 5);
    GridLayout statsV = new GridLayout(2, 3);
    setLayout(mainV);

    //setting up textArea

    JTextField health = new JTextField("Health: " + var.health); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
    JTextField energy = new JTextField("Energy: " + var.energy); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
    JTextField land = new JTextField("Land: " + var.land); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
    JTextField cash = new JTextField("Cash: " + var.cash); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
    JTextField bullets = new JTextField("Bullets " + var.bullets); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
    JTextField update = new JTextField(); //UNUSED...

    //setting up editible

    update.setEditable(false);
    health.setEditable(false);
    energy.setEditable(false);
    land.setEditable(false);
    cash.setEditable(false);
    bullets.setEditable(false);
    update.setEditable(false);

    //setting up the text

    JButton Attack = new JButton("Attack"); 
    Attack.addActionListener(new ActionListener() {
        Attack attack = new Attack(); 

        public void actionPerformed(ActionEvent e) {
            Attack();  
        }

        private void Attack() {
            if (var.energy >= 5) {
                var.energy -= 5; 
                var.cash += 100; 
                var.bullets -= 1; 
            } else {
                var.health -= 1; 
            }
        }
    });
    JButton Rest = new JButton("Rest");
    Rest.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            Rest(); 
        }

        private void Rest() {
            var.energy += 10; 
            var.cash -= 50; 
        }
    });
    JButton SellLand = new JButton("Sell Land"); 
    SellLand.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            sellLand(); 
        }

        private void sellLand() {
            var.land -= 1; 
            var.cash += 500; 
            System.out.println("Working"); 
            System.out.println(var.cash + "  " + var.land); 
        }
    });  
    JButton BuyBullets = new JButton("Buy Bullets"); 
    BuyBullets.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            BuyBullets(); 
        }

        private void BuyBullets() {
            var.cash -= 100; 
        }
    });  

    ButtonGroup actions = new ButtonGroup(); 

    add(health);
    add(energy); 
    add(bullets);
    add(land);
    add(cash); 
    add(Attack); 
    add(Rest);
    add(SellLand);
    add(BuyBullets); 
    setVisible(true); 

    String SHealth = "Health: " + var.health;
    String SEnergy = "Energy: " + var.energy;
    String SLand = "Land: " + var.land;
    String SCash = "Cash: " + var.cash;
    String SBullets = "Bullet(s): " + var.bullets;

    land.setText(SLand); 
    cash.setText(SCash); 
    bullets.setText(SBullets);
}

public static void main(String[] args) {
    new Main();
} 
```

变量类

```
int health = 3; 
int energy = 15; 
int land = 1; 
int cash = 100; 
int bullets = 5; 
```

请帮助我的文本字段不会更新，但变量正在改变，文本字段不会改变（我是编程新手，所以请解释一下）：D 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:00:35.627

这是完全可以预料的。JTextField 对您的变量一无所知。当您构造 JTextFields 时：

```
new JTextField("Health: " + var.health) 
```

您只是将一个字符串传递给由“Health”加上 var.health 的当前值组成的 JTextField。如果 var.health 稍后更改，则 JTextField 不知道。

如果要更新文本，则由您来监控变量，当它们发生变化时，更新 JTextField 的文本：

```
// Call this whenever the variables change
private void updateText() {
    health.setText( "Health: " + var.health );
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T05:04:16.383

您需要使用 settext 方法更新文本字段的文本。

更新的课程

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.WindowConstants;

public class TestFrame extends JFrame {

    private static final long serialVersionUID = 1L;
    private Var var = new Var();

    JTextField health;
    JTextField energy;
    JTextField land;
    JTextField cash;
    JTextField bullets;
    JTextField update ;
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                TestFrame thisClass = new TestFrame();
                thisClass.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                thisClass.setVisible(true);
            }
        });
    }

    /**
     * This is the default constructor
     */
    public TestFrame() {
        super("Calculator");
        setSize(500, 500);
        setResizable(false);
        super.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        super.setVisible(true);

        JPanel main = new JPanel();
        JPanel stats = new JPanel();

        //layouts

        GridLayout mainV = new GridLayout(5, 5);
        GridLayout statsV = new GridLayout(2, 3);
        setLayout(mainV);

        //setting up textArea

        health = new JTextField("Health: " + var.health); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        energy = new JTextField("Energy: " + var.energy); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        land = new JTextField("Land: " + var.land); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        cash = new JTextField("Cash: " + var.cash); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        bullets = new JTextField("Bullets " + var.bullets); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        update = new JTextField(); //UNUSED...

        //setting up editible

        update.setEditable(false);
        health.setEditable(false);
        energy.setEditable(false);
        land.setEditable(false);
        cash.setEditable(false);
        bullets.setEditable(false);
        update.setEditable(false);

        //setting up the text

        JButton Attack = new JButton("Attack"); 
        Attack.addActionListener(new ActionListener() {
           // Attack attack = new Attack(); 

            public void actionPerformed(ActionEvent e) {
                Attack();  
            }

            private void Attack() {
                if (var.energy >= 5) {
                    var.energy -= 5; 
                    var.cash += 100; 
                    var.bullets -= 1; 
                } else {
                    var.health -= 1; 
                }
                updateTextFields();
            }
        });
        JButton Rest = new JButton("Rest");
        Rest.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Rest(); 
            }

            private void Rest() {
                var.energy += 10; 
                var.cash -= 50; 
                updateTextFields();
            }
        });
        JButton SellLand = new JButton("Sell Land"); 
        SellLand.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                sellLand(); 
            }

            private void sellLand() {
                var.land -= 1; 
                var.cash += 500; 
                System.out.println("Working"); 
                System.out.println(var.cash + "  " + var.land); 
                updateTextFields();
            }
        });  
        JButton BuyBullets = new JButton("Buy Bullets"); 
        BuyBullets.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                BuyBullets(); 
            }

            private void BuyBullets() {
                var.cash -= 100; 
                updateTextFields();
            }
        });  

        ButtonGroup actions = new ButtonGroup(); 

        add(health);
        add(energy); 
        add(bullets);
        add(land);
        add(cash); 
        add(Attack); 
        add(Rest);
        add(SellLand);
        add(BuyBullets); 
        setVisible(true); 

        String SHealth = "Health: " + var.health;
        String SEnergy = "Energy: " + var.energy;
        String SLand = "Land: " + var.land;
        String SCash = "Cash: " + var.cash;
        String SBullets = "Bullet(s): " + var.bullets;

        land.setText(SLand); 
        cash.setText(SCash); 
        bullets.setText(SBullets);
    }

    private void updateTextFields()
    {
        health.setText("Health: " + var.health); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        energy.setText("Energy: " + var.energy); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        land.setText("Land: " + var.land); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        cash.setText("Cash: " + var.cash); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        bullets.setText("Bullets " + var.bullets); //WONT UPDATE!!!!!!!!!!!!!(But varibles do, not the textField)
        update.setText(""); //UNUSED...
    }

} 
```

你的 Var 类

```
public class Var {
    int health = 3; 
    int energy = 15; 
    int land = 1; 
    int cash = 100; 
    int bullets = 5;
} 
```

# c++ - Visual Studio 找不到任何标准 C++ 库文件

> ID：11534240
> 
> 赞同：4
> 
> 时间：2012-07-18T04:19:18.890
> 
> 标签：c++, visual-studio-2010, visual-c++

我有 vs2010 终极版，然后我下载了 2012 RC。一开始它运行良好，然后在某些时候.net 框架搞砸了，所以我卸载了 2012 和 2010（也许我也手动删除了一些文件夹）。现在我重新安装了 vs2010 终极版，问题是我认为不存在任何标准库文件，因为我不能包含它们中的任何一个。

任何帮助如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:11:08.120

这是 VS2012 RC/Beta 卸载程序的一个已知问题。它将取消注册平台 SDK，删除文件夹，甚至更糟 - 将对所有以前的 VS 版本进行更改。我不确定它会更改哪些注册表设置（Around `$(VCInstallDir)`）-但它会破坏它。

唯一的选择是找到相关的头文件、库和可执行文件，复制路径，然后将其添加到您的 VC2010（以及之前的版本，如果有的话）。您可以通过工具->选项中的 VC++ 目录来执行此操作，但这不适用于 VC2010！因此，您最好在项目本身中指定路径。

我知道，要求很高，但就是这样 - 或者你只是重新安装你的操作系统。有一些“完整的VS卸载”工具，但我现在找不到。

# java - 如何加载从小程序在线托管的随机访问或内存映射文件

> ID：11534243
> 
> 赞同：0
> 
> 时间：2012-07-18T04:19:52.067
> 
> 标签：java, applet, processing, bytebuffer, fileinputstream

我有一个处理脚本，其中我正在从一个不断更新的非常大的文件中绘制一小部分数据。数据将根据用户输入随机访问，因此为了提高速度而不将整个文件加载到内存中，我一直将文件作为 ByteBuffer 进行内存映射。这在本地机器上运行时效果非常好，但不幸的是，该项目的最终目标是 Web 小程序。有没有一种从小程序中访问的文件创建内存映射或随机访问文件结构的好方法？我看了很多 URL.openStream()，但不知道如何将 InputStream 变成我需要的。这是我为离线应用程序所拥有的：

```
//within my GraphicPlot class:

ByteBuffer bbuf;
FileChannel fc;

SetUpPlot(String fileName){    
  try {
    FileInputStream instream = new FileInputStream(fileName);
    fc = instream.getChannel();
    bbuf = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
  }
  catch (IOException e) { 
   e.printStackTrace();
   exit();
  } 
} 
```

无论我如何将 URL 发送到函数（绝对 URL、相对 URL 等），我都会收到文件未找到错误。

任何帮助将不胜感激！

编辑：我可能应该提到小程序将被签名，并且有问题的文件将托管在与小程序相同的目录中，因此不应该有任何小程序权限问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:53:40.007

FileInputStream 和内存映射仅适用于本地系统上的文件。您无法记忆映射只能通过 http 或其他协议获得的文件。要使用 FileInputStream 或内存映射，您必须首先在本地系统上进行复制。

这不是 Java 的限制，而是操作系统的限制。

# html - Firefox 中的宽度：自动无法按预期工作

> ID：11534248
> 
> 赞同：1
> 
> 时间：2012-07-18T04:20:38.967
> 
> 标签：html, css

所以，我有一个包含在 div ( `.indexWrap`) 中的图像：

```
<div id = "slider">      
<div class="indexWrap">                 
        <img class="indexImage" src="">                             
       </div>
</div> 
```

其中有 8 个在页面加载时通过 php 在名为 的 div 中创建`#slider`。我正在使用[平滑的 Div Scroll](http://www.smoothdivscroll.com/)在主页上显示这些图像。在 Chrome 中一切看起来都很好，在 IE 8 和 9 中看起来还不错。问题出在 Firefox 中。每个图像的自动宽度`div.indexWrap`设置不正确。div 似乎向右延伸了额外的 200-300 像素。这是CSS：

```
#slider{
    position: relative;
    top:50px;
    width:100%;
    height:275px;
}
div.scrollWrapper
{
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 100%;
}

div.scrollableArea
{
    position: relative;
    width: auto;
    height: 100%;
}
.indexWrap{
    float:left; 
    position:relative;
    width:auto;
    height:100%;

    padding-right:50px;
    padding-left:50px;
}
img.indexImage{
    float:left;
    position:relative;
    width:auto;
    height:100%;
} 
```

以下是有问题的实时版本的链接：[jasone.co](http://jasone.co)

编辑：最重要的是，在页面加载时，每个`div.indexWrap`都没有正确填充，但是随着滚动开始，下一个检索到的元素被正确填充，有点蹩脚。可能是这一切的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:15:14.313

尝试添加`display: inline-block;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:11:03.677

我通过摆脱图像周围的包装解决了这个问题。不是想要它，但它工作正常。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-18T04:26:10.470

只需删除...

宽度：自动；

//blah blah blah 来满足 SO 的最大字符要求，我不敢相信它真的需要这么长

# django - 为什么 Django 不能识别我安装的包？

> ID：11534253
> 
> 赞同：0
> 
> 时间：2012-07-18T04:21:20.100
> 
> 标签：django, python-2.7, dreamhost

我正在尝试在我的 Python 虚拟环境中通过 Pythonbrew 在 Dreamhost 共享托管文件上运行 python 2.7.3 安装 python-oath2 库。

首先，我在此链接上下载了 tarball，然后提取了文件内容。 [https://github.com/simplegeo/python-oauth2](https://github.com/simplegeo/python-oauth2)

然后我`cd`编辑到提取的文件夹中，然后运行

```
python setup.py build
python setup.py install 
```

`oauth2-1.5.211-py2.7.egg`这在目录中产生了一个新文件

```
/home/davidfaux/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages 
```

当我`import oauth2`在 Python 解释器中时，不会出现任何错误。但是，当我调用`import oauth2`Django 应用程序的 views.py 时，会引发错误：

```
Could not import myapp.views. Error was: No module named oauth2 
```

我尝试重新启动Passenger ( `touch tmp/restart.txt`)，重新启动Python ( `pkill python`)，然后重新进入服务器。我还尝试`pb switch 2.7.3`确保我使用的是正确版本的 Python。`oauth2`如果在 Python 解释器中导入它，为什么 Django 不让我导入它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:13:28.300

运行 django 应用程序的进程是：

1.  不使用您的自定义 Python，因此它找不到您的包
2.  在包中列出了不同的目录`PYTHONPATH`，但找不到它。
3.  最后，如果这两个都不正确 - 尝试`*.pyc`使用类似的方法删除所有文件 -`find . -name *.pyc -exec rm {} \;`并重新启动后端服务器（乘客）。

# permissions - 如何确定注册表访问被拒绝的根本原因

> ID：11534255
> 
> 赞同：1
> 
> 时间：2012-07-18T04:22:00.090
> 
> 标签：permissions, registry

我试图在管理员帐户下运行我在两台 Win 7 Home Premium 32 位 PC 上编写的程序。一个有 SP1，一个是非 SP'd。请参阅下面的部分操作的不同过程跟踪结果。如何弄清楚是什么阻止了一台 PC 允许同时访问

```
HKLM\Software\Microsoft\Windows\CurrentVersion\Policies\System    
HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System 
```

键和值，而不是另一个？

![适用于一个](../Images/ff892dd0f8da4d1d36e86d998fa43819.png)

![对另一个不起作用](../Images/e61b282c47733cc36afb0d46b01fb125.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:35:55.940

我认为这个问题是您没有指定密钥的权限。尝试获取密钥的所有权。

# ios - 当用户从 iPhone 卸载应用程序时，iOS 将如何通知 APNS 服务器/后端服务器？

> ID：11534257
> 
> 赞同：0
> 
> 时间：2012-07-18T04:22:12.293
> 
> 标签：ios, push-notification, apple-push-notifications

我有一个启用推送通知的应用程序。当用户从 iPhone 卸载应用程序时，iOS 如何通知 APNS 服务器/后端服务器？我在第 3 点的这个链接上找到的东西。[http://code.google.com/p/javapns/wiki/FeedbackService](http://code.google.com/p/javapns/wiki/FeedbackService)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:52:17.160

您应该定期查询 APNS 反馈服务，该服务将为您提供由设备令牌标识的非活动设备列表。使用此信息，您将能够使您的后端服务器保持最新状态。

# c++ - 需要示例代码在 QT 中使用滚动条在固定大小框架中显示多个小部件（小部件大小等于框架）

> ID：11534258
> 
> 赞同：-3
> 
> 时间：2012-07-18T04:22:24.860
> 
> 标签：c++, qt

我想在 QT 中使用滚动条在固定大小的框架中显示多个小部件（我的小部件的大小等于框架大小）。请建议我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:25:17.793

QScrollArea 类提供到另一个小部件的滚动视图。如果小部件超过框架的大小，则视图可以提供滚动条，以便可以查看子小部件的整个区域。

您可以在父小部件上布局多个小部件，而不是将父小部件设置为 QScrollArea。

路径中提供了 QtSDK 的示例

```
examples/widgets/imageviewer 
```

# mysql - 按 Mysql 命名顺序

> ID：11534263
> 
> 赞同：0
> 
> 时间：2012-07-18T04:23:07.527
> 
> 标签：mysql, sql-order-by

我的站点中列出了人名列表。现在有两个人是最资深的人，所以我希望他们的名字在开头。

IE

**输入**

**名称**

特种部队

蜘蛛侠

超人

蝙蝠侠

太空幽灵

穴居人

特警队

赫曼

**输出**

赫曼

超人

蜘蛛侠

特种部队

蝙蝠侠

太空幽灵

穴居人

特警队

现在一开始就想要Heman和Superman。什么是适合那个的Mysql Query。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:25:33.520

```
ORDER BY CASE WHEN `name` IN ('Heman', 'Superman')
              THEN 0
              ELSE 1
         END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:27:51.463

```
SELECT * FROM tableName
ORDER BY  `fname` IN ('Heman','superman') DESC; 
```

# c++ - 非本地 C++11 lambda 是否存在于匿名命名空间中？

> ID：11534265
> 
> 赞同：7
> 
> 时间：2012-07-18T04:23:09.263
> 
> 标签：c++, lambda, namespaces, c++11, global-variables

GCC 4.8 的最新版本在头文件中提供了以下代码：

```
auto L = [](){};

struct S
{
    decltype(L) m;
}; 
```

以下警告：

```
test.hpp:3:8: warning: 'S' has a field 'S::m' whose type uses the anonymous namespace [enabled by default]
 struct S
        ^ 
```

为什么编译器会考虑 lambda 的类型来使用匿名命名空间？我将 lambda 设为全局，我没有在任何地方使用匿名命名空间。

**更新**：即使我将 lambda 放在显式命名空间中，编译也会给出相同的警告，如下所示：

```
namespace N
{
    auto L = [](){};
}

struct S
{
    decltype(N::L) m;
}; 
```

**更新 2**：事实上，似乎甚至类范围 lambdas 也有同样的问题：

```
class N
{
    static constexpr auto L = [](){};
};

struct S
{
    decltype(N::L) m;
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T04:37:49.453

§5.1.2/3：

> lambda 表达式的类型（也是闭包对象的类型）是唯一的、未命名的非联合类类型——称为闭包类型——其属性如下所述。此类类型不是聚合 (8.5.1)。闭包类型在包含相应 lambda 表达式的最小块作用域、类作用域或命名空间作用域中声明。

因此，除非您在匿名命名空间内的代码中定义 lambda 表达式，否则 lambda 的类型也不应该包含在匿名命名空间中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T04:41:20.520

除非我错过了什么，否则这些都不应该在匿名命名空间中，尽管至少 GCC 和 MSVC 似乎都将它们放在那里。

`§5.1.2 [expr.prim.lambda] p3`

> *[...] 闭包类型在包含相应lambda-expression*的最小块范围、类范围或命名空间范围中声明。[...]

至少 Clang 似乎做对了，闭包类型位于应有的位置。

（您可以通过在某种警告/错误生成代码中简单地包含 lambda 来测试 lambda 类型驻留在哪个命名空间中。编译器应将其类型与警告/错误一起吐出。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:22:28.277

GCC 的警告可能有点令人困惑，但它的意图肯定是正确的。lambda 的类型是未命名的，它*在整个程序中*是唯一的。另一方面，如果您的类没有放在未命名的命名空间中（根据您的描述，我想它不是），那么您的类在您包含它的每个翻译单元中都是相同的类型。由于同一个类应该具有相同的成员，而不是不同翻译单元中的不同成员，因此这是一种违规（并导致未定义的行为）。

至少同样糟糕的是，`L`一旦`extern`将标头包含到多个翻译单元中，您将获得“L 的多个定义”链接器错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T04:43:31.987

在这种情况下，我没有阅读规范，只是想......但是，你能做一个测试吗？

您的 lambda 太琐碎，可能会变成无状态的 lambda。像你这样的无状态 lambda 可以通过编译器变成一个简单的 C 函数。可能有一些规则可以将此函数放在匿名命名空间中，以便它们仅存在于单个编译单元中。

所以我建议你让它成为非无状态的，比如引用一个变量，看看它是否仍然存在于这个匿名命名空间中。

# python - Python：在整数列表上使用 sum()

> ID：11534273
> 
> 赞同：0
> 
> 时间：2012-07-18T04:24:02.737
> 
> 标签：python, python-2.7

我正在编写一个简单的 python 脚本，它接受一个数字，将其转换为二进制，并返回二进制数字的总和。这是我到目前为止所拥有的。

```
#!/usr/bin/python

def sum2(n):
    a = str(bin(n))
    b = a.replace('0b', '')
    return sum([map(int, x) for x in b])

n = int(raw_input("Input number>"))
print sum2(n) 
```

在简单的英语中，我将*n*转换为二进制，然后将其转换为字符串。我砍掉*0b*（来自*bin()*）并将二进制字符转换为整数列表，然后尝试*sum()*它们。

当试图弄清楚如何将数字相加时，我搜索了一下，发现我应该能够*sum()*一个整数列表。当我尝试这样做时，我最终得到了这个回溯。

```
Traceback (most recent call last):
  File "D:\scripts\sum2n1.py", line 9, in <module>
    print sum2(x)
  File "D:\scripts\sum2n1.py", line 6, in sum2
    return sum([map(int, x) for x in b])
TypeError: unsupported operand type(s) for +: 'int' and 'list' 
```

所以我发现*sum()*需要一个“可迭代”来完成它的工作。我四处搜索，发现有一个可以调用的 iter() 函数，但它似乎不起作用。

```
There's also __iter__() which doesn't work either. 
```

谁能告诉我我做错了什么？我还是个初学者。提前致谢。

（不，这不是我的作业。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T04:41:47.593

为什么不简单

```
def sum2(n):
    return sum(x=='1' for x in bin(n)) 
```

甚至更简单

```
def sum2(n):
    return bin(n).count('1') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T04:28:00.963

您正在将列表推导与`map`函数结合起来，显然是在尝试两次做同样的事情。你想要：

```
sum(int(x) for x in b) 
```

或者

```
sum(map(int, b)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T04:27:02.670

这有效：

```
def sum2(n):
    idx = 3 if n < 0 else 2 # adjust index for slice based on neg/pos number
    a = bin(n)[idx:]        # doesn't assign the '0b' (or '-0b' for negatives)

    return sum(int(i) for i in a)  # convert chars into ints and sum 
```

请注意，使用切片表示法消除前导`'0b'`或`'-0b'`优于使用`replace()`.

您可以为此使用列表推导或生成器表达式。

**更新**：

在一个有用的评论中@DSM 指出`'-0b'`二进制字符串前面有负数，我更新了代码来处理这个问题，方法是根据数字的符号调整切片。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T04:26:56.037

尝试在您返回时执行此操作

```
return sum(map(int,b)) 
```

那应该工作

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T04:27:03.953

通过做`[map(int, x) for x in b]`，你做同样的事情两次。 `map(int, b)`将使每个数字成为一个整数。或者`[int(x) for x in b]`也会这样做。但你两者都做。选择一个或另一个。尝试：

```
sum([int(x) for x in b]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T04:29:39.833

不要将 map 调用包含在列表理解中。

代替

```
return sum([map(int, x) for x in b]) 
```

做这个：

```
return sum(map(int, b)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T04:43:56.027

一种使用 reduce ：

```
ans = reduce(lambda x,y:int(x)+int(y), L) 
```

# netty - netty 4.0 中的 NoSuchBufferException，关于 ChannelOutboundMessageHandler 构造的问题

> ID：11534275
> 
> 赞同：1
> 
> 时间：2012-07-18T04:24:22.923
> 
> 标签：netty

我想我不理解某些不同课程的意图。

所以我有一个简单的管道，基本上它采用通过自定义方法（hadoop writables）序列化的顶级对象，然后尝试将它们转换为 ByteBufs，然后发送它们。所以我实现了一个 OutboundFrameHandler，它接受消息对象，然后尝试序列化简单的帧，然后将其发送到上游。这是实现：

```
public class OutboundFrameHandler extends MessageToByteEncoder<MsgType> {

  public void encode(ChannelHandlerContext ctx, MsgType msg, ByteBuf out) throw Exception {
     byte[] data = ...; // custom serialization mechanism

     out.writeInt(data.length + 4);
     out.writeInt(msg.callId);
     out.writeBytes(data);
  }
 } 
```

在运行时我得到这个：

警告：一个 exceptionCaught() 事件被触发，它到达管道的末端。这通常意味着管道中的最后一个入站处理程序没有处理异常。io.netty.channel.NoSuchBufferException：找不到合适的目标缓冲区。仔细检查管道是否配置正确并且其处理程序是否按预期工作。

我查看了示例源代码，我注意到的一件事是“编码”编解码器看起来更像这样： public class StringEncoder extends MessageToMessageEncoder {}

'encode' 方法创建 ByteBuf。

但我也注意到 ProtobufVarint32LengthFieldPrepender 扩展了 MessageToByteEncoder 并使用了 ByteBuf out 参数。我查看了源代码，但我不确定“out”是如何设置的。它是通过调用 ctx.nextOutboundByteBuffer() 在 MessageToByteEncoder 'flush' 中获得的，但我不清楚这是如何工作的。看看这是怎么发生的，看起来这是在 init 期间设置的，其中一个处理程序需要从 newOutboundBuffer 返回一个 ByteBuf。

进行向后分析，似乎唯一从 newOutboundBuffer() 返回 ByteBuf 的子类是 ChannelOutboundByteHandlerAdapter。而且它的子类很少。

所以看看本地时间的例子，我不清楚 ProtobufVarin32LengthFieldPrepender 是如何工作*的*。看来，当我使用 MessageToByteEncoder 时，我真正想要的是 MessageToMessageEncoder

摘要问题： - 什么时候使用 MessageToByteEncoder - 当管道中似乎没有处理程序从 newOutboundBuffer 返回 ByteBuf 时，基于 MessageToByteEncoder 的编码器如何获得有效的出站 buf？

** 回答我自己 **

结果是（a）我没有将正确的消息类型排入队列！(b) 我发现了 HeadHandler，它似乎是“最后的手段”的 ByteBuf 生成器。现在一切都很好。

# excel - 将 MATLAB 数据提取到一个 Excel 电子表格中

> ID：11534276
> 
> 赞同：0
> 
> 时间：2012-07-18T04:24:38.900
> 
> 标签：excel, matlab

首先有一个MATLAB代码（伪代码）：

```
for i = 1:2
A(i) = [C(i);D(i)];
B(i) = [E(i);F(i)]; 
end 
```

每个循环中 A 和 B 的值如下，

```
A(1) =     
'Rank'    'Ticker'    '201205'    'Weight'
[   1]    'B'         [ 0.04]     [       0.03]
[   2]    'E'         [ 0.01]     [       0.10]

A(2) =     
    'Rank'    'Ticker'    '201206'    'Weight'
    [   1]    'X'         [ 0.02]     [       0.07]
    [   2]    'Y'         [ 0.01]     [       0.11]

B(1) =     
'Rank'    'Sector'    '201205'    
[   1]    'S'         [ 0.02]    
[   2]    'A'         [ 0.01]   

B(2) =     
    'Rank'    'Sector'    '201206'  
    [   1]    'T'         [ 0.08]   
    [   2]    'Y'         [ 0.03] 
```

现在来到我的问题。如何在循环中添加代码，以便可以将每个循环生成的 A 和 B 的所有值提取到单个电子表格中，如下图所示链接中所示？

![在此处输入图像描述](../Images/851e42b0459e082c7b81c76568d7a57f.png)

诀窍是数据应该在电子表格的不同区域中针对不同的 i 提取。

顺便说一句，这是一个简化版本。实际问题有 500 个循环而不是 2 个。A 和 B 也更复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:06:16.227

我通常这样做：

```
table = {};
res_wid = 2;
res_height = 3;
dist = 2;
for i=1:10
    x_pos = (i-1)*(res_wid + dist)+ (1:res_wid);
    for j=1:10
        y_pos = (j-1)*(res_height + dist)+ (1:res_height);
        data = {
            'label 1','label 2'
            rand, rand
            rand, rand
            };
        table(y_pos,x_pos) = data;
    end
end 
```

请注意，当您编写这些文件时，excel 有一些愚蠢的限制：65,536 行 x 256 列（请参阅[excel 规范](https://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx)）。一个人可以很容易地在那些中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:55:33.637

您可以将其全部转储到 CSV 文件（逗号分隔值）。

只需将一个文本变量添加到您的 for 循环中，该变量会累积所有数据，因此它看起来像这样：

（somecsvfile.csv 的内容）

```
201205,weight,,,rank,sector,201205,
0.04  ,0.03  ,,,   1,S     ,0.02 
```

# javascript - 使用 javascript 在一组元素上切换类

> ID：11534279
> 
> 赞同：0
> 
> 时间：2012-07-18T04:25:14.467
> 
> 标签：javascript, class, toggle

我有这个标记：

```
<div> TEXT <a class="toggle-action"> TOGGLE </a></div>
<dl class="collapsed">
  ...

</dl>
<dl class="collapsed">
  ...
</dl> 
```

当我单击切换链接时，`<dl>`下面的所有元素都应该将它们的类从展开切换到折叠并返回。但只有第一级 DL，因为其中一些可能`DD`与其他 DL 有元素......

我怎么能用javascript做到这一点？

我知道如何用 jQuery 来做，但我想避免它，因为它只为这件事增加了太多的负载。

目前我有这个：

```
document.addEventListener('click', function(e){

  // my link
  if(e.target.className.indexOf('toggle-action') !== -1){
     // here how to select DLs?
  }

}); 
```

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:07:25.820

请参阅以下链接：- [http://www.daniweb.com/web-development/javascript-dhtml-ajax/code/217121/sharing-the-classname](http://www.daniweb.com/web-development/javascript-dhtml-ajax/code/217121/changing-the-classname)

它试图做类似的事情，但在 js

# objective-c - 使用 SKProductsRequest 请求在应用程序中购买时的错误顺序

> ID：11534281
> 
> 赞同：2
> 
> 时间：2012-07-18T04:25:32.450
> 
> 标签：objective-c, cocoa-touch, in-app-purchase

我已设法在我的应用中实现应用内购买，但在请求产品时遇到了一些问题。从商店返回的产品顺序与我的标识符列表的顺序不匹配。我要求使用以下代码的产品：

```
self.request = [[[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObjects: @"50Hints",@"120Hints",@"250Hints",@"400Hints", nil]] autorelease];
    //NSLog(@"Sending request...");
    request.delegate = self;
    [request start]; 
```

我收到的产品清单如下：

```
the products (
    "<SKProduct: 0xc660bb0>",
    "<SKProduct: 0xc661110>",
    "<SKProduct: 0xc661160>",
    "<SKProduct: 0xc6611b0>"
) 
```

这不是相同的顺序（第一个对应于@“120Hints”而不是@“50Hints”）

在 IOS 5 之前这不是问题，因为我可以使用 [SKPayment paymentWithProductIdentifier:productIdentifier]，productIdentifier 是与产品名称对应的字符串，但现在我必须使用 paymentWithProduct 接受产品（例如 SKProduct: 0xc660bb0）而不是名字。所以我必须找出哪个是哪个。

有没有办法通过使用 paymentWithProduct 使用其名称购买产品？如果不是，应用内购买的顺序是随机改变还是永久改变？

干杯伙计西里尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:04:48.840

我这样做的方法是使用 SKProduct 的属性，其中一些我显示在表格中供用户选择——其中一列显示了产品标识符。这是为 OSX 项目完成的，但概念应该是相同的。

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {
    self.productsFromItunes = [NSMutableArray array];
    for(SKProduct *aProduct in response.products){
        NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:aProduct,@"theProduct",aProduct.price,@"thePrice",aProduct.localizedTitle,@"theTitle",aProduct.productIdentifier,@"theID",nil];
        [self.productsFromItunes addObject:dict];
    }
    [NSBundle loadNibNamed:@"BuyCredits" owner:self];
    [self.buyCreditsWindow makeKeyAndOrderFront:self];// this window has the table of choices
}

// Connected to the "Purchase" and "Cancel" buttons in the Buy Credits window
-(IBAction)buyOrCancel:(NSButton *)sender {
    if ([sender.title isEqualToString:@"Purchase"]){
        SKProduct *chosenProduct = [self.buyCreditsController.selectedObjects.lastObject valueForKey:@"theProduct"];
        SKPayment *thePayment = [SKPayment paymentWithProduct:chosenProduct];
        [SKPaymentQueue.defaultQueue addPayment:thePayment]; // This method sends the buy request to the app store
    }
    [self.buyCreditsWindow orderOut:self];
} 
```

# nhibernate - NHibernate 会话自定义数据

> ID：11534289
> 
> 赞同：1
> 
> 时间：2012-07-18T04:26:20.147
> 
> 标签：nhibernate

我想做的是在我为 NHibernate 配置的 Save、Update、Delete 侦听器中拥有当前用户 ID。

在我看来，最好的方法是将此信息插入到 ISession 对象中，然后在侦听器中读取此信息。但是好像没有地方可以做。

一种方法是实现接口，但是，我找不到任何可以继承的示例或基类（ISession 的成员太多）。一旦我完成了我的实现，我就知道侦听器可以进行类型转换并获取用户 ID。

该应用程序是带有 Sql Server 2008 的 ASPNET MVC2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:17:38.610

如果您为每个线程使用一个会话，则可以将其存储在线程静态字段中：

```
[ThreadStatic]
private static int userId;

public static void UserId { get { return userId; } set { userId = value; } } 
```

为避免线程池将值从一个会话传递到另一个会话，您应该在事务结束时重置该值（例如，在事务提交事件中）。

注意：我这样做非常成功。但我已经把它包裹在一些服务后面。只有一个 ThreadStatic 字段，其中包含一个自制的 TransactionContext，其中包含会话和我需要的所有其他数据。

* * *

当您通过自己的方法访问会话时，您可以改用 SessionContext 类。它需要更改调用者，但您不必包装会话。

像这样的东西：

```
public class ISessionContext : IDisposable
{
  public ISession Session { get; }

  public SessionData Data { get; }
}

public ISessionContext CreateSession()
{
  return new SessionContext(SessionFactory.OpenSession(), new SessionData(user));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:41:13.623

我想得更好，我想。

我刚刚创建了一个实现 NHibernate.ISession 的包装器，所以在我的方法中：

```
public NHibernate.ISession OpenDataSession(int userId)
{
  return new SessionWrapper(SessionFactory.OpenSession(), userId, this);
} 
```

这样，在我的监听器中，我只需将类型转换为 SessionWrapper 并获取 UserId 属性。

到目前为止效果很好，我的包装器也实现了 IDisposable，所以应该没问题。

好吧，如果有人知道更好，请告诉我。

更新：根据要求提供更多见解。

SessionWrapper 类定义：只需实现 NHibernate.ISession 并将所有方法重新映射到 WrappedSession（构造函数的第一个参数），例如：

```
 public DataStoreSessionWrapper(NHibernate.ISession wrappedSession, UserSession currentUser)
    {
    }

    public NHibernate.EntityMode ActiveEntityMode
    {
      get { return WrappedSession.ActiveEntityMode; }
    }

    public NHibernate.ITransaction BeginTransaction(System.Data.IsolationLevel isolationLevel)
    {
      return WrappedSession.BeginTransaction(isolationLevel);
    } 
```

这个想法是，通过使用 Ninject，您可以将 NHibernate.ISession 绑定到这个包装器。虽然这假设 UserSession 对象也可以被容器访问，这是真的，因为 UserSession 可以存储在 Session 包中。

UPDATE2（随着我的发展：D）：我有另一种方法，我认为这更好。

我没有包装器，而是有一个接口 IUserSessionStore，它基本上只有一个方法：返回 UserSession 对象的 GetUserSession()。该接口位于所有需要此信息的类的构造函数中。

通过 Ninject，我简单地将这个接口映射到一个名为 UserSessionStore_ASPNETSession 的类，该类通过将对象存储到 ASPNET 会话包中来实现这一点。

显然，我假设这是一个网站，所有内容都在一个层中（不涉及远程处理或 wcf）。

我相信这实现起来更干净、更快捷，而且它也有利于可能需要此信息的所有其他层。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T11:09:39.283

我有同样的问题，但我的情况不同：

我有哪个`NHibernateSessionManager`手柄`ISession`等`ITransaction`

然后我用来保存编辑器实体，然后我用来`CallContext.SetData`在, ,中检索它`NHibernateSessionManager``CallContext.GetData``IPreUpdateEventListener``IPreInsertEventListener``IPreDeleteEventListener`

CallContext 文档：

[http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.callcontext.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.callcontext.aspx)

在我使用的网络环境中`HttpContext.Current.Items`

# android - 将字符串从 1 个屏幕传递到 android 中的其他屏幕

> ID：11534290
> 
> 赞同：0
> 
> 时间：2012-07-18T04:26:22.973
> 
> 标签：android, android-edittext

在我的应用程序中，我必须将 5 个编辑文本值从 1 个屏幕传递到其他屏幕。我把它放进去`putextra`，`getextra`但是我得到了`null pointer exception`。我不知道我做错了什么。帮助我。

这是我的代码：

过关画面：

```
long id=0;
                    db.open();
//                  id=db.insertSpinTitle(group1.getText().toString(), group2.getText().toString(), group3.getText().toString(), group4.getText().toString(), group5.getText().toString());                 
                    Intent spin=new Intent(getApplicationContext(),DBadapter.class);
                    spin.putExtra("grp1val", group1.getText().toString());
                    spin.putExtra("grp2val", group2.getText().toString());
                    spin.putExtra("grp3val", group3.getText().toString());
                    spin.putExtra("grp4val", group4.getText().toString());
                    spin.putExtra("grp5val", group5.getText().toString());
//                  setResult(1,spin); 
                   db.updateSpinTitle();
                    startActivity(spin);

                    finish(); 
```

获取画面：

```
public long updateSpinTitle() 
{
    System.out.println("Inside update");
    ContentValues initialValues = new ContentValues();
    for(int i=1;i<=6;i++)
    {
        System.out.println("inside for");       
        Intent intent=getIntent();      
        System.out.println("subbu=");
        if(i==1) initialValues.put(KEY_SPIN, intent.getStringExtra("grp1val")); 
        if(i==2) initialValues.put(KEY_SPIN, intent.getStringExtra("grp2val")); 
        if(i==3) initialValues.put(KEY_SPIN, intent.getStringExtra("grp3val"));
        if(i==4) initialValues.put(KEY_SPIN, intent.getStringExtra("grp4val")); 
        if(i==5) initialValues.put(KEY_SPIN, intent.getStringExtra("grp5val")); 
        if(i==6) initialValues.put(KEY_SPIN, "Edit"); 

        db.update(DATABASE_TABLESPIN, initialValues, KEY_ROWID + "=" + i, null);
        }
    return 0 ;
            } 
```

这是我的日志：

```
07-18 09:55:02.324: D/AndroidRuntime(435): Shutting down VM
07-18 09:55:02.324: W/dalvikvm(435): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
07-18 09:55:02.324: E/AndroidRuntime(435): Uncaught handler: thread main exiting due to uncaught exception
07-18 09:55:02.344: E/AndroidRuntime(435): java.lang.NullPointerException
07-18 09:55:02.344: E/AndroidRuntime(435):  at com.budget1.DBadapter.updateSpinTitle(DBadapter.java:128)
07-18 09:55:02.344: E/AndroidRuntime(435):  at com.budget1.SpinnerEdit$1.onClick(SpinnerEdit.java:58)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.View.performClick(View.java:2364)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.View.onTouchEvent(View.java:4179)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.View.dispatchTouchEvent(View.java:3709)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-18 09:55:02.344: E/AndroidRuntime(435):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
07-18 09:55:02.344: E/AndroidRuntime(435):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
07-18 09:55:02.344: E/AndroidRuntime(435):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.os.Looper.loop(Looper.java:123)
07-18 09:55:02.344: E/AndroidRuntime(435):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-18 09:55:02.344: E/AndroidRuntime(435):  at java.lang.reflect.Method.invokeNative(Native Method)
07-18 09:55:02.344: E/AndroidRuntime(435):  at java.lang.reflect.Method.invoke(Method.java:521)
07-18 09:55:02.344: E/AndroidRuntime(435):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-18 09:55:02.344: E/AndroidRuntime(435):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-18 09:55:02.344: E/AndroidRuntime(435):  at dalvik.system.NativeStart.main(Native Method)
07-18 09:55:02.366: I/dalvikvm(435): threadid=7: reacting to signal 3
07-18 09:55:02.366: E/dalvikvm(435): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:44:08.927

我认为你需要通读Intents，在使用它之前，我们需要使用intents来激活android应用程序中的一些组件，组件包括Activity、Service、BroadcastReceiver。我们为意图添加了一些额外的值，因此目标组件可以选择数据。要从不需要使用意图的任何活动中保存和获取数据，我们可以简单地调用数据库助手类的任何方法，例如，您可以将此方法编写为：

```
 db.open();
 db.updateSpinTitle(group1.getText().toString(), group2.getText().toString(),
                         group3.getText().toString(),  group4.getText().toString(),
                         group5.getText().toString()); 
```

并将方法 updateSpinTitle 更改为以下内容：

```
public long updateSpinTitle(String grp1, String grp2, String grp3, String grp4, String grp5) 
{
    System.out.println("Inside update");
    ContentValues initialValues = new ContentValues();
    for(int i=1;i<=6;i++)
    {
        System.out.println("inside for");       
        if(i==1) initialValues.put(KEY_SPIN, grp1); 
        if(i==2) initialValues.put(KEY_SPIN, grp2); 
        if(i==3) initialValues.put(KEY_SPIN, grp3);
        if(i==4) initialValues.put(KEY_SPIN, grp4); 
        if(i==5) initialValues.put(KEY_SPIN, grp5); 
        if(i==6) initialValues.put(KEY_SPIN, "Edit"); 

        db.update(DATABASE_TABLESPIN, initialValues, KEY_ROWID + "=" + i, null);
        }
    return 0 ;
            } 
```

如果它的 DBAdapter 是一个活动，那么您应该在活动的生命周期方法之一中调用 updateSpinTitle，例如 onCreate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:46:38.863

代替：

```
intent.getStringExtra("grp1val"); 
```

写：

```
intent.getExtras().getString("grp1val"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:39:09.030

我不确定，但它`Screen 1 i.e First Activity`与您正在调用的同一 Activity中设置值的代码接缝`getIntent()`。那当然是空的。

在`updateSpinTitle()`设置相同后调用`Intent``Activity`

如果`updateSpinTitle()`在同一个班级，我猜是的。

然后简单地做..

```
{
    System.out.println("Inside update");
    ContentValues initialValues = new ContentValues();
    for(int i=1;i<=6;i++)
    {
        System.out.println("inside for");       
        if(i==1) initialValues.put(KEY_SPIN, group1.getText().toString()); 
        if(i==2) initialValues.put(KEY_SPIN, group2.getText().toString(),); 
        if(i==3) initialValues.put(KEY_SPIN, group3.getText().toString(),);
        if(i==4) initialValues.put(KEY_SPIN, group4.getText().toString(),); 
        if(i==5) initialValues.put(KEY_SPIN, group5.getText().toString(),); 
        if(i==6) initialValues.put(KEY_SPIN, "Edit"); 

        db.update(DATABASE_TABLESPIN, initialValues, KEY_ROWID + "=" + i, null);
        }
    return 0 ;
            } 
```

和

然后像这样打电话..

```
 db.open();
//                  id=db.insertSpinTitle();                 
                    Intent spin=new Intent(getApplicationContext(),DBadapter.class);

                   db.updateSpinTitle();
                    startActivity(spin);

                    finish(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T04:40:29.163

如果您遇到问题的意图和 put/getExtras，我认为这就是您错过的。

代替：

```
 intent.getStringExtra("grp1val") 
```

利用：

```
intent.getExtras().getStringExtra("grp1val") 
```

并尝试在 setContentView 之后的 onCreate 中获取您的意图

```
intent=getIntent(); 
```

# html - HTML 表头 CSS 主题

> ID：11534292
> 
> 赞同：1
> 
> 时间：2012-07-18T04:26:40.637
> 
> 标签：html, css, html-table, z-index

我有一些 CSS 主题，我想对表头做一些实际不支持的表头。（太好了，对吧？！）

所以我的想法是在表头后面添加一个元素并将主题应用于它！

然而，我尝试添加带有负 z-index 的表、tbodies、theads、th's 或 td's 都失败了。

另一方面，我可以将我的表头放在它自己的表中，然后封装表并在其上进行主题化...但是我的表头中的 th 不会与我的 tbody 中的 td 对齐！我无法封装 tbody 或 td's/tr，因为当不被 td 或 tr 封装时，表中不允许 div ......

我想做的效果是：设置边框宽度和颜色设置边框半径设置背景图像和颜色

边界半径是行不通的

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:39:54.780

我不确定这是您要查找的内容，但您可以使用“th”元素为表头设置 CSS。例如。尝试以下实现，

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">

td
{
border:1px solid black;
}
thead th
{
border:1px solid green;
}
thead th:first-child
{
border-radius:12px 0px 0px 12px;
}
thead th:last-child
{
border-radius:0px 12px 12px 0px;
}
</style>
</head>

<body>
<table cellpadding="0" cellspacing="0">
<thead>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Middlename</th>
</tr>
</thead>
<tbody>
<tr>
<td>Peter</td>
<td>Griffin</td>
<td>Griffin</td>
</tr>
<tr>
<td>Lois</td>
<td>Griffin</td>
<td>Griffin</td>
</tr>
</tbody>
</table>
</body>
</html> 
```

请检查[链接](http://www.w3schools.com/css/css_table.asp)。

您还可以使用 CSS3 设置边框半径。

```
border-radius:10px 0 0 10px; 
```

如果跨浏览器兼容性是一个问题，您可以使用圆形图像作为背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:07:22.913

一般技巧是格式化末端`<th>`单元格，使它们仅在一侧具有圆形边缘。以下是 webkit 浏览器的示例：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Table Head CSS</title>
    <style type='text/css'>
      table{
      border-spacing: 0;
      }
      th.left{
      margin-right: 0;
      padding-right: 0;
      border-width:2px 0 2px 2px;
      border-style: solid;
      -webkit-border-top-left-radius: 5px;
      -webkit-border-bottom-left-radius: 5px;
      }
      th.middle{
      margin: 0;
      padding: 0;
      border-width:2px 0 2px 0;
      border-style: solid;      
      }
      th.right{
      margin-left: 0;
      padding-left: 0;
      border-width:2px 2px 2px 0;
      border-style: solid;
      -webkit-border-top-right-radius: 5px;
      -webkit-border-bottom-right-radius: 5px;
      }
    </style>
  </head>
  <body>
    <table>
      <thead>
    <tr>
      <th class='left'>Test</th><th class='middle'>Test 2</th><th class='right'>Test 3</th>
    </tr>
      </thead>
      <tbody>
    <tr>
      <td>data</td><td>data 2</td><td>data 3</td>
    </tr>
      </tbody>
  </body>
</html> 
```

# python - PyInstaller 不会将 PyQt 的图像加载到 GUI

> ID：11534293
> 
> 赞同：12
> 
> 时间：2012-07-18T04:26:45.743
> 
> 标签：python, python-2.7, pyqt4, pyinstaller

我在将脚本传递给可执行文件时遇到了一些复杂的问题，但我终于设法做到了。主要问题是 PyInstaller 不会将图像加载到 GUI。

它应该是这样的：

![它应该是什么样子](../Images/156d2fe37fd7b9c5821bae33ef05a967.png)

这是它的样子：

![它看起来如何](../Images/df71beb6e1645bfb32e82c7bc44bea62.png)

而且我似乎找不到问题，这是 .spec 文件：

```
a = Analysis([os.path.join(HOMEPATH,'support\\_mountzlib.py'), os.path.join(HOMEPATH,'support\\useUnicode.py'), 'programa.py'],
             pathex=['img', 'C:\\Users\\Poblet\\ManGet\\HeyMang\\pyinstaller'])
pyz = PYZ(a.pure)
exe = EXE(pyz,
          a.scripts,
          exclude_binaries=1,
          name=os.path.join('build\\pyi.win32\\Hey Mang!', 'Hey Mang!.exe'),
          debug=False,
          icon='heymang.ico',
          strip=False,
          upx=True,
          console=False )
coll = COLLECT( exe,
               Tree('C:\\Users\\Poblet\\ManGet\\HeyMang\\pyinstaller\\img'),
               a.binaries,
               a.zipfiles,
               a.datas,
               strip=False,
               upx=True,
               name=os.path.join('dist', 'Hey Mang!'))
app = BUNDLE(coll,
             name=os.path.join('dist', 'Hey Mang!.app')) 
```

它应该抓取这些图像，就像它在这里所说的那样：

```
Warnings written to C:\Users\Poblet\ManGet\HeyMang\pyinstaller\Hey Mang!\warnHey Mang!.txt
checking PYZ
rebuilding outPYZ1.toc because outPYZ1.pyz is missing
building PYZ outPYZ1.toc
checking PKG
rebuilding outPKG3.toc because outPKG3.pkg is missing
building PKG outPKG3.pkg
checking EXE
rebuilding outEXE2.toc because Hey Mang!.exe missing
building EXE from outEXE2.toc
I: SRCPATH [('heymang.ico', None)]
I: Updating icons from ['heymang.ico'] to c:\users\poblet\appdata\local\temp\tmpr34zmp
I: Writing RT_GROUP_ICON 0 resource with 76 bytes
I: Writing RT_ICON 1 resource with 1128 bytes
I: Writing RT_ICON 2 resource with 4264 bytes
I: Writing RT_ICON 3 resource with 9640 bytes
I: Writing RT_ICON 4 resource with 16936 bytes
I: Writing RT_ICON 5 resource with 67624 bytes 
```

它们在文件夹中，但由于某种原因它们不起作用。

整个源代码（减去 PyInstaller 文件）在[这里](https://github.com/DoctorMalboro/HeyMang)。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T17:36:40.550

我能够解决这个问题，这也应该对其他人有所帮助：

*   使用以下命令创建 .spec 文件：

    ```
    python Makespec.py --noconsole --icon="youricon.ico" --name="App name" program.py 
    ```

*   打开 .spec 文件（例如：App name/App name.spec），您应该会看到如下内容：

    ```
    a = Analysis([
            os.path.join(HOMEPATH,'support\\_mountzlib.py'),
            os.path.join(HOMEPATH,'support\\useUnicode.py'),
            'program.py'
        ], pathex=[
            'C:\\Your\\User\\Path\\To\\pyinstaller'
    ])
    pyz = PYZ(a.pure)
    exe = EXE(
            pyz,
            a.scripts,
            exclude_binaries=1,
            name=os.path.join('build\\pyi.win32\\App Name', 'App Name.exe'),
            debug=False,
            strip=False,
            upx=True,
            console=False , icon='youricon.ico'
    )
    coll = COLLECT(
            exe,
            a.binaries,
            a.zipfiles,
            a.datas,
            strip=False,
            upx=True,
            name=os.path.join('dist', 'Hey Mang!')
    )
    app = BUNDLE(coll, name=os.path.join('dist', 'Hey Mang!.app')) 
    ```

    **在a.binaries**之前，您应该添加这段代码：

    ```
     Tree('C:\\Your\\App\\Path\\To\\Images'), 
    ```

    因此，当 PyInstaller 读取**.spec 文件**时，编译器会将图像传递到**dist**目录。

*   现在我们需要创建**.qrc 文件**，它将加载我们的图像。这个文件应该是这样的：

    ```
    <RCC>
      <qresource prefix="/" >
        <file>img/image1.png</file>
        <file>img/image2.png</file>
        <file>img/image3.png</file>
      </qresource>
    </RCC> 
    ```

    显然，使用您的图像。这需要编译为 .py 格式，使用以下命令：

    ```
    pyrcc4 -o images.qrc images_qr.py 
    ```

*   最后，我们需要将其添加到我们的脚本中，例如：

    ```
    import images_qr

    ...

    self.setWindowIcon(QtGui.QIcon(':/img/image1.png')) # The colon must be there 
    ```

一旦你编译你应该看到图像就好了，像这样：

![](../Images/fe357326cc2a523839b31ed8a6a1f93d.png)

我希望这可以帮助每个有同样问题的人。请记住提供正确的图像路径并将冒号添加到图像中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-29T15:44:36.160

快速更新以下方法。首先 - 这是在 PyQt/Pyside 应用程序中轻松包含图像的好方法。对于 Pyside，只需使用 pyside-rcc.exe 而不是 pyrcc4。

其次，我不相信该`Tree(...)`命令甚至是必要的。使用此方法创建 dist 文件夹后，我删除了使用`Tree..`命令复制的所有图像文件。我的可执行文件仍然有效，并且图像显示正确。所以可能我们只需要创建 qrc 文件并运行 pyrcc 程序，确保 python 模块使用冒号前缀更新为 iamge 文件路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-08T17:46:23.870

如果您使用的是 Qt Designer，则可以轻松添加图标和图像。按照这里的教程[http://doc.qt.io/qt-4.8/designer-resources.html](http://doc.qt.io/qt-4.8/designer-resources.html)

使用 Qt Designer 4.8.5 和 Pyinstaller 2.1 在 PySide 1.2.2 上测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-27T07:39:48.253

将 exe 文件移动到 image 文件夹所在的文件夹或 main.py 所在的同一文件夹中。

[看到这个](https://youtu.be/UZX5kH72Yx4)

# java - Java：线程池是同时还是顺序执行任务？

> ID：11534302
> 
> 赞同：1
> 
> 时间：2012-07-18T04:27:19.180
> 
> 标签：java

我对线程池的理解是，当您向线程池传递一个方法时，它会从其活动池中选择一个线程并将该方法发送出去执行。我对线程的理解是，如果你在其中放入一些代码，它会不停地运行代码，直到它被告知休眠或停止。

我的问题：

当您将几个方法（大致相等的长度以执行）一个接一个地传递给线程池时，线程池是否管理正在执行的不同线程之间的共享，以便任务几乎同时完成或一个接一个地执行它们 - 例如, 任务 1 进入线程 1，线程 1 开始执行它，线程 2 和任务 2 直到任务任务 1 完成之前没有机会运行，因为线程 1 正在运行它已经给出的代码而没有任何显式消息休眠 - 因此线程 2 将执行，任务将一个接一个地完成。

**基本上，我是否必须明确确保我提供给线程池的代码中有一个中断，以便线程同时运行？还是在使用线程池管理器时免费获得这个？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T04:48:52.813

OP 似乎以旧的协作多任务的方式思考，即线程应该休眠/屈服以便将 CPU 让给另一个线程/进程运行。

但是，在 Java 中并非如此（或者至少对于大多数常见的 JVM 实现而言）。Java 中的多任务处理是抢占式的。这意味着，当线程 1 运行时，即使您没有显式地执行任何 yield/sleep，线程 2 也将能够同时运行（通过时间切片/在另一个 CPU 内核中运行等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T04:29:10.010

**1.****你在池中指定的线程数同时工作**，这就是线程的用途，同时做工作。它是**并行运行**

**2.**比如FixedThreadPool，会有一定数量的线程，当你给它们一定数量的任务要执行时，全部同时运行，如果工作数量少于池中的线程，那么只有那些执行任务所需的许多线程将同时运行。

**3.**如果是CachedThreadPool，池中的线程数同时运行完成工作，如果需要更多线程，CachedThreadPool会创建新的或者直到它重用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T04:32:11.840

如果有多个线程，它将并行运行任务。池使用所有可用线程（可用 = 为池配置）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T04:32:40.313

运行顺序无法保证，这取决于很多东西；但如果任务足够长，您可以假设这些任务将同时运行。

# wcf - 将服务作为客户端使用时出现 WCF 服务错误（已实施 SSL）

> ID：11534320
> 
> 赞同：0
> 
> 时间：2012-07-18T04:29:18.153
> 
> 标签：wcf, service

我开发了一个返回 xElements 的 Web 服务。

在 WCF 服务页面中（要测试此服务，请使用 svcutil.exe........）WSDL 链接是

```
https://host_system_name.domain.com/Feed/Service.svc,
changed it to 
https://regName.domain.com/Feed/Service.svc. 
by adding <useRequestHeadersForMetadataAddress/> in config. 
```

现在 wsdl 正在打开（不是上一段中提到的 b4），但同时使用相同的服务.....

```
ERROR WHILE IMPLEMENTING SERVICE:

The message with To 'https://host_system_name.domain.com/Feed/Service.svc' cannot be
processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher.
Check that the sender and receiver's EndpointAddresses agree. 
```

在错误描述中，我正在获取服务器的主机名，而在端点等中已经提到了注册的站点名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:44:09.807

看看这是否有帮助 -

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/b5ae495b-f5fb-4eed-ae21-2b2280d4fec3/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/b5ae495b-f5fb-4eed-ae21-2b2280d4fec3/)

# objective-c - 带有块的 NSUndoManager

> ID：11534321
> 
> 赞同：3
> 
> 时间：2012-07-18T04:29:26.053
> 
> 标签：objective-c, cocoa, objective-c-blocks, block, nsundomanager

在我期望支持块的所有事情中，奇怪的是，NSUndoManager 似乎并没有这样做。这是否有一些内在的原因，或者 Apple 根本没有着手对这部分 API 进行现代化改造？

特别是我想在 NSObject 上定义一个方法，

```
- (void)performBlock {
    void (^block)(void) = (id)self;
    block();
} 
```

为了能够打电话，

```
[[undoManager prepareWithInvocationTarget:^{
    NSLog( @"hello world" );
}] performBlock]; 
```

我错过了什么吗？这有什么问题吗？

（受 2009 年 Mike Ash 的[一篇文章](http://www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html)启发，该文章建议*不要*在块上定义方法。我也在那里发表了评论。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:40:10.983

我认为 Mike 的主要论点是它使代码难以阅读，而不是这个想法存在根本问题。

但是，我发现您所写的内容存在一些问题。一方面，你在 NSObject 上添加了一个类别方法，但是如果你在一个不是块的对象上调用它，它就会崩溃。也许有一种方法可以解决这个问题，比如让该`performBlock`方法在非块上调用时什么都不做，或者至少在崩溃之前记录一个错误。我不完全是这样的。

此外，块从堆栈开始，因此您需要先复制它们，然后再将它们传递给保留它们以供以后执行的方法。为获取块而编写的方法可以解决此问题。大概`-[NSUndoManager prepareWithInvocationTarget:]`不会复制传入的目标。因此，在传入之前，您需要自己复制块（使用`-copy`或`Block_copy()`）：

```
void (^block)(void) = [^{
    NSLog(@"hello world");
} copy];

[[undoManager prepareWithInvocationTarget:block] performBlock];
[block release]; 
```

至少在 ARC 的早期版本中，这仍然是一个问题，因为该块被传递到一个期望 的方法中（如 Mike Ash 的[ARC 文章](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)`id`的 Blocks 部分所述）。也许它已经修复了？我不会指望它...

# android - 两点之间的Android距离

> ID：11534323
> 
> 赞同：5
> 
> 时间：2012-07-18T04:29:33.013
> 
> 标签：android, map

我有 3 种计算距离的方法，所有 3 种方法都给了我不同的答案，

```
 double lat = 6.924049;
    double lng = 79.853807;

    double lat1 = 6.856461;
    double lng1 = 79.912748; 
```

如何计算两点之间的距离以及如何在公里上百分比？还是米？

**第一种方式** ans = 9.967441199417708E-6

```
float[] results = new float[1];
Location.distanceBetween(lat / 1E6, lng / 1E6, lat1 / 1E6, lng1 / 1E6,results);
float s =results[0] * 0.000621371192f;
String a2 = Float.toString(s); 
```

**第二种方式**ans = 6.1795527E6

```
double lat3 = lat / 1E6;
double lat2 = lat1 / 1E6;
double lon3 = lng / 1E6;
double lon2 = lng1 / 1E6;
double dLat = Math.toRadians(lat2 - lat3);
double dLon = Math.toRadians(lon2 - lon3);
double a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
Math.sin(dLon / 2) * Math.sin(dLon / 2);
double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
// 6378.1 is gravity of earth
double asd = c * 6378.1; 
```

**第三种方式**=6.176576174444191

```
{
double a5 = distance(lat, lng, lat1, lng1);
String a6 = Double.toString(a5);
}
private double distance(double lat1, double lon1, double lat2, double lon2) {
        double theta = lon1 - lon2;
        double dist = Math.sin(deg2rad(lat1)) * Math.sin(deg2rad(lat2))
                + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2))
                * Math.cos(deg2rad(theta));
        dist = Math.acos(dist);
        dist = rad2deg(dist);
        dist = dist * 60 * 1.1515;
        return (dist);
    }

    private double deg2rad(double deg) {
        return (deg * Math.PI / 180.0);
    }

    private double rad2deg(double rad) {
        return (rad * 180.0 / Math.PI);
    } 
```

那么，如何计算两点之间的距离以及如何在 KM 上百分比呢？还是米？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T04:33:52.593

[http://developer.android.com/reference/android/location/Location.html](http://developer.android.com/reference/android/location/Location.html)

使用 distanceTo 或 distanceBetween 方法。为什么不在这里尝试 Android 的 Location[方法](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)

您可以根据纬度和经度创建 Location 对象：

```
Location location = new Location("");
location.setLatitude(lat);
location.setLongitude(lon); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T04:34:10.750

试试这个公式

```
double dist = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1- y2, 2)); 
```

或转到此链接（更适合您的情况）：

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-02T13:36:09.747

[Google Maps Android API 实用程序库](https://developers.google.com/maps/documentation/android-api/utility/)可以轻松计算距离等

您可以将其与 gradle 一起使用

* * *

```
dependencies {
   compile 'com.google.maps.android:android-maps-utils:0.5+'
}

double distance = SphericalUtil.computeDistanceBetween(pointA, pointB); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T04:48:37.800

在计算巨大的圆形地方（地球）的距离时，无法找到准确的结果。您将有多种方法来找到这样的距离。现在从您的问题来看，我建议您使用第二种或第三种方法，因为从我的角度来看，它们的结果有些相等（可能是几米的小距离）。

对于我个人的发展，我使用你的第三种方法。为了精确，我在小数点后使用 6 位数字，

例如，在您的情况下， 6.176576174444191 ，我使用 6.176576

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T05:35:30.473

```
double ER=3958.75;
    double dlong=Math.toRadians(longitude1-longitude);
                                double dlat=Math.toRadians(latitude1-latitude);
                                a=(Math.sin(dlat/2)*Math.sin(dlat/2))+Math.cos(Math.toRadians(latitude))*Math.cos(Math.toRadians(latitude1))*Math.sin(dlong/2)*Math.sin(dlong/2);               
                                c=2*Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                                d=ER*c; 
```

试试这个，它会给出以公里为单位的距离或检查这个[链接](https://stackoverflow.com/questions/837872/calculate-distance-in-meters-when-you-know-longitude-and-latitude-in-java)

# php - 在 Zend 中使用 Alias 创建一个 sql where 条件

> ID：11534328
> 
> 赞同：-1
> 
> 时间：2012-07-18T04:30:42.167
> 
> 标签：php, sql, zend-framework

我正在使用 zend，但我陷入了在别名上创建 where 条件的过程中：

示例代码：

```
$select = $db->select()
             ->from(array('p' => 'products'), 'p.product_id')
             ->columns('product_name', 'p')
             ->where('p = ?', 'value');
             // Alternatively use columns('p.product_name') 
```

修订代码

```
$select = $db->select()
             ->from(array('p' => 'products'), 'p.product_id')
             ->columns(array('x' => new Zend_Db_Expr('(SELECT...)'                    
        )))
             ->where('x = ?', 'value');
             // Alternatively use columns('p.product_name') 
```

我为 x 创造条件

这会产生错误。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:36:40.710

您的格式似乎错误。

我认为在您的情况下，它应该如下所示，

```
$select = $db->select()
         ->from(array('p' => 'products'))
         ->columns('product_name')
         ->where('p.id = ?', 'value'); 
```

参考：[Zend Db Select](http://framework.zend.com/manual/en/zend.db.select.html/)

# php - 如何在 PHP 中显示我的数据库的所有表格行内容？

> ID：11534333
> 
> 赞同：0
> 
> 时间：2012-07-18T04:31:13.990
> 
> 标签：php, mysql, image, tablerow

我正在尝试做一个购物画廊。我设法显示了我的数据库表的第一行内容（内容包括：产品的图像缩略图、产品名称和产品价格）。现在我正在尝试显示我的表格的第二行内容。我该怎么做呢？当我尝试它时，PHP 仍然显示所有第一行的内容。

HTML 代码：

```
<div id="Dress1"> 
   <a href="Prod1.php"><img id="Image1" src="../imgs/thumb/<?=$imgsml?>"></a> 
   <p id="ProductCodeText"> 
   <?php echo $prd_name;?><br/>Price: <?php echo $price; ?> &nbsp;Php</p> 
    </div>

    <div id="Dress2"> 
    <a href="Prod2.php"><img id="Image1" src="../imgs/thumb/<?=$imgsml?>"></a> 
    <p id="ProductCodeText"> 
    <?php echo $prd_name;?><br/>Price: <?php echo $price; ?> &nbsp;Php</p> 
    </div> 
```

然后是 Dress3 和 4

PHP代码：

```
<?php  include_once("../incs/dbcon.php"); 

if ($_SERVER['REQUEST_METHOD'] == "POST") {
$prd_id = $_REQUEST["prd_id"];
$sub_id = $_REQUEST["sub_id"];
$prd_name = $_REQUEST["prd_name"];
$descr = $_REQUEST["descr"];
$price = $_REQUEST["price"];
$sizes = $_REQUEST["sizes"];
/*$imgsml = $_REQUEST["imgsml"];
$imgbig = $_REQUEST["imgbig"];*/
$featured = $_REQUEST["featured"];
$prd_status = $_REQUEST["prd_status"];
$colors = $_REQUEST["colors"];
$prd_code = $_REQUEST["prd_code"];
$date_release = $_REQUEST["date_release"];
$stk_status = $_REQUEST["stk_status"];
$ctr_id = $_REQUEST["ctr_id"];
$price_sale = $_REQUEST["price_sale"];
$onsale = $_REQUEST["onsale"];
$mostPopular = $_REQUEST["mostPopular"];
$mn = $_REQUEST["mn"];
$year = $_REQUEST["year"];
$imagewidth = $_REQUEST["imagewidth"];
$newArrival = $_REQUEST["newArrival"];
$cat_name = $_REQUEST["cat_name"];
$sub_name = $_REQUEST["sub_name"];

if (isset($_POST['prd_id'])) $prd_id = mysql_real_escape_string($_POST['prd_id']);
    if (isset($_POST['sub_id'])) $sub_id = mysql_real_escape_string($_POST['sub_id']);
    if (isset($_POST['prd_name'])) $prd_name = mysql_real_escape_string($_POST['prd_name']);
    if (isset($_POST['descr'])) $descr = mysql_real_escape_string($_POST['descr']);
    if (isset($_POST['price'])) $price = mysql_real_escape_string($_POST['price']);
    if (isset($_POST['sizes'])) $sizes = mysql_real_escape_string($_POST['sizes']);
    if (isset($_POST['imgsml'])) $imgsml = mysql_real_escape_string($_POST['imgsml']);
    if (isset($_POST['imgbig'])) $imgbig = mysql_real_escape_string($_POST['imgbig']);  
    if (isset($_POST['featured'])) $featured = mysql_real_escape_string($_POST['featured']);
    if (isset($_POST['prd_status'])) $prd_status = mysql_real_escape_string($_POST['prd_status']);
    if (isset($_POST['colors'])) $colors = mysql_real_escape_string($_POST['colors']);
    if (isset($_POST['prd_code'])) $prd_code = mysql_real_escape_string($_POST['prd_code']);
    if (isset($_POST['date_release'])) $date_release = mysql_real_escape_string($_POST['date_release']);    
    if (isset($_POST['stk_status'])) $stk_status = mysql_real_escape_string($_POST['stk_status']);
    if (isset($_POST['ctr_id'])) $ctr_id = mysql_real_escape_string($_POST['ctr_id']);  
    if (isset($_POST['price_sale'])) $price_sale = mysql_real_escape_string($_POST['price_sale']);  
    if (isset($_POST['onsale'])) $onsale = mysql_real_escape_string($_POST['onsale']);          
    if (isset($_POST['mostPopular'])) $mostPopular = mysql_real_escape_string($_POST['mostPopular']);
    if (isset($_POST['mn'])) $mn = mysql_real_escape_string($_POST['mn']);
    if (isset($_POST['year'])) $year = mysql_real_escape_string($_POST['year']);
    if (isset($_POST['imagewidth'])) $imagewidth = mysql_real_escape_string($_POST['imagewidth']);
    if (isset($_POST['newArrival'])) $newArrival = mysql_real_escape_string($_POST['newArrival']);
    if (isset($_POST['cat_name'])) $cat_name = mysql_real_escape_string($_POST['cat_name']);
    if (isset($_POST['sub_name'])) $sub_name = mysql_real_escape_string($_POST['sub_name']);
}

$szQuery = "SELECT * FROM products";
$rs = mysql_query($szQuery) or die(mysql_error()."<br>$szQuery");
if ($row = mysql_fetch_object($rs))
{
$prd_id = $row->prd_id; 
$sub_id = $row->sub_id; 
$prd_name = $row->prd_name;
$descr = $row->descr;
$price = $row->price;
$sizes = $row->sizes;
$imgsml = $row->imgsml;
$imgbig = $row->imgbig;
$featured = $row->featured;
$prd_status = $row->prd_status;
$colors = $row->colors;
$prd_code = $row->prd_code; 
$date_release = $row->date_release; 
$stk_status = $row->stk_status;
$ctr_id = $row->ctr_id;
$price_sale = $row->price_sale;
$onsale = $row->onsale;     
$mostPopular = $row->mostPopular;
$mn = $row->mn;
$year = $row->year;
$imagewidth = $row->imagewidth;
$newArrival = $row->newArrival;
$cat_name = $row->cat_name;
$sub_name = $row->sub_name;
}
?> 
```

我尽可能需要一个愿意一步一步耐心地教我的人。哦，是的，我是 MySQL 和 PHP 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:37:45.957

这可能会对您有所帮助。看看这个例子

```
<?php
            $result=mysql_query("SELECT * FROM elternplaner");
            while($row=mysql_fetch_array($result))
            {
            ?>
            <tr>
                <td align='center'>
                       <input type="checkbox" name="check[]">
                </td>
                <td align="center"><a href="edit.php?iId=<?php print($row['iId']); ?>" ><img src="edit.png" width=30px title="Edit"></a>&nbsp;<a href="delete.php?iId=<?php print($row['iId']); ?>"><img src="delete.png" title="Delete" width=30px></a></td>
                <td align="center"><?php print($row['vName']) ?></td>
                <td align="center"><?php print($row['eGender']) ?></td>
                <td align="center"><?php print($row['dBirthDate']) ?></td>
                <td align="center"><?php print($row['vEmail']) ?></td>
                <td align="center"><?php print($row['iPhoneNo']) ?></td>
                <td align="center"><?php print($row['vLocation']) ?></td>
                <td align="center"><?php print($row['dtLastLoginDate']) ?></td>
                <td align="center"><?php print($row['dtMemberSince']) ?></td>
                <td align="center"><?php print($row['eStatus']) ?></td>
            </tr>
            <?php } ?> 
```

这将返回整个表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:41:39.600

示例代码应该是这样的：

```
$query = "SELECT * FROM ......."
$resultset = mysql_query($query);

while($row = mysql_fetch_assoc($resultset)) {
    $rows[] = $row;
} 
```

现在您可以使用循环遍历 $rows 数组。

# java - 循环通过csv文件时出现奇怪的线

> ID：11534338
> 
> 赞同：0
> 
> 时间：2012-07-18T04:32:12.093
> 
> 标签：java, android, file, loops

它应该已经到达文件的末尾，但它没有。相反，我得到了这个奇怪的字符串，它不是空字符串，也不是空格。这是我从调试器中得到的图片。

![调试问题](../Images/771eea782ec2c831884a9dd5bb309087.png)

```
while ( (nextLine = csvReader.readLine()) != null && (nextLine != "")) {
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:35:19.620

尝试，

```
while( (nextLine = csvReader.readLine()) != null && !nextLine.equals("")) {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:35:30.300

我一直这样做：

```
Scanner scnr = new Scanner(file);
while(scnr.hasNext()) {
    ...
} 
```

而且我认为我从来没有遇到过这样的问题。

# javascript - 有什么办法可以简化这段代码？

> ID：11534341
> 
> 赞同：1
> 
> 时间：2012-07-18T04:32:42.420
> 
> 标签：javascript

JavaScript 新手！这行得通，但我还有很多事情要做，如果有更清洁的方法来做到这一点，那就太好了。如果需要，可以使用 jquery :)

（堆栈希望我在提交之前写更多，虽然我不知道还能说什么）

```
<script>

function apply(){
    var backerPrediction1 = document.getElementById("backer-prediction-1").value;
    var backerPrediction2 = document.getElementById("backer-prediction-2").value;
    var backerPrediction3 = document.getElementById("backer-prediction-3").value;
    var backerPrediction4 = document.getElementById("backer-prediction-4").value;
    var backerPrediction5 = document.getElementById("backer-prediction-5").value;
    var backerPrediction6 = document.getElementById("backer-prediction-6").value;
    var backerPrediction7 = document.getElementById("backer-prediction-7").value;
    var backerPrediction8 = document.getElementById("backer-prediction-8").value;
    var backerPrediction9 = document.getElementById("backer-prediction-9").value;
    var backerPrediction10 = document.getElementById("backer-prediction-10").value;
    var backerPrediction11 = document.getElementById("backer-prediction-11").value;
    var backerPrediction12= document.getElementById("backer-prediction-12").value;
    var backerPrediction13 = document.getElementById("backer-prediction-13").value;
    var backerPrediction14 = document.getElementById("backer-prediction-14").value;
    var backerPrediction15 = document.getElementById("backer-prediction-15").value;
    var backerPrediction16 = document.getElementById("backer-prediction-16").value;
    var backerPrediction17 = document.getElementById("backer-prediction-17").value;
    var backerPrediction18 = document.getElementById("backer-prediction-18").value;
    var backerPrediction19 = document.getElementById("backer-prediction-19").value;
    var backers = parseInt(backerPrediction1,10) +
              parseInt(backerPrediction2,10) +
              parseInt(backerPrediction3,10) +
              parseInt(backerPrediction4,10) +
              parseInt(backerPrediction5,10) +
              parseInt(backerPrediction6,10) +
              parseInt(backerPrediction7,10) +
              parseInt(backerPrediction8,10) +
              parseInt(backerPrediction9,10) +
              parseInt(backerPrediction10,10) +
              parseInt(backerPrediction11,10) +
              parseInt(backerPrediction12,10) +
              parseInt(backerPrediction13,10) +
              parseInt(backerPrediction14,10) +
              parseInt(backerPrediction15,10) +
              parseInt(backerPrediction16,10) +
              parseInt(backerPrediction17,10) +
              parseInt(backerPrediction18,10) +
              parseInt(backerPrediction19,10)
;
document.getElementById("backer-prediction-answer").value = (backers);
}
</script> 
```

谢谢你的帮助！！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T04:36:44.557

我会这样做：

```
function apply() {
    var backers = 0;
    for (var i = 1; i < 20; ++i) {
        backers +=
            parseInt(document.getElementById("backer-prediction-" + i).value);
    }
    document.getElementById("backer-prediction-answer").value = backers;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T04:42:13.797

最干净的方法是给每个`backer-prediction-#`元素一个类并获取所有元素：

```
var backerEls = document.querySelectorAll('.backer-prediction');
//Get a list of all the elements with the class 'backer-prediction'
var backers = 0;
//Total
for (var i = 0; i < backerEls.length; i++) {
    //Loop over the elements
    backers += parseInt(backerEls[i].value, 10);
    //Parse their values and add them to the total
}

console.log(backers);​ 
```

（[演示](http://jsfiddle.net/2VHLn/2/)）

这使您可以拥有任意数量的元素，而无需更新您的 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:40:31.310

```
var answer = 0;
for(var i = 1; i <= 20; i++) {
 answer += parseInt(document.getElementById("backer-prediction-" + i).value), 10);
}

document.getElementById("backer-prediction-answer").value = answer; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T04:41:43.843

您可以使用以下代码获取支持者总数。

```
function apply(){
    var answer = getBackers();
    document.getElementById("backer-prediction-answer").value = answer;
}

function getBackers()
{
    var baseName = "backer-prediction-";
    var elementId = "";
    var backers = 0;
    for(var i = 1; i < 20; i++)
    {
        elementId = baseName + i;
        backers = backers + getElementValue(elementId);
    }

    return backers;
}

function getElementValue(elementId)
{
    var value = document.getElementById("backer-prediction-1").value;
    return parseInt(value, 10);
} 
```

# sql-server - 什么时候在你的 sql server db 上创建索引？

> ID：11534347
> 
> 赞同：0
> 
> 时间：2012-07-18T04:33:18.613
> 
> 标签：sql-server, sql-server-2008, indexing

在表创建开始时为您的 sql server db 创建索引是一种做法吗？还是取决于此表的性能（或者说缺乏），所以稍后再创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:37:25.110

索引在从具有大量数据的表中检索数据时很有用。它通常应用于连接中使用的 id 字段。尽管在这些表上进行批量插入/更新时它们的成本非常高。关于何时创建它们的问题：根据最佳设计实践，表结构/设计应首先完成，因为在设计期间，开发人员必须知道表的用途。因此，开发人员将知道表中有多少数据，因此最初应该建立索引

以供参考 ：

[http://beginner-sql-tutorial.com/sql-index.htm](http://beginner-sql-tutorial.com/sql-index.htm)

[http://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/](http://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/)

# algorithm - 自上而下还是自下而上？

> ID：11534349
> 
> 赞同：0
> 
> 时间：2012-07-18T04:33:21.077
> 
> 标签：algorithm, sorting, binary-search-tree

我对来自 Leetscode.com 的这个问题感到困惑，这个算法是自上而下还是自上而下？

```
public static TreeNode addToTree(int arr[], int start, int end){ 
  if (end < start) {
    return null;
  }
 int mid = (start + end) / 2;
 TreeNode n = new TreeNode(arr[mid]); 
 n.left = addToTree(arr, start, mid - 1); 
 n.right = addToTree(arr, mid + 1, end); 
 return n;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:44:30.020

这是一种自上而下的方法。该算法将中间元素放在一个节点中，然后构建左右子树。所以首先创建*顶部*节点，然后树*向下*生长。

在自底向上的方法中，将首先创建左右子树，然后将它们添加到其父级。它会是这样的：

```
public static TreeNode addToTree(int arr[], int start, int end){ 
    if (end < start) {
        return null;
    }

    int mid = (start + end) / 2; 
    TreeNode left = addToTree(arr, start, mid - 1); 
    TreeNode right = addToTree(arr, mid + 1, end); 
    TreeNode n = new TreeNode(arr[mid]);
    n.left = left;
    n.right = right;
    return n;
} 
```

在这种方法中，首先创建树的*底部节点，然后**向上*构建树。

# asp.net - 语义 Web 本体工具和对 ASP.net 项目的支持

> ID：11534352
> 
> 赞同：3
> 
> 时间：2012-07-18T04:33:53.137
> 
> 标签：asp.net, sparql, semantic-web, jena, ontology

[DotnetRDF](http://www.dotnetrdf.org)是对 DotNet 中语义 Web 支持的最佳贡献，但它不像 Jena 和其他非 DotNet 项目那样支持 Ontology。

有些人在谈论[Jena.NET的新稳定版本](http://semanticweb.org/wiki/Jena_.NET)

但是下载链接失效了！很多语义网社区的人都因为对DotNet Framework的支持不佳而苦恼。

[除了DotnetRDF](http://www.dotnetrdf.org)之外，是否有任何工具支持 .Net 的软件？

.Net 的人真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T16:15:11.383

首先，我想谈谈你提出的一点：

> 它不像 Jena 和其他 Non-DotNet 项目那样支持 Ontology

你到底是什么意思？

您是在谈论缺乏以本体/资源为中心的 API，在这种情况下您是否尝试过 API 的[本体 API](http://www.dotnetrdf.org/api/index.asp?Namespace=VDS.RDF.Ontology)部分？

或者您是在谈论缺乏 OWL 本体和/或推理支持？在这种情况下，是的，目前没有任何/非常有限的支持，我们目前没有带宽来处理这些功能

与任何开源项目一样，dotNetRDF 依赖于其开发人员和用户在空闲时间的输入和贡献。如果缺少对您非常重要的功能，请通过我们的[邮件列表](http://sourceforge.net/mail/?group_id=251339)告诉我们并开始讨论。

您可能会发现您想要的功能对我们来说相对容易添加（或者已经存在，只是没有很好的文档记录），在这种情况下，您可以快速找到您的问题已解决。或者可能是该功能还不存在，因为实际上还没有人出现并要求它！

> .Net 的人真的很感激任何帮助。

所有新功能都是由开发人员的需求或用户的功能请求驱动的。dotNetRDF 是一个开源项目，因此您始终可以考虑自己贡献缺少的功能或与开发人员（如我自己）合作以帮助提供您想要的功能。

**其次**，我将尝试实际回答您的问题

作为 dotNetRDF 和 Jena 的开发人员，我个人不喜欢 Jena.Net 的概念，除了运行移植代码可能会对性能造成一定程度的影响之外，还有一个事实是 Jena 在它的以多种方式进行设计——命名约定、设计模式（到处都是静态工厂！）、复杂的自定义迭代器基础设施和不一致的包名称。虽然其中一些很容易修复，但其他部分（例如`IEnumerable<T>`在每个地方替换使用一些专门的迭代器）并不那么可修复。我在 3.5 年前开始使用 dotNetRDF 是有原因的，因为我想要一个合适的 .Net 原生 API，而不是一些丑陋的端口。

如果您希望在 dotNetRDF 中看到 Jena 的特定功能，我会更感兴趣的是使用 Jena 代码库作为指南编写这些功能的本机 .Net 实现。正如我之前提到的，也许你/其他人会对此感兴趣，作为对 dotNetRDF 的贡献

.Net 周围还有一些其他工具，认为许多工具已被废弃/不成熟：

*   [SemWeb](http://razor.occams.info/code/semweb/) - 一个废弃的 .Net API，具有与 dotNetRDF 类似的功能
*   [Intellidimension Semantics SDK](http://www.intellidimension.com/products/semantics-platform/) - 一种商业 .Net API，具有与 dotNetRDF 类似的功能，但一段时间内没有新开发的迹象
*   [ROWLEX](http://rowlex.nc3a.nato.int/) - 建立在 SemWeb 之上的 OWL 1 API，废弃的死链接
*   [LinqToRdf](http://code.google.com/p/linqtordf/) - 一个构建在 SemWeb 之上的 LINQ 到 SPARQL 转换器，已弃用
*   [RDFSharp](http://rdfsharp.codeplex.com/) - 用于 .Net 的非常新且非常小的 RDF API，不成熟
*   [BrighstarDB](http://www.brightstardb.com/) - 一个 .Net 原生三重存储，包含实体框架的东西，积极开发
*   [dotSesame](http://sourceforge.net/projects/dotsesame/) -Java Sesame API 的 .Net 端口，处于活动状态，但存在与 Jena.Net 相同的问题

# php - 升级到 php 5.3.x 后 PDO 类未发现致命错误

> ID：11534356
> 
> 赞同：1
> 
> 时间：2012-07-18T04:34:39.837
> 
> 标签：php, mysql, pdo

我们进行了服务器升级，将 5.2.x 格式移至 php 5.3.x。我是mysql pdo，下面显示的代码在升级之前就可以工作。

```
 <?php

error_reporting(E_ALL);
ini_set('display_errors', '1');

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * Database user / pass
 */
$sql_details = array(
    "user" => "",
    "pass" => "",
    "host" => "",
    "db" => ""
);

// This is included for the development and deploy environment used on the DataTables
// server. You can delete this block - it just includes my own user/pass without making 
// them public!
if ( is_file($_SERVER['DOCUMENT_ROOT']."/datatables/pdo.php") ) {
    include( $_SERVER['DOCUMENT_ROOT']."/datatables/pdo.php" );
}
// /End development include

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * Database connection
 */

/* PDO connection */
$db = new PDO(
    "mysql:host={$sql_details['host']};dbname={$sql_details['db']}",
    $sql_details['user'],
    $sql_details['pass'],
    array(
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
    )
);

/* mysql_* connection */
/*
if ( ! $db = mysql_pconnect( $sql_details['host'], $sql_details['user'], $sql_details['pass'] ) ) {
    header( $_SERVER['SERVER_PROTOCOL'] .' 500 Internal Server Error' );
    die( 'Could not open connection to server' );
}

if ( ! mysql_select_db( $sql_details['db'], $db ) ) {
    header( $_SERVER['SERVER_PROTOCOL'] .' 500 Internal Server Error' );
    die( 'Could not select database' );
}
*/ 
```

但升级后，我收到一个致命错误，即找不到 PDO 类。我检查 ht php.ini 并启用 pdo。下面是 php.ini 的片段。

```
'--with-mysql=/usr' '--with-mysql-sock=/var/lib/mysql/mysql.sock' '--with-mysqli=/usr/bin/mysql_config' '--with-openssl=/usr' '--with-openssl-dir=/usr' '--with-pcre-regex=/opt/pcre' '--with-pdo-mysql=shared' '--with-pdo-sqlite=shared' '--with-pic' '--with-png-dir=/usr' '--with-sqlite=shared' '--with-xpm-dir=/usr' '--with-zlib' '--with-zlib-dir=/usr'
pdo_mysql
pdo_mysql.default_socket => /var/lib/mysql/mysql.sock => /var/lib/mysql/mysql.sock
pdo_sqlite 
```

你能帮我解决这里的问题吗？

在此先感谢，斯里尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:50:02.363

您的 phpinfo 表未显示 PDO 部分和 pdo_mysql 部分，这意味着您尚未安装 pdo。就像我的 phpinfo 显示..见图片![phpinfo](../Images/40c2aeec40b84fa6e630fe5c40295ff7.png)

# php - 无法在服务器上编辑 PHP 文件；改为获取 HTML 输出

> ID：11534360
> 
> 赞同：-1
> 
> 时间：2012-07-18T04:35:35.860
> 
> 标签：php, joomla, lamp, webdav

我有一个奇怪的问题。当我尝试使用 Dreamweaver 或任何文本编辑器编辑服务器上的每个 php 文件时，它都会出现损坏。当我在服务器上打开一个 php 文件查看源代码时，它显示的是输出的 html 代码，而不是实际的 php 代码。比如我上传了一个php文件，只用了一行代码（`<?php echo phpinfo(); ?>`）来输出服务器的php信息。该页面在浏览器中按预期显示；但是，当我尝试使用 notepad++、dreamweaver 或任何文本编辑器查看或编辑服务器上的源代码时，它会显示输出 html（大约 870 行 html 代码），而不是我放入的实际一行 php 代码在 php 文件中。

带有数据库连接字符串的 PHP 文件或包含在文本编辑器中打开为空白的文件。在dreamweaver 中，对于这些类型的php 文件，我收到“找不到文件”的错误——显然是指它无法解析数据库连接或包含文件。其他脚本文件（如 configuration.php）也以空白打开。

这个问题影响了我的 joomla 站点（joomla 2.5）中的所有 php 文件，甚至影响了不属于 joomla 的文件。它甚至会影响 htdocs 文件夹之外的 php 文件。但是，所有其他脚本文件（css、js、xml）在文本编辑器中正确打开。

甚至奇怪的是，这并没有影响 joomla 或网站上其他非 joomla 页面的性能。该网站运行良好，除了我无法在服务器上查看或编辑 php 源代码。在将所有文件复制到这个新的 LAMP 服务器之前，我在 localhost 和另一台远程服务器上完美运行了相同的 joomla 安装。

我通过 Windows 7 上的 Webdav 连接到服务器。它是大学服务器上的共享主机。我已经联系了 IT 部门，他们一遍又一遍地向我保证，他们已经检查了所有内容，问题不是来自他们的问题。

任何有关此问题的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T04:55:24.407

文件根本没有损坏。您正在做的是在网络服务器为您*提供*它们之后查看它们的输出。

当您在服务器上有文件时，您不能只告诉记事本或 Dreamweaver 打开*http://www.example.com/index.php*，因为这意味着网络服务器会将其传递给您的程序，就好像它被请求一样通过浏览器 - 意味着所有 PHP 代码都被执行并且文件内容是 HTML 输出。

要查看其中的实际代码，您需要直接访问服务器（如果它在您的办公室、家里或其他地方），您只需浏览到正确的文件夹（/var/www/index.php for例如或 C:\server\www\index.php) 或更常见的情况，您需要通过 FTP 或其他类似方式下载文件。当您执行此操作时，服务器将直接为您提供文件，而无需首先*运行*它们，就像 Web 浏览器要求它们一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T04:55:15.023

WebDAV 不太适合编辑 Web 内容，因为它无法区分用户对文件的访问（例如，有人查看您的 Joomla 站点）和对文件的管理访问（例如，您试图编辑 Joomla 配置文件）——并且这就是导致您的问题的原因。没有任何东西被“损坏”，但是 Web 服务器根本不允许您查看 PHP 文件的源代码。

您最好使用某种形式的带外访问来访问您的 Web 内容，例如 FTP 或 Windows 文件共享。如果这不可用，请向您的托管服务提供商投诉，直到它可用为止。

# linq - 使用Linq总结数据（双精度型）错误。对象必须是 Int32 类型

> ID：11534361
> 
> 赞同：0
> 
> 时间：2012-07-18T04:35:41.063
> 
> 标签：linq

我想总结一组双精度类型值，但是我得到了一个运行时异常，例如：`Object`必须是`Int32`该行的类型：resultSet.Sum(d => d.Data)。

```
for (int i = 1; i <= 7; ++i) {
    double sum = 0;
    DateTime timeSpot1 = fromDate.AddDays(i - 1);
    DateTime timeSpot2 = fromDate.AddDays(i);

    var resultSet = distributionDatePoint
                       .Where(d = > 
                                   d.Datetime.Day.CompareTo(timeSpot1) > 0 
                                && d.Datetime.Day.CompareTo(timeSpot2) < 0);
    if (resultSet != null) {
        sum = resultSet.Sum(d = > d.Data);
    }

    if (sum > 0) {
        chartData += sum.ToString("0.00");
    }
    else {
        chartData += "0,";
    }
}​ 
```

是`d.Data`双重类型。我试图以`Sum()`这种方式使用

```
resultSet.Sum<Double>(d => d.Data); 
```

但错误仍然存​​在。

谁能帮我解决这个问题？因为我被困了30分钟......

求助~~~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:46:37.530

你的问题在这里

```
var resultSet = distributionDatePoint 
                       .Where(d = >  
                                   d.Datetime.Day.CompareTo(timeSpot1) > 0  
                                && d.Datetime.Day.CompareTo(timeSpot2) < 0); 
```

您正在将 Int32 与 DateTime 对象进行比较。

你需要做类似的事情

```
var resultSet = distributionDatePoint 
                       .Where(d = >  
                                   d.Datetime.Day.CompareTo(timeSpot1.Day) > 0  
                                && d.Datetime.Day.CompareTo(timeSpot2.Day) < 0); 
```

# ios - iphone - 如何在使用 Facebook IOS SDK 创建事件时添加图像

> ID：11534363
> 
> 赞同：2
> 
> 时间：2012-07-18T04:36:04.150
> 
> 标签：ios, ios5, ios4

我有以下代码来添加一个事件，一切正常并加载到 facebook 没有问题唯一的问题是图像没有上传，也没有任何类型的帮助在 iOS 文档中可能我找错了地方？也许你已经经历过并且可以提供帮助。谢谢

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 [delegate facebook].accessToken, @"access_token",
                                 @"Going To Eat!", @"name",
                                 @"description of the event", @"description",
                                 @"2012-08-20T17:00:00+0000", @"start_time",
                                 @"2012-08-21T17:00:00+0000", @"end_time",
                                 @"Carlsbad", @"city",
                                 @"CA", @"state",
                                 @"900 safe street", @"street",
                                 @"OPEN", @"privacy",
                                 @"https://.../img/faces/pizza-port-brewing-carlsbad.jpg", @"@file.jpg",
                                 nil];

  [[delegate facebook] requestWithGraphPath:@"me/events" 
                        andParams:params
                    andHttpMethod:@"POST"
                      andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:04:23.120

好的，如果您正在使用当前的 Facebook API for IOS，我发现了这一点，那么您可以将 UIImage 对象传递给 requestWithGraphPath：调用它将自动检测它并将其上传到您的事件图标。如果它是一个图像链接，则使用 NSURL 制作一个 UIImage。

```
UIImage *image = [[UIImage alloc]initWithImageNamed@"test.png"];    
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 [delegate facebook].accessToken, @"access_token",
                                 @"Going To Eat!", @"name",
                                 @"description of the event", @"description",
                                 @"2012-08-20T17:00:00+0000", @"start_time",
                                 @"2012-08-21T17:00:00+0000", @"end_time",
                                 @"Carlsbad", @"city",
                                 @"CA", @"state",
                                 @"900 safe street", @"street",
                                 @"OPEN", @"privacy",
                                 image, @"picture",
                                 nil];

  [[delegate facebook] requestWithGraphPath:@"me/events" 
                        andParams:params
                    andHttpMethod:@"POST"
                      andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:49:35.470

请在此处查看 facebook 开发者的文档[https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)。您可以在其中找到包含图像的参数“图片”

# android - 如何以文本文件格式将 json listview 内容保存在 Sdcard 中？

> ID：11534364
> 
> 赞同：0
> 
> 时间：2012-07-18T04:36:10.533
> 
> 标签：android, file, listview, fileoutputstream

我有一个`ListView`由`json`数据组成的。我想使用文件存储内容。所以我想将`ListView`文本文件格式保存到我的 SDCard 中。有没有例子？谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:47:30.620

是的，当然，在将数据显示到 ListView 时，我确信您使用的是 JSONArray。

您可以轻松地将 JSONArray 或 JSONObject 转换为字符串。

例如：

```
String strArray = myJsonArray.toString();
String strObj = myJsonObject.toString(); 
```

现在，当您拥有字符串值时，您可以将其写入文件或存储到数据库中。

# ios - 如何在 iOS 运行时将浮点数作为参数传递

> ID：11534372
> 
> 赞同：0
> 
> 时间：2012-07-18T04:37:02.130
> 
> 标签：ios, parameters, floating-point

我真的是iOS新手。我已经设置了我的`float`变量并为它们赋值以计算薪水

前任：

```
float hra=34555.444;

float pf=1223.33;

float baseSalary=1222.33 
```

通过使用`Nsnumber`我也可以计算工资。

我也得到了答案。现在我想知道如何将这些`float`作为可以在运行时更改的参数传递。我没有使用任何 UI，所以它应该是硬编码的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:47:27.797

像这样在类中创建一个方法

```
-(void)methodName:(float)value{
//use value as your wish
} 
```

向此方法发送值

```
float hra=34555.444;

float pf=1223.33;

float baseSalary=1222.33
[self methodName: baseSalary]; 
```

# android - 使用内容更新对话框

> ID：11534374
> 
> 赞同：0
> 
> 时间：2012-07-18T04:37:16.247
> 
> 标签：android, file, search, dialog

我想在 SdCard 中搜索文件时显示一个自定义对话框。自定义对话框将一次显示找到的文件。虽然这太快了，无法看到所有正在显示的文件。我不确定这是否可能。到目前为止我认为的方法是使用 Asynctask 获取文件列表。但我无法实时更新带有文件名的对话框。有没有人尝试过这个。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:45:24.147

您可以通过两种方式更新对话框：

1.  runOnUiThread()
2.  onProgressUpdate()

但是关于速度的事情将是相同的，因为您只想使用文件名更新对话框。因此，从 SDCard 获取文件名将是一项快速的任务。

# iphone - iphone dev 使用 fbconnect api 获取用户个人资料名称、电子邮件

> ID：11534375
> 
> 赞同：1
> 
> 时间：2012-07-18T04:37:17.460
> 
> 标签：iphone, objective-c

我正在使用它在我的 iphone 应用程序上的 facebook 上发布墙

```
kAppId =@"zsdgdfgjhjk";
    if (!kAppId) {
        NSLog(@"missing app id!");
        exit(1);
        return nil;
    }

    if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
        _permissions =  [[NSArray arrayWithObjects:
                          // @"read_stream", @"publish_stream", @"offline_access",@"user_events",@"friends_events",@"rsvp_event",nil] retain];
                          @"read_stream",@"email", @"publish_stream", @"offline_access",@"user_events",@"friends_events",@"rsvp_event",@"create_event",nil] retain];
        _facebook = [[Facebook alloc] initWithAppId:kAppId
                                        andDelegate:self];

- (IBAction)publishStream:(id)sender {

    SBJSON *jsonWriter = [[SBJSON new] autorelease];

    NSDictionary* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                           @"Always Running",@"text",@"http://itsti.me/",@"href", nil], nil];

    NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];
    NSDictionary* attachment = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"a long run", @"name",
                                @"The Facebook Running app", @"caption",
                                @"it is fun", @"description",
                                @"http://itsti.me/", @"href", nil];
    NSString *attachmentStr = [jsonWriter stringWithObject:attachment];
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Share on Facebook",  @"user_message_prompt",
                                   actionLinksStr, @"action_links",
                                   attachmentStr, @"attachment",
                                   nil];

    [_facebook dialog:@"publish.stream"
            andParams:params
          andDelegate:self];
} 
```

墙上的帖子进展顺利，但现在我想获取用户的 facebook 个人资料名称和电子邮件，为此我正在用户登录后尝试该代码

```
[_facebook requestWithGraphPath:@"me?fields=id,name,email" andDelegate:self]; 
```

和

```
- (void)request:(FBRequest *)request didLoad:(id)result
{
    if ([result isKindOfClass:[NSDictionary class]]){

        username = [result objectForKey:@"name"];
        }
} 
```

但即使这个 fbrequest 委托方法`- (void)request:(FBRequest *)request didLoad:(id)result`也不起作用，请不要调用它。指导，我已经被困在这里很长时间了。提前致谢。问候，萨德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:59:02.083

试试这个方法：

```
[_facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

您将通过这种方式解析响应：

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    if ([result isKindOfClass:[NSArray class]]){
        result = [result objectAtIndex:0];
    }
    if ([result objectForKey:@"owner"]) {
    }else{
                NSLog(@"response is %@", result);       
        NSString *email =[result objectForKey:@"email"];
        NSString *userFbId =[result objectForKey:@"id"];
                // grab other fields
    }
} 
```

# css - 我应该如何创建带有项目符号的描述列表？

> ID：11534383
> 
> 赞同：1
> 
> 时间：2012-07-18T04:38:28.567
> 
> 标签：css, html, html-lists

我有一个`<dl>`无序的描述列表，因此应该在每个`<dt>`.

**编辑：**为了澄清，我有一个无序列表的`<dt>`-`<dd>`对。它们应该看起来像一个列表项，`<dt>`前面有一个项目符号。

我可以想到两种将项目符号应用于此列表的方法：

1.  `<ul>`在项目周围放置 a`<dt>`然后`<li>s`在项目周围放置
2.  使用`<dt>'s`CSS :before 伪选择器并给它一个项目符号的内容

用项目符号创建描述列表的更好方法是什么？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-13T13:32:57.690

根据我对类似问题的处理，该`<dl>`标签似乎不支持列表项目符号。这是一个耻辱，因为它*是*一个 html 列表。（而且，似乎没有人记录这一点。）

幸运的是，您可以毫不费力地用其他代码块打断列表。而且，还有`<br />`标签。所以....

CSS：

```
ul.listPlayed {
     list-style-type: square;
} 
```

HTML：

```
<ul class="listPlayed">
    <li>1st Game<br />
    Description of first game.<br />
    <a href="#">Wikipedia</a><br />
    <a href="#">Official page</a></li>
</ul> 
```

因此，将所有文本放在`<li>`标签中，并在该集中设置格式。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-18T05:52:33.893

为什么不简单地使用无序列表？你不是有什么特别的原因吗？

但要回答您的问题，您可以使用：

```
<dt>
   <dd style='display:list-item;'> Content </dd>
   <dd style='display:list-item;'> Content </dd>
</dt> 
```

我不确定跨浏览器的兼容性。

# iphone - 何时调用 viewDidAppear？

> ID：11534396
> 
> 赞同：4
> 
> 时间：2012-07-18T04:39:58.653
> 
> 标签：iphone, objective-c, ios, ipad

如果我有一个名为 B 的 UIViewController。如果我将 UIViewController C 添加为 B 的子视图/子视图控制器。然后我将 D 添加为 B 的子视图控制器。然后我从 B 中删除 D。在这种情况下，应该在之后调用 C 的 viewDidAppear 吗？

我问的原因是因为我没有接到 B 对 viewDidAppear 的调用。我打算在B被解雇时做点什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T04:43:28.717

`viewDidAppear`当您关闭模式视图时不会调用。将模态视图视为视图顶部的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T04:59:04.250

我认为，在添加或删除子视图时不会调用 viewDidAppear 。这背后的原因是，我们将几个对象作为子视图添加/删除到视图中。在这种情况下，viewDidAppear 将被一次又一次地调用，这**不是**一个好的机制。当您在当前视图上加载一个类对象并将屏幕移动到另一个类的视图然后返回到前一个类时，会调用 viewDidAppear。**简而言之，如果您将导航控制器推送到新视图，然后将其弹出到旧视图，则调用 viewDidAppear。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T06:27:11.833

正如我现在测试的那样`viewDidAppear`，当视图出现在屏幕上时会调用。甚至1px。即使你被任何其他人覆盖`subView`并再次发现它，此方法也不会再次调用。

这意味着它只会在`subView`第一次出现后调用。除非您将其删除并重新添加。在`viewdidAppear`您删除“D”后，您的“C”问题不再调用。

# asp.net-mvc-3 - 将 @helper 代码转移到 App_Code 文件夹抛出错误

> ID：11534404
> 
> 赞同：4
> 
> 时间：2012-07-18T04:40:47.657
> 
> 标签：asp.net-mvc-3, razor

我有一个`@heper pagination`功能。那是有两个 View helper`ViewBag`和`Url`. 这个分页将被很多页面使用，所以我将代码从`Views`一个文件夹转移到另一个文件`App_Code`夹。里面的代码`App_Code/Helper.cshtml`

```
@helper buildLinks(int start, int end, string innerContent)
{
     for (int i = start; i <= end; i++)
     {   
         <a class="@(i == ViewBag.CurrentPage ? "current" : "")" href="@Url.Action("index", "country", new { page = i })">@(innerContent ?? i.ToString())</a>
     }   
} 
```

但是现在当我运行应用程序时。它抛出错误

```
error CS0103:The name 'ViewBag' does not exist in the current context
error CS0103:The name 'Url' does not exist in the current context 
```

我是否需要导入任何命名空间或问题出在哪里？

我想做的方式是完美的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T09:41:32.793

好吧，实际上您可以从 App_Code 文件夹中的帮助程序访问 ViewBag，如​​下所示：

```
@helper buildLinks()
{
    var p = (System.Web.Mvc.WebViewPage)PageContext.Page;

    var vb = p.ViewBag;

    /* vb is your ViewBag */
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T04:59:43.677

如果您将助手移至 App_Code，则必须将`ViewBag`, `UrlHelper`,传递`HtmlHelper`给视图中的函数。

前任。

**App_code 中的 html 辅助函数**

```
@helper SomeFunc(System.Web.Mvc.HtmlHelper Html)
{
    ...
} 
```

**在你看来，**

```
@SomeFunc("..", Html) // passing the html helper 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T06:12:33.137

正如马克所说，您应该将 UrlHelper 作为参数传递给您的助手：

```
@helper buildLinks(int start, int end, int currentPage, string innerContent, System.Web.Mvc.UrlHelper url)
{
     for (int i = start; i <= end; i++)
     {   
         <a class="@(i == currentPage ? "current" : "")" href="@url.Action("index", "country", new { page = i })">@(innerContent ?? i.ToString())</a>
     }   
} 
```

然后从一个视图中这样称呼它：

```
@Helper.buildLinks(1, 10, ViewBag.CurrentPage, "some text", Url) 
```

# regex - 我应该使用什么正则表达式模式在连续行上找到两个具有相似值的字符串

> ID：11534406
> 
> 赞同：3
> 
> 时间：2012-07-18T04:40:52.257
> 
> 标签：regex, vim, vi

我应该使用什么正则表达式模式在连续行上找到两个具有相似值的字符串

例如，如果我有类似的东西：

（注意：以下值已在前面缩进）

```
 end
    end 
```

**我将如何使用vi**编辑器搜索这个？

编辑

```
I would like it to match "    end" and "    end" or "  end" and "  end" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:08:22.930

很简单：

```
/pattern\npattern/ 
```

`pattern`你想找的东西在哪里。您的问题太模糊，无法提供更有用的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:29:29.803

既然你提到值是缩进的......你可以使用这个模式来克服这个问题：

`/end\n\s*end`

代表空白，这`\s`意味着它可以是制表符或空格。这`*`意味着前面的字符可以没有或无限（在这种情况下，空格）。如果您只想匹配两个空格，您可以使用`/end\n end`or `/end\n\s\send`。如果您想匹配四个，您可以类似地全部输入它们，或者`/end\n\s\{4}end`只匹配 4 个空白字符（空格或制表符）。

我认为您真正想做的是匹配相同的行。所以你可以做到`/\(^.*$\)\n\1`这一点。如果您想要一定数量的相同行`/\(^.*$\)\(\n\1\)\{15}`（此示例使用 15，但您可以将其更改为您想要的任何数字或切换`\{15}`任何`*`匹配项。

# vb.net - MS-Access 和 VB.NET Insert 工作一半的时间

> ID：11534407
> 
> 赞同：0
> 
> 时间：2012-07-18T04:41:11.487
> 
> 标签：vb.net, ms-access

这不是 asp，只是我正在尝试制作的常规本地数据库程序。

我有这个编辑子：

```
Protected Sub update()

    Dim sqlString As String
    Dim pair_0f_attribute As ArrayList = buildSqlUpdate()

    sqlString = "UPDATE " & getSharedTableName() & " SET "
    sqlString = sqlString & String.Join(", ", pair_0f_attribute.ToArray)
    sqlString = sqlString & " WHERE UID = " & id

    cmd = New OleDbCommand(sqlString, conn)
    cmd.CommandType = CommandType.Text

    ExecuteNonQuery(cmd)

End Sub 
```

这给了我在 INSERT 命令上的错误。我已经分解了这个巨大的插入（我有 70+ 列，我不想为我的 db 上的所有 2000+ 行手动执行它）一次只获得 1 个值并检查它失败的位置。

```
Public Sub editrow(ByVal ID As Integer, ByVal ColumnName As String, ByVal value As Object)

    Dim SqlString As String = "Update " & getSharedTableName() & " Set " & ColumnName & " = ? Where UID = " & ID

    Dim cmd As New OleDbCommand(SqlString, conn)

    cmd.CommandType = CommandType.Text

    cmd.Parameters.AddWithValue(ColumnName, value)

    ExecuteNonQuery(cmd)

End Sub 
```

这适用于用户名，它是一个字符串，级别是一个整数，xp 是一个整数等......对于几个插入，它很好，而不是突然在 8 日我在插入语句上得到一个错误。

我的 ColumnName 是“Size”，我尝试将其更改为“MSize”，但仍然出现错误，值为“Medium”。

当 columnname "UserName" 也使用字符串 wokrs 时，为什么这个会失败？

我已经检查了我的数据库，并且字段 Size（现在是 MSize）设置为 Text，没有默认值，它可以为 null，并且最大长度为 255。数据库中的任何字段都没有使用格式或验证或正则表达式...

有人对我应该如何进行修复有任何提示吗？

** 编辑

我使用的 buildSqlUpdate() 继承人：

```
 Private Function buildSqlUpdate() As ArrayList
    Dim pair_arraryList As New ArrayList
    For Each element As KeyValuePair(Of String, Object) In attributes
        pair_arraryList.Add("[" & element.Key & "] = '" & element.Value & "'")
    Next
    Return pair_arraryList
End Function 
```

在你问之前;）属性是存储在字典中的数据库列名，当我构建一个对象的新实例时，它们的值在运行时填充，它工作得很好，我插入之前的字符串（即使太长了) 当我检查它时，它看起来很好。

****** *** ******编辑******* *** *********

 *****我按照 Remou 的建议添加了括号，现在我没有得到同样的错误......如果我使用第一个插入（完全构造的插入）我得到这个错误：

（以下表达式中的语法错误（缺少运算符）： .... 一些字符串值 ....

如果我使用编辑行，我没有任何错误（但它很长……花了大约 2 分钟，并且只增加了 2k 中的 125 项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:25:24.883

Size 肯定是一个保留字*，应该用括号括起来`[size]`。在创建诸如您不知道字段（列）名称的代码时，我认为假设您需要括号总是更安全。

[* Jet](http://support.microsoft.com/kb/248738)和[ACE](http://msdn.microsoft.com/en-us/library/bb208875%28v=office.12%29.aspx)中的保留字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:50:25.303

天哪，问题出在预制数据库中，列名有错误（organisatoin 而不是 organization）...

不敢相信我花了一个多星期才找到...*****

# node.js - Windows 7 上的 Tower.js：无法读取 null 的属性监视文件

> ID：11534409
> 
> 赞同：2
> 
> 时间：2012-07-18T04:41:26.873
> 
> 标签：node.js, towerjs

我已按照[Tower.js 的安装说明进行操作](https://github.com/viatropos/tower/)，但在尝试启动服务器时出现错误。

```
TypeError: Cannot read property 'watchfile' of null 
```

我的安装步骤是-

1.  安装 node.js
2.  安装 mongodb
3.  安装 Ruby 和 Ruby 开发工具包。
4.  安装 Tower.js-

> ```
> sudo npm install design.io -g
> npm install tower -g 
> ```

1.  生成应用

> ```
> tower new app
> cd app
> sudo npm install
> tower generate scaffold Post title:string body:text
> npm test
> node server 
> ```

我收到一个错误`npm test`-

```
> ./node_modules/mocha/bin/mocha $(find test -name "*Test.coffee")

'.' is not recognized as an internal or external command,
operable program or batch file.
npm ERR! Test failed.  See above for more details.
npm ERR! not ok code 0 
```

运行节点服务器，服务器启动，但给出连续错误

```
c:\Projects\MyProject\node_modules\design.io\lib\design.io\extensions\watchfile.js:7
    return project.createWatcher(project.watchfile, {
                                        ^
TypeError: Cannot read property 'watchfile' of null
    at Object.module.exports (c:\Projects\MyProject\node_modules\design.io\lib\design.io\extensions\watch
ile.js:7:41)
    at Object.module.exports.extension (c:\Projects\MyProject\node_modules\design.io\lib\design.io.js:11:
6)
    at Object.<anonymous> (.:14:22)
    at Module._compile (module.js:449:26)
    at Object.Project.read (c:\Projects\MyProject\node_modules\design.io\lib\design.io\project.js:168:22)
    at Object.module.exports.coffee (c:\Projects\MyProject\node_modules\mint\mint.js:187:18)
    at Project.read (c:\Projects\MyProject\node_modules\design.io\lib\design.io\project.js:167:21)
    at fs.readFile (fs.js:176:14)
    at fs.close (c:\Projects\MyProject\node_modules\design.io\node_modules\hook.io\node_modules\npm\node_
odules\graceful-fs\graceful-fs.js:94:5)
    at Object.oncomplete (fs.js:297:15)
Forever detected script exited with code: 1
Forever restarting script for 1 time 
```

我是 Node.js 的新手，并且在 Windows 7 64 位上。关于可能导致此错误的任何提示？

# javascript - CSS 图层，标题位于图像图层之下

> ID：11534411
> 
> 赞同：0
> 
> 时间：2012-07-18T04:41:35.897
> 
> 标签：javascript, jquery, html, css, knockout.js

我编写了包含样式表的 html 代码。**图像**，**标题**在课堂上，我想在**标题**顶部显示**图像**..现在它位于 **图像**层下方。而且**标题**也不适合数据层。帮帮我..这是html代码：

 ******```
<div id="layout-panel">
        <div id="tile-container">
            <div id="tiles-panel" data-bind="foreach: data">
                <div class='row-horizontal-tile'>
                    <div class='data-layer'>
                        <div><img data-bind="attr:{src:ImageUrl}" class="stick-image"/></div>                              
                        <div class='text-title' data-bind="text: Title">
                        </div>                 
                    </div>                        
                </div>
            </div>
        </div>
    </div> 
```

上述html代码的css如下：

```
.row-horizontal-tile
{         
    margin:10px 5px 8px 1%; 
    width: 23%;
    height: 90%;
    display: inline-block;   
}
.data-layer
{    
    color:#ffffff;    
    font-family:Calibri;        
    text-align:inherit;     
    color:Black; 
    background-color: white;
    height: 100%;
    width:100%;
    border-width: 3px;
    border-style:outset;     
} 
.stick-image
{    
    height: 100%;
    width:100%;  
    background-color: white;
}    
.text-title
{   
    font-family: DokChampa;
    font-size: large;
    text-align:center;
}
#layout-panel
{
    background-color: #444444;
    width: 100%;
    height: 70%; 
}
#tile-container
{
    height: 80%;
    width: 90%;
    background-color:#CCCCCC;
    position:relative;    
    top: 10%;  
    left: 5%; 
}
#tiles-panel
{   
    height: 100%; 
    white-space:nowrap;
    overflow-x:hidden;  
    overflow-y:hidden; 
} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:48:20.537

在以下课程中添加这些属性可能会对您有所帮助：

```
.data-layer{ position:relative;}

.text-title{ position:absolute; z-index:9; bottom:5px; right:5px;} 
```******

# java - 在 Java 中创建静态单例模式

> ID：11534419
> 
> 赞同：1
> 
> 时间：2012-07-18T04:42:28.803
> 
> 标签：java, javascript, scope, singleton

我正在创建一个实用程序类，它将用于（除其他外）创建一个`org.mozilla.javascript.Context`绑定到当前线程的新对象。我有一个单一的全局 JavaScript 范围，它可能有几个导入/初始化语句等。

我希望外部类能够通过简单地使用`Utility.getContext()`and来检索 Context 对象和 Scope 对象以供将来执行`Utility.getScope()`，而不必显式使用该`getInstance()`函数。单例模式是必要的，因为上下文和范围都需要是单个实例。

下面的代码有意义吗？

```
public class Utility {
    private static Utility instance;
    private static ScriptableObject scope = null;

    private Utility() {}

    private static Utility getInstance() {
        synchronized (Utility.class) {
            if (instance == null)
                instance = new Utility();
            return instance;
        }
    }

    private static Context getSingletonContext() {
        Context context = Context.getCurrentContext();
        if (context == null)
            context = Context.enter();
        if (scope == null) {
            scope = new ImporterTopLevel(context);
            Script script = context.compileString("Global JavaScript Here","Script Name",1,null);
            script.exec(context,scope);
            scope.sealObject();
        }
        return context;
    }

    public static Context getContext() {
        return getInstance().getSingletonContext();
    }

    public static Scriptable getScope() {
        Scriptable newScope = getContext().newObject(scope);
        newScope.setPrototype(scope);
        newScope.setParentScope(null);
        return newScope;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T04:51:21.857

**1.**公开

```
public static Utility getInstance() 
```

**2.**不需要将类中的所有方法都设为静态，除了这个`getInstance()`方法。

**3.**当你尝试在其他类中访问这个类的单例对象时，这样做。

```
Utility ut = Utility.getInstance(); 
```

看到这就是为什么你不需要使实用程序类中的方法静态除了`getInstance()`

**4.获取****Singleton**的三种方式，

**一世。**同步方法

**ii.** 带有双重检查锁定的同步语句。

**iii.** 在定义时初始化静态对象引用变量..

**例如：**

**在定义时初始化静态对象引用变量**

```
private static Utility instance = new Utility();

private Utility() {}

    private static Utility getInstance() {

           return instance;                  // WILL ALWAYS RETURN SINGLETON
                                      // REFER HEAD FIRST DESIGN PATTERN BOOK FOR DETAILS

    } 
```

# javascript - 自定义 CSS 输入框导致页面在 ENTER 键上刷新

> ID：11534422
> 
> 赞同：2
> 
> 时间：2012-07-18T04:43:35.010
> 
> 标签：javascript, html, css

> **可能重复：**
> [停止提交表单的 Enter/Return 键](https://stackoverflow.com/questions/10313032/stop-enter-return-key-submitting-a-form)

我正在尝试使用我在网上找到的 css 创建一个简单的搜索表单。我希望用户能够在文本框中点击 ENTER 键并让它运行查询，而无需用户单击按钮。我尝试检查 keydown 上的 ENTER 键，但由于某种原因页面不断刷新。这次刷新的原因是什么？

```
.searchform {
    display: inline-block;
    zoom: 1; /* ie7 hack for display:inline-block */
    *display: inline;
    border: solid 1px #d2d2d2;
    padding: 3px 5px;

    -webkit-border-radius: 2em;
    -moz-border-radius: 2em;
    border-radius: 2em;

    -webkit-box-shadow: 0 1px 0px rgba(0,0,0,.1);
    -moz-box-shadow: 0 1px 0px rgba(0,0,0,.1);
    box-shadow: 0 1px 0px rgba(0,0,0,.1);

    background: #f1f1f1;
    background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#ededed));
    background: -moz-linear-gradient(top,  #fff,  #ededed);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#ededed'); /* ie7 */
    -ms-filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#ededed'); /* ie8 */
}
.searchform input {
    font: normal 12px/100% Arial, Helvetica, sans-serif;
}
.searchform .searchfield {
    background: #fff;
    padding: 6px 6px 6px 8px;
    width: 202px;
    border: solid 1px #bcbbbb;
    outline: none;

    -webkit-border-radius: 2em;
    -moz-border-radius: 2em;
    border-radius: 2em;

    -moz-box-shadow: inset 0 1px 2px rgba(0,0,0,.2);
    -webkit-box-shadow: inset 0 1px 2px rgba(0,0,0,.2);
    box-shadow: inset 0 1px 2px rgba(0,0,0,.2);
}
.searchform .searchbutton {
    color: #fff;
    border: solid 1px #494949;
    font-size: 11px;
    height: 27px;
    width: 35px;
    text-shadow: 0 1px 1px rgba(0,0,0,.6);

    -webkit-border-radius: 2em;
    -moz-border-radius: 2em;
    border-radius: 2em;

    background: #5f5f5f;
    background: -webkit-gradient(linear, left top, left bottom, from(#9e9e9e), to(#454545));
    background: -moz-linear-gradient(top,  #9e9e9e,  #454545);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#9e9e9e', endColorstr='#454545'); /* ie7 */
    -ms-filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#9e9e9e', endColorstr='#454545'); /* ie8 */
}

#search {margin-top:30px; marin-right:auto;} 
```

使用以下形式：

```
<div align="center" id="search">
    <form class="searchform">
        <input class="searchfield" style="color:#636363" type="text" value="Title/Album..." onkeydown="if (event.keyCode == 13) {querySong();}" onfocus="if (this.value == 'Title/Album...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Title/Album...';}" />
    </form>
    <form class="searchform">
        <input class="searchfield" style="color:#636363" type="text" value="Artist..." onkeydown="if (event.keyCode == 13) {querySong();}" onfocus="if (this.value == 'Artist...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Artist...';}" />
        <input class="searchbutton" type="button" value="Song" onclick="querySong()"/>&nbsp
        <input class="searchbutton" type="button" value="Album" onclick="queryAlbum()"/>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:58:14.017

您需要阻止表单在 Enter 上执行默认操作，即提交表单。

这有点笨拙，您需要为您的案例选择合适的形式，但基本上您只需要返回 false 以防止默认行为。

```
$('form').submit( function() { return false; } ); 
```

或者没有 jQuery

```
var el = document.getElementById('formId');

if (el.addEventListener) {
  el.addEventListener('submit', preventDefaultAction, false); 
} else if (el.attachEvent)  {
  el.attachEvent('submit', preventDefaultAction);
}

var preventDefaultAction = function () { return false; } 
```

# java - Hibernate 抛出 ConcurrentModificationException

> ID：11534424
> 
> 赞同：1
> 
> 时间：2012-07-18T04:43:40.227
> 
> 标签：java, hibernate, exception

我正在为我一直在研究的*持久性层*编写一些测试，并且遇到了一个我无法处理的异常，*它*发生在*`org.hibernate.mapping.Table.cleanseUniqueKeyMap(Table.java:291)`*.
原来是这行代码：

```
final Map.Entry<String,UniqueKey> uniqueKeyEntry = uniqueKeyEntries.next(); 
```

在做了一些研究之后，我发现异常是由一个线程在这个线程迭代它时修改这个集合引起的。话虽如此，我觉得我所做的一切都没有导致这种情况发生，有什么关于故障排除的建议吗？

顺便说一句，我正在使用`hibernate 4.1.5`. Idk 是否可以解决任何问题。这是我的测试：

```
@Test
public void testCreateMobsterUser() {
   try {            
       final MobsterUserDAO test = new MobsterUserDAO(); //throws exception
       //does stuff w/ return value... 
```

如您所见，我们尝试初始化 dao 让我们看看代码：

```
public MobsterUserDAO() {
    super(MobsterUser.class);
} 
```

好吧，这并没有向我们展示太多，所以让我们看看通用 dao 构造函数，看看你是否发现了那里的问题。

```
public MobsterBaseHibernateDAO(final Class<T> clazz) {
    this.clazz = clazz;
    //This next line is where the exception is actually occuring
    final EntityManagerFactory factory = Persistence.createEntityManagerFactory("mobsterdb");
    this.manager = (HibernateEntityManager) factory.createEntityManager();
} 
```

现在我不确定 Persistance.createEntityManagerFactory 是哪种兔子洞，但这是我在异常发生之前执行的代码的最后一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T04:46:16.657

当您在 for-each 循环中迭代集合并在其他地方更改集合时，会发生并发修改。一种常见的解决方案是使用`Iterator`而不是 for-each 循环。或者让您的收藏成为`synchronized`区块。

到处都有资源：

[避免 ConcurrentModificationException](http://www.javacodegeeks.com/2011/05/avoid-concurrentmodificationexception.html)，它说：

1.  您可以将列表转换为数组，然后对数组进行迭代。这种方法适用于中小型列表，但如果列表很大，则会对性能产生很大影响。

2.  您可以在迭代时锁定列表，方法是将其放入同步块中。不推荐这种方法，因为它会失去多线程的好处。

3.  如果您使用的是 JDK1.5 或更高版本，则可以使用 ConcurrentHashMap 和 CopyOnWriteArrayList 类。这是推荐的方法。

还：

[ConcurrentModificationException](https://stackoverflow.com/questions/1496180/concurrent-modification-exception)
[如何调试 ConcurrentModificationException？](https://stackoverflow.com/questions/840165/how-to-debug-concurrentmodificationexception)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T06:19:27.210

由于在 Hibernate 的内部管理过程​​中这似乎是一个例外，我认为这是一个错误。在 Google 上快速搜索确实会显示[最近报道的 JIRA](https://hibernate.onjira.com/browse/HHH-7446)。

提出了一项决议，但不知道何时发布。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T12:51:52.583

发生这种情况是因为您的循环通过一个集合，然后在循环内部的某个位置，您更改了您正在迭代的集合，并且您尝试恢复循环，就好像没有任何变化一样。

我也有同样的事情发生在我身上：

```
for(UserJPA jpa : jpaList){
    if(jpa satisfies a condition){
        jpaList.remove(jpa);
    }
} 
```

问题是您无法修改正在迭代的列表。在我的情况下，我选择的解决方案是制作一个新列表，即原始列表的副本，以迭代它，同时修改原始列表：

```
List<UserJPA> iterationList = new ArrayList<UserJPA>(jpaList);
for(UserJPA jpa : iterationList){
    if(jpa satisfies a condition){
        jpaList.remove(jpa);
    }
} 
```

希望有帮助。

# sql - Microsoft Access - 案例查询

> ID：11534425
> 
> 赞同：9
> 
> 时间：2012-07-18T04:43:42.793
> 
> 标签：sql, ms-access

我刚刚尝试使用 MS Access 2007 现在我想根据其他列值更新列，在我的 SQL 中它成功运行了这个查询

```
UPDATE HAI
SET REGION=(
CASE
  WHEN (NUMREG LIKE '%1') THEN 'BDG'
  WHEN (NUMREG LIKE '%2') THEN 'JKT'
  WHEN (NUMREG LIKE '%3') THEN 'KNG'
END); 
```

此查询不会在 MS Access 中运行，存在错误`Sytax error (missing operator) in query expression`。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-18T05:13:08.140

Access SQL 中没有 CASE ... WHEN。您可以改用[开关功能](http://office.microsoft.com/en-us/access-help/switch-function-HA001228918.aspx)。

```
UPDATE HAI
SET REGION = Switch(
    NUMREG Like '*1', 'BDG',
    NUMREG Like '*2', 'JKT',
    NUMREG Like '*3', 'KNG'
    ); 
```

该查询使用 Access 的默认值（ANSI 89 模式）* 而不是 % 通配符。如果要使用 % 通配符，可以使用 Alike 比较运算符。

```
UPDATE HAI
SET REGION = Switch(
    NUMREG ALike '%1', 'BDG',
    NUMREG ALike '%2', 'JKT',
    NUMREG ALike '%3', 'KNG'
    ); 
```

# ruby - 所有 ruby 文件都应该具有与文件夹结构相匹配的模块结构吗？

> ID：11534426
> 
> 赞同：11
> 
> 时间：2012-07-18T04:43:54.147
> 
> 标签：ruby, module, idioms

是否所有文件都位于具有文件夹结构的模块中（类似于 java 包）的 ruby​​ 约定？

例如，如果我的文件结构看起来像

库/人/实用程序

这里的文件是否具有模块结构，例如：

```
module People
  module Utils
    # some functionality for People::Utils
  end
end 
```

我问的原因是因为我一直在阅读一些 Rails 代码，并且似乎有几个文件位于这样的文件结构中，但没有任何模块声明。

我猜这将是您可以使用实用程序功能而不必包含`People::Utils`.

ruby 中是否有关于何时应该使用模块以及何时不应该使用模块的约定？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-18T05:38:17.590

它是 Rails 中的标准。Rails 加载模型的方式是通过查看文件夹结构来猜测类的位置。我们有所谓的`autoload_paths`.

你可以通过调用你的来找到它们`rails console`（这有点hacky，可能有更简单的方法来显示它们）：

```
app.instance_variable_get(:"@app").instance_variable_get(:"@_all_autoload_paths") 
```

默认的 Rails 应用程序输出，没有`config.autoload_paths += %W(#{config.root}/lib)`在您的`config/application.rb`配置块中，如下所示：

```
["/Users/lunks/Code/rsvp/app/assets",
 "/Users/lunks/Code/rsvp/app/controllers",
 "/Users/lunks/Code/rsvp/app/helpers",
 "/Users/lunks/Code/rsvp/app/mailers",
 "/Users/lunks/Code/rsvp/app/models"] 
```

所以，如果你有`app/models/something/util.rb`并且你在`Something::Util`某个地方打电话，它会查看这些路径，找到`app/models/`文件夹`something/util.rb`并加载它。

另一方面，Ruby 并不关心这些。普通 Ruby 中的自动加载按[本页](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)所述工作。您必须使用自动加载或直接要求文件（文件夹结构没有任何意义）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T05:29:09.560

将类和文件放在这样的结构中通常是一个好主意，因为这将使人们更容易将类的名称映射到其定义。

但是不这样做是有意义的（最终你可以根据自己的喜好构建代码）。当有很多小班都在处理同样的事情时，我偶尔会这样做，我把它们放在一起。

拥有一个不定义模块或类的文件是有意义的，例如配置文件、二进制文件或引导文件（加载所有其他文件的文件）。

# android - 如何制作一个标签栏应用程序，我可以用它来查看在单击按钮时显示我的谷歌地图。-android

> ID：11534434
> 
> 赞同：0
> 
> 时间：2012-07-18T04:44:43.247
> 
> 标签：android

我正在创建一个旅游景点应用程序。我已经创建了带有 3 个选项卡和几个按钮链接的选项卡栏应用程序。我目前正在研究如何在我的选项卡应用程序栏中单击一个按钮时显示我的谷歌地图。我会想知道我如何将谷歌地图实现到其中一个按钮中。我已经发布了我在这里所做的[http://www.mediafire.com/?bdgdssdi6rs9oab](http://www.mediafire.com/?bdgdssdi6rs9oab)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:00:27.820

您需要使用`Intent`来调用内置的谷歌地图应用程序。因此在`Button` `OnClickListener`编写代码时：

```
Intent i = new Intent(android.content.Intent.ACTION_VIEW,
                      Uri.parse("geo:37.827500, -122.481670"));
startActivity(i); 
```

请注意，为了显示地图应用程序，您还需要在支持 Google API 的 AVD 上运行应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:36:06.940

不，您不需要创建新项目。只需转到 Window --> AVD Manager --> new。创建一个新的 AVD（Android 虚拟设备）。确保您选择 Google API 作为目标。然后使用此 AVD 运行您的应用程序。

# android - 如何从 ExpandableListView 中的子项获取项目？

> ID：11534435
> 
> 赞同：9
> 
> 时间：2012-07-18T04:44:52.540
> 
> 标签：android, expandablelistview

我的应用程序上有 onChildClick 方法，这是我的代码

```
public class listview extends ExpandableListActivity {

 private static final String NAME = "NAME";
 private static final String IS_EVEN = "IS_EVEN";
 private ExpandableListAdapter mAdapter;
 List<Map<String, String>> groupData = new ArrayList<Map<String, String>>();
 List<List<Map<String, String>>> childData = new ArrayList<List<Map<String, String>>>();
 InputStream is;
 boolean addState = true;
 boolean addCountry;
 HashMap<String, String> countryMap = new HashMap<String, String>();
 HashMap<String, String> stateMap = new HashMap<String, String>();
 int count = 0;
 int count1 = -1;
 int count2 = 0;
 List<String> stateCount = new ArrayList<String>();

 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  // Reading data from text file to inout stream
  is = this.getResources().openRawResource(R.raw.countrystate);
  BufferedReader reader = new BufferedReader(new InputStreamReader(is));
  try {
   String line = "";
   while ((line = reader.readLine()) != null) {
    String[] strings = line.split("-");
    String ctry = strings[0].trim();
    String st = strings[1].trim();
    /*
     * loading country and state to two separate hash tables
     */
    if (countryMap.containsValue(ctry)) {
     addCountry = false;
     if (!addState) {
      stateMap.put("state" + count1 + count2, st);
      count2++;
     }
    } else {
     addCountry = !addCountry;
     count1++;
     //adding no. of states for a country to a list
     stateCount.add("" + count2);
     if (addCountry) {
      count2 = 0;
      countryMap.put("country" + count, ctry);
      stateMap.put("state" + count1 + count2, st);
      addState = false;
     }
     count2++;
     count++;
    }
   }
  } catch (Exception e) {
  }
  //re-arranging the state count list
  stateCount.add("" + count2);
  stateCount.remove(0);
  for (int i = 0; i < countryMap.size(); i++) {
   Map<String, String> curGroupMap = new HashMap<String, String>();
   groupData.add(curGroupMap);
   String ctry = countryMap.get("country" + i);
   curGroupMap.put(NAME, ctry);
   curGroupMap.put(IS_EVEN, "Country " + i);
   List<Map<String, String>> children = new ArrayList<Map<String, String>>();
   int k = Integer.parseInt(stateCount.get(i));
   for (int j = 0; j < k; j++) {
    Map<String, String> curChildMap = new HashMap<String, String>();
    children.add(curChildMap);
    curChildMap.put(NAME, stateMap.get("state" + i + j));
   // curChildMap.put(IS_EVEN, "State " + j);
   }
   childData.add(children);
  }

  // Set up our adapter
  mAdapter = new SimpleExpandableListAdapter(this, groupData,
    android.R.layout.simple_expandable_list_item_1, new String[] {
      NAME, IS_EVEN }, new int[] { android.R.id.text1,
      android.R.id.text2 }, childData,
    android.R.layout.simple_expandable_list_item_2, new String[] {
      NAME, IS_EVEN }, new int[] { android.R.id.text1,
      android.R.id.text2 });
  setListAdapter(mAdapter);

    }
  public boolean onChildClick (ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
        System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition+v.toString());

        return true;

 }

  public List<List<Map<String, String>>> getChildData() {
    return childData;
}

} 
```

我的 onClick 方法

```
public boolean onChildClick (ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
        System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition+v.toString());

        return true;

 } 
```

如果我单击列表子项，我想获取字符串

这是我的日志：

```
07-18 11:40:54.334: INFO/System.out(1014): Inside onChildClick at groupPosition = 0 Child clicked at position 0android.widget.TwoLineListItem@405337c0
07-18 11:40:56.714: DEBUG/dalvikvm(916): GC_EXPLICIT freed 14K, 53% free 2557K/5379K, external 884K/1038K, paused 111ms
07-18 11:40:58.744: INFO/System.out(1014): Inside onChildClick at groupPosition = 0 Child clicked at position 0android.widget.TwoLineListItem@405337c0 
```

我想获取不是“TwoLineListItem@405337c0”的字符串数据，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T04:59:31.923

利用：

```
parent.getExpandableListAdapter().getChild(groupPosition, childPosition); 
```

（如果您想要孩子的数据，或者`.getGroup(groupPosition)`如果您想要来自组的数据）视图而不是：

```
v.toString() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T05:12:50.357

尝试这个

```
public boolean onChildClick (ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
        System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " +  childData.get(groupposition).get(childPosition).get("NAME"));

        return true;

 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-10T15:09:15.180

出于某种原因，上述答案对我不起作用，但我在下面找到了解决方案

```
@Override
    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {
        // TODO Auto-generated method stub

        String message;
        TextView tx = (TextView) v; 
        message=tx.getText().toString();
        return false;
    } 
```

通过此代码，您将获得单击的 ExpandableListView 子项的文本

# api - OAuth PKCS p12 私钥的 Google API 密码是什么？

> ID：11534438
> 
> 赞同：16
> 
> 时间：2012-07-18T04:45:26.383
> 
> 标签：api, passwords, pkcs#12

Google API 设置提供了一种使用服务帐户创建项目的方法。

我将私钥下载为 PKCS #12 p12 文件。

我在哪里可以找到此文件的密码？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-18T04:45:26.383

答案：**notasecret**

[https://developers.google.com/console/help/#service_accounts](https://developers.google.com/console/help/#service_accounts)

在服务器到服务器交互中请求 OAuth 2.0 访问令牌时，您的应用程序需要私钥。Google 不会保留此私钥的副本，并且此屏幕是获取此特定私钥的唯一位置。当您单击“下载私钥”按钮时，PKCS #12 格式的私钥将下载到您的本地计算机。如屏幕所示，您必须安全地存储此密钥。

下载的私钥的名称是密钥的指纹。

检查计算机上的密钥或在应用程序中使用密钥时，您需要提供密码**notasecret**。请注意，虽然所有 Google 颁发的私钥的密码都是相同的（notasecret），但每个密钥在密码学上都是唯一的。

# objective-c - 沿标尺对象的边缘绘制

> ID：11534440
> 
> 赞同：3
> 
> 时间：2012-07-18T04:45:30.677
> 
> 标签：objective-c, ios, algorithm, trigonometry

我正在接近解决这个问题，但有一部分给我带来了麻烦。我试图模仿一个标尺对象，用户可以在画布上旋转、缩放和放置它，然后沿着边缘追踪以在画布上做一个标记。我遇到的问题是无论用户的手指走到哪里，都可以在线获得下一个点。我可以将法线从该点追溯到我拥有的边缘的一个小的透明视图，但是由于混叠（或其他原因），线在以纯直线以外的任何角度（0、90、180）绘制时会抽搐, 270)。我也试过写一个像 CGRectContainsPoint 这样的函数，除了它需要一个任意旋转的矩形，但我没有成功。

下面是根据用户的触摸计算点的代码：

```
- (CGPoint)perpendicularPointFromPoint:(CGPoint)point
{
    CGPoint testPoint1 = point;
    CGPoint testPoint2 = testPoint1;
    CGPoint pointToUse = CGPointZero;

    //Get the right angle to the current rotation, and make 
    //a unit vector in that direction
    CGFloat rightAngle = mCurRotation + M_PI_2;
    CGFloat xInc = cosf(rightAngle);
    CGFloat yInc = sinf(rightAngle);

    //Check both "forward" and "backward"
    int counter = 0;
    while(pointToUse.x == 0)
    {
        testPoint1.x += xInc;
        testPoint1.y += yInc;
        testPoint2.x -= xInc;
        testPoint2.y -= yInc;

        //mLineOutline is a small view on top of the ruler (transparent)
        if([self.superview hitTest:testPoint1 withEvent:nil] == mLineOutline)
        {
            pointToUse = testPoint1;
        }
        else if([self.superview hitTest:testPoint2 withEvent:nil] == mLineOutline)
        {
            pointToUse = testPoint2;
        }
        else if(counter++ > 1000) //Neither ray intersects the ruler
            pointToUse.x = -1.f;
    }

    return CGPointMake(roundf(pointToUse.x), roundf(pointToUse.y));
} 
```

但是，由于某种原因，线条在我绘制时会抖动（上下只有几个像素，但非常明显）。我能做些什么来对抗这个？另外，有没有更尴尬的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:10:56.833

Josh Caswell 的评论给了我一个想法。在[本文](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW40)中，它表示子节点中的坐标存储在本地空间中。我以前知道这一点，但不知何故，这意味着无论您如何旋转视图，视图始终朝上。它仅根据其在世界空间（或父空间）中的坐标进行旋转。

因此，我不是在超级视图上获取接触点然后进行计算，而是在子视图上获取接触点。将它的 y 值更改为 -2 或我想要的任何值（就在标尺上方，因为它总是在本地空间中面朝上），然后`[self convertPoint:point toView:self.superview];`让视图层次结构处理困难的部分。

# jpa - 在 JPQL 中编写删除查询的规则

> ID：11534441
> 
> 赞同：0
> 
> 时间：2012-07-18T04:45:34.417
> 
> 标签：jpa, jpql, toplink

是否有任何**规则**可以使用 Toplink Persistence Provider 在 JPQL 中编写查询（尤其是删除）？任何参考请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:37:01.480

你的意思是，像 JPA 规范一样？定义（JPQL）查询语言的东西。[请参阅本页](http://www.datanucleus.org/products/accessplatform_3_1/jpa/api.html)底部的链接。

# java - 无法单击到 android-uitableview 中的自定义项目

> ID：11534444
> 
> 赞同：0
> 
> 时间：2012-07-18T04:46:06.337
> 
> 标签：java, android, listview

我正在使用[android-uitableview](https://github.com/thiagolocatelli/android-uitableview)

我有这个问题：

当我使用此代码时：

```
 LayoutInflater mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
RelativeLayout view = (RelativeLayout) mInflater.inflate(R.layout.custom_view, null);
ViewItem viewItem = new ViewItem(view);
getUITableView().addViewItem(viewItem); 
```

当我单击此按钮时，我无法转到`onClick(int index)`<= 问题

但是当我使用时`getUITableView().addBasicItem`，我可以处理点击。

单击自定义视图时如何处理？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:07:07.727

我认为他们没有实施`onClick`for`addViewItem`但他们为`addBasicItem`.

[源代码](https://github.com/thiagolocatelli/android-uitableview/blob/master/android-uitableview/src/br/com/dina/ui/widget/UITableView.java)

你可以打电话`getUITableView().setClickListener(...)`

# android - 导出时 Android 应用程序崩溃

> ID：11534445
> 
> 赞同：0
> 
> 时间：2012-07-18T04:46:11.337
> 
> 标签：android, android-ndk, apk

我的安卓应用是酷阅读器的定制版。当我从 Eclipse 运行应用程序或在手机上调试它时，它运行良好。但是当我签名、导出、安装并从手机运行它时，它崩溃了。

在 logcat 中，我在应用程序崩溃之前看到以下内容：

```
07-17 21:40:40.371: D/Zygote(1218): Process 3136 terminated by signal (11)
07-17 21:40:40.371: E/InputDispatcher(1331): channel '40b7d8a8 com.myCustomApp/org.coolreader.CoolReader (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
07-17 21:40:40.371: E/InputDispatcher(1331): channel '40b7d8a8 com.myCustomApp/org.coolreader.CoolReader (server)' ~ Channel is unrecoverably broken and will be disposed!
07-17 21:40:40.451: D/dalvikvm(1331): GC_FOR_MALLOC freed 758K, 35% free 9419K/14279K, external 2060K/2410K, paused 85ms
07-17 21:40:40.451: I/WindowManager(1331): WIN DEATH: Window{40b7d8a8 com.myCustomApp/org.coolreader.CoolReader paused=false}
07-17 21:40:40.451: I/ActivityManager(1331): Process com.myCustomApp (pid 3136) has died.
07-17 21:40:40.471: E/ActivityManager(1331): fail to set top app changed! 
```

**更新：** 如果您不了解 CoolReader（我正在使用的开源项目），它是 jni 代码，具有 proGuard 配置，并使用 ndk。它也有普通的 Java 代码。我对 jni/ndk 或任何低级 c\c++ 代码没有太多经验，所以我不确定我能在那里做什么。

但同样，最重要的是它从 Eclipse 运行时运行良好，但导出的版本会自行关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:50:49.580

由于删除 ProGuard 可以清除崩溃，因此有两种选择：

1.  禁用 ProGuard
2.  告诉 ProGuard 保留它正在（错误地）消除的类/方法/变量。

要尝试的一件事是将以下规则添加到您的 ProGuard 配置中：

```
-keepclasseswithmembers class * {
    native <methods>;
} 
```

这将告诉 ProGuard 保留任何具有本机代码的内容。如果问题是 ProGuard 正在删除碰巧不是从 Java 调用的本机方法，那么这应该可以解决问题。

另一个问题可能是 ProGuard 正在删除仅从本机代码调用的 Java 回调方法。您可以通过首先使用标准命名模式（例如，`<something>Callback`）将它们全部命名，然后添加以下规则来保留所有这些：

```
-keepclasseswithmembers class * {
    *** *Callback(...);
} 
```

如果问题是类变量被删除，你将不得不明确列举这些：

```
-keep class com.example.MyClass {
    *** aFieldName;
} 
```

通过检查 ProGuard 在运行时生成的 usage.txt 文件，您可以找到有关 ProGuard 可能错误删除的其他线索。

# java - 使用 Java 匹配复杂名称变体的有效算法

> ID：11534448
> 
> 赞同：-2
> 
> 时间：2012-07-18T04:46:37.067
> 
> 标签：java, algorithm

我必须匹配许多商店名称，而且我很难让 Levenshtein 和 SoundEx 在给定我的数据的情况下产生可接受的结果。

以下是我正在处理的一些示例：

```
The Home Depot 
Office Depot
Apple store 
Apple 
Walgreens 
Walgreens Denver 
Quiznos 
Quiznos Sandwich Restaurants 
```

因此，例如，给定“Quiznos Sandwich Restaurants”，我想将其与“Quiznos”相匹配……“Walgreens Denver”与“Walgreens”相匹配。我有这些商店名称的完整列表。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:59:55.507

也许尝试通过“规范化”来缩小搜索范围？从查询中删除诸如“the”和“store”之类的绒毛，通过字典运行它以修复明显的错误和拼写错误？识别和删除明显的位置引用（如上面的“denver”）也可能有所帮助。

编辑：扩展一点（并删除一些其他 CS 主题 ;-) ）-如果您真的想解决“最佳”（最复杂）的方法，您需要获取输入字符串，运行它一些词性标注器（在此处查看有用的问题[Java Stanford NLP: Part of Speech labels?](https://stackoverflow.com/questions/1833252/java-stanford-nlp-part-of-speech-labels)），然后使用标注数据删除连接词（例如 - “mcdonalnds *around* manhatten” - around 可以被识别和删除）。也许它甚至可以帮助识别复数形式（不知道，从未尝试过），因此可以将诸如“华盛顿的家得宝”之类的东西规范化为“家得宝”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:59:50.310

对于这个问题，你知道 Levenshtein 复杂度是 O(mn)，这对于大量数据来说非常高。

通过检查对角线而不是行，并使用`lazy evaluation`，我们可以在 O(m (1 + d)) 时间内找到 Levenshtein 距离（其中 d 是 Levenshtein 距离），如果距离比常规动态规划算法快得多是小。

惰性评估链接：[http ://en.wikipedia.org/wiki/Lazy_evaluation](http://en.wikipedia.org/wiki/Lazy_evaluation)

或者我们也可以用 0 初始化矩阵的第一行，该算法可以用于`fuzzy string search`文本中的字符串。这种修改给出了文本匹配子串的结束位置。为了确定匹配子串的起始位置，插入和删除的数量可以单独存储，并用于从结束位置计算起始位置。

# android - 在我的 android 应用程序中，我想显示如下图所示的 textview？

> ID：11534450
> 
> 赞同：1
> 
> 时间：2012-07-18T04:47:06.720
> 
> 标签：android

我想根据下面的图片显示 Textview 任何人都可以帮助我。在 Android 中是否可能。

![在此处输入图像描述](../Images/d393ed5735acb8ffaf2c01942a2c8f2e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:07:22.887

您必须更改文本的大小。您可以使用 SpannableStringBuilder 更改它。

```
SpannableStringBuilder spanTxt = new SpannableStringBuilder("Different");
spanTxt.append("text1");
//make the textsize 2 times.
spanTxt.setSpan(new RelativeSizeSpan(2f), spanTxt.length() - " text1".length(), spanTxt.length(), 0); 
```

现在将其设置为您的 TextView 的文本。

要获取 textView 的边框，您可以像这样创建一个可绘制对象并将其设置为 TextView 的背景

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <stroke
        android:width="1dp"
        android:color="@color/grey"/>
<!-- "#5D2E8C"  -->
    <solid android:color="#ffffff" />       <!-- background to the border -->
    <padding
        android:bottom="0dp"
        android:left="0dp"
        android:right="0dp"
        android:top="0dp" />
    <corners android:radius="0dp" />
</shape> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:09:06.303

您可以通过在 TextViews 中使用以下属性来使用 RelativeLayout 来做到这一点

```
 android:layout_marginLeft
 android:layout_marginRight
 android:layout_below
 android:layout_above
 android:layout_toLeftOf
 android:layout_toRightOf 
```

*   为每个单词使用不同的 TextView（大、中、小文本视图）

    即，通过在文本视图中设置以下属性

    ```
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textAppearance="?android:attr/textAppearanceSmall" 
    ```

*   将“边界图像”作为相对布局的背景

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:01:45.860

您可以使用`transparent`文本视图：

```
<TextView 
...
android:background="@null"
...
/> 
```

然后，如果您在布局中正确对齐它，它似乎与您的图像一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:16:09.047

考虑对动态内容使用 AbsoluteLayout 或 RelativeLayout。或者，您可以通过 Canvas 类将文本绘制到位图，然后简单地绘制位图。

```
Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_888);
Canvas c = new Canvas(bitmap);
c.drawText("Text", 0.0f, 0.0f, null); //Probably paint cannot be null 
```

如果您的内容是静态的，那么您可能应该只应用 Perera 的方法。

[相对布局 - Android.com 参考](http://developer.android.com/reference/android/widget/RelativeLayout.html)

[AbsoluteLayout - Android.com 参考](http://developer.android.com/reference/android/widget/AbsoluteLayout.html)

# c++ - 我应该对 Valgrind 和小内存泄漏（假设 < 100 字节）有多严重？

> ID：11534459
> 
> 赞同：0
> 
> 时间：2012-07-18T04:48:16.010
> 
> 标签：c++, memory-management, memory-leaks, valgrind

如果我在函数的循环中初始化一个临时变量（比如一个 char *，而不是“new”），那么我是否需要显式释放它，或者当它超出范围时是否会处理它？后者是我被教导的......当我通过 Valgrind 运行我的代码时，我得到“15 个字节肯定丢失”，但它们似乎位于与上述类似的区域......超出范围的临时变量。这些不是用“新”分配的东西...... Valgrind 是否根据代码的外观获得一些数字，或者它实际上是否在捕获孤立的内存？当使用 Valgrind 时，大多数人是否希望看到一些小数字丢失或者是 0 字节丢失了游戏名称？多谢你们。

```
==7669== 15 bytes in 1 blocks are definitely lost in loss record 1 of 1                    │        std::cout << "    ...printing newly initia
==7669==    at 0x402B454: operator new[](unsigned int) (in /usr/lib/valgrind/vgpreload_memc│lized customer..." << std::endl;                  
heck-x86-linux.so)                                                                         │        if (true)                                 
==7669==    by 0x8049C4B: Customer::copyString(char const*&, char*&) (customer.cpp:539)    │        {                                         
==7669==    by 0x804992A: Customer::getName(char*&) (customer.cpp:379)                     │                const char * name = "bunches, oate
==7669==    by 0x8048C2D: main (main.cpp:78)                                               │s";                                               
==7669==                                                                                   │                Customer cus5(name);              
==7669== LEAK SUMMARY:                                                                     │                cus4 = cus5;                      
==7669==    definitely lost: 15 bytes in 1 blocks                                          │        }                                         
==7669==    indirectly lost: 0 bytes in 0 blocks                                           │                                                  
==7669==      possibly lost: 0 bytes in 0 blocks                                           │        cus4.displayData();                       
==7669==    still reachable: 0 bytes in 0 blocks                                           │        std::cout << std::endl;                   
==7669==         suppressed: 0 bytes in 0 blocks 
```

“copyString()”方法和“getName()”方法都只有临时变量……其他所有东西都被释放了……“main.cpp”有一些我没有释放的内存，但因为它是我的测试工具在这一点上，我不太担心清理它。如果 Valgrind 列出了某些内容（例如 3 行：copyString、getName 和 main），这是否意味着它们肯定会丢失内存，或者只是它们可能会丢失内存？

这是“getName()”函数：

```
int Customer::getName(char *& toReturn)
{
        if (name)
        {
                const char * nameCopy = name; //casting
                delete toReturn;
                copyString(nameCopy, toReturn);
                delete nameCopy;
                return 1;
        }
        else
        {
                toReturn = NULL;
                return 0;
        }
} 
```

这是 copyString() 函数：

```
int Customer::copyString(const char *& toCopy, char *& set)
{
        //prevent strlen or strcpy from being called on NULL
        if (!toCopy)
                return -1;

        //copy data into new char * and set "set"
        int length = strlen(toCopy) + 1;
        char * new_name = new char[length];
        strcpy(new_name, toCopy);

        delete set; //delete anything pointed to by this
        set = new_name;
        return 1;
} 
```

另外我应该补充一点，为了避免问题，我正在使用 cstring 库，因为它是我正在学习的课程的要求。在这一点上，我通过分析我的代码来超越自我……只是想尽可能多地学习……谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:12:27.673

常量字符串`const char * name = "bunches, oates";`被传递给`delete`in `Customer::getName(char* &toReturn)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:13:58.733

首先，您应该尝试修复内存泄漏，除非您确定您的应用程序不会长时间运行并且它们不会引起很多问题。但是，不要以此为理由不修复它们。一旦您的应用程序变得更大，它们可能会导致很多问题。

其次，我注意到您使用了 C++ 和 C 风格的字符串。最好使用 stl::string，因为它们已经管理了内存，而使用 char* 字符串，您需要自己完成所有操作，而且很容易出错。

# java - 如何在没有鼠标实际在 Java 中移动的情况下测量鼠标速度？

> ID：11534466
> 
> 赞同：0
> 
> 时间：2012-07-18T04:49:29.140
> 
> 标签：java, mouse

在 Java 中，如何测量鼠标移动的速度但禁用实际的光标移动。例如，当有人在桌子上滑动鼠标时，我想测量他/她在没有实际移动光标的情况下滑动鼠标的速度。

我已经尝试通过将鼠标位置重置为特定坐标（机器人类）来做到这一点，但是当我快速滑动时鼠标能够逃脱。

如果这在 Java 中是不可能的，那么 C# 或 C++ 解决方案就可以了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:54:37.093

这取决于操作系统，但对于 Windows，您可以尝试使用 Input Hooks。我以前不得不使用它并且它有效。该解决方案有点复杂，因为您必须编写一个提供函数地址的 dll，您可以将其插入到 Windows 中的输入挂钩链中。这基本上是 autohotkey 所做的，但它们提供了一个非常好的脚本界面，并且它们代表您完成了设置各种 dll 和 Win32 调用的所有繁重工作。如果您对输入钩子感到好奇：[钩子概述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:16:19.313

如果你真的想阻止鼠标移动事件，你需要做得更低——在输入过滤器层的 c/c++ 中。这里有一个问题可以为您指明正确的方向：[Blocking mouse input from a service in Vista](https://stackoverflow.com/questions/651708/blocking-mouse-input-from-a-service-in-vista)

可能可以使用 autohotkey （它为你做了很多细节的事情）

# php - Codeigniter Datamapper 自动创建更新字段

> ID：11534481
> 
> 赞同：1
> 
> 时间：2012-07-18T04:51:30.870
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-datamapper

似乎这应该是容易的部分，但我似乎无法做到这一点。我的`created`和`updated`字段没有被填充。我尝试将这些字段重命名为不同的名称，但不行。除了如下所示的架构和设置类（非常基本）之外，我是否遗漏了什么？

Codeigniter v2.1.2 Datamapper ORM v1.8.2.1

架构：

```
CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `created` datetime NOT NULL,
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=latin1 
```

用户等级：

```
<?php

class User extends DataMapper
{

    function User()
    {
        parent::DataMapper();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:06:05.370

好的，找到了答案，希望这会对某人有所帮助。我需要在 application/config/datamapper.php 文件中设置以下内容：

```
$config['local_time'] = TRUE;
$config['unix_timestamp'] = FALSE;
$config['timestamp_format'] = 'Y-m-d H:i:s'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:45:45.097

在您的 config/datamapper.php 文件中，确保设置“created_field”和“updated_field”以匹配您的数据库列。或者您可以在模型本身中覆盖它们。IE。

```
<?php

class User extends DataMapper
{
    var $created_field = 'created';
    var $updated_field = 'updated';

    function User()
    {
        parent::DataMapper();
    }

} 
```

# android - 如何创建持久警报以通知用户事件？

> ID：11534486
> 
> 赞同：3
> 
> 时间：2012-07-18T04:52:19.153
> 
> 标签：android, alarm

我目前有一个`AlarmManager`with`BroadcastReceiver`实现作为我的警报。但是，这有一个主要缺陷；强制关闭应用程序时它不会熄灭。我测试了 ICS 日历应用程序会发生什么，即使我强制关闭它也会消失。我知道有些人会说“如果用户以这种方式关闭应用程序，他们不希望它关闭。” 任务杀手呢？这就是我正在寻找的情况。很明显我的方法无法做到这一点，我已经看了又看，但大多数（如果不是全部）示例都与我实现它的方式相似。有什么想法可以做到这一点吗？

**编辑**：所以我所做的所有研究似乎都表明，如果不让用户安装两个单独的应用程序，我想做的事情是不可能的，这并不理想。谷歌有可能只是以这种方式制作了日历应用程序（因为他们确实编写了源代码），因为我测试了市场上的顶级日历应用程序，并且当用户强制关闭应用程序时它们都没有关闭。所以这引出了一个问题，简单地说，这甚至可以在单个应用程序中完成吗？由于谷歌试图阻止开发人员不允许用户控制随机运行的广播或服务，这看起来很渺茫，这是可以理解的。希望这可以帮助其他人快速意识到实际上并没有真正的方法可以做到这一点。您所能做的就是警告用户，以这种方式关闭您的应用程序，他们不会收到警报；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:28:56.133

我不会在您的警报中使用广播接收器

广播接收器通常提供两个功能

1) 收听系统广播

2) 允许您自己以外的应用向您的应用发出请求。

警报管理器设置新警报： set(int type, long triggerAtMillis, PendingIntent operation) 安排警报。（来自[Android 文档](http://developer.android.com/reference/android/app/AlarmManager.html)）

放置在那里的 Pending Intent 是警报启动时将触发的 Intent。您可以通过将服务置于意图中来让此意图开始服务。前任：

```
Intent i = new Intent(context, MyService.class) 
```

其中 MyService 是一个扩展 Service 的类。（你可以很容易地做一个活动，但是让活动突然出现是糟糕的设计。

[Service](http://developer.android.com/reference/android/app/Service.html)就像没有 UI 的 Activity 。基本上，您可以让它执行一些后台功能，并可能向用户发布发生某事的通知。

# c# - LINQ 的 WHERE 子句，其中 COLUMN 可能为空

> ID：11534488
> 
> 赞同：0
> 
> 时间：2012-07-18T04:52:42.240
> 
> 标签：c#, mysql, winforms, linq, entity-framework

我在使用 LINQ 制作 WHERE 子句时遇到问题。我试图用谷歌搜索它，但如果外部变量是可空整数的类型，我只能得到答案......好吧，我已经反过来尝试了这些方法（我有 0...1 关系在我的数据集中）：例如

```
int oldId = oldQuestion.id;
IEnumerable<possible_answer> possibleAnswersQuery =
            from x in Mentor11Entities.possible_answers
            where object.Equals(x.question_id, oldId)
            select x;
List<possible_answer> possibleAnswers = 
            possibleAnswersQuery.ToList<possible_answer>(); 
```

或者

```
int oldId = oldQuestion.id;
IEnumerable<possible_answer> possibleAnswersQuery =
            from x in Mentor11Entities.possible_answers
            where Convert.ToInt32(x.question_id ?? 0).Equals(oldId)
            select x;
List<possible_answer> possibleAnswers = 
            possibleAnswersQuery.ToList<possible_answer>(); 
```

但我总是收到LINQ不支持某些功能的错误......有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:54:19.017

只需使用

```
where x.question_id != null && x.question_id == oldId 
```

所以你的查询应该是：

```
IEnumerable<possible_answer> possibleAnswersQuery =
            from x in Mentor11Entities.possible_answers
            where x.question_id != null && x.question_id == oldId
            select x; 
```

# c++ - c++中的替换密码

> ID：11534494
> 
> 赞同：0
> 
> 时间：2012-07-18T04:54:06.280
> 
> 标签：c++, random

我已经生成了一个随机文本文件

```
A B C D E F G H

T W G X Z R L N 
```

我想对我的消息进行编码，以便 A = T 、 B = W 、 C = G 等等..

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int
main ()
{
  string getmsg;

  ifstream openfile ("random.txt");

  if (openfile.is_open ()) {

    while (! openfile.eof ()) {
      getline (openfile,getmsg); //read from random.txt
      cout << getmsg << endl;
    }

  }
} 
```

我很卡在这里。

例如。当我输入单词“HAD”时，它将显示“NTX”，通过使用相同的随机文本文件，我可以输入“NTX”并返回“HAD”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:16:28.593

虽然其他人指出了 Map，但我会使用一个`subs`大小为 26 的简单数组 ( )（如果只有大写字母）。

用 0 初始化数组。阅读所有字符及其映射。像这样存储它`subs[char-'A'] = mapped_char`。我会把阅读留给你。

**编辑**-
如果您准备为额外的内存使用付费，只需将大小`subs`设为**123**（ASCII 表示`z`+ 1）。

这也将简化逻辑`subs[char] = mapped_char`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T04:57:25.473

由于这感觉像是家庭作业，我会给你指导而不是解决方案。

您想在输入字符和要输出的相应字符之间创建一个[双射映射。](http://en.wikipedia.org/wiki/Bijection)

一种可靠的方法是使用[Map](http://en.cppreference.com/w/cpp/container/map)。创建一个以输入字符（例如“A”）为键、以输出字符（例如“T”）为值的映射。

对于从文件中读入的每个字符，使用 Map 来查找相应的输出字符。

您将需要一次读取一个字符（最简单），或一次读取一行（就像您现在所做的那样）并逐个字符地遍历每一行，以使用 Map 进行翻译。

**更新**

为了澄清评论中的一点，这是一个双射函数，因为每个原始字符都有一个编码字符。如果不需要对文本进行解码，则 Map 将用于功能的软件表示。如果需要解码，Bimap 更合适。

![内射函数](../Images/9d9a44496bb853f8cd518de1640d6d40.png)

*内射函数*

![双射函数](../Images/f38f32bb07bfb7b4e313209204e1e331.png)

*双射函数*

[http://en.wikipedia.org/wiki/Injective_function](http://en.wikipedia.org/wiki/Injective_function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:09:37.783

一种方法是如果你

看看`std::map<>` （`map<char,char>`在你的情况下）

使用它，您可以设置字符对映射，然后当您从文件/缓冲区中读取一个字符时，您在映射中查找它并检索相应的字符。

另一种更详细的方法是使用 switch 语句

```
char ch; 
ch << openfile
switch(ch)
{
   case 'A': ch = 'T'; break;
...
}
cout << ch; 
```

还有其他方法，看看你是否能找到更多涉及数组的方法。

# javascript - 无法在 jqGrid 中加载 JSON 数据

> ID：11534495
> 
> 赞同：0
> 
> 时间：2012-07-18T04:54:10.210
> 
> 标签：javascript, jquery, ajax, json, jqgrid

我的[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=start)定义是

```
.
.
.
datatype: 'json', //We specify that the datatype we will be using 
url:'<%=request.getContextPath()%>/servlet/AjaxManager?mode=9999&beginindex=0&totallimit=10&colname=policyname&sorttype=asc', // that will return the data
colNames:['Policy Name','Policy Type', 'Time allowed (HH:mm)','Expiration Duration (days)','Session Pulse(minutes)','Description'],  //Column Names
colModel :[ 
    {name:'policyname', index:'policyname', editable:true,sorttype:'text',width:150,editoptions:{size:30,maxlength:50}, frozen : true,editrules:{required:true},formatter:'showlink',formatoptions:{baseLinkUrl:'javascript:' , showAction: "GetAndShowUserData(jQuery('#list2'),'",addParam: "');"}},
    {name:'policytype', index:'policytype', sorttype:'text',editable:true,edittype:"select",editrules: {edithidden:true},editoptions:{value:"POST:Postpaid;PRE:Prepaid"}},
    {name:'allotedminutes', index:'allotedminutes',resizable:false, sorttype:'text',editable:true,width:200, align:"right",editoptions:{size:10}},
    {name:'expiredays', index:'expiredays',  sorttype:'text',editable:true,width:200, align:"right",editrules:{integer: true},editoptions:{size:5, maxlength:4}},       
    {name:'sessionpulse', index:'sessionpulse',sorttype:'int',editable:true,width:200, align:"right"},      
    {name:'policydescription', index:'policydescription', sortable:false,editable:true,sorttype:"date"}],
.
.
.
jsonReader : {
                    root: "ROWS",               //our data
                    page: "CURRENTPAGE",        //current page
                    total: "TOTAL",             //total pages
                    repeatitems: true,
                    id: "id",
                    cell: "cell",
                    userdata:"USERDATA", //Userdata we will pass back for feedback
                    records: "TOTALRECORDS"     //total records
                },

.
.
. 
```

我的 JSON 值是

```
 {"TOTAL":1,"CURRENTPAGE":1,"TOTALRECORDS":1,"ROWS":[{"id":1,"cell":["Unlimited Policy","Absolute","Unlimited","Unlimited",1,"2007-12-03"]},{"id":2,"cell":["1 Month Unlimited policy","Absolute","Unlimited",30,1,"2007-12-03"]},{"id":3,"cell":["100 Hours policy","Absolute","100:00","Unlimited",1,"2007-12-03"]}]} 
```

但我无法将该 JSON 数据加载到 jqGrid 中。这里 jqGrid 显示网格中的所有记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:29:41.887

您如何从[演示](http://www.ok-soft-gmbh.com/jqGrid/BhavikAmbani.htm)中看到`jsonReader`您使用的与返回服务器的数据相对应。

我想您应该检查`Content-Type`服务器响应的标头。应该是`application/json`。我建议您另外插入`loadError`回调以查看*哪个错误*是空网格的原因。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/6969114/315935)。

# sql-server - 插入 SQL Server 视图时使用@@identity 或输出？

> ID：11534500
> 
> 赞同：2
> 
> 时间：2012-07-18T04:54:57.900
> 
> 标签：sql-server, view, identity, seed

（请原谅我 - 我对 StackOverflow 和 SQL 都是新手） Tl;dr - 使用`@@identity`（或任何其他选项，如 scope_identity 或输出变量）时，是否也可以使用视图？下面是一个使用存储过程的示例`@@identity`：

```
--SNIP--
DECLARE @AID INT
DECLARE @BID INT

INSERT INTO dbo.A (oct1)
VALUES
(@oct1)

SELECT @AID = @@IDENTITY;

INSERT INTO dbo.B (duo1)
VALUES
(@duo2)

SELECT @BID = @@IDENTITY

INSERT INTO dbo.tblAB (AID, BID)
VALUES
(@AID, @BID)
GO 
```

更长：

插入表时，您可以使用 捕获标识种子的当前值`@@identity`。如果您想插入表 A 和 B，捕获标识值，然后插入与 A 和 B 相关的表 AB，这很有用。显然，这是出于数据规范化的目的。

假设您要使用一些对表执行内部连接以使数据更易于使用的数据库模式进行抽象。在这种情况下，您将如何正确填充交叉引用表？是否可以以相同的方式完成，如果可以，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T05:56:07.817

如果您的系统正在使用并行计划，请避免使用 @@IDENTITY 或 SCOPE_IDENTITY()，因为存在严重的错误。请参考 - [http://connect.microsoft.com/SQL/feedback/ViewFeedback.aspx?FeedbackID=328811](http://connect.microsoft.com/SQL/feedback/ViewFeedback.aspx?FeedbackID=328811)

获取插入的身份 ID 的更好方法是使用 OUTPUT 子句。

```
CREATE TABLE tblTest
(         
    Sno         INT IDENTITY(1,1) NOT NULL,         
    FirstName   VARCHAR(20) 
)  

DECLARE @pk TABLE (ID INT)  

INSERT INTO tblTest(FirstName) 
OUTPUT INSERTED.Sno INTO @pk
SELECT 'sample' 

SELECT * FROM @pk 
```

**编辑：**

它也适用于视图。请参阅下面的示例。希望这就是你要找的。

```
CREATE VIEW v1
AS
SELECT sno, firstname FROM tbltest
GO

DECLARE @pk TABLE (ID INT)  

INSERT INTO v1(FirstName) 
OUTPUT INSERTED.Sno INTO @pk
SELECT 'sample' 

SELECT ID FROM @pk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:58:39.390

@@IDENTITY 返回在连接上生成的最后一个 IDENTITY 值，与生成该值的表无关，也与生成该值的语句的范围无关。

SCOPE_IDENTITY() 返回连接上和同一范围内的语句生成的最后一个 IDENTITY 值，而不管生成该值的表是什么。SCOPE_IDENTITY() 和@@IDENTITY 一样，将返回当前会话中创建的最后一个身份值，但它也会将其限制在您当前的范围内

虽然其中任何一个问题都已由 microsoft 解决，但我建议您应该使用“OUTPUT”，是的，它也可以与视图一起使用

# jquery - jquery ui对话框总是返回false

> ID：11534506
> 
> 赞同：0
> 
> 时间：2012-07-18T04:56:00.313
> 
> 标签：jquery

当您在输入中输入文本时，对话框打开。只有在没有找到值时才应该打开：fiddle = [http://jsfiddle.net/tzxS2/](http://jsfiddle.net/tzxS2/)

code/css/js: 似乎不能以某种形式工作：

```
 <form id="dacform" method='get' action='dac' onsubmit="return check_domain_input()" accept-charset='utf-8'>
    <input name='domain' type="text" style="font-size:15px;" class="searchbox"/>
    <select style="background:#f8f8f8; margin-left:4px; font-size:15px;" class="selectlist slight" id="selectdomain" name="tld">
      <option value=''>( all )</option>
      <option value="co.uk">co.uk</option>
      <option value="me.uk">me.uk</option>
      <option value="org.uk">org.uk</option>
      <option value="com">com</option>
    </select>
    <input onclick="check_domain_input()" class="btn grey bbig" name="search" type="submit" value="Search" style="width:59px; margin-left:7px; font-size:15px;" />
    </form><br />
    Our domain registration system is highly automated so we register your domain names fast and secure.

    <div id="dialog" title="Attention!" style="display:none">
    Please enter a domain name to search for.
    </div>
<div onclick="check_domain_input()">Click</div>

<div id="dialog" title="Attention!" style="display:none">
    Please enter a domain name to search for.
</div>

<script>
    function check_domain_input()
    {        
        $( "#dialog" ).dialog(); // Shows the new alert box.

        var domain_val = document.getElementsByName('domain');

        if (domain_val[0].value.length > 0)
        {
            return true;
        }

        $( "#dialog" ).dialog();

        return false;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:01:29.870

在我看来，您总是用函数主体的第一行打开对话框：

```
 $( "#dialog" ).dialog(); // Shows the new alert box. 
```

无论输入的值如何。

尝试删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:25:28.573

根据您的情况，您不应在代码中两次调用 ui-dialog。

尝试这个..

```
<script>
function check_domain_input()
{        
var domain_val = document.getElementsByName('domain');

if (domain_val[0].value.length > 0)
  {
    return true;
  }

else
  {
    $( "#dialog" ).dialog();
    return false;
  }
}
</script> 
```

# c# - Windows Phone C# 中的 XML 反序列化

> ID：11534510
> 
> 赞同：2
> 
> 时间：2012-07-18T04:57:16.770
> 
> 标签：c#, windows-phone-7, xml-serialization

我正在为新闻门户开发 WP 应用程序，我需要解析各种提要。标准提要如下所示：

```
<feed>
    <items>
        <item>
            ...
        </item>
        <item>
            ...
        </item>
    </items>
</feed> 
```

我使用这段代码来反序列化它：

```
XDocument document = XDocument.Load(xmlStream);
XmlSerializer serializer = new XmlSerializer(typeof(News));
News MainPage = (News)serializer.Deserialize(document.CreateReader());
Dispatcher.BeginInvoke(() => MainPageListBox.ItemsSource = MainPage.DataSet;); 
```

新闻类如下所示：

```
[XmlRoot("feed")]
public class News
{
    [XmlArray("items")]
    [XmlArrayItem("item")]
    public ObservableCollection<NewsItem> DataSet{ get; set; }
} 
```

这在具有这种结构的每个提要中都可以正常工作`<items>`。但我也有多个部分的提要，例如：

```
<feed>
    <items section="part 1">
        <item>
            ...
        </item>
        <item>
            ...
        </item>
    </items>
    <items section="part 2">
        <item>
            ...
        </item>
        <item>
            ...
        </item>
    </items>
</feed> 
```

如果我使用上面的 C# 代码，则只`<items>`解析第一部分，忽略其他部分。我需要为`<items>`单个 XML 提要中的每个部分创建单独的 List 或 ObservableCollection。

谁能帮我这个？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:53:20.103

课程：

```
[XmlRoot("feed")]
    public class News
    {
        [XmlArray("items")]
        public List<NewsItemCollection> DataSet { get; set; }

        public News()
        {
            DataSet = new List<NewsItemCollection>();
        }
    }

    public class NewsItemCollection
    {
        [XmlAttribute("section")]
        public string Section { get; set; }

        [XmlElement("item")]
        public ObservableCollection<NewsItem> Items { get; set; }

        public NewsItemCollection()
        {
            Items = new ObservableCollection<NewsItem>();
        }
    }

    public class NewsItem
    {
        public string Title { get; set; }
    } 
```

我的一些用于序列化/反序列化 xml 的辅助类：

```
public static class ObjectExtensions
    {
        /// <summary>
        /// <para>Serializes the specified System.Object and writes the XML document</para>
        /// <para>to the specified file.</para>
        /// </summary>
        /// <typeparam name="T">This item's type</typeparam>
        /// <param name="item">This item</param>
        /// <param name="fileName">The file to which you want to write.</param>
        /// <returns>true if successful, otherwise false.</returns>
        public static bool XmlSerialize<T>(this T item, string fileName)
        {
            return item.XmlSerialize(fileName, true);
        }

        /// <summary>
        /// <para>Serializes the specified System.Object and writes the XML document</para>
        /// <para>to the specified file.</para>
        /// </summary>
        /// <typeparam name="T">This item's type</typeparam>
        /// <param name="item">This item</param>
        /// <param name="fileName">The file to which you want to write.</param>
        /// <param name="removeNamespaces">
        ///     <para>Specify whether to remove xml namespaces.</para>para>
        ///     <para>If your object has any XmlInclude attributes, then set this to false</para>
        /// </param>
        /// <returns>true if successful, otherwise false.</returns>
        public static bool XmlSerialize<T>(this T item, string fileName, bool removeNamespaces)
        {
            object locker = new object();

            XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();
            xmlns.Add(string.Empty, string.Empty);

            XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;
            settings.OmitXmlDeclaration = true;

            lock (locker)
            {
                using (XmlWriter writer = XmlWriter.Create(fileName, settings))
                {
                    if (removeNamespaces)
                    {
                        xmlSerializer.Serialize(writer, item, xmlns);
                    }
                    else { xmlSerializer.Serialize(writer, item); }

                    writer.Close();
                }
            }

            return true;
        }

        /// <summary>
        /// Serializes the specified System.Object and returns the serialized XML
        /// </summary>
        /// <typeparam name="T">This item's type</typeparam>
        /// <param name="item">This item</param>
        /// <returns>Serialized XML for specified System.Object</returns>
        public static string XmlSerialize<T>(this T item)
        {
            return item.XmlSerialize(true);
        }

        /// <summary>
        /// Serializes the specified System.Object and returns the serialized XML
        /// </summary>
        /// <typeparam name="T">This item's type</typeparam>
        /// <param name="item">This item</param>
        /// <param name="removeNamespaces">
        ///     <para>Specify whether to remove xml namespaces.</para>para>
        ///     <para>If your object has any XmlInclude attributes, then set this to false</para>
        /// </param>
        /// <returns>Serialized XML for specified System.Object</returns>
        public static string XmlSerialize<T>(this T item, bool removeNamespaces)
        {
            object locker = new object();

            XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();
            xmlns.Add(string.Empty, string.Empty);

            XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;
            settings.OmitXmlDeclaration = true;

            lock (locker)
            {
                StringBuilder stringBuilder = new StringBuilder();
                using (StringWriter stringWriter = new StringWriter(stringBuilder))
                {
                    using (XmlWriter xmlWriter = XmlWriter.Create(stringWriter, settings))
                    {
                        if (removeNamespaces)
                        {
                            xmlSerializer.Serialize(xmlWriter, item, xmlns);
                        }
                        else { xmlSerializer.Serialize(xmlWriter, item); }

                        return stringBuilder.ToString();
                    }
                }
            }
        }
    }

public static class StringExtensions
    {
        /// <summary>
        /// Deserializes the XML data contained by the specified System.String
        /// </summary>
        /// <typeparam name="T">The type of System.Object to be deserialized</typeparam>
        /// <param name="s">The System.String containing XML data</param>
        /// <returns>The System.Object being deserialized.</returns>
        public static T XmlDeserialize<T>(this string s)
        {
            var locker = new object();
            var stringReader = new StringReader(s);
            var reader = new XmlTextReader(stringReader);
            try
            {
                var xmlSerializer = new XmlSerializer(typeof(T));
                lock (locker)
                {
                    var item = (T)xmlSerializer.Deserialize(reader);
                    reader.Close();
                    return item;
                }
            }
            catch
            {
                return default(T);
            }
            finally
            {
                reader.Close();
            }
        }
    } 
```

测试运行：

```
News news = new News();
            news.DataSet.Add(new NewsItemCollection
            {
                Section = "Section1",
                Items = new ObservableCollection<NewsItem>
                    {
                        new NewsItem { Title = "Test1.1" },
                        new NewsItem { Title = "Test1.2" }
                    }
            });
            news.DataSet.Add(new NewsItemCollection
            {
                Section = "Section2",
                Items = new ObservableCollection<NewsItem>
                    {
                        new NewsItem { Title = "Test2.1" },
                        new NewsItem { Title = "Test2.2" }
                    }
            });

            var serialized = news.XmlSerialize();
            var deserialized = serialized.XmlDeserialize<News>(); 
```

玩得开心！

# php - 我可以在我的页面上显示一个数字，然后让它每 z 秒增加 x 吗

> ID：11534515
> 
> 赞同：1
> 
> 时间：2012-07-18T04:57:47.407
> 
> 标签：php, javascript, html

拿这个号码`"#1"` 把它变成一个`"#2"`in`5 seconds` 然后变成一个`"#3"`in`5 seconds`

这可能吗，或者我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:06:17.507

因为 PHP 在服务器上执行并且只将结果输出发送到浏览器，所以我们不能只使用 PHP 来更新它。

最简单的方法是使用 JavaScript 的[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)方法。

```
function update() {
  var counter = document.getElementById("counter");
  counter.innerText = counter.innerText*1 + 1;
  setTimeout(update, 1000);
} 

<body onload="update()">
  <div id="counter">0</div>
</body> 
```

update 函数在 body 的负载上调用一次，然后在 1000 毫秒后调用自身以生成 1 秒计数器。注意：我必须将字符串乘以`innerText`1 才能将字符串转换为数字，这样它将添加而不是连接。

另一种方法是使用更新的查询字符串参数刷新页面，尽管我不知道您为什么要这样做（但它使用 PHP..lol）。

```
<?PHP
$newcount = 0;
if(isset($_GET['count'])) {
    $newcount = $_GET['count'] + 1;
    echo $newcount;
}

echo "<meta http-equiv='refresh' content=\"1;URL='a.php?count={$newcount}'\">";
?> 
```

在这里，我获取计数器的当前值并使用 PHP 加 1，然后回显一个[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)标记，以在 1 秒后使用查询字符串中更新的计数值刷新页面。下次页面加载时，它会读取该值，添加一个值，使用新值刷新等。这只是向您展示另一种方式，我**不**建议在您的应用程序中这样做！

# php - 在菜单上返回 false 后右键单击上下文菜单不正确显示

> ID：11534516
> 
> 赞同：0
> 
> 时间：2012-07-18T04:57:50.757
> 
> 标签：php, jquery, contextmenu, right-click

第一次发帖，但一直使用这个网站作为例子。我的小问题是这个（我已经研究过了，但找不到我的问题的解决方案）......

我有一个包含 50 多个名称的文本列表，并且每天有一个项目（因此是一个 50+ x 7 的矩阵），我希望能够在其中右键单击每日文本（每天一个 div），并显示一个菜单每天与该项目特别相关。但是，这没什么大不了的，因为我需要单独识别每个项目并使用 JS 的 DivID 来调用另一个函数，这变得很重要。我查看了其他 jquery 菜单选项，但无法弄清楚如何正确动态检索名称。

我遇到的问题不是创建菜单并捕获项目 ID，而是在右键单击后阻止 ContextMenu 出现。

我希望页面在其他地方有右键菜单，但不是在这些 DIV 元素上，我正在创建的只是菜单。

以下代码已被简化...

这是我正在使用的 JS：

```
function go(e,idname) 
    {
     var rightclick;
     e = e || window.event;
     if (e.which) rightclick = (e.which == 3);
     else if (e.button) rightclick = (e.button == 2);       
     var a = idname.id;
     a = (a.substring(11));  

     ShowContent('ToggleValueFloat');   // Display the DIV      

     $(document).ready(function() 
         {
          $('#ToggleValueFloat').html('MY MENU TEXT' + <a href="Javascript:ToggleDay(' + a + ');">EXAMPLE</a>);         
          return false;
         }); 

    return false; 
    }

function ShowContent(d) {
    if(d.length < 1) { return; }
    var dd = document.getElementById(d);
    AssignPosition(dd);
    dd.style.display = "block";
} 
```

这是我用于示例的 PHP：

```
echo  '<a id="togglePopup' . (int)$arrayEId[$allEntries] . '" onmousedown="go(event,this); return false;">example</a>'; 
```

这是我用来显示的 DIV。

```
<div id="ToggleValueFloat" style="display:none;  position:absolute;  border-style: solid;  background-color: white;  padding: 5px;"></div> 
```

我试图让它每次都返回 false，这样上下文菜单就不会显示，但它不起作用。我可以在页面上完全禁用右键单击，但这将证明比以往任何时候都没有效率。

任何想法/帮助都会很棒！我对选择持开放态度。谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:03:07.450

对于初学者来说，这是一个问题：

```
 if (!e) var e = window.event; 
```

其中，由于所有变量声明都被提升，因此与此相同：

```
 var e;
 if (!e) e = window.event; 
```

你有一个名为的参数`e`，现在你正在创建一个同名的局部变量，它将覆盖它。`e`如果参数未定义，您应该用此替换该行以重新分配参数：

```
e = e || window.event; 
```

至于您的定位问题，为什么不只查看鼠标所针对的对象并确定（在显示菜单之前）目标对象是否是您想要在其上显示菜单的对象然后仅在单击所需目标时才调用显示菜单的代码。

# java - Java数组：尝试交换元素期间终端ASCII终端游戏中的二维数组功能障碍

> ID：11534522
> 
> 赞同：0
> 
> 时间：2012-07-18T04:58:20.913
> 
> 标签：java, terminal, char, ascii, multidimensional-array

出于某种奇怪的原因，当我尝试在游戏中移动我的角色时，交换“移动”的数组将不起作用，当我尝试为游戏中的前两个移动打印角色的当前位置时，没有任何显示。只是总体上表现得很奇怪。有人可以向我解释我做错了什么，或者至少我怎样才能做得更好？谢谢。

代码：

```
import java.util.Scanner;
import java.io.File;
import java.io.FileNotFoundException;

public class Adventure {
    private Scanner in_file;
    private int x_size, y_size, px, py, dx, dy;
    private char[][] level;
    private boolean game;
    public Adventure() {
        x_size = y_size = 20;
        level = new char[x_size][y_size];
        px = py = 1;
        dx = dy = 0;
        game = true;
    }
    public static void main(String []args) {
        Adventure adv = new Adventure();
        adv.load_game();
        adv.main_game();
        System.out.println("ADVENTURE");
    }
    public void load_game() {
        try {
            in_file = new Scanner(new File("level.txt"));
        } catch (FileNotFoundException e) {
            System.err.println("ERROR: Level could not be loaded!");
            System.exit(1);
        }
        for (int i = 0; i < level.length; i++ ) {
            for (int j = 0; j < level[i].length; j++) {
                if (in_file.hasNextInt()) {
                    int nextInt = in_file.nextInt();
                    if (nextInt == 0) 
                        level[i][j] = '-';
                    else if (nextInt == 1)
                        level[i][j] = '#';
                }
            }
        }
        in_file.close();
    }
    public void new_game() { 

    }
    public void main_game() {
        Scanner key = new Scanner(System.in);
        Adventure adv_move = new Adventure();
        level[px][py] = 'Q';
        while (game) {
            for (int i = 0; i < level.length; i++) {
                for (int j = 0; j < level[i].length; j++) {
                    System.out.print(level[i][j]);
                }
                System.out.println();
            }
            System.out.println();
            System.out.print("Enter a letter choice to move ->");
            String temp = key.nextLine();
            if (temp.equals("w")) {
                dx = -1;
                dy = 0;
            }
            else if (temp.equals("a")) {
                dy = -1;
                dx = 0;
            }
            else if (temp.equals("s")) {
                dx = 1;
                dy = 0;
            }
            else if (temp.equals("d")) {
                dy = 1; 
                dx = 0;
            }
            else
                dx = dy = 0;
            System.out.println();
            adv_move.move_check();
        }
    }
    public void move_check() { //DYSFUNCTIONAL ARRAY!!!!
        System.out.println(level[px][py]);
    //  System.out.println(level[px+dx][py+dy]);
        if (level[px+dx][py+dy] != '#') {
            level[px][py] = '-';
            px += dx;
            py += dy;
            level[px][py] = 'Q';
        }   
        else 
            System.out.print("Move invalid.\n");
    }
    public void save_game() {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:00:38.810

您遇到的问题是，在该`main_game()`方法中，您正在创建一个新`Adventure`对象并调用`move_check()`它，该对象没有任何关卡数据，您将其加载`adv`到`main()`. 因此它总是引用一个空的 char 数组并给你意想不到的结果。

删除新的对象声明并调用`move_check()`它自己应该会让你回到正轨。

# c# - 将 vb.Net 项目转换为 C# .Net 项目

> ID：11534523
> 
> 赞同：0
> 
> 时间：2012-07-18T04:58:41.473
> 
> 标签：c#, vb.net

我尝试将 vb.net 转换为 C#，但在编译时不断出错。我是 .NET 的新手。这是我的转换图像实用程序类的版本。实用程序

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.IO;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;
using Com.Griaule.IcaoFace;
using System.Windows.Forms;

namespace IcaoWF
{
public class Util
{

    //Set if the mouth is important

    public const bool USES_MOUTH = true;
    //The number of supported pictures

    const int SFile = 3;
    //
    public const int FEATURES_COLOR = (255 << 8);

    public const int FEATURES_SIZE = 8;
    //File Vector with spec ID

    TFile[] VTFile = new TFile[SFile + 1];
    //Pointers to the .NET classes
    public FaceImage GrFaceImage = null;
    public IcaoImage GrIcaoImage = null;
    public CbeffImage GrCbeffImage = null;

    public Cbeff GrCbeff = null;

    ListBox log;

    // raw image data type.
    public struct TRawImage
    {
        // Image data.
        public object img;
        // Image width.
        public int width;
        // Image height.
        public int height;
        //Reduction Factor because stretch
        public float frX;
        public float frY;
        //Eyes an mouth positions
        public int lx;
        public int ly;
        public int rx;
        public int ry;
        public int mx;
        public int my;
    }

    // File Enum Type
    public enum EFile
    {
        BMP = 1,
        JPEG2000 = 2,
        CBEFF = 3,
        NOTDEF = 0
    }

    //File Type
    private struct TFile
    {
        //File Extension
        public string fileExt;
        //File Type
        public EFile fileID;
    }

    //Class constructor

    public Util(ListBox ltBox)
    {
        //Adding Supportted files
        VTFile[1].fileExt = ".bmp";
        VTFile[1].fileID = EFile.BMP;
        VTFile[2].fileExt = ".jp2";
        VTFile[2].fileID = EFile.JPEG2000;
        VTFile[3].fileExt = ".cbeff";
        VTFile[3].fileID = EFile.CBEFF;

        log = ltBox;
    }

    public void WriteError(GriauleIcaoFaceException err)
    {
        WriteLog("Error: " + err.ToString());
    }

    // Write a message in box.
    public void WriteLog(string message)
    {
        log.Items.Add(message);
        log.SelectedIndex = log.Items.Count - 1;
        log.ClearSelected();
    }

    //Get the ID File Type from file path name
    public EFile GetFileType(string fileName)
    {
        EFile functionReturnValue = default(EFile);
        int i = 0;
        for (i = 0; i <= SFile; i++)
        {
            if (Strings.InStr(1, fileName, VTFile[i].fileExt) == Strings.Len(fileName) - Strings.Len(VTFile[i].fileExt) + 1)
            {
                functionReturnValue = VTFile[i].fileID;
                return functionReturnValue;
            }
        }
        functionReturnValue = EFile.NOTDEF;
        return functionReturnValue;
    }

    //Loading an Image
    public bool LoadImage(string fileName, PictureBox img)
    {

        // create face image from file        
        GrFaceImage = new FaceImage(fileName);

        // display face image
        DisplayFaceImage(img, false);

        WriteLog("Image loaded successfully.");

        return true;
    }

    //Process the raw Image to FaceImage Type and paint the points on pBox
    public bool ProcessFaceImage(PictureBox pBox)
    {

        //Set mouth to be relevant to generate the ICAO
        GrFaceImage.MouthDetectionEnabled = USES_MOUTH;

        WriteLog("Finding the eyes and mouth positions. Please, wait...");

        //Get the positions from mouth and eyes
        if (GetPositionsFromFaceImage())
        {
            WriteLog("Eyes and mouth founded. Drawing their positions on the image.");
            //Display Face Image with eyes and mouth drawn
            DisplayFaceImage(pBox, true);
            return true;
        }
        else
        {
            //Display Face Image
            DisplayFaceImage(pBox, false);
            return false;
        }
    }

    //Display the ICAO Image

    public void DisplayIcaoImg(PictureBox imgIcao)
    {
        if (GrFaceImage.LeftEye.X <= 0 | GrFaceImage.LeftEye.Y <= 0 | GrFaceImage.LeftEye.X > GrFaceImage.Width | GrFaceImage.LeftEye.Y > GrFaceImage.Height)
        {
            WriteLog("Left eye is out of bounds.");
            return;
        }

        if (GrFaceImage.RightEye.X <= 0 | GrFaceImage.RightEye.Y <= 0 | GrFaceImage.RightEye.X > GrFaceImage.Width | GrFaceImage.RightEye.Y > GrFaceImage.Height)
        {
            WriteLog("Right eye is out of bounds.");
            return;
        }

        if (GrFaceImage.Mouth.X <= 0 | GrFaceImage.Mouth.Y <= 0 | GrFaceImage.Mouth.X > GrFaceImage.Width | GrFaceImage.Mouth.Y > GrFaceImage.Height)
        {
            WriteLog("Mouth is out of bounds.");
            return;
        }

        //Get the GrIcaoImage
        try
        {
            GrIcaoImage = GrFaceImage.FullFrontalImage(imgIcao.Width, 3.0 / 4.0, IcaoImage.IcaoFullFrontalMode.FullFrontal);
        }
        catch (GriauleIcaoFaceException ex)
        {
            WriteError(ex);
            return;
        }

        //Getting the eyes positons from icao
        if (GetPositionsFromIcaoImage())
        {
            //Displaying the icao image
            DisplayIcaoImage(imgIcao);
        }

        WriteLog("ICAO image generated.");

    }

    //Display Face Image

    public void DisplayFaceImage(PictureBox pBox, bool withFeatures)
    {
        if (withFeatures)
        {
            pBox.Image = GrFaceImage.ImageWithFeatures(8, Color.Green);
        }
        else
        {
            pBox.Image = GrFaceImage.Image;
        }

        pBox.Update();

    }

    //Display Cbeff Image

    public void DisplayCbeffImage(PictureBox pBox)
    {
        pBox.Image = GrCbeffImage.Image;
        pBox.Update();

    }

    //Display Icao Image

    public void DisplayIcaoImage(PictureBox pBox)
    {
        pBox.Image = GrIcaoImage.Image;
        pBox.Update();

    }

    //Save ICAO in CBEFF file format

    public void SaveIcaoIntoCBEFFImage(string fileName)
    {
        // Create a CBEFF from Icao        

        if (GetCbeffFromIcao())
        {
            //Get the CBEFF buffer
            try
            {
                SaveBuffer(fileName, ref GrCbeff.CBEFF);
            }
            catch (GriauleIcaoFaceException ex)
            {
                WriteError(ex);
            }

        }

    }

    //Load an ICAO image from CBEFF file format
    public void LoadIcaoFromCBEFFImage(string fileName, PictureBox pBox)
    {
        //Creating the cbeff from the buffer
        try
        {
            GrCbeff = new Cbeff(LoadBuffer(fileName));
            GrCbeffImage = GrCbeff.Image(0);
        }
        catch (GriauleIcaoFaceException ex)
        {
            WriteError(ex);
        }

        // Display icao image        
        DisplayCbeffImage(pBox);

    }

    //Save ICAO image in JPEG2000 file format
    public void SaveIcaoIntoJP2Image(string fileName)
    {
        // Create a CBEFF from Icao
        if (!GetCbeffFromIcao())
        {
            return;
        }

        //Get Jpeg2000 buffer from CBEFF and save it in a file        
        SaveBuffer(fileName, ref GrCbeffImage.BufferJPEG);
    }

    //Save Byte Buffer into a file
    private void SaveBuffer(string fileName, ref byte[] buffer)
    {
        System.IO.FileStream oFileStream = new FileStream(fileName, FileMode.Create, FileAccess.Write);
        System.IO.BinaryWriter swb = new System.IO.BinaryWriter(oFileStream);
        swb.Write(buffer);
        swb.Close();
    }

    //Load stream from file
    private byte[] LoadBuffer(string fileName)
    {
        // Open a file that is to be loaded into a byte array
        FileInfo oFile = null;
        oFile = new FileInfo(fileName);

        System.IO.FileStream oFileStream = oFile.OpenRead();
        long lBytes = oFileStream.Length;
        byte[] fileData = new byte[lBytes + 1];

        // Read the file into a byte array
        oFileStream.Read(fileData, 0, lBytes);
        oFileStream.Close();

        return fileData;
    }

    //Get CBEFF image from an Icao image
    private bool GetCbeffFromIcao()
    {
        //Create Cbeff Image Data pointer
        GrCbeff = new Cbeff();
        GrCbeffImage = GrCbeff.AddImage(GrIcaoImage, false, 0);

        GrCbeffImage.Gender = CbeffImage.CbeffGender.Unknown;
        GrCbeffImage.Eyes = CbeffImage.CbeffEyes.Unspecified;
        GrCbeffImage.Hair = CbeffImage.CbeffHair.Unspecified;
        GrCbeffImage.FeatureMask = 0;
        GrCbeffImage.Expression = CbeffImage.CbeffExpression.Unspecified;

        return true;
    }

    //Get eyes and mouth position from Face Image
    public bool GetPositionsFromFaceImage()
    {
        float prob = 0;
        //Get the eyes detection probabilty        
        prob = GrFaceImage.DetectionProbability;
        if (prob == 0)
        {
            Interaction.MsgBox("There isn't any probability to find the eyes position.", Constants.vbCritical, "No probability");
            return false;
        }
        return true;
    }

    //Get eyes and mouth position from ICAO Image
    public bool GetPositionsFromIcaoImage()
    {
        //get the position from an icao image.
        float prob = 0;
        prob = GrIcaoImage.DetectionProbability;
        if (prob <= 0)
        {
            WriteLog("There isn't any probability to find the eyes position.");
            return false;
        }
        return true;
    }

    //Set left eye position on library
    public void SetLeftEyePos(int x, int y)
    {
        GrFaceImage.LeftEye = new Point(x, y);
    }

    //Set right eye position on library
    public void SetRightEyePos(int x, int y)
    {
        GrFaceImage.RightEye = new Point(x, y);
    }

    //Set mouth position on library
    public void SetMouthPos(int x, int y)
    {
        if (x > 0 & x < GrFaceImage.Width & y > 0 & y < GrFaceImage.Height)
        {
            Point p = new Point(x, y);
            GrFaceImage.Mouth = p;
        }
    }

    //Marshal between library and VB .NET. Copy an Variant Array to Byte() vector
    public byte[] ConvertArrayToVByte(Array buffer)
    {
        GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
        IntPtr ptr = handle.AddrOfPinnedObject();
        byte[] bytes = new byte[buffer.Length + 1];
        Marshal.Copy(ptr, bytes, 0, bytes.Length);
        return bytes;
    }

    // Show GriauleAfis version and type
    public void MessageVersion()
    {
        int majorVersion = 0;
        int minorVersion = 0;

        GriauleIcaoFace.GetVersion(majorVersion, minorVersion);
        MessageBox.Show("The GrIcaoFace DLL version is " + majorVersion + "." + minorVersion + ".", "GrIcaoFace Version", MessageBoxButtons.OK);
    }

}
} 
```

我不断收到此错误的错误：

> 找不到类型或命名空间名称“ListBox”（您是否缺少 using 指令或程序集引用？）。
> 找不到类型或命名空间名称“PictureBox”（您是否缺少 using 指令或程序集引用？）。

这是formMain.cs

```
using Microsoft.VisualBasic;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace IcaoWF
{
public partial class formMain : Form
{
    public formMain(): base()
    {
        Load += formMain_Load;
        InitializeComponent();
    }

    // raw image data type.
    private struct TSetting
    {
        // Image data.
        public Button button;
        // Image width.
        public Label x;
        public Label y;
        public bool setting;
    }
    TSetting CSetting = new TSetting();

    Util myUtil = default(Util);
    private void formMain_Load(Object sender, EventArgs e)
    {
        InitializeInterface();
        //Setting file filters
        ldImg.Filter = "JPEG Images (*.jpg,*.jpeg)|*.jpg;*.jpeg|Gif Images (*.gif)|*.gif|Bitmaps (*.bmp)|*.bmp";
        ldIcaoImg.Filter = "CBEFF (*.cbeff)|*.cbeff";
        svIcaoImg.Filter = "JPEG2000 (*.jp2)|*.jp2|CBEFF (*.cbeff)|*.cbeff";
        myUtil = new Util(logBox);

        //Verifieing if the mouth is important
        gbMouth.Enabled = myUtil.USES_MOUTH;
    }

    //Unlock the interface and update the clicked iten
    private void interfaceSetStop(int x, int y)
    {
        if (CSetting.setting) {
            //Set the CSetting to false
            CSetting.setting = false;
            //Set positions from mouse to CSetting text selected
            CSetting.x.Text = x.ToString();
            CSetting.y.Text = y.ToString();
            //Enable Set button again
            CSetting.button.Enabled = true;
            //Set the normal cursor above image
            imgFace.Cursor = Cursors.Arrow;
            //Enable all butons, disabled before
            EnableButtons();

            //Sets new position from image
            myUtil.SetLeftEyePos(lbLeftEyeXPos.Text, lbLeftEyeYPos.Text);
            myUtil.SetRightEyePos(lbRightEyeXPos.Text, lbRightEyeYPos.Text);
            if (myUtil.USES_MOUTH) {
                myUtil.SetMouthPos(lbMouthXPos.Text, lbMouthYPos.Text);
            }

            //Redraw img
            myUtil.DisplayFaceImage(imgFace, true);
        }
    }

    //Initialize the program interface
    private void InitializeInterface()
    {
        //Disable butons
        DisableButtons();
        //Disbable image picture box
        imgFace.Enabled = false;
        //Current setting eye or mouth to false
        CSetting.setting = false;
        //Disable Save ICAO image
        mnFileSaveIcaoImg.Enabled = false;
        //Reset the logBox 
        logBox.ResetText();
    }

    //Enable all butons from interface
    private void EnableButtons()
    {
        btGenIcaoImage.Enabled = true;
        btLeftEyeSet.Enabled = true;
        btMouthSet.Enabled = true;
        btRightEyeSet.Enabled = true;
        btProcess.Enabled = true;
        imgFace.Enabled = true;
    }

    //Set the inteface to click on the image
    private void btLeftEyeSet_Click(Object sender, EventArgs e)
    {
        interfaceSetStart(btLeftEyeSet, lbLeftEyeXPos, lbLeftEyeYPos);
    }

    //Set the inteface to click on the image
    private void lbRightEyeSet_Click(Object sender, EventArgs e)
    {
        interfaceSetStart(btRightEyeSet, lbRightEyeXPos, lbRightEyeYPos);
    }

    //Set the inteface to click on the image
    private void btMouthSet_Click(Object sender, EventArgs e)
    {
        interfaceSetStart(btMouthSet, lbMouthXPos, lbMouthYPos);
    }

    //Lock the interface to click on image
    private void interfaceSetStart(Button button, Label x, Label y)
    {
        //Set the clicked button set
        CSetting.button = button;
        //set the label to update the position
        CSetting.x = x;
        CSetting.y = y;
        //Enable set mode
        CSetting.setting = true;
        //Disable the button
        button.Enabled = false;
        //Enable Cross cursor on image
        imgFace.Cursor = Cursors.Cross;
        //Disable button to avoid user to click in another area
        DisableButtons();
    }

    //Disable all buttons from interface
    private void DisableButtons()
    {
        btGenIcaoImage.Enabled = false;
        btLeftEyeSet.Enabled = false;
        btMouthSet.Enabled = false;
        btRightEyeSet.Enabled = false;
        btProcess.Enabled = false;
    }

    //On click on the image, stop the interface and set the right position
    private void imgFace_MouseDown(object sender, MouseEventArgs e)
    {
        interfaceSetStop(e.X / (imgFace.Width / myUtil.GrFaceImage.Width), e.Y / (imgFace.Height / myUtil.GrFaceImage.Height));
    }

    //Gen the ICAO image from FaceImage
    private void btGenIcaoImage_Click(Object sender, EventArgs e)
    {
        //Display ICAO image captured
        myUtil.DisplayIcaoImg(imgIcaoImg);
        //Enabled 
        mnFileSaveIcaoImg.Enabled = true;
    }

    //Load Icao IMAGE From CBEFF or JPEG2000
    private void mnFileLoadIcaoImg_Click(Object sender, EventArgs e)
    {
        Util.EFile fileType = default(Util.EFile);
        ldIcaoImg.FileName = "";

        //save the ICAO image
        if (ldIcaoImg.ShowDialog == DialogResult.OK & !string.IsNullOrEmpty(ldIcaoImg.FileName))
        {
            fileType = myUtil.GetFileType(ldIcaoImg.FileName);
            switch (fileType)
            {

                case Util.EFile.CBEFF:
                    //Save CBEFF image
                    myUtil.LoadIcaoFromCBEFFImage(ldIcaoImg.FileName, imgIcaoImg);
                    break;
                //
                default:
                    //Image type not found
                    myUtil.WriteLog("File type not supported.");
                    return;
            }
        }
    }

    //Save ICAO Image
    private void mnFileSaveIcaoImg_Click(Object sender, EventArgs e)
    {
        Util.EFile fileType = default(Util.EFile);
        svIcaoImg.FileName = "";

        //save the ICAO image
        if (svIcaoImg.ShowDialog == DialogResult.OK & !string.IsNullOrEmpty(svIcaoImg.FileName))
        {
            fileType = myUtil.GetFileType(svIcaoImg.FileName);
            switch (fileType)
            {

                case Util.EFile.CBEFF:
                    //Save CBEFF image
                    myUtil.SaveIcaoIntoCBEFFImage(svIcaoImg.FileName);

                    break;
                case Util.EFile.JPEG2000:
                    //Save JPEG200 image
                    myUtil.SaveIcaoIntoJP2Image(svIcaoImg.FileName);

                    break;
                default:
                    //Image type not found
                    myUtil.WriteLog("File type not supported.");
                    break;
            }
        }
    }

    //Load Image

    private void mnFileLoadImg_Click(Object sender, EventArgs e)
    {
        lbLeftEyeXPos.Text = "0";
        lbLeftEyeYPos.Text = "0";
        lbRightEyeXPos.Text = "0";
        lbRightEyeYPos.Text = "0";
        lbMouthXPos.Text = "0";
        lbMouthYPos.Text = "0";

        //Disable buttons
        DisableButtons();

        //Enable image
        imgFace.Enabled = true;
        //Set file name image to null
        ldImg.FileName = "";
        if (ldImg.ShowDialog == DialogResult.OK & !string.IsNullOrEmpty(ldImg.FileName))
        {
            //load image from FileName into imgFace Picture Box

            if (myUtil.LoadImage(ldImg.FileName, imgFace))
            {
                //Set the icaoImage to null
                imgIcaoImg.Image = null;
                imgIcaoImg.Refresh();

                //Disble mnFileSaveIcaoImg to save
                mnFileSaveIcaoImg.Enabled = false;

                //Disable buttons
                DisableButtons();

                //Enable find eyes and mouth button
                btProcess.Enabled = true;
            }
        }
    }

    //Close the program
    private void MenuItem5_Click(Object sender, EventArgs e)
    {
        this.Close();
    }

    //Process the Face Image
    private void btProcess_Click(Object sender, EventArgs e)
    {
        //Enable buttons to set eyes and mouth
        EnableButtons();

        //Process face image

        if (myUtil.ProcessFaceImage(imgFace))
        {
            //Get positions from face image
            lbLeftEyeXPos.Text = myUtil.GrFaceImage.LeftEye.X.ToString();
            lbLeftEyeYPos.Text = myUtil.GrFaceImage.LeftEye.Y.ToString();
            lbRightEyeXPos.Text = myUtil.GrFaceImage.RightEye.X.ToString();
            lbRightEyeYPos.Text = myUtil.GrFaceImage.RightEye.Y.ToString();
            lbMouthXPos.Text = myUtil.GrFaceImage.Mouth.X.ToString();
            lbMouthYPos.Text = myUtil.GrFaceImage.Mouth.Y.ToString();

        }

    }

    //Print the DLL version
    private void mnVersion_Click(Object sender, EventArgs e)
    {
        myUtil.MessageVersion();
    }

}
} 
```

如果需要，我可以发布 vb.net 版本。

**已编辑：我已将引用（System.Windows.Forms.dll）添加到项目中，并且所有其他人都在使用。**

谢谢努尔基

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:01:21.007

[ListBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.aspx)在程序集 System.Windows.Forms.dll 中定义。确保您有对该程序集的引用。

另外你可能想要

```
using System.Windows.Forms; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:03:01.600

使用`System.Windows.Forms`命名空间。要使用`System.Windows.Forms`命名空间，您必须添加 `System.Windows.Forms.dll`为引用。

要添加引用，请执行以下步骤：

在解决方案资源管理器中，右键单击项目节点，然后单击添加引用。

在 Add Reference 对话框中，选择 .NET 选项卡并选择 System.Windows.Forms 并单击 OK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T05:17:44.077

ListBox 和 PictureBox 控件都可以在 System.Windows.Forms 命名空间中找到。将以下语句添加到代码顶部：

> 使用 System.Windows.Forms；

然后添加引用`System.Windows.Forms.dll`

# android - 读取设备电话号码抛出 NULLPointerException

> ID：11534534
> 
> 赞同：1
> 
> 时间：2012-07-18T04:59:50.603
> 
> 标签：android, nullpointerexception, phone-number

我正在尝试使用以下代码读取设备的电话号码。当电话号码不可用时，我会读取订阅者 ID。它适用于某些手机并在某些设备中引发 NULL 指针异常。设备日志显示我在以下行中收到 NULL 指针异常

```
if(MyPhoneNumber.equals("")) 
```

请让我知道如何让它在所有设备上工作。

```
TelephonyManager tMgr =(TelephonyManager)ShowMyLocation.this.getSystemService(Context.TELEPHONY_SERVICE); 

String MyPhoneNumber = tMgr.getLine1Number(); 

if(MyPhoneNumber.equals(""))
             MyPhoneNumber = tMgr.getSubscriberId(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T05:10:37.167

每个运营商的 SIM 卡上都没有电话号码，就像在印度，SIM 卡在任何内存中都没有电话号码，所以我们无法从这些连接中获取电话号码。但是，一些国家和运营商已将电话号码存储在 SIM 卡上，我们可以获取这些号码。为了使它适用于所有设备，我们可以采用两种策略：

1.  为了避免空指针异常，我们可以捕获错误并相应地工作。像：

    ```
    TelephonyManager tMgr = (TelephonyManager) 
                     ShowMyLocation.this.getSystemService(Context.TELEPHONY_SERVICE);

    String MyPhoneNumber = "0000000000";

    try 
    {
        MyPhoneNumber =tMgr.getLine1Number();
    }
    catch(NullPointerException ex)
    {
    }

    if(MyPhoneNumber.equals("")) 
        MyPhoneNumber = tMgr.getSubscriberId(); 
    ```

2.  或者我们可以有一个短信网关，当我们需要电话号码的时候，我们可以向网关发送短信，然后部署一个webservice返回号码，短信网关接收消息，但是这种方案的成本很高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:32:20.943

为了从设备中获取电话号码，首先您必须在设备上设置自己的电话号码，只需通过：

> 设置 -> 关于手机 -> 状态 -> 我的电话号码

当您调用此代码时：

```
MyPhoneNumber = tMgr.getLine1Number(); 
```

它是存储的号码实际上正在返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-09T10:55:34.013

[![在此处输入图像描述](../Images/3a2e382852660fc66e8bb2301279c6c8.png)](https://i.stack.imgur.com/25Dgh.png)

TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);

字符串编号 = tm.getLine1Number();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:02:56.713

有时电话号码未在电话设置中设置。在这些情况下，`getLine1Number()`将返回 null。您将需要找出一种替代方法来跟踪您正在跟踪的任何内容。

这是人们经常遇到的问题。我在android上编程不多，但我看到这个被问了很多。确保您使用搜索来检查您所问的问题是否曾被问过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T05:17:04.210

添加清单 READPHONESTATE 权限

你可以用

```
if(MyPhoneNumber.length<0)
             MyPhoneNumber = tMgr.getSubscriberId(); 
```

# html - HTML中的日期时间是什么？

> ID：11534545
> 
> 赞同：1
> 
> 时间：2012-07-18T05:01:28.367
> 
> 标签：html, css, xhtml

我正在从一本书中学习 HTML，并注意到一个例子，

```
<del datetime="20040329">fluffy kitten</del> 
```

日期时间是什么意思，它有什么作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:04:42.670

删除的文本，带有删除文本的日期和时间：

```
<p>My favorite color is <del datetime="2009-01-08T22:55:03Z">blue</del>
<ins>red</ins>!</p> 
```

更多信息[http://reference.sitepoint.com/html/del/datetime](http://reference.sitepoint.com/html/del/datetime)

[http://www.w3.org/community/webed/wiki/HTML/Elements/del](http://www.w3.org/community/webed/wiki/HTML/Elements/del)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T05:06:45.273

datetime 属性指定删除文本的日期和时间。

此链接可能对您有所帮助

[http://www.w3schools.com/tags/att_del_datetime.asp](http://www.w3schools.com/tags/att_del_datetime.asp)

[http://www.w3schools.com/html5/tag_time.asp](http://www.w3schools.com/html5/tag_time.asp)

```
<p>My favorite color is <del datetime="2009-01-08T22:55:03Z">blue</del>
<ins>red</ins>!</p> 
```

回答

![在此处输入图像描述](../Images/b09cb8e062772f2fff877bdd4bcd8cd3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T05:05:40.010

[http://www.w3.org/TR/2010/WD-html-markup-20101019/del.html](http://www.w3.org/TR/2010/WD-html-markup-20101019/del.html)

> del 元素表示已从文档中删除的文本范围。
> 
> datetime - 删除文本的日期和时间。[RFC 3339] 中定义的有效日期时间，具有以下附加条件：
> 
> *   日期/时间语法中的文字字母 T 和 Z 必须始终为大写
> *   date-fullear 产生式被定义为代表大于 0 的数字的四位或更多位

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:04:33.037

它显示了一些文本何时被删除，[参考](http://www.w3schools.com/tags/att_del_datetime.asp)。删除的文本被划掉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T05:17:04.053

datetime 属性指定删除文本的日期和时间。在普通的网络浏览器中没有视觉效果， **语法**

```
<del datetime="YYYY-MM-DDThh:mm:ssTZD"> 
```

# c# - DynamicMethod.Invoke 或 DynamicMethod.CreateDelegate+Invoke - 哪个更快？

> ID：11534552
> 
> 赞同：1
> 
> 时间：2012-07-18T05:02:08.143
> 
> 标签：c#, .net, clr, dynamicmethod, dynamic-method

以下哪项提供更好的性能：

```
DynamicMethod dm = ....
..
//create IL for 'dm'
//store 'dm' for later use
..
..
later
..
..
dm.Invoke(..); 
```

或者

```
DynamicMethod dm;
Delegate del = dm.CreateDelegate()
// store 'del' for later use
..
..
later
..
..
del(..); 
```

**请注意，通常会创建 10 或 100 种不同的 DynamicMethod，并且每个 DynamicMethod（通过存储的 'dm' 或 'del' 的哈希表）将被多次调用。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:20:22.797

如果您只是创建“丢弃”方法（iow 不再使用它们），那没关系。

但是，如果您重用它们，则第二个选项将明显更快。

**更新：**

第一个选项仅使用反射 ( `RuntimeMethodHandle.InvokeMethodFast(...)`)。我会假设在内部，`DynamicMethod`也会在某个阶段编译，这将在第一次调用和可能的额外调用时产生一些额外的开销。

第二个选项，`DynamicMethod`显式编译为已知的委托类型。众所周知，“直接”委托调用几乎与“直接”方法调用一样快。

**观点：**

始终使用第二个选项，即使只使用一次。除了大幅提高性能外，您还将获得一些编译时间优势。

# javascript - How to simplify this javascript

> ID：11534555
> 
> 赞同：-1
> 
> 时间：2012-07-18T05:02:36.760
> 
> 标签：javascript

> **Possible Duplicate:**
> [Any way to simplify this code?](https://stackoverflow.com/questions/11534341/any-way-to-simplify-this-code)

What is the best way to simplify this for going from 1-19?

```
var backer1 = document.getElementById("backer-prediction-1").value;
var incentive1 = document.getElementById("incentive-cost-1").value;
var totalIncentive1 = parseInt(backer1,10) * parseInt(incentive1,10);

document.getElementById("incentive-total-1").value = totalIncentive1;

var backer2 = document.getElementById("backer-prediction-2").value;
var incentive2 = document.getElementById("incentive-cost-2").value;
var totalIncentive2 = parseInt(backer2,10) * parseInt(incentive2,10);

document.getElementById("incentive-total-2").value = totalIncentive2; 
```

Last one I posted they gave me a "for" loop.

Still learning this stuff.. Very New, THANKS!!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:06:17.430

Use Array in javascript

```
var backer=[],
    incentive=[],
    totalincentive=[];
for(var i=1;i<20;i++){
    backer[i] = document.getElementById("backer-prediction-"+i).value;
    incentive[i] = document.getElementById("incentive-cost-"+i).value;
    totalIncentive[i] = parseInt(backer[i],10) * parseInt(incentive[1],10);

    document.getElementById("incentive-total-"+i).value = totalIncentive[i];
} 
```

So you can use them after ending for loop , like

```
backer[1]....,backer[19]
incentive[1]....,incentive[19]
totalincentive[1]....,totalincentive[19] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T05:06:53.923

Just like the [last question](https://stackoverflow.com/questions/11534341/any-way-to-simplify-this-code), use a [`for` loop](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for):

```
for(var i = 1; i < 20; i++){
    var backer = document.getElementById("backer-prediction-"+i).value;
    var incentive = document.getElementById("incentive-cost-"+i).value;
    var totalIncentive = parseInt(backer,10) * parseInt(incentive,10);

    document.getElementById("incentive-total-"+i).value = totalIncentive;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T05:08:26.523

```
for (var i=1; i<=19; i++) {
    var backer = document.getElementById("backer-prediction-" + i).value;
    var incentive = document.getElementById("incentive-cost-" + i).value;
    var totalIncentive = parseInt(backer,10) * parseInt(incentive,10);
    document.getElementById("incentive-total-" + i).value = totalIncentive;
} 
```

This untested code should be enough, unless you need access to the `backer` and `incentive` values for each one of the cases after the loop is completed.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:46:26.983

If the value of *backer* and *incentive* is a number, I'd be tempted to do:

```
var get = document.getElementById;
var backer, incentive, totalIncentive = 0;

for(var i = 1; i < 20; i++) {
  totalIncentive += get("backer-prediction-" + i).value * get("incentive-cost-" + i).value;
} 
```

as the multiplication will implicitly convert numeric strings to numbers. But you really should validate that the content of those elements is a valid number before doing anything, even if using *parseInt*.

# javascript - 在 JavaScript 中设置 Google Chrome 的 disable-web-security 标志

> ID：11534561
> 
> 赞同：0
> 
> 时间：2012-07-18T05:03:11.453
> 
> 标签：javascript, jquery

在 chrome 中运行我的应用程序会给我以下错误：

> XMLHttpRequest 无法加载 file:///D:/Nancy/Nancy_16Jul/Nancy.Rest.Client/Assets/Templates/Login.htm。Access-Control-Allow-Origin 不允许 Origin null。

如果我通过禁用网络安全来运行应用程序，它可以正常工作。但我想通过代码设置网络安全。有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:50:12.303

不，当然不是。如果一个网站可以关闭网络安全，那会让安全变得毫无价值！

# wpf - 在 wpf 中将窗口实现为页面

> ID：11534567
> 
> 赞同：2
> 
> 时间：2012-07-18T05:03:55.840
> 
> 标签：wpf

我的项目中有很多窗口。现在我正在考虑将其转换为页面，然后将其实现为框架导航。有什么方法可以将所有窗口转换为框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:59:27.510

有一个非常简单的方法：新建一个页面，然后设置页面内容=窗口内容。但是你失去了一些属性（宽度，高度）一些事件加载器（加载，...），显然页面上不允许一些操作。
如果您想尝试在项目上不承担太大风险，请使用几个窗口（W1、W2、W3），然后创建页面 P1、P2、P3。现在创建 W1'、W2'、W3'，它们只是一个窗口，其框架分别链接到 P1、P2、P3。通过这种方式，您可以检查您的应用程序是否可以“转换”为页面逻辑并开始测试导航，同时仍然具有应用程序的窗口版本的完整功能。请注意，如果您的应用程序遵循 MVVM，则翻译“应该”很容易。

# android - 如何处理 AsyncTask 中的异常

> ID：11534572
> 
> 赞同：2
> 
> 时间：2012-07-18T05:04:27.697
> 
> 标签：android, android-asynctask

我正在使用这样的 AsyncTask

```
public class AccountReportActivity extends Activity {

private OrgaLevelTask orgaLevelTask;

    public void onCreate(Bundle savedInstanceState) {            
        ......
        orgaLevelTask  = new OrgaLevelTask(AccountReportActivity.this, spinner_orgaLevel, spinner_branch, txt_extra, txt_extra1);               
        orgaLevelTask.execute();

    } //end of onCreate

} //end of class AccountReportActivity 
```

任务：

```
public class OrgaLevelTask extends AsyncTask<Void, Void, ArrayList<OrgaLevel>> {

    //Constrcutor
    public OrgaLevelTask(AccountReportActivity accountReportActivity, Spinner spinner_orgaLevel, Spinner spinner_branch, TextView txt_extra, TextView txt_extra1) {

        this.accountReportActivity = accountReportActivity; 
        this.spinner_orgaLevel = spinner_orgaLevel;
        ....                
    } //end of constructor

    @Override
    protected ArrayList<OrgaLevel> doInBackground(Void... arg0) {       
        return callWebService();        
    } //end of doInBackground()

    private ArrayList<OrgaLevel> callWebService() {

        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            ......
        } catch (SocketTimeoutException e) {                 
             Toast.makeText(accountReportActivity, "Service is not connected, Please make sure your server is running", Toast.LENGTH_LONG).show();
             return null;                                   
        }  catch(Exception e) {             
            e.printStackTrace();
            System.out.println();                               
        }
    } //end of callWebService()

} //end of class OrgaLevelTask 
```

我的这个任务调用另一个具有相同代码的 AsyncTask。问题是如果服务器正在运行，那么一切都很好。但是，如果服务器没有运行并且我调用了 Web 服务，那么我会得到**Force Application close**的异常。为什么？我正在处理**SocketTimeoutException**如果发生异常然后我说在我的 Activity 上显示 toast 但为什么它会强制关闭应用程序。我该如何处理？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:11:39.227

您可以先通过这种方式检查互联网连接

```
public static boolean checkConnection(Context context) {

    final ConnectivityManager mConnectivityManager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    final NetworkInfo netInfo = mConnectivityManager.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    } else
        return false;
 } 
```

在这个方法中

```
 // Checking the internet connection
        if (!InternetConnectionCheck.checkConnection(this)) {
            Utilities.alertDialogBox(this, R.string.Title_String,
                    R.string.No_Internet_connection_String);
        } else {
           orgaLevelTask  = new OrgaLevelTask(AccountReportActivity.this, spinner_orgaLevel, spinner_branch, txt_extra, txt_extra1);               
           orgaLevelTask.execute();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T05:24:04.997

你不应该使用`Toast`在`doInBackground`

```
 catch (SocketTimeoutException e) {                              

   Toast.makeText(accountReportActivity, "Service is not connected, Please make sure your server is running", Toast.LENGTH_LONG).show();  //<---------------------- 
```

# linq - 在实体框架的查询中使用列表

> ID：11534574
> 
> 赞同：0
> 
> 时间：2012-07-18T05:04:35.033
> 
> 标签：linq, sql-server-2008, c#-4.0, entity-framework-4

我正在尝试找到一种将可选字符串列表传递给查询的方法。我想做的是根据标签之间的关系过滤标签列表。例如，如果选择了 c#，我的程序将只建议出现在带有 ac# 标记的文档中的标记，然后在选择下一个（例如 SQL）时，将显示链接到文档的两个标记的标记，并对其进行削减下，以便用户可以越来越接近他的目标。

目前我只有：

```
List<Tag> _tags =  (from t in Tags
                   where t.allocateTagDoc.Count > 0
                   select t).ToList(); 
```

这是一种在选择标签时将使用可选参数重复调用的方法。

* * *

我想我一直在倒退。如果我为每个提供的标签进行两个（或更多）查询，找到它们一起出现的文档，然后带出所有与它们一起出现的标签......或者数据库上的点击次数过多？我可以完全通过实体上下文变量来完成它并只查询模型吗？

再次感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:18:59.957

你可以试试这个。

首先收集标签以在字符串列表中搜索。

```
List<string> tagStrings = new List<string>{"c#", "sql"}; 
```

在您的查询中传递此列表，检查它是否为空，如果为空，它将返回所有标签，否则将返回与 tagStrings 匹配的标签。

```
var _tags = (from t in Tags 
             where t.allocateTagDoc.Count > 0
             && (tagStrings.Count ==0  || tagStrings.Contains(t.tagName))
             select t).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:25:27.260

你也可以试试这个，Dictionary 用它的标签表示一个文档的 ID：

```
 Dictionary<int, string[]> documents = 
            new Dictionary<int, string[]>();

        documents.Add(1, new string[] { "C#", "SQL", "EF" });
        documents.Add(2, new string[] { "C#", "Interop" });
        documents.Add(3, new string[] { "Javascript", "ASP.NET" });
        documents.Add(4, new string[] { });

        // returns tags belonging to documents with IDs 1, 2
        string[] filterTags = new string[] { "C#" };
        var relatedTags = GetRelatedTags(documents, filterTags);
        Debug.WriteLine(string.Join(",", relatedTags));

        // returns tags belonging to document with ID 1
        filterTags = new string[] { "C#", "SQL" };
        relatedTags = GetRelatedTags(documents, filterTags);
        Debug.WriteLine(string.Join(",", relatedTags));

        // returns tags belonging to all documents 
        // since no filtering tags are specified
        filterTags = new string[] { };
        relatedTags = GetRelatedTags(documents, filterTags);
        Debug.WriteLine(string.Join(",", relatedTags));

    public static string[] GetRelatedTags(
        Dictionary<int, string[]> documents, 
        string[] filterTags)
    {
        var documentsWithFilterTags = documents.Where(o => 
            filterTags
                .Intersect(o.Value).Count() == filterTags.Length);

        string[] relatedTags = new string[0];

        foreach (string[] tags in documentsWithFilterTags.Select(o => o.Value))
            relatedTags = relatedTags
                .Concat(tags)
                .Distinct()
                .ToArray();

        return relatedTags;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:54:25.437

以为我会弹出并分享我的解决方案，这与我最初想到的完全不同。

首先，我稍微修改了数据库，去掉了 allocateDocumentTag 表中的一个无用字段，这使我能够更有效地使用实体框架模型，因为我允许我离开该表并纯粹通过 Tag 和 Document 之间的关系访问它。

当我第一次填写表单时，我只显示与文档有关系的所有标签。之后使用我的搜索过滤器，当在 checkListBox 中选择标签时，将返回与该标签关联的文档 ID，然后反馈以填充使用的标签列表框。

```
public static List<Tag> fillUsed(List<int> docIds = null)
        {
            List<Tag> used = new List<Tag>();

            if (docIds == null || docIds.Count() < 1)
            {
                used = (from t in frmFocus._context.Tags
                        where t.Documents.Count >= 1
                        select t).ToList();  
            }
            else
            {    
                used = (from t in frmFocus._context.Tags
                        where t.Documents.Any(d => docIds.Contains(d.id))
                        select t).ToList();  
            }
            return used;
        } 
```

从那里标签进入文档搜索，反之亦然。希望这可以帮助其他人，如果答案不清楚或者您需要更多代码，那么只需发表评论，我会尝试对其进行排序。

# javascript - 无法调用 undefined 的方法 save。蒙古人

> ID：11534575
> 
> 赞同：0
> 
> 时间：2012-07-18T05:04:37.227
> 
> 标签：javascript, node.js, mongodb, mongojs

我有一个简单的方法如下写入 mongodb 数据库。它使用 Mongojs 模块。除了最后一行之外，一切似乎都很好。我在控制台中收到“TypeError：无法调用未定义的方法‘保存’”。问题可能是什么？

```
var db = require('mongojs').connect('mongodb://foo:bar@something.com:10027/foobar');

var saveImage = function(file, usr) {

    var imagesCollection = db.collection('Images');
    var Image = {};
    Image.imageFileName = file;
    Image.user = usr;
    Image.date = new Date();
    db.imagesCollection.save(Image);

}

exports.saveImage = saveImage; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:23:54.077

尝试更改`db.imagesCollection.save(Image)`为`imagesCollection.save(Image)`.

`"TypeError: Cannot call method 'save' of undefined"`意味着在那条线上有一个方法的东西`save`是未定义的。接下来尝试`console.log`一些变量以了解问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:36:15.567

该错误告诉您 db 是一个对象并且不包含 imagesCollection 的定义。

db.imagesCollection.save（图像）；

在 db.imagesCollection.save(Image) 正上方添加调试器；

并且您将能够看到 imagesCollection 当前不是 db 的属性。

# .net - 如何杀死管道？

> ID：11534578
> 
> 赞同：2
> 
> 时间：2012-07-18T05:05:21.750
> 
> 标签：.net, visual-c++

我需要在 vc++ .net 中执行这三个步骤

**1.** *杀死原管*

**2.** *制作新管道*

**3.** *摆脱正在使用新管道的正在运行的应用程序*

使用进程资源管理器并使用按钮（“查找句柄或 DLL”）和命令（“\Device\NamedPipe\”）我发现我需要杀死并重新创建的命名管道是（“\Device\NamedPipe\C :\Users\Andrew\Desktop\The Library\Media\Games\Nexon\MapleStory\BlackCipher\NexonGuard"）。

参考也将是它有 1 个句柄。

如果可能的话，我将如何获取管道名称而不是使用 Process Explorer。

我只是在问如何开始这 3 个步骤，我将在 vc++ .net 中对此进行编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:10:48.750

1.  一般来说，你不能。管道与任何其他执行对象（文件、注册表项等）一样，在该对象的所有句柄都关闭之前不会被销毁。您将不得不使用管道强制进程为您关闭它。

2.  您可以通过调用 CreatePipe 创建一个新管道。

3.  没有记录在案的方法可以做到这一点。您需要遍历每个进程的句柄表以查看它们是否具有给定管道的句柄，然后在该进程上调用 TerminateProcess。您很可能需要使用 SeDebugPrivilege 来执行此操作。（如果您实际上是在尝试绕过反作弊系统，那么利用此特权并检查相关程序的内部可能会引发一些问题；））

进程资源管理器通过加载到内核（驱动程序）中实现了#3，但这在 Visual Studio 之类的任何东西中都无法实现——您需要学习编写驱动程序，并且这些驱动程序是使用 Windows 驱动程序工具包构建的。

# javascript - 在一个页面中同时旋转两个画布？

> ID：11534581
> 
> 赞同：1
> 
> 时间：2012-07-18T05:05:40.457
> 
> 标签：javascript, html

我有两个画布。

```
<canvas id="canvas" width="1338 px" height="550px" ></canvas>
<canvas id="annCanvas" width="1338 px" height="550px"></canvas> 
```

在 ist canvas(id='canvas') 我正在加载图像。

在第二个画布（id='annCanvas'）中，我正在绘制形状（例如矩形、线条等）。

我想同时旋转两个画布。（四个旋转值 0,90,180,270）。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:24:53.823

您可以使用 css 动画，并将该动画应用于这些画布..

```
 <canvas id="canvas" width="1338 px" height="550px" class="rotate_anim"></canvas>
<canvas id="annCanvas" width="1338 px" height="550px" class="rotate_anim"></canvas> 
```

你的CSS应该是这样的

```
 .rotate_anim{
    -webkit-animation-duration: 1s;
    -webkit-animation-name: animation1;
    -webkit-animation-iteration-count:infinite ;
    }

@-webkit-keyframes animation1
{
0%{ -webkit-transform:  rotate(0deg);
}
25%{ -webkit-transform:  rotate(90deg);
}
50%{ -webkit-transform: rotate(180deg);
    }
    75%{ -webkit-transform:  rotate(270deg);
    }
    100%{ -webkit-transform: rotate(360deg); 
    }
    } 
```

# python - 在Python中返回满足特定条件的项目的最佳方法是什么

> ID：11534589
> 
> 赞同：1
> 
> 时间：2012-07-18T05:06:39.840
> 
> 标签：python

我目前使用的代码是：

```
def f(*args):
    lst=[str(i) for i in args]
    if len(lst)==1:lst = lst[0]
    return lst 
```

我想要的是：

```
a=f(1) #'1', not [1]

a,b = f(1,2) #'1', '2' 
```

只有一个参数是一个列表，它由 表示`a`。

除了使用`if`语句之外，还有什么替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:08:52.637

是的：

```
return lst[0] if len(lst) == 1 else lst 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:13:36.877

返回这样的不同类型可能会令人困惑。我建议使用

```
a = f(1)[0] 
```

或者

```
[a] = f(1) 
```

或者

```
a, = f(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:09:10.983

如果我理解正确的话，不。如果您接受带有 的可变参数`*args`，那么即使只有一个参数，您也会得到一个列表。

你当然可以用 分隔第一个参数`def f(first, *rest)`，但是当你想要一个列表时，你必须做特殊情况来组合*元素*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:29:24.623

我建议使用产量：

```
def f(*args):
    for i in args:
        yield str(i)

a, = f(1)
print a
a, b = f(1, 2)
print a, b 
```

返回：

```
1
1 2 
```

是你想要的吗？

# django - 使用 Django Auth 没有传统的用户名/密码登录，只有 Twitter 登录

> ID：11534591
> 
> 赞同：1
> 
> 时间：2012-07-18T05:06:44.587
> 
> 标签：django, django-authentication

我熟悉使用 django 的内置身份验证来创建一个具有电子邮件和密码的新用户，但我想创建一个只使用 Twitter 登录的新用户。据我所知，django-social-auth 将 twitter 帐户与现有的 Django User 对象相关联。就我而言，不会有现有的 Django User 对象，因为 Twitter 将是登录该站点所需的方法。我应该放弃 django 的内置身份验证吗？或者有没有一种很好的方法来扩展它来做我想做的事情？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:54:37.750

django-social-auth 扩展了 django 内置的身份验证。django-social-auth 将自己创建一个新用户，您的 Twitter 用户将成功通过身份验证。您可以[阅读 django-social-auth 功能](https://github.com/omab/django-social-auth/#features)：

*   基本用户数据填充和信令，以允许来自提供者响应的自定义字段值。

*   多个社交帐户关联到单个用户

*   如果需要，自定义用户模型覆盖（默认为 auth.User）

*   处理身份验证/关联机制的可扩展管道

# perl - Mason 中的 Switch-Case 语法

> ID：11534596
> 
> 赞同：-1
> 
> 时间：2012-07-18T05:07:15.657
> 
> 标签：perl, switch-statement, mason

我正在寻找 Mason 中的 switch-case 语法，但一直找不到。

有人可以在这里帮忙提供样品吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:46:27.497

如果要在 Perl 中创建 switch 语句，请将其放在`#switch $var`逻辑块的开头。这仅表明您打算仅对一个变量进行逻辑处理。对于每个 case 之后 break 的经典案例，您可以使用`if elsif else`block。

```
$var = 3;

# switch $var
if   ($var == 1) {print "one\n";   }
elsif($var == 2) {print "two\n";   }
elsif($var == 3) {print "three\n"; }
elsif($var == 4) {print "four\n";  }
else             {print "didn't get it\n"; } #default 
```

如果你打算使用fall through和default，那么它会更复杂和更慢。

```
$var = 3;
$got = 0;
# switch $var
if   ($var == 1) {print "one\n";   ++$got;}
if   ($var == 2) {print "two\n";   ++$got;}
if   ($var == 3) {print "three\n"; ++$got;}
if   ($var == 3 
     || $var == 4) {print "three or four\n"; ++$got} #fall-through
unless ($got)      {print "didn't get it\n"; } #default 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T05:24:27.550

Perl 直到最近才有 switch/case 语句

您可以使用[开关](http://perldoc.perl.org/Switch.html)模块

```
use Switch;

switch ($val) {
    case 1          { print "number 1" }
    case "a"        { print "string a" }
    case [1..10,42] { print "number in list" }
    case (\@array)  { print "number in list" }
    case /\w+/      { print "pattern" }
    case qr/\w+/    { print "pattern" }
    case (\%hash)   { print "entry in hash" }
    case (\&sub)    { print "arg to subroutine" }
    else            { print "previous case not true" }
} 
```

或使用Perl 5.10 提供的 Perl 6的[`given/when`结构](http://perldoc.perl.org/perlsyn.html#Switch-Statements)

例子：

```
use v5.10.1;

given ($var) {
    when (/^abc/) { $abc = 1 }
    when (/^def/) { $def = 1 }
    when (/^xyz/) { $xyz = 1 }
    default       { $nothing = 1 }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T11:49:05.683

Saket，以下在我的 Mason 系统上运行良好。这是`HTML::Mason`版本。1.48 在 Perl 5.14 和 Apache 2.2.22 上运行。

类似 switch 的语句`given`/`when`在 Perl 之后可用`5.10.1`，（**[请参阅此处](http://perldoc.perl.org/perlsyn.html#Switch-Statements)**），正如在 Matteo 的另一篇文章中已经指出的那样。

`test.html`（`test.mas`如果您的服务器配置需要，请重命名为）。

```
<html>
  <head></head>
  <body>
% my $name = 'Wittig';
  <h3>Hello <% $name %>! Ist this your <% swordname($name) %>?</h3>
  </body>
</html>

<%perl>
 sub swordname  {
   my $hero = shift;
   my $sword;
   given($hero) {
      when (/^Luno/)      { $sword = 'Fingal'   }
      when (/^Ecke/)      { $sword = 'Eckesax'  }
      when (/^Artus/)     { $sword = 'Excalibur'}
      when (/^Wittig/)    { $sword = 'Mimung'   }
      when (/^Ortnit/)    { $sword = 'Rosen'    }
      when (/^Sigurd/)    { $sword = 'Gram'     }
      when (/^Siegmund/)  { $sword = 'Notung'   }
      when (/^Siegfried/) { $sword = 'Balmung'  }
      when (/^Dietrich/)  { $sword = 'Nagelring'}
      default:            { $sword = 'Sword'    }
   }
   return $sword;
 }
</%perl>

<%once>
 use feature "switch";
</%once> 
```

* * *

该模块`Switch.pm`属于[5.14.0 之前](http://search.cpan.org/~jesse/perl-5.14.0/pod/perldelta.pod#Removed_Modules_and_Pragmata)的 Perl 核心模块（正如 David Cross 在评论中指出的那样），确实提供了更“类似开关”的语法，但使用了源过滤器。[手动安装](http://search.cpan.org/~rgarcia/Switch-2.16/Switch.pm)后仍可使用（`cpan install Switch`），但不建议使用。该示例可以使用以下方式重写`Switch.pm`：

```
<html>
  <head></head>
  <body>
% my $name = 'Wittig';
  <h3>Hello <% $name %>! Ist this your <% swordname($name) %>?</h3>
  </body>
</html>

<%perl>
 sub swordname  {
   my $hero = shift;
   switch($hero) {
      case 'Luno'      { return 'Fingal'   }
      case 'Ecke'      { return 'Eckesax'  }
      case 'Artus'     { return 'Excalibur'}
      case 'Wittig'    { return 'Mimung'   }
      case 'Ortnit'    { return 'Rosen'    }
      case 'Sigurd'    { return 'Gram'     }
      case 'Siegmund'  { return 'Notung'   }
      case 'Siegfried' { return 'Balmung'  }
      case 'Dietrich'  { return 'Nagelring'}
      else             { return 'Sword'    }
   }
 }
</%perl>

<%once>
 use Switch;
</%once> 
```

* * *

但是，仅依赖于固定键的最简单的“等效”开关当然是`%hash`：

```
<html>
  <head></head>
  <body>
% my $name = 'Wittig';
  <h3>Hello <% $name %>! Ist this your <% $NameSword{$name} %>?</h3>
  </body>
</html>

<%once>
 my %NameSword = (
   Luno      => 'Fingal',
   Ecke      => 'Eckesax',
   Artus     => 'Excalibur',
   Wittig    => 'Mimung',
   Ortnit    => 'Rosen',
   Sigurd    => 'Gram',
   Siegmund  => 'Notung',
   Siegfried => 'Balmung',
   Dietrich  => 'Nagelring'
 );
</%once> 
```

所有三个变体都产生相同的输出。也许我混淆了剑名（必要时会更正）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T16:58:11.227

在 Perl 5.10.1 给定/何时对我来说很好。这是我用来测试的示例组件：

```
% my $value=2;
% given ($value) {
%     when (1) {
<h1>It is one, dear</h1>
%     }
%     when (2) {
<h2>Level two</h2>
%     }
% }
%
<%once>
use v5.10.1;
</%once> 
```

如果我将 $value 设置为 1，我得到 h1 部分；将其设置为 2 给了我 h2 部分。

# wordpress - 将带有参数的 URL 重定向到没有 -- 加上 Wordpress 的 URL

> ID：11534603
> 
> 赞同：1
> 
> 时间：2012-07-18T05:07:41.237
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, redirect

我重建了一个网站，该网站使用一些自定义 php 来提供带有如下网址的单个商店页面：

```
http://thedomain.com/storedetails.php?storeNum=1 
```

新站点由 Wordpress 提供支持，每个单独的商店都将存在于一个命名的子目录中，如下所示：

```
http://thedomain.com/stores/gothamcity 
```

我一直在尝试在stackoverflow上找到的解决方案，这些解决方案似乎都是对此的变体：[301 Redirect of old url with parameters to a path without parametes](https://stackoverflow.com/questions/7277154/301-redirect-of-old-url-with-parameters-to-a-path-without-parametes)

这是一个例子：

```
RewriteCond %{QUERY_STRING} ^storeNum=18$ [NC]
RewriteRule ^/storedetails\.php$ http://www.thedomain.com/stores/gothamcity? [L,R=301] 
```

但到目前为止，没有任何效果。我继续在 Wordpress 中收到“找不到页面”404 错误页面。

我最好的猜测是，Wordpress 的 .htaccess 部分中的某些东西正在抛弃它？以下是它们包括的内容：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:13:09.337

这应该有效：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^storeNum=18$ [NC]
RewriteCond %{HTTP_HOST} .*
RewriteRule ^storedetails\.php http://www.thedomain.com/stores/gothamcity? [L,R=301]

RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我建议您使用 RewriteMap 将商店编号映射到名称。

# html - 带有浮动和可变右键的流畅文本输入

> ID：11534606
> 
> 赞同：2
> 
> 时间：2012-07-18T05:08:00.790
> 
> 标签：html, css

我有一个类似的问题：[CSS：fluid text input with floated-right button](https://stackoverflow.com/questions/10126031/css-fluid-text-input-with-floated-right-button)，我特别喜欢这个解决方案：http: [//jsfiddle.net/t7tgJ/3/](http://jsfiddle.net/t7tgJ/3/)

但是，就我而言，不同的按钮有不同的文本，所以我不能使用固定宽度。此外，按钮中的文本也会更改（提交时）。

规格：一个文本字段和一个按钮在一行上。按钮应该`float: right`和文本字段应该始终是`container - button.width - paddings - margins`. 如果没有 Javascript，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:04:08.517

我在 JSfiddle 玩过。我已经使用了仅定位版本。这可能会有所帮助。它接近但尚未完成。我希望这有帮助。

[http://jsfiddle.net/t7tgJ/105/](http://jsfiddle.net/t7tgJ/105/)

# html - 如何在 div 列中放置滚动框？

> ID：11534614
> 
> 赞同：0
> 
> 时间：2012-07-18T05:09:19.513
> 
> 标签：html

我的 Div Column ID 的内容中有一张图片。此列位于中间。

中间 div 列 ID 内的图像是一本书。我希望一个文本框能够移动到图书图像顶部的这个中间 div 列。我想不明白。

这是我中间部分的 HTML 代码。

```
 <div id="middle">
        <img src="http://img819.imageshack.us/img819/1369/bookbf.png"/>

</div> 
```

这是我中间部分的 CSS 代码

```
div#middle {
    padding: 0px 30px 5px 160px;
    margin: 0px;
    background-color: transparent;} 
```

如果您仍然无法弄清楚我想要实现的目标，请考虑将文本框放置在该书的右页上，该文本框位于我的 div 列中。

谈到css，我是一个完整的新手，所以请用外行的术语概述我需要添加什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:21:05.207

如果你把它会工作

```
background: url('http://img819.imageshack.us/img819/1369/bookbf.png'); 
```

在 css 文件中。在这种情况下，`<img>`不再需要该标签。

这样一来，书本图像将成为 div 的背景，因此文本框将自动位于其上方。

也许我没有完全理解你的问题，上面的代码对你没有帮助？如果是这样，请在我的答案中添加评论。

# javascript - Linkedin 是否提供用于公司搜索的 JavaScript API？

> ID：11534622
> 
> 赞同：4
> 
> 时间：2012-07-18T05:10:31.060
> 
> 标签：javascript, api, linkedin

我只用 JavaScript 编写一个小部件，并试图避免任何服务器端脚本。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T05:32:39.887

[JavaScript API](https://developer.linkedin.com/javascript)没有预先构建的[公司搜索](https://developer.linkedin.com/documents/company-search)方法。您需要通过该方法提出公司搜索请求，例如：`IN.API.Raw()`

```
IN.API.Raw('/company-search?keywords=LinkedIn')
  .result(function(value) {
    alert(JSON.stringify(value));
  })
  .error(function(error) {
    alert(JSON.stringify(error));
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:13:24.193

就在这里。

这是公司搜索的文档； [文档](http://developer.linkedin.com/documents/profile-fields)

[链接到 API](http://developer.linkedin.com/)

# cakephp - 为什么当我点击刷新时 CakePHP 加载如此缓慢？

> ID：11534626
> 
> 赞同：0
> 
> 时间：2012-07-18T05:10:36.800
> 
> 标签：cakephp

每当我使用 CakePHP 进行开发时，当我提神时它会很慢。但是，当我打开一个新标签并转到同一页面时，它加载得相当不错。它加载太慢以至于达到超时。当我刷新页面时，它一直挂着。

我不认为这是我的数据库，但是，我不确定。我通常只是进行 CSS 更改。我怎样才能加快速度？

# php - 想知道如何为一个赛季的足球池设置我的数据库

> ID：11534630
> 
> 赞同：0
> 
> 时间：2012-07-18T05:11:00.813
> 
> 标签：php, mysql

完全是新手，但我认为这是一个很好的学习项目。

我想为我和一些朋友建立一个足球赛季预测池。我希望每周和整个赛季都有结果。

我当时的想法是，我会在本赛季的每个星期都有一张桌子。它需要跟踪那周的每场比赛的主队和客队。然后每周为每个玩家挑选另一张桌子。

这是否有意义，或者我应该将整个赛季放在一个表格中，在这种情况下我必须将第 # 周添加为另一列？

非常感谢任何关于如何开始的一般建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:47:42.007

将整个季节放在一张表中并在其中添加周列的更好选择。并且只查询一个表很容易，在其他情况下，您必须每周查询 4 ​​或 5 个不同的表，如果您有不同的季节也像 2012 年、2013 年等，那么创建一个单独的季节表并将其链接到例如周表

```
season table columns
 id,season_name,start_date,end_date,publish

week table
 id,season_id,game_date,team1,team2 
```

# javascript - Onclick 事件动态构建 div 并将其附加到现有 div（jquery 或其他任何欢迎的东西）

> ID：11534631
> 
> 赞同：0
> 
> 时间：2012-07-18T05:11:05.457
> 
> 标签：javascript, jquery, html, dynamic-html

我有一个以下格式的 div。1.如何将它添加到现有的 div 中。我是否创建一个单独的 html 文件，然后使用 jquery 添加它？或者我应该将它附加到一个 var 中，然后将它附加到 div 中。请建议一种方法来附加并创建 div，然后将其附加到另一个 div 中（我知道其 id）

```
<div>
  <table>
    <tr><td></td><td></td><td></td>
    </tr>
  </table>
  <table>
    <tr><td></td><td></td>
    </tr>
    <tr><td></td><td></td><td></td><td></td>
    </tr>
  </table>
  <table>
    <tr><td></td>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:20:19.670

您可以尝试这样的事情（使用 jQuery）：

**HTML：**

```
<div id="content" style="display: none;">
  <div>
    <table>
      <tr>text here and then some input tag
      </tr>
    </table>
    <table>
      <tr>text here and then some input tag
      </tr>
      <tr>text here and then some input tag
      </tr>
    </table>
    <table>
      <tr>text here and then some input tag
      </tr>
    </table>
  </div>
</div>

<div id="receiver1" style="background: #FF0000;"></div>
<div id="receiver2" style="background: #00FF00;"></div>
<div id="receiver3" style="background: #0000FF;"></div> 
```

**JS：**

```
$(function(){
    var theContent = $( "#content" ).html();
    $( "#receiver1" ).html( theContent );
    $( "#receiver2" ).html( theContent );
    $( "#receiver3" ).html( theContent );
}); 
```

您可以在此处查看示例：http: [//jsfiddle.net/3hm6N/1/](http://jsfiddle.net/3hm6N/1/)

当然，您可以使用 Greg Pettit 所说的方法。另一件事，我没有看到它，但是您的表格格式错误，因为标签里面应该有`<td>`s 或`<th>`s 。

# c# - 事件背后的 Dotnet nuke 代码未执行

> ID：11534634
> 
> 赞同：2
> 
> 时间：2012-07-18T05:11:40.843
> 
> 标签：c#, asp.net, .net, dotnetnuke

我有现有模块，其中我修改了一个包含一些 HTML 数据的用户控件。这在我的页面上显示得很好。

现在，我想执行按钮单击事件。我的代码如下。

```
User Control .ascx Page
<%@ Control Language="C#" Inherits="BrownBagMarketing.Modules.Maytronics.ViewMaytronics"
    AutoEventWireup="true" CodeBehind="ViewMaytronics.ascx.cs" %>

..... HTML Code....

<asp:LinkButton ID="lnkViewAll" Text="View All" runat="server" onclick="lnkViewAll_Click">
</asp:LinkButton>

---- User Control Code Behind .ascx.cs Page
namespace BrownBagMarketing.Modules.Maytronics
{
    public partial class ViewMaytronics : PortalModuleBase
    {
        protected void Page_Load(object sender, System.EventArgs e)
        {
            if (!IsPostBack)
            {
                //Response.Write("Test Event......");   
            }
        }
        protected void lnkViewAll_Click(object sender, System.EventArgs e)
        {

        }

    }
} 
```

即使我在页面加载事件中显示 Response.write 是否正在执行，但它没有执行。当我删除链接按钮的 onclick 事件时，页面的其他 HTML 部分显示正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:24:18.047

现在我将使用以下代码。但没有得到我的确切答案。

任何人都可以解决这个问题，这样我就不会在页面后面的代码上编写代码。

```
<script runat="server">
   protected void Page_Load(object sender, System.EventArgs e)
{
    if (!IsPostBack)
    {
        dlFeatures.DataSource = ClsProduct.GetAllFeatures();
        dlFeatures.DataBind();
    }
    //Response.Write("abc123458");
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:14:33.040

你在修改什么模块？它是“wap”模块（Web 应用程序项目），意味着它被编译成 DLL 吗？如果是这样，您将需要在进行代码隐藏更改后重新编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T10:44:22.910

确保您的 ascx 引用了您的代码隐藏文件 - 仔细检查名称。

ASCX 示例：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="QuizBackend.ascx.cs" Inherits="Bonitas.SalesRepQuiz.QuizBackend" %> 
```

背后的代码

```
namespace Bonitas.SalesRepQuiz
{
   public partial class QuizBackend : PortalModuleBase
   {
        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);
            btnYourButton.Click += btnYourButton_Click;
        }

        protected void btnYourButton_Click(object sender, EventArgs e)
        {
            try
            {
                // Your code
            }
            catch (Exception ex)
            {
                Exceptions.ProcessModuleLoadException(this, ex);
            }
        }
    }
} 
```

# perl - 将 Moose 属性存储在祝福的 arrayref 中，以便进行紧凑存储？

> ID：11534637
> 
> 赞同：1
> 
> 时间：2012-07-18T05:12:12.080
> 
> 标签：perl, moose

{Moose,Mouse,Moo} 对象通常转换为祝福的 hashref。它可以改用blessed arrayref 来进行紧凑存储吗？想想像 bless({long_attribute_name=>1, another_long_attribute_name=>2, and_a_bunch_of_these=>3}, 'SomeClass') 与 bless([1, 2, 3, ...], 'SomeClass') 这样的对象。由于使用该类的代码将通过访问器访问属性，并且访问器都是在 Mo[ou]* 中生成的，理论上这应该是可能的，对吗？

或者，任何其他紧凑存储对象的策略？如果可能的话，我更喜欢使用 Mo[ou]*。我打算将大量对象加载到内存中。（另外，这可能是另一个问题，其中一些对象是 DateTime 对象，上述策略无效，因为 DateTime 代码直接访问属性。）

# c# - 如何从 C# 使用 Magento REST API

> ID：11534650
> 
> 赞同：5
> 
> 时间：2012-07-18T05:13:30.187
> 
> 标签：c#, api, rest, magento

我在哪里可以找到展示如何使用 C# 连接到 Magento REST API 的示例？

我发现是一个 php，除了一点点我也想不通。

使用我在网上找到的 Dropbox OAuth 示例，我尝试使其适用于 Magento：

```
private void button1_Click(object sender, RoutedEventArgs e) 
{ 
    var consumerKey = “xxxxxxxxxxxxx”; 
    var consumerSecret = “xxxxxxxxxxxxxxxx”;

    var uri = new Uri("http://www.MagentoWebsite.com/oauth/token");

    // Generate a signature 
    OAuthBase oAuth = new OAuthBase(); 
    string nonce = oAuth.GenerateNonce(); 
    string timeStamp = oAuth.GenerateTimeStamp(); 
    string parameters; 
    string normalizedUrl; 
    string signature = oAuth.GenerateSignature(uri, consumerKey, consumerSecret, 
    String.Empty, String.Empty, “GET”, timeStamp, nonce, OAuthBase.SignatureTypes.HMACSHA1, 
    out normalizedUrl, out parameters);

    signature = HttpUtility.UrlEncode(signature);

    StringBuilder requestUri = new StringBuilder(uri.ToString()); 
    requestUri.AppendFormat("?oauth_consumer_key={0}&", consumerKey); 
    requestUri.AppendFormat("oauth_nonce={0}&", nonce); 
    requestUri.AppendFormat("oauth_timestamp={0}&", timeStamp); 
    requestUri.AppendFormat("oauth_signature_method={0}&", “HMAC-SHA1"); 
    requestUri.AppendFormat("oauth_version={0}&", “1.0"); 
    requestUri.AppendFormat("oauth_signature={0}", signature);

    var request = (HttpWebRequest)WebRequest.Create(new Uri(requestUri.ToString())); 
    request.Method = WebRequestMethods.Http.Get;

    var response = request.GetResponse();

    var queryString = new StreamReader(response.GetResponseStream()).ReadToEnd();

    var parts = queryString.Split(’&amp;’); 
    var token = parts[1].Substring(parts[1].IndexOf(’=’) + 1); 
    var tokenSecret = parts[0].Substring(parts[0].IndexOf(’=’) + 1);

    queryString = String.Format("oauth_token={0}", token); 
    var authorizeUrl = “http://www.MagentoWebsite.com/admin/oauth_authorize?”+queryString; 
    Process.Start(authorizeUrl); 
} 
```

不幸的是，这会返回`BAD REQUEST`响应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-10T18:01:42.350

我最近为 Magento 启动了一个 C# REST API 客户端项目，可能会对您有所帮助：

[https://github.com/nickvane/Magento-RestApi](https://github.com/nickvane/Magento-RestApi)

它还没有完成功能，但是实现了 oauth 身份验证。该代码使用支持 oauth 身份验证的[restsharp 。](http://restsharp.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-13T10:43:21.330

我有同样的问题，但找不到答案，因此我花了一天时间让它工作。我在这里分享我的代码，我希望它能帮助该功能的其他人。

在 aspx 页面中使用以下代码获取 oAuth 访问权限

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string oauth_token = Request.QueryString["oauth_token"];
        string oauth_verifier = Request.QueryString["oauth_verifier"];

        if (string.IsNullOrEmpty(oauth_token) || string.IsNullOrEmpty(oauth_verifier))
        {
            BeginAuthorization();
        }
        else
        {
            Authorize(oauth_token,oauth_verifier);
        }
    }

    private void Authorize(string oauth_token, string oauth_verifier)
    {
        var uri = new Uri(MagentoServer + "/oauth/token");
        string oauth_token_secret = (string)Session["oauth_token_secret"];

        OAuthBase oAuth = new OAuthBase();
        string nonce = oAuth.GenerateNonce();
        string timeStamp = oAuth.GenerateTimeStamp();
        string parameters;
        string normalizedUrl;
        string signature = oAuth.GenerateSignature(uri, ConsumerKey, ConsumerSecret,
        oauth_token,oauth_token_secret, "GET", timeStamp, nonce, OAuthBase.SignatureTypes.PLAINTEXT,
        out normalizedUrl, out parameters);

        StringBuilder sb = new StringBuilder("OAuth ");
        sb.AppendFormat("oauth_verifier=\"{0}\",", oauth_verifier);
        sb.AppendFormat("oauth_token=\"{0}\",", oauth_token);
        sb.AppendFormat("oauth_version=\"{0}\",", "1.0");
        sb.AppendFormat("oauth_signature_method=\"{0}\",", "PLAINTEXT");
        sb.AppendFormat("oauth_nonce=\"{0}\",", nonce);
        sb.AppendFormat("oauth_timestamp=\"{0}\",", timeStamp);
        sb.AppendFormat("oauth_consumer_key=\"{0}\",", ConsumerKey);
        sb.AppendFormat("oauth_signature=\"{0}\"", signature);

        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Headers[HttpRequestHeader.Authorization] = sb.ToString();
        request.ContentType = "text/xml";
        request.Accept = "text/xml";
        request.KeepAlive = true;
        request.Method = "POST";

        try
        {
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {

                Stream responseStream = response.GetResponseStream();
                StreamReader responseReader = new StreamReader(responseStream);
                string text = responseReader.ReadToEnd();
                try
                {
                    Dictionary<String, string> responseDic = GetDictionaryFromQueryString(text);

                    string token = responseDic.First(q => q.Key == "oauth_token").Value;
                    string secret = responseDic.First(q => q.Key == "oauth_token_secret").Value;

                    Configuration objConfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
                    AppSettingsSection objAppsettings = (AppSettingsSection)objConfig.GetSection("appSettings");
                    //Edit
                    if (objAppsettings != null)
                    {
                        objAppsettings.Settings["Magento.Token"].Value = token;
                        objAppsettings.Settings["Magento.TokenSecret"].Value = secret;
                        objConfig.Save();
                    }

                    errorLabel.Text = "Done";
                    errorLabel.ForeColor = System.Drawing.Color.Green;

                }
                catch (Exception ex)
                {
                    errorLabel.Text = "Exchanging token failed.<br>Response text = " + text + "<br>Exception = " + ex.Message;
                }
            }
        }
        catch (WebException ex)
        {
            var responseStream = ex.Response.GetResponseStream();
            StreamReader responseReader = new StreamReader(responseStream);
            string resp = responseReader.ReadToEnd();
            errorLabel.Text = resp;
        }

    }

    private void BeginAuthorization()
    {
        string CallbackUrl = Server.UrlEncode(Request.Url.AbsoluteUri);
        var uri = new Uri(MagentoServer + "/oauth/initiate?oauth_callback=" + CallbackUrl);

        OAuthBase oAuth = new OAuthBase();
        string nonce = oAuth.GenerateNonce();
        string timeStamp = oAuth.GenerateTimeStamp();
        string parameters;
        string normalizedUrl;
        string signature = oAuth.GenerateSignature(uri, ConsumerKey, ConsumerSecret,
        String.Empty, String.Empty, "GET", timeStamp, nonce, OAuthBase.SignatureTypes.PLAINTEXT,
        out normalizedUrl, out parameters);

        StringBuilder sb = new StringBuilder("OAuth ");
        sb.AppendFormat("oauth_callback=\"{0}\",", CallbackUrl);
        sb.AppendFormat("oauth_version=\"{0}\",", "1.0");
        sb.AppendFormat("oauth_signature_method=\"{0}\",", "PLAINTEXT");
        sb.AppendFormat("oauth_nonce=\"{0}\",", nonce);
        sb.AppendFormat("oauth_timestamp=\"{0}\",", timeStamp);
        sb.AppendFormat("oauth_consumer_key=\"{0}\",", ConsumerKey);
        sb.AppendFormat("oauth_signature=\"{0}\"", signature);

        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Headers[HttpRequestHeader.Authorization] = sb.ToString();
        request.ContentType = "text/xml";
        request.Accept = "text/xml";
        request.KeepAlive = true;
        request.Method = "GET";

        try
        {
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {

                Stream responseStream = response.GetResponseStream();
                StreamReader responseReader = new StreamReader(responseStream);
                string text = responseReader.ReadToEnd();
                try
                {
                    Dictionary<String, string> dic = GetDictionaryFromQueryString(text);

                    string oauth_token = dic.First(q => q.Key == "oauth_token").Value;
                    string oauth_token_secret = dic.First(q => q.Key == "oauth_token_secret").Value;
                    Session["oauth_token_secret"] = oauth_token_secret;
                    string redirectUrl = MagentoServer + "/index.php/admin/oauth_authorize?oauth_token=" + oauth_token + "&oauth_verifier=" +
                        oauth_token_secret;
                    Response.Redirect(redirectUrl);

                }
                catch (Exception ex)
                {
                    errorLabel.Text = "Parsing request token failed.<br>Response text = " + text + "<br>Exception = " + ex.Message;
                }

            }
        }
        catch (WebException ex)
        {
            var responseStream = ex.Response.GetResponseStream();
            StreamReader responseReader = new StreamReader(responseStream);
            string resp = responseReader.ReadToEnd();
            errorLabel.Text = resp;
        }
    }

    private static Dictionary<string, string> GetDictionaryFromQueryString(string queryString)
    {
        string[] parts = queryString.Split('&');
        Dictionary<String, string> dic = new Dictionary<string, string>();
        foreach (var part in parts)
        {
            dic.Add(part.Split('=')[0], part.Split('=')[1]);
        }
        return dic;
    }

    #region Settings

    string MagentoServer
    {
        get
        {
            return ConfigurationManager.AppSettings["Magento.Server"];
        }
    }

    string ConsumerKey
    {
        get
        {
            return ConfigurationManager.AppSettings["Magento.ConsumerKey"];
        }
    }

    string ConsumerSecret
    {
        get
        {
            return ConfigurationManager.AppSettings["Magento.ConsumerSecret"];
        }
    }

    #endregion
} 
```

在类文件中添加以下代码

```
public class ApiClient
{

    public ApiClient(string magentoServer, string consumerKey, string consumerSecret, string accessToken, string accessTokenSeccret)
    {
        MagentoServer = magentoServer;
        ConsumerKey = consumerKey;
        ConsumerSecret = consumerSecret;
        AccessToken = accessToken;
        AccessTokenSecret = accessTokenSeccret;
    }

    #region Request

    HttpWebRequest CreateAuthorizedRequest(string url, string requestMethod,ApiFilter filter)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url + "?" + filter.ToString());

        OAuthBase oAuth = new OAuthBase();
        string nonce = oAuth.GenerateNonce();
        string timeStamp = oAuth.GenerateTimeStamp();
        string parameters;
        string normalizedUrl;
        string signature = oAuth.GenerateSignature(new Uri(url), ConsumerKey, ConsumerSecret,
        AccessToken, AccessTokenSecret, requestMethod, timeStamp, nonce, OAuthBase.SignatureTypes.PLAINTEXT,
        out normalizedUrl, out parameters);

        StringBuilder sb = new StringBuilder("OAuth ");
        sb.AppendFormat("oauth_token=\"{0}\",", AccessToken);
        sb.AppendFormat("oauth_version=\"{0}\",", "1.0");
        sb.AppendFormat("oauth_signature_method=\"{0}\",", "PLAINTEXT");
        sb.AppendFormat("oauth_nonce=\"{0}\",", nonce);
        sb.AppendFormat("oauth_timestamp=\"{0}\",", timeStamp);
        sb.AppendFormat("oauth_consumer_key=\"{0}\",", ConsumerKey);
        sb.AppendFormat("oauth_signature=\"{0}\"", signature);

        request.Headers[HttpRequestHeader.Authorization] = sb.ToString();
        request.Method = requestMethod;

        //request.ContentType = "application/json";
        request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";//application/json,
        request.KeepAlive = true;

        return request;
    }

    string FetchRequest(HttpWebRequest request)
    {
        try
        {
            string responseText = string.Empty;
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                using (Stream responseStream = response.GetResponseStream())
                {
                    using (StreamReader responseReader = new StreamReader(responseStream))
                    {
                        responseText = responseReader.ReadToEnd();
                        return responseText;
                    }
                }
            }

            return responseText;
        }
        catch (WebException ex)
        {
            var responseStream = ex.Response.GetResponseStream();
            StreamReader responseReader = new StreamReader(responseStream);
            string responseText = responseReader.ReadToEnd();
            throw new MagentoApiException(responseText,ex.Status);
        }
    }

    #endregion

    #region Public properties

    string MagentoServer { get; set; }

    string ConsumerKey { get; set; }

    string ConsumerSecret { get; set; }

    string AccessToken { get; set; }

    string AccessTokenSecret { get; set; }

    #endregion

}

public class ApiFilter
{
    public ApiFilter()
    {
        filterDescriptions = new List<FilterDescription>();
    }

    public int? Page { get; set; }
    public int? Limit { get; set; }
    public List<FilterDescription> filterDescriptions;

    public const string Type = "rest";

    public void AddFilter(string column, FilterType filterType, string value)
    {
        filterDescriptions.Add(new FilterDescription()
        {
            Column = column,
            FilterType = filterType,
            Value = value
        });
    }

    public override string ToString()
    {
        StringBuilder sb = new StringBuilder();
        sb.AppendFormat("type={0}", Type);

        if (Page.HasValue)
            sb.AppendFormat("&page={0}", Page.Value);
        if (Limit.HasValue)
            sb.AppendFormat("&limit={0}", Limit.Value);

        int counter = 1;
        foreach (var filter in filterDescriptions)
        {

            sb.AppendFormat("&filter[{0}][attribute]={1}&filter[{2}][{3}]={4}", counter, filter.Column, counter, filter.FilterType, filter.Value);
            counter++;
        }

        return sb.ToString();
    }
}

public class FilterDescription
{
    public string Column { get; set; }
    public FilterType FilterType { get; set; }
    public string Value { get; set; }
}

public enum FilterType
{
    /// <summary>
    /// Not Equal To
    /// </summary>
    neq,
    /// <summary>
    /// equals any of
    /// </summary>
    @in,
    /// <summary>
    /// not equals any of
    /// </summary>
    nin,
    /// <summary>
    /// greater than
    /// </summary>
    gt,
    /// <summary>
    /// less than
    /// </summary>
    lt

}

public class MagentoApiException : Exception
{

    public MagentoApiException(string responseText, WebExceptionStatus status)
    {
        ResponseText = responseText;
        Status = status;
    }

    public string ResponseText { get; set; }
    public WebExceptionStatus Status { get; set; }
} 
```

也不要忘记将[https://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs](https://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs)添加到项目中

可以使用了。从 api 读取：

```
var request = CreateAuthorizedRequest(MagentoServer + "/api/rest/products", "get", new ApiFilter() {Page = 1 });
            var responseText = FetchRequest(request); 
```

Magento REST Api 文档可以在[这里找到](http://www.magentocommerce.com/api/rest/introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:17:32.217

您可以使用 Spring.NET Social 快速创建客户端 REST API： [http ://www.springframework.net/social/](http://www.springframework.net/social/)

Magento 使用类似于 Twitter 的 OAuth 1.0a 身份验证。您可以在这里查看 Twitter 实现： [http ://www.springframework.net/social-twitter/](http://www.springframework.net/social-twitter/)

以及带有分步说明的相关文档： [http ://www.springframework.net/social/refdoc/implementing.html](http://www.springframework.net/social/refdoc/implementing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T22:09:38.727

我不确定这是否有帮助，但是一旦我能够从 Magento 获取 oauth_token 和 oauth_token_secret（我使用 PHP Magento 示例来获取它），我就能够通过将所有内容放入 requestUri 中来查询 REST API标题。

您的示例帮助我使大部分代码正确，并对其进行了一些修改（这里有一个小片段）：

```
 StringBuilder sb = new StringBuilder("OAuth ");
            sb.AppendFormat("oauth_version={0},", "1.0");
            sb.AppendFormat("oauth_signature_method={0},", "HMAC-SHA1");
            sb.AppendFormat("oauth_nonce={0},", nonce);
            sb.AppendFormat("oauth_timestamp={0},", timeStamp);
            sb.AppendFormat("oauth_consumer_key={0},", consumerKey);
            sb.AppendFormat("oauth_token={0},", oauth_token);
            sb.AppendFormat("oauth_signature={0}", sig);

            Debug.WriteLine(sb.ToString());
            var request = (HttpWebRequest)WebRequest.Create((resourceUrl));
            request.Headers[HttpRequestHeader.Authorization] = sb.ToString();
            request.ContentType = "text/xml";
            request.Accept = "text/xml";
            request.KeepAlive = true;
            //request.Method = WebRequestMethods.Http.Get;
            request.Method = "GET";

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            Debug.WriteLine(response.StatusCode);
            Debug.WriteLine(response.Server);
            if (response.StatusCode == HttpStatusCode.OK)
            {

                Stream responseStream = response.GetResponseStream();
                StreamReader responseReader = new StreamReader(responseStream);
                XmlDocument xmlDoc = new XmlDocument();
                xmlDoc.Load(response.GetResponseStream());
                Dts.Variables["User::XML_Response"].Value = xmlDoc.OuterXml.ToString();

            } 
```

这有帮助吗？

# oracle - 从 JSP 文件运行 Oracle 表单应用程序

> ID：11534654
> 
> 赞同：2
> 
> 时间：2012-07-18T05:13:58.110
> 
> 标签：oracle, jsp, jakarta-ee, oracle10g

我有一个在 Oracle Forms (10g) 上制作的完整定制应用程序，并且我有 .fmb 和 .fmx 文件，现在我面临的问题是我必须从我的 JSP 页面（用于登录用户）打开 Oracle Form Application ）。我的 JSP 页面只是一个简单的页面，我将它放在了路径中

```
[C:\DevSuiteHome2\forms\j2ee\formsapp\formsweb] 
```

我从浏览器运行它

```
[http://localhost:port/forms/index.jsp]. 
```

如何从这个 JSP 页面启动我的应用程序？您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-17T16:33:27.337

调用 Oracle 表单首先需要启动 Weblogic，然后可以通过 URL 调用表单，可以在浏览器中进行测试，例如：

[http://machine_name:port/forms/frmservlet?&form=form_name.fmx](http://machine_name:port/forms/frmservlet?&form=form_name.fmx)

示例： [http://ibmcygp:7001/forms/frmservlet?&form=MAIN.fmx](http://ibmcygp:7001/forms/frmservlet?&form=MAIN.fmx)

# git - 像 Subversion 中的 Git 关键字替换？

> ID：11534655
> 
> 赞同：51
> 
> 时间：2012-07-18T05:14:07.930
> 
> 标签：git, svn, version-control, version-control-keywords

我曾经在 Subversion/SVN 下工作，并且立即使用了称为关键字替换的好功能。只需放入源文件，例如：

```
/*
 *   $Author: ivanovpv $
 *   $Rev: 42 $
 *   $LastChangedDate: 2012-05-25 21:47:42 +0200 (Fri, 25 May 2012) $
 */ 
```

并且每次 Subversion 都用实际的关键字（Author、Rev、LastChangedDate）替换关键字。

前段时间我被迫迁移到 Git，只是想知道 Git 中是否有类似于 Subversion 的关键字替换的东西？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-18T06:19:37.150

Git 没有提供开箱即用的这个功能。但是，Git Book 中有一个章节是关于[自定义 Git](https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#Keyword-Expansion)的，其中一个示例是如何使用 git 属性来实现类似的结果。

> 事实证明，您可以编写自己的过滤器，以便在提交/签出时在文件中进行替换。这些被称为“清洁”和“涂抹”过滤器。在`.gitattributes`文件中，您可以为特定路径设置过滤器，然后设置脚本，在文件被检出（“涂抹”）和暂存（“干净”）之前处理文件。这些过滤器可以设置为做各种有趣的事情。

甚至还有一个例子`$LastChangedDate: $`：

> 另一个有趣的例子是`$Date$`关键字扩展，RCS 风格。要正确执行此操作，您需要一个小脚本，该脚本采用文件名，计算该项目的最后提交日期，并将日期插入文件中。这是一个执行此操作的小型 Rub​​y 脚本：
> 
> ```
> #! /usr/bin/env ruby
> data = STDIN.read
> last_date = `git log --pretty=format:"%ad" -1`
> puts data.gsub('$Date$', '$Date: ' + last_date.to_s + '$') 
> ```
> 
> 脚本所做的就是从命令中获取最新的提交日期，将其`git log`粘贴到`$Date$`它在标准输入中看到的任何字符串中，然后打印结果——用你最熟悉的任何语言都应该很简单。你可以命名这个文件 `expand_date`并把它放在你的路上。现在，您需要在 Git 中设置一个过滤器（调用它`dater`）并告诉它使用您的`expand_date`过滤器在结帐时涂抹文件。您将使用 Perl 表达式在提交时对其进行清理：
> 
> ```
> $ git config filter.dater.smudge expand_date
> $ git config filter.dater.clean 'perl -pe "s/\\\$Date[^\\\$]*\\\$/\\\$Date\\\$/"' 
> ```
> 
> 这个 Perl 片段会删除它在`$Date$`字符串中看到的任何内容，以回到您开始的地方。现在您的过滤器已准备就绪，您可以通过为该文件设置一个与新过滤器相关的 Git 属性并使用您的`$Date$`关键字创建一个文件来测试它：
> 
> ```
> date*.txt filter=dater
> $ echo '# $Date$' > date_test.txt If you commit 
> ```
> 
> 这些更改并再次检查文件，您会看到正确替换的关键字：
> 
> ```
> $ git add date_test.txt .gitattributes
> $ git commit -m "Testing date expansion in Git"
> $ rm date_test.txt
> $ git checkout date_test.txt
> $ cat date_test.txt
> # $Date: Tue Apr 21 07:26:52 2009 -0700$ 
> ```
> 
> 您可以看到这种技术对于定制应用程序有多么强大。但是，您必须小心，因为该`.gitattributes`文件已提交并随项目一起传递，但驱动程序（在本例中`dater`为 ）不是，因此它不会在任何地方工作。当您设计这些过滤器时，它们应该能够优雅地失败并让项目仍然正常工作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-21T19:13:44.343

## 解决方案

好吧，您可以自己轻松实现这样的功能。

基本上我将提交命令嵌入到了一个 shell 脚本中。此脚本将首先替换所需的宏，然后提交更改。该项目由两个文件组成：

## 内容？

`keysub`，一个 bash shell 脚本和`keysub.awk`一个 awk 脚本来替换特定文件中的关键字。第三个文件是一个配置文件，其中包含应该替换的值（除了提交计数和时间戳等变量内容）。

## 你如何使用它？

您使用相同的选项调用`keysub`而不是提交。`-m`or选项应该在`-a`任何其他提交选项之前。一个新选项（应该始终放在第一位）是`-f`将配置文件作为值。例子：

```
$ git add 'someJavaFile.java'
$ keysub -m 'fixed concurrent thread issue'
$ git push 
```

或者

```
$ git -f .myfile.cnf -m 'enhanced javadoc entries' 
```

## 键子

```
#!/bin/bash

# 0 -- functions/methods
#########################
# <Function description>
function get_timestamp () {
  date    # change this to get a custom timestamp
}

# 1 -- Variable declarations
#############################
# input file for mapping
file=".keysub.cnf"
timestamp=$(get_timestamp)

# 2 -- Argument parsing and flag checks
########################################

# Parsing flag-list
while getopts ":f:m:a" opt;
do
  case $opt in
    f) file=${OPTARG}
       ;;
    a) echo 'Warning, keyword substitution will be incomplete when invoked'
       echo 'with the -a flag. The commit message will not be substituted into'
       echo 'source files. Use -m "message" for full substitutions.'
       echo -e 'Would you like to continue [y/n]? \c'
       read answer
       [[ ${answer} =~ [Yy] ]] || exit 3
       unset answer
       type="commit_a"
       break
       ;;
    m) type="commit_m"
       commitmsg=${OPTARG}
       break
       ;;
   \?) break
       ;;
  esac
done
shift $(($OPTIND - 1))

# check file for typing
if [[ ! -f ${file} ]]
then
  echo 'No valid config file found.'
  exit 1
fi

# check if commit type was supplied
if [[ -z ${type} ]]
then
  echo 'No commit parameters/flags supplied...'
  exit 2
fi

# 3 -- write config file
#########################
sed "
  /timestamp:/ {
    s/\(timestamp:\).*/\1${timestamp}/
  }
  /commitmsg:/ {
    s/\(commitmsg:\).*/\1${commitmsg:-default commit message}/
  }
" ${file} > tmp

mv tmp ${file}

# 4 -- get remaining tags
##########################
author=$(grep 'author' ${file} | cut -f1 -d':' --complement)

# 5 -- get files ready to commit
#################################
git status -s | grep '^[MARCU]' | cut -c1-3 --complement > tmplist

# 6 -- invoke awk and perform substitution
###########################################
# beware to change path to your location of the awk script
for item in $(cat tmplist)
do
  echo ${item}
  awk -v "commitmsg=${commitmsg}" -v "author=${author}" \
      -v "timestamp=${timestamp}" -f "${HOME}/lib/awk/keysub.awk" ${item} \
      > tmpfile
  mv tmpfile ${item}
done
rm tmplist

# 5 -- invoke git commit
#########################
case ${type} in
  "commit_m") git commit -m "${commitmsg}" "$@"
              ;;
  "commit_a") git commit -a "$@"
              ;;
esac

# exit using success code
exit 0 
```

## keysub.awk

```
# 0 BEGIN
##########
BEGIN {
  FS=":"
  OFS=": "
}

# 1 parse source files 
########################
# update author
$0 ~ /.*\$Author.*\$.*/ {
  $2=author " $"
}

# update timestamp
$0 ~ /.*\$LastChangedDate.*\$.*/ {
  $0=$1
  $2=timestamp " $"
}

# update commit message
$0 ~ /.*\$LastChangeMessage.*\$.*/ {
  $2=commitmsg " $"
}

# update commit counts
$0 ~ /.*\$Rev.*\$.*/ {
  ++$2
  $2=$2 " $"
}

# print line
{
  print
} 
```

## 配置文件

```
author:ubunut-420
timestamp:Fri Jun 21 20:42:54 CEST 2013
commitmsg:default commit message 
```

## 评论

我已经尝试过足够好的文档，以便您可以轻松地实现它并根据您自己的个人需求对其进行修改。请注意，您可以为宏指定任何您想要的名称，只要您在源代码中对其进行修改即可。我还打算让扩展脚本相对容易，你应该能够相当容易地添加新的宏。如果你对扩展或修改脚本感兴趣，你可能也想看看 .git 目录，那里应该有很多信息可以帮助增强脚本，因为我没有时间调查该文件夹。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-18T05:20:20.763

可惜不是原生的。

> Git有关键字扩展吗？不建议使用关键字扩展。关键字扩展会导致各种奇怪的问题，而且无论如何都不是真正有用的，尤其是在 SCM 的上下文中。您可以使用自定义脚本在 Git 之外执行关键字扩展。Linux 内核导出脚本执行此操作以在 Makefile 中设置 EXTRA_VERSION 变量。
> 
> 如果你真的想这样做，请参阅 gitattributes(5)。如果您的翻译不可逆（例如 SCCS 关键字扩展），这可能会有问题。（提示：提供的 $Id$-expansion 将 40 个字符的十六进制 blob 对象名称放入 id；您可以使用这样的脚本找出哪些提交包含此 blob。）

阅读他们的文档，附上链接： [关键字扩展](https://git.wiki.kernel.org/index.php/GitFaq#Does_Git_have_keyword_expansion.3F)

# c# - windows 2012 server IIS 8.0中的IIS调试

> ID：11534657
> 
> 赞同：3
> 
> 时间：2012-07-18T05:14:22.837
> 
> 标签：c#, windows, visual-studio-2008, iis

我正在尝试使用 IIS 8.0 调试 Windows Server 2012 中托管的 Web 应用程序。我用代码打开了 VS2008 并附加了进程，但那里没有列出 W3Wp.exe 进程。

在任务管理器中，我可以在**详细信息**选项卡下看到 w3wp.exe，而不是在**Procees**选项卡中。在进程选项卡中列出了 IIS 工作进程。

也检查了所有用户和所有会话

请让我知道如何调试。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:58:23.957

勾选“在所有会话中显示进程”为我显示

# jquery - 包括用于 nivo 滑块的 jQuery 1.7 js 停止我的菜单下拉

> ID：11534658
> 
> 赞同：0
> 
> 时间：2012-07-18T05:14:22.620
> 
> 标签：jquery, joomla, joomla-extensions, joomla2.5

我希望我可以为我最近遇到的一个问题获得一些帮助，同时包括 jquery 1.7.js 来运行 nivo 滑块......这样做让我的大型菜单下拉停止工作......我尝试了所有可能的方法和选项nivo滑块..包括没有冲突的jquery，但仍然不行......当我禁用jquery包含nivo滑块时，巨型菜单下拉开始工作，当我启用它时，巨型菜单停止工作。有没有人遇到过同样的问题，或者可以帮助我再次启动并运行我的网站......它在本地主机上......所以不能发布链接！（我正在使用基于 JA T3 的空白模板）提前谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:53:38.977

两个扩展都使用 JQuery，所以首先要从 Nivo 滑块中删除对 JQuery 的引用，并替换为以下内容：

```
$document =& JFactory::getDocument();
    //If JQuery has not been inserted
    if (!JFactory::getApplication()->get('jquery')) {
          //Insert JQuery from url
          JFactory::getApplication()->set('jquery', true);
          $document->addScript('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    }
} 
```

这是我们一直用来确保 JQuery 只插入一次并且没有冲突的方法。我希望这可以帮助你。

问候

# algorithm - 'n' 数字序列的排列

> ID：11534663
> 
> 赞同：0
> 
> 时间：2012-07-18T05:15:21.607
> 
> 标签：algorithm, math, permutation

您可以通过多少种方式排列“n”（1 到 n）个数字的序列，使得在其值表示的索引处没有数字出现？

例如

```
1 can not be at first position
2 can not be at second position
.
.
n can not be at nth position 
```

请给出一个通用的解决方案。也解决它为n = 6。它不是家庭作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:25:19.563

您需要无定点排列，也称为[derangements](http://en.wikipedia.org/wiki/Derangement)。它们数量的公式比可能具有固定点的排列数量的公式稍微复杂一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T05:43:26.980

令 P(n) 为此类数字排列的`n`数量。

```
For 123456....n
Cases are of the form

2*****
3*****
4*****
5*****
.
.
n*****

Now 1 can be anywhere at the rest (n-1) positions.
If 1 is put at the position of the number replacing it...

21****
3*1***
4**1**
.
.
n****1

then first and the replaced numbers are fixed.
Then total cases = (n-1) * P(n-2)

Else if
1 is also restricted not to be at a particular position (positions in above cases)
Then total cases = (n-1) * P(n-1) 
```

所以

P(n) = (P(n-1) + P(n-2)) * (n-1)

P(1) = 0

和 P(2) = 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T14:28:32.563

`n`事物`round(n!/e)`的紊乱（无定点排列）的数量`e`是自然对数的底。这里`round`的意思是最接近的整数函数。这在[Wikipedia 文章](http://en.wikipedia.org/wiki/Derangement)中进行了描述，但其方式可以得到澄清。

对于`n = 6`一个容易计算有`round(264.87...) = 265`混乱。

实际上，您已经[从 MathSE 提出了一个常见问题](https://math.stackexchange.com/q/14666/3111)。

# javascript - 如何在 ARchitectBrower.html Wikiitude SDK for ios 中使用 AR.ImageResource 设置 HTML img src 值

> ID：11534666
> 
> 赞同：1
> 
> 时间：2012-07-18T05:15:43.117
> 
> 标签：javascript, html, ios, wikitude

我正在编辑 Wikitude SDK iOS 提供的 ARchitectBrowser.html，我想知道如何在 AR.ImageResource 中获取图像集

```
bubbleImage = new AR.ImageResource("http://graph.facebook.com/" + jsonObject[id].facebookId + "/picture",{onError:errorLoadingImage}); 
```

并直接放入 HTML img src 属性

```
<img id="imageFooter" src=""/> 
```

在javascript中我有一行像

```
document.getElementById("imageFooter").src = "http://graph.facebook.com/" + jsonObject[id].facebookId + "/picture"; 
```

但我希望将加载到 AR.ImageResource 中的图像设置为 src 属性，这样我就不必加倍处理 HTTP 请求。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:39:38.710

我在 Wikitude 从事 SDK 工作，我们总是很高兴听到开发人员的需求。不幸的是，目前不支持您尝试实现的目标。但是，您有一个有效的观点，我们将在下一个版本中考虑这一点。[如果有一种您希望它应该如何工作的方式，请在此处或在http://forum.wikitude.com/](http://forum.wikitude.com/)上告诉我们。

# c++ - 静默接受 .pfx 证书

> ID：11534671
> 
> 赞同：4
> 
> 时间：2012-07-18T05:16:19.403
> 
> 标签：c++, wix, certificate

这样的问题：我需要在我的安装（WiX 3.5）中导入 .pfx 证书。我需要接受在没有任何（！）用户交互的情况下导入它们，甚至接受（对于构建服务器和测试市场的测试需要如此）

尝试使用标准 WiX 解决方案，`WiXIISExtension`但没有安静（静默）导入的选项。

在 C++ 上尝试了这样的解决方案（来自 wix 中 dll 的延迟自定义操作）：

1.  链`PfxImportCertStore - CertEnumCertificatesStore - CertAddCertificateContextToStore`：证书管理器要求接受...

2.  `CryptUIWizImport`带有标志`CRYPTUI_WIZ_NO_UI`：CryptoAPI 试图访问私钥，经理要求接受...

有没有办法解决这个问题？或者我真的需要写一个定制服务来接受？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:17:32.560

好吧，我解决了我的问题。在我的情况下，它只是用户保护证书的标志。只是我的假人。但是，在这两天里，我意识到：

*   谨慎使用证书导入方法。当您需要使用从文件或从上下文中导入时，您应该了解不同的情况。

*   注意您使用的标志（如果您使用一些示例，则更多）

*   确保您的证书获得批准。

PS如果有人需要导入不同证书的工作代码的好例子，请评论我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-20T15:06:55.147

尝试在根信任位置添加自签名证书时遇到了同样的问题。它提示我安全警告。

[安全警告](https://i.stack.imgur.com/ERFls.png)

使用以下代码，我现在可以在根信任位置静默添加自签名证书。

```
HCERTSTORE hUIRootCertStore = CertOpenStore(CERT_STORE_PROV_SYSTEM, 0, NULL, CERT_SYSTEM_STORE_LOCAL_MACHINE, L"Root");
CRYPTUI_WIZ_IMPORT_SRC_INFO importSrc;
memset(&importSrc, 0, sizeof(CRYPTUI_WIZ_IMPORT_SRC_INFO));
importSrc.dwSize = sizeof(CRYPTUI_WIZ_IMPORT_SRC_INFO);
importSrc.dwSubjectChoice = CRYPTUI_WIZ_IMPORT_SUBJECT_FILE;
importSrc.pwszFileName = L"<certificate file>";
importSrc.pwszPassword = L"<your password>";
importSrc.dwFlags = CRYPT_EXPORTABLE;
bRet = CryptUIWizImport(CRYPTUI_WIZ_NO_UI | CRYPTUI_WIZ_IMPORT_TO_LOCALMACHINE, NULL, NULL, &importSrc, hUIRootCertStore); 
```

如果有其他方法请告诉我。

# spring-mvc - 在spring mvc中修改dispatcher-servlet.xml后应用程序不工作

> ID：11534677
> 
> 赞同：1
> 
> 时间：2012-07-18T05:16:32.297
> 
> 标签：spring-mvc, dispatcher, applicationcontext

我是弹簧框架的新手。目前我正在研究spring框架。我遵循本教程， [http://netbeans.org/kb/docs/web/quickstart-webapps-spring.html](http://netbeans.org/kb/docs/web/quickstart-webapps-spring.html)

[http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part1.html)

但是我在这两个示例中都有一个问题，在将 bean 添加到 dispather-servlet.xml 并修改 application-contex.xml 后，应用程序未部署。它提供以下按摩。

在 C:\Users...\Documents\NetBeansProjects\springapp\build\web 就地部署 Initializing... deploy?DEFAULT=C:\Users...\Documents\NetBeansProjects\springapp\build\web&name=springapp&contextroot= /springapp&force=true 在 GlassFish Server 3.1.2 上失败 部署期间发生错误：加载应用程序时出现异常：java.lang.IllegalStateException：ContainerBase.addChild：开始：org.apache.catalina.LifecycleException：org.apache.catalina.LifecycleException： java.lang.ClassNotFoundException：springapp.web.HelloController。有关详细信息，请参阅 server.log。C:\Users...\Documents\NetBeansProjects\springapp\nbproject\build-impl.xml:728：模块尚未部署。有关详细信息，请参阅服务器日志。构建失败（总时间：2 秒）

请帮助解决这个问题。

先感谢您。

PS：-

@shazinltc - 这是我的 dispatcher-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
        </props>
    </property>
</bean>
<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"  p:suffix=".jsp" />
<bean name="indexController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="index" />       
      <bean name="helloService" class="service.HelloService" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:54:32.240

我设法通过以下教程解决了我的问题。

[https://sites.google.com/site/springmvcnetbeans/step-by-step/](https://sites.google.com/site/springmvcnetbeans/step-by-step/)

本教程非常简单，每个步骤都更加具体和描述性。我向春季的初学者推荐本教程。

# asp.net - 创建一个元组 , Model> 作为模型传递给 Html.Partial

> ID：11534678
> 
> 赞同：-2
> 
> 时间：2012-07-18T05:16:44.530
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我是使用带有剃刀语法的 MVC3 的初学者。我想知道我该怎么写`@html.partial`。

在 ProductVarient.cshtml 中，我将部分视图调用如下：

```
 @{
     var dataDictAttributes = new ViewDataDictionary();
     dataDictAttributes.TemplateInfo.HtmlFieldPrefix = string.Format("attributes_{0}", Model.Id);
     @Html.Partial("_ProductAttributes", Tuple.Create<List<Model.ProductVariantAttributes>, Model>(dataDictAttributes,model));                  
 } 
```

我想知道将参数传递给的语法`@html.partial()`。此外，它应该在哪里更改，在控制器或模型中？

在 _ProductAttributes.cshtml 中，我将模型声明如下：

```
@model Tuple<IList<ProductDetailsModel.ProductVariantModel.ProductVariantAttributeModel>,ProductDetailsModel.ProductVariantModel.ProductVariantAttributeModel> 
```

错误发生如下：

> 'System.Web.Mvc.WebViewPage.Model' 是一个“属性”，但用作“类型”

在模型中：

```
public class ProductVariantAttributeModel : BaseNopEntityModel
{
    public ProductVariantAttributeModel();

    public IList<string> AllowedFileExtensions { get; set; }
    public AttributeControlType AttributeControlType { get; set; }
    public string Description { get; set; }

    [NopResourceDisplayName("Products.Qty")]
    public int EnteredQuantity { get; set; }
    public bool IsRequired { get; set; }
    public string Name { get; set; }
    public int ProductAttributeId { get; set; }
    public int ProductVariantId { get; set; }
    public int? SelectedDay { get; set; }
    public int? SelectedMonth { get; set; }
    public int? SelectedYear { get; set; }
    public string TextPrompt { get; set; }
    public string TextValue { get; set; }
    public IList<ProductDetailsModel.ProductVariantModel.ProductVariantAttributeValueModel> Values { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:14:34.453

我认为你应该`Partial()`用

```
 @Html.Partial("_ProductAttributes", Tuple.Create<IList<ProductDetailsModel.ProductVariantModel.ProductVariantAttributeModel>,ProductDetailsModel.ProductVariantModel.ProductVariantAttributeModel>(dataDictAttributes,model)); 
```

# c - 文件 i/o 实现中的错误

> ID：11534679
> 
> 赞同：0
> 
> 时间：2012-07-18T05:16:49.293
> 
> 标签：c, linux, file-io, ubuntu-10.04

我的代码：

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    FILE *fp;
    int id,q,p,r,a;
    fp = fopen("g-ip.txt","r");
    while(EOF!=fscanf(fp,"%d\t%d\t%d\t\t%d\t\t%d",&id,&q,&p,&r,&a))
        printf("%d %d %d %d %d\n",id,q,p,r,a);

    fclose(fp);

    return 0;
} 
```

格式字符串之所以如此，是因为我的 g-ip.txt 文件具有以相同格式写入的值。在执行代码时，它给了我错误的输出，即无限次打印的垃圾值。我应该使用数组来读取中的值吗？但我不想使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:23:23.210

使用`feof`和返回计数，`fscanf`所以尝试使用类似的东西

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    FILE *fp;
    int id,q,p,r,a;
    fp = fopen("g-ip.txt","r");
    if (!fp) 
      perror("g-ip.txt"), exit(1);
    while(!feof(fp)) {
      id=q=p=r=a=0;
      if (fscanf(fp," %d %d %d %d %d",&id,&q,&p,&r,&a)<5)
        exit(1);
      printf("%d %d %d %d %d\n",id,q,p,r,a);
    }
    fclose(fp);
    return 0;
} 
```

请注意，制表符与格式字符串中的空格相同`scanf`，不需要`\t\t`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T05:26:20.937

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    FILE *fp;
    int id,q,p,r,a;
    int scanned;
    char buffer[256] = {0};
    fp = fopen("g-ip.txt","r");
    while(fgets(buffer,sizeof(buffer)-1,fp))
    {
        scanned = sscanf(buffer,"%d %d %d %d %d",&id,&q,&p,&r,&a));
        if(scanned == 5)
         printf("%d %d %d %d %d\n",id,q,p,r,a);
    }

    fclose(fp);

    return 0;
} 
```

尝试这个。无需提供 '\t'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T05:18:41.787

我怀疑这`fp`是NULL，要么是因为文件不存在（可执行文件和文件在不同的目录中？），要么是因为可执行文件没有打开它的权限。

> 如果文件已成功打开，该函数将返回一个指向 FILE 对象的指针，该对象用于在涉及它的所有进一步操作中识别流。否则，返回一个空指针。

[http://www.cplusplus.com/reference/clibrary/cstdio/fopen/](http://www.cplusplus.com/reference/clibrary/cstdio/fopen/)

在使用它之前，您应该检查它是否不为 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:42:49.417

由于您没有发布输入行和结果输出行，因此很难说出究竟出了什么问题。但是，一旦 fscanf 匹配失败，它就会失败，更重要的是，它可能会卡住，不断返回零并且永远不会完成。一个稍微更有弹性的解决方案是这样的：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fp = fopen("g-ip.txt","r");
    char enorbuf[2048];
    int errors = 0;

    while (fgets(enorbuf, sizeof(enorbuf), fp) != NULL)
    {
        int id, q, p, r, a;
        if (sscanf(enorbuf, "%d\t%d\t%d\t\t%d\t\t%d", &id, &q, &p, &r, &a) != 5)
        {
            printf("Invalid input line: %s", enorbuf);
            errors = 1;
        }
        else
        {
             printf("%d %d %d %d %d\n", id, q, p, r, a);
        }
    }

    fclose(fp);

    return errors ? EXIT_FAILURE : EXIT_SUCCESS;
} 
```

# java - 在java中读取dbConnection.properties文件以使用eclipse连接到数据库

> ID：11534680
> 
> 赞同：1
> 
> 时间：2012-07-18T05:17:01.847
> 
> 标签：java, database

我创建了一个 dbConnection.properties 文件并将其放入 WEB-INF。为了读取该文件并连接到数据库，我编写了一个类作为

```
public class DbConnection {

public static Connection connection()
{
    Connection con=null;
    //String connectionURL = "jdbc:mysql://localhost:3306/demo";
    try
    {
        Properties prop=new Properties();
        FileInputStream in = new FileInputStream(System.getProperty("WEB-INF/dbConnection.properties"));
        prop.load(in);
        in.close();

        String drivers = prop.getProperty("jdbc.drivers");
        String connectionURL = prop.getProperty("jdbc.url");
        String username = prop.getProperty("jdbc.username");
        String password = prop.getProperty("jdbc.password");

        //Class.forName("com.mysql.jdbc.Driver").newInstance();
        Class.forName(drivers);
        con=DriverManager.getConnection(connectionURL,username,password);

            System.out.println("Connection Successful");
            return con;     
    }
    catch(Exception e)
    {
        System.out.println("error !!");
    }
    return null;

} 
```

}

它进入 catch 块。我如何读取 .properties 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:36:53.503

`src`如果您正在使用 eclipse 或者`WEB-INF/classes`您正在使用 ant 或 gradle 或任何其他工具，请将属性文件放在下面，然后修改语句

```
 FileInputStream in = new FileInputStream(System.getProperty("WEB-INF/dbConnection.properties"));
        prop.load(in); 
```

和

```
 prop.load(DbConnection.class.getClassLoader()
                    .getResourceAsStream("dbConnection.properties")); 
```

进行此更改，它将起作用！

# android - 动态地将视图添加到列表视图行，滚动时添加的视图会重复

> ID：11534683
> 
> 赞同：0
> 
> 时间：2012-07-18T05:17:07.297
> 
> 标签：android, listview

我有一个列表视图，我必须在其中动态地将数据添加到 linearLayout ，因为它不需要每一行都有相同数量的数据。

为此，我在 LiveView 适配器中将 textView 动态添加到线性布局。现在在滚动 textview 被 countinued 添加！任何想法如何解决这个问题？？？

这就是我正在做的事情。

```
static class ViewHolder
{       
    TextView itemName , itemQuantity , itemTotalPrice , attrKey , attrValue;
    CheckBox deleteCheckbox;
    ImageButton nextArrow;
    LinearLayout linearLayout , attrHolder;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;
    if(convertView == null)
    {
        convertView = mLayoutInflator.inflate(R.layout.basket_list,null);
        holder = new ViewHolder();
        holder.itemName = (TextView) convertView.findViewById(R.id.basket_list_item_name);
        holder.itemQuantity = (TextView) convertView.findViewById(R.id.basket_list_item_number);
        holder.itemTotalPrice = (TextView) convertView.findViewById(R.id.basket_list_total_amount);
        holder.nextArrow = (ImageButton) convertView.findViewById(R.id.basket_list_next_arraow);
        holder.deleteCheckbox = (CheckBox) convertView.findViewById(R.id.basket_list_checkbox);
        holder.linearLayout = (LinearLayout)convertView.findViewById(R.id.basket_list_atributes);
        convertView.setTag(holder);
    }else   
        holder = (ViewHolder) convertView.getTag();  

    attributes = items.get(position).getAttributeVOs();

    holder.itemName.setText(items.get(position).getItemName());
    holder.itemQuantity.setText("x"+items.get(position).getItemQuantity());
    holder.itemTotalPrice.setText("R  "+items.get(position).getItemTotalCost());

    if(CheckListActivity.flag)
        holder.deleteCheckbox.setVisibility(View.VISIBLE);
    else
        holder.deleteCheckbox.setVisibility(View.GONE);

    holder.deleteCheckbox.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            CheckBox cb = (CheckBox) v;
            System.out.println("CHECKED");
            if(cb.isChecked())
                holder.deleteCheckbox.setButtonDrawable(R.drawable.checkarrow);
            else
                holder.deleteCheckbox.setButtonDrawable(R.drawable.unchecked);

            checkedArray.put(position, cb.isChecked());             
        }
    });     

    holder.nextArrow.setOnClickListener(new OnClickListener() {         
        @Override
        public void onClick(View v) {
            //To next activity
        }
    });

    for(int i = 0 ; i < attributes.size() ; i ++)
    {
        LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        holder.attrHolder = new LinearLayout(context);
        holder.attrHolder.setOrientation(LinearLayout.HORIZONTAL);
        holder.attrHolder.setLayoutParams(lparams);         

        holder.attrKey = new TextView(context);
        holder.attrKey.setLayoutParams(lparams);
        holder.attrKey.setText(attributes.get(i).getKey());
        holder.attrValue = new TextView(context);
        holder.attrValue.setLayoutParams(lparams);
        holder.attrValue.setText(attributes.get(i).getValues().toString());

        holder.attrHolder.addView(holder.attrKey);
        holder.attrHolder.addView(holder.attrValue);                    
    }

    holder.linearLayout.addView(holder.attrHolder);
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T06:36:02.503

解决了删除 if(convertView == null) { }else 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:28:23.603

对于新的添加行，不需要 For Loop。您只需更改项目列表，Listview 适配器就有通知方法来更改 Listview。

您只需通过 Listview 在 Google 中搜索通知更改。

# javascript - 使用jquery live功能时按钮会被触发两次

> ID：11534686
> 
> 赞同：1
> 
> 时间：2012-07-18T05:17:14.507
> 
> 标签：javascript, jquery, ajax

我的应用程序中有 2 列在加载网站期间加载的第一列。

如果选择框已在第二列上，它将加载`"changed"` 这里的事情是我的代码如下所示：

```
jQuery(".pagination").live("click",function(event){
    var pId = jQuery(this).attr("id");
    if( pId == "centerPagination")
        CenterColumnPagination();
    else if( pId == "searchPagination" )
        SearchColumnPagination();
}); 
```

在我网站的页面加载期间调用它们的 CenterPagination 函数。
SearchColumnPagination 它们在选择框被触发时被调用`"changed"`

之所以“单击”它们，是因为在这两列上，我有一个`.pagination`带有按钮的类。

我这里的问题是因为`live`代码，当我点击我的第一列时，按钮似乎被触发了两次，我注意到一个是因为当我检查 firebug 的控制台时，ajax 调用被调用了两次，并且因为那，我得到重复的结果。

同样在第二列，当我`changed`选择框（分页类会出来）时，然后点击分页类的按钮，它也被触发了两次。与第一列结果相同。

我在这里想要的不是让这些按钮被触发两次，就像正常点击一样。就像我点击它时，它应该只调用我的 ajax 一次。

请指导我。您的帮助将不胜感激和奖励！

谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:57:30.597

我宁愿避免使用`live`. 而不是这个我使用`delegate`：

```
$('#column-1').delegate('.pagination', 'click', function () {
    CenterColumnPagination();    
});

$('#column-2').delegate('.pagination', 'click', function () {
    SearchColumnPagination();    
}); 
```

或者，如果您不想识别列，您可以这样做：

```
jQuery('body').delegate(".pagination", "click", function(event) {
    var pId = jQuery(this).attr("id");
    if( pId == "centerPagination")
        CenterColumnPagination();
    else if( pId == "searchPagination" )
        SearchColumnPagination();
}); 
```

# php - 带有一个#id的多选选项以显示n隐藏表

> ID：11534687
> 
> 赞同：2
> 
> 时间：2012-07-18T05:17:14.443
> 
> 标签：php, javascript, jquery, html

我对选择选项有疑问。我想用我的许多选择选项显示 n 隐藏我的表 n div，但结果仅在第一个选择选项中有效。我真的需要你的帮助，以便我所有的选择选项都使用相同的 ID。帮帮我，伙计们..！...

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript">
      $(function() {
          $('#sts').change(function() {
                $('div.number').hide();
                $('table.number').hide();
                $('#number' + $(this).val()).show();
          }).change();
    });
</script> 
```

...

```
 <select name="" id="sts" class="form-select required">

  <option value="">- select -</option>

  <option value="1">Option 1</option>

  <option value="2">Option 2</option>

  <option value="3">Option 3</option>

  <option value="4">Option 4</option>
  </select>

  <select name="" id="sts" class="form-select required">

  <option value="">- select -</option>

  <option value="1">Option 1</option>

  <option value="2">Option 2</option>

  <option value="3">Option 3</option>

  <option value="4">Option 4</option>
  </select>

  <div id="number1" class="number">Option 1</div>

  <div id="number2" class="number">Option 2</div>
  <div id="number3" class="number">Option 3</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:01:22.777

尝试

```
$('*#sts').change(function() {...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:25:23.057

通常，`id`HTML 元素的属性必须是唯一的。所以请将代码更改为

```
<select name="" id="sts" class="form-select required">

  <option value="">- select -</option>

  <option value="1">Option 1</option>

  <option value="2">Option 2</option>

  <option value="3">Option 3</option>

  <option value="4">Option 4</option>
  </select>

  <select name="" id="sts1" class="form-select required">

  <option value="">- select -</option>

  <option value="1">Option 1</option>

  <option value="2">Option 2</option>

  <option value="3">Option 3</option>

  <option value="4">Option 4</option>
  </select>

  <div id="number1" class="number">Option 1</div>

  <div id="number2" class="number">Option 2</div>
  <div id="number3" class="number">Option 3</div> 
```

现在使用代码`select`通过名称获取元素来进行处理`their class`：

```
<script type="text/javascript">
      $('select.form-select').change(function() {

                $('div.number').hide();
                $('table.number').hide();
                $('#number' + $(this).val()).show();
          });
</script> 
```

# javascript - 表单提交后如何进行 Jquery 回调？

> ID：11534690
> 
> 赞同：126
> 
> 时间：2012-07-18T05:17:25.070
> 
> 标签：javascript, jquery, html, asp.net, webforms

我有一个带有remote = true的简单表格。

这个表单实际上是在一个 HTML Dialog 上，一旦单击 Submit 按钮就会关闭。

现在我需要在表单提交成功后对主 HTML 页面进行一些更改。

我用jQuery试过这个。但这并不能确保在表单提交的某种形式的响应之后执行任务。

```
$("#myform").submit(function(event) {

// do the task here ..

}); 
```

如何附加回调，以便我的代码仅在表单成功提交后才执行？有没有办法在表单中添加一些 .success 或 .complete 回调？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-07-18T14:04:51.350

我只是这样做了-

```
 $("#myform").bind('ajax:complete', function() {

         // tasks to do 

   }); 
```

一切都很顺利。

有关更具体的详细信息，请参阅[此 api 文档](http://api.jquery.com/ajaxComplete/)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-08-06T17:27:29.877

我无法让排名第一的解决方案可靠地工作，但我发现这是可行的。不确定它是否需要，但我在标签上没有操作或方法属性，这确保 POST 由 $.ajax 函数处理并为您提供回调选项。

```
<form id="form">
...
<button type="submit"></button>
</form>

<script>
$(document).ready(function() {
  $("#form_selector").submit(function() {

    $.ajax({
     type: "POST",
      url: "form_handler.php",
      data: $(this).serialize(),
      success: function() {
        // callback code here
       }
    })

  })
})
</script> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-07-18T05:35:26.063

您必须通过对服务器的 AJAX 调用手动执行操作。这也将要求您覆盖表单。

但别担心，这是小菜一碟。以下是有关如何使用表单的概述：

*   覆盖默认提交操作（感谢传入的事件对象，它有一个`preventDefault`方法）
*   从表单中获取所有必要的值
*   触发 HTTP 请求
*   处理对请求的响应

首先，您必须像这样取消表单提交操作：

```
$("#myform").submit(function(event) {
    // Cancels the form's submit action.
    event.preventDefault();
}); 
```

然后，抓住数据的价值。让我们假设您有一个文本框。

```
$("#myform").submit(function(event) {
    event.preventDefault();
    var val = $(this).find('input[type="text"]').val();
}); 
```

然后发出请求。让我们假设它是一个 POST 请求。

```
$("#myform").submit(function(event) {
    event.preventDefault();
    var val = $(this).find('input[type="text"]').val();

    // I like to use defers :)
    deferred = $.post("http://somewhere.com", { val: val });

    deferred.success(function () {
        // Do your stuff.
    });

    deferred.error(function () {
        // Handle any errors here.
    });
}); 
```

这应该做到这一点。

**注意 2：**为了解析表单的数据，最好使用[plugin](http://css-tricks.com/snippets/jquery/serialize-form-to-json/)。它会让你的生活变得非常轻松，并提供一个很好的语义来模仿实际的表单提交操作。

**注意 2：**您不必使用延迟。这只是个人喜好。您同样可以执行以下操作，它也应该可以工作。

```
$.post("http://somewhere.com", { val: val }, function () {
    // Start partying here.
}, function () {
    // Handle the bad news here.
}); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-02-06T20:50:46.977

对于 MVC，这里是一种更简单的方法。您需要使用 Ajax 表单并设置 AjaxOptions

```
@using (Ajax.BeginForm("UploadTrainingMedia", "CreateTest", new AjaxOptions() { HttpMethod = "POST", OnComplete = "displayUploadMediaMsg" }, new { enctype = "multipart/form-data", id = "frmUploadTrainingMedia" }))
{ 
  ... html for form
} 
```

这是提交代码，这是在文档准备部分并绑定按钮的onclick事件以提交表单

```
$("#btnSubmitFileUpload").click(function(e){
        e.preventDefault();
        $("#frmUploadTrainingMedia").submit();
}); 
```

这是 AjaxOptions 中引用的回调

```
function displayUploadMediaMsg(d){
    var rslt = $.parseJSON(d.responseText);
    if (rslt.statusCode == 200){
        $().toastmessage("showSuccessToast", rslt.status);
    }
    else{
        $().toastmessage("showErrorToast", rslt.status);
    }
} 
```

在 MVC 的控制器方法中，它看起来像这样

```
[HttpPost]
[ValidateAntiForgeryToken]
public JsonResult UploadTrainingMedia(IEnumerable<HttpPostedFileBase> files)
{
    if (files != null)
    {
        foreach (var file in files)
        {
            // there is only one file  ... do something with it
        }
        return Json(new
        {
            statusCode = 200,
            status = "File uploaded",
            file = "",
        }, "text/html");
    }
    else
    {
        return Json(new
        {
            statusCode = 400,
            status = "Unable to upload file",
            file = "",
        }, "text/html");
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-18T05:27:34.773

我不相信有像你描述的那样的回调函数。

这里的正常做法是使用一些服务器端语言（如 PHP）进行更改。

例如，在 PHP 中，您可以从表单中获取隐藏字段，并在它存在时进行一些更改。

PHP：

```
 $someHiddenVar = $_POST["hidden_field"];
    if (!empty($someHiddenVar)) {
        // do something 
    } 
```

在 Jquery 中解决它的一种方法是使用 Ajax。您可以收听提交，返回 false 以取消其默认行为并改用 jQuery.post()。jQuery.post 有一个成功回调。

```
$.post("test.php", $("#testform").serialize(), function(data) {
  $('.result').html(data);
}); 
```

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-26T20:50:06.223

在提交表单之前调用表单的“提交时”处理程序。我不知道表单提交后是否有一个处理程序要调用。在传统的非 Javascript 意义上，表单提交将重新加载页面。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-07T20:10:39.613

```
$("#formid").ajaxForm({ success: function(){ //to do after submit } }); 
```

# c# - 如何将命令传递给 C# 中已经运行的命令提示符？

> ID：11534696
> 
> 赞同：0
> 
> 时间：2012-07-18T05:18:15.533
> 
> 标签：c#

假设我在系统中打开了命令提示符，现在我只想通过 c# 程序将命令传递到打开的命令提示符窗口，并且我不想打开命令提示符窗口的新实例来执行我​​通过 C# 程序传递的命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:40:20.250

我不太清楚你的意思是“打开新实例”来执行你已经传递的参数。但是，如果您不太确定如何集中解析命令行参数，您可以参考此链接：

[解析命令行参数的最佳方法](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:47:57.170

您需要将密钥发送到打开的应用程序。下面的链接将为您提供帮助

[http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:04:03.367

您可以尝试使用 FindWindow API 和 SendKeys。

# wpf - WPF 后台工作程序错误

> ID：11534699
> 
> 赞同：0
> 
> 时间：2012-07-18T05:18:20.597
> 
> 标签：wpf

```
// Worker Method
void _backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{     
    // Do something
    this.Progressbar1.Visibility=Visibility.Visible;
} 
```

我对此有错误任何人都可以请帮助为什么这是错误的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:52:37.843

您无法从另一个线程访问 UI。采用`Dispatcher`

```
Dispatcher.Invoke(new Action(() => { this.Progressbar1.Visibility = Visibility.Visible; })); 
```

并且下次在您的问题中至少发布错误描述。你会更快得到答案。

# cuda - 多个线程写入 cuda 内核中的顺序数组

> ID：11534700
> 
> 赞同：0
> 
> 时间：2012-07-18T05:18:29.187
> 
> 标签：cuda

我正在编写一个 cuda 内核，它需要我`struct`在设备上分配一个对齐的数组。我从我的计算中得到了正确的结果，我需要从 index 开始将值写入这个数组`0`。

当我尝试写入此数组并将结果显示回主机端时，一些答案显示为零。

显然，我没有按照我的要求增加索引。我尝试使用我增加使用的计数器`atomicAdd()`，但是我仍然得到一些值为零。

准确地说，我可以`1000`在我的内核中使用线程进行计算，但我的输出分配数组的大小可以小于`100`或大于`10000`.

我的问题是，如何让所有这些线程将值准确写入数组的一个位置（因为它们是计算出来的），并在`1`不覆盖它的情况下增加数组索引/计数器。

任何帮助将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:30:11.900

您可以使用`atomicAdd()`. 它返回旧值，因此您使用该值作为索引：

```
old_i = atomicAdd(&i, 1);
out_array[old_i] = val 
```

但是，如果您的许多线程写出结果，您的性能会很差，因为 atomicAdd() 将（间接）序列化所有写入。在这种情况下，您应该让每个线程将其结果（如果有）写入为该线程预留的插槽，然后使用压缩算法（请参阅 参考资料`thrust::copy_if`）来收集结果。

# c# - 请在正则表达式中更正

> ID：11534702
> 
> 赞同：0
> 
> 时间：2012-07-18T05:18:41.603
> 
> 标签：c#, regex

我正在使用 port.ReadExisting() 读取串行端口以读取来自 c# 中 GSM 调制解调器的来电。我将读取的数据存储在字符串变量 s 中。现在我想将传入的数据与正则表达式进行比较。但是 while 条件永远不会执行。请提供更正。

端口上的传入数据是

```
RING

+CLIP: "+919030665834",145,"",,"",0 
```

我写了以下代码：

```
 string s = port.ReadExisting();  
                Regex r = new Regex(@"\r\n(.+)\r\n\+CLIP: ""\+(\d+)"",(.+),""(.*)"",(.*),""(.*)"",(\d+)\r\n");  
                Match m = r.Match(s);  
                while (m.Success)  
                {  
                    if (s.Contains("\r\nRING\r\n"))  
                    {  
                        call_status.Text = "Incoming Call";  
                        call_status.Visible = true;  
                        status_phno.Text = m.Groups[1].Value;  
                    }  
                 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:31:08.203

我相信.+匹配“RING”和+CLIP之间应该有两个换行符。所以正则表达式将读取 \r\n(.+)\r\n\r\n+CLIP: ...

*否则，这应该是一个容易调试的问题——只需开始用“. ”*替换越来越大的部分，从前面或后面开始。*一旦它开始匹配，你就知道你刚刚输入 .* 是导致问题的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:47:50.047

使用这个：

```
var match = Regex.Match(inputString, "RING[^\\+]*\\+CLIP:\\s*\"(?<phone>[^\"]*)\",(\\d+),\"([^\"]*)\",(\\w*),\"(\\w*)\",(\\w*)");

if(match.Success && inputString.Contains("RING"))
{
    var phoneNumber = match.Groups["phone"].Value;
} 
```

我首先跳过了除“+”之外的任何字符：`[^\+]*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:12:24.283

使用以下正则表达式：

"RING[^\+] *\+CLIP:\s* \"(?[^\"] *)\",(\d+),\"([^\"]* )\",(\w*),\ "(\w*)\",(\w*)"

# asp.net - 文件未从 ASP.net 树视图打开

> ID：11534706
> 
> 赞同：1
> 
> 时间：2012-07-18T05:19:03.740
> 
> 标签：asp.net, c#-4.0

我正在使用 ASP.net 树视图将 windows 文件夹映射到树视图。我面临的问题是文件夹结构，映射并成功运行，但文件夹中的文件映射到网页，而不是打开`onclick`树节点。

请在下面找到我的代码：

```
if (!IsPostBack)
    {
        String directoryPath = "O:\\Quality\\01.QMS";
        DirectoryInfo directoryInfo = new
        System.IO.DirectoryInfo(directoryPath);
        if (directoryInfo != null)
        {
            TreeNode parentnode1 = null;
            TreeNode rootDirectoryNode =
            CreateTreeView(directoryInfo, parentnode1);
            if (rootDirectoryNode != null)
                TreeView1.Nodes.Add(rootDirectoryNode);
        }
    }

public TreeNode CreateTreeView(DirectoryInfo directoryInfo, TreeNode Node)
{
    TreeNode baseNode = new TreeNode(directoryInfo.Name);
    DirectoryInfo[] subDirectories =
    directoryInfo.GetDirectories();
    FileInfo[] filesInDirectory = directoryInfo.GetFiles();
    for (int i = 0, n = subDirectories.Length; i < n; i++)
        CreateTreeView(subDirectories[i], baseNode);
    for (int ctr = 0, cnt = filesInDirectory.Length; ctr < cnt;
    ctr++)
    {
        TreeNode childNode = new
        TreeNode(filesInDirectory[ctr].Name);
        baseNode.ChildNodes.Add(childNode);
    }
    if (Node == null)
        return baseNode;
    Node.ChildNodes.Add(baseNode);
    return Node;
} 
```

# c# - 区分抛出的 SqlExceptions

> ID：11534708
> 
> 赞同：3
> 
> 时间：2012-07-18T05:19:16.237
> 
> 标签：c#, sql-server, exception

我需要将数据库访问错误（如错误的用户名）与数据库查询错误（如选择插入..列不存在等）分开。它们都会抛出 SqlException。但是我希望我的程序在引发查询错误时继续，但在引发访问错误时关闭。

如何区分这两个错误？写我自己的例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:06:48.140

我建议检查 SqlException 的 Number 属性。

请参阅我对[SqlException 捕获和处理的回答](https://stackoverflow.com/questions/6221951/sqlexception-catch-and-handling/6222003#6222003)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:26:15.100

下面给出了 excption 处理的基本语法，您可以根据需要输入任意类型的陷阱。这是将一个例外与另一个例外分开的方法。

```
try
{
    // Statements that are can cause exception
}
catch(Type x)
{
    // Statements to handle exception
}
finally
{
    // Statement to clean up 
} 
```

还请查看[如何：创建用户定义的异常](http://msdn.microsoft.com/en-us/library/87cdya3t.aspx)和[异常以及异常处理（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173160.aspx)，以更好地理解异常处理，因为从您的问题看来，您似乎需要更好地了解这些概念，以便提出更好的问题。

提高您的问题标准，以便在这个社区中获得更好的答案并提高接受率。

如果您正在使用 asp.net，请同时查找[C# 和 ASP .Net 中的异常处理，](http://www.codeproject.com/Articles/15146/Exception-handling-in-C-and-ASP-Net)以了解如何进行异常处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:30:32.167

可以使用 sqlconnection 属性捕获 1 个错误的用户名和密码异常，并且可以使用 sqlexception 捕获 2 个异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T08:18:59.303

```
try{
    // Do something
}

catch 
(IOException ix)
{
   // handle...
 }  

 catch (System.UnauthorizedAccessException ux)
 {
    // handle
 } 
```

所以这样你就可以处理访问级别异常。要交叉检查我的答案，您可以在[http://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx进行验证](http://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T05:39:18.617

为什么不处理错误信息？这会让你知道它是什么错误，例如：

```
try
{

}
catch(SqlException e)
{
    if(e.Message=="anything") //or, maybe e.Message.Contains("column")
     {
     }
    else{}
} 
```

然后你就可以做你想做的了！

# javascript - AngularJS - 如何使用 $routeParams 生成 templateUrl？

> ID：11534710
> 
> 赞同：96
> 
> 时间：2012-07-18T05:19:45.777
> 
> 标签：javascript, angularjs

我们的应用程序有 2 级导航。我们想使用 AngularJS`$routeProvider`为`<ng-view />`. 我正在考虑按照以下方式做一些事情：

```
angular.module('myApp', []).
config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/:primaryNav/:secondaryNav', {
        templateUrl: 'resources/angular/templates/nav/'+<<primaryNavHere>>+'/'+<<secondaryNavHere>>+'.html'
    });
}]); 
```

我只是不知道如何填充`<<>>`. 我知道primaryNav 和secondaryNav 绑定到$routeParams，但是我如何在此处访问$routeParams 以动态提供模板？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-04-04T17:09:25.707

从 AngularJS 的 1.1.2 版本开始，现在可以使用这个非常有用的功能。它被认为是不稳定的，但我已经使用它（1.1.3）并且它工作正常。

基本上你可以使用一个函数来生成一个 templateUrl 字符串。该函数传递了可用于构建和返回 templateUrl 字符串的路由参数。

```
var app = angular.module('app',[]);

app.config(
    function($routeProvider) {
        $routeProvider.
            when('/', {templateUrl:'/home'}).
            when('/users/:user_id', 
                {   
                    controller:UserView, 
                    templateUrl: function(params){ return '/users/view/' + params.user_id; }
                }
            ).
            otherwise({redirectTo:'/'});
    }
); 
```

非常感谢[https://github.com/lrlopez](https://github.com/lrlopez)的拉取请求。

[https://github.com/angular/angular.js/pull/1524](https://github.com/angular/angular.js/pull/1524)

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-07-18T07:00:29.007

我找不到注入和使用`$routeParams`服务的方法（我认为这将是一个更好的解决方案）我尝试了这个，认为它可能会起作用：

```
angular.module('myApp', []).
    config(function ($routeProvider, $routeParams) {
        $routeProvider.when('/:primaryNav/:secondaryNav', {
            templateUrl: 'resources/angular/templates/nav/'+$routeParams.primaryNav+'/'+$routeParams.secondaryNav+'.html'
        });
    }); 
```

这产生了这个错误：

> 未知提供者：来自 myApp 的 $routeParams

如果这样的事情是不可能的，你可以改变你`templateUrl`的指向一个部分 HTML 文件，`ng-include`然后使用`$routeParam`s 在你的控制器中设置 URL，如下所示：

```
angular.module('myApp', []).
    config(function ($routeProvider) {
        $routeProvider.when('/:primaryNav/:secondaryNav', {
            templateUrl: 'resources/angular/templates/nav/urlRouter.html',
            controller: 'RouteController'
        });
    });

function RouteController($scope, $routeParams) {
        $scope.templateUrl = 'resources/angular/templates/nav/'+$routeParams.primaryNav+'/'+$routeParams.secondaryNav+'.html';
    } 
```

以此为你`urlRouter.html`

```
<div ng-include src="templateUrl"></div> 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-12-03T08:22:36.747

templateUrl 可以用作返回生成 URL 的函数。我们可以使用带有 routeParams 的传递参数来操作 url。

请参阅示例。

```
.when('/:screenName/list',{
    templateUrl: function(params){
         return params.screenName +'/listUI'
    }
}) 
```

希望这有帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-19T08:24:17.387

好吧，我想我明白了……

先说一点背景知识：我需要这个的原因是将 Angular 放在 Node Express 之上，并让 Jade 为我处理我的部分。

所以这就是你要做的事情......（先喝啤酒，然后花 20 多个小时在上面！！！）......

设置模块时，`$routeProvider`全局保存：

```
// app.js:
var routeProvider
    , app = angular.module('Isomorph', ['ngResource']).config(function($routeProvider){

        routeProvider = $routeProvider;
        $routeProvider
            .when('/', {templateUrl: '/login', controller: 'AppCtrl'})
            .when('/home', {templateUrl: '/', controller: 'AppCtrl'})
            .when('/login', {templateUrl: '/login', controller: 'AppCtrl'})
            .when('/SAMPLE', {templateUrl: '/SAMPLE', controller: 'SAMPLECtrl'})
            .when('/map', {templateUrl: '/map', controller: 'MapCtrl'})
            .when('/chat', {templateUrl: '/chat', controller: 'ChatCtrl'})
            .when('/blog', {templateUrl: '/blog', controller: 'BlogCtrl'})
            .when('/files', {templateUrl: '/files', controller: 'FilesCtrl'})
            .when('/tasks', {templateUrl: '/tasks', controller: 'TasksCtrl'})
            .when('/tasks/new', {templateUrl: '/tasks/new', controller: 'NewTaskCtrl'})
            .when('/tasks/:id', {templateUrl: '/tasks', controller: 'ViewTaskCtrl'})
            .when('/tasks/:id/edit', {templateUrl: '/tasks', controller: 'EditTaskCtrl'})
            .when('/tasks/:id/delete', {templateUrl: '/tasks', controller: 'DeleteTaskCtrl'})
        .otherwise({redirectTo: '/login'});

});

// ctrls.js
...
app.controller('EditTaskCtrl', function($scope, $routeParams, $location, $http){

    var idParam = $routeParams.id;
    routeProvider.when('/tasks/:id/edit/', {templateUrl: '/tasks/' + idParam + '/edit'});
    $location.path('/tasks/' + idParam + '/edit/');

});
... 
```

这可能比需要的信息更多......

*   基本上，您会希望`$routeProvider`全局存储模块的 var，例如，`routeProvider`以便控制器可以访问它。

*   然后你可以使用`routeProvider`并创建一个新的路由（你不能'RESET a route'/'REpromise'；你必须创建一个新的），我只是在末尾添加了一个斜杠（/），以便它具有语义作为第一个。

*   然后（在您的控制器内），将 设置为`templateUrl`您想要点击的视图。

*   取出对象的`controller`属性`.when()`，免得出现无限请求循环。

*   最后（仍在控制器内部），用于`$location.path()`重定向到刚刚创建的路由。

如果您对如何将 Angular 应用程序添加到 Express 应用程序感兴趣，可以在此处分叉我的存储库：[https](https://github.com/cScarlson/isomorph) ://github.com/cScarlson/isomorph 。

而且这个方法还允许你保留 AngularJS 双向数据绑定，以防你想使用 WebSockets 将你的 HTML 绑定到你的数据库：否则如果没有这个方法，你的 Angular 数据绑定只会输出`{{model.param}}`.

如果你在这个时候克隆它，你需要在你的机器上运行 mongoDB 来运行它。

希望这能解决这个问题！

科迪

不要喝你的洗澡水。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-29T22:25:09.457

我在我的 Angular 分支中添加了对此的支持。它允许您指定

```
$routeProvider
    .when('/:some/:param/:filled/:url', {
          templateUrl:'/:some/:param/:filled/template.ng.html'
     }); 
```

[https://github.com/jamie-pate/angular.js/commit/dc9be174af2f6e8d55b798209dfb9235f390b934](https://github.com/jamie-pate/angular.js/commit/dc9be174af2f6e8d55b798209dfb9235f390b934)

不确定这是否会被拾起，因为它有点不利于棱角分明，但它对我很有用

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-01T00:19:47.393

路由器：-

```
...
.when('/enquiry/:page', {
    template: '<div ng-include src="templateUrl" onload="onLoad()"></div>',
    controller: 'enquiryCtrl'
})
... 
```

控制器：-

```
...
// template onload event
$scope.onLoad = function() {
    console.log('onLoad()');
    f_tcalInit();  // or other onload stuff
}

// initialize
$scope.templateUrl = 'ci_index.php/adminctrl/enquiry/'+$routeParams.page;
... 
```

我认为 $routeParams 在路由器内部不可见是 angularjs 的一个弱点。一个微小的改进将在实施过程中产生巨大的变化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-07T19:10:45.510

```
//module dependent on ngRoute  
 var app=angular.module("myApp",['ngRoute']);
    //spa-Route Config file
    app.config(function($routeProvider,$locationProvider){
          $locationProvider.hashPrefix('');
          $routeProvider
            .when('/',{template:'HOME'})
            .when('/about/:paramOne/:paramTwo',{template:'ABOUT',controller:'aboutCtrl'})
            .otherwise({template:'Not Found'});
    }
   //aboutUs controller 
    app.controller('aboutCtrl',function($routeParams){
          $scope.paramOnePrint=$routeParams.paramOne;
          $scope.paramTwoPrint=$routeParams.paramTwo;
    }); 
```

在 index.html 中

```
<a ng-href="#/about/firstParam/secondParam">About</a> 
```

根据您的需要，firstParam 和 secondParam 可以是任何值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-27T02:04:46.547

我遇到了类似的问题并使用`$stateParams`而不是`routeParam`

# c# - C# 使用 Webrequests 登录到 xenForo 论坛？

> ID：11534711
> 
> 赞同：0
> 
> 时间：2012-07-18T05:20:15.837
> 
> 标签：c#, login, web, httpwebrequest, forum

我正在尝试使用 C# 中的 webrequest 登录 xenForo 论坛，但我似乎无法使其正常工作，因此我们将不胜感激。

我使用 Fiddler 获取登录时发送的 POST 数据，这是我得到的原始 POST 数据......

```
POST http://www.----------.com/login/login HTTP/1.1
Host: www.----------.com
Connection: keep-alive
Content-Length: 109
Cache-Control: max-age=0
Origin: http://www.----------.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://www.----------.com/login/login
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: xf_session=0c4e132b44ce81bdf93e70c57fe17eb6; __cfduid=d43498195638b2afe52ebaa9e1f97b8b31342586809; __cfduid=d43498195638b2afe52ebaa9e1f97b8b31342586809

login=USERNAME&register=0&password=PASSWORD&remember=1&cookie_check=1&redirect=forum%2F&_xfToken= 
```

所以在那之后我去创建一个网络请求以试图复制它，这就是我目前拥有的......

```
private void button1_Click(object sender, EventArgs e)
        {
        try
        {
        HttpWebRequest http = WebRequest.Create("http://www.----------.com/login/login") as HttpWebRequest;
        http.KeepAlive = true;
        http.Method = "POST";
        http.AllowAutoRedirect = true;
        http.ContentType = "application/x-www-form-urlencoded";
        string postData="login=" + usernameBox.Text + "&register=0&password=" + passwordBox.Text + "&remember=1&cookie_check=1&redirect=forum%2F&_xfToken=";
        byte[] dataBytes = UTF8Encoding.UTF8.GetBytes(postData);
        http.ContentLength = dataBytes.Length;
        using (Stream postStream = http.GetRequestStream())
        {
        postStream.Write(dataBytes, 0, dataBytes.Length);
        }
        HttpWebResponse httpResponse = http.GetResponse() as HttpWebResponse;
        int y = (int)httpResponse.StatusCode;
        MessageBox.Show(Convert.ToString(y), "Response Code Debug");
        foreach(Cookie c in httpResponse.Cookies)
         {
         MessageBox.Show(c.Name + " = " + c.Value, "Cookie Debug");
         }
        http = WebRequest.Create("http://www.----------.com/forum") as HttpWebRequest;
        http.CookieContainer = new CookieContainer();
        http.CookieContainer.Add(httpResponse.Cookies);
        http.AllowAutoRedirect=false;
        HttpWebResponse httpResponse2 = http.GetResponse() as HttpWebResponse;
        }
        catch (Exception ex)
        {
        MessageBox.Show(ex.Message, "Catch Debug");
        try
         {
         Clipboard.SetText(ex.Message);
         }
        catch
         {
         }
        } 
```

忽略其中的一些，我正在使用消息框来尝试更准确地弄清楚请求发生了什么，但不幸的是它并没有太大帮助。这是我第一次使用 webrequests，所以如果这只是某种愚蠢的错误，我深表歉意。

我只需要能够找出登录是否成功。此外，如果您需要使用 xenForo 站点，只需使用[http://www.shadygamer.com](http://www.shadygamer.com)，这是我正在尝试使用的站点。

正如我之前所说，感谢任何和所有帮助。谢谢你。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:04:05.270

你必须发送这个：

```
cookie_check=0 
```

不是这个：

```
cookie_check=1 
```

Xenforo CMS 不会检查 cookie。它应该有帮助:)。

# javascript - 围绕子元素展开 div（无包装）

> ID：11534716
> 
> 赞同：3
> 
> 时间：2012-07-18T05:20:27.183
> 
> 标签：javascript, html, css

从我所看到的情况来看，这在没有 javascript 的情况下是不可能的。我有一系列位于父 div 内的图像。这些图像几乎仅限于一种尺寸。我希望父 div 与图像一起扩大或缩小。现在它切断了图像 - 我认为是因为溢出：隐藏；

如果您使用萤火虫查看，这是 ID：

```
<div id="zt-container" class="zt-container">

<http://www.zakweinberg.com/imagezoomtour> 
```

我已经尝试了百分比并删除了高度 div。

CSS是最好的。如果没有，我对 javascript 持开放态度。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:06:30.497

因为您的`img.zt-current`元素是`position:absolute`，所以您的`.zt-item`div 的高度为 0。最重要的是，你有`height: 450px`div `.zt-container`。如果您取消图像上的绝对定位，以及容器上的固定高度，容器将扩展以适应图像。问题在于，当图像进行动画过渡时，它会扩展以显示图像，这可能是您不想要的。

`.zt-container`如果要保留动画过渡，您可能必须使用 javascript 更改 div 的高度。获取图像的高度，并使用它来设置容器的高度。就像是：

```
$('.zt-container').animate({
    height: $('img.zt-current').height()
}); 
```

这看起来类似于您想要的：[http ://css-tricks.com/snippets/jquery/animate-heightwidth-to-auto/](http://css-tricks.com/snippets/jquery/animate-heightwidth-to-auto/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:44:59.580

我检查了Mozilla中的链接。问题仅在于第二张图像。

将 width:100% 添加到您的图像中，这将适合 div。

# jquery - 错误：对象没有方法包装

> ID：11534717
> 
> 赞同：0
> 
> 时间：2012-07-18T05:20:30.453
> 
> 标签：jquery

chrome控制台错误：对象没有方法包装

```
$('.dropdown_menu_header_n').append($(this).children('div').clone().text().wrap('<a></a>')); 
```

请帮助我想附加一个 jquery 对象文本包装`<a></a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:22:06.290

`.text()`返回一个字符串，而不是一个 jQuery 对象。此外，`.wrap()`返回原始的 jQuery 元素，而不是包装的元素。

尝试这个：

```
$('.dropdown_menu_header_n').append($(this).children('div').clone().wrap('<a></a>').parent()); 
```

或者，如果您想包装内容，请尝试`.wrapInner`：

```
$('.dropdown_menu_header_n').append($(this).children('div').clone().wrapInner('<a></a>')); 
```

# c# - Wp7中的动画

> ID：11534718
> 
> 赞同：0
> 
> 时间：2012-07-18T05:20:36.547
> 
> 标签：c#

我正在为 Windows 手机制作 Live Candle 应用程序..我想在手机方向改变时改变框架的方向..我无法这样做..我正在使用以下代码：-

```
namespace sdkSimpleMotionCS
{
  public partial class MainPage : PhoneApplicationPage
  {
    Motion motion;

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        // Check to see if the Motion API is supported on the device.
        if (!Motion.IsSupported)
        {
            MessageBox.Show("the Motion API is not supported on this device.");
            return;
        }

        // If the Motion object is null, initialize it and add a CurrentValueChanged
        // event handler.
        if (motion == null)
        {
            motion = new Motion();
            motion.TimeBetweenUpdates = TimeSpan.FromMilliseconds(20);
            motion.CurrentValueChanged += new EventHandler<SensorReadingEventArgs<MotionReading>>(motion_CurrentValueChanged);
        }

        // Try to start the Motion API.
        try
        {
            motion.Start();
        }
        catch (Exception)
        {
            MessageBox.Show("unable to start the Motion API.");
        }
    }

    void motion_CurrentValueChanged(object sender, SensorReadingEventArgs<MotionReading> e)
    {
        // This event arrives on a background thread. Use BeginInvoke to call
        // CurrentValueChanged on the UI thread.
        Dispatcher.BeginInvoke(() => CurrentValueChanged(e.SensorReading));
    }
    private void CurrentValueChanged(MotionReading e)
    {
        if (motion.IsDataValid)
        {
            // Show the numeric values for attitude
            yawTextBlock.Text = "YAW: " + MathHelper.ToDegrees(e.Attitude.Yaw).ToString("0") + "°";
            pitchTextBlock.Text = "PITCH: " + MathHelper.ToDegrees(e.Attitude.Pitch).ToString("0") + "°";
            rollTextBlock.Text = "ROLL: " + MathHelper.ToDegrees(e.Attitude.Roll).ToString("0") + "°";

            // Set the Angle of the triangle RenderTransforms to the attitude of the device
            ((RotateTransform)yawtriangle.RenderTransform).Angle = MathHelper.ToDegrees(e.Attitude.Yaw);
            ((RotateTransform)pitchtriangle.RenderTransform).Angle = MathHelper.ToDegrees(e.Attitude.Pitch);
            ((RotateTransform)rolltriangle.RenderTransform).Angle = MathHelper.ToDegrees(e.Attitude.Roll);

            // Show the numeric values for acceleration
            xTextBlock.Text = "X: " + e.DeviceAcceleration.X.ToString("0.00");
            yTextBlock.Text = "Y: " + e.DeviceAcceleration.Y.ToString("0.00");
            zTextBlock.Text = "Z: " + e.DeviceAcceleration.Z.ToString("0.00");

            // Show the acceleration values graphically
            xLine.X2 = xLine.X1 + e.DeviceAcceleration.X * 100;
            yLine.Y2 = yLine.Y1 - e.DeviceAcceleration.Y * 100;
            zLine.X2 = zLine.X1 - e.DeviceAcceleration.Z * 50;
            zLine.Y2 = zLine.Y1 + e.DeviceAcceleration.Z * 50;
        }
    }
  }
} 
```

我正在使用运动概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:16:02.727

您需要在 Page 中[处理 OrientationChanged](http://msdn.microsoft.com/en-us/library/ff769553%28v=vs.92%29.aspx)事件或更好地使用此类而不是默认的 PhoneApplicationFrame [代码来动画和淡化 Windows Phone 方向更改](http://blogs.msdn.com/b/delay/archive/2010/09/28/this-one-s-for-you-gregor-mendel-code-to-animate-and-fade-windows-phone-orientation-changes-now-supports-a-new-mode-hybrid.aspx)

# c# - 用于自动记录方法进入和退出的 Tracer 类

> ID：11534722
> 
> 赞同：1
> 
> 时间：2012-07-18T05:21:29.987
> 
> 标签：c#, enterprise-library, policy-injection, logging-application-block, cross-cutting-concerns

我想跟踪每个函数入口和出口。假设我的类包含三个方法 MethodA MethodB MethodC... 通过实例有人调用 MethodA 和 methodA 调用 MethodB 和 MethodB 调用 methodC

```
public class test
{
   Public void MethodA()
   {
      MethodB();
   }
   public void MethodB()
   {
      // Some Operation
      MethodC();
   }
   public void MethodC()
   {
      //Some Operation
   }
} 
```

现在，当有人调用 test obj = new test(); 和 obj.MethodA(); 我希望跟踪器在数据库中写入类似“Entered MethodA”的下一行“Entered MethodB”下一行“Entered MethodC”，然后是“Exited MethodC”“Exited MethodB”，最后是“Exited Method a”

我的限制是：我不应该在每个方法进入和退出中编写此跟踪代码。我希望这会自动发生。只需将 App.config 文件的 Key 设置为 true，跟踪器就会开始操作，false 意味着跟踪禁用。

这是我们要调试的实时生产应用程序。

为此，我们有两种方法：

使用 Policy Injection Applicaiton 块用策略包装 Test 类的实例：从 ICallHandler 创建一个策略处理程序，然后创建一个 MatchingRule，在 MatchingRule 中读取 app.config 文件，如果启用了跟踪，则返回 true，否则返回 false。

这样做的缺点是：每次我们通过 Policy 容器创建任何类的 Instance 时，系统都会读取 app.config 文件，然后读取配置文件中存在的策略，即使跟踪被禁用......这可能会降级表现...

我们发现了另一种方法，即存在于 Logging Application Block 中的 Tracer 类。它有类似方法入口方法出口的功能。[http://www.michaelhamrah.com/blog/2010/02/performance-tracing-for-your-applications-via-enterprise-library/](http://www.michaelhamrah.com/blog/2010/02/performance-tracing-for-your-applications-via-enterprise-library/)

请提供更多关于 Tracer 类的想法。我的要求是否适合插入 Tracer 类。

*   POSTSHAP 不在我的预算中

非常感谢，

苏拉杰

# android - Eclipse：Android 项目：如何在构建时运行 shell 脚本？

> ID：11534727
> 
> 赞同：0
> 
> 时间：2012-07-18T05:22:04.870
> 
> 标签：android, eclipse, build, build-process, build-automation

我有一个构建脚本，它实际上调用 ant 来构建 apk 文件并在其上做一些事情并再次捆绑 dex 文件并调用 ant 来构建最终的 apk，并且该 APK 已准备好安装在模拟器或设备中。

我如何通过单击运行 -> 运行或项目 -> 构建或其他一些 eclipse 命令来完成所有这些操作。

我希望当我单击项目 - > 构建项目时，shell 脚本应该运行并且我准备好最终的 APK，然后通过单击运行它将安装到模拟器或 APK。

我怎样才能做到这一点？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:47:05.110

[这](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2FgettingStarted%2Fqs-92_project_builders.htm)描述了如何使用 Eclipse 中的 ant 进行构建。这是你想要的吗？

# asp.net - 使用 NHIbernate 的 asp.net 应用程序的远程数据库响应非常慢

> ID：11534728
> 
> 赞同：0
> 
> 时间：2012-07-18T05:22:09.657
> 
> 标签：asp.net, performance, nhibernate, orm, fluent-nhibernate

我可能会错过以下代码中要跟踪的内容，但这会减慢远程数据库服务器的响应时间。在部署应用程序的同一台机器上尝试使用数据库时，应用程序运行良好。此外，使用 NH-Profiler 验证了所有 nHibernate 任务。所有查询都受到控制。唯一的原因是数据库服务器的响应时间。此外，分析了数据库服务器，服务器很好，但这是唯一一个在通过远程数据库服务器运行时速度很慢的应用程序。

以下是**通用类**，用于所有 nHibernate 操作：

```
public class CommonRepository : IDisposable
    {
        protected static Configuration Config;
        protected static ISessionFactory SessionFactory;
        protected static ITransaction Transaction;
        static readonly object Factorylock = new object();

        /// <summary>
        /// Configure your repositories. It uses default DB string 
        /// Create singleton thread safe : found good stuff on Stackoverflow
        /// Referrence : http://stackoverflow.com/questions/2362195/ensure-nhibernate-sessionfactory-is-only-created-once
        /// </summary>
        public CommonRepository()
        {
            lock (Factorylock)
            {
                if (SessionFactory == null)
                {
                    // SessionFactory = NonFluentConfiguration();
                    SessionFactory = FluentConfig(msdnh.util.Config.ConnectionString); //Grab default string from Database
                }
            }

            Session = SessionFactory.OpenSession();
            Transaction = Session.BeginTransaction();

        }

        /// <summary>
        /// Configure your repositories
        /// </summary>
        /// <param name="connectionString">Connection string</param>
        public CommonRepository(string connectionString)
        {
            if (SessionFactory == null)
            {
                SessionFactory = FluentConfig(connectionString);
            }
            Session = SessionFactory.OpenSession();
            Transaction = Session.BeginTransaction();
        }
        private static ISessionFactory NonFluentConfiguration()
        {
            Config = new Configuration();
            Config.Configure();
            Config.AddAssembly(typeof(CommonRepository).Assembly);
            return Config.BuildSessionFactory();
        }

        private static ISessionFactory FluentConfig(string connString)
        {

            IPersistenceConfigurer persistenceConfigurer =
                MsSqlConfiguration
                    .MsSql2008
                .ConnectionString(connString)
                .ShowSql();

            // initialize nhibernate with persistance configurer properties
            Configuration cfg = persistenceConfigurer
                .ConfigureProperties(new Configuration());

            // add mappings definition to nhibernate configuration
            var persistenceModel = new PersistenceModel();
            persistenceModel.AddMappingsFromAssembly(Assembly.Load("Girlpower"));
            persistenceModel.Configure(cfg);

            // set session factory field which is to be used in tests
            return cfg.BuildSessionFactory();

        }

        protected static ISession Session { get; private set; }
        public bool Commit()
        {
            if (Transaction.IsActive)
            {
                try { Transaction.Commit(); return true; }
                catch (Exception exception)
                {
                    //Error log
                    return false;

                }
            }
            return false;
        }
        public bool Rollback()
        {
            if (Transaction.IsActive)
            {
                try { Transaction.Rollback(); return true; }
                catch (Exception exception)
                {
                    //Error log
                    return false;
                }
            }
            return false;
        }
        public void GenerateSchema()
        {
            new SchemaExport(Config).Execute(true, false, false);
        }
        private void BuildSchema(Configuration cfg)
        {
            new SchemaExport(cfg)
              .Create(false, true);
        }

        #region Repository Functions
        /// <summary>
        /// Saves or updates the object to the database, depending on the value of its identifier property.
        /// </summary>
        /// <param name="value">
        /// A transient instance containing a new or updated state.</param>
        public void Save(object value)
        {
            Session.Save(value);
        }
        /// <summary>
        /// Save object to repository
        /// </summary>
        /// <param name="value">
        /// Object for save</param>
        public void SaveorUpdate(object value)
        {
            Session.SaveOrUpdate(value);
        }
        /// <summary>
        /// Merge / copy state of given object to persit object
        /// </summary>
        /// <param name="value">Entity</param>
        public void SaveorUpdateCopy(object value)
        {
            Session.Merge(value);
        }
        /// <summary>
        /// Removes a persistent instance from the database.
        /// </summary>
        /// <param name="value">
        /// The instance to be removed.</param>
        public void Delete(object value)
        {
            Session.Delete(value);
        }
        /// <summary>
        /// Delete records from specific entity
        /// </summary>
        /// <typeparam name="T">Entity name</typeparam>
        /// <param name="id">value of record id</param>
        public void Delete<T>(int id) where T : class
        {
            Session.Delete(string.Format("from {0} where id = {1}", typeof(T), id));

        }
        /// <summary>
        /// Update specific fields of entity using IQuery
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="id"></param>
        /// <param name="updateColName"></param>
        /// <param name="updateColValue"></param>
        public void Update<T>(int id, string updateColName, object updateColValue) where T : class
        {
            var query = CreateQuery<T>(id, updateColName, updateColValue);
            query.ExecuteUpdate();
        }

        private static IQuery CreateQuery<T>(int id, string updateColName, object updateColValue) where T : class
        {
            return Session.CreateQuery(string.Format("Update {0} set {1} = {2} where id = {3} ", typeof(T), updateColName, updateColValue, id));
        }

        /// <summary>
        /// Delete records from specific entity by speciying column name
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="id"></param>
        /// <param name="colName"></param>
        public void Delete<T>(int id, string colName) where T : class
        {
            Session.Delete(string.Format("from {0} where {1} = {2}", typeof(T), colName, id));

        }
        /// <summary>
        /// Returns a strong typed persistent instance of the given named entity with the given identifier, or null if there is no such persistent instance.
        /// </summary>
        /// <typeparam name="T">The type of the given persistant instance.</typeparam>
        /// <param name="id">An identifier.</param>
        public T Get<T>(object id)
        {
            T returnVal = Session.Get<T>(id);
            return returnVal;
        }
        /// <summary>
        /// Find Results by Name
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="name"></param>
        /// <returns></returns>
        public T FindByName<T>(string name)
            where T : class
        {
            var criteria = Session.CreateCriteria<T>();
            var targetEntity = typeof(T);

            if (targetEntity == typeof(Article))
                criteria.Add(Restrictions.Eq("Title", name));
            else if (targetEntity == typeof(Category))
                criteria.Add(Restrictions.Eq("CatName", name));
            else if (targetEntity == typeof(News))
                criteria.Add(Restrictions.Eq("Title", name));
            else if (targetEntity == typeof(Video))
                criteria.Add(Restrictions.Eq("Title", name));
            else if (targetEntity == typeof(NewsCategory))
                criteria.Add(Restrictions.Eq("NewsCatName", name));
            else if (targetEntity == typeof(VideoCategory))
                criteria.Add(Restrictions.Eq("VideoCatName", name));
            else
                criteria.Add(Restrictions.Eq("Name", name));

            return FindUnique<T>(criteria);
        }
        public T FindBySpecificColumn<T>(string colname, string findValue)
           where T : class
        {
            var criteria = Session.CreateCriteria<T>();
            criteria.Add(Restrictions.Eq(colname, findValue));
            return FindUnique<T>(criteria);
        }
        public T FindBySpecificColumn<T>(string colname, int findValue)
          where T : class
        {
            var criteria = Session.CreateCriteria<T>();
            criteria.Add(Restrictions.Eq(colname, findValue));
            return FindUnique<T>(criteria);
        }
        public IList<T> FindRandomBySpecificColumn<T>(string colname, int findValue)
         where T : class
        {
            var criteria = Session.CreateCriteria<T>();
            criteria.Add(Restrictions.Eq(colname, Convert.ToBoolean(findValue)));
            criteria.AddOrder(new RandomOrder());
            return Find<T>(criteria);
        }
        public IList<T> FindTopRecents<T>(int recCount, string colName) where T : class
        {
            return Session.CreateQuery(string.Format("from {0} order by {1} DESC", typeof(T), colName))
                .SetFirstResult(0)
                .SetMaxResults(recCount)
                .List<T>();

        }
        /// <summary>
        /// Returns a list of all instances of type T from the database.
        /// </summary>
        /// <typeparam name="T">The type of the given persistant instance.</typeparam>
        public IList<T> GetAll<T>()
            where T : class
        {
            IList<T> returnVal = Session.CreateCriteria<T>().List<T>();
            return returnVal;
        }
        /// <summary>
        /// Returns a list of all instances of type T from the database for pagination
        /// </summary>
        /// <typeparam name="T">The type of the given persistant instance.</typeparam>
        /// <param name="pageIndex">Number- page index.</param>
        /// <param name="pageSize">Number -  maximum page size.</param>
        /// <returns>List of type the given persistent instance</returns>
        public IList<T> GetAll<T>(int pageIndex, int pageSize)
            where T : class
        {
            var criteria = Session.CreateCriteria(typeof(T));
            if (pageSize > 0)
            {
                criteria.SetMaxResults(pageSize);
            }
            return criteria.List<T>();
        }
        /// <summary>
        /// Find Unique values
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="criteria"></param>
        /// <returns></returns>
        public T FindUnique<T>(ICriteria criteria)
            where T : class
        {
            return (T)criteria.UniqueResult();
        }
        /// <summary>
        /// 
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="criteria"></param>
        /// <returns></returns>
        public IList<T> Find<T>(ICriteria criteria) where T : class
        {
            return criteria.List<T>();
        }
        public IList<T> Find<T>(IEnumerable<string> strs)
            where T : class
        {
            IList<ICriterion> objs = strs.Select(Expression.Sql).Cast<ICriterion>().ToList();
            var criteria = Session.CreateCriteria(typeof(T));
            foreach (var rest in objs)
                criteria.SetFirstResult(0);
            return criteria.List<T>();
        }
        public IList<T> Find<T>(ICriteria criteria, PagingInfo paging) where T : class
        {
            paging.RowCount = Count(criteria);

            if (paging.PageSize > 0)
            {
                criteria.SetMaxResults((int)paging.PageSize);
                criteria.SetFirstResult((int)(paging.PageSize * paging.CurrentPage));
            }

            return criteria.List<T>();
        }
        protected int Count(ICriteria criteria)
        {
            //TODO check performance of this method (probably is better to use HQL with the COUNT(*) command)
            return criteria.List().Count;
        }
        /// <summary>
        /// 
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="query"></param>
        /// <returns></returns>
        public IList<T> GetListByQuery<T>(IQuery query)
            where T : class
        {
            var list = query.List<T>();
            return list;
        }

        public ICriteria CreateCriteria<T>() where T : class
        {
            return Session.CreateCriteria(typeof(T));
        }

        #endregion
        #region IDisposable methods
        public void Dispose()
        {
            if (Session != null)
            {
                if (Session.IsOpen) Session.Close();
            }
        }
        #endregion
    } 
```

我们以下列方式调用上面的类：

```
public static bool CheckIfUserNameAlreadyExists(string username)
    {
        bool isExist;
        using (var userRepo = new CommonRepository())
        {
            isExist = userRepo.FindBySpecificColumn<User>("LoginId", username) != null;
        }
        return isExist;
    } 
```

我们在应用程序中使用**Fluent Mapping**。

请建议是否需要更改公共存储库类或需要实现一些其他模式。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:57:41.830

需要检查的一些事项：

*   在您的映射中 - 您是否渴望通过指定 not lazyload 来加载整个用户图
*   检查查看生成的 SQL 以确认上述内容
*   是否有大量用户 - 您是否有索引
*   如果您使用 log4net 之类的日志记录工具 - 请确保您没有在调试模式或类似模式下记录 NHibernate 信息

您似乎还可能在每个请求上创建一个会话工厂（取决于该存储库的范围），这很**昂贵**。您的会话工厂应该是一个单例，并为每个 Web 请求提供一个会话，范围为 Web 请求的生命周期。

配置应该在应用程序启动时真正运行一次。

# python - 如何将具有列表作为值的字典转换为具有单个值的字典列表？

> ID：11534733
> 
> 赞同：3
> 
> 时间：2012-07-18T05:22:27.683
> 
> 标签：python, dictionary

我有这个字典：

```
{
  'x': [0,1,2],
  'y': ['a','b','c']
} 
```

一个字典，其中所有值都是列表，长度相同。

我想制作这个：

```
[
  { 'x': 0, 'y': 'a' },
  { 'x': 1, 'y': 'b' },
  { 'x': 2, 'y': 'c' }
] 
```

有没有一种有效的方法来做到这一点？希望使用一些东西`itertools`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T05:27:46.783

```
[dict(zip(d, vals)) for vals in zip(*d.values())] 
```

例如：

```
>>> d = {'y': ['a', 'b', 'c'], 'x': [0, 1, 2]}
>>> [dict(zip(d, vals)) for vals in zip(*d.values())]
[{'y': 'a', 'x': 0}, {'y': 'b', 'x': 1}, {'y': 'c', 'x': 2}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:27:30.377

```
[dict(stuff) for stuff in zip(*[[(k, v) for v in vs] for k, vs in myDict.iteritems()])] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:30:31.870

```
[{'x': v, 'y': d['y'][i]} for i, v in enumerate(d['x'])] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:36:33.327

```
 d = {
  'x': [0,1,2],
  'y': ['a','b','c']
}
values = zip(*d.values())
print [dict(zip(d.keys(), v)) for v in values] 
```

# jquery - Jquery Accordion 不重新整理内容

> ID：11534735
> 
> 赞同：1
> 
> 时间：2012-07-18T05:23:00.653
> 
> 标签：jquery, accordion, dynamic-data, thumbnails

我想将动态内容添加到 JQuery Accordion 容器中。我的代码*几乎*可以工作，但是有一个问题。

![截屏](../Images/5bb188eecce6753b291032bae13abdb5.png)

我不知道如何让第一个容器识别新图像。它就像容器中没有任何东西一样。我怀疑这与使用 Javascript 加载图像有关，但我不是专家！我的猜测是出了点问题。所有按钮仍然起作用，手风琴在所有其他区域都可以正常工作。我尝试设置不同的参数，例如 autoheight、clearStyle 等。对我来说没有任何效果。以下是修剪过的商品：

**HTML**

```
.........

<section id="rightMenu">
    <div id="addHolder">
        <h3 class="topHeader"><a href="#">Quick Pick</a></h3>
            <ul id="quickPick"></ul>

        <h3><a href="#">Notes</a></h3>
        <div>
            <p>
             ......
            </p>
        </div>
        <h3><a href="#">Quiz</a></h3>

        <div>
            <p>
             .....
            </p>
        </div>
        <h3><a href="#">Image Options</a></h3>

        <div></div>
.........

<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery-ui-1.8.21.custom.min.js"></script>
<script src="js/modernizr.js"></script>
<script src="js/modUI.js"></script>
<script src="js/imageProvider.js"></script>
<script>
window.onload = imageProvider.initLinks;
$(document).ready(modUI.modAccord);
</script> 
```

**JS-modUI.js**

```
var modUI = {
init: function(){
},
modAccord: function(){
    $( "#addHolder" ).accordion({
        autoHeight: true,
        navigation: true,
        clearStyle: true
    });
}
}; 
```

**JS - imageProvider.js**

```
var imageProvider = {

thisPic:0,

initLinks:function () {
    imageProvider.imageList(14, 2);
    document.getElementById("nextPic").onclick = imageProvider.processNext;
    document.getElementById("prevPic").onclick = imageProvider.processPrev;

},

   ....

multiDimensionArray:function (rows, columns) {
    var myArray = new Array(rows);
    for (var i = 0; i < rows; i++) {
        myArray[i] = new Array(columns);
        for (var j = 0; j < columns; j++) {
            myArray[i][j] = "";
        }
    }
    return (myArray);
},

  .....

imageList:function (qty, data) {
    var imageData = imageProvider.multiDimensionArray(qty, data);
    var filePath = './images/mods/angiograph/head/';
    var imgPrefix = 'Ag';
    var imageType = '.jpg';

    for (var i = 0; i < qty; i++) {
        imageData[i][1] = filePath + imgPrefix + (i + 1) + imageType;
    }

   for (var j = 0; j<imageData.length; j++){
            $("<li>", { html:'<img src="' + imageData[j][1] + '" width="75" height="75"/>'}).appendTo("#quickPick");
    }

}
 }; 
```

**CSS**

```
#mainSection #rightMenu {
position: absolute;
width: 15%;
height: 90%;
left:65%;
top: 5%;
background-color: #d3cbbd;

-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px;

-webkit-box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
-moz-box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
box-shadow: 0px 0px 15px rgba(0, 0, 0, .75);
}

#mainSection #imageHolder img{
position: absolute;
width: 63%;
height: 70%;
left: 15%;
top: 15%;
}

#mainSection #rightMenu #addHolder{
position: absolute;
width: 100%;
height: 100%;
left:0;
top: 0;
}

#mainSection #rightMenu #addHolder h3.topHeader {

position: relative;
top: -1px;
-webkit-border-radius: 10px;

-moz-border-radius-topleft: 10px;
-moz-border-radius-topright: 10px;

border-top-left-radius: 10px;
border-top-right-radius: 10px;
}

#mainSection #rightMenu #addHolder p{
font-size: 1.1em;
font-family: verdana, sans-serif;
}

#mainSection #rightMenu #addHolder #quickPick{
position: absolute;
list-style: none;
top: 6em;
left: .1em;
height: 30%;
}

#mainSection #rightMenu #addHolder li{
display: inline;
float: left;
margin-left: .2em;
}

.ui-accordion { width: 100%; }
.ui-accordion .ui-accordion-header {
cursor: pointer;
position: relative;
margin-top: 1px;
background-color: #456f74;

}
.ui-accordion .ui-accordion-li-fix { display: inline; }
.ui-accordion .ui-accordion-header-active {
border-bottom: 0 !important;
background-color: #eb5937;
}
.ui-accordion .ui-accordion-header a {
display: block;
font-family: verdana, sans-serif;
font-size: 1em;
padding: .65em .65em .65em 1em;
text-decoration: none;
color: #f5f5f5;

}
.ui-accordion-icons .ui-accordion-header a {
padding-left: .5em;
}
.ui-accordion .ui-accordion-header .ui-icon { position: absolute; left: .5em; top: 50%; margin-top: -8px; }
.ui-accordion .ui-accordion-content {
padding: 1em 1em;
border-top: 0;
margin-top: -25px;
position: relative;
top: 0;
overflow: auto;
display: inline-block;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:29:25.820

`<ul id="quickPick"></ul>`真的不应该`<div><ul id="quickPick"></ul></div>`吗？

# java - 如何在 Java 中创建与平台无关的 GUI？

> ID：11534739
> 
> 赞同：0
> 
> 时间：2012-07-18T05:23:28.963
> 
> 标签：java, user-interface

我目前正在开发一个 java 应用程序，其 GUI 在操作系统方面略有不同。

该应用在WINDOWS 7和Redhat linux下的截图如下

![在此处输入图像描述](../Images/068d8faf8d50e9f4dae0f586eb2a27dc.png)

![在此处输入图像描述](../Images/6168733a2430c736d5ce74c41b5eb6b5.png)

从图片中我们可以看出，GUI 元素的一致性是不同的。如何使 GUI 保持一致？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:28:13.330

为您的应用程序使用平台一致`look and feel`的。

请参阅： [http ://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

Nimbus 是最近的一款，看起来不错： [http ://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:30:31.017

使桌面应用程序 GUI 在操作系统中看起来完全相同是一件令人头疼的事情，通常不值得痛苦。本质上，您需要制作自定义 UI 元素而不是使用默认值，因为默认值将一些查找留给操作系统。（有一些图书馆可以帮助解决这个问题。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T05:35:37.197

我认为 windows 和 linux 上的默认外观管理器不同。您必须找出两个平台上是否有共同的外观管理器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:27:48.597

您可以制作自己的 gui 控件并像图像一样绘制它们。请记住，使一切正常运行需要更长的时间。

# google-maps - 与*地图拖动和缩放同步结果？

> ID：11534744
> 
> 赞同：0
> 
> 时间：2012-07-18T05:23:40.187
> 
> 标签：google-maps

我刚刚加入了stackoverflow，但是在在这里发布我的问题之前，我已经阅读了多个线程和几篇文章。我们目前正在使用 Google Maps V2（迁移到 V3 将在启动后进行，因为目前时间很关键）。

**过程**：当用户访问该站点时，我们会检测到他们的城市，并且我们会以它为中心的地图。类似于访问 Yelp 并浏览特定城市的情况。完整的物理地址与每个项目/结果相关联，因此如果适用，用户将在其本地地图上看到“结果”。

**问题：**我们无法将结果与*地图屏幕*“同步” 。它应该以这样一种方式，当用户放大或拖动地图时——列表会相应地更新。但实际发生的是，结果正在按邮政编码更新，因此这会显示地图屏幕之外的结果。我在 V3 上找到了几个关于这个问题的线程，甚至看到了一些解决方案，但它们不适用于 V2。我希望我们的开发人员对谷歌地图有更多的了解，他很好地完成了网站的其余部分！

对此事的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:21:59.623

此混搭具有您正在寻找的相同功能，它是 V2：

[http://maps.forum.nu/server_side_clusterer/](http://maps.forum.nu/server_side_clusterer/)

请参阅以下行：

```
GEvent.addListener(map, "moveend", moveEnd);
GEvent.addListener(map, "zoomend", zoomEnd); 
```

他们添加事件侦听器并调用函数 moveEnd 和 zoomEnd。然后这些函数获取新的位置信息并调用函数 doSearch() 进而向服务器发送 AJAX 调用以获取新数据。

# r - 在 Adjusted Rand Index 中的参数 x 和 y 中输入值的正确步骤？

> ID：11534746
> 
> 赞同：2
> 
> 时间：2012-07-18T05:23:49.563
> 
> 标签：r, clustered-index, hierarchical-clustering

我试图使用**调整后的兰德指数**来比较聚类结果。这里，我以 Iris 数据集为例。这些是代码：

```
iris.data=subset(iris, select=-Species)
iris.eucdist <- dist(iris.data, method="euclidean")
iris.sqeucdist <- iris.eucdist^2
iris.hc <- hclust(iris.sqeucdist, "ward")
plot(iris.hc, main="Dendrogram of Ward's Method", label=iris$Species)
table(cutree(iris.hc, 3), iris$Species)

##        setosa versicolor virginica
##   1     50          0         0
##   2      0         49        15
##   3      0          1        35 
```

首先，我使用上表中的值手动计算 ARI（Hubert and Arabie，1985）。答案是 0.7311986。但是，当我使用 R 时，我无法得到相同的答案。

```
library(mclust)
U=c(50,0,0,50,0,49,1,50,0,15,35,50)
V=c(50,0,0,50,0,49,15,64,0,1,35,36)
adjustedRandIndex(U,V)
## [1] 0.6961326 
```

也许，我输入值的方式是错误的。有没有办法实现这一点，以便 R 的答案与手动计算相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:41:57.903

查看`?adjustedRandIndex`建议（状态） `x`并且`y`应该是类标签或类似的向量，而不是交叉制表的结果

```
adjustedRandIndex(cutree(iris.hc, 3), iris$Species) 
```

给

```
## [1] 0.7311986 
```

# c++ - 有没有办法仅在覆盖文件的情况下禁用 DisplayAlerts？

> ID：11534748
> 
> 赞同：2
> 
> 时间：2012-07-18T05:23:59.237
> 
> 标签：c++, vba, excel

我正在研究 Excel 的 _Workbook.SaveAs API

如果有同名文件，我需要总是替换。不应该有对话框询问我是否要覆盖文件。

现在，代码是：

```
app->put_DisplayAlerts(LOCALE_USER_DEFAULT, VARIANT_FALSE);
activeWorkbook->SaveAs(filePath,
                        fileType,
                        vtMissing,
                        vtMissing,
                        vtMissing,
                        vtMissing, 
                        Excel::xlNoChange);
app->put_DisplayAlerts(LOCALE_USER_DEFAULT, VARIANT_TRUE); 
```

**问题是这会禁用所有警报。我仍然想要其他警报。**

例如，当用户尝试将带有宏的工作簿保存为“.xlsx”格式时，应该有一个警告对话框告诉用户不会包含宏。

**问题**

有没有办法为所有版本的 Excel 实现这一目标？

提前感谢=]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:15:52.783

在 Excel VBA 中，您可以简单地执行以下操作：

```
Excel.Application.DisplayAlerts = False 
```

这是我在现有文件上保存文件时通常使用的代码。我现在还想检查我试图覆盖的文件是否已打开以供其他用户通过以下功能（我从 SO 获得）进行编辑：

```
 Enum IsFileOpenStatus
                    ExistsAndClosedOrReadOnly = 0
                    ExistsAndOpenSoBlocked = 1
                    NotExists = 2
        End Enum

        Function IsFileReadOnlyOpen(FileName As String) As IsFileOpenStatus

        'ExistsAndClosedOrReadOnly = 0
        'ExistsAndOpenSoBlocked = 1
        'NotExists = 2

        With New FileSystemObject
                    If Not .FileExists(FileName) Then
                                IsFileReadOnlyOpen = 2  '  NotExists = 2
                                Exit Function 'Or not - I don't know if you want to create the file or exit in that case.
                    End If
        End With

        Dim iFilenum As Long
        Dim iErr As Long
                    On Error Resume Next
                                iFilenum = FreeFile()
                                Open FileName For Input Lock Read As #iFilenum
                                Close iFilenum
                                iErr = Err
                    On Error GoTo 0

        Select Case iErr
                Case 0: IsFileReadOnlyOpen = 0 'ExistsAndClosedOrReadOnly = 0
                Case 70: IsFileReadOnlyOpen = 1 'ExistsAndOpenSoBlocked = 1
                Case Else: IsFileReadOnlyOpen = 1 'Error iErr
        End Select

        End Function    'IsFileReadOnlyOpen 
```

因此，当在 Excel VBA 中保存文件时，我会有以下内容：

```
 Excel.Application.DisplayAlerts = False
                    If IsFileReadOnlyOpen(myFilePathName) <> ExistsAndOpenSoBlocked Then
                               Excel.ActiveWorkbook.SaveAs myFilePathName, , , , True
                    End If
        Excel.Application.DisplayAlerts = True 
```

# windows-phone-7.1 - 如何在 Windows Phone 7 的列表框项目中应用替代行背景？

> ID：11534749
> 
> 赞同：2
> 
> 时间：2012-07-18T05:24:00.133
> 
> 标签：windows-phone-7.1

我需要显示`ListBox`具有不同背景的替代行。我的`ListBox`样子是这样的：

```
<ListBox Height="547" HorizontalAlignment="Left" Margin="7,203,0,0" Name="lstboxProducts" VerticalAlignment="Top" Width="424" >
    <ListBoxItem>
        <Grid Height="100" Width="420">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
            </Grid.ColumnDefinitions>

            <Image Grid.Column="0" Source="/Images/dark/appbar.magnify.png"/>
            <StackPanel Grid.Column="1">
                <TextBlock Text="Item heading" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" Height="56" />
                <TextBlock Text="item description" TextWrapping="Wrap" Style="{StaticResource PhoneTextSubtleStyle}" Height="46" Width="276" />
            </StackPanel>
            <Image Grid.Column="2" Source="/Images/dark/appbar.magnify.png"/>
        </Grid>
    </ListBoxItem>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:30:08.600

```
public class AlternatingRowsConverter : IValueConverter
{
private bool _alternate;

public object Convert(object value, Type targetType, object parameter,
           System.Globalization.CultureInfo culture)
{
  _alternate = !_alternate;
  return _alternate
        ? new SolidColorBrush(Color.FromArgb(255, 255, 0, 0))
        : new SolidColorBrush(Color.FromArgb(255, 0, 0, 255));
}

public object ConvertBack(object value, Type targetType, object parameter,
             System.Globalization.CultureInfo culture) 
{ throw new NotImplementedException(); }
 }
} 
```

然后，列表框模板：

```
 <ListBox ItemsSource="{Binding}"
       x:Name="Mylistbox"
       SelectionChanged="Mylistbox_SelectionChanged">
    <ListBox.ItemTemplate>
      <DataTemplate>
        <StackPanel>
          <Grid Background="{Binding Converter={StaticResource alternateConvertor}}">
            <TextBlock Grid.Column="0"
                  Text="{Binding Name, Mode=TwoWay}"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Left" />
          </Grid>
        </StackPanel>
      </DataTemplate>
    </ListBox.ItemTemplate>
  </ListBox> 
```

最后在资源字典中定义转换器对象

```
 <phone:PhoneApplicationPage.Resources>
    <WindowsPhoneApplication5:AlternatingRowsConverter x:Key="alternateConvertor" />
   </phone:PhoneApplicationPage.Resources> 
```

[更多信息在这里](http://social.msdn.microsoft.com/Forums/en/windowsphone7series/thread/f9e9ce26-d576-45f8-a79d-762176695385)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T19:41:21.773

这是 XAML 的外观示例。我使用 Pivot Template 应用程序创建了一个新应用程序。

```
 <ListBox x:Name="FirstListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items}">
        <ListBox.ItemTemplate>
            <DataTemplate>
              <StackPanel Margin="0,0,0,17" Width="432" Height="78">
                <StackPanel.Background>
                    <ImageBrush Stretch="Fill" ImageSource="/Koala.jpg"/>
                </StackPanel.Background>
                  <TextBlock Text="{Binding LineOne}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                  <TextBlock Text="{Binding LineTwo}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
              </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

所以默认的 ItemTemplate 使用 StackPanel 作为主容器。您在这里要做的是将图像设置为该 StackPanel 的背景。这就是以下几行的含义：

```
<StackPanel.Background>
    <ImageBrush Stretch="Fill" ImageSource="/Koala.jpg"/>
</StackPanel.Background> 
```

使用上面的代码，您将 ImageBrush 设置为 StackPanel 的 Background 属性。

使用该代码，每个 ListBoxItem 都会显示一只考拉。

# blackberry - 黑莓备用入口点 - 推送全局屏幕挂起

> ID：11534752
> 
> 赞同：1
> 
> 时间：2012-07-18T05:24:52.980
> 
> 标签：blackberry, push-notification

我正在处理推送通知。当我使用备用入口点进行推送通知时，设备的屏幕挂起。但是当我尝试不使用备用入口点时，没有问题。我如何解决这个问题？

```
 final UiEngine ui = Ui.getUiEngine();
 Dialog myDialog = new Dialog(Dialog.D_OK_CANCEL, text, Dialog.OK, null, Manager.VERTICAL_SCROLL);
 myDialog.setDialogClosedListener(new MyDialogClosedListener());
 ui.pushGlobalScreen(myDialog, 1, UiEngine.GLOBAL_QUEUE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:51:09.227

试试下面的代码

```
public static void main(String[] args) {
    if (args.length > 0 && args[0].equals("pus") ){
        theApp = new App();
        theApp.enterEventDispatcher();
    } else { 
        BackgroundApplication backApp=new BackgroundApplication();
        backApp.setupBackgroundApplication();
        backApp.enterEventDispatcher();
    } 
} 
```

**BackgroundApplication**扩展了应用程序。

```
 try{

      final Dialog screen = new Dialog(Dialog.D_OK_CANCEL, "hello",
                    Dialog.OK,
                    null,
                    Manager.VERTICAL_SCROLL);
     final UiEngine ui = Ui.getUiEngine();
     Application.getApplication().invokeAndWait(new Runnable() {
     public void run() {
     NotificationsManager.triggerImmediateEvent(0x749cb23a76c66e2dL, 0, null, null);
     ui.pushGlobalScreen(screen, 1, UiEngine.GLOBAL_QUEUE);
        }
       });
     screen.setDialogClosedListener(new MyDialogClosedListener());
       }
     catch (Exception e) {
        // TODO: handle exception
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:09:55.090

`main`从备用入口点进入时，您可能没有在方法中创建 UiApplication 实例。

如果是这样，`Ui.getEngine`将返回 null。

编辑
使 bg 应用程序在 main 中输入事件调度程序：

```
 public static void main(String[] args) {
        if (args.length > 0 && args[0].equals("pus") ){
            theApp = new App();
            theApp.enterEventDispatcher();
        } else { 
            BackgroundApplication backApp=new BackgroundApplication();
            backApp.setupBackgroundApplication();
            backApp.enterEventDispatcher();
        } 
    } 
```

# delphi - Delphi - 查找给定位置/索引的字符

> ID：11534754
> 
> 赞同：7
> 
> 时间：2012-07-18T05:25:12.730
> 
> 标签：delphi, pascal, lazarus

我已经到处搜索了这个。在 Delphi/Lazarus 中，给定一个位置，我想在不同的字符串中找到该位置的字符。我知道如何找到一个角色的位置。我需要它的另一种方式：给定位置的角色。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T05:38:38.147

在 Delphi 中，可以使用数组表示法对字符串中的字符进行索引。请注意，字符串中的第一个字符的索引为 1。

```
var
  s: string;
  c: char;
begin
  s := 'Hello';
  c := s[1]; //H
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T05:39:05.770

可以像访问数组一样访问字符串。

MyString[12] 为您提供字符串中的第 12 个字符。注意：这是 1-index（因为第 0 个位置用于保存字符串的长度）

例子 ：

```
var
  MyString : String;
  MyChar : Char;
begin
  MyString := 'This is a test';
  MyChar := MyString[4]; //MyChar is 's'
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-13T06:09:08.583

这最后一次回答是在 2012 年，所以我想我只是添加一个更新：

对于最新版本的 Delphi（目前为东京版 - 使用 FMX 框架在多个平台上运行），StringHelper 类提供了一个跨平台字符索引解决方案。此实现假定所有支持的平台都有一个从 0 开始的索引。

例如。

```
var
  myString: String;
  myChar: Char;
begin
  myChar := myString.Chars[0]; 
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-14T12:02:01.460

```
// AIndex: 0-based
function FindCharactedOfStringFromIndex(const AString: String; const AIndex: Integer): Char;
const
  {$IFDEF CONDITIONALEXPRESSIONS}
    {$IF CompilerVersion >= 24}
    STRING_FIRST_CHAR_INDEX = Low(AString);
    {$ELSE}
    STRING_FIRST_CHAR_INDEX = 1;
    {$ENDIF}
  {$ELSE}
  STRING_FIRST_CHAR_INDEX = 1;
  {$ENDIF}
var
  index: Integer;
begin
  index := STRING_FIRST_CHAR_INDEX + AIndex;
  Result := AString[index];
end; 
```

# python - python中的函数名称相同，没有错误？

> ID：11534759
> 
> 赞同：0
> 
> 时间：2012-07-18T05:25:44.697
> 
> 标签：python, function, nested, overloading, overriding

老实说，我期待某种错误，比如“**你不能像这样在同一个主体中重命名两个同名的嵌套函数”**，我们可以在 python 中定义任意数量的同名函数吗？

```
In [40]: def add(i,j):
   ....:     def add(i,j):
   ....:         print i+j
   ....:     def add(i,j):    
   ....:         print i-j
   ....:     return add(i,j)
   ....: 

In [41]: add(5,4)
1 
```

**这是函数的重载，还是函数的覆盖？？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:30:03.760

定义一个函数就像给一个变量赋值一样。您可以在 Python 中执行此操作：

```
a = 1
a = 2 
```

同样，您可以这样做：

```
def f():
    return 1
def f():
    return 2 
```

在这两种情况下，最后指定的值都会覆盖之前的任何值。所以最后一个赢了。

它是一个嵌套函数的事实与这个问题无关。这同样适用于任何情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T05:33:27.767

当然。语句在`def`功能上是（函数对名称的）赋值，您可以对同一个名称进行任意数量的赋值。（重要的是要意识到函数定义是在 Python 中*执行*的，它们不是在编译时静态评估的。）

有一些在类定义中捕捉到这一点的 hacky 方法，比如我在 5 月发布的[这个方法](https://stackoverflow.com/questions/10761988/how-can-i-detect-duplicate-method-names-in-a-python-class/10762966#10762966)。如果您使用的是 Python 3，则有[更好的方法](https://stackoverflow.com/questions/10762088/python-metaclasses-why-isnt-setattr-called-for-attributes-set-during-class/10763270#10763270)。

对于函数，这不起作用，所以我相信你会被这种行为困扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:29:39.273

最后一个函数覆盖了其他函数......所以，没有错误！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T06:04:46.153

函数定义在当前符号表中引入函数名称。函数名称的值具有被解释器识别为用户定义函数的类型。然后可以将此值分配给另一个名称，甚至可以通过重新定义函数来重新分配。

在重新定义函数的情况下，将使用最新的定义，因为它是解释器识别的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-10T15:57:55.063

为了清楚起见，第二个嵌套`add()`覆盖了第一个，但外部的保持不变。

这是一个最小的例子：

```
def do_sth(s):
    def do_sth(s):
        print('Hello, %s!' % s)
    print('Ola')
    do_sth(s)

>>> do_sth('chuinul')
Ola
Hello, chuinul!
>>> do_sth('chuinul')
Ola
Hello, chuinul! 
```

当您`do_sth()`第二次调用时，这仍然是您定义的正在调用的外部函数。否则，您将只有：

```
>>> do_sth('chuinul')
Hello, chuinul! 
```

# visual-studio-2010 - 你对 Bug Tracking 或 Bug 数据库有什么建议？

> ID：11534762
> 
> 赞同：0
> 
> 时间：2012-07-18T05:26:11.483
> 
> 标签：visual-studio-2010, web-applications, bug-tracking

在我们公司，当我们收到错误报告时，我们会修复它。一段时间后它可能会再次发生，但到那时我们已经忘记了原因并再次修复它。就像我们处于错误循环中一样。

这是因为我们有一个可以为每个客户配置的动态数据应用程序，并且错误主要是由于数据造成的。所以我的问题是我们应该如何保留错误的历史，包括我们如何修复它们，然后搜索并使用错误历史来修复类似的错误？

我什至不知道我应该搜索哪个关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:32:57.360

您还可以使用[Boto](http://www.botoapp.com)来跟踪错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:28:44.430

有许多开源或免费工具，您可以在其中维护错误列表。我所知道的其中很少有，Double Chocolate、BugZilla、JIRA 等……谷歌搜索你会得到很多。当然，还有一些付费工具。

您可以搜索“问题跟踪工具”或“错误跟踪工具”。

下面的链接已经很老了，但你仍然可以找到其中的许多 [http://www.thegeekstuff.com/2010/08/bug-tracking-system/](http://www.thegeekstuff.com/2010/08/bug-tracking-system/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:22:29.527

维基百科有一篇关于问题/错误跟踪系统的非常好的比较文章：[http ://en.wikipedia.org/wiki/Comparison_of_issue_tracking_systems](http://en.wikipedia.org/wiki/Comparison_of_issue_tracking_systems)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:32:55.010

我有使用 Bugzilla 和 Fogbugz 跟踪错误的经验。两者都很好。

Bugzilla（开源）是一个基于 Web 的通用 bugtracker 和测试工具，最初由 Mozilla 项目开发和使用。

FogBugz 是一个基于 Web 的集成项目管理系统，具有错误/问题跟踪、论坛、wiki、客户关系管理和基于证据的调度功能。

# objective-c - 在 NSCollectionView 中显示 NSPopover？

> ID：11534769
> 
> 赞同：0
> 
> 时间：2012-07-18T05:27:04.573
> 
> 标签：objective-c, nscollectionview, nscollectionviewitem, nspopover

*（注：问题[之前已经提出过](https://stackoverflow.com/questions/7006102/nspopover-in-nscollectionview-or-not)，一年多前的结果还没有定论。希望我们现在知道更多并且可以解决它？）*

双击时，我试图在 NSCollectionItem 上显示 NSPopover。我的 NSCollectionView 设置正确并接收输入。

（如果我将代码复制粘贴到其他 NSView 子类，它工作得很好。NSCollectionView 有一些东西似乎把事情搞砸了。）

编码：

**BIECollectionViewItem.h**

```
#import <Cocoa/Cocoa.h>

@class BIEAppDelegate;

@interface BIECollectionViewItem : NSView {
    IBOutlet NSPopover *popover;
}

@end 
```

**BIECollectionViewItem.m**

```
#import "BIECollectionViewItem.h"

@implementation BIECollectionViewItem

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
}

- (void)mouseDown:(NSEvent *)theEvent {
    [super mouseDown: theEvent];
    if([theEvent clickCount] == 2){
        [popover showRelativeToRect: [self bounds] ofView: self preferredEdge: NSMaxYEdge];
    }
}

@end 
```

如果我在 mouseDown 事件中添加一条日志语句，我可以确认该事件正在被触发。但是，NSPopover 拒绝出现！

有谁知道如何让 NSPopover 出现在 NSCollectionView 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:44:06.163

Not sure if you have solved this problem, but I have done this before. I recently wanted to display a NSPopOver relative to a NSTextField in a NSCollectionViewItem. I have had no trouble, except at one point I was getting the relativeToRect: parameter wrong, and the pop over wouldn't show. I always use this same format when displaying a pop over

```
NSView *someView; // defined elsewhere
[MyPopOver showRelativeToRect:[someView bounds] ofView:someView preferredEdge:NSMaxXEdge]; 
```

I can only suggest ensuring you have those values right, and you haven't made some silly mistake in IB like forgotten a binding or connection (90% of my failures).

Hope this helps with your problem

# iphone - 从 iPhone OS 2.0 到 iOS 6.0 的各种 iOS 版本之间的区别

> ID：11534778
> 
> 赞同：-4
> 
> 时间：2012-07-18T05:27:59.013
> 
> 标签：iphone, ios

从开发的角度来看，我想知道从 iPhone OS 2.0 到 iOS 6.0 的不同 iOS 版本之间有什么区别。我想开发一个应该在所有 iOS 设备上运行的通用应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:53:14.800

Apple 会在每次修订时对此进行说明。[你可以在这里](https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Introduction/Introduction.html)找到它们

# android - phonegap jquerymobile 应用程序占用大量内存

> ID：11534781
> 
> 赞同：0
> 
> 时间：2012-07-18T05:28:11.837
> 
> 标签：android, jquery-mobile, cordova

我用一个起始页为Android构建了一个phonegap jquerymobile应用程序。我的起始页（下面给出）非常简单，只有一行内容。在设备中安装它后，每次我启动应用程序时，应用程序占用的内存都在增加持续增加并使功能运行缓慢。有人可以帮我解决这个问题吗？

```
<!DOCTYPE HTML>
    <html>
       <head>
          <title>PhoneGap</title>
          <meta name="viewport" content="height=device-height,width=device-width,initial-  scale=1.0,maximum-scale=1.0" />
          <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.min.js"></script>
          <script type="text/javascript" src="jquery.mobile-1.1.0.min.js"></script>
       </head>
       <body>
          <div data-role="page" id="indexpage">
             <div data-role="header" id="indexheader" data-position="fixed" data-theme="a">
                <div id="shoppinglistname"
             </div>
             <div data-role="content" id="divcontent">
                Content here 
             </div>
          </div>
          </div>
       </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:00:09.187

基本上，您是在 android 网络浏览器中加载网页。肯定是需要内存的。为此，我曾经在每次应用程序启动时清除缓存。在加载网址之前使用此代码，

```
super.clearCache(); 
```

# yii - Yii 默认 ajax 搜索重定向

> ID：11534783
> 
> 赞同：0
> 
> 时间：2012-07-18T05:28:20.013
> 
> 标签：yii

如果从默认的 Yii ajax 搜索中只找到一个结果，我想重定向到它的视图操作。如何触发重定向？（这类似于谷歌的“我感觉很幸运”选项）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:28:12.297

```
public function actionAdmin() {
        $this->pageTitle = Yii::app()->name . ' - Customer Support';

        $model = new residence('customer');

        $model->unsetAttributes();

        if (isset($_GET['residence']))
            $model->attributes = $_GET['residence'];
        if (!Yii::app()->request->isAjaxRequest && isset($_GET['search_field'])) {
            $raw = $model->customer()->getData();
            if (count($raw) == 1) {
                $this->redirect(array("customer/details", "id" => $raw[0]->id));
            }
        }

        $this->render('admin', array(
            'model' => $model,
        ));
    } 
```

其中 $model->customer() 返回网格也使用的 DataProvider。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:58:09.433

回答自己，

我最终得到了 javascript hack 因为我找不到合适的方法来做到这一点。

在我的 CGridView 中，我使用**了 afterAjaxUpdate**

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $dataProvider,
    'summaryCssClass'=>'summary fr',
    'id'=>'order-grid',
    'afterAjaxUpdate'=>'function(id, options){ if($("#order-grid tbody tr").length == 1 && $("#order-grid tbody tr:first td").length > 1) {window.location = $("#order-grid tbody tr td:first a").attr("href");}}',
    'columns' => array()
)); 
```

希望这对某人有所帮助。

# perl - 是否可以在空闲机器中使用 Perl 脚本控制 CPU 使用率？

> ID：11534787
> 
> 赞同：2
> 
> 时间：2012-07-18T05:28:47.070
> 
> 标签：perl

是否可以在空闲机器中使用 Perl 脚本控制 CPU 使用率？

like`some.pl 50`会消耗50%的cpu，`some.pl 100`会消耗100%的cpu使用率。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T06:04:35.237

您无法真正告诉进程要使用多少 CPU。相反，Unix 使用优先级系统分配 CPU。高优先级进程将获得比低优先级进程更多的 CPU 时间。低优先级的程序被称为[nice](http://en.wikipedia.org/wiki/Nice_%28Unix%29)。您可以通过以下方式启动程序来控制程序的优先级`nice`...

```
nice some.pl 
```

或者通过在运行时更改其优先级`renice`。

Windows 以不同的方式做事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T08:57:03.823

是的，当然这是可能的。下面的代码片段计算了某个进程**在某一时刻的**处理器负载百分比。您可能首先想要收集一定数量的值并将它们平均以获得平滑的结果。

然后简单地说，如果负载不够高，告诉进程做工作，如果负载太高，告诉进程暂停工作。

```
use constant UTIME => 13;
use constant STIME => 14;
use List::Util qw(sum);
use Time::HiRes qw(sleep);
use autodie qw(:all);

sub pidload {
    my ($pid) = @_;
    open my $pstat, '<', "/proc/$pid/stat";
    my @pstat = split ' ', <$pstat>;
    close $pstat;
    return $pstat[UTIME] + $pstat[STIME];
}

sub cpuload {
    open my $stat, '<', '/proc/stat';
    my @total = split ' ', <$stat>;
    close $stat;
    shift @total;
    return sum @total;
}

my ($pid) = @ARGV;
my $prev_cpu = cpuload;
my $prev_pid = pidload $pid;
while (1) {
    sleep 0.1;
    my $now_pid = pidload $pid;
    my $now_cpu = cpuload;
    printf "%.0f\n", 100*(($now_pid - $prev_pid) / ($now_cpu - $prev_cpu));
    $prev_cpu = $now_cpu;
    $prev_pid = $now_pid;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T06:09:03.270

在没有任何其他进程的情况下，正在运行的进程将*始终*获得 100%，除非它以某种方式定期使自己进入睡眠状态。

唯一的例外是多处理器机器，其中单线程进程只能获得*一个*CPU 内核的 100%。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T07:41:21.037

你可以粗略地用类似的东西来近似这个

```
while (1) {
  if ($load < .5) {
    ... do something ...
  } else {
    sleep(10);
  }
} 
```

为了建立足够的负载，您可能需要运行其中的一个以上。剩下的挑战是如何“做某事”显着增加负载，但只运行几秒钟，并且不需要大量内存或 I/O（素数分解？）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T21:51:09.777

如果您的操作系统有 BSD 层，只需使用：[http ://metacpan.org/pod/BSD::Resource](http://metacpan.org/pod/BSD::Resource)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-18T08:11:53.970

Schwern 有正确的答案，但如果你想尝试一些东西，我建议你使用一个单独的线程来控制插件。在我看来，实际代码不能被触及。相反，我将尝试在每次 CPU 超过某个级别时生成中断或事件的代码开头启动一个线程。这当然不容易，需要对线程和（也许）信号量有相当的了解。唯一的好处是，如果您编写好该子例程，那么您也可以在其他插件中使用它。

# asp.net-mvc - MVC C# 模式弹出窗口

> ID：11534788
> 
> 赞同：9
> 
> 时间：2012-07-18T05:28:49.930
> 
> 标签：asp.net-mvc, jquery, modal-dialog, jquery-dialog

好的，所以我试图弄清楚如何根据这篇文章的建议使用控制器正确调用我的页面的模式弹出窗口

[ASP.NET MVC 模式对话框/弹出窗口最佳实践](https://stackoverflow.com/questions/861235/asp-net-mvc-modal-dialog-popup-best-practice)

有点用这个：

[http://microsoftmentalist.com/2011/09/14/asp-net-mvc-13-open-window-or-modal-pop-up-and-fill-the-contents-of-it-from-the-控制器方法/](http://microsoftmentalist.com/2011/09/14/asp-net-mvc-13-open-window-or-modal-pop-up-and-fill-the-contents-of-it-from-the-controller-method/)

我有一个包含下拉列表的视图，如果用户找不到他/她正在寻找的项目/值，他可以建议一个值（建议新值链接），该值应该调用控制器并返回一个弹出页面里面有几个字段。

这是视图上的对象：

```
<script type="text/javascript">

        loadpopup = function () 
        {  
window.showModalDialog(‘/NewValue/New′ , "loadPopUp", ‘width=100,height=100′); 
        } 

    </script> 

<%: Html.DropDownList(model => model.ValueId, new selectlist........... %>
<%: Html.ActionLink("Suggest Value", "New", "NewValue", null, new { onclick = 'loadpopup()') %> 
```

我打算用来返回页面的控制器：

```
public class NewValueController : Controller{
   public Actionresult New(){
      return View();
   }
} 
```

现在我被困住了。我想返回一个可以格式化的页面，我必须返回一个字符串吗？我不能返回一个aspx（我使用的引擎），因为格式化会更容易吗？

非常感谢任何关于我应该去哪个方向的建议。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T06:01:11.240

您可以将[jquery UI Dialog](http://jqueryui.com/demos/dialog/)用于弹出窗口。让我们在这里做一个小设置。

我们将有一个主窗体的视图模型：

```
public class MyViewModel
{
    public string ValueId { get; set; }
    public IEnumerable<SelectListItem> Values 
    { 
        get 
        {
            return new[]
            {
                new SelectListItem { Value = "1", Text = "item 1" },
                new SelectListItem { Value = "2", Text = "item 2" },
                new SelectListItem { Value = "3", Text = "item 3" },
            };
        } 
    }

    public string NewValue { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return Content("thanks for submitting");
    }
} 
```

和一个视图 ( `~/Views/Home/Index.aspx`)：

```
<%@ Page 
    Language="C#" 
    MasterPageFile="~/Views/Shared/Site.Master" 
    Inherits="System.Web.Mvc.ViewPage<AppName.Models.MyViewModel>" 
%>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <% using (Html.BeginForm()) { %>
        <%= Html.DropDownListFor(x => x.ValueId, Model.Values) %>
        <br/>
        <%= Html.EditorFor(x => x.NewValue) %>
        <%= Html.ActionLink("Suggest Value", "New", "NewValue", null, new { id = "new-value-link" }) %>
        <button type="submit">OK</button>
    <% } %>

    <div id="dialog"></div>

</asp:Content> 
```

然后我们可以处理弹出窗口。我们为它定义了一个视图模型：

```
public class NewValueViewModel
{
    public string Foo { get; set; }
    public string Bar { get; set; }
} 
```

控制器：

```
public class NewValueController : Controller
{
    public ActionResult New()
    {
        return PartialView(new NewValueViewModel());
    }

    [HttpPost]
    public ActionResult New(NewValueViewModel model)
    {
        var newValue = string.Format("{0} - {1}", model.Foo, model.Bar);
        return Json(new { newValue = newValue });
    }
} 
```

和相应的局部视图 ( `~/Views/NewValue/New.ascx`)：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<AppName.Models.NewValueViewModel>" 
%>

<% using (Html.BeginForm(null, null, FormMethod.Post, new { id = "new-value-form" })) { %>
    <%= Html.EditorFor(x => x.Foo) %>
    <%= Html.EditorFor(x => x.Bar) %>
    <button type="submit">OK</button>
<% } %> 
```

现在剩下的就是编写一些 javascript 来连接所有内容。我们包括 jquery 和 jquery ui：

```
<script src="<%: Url.Content("~/Scripts/jquery-1.5.1.min.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery-ui-1.8.11.js") %>" type="text/javascript"></script> 
```

以及一个包含我们代码的自定义 javascript 文件：

```
$(function () {
    $('#new-value-link').click(function () {
        var href = this.href;
        $('#dialog').dialog({
            modal: true,
            open: function (event, ui) {
                $(this).load(href, function (result) {
                    $('#new-value-form').submit(function () {
                        $.ajax({
                            url: this.action,
                            type: this.method,
                            data: $(this).serialize(),
                            success: function (json) {
                                $('#dialog').dialog('close');
                                $('#NewValue').val(json.newValue);
                            }
                        });
                        return false;
                    });
                });
            }
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-20T07:13:24.183

```
$('#CheckGtd').click(function () {
    if ($(this).is(":checked"))
        $("#tbValuationDate").attr("disabled", false);
    else
        $("#tbValuationDate").attr("disabled", "disabled");
}); 
```

# php - 数组列表未在 PHP 中正确显示

> ID：11534793
> 
> 赞同：1
> 
> 时间：2012-07-18T05:29:21.200
> 
> 标签：php, arrays, zend-framework

我有两个数组，我将它们与以下代码合并：

```
$information = array_merge($this->resInfo, $this->resName); 
```

这里第一个数组包含 id 和电子邮件，而第二个数组只包含名称。合并数组名称部分和信息部分后，显示如下：

```
Array
(
[0] => Array
    (           
        [id] => 91985         
        [email] => demo@example.com         
    )

[1] => Array
    (
        [id] => 71262         
        [email] => demo@example.com         
    )

[2] => Array
    (
        [name] => New york
    )

[3] => Array
    (
        [name] => Alaska
    )

[4] => Array
    (
        [name] => Sanfransico
    )
) 
```

包含 id、email 和 name 的数组。在这里，我的电子邮件字段值始终显示相同的电子邮件 ID，而 id 字段和名称字段值每次都在变化。我只想列出一次电子邮件 ID，而 ID 和名称的多个取决于大小。我创建了以下代码：

```
<?php foreach ($information as $info) { ?>
    <ul>                                                     
        <li style="list-style: none;">
            <a href="/profile/id/<?php echo $info['id']; ?>/email/<?php echo $info['email']; ?>" style="color: #185D9B; text-decoration: underline;">
                <?php echo $info['name'] ?>
            </a>
        </li>                        
    </ul>
<?php } ?> 
```

在这里，它在`$info['name']`显示空白`$info['id'];`和`$info['email'];`href 标记时都正确显示。以下代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:17:37.600

第一次信息索引的值类似于

```
$info[id]="91985"
$info[email]=demo@example.com 
$info['name'] =""(NULL) 
```

所以第一条记录不显示它的名称和链接没有出现给你有href值是正确的但不显示名称

索引号 1 和 2 值相同

当索引为 3 和 4 时

```
$info[id]="" (null)
$info[email]="" ()
$info['name'] ="Alaska" 
```

所以它是显示链接，但不是 href 值是正确的 href 值是 =“/email/”，所以它不能正常工作

我希望你明白我的意思，如果你对我的回答有任何问题，请告诉我......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:40:44.513

数组的前 2 个元素有一个 id 和电子邮件，但没有名称，因此没有显示名称。然而，最后 3 个有名称但没有 id 和电子邮件，因此显示名称但`href`已损坏。以下是该页面的呈现方式：

```
<ul>                                                     
    <li style="list-style: none;">
        <a href="/profile/id/91985/email/demo@example.com" style="color: #185D9B; text-decoration: underline;">
        </a>
    </li>                        
</ul>
<ul>                                                     
    <li style="list-style: none;">
        <a href="/profile/id/71262/email/demo@example.com" style="color: #185D9B; text-decoration: underline;">
        </a>
    </li>                        
</ul>
<ul>                                                     
    <li style="list-style: none;">
        <a href="/profile/id//email/" style="color: #185D9B; text-decoration: underline;">
            New york
        </a>
    </li>                        
</ul>
<ul>                                                     
    <li style="list-style: none;">
        <a href="/profile/id//email/" style="color: #185D9B; text-decoration: underline;">
            Alaska
        </a>
    </li>                        
</ul>
<ul>                                                     
    <li style="list-style: none;">
        <a href="/profile/id//email/" style="color: #185D9B; text-decoration: underline;">
            Sanfransico
        </a>
    </li>                        
</ul> 
```

# android - 在 Android 中下拉

> ID：11534797
> 
> 赞同：1
> 
> 时间：2012-07-18T05:29:32.597
> 
> 标签：android

我想在android中显示下拉菜单。我也使用了微调器，但给了我这样的布局 ![在此处输入图像描述](../Images/53f8f8be932f2fe0672aac25a1fa98fb.png)

但是，我想要像这样的布局![在此处输入图像描述](../Images/b00cb3f8d5401c6d042e830119af13ec.png)

谁能告诉我如何实现这种观点。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:33:23.513

您在 Android 中看到的微调器是下拉框的 Android 实现。它旨在对屏幕空间很小的触摸屏设备更加友好。如果您想要一些表现得像“正常”下拉框的东西，您可能必须自己设计它。

在旁注中，IIRC 甚至网站上的下拉菜单在 Android 设备上的行为也是如此，或者严重惹恼了用户。来自 Android 之外的人试图让 Android 像其他设备一样工作，但最终疏远了用户群。Android 系统以某种方式运行，人们期望它与这种风格保持一致。不管其他系统如何实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:32:55.943

你当然可以自己实现它，它并不难做到。

我在 github 上创建了一个下拉演示项目来帮助解决这个问题，因为我脑子里缺少视图/小部件。

它基于用于显示当前选择的备选方案的文本视图（标题）和包含备选方案的线性布局。当点击标题时，我会在线性布局中使用备选方案进行动画处理，一旦选择了 alt，线性布局就会被动画化。

该项目可以在这里找到：

[https://github.com/erbsman/DropDownDemo](https://github.com/erbsman/DropDownDemo)

希望这可以帮助 ：）

[http://youtube.com/watch?v=JX9RmLAoOUY](http://youtube.com/watch?v=JX9RmLAoOUY)查看它的外观视频，以帮助您确定这是否是您想要的 :)

# ruby - 如何设置我的 .vimrc 文件以有条件地检查 +ruby 支持？

> ID：11534806
> 
> 赞同：0
> 
> 时间：2012-07-18T05:30:11.510
> 
> 标签：ruby, vim

我最近添加了一个需要 vim-ruby 的脚本，

我的问题类似于：[如何在我的 .vimrc 文件中检测 OS X，因此某些配置仅适用于 OS X？](https://stackoverflow.com/questions/2842078/how-do-i-detect-os-x-in-my-vimrc-file-so-certain-configurations-will-only-appl)

但也许有一种干净的检查方法（因为我想在所有操作系统中传播相同的 .vimrc 文件：Win7-64、Linux（RHEL/Ubuntu）、Mac 等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:32:40.503

您可以`has('ruby')`在`if`语句中使用。试着`:echo has('ruby')`亲眼看看。

作为附录，这适用于`:version`.

# php - Composer 工作流程如何真正发挥作用？

> ID：11534814
> 
> 赞同：4
> 
> 时间：2012-07-18T05:31:00.620
> 
> 标签：php, behat, composer-php

顺便说一句，我睡眠不足，我现在似乎精神受阻，这可能会让你觉得这是毫无意义的咆哮，所以如果他们看起来不是这样，请尽量耐心接受。

我正在开发 OS X Snow Leopard。我不会说我喜欢访问 PEAR 为我设置的二进制文件。我只是在安装 PEAR 包之后，将它们的二进制文件`brew unlink php53`放入.`brew link php53``/usr/local/bin`

以贝哈特为例。如果我通过 PEAR（现在已过时）安装它，我执行上面的过程，我立即可以通过 访问它`behat`，仅此而已。`bin`如果我要对Composer 生成的整个文件夹进行符号链接，我会得到三个“命令”，除了`behat`:`behat.bat`和`release`.

难道我做错了什么？有没有办法将正确的二进制文件集中在 上`/usr/local/bin`，最好不必添加新路径`$PATH`？有没有办法通过 Composer 做到这一点？

我正在考虑 npm，您可以在其中设置模块的全局和本地版本。我想要（正确）二进制文件的舒适全局版本。一种宝石，没有真正不必要地复制东西。

你看？这是很多混合信息，但这就是我现在的感觉。我想我正在寻找类似[this other question](https://stackoverflow.com/questions/11333230/how-to-run-composer-from-anywhere)的东西，仅适用于“供应商”二进制文件。

提前致谢！

PS：如果我真的听起来像一个悲惨的人，请告诉我，我会在睡个好觉后的第一个小时重新表达我的信息。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:56:59.917

问题是，如果您在全局范围内安装东西，当一个项目需要 Behat 1.5 和另一个不兼容的 Behat 2.0（虚构版本）时会发生什么？使用 require-dev 在项目本身中安装这些工具是解决此问题的好方法。然后你只需在你的项目中调用 bin/behat 就可以了（假设你`bin-dir: bin`在 composer 配置中放了一个，否则它是 vendor/bin/behat）。

关于`behat.bat`and `release`，这不会发生。这些文件存在于 behat 本身中，但它们不会链接到 composer bin 目录中。

最后，如果你真的想让它全局化，你可以拥有 ~/phputils/composer.json 或其他东西：

```
{
     "require": {
         "behat/behat": "*"
     },
     "config": {
         "bin-dir": "/usr/local/bin"
     }
} 
```

目前我不确定绝对 bin-dir 是否有效，我尤其不确定这样做是否是个好主意，但这是一个选择。最好我会说你应该把它作为`"bin"`并​​添加`~/phputils/bin`到你的路径中。然后你可以进入那个目录，运行 composer install/update 就可以了。

还有一个技巧是在 /usr/local/bin 中执行 composer-g shell 脚本，`cd ~/phputils/ && composer $*`这样您就可以`composer-g update behat/behat`从任何地方调用。

# java - 为什么JVM在编译后会创建很多类文件？

> ID：11534815
> 
> 赞同：0
> 
> 时间：2012-07-18T05:31:06.340
> 
> 标签：java, compilation

> **可能重复：**
> [编译器正在创建额外的类文件，其中包含 $](https://stackoverflow.com/questions/10786842/compiler-is-creating-extra-class-files-with-in-them)

我正在使用 Netbeans 设计一个使用 Java Swing 的 Java 应用程序，因此除了 Java 源文件之外，我还有 .form 文件，其中包含有关 Java 表单的描述。

在 src 目录中，我有 3 个文件，例如，

```
Downloader.java
DownloadCore.java
Downloader.form 
```

现在，如果我使用命令提示符手动编译它们（即不使用 Netbeans），那么我会得到很多 .class 文件，例如，

```
DownloadCore.class
Downloader$1.class
Downloader$10.class
Downloader$11.class
Downloader$12$1.class
Downloader$12.class
Downloader$2.class
Downloader$3.class
Downloader$4.class
Downloader$5.class
Downloader$6.class
Downloader$7.class
Downloader$8.class
Downloader$9.class
Downloader.class 
```

我想知道为什么 JVM 创建这么多 .class 文件，其中我只有 2 个 .java 文件，所以它不应该单独创建 2 个 .class 文件。为什么需要它？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T05:33:42.207

每个类都有自己的`.class`文件——甚至是匿名文件。例如：

```
// "top level" class -- in MyWhatever.java
public class MyWhatever {

    // anonymous class
    public static final Runnable anonymousRunnable = new Runnable() {
        @Override
        public void run() {
            System.out.println("I am an anonymous Runnable.");
        }
    }

} 
```

此代码片段定义了*两个*类——`MyWhatever`以及用于`anonymousRunnable`. 第二个将被称为`MyWhatever$1`，这就是您所看到的。他们每个人都有自己的`.class`文件。

（顺便说一句，创建这些类文件的不是 JVM——而是 Java 编译器，如 javac 或 Netbeans 使用的任何东西。JVM 然后加载这些类文件并执行它们。）

# ruby-on-rails - 在 Ubuntu 12.04 中卸载 RVM、Ruby、Ruby gem 和 rails

> ID：11534817
> 
> 赞同：2
> 
> 时间：2012-07-18T05:31:11.757
> 
> 标签：ruby-on-rails, ruby, rvm

在 Ubuntu 12.04 中删除 RVM、Ruby、Ruby gem 和 rails 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:19:12.773

首先找到红宝石在哪里？然后

```
rm -rf /usr/local/lib/ruby
rm -rf /usr/lib/ruby
rm -f /usr/local/bin/ruby
rm -f /usr/bin/ruby
rm -f /usr/local/bin/irb
rm -f /usr/bin/irb
rm -f /usr/local/bin/gem
rm -f /usr/bin/gem 
```

试试。可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T05:35:51.300

您可以使用`rm -rf ~/.rvm`删除 RVM。如果安装了单独的 ruby​​ 版本，则需要`sudo apt-get remove ruby1.x.x`根据版本进行安装。

# android - 如何在表格布局中初始化表格行

> ID：11534825
> 
> 赞同：0
> 
> 时间：2012-07-18T05:32:34.717
> 
> 标签：android, android-layout

我有表格行的表格布局。

```
TableLayout TableHeader = new TableLayout(this);
TableRow HeaderRow[]=null;
HeaderRow[0] = new TableRow(this); 
```

我想按照上面的数组格式使用表格行，但是如果我使用它，它会显示（空指针访问：）错误。如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:35:09.450

您的数组 HeaderRow 为空，而应为：

```
TableRow HeaderRow[]=new TableRow[size]; 
```

其中 size 是数组元素的数量。

# php - 想做一个回合制的python游戏。我从这里去哪里？

> ID：11534826
> 
> 赞同：0
> 
> 时间：2012-07-18T05:32:35.453
> 
> 标签：php, python, network-programming

所以我用 PHP 制作了一个运行良好的游戏，一个与井字游戏非常相似的简单游戏，我真的不想在 PHP 改进游戏方面走得更远。考虑到这一点，我决定学习 Python；我现在对基础知识很熟悉了。我使用简单的数学、字典和条件语句来创建我的游戏模型。但是它是基于回合制的，我希望两个玩家不要在同一台计算机上轮流使用计算机。

所以我设想我的最终产品是一个独立的应用程序，每个用户在他们的计算机上都有，他们执行应用程序并输入用户名，然后被带到其他用户所在的屏幕，他们已经按照描述登录，来自有两个用户可以相互同意开始一轮游戏，完成后他们将被带回“等候室”

现在对于这样的事情，我需要（或得到很大帮助）一个框架吗？如果有，是哪一个？

这需要服务器上的数据库，还是所有数据都存储在用户的计算机上？

在创建这样的东西时，我会处理 CGI 或套接字还是两者兼而有之？

把这个游戏变成一个网络应用程序会更容易吗？（类似于我使用 PHP 并在网站上运行游戏时创建的东西）

我将不胜感激阅读有关该主题的材料。一个指向示例源代码的链接，它解决了一个类似于我得到一个金星的问题 =)

谢谢大家的时间，我非常感谢一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:23:57.227

## 一般反应

特别是如果你包括一个“等候室”和这样的东西/希望它被广泛使用，这是一个相当大的项目（绝对不是一件坏事，但你可能想先做一些小项目来让你的脚沾上 python网络编程）。然而，拥有一个简单的基于终端的回合制游戏，通过网络在其玩家之间传输数据是相对容易的；我会专注于首先制作简单的版本，以了解所涉及的内容。话虽如此，以下是您提出的具体问题的一些答案；不幸的是，它们不能太详细，因为要了解这些主题的内容太多了。

## 具体答案

> 现在对于这样的事情，我需要（或得到很大帮助）一个框架吗？如果有，是哪一个？

有一些框架可以帮助这个项目的几个不同部分，但是在你开始研究框架来帮助实现之前，你需要做出一些重大的设计决策。

> 这需要服务器上的数据库，还是所有数据都存储在用户的计算机上？

拥有“等候室”意味着设置了某种服务器以促进玩家之间的联系。是否需要数据库完全取决于应用程序的规模。如果您想跟踪用户/启用重复登录，几乎可以肯定会涉及到一个数据库。

> 在创建这样的东西时，我会处理 CGI 或套接字还是两者兼而有之？

阅读有关 CGI 和套接字是什么的更多信息并考虑这一点。

> 把这个游戏变成一个网络应用程序会更容易吗？（类似于我使用 PHP 并在网站上运行游戏时创建的东西）

似乎有更多资源可以帮助制作 Web 应用程序版本，但也有一系列全新的挑战，甚至可能还有更多新的东西需要学习。这部分取决于你已经习惯了什么。制作一个网络应用程序和制作一个使用互联网的独立应用程序，也许令人惊讶的是，*非常*不同，但两者都将涉及很多新的学习。

## 结论

好吧，我希望这在某种程度上有所帮助。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:25:26.273

您可以使用以下几种方法：

*   使用直接连接到对方的计算机。他们必须确切地知道他们想与谁比赛。幸运的是，python 的套接字实现非常容易使用。
*   在某处创建并托管一个服务器，该服务器执行与所有玩家建立连接、将两个玩家匹配在一起以及在游戏玩家之间转发数据包的步骤。如果您还想让游戏浏览器基于此，您可以使用 HTML5 WebSockets 来执行此操作。

无论如何，如果您想为匹配的玩家创建一个房间，您将必须创建一个服务器。在我看来，python 实际上是为此选择的语言，因为您将需要使用套接字，而 python 是针对这种事情的。您的服务器必须跟踪游戏中的所有对等点和所有匹配项。它还必须跟踪每场比赛的比赛状态。如果您希望玩家登录等，那么您将需要一个数据库后端来跟踪用户以及当前的游戏，以便您可以防止某人同时从多个位置登录。

有很多关于在 python 中使用套接字的教程。只需快速搜索就可以找到一个超级简单的教程：http: [//www.kellbot.com/2010/02/tutorial-writing-a-tcp-server-in-python/](http://www.kellbot.com/2010/02/tutorial-writing-a-tcp-server-in-python/)。

我编写了一个 HTML5 WebSocket 服务器，它有一个聊天室实现，演示了跟踪几个连接的对等点并有选择地将消息从一个对等点转发到其他对等点。演示页面在这里：[http](http://cuznersoft.com/python-websocket-server/html/demo_chatroom.html) ://cuznersoft.com/python-websocket-server/html/demo_chatroom.html ，源代码可以在这里找到：[https](https://github.com/kcuzner/python-websocket-server) ://github.com/kcuzner/python-websocket-server 。服务器是用 python 编写的，总共大约 1000 行，所以它的长度并不可怕。

# android - 检查某些 Android 代码段的 API

> ID：11534832
> 
> 赞同：0
> 
> 时间：2012-07-18T05:32:44.850
> 
> 标签：android

我想做一个简单的笔记应用程序，它应该适用于非常基本的 Android 版本。但是，我还想添加一个功能，例如，扫描来自 NFC 的数据并将它们添加到笔记中。

这里的问题是 NFC 需要最低 API 级别 10。我不想放弃`android:minSdkVersion="10"`这么小的功能。

如果他们使用低于 API 级别 10 的手机，有没有办法让代码禁用“使用 NFC”按钮/代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:36:56.870

从此[答案](https://stackoverflow.com/a/7618742/706836)中，您可以检查 NFC 是否可用并已打开。如果是，请为您的应用打开该功能，否则将其禁用。这样，您可以针对 API 10，但将最小值设置得更低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:52:09.037

在 Android 开发人员指南中，您可以看到一个示例（在本例中以 UI 组件为中心）：http: [//developer.android.com/training/backward-compatible-ui/using-component.html](http://developer.android.com/training/backward-compatible-ui/using-component.html)

# clojure - 如何在 intellij idea 中增加 REPL 字体大小...？

> ID：11534834
> 
> 赞同：2
> 
> 时间：2012-07-18T05:33:04.340
> 
> 标签：clojure, intellij-idea, clojure-repl

我使用 intellij 11.1.2，有没有办法改变 REPL 字体大小。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:43:53.423

`Editor -> Colors & Fonts -> Console Font`您可以在 IDEA 设置的选项卡中设置字体。

# php - seo url重写

> ID：11534839
> 
> 赞同：0
> 
> 时间：2012-07-18T05:33:52.563
> 
> 标签：php, .htaccess, seo

我在 htaccess 文件中写了 url 重写

```
RewriteRule ^([^/]+)/subject/([^/]+)/$ subjectlist.php?dept_id=$1 
```

但不工作我写为 htaccess 文件中的其他链接

```
RewriteRule ^subjects/$ subject.php,RewriteRule ^([^/]+)/([^/]+)/$  chapter.php?course=$2 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:35:58.840

尝试逐行编写规则

```
RewriteRule ^subjects/$ subject.php
RewriteRule ^([^/]+)/([^/]+)/$  chapter.php?course=$2 
```

# javascript - 显示和隐藏动态文本的 Div

> ID：11534840
> 
> 赞同：1
> 
> 时间：2012-07-18T05:33:58.390
> 
> 标签：javascript, jquery

我有一个问题，我们必须在产品详细信息页面的产品描述中显示/隐藏一些文本。描述必须缩短到所需的行数，并通过单击“更多”来显示完整的描述。我从下面的链接中获取了以下脚本：

> [使用 javascript substring() 创建阅读更多链接](https://stackoverflow.com/questions/1606336/using-javascript-substring-to-create-a-read-more-link)

代码如下：

```
<script type="text/javascript">
    $(function() {
        var cutoff = 200;
        var text = $('div.contentdetail').text();
        var rest = $('div.contentdetail').text().substring(cutoff);
        if (text.length > 200) {
          var period = rest.indexOf('.');
          var space = rest.indexOf(' ');
          cutoff += Math.max(Math.min(period, space), 0);
        }  
        rest = text.substring(cutoff);  
        var visibleText = $('div.contentdetail').text().substring(0, cutoff);  
        $('div.contentdetail')  
            .html(visibleText + ('<span>' + rest + '</span>'))
            .append('<a title="Read More" style="font-weight:bold;display:block;cursor: pointer;">Read More&hellip;</a>')  
            .click(function() {  
                $(this).find('span').toggle();  
                $(this).find('a:last').hide();  
            });  
        $('div.contentdetail span').hide();  
    });  
</script> 
```

但是使用上面的脚本，整个描述正在转换为文本格式。但由于描述包含无序列表、标题标签等，因此不考虑这些。如何修改上述脚本以显示内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:07:21.463

使用 html() 而不是 text()。像这样

```
var text = $('div.contentdetail').html();
var rest = $('div.contentdetail').html().substring(cutoff); 
```

休息都是正确的。text() 将所有 html 节点数据转换为纯文本。html() 保留它。试一试，为我工作。在上一个链接中，问题仅针对文本。由于您有其他元素，例如链接和其他内容，因此您需要使用 html()

# php - 删除整个 PHP 类

> ID：11534843
> 
> 赞同：10
> 
> 时间：2012-07-18T05:34:57.057
> 
> 标签：php, oop

```
class foo{
    ....
} 
```

假设该类存在于我的代码中，然后我不再需要该类并希望将其删除（因此以后可以将其替换为新类）

是否可以从运行时删除整个类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T05:43:03.523

不，您不能在运行时删除或大幅修改 PHP 类（或函数）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T05:50:54.240

使用 unset($classVariableName) 删除实例，它将释放内存。

如果类的定义在运行时不应该存在，则需要将该类添加到单独的文件中，并且仅在需要时才应包含该文件。这样您就可以拥有两个具有相同类名的不同类定义。但是有两个具有相同名称的不同定义并不是一个好方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T05:54:53.363

你可以使用 unset() 来删除一个对象，但是类本身不能被删除。老实说，在运行时修改这样的代码听起来很笨拙和令人困惑——没有更好的选择吗？

# php - 带有动态表删除记录按钮的jQuery对话框不起作用

> ID：11534847
> 
> 赞同：3
> 
> 时间：2012-07-18T05:35:13.630
> 
> 标签：php, ajax, jquery, dialog

我一直在编写一个打开对话框的脚本，在对话框中有一个动态表，其中包含从我的一个数据库中提取的数据。我在所有记录旁边放置了删除按钮，以便工作人员可以删除不必要的记录。
我试图使用触发 Ajax 请求的单击功能，然后立即从数据库中删除记录。
但是发生的情况是，当我单击删除按钮时，它会关闭对话框并且根本不会删除任何内容。如果有任何帮助，我已经复制了下面的代码。

非常感谢所有帮助:)

```
 //including all jquery library

<script>
    $(function() {
        $( "#dialog" ).dialog({
            autoOpen: false,
                    buttons: {

                "Add to Log": function() {
                $.ajax({
                    type: 'POST',
                    url: "check_add.php",
                    data: $('#checkup').serialize(),

                    success: function(data) {

                             if(data == 0){//Failure 
                                    alert('Data was NOT saved in db!');
                                         }
                                 }
                });
                  $( this ).dialog( "close" );

                },
                Exit: function() {
                    $( this ).dialog( "close" );
                }
            }

        });

            $( "#opener" ).click(function() {
            $( "#dialog" ).dialog( "open" );
            return false;
        });

        $( "#reminder" ).dialog({
            width: 471,
            autoOpen: false,
                    buttons: {

                Exit: function() {
                    $( this ).dialog( "close" );
                }
            }
        });

            $( "#remind" ).click(function() {
            $( "#reminder" ).dialog( "open" );
            return false;
        });

        $(".Delete").click(function() // here the delete function
        {
            var $this = $(this);
            var rowid = $this.attr('name');
            $.ajax({
            type: "POST",
            url: 'check_del.php',
            data: {
            'id': rowid
                },
            success: function(data) {

        if(data == 1){//Success 
             alert('Sucess');
          }
        if(data == 0){//Failure 
             alert('Data was NOT saved in db!');
          }
            }
 });
        }); 

    });
    </script>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<button id="opener">Add Damage</button>
<button id="remind">Reminder</button>

<div id="dialog" style="font-size:small;">
<form name="checkup" method="post" id="checkup"> 
    <table>
    <tr><td>
    <strong>Cases:</strong></td><td><input name="cases" type=text  placeholder="Cases ID" maxlength="7" style="width:129px;"></td>
    </tr>
    <tr>
    <td><strong>Comments:</strong></td>
    <td> <textarea name="comment" placeholder="Comments Box"></textarea></td>
    </tr>
    </table>
  </form>
</div>

<?php 
```

//数据库连接的东西

```
$sql="select * from $tbl_name";
$result=mysql_query($sql);

?>

<div id="reminder" style="font-size:small;">
<form name="remind" method="post" id="remind"> 
    <table bordercolor="#000000" border="1" style="border:thin;">
    <th>Class</th>
    <th>Cases</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Model</th>
    <th>Comments</th>
    <th>   </th>

<?
    while($rows=mysql_fetch_array($result)){
$cases=strtoupper($rows['cases']);
?>

    <tr>
    <td><? echo $rows['hg']; ?></td>
    <td><? echo $cases;?></td>
    <td><? echo $rows['firstname']; ?></td>
    <td><? echo $rows['surname']; ?></td>
    <td><? echo $rows['model']; ?></td>
    <td><? echo $rows['comments']; ?></td>
    <td><button  name="<?php echo $rows['id']; ?>"  class="Delete">Delete</button></td>
    </tr>

    </table> 
<?
}
?>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:01:10.167

经过大量测试后，我稍微更改了代码。我已经为按钮和 jquery 代码粘贴了 html 的工作部分

HTML 按钮

```
<input name="<? echo $rows['id'];?>" type="button"   value="Delete"  /> 
```

jQuery函数

```
$("input[type='button']").on('click', function() {

    var $this = $(this);
    var userid = $this.attr('name');

            $.ajax({
            type: "GET",
            url: 'check_del.php',
            data: {
            'id': userid

                },
            success: function(data) {

        if(data == 1){//Success 
             alert('Sucess');
          }
        if(data == 0){//Failure 
             alert('Data was NOT saved in db!');
          }
            }
    });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:34:21.620

尝试这个

```
$(".Delete").live('click',function() {
 // your code go here
}); 
```

# ruby - 从带有哈希的数组中获取值的更优雅/更短的方法？

> ID：11534853
> 
> 赞同：1
> 
> 时间：2012-07-18T05:35:31.633
> 
> 标签：ruby

我有：

```
val = [{uid: '1', ignore: 'i1'}, {:uid: '2', ignore: 'i2'}] 
```

现在我想将该`:uid`部分提取到一个数组中：

```
arr = []
val.each { |u| u.map { |k,v| arr << v if :uid == k } } 
```

有没有更优雅/更短的方式来写最后两行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T05:45:37.910

试试这个

```
val = [{uid: '1', ignore: 'i1'}, {uid: '2', ignore: 'i2'}]

arr = val.map { |u| u[:uid] } 
```

# asp.net - 如何将 ScriptResource.axd 文件合并到一个文件中以提高页面性能

> ID：11534855
> 
> 赞同：2
> 
> 时间：2012-07-18T05:35:41.993
> 
> 标签：asp.net, ajax, jquery, performance-testing

在我的网站上，我使用 Ajax 和 jQuery 以及 twitter、Facebook 脚本等社交媒体。我注意到我的 asp.net 网络表单应用程序中有许多这些文件。在测试我的网站（使用 firebug YSlow）的性能时，我注意到我有大约 13 个`ScriptResource.axd`文件。是否都需要它们，或者我如何将它们合并为一个以提高页面的性能以及我如何知道这些文件是否引用特定的 ms Ajax 控件。

```
<script src="/ScriptResource.axd?d=6GIfwW5NIk8YVdQUBoUSdw8_teFCLpaGZuXT9BltuBtMBUEgJauIENwvz-5lAHOHs7roSmFphXJzKtPwXs4IBi2qKo5Xu9asohZ7zQFIgLxsrV1UVTo2TGF-G5tW5spyJFcooTIB3CmNkKv4pPodTZKjAOM1&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=SVRd3p5sxqLRkNZvsASl_qHKNd_EsD7Em0z1kZZKsUc9VUS88b1ehlatIc09u_RZYKinP0KkpUsEIRoWZWC4V4wZCDW1PNIlcAGeQTMCunY5ABoS93xJu4W1URri3RraR6VbuQ2&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=liPBEJshRG6BfJiUI6H1bjejmsntTHSESj5435XDpzn7jyE3zjP5P8pDyWXQPYKGqJyDYemNYEDpOj7eaHhE_TOQimWjTafCcDEPT_-IzPUk98xa9g47-DPKVpM2PbSRDoVVXAjcFdErIMr9oPvCHUd3at41&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=so2-S6sCEWinHjunb1xKM3mqGuiQVUn2N01XLzPdqPR0Zn1x5urYVyz4vejCesXD7qdgPibO0HVa6T7ln_xJ-vgIuDjZGn77Bw51LNHPxM3LNNJvIsdIfVX7H_lY2o1Ld987I-fmlCUDFR6iEiv3_mEJAWs1&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=b5bmOM9G88P7EQM94ZrgSDUiVqbpJb90fw5Reep6EoPFByepzn_cWrrvCdRW-fdsjjAeoMp-XZC7F2KEh5i_u_4bCbS9-3byqjW8IOkiQl1mQEBCJmwnEK2DELKgsAaNlpuNlvx6h4CydmlBmkIf8hdTQkA1&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=5jy8bTvROjYGk4_2ZP4NEWwvKIpI0oldPhL_Eh6m3GrT6ekBrVTo7-GUSxIX6AD6PC5zSqLy8CN6EuZuPiWdFvsSCam2ki-hwabZoFuSQOLcYwuLOIy_SE7zEe0ytt-m15CycOfApMHv9-RV3sqIMlLd8Xg1&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=rmhvV2xwmzqQwS31J44KQbyMR_zRMpUsEAzR2k4zbzQCgANnXCYEh58kTigCaSZ8LT8wrEnzng7fUI8tLzuVwJOyZbmRHqUZZbHk_03U5BHmWNQMhYAEwyVCaAZIeNDVzQIsHHmQ44Soi71NtaKVf6__bFwTaskur12ttbkfE20oCBud0&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=ZNlBs49UYPsWsh1g9g1-3JSj-0tbIQUGbXQP2qwLK1NKGoBKleisjmI-ljano_dkMzL9cyZcEtPSV3Nhres0GcJJTZaM8XQsJWyno5JUrGS0HJsVtsAzlWneSl0XJZp9rdG8zz1palq3F8_Wsj67W1KiUyc1&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=bdIISdk0xOnOOnKm5Lg0V3RHL-LtjxpWdqYP2FQFT3I__XsATZOwY_tamhbv9vEnFGuUjIauXgv27hfO3XcF2nXfkzyXjVKY6ouAzcNC7Z9yIKfO5PWbQ8i8CFLxEMO43TCl_VIh8mFv9pYZllMnJC96TLE1&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=QZwq1tBmc9srltGXrElP8CgnXBmRsy0QkmV1k7sc16SDweMp3N1RcU7MwtqawWy5tvyiJNg2cDqZ7ijTi1VcWgr8BMTibHYR0uI2ssS0O_OV2FQkh3B6L8557KiFL2aZ8yzJp8IiyCHYmP2rHlthqZ_TsPZKRjCFhDHdWWZVB5BobQMc0&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=m_5nYCrZRv0cBHzoHwFw88IyLI68CfWpjJ_WshaxE3-h39TmNXR9dsYGPJsSAjbXCTy7rqIMgCBJ9asmKjDYA3CZoGMYu0umX80AkS1hxXw23cepeBSLvq0lHlmaWiGP3w5CM6SU_XFJSdOyHG4-H05h3lA1&amp;t=ffffffffc13acc3f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=t3aTCyZK7M6vzByezVVz_Cs0icKbhxAXxjsT9TQHsWLpMN-bibYGdivH_AqRtO6GZVutz7zUpsy2Aj14_YTFjxra307vqvp5wFDQSEOPF-jF7-lJ7lKtiEQZ_XnrdxT2ws9xXL7Z2L51cQzRqIVWPJ7SMsA1&amp;t=ffffffffc13acc3f" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:49:25.813

有一个开源模块和 HTTP 处理程序可以为您执行此操作 -

[http://madskristensen.net/post/Optimize-WebResourceaxd-and-ScriptResourceaxd](http://madskristensen.net/post/Optimize-WebResourceaxd-and-ScriptResourceaxd)

您可能还想查看 CompositeScript 和 ScriptManager - [http://www.hanselman.com/blog/ASPNETAjaxScriptCombiningAndMovingScriptResourceaxdsToStaticScripts.aspx](http://www.hanselman.com/blog/ASPNETAjaxScriptCombiningAndMovingScriptResourceaxdsToStaticScripts.aspx)

# vbscript - VBS 访问被拒绝

> ID：11534857
> 
> 赞同：2
> 
> 时间：2012-07-18T05:35:51.040
> 
> 标签：vbscript

我想制作一个可以将文件复制到`c:\windows\system32\whatever.vbs`. 问题是我在运行时得到“拒绝访问”。

我试图获得管理员权限，但 UAC 仍然出现。谁能给我一个脚本以管理员身份运行我的 vbs 并在运行时禁用 UAC？

这是代码：

```
option explicit
dim folder, root, f1, source, destination, regedit, WshNetwork

function CopyFile(source, destination)
dim filesys

set filesys=CreateObject("Scripting.FileSystemObject")
  If filesys.FileExists(source) Then
     filesys.CopyFile source, destination
  End If
end function

Set WshNetwork = WScript.CreateObject("WScript.Network")

set folder = CreateObject("Scripting.FileSystemObject")
set root = folder.GetFile(Wscript.ScriptFullName)

source = root
destination = "c:\Documents And Settings\" & WshNetwork.UserName &"\Start Menu\Programs\Startup\whatever.vbs"

call CopyFile(source,destination)

destination = "c:\Windows\System32\whatever.vbs"  -> in here access is denied

call CopyFile(Source,destination) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T21:56:32.033

您需要以管理员身份运行此脚本，否则用户将拥有管理员权限：

```
runas /user:Administrator cscript vbscript.vbs 
```

您也可以在提升的命令提示符中运行它或完全禁用 UAC：

```
reg add "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System" /v EnableLUA /t REG_DWORD /d 0 /f 
```

...并重新启动系统。

没有办法以编程方式执行您所要求的操作。UAC 的全部目的是“阻碍”此类脚本运行并在进程尝试特权访问时发出警告。

# c++ - 我想将我的代码从 CPP 更改为 CUDA，知道吗？

> ID：11534862
> 
> 赞同：2
> 
> 时间：2012-07-18T05:36:10.503
> 
> 标签：c++, sorting, cuda

我有一个我无法解决的问题。

问题如下。

## CPP代码

```
const int dataSize = 65535;
const int category = 10;
float data[dataSize][category];
const float threshold = 0.5f;

int cnt = 0;

// data array contains any values

for(int i=0;i<dataSize;i++)
{
    if( data[i][9] > threshold )
    {
        data[cnt][0] = data[i][0];
        data[cnt][1] = data[i][1];
        data[cnt][2] = data[i][2];
        data[cnt][3] = data[i][3];
        data[cnt][4] = data[i][4];
        data[cnt][5] = data[i][5];
        data[cnt][6] = data[i][6];
        data[cnt][7] = data[i][7];
        data[cnt][8] = data[i][8];
        data[cnt][9] = data[i][9];
        cnt++;
    }
} 
```

通过使用此代码，我希望“数据”数组的元素被收集到超过阈值。（未超过阈值的元素对我来说并不重要。重要的是刚刚超过阈值。）

我想要在 CUDA 中以相同结果运行的代码。

所以我试着这样做。

## CUDA 代码

```
__global__ void checkOverThreshold(float *data, float threshold, int *nCount)
{
    int idx = threadIdx.x + blockIdx.x * blockDim.x;

    if( data[idx*10+9] > threshold )
    {
        data[nCount+0] = data[idx*10+0];
        data[nCount+1] = data[idx*10+1];
        data[nCount+2] = data[idx*10+2];
        data[nCount+3] = data[idx*10+3];
        data[nCount+4] = data[idx*10+4];
        data[nCount+5] = data[idx*10+5];
        data[nCount+6] = data[idx*10+6];
        data[nCount+7] = data[idx*10+7];
        data[nCount+8] = data[idx*10+8];
        data[nCount+9] = data[idx*10+9];
        atomicAdd( nCount, 1);
    }
}

....

// kernel function call
checkOverThreshold<<< dataSize / 128, 128 >>>(d_data, treshold, d_count); 
```

但是 CUDA 代码的结果并不是我所期望的。

它包含很多垃圾价值，甚至结果与CPP的不一样。

我认为 nCount 变量的同步问题造成了这种情况。

但是，我不知道如何解决这个问题。

请帮助我的代码。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:42:38.193

此代码已损坏：

```
 data[nCount+0] = data[idx*10+0];
    data[nCount+1] = data[idx*10+1];
    data[nCount+2] = data[idx*10+2];
    data[nCount+3] = data[idx*10+3];
    data[nCount+4] = data[idx*10+4];
    data[nCount+5] = data[idx*10+5];
    data[nCount+6] = data[idx*10+6];
    data[nCount+7] = data[idx*10+7];
    data[nCount+8] = data[idx*10+8];
    data[nCount+9] = data[idx*10+9];
    atomicAdd( nCount, 1); 
```

如果`nCount`在所有这些分配过程中被修改，就会产生废话。它应该是

```
 int d = atomicAdd(nCount, 1);
    data[d+0] = data[idx*10+0];
    data[d+1] = data[idx*10+1];
    data[d+2] = data[idx*10+2];
    data[d+3] = data[idx*10+3];
    data[d+4] = data[idx*10+4];
    data[d+5] = data[idx*10+5];
    data[d+6] = data[idx*10+6];
    data[d+7] = data[idx*10+7];
    data[d+8] = data[idx*10+8];
    data[d+9] = data[idx*10+9]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T07:34:36.560

您可以使用 Thrust 库中的 Stream Compaction 函数。

例如，

```
#include <thrust/copy.h>
// ...
const int dataSize = 65535;
struct Datum {
  float f0, f1, f2, ..., f9;
};
Datum data[dataSize];
const float threshold = 0.5f;

struct below_threshold
{
  __host__ __device__
  bool operator()(const Datum &d)
  {
    return d.f9 <= threshold;
  }
};

// data array is contains any values
Datum *new_end = thrust::remove_if(data, data + N, below_threshold());
int cnt = new_end - data;
// first cnt elements have the f9 term > threshold
// other elements are undefined 
```

编辑：相关推力文档[链接](http://docs.thrust.googlecode.com/hg/group__stream__compaction.html#ga5fa8f86717696de88ab484410b43829b)

如果您不熟悉 Thrust，这里有一个快速概述。它基本上是很多 STL 风格的容器和算法，加上一些 Boost 风格的花里胡哨。真正酷的是，如果您使用 Thrust 编写算法而不是使用自定义内核，您实际上可以在 CPU 或 GPU 上运行完全相同的算法。所以我在这里的实现草图将在 CPU 上运行，因为内存是在主 RAM 中分配的。但是如果不是使用常规数组存储数据，而是使用thrust::device_vector（很像std::vector），那么Thrust 会将您的数据复制到GPU，并且相同的thrust::remove_if() 调用配对相同的函子会产生相同的结果。我希望这能让您对 Thrust 有所了解，并鼓励您在他们的[快速入门指南](https://code.google.com/p/thrust/wiki/QuickStartGuide "快速入门指南")中找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:20:55.267

正如 SchighSchagh 所建议的，推力将是一种方法。ArrayFire 为正在发生的事情提供了更数学的表示。

```
const int dataSize = 65535;
const int category = 10;
float data[dataSize][category];
const float threshold = 0.5f;

int cnt = 0;

// populate data

// Transfer to device
array Data(data, category, dataSize); // Column major
array idx = where(Data(9, span) > threshold);
Data = Data(span, idx); 
```

# ios - 使 UIStepper 增量增加 5

> ID：11534863
> 
> 赞同：2
> 
> 时间：2012-07-18T05:36:22.990
> 
> 标签：ios, xcode, nsinteger, uistepper

有没有办法让 UIStepper 计数 5 而不是一次增加一个增量？即，点击 + 并且标签显示 5、10、15、20 等，或者每次都减去 5？到目前为止，我已经尝试过`value +5;`，但这不起作用。任何帮助都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:43:32.117

做`[<insertsteppername> setStepValue:5];`

例如：

```
UIStepper *stepper = [[UIStepper alloc] initWithFrame:CGRectMake(120,20,0,0)];
[stepper setStepValue:5]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:42:47.043

UIStepper 有一个增量设置（称为“步骤”） - 您可以在属性检查器中找到它。

# c# - 使用 XPath 在 XML 文档中匹配大小写和完全匹配

> ID：11534864
> 
> 赞同：-1
> 
> 时间：2012-07-18T05:36:24.030
> 
> 标签：c#, xml, visual-studio-2008, xpath

如何**匹配 xml 节点数据中的大小写**。我需要搜索 xml 节点数据并将给定的字符串与 xml 节点数据匹配。 **需要匹配：**

*   相符
*   完全符合

热烈欢迎这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:31:13.550

函数`lower-case()`和`upper-case()`仅在 XPath 2.0 及更高版本中可用。

**在 XPath 1.0 中用于不区分大小写的字符串比较使用**：

```
translate($string1, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')
=
 translate($string2, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') 
```

其中`$string1`和`$string2`是指定要比较的字符串的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:01:43.820

您可能想查看 XPath 规范的第 7.6.2 节：

[http://www.w3.org/TR/xpath-functions/#func-matches](http://www.w3.org/TR/xpath-functions/#func-matches "XPath 规范，第 7.6.2 节")

使用该`fn:matches`函数，您可以编写一个正则表达式来匹配您想要的目标字符串。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:13:44.423

尝试[`lower-case`或`upper-case`](http://www.w3schools.com/xpath/xpath_functions.asp#string)字符串函数。*这与不区分大小写*并不完全相同，但希望它足够接近：

```
//YourNode[lower-case(@title)='anders rostgaard bystru'] 
```

有关其他解决方案，请参阅[此帖子](https://stackoverflow.com/questions/1625446/problem-with-upper-case-and-lower-case-xpath-functions-in-selenium-ide/1625859#1625859)。

# java - 等待并通知协调

> ID：11534867
> 
> 赞同：1
> 
> 时间：2012-07-18T05:36:40.290
> 
> 标签：java, multithreading

有一个主线程有一个while循环，在这个while循环中，他检查一些条件，如果所有条件都满足，他启动另一个线程进入wait()状态。

其他并行运行的线程在工作完成时通知主线程。

**在主线程进入等待状态之前**， “子线程”通知主线程存在问题=死锁。

避免它的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:38:42.193

只要确保主线程不等待已经发生的事情。（为什么会有人这样做？这没有任何意义。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:04:34.870

简单的答案是使用 Java 5 中的并发包。 CountDownLatch 似乎适合这里。

如果您仅限于 Java 5 之前的环境，则必须创建一个使用相同算法的自定义实现。创建所有子线程后，主线程将调用 signalReady。子线程将在完成工作后调用 signalComplete。

一个简单的实现是有一个名为 Latch 的对象，它有两个两个成员字段。

> 下面的实现将适用于一个父母和一个孩子。对于其他孩子，可以为每个孩子提供自己的锁存器，以在完成时发出信号。在某些情况下，这将是竞争条件。在信号之间添加自旋锁或睡眠会降低竞争条件的可能性。**它不会消除它**

```
class Latch{
  Object readyLock;
  Object completeLock;

  public void signalComplete(){
    synchronized(readyLock){
      readyLock.wait()
    }
    //spin lock as a precaution
    synchronized(completeLock){
      completeLock.notify()
    }
  }

  public void signalReady(){
    synchronized(readyLock){
      readyLock.notify()
    }
    synchronized(completeLock){
      completeLock.wait()
    }
  }
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:44:55.753

我更喜欢使用 Explicit [Locks](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)。请参阅 Java 并发 API。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:57:58.150

使用信号量进行通知。

就是这样，真的。信号量有一个计数并且可以记录通知，直到主线程开始等待它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T06:19:15.057

一种非常常见的做法是，**几乎总是**将`wait()`方法置于`while`循环中，其“迭代条件”是检查是否发生了特定事件，一旦发生，其他线程就会调用该`notify()`方法。

前任：

```
while(!event_occurrence) {
    ...
    wait();
    ...
} 
```

`event_occurrence`另一个线程将调用`notify()`方法的事件在哪里。

# jquery - 在 html 文档中找到一段准确的 html 代码

> ID：11534872
> 
> 赞同：0
> 
> 时间：2012-07-18T05:37:14.647
> 
> 标签：jquery, html

我正在尝试在文档中找到 html 代码的精确副本。

我试过了

```
$("#tabs-1").find('div:contains(a)').html() 
```

HTML：

```
<div class="appointment" data-status="yes">
    <a class="app">Yuri G.</a>
</div> 
```

jquery 是否为此提供任何功能，还是我必须使用正则表达式？

**更新**：我有多个带有类约会的 div，在不同的 div 容器元素中具有相同的属性。我正在尝试通过拖放将它们复制到另一个地方。我想确保拖放位置中不存在副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:40:01.520

您不能使用`:contains`查找 HTML，只能查找文本。

您应该使用 DOM 搜索，而不是文本搜索。此代码为您提供`<a>`标签中的确切文本。然后，您可以比较该文本以查看它是否是您要查找的内容：

```
$("#tabs-1").find(".appointment[data-status='yes'] a.app").text(); 
```

这将为您提供约会 div，您可以从中获得所需的任何其他内容。根据您在 HTML 的那个区域中真正想要找到的内容，可以调整上面的内容来获得它。

如果有多个约会 div，那么您可以找到具有所需文本的那个，如下所示：

```
$("#tabs-1").find(".appointment[data-status='yes'] a.app:contains(Yuri G.)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T05:42:03.393

`:contains`用于文本，请尝试`:has`改用。

```
$("#tabs-1").find('div:has(a)').html() 
```

或者，如果您希望将整个 div 作为字符串，则需要使用`outerHTML`：

```
$("#tabs-1").find('div:has(a)').prop('outerHTML') 
```

演示：http: [//jsfiddle.net/SupSA/](http://jsfiddle.net/SupSA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:04:07.190

尝试

```
$("#tabs-1").find('div:has(a:contains("Yuri G.").app)') 
```

（见[http://jsfiddle.net/DB9Xh/](http://jsfiddle.net/DB9Xh/)）

# c# - 如何在没有渐变的情况下绘制图像

> ID：11534878
> 
> 赞同：0
> 
> 时间：2012-07-18T05:37:48.870
> 
> 标签：c#, .net

我有以下 3 张图片，并想用它们来绘制我的应用程序的背景。
![顶部粘合剂](../Images/69f8e8ee1943bbab1fb40b408f4659e2.png)
![中心粘合剂](../Images/7a3ae99593cc047b8e0360e2a7b16774.png)
![底部粘合剂](../Images/a4d7ac8f79f53bc1affe1a1f04650225.png)

但是当我通过扩大中心活页夹来绘制它时，我得到了以下带有渐变的结果。有没有办法解决这个问题？

```
 g.DrawImage(Resources.Resource.RingBinderTop, new Rectangle((this.Size.Width - 49) / 2, 9, 49, 11));
        g.DrawImage(Resources.Resource.RingBinder, new Rectangle((this.Size.Width - 49) / 2, 20, 49, this.Size.Height - 33));
        g.DrawImage(Resources.Resource.RingBinderBottom, new Rectangle((this.Size.Width - 49) / 2, this.Size.Height - 20, 49, 11)); 
```

![在此处输入图像描述](../Images/12c6bc71f5001d17d92a046c0b91a1cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:45:08.740

Graphics 类在 WinForms 应用程序中绘制图像。它在重绘期间闪烁屏幕并且性能很差，因为它依赖于 GDI。这可能是一个限制。

要获得平滑的结果，请使用支持 DirectX 的 WPF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:16:20.813

对此的解决方案是将 FillRectangle 与 TextureBrush 一起使用。

```
 g.DrawImage(Resources.Resource.RingBinderTop, new Rectangle((this.Size.Width - 49) / 2, 9, 49, 11));
    g.DrawImage(Resources.Resource.RingBinder, new Rectangle((this.Size.Width - 49) / 2, 20, 49, this.Size.Height - 33));
    g.FillRectangle(new TextureBrush(Resources.Resource.RingBinderBottom), new Rectangle((this.Size.Width - 49) / 2, this.Size.Height - 20, 49, 11)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T22:13:42.453

我没有找到找到此内容的网站，但请尝试以下操作

```
g.InterpolationMode = InterpolationMode.NearestNeighbor; 
```

# vb.net - 使用递归函数删除 TreeView 中的多个节点

> ID：11534881
> 
> 赞同：0
> 
> 时间：2012-07-18T05:38:21.770
> 
> 标签：vb.net, treeview, windows-forms-designer, tree-nodes

我有一个预先构建的`TreeView`控件。我想根据保存在数据库中的值将节点作为权限集删除。我使用递归方法来删除节点，但有些节点仍然存在并且不会被删除。这是我的代码：

```
Private Sub setNodes()
    For Each nd As TreeNode In TreeView1.Nodes
        If nd.Name = "Students" AndAlso row.Item("CanAddStudents") = False AndAlso row.Item("CanViewStudents") = False AndAlso row.Item("CanImportStudents") = False Then
            nd.Remove()
            nd.Tag = False
        End If
        If Not nd.Tag = False Then
            setNodes(nd)
        End If
        nd.Tag = True
    Next
End Sub

Private Sub setNodes(ByVal nd As TreeNode)
    For Each childNd As TreeNode In nd.Nodes
        If childNd.Name = "Registration" AndAlso row.Item("CanAddStudents") = False Then
            childNd.Remove()
            childNd.Tag = False
        ElseIf childNd.Name = "View_Registration" AndAlso row.Item("CanViewStudents") = False Then
            childNd.Remove()
            childNd.Tag = False
        ElseIf childNd.Name = "Import_Student" AndAlso row.Item("CanImportStudents") = False Then
            childNd.Remove()
            childNd.Tag = False
        End if
    Next
    If Not childNd.Tag = False Then
        setNodes(childNd)
    End If
    childNd.Tag = True
End Sub 
```

此代码适用于单个父节点及其子节点，但当父节点超过 1 个时无效。如果有 3 个父节点，则其中一个父节点不会删除。

我改变了我的代码如下。

```
Private Sub RemoveNodes(ByVal nc As TreeNodeCollection)
    For i As Integer = nc.Count - 1 To 0 Step -1
        If nc(i).Nodes.Count > 0 Then
            RemoveNodes(nc(i).Nodes)
        End If
        If nc(i).Name = "Registration" AndAlso row.Item("CanAddStudents") = False Then
            nc.RemoveAt(i)
        ElseIf nc(i).Name = "View_Registration" AndAlso row.Item("CanViewStudents") = False Then
            nc(i).Remove()
        ElseIf nc(i).Name = "Import_Student" AndAlso row.Item("CanImportStudents") = False Then
            nc(i).Remove()
        ElseIf nc(i).Name = "Students" AndAlso row.Item("CanAddStudents") = False AndAlso row.Item("CanViewStudents") = False AndAlso row.Item("CanImportStudents") = False Then
            nc(i).Remove()
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:33:09.363

仅通过查看此代码很难说，但在我看来确实很奇怪的一件事是，在该`setNodes(TreeNode)`方法中，您只能在最后一个子节点上递归调用自身。如果要为每个节点执行此操作，则需要将底部`If`语句向上移动到`For`循环中。例如：

```
For Each childNd As TreeNode In nd.Nodes
    If childNd.Name = "Registration" AndAlso row.Item("CanAddStudents") = False Then
        childNd.Remove()
        childNd.Tag = False
    ElseIf childNd.Name = "View_Registration" AndAlso row.Item("CanViewStudents") = False Then
        childNd.Remove()
        childNd.Tag = False
    ElseIf childNd.Name = "Import_Student" AndAlso row.Item("CanImportStudents") = False Then
        childNd.Remove()
        childNd.Tag = False
    End if

    'Put recursive call inside loop
    If Not childNd.Tag = False Then
        setNodes(childNd)
    End If
    childNd.Tag = True
Next 
```

# python - 扭曲的 adbapi 中的事务支持

> ID：11534882
> 
> 赞同：6
> 
> 时间：2012-07-18T05:38:23.070
> 
> 标签：python, transactions, twisted

我试图弄清楚事务在twisted 的adbapi 模块中是如何工作的。我目前正在使用 runOperation() 来执行 INSERT 和 UPDATE 语句。我将在下面链接到的文档使它看起来支持事务，但它似乎不像我想要的那样。这是一些示例代码（它在旋风网络服务器中运行，但希望这不相关）：

```
class OperationHandler(cyclone.web.RequestHandler):
    @cyclone.web.asynchronous
    def get(self, *args, **kwargs):
        d = conn.runOperation("INSERT INTO Table1 (Field1, Field2) VALUES ('a', 'b')")
        d.addCallback(self.next1)

    def next1(self, rows):
        d = conn.runOperation("UPDATE Table1 SET Field1 = 'c'")
        d.addCallback(self.next2)

    def next2(self, rows):
        raise Exception("rollback")
        self.finish("done") 
```

在这种情况下，即使在最后一个回调中引发了异常，INSERT 和 UPDATE 语句也会被执行。不是我想要的。

我尝试转换为使用 runInteraction() 方法，但我不确定我做得是否正确。

```
class InteractionHandler(cyclone.web.RequestHandler):
    @cyclone.web.asynchronous
    def get(self, *args, **kwargs):
        d = conn.runInteraction(self.someTransaction)
        d.addCallback(self.done)

    def someTransaction(self, txn):
        txn.execute("INSERT INTO Table1 (Field1, Field2) VALUES ('a', 'b')")
        txn.execute("UPDATE Table1 SET Field1 = 'c'")
        txn.execute("UPDATE Table1 SET Field1 = 'd'")

        raise Exception("rollback")

    def done(self, rows):
        print rows
        self.finish("done") 
```

在这种情况下，我得到了我想要的所有内容都回滚的效果，但是您可以看到代码完全不同。我没有将回调链接在一起，每个回调运行一个查询，而是在一个大方法中执行所有内容。

为了支持交易，必须这样做吗？

以下是文档的链接：

[http://twistedmatrix.com/documents/current/core/howto/rdbms.html](http://twistedmatrix.com/documents/current/core/howto/rdbms.html)

[http://twistedmatrix.com/documents/12.0.0/api/twisted.enterprise.adbapi.ConnectionPool.html#runInteraction](http://twistedmatrix.com/documents/12.0.0/api/twisted.enterprise.adbapi.ConnectionPool.html#runInteraction)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:21:50.100

是的。您`runInteraction`基于 - 的重写是正确的。

# iphone - 将字符添加到空白文本字段

> ID：11534887
> 
> 赞同：0
> 
> 时间：2012-07-18T05:38:42.553
> 
> 标签：iphone, ios, xcode

我是 xcode 的新手，并且坚持这一操作。单击按钮时，我正在尝试在字段中添加“否定”符号或“-”。

当有人在该字段中输入一个数字时，以下代码将起作用......它将为其添加或删除一个负号。

但是，如果该字段为空白并且您单击按钮，则会引发错误。

这是代码：

```
- (IBAction)fPosNeg:(id)sender {
    NSMutableString *str = [userFahrenheit.text mutableCopy];
    char iChar = [str characterAtIndex:0];
    if (iChar == '-') {
        userFahrenheit.text = [userFahrenheit.text substringFromIndex:1];
    } else if (iChar != '-') {
        [str insertString:@"-" atIndex:0];
        userFahrenheit.text = str;
    } else {
        userFahrenheit.text = [NSString stringWithFormat:@"-"];
    }
} 
```

这是错误：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__NSCFString characterAtIndex:]：范围或索引超出范围”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:42:51.263

您需要在调用此之前进行检查 -> [str characterAtIndex:0];

检查将是

```
 if(![str isEqualToString:@""]) // so that if string is blank, you cant access its character at index 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:01:35.967

```
NSMutableString *str = [NSMutableString stringWithString:@"-Test"];
char test = [str characterAtIndex:0];
NSMutableString *strFinal;
if (test  == '-') {
    strFinal = [NSMutableString stringWithString:[str substringFromIndex:1]];
}
else if (test != '-') {
    [str insertString:@"-" atIndex:0];
    strFinal=str;
}
else {
    strFinal=[NSString stringWithFormat:@"-"];
}
NSLog(@"%@",strFinal); 
```

你也可以使用这个。

我认为它可以解决你的问题。

# linux - Shell 编程 printf %s

> ID：11534888
> 
> 赞同：0
> 
> 时间：2012-07-18T05:38:44.957
> 
> 标签：linux

在使用 printf %s 方面需要一些帮助

这是我的代码的一部分

```
getspace=`expr 50-$getlength`;

#the space is between var1 & var2 
printf "%s %20s\n" "$var1" "$var2" 
```

我想将值 %20s 与 getspace 结果交换.. 表示如果此循环的 getspace 为 15，则为 %15s，如果下一个元素的 getspace 为 50，则为 %50s

我如何交换 printf 的动态变量

我试过了，它不起作用

```
printf "%s %$getspaces\n" "$var1" "$var2" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:45:27.910

```
printf "%s %${getspace}s\n" "$var1" "$var2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:37:09.920

```
printf "%s %*s\n" "$var1" "$getspace" "$var2" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T05:38:25.560

我认为这条线

```
getspace=`expr 50-$getlength` 
```

应该

```
getspace=`expr 50 - $getlength` 
```

接着，

```
printf "%s %${getspace}s\n" "$var1" "$var2" 
```

应该工作，因为它对我有用。

# c# - 条码字体与其他条码库的区别

> ID：11534889
> 
> 赞同：2
> 
> 时间：2012-07-18T05:38:59.227
> 
> 标签：c#, .net

我想知道条形码字体和其他可用的条形码库之间的区别。

1.  这些字体是如何工作的？
2.  我的意思是它与其他条形码库有什么不同？这些条形码字体也可以用于商业目的吗？
3.  在商业应用中使用是否足够可行？
4.  有一些第三方条形码库。
5.  我如何从他们的 dll 或 lib 文件中看到他们使用的库。

免费条码字体与其他条码库的区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:48:34.737

1.  由于每个条码都是一个字符串的表示，而字符串中的每个字符都由条码的一个片段精确地表示，因此可以单独表示条码字符串的每个字符。因此，您可以使用字体来表示条形码（尽管 EAN13 等条形码需要前缀和后缀，但这些也可以用字符表示）。例如，字体只是绘制一组线条而不是绘制一个`4`。

2.  另一种渲染条形码的方法是手动绘制线条，这可能会产生相同的输出。条形码的缩放也必须手动完成。通过使用字体，您可以在打印条形码时获得最佳效果。

3.  使用字体通常会在细节方面提供最佳结果，尤其是在打印时。我想不出有什么限制会使它们不适合商业应用。在办公应用程序中显示条形码的能力是一个不错的奖励。

4.  我不知道任何库，到目前为止我使用过字体或呈现自己的字体。

5.  如果它是一个 .NET 程序集，如果库已合并到主程序集中，您可以使用 ILSpy 查看程序集的内容/依赖项，否则 dll 将位于应用程序的文件夹中。

# ruby-on-rails - 如何在 Heroku 上上传大文件（尤其是视频）

> ID：11534894
> 
> 赞同：7
> 
> 时间：2012-07-18T05:39:47.927
> 
> 标签：ruby-on-rails, heroku, upload, http-error

我正在使用 heroku 来托管一个主要关注托管视频的 Web 应用程序。这些视频是通过 vimeo pro 托管的，我正在使用[matthooks 的 vimeo gem](https://github.com/matthooks/vimeo)来帮助处理上传过程。**上传适用于小文件，但不适用于较大的文件**（例如~50mb）。

查看 heroku 日志显示我收到 http 错误 413，它代表“请求实体太大”。[我相信这可能与 heroku 对文件上传的限制有关（根据此网页](https://stackoverflow.com/questions/8032232/enforce-file-upload-size-on-heroku)，大于 30mb ）。但问题是，我能找到的关于该主题的任何信息似乎都已过时且相互冲突（例如[声称没有大小限制的](https://groups.google.com/forum/?fromgroups#!topic/heroku/6zdLfFfjHfs)此页面）。我在 heroku 的网站上也找不到任何关于此的内容。

我搜索了谷歌并找到了一些相关的页面（[一](https://groups.google.com/forum/?fromgroups#!topic/carrierwave/QpAQMUAo9NY)和[二](http://comments.gmane.org/gmane.comp.lang.ruby.rails.heroku/3517)），但没有适合我的解决方案。我发现的大多数页面都涉及将大文件上传到亚马逊 s3，这与我想要做的不同。

这是日志的相关输出：

```
2012-07-18T05:13:31+00:00 heroku[nginx]: 152.3.68.6 - - [18/Jul/2012:05:13:31 +0000]
  "POST /videos HTTP/1.1" 413 192 "http://neoteach.com/components/19" "Mozilla/5.0 
  (Macintosh; Intel Mac OS X 10.7; rv:13.0) Gecko/20100101 Firefox/13.0.1" neoteach.com 
```

**日志中没有其他错误。**这是我尝试上传太大的视频时出现的唯一输出。这意味着这不是超时错误或超出每个测功机分配的内存的问题。

heroku 真的对上传大小有限制吗？如果是这样，有没有办法改变这个限制？请注意，文件本身根本没有存储在 heroku 的服务器上，它们只是被传递到 vimeo 的服务器上。

如果问题不在于上传大小的限制，那么有人知道还有什么问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:10:55.280

**更新：**

在这里。我仍然不确定为什么会收到这个特殊的 413 错误，但我能够想出一个使用[s3_swf_upload](https://github.com/nathancolgate/s3-swf-upload-plugin) gem 的解决方案。实现涉及闪存，这不太理想，但它是我可以工作的唯一解决方案（我尝试过的 3 或 4 个）。

正如尼尔指出的（感谢尼尔！），我应该得到的错误是“H12 - 请求超时”。经过反复试验，我确实遇到了这个错误。当您尝试从控制器（使用网络测功机）将大文件上传到 heroku 服务器时会出现问题，因为服务器响应发布请求需要很长时间。

正确的方法是将文件直接发送到 s3 而不通过 h​​eroku。

这是我的方法的高级概述：

1.  使用 s3_swf_upload gem 向 s3 提供直接上传表单。
2.  使用 gem 中提供的 javascript 回调函数检测文件何时完成上传。
3.  使用 javascript，向 rails 发送一条消息，让您的服务器知道文件已完成上传。
4.  响应 javascript 帖子的控制器做了两件事：(a) 将 s3_key 属性分配给视频对象（作为表单中的参数提供）。(b) 使用[delayed_job](https://github.com/collectiveidea/delayed_job) gem 启动后台任务。
5.  后台任务从 s3 检索文件。我使用[aws-sdk](https://github.com/amazonwebservices/aws-sdk-for-ruby) gem 来完成此操作，因为它已包含在 s3_swf_upload 中。**请注意，这与 aws-s3 gem 明显不同（实际上它们彼此冲突）。**
6.  从 s3 检索文件后，我使用[vimeo](https://github.com/matthooks/vimeo) gem 将其上传到 vimeo（仍在后台）。

上面的实现有效，**但并不完美**。对于大小接近 500MB 的文件，您仍然会在工作人员测功机中遇到 R14 错误。发生这种情况是因为 heroku 只为每个测功机分配 512MB 的内存，因此您不能一次将整个文件加载到内存中。解决这个问题的方法是在最后一步中实现某种分块，从 s3 中检索文件并将其逐个上传到 vimeo。我仍在这部分工作，我很想听听您的任何建议。

希望这可以帮助某人。有问题尽管问我。就像我说的那样，我的解决方案并不完美，所以如果您认为它可能会更好，请随时添加您自己的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:53:59.813

我认为这里最好的选择确实是直接上传到 S3。与允许用户将文件上传到您自己的服务器（或本例中的 Heroku）相比，它更便宜且更安全。这也是许多视频托管平台使用的经过充分验证的模式（我知道 vzaar 就是这样做的）。

查看 jQuery 上传插件，它允许直接上传到 S3：[https ://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

另请查看有关此主题的 Railscast：#381 和 #383。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T10:01:02.163

您最大的问题不是这里文件的大小，而是您希望用户将大文件上传到 Heroku，然后将它们传递给您。这里的问题是 Heroku 平台上的所有请求都必须在 30 秒内返回第一个字节 - 在您的情况下这不太可能。

因此，您需要考虑让用户直接上传到 S3/Vimeo/任何地方，然后将您的应用程序数据连接到这些上传的资产。

如果您使用的是 Ruby，那么载波直接 gem 可能值得一看它是如何完成的。如果没有第三方服务允许您通过一些代码来执行此操作，您可以将这些代码放入页面中，但这些都需要附加费用。

# javascript - html5 画布变换和缓存渐变、曲线和旋转

> ID：11534895
> 
> 赞同：1
> 
> 时间：2012-07-18T05:39:49.540
> 
> 标签：javascript, html, optimization, canvas

我正在画布上制作游戏，到目前为止，我的大部分绘画都是实心形状和弧线。但我想添加模糊和阴影等效果来创建发光和拖尾效果。

我的问题是，是否有一种无需外部库的好方法来缓存发光元素（玩家、敌人等），是否值得这样做而不是每次都重新创建效果？旋转也是如此。如果我在玩家旋转他们的船时重复绘制大约 40 个不同的角度，我应该只缓存这些计算吗？

我目前正在使用手动变换来旋转弧线结尾，而不是旋转上下文，因为我还不知道这是否比为许多屏幕元素及其不同角度重复旋转画布更有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:31:12.520

模糊和阴影效果不包含在主画布库中，但您可以创建自己的库，或者您可以使用外部画布库（如[easel.js）](http://createjs.com/#!/EaselJS)，但有大量与 HTML5 相关的不同库`<canvas>`。您可以选择最适合您的。

关于模糊效果，您可以使用 Mario Klingeman stackblur javascript 实现：[http](http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html) ://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html 。它易于使用且速度超快。

对于发光效果，随机纹理生成的一种好方法是已经在 javascript 中实现的单纯形噪声算法：[https](https://gist.github.com/304522) ://gist.github.com/304522或此处的原始算法：http: [//mrl.nyu.edu/~perlin /噪音/](http://mrl.nyu.edu/~perlin/noise/)

对于最后一个问题，我建议您使用`context` `save`and`restore`功能获得更好的性能。它要快得多。

# iphone - 使 UIImagePickerController （相机视图）只显示一定数量的像素

> ID：11534896
> 
> 赞同：0
> 
> 时间：2012-07-18T05:39:51.703
> 
> 标签：iphone, objective-c, ios, uiimage, uiimagepickercontroller

如何使 UIImagePickerController（相机视图）仅显示一定的像素数（可能为 400 * 400）。

这是否涉及创建 cameraOverlayView 或者有什么方法可以设置对能够拍摄的像素的约束？

任何建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:44:05.733

你应该去添加一个覆盖，因为这样做你将能够将相机视图约束到所需的矩形。 [http://blog.blackwhale.at/?p=443](http://blog.blackwhale.at/?p=443) http://www.musicalgeometry.com/?p=1273

# javascript - 如何在 jquery 中从 .html() 获取 id

> ID：11534900
> 
> 赞同：-1
> 
> 时间：2012-07-18T05:40:21.990
> 
> 标签：javascript, jquery

以下是我的代码我想从 .htm() 方法访问“课程类型”ID 如何访问该 ID

```
 $("#question-type").html("<option>Select</option><option>Excel Sheet</option><option>One by One</option>");

$("#question-type").change(function(){
    $("#course").html("<label>Select course </label><select id='course-type'><option>Course 1</option><option>Course 2</option><option>Course 3</option></select>");
});

$("#course-type").change(function(){

    $("#subject").html("<label>Select subject </label><select id='subject-type'><option>Subject 1</option><option>Subject 2</option><option>Subject 3</option></select>");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:42:58.010

尝试这个。

当您在 DOM 上添加课程类型选择列表时，请创建更改事件处理程序。

```
$("#question-type").change(function(){
    $("#course").html("<label>Select course </label><select id='course-type'><option>Course 1</option><option>Course 2</option><option>Course 3</option></select>");
    $("#course-type").change(function(){
          $("#subject").html("<label>Select subject </label><select id='subject-type'><option>Subject 1</option><option>Subject 2</option><option>Subject 3</option></select>");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T05:42:47.583

如果它还没有被添加到 DOM 中，那么它将无法被访问。由于在执行更改功能之前不会创建它`#question-type`，因此您可能试图在它存在之前访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T05:52:38.327

要将处理程序绑定到尚未在 DOM 中的元素的事件，请使用[`.on()`](http://api.jquery.com/on/)：

```
$("#course").on("change", "#course-type", function(){
    $("#subject").html("<label>Select subject </label><select id='subject-type'><option>Subject 1</option><option>Subject 2</option><option>Subject 3</option></select>");
}); 
```

使用此方法的优点是每次`question-type`更改时不会重新绑定到事件；您将单个处理程序绑定到父元素 ( `#course`) 并等待更改事件从`#course-type`元素中冒出（如果存在）。

# ruby-on-rails - Ruby on rails 应用程序在本地工作，但在 heroku 上不起作用

> ID：11534902
> 
> 赞同：8
> 
> 时间：2012-07-18T05:40:29.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我正在为 ruby​​ on rails 做 michael hartl 的教程，当应用程序部署时，一切都在本地运行良好，但在 heroku 上却不行。这个问题出现在本书的第 7 章之前：[http ://ruby.railstutorial.org/ruby-on- rails-tutorial-book#top](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#top)

您需要调试此问题的任何详细信息吗？请告诉我.....

这是heroku日志：

```
$ 2012-07-18T06:10:26+00:00 app[web.1]:     6:         <ul class="nav pull-right">

2012-07-18T06:10:26+00:00 app[web.1]: ActionView::Template::Error (undefined met
hod `find_by_remember_token' for #<Class:0x00000004960740>):
2012-07-18T06:10:26+00:00 app[web.1]:     7:           <li><%= link_to "Home", r
oot_path %></li>
2012-07-18T06:10:26+00:00 app[web.1]:     8:           <li><%= link_to "Help", h
elp_path %></li>
2012-07-18T06:10:26+00:00 app[web.1]:     9:           <% if signed_in? %>
2012-07-18T06:10:26+00:00 app[web.1]:     10:             <li><%= link_to "Users
", users_path %></li>
2012-07-18T06:10:26+00:00 app[web.1]:     11:             <li id="fat-menu" clas
s="dropdown">
2012-07-18T06:10:26+00:00 app[web.1]:     12:               <a href="#" class="d
ropdown-toggle" data-toggle="dropdown">
2012-07-18T06:10:26+00:00 app[web.1]:   app/helpers/sessions_helper.rb:10:in `cu
rrent_user'
2012-07-18T06:10:26+00:00 app[web.1]:   app/helpers/sessions_helper.rb:23:in `si
gned_in?'
2012-07-18T06:10:26+00:00 app[web.1]:   app/views/layouts/application.html.erb:1
1:in `_app_views_layouts_application_html_erb___2533055855927805914_43132200'
2012-07-18T06:10:26+00:00 app[web.1]:   app/views/layouts/_header.html.erb:9:in
`_app_views_layouts__header_html_erb__2547305690965663969_41244280'
2012-07-18T06:10:26+00:00 app[web.1]:
2012-07-18T06:10:26+00:00 app[web.1]:
2012-07-18T06:10:26+00:00 heroku[router]: GET whizcollab.herokuapp.com/ dyno=web
.1 queue=0 wait=0ms service=345ms status=500 bytes=643
2012-07-18T06:10:34+00:00 app[web.1]:
2012-07-18T06:10:34+00:00 app[web.1]: Started GET "/" for 115.87.214.246 at 2012
-07-18 06:10:34 +0000
2012-07-18T06:10:34+00:00 app[web.1]:
2012-07-18T06:10:34+00:00 app[web.1]: Processing by StaticPagesController#home a
s HTML
2012-07-18T06:10:34+00:00 app[web.1]:   Rendered static_pages/home.html.erb with
in layouts/application (0.6ms)
2012-07-18T06:10:34+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2012-07-18T06:10:34+00:00 app[web.1]:   Rendered layouts/_header.html.erb (1.2ms
)
2012-07-18T06:10:34+00:00 app[web.1]: Completed 500 Internal Server Error in 4ms

2012-07-18T06:10:34+00:00 app[web.1]: ActionView::Template::Error (undefined met
hod `find_by_remember_token' for #<Class:0x00000004960740>):
2012-07-18T06:10:34+00:00 app[web.1]:
2012-07-18T06:10:34+00:00 app[web.1]:     8:           <li><%= link_to "Help", h
elp_path %></li>
2012-07-18T06:10:34+00:00 app[web.1]:     9:           <% if signed_in? %>
2012-07-18T06:10:34+00:00 app[web.1]:     6:         <ul class="nav pull-right">

2012-07-18T06:10:34+00:00 app[web.1]:     10:             <li><%= link_to "Users
", users_path %></li>
2012-07-18T06:10:34+00:00 app[web.1]:     7:           <li><%= link_to "Home", r
oot_path %></li>
2012-07-18T06:10:34+00:00 app[web.1]:     11:             <li id="fat-menu" clas
s="dropdown">
2012-07-18T06:10:34+00:00 app[web.1]:     12:               <a href="#" class="d
ropdown-toggle" data-toggle="dropdown">
2012-07-18T06:10:34+00:00 app[web.1]:   app/helpers/sessions_helper.rb:10:in `cu
rrent_user'
2012-07-18T06:10:34+00:00 app[web.1]:   app/views/layouts/_header.html.erb:9:in
`_app_views_layouts__header_html_erb__2547305690965663969_41244280'
2012-07-18T06:10:34+00:00 app[web.1]:   app/helpers/sessions_helper.rb:23:in `si
gned_in?'
2012-07-18T06:10:34+00:00 app[web.1]:   app/views/layouts/application.html.erb:1
1:in `_app_views_layouts_application_html_erb___2533055855927805914_43132200'
2012-07-18T06:10:34+00:00 app[web.1]:
2012-07-18T06:10:34+00:00 app[web.1]:
2012-07-18T06:10:34+00:00 heroku[router]: GET whizcollab.herokuapp.com/ dyno=web
.1 queue=0 wait=0ms service=22ms status=500 bytes=643
2012-07-18T06:12:03+00:00 app[web.1]:
2012-07-18T06:12:03+00:00 app[web.1]:
2012-07-18T06:12:03+00:00 app[web.1]: Started GET "/" for 115.87.214.246 at 2012
-07-18 06:12:03 +0000
2012-07-18T06:12:03+00:00 app[web.1]: Processing by StaticPagesController#home a
s HTML
2012-07-18T06:12:03+00:00 app[web.1]:   Rendered static_pages/home.html.erb with
in layouts/application (0.7ms)
2012-07-18T06:12:03+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2012-07-18T06:12:03+00:00 app[web.1]: Completed 500 Internal Server Error in 6ms

2012-07-18T06:12:03+00:00 app[web.1]:   Rendered layouts/_header.html.erb (2.3ms
)
2012-07-18T06:12:03+00:00 app[web.1]: ActionView::Template::Error (undefined met
hod `find_by_remember_token' for #<Class:0x00000004960740>):
2012-07-18T06:12:03+00:00 app[web.1]:
2012-07-18T06:12:03+00:00 app[web.1]:     6:         <ul class="nav pull-right">

2012-07-18T06:12:03+00:00 app[web.1]:     7:           <li><%= link_to "Home", r
oot_path %></li>
2012-07-18T06:12:03+00:00 app[web.1]:     8:           <li><%= link_to "Help", h
elp_path %></li>
2012-07-18T06:12:03+00:00 app[web.1]:     9:           <% if signed_in? %>
2012-07-18T06:12:03+00:00 app[web.1]:     11:             <li id="fat-menu" clas
s="dropdown">
2012-07-18T06:12:03+00:00 app[web.1]:     10:             <li><%= link_to "Users
", users_path %></li>
2012-07-18T06:12:03+00:00 app[web.1]:     12:               <a href="#" class="d
ropdown-toggle" data-toggle="dropdown">
2012-07-18T06:12:03+00:00 app[web.1]:   app/helpers/sessions_helper.rb:10:in `cu
rrent_user'
2012-07-18T06:12:03+00:00 app[web.1]:   app/helpers/sessions_helper.rb:23:in `si
gned_in?'
2012-07-18T06:12:03+00:00 app[web.1]:   app/views/layouts/_header.html.erb:9:in
`_app_views_layouts__header_html_erb__2547305690965663969_41244280'
2012-07-18T06:12:03+00:00 app[web.1]:   app/views/layouts/application.html.erb:1
1:in `_app_views_layouts_application_html_erb___2533055855927805914_43132200'
2012-07-18T06:12:03+00:00 app[web.1]:
2012-07-18T06:12:03+00:00 app[web.1]:
2012-07-18T06:12:03+00:00 heroku[router]: GET whizcollab.herokuapp.com/ dyno=web
.1 queue=0 wait=0ms service=17ms status=500 bytes=643
2012-07-18T06:13:31+00:00 app[web.1]:
2012-07-18T06:13:31+00:00 app[web.1]:
2012-07-18T06:13:31+00:00 app[web.1]: Started GET "/" for 115.87.214.246 at 2012
-07-18 06:13:31 +0000
2012-07-18T06:13:31+00:00 app[web.1]: Processing by StaticPagesController#home a
s HTML
2012-07-18T06:13:31+00:00 app[web.1]:   Rendered static_pages/home.html.erb with
in layouts/application (0.4ms)
2012-07-18T06:13:31+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2012-07-18T06:13:31+00:00 app[web.1]:   Rendered layouts/_header.html.erb (1.9ms
)
2012-07-18T06:13:31+00:00 app[web.1]: Completed 500 Internal Server Error in 4ms

2012-07-18T06:13:31+00:00 app[web.1]:
2012-07-18T06:13:31+00:00 app[web.1]: ActionView::Template::Error (undefined met
hod `find_by_remember_token' for #<Class:0x00000004960740>):
2012-07-18T06:13:31+00:00 app[web.1]:     6:         <ul class="nav pull-right">

2012-07-18T06:13:31+00:00 app[web.1]:     7:           <li><%= link_to "Home", r
oot_path %></li>
2012-07-18T06:13:31+00:00 app[web.1]:     9:           <% if signed_in? %>
2012-07-18T06:13:31+00:00 app[web.1]:     11:             <li id="fat-menu" clas
s="dropdown">
2012-07-18T06:13:31+00:00 app[web.1]:     10:             <li><%= link_to "Users
", users_path %></li>
2012-07-18T06:13:31+00:00 app[web.1]:     8:           <li><%= link_to "Help", h
elp_path %></li>
2012-07-18T06:13:31+00:00 app[web.1]:     12:               <a href="#" class="d
ropdown-toggle" data-toggle="dropdown">
2012-07-18T06:13:31+00:00 app[web.1]:   app/helpers/sessions_helper.rb:10:in `cu
rrent_user'
2012-07-18T06:13:31+00:00 app[web.1]:   app/helpers/sessions_helper.rb:23:in `si
gned_in?'
2012-07-18T06:13:31+00:00 app[web.1]:   app/views/layouts/application.html.erb:1
1:in `_app_views_layouts_application_html_erb___2533055855927805914_43132200'
2012-07-18T06:13:31+00:00 app[web.1]:
2012-07-18T06:13:31+00:00 app[web.1]:   app/views/layouts/_header.html.erb:9:in
`_app_views_layouts__header_html_erb__2547305690965663969_41244280'
2012-07-18T06:13:31+00:00 app[web.1]:
2012-07-18T06:13:31+00:00 heroku[router]: GET whizcollab.herokuapp.com/ dyno=web
.1 queue=0 wait=0ms service=22ms status=500 bytes=643
2012-07-18T06:13:37+00:00 app[web.1]:
2012-07-18T06:13:37+00:00 app[web.1]:
2012-07-18T06:13:37+00:00 app[web.1]: Started GET "/users" for 115.87.214.246 at
 2012-07-18 06:13:37 +0000
2012-07-18T06:13:37+00:00 heroku[router]: GET whizcollab.herokuapp.com/users dyn
o=web.1 queue=0 wait=0ms service=47ms status=500 bytes=643
2012-07-18T06:13:37+00:00 app[web.1]: Processing by UsersController#index as HTM
L
2012-07-18T06:13:37+00:00 app[web.1]: Completed 500 Internal Server Error in 1ms

2012-07-18T06:13:37+00:00 app[web.1]:
2012-07-18T06:13:37+00:00 app[web.1]:   app/helpers/sessions_helper.rb:10:in `cu
rrent_user'
2012-07-18T06:13:37+00:00 app[web.1]: NoMethodError (undefined method `find_by_r
emember_token' for #<Class:0x00000004960740>):
2012-07-18T06:13:37+00:00 app[web.1]:   app/helpers/sessions_helper.rb:23:in `si
gned_in?'
2012-07-18T06:13:37+00:00 app[web.1]:   app/controllers/users_controller.rb:48:i
n `signed_in_user'
2012-07-18T06:13:37+00:00 app[web.1]:
2012-07-18T06:13:37+00:00 app[web.1]: 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T20:07:10.603

所以我也在做 Hart 教程并且遇到了同样的问题。我运行了 heroku run db:migrate....我确保它是最新的 git push heroku....我在数据库中为我的一个用户添加了一个 remember_key。它在 schema.rb 文件中。

我终于找到了答案：

用户.rb：

将 :remember_token 添加到 attr_accessible

例如：“attr_accessible :name, :email, :password, :password_confirmation, :remember_token”

出于某种原因，这被排除在教程之外，即使现在我知道出了什么问题，这也是有道理的。添加此内容后，我重新推送到 heroku 和 Viola....

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T08:55:12.553

动态查找器仅在您要搜索的属性存在时才有效。要么您没有运行所有迁移，要么您根本没有该属性（remember_token），或者您拼写错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T17:36:53.827

我遇到了同样的问题，我不得不说恕我直言，没有必要添加 `:remember_token` 到该`attr_accessible`字段中。这样做会暴露`:remember_token`，创建 getter 和 setter，这不是必需的，因为`:remember_token`必须将其视为内部变量。我解决了重新启动 Heroku 应用程序的问题，如下所示：

[heroku-nomethod-error-remember-token](https://stackoverflow.com/questions/10527892/heroku-nomethod-error-remember-token)

重新启动后，应用程序正常工作，就像在本地一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T00:29:17.527

尝试运行`heroku restart`。它对我有用。

应该注意的是，根据[r4m 的回答](https://stackoverflow.com/a/15344976/850548)`:remembered_token`，不建议添加到您的声明中。（Hartl 在教程中没有这样做是有原因的。）`attr_accessible`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T08:34:02.733

它失败是因为它没有找到以下方法的定义`find_by_remember_token`。我记得这`remember_token`是在`session_helper`Hartl 教程中定义的。它似乎在`signed_in?`调用该方法时出现。

你能粘贴`session_helper.rb`和`User`模型代码吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T09:36:23.967

该行：

```
ActionView::Template::Error (undefined method `find_by_remember_token' for #<Class:0x00000004960740>): 
```

告诉你 Rails 不知道 'find_by_remember_token' 是什么，这意味着它要么不存在（即这是一个错字），要么通常用于确定类属性的数据库不知道这个领域。

假设这不是一个错字，那么迁移您的数据库将是一个选项：

```
heroku run rake db:migrate 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T22:32:01.230

当我尝试推送到 heroku 和亚马逊时，我遇到了内部服务器错误。在将应用程序推送到服务器之前，我必须预编译我的资产。如果这是您的问题，最简单的解决方案是运行

```
RAILS_ENV=production rake assets:precompile 
```

或者如果您使用 Capistrano，请将 load 'deploy/assets' 添加到 capfile。有人告诉我您可以将以下内容添加到您的 deploy.rb 文件中，但我无法使其正常工作。

```
after "deploy:restart", "deploy:precompile"

  namespace :deploy do

    desc "Compile assets"
    task :precompile, :roles => :app do
    run "cd #{release_path} && rake RAILS_ENV=#{rails_env} assets:precompile"
  end
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-03T05:29:49.503

对我有用的是完全按照教程中的描述在用户模型中定义 create_remember_token 方法。

```
private
def create_remember_token
   self.remember_token = SecureRandom.urlsafe_base64
end 
```

然后在 before_save 方法中调用它。

```
before_save { 
    self.email.downcase!
    create_remember_token
} 
```

我之前没有将它作为方法声明。虽然它在我的电脑上运行，但在 Heroku 中却失败了。

```
#this failed in Heroku    
before_save { 
    self.email.downcase!
    self.remember_token = SecureRandom.urlsafe_base64
} 
```

此外，运行也无害：

```
heroku run rake db:migrate 
```

# php - 如何在 Where 中使用别名

> ID：11534906
> 
> 赞同：0
> 
> 时间：2012-07-18T05:40:41.187
> 
> 标签：php, mysql, zend-framework

这是我的代码，但它不起作用：

```
$select = $db->select()
             ->from(array('p' => 'products'), 'p.product_id')
             ->columns(array('x' => new Zend_Db_Expr('(SELECT...)'                    
                       )))
             ->where('x = ?', 'value');
             // Alternatively use columns('p.product_name') 
```

如何检索 x 并在 where 子句中对其进行比较？

这是实际的查询：

```
SELECT `abstract_submission`.*,
   (SELECT GROUP_CONCAT(CONCAT(user.firstName, " ", user.lastName) SEPARATOR ",")
           FROM mamba_event.abstract_submission_reviewer reviewer INNER JOIN                 
           mamba_account.account_user user ON user.id = reviewer.userId
       WHERE reviewer.submissionId = mamba_event.abstract_submission.id AND
       user.isEnabled = 1) 
    AS `reviewers`,
   (SELECT GROUP_CONCAT(CONCAT(author.firstName, " ", author.lastName) SEPARATOR ",")
           FROM mamba_event.abstract_author author INNER JOIN
           mamba_event.abstract_submission_author map ON author.id = map.authorId
       WHERE map.submissionId = mamba_event.abstract_submission.id)
   AS `allAuthors`,
   (SELECT COUNT(`abstract_paper`.`id`) FROM `mamba_event`.`abstract_paper`
      WHERE `abstract_paper`.`submissionId` = `abstract_submission`.`id`)
   AS `numPapers`,
   (SELECT `paperNumber` FROM `mamba_event`.`abstract_paper`
      WHERE `abstract_paper`.`submissionId` = `abstract_submission`.`id` AND
          `abstract_paper`.`currentStatus` = 3 LIMIT 1)
    AS `acceptedPaperNumber`,
    (SELECT IF ((COUNT(1) > 0), 'Paper has been uploaded','None') AS hasUploadedPaper
         FROM `mamba_event`.`abstract_paper` paper
      WHERE paper.submissionId = `mamba_event`.`abstract_submission`.`id`) 
     AS `hasUploadedPaper`,
    (SELECT GROUP_CONCAT(CONCAT(user.firstName, " ", user.lastName) SEPARATOR ",")
       FROM `mamba_event`.`abstract_submission_reviewer` reviewer INNER JOIN 
            `mamba_account`.`account_user` user ON user.id = reviewer.userId
         WHERE reviewer.submissionId = `mamba_event`.`abstract_submission`.`id`
         AND reviewer.hasConflictOfInterest = 1
         AND user.isEnabled = 1)
     AS `reviewersWithConflict`,
    (SELECT AVG(`score`) FROM `mamba_event`.`abstract_submission_score`
        WHERE `submissionId` = `abstract_submission`.`id`)
     AS `averageScore`,
     (SELECT AVG(`score`) FROM `mamba_event`.`abstract_paper_score`, `mamba_event`.`abstract_paper`
        WHERE `abstract_paper_score`.`paperId` = `abstract_paper`.`id`
          AND `abstract_paper`.`submissionId` = `abstract_submission`.`id`
          AND (`abstract_paper`.`currentStatus` = 1
          OR `abstract_paper`.`currentStatus` = 3))
      AS `averagePaperScore`,
      (SELECT AVG(`score`*`scoreWeight`) FROM `mamba_event`.`abstract_submission_score` INNER JOIN
           `mamba_event`.`abstract_request_criteria` ON `criteriaId` = `abstract_request_criteria`.`id`
         WHERE `submissionId` = `abstract_submission`.`id`) 
      AS `averageWeightedScore`,
     (SELECT AVG(`score`*`scoreWeight`) FROM `mamba_event`.`abstract_paper_score` JOIN
          `mamba_event`.`abstract_paper` INNER JOIN
          `mamba_event`.`abstract_request_criteria` ON
          `criteriaId` = `abstract_request_criteria`.`id`
       WHERE `abstract_paper_score`.`paperId` = `abstract_paper`.`id`
       AND `abstract_paper`.`submissionId` = `abstract_submission`.`id`
       AND (`abstract_paper`.`currentStatus` = 1
       OR `abstract_paper`.`currentStatus` = 3))
     AS `averageWeightedPaperScore`, `author`.`email`
     AS `authorEmail`, `author`.`salutation`
     AS `authorTitle`, `author`.`firstName`
     AS `authorFirstName`, `author`.`lastName`
     AS `authorLastName`, `author`.`organisation`
     AS `authorOrganisation`, `author`.`position`
     AS `authorPosition`, `author`.`department`
     AS `authorDepartment`, `author`.`phone`
     AS `authorPhone`, `author`.`fax`
     AS `authorFax`, `address`.`line1`
     AS `addressLine1`, `address`.`line2`
     AS `addressLine2`, `address`.`line3`
     AS `addressLine3`, `address`.`line4`
     AS `addressLine4`, `address`.`city`
     AS `addressCity`, `address`.`stateCode`
     AS `addressStateCode`, `address`.`countryCode`
     AS `addressCountryCode`, `address`.`postalCode`
     AS `addressPostalCode`, `author`.`biography`
     AS `authorBiography`, `request`.`title`
     AS `request`, `request`.`blindReview`, `request`.`hasCustomTypes`, `file`.`content_type`, `file`.`original_filename` AS `filename`, `author`.`speakerId`,
     (SELECT GROUP_CONCAT(
                          CONCAT('',ifnull(author.firstName,'-'),' ',
                                    ifnull(author.lastName,'-'),' 
                                    (',ifnull(author.organisation,'-'),', 
                                    ',ifnull(author.authorCountryCode,'-'),')')
                        SEPARATOR ",")
              FROM `mamba_event`.`abstract_author` author LEFT JOIN 
                    `mamba_event`.`abstract_submission_author` sa
                 ON sa.authorId = author.id
              WHERE sa.submissionId = `abstract_submission`.`id`)
           AS `authorDetails`,
          (SELECT GROUP_CONCAT(`field`.`fieldValue`)
               FROM `mamba_abstract`.`author_field_value_varchar` `field` 
                 WHERE `field`.`fieldId` = '2185'
                 AND `field`.`authorId` = `abstract_submission`.`presenterId`)
          AS `field2185`,
      (SELECT GROUP_CONCAT(`field`.`fieldValue`)
              FROM `mamba_abstract`.`author_field_value_varchar` `field`
                 WHERE `field`.`fieldId` = '2335'
                   AND `field`.`fieldValue` = 'BSCS'
                   AND `field`.`authorId` = `abstract_submission`.`presenterId`)
      AS `field2335`,
     (SELECT GROUP_CONCAT(`field`.`fieldValue`)
         FROM `mamba_abstract`.`author_field_value_varchar` `field`
            WHERE `field`.`fieldId` = '2336'
            AND `field`.`authorId` = `abstract_submission`.`presenterId`)
      AS `field2336` FROM `mamba_event`.`abstract_submission`
 INNER JOIN `mamba_event`.`abstract_request` AS `request` ON requestId = request.id
 LEFT JOIN `mamba_account`.`account_file` AS `file` ON fileId = file.id
 INNER JOIN `mamba_event`.`abstract_author` AS `author` ON `presenterId` = `author`.`id`
 LEFT JOIN `mamba_general`.`address` ON `author`.`addressId` = `address`.`id` WHERE ((`abstract_submission`.`isEnabled` = '1') AND (`abstract_submission`.`eventId` = '1893')) AND (`field2335` LIKE "%BSCS%") ORDER BY `request` asc LIMIT 15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:27:51.847

你可以做到这一点`HAVING`，就像 Muhammad Zeeshan 说的那样。

```
$select = $db->select()
    ->from(array('p' => 'products'), 'p.product_id')
    ->columns(array('x' => new Zend_Db_Expr('(SELECT...)')))
    ->having('x = ?', 'value'); 
```

# schematron - 如何在 PHP for XSLT2 中对我的 xml 文件实施 Schematron 验证 (ISO)？

> ID：11534907
> 
> 赞同：2
> 
> 时间：2012-07-18T05:40:47.870
> 
> 标签：schematron

我需要使用 PHP 和 XSLT2（不是 XSLT1）对我的 xml 文件实现 schematron 验证。我需要使用最新版本的 schematron 来执行此操作，即。国际标准化组织。我在哪里可以得到相同的 PHP 代码。我研究并发现到目前为止 PHP 不支持 XSLT2 处理器。网上可用的代码很少，但它们是旧版本，不支持 XSLT2。请帮忙

# node.js - 重新安排 node.js 任务

> ID：11534909
> 
> 赞同：0
> 
> 时间：2012-07-18T05:41:04.230
> 
> 标签：node.js

我现在正在编写一个 node.js 套接字应用程序。

由于它涉及一些 CPU 密集型任务，对于多连接任务来说会相当麻烦。

这就是问题所在：假设任务 A 是 CPU 密集型任务，它由连接 A 调用。假设任务 B 是非常轻量级的任务，它由所有其他连接调用，比如说 > 10k 连接。

当连接 A “几乎同时”调用大量任务 A 时（这在我的设计中是正常的，因为需要处理每个数据包）。任务将按如下方式安排：

*   任务 A
*   任务 A
*   任务 A
*   任务 A
*   ....（可能是任务 A 的 10000 次）
*   任务 B

任务 B 不能在任务 A 任务中间中断。所以很可能，其他用户不能在这个 node.js 服务器上做任何事情。

除了线程/集群，有没有办法重新安排这样执行的任务，使任务 A 的优先级最低？

*   任务 A
*   任务 A
*   任务 B
*   任务 A
*   任务 A
*   任务 A
*   任务 A
*   任务 B
*   任务 A
*   ……

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:11:02.157

有一些可能性：

*   当用户A来的时候，你是否注意到你需要运行A。然后你编写一个由cronjob调用的nodeJS文件并制作所有任务A。
*   您可以使 Task A 异步。像这个例子：[斐波那契异步](https://github.com/Gottox/fibonacci-async)

# javascript - 什么是 jQuery 非侵入式验证？

> ID：11534910
> 
> 赞同：166
> 
> 时间：2012-07-18T05:41:37.493
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, validation

我知道 jQuery Validation 插件是什么。我知道 jQuery Unobtrusive Validation 库是由 Microsoft 制作的，并且包含在 ASP.NET MVC 框架中。但我找不到解释它是什么的单一在线资源。标准 jQuery Validation 库和“不显眼”版本有什么区别？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-18T06:00:21.197

Brad Wilson 有几篇关于非[侵入式验证](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)和非[侵入式 ajax](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-ajax.html)的精彩文章。在“AJAX 和 JavaScript”部分的这个[Pluralsight 视频](http://www.pluralsight.com/courses/aspdotnet-mvc3-intro)
中 也很好地展示了它。

基本上，它只是 Javascript 验证，不会用自己的*验证代码污染**您的*源代码。这是通过使用HTML 中的属性来完成的。*`data-`*

 ** * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-12-03T21:35:46.563

用不显眼的方式：

*   您不必调用 validate() 方法。
*   您使用数据属性（data-val、data-val-required 等）指定要求

**Jquery 验证示例**：

```
<input type="text" name="email" class="required">
<script>
        $(function () {
            $("form").validate();
        });
</script> 
```

**Jquery 验证不显眼的示例**：

```
<input type="text" name="email" data-val="true" 
data-val-required="This field is required.">  

<div class="validation-summary-valid" data-valmsg-summary="true">
    <ul><li style="display:none"></li></ul>
</div> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-11-22T02:01:55.747

为澄清起见，这里有一个更详细的示例，演示了使用 jQuery Validation Unobtrusive 进行表单验证。

两者都将以下 JavaScript 与 jQuery 一起使用：

```
 $("#commentForm").validate({
    submitHandler: function(form) {
      // some other code
      // maybe disabling submit button
      // then:
      alert("This is a valid form!");
//      form.submit();
    }
  }); 
```

两个插件之间的主要区别在于每种方法使用的属性。

**jQuery 验证**

只需使用以下属性：

*   需要时设置为必填
*   设置正确格式的类型（电子邮件等）
*   设置其他属性，如大小（最小长度等）

这是表格...

```
<form id="commentForm">
  <label for="form-name">Name (required, at least 2 characters)</label>
  <input id="form-name" type="text" name="form-name" class="form-control" minlength="2" required>
  <input type="submit" value="Submit">
</form> 
```

**jQuery 验证不显眼**

需要以下数据属性：

*   data-msg-required="这是必需的。"
*   数据规则要求=“真/假”

这是表格...

```
<form id="commentForm">
  <label for="form-x-name">Name (required, at least 2 characters)</label>
  <input id="form-x-name" type="text" name="name" minlength="2" class="form-control" data-msg-required="Name is required." data-rule-required="true">
  <input type="submit" value="Submit">
</form> 
```

根据这些示例中的任何一个，如果已填写所需的表单字段，并且它们满足附加属性条件，则会弹出一条消息，通知所有表单字段均已验证。否则，有问题的表单字段附近将出现指示错误的文本。

参考： - jQuery 验证：[https ://jqueryvalidation.org/documentation/](https://jqueryvalidation.org/documentation/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-04T07:15:00.660

jQuery Validation Unobtrusive Native 是 ASP.Net MVC HTML 帮助扩展的集合。这些利用了 jQuery Validation 对由 HTML 5 数据属性驱动的验证的原生支持。Microsoft 将 jquery.validate.unobtrusive.js 与 MVC 3 一起返回。它提供了一种使用 jQuery Validation 和 HTML 5 数据属性的组合将数据模型验证应用到客户端的方法（这是“不引人注目的”部分）。*

# html - 单击链接时页面向上滚动

> ID：11534914
> 
> 赞同：0
> 
> 时间：2012-07-18T05:41:59.833
> 
> 标签：html

我有一个带有滚动条（默认滚动条）的 html 页面，并且在页面底部有一个小表单。

现在的问题是，当我向下滚动并单击“**选择/列表”菜单**以从表单中选择任何选项时，滚动条会向上移动。为什么会这样？我仍然可以选择选项，因为页面不是很长。为什么滚动条向上？有人可以帮我吗？

我读到有时 # 链接可能是原因，我尝试将其删除，但仍然相同。在我的页面中还有**“onfocus = ...”**，我尝试将其删除并对其进行了测试，但它仍然会上升。

提前致谢。

这是表单的代码。

```
<div class="bottom-form">
<form action="#" method="post">

<div class="main-inp-box">
<div class="inp-box">
  <label>
  <input type="text" name="textfield" id="textfield" class="field1" placeholder="Enter your first name" onblur="if(this.value=='') this.value='Enter your first name';" onfocus="if(this.value=='*Enter your first name:') this.value='';"/>
  </label>
</div>

<div class="inp-box">  
<label>
  <input type="text" name="textfield" id="textfield" class="field1" placeholder="Your email id here" onblur="if(this.value=='') this.value='Your email id here ';" onfocus="if(this.value=='*Your email id here:') this.value='';"/>
  </label>
</div>

<div class="inp-box" style="margin-right:0">
<dl id="sample" class="dropdown">
        <dt><a href="#"><span style="color:#dad9d9; font-family:Arial, Helvetica, sans-serif; font-size:14px; font-weight:bold; font-style:italic; ">Select your role</span></a></dt>
        <dd>

            <ul>
            <div class="head2"><strong>Lorem ipsum</strong></div>
                <li><a href="#">Option1<span class="value">xx</span></a></li>
                <li><a href="#">Option2<span class="value">yy</span></a></li>
    <li><a href="#">Option3<span class="value">yy</span></a></li>
            </ul>

        </dd>
       </dl>
</div>

</div>

<div class="main">
<div class="notify_btn_box"><a href="#" class="red-btn"></a></div>
<div class="arrow"><img src="images/arrow.png" /></div>
</div>

<div style="text-align:center; margin-bottom:100px;"><span class="text-note">*we have no spam policy</span></div>

</form>
</div> 
```

这是更新的代码。删除了#

```
<div class="inp-box" style="margin-right:0">
<dl id="sample" class="dropdown">
        <dt><a href=""><span style="font-family:Arial, Helvetica, sans-serif; font-size:14px; font-weight:normal; font-style:normal; color:#909090; ">Select your role</span></a></dt>
        <dd>

            <ul>
            <div class="head2"><strong>Who are you?</strong></div>

                <li><a href="">Option1<span class="value">xx</span></a></li>
                <li><a href="">Option2<span class="value">yy</span></a></li>
                <li><a href="">Option3<span class="value">yy</span></a></li>
            </ul>
        </dd>
    </dl>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:37:50.843

您正在使用`<dl>`标签，就好像它是一个下拉列表，但它实际上是一个[定义列表](http://www.w3schools.com/tags/tag_dl.asp)。下拉菜单是使用[`<select>`](http://www.w3schools.com/tags/tag_select.asp)标签创建的，一旦你修复了它，你将不再需要这些`<a href="#">`项目（它们会导致滚动）。

# linux - tar.gz 和 tgz 是一回事吗？

> ID：11534918
> 
> 赞同：142
> 
> 时间：2012-07-18T05:42:22.600
> 
> 标签：linux, tar

我用命令创建了 .tgz 文件。`tar czvf file`然后我得到了一个 tgz 文件。我想知道它和tar.gz的区别。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-07-18T05:50:15.743

我认为在旧的软件包 repo 时代，`.tgz`使用它是因为 DOS 软盘上的文件只能具有三个字母扩展名。当这个限制被移除时，通过显示归档类型 ( ) 和拉链 ( )`.tar.gz`来变得更加冗长。`tar``gzip`

它们是相同的。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-18T05:46:20.387

根本没有区别。`.tgz`只是 . 的简写`.tar.gz`。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-11-03T10:12:20.300

一个区别是浏览器`.tar.gz`有时似乎会遇到问题，例如，当下载本地已经存在的此类文件时，可能会发生将其重命名为 的情况`.tar-1.gz`，这将导致某些存档器出现问题，主要是在 Windows 和其他环境中使用文件名结尾的文件类型指定。

结束时不会发生这种情况`.tgz`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-30T14:39:42.203

您可以使用以下命令解压缩 tar.gz 或 .tgz：

```
tar -xzvf 
```

并创建：

```
tar -czvf 
```

完全一样

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-19T17:45:58.817

**简短的回答**：没有区别。

**长答案**：

*   SunOS USTAR tar 格式：tar 不支持选项的内联压缩（*您可以安装 gtar 以获得 GNU 版本*）。
*   Linux POSIX tar (GNU) 格式：tar 也可以存档和压缩。

一般来说：扩展名将根据您创建结果文件的方式而有所不同：

*# 归档然后压缩：*来自 SunOS 或 Linux：

```
$ tar cf output.tar /path/to/archvieme/
$ gzip output.tar
# creates "output.tar.gz" file. 
```

*# 归档和压缩：*人们通常节省打字时间并使用 .tgz 而不是 .tar.gz：

```
# works only with GNU tar:
$ tar czf output.tgz /path/to/archiveme/

# works on SunOS and Linux:
$ tar cf - /path/to/archiveme/ |gzip > output.tgz 
```

# matlab - 如何计算函数中使用的矩阵乘法的数量？

> ID：11534919
> 
> 赞同：2
> 
> 时间：2012-07-18T05:42:29.470
> 
> 标签：matlab

我正在编写有关高斯消除的代码，其中一个要求是计算函数中使用的矩阵加法的数量和矩阵乘法的数量。如果我不能使用“profile”命令，那么我的代码中应该有什么作为计数器？

Matlab 是否有一些内置函数来计算函数中使用的矩阵加法/乘法的数量？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:29:02.373

没有了，不会再有了。它曾经有一个*flops*函数来计算代码中的浮点数操作，但它在多年前就被删除了。*对于flops*已过时的原因，您可以阅读[此](http://www.stat.uchicago.edu/~lekheng/courses/302/flops/vmdd.html)内容。

你确定你需要Matlab来做到这一点吗？如果您的代码不是那么复杂，您可以通过手动计算操作数来给出一个好的上限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:59:12.430

为您需要计数的操作创建一个包装函数，并使它们保持计数。预计会有很多开销；）添加一些逻辑来重置和/或显示结果计数。

例如乘法：

```
function c = mytimes(a,b)
    persistent count;

    if nargin==1
        switch a
        case 'reset'
            c = count;
            count = 0;
        case 'show'
            c = count;
        otherwise
            error('wrong input');
        end
    end

    c = a*b;

    if isempty(count)
        count = 1;
    else
        count = count+1;
    end
end 
```

# ruby-on-rails - 如何使用活动管理员和载波上传文件而不在模型上安装上传器？

> ID：11534927
> 
> 赞同：1
> 
> 时间：2012-07-18T05:43:04.517
> 
> 标签：ruby-on-rails, ruby, file-upload, rubygems

在我的应用程序中，每个产品都是可下载的。因此，当管理员创建每个产品时，他必须指定要上传的文件。现在我打算将这些文件保存在网站目录之外，并以产品 ID 作为文件名。

我正在使用活动管理员和carrierwave。我不需要在我的产品表中为文件路径设置一列，因为给定产品 ID，我知道如何获取该文件。因此，在我的`Product`模型中，我没有`mount_uploader`声明。

在活动管理员的产品添加页面中，我可以显示文件上传。但由于它没有与`Product`模型链接，我的上传者永远不会被调用。我想知道解决这个问题的最佳方法是什么？我只需要上传文件而不更新模型中的任何内容。

任何帮助都会很棒！

# php - 我如何清理这个 if/else 语句？（重构）

> ID：11534928
> 
> 赞同：5
> 
> 时间：2012-07-18T05:43:20.757
> 
> 标签：php, if-statement, refactoring

我知道必须有更好的方法来做到这一点，但是每当我搜索“&&”时，我都没有得到足够好的结果......

```
<?php
if (empty($row[ContactName]) && empty($row[ContactEmail]) && empty($row[ContactPhone]) && empty($row[Website])){
echo "Not Provided";
}
else{
...do stuff...
}
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T05:56:08.613

原始代码有什么问题？

```
<?php
if (empty($row[ContactName]) 
    && empty($row[ContactEmail]) 
    && empty($row[ContactPhone]) 
    && empty($row[Website]))
{
    echo "Not Provided";
} 
else{
 ...do stuff...
}
?> 
```

对我来说看起来像很好的代码......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T05:47:15.367

```
<?php
$i=1;
$ar=array('ContactName','ContactEmail','ContactPhone','Website')

foreach($ar as $a)
  if (empty($row[$a]))
    {
     $i=0;
     break;                      //to make code fast
    }
  if($i)         //do stuff
  else echo 'not provided';
?> 
```

或者如果你真的想让你的代码特别小，那么在数据库中更改你的列名

```
From               To
ContactName        Col1
ContactEmail       Col2
ContactPhone       Col3
Website            Col4 
```

然后做

```
 <?php
  $i=1;
  for($a=1;$a<5;$a++)
    if (empty($row['Col'.$a]))
    {
      $i=0;
      break;
    }
  if($i)//do stuff
  else echo 'Not Provided';
    ?> 
```

但是，重命名列并不好，因为它会使您的数据库不太容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T06:20:46.773

如果紧凑性比可读性更重要，你可以把它写得这么短:)

```
$required = array('ContactName', 'ContactEmail', 'ContactPhone', 'Website');

$ra = array_filter(array_intersect_key($row,array_flip($required)));
if(empty($ra)){
    echo "Not Provided";
}
else{
    //....
} 
```

您不能将 array_filter 放在 empty() 中，否则会收到“致命错误：无法在写入上下文中使用函数返回值”

1) 数组翻转正在将您的 $required 值转换为键2) array_intersect_key 丢弃
在 $required 中找不到的任何 $row 键3) array_filter 丢弃任何空值

给你一个零长度的数组，它是空的。无需担心数组长度或循环

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T06:46:11.827

由于 php 函数有很多不一致的地方，使用库来使其更加一致总是一个好主意。

将此函数放入该库中：

```
function empty()
{
    foreach(func_get_args() as $arg) if (empty($arg)) return false;
    return true;
} 
```

用法：

```
if (empty($row[ContactName], $row[ContactEmail], $row[ContactPhone], $row[Website])) {
      echo "Not Provided";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T05:49:32.037

```
<?php
$flag = 1;
if (empty($row[ContactName])){
$flag = 0;
}
if (empty($row[ContactEmail])){
$flag = 0;
}
if (empty($row[ContactPhone])){
$flag = 0;
}
if (empty($row[Website])){
$flag = 0;
}

if($flag == 0){
echo "Not Provided";

}else{
//do stuff
}    

?> 
```

或者

```
$flag = 1;
$i=0;
$mustarray = array('ContactName','ContactName','ContactName','ContactName'); //or any number of fields that you want as mandatory
foreach($yourresult as $row){
   if(empty($row[$mustarray [$i]])){
    $flag = 0;
} 
$i++;
}
    if($flag == 0){
    echo "Not Provided";

    }else{
    //do stuff
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T07:10:00.677

不要为了让代码看起来更漂亮而制作数组和其他东西。正如汤米指出的那样

```
<?php
if (empty($row[ContactName]) 
    && empty($row[ContactEmail]) 
    && empty($row[ContactPhone]) 
    && empty($row[Website]))
{
    echo "Not Provided";
} 
else{
 ...do stuff...
}
?> 
```

这段代码很好，只需要像他指出的那样正确格式化。制作数组然后启动循环会降低性能

```
<?php
    $i=1;
    for($a=1;$a<5;$a++)
    if (empty($row['Col'.$a]))
    {
    $i=0;
    break;
    }
    if($i)//do stuff
    ?> 
```

这可能看起来很小、很好并且“专业”，但是有更多的操作可以提供与简单的 if 指令相同的结果。不是说不能更快，我对php不是很了解，只记得代码执行速度。

# regex - 注释正则表达式中的不匹配

> ID：11534931
> 
> 赞同：1
> 
> 时间：2012-07-18T05:43:31.793
> 
> 标签：regex

我需要用 X 字符“注释”正则表达式中的每个不匹配项，例如，如果我有一个文本文件，例如：

```
Line1Name: this is a (string).
Line2Name: (a string)
Line3Name this is a line without parenthesis
Line4Name: (a string 2) 
```

现在下面的正则表达式将匹配 a 之前的所有内容：

```
^[^:]+(?=:) 
```

所以结果将是

```
Line1Name:
Line2Name:
Line4Name: 
```

但是，我需要在第 3 行注释不匹配，并具有以下输出：

```
Line1Name: 
Line2Name:
X
Line4Name: 
```

这可以用正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:08:08.873

如果您了解什么是正则表达式，您会意识到仅使用正则表达式是不可能进行逻辑运算的。引用[维基百科](http://en.wikipedia.org/wiki/Regular_expression)：

> 在计算中，正则表达式提供了一种简洁灵活的方法来“匹配”（**指定和识别**）文本字符串，例如特定字符、单词或字符模式。

强调我的——简单地说，正则表达式是一种寻找字符串的好方法；它要么匹配（匹配），要么不匹配。

为了实现您所追求的，您需要某种逻辑开关，该开关对您的正则表达式搜索的匹配/不匹配结果进行操作并触发一个操作。您尚未指定在什么环境中使用正则表达式，因此提供解决方案有点毫无意义，但作为示例，这将做您在 pure 中尝试做的事情`bash`：

```
# assuming your string is in $str
result="$([[ $str =~ ^[^:]+: ]] && echo "${str%:*}" || echo "X")" 
```

这在支持您的正则表达式模式（Ruby）的语言中做同样的事情：

```
# assuming your string is in str
result = str.match(/^[^:]+(?=:)/) || "X" 
```

*作为旁注，您的示例代码与输出不匹配：您正在使用冒号的前瞻，它在匹配中排除它，但您的输出包含它。在我的示例中，我选择坚持使用您的正则表达式而不是输出模式，从而从结果中排除冒号。*

# c# - 从大小为 n 的 r 个元素生成一个幂多重集

> ID：11534934
> 
> 赞同：1
> 
> 时间：2012-07-18T05:43:40.237
> 
> 标签：c#, c++, algorithm, math, combinatorics

我希望从大小为 n 的 r 个元素生成一个幂多集。

说功能是

```
public List<List<string>> PowerMultiSet (List<string> elems, int n ) 
```

示例输入：{"d1","d2",d3"}，n=2 输出：{"d1","d1"}, {"d1","d2"},{"d1","d3"} ,{"d2","d2"}, {"d2","d3"},{"d3","d3"} 说elems的大小是r，生成的元素个数是C(n+r- 1,r-1)。

我想知道如何在没有冗余操作的情况下实现这一点（即数字操作理想情况下应该是 = C(r+n-1,n-1)）

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:00:09.053

我认为以下代码可以解决问题：

```
void MultiSet(List<string> elems, int last, int n, ref List<string> set, ref List<List<string>> result)
{
    if (set.Count < n)
    {
        for (int index = last; index < elems.Count; index++)
        {
            set.Add(elems[index]);
            MultiSet(elems, index, n, ref set, ref result);
            set.RemoveAt(set.Count - 1);
        }
    }
    else
    {
        result.Add(new List<string>(set));
    }
}

List<List<string>> PowerMultiSet(List<string> elems, int n)
{
    var result = new List<List<string>>();
    var set = new List<string>();
    MultiSet(elems, 0, n, ref set, ref result);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:43:42.693

这可以通过递归方式实现。用空调用下面的函数`start`以开始递归。

```
public List<List<string>> PowerMultiSet (List<string> start, List<string> elems, int n )
{
    List<List<string>> output = new List<List<string>>();
    if (n > 0)
    {
        for (int i = 0; i < elems.Count; i++)
        {
            start.Add(elems[i]);
            List<List<string>> current = PowerMultiSet(start, elems.GetRange(i, elems.Count - i), n - 1);
            start.RemoveAt(start.Count - 1);
            output.AddRange(current);
        }
    }
    else
    {
        output.Add(new List<string>(start));
    }
    return output;
} 
```

示例调用：

```
List<string> elems = new List<string> { "d1", "d2", "d3"};
List<string> start = new List<string>();
List<List<string>> x = PowerMultiSet(start, elems, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:33:56.963

这本质上是排列问题，除了每个排列的长度已经确定。为简化起见，假设我们正在打印集合并定义以下递归函数：

```
public void PrintPowerMultiSets(List<string> elems, int index, List<string> ps, int num_left) 
```

其中 index 是我们要添加到 powerset 的元素的以 elems 为单位的索引，ps 是该分支中当前构建的 powerset，num_left 是我们仍然可以添加到 ps 的元素数。在对该函数的每次递归调用中，将 elems[index] 添加到 ps 并为 elems 中具有索引 <= 传入索引的每个元素调用 PrintPowerMultiSets 和 num_left-1。一旦您没有更多元素要添加到该 powerset 并打印它（或将其添加到某个列表），就停止递归。

您只需为列表中的每个元素调用一次此函数即可。如果您完成它，我相信您会发现这与您手动枚举原始问题中的输出的方式相同。

# objective-c - NSMatrix 委托

> ID：11534939
> 
> 赞同：0
> 
> 时间：2012-07-18T05:44:00.427
> 
> 标签：objective-c, cocoa, nsmatrix

我的代码中有一个 NSMatrix，特别是单选按钮。我想创建一个委托以在单选按钮选择更改时发布消息。

我必须使用哪个代表？我尝试了 textDidChange 方法但没有成功。显然，我在应用程序的初始化阶段使用了 [radioButtons setDelegate:self]。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:16:45.197

`NSMatrix`是 的子类，因此您可以使用与任何其他范例（例如按钮）`NSControl`相同的目标-动作范例。`NSControl`

您可以在`NSMatrix`使用界面构建器（控制从矩阵拖动到类）或在代码中设置目标和操作`setTarget:`和`setAction:`。然后，当矩阵中的一个单元格（这里是单选按钮）被选中时，就会调用 action 方法，您可以通过该`selectedCell`方法查询选择了哪个单选按钮。

请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Button/Articles/QueryMatrixButtons.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Button/Articles/QueryMatrixButtons.html)

# c# - 如何在脸书墙上上传照片？

> ID：11534941
> 
> 赞同：0
> 
> 时间：2012-07-18T05:44:05.647
> 
> 标签：c#, asp.net-mvc-3

嗨朋友们，我正在尝试以这种方式在 Facebook 墙上发布照片

这是我的控制代码：

公共类测试{

```
 public FacebookMediaObject mediaObject { get; set; }
    }

public ActionResult Profile(FacebookOAuthResult facebookoAuthResult)
{
    DisplayAppropriatemessage(facebookoAuthResult);

    // redirect back to the index action to show the form once again
    return RedirectToAction("Profile");
}

private void DisplayAppropriatemessage(FacebookOAuthResult facebookoAuthResult)
{
    if (facebookoAuthResult != null)
    {
        if (facebookoAuthResult.IsSuccess)
        {
            var mediaObject = new FacebookMediaObject
            {
                ContentType = "image/jpeg",
                FileName = Path.GetFileName(path)
            }
            .SetValue(System.IO.File.ReadAllBytes(path));

            var fb = new FacebookClient(facebookoAuthResult.AccessToken);

            fb.PostAsync("https://graph.facebook.com/me/photos", new Dictionary<string, object> { { "source", mediaObject } });
        }
    }
    throw new NotImplementedException();
} 
```

这里是我的 profile.cshtml 代码：

```
@using (Html.BeginForm("Profile", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="file" id="file" /><br />
    <input type="submit" value="Upload" />
} 
```

当我运行此代码时，当我单击发布按钮时，它会出现以下错误

“/”应用程序中的服务器错误。没有为此对象定义无参数构造函数。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.MissingMethodException：没有为此对象定义无参数构造函数。

源错误：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

我尝试了很多方法但每次我都失败了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:08:13.577

在您尝试访问构造函数并且不传入任何参数的地方，您向我们展示的所有构造函数都需要某个参数，尽管我在您的代码中看不到您执行此操作的任何地方，因此问题可能出在另一部分的应用程序，

请调试并逐步检查，找到它中断的确切行，并检查您是否明确地将参数传递给构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:59:15.393

一种猜测是您已经为您的控制器定义了一个带有参数的构造函数。

每当一个类没有构造函数时，默认情况下存在一个隐藏的无参数（没有参数）构造函数。

每当您创建一个带参数的构造函数时，您就不再获得该自动默认构造函数。MVC 会期望你的控制器有一个无参数的构造函数。

# php - PHP 使用 Facebook API 随机结束或中断

> ID：11534942
> 
> 赞同：0
> 
> 时间：2012-07-18T05:44:13.157
> 
> 标签：php, javascript, html, facebook, facebook-opengraph

我正在为 PHP 使用 Facebook openGraph API。这是我的代码：

```
<?php
session_start();

if (!isset($_SESSION['username'])) {

header("Location: index.php");
break;

}

$fbconfig['appid' ]     = "APPID";
$fbconfig['secret']     = "SECRET";
$fbconfig['baseurl']    = "http://blah.com/"; 

$user = null; 
try{
    include_once "facebook.php";
}
catch(Exception $o){
    error_log($o);
}
    // Create our Application instance.
try {
$facebook = new Facebook(array(
  'appId'  => $fbconfig['appid'],
  'secret' => $fbconfig['secret'],
  'cookie' => true,
));
} catch (Exception $e) { echo "ERROR: ".$e; } 

$user = $facebook->getUser();

$loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => 'email,publish_stream,read_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown',
            'redirect_uri'  => $fbconfig['baseurl'].'blah.php'
        )
);

$logoutUrl = $facebook->getLogoutUrl(array( 'next' => ($fbconfig['baseurl'].'blah.php') ));

//if user is logged in and session is valid.
if ($user ){

    header("Location;$loginUrl");
    break;

}

?> 
```

现在，这适用于其他页面（Facebook 部分），但仅适用于此页面（与其他页面相同的目录） 浏览器认为 PHP 以“'appId' =>”结尾，然后将其解释为 html。所以我在浏览器中得到了这个：

[http://cl.ly/image/1y2a2F0e3I35](http://cl.ly/image/1y2a2F0e3I35)

很抱歉这张奇怪的裁剪图片，但我不能透露这家公司的名称或意图。

真实站点上的PHP后面有HTML，如果需要我可以给这个+ js。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T06:27:01.967

```
 your header is wrong.......try following......
        header("Location:$loginUrl");
        and also if you don't get facebook user id then you have to redirect to login page but you did reverse.may do following
    //if user is not loggin
        if (empty($user)){
            header("Location:$loginUrl");
        }else{
           try {
                $userInfo = $facebook->api("/$user");
            } catch (FacebookApiException $e) {
                $userInfo=null;
            }
        } 
```

# java - 如何计算给定第一个点和距离的第二个点的纬度/经度？

> ID：11534947
> 
> 赞同：2
> 
> 时间：2012-07-18T05:44:37.070
> 
> 标签：java, android, google-maps

我在计算提供的第二点的纬度/经度以及计算第一点和距离的纬度/经度时仍然存在问题。

我在 Javascript 中找到了一种解决方案，我尝试转换为 Java。但结果不准确，看来我做错了什么。

[如何计算距离另一点一定距离的点的纬度？](https://stackoverflow.com/questions/2637023/how-to-calculate-the-latlng-of-a-point-a-certain-distance-away-from-another)

```
public class Misc {

        double EARTH_RADIUS_METERS= 6378.1 *1024;

        private double toRad(double value) {
           return  value*  (Math.PI/ 180);
        }

        private double toDeg (double value) {
           return value*  (180 / Math.PI);
        }

        /*-------------------------------------------------------------------------
         * Given a starting lat/lon point on earth, distance (in meters)
         * and bearing, calculates destination coordinates lat2/lon2.
         *
         * all params in radians
         *-------------------------------------------------------------------------*/
         GPoint destCoordsInRadians(double lat1, double lon1, 
                                 double distanceMeters, double bearing
                                 /*,double* lat2, double* lon2*/)
        {
            //-------------------------------------------------------------------------
            // Algorithm from http://www.geomidpoint.com/destination/calculation.html
            // Algorithm also at http://www.movable-type.co.uk/scripts/latlong.html
            //
            // Spherical Earth Model
            //   1\. Let radiusEarth = 6372.7976 km or radiusEarth=3959.8728 miles
            //   2\. Convert distance to the distance in radians.
            //      dist = dist/radiusEarth
            //   3\. Calculate the destination coordinates.
            //      lat2 = asin(sin(lat1)*cos(dist) + cos(lat1)*sin(dist)*cos(brg))
            //      lon2 = lon1 + atan2(sin(brg)*sin(dist)*cos(lat1), cos(dist)-sin(lat1)*sin(lat2))
            //-------------------------------------------------------------------------
            double distRadians = distanceMeters / EARTH_RADIUS_METERS;

            double lat2 = Math.asin( Math.sin(lat1) * Math.cos(distRadians) + Math.cos(lat1) * Math.sin(distRadians) * Math.cos(bearing));

            double  lon2 = lon1 + Math.atan2( Math.sin(bearing) * Math.sin(distRadians) * Math.cos(lat1), 
                    Math.cos(distRadians) - Math.sin(lat1) * Math.sin(lat2) );  

            return new  GPoint( lat2  , lon2 );

        }

        /*-------------------------------------------------------------------------
         * Given a starting lat/lon point on earth, distance (in meters)
         * and bearing, calculates destination coordinates lat2/lon2.
         *
         * all params in degrees
         *-------------------------------------------------------------------------*/
         GPoint destCoordsInDegrees(double lat1, double lon1, 
                                 double distanceMeters, double bearing/*,
                                 double* lat2, double* lon2*/)
        {
            GPoint gPoint2=destCoordsInRadians(/*Deg_to_*/toRad(lat1), /*Deg_to_*/toRad(lon1),
                                distanceMeters, /*Deg_to_*/toRad(bearing)/*,
                                lat2, lon2*/);

            gPoint2.lat = /*Rad_to_*/toDeg( gPoint2.lat );
            gPoint2.lon = normalize180( /*Rad_to_*/toDeg( gPoint2.lon )) ;

            return gPoint2;
        }

        /*-------------------------------------------------------------------------
         * Given two lat/lon points on earth, calculates the heading
         * from lat1/lon1 to lat2/lon2\.  
         * 
         * lat/lon params in radians
         * result in radians
         *-------------------------------------------------------------------------*/
        double headingInRadians(double lat1, double lon1, double lat2, double lon2)
        {
            //-------------------------------------------------------------------------
            // Algorithm found at http://www.movable-type.co.uk/scripts/latlong.html
            //
            // Spherical Law of Cosines
            //
            // Formula: ? = atan2(  sin(?lon) * cos(lat2),
            //                      cos(lat1) * sin(lat2) ? sin(lat1) * cos(lat2) * cos(?lon) )
            // JavaScript:  
            //  
            //  var y = Math.sin(dLon) * Math.cos(lat2);
            //  var x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);
            //  var brng = Math.atan2(y, x).toDeg();
            //-------------------------------------------------------------------------
            double dLon = lon2 - lon1;
            double y = Math.sin(dLon) * Math.cos(lat2);
            double x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);

            return Math.atan2(y, x);
        }

        /*-------------------------------------------------------------------------
         * Given two lat/lon points on earth, calculates the heading
         * from lat1/lon1 to lat2/lon2\.  
         * 
         * lat/lon params in degrees
         * result in degrees
         *-------------------------------------------------------------------------*/
        double headingInDegrees(double lat1, double lon1, double lat2, double lon2)
        {
            return /*Rad_to_*/toDeg( headingInRadians(/*Deg_to_*/toRad(lat1), 
                    /*Deg_to_*/toRad(lon1), 
                    /*Deg_to_*/toRad(lat2),
                    /*Deg_to_*/toRad(lon2)) );
        }

        // Normalize a heading in degrees to be within -179.999999° to 180.00000°
        double normalize180(double heading)
        {
            while (true) {
                if (heading <= -180) {
                    heading += 360;
                } else if (heading > 180) {
                    heading -= 360;
                } else {
                    return heading;
                }
            }
        }

        // Normalize a heading in degrees to be within -179.999999° to 180.00000°
        float normalize180f(float heading)
        {
            while (true) {
                if (heading <= -180) {
                    heading += 360;
                } else if (heading > 180) {
                    heading -= 360;
                } else {
                    return heading;
                }
            }
        }

        // Normalize a heading in degrees to be within 0° to 359.999999°
        double normalize360(double heading)
        {
            while (true) {
                if (heading < 0) {
                    heading += 360;
                } else if (heading >= 360) {
                    heading -= 360;
                } else {
                    return heading;
                }
            }
        }

        // Normalize a heading in degrees to be within 0° to 359.999999°
        float normalize360f(float heading)
        {
            while (true) {
                if (heading < 0) {
                    heading += 360;
                } else if (heading >= 360) {
                    heading -= 360;
                } else {
                    return heading;
                }
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:07:34.880

您还需要一个参数，即“轴承”。然后：

```
var d = radius/6378800; // 6378800 is Earth radius in meters
var lat1 = (PI/180)* centerLat;
var lng1 = (PI/180)* centerLng;

// Go around a circle from 0 to 360 degrees, every 10 degrees or set a to your desired bearing, in degrees.
for (var a = 0 ; a < 361 ; a+=10 ) {
    var tc = (PI/180)*a;
    var y = asin(sin(lat1)*cos(d)+cos(lat1)*sin(d)*cos(tc));
    var dlng = atan2(sin(tc)*sin(d)*cos(lat1),cos(d)-sin(lat1)*sin(y));
    var x = ((lng1-dlng+PI) % (2*PI)) - PI ;
    var lat = y*(180/PI);
    var lon = x*(180/PI);

    // Convert the lat and lon to pixel, if needed. (x,y) 
} 
```

最初来自另一个 SO 线程： [如何将 1 米更改为像素距离？](https://stackoverflow.com/questions/3385117/how-to-change-1-meter-to-pixel-distance/3386205#3386205)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-13T08:58:00.377

[这](https://stackoverflow.com/a/31078546/6674369)是这个问题的好答案：

你可以使用[android-maps-utils](https://github.com/googlemaps/android-maps-utils)的方法：

```
SphericalUtil.computeOffset(latLng, dist, brng) 
```

如果你想自己做：

```
private LatLng getDestinationPoint(LatLng source, double brng, double dist) {
        dist = dist / 6371;
        brng = Math.toRadians(brng);

        double lat1 = Math.toRadians(source.latitude), lon1 = Math.toRadians(source.longitude);
        double lat2 = Math.asin(Math.sin(lat1) * Math.cos(dist) +
                                Math.cos(lat1) * Math.sin(dist) * Math.cos(brng));
        double lon2 = lon1 + Math.atan2(Math.sin(brng) * Math.sin(dist) *
                                        Math.cos(lat1),
                                        Math.cos(dist) - Math.sin(lat1) *
                                        Math.sin(lat2));
        if (Double.isNaN(lat2) || Double.isNaN(lon2)) {
            return null;
        }
        return new LatLng(Math.toDegrees(lat2), Math.toDegrees(lon2));
    } 
```

# sql - Linq To Sql 或 SQL 中的困难查询

> ID：11534948
> 
> 赞同：4
> 
> 时间：2012-07-18T05:44:48.523
> 
> 标签：sql, linq-to-sql

我已经为此工作了 2 天，但我无法弄清楚。我希望比我聪明的人会尝试一下。

假设我有以下表格：

```
Rating:
  Id | Name
  1  | A
  2  | B
  3  | C
  4  | D
  5  | E

Inspection:
  Id | Date (mm/dd/yyyy)
  1  | 01/04/2012
  2  | 04/04/2012
  3  | 28/03/2012
  4  | 04/04/2012

Observation:
  Id | InspectionId | RatingId
  1  | 2            | 3
  2  | 1            | 2
  3  | 4            | 3
  4  | 2            | 1
  5  | 3            | 3
  6  | 1            | 2 
```

我希望查询返回：

```
 RatingName | Date(mm/dd/yyyy) | ObservationCount
 A          | 01/04/2012       | 0
 B          | 01/04/2012       | 1
 C          | 01/04/2012       | 1
 D          | 01/04/2012       | 0
 E          | 01/04/2012       | 0
 A          | 04/04/2012       | 1
 B          | 04/04/2012       | 0
 C          | 04/04/2012       | 2
 D          | 04/04/2012       | 0
 E          | 04/04/2012       | 0
 A          | 28/03/2012       | 0
 B          | 28/03/2012       | 0
 C          | 28/03/2012       | 1
 D          | 28/03/2012       | 0
 E          | 28/03/2012       | 0 
```

所以我需要每个日期每个评级的观察次数。是的，我需要有返回 0 Observations 的记录，因为我在堆叠图表中使用这些数据，没有它们会引发错误。我已经设法获得了上表，但没有使用以下 Linq To Sql 查询返回 0 Observations 的记录，但从这一点开始我就卡住了。

```
MyDataContext DB = new MyDataContext();

var data = 
    (from r in DB.Ratings
    join o in DB.Observations on r.Id equals o.RatingId into ro

    from observation in ro.DefaultIfEmpty()
    join i in DB.Inspections on observation.InspectionId equals i.Id into roi

    from q in roi.DefaultIfEmpty()
    group q by new { Name = r.Name, Date = q.Date } into grouped
    select
    new
    {
        RatingName = grouped.Key.Name,
        Date = grouped.Key.Date,
        ObservationCount = grouped.Count(x => x != null)
    }).OrderBy(x => x.Date); 
```

我将不胜感激 Linq To Sql 或普通旧 SQL 的答案，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:55:27.997

您应该`CROSS JOIN`在两个参考表上尝试 a，然后`OUTER JOIN`返回您的“数据”表 - 然后检查是否`Observation`为空……然后分组和求和！

```
SELECT 
    [Name],
    [Date],
    SUM([Exists])
FROM
(
SELECT 
    name, 
    [Date],
    CASE WHEN o.Id IS NULL THEN 0
        ELSE 1
    END as [Exists]
FROM 
    Rating r CROSS JOIN
    Inspection i
    LEFT OUTER JOIN Observation o 
        ON o.RatingId = r.Id AND o.InspectionId = i.Id
) as [source]
GROUP BY [Name], [Date]
ORDER BY
    [Date],
    name 
```

转换为 LINQ 将是一个类似的两步过程 - 在分组和求和之前获取内部结果集（检查观察是否为 NULL）。

# url - Shiro 中的多个登录 url

> ID：11534949
> 
> 赞同：1
> 
> 时间：2012-07-18T05:44:51.957
> 
> 标签：url, shiro

我正在尝试配置 apache shiro 以基于 apache click 对我们的应用程序进行身份验证。我们在同一个应用程序中为两种类型的用户提供了两个不同的登录 url

1) 对于地区用户：districtlogin.jsp 2) 对于州用户：statelogin.jsp

我如何在 shiro.ini 文件中指定这两个 url

现在一次只有一个 url 有效。

我使用了以下方法

shiro.loginUrl = /statelogin.jsp shiro.loginUrl = /districtlogin.jsp

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T16:28:35.113

在我的情况下，我需要 2 个不同的登录 URL，因为它将从 2 个目标、Web 客户端和一个移动客户端（通过 RESTful）访问。
所以我不能在控制器上为它们应用相同的登录操作（因为输入和输出绝对不同），而是重用来自 2 个操作的服务方法。
我们有什么办法让 Shiro 知道有 2 个可用的有效登录 URL？

# javascript - 带有计数器的社交小部件（Facebook Like、Twitter Tweet、Google +1）浮动和宽度

> ID：11534950
> 
> 赞同：1
> 
> 时间：2012-07-18T05:44:54.317
> 
> 标签：javascript, twitter, facebook-like, google-plus

在下图中，我为每个小部件使用了一个容器，设置宽度为 80 像素，浮动右边距和右边距 10 像素。但是，我希望容器宽度与小部件的实际宽度（按钮 + 计数器）相同。

![在此处输入图像描述](../Images/fbed4d472ba5208d085b70402aa1b510.png)

据我所知，它不能使用 CSS 来完成，也不太可能使用 JavaScript（因为同源策略）。不过，有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:19:33.563

即使同源不是问题，如果您设法从小部件实现中的任何元素读取实际宽度，您也不能依赖它，因为小部件结构可能随时更改，从而破坏您的代码。

所以我想到目前为止的答案是：不，没有解决方案。

在上一个时期，我总是在左对齐的列中显示小部件，因为它们水平对齐真的很难看。

但是我刚刚找到了一个看起来非常有前途的解决方法的 jQuery 插件：http: [//sharrre.com/](http://sharrre.com/)。

# c# - 为 MongoDB 文档中的集合中的子/子文档自动生成值

> ID：11534952
> 
> 赞同：0
> 
> 时间：2012-07-18T05:44:58.257
> 
> 标签：c#, mongodb

我的 MongoDB 集合有文档，每个文档都可以包含一组子文档。每个子文档都需要一种方法来唯一标识它，以便我可以在以后替换它或更新它。

如何告诉 MongoDB 为集合中的每个子文档生成唯一值？

我正在使用 C# MongoDB 驱动程序。

```
{
    _id: 'gd37dg67dg63782gd78',
    name: 'foo'
    docs: [
        {
            idvalue: 'autogenerated',
            y: 10
        },
        {
            idvalue: 'autogenerated',
            y: 10
        },
        {
            idvalue: 'autogenerated',
            y: 10
        },
    ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:58:04.580

MongoDB 本身不会为您执行此操作，但您可以执行许多文档映射器为子文档所做的事情，并`ObjectId`在保存它们之前为其分配值。这将为 C# 驱动程序中的每个字段提供一个新的且足够独特的值：

```
ObjectId.GenerateNewId() 
```

如果您使用的是文档映射器，请查看它对“嵌套文档”的支持程度。很有可能它会毫不费力地为您做到这一点。

# java - Eclipse java创建未知的类文件

> ID：11534956
> 
> 赞同：0
> 
> 时间：2012-07-18T05:45:08.960
> 
> 标签：java, eclipse, .class-file

嗨，我正在做一个 java 项目。我正在使用 Eclipse 作为 IDE。我在 com.ibm.wala.util.io 包中有一个 FileProvider.java 文件。对于这个文件，Eclipse 正在制作两个类文件 FileProvider.class 和 FileProvider$EclipseUtil.class。有人能告诉我为什么 Eclipse 正在创建第二个类文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T05:46:52.637

您的 FileProvider 类中有一个名为 EclipseUtil 的内部类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T05:46:57.140

`EclipseUtil`因为您定义了一个名为in的内部类`FileProvider`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T05:49:23.643

由于您的 FileProvider.java 已将 EclipseUtil 声明为内部类。

# javascript - IE 限制 *.currentwebsite.com 以外的 JavaScript 第三方域访问

> ID：11534957
> 
> 赞同：0
> 
> 时间：2012-07-18T05:45:18.613
> 
> 标签：javascript, internet-explorer, internet-explorer-9

完全可以禁用 JS。

例如，可以通过将某些域添加到受限区域来禁用 JS。

我想知道是否可以阻止/限制除 *.currentwebsite.com 以外的第三方域访问以在 IE 中启用 JS。

这在广告拦截和安全方面可能会有所帮助。

还是我应该自己写一个附加组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:26:41.387

我不知道这是否可能，但这绝对是一个坏主意，因为 CDN 现在非常流行，并且大多数页面都将这些用于 CSS 和 JS 文件以及图像文件。

要阻止广告，您还可以使用主机文件（在 system32\drivers\etc 文件夹下），如果您有 URL 列表（我很确定您可以在互联网上找到一个列表），只需将它们重定向一些假地址，如 localhost 或服务器响应什么。

# xml - 在grails中解析xml字符串响应

> ID：11534958
> 
> 赞同：0
> 
> 时间：2012-07-18T05:45:20.740
> 
> 标签：xml, groovy

响应 xml 文本是：

```
"<?xml version="1.0" encoding="UTF-8"?><MMP><MERCHANT><RESPONSE><url>http://XXXXXXx/asdasd/asdsd/as</url><param name="ttype">QEQW</param><param name="tempTxnId">155411</param><param name="token">v22mM1NmwpHCKLp%2FZJC%2B7PUKASXr2aS01JPi2ZXDqT0%3D</param><param name="txnStage">1</param></RESPONSE></MERCHANT></MMP>" 
```

我想在 grails/groovy 中解析这个 xml 文本。如何遍历所有元素以获取特定元素的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:58:48.353

您可以使用[XMLSlurper](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)来读取 xml。

这是您发布的 xml 的一些示例代码：

```
def response = new XmlSlurper().parseText(xml)

// accessing a specific element
println response.MERCHANT.RESPONSE.url
// iterating through a collection
response.MERCHANT.RESPONSE.param.each{println it}
// searching for specific elements
println response.MERCHANT.RESPONSE.param.find{it.@name == 'ttype'} 
```

# entity-framework - 实体框架，计算实体字段

> ID：11534961
> 
> 赞同：1
> 
> 时间：2012-07-18T05:45:36.643
> 
> 标签：entity-framework, entity-framework-4

是否可以在 EF 实体中包含计算字段？例如，假设我有一家商店销售产品，并且产品被分组。

当显示类别列表以供商店管理员编辑时，我希望列出每个类别中的产品数量作为列表的一部分。

在 NHibernate 中，我会使用一个公式，例如

```
<property name="Products" formula="dbo.Category_NumProducts(id)" /> 
```

我不知道 EF 是否有类似的可能。我知道我可以制作一个类别视图并将其映射到第二个实体，但这似乎是错误的，因为它几乎是完全重复的。

编辑：如果这在 EF 中是不可能的，那么实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:21:16.050

不幸的是，如果您的`Category`表没有此作为计算列，您将无法在不创建第二个实体的情况下对其进行映射 - 它会导致数据库视图、在 EDMX 中定义查询或在 EDMX 中定义查询视图（但查询视图可能不起作用，因为您需要计算聚合函数）。

编辑：

恕我直言，最简单的解决方案（也是最好的）只是创建一个 ViewModel（一些非映射类）并在 Linq 查询中使用投影：

```
var query = from c in context.Categories
            where ...
            select new CategoryView {
                Id = c.Id,
                Name = c.Name,
                ...
                Products = c.Products.Count()
            }; 
```

# iphone - 在没有蓝牙管理器的 iOS 5 上检查蓝牙是否被禁用

> ID：11534963
> 
> 赞同：3
> 
> 时间：2012-07-18T05:45:49.820
> 
> 标签：iphone, ios, cocoa-touch, gamekit, core-bluetooth

我已经看到在 iOS 5 中，CoreBluetooth 提供了检查蓝牙是否被禁用的功能。从我看到的文档来看，它显然是针对蓝牙外设使用的。但是，我正在尝试检查蓝牙是否打开，因为我正在使用 GameKit ( `GKPeerPickerController`)，如果未启用，它将无休止地搜索蓝牙连接，这是一个问题。

我试着这样做：

```
CBCentralManager * manager = [[CBCentralManager alloc] init];

if (manager.state == CBCentralManagerStatePoweredOn ) {

      //go ahead with GameKit
} 
```

这不起作用，并且`manager.state`始终等于 null。我在这里做错了什么？或者，有没有更好的方法来检查 iPhone 上的蓝牙状态？

编辑：我不想调用任何私有 API，因为我将把这个应用程序提交到应用程序商店。我编辑了我的问题标题以澄清这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:46:07.840

好的，我通过这样做发现了：

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:FALSE], CBCentralManagerScanOptionAllowDuplicatesKey, nil];
NSMutableArray * discoveredPeripherals = [NSMutableArray new];
CBCentralManager * manager = [[CBCentralManager alloc] initWithDelegate:self queue:nil];
[manager scanForPeripheralsWithServices:discoveredPeripherals options:options];
[manager stopScan]; 
```

如果蓝牙关闭，系统将弹出一个警报视图，提供打开蓝牙的选项。否则，如果它找到外围设备，它将调用相应的委托方法，但如果该实现中没有任何内容，则无需担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:50:24.990

[您可以通过此链接](http://www.pocketmagic.net/?p=2827)找到您问题的答案。看看这个。

**已编辑**

您是否查看过[Game Kit Framework 参考资料](http://developer.apple.com/iphone/library/documentation/GameKit/Reference/GameKit_Collection/GameKit_Collection.pdf)？

据苹果称：

> Game Kit 使您的应用程序能够在两个设备之间创建蓝牙连接。

**已编辑**

然后试试这个项目。`https://github.com/sergiomtzlosa/MultiContactsSelector-ios`

# java - String.format() 将数组作为单个参数

> ID：11534964
> 
> 赞同：15
> 
> 时间：2012-07-18T05:46:02.220
> 
> 标签：java, string, string-formatting

为什么这行得通？：

```
String f = "Mi name is %s %s.";
System.out.println(String.format(f, "John", "Connor")); 
```

这不？：

```
String f = "Mi name is %s %s.";
System.out.println(String.format(f, (Object)new String[]{"John","Connor"})); 
```

如果方法 String.format 采用可变参数对象？

它可以编译，但是当我执行此操作时，String.format() 将 vararg 对象作为单个唯一参数（数组本身的 toString() 值），因此它会引发 MissingFormatArgumentException，因为它无法与第二个字符串说明符匹配(%s)。

我怎样才能让它工作？在此先感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-18T06:00:47.423

使用这个：（我会推荐这种方式）

```
String f = "Mi name is %s %s.";
System.out.println(String.format(f, (Object[])new String[]{"John","Connor"})); 
```

或者

```
String f = "Mi name is %s %s.";
System.out.println(String.format(f, new String[]{"John","Connor"})); 
```

但是如果你使用这种方式，你会得到以下警告：

> type 的参数`String[]`应该显式地转换为从 type`Object[]`调用`varargs`方法。它也可以被强制转换为调用。`format(String, Object...)``String``Object``varargs`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-18T05:50:55.140

问题是在转换为 之后`Object`，编译器不知道您正在传递一个数组。尝试将第二个参数转换为`(Object[])`而不是`(Object)`.

```
System.out.println(String.format(f, (Object[])new String[]{"John","Connor"})); 
```

或者根本不使用演员表：

```
System.out.println(String.format(f, new String[]{"John","Connor"})); 
```

（有关更多信息，请参阅[此答案。）](https://stackoverflow.com/a/2925300/535871)

# javascript - 如何访问 javascript 函数 html 页面参数？

> ID：11534968
> 
> 赞同：0
> 
> 时间：2012-07-18T05:46:42.453
> 
> 标签：javascript, html, ajax

> **可能重复：**
> [创建无需重新加载即可更新的页面](https://stackoverflow.com/questions/10168383/creating-a-page-that-updates-without-reloading)

我想从它的 URL 中获取 HTML 页面的内容并将其放在当前文档中。下面的伪代码显示了我想要采取的方法：

```
<!DOCTYPE html>
<html>
<body>

<p id="text"></p>

<script type="text/javascript">

function getPageText(htmlPage)
{
   //comment: How do I get innerHTML?
   var text = htmlPage.body.innerHTML;

   //comment: How do I have to return?    
   return text;
}

document.getElementById("text").innerHTML=getPageText("https://google.com");
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:54:57.343

您正在寻找的技术名称是 AJAX --- 您需要下载远程页面（并且必须允许您这样做），以便 javascript 获取页面的内容。

有关该技术的概述，请参见另一个答案 --- [https://stackoverflow.com/a/10168402/473914](https://stackoverflow.com/a/10168402/473914)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:10:38.513

您需要从 google 提取内容，然后您可以使用 innerHtml。或者，您可以使用 iframe 并动态或静态包装 scr。动态包装 scr 的代码如下。

***一个.html***

```
<html>
 <head>
   <script>
      function getPageText(url){
          document.getElementById("container").setAttribute("src",url); 
      }
      getPageText("https://www.google.com");
   </script>
 </head>

 <body>
   <iframe id='container'></iframe>
 </body>
</html> 
```

# eclipse-plugin - 迁移到 Equinox P2 以获取更新站点 - Juno

> ID：11534970
> 
> 赞同：0
> 
> 时间：2012-07-18T05:46:54.023
> 
> 标签：eclipse-plugin, rcp, update-site

我正在尝试将我的产品的更新站点插件从 eclipse equinox 迁移到 Juno，当我创建一个新的插件项目并复制粘贴所有 src 文件并按照以前的项目更改 META-INF 时，我得到了很多编译错误。原因是 org.eclipse.update.core 从 Juno 中删除。所以我必须将这个现有项目迁移到 Equinox P2。但我找不到这样做的方法，因为我对 RCP/插件开发完全陌生。有人能帮我吗有一些指示。我得到“无法解决以下类型错误”

UpdateSearchRequest ContentEntryModel IFeature IURLEntry ICategory 消息 IFeatureReference IUpdateModelChangedListener ISite IIncludedFeatureReference

ETC...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:49:22.117

[http://plosquare.blogspot.com/2009/05/migrating-eclipse-update-sites-to-p2.html](http://plosquare.blogspot.com/2009/05/migrating-eclipse-update-sites-to-p2.html)

也许以上可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:24:57.490

我建议以下内容开始：

1.  通过 Window->Show View->Other...->Plug-in Development->Plug-ins 打开 Plug-ins View
2.  选择所有插件，右键单击并选择“添加到Java搜索...”
3.  Ctrl-O 并键入您上面列出的类文件之一

这将允许您打开这些类的编辑器以查看它们是否仍然存在。从编辑器中，您可以找出它们所在的插件并开始在清单编辑器中修复您的插件依赖项。然后，您可以手动或通过组织导入开始修复源中的导入。

# ios - ios UITableView在向下滚动到底部行时重新加载数据

> ID：11534972
> 
> 赞同：0
> 
> 时间：2012-07-18T05:46:57.730
> 
> 标签：ios, xcode, uitableview, reloaddata

我已经实现了一个下拉刷新，它位于我的 UITableView 上方。

但是，UITableView 也有一个默认设置，如果您向上推（以显示表格底部的行），它还会重新加载表格数据。由于我已经下拉刷新，我想禁用它。我怎么做？

谢谢！

编辑：我想一次加载 UITableView 的所有行，而不仅仅是可见行，因为无论如何我都没有加载太多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:00:01.593

这并不是在“重新加载”单元格。如果它们已经出队，那么它们正在被加载。如果你不想要那些细胞，那你为什么一开始就有它们呢？如果您将它们滚动到屏幕外，它们通常会出列以提高 tableview 的性能。如果你不想要这种行为，那么你可能不想让你的单元格出队，但 tableview 的性能可能会受到极大的影响。

# javascript - 需要 jquery 如何在 Rails 3 应用程序中工作？

> ID：11534991
> 
> 赞同：9
> 
> 时间：2012-07-18T05:49:07.327
> 
> 标签：javascript, ruby-on-rails, require

在我的 rails 3 应用程序中，它具有：

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require jquery-ui 
```

它工作正常。但我不明白它是如何工作的。我想我理解第三行，我相信它将所有内容添加到与该文件（/app/assets/javascript）位于同一目录中的该文件中。但是第一行呢？它从哪里获取 jquery 文件？我在文件开头的评论中提到的任何目录中都没有看到它，特别是：

```
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path. 
```

rails 去哪里获取 jquery javascript 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T06:12:37.373

您上面提到的 require 部分称为**资产管道**，它是 rails 3 新功能的一部分。这样做的目的是将所有 javascripts 文件连接在一起，因此您可以通过一次导入 javascript 文件来更快地加载页面。

[您可以在此处](http://guides.rubyonrails.org/asset_pipeline.html)找到有关资产管道的更多信息，如果没记错的话，它正在使用[sprockets gem](https://github.com/sstephenson/sprockets-rails)。

参考**//= require jquery**，它是从您的 jquery gem 中导入 javascript 文件（仅当您使用 jQuery gem 时）。您可以从 jQuery gem 资产文件夹中找到它。

请参阅此[截屏视频](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)，因为它描述得最好。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T06:10:49.357

`require_tree .`包括它所在目录下的*所有文件（例如 app/assets/javascript）。*jQuery 源文件来自[jquery-rails gem](https://github.com/rails/jquery-rails/tree/master/vendor/assets/javascripts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T06:11:15.143

评论可能有点混乱。在这种情况下，gem 也称为“插件”。它来自`jquery-rails`宝石。注意`vendor/assets/javascripts`结构。

[https://github.com/rails/jquery-rails/tree/master/vendor/assets/javascripts](https://github.com/rails/jquery-rails/tree/master/vendor/assets/javascripts)

# html - 那么......我们现在必须开始为 chrome 的日历添加 polyfill 吗？

> ID：11534996
> 
> 赞同：3
> 
> 时间：2012-07-18T05:49:42.973
> 
> 标签：html, google-chrome, date, datepicker, modernizr

看起来 Chrome 可能最终会释放他们的`<input type="date" />`控制权。如何用modernizr围绕这个进行填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:29:38.057

此信息来自[HTML5Rocks 帖子](http://updates.html5rocks.com/2012/08/Quick-FAQs-on-input-type-date-in-Google-Chrome)。

如果您想在所有平台上应用 jQuery Datepicker 或其他 JS 日历库，请使用 input[type=text] 而不是 input[type=date]。这是确保 UI 一致的最佳方式，因为支持 input[type=date] 的不同浏览器以不同的方式执行此操作。

您可以使用 Modernizr 或您自己的检查来查看浏览器是否支持这种输入类型，然后让它使用本机或使用 JS 库。

```
var isDateInputSupported = function(){
  var elem = document.createElement('input');
  elem.setAttribute('type','date');
  elem.value = 'foo';
  return (elem.type == 'date' && elem.value != 'foo');
}

if (!isDateInputSupported())  { // or.. !Modernizr.inputtypes.date
  $('input[type="date"]').datepicker();
} 
```

# jquery - 使用箭头键在使用 scrollTo 插件的部分之间导航

> ID：11534997
> 
> 赞同：2
> 
> 时间：2012-07-18T05:49:47.157
> 
> 标签：jquery, scrollto, keycode

我知道有人问过类似的问题，但似乎没有一个能解决我的困境。所以来了！

我想使用向上/向下箭头键导航到的页面上有部分。第一个称为“标题”，其余称为“模块”。我无法获取要更新的“下一个”的数值，更不用说在滚动时区分“标题”和“模块”的问题了！

这是我的 HTML

```
<div id="pages">
    <div class="header"></div>
    <div class="module"></div>
    <div class="module"></div>
    <div class="module"></div>
    <div class="module"></div>
</div> 
```

还有我的 jQuery

```
$(document).keydown(function (e) {

var keyCode = e.keyCode || e.which,
    arrow = {left: 37, up: 38, right: 39, down: 40 },       
    elements = $(".module,.header"),
    next = 0,
    max = elements.length;

switch (keyCode) {
    case arrow.down:
        if(next+1 < max) {
            next++;
            $("#pages").scrollTo(elements[next], 800, { axis:"y" });
            console.log(next);
        }
    break;

    case arrow.up:
        if(next-1 > -1) {
            next--;
            $("#wrap").scrollTo(elements[next], 800, { axis:'y' });
        }
    break;
}

}); 
```

任何帮助或建议将不胜感激！