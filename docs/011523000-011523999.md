# StackOverflow 问答 11523000-11523999

# c# - 锁变量应该声明为 volatile 吗？

> ID：11523003
> 
> 赞同：22
> 
> 时间：2012-07-17T12:58:44.327
> 
> 标签：c#, .net, multithreading, locking, volatile

我有以下 Lock 语句：

```
private readonly object ownerLock_ = new object();

lock (ownerLock_)
{
} 
```

我应该为我的锁变量使用[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7(v=vs.71).aspx)关键字吗？

```
private readonly volatile object ownerLock_ = new object(); 
```

在 MSDN 上，我看到它通常用于无需锁定即可访问的字段，所以如果我使用 Lock 我不需要使用 volatile？

来自[MSDN](http://msdn.microsoft.com/en-us/library/x13ttww7(v=vs.71).aspx)：

> volatile修饰符通常用于被多个线程访问而不使用lock语句序列化访问的字段。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T13:02:42.140

如果您*只*在拥有锁时访问锁“保护”的数据，那么是的 - 使这些字段易失是多余的。您也不需要使`ownerLock_`变量 volatile 。（您目前没有在`lock`语句中显示任何实际代码，这使得很难具体讨论 - 但我假设您*实际上*正在读取/修改`lock`语句中的一些数据。）

`volatile`应该*很少*在应用程序代码中使用。如果您想对单个变量进行无锁访问，`Interlocked`几乎总是更容易推理。如果您想要除此之外的无锁访问，我几乎总是会开始锁定。（或者尝试使用不可变的数据结构开始。）

我只希望`volatile`在尝试为线程构建更高级别抽象的代码中看到 - 例如，在 TPL 代码库中。*对于真正*彻底了解 .NET 内存模型的专家来说，它确实是一个工具……其中很少有人，IMO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:20:13.017

如果某些东西是`readonly`线程安全的，那就是句号。（嗯，差不多。专家*可能*会弄清楚如何在您的`lock`语句中获得 NullReferenceException，但这并不容易。）`readonly`您不需要`volatile`,`Interlocked`或锁定。它是多线程的理想关键字，您应该尽可能使用它。它适用于一个锁对象，它的大缺点（你不能改变值）并不重要。

此外，虽然*引用*是不可变的，但引用的对象可能不是。“新对象（）”在这里，但如果它是一个`List`或其他可变的东西——而不是线程安全的——你*会*想要锁定引用（以及对它的所有其他引用，如果有的话）以阻止对象一次更改两个线程。

# c# - 在对话框中的嵌套中继器中获取值

> ID：11523011
> 
> 赞同：0
> 
> 时间：2012-07-17T12:59:05.850
> 
> 标签：c#, asp.net, repeater, juice-ui

我从嵌套中继器内的文本框中获取新值时遇到问题。如果我像这样在 Text 属性中键入静态值：我可以获取该值，但不能获取新值。

```
<ItemTemplate>
    <tr>
        <td width="160">
            <%# Eval("index")%>
        </td>
        <td>
            <%# Eval("Sex") %>
        </td>
        <td align="right">
            <button id="EditPuppy" class="open-dialog" runat="server">
                Rediger hvalp</button>
            <juice:Button TargetControlID="EditPuppy" runat="server" />
        </td>
        <td align="right" width="30">
            <asp:ImageButton runat="server" ID="DeletePuppy" CommandArgument='<%# Eval("dogid").ToString() %>'
                OnClientClick='return confirm("Er du sikker på at du gerne vil slette denne hvalp?")'
                OnCommand="DeletePuppy_Command" SkinID="DefaultDeleteButton" />
        </td>
    </tr>
    <div id="_Default" runat="server" class="basic-dialog" title="Basic dialog" runat="server">
        <asp:TextBox runat="server" ID="TextBoxPuppyName" Text="HEJ" /><!-- The textbox i am trying to get the value from -->
        <asp:Button UseSubmitBehavior="false" runat="server" ID="ButtonPuppyName" CommandArgument="<%# ((RepeaterItem)Container.Parent.Parent).ItemIndex %> <-- Getting parent repaterid"
            CommandName="<%# Container.ItemIndex %> <-- Getting current repeater index -->"
            OnCommand="ButtonPuppyName_Command" Text="Opdater" />
    </div>
    <juice:Dialog TargetControlID="_Default" AutoOpen="false" runat="server" />
</ItemTemplate> 
```

代码隐藏：

```
protected void ButtonPuppyName_Command(object sender, CommandEventArgs e) {
    int parentRepeaterItemIndex = Convert.ToInt32(e.CommandArgument);
    int childRepeaterItemIndex = Convert.ToInt32(e.CommandName);
    Repeater childReapter = (Repeater)RepeaterShowKuldUserList.Items[parentRepeaterItemIndex].FindControl("RepeaterShowKuldPuppyList");
    TextBox name = (TextBox)childReapter.Items[childRepeaterItemIndex].FindControl("TextBoxPuppyName");
    HttpContext.Current.Response.Write(name.Text);
} 
```

谢谢你的帮助！。记住进入中继器工作，因为我可以获得“静态”值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:05:48.847

我认为您的问题是您正在调用**repeater.DataBind**（在页面加载中？）尝试添加 !IsPostBack 然后绑定您的数据...

另一个选项是 viewState=false.. 它应该是“true”

希望有帮助，冉

# javascript - Javascript 函数调用：常规调用 vs 调用 vs 绑定调用

> ID：11523012
> 
> 赞同：3
> 
> 时间：2012-07-17T12:59:06.910
> 
> 标签：javascript, html

我的问题很简单：我将一个函数传递给稍后要调用的其他函数（示例回调函数），问题是何时、为什么以及最佳实践是什么。

示例：我有**xxx()**函数，我必须传递它，正如我在下面的 window.onload 事件中向您展示的那样。

最佳做法是什么，为什么？有任何性能方面或者我为什么要选择使用 call 或 bind 来调用这个函数

```
function xxx(text)
{
    var div = document.createElement("div");
    div.innerHTML = text + " - this: " + this.toString();

    document.body.appendChild(div)
}

function callFunction(func)
{
    func("callFunction");
}

function callUsingCall(func)
{
    func.call(this, ["callUsingCall"]);
}

function callUsingBind(func)
{
    func.call(this, ["callUsingCall"]);
}

window.onload = function(){
    callFunction(xxx);

    callUsingCall(xxx);

    callUsingBind(xxx.bind(document));
} 
```

谢谢，

塞巴斯蒂安·P。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:02:00.073

我认为没有任何“最佳”做法。

`call`如果你调用的函数关心什么，你就使用`this`它。

如果`bind`要确保*只能*使用指定的值调用函数，则使用`this`.

[两者都有*一些*开销，即至少有一个深度的函数调用/范围]

否则，您只需调用该函数。

简单的:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T13:18:44.757

`this`对象是函数的上下文。就像您为您制造了一台机器，而`this`对象将是机器工作的地方，例如您的房子。你可以随意移动它。

我们有 4 种方式设置`this`对象。

**调用不是方法的函数：**

```
fn(someArguments) 
```

这样，`this`对象被设置为 null 或者可能是 window 对象。

**将函数作为方法调用：**

```
someObject.fn(someArguments) 
```

在这种情况下，`this`对象将指向`someObject`并且它是可变的。

**调用函数的`call`或`apply`方法。**

```
fn.call(anotherObject, someArguments)
someObject.call(anotherObject, someArguments)
someObject.apply(anotherObject, [someArguments]) 
```

在这种情况下，`this`对象将指向`someObject`此处。调用它时，您正在强制它具有另一个上下文。

**绑定一个函数**

`var fn2 = fn.bind(anotherObject, someArguments)`

这将创建另一个绑定到`this`我们给它的对象的函数（`anotherObject`）。不管你怎么称呼它，`this`对象都是一样的。

# 用例

现在你可以做一些棘手的事情知道这一点。我们之所以在这里拥有它（我认为它首先来自 C++）是因为对象的方法需要访问它们的父对象。`this`对象提供访问。

```
var coolObject = {
  points : ['People are amazing'],
  addPoint : function (p) { this.points.push(p) }
} 
```

因此，如果您执行以下操作，它将不起作用：

```
var addPoint = coolObject.addPoint;
addPoint('This will result in an error'); 
```

将抛出错误，因为 this 对象`coolObject`不再是我们的对象并且没有 points 属性。所以在这样的时候，你可以这样：

```
var addPoint = coolObject.addPoint;
addPoint.call({points : []}, 'This is pointless'); 
```

这是没有意义的，但该功能会起作用，即使`this`对象不是它应该是的。

```
var anotherCoolObject = {
  points : ['Im a thief!'],
  addPoint : coolObject.addPoint
}
anotherCoolObject.addPoint('THIS IS CALL STEALING'); 
```

如果您这样调用它，该函数仍然可以工作，因为该`this`对象将指向另一个具有该`points`属性的CoolObject。

我见过的最流行的用例是对 arguments 对象进行切片：

```
function returnHalf() {
  return [].slice.call(arguments, 0, arguments.length / 2);
}

returnHalf('Half', 'is', 'not', 'awesome');
// >> [Half', 'is'] 
```

所以你看，arguments 对象不是一个 instanceof 数组。如果我们这样做，`arguments.slice(...)`那么您将被编译器杀死。但是这里我们在 arguments 对象上使用数组的方法，因为它像数组。

有时你不想改变你的函数上下文或者你想添加你自己的参数，你使用绑定。

例如，当您使用 jquery 为事件添加侦听器时，当 jquery 调用您的函数时，this 对象将是元素。但有时你想做一些棘手的事情并改变它：

```
var myElement = {
  init : function () {
    $(this.element).click(this.listener.bind(this));
  },
  view : "<li>${Name}</li>",
  name : 'ed',
  element : $('#myelement'),
  listener : function () {
    this.element.append($.tmpl( this.view, this ));
  }
}

myElement.init(); 
```

所以在这里，你将它绑定到 myElement，这样你就可以访问对象属性来呈现视图。另一个例子如下：

```
for (var i = 0; i < 10; i++) {
  setTimeout(function () {console.log(i)}, 10)
}

// All of them will be 10.

for (var i = 0; i < 10; i++) {
  setTimeout((function () {console.log(this.i)}).bind({ i : i }, 10)
} 
```

如果您将异步函数调用放在循环中，则在调用回调时，循环结束并且计数器已到达末尾，您可以使用 bind 将当前计数器干净地绑定到您的回调。

我经常使用的另一个很好的用例是在将带参数的函数传递给[`async`](https://github.com/caolan/async/)模块时，而不创建闭包。

```
async.parallel({
  writeFile : function (cb) {
    fs.writeFile('lolz.txt', someData, cb);
  }, 
  writeFile2 : function (cb) {
    fs.writeFile('lolz2.txt', someData, cb);
  }
}, function (err){ 
    console.log('finished')
});

async.parallel({
  writeFile : fs.writeFile.bind(fs, 'lolz.txt', someData),
  writeFile2 : fs.writeFile.bind(fs, 'lol2z.txt', someData),
}, function (err){ 
    console.log('finished')
}); 
```

这两个实现是相同的。

# 表现

只需检查这些：

[http://jsperf.com/bind-vs-call2](http://jsperf.com/bind-vs-call2)

[http://jsperf.com/js-bind-vs-closure/2](http://jsperf.com/js-bind-vs-closure/2)

[http://jsperf.com/call-vs-closure-to-pass-scope/10](http://jsperf.com/call-vs-closure-to-pass-scope/10)

`bind`与其他类型的调用相比，具有很大的性能开销，但请确保您不会因未成熟的优化而牺牲可维护性的性能。

你也可以看看[这篇](http://howtonode.org/what-is-this)文章。

# bash - 带有 bash 的空格

> ID：11523015
> 
> 赞同：2
> 
> 时间：2012-07-17T12:59:17.067
> 
> 标签：bash

我正在尝试导出带有空格的文件夹...但我不知道如何...

```
:~> export PATH="/home/solo/VirtualBox\ VMs/"
:~> cd $PATH
bash: cd: /home/solo/VirtualBox\: No existe el fichero o el directorio 
```

我以为用“\”可以解决，但没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T13:01:40.250

你已经用引号把它转义了；不需要反斜杠，只是不要每次都忘记引号。但是FFS，**不要**使用`$PATH`；那个环境变量很**重要**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:02:19.113

在`bash`, 当你在里面写`"`or时`'`，你不需要转义很多字符。

在你的情况下，

```
export PATH="/home/solo/VirtualBox VMs/" 
```

应该做。

请注意，空格和许多其他字符具有特殊含义，您可以将它们转义，这样 bash 就不会混淆并将它们与它们的特殊含义一起使用。当你把东西放进`"`去时，不会有任何混淆，因为一切都是字面意思（几乎），没有必要逃避。

# c++ - 编译并运行 c++ 代码运行时

> ID：11523023
> 
> 赞同：1
> 
> 时间：2012-07-17T12:59:49.063
> 
> 标签：c++, compilation, runtime

有谁知道如何在程序已经运行时编译您编写的 c++ 代码？

后来我想运行该代码。

我想这样做是因为我正在尝试制作一款可以教您编程的游戏，因此用户必须在游戏运行时编写代码并对其进行测试。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:09:29.823

You'd have an easier time if you chose a language that was designed with embedding in mind - like LUA or python. For C++, you'd have to go for something extremely clumsy and fragile like invoking an external compiler (which is also a logistics nightmare when shipping your game), or something as complex as integrating a compiler in your game (probably doable with llvm components, but...)

Also, for "teaching programming", C++ probably isn't the best language :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:04:47.147

您必须调用编译器来编译和链接用户输入的代码。必须将其制成可执行文件，然后从您创建的另一个进程运行，或者作为动态加载和调用的库。

这在 POSIX 平台（如 Linux 和 OSX）和 Windows 上是不同的。

# arrays - Array[String] 不是 Scala 中 Seq[String] 的子类吗？

> ID：11523024
> 
> 赞同：10
> 
> 时间：2012-07-17T12:59:51.747
> 
> 标签：arrays, scala, scala-collections, seq

我写了一个方法，它接受 Seq[String] 的所有子类的对象。不幸的是，它不接受 Array[String] 类型的对象。Array[String] 不是 Seq[String] 的子类吗？

```
scala> def test[T <: Seq[String]](x: T) = {}
test: [T <: Seq[String]](x: T)Unit

scala> val data = "This is a test string"
data: java.lang.String = This is a test string

scala> test(data.split(" "))
<console>:10: error: inferred type arguments [Array[java.lang.String]] do not conform to method test's type parameter bounds [T <: Seq[String]]
              test(data.split(" ")) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T13:04:42.607

不，`Array[String]`转换为常规 JVM 数组，就像您在 Java 中看到的那样：`String[]`.

`Array[String]`您看到在其他 Scala集合上看到的所有操作的原因`Seq`是存在从to的[隐式转换](http://www.scala-lang.org/api/current/scala/Predef%24.html)。`Array[T]`[`ArrayOps[T]`](http://www.scala-lang.org/api/current/scala/collection/mutable/ArrayOps.html)

做这个：

```
def test[T <% Seq[String]](x: T) = {} 
```

这称为*视图绑定*。这意味着它`T`应该是 的子类型，`Seq[String]`或者应该存在范围内的隐式转换，该转换转换`T`为`Seq[String]`. 在幕后，编译器实际上给 增加了一个隐式参数`test`，所以这个方法就变成了：

```
scala> def test[T <% Seq[String]](x: T) = {}
test: [T](x: T)(implicit evidence$1: T => Seq[String])Unit 
```

这`implicit evidence$1`是现在充当方法主体内的`T`隐式转换的函数。`Seq[String]`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T13:09:25.867

源（或[API 文档](http://www.scala-lang.org/api/current/scala/Array.html)）状态，`Array`定义为

```
final class Array[T] extends Serializable with Cloneable 
```

也就是说，它不是 的子类型`Seq`。但是，文档还提到了一个隐式转换[`WrappedArray`](http://www.scala-lang.org/api/current/scala/collection/mutable/WrappedArray.html)，后者是`Seq`.

# c - 叉子输出不正确

> ID：11523027
> 
> 赞同：4
> 
> 时间：2012-07-17T12:59:57.350
> 
> 标签：c, fork

考虑以下程序的输出：

```
int main()
{
    int ret;
    ret=fork();
    ret=fork();
    ret=fork();
    ret=fork();

    if(!ret)
            printf("one\n");
    else
            printf("two\n");
    return 0;
} 
```

我得到的输出为：

```
two
one
two
two 
```

[http://ideone.com/omgKm](http://ideone.com/omgKm)

AFAIT，输出应该是`8 times one`& `8 times two`。

**`one's`其余的&在哪里`two's`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:10:26.253

考虑这个替代代码，它可以更好地跟踪发生的事情：

```
#include <stdio.h>
#include <unistd.h>

int main(void)
{
    int ret1 = fork();
    int ret2 = fork();
    int ret3 = fork();
    int ret4 = fork();

    if (ret4 == 0)
        printf("one: (%d: %d, %d, %d, %d)\n", (int)getpid(), ret1, ret2, ret3, ret4);
    else
        printf("two: (%d: %d, %d, %d, %d)\n", (int)getpid(), ret1, ret2, ret3, ret4);
    return 0;
} 
```

向我们展示这个变体的输出，我们可以看到哪些有效，哪些失败。

* * *

看到替代输出后，我在我的 Mac 上得到了这个（`Isis JL:`我的提示在哪里，`rmk`是 的替代实现`make`）：

```
Isis JL: rmk fb && ./fb
    /usr/bin/gcc -O3 -g -std=c99 -Wall -Wextra fb.c -o fb  
two: (38068: 38069, 38070, 38071, 38072)
one: (38072: 38069, 38070, 38071, 0)
two: (38071: 38069, 38070, 0, 38075)
two: (38070: 38069, 0, 38074, 38077)
two: (38073: 0, 0, 38078, 38079)
two: (38069: 0, 38073, 38076, 38080)
one: (38075: 38069, 38070, 0, 0)
one: (38077: 38069, 0, 38074, 0)
Isis JL: two: (38074: 38069, 0, 0, 38081)
two: (38078: 0, 0, 0, 38082)
one: (38079: 0, 0, 38078, 0)
one: (38081: 38069, 0, 0, 0)
two: (38076: 0, 38073, 0, 38083)
one: (38080: 0, 38073, 38076, 0)
one: (38083: 0, 38073, 0, 0)
one: (38082: 0, 0, 0, 0)

Isis JL: 
```

请注意交错提示 - 最后的空白行是我在输出完成后点击返回的地方。

### 假设：

初始进程停止后，不会捕获 ideone 上的输出。

试试这个替代方案，它等待孩子们在退出之前死去：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>

int main(void)
{
    int ret1 = fork();
    int ret2 = fork();
    int ret3 = fork();
    int ret4 = fork();

    if (ret4 == 0)
        printf("one: (%d: %d, %d, %d, %d)\n", (int)getpid(), ret1, ret2, ret3, ret4);
    else
        printf("two: (%d: %d, %d, %d, %d)\n", (int)getpid(), ret1, ret2, ret3, ret4);
    while (wait(0) > 0)
        ;
    return 0;
} 
```

再次在 Mac 上输出：

```
Isis JL: rmk fb && ./fb
    /usr/bin/gcc -O3 -g -std=c99 -Wall -Wextra fb.c -o fb  
two: (38111: 38112, 38113, 38114, 38115)
one: (38115: 38112, 38113, 38114, 0)
two: (38114: 38112, 38113, 0, 38119)
two: (38113: 38112, 0, 38117, 38121)
two: (38117: 38112, 0, 0, 38123)
one: (38119: 38112, 38113, 0, 0)
two: (38118: 0, 38116, 0, 38124)
one: (38121: 38112, 0, 38117, 0)
one: (38125: 0, 0, 38122, 0)
two: (38116: 0, 0, 38122, 38125)
two: (38122: 0, 0, 0, 38126)
two: (38112: 0, 38116, 38118, 38120)
one: (38120: 0, 38116, 38118, 0)
one: (38123: 38112, 0, 0, 0)
one: (38124: 0, 38116, 0, 0)
one: (38126: 0, 0, 0, 0)
Isis JL: 
```

* * *

### Hypothesis Proven

To the extent you can prove anything... [http://ideone.com/zFoLn](http://ideone.com/zFoLn) ...

This shows all 16 lines of output. The problem must have been 'premature termination'.

# jquery - jquery ui可排序占位符无法更改背景颜色

> ID：11523030
> 
> 赞同：7
> 
> 时间：2012-07-17T13:00:23.250
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, background-color, placeholder

我可以成功更改占位符的边框颜色，但是当我尝试更改背景颜色时，什么也没有发生。

这个 jsfiddle 代码最好地解释了它：http: [//jsfiddle.net/EUVrK/1/](http://jsfiddle.net/EUVrK/1/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T13:33:02.627

根据[jQuery UI Sortable Documentation](http://jqueryui.com/demos/sortable/#option-placeholder)，您可以为占位符提供一个 css 类。您应该能够在此类中指定背景。

使用占位符和 forcePlaceholderSize 属性，它就像一个魅力。我已经更新了 jsfiddle[链接](http://jsfiddle.net/EUVrK/3/)

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T07:58:06.800

我从 irc.freenode 上的一位朋友那里得到了一些帮助，他提出了以下解决方案。

```
ui.placeholder.css("visibility", "visible");
ui.placeholder.css("background-color", "red"); 
```

占位符的背景颜色没有显示，因为实际元素不可见（我想它默认设置为隐藏）。因此，将其设置为可见可以让人们看到不同的背景颜色。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-19T21:32:56.237

> **CSS**
> 
> ```
> .placeholderBackground{背景颜色：#FD6FB7;}
> 
> ```
> 
> **范围**
> 
> ```
> $('.sortable').sortable({
> 轴：'y'，占位符：'placeholderBackground'
> }).disableSelection();
> 
> ```

# node.js - node.js flatiron - 通过 multipart/form-data 上传文件

> ID：11523034
> 
> 赞同：1
> 
> 时间：2012-07-17T13:00:31.203
> 
> 标签：node.js, flatiron.js, formidable

我有一个 flatiron 应用程序，现在需要扩展它来处理图像的多部分/表单数据上传。

如何在 flatiron 应用程序中处理文件上传？union/director 似乎忽略了 multipart/form-data，并且我所有集成强大的尝试都失败了 - 我认为这是因为联合在强大获取请求对象之前执行的操作。

我已经尝试过正常和`streaming: true`路由，以及`before`数组中的原始处理。

我不能是唯一需要这个的人，所以它可能已经解决了，我道歉。我只是找不到任何参考资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:24:29.193

您可以将 union 与已经使用 node-formidable 的 connect.multipart（或 bodyParser）一起使用。

```
var connect = require('connect'),
    union = require('union');

var server = union.createServer({
  buffer: false,
  before: [
    connect.bodyParser(),
    function(req, res) {
                if (req.method==='POST'){
                        console.log(req.files);
                        res.end('Done');
                }else{
                        res.writeHead(200, { 'Content-Type': 'text/html' });
                        res.end('<form method="post" enctype="multipart/form-data">' +
                                '<input type="file" name="file" />' +
                                '<input type="submit" value="Upload" />' +
                                '</form>');
                }
    },
  ]
}).listen(8000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:56:06.053

显然，您必须在 Union 选项中关闭缓冲，并在端点选项中关闭 streaming: true ：

```
var fs = require('fs'),
    path = require('path'),
    union = require('../../lib'),
    director = require('director'),
    favicon = require('./middleware/favicon'),

    // for uploading:
    formidable = require('formidable'),
    util = require('util');

var router = new director.http.Router();

var server = union.createServer({
  buffer: false,
  before: [
    favicon(path.join(__dirname, 'favicon.png')),
    function (req, res) {
      var found = router.dispatch(req, res);
      if (!found) {
        res.emit('next');
      }
    }
  ]
});

router.get('/foo', function () {
  this.res.writeHead(200, { 'Content-Type': 'text/html' });
  this.res.end('<form action="/foo" enctype="multipart/form-data" method="post">'+
    '<input type="text" name="title"><br>'+
    '<input type="file" name="upload" multiple="multiple"><br>'+
    '<input type="submit" value="Upload">'+
    '</form>');
});

router.post('/foo', { stream: true }, function () {
  var req = this.req,
      res = this.res,
      writeStream;

      var form = new formidable.IncomingForm();

      console.log('Receiving file upload');

      form
        .on('field', function(field, value) {
          console.log(field, value);
        })
        .on('file', function(field, file) {
          console.log(field, file);
        })
        .on('progress', function(rec, expected) {
          console.log("progress: " + rec + " of " +expected);
        })

        .parse(req, function(err, fields, files) {

          console.log('Parsed file upload' + err);

          res.writeHead(200, { 'Content-Type': 'text/plain' });
          if (err) {
            res.end('error: Upload failed: ' + err);
          }
          else {
            res.end('success: Uploaded file(s): ' + util.inspect({fields: fields, files: files}));
          }
        });

});

server.listen(9090);
console.log('union with director running on 9090'); 
```

# c# - 使用 c# 在 OpenOffice calc 中的超链接

> ID：11523035
> 
> 赞同：1
> 
> 时间：2012-07-17T13:00:31.937
> 
> 标签：c#, hyperlink, openoffice.org

我使用 c# 在 openoffice 中制作了一个电子表格，其中包含几个不同的工作表。在工作表 1 上是工作表其余部分的所有名称的列表。如何设置从每个单元格到相应工作表的超链接。

我浏览了互联网，但我一直在努力寻找任何有用的信息。谁能指出我如何编程的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:05:20.340

我不确定我是否理解正确，但这可能会有所帮助，请将其放在您的牢房中：

```
=HYPERLINK("MyTableName.C3") 
```

这（应该）跳转到表 MyTableName 中的单元格 C3。只是跳到一个表使用

```
=HYPERLINK("#MyTableName") 
```

我无法尝试，因为我不使用 OpenOffice

来源：[http ://www.ooowiki.de/HyperLink](http://www.ooowiki.de/HyperLink)

# c# - 通过 LINQ 基于抽象父属性加载具体子类型

> ID：11523036
> 
> 赞同：0
> 
> 时间：2012-07-17T13:00:35.043
> 
> 标签：c#, linq, entity-framework, wcf-data-services, odata

我刚刚搬到的项目有一个抽象类`Product`，之所以选择这样做是因为有 4 种子类型被认为是一种产品并且具有相当多的共性（组合的原因）。 `Product`有一个`ProductType`与之关联的枚举。我需要制作一些与`Product`like相关的静态功能`GetAllProducts()`。

这是我的问题，因为该`Product`表只有共性数据，因为我需要每个`ProductType`都点击并选择它自己的表信息与`Product`表连接。

该模型的后端使用的是我不熟悉的 EntityFramework + OData 技术。

什么被认为是从数据库中获取每个子类型的完全加载数据（以及与之相关的所有共性）的适当方法，即使在我从 linq 查询中选择它之前我不知道该子类型是什么？`ProductType`而且，假设我返回了该数据，通过它们自己的构造函数创建实际的子类型是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:10:56.670

关于 EF + WCF 数据服务（OData 是协议，WCF DS 是 OData 的 Microsoft 实现）最酷的部分是其中很多都是魔术。您不需要任何特殊的连接或其他魔法。

这里有一些代码可以帮助您入门：（我保证，我会在下面介绍它。）

```
using System;
using System.Data.Entity;
using System.Data.Services;
using System.Data.Services.Common;
using System.ServiceModel;

namespace Scratch.Web
{
    // 4
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    // 1
    public class ScratchService : DataService<ScratchContext>
    {
        static ScratchService()
        {
            // 2
            Database.SetInitializer(new ScratchContextInitializer());
        }

        public static void InitializeService(DataServiceConfiguration config)
        {
            // 3
            config.SetEntitySetAccessRule("*", EntitySetRights.All);
            config.SetServiceOperationAccessRule("*", ServiceOperationRights.AllRead);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
            // 4
            config.UseVerboseErrors = true;
        }
    }

    public class ScratchContextInitializer : DropCreateDatabaseIfModelChanges<ScratchContext>
    {
        protected override void Seed(ScratchContext context)
        {
            base.Seed(context);
            // 5
            context.Products.Add(new DiscontinuedProduct
                                     {
                                         Name = "DP1",
                                         DiscontinuedAt = DateTime.Now.AddDays(-7)
                                     });
            context.Products.Add(new DiscountedProduct
                                     {
                                         Name = "DP1",
                                         Discount = 3.14
                                     });
        }
    }
    // 6
    public class ScratchContext : DbContext
    {
        public DbSet<Product> Products { get; set; }
    }
    // 7
    public abstract class Product
    {
        public int ID { get; set; }
        public string Name { get; set; }
    }
    // 7
    public class DiscountedProduct : Product
    {
        public double Discount { get; set; }
    }
    // 7
    public class DiscontinuedProduct : Product
    {
        public DateTime DiscontinuedAt { get; set; }
    }
} 
```

快速演练：

*   1：`ScratchService`在这种情况下是 WCF 数据服务。它继承自`DataService<T>`并提供一个`DbContext`（EF 概念）作为泛型类型。
*   2：我们使用静态构造函数来设置数据库初始化器，因为我一直在修改这段代码。
*   3：我们使实体集和服务操作对服务消费者可见（`*/All`不推荐这种方法。）
*   4：我们启用调试（总是有用的）
*   5：我们为数据库播种以获取一些数据
*   6：我们为 EF 创建一个`DbContext`并将抽象类公开`Product`为`DbSet`. （请注意，您需要 WCF DS 5 或更高版本才能使用`DbContext`；WCF DS 5.0.1 [或 5.1.0-rc1，如果你够勇敢的话] 和 EF 4.3.1 一起玩得很好。）
*   7：我们创建一个类结构，根有一个抽象类和两个派生类。

请注意，当 EF 发挥作用时，您遵循其规则： - 我本可以`ProductId`没有`DataServiceKey`属性，并且 EF 会将其作为实体的密钥，WCF DS 将尊重 - TPT/TPH/TPC 都是每个 EF 设置 - 如果你想先从数据库中做代码（听起来你可能会这样做），有一个[下载可以帮助你](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:25:22.053

```
 var result=(
                        from product in context.Products
                        join child1 in context.Child1s
                        on product.ID equals child1.ProductID
                        join child2 in context.Child2s
                        on product.ID equals child2.ProductID
                        join child3 in context.Child3s
                        on product.ID equals child3.ProductID
                        join child4 in context.Child4s
                        on product.ID equals child4.ProductID
                        where product.ID<1000
                        select new {

                                        AnonTypeProduct=product,
                                        AnonTypeChild1=child1,
                                        AnonTypeChild2=child2,
                                        AnonTypeChild3=child3,
                                        AnonTypeChild4=child4,

                        }).ToList();
        IEnumerable<Child1> ch1list=new IEnumerable<Child1>();
        IEnumerable<Child2> ch2list =new IEnumerable<Child2>();
        IEnumerable<Child3> ch3list=new IEnumerable<Child3>();
        IEnumerable<Child4> ch4list=new IEnumerable<Child4>();
        foreach(var result in results)
        {
            Child1 ch1=new Child1();
            ch1=result.AnonTypeChild1;
            ch1.Product=AnonTypeProduct;
            Child2 ch2=new Child2();
            ch2=result.AnonTypeChild2;
            ch2.Product=AnonTypeProduct;
            Child3 ch3=new Child3();
            ch3=result.AnonTypeChild3;
            ch3.Product=AnonTypeProduct;
            Child1 ch4=new Child4();
            ch4=result.AnonTypeChild4;
            ch4.Product=AnonTypeProduct;
            ch1list.Add(ch1);
            ch1list.Add(ch2);
            ch1list.Add(ch3);
            ch1list.Add(ch4);
        } 
```

我希望这将有所帮助。但是，您可以使用 Include 方法来执行此操作。我希望上下文是 ObjectContext 或 DBContext 的对象。

# mysql - 将一个 Mysql 表列的值分配给另一个 Mysql 表列

> ID：11523038
> 
> 赞同：0
> 
> 时间：2012-07-17T13:00:39.127
> 
> 标签：mysql

假设我有一个 MySQL 模式，该模式以`srvconfig`一个表命名，表中`tbl_cfg`包含以下字段：

*   `cfg_id`
*   `sfg_srv_name`
*   `cfg_srv_ip`
*   `cfg_srv_port`
*   `cfg_srv_desc`

还有另一个模式调用`customer`了一个名为`lcl_cfg`以下字段的表：

*   `cust_id`
*   `cust_info`
*   `assigned_srv_id`
*   `cust_serv`

在调用的架构`customer`中，`lcl_cfg.assigned_srv` 我需要分配的值`cfg_id`（这是架构中服务器的 ID `srvconfig.tbl_cfg.cfg.id`）

我可以使用 phpMyAdmin 来实现这一点，还是需要使用 PHP 脚本来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:07:09.253

尝试这个

```
update customer.lcl_cfg as t1 inner join srvconfig.tbl_cfg as t2 
on t1.cfg_id=t2.cfg_id
set t1.assigned_srv =t2.cfg_id 
```

# jquery - 如何使用 jquery / javascript 在一个变量中添加所有框宽度

> ID：11523043
> 
> 赞同：-1
> 
> 时间：2012-07-17T13:00:57.907
> 
> 标签：jquery

我想在一个变量中计算或添加所有框宽度的宽度。我应该使用循环或类似的东西。请建议

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>

    <style>
        .container { 
            width: 610px; 
            overflow: hidden; 
            position: relative; 
            height: 300px;
        }
        .con { position:absolute; left:0; width:2000px}
        .box { float:left; width:200px; 
               height:200px; margin-right:5px; 
               background:#F00; margin-top:5px;}
    </style>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(function (){
            $('a').click(function (){
                alert($('.box').width())
            })
        })
    </script>
</head>

<body>
    <div class="container">
        <div class="con">
            <div class="box">df</div>
            <div class="box">adfa</div>
            <div class="box">asdf</div>
        </div>
    </div>
    <a href="#">click</a>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:08:17.267

This single expression using [`reduce`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce) will return the total width:

```
var total = $('.box').get().reduce(function(prev, current, index, array) {
    return prev + current.offsetWidth;
}, 0); 
```

Use `$(current).width()` or related variants if the DOM `.offsetWidth` isn't the metric you want.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:06:45.290

您可以使用循环遍历每个`.box`元素`.each()`并将宽度添加到变量：

```
$('a').click(function(ev){
    var totalWidth = 0;
    $('.box').each(function(i, el){
        totalWidth += $(this).width();
    }
    alert(totalWidth);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:03:55.783

对于循环，您可以将 each() 与 jQuery 一起使用：http: [//api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

类似的东西：

```
$('a').click(function (){
    $('div').each(function (){
        //TO DO FOR EACH DIV ON YOUR PAGE
    });
}); 
```

# css - HTML/CSS - div 中的图像

> ID：11523044
> 
> 赞同：0
> 
> 时间：2012-07-17T13:00:59.020
> 
> 标签：css, html, toggle

我正在向我的页面添加折叠功能，到目前为止一切正常。

我使用我的标题文本（h2）来切换功能，如下所示：

```
 <a href="javascript:animatedcollapse.toggle('collapse_002')"><h2>Header 1</h2></a> 
```

* * *

现在，我想在开头添加一张图片。折叠时，它是一个加号图像。打开后，它变成了一个减号图像。

我该怎么做呢？我想我已经弄清楚了 css 部分和函数（下面的代码），但只是不确定如何让图像显示。

* * *

```
.toggleButton{
display:inline;
background-image:url(Special_images/pluss3.gif);
background-size:auto;
background-repeat:no-repeat;
}

.toggleButton.open{
display:inline;
background-image:url(Special_images/minus.gif);
background-size:auto;
background-repeat:no-repeat;
} 
```

* * *

```
<!-- SCRIPT FOR TOGGLE BUTTONS -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>
$(document).ready(function(){
$('.toggleButton').click(function(){
    $(this).toggleClass("open");
});
});

</script>
<!-- END --> 
```

* * *

我现在正在尝试的，那不起作用：

```
<a href="javascript:animatedcollapse.toggle('collapse_001')"><div class="toggleButton"><h2>Header 1</h2></div></a> 
```

* * *

* * *

非常感谢，Stian Berg Larsen

编辑：

这是折叠的 div 之一：

```
<a href="javascript:animatedcollapse.toggle('collapse_002')"><h2>The Operator in Focus</h2></a>
<div id="collapse_002">
<p>content goes here.. Bla bla bla bla....</p>
</div> 
```

所以这可以正常工作。当您单击标题时，div 会滑出，在 div“collapse_002”中显示文本。

现在我想要的是在标题前面显示一个图像，如果 div 是打开或关闭的，则显示一个加号或减号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:26:50.927

我为你做了一个非常简单的图像交换，使用切换，添加开放类..基本上只是交换背景图像：

[http://jsfiddle.net/934bA/](http://jsfiddle.net/934bA/)

**请忽略临时背景网址和大小*

让我知道是否还有其他事情。

我希望这能给你基本的理解，而且它非常简单......它基本上只是一个类的添加和一个类的删除=切换。

**分解 ：**

**html**

```
<div class="toggleButton"><h2>Header 1</h2></div> 
```

**脚本**

```
$(function() {
    $('.toggleButton').click(function() {
        $(this).toggleClass("open");
    });
}); 
```

**CSS**

```
.toggleButton{
    display:inline;
    background-image:url(http://upload.wikimedia.org/wikipedia/en/3/35/Plus_sign.jpg);
    background-size:20%;
    background-repeat:no-repeat;
    background-position:left;
    padding:20px;
}

.open{
    background-image:url(http://userserve-ak.last.fm/serve/252/3850515.jpg);
}

h2 {margin:0px; padding:0px;display:inline;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:12:43.983

```
p {
margin:0;
padding-left:16px;
float:left;
background-image:url(images/add.png);
background-repeat:no-repeat;      
    }

p.down {
float:left;
padding-left:16px;
background-image:url(images/delete.png);
background-repeat:no-repeat;
    }
.button         
{
vertical-align:middle;
 } 
.question div   
{
border:1px solid #CC0000;
background-color:#efefef;
width:580px;
margin-top:5px;
font-size:12px;
padding:5px;
clear:left;
 } 
.question div a 
{
padding-left:20px;
background: transparent url(images/world_go.png) no-repeat center left;
text-decoration:none;
 } /

$(document).ready(function() {
  $('div.question')
    .children('div').hide().end()
    .children('p').click(function(){
      $(this).toggleClass('down').next().slideToggle("slow");
    });
});

<div class="question">

<p class="button">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. &nbsp;</p>

<div>

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. 

<ul>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna.  </li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. </li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. </li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. </li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. </li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. </li>
<li>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu felis vitae dui faucibus pretium. Proin gravida, nisi vitae facilisis egestas, arcu mi adipiscing magna. </li>
</ul>

</div>
</div> 
```

这是段落前面带有加减号的切换，下面段落的折叠切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:14:11.840

尝试背景位置：0 0；?

# android - OpenGL中的Android位图处理

> ID：11523047
> 
> 赞同：0
> 
> 时间：2012-07-17T13:01:11.997
> 
> 标签：android, opengl-es

我找到[了这篇文章](https://stackoverflow.com/questions/5368774/make-certain-area-of-bitmap-transparent-on-touch)，但是对于流畅的动态壁纸来说太慢了。是否可以用 OpenGL 做同样的事情，应该更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:18:10.467

使用 OpenGL 绝对是可能的。您将加载您的两个纹理，然后使用片段着色器决定在每个像素的基础上显示哪个。实际的 OpenGL 部分不会太复杂，因为您只是在绘制一个屏幕对齐的四边形。对于如何编写着色器的想法，我会看[这里](http://www.lighthouse3d.com/tutorials/glsl-tutorial/multi-texture/)。

至于哪个会更快很难说，尽管我认为 OpengGL 会更快。

# asp.net - 带有分页、排序和搜索的网格（视图）：如何使用资源提供程序

> ID：11523048
> 
> 赞同：3
> 
> 时间：2012-07-17T13:01:27.400
> 
> 标签：asp.net, sql-server, entity-framework, translation, multilingual

我们的数据网格存在架构问题。网格支持使用包含上述所有参数的 linq2entity 查询进行搜索、分页和排序。

在某些页面上，网格不应显示来自数据库的内容（例如列“名称”），而是由资源提供者加载的已翻译资源。

我们的资源提供者从数据库中获取翻译并将它们缓存到应用程序缓存中，以避免不必要地访问数据库。

此时，我们有以下几种可能：

1.  **在数据库上没有搜索、排序和分页**，因此加载所有行，然后从资源提供程序加载翻译，然后在应用程序中进行搜索、排序和分页。
    *性能不好，因为数据库很大*

2.  **对数据库进行搜索、排序和分页**，然后加载资源以获取结果。
    *显示的值将与搜索和排序配置不匹配*

3.  **在 linq 查询中**直接从数据库中获取资源。**
    *无法使用资源提供者缓存。与资源提供者文本的加入将非常糟糕和缓慢***

 **每种可能性都很糟糕，但我想不出另一种解决方案。有什么好的建议吗？这些问题在其他软件中是如何解决的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:46:53.450

您可以通过从数据库中获取相关的过滤记录并将其保存在`ViewState`.

## 如何提高性能？

您可以将**[JSON/Page 方法](http://encosia.com/why-aspnet-ajax-updatepanels-are-dangerous/)**用于`Database Callings`. 我将通过一个示例向您解释。

**[单击此处查看使用 JSON 的 GridView 绑定的代码](http://weblogs.asp.net/dwahlin/archive/2009/05/03/using-jquery-with-client-side-data-binding-templates.aspx)**

## 用 JSON 标记

![在此处输入图像描述](../Images/0fff1e46881e3313ee70c2d764de221c.png)

我正在从客户端调用方法背后的代码

* * *

## 代码背后

![在此处输入图像描述](../Images/c64bf20344308e105c071c191c561024.png)

## 输出

![在此处输入图像描述](../Images/e08bfeb9590eec29806dab0d04b9ebd4.png)

**[单击此处检查更新面板的输出](http://weblogs.asp.net/dwahlin/archive/2009/05/03/using-jquery-with-client-side-data-binding-templates.aspx)**

* * *

**[如果应用程序占用太多内存，那么您需要像 Red Gate Ants Memory Profiler 这样的 Doctor。单击此处查看有关它的更多详细信息](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)**

![在此处输入图像描述](../Images/719b34993a1b872afdabb61814be38ad.png)

* * *

确保使用`Using`语句来避免`Memory Out of Exceptions`

```
using (SqlConnection connection = new SqlConnection()) 
{     
      connection.Open();  
      //Also for SqlCommand... Sample code...
      using (SqlCommand cmd = new SqlCommand()) 
      { 
      }    
      using (SqlTransaction transaction = connection.BeginTransaction())     
      {         
            transaction.Commit();     
      } 
} 
```

* * *

你知道`Teleric Grid`吗？它首先从数据库中加载所有记录并保存在`Cache`. 为了做到这一点，您必须使用`Paging`并且`Disposing`对象是强制性的。`Teleric Grid`在 中显示这些记录`Paging`。因此，您可以避免渲染问题以摆脱一次显示所有记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:14:44.103

我不能正确理解你的问题，但是如果你想对翻译资源进行所有操作，你必须将翻译资源存储在数据库中，然后将它们放入会话对象并对其应用过滤器，如果它是表格或列表的形式，然后给出源到网格，它必须配置为与从会话对象过滤的翻译资源一起工作。**

# java - 使用 ExecutorService 时的堆空间问题

> ID：11523049
> 
> 赞同：2
> 
> 时间：2012-07-17T13:01:31.657
> 
> 标签：java, multithreading, heap-memory, executorservice

我对使用 Java 很陌生。所以，也许我的问题将是非常基本的。我为此提前道歉。

我需要执行许多昂贵的重复计算（主要是特征值分解和乘以巨大的矩阵）。由于所有重复都是独立的，我决定同时进行。因此，我为此使用 ExecutorService。

我的问题是线程内存不足，即使我使用 -Xms3000m -Xmx3000m 启动作业，或者我使用 newSingleThreadExecutor()。我以为我有内存泄漏，但我的代码的串行版本运行良好，只有 80m 的堆空间。更奇怪的是（至少对我来说），当我使用 newFixedThreadPool() 时，在第一个线程 (~15) 崩溃后，计算工作并且使用的堆开始下降（使用 NetBeans 分析）。

我也试过 executor.execute() 和 executor.submit() 没有区别。

我在我正在使用的代码下面发布：

```
 ExecutorService executor = Executors.newFixedThreadPool(12);       

    double totalMaximumLikelihood = 0.0;
    Iterator iterator1 = myAlignment.columnsMap.keySet().iterator();
    while (iterator1.hasNext()) {
        boolean pairToBeCalculated = false;
        ArrayList<String> myKey1 = (ArrayList) iterator1.next();

        Iterator iterator2 = myAlignment.columnsMap.keySet().iterator();
        while (iterator2.hasNext()) {
            ArrayList myKey2 = (ArrayList) iterator2.next();

            if (pairToBeCalculated == true) {

                Runnable worker = new MySingleCoevolutionRunnable(myKnotsInNewickTree, queryNode, myAlignment, myMeanPosteriorRates, myKey1, myKey2);
                //executor.submit(worker);
                executor.execute(worker);

            } else if (myKey1.equals(myKey2)) {
                pairToBeCalculated = true;
            }
        }

    }
    executor.shutdown(); 
```

编辑：看来我犯了一个新手错误。当线程被调度时，runnable 的构造函数为每个线程创建一个模型，需要大量的内存。在一些崩溃之后，有足够的内存来运行其余的计划线程。

# opengl - 笔记本电脑上 1366x768 res 的颜色可见性测试失败

> ID：11523051
> 
> 赞同：2
> 
> 时间：2012-07-17T13:01:35.523
> 
> 标签：opengl

我正在使用 OpenGl v.1.0.1 制作一个简单的 CAD 3D 图形应用程序（是的，在所有使用 Windows 操作系统的机器上都可以使用虚拟的旧版 OpenGL）。

为了加快渲染过程，我使用了一个常见的颜色可见性测试：在渲染最终图像之前，我首先关闭所有 OpenGL 状态（照明、面部剔除等，但不是深度测试）并渲染所有颜色略有不同的对象一种纹理。

之后，我检查纹理的颜色，最后为颜色出现在纹理上的元素设置可见性标志。

这通常适用于我的桌面，默认分辨率为 1600x1200。但是，当我在默认分辨率为 1366x768 的笔记本电脑上测试我的应用程序时，我在该过程中遇到了一些不匹配的问题。结果是最终图像总是带有“疤痕”（它就像一条带，通常在台式机上通过可见性测试的颜色位在笔记本电脑上却没有通过）。

什么会导致这样的问题？

更新。两张图片来说明问题：[1360x768 res（台式机）](http://imageshack.us/photo/my-images/855/1360.png/)和[1366x768 res（笔记本电脑）](http://imageshack.us/photo/my-images/560/1366e.png/)

更新。我读取位域并将颜色转换为纹理上出现的我应该渲染的元素的编号的方法的源代码：

```
for (long iY = m_iColorBuffY - viewport[3]; iY < m_iColorBuffY; ++iY) {
    for (long iX = 0; iX < viewport[2]; ++iX) {
        long iOffset = (iY*m_iColorBuffX + iX)*iColorBytes;
        long CurColor = 0;
        for (long iColorByte = 0; iColorByte < iColorBytes; ++iColorByte) {     
            BYTE color = *((BYTE*)m_pColorBufferEntry + iOffset + iColorByte);  
            CurColor += (color<<(iColorBytes - 1 - iColorByte)*8);
        }
        if(!CurColor) continue;
        long Index = CModelWorldRenderer::ConvertFictiveColorToIndex(mc,CurColor);
        switch (mc) {
         case MC_FE: {
          IElement^ pCurElement = pModel->getElement(Index);
          if (pCurElement) pCurElement->setFlag(IElement::e_ElFlag::EEF_Visible);
          m_pObjectsVisibilityMap->put_ObjectIndex(
              false,
              Index,
              iX,
              viewport[3] - (iY - viewport[1] + 1));
         }
         break;
         case MC_NODE: {
          if (Index < ndSize) m_NodesVisibilityFlags[Index] |= NRF_VISIBLE;
         }
         break;
        }
    } 
```

*m_pColorBufferEntry - 指向为位图分配的内存开头的指针。

# java - JDK7 的开源代码覆盖率库？

> ID：11523058
> 
> 赞同：3
> 
> 时间：2012-07-17T13:01:52.140
> 
> 标签：java, code-coverage, java-7

现在看来，Cobertura 和 Emma 都已经过时了。它们无法处理 Java 7 字节码。使用 Cobertura 运行仪器测试会导致验证错误

```
java.lang.VerifyError: Expecting a stackmap frame at branch target 41 in method ..... 
```

真的很遗憾，因为 Cobertura 真的很酷并且得到了很好的支持。对于 Java 6 字节代码就是这样。但现在我正在寻找替代品。最好同时支持 Maven 和 Jenkins。

这里有没有人使用 Java 7 字节代码的代码覆盖库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:04:27.850

我相信[Jacoco](http://www.eclemma.org/jacoco/)会完成这项工作

# c# - 使用 C# 在 Metro 应用程序中进行基本身份验证

> ID：11523060
> 
> 赞同：-8
> 
> 时间：2012-07-17T13:01:57.960
> 
> 标签：c#, windows-8, windows-runtime

我正在使用 C# 开发 Metroapp，我一直坚持从我的应用程序调用 Web 服务，它需要用户名和密码才能访问它（我有）所以，谁能解释我如何做 Basic Auth 来制作 Web 服务称呼。任何带有示例的链接或文章都是可观的。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:08:25.670

我假设您正在谈论基本 Http 身份验证，如果您使用 HttpClient 进行 Web 服务调用，那么您可以使用以下代码启用设置基本身份验证标头。

```
var request = new HttpRequestMessage(HttpMethod.Get, uri);
var token = Convert.ToBase64String(Encoding.UTF8.GetBytes(String.Format("{0}:{1}", username, password)));

request.Headers.Authorization = new AuthenticationHeaderValue("Basic", token); 
```

然而，最简单（也是最干净）的方法：

```
var handler = new HttpClientHandler {
    Credentials = new NetworkCredential(username, password)
};

var httpClient = new HttpClient(handler);

var response = await httpClient.GetAsync(uriString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T18:12:42.357

我假设您指的是 OAuth，Metro 中的实现实际上并不像 Web Authentication WinRT API 那样难。但是正如对您的问题发表评论的开发人员所建议的那样，您应该好好阅读如果这个话题对你来说是新的。[也许从这里开始，看看文档。](http://oauth.net/)

Pluralsight 有很多关于 WinRT 和 Web 身份验证主题的精彩视频。查看 Windows 8 --> Windows 8 Metro Connected Apps --> Accessing HTTP Services --> WebAuthBroker[直接链接](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents/win8connectedapps)

[至于示例应用程序，您可以在此处找到。](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

[这是来自j MSDN的一篇文章](http://msdn.microsoft.com/en-US/library/windows/apps/xaml/Hh465283)

祝你好运！

# mobile - Icenium的经验和建议

> ID：11523064
> 
> 赞同：5
> 
> 时间：2012-07-17T13:02:07.023
> 
> 标签：mobile

我必须开发一个可在 Android 和 iOS 上使用的移动应用程序。

我对 Android 或 iOS 的原生开发没有任何经验，所以我决定使用一些现有的平台，如 PhoneGap、Titanium 或[Icenium](http://www.icenium.com/)（这些平台为我提供了所有必要的要求）。

我看到 Icenium 需要一个邀请码才能浏览文档。

我想问的是：有人玩过Icenium吗？关于这个基于云的平台有什么建议吗？性能呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T02:32:17.470

我一直在与 Icenium 合作，我可以说到目前为止它很有趣。它实际上只是一个允许您使用 Cordova (PhoneGap) 构建应用程序的 IDE。有两种 IDE——一种是基于浏览器的，一种是 Windows 桌面应用程序。本机桌面应用程序功能更多，用户体验更好。那里有一些诗意的正义，如果你正在寻找它:)

到目前为止，它肯定还很年轻。到目前为止，还不存在对 PhoneGap 插件之类的支持。我似乎也无法让应用程序在真实设备上运行，但这些是 beta 错误，我希望它们能够被消除。

尽管基于云的方法很好，因为我不必担心使用多个 IDE，但您会失去很多开发方式的自由。例如，我喜欢使用 CoffeeScript，但不支持构建、编译、创建新的 CS 文件等。将来可能吗？

由于它实际上只是一个用于开发 Cordova (PhoneGap) 应用程序的 IDE，因此它与 Cordova 没有不同的平台。它只是使开发更加精简。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T07:42:21.190

我不得不说，从我个人的经验来看，Icenium 很慢。他们将其作为 html5 应用程序进行营销，就像原生应用程序一样工作，但事实并非如此。你可以让它看起来像一个原生应用程序，你可以用原生的意识形态来开发它，让用户体验它就像它是原生的一样，但是它太慢了。

这也很奇怪，一家基于微软技术的公司（即telerik）基本上已经将自己从微软堆栈中移除了icenium。我并不是说这不好，微软本身需要做更多的事情来吸引开发者加入它的平台。这真的很奇怪，因为大多数 Telerik 客户都使用 mircosoft 堆栈，包括非常重要的 Visual Studio。每个人都知道 VS 他们有适合他们开发风格的自定义插件，现在我们必须学习和使用一个新的 IDE，到目前为止，在我看来甚至不接近任何标准。一个主要优点是您可以部署到设备上。

添加 Phonegap 或任何其他基于移动设备的框架可以在任何情况下完成。它也根本不提供对微软设备的支持。这完全删除了似乎应该为其创建的整个跨平台环境。

如果您不是为微软开发，我想它很好，但我没有看到任何其他优势，然后它可以部署到设备进行测试。如果您有在 MS 堆栈上工作的客户端.. 我根本不推荐这个。只需启动 VS 并像以前一样进行开发，然后将这些库包含在文件系统中即可。

# wordpress - wordpress 条件语句

> ID：11523066
> 
> 赞同：0
> 
> 时间：2012-07-17T13:02:13.960
> 
> 标签：wordpress, widget, parent-child, conditional-statements

我试图让这个逻辑在 WordPress 小部件逻辑中工作：如果它不是主页或不是第 86 页，或者如果它是第 86 页的子项，则显示小部件。

```
!is_home ||  !is_page('86') ||  !is_child('86') 
```

我已将此函数添加到functions.php：

```
function is_child($parent) {
  global $post;
  return $post->post_parent == $parent;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:17:14.630

试试这个：

```
(!is_home() && !is_page(86) &&  !is_child(86)) 
```

`is_home()`是一个函数。并检查我建议使用整数而不是字符串的页面。整体`( )`只是一种安全措施。也许你可以把它们排除在外，我不确定。未测试。

# php - 从 MySQL 查询到插入查询的 PDO 数组

> ID：11523069
> 
> 赞同：0
> 
> 时间：2012-07-17T13:02:22.563
> 
> 标签：php, mysql, pdo

我有一个从以下 PDO 获得的数组：

```
$sqlQry = "SELECT Devices.dID FROM Friends LEFT OUTER JOIN Devices ON Friends.fID = Devices.dUID WHERE Devices.dID IS NOT NULL GROUP BY Devices.dID";
$db = getConnection();
$sth = $db->prepare($sqlQry);
$sth->execute();
print("Fetch all of the remaining rows in the result set:\n");
$result = $sth->fetchAll();
print_r($result); 
```

数组返回：

```
Array ( [0] => Array ([dID] => 2[0] => 2 ) [1] => Array ( [dID] => 3 [0] => 3 )) 
```

对于每个 dID 值，我需要运行一个插入查询，该查询采用 dID 并将其插入到具有外部值的同一数据库中的表中。

```
$sqlIns = "INSERT INTO messages (dID, message, status") VALUES (?,?,?); 
```

消息和状态将保存在一个变量中

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:04:47.223

您可以在一个查询中完成所有操作。请参阅文档：[INSERT ... SELECT 语法](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

```
INSERT into messages (dID, message, status) 
SELECT Devices.dID, ?, ? 
FROM Friends 
LEFT OUTER JOIN Devices ON Friends.fID = Devices.dUID 
WHERE Devices.dID IS NOT NULL 
GROUP BY Devices.dID 
```

PDO 看起来像这样：

```
// database connection
$conn = new PDO(...);

// new data
$message = 'xxx';
$status = 'yyy';

// query
$sql = "INSERT into messages (dID, message, status) 
    SELECT Devices.dID, ?, ? 
    FROM Friends 
    LEFT OUTER JOIN Devices ON Friends.fID = Devices.dUID 
    WHERE Devices.dID IS NOT NULL 
    GROUP BY Devices.dID";
$q = $conn->prepare($sql);
$q->execute(array($message,$status)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:06:01.733

```
foreach( $result as $idValue ) {
    $sqlIns = "INSERT INTO messages (dID, message, status) VALUES ($idValue[0],?,?)";
} 
```

这应该够了吧。虽然我不确定你为什么要使用`fetchAll`.

# model-view-controller - Symfony2 中的业务逻辑应该放在哪里？

> ID：11523072
> 
> 赞同：24
> 
> 时间：2012-07-17T13:02:30.177
> 
> 标签：model-view-controller, symfony

在阅读了很多帖子和 Stack Overflow 资源后，我仍然对著名的问题“业务逻辑放在哪里？”有些问题。阅读[StackOverflow Question](https://stackoverflow.com/questions/9440519/symfony2-mvc-where-does-my-code-belong)和[A Blog Post](http://www.iamproblematic.com/demystifying-symfony2-controllers/)，我相信我已经很好地理解了代码分离的问题。

假设我有一个 Web 表单，您可以在其中添加将添加到数据库的用户。此示例涉及以下概念：

*   形式
*   控制器
*   实体
*   服务
*   存储库

如果我没有错过什么，您必须创建一个具有一些属性、getter、setter 等的实体，以使其持久保存到数据库中。如果您想获取或编写该实体，您将使用`entityManager`and，对于“非规范”查询`entityRepository`（这是您可以适合您的“查询语言”查询的地方）。

现在您必须为所有业务逻辑定义一个服务（即一个带有“惰性”实例的 PHP 类）；这是放置“重”代码的地方。一旦您将服务记录到您的应用程序中，您几乎可以在任何地方使用它，这涉及代码重用等。

当您渲染和发布表单时，您将它与您的实体绑定（当然还有约束），并使用上面定义的所有概念将所有内容放在一起。

所以，“老我”会这样写控制器的动作：

```
public function indexAction(Request $request)
    {
        $modified = False;
        if($request->getMethod() == 'POST'){ // submit, so have to modify data
            $em = $this->getDoctrine()->getEntityManager();
            $parameters = $request->request->get('User'); //form retriving
            $id = $parameters['id'];
            $user = $em->getRepository('SestanteUserBundle:User')->find($id);
            $form = $this->createForm(new UserType(), $user);
            $form->bindRequest($request);
            $em->flush();
            $modified = True;
        }

        $users = $this->getDoctrine()->getEntityManager()->getRepository('SestanteUserBundle:User')->findAll();
        return $this->render('SestanteUserBundle:Default:index.html.twig',array('users'=>$users));
    } 
```

“New-me”以这种方式重构了代码：

```
 public function indexAction(Request $request)
    {
        $um = $this->get('user_manager');
        $modified = False;
        if($request->getMethod() == 'POST'){ // submit, so have to modify data
            $user = $um->getUserById($request,False);
            $form = $this->createForm(new UserType(), $user);
            $form->bindRequest($request);
            $um->flushAll();
            $modified = True; 
        }
        $users = $um->showAllUser();
        return $this->render('SestanteUserBundle:Default:index.html.twig',array('users'=>$users));
    } 
```

哪里`$um`是自定义服务，其中存储了从 #1 代码段到 #2 代码段您看不到的所有代码。

所以，这是我的问题：

1.  我是否最终了解了 symfony2 和 {M}VC 的本质？
2.  重构好不好？如果没有，有什么更好的方法？

**Post Scriptum**：我知道我可以使用 FOSUserBundle 进行用户存储和身份验证，但这是一个自学如何使用 Symfony 的基本示例。此外，为了工作，我的服务被注入了 ORM.Doctrine.* （只是为谁读过这个问题而感到困惑）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:27:26.187

关于将业务逻辑放在何处有两种主要方法：SOA 架构和领域驱动架构。如果您的业务对象（实体）乏善可陈，我的意思是，如果它们没有业务逻辑，只有 getter 和 setter，那么您会更喜欢 SOA。但是，如果您在业务对象中构建业务逻辑，那么您会更喜欢另一个。Adam Bien 讨论了这些方法：

使用 Java EE 6 进行领域驱动设计：[http ://www.javaworld.com/javaworld/jw-05-2009/jw-05-domain-driven-design.html](http://www.javaworld.com/javaworld/jw-05-2009/jw-05-domain-driven-design.html)

使用 Java EE 6 的精益服务架构：[http ://www.javaworld.com/javaworld/jw-04-2009/jw-04-lean-soa-with-javaee6.html](http://www.javaworld.com/javaworld/jw-04-2009/jw-04-lean-soa-with-javaee6.html)

它是 Java，但您可以理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-15T19:37:28.337

> 重构好不好？如果没有，有什么更好的方法？

**最佳框架实践之一是使用参数转换器直接从用户请求调用实体**。

Symfony 文档中的示例：

```
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\ParamConverter;

/**
 * @Route("/blog/{id}")
 * @ParamConverter("post", class="SensioBlogBundle:Post")
 */
public function showAction(Post $post)
{

} 
```

**有关参数转换器的更多信息**：

[http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-11T07:45:43.953

Robert C. Martin（清洁代码的人）在他的新书[清洁架构](https://www.youtube.com/watch?v=o_TH-Y78tt4)中说，你应该把你的业务逻辑独立于你的框架，因为框架会随着时间而改变。

所以你可以把你的业务逻辑放在一个单独的文件夹中，比如 App/Core 或 App/Manager 并避免这里的 symfony 类的继承：

```
<?php

namespace App\Core;

class UserManager extends BaseManager implements ManagerInterface
{

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-15T19:03:27.720

我意识到这是一个老问题，但由于我有类似的问题，我想分享我的经验，希望它可能对某人有所帮助。我的建议是引入命令总线并开始使用命令模式。工作流程几乎是这样的：

1.  控制器接收请求并将其转换为命令（可能会使用表单来执行此操作，并且您可能需要一些 DTO 将数据从一层干净地移动到另一层）
2.  控制器将该命令发送到命令总线
3.  命令总线查找处理程序并处理命令
4.  然后控制器可以根据它的需要生成响应。

基于您的示例的一些代码：

```
public function indexAction(Request $request)
{
    $command = new CreateUser();
    $form = $this->createForm(new CreateUserFormType(), $command);
    $form->submit($request);
    if ($form->isValid()) {
        $this->get('command_bus')->handle();
    }
    return $this->render(
        'SestanteUserBundle:Default:index.html.twig', 
        ['users' => $this->get('user_manager')->showAllUser()]
    );
} 
```

然后您的命令处理程序（实际上是服务层的一部分）将负责创建用户。这有几个优点：

*   您的控制器不太可能变得臃肿，因为它们几乎没有逻辑
*   您的业​​务逻辑与应用程序 (HTTP) 逻辑分离
*   您的代码变得更具可测试性
*   您可以重用相同的命令处理程序，但数据来自不同的端口（例如 CLI）

还有一些缺点：

*   应用此模式所需的类数量更多，并且通常与应用程序公开的功能数量成线性关系
*   有更多的移动部件，而且更难推理，因此团队的学习曲线可能会更陡峭。

几个值得注意的命令总线：

[https://github.com/thephpleague/tactician](https://github.com/thephpleague/tactician) [https://github.com/SimpleBus/MessageBus](https://github.com/SimpleBus/MessageBus)

# html - 将 div 与显示水平对齐：table-cell

> ID：11523075
> 
> 赞同：5
> 
> 时间：2012-07-17T13:02:42.040
> 
> 标签：html, css, css-tables

我有一张桌子，里面有酒吧。我`display: table-cell`用来对齐底部的内容。问题是容器`div`s 不再水平对齐在它们对应`TH`的 s 上（它们的宽度没有设置）

[这是一个显示问题的jsFiddle](http://jsfiddle.net/gTWQ3/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:01:03.037

### 问题

使用 - 属性时的问题`table-cell`在于它的行为类似于“真正的表格单元格”，而不再像`block`- 或 -`inline`元素。当父元素`table-row`和`table`缺失时，它们是匿名生成的。所以盒子里的东西都会像松动一样`margin`。

您可以在此处阅读有关此内容的更多信息：“[可视格式化模型中的表格](http://www.w3.org/TR/CSS2/tables.html#model)”

* * *

我稍微重建了您的 HTML 结构，这似乎工作正常：

### 演示

[http://jsfiddle.net/insertusernamehere/XPSQG/](http://jsfiddle.net/insertusernamehere/XPSQG/)

### CSS

```
<style>

    #graph th {
        background:         red;
    }

    #graph td {
        min-width:          30px;
        margin:             0;
        padding:            0;
        color:              #222222;
    }

    #graph div {
        display:            block;
        position:           relative;
        margin:             0 auto;
        width:              30px;
        max-width:          30px;
        height:             100px;
        background-color:   #EFEFEF;
        border:             1px solid #000000;
    }

    #graph span {
        position:           absolute;
        left:               0;
        top:                -20px;
        width:              100%;
        color:              #222222;
        font-size:          16px;
        line-height:        16px;
        text-align:         center;
    }

    #graph p.color {
        position:           absolute;
        right:              0;
        bottom:             0px;
        width:              100%;
        margin:             0;
        color:              #222222;
    }

    #graph p.color.c1 {
        background:         #0f0;
    }

    #graph p.color.c2 {
        background:         blue;
    }​

</style> 
```

### html

```
<div id="graph">
    <table>
        <tr>
            <td><div><p class="color c1" style="height:20px;"><span>1</span></p></div></td>
            <td><div><p class="color c2" style="height:30%;"><span>2</span></p></div></td>
            <td><div><p class="color c1" style="height:40%;"><span>3</span></p></div></td>
            <td><div><p class="color c2" style="height:50%;"><span>4</span></p></div></td>
        </tr>
        <tr>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>Some long value</th>
        </tr>
    </table>
</div> 
```

### 这个怎么运作

它基本上将列的内容（绿色百分比`<p>`标签）放在底部。要将数字**放在上面，**您可以轻松地将它们放在`<p>`-tag 中，然后再次将它们“移出”。这是由这部分完成的：

```
top:                -20px;
font-size:          16px;
line-height:        16px; 
```

这表示行高和字体大小为 16px。`top: -16px`将其完全移出就足够了 - 额外的 4px 添加了一个不错的填充。:)

希望你能明白。

### 笔记

您在某处使用了此属性：

```
countunit="0_1_0" 
```

由于这不是有效的 HTML，请使用`data`-prefix：

```
data-countunit="0_1_0" 
```

这是有效的 HTML5，它也不会在旧浏览器中造成任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T09:33:21.737

有一个技巧可以让一个元素水平居中 display: table-cell 在另一个元素中。

假设周围元素具有 .table-wrapper 类，而内部元素具有 .table-cell。使用以下 CSS：

```
.table-wrapper {
  display: table;
  width: 100%;
  text-align: center;
}
.table-cell {
  vertical-align: middle;
} 
```

这样，您可以在 .table-cell 中垂直和水平地居中文本或任何您想要的内容。

# iphone - 如何解析json中的数据

> ID：11523076
> 
> 赞同：0
> 
> 时间：2012-07-17T13:02:44.667
> 
> 标签：iphone, json, parsing

我是 iPhone 新手。我正在从服务器接收一些数据，那么如何在 JSON 中解析这些数据。这里我想要解析JSON后所有人的名字。下面怎么可能是我从服务器接收数据？

```
{   "data":
    [{      "name":"Ashresh Devisetti","id":"1018103475"
    },{     "name":"Atluri Suhas","id":"1033093758"
    },{     "name":"Tejaswi Kumar","id":"1119007960"
    },{     "name":"Vineel MSatian","id":"1126218004"
    },{     "name":"Somesh Nookala","id":"1135608183"
    },{     "name":"Sriram Poduri","id":"1153984821"
    },{     "name":"Somesh Nookala","id":"1279615172"
    },{     "name":"Ravi Kanth","id":"1392429155"
    },{     "name":"Manikanta Swaroop","id":"1625515823"
    },{     "name":"Amulya Marivada","id":"1704204546"
    },{     "name":"Naresh Kumar Geddam","id":"1739192069"
    },{     "name":"Chaitanya Chaitu","id":"1749870844"
    },{     "name":"Cheruku Swamy","id":"1791647314"
    },{     "name":"Ramya Naidu","id":"1848155470"
    },{     "name":"Sri Divya Chenna","id":"100000032711858"
    },{     "name":"Sandeepkumar Katakam","id":"100000045911895"
    },{     "name":"Rupendra Kumar M","id":"100000050422004"
    },{     "name":"Sruthi Gollapudi","id":"100000055991847"
    },{     "name":"Ramanamurthy Saripalli","id":"100000073436389"
    },{     "name":"Ravi Teja","id":"100000085284134"
    },{     "name":"Sasank Pisipati","id":"100000183890281"
    },{     "name":"Sneha Yadla","id":"100000266481511"
    },{     "name":"Teja Bhupatiraju","id":"100000267197072"
    },{     "name":"Anisha Kosuri","id":"100000389025595"
    },{     "name":"Arun Kumar","id":"100000389565527"
    },{     "name":"Rohini Krishna","id":"100000545110674"
    },{     "name":"Lalitha Satyavolu","id":"100000545503024"
    },{     "name":"Ralli Raghu","id":"100000548726955"
    },{     "name":"Mansoor Sha","id":"100000560237166"
    },{     "name":"Tarun Medisetti","id":"100000612310803"
    },{     "name":"Anand Sathivada","id":"100000636872860"
    },{     "name":"Siva Prasad Rayapudi","id":"100000684818891"
    },{     "name":"Surekha Koruprolu","id":"100000704491702"
    },{     "name":"Sam Ernesto","id":"100000722715489"
    },{     "name":"Kalyan Kuchipudi","id":"100000764050697"
    },{     "name":"Sai Sandeep","id":"100000775011879"
    },{     "name":"Uma Kethavarapu","id":"100000777379251"
    },{     "name":"Lokesh Varma","id":"100000862073560"
    },{     "name":"Anusha Prakash","id":"100000916534219"
    },{     "name":"Tendu Chandu","id":"100001021718095"
    },{     "name":"Surendra Varma","id":"100001030129883"
    },{     "name":"Shiv Charan Yedavalli","id":"100001104018801"
    },{     "name":"Surya Sri Avinash","id":"100001261348651"
    },{     "name":"Sandeep Choppala","id":"100001381957897"
    },{     "name":"Sandeep Vaitla","id":"100001440817792"
    },{     "name":"Aadi Narayana","id":"100001453941516"
    },{     "name":"Brahmani Achanta","id":"100001526798068"
    },{     "name":"Prasad Pothala","id":"100001531038570"
    },{     "name":"Harsha Vardhan G","id":"100001547227974"
    },{     "name":"Satish Chowdary","id":"100001553950656"
    },{     "name":"Pramod Dsrb","id":"100001579793628"
    },{     "name":"Sree Ram","id":"100001582161546"
    },{     "name":"Ratnadeepthi Allakki","id":"100001607126997"
    },{     "name":"Bobba Satish Kumar","id":"100001623868422"
    },{     "name":"Sudheera Indugula","id":"100001628983788"
    },{     "name":"Phani Allada","id":"100001665690488"
    },{     "name":"Naveen Kumar","id":"100001695204621"
    },{     "name":"Akula Sundar Kumar","id":"100001722776059"
    },{     "name":"Karthik Varma Pakalapati","id":"100001754077975"
    },{     "name":"Sriram Valluri","id":"100001766246694"
    },{     "name":"Ramya Sindhuri","id":"100001839785670"
    },{     "name":"Rajendra Rudra","id":"100001877367454"
    },{     "name":"Anusha Kola","id":"100001927730228"
    },{     "name":"Gowtham Raj Chilakapati","id":"100001968713154"
    },{     "name":"Prasad Durga","id":"100002082589163"
    },{     "name":"Padmini Sudheera Tatiraju","id":"100002101582586"
    },{     "name":"Murali Nadh","id":"100002150494601"
    },{     "name":"Harish Harshu","id":"100002153956398"
    },{     "name":"Naveen Kumar","id":"100002223484093"
    },{     "name":"Satish Kumar","id":"100002241855098"
    },{     "name":"Siva Kumar","id":"100002316574080"
    },{     "name":"Harish Kalidindi","id":"100002350209493"
    },{     "name":"Ram Babu Yadamareddy","id":"100002350852565"
    },{     "name":"Aruna Sree","id":"100002394713943"
    },{     "name":"Siva Prasad","id":"100002396785204"
    },{     "name":"Navya Prasanna","id":"100002419100201"
    },{     "name":"Ramireddy Paila","id":"100002552254549"
    },{     "name":"John Edward","id":"100002595557538"
    },{     "name":"Abhishek Namma","id":"100002641337357"
    },{     "name":"Tirumala Rayudu Tandra","id":"100002673802695"
    },{     "name":"Lakshmiviveka Goli","id":"100002820242067"
    },{     "name":"Durgarao Vasamsetti","id":"100002947094683"
    },{     "name":"Geda Sudheer","id":"100002968743878"
    },{     "name":"Krishna Prasad Pasupuleti","id":"100003027388345"
    },{     "name":"Sudheer Palatherthapu","id":"100003095500995"
    },{     "name":"Raja Ramesh Haddubangi","id":"100003098069539"
    },{     "name":"Rupa Kamireddy","id":"100003137137936"
    },{     "name":"Krishnarao Paruchuri","id":"100003337821817"
    },{     "name":"Teja Varma","id":"100003786723963"
    },{     "name":"Madhuri Jasti","id":"100003926095705"
    }],"paging":{       "next":"https:\/\/graph.facebook.com\/100003137741947\/friends?value=1&redirect=1&access_token=AAAB3DjBNjrEBACF2foZBM6qModwfmyOP24zMBK6skwxN31aA3oLxTCuu2KI9CgnvAJu4yUxDFK9KyKnrErrv2q5zee4U5VcSbyoeDTAZDZD&limit=5000&offset=5000&__after_id=100003926095705"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:09:28.207

```
-(void)getData:(NSData*)response{

 // You have to include the SBJSON or else you can also use the NSJSONSerialization

 //NSDictionary *jsonData          =           [NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&erro];

SBJSON *parse                               =           [[SBJSON alloc]init];

NSString *jsonString                        =           [[NSString alloc] initWithData:response
                                                                            encoding:NSUTF8StringEncoding]; 

NSDictionary *jsonData                      =           [parse objectWithString:jsonString error:&erro];

NSArray *alldata                          =           [jsonData objectForKey:@"data"];

if(![alldata isKindOfClass:[NSNull class]] && [alldata count] > 0)
{
    for(int i = 0; i < [alldata count]; i++)
    {
        NSDictionary *getData               =       [allEvents objectAtIndex:i];

        NSString *nameString                   =       [NSString stringWithFormat:@"%@",[getData objectForKey:@"name"]];

         NSString *idString                   =       [NSString stringWithFormat:@"%@",[getData objectForKey:@"id"]];

    }

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:04:54.417

您需要为 Objective-C 使用 JSON 解析库。我会推荐[JSON 框架](http://stig.github.com/json-framework/)。（现在叫SBJson）它被广泛使用。我们已经在几个成功的项目中使用它并且完全没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:15:26.353

我是[JSONKit](https://github.com/johnezang/JSONKit/)的忠实粉丝。它的实现要小得多（只是一个 .h 和 .m 文件）并且非常快速和高效。[SBJson](https://github.com/stig/json-framework/)也不错，但有很多大多数人不需要的开销。（流，写作等）。

```
NSDictionary *myData = [jsonString objectFromJSONString];

NSString *name = [myData objectForKey:@"data"] objectForKey:@"name"];
NSArray *names = [myData objectForKey:@"data"]; // save all names into an array 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:52:46.147

首先你应该添加 Json 框架。取一个字典变量来加载json的响应。因为字典格式的数据。然后在其中找到一个数组，因此获取一个数组并加载该字典。然后将值存储到对象最后你得到了值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T13:39:48.567

iOS 5 版本中包含用于 JSON 的 API 函数。检查API 文档中的[NSJSONSerialization](http://www.google.com/url?sa=t&rct=j&q=nsjsonserialization&source=web&cd=1&ved=0CEgQFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fios%2F%23documentation%2FFoundation%2FReference%2FNSJSONSerialization_Class%2FReference%2FReference.html&ei=L2kFUNO-Ceao4gSRtvGuCQ&usg=AFQjCNE17Vky3OsDv6jcESIVf1Hu6qB8aw&sig2=2GmTTLzym4i226ccJ7ClLg)。

例如：

```
NSDictionary *dict =  [NSJSONSerialization JSONObjectWithData: data options: kNilOptions error: error]; 
```

# c# - Openrasta 验证器问题

> ID：11523078
> 
> 赞同：0
> 
> 时间：2012-07-17T13:02:54.357
> 
> 标签：c#, rest, openrasta

我在 OpenRasta 中遇到了一个奇怪的验证器问题。我的配置文件中有验证器的条目

```
ResourceSpace.Uses.CustomDependency<IValidator<Customer>, CustomerValidator>(DependencyLifetime.PerRequest); 
```

我正在使用 REST 客户端测试我的 API。在处理程序中调用我的 API 方法时，验证器不会每次都被调用。我觉得我在配置中犯了一些错误。

任何人都可以让我知道解决这个问题需要做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:00:13.190

您是否启用了管道贡献者来拦截和执行验证？

查看您的完整配置和处理程序代码示例会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:52:01.730

将 ResourceValidationInterceptor 和 CustomerValidator 的依赖生命周期从 PerRequest 更改为 Transient，如下所示。

```
ResourceSpace.Uses.CustomDependency<IOperationInterceptor, ResourceValidationInterceptor>(DependencyLifetime.Transient);

ResourceSpace.Uses.CustomDependency<IValidator<Customer>, CustomerValidator>(DependencyLifetime.Transient); 
```

这解决了我的问题。

# javascript - javascript / ajax 查询

> ID：11523080
> 
> 赞同：0
> 
> 时间：2012-07-17T13:02:56.257
> 
> 标签：javascript, ajax

但是，我目前有一个使用 javascript 的网页；当我使用我的 Ajax 移动到数据库时，我的 responseText 总是空的。

js制作标志并发送查询

```
 objAjaxUpdates.main_flag = "getNames";
    objAjaxUpdates.SendQuery(query); 
```

流程中的下一步（网址是一个 aspx 文件）

```
this.SendQuery = function(data) {
        this.Initialize();
        if (this.req != null) {
            //alert(data);
            //alert(this.url + " " + this.main_flag);
            this.req.open("POST", this.url);
            this.req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
            this.req.onreadystatechange = this.processData;
            this.req.send(data);
        }
    } 
```

下一个

```
this.processData = function() {
        if (objAjaxUpdates.req.readyState == 4) {
            if (objAjaxUpdates.req.status == 200) {
                if (objAjaxUpdates.req.responseText == "") {

                    alert('No Return');
                }
                else { 
                   ... 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:10:31.657

我不知道你正在使用的图书馆。但这个程序对我来说是正确的。（有像 jQuery 这样的库可以避免您使用低级 AJAX API、检查响应代码等。）

我建议您使用类似 Firebug for Mozilla 或 Chrome Developer Tools 来“调试”您的 AJAX 机器。

仍然有很好的旧技术：

*   首先手动测试对服务器的请求。
*   然后，做一个愚蠢的 AJAX 请求。
*   最后，测试两个组件。

# java - 如何设置特定 ListView 行的文本/图像 - Android？

> ID：11523094
> 
> 赞同：0
> 
> 时间：2012-07-17T13:03:52.797
> 
> 标签：java, android, listview, android-listview

感谢 stackoverflow 用户的帮助，我设法根据某些条件更改了一个特定行的颜色。但是改变颜色并不完全符合我的需求和期望。

所以我开始浏览网页并试图改变它。我想在特定行的 TextView 中设置文本。为了能够更改行颜色，我被建议创建个性化的 SimpleCursorAdapter 类，因为我正在使用 Cursor 从 SQLite 将值输入 ListView。

在阅读和测试之后，这是我想出的：

```
public class MyCursorAdapter extends SimpleCursorAdapter {
    public MyCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, layout, c, from, to);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        super.bindView(view, context, cursor);
        if(cursor.getLong(cursor.getColumnIndex(MyDBAdapter.KEY_PRICE)) == 5)
        {   
            TextView price = (TextView)view.findViewById(R.id.priceInfo);
            price.setText("High");
        }
        else
            view.setBackgroundColor(0x00000000);
    }
} 
```

但是，我现在得到的是某些行上的重复文本（其中有规律性）。当我在某处读到时，每次滚动都在刷新 ListView，但是当我放入 if 子句（插入此 TextView）时，这行怎么可能：`view.setBackgroundColor(SELECTED_COLOR);`一切正常，只有这一行已更改。

有人可以告诉我我必须做什么才能使它起作用，或者我的想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:56:53.570

```
public class MyCursorAdapter extends SimpleCursorAdapter {
    public MyCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, layout, c, from, to);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        super.bindView(view, context, cursor);         
        TextView price = (TextView)view.findViewById(R.id.priceInfo);
        if(cursor.getLong(cursor.getColumnIndex(MyDBAdapter.KEY_PRICE)) == 5)
        {   
            price.setText("High");
            view.setBackgroundColor(/* red color? */);
        }
        else {
            price.setText("");
            view.setBackgroundColor(0x00000000);
        }
    }
} 
```

由于“itemrecycling”，bindView 中的视图具有被回收的颜色和文本。您需要为更改不同列表视图项的每个 bindView 调用显式分配所有属性。在这种情况下，背景颜色和价格标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:10:22.370

覆盖 getView 方法并根据列表视图项的位置使用 convertView.setbackgroundColor。

像这样的东西：

```
public class MyCustomAdapter extends ArrayAdapter<String> {

public MyCustomAdapter(Context context, int textViewResourceId,
String[] objects) {
super(context, textViewResourceId, objects);
// TODO Auto-generated constructor stub
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
// TODO Auto-generated method stub
return super.getView(position, convertView, parent);
if(postion == 1) //1st position in listview
 {
   convertView.setbackgroundColor(...)
 } 
```

等等...

# java - 安卓。4.1 - 4 = 0.09999999999999964。为什么？

> ID：11523104
> 
> 赞同：-2
> 
> 时间：2012-07-17T13:04:35.447
> 
> 标签：java, android

> **可能重复：**
> [Android 数字格式在某种程度上是错误的，而不是 3.5 我得到 3.499999999，为什么？](https://stackoverflow.com/questions/11065397/android-number-format-is-wrong-somehow-instead-of-3-5-i-get-3-499999999-why)

有谁知道为什么Android平台会给出如此奇怪的结果？

**4.1 - 4 = 0.09999999999999964**

只有 4 给出了如此奇怪的舍入。

实际上我需要从 4.1 获取尾数，所以我需要 0.1 作为结果，而不是 0.09999999999999964。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:08:52.663

This is an issue of rounding. You can take a look at the [BigDecimal](http://developer.android.com/reference/java/math/BigDecimal.html) class which should do what you need.

# django - django get_profile 错误

> ID：11523106
> 
> 赞同：0
> 
> 时间：2012-07-17T13:04:38.003
> 
> 标签：django, django-models, django-templates, django-views

我想在我已经包含在 settings.py 下面的视图中获取我的用户配置文件 ID

```
 AUTH_PROFILE_MODULE = 'users.UserProfile' 
```

查看代码：

```
def savecontent(request):
 try:
  logging.debug("=========================== in save content")
  logging.debug(dir(request.user))
  my_id = request.user.get_profile().id
  logging.debug(my_id) 
```

错误是：

```
 2012-07-17 13:00:00,564 ERROR Error while saing content
 Traceback (most recent call last):
 File "/opt/labs/labs_site/content/views.py", line 21, in savecontent
 my_id = request.user.get_profile().id
 File "/opt/labs/django/django/utils/functional.py", line 185, in inner
 return func(self._wrapped, *args)
 AttributeError: 'AnonymousUser' object has no attribute 'get_profile' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:11:46.073

```
AttributeError: 'AnonymousUser' object has no attribute 'get_profile' 
```

您必须有经过身份验证的用户才能检索个人资料，这是您的问题

```
@login_required
def foo(request):
    profile_id = request.user.get_profile().id 
```

# asp.net - 需要连接到 unix 并运行远程 perl 脚本 -- 使用 vb.net 和 SSH

> ID：11523110
> 
> 赞同：0
> 
> 时间：2012-07-17T13:04:48.950
> 
> 标签：asp.net, vb.net, ssh

在不涉及任何商业产品的情况下，最简单的方法是什么。我目前有这样的代码设置，但没有成功。目前 UNIXCOMPUTERNAME 和 UNIXPASSWORD 被硬编码到程序中只是为了我个人的测试目的。

这是一个 asp.net 网页，它位于代码隐藏文件中。我要么想让这个代码工作，要么我想找到一个 SSH 库。我正在使用 Visual Studio Web Developer Express，所以这似乎也限制了我。

```
Dim unixVariables(2) As String
    nameLabel.Text = FQDN.Text
    Dim Proc As New System.Diagnostics.Process
    Proc.StartInfo = New ProcessStartInfo("C:\plink.exe")
    Proc.StartInfo.Arguments = "-pw " & UNIXPASSWORD & " " & UNIXUSERNAME & "@" & UNIXCOMPUTERNAME & " ls > output.txt"
    Proc.StartInfo.RedirectStandardInput = True
    Proc.StartInfo.RedirectStandardOutput = True
    Proc.StartInfo.UseShellExecute = False
    Proc.Start()
    ' Pause for script to run
    System.Threading.Thread.Sleep(100)
    Proc.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:31:44.097

您似乎知道，Microsoft 没有将 SSH 库作为 .NET 框架的一部分。但是，那里有一些免费的库，例如：

[http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET](http://www.codeproject.com/Articles/11966/sharpSsh-A-Secure-Shell-SSH-library-for-NET)

[http://sshnet.codeplex.com/](http://sshnet.codeplex.com/)

[http://www.routrek.co.jp/en/product/varaterm/granados.html](http://www.routrek.co.jp/en/product/varaterm/granados.html)

由于从未使用过它们，我无法为它们担保或推荐任何其他产品。但是，如果您想简单地执行问题中显示的命令行，那也应该可以正常工作。由于您没有具体说明该解决方案的确切原因，因此很难告诉您如何修复它。您确实需要确保可以以与运行 ASP 项目的用户相同的用户身份执行该命令。

# php - 获取处理后的 URL 内容

> ID：11523114
> 
> 赞同：0
> 
> 时间：2012-07-17T13:04:57.163
> 
> 标签：php, javascript, curl, xmlhttprequest, domdocument

我正在尝试检索网页的内容并检查该页面是否包含我正在监视的某些错误关键字。（而不是每次手动加载每个 URL 来检查网站，我希望以编程方式执行此操作并在发生错误时标记出来）

我试过 XMLHttpRequest。我能够获取 HTML 内容，就像我在页面上“查看源代码”时看到的一样。但是我监控的页面在 Sharepoint 上运行，并且 Web 部件是动态生成的。我相信如果在加载这些部分时发生错误，我将无法将它们标记出来，因为我提取的 HTML 将不包含错误，而只是指向 webpart 的常用路径。

cURL 似乎也是如此。我刚刚阅读了有关 DOMDocument 的内容，我想知道 DOMDocument 是处理代码还是只是将 HTML 分解为层次结构。

我只希望有 URL 的内容。（就像您在 IE 中将网站另存为 txt 而不是 HTML 时得到的一样）。或者，如果我可以进一步处理 HTML，那也很好。我怎样才能做到这一点？任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:33:12.983

为什么要剥离 HTML？使用它会更好！

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
$data = curl_exec($ch);
curl_close($ch);

// libxml_use_internal_errors(true);
$oDom = new DomDocument();
$oDom->loadHTML($data);

// Go through DOM and look for error (it's similar if it'd be
// <p class="error">error message</p> or whatever)
$errors = $oDom->getElementsByTagName( "error" ); // or however you get errors
foreach( $errors as $error ) {
    if(strstr($error->nodeValue, 'SOME ERROR')) {
        echo 'SOME ERROR occurred';
    }
} 
```

如果你不想这样做，你可以这样做：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
$data = curl_exec($ch);
curl_close($ch);
if(strstr($data, 'SOME_ERROR')) {
    echo 'SOME ERROR occurred';
} 
```

# emacs - Emacs 函数读取用户输入

> ID：11523122
> 
> 赞同：0
> 
> 时间：2012-07-17T13:05:05.167
> 
> 标签：emacs

我需要在以下两个方面要求用户输入的功能：1）图形和 2）emacs 中的非图形环境。

发现我可以为非图形案例做这样的事情：

```
(defun query-friends-phone (name)
  "…"
  (interactive "sEnter friend's name: ")
  (message "Name: %s" name)
) 
```

我需要一个图形案例的输入框。输入框之类的东西，要求输入其他语言之类的东西。Emacs有这种东西吗？

（为了避免混淆，像这样的图像：[http](http://eleganceit.com/blog/wp-content/uploads/input-form.png) ://eleganceit.com/blog/wp-content/uploads/input-form.png ，这只是想法，我知道它不会是这样的！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:24:22.440

Emacs 远离这种方法。所有文本都被输入到主框架中。您可以通过单击鼠标来回答问题的对话框（请参阅[http://www.gnu.org/software/emacs/manual/html_node/elisp/Frames.html#Frames](http://www.gnu.org/software/emacs/manual/html_node/elisp/Frames.html#Frames)）。

emacs 中的 GPG 接口仅出于安全目的使用您建议的方法。有一个单独的窗口可以捕获所有密钥，确保您不会在文件中意外键入密码并将其保存到磁盘。

# ruby-on-rails - 从 ruby on rails 批处理对指标服务器的请求

> ID：11523124
> 
> 赞同：0
> 
> 时间：2012-07-17T13:05:08.333
> 
> 标签：ruby-on-rails, ruby, batch-processing, unicorn

动机：

我想将连续的统计信息发送到我们的（自定义构建的）指标服务器，并继续加载、批量处理这些请求并每次发送它们，例如，50 个请求已经堆积。

要求：

*   跨不同进程的 stat 事件必须按顺序到达指标服务器（我们使用 unicorn 和几个工人）
*   尽可能避免使用任何外部队列
*   优雅地处理无响应的指标服务器（可能发生）

致谢：

仅使用外部队列（memcache 等）是一种简单的方法，但也是我们需要扩展/部署/管理的另一件事，如果可以避免的话，我真的不想忍受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:39:37.257

您最好的选择是使用专用的排队平台，因为这些平台提供消息完整性和可靠的传输。此外，对于任何足够大的应用程序，消息传递是可扩展性的关键。如果您*真的*必须自己从头开始烘焙，最好的办法是使用赛璐珞库来处理线程管理，并使用基于时间的延迟而不是固定的队列限制。

此外，当您终止应用程序（例如部署）时，队列中的任何内容**都将**丢失。这是一种方法的粗略实现。

```
class MetricReporter
  include Celluloid

  def initialize
    @queue = Queue.new
  end

  def enqueue(metric)
    @queue << metric
    empty! if @queue.length > 50
  end

  def empty!
    until queue.length.zero?
      metric = @queue.pop
      #process metric
    end
  end
end 
```

这很容易使用，只需在初始化程序中创建一个 MetricReporter 实例并将指标排入队列即可。

配置/初始化程序/mymetrics.rb

```
METRIC_REPORTER = MetricReporter.new 
```

应用程序/模型/myuser.rb

```
def login
  METRIC_REPORTER.enqueue({:action => 'User Logged In', :data => username})
end 
```

# mysql - MySQL JOIN 多个结果

> ID：11523126
> 
> 赞同：0
> 
> 时间：2012-07-17T13:05:12.763
> 
> 标签：mysql, sql

我正在尝试选择特定用户在特定服务器中可以访问的所有角色。这适用于允许用户管理一项或多项服务的系统。用户拥有的访问量由服务所属的任何人分配。角色被分组，然后该组被分配给用户。一个用户可能有多个组。

这是我提出并期望工作的查询，但事实并非如此。我猜它不起作用，因为 serverPermissions 表可以根据分配给用户的内容返回超过 1 个 groupId。

```
SELECT serverGroupRoles.roleId FROM `serverGroupRoles`, `serverPermissions`, `servers` 
    WHERE servers.identifier='someUniqueString' AND 
        serverPermissions.serverId=servers.id AND 
        serverPermissions.userId=1 AND 
        serverGroupRoles.groupId=serverPermissions.groupId 
```

这是表的视觉外观，“服务器”表有其他数据，但它们不相关。

服务器表，标识符是唯一键：

```
id  |  identifier  |  ...
--------------------------
 1  |  someString  |  ...
 2  | someString02 |  ... 
```

服务器权限表：

```
serverId  |  groupId  |  userId
--------------------------------
    1     |     1     |     1
    1     |     2     |     1
    1     |     2     |     2
    2     |     3     |     1
    3     |     4     |     1 
```

serverGroupRoles 表：

```
groupId  |  roleId
------------------
   1     |    1
   1     |    2
   1     |    3
   2     |    1
   2     |    3
   3     |    4
   4     |    2 
```

roleId 在应用程序中映射到某个操作。

这就是我想要完成的，但是有 1 个查询：如果你做了类似的事情，

```
SELECT id FROM `servers` WHERE identifier = 'someString' 
```

退货

```
id
--
 1 
```

然后拿了从那里返回的id，

```
SELECT groupId FROM `serverPermissions` WHERE serverId = 1 AND userId = 1 
```

然后它会返回

```
groupId
-------
   1
   2 
```

然后对于每个 groupId，

```
SELECT roleId FROM `serverGroupRoles` WHERE groupId = # 
```

而最终的结果，

```
roleId
------
   1
   2
   3 
```

有没有用 1 个查询来做到这一点的好方法？

编辑，完成任务的查询：

```
SELECT DISTINCT sgr.roleID
FROM serverPermissions sp
    INNER JOIN servers s ON s.id = sp.serverID
    INNER JOIN serverGroupRoles sgr ON sgr.groupID = sp.groupID
WHERE sp.userID = 1
    AND s.identifier = 'someString' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:26:14.000

这里还有点早，但这会做你想要的：

```
SELECT  DISTINCT sgr.roleID
FROM    serverPermissions sp
        INNER JOIN serverGroupRoles sgr ON sgr.groupID  = sp.groupID
WHERE   sp.serverID = 1
        AND sp.userID   = 1 
```

我可能在这里不正确，因为我不确定服务器表的位置。如果您正在从该表中查找数据，您也可以将其加入：

```
SELECT  DISTINCT sgr.roleID, s.fieldName
FROM    serverPermissions sp
        INNER JOIN servers s            ON s.id = sp.serverID
        INNER JOIN serverGroupRoles sgr ON sgr.groupID  = sp.groupID
WHERE   sp.serverID = 1
        AND sp.userID   = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:20:57.990

这是你想要的吗？

```
SELECT roleId
FROM `serverGroupRoles`
WHERE groupId in (SELECT groupId
                  FROM `serverPermissions`
                  WHERE serverId = 1 AND userId = 1 
                 ) 
```

也许您实际上想要“SELECT distinct roleID”来消除重复项。

您可以将其扩展为服务器，但我会将其作为一组连接进行：

```
SELECT distinct roleId
FROM `serverGroupRoles` sgr join
     `serverPermissions` sp
      on sgr.groupId = sp.groupId join
     `server` s
      on sp.serverid = s.id
WHERE s.identifier = 'someString' AND sgr.userId = 1 
```

# c - 如何处理：所选处理器不支持 `qadd16 r1,r1,r0'

> ID：11523129
> 
> 赞同：2
> 
> 时间：2012-07-17T13:05:26.580
> 
> 标签：c, assembly, android-ndk, arm, abi

我正在开发 android 应用程序，并且正在开发 NDK。编译文件时出现**所选处理器的错误不支持 `qadd16 r1,r1,r0'**。谁能解释我为什么这个错误出现在哪里以及如何处理这个错误？[这是我的basic_op.h](http://pastie.org/4271537)文件的代码片段

```
static inline Word32 L_add(register Word32 ra, register Word32 rb)
{
  Word32 out;

  __asm__("qadd %0, %1, %2"
          : "=r"(out)
          : "r"(ra), "r"(rb));

  return (out);
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:08:32.783

发生这种情况是因为您的目标架构 ( [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0211h/Chddhfig.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0211h/Chddhfig.html)`QADD` )不支持指令。要编译此代码，您需要在 NDK 中启用 arm-v7 支持。

添加行

```
APP_ABI := armeabi-v7a 
```

到您的 Application.mk 并且此代码将完美编译：

```
static inline unsigned int L_add(register unsigned int ra, register unsigned int rb)
{
  unsigned int out;

  __asm__("qadd %0, %1, %2"
          : "=r"(out)
          : "r"(ra), "r"(rb));

  return (out);
} 
```

**PS**我正在使用Android NDK r8。

**PPS**为什么需要这个丑陋的组件？输出程序集清单：

```
static inline unsigned int L_add(register unsigned int ra, register unsigned int rb)
{
  return (ra > 0xFFFFFFFF - rb) ? 0xFFFFFFFF : ra + rb;
} 
```

看起来仍然相当有效，而且更便携！

# jsf-2 - 更新值：单选按钮值来回切换

> ID：11523130
> 
> 赞同：0
> 
> 时间：2012-07-17T13:05:32.670
> 
> 标签：jsf-2

我正在尝试更新一个由选择框的 onchange 事件触发的无线电组件。我看到单选按钮在 onchange 之后根据需要切换，但它会在下一秒自动切换回来。

```
<h:selectOneMenu id="selectId" value="#{someBean.someSelectValue}" 
 onchange="this.form.submit()" valueChangeListener="#{someBean.someChange}" immediate="true">
  <p:ajax update="radioId"/>
  <f:selectItems value="#{someBean.availableSraTitel}" />
</h:selectOneMenu>

<h:selectOneRadio id="radioId" value="#{someBean.someRadioValue}">
  <f:selectItem itemLabel="Yes" itemValue="true" />
  <f:selectItem itemLabel="No" itemValue="false" />
</h:selectOneRadio> 
```

我在这里想念什么？

强尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:11:09.543

删除`onchange="this.form.submit()"`（`f:ajax`将值提交给服务器）

同时删除`immediate="true"`（我不认为你真的打算在这里跳过任何验证）

最后一件事，`<p:ajax update="radioId"/>`变成`<f:ajax render="radioId"/>`

`p:ajax`来自 primefaces 并且您使用的是普通的 JSF 组件

正如**BalusC**`valueChangeListener="#{someBean.someChange}"`所建议的那样：您也最好通过添加`listener="#{someBean.someChange}"`来替换`f:ajax`（您也应该更改方法的签名）

# android - android布局：使用80%的屏幕

> ID：11523133
> 
> 赞同：0
> 
> 时间：2012-07-17T13:05:39.887
> 
> 标签：android, layout

我需要在我的布局中放置一个 TextView，textView 必须左对齐并使用 90% 的屏幕

我知道 layout_weigth 但有没有一种简单的方法可以做到这一点？

能够设置 % 边距会很棒（比如在 css 边距中：auto;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:14:59.367

您可以放置​​一个权重为 2 的 empy View 并将 textview 权重更改为 8

```
<TextView .... layout_weight="8"><View ... layout_weight="2"> 
```

PD。放置或高度为 0dp 以按重量值扩展

# cakephp - 如何测试从模型调用 CakeEmail

> ID：11523135
> 
> 赞同：1
> 
> 时间：2012-07-17T13:05:43.310
> 
> 标签：cakephp, testing, phpunit

在 CakePHP 2.1 中，我正在尝试使用正确的“收件人”电子邮件（在本例中：cat@gmail.com）从我的模型测试用例中调用 CakeEmail::to() 方法。

我希望通过以下测试，但我得到：

```
Expectation failed for method name is equal to <string:to> when invoked 1 time(s).
Method was expected to be called 1 times, actually called 0 times. 
```

这是模型和测试用例中的代码：

```
<?php

// Model/Job.php

App::uses('AppModel', 'Model');
App::uses('CakeEmail', 'Network/Email');

class Job extends AppModel {

        public function emailCat() {
                $CakeEmail = new CakeEmail();
                $CakeEmail->to('cat@gmail.com');
                $CakeEmail->subject('hello!');
                $CakeEmail->emailFormat('text');
                $CakeEmail->config('default');
                $CakeEmail->send('hi');
        }

}

// Test/Model/JobTest.php

class JobTestCase extends CakeTestCase {

        public function setUp() {
                parent::setUp();
                $this->Job = ClassRegistry::init('Job');
        }      

        public function testEmailCat() {

                // I want to assert CakeEmail::to() is called with correct email
                $CakeEmail = $this->getMock('CakeEmail' , array('to'));
                $CakeEmail->expects($this->once())
                    ->method('to')
                    ->with($this->equalTo('cat@gmail.com'));            

                $result = $this->Job->emailCat();
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:01:19.807

问题是您正在模拟一个完全不同的类，而不是模型上实际使用的类。在您的模型函数中，您实例化了一个全新的电子邮件类，该类将被模拟。相反，您需要确保`CakeEmail`模型使用的对象是模拟对象。

```
class Job extends AppModel {

        public $CakeEmail = null;  

        public function emailCat() {
                if (!$CakeEmail) {
                        $this->CakeEmail = new CakeEmail();
                }
                $this->CakeEmail = new CakeEmail();
                $this->CakeEmail->to('cat@gmail.com');
                $this->CakeEmail->subject('hello!');
                $this->CakeEmail->emailFormat('text');
                $this->CakeEmail->config('default');
                $this->CakeEmail->send('hi');
        }

} 
```

然后更新您的测试用例以在您的 Job 模型上设置模拟对象。

```
class JobTestCase extends CakeTestCase {

        public function setUp() {
                parent::setUp();
                $this->Job = ClassRegistry::init('Job');
        }      

        public function testEmailCat() {

                // I want to assert CakeEmail::to() is called with correct email
                $CakeEmail = $this->getMock('CakeEmail' , array('to'));
                $CakeEmail->expects($this->once())
                    ->method('to')
                    ->with($this->equalTo('cat@gmail.com'));  
                // use mock object instead of creating a brand new one          
                $this->Job->CakeEmail = $CakeEmail;
                $result = $this->Job->emailCat();
        }

} 
```

# templates - 如何等待整个模板在 KnockoutJS 中呈现？

> ID：11523141
> 
> 赞同：2
> 
> 时间：2012-07-17T13:06:01.623
> 
> 标签：templates, knockout.js

当整个模板完成渲染时，KnockoutJS 中有没有办法触发回调？

我了解`afterRender`您可以使用以下选项：

```
"template: { name: 'Template', afterRender : myCallback}" 
```

但是回调在我的测试页面中触发了两次（我没有使用`foreach`也没有要显示的数据集合）。

我已经看到了与我要问的问题类似的以下问题：

[模板渲染后的 KnockoutJS 绑定事件](https://stackoverflow.com/questions/9306177/knockoutjs-bind-event-after-template-render)

但是那个问题的答案并没有帮助我。

Knockout 中是否有一个事件在整个模板完成渲染后触发，而不仅仅是在 KO 找到的每个元素之后触发？

编辑：该死，我急于发布这个问题，我忘了提到我正在使用它来加载模板：

[https://github.com/ifandelse/Knockout.js-External-Template-Engine](https://github.com/ifandelse/Knockout.js-External-Template-Engine)

由于模板存储在外部文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T12:53:26.570

我无法（快速）在 github 上找到进一步解释这一点的条目，但它呈现两次的原因是一个错误。我的外部模板引擎的本地副本在第 22 行有一个额外的“自我”，它修复了它。

代替

```
options.afterRender = function() { 
```

用这个

```
self.options.afterRender = function() { 
```

请注意，NuGet 中的版本似乎已经过时，GitHub 版本已经包含此错误修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T16:33:01.877

我正在为 KO 使用不同的 AMD 库，由作者编写。

[https://github.com/rniemeyer/knockout-amd-helpers](https://github.com/rniemeyer/knockout-amd-helpers)

我的不是最优雅的解决方案，但它有效。我所做的是使用 setTimeout(callback,100) 向我的所有模板添加 afterRender 调用。回调设置 jQuery 延迟解析。当 deferred 解决后，我知道我的所有渲染都已完成并且可以执行我的代码。

```
// create a jQuery deferred
var dfd = $.Deferred();

// in my template call
afterRender: function () {

  // clear the timeout if it's still in play
  if (renderTimeoutId !== undefined) {
      clearTimeout(renderTimeoutId);
  }

  // create a new timeout and restart the clock
  renderTimeoutId = setTimeout(function () {
      dfd.resolve();
  }, 100);
}

// when my code is complete
dfd.done(function(){ /* after rendering code */}); 
```

我对有一个更优雅的解决方案非常感兴趣，我真的不喜欢让我的代码依赖于超时，但这是我当时能想到的最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:05:16.173

我也在学习使用外部模板（与您相同的库）进行淘汰赛，我的也被解雇了两次。

原因是在注入器渲染 loadingTemplate 时触发一次 afterRender，然后在加载实际外部模板时触发一次。所以即使我在我的配置中设置了选项：

infuser.defaults.useLoadingTemplate = false;

除了现在使用空模板外，它仍然会触发两次。这意味着我可以做到这一点（我的 afterRender 所做的只是在将模板加载到模态窗口并调整其大小后显示模态窗口）。

仅仅为了绕过双重事件触发而关闭异步可能并不理想。

模板

```
<div data-bind="template: { name: template().name(), data: template().data(), afterRender: renderComplete }"></div> 
```

查看模型

```
var renderComplete = function (params) {

  if (params.length > 0) {

     //Do my stuff here.

  }

}; 
```

如果有更好的方法或者我做错了什么，请告诉我:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T10:41:46.433

我设法对这个错误进行了不那么难看的快速修复。看起来，在 externalTemplateEngine “加载” div 渲染之后，第一个“afterRender”回调被触发。所以快速修复是检查哪些元素已被渲染：

```
afterRender = function (params) {
    // console.log(params);
    if (params.length <= 0 || $(params[0]).hasClass('infuser-loading'))
        return;

    // ... your code goes here
} 
```

# c++ - 在 winform vc++ 应用程序中发现一个或多个多重定义符号错误

> ID：11523143
> 
> 赞同：1
> 
> 时间：2012-07-17T13:06:09.207
> 
> 标签：c++, multiple-definition-error

我正在使用 VC++ 中的表单应用程序。我有主窗体，即 Form1.h，还有名为 child.h 的子窗体。我在 form1.h 的按钮单击上调用 child.h 表单。为了调用 child.h，我必须在 Form1.h 中包含 Child.h。

我在 Form1.h 中使用了以下代码

```
 #incude "Child.h"

private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
     Child^ c=gcnew Child;
     c->Visible=true;
} 
```

在 Child.h 中，我正在做一些处理。为此，我制作了一个名为**param.h**的头文件，其中包含一些函数名称和全局变量名称。我在 Child.h 文件中包含了 param.h。

param.h 是

```
#ifndef param_h_seen
#define param_h_seen
#define LED_Line 4
#define CALIBRATION_MODE 0
typedef unsigned __int32 uint32_t;
typedef unsigned __int8 uint8_t;

/****for LED ROI entered by user***/
int x_of_roi=6;
int y_of_roi=10;
/********************************/

/*************for graph ROI*******/
int ROIwidth=16;
int ROIheight=4096;

/********************************/
int LED_num= 64;
unsigned short *calib_factor;
/*********functions*****************/

int find_area(unsigned char *intensity,int start);

void DetectRectangle();
/***************************************/

#endif 
```

包含 child.h 后显示错误

```
PUMA_LED_TESTER.obj : error LNK2005: "unsigned short * calib_factor" (?calib_factor@@3PAGA) already defined in Child.obj
PUMA_LED_TESTER.obj : error LNK2005: "int x_of_roi" (?x_of_roi@@3HA) already defined in Child.obj
PUMA_LED_TESTER.obj : error LNK2005: "int y_of_roi" (?y_of_roi@@3HA) already defined in Child.obj
PUMA_LED_TESTER.obj : error LNK2005: "int ROIwidth" (?ROIwidth@@3HA) already defined in Child.obj
PUMA_LED_TESTER.obj : error LNK2005: "int ROIheight" (?ROIheight@@3HA) already defined in Child.obj
PUMA_LED_TESTER.obj : error LNK2005: "int LED_num" (?LED_num@@3HA) already defined in Child.obj 
```

我不知道为什么会出现这些错误。任何人都可以告诉我解决这些错误的解决方案吗

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:10:07.510

```
int x_of_roi=6;
int y_of_roi=10; 
```

Those are definitions, and should not be in your header files. Place them in one of the cpp files, and on the header have:

```
extern int x_of_roi
extern int y_of_roi; 
```

Same goes with the rest of the global variables you declare in your header files. When those headers are included by more than one cpp file (namely translation unit), each unit effectively declares new variables with the same name, which the linker complains about.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:41:02.653

每次`#include`将标题添加到源文件中时，结果都与复制/粘贴标题文本相同。因此，如果您有一个定义某些内容的标题：

```
header.h:
int magic = 0xA0B1C2D3 
```

并将其包含在多个 cpp 文件中：

```
source1.cpp:
#include "header.h"
<...>

source2.cpp:
#include "header.h"
<...> 
```

结果是为每个 cpp 定义了变量和宏。在这种情况下，没关系。但是，如果您有更复杂的依赖关系，这可能会导致您当前遇到的错误。

在您的情况下，您基本上包含两次相同的文件，这会导致具有相同名称的东西的多重定义。您需要做的是将定义放在头文件之外，并`extern`在需要从其他地方访问它们时使用。

# javascript - 播放所选视频

> ID：11523144
> 
> 赞同：0
> 
> 时间：2012-07-17T13:06:09.783
> 
> 标签：javascript, html5-video, playlist

```
 <script type="text/javascript">
function playVideo(sourceId, targetId) {
   if (typeof(sourceId)=='string') {sourceId=document.getElementById(sourceId);}
   if (typeof(targetId)=='string') {targetId=document.getElementById(targetId);}
   targetId.innerHTML=sourceId.innerHTML;
   return false;

   }
    </script>
<video id="6" width="320" height="240" controls="controls"></video>

<video id="1" style="display: none;"width="320" height="240" controls="controls">
  <source src="movie1.mp4" type="video/mp4" />
  <source src="movie1.ogg" type="video/ogg" /> 
  <source src="movie1.webm" type="video/webm" />
Your browser does not support the video tag.
</video>
<video id="2" style="display: none;" width="320" height="240" controls="controls">
  <source src="movie2.mp4" type="video/mp4" />
  <source src="movie2.ogg" type="video/ogg" /> 
  <source src="movie2.webm" type="video/webm" />
Your browser does not support the video tag.
</video>

<a href="#" onclick='return playVideo("1","6")'>Play Video 1</a>
<a href="#" onclick='return playVideo("2","6")'>Play Video 2</a> 
```

当视频 1 正在播放视频 2 时选择“播放视频 2”将不起作用，我该如何解决这个问题？是否需要添加其他脚本才能使第二个视频覆盖第一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:08:13.193

The way your `playVideo` function works is...not intuitive.

Use `videoElement.play();` to play a video. For example, `document.getElementById('1').play();`. To stop a video from playing, use `stop();`

[Tutorial / docs](https://developer.mozilla.org/en/Using_audio_and_video_in_Firefox#Controlling_media_playback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:12:24.023

```
<script type="text/javascript">
    function playVideo(sourceId, targetId) {
        if (typeof(sourceId)=='string') {sourceId=document.getElementById(sourceId);}
        if (typeof(targetId)=='string') {targetId=document.getElementById(targetId);}
        targetId.innerHTML=sourceId.innerHTML;
        return false;
    }
</script>

<div id="6"></div>

<div id="1" style="display: none">
    <video width="320" height="240" controls="controls">
        <source src="movie1.mp4" type="video/mp4" />
        Your browser does not support the video tag.
    </video>
</div>

<div id="2" style="display: none">
    <video width="320" height="240" controls="controls">
        <source src="movie2.avi" type="video/avi" />
        Your browser does not support the video tag.
    </video>
</div>

<a href="#" onclick='return playVideo("1","6")'>Play Video 1</a>
<a href="#" onclick='return playVideo("2","6")'>Play Video 2</a> 
```

我做了什么：我将两个视频元素放在了 invisible`divs`中。那些`divs`有 ids (1 & 2) 并且那些`divs`(你的视频元素) 的内容被加载到`div`id 为 6 的第三个(可见) 中。

# vb.net - 以编程方式创建表单时如何覆盖表单的 OnShown 事件？

> ID：11523147
> 
> 赞同：1
> 
> 时间：2012-07-17T13:06:17.117
> 
> 标签：vb.net

我试图在第一次显示表单时播放声音（就像标准消息框一样，需要一个更好的例子）。如果使用通过设计器添加的标准表单，我通常会通过覆盖标准 onshown 事件来执行此操作，然后继续调用 MyBase.OnShown(e)

我现在遇到的问题是表单正在以编程方式创建（将 myForm 设置为新表单等），因此我似乎无法使用 AddHandler 来覆盖此事件。我不怀疑我以完全错误的方式这样做，但我会很感激可以提供的任何建议。我更喜欢从 VB.net 的角度提出建议，但我可以在 C# 中勉强应付。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:22:06.823

`Form.OnShown`不是一个事件。相反，它是`Form`引发表单`Shown`事件的类的方法。这是解释该`OnShown`方法的 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onshown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onshown.aspx)

当您使用表单设计器创建派生类时，您可以覆盖该`OnShown`方法，但是当您只是通过其公共接口访问表单时，您需要使用`Shown`事件来代替。您可以像这样为该事件添加事件处理程序：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim f As Form1 = New Form1()
    AddHandler f.Shown, AddressOf f_Shown
    f.Show()
End Sub

Private Sub f_Shown(ByVal sender As Object, ByVal e As EventArgs)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:17:58.670

由于代码中不存在表单，因此您实际上必须调用该事件。

尝试先写出显示代码：

```
Public Sub form_Showing(ByVal sender As Object, e As EventArgs)
  // play sound
End Sub 
```

然后在创建表单时，添加事件的处理程序：

```
Dim f As New Form
AddHandler f.Shown, AddressOf form_Showing
f.Show() 
```

# sql-server - 如何使用 PowerShell 监控进程的 CPU 利用率？

> ID：11523150
> 
> 赞同：12
> 
> 时间：2012-07-17T13:06:31.653
> 
> 标签：sql-server, powershell, wmi

我正在尝试编写一个 PowerShell 脚本来监视 SQL Server 进程的 CPU 利用率百分比。我想每天记录这个数字的快照，这样我们就可以随着时间的推移对其进行监控并观察趋势。

我的在线研究说这个 WMI 查询应该给我我想要的：

```
Get-WmiObject -Query "SELECT PercentProcessorTime FROM win32_PerfFormattedData_PerfProc_Process WHERE Name='SqlServr'" 
```

当我运行 WMI 查询时，我通常会得到一个介于 30-50% 之间的值 ![在此处输入图像描述](../Images/fb54f80943ca5989ca54c0cca19c0562.png)

但是，当我在资源监视器中查看进程时，它的 CPU 使用率通常低于 1% ![SQL Server 平均 CPU 利用率](../Images/9b4189497e8802b8a67ad9f13c69e388.png)

我知道 WMI 查询只是返回 CPU 使用率的快照，而不是很长一段时间内的平均值，所以我知道这两者不能直接比较。即便如此，我认为快照通常应该小于 1%，因为资源监视器的平均值小于 1%。

有人对为什么会有如此大的差异有任何想法吗？以及如何准确测量进程的 CPU 使用率？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T16:59:49.493

在过去的几天里，我学到了关于 WMI 和性能计数器的一切。

WMI 代表 Windows 管理规范。WMI 是向 WMI 系统和 Windows COM 子系统注册的类的集合。这些类称为提供者，并具有任意数量的公共属性，这些属性在查询时会返回动态数据。

Windows 预装了大量的 WMI 提供程序，为您提供有关 Windows 环境的信息。对于这个问题，我们关注的是[Win32_PerfRawData* 提供程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394084%28v=vs.85%29.aspx)和基于它构建的两个包装器。

如果您直接查询任何 Win32_PerfRawData* 提供程序，您会注意到它返回的数字看起来很吓人。那是因为这些提供者提供了原始数据，你可以用它来计算你想要的任何东西。

为了更轻松地使用 Win32_PerfRawData* 提供程序，Microsoft 提供了两个包装器，它们在查询时会返回更好的答案，即 PerfMon 和 Win32_PerfFormattedData* 提供程序。

好的，那么我们如何获得一个进程的 % CPU 利用率呢？我们有三个选择：

1.  从 Win32_PerfFormattedData_PerfProc_Process 提供程序获取格式良好的数字
2.  从 PerfMon 获取格式正确的数字
3.  使用 Win32_PerfRawData_PerfProc_Process 为我们自己计算 % CPU 使用率

我们将看到选项 1 存在一个错误，因此它在所有情况下都不起作用，即使这是通常在互联网上给出的答案。

If you want to get this value from Win32_PerfFormattedData_PerfProc_Process you can use the query mentioned in the question. This will give you the sum of the PercentProcessorTime value for all of this process's threads. The problem is that this sum can be >100 if there is more than 1 core but this property maxes out at 100\. So, as long as the sum of all this process's threads is less than 100 you can get your answer by dividing the process's PercentProcessorTime property by the core count of the machine.

If you want to get this value from PerfMon in PowerShell you can use `Get-Counter "\Process(SqlServr)\% Processor Time"`. This will return a number between 0 - (CoreCount * 100).

如果您想自己计算此值，Win32_PerfRawData_PerfProc_Process 提供程序上的 PercentProcessorTime 属性将返回此进程已使用的 CPU 时间。因此，您需要拍摄两个快照，我们将它们称为 s1 和 s2。然后我们将执行 (s2.PercentProcessorTime - s1.PercentProcessorTime) / (s2.TimeStamp_Sys100NS - s1.TimeStamp_Sys100NS)。

这是最后的话。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T14:52:50.717

你的假设几乎是正确的。单个*线程*（并且一个进程总是至少有一个线程）最多可以有 100%，`PercentProcessorTime`但是：

*   一个进程可以有多个线程。
*   一个系统可以有多个（逻辑）CPU 内核。

因此在这里（启用超线程的 Intel i7 CPU）我有 8 个逻辑核心，前 20 个线程（过滤掉总数）显示（稍作整理以使其可读）：

```
PS > gwmi Win32_PerfFormattedData_PerfProc_Thread |
    ?{$_.Name -notmatch '_Total'} |
    排序 PercentProcessorTime -desc |
    选择-前 20 |
    ft -auto Name,IDProcess,IDThread,PercentProcessorTime

名称 IDProcess IDThread PercentProcessorTime
---- --------- -------- --------
空闲/6 0 0 100
空闲/3 0 0 100
空闲/5 0 0 100
空闲/1 0 0 100
空闲/7 0 0 96
空闲/4 0 0 96
空闲/0 0 0 86
空闲/2 0 0 68
WmiPrvSE/7#1 7420 6548 43
dwm/4 2260 6776 7
mstsc/2#1 3444 2416 3
电源外壳/7#2 6352 6552 0
主机/0#2 6360 6368 0
电源外壳/5#2 6352 6416 0
电源外壳/6#2 6352 6420 0
iexplore/7#1 4560 3300 0
福昕阅读器/1 736 5304 0
福昕阅读器/2 736 6252 0
主机/1#2 6360 1508 0
福昕阅读器/0 736 6164 0

```

对于最后一列，所有这些加起来应该是 800 之类的东西。

***但***请注意，这都是四舍五入的整数。与几个进程的 Process Explorer 的 CPU 列（选择 View | Show Fractional CPU 时不四舍五入）进行比较。请注意，就像`win32_PerfFormattedData_PerfProc_Process`百分比值针对核心计数进行了标准化一样（这只是显示的一部分）：

许多流程使用了几十万个周期，但不足以四舍五入到百分之一。

![在此处输入图像描述](../Images/700eaa8f87babbc8e106c68e72298fea.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:43:20.657

你试过`Get-Counter`吗？

```
PS PS:\> Get-Counter "\Processus(iexplor*)\% temps processeur"

Timestamp                 CounterSamples
---------                 --------------
17/07/2012 22:39:25       \\jpbhpp2\processus(iexplore#8)\% temps processeur :
                          1,5568026751287

                          \\jpbhpp2\processus(iexplore#7)\% temps processeur :
                          4,6704080253861

                          \\jpbhpp2\processus(iexplore#6)\% temps processeur :
                          0

                          \\jpbhpp2\processus(iexplore#5)\% temps processeur :
                          4,6704080253861

                          \\jpbhpp2\processus(iexplore#4)\% temps processeur :
                          0

                          \\jpbhpp2\processus(iexplore#3)\% temps processeur :
                          0

                          \\jpbhpp2\processus(iexplore#2)\% temps processeur :
                          0

                          \\jpbhpp2\processus(iexplore#1)\% temps processeur :
                          1,5568026751287

                          \\jpbhpp2\processus(iexplore)\% temps processeur :
                          0 
```

请注意，这取决于您的语言环境测试：

```
PS PS:\> Get-Counter -ListSet * | where {$_.CounterSetName -contains "processus"} 
```

# wpf - WPF 自定义按钮大小的内容路径

> ID：11523151
> 
> 赞同：1
> 
> 时间：2012-07-17T13:06:34.680
> 
> 标签：wpf, custom-controls, controltemplate, sizetocontent

这是我的自定义按钮模板：

```
<Button.Template>
    <ControlTemplate TargetType="{x:Type Button}">
        <Grid>
            <Path x:Name="Inner" Stretch="Fill" Fill="{TemplateBinding Background}" Data="F1 M 249.989,59.8321L 399.989,59.8321L 429.989,88.1654L 399.989,120.165L 249.989,120.165L 279.989,88.1654L 249.989,59.8321 Z ">
                <Path.Effect>
                    <DropShadowEffect BlurRadius="10" Opacity="0.5" ShadowDepth="4" />
                </Path.Effect>
            </Path>
            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
            <Path x:Name="Border" Stretch="Fill" Stroke="{TemplateBinding BorderBrush}" Data="F1 M 249.989,59.8321L 399.989,59.8321L 429.989,88.1654L 399.989,120.165L 249.989,120.165L 279.989,88.1654L 249.989,59.8321 Z " />
        </Grid>
    </ControlTemplate>
</Button.Template> 
```

以下是它的显示方式：

![在此处输入图像描述](../Images/bc42ad8f221f344b0f70b8c4aaf7c79b.png)

我想做的是调整 2 路径的大小，使其适合内容。这是面包屑自定义控件的一部分，我希望每个面包屑只占用所需的空间。我不知道如何将路径调整为 ContentPresenter 的大小。

我尝试将路径的宽度和高度绑定到 ContentPresenters 的宽度和高度，但没有骰子：/

请注意，在上图中，文本适合路径的宽度和高度，但是，当我从 ContentPresenter 添加文本或删除文本时，它不会调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:14:27.803

我建议将`Path`属性绑定到 ContentPresenter 的`ActualWidth`/ `ActualHeight`，使用 a`Converter`来计算`Path.Data`

由于需要两个属性（高度和宽度），因此您需要一个[IMultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)，或者您需要将整个属性传递`ContentPresenter`到您的绑定中，如下所示：

```
Path Data="{Binding ElementName=MyContentPresenter, 
                    Converter={StaticResource Path1Converter}}" /> 
```

另外，不要忘记您可以在您的文件中使用小写字母`Path.Data`来指定相对点，而不必总是使用绝对点。

# iphone - shouldAutorotateToInterfaceOrientation 不改变对象位置

> ID：11523153
> 
> 赞同：0
> 
> 时间：2012-07-17T13:06:44.790
> 
> 标签：iphone, ios, xcode

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

if (interfaceOrientation == (UIInterfaceOrientationPortrait))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 260, 200)];

if (interfaceOrientation == (UIInterfaceOrientationLandscapeRight))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 400, 200)];

if (interfaceOrientation == (UIInterfaceOrientationLandscapeLeft))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 400, 200)];

if (interfaceOrientation == (UIInterfaceOrientationPortraitUpsideDown))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 260, 200)];

return YES;

 } 
```

我试图在旋转时更改我的 embedYouTube 的大小和位置，但它不起作用。

它可能正在旋转，但不会改变位置和大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:10:49.233

尝试将您的代码移动到 willAnimateRotationToInterfaceOrientation: 方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:22:25.783

在您的 viewDidLoad 方法中，添加一个用于监听 UIDeviceOrientationDidChangeNotification 通知的观察者。

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(didRotate:)
                                      name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

您应该使用 UIDevice 的 beginGeneratingDeviceOrientationNotifications 开始接收通知。

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

在 didRotate 方法中，获取当前方向，并相应地设置框架。

didRotate 方法如下所示。

```
- (void) didRotate:(NSNotification *)notification { 
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
if (orientation == (UIInterfaceOrientationPortrait))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 260, 200)];

if (orientation == (UIInterfaceOrientationLandscapeRight))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 400, 200)];

if (orientation == (UIInterfaceOrientationLandscapeLeft))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 400, 200)];

if (orientation == (UIInterfaceOrientationPortraitUpsideDown))
    [self embedYouTube:yout frame:CGRectMake(30, 155, 260, 200)]; 
} 
```

并且不要忘记在 dealloc 方法中删除观察者。

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

# jquery - jQuery 在每个循环中附加事件处理程序

> ID：11523158
> 
> 赞同：0
> 
> 时间：2012-07-17T13:06:49.130
> 
> 标签：jquery, event-handling, javascript-objects, each, jquery-events

我有一个这样的选项对象：

```
//buttons = html-button elements with id's
buttonTypes: {
"open" : ['#button1', '#button2'], 
"close" : ['#button3', '#button4'] 
} 
```

现在我想将点击处理程序分配给每个`buttonTypes.key`. 与“打开”相关的按钮应调用同名的函数，与“关闭”相关的应调用名为关闭的函数，所以我编写了这个循环：

```
for(a in buttonTypes) {
    $(buttonTypes[a]).each(function(i,button){ 
        $(button).click(function(e) {
            that[a]();
        });
    });
} 
```

问题：

当我点击按钮时，唯一调用的函数是`close()`- 所以它似乎总是最后一个。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:10:53.537

因为`that[a]();`在您单击按钮之前不会评估；到那时，它是`close`.

您应该做的是创建 ; 的本地副本`a`。

```
for (a in buttonTypes) {
    $(buttonTypes[a]).each(function(i,button){
        var type = a;

        $(button).click(function(e) {
            that[type]();
        });
    });
} 
```

也不要忘记`var`( `for (var a in buttonTypes)`)。

# jquery - jquery 是哪种形式

> ID：11523159
> 
> 赞同：2
> 
> 时间：2012-07-17T13:06:56.070
> 
> 标签：jquery, ajax, forms

我正在将 ajax 添加到我制作的这个小列表 Web 应用程序中。

我有一个 php 脚本为列表中的每个项目输出的按钮。当单击其中一项的删除按钮时，我想调用 ajax 以使用 php 和 mysql 删除一项。

下面是项目 62 的删除按钮。它有一个隐藏字段，其中包含数据库中列表项的 id。单击按钮时，我希望调用一个 jquery 单击事件，该事件应发送一个 ajax 请求以从数据库中删除具有该 ID 的项目。

```
<form class="actions" action="index.php" method="POST">
<input type="hidden" name="idDel" id="62" value="62">
<input type="submit" class="button delete" value="X">
</form> 
```

到目前为止我想到的jquery如下。当单击 .delete 类的按钮（任何删除按钮）时，它需要以某种方式从隐藏字段中获取 id 值。

```
('.delete').click(function(){
              //add click logic here

              var id = $("input.delete").val();

    return false;

    $.ajax({
      type: "POST",
      url: "delete.php",
      data: id,
      success: function() { 
```

现在，我查看了两个类似的问题并尝试了他们的解决方案，但我无法从中找出代码。

1.  [JQuery - 提交了哪个表单？](https://stackoverflow.com/questions/4946843/jquery-which-form-was-submitted)
2.  [如何从表单提交事件中获取导致提交的按钮？](https://stackoverflow.com/questions/2066162/how-can-i-get-the-button-that-caused-the-submit-from-the-form-submit-event)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:10:23.600

用于`$(this)`引用被单击的按钮，然后用于[`.prev()`](http://api.jquery.com/prev/)获取按钮之前的元素，这是您在这种情况下想要的输入：

```
$('.delete').click(function() {
    // Add click logic here

    var id = $(this).prev('input').val();

    return false;

    $.ajax({
        type: "POST",
        url: "delete.php",
        data: id,
        success: function() {

        });
    });
}); 
```

* * *

您还可以将 ID 存储在`data-`按钮本身的属性中，这意味着更少的 HTML（但您将失去表单的非 JS POST 能力）：

**HTML：**

```
<form class="actions" action="index.php" method="POST">
   <input type="submit" class="button delete" value="X" data-id="62">
</form> 
```

**jQuery：**

```
$('.delete').click(function() {
    // Add click logic here

    var id = $(this).data('id');

    return false;

    $.ajax({
        type: "POST",
        url: "delete.php",
        data: id,
        success: function() {

        });
    });
}); 
```

# c# - 如何使用 DbParameter 将多个参数传递给 c# 中的参数化查询？

> ID：11523165
> 
> 赞同：1
> 
> 时间：2012-07-17T13:07:07.827
> 
> 标签：c#, .net, database

我想开发可以与所有类型的数据库（Oracle、MySQL、SQLite）一起使用的通用应用程序。所以我从一个共同的地方为每个表单提供了不同的数据源。

而且我还想使用可以接受多个参数的参数化查询。我无法使用 DbParameter 传递多个参数，它适用于单参数查询，但不适用于许多参数。

所以请帮帮我...

```
 dbconnect dc = new dbconnect();//class which contain data source name
            DbConnection con;
            DbCommand cmd;
            DbDataReader dr;
            DbProviderFactory df;
            DataAdapter da;

            df = DbProviderFactories.GetFactory(dbconnect.dbprovider);
            con = df.CreateConnection();
            con.ConnectionString = dbconnect.sqlstr;
            con.Open();
            cmd = df.CreateCommand();
            cmd.CommandText = "update customer set" + " name='@name'," + "address='@address'," + "phone='@phone' " + "where code='@code';";
            cmd.Connection = con;
            DbDataAdapter daa = df.CreateDataAdapter();
            daa.UpdateCommand = cmd;

            DbParameter param = df.CreateParameter();

            param.ParameterName = "@name";
            param.Value = txtname.Text;

            param.ParameterName = "@address";
            param.Value = txtadd.Text;

            param.ParameterName = "@phone";
            param.Value = txtphone.Text;

            param.ParameterName = "@code";
            param.Value = txtcode.Text;
            daa.UpdateCommand.Parameters.Add(param);
            daa.UpdateCommand.ExecuteNonQuery();

            **But this not working.** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:10:58.763

这段代码是问题所在：

```
DbParameter param = df.CreateParameter();

param.ParameterName = "@name";
param.Value = txtname.Text;

param.ParameterName = "@address";
param.Value = txtadd.Text;

param.ParameterName = "@phone";
param.Value = txtphone.Text;

param.ParameterName = "@code";
param.Value = txtcode.Text;
daa.UpdateCommand.Parameters.Add(param); 
```

您正在创建*一个*参数对象，多次更改其`ParameterName`和属性，然后将该*单个*参数添加到命令中。这将为您留下一个带有单个参数的命令，其名称和值将是您设置的最后一个参数。`Value`

 *相反，您想添加几个*单独*的参数，因此您需要`Parameters.Add`多次调用。例如：

```
DbParameter nameParam = df.CreateParameter();
nameParam.ParameterName = "@name";
nameParam.Value = txtname.Text;
daa.UpdateCommand.Parameters.Add(nameParam);

DbParameter addressParam = df.CreateParameter();
addressParam.ParameterName = "@address";
addressParam.Value = txtadd.Text;
daa.UpdateCommand.Parameters.Add(addressParam);
// etc 
```

通过提取一个方法来添加具有给定名称和值的参数，这可以变得更加简洁：

```
AddParameter(daa.UpdateCommand, "@name", txtname.Text);
AddParameter(daa.UpdateCommand, "@address", txtadd.Text);
// etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:10:42.377

您只创建一个参数

```
 DbParameter param = df.CreateParameter();

        param.ParameterName = "@name";
        param.Value = txtname.Text; 
```

ETC...

您需要 `DbParameter`为每个创建一个新的

```
 DbParameter param = df.CreateParameter();
        param.ParameterName = "@name";
        param.Value = txtname.Text;
        daa.UpdateCommand.Parameters.Add(param);

        param = df.CreateParameter();
        param.ParameterName = "@address";
        param.Value = txtadd.Text;
        daa.UpdateCommand.Parameters.Add(param); 
```

ETC....

并将每个添加到命令中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:51:42.077

DbDataAdapter 通常用于批量或多行更新。对于单行更新，请使用 DbCommand。

```
DbProviderFactory df = DbProviderFactories.GetFactory(dbconnect.dbprovider);             
            using(DbConnection con = df.CreateConnection())
            {
                con.ConnectionString = "dbconnect.sqlstr";              
                DbCommand cmd = df.CreateCommand(); 
                cmd.CommandText = "update customer set" + " name='@name'," + "address='@address'," + "phone='@phone' " + "where code='@code';";
                cmd.Connection = con; 

                DbParameter param1 = df.CreateParameter(); 
                param1.ParameterName = "@name"; 
                param1.Value = txtname.Text;

                DbParameter param2 = df.CreateParameter(); 
                param2.ParameterName = "@address"; 
                param2.Value = txtadd.Text; 

                DbParameter param3 = df.CreateParameter(); 
                param3.ParameterName = "@phone"; 
                param3.Value = txtphone.Text; 

                DbParameter param4 = df.CreateParameter(); 
                param4.ParameterName = "@code"; 
                param4.Value = txtcode.Text;

                con.Open();
                cmd.ExecuteNonQuery();
            } 
```*

# android - Android 中的硬件级功能访问

> ID：11523166
> 
> 赞同：2
> 
> 时间：2012-07-17T13:07:14.830
> 
> 标签：android, hardware

我的主要问题是 Android 提供对设备功能的低级别（硬件级别）访问？例如，我可以访问设备上非常详细的通信属性吗？有什么好的参考？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:09:13.300

All features are aviable using the java API, but the NDK is more "low level".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T11:05:51.547

您可以根据需要降低。您可以访问设备检索和感知的所有输入（您可以为此参考 android.* 库或按照建议使用 NDK）。但是，主要由您来解释输入。提到了“接收信号的相位”。您必须先处理信号，然后才能检索其相位。因此，如果您有一些 USB 设备向您发送某种信号，您可以使用 Android.hardware.usb（以及前面提到的其他选项）来帮助您检索输入、处理信号（构建或查找一些 java DSP 库)，瞧！你得到了你想要的所有信息。简而言之，工具就在那里。

# javascript - 将参数发送到 Phonegap 上的 sqlite 函数

> ID：11523170
> 
> 赞同：3
> 
> 时间：2012-07-17T13:07:29.580
> 
> 标签：javascript, sqlite, cordova

我有一个包含一些项目的列表，以及一个循环，我在其中检查列表中的每个项目是否在数据库中找到（如果未找到则插入它）。

```
function AddItems(tx)
    {
        for(var i = 0 ; i<itemscounter; i++)
        { 
            itemI=itemsList[i]; 
            tx.executeSql('SELECT * FROM Items Where ItemsTable.ItemId="'+itemI+'"', [], AddItemsToDB, errorCB);
        }
    } 
```

问题是该函数一直等到它完成所有迭代然后执行 sqlite 语句，所以**itemI**的值总是等于 itemsList[itemscounter]。因此它进入 AddItemsToDB“项目计数器”次数，但始终具有相同的值（数组中的最后一个）。

这是成功函数：

```
function AddItemsToDB(tx, results)
{
        var len = results.rows.length;
        alert(itemI); // Always has the same value!
        if(len==0)
        {
            tx.executeSql('INSERT INTO ItemsTable (ItemId) VALUES ('+itemI +')');

        }
} 
```

所以，我想知道是否有一些方法可以在成功函数本身传递参数，或者是否有另一种方法来逐个传递项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:13:49.147

是的，有。试试这样的事情：

```
tx.executeSql('SELECT * FROM Items Where ItemsTable.ItemId="'+itemI+'"', [], 
       (function(itemI){
           return function(tx,results){
               AddItemsToDB(tx,results,itemI);
           };
       })(itemI), errorCB); 
```

并像这样修改`AddItemsToDB`：

```
function AddItemsToDB(tx, results, itemI) { 
```

# ruby-on-rails - 回形针：从带有扩展名的 url 上传

> ID：11523171
> 
> 赞同：14
> 
> 时间：2012-07-17T13:07:40.643
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, paperclip

我想通过 S3 存储上的回形针从 URL 上传图片。我与：

```
Ruby 1.9.3
Rails 3.2.6
paperclip 3.1.3
aws-sdk 1.3.9 
```

我有我的图片模型：

```
class Asset

  has_attached_file :asset,
    :styles => {:thumb => "60x60>"},
    :storage => :s3,
    :s3_credentials => "#{Rails.root}/config/s3.yml",
    :path => "/pictures/:id/:style.:extension"

  validates_attachment_content_type :asset, :content_type => ['image/gif', 'image/jpeg', 'image/png', 'image/x-ms-bmp']

end 
```

所以基本上我这样做是为了从 URL 下载我的文件：

```
picture = Asset.new(asset: open("http://www.my_url.com/my_picture.jpg"))
picture.save 
```

但它使用错误的文件名保存我的文件，并且没有设置文件的扩展名：

```
#<Asset id: 5, asset_file_name: "open-uri20120717-6028-1k3f7xz", asset_content_type: "image/jpeg", asset_update_at: nil, asset_file_size: 91565, created_at: "2012-07-17 12:41:40", updated_at: "2012-07-17 12:41:40">
p.asset.url
  => http://s3.amazonaws.com/my_assets_path/pictures/5/original. 
```

如您所见，没有扩展名。

我找到了解决它的方法，但我相信我可以有更好的方法。此解决方案是将文件复制到我的计算机上，然后我将其发送到 S3，如下所示：

```
filename = "#{Rails.root}/tmp/my_picture.jpg"
open(filename, 'wb') do |file|
  file << open("http://www.my_url.com/my_picture.jpg").read
end

picture = Asset::Picture.new(asset: open(filename))
picture.save 
```

这适用于我的电脑：

```
#<Asset::Picture id: 10, asset_file_name: "my_picture.jpg", asset_content_type: "image/jpeg", asset_update_at: nil, asset_file_size: 91565, created_at: "2012-07-17 12:45:30", updated_at: "2012-07-17 12:45:30">
p.asset.url
  => "http://s3.amazonaws.com/assets.tests/my_assets_path/10/original.jpg" 
```

但是我不知道这种方法是否适用于 Heroku（我在上面托管我的应用程序）。

没有通过临时文件没有更好的方法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-20T18:05:58.407

好时机。我刚刚发送了一个在几个小时前（2012 年 7 月 20 日）修补的拉取请求，这应该会让你的生活变得非常轻松。

```
self.asset = URI.parse("http://s3.amazonaws.com/blah/blah/blah.jpg") 
```

这将下载您的 jpeg 图像，确保文件名是 blah.jpg 并且内容类型是 'image/jpg'

Paperclip 版本 > 3.1.3（您需要将其链接到 github repo 直到它发布）。

更新：确认使用回形针版本> = 3.1.4

# c# - convert array to dictionary c# with int and string

> ID：11523175
> 
> 赞同：1
> 
> 时间：2012-07-17T13:07:52.763
> 
> 标签：c#, arrays, dictionary

I have a string array with strings and a dictionary.

```
String [] str_array;
Dictionary<int, string> dict = new Dictionary<int, string>();

dict = str_array.toDictionary(); 
```

How do I get my array into a dictionary with int and String? I have seen all those examples with bool, but I need int and string.

The int (key) would be just the actual position of the dictionary (dict.count) and the value would be the value of the array at that position.

edit: thx to all answers but I do not want to iterate over array. I assume that with array.toDictionary the performance would be better than iterating over array and just assigning the value of the array to a dictionary. Arrays might have 5k elements.

edit2: the reason is that i have to pass a dictionary to a method...its REQUIRED. and all my values are within a simple array.

**edit3:** The most important thing is **performance**. Maybe iterating over array and assigning values to dict is faster than array.toDictionary, but the problem is that i do not have that little piece of code to benchmark both.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:11:44.420

首先-您的性能问题很有趣，并且带有过早优化的味道-正如此答案所示，您可能正在查看`for`循环和`ToDictionary`.

除非您在实时系统中运行它，否则我看不出有什么问题。

进入节目 - 以下是我能想到的三种（半）不同方式来构建字典的粗略基准（只有真实世界的时间是可靠的）。第一个使用`for`循环，第二个做同样的事情但不使用数组的`Length`属性（只是为了感兴趣）；第三和第四次使用`ToDictionary`；一个使用 a `Select`，一个使用计数器变量（混合）：

```
[TestMethod]
public void SomeBenchmark()
{
    List<double> forLoopTimes = new List<double>();
    List<double> forLoop2Times = new List<double>();
    List<double> toDictionaryTimes = new List<double>();
    List<double> hybridTimes = new List<double>();

    string[] array = Enumerable.Range(0, 5000).Select(i => i.ToString()).ToArray();

    Dictionary<int, string> dictionary;

    int runCount = 5000;
    int arrayLen = array.Length;

    while (runCount-- != 0)
    {
        Stopwatch sw = Stopwatch.StartNew();
        dictionary = new Dictionary<int, string>();
        for (int i = 0; i < array.Length; i++)
        {
            dictionary[i] = array[i];
        }
        sw.Stop();
        forLoopTimes.Add(sw.Elapsed.TotalMilliseconds);

        sw.Restart();
        dictionary = new Dictionary<int, string>();
        for (int i = 0; i < arrayLen; i++)
        {   //same as before - but using arrayLen instead of property
            dictionary[i] = array[i];
        }
        sw.Stop();
        forLoop2Times.Add(sw.Elapsed.TotalMilliseconds);

        sw.Restart();
        dictionary = array.Select((s, i) => new { Key = i, Value = s }).ToDictionary(v => v.Key, v => v.Value);
        sw.Stop();
        toDictionaryTimes.Add(sw.Elapsed.TotalMilliseconds);

        int counter = 0;
        sw.Restart();
        dictionary = array.ToDictionary(s => counter++, s => s);
        sw.Stop();
        hybridTimes.Add(sw.Elapsed.TotalMilliseconds);
    }
    Console.WriteLine("for loop average: {0} milliseconds", forLoopTimes.Average());
    Console.WriteLine("for loop(2) average: {0} milliseconds", forLoop2Times.Average());
    Console.WriteLine("ToDictionary average: {0} milliseconds", toDictionaryTimes.Average());
    Console.WriteLine("Hybrid average: {0} milliseconds", hybridTimes.Average());
} 
```

结果（发布版本，在我的戴尔 2.4Ghz 工作站上运行大约需要 20 秒）：

> 对于循环平均值：0.28880804 毫秒
> 
> For loop(2) 平均：0.2773845 毫秒
> 
> ToDictionary 平均：0.479094339999998 毫秒
> 
> 混合平均：0.353655779999999 毫秒

所以`for`不可否认，循环更快 - 至少是最接近的`ToDictionary`实现的 22%。我已经尝试了 100,000 个元素，然后它达到了大约 30%。

请注意第二个`for`循环结果 - 似乎表明绕过该`Length`属性是一个好主意。事实上，我已经连续进行了 4 次运行，这些是结果（包括第一次，来自上面）：

> For循环：0.28880804、0.28562478、0.283770739999999、0.287241679999999
> 
> 对于循环（2）：0.2773845、0.27621306、0.27869996、0.27962916
> 
> ToDictionary: 0.479094339999998, 0.476417939999997, 0.476162219999997, 0.475776479999997
> 
> 混合：0.353655779999999、0.3583224、0.352022739999998、0.349865779999999

然而，我也看到了至少一个基准测试结果的结果——证明了这种基准测试在很大程度上是毫无意义的。实际上，我们也应该为每个测试生成一个不同的数组，以避免缓存等。

**有一个替代方案。**

如果您调用的方法接受一个`IDictionary<int, string>`（注意 - 接口）；而不是`Dictionary<int, string>`你可以创建一个简单的包装器类型来实现接口的必要成员，从而完全避免需要投影到字典中；只要只需要某些成员。这是一个几乎完整的实现：

```
public class FakeDictionary : IDictionary<int, string>
{
    private readonly string[] _array;

    public FakeDictionary(string[] array)
    {
        _array = array;
    }

    #region IDictionary<int,string> Members

    public void Add(int key, string value)
    {
        throw new NotSupportedException();
    }

    public bool ContainsKey(int key)
    {
        return key >= 0 && key < _array.Length;
    }

    public ICollection<int> Keys
    {
        get { return Enumerable.Range(0, _array.Length).ToArray(); }
    }

    public bool Remove(int key)
    {
        throw new NotSupportedException();
    }

    public bool TryGetValue(int key, out string value)
    {
        value = null;
        if (key >= 0 && key < _array.Length)
        {
            value = _array[key];
            return true;
        }
        return false;
    }

    public ICollection<string> Values
    {
        get { return _array; }
    }

    public string this[int key]
    {
        get
        {
            try
            {
                return _array[key];
            }
            catch (ArgumentOutOfRangeException ex)
            {
                throw new KeyNotFoundException("Invalid key", ex);
            }
        }
        set //note - can't be used to add items
        {
            try
            {
                _array[key] = value;
            }
            catch (ArgumentOutOfRangeException ex)
            {
                throw new KeyNotFoundException("Invalid key", ex);
            }
        }
    }

    #endregion

    #region ICollection<KeyValuePair<int,string>> Members

    public void Add(KeyValuePair<int, string> item)
    {
        throw new NotSupportedException();
    }

    public void Clear()
    {
        throw new NotSupportedException();
    }

    public bool Contains(KeyValuePair<int, string> item)
    {
        return ContainsKey(item.Key) && _array[item.Key].Equals(item.Value);
    }

    public void CopyTo(KeyValuePair<int, string>[] array, int arrayIndex)
    {
        //too much for an SO answer.
        throw new NotImplementedException();
    }

    public int Count
    {
        get { return _array.Length; }
    }

    public bool IsReadOnly
    {
        //technically it's not - because we can modify individual elements - 
        //but at the collection-level it is
        get { return true; }
    }

    public bool Remove(KeyValuePair<int, string> item)
    {
        throw new NotSupportedException();
    }

    #endregion

    #region IEnumerable<KeyValuePair<int,string>> Members

    public IEnumerator<KeyValuePair<int, string>> GetEnumerator()
    {
        throw new NotImplementedException();
    }

    #endregion

    #region IEnumerable Members

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T13:13:45.417

这可以满足您的需求，即使对我来说创建一个带有仅是数组索引的键的字典也没有意义。

```
Dictionary<int, string> dict = str_array
    .Select((s, i) => new { S = s, Index = i})
    .ToDictionary(x => x.Index, x => x.S); 
```

数组（或列表）的索引器（至少）与查找字典键一样快。

[https://stackoverflow.com/a/908055/284240](https://stackoverflow.com/a/908055/284240)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T13:26:24.773

最好只使用`foreach`或者`for`因为它更容易阅读并且在 LINQ 上具有良好的性能（我认为）。但是这个答案只是为了提供另一种使用方式`Enumerable.ToDictionary`:-)

```
 Dictionary<int, string> dict;
  dict = Enumerable.Range(0, str_array.Length).ToDictionary(i => i, i => str_array[i]); 
```

这是一个简短的：

```
 int i = 0; // start key
  Dictionary<int, string> dict;
  dict = str_array.ToDictionary(s => ++i); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T13:10:17.600

```
for (int i = 0; i < str_array.Length; i++)
{
    dict[i] = str_array[i];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T13:10:31.923

很难想象你为什么需要这样的东西，因为你可以把一个数组想象成它已经是一个带有 int 键和字符串值的字典。

但你可以这样做：

```
int i = 0;
foreach (string s in str_array)
{
    dict.Add(i++, s);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-17T13:11:02.680

```
foreach(string s in str_array)
    dict.Add(dict.Count, s); 
```

像这样的东西，作为一个简单的例子？

或者，按照以下方式定义扩展方法：

```
public static Dictionary<int, T> ToDictionary<T>(this IEnumerable<T> source)
{
    Dictionary<int, T> result = new Dictionary<int, T>();
    foreach(T item in source)
        result.Add(result.Count, item);
} 
```

并通过调用来使用它`str_array.ToDictionary()`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-17T13:20:46.080

如果你想让它变得简单，你可以使用扩展方法。

```
public static class ExtensionMethod 
{
    public static IDictionary<int, string> ToDictionary(this string[] array)
    {
        return array
            .Select((k, v) => new { Key = k, Value = v})
            .ToDictionary(x => x.Key, x => x.Value);
    }
} 
```

然后你可以在你的程序中使用它：

```
String [] str_array;
Dictionary<int, string> dict = new Dictionary<int, string>();

dict = str_array.ToDictionary(); 
```

**请注意，只有在**遇到性能问题`foreach`时才需要担心 LinQ 性能。只有巨大的操作在性能上会有所不同。

 **另请参阅[“嵌套 foreach”与“lambda/linq 查询”性能（LINQ-to-Objects）](https://stackoverflow.com/questions/1044236/nested-foreach-vs-lambda-linq-query-performancelinq-to-objects)**

# java - try catch continue execution on exception

> ID：11523183
> 
> 赞同：0
> 
> 时间：2012-07-17T13:08:18.983
> 
> 标签：java, exception, exception-handling

This question was asked to me on an interview. In the below snippet the exception occur in the third line of the try block. The question was how to make the 4th line execute. The third line should be in the catch block itself. They gave me an hint 'using throw and throws'.

```
 public void testCase() throws NullPointerException{
        try{
            System.out.println("Start");
            String out = null;
            out.toString();
            System.out.println("Stop");

        }catch(NullPointerException e){
            System.out.println("Exception");
        }
    } 
```

Can any one help. Thanks in advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T13:18:33.283

首先，异常发生在 try 块的**第三**行 - 在`out.toString()`第 2 行，而不是第 2 行。

我假设您希望执行第四行（即打印停止）

如果您只想简单地打印 Stop，则有不同的方法可以执行下一行（打印停止）：

```
 public static void testCase() throws NullPointerException{
        try{
            System.out.println("Start");
            String out = null;
            out.toString();
            System.out.println("Stop");

        }catch(NullPointerException e){
            System.out.println("Stop");
            System.out.println("Exception");
        }
    } 
```

或给出提示

> 第三行应该在 catch 块本身

```
 public static void testCase() throws NullPointerException{
        try{
            System.out.println("Start");
            String out = null;
            Exception e = null;

            try
            {
                out.toString();
            }
            catch(Exception ex)
            {
                e = ex;
            }
            System.out.println("Stop");

            if(e != null)
                throw e;

        }catch(Exception e){
            System.out.println("Exception");
        }
    } 
```

还有其他方法可以做到这一点，例如。finally 块，等等。但是由于给出的信息量有限并且以使其工作为目标 - 以上应该就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:38:37.360

你可以这样做：

```
public void testCase() throws NullPointerException{
        try{
            System.out.println("Start");
            String out = null;
            out.toString();
        }catch(NullPointerException e){
            System.out.println("Exception");
        } finally {
            System.out.println("Stop");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:39:02.840

棘手的片段，问题是：

*   当你崩溃一个内部地址时会发生什么，这里的 `out`输出，被替换为`String`but it is `null`，
    或者
*   是否可以打印一个`null String`, 周围有一个片段来集中你的注意力。

你可以重写这一行： **`("" + out).toString();`**传递给第四行。

“照原样”这不是技术面试，除非你必须提出第二个问题，即你必须与第三行有关。

测试是：当候选人没有看到问题的所有部分时，或者当问题嵌套时，他会做什么，是否能够寻求帮助以理解真正的问题。

*评论后编辑*

除非您注释该行，否则您必须捕获损坏的代码：

```
try {
    // Corrupted code to avoid 
    String out = null;
    out.toString();
} catch (Exception e) {
    // Careful (and professionnal) signal
    System.out.println("out.toString() : code to repair.");
} 
System.out.println("Stop"); // will appear to console 
```

# java - Switch perspective in a RCP application since Eclipse Juno?

> ID：11523187
> 
> 赞同：6
> 
> 时间：2012-07-17T13:08:37.397
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-indigo, eclipse-juno

In my RCP application I use this code to switch perspective :

```
IWorkbenchWindow window = getViewSite().getWorkbenchWindow();
window.getWorkbench().showPerspective(PRODUCT_PERSPECTIVE_ID, window); 
```

I didn't change my code but I changed my developement environnement from

```
java 6 64bits + windows + Eclipse Indigo 
```

to

```
java 7 32bits + windows + Eclipse Juno 
```

And now the perspective doesn't switch any more, with no exception and nothing suspect visible in debug.

I didn't find any bug report.

Is there an explanation ? A workaround ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T15:00:06.317

我也遇到过这个问题。据我所知，这是 Juno (4.2.0) 中的回归。我使用调试器逐步完成对*showPerspective()*的调用。没有任何明确的尝试来实际改变这种观点。可能缺少内部事件侦听器，或者新框架的*showPerspective()端口不完整。*

作为一种解决方法，以下代码成功地改变了我的观点：

```
IWorkbenchWindow window = getViewSite().getWorkbenchWindow();
IPerspectiveRegistry registry = workbench.getPerspectiveRegistry();
IWorkbenchPage page = window.getActivePage();
page.setPerspective(registry.findPerspectiveWithId(PRODUCT_PERSPECTIVE_ID)); 
```

根据进行这些调用的上下文，您可能希望对其中一些调用进行空保护，或者检查`Workbench.isClosing()`以确保安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T13:34:13.953

这是错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=395084](https://bugs.eclipse.org/bugs/show_bug.cgi?id=395084)并针对计划于 6 月发布的 Eclipse Luna 进行了修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T10:23:00.997

这是一个旨在澄清和解决我的问题的答案：

使用 Eclipse 4 IDE，构建一个在 Eclipse 4 之前开发的 RCP 应用程序，集成 Java 7 特性并兼容 Windows 32 位。当然还可以切换视角。

这个答案并不能解决那些想要在 RCP 应用程序中切换透视图并使用新 Eclipse 4 平台的特性或外观（不要与 Eclipse 4 IDE 混淆）的人的问题。但我不会推荐它，至少对于旧应用程序（在 Eclipse 3 上开发），因为：

*   这太慢了，以至于应用程序几乎无法使用
*   有许多图形故障
*   有错误，其中一个与透视切换有关

对于这 3 点，我不能说是由于 Eclipse 4 平台还是 Eclipse 3 兼容层。我希望专门为新的 Eclipse 4 平台开发的新应用程序能够正确运行。

**所以我的解决方案是定义一个 Eclipse 3 目标并将其用于构建。**

这是完整的程序：

1.  安装 JDK 7（32 位版本）
2.  安装Eclipse 3.7（32位版本）
3.  安装 Eclipse 4（32 位版本）
4.  启动 Eclipse 4 并导入所需的项目
5.  进入Window/Preferences/Plug-in Development/Target Platform
6.  单击“添加”，然后单击“无”
7.  单击“添加”然后单击“安装”并选择您的 Eclipse 3.7 目录
8.  创建目标后，选择它（仍在 Window/Preferences/Plug-in Development/Target Platform 中）

现在，在您`.product`的“Eclipse 产品导出向导”中，将构建一个 Eclipse 3 可执行文件。

实用笔记：

*   “全部清除”还不够，我必须在目标选择后停止/重新启动 Eclipse 才能使其正常工作
*   安装过程删除了我的一些`.product`字段。我不得不重置 ID 并检查“该产品包含本机 laucher 工件”

# android - Error code 1, -110 in media player android

> ID：11523188
> 
> 赞同：1
> 
> 时间：2012-07-17T13:08:38.097
> 
> 标签：android, android-4.0-ice-cream-sandwich, beagleboard

I got the MediaPlayer error code as (1,-110) on BeagleBoard Hardware running ICS.The code runs fine on android tablets with ICS but I get a dialog box as "Sorry,this video cannot be played" error on BeagleBoard only.Any suggestions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T10:45:36.070

这是来自 MediaPlayer 的超时错误：

[http://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_ERROR_TIMED_OUT](http://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_ERROR_TIMED_OUT)

此外，Android 4.1.2 上的三星固件可能会出现问题，我在 Galaxy S2 mini 和 Galaxy S3 中看到过。看看这里： [https](https://stackoverflow.com/a/18378273/3032209) ://stackoverflow.com/a/18378273/3032209 如果你用另一个库播放文件，你可以解决它，它有足够的编解码器，比如[aacdecoder-android](https://code.google.com/p/aacdecoder-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T19:15:36.940

我知道我对你的问题的回答为时已晚，我认为你现在已经能够解决这个问题，但如果不是这样，对于那些正在为媒体播放器错误 (1, -110) 苦苦挣扎的人（就像我做了整个今天一天，Android HTC Desire X Jelly Bean 4.1.1），也许这就是你的解决方案：

只需重新启动您的 android（或关闭所有使用媒体播放器的应用程序）。

就我而言，这不是编程错误，我只需要使用媒体播放器实例打开许多应用程序，这导致了超时，我无法再使用它了。

# ms-access - MS Access 安全性（前端与后端）

> ID：11523191
> 
> 赞同：0
> 
> 时间：2012-07-17T13:08:45.580
> 
> 标签：ms-access

如果我有一个连接到 MS Access 后端的 MS Access 前端，有没有办法隐藏/权限阻止通往后端文件夹的路径，这样他们就无法在不切断前端/后端连接的情况下访问后端数据库？

现在我不能将服务器专用于更“安全”的数据库形式或类似的东西，所以我现在坚持使用 MS Access。我只是不希望有人查看链接表路径，然后导航到该文件夹​​并访问后端信息。对此可能有什么解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:23:48.980

使用 MS Access 2003，您可以获得一些[用户级安全](http://office.microsoft.com/en-us/access-help/about-user-level-security-mdb-HP003070410.aspx)保护。请务必小心，论坛上到处都是永久无法访问其文件的人。您还应该创建自己的菜单并进行编译。可以禁用 shiftkey 打开和所有内置菜单，这又一次可以将您锁定在文件之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:31:39.467

我知道您已经提到过，但我强烈建议您将后端迁移到 SQLExpress。安全模型更好更安全地使用。SQL Express 不需要专用服务器并且在桌面上运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:14:39.177

我认为您可以使用密码保护您的后端文件。

# mysql - MySQL joined query count returning a row for each result

> ID：11523193
> 
> 赞同：0
> 
> 时间：2012-07-17T13:08:54.247
> 
> 标签：mysql, sql, wordpress, group-by, left-join

So, I'm doing a custom wordpress query to pull events (Events are stored in custom fields (meta data) hence the need for the JOINs) and I want to get a count of the rows returned. My problem is that I'm getting a bunch of rows returned each containing a count against each post ID returned.

My query looks a bit like this:

```
SELECT count(*)
FROM   wp_posts AS wposts 
   LEFT JOIN wp_postmeta AS metafeatured 
          ON wposts.id = metafeatured.post_id 
   LEFT JOIN wp_postmeta AS metastart 
          ON wposts.id = metastart.post_id 
   LEFT JOIN wp_postmeta AS metaend 
          ON wposts.id = metaend.post_id 
   LEFT JOIN wp_term_relationships 
          ON ( wposts.id = wp_term_relationships.object_id ) 
   LEFT JOIN wp_term_taxonomy 
          ON ( wp_term_relationships.term_taxonomy_id = 
               wp_term_taxonomy.term_taxonomy_id ) 
WHERE  wposts.post_type = 'll_events' 
   AND wposts.post_status = 'publish' 
   AND ( ( ( metastart.meta_key = 'll_events_startdate' 
             AND Cast(metastart.meta_value AS UNSIGNED) < 1342997940 ) 
           AND ( metaend.meta_key = 'll_events_enddate' 
                 AND Cast(metaend.meta_value AS UNSIGNED) > 1342525664 ) ) 
          OR ( ( metastart.meta_key = 'll_events_startdate' 
                 AND Cast(metastart.meta_value AS UNSIGNED) <= 1342997940 ) 
               AND ( metaend.meta_key = 'll_events_enddate' 
                     AND Cast(metaend.meta_value AS UNSIGNED) >= 1342525664 
                   ) ) 
          OR ( ( metastart.meta_key = 'll_events_startdate' 
                 AND Cast(metastart.meta_value AS UNSIGNED) BETWEEN 
                     1342525664 AND 1342997940 
                   ) 
               AND ( metastart.meta_key = 'll_events_enddate' 
                     AND Cast(metaend.meta_value AS UNSIGNED) BETWEEN 
                         1342525664 AND 1342997940 
                   ) ) 
          OR ( ( metastart.meta_key = 'll_events_startdate' 
                 AND Cast(metastart.meta_value AS UNSIGNED) BETWEEN 
                     1342525664 AND 1342997940 
                   ) 
               AND ( metaend.meta_key = 'll_events_enddate' 
                     AND Cast(metaend.meta_value AS UNSIGNED) <= 1 ) ) ) 
GROUP BY wposts.ID, metastart.post_id, metaend.post_id, wp_term_relationships.object_id
ORDER BY metastart.meta_value ASC 
```

I've tried loads of combinations of group, count and such and can't get the expected result (a single row in the result-set containing a 'count'). Instead, my resultset looks something like:

```
count(*)
24
30
30
30
12
16
1 
```

... and so on, where I need:

```
count(*)
139 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:10:20.343

只需删除 GROUP BY 子句

# doctrine-orm - Zend\Form 结合 Doctrine 2 和 ManyToOne 关系

> ID：11523195
> 
> 赞同：0
> 
> 时间：2012-07-17T13:09:01.910
> 
> 标签：doctrine-orm, zend-form, relationship, zend-framework2

今天我开始阅读 Zend\Form 的特性。我从 Michael Gallego 那里找到了一个[很棒的教程](http://www.michaelgallego.fr/blog/?p=190)，他在其中解释了如何使用一些很酷的新功能。

如果我们正在处理 1-1 关系，则该示例到目前为止运行良好。教义很好地涵盖了它们。

我想做的是

*   我想要一个选择框，而不是相关值的 textarea
*   选择框应具有有效选项，具体取决于数据库中的内容
*   为了以后编辑的目的，需要选择当前选择的值
*   Doctrine 不应向 One-Table 添加新行

正如您在[我的 github 资源](https://github.com/manuakasam/ama2/tree/master/module/Application/src/Application/Entity "github来源")中看到的那样，我使用了教程中的示例，但将其缩短为“产品”和“品牌”。Brands - 在我的示例中 - 是一个带有预定义 Brands（Nike、Adidas、Puma 等）的 DB-Table，当您从表单创建新产品时，您会将这些 Brands 作为选择菜单。

现在，我添加选项的方式不起作用。我知道我可以使用类似的数组手动设置选项

```
$form->get('product')->get('brand')->setAttribute('options', array('Nike'=>'1', 'Adidas'=>'2', etc); 
```

但我强烈认为有一种更自动化的方法可以做到这一点。我根本不理解 Zend 提供的所有这些 Hydrator 类。

问题是，即使我如上所述手动定义数组，产品和品牌的映射也无法正常工作。现在的转储`$product`看起来像这样

```
object(Application\Entity\Product)[210]
  protected 'id' => null
  protected 'name' => string 'asdasd' (length=6)
  protected 'price' => string '123123' (length=6)
  protected 'brand' => 
    object(Application\Entity\Brand)[215]
      protected 'id' => null
      protected 'name' => string '1' (length=1) 
```

显然，品牌的映射完全错误（对于我想要实现的目标，zend 可能认为这是正确的，因为我选择的 VALUE 是 1）。

**问题**我如何告诉我的表单将选择值映射到映射的对象 ID？尽管在这种情况下，我设置产品模型的方式可能是错误的。

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:16:09.977

查看您的 BrandFieldSet，您只为 InputFilterProvider 指定了名称，因此永远不会传递 id。

其次，我会建议您删除注册表。使用 ServiceManager 创建的类可以/应该实现 ServiceManagareAwareInterface 如果它们需要访问其他任何东西（如果没有使用构造函数指定）。

因此，在您的控制器中，您可以访问服务管理器，而不是使用您的注册表

```
$this->getServiceLocator()
     ->get('FQCN_OR_ALIAS'); 
```

该框架的贡献者编写了一些很棒的示例，并在此处列出了一些 github 存储库。

[https://github.com/ZF-Commons](https://github.com/ZF-Commons)和[https://github.com/EvanDotPro](https://github.com/EvanDotPro)（不能再发帖，因为我缺乏声誉）

如果您有任何其他问题，请加入我们在 irc.freenode.org 上的 #zftalk.2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T16:41:34.973

这是来自我的表单对象的代码我希望它会有所帮助

```
class ProductForm extends Form
{
public function __construct($em)
{
    parent::__construct();

    $this->add(array(
        'name' => 'productGroupId',
        'attributes' => array(
            'type'  => 'select',
            'label' => 'Category',
            'options' => array(),
        ),
    ));

$this->setProductGropus($em->getRepository('Project\Entity\ProductGroup')->findAll());

public function setProductGropus($groups)
{
  $groupsForm = array('--Select--'=>'');
  foreach ($groups as $group) {
        $groupsForm[$group->name] = (string) $group->productGroupId;
    }
    $this->get('productGroupId')->setAttribute('options',$groupsForm);  
}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-18T17:29:31.660

虽然这是一个老问题，但我想我还是会回答。以前的答案不使用[`ObjectSelect`](https://github.com/doctrine/DoctrineModule/blob/master/docs/form-element.md)Doctrine 。

您说有一个 OneToOne 关系并且不希望将记录添加到“One-table”；我在这里假设你有一个[单向的 OneToOne](http://doctrine-orm.readthedocs.io/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-one-unidirectional)关系。

但是，如果您将“产品”和“品牌”作为实体，[OneToMany 双向](http://doctrine-orm.readthedocs.io/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional)关系可能更合适；）

然而，使用 OneToOne，您的实体应如下所示：

```
class Brand {
    /**
     * @var int
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /**
     * @var string
     * @ORM\Column(name="name", type="string", nullable=false, length=128)
     */
    protected $name;

    //Getters/Setters
}

class Product {
    /**
     * @var int
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /**
     * @var string
     * @ORM\Column(name="name", type="string", nullable=false, length=128)
     */
    protected $name;

    //Change below "OneToOne" to "ManyToOne" for proper product + brand relationship. Just this change will leave it as uni-directional.
    /**
     * @var Brand
     * @ORM\OneToOne(targetEntity="Brand", fetch="EAGER")
     * @ORM\JoinColumn(name="brand", referencedColumnName="id")
     */
    protected $brand;

    //Getters/Setters
} 
```

假设您的实体是正确的，那么您应该使用[`ObjectSelect`](https://github.com/doctrine/DoctrineModule/blob/master/docs/form-element.md)构建到 Doctrine 中。

```
class ProductForm
{
    /** @var  ObjectManager */
    protected $objectManager;

    public function __construct($name = 'product-form', $options = [])
    {
        parent::__construct($name, $options);
    }

    public function init()
    {
        $this->add([
            'type' => 'DoctrineModule\\Form\\Element\\ObjectSelect',
            'name' => 'brand',
            'required' => true,
            'attributes' => [
                'id' => 'selectBrand',
                'multiple' => false,
                'value' => null,
            ],
            'options' => [
                'label' => 'Select brand',
                'object_manager' => $this->getObjectManager(),
                'target_class' => Brand::class,
                'property' => 'id',
                'is_method' => true,
                'find_method' => [
                    'name' => 'findBy',
                    'params' => [
                        'criteria' => [],
                        'orderBy' => ['name' => 'ASC'],
                    ],
                ],
                'empty_option' => '--- Select Brand ---',
                'label_generator' => function (Brand $entity) {
                    return $entity->getName();
                }
            ],
        ]);
    }

    /**
     * @return ObjectManager
     */
    public function getObjectManager()
    {
        return $this->objectManager;
    }

    /**
     * @param ObjectManager $objectManager
     */
    public function setObjectManager(ObjectManager $objectManager)
    {
        $this->objectManager = $objectManager;
    }
} 
```

确保设置`Module.php`能够加载此表单。将`getServiceConfig()`功能添加到它。

```
public function getServiceConfig()
    {
        /** @var ServiceManager $sm */
        return [
            'factories' => [
                'product_form' => function ($sm)
                {
                    $form = new ProductForm();
                    $form->setInputFilter(new ProductInputFilter());

                    /** @var EntityManager $entityManager */
                    $entityManager = $sm->get('doctrine.entitymanager.orm_default');

                    //Set Doctrine ObjectManager
                    $form->setObjectManager($entityManager);
                    //Set Doctrine Object as Hydrator
                    $form->setHydrator(new DoctrineObject($entityManager, Product::class));
                    //Set Doctrine Entity
                    $form->setObject(new Product());
                    //Initialize elements onto form
                    $form->init();

                    return $form;
                },
            ],
        ];
    }
} 
```

接下来，将表单加载到 Controller 中。

```
$form = $this->getServiceLocator()->get('product_form'); 
```

============================

注意：这一直有效到 Zend Framework 2.5.2

# python - Pausing a process or thread in Python

> ID：11523204
> 
> 赞同：0
> 
> 时间：2012-07-17T13:09:53.727
> 
> 标签：python, multithreading, process

I've created a little audio player that looks up a chapter of an audiobook at a website I've specified, downloads it, and plays it. The only problem is, I can't pause it. To play the mp3 file I'm using `os.system("afplay chapter.mp3")`

I've thought about creating a thread with the `os.system` call in it but I'm pretty sure I can't pause it that way. If the thread was a loop I could just lock a variable it needs to access and unlock when I'm ready to resume. But since this thread would be just one line of code that doesn't seem possible. I've also looked at creating a process and sending `SIGSTOP` to it. But for some unknown reason that won't work.

```
import os, signal
from multiprocessing import Process

p = Process(target=play)
p.start()
raw_input("press enter to pause: ")
os.kill(p.pid, signal.SIGSTOP) 
```

The code just executes silently without stopping the process.

I know there are alternatives to afplay but for now I'm just going to stick with the os.system call. So my question is, How can I pause a one-line thread or process? Instead of creating a new process with the Process() call do I need to find the process id of afplay? If so how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:31:41.447

`os.system`创建一个子进程并等待该子进程退出。你可以用 [`os.execv`](http://docs.python.org/library/os.html#os.execv)另一个程序替换一个进程，或者[`subprocess.Popen`](http://docs.python.org/library/subprocess.html?highlight=subprocess#subprocess.Popen)用来创建一个你可以找到 pid 的子进程[`Popen.pid`](http://docs.python.org/library/subprocess.html?highlight=subprocess#subprocess.Popen.pid)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:38:19.050

为什么不直接使用 subprocess 模块而不是 subprocess 和 os.system？这应该可以让您更好地控制生成的进程。

# java - Jsp+Java application execution not working

> ID：11523206
> 
> 赞同：-1
> 
> 时间：2012-07-17T13:09:55.497
> 
> 标签：java, eclipse, jsp, tomcat, web-applications

I'm sorry of being so general, but I have a problem with my application execution and I have no idea of what it could be. It's made by Jsp and Java parts, and developed with Eclipse. It uses a Postgresql database and an Apache Tomcat server.

When I click on **Run As -> Run On Server**, the program stops immediately. This is what Eclipse shows:

![enter image description here](../Images/1351b9f149936d469daff1d4dfebc759.png)

And this is what the console prints:

> 17-lug-2012 14.53.31 org.apache.catalina.core.AprLifecycleListener init INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path:
> 
> C:\Programmi\Java\jdk1.6.0_21\bin;.;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Programmi/Java/jre6/bin/client;C:/Programmi/Java/jre6/bin;C:/Programmi/Java/jre6/lib/i386;C:\Programmi\CollabNet\Subversion Client;C:\Programmi\MiKTeX 2.9\miktex\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem; c:\Programmi\Microsoft SQL Server\90\Tools\binn\;C:\Programmi\Intel\DMIX;C:\Programmi\Intel\WiFi\bin\;C:\Programmi\MATLAB\R2010a\runtime\win32;C:\Programmi\MATLAB\R2010a\bin;C:\Programmi\File comuni\Autodesk Shared\;C:\Programmi\R-Language\R-2.13.1\bin\;C:\Programmi\R-Language\R-2.13.1\bin\;C:\Programmi\OpenVPN\bin\; C:\Programmi\Java\jdk1.6.0_21\bin\ 17-lug-2012 14.53.31 org.apache.tomcat.util.digester.SetPropertiesRule begin
> 
> AVVERTENZA: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:BioTesiWeb' did not find a matching property. 17-lug-2012 14.53.32 org.apache.coyote.AbstractProtocolHandler init
> 
> INFO: Initializing ProtocolHandler ["http-bio-8080"] 17-lug-2012 14.53.32 org.apache.coyote.AbstractProtocolHandler init
> 
> INFO: Initializing ProtocolHandler ["ajp-bio-8009"] 17-lug-2012 14.53.32 org.apache.catalina.startup.Catalina load
> 
> INFO: Initialization processed in 460 ms 17-lug-2012 14.53.32 org.apache.catalina.core.StandardService startInternal
> 
> INFO: Starting service Catalina 17-lug-2012 14.53.32 org.apache.catalina.core.StandardEngine startInternal
> 
> INFO: Starting Servlet Engine: Apache Tomcat/7.0.6 17-lug-2012 14.53.32 org.apache.coyote.AbstractProtocolHandler start
> 
> INFO: Starting ProtocolHandler ["http-bio-8080"] 17-lug-2012 14.53.32 org.apache.coyote.AbstractProtocolHandler start
> 
> INFO: Starting ProtocolHandler ["ajp-bio-8009"] 17-lug-2012 14.53.32 org.apache.catalina.startup.Catalina start
> 
> INFO: Server startup in 401 ms

Have you any idea of why the execution of the program fails? Are there some libraries missing? Have I forgot something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:17:44.537

请提供更多细节...

现在只需检查 web.xml 中的 Servlet 映射吗？而且 servlet 的名称也正确...

查看以下链接以了解您遇到的错误

[https://stackoverflow.com/questions/2231163/what-tomcat-native-library-should-i-be-using-in-production](https://stackoverflow.com/questions/2231163/what-tomcat-native-library-should-i-be-using-in-production)

[在 java.library.path 上找不到基于 APR 的 Apache Tomcat Native 库？](https://stackoverflow.com/questions/4278047/apr-based-apache-tomcat-native-library-was-not-found-on-the-java-library-path)

# css - Sencha Touch CSS3 -webkit browser prefixes etc

> ID：11523209
> 
> 赞同：0
> 
> 时间：2012-07-17T13:10:04.700
> 
> 标签：css, sencha-touch, sencha-touch-2

I realise that Sencha Touch 2 states that they only support webkit browsers but was looking at just enabling it on a friend's Windows Phone 7.5 to see what it looked like.

I realise that alot of the CSS etc uses -webkit browser prefix like:

```
-webkit-border-radius: 
```

instead of

```
border-radius 
```

I understand that if I remove the -webkit- value that older versions of webkit will stop working but Chrome is set to auto update and I'm wondering if there's a list anywhere on the internet that shows the version of webkit for each version of Android/RIM etc.

Something like:

```
Android 2.0.3 - Webkit 504
Android 2.3.1 - Webkit 634 
```

I guess a solution would be to just to add the one without the browser prefix as well

# jquery - 使用 jquery 动画 div 全屏 div 覆盖

> ID：11523211
> 
> 赞同：0
> 
> 时间：2012-07-17T13:10:08.577
> 
> 标签：jquery, jquery-animate

我有一个全屏 div 叠加层，通过将其位置设置为固定并将其置顶：-100% 来隐藏它。我想向下滑动以成为全屏覆盖，我正在尝试使用 .animate 使用 jquery 来做到这一点。我有一个小提琴，但似乎无法让它工作，我能得到的任何帮助都会很棒，谢谢。

[http://jsfiddle.net/5zZGv/2/](http://jsfiddle.net/5zZGv/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:24:51.180

搞砸了一些，得到了它，[http://jsfiddle.net/5zZGv/3/](http://jsfiddle.net/5zZGv/3/)

$("#go").click(function(){ $("#fullscreen").animate({ top: '0px', height:'100%', }, 1500 ); });

# android - 发送无声短信

> ID：11523212
> 
> 赞同：1
> 
> 时间：2012-07-17T13:10:11.043
> 
> 标签：android, sms

如何发送无声短信（SMS 0 类）？最好来自 android 设备，但任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:24:19.697

AFAIK 是 0 类即时显示的短信，但您可以通过 SmsManager 发送无声（用户无法识别已发送短信）短信

请参阅此处：[SmsManager 参考](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html)

# oracle - Oracle "Cannot update to NULL"

> ID：11523213
> 
> 赞同：2
> 
> 时间：2012-07-17T13:10:11.143
> 
> 标签：oracle, oracle10g, sql-update, notnull

I have this query on Oracle 10g:

```
UPDATE "SCHEMA1"."CELLS_GLIST" 
SET ("GLIST_VALUE_ID", "USER_ID", "SESSION_ID") = (
    SELECT "GLIST_VALUE_ID", 1 AS "USER_ID", 123456 AS "SESSION_ID"
    FROM "SCHEMA1"."GLISTS_VALUES_UOR"
    WHERE ("UOR_ID"=3)
    AND ("GLIST_ID"=67)
    AND ("GLIST_VALUE_DESC" = (
        SELECT "GLIST_VALUE_DESC"
        FROM "BMAN_TP1"."GLISTS_VALUES_UOR"
        WHERE ("UOR_ID"=3)
        AND ("GLIST_VALUE_ID"="CELLS_GLIST"."GLIST_VALUE_ID")
    ))
)
WHERE EXISTS (......) 
```

It keeps saying **ORA-01407: cannot update ("SCHEMA1"."CELLS_GLIST"."SESSION_ID") to NULL**

"SESSION_ID" is obviously *Not Nullable*, but I'm actually passing a value to that field, so I do not understand the problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:39:42.307

From your comments, I read that you seem to want to write a default record to your target table, in case the subquery doesn't return any records. So the correct way to phrase your query would be using a [`MERGE`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9016.htm) statement as such:

```
MERGE INTO "SCHEMA1"."CELLS_GLIST" dst
USING (
  -- rephrase your subquery here. This is your "merge data source". The number
  -- of records returned in this subquery will correspond to the number of
  -- affected records in dst
) src
ON (
  -- the missing exists condition here. Everytime this condition matches a record
  -- between dst and src, an UPDATE is performed. Otherwise, an INSERT is
  -- performed
)
WHEN MATCHED THEN UPDATE 
  SET dst."GLIST_VALUE_ID" = src."GLIST_VALUE_ID"
WHEN NOT MATCHED THEN INSERT ("GLIST_VALUE_ID", "USER_ID", "SESSION_ID")
  VALUES (NULL, 1, 123456); 
```

This is just to give you an idea. I'm not quite sure what you're trying to achieve in detail, so I omitted the subqueries and conditions

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T14:20:40.320

I found this query also to work:

```
UPDATE "BMAN_TP1"."CELLS_GLIST" 
SET "GLIST_VALUE_ID" = (
    SELECT "GLIST_VALUE_ID"
    FROM "BMAN_TP1"."GLISTS_VALUES_UOR"
    WHERE ("UOR_ID"=3)
    AND ("GLIST_ID"=67)
    AND ("GLIST_VALUE_DESC" = (
        SELECT "GLIST_VALUE_DESC"
        FROM "BMAN_TP1"."GLISTS_VALUES_UOR"
        WHERE ("UOR_ID"=3)
        AND ("GLIST_VALUE_ID"="CELLS_GLIST"."GLIST_VALUE_ID")
        ))
    ),
    "SESSION_ID" = 123456,
    "USER_ID" = 1
WHERE EXISTS (......) 
```

But, it performs really really fast... I doubt I'm missing something...

# mysql - wamp mysql 用户和密码

> ID：11523218
> 
> 赞同：0
> 
> 时间：2012-07-17T13:10:18.783
> 
> 标签：mysql, wamp

嘿伙计们，我已经用 mysql 安装了 wamp 服务器，并且我有一个没有密码的 root 用户。但现在我想用密码创建另一个用户。当我使用密码创建用户并检查他与 mysql_connect() 的连接时，它给了我这样的错误

```
 Access denied for user 'Dest'@'localhost' (using password: YES) 
```

## 但是密码确实正确。我能做些什么？我删除了这个用户并创建了其他用户，但我有同样的问题。如果有人知道这个问题，请帮助我

嘿伙计们的问题已经解决。问题是，当我创建用户时，我选择了 % 这个本地和全局主机，但是对于 sql base 的 wamp 全局访问权限被默认禁用，我认为问题就是这样。当我使用 Localhost 创建用户时，它工作正常。谢谢大家的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:28:26.937

如果您尝试以 root 身份连接并收到上述错误，这意味着您在用户表中没有用户列值为“root”的行，并且 mysqld 无法解析客户端的主机名：

在 mysql 提示符下执行此命令以更改任何密码 FLUSH PRIVILEGES；

了解更多信息 [https://help.ubuntu.com/community/MysqlPasswordReset](https://help.ubuntu.com/community/MysqlPasswordReset)

# zend-framework - 如何在 Zend_DB 2.0 (zf2 beta5) 映射器类中描述/实现约束和表关系

> ID：11523223
> 
> 赞同：0
> 
> 时间：2012-07-17T13:10:22.260
> 
> 标签：zend-framework, zend-db, zend-framework2

在 zend_db 1.x 中，我们使用 reference_map 来实现数据映射器类中的约束和关系。在 zend_db 2.0 中，参考映射应该去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:50:38.297

ZF 2.0 中无法引用

您可以从我[之前的问题](https://stackoverflow.com/questions/11431542/handeling-m-n-relationship-in-zend-framework-2)中看到，在 ZF 2 中，您将使用像 Doctrine 2 或 Propel 这样的完整 ORM 来实现这些目的，或者编写自己的 SQL 查询。Zend DB 组件被视为处理简单任务相关内容的轻量级抽象。

# database - 奇怪的多对多关系

> ID：11523229
> 
> 赞同：0
> 
> 时间：2012-07-17T13:10:37.323
> 
> 标签：database

我不确定处理这个问题的最佳方法是什么，所以我正在寻找一些输入。我有 3 张桌子，让我们打电话给他们

```
User
WidgetA
WidgetB 
```

由于我不想进入两个小部件表的原因，不能混合使用，它们来自 2 个不同的来源。WidgetA 使用 GUID 作为键，而 WidgetB 使用自动增量。用户将被允许从 A 或 B 中选择他们最喜欢的小部件。设置它的最佳方法是什么？我应该有两个收藏夹表，将小部件连接到用户，这样我就可以做一些简单的连接，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:14:00.717

假设您不能对现有的 Widget 表进行任何更改，您可以这样做：

```
UserWidget
==========
UserWidgetID <-- PK, autoincrement
UserID <-- int
GuidKey <-- NULLable GUID
IntKey <-- NULLable int
Type <-- varchar ('WidgetA' or 'WidgetB') 
```

您的查询将如下所示：

```
select uw.UserID, a.*, b.*
from UserWidget uw
left outer join WidgetA a on uw.Type = 'WidgetA' and uw.GuidKey = a.WidgetAID
left outer join WidgetB b on uw.Type = 'WidgetB' and uw.IntKey = b.WidgetBID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:18:43.957

这很简单，您需要在关系 DBMS 中进行继承。您将创建一个具有自动递增键的通用 Widget 表，并将其主键作为外键存储在两个 WidgetA 和 WidgetB 表中。现在您可以将这两种 Widget 视为一种，因为它们都有 Widget 的 id。

够清楚吗？

编辑

以下是我在 ERD 中的话：

![在此处输入图像描述](../Images/135042de0cb52f5d6c451549fbeeac9a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:20:42.493

您可以将两个 ID 都存储为字符串（varchar）：

```
UserID
WidgetID 
```

询问：

```
Select *
From Favorite f
    Inner Join WidgetA a on f.WidgetID = Cast(a.WidgetID as varchar(max))
    Inner Join WidgetB b on f.WidgetID = Cast(b.WidgetID as varchar(max))
Where f.UserID = @userid 
```

# regex - extjs中用于电话号码的正则表达式

> ID：11523230
> 
> 赞同：-3
> 
> 时间：2012-07-17T13:10:39.933
> 
> 标签：regex, extjs

我想为美国电话号码（408）898-8979 或（408）898-8589-8989 构建 vtype。

正则表达式必须接受任何格式。

我尝试了很多样品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:06:51.210

POSIX 格式：

```
[\(]408[\)][[:digit:]]\{3\}-\([[:digit:]]\{4\}\)\{1,2\} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:55:41.403

中的空格是`( xxx)`怎么回事？

```
Ext.form.VTypes["usPhoneNumber"] = /\(\ *[0-9]{3}\ *\)\ *[2-9]\d{2}-\d{4}(-\d{4})?$/ 
```

[检查这个网站](http://regexlib.com/DisplayPatterns.aspx?categoryId=7&cattabindex=6&AspxAutoDetectCookieSupport=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:30:52.870

我认为您需要这样的正则表达式：`^\( *\d{3}\) \d{3}-\d{4}(-\d{4})?$`.

# c# - 存储收藏的最佳实践方式

> ID：11523234
> 
> 赞同：2
> 
> 时间：2012-07-17T13:10:54.693
> 
> 标签：c#, c++

我正在将 C# 应用程序移植到 C++，并且我有以下类（其中 Box 是一个结构，而 BoxStore 将是应用程序中的一个全局、长期存在的对象）：

```
public class BoxStore
{
    private List<Box> boxes;

    ...

    public List<Box> GetBoxes()
    {
        return this.boxes;
    }
} 
```

我打算将盒子集合存储在 C++ 中的 std::vector 中。有多种方法可以定义集合：

```
std::vector<Box> boxes;
shared_ptr<std::vector<Box>> boxes;
std::vector<Box>& boxes;
(*std::vector<Box> boxes;) 
```

什么是——如果有的话——最好的方法？我猜最后一个选项（存储指向集合的原始指针）是最糟糕的解决方案，没有任何好处（因此有括号）。

移植 GetBoxes 方法的最佳方法是什么？当然，这取决于存储集合的方式。我也可以在这里看到多种方法：

```
(std::vector<Box> GetBoxes();)
std::shared_ptr<std::vector<Box>> GetBoxes();
*std::vector<Box> GetBoxes();
std::vector<Box>& GetBoxes(); 
```

第一个解决方案似乎不正确，因为向量会在返回时被复制，因此调用者无法修改原始集合。
然而，其他三种方法对我来说似乎同样好。BoxStore 实例是长期存在的，并且在应用程序运行时不会被破坏，因此调用者不会拥有对集合的所有权。这是否意味着返回 shared_ptr 在语义上是不正确的？（释放集合的始终是 BoxStore 对象。）

返回原始指针或引用之间是否存在显着差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:33:01.283

这可能是您正在寻找的可能。BoxStore 真正拥有这些对象。因此，不需要指针等。我假设单个盒子对象和列表**不会超过**商店。如果您有这个要求，那么您可能需要考虑使用指针。

关于通过引用返回并不是真正好的设计，因为**它违反了封装**。因此，如果您没有允许客户修改列表的约束，我会提供一份列表的副本。

```
#include <list>

class Box
{
...
};

class BoxStore
{
private :
    std::list<Box> boxes;

public :
    std::list<Box>& GetBoxes()
    {
        return boxes;
    }
} 
```

# ruby-on-rails - Rails rake 任务：在一行接受局部变量，但在下一行拒绝它

> ID：11523248
> 
> 赞同：0
> 
> 时间：2012-07-17T13:11:30.380
> 
> 标签：ruby-on-rails

我正在处理更改控制器中定义的元标记的 rake 任务。[我在这里](http://www.ruby-forum.com/topic/194046)找到了一些帮助，但我仍然遇到错误。当我尝试运行这个 rake 任务时，ruby 不喜欢第 11 行，即以“found =”开头的行。我得到这个错误。

```
rake aborted!
undefined local variable or method `line' for main:Object
/Users/********/lib/tasks/meta_tags.rake:11:in `block (2 levels) in <top (required)>' 
```

这就是任务的样子。我很困惑为什么“行”在前第一行（10）上被正确解释，但在 11 上却爆炸了。有什么想法吗？

```
require 'rake'
namespace :meta_tags do
  desc 'changes the meta tags'
  task :update => :environment do  
    regex = /^@meta_tag/
    found = false
    file = File.open('app/controllers/site_controller.rb', 'w')
    file.each_line |line|
      replace_line(line) if(found)
      found = true if(line =~ regex)
    end

    def replace_line(line)
      meta_tags = MetaTag.all.map { |tag| tag["tag"] }
      new_tag = meta_tags.sample(1)[0]
      line = "@meta_tag = #{new_tag}"
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:48:20.703

您忘记添加`do`到您的迭代中......也不确定它是否相关，但 ruby​​ 解释器有时会因此引发奇怪的错误：

```
file.each_line do |line|
  replace_line(line) if(found)
  found = true if(line =~ regex)
end 
```

**更新：**

此外，似乎您需要关闭任务块：

```
require 'rake'
namespace :meta_tags do
  desc 'changes the meta tags'
  task :update => :environment do  
    regex = /^@meta_tag/
    found = false
    file = File.open('app/controllers/site_controller.rb', 'w')
    file.each_line do |line|
      replace_line(line) if(found)
      found = true if(line =~ regex)
    end
  end

  def replace_line(line)
    meta_tags = MetaTag.all.map { |tag| tag["tag"] }
    new_tag = meta_tags.sample(1)[0]
    line = "@meta_tag = #{new_tag}"
  end
end 
```

# svn - 删除文件夹并稍后通过重命名重新添加

> ID：11523249
> 
> 赞同：1
> 
> 时间：2012-07-17T13:11:35.357
> 
> 标签：svn, tortoisesvn

我有 2 个项目提交到我的 SVN 存储库“myproject”和“myproject-2”。两者都在同一个目录下。

如果我删除“myproject”并提交这些更改。

然后，如果我将“myproject-2”重命名为“myproject”。我会在这里遇到任何问题吗？即重命名后会有任何冲突吗？

我使用 TortoiseSVN 进行删除和重命名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:20:53.053

正如您在那里所说的那样，您不应该遇到任何问题。

如果您尝试回滚第一次提交（删除），您可能会遇到问题，但除此之外您应该没问题。

# scala - 使用比较运算符匹配元组

> ID：11523250
> 
> 赞同：5
> 
> 时间：2012-07-17T13:11:35.503
> 
> 标签：scala, pattern-matching

我想匹配元组模式，但我找不到任何解决方案如何使用比较运算符进行匹配。我的代码是：

```
myTuple  match {       
      case (-1,-1,true) => ...       
      case (_>=0,-1,_) =>  ...
    } 
```

这给出了编译时错误。我也尝试使用 if guard，但我认为它不能以这种方式应用：

```
 case (_ if _>=0,-1,_) =>  ... 
```

我的方法是正确的还是应该以不同的方式解决这个问题？谢谢佐尔坦

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T13:15:55.020

语法错误，你应该使用guard如下：

```
myTuple  match {       
  case (-1,-1,true) => ...
  case (x,-1,_) if x >= 0 =>  ...
  case _ => ... // default
} 
```

网上有很多关于 scala 模式匹配的很好的介绍。这是我在 google 上找到的第一个详细信息：[Playing with Scala's pattern matching](http://kerflyn.wordpress.com/2011/02/14/playing-with-scalas-pattern-matching/)

# xml - xml-schema xsd 错误：带有命名空间

> ID：11523256
> 
> 赞同：4
> 
> 时间：2012-07-17T13:11:48.203
> 
> 标签：xml, namespaces, xsd

我正在尝试定义我的第一个 xml 模式：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    targetNamespace="http://www.example.net/test"
    xmlns:t="http://www.example.net/test">

    <xs:annotation>
        <xs:documentation>This schema describes the xml format that is used in for ILTIS stuff.</xs:documentation>
    </xs:annotation>
    <xs:complexType name="station">
        <xs:sequence>
            <xs:element name="transition" type="transition" minOccurs="1" />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="transition">
        <xs:sequence>
            <xs:element name="wActions" type="wActions" maxOccurs="1" minOccurs="1"/>
            <xs:element name="oActions" type="oAction" maxOccurs="1" minOccurs="1"/>
        </xs:sequence>
        <xs:attribute name="from" type="xs:string" use="required"/>
        <xs:attribute name="to" type="xs:string" use="required"/>
    </xs:complexType>

    <xs:complexType name="wActions">
        <xs:sequence>
            <xs:element name="wMessage" type="wMessage" maxOccurs="2" minOccurs="1"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="oActions">
        <xs:sequence>
            <xs:element name="trainRunMessage" type="trainRunMessage" maxOccurs="2" minOccurs="1"/>
            <xs:element name="wMessage" type="wMessage" maxOccurs="2" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="trainRunMessage">
            <xs:attribute name="track" type="xs:string" use="required"/>
            <xs:attribute name="offset" type="xs:string" default="0"/>
            <xs:attribute name="station" type="xs:string" use="required"/>   
    </xs:complexType>

    <xs:complexType name="wMessage">
        <xs:attribute name="track" type="xs:string" use="required"/>
    </xs:complexType> 
</xs:schema> 
```

但是我的氧气编辑器总是抛出这个错误信息：

```
src-resolve.4.1: Error resolving component 'transition'. It was detected that 'transition' has no namespace, but components with no target namespace are not referenceable from schema document 'file:/C:/Users/mbohlaender/Desktop/rules-example-schema2.xsd'. If 'transition' is intended to have a namespace, perhaps a prefix needs to be provided. If it is intended that 'transition' has no namespace, then an 'import' without a "namespace" attribute should be added to 'file:/C:/Users/mbohlaender/Desktop/rules-example-schema2.xsd'. 
```

我仍然不知道我做错了什么。请以简单的方式回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:19:00.120

在`<transition>`元素的定义中，您引用了 type `transition`，这是 Oxygen 无法识别的。它不存在。您只定义了一个`transition`在您的架构中命名的复杂类型，因此该类型最终在`http://www.example.net/test`您使用`t`前缀导入的目标命名空间中。

尝试写作

```
<xs:element name="transition" type="t:transition" minOccurs="1" /> 
```

# apache - apache将单个子域映射到文件夹

> ID：11523258
> 
> 赞同：13
> 
> 时间：2012-07-17T13:11:49.870
> 
> 标签：apache, .htaccess, mod-rewrite, subdomain, virtualhost

在我`/var/www`的网站中，我有许多网站（goodsite、badsite、uglysite）。现在它们被`mydomain.com/goodsite`等访问。

我想要的是一个站点，特别是丑陋的站点，可供访问`uglysite.mydomain.com`-其他站点保持原样。

我尝试了各种摆弄 the.htaccess (in `/var/www`) 的方法。注意我启用了 mod-rewrite 并启用了 mod vhost-alias。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^uglysite\.mydomain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/uglysite/
RewriteRule ^(.*)$ /uglysite/$1 [L] 
```

**最终发生的事情是 mydomain.com 和uglysite.mydomain.com 总是映射到同一个东西**（即，位于 的索引`/var/www`）。我尝试添加一个新的虚拟主机，并惊讶地发现uglysite.mydomain.com 映射正确，但mydomain.com 也直接映射到uglysite。

```
<Virtualhost uglysite.mydomain.com:80>
       ServerName uglysite.mydomain.com
       ServerAdmin www@localhost
       DocumentRoot "/var/www/"
       AccessFileName .htaccess
       <Directory "/var/www/uglysite">
               Order allow,deny
               Allow from All
               AllowOverride All
       </Directory>
</VirtualHost> 
```

以上内容已添加到我的 sites-enabled/000-default 文件中。这让丑陋的site.mydomain.com 正常工作，但随后 mydomain.com 映射到同一个东西！

有没有一种简单的方法来做我打算做的事情？提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T13:13:42.650

您应该将丑陋的网站制作成第二个文件，而不是修改 000-default

因此，获取 000-default 文件的副本，按照您在此处所做的更改子域并将目录修改为 /path/to/site

**000-默认值：**

```
<Virtualhost *:80>
       ServerName mydomain.com
       ServerAdmin www@localhost
       ServerAlias mydomain.com
       DocumentRoot "/var/www/goodsite"
       AccessFileName .htaccess
       <Directory "/var/www/goodiste">
               Order allow,deny
               Allow from All
               AllowOverride All
       </Directory>
</VirtualHost> 
```

**丑陋的网站：**

```
<Virtualhost *:80>
       ServerName uglysite.mydomain.com
       ServerAlias uglysite.mydomain.com
       ServerAdmin www@localhost
       DocumentRoot "/var/www/uglysite"
       AccessFileName .htaccess
       <Directory "/var/www/uglysite">
               Order allow,deny
               Allow from All
               AllowOverride All
       </Directory>
</VirtualHost> 
```

另请注意，在上述示例中，我已将 修改`DocumentRoot`为指向您希望从中提供文件的目录

编辑：virtualhosts 设置为 *:80 因为您的网站无论如何都指向您自己的 ip

# security - HTTP标头与HTML中Unicode编码的安全查询

> ID：11523263
> 
> 赞同：1
> 
> 时间：2012-07-17T13:11:55.373
> 
> 标签：security, http, character-encoding

根据 OWASP，服务器应为所有通信指定 Unicode 编码。我读过这可以在 HTTP 标头中设置，也可以在 HTML 中设置。最佳做法是默认将其设置在标题中，但允许在 HTML 中覆盖它。

我的问题是，如果服务器在标头中设置了 Unicode 编码，并且客户端使用标头中的编码进行响应，但恶意在 HTML 中注入了不同的编码，服务器会拒绝它还是将其归结为应用程序探测？也许这是一个特定于服务器的问题......

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:08:18.440

HTTP`Content-Type`标头覆盖`<meta charset>`.

这在 HTML 规范的第 5.2.2 节中[指定：](http://www.w3.org/TR/html401/charset.html#encodings)

> 符合标准的用户代理在确定文档的字符编码时必须遵守以下优先级（从最高优先级到最低优先级）：
> 
> *   “内容类型”字段中的 HTTP“字符集”参数。
> *   将“http-equiv”设置为“Content-Type”并为“charset”设置值的 META 声明。
> *   [...]

# actionscript-3 - away3d 在运行时更改 3ds 网格材质

> ID：11523264
> 
> 赞同：1
> 
> 时间：2012-07-17T13:11:56.657
> 
> 标签：actionscript-3, away3d

我试图弄清楚如何在鼠标单击后在运行时更改加载的 3ds 对象/网格上的材质。(Away3D 3.5/3.6)

使用 Loader3D 加载 3ds 对象：

```
//global mesh variable and view3d
var my_mesh:Mesh;
var view:View3D = new View3D();    

//creating a parser with initial material
var max3ds_parser:Max3DS = new Max3DS();
max3ds_parser.material = new WireColorMaterial(0xFF0000);

var loader:Loader3D = new Loader3D();
loader.addEventListener(Loader3DEvent.ON_SUCCESS, onSuccess);
loader.loadGeometry("myMesh.3ds", max3ds_parser);

addChild(view);
addEventListener(Event.ENTER_FRAME, onEnterFrameRenderScene);

function onSuccess(e:Loader3DEvent):void{
    my_mesh = Mesh(e.loader.handle);
    view.scene.addChild(my_mesh)
}
function onEnterFrameRenderScene(e:Event):void{
    my_mesh.rotationY += 15;
    view.render();
} 
```

因此，在所有这些之后，3ds 对象被添加到场景中，初始材质 (WireColorMaterial) 与解析器对象一起应用。但是现在我想改变鼠标点击后的初始材质，所以：

```
stage.addEventListener(MouseEvent.CLICK, onClick);
function onClick(e:MouseEvent):void{
    //start FAIL here:
    my_mesh.material = new WireframeMaterial(0x000000);
    //end FAIL
    trace("clicked!");
    trace(my_mesh.material)
} 
```

鼠标单击后，视图中没有任何变化，my_mesh 会像打开初始材质一样旋转。但微量材料显示，新材料确实被应用了。

有没有其他方法可以做到这一点，或者是否有某种方法可以刷新场景以使其使用新材质？还是刷新视图？或者你应该以某种方式再次解析 my_mesh 吗？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:35:42.877

我建议通过[Prefab3D](http://www.closier.nl/prefab/)导入您的模型。这将允许您在可视化工具中预处理所有这些资产。

我要么使用 awd 格式，要么只将网格导出为 AS3 类。导出为 AS3 类还会将该数据与 swf 中的其他资产一起压缩，这是一个不错的小奖励 :)

# jquery - jQuery可以获取一个尚未绘制的动态元素的大小吗

> ID：11523267
> 
> 赞同：2
> 
> 时间：2012-07-17T13:12:09.240
> 
> 标签：jquery, css

我的意思是如果我用 jQuery 和 DOM 创建一个元素

```
var MainHolder = $(document.createElement("div")).addClass("box"); 
```

如果我在`MainHolder.width()`没有在窗口中绘制元素的情况下调用它，它会是切割器并计算出它从`.box`CSS 类中获取宽度还是会返回 0，因为它没有被绘制，所以它无法解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:16:21.823

您可以绘制元素，获取宽度并取消绘制它：

```
var MainHolder = $(document.createElement("div")).addClass("box").css({
    position: "absolute",
    left: -9999
}).appendTo("body");

var width = MainHolder.width();

MainHolder.css({
    position: "static",
    left: "auto"
}).detach(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:15:34.647

使用 jQuery `.width()`，您只能获取 HTML 文档中元素的宽度。

在下面的示例中，我将 CSS 中的宽度设置为`200px`：

[不附加到 HTML 正文的示例 - 返回 0](http://jsfiddle.net/yGbdN/)

[附加到 HTML 正文时的示例 - 返回 200](http://jsfiddle.net/yGbdN/1/)

我认为主要原因是当您有诸如or之类`box`的规则时，应用到元素并查找`.box`规则不起作用。jQuery 需要知道该元素在您的文档中的位置，以了解它的宽度。`.container .box``.container2 .box`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:15:13.433

Jquery 无法获取未绘制元素的宽度。

我之前所做的是将元素的上边距设置为 -1000 并将位置设置为绝对值，获取宽度和高度，然后将上边距设置为正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T07:39:04.370

在我看来，`$.hide()`这比 CSS 定位要好。根据其他 CSS 样式，带有 的元素`left: -9999`仍然可见。

```
$('<div></div>').addClass('box').hide().appendTo('body').width() 
```

[jsfiddle](http://jsfiddle.net/63ypgzvk/)

# php - 使用php更新mysql中的日期字段

> ID：11523270
> 
> 赞同：0
> 
> 时间：2012-07-17T13:12:15.567
> 
> 标签：php, mysql

我正在尝试使用 php 更新我的 date_process 字段。mysql 字段是日期类型字段，我的代码是：

```
$today = date('Y-m-d');
$data =json_decode($_POST['data'], true); 

foreach($data as $value){ 
// update inventory table
$conn->query("update inventory set cost = {$data[$n]['cost']}, 
csmt = {$data[$n]['csmt']}, 
hold = {$data[$n]['hold']},
date_process = $today 
where sku = {$data[$n]['sku']}"); 
```

所有其他字段都在正确更新，只是 date_process 返回 000-00-00。我看过其他帖子，据我所知，我的格式是正确的（或者至少我认为是这样）。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:15:10.973

尝试在日期周围添加引号：

```
$conn->query("update inventory set cost = {$data[$n]['cost']}, 
              csmt = {$data[$n]['csmt']}, 
              hold = {$data[$n]['hold']},
              date_process = '$today'
              where sku = {$data[$n]['sku']}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:18:27.407

里面有什么`$today`？它可能是 MySQL 没有真正得到的格式。

尝试类似：

```
update inventory set date_process = date_format(curdate(), "%Y-%m-%d"); 
```

# java - JUnit3 和 JUnit4 之间有性能差异吗？

> ID：11523271
> 
> 赞同：1
> 
> 时间：2012-07-17T13:12:21.660
> 
> 标签：java, performance, junit, junit4, junit3

我想知道运行 JUnit3-Test 或 JUnit4-Test 是否有区别。即使总运行时间只提高了 5-10%，但在一个夜间构建的大型项目中，这可能很重要。

子问题是：

*   TestRunner 对 Junit4 的更新是否有所改进？
*   还是`@annotation`以 JUnit4 风格解决需要更长的时间？
*   有利于 JUnit4 执行的 JUnit3 书面​​测试吗？

如果可能，请提供参考答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:17:53.610

我怀疑鉴于 JUnit 所做的（主要是为人们编写测试提供一个框架），这些差异（如果有的话）是可以忽略不计的。与大多数性能问题和查询一样，您可能应该自己针对特定场景执行测量。

我过去看到的任何测试性能问题都与*开发人员如何编写实际测试*以及他们是否处理以下问题有关：

1.  提前为一组测试设置前置条件，而不是为每个单独的测试执行设置（例如，参见[@BeforeClass](http://junit.sourceforge.net/javadoc/org/junit/BeforeClass.html)）
2.  在模拟可能更可取的情况下执行对远程资源（服务器、数据库等）的访问
3.  围绕线程问题编写测试，穿插 Thread.sleep() 以允许调度问题

如果您*真的*关心测试框架的速度，那么也许您还应该评估[TestNG](http://testng.org/doc/index.html)？

# php - 如果匹配随机任务，请检查给出的答案答案

> ID：11523273
> 
> 赞同：0
> 
> 时间：2012-07-17T13:12:33.257
> 
> 标签：php

您好我正在使用此代码生成随机问题：

```
<?php
session_start(); //this was missing from this file
//connect to db
require_once('db_conn.php');

$id=rand(0,13); //2nd number = highest ID

if ($res = $mysqli->query("SELECT quest FROM table WHERE ID='$id'")){

   $resQ = $res->fetch_assoc(); 
   echo "" . $resQ['quest'] . "";

   $_SESSION['chckanswer'] = $resQ['guest'];

   $res->close();
}
$mysqli->close();
?> 
```

这个尝试检查给出的答案是否与问题匹配：

```
<?php
session_start();

//more code

if($stmt = $mysqli->prepare('SELECT quest FROM table WHERE answer=?')){
    $stmt->bind_param("s", $_POST['given_answer']);
    $stmt->execute();
    $stmt->bind_result($quest);
    $stmt->fetch();

        if($_SESSION['chckanswer'] != $quest && !empty($_SESSION['chckanswer'])){
        echo 'wrong';
        exit();
        }
        else{
        echo 'ok';
        }
    $stmt->close();    
}
//more code 
```

但我得到错误**未定义索引 chckanswer**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:29:52.547

```
$id=rand(0,13); // 0-13 
```

我认为没有 id 为“零”的行

```
isset($_SESSION['chckanswer']) ? $_SESSION['chckanswer'] : null; 
```

添加这一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:27:35.130

第一个文件中缺少此内容：

```
session_start(); 
```

# jquery-mobile - Symfony2 和 Jquery 移动集成

> ID：11523276
> 
> 赞同：-2
> 
> 时间：2012-07-17T13:12:42.743
> 
> 标签：jquery-mobile, symfony

是否可以集成 Jquery mobile 和 symfony2 来创建 Web 移动应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:30:57.133

您是否先在 Google 上进行了[搜索](https://www.google.fr/search?q=Jquery%20mobile%20and%20symfony2)？

*   这是关于 Symfony 2 和 jQuery Mobile的[精彩西班牙演示文稿](http://www.slideshare.net/pgodel/creacion-de-aplicaciones-moviles-con-symfony2)
*   这是一个使用 Symfony 2 和 jQuery mobile 构建游戏之王的人的[类别](http://www.danielecentamore.com/wordpress/?cat=4)（最后一篇到顶部，所以转到底部查看故事）
*   这是一篇[关于 Symfony 2 和 jQuery mobile 的法语帖子](http://blog.fruitsoftware.com/2011/01/jquery-mobile-doctrine-2-et-autres-tests/)（来自 PR4）

# lazy-loading - 在 SmartGWT/extGWT 中延迟加载子节点

> ID：11523278
> 
> 赞同：0
> 
> 时间：2012-07-17T13:12:52.850
> 
> 标签：lazy-loading, smartgwt, gxt

我的情况如下
：我有一些 GWT 库：例如 extGWT 或 SmartGWT；
湾。我有一棵延迟加载的树；
C。在扩展时，我加载节点子节点；
d。我有数百万个子节点，所以我不希望它们在节点扩展 **时一次性加载。**

例如，我想知道是否可以在节点扩展以及树滚动上使用延迟加载。

我正在考虑在我的项目中使用 extGWT / smartGWT（实际上从未与他们合作过），所以不知道我的问题是否显而易见。但我自己还没有找到答案。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:59:46.077

smartclient 论坛上有一个主题[http://forums.smartclient.com/showthread.php?t=16946](http://forums.smartclient.com/showthread.php?t=16946)关于 smartGWT treegrids 的分页并不老。据我了解，树网格没有实现分页，因为“它不是一个很好的 UI”。
我不是 smartGWT treegrids 方面的专家，但我认为您可以在数据源的节点扩展上使用“延迟加载”，但不能在树滚动上使用。

至于extGWT，我真的不知道。希望它可以帮助你一点点。

# php - 注意：使用未定义的常量 ENT_HTML5 - 假定为“ENT_HTML5”

> ID：11523282
> 
> 赞同：12
> 
> 时间：2012-07-17T13:13:11.230
> 
> 标签：php, htmlspecialchars

我正在尝试创建一个接受 htmlspecialchars 参数的简单方法。虽然我收到 PHP 通知：

> 使用未定义的常量 ENT_HTML5 - 假定为“ENT_HTML5”

1.  有什么想法可能导致这种情况吗？

/**

```
 * Encode string.
 *
 * @param array/string $value
 * @param string $param
 * @return string
 */
protected function escape($mixed, $params) {

    $defaults = array('flags' => ENT_QUOTES | ENT_HTML5, 'charset' => 'UTF-8');
    $params = array_merge($defaults, $params);

    if (is_array($mixed)) {
        foreach($mixed as $key => $value) {
            $mixed[$key] = $this->escape($value, $params['flags'], $params['charset']);
        }
    } elseif (is_string($mixed)) {
        $mixed = htmlspecialchars($mixed, $params['flags'], $params['charset']);
    }

    return $mixed;
} 
```

1.  如果我将: 更改`ENT_QUOTES | ENT_HTML5`为: `ENT_QUOTES`，我会得到一个不同的错误

> 警告：htmlspecialchars() 期望参数 2 很长，给定字符串

**更新**

我使用的是 PHP 5.3，所以这就是 HTML5 错误的原因。如果我`ENT_QUOTES | ENT_HTML5`改为`ENT_COMPAT | ENT_HTML401`我得到同样的错误：

> 注意：使用未定义的常量 ENT_HTML401 - 假定为“ENT_HTML401”

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T13:15:16.527

ENT_HTML5、ENT_HTML401 和其他一些是[根据手册](http://php.net/manual/en/function.htmlspecialchars.php)在 PHP 5.4 版中添加的。对于早期版本，这些常量是未定义的，PHP 将自动假定未定义的常量正在编程“单据”并将它们转换为字符串。

# javascript - 使用 jQuery 遍历和设置表格样式

> ID：11523287
> 
> 赞同：0
> 
> 时间：2012-07-17T13:13:24.857
> 
> 标签：javascript, jquery

我正在使用 jQuery 做某种评估表格。它本质上是 HTML 表格形式的网格或矩阵。我想对 2x5 个表格单元格应用点击（以及稍后的悬停）事件。单击表格单元格时，我按列收集所有元素。我单击的列和左侧的列（我称之为选择栏）我想将类应用到右侧的列（这是 nar，“no bar”的缩写）我想从中删除类。

我想我已经弄清楚了选择过程，即使它可以改进。只是即使在我所做的 .hasClass() 测试失败时也会应用类。

一些代码，如果你愿意的话。这是我的静态 HTML 模板：

```
<tr class="boss">
    <td class="question" rowspan="2">Executing for results</td>
    <td class="radio answer-tail click-tail"></td>
    <td class="radio answer-head click-head"></td>
    <td class="radio"></td>
    <td class="radio"></td>
    <td class="radio"></td>
</tr>
<tr class="employee">
    <td class="radio answer-tail click-tail"></td>
    <td class="radio answer-tail click-tail"></td>
    <td class="radio answer-tail"></td>
    <td class="radio answer-head"></td>
    <td class="radio"></td>
</tr> 
```

这是我的 .click()：

```
$("td.radio").click(function() {
    var bar = $(this).prevUntil("td.question").andSelf();
    var nar = $(this).nextAll("td.click-head, td.click-tail, td.click");
    var row = $(this).parent();
    var bro = null;
    if (row.hasClass("boss")) {
        bro = row.next("tr.employee").children().eq($(this).index() - 1);
    } else if (row.hasClass("employee")) {
        bro = row.prev("tr.boss").children().eq($(this).index() + 1);
    }
    bar.push(bro.prevAll("td.radio").add(bro));
    nar.push(bro.nextAll("td.click-head, td.click-tail, td.click"));
    bar.each(function(i, e) {
        if ($(e).hasClass("answer-head")) {
            $(e).addClass("click-head");
        } else if ($(e).hasClass("answer-tail")) {
            $(e).addClass("click-tail");
        } else {
            $(e).addClass("click");
        }
    });
    nar.each(function(i, e) {
        $(e).removeClass("click-head").removeClass("click-tail").removeClass("click");
    });
}); 
```

问题是这个脚本给了我一些奇怪的错误。即，单击第二行中的最后一个表格单元格将导致：

```
<tr class="boss">
    <td class="question" rowspan="2">Executing for results</td>
    <td class="radio answer-tail click-tail click-head"></td>
    <td class="radio answer-head click-head"></td>
    <td class="radio click-head"></td>
    <td class="radio click-head"></td>
    <td class="radio click-head"></td>
</tr>
<tr class="employee">
    <td class="radio answer-tail click-tail"></td>
    <td class="radio answer-tail click-tail"></td>
    <td class="radio answer-tail click-tail"></td>
    <td class="radio answer-head click-head"></td>
    <td class="radio click"></td>
</tr> 
```

第一行中的最后一个单元格被赋予了错误的类。在我的 bar.each() 中，我检查当前单元格是否具有 .answer-head 类，如果没有，则应使用 .click。这以某种方式被覆盖，并且无论如何都会给出 .click-head 。

为什么？

编辑：这是一个小提琴： http: [//jsfiddle.net/tSyLj/](http://jsfiddle.net/tSyLj/)（依赖于WebKit：Chrome或Safari ...）

# jquery - Javascript 事件处理程序

> ID：11523289
> 
> 赞同：0
> 
> 时间：2012-07-17T13:13:41.650
> 
> 标签：jquery, events

不要看代码，我会尽量写伪代码，让你理解我的想法和我的问题。所以想象一下我有这样的功能（注意`var name = $('#name').val();`）

```
 function createFolder(button1, button2, element){

    var btns = {};
    btns[button1] = function(){
       var name = $('#name').val();
      .....
      $(this).dialog("close");
    };
    btns[button2] = function(){
      // Do nothing
      $(this).dialog("close");
    };
    $("<form><input type='text' id='name' name='name'/></form>").dialog({
      autoOpen: true,
      title: 'Condition',
      modal:true,
      buttons:btns
    });
  } 
```

基本上它只是一个对话，它以一个表单和 2 个按钮的形式打开。

好吧，当 DOM 加载我的插件激活做一些魔术，运行公开的表 `<tr>` 标签和每个`<a>`标签获取事件处理程序附加到它。像这样的东西：

```
function initialize(){
  ...Some magic here...
  .....

  node.find('#action-links').children().on('click',function(e){
     createFolder( node,'Create Folder', 'Cancle' );

  }
  .....
} 
```

**发生的情况是** ，在该 createFolder 函数中，我再次调用 initialize ，并且相同的元素 #action+link 获得超过 1 个事件处理程序，当我单击第二次、第三次等时会执行多次。我通过删除旧的事件处理程序来处理它。就我所尝试的而言，jquery 停止传播方法也有帮助。

**我不明白的是为什么当我在变量“名称”中获取输入值时，第一次得到它很漂亮，但是当我点击第二次、第三次等时，我总是得到我第一次插入的值而不是新值我插入 . 如果我不在 createFolder 函数中调用初始化，并且不分配多个事件处理程序，一切正常。我认为事件处理程序有问题......但我又不确定了。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:21:46.373

您不断创建具有相同 id 的新表单元素。由于 ids 应该是唯一的，它似乎只引用您创建的第一个元素。不要一遍又一遍地创建表单，`createFolder`函数的最后一部分应该是这样的：

```
if (!$('#form-name').length) {
    $('body').append($("<form id='form-name'><input type='text' id='name' name='name'/></form>"))
}
$("#form-name").dialog({
    // etc
}); 
```

# sql - Oracle 10g - 查询中的别名列

> ID：11523295
> 
> 赞同：0
> 
> 时间：2012-07-17T13:13:49.573
> 
> 标签：sql, oracle, oracle10g

我的列是子查询的结果，我想指定一个列别名字段是从另一个查询中提取的，但我不能。

携带示例不起作用：

```
SELECT field1, 
       field2,
       (SELECT FROM mytable WHERE COND1 aa) as [SELECT name FROM MyTable WHERE cond2]
  FROM table1 
```

可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:13:49.653

在某些情况下（不包括 X-Zero 提到的那些），您可以使用多个查询和动态 SQL 来做到这一点。

```
DECLARE 
  v_alias VARCHAR2(30);
  v_query_alias VARCHAR2(1000);
BEGIN
  SELECT name 
  INTO v_alias 
  FROM MyTable 
  WHERE cond2;

  EXECUTE IMMEDIATE 'SELECT field1
                           ,field2
                           ,(SELECT FROM mytable WHERE COND1 aa) as '||v_alias||'
                     FROM table1';
END;
/ 
```

# android - 从 .apk 安装时，Android 应用程序未恢复状态，在 eclipse 中工作正常

> ID：11523301
> 
> 赞同：2
> 
> 时间：2012-07-17T13:14:08.517
> 
> 标签：android, restore

这很奇怪：当我测试从 Eclipse 安装的应用程序时，它正在恢复它的状态就好了，例如它在离开应用程序然后再次点击图标后显示正确的活动/屏幕。当我从导出的 .apk 文件安装完全相同的代码时，这不起作用：应用程序返回“空白”，从登录屏幕开始。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:24:58.120

当您在 Eclipse 中单击“运行”按钮时，并不意味着应用程序已真正安装。它可能只是返回到最后一个状态的屏幕。当您自上次运行以来未对代码进行任何更改时，就会发生这种情况。

当您真正安装应用程序（通过 eclipse / 从 apk / 通过 adb）时，android 首先停止已经在运行旧应用程序，然后重新安装它并从头开始运行（在您的情况下为登录屏幕）。这是有效的行为，你不能改变它。

如果您有一些数据（例如登录名或密码），应该通过安装或更新保存，您应该使用[备份服务](http://developer.android.com/guide/topics/data/backup.html)。即使您将应用程序安装到另一台设备上，它也能正常工作。

# facebook - 如何通过应用程序在 Facebook 中将 HTTPS 更改为 HTTP

> ID：11523303
> 
> 赞同：-1
> 
> 时间：2012-07-17T13:14:15.550
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, x-facebook-platform

我想在 FB 中开发一个应用程序，它应该使 HTTPS 浏览对 fb 用户来说是不可能的。或者，应用程序必须在没有 SSL 的 HTTP 中运行。这里有人可以帮助我吗？请？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:25:01.273

你不应该完全相反吗？为什么？没关系...

在 PHP 中：

```
// Enforce http
if (substr(AppInfo::appURL(), 0, 7) != 'http://') {
    header('Location: http://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
    exit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:29:59.413

您在 iframe 中应用程序，并且您知道没有 https 的应用程序的父页面的 url。

在 onload 或 onclick 时在 iframe 中执行此 js

```
window.top('http://needed_url'); 
```

# c# - Protobuf-net“反序列化期间引用跟踪的对象更改了引用”错误

> ID：11523309
> 
> 赞同：0
> 
> 时间：2012-07-17T13:14:31.640
> 
> 标签：c#, serialization, deserialization, protocol-buffers, protobuf-net

当我反序列化以下对象时，出现“在反序列化期间引用跟踪的对象更改了引用”错误：

```
[ProtoContract]
public class ZmqMessage
{
    [ProtoMember(1)]
    public ZmqMessageType MessageType { get; set; }
    [ProtoMember(2, DynamicType = true)]
    public object MessageBody { get; set; }

    public ZmqMessage()
    { }

    public ZmqMessage(ZmqMessageType zmqMessageType, object messageBody)
    {
        this.MessageType = zmqMessageType;
        this.MessageBody = messageBody;
    }
} 
```

我通过以下方式序列化和反序列化：

```
public static class ProtoBuf
{
    public static byte[] Serialize<T>(T serializeThis)
    {
        using (var stream = new MemoryStream())
        {
            Serializer.Serialize<T>(stream, serializeThis);
            return stream.GetBuffer();
        }
    }

    public static T Deserialize<T>(byte[] byteArray)
    {
        using (var stream = new MemoryStream(byteArray))
        {
            return Serializer.Deserialize<T>(stream);
        }
    }
} 
```

我在这里做错什么了吗？谢谢

EDIT1：我发现在 ZmqMessage 对象的 MessageBody 中发送诸如“Test”之类的字符串时没有收到错误消息。但是，当我发送诸如 (int) 1 或仅 1 之类的 int 时，它会引发上述错误。

EDIT2：这是演示问题的枚举和快速测试用例：

```
public enum ZmqMessageType
{
    RawByteArray = 5550,
    ControlMessage = 5551
}

ZmqMessage testMessage = new ZmqMessage(ZmqMessageType.ControlMessage, "Test");
        byte[] byteMessage = ProtoBuf.Serialize<ZmqMessage>(testMessage);
        ZmqMessage deserializedMessage = ProtoBuf.Deserialize<ZmqMessage>(byteMessage);

ZmqMessage testMessage = new ZmqMessage(ZmqMessageType.ControlMessage, (int) 1);
        byte[] byteMessage = ProtoBuf.Serialize<ZmqMessage>(testMessage);
        ZmqMessage deserializedMessage = ProtoBuf.Deserialize<ZmqMessage>(byteMessage); 
```

# ruby-on-rails - 预定的电子邮件发布

> ID：11523311
> 
> 赞同：1
> 
> 时间：2012-07-17T13:14:40.480
> 
> 标签：ruby-on-rails, cron, scheduled-tasks, actionmailer

在 RoR 的活动前 2 天发布预定电子邮件的最佳方法是什么。活动日期将被存储到数据库中，我只想在活动前 2 天发出提醒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:54:15.640

You might have figured this alreay out by yourself. Well...anyway: In cases as the described I always use an external crontab job. In a certain interval (in your case e.g. each day) you dial into your application via

```
rails runner script.rb 
```

or

```
rails runner -e class-method 
```

The script or the method then scans the db for pending trigger dates and does whatever it should do, e.g. sending emails.

ps: Of course you have to take care of the correct environment for your rails calls.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:07:08.897

你可以试试这个

在您的 schedule.rb 文件中

```
every 1.day do
   trigger mailer
end 
```

并在邮件方法中

```
def mail_setup
  if Date.today == event_date - 2.days
     mail setup
  else
     do nothing
  end
end 
```

# java - Android的渐进增强？

> ID：11523312
> 
> 赞同：1
> 
> 时间：2012-07-17T13:14:49.733
> 
> 标签：java, android, progressive-enhancement

在构建 Android apk 时是否可以使用渐进增强。我想构建一个可在 SDK 8 + 上使用的应用程序（姜饼是主要的 android 版本），并在可能的情况下添加新版本的功能。

我知道我可以获取 SDK 版本`SDK_INT`来做一些有条件的事情，但是当我使用更高版本中引入的功能时，eclipse 不会让我构建说我需要增加 min SDK 级别。
也许是我的 Web 开发背景导致我认为这是可能的，这可能根本不可能，流行的应用程序是否有针对不同 SDK 的不同版本（如 min8-max10、min11-max15）？Android Java 代码的渐进增强是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:27:30.683

检查构建是否由于 Lint 错误而失败，如果是，并且您确定不会在不受支持的设备上调用特定方法，请使用 min api 级别向该方法添加注释，它可以被调用为这样的：

```
@TargetApi(14)
public void useSomeNewApis() {
   ...
} 
```

或者，如果您使用的是 eclipse，您可以将鼠标悬停在错误行上，然后选择`add @TargetApi(14) to useSomeNewApis`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:19:40.107

就像是：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/> 
```

应该足够了。但是，当程序从比设备上更新的 API 命中代码时，它会崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:28:28.900

您需要确保您使用的是正确版本的 android。如果您想使用 API 15 中可用的功能，您必须在该 API 中构建它。

因此，如果您要使用的功能需要 API 15，请确保在您的项目属性中将项目构建目标设置为该 API。

右键单击您的项目并转到属性。选择 Android 部分并确保检查了正确的 API。

# javascript - 如何使用正则表达式识别 javascript 函数？

> ID：11523314
> 
> 赞同：-6
> 
> 时间：2012-07-17T13:15:02.927
> 
> 标签：javascript, regex

我有 JS 代码。

我想找到每个函数的开始位置（通过“{”符号）如何使用正则表达式找到它？

**编辑：**我知道不可能 100% 准确，我怎样才能通过正则表达式找到 99% 的函数？有没有快速的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:18:30.837

JavaScript 不是正则语言，不能使用正则表达式进行解析。如果您想准确解析 JavaScript，则需要使用 Plain Old Code™。

例如，这个片段创建了一个函数：

```
function()
{
    alert('foo');
} 
```

而这段代码调用了一个函数和一个代码块：

```
foo.
function()
{
    alert('foo');
} 
```

这些细微差别是不可能用简单的正则表达式来识别的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-18T00:00:01.440

如果你把它变成一个字符串，你可以使用这个解决方案。我有一个类似的问题，我做了这个函数来查找函数：

```
// String with some functions to search.
var myStr =
`
foo1(){
   var blabla = null;
}

foo2 () {
   var blabla = null;
}

foo3(params) {
   var blabla = null;
}

foo4(params1,params2) {
   var blabla = null;
}

foo5(params1: string, params2: int) {
   var blabla = null;
}
`;

// Function to find functions syntax.
function searchForFunctions(str) {
   var positionStartFunctions = [];
   var functionArr = str.match(/([a-zA-Z0-9]+)\s*\({1}([a-z0-9,:\s]*)\){1}\s*\{/g);

   for(var i=0; i<functionArr.length; i++) {
      var functionLength = functionArr[i].length;
      var functionIndexMatched = str.indexOf(functionArr[i]);
      var positionOfCurlyBracket = (functionLength + functionIndexMatched);

      positionStartFunctions.push(positionOfCurlyBracket);
   }

   return positionStartFunctions;
}

var listOfCurlyBracketsFunctions = searchForFunctions(myStr);
console.log(listOfCurlyBracketsFunctions); 
```

该函数返回一个数组，其中包含找到的每个函数的第一个大括号的索引。

我使这个正则表达式与每个带有参数或在`)`and之间有空格的函数结构相匹配`{`。

已经很长时间了，但也许这会对其他人有所帮助。

# java - Java 集合 - 存储多个信息

> ID：11523315
> 
> 赞同：0
> 
> 时间：2012-07-17T13:15:06.120
> 
> 标签：java

像这样存储多个信息是否很好：

```
List<Map<Integer, Object>> l = new ArrayList<Map<Integer, Object>>();

Map<Integer, Object> m = new HashMap<Integer, Object>();
m.put(123, null);
l.add(m); 
```

我想还有更好的方法。

在我的情况下，我需要存储一个类别列表以及有多少文章正在使用这个类别的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:19:18.040

那为什么不使用 a `List<CategoryUsage>`，`CategoryUsage`包含 a 的类在哪里`Category`，以及使用它的文章数量？恕我直言，更具可读性、类型安全、可维护和面向对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:19:28.590

如果您想存储我将使用的每个类别的文章计数

```
Map<Category, Integer> categoryCountMap = ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:22:16.313

我认为你是在正确的方式。但您也可以将其他信息封装在类中并放置对象列表

像这样

```
Class CategorieModel{
   private Integer articlies;
   private Categories categories; 
//Constructors

//getters and setters

}

List<CategorieModel> m  = new ArrayList<CategorieModel>();

m.add(new CategorieModel(111,null)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:24:31.413

您需要更清楚您正在使用的术语。什么是“类别”，什么是“文章”？

在您的示例中：

```
List<Map<Integer, Object>> l = new ArrayList<Map<Integer, Object>>();

Map<Integer, Object> m = new HashMap<Integer, Object>();
m.put(123, null); 
```

如果您只是传入 NULL ，那么 Map 的值有什么意义？

如果您真的只想计算对每个类别的引用，那么一种最简单的方法：

```
Map<Category, Integer> categoryCount = ... 
```

或者您也可以使用 Category 中的主键来保持计数：

```
Map<Integer, Integer> categoryCount = ... // the Map key is Category.getId() 
```

或者如果您想知道哪个文章引用了该类别：

```
Map<Category, List<Article>> categoryArticleRef = ... 
```

也可以，然后要知道您总是可以做多少篇文章：

```
categoryArticleRef.get(category).size(); // need NPE check, etc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T13:25:58.760

您想在类别和文章之间建立多对多的关系吗？如果是这样，那么我建议您：

```
Map<Category, Set<Article>> 
```

对于每个类别，如果您想知道该类别的文章数量，您只需检查映射到该类别的集合的大小。但是，如果您想找出特定文章属于多少个类别，则必须通过遍历每个类别并检查该集合是否包含您感兴趣的文章来计算出来。

更新

您在其中一个评论中提到了 Hibernate，也许您正在寻找的是双向多对多关系？即，您的 Category 对象将包含属于该类别的文章集合，而您的 Article 对象将包含它所属的类别集合。

如果是这种情况，请查看以下问题：

[Hibernate 双向多对多实现](https://stackoverflow.com/questions/4353273/hibernate-bidirectional-many-to-many-implementation)

讨论双向多对多关系。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T13:37:59.937

我会使用番石榴的多图。

[http://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

```
Multimap<Category, Article> categorysToArticles = HashMultimap.create(); 
```

将所有类别放到文章关系中；

```
categoryToArticles.put(category, article); 
```

获取一个类别中的所有文章；（作为一个集合）

```
categoryToArticles.get(category); 
```

获取类别中的文章数；

```
categoryToArticles.get(category).size(); 
```

# ruby-on-rails - 如何从 Ruby 中的哈希数组中获取唯一元素并计数？

> ID：11523317
> 
> 赞同：1
> 
> 时间：2012-07-17T13:15:10.917
> 
> 标签：ruby-on-rails

我有一个哈希数组，我想要唯一的值并从中计数。我有：

```
a = [{:key => 2}, {:key => 1}, {:key => 4}, {:key => 1}] 
```

我想看：

```
a = [{:key => 2}, {:key => 1, :count =>2}, {:key => 4}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:38:07.283

尝试这个：

```
a = [{:key => 2}, {:key => 1}, {:key => 4}, {:key => 1}]
b = a.clone
a.uniq!
a.inject([]) { |result,h| h[:count]=b.count(h) if b.count(h) > 1 ; result << h; result }

 => [{:key=>2}, {:key=>1, :count=>2}, {:key=>4}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:20:04.683

您只需要遍历数组并计算每个键出现的次数，然后通过使用结果构建一个新数组来将它们加在一起。

下面的代码片段应该做到这一点。

```
a = [{:key => 2}, {:key => 1}, {:key => 4}, {:key => 1}]

counts = Hash.new(0)

a.map do |item|
  counts[item[:key]] += 1
end

a = counts.collect do |key, count|
  if count > 1
    {:key => key, :count => count}
  else
    {:key => key}
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:18:09.713

尝试这个：

```
a.each {|h| count = a.count(h); if count > 1; dup_h = h.clone; h.merge!({:count => count}); a.delete(dup_h); end } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T13:58:45.853

最简洁的方式（我认为）是这样的：

```
a.uniq.map{|hsh| c = a.count(hsh); c == 1 || hsh[:count] = c; hsh} 
```

或者如果您不想修改 a 中的哈希值：

```
a.uniq.map{|hsh| h = hsh.dup; c = a.count(hsh); c == 1 || h[:count] = c; h} 
```

产生不同结果的（略微）更漂亮的解决方案是：

```
a.uniq.group_by{|hsh| a.count(hsh)}
#=> {1=>[{:key=>2}, {:key=>4}], 2=>[{:key=>1}]} 
```

查看有关[Enumerable#count](http://apidock.com/ruby/Enumerable/count)和[Enumerable#group_by](http://apidock.com/ruby/Enumerable/group_by)的文档，以了解更多关于您可以使用它们做什么的信息。
Ruby 的核心其实是相当强大的。

# hibernate - 使用 Hibernate，我们如何通过主键检索实体，针对一级缓存，如果没有找到数据库而不命中数据库？

> ID：11523323
> 
> 赞同：1
> 
> 时间：2012-07-17T13:15:23.813
> 
> 标签：hibernate, caching, optimization

我有一个用例做分页。当然，当用户四处走动时，它会再次点击相同的页面。我已经有了页面的主键集。

此外，类似的搜索将命中一些已经加载到一级和二级缓存中的实体。

当我对一批主键进行查询时，Hibernate 不够聪明，无法避免在缓存命中时调用数据库。所以我想通过首先对一级和二级缓存使用低级 API 来解决这个问题。

因此，例如，如果我想加载以下主键：1、2、3

如果 2 已经在一级缓存中，我只想用 1 和 3 调用数据库。

所以我正在寻找一个像 session.peek(MyEntity.class, 2) 这样的 API，如果没有找到 peek 函数将返回 null ，或者如果在一级或二级缓存中找到实体，则返回实体。

如果存在的话，我可以从更低级别的 API 创建这个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:21:49.230

实际上，这已经在 Hibernate 中实现了，它被称为**查询缓存**。下面是它的工作原理：

1.  每次访问列表的第一页时，Hibernate 都会将第一页中的所有实体放入二级缓存（ID -> 实体）

2.  此外，Hibernate 会将原始 ID 放入所谓的*查询缓存*中。此缓存中的一个键是查询 + 查询参数（哪个页面和多少项）。

3.  下次用户访问同一页面时，Hibernate 首先检查查询缓存。如果它命中缓存（相同的查询已经在前一段时间使用相同的参数执行过），它会返回当时返回的记录的 ID。

4.  然后它使用二级缓存来获取这些记录而不是访问数据库。当然，如果某些记录不在 L2 中，Hibernate 会在您不注意的情况下自动获取它。

听起来正是您想要实现的目标。不幸的是，调整和有效使用查询缓存非常困难，而且很容易错误配置，从而降低整体系统性能。

此外，默认情况下不启用查询缓存。即使是这样，您也必须明确定义要缓存的查询。

# html - 无法摆脱列上的空间

> ID：11523326
> 
> 赞同：0
> 
> 时间：2012-07-17T13:15:29.767
> 
> 标签：html, space

我已经尝试了几天来解决这个问题，但我很茫然。我将它插入 jsFiddle 并没有空间，但在网站上......有。这是什么原因造成的？谁能看到我的问题？

```
<a href="http://130.111.132.29/betasite/projects/>Click Here for Site</a> 
```

顶部的段落和列之间不应有空格....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:20:58.723

您可以使用 firebug 之类的工具来检查生成此空间的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:24:01.383

您已包含一个

```
<p> blabla 
</p> 
```

在您的 proj_text div 中，因此您的列之前有一个空行。你可以删除它。

# c++ - 在包含 QtNetwork 时，我遇到了很多错误

> ID：11523327
> 
> 赞同：0
> 
> 时间：2012-07-17T13:15:30.003
> 
> 标签：c++, visual-studio-2010, qt

我使用带有内置 Qt 的 VS2010。我正在尝试实现客户端和服务器，使用 UDP。我以 Qt4 编程 GUI C++ 一书为例。

实现主要基于 Qt library `QtNetwork`，但是当我包含它时，我得到了很多我不知道的错误，例如：

```
Error 8 error C2653: 'System' : is not a class or namespace name ****\AssemblyInfo.cpp 3
Error 9 error C2871: 'Reflection' : a namespace with this name does not exist ****AssemblyInfo.cpp 3 
```

我认为错误是该库`QtNetwork`未正确包含的结果。你能告诉我如何解决这个问题吗？！

我试图通过我的方式解决它，并采取以下措施：

1.  在VS中：Qt\Qt项目设置\添加网络库，然后`qmake -project`，，，`qmake``nmake`

2.  在 .pro 文件中添加了字符串`QT += network`, 然后`qmake -project`, `qmake`,`nmake`

他们俩都未能解决既定的问题。

```
#pragma once

#include <QWidget>
#include "QtNetwork"
#include <QtGui>

class QTimer;
class QUdpSocket;

 class NetworkManagerServer : public QWidget
 {
     Q_OBJECT

 public:
     NetworkManagerServer(QWidget *parent = 0);

 private slots:
     void sendDatagramm();
 private:
     QUdpSocket* m_udpSocket;
     QTimer* m_timer;
     int m_messageNo;
 };

#include "NetworkManagerServer.h"

 NetworkManagerServer::NetworkManagerServer(QWidget *parent)
     : QWidget(parent)
 {
     m_timer = new QTimer(this);
     m_timer->start(2 * 1000);
     m_udpSocket = new QUdpSocket(this);
     m_messageNo = 1;

     connect(m_timer, SIGNAL(timeout()), this, SLOT(broadcastDatagram()));

 }

 void NetworkManagerServer::sendDatagramm(void)
 {
     QByteArray datagramm;
     QDataStream out (&datagramm, QIODevice::WriteOnly);
     //out.setVersion(QDataStream::Qt_4_8);
     out << "Hellow Qt::Network!";
     m_udpSocket->writeDatagram(datagramm, QHostAddress::LocalHost,5824);
 } 
```

这是我得到的错误列表：

```
Error   8   error C2653: 'System' : is not a class or namespace name    ***\AssemblyInfo.cpp    3
Error   9   error C2871: 'Reflection' : a namespace with this name does not exist   ***AssemblyInfo.cpp 3
Error   10  error C2653: 'System' : is not a class or namespace name    ***AssemblyInfo.cpp 4
Error   11  error C2871: 'CompilerServices' : a namespace with this name does not exist ***AssemblyInfo.cpp 4
Error   12  error C2653: 'System' : is not a class or namespace name    ***AssemblyInfo.cpp 5
Error   13  error C2871: 'InteropServices' : a namespace with this name does not exist  ***AssemblyInfo.cpp 5 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:06:18.813

我发现是这个问题！！！1.我创建了单元测试，后来从项目中删除了它们，但没有`t removed from folder as result lots of errors, which i presented here 2\. I tried to include QtNetwork with < > , but it didn`工作 3.但是当我 qmake -project, qmake, nmake 并且在生成的.pro 文件中包含字符串 QT += 网络项目已经编译成功！！！

# .net - .Net 错误 System.ArgumentException：DataLayer 中的值不能为空、字符串或空

> ID：11523328
> 
> 赞同：-2
> 
> 时间：2012-07-17T13:15:32.750
> 
> 标签：.net

我遇到错误“System.ArgumentException：该值不能为空、字符串或空。”
在线路代码处

```
Public Sub New(ByVal databaseName As String)
            **db = New Database(databaseName)**
End Sub 
```

导致源文件为“C:\Company\Main\Source\DataLayer\Object2.vb”的错误请找到屏幕截图。

请问你能帮忙吗？

**任务说明**
我正在尝试从上述根文件的以下函数中执行“db_StoredProcedue”。C:\Company\Main\Source\Project\App_Code\Application\ResultDataset.vb

```
 Imports System.Web.UI
    Imports System.Data
    Imports System.IO
    Imports Company.Web.TMSuite.Workflow
    Namespace Company.Web.TMSuite
    Public Class ResultDataset
        Inherits BasePage
        Public Shared Function GetResultsDataset() As DataSet
            Dim Obj1 As New Workflow(BasePage.DatabaseName)

            Dim ds As New DataSet

            ds = Obj1.GetResultDataset()

            Return ds

        End Function

    End Class

End Namespace 
```

**Obj1 文件位于 C:\Company\Main\Source\Workflow\Object1.vb**

```
Imports System.Globalization
Imports Company.Web.TMSuite.DataAccess
Imports Company.Web.TMSuite.TMSuiteComponents
Public Class Workflow
    Private objResultsData As ResultsData  

Public Sub New(ByVal databaseName As String)
    objMetricsData = New MetricsData(databaseName)
End Sub

Public Function Obj2() As DataSet
        Return objResultssData.Obj2()
    End Function
End Class 
```

**Obj2 文件位于 C:\Company\Main\Source\DataLayer\Object2.vb**

```
Imports Microsoft.VisualBasic
Imports System
Imports System.Data
Imports System.Configuration
Imports System.Globalization
Imports System.Web
Imports System.Data.Common
Imports Company.FoundationLibrary.Data
Imports Company.FoundationLibrary.ExceptionHandling
Imports Company.Web.TMSuite.DataAccess.ExceptionPolicies
Imports System.Data.SqlClient

Public Class ResultsData
    Inherits BaseData

    Public Sub New(ByVal databaseName As String)
        db = New Database(databaseName)  //Error Throughing at this line as -> ""System.ArgumentException: The value can not be null or string or empty.""
    End Sub

  Public Function Obj2() As DataSet
        Dim errorMessage As String = Nothing
        Dim ds As New DataSet
        Dim cmd As DbCommand

        ds.Locale = CultureInfo.InvariantCulture
        Try
            cmd = db.GetStoredProcCommand("db_StoredProcedue")

            db.AddOutParameter(cmd, "@pErrorMessage", DbType.String, ErrorMessageSize)

            ds = db.ExecuteDataSet(cmd)

            If Not IsDBNull(db.GetParameterValue(cmd, "@pErrorMessage")) Then
                errorMessage = db.GetParameterValue(cmd, "@pErrorMessage")
            End If

        Catch ex As Exception

            Dim blnRethrow As Boolean = ExceptionPolicy.HandleException(ex, DataAccessExceptionPolicy)

            If blnRethrow Then
                Throw
            End If
        End Try

        Return ds

    End Function
End Class 
```

请让我知道，如果我必须发布额外的代码来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:08:49.230

导致的问题是：

对于 C:\Company\Main\Source\Project\Forms\webpage.aspx.vb 和 pages.vb 中的方法“从 basepage.databasename 属性访问数据库

但是，我们无法从 basepage.databasename 属性
C:\Company\Main\Source\Project\App_Code\Application\ResultDataset.vb 访问数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:46:55.583

我认为您的代码示例中有一些拼写错误，但根据我正在阅读的内容，我认为您未能通过 Workflow 类中的调用将数据库名称传递给 objResults 类的构造函数。它作为 null 隐式提供，这会引发异常。

我基于这样的推论，即“Private objResultsData as ResultsData”确实应该被声明为“Private objResultsData as objResults” *，或者*您的 objResults 类应该被声明为“ResultsData”。如果我误解了代码，请接受我的道歉。

**编辑**：根据 OP 反馈，Workflow 类需要一个构造函数和成员字段来包含数据库名称，然后可用于显式初始化 ResultsData 类并消除问题。希望有帮助！

```
Imports System.Globalization
Imports Company.Web.TMSuite.DataAccess
Imports Company.Web.TMSuite.TMSuiteComponents
Public Class Workflow
    Private databaseName as String
    Private objResultsData As ResultsData
    Public Sub New (DatabaseName as String)
        Me.databaseName = DatabaseName
    End Sub
    Public Function Obj2() As DataSet
        objResultsData = new ResultsData(Me.DatabaseName)
        Return objResultsData.Obj2() ' Alternate possibility is to pass the name as parm here
    End Function
End Class 
```

然后，您需要修改 Workflow 的实例化以在构造函数中包含数据库名称，从而将其沿链传递。需要注意的是，上面的代码未经测试，但应该为您说明相关点。

# javascript - 通过车把部分传递变量

> ID：11523331
> 
> 赞同：143
> 
> 时间：2012-07-17T13:15:43.613
> 
> 标签：javascript, html, handlebars.js, templating

我目前正在处理 express.js 应用程序中的 handlebars.js。为了保持模块化，我将所有模板拆分为部分。

**我的问题**：我找不到通过部分调用传递变量的方法。假设我有一个看起来像这样的部分：

```
<div id=myPartial>
    <h1>Headline<h1>
    <p>Lorem ipsum</p>
</div> 
```

假设我使用名称“myPartial”注册了这个部分。在另一个模板中，我可以这样说：

```
<section>
    {{> myPartial}}
</section> 
```

这工作正常，部分将按预期呈现，我是一个快乐的开发人员。但是我现在需要的是一种通过此调用传递不同变量的方法，例如在部分中检查是否给出了标题。就像是：

```
<div id=myPartial>
    {{#if headline}}
    <h1>{{headline}}</h1>
    {{/if}}
    <p>Lorem Ipsum</p>
</div> 
```

调用应该是这样的：

```
<section>
    {{> myPartial|'headline':'Headline'}}
</section> 
```

或者。

我知道，在渲染模板之前，我能够定义我需要的所有数据。但我需要一种方法来做到这一点，就像刚才解释的那样。有没有可能的方法？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-07-23T15:13:40.207

Handlebars partials 采用第二个参数，该参数成为部分的上下文：

```
{{> person this}} 
```

在 v2.0.0 alpha 及更高版本中，您还可以传递命名参数的哈希：

```
{{> person headline='Headline'}} 
```

您可以查看针对这些场景的测试：[https ://github.com/wycats/handlebars.js/blob/ce74c36118ffed1779889d97e6a2a1028ae61510/spec/qunit_spec.js#L456-L462](https://github.com/wycats/handlebars.js/blob/ce74c36118ffed1779889d97e6a2a1028ae61510/spec/qunit_spec.js#L456-L462) [https://github.com/wycats/handlebars.js/ blob/e290ec24f131f89ddf2c6aeb707a4884d41c3c6d/spec/partials.js#L26-L32](https://github.com/wycats/handlebars.js/blob/e290ec24f131f89ddf2c6aeb707a4884d41c3c6d/spec/partials.js#L26-L32)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-21T16:23:51.590

以防万一，这就是我为获得部分论据所做的事情。我创建了一个小助手，它采用部分名称和将传递给部分的参数散列：

```
Handlebars.registerHelper('render', function(partialId, options) {
  var selector = 'script[type="text/x-handlebars-template"]#' + partialId,
      source = $(selector).html(),
      html = Handlebars.compile(source)(options.hash);

  return new Handlebars.SafeString(html);
}); 
```

这里的关键是[Handlebars 助手接受一个类似 Ruby 的 arguments 散列](http://handlebarsjs.com/block_helpers.html#hash-arguments)。在帮助程序代码中，它们作为函数最后一个参数的一部分——<code>options——出现在其`hash`成员中。这样您就可以接收第一个参数——部分名称——然后获取数据。

然后，您可能希望从帮助程序返回 a`Handlebars.SafeString`或使用“triple-stash”-<code>{{{- 来防止它双重转义。

这是一个或多或少完整的使用场景：

```
<script id="text-field" type="text/x-handlebars-template">
  <label for="{{id}}">{{label}}</label>
  <input type="text" id="{{id}}"/>
</script>

<script id="checkbox-field" type="text/x-handlebars-template">
  <label for="{{id}}">{{label}}</label>
  <input type="checkbox" id="{{id}}"/>
</script>

<script id="form-template" type="text/x-handlebars-template">
  <form>
    <h1>{{title}}</h1>
    {{ render 'text-field' label="First name" id="author-first-name" }}
    {{ render 'text-field' label="Last name" id="author-last-name" }}
    {{ render 'text-field' label="Email" id="author-email" }}
    {{ render 'checkbox-field' label="Private?" id="private-question" }}
  </form>
</script> 
```

希望这对……某人有所帮助。:)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-31T03:38:38.113

如果您编写自己的助手，这是很有可能的。我们正在使用自定义`$`助手来完成这种类型的交互（以及更多）：

```
/*///////////////////////

Adds support for passing arguments to partials. Arguments are merged with 
the context for rendering only (non destructive). Use `:token` syntax to 
replace parts of the template path. Tokens are replace in order.

USAGE: {{$ 'path.to.partial' context=newContext foo='bar' }}
USAGE: {{$ 'path.:1.:2' replaceOne replaceTwo foo='bar' }}

///////////////////////////////*/

Handlebars.registerHelper('$', function(partial) {
    var values, opts, done, value, context;
    if (!partial) {
        console.error('No partial name given.');
    }
    values = Array.prototype.slice.call(arguments, 1);
    opts = values.pop();
    while (!done) {
        value = values.pop();
        if (value) {
            partial = partial.replace(/:[^\.]+/, value);
        }
        else {
            done = true;
        }
    }
    partial = Handlebars.partials[partial];
    if (!partial) {
        return '';
    }
    context = _.extend({}, opts.context||this, _.omit(opts, 'context', 'fn', 'inverse'));
    return new Handlebars.SafeString( partial(context) );
}); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-10-08T15:28:44.447

这也可以在更高版本的车把中使用以下`key=value`符号来完成：

```
 {{> mypartial foo='bar' }} 
```

允许您将特定值传递给您的部分上下文。

参考：[部分#182的上下文不同](https://github.com/wycats/handlebars.js/pull/182#issuecomment-32659931)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-11-04T19:56:46.470

听起来你想做这样的事情：

```
{{> person {another: 'attribute'} }} 
```

Yehuda 已经为您提供了一种方法：

```
{{> person this}} 
```

但要澄清：

要为您的部分提供自己的数据，只需在现有模型中为其提供自己的模型，如下所示：

```
{{> person this.childContext}} 
```

换句话说，如果这是您为模板提供的模型：

```
var model = {
    some : 'attribute'
} 
```

然后添加一个新对象以赋予部分：

```
var model = {
    some : 'attribute',
    childContext : {
        'another' : 'attribute' // this goes to the child partial
    }
} 
```

`childContext`就像 Yehuda 所说的那样成为部分的上下文 - 在那，它只看到 field `another`，但它看不到（或关心 field `some`）。如果你`id`在顶层模型中，并`id`在 childContext 中再次重复，那会很好，因为部分只看到里面的内容`childContext`。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-01-21T20:06:58.287

如果您只想在部分中使用不同的上下文，则接受的答案非常有用。但是，它不允许您引用任何父上下文。要传入多个参数，您需要编写自己的助手。这是 Handlebars 的工作助手`2.0.0`（另一个答案适用于版本`<2.0.0`）：

```
Handlebars.registerHelper('renderPartial', function(partialName, options) {
    if (!partialName) {
        console.error('No partial name given.');
        return '';
    }
    var partial = Handlebars.partials[partialName];
    if (!partial) {
        console.error('Couldnt find the compiled partial: ' + partialName);
        return '';
    }
    return new Handlebars.SafeString( partial(options.hash) );
}); 
```

然后在您的模板中，您可以执行以下操作：

```
{{renderPartial 'myPartialName' foo=this bar=../bar}} 
```

在您的部分中，您将能够以上下文的形式访问这些值，例如：

```
<div id={{bar.id}}>{{foo}}</div> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-10-23T21:11:25.747

是的，我迟到了，但我可以为*Assemble*用户添加：您可以使用内置`"parseJSON"`助手[http://assemble.io/helpers/helpers-data.html](http://assemble.io/helpers/helpers-data.html)。（在[https://github.com/assemble/assemble/issues/416](https://github.com/assemble/assemble/issues/416)中发现）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-24T02:26:02.497

不确定这是否有帮助，但这里有一个 Handlebars 模板示例，其中动态参数传递给内联 RadioButtons 部分，客户端（浏览器）呈现容器中的单选按钮。

对于我的使用，它在服务器上使用 Handlebars 呈现，并让客户端完成它。有了它，表单工具可以在 Handlebars 中提供内联数据而无需帮助。

注意：这个例子需要 jQuery

```
{{#*inline "RadioButtons"}}
{{name}} Buttons<hr>
<div id="key-{{{name}}}"></div>
<script>
  {{{buttons}}}.map((o)=>{
    $("#key-{{name}}").append($(''
      +'<button class="checkbox">'
      +'<input name="{{{name}}}" type="radio" value="'+o.value+'" />'+o.text
      +'</button>'
    ));
  });
  // A little test script
  $("#key-{{{name}}} .checkbox").on("click",function(){
      alert($("input",this).val());
  });
</script>
{{/inline}}
{{>RadioButtons name="Radio" buttons='[
 {value:1,text:"One"},
 {value:2,text:"Two"}, 
 {value:3,text:"Three"}]' 
}} 
```

# macos - 如何在 OS X 上更改用户的输入法（例如美国与阿拉伯语）？

> ID：11523332
> 
> 赞同：2
> 
> 时间：2012-07-17T13:15:43.227
> 
> 标签：macos, internationalization, textinput

为阿拉伯语编写一个词汇训练器，我的程序将自动在用户的默认语言和阿拉伯语之间切换输入法。

在 Windows 上，这可以通过 LoadKeyboardLayout 和 ActivateKeyboardLayout 来完成。

在 OS X 上是否有 API 调用来完成相同的操作？

可以要求用户通过系统首选项自己启用阿拉伯语 kbd 布局，但他每次都必须手动来回切换是我想避免的麻烦。

或者，或者，我可以将首选输入法分配给 Carbon 文本输入字段，以便我可以使用两个输入字段，一个用于美国，一个用于阿拉伯语，这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:18:25.170

您需要`Carbon api`，请查看[Text Input Source Services Reference](https://developer.apple.com/library/mac/#documentation/TextFonts/Reference/TextInputSourcesReference/Reference/reference.html)

这是一个没有错误处理的示例代码（**Mac OS X v10.5**及更高版本）

```
CFStringRef tID = CFSTR("com.apple.keylayout.Arabic"); // or "com.apple.keylayout.US"
TISInputSourceRef inputSource = NULL;
CFArrayRef allInputs = TISCreateInputSourceList(NULL, true);
NSUInteger count = CFArrayGetCount(allInputs);
for (int i = 0; i < count; i++) {
    inputSource = (TISInputSourceRef)CFArrayGetValueAtIndex(allInputs, i);
    if (!CFStringCompare(tID, TISGetInputSourceProperty(inputSource, kTISPropertyInputSourceID), 0)) {
        TISEnableInputSource(inputSource);
        TISSelectInputSource(inputSource);
        break;
    }
}
CFRelease(allInputs); 
```

# r - R中的STL趋势分量是如何计算的？

> ID：11523334
> 
> 赞同：1
> 
> 时间：2012-07-17T13:15:45.160
> 
> 标签：r, stl, time-series

我试图了解 STL 时间序列函数的作用，特别是趋势是如何定义的。当我阅读 STL 代码中发生的事情时，我会看到以下代码行：

```
z <- .Fortran(C_stl, as.double(x), as.integer(n), as.integer(period), 
as.integer(s.window), as.integer(t.window), as.integer(l.window), 
s.degree, t.degree, l.degree, nsjump = as.integer(s.jump), 
ntjump = as.integer(t.jump), nljump = as.integer(l.jump), 
ni = as.integer(inner), no = as.integer(outer), weights = double(n), 
seasonal = double(n), trend = double(n), double((n + 
2 * period) * 5)) 
```

这里有一些关于趋势的事情，但看起来实际输出是在一段外部代码 (C_stl) 中创建的。当我通过这段代码传递我的时间序列时，我知道如何全面了解正在发生的事情吗？

谢谢，约赫姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:21:30.490

是的，它是 Fortran 代码。

代码可以在源代码中找到：[例如这里](http://svn.r-project.org/R/trunk/src/library/stats/src/stl.f)。

# printing - 从 DevMode 获取打印机托盘

> ID：11523340
> 
> 赞同：0
> 
> 时间：2012-07-17T13:16:21.363
> 
> 标签：printing, tray, dev-mode

在我的应用程序中，我弹出一个打印对话框（除其他外），用户可以选择用于首页的打印托盘和用于其他页面的打印托盘。然后我从打印机对象中获取 DevMode：

```
LPDEVMODE  pDevMode  = (LPDEVMODE)::GlobalLock(pPrinter->hDevMode); 
```

当我查看 DevMode 结构时，我可以获得默认源：

```
m_pDevMode->dmDefaultSource 
```

这是“其他页面”选择，但我无法获得第一页选择的托盘号。任何想法如何获得两个托盘号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:27:11.120

I discovered it's not possible because the settings are driver-specific.

# java - android将字符串转换为日期格式转换回字符串

> ID：11523344
> 
> 赞同：1
> 
> 时间：2012-07-17T13:16:43.457
> 
> 标签：java, android, date

我想要做的是格式化`08-18 15:00`要读取的字符串`18-08-12 15:00`。如何将其转换为日期格式并将其转换回字符串，以便我可以使用 setText 到 textview？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:26:01.433

这就是你要找的。你必须使用[`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html). 这是链接：[字符串到日期转换](https://stackoverflow.com/a/8655178/735675)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:49:25.420

当然，使用 SimpleDateFormat 会是更好的解决方案，但如果你坚持并且如果你知道未来的风格......那么你可以简单地自己格式化它，使用如下代码：

```
public static String ConvertDate(String valueToFormat) {
      String value = valueToFormat;
      String day = value.substring(value.indexOf("-") + 1, value.indexOf(" "));
      String month = value.substring(0, value.indexOf("-"));
      String time = value.substring(value.indexOf(" ") + 1, value.lenght());

      Calendar c = Calendar.getInstance();
      int year = c.get(Calendar.YEAR);

      // if you want year to appear as only last two items
      year = year % 100;

      value = day + "-" + month + "-" + year + " " + time;
      return value;
} 
```

# java - Android Bundle 与 String 的比较

> ID：11523345
> 
> 赞同：1
> 
> 时间：2012-07-17T13:16:45.487
> 
> 标签：java, android, if-statement, bundle

当我从包中获取数据时，'if' 控件永远不会工作，请帮助我.. 我需要在'if' 块中比较包的数据，因为我必须根据数据更改 textview。

```
result = getIntent().getExtras();
String get = result.getString("secilen");

if(number == 0) {
    imgView.setImageResource( R.drawable.tas );

    //txtV.setText(get);

    if (get == "A"){ // if even "A" come never read if block
        txtV.setText("...");
    }

    if (get == "B"){
        txtV.setText("...");
    }

    if (get == "C") {
        txtV.setText("...");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:18:14.707

使用**equals**而不是**==**比较字符串：

```
if (get.equals("A")){ 
    txtV.setText("...");
}

if (get.equals("B")){
    txtV.setText("...");
}

if (get.equals("C")) {
    txtV.setText("...");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:18:54.040

您可以使用

```
if (get.equals("A")) { //my code ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:19:10.870

您不能通过 比较字符串`==`，因为这只会检查对象身份，而具有相同内容（例如`A`）的两个字符串可能是单独的对象。改用[`equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)：

```
if ("A".equals(get)) {
        txtV.setText("...");
} 
```

请注意比较中的不同顺序。这可以防止`NullPointerExceptions`if`get`应该为空。

[这是一个很好的解释。](http://www.zparacha.com/java-string-comparison/#.UAVnJpHEKPM)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T13:25:09.230

```
result = getIntent().getExtras();
if(result!=null){
    String get = result.getString("secilen");
    if(number == 0){
    imgView.setImageResource( R.drawable.tas );

    if (get.equals("A"))
        txtV.setText("...");
    }

    else if (get.equals("B")){
        txtV.setText("...");
    }

    else if (get.equals("C")) {
        txtV.setText("...");
    }
  }
} 
```

# matlab - 使用 matlab 矩阵的前一个单元格中的值用于方程

> ID：11523350
> 
> 赞同：1
> 
> 时间：2012-07-17T13:17:16.313
> 
> 标签：matlab, for-loop, brute-force

您好我正在使用以下代码（蛮力方法）。“PV_supply”、“WT_supply”和“Demand”为 48x1 尺寸。我要做的是计算 48 行中每一行的“Energy_battery”值。然而，要做到这一点，我需要在每一行的计算中使用前一行的“Energy_battery”值，我还没有弄清楚如何编码，并希望对此有所帮助。因此，第 1 行中的“Energy_battery”等式将第 1 行中的“Energy_battery”值用于等式等

我的代码是：

```
for number_panels = 0:5

for number_turbines = 0:3

    for h=1:24 %# hours

        for d = 1:number_of_days %# which day

            n = h + 24*(d-1);

 Energy_battery(number_panels + 1, number_turbines + 1,1,1) = 100;

Energy_battery(number_panels + 1, number_turbines + 1,n+1,1) =...
Energy_battery(number_panels + 1, number_turbines + 1,h,1)  + ...
((PV_supply(n)*number_panels + WT_supply(n)*number_turbines) - ...   
Demand(n)/inverter_efficiency)*battery_charging_efficiency; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:52:11.810

这是一个扩展评论，只是对您部分问题的回答，尽管我认为它也与您最近的其他问题有关。

将 Matlab 视为一种数组处理语言会很有帮助，计算的自然“单元”是一个数组，而不是许多其他语言中的一个标量。如果您发现自己编写循环来迭代数组的元素并停下来思考，那么可能会有一种更“自然”的方式来表达没有循环的相同计算。循环没有绝对的问题，但过度依赖循环会产生 2 个有害影响：

1.  没有循环的 Matlab 代码通常比有循环的等价代码快得多；
2.  与没有循环的等效代码相比，带有循环的代码通常更混乱，并且需要使用更多的变量。混乱是理解代码的障碍

因此，例如，您的陈述

```
Energy_battery(number_panels + 1, number_turbines + 1,1,1) = 100; 
```

可以完全从循环嵌套中取出并重写为

```
Energy_battery(:,:,1,1) = 100; 
```

现在，对于您的大部分代码，如果我理解正确，您希望根据您拥有的其他向量的元素中`Energy_battery(:,:,n+1,1)`的值更新每个元素。首先，让我们整理一下`Energy_battery(:,:,n,1)``n`

```
((PV_supply(n)*number_panels + WT_supply(n)*number_turbines) - Demand(n)/inverter_efficiency)*battery_charging_efficiency 
```

可以改写为

```
((PV_supply*number_panels + WT_supply*number_turbines) - Demand/inverter_efficiency)*battery_charging_efficiency 
```

对于 Matlab，将数组乘以标量会将乘法应用于数组的每个元素。同样，这不需要对索引值进行循环，例如`n`.

恐怕我现在得去做点功课，晚点回来完成课程，如果没有其他人做的话。如果您愿意，请随时编辑此答案。

# mysql - 准备 mysql 行以在 IN() 子句中使用

> ID：11523351
> 
> 赞同：1
> 
> 时间：2012-07-17T13:17:23.397
> 
> 标签：mysql, search

我需要在存储在表中的一组数值中找到包含特定数字的行。我正在使用`WHERE IN()`mysql 的功能，但我遇到了格式正确的问题。

基本上我有以下查询：

```
SELECT id,category, text
FROM ws_cat
WHERE '11' IN (category) 
```

类别字段是 a `VARCHAR`，如下所示：

```
id    category
1     11
2     12,11
3     1,13,9 
```

所以在这种情况下，我需要找到 id 为 1 和 2 的行。不幸的是，它不起作用，我猜这是因为缺少引号，但是所有重新格式化`QUOTES()`或只是将格式更改为`category`类似的`'12','11'`想法也行不通。只要它有效，这两种方法对我来说都是可能的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:20:07.640

使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数：

```
SELECT id, category, text
    FROM ws_cat
    WHERE FIND_IN_SET('11', category) <> 0; 
```

# jquery-ui - 如何在 jQuery Autocomplete 中向远程脚本发送附加参数

> ID：11523352
> 
> 赞同：0
> 
> 时间：2012-07-17T13:17:23.530
> 
> 标签：jquery-ui, jquery, jquery-ui-autocomplete

据我所知，当远程脚本被指定为自动完成选项集中的源时，该脚本会接收用户在此之前键入的任何内容，然后由该脚本根据该脚本发送相关数据。是否可以向该脚本发送任何其他参数？例如，假设站点为用户提供了按论坛过滤问题的选项。每个论坛都有很多子论坛。假设**abc**是一个论坛，其中包含子论坛**bcd**、**cde**和**def**。现在如果用户已经输入**abc**，然后他输入**b**，脚本不应该返回**bcd**，因为**abc**存在确保**bcd**存在。**所以脚本应该返回以b**开头的其他结果。为此，我需要向脚本发送一个参数（具有值**abc**），使其不返回属于论坛**abc的结果，并搜索以****b**开头的其他论坛或子论坛名称。如何发送附加参数？

# javascript - d3.js 带标签的动态数据

> ID：11523353
> 
> 赞同：0
> 
> 时间：2012-07-17T13:17:30.617
> 
> 标签：javascript, d3.js, label

我设法使以下工作（饼图根据滑块值动态变化）：

```
 var x = function() {
        return $("#slider").val();
    }

    var data = function() {
        return [x(), ((100-x())/2), ((100-x())/2)];
    }

    var w = 100,
        h = 100,
        r = 50,
        color = d3.scale.category20(),
        pie = d3.layout.pie().sort(null),
        arc = d3.svg.arc().outerRadius(r);

    var svg = d3.select("#chart").append("svg:svg")
        .attr("width", w)
        .attr("height", h)
      .append("svg:g")
        .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")");

    var arcs = svg.selectAll("path")
        .data(pie(data()))
      .enter().append("svg:path")
        .attr("fill", function(d, i) { return color(i); })
        .attr("d", arc)
        .each(function(d) { this._current = d; });

    var redraw = function() {
      newdata = data(); // swap the data
      arcs = arcs.data(pie(newdata)); // recompute the angles and rebind the data
      arcs.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
    };

    // Store the currently-displayed angles in this._current.
    // Then, interpolate from this._current to the new angles.
    function arcTween(a) {
      var i = d3.interpolate(this._current, a);
      this._current = i(0);
      return function(t) {
        return arc(i(t));
      };
    } 
```

我似乎无法修改它以包含动态标签（使用对象作为数据而不是数组 {'label': 'label1', 'value': value}。我将如何修改上述代码以添加标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:18:52.527

这应该可以工作，将标签和饼图保持为单独的实体：

```
 var x = function() {
        return $("#slider").val();
    }

    var data = function() {
        return [x(), ((100-x())/2), ((100-x())/2)];
    }

    var labels = function() { 
        var label1 = "LABEL 1: " + x();
        var label2 = "LABEL 2: " + ((100-x())/2);
        var label3 = "LABEL 3: " + ((100-x())/2);
        return [label1, label2, label3];
    }

    var w = 200,
        h = 100,
        r = 50,
        color = d3.scale.category20(),
        pie = d3.layout.pie().sort(null),
        arc = d3.svg.arc().outerRadius(r);

    var svg = d3.select("#chart").append("svg:svg")
        .attr("width", w)
        .attr("height", h)
      .append("svg:g")
        .attr("transform", "translate(" + 50 + "," + h / 2 + ")");

    var arcs = svg.selectAll("path")
        .data(pie(data()))
        .enter().append("svg:path")
        .attr("fill", function(d, i) { return color(i); })
        .attr("d", arc)
        .each(function(d) { this._current = d; });

    var label_group = svg.selectAll("text")
        .data(labels())
        .enter()
        .append("text")
        .text(function(d) {
            return d;
        })
        .attr("x", 60)
        .attr("y", function(d, i) { return (i * 20) - 16; });

    var redraw = function() {
        newdata = data(); // swap the data
        arcs = arcs.data(pie(newdata)); // recompute the angles and rebind the data
        arcs.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
        label_group = label_group.data(labels());
        label_group.transition().delay(300).text(function(d) {
            return d;
        }); 
```

# c++ - 无法删除作为类字段的数组

> ID：11523356
> 
> 赞同：0
> 
> 时间：2012-07-17T13:17:40.850
> 
> 标签：c++

我有`cAuthorisation`管理`strAuthorisation` 函数数组的类，`resize`为下一条记录准备数组。

期间 `resize`，在线`delete [] data;`我崩溃了。

```
struct strAuthorisation 
{ 
double Amount; 
}Authorisation;

class cAuthorisation { 
public: 
    int size; 
    strAuthorisation *data; 
cAuthorisation ()
{
    size=0;
}

~cAuthorisation()
{

};

void Add(strAuthorisation )
{
    resize();
    data[size]=*value;
}

void resize() 
{
    strAuthorisation *a = new strAuthorisation[5];
    size_t newSize = size + 1 ;
    strAuthorisation *newArr = new strAuthorisation[newSize];
    memcpy( newArr, data, size * sizeof(strAuthorisation) );

    size = newSize;

    delete [] data;
    data = newArr;
}
} Authorisations; 
```

为什么不能删除类数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T13:19:36.177

它崩溃是因为它`data`是一个未初始化的指针。`delete[]`在空指针上是安全的（无操作），所以`data`在构造函数中初始化：

```
cAuthorisation() : size(0), data(0) {} 
```

请注意，当前的类违反[了三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

不确定这是否是一个学习练习，如果不是使用`std::vector<strAuthorisation>`. 将[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)根据需要动态增长，并在超出范围时自动销毁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T13:20:09.257

您尚未初始化`data`指针。所以你正在做这样的事情：

```
Foo *data;
delete [] data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:21:24.677

“数据”是一个指针，其值从未被初始化。

# javascript - DOMContentLoaded 事件是否与 jQuery 的 .ready() 函数完全相同？

> ID：11523359
> 
> 赞同：35
> 
> 时间：2012-07-17T13:17:50.483
> 
> 标签：javascript, jquery, dom, events, dom-events

我已经`window.addEventListener('DOMContentLoaded', function() {});`用 jQuery替换了`$(document).bind('ready', function() {});`，因为第一个无法在 IE < 9 上工作，而且我不想玩`.attachEvent()`那个虚拟浏览器，如果我可以让 jQuery 本身很好地覆盖它的话。

更换后不久，我注意到`DOMContentLoaded`事件总是在页面加载/刷新后大约 0-2 毫秒触发（至少这是我的日志记录脚本记录的内容），而`.ready()`在页面刷新后总是需要至少 15-20 毫秒，以被解雇（再次 - 由脚本记录）。

我纯粹是为了满足我的好奇心，为什么会有如此“重大”的延迟？当然，对我来说没有问题，jQuery 稍后会触发该事件。只是，因为我想知道所有答案（并统治世界！:]），我睡不着！:]

**编辑**：在[.ready() 函数文档](http://api.jquery.com/ready/)中，一些用户（尼克（Nexxar））指出：“ *jQuery 模拟 IE 上不存在的“DOMContentLoaded”事件，但使用的机制比其他浏览器上使用的事件触发得晚得多*“ . 也许这是一样的，我问？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-17T13:23:38.993

假设浏览器支持该事件：

1.  真实事件可以支持任何`document`。jQuery 只会使用`document`它被加载的内容，无论你传递给它什么。
2.  即使事件已经发生，jQuery 也会异步触发事件。`'DOMContentLoaded'`如果事件已经发生，附加事件将不会执行任何操作。

这些浏览器没有延迟，请参阅[http://jsfiddle.net/rqTAX/3/](http://jsfiddle.net/rqTAX/3/)（记录的偏移量以毫秒为单位）。

对于不支持该事件的浏览器，jQuery 显然也适用于它们。它将使用与真实不同的hacky机制，并且`DOMContentLoaded`不一定会像真实一样立即触发`DOMContentLoaded`：

```
// The DOM ready check for Internet Explorer
function doScrollCheck() {
    if ( jQuery.isReady ) {
        return;
    }

    try {
        // If IE is used, use the trick by Diego Perini
        // http://javascript.nwbox.com/IEContentLoaded/
        document.documentElement.doScroll("left");
    } catch(e) {
        setTimeout( doScrollCheck, 1 );
        return;
    }

    // and execute any waiting functions
    jQuery.ready();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T13:46:43.033

jQuery 通过绑定到`document`'事件来模拟这个事件，这是在 oldIE`readystatechange`中模拟的标准方式。`DOMContentLoaded`

[根据 jQuery 来源](https://github.com/jquery/jquery/blob/master/src/core.js#L847)，该事件“迟到”但在`window.onload`. 但是，我无法找到该事件*何时准确触发。*`DOMContentLoaded`当 DOM 构建完成并准备好编写脚本时`readystatechange`触发，因此在此*之后*触发；也许它等待布局渲染或类似的样式，或者在渲染/布局过程中稍后触发事件？

无论如何，它可能会*在 之后* `DOMContentLoaded`触发，可能是由于 IE 决定将`document`'更新`readyState`为“完成”。

（如果有人有明确的答案，发表评论，我会更新这个答案；我很想知道它什么时候触发自己，我在任何文档或任何我期望的网站上都找不到这个答案怪癖模式。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-22T00:36:10.710

'ready' 似乎稍后会触发的另一个原因（在实践中）是可能有许多事件与它相关联。如果其中任何一个是长时间运行的同步操作，那么就绪事件将在很久以后出现。例如，我使用了 knockout.js，它可能需要 500 毫秒来初始化页面。

* * *

但是，使用您的最小测试页面当然不是这样。我尝试运行以下命令：

```
 console.log(window.performance.timing.domContentLoadedEventEnd -
             window.performance.timing.domContentLoadedEventStart); 
```

即使对于您的简单超级页面，这也提供了大约 6 毫秒

* * *

我还拿了你的代码并通过 Chrome 的性能工具运行它，发现了一些有趣的事情：

[![在此处输入图像描述](../Images/05f18baa965bb6dd1f2669da7f38f0a0.png)](https://i.stack.imgur.com/IO2Bj.png)

*   顺便说一句：垂直的蓝色条是DOMCONTENTLOADED，绿色是“第一次绘制”
*   您可以看到，即使是对 DOMCONTENTLOADED 事件的超级简单函数调用也可能需要 5 毫秒（这是在 i7 上）。请记住，它需要被解析并且需要初始化。
*   回调以青色（匿名）显示，第一个来自 DOMCONTENTLOADED 事件，第二个是“就绪”回调。
*   您会注意到“Timer Fired”（即`setTimeout`）。所以它无论如何都不是瞬时的。

查看[jQuery 源代码](https://github.com/jquery/jquery/blob/bd984f0ee2cf40107a669d80d92566b8625b1e6b/src/core/ready.js)，您会发现它们实际上为回调设置了一个计时器：

```
// Handle it asynchronously to allow scripts the opportunity to delay ready
window.setTimeout( jQuery.ready ); 
```

我不*完全*确定他们在这里的意思（任何想法） - 但它解释了这种行为。我可以看到它有助于避免竞争条件，并阻止 UI 但我不清楚“延迟准备好”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-09T13:15:19.087

除了我，还有人使用 jQuery 吗？;)

从**jQuery 3.0**开始，只`$( handler )`推荐使用语法
（相当于`$( document ).ready( handler )`）。

来自 API 文档：[.ready()](https://api.jquery.com/ready/)

# javascript - 上传新版本的图像并避免缓存

> ID：11523363
> 
> 赞同：2
> 
> 时间：2012-07-17T13:18:07.717
> 
> 标签：javascript, ajax, browser-cache

在我们的应用程序中，我们有两个用例，我们希望避免从浏览器缓存中检索过时的图像：

1.  用户更改了她的个人资料图片。
2.  一个用户改变了她被允许管理的另一个用户的图片（想想一个团队和他们的队长）。

在上传视图中，通过在图像 URL 上附加时间戳没有任何问题，正如其他问题（[AJAX 文件上传后刷新图像](https://stackoverflow.com/questions/3228149/is-there-a-way-to-refresh-an-image-after-an-ajax-file-upload-in-jquery)、[中断图像缓存](https://stackoverflow.com/questions/8411244/break-image-caching-in-browser)）中所建议的那样。对于所有其他视图，这种简单方法可能存在问题：我们实际上希望尽可能使用缓存，但如果我们知道我们最近更新了图像，请避免使用它。

在我们的应用程序中，管理用户使用用户列表，该用户列表通过用户图像表示用户（我知道，这是革命性的）。如果她刚刚更改了其中一个用户图像，她希望此列表显示新图像。每隔一次她看到用户的图像时也是如此。

我们不能添加`?timestamp={now}`到此用户列表中的每个图像，因为这会破坏任何缓存的好处。

对于尽可能多地使用缓存并重新加载我们知道我们已经更新的图像的好方法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:18:07.717

我们目前选择的解决方案：

1.  我们计划为图像设置适当的标题（请参阅[这个非常好的答案](https://stackoverflow.com/a/6519601/12039)）
2.  我们存储在渲染 URL 时使用的更新图像的本地列表

第 2 部分可能需要一些解释：幸运的是，我们在前端使用了一个[非常好的 JS 框架](http://javascriptmvc.com/)，它允许我们定义任意方法并在模板中使用它们。我们的模型有一个返回照片 URL 的方法，这个 URL 用于每个模板。

上传新图片时，我们将 id 与 localStorage 中的当前时间戳关联：

```
window.localStorage['nocache.'+id] = new Date().getTime() 
```

每当我们请求图像路径时，我们都会查看 localStorage 以查看是否必须将时间戳附加到 URL，否则 URL 会按原样返回。

# 优点/改进

*   用户自己触发的更新将立即可用，不仅在缓存过期后。
*   所有其他资源都使用缓存。
*   我们会查看`localStorage`我们正在构建的每个图像 URL。这可能很昂贵。
*   我们总是必须通过模型的方法来创建照片 URL（从 DRY 的角度来看很好，但我们必须使用模型）

# 代码

生成 URL 的代码如下所示

```
getPhotoUrl: function() {
    return api.getImageUrl(this.id)
} 
```

在 API 中（非常简化）

```
getImageUrl: function(id) {
    var url = "/prefix/something/user/" + id + "/image";
    // if we have stored a timestamp, add that to the URL
    var noCache = window.localStorage['nocache.'+id];
    if (noCache !== undefined) {
        url += "?" + noCache;
    }
    return url;
} 
```

模板代码保持不变：

```
<!-- render via img.src -->
<img src="<%= user.getPhotoUrl() %>" alt="<%= user.lastname %>" />

<!-- render via CSS background -->
<div class="img" alt="<%= this.shortUsername %>"
    style="background-image: url('<%= this.getPhotoUrl() %>')">
    ...
</div> 
```

# mysql - 如何将 DateTime 列与仅日期而不是时间进行比较

> ID：11523367
> 
> 赞同：5
> 
> 时间：2012-07-17T13:18:21.150
> 
> 标签：mysql, datetime

我正在使用 mySql 并且我的表列`date`是 DATETIME 类型

但我只想比较今天的日期而不是时间

```
 $today = date("Y-m-d",  time()); 
```

如果我使用上述方法比较日期，它总是会出错。

```
$this->update("
UPDATE `stats_tracker` 
SET 
  `user_agent`='$this->visitor_user_agent' , 
  `referrer`='$this->referrer_page' , 
  `page_views`='$page_views' 
WHERE 
  `visitor_ip`='$this->visitor_ip' 
  AND `page`='$this->this_page' 
  AND `date`='$today'"); 
```

请帮助我，我不是一个好的 mySQL 程序员。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T13:23:48.847

有一个名为 DATE 的 mysql 函数，它提取日期或日期时间表达式的日期部分

```
AND DATE(`date`)='$today' 
```

编辑：小心，如下面的评论中所说，使用它会绕过日期时间字段的索引。您应该改用：

```
AND date BETWEEN '$today 00:00:00' AND '$today 23:59:59' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:22:20.710

您可以像这样使用[datediff](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)函数：

```
AND datediff(`date`, '$today') = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:22:06.513

```
date_format('%Y-%m', time()) 
```

可能是您需要用来进行比较的功能。

# c - Watcom 内联汇编文档

> ID：11523376
> 
> 赞同：2
> 
> 时间：2012-07-17T13:18:43.487
> 
> 标签：c, inline-assembly, watcom

搜索有关 Open Watcom 链接器、内联汇编和 C 编译器的手册和文档，因为我发现官方手册不够好。我特别关注 C 和汇编。感谢您提供指向教程、书籍等的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T16:32:44.917

回到过去，Watcom 是 32 位 C/Asm 开发的完美工具。同时，在 ftp 档案中可以找到很多信息，例如古老的[ftp://x2ftp.oulu.fi](ftp://x2ftp.oulu.fi)。它现在已不复存在，但存在[镜子](ftp://ftp.lanet.lv/pub/programming/mirror-x2ftp)。查看那里的 /watcom 文件夹。

还可以尝试搜索[http://www.programmersheaven.com](http://www.programmersheaven.com)等较旧的网站，它们是*来源*。

编辑：截至 2017 年，上面的链接（程序员的天堂）似乎缺少大部分信息，因此唯一的参考似乎是 OpenWatcom 的文档和一些旧的开源软件。

# jquery - ipad 上的 jquery window.open(url)

> ID：11523379
> 
> 赞同：4
> 
> 时间：2012-07-17T13:18:46.433
> 
> 标签：jquery, ipad

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />     

$('#btn-fb-share').click(function() {
        $('#btn-fb-share').attr("disabled", "disabled");
        window.open(url,"Mywindow","location=yes,menubar=yes");
    }); 
```

在我的 Ipad 上（我在主屏幕上创建了网站的快捷方式），链接不会在新窗口（Safari）中打开。我该如何解决这个问题？在我的电脑上，链接在新窗口中正确打开。

编辑：我会尽量解释清楚。

发生了什么：我的 Web 应用打开的 URL 与我的应用在同一个窗口中。 ![流程是](../Images/4b292d6b7e0c0d601fd375c835ab1418.png)

应该发生的是：Facebook 页面在 safari 的新选项卡中打开。（如果我通过 safari 而不是我的网络应用程序打开我的网站，我可以证明这一点。）

![流程应该是](../Images/a13074e795694e475bcd7e2d304ce9dd.png)

我希望你现在能看到不同之处。我需要在 Safari 中的新选项卡中打开我的链接。但现在它一直在我的窗口中打开它，我没有“返回按钮”。

两张图的唯一区别是。第一张图片是保存在我的主屏幕上的网站。第二张图片是直接在 Safari 中打开的网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:45:14.323

进行了谷歌搜索，并[在 macrumors.com](http://forums.macrumors.com/showthread.php?t=1059273)上找到了这个帖子，并解释了同样的问题：

*对于我想在 WebApp 中打开而不在 Safari 中打开的链接，我使用这个：*

```
<a onclick="parent.location='http://url.com/page.html'">Link</a> 
```

*对于我想在 Safari 中打开的链接，我使用标准的 HTML 链接：*

```
<a href="http://url.com/another_page.html">Link</a> 
```

所以我又做了一次谷歌搜索，发现如何检测你是否在 JavaScript 中使用 iOS：http: [//forrst.com/posts/JavaScript_iOS_Detection-Ofa](http://forrst.com/posts/JavaScript_iOS_Detection-Ofa)

这是我的解决方案：

```
var url = "http://www.google.com/";

// Get the user agent string
var deviceAgent = navigator.userAgent;
// Set var to iOS device name or null
var ios = deviceAgent.toLowerCase().match(/(iphone|ipod|ipad)/);

$('#btn-fb-share').click(function() {

    if (ios) {
        // This is the line that matters
        $(this).attr('href', url);
    } else {
        // Your code that works for desktop browsers
        $('#btn-fb-share').attr("disabled", "disabled");
        window.open(url,2789432749274249,"location=yes,menubar=yes");
    }
}); 
```

我在桌面上的 Chrome 中以及通过 Safari 和主屏幕 WebApp 在 iOS 上对其进行了测试。这是我的工作测试的链接：http: [//flackend.com/other/ios-test/](http://flackend.com/other/ios-test/)

请注意，您需要将链接设置`target`为`_blank`以在 iOS 上的 Safari 的新选项卡中打开它（如果您在 Safari 应用程序中打开它，则不是来自 WebApp 实例）。您可以直接在 HTML 标记中进行设置，也可以使用 jQuery 使用`attr`.

# php - PHP 函数位于何处？（如在哪个文件中）

> ID：11523380
> 
> 赞同：1
> 
> 时间：2012-07-17T13:18:47.160
> 
> 标签：php, debugging

> **可能重复：**
> [如何找出函数的定义位置？](https://stackoverflow.com/questions/2222142/how-to-find-out-where-a-function-is-defined)

我有一个相当复杂的 OOP PHP 项目，其中有很多类、库和帮助程序可供使用。

在调试时，我有时会发现当某个特定函数的实例存在于不同的文件或类中时，我很难找到它在哪个实例中使用，并且如果不查看整个代码，我就无法判断包含了哪个类或库。

我想知道是否有语言构造、函数甚至外部工具（例如调试器）可以帮助我准确定位特定函数位于哪个文件和哪一行。

例如：

```
moditem(25); // How I call the function usually
echo locate_function('moditem'); 
```

显示如下内容：

```
Function moditem() is located in file: lib/users.php, line 234. 
```

这是一个片段：

```
...
return TRUE;
}

function moditem($id){
    $modify = $this->modify($id);
    return $modify;
}
... 
```

我的 IDE 有一种方法可以引导我进行函数声明，但是当我有 20 个文件具有不同版本的同名函数时，它会感到困惑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T13:22:30.713

```
$ref = new ReflectionFunction('moditem');
echo $ref->getFileName(); 
```

参见[http://php.net/reflectionfunction](http://php.net/reflectionfunction)和类似的相关反射方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:22:06.203

通常在 IDE 中，您可以按`CTRL`+ `CLICK`，它会带您进入函数声明。

或者，如果您只想要调试输出，您可以在函数中执行此操作：

```
echo __FILE__ . ":" . __LINE__; 
```

[这是有关魔术常量的文档](http://php.net/manual/en/language.constants.predefined.php)

# java - 如何在grails中进行外部url调用

> ID：11523385
> 
> 赞同：2
> 
> 时间：2012-07-17T13:19:00.847
> 
> 标签：java, grails

我想使用 jquery ajax 从 grails 应用程序或在 grails 应用程序的服务器端请求支付网关 url，但无法使用 jquery ajax 请求从 grails 应用程序请求 url，因为由于 securityfilters.groovy 请求无法继续.

他们有什么方法可以过滤 securityFilters.groovy 中的特定 url，还是我可以从服务器端请求外部 url 并获得响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:51:06.453

我认为您在对不同域进行 AJAX 调用时遇到了 Xss 问题。您可以改为在应用程序中调用服务器端操作，该操作可以使用必要的参数调用 URL。您可以使用[HTTPBuilder](http://groovy.codehaus.org/HTTP+Builder)库进行调用。

# maven-2 - Maven2无法解析子依赖

> ID：11523391
> 
> 赞同：0
> 
> 时间：2012-07-17T13:19:19.917
> 
> 标签：maven-2, dependencies, multi-project

我们在多项目环境中使用 Maven2。实际上我正在处理依赖范围。在目标解决方案中，我想通过设置类路径将所有依赖项提交给 vm。

Pom_Project_A_.xml

```
<dependencies>
    <dependency>log4j</dependency>
    <dependency>commons-io</dependency>
    <dependency>...</dependency>
</dependencies> 
```

Pom_Project_B.xml

```
<dependencies>
    <dependency>Project_A</dependency>
</dependencies> 
```

当我想编译项目“B”时，maven 无法解析 log4j 和项目“A”中已经定义的其他“子依赖项”。

是否有可能改变这种行为？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:58:50.160

范围“编译”是我需要的。我对 maven 目标包、程序集等的范围编译、运行时、测试等感到困惑。

项目 A 的 Pom：

```
<parent>
    <groupId>net.company</groupId>
    <artifactId>superpom</artifactId>
    <version>1.0.2</version>
</parent>

<groupId>net.company.projectA</groupId>
<artifactId>projectA</artifactId>
<version>1.1.0-SNAPSHOT</version>
<packaging>jar</packaging>
<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <scope>compile</scope>
    </dependency>
</dependencies> 
```

项目 B 的 Pom：

```
<parent>
    <groupId>net.company</groupId>
    <artifactId>superpom</artifactId>
    <version>1.0.2</version>
</parent>

<groupId>net.company.projectB</groupId>
<artifactId>projectB</artifactId>
<version>1.1.2-SNAPSHOT</version>
<packaging>jar</packaging>
<dependencies>
    <dependency>
        <groupId>net.company.projectA</groupId>
        <artifactId>projectA</artifactId>
        <version>1.1.0-SNAPSHOT</version>
        <scope>compile</scope>
    </dependency>
</dependencies> 
```

# asp.net-mvc-3 - MVC3 无法将模型设计与验证匹配

> ID：11523396
> 
> 赞同：0
> 
> 时间：2012-07-17T13:19:43.900
> 
> 标签：asp.net-mvc-3

这个解释起来有点棘手，所以我接受可能需要更多细节。

我正在做一个 MVC3 项目。我有两个具有多对多关系的对象，因此我将模型设计如下：

对象1

```
int ID
IEnumerable<Object2> Object2s 
```

对象2

```
int ID
[Required]
string Name
IEnumerable<Object1> Objects1s 
```

然后我想使用一个表单更新 Object1，这包括 Object2 中每个 Object2 的复选框列表。如果应该从 Object2s 中删除 Object2，将检查这些内容。该视图类似于以下内容：

```
@Html.EditorFor(c => c.ID)

if (Model.Object2s.Count() > 0)
{
    @Html.EditorFor(c => c.Object2s)
} 
```

注意 - c.Object2s 的 EditorFor 是自定义 EditorTemplate。

我遇到的问题是，当服务器端验证启动时，它会报告错误，因为每个 Object2 对象都没有设置其 Name 属性。Name 属性对我来说并不重要，只是为了更新 Object1。

`IEnumerable<Object>`我用而不是定义对象是否出错了`IEnumerable<int>`？

或者是否有另一种方法来停止对 Object2 的验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:40:08.887

好的，我无法准确计算出我想要的内容，但通过不绑定`Object2s`属性解决了这个特定问题。相反，我`int[]`在控制器中选择了一个复选框并使用它来填充`Object2s`属性。

# java - main() 中的返回返回到哪里？

> ID：11523402
> 
> 赞同：3
> 
> 时间：2012-07-17T13:20:10.263
> 
> 标签：java, return

> **可能重复：**
> [谁调用了 java 中的 main 函数？](https://stackoverflow.com/questions/3949642/who-calls-the-main-function-in-java)

考虑这段代码：

```
class abc {
  public static void main(String x[]) {
    return;
  }
} 
```

何时到达控制权在哪里`return`？当我们执行这个程序时，说通过

```
$ java abc 
```

编译器搜索该`main`方法，然后继续进行。在其他情况下，我们调用一个函数，如果我们到达 a `return`，控制权将返回到最后一个调用点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T13:23:20.807

控制总是返回给呼叫发起者。在这种情况下，发起者可能是操作环境，或者是另一个调用的方法`main`（请记住，在被调用时，`main`它并不特殊；其他方法也可以调用它）。

# perl - 可以将字符串前缀到单行输出吗？

> ID：11523405
> 
> 赞同：1
> 
> 时间：2012-07-17T13:20:19.060
> 
> 标签：perl

如果我做

```
perl -nE'say for m|fullImageLink.+?<a href="(.+?)"|g' tmp 
```

然后我得到

```
/images/9/92/233-Menu.jpg 
```

是否可以在输出前加上前缀`example.com/`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:22:24.553

```
perl -nE'say q{example.com}, $_ for m|fullImageLink.+?<a href="(.+?)"|g' tmp 
```

如果已经存在域名，将会非常糟糕。

# google-maps - Fusion Table Google Mapping - 如何添加将更新可视化的附加下拉选择

> ID：11523407
> 
> 赞同：0
> 
> 时间：2012-07-17T13:20:23.513
> 
> 标签：google-maps, google-fusion-tables

我正在使用此处提供的代码来制作气候变化温度图。

[http://code.google.com/p/gmaps-samples/source/browse/trunk/fusiontables/dynamic_styling_template.html](http://code.google.com/p/gmaps-samples/source/browse/trunk/fusiontables/dynamic_styling_template.html)

现有代码允许直观查询“城乡住房总数”和“城镇住房总数”的不同栏目。我已经修改了代码以使其查询的列是百分位数列（10th Percentile/20th Percentile/30th Percentile/40th Percentile/50th Percentile/60th Percentile/70th Percentile/80th Percentile/90th Percentile）。在我的 Fusion Table 中，还有一个单独的 Month 列，它与百分位值有关。

草率的例子：

```
Month    10th Percentile    20th Percentile
1              1                            4545
2              34                           565
3              45645                      565
 ..
12            5656                        565 
```

现在，我不知道如何添加代码来创建基于月份的附加下拉菜单查询。我尝试过使用 Fusion Tables API [https://developers.google.com/fusiontables/](https://developers.google.com/fusiontables/)，但不知道如何获取我需要的代码。我希望这样，当通过两个单独的下拉菜单选择特定月份和百分位数时，融合表图将一起更新多边形可视化颜色值。

因此，我希望有人可以为我提供 JavaScript 代码，以便仅在月份列的另一个下拉菜单中添加它，并且它仅根据所选月份的值更新可视化。

谢谢！乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:21:30.327

根据此[链接](http://kh-samples.googlecode.com/svn/trunk/code/instructions.html)，一旦表上有数据，就无法更改架构：

> ...一旦开始收集数据，就不能对表格或 Fusion Table 进行任何更改。

# cakephp - 在 Cakephp 中显示相关表中的字段

> ID：11523411
> 
> 赞同：0
> 
> 时间：2012-07-17T13:20:37.980
> 
> 标签：cakephp, relationship

我对 CakePhp 中的相关表有一个非常简单的问题。我有两张通过关系多对多的表。

我只是想显示相关对象的名称，而不是它的 ID。

我的控制台做的界面和这个一模一样：![在此处输入图像描述](../Images/55a3cde59524c2bd0ff4c03031f78af3.png)

[我在CakePhp 文档](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)中找到了递归参数，我在 StackOverflow 上找到了许多相关问题，但仍然失败。

这是控制器：

```
/**
* view method
*
* @throws NotFoundException
* @param string $id
* @return void
*/
public function view($id = null) {
    $this->Application->id = $id;
    if (!$this->Application->exists()) {
        throw new NotFoundException(__('Invalid application'));
    }
    $this->set('application', $this->Application->read(null, $id));
} 
```

这是视图。

```
<div class="related">
<h3><?php echo __('Related Application Memberships'); ?></h3>
<?php if (!empty($application['ApplicationMembership'])): ?>
<table cellpadding = "0" cellspacing = "0">
<tr>
    <th><?php echo __('Id'); ?></th>
    <th><?php echo __('Chantier Id'); ?></th>
    <th><?php echo __('Application Id'); ?></th>
    <th><?php echo __('Ponderation'); ?></th>
    <th class="actions"><?php echo __('Actions'); ?></th>
</tr>
<?php
    $i = 0;
    foreach ($application['ApplicationMembership'] as $applicationMembership): ?>
    <tr>
        <td><?php echo $applicationMembership['id']; ?></td>
        <td><?php echo $applicationMembership['chantier_id']; ?></td>
        <td><?php echo $applicationMembership['application_id']; ?></td>
        <td><?php echo $applicationMembership['ponderation']; ?></td>
        <td class="actions">
            <?php echo $this->Html->link(__('View'), array('controller' => 'application_memberships', 'action' => 'view', $applicationMembership['id'])); ?>
            <?php echo $this->Html->link(__('Edit'), array('controller' => 'application_memberships', 'action' => 'edit', $applicationMembership['id'])); ?>
            <?php echo $this->Form->postLink(__('Delete'), array('controller' => 'application_memberships', 'action' => 'delete', $applicationMembership['id']), null, __('Are you sure you want to delete # %s?', $applicationMembership['id'])); ?>
        </td>
    </tr>
<?php endforeach; ?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:51:24.420

使用 CakePHP 的[Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。到处都有教程/解释，包括至少 500 个左右，我在 StackOverflow 上写了自己。

基本上，只要关联设置正确，CakePHP 的 Containable Behavior 允许您挑选和选择您想要在数据中返回的任何内容/所有内容。

阅读 Containable 并尝试一下。如果它仍然不起作用，请将其发布为“Can't get containable to work in CakePHP”问题（或类似的问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-05T01:31:04.593

如果您在 2015 年，尝试在 cakephp3 找到解决方案，这可能会有所帮助：

Tables-> People, Patients, Drugs,drugs_patients Patient 有 person_id drug_patients 是 Drugs 和 Patients 之间的多对多，还有其他字段，例如 startDate 和 endDate

现在您在添加中的 drugPatients 控制器中，并且您希望使用来自患者的 id 和来自人员的名称填充选择的患者。

这是小菜一碟：

$patients = $this->DrugsPatients->Patients->find('list', ['keyField' => 'id','valueField' => 'person.name'])->contain(['People'] );

=)

# java - 将 FoxPro 表与 Web 服务器一起使用

> ID：11523414
> 
> 赞同：1
> 
> 时间：2012-07-17T13:20:48.870
> 
> 标签：java, jakarta-ee, jdbc, persistence, foxpro

我目前正在开发一个需要读取 FoxPro 数据表的 java 应用程序。我一直在使用 jdbc-odbc 驱动程序成功读取表。不过，我真正需要做的是通过持久性单元提供这些数据，着眼于将数据与诸如 glassfish 之类的 Web 服务器集成。FoxPro 表未链接到 SQL 服务器。我不确定这是否可以完成，或者如何处理它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:06:44.073

您可以将 Foxpro 数据库添加为 SQL Server 中的链接服务器。

[http://support.microsoft.com/kb/199​​131](http://support.microsoft.com/kb/199131)

# android - 当我在 Android 中单击不同的列表项时如何获取不同的值？

> ID：11523416
> 
> 赞同：-2
> 
> 时间：2012-07-17T13:20:51.697
> 
> 标签：android, listview

当我单击`ListView`. 例如; 当code=1我想得到不同的值，当code=2我想得到不同的值。我怎样才能做到这一点？

这是我的代码。

* * *

```
 Element e = (Element) nl.item(i);

        map.put(KEY_CODE, conParser.getValue(e, KEY_CODE));
        map.put(KEY_NAME, conParser.getValue(e, KEY_NAME));
        map.put(KEY_COVERS, conParser.getValue(e, KEY_COVERS));
        map.put(KEY_TABLE, conParser.getValue(e, KEY_TABLE));
        map.put(KEY_SALES, conParser.getValue(e, KEY_SALES));

        items.add(map);

    }

              final ListAdapter adapter = new SimpleAdapter(this, items,
            R.layout.list_item,
            new String[]    {KEY_CODE,KEY_NAME,KEY_COVERS,KEY_TABLE,KEY_SALES}, 
         new int[] {R.id.kod,  R.id.name,R.id.person,R.id.table,R.id.sale});

              setListAdapter(adapter);

             ListView list= getListView();
             reportList.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // TODO Auto-generated method stub

              startActivity(new Intent(NewActivity.this,SingleNewActivity.class));

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:30:31.223

目前尚不清楚您想要什么，但我发现您想要获得点击的项目。所以在 onItemClick 方法中，父参数是当前列表。因此，您要做的就是从列表中获取适配器，然后单击该项目，并且您知道这一点，因为您拥有该位置。所以基本上你必须在 onItemClick 里面写这个：

> parent.getAdapter().getItem(位置)

并且您选择了项目，因此根据项目实例，您将获得例如 id 值。最好的

# triggers - 我的 Salesforce 触发器测试类有什么问题？

> ID：11523417
> 
> 赞同：0
> 
> 时间：2012-07-17T13:20:55.970
> 
> 标签：triggers, salesforce, apex-code

我写了一个简单的 SalesForce 触发器。一旦潜在客户变得不合格，我想将 IsUnreadbyOwner 字段更新为 False（这发生在我们的用户将潜在客户留在队列中时）。

我的触发器是：

```
trigger UnqualifiedLead on Lead (after update) {
    for(Lead lead: Trigger.new)
    {
        if (lead.Status == 'Unqualified')
        {
            lead.IsUnreadByOwner = False;   
        }
    }
} 
```

我的测试类，AFAIK 应该是这样的：

```
@isTest
private class UnqualifiedLeadTest {
static testMethod void myUnitTest() {
        // Setup the lead record
        Lead lead = new Lead();
        lead.LastName = 'last';
        lead.FirstName = 'First';
        lead.Company = 'Company';
        lead.Status = 'Unqualified';
        lead.IsUnreadByOwner = True;
        insert lead;
    }
} 
```

但是，我收到一个覆盖错误：覆盖率为 0%。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:45:59.040

In your test class you are only inserting the record yet your trigger is only setup to capture update events. You will either need to insert the lead then update to execute your trigger or add "on insert" to your trigger so that it runs when a lead is inserted and updated.

Also, you are using an after event when you should be using a before event trigger for this type of update. Saves having to perform an additional DML operation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:04:41.573

同样重要的是要注意您的单元测试实际上甚至没有测试任何东西。您的代码应如下所示：

```
trigger UnqualifiedLead on Lead (before update) 
{
    for(Lead lead: Trigger.new)
    {
        if (lead.Status == 'Unqualified')
        {
            lead.IsUnreadByOwner = False;   
        }
    }
} 
```

测试类：

```
@isTest
private class UnqualifiedLeadTest 
{
    static testMethod void myUnitTest() 
    {
        // Setup the lead record
        Lead lead = new Lead();
        lead.LastName = 'last';
        lead.FirstName = 'First';
        lead.Company = 'Company';
        lead.Status = 'NewStatus';
        lead.IsUnreadByOwner = True;
        insert lead;

        test.startTest();

        lead.Status = 'Unqualified';
        update lead;

        Lead lTest = [SELECT Id, IsUnreadByOwner FROM Lead WHERE Id=:lead.Id];
        system.assertEquals(false, lTest.IsUnreadByOwner);

        test.stopTest();
    }
} 
```

# regex - 如何防止正则表达式循环 url 重写

> ID：11523418
> 
> 赞同：0
> 
> 时间：2012-07-17T13:20:55.797
> 
> 标签：regex, wordpress, infinite-loop, url-redirection

我正在尝试使用 wordpress 插件[重定向](http://urbangiraffe.com/plugins/redirection/)来重定向 url，例如：

[http://mysite.com/wp-content/uploads/image.jpg](http://mysite.com/wp-content/uploads/image.jpg) 到

[http://mysite.com/subdir/wp-content/uploads/image.jpg](http://mysite.com/subdir/wp-content/uploads/image.jpg)

我正在尝试`/(wp-content/uploads/.*)`发现它重定向到：

[http://mysite.com/subdir/subdir/subdir/subdir/subdir/subdir](http://mysite.com/subdir/subdir/subdir/subdir/subdir/subdir) ....

并在 Firefox 中引发错误：“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。”

我也试过：

```
^https?://(|www\.)mysite.com.au/(wp-content/uploads/.*) 
```

但似乎重定向不适用于域 - 页面加载 404，并且 URL 没有更改。

任何线索表示赞赏！

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:23:33.317

您需要`[L]`为重写指定标志以确保它是*最后一个*. 否则，它会不断重写您的 URL，`subdir`每次都附加。

我不熟悉重定向插件。看看有没有这个选项。如果没有，我建议使用更具体的正则表达式或删除插件并自己编写这些，直接在`.htaccess`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:39:18.107

将规则更改为 ^/wp-content..

另外，我认为该规则实际上正在与另一个规则交互，这似乎可以通过将我的规则移动到首先运行来解决，尽管没有地方指定 [L]

将来，当我密切关注日志以查看是否正确时，我会将重定向移动到 .htaccess 并使用 @jason 建议的 [L] 标志。

# ruby-on-rails - Xpath 和数组

> ID：11523422
> 
> 赞同：1
> 
> 时间：2012-07-17T13:21:03.630
> 
> 标签：ruby-on-rails, ruby, xpath

我正在抓取网页的文本，使用如下代码

```
doc.xpath("//td[text()='Operating system']/following-sibling::td")
doc.xpath("//td[text()='Processors']/following-sibling::td") 
```

我有大约 30 个，所以我想我可以使用一个数组，但它不起作用，这是我的代码

```
clues = Array.new
clues << 'Operating system'
clues << 'Processors'
clues << 'Chipset'

clues.each do |clue_storeage|
doc.xpath("//td[text()=#{clues}]/following-sibling::td")
end 
```

有没有办法可以将数组输入到该循环中，然后将其输出到 CSV？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:46:29.390

为了澄清 mb2nd 的评论，您的每个块都错误地引用了数组。这应该有效：

```
clues.each do |clue|
  doc.xpath("//td[text()=#{clue}]/following-sibling::td")
end 
```

要将捕获的数据输出到 CSV，您可以运行：

```
csv = ""
clues.each do |clue|
  csv << doc.xpath("//td[text()=#{clue}]/following-sibling::td")
  csv << ", " unless clues.last == clue
end 
```

doc.xpath("//td[text()=#{clue}]/following-sibling::td") 调用最后可能需要 .value 吗？

附带说明；你也可以像这样填充你的数组：

```
clues = ['Operating system', 'Processors', 'Chipset'] 
```

* * *

编辑（在@Ninja2K 的最后评论之后）

您需要保存每个 xpath 调用的结果。这是一些工作代码：

```
require 'rubygems' 
require 'nokogiri' 
require 'open-uri' 

doc = Nokogiri::HTML(open("http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1%22"))

clues = ['Operating system', 'Processors', 'Chipset'] 

csv_text = ""
clues.each do |clue|
  csv_text << doc.at_xpath("//td[text()='#{clue}']/following-sibling::td").text
  csv_text << ", " unless clues.last == clue
end
puts csv_text 
```

顺便提一句。您可能还会发现这篇文章很有用：http: [//hunterpowers.com/data-scraping-and-more-with-ruby-nokogiri-sinatra-and-heroku/](http://hunterpowers.com/data-scraping-and-more-with-ruby-nokogiri-sinatra-and-heroku/)

# android - 如何为 Android 测试生成缩放/捏合手势

> ID：11523423
> 
> 赞同：20
> 
> 时间：2012-07-17T13:21:04.783
> 
> 标签：android, testing, zooming, gesture

我正在尝试生成缩放/捏合手势进行测试，我尝试使用 Android API MotionEvent.obtain()，但发现很难实现缩放/捏合事件。

[我从MotionEvent.obtain](http://developer.android.com/reference/android/view/MotionEvent.html#obtain(long,%20long,%20int,%20int,%20android.view.MotionEvent.PointerProperties[],%20android.view.MotionEvent.PointerCoords[],%20int,%20int,%20float,%20float,%20int,%20int,%20int,%20int))引用了 API 。你能告诉我正确的方法吗？

这是我的实现：

```
//for zoom, we need four points coordinations: start0, start1, end0, end1

Instrumentation inst;

// action down event
MotionEvent event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_DOWN, 1, prop_start0, pointerCoords_start0, 0,  0, 0, 0, 0, 0, 0, 0 );
inst.sendPointerSync(event);

// action pointer 2 down event
event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_POINTER_2_DOWN, 2, properties_start0_1, pointerCoords_start0_1, 0, 0, 0, 0, 0, 0, 0, 0);
inst.sendPointerSync(event);

// action move events
duration = 1000; //1000 ms
event_interval = 10;//time interval between consecutive events 10ms 
moveEventNum = duration / event_interval; 
stepx0 = (end0.x - start0.x)/moveEventNum;
stepy0 = (end0.y - start0.y)/moveEventNum;
stepx1 = (end1.x - start1.x)/moveEventNum;
stepy1 = (end1.y - start1.y)/moveEventNum;

move_event0= start0;
move_event1 = start1;
for ( int i = 0; i < moveEventNum; i++) {
       //  [generate middle points here ]
       mov_event0.x += stepx0;
       mov_event0.y += stepy0;
       mov_event1.x += stepx1;
       mov_event1.y += stepy1;

      eventTime += event_interval;

      event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_MOVE, 2, properties_move_event, pointerCoords_move_event0_1, 0, 0, 0, 0, 0, 0, 0, 0); 

     inst.sendPointerSync(event);
}

event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_POINTER_2_UP, 2, properties_end0_1, pointerCoords_end0_1, 0, 0, 0, 0, 0, 0, 0, 0);
inst.sendPointerSync(event);

event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_UP, 1, end1, pointerCoords_end1, 0, 0, 0, 0, 0, 0, 0, 0 );
inst.sendPointerSync(event); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T09:55:48.690

好吧，我发现了这个问题。

***问题：***

在使用 gain() API 时，我们必须在每个事件中设置点的压力和大小。

为了

```
obtain(long, long, int, int, android.view.MotionEvent.PointerProperties[], 
android.view.MotionEvent.PointerCoords[], int, int, float, float, int, int, int, int) 
```

PointerCoords[]，我们必须将压力和大小设置为 1，默认值为 0。

为了

```
public static MotionEvent obtain (long downTime, long eventTime, int action,
         float x, float y, int metaState)

     Create a new MotionEvent, filling in a subset of the basic motion values. 
    Those not specified here are: device id (always 0), pressure and size (always 1), 
x and y precision (always 1), and edgeFlags (always 0).

since the default pressure and size are 1, so we don't need to set them. 
```

***我创建手势的技巧：***

**1.遵循真实的手势序列，因为我们要模拟真实的手势**

*   覆盖 onTouchEvent() 以检查应用程序接收到的真实事件。这些事件也可以用于比较真实用户的触摸事件和生成的触摸事件以浏览器为例：

    a) @Override public boolean onTouchEvent(MotionEvent event) { Log.i("WebView", event.toString() + event.getAction()); boolean rt = super.onTouchEvent(event); 返回rt；}

*   手动触摸屏从 a) 中的 onTouchEvent() 获取真实的手势序列。我们可以在生成事件时遵循事件顺序。-- 如果我们不遵循手势事件序列，则检测事件可能会被拒绝。

*   这是缩放手势的有效事件序列，（所有事件的downTime都是相同的）

    一世。一个起点的 ACTION_DOWN

    ii. ACTION_POINTER_2_DOWN 的两个起点

    iii.两个中间点的ACTION_MOVE

    iv. ACTION_POINTER_2_UP 两个端点

    v. 一个端点的 ACTION_UP

**2.正确使用API​​ MotionEvent.obtain**

*   有两个最常用的 gain() API。

***公共静态 MotionEvent 获取（long downTime、long eventTime、int action、float x、float y、int metaState）***

和

***公共静态 MotionEvent 获得（long，long，int，int，android.view.MotionEvent.PointerProperties[]，android.view.MotionEvent.PointerCoords[]，int，int，float，float，int，int，int，int）***

第一个通常用于单点手势，如滑动、滚动、单击等。此功能的参数（压力、大小、xPresion、yPresion）均设​​置为 1。

而第二种是比较通用的一种，可以用于多点触控事件的生成。而对于第二个，我们必须将每个触摸点的指针坐标中的压力、大小设置为 1。

***这是生成缩放手势的示例：***

```
public static void generateZoomGesture(Instrumentation inst,
        long startTime, boolean ifMove, GestureInfo.Point startPoint1,
        GestureInfo.Point startPoint2, GestureInfo.Point endPoint1,
        GestureInfo.Point endPoint2, int duration) {

    if (inst == null || startPoint1 == null
            || (ifMove && endPoint1 == null)) {
        return;
    }

    long eventTime = startTime;
    long downTime = startTime;
    MotionEvent event;
    float eventX1, eventY1, eventX2, eventY2;

    eventX1 = startPoint1.x;
    eventY1 = startPoint1.y;
    eventX2 = startPoint2.x;
    eventY2 = startPoint2.y;

    // specify the property for the two touch points
    PointerProperties[] properties = new PointerProperties[2];
    PointerProperties pp1 = new PointerProperties();
    pp1.id = 0;
    pp1.toolType = MotionEvent.TOOL_TYPE_FINGER;
    PointerProperties pp2 = new PointerProperties();
    pp2.id = 1;
    pp2.toolType = MotionEvent.TOOL_TYPE_FINGER;

    properties[0] = pp1;
    properties[1] = pp2;

    //specify the coordinations of the two touch points
    //NOTE: you MUST set the pressure and size value, or it doesn't work
    PointerCoords[] pointerCoords = new PointerCoords[2];
    PointerCoords pc1 = new PointerCoords();
    pc1.x = eventX1;
    pc1.y = eventY1;
    pc1.pressure = 1;
    pc1.size = 1;
    PointerCoords pc2 = new PointerCoords();
    pc2.x = eventX2;
    pc2.y = eventY2;
    pc2.pressure = 1;
    pc2.size = 1;
    pointerCoords[0] = pc1;
    pointerCoords[1] = pc2;

    //////////////////////////////////////////////////////////////
    // events sequence of zoom gesture
    // 1\. send ACTION_DOWN event of one start point
    // 2\. send ACTION_POINTER_2_DOWN of two start points
    // 3\. send ACTION_MOVE of two middle points
    // 4\. repeat step 3 with updated middle points (x,y),
    //      until reach the end points
    // 5\. send ACTION_POINTER_2_UP of two end points
    // 6\. send ACTION_UP of one end point
    //////////////////////////////////////////////////////////////

    // step 1
    event = MotionEvent.obtain(downTime, eventTime, 
                MotionEvent.ACTION_DOWN, 1, properties, 
                pointerCoords, 0,  0, 1, 1, 0, 0, 0, 0 );

    inst.sendPointerSync(event);

    //step 2
    event = MotionEvent.obtain(downTime, eventTime, 
                MotionEvent.ACTION_POINTER_2_DOWN, 2, 
                properties, pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);

    inst.sendPointerSync(event);

    //step 3, 4
    if (ifMove) {
        int moveEventNumber = 1;
        moveEventNumber = duration / EVENT_MIN_INTERVAL;

        float stepX1, stepY1, stepX2, stepY2;

        stepX1 = (endPoint1.x - startPoint1.x) / moveEventNumber;
        stepY1 = (endPoint1.y - startPoint1.y) / moveEventNumber;
        stepX2 = (endPoint2.x - startPoint2.x) / moveEventNumber;
        stepY2 = (endPoint2.y - startPoint2.y) / moveEventNumber;

        for (int i = 0; i < moveEventNumber; i++) {
            // update the move events
            eventTime += EVENT_MIN_INTERVAL;
            eventX1 += stepX1;
            eventY1 += stepY1;
            eventX2 += stepX2;
            eventY2 += stepY2;

            pc1.x = eventX1;
            pc1.y = eventY1;
            pc2.x = eventX2;
            pc2.y = eventY2;

            pointerCoords[0] = pc1;
            pointerCoords[1] = pc2;

            event = MotionEvent.obtain(downTime, eventTime,
                        MotionEvent.ACTION_MOVE, 2, properties, 
                        pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);

            inst.sendPointerSync(event);
        }
    }

    //step 5
    pc1.x = endPoint1.x;
    pc1.y = endPoint1.y;
    pc2.x = endPoint2.x;
    pc2.y = endPoint2.y;
    pointerCoords[0] = pc1;
    pointerCoords[1] = pc2;

    eventTime += EVENT_MIN_INTERVAL;
    event = MotionEvent.obtain(downTime, eventTime,
                MotionEvent.ACTION_POINTER_2_UP, 2, properties, 
                pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);
    inst.sendPointerSync(event);

    // step 6
    eventTime += EVENT_MIN_INTERVAL;
    event = MotionEvent.obtain(downTime, eventTime, 
                MotionEvent.ACTION_UP, 1, properties, 
                pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0 );
    inst.sendPointerSync(event);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-09-27T08:59:18.993

正如 Täg 在评论中提到的，这可以与 Espresso 一起使用。这是我在 Espresso 中执行此操作的代码，基于 longchuan 的非常好的答案和更新表格 peetasan。

在浓缩咖啡测试中：

```
// Pinch out (to zoom in):
onView(withId(R.id.MyViewId)).perform(pinchOut()); 
```

辅助方法，包括从视图中获取正确坐标的好方法，还包括正确的错误处理`uiController.injectMotionEvent(event)`：

```
public static ViewAction pinchOut() {
    return new ViewAction() {
        @Override
        public Matcher<View> getConstraints() {
            return ViewMatchers.isEnabled();
        }

        @Override
        public String getDescription() {
            return "Pinch out";
        }

        @Override
        public void perform(UiController uiController, View view) {
            Point middlePosition = getCenterPoint(view);

            final int startDelta = 0; // How far from the center point each finger should start
            final int endDelta = 500; // How far from the center point each finger should end (note: Be sure to have this large enough so that the gesture is recognized!)

            Point startPoint1 = new Point(middlePosition.x - startDelta, middlePosition.y);
            Point startPoint2 = new Point(middlePosition.x + startDelta, middlePosition.y);
            Point endPoint1 = new Point(middlePosition.x - endDelta, middlePosition.y);
            Point endPoint2 = new Point(middlePosition.x + endDelta, middlePosition.y);

            performPinch(uiController, startPoint1, startPoint2, endPoint1, endPoint2);
        }
    };
}

public static ViewAction pinchIn() {
    return new ViewAction() {
        @Override
        public Matcher<View> getConstraints() {
            return ViewMatchers.isEnabled();
        }

        @Override
        public String getDescription() {
            return "Pinch in";
        }

        @Override
        public void perform(UiController uiController, View view) {
            Point middlePosition = getCenterPoint(view);

            final int startDelta = 500; // How far from the center point each finger should start (note: Be sure to have this large enough so that the gesture is recognized!)
            final int endDelta = 0; // How far from the center point each finger should end

            Point startPoint1 = new Point(middlePosition.x - startDelta, middlePosition.y);
            Point startPoint2 = new Point(middlePosition.x + startDelta, middlePosition.y);
            Point endPoint1 = new Point(middlePosition.x - endDelta, middlePosition.y);
            Point endPoint2 = new Point(middlePosition.x + endDelta, middlePosition.y);

            performPinch(uiController, startPoint1, startPoint2, endPoint1, endPoint2);
        }
    };
}

@NonNull
private static Point getCenterPoint(View view) {
    int[] locationOnScreen = new int[2];
    view.getLocationOnScreen(locationOnScreen);
    float viewHeight = view.getHeight() * view.getScaleY();
    float viewWidth = view.getWidth() * view.getScaleX();
    return new Point(
            (int) (locationOnScreen[0] + viewWidth / 2),
            (int) (locationOnScreen[1] + viewHeight / 2));
}

private static void performPinch(UiController uiController, Point startPoint1, Point startPoint2, Point endPoint1, Point endPoint2) {
    final int duration = 500;
    final long eventMinInterval = 10;
    final long startTime = SystemClock.uptimeMillis();
    long eventTime = startTime;
    MotionEvent event;
    float eventX1, eventY1, eventX2, eventY2;

    eventX1 = startPoint1.x;
    eventY1 = startPoint1.y;
    eventX2 = startPoint2.x;
    eventY2 = startPoint2.y;

    // Specify the property for the two touch points
    MotionEvent.PointerProperties[] properties = new MotionEvent.PointerProperties[2];
    MotionEvent.PointerProperties pp1 = new MotionEvent.PointerProperties();
    pp1.id = 0;
    pp1.toolType = MotionEvent.TOOL_TYPE_FINGER;
    MotionEvent.PointerProperties pp2 = new MotionEvent.PointerProperties();
    pp2.id = 1;
    pp2.toolType = MotionEvent.TOOL_TYPE_FINGER;

    properties[0] = pp1;
    properties[1] = pp2;

    // Specify the coordinations of the two touch points
    // NOTE: you MUST set the pressure and size value, or it doesn't work
    MotionEvent.PointerCoords[] pointerCoords = new MotionEvent.PointerCoords[2];
    MotionEvent.PointerCoords pc1 = new MotionEvent.PointerCoords();
    pc1.x = eventX1;
    pc1.y = eventY1;
    pc1.pressure = 1;
    pc1.size = 1;
    MotionEvent.PointerCoords pc2 = new MotionEvent.PointerCoords();
    pc2.x = eventX2;
    pc2.y = eventY2;
    pc2.pressure = 1;
    pc2.size = 1;
    pointerCoords[0] = pc1;
    pointerCoords[1] = pc2;

    /*
     * Events sequence of zoom gesture:
     *
     * 1\. Send ACTION_DOWN event of one start point
     * 2\. Send ACTION_POINTER_DOWN of two start points
     * 3\. Send ACTION_MOVE of two middle points
     * 4\. Repeat step 3 with updated middle points (x,y), until reach the end points
     * 5\. Send ACTION_POINTER_UP of two end points
     * 6\. Send ACTION_UP of one end point
     */

    try {
        // Step 1
        event = MotionEvent.obtain(startTime, eventTime,
                MotionEvent.ACTION_DOWN, 1, properties,
                pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);
        injectMotionEventToUiController(uiController, event);

        // Step 2
        event = MotionEvent.obtain(startTime, eventTime,
                MotionEvent.ACTION_POINTER_DOWN + (pp2.id << MotionEvent.ACTION_POINTER_INDEX_SHIFT), 2,
                properties, pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);
        injectMotionEventToUiController(uiController, event);

        // Step 3, 4
        long moveEventNumber = duration / eventMinInterval;

        float stepX1, stepY1, stepX2, stepY2;

        stepX1 = (endPoint1.x - startPoint1.x) / moveEventNumber;
        stepY1 = (endPoint1.y - startPoint1.y) / moveEventNumber;
        stepX2 = (endPoint2.x - startPoint2.x) / moveEventNumber;
        stepY2 = (endPoint2.y - startPoint2.y) / moveEventNumber;

        for (int i = 0; i < moveEventNumber; i++) {
            // Update the move events
            eventTime += eventMinInterval;
            eventX1 += stepX1;
            eventY1 += stepY1;
            eventX2 += stepX2;
            eventY2 += stepY2;

            pc1.x = eventX1;
            pc1.y = eventY1;
            pc2.x = eventX2;
            pc2.y = eventY2;

            pointerCoords[0] = pc1;
            pointerCoords[1] = pc2;

            event = MotionEvent.obtain(startTime, eventTime,
                    MotionEvent.ACTION_MOVE, 2, properties,
                    pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);
            injectMotionEventToUiController(uiController, event);
        }

        // Step 5
        pc1.x = endPoint1.x;
        pc1.y = endPoint1.y;
        pc2.x = endPoint2.x;
        pc2.y = endPoint2.y;
        pointerCoords[0] = pc1;
        pointerCoords[1] = pc2;

        eventTime += eventMinInterval;
        event = MotionEvent.obtain(startTime, eventTime,
                MotionEvent.ACTION_POINTER_UP + (pp2.id << MotionEvent.ACTION_POINTER_INDEX_SHIFT), 2, properties,
                pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);
        injectMotionEventToUiController(uiController, event);

        // Step 6
        eventTime += eventMinInterval;
        event = MotionEvent.obtain(startTime, eventTime,
                MotionEvent.ACTION_UP, 1, properties,
                pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);
        injectMotionEventToUiController(uiController, event);
    } catch (InjectEventSecurityException e) {
        throw new RuntimeException("Could not perform pinch", e);
    }
}

/**
 * Safely call uiController.injectMotionEvent(event): Detect any error and "convert" it to an
 * IllegalStateException
 */
private static void injectMotionEventToUiController(UiController uiController, MotionEvent event) throws InjectEventSecurityException {
    boolean injectEventSucceeded = uiController.injectMotionEvent(event);
    if (!injectEventSucceeded) {
        throw new IllegalStateException("Error performing event " + event);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T13:18:55.277

为了使上面的代码与我使用的非弃用常量一起工作， `MotionEvent.ACTION_POINTER_DOWN + (pp2.id << MotionEvent.ACTION_POINTER_INDEX_SHIFT)`而不是`MotionEvent.ACTION_POINTER_2_DOWN`

所以我不得不替换这一行：

> event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_POINTER_2_DOWN, 2, properties, pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);

和

> event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_POINTER_DOWN + (pp2.id << MotionEvent.ACTION_POINTER_INDEX_SHIFT), 2, 属性, pointerCoords, 0, 0, 1, 1, 0, 0, 0, 0);

# jsf - 如何使用 datascroller 刷新richdatatable？

> ID：11523426
> 
> 赞同：0
> 
> 时间：2012-07-17T13:21:22.880
> 
> 标签：jsf, richdatatable, datascroller

我正在使用 RichFaces 4.0，并且正在尝试显示使用 dataScroller 进行分页的丰富：dataTable。

> ```
> <!-- DATA TABLE -->
> 
> <rich:dataTable id="myTable"
> cellpadding="0" cellspacing="0" border="0" var="var"
> value="#{myService.list}" headerClass="headerClass" rows="10"
> styleClass="table">
> 
> <!-- DATA SCROLLER -->
> <rich:dataScroller for="myTable" pageIndexVar="pageIndex" pagesVar="pages" page="#{myervice.scrollerPage}">
> <f:facet name="pages">
> <h:outputText value="#{pageIndex} / #{pages}" />
> </f:facet>
> </rich:dataScroller> 
> ```

表格分页正常，但链接发生了一些奇怪的事情：

当我单击一个链接（例如页面 2 的链接）时，什么也没有发生，但是当我刷新页面（使用 F5 键）然后刷新页面并且表格成功显示页面 2 时。

我做错了什么？

# for-loop - 在 tcl 中打破父循环

> ID：11523432
> 
> 赞同：2
> 
> 时间：2012-07-17T13:21:36.140
> 
> 标签：for-loop, while-loop, tcl

我在 while 循环中有一个 for 循环。我有一个条件来打破 for 循环中的 while。

这是代码：

```
while {[gets $thefile line] >= 0} {
   for {set i 1} {$i<$count_table} {incr i} {
   if { [regexp "pattern_$i" $line] } {
      for {set break_lines 1} {$break_lines<$nb_lines} {incr break_lines} {
         if {[gets $thefile line_$break_lines] < 0} break
      }
   }
   #some other process to do
} 
```

我想跳过`$nb_lines`解析的文件以进一步做其他事情。这里的break，打破了for循环，所以它不起作用。

for 循环可以使 while 循环中断吗？但是中断仅针对 1 行（或更多）行，我想在中断后继续解析文件以进一步处理行

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:09:07.957

该`break`命令（以及`continue`）不执行多级循环退出。IMO，*最简单的解决方法*是**重构**代码，以便您可以`return`退出外循环。但是，如果你不能这样做，那么你可以使用类似这样的东西（对于 8.5 及更高版本）：

```
proc magictrap {code body} {
    if {$code <= 4} {error "bad magic code"}; # Lower values reserved for Tcl
    if {[catch {uplevel 1 $body} msg opt] == $code} return
    return -options $opt $msg
}
proc magicthrow code {return -code $code "doesn't matter what this is"}

while {[gets $thefile line] >= 0} {
   magictrap 5 {
      for {set i 1} {$i<$count_table} {incr i} {
         if { [regexp "pattern_$i" $line] } {
            for {set break_lines 1} {$break_lines<$nb_lines} {incr break_lines} {
               if {[gets $thefile line_$break_lines] < 0} {magicthrow 5}
            }
         }
      }
   }
   #some other process to do
} 
```

不是很特别（它只是一个自定义结果`5`代码；Tcl 保留 0-4，但不理会其他人）但是您需要为自己选择一个值，这样它就不会与程序中的任何其他用途重叠。（大多数情况下可以重做代码，因此它也适用于 8.4 及之前的版本，但在那里重新抛出异常要复杂得多。）

请注意，自定义异常代码是 Tcl 的“深层魔法”部分。*如果可以，请改用普通重构。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:39:46.947

也许很明显，但您可以使用一个附加变量 ( `go_on`) 来中断 while：

```
while {[gets $thefile line] >= 0} {
  set go_on 1
  for {set i 1} {$i<$count_table && $go_on} {incr i} {
    if { [regexp "pattern_$i" $line] } {
      for {set break_lines 1} {$break_lines<$nb_lines && $go_on} {incr break_lines} {
        if {[gets $thefile line_$break_lines] < 0} { set go_on 0 }
      }
     }
   }
   #some other process to do
} 
```

# java - 反序列化后丢失对对象的引用

> ID：11523434
> 
> 赞同：5
> 
> 时间：2012-07-17T13:21:39.243
> 
> 标签：java

假设我有两个`HashMap`s:`hashMapFoo`和`hashMapBar`.

我在两个地图中创建了一些对象`objCake`，`put`因此每个地图都有一个对 的引用`objCake`，当我对我访问它的任何地图进行一些更改时`objCake`，我得到了我的对象的正确状态。

在我序列化两个地图并反序列化它们之后，我遇到了我的对象`objCake`变成了两个不同的对象的问题！我在 中更改了它的状态`hashMapFoo`，但在 中没有任何反应`hashMapBar`。`hashMapBar`不再包含正确的参考！所有地图和对象`implement Serializable`。

谁能解释一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T13:31:29.590

为我工作：

```
public class MapSerializationTest {
    private static class Foo implements Serializable {
    }

    public static void main(String[] args) throws Exception {
        Foo foo = new Foo();

        Map<String, Foo> map1 = new HashMap<String, Foo>();
        map1.put("foo", foo);
        Map<String, Foo> map2 = new HashMap<String, Foo>();
        map2.put("foo", foo);

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(map1);
        oos.writeObject(map2);
        oos.close();

        byte[] bytes = baos.toByteArray();

        ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
        ObjectInputStream ois = new ObjectInputStream(bais);
        map1 = (Map<String, Foo>) ois.readObject();
        map2 = (Map<String, Foo>) ois.readObject();
        System.out.println(map1.get("foo") == map2.get("foo")); // prints true
    }
} 
```

向我们展示您的代码。您可能会调用`reset()`第一个和第二个地图之间的 ObjectOutputStream。或者您使用两个不同的 ObjectOutputStream 实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T13:26:32.300

您可以为两个 HashMap 使用一个容器，以便它们都属于同一个对象图，否则，当重新创建对象图时，Java 无法确定它们是同一个对象。毕竟，您将它们序列化并独立反序列化它们，不是吗？

```
public class Container implements Serializable {
   private Map<Object, Object> hashMapFoo ;
   private Map<Object, Object> hashMapBar;

  //...
} 
```

如果您对容器进行序列化，然后将其反序列化，则引用应该是您所期望的，因为 ObjectInputStream 和 ObjectOutputStream 在序列化/反序列化对象图时会保留对它们的引用。

## 例子：

这对我有用：

```
public static void test() {

    class Container implements Serializable {
            Map<String,StringBuilder> map1 = new HashMap<String, StringBuilder>();
            Map<String,StringBuilder> map2 = new HashMap<String, StringBuilder>();
    }

    try(ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("jedis.bin"))){

        StringBuilder text = new StringBuilder("Hello Elvis");

        Container container = new Container();
        //same object in two different maps
        container.map1.put("one", text);
        container.map2.put("one", text);

        out.writeObject(container);

    }catch(IOException e) {
        System.out.println(e.getMessage());
    }

    try(ObjectInputStream in = new ObjectInputStream(new FileInputStream("jedis.bin"))) {
        Container container = (Container) in.readObject();
        StringBuilder text1 = container.map1.get("one");
        StringBuilder text2 = container.map2.get("one");

        assert text1 == text2 : "text1 and tex2 are not the same reference";

    }catch(Exception e) {
        System.out.println(e.getMessage());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T13:29:38.607

来自：[对象序列化中的安全性](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/security.html)：

> ***序列化包不能用于重新创建或重新初始化对象。反序列化字节流可能会导致创建新对象***，但不会覆盖或修改现有对象的内容。

另外 - 使用外部引用并修改对象状态（而不是从 Map 获取引用）是一个坏主意。

# g++ - 如何构建将用于不同 g++ 版本的共享库？

> ID：11523437
> 
> 赞同：1
> 
> 时间：2012-07-17T13:21:58.857
> 
> 标签：g++, version, shared, glibc

我想为其他开发人员编译一个共享库，但不提供源代码。我针对 g++ 4.6 构建的 .so 文件，但他们使用的是 g++ 4.4。当他们与我的 .so 文件链接时，g++ 报告：未定义对“memcpy@GLIBC_2.14”的引用。

我认为有两种可能的解决方案：

1.  我重建了不依赖于指定 GLIBC 版本的共享库。

2.  告诉他们一种简单的方法来链接我的共享库，并使用一些编译器选项使其工作。

我不知道这两种方法，我怎样才能实现这些解决方案或其中之一？

谢谢。

**编辑：**

我找到了一个链接标志：-static-libgcc

如果我使用此选项构建共享库，这有帮助吗？有什么缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:36:33.197

该符号是由 glibc （C 库）而不是 GCC 定义的，因此`-static-libgcc`没有任何帮助，因为它只影响`libgcc`not `libc`。

您可以强制编译器和链接器使用这样的旧`memcpy`符号（我假设您正在 x86_64 上编译，所以他们使用的旧 glibc 可能只有`memcpy@GLIBC_2.2.5`，如果您使用的是 x86，那么您可能想要`memcpy@GLIBC_2.0`） ：

```
__asm__(".symver memcpy,memcpy@GLIBC_2.2.5");
memcpy(tgt, src, n); 
```

该[`.symver`指令](http://sourceware.org/binutils/docs/ld/VERSION.html)导致任何引用`memcpy`绑定到符号`memcpy@GLIBC_2.2.5`而不是默认值，`memcpy@GLIBC_2.14`在您的情况下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:47:20.497

最后，我添加了这些选项以使其不依赖任何共享库。

```
-static-libgcc -static-libstdc++ -nodefaultlibs -shared -fPIC 
```

ldd 报告“静态链接”，并且没有任何必需的 .so 文件。

这可能对任何想要发布可移植共享库的人有用。

# asp.net - “添加控制器”的问题，MVC 4

> ID：11523448
> 
> 赞同：1
> 
> 时间：2012-07-17T13:22:38.200
> 
> 标签：asp.net, azure, asp.net-mvc-4, entity-framework-4.3

我有一个运行 MVC 4 的 azure Web 应用程序。它使用实体框架（版本 4.3.1.0）和 Code First 以及数据上下文。

我在自己的项目中有数据上下文，也有所有模型文件。

```
public class AwesomeModelContext : DbContext
{

    public DbSet<User> Users { get; set; }
    public DbSet<License> Licenses { get; set; }
    public DbSet<AppSession> AppSessions { get; set; }
    public DbSet<EditSession> EditSessions { get; set; }
    public DbSet<Space> Spaces { get; set; }
    public DbSet<SpaceUserPrivilege> SpaceUserPrivileges { get; set; }
    public DbSet<File> Files { get; set; }
    public DbSet<Resource> Resources { get; set; }
    public DbSet<Team> Teams { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        // Remove cascading deletes, having them turned on by default scares me.
        modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();

        modelBuilder.Entity<Space>()
            .HasMany<SpaceUserPrivilege>(s => s.SpaceUserPrivileges)
            .WithRequired(p => p.Space)
            .WillCascadeOnDelete(true);
        modelBuilder.Entity<User>()
            .HasMany<SpaceUserPrivilege>(u => u.SpaceUserPrivileges)
            .WithRequired(p => p.User)
            .WillCascadeOnDelete(true);
        modelBuilder.Entity<Team>()
            .HasMany<User>(u => u.Users)
            .WithRequired()
            .WillCascadeOnDelete(false);
        // Run migrations, if any.
        Database.SetInitializer<AwesomeModelContext >(new MigrateDatabaseToLatestVersion<AwesomeModelContext , Configuration>());
    }

} 
```

相关模型是“团队”，它看起来像这样：

```
namespace MyAwesomeNamespace.Model
{
    public class Team
    {

        [Key]
        public int Id { get; set; }
        public string Name { get; set; }

        public ICollection<User> Users { get; private set; }

    }
} 
```

那应该一切都很好。这些是我的整个 Web 应用程序的模型。所以现在我想添加控制器，这样我就可以对模型做一些事情了。所以我做我平时做的事，

> 右键单击控制器文件夹，然后按“添加控制器”
> 
> 我将控制器命名为“TeamController”，然后将模型选择为“MyAwesomeNamespace.Model.Team”，将数据上下文选择为“MyAwesomeNamespace.Model.AwesomeModelContext”。

我现在按添加。这将导致以下消息。

> “无法检索 'MyAwesomeNamespace.Model.Team' 的元数据。列名 'CreatedOn' 无效。”

有人知道在这里做什么吗？我找不到任何解决方案。

* * *

一些额外的信息：

使用 Azure 数据库（在线）。使用 Visual Studio 2010 专业版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:10:06.787

我想知道您的数据库的 Team 表中是否有 CreatedOn 列。如果您已经有数据库，请确保您的模型类对应于数据库表。例如，将 CreatedOn 属性添加到您的模型。如果您想要代码优先的方法，您可以删除数据库。让 Entity Framework 自动生成数据库。您也可以采用数据库优先的方法。让实体框架自动从数据库中生成代码。

最好的祝福，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:26:29.480

当您从 EF4.* 升级到 EF 5.0 时，在启用迁移的情况下，这似乎是 EF 代码中的一件事。并与 MiniProfiler 结合使用。该表存在于`dbo._MigrationHistory`系统表下。

你尝试做一些事情：

1.  您可以`CreatedOn`手动将（日期时间）列添加到`dbo._MigrationHistory`系统表文件夹下的表中。
2.  您可以通过设置停止检测更改`Configuration.AutoDetectChangesEnabled = false;`
3.  注释此行`MiniProfilerEF.Initialize()`，禁用 EF 分析。

# sql - 使用触发器预过滤 SQL 表

> ID：11523449
> 
> 赞同：0
> 
> 时间：2012-07-17T13:22:41.930
> 
> 标签：sql, sql-server-2008, triggers

我有以下触发器：

```
ALTER TRIGGER [dbo].[DIENSTLEISTUNG_Update]
   ON [dbo].[DIENSTLEISTUNG]
   INSTEAD OF UPDATE
AS
BEGIN
    SET  NOCOUNT ON;

    INSERT INTO [DIENSTLEISTUNG] (BEZEICHNUNG, MENGENEINHEIT, 
        PREIS, BESCHREIBUNG, VORLAUFZEIT,
        AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
        AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
        UPDATE_USER, UPDATE_DATE, RUESTZEIT,
        PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
        ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,FLAG)

    SELECT  BEZEICHNUNG, MENGENEINHEIT, 
        PREIS, BESCHREIBUNG, VORLAUFZEIT,
        AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
        AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
        UPDATE_USER,GETDATE(),RUESTZEIT,
        PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
        ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,
        0 
    FROM INSERTED

    UPDATE  DIENSTLEISTUNG
    SET     DIENSTLEISTUNG.FLAG = 1 
    FROM    DIENSTLEISTUNG 
            INNER JOIN INSERTED
            ON INSERTED.ID = DIENSTLEISTUNG.ID            
SET NOCOUNT OFF;    
END 
```

如果原始行发生更改，触发器会复制具有新 ID 的整行。它还在新行和旧行中设置了一个 FLAG（旧行获得 FLAG = 1，新行 FLAG = 0）。

是否可以从触发器中过滤这些行，使其仅返回 FLAG = 0 的新行？

如果是，我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:28:17.043

如果您要求的是选择触发器，那么，不，MS SQL Server 不支持选择触发器。

但是，您可以使用仅返回列为 1 的表中的那些行的视图，`FLAG`例如

```
create view dbo.DIENSTLEISTUNG_Flagged
as 
  select * from DIENSTLEISTUNG
  where FLAG=1 
```

但是，我建议为历史记录准备一个额外的表，而不是让它们就位。这样，您可以添加其他字段，例如时间戳，或更改行的用户，或更改行的应用程序等...类似于
（触发器的伪代码）

```
Insert into ServicesHistory (..., ChangeDate)
Select ... , getdate() from inserted 
```

请注意，这也会将您的“代替”触发器（纯邪恶）转换为常规触发器（不那么邪恶）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:28:17.793

我想也许你的意思是先更新现有的行，*然后*插入带有 0 标志的新行。

```
ALTER TRIGGER [dbo].[DIENSTLEISTUNG_Update]
ON [dbo].[DIENSTLEISTUNG]
INSTEAD OF UPDATE
AS
BEGIN
  SET  NOCOUNT ON;

  UPDATE  d
  SET     FLAG = 1
  FROM    dbo.DIENSTLEISTUNG AS d
          INNER JOIN inserted AS i
          ON i.ID = d.ID;

  INSERT INTO dbo.[DIENSTLEISTUNG] 
  (
      BEZEICHNUNG, MENGENEINHEIT, 
      PREIS, BESCHREIBUNG, VORLAUFZEIT,
      AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
      AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
      UPDATE_USER, UPDATE_DATE, RUESTZEIT,
      PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
      ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,FLAG
  )
  SELECT  BEZEICHNUNG, MENGENEINHEIT, 
      PREIS, BESCHREIBUNG, VORLAUFZEIT,
      AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
      AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
      UPDATE_USER,GETDATE(),RUESTZEIT,
      PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
      ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH, 0 
  FROM inserted;
END 
```

# javascript - 像 cookie 这样的全局变量，它在回发后保留值，但它应该为不同的实例（选项卡/窗口）保存不同的值

> ID：11523450
> 
> 赞同：0
> 
> 时间：2012-07-17T13:22:48.277
> 
> 标签：javascript, jquery, asp.net-mvc-3

这是一个 MVC3 网络应用程序。在`_Layout.cshtml`共享视图中，左侧导航右侧有一个用于加载页面的左侧导航树。在每个树列表项单击时，它将刷新页面以加载具有相同布局视图的相应页面。

在这个 _Layout.cshtml 中，树下面有一个`Select Category`链接和一个空的 div ( `targetDiv`)。选择类别链接将打开一个带有 webgrid 的 jQuery UI 模式对话框并显示所有“类别”。单击表中的任何“类别”链接时，对话框将关闭，AJAX 将重新加载 targetDiv，以便 targetDiv 内的 webgrid 填充此“类别”中的所有“书籍”。

如果用户点击任何左侧导航项，整个页面都会重新加载。所以我需要保留所选“类别”的“书籍”列表。为此，当在模式对话框中选择“类别”时，我会保存一个 cookie (CategoryId)。在页面重新加载（文档准备好）时，我在 _Layout 页面中使用了这个 cookie，它再次填充了这个“类别”中的所有“书籍”。

这工作正常，但新要求是允许处理多个“类别”。如果我在浏览器的一个选项卡中选择“类别 1”并按此类别获取所有书籍，在下一个选项卡（同一应用程序的另一个实例）中，我应该能够处理不同的“类别”和不同的集合图书。在这种情况下，我不能使用 cookie，因为 cookie 在所有选项卡中共享。

如何在不同的实例（浏览器选项卡/窗口）上设置不同的“类别”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:28:06.807

如果我正确理解您的问题，最简单的方法是使用 AJAX 回发来填充您的`targetDiv`字段，而不是每次都重新加载页面。然后您将只加载页面的相关部分，以便您可以一次打开任意数量的选项卡，而不会相互干扰。

MVC3 为 AJAX 请求提供了很多支持——只需将绘制网格的东西放在局部视图中，当用户选择不同的选项时，很容易改变它。

为了帮助维护跨 AJAX 请求的状态，您可以将其存储在表单字段中，并在您提出请求时将值传入 - 有几种不同的方法可以做到这一点，或者使用 AjaxForm 并将其与请求一起提交，或者添加JQuery 请求的参数取决于您选择实现表单的方式。您可以将当前 CategoryId 存储为隐藏字段，然后在创建请求时将其添加到请求中。如果您在单个页面上打开了多个类别，则可以使用具有相同名称的隐藏字段列表来表现得像一个复选框组，或者在您的隐藏字段中编码一个列表应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:39:26.863

我已经解决了这个问题。我[在 JavaScript 中使用了无 Cookie 会话变量](http://blogs.sitepointstatic.com/examples/tech/js-session/index.html)。它基本上将您的数据存储在`window.name`重新加载页面时不会被清除的属性中。每个选项卡都有不同的`window`对象（这就是我想要的），并且在所有主要浏览器中都受支持。

这就像会话 cookie，唯一的区别是这些数据不会像普通会话 cookie 那样在窗口/选项卡之间存在。

另请参阅[没有 cookie 的会话变量](http://www.thomasfrank.se/sessionvars.html)。

# constraints - OCL 2.0 约束

> ID：11523453
> 
> 赞同：2
> 
> 时间：2012-07-17T13:22:53.350
> 
> 标签：constraints, ocl, object-diagram, magic-draw

您好，我们目前正在使用 MagicDraw 17.0。我们遇到了以下问题。我们想验证对象图中的对象是否有任何连接的对象。

例如，如果一个对象“man”具有到另一个对象“address”的链接。自动取款机。我们正在尝试这个

```
self.address->isEmpty() 
```

其中地址是地址对象在连接两个对象的关联中的角色，并且对人施加了约束。不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T16:47:33.277

这不是您问题的直接答案，但希望能提供有关您所问问题的更多见解：

如果一个对象（比如 Man 的实例）没有链接（比如地址）到另一个对象（比如 Address 的实例），`self.address`那么当 self 是一个 Man 时，对于 self 来说完全是未定义的！（请注意，地址是引用，地址是类型）。

看来`oclIsUndefined()`操作可以用于此目的（正如格非所说），所以可能`self.address -> oclIsUndefined()`对你有用！

OCL 规范的第 16 页说：

> ...如果表达式的值未定义，则有一个显式操作用于测试。oclIsUndefined() 是对 OclAny 的操作，如果其参数为 null 或无效，则结果为 True，否则为 False。

但还有另一个观点：

`self.address`代表一个集合。所以`isEmpty`如果它是空的，函数应该返回true！（这可能是您想使用的方式`self.address->isEmpty`）

关于 isEmpty 函数的 OCL 规范第 175 页说：

> isEmpty() : 布尔值
> 
> 自我是空集合吗？
> 
> ```
>  post: result = (self->size() = 0 ) 
> ```
> 
> 注意：null->isEmpty() 凭借从 null 到 Bag{} 的隐式转换返回“true”

但正如你提到的 isEmpty 不适合你！

我要把这个留给 OCL 专家来评论差异吗？但可能第一种方法会有所帮助！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:56:48.837

try `oclIsUndefined()` (see OCL Specification 2.3.1 p.16)

# powershell - 在powershell中用缩进和换行符替换字符

> ID：11523454
> 
> 赞同：2
> 
> 时间：2012-07-17T13:23:01.820
> 
> 标签：powershell, replace, foreach, indentation, line-breaks

有没有办法在文本文件上使用 foreach 和 replace 来更改带有换行符和 x 缩进数的字符？特殊要求，但它是使其在另一个程序中可读。

示例文本：

> dyreriket|{Animalia}
> !leddormer@{Annelida}
> ¤igler${Clitellata}

符号 |、!、@、¤、$ 和更多符号应替换为换行符和给定数量的缩进。我可以使缩进起作用，但不能使换行符起作用。使用`n时没有响应，它只是删除了原来的字符。到目前为止，我一直在玩这个代码。

```
$t1 = '\@';
$r1 = "`n`t`t";
$t2='\¤';
$r2="`n";

Get-Content C:\arter\test.txt `
    | ForEach-Object { $_ -creplace $t1, $r1; } `
    |ForEach-Object { $_ -creplace $t2, $r2; } `
    | Out-File  C:\arter\test2.txt ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:41:31.387

# asp.net-mvc - 路由 MyString/MyController1 和 MyString

> ID：11523455
> 
> 赞同：0
> 
> 时间：2012-07-17T13:23:20.527
> 
> 标签：asp.net-mvc

我正在尝试执行以下操作但没有成功：

网址：

```
MyString/MyController1
MyString/MyController2
MyString/MyController3
MyString/ 
```

对于我使用的前三个：

```
routes.MapRoute(
                "MyString/MyController1", // Route name
                "MyString/MyController1/{action}/{id}", // URL with parameters
                new {controller = "MyController1", action = "Index", id = UrlParameter.Optional},
                new string[] {"Core_Web.Controllers.MyString"}
                ); 
```

它工作得很好。当我尝试访问*MyString/*时，我的问题就来了。我已经添加了 ：

```
routes.MapRoute(
                "Default",
                "MyString",
                new { controller = "MyString", action = "Index", id = UrlParameter.Optional },
                new string[] {"Core_Web.Controllers"}
                ); 
```

但是 URL *MyString*的调用给出了：

> 没有找到您要查的资源
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/MyString

有一个控制器名为`MyString`.`Core_Web.Controllers`

感谢您的帮助，

[编辑]

这是我的整个代码：

路线：

```
routes.MapRoute(
    "Contabilita",
    "Contabilita",
    new { controller = "Contabilita", action = "Index" },
    new string[] { "Core_Web.Controllers" }
    );

routes.MapRoute(
    "Contabilita_Controller", // Route name
    "Contabilita/{controller}/{action}/{id}", // URL with parameters
    new { action = "Index", id = UrlParameter.Optional},
    new string[] { "Core_Web.Controllers.Contabilita" }
    ); 
```

和控制器：

```
namespace Core_Web.Controllers
{
    public class ControllerContabilitaBase : ControllerBaseSuper
    {
       ....
    }
    public class ControllerContabilita : ControllerContabilitaBase
    {
        public ActionResult Index()
        {
            return View(GetView("Index"));
        }
    }
}

namespace Core_Web.Controllers.Contabilita
{
    public class ImpiantoController : ControllerContabilitaBase
    {
     ...
    }
    public class LottoController : ControllerContabilitaBase
    {
    ...
    }
} 
```

但它也不起作用。带有控制器的网址有效，但另一个无效。它给出了 404。

我可能忽略了别的东西吗？

[/编辑]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:44:09.633

Try the following route definitions (in that order):

```
routes.MapRoute(
    "MyString",
    "MyString",
    new { controller = "MyString", action = "Index" },
    new string[] { "Core_Web.Controllers" }
);

routes.MapRoute(
    "MyString_Controller",
    "MyString/{controller}/{action}/{id}",
    new { action = "Index", id = UrlParameter.Optional },
    new string[] { "Core_Web.Controllers" }
); 
```

Which should give you the following pattern:

```
url                  controller             action
--------------------------------------------------
/mystring            MyStringController     Index
/mystring/my1        My1Controller          Index
/mystring/my1/foo    My1Controller          Foo
/mystring/my2        My2Controller          Index
/mystring/my3        My3Controller          Index 
```

# python - 有没有办法将字符串转换为列表

> ID：11523459
> 
> 赞同：0
> 
> 时间：2012-07-17T13:23:38.323
> 
> 标签：python, variables

我将我的列表保存在一个文本文件中，并将其转换为一个字符串。当我阅读我的列表时，我得到一个这样的字符串：

```
"['layer1', '1', '10', '10', 'pending', 'Pending', '1', '1', '1', [[1, 10]]]" 
```

我想知道是否有一种简单的方法可以将其转换回列表。如果不可能，是否有更好的方法来保存并取回它？

谢谢！

（我正在使用 Python 2.6）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:25:11.010

当然有更好的方法，最突出的是`pickle`模块：

```
import cPickle as pickle

# Saving
with open("a.file", "w") as f:
    pickle.dump([1, 2, "Hello!"], f)

# Reading
with open("a.file") as f:
    obj = pickle.load(f) 
```

相比 Python 的`json`模块，`cPickle`更加灵活。另一方面，JSON 为您提供了一个人类可读的文件。如果 JSON 能够序列化您的对象，请选择 JSON，因为`cPickle`它不能用于不受​​信任的数据。

**编辑**：删除了关于性能的评论，因为这件事有些悬而未决。 [ms4py 的这个迷你基准](https://gist.github.com/3134391)表明`json`至少在某些对象上更快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T13:24:28.123

看`ast.literal_eval`。它应该做你想做的事。

```
>>> import ast
>>> sss="['layer1', '1', '10', '10', 'pending', 'Pending', '1', '1', '1', [[1, 10]]]"
>>> ast.literal_eval(sss)
['layer1', '1', '10', '10', 'pending', 'Pending', '1', '1', '1', [[1, 10]]] 
```

这应该完全不受恶意代码的影响（不像`eval`），但它能够读取的对象必须是简单的对象（字符串、整数、浮点数、无和布尔值或完全由字符串、整数、浮点数组成的列表/元组/字典, 无和布尔值）。

当然，如果不需要人类可读的数据文件，您应该查看`pickle`或`json`按照其他答案的建议。

**编辑**

我注意到它对`json`人类来说很容易阅读（见下面的评论），所以你可能应该使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T13:26:46.030

您可以使用[`json`](http://docs.python.org/library/json.html)：

```
In [1]: import json

In [2]: mylist = [1, 2, 3]

In [3]: with open('data', 'w') as fobj:
   ...:     json.dump(mylist, fobj)
   ...:

In [4]: with open('data') as fobj:
   ...:     l = json.load(fobj)
   ...:

In [5]: l
Out[5]: [1, 2, 3] 
```

# java - 按字母顺序排列的列表视图

> ID：11523462
> 
> 赞同：0
> 
> 时间：2012-07-17T13:23:40.990
> 
> 标签：java, android, listview, alphabetical

我在 Eclipse 中创建了一个 android 列表视图，我想按第一个字符按字母顺序对输入的数据进行排序。不知道如何做到这一点。

```
private ListView loginL;
private Button bLogin;

private ListAdapter loginListAdapter;

private ArrayList<LoginDetails> loginArrayList;

@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_listview);

    loginL = (ListV) 
```

findViewById(R.id.loginlist); loginL.setOnItemClickListener(this);

```
 bLogin = (Button) 
```

findViewById(R.id.button3); webLogin.setOnClickListener(this);

```
 loginArrayList = new ArrayList<LoginDetails>();
    loginLAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    loginL.setAdapter(loginLAdapter);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T13:26:17.263

从你的数组列表`ArrayList<LoginDetails> loginArrayList;`

我更喜欢你使用[比较器。](http://developer.android.com/reference/java/util/Comparator.html)

```
 Collections.sort(loginArrayList,new Comparator<LoginDetails>() {

    @Override
    public int compare(LoginDetails lhs, LoginDetails rhs) {

        return lhs.name.compareTo(rhs.name);

    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:27:26.003

使用[Collections.sort()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)。从文档：

> 根据其元素的自然顺序对指定列表进行升序排序

```
Collections.sort(loginArrayList ) 
```

# asp.net - ASP.NET Web API 返回 HttpResponseMessage 或抛出错误

> ID：11523463
> 
> 赞同：3
> 
> 时间：2012-07-17T13:23:44.987
> 
> 标签：asp.net, asp.net-web-api

我一直在研究使用 .net Web API 编写 Web 服务，但我看到了两种不同的发送错误消息的方法。第一个是返回一个`HttpResponseMessage`适当的`HttpStatusCode`集合，像这样：

```
public HttpResponseMessage<string> Get() 
{ 
      ...
      // Error!
      return new HttpResponseMessage<string>(System.Net.HttpStatusCode.Unauthorized); 
} 
```

另一种方法是只抛出一个`HttpResponseException`，如下所示：

```
public Person Get(int id)
{
     if (!_contacts.ContainsKey(id))
     {
         throw new HttpResponseException(Request.CreateErrorResponse(HttpStatusCode.NotFound, String.Format("Contact {0} not found.", id)));
     }

     return _contacts[id];
} 
```

使用其中任何一种都有什么优点/缺点？在可扩展性和性能方面，哪一个比另一个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T18:32:44.017

如果有人好奇我往哪个方向走，我选择了`HttpResponseException`以下几个原因：

*   它使不熟悉 WebAPI 的人更容易阅读代码（大多数人都知道，当您抛出异常时，会出现问题）
*   在我的测试中`HttpResponseExceptions`返回更快，YMMV
*   单元测试更容易（只需断言抛出异常）

# oracle - .net 4.5 中的 Oracle 存储过程

> ID：11523466
> 
> 赞同：2
> 
> 时间：2012-07-17T13:23:52.467
> 
> 标签：oracle, .net-4.5, odac

我正在尝试在 .net 4.5 中执行以下存储过程

```
 PROCEDURE my_procedure ( 
      a_cursor          OUT t_cursor,
      return_value      OUT VARCHAR2,
      a_type                VARCHAR2,
      a_time                DATE,
      a_id                  VARCHAR2,
      a_arg1                VARCHAR2,
      a_from                VARCHAR2,
      a_gl2                 VARCHAR2,
      a_arg2                DATE DEFAULT NULL,
      a_templ               VARCHAR2 DEFAULT NULL 
      ) 
```

这些参数中的大多数可以为空。在蟾蜍中，我可以执行它：

```
BEGIN package.my_procedure( :c, :out, 'arg', '', '123' , '', '', '', '', ''); END; 
```

在 C# 中，我正在尝试以下操作：

```
object[] parameters = {
         new OracleParameter("arg1", arg1),
         new OracleParameter("arg", "arg"),
         new OracleParameter("empti", ""),
         new OracleParameter("out", OracleDbType.Varchar2, ParameterDirection.Output),
         new OracleParameter("c", OracleDbType.RefCursor, ParameterDirection.Output)
                                      };

     const string sql = "BEGIN package.my_procedure  
          (:c, :out, :arg, :empti, :arg1 , :empti, :empti, :empti, :empti, :empti); END;";
     res = _projectRepository.ExecuteStoredProcedure(sql, parameters); 
```

我收到以下错误

```
Test method Tests.repository.RepositoryTests.TestMethod1 threw exception: 
Oracle.DataAccess.Client.OracleException: ORA-06550: 
line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'my_procedure'ORA-06550: 
line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'my_procedure'ORA-06550: 
line 1, column 7:
PL/SQL: Statement ignored 
```

我尝试过使用和不使用可选参数以及使用/不使用 return_value/:out 参数。

我正在使用 Oracle.DataAccess 提供程序 v. 4.112.3.0。它适用于没有那么多参数/只有一个输出参数（光标）的其他存储过程。

编辑：我发现一个错误，我需要在参数数组中首先有输出参数；

```
new OracleParameter("c", OracleDbType.RefCursor, ParameterDirection.Output),
                    new OracleParameter("out", OracleDbType.Varchar2, ParameterDirection.Output),
                    new OracleParameter("arg1", "arg1"),
                    new OracleParameter("empti", ""),
                    new OracleParameter("arg", arg),
                                      }; 
```

现在我收到错误：

```
ORA-06502: PL/SQL: numeric or value error: character string buffer too small 
```

似乎是数据库错误，但看起来很奇怪，因为我可以从 toad 执行相同的命令而不会出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:19:15.163

当`VARCHAR2`用作 an时，`OUPUT`您需要提供字符缓冲区的大小。构造函数重载在这里无济于事，您需要手动创建变量以设置所需的属性。

```
// Specify a size adequate for the full return value.
OracleParameter returnValue =
  new OracleParameter("return_value", OracleDbType.Varchar2, 100);
returnValue.ParameterDirection = ParameterDirection.Output;

object[] parameters = {
  returnValue,
  // other parameters here
}; 
```

## 原来的

我将保留原始答案，因为它处理了问题的第一个版本。

提供的错误是正确的，您没有在调用中提供正确数量的参数。让我们看看 Toad for Oracle 可以使用的原始工作代码并将它们映射到参数名称：

```
BEGIN
  package.my_procedure(a_cursor     => :c,
                       return_value => :out,
                       a_type       => 'arg',
                       a_time       => '',
                       a_id         => '123',
                       a_arg1       => '',
                       a_from       => '',
                       a_gl2        => '',
                       a_arg2       => '',  -- DEFAULT NULL
                       a_temp1      => ''); -- DEFAULT NULL
END; 
```

请注意，在 Toad for Oracle 中，您甚至可以为声明为的参数提供值`DEFAULT NULL`（这不是问题）。

如果您查看参数列表，您会发现您正在为`arg1`、`arg`、`empti`、`out`和提供绑定`p`。您将它们定位为匹配如下：

```
a_cursor     => :c     -- you created the OracleParameter as 'p', not 'c'
return_value => :out  
a_type       => :arg
a_time       => :empti
a_id         => :arg1
a_arg1       => :empti
a_from       => :empti
a_gl2        => :empti
a_arg2       => :empti
a_temp1      => :empti 
```

Oracle 抱怨参数的数量不匹配，这是因为您将引用游标参数声明为`p`而不是 as `c`。您需要将 PL/SQL 更新为第一个参数`OracleParamter`的名称`c`或将其更改为正在执行的 PL/SQL 。`:p`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:28:10.913

您不需要将输出光标指定为参数

其他明智的尝试以下代码

```
object[] parameters = {
                                          new OracleParameter("arg1", arg1),
                                          new OracleParameter("arg", "arg"),
                                           new OracleParameter("empti", ""),
                                          new OracleParameter("return_value", OracleDbType.Varchar2, ParameterDirection.Output),
                                          new OracleParameter("a_cursor", OracleDbType.RefCursor, ParameterDirection.Output)
                                      };

                const string sql = "BEGIN package.my_procedure(:a_cursor, :return_value, :arg, :empti, :arg1 , :empti, :empti, :empti, :empti, :empti); END;";
                res = _projectRepository.ExecuteStoredProcedure(sql, parameters); 
```

# java - Java：SelectionKey.interestOps(int) 不是线程安全的？

> ID：11523471
> 
> 赞同：0
> 
> 时间：2012-07-17T13:24:17.123
> 
> 标签：java, multithreading, selector, nio

在我的应用程序中，我使用多个线程来处理客户端连接。

我在调试时发现了一个非常奇怪的行为 - 我有一个 SelectionKey，通过调用（使用调试器）它的 interestOps() 方法，返回值为 1（READ），但是当我将数据发送到与该键对应的套接字时，选择器没有醒来。。

如果使用调试器，我将特定的选择键兴趣操作更改为 1（即使它是 1），选择器会突然对该更改做出反应。

在给定时间我只有一个线程处理连接，但这个线程并不特定于该连接，如果我禁用多线程（将线程池设置为大小 1）这个问题永远不会发生。

通过查看 SelectionKey 类文档——这个方法应该是线程安全的——我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:47:25.913

这不是线程安全的问题。如果`select()`当前正在进行中，则它已经从所有已注册的键中读取了所有 interestOps，并在读取时选择了这些值：这些值被传递给操作系统并且操作系统阻塞操作正在进行中. 在选择操作中间更改`interestOps`不会影响该选择操作，只会影响下一个操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:33:36.370

在我将所有更改移动到要在选择器线程上完成的 interestOps 后，问题就解决了 - 所以我猜 interestOps(int) 不是线程安全的。

**通过将所有 interestOps 更改移动到选择器线程进行编辑**
，我还获得了 30% 的加速 - 不知道为什么，但这是我的测试之间的唯一更改..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T08:15:22.573

我参加聚会有点晚了，但是对于像我这样将来会访问的人来说：

“选择键对多个并发线程使用是安全的。读取和写入兴趣集的操作通常会与选择器的某些操作同步。”

取自[“Java 7 中的选择键”](https://docs.oracle.com/javase/7/docs/api/java/nio/channels/SelectionKey.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-27T09:15:29.937

（很抱歉评论晚了，但我认为最好澄清一下）正如javadoc所说（[https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html](https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html)）：

> 这种同步的具体执行方式取决于实现：在简单的实现中，如果选择操作已经在进行中，则读取或写入兴趣集可能会无限期地阻塞；在高性能实现中，读取或写入兴趣集可能会短暂阻塞（如果有的话）。在任何情况下，选择操作将始终使用操作开始时的当前兴趣集值。

因此，要完全理解最初的问题，我们需要知道它发生在哪个环境（操作系统、内核版本、jdk 版本）中。

（对不起，我应该将其作为内联评论发送，但我不允许这样做）

* * *

重新编辑：

根据更现代的 jdk 文档（java 11+），SelectionKey 应该是线程安全的：[https ://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/channels/选择键.html](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/channels/SelectionKey.html)

更具体地说，`SelectionKey#interestOps​(int ops)`应该

> 可以随时调用。如果在选择操作正在进行时调用此方法，那么它对该操作没有影响；键的兴趣集的变化将在下一个选择操作中看到。

# ruby-on-rails - 设计在我的 Rails 应用程序中造成故障

> ID：11523475
> 
> 赞同：0
> 
> 时间：2012-07-17T13:24:31.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes

我已经在这里发布了一个关于设计的问题：[奇怪的路线故障，在设计和自己的控制器之间混合](https://stackoverflow.com/questions/11452866/weird-route-malfunction-mix-between-devise-and-own-controller)
我希望这只是一个一次性问题，但设计让我发疯了！

如果我这样做，一切都好

```
<% if user_signed_in? %>
  <% if current_user.ideas.include?(@idea) %>
    <%= button_to 'Remove from Favorites', user_idea_subscription(@idea.id), method:    :delete%>
  <% else %>
    <%= button_to 'Add to Favorites', user_idea_subscriptions_path(current_user, :idea_id => @idea) %>
  <% end %>
<% end %> 
```

但如果我这样做：

```
<% if user_signed_in? and current_user.ideas.include?(@idea) %>
  <%= button_to 'Remove from Favorites', user_idea_subscription(@idea.id), method:    :delete%>
<% else %>
  <%= button_to 'Add to Favorites', user_idea_subscriptions_path(current_user, :idea_id => @idea) %>
<% end %> 
```

然后我有这个错误：

```
No route matches {:controller=>"idea_subscriptions", :idea_id=>#<Idea id: 12, name: "Chute libre", description: "50sec a 50m/s", created_at: "2012-07-12 10:02:30", updated_at: "2012-07-12 10:02:30">} 
```

一切都应该没问题，但为什么我会收到那个错误？（除了没有关于错误的其他信息）
感谢您的帮助和我的理智！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:32:57.523

我认为这是正常行为，因为在第二种情况下你试图打电话

```
user_idea_subscriptions_path(current_user, :idea_id => @idea) 
```

那么用户没有登录，所以`current_user`是零

# ios - 使用 UILocalizedIndexedCollat ion 和 localizedStandardCompare: 方法对字符串进行排序

> ID：11523478
> 
> 赞同：3
> 
> 时间：2012-07-17T13:24:45.017
> 
> 标签：ios, sorting, core-data, localized

使用它时排序顺序是否有任何差异（用于内存排序）

```
[[UILocalizedIndexedCollation currentCollation] sortedArrayFromArray:namesArray collationStringSelector:@selector(sortName)] 
```

和这个（用于CoreData排序）

```
fetchRequest.sortDescriptors =
    [NSArray arrayWithObject:[NSSortDescriptor
                              sortDescriptorWithKey:@"name" ascending:YES
                              selector:@selector(localizedStandardCompare:)]]; 
```

我想用 CoreData 存储一个庞大的数据集，然后在 TableView 中显示它。在这种情况下，如果任何记录发生变化，我将需要使用第一种方法重新处理整个数组，这需要一段时间，因此第二种方法更可取。

我知道对于英语，排序顺序应该是相同的，但我真的不知道使用带有变音符号的字母和使用非拉丁字母的语言。

对你的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T04:57:17.560

一个区别是，`UILocalizedIndexedCollation`当您的语言环境为 en_US 时，非拉丁字符似乎会按语音排序。例如，在英文 iPhone 上，ス（发音为“su”）将与其他真正与“S”相关的单词一起位于“S”之下。使用`localizedStandardCompare:`，相同的 ス 字符将出现在 Z 之后。

带有变音符号的拉丁字符似乎对这两种类型的处理方式相同（例如，“Aaa”<“Åab”<“Aac”同时使用`UILocalizedIndexedCollation`and `localizedStandardCompare:`）。

可能还有很多不同之处，尤其是当您开始将设备设置为其他语言环境时。我还没有弄清楚如何让 CoreData 以与`UILocalizedIndexedCollation`不幸相同的方式进行排序，因此根据要求采取了使用内存数组或`UILocalizedIndexedCollation`完全避免的方法。如果有人知道更好的方法，那就太棒了。

# hadoop - 如何收集 Hadoop 集群大小/核心数信息

> ID：11523480
> 
> 赞同：1
> 
> 时间：2012-07-17T13:24:47.463
> 
> 标签：hadoop, mapreduce, cluster-computing

我在由多台机器组成的集群上运行我的 hadoop 作业，这些机器的大小未知（主内存、内核数、每台机器的大小等）。在不使用任何特定于操作系统的库（我的意思是 *.so 文件）的情况下，是否有任何用于 hadoop 的类或工具本身或一些其他库，我可以在其中收集信息，例如在执行 Hadoop MR 作业时：

1.  内核总数/作业使用的内核数
2.  总可用主存/分配的可用主存
3.  每台机器上的总存储空间/分配的存储空间

我没有集群的硬件信息或规格，这就是为什么我想在我的 hadoop 代码中以编程方式收集此类信息的原因。

我怎样才能做到这一点？由于不同的原因，我想知道这种信息。以下错误给出了一个原因：我想知道哪台机器空间不足。

```
12/07/17 14:28:25 INFO mapred.JobClient: Task Id : attempt_201205221754_0208_m_001087_0, Status : FAILED

org.apache.hadoop.util.DiskChecker$DiskErrorException: Could not find any valid local directory for output/spill2.out

        at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:376)

        at org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:146)

        at org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:127)

        at org.apache.hadoop.mapred.MapOutputFile.getSpillFileForWrite(MapOutputFile.java:121)

        at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.sortAndSpill(MapTask.java:1247)

        at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.flush(MapTask.java:1155)

        at org.apache.hadoop.mapred.MapTask$NewOutputCollector.close(MapTask.java:582)

        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:649)

        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323)

        at org.apache.hadoop.mapred.Child$4.run(Child.java:270)

        at java.security.AccessController.doPrivileged(Native Method)

        at javax.security.auth.Subject. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:55:26.353

主节点将对所有从节点进行 ssh 访问，并且所有节点的列表都应该在`slaves`文件中。因此，编写一个脚本，它遍历`slaves`文件中的节点列表并使用`scp`.

像这个脚本这样的东西应该可以工作

> 对于我在`cat /home/praveensripati/Installations/hadoop-0.21.0/conf/slaves`中；
> 做
> scp praveensripati@$i:/proc/cpuinfo cpuinfo_$i
> scp praveensripati@$i:/proc/meminfo meminfo_$i
> 完成

主机名/ip ($i) 将附加到 cpuinfo 和 meminfo 文件中。MR 工作对于这项任务来说太过分了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:42:02.947

[ohai](http://wiki.opscode.com/display/chef/Ohai)库（Opscode Chef 的一部分）非常棒；它将从机器输出各种统计信息的 JSON 转储。

曾经有一个标志————`mapred.max.maps.per.node`限制任何一个作业可以在一个节点上同时运行的任务数量，但它被删除了。嘘。您必须运行修改后的调度程序才能提供该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:59:07.017

假设您在一个部署在 Linux 节点上的集群上，您可以从`/proc/cpuinfo`和`/proc/meminfo`文件中提取 CPU 和内存信息。您需要编写一个自定义输入格式，以确保您触及集群中的每个节点（或者只处理一个具有拆分大小的文本文件，以确保生成足够的映射任务，以确保每个任务跟踪器节点至少获得一个任务执行。

您可以将信息作为映射器（主机名，信息）的对输出，并在化简器中进行重复数据删除

请注意，cpuinfo 将报告超线程内核的数量（如果您有兼容的 CPU）而不是内核数量，因此 4 核超线程 CPU 可能会在 /proc/cpuinfo 中显示 8 个“处理器”

# php - CSS - IE7 不能正确/完整地呈现文本框和一些下拉字段

> ID：11523481
> 
> 赞同：0
> 
> 时间：2012-07-17T13:24:48.440
> 
> 标签：php, html, css

我已经研究这个问题几个星期了。请注意所附图片。 **IE7**并且只有**IE7**不会在我的 php 应用程序中完全/正确地呈现 textarea 字段。正如您在附件中看到的那样，某些下拉字段也会发生这种情况。由于某种原因，右侧边框不会显示，如果此问题继续存在，具有 IE7 且无法/不会升级的潜在客户将无法使用我的应用程序。

我在冲浪时发现了其他几个渲染问题；有提到使用缩放，但没有效果，另一个提到添加填充，仍然没有效果。我发现没有什么能真正解决这个特定的问题/错误。

**是否有任何 CSS 专家可以提供对此的任何见解。任何帮助将不胜感激。**

问题图片![在此处输入图像描述](../Images/392e5138663b5ab226ea4ab86b06a747.png)

这是一个自动生成的 Web 表单。

**这是创建 textarea 字段的 php 代码：**

```
case FIELD_TEXT_AREA:
    $fieldHtml = inputOrText($mode, "textarea",
                             $field->getValue(), 
                             array("id"=>$field->getId(),
                             "class"=>"valuetext",
                             "name"=>$field->getId(),
                             "rows"=>"3","cols"=>"60",
                             $jsFunctionCalls),
                             array("class"=>"valuetext")); 
```

**这是结果源代码：**

```
 <td valign='top'></td>
           </tr>
      </table>
   </td>
</tr>
<tr id="field-4446">
  <td width='30%' valign='top' align='left' class='labeltext'>Text Area :</td>
  <td width='70%' align='left'>
     <table border='0' style='table-layout:fixed'>
         <tr>
             <td>
               <textarea id="4446" 
                         class="valuetext" 
                         name="4446" rows="3" 
                         cols="60" 0="" > 
               </textarea>
             </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:14:09.857

可能的原因是包含输入框和文本区域的单元格设置了一些固定宽度，因此比字段所需的宽度要小一些。并且可能细胞有`overflow: hidden`。然后这些字段在右侧被截断。宽度不匹配很可能取决于浏览器，因为它受盒子模型等的影响。

如果您`textarea, input { overflow: visible !important }`在 CSS 中进行实验设置，您应该会看到它们溢出了多少。由于此时可能无法或不应该更改整体布局，因此最好减少字段的宽度设置。细节取决于现在如何设置宽度。请注意，将宽度设置为 100% 可能会导致这样的问题，而不是修复它。宽度应该比单元格的宽度小几个像素。

# regex - 为什么我的正则表达式匹配这个，我怎么能阻止它这样做

> ID：11523485
> 
> 赞同：1
> 
> 时间：2012-07-17T13:24:57.920
> 
> 标签：regex

我正在使用正则表达式来验证公式（类似 Excel）。这些公式可以包含字符串（引号之间）、单元格引用（以 C[] 占位符 --> C[A4] 表示）或整数值。它们由“&”字符连接。以下是一些有效公式的示例：

*   =C[A4]+C[B4]
*   ="这是文本，我可以输入任何我想要的，比如这个整数值："&123456789
*   ="开始"&(C[A4]+C[A3])/2&123&"结束"

这是我正在使用的正则表达式：

```
^-?(\d+)|(C\[[A-Z][0-9]\])([-\+\*\/][\(]*-?((\d+)|(C\[[A-Z][0-9]\]))[\)]*)*$ 
```

直到现在，它已经完成了它应该做的事情。我还有一个自动更正功能，它在无法验证为公式的输入周围加上引号。所以当我进入

```
=200X-8 
```

它应该在“=”之后的内容周围加上引号。但这不会发生。我的 regex.IsMatch 似乎是成功的，尽管根据正则表达式我不允许 X 进入。它似乎与“200”匹配，然后仅此而已。奇怪的是，我表示我希望验证完整的输入（参见正则表达式末尾的“$”）。

我是否遗漏了什么（我猜正则表达式是正确的），但我不希望 regex.Ismatch 在与完整输入不匹配时“成功”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:31:20.597

正则表达式元字符`|`的优先级最低。因此：

```
^r1|r2$ 
```

表示匹配以 r1 开头或以 r2 结尾的字符串。

或者

```
^(r1|r2)$ 
```

表示匹配以 r1 或 r2 开头和结尾的字符串。

您现有的正则表达式类似于上面的类型 1，因此`200`您输入的结果正在匹配。要解决这个问题，请`(...)`按照上面的类型 2 将您的正则表达式包含在 a 中。

# get - OpenRasta URI 映射到错误的方法并返回不一致的 http 状态代码

> ID：11523486
> 
> 赞同：3
> 
> 时间：2012-07-17T13:24:59.417
> 
> 标签：get, http-status-codes, openrasta

我在 .net 服务中使用 OpenRasta 框架，并且在处理程序中有两种方法如下

```
public OperationResult Get(int Number)
{
// Do some operation and get an entity
  return new OperationResult.OK(Single-MyResource);
}

public OperationResult GetQ()
{
// Do some operation and get an entity
  return new OperationResult.OK(List-Of-MyResource);
} 
```

我的配置如下所示

```
ResourceSpace.Has.ResourcesOfType<MyResource>()
          .AtUri("/MyResource/{Id}")
          .And.AtUri("/MyResource")
          .HandledBy<MyResourceHandler>()
          .AsJsonDataContract() 
          .And.AsXmlDataContract()

 ResourceSpace.Has.ResourcesOfType<IList<MyResource>>()
         .AtUri("/MyResources") 
         .HandledBy<MyResourceHandler>()
         .AsJsonDataContract()
         .And.AsXmlDataContract(); 
```

HttpMethod: GET AcceptHeader: "application/json" URI: [http://testDomain.com/MyResource/](http://testDomain.com/MyResource/)

上面的请求给了我 MyResource 的列表，与我为下面的请求得到的相同

HttpMethod: GET AcceptHeader: "application/json" URI: [http://testDomain.com/MyResources/](http://testDomain.com/MyResources/)

将配置更改为

```
ResourceSpace.Has.ResourcesOfType<MyResource>()
          .AtUri("/MyResource/{Id}")
          .And.AtUri("/MyResource").Named("MyResource")
          .HandledBy<MyResourceHandler>()
          .AsJsonDataContract() 
          .And.AsXmlDataContract() 
```

并在处理程序中进行适当的更改，即

```
[HttpOperation(HttpMethod.GET, ForUriName = "MyResource")] 
```

OpenRasta 返回 415 http 状态码。

上面又不一致了。

对于与上述类似配置的我的其他资源，OpenRasta 抛出 403 http 状态代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:37:47.310

第一种情况是正确的。您在两者之间共享一个处理程序。因此，当查看处理程序以选择方法时，有一个带有参数的候选者和一个没有参数的候选者。当您访问 /MyResource 时，它​​会找到处理程序并找到没有参数的方法。这是预期的行为。

在您的第二个配置中，那里缺少一些东西。415 是 OR 不理解请求数据。因为它是一个 GET，所以应该没有要处理的请求媒体类型。这将需要一个调试日志来检查发生了什么。您确定您的请求没有附带一些请求数据和 Content-Type 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:12:09.613

OpenRasta 的 GET 方面，我的想法很好，这是我仍在努力的 POST：

我只为 JSON 做了非常相似的事情，但这样做是这样的：

```
 ResourceSpace.Has.ResourcesOfType<IList<MyResource>>()
                .AtUri("/myresource").And
                .AtUri("/myresource/{id}").HandledBy<ResourceHandler>().AsJsonDataContract();

    [HttpOperation(HttpMethod.GET)] 
    public IEnumerable<MyResource> Get(int id = 0)
    {
        if (id == 0)
            return Context.Set<MyResource>().ToList();
        else
            return GetMyResourceMethod(id).ToList();
    }

    private IQueryable<MyResource> GetMyResourceMethod(int id)
    {
        var myresource = from resource in Context.Set<MyResource>()
                      where resource.MyResourceId == id
                      select resource;
        return myresource;
    } 
```

您可以在 Get 方法中使用默认参数处理带参数和不带参数。我认为从您的第二个配置中您缺少 ResourceType 中的 IList 因为非参数选项将返回一个列表。然后通过 ToList() 方法返回一个 IEnumerable 是不言而喻的。

这一切都假设您在“MyResource 列表”中使用 SQL-to-Linq，但我看不到您的代码的那部分以及它在做什么。如果不只是忽略我包含的私有函数并采取你自己的方法。

# yaml - 在 Google Dart 中解析 YAML？

> ID：11523488
> 
> 赞同：3
> 
> 时间：2012-07-17T13:25:05.220
> 
> 标签：yaml, dart

我在文档中的任何地方都没有看到任何提及 YAML 解析功能的内容。我在网上也找不到任何 YAML 解析器库，然后我找到了这个：

[http://code.google.com/p/dart/source/browse/branches/bleeding_edge/dart/utils/pub/yaml/?r=7264](http://code.google.com/p/dart/source/browse/branches/bleeding_edge/dart/utils/pub/yaml/?r=7264)

我想我要么自己做一个，要么从那个存储库复制代码——或者有什么方法可以使用包管理器来安装那个 YAML 库？

显然这是一个有效的 YAML 解析器库：

```
library yaml; 
```

我将如何安装这个库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:51:26.447

试试这个

```
import '/Users/alex/my/src/dart/dart/utils/pub/yaml/yaml.dart'; 
```

其中“/Users/alex/my/src/dart”是我的本地 Dart 存储库克隆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T13:55:24.720

它现在已添加为 pub 存储库： http: [//pub.dartlang.org/packages/yaml](http://pub.dartlang.org/packages/yaml)

# magento - Magento将wishlist_link添加到不同的块？

> ID：11523489
> 
> 赞同：5
> 
> 时间：2012-07-17T13:25:05.360
> 
> 标签：magento, magento-1.7

我已经使用我的 local.xml 文件从我的 top.links 中删除了愿望清单链接：

```
<remove name="wishlist_link"/> 
```

如何将它添加到其他地方，例如在我的迷你篮中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T11:14:39.863

在块视图脚本中，我添加了以下内容，其中添加了指向`/wishlist/`.

```
<a href="<?php echo $this->getUrl('wishlist') ?>">Wishlist</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:43:21.450

您可能想查看“Mage_Page_Block_Template_Links”类。在这个类中，您可以看到以下方法：

```
public function addLink($label, $url='', $title='', $prepare=false, $urlParams=array(),
    $position=null, $liParams=null, $aParams=null, $beforeText='', $afterText='')
{
    if (is_null($label) || false===$label) {
        return $this;
    }
    $link = new Varien_Object(array(
        'label'         => $label,
        'url'           => ($prepare ? $this->getUrl($url, (is_array($urlParams) ? $urlParams : array())) : $url),
        'title'         => $title,
        'li_params'     => $this->_prepareParams($liParams),
        'a_params'      => $this->_prepareParams($aParams),
        'before_text'   => $beforeText,
        'after_text'    => $afterText,
    ));

    $this->_links[$this->_getNewPosition($position)] = $link;
    if (intval($position) > 0) {
         ksort($this->_links);
    }

    return $this;
} 
```

这是添加到受保护变量 $_link 的链接的函数；稍后，此链接将由您的模板使用 foreach 循环编写。

您可以使用以下方法检索此变量的值：

```
public function getLinks()
    {
        return $this->_links;
    } 
```

例如在文件 ;page/template/links.phtml

```
<?php $_links = $this->getLinks(); ?>
<?php if(count($_links)>0): ?>
<ul class="links"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
        <?php endif;?>
    <?php endforeach; ?>
</ul>
<?php endif; ?> 
```

然后，您可以为自定义块创建一个新函数，或者您可以扩展此块并使用函数 removeLinkByUrl 和 addLink。

# android - 在所有 sdk 中更改 Android 中 EditText 的光标颜色

> ID：11523494
> 
> 赞同：14
> 
> 时间：2012-07-17T13:25:20.120
> 
> 标签：android, android-edittext, text-cursor

我想在所有设备上更改 android 的 edittext 光标颜色。我怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-09-09T20:58:42.540

我不得不使用这样的drawable：

mycursor.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
        <size android:width="1dp" />
        <solid android:color="@android:color/holo_blue_light"/> 
<!--make sure its a solid tag not stroke or it wont work -->
    </shape> 
```

在我的编辑文本中，我设置了光标可绘制属性，如下所示：

```
 <EditText
                            android:id="@+id/et_details"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:cursorVisible="true"
                           android:textCursorDrawable="@drawable/mycursor"  
                            /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T09:40:22.307

在所有平台上获取它的方法就是这样。

1 - 在您的布局文件夹中打开您的 layout.xml。找到编辑文本并设置

```
android:cursorVisible="true" 
```

这将为低于 os 版本 11 的设备设置光标

2 - 在可绘制文件夹中创建 cursor_drawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
    <size android:width="1dp" />
    <stroke android:color="@color/black"/>
</shape> 
```

3 - 创建文件夹布局-v11

4 - 将您的 layout.xml 复制到 layout-v11

5 - 找到您的编辑文本并设置 android:textCursorDrawable="@drawable/cursor_drawable"

这将使光标显示在所有设备和操作系统上。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-17T13:34:56.267

将`android:textCursorDrawable`属性分配给`@null`并设置`android:textColor`为光标颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-28T07:24:10.070

创建drawalble xml：edtcolor_cursor

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >
        <size android:width="1dp" />
        <solid android:color="#FFFFFF"  />
    </shape>

<EditText  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:cursorVisible="true"
    android:textCursorDrawable="@drawable/edtcolor_cursor"
    /> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-17T13:35:59.553

[请参阅](https://stackoverflow.com/questions/7238450/set-edittext-cursor-color)此链接。你可以试试这个

```
android:textCursorDrawable
```

# javascript - 在 touchend 事件期间查找元素手指处于打开状态

> ID：11523496
> 
> 赞同：23
> 
> 时间：2012-07-17T13:25:23.003
> 
> 标签：javascript, jquery, html, mobile-safari

当调用 touchend 事件时，我需要发现手指下的 html 元素。我正在使用的代码；

```
$('.wsSquare').on("mouseup touchend",function(event){
    event.preventDefault();
    event.stopPropagation();
    console.log($(event.target).data());    
}); 
```

在（非触摸）设备上使用鼠标，此代码正确记录了在 mouseup 事件发生时与鼠标下的元素关联的数据。

但是在触摸设备（ipad safari）上，event.target 是在 touchstart 事件期间位于手指下方的元素，并记录 touchstart 事件下元素的数据

我还检查了 touchmove 事件的行为，这也具有相同的行为（event.target 是 touchstart 元素）。似乎所有触摸事件的目标都是在手势开始时触摸的元素。

当调用 touchend 事件时，我需要访问手指下的元素。我的手势可能会穿越许多元素。

### 编辑

[进一步的研究从规范](http://www.w3.org/TR/2011/WD-touch-events-20110505/#the-touchend-event)中挖掘了这一点。

> 5.5 touchend 事件
> 
> 用户代理必须调度此事件类型以指示用户何时从触摸表面移除触摸点，还包括触摸点物理离开触摸表面的情况，例如被拖离屏幕。
> 
> **此事件的目标必须与触摸点第一次放置在表面上时开始的元素相同，即使触摸点已经移出目标元素的交互区域**。
> 
> 被移除的一个或多个触摸点必须包含在 TouchEvent 的 changedTouches 属性中，并且不得包含在 touches 和 targetTouches 属性中。

所以观察到的行为是正确的，我该如何改变这种行为？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-17T13:26:35.407

使用[`document.elementFromPoint`](https://developer.mozilla.org/en/DOM/document.elementFromPoint)事件的坐标并将其提供给它，例如，像这样：

```
$('.wsSquare').on("mouseup touchend",function(event){
    event.preventDefault();
    event.stopPropagation();
    var changedTouch = event.changedTouches[0];
    var elem = document.elementFromPoint(changedTouch.clientX, changedTouch.clientY);
    // Do something with elem
}); 
```

# java - Spring JUnit 文件加载问题

> ID：11523499
> 
> 赞同：0
> 
> 时间：2012-07-17T13:25:39.807
> 
> 标签：java, spring, junit

我正在使用以下代码对我的 Spring maven 应用程序进行 JUnit 测试

```
private static BeanFactory servicefactory = null;
private static BookingProcessService bookingProcessService;
@BeforeClass
public static void setUpBeforeClass() throws Exception{
    try{
        String[] configFiles = {"applicationcontext-Service.xml","applicationcontext-Hibernate.xml","applicationContext-dao.xml"};
        ClassPathXmlApplicationContext appContext = new ClassPathXmlApplicationContext(configFiles);
        servicefactory = (BeanFactory) appContext;
        bookingProcessService = (BookingProcessService) servicefactory.getBean("bookingProcessService");            
    }catch (Exception e){
        e.printStackTrace();
    }
} 
```

在使用 maven 构建我的项目时，我遇到了一些错误。名为**bookingProcessBusiness**的 bean 未创建可能是因为 spring 配置文件未正确加载。

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:30:18.290

1.  请提供您得到的确切例外情况

2.  是的，您正在吞咽而不是进一步抛出并让 JUnit 知道有问题的异常。不要这样做：

    ```
    }catch (Exception e){
      e.printStackTrace();
    } 
    ```

3.  为什么不使用内置的[Spring 支持进行集成测试](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html)？

    ```
    @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration(locations={"applicationcontext-Service.xml","applicationcontext-Hibernate.xml","applicationContext-dao.xml"})
    public class BookingProcessServiceTest {

        @Autowired
        private BookingProcessService bookingProcessService;

    } 
    ```

    没有胶水代码，没有`static`s。

# apache - 使用现有 Apache 安装 subversion edge

> ID：11523504
> 
> 赞同：4
> 
> 时间：2012-07-17T13:26:05.453
> 
> 标签：apache, svn, subversion-edge

目前我有一台运行 apache 的服务器。我正在尝试安装随 apache 堆栈一起提供的 subversion edge，以在 apache 上提供 subversion。

如何使用系统 apache 而不是使用 subversion edge 附带的 apache？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:57:04.810

[显然不支持](http://subversion.open.collab.net/ds/viewMessage.do?dsForumId=3&dsMessageId=402046)在现有 apache 上部署 SubversionEdge 。您可以将它安装在现有 Apache 旁边，并将现有安装用作 SubversionEdge 安装前的反向代理。

# asp.net - 基于权限的动态Web表单

> ID：11523509
> 
> 赞同：2
> 
> 时间：2012-07-17T13:26:19.947
> 
> 标签：asp.net, .net, sql-server, permissions, webforms

需要设计几个基于用户类型和权限级别而改变的 ASP.Net Web 表单。

数据库中定义了七种用户类型（ClientType 表，ID = 0-7）。

数据库中将映射回我们的 Web 表单中的控件的所有字段也由具有查看/添加/修改/删除权限的用户类型定义，并存储在数据库中的单独表中。

IE

```
tbl_FieldAccess

FieldName = Client_Name (Client Name Field in our Client Table)
ClientType = 1
View = 1
Add = 0
Modify = 0
Delete = 0

FieldName = Client_Name ClientType = 7
View = 1
Add = 1
Modify = 1
Delete = 1 
```

现在采用我的实际 Web 表单控件并将它们映射到我的 tbl_FieldAccess 表中的记录然后使用它来确定是否显示/隐藏控件的最佳方法是什么（模式、实践、具体示例），使其只读， ETC。？

注意：我必须使用旧版登录和身份验证，因此此处不能选择 ASP.Net Membership API。

使用 ASP.Net、C# 和 SQL Server。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:45:35.317

我建议您为您的页面创建一个视图模型：

```
class MyPageViewModel
{
    public bool SendButtonVisible { get; set; }
    public bool EditButtonEnabled { get; set; }
    // many other properties ...
    public YourData Data { get; set; }
} 
```

然后你的 aspx 看起来像：

```
<asp:Button Id="btnSend" runat="server" Visible='<%# Model.SendButtonVisible" %>' /> 
```

而你背后的代码：

```
 public class YourPage : Page
    {
         public MyPageViewModel Model 
         {
             get { return (MyPageViewModel )ViewState["Model"]; }
             set { ViewState["Model"] = value;  }
         }

         protected void Page_Load(object sender, EventArgs e)
         {
            if (!Page.IsPostBack)
            {
                // put all business logic in your service layer
                Model = YourServiceClass.GetMyPageViewModel();
                DataBind();
            }
         }
    } 
```

# php - PHP：读取 Safari (iOS) 缓存中的文件

> ID：11523518
> 
> 赞同：0
> 
> 时间：2012-07-17T13:26:42.730
> 
> 标签：php, caching, mobile-safari

我有一个 Web 应用程序“A”，它为另一个应用程序“B”生成配置文件。我必须能够通过 FTP 连接传输此配置文件。

“A”和“B”不在同一个网络上，所以我必须将“A”制作的配置文件存储在我的本地设备（平板电脑）上。“A”用于多个设备。使用 iPad（没有经典文件系统）我无法下载和存储配置文件，然后将它们上传到“B”。

因此，我将配置文件存储在 safari 的缓存中，即使我没有连接到“A”的网络（缓存中有 URL 的 href），我也可以在平板电脑上显示它们。但是，当我尝试使用相同的 url 在 php 代码中执行“fopen”时，我收到此消息“无法打开流：无法建立连接，因为目标机器主动拒绝了它。”

我不明白为什么我能够显示无法在代码中打开的文件...

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:51:35.133

PHP 只能访问服务器上的文件系统，而不是设备上的文件系统（PHP 本身不在设备上执行，它只*为*设备生成输出，当设备“获取”它时，PHP 已完成执行）。您收到连接被拒绝错误的原因与您首先需要中间人的原因相同；A 不能和 B 说话。

根据您对其中一些事情的控制程度，以下是我的想法：

1.  重新评估是否*可以*让这些机器相互通信；发挥创意
2.  如果你可以控制 A 的输出，让它生成一个 HTML ，它可以提交给 B 服务器
3.  您可以在 B 服务器上安装 A 的 Web 应用程序吗？
4.  如果你只有一个或几个这样的“传输设备”（如果你愿意的话），考虑构建一个非常简单的 iOS 应用程序（你将开始学习一项很酷的新技能；像这样的单一用途应用程序可以很简单）

# ubuntu-12.04 - 如何在ubuntu中更改笔记本电脑的屏幕亮度？

> ID：11523523
> 
> 赞同：6
> 
> 时间：2012-07-17T13:26:58.307
> 
> 标签：ubuntu-12.04

我有一台带有最新版本 Ubuntu（我猜是 12.04）的 acer aspire 5749 笔记本，所以当我用热键更改亮度时，亮度窗格会发生变化，但实际上亮度保持不变。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:15:24.737

`sudo gedit /etc/default/grub`

然后输入您的 root 密码并插入以下行：

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash acpi_backlight=vendor"
GRUB_CMDLINE_LINUX="acpi_osi=Linux" 
```

保存并退出。

`sudo update-grub`

重新启动您的笔记本电脑，然后它应该可以通过“Fn”+左右箭头工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:08:22.633

我也有acer aspire系列笔记本电脑，热键不起作用，所以你可以通过下面的命令来改变它`sudo setpci -s 00:02.0 f4.b=00`，这里你可以输入00到ff的十六进制值，[00=明亮，ff=暗淡]

有关更多详细信息，请访问以下链接：[http ://daksh21ubuntu.blogspot.in/2011/12/how-to-increasedecrease-brightness-on.html](http://daksh21ubuntu.blogspot.in/2011/12/how-to-increasedecrease-brightness-on.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T21:31:59.250

好的，所以在任何人搞砸之前

```
sudo update-grub 
```

最新的 ubuntu 版本使用 grub2

所以，请使用：

```
sudo update-grub2 
```

如果你不这样做，你的系统将无法启动，你必须弄乱你的手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T11:32:17.347

安装 xbacklight

```
sudo apt-get install xbacklight 
```

然后降低亮度

```
xbacklight -dec {any value between 0-100} 
```

增加亮度

```
xbacklight -inc {any value between 0-100} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-22T18:22:30.143

我在 Ubuntu 16.04 上使用 nouveau。我通过以下方式解决了这个问题：

1.  在终端类型`sudo gedit /etc/default/grub`中。
2.  在那里搜索该行`GRUB_CMDLINE_LINUX_DEFAULT`并`acpi_osi=Linux acpi_backlight=native`在“”内添加。（如果这不起作用，请尝试使用“供应商”或“视频”代替原生（当然没有引号））。
3.  现在运行`sudo update-grub`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-15T09:13:39.193

这不会使您的亮度功能键起作用，而是一种解决方法。

使用以下命令安装亮度控制器：

```
sudo add-apt-repository ppa:apandada1/brightness-controller
sudo apt-get update 
```

对于最多支持 4 个显示器的版本 1：

```
sudo apt-get install brightness-controller-simple 
```

对于具有多显示器支持和其他功能的版本 2：

```
sudo apt-get install brightness-controller 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-30T07:31:09.563

我的戴尔 Inspiron 上现在有 Ubuntu 19.10。我无法使用功能键甚至顶部菜单栏中的滑块更改亮度。对于以前版本的 Ubuntu，亮度对我来说从来没有用过。所以这是最终对我有用的解决方案。

您需要编辑 GRUB2：

```
sudo gedit /etc/default/grub 
```

尝试找到以下行：

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash" 
```

将此行更改为：

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash acpi_osi=" 
```

在上述更改后更新 GRUB 配置：

```
sudo update-grub 
```

重新启动系统：

```
sudo reboot 
```

你很高兴。如果上述更改对您不起作用，请尝试以下任一更改：

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash acpi_backlight=vendor" 
```

或者，

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash acpi_backlight=native" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-11T04:25:47.460

首先，我们需要一些关于视频卡的信息。只是为了确保正确的工作正常。例如，它是一个 APU（一个处理器中的 CPU+GPU）。英特尔或 AMD 无所谓。在我的示例中，它是 i5 470U 处理器。为了进一步使用，我们需要显卡的 ID：

```
$ sudo lspci | grep VGA

--> 00:02.0 VGA compatible controller: Intel Corporation Core Processor 
    Integrated Graphics Controller (rev 02)
The ID is 0:2:0 
```

有关视频设备使用的更多信息

```
$ sudo lshw -c video 
```

我们需要为 xorg 编辑/创建一个配置文件：

/usr/share/X11/xorg.conf.d/20-intel.conf

对于我们的示例，必须插入以下部分：

```
Section "Device"
      Identifier "Intel Graphics"
      Driver "intel"
      Option "Backlight" "intel_backlight"
      BusID "PCI:0:2:0"
      EndSection
Section "Device" 
```

资料来源：[https ://wiki.ubuntuusers.de/Grafikkarten/Intel/](https://wiki.ubuntuusers.de/Grafikkarten/Intel/)

然后必须编辑 grub 引导加载程序以重写支持的操作系统列表。此 Bios 选项是在 windows vista 期间引入的。

来源：[https ://wiki.ubuntuusers.de/Bootoptionen/](https://wiki.ubuntuusers.de/Bootoptionen/)

Grub 编辑并使用 acpi_osi=Linux 扩展以下行

/etc/default/grub

```
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash acpi_osi=Linux" 
```

关闭文件并更新 grub

```
$ sudo update-grub 
```

重新启动系统。

```
$ reboot 
```

键盘上用于调节亮度的键（带有太阳符号）现在应该可以工作了。

[（从https://askubuntu.com/questions/1115249/brightness-key-not-working-acer-aspire-v15/1306830#1306830](https://askubuntu.com/questions/1115249/brightness-key-not-working-acer-aspire-v15/1306830#1306830)复制粘贴 ）

# asp.net - FireFox 和 AjaxControlToolKit 组合框

> ID：11523525
> 
> 赞同：6
> 
> 时间：2012-07-17T13:27:01.067
> 
> 标签：asp.net, ajax

我正在使用.NET framework 4.0 和相应版本的Ajax 控件工具包。

在我的页面上，我有一个这样定义的组合框：

```
<asp:ComboBox ID="cbUserName" AutoCompleteMode="SuggestAppend"
        CaseSensitive="false" runat="server" BackColor="#FFFFCC">
        </asp:ComboBox> 
```

在 IE9 中，组合框允许我输入或从用户列表中选择。然而，在 FireFox 中，它不允许我在框中输入内容。当我输入 FireFox 时，下拉列表也不会过滤。我想知道是否有其他人看到过这种行为，是否有解决方法？

**编辑**

值得一提的是，ASP.NET Ajax Control Toolkit 站点上的演示实际上在 FireFox 中运行良好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T22:28:10.863

我也遇到了无法`Combobox`在 FireFox 中输入文本的问题，但我可以在 IE 和 Chrome 中。经过一天的调查后，我发现将`MaxLength`属性设置为大于 0 允许 FireFox 接受在组合框的文本字段中输入。

我希望这可以帮助遇到同样问题的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:33:25.423

```
ddlBox.SelectedIndex = 0 
```

在 Ajax 控制工具包的最新迭代之前，我不需要设置它。但是后来我更新了，我无法在空文本框中输入内容，该文本框曾经与第一项一起显示。所以我添加了该代码，它又可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:20:37.533

我遇到了同样的问题。我在网上找不到优雅的解决方案，所以我从两组不同的工具包源代码构建了自己的 AjaxControlToolkit.dll。

除了将 ComboBox.cs 和 ComboBox.pre.js 替换为来自 AjaxControlToolkit_8502f32ba9ce 的版本之外，我使用了最新版本中的所有内容。（~2011 年 7 月）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T15:01:41.543

```
<ajaxToolkit:ComboBox ID="ComboBox1" runat="server" DropDownStyle="DropDownList" AutoCompleteMode="SuggestAppend" CssClass="" AppendDataBoundItems="false">  
       <asp:ListItem>Fox</asp:ListItem> 
</ajaxToolkit:ComboBox> 
```

这在 Firefox 中对我有用。

我不确定您是否误会了键入的能力，但组合框仅允许您键入 ListItems。所以在这种情况下，它只允许你输入`Fox`..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-01T10:20:58.287

尝试使用：

```
ajaxToolkit:ComboBox ID="ComboBox1" runat="server" DropDownStyle="DropDownList"
AutoCompleteMode="SuggestAppend" CssClass="" AppendDataBoundItems="false"
MaxLength="100" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T11:01:39.153

[此处](http://ajaxcontroltoolkit.codeplex.com/workitem/27215)已报告类似问题，请确保您使用相同版本的 firefox 和 toolkit。如果没有尝试升级它们，然后再试一次。

# python - python中的断言错误

> ID：11523526
> 
> 赞同：-2
> 
> 时间：2012-07-17T13:27:02.677
> 
> 标签：python, process, multiprocessing

尝试运行此代码时

> ```
> for i in range(N):
>     jobs.append(mp.Process(None,G_Sim,(lmbda,mu,c,skip_cost,simulation_time,Policy,warmup_period,False,)))
> for j in jobs:
>     j.start()
>     j.join() 
> ```

我得到一个断言错误：名称必须是一个字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:31:50.223

[`Process`](http://docs.python.org/library/multiprocessing.html#multiprocessing.Process)期望它的第三个参数是进程名称，而不是参数元组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:35:49.393

`mp.Process()`函数调用定义如下：

```
multiprocessing.Process([group[, target[, name[, args[, kwargs]]]]]) 
```

第三个参数应该是进程的名称，作为字符串。您正在传递以下元组： (lmbda,mu,c,skip_cost,simulation_time,Policy,warmup_period,False,)

你应该命名你的论点。就像是：

```
jobs.append(mp.Process(group=None, target=G_Sim, args=(lmbda,mu,c,skip_cost,simulation_time,Policy,warmup_period,False,))) 
```

# java - IntelliJ IDEA 中的 Tapestry 支持设置

> ID：11523528
> 
> 赞同：0
> 
> 时间：2012-07-17T13:27:11.207
> 
> 标签：java, intellij-idea, tapestry

我想使用 Intellij IDEA 11 作为 Tapestry Web 应用程序的 IDE，但我不知道如何在 IDEA 11 中设置整个东西。它有一个 Tapestry 插件，但没有关于它如何工作的文档。

有没有人在 IDEA 中使用 Tapestry？能发个设置教程吗？

这将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:59:27.493

你不需要插件，我从来没有发现它们有多大帮助。您所需要的只是 maven 支持，也许还有 .tml 文件上的 html 语法高亮显示（我确信已经可以配置）。

# perl - 在不同的目录中设置 perl 包

> ID：11523530
> 
> 赞同：1
> 
> 时间：2012-07-17T13:27:21.537
> 
> 标签：perl

我正在考虑用 Perl 重写一个旧的应用程序。

设置三个包并从中运行子例程对于我将要做的事情很有意义，但我对设置包不是很熟悉。

我希望这些包与我的其他 Perl 脚本位于同一个位置，即除了这个 bin 目录中的脚本之外，不需要调用这些包。

我的问题是如何让 Perl 知道我的包在哪里（以及如何将它们安装在默认位置以外的地方），这是一件可以/聪明的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:33:54.623

这是一项常见的任务。PERL5LIB 环境变量包含要在其中查找模块的目录列表。您还可以使用[`lib`pragma](http://perldoc.perl.org/lib.html)指定特定脚本应在其中查找模块的目录：

```
#!/usr/bin/perl

use strict;
use warnings;
use lib "$ENV{HOME}/lib"; 
```

您可能还想研究[`cpanm`](http://search.cpan.org/dist/App-cpanminus/lib/App/cpanminus.pm)and [`local::lib`](http://search.cpan.org/dist/local-lib/lib/local/lib.pm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:04:05.153

如果包和脚本位于同一位置，我建议使用[`FindBin`](https://metacpan.org/module/FindBin)：

```
use FindBin '$Bin';
use lib $Bin; 
```

# javascript - 如何从网页中获取文本并将 document.title 设置为它？

> ID：11523535
> 
> 赞同：1
> 
> 时间：2012-07-17T13:27:37.353
> 
> 标签：javascript, greasemonkey

我在一个游戏网站上，页面标题并不反映游戏标题，而是网站名称和网站描述。每个游戏名称都出现在他们的页面上，如下所示：

```
<div id="gr-header">
   <div>
      <h1><a href='/games/'>Games Room</a> - Some Game Name Here</h1>
   </div>
   <div>
      some other stuff
   </div>
</div> 
```

现在，我正在手动将 URL 中的游戏 ID 与相应的游戏标题进行匹配，并执行以下`idlist`操作`gamelist`按相应顺序命名。

```
for (i=0; i < idlist.length; i++)
{ 
   if (gameid[0] == idlist[i])
   { 
      document.title = gamelist[i];
      break;
   }
} 
```

然而，这是不雅的，因为有太多的游戏手动列出它们。如何从网页中获取“Some Game Name Here”文本并将所述文本存储在变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:43:12.823

从您发布的 HTML 结构中，试试这个

```
var title = $('#gr-header h1').clone().children().remove().end().text().replace(/^[\W]+/, '');
document.title = title; 
```

这得到了的直接文本`h1`（即不包括其子项的文本`a`）。

（正则表达式删除游戏名称开头的“-”。根据需要调整/删除。

小提琴：http: [//jsfiddle.net/gcMTt/1/](http://jsfiddle.net/gcMTt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:53:59.103

使用[`querySelector`](https://developer.mozilla.org/en/DOM/Document.querySelector)和一个简单的[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)：

```
var nameElement = document.querySelector ("#gr-header div h1");
var gameName    = nameElement.textContent.replace (/^.*\s-\s/, "");
document.title  = gameName; 
```

# django - 设置 django_language cookie 时出现 LocaleMiddleware 错误

> ID：11523536
> 
> 赞同：2
> 
> 时间：2012-07-17T13:27:42.130
> 
> 标签：django, internationalization, middleware

我想使用 LocaleMiddleware 在模板层获取用户首选语言，为每种语言显示不同的内容。根据 django 文档，LocaleMiddleware 执行以下操作：

*   首先，它在请求的 URL 中查找语言前缀。仅当您在根 URLconf 中使用 i18n_patterns 函数时才会执行此操作。有关语言前缀以及如何国际化 URL 模式的更多信息，请参阅国际化：在 URL 模式中。

*   否则，它会在当前用户的会话中查找 django_language 键。

*   如果做不到这一点，它会寻找一个 cookie。使用的 cookie 的名称由 LANGUAGE_COOKIE_NAME 设置设置。（默认名称是 django_language。）

*   如果做不到这一点，它会查看 Accept-Language HTTP 标头。此标头由您的浏览器发送，并按优先级告诉服务器您喜欢哪种语言。Django 会尝试标题中的每种语言，直到找到具有可用翻译的语言。

*   否则，它将使用全局 LANGUAGE_CODE 设置。

当它使用 Accept-Language 标头时，它似乎工作正常。但是，当我访问 set_language 重定向时，LocaleMiddleware 开始失败并出现以下错误：

```
AttributeError at /
'NoneType' object has no attribute '_info' 
```

如果我从中间件列表中排除 LocaleMiddleware 或清除浏览器 cookie，则错误不会再出现，直到我再次转到 set_language 重定向。

这是我的配置：

设置.py

```
LANGUAGE_CODE = 'en-us'

USE_I18N = True

LANGUAGES = (
    ('en', 'English'),
    ('es', 'Español'),
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    #Uncomment the next line for simple clickjacking protection:
    #'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

以下模式指向 urls.py 中的 set_language 重定向：

```
(r'^i18n/', include('django.conf.urls.i18n')), 
```

我已经阅读了一些关于类似错误和错误的信息，但没有一个能解决我的问题。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:31:44.480

这是 Django 的说法“未找到所请求语言的翻译”。

你有没有运行编译消息？

# android - 如何序列化 WifiConfiguration 对象

> ID：11523539
> 
> 赞同：3
> 
> 时间：2012-07-17T13:27:49.803
> 
> 标签：android, serialization, wifi

我有一个 WifiConfiguration 对象列表，我想使用此代码对其进行序列化

```
 WifiManager volumeControl =(WifiManager)mContext.getSystemService(Context.WIFI_SERVICE);
 List<WifiConfiguration> info = volumeControl.getConfiguredNetworks();
 WifiConfigSerializable WifiInfo = new WifiConfigSerializable(info.get(0));
 serialize(WifiInfo.wifiList);

public void serialize(Object objToSerialize) {
            ObjectOutputStream out = null;
            out = new ObjectOutputStream(new FileOutputStream(SETTINGS_FILE_NAME));

            out.writeObject(objToSerialize);
            out.close();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

和可序列化类

```
public class WifiConfigSerializable extends WifiConfiguration implements Serializable{

    WifiConfiguration wifiList ;
    private static final long serialVersionUID = 1L;
    public  WifiConfigSerializable( WifiConfiguration Wifi) {
        this.wifiList =  Wifi;
    }
  } 
```

我得到以下异常`java.io.NotSerializableException: android.net.wifi.WifiConfiguration`我如何序列化`WifiConfiguration`对象。任何人都可以帮忙吗？

# ruby - Rails 和类变量

> ID：11523547
> 
> 赞同：5
> 
> 时间：2012-07-17T13:28:12.163
> 
> 标签：ruby

```
class MainController < ApplicationController

  @my_var = 123
   def index
    var1 = @my_var
   end

   def index2
    var2 = @my_var
   end
end 
```

为什么不等于`var1`不`var2`等于`123`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-17T13:32:24.410

变量`@`是 ruby​​ 中的实例变量。如果您正在寻找类变量，它们以 为前缀`@@`，因此您应该使用它`@@my_var = 123`。

您不能以这种方式使用实例变量的原因是，如果您在方法之外定义实例变量，它们不会与您的方法存在于同一范围内，而只会在您的类被解释时存在。

`var1`在您的示例中是一个局部变量，它仅在`index`方法内部可见。

例子：

```
class Foo
  @@class_variable = "I'm a class variable"

  def initialize
    @instance_variable = "I'm an instance variable in a Foo class"
    local_variable = "I won't be visible outside this method"
  end

  def instance_method_returning_an_instance_variable
    @instance_variable
  end

  def instance_method_returning_a_class_variable
    @@class_variable
  end

  def self.class_method_returning_an_instance_variable
    @instance_variable
  end

  def self.class_method_returning_a_class_variable
    @@class_variable
  end
end

Foo.new
=> #<Foo:0x007fc365f1d8c8 @instance_variable="I'm an instance variable in a Foo class">
Foo.new.instance_method_returning_an_instance_variable
=> "I'm an instance variable in a Foo class"
Foo.new.instance_method_returning_a_class_variable
=> "I'm a class variable"
Foo.class_method_returning_an_instance_variable
=> nil
Foo.class_method_returning_a_class_variable
=> "I'm a class variable" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:02:23.107

`@my_var`，在您的示例代码中，是类的实例变量`MainController`。也就是说，它是一个类级别的实例变量，而不是一个实例级别的实例变量。它存在于与类实例关联的实例变量完全不同的范围内。

在您的*实例*方法的主体`index`中`index2`，您试图取消引用作为 class 实例的对象上的实例变量`MainController`，但您尚未在任何地方定义该实例变量，因此您返回`nil`.

如果要`@my_var`用作类级别的实例变量，可以从类的实例中获取其值，如下所示：

```
var1 = self.class.instance_variable_get(:@my_var) 
```

类变量用`@@`前缀表示，并不完全鼓励使用它们。用谷歌几分钟就会告诉你为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:34:26.603

因为代码在不同的上下文中执行。你可以在这里看到：

```
class MainController
  puts self
  def print_self
    puts self
  end
end
#=> MainController
MainController.new.print_self #=> <MainController:0x00000001761140> 
```

正如您在第一次打印中看到的 self is ，在第二次打印中，self 是从类`MainController`派生的对象。`MainController`

在对@my_vay 的赋值中，这个变量属于MainController，而在第二种情况下，@my_var 属于对象（不是类）并且这些变量是不同的。

# java - 通过屏幕触摸速度调节游戏速度

> ID：11523548
> 
> 赞同：1
> 
> 时间：2012-07-17T13:28:14.130
> 
> 标签：java, android, performance, touch

我正在创建一个游戏，用户必须更快地点击屏幕才能让他们在游戏中走得更快，但是我遇到了一些问题。我已经制作了游戏，因此它会根据用户的最后一次点击和他们当前的点击计算每分钟的点击次数，但是这种方法似乎很生涩并且效果不佳。我也想不出另一种方法来做到这一点，所以当他们根本不点击时，它会变慢。

我将如何为游戏创建这种机制，其中用户点击得越快，游戏进行得越快，如果他们根本不点击它就会减速停止。

谢谢

这是我到目前为止的一个片段，计算用户的每分钟点击次数 (TPM)。（这是在触摸方法中）。我目前正在将 TPM 传递给一个更新方法，该方法在每次更新时将背景移动 TPM/100（它以 30FPS 运行）

```
 if (thisTouch == 0 || lastTouch == 0) {
            Log.d("info","First Touch");
            thisTouch = lastTouch = System.currentTimeMillis();
        } else {
            Log.d("d","touch");
            thisTouch = System.currentTimeMillis();

            long difference = thisTouch - lastTouch;

            TPM = (int)((1000*60)/difference);

            lastTouch = thisTouch;
        } 
```

我想知道如何更改此设置，以便游戏在点击更快时加速，然后在他们不触摸屏幕时减慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:40:19.607

也许你可以做这样的事情：

*   创建一个 PriorityQueue<Long>
*   每当用户点击屏幕时，将 (currentTime + someTimeOut) 添加到队列中
*   每当您要检查当前速度（例如队列大小）时，首先删除所有元素> currentTime。

当然，如果您执行此类操作，请不要忘记添加适当的线程安全措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:45:28.283

Your general approach is pretty much the only way to do it, it just needs some fine tuning.

Keep a general TapsPerTime variable. With each new tap you register, do not *replace* the TapsPerTime, but calculate a new, weighted value:

TapsPerTime = (TapsPerTime * X) + (MeasureTapsPerTime * (1-X))

The factor X you need to find empirically (by trying out what works best for you). The general idea here is that each measurement will only nudge the used value a bit into the right direction.

Also, if you do not detect a tap for a set amount of time, simply update the TapsPerTime with the same formula, but use 0 (zero) for MeasureTapsPerTime. So if the user does not do anything the value goes down.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:38:29.243

不要成为“那个人”，但听起来你目前的每分钟点击数计划非常好，但实施得很糟糕。但是，我强烈建议您使用较小的时间量，例如每三秒点击一次，因为游戏通常节奏很快，并且必须等待整整一分钟才能看到您的角色加速或减速可能会产生延迟感。

或者，您可以使用某种形式的加速度，每次点击屏幕时都会增加到最大限制，并且随着时间的推移会随着不点击屏幕而减小。

现在我看到你用一些代码更新了你的问题，我想指出点击是触摸，从屏幕上释放不一定是触摸。老实说，我从您的代码中不知道您是否对此进行补偿，因此这可能是您的一些问题的根源。

最后，对于游戏开发算法和理论，您可能希望查看此 StackExchange 站点：[https ://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)

听起来您已经非常接近让您的游戏以您想要的方式感受，祝您好运！

# linq-to-xml - 具有三元运算符和可为空类型的 Xelement 构造函数

> ID：11523552
> 
> 赞同：0
> 
> 时间：2012-07-17T13:28:20.010
> 
> 标签：linq-to-xml, nullable, ternary-operator

我正在尝试使用 linq to xml 功能构造从一堆对象创建 xml：

```
new XAttribute("duration", (m.Media.Type.HasValue && m.Media.Type.Value == MediaType.Image) ? m.DurationInSeconds : default(int?)), 
```

代码的问题是，如果媒体类型没有值或媒体类型不是图像，我会得到一个异常，这可能是因为我使用了默认值（int？）。

理想情况下，如果媒体类型不存在或媒体不是图像，我想替换节点中的“null”。但无法弄清楚如何。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:35:35.970

是否要将字符串“null”作为属性值？

如果是，我会使用下面的代码：

```
 int? typeID = null;
    int duration = 23;
    var xml = new XElement("root", 
        new XAttribute("duration", ((typeID.HasValue && typeID.Value == 1) ? duration.ToString() : null) ?? "null")
    ); 
```

这个结果`<root duration="null" />`或者`<root duration="23" />`如果 typeID == 1

# matlab - 将字符串按原样写入Matlab中的文件

> ID：11523555
> 
> 赞同：3
> 
> 时间：2012-07-17T13:28:22.787
> 
> 标签：matlab, latex

在 matlab 脚本中，我正在生成一个乳胶表。例如，该表的一部分看起来像这样。

```
\multirow{2}{*}{\textbf{b1}}
&
2 & 3 & 10092 & 10763 & 103390 & 2797 & 2929 & 3008 & 5\% & 8\% \\
& 4 & 2 & 20184 & 10763 & 74508 & 1830 & 1970 & 2029 & 8\% & 11\% \\ 
```

此字符串保存在变量中`str`。现在，当我尝试`str`使用以下代码写入文件时。

```
f = fopen( 'report\results.tex', 'w' );
fprintf( f, str );
fclose(f); 
```

我收到以下警告。

```
Warning: Invalid escape sequence appears in format string. 
See help sprintf for valid escape sequences. 
```

这可能是由于我的字符串中有许多反斜杠字符，它们被用作转义序列。现在我怎样才能将这个字符串按原样打印到文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:31:00.130

避开反斜杠和百分号：

```
str = strrep(str,'\','\\');
str = strrep(str,'%','%%'); 
```

如果只是给您的打印发短信，那就没问题了。

最小的工作示例：

```
str = '2 & 3 & 10092 & 10763 & 103390 & 2797 & 2929 & 3008 & 5\% & 8\% \\'
str = strrep(str,'\','\\');
str = strrep(str,'%','%%');
f=fopen('testing123.txt','w');
fprintf(f,str);
fclose(f); 
```

文件内容如下：

```
2 & 3 & 10092 & 10763 & 103390 & 2797 & 2929 & 3008 & 5\% & 8\% \\ 
```

或者正如 Ben A. 建议的那样，使用[fwrite](http://www.mathworks.nl/help/techdoc/ref/fwrite.html)：

```
fwrite(f,str) 
```

我认为

```
fprintf(f,'%s',str) 
```

也可以解决问题，最好还包括一个换行符：

```
fprintf(f,'%s\n',str) 
```

# validation - JSF2 跨字段验证失败循环

> ID：11523557
> 
> 赞同：1
> 
> 时间：2012-07-17T13:28:27.003
> 
> 标签：validation, jakarta-ee, jsf-2

我正在开发的应用程序中的要求是，在执行搜索时，用户不应该在不输入州的情况下搜索城市，反之亦然，他们不应该在不输入城市的情况下搜索州。

**搜索.xhtml**

```
<h:inputText id="city" binding="#{city}" value="#{search.city}" validator="#{search.validateCity}">
  <f:attribute name="state" value="#{state}"/>
</h:inputText>

<h:inputText id="state" binding="#{state}" value="#{search.state}" validator="#{search.validateState}">
  <f:attribute name="city" value="#{city}"/>
</h:inputText> 
```

**搜索.java**

```
public void validateCity(FacesContext context, UIComponent component, Object convertedValue) {
    UIInput stateComponent = (UIInput) component.getAttributes().get("state");
    String state = (String) stateComponent.getValue();
    if(convertedValue.toString().length() > 0) {
        if(state.length() < 1) {
            throw new ValidatorException(new FacesMessage("Please enter State."));
        }
    }
}

public void validateState(FacesContext context, UIComponent component, Object convertedValue) {
    UIInput cityComponent = (UIInput) component.getAttributes().get("city");
    String city = (String) cityComponent.getValue();
    if(convertedValue.toString().length() > 0) {
        if(city.length() < 1) {
            throw new ValidatorException(new FacesMessage("Please enter City."));
        }
    }
} 
```

我已经简化了我的代码，以展示我使用标准跨字段验证方法所做的尝试。但是，我遇到的问题是，在验证阶段，City 和 State 都显示验证错误，我猜是因为两个验证器相互妨碍，因此造成了失败循环。

有没有我可以用来解决这个问题的解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:18:55.593

组件按照在组件树中声明的顺序进行验证。

当您调用[`UIInput#getValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#getValue%28%29)尚未验证的组件时，它将返回`null`. 此外，当您调用`UIInput#getValue()`已验证并标记为无效的组件时，它将返回`null`（或旧模型值）。

如果您想在验证第一个组件期间获取第二个组件的值，那么您应该使用[`UIInput#getSubmittedValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#getSubmittedValue%28%29)而不是`UIInput#getValue()`. 您只应记住，这将返回未转换的`String`.

或者，您可以查看[OmniFaces](http://omnifaces.org) [`<o:validateAllOrNone>`](http://showcase.omnifaces.org/validators/validateAllOrNone)组件。

```
<h:inputText id="city" value="#{search.city}" />
<h:inputText id="state" value="#{search.state}" />
<o:validateAllOrNone id="cityAndState" components="city state" message="Please fill both city and state." />
<h:message for="cityAndState" /> 
```

# javascript - 主干模型按 ID 获取 JSON 元素

> ID：11523559
> 
> 赞同：0
> 
> 时间：2012-07-17T13:28:37.883
> 
> 标签：javascript, json, backbone.js

我第一次使用主干，我真的很难让它与 JSON 数据文件一起正常工作。

我有一个模型像这样：

```
window.Test = Backbone.Model.extend({

defaults: {  
    id: null,
    name: null,
},

url: function() {
    return 'json/test.json/this.id';
  },

initialize: function(){  

}
}); 
```

单击测试项目后，我尝试调出单击的太平洋模型的详细信息

```
testDetails: function (id) {

    var test = new Test();
    test.id = id;
    test.fetch({ success: function(data) { alert(JSON.stringify(data))}});
}, 
```

但是这不起作用，我无法正确地说“使用传递的 ID 获取 JSON 元素”

谁能告诉我如何正确构建模型 URL 以使用 ID 提取元素。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:23:17.850

这里的问题是您将 JSON 数据文件视为对服务器的调用。那是行不通的，这就是你得到 404 的原因。如果你在本地访问文件，你必须先加载文件。您可以使用 .getJSON() 方法使用 jQuery 执行此操作，或者如果文件是静态的，则只需使用脚本块将其加载到内存中（尽管您可能需要在文件中分配一个 var）。最有可能的是，您将使用 jQuery。这方面的一个例子可以在这里找到：

[使用 Jquery 从本地文件中获取 JSON 对象](https://stackoverflow.com/questions/2792423/using-jquery-to-get-json-objects-from-local-file)。

如果这是一个 JSON 数组，您可以将数组加载到集合中，并使用“at”方法通过 id 访问特定元素。如果它完全是 JSON，则必须创建自定义解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:38:44.653

您的网址不正确。您正在返回文字字符串“this.id”。你可能想做更多的事情

```
url: function () {
    return 'json/test.json/' + this.id;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:39:50.563

我将从修复您的`url`功能开始：

```
url: function() {
    return 'json/test.json/' + this.get('id');
} 
```

你现在拥有它的方式，每个 fetch 请求，无论模型是什么`id`，都将`/json/test.json/test.id`

# ios - CGPDF文档和画外音

> ID：11523563
> 
> 赞同：1
> 
> 时间：2012-07-17T13:28:57.500
> 
> 标签：ios, pdf, accessibility, voiceover

我有一个 PDF 渲染应用程序，它从 URL (CGPDFDocumentCreateWithURL) 加载 PDF 内容。PDF 加载正常，我可以在屏幕上显示没有问题。这些 PDF 还包含用于搜索的文本。我正在尝试使 VoiceOver API 可以看到此内容。我以前从未使用过这个框架。

有人有任何提示或链接可以帮助我入门吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:13:07.087

如果您有权访问特定 PDF 页面中的文本，则可以将`accessibilityValue`用于显示页面的视图设置为文本值。然后这将读出内容。

如果由于某种原因您的 PDF 视图无法通过画外音访问，您可以使用覆盖视图，并在更改页面时更新其可访问性值。

# c# - 将 .net DateTimes 序列化为 javascript 友好的格式

> ID：11523564
> 
> 赞同：0
> 
> 时间：2012-07-17T13:28:59.303
> 
> 标签：c#, javascript, json, datetime, serialization

一点上下文：我正在尝试使用 css 类在 JQuery DatePicker 中标记日期以指示它们的可用性级别。（绿色日期 = 大量可用，橙色日期 = 部分可用，禁用 = 无可用）。我写了一个服务，结果是

```
ViewBag.AvailabilityTimeMap = IDictionary<DateTime, int> 
//int is the availability/capacity of the specified date. 
```

现在我希望将其写入视图，以便 DatePicker 的 beforeShowDay 函数可以将它传递的日期与字典中的 DateTime 匹配。

```
$('#_uiAppCalendarDiv').datepicker({
    beforeShowDay: renderCalendarCallback
});

var dateMap = @Html.Raw(SomeSortOfSerialization(ViewBag.AvailabilityTimeMap));

function renderCalendarCallback(date) {
    //eliminate weekends
    if ($.datepicker.noWeekends(date) == false){
        return false;
    }

    for(var index in dateMap) {
      if (index.key == date.toJSON()){ 
        //apply the appropriate css
        return true;
      }
    }
    //date is not in the availability map (should not happen).
    return false;    
} 
```

我认为使用正确的“SomeSortOfSerialization”应该是可能的吗？看起来 Json.Encode 对 DateTime 使用了一种奇怪的格式，而 javascript 对此无能为力。

# c# - 在 C# 中从 loginform 启用和禁用 mdiparent 的菜单项

> ID：11523565
> 
> 赞同：1
> 
> 时间：2012-07-17T13:29:00.540
> 
> 标签：c#, mdiparent

我有两个表单，**主页和登录**。在主页上有名为**文件**的菜单和菜单项，例如**登录，** 当我运行应用程序登录表单时将打开注销，登录后主页将打开。主页表单上的菜单项将在登录时**启用=true**成功我点击注销菜单这将**启用=false**登录以外的所有菜单。当我点击登录菜单登录表单将打开，成功登录后我的主表单菜单应该**启用=true**

所以我的问题是我无法从我的登录表单中**启用=true**菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:36:43.037

希望您将 LoginForm 显示为 ShowDialog()，而不是 MDI Child。如果您的登录成功，您可以将对话结果设置为 OK 或 Yes。在下一条语句中，您可以启用/禁用菜单项

```
mnuLogin_Click()
{
FrmLogin frmLogin = new FrmLogin();
if(frmLogin.ShowDialog() == DialogResult.OK)
{
//Enable menu here.
}
} 
```

希望它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:36:57.327

不要从您的登录表单而是从主表单执行此操作。也不要在登录后立即执行此操作，而是每次要打开菜单时，设置每个项目的启用属性。

# nsview - nsscrollview 内的自定义绘图 nsview

> ID：11523566
> 
> 赞同：2
> 
> 时间：2012-07-17T13:29:01.533
> 
> 标签：nsview, drawrect, nsscrollview

我在将自定义绘图 NSView 用作 NSScrollView 的 documentView 时遇到问题。

这是我的drawRect：代码：

```
- (void)drawRect:(NSRect)dirtyRect
{
    [[NSColor lightGrayColor] set];
    NSRectFill(self.frame); // Fill entire frame

    [[NSColor grayColor] set];
    [NSBezierPath setDefaultLineWidth:1];

    float y = 0.0f;
    while (y <= self.frame.size.height) {
        [NSBezierPath strokeLineFromPoint:NSMakePoint(0.0f, y) toPoint:NSMakePoint(self.frame.size.width, y)];
        y += 50.0f;
    }

    float x = 0.0f;
    while (x <= self.frame.size.width) {
        [NSBezierPath strokeLineFromPoint:NSMakePoint(x, 0.0f) toPoint:NSMakePoint(x, self.frame.size.height)];
        x += 50.0f;
    }
} 
```

![绘制网格](../Images/25acc4d78b2a0569544e1793ad5be09c.png)

当我向右滚动视图时一切正常，但是当我向左滚动视图时我看到奇怪的线条。

![在此处输入图像描述](../Images/535c17fd3900c14becafc83a2c05193c.png)

我认为这是一个缓存的图像缓冲区或其他东西，但我不明白为什么会发生这种情况，因为我填充了一个覆盖整个帧的矩形。

是什么导致了这个问题？我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T11:07:37.957

我知道这是一个老问题，但我刚刚遇到了同样的问题，我设法解决了它。

该`drawRect`方法有一个参数， a `(CGRect) dirtyRect`。我的错误是我使用了dirtyRect 来检查要绘制的边界，就像在iOS 上一样。但我发现这个 CGRect 被称为“脏”是有原因的。它指定操作系统希望您重绘的区域。这有时不是 NSView 的整个框架，而是它的一部分。这使您可以制作真正快速优化的代码，并且不会绘制超出其必须绘制的内容。

我的解决方案是忽略`dirtyRect`，而只是简单地`self.bounds`用于绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T03:23:45.143

基本上，您是在旧内容之上绘制的。所以，本质上，你需要以某种方式清除它。

一种方法是

```
[[NSColor clearColor] set];
NSRectFill(_bounds); 
```

你可能想要更精确的东西。

# node.js - nodejs - cassandra-client 错误：所有连接都不健康

> ID：11523567
> 
> 赞同：2
> 
> 时间：2012-07-17T13:29:03.203
> 
> 标签：node.js, amazon-ec2, cassandra

当我尝试使用 cassandra-client 从 cassandra 检索/更新数据时，我不断收到此错误。

```
{ [Error: All connections are unhealthy.]
  connectionInfo:
   { host: 'localhost',
     port: 9160,
     keyspace: 'keyspace1',
     user: undefined,
     pass: undefined,
     use_bigints: false,
     timeout: 4000,
     log_time: false,
     staleThreshold: 10000 } } 
```

不知道这个错误是什么意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:22:48.523

该错误表明您的客户端无法连接到 localhost 端口 9160 上的指定服务器。

由于这是本地主机，您很可能排除任何防火墙问题。

你可以做什么

**1.检查您的服务器是否正在运行**

这应该向您显示一个或多个进程（您刚刚执行的 grep 进程除外

```
ps aux | grep "cassandra" 
```

**2.验证端口**

```
# telnet localhost 9160
Trying 127.0.0.1...
telnet: connect to address 127.0.0.1: Connection refused 
```

不好..这表明您的配置可能有问题。就我而言，我根本没有监听端口 9160 的 cassandra 服务器（根本没有运行）

**3\. 检查您的日志文件**

默认情况下，casandra 写入文件夹`/var/log/cassandra/` 如果服务器有任何问题，您很可能会在其中获得更多信息，甚至可能显示与您的 nodejs 客户端相关的问题

**4\. 尝试另一个客户端进行调试**

```
http://wiki.apache.org/cassandra/GettingStarted#Step_4:_Using_cassandra-cli 
```

# c++ - 如何避免 int 变量的字符输入？

> ID：11523569
> 
> 赞同：10
> 
> 时间：2012-07-17T13:29:05.780
> 
> 标签：c++, integer, character, cin

下面的程序显示了一个正在输入和同时输出的“int”值。但是，当我输入一个字符时，它会进入一个无限循环，显示之前输入的“int”值。如何避免输入字符？

```
#include<iostream>
using namespace std;

int main(){
int n;

while(n!=0){
            cin>>n;
            cout<<n<<endl;
           }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T13:30:39.177

**无限循环的原因：**

cin 进入失败状态，这使得它忽略对它的进一步调用，直到错误标志和缓冲区被重置。

```
cin.clear();
cin.ignore(100, '\n'); //100 --> asks cin to discard 100 characters from the input stream. 
```

**检查输入是否为数字：**

在您的代码中，即使是非 int 类型也会被强制转换为 int 。没有办法检查输入是否为数字，除非将输入输入到 char 数组中，并`isdigit()`在每个数字上调用函数。

函数[isdigit()](http://www.cplusplus.com/reference/clibrary/cctype/isdigit/)可用于区分数字和字母。此功能存在于`<cctype>`标题中。

is_int() 函数看起来像这样。

```
for(int i=0; char[i]!='\0';i++){
    if(!isdigit(str[i]))
    return false;
}
return true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-23T03:38:16.917

您需要检查 cin 失败

和

您需要清除输入流

请参阅以下示例。它在最近的编译器中进行了测试

```
#include <iostream>
using namespace std;

void ignoreLine()
{
    cin.clear();
    cin.ignore();
}

int main(int argc, char const* argv[])
{
    int num;
    cout << "please enter a integer" << endl;
    cin >> num;

    while (cin.fail()) {
        ignoreLine();
        cout << "please enter a integer" << endl;
        cin >> num;
    }

    cout << "entered num is - " << num << endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-23T20:02:10.683

```
#include <iostream>
#include <climits> // for INT_MAX limits
using namespace std;
int main()
{
    int num;
    cout << "Enter a number.\n";
    cin >> num;
    // input validation
    while (cin.fail())
    {
        cin.clear(); // clear input buffer to restore cin to a usable state
        cin.ignore(INT_MAX, '\n'); // ignore last input
        cout << "You can only enter numbers.\n";
        cout << "Enter a number.\n";
        cin >> num;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T13:35:29.517

如果您想使用用户定义功能，您可以使用 ascii/ansi 值来限制字符输入。

48 -57 是 0 到 9 值的范围

# routing - MVC4 Web API 忽略参数

> ID：11523575
> 
> 赞同：0
> 
> 时间：2012-07-17T13:29:31.820
> 
> 标签：routing, asp.net-mvc-4, asp.net-web-api

尝试在 Visual Studio 2010 中使用 MVC RC4 Web API 建立一个新站点，但它似乎不起作用：参数值永远不会传递给该方法。

据我所知，我已经按照此处所述完成了所有操作：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

路线配置：

```
 routes.Clear();
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapHttpRoute(
      name: "DefaultApi",
      routeTemplate: "api/{controller}/{action}/{id}",
      defaults: new { 
           id = RouteParameter.Optional 
      }
  ); 
```

下面是常规的 MVC 路线，我也尝试过完全删除它以查看是否存在冲突，但没有任何区别。

```
 routes.MapRoute(
      name: "Default",
      url: "{controller}/{action}/{id}",
      defaults: new { 
          controller = "Home", 
          action = "Index", 
          id = UrlParameter.Optional 
      }
  ); 
```

测试控制器：

```
 public class TestController : ApiController
  {
        [HttpGet]
        public int Double(int value)
        {
            return value * 2;
        }
  } 
```

网址： `http://localhost:1505/api/test/double/4`

```
The parameters dictionary contains a null entry for parameter 'value' of 
non-nullable type 'System.Int32' for method 'Int32 Double(Int32)' in
'MyAppName.Controllers.TestController'. An optional parameter must be a
reference type, a nullable type, or be declared as an optional parameter. 
```

啊。这很简单，不是吗？但似乎没有任何结果导致参数被映射。我也试过了

```
http://localhost:1505/api/test/double?id=4 
```

没有不同。如果我让参数接受空值，例如

```
public int Double(int? value) 
```

它运行，但`value`始终为空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:37:06.157

在您的路线中，您拥有`{id}`但在您的行动中`value`，MVC 按名称匹配“事物”（路线值、查询字符串值等）。

所以名称应该对齐：

因此，将您的路由更改为：

```
routes.MapHttpRoute(
      name: "DefaultApi",
      routeTemplate: "api/{controller}/{action}/{value}",
      defaults: new { 
           value= RouteParameter.Optional 
      }
  ); 
```

它将与 URL 一起使用：`http://localhost:1505/api/test/double/4`

注意：如果您离开，`value` `RouteParameter.Optional`您需要将操作签名中的类型更改为`int?`.

或者您可以更改您的操作方法签名：

```
 [HttpGet]
    public int Double(int id)
    {
        return id * 2;
    } 
```

或者您可以保留它，只使用以下 URL：

`http://localhost:1505/api/test/double?value=4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-24T14:42:16.707

当我没有在 web api 中为我的控制器和操作方法定义属性**[RoutePrefix("")]**和**[Route("")]时，这种情况发生在我身上。添加这些后，它对我来说非常有效。**

# jquery - 动画图像的css给出不同的结果

> ID：11523578
> 
> 赞同：2
> 
> 时间：2012-07-17T13:29:43.520
> 
> 标签：jquery, css

我有一个菜单和一个小栏，后面跟着`<a>`我悬停在菜单中的标签。

小条是一个图像，我正在使用 jQuery animate 函数对其 CSS 进行动画处理。

我的问题是当我使用不同的浏览器或不同的分辨率时，我的小条位置有点不同。

我需要那个酒吧总是完美契合。

[我的小提琴](http://www.jsfiddle.net/EVa8u/5)的问题是我使用图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:54:12.177

您不必为每个项目[重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，而是可以为所有项目编写一个函数：

```
$("#smallMenu a").mouseover(function(){
    var $this = $(this),
        os = $this.offset();
    $("#smallBar").clearQueue().animate({
        left: os.left,
        top: os.top + $this.height(),
        width: $this.width()
    });
}); 
```

[**小提琴**](http://jsfiddle.net/EVa8u/10/)

这会将栏设置在`left`悬停链接的相同位置 - `os.left`- 并且就在悬停链接本身的下方 - `os.top + $this.height()`- 具有相同的链接宽度 - `$this.width()`，与其在页面中的位置或大小无关。您可以根据需要调整它（您也可以添加或获取位置和宽度的像素）。

# asp.net - 如何从 jqgrid 中的 dataurl 获取行 ID 或参数以创建动态选择列表以编辑行

> ID：11523579
> 
> 赞同：3
> 
> 时间：2012-07-17T13:29:50.557
> 
> 标签：asp.net, jquery, jqgrid

我有一个带有使用 Jqgrid 的 C# 后端的 ASP.NET 网站。

我希望用户能够在网格中选择一个项目进行编辑。可以编辑的字段之一将作为下拉选择列表呈现给用户，其中只有该用户的有效选项。

例如，假设我有一个显示人员的网格。如果“person1”被编辑，用户可以从该项目的选择列表中选择“blue”或“red”，但如果“person2”被编辑，用户只能从该项目的选择列表中选择“yellow”或“green”选择列表。

我想根据选择的人/行动态填充选择列表。

我在特定字段上设置了editoptions和dataurl，如下所示：

```
editoptions: { dataUrl: 'FetchData.aspx' } 
```

然而，我不知何故需要某种参数来传递给 FetchData.aspx 页面，以便它可以对特定的人进行背景检查并为特定的“人”创建正确的列表。

我希望我可以通过 rowid 或 itemname 或以下内容来识别所选的特定行/项目：

```
editoptions: { dataUrl: 'FetchData.aspx?selecteditem=' + Id } 
```

如何传递参数以便为特定项目创建正确的项目列表？网上有无数类似的问题，但一直没能找到一个确凿的答案……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:09:43.707

我通过添加以下 onSelectRow 函数解决了这个问题（请注意，下面代码中的 'Id' 表示我要作为参数传递的列的名称。它可以是网格中的任何列名）：

```
onSelectRow: function (id) {
  var temp = $("#list").getRowData(id)['Id']
  $("#list").setColProp('mySelectListColumnName', { editoptions: { dataUrl:'FetchData.aspx?selecteditem=' + temp });
} 
```

以上有助于传递参数。但是，仅此一项是不够的——它允许 FetchData.aspx 接收参数并相应地自定义 html 响应，但它只从 dataUrl 中获取一次值——所以当我选择不同的行时它不会刷新。

为了解决这个问题，我还添加了以下语句：

```
jQuery.extend(jQuery.jgrid.edit, { recreateForm: true }); 
```

这样可以确保每次单击编辑时都会重新创建编辑表单，这是我想要的，因为每一行的编辑表单都会略有不同。完美运行。希望这对那里的人有所帮助-那里有很多选择，这是我见过的最简单的。它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T20:45:18.857

将此添加到您的默认值：

```
jQuery.extend(jQuery.jgrid.edit, { recreateForm: true }); 
```

这对你的网格参数：

```
ajaxSelectOptions: {
    data: {
        selecteditem: function() { return $('#list').jqGrid('getGridParam', 'selrow'); } }
} 
```

# java - 用 Java 将数据发送到打印机

> ID：11523583
> 
> 赞同：3
> 
> 时间：2012-07-17T13:29:59.757
> 
> 标签：java, printing, postscript

然而，下面的代码将数据发送到打印机，当它到达打印机队列时，它会返回一个`Unable to convert PostScript file.`我认为这可以通过指定风味来克服，但事实并非如此

```
import javax.print.Doc;
import javax.print.DocFlavor;
import javax.print.DocPrintJob;
import javax.print.PrintException;
import javax.print.PrintService;
import javax.print.PrintServiceLookup;
import javax.print.SimpleDoc;
import javax.print.attribute.PrintServiceAttribute;
import javax.print.attribute.standard.PrinterName;

public class New1 {

   public static void main(String[] args) {

       try {

           String s = "Hello";

          // byte[] by = s.getBytes();
           DocFlavor flavor = DocFlavor.STRING.TEXT_PLAIN;
           PrintService pservice = PrintServiceLookup.lookupDefaultPrintService();
           DocPrintJob job = pservice.createPrintJob();
           Doc doc = new SimpleDoc(s, flavor, null);
           job.print(doc, null);

       } catch (PrintException e) {
           e.printStackTrace();
       }      
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T01:13:19.000

仅使用 JPS，Mac 会出现问题。我的建议是使用 Java 2 Print API + Java Print Service。

Java 2 Print API 有点像 1990 年的风格。为避免使用 Java 2 Print API 创建代码，您可以使用 PDFBox [http://pdfbox.apache.org](http://pdfbox.apache.org)作为框架。

使用 PDFBox，您可以创建一个 PDF 文档（[http://pdfbox.apache.org/1.8/cookbook/documentcreation.html](http://pdfbox.apache.org/1.8/cookbook/documentcreation.html)），但不是保存，而是使用该代码打印它：

```
PrinterJob printJob = PrinterJob.getPrinterJob();
PrintService service = PrintServiceLookup.lookupDefaultPrintService(); 
printJob.setPrintService(service);      
document.silentPrint(printJob); 
```

它在我的 Mac 上运行良好。

# c# - 使用 .Net 客户端强制自定义命名空间

> ID：11523584
> 
> 赞同：0
> 
> 时间：2012-07-17T13:30:01.713
> 
> 标签：c#, soap, namespaces, client

我们的网络服务只接受带有命名空间的调用

```
<soapenv:Envelop>... 
```

.Net 客户端自动生成

```
<soap:Envelop> ... 
```

您如何强制客户端生成“soapenv”而不是“soap”？

# .net - AttachConsole() 显示管道上的数据，但 > 运算符未正确重定向到文件

> ID：11523595
> 
> 赞同：9
> 
> 时间：2012-07-17T13:30:33.163
> 
> 标签：.net, winapi, console, pipe

我制作了一个在 .NET Framework 4.0 上运行的 WinForms 应用程序。`Console.WriteLine()`在调用（一次，在启动时）Win32 API 函数之后，它使用该方法在父控制台上写入`AttachConsole(-1)`。

只要我只需要在屏幕上显示输出，它就可以完美地工作。不幸的是，当我像这样使用带有管道重定向运算符的批处理时：

```
application.exe > output.txt 
```

它只是创建一个空文件。也许有一些与我使用时正在处理的实际管道相关的问题`AttachConsole`？为什么命令提示符捕捉不到数据并放到文件中？有谁知道与这种情况相关的任何问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T15:46:08.693

`Console.Out`被懒惰地初始化。第一次引用它时，运行时调用`GetStdHandle(STD_OUTPUT_HANDLE)`以获取标准输出句柄。如果此调用发生在对您的调用之前，则`AttachConsole`获取文件的句柄以进行重定向。如果之后发生此调用，您将获得控制台输出句柄。

下面的类修复了标准输出和错误句柄。如果您从控制台启动应用程序，您会注意到在下一个提示之后会出现任何输出。您可以使用`start /wait`.

```
using System;
using System.Runtime.InteropServices;

namespace SomeProject
{
    class GuiRedirect
    {
        [DllImport("kernel32.dll", SetLastError = true)]
        private static extern bool AttachConsole(int dwProcessId);
        [DllImport("kernel32.dll", SetLastError = true)]
        private static extern IntPtr GetStdHandle(StandardHandle nStdHandle);
        [DllImport("kernel32.dll", SetLastError = true)]
        private static extern bool SetStdHandle(StandardHandle nStdHandle, IntPtr handle);
        [DllImport("kernel32.dll", SetLastError = true)]
        private static extern FileType GetFileType(IntPtr handle);

        private enum StandardHandle : uint
        {
            Input = unchecked((uint)-10),
            Output = unchecked((uint)-11),
            Error = unchecked((uint)-12)
        }

        private enum FileType : uint
        {
            Unknown = 0x0000,
            Disk = 0x0001,
            Char = 0x0002,
            Pipe = 0x0003
        }

        private static bool IsRedirected(IntPtr handle)
        {
            FileType fileType = GetFileType(handle);

            return (fileType == FileType.Disk) || (fileType == FileType.Pipe);
        }

        public static void Redirect()
        {
            if (IsRedirected(GetStdHandle(StandardHandle.Output)))
            {
                var initialiseOut = Console.Out;
            }

            bool errorRedirected = IsRedirected(GetStdHandle(StandardHandle.Error));
            if (errorRedirected)
            {
                var initialiseError = Console.Error;
            }

            AttachConsole(-1);

            if (!errorRedirected)
                SetStdHandle(StandardHandle.Error, GetStdHandle(StandardHandle.Output));
        }
    }
} 
```

# python - 我如何告诉 PyCharm/IDEA 实例或类变量应该是什么类型？

> ID：11523597
> 
> 赞同：4
> 
> 时间：2012-07-17T13:30:35.730
> 
> 标签：python, intellij-idea, pycharm

> **可能重复：**
> [我如何告诉 PyCharm 参数应该是什么类型？](https://stackoverflow.com/questions/6318814/how-can-i-tell-pycharm-what-type-a-parameter-is-expected-to-be)

我发现在 IntelliJ IDEA（和 PyCharm）中编码 Python，您可以使用 Epytext 或 reStructuredText 来记录预期的参数类型和返回类型。这些可以根据需要提供，以帮助 IDE 提供自动完成功能并改进其检查错误检查。

我不太清楚的是如何为实例变量和类变量指定类型注释。有没有办法以 IntelliJ 识别的方式做到这一点？

例如，假设 IntelliJ 无法推断 的返回类型`some_function()`，并且该函数位于我们无法添加`@rtype`注释的库中。如何提供`self.bar`实例变量的类型？

```
class Foo:
    def __init__(self):
        # How can I document that self.bar is of type Bar?
        self.bar = some_function() 
```

**编辑：**

终于找到了记录实例变量类型的正确语法。在变量赋值之后直接放置一个文档字符串。

```
class Foo:
    def __init__(self):
        self.bar = some_function()
        """@type: Bar""" 
```

需要注意的两件事是 IntelliJ/PyCharm[似乎只理解变量 docstring format](http://youtrack.jetbrains.com/issue/PY-7004)。注释文档字符串格式或在类文档字符串中指定类型不起作用。

此外，[似乎存在一个错误](http://youtrack.jetbrains.com/issue/PY-7003)，变量文档字符串不适用于双下划线前缀变量。

# objective-c - 如何从 UIImagePickerControllerReferenceURL 获取 UIImage

> ID：11523599
> 
> 赞同：1
> 
> 时间：2012-07-17T13:30:39.793
> 
> 标签：objective-c, ios, cocoa

我正在努力弄清楚如何从 UIImagePickerControllerReferenceURL 获取图像（我知道我可以直接从中获取它，`UIImagePickerControllerOriginalImage`但我有理由不想这样做）。这就是我所拥有的

```
/* 
 *   Responds when an image is selected (from browsing)
 */
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{        
        UIImage *image = [self obtainImageAtURLPath:[info objectForKey:UIImagePickerControllerReferenceURL]];
        if(!image) return;
        //...more code here
}
- (UIImage *) obtainImageAtURLPath:(NSURL *) urlPath
{
    UIImage *image = [UIImage imageWithContentsOfFile:[urlPath path]];
    return image;
} 
```

但是，当我这样做时，我总是得到`nil`而不是我的形象。urlPath 存在；但是，它不想转换为 UIImage。请帮忙。

如果我打印出来，`NSLog(@"%@", urlPath)`我会得到`assets-library://asset/asset.JPG?id=53784678-BD17-4EE4-9A96-601B81012AFE&ext=JPG`

如果我打印出来，`NSLog(@"%@", [urlPath path])`我会得到`/asset.JPG`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:42:51.790

我在这里回答了一个类似的问题：[所选图像的名称 xcode](https://stackoverflow.com/a/13512415/1548523)。您应该使用`ALAssetsLibrary`那种`urlPath`.

# google-apps-script - 将附件从 Gmail 导入 Google 站点时出错

> ID：11523600
> 
> 赞同：0
> 
> 时间：2012-07-17T13:30:45.357
> 
> 标签：google-apps-script

我正在尝试使用 Google Apps 脚本将我的大邮件从 Gmail 移动到 Google 站点。该脚本运行没有问题，但是当附件大小超过 10Mo 时发生错误：

**“服务器错误，请稍后再试……”**

```
var att = ms[m].getAttachments();
for (var a=0; a<att.length; a++){
tab[3][m][5][a] = att[a].copyBlob();
    ...
}
...
var atttach = post.addHostedAttachment(tab[3][i][5][b]);
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:37:33.410

似乎它们是 Apps 脚本中的 blob 大小限制为 10 MB。可能是导致错误的原因。检查 Evin Levey 所说的 Issue Tracker 中的讨论

> 我们正在努力提高一些严格的内部限制……现在应该是 5MB，很快就会有 10MB。

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=552](http://code.google.com/p/google-apps-script-issues/issues/detail?id=552)

# blackberry - 使用 Multiple KeyPress 调用 Blackberry 应用程序

> ID：11523612
> 
> 赞同：3
> 
> 时间：2012-07-17T13:31:27.483
> 
> 标签：blackberry

我有一个简单的问题陈述，当在黑莓设备中按下多个键时调用我的应用程序。

例如，我有一个“Capture It”应用程序，它使用组合键截取屏幕截图。我们如何实现这样的实现。有什么方法可以处理全局按键事件处理，例如我们如何调用`PhoneListener`来电处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:55:31.103

正如理查德[在这个堆栈溢出答案中](https://stackoverflow.com/a/4664283/119114)所说，您不能`KeyListener`从后台实现 a，因为这将是一个巨大的安全风险。然后应用程序可以记录您的击键，并窃取您的密码。

我没有 CaptureIt，但在我看来它有两种工作方式：

*   首先，它添加了一个 BlackBerry 菜单选项来启动它。这与允许应用程序从**任何**组合键开始完全不同。[绝对支持](https://stackoverflow.com/a/9238140/119114)该技术（将您的应用程序添加到 BB 菜单中）。

*   看起来很多人将 CaptureIt 设置为在按下设备的**便捷键**时运行。这是一个特殊的键，您可以通过**Options** -> **Screen / Keyboard 对它进行**[编程以启动设备上的任何应用程序](http://docs.blackberry.com/en/smartphone_users/deliverables/1487/Assign_an_app_to_a_Convenience_key_29489_11.jsp)。

 ****但是，我认为你不能**完全按照**你的要求去做。****

# .net - 模糊调用方法“Round(a: System.Double): System.Double ; Round(d: System.Decimal): System.Decimal”

> ID：11523618
> 
> 赞同：1
> 
> 时间：2012-07-17T13:31:43.780
> 
> 标签：.net, rounding, type-conversion, delphi-prism, oxygene

我对为什么调用 Math.Round 方法会引发“歧义调用”编译器错误感到有些困惑。

这是我的违规代码：

```
Math.Round((2000-((Splots[x].RawMin/4095)*2000))+200); 
```

RawMin 是 Int32 数据类型。

我想，Round 方法应该返回 Int32 值类型。

任何提示或线索将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:35:45.727

查看 的重载列表[`Math.Round`](http://msdn.microsoft.com/en-us/library/as4h66hd)。有两种方法采用单个参数：

```
double Round(double d)
decimal Round(decimal d) 
```

两者都在使用`int`参数调用时适用 - 但是当您只有一个`int`开始时调用该方法是没有意义的，因为它已经四舍五入了。

我怀疑你*实际上*想改变你做算术的方式，例如通过在`double`算术中执行除法运算，然后传播到其他操作：

```
// Note the 4095.0 to make it a double
Math.Round((2000-((Splots[x].RawMin/4095.0)*2000))+200); 
```

没有它，*所有*的操作都使用整数算术，这几乎肯定不是你想要的。

您仍然需要将结果转换为`int`。的范围`double`超过了`int`和的范围`long`，这就是返回类型为的`Math.Round(double)`原因`double`。在这种情况下，您“知道”结果将在适当的范围内，但给定计算。

# asp.net-mvc - 大记录时的 ASP.Net MVC 控制器路由

> ID：11523623
> 
> 赞同：0
> 
> 时间：2012-07-17T13:31:52.147
> 
> 标签：asp.net-mvc

在我的应用程序中，我有一个显示记录列表的页面，每条记录都有一个链接可以单击以获取该记录的更多详细信息。它转到另一个控制器。让我讲一个顺序。从“ToDoListSelect”控制器转到“ToDoList”，单击 ToDoList 中的链接后转到“Info”控制器。在我的开发机器上一切正常，数据库与服务器上的相同。现在，我将包放在服务器上，如果页面上的记录少于 500 条左右，它就可以正常工作。如果有更多记录，那么来自 ToDoList 它不会转到 Info 但会引发异常，我看到它会转到 ToDoListSelect 这很奇怪。我不知道从哪里开始寻找问题。有什么建议么？任何需要的细节都告诉我。

以下是我的应用程序中的路线：

```
public static void RegisterRoutes(RouteCollection routes) 
{ 
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}"); 
    routes.MapRoute( "Default", // Route name 
        "{controller}/{action}/{id}", // URL with parameters 
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults 
    ); 
} 

protected void Application_Start() 
{ 
    AreaRegistration.RegisterAllAreas(); 
    RegisterGlobalFilters(GlobalFilters.Filters); 
    RegisterRoutes(RouteTable.Routes); 
} 
```

抛出的错误是：

“/”应用程序中的服务器错误。由于对象的当前状态，该操作无效。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关此错误的更多信息，查看并确定错误源自代码的位置。

异常详细信息：System.InvalidOperationException：由于对象的当前状态，操作无效。

源错误：

在执行当前 Web 请求期间，产生了一个未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

```
[InvalidOperationException: Der Vorgang ist aufgrund des aktuellen Zustands des Objekts ungültig.]
   System.Web.HttpRequest.FillInFormCollection() +11485999
   System.Web.HttpRequest.get_Form() +157
   Microsoft.Web.Infrastructure.DynamicValidationHelper.<>c__DisplayClass12.<ReplaceCollection>b__e() +63
   Microsoft.Web.Infrastructure.DynamicValidationHelper.<>c__DisplayClass12.<ReplaceCollection>b__11() +20
   Microsoft.Web.Infrastructure.DynamicValidationHelper.DeferredCountArrayList.get_Count() +20
   System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, RequestValidationSource requestCollection) +34
   System.Web.HttpRequest.get_Form() +212
   System.Web.Mvc.FormValueProvider..ctor(ControllerContext controllerContext, IUnvalidatedRequestValues unvalidatedValues) +55
   System.Web.Mvc.FormValueProviderFactory.GetValueProvider(ControllerContext controllerContext) +61
   System.Web.Mvc.<>c__DisplayClassc.<GetValueProvider>b__7(ValueProviderFactory factory) +28
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +238
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +148
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +472
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +80
   System.Web.Mvc.ValueProviderFactoryCollection.GetValueProvider(ControllerContext controllerContext) +347
   System.Web.Mvc.ControllerBase.get_ValueProvider() +46
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +80
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +153
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +691
   System.Web.Mvc.Controller.ExecuteCore() +162
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +305
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +62
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +20
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:05:44.790

弄清楚了！谢谢谷歌先生！ [http://geekswithblogs.net/renso/archive/2012/01/19/operation-is-not-valid-due-to-the-current-state-of.aspx](http://geekswithblogs.net/renso/archive/2012/01/19/operation-is-not-valid-due-to-the-current-state-of.aspx)

将更改放在 web.config 中，它工作正常。

# mysql - MYSQL如何计算按类型分组的元素

> ID：11523624
> 
> 赞同：0
> 
> 时间：2012-07-17T13:31:52.703
> 
> 标签：mysql, count, group-by

我有一个查询问题：我有一个商店列表，每个商店都有会员，并且有各种会员类别（青铜，白银，黄金......）

这些表是：'shops'、'members'、'membership_cards'。

```
shops: id, name
members: id, shops_id, membership_id, first_name, last_name
membership_cards: id, description 
```

我需要提取按每个商店的成员资格分组的成员数。我可以在不使用服务器端语言的情况下做到这一点吗？

最终结果应该是这样的：

商店名称，n°bronze 会员，n°silver_members，n°gold_members ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:37:59.280

在不知道您的数据库架构的情况下，回答这个问题有点困难，但类似下面的内容应该可以完成这项工作：

```
SELECT      shop.name,
            SUM(CASE WHEN membership_cards.category = 'Bronze' THEN 1 ELSE 0 END) AS Bronze,
            SUM(CASE WHEN membership_cards.category = 'Silver'THEN 1 ELSE 0 END) AS Silver,
            SUM(CASE WHEN membership_cards.category = 'Gold' THEN 1 ELSE 0 END) AS Gold
FROM        shops
INNER JOIN  members
ON          shop.id = members.shopid
INNER JOIN  membership_cards 
ON          members.id = membership_cards.memberid
GROUP BY    shop.name 
```

只需将列名更改为您正在使用的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:38:37.227

根据您提供的内容，您需要如下查询：

```
select shopid,
       sum(case when c.cardtype = 'Bronze' then 1 else 0 end) as Bronze,
       sum(case when c.cardtype = 'Silver' then 1 else 0 end) as Silver,
       sum(case when c.cardtype = 'Gold' then 1 else 0 end) as Gold
from shops s left outer join
     members m
     on s.shopid = m.shopid left outer join
     cards c
     on c.memberid = m.memberid
group by shopid 
```

如果您想知道成员的数量，而不是每个组中的卡片数量（如果成员可以拥有多张卡片），请将 sum() 表达式替换为：

```
count(case when c.cardtype = 'Bronze' then m.memberid end) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:46:01.853

```
SELECT B.name,A.Bronze,A.Silver,A.Gold    
FROM
(
    SELECT S.id,
        SUM(IF(IFNULL(C.cardtype,'')='Bronze',1,0)) Bronze,
        SUM(IF(IFNULL(C.cardtype,'')='Silver',1,0)) Silver,
        SUM(IF(IFNULL(C.cardtype,'')='Gold'  ,1,0)) Gold
    FROM shops S
    LEFT JOIN members M ON S.id = M.shops_id
    LEFT JOIN membership_cards C ON M.membership_id = C.id
    GROUP BY S.id
) A
INNER JOIN shops B USING (id); 
```

我使用[**IFNULL**](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_ifnull)函数以防任何成员没有卡

# sql - 根据表 -1 中的值连接表 2 中的列值

> ID：11523625
> 
> 赞同：0
> 
> 时间：2012-07-17T13:31:53.397
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [通过唯一标识符组合查询结果的行？](https://stackoverflow.com/questions/9472986/combining-rows-of-queried-results-by-unique-identifier)

我在 Sql Server 2008 中有两个表，如下所示

表格1

```
 DealNum            DealVresion            Value

        1000                   1                 100
        1000                   2                 200
        1000                   3                 150  
        1000                   4                 130
        1001                   2                  70
        1003                   5                 160
        1003                   0                 120 
```

表 2

```
 DealNum            DealVersion              Name 

     1000                    1                   John
     1000                    1                   Bob
     1000                    2                   John
     1000                    2                   Merle
     1000                    3                   Bob
     1000                    3                   Bob
     1000                    5                   Bob
     1001                    2                   Smith
     1001                    2                   stone
     1002                    8                   Andrew
     1003                    5                   Smith
     1003                    0                   Martin
     1003                    0                   Narine 
```

现在我想要基于这两个表的左连接

```
 (T1.Dealnum= T2.Dealnum) and (T1.Deal Version = T2.Deal Version) 
```

我希望将 Table2 中的名称连接起来，这样它就不会在 DealNum 中显示任何重复项。

结果要求：

```
 DeaLNum           Deal Version          Value          Name

          1000                  1                 100           Jhon,Bob
          1000                  2                 200           John,Merle
          1000                  3                 150           Bob
          1000                  4                 130           NULL
          1001                  2                 70            Smith,Stone                  
          1003                  0                 120           Martin,Narine
          1003                  5                 160           Smith 
```

它必须连接 DealNum 和版本的名称列。如果相同的 dealNum 和 Version 具有相同的名称，则无需连接（例如：1000 - 3）

提前谢谢哈利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:55:43.277

您可以通过创建用户定义的函数来做到这一点，不知道是否可以在单个 select 语句中完成：

```
 create function getNameList(@dealnum int, @dealversion int) returns nvarchar(max)
    begin
    declare @name varchar(max)

    select  @name = coalesce(@name + ', ','') + name
    from    (select distinct name from table2 where dealnum = @dealnum and dealversion = @dealversion) t1

    return @name
    end 
```

然后：

```
 select  distinct
            t1.dealNum,
            t1.dealVersion,
            t1.value,
            dbo.getNameList(t1.dealNum, t1.dealversion)
    from    table1 t1 join table2 t2 on t1.dealnum = t2.dealnum and t1.dealversion = t2.dealversion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:11:06.477

尝试这个：

```
 with cte as (
  select distinct T1.DealNum [T1_DealNum],T1.DealVresion [T1_DealVresion],
 T1.Value [T1_Value],
  T2.DealNum [T2_DealNum],T2.DealVresion [T2_DealVresion],T2.Name [T2_Name]
  from Table1 T1 left outer join Table2 T2
  on (T1.Dealnum= T2.Dealnum) and (T1.DealVresion = T2.DealVresion)
  )
  select [T1_DealNum],[T1_DealVresion],[Name]=  

  STUFF((SELECT ', ' + [T2_Name]
       FROM cte b 
       WHERE a.[T1_DealNum]= b.[T2_DealNum]
       and a.[T1_DealVresion] = b.[T2_DealVresion]
      FOR XML PATH('')), 1, 2, '')
FROM cte a
GROUP BY [T1_DealNum],[T1_DealVresion]
order by [T1_DealNum],[T1_DealVresion] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:56:42.920

```
;WITH y AS
(
  SELECT DealNum, DealVersion, Name = STUFF((SELECT ',' + y2.Name
    FROM dbo.Table2 AS y2 
    WHERE y2.DealNum = y.DealNum AND y2.DealVersion = y.DealVersion
    GROUP BY y2.Name
    FOR XML PATH(''), 
    TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, '') 
  FROM dbo.Table2 AS y
)
SELECT x.DealNum, x.DealVersion, x.Value, y.Name
FROM dbo.Table1 AS x 
LEFT OUTER JOIN y 
ON x.DealNum = y.DealNum
AND x.DealVersion = y.DealVersion
GROUP BY x.DealNum, x.DealVersion, x.Value, y.Name; 
```

# c# - 将 CommandBinding 绑定到其他命令

> ID：11523626
> 
> 赞同：0
> 
> 时间：2012-07-17T13:31:55.217
> 
> 标签：c#, .net, wpf

我有自定义命令 ViewModel.DeleteItems。ViewModel 用作 DataGrid 的 DataContext。DeleteItems 绑定到上下文菜单并且工作正常。

我想通过键盘“Del”调用这个命令。我可以用

```
<CommandBinding Command="ApplicationCommands.Delete" ... /> 
```

但我想将 ApplicationCOMmands.Delete 命令绑定到我的命令而不使用硬编码（我不想订阅 CommandBinding.Executed 并手动运行 DeleteItems）。如何仅将应用程序命令绑定到我的自定义命令到数据网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:57:22.050

当按下“Del”键时，您应该能够使用 KeyBinding 来触发您的命令，例如：

```
<DataGrid.InputBindings>
    <KeyBinding Key="Del" Command="{Binding DeleteItems}" />
</DataGrid.InputBindings> 
```

您无需对 ApplicationCommands.Delete 执行任何操作即可获得此行为。

# c# - 在 OData 中公开单个实体 GET 操作

> ID：11523628
> 
> 赞同：1
> 
> 时间：2012-07-17T13:32:00.103
> 
> 标签：c#, wcf-data-services, odata

这个问题可能是由于我对微软的 OData 实现了解有限。

使用 C#“反射数据提供程序”，我试图支持诸如 之类的 URL `http://localhost/Users(2)`，但我不知道如何。

我有`http://localhost/Users`工作，目前只是返回所有可用的用户。它被实现为子类的`public IQueryable<User> Users`属性`IUpdatable`。

我看到很多 OData 客户端示例都使用括号语法。如何在 C# 中提供此服务？或者，如果此语法不起作用，使用 WCF、OData 和反射数据提供程序获取*单个实体的推荐方法是什么？*

注意：我们的 OData API 根本不直接映射到关系数据库，因此“仅”使用 Entity Framework 提供程序并神奇地免费获取所有内容不是一种选择。

# html - wordpress 登录表单

> ID：11523630
> 
> 赞同：-3
> 
> 时间：2012-07-17T13:32:06.437
> 
> 标签：html, wordpress

我终于进入了 wordpress，我对它的工作原理有点困惑。

有人可以给我一个如何只允许用户登录/注册的例子吗？

（这个问题具体来说我更感兴趣的是不要出现在控制面板上）

例如，一个非常简单的表单可以在主页上登录，而无需被迫进入该 wordpress 登录屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:36:11.647

签出，[彼得斯登录重定向](http://wordpress.org/extend/plugins/peters-login-redirect/)

这使您可以登录并将您发送回您想要的任何页面

![彼得斯登录重定向选项](../Images/247da1f8dfb3256573f48086abdec6f5.png)

这个插件与[侧边栏登录](http://wordpress.org/extend/plugins/sidebar-login/)一起工作得很好

![在此处输入图像描述](../Images/87ac317015ae963711c3a4afe3602194.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:37:07.670

### 登录：

有一个[侧边栏登录插件](https://wordpress.org/extend/plugins/sidebar-login/)，其中包含一个可以添加到侧边栏的小部件。

![在此处输入图像描述](../Images/63d18bcc54477f961560f9b22c6c85ff.png)

> Sidebar-Login 有一个小部件和一个模板标签，允许您在 wordpress 驱动的博客的侧边栏中有一个登录表单。
> 
> 它允许用户登录，然后将他们重定向回他们登录的页面而不是后端，它还显示错误消息。

# javascript - 将分号置于 asi 模式中的括号前

> ID：11523633
> 
> 赞同：0
> 
> 时间：2012-07-17T13:32:25.080
> 
> 标签：javascript, jshint, automatic-semicolon-insertion

我正在使用 JSHint 对我的 JavaScript 进行 linting，并启用了此选项

```
"asi": true,
"white": true 
```

避免在我的代码中使用分号。

但是我必须用括号开始我的新行，所以我必须在那个开始之前放一个分号

```
;(function () {

}) 
```

JSHint 给我两个错误：

*   *';' 后缺少空格*
*   如果我在 ';' 后面加一个空格 我得到：*预期 '(' 有不同的标识*

我注意到这样 JSHint 很高兴

```
;
(function () {

}) 
```

但我认为不是一个好的解决方案。

有没有办法在不关闭 JSHint 或*white*选项的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:57:04.767

JSHint 中的 legacy`white: true`选项用于强制执行[Douglas Crockford](https://en.wikipedia.org/wiki/Douglas_Crockford)在其原始[JSLint](https://en.wikipedia.org/wiki/JSLint)工具中提倡的编码风格。无分号的 JavaScript 代码不适合他的编码风格。如果您不想受限于他的风格指南，请不要使用`white: true`.

[这个 JSHint 选项列表](http://www.jshint.com/options/)没有显示任何参数来自定义它们强制执行的编码样式。

为了证明这个问题没有答案，我去 JSHint 源码中找到了相关的检查：

```
function nonadjacent(left, right) {
    if (option.white) {
        left = left || token;
        right = right || nexttoken;
        if (left.line === right.line && left.character === right.from) {
            left.from += (left.character - left.from);
            warning("Missing space after '{a}'.",
                    left, left.value);
        }
    }
} 
```

检查的唯一配置选项是`option.white`，因此很遗憾，没有任何方法可以实现您想要的行为。如果你真的想要一个工具来做你想做的事，你可以很容易地 fork [JSHint](https://github.com/jshint/jshint/)，添加另一个选项，然后在`nonadjacent`函数中检查它。

# vim - vim 选项卡中的短目录，例如 a/b/c/Filename.txt

> ID：11523634
> 
> 赞同：1
> 
> 时间：2012-07-17T13:32:30.783
> 
> 标签：vim

vim 中有一个**guitablabel**选项，它允许修改选项卡标题。但我想把它改成一些宏，这会给我这样的标题：

```
a/b/c/Filename.txt 
```

其中目录被替换为单个字符。或者任何类似的东西也可以。你有任何片段或插件提示吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:04:35.627

你可以做类似的事情

`:set guitablabel=%{substitute(expand('%:p'),'/\\zs\\(.\\)[^/]*\\ze/','\\1','g')}`

这将`:help guitablabel`选项设置为将文件 /path/to/file.txt 显示为 /p/t/file.txt。它使用表达式评估`%{ }`（记录在 下`:help statusline`）来评估替换（`:help substitute()`）与模式。

# python - Python中的背包（什么？）

> ID：11523637
> 
> 赞同：3
> 
> 时间：2012-07-17T13:32:53.873
> 
> 标签：python, algorithm, genetic-algorithm

我很抱歉标题；坦率地说，我什至不知道我的问题是否与背包问题有关。正在阅读一些有关遗传算法的东西，并发现了这个“背包问题”。

我需要有人把我踢向正确的方向：

我正在为工厂开发一个 python web 应用程序。所以在工厂里，他们有一种叫做订单的东西。一个订单包含一个或多个产品。有一个不匹配的概念，它实际上是一个负数，用于表示特定产品在订单中出现的数量（数量方面）要少多少。

想象一个矩阵，其中列是产品，行是订单。假设所有订单（行）包含所有产品（列）。同样，有 8 个订单订单 1 到订单 8 和 5 个产品，产品 1 到产品 5。

**假设，现在我的产品 1 有 6 个不匹配。我需要在所有 8 个订单中随机**分配数字 6 。所以很明显2个订单不会有不匹配的数量。然后，产品 2 的不匹配数量为 9。我将不匹配数量尽可能平均地**随机**分配到 8 个订单中。这适用于每个产品。现在问题来了，虽然我正在将不匹配随机拆分到所有订单中，但我需要确保每个订单的总不匹配（即该行的含义）保持在最低限度。这意味着订单中的总不匹配数必须是尽可能低的数字。

```
 |-----|-----|-----|-----|-----|
    |  P1 |  P2 |  P3 |  P4 |  P5 |
    -------------------------------
O1  |  2  |  1  |  1  |  0  |  2  |  6
    -------------------------------
O2  |  1  |  2  |  1  |  1  |  1  |  6
    -------------------------------
O3  |  2  |  2  |  1  |  0  |  1  |  6
    -------------------------------
O4  |  1  |  2  |  0  |  1  |  1  |  5
    -------------------------------
       6     7     3     2     5 
```

你明白吗？我需要用 Python 编写代码，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:46:51.110

你几乎有一个整数线性规划问题，除了你想要最小化的目标函数（行总和的最大值）不是线性的。寻找`scipy`解决优化问题。

该线程[https://scicomp.stackexchange.com/questions/83/is-there-a-high-quality-nonlinear-programming-solver-for-python](https://scicomp.stackexchange.com/questions/83/is-there-a-high-quality-nonlinear-programming-solver-for-python)也可能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:26:30.323

所以OP的问题有两个要求：**随机**和**均匀**。不过这有点矛盾，所以我想“真正随机”是不可能的。

这是我的尝试

使用 OP 的示例，我们有 4 个订单和 5 个产品。从第一个产品开始，我们随机拆分数字，所以每个产品至少会有 floor(6/4)=1 不匹配。然后我们将剩余的 2 个不匹配项随机放入 2 个产品中。

```
 |-----|
    |  P1 |
    -------
O1  |  2  | 2
    -------
O2  |  1  | 1
    -------
O3  |  2  | 2
    -------
O4  |  1  | 1
    -------
       6 
```

接下来，我们处理第二个产品。同样，我们首先随机拆分数字，因此每个产品至少会有 floor(7/4)=1 不匹配。现在对于剩下的 3 个错配，为了使其尽可能**均匀**，我们首先将它们分配给 O2 和 O4，因为上次他们比其他人少 1 个错配。对于剩下的 1 个不匹配，我们再次将其随机分配给其中一个产品。

```
 |-----|-----|
    |  P1 |  P2 |
    -------------
O1  |  2  |  1  | 3
    -------------
O2  |  1  |  2  | 3
    -------------
O3  |  2  |  2  | 4
    -------------
O4  |  1  |  2  | 3
    -------------
       6     7 
```

对所有产品重复此过程。

使用这种方式，你可以保证它尽可能的**均匀**（最大的区别是1），你也得到了一定程度的**随机性**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T20:09:35.693

假设你这样做：

您有一系列物品要放入订单中，该序列由第一个产品的项目组成，然后是第二个产品的项目，等等。

您将第一个项目放入第一个订单，将第二个项目放入第二个订单，依此类推，在某个点再次环绕到第一个订单，一轮又一轮，直到您没有更多的项目。

那行得通吗？

# c# - 将 DLL 嵌入到控制台应用程序中

> ID：11523641
> 
> 赞同：5
> 
> 时间：2012-07-17T13:33:00.150
> 
> 标签：c#, .net

> **可能重复：**
> [在编译的可执行文件中嵌入 DLL](https://stackoverflow.com/questions/189549/embedding-dlls-in-a-compiled-executable)

是否可以将 DLL 嵌入到控制台应用程序中 如果可以，人们将如何去做？

通常，我很乐意将 DLL 留在外面，但有几个工作人员问过我这个问题，我真的不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:37:07.490

如果库也是 .NET，则可以使用 ILMerge。

[http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge](http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge)

**编辑（学习后是本机代码）**

在此处查看重复的问题： [如何将 C++ windows dll 合并到 C# 应用程序 exe 中？](https://stackoverflow.com/questions/72264/how-can-a-c-windows-dll-be-merged-into-a-c-sharp-application-exe)

或者

[将非托管 dll 嵌入托管 C# dll](https://stackoverflow.com/questions/666799/embedding-unmanaged-dll-into-a-managed-c-sharp-dll/11038376#11038376)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:39:43.440

您可以使用Redgate 的[SmartAssembly](http://www.red-gate.com/products/dotnet-development/smartassembly/)，因为这可以完成您想要的。我们使用这个工具来做到这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T13:37:23.507

您可以将 ILMerge 用于 .NET 程序集。它不适用于本机代码。

> ILMerge 是一个用于将多个 .NET 程序集合并到一个 .NET 程序集的实用程序。它适用于可执行文件和 DLL，并带有几个用于控制输出处理和格式的选项。有关详细信息，请参阅随附的文档。

在此处下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=17630](http://www.microsoft.com/en-us/download/details.aspx?id=17630)

# html - 如何使 extjs 按钮中的图标居中？

> ID：11523646
> 
> 赞同：5
> 
> 时间：2012-07-17T13:33:17.077
> 
> 标签：html, css, extjs

我有一个简单的按钮，但我不能让图标居中。

```
{
    xtype: 'button',
    width: 150,
    height: 150,
    cls: 'startbutton'
} 
```

CSS：

```
.startbutton { 
    background-image: url(Camera.png) !important;
} 
```

此图像为 72x72 像素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:35:43.120

我认为，您需要[**背景位置**](https://developer.mozilla.org/en/CSS/background-position)：

```
.startbutton { 
    background-position: center center;
    background-image: url(Camera.png) !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:50:44.650

您是否有理由不使用标准的东西：

```
icon: '',
iconAlign: 'center' 
```

# maven - 执行“mvn site”命令时出现“生成页面时出错”的构建错误

> ID：11523649
> 
> 赞同：1
> 
> 时间：2012-07-17T13:33:23.733
> 
> 标签：maven

在执行“mvn site”命令时，我将构建错误作为“页面生成期间的错误”。如果有人以前遇到过此错误，请告诉我如何解决此问题。

当我从 POM 中删除以下插件详细信息时，我没有收到此错误。

```
<groupId>org.apache.maven.plugins</groupId>

<artifactId>maven-javadoc-plugin</artifactId>

<version>2.7</version>

<configuration>

 <charset>UTF-8</charset>

 <docencoding>UTF-8</docencoding>

 <docfilessubdirs>true</docfilessubdirs>

 <links>

  <link>http://java.sun.com/j2se/1.5.0/docs/api/</link>

 </links>

 <source>1.5</source>

 <show>protected</show>

</configuration> 
```

以下是我得到的输出。

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error during page generation

Embedded error: Error rendering Maven report: Exit code: 1 - java.lang.IllegalArgumentException
at sun.net.www.ParseUtil.decode(ParseUtil.java:189)
at sun.misc.URLClassPath$FileLoader.<init>(URLClassPath.java:958)
at sun.misc.URLClassPath$3.run(URLClassPath.java:328)
at java.security.AccessController.doPrivileged(Native Method)
at sun.misc.URLClassPath.getLoader(URLClassPath.java:322)
at sun.misc.URLClassPath.getLoader(URLClassPath.java:299)
at sun.misc.URLClassPath.findResource(URLClassPath.java:145)
at java.net.URLClassLoader$2.run(URLClassLoader.java:385)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findResource(URLClassLoader.java:382)
at java.lang.ClassLoader.getResource(ClassLoader.java:1002)
at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1192)
at javax.xml.parsers.SecuritySupport$4.run(SecuritySupport.java:96)
at java.security.AccessController.doPrivileged(Native Method)
at javax.xml.parsers.SecuritySupport.getResourceAsStream(SecuritySupport.java:89)
at javax.xml.parsers.FactoryFinder.findJarServiceProvider(FactoryFinder.java:250)
at javax.xml.parsers.FactoryFinder.find(FactoryFinder.java:223)
at javax.xml.parsers.SAXParserFactory.newInstance(SAXParserFactory.java:128)
at com.sun.tools.doclets.internal.toolkit.builders.LayoutParser.parseXML(LayoutParser.java:72)
at com.sun.tools.doclets.internal.toolkit.builders.ClassBuilder.build(ClassBuilder.java:108)
at com.sun.tools.doclets.formats.html.HtmlDoclet.generateClassFiles(HtmlDoclet.java:155)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.generateClassFiles(AbstractDoclet.java:164)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:106)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:64)
at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:42)
at com.sun.tools.doclets.standard.Standard.start(Standard.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:269)
at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:143)
at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:340)
at com.sun.tools.javadoc.Start.begin(Start.java:128)
at com.sun.tools.javadoc.Main.execute(Main.java:41)
at com.sun.tools.javadoc.Main.main(Main.java:31)
com.sun.tools.doclets.internal.toolkit.util.DocletAbortException
at com.sun.tools.doclets.internal.toolkit.builders.LayoutParser.parseXML(LayoutParser.java:79)
at com.sun.tools.doclets.internal.toolkit.builders.ClassBuilder.build(ClassBuilder.java:108)
at com.sun.tools.doclets.formats.html.HtmlDoclet.generateClassFiles(HtmlDoclet.java:155)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.generateClassFiles(AbstractDoclet.java:164)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:106)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:64)
at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:42)
at com.sun.tools.doclets.standard.Standard.start(Standard.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:269)
at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:143)
at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:340)
at com.sun.tools.javadoc.Start.begin(Start.java:128)
at com.sun.tools.javadoc.Main.execute(Main.java:41)
at com.sun.tools.javadoc.Main.main(Main.java:31)
com.sun.tools.doclets.internal.toolkit.util.DocletAbortException
at com.sun.tools.doclets.formats.html.HtmlDoclet.generateClassFiles(HtmlDoclet.java:159)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.generateClassFiles(AbstractDoclet.java:164)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:106)
at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:64)
at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:42)
at com.sun.tools.doclets.standard.Standard.start(Standard.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:269)
at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:143)
at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:340)
at com.sun.tools.javadoc.Start.begin(Start.java:128)
at com.sun.tools.javadoc.Main.execute(Main.java:41)
at com.sun.tools.javadoc.Main.main(Main.java:31)

Command line was:"C:\Program Files\Java\jdk1.6.0_26\jre\..\bin\javadoc.exe" @options @packages
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3 minutes 43 seconds
[INFO] Finished at: Mon Jul 16 15:09:01 IST 2012
[INFO] Final Memory: 67M/170M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-06T09:21:32.200

我有同样的错误并通过删除 CLASSPATH 环境变量来解决它。看起来类路径条目在执行“jar”目标时会破坏 maven-javadoc-plugin。

# visual-studio-2010 - 我可以在 Visual Studio 2010 中格式化单元测试输出的样式吗？

> ID：11523650
> 
> 赞同：3
> 
> 时间：2012-07-17T13:33:27.243
> 
> 标签：visual-studio-2010, unit-testing, formatting

除了可读性和演示之外，这绝对没有任何目的，但是，我试图弄清楚是否可以在 Visual Studio 2010 中格式化我的单元测试的输出结果（通过`TestContext.WriteLine`、`Trace.WriteLine`、`Debug.WriteLine`、`Console.WriteLine`等...）？

为了给出任何理由，我基本上是在尝试使结果更易于阅读和友好。我使用空格几乎没有成功，因为报告中的字体不是等距的，而且我找不到在哪里更改它。我知道它至少会读取一些字符代码，因为它可以识别`\t`.

我最后的手段是输出 HTML 并将其保存到外部文件中，但如果可能的话，我真的很想将所有内容都保留在 Visual Studio 中。

谢谢！杰森

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T16:35:27.467

您可以使用 Console.Writeline 从您的单元测试中写入信息。它将出现在特定测试的结果窗口中。我没有太花哨，但 string.format 方法工作正常。

输出显示在默认的 Visual Studio 单元测试窗口以及 Resharper 的测试运行程序中。

# windows - VB Treeview 导致 vs32host.exe 停止工作

> ID：11523652
> 
> 赞同：0
> 
> 时间：2012-07-17T13:33:36.530
> 
> 标签：windows, vb.net, treeview

这个程序是一个用 VB 2008 编写的 Windows 窗体应用程序我有一个数据表 (dtSubFolders)，我通过它迭代以通过将其 NodesCollection 发送到递归子例程来填充树视图 (tv_Folder_Hierarchy)。正如底部的数据所证明的那样，NodesCollection 似乎正在正确填充。但是，当我展开根目录时，我看到它的 7 个子节点，然后我得到一个 vs32host.exe 已停止工作错误。

```
 For Each row In dtSubFolders.Rows
        m_folder_Node = New TreeNode
        Get_TV_Node(tv_Folder_Hierarchy.Nodes, row(1).ToString)

        If Len(m_folder_Node.Name) > 0 Then
            m_folder_Node.Nodes.Add(row(0).ToString, row(2))
        Else
            tv_Folder_Hierarchy.Nodes.Add(row(0).ToString, row(2))
        End If
    Next

Private Sub Get_TV_Node(ByRef Nodes As TreeNodeCollection, ByVal Name As String)

    Dim node As TreeNode

    If Len(m_folder_Node.Name) = 0 Then
        For Each node In Nodes
            If node.Name = Name Then
                m_folder_Node = node
                Exit For
            Else
                If node.Nodes.Count > 0 Then Get_TV_Node(node.Nodes, Name)
            End If
        Next
    End If
End Sub 
```

> ID Parent Kids Text
> 1811 None 7 根文件夹
> 1818 1811 40 Award Creation
> 1828 1818 0 Award Creation Sub 1
> 1819 1818 0 Award Creation Sub 2
> 1824 1818 0 Award Creation Sub 3
> 1839 1818 0 Award Creation Sub 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:08:44.550

PLICK - 问题在于（在）椅子和键盘之间。在我的匆忙中，我没有注意到 NodeMouseClick 事件中未捕获的错误代码。

呸！

# qt - QT中对象的并行执行

> ID：11523653
> 
> 赞同：0
> 
> 时间：2012-07-17T13:33:45.683
> 
> 标签：qt, parallel-processing, semaphore

我在 QT 中有一个程序，它创建大量对象来发出大量请求。这个数字可能非常大，碰巧有这个错误：

> GLib-ERROR **：为 GWakeup 创建管道：Trop de fichiers ouverts
> 
> Trop de fichiers ouverts = 打开的文件太多（法语）

我想通过创建一个 QSemaphore 来限制连接对象的数量（例如 10-20），在创建新对象之前获取一个对象并在销毁它时释放它。

实际上发生的情况是，当我尝试获取值为 0 的信号量时，程序会等待，甚至对象的代码也会停止运行，这导致永远不会释放信号量并导致无限循环。

为什么其他对象不继续执行？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:53:30.023

您通常会使用[线程池](http://doc.trolltech.com/main-snapshot/qthreadpool.html)，大量请求排队，但是当一个完成队列中的下一个开始时，只有一组请求同时运行（池中的线程数）

# opensocial - gadgets.window.adjustHeight() 错误地计算了小工具的高度

> ID：11523654
> 
> 赞同：0
> 
> 时间：2012-07-17T13:33:46.507
> 
> 标签：opensocial

我正在写一个开放的社交小工具。我的结构是这样的：

```
<div style="height:200px;overflow:auto;">
    <div id="dComment">Comments are loaded here.</div>
</div> 
```

我每秒更新“dComment”的内容，并且它的内容会滚动。在我的小工具中，我指定了`<Require feature="dynamic-height"/>` 当我使用`gadgets.windows.adjustHeight()`它时，它会计算内容的高度，无论我是否通过调整外部 div 的高度来隐藏它的某些部分。结果我看到我的内容下方有一个巨大的空白！我知道我可以为 adjustHeight 函数指定高度。但这意味着每次更新时我都必须自己计算小工具的高度，我不想这样做（如果可能的话）。

有人可以向我解释为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:21:18.277

而不是`visibility:hidden`使用`display:none`

# jquery - jQuery Mobile 休息表单元素

> ID：11523659
> 
> 赞同：0
> 
> 时间：2012-07-17T13:34:03.380
> 
> 标签：jquery, forms, mobile, jquery-mobile, reset

我正在使用 jQuery Mobile (v1.1.1) 创建智能手机应用程序，但我想要一个“重置”按钮来清除控制应用程序的表单。例如

```
<label for="list1">Select an option</label>
<select id="list1" name="list1" data-native-menu="false" multiple>
<option value="1">option 1</option>
<option value="2">option 2</option>
<option value="3">option 3</option>
<option value="4">option 4</option>
</select> 
```

我没有附上上面的标记

```
<form method="" action=""> ... </form> 
```

（这可能是 JQM 所期望的）因为我想在客户端上进行所有处理而不是将内容发送到服务器。我可以使用一些普通的 jQuery 读取选择的选项，例如：

```
var vals = [];
$('select option:checked').each(function() {vals.push($(this).attr('value'));}); 
```

但是如果我单击“重置”按钮，我无法弄清楚如何重置/清除所有上述选项。我试过了：

```
$('select option').attr('checked', 'unchecked'); 
```

但这不起作用。有谁知道 JQM 如何存储已选择的选项以及如何重置这些选项？

谢谢，斯图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:07:50.947

我用那个：

```
$('.ui-select a').find('.ui-btn-text').text('placeholder text')

$('.ui-selectmenu ul li[aria-selected="true"]')
    .attr('aria-selected', 'false')
    .removeClass('ui-btn-active'); 
```

也许会有所帮助。

**编辑：**

我还找到了其他解决方案：

```
 $('select option').removeAttr('selected');
    $('select').selectmenu('refresh', true); 
```

# ruby-on-rails - RoR 路线说明

> ID：11523661
> 
> 赞同：-1
> 
> 时间：2012-07-17T13:34:09.643
> 
> 标签：ruby-on-rails, ruby, routes

你能解释一下这些代码行的作用吗？

```
resources :posts, :pages do
      post 'preview', :on => :collection
    end

resources :undo_items do
      post 'undo', :on => :member
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:38:48.293

Ruby on Rails 的指南相当完整。我建议您阅读有关[Routing](http://guides.rubyonrails.org/routing.html#resources-on-the-web)的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:31:09.343

```
resources :posts, :pages do 
```

将为帖子和页面（`GET` `POST`/posts、`GET` `PUT` `DESTROY`/posts/1、`GET`/pages/1/edit 等）创建标准/默认 RESTful 路由。

```
 post 'preview', :on => :collection 
```

将添加额外的收集路线。`POST`/帖子/预览。如果它说`:on => :member`路由将是一个成员，并且看起来像这样`POST`/posts/1/preview。

这是一个快速指南，因此您可以随心所欲。但正如 Robert K 建议的那样，我也强烈建议您翻阅 Rails 指南。它们写得很好，很容易理解。

# html - 在 Tumblr 中定义每个标签的样式

> ID：11523662
> 
> 赞同：2
> 
> 时间：2012-07-17T13:34:18.543
> 
> 标签：html, css, tags, themes, tumblr

我想知道如何为特定标签定义特定样式。例如，如果我的帖子带有羊角面包或巧克力标签，我想让它们呈现某种风格。

我想知道我必须创建一个新课程，并且我知道我必须为这个新课程设置样式，但我不知道该怎么做。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:00:55.137

您需要`{TagsAsClasses}`在主题中使用。

例如，您需要为您的主题编写类似的内容：

```
<div id="{PostID}" class="post {PostType} {TagsAsClasses}">
  <!-- ... -->
</div> 
```

如果您的帖子是照片帖子并且具有Croissant 和Chocolate 标签，那么您的HTML 将变为：

```
<div id="post-26107509778" class="post photo Croissant Chocolate">
  <!-- ... -->
</div> 
```

然后您可以设置 .Croissant 或 .Chocolate 类的样式：

```
.Croissant {
  /* add your styles here */
}

.Chocolate {
  /* add your styles here */
} 
```

更多信息在这里[http://www.tumblr.com/docs/en/custom_themes](http://www.tumblr.com/docs/en/custom_themes)

# javascript - 图片已移除但仍在使用网络流量

> ID：11523666
> 
> 赞同：2
> 
> 时间：2012-07-17T13:34:32.110
> 
> 标签：javascript, jquery

我在这里遇到了一个奇怪的问题，我无法使用谷歌搜索找到任何有用的结果，所以我现在请求您的帮助。

我的 HTML+Javascript（主要是 jQuery）应用程序上有一个视频流。它是这样嵌入的：

```
<img width='300' id='videoFeedImg' src='http://IP:PORT/PAGE' /> 
```

这个页面实际上是一个实时更新的图片流。

效果很好！

但问题是，它仅在用户单击按钮时才需要显示的页面上使用。这没问题，我只是用 jQuery 中的 append() 函数创建了上面显示的这个图像。单击该按钮时，它会创建并显示在网络下的检查工具中（并且很容易在任务管理器 Nerworking 页面中看到），并且正在产生相当大的网络流量。

但无论我做什么，我都无法杀死这个流/带宽。我尝试： 1\. 用其他东西替换 src 2\. 删除图片 3\. 分离我附加的所有内容 4\. 在图像上使用各种 jQuery 函数，如 .stop() 和 .empty() 和 .html("") ; 在父级上。

唯一有效的是：

```
if (window.stop !== undefined) {
    window.stop();
}
else if (document.execCommand !== undefined) {
    document.execCommand("Stop", false);
} 
```

但这有点激烈（也许不是？？）

有人对如何阻止加载/下载有任何好的想法吗？

最好的问候 Bjarke

# ruby-on-rails - ActiveRecord 查询：字段不为真

> ID：11523667
> 
> 赞同：8
> 
> 时间：2012-07-17T13:34:34.747
> 
> 标签：ruby-on-rails, ruby, activerecord, arel

我想查找字段不正确的所有记录。用于此的 AR 语法是：

```
Dog.where(:stray => [false, nil]) 
```

是否有一种不那么冗长的方式来查询“不正确”？必须在任何地方都满足这种 mysql 细微差别真的很糟糕。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T13:44:15.380

命名范围怎么样？

`scope :not_stray, where("stray IS NULL OR stray = false")`

然后使用：

`Dog.not_stray`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T13:39:17.787

我觉得你可以写`Dog.where(Dog.arel_table[:stray].not_eq(true))`。

作为旁注，我建议您为`stray`数据库中的列设置一个默认值，或者至少需要一个值。这样你就不必做这个解决方法。

# charts - 可用于商业用途的免费闪存图表

> ID：11523668
> 
> 赞同：0
> 
> 时间：2012-07-17T13:34:38.483
> 
> 标签：charts

谁能给我提供可用于商业目的的免费闪存图表列表

用于商业用途的免费 Flash 图表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:35:56.120

您可以尝试查看[FusionCharts Free](http://www.fusioncharts.com/goodies/fusioncharts-free/)。

[许可模式](http://www.fusioncharts.com/goodies/fusioncharts-free/product-licensing/)允许它用于任何商业产品或个人用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:59:15.803

[http://amCharts.com](http://amCharts.com) - 他们有旧的 Flash 版本，可以免费使用。

# asp.net - 对象不可查询

> ID：11523673
> 
> 赞同：0
> 
> 时间：2012-07-17T13:34:57.350
> 
> 标签：asp.net, database, vb.net, linq

我有一个带有“作者”表的数据库“Pubs”。我通过拖动“作者”从数据库中创建了一个 dbml 文件。

这是“Default.aspx.vb”

```
Public Class _Default
    Inherits System.Web.UI.Page
    Dim author As Object
    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim db As New PubsContext
        Dim authors = From p In dbo.authors _
                       Select p

        GridView1.DataSource = author
        GridView1.DataBind()
    End Sub
End Class 
```

这是它的类：“Class1.vb”

```
Partial Public Class PubsContext
    Dim authors As Object
    Public Function GetProductsByCategory(ByVal id1 As Integer) As IEnumerable(Of authors)
        Return From p In Me.authors _
               Where p.au_id = id1 _
               Select p
    End Function
End Class 
```

错误代码：“'Object' 类型的表达式不可查询。确保您没有丢失 LINQ 的程序集引用和/或命名空间导入”。

在参考文献中已经有一个“System.Data.Linq”。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:38:27.147

好吧，这就是问题所在：

```
Dim authors As Object 
```

那只是一个对象。打电话等是什么*意思*？你在哪里给它一个价值？弄清楚类型应该*是*什么，确保你给它一个合适的值，你应该没问题。`Select``Where`

 *老实说，目前还不清楚你为什么要引入自己的`authors`领域——我希望生成的上下文具有`Authors`类型`Table<Author>`或类似的属性。

（我注意到您还试图设置`GridView1.DataSource`为，`author`而不是`authors`，顺便说一句...您为什么要这样做？您希望该`author`字段`_Default`具有什么价值？）*

# xml - XSLT 1.0 对过滤的 XML 数据进行排序

> ID：11523678
> 
> 赞同：1
> 
> 时间：2012-07-17T13:35:38.293
> 
> 标签：xml, xslt, sorting, xslt-1.0

好的，所以基于这个问题[XSLT 1.0 sort elements](https://stackoverflow.com/questions/11522925/xslt-1-0-sort-elements)我无法弄清楚为什么以下内容不起作用：

我有以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<viewentries>
    <viewentry>
        <entrydata name="Waste">
            <text>Bric-a-Brac</text>
        </entrydata>
        <entrydata name="Disposal">
            <text/>
        </entrydata>
    </viewentry>
    <viewentry>
        <entrydata name="Waste">
            <textlist>
                <text>Paper</text>
                <text>Glass</text>
            </textlist>
        </entrydata>
        <entrydata name="Disposal">
            <text/>
        </entrydata>
    </viewentry>
        <viewentry>
        <entrydata name="Waste">
            <textlist>
                <text>Paper</text>
                <text>Cans</text>
            </textlist>
        </entrydata>
        <entrydata name="Disposal">
                <text>Washing Machines</text>
                <text>Cars</text>
        </entrydata>
    </viewentry>
</viewentries> 
```

以及以下 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:key name="k1" match="entrydata[@name = 'Waste' or @name = 'Disposal']//text" use="concat(ancestor::entrydata/@name, '|', .)"/>

    <xsl:template match="viewentries">
        <categories>
            <xsl:apply-templates/>
        </categories>
    </xsl:template>

    <xsl:template match="viewentry">
        <xsl:apply-templates select="entrydata[@name =  'Waste' or @name = 'Disposal']//text
      [generate-id() = generate-id(key('k1', concat(ancestor::entrydata/@name, '|', .))[1])]">
            <xsl:sort select="."/>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="text[normalize-space() != '']">
        <category type="{ancestor::entrydata/@name}">
            <xsl:apply-templates/>
        </category>
    </xsl:template>

</xsl:stylesheet> 
```

这给出了以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<categories>
    <category type="Waste">Bric-a-Brac</category>
    <category type="Waste">Glass</category>
    <category type="Waste">Paper</category>
    <category type="Waste">Cans</category>
    <category type="Disposal">Cars</category>
    <category type="Disposal">Washing Machines</category>
</categories> 
```

我需要按排序顺序输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<categories>
    <category type="Waste">Bric-a-Brac</category>
    <category type="Waste">Cans</category>
    <category type="Disposal">Cars</category>
    <category type="Waste">Glass</category>
    <category type="Waste">Paper</category>
    <category type="Disposal">Washing Machines</category>
</categories> 
```

我究竟做错了什么 ？

**编辑：**

它似乎是根据 only 的第一个`<text>`值`<entrydata>`而不是所有`<text>`值进行排序的。

但是这个样式表工作正常：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:key name="k1" match="entrydata[@name = 'Waste' or @name = 'Disposal']//text" use="concat(ancestor::entrydata/@name, '|', .)"/>

    <xsl:template match="viewentries">
        <categories>
            <xsl:apply-templates select="viewentry/entrydata[@name =  'Waste' or @name = 'Disposal']//text
            [generate-id() = generate-id(key('k1', concat(ancestor::entrydata/@name, '|', .))[1])]">
                <xsl:sort select="."/>          
            </xsl:apply-templates>
        </categories>
    </xsl:template>

    <xsl:template match="text[normalize-space() != '']">
        <category type="{ancestor::entrydata/@name}">
            <xsl:value-of select="."/>
        </category>
    </xsl:template>

</xsl:stylesheet> 
```

有人可以解释为什么第一个示例不起作用但第二个示例起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:22:19.323

> 谁能解释为什么将排序应用于第一个模板有效，但是当将其应用于第二个模板时，就像我原来的问题一样，它没有？？？？

这是您的“第二个模板”：

```
<xsl:template match="text[normalize-space() != '']">
    <category type="{ancestor::entrydata/@name}">
        <xsl:apply-templates>
                <xsl:sort select="."/>            
        </xsl:apply-templates>
    </category>
</xsl:template> 
```

在这里，您要按字符串值对当前节点的子节点进行排序。

但是，在提供的 XML 文档中，任何`text`元素都有一个文本节点子节点——因此没有任何东西可以排序！

在这个问题和上一个问题中，你犯了同样的错误——试图对必须排序的元素的子元素进行排序——你排序太晚了。

**记住**：

```
 <xsl:apply-templates/> 
```

**是 的缩写**：

```
 <xsl:apply-templates select="child::node()"/> 
```

所以，这意味着：将模板应用到我的孩子”——而不是“将模板应用到我”。

**更新**：这是问题的正确解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kCatVal" match="text[text()]" use="concat(../@name, '+', .)"/>

 <xsl:template match="/">
  <categories>
   <xsl:apply-templates select=
    "//text[generate-id()
               =
                generate-id(key('kCatVal',
                                 concat(../@name, '+', .)
                                 )[1]
                            )
                ]">
          <xsl:sort/>
    </xsl:apply-templates>
  </categories>
 </xsl:template>

 <xsl:template match="text">
        <category type="{../@name}"><xsl:value-of select="."/></category>
  </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<viewentries>
    <viewentry>
        <entrydata name="Waste">
            <text>Bric-a-Brac</text>
        </entrydata>
        <entrydata name="Disposal">
            <text/>
        </entrydata>
    </viewentry>
    <viewentry>
        <entrydata name="Waste">
            <textlist>
                <text>Paper</text>
                <text>Glass</text>
            </textlist>
        </entrydata>
        <entrydata name="Disposal">
            <text/>
        </entrydata>
    </viewentry>
    <viewentry>
        <entrydata name="Waste">
            <textlist>
                <text>Paper</text>
                <text>Cans</text>
            </textlist>
        </entrydata>
        <entrydata name="Disposal">
            <text>Washing Machines</text>
            <text>Cars</text>
        </entrydata>
    </viewentry>
</viewentries> 
```

**产生了想要的正确结果**：

```
<categories>
   <category type="Waste">Bric-a-Brac</category>
   <category type="">Cans</category>
   <category type="Disposal">Cars</category>
   <category type="">Glass</category>
   <category type="">Paper</category>
   <category type="Disposal">Washing Machines</category>
</categories> 
```

**说明**：

这种分组需要基于具有两部分的复合键进行索引。因此，`use`属性 of`xsl:key`被指定为这两个部分的连接，由一个我们知道不能出现在它们的任何值中的字符连接在一起（当第一个关键组件的值是值的前缀时避免误报第二个关键组成部分）。

# ruby-on-rails - 如何从 application.css Rails 中排除路径

> ID：11523679
> 
> 赞同：0
> 
> 时间：2012-07-17T13:35:38.527
> 
> 标签：ruby-on-rails, twitter-bootstrap

这是我的树

```
stylesheets/
admin/
    admin.scss
    bootstrap_and_overrides.css.less
application.css.scss
categoria.css.scss
categories.css.scss
comments.css.scss
groups.css.scss
home.css.scss
ie.css.scss
images.css.scss
images.js.coffee
specs.css.scss 
```

1 - >是否有可能（在application.css中）不加载bootstrap_and_overrides.css.less？

我的问题是..

我的应用程序有两种布局，其中一种称为管理员，我想仅在此布局中加载引导程序，而不是所有应用程序..

每个人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:47:30.063

您可以在 application.css.scss 中单独添加所有文件，无需 bootstrap_and_overrides，如下所示：

```
/**
 * application-print.css
 *
 *= require categoria
 *= require categories
 ...
 */ 
```

并单独包含 bootstrap_and_overrides

您可以将文件放在目录中并使用`require_tree ./normal/`

# python - 如何从美丽汤中的锚标签中提取href链接

> ID：11523684
> 
> 赞同：2
> 
> 时间：2012-07-17T13:35:58.263
> 
> 标签：python, url, beautifulsoup, href, urllib2

> **可能重复：**
> [BeautifulSoup 获取 href](https://stackoverflow.com/questions/5815747/beautifulsoup-getting-href)

我正在使用漂亮的汤，下面是我的代码

```
import urllib2
data = urllib2.urlopen("some_url")
html_data = data.read()
soup = BeautifulSoup(html_data)
href_tags = soup.findAll('a') 
```

**结果：**

```
href_tags = 
[<a href="http://www.exampl.com/score_card" target="_blank" style="font-family:arial;color:#192e94;">Click Here</a>, 
<a href="https://example.icims.com/jobs/search?pr=5">what is this</a>,
<a href="https://example.com/search?pr=6">Cool</a>,
<a href="https://example.com/help/host/search?pr=7">Hello</a>] 
```

但实际上我想要所有锚标签中的href，我怎样才能提取href标签。

提前致谢.........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:42:03.877

尝试循环匹配：

```
import urllib2
data = urllib2.urlopen("some_url")
html_data = data.read()
soup = BeautifulSoup(html_data)

for a in soup.findAll('a',href=True):
    print a['href'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:43:27.513

从我的头顶上 -`href_tags = [tag['href'] for tag in soup.findAll('a', {'href': True})]`

确保有一个 href 属性，`{'href': True}`以便`tag.attr['href']`不会失败。

# isapi-rewrite - 在 ISAPI Rewrite 3 中访问 HTTP 标头

> ID：11523686
> 
> 赞同：0
> 
> 时间：2012-07-17T13:36:01.787
> 
> 标签：isapi-rewrite

有什么方法可以访问 ISAPI_Rewrite 模块中的 HTTP 标头吗？没有找到任何关于它的东西。我知道 IIS URL 重写允许您将标头作为服务器变量访问 - {HTTP_HEADER_NAME} - 这里有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:49:58.603

呃，没关系...

错过了文档中的一行：

> HTTP 标头值，语法为 %{HTTP:header}。

[http://www.helicontech.com/isapi_rewrite/doc/RewriteCond.htm](http://www.helicontech.com/isapi_rewrite/doc/RewriteCond.htm)

# django - 如何启动位于另一台机器上的 Django 服务器

> ID：11523689
> 
> 赞同：0
> 
> 时间：2012-07-17T13:36:35.577
> 
> 标签：django, ftp, webserver

对于业务问题，我已将本地服务器移至企业服务器进行一些测试，但我不知道如何通过本地启动/停止服务器，我猜它是通过 python runserver 启动的......但我不知道如何用另一台机器上分配的文件来做。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:07:15.920

您应该连接到远程机器，激活 virtualenv ， python manage.py runserver serverip:port 。就这样。还要检查您的端口是否被防火墙关闭。

# android - Android available memory in device at the time of downloading?

> ID：11523690
> 
> 赞同：0
> 
> 时间：2012-07-17T13:36:38.107
> 
> 标签：android

How to check the available memory in android when user is downloading the media into the sdCard

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:39:52.883

You can use the following to check the memory status:

```
ActivityManager actMgr = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
ActivityManager.MemoryInfo minfo = new ActivityManager.MemoryInfo();
actMgr.getMemoryInfo(minfo);
long mem = minfo.availMem; 
```

# coldfusion - 中缺少的属性

> ID：11523691
> 
> 赞同：0
> 
> 时间：2012-07-17T13:36:38.793
> 
> 标签：coldfusion

```
<cfparam name="attributes.mytestvalue" default="0">
<cfdump var="#attributes#">

<!---  Attributes are there. --->

<cfdocumentSection>
   <cfdocumentitem type="footer"> 
      <cfdump var="#attributes#">
   </cfdocumentitem type="footer"> 
</cfdocumentSection>

<!---  Attributes are not there. ---> 
```

为什么会这样？这是一个已知的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:16:51.747

根据 \WEB-INF\cftags\META-INF\taglib.cftld，cfdocumentsection 和 cfdocumentitem 本身是作为自定义标签实现的，因此可能有自己的属性范围，从而掩盖了您放入属性范围的值。

你可以试试这个：

```
<cfdocumentSection>
   <cfdocumentitem type="footer" mytestvalue="#attributes.myTestValue#> 
      <cfdump var="#attributes#">
   </cfdocumentitem type="footer"> 
</cfdocumentSection> 
```

或者也许是这样：

```
<cfset attribs={type="footer", myTestValue=0}>
<cfdocumentSection>
   <cfdocumentitem attributeCollection="#attribs#"> 
      <cfdump var="#attributes#">
   </cfdocumentitem> 
</cfdocumentSection> 
```

此外，虽然我认为这不是问题所在，但您在 cfdocumentItem 的结束标记上拥有 type="footer" 属性，这不是必需的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:25:10.270

```
<cfset request.myTestValue=attributes.myTestValue>

<cfdocumentSection>
   <cfdocumentitem type="footer" mytestvalue="#request.myTestValue#> 
      <cfdump var="#attributes#">
   </cfdocumentitem type="footer"> 
</cfdocumentSection> 
```

这修复了它但是现在我知道它为什么不起作用了。谢谢巴尼尔。

# arrays - 从Scala中的数组数组中过滤空数组

> ID：11523704
> 
> 赞同：6
> 
> 时间：2012-07-17T13:37:11.773
> 
> 标签：arrays, scala

我有一个 type 数组`String`，看起来像：

```
[[""],["lorem ipsum", "foo", "bar"], [""], ["foo"]] 
```

我想做的是过滤掉数组中所有本身是空数组的元素（在这种情况下，“空数组”是指只包含一个空字符串的数组），让我只和：

```
[["lorem ipsum", "foo", "bar"], ["foo"]] 
```

但是我正在努力寻找一种方法来做到这一点（对 Scala 来说还是新手） - 非常感谢任何帮助！

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T13:49:15.537

编辑（使用 Rogach 的简化）：

```
array.filterNot(_.forall(_.isEmpty)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:32:20.710

在您的描述中，您问如何

> 过滤掉数组中所有...仅包含空字符串的元素。

当前接受的答案会这样做，但也会过滤掉空数组和包含多个空字符串的数组（即不仅是`[""]`，而且`[]`等等`["", "", ""]`。（事实上，第一部分`x.isEmpty ||`是完全多余的。）如果你的数组是`xss`，你需要

```
xss.filter(_ != Array(""))  // does not work! 
```

这不起作用，因为`equals`Java 数组的方法[不像您预期​​的那样起作用](http://www.scala-lang.org/node/3487)。相反，在比较数组时，请使用`sameElements`或`deep`：

```
xss.filterNot(_ sameElements Seq(""))

xss.filter(_.deep != Seq("")) 
```

在 idomatic Sc​​ala 代码中，您使用`Array`的不多，所以这不会经常出现。更喜欢`Vector`或`List`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T17:48:28.263

在您的情况下，您可以使用：

```
array.filterNot(_.corresponds(Array("")){_ == _}) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-25T06:17:11.477

使用以下内容：

```
val a = Array(Array(), Array(), Array(3,1,2016), Array(1,2,3026))

a.filter(_.length>0) 
```

# c++ - C ++中的自动缩放数据类型？

> ID：11523705
> 
> 赞同：0
> 
> 时间：2012-07-17T13:37:13.147
> 
> 标签：c++

有没有办法在 C++ 中使用通用数据类型，自动缩放到使用的数字类型？如果需要存储所有数字，它只使用短整数，如果使用大数字，则更改为长整数，等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:44:02.650

If you are looking for speed, i don't recommend you a scalable variable usage in C++ but if you need flexibility instead of speed, here is your possible solution.

[http://gmplib.org/](http://gmplib.org/)

# c# - Telerik：radgrid-asp：模板列内的复选框：griditemcommand上复选框的事件更改

> ID：11523707
> 
> 赞同：0
> 
> 时间：2012-07-17T13:37:23.840
> 
> 标签：c#, telerik-grid

我在 C# 中使用 Telerik 网格。这是我的网格列代码。

```
 <telerik:GridTemplateColumn HeaderText="Active" UniqueName="Active">
                        <ItemTemplate>
                            <asp:CheckBox ID="chbActive" runat="server"></asp:CheckBox>
                        </ItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn HeaderText="Order" UniqueName="ORDER_FLAG">
                        <ItemTemplate>
                            <asp:CheckBox ID="chbORDER_FLAG" runat="server"></asp:CheckBox>
                        </ItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn HeaderText="Sell" UniqueName="SELL_FLAG">
                        <ItemTemplate>
                            <asp:CheckBox ID="chbSELL_FLAG" runat="server"></asp:CheckBox>
                        </ItemTemplate>
                    </telerik:GridTemplateColumn>
                    <telerik:GridTemplateColumn HeaderText="Auto GRN" UniqueName="Auto_GRN">
                        <ItemTemplate>
                            <asp:CheckBox ID="ChkAutoGrn" runat="server"></asp:CheckBox>
                        </ItemTemplate>
                    </telerik:GridTemplateColumn> 
```

现在在这种情况下，每当我选中“自动 GRN”复选框时，“订单”复选框应该在网格中自动取消选中，并且反向 senario 的条件相同。

我将如何实现这一目标..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:18:39.900

请查看下面的演示。

.aspx

```
<telerik:RadGrid ID="RadGrid3" runat="server" AutoGenerateColumns="false" OnNeedDataSource="RadGrid3_NeedDataSource"
        OnItemDataBound="RadGrid3_ItemDataBound">
        <MasterTableView>
            <Columns>
                <telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:CheckBox ID="Chk1" runat="server" />
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
                <telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:CheckBox ID="Chk2" runat="server" />
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
                <telerik:GridBoundColumn HeaderText="ID" DataField="ID" UniqueName="ID">
                </telerik:GridBoundColumn>

            </Columns>
        </MasterTableView>
    </telerik:RadGrid> 
```

.aspx.cs

```
protected void RadGrid3_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{

    dynamic data = new[] {
            new { ID = 1, Name ="Name1"},
            new { ID = 2, Name = "Name2"},
            new { ID = 3, Name = "Name3"}
        };
    RadGrid3.DataSource = data;

}
protected void RadGrid3_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        GridDataItem item = e.Item as GridDataItem;
        CheckBox Chk1 = item.FindControl("Chk1") as CheckBox;
        CheckBox Chk2 = item.FindControl("Chk2") as CheckBox;

        // default first check box will be checked
        Chk1.Checked = true;

        Chk1.Attributes.Add("onclick", "checkUncheckManage(this,'" + Chk2.ClientID+ "')");
        Chk2.Attributes.Add("onclick", "checkUncheckManage(this,'" + Chk1.ClientID + "')");
    }
} 
```

JS

```
 function checkUncheckManage(chkA, chkB) {
            var _chkB = document.getElementById(chkB);
            _chkB.checked = !chkA.checked;
        } 
```

# xml - xslt 中的条件检查

> ID：11523708
> 
> 赞同：1
> 
> 时间：2012-07-17T13:37:31.323
> 
> 标签：xml, xslt-1.0, xslt-2.0

我上一个问题的一点更新已经@Dimetre回答了

[关联](https://stackoverflow.com/questions/11499010/check-condition-in-xslt/11522766#comment15230160_11522766)

输入 XML

```
<tutorial>
<lessons>
   <lesson>
     chapter Bat 20 
</lesson>
    <lesson>
        chapter Pen Ball 10~ 
    </lesson>
    <lesson>
        chapter Book 
    </lesson>
    <lesson>
        note lesson
    </lesson>
 <lessons1>
    <lesson>
        chapter Pencil 10
    </lesson>
    <lesson>
        description page
    </lesson>
    <lesson>
        chapter Car Tank 25
    </lesson>
</lessons1>
</lessons> 
```

输出将是

```
<Geography>

<historical>
  <social>
     <toc1>
        <toc>
           <chapter>chapter</chapter>
           <unit>Bat</unit>
           <pages>20</pages>
        </toc>
        <toc>
           <chapter>chapter</chapter>
           <unit>Pen Ball</unit>
           <pages>10</pages>
        </toc>
        <toc>
           <chapter>chapter</chapter>
           <unit>Book</unit>
           <pages>10</pages>
        </toc>
        <sample>
           <original>note lesson</original>
        </sample>
     </toc1>
     <toc2>
        <toc>
           <chapter>chapter</chapter>
           <unit>Pencil</unit>
           <pages>10</pages>
        </toc>
        <sample>
           <original>description page</original>
        </sample>
        <toc>
           <chapter>chapter</chapter>
           <unit>Car Tank</unit>
           <pages>25</pages>
        </toc>
     </toc2>
  </social> 
```

在输入 XML 示例中，我实际上已经写了两节课（第 1 课，第 1 课），但实际上我有 n 节课。我想我要求更多，但我正在同时学习。

请帮助我并指导我

提前致谢

问候卡西克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:11:36.837

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
          xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
            <xsl:output omit-xml-declaration="yes" indent="yes"/>
            <xsl:strip-space elements="*"/>

         <xsl:template match="tutorial">
            <Geography>
              <historical>
                <social>
                     <xsl:apply-templates select=
                     "*[starts-with(name(),'lessons')]"/>
                </social>
              </historical>
            </Geography>
         </xsl:template>

         <xsl:template match="*[starts-with(name(), 'lessons')]">
          <xsl:variable name="vPos" select="position()"/>

          <xsl:element name="toc{$vPos}">
           <xsl:apply-templates/>
          </xsl:element>

         </xsl:template>

         <xsl:template match="lesson[starts-with(normalize-space(), 'chapter')]">
          <xsl:variable name="vNorm" select=
                         "translate(normalize-space(), '~', '')"/>
          <xsl:variable name="vAtUnit" select=
                         "substring-after($vNorm, 'chapter')"/>

          <xsl:variable name="vUnit" select=
          "replace($vAtUnit, '([^0123456789]+)(\d*)', '$1')"/>

          <xsl:variable name="vLastPart" as="xs:string" select=
           "substring-after($vAtUnit, $vUnit)"/>

          <xsl:variable name="vNum"
            select="concat($vLastPart, '10'[not($vLastPart)])"/>

          <toc>
            <chapter>chapter</chapter>
            <unit><xsl:value-of select="normalize-space($vUnit)"/></unit>
            <pages><xsl:value-of select="$vNum"/></pages>
          </toc>
         </xsl:template>

         <xsl:template match="lesson">
           <toc>
               <sample>
                 <original><xsl:value-of select="normalize-space()"/></original>
               </sample>
           </toc>
         </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（更正为没有`lessons1`嵌套在 中`lessons`）：

```
<tutorial>
    <lessons>
       <lesson>
         chapter Bat 20
       </lesson>
       <lesson>
            chapter Pen Ball 10~
       </lesson>
       <lesson>
            chapter Book
       </lesson>
       <lesson>
            note lesson
       </lesson>
    </lessons>
    <lessons1>
        <lesson>
            chapter Pencil 10
        </lesson>
        <lesson>
            description page
        </lesson>
        <lesson>
            chapter Car Tank 25
        </lesson>
    </lessons1>
</tutorial> 
```

**产生想要的正确结果**：

```
<Geography>
   <historical>
      <social>
         <toc1>
            <toc>
               <chapter>chapter</chapter>
               <unit>Bat</unit>
               <pages>20</pages>
            </toc>
            <toc>
               <chapter>chapter</chapter>
               <unit>Pen Ball</unit>
               <pages>10</pages>
            </toc>
            <toc>
               <chapter>chapter</chapter>
               <unit>Book</unit>
               <pages>10</pages>
            </toc>
            <toc>
               <sample>
                  <original>note lesson</original>
               </sample>
            </toc>
         </toc1>
         <toc2>
            <toc>
               <chapter>chapter</chapter>
               <unit>Pencil</unit>
               <pages>10</pages>
            </toc>
            <toc>
               <sample>
                  <original>description page</original>
               </sample>
            </toc>
            <toc>
               <chapter>chapter</chapter>
               <unit>Car Tank</unit>
               <pages>25</pages>
            </toc>
         </toc2>
      </social>
   </historical>
</Geography> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:17:11.193

这是您自己的 XML 格式吗？通过将课程编号放在课程元素中，您似乎在限制自己的数据（或删除结构）。如果您使用 XSL 来处理它，则每次添加新课程时，您都必须更新 xsl 以应对新类型，或者制作复杂的样式表来完成。取而代之的是，使用属性不是更好吗，所以对于您拥有的章节，而不是课程和课程1

```
 <lesson id='1'>
  ....
 </lesson>
 <lesson id='2'>
 ....
 </lesson> 
```

那么如果你有 1 节课或 50000 节课，你就不必更改代码，你可以使用 dimitre 为你写的修改版本

# publish-subscribe - 使用 EMMA 的 DDSPublisher.java 的代码覆盖率

> ID：11523711
> 
> 赞同：0
> 
> 时间：2012-07-17T13:37:49.717
> 
> 标签：publish-subscribe, data-distribution-service

我在 Linux 平台上工作，使用 Eclipse 作为 IDE 用 Ja​​va 实现 Opensplice DDS。主要类的发布者和订阅者正在执行。目前使用工具 EMMA 在代码覆盖部分工作。我已经使用 ant 脚本创建了构建文件并为 EMMA 创建了目标，目前面临如下问题，这是控制台内容：

```
[emmajava] # A fatal error has been detected by the Java Runtime Environment:
[emmajava] #
[emmajava] #  SIGSEGV (0xb) at pc=0x00f3a97a, pid=3580, tid=2472213360
[emmajava] #
[emmajava] # JRE version: 6.0_20-b20
[emmajava] # Java VM: OpenJDK Client VM (19.0-b06 mixed mode linux-x86 )
[emmajava] # Derivative: IcedTea6 1.9.1
[emmajava] # Distribution: Custom build (Wed Oct 13 22:53:35 UTC 2010)
[emmajava] # Problematic frame:
[emmajava] # V  [libjvm.so+0x20b97a]
[emmajava] #
   I would like to know how to use the Opensplice DDS with EMMA coverage? 
```

我是否应该更改任何配置？最后是否可以在 DDS 实现中进行代码覆盖？如果其他人知道这个问题，请指导我继续。

提前致谢

# web-applications - 当“选择”没有改变时做一些事情

> ID：11523712
> 
> 赞同：0
> 
> 时间：2012-07-17T13:37:52.943
> 
> 标签：web-applications, onchange

我有一个带有一些选项的选择标签和一个“在更改时”触发的功能。当用户单击选择列表但没有更改任何内容时，有没有办法触发另一个功能？比如“没有变化”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:42:14.627

好吧，您可以将您的功能添加到“onClick”或“onFocus”属性并检查用户是否没有更改任何内容，它应该可以解决问题。

# iis - 使用 IIS 特定 URI 的 Visual Studio Web 开发

> ID：11523718
> 
> 赞同：0
> 
> 时间：2012-07-17T13:38:00.733
> 
> 标签：iis, uri, hosts-file

我正在使用带有 Web 开发工具的 Visual Studio 2010。我有一个 ASP.net Web 应用程序，并在项目设置下使用“本地 IIS 网络服务器”和项目 URL“http://localhost/test.mywebapp.com”。这最终出现在“默认网站”下的 IIS 中。

现在，当我在 Visual Studio 中运行我的 web 项目时，它会打开一个浏览器，其 uri 类似于“http://localhost/test.mywebapp.com/index.aspx”——到目前为止一切都很好。

现在我需要从另一个应用程序访问这个页面。作为一个简单的测试，假设我想在我的浏览器中打开一个选项卡“test.mywebapp.com/index.aspx”并使其到达调试器中运行的页面。我在 win32/etc/hosts 文件中添加了一个条目“127.0.0.1 test.mywebapp.com”。现在我在浏览器中打开 URI，但我登陆的是“默认”IIS7 页面，而不是我的网页。

我尝试将“默认网站”的绑定添加到 test.mywebapp.com”，但随后它在 test.mywebapp.com/test.mywebapp.com/index.html 下打开 - 也不正确......

我显然错过了将我的 URI 映射到正确网站的一些步骤，但我不知道它是如何被调用的，也不知道谷歌是为了什么......

有任何想法吗？

# c++ - 我是否必须在函数实现中重复内联关键字

> ID：11523719
> 
> 赞同：6
> 
> 时间：2012-07-17T13:38:02.793
> 
> 标签：c++, inlining

我总是尝试将实现保持在标题之外，因此对于模板和内联函数，我通常会做这样的事情

* * *

```
// File.h
inline bool foo()

#include "File.hpp" 
```

* * *

```
// File.hpp

inline bool foo()
{
    return 1;
} 
```

我的问题是，对于函数的实际实现重复 inline 关键字，C++ 规范有什么要说的？（如本例所示）

我真的不想这样做，因为它有很多很多函数，虽然我的编译器没有抱怨，但我想知道编译器是否仍然接受内联提示。

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:51:13.823

我倾向于`inline`尽可能远离接口，因为它是实现细节而不是接口的一部分。`inline`因此：在声明中省略第一个。并且只将它附加到函数定义中。对于包含 hpp 编译器范围与内联无关，因为文件被视为连接。有关更详细的说明，另请参见[http://www.parashift.com/c++-faq/where-to-put-inline-keyword.html](http://www.parashift.com/c++-faq/where-to-put-inline-keyword.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T13:39:56.110

没关系，但是放入`inline`源文件*就更没有*提示了，因为其他翻译单元通常看不到源文件。如果您在标头之外实现该函数，编译器可能无论如何都无法内联它。

在我看来，唯一的实际用途`inline`是防止在头文件中定义多个函数。

# c++ - 无法从 python C 扩展停止 python 回调

> ID：11523721
> 
> 赞同：0
> 
> 时间：2012-07-17T13:38:03.027
> 
> 标签：c++, python, c, callback

我正在尝试将 C++ 相机帧采集库包装到 Python 中。我的回调函数有问题。我使用以下代码从 C 函数调用 python 函数：

```
PyGILState_STATE gstate;
gstate = PyGILState_Ensure();
result = PyObject_CallObject(my_callback, arglist);
if(result == NULL){
    caller.stopLive();
}
Py_DECREF(result);
Py_DECREF(arglist);
PyGILState_Release(gstate); 
```

回调工作正常。当我尝试使用相机库函数停止回调时，就会出现问题。如果python回调函数很短，相机库函数可以停止回调，但如果python回调函数时间较长，相机库函数无法停止回调，程序冻结。

有没有人遇到过类似的问题？你对尝试什么有什么建议吗？

编辑：停止回调的代码是：

```
static PyObject * stopcallback(PyObject *self, PyObject *args)
{
    if(grabber->isListenerRegistered(pListener)){
        grabber->removeListener(pListener);
        while(grabber->isListenerRegistered(pListener)){
            Sleep(0);
        }
        delete pListener;
        printf("Callback stopped\n");
        Py_RETURN_NONE;
    }
} 
```

我从 Python 调用这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:50:54.050

你说“如果python回调函数很短，相机库函数能够停止回调”。

我想知道库在运行（或挂起？）时是否无法删除回调。

如果回调很短，则有一段时间没有运行（或未挂起），因此库可以将其删除，但如果回调很长，则实际上所有的回调都在运行（或挂起）时间，所以图书馆没有机会删除它。

# iphone - 将音频和视频类型与 iPhone 应用程序关联

> ID：11523723
> 
> 赞同：1
> 
> 时间：2012-07-17T13:38:13.247
> 
> 标签：iphone, ios5

我正在尝试使用长按>在“我的应用程序”中打开来制作一个将从邮件应用程序接收媒体文件的应用程序

我无法将我想要的文件类型与我的应用程序关联起来。我正在使用[统一类型标识符参考](https://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1)

这就是我的 info.plist 的样子：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>mp3</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>MP3 Audio</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.mp3</string>
        </array>
        <key>LSTypeIsPackage</key>
        <false/>
    </dict>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>avi</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>AVI movie</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.avi</string>
            <string>video/x-msvideo</string>
        </array>
        <key>LSTypeIsPackage</key>
        <false/>
    </dict>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>3gp</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>3GPP movie</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.3gpp</string>
            <string>application/octet-stream</string>
        </array>
        <key>LSTypeIsPackage</key>
        <false/>
    </dict>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>mpg4</string>
            <string>mp4</string>
            <string>m4v</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>MPEG-4 content</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.mpeg-4</string>
            <string>video/mp4</string>
            <string>video/mp4v</string>
        </array>
        <key>LSTypeIsPackage</key>
        <false/>
    </dict>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>mov</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>QuickTime movie</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.apple.quicktime-movie</string>
            <string>video/quicktime</string>
        </array>
        <key>LSTypeIsPackage</key>
        <false/>
    </dict>
</array> 
```

其中，只有 Mp3 和 AVI 显示在“我的应用程序”中打开选项。我刚刚获得将视频添加到我的相机胶卷的“保存视频”选项。我究竟做错了什么？

我要关联的格式是：AVI、3GP、MP4、M4V、MOV。

我也试过这个。它适用于 MP3、WAV、AVI、FLV，但仍然不适用于 3GP、MP4、MOV、M4V

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Audio</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.audio</string>
        </array>
    </dict>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Video</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.movie</string>
        </array>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T03:58:26.067

所以回答[如何将文件类型与 iPhone 应用程序相关联？](https://stackoverflow.com/a/2781290/774691), 显示了一些与您的示例略有不同的示例。该文件的内容看起来应该可以工作，尽管根据文档有一些冗余：

*   `CFBundleTypeExtensions`只是`MacOS`，即使那样，如果`LSItemContentTypes`存在，它也是多余的并且被忽略。
*   `LSTypeIsPackage`只是`MacOS`，即使那样，如果`LSItemContentTypes`存在，它也是多余的并且被忽略。
*   文档建议对 `CFBundleTypeName`. 例如对于 mp4，而不是像你一样使用 MPEG-4 内容，而是尝试`public.mpeg-4`（内部 kUTTypeMPEG4）

尽管如此，虽然我认为清理是个好主意，但我认为只有最后一个可能真正有机会解决您的问题，因为其他两个应该被忽略。

…这意味着我认为实际上可以解决您的问题的方法是从设备中清除您的应用程序并从缓存中清除，退出 xcode，然后重新打开您的项目，重新构建并再次运行它。我遇到过问题，Xcode 及其部署机制在将资源放在设备上时会感到困惑。如果在您到达这一点之前某些注册尝试最初失败，则执行此清理可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:40:40.580

我已经安装了其他也支持文档导入的应用程序（例如 TeamViewer、oPlayer 等）。它们也没有出现在 MOV、3GP、M4V 等邮件应用程序的“打开方式”操作表中。

我猜苹果不允许第三方应用程序打开某些文件并希望它们在内部处理。所以用户所能做的就是将它们保存到相机胶卷中。

剩下的唯一选择是向我们的应用程序添加功能，以允许从相机胶卷中选择视频。所以，邮件 > 保存视频 > 相机胶卷 > 3rd Party App

真可惜。

我在 Info.plist 中的最终条目

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Audio</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.audio</string>
        </array>
    </dict>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Video</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.3gpp</string>
            <string>public.3gpp2</string>
            <string>public.mpeg-4</string>
            <string>public.avi</string>
            <string>com.apple.quicktime-movie</string>
            <string>public.mpeg</string>
            <string>public.movie</string>
        </array>
    </dict>
</array> 
```

我仍然希望有办法解决这个问题..有人吗？

# shell - 服务器软件 - 哪个以 root 身份运行？

> ID：11523724
> 
> 赞同：1
> 
> 时间：2012-07-17T13:38:13.090
> 
> 标签：shell, permissions, debian

这是我的堆栈列表：

> Nginx UWSGI Tomcat Solr Virtualenv 主管

我正在尝试正确设置我的服务器，我想知道其中哪些应该以 root 身份运行，哪些应该有自己的用户帐户。如果它们不应该作为用户帐户运行，是否应该每个人都有自己的帐户，或者是否应该将 Nginx 和 Uwsgi 等程序归入一个名为“web”的帐户下。

对此的任何反馈将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:39:35.503

我不会以**root**身份运行任何这些服务。我个人在自己的用户帐户下使用它们中的每一个。

仅使用**root**执行安装或其他维护任务。但不能运行任何服务或用户程序。

# magento - 在 magento 中使用 ifconfig 删除顶部导航

> ID：11523726
> 
> 赞同：1
> 
> 时间：2012-07-17T13:38:23.870
> 
> 标签：magento

我正在开发一个模块，其中我们的配置为“advanemenu/general/enabled”

通过使用此配置，我可以有条件地将项目添加到我的 magento 前端。

前任。

```
<reference name="head">
     <action method="addItem" ifconfig="advancemenu/general/enabled"><type>skin_css</type><name>css/advancemenu.css</name></action>
</reference> 
```

现在类似地，如果启用了配置值，我想删除顶部导航。

我尝试了以下但没有任何结果......

```
<remove ifconfig="advancemenu/general/enabled" name="catalog.topnav" /> 
```

如果 ifconfig 可以使用，`<action>`那么是否有任何方法可以使用此方法删除顶部导航。

如果有人知道如何做到这一点，请帮助我。（提前谢谢）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:26:32.103

IfConfig 仅适用于操作方法。当您在 xml 布局中调用操作时，此解析会调用块实例中的函数。

你可以看到这个：

文件：app/code/core/Mage/core/Model/layout.php 第 289 行左右

```
protected function _generateAction($node, $parent)
    {
        if (isset($node['ifconfig']) && ($configPath = (string)$node['ifconfig'])) {
            if (!Mage::getStoreConfigFlag($configPath)) {
                return $this;
            }
        } 
```

但一个可行的解决方案是仅在具有真实价值的情况下添加模板。例如

```
<reference name="head">
     <action method="setTemplate" ifconfig="advancemenu/general/enabled">
       <template>route/to/template</template>
     </action>
</reference> 
```

然后，只有当你启用你的模块时，你才有模板关联到这个块，在另一种情况下，你的块没有模板，然后不加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:25:13.303

您可以使用 unsetchild 方法删除任何块。

对于上述情况

```
<reference name="top.menu">
            <action method="unsetChild" ifconfig="advancemenu/general/enabled">
                <name>catalog.topnav</name>
            </action>
        </reference> 
```

这将有助于条件删除语句。

# events - liferay 中 login.event 和 logout.event 的区别

> ID：11523729
> 
> 赞同：0
> 
> 时间：2012-07-17T13:38:28.017
> 
> 标签：events, action, hook, liferay

我将这两个事件与一个类联系起来，我的问题是如何识别该类何时被调用`login.event`以及何时被调用`logout.event`。

我的课扩展了`Action`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:24:03.390

我想到的最简单的方法：在不同的类中实现这两个事件。如果您非常希望实现在单个类中，请从操作类委托给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:02:13.513

我也更喜欢 Olaf 的解决方案，参加两个单独的课程。但是如果你对使用 olny 一个类有硬性要求，那么你可以尝试识别关于被调用堆栈跟踪的事件类型。

```
private void printStackTrace() {
    StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();
    for (StackTraceElement stackTraceElement : stackTrace) {
        System.out.println(stackTraceElement.getClassName() + "." + stackTraceElement.getMethodName());
    }
} 
```

# android - Android：来自 xml 布局的自定义视图

> ID：11523734
> 
> 赞同：4
> 
> 时间：2012-07-17T13:38:38.120
> 
> 标签：android, xml, layout, view

我想创建一个自定义`View`（类的子`View`类）并使用布局 xml 资源。

我想要这样的东西：

```
public class CustomView extends LinearLayout {

    public CustomView(Context context) {
          super(context);
          LayoutInflater  mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          mInflater.inflate(R.layout.tweet, this, true);
} 
```

这实际上创建了`View`具有正确高度和宽度的 a（`ScrollView`具有这些列表的 a 具有完全预期的长度和滚动条）但它们是空的（黑色），即使 xml 布局包含很多`TextViews`.

这是我的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tweet"
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    android:orientation="vertical"
    android:background="#ffffff">
    <RelativeLayout
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <LinearLayout 
            android:layout_height="wrap_content" 
            android:layout_width="match_parent" 
            android:orientation="horizontal"
            android:background="#ffffff">
            <TextView 
                android:text="User" 
                android:id="@+id/tvusername" 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content"
                android:textColor="#000000"
                android:textStyle="bold">
            </TextView>
            <View
                android:layout_width="5dip"
                android:layout_height="1dip">           
            </View>
            <TextView 
                android:text="userscreenname" 
                android:id="@+id/tvuserscreenname" 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content">
            </TextView>    
        </LinearLayout>
        <TextView
            android:text="0s"
            android:id="@+id/tvtime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true">
        </TextView>
    </RelativeLayout>
    <TextView 
        android:text="Tweet Content" 
        android:id="@+id/tvcontent" 
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:textColor="#000000">
    </TextView>
    <View 
        android:layout_width="match_parent"
        android:layout_height="1px"
        android:background="#ffffff">
    </View>
    <TextView 
        android:text="Retweet by" 
        android:id="@+id/tvrtby" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">
    </TextView>
</LinearLayout> 
```

这是我的主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    >

<ScrollView 
    android:layout_height="match_parent" 
    android:layout_width="match_parent" 
    android:id="@+id/scrollView1" 
    android:orientation="vertical"
   android:layout_alignParentTop="true">
    <LinearLayout 
        android:layout_width="match_parent" 
        android:id="@+id/timeline" 
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="#ffffff">           
            <TextView  
            android:id="@+id/tvoutput"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:text="@string/hello"
            />    
    </LinearLayout>
</ScrollView>
</LinearLayout> 
```

这就是我将自定义视图添加到主视图的方式：

不工作（我试图实现的目标）：

```
TweetView ctweet = new TweetView(getApplicationContext(),tweet);
timeline.addView(ctweet); 
```

我当前的解决方案（有效，但不使用自定义视图）：

```
 View vtweet = View.inflate(getApplicationContext(), R.layout.tweet,null);

            TextView tvusername = (TextView) vtweet.findViewById(R.id.tvusername);
            TextView tvuserscreenname = (TextView) vtweet.findViewById(R.id.tvuserscreenname);
            TextView tvcontent = (TextView) vtweet.findViewById(R.id.tvcontent);
            TextView tvtime = (TextView) vtweet.findViewById(R.id.tvtime);

            tvusername.setText(tweet.getUser().getName());
            tvuserscreenname.setText('@' + tweet.getUser().getScreenName());
            tvcontent.setText(tweet.getText()); 
            //tvtime.setText(ctweet.tvtime.getText()); 
            timeline.addView(vtweet); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:31:51.227

你可以在你的 xml 中使用它，就像任何其他视图一样`<TextView`

试试`<packageName.ClassName`，比如`<com.example.CustomView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T09:14:33.163

可能您必须设置 TweetView 对象的布局参数。

```
LinearLayout.LayoutParams fieldparams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT, 1.0f);
ctweet.setLayoutParams(fieldparams); 
```

# javascript - jquery - 将图像保存为指定的文件名

> ID：11523737
> 
> 赞同：1
> 
> 时间：2012-07-17T13:38:46.893
> 
> 标签：javascript, jquery

> **可能重复：**
> [用文件名保存文件 Javascript](https://stackoverflow.com/questions/7717851/save-file-javascript-with-file-name)

这是jsfiddle：http: [//jsfiddle.net/WwDdr/3/](http://jsfiddle.net/WwDdr/3/)

在我的页面上：

*   一个图像
*   一个带有字符串的输入框（来自其他地方，基本上忽略这个）
*   带有图像 URL 的输入框
*   包含文件扩展名的跨度

我怎样才能：

单击将提示“另存为”窗口的按钮/链接/任何内容，图像的原始文件名被“标题”字符串替换？这可能吗？

编辑：看起来没有 jq 解决方案 - 但是可以使用服务器端语言来完成。

# c# - 继承一个接口，实现部分方法，让派生类实现其余的

> ID：11523739
> 
> 赞同：11
> 
> 时间：2012-07-17T13:39:01.183
> 
> 标签：c#, class, inheritance, interface

定义以下 C# 接口：

```
public interface IShape
{
    int NumberOfLineSegments {get;}
    int Area {get;}
} 
```

接下来，我要定义几个矩形类：梯形、正方形等。所有这些类的 Area() 属性都不同，但 NumberOfLineSegments() 总是返回 4。因此，我想要一个名为 Rectangle（或 IRectangle）的“临时”类或接口，它看起来像：

```
public Rectangle : IShape
{
    public int NumberOfLineSegments{get{return 4;}}
} 
```

我希望 Rectangle 仅实现 NumberOfLineSegment()，并将其留给其派生类来实现其余部分：

```
public Square : Rectangle 
{
    public int Area() {get{return length*height;}
} 
```

但是，由于 IShape 是一个接口，因此 Rectangle 类也必须实现 Area()，它不知道如何实现。因此，我似乎被卡住了，要么为 Rectangle 定义一个“虚拟”Area() 方法，要么不完全使用继承。

有没有办法绕过这个？我通过 C# 和 StackOverflow 广泛阅读了 Richter 的 clr。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T13:41:29.517

`Rectangle`类应该是`abstract` 并将`Area()`方法定义为抽象。

```
public interface IShape
{
    int NumberOfLineSegments {get;}
    float Area{get;}
}

public abstract class RectangleBase : IShape
{
    public int NumberOfLineSegments { get { return 4; } }

    public abstract float Area { get; }
}

public sealed class Square : RectangleBase
{
    public override fload Area() { get { return length*height; }
} 
```

如果您需要 Rectangle 实例：

```
public sealed class Rectangle : ReectangleBase
{
    public int NumberOfLineSegments { get { return 4; } }

    public float Area { get { throw new NotImplementedException(); } }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T13:42:23.883

There are two options.

1.  Make the implementation virtual and empty (or throw a `NotImplementedException`), so it does nothing by default until derived.
2.  Make the base class abstract and create abstract signatures for the interface methods you want to force down the chain.

Number 2 is *much* more preferable, as it forces derived classes to implement the method, whereas in number 1 derived classes are not forced to override base virtual methods.

Abstract methods can successfully satisfy interface definitions as the compiler will know that abstract classes themselves cannot be instantiated, and any derived classes are forced to have the abstract method implemented.

That said, if there are interface members that do not make sense to a particular type, it is usually an indicator to ***break down your interfaces***:

```
public interface IShape : ICalculateArea, IHaveLineSegments
{
}

public interface ICalculateArea
{
    float Area { get; }
}

public interface IHaveLineSegments
{
    int NumberOfLineSegments { get; }
}

class Rectangle : IHaveLineSegments
{
    public int NumberOfLineSegments { get; private set; }
}

class Square : Rectangle, IShape
{
    public float Area { get; private set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:41:41.287

define the method as abstract.

```
public abstract float Area{get;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T13:41:54.643

Use an abstract class which implements the interface:

```
public abstract class Rectangle : IShape {
    public int NumberOfLineSegments { get { return 4; } }
    public abstract float Area { get; }
} 
```

Your particular rectangle classes then simply inherit from the Rectangle abstract class.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T13:42:09.400

这可以吗？强制在派生类中实现。

```
public abstract class Rectangle : IShape
{
    NumberOfLineSegments{get{return 4;}}
    abstract float Area { get; }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T13:46:25.147

就个人而言，我更喜欢@sll 的解决方案（以及其他基本相同的解决方案），但为了记录，还有另一种方法：

```
public interface IShape
{
    int NumberOfLineSegments {get;}
    float Area{get;}
}

public class Rectangle
{
    public int NumberOfLineSegments { get { return 4; } }
}

public sealed class Square : Rectangle, IShape
{
    public float Area() { get { return length*height; }
} 
```

这样，您可以`abstract`节省类，但需要定义一个严格的超类（因此您将无法为`Square`.

请注意，尽管`Rectangle`没有实现`IShape`.

# php - PHP过滤坏词

> ID：11523742
> 
> 赞同：1
> 
> 时间：2012-07-17T13:39:16.587
> 
> 标签：php

我在下面有一个过滤坏词代码我想用 .txt 文件替换这个 ARRAY 以便我可以将所有坏词放入 txt 文件中，或者有什么方法可以使用 MYSQL 数据库存储坏词然后从那里调用?

```
FUNCTION BadWordFilter(&$text, $replace){

 $bads = ARRAY (
      ARRAY("butt","b***"),
      ARRAY("poop","p***"),
      ARRAY("crap","c***")
 );

 IF($replace==1) {                                        //we are replacing
      $remember = $text;

      FOR($i=0;$i<sizeof($bads);$i++) {               //go through each bad word
           $text = EREGI_REPLACE($bads[$i][0],$bads[$i][1],$text); //replace it
      }

      IF($remember!=$text) RETURN 1;                     //if there are any changes, return 1

 } ELSE {                                                  //we are just checking

      FOR($i=0;$i<sizeof($bads);$i++) {               //go through each bad word
           IF(EREGI($bads[$i][0],$text)) RETURN 1; //if we find any, return 1
      }     
 }
}

$qtitle = BadWordFilter($wordsToFilter,1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:53:05.647

我刚刚开发了一个可以过滤掉坏词的功能

```
function hate_bad($str)
{
    $bad = array("shit","ass");
    $piece = explode(" ",$str);
    for($i=0; $i < sizeof($bad); $i++)
    {
        for($j=0; $j < sizeof($piece); $j++)
        {
            if($bad[$i] == $piece[$j])
            {
                $piece[$j] = " ***** ";
            }
        }
    }

    return $piece;
} 
```

并这样称呼它

```
$str = $_REQUEST['bad']; //'bad' is the name of the text field here
$good = hate_bad($str);   

if(isset($_REQUEST['filter'])) //'filter' is the name of button
{
    for($i=0; $i < sizeof($good); $i++)
    {
        echo $good[$i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:46:23.837

你可以做任何...

您可以使用类似`file_get_contents()`从文件中读取的内容，或使用[MySQL API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)来查询数据库中的坏词。

您是否设置了数据库架构？此外，`eregi_replace()`已弃用。改为使用`preg_replace()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:48:31.160

是的，制作一个像 bad_words.txt 这样的文件，其中的条目如下（注意每个单词组合都在单独的行上）：

```
butt,b***
poop,p***
crap,c*** 
```

然后将该文件读入一个数组，如下所示：

```
$file_array = file('/path/to/bad_word.txt',FILE_IGNORE_NEW_LINES); 
```

然后创建一个像你的 $bads 数组这样的数组：

```
$bads = array();
foreach ($file_array as $word_combo) {
    $bads[] = explode(',', $word_combo);
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:43:43.580

你可以使用MYSQL。

只需有一个包含两列的表：单词和替换。

然后在您的代码中，您将需要连接到数据库并读取每一行。但是您可以将每一行存储在一个数组中。

结果将与您当前的数组结构非常相似。

要连接到数据库，请使用以下教程。 [http://www.homeandlearn.co.uk/php/php13p1.html](http://www.homeandlearn.co.uk/php/php13p1.html)

# objective-c - 在 Objective-C 中为顶部标签栏添加菜单或按钮

> ID：11523749
> 
> 赞同：0
> 
> 时间：2012-07-17T13:39:40.803
> 
> 标签：objective-c, ios, xcode

我想在我的 TOP TAB BAR 或顶部导航栏中添加 4 个按钮或 4 个菜单，请您帮我看看我应该如何通过界面或编程方式来实现，以及如何实现？

提前致谢！我真的是iOS新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:46:40.170

就像将[UIBarButtonItem](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)分配给视图控制器的隐含 navigationController 实例一样简单。原谅技术术语，也许一些代码会弥补它：

```
//left
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc]init];
//right
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]init]; 
```

请注意，如果您的根视图控制器不是[UINavigationController ，这](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)*将*不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:59:28.707

如果使用 iOS 5，您可以使用导航栏的 rightBarButtonItems/leftBarButtonItems 属性。只需创建一个 UIBarButtonItems 数组，并将其分配给适当的一侧。

```
UIBarButtonItem *button1= [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(methodOne:)];
UIBarButtonItem *button2= [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(methodTwo:)];
UIBarButtonItem *button3= [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(methodthree:)];
UIBarButtonItem *button4= [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(methodFour:)];

NSArray *buttons = [NSArray arrayWithObjects:button1,button2,button3,button4,nil]; 
```

然后，将它们放在导航栏的左侧：

```
self.navigationItem.leftBarButtonItems = buttons; 
```

或者把它们放在右边：

```
self.navigationItem.rightBarButtonItems = buttons; 
```

您还可以使用以下内容在按钮之间添加空格：

```
UIBarButtonItem *flexible = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]
NSArray *buttons = [NSArray arrayWithObjects:button1,flexible,button2,flexible,button3,flexible button4,nil]; 
```

# facebook - 翻译我的应用名称

> ID：11523755
> 
> 赞同：2
> 
> 时间：2012-07-17T13:39:51.197
> 
> 标签：facebook, translation

我正在为一家全球公司做一个应用程序，每种语言都有不同的名称。他们希望只有一个应用程序（最好是一个拥有 100 万用户的应用程序，而不是 20 个拥有 50k 用户的应用程序）。

每个语言环境可以有不同的应用程序名称吗？在翻译管理面板中，这似乎是可能的，因为可以翻译应用程序名称。实际上，名称始终是原始名称...

非常感谢您的帮助！

# git - 使用 oauth 令牌进行身份验证的 Git/github 命令行应用程序？

> ID：11523760
> 
> 赞同：3
> 
> 时间：2012-07-17T13:40:12.463
> 
> 标签：git, authentication, command-line, oauth, github

我希望使用一个简单的命令行客户端（例如官方 git 客户端）从 github 克隆分支，作为部署工具的一部分。

为了安全起见，我不希望使用基本（用户名/密码）身份验证。由于我已经在我的应用程序中使用了 github 的基于 oauth-token 的 Auth 标头，我想知道是否有一个**命令行应用程序可以使用 oauth 令牌对 github 进行身份验证**。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:55:10.233

**2012 年 9 月更新**

[Github 现在接受使用任何 git 客户端使用身份验证令牌](https://github.com/blog/1270-easier-builds-and-deployments-using-git-over-https-and-oauth)。

您可以[使用这些说明获取 github 的 oauth 令牌](http://developer.github.com/v3/oauth/#create-a-new-authorization)，这是一个使用 Node.js 和 superagent 的实用演示。

```
var GITHUB_API_ENDPOINT = 'https://api.github.com/'

superagent
  .post(GITHUB_API_ENDPOINT+'authorizations')
  .auth('username', 'notactuallymypassword')
  .send({ scopes: 'repo', note: 'Social Ops Deployer' })
  .end(function(res){
    if (res.ok) {
     console.log('yay got ' + JSON.stringify(res.body));
    } else {
     console.log('Oh no! error ' + res.text);
    }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:53:06.883

我没听说过。

你可能已经发现了[关于这个主题的官方文档，](http://developer.github.com/v3/git/)描述了如何开发这样的客户端。

但我认为它可能会产生额外的开发开销并可能引入错误，所以也许值得尝试不同的方法来解决这个问题？例如：

*   使用 ssh 协议从 github 检索数据；
*   在团队中引入具有“仅拉取”权限的新用户并使用他的凭据。

# c++ - XCOPY Dos 命令从子文件夹复制

> ID：11523762
> 
> 赞同：0
> 
> 时间：2012-07-17T13:40:19.627
> 
> 标签：c++, command, dos, xcopy

我有一个使用 XCOPY DOS 命令复制一些文件的 C++ 程序。

```
string command = "xcopy " + source + " " + dest;
const char * cmd = command.c_str();
system(cmd); 
```

我的问题是，这仅在源文件与 EXE 位于同一文件夹中时才有效。我希望能够从子文件夹中复制 X。

有谁知道我如何在不提供完整路径 (c:\blahh\blahh) 的情况下从源文件夹复制？如： `xcopy childFolder/filename newname` 不起作用。

我目前正在使用： `xcopy copy.h h.h`但是不适用于子文件夹。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:30:08.893

izomorphius 在他的评论中几乎有完整的答案 - 你应该使用反斜杠。另一个问题是您必须转义文件夹分隔符：

```
string source = "childfolder\\filename" 
```

# gcc - 如何使用隐式 DO 循环调试 Fortran READ/WRITE 语句？

> ID：11523763
> 
> 赞同：1
> 
> 时间：2012-07-17T13:40:33.320
> 
> 标签：gcc, fortran, gfortran

我正在使用的 Fortran 程序在处理输入文件时遇到运行时错误。

```
At line 182 of file ../SOURCE_FILE.f90 (unit = 1, file = 'INPUT_FILE.1')
Fortran runtime error: Bad value during integer read 
```

查看第 182 行，我看到一个带有隐式/隐式 DO 循环的 READ 语句：

```
182:    READ(IT4, 310 )((IPPRM2(IP,I),IP=1,NP),I=1,16)    ! read 6 integers
183:    READ(IT4, 320 )((PPARM2(IP,I),IP=1,NP),I=1,14)    ! read 5 reals 
```

格式声明：

```
310 FORMAT(1X,6I12) 
```

当我在调试器中到达此代码时，`NP`其值为 2。`I`值为 6，`IP`值为 67。我认为应该在循环中重新初始化`I`。`IP`

我的问题是，当我尝试在调试器中单步执行时，一旦我进入 READ 语句，它似乎执行然后抛出错误。我不知道如何阅读它。我尝试进入该函数，但由于我不熟悉 gfortran 库，这似乎是一条艰难的道路。输入文件看起来不错，我认为应该可以正常阅读。这让我觉得这个 READ 语句没有按预期循环。

我对 Fortran 和像这样的隐式 DO 循环完全陌生，但是从我可以收集的内容来看，第 182 行应该根据格式字符串 #310 读取 6 个整数。但是，当我到达时，`NP`它的值为 2，这让我认为它只会尝试读取 2 个整数 16 次。

如何调试此读取语句以检查`IPPARM`从文件中读取的值？我必须逐步浏览 Fortran 库吗？

任何可以消除我对这些隐式循环的困惑的提示将不胜感激！

谢谢！

注意：我在 Linux 上使用 gfortran/gcc 和 gdb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:06:27.070

您是否有任何理由需要在阅读时使用特定格式？我会在可行的情况下使用 READ(IT4, *) ...

更高版本的 gfortran 支持无限格式读取（请参阅链接[http://fortranwiki.org/fortran/show/Fortran+2008+status](http://fortranwiki.org/fortran/show/Fortran+2008+status)）

那么指定

```
310 FORMAT("*(1X,6I12)") 
```

或者对于较旧的编译器

```
310 FORMAT(1000(1X,6I12)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:47:51.093

变量 IP 和 I 是循环索引，因此它们由循环重新初始化。在 NP=2 的情况下，第一条语句将读取总共 32 个整数——它有助于确定要读取的项目列表。格式决定了它们的读取方式。随着`"1X,6I12"`输入文件的每行，它们将被读取为 6 个整数。当从一行/记录中读取所请求的 32 个整数中的前 6 个时，Fortran 将认为该行/记录已完成并前进到下一条记录。

具有格式`"1X,6I12"`的整数必须在文件中精确排列。应该有一个空格，然后每个整数都应该在 12 列的字段中右对齐。如果它们不对齐，您可能会读取错误的值或运行时错误。

# android - 无法打开文件+安卓

> ID：11523764
> 
> 赞同：1
> 
> 时间：2012-07-17T13:40:35.023
> 
> 标签：android

我已经从[http://code.google.com/p/picview-for-android/](http://code.google.com/p/picview-for-android/)下载了源代码并尝试在 Eclipse 中运行它。但 LogCat 显示

```
External Storage: /mnt/sdcard

DB Path: /mnt/sdcard/data/picview/accounts_followed.db

(14) cannot open file at line 30174 of [00bb9c9ce4]

(14) os_unix.c:30174: (13) open(/mnt/sdcard/data/picview/accounts_followed.db) - 
Failed to open database '/mnt/sdcard/data/picview/accounts_followed.db'.

android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14):      Could not open database 
```

……………………

AbstractPicViewDatabase.java 包含以下代码。我认为，问题只出在这个班级的某个地方。请帮忙。

```
protected static SQLiteDatabase getUsableDataBase(String dbName, String sqlCreateQuery) {
File dbFile = getPathToDb(dbName);

File fileDirectory = new File(dbFile.getParent());
if (!fileDirectory.exists()) {
// Make sure the path for the file exists, before creating the
// database.
fileDirectory.mkdirs();
}
Log.d(TAG, "DB Path: " + dbFile.getAbsolutePath());
boolean initDb = !dbFile.exists();
try {
SQLiteDatabase result = SQLiteDatabase.openOrCreateDatabase(dbFile, null);

if (initDb) {

result.execSQL(sqlCreateQuery);
}

return result;
} catch (SQLiteException ex) {
Log.w(TAG, "Could not open or image database.");
return null;
}
}

/**
* Returns a file for the data base with the given name.
*/
protected static File getPathToDb(String dbName) {
String sdCardPath = Environment.getExternalStorageDirectory()
        .getAbsolutePath();
Log.d(TAG, "External Storage: " + sdCardPath);
return new File(sdCardPath + File.separator + "data" + File.separator
        + PicViewConfig.APP_NAME_PATH + File.separator + dbName);
} 
```

# android - Android NFC API 对 Mifare Desfire 的支持程度如何？

> ID：11523765
> 
> 赞同：7
> 
> 时间：2012-07-17T13:40:52.857
> 
> 标签：android, nfc, mifare

我可能正在开展一个项目，将现有的 Desfire 卡（用于访问付费服务）替换为支持 NFC 的移动设备。任何人都可以向我指出任何资源以帮助我了解 a) 将 Desfire 卡的数据复制到移动设备上，以便它可以代替卡，以及 b) 应用程序提供 NFC 数据以呈现给读卡器就像一张卡片。所有相关的密钥和访问权限都将由发卡机构提供（如果项目继续进行），但我很想提前了解这个过程。

我还需要了解 Android NFC API 对 Desfire 的支持程度，因为据我所知，它只能正确支持 Classic。[http://developer.android.com/reference/android/nfc/tech/package-summary.html](http://developer.android.com/reference/android/nfc/tech/package-summary.html)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-06T08:57:59.620

NFC 家伙的回答非​​常好，但有点过时，所以我决定添加更新。

从 KitKat (4.4) 开始，您现在可以模拟没有安全元素的卡片。

它被称为基于主机的卡仿真 ( [Hce](https://developer.android.com/guide/topics/connectivity/nfc/hce.html) )，您可以使用它来仿真 ISO 14443 A 型卡。就像 desfire 卡一样。

有两个小警告：

*   您的阅读器必须在轮询“卡”后发布一个 ISO SELECT (aid)，并带有您选择的固定应用程序 id (aid)。此 AID 必须在您的应用清单中注册。Android 将拦截此 ISO SELECT，阅读帮助，并仅在它与您的清单中的那个匹配时才给您打电话。然后你可以交换任何东西，它甚至不必是 ISO APDU（ISO 14443 封装由 android 完成）。所以举个例子，***如果你想***，你甚至可以模拟desfire的challenge response authentication (0xA0 key_num, 0xAF challenge, 0xAF response, 0x00 session_key)

*   你不能依赖 UID（但你不依赖，对吧？无论如何这是一种不好的做法，所以没有人这样做......对吗？:)）因为它是随机的，并且它不断变化（而不是在单个会话，当然，但是...）

我们正在模拟我们的 desfire 卡，我们必须做的唯一更改是从最初的 desfire 选择应用程序 (0x5A) 切换到 ISO SELECT (0x00 0xA4 0x04)。

模拟身份验证（挑战-响应的事情）可能很棘手，但我们已经“以相反的方式”完成了它（使用 NFC 读取 desfire 卡），所以对我们来说很容易。

如果您依赖卡 UID 进行身份验证.. 现在是更改它的好时机 :)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-17T14:20:00.607

MIFARE DESFire 符合 ISO 14443-4 标准。Android 中对 ISO 14443-4（以及 MIFARE DESFire）的支持由[`IsoDep`](http://developer.android.com/reference/android/nfc/tech/IsoDep.html)该类完成。`transceive()`您可以使用该类的方法发送任何 DESFire 命令。

除此之外，DESFire 可以配置为符合 NFC 论坛类型 4 标签。在这种情况下，Android 会自动从标签中读取任何 NDEF 消息，并在一个意图中调度它。因此，您可以在扫描特定标签时让您的应用程序自动启动。（Android 也可以将 DESFire 芯片格式化为包含 NDEF 并将 NDEF 数据写入其中。）

用移动 NFC 设备替换 DESFire 卡是另一回事。当前可用的 Android 设备上的卡模拟由连接到 NFC 芯片的嵌入式安全元件完成。Android 应用程序无法模拟卡（也没有用于此的 API），并且安全元件无法模拟 DESFire 芯片。此外，没有开放的 API 可以从应用程序访问安全元件。

Android NFC 应用程序可以通过 NFC 与另一台设备（不是卡）进行通信的唯一方法是使用[Android Beam](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#p2p)。然而，这是与卡和读卡器之间使用的协议不同的协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:04:57.060

鉴于您的情况，我会说 Android SDK 足以解决您的问题。您的案例有两个部分：

1.  从现有卡片中读取信息。
2.  使用您从卡片中读取的信息制作应用程序。

第1部分：

您唯一需要担心的是阅读 DESFire 卡。如果 DESFire 卡中的信息以 NDEF 格式存储，事情就变得更简单了。

`Ndef`是 SDK 中的一个类，可用于检索`NdefMessage`类型中的信息，然后您可以使用该类型将检索到的信息保存到您的存储设施中，无论是本地数据库、远程数据库还是仅在应用程序内存中。

以上假设卡不受保护。如果是，那么您必须使用`transceive`函数来使用原始字节通信进行交互。这将为要读取的其余信息解锁。从这里您可以读取 NDEF 记录。

第 2 部分：我的建议是跳过它的卡仿真方面。你会在某个时间点碰壁。

如果将现有解决方案中一直在读卡的设备连接到 android 设备，那么 Android Beam 就是要走的路。这不过是 Android App 到 Android App 的通信！Android 已经完成了繁重的工作，因此您的大部分工作都将变得很容易。

卡上的信息可以存储为 ndef 消息并通过梁发送，或者您可以简单地创建自定义对象并通过它发送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T18:19:10.190

您可能想查看 Mifare4Mobile，该计划旨在从 Mifare 卡过渡到 NFC 设备：

[http://mifare4mobile.org/](http://mifare4mobile.org/)

# c# - 使用激活器、C#、Postsharp 设置内部异常

> ID：11523766
> 
> 赞同：0
> 
> 时间：2012-07-17T13:40:58.240
> 
> 标签：c#, .net, postsharp

编写包含 A 类型异常并将其输出为 B 类型的 postsharp 方面。在某些情况下，这是常见的模式，因此这应该会删除大部分样板文件。问题是，使用激活器创建异常时如何设置内部异常？

```
namespace PostSharpAspects.ExceptionWrapping
{
    [Serializable]
    public class WrapExceptionsAttribute : OnMethodBoundaryAspect
    {
        private readonly Type _catchExceptionType;
        private readonly Type _convertToType;

        public WrapExceptionsAttribute(Type catchTheseExceptions, Type convertThemToThisType)
        {
            _catchExceptionType = catchTheseExceptions;
            _convertToType = convertThemToThisType;
        }

        public override void OnException(MethodExecutionArgs args)
        {
            if (args.Exception.GetType() == _catchExceptionType)
            {
                throw (Exception) Activator.CreateInstance(_convertToType);
            }
        }
    }
} 
```

如果我尝试设置内部异常： throw (Exception) Activator.CreateInstance(_convertToType, args.Exception);

我收到 xxxx 类型异常没有为其定义构造函数的错误，如何解决这个问题？我是否必须使用某种反射技巧来编写私有字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:44:31.137

Use Type.GetConstructor(Type[]) to get the appropriate Exception constructor. [http://msdn.microsoft.com/en-us/library/h93ya84h.aspx](http://msdn.microsoft.com/en-us/library/h93ya84h.aspx)

Something like this:

```
throw (Exception)_convertToType
    .GetConstructor(new Type[]{ typeof(string), typeof(Exception) })
    .Invoke(new object[]{ _catchExceptionType }); 
```

# ruby - 如何为 Ruby Shoes 实现模糊事件

> ID：11523769
> 
> 赞同：5
> 
> 时间：2012-07-17T13:41:16.393
> 
> 标签：ruby, blur, shoes

我正在试验红宝石鞋。我希望控件在您赋予它们焦点时变得可编辑，并在它们松开时再次变为文本。到目前为止，我有以下...

```
class NameBox < Shoes::Widget
  def initialize(model, opts = {})
    @model = model
    @para = para(value)
    self.click{ 
      edit
    }
    self.keypress{|key|
      display if key==:enter
    }
  end

  def display
    @ed && @ed.hide
    @para.show
    @para.text = value
  end

  def edit
    @ed ||= edit_line(value) {|e|
      @model.rename(e.text)
    }
    @para.hide
    @ed.text = value
    @ed.show
  end

  def value
    @model.name
  end
end 
```

被使用

```
class Model
  attr_reader :name
  def initialize(name)
    @name = name
  end
  def rename(new_name)
    @name = new_name
  end
end

Shoes.app do
  @variable = Model.new("1 2 3")
  stack do
    10.times{ name_box(@variable) }
  end
end 
```

此实现意味着如果您单击多个控件，它们都将是编辑框。

我希望的是一个模糊事件，它可以让我将控件改回“显示”。这不存在，所以..你将如何实现它？

假设我将编写更多控件，并且它们都必须遵守“一个集中控件”的规则

** 奖励积分解释为什么我不能放：

```
@ed ||= edit_line(value) {|e|
  @model.rename(e.text)
} 
@ed.hide() 
```

在初始化中并让@ed被隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T14:45:52.403

这个怎么样？

```
class NameBox < Shoes::Widget
  def initialize(model, opts = {})
    @model = model
    @para = para(value)
    self.click{ 
      edit
    }
  end

  def display
    @ed && @ed.hide
    @para.show
    @para.text = value
  end

  def edit
    @ed ||= edit_box(value, height: 30) {|e|
      e.text[-1] == "\n" ? display : @model.rename(e.text)
    }
    @para.hide
    @ed.text = value
    @ed.show
  end

  def value
    @model.name
  end
end

class Model
  attr_reader :name
  def initialize(name)
    @name = name
  end
  def rename(new_name)
    @name = new_name
  end
end

Shoes.app do
  @variable = Model.new("1 2 3")
  stack do
    10.times{ name_box(@variable) }
  end
end 
```

# selenium - Selenium IDE：this.browserbot.getUserWindow().typeList.filter 在 IE8 上返回错误

> ID：11523770
> 
> 赞同：0
> 
> 时间：2012-07-17T13:41:23.310
> 
> 标签：selenium, internet-explorer-8, ide

在使用 Selenium 时，我遇到了以下问题。我需要验证列表中是否存在某些值，我使用以下代码：

assertEval this.browserbot.getUserWindow().typeList.filter(function(v) { return v[0] === 'Type_${r_suffix}'; })[0][0]; 类型_${r_suffix}

这适用于 Firefox 文件，但在 IE 8 上返回错误：对象不支持此属性或方法。

有人可以知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:49:23.697

正如[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)所说，该`filter()`方法仅适用于 IE9 及更高版本。

你只是在使用一种太新的技术。使用`for`循环手动过滤它或插入`Array.prototype.filter`（来自 MDN）的代码以访问它。

# php - 如何在 Doctrine 1.2 中一一获取结果？

> ID：11523772
> 
> 赞同：1
> 
> 时间：2012-07-17T13:41:26.147
> 
> 标签：php, doctrine, dql, doctrine-1.2

如何制作类似于经典 PHP PDO 的东西

```
while ($obj = $stmt->fetch()) {...} 
```

在教义 1.2 中。

我试过了

```
while ($obj = $query->fetchOne()) {...} 
```

但它总是只返回找到的第一个对象。

有什么办法可以实现这种行为吗？

我的查询并不重要。这是一个简单的（注意我在模型的 *Table 类中）

```
$query = $this->createQuery('a'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:59:38.757

在 symfony2 中处理迁移命令时，我发现它`$query->executes();`会在返回之前将完整的结果集提取到 RAM 中。

对于少量数据，这不是问题，但对于较大的结果，您的进程可能会运行 OutOfMemory。

要解决该问题，您可以使用以下语句“逐个”迭代结果：

```
$query->iterate(); 
```

我认为它类似于此 PDO 声明：`while ($obj = $stmt->fetch()) {...}`

更完整的示例可能如下所示：

```
$em = $this->getContainer()->get('doctrine');
$iterator = $em->getRepository('AcmeBundle:Entity')
               ->createQueryBuilder('e')
               ->getQuery()->iterate();

foreach($iterator as $item){
   $item = $item[0];

   // Your logic here:
   $item->getId();
   ....       
} 
```

**[在教义文档](http://docs.doctrine-project.org/en/2.0.x/reference/batch-processing.html#iterating-results)**中找到了这一点**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:47:33.850

你有没有尝试过：

```
while ($obj = $query->execute()) {...} 
```

如果你想获取一个数组而不是对象：

```
while ($obj = $query->execute(array(), Doctrine_Core::HYDRATE_ARRAY)) {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T10:26:53.410

如果您有连接，请这样做：

```
$stmt = $conn->query($queryString);
while ($obj = $stmt->fetch()) {...} 
```

与`fetchOne()`您一起，您只会得到一个条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-16T16:19:47.667

使用水合物模式`Doctrine_Core::HYDRATE_ON_DEMAND`

```
$q = Doctrine_Query::create()
                ->select('...')
                ->from('...');

// Returns instance of Doctrine_Collection_OnDemand
$result = $q->execute(array(), Doctrine_Core::HYDRATE_ON_DEMAND);
foreach ($result as $obj)
{
    // do something with your object
} 
```

更多信息：[数据水合器 — Doctrine 1.2.4 文档](http://doctrine.readthedocs.org/en/latest/en/manual/data-hydrators.html)

# javascript - 使用 java 脚本填充组合框

> ID：11523783
> 
> 赞同：0
> 
> 时间：2012-07-17T13:41:58.313
> 
> 标签：javascript, jsp, servlets, dojo, dijit.form

我正在使用dojo ajax 编写一些用于级联下拉列表的代码，第一个下拉列表是静态的，第二个是从servlet 获取数据.. 我正在使用dijit.form.ComboBox 进行下拉列表。Dojo 提供了 Store 属性，他在其中存储数据，然后将其放入组合框中。在servlet中，我通过数组列表到ajax函数..在ajax函数中，我用逗号分隔数组并在变量中存储，然后存储在dojo的存储属性中但我无法填充整个字符串..它只填充最后一个我正在使用以下代码的字符串的值

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

        <link rel="stylesheet" href="dojo/dijit/themes/claro/document.css">
        <link rel="stylesheet" href="dojo/dijit/themes/claro/claro.css" />
        <script src='dojo/dojo/dojo.js' data-dojo-config=' parseOnLoad: true'></script>
        <script>

            require(["dojo/parser", "dijit/form/ComboBox","dijit/form/TextBox"]);

      function abc(){    

          var j = document.getElementById('state').value
          dojo.xhrPost({
    // The URL to request
    url: "populate",   //servlet name
    timeout :  3000 ,
    content: {
        username: dojo.byId("state").value

    },

    load: function(result) {    // the value in result is like=[Abas Store, Accounts ]

    require([
    "dojo/ready", "dojo/store/Memory", "dijit/form/ComboBox"
], function(ready, Memory, ComboBox){

     var ss=result.split(",");

     var i;
     for (i=1;i< ss.length ;i++){

    var stateStore = new Memory({

        data: [ {name:ss[i], id: ss[i]}  ]
    });
     }

    ready(function(){
        var comboBox = new ComboBox({
            id: "stateSelect",
           name:"select",
            value: "Select",
            store: stateStore,
            searchAttr: "name"
        }, "stateSelect");
    });
});

      }
});
      }

        </script>
    </head>
    <body class="claro">

     <select data-dojo-type="dijit.form.ComboBox" id="state" name="state"  onchange="abc();">
    <option selected >Andaman Nicobar</option>
    <option>Andhra Pradesh</option>        
 <option>Tripura</option>
 <option>Uttar Pradesh</option>
 <option>Uttaranchal</option>
 <option>West Bengal</option>

</select>
        <input id="stateSelect"  >
                   </select>

    </body>
</html> 
```

请给我解决方案..填充组合框中的所有值，这是我从数组列表中获得的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:00:14.267

您正在 for 循环中构建商店。相反，您应该构建传递给 MemoryStore 构造函数的数据数组。

```
require(["dojo/store/Memory", "dijit/form/ComboBox", "dojo/ready"], 
    function(Memory, ComboBox, ready){

        ready(function) {

           dojo.connect(dijit.byId('state'), 'onChange', function() {

               var stateSelect = dijit.byId('stateSelect');
               if (!stateSelect) {
                   stateSelect = new ComboBox({
                     id: "stateSelect",
                     name:  "select",
                     value: "Select...",
                     searchAttr: "name"
                   }, "stateSelect");
               }

               var ss = 'Abas Store, Accounts';
               ss = ss.split(',');

               var data = [];
               dojo.forEach(ss, function(item, idx) {
                   data.push({
                       id: idx,
                       name: item                    
               });
               stateSelect.set('store', new Memory({data: data}));

          }); // dojo.connect
       }); // ready     
}); // require 
```

​</p>

The working example is at [http://jsfiddle.net/cswing/DLNNc/](http://jsfiddle.net/cswing/DLNNc/)

# android - Modern mobile devices time-to-first-fix

> ID：11523792
> 
> 赞同：-1
> 
> 时间：2012-07-17T13:42:21.713
> 
> 标签：android, gps, android-sensors

I am software developer of GPS-service. The a-gps assumes fast time-to-first-fix. The vendors write about 35 secs. But when i tested on several modern mobile android devices i find strange thing. That sometimes time-to-first-fix is < 35 secs(in the urban open street conditions). And sometimes it is more than 15 mins. On the same device devices. In the same places. Today warm and cold start can be 15-60 secs and tomorrow morning it can be > 15 min. GPRS/GPS/positionnig in mobiles network are on. I see with the help of 3d party software that A-GPS data are fresh (today). But it isn't help. I find such behavior on LG P970 and Archos 101 Tab.

Why? How can speed up and optimize A-GPS time-to-first-fix on Android?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:02:48.700

不幸的是，答案是让您在 GPS 中首次修复几分钟的设备只是垃圾实现。我还看到不同设备上的结果截然不同。

# php - bbCode 在另一个

> ID：11523795
> 
> 赞同：0
> 
> 时间：2012-07-17T13:42:41.543
> 
> 标签：php, html, regex, bbcode

我制作了一个类似于 bbCode 的自定义函数。我正在使用 preg_replace 和正则表达式。唯一的问题是，如果我使用不止一种 bbCode 格式，那么只有一种有效。

```
[align=center][img]myimagelink[/img][/align] 
```

如果我输入这一行，那么图像也会出现 [align=center]*图像*[/align]。我怎样才能避免这个问题？

```
$patterns[2] = '@\[align=(.*)\](.*)\[\/align\]@si';
$patterns[9] = '@\[img\](.*\.jpg)\[\/img\]@si';
$replacements[2] = '<table align=\1><tr><td align=\1>\2</td></tr></table>';//ALIGN
$replacements[9] = '<img src=\"$1\"/>';//image 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:53:01.007

将`.*`表达式更改为非贪婪 ( `.*?`) 将对您有用。

例子：

```
$in = '[align=center][img]myimagelink[/img][/align]';
$patterns = array(
    '~\[align=(left|right|center)\](.*?)\[/align\]~' => '<div style="text-align: $1">$2</div>',
    '~\[img](.*?)\[/img\]~' => '<img src="$1" />',
);

$rep = preg_replace(array_keys($patterns), $patterns, $in);
echo htmlspecialchars($rep); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:49:40.963

我建议不要重新发明轮子，而是使用现有的 javascript 库。

我相信 StackOverflow 使用[**Prettify**](http://code.google.com/p/google-code-prettify/)来格式化用户输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:52:09.260

正如@nickb 所说，你的模式是贪婪的。`(.*)`抓住一切。尝试将其更改为`(.*?)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:55:22.177

将所有标签视为单标签而不是成对标签

```
$patterns[2] = '@\[align=(.*)\]@si';
$patterns[3] = '@\[\/align\]@si';
$patterns[9] = '@\[img\](.*\.jpg)\[\/img\]@si';
$replacements[2] = '<div align=\"$1\">';//ALIGN
$replacements[3] = '</div>';//ALIGN
$replacements[9] = '<img src=\"$1\"/>';//image 
```

# actionscript-3 - Why there is no script error is thrown, when NULL object property is accessed in MXML

> ID：11523796
> 
> 赞同：0
> 
> 时间：2012-07-17T13:42:41.107
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

We can add inline codes in MXML. However we when try to get properties from NULL object in MXML(inline code), flex doesn't throw error. However when we do same thing in action script tag, we can see script error thrown.

how this behavior is captured in MXML. Any idea.

For eg:

```
Class ValueTo  //Model class
{

  public var name:string;

}

<fx:Script>
        <![CDATA[
            public var v:ValueTo;
        ]]>
    </fx:Script>

    <mx:Label **text="{v.lable}"** />  //No error thrown, when v=null, i.e null.label 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:47:19.423

发生这种情况的原因是由于大括号表达式：`text="{v.label}`. （除了“大括号”或绑定表达式之外，我不知道如何称呼这些 - 有人请用正确的术语编辑/纠正我）。

Flex 数据绑定功能通过设计“吞噬”了这些错误。可以想象，`v.label`例如，当应用程序启动时，like 的值可以为 null。为方便起见，Flex 会为我们处理这些错误。但是，当我们编写自己的 Actionscript 时，我们就没有那么奢侈了。

然而，这没什么神奇的。管理数据绑定/大括号表达式的 Flex 代码要么检查空值，要么包含在`try/catch`语句中以处理可能由空对象导致的任何错误。

# java - How to add a MOOV atom in a mp4 video file

> ID：11523797
> 
> 赞同：44
> 
> 时间：2012-07-17T13:42:42.620
> 
> 标签：java, android, android-layout, mp4, live-streaming

I am working on live device to server streaming in android. I am able to send data in bytes on server but when I play that file during recording on server **VLC** say that **MOOV** atom not found. After a lot of workaround I found that **MOOV** atom of a mp4 file generates in the end. But I have to play that file on server while recording means live. I go through the source code of **SPYDROID** and **SIPDROID** but non of them is working. I tried to add `moov` atom on serverside using **FFMPEG** but didn't get any success. Anyone has an idea on how can I achieve this?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2020-02-26T21:44:13.683

有一个工具[untrunc](https://github.com/ponchio/untrunc)声称可以修复未完成（截断）的 mp4、m4v、mov、3gp 视频。我自己没有测试过，但可能值得一试。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-18T22:57:43.107

你有问题。“moov”框是一种目录。如果不是所有的内容都在那里，你就不可能有一个完整的目录。哎哟!

如果您想坚持使用 MP4 并且您自己编写文件，您可以将文件写入所谓的分段 MP4 文件。一个分段的 MP4 文件包含多个独立的小视频片段——每个片段都有自己的目录。它可以让您在完整录制完成之前播放文件。

如果您不需要坚持使用 MP4，则可以选择将原始 h264 流写入服务器。那么你就没有那种目录。VLC 可以播放原始 h264 流。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-31T10:22:31.150

可以使用 FFMpeg 将 moov atom 移动到视频文件的开头。

```
ffmpeg -i input_video_file.mp4 -vcodec copy -acodec copy -movflags faststart output_video_file.mp4 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-18T08:57:23.130

运行 qt_faststart 将 moov atom 移动到流的开头。

```
qt-faststart in.mp4 out.mp4 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-10T14:17:28.653

使用 MP4Box 在文件开始时移动 MOOV 原子并以块的形式进行交错流。

```
MP4Box test.mp4 test.mp4 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-25T13:41:26.960

mp4 格式需要 moov atom 信息来播放视频，并且要生成 moov atom 视频必须完成，您无法在录制时播放 mp4 文件，因为您仍然没有创建文件的所有信息moov 原子部分。

您想要做的是某种实时流式传输（在录制时播放），因此您需要使用另一种格式。HLS 流和 mpeg-dash 将视频存储在小块（2 秒到 10 秒）中并发送给用户，这样用户一个接一个地播放许多完成的文件。

正如@Sebastian Annies 建议的那样，创建许多微小的 mp4 文件并连接是相同的方法：拥有微小的完成文件并作为列表播放，在这里您可以获得更多信息[Fragmented mp4(fMP4) 到底是什么？它与普通的mp4有什么不同？](https://stackoverflow.com/questions/35177797/what-exactly-is-fragmented-mp4fmp4-how-is-it-different-from-normal-mp4)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-12-04T19:57:06.843

在我的情况下，ffmpeg 甚至不允许我使用以下方法重新创建容器：

```
ffmpeg -i video.mp4 -c copy out.mp4 
```

它因同样的`corrupted STCO atom`错误而失败。

**我可以通过在avidemux**中打开视频文件并在不编码的情况下重新导出视频来解决此问题。

[![AVIDUX](../Images/d4dac9cc06631a34bc6b8e5444146720.png)](https://i.stack.imgur.com/lqQV3.png)

然后ffmpeg可以毫无问题地读取这个文件。

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2016-08-23T01:47:10.787

将此库添加到您的 gradle：**compile 'net.ypresto.qtfaststartjava:qtfaststart:0.1.0'** 然后

```
File input = new File(path + "/input.mp4"); // Your input file
File output = new File(path + "/output.mp4"); // Your output file
try{
    if(!output.exists()) // if there is no output file we'll create one
        output.createNewFile();
    }
}catch (IOException e){
    Log.e("TAG", e.toString());
}

try{
    QtFastStart.fastStart(input, output); // Adds moov to your input
                                          // Now your output file is ready to stream!
}catch (QtFastStart.MalformedFileException m){
    Log.e("QT", m.toString());
}catch (QtFastStart.UnsupportedFileException q){
    Log.e("QT", q.toString());
}catch (IOException i){
    Log.e("QT", i.toString());
} 
```

这就是全部

# mobile - Application is misconfigured

> ID：11523800
> 
> 赞同：1
> 
> 时间：2012-07-17T13:42:54.053
> 
> 标签：mobile, facebook-javascript-sdk, facebook-php-sdk

I am developing a mobile web application, some times it is showing that "the mobile version of the app is unavailable because it is misconfigured for mobile access". Why this is happening? I noticed that it is happening when user is logout form Fb and try to come back to the app it showing login form after login it showing the error.

Please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:52:41.433

我遇到了这个问题，问题似乎是，如果您刚刚从 Facebook 重定向到您的应用程序，然后立即重定向回 apps.facebook.com/my-app/sub-uri，那么 Facebook 会引发错误。

这就是我正在做的事情以及我最终做的事情：

我尝试授权我的应用程序，通过重定向到 Facebook 授权并在授权应用程序后重定向到我的 apps.facebook.com/my-namespace/next-step。

在 Facebook 刚刚将您的用户重定向到应用程序之后，使用移动设备访问并重定向回 Facebook，导致错误。

然后我添加了一段移动嗅探代码，如果用户是移动的，它会在内部重定向到/next-step，而不是转到apps.facebook.com。

移动端的初始请求流程：

```
my.domain.tld/authorize 
-> graph.facebook.com/oauth/authorize 
<- my.domain.tld/authorized 
-> apps.facebok.com/my-app/next-step 

error 
```

如果用户是移动的，我然后将其更改为：

```
my.domain.tld/authorize 
-> graph.facebook.com/oauth/authorize 
<- my.domain.tld/authorized 
-> my.domain.tld/next-step 

All working fine 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:28:37.793

在 Facebook 开发者页面中检查您的原生 iOS 或 Android 应用程序包 ID

# wordpress - 联系表格 7 感谢页面，附有摘要

> ID：11523807
> 
> 赞同：4
> 
> 时间：2012-07-17T13:43:15.083
> 
> 标签：wordpress, contact, contact-form-7

我需要一个自定义的感谢页面，该页面将在提交联系表格 (contactform7) 后显示，该表格将显示用户输入的姓名和电子邮件地址。

以下是示例感谢页面：

谢谢xxx：我们办公室的人将在24小时内通过xxx@example.com与您联系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:45:25.423

我通过使用联系表 7 的附加设置找到了一个解决方案，并将以下代码放入这些设置中。

注意：它仅适用于基于 Ajax 的表单。

```
on_sent_ok: "var name = $('.wpcf7 input[name=your-name]').val();var email = $('.wpcf7 input[name=your-email]').val();$('.wpcf7').hide();$('.entry-title').html('Thank you');$('.entry-content').html('thank you '+name+' : someone from our office will get in touch with you via '+email+' within 24 hours.');" 
```

打开您的联系表单配置页面并粘贴上面的代码，如下所示：

![附加设置窗口](../Images/37a98bb2666d0878c27fef40bed8e69c.png)

样本输出：

![样本输出](../Images/a3a2d68550a2d1a7df7a85d655b03bc4.png)

# regex - 如何从 HTML 文件中提取标签的属性值？

> ID：11523809
> 
> 赞同：7
> 
> 时间：2012-07-17T13:43:24.133
> 
> 标签：regex, bash

我知道，不要使用 curl、grep 和 sed 进行解析。但我正在寻找一种简单的方法，而不是一种非常安全的方法。

所以我得到了一个带有 curl 的 HTML 文件，我需要一个标签中某个属性的值。我使用 grep 让我看到它说的那一行`token`。这只会发生一次。这给了我一个完整的 div：

```
<div class="userlinks">
  <span class="arrow flleft profilesettings">settings</span>
  <form class="logoutform" method="post" action="/logout">
    <input class="logoutbtn arrow flright" type="submit" value="Log out">
    <input type="hidden" name="ltoken" value="a5fc8828a42277538f1352cf9ea27a71">
  </form>
</div> 
```

我怎样才能得到值属性（例如“a5fc8828a42277538f1352cf9ea27a71”）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T13:51:56.077

不需要grep：

```
sed -n '/token/s/.*name="ltoken"\s\+value="\([^"]\+\).*/\1/p' input_file 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T13:48:31.993

一种方法，使用`sed`：

```
sed "s/.* value=\"\(.*\)\".*/\1/" file.txt 
```

结果：

```
a5fc8828a42277538f1352cf9ea27a71 
```

高温高压

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T15:15:52.830

### 使用 XPath 表达式和一些 Grep

您实际上可以从命令行正确解析 HTML。例如，您可以使用[xgrep](http://wohlberg.net/public/software/xml/xgrep/)创建 xpath 表达式，然后使用 GNU sed（或您选择的 grep）仅提取您关心的文本。例如：

```
$ xgrep -x '//input[@name="ltoken"][1]/@value' /tmp/foo |
      sed -rn '/value/ s/.*"([[:xdigit:]]+)"/\1/p'
a5fc8828a42277538f1352cf9ea27a71 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-22T02:41:57.177

另一种使用方式`awk`

```
grep "ltoken" file.txt | awk -F"\"" '{print $6}' 
```

对于不同的属性值，只需增加或减少`$6`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-28T12:13:14.640

xgrep 解决方案存在一个问题，即它需要有效的 xml。由于未关闭的“输入”元素，提供的 html 无效。 [xmllint](http://xmlsoft.org/xmllint.html)有一个 html 解析器选项，还提供了 string() 函数来提取值而不使用 sed。

```
$ xmllint --html --xpath 'string(//input[@name="ltoken"][1]/@value)' foo
a5fc8828a42277538f1352cf9ea27a71 
```

# javascript - 解析 json 对象时 eval() 是非强制性的吗？

> ID：11523815
> 
> 赞同：0
> 
> 时间：2012-07-17T13:43:55.080
> 
> 标签：javascript, html, json, eval

```
<!DOCTYPE html>
<html>
<body>
<h2>JSON Object Creation in JavaScript</h2> 

<p>
Name: <span id="jname"></span><br />
Eval Name: <span id="evalname"></span><br />
<p>
<script>
var yyyy= {
"name":"John Johnson",
"street":"Oslo West 555",
"age":33,
"phone":"555 1234567"};

document.getElementById("jname").innerHTML = yyyy.name;
document.getElementById("evalname").innerHTML = eval(yyyy).name;
</script>

</body>
</html> 
```

我要出来了，如下所示，无论有无 eval()

**JavaScript 中的 JSON 对象创建**

姓名：约翰·约翰逊

评估名称：约翰·约翰逊

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T13:45:30.353

`yyyy`不是 JSON。它是一个 JavaScript 对象。所以在这种情况下，你不需要`eval`任何东西。当你处理 JSON 时，你应该使用`JSON.parse`而不是`eval`.

`eval`只需返回您传递给它的对象，而不修改它。所以这里是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:48:06.283

JSON 是一种序列化协议，其灵感来自（并命名为）Javascript。你所拥有的是一个实际的 Javascript 对象。JSON 将作为来自服务器的响应到达浏览器，您必须使用某些东西将字符串解码为 Javascript 对象。 `JSON.parse`是最好的选择。 `eval`也适用于此，但它是一种非常生硬和危险的工具。

您可以在服务器端使用 JSON 编码器将 Javascript 对象插入到服务器生成的 Javascript 中，这可能是您获得所显示代码的方式。在这种情况下，您根本不需要解码器，您可以简单地使用您在第一个示例中显示的对象。

# c# - C# double 到 char[20]

> ID：11523816
> 
> 赞同：1
> 
> 时间：2012-07-17T13:43:55.953
> 
> 标签：c#, arrays, char

我想将双精度值转换为字符 [20]。马双值是：52715.871

这是我的代码：

```
double value = init_value();
char tab[] = new char[20];
tab    =   value .ToString().ToCharArray(); 
```

我的问题是我的标签结果是 9 大小而不是 20 大小。我总是想要一个 20 号的。

请问这个怎么做？

非常感谢，

最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:46:40.897

```
tab = value .ToString().PadLeft(20, '0').ToCharArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:49:07.017

这取决于您要填写的内容，例如：

```
var tab = value.ToString().PadLeft(20,' ').ToCharArray(); 
```

会给你一个 char 数组，左边有空格......

# html - HTML5 local storage with Firefox: cleared after exit

> ID：11523821
> 
> 赞同：4
> 
> 时间：2012-07-17T13:44:15.703
> 
> 标签：html, firefox, local-storage

localstorage works well with chrome and IE, but with firefox (the version I am using 13.0.1), it seems it is cleared after I close it?? I check the localstorage using Firebug, I see that localstorage is saved ,but after I close FF I don't see the localstorage I created before closing the application,

I searched Google, but didn't find useful results.

Any clues?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:05:41.240

您是否在 Firefox 选项菜单中检查了您的隐私设置？

退出时清除 cookie 和历史记录通常也会擦除本地存储。

这是我的样子，因为我不希望本地存储在浏览器会话中持续存在：

![在此处输入图像描述](../Images/84573a5a67084ee2739b9d597c444a55.png)

# java - Creating a new Java application using the compiled class files

> ID：11523826
> 
> 赞同：0
> 
> 时间：2012-07-17T13:44:52.707
> 
> 标签：java

I have an application that is developed in Java that has nice GUI and all. I don't have the source code and also the dll's of that. But I have the compiled classes of that application (.jar files).

Now, I want to automate that application. I mean the application needs manual intervention.

Can I use that compiled classes so that I can use its functions to automate the functionality of that application?

If so, how would this be done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:49:59.307

您不必“从该应用程序 (.jar) 中获取已编译的类”。一个更好的主意是像对待任何其他 3rd 方 JAR 一样对待它，并在编译和运行时将其添加到您的 CLASSPATH 中。

您将编写自己的类来实例化该第 3 方类的实例并调用其方法，就像您从 JDK 获得的任何类一样。

您可能无法更改该类；即使可以，您也可能不想。

如果您必须拥有新功能，OO 方式会建议您应该扩展该类，如果可以的话，并根据您的需要覆盖它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:51:57.367

将其`.jar`放入您的类路径并使用该应用程序中您想要的任何内容。如果您需要使用私有字段或方法，您也可以使用反射 API。使用文件中的对象没有限制`.jar`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:49:54.087

如果您所指的应用程序是专有的，您应该小心侵犯任何版权。否则，任何 java 反编译器都会从这些类文件中获取源代码。

# c# - C# Windows 服务登录验证用户

> ID：11523828
> 
> 赞同：0
> 
> 时间：2012-07-17T13:44:57.050
> 
> 标签：c#, .net, c#-4.0, windows-services

我正在做一个允许用户预订特定计算机的应用程序，但我也想做一个 Windows 服务（安装在每台计算机上），每次用户尝试登录 Windows 时，我都可以验证是否该用户有预订并且可以使用该计算机。

任何人都可以帮助我了解如何从这个问题开始。我做了一项服务并输入了部分代码：

```
[DllImport("user32.dll")]
public static extern int ExitWindowsEx(int operationFlag, int operationReason);
ExitWindowsEx(0, 0); 
```

使用 ExitWindowsEx (0,0) 如果我在 Visual Studio 中运行该服务，我可以注销用户，但是当我安装该服务时，该指令不起作用。有什么建议么？

非常感谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T14:40:12.827

我猜想，当您安装服务时，您使用的是 SYSTEM 用户帐户运行它，这是一个与从 VS 运行它时不同的用户帐户。如果您的服务配置为使用本地系统帐户运行，您可以检查 services.msc 吗？如果是，并且如果您将其更改为使用您的常规用户帐户运行，并且如果通过该更改您的代码有效，那么您就有了答案:)

# c++ - how to add proxy support to boost::asio?

> ID：11523829
> 
> 赞同：8
> 
> 时间：2012-07-17T13:44:57.877
> 
> 标签：c++, proxy, boost-asio

In my desktop application I added access to various internet resources using boost::asio. All i do is sending http requests (i.e to map tile servers) and read the results. My code is based on the [asio sync_client sample](http://www.boost.org/doc/libs/1_48_0/doc/html/boost_asio/example/http/client/sync_client.cpp).

Now i get reports from customers who are unable to use these functions as they are running a proxy in their company. In a web browser they can enter the address of their proxy and everything is fine. Our application is unable to download data.

How can i add such support to my application?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T08:51:01.103

我自己找到了答案。这很简单：

[http://www.jmarshall.com/easy/http/#proxies](http://www.jmarshall.com/easy/http/#proxies) 对 http 代理的工作方式进行了非常简短和清晰的描述。

我所要做的就是将以下代码添加到 asio sync_client 示例示例中：

```
std::string myProxyServer = ...;
int         myProxyPort   = ...;

void doDownLoad(const std::string &in_server, const std::string &in_path, std::ostream &outstream)
{
    std::string server      = in_server;
    std::string path        = in_path;
    char serice_port[255];
    strcpy(serice_port, "http");

    if(! myProxyServer.empty())
    {
        path   = "http://" + in_server + in_path;
        server = myProxyServer;
        if(myProxyPort    != 0)
            sprintf(serice_port, "%d", myProxyPort);
    }
    tcp::resolver resolver(io_service);
    tcp::resolver::query query(server, serice_port);

... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:25:42.260

该示例似乎只是展示 Boost ASIO 的用途，但可能不打算按原样使用。您可能应该使用一个完整的库，该库不仅可以处理 HTTP 代理，还可以处理 HTTP 重定向、压缩等。

HTTP 是一件复杂的事情：如果不这样做，您很可能很快就会从另一个客户端获得另一个问题的消息。

我发现[cppnetlib](http://cpp-netlib.github.com/latest/index.html)看起来很有前途，并且基于 Boost ASIO，但不确定它是否可以处理代理。

还有[libcurl](http://curl.haxx.se/)但我不知道它是否可以轻松地与 Boost ASIO 集成。

# php - PHP 如果基于当前系统日期

> ID：11523832
> 
> 赞同：0
> 
> 时间：2012-07-17T13:45:00.773
> 
> 标签：php

尝试设置一个根据用户日期/时间自动更新的页面。

需要进行为期 2 周的促销活动，并且每天都需要更改显示的图像。正在阅读[http://www.thetricky.net/php/Compare%20dates%20with%20PHP](http://www.thetricky.net/php/Compare%20dates%20with%20PHP)以更好地处理 php 的时间和日期函数。测试起来有些棘手，但我基本上被卡住了：

```
<?php
$dateA = '2012-07-16'; 
$dateB = '2012-07-17'; 

if(date() = $dateA){ 
  echo 'todays message';
}
else if(date() = $dateB){
    echo 'tomorrows message';
}
?> 
```

我知道上述功能的设置是错误的，但我认为它解释了我的目标。时间无关紧要，它需要在午夜切换，所以无论如何日期都会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:48:45.847

你似乎需要这个：

```
<?php
$dateA = '2012-07-16'; 
$dateB = '2012-07-17'; 

if(date('Y-m-d') == $dateA){ 
    echo 'todays message';
} else if(date('Y-m-d') == $dateB){
    echo 'tomorrows message';
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:51:15.160

你要

```
<?php
$today = date('Y-m-d')
if($today == $dateA) {
    echo 'todays message';
} else if($today == $dateB) {
    echo 'tomorrows message';
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:49:54.410

我会退后一步并通过文件名处理它。就像是：

```
<img src=/path/to/your/images/img-YYYY-MM-DD.jpg alt="alternative text"> 
```

所以你的脚本看起来像这样：

```
<img src=/path/to/your/images/img-<?php echo date('Y-m-d', time()); ?>.jpg alt="alternative text"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:08:23.607

如果您要进行日期计算，我建议使用 PHP 的[DateTime](http://php.net/datetime)类：

```
$promotion_starts = "2012-07-16"; // When the promotion starts

// An array of images that you want to display, 0 = the first day, 1 = the second day
$images = array( 
    0 => 'img_1_start.png',
    1 => 'the_second_image.jpg'
);

$tz = new DateTimeZone('America/New_York');

// The current date, without any time values
$now = new DateTime( "now", $tz);
$now->setTime( 0, 0, 0);

$start    = new DateTime( $promotion_starts, $tz);
$interval = new DateInterval( 'P1D'); // 1 day interval
$period   = new DatePeriod( $start, $interval, 14); // 2 weeks

foreach( $period as $i => $date) {
    if( $date->diff( $now)->format("%d") == 0) {
        echo "Today I should display a message for " . $date->format('Y-m-d') . " ($i)\n";
        echo "I would have displayed: " . $images[$i] . "\n"; // echo <img> tag
        break;
    }
} 
```

鉴于促销活动开始于`07-16`，[这将显示](http://viper-7.com/I8sLDJ)以下内容，因为现在是促销活动的第二天：

```
Today I should display a message for 2012-07-17 (1)
I would have displayed: the_second_image.jpg 
```

# .net - LINQ: delete from a list elements contained in another list

> ID：11523837
> 
> 赞同：3
> 
> 时间：2012-07-17T13:45:14.757
> 
> 标签：.net, linq

I have a list (`List<T>`) of objects `aList` and another list `bList`.

How to use Linq to delete all objects from `aList` contained in `bList`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:48:08.010

看一眼[`List<T>.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a)

```
aList.RemoveAll(x => bList.Contains(x)) 
```

FWIW，如果这很重要，这还将删除 中`aList`包含的所有对象`bList`，而不仅仅是 中每个`bList`对象的第一个实例。`aList`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T13:48:14.037

最简单的方法是这样做：

```
foreach(var item in bList) aList.Remove(item); 
```

`Remove`如果该项目不在列表中，则不执行任何操作。

如果“使用 LINQ”是指使用 LINQ 来确定 in 中的项目`aList`是否在 中`bList`，则没有必要。

只有当这两个条件都为真时，LINQ 解决方案才会更有效：

1.  `aList`相比起来非常小`bList`
2.  里面的所有项目`aList`也`bList`都在开头`bList`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T13:50:10.350

您可以使用[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)扩展方法：

```
var result = aList.Except(bList); 
```

请注意，[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151)如果您需要自定义相等检查，您也可以将 an 作为第二个参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:48:00.677

查看 LINQ“除外”扩展：

[http://www.dotnetperls.com/except](http://www.dotnetperls.com/except)

> 除了从集合中减去元素。此扩展方法位于 .NET Framework 的 System.Linq 命名空间中。它本质上是从另一个集合中减去一个集合中的所有元素。

# jquery - Change jQuery animation when window resizes

> ID：11523840
> 
> 赞同：1
> 
> 时间：2012-07-17T13:45:28.563
> 
> 标签：jquery, resize, window

On my website I use the following code to animate a hover action:

```
jQuery('#portfolio .project').hover( function() {
   // Animate icon
   jQuery(this).find('.overlay').animate({opacity:1.0, top:'75px'}, 300);
}, function() {
   // Hide icon
   jQuery(this).find('.overlay').animate({opacity:0, top:'155px'}, 300);
}); 
```

so that when the user hovers over a project an icon will be displayed as an overlay.

In this situation the image is 940px wide. But the website will be responsive, so is it possible to make this code variable depending on the window size of the browser? For example, when the browser width is 768px the icon will animate to 'top:100px' instead of 75px.

I've made a start with this, but have no idea how to go further.

```
jQuery(window).resize(function() {
   var window_width = jQuery(window).width(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:15:22.837

老实说，对你来说最简单的方法是 CSS。

由于您的页面是响应式的，因此您已经为不同的窗口大小提供了不同的 CSS 样式。如果您添加一个额外的类并切换它，您可以轻松设置不同的值。

对于您的 CSS：

```
/*
 * if the device width is bigger or equal to 768,
 * set the hover top property to 100px
 */

@media only screen and (min-device-width : 768px) {
    .overlay.hover {
        top: 100px;
    }
}

/*
 * if the device width is smaller or equal to 767
 * set the hover top property to 75px
 */

@media only screen and (max-device-width : 767px) {
    .overlay.hover {
        top: 75px;
    }
} 
```

然后，剩下的就是切换类！

```
jQuery('.container').hover( function() {
    // Animate icon
    jQuery(this).find('.overlay').stop().toggleClass('hover', 300).animate({
        opacity: 1.0
    }, 300);
}, function() {
    // Hide icon
    jQuery(this).find('.overlay').stop().toggleClass('hover', 300).animate({
        opacity: 0.2
    }, 300);
});​ 
```

但是，如果您认为这太费力了（尽管它更漂亮），您也可以随时在 javascript 中执行此操作：

```
var animatetop = getAnimateTop();

jQuery(window).resize(function() {
    animatetop = getAnimateTop();
});

jQuery('#portfolio .project').hover( function() {
    // Animate icon
    jQuery(this).find('.overlay').stop().animate({
        opacity: 1.0,
        top: animatetop + 'px'
    }, 300);
}, function() {
    // Hide icon
    jQuery(this).find('.overlay').stop().animate({
        opacity: 0,
        top:'155px'
    }, 300);
});

function getAnimateTop() {
    if(jQuery(this).width() >= 768) {
        return 100;
    } else {
        return 75;
    }
} 
```

# c - 802.11 FCS (CRC32)

> ID：11523844
> 
> 赞同：5
> 
> 时间：2012-07-17T13:45:43.757
> 
> 标签：c, pcap, libpcap, crc32

下面的代码是否正确计算了无线 802.11 帧的 FCS 值？
因为下面代码产生的值与wireshark显示的值不匹配。

```
const uint32_t crctable[] = {
   0x00000000L, 0x77073096L, 0xee0e612cL, 0x990951baL, 0x076dc419L, 0x706af48fL, 0xe963a535L, 0x9e6495a3L,
   0x0edb8832L, 0x79dcb8a4L, 0xe0d5e91eL, 0x97d2d988L, 0x09b64c2bL, 0x7eb17cbdL, 0xe7b82d07L, 0x90bf1d91L,
   0x1db71064L, 0x6ab020f2L, 0xf3b97148L, 0x84be41deL, 0x1adad47dL, 0x6ddde4ebL, 0xf4d4b551L, 0x83d385c7L,
   0x136c9856L, 0x646ba8c0L, 0xfd62f97aL, 0x8a65c9ecL, 0x14015c4fL, 0x63066cd9L, 0xfa0f3d63L, 0x8d080df5L,
   0x3b6e20c8L, 0x4c69105eL, 0xd56041e4L, 0xa2677172L, 0x3c03e4d1L, 0x4b04d447L, 0xd20d85fdL, 0xa50ab56bL,
   0x35b5a8faL, 0x42b2986cL, 0xdbbbc9d6L, 0xacbcf940L, 0x32d86ce3L, 0x45df5c75L, 0xdcd60dcfL, 0xabd13d59L,
   0x26d930acL, 0x51de003aL, 0xc8d75180L, 0xbfd06116L, 0x21b4f4b5L, 0x56b3c423L, 0xcfba9599L, 0xb8bda50fL,
   0x2802b89eL, 0x5f058808L, 0xc60cd9b2L, 0xb10be924L, 0x2f6f7c87L, 0x58684c11L, 0xc1611dabL, 0xb6662d3dL,
   0x76dc4190L, 0x01db7106L, 0x98d220bcL, 0xefd5102aL, 0x71b18589L, 0x06b6b51fL, 0x9fbfe4a5L, 0xe8b8d433L,
   0x7807c9a2L, 0x0f00f934L, 0x9609a88eL, 0xe10e9818L, 0x7f6a0dbbL, 0x086d3d2dL, 0x91646c97L, 0xe6635c01L,
   0x6b6b51f4L, 0x1c6c6162L, 0x856530d8L, 0xf262004eL, 0x6c0695edL, 0x1b01a57bL, 0x8208f4c1L, 0xf50fc457L,
   0x65b0d9c6L, 0x12b7e950L, 0x8bbeb8eaL, 0xfcb9887cL, 0x62dd1ddfL, 0x15da2d49L, 0x8cd37cf3L, 0xfbd44c65L,
   0x4db26158L, 0x3ab551ceL, 0xa3bc0074L, 0xd4bb30e2L, 0x4adfa541L, 0x3dd895d7L, 0xa4d1c46dL, 0xd3d6f4fbL,
   0x4369e96aL, 0x346ed9fcL, 0xad678846L, 0xda60b8d0L, 0x44042d73L, 0x33031de5L, 0xaa0a4c5fL, 0xdd0d7cc9L,
   0x5005713cL, 0x270241aaL, 0xbe0b1010L, 0xc90c2086L, 0x5768b525L, 0x206f85b3L, 0xb966d409L, 0xce61e49fL,
   0x5edef90eL, 0x29d9c998L, 0xb0d09822L, 0xc7d7a8b4L, 0x59b33d17L, 0x2eb40d81L, 0xb7bd5c3bL, 0xc0ba6cadL,
   0xedb88320L, 0x9abfb3b6L, 0x03b6e20cL, 0x74b1d29aL, 0xead54739L, 0x9dd277afL, 0x04db2615L, 0x73dc1683L,
   0xe3630b12L, 0x94643b84L, 0x0d6d6a3eL, 0x7a6a5aa8L, 0xe40ecf0bL, 0x9309ff9dL, 0x0a00ae27L, 0x7d079eb1L,
   0xf00f9344L, 0x8708a3d2L, 0x1e01f268L, 0x6906c2feL, 0xf762575dL, 0x806567cbL, 0x196c3671L, 0x6e6b06e7L,
   0xfed41b76L, 0x89d32be0L, 0x10da7a5aL, 0x67dd4accL, 0xf9b9df6fL, 0x8ebeeff9L, 0x17b7be43L, 0x60b08ed5L,
   0xd6d6a3e8L, 0xa1d1937eL, 0x38d8c2c4L, 0x4fdff252L, 0xd1bb67f1L, 0xa6bc5767L, 0x3fb506ddL, 0x48b2364bL,
   0xd80d2bdaL, 0xaf0a1b4cL, 0x36034af6L, 0x41047a60L, 0xdf60efc3L, 0xa867df55L, 0x316e8eefL, 0x4669be79L,
   0xcb61b38cL, 0xbc66831aL, 0x256fd2a0L, 0x5268e236L, 0xcc0c7795L, 0xbb0b4703L, 0x220216b9L, 0x5505262fL,
   0xc5ba3bbeL, 0xb2bd0b28L, 0x2bb45a92L, 0x5cb36a04L, 0xc2d7ffa7L, 0xb5d0cf31L, 0x2cd99e8bL, 0x5bdeae1dL,
   0x9b64c2b0L, 0xec63f226L, 0x756aa39cL, 0x026d930aL, 0x9c0906a9L, 0xeb0e363fL, 0x72076785L, 0x05005713L,
   0x95bf4a82L, 0xe2b87a14L, 0x7bb12baeL, 0x0cb61b38L, 0x92d28e9bL, 0xe5d5be0dL, 0x7cdcefb7L, 0x0bdbdf21L,
   0x86d3d2d4L, 0xf1d4e242L, 0x68ddb3f8L, 0x1fda836eL, 0x81be16cdL, 0xf6b9265bL, 0x6fb077e1L, 0x18b74777L,
   0x88085ae6L, 0xff0f6a70L, 0x66063bcaL, 0x11010b5cL, 0x8f659effL, 0xf862ae69L, 0x616bffd3L, 0x166ccf45L,
   0xa00ae278L, 0xd70dd2eeL, 0x4e048354L, 0x3903b3c2L, 0xa7672661L, 0xd06016f7L, 0x4969474dL, 0x3e6e77dbL,
   0xaed16a4aL, 0xd9d65adcL, 0x40df0b66L, 0x37d83bf0L, 0xa9bcae53L, 0xdebb9ec5L, 0x47b2cf7fL, 0x30b5ffe9L,
   0xbdbdf21cL, 0xcabac28aL, 0x53b39330L, 0x24b4a3a6L, 0xbad03605L, 0xcdd70693L, 0x54de5729L, 0x23d967bfL,
   0xb3667a2eL, 0xc4614ab8L, 0x5d681b02L, 0x2a6f2b94L, 0xb40bbe37L, 0xc30c8ea1L, 0x5a05df1bL, 0x2d02ef8dL
};

uint32_t crc32(uint32_t bytes_sz, const uint8_t *bytes)
{
   uint32_t crc = ~0;
   uint32_t i;
   for(i = 0; i < bytes_sz; ++i) {
      crc = crctable[(crc ^ bytes[i]) & 0xff] ^ (crc >> 8);
   }
   return ~crc;
} 
```

我以以下方式调用上述函数：

```
uint32_t crc = crc32(header->len - 4, packet); 
```

其中标头的类型为：

```
struct pcap_pkthdr *header; 
```

头信息由 pcap 回调处理：

```
void my_callback(u_char *args, const struct pcap_pkthdr *header, const u_char *packet) 
```

我从[这个链接获得了 crc32() 和 crctable[] 的代码](http://code.google.com/p/banjax/source/browse/trunk/lib/net/crc32.cpp?spec=svn34&r=34)

**2年后的编辑：**

上面的代码`crc32()`确实有效；该行
`printf("0x%x\n",crc32(sizeof(MSG)-16-4,MSG+16));`
打印正确的 802.11 CRC，其中：

`MSG`是从 Wireshark 复制和粘贴的消息字节数组 ( `unsigned char[]`)；

`16`是 radiotap 标头大小，

`4`是 FCS 的大小（帧校验序列，crc32，little-endian=x86 顺序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:05:17.927

您正在捕获或从中读取捕获文件`pcap_datalink()`的返回值是多少？`pcap_t`

除非它是`DLT_IEEE802_11`（值为 105），否则数据包不是 802.11 数据包或*不仅仅是*802.11 数据包。

例如，如果它是`DLT_EN10MB`，它是一个以太网数据包（您可能从 802.11 适配器获得，特别是如果您没有在监控模式下捕获），如果它是`DLT_IEEE802_11_RADIO`，它以 radiotap 中所述的“radiotap”标头[开头.org 网站](http://www.radiotap.org/)，并且您需要跳过 radiotap 标头才能到达 802.11 帧，并且只对 802.11 帧进行校验和。

（此外，对于某些 Atheros 适配器，802.11 帧将在 802.11 标头和 802.11 有效负载之间添加一些填充，您必须在校验和时将其删除；如果您有 radiotap 标头，则由“帧在 802.11 之间填充标头和有效负载（到 32 位边界）”[标志字段中的标志](http://www.radiotap.org/defined-fields/Flags)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:19:44.070

一些硬件能够卸载校验和验证，有效地将预先验证的校验和数据包提供给 CPU，而不是给 CPU 增加校验和验证的负担。根据[wireshark关于校验和的页面](http://www.wireshark.org/docs/wsug_html_chunked/ChAdvChecksums.html)，这可能会使校验和字段为零或垃圾。

在这种情况下，仍然会处理数据包，因为操作系统知道校验和已经在 NIC 中验证。操作系统不会因为校验和无效而丢弃数据包，因为它知道 NIC 已经验证了校验和。

# wcf - 将 WCF 服务部署到 IIS 7 64 位

> ID：11523854
> 
> 赞同：0
> 
> 时间：2012-07-17T13:46:24.787
> 
> 标签：wcf

我正在开发 WCF 服务，并在 Cassini 中对其进行测试。我还有一个控制台应用程序和一个网络参考。到 cassini 中托管的 svc。这工作正常，我可以调用服务方法。但是当我将 svc 部署到 IIS 并尝试运行到控制台应用程序时，我收到了这个错误。

> System.ServiceModel.FaultException`1 未处理
> 消息=反序列化消息 NotifRQRequest 中的标头之一时出错。有关更多详细信息，请参阅 InnerException。
> 源=mscorlib
> 
> 服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.HandleReply (ProxyOperationRuntime operation, ProxyRpc& rpc)在
> System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter) 。 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannel.Call (String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) 。 ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 在 [0] 处重新抛出异常：
> 
> 在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
> 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型)
> 在 TestConsole.ServiceReference1.IPush.RQ(NotifRQRequest 请求)
> 在 TestConsole.ServiceReference1.PushClient.TestConsole.ServiceReference1.IPush.NotifRQ(NotifRQRequest request) 在 ServiceReference1\Reference.cs:line 37165
> 在 TestConsole.ServiceReference1.Client.RQ(Security Security, Action Action, MessageID MessageID, ReplyTo ReplyTo, To To ，NotifRQ notifRQ1）ServiceReference1\Reference.cs： 在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，String[] args）
> 的 TestConsole.Program.Main（String[] args）的第 37176 行
> 
> 在 System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
> 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state)
> 在 System.Threading.ExecutionContext.Run (ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
> at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
> at System.Threading.ThreadHelper.ThreadStart()
> InnerException:

我正在运行 x64 环境。甚至尝试更改为不同的应用程序池。

任何建议或后盾将不胜感激。

谢谢，

编辑1：只注意到一件事。svc 使用 wsdl 中列出的大约 5 个 xml 命名空间。在卡西尼中，我可以浏览然后我可以点击 localhost/Notification/NotificationService.svc?xsd=xsd0 但我不能在 IIS 上做同样的事情！！！

```
<xsd:schema targetNamespace="http://www.opentravel.org/OTA/2003/05/Imports">
    <xsd:import schemaLocation="http://localhost/Notification/NotificationService.svc?xsd=xsd0" namespace="http://www.opentravel.org/OTA/2003/05"/>
    <xsd:import schemaLocation="http://localhost/Notification/NotificationService.svc?xsd=xsd1" namespace="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"/>
    <xsd:import schemaLocation="http://localhost/Notification/NotificationService.svc?xsd=xsd3" namespace="http://schemas.xmlsoap.org/ws/2004/03/addressing"/>
    <xsd:import schemaLocation="http://localhost/Notification/NotificationService.svc?xsd=xsd2" namespace="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"/>
    <xsd:import schemaLocation="http://p/Notification/NotificationService.svc?xsd=xsd4" namespace="http://htng.org/2011A"/>
</xsd:schema> 
```

编辑 2：这似乎只发生在 64 位机器上，并且在 32 位机器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:59:15.520

原来是 web.config 中指定的重定向模块配置的问题

# java - android start activity and keep running previous

> ID：11523856
> 
> 赞同：0
> 
> 时间：2012-07-17T13:46:24.780
> 
> 标签：java, android, eclipse

I would like to call splashScreen activity while current activity is been executed. Once current activity finishes its load, finish splashScreen activity. How can I call one activity and keep executing current activity? Thank you.

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = new Intent(TabBarActivity.this, splashScreen.class);
        startActivity(intent);

        setContentView(R.layout.main);

        cicle();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:49:55.533

Have a ProgressBar load in your SplashScreen activity via an AsyncTask. Keep updating the progressbar in that activity and once the loading is fully completed, you can start a new activity in maybe..postExecute() method.

You can refer to this: [Progressbar in Splashscreen android](https://stackoverflow.com/q/3740458/735675)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:50:52.963

I'd suggest this:

1.  Make the Splashscreen the entry point of your application.
2.  From the SplashscreenActivity execute the long-running task in the background (see AsyncTask and its doInBackground() method)
3.  When that's finished, switch to the next activity and transfer the background operation result (intent.putExtra...)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:48:39.960

do the "loading" in splash activity instead, whenever the loading ends, launch the next activity. There is no need for something that complex

# android - 使用php获取GCM的android注册ID

> ID：11523857
> 
> 赞同：1
> 
> 时间：2012-07-17T13:46:38.593
> 
> 标签：android, zend-framework, google-cloud-messaging

我正在兜圈子试图弄清楚这一点。让推送通知在 iOS 上工作正常，现在尝试对 android GCM 做同样的事情。我被困在如何公开允许我收集用户注册 ID 的服务上。在我的服务器上使用 java 真的很痛苦，所以只有 php 的解决方案会很有用。到目前为止，我的通知脚本看起来像这样：

```
require_once('config.php');
require_once 'Zend/Mobile/Push/Gcm.php';
require_once 'Zend/Mobile/Push/Message/Gcm.php';

$con = mysql_connect($CONFIG['db']['host'] , $CONFIG['db']['user'], $CONFIG['db']['pass']);
if (!$con) {
  echo "DBConnectionError: Could not connect to database";
}

$db = mysql_select_db($CONFIG['db']['database'], $con);
if (!$db) {
  echo "DBSelectError: Could not select database";
}

// optain list of devices to send pn to
$qt = "SELECT uid userid, apntoken "
    . "FROM members "
    . "WHERE apntoken IS NOT NULL "
    . "AND uid IN ("
    .   "SELECT fuid userid "
    .   "FROM avail "
    .   "WHERE apnsent IS NOT TRUE "
    .   "UNION "
    .   "SELECT uid userid "
    .   "FROM availbinary "
    .   "WHERE apnsent IS NOT TRUE "
    .   ") ";

//send gcm message
    $message = new Zend_Mobile_Push_Message_Gcm();
    $message->setId(time());
    $message->addToken($tokenRec['apntoken']);
    $message->setData($alert);

    $gcm = new Zend_Mobile_Push_Gcm();
    $gcm->setApiKey('AIzaSyCxxxxxxxxxxxxxxxnFn5mGkM');

    try {
        $response = $gcm->send($message);
    } catch (Zend_Mobile_Push_Exception $e) {
        // all other exceptions only require action to be sent or implementation of exponential backoff.
        die($e->getMessage());
    } 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:14:37.643

您需要在您的 php 上创建一个 POST 方法，以便用户“上传”他们的registration_id。有大量关于如何公开 PHP POST 请求的教程。假设这个 POST 请求的 URI 是`http://yourserver/gcm/send_reg_id`，这个 body 的 Content-Type 可以是任何你想要的（文本、json、xml）。假设您使用 json，您的应用程序将向上述 url 发送 POST 请求，正文如下：

```
{ "reg_id" : "asdadsafdsf34ZXZZZZx", "user_id" : "xxxxxx" } 
```

您的服务器将从 POST 请求正文中提取上述 json 字符串，并将 reg_id 插入到您的数据库中。

然后在您的应用程序中，只需使用 gcm-client.jar 库，并在收到 onRegistered() 回调后，将上述 POST 请求发送到您的服务器。

有几点需要考虑：

1.  使请求 https 是安全的
2.  添加“user_id”来跟踪用户的注册情况，以便将来提供个性化的推送通知。

# c# - 如何使用 ASP.NET 和 C# 显示哪些字段仍需要填写？

> ID：11523865
> 
> 赞同：3
> 
> 时间：2012-07-17T13:46:50.823
> 
> 标签：c#, asp.net, visual-studio-2010, requiredfieldvalidator, required-field

我目前正在使用 C# 和 ASP.NET 在 Visual Studio 2010 中处理 Web 表单。这是一个简单的表格 - 一个在线申请 - 有几个必填字段。我已经有正则表达式和必填字段验证器，当字段留空时会显示红色星号，但它们相对难以看到。

我们的用户是一群牛仔和农场工人，所以如果他们没有立即看到他们缺少的东西，他们只会继续点击“继续”。

有没有办法在页面底部打印缺少哪些字段？

在此先感谢，艾莉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:48:33.207

将 ValidationSummary 控件放在表单末尾的按钮正上方。

[ValidationSummary 控件简介](http://msdn.microsoft.com/en-us/library/f9h59855%28v=vs.80%29.aspx)

# javascript - jQuery如何确保在继续脚本之前打开对话框？

> ID：11523873
> 
> 赞同：1
> 
> 时间：2012-07-17T13:47:15.940
> 
> 标签：javascript, jquery, progress-bar, modal-dialog

我有以下代码，它应该打开一个带有进度条的模式对话框。随着 ajax 调用在后台运行，进度条应该会前进。问题是，直到 for 循环完成后，对话框才打开，所有的 ajax 调用都完成了。我想我应该以`.promose()`某种方式实现该功能，但我不确定在这种情况下如何实现它。有人能帮我吗？

```
jQuery('#div_id')
    .button()
    .click(function(){
        var grid = jQuery('#grid_id');
        var sel_ar = grid.jqGrid('getGridParam', 'selarrrow');
        var last_id = 0;

        //open modal progress bar to display the progress of the emails
        jQuery('#dialog').html('<div id="progressbar"></div>');
        jQuery('#dialog').dialog({
            modal: true
        });
        jQuery('#dialog').dialog('open');

        for (var i = 0;i < sel_ar.length;i++){
            var orderid = jQuery('#grid_id').jqGrid('getCell', sel_ar[i], 'order_id');

            if (last_id != orderid){
                jQuery.ajax({
                    async: false,
                    url: "/scripts/ajax/script.php",
                    type: "post",
                    data: "orderid="+orderid,
                    success: function(data){
                        if (data != "true"){
                            alert(data);
                        }
                        jQuery('#progressbar').progressbar({ value: Math.round((i/sel_ar.length)*100) });
                    }
                });
            }
            last_id = orderid;
            pausecomp(1000);
        }
        //jQuery('#dialog').dialog('close');
        jQuery("#keys_list").trigger("reloadGrid");
        jQuery("#purchased_users").trigger("reloadGrid");
    }); 
```

这`pausecomp()`是一个仅暂停一定毫秒数的函数。我试图把它放进去以确保它需要一些时间来完成 for 循环，所以我可以看到进度条在滴答作响......不幸的是，它只是延长了我必须等待看到进度条弹出之后的时间一切都完成了。

我做了一个说明问题的小提琴。注意它是如何等到 for 循环结束来更新进度条的。[http://jsfiddle.net/YxGqG/5/](http://jsfiddle.net/YxGqG/5/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:51:06.627

您需要删除异步错误。它将锁定您的浏览器，如果对话框尚未显示，则在 ajax 请求之后才会显示。此外， async:false 将导致进度条的更新变得笨拙。

删除“async:false”行，然后您需要通过更新进度条来修复状态问题，在您修复该问题后，这将按照您的意愿工作。

此外，您在进度条更新中看到的滞后是由于使用了 async:false。浏览器的 UI 线程与您的 javascript 处于竞争状态，当您使用 async false 进行 ajax 调用时，一切都会停止，包括“正在进行的”ui 更新以更改进度条的显示。这是一个高水平。

在这里更新：http: [//jsfiddle.net/xe8wF/2/](http://jsfiddle.net/xe8wF/2/)（修​​复了导致它停止在 99% 的错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:22:03.447

这里有一个想法可以让你的进度条工作：（你仍然需要使用它来将它与你的代码集成，但我希望这可以帮助你理解你应该如何处理 ajax 来更新你的进度条。

```
function changeProgress(position) {
    $('#progressbar').progressbar({
            value: position
    });
}

function updatePosition() {
    var position;
    $.post('ajax/get_progress', function(data) {
      // determine position from data - and store it into position
      position = ...;
      changeProgress(position);
      if(position < 100) {
          updatePosition();
      }        
    });
} 
```

希望这能让事情更清楚。

# ruby - 为什么在这个例子中 define_method 没有创建一个新的类方法？

> ID：11523875
> 
> 赞同：0
> 
> 时间：2012-07-17T13:47:22.637
> 
> 标签：ruby, metaprogramming

我有这个代码：

```
module Helper
  def translates(*attributes)
    attributes.each do |attribute|
      define_method("find_by_#{attribute}") do |value|
        value
      end  
    end  
  end  
end  

class SomeClass
  extend Helper
  translates :foo
end 
```

现在，在我看来，该方法`SomeClass.find_by_foo`应该存在。但事实并非如此。你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:54:34.767

你会发现`SomeClass.new.respond_to?(:find_by_foo)`返回 true。如果要将方法添加到类端，请使用`define_singleton_method`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:57:12.197

### 使用特征类

您可以使用 eigenclass 将该方法定义为类方法。例如：

```
module Helper
  def translates(*attributes)
    attributes.each do |attribute|
      define_singleton_method("find_by_#{attribute}") do |value|
        value
      end
    end
  end
end 
```

# jquery - 边框在 IE 中不起作用

> ID：11523882
> 
> 赞同：0
> 
> 时间：2012-07-17T13:47:53.490
> 
> 标签：jquery, css, internet-explorer, xhtml

我有以下代码在向下滚动页面时修复表格的标题。

我不知道为什么，但在小提琴中不能在 FF 中工作 :(

见代码：http: [//jsfiddle.net/S63dy/](http://jsfiddle.net/S63dy/)

如果你在外面尝试小提琴，它就像 FF 中的魅力一样，但边框没有在 IE 上显示。

我使用 IE9 和 IE Tester（我在另一台机器上用 IE8 尝试过）。

我尝试通过设置行样式并在内部使用标题来使用标题，但在 IE 上也没有边框。

有人能帮我吗 ？

谢谢和抱歉英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:36:36.557

您的 CSS 似乎没问题，但您将`visibility`整个克隆表设置为`hidden`- 看起来这会阻止边框呈现。

你可以改变这个：

```
$("#clone").css({
    visibility: 'hidden'
}); 
```

至：

```
$("#clone").children().not('thead').css({
    visibility: 'hidden'
}); 
```

看到[这个 jsfiddle](http://jsfiddle.net/jfrej/S63dy/5/)。

或者甚至更好的是删除不必要的`tbody`并且根本不要触摸`visibility`。

`thead`或自行克隆- 如果您正在处理一个巨大的表，这将占用更少的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:06:47.187

您不应该在 CSS 中设置 TH 样式。

TH 是标题单元格。

TD 单元用于存储对您来说应该可以正常工作的数据。

# jquery - Jquery Ajax 请求发布数据并停留在该页面上

> ID：11523883
> 
> 赞同：0
> 
> 时间：2012-07-17T13:47:56.017
> 
> 标签：jquery, ajax

我有两页第一页将数据发布到第二页，我希望我们的请求保留在第二页？

```
$.ajax({
                    cache: false,
                    url: base_path + '/second.php',
                    type: 'post',
                    data: {
                        div_contenant: div_contenant
                    },
                    success: function(data){

                    }
                }) 
```

我们的第二页生成 pdf 文件，我们希望我们的请求保留在第二页并在此调用中显示第二页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:10:10.983

不要使用 AJAX，只需`/second.php`使用表单或链接加载。

# mysql - MySQL Session - 杀死查询以解锁表

> ID：11523884
> 
> 赞同：6
> 
> 时间：2012-07-17T13:47:57.033
> 
> 标签：mysql

查询已锁定 MySQL 中的表。如何杀死正在运行的查询会话来解锁表？

我不知道在 MySQL 中查看活动会话/进程。我怎么能通过SSH呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T13:53:41.467

进入 PuTTY，然后登录 MySQL。在 MySQL 中运行以下命令：

```
show processlist; 
```

这将显示所有正在运行的进程的列表。您可能会找到正在锁定您的表的查询，因为它可能是运行时间最长的查询，并且有许多其他查询在等待锁定释放。记下此查询的进程 ID。

然后运行：

```
kill [PROCESSID]; 
```

这将杀死该过程。当然，您需要以有权停止已启动查询的用户身份执行此操作（因此请使用同一用户，或者`root`如果您必须这样做）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:56:53.143

使用 MySQL 控制台或其他工具运行查询`SHOW PROCESSLIST`以查看活动查询。

并运行查询`kill 123`以终止 id 为 123 的查询/连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T22:34:08.277

使用此命令更易于阅读：

```
 mysql> show processlist\G 
```

然后正如上面所说的，使用命令：

```
 kill PROCESSID; 
```

示例是：

```
 kill 1234; 
```

其中 1234 是显示为使用最多资源/时间的 ID。不过要小心，因为它可能导致数据损坏。

# documentation - Framemaker TOC 布局

> ID：11523885
> 
> 赞同：1
> 
> 时间：2012-07-17T13:47:59.920
> 
> 标签：documentation, framemaker

我在 Adob​​e Framemaker 中有一本书并创建了一个 TOC。现在的问题是我无法将我的母版页分配给我的正文页。目录也不包含我的任何段落和字符格式。谢谢帮助。反应器

PS如果我在一个新文件中开始一个新章节，通常我只是复制旧的，所以我保留我的段落和字符格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:23:23.917

问题是 Framemaker 占据了本书的第一章，这是我的扉页，并且只提供了其中的那些参考页！所以第一章必须包含你想在你的目录中使用的参考页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T17:45:26.043

您使用的是哪个版本的 FrameMaker？通常，您可以将母版页应用于您正在使用的目录页。要更改目录的格式，您必须在参考页面中编辑目录。将您的格式应用于参考页面底部的样式，包括制表符和前导字符。然后您的 TOC 将按照您的设计方式进行格式化。

# grails - Grails 选择标记结果

> ID：11523887
> 
> 赞同：0
> 
> 时间：2012-07-17T13:48:01.010
> 
> 标签：grails, data-binding

我正在尝试`hasMany`使用数据绑定通过表单更新关系，但我得到的数据`params`似乎不正确。

领域类：

```
class CustomerSite {

static hasMany = [dhrs:DeviceHistoryRecord];

static mapping = {
    id generator:'sequence', params:[sequence:'cs_seq']
}
    ...
} 
```

编辑视图：

```
...
<g:select name="dhrs" id="dhrs" 
from="${DeviceHistoryRecord.list()}"
multiple="multiple"
optionKey="id"
value="${customerSiteInstance?.dhrs}"/> 
```

控制器：

```
def update = {
    def customerSiteInstance = CustomerSite.get( params.id )
    if(customerSiteInstance) {

        customerSiteInstance.properties = params

        String flashMsg = new String();

        flash.message = "";

        if(!customerSiteInstance.hasErrors() && customerSiteInstance.save()) {
            flash.message += "Customer Site ${customerSiteInstance.toString()} updated"
            redirect(action:show,id:customerSiteInstance.id)
        }
        else {
            flash.message = flashMsg
            render(view:'edit',model:[customerSiteInstance:customerSiteInstance])
        }
    }
    else {
        flash.message = "Customer Site not found with id ${params.id}"
        redirect(action:edit,id:params.id)
    }
} 
```

这给了我一个错误：

> 错误 200：org.springframework.beans.NotReadablePropertyException：bean 类 [java.lang.String] 的无效属性“currentDeviceData”：Bean 属性“currentDeviceData”不可读或具有无效的 getter 方法：getter 的返回类型是否匹配设置器的参数类型？

在控制器代码的这一行：

```
if(!customerSiteInstance.hasErrors() && customerSiteInstance.save()) { 
```

这对我来说没有任何意义，但我做了一些愚弄（实际上很多），最终发现它`g:select`正在将一组索引传递给参数。

视图输出我认为正确的代码：

```
<select name="dhrs" id="dhrs" multiple="multiple" >
  <option value="2421" >801122</option>
  <option value="2422" >801123</option>
  ... 
```

如果我要在列表的索引 0 和索引 1 处选择项目，它不会像我期望的那样传入一组“2421”和“2422”。它传入“0”和“1”。更糟糕的是，在我运行之后，当我回到编辑页面并再次运行它时，这次选择索引 8 处的内容，它将有“8”......还有“0”和“1” “上次的。

环顾四周，我发现[Selecting multiple values from select tag - Grails](https://stackoverflow.com/questions/8476880/selecting-multiple-values-from-select-tag-grails)，它还有一些其他想法，包括进行如下更改：

```
<g:select name="dhrs.id" 
  from="${DeviceHistoryRecord.list()}" 
  multiple="multiple" 
  optionKey="id" 
  value="${customerSiteInstance?.dhrs*.id}"/> 
```

但这给了我一个缺少的方法错误，尽管它确实解决了返回索引而不是实际值的问题。

关于这里发生了什么以及如何解决它的任何想法？

顺便说一句，我正在运行 1.0.4 版的 Grails。是的，我很想升级它，但我不能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:47:20.997

我花了更多时间在这上面，并得到了部分解决方案。这就是我最终得到的结果：

```
<g:select name="dhrsX.id" 
          from="${DeviceHistoryRecord.list()}"
          multiple="multiple"
          optionKey="id"
          value="${customerSiteInstance?.dhrs*.id}"/> 
```

注意那是`dhrsX`- 不是`dhrs`。这样，我可以在将它们设置到`CustomerSite`对象之前手动查找它们。唯一的复杂情况是，如果用户选择一个项目，则`dhrsX`包含一个`String`; 如果用户选择多个项目，则`dhrsX`包含`String`s 的列表。为了解决这个问题，我需要重新打包选择结果，然后再尝试直接使用它们。

```
def update = {
    def customerSiteInstance = CustomerSite.get( params.id )
    if(customerSiteInstance) {

        customerSiteInstance.properties = params
        customerSiteInstance.dhrs.clear()

        for(thisDHR in params.dhrsX) {
            def value = thisDHR.getValue()
            def ArrayList<String> list = new ArrayList<String>();
            if (value instanceof String) {
                list.add(value)
            } else {
                for(oneValue in value) {
                    list.add(oneValue)
                }
            }

            for(aDHR in list){
                DeviceHistoryRecord rec = DeviceHistoryRecord.get(aDHR)
                if (rec != null) {
                    customerSiteInstance.addToDhrs(rec)
                } else {
                    print(thisDHR + " NOT FOUND!")
                }
            }
        }
... 
```

现在单选和多选工作......但还有一个小问题。尽管在添加新选择之前进行了调用`clear()`，`dhrs`但之前的选择仍然存在。但是，我不希望这几乎像修复一样复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:09:46.320

在 g:select 中使用：

```
value="${customerSiteInstance?.dhrs?.id}" 
```

问号而不是星号。这就是我拥有“多选”的方式。

# javascript - HTML：密码字段中的 HTML5 占位符属性问题 - 显示正常文本？

> ID：11523888
> 
> 赞同：9
> 
> 时间：2012-07-17T13:48:01.480
> 
> 标签：javascript, html, passwords, placeholder

我正在制作一个登录表单，其中有两个字段-

简化：

```
<input type="text">
<input type="password" placeholder="1234567" > 
```

~~在我的测试（FF、Chrome）中，占位符显示灰色文本。如何在密码“点”中包含占位符文本？~~ 并且在 IE 中有占位符支持？

~~例如。用户看到的是伪造的灰色密码，而不是文本 1233467。~~

（我有 jquery 可用）

非常感谢，

哈雷

**编辑：看起来这是使用占位符的错误方法。但是，如何获得 IE 支持？谢谢**

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-17T14:05:00.270

尝试在占位符中使用密码点代码，如下所示：

```
placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;" 
```

有关 IE 中的支持，请参阅其他线程，例如 [Showing Placeholder text for password field in IE](https://stackoverflow.com/questions/6052544/showing-placeholder-text-for-password-field-in-ie)或[placeholder works for text but not password box in IE/Firefox using this javascript](https://stackoverflow.com/questions/5258120/placeholder-works-for-text-but-not-password-box-in-ie-firefox-using-this-javascr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:12:25.050

要回答您更新的问题，

我正在建立[这个](https://stackoverflow.com/questions/5522164/input-placeholders-for-internet-explorer)线程中给出的答案。

将表单包装在 span 元素中。然后，您可以在密码字段上添加一个标签作为占位符。最后，为了在输入密码时删除标签，绑定密码字段的按键并从标签中删除文本。这是代码示例，您可能需要更改 id：

```
<span style="position: relative;">
<input id="password" type="password" placeholder="Password" >
<label id="placeholder" style="font: 0.75em/normal sans-serif; left: 5px; top: 3px; width: 147px; height: 15px; color: rgb(186, 186, 186); position: absolute; overflow-x: hidden; font-size-adjust: none; font-stretch: normal;" for="password">Password</label>
</span>
<script type="text/javascript">
    $(document).ready(function(){
        $('#password').keypress(function(){
            $('#placeholder').html("");
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:02:17.137

尽管我从用户体验的角度反对这一点，但我会为此提供答案。

不要使用 HTML5 属性`placeholder`，`value`而是使用。

```
<input type="password" value="1234567"> 
```

然后`focus`，将 替换为`value`空字符串。

```
var inputs = document.getElementsByTagName('input'),
    i = 0;
for (i = inputs.length; i--;) {
  listenerForI(i);
}

function listenerForI(i) {
  var input = inputs[i],
      type = input.getAttribute('type'),
      val = input.value;
  if (type === 'password') {
    input.addEventListener('focus', function() {
      if (input.value === val) input.value = '';
    });
    input.addEventListener('blur', function() {
      if (input.value === '') input.value = val;
    });
  }
} 
```

我想重申我不推荐这种方法，但这会满足您的需求。

**编辑：**

`placeholder`如果您的浏览器不支持使用 jQuery ，请访问此页面，该页面将模拟功能： [http ://www.cssnewbie.com/cross-browser-support-for-html5-placeholder-text-in-forms/](http://www.cssnewbie.com/cross-browser-support-for-html5-placeholder-text-in-forms/)

# sql - 空值处理

> ID：11523890
> 
> 赞同：3
> 
> 时间：2012-07-17T13:48:05.037
> 
> 标签：sql, database, sql-server-2008

假设我有一个查询

```
SELECT val FROM tbl 
```

我想编写查询，当 val 不为 null 时输出“ValueIsNotNull”，当 val 为 null 时输出“ValueIsNull”。有没有可能用一根线做到这一点。截至目前，我发现只有`ISNULL(val,'ValueIsNull') AS val1`. 但如果值不为空，则打印原始值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T13:50:11.903

```
select
    case
        when val is null then 'ValueIsNull'
        else 'ValueIsNotNull'
    end
    as NewVal
from tbl 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T13:50:23.737

您需要 case 语句功能：

```
select (case when val is NULL then 'ValueIsNull' else 'ValueIsNotNull' end) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T13:50:23.770

```
SELECT CASE WHEN val IS NULL THEN 'ValueIsNotNull' ELSE 'ValueIsNull' END 
```

# c - 在父进程与分叉子进程中使用本地函数的调用延迟？C

> ID：11523893
> 
> 赞同：0
> 
> 时间：2012-07-17T13:48:10.090
> 
> 标签：c, fork

我很难制作一个场景，该场景将显示调用简单本地函数与调用相同函数但在子进程内的时间差。我正在测试的特定函数显示本地函数和子进程的 difftime(x,y) 函数没有差异（时间 = 0）。有人可以概括这两种做同一件事的方法的潜在时间差异吗？

作为旁注，我尝试将每个任务执行 1000 次，然后将时间除以 1000，但即使如此，返回的时间也是 0。例如，我有：

```
time(&start);    
for(int i = 0; i<1000; i++){
  reply[i] = my_channel.send_request("hello");
}
time(&end);
time_req_1 = difftime(end,start); 
```

“time_req_1” = 0 返回的时间。我只将这个代码段放入以防万一我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:55:29.600

您必须记住，分辨率以`time`秒为单位。一种常用的计时方法，例如函数调用是使用[`clock`](http://linux.die.net/man/3/clock)：

```
clock_t start_time = clock();

some_lengthy_function_call();

clock_t end_time = clock();

printf("Elapsed time: %.02f seconds\n",
       (double) (end_time - start_time) / CLOCKS_PER_SEC); 
```

**编辑：**如果您想要比`clock`可以提供的更好的准确性和分辨率，请参阅 Jonathan Leffler 对您的问题的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:55:24.597

在大多数操作系统的大多数机器上，时间只能精确到一秒。对于仅 1000 次迭代，您需要在架构上找到更准确的时间函数。

一个相对便携的界面是[`clock()`](http://en.cppreference.com/w/c/chrono/clock). 上次在windows下用MSVC试了一下，准确度是18ms。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:57:20.547

对于您问题的第一部分，您需要确保在 fork 调用之后，您没有调用`exec`.

在你的第二部分，嗯......它的运行速度太快了`difftime`尝试使用`gettimeofday()`它会给你带来微秒

# android - RedLaser - 未调用 getBeepResource

> ID：11523897
> 
> 赞同：1
> 
> 时间：2012-07-17T13:48:27.847
> 
> 标签：android, barcode

使用 RedLaser 的 3.X SDK getBeepResource() 永远不会被调用。该应用程序可以很好地扫描条形码，但我也想要一个音频哔声。

什么使蜂鸣声？我在 BarcodeScanActivity 类上看不到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:20:58.617

在 3.0 RedLaser SDK 中，我们删除了 SDK 在扫描条码时播放声音的功能。相反，BarcodeScanActivity 通过 onScanStatusUpdate 方法定期通知其找到的条形码的具体子类。您可以在 SDK 文档中了解此方法。

您可以使用 Android 的 MediaPlayer 对象创建一个播放声音文件的媒体播放器，并在找到新条形码时调用 MediaPlayer.start()。

我们改变它的工作方式的原因与“错误的条形码”问题有很大关系。这是您的应用程序正在寻找特定类型的条形码的地方，但用户将手机放在不同类型的条形码上，因为他们不知道更好。使用 3.0 SDK，您的应用程序可以将 SDK 配置为扫描所有支持的条形码类型，如果用户尝试扫描“错误”类型，您可以在不离开扫描会话的情况下温和地告诉他们。您只需要在结果进入时对其进行评估，并且在看到“正确”条形码类型之前不要退出会话。

此解决方案的副作用是 SDK 不知道哪种条形码类型是“正确”类型，哪些是应用程序想要被告知但实际上不会使用的类型。因此，每次找到条形码时让 SDK 播放哔声是没有意义的。只有在扫描“正确”类型的条形码并且只有应用程序知道那是什么时才应播放哔声。

# ruby-on-rails - 按小时、天、月和年生成计数统计信息

> ID：11523902
> 
> 赞同：2
> 
> 时间：2012-07-17T13:48:35.127
> 
> 标签：ruby-on-rails, activerecord

我有一个模型视图：

```
View(id: integer, created_at: datetime) 
```

我想在一段时间内生成**每小时、每天、每月或每年的查看次数，以便在图表上使用它们。**我已经在做类似的事情：

```
View.group('DATE(views.created_at)')
    .select("*, count(*) AS series_count, DATE(views.created_at) AS series_time")
    .where(:created_at => (Time.now-7.days)..Time.now) 
```

这导致：

```
2012-06-16 => 20
2012-06-17 => 12
2012-06-18 => 15
2012-06-20 => 38 # Issue: Didn't include a day with no records
2012-06-21 => 11
2012-06-22 => 76 
```

1.  第一个问题是它不会在没有记录的情况下为替代天数或月数或任何其他内容添加填充。

2.  第二个问题是有时它会增加一天，导致 8 天！

3.  第三个问题是，当我尝试显示每小时和其他时间周期的计数时，它变得非常棘手，有人可以提出一个更好的解决方案，它也适用于日周期以外的其他时间周期吗？

基本上我正在制作一个包含在所有模型中的模块时间轴，以便轻松生成统计信息，例如：

```
include Timeline # on the model
Model.timeline(
      :time_column => :created_at,
      :period => (Time.now-24.hours)..Time.now,
      :by => :hours
    ) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:13:45.940

1）有很多方法可以解决这个问题，但我不确定哪种方法更有效。所有这些都包括首先制作一个您要显示的日期数组，然后添加结果子集中没有的内容或将您从数据库中获得的内容插入到地图中。我做了一些类似的事情来制作预期时间的数组：

```
class Time

  #Period is the number of seconds between each interval 
  def upto(end_time, period)

    division_count = (end_time.to_i - self.to_i) / period

    divisions = division_count.times.map { |div| self + (period * div) }

    divisions << end_time

  end

  #Period is the number of seconds between each interval 
  def downto(start_time, period)

    division_count = (self.to_i - start_time.to_i) / period

    divisions = division_count.times.map { |div| start_time + (period * div) }
    divisions

  end

end 
```

要获取两天之间的天数，请按如下方式调用它：

```
time_one.upto(time_two, 1.day.to_i) 
```

警告：这将包括两天。要获得 7 天的范围，请从 time_two 中删除一天。

```
time_one.upto(time_two - 1.day, 1.day.to_i 
```

2）这个问题是你正在使用当前时间而不是最后一小时。您需要回到最后一天/小时/分钟，然后从中减去。对于几天之间的范围，您可以在 2012 年 4 月这样做：

```
Time.utc(2012, 04)..Time.utc(2012, 05) 
```

这将从四月第一天的午夜到四月最后一天的午夜。有效地获取当月的所有数据。您可以通过删除月份参数来多年执行此操作，并通过添加天参数来执行几天。[请参阅此处的用法。](http://www.ruby-doc.org/core-1.9.3/Time.html#method-c-utc)

几个小时它有点复杂。您可以只创建一个新日期，只将您想要保留的内容转移到新日期，从而剥离您不需要的内容，然后从中减去。

3）自从我完成 SQL 以来已经有一段时间了，所以我不能真正给你确切的代码，但你总是可以尝试格式化你的日期输出，所以它包括小时/分钟/等，所以当它分组时，它会知道的。即使将其格式化为字符串也可以。一种效率较低的方法是为每个时间范围单独调用。

# linux - 如何在 vsftpd 中强制只接受 ssl 连接？

> ID：11523904
> 
> 赞同：6
> 
> 时间：2012-07-17T13:48:34.147
> 
> 标签：linux, ssl, ftp, vsftpd

我确实`vsftpd`使用 openssl 安装和配置了 ssl。但我只想接受 ssl 连接，或者换句话说，拒绝非 ssl 连接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T04:03:53.850

> 如果您设置“force_local_logins_ssl=YES”，那么您的客户端将需要使用支持 AUTH TLS/SSL 的 FTP 客户端才能连接。如果您将其保留为“否”，那么人们可以安全或不安全地连接。

[来源](http://wiki.vpslink.com/Configuring_vsftpd_for_secure_connections_%28TLS/SSL/SFTP%29)

您需要做的就是在`/etc/vsftpd.conf`或 中更改该设置`/etc/vsftp/vsftpd.conf`；根据您的发行版，该`.conf`文件应该位于这两个位置中。然后你需要做的就是重启`vsftpd`守护进程：

```
vsftpd restart 
```

**编辑**

您可能还需要设置`ssl_enable=YES`以使其生效（正如 Tegran 在评论中指出的那样）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-20T21:24:09.750

您需要设置以下选项`/etc/vsftpd.conf`并重新启动服务器：

```
ssl_enable=YES 
```

设置`force_local_logins_ssl=YES`也是必需的，但只要您启用了 SSL，它实际上就是默认设置。

请注意，如果您只是设置`force_local_logins_ssl=YES`没有，`ssl_enable=YES`那么您将**不会**阻止人们在没有加密连接的情况下登录。

# eclipse-rcp - Tycho 不在更新站点中包含根文件

> ID：11523907
> 
> 赞同：2
> 
> 时间：2012-07-17T13:48:47.017
> 
> 标签：eclipse-rcp, p2, tycho

我正在尝试使用 tycho 构建一个 Eclipse 功能。它有一些二进制依赖项在 build.properties 文件中定义为根文件：

```
root.win32.win32.x86=rootfiles/win32/
root=rootfiles/all/ 
```

该功能构建良好，并且为我定义的两个根文件夹提供了两个 .zip 工件。

但是，我还使用`eclipse-update-site`tycho 指令为该功能构建了一个更新站点。更新站点目标文件夹构建正确，但不包含根 zip，仅包含功能 .jar 和插件 .jars。

有没有办法使用 tycho 在更新站点中包含根文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:23:58.360

请改用打包类型 eclipse-repository，请参阅[http://wiki.eclipse.org/Tycho/Packaging_Types#eclipse-repository](http://wiki.eclipse.org/Tycho/Packaging_Types#eclipse-repository)

# google-chrome - Chrome 扩展安装源

> ID：11523910
> 
> 赞同：3
> 
> 时间：2012-07-17T13:48:57.277
> 
> 标签：google-chrome, google-chrome-extension

现在要添加自定义扩展，我们必须这样做：http: [//www.chromium.org/administrators/policy-list-3#ExtensionInstallSources](http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources)

但我不知道如何在我的注册表中添加它？Software\Policies\Google\Chrome\ExtensionInstallSources\1 = "https://corp.mycompany.com/*"

是在 hkey_local_machine 还是 hkey_current_user 中？

“1”是键还是 REG_SZ？

“https://corp.mycompany.com/*”是 REG_SZ 值名称还是 REG_SZ 值数据或其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:18:23.830

> 是在 hkey_local_machine 还是 hkey_current_user 中？

无论哪种方式

> “1”是键还是 REG_SZ？

REG_SZ 值名称，而不是键。

> “https://corp.mycompany.com/*”是 REG_SZ 值名称还是 REG_SZ 值数据或其他？

价值数据

更改将在浏览器**重新启动**时应用。

# entity-framework - 不存在从对象类型 System.RuntimeType 到已知托管提供程序本机类型的映射

> ID：11523912
> 
> 赞同：11
> 
> 时间：2012-07-17T13:49:02.433
> 
> 标签：entity-framework

我有一个带有签名的存储过程

```
PROCEDURE [dbo].[spValidateID]
    @ScanCode       VARCHAR(50),
    @Name           VARCHAR(50) = NULL OUTPUT,
    @ScanTime       DATETIME = NULL OUTPUT,
    @ValidationCode INT = 0 OUTPUT 
```

这应该返回一个 validationCode 并填充 name 和 scanTime 变量。我需要在调用时给它 scanCode 值。

在我的 C# 代码中，我正在这样做。

```
using (var context = new DBEntities())
{
    var pScanCode = new SqlParameter("ScanCode", scanCode);
    var opName = new SqlParameter("Name", name);
    var opScanTime = new SqlParameter("ScanTime", scanTime);
    var opValidationCode = new SqlParameter("ValidationCode", validationCode);

    var test = context.ExecuteStoreQuery<int>("spValidateID @ScanCode, @Name, @ScanTime, @ValidationCode", pScanCode, opName, opScanTime, opValidationCode);
} 
```

但是在运行此程序时，我收到错误从对象类型 System.RuntimeType 到已知托管提供程序本机类型的映射不存在。

任何想法？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T15:26:18.870

您缺少 sqlparameters 和 @ 的输出设置。您的代码应如下所示：

```
SqlParameter pScanCode = new SqlParameter("@ScanCode", ScanCode);
SqlParameter opName = new SqlParameter("@Name", name);
opName.Direction = System.Data.ParameterDirection.Output;   //Important!
SqlParameter opScanTime = new SqlParameter("@ScanTime", scanTime);
opScanTime.Direction = System.Data.ParameterDirection.Output;   //Important!
SqlParameter opValidationCode = new SqlParameter("@ValidationCode ", validationCode);
opValidationCode.Direction = System.Data.ParameterDirection.Output;   //Important! 
```

# android - 将 BURP 套件连接到移动应用程序

> ID：11523915
> 
> 赞同：3
> 
> 时间：2012-07-17T13:49:12.923
> 
> 标签：android, testing, jquery-mobile, cordova

我正在使用 jquery mobile 开发一个混合 android 移动应用程序，并在电话间隙中运行我的应用程序。我想使用 BURP 套件测试这个应用程序的安全问题。我是 BURP 套件的新手。如何将我的应用程序连接到 BURP 套件？在我的模拟器中，我试图更改代理设置

主机：http://127.0.0.1 或 127.0.0.1 端口：8080

但没有任何工作。有人可以指导我如何使用 BURP 套件测试我的应用程序吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T18:28:03.910

您可以在 android 模拟器中运行您的应用程序，并将代理点设置为 burp proxy

./emulator -avd vdtest -http-proxy 127.0.0.1:8080

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T19:47:37.077

对于网络应用程序测试 Burp 的电话应用程序，请尝试在您的网络中设置一个 Linux 路由器，以传递您的手机无线流量。然后使用 iptables 将 HTTP / SSL 重定向到 Burp。

[Burp Suite 的代理电话](https://hackertarget.com/proxy-phone-burp/)

# python - 在给定时间启动函数

> ID：11523918
> 
> 赞同：50
> 
> 时间：2012-07-17T13:49:25.277
> 
> 标签：python, time, scheduler

如何在给定时间在*Python*中运行函数？

例如：

```
run_it_at(func, '2012-07-17 15:50:00') 
```

它将`func`在 2012-07-17 15:50:00 运行该函数。

我尝试了[sched.scheduler](http://docs.python.org/library/sched.html#scheduler-objects)，但它没有启动我的功能。

```
import time as time_module
scheduler = sched.scheduler(time_module.time, time_module.sleep)
t = time_module.strptime('2012-07-17 15:50:00', '%Y-%m-%d %H:%M:%S')
t = time_module.mktime(t)
scheduler_e = scheduler.enterabs(t, 1, self.update, ()) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-17T14:01:09.883

[从http://docs.python.org/py3k/library/sched.html](http://docs.python.org/py3k/library/sched.html)阅读文档：

从那开始，我们需要计算出延迟（以秒为单位）......

```
from datetime import datetime
now = datetime.now() 
```

然后用于`datetime.strptime`解析 '2012-07-17 15:50:00' （我将把格式字符串留给你）

```
# I'm just creating a datetime in 3 hours... (you'd use output from above)
from datetime import timedelta
run_at = now + timedelta(hours=3)
delay = (run_at - now).total_seconds() 
```

然后，您可以使用`delay`传递到 `threading.Timer`实例中，例如：

```
threading.Timer(delay, self.update).start() 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-27T21:31:50.970

看看 Advanced Python Scheduler，APScheduler：[http ://packages.python.org/APScheduler/index.html](http://packages.python.org/APScheduler/index.html)

他们为这个用例提供了一个示例： [http ://packages.python.org/APScheduler/dateschedule.html](http://packages.python.org/APScheduler/dateschedule.html)

```
from datetime import date
from apscheduler.scheduler import Scheduler

# Start the scheduler
sched = Scheduler()
sched.start()

# Define the function that is to be executed
def my_job(text):
    print text

# The job will be executed on November 6th, 2009
exec_date = date(2009, 11, 6)

# Store the job in a variable in case we want to cancel it
job = sched.add_date_job(my_job, exec_date, ['text']) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-09-21T01:38:29.843

可能值得安装这个库：[https](https://pypi.python.org/pypi/schedule) ://pypi.python.org/pypi/schedule ，基本上可以帮助你完成你刚刚描述的一切。这是一个例子：

```
import schedule
import time

def job():
    print("I'm working...")

schedule.every(10).minutes.do(job)
schedule.every().hour.do(job)
schedule.every().day.at("10:30").do(job)
schedule.every().monday.do(job)
schedule.every().wednesday.at("13:15").do(job)

while True:
    schedule.run_pending()
    time.sleep(1) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-03-28T01:00:58.207

这是 stephenbez 使用 Python 2.7 对 APScheduler 3.5 版的回答的更新：

```
import os, time
from apscheduler.schedulers.background import BackgroundScheduler
from datetime import datetime, timedelta

def tick(text):
    print(text + '! The time is: %s' % datetime.now())

scheduler = BackgroundScheduler()
dd = datetime.now() + timedelta(seconds=3)
scheduler.add_job(tick, 'date',run_date=dd, args=['TICK'])

dd = datetime.now() + timedelta(seconds=6)
scheduler.add_job(tick, 'date',run_date=dd, kwargs={'text':'TOCK'})

scheduler.start()
print('Press Ctrl+{0} to exit'.format('Break' if os.name == 'nt' else 'C'))

try:
    # This is here to simulate application activity (which keeps the main thread alive).
    while True:
        time.sleep(2)
except (KeyboardInterrupt, SystemExit):
    # Not strictly necessary if daemonic mode is enabled but should be done if possible
    scheduler.shutdown() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-10T13:54:49.760

我遇到了同样的问题：我无法获得注册的绝对时间事件`sched.enterabs`以被`sched.run`. `sched.enter`如果我计算 a 对我`delay`有用，但使用起来很尴尬，因为我希望作业在特定时区的特定时间运行。

就我而言，我发现问题在于初始化程序中的默认值`timefunc`不是`sched.scheduler`（`time.time`如[示例](https://docs.python.org/3.4/library/sched.html)中所示），而是`time.monotonic`. `time.monotonic`对于“绝对”时间安排没有任何意义，因为来自[文档](https://docs.python.org/3/library/time.html#time.monotonic)，“返回值的参考点未定义，因此只有连续调用结果之间的差异才有效。”

我的解决方案是将调度程序初始化为

`scheduler = sched.scheduler(time.time, time.sleep)`

目前尚不清楚您的 time_module.time 是否实际上是 time.time 或 time.monotonic，但是当我正确初始化它时它工作正常。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-01-11T18:37:00.780

我已经确认开篇文章中的代码有效，只是缺少`scheduler.run()`. 经过测试，它运行预定的事件。所以这是另一个有效的答案。

```
>>> import sched
>>> import time as time_module
>>> def myfunc(): print("Working")
...
>>> scheduler = sched.scheduler(time_module.time, time_module.sleep)
>>> t = time_module.strptime('2020-01-11 13:36:00', '%Y-%m-%d %H:%M:%S')
>>> t = time_module.mktime(t)
>>> scheduler_e = scheduler.enterabs(t, 1, myfunc, ())
>>> scheduler.run()
Working
>>> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-05T01:12:18.183

```
dateSTR = datetime.datetime.now().strftime("%H:%M:%S" )
if dateSTR == ("20:32:10"):
   #do function
    print(dateSTR)
else:
    # do something useful till this time
    time.sleep(1)
    pass 
```

只需寻找时间/日期事件触发器：只要日期“字符串”与更新的“时间”字符串相关联，它就可以作为一个简单的 TOD 函数。您可以将字符串扩展到日期和时间。

无论是字典顺序还是时间顺序比较，只要字符串代表一个时间点，字符串也会。

有人好心地提供了这个链接：

[Python使用的字符串比较技术](https://stackoverflow.com/questions/4806911/string-comparison-technique-used-by-python)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-11T03:56:36.213

很难让这些答案按照我的需要工作，

但我得到了这个工作，它**精确到 0.01 秒**

```
from apscheduler.schedulers.background import BackgroundScheduler

sched = BackgroundScheduler()
sched.start()

def myjob():
    print('job 1 done at: ' + str(dt.now())[:-3])

dt = datetime.datetime
Future = dt.now() + datetime.timedelta(milliseconds=2000)
job = sched.add_job(myjob, 'date', run_date=Future) 
```

用这段代码测试了时间的准确性：起初我做了 2 秒和 5 秒的延迟，但想用更准确的测量来测试它，所以我再次尝试了 2.55 秒和 5.55 秒的延迟

```
dt = datetime.datetime
Future = dt.now() + datetime.timedelta(milliseconds=2550)
Future2 = dt.now() + datetime.timedelta(milliseconds=5550)

def myjob1():
    print('job 1 done at: ' + str(dt.now())[:-3])
def myjob2():
    print('job 2 done at: ' + str(dt.now())[:-3])

print(' current time: ' + str(dt.now())[:-3])
print('  do job 1 at: ' + str(Future)[:-3] + ''' 
  do job 2 at: ''' + str(Future2)[:-3])
job = sched.add_job(myjob1, 'date', run_date=Future)
job2 = sched.add_job(myjob2, 'date', run_date=Future2) 
```

并得到了这些结果：

```
 current time: 2020-12-10 19:50:44.632
  do job 1 at: 2020-12-10 19:50:47.182 
  do job 2 at: 2020-12-10 19:50:50.182
job 1 done at: 2020-12-10 19:50:47.184
job 2 done at: 2020-12-10 19:50:50.183 
```

**通过 1 次测试精确到 0.002 秒**

**但我确实进行了很多测试，准确度从 0.002 到 0.011 不等**

**永远不会低于 2.55 或 5.55 秒的延迟**

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-12-30T11:43:22.383

```
#everytime you print action_now it will check your current time and tell you should be done

import datetime  
current_time = datetime.datetime.now()  
current_time.hour  

schedule = {
    '8':'prep',
    '9':'Note review',
    '10':'code',
    '11':'15 min teabreak ',
    '12':'code',
    '13':'Lunch Break',
    '14':'Test',
    '15':'Talk',
    '16':'30 min for code ',
    '17':'Free',
    '18':'Help ',
    '19':'watever',
    '20':'watever',
    '21':'watever',
    '22':'watever'
}

action_now = schedule[str(current_time.hour)] 
```

# ios - 在 Xcode 4 中动态设置 iOS Bundle 显示名称

> ID：11523920
> 
> 赞同：0
> 
> 时间：2012-07-17T13:49:27.437
> 
> 标签：ios, xcode

例如，我想知道是否可以更改应用程序的捆绑显示名称。更改预处理器宏。

如果您需要不同版本的应用程序，这将很有帮助，只是为了在您的 iphone 的主屏幕上进行区分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:58:14.127

您**不能**以`CFBundleDisplayName`编程方式设置，但是如果您的应用程序已本地化，您可以`CFBundleDisplayName`为本地化列表中的每种语言设置不同的值。

如果您将新版本上传到 AppStore，理论上您**可以**为每个新版本更改一个`CFBundleDisplayName`。如果你幸运的话，苹果不会抱怨的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:52:16.390

您可能不会*动态地*执行此操作（尤其不能使用宏；宏是编译器功能，而不是运行时功能），但是，您可以本地化您的应用程序名称。如果您希望更改应用程序的名称，请更改 info-plist 键的值`LSBundleDisplayName`。

# objective-c - 关闭 UIButton 点击 弹出框不起作用，我做错了什么？

> ID：11523921
> 
> 赞同：0
> 
> 时间：2012-07-17T13:49:32.230
> 
> 标签：objective-c, xcode, xcode4.3, uipopovercontroller, popover

我试图在弹出窗口中单击按钮时关闭弹出窗口并返回变量。有四个按钮，在选择一个按钮时，变量（基于按钮）将返回到原始视图控制器并且弹出框将关闭。我不确定如何尝试传递变量，但我正在尝试使用此页面（http://stackoverflow.com/questions/3565968/dismiss-popover-using-uibutton）至少在按钮单击时关闭弹出框)，由于某种原因，这对我不起作用。当我单击按钮时，绝对没有任何反应。

AddWineViewController 是“根”视图控制器

```
//AddWineViewController.h
//this is the "root" view controller
#import "WineStyleViewController.h"
@interface AddWineViewController : UIViewController <UIPopoverControllerDelegate, MyPopoverDelegate>
@property (nonatomic, retain) UIPopoverController *myPopoverController; 
```

```
//AddWineViewController.m
@implementation AddWineViewController
@synthesize myPopoverController;
-(void)didClickCancelButton {
    //I would like to have the variable passed here, something like self.wineStyle.text=wineStyle; where wineStyle is the variable from the popover.
    [myPopoverController dismissPopoverAnimated:YES];
} 
```

WineStyleViewController 是弹出视图控制器

```
//WineStyleViewController.h
@protocol MyPopoverDelegate <NSObject>
    -(void)didClickCancelButton;
@end
@interface WineStyleViewController : UIViewController
@property (nonatomic, assign) id<MyPopoverDelegate> delegate; 
@property (nonatomic, strong) NSString *wineStyle;
- (IBAction)redWineButton:(id)sender; 
```

```
//WineStyleViewController.m
@implementation WineStyleViewController
@synthesize wineStyle;
@synthesize delegate;

- (IBAction)redWineButton:(id)sender {
    wineStyle=@"Red";
    [self.delegate didClickCancelButton];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:08:29.377

我将首先做一些假设，即故事板中的所有连接都已连接，并且所有对象都已正确创建，并且您已在 segue 中将委托设置为 self。

只是为了确定......确保你的segue包括：

```
// set your destination view controller
WineStyleViewController *destinationController = segue.destinationViewController;
destinationController.delegate=self; 
```

在您的委托（弹出窗口）：WineStyleViewController 中，您将协议定义为：

```
@protocol MyPopoverDelegate <NSObject>
    -(void)didClickCancelButton;
@end 
```

但是您想将 wineStyle 传回根控制器 (AddWineViewController)，因此您需要 1) 添加变量 (wineStyle) 以传回和 2) 传递您的委托的 ViewController（我冒昧地更改为保存而不是取消)

```
@protocol MyPopoverDelegate <NSObject>
-(void)didClickSaveButton (WineStyleViewController *)wineStyleViewController withWineStyle (NSString *)wineStyle;
@end 
```

现在回到 AddWineViewController：

your`-(void)didClickCancelButton:(WineStyle)wineStyle`是你从你的代表那里收到你的葡萄酒风格的地方，所以这个方法应该更像：（再次改变它保存）

```
-(void)didSave
{
    // your methods for dealing with your added wineStyle go hear, as
    // you will already have wineStyle sent back to you from your delegate
    [myPopoverController dismissPopoverAnimated:YES];
} 
```

希望有帮助：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:04:13.157

要将“wineStyle”传递给您的“MyPopover”协议，只需将变量添加到协议中：

```
@protocol MyPopoverDelegate <NSObject>
    -(void)didClickCancelButton:(WineStyle)wineStyle;
@end 
```

..并确保将其发送给代表，如下所示：

```
if ([delegate conformsToProtocol:@protocol(MyPopoverDelegate)]) {
   if ([delegate respondsToSelector:@selector(didClickCancelButton:)]) {
       [delegate didClickCancelButton:selectedWineStyle];
   }
} 
```

关于 Popover 未被解除，请确保存储对 UIPopoverController 的引用并简单地调用：

```
- (void)didClickCancelButton:(WineStyle)wineStyle {
   // ... do something with "wineStyle" here
   [currentPopover dismissPopoverAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:58:30.970

我假设您已正确建立 IBAction 连接（并且当您按下按钮时该方法实际上正在执行）；所以我的下一个想法是，`self.delegate`当控制器出现在屏幕上时，没有正确设置（在显示`AddWineViewController`弹出框的方法中）。

另外，我应该提一下，我可能会稍微改变一下协议的接口，但要记住一些事情：

1.  我不会告诉代表按下取消来触发弹出框的解除；告诉它已经进行了选择。
2.  我更喜欢在签名中传递“孩子”的协议方法：`[self.delegate didChooseWineStyle: self]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:25:16.120

This tutorial really helped me out with a similar issue: [http://ios.biomsoft.com/2011/10/17/beginning-storyboards-in-ios-5-part-2/](http://ios.biomsoft.com/2011/10/17/beginning-storyboards-in-ios-5-part-2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T13:56:22.957

您需要告诉弹出框控制器要拥有什么弹出框，您没有这样做。我不确定你是如何表达你的观点的，但你应该有类似的东西

```
 UIPopoverController paparazzi = [[UIPopoverController alloc] initWithContentViewController:temp]; 
```

# java - 使用链表排队

> ID：11523932
> 
> 赞同：1
> 
> 时间：2012-07-17T13:49:59.790
> 
> 标签：java, linked-list, queue

我正在用 Java 实现一个链接队列。但是，当我运行我的代码时有/有错误/s。

```
public class LinkedQueue<E> implements Queue<E> {
   private int count;
   private Node<E> front, rear;

   public LinkedQueue() {
      count = 0;
      front = rear = null;
   }

   public void enqueue (E element) {
      Node<E> node = new Node<E> ();

      if (isEmpty())
         front = node;
      else
         rear.setNext (node);

      rear = node;
      count++;
   }

   public E dequeue() throws QueueEmptyException {
      if (isEmpty())
         throw new QueueEmptyException  ("queue");

      E result = front.getElement();
      front = front.getNext();
      count--;

      if (isEmpty())
         rear = null;

      return result;

   }

   public E first() throws QueueEmptyException {
      if (isEmpty())
         throw new QueueEmptyException ("queue"); 

      return front.getElement();
   }

   public boolean isEmpty() {
      return (front == rear);
   }

   public int size() {
      return count;
   }

    public E front() throws QueueEmptyException {       
        if (isEmpty())
            throw new QueueEmptyException("Queue underflow.");
        return (E) front.getNext();
    }
} 
```

我一直在配置我的 LinkedQueue 中的问题。请帮我修复代码。我是 Java 新手，可能错误是由语法错误引起的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:55:46.047

您可以使用 java.util.LinkedList 泛型类中 Queue 的所有功能。使用 addLast 方法使元素入队，并使用 removeFirst 方法使元素出队。由于 LinkedList 是双向链接的，因此您应该看到队列的所有性能优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:53:56.070

`java.util.LinkedList`已经实现了一个`Queue`.
为什么不用那个？

```
Queue<T> queue = new LinkedList<>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T13:19:35.180

这看起来非常可疑：

```
public void enqueue (E element) {
  Node<E> node = new Node<E> ();

  if (isEmpty())
     front = node;
  else
     rear.setNext (node);

  rear = node;
  count++; 
```

}

该参数`element`从未使用过。尝试

```
Node<E> node = new Node<E> (element); 
```

或者其他的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:53:43.220

您的 enqueue() 方法对传入的元素不执行任何操作。可能您想将它传递给节点的构造函数？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-30T18:15:12.373

这是使用队列的链表的示例实现。

```
public class LinkedQueue<E> {

    private DoublyLinkedNode<E> head;
    private DoublyLinkedNode<E> tail;

    int size;

    public void enqueue(E item) {

        DoublyLinkedNode<E> oldTail = this.tail;

        DoublyLinkedNode<E> newTailnode = new DoublyLinkedNode<E>(item);

        if(oldTail != null){
            oldTail.setNextNode(newTailnode);
            newTailnode.setNextNode(null);
            this.tail = newTailnode;

        }else{
            this.tail = newTailnode;
            this.head = newTailnode;
        }
        size++;
    }

    public boolean isEmpty() {
        return this.head == null;
    }
    public int length(){
        return size;
    }

    public E deque() {
        if (isEmpty()) {
            throw new NoSuchElementException("Queue underflow");
        }

        E data = this.head.getData();

        this.head = this.head.getNextNode();

        size--;

        return data;
    }

    public E peek() {
        return this.head.getData();
    }

    public static void main(String[] args) {
        LinkedQueue<Double> queuelist = new LinkedQueue<Double>();
        queuelist.enqueue(60.0);
        queuelist.enqueue(12.0);
        queuelist.enqueue(16.4);
        queuelist.enqueue(26.5);

        queuelist.deque();
        System.out.println("queuelist.peek:"+ queuelist.peek());

        queuelist.deque();
        System.out.println("queuelist.length:"+queuelist.length());
        System.out.println("queuelist.peek:"+ queuelist.peek());
    }
}

public class DoublyLinkedNode<E> {
    private E data;
    private DoublyLinkedNode<E> nextNode;
    private DoublyLinkedNode<E> previousNode;

    public DoublyLinkedNode(E data) {
        this.data = data;
    }
    public E getData() {
        return data;
    }
    public DoublyLinkedNode<E> getNextNode() {
        return nextNode;
    }
    public void setNextNode(DoublyLinkedNode<E> nextNode) {
        this.nextNode = nextNode;
    }

    public DoublyLinkedNode<E> getPreviousNode() {
        return previousNode;
    }

    public void setPreviousNode(DoublyLinkedNode<E> prevNode) {
        this.previousNode = prevNode;
    }

    @Override
    public String toString() {
        return this.data.toString();
    }

} 
```

# c# - DocumentFormat.OpenXml - 如何找到元素的不透明度

> ID：11523934
> 
> 赞同：2
> 
> 时间：2012-07-17T13:50:02.987
> 
> 标签：c#, .net, powerpoint, openxml

我有一个幻灯片文档，其中包含一个默认颜色为 70% 不透明度的矩形。

我打开它使用

```
var doc = DocumentFormat.OpenXml.Packaging.PresentationDocument
  .Open(@"path\to\pptx", false); 
```

对于我的一生，通过查看文档根目录中可用的类，我找不到指定形状不透明度的属性。

我在哪里寻找不透明度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:06:55.237

刚刚测试，可以用。

```
using DocumentFormat.OpenXml.Packaging;
using System;
using System.Linq;
using DRAW = DocumentFormat.OpenXml.Drawing;
using DocumentFormat.OpenXml.Presentation;

.....

using (PresentationDocument outputDocument = PresentationDocument.Open(@"C:\Users\YN\Desktop\80.pptx", true))
{

    Slide slide = outputDocument.PresentationPart.SlideParts.First<SlidePart>().Slide;
    CommonSlideData csd = slide.GetFirstChild<CommonSlideData>();
    ShapeTree st = csd.GetFirstChild<ShapeTree>();
    Shape s = st.GetFirstChild<Shape>();
    ShapeProperties sp = s.GetFirstChild<ShapeProperties>();
    DRAW.SolidFill sf = sp.GetFirstChild<DRAW.SolidFill>();
    DRAW.SchemeColor sc = sf.GetFirstChild<DRAW.SchemeColor>();
    DRAW.Alpha a = sc.GetFirstChild<DRAW.Alpha>();
    Console.WriteLine((int)a.Val);

} 
```

# python - 使用 scipy.signal.find_peaks_cwt

> ID：11523935
> 
> 赞同：5
> 
> 时间：2012-07-17T13:50:05.920
> 
> 标签：python, scipy, ipython

我试图获得嘈杂频谱的峰值，看起来 scipy.signal.find_peaks_cwt （记录在[scipy.org](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.find_peaks_cwt.html)）是一个很好的解决方案。

但是，即使更新了 scipy，python（和 ipython）也找不到函数：

```
>>> from scipy.signal import find_peaks_cwt
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: cannot import name find_peaks_cwt 
```

我是不是导入错了？或者它是一个未发布的版本？我在 python 2.7 上使用 scipy 0.10.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T13:58:38.540

看起来它只在 scipy 的 0.11 版本中，您可以从[这里获得](http://sourceforge.net/projects/scipy/files/scipy/)

# jquery - 如何将多选的所有项目转移到另一个多选？

> ID：11523941
> 
> 赞同：0
> 
> 时间：2012-07-17T13:50:23.263
> 
> 标签：jquery

我可以将选定的项目从多个选择元素转移到另一个：

```
<script language="javascript">
    $().ready(function() {
     $('#btnOne').click(function() {
      return !$('#users_interdits option:selected').remove().appendTo('#users_autorises');
     });
     $('#btnUndoOne').click(function() {
      return !$('#users_autorises option:selected').remove().appendTo('#users_interdits');
     });
    });
</script> 
```

此代码没有考虑“全部发送”功能，在这种情况下，当我单击“全部发送”按钮时，#users_interdits 中的所有剩余项目都将转移到#users_autorises。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:54:39.693

```
$('#btnOne, #sendAll').on('click', function() {
    $('#users_interdits option'+($(this).is('#btnOne') ? ':selected' : ''))
        .remove()
        .appendTo('#users_autorises');
}); 
```

唯一的区别是，要发送所有选项，您不需要`:selected`伪选择器。

我假设您的意思是您实际上想从一个选择中清空选项并将它们移动到另一个，而不是在两个选择中都存在选项。如果是后者，只需摆脱对`remove()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:54:43.723

您只需删除`:selected`选择器即可匹配所有选项：

```
$("#users_interdits option").appendTo("#users_autorises"); 
```

# exception - AspectJ AOP:after，当方法抛出异常时

> ID：11523944
> 
> 赞同：0
> 
> 时间：2012-07-17T13:50:33.603
> 
> 标签：exception, aspectj

我已经定义了某个方法的方面，应该在方法结束时“激活”：

```
 <aop:aspect id="HandlerClass" ref="handlerClass">
    <aop:after pointcut = "execution(* MyClass.myMethod(String, String, boolean))"
    method = "handlerMethod" ></aop:after> 
```

问题是在 MyClass.myMethod 之后 - 方面不起作用。在调试时，我注意到 myMethod 引发了异常。问题是：这是预期的行为吗？我的意思是，当 MyClass.myMethod 抛出异常时也应该调用 handlerClass.handlerMethod 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:59:41.250

您需要使用 AfterThrowing 建议。有关更多信息，请参阅[http://www.eclipse.org/aspectj/doc/released/progguide/language-advice.html](http://www.eclipse.org/aspectj/doc/released/progguide/language-advice.html)。

# image - 不重复 xcode 的随机图像生成器

> ID：11523946
> 
> 赞同：0
> 
> 时间：2012-07-17T13:50:41.350
> 
> 标签：image, random, generator, repeat

我将如何创建一个随机图像生成器，它不会重复图像，直到它通过它们一次？

例如：

-（IBAction）随机图像按钮 {

```
int randomimages = rand() % 5;

switch (randomimages) {

    case 0:
        imageview.image = [UIImage imageNamed:@"IMAGE_001.png"];
        break;
    case 1:
        imageview.image = [UIImage imageNamed:@"IMAGE_002.png"];
        break;
    case 2:
        imageview.image = [UIImage imageNamed:@"IMAGE_003.png"];
        break;
    case 3:
        imageview.image = [UIImage imageNamed:@"IMAGE_004.png"];
        break;
    case 4:
        imageview.image = [UIImage imageNamed:@"IMAGE_005.png"];
        break;

default:

        break;

} 
```

如果图像按以下顺序出现：1,4,2,5,4,3 我如何确保在显示所有 5 张图像之前不会再次出现“4”？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:57:53.107

将图像名称存储在 NSMutableArray 中并打乱数组，例如通过类似 [这样的方法 SO answer](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

然后循环遍历数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:58:55.047

Create a NSMutableArray and put 0, 1, 2, 3, 4 on it then whenever a random number is selected remove it like this:

```
[myNSMutableArray removeObjectAtIndex:myRandNumber];

To fill the gap, all elements beyond index are moved by subtracting 1 from their index. 
```

然后只需通过执行以下操作选择一个新的随机数：

```
int randomimages = rand() % 4; //4 would of course be a int var that you substract everytime a new random is generated. 
```

等等。

# android - Android - 如何通过对话框片段将项目添加到数据库后刷新我的列表视图

> ID：11523947
> 
> 赞同：2
> 
> 时间：2012-07-17T13:50:42.773
> 
> 标签：android, sql, database

我有一个`DialogFragment`将项目添加到数据库表的位置。

我还有另一个`Fragment`，它有一个`ListView`显示数据库中所有项目的位置。我可以将项目添加到数据库中，但它不会立即出现在`ListView`从数据库中获取项目的 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:02:33.463

为您创建一个全局变量`MyListAdapter`

```
MyListAdapter adapter;
...

adapter = new MyListAdapter(getActivity(), my); 
```

在它存在的片段中创建一个吸气剂：

```
public MyListAdapter getAdapter() {

    return adapter;
} 
```

当您在数据库中创建一个新条目时，调用它：

```
//Make sure you make a tag when you add your fragment
MyFrag f = (MyFrag) getActivity().getSupportFragmentManager()
                .findFragmentByTag(YOURTAGHERE);

f.getAdapter().notifyDataSetChanged(); 
```

这应该可以，但是您需要自己进行一些调试/逻辑才能完成。

**编辑**：这是方法：

```
public void updateList() {

List<MyItem> l = db.getAllMyItem();

    for(MyItem cn :l )
    {
        cn = l.get(0);
        l.remove(0);
        my.add(new MyList(cn.getName(),0));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:02:38.493

你可以使用这个方法`yourListAdapter.notifyDataSetChanged()`，看[这个](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)

**编辑 ：**

您将项目从片段 A 添加到数据库，因此您应该在片段 B 中为您的 listAdapter 创建一个全局变量（包含的那个`listView`），并通过标记将片段 A 中的片段获取，然后您应该调用：

```
//when you add the fragmentB to your Activity , make sure you set a Tag for it
FragmentB f = (FragmentB) getActivity().getSupportFragmentManager()
                .findFragmentByTag(TAG_FRAGMENT_B);

f.getMyListAdapter().notifyDataSetChanged(); 
```

**编辑 2：**

在你的`CustomListAdapter`，添加一个方法来刷新你的对象列表（`my`）：

```
public void setMyList(List myListOfObjects) {
    this.my = myListOfObjects;
    this.notifyDataSetChanged();
} 
```

然后，当您将新对象添加到数据库时，从数据库中检索所有数据，然后调用：

```
f.getMyListAdapter().setMyList(newListOfObjects);//newListOFObjects contains the new data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:23:35.513

从您的自定义适配器类创建一个全局对象。

```
MyListAdapter mAdapter = new MyListAdapter(getActivity(), my); 
```

并设置您的 listView 的适配器：

```
mListView.setAdapter(mAdapter); 
```

只需在适配器中刷新名为“my”的数组即可。然后调用：

```
 mAdapter.notifyDataSetChanged(); 
```

它会做的伎俩...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-02T15:17:40.213

您必须再次将适配器设置为 listView 这将引发更新

```
yourAdapter.notifyDataSetChanged();
listView.setAdapter(yourAdapter); 
```

# php - 如何显示自定义字段中的单个图像？

> ID：11523954
> 
> 赞同：0
> 
> 时间：2012-07-17T13:51:06.513
> 
> 标签：php, image, wordpress, custom-fields

我正在使用自定义字段将图像上传到我的帖子。我现在想通过编辑模板在帖子上显示此图像，但很难找出方法。

我的自定义字段称为“图像”，但我似乎所能做的就是在回显图像时显示图像的 URL。

是否有一种简单的方法/代码行可以在帖子上显示此图像？

谢谢

我使用此代码获取图像

```
<?php echo get_post_meta($post->ID, 'image', true) ?> 
```

显然它不是最好的，只能获得字段值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:56:44.953

如果您只是通过 html 显示它，则可以在`<?php echo get_post_meta($post->ID, 'image', true) ?>`返回图像的 URL 时简单地执行此操作。

```
<img src="<?php echo get_post_meta($post->ID, 'image', true) ?>" /> 
```

这将使用您返回的 URL 来获取图像。

# couchdb - 随机未经授权的错误

> ID：11523963
> 
> 赞同：1
> 
> 时间：2012-07-17T13:51:46.070
> 
> 标签：couchdb

我们有一个向 couchdb 提交文件的流程。它在大多数情况下都可以正常工作，但有时设计文档会失败

```
{"error":"unauthorized","reason":"You are not a db or server admin."} 
```

我有点卡住了，因为我不知道为什么 100 个左右的文件会成功，但一个会失败。之前已成功上传过相同的文档。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:57:50.370

事实证明它与cookie有关。

客户端中的 cookie 存储丢失了，因为我将它托管在 asp.net 应用程序中。LoveSeat 为 CouchDatabase 的每个实例创建一个新的 cookie 存储，因此我需要将 CouchDatabase 保持为全局或创建一个不同的 cookie 存储（我最后做了后者）。

# android - 针对新 API 版本时，Android http post 请求失败

> ID：11523964
> 
> 赞同：0
> 
> 时间：2012-07-17T13:51:46.887
> 
> 标签：android, post, android-networking

到目前为止，我的 HTTP POST 请求没有任何问题。

```
try {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpParams params = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(params, 1000);
        client.setParams(params);
        HttpPost post = new HttpPost(NETWORK_CHECK_CONTROLLER_ADDRESS);
        ResponseHandler<String> handler = new BasicResponseHandler();
        HttpResponse response = client.execute(post);// here in 4.0
        String responseString = handler.handleResponse(response);
        JSONObject json = new JSONObject(responseString);
    } catch (Exception e) {

        logReporter.add("Could not connect to controller");
        Log.d("4.0 tests",e.getCause()+" ");
        return false;
    }

    return true; 
```

当我以 API 版本 8 为目标时，此请求从未失败或引发异常，如清单中所指定。

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

之前

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" /> 
```

现在我的发布请求每次都失败，并且异常消息始终为 Null。就发布请求而言，android api 8 和 15 有什么不同？

是的，我确定我要发布到的服务器在线。当我将它切换回 api 8 时，一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:59:16.387

可以是您从 UI 线程发帖吗？在这种情况下，将从 Gingerbread 开始抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:43:27.603

如果您使用的是 4.0+ 版本，则必须在单独的线程中调用 HTTP 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:27:30.363

问题是您正在主 UI 线程上执行网络访问。`NetworkAccessOnMainThread`如果您尝试在主线程上执行 HTTP 请求，Android 3.0 及更高版本将使您的应用程序崩溃（即系统将抛出异常）。您需要将您的 HTTP 请求包装在一个`AsyncTask`（或`Thread`某种类型的）中，以确保您不会阻塞 UI 线程。

阅读我关于该主题的博客文章：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

# excel - excel vba日期问题

> ID：11523967
> 
> 赞同：0
> 
> 时间：2012-07-17T13:52:05.690
> 
> 标签：excel, vba

我只是注意到这一点，我有一个应用程序，用户倾向于填写三个日期的信息。开始日期、结束日期和截止日期。下面列出了其中一个日期框的示例

```
Private Sub txtEDate_BeforeUpdate(ByVal Cancel As MSForms.ReturnBoolean)

     'Dim dDate As Date
    dDate = DateSerial(Year(Date), Month(Date), Day(Date))
    txtEDate.Value = Format(txtEDate.Value, "dd/mm/yyyy")
    dDate = txtEDate.Value = ""
End Sub 
```

我现在注意到的问题是，当我提交这些日期时，我选择日期说 1/3/2012 或 5/6/2012，它们在我的工作表上分别更改为 3/1/2012 和 6/5。如果我的日期输入是 2012 年 6 月 13 日，它将保持不在 12 个月范围内。excel表格与我设置的表格格式相同。也许这是我提交日期的问题。

```
Private Sub cmdOK_Click()
Dim checks As Integer

trim.trimALL
Call Check_Correct_Data_Entry_Total(checks)

If checks = 1 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Name..."
    Me.txtName.SetFocus
End If

If checks = 2 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Number..."
    Me.txtPhone.SetFocus
End If
If checks = 3 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a ID..."
    Me.txtID.SetFocus
End If
If checks = 4 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Department.."
    Me.txtDepartment.SetFocus
End If
If checks = 5 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a End Date.. "
    Me.txtEDate.SetFocus
End If
If checks = 6 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Analysis Dead Date.. "
    Me.txtDeadDate.SetFocus
End If
If checks = 7 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Analysis..."
    Me.cboAnalysis.SetFocus
End If
If checks = 8 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Application..."
    Me.cboApplication.SetFocus
End If
If checks = 9 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter amount of Disk Space you will be using..."
    Me.txtDisks.SetFocus
End If

If checks = 10 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Cluster..."
    Me.cboCluster.SetFocus
End If
If checks = 11 Then
    frmCourseBooking.Error_Messages.Caption = "ERROR: Please enter a Core Amount..."
    Me.cboCores.SetFocus
End If

If checks = 0 Then

    ActiveWorkbook.Sheets("Course Bookings").Activate

    Dim Row_to_Record_Data As Long

    Row_to_Record_Data = ActiveSheet.Cells(Rows.Count, 1).End(xlUp).Row + 1

    'Generate Unique Key for each new entry (Key = string of userid + numeric timestamp + random 3 letter string)

    Dim DateNumber As Long
    Dim RandomString1 As String
    Dim RandomString2 As String
    Dim RandomString3 As String
    Dim RandomString As String

    Dim Unique_Key As String

    DateNumber = Date
    RandomString1 = Chr(Application.WorksheetFunction.RandBetween(65, 90))
    RandomString2 = Chr(Application.WorksheetFunction.RandBetween(65, 90))
    RandomString3 = Chr(Application.WorksheetFunction.RandBetween(65, 90))
    RandomString = RandomString1 & RandomString2 & RandomString3
    Unique_Key = Format(Hour(Now), "00") & Format(Minute(Now), "00") & Format(Second(Now), "00") & RandomString

    'Check if overwriting entry selected from frmList ListBox
    If Overwrite_Row <> 0 Then Row_to_Record_Data = Overwrite_Row

    Cells(Row_to_Record_Data, 1).Value = txtName.Value
    Cells(Row_to_Record_Data, 2) = txtPhone.Value
    Cells(Row_to_Record_Data, 3) = LCase(txtID.Value)
    Cells(Row_to_Record_Data, 4) = txtDepartment.Value

    Cells(Row_to_Record_Data, 5) = cboAnalysis.Value
    Cells(Row_to_Record_Data, 6) = cboApplication.Value

   'ActiveCell.Offset(0, 7) = cboPriority.Value saved for priority to fill in off administration form

    Cells(Row_to_Record_Data, 9) = txtSDate.Value
    Cells(Row_to_Record_Data, 10) = txtDeadDate.Value
    'ADD ESTIMATED DATE HERE!!!!.
    Cells(Row_to_Record_Data, 11) = txtEDate.Value
    Cells(Row_to_Record_Data, 12) = cboCluster.Value
    Cells(Row_to_Record_Data, 13) = cboCores.Value
    Cells(Row_to_Record_Data, 14) = txtDisks.Value
    Cells(Row_to_Record_Data, 16) = txt_sge_number.Value

    'DVM CHOICES option.
    If optDefinition = True Then
        Cells(Row_to_Record_Data, 7).Value = "Definition"
    ElseIf optValidation = True Then
        Cells(Row_to_Record_Data, 7).Value = "Validation"
    Else
        Cells(Row_to_Record_Data, 7).Value = "Methods"
    End If

    'Enter Unique Key if new entry
    If Overwrite_Row = 0 Then Cells(Row_to_Record_Data, 15).Value = Unique_Key

End If

'frmCourseBooking.Error_Messages.Caption =

    Range("A1").Select

'clear form to avoid mishaps
If Overwrite_Row = 0 Then
    Accecptance_label.Caption = "Adding New Request, Recommend Clear Form After."
Else
    Accecptance_label.Caption = "Editted Request, Recommend Clear Form After."
End If

If checks = 0 Then
    Error_Messages.Caption = ""
End If

'Reset Overwrite_Row to zero
Overwrite_Row = 0

End Sub 
```

这是我将这些日期提交到我的表格的全部功能。特别是 Cells(Row_to_Record_Data, 1).Value = txtName.Value。我的问题是如何让它坚持我在表单中设置的格式，并且一旦提交就不会改变？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:14:12.047

```
Private Sub txtEDate_BeforeUpdate(ByVal Cancel As MSForms.ReturnBoolean)       
'Dim dDate As Date    
 dDate = DateSerial(Year(Date), Month(Date), Day(Date))     
txtEDate.Value = Format(txtEDate.Value, "dd mmm yyyy")     
dDate = txtEDate.Value = "" 
End Sub 
```

从@Tony Dallimore 的输入修改的答案

# facebook-graph-api - Facebook 分享帖子 - 仅将 URL 限制为标题和图片

> ID：11523968
> 
> 赞同：-1
> 
> 时间：2012-07-17T13:52:07.317
> 
> 标签：facebook-graph-api, facebook-php-sdk

在将帖子分享到我的墙上时，我获得了完整帖子的链接，而我只想显示共享帖子标题和图像的 URL。除链接部分外，一切正常。

```
$result = $facebook->api('/me/feed/', 'post',
    array('name' => $_POST['title'], 
          'link' => 'http://myurl.com', 
          'picture' => $_POST['imgPath'], 
          'caption' => 'post title', 
          'description' => $_POST['description'])); 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:38:13.010

```
Try by removing '/' after feed ..
$result = $facebook->api('/me/feed', 'post',
    array('name' => $_POST['title'], 
          'link' => 'http://myurl.com', 
          'picture' => $_POST['imgPath'], 
          'caption' => 'post title', 
          'description' => $_POST['description']));    
or you can use userid instead of me..
$user=$facebook->getUser();
$result = $facebook->api('/$user/feed', 'post',
    array('name' => $_POST['title'], 
          'link' => 'http://myurl.com', 
          'picture' => $_POST['imgPath'], 
          'caption' => 'post title', 
          'description' => $_POST['description'])); 
```

# javascript - 这个 Javascript 有什么问题？“Internet Explorer 无法打开 Internet 站点 - 操作已中止”错误

> ID：11523977
> 
> 赞同：2
> 
> 时间：2012-07-17T13:52:45.190
> 
> 标签：javascript, html, forms, internet-explorer, internet-explorer-8

每当我将此 javascript 放入页面时，它会在 IE7 或 IE8 中导致[此错误](http://software-testing-zone.blogspot.co.uk/2009/06/howto-fix-ie7-operation-aborted-error.html)，我不知道它有什么问题，起初它在页面的头部区域，但后来我将它移到 body 标签之后并添加谷歌搜索后的 defer=defer 。

如果我删除 JavaScript 一切正常。

```
<form name="myform" method ="POST" onsubmit="return validateForm();">
<table border="0" width="600px">
  <tr>
    <td>Name:</td>
    <td><input name="name" type="text" id="name"/></td>
    <td>Company:</td>
    <td><input name="company" type="text" id="company"/></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Email Address:</td>
    <td><input name="email" type="text" id="email"/></td>
    <td></td>
    <td></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><input type="radio" value="I Agree" name="myradiobutton" />
    I Agree</td>
    <td>&nbsp;</td>
    <td><input type="radio" value="I Disagree"  name="myradiobutton" />
I Disagree</td>
    <td>&nbsp;</td>
    <td><input type="submit" name="submitit"" value="Submit" /></td>
  </tr>
</table>
</form>
</div>
  </body>
  <script defer="defer" type="text/javascript">
function validateForm()
{
var x=document.forms["myform"]["email"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
  alert("Not a valid e-mail address");
  return false;
  }
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:01:57.870

我认为问题可能与使用 defer 属性有关，而没有在您的 js 中提供相应的 src 属性。

尝试将 validateForm() 放入一个名为 validate.js 的脚本中，然后使用

```
<script defer="defer" src="validate.js" type="text/javascript"></script> 
```

[这篇文章有更多关于 IE/defer 的信息和附加链接](https://stackoverflow.com/questions/5250412/how-exactly-does-script-defer-defer-work)

# java - 在 Routes 文件中拦截变量类型验证

> ID：11523981
> 
> 赞同：2
> 
> 时间：2012-07-17T13:52:54.587
> 
> 标签：java, model-view-controller, playframework

大约一周前我开始在 Play 上工作，我现在要做的是拦截由路由文件完成的类型验证。我正在做完全服务器编程，不涉及任何表格我得到的所有数据都是通过uri。现在考虑关注Rout

```
 GET /send/request/*to/*from     controllers.Req_controller.sendRequest(to: Int, from:Int) 
```

如果我输入非数字字符或字符串而不是整数，它会给我类型冲突错误。我不想玩这个，我想自己处理这些错误，返回一个 JSon 对象是一个不错的选择。

但我不想，

```
 Bad request  For request 'GET /send/request/3/f' [Cannot parse parameter from as Int: For input string: "f"] 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:23:57.667

`routes`带星号的参数用于跨`String`​​越多个“斜线段”，应放置在`routes`文件末尾的某个位置，即：

```
GET     /some/*path    controllers.Application.resolvePath(path: String) 
```

将匹配：

```
http://domain.tld/some/a       it will pass 'a' String as a path param
http://domain.tld/some/a/b     it will pass 'a/b'
http://domain.tld/some/a/b/c   it will pass 'a/b/c' 
```

在您的情况下，您应该使用参数的“冒号版本”：

```
GET  /send/request/:to/:from  controllers.Req_controller.sendRequest(to: Integer, from:Integer) 
```

*编辑*

要进行基本拦截，您可以使用[Global 对象](http://www.playframework.org/documentation/2.0.2/JavaGlobal)（底部）覆盖`onBadRequest()`方法。

您还可以将整个字符串`*path`作为`a/b/c`字符串发送到您的控制器（就像在这个答案中的第一个示例路由中一样），然后在一些更复杂的场景中将其拆分并逐部分验证，无论如何您可以看到有一些可能性，我确保你会选择一些东西。

# java - WSO2 ESB 如果为什么呢？

> ID：11523983
> 
> 赞同：0
> 
> 时间：2012-07-17T13:53:04.260
> 
> 标签：java, web-services, netbeans, wso2esb

我以前有使用 JAX-WS 的经验，但我很难理解：

1) WSO2 ESB 做什么？官方文档对我帮助不大。

2) 它是一种为 Web 服务增加安全性的管理器吗？我应该把我的网络服务放在哪里？

3) 我正在使用 Netbeans+Glassfish 部署 Java Web 服务，但我真的不知道如何处理这个 WSO2 ESB？

如果有人可以向我简要解释一下，那就太好了。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:12:10.377

也许这对其他人有用：

1) WSO2 ESB 是一种开源企业服务总线 (ESB)。它允许管理员简单轻松地配置消息路由，即链接 SOA 系统的不同组件。

2）更多的是关于服务的整合。ESB 可以托管您的服务，但您可以将它们与服务中介分开部署（更流行/正确）。

3）你可以保留Netbeans+Glassfish，但是还有一个Eclipse的插件：“WSO2 Developer Studio”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:44:32.130

WSO2 是一个开源企业服务总线 (ESB) 产品。那里有许多 ESB 产品，有些是开源的（例如 Mule），有些不是（例如 Oracle Service Bus）。

ESB 产品提供了一种集成机制，用于处理跨越复杂的系统和服务网络、跨越不同平台和协议的业务流程。它们提供了编排或流的概念，通常是一种基于 XML 的定义流程的方式，用于定义与多个底层系统的交互。许多 ESB 产品还将包括一个用于以图形方式定义流的 IDE。除了流程之外，ESB 还应该提供一系列系统和协议适配器、路由和转换消息的方法、错误处理、事务处理、安全性以及管理和监控整个批次的管理控制台。

如果您想了解 ESB 的含义，我建议您看一下 Spring Integration，它允许您在单个 JVM 中进行基本的、类似 ESB 的编排。这也是将代码与底层协议分离的好方法。

# wso2 - 用于自定义应用程序的 WSO2 身份服务器和 SSO

> ID：11523985
> 
> 赞同：6
> 
> 时间：2012-07-17T13:53:09.003
> 
> 标签：wso2, wso2is

我们目前正在评估 WSO2 身份服务器，对此我有几个问题：

1.  Identity Server 是否可以用作部署的自定义应用程序的 SSO 提供程序（就像 CAS 一样）？是否有客户端 API 以编程方式访问服务器以验证票证？
2.  有没有办法自定义身份服务器的登录页面或用我自己的（以及如何）替换它？
3.  Identity Server 是否能够使用数字证书登录用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:48:45.317

1.  对于您的第一个问题，[这里](http://wso2.org/library/articles/2010/07/saml2-web-browser-based-sso-wso2-identity-server)有一个很好的解释。
2.  相信大家可以下载Identity Server的源码，修改登录页面，然后构建。[WSO2 身份服务器文档](http://docs.wso2.org/wiki/display/IS323/Building+WSO2+Identity+Server+from+source)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T22:01:55.347

3-您可以根据您的要求编写自定义身份验证器并将其插入，将其放在 repository/components/dropins 并使用您为此身份验证机制赋予的优先级编辑 repository/conf/security/authenticators.xml。

您可以参考现有的验证者代码，以了解[http://svn.wso2.org/repos/wso2/carbon/platform/tags/turing-chunk01/components/authenticators/](http://svn.wso2.org/repos/wso2/carbon/platform/tags/turing-chunk01/components/authenticators/)

# actionscript-3 - 将 bitmapData 加载到 TileList AS3

> ID：11523989
> 
> 赞同：0
> 
> 时间：2012-07-17T13:53:37.950
> 
> 标签：actionscript-3, load, bitmapdata, tilelist

假设我的舞台上有一张位图，我想将此位图加载到 TileList 组件中。但是 TileList 的 dataProvider 请求 URL 链接作为参数而不是 bitmapData 传递。我该怎么做？

注意：我正在从 Sqlite 数据库中加载位图数据，它存储为 byteArray。哦，我正在使用 AIR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:03:37.793

您可以将 DisplayObject 作为 TileList 项的源参数传递。如果你有一个 BitmapData 最快的选项是传递一个包含该 bitmapData 的 Bitmap 对象：

```
for(var i:int = 0 ; i < 10; i++) t.addItem({label:'item '+(i+1),source:new Bitmap(new YourBitapData())}); 
```

如果你想做自定义单元格渲染器路由，你也可以这样做。主要问题是 UIComponent 的 getDisplayObjectInstance() 方法不适合 BitmapData。我想你可以继承 ImageCell 并进行所需的更改：

*   通过覆盖 getDisplayObjectInstance() 并检查执行以下操作：`if(getQualifiedSuperclassName(classDef) == "flash.display::BitmapData") return new Bitmap(new classDef);`
*   通过简单地添加基于源的位图对象

越简单越好，所以我建议尝试我的第一个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:50:37.853

我没有使用过 fl.controls.TileList，但它似乎使用了 Flex 组件使用的类似策略：项目渲染器。

在这种情况下，fl.controls.TileList 的文档说：

> 该组件的默认单元格渲染器是 ImageCell 类。ImageCell 单元格渲染器显示缩略图和单行标签。要在 TileList 组件中呈现基于列表的单元格，请使用 CellRenderer 类。

在您的情况下，您想要的是指定一个`BitMapData`仅从 dataProvider 获取 a 并使用它来显示图像的类。

要为渲染器使用不同的类，请使用`TileList`的[cellRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/TileList.html#style:cellRenderer)样式。

我还没有为 Flash TileList 创建自定义单元格渲染器，但这里有一些链接可以帮助您入门：

*   [如何在 Flash 中为平铺列表创建自定义单元格渲染器](https://stackoverflow.com/questions/3127329/how-to-create-a-custom-cell-renderer-for-a-tile-list-in-flash)
*   [定义一个自定义的单元格渲染器](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fd4.html#WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fc2)

创建自己的自定义渲染器的基本方法是这样的：

**1\. 创建一个扩展 CellRenderer 的新类：**

```
public class CustomRenderer extends CellRenderer
{
    public function CustomRenderer()
    {
        super();
    }
} 
```

**`data`2.重写类属性的setter方法`CellRenderer`：**

该`TileList`组件将为`dataProvider`. 然后它在每个渲染器上调用这个 setter 方法来传递该元素的数据。在此设置器中，您可以获取`BitMapData`并使用它来渲染图像。下面是一些未经测试的代码，可能有更好的方法来做到这一点（我们在 Flex 中为这种类型的东西提供了很好的快捷方式）

```
override public function set data(value:Object):void
{
    super.data = value;
    if (value != null && value.hasOwnProperty("propertyNameThatContainsBitMapData"))
    {
        var bmData:BitMapData = value["propertyNameThatContainsBitMapData"] as BitMapData;
        if (bmData)
        {
            var g:Graphics = this.graphics;
            g.beginBitMapFill(bmData);
            g.drawRect(0,0,100,100); // use whatever dimensions you want
            g.endFill();
        }
    }
} 
```

# iphone - 分层一个新的标签/按钮/等。在现有元素下？iOS

> ID：11523990
> 
> 赞同：0
> 
> 时间：2012-07-17T13:53:39.637
> 
> 标签：iphone, ios, xcode4

我在 Xcode 4 中使用故事板。我有一个视图，上面已经有一堆项目。我想在现有标签、按钮等下添加一个具有纯色背景的新标签，这样它就不会覆盖它们。

您如何在故事板（首选）或以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:01:35.417

为了让它在现有视图下绘制，您只需将它插入到您希望它在下面绘制的视图上方的视图层次结构中。

![在此处输入图像描述](../Images/895f1f6254e216424401278dd07cee77.png)

如果您要在我指向的级别插入视图，它将在工具栏和“程序名称”标签的顶部，但在“程序图标”标签的下方，以及列表中它下方的所有其他内容。您可以重新组织此列表，但是您希望通过单击并拖动该列表中的视图来获得正确的绘制顺序。

# javascript - 使用 jquery 捕获对象标记子事件

> ID：11523994
> 
> 赞同：1
> 
> 时间：2012-07-17T13:53:43.667
> 
> 标签：javascript, jquery, html

我面临的困境如下，一旦用户单击使用对象标签嵌入的页面中存在的链接，我希望将用户重定向到另一个页面。这在整个页面所在的 chrome 和 ff 中都可以正常工作重定向到新位置，而在 ie 中，只有对象框架（首先是框架吗？？）被重定向......

为了规避这一点，我尝试使用将 href 设置为 javascript:void(0) 的锚标记和使用 jquery 捕获的单击事件

```
<body>
    <div id='gridDude'>
        <a id='titleDude'   href='javascript:void(0)' myHref='yabadabadoo.com'>test</a>
    </div>
    <script type="text/javascript">
        $(function () {
            $('#gridDude').on('click', 'a', function (event) {
                 alert("CLICKED");
                 window.parent.location = $(this).attr('myHref');
            });
        });
    </script>
</body> 
```

这种方法似乎适用于iframe，但是当我使用对象标签时失败了......所以我很确定对象标签的dom结构可能完全不同......我无法使用iframe，因为闪烁是观察到...（每当鼠标移动时...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:17:25.107

你试过一个简单的

```
window.location.href = "http://google.com" 
```

这重定向整个窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:10:35.183

更改文档类型以确保 ie 在标准模式下工作有点修复它....

# android - 如何集成应用内计费订阅

> ID：11523997
> 
> 赞同：1
> 
> 时间：2012-07-17T13:53:50.530
> 
> 标签：android

我正在使用 google checkout 进行 inapp 计费订阅，我有用于 inapp 计费的示例代码，但我没有订阅示例代码，我没有在文档中的任何地方获得用于集成的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:02:02.610

如果您从 SDK 管理器下载应用内订阅包，则包含一个示例应用。

也在这里[https://developer.android.com/guide/google/play/billing/billing_subscriptions.html](https://developer.android.com/guide/google/play/billing/billing_subscriptions.html)

# c# - C# 应用程序没有关闭

> ID：11523999
> 
> 赞同：3
> 
> 时间：2012-07-17T13:53:56.560
> 
> 标签：c#, windows, winforms, multithreading

我在使用基于各种形式和各种线程的应用程序时遇到了问题。线程在应用程序结束之前关闭，但即便如此我也无法以 100% 的准确度终止我的应用程序。

有时该过程仍然可以继续工作，但没有出现任何内容（`Form`s 甚至`Thread`s）。我认为问题出在program.cs上，几乎可以肯定，所以我将代码粘贴在这里

```
 private static Process old;
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        XmlConfigurator.Configure();
        if (PriorProcess() != null)
        {
            try
            {
                old.Kill();
            }
            catch (Exception ex)
            {
                MessageBox.Show("Ja existe uma instancia do SpotLight em execucao.", "Aviso");
                return;
            }                
        }

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Support());

    }

    public static Process PriorProcess()
    {
        Process curr = Process.GetCurrentProcess();
        Process[] procs = Process.GetProcessesByName(curr.ProcessName);
        foreach (Process p in procs)
        {
            if ((p.Id != curr.Id) && (p.MainModule.FileName == curr.MainModule.FileName))
            {
                old = p;
                return p;
            }
        }
        return null;
    } 
```

`New Support()`这是我在应用程序中出现的第一个表格。

这是线程的代码：

```
private void check_calls()
{
        while (stop==false)
    {
        string actualTime = DateTime.Now.ToString("T");
        connection = new MySqlConnection(ConnectionString);
        MySql.Data.MySqlClient.MySqlCommand msqlCommand = new MySql.Data.MySqlClient.MySqlCommand();
        msqlCommand.Connection = connection;
        msqlCommand.CommandText = "Select cd.uniqueid,sup.timespan from contactCenterDevel.cc_cdr_support_pending sup, vboxZon.cdr cd WHERE sup.phone=cd.src AND cd.finish=0 AND cd.accountcode='serviin' AND cd.duration >0 AND cd.lastapp='Vxml' ORDER BY cd.calldate DESC LIMIT 1";

        try
        {
            connection.Open();
            MySql.Data.MySqlClient.MySqlDataReader msqlReader = msqlCommand.ExecuteReader();
            while (msqlReader.Read())
            {
                int timespanCompare = convertTimetoSecs(msqlReader.GetString(1));
                int actualtimeCompare = convertTimetoSecs(actualTime);

                if (timespanCompare < actualtimeCompare)
                {
                    updateFlagCDR(msqlReader.GetString(0));
                }
            }
        }
        catch (Exception er)
        { MessageBox.Show("Mysql actions error: " + er); }
        finally
        { connection.Close(); }

       Thread.Sleep(10000);
    }   
} 
```

当我的注销功能上的标志“停止”更改为真时，这个停止。我已经尝试评论“thread.sleep”，但问题仍然出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:58:27.823

通常，发生这种情况是因为您有一些从未终止的线程。为避免这种情况，如果您希望应用程序结束非 UI 线程的任何状态，则应创建它们并将 IsBackground 标志设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:14:53.463

I solved the problem. My application connects with an Asterisk server and uses it as an integration to apply VOIP on it. Asterisk runs a thread that allows you to "log in and log off" to the server and that thread is always waiting for a final response from the user code part. Checking in the source code of Asterisk I noticed that the thread is not as IsBackground and as a Sleep that waits for a logoff function. This is the reason why most of the time the application didnt close and thank you for your support guys.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:53:20.340

除非有一个压倒一切的原因，你绝对必须明确终止线程，（有一些，例如，规范说所有数据库连接必须在退出时关闭，并且你有这样的连接绝对绑定到线程/s创建它们），不要显式终止线程！

如果可以的话，就让操作系统来做吧。它比你或我编写的用户代码要好得多。