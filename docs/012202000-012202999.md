# StackOverflow 问答 12202000-12202999

# c# - Json DateTime 序列化在 DataContractJsonSerializer 和 System.Json 中是不同的

> ID：12202001
> 
> 赞同：8
> 
> 时间：2012-08-30T17:07:20.333
> 
> 标签：c#, .net, json, serialization

如何强制[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)接受[System.Json](http://nuget.org/packages/System.Json) DateTime 序列化格式（ISO 8601）？

问题是 System.Json 输出“2012-03-01T16:24:55.000”格式，但 DataContractJsonSerializer 需要“/Date(1329161615596+0200)/”格式。

我有这个错误：反序列化 xyz 类型的对象时出错。DateTime 内容 '2012-03-01T16:24:55.000' 不是 JSON 所要求的以 '/Date(' 开头并以 ')/' 结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T03:18:51.983

您可以编写一个适配器类，它在反序列化期间预处理您的序列化数据，并将所有其他函数连接到密封`DataContractJsonSerializer`类。

```
public class DataContractSystemJsonSerializer : XmlObjectSerializer
{

    protected DataContractJsonSerializer innerSerializer;

    public DataContractSystemJsonSerializer(Type t)
    {
        this.innerSerializer = new DataContractJsonSerializer (t);
    }
    ...

    public override Object ReadObject(Stream stream)
    {
        Object obj = null;
        MemoryStream out = new MemoryStream();
        Byte[] buf = new Byte[64];
        stream.Read(buf,0,64);

        int i = 0;
        while(stream.Read(buf,i,1))
        {
          convertDatesInBuffer(&buf, &i);              

          out.write(buf, i, 1);

          i = (i+1)%64;
        }

        return innerSerializer.ReadObject(out);
    }

} 
```

# objective-c - 在 Objective-C 中从字符串数组中播放声音

> ID：12202002
> 
> 赞同：0
> 
> 时间：2012-08-30T17:07:25.923
> 
> 标签：objective-c, arrays, string, url, audio

我正在尝试创建一个字符串数组，可用于启动播放声音的 url。如果我如下所示显式键入文件名，则此方法有效，但是如何将特定对象索引处的数组字符串之一插入'fileURLWithPath？

```
soundsArray = [[NSMutableArray alloc] initWithObjects:@"test", @"test2",@"test3", nil];

NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/test.mp3", [[NSBundle mainBundle] resourcePath]]]; 
```

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:12:08.287

你有一个数组，所以你应该循环遍历数组，在每次迭代中取出下一个字符串。您已经知道如何使用`stringWithFormat:`资源路径创建由其他字符串组成的新字符串。只需使用文件名再次执行此操作即可。（提示：`[NSString stringWithFormat:@"%@/%@.mp3", [[NSBundle mainBundle] resourcePath], nextFileName]`。）

# objective-c - 在 didSelectRowAtIndexPath 时编辑自定义 UITableViewCell textView

> ID：12202008
> 
> 赞同：0
> 
> 时间：2012-08-30T17:07:39.553
> 
> 标签：objective-c, xcode

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if(indexPath.row==0) {
//Edit the textView in this cell   
} 
```

有没有办法做到这一点？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:19:07.373

例如，您有一个自定义 UITableViewCell 与

```
@property (nonatomic, retain) UITextView* textView; 
```

所以，出现键盘

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

       if(indexPath.row==0) {
          [tableView cellForRowAtIndexPath:indexPath]textView]becomeFirstResponder];
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:56:28.717

如果您已将 textview 作为子视图添加到单元格 contenview，那么您可以试试这个

*   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{

```
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

 for(int i=0;i<[[cell.contentView subviews] count];i++)
  {

    if([[[cell.contentView subviews] objectAtIndex:i] isKindOfClass:[UITextView class]])
    {
        [[[cell.contentView subviews] objectAtIndex:i] becomeFirstResponder];
    }
} 
```

}

# javascript - 将图像数组访问到动态表中

> ID：12202018
> 
> 赞同：1
> 
> 时间：2012-08-30T17:08:44.427
> 
> 标签：javascript, dom

我已经编写了一个脚本，需要将数组中的文本字符串替换为图像，即 ( `1.jpg`, `2.jpg`, `3.jpg`)。我似乎没有正确引用图像对象并且正在解析为字符串。

我想用图像替换代码中的这一位。从：

```
["One", "Two", "Three", "Four"],
["Un", "Deux", "Trois", "Quatre"],
["eins", "zwet", "dret", "vier"] 
```

至：

```
["<img src=\"1.jpg\"", "<img src=\"2.jpg\"", "<img src=\"3.jpg\"", "<img src=\"4.jpg\""],
["<img src=\"5.jpg\"", "<img src=\"6.jpg\"", "<img src=\"7.jpg\"", "<img src=\"8.jpg\""],
["<img src=\"9.jpg\"", "<img src=\"10.jpg\"", "<img src=\"11.jpg\"","<img src=\"12.jpg\""] 
```

```
 //Author : Alexander Adu-Sarkodie
    //To be used with acknowledgement

    function createTable(data) {
        var table = document.createElement("table");
        table.style.border = "1px solid #ffcc33";
        var thead = document.createElement("thead");
        thead.style.padding = "5px";
        var tr = document.createElement("tr");
        for (var i = 0; i < data[0].length; i++) {
            var th = document.createElement("th");
            th.style.border = "2px solid #ff0000";
            var newText = document.createTextNode(data[0][i]);
            th.appendChild(newText);
            tr.appendChild(th);
        }
        thead.appendChild(tr);
        table.appendChild(thead);

        var tbody = document.createElement("tbody");
        for (var i = 1; i < data.length; i++) {
            var tr = document.createElement("tr");
            for (var j = 0; j < data[i].length; j++) {
                var td = document.createElement("td");
                td.style.padding = "5px";
                td.style.border = "2px solid #00ff00";
                var newText = document.createTextNode(data[i][j]);
                td.appendChild(newText);
                tr.appendChild(td);
            }
            tbody.appendChild(tr);
        }
        table.appendChild(tbody);
        return table;
    }

    window.onload = function () {
        var table = createTable([
    ["1", "2", "3", "4"],
    ["One", "Two", "Three", "Four"],
    ["Un", "Deux", "Trois", "Quatre"],
    ["eins", "zwet", "dret", "vier"]
    ]);
        document.body.appendChild(table)
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:13:49.627

像[这样](http://jsfiddle.net/NXvdm/)的东西？

```
var images = ["one", "two", "doesn't", "matter"];

for (var i = 0; i < images.length; ++i) {

    images[i] = "<img src=\"" + (i+1) + ".jpg\" />";

}

for (var i = 0; i < images.length; ++i) {

    alert(images[i]);

}​ 
```

# linux - 丢失的 httpd.conf 文件位于 apache

> ID：12202021
> 
> 赞同：517
> 
> 时间：2012-08-30T17:08:52.540
> 
> 标签：linux, apache, ubuntu, amazon-ec2, httpd.conf

如何找到我的`httpd.conf`文件所在的位置？

我正在从 Amazon Web Services EC2（弹性计算云）运行 Ubuntu Linux 服务器，但找不到我的 Apache 配置。

* * *

## 回答 #1

> 赞同：653
> 
> 时间：2012-08-30T17:10:13.333

获取运行Apache的路径

```
$ ps -ef | grep apache
apache   12846 14590  0 Oct20 ?        00:00:00 /usr/sbin/apache2 
```

将参数附加`-V`到路径

```
$ /usr/sbin/apache2 -V | grep SERVER_CONFIG_FILE
-D SERVER_CONFIG_FILE="/etc/apache2/apache2.conf" 
```

参考：
[http ://commanigy.com/blog/2011/6/8/finding-apache-configuration-file-httpd-conf-location](http://commanigy.com/blog/2011/6/8/finding-apache-configuration-file-httpd-conf-location)

* * *

## 回答 #2

> 赞同：212
> 
> 时间：2012-08-30T18:56:27.847

请参阅[http://wiki.apache.org/httpd/DistrosDefaultLayout](http://wiki.apache.org/httpd/DistrosDefaultLayout)讨论在各种平台上哪里可以找到 Apache httpd 配置文件，因为这可能因版本和平台而异。然而，最常见的答案是 /etc/apache/conf 或 /etc/httpd/conf

通常，您可以通过运行以下命令来确定答案：

> httpd -V

（这是一个大写的V）。或者，在重命名 httpd 的系统上，也许`apache2ctl -V`

这将返回有关如何构建和配置 httpd 的各种详细信息，包括主配置文件的默认位置。

其中一行输出应如下所示：

> -D SERVER_CONFIG_FILE="conf/httpd.conf"

其中，结合以下行：

> -D HTTPD_ROOT="/etc/httpd"

将为您提供配置文件默认位置的完整路径

# .net - 尝试使用集成的 Windows 身份验证通过 Internet 访问我的 .NET ClickOnce 应用程序

> ID：12202022
> 
> 赞同：1
> 
> 时间：2012-08-30T17:08:53.593
> 
> 标签：.net, windows, authentication, clickonce, integrated

我已经创建了一个 ClickOnce 应用程序，并将其发布在我的主页上我的服务器上的一个子文件夹中，该服务器位于我的 PC 的本地网络中。我已将身份验证设置为集成 Windows 身份验证并创建了两个新用户帐户。第一个帐户等同于我的私人 PC。使用我的 PC，我可以轻松访问 publish.htm 并安装应用程序。

将来，其他用户必须有权访问该设置。因此，我有三台平板电脑，它们都连接到一个域。我的 PC 和服务器是私有的，与域无关。

我已经尝试了几个小时才能使用其中一款平板电脑访问我的主页，但它仍然无法正常工作。我认为原因是我创建的用户帐户。我只是像在 PC 上那样使用登录名和密码。

我对域不是很熟悉，所以我不知道如何让它工作，甚至不知道它是否可能。主要目标不仅仅是一个工作安装。我想通过 Internet 使用 ClickOnce 的更新功能，但不允许所有人访问。

有人有想法吗？我有点绝望，很高兴有人可以帮助我。

# solr - 字段折叠/分组 - 如何使 SOLR 返回 2 个结果集组的交集？

> ID：12202023
> 
> 赞同：0
> 
> 时间：2012-08-30T17:09:07.133
> 
> 标签：solr, websolr

我有 2 个字段用于分组，这 2 个字段可以存储不同的关键字

前任：

Field1：CD、书籍、电子书

字段2：repo1、repo2、repo3、repo4

现在我想对 CD/repo1 、 book/repo2 、 e-book/repo3 、e-book/repo4 、 CD/repo4 的组合进行分组，而不是分别在 field1 和 field2 上进行分组。即我需要根据 2 个分组结果（分组结果之间的交集）进行分组。有没有办法让 SOLR 返回所有组合的组结果？

谢谢。BB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:42:42.377

我认为您在查询时不能在分组结果之间有交集。
另一种解决方案是在索引时将组合创建到一个字段中，并使用该字段进行分组，这将为您提供结果。

# algorithm - 有没有办法估计 A* 找到路径的进度？

> ID：12202027
> 
> 赞同：2
> 
> 时间：2012-08-30T17:09:28.193
> 
> 标签：algorithm, graph, progress, a-star, estimation

在相当大的图中找到最短路径可能需要一段时间。在某些情况下甚至会持续很长时间。根据我[对算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)的了解，无法准确判断 A* 需要访问多少个节点才能找到最短路径，但也许至少有一种方法可以估计它？

这将至少为用户提供一个近似的进度，但我想很难以一种好的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:44:09.003

使用迄今为止看到的最小`EstimatedDistanceToEnd`（即`h(x)`）将是一个估计，但不一定是一个好的估计。

也许您应该研究[加速](https://codereview.stackexchange.com/questions/14753/how-can-i-make-my-a-algorithm-faster)算法的方法，或者研究使用[更快](https://gamedev.stackexchange.com/questions/32813/how-does-dwarf-fortress-keep-track-of-so-many-entities-without-losing-performanc/32831#32831)和/或[近似](http://www.cs.cmu.edu/~ggordon/likhachev-etal.anytime-dstar.pdf)的算法？

# .htaccess - 由于 htaccess，无法访问 php $_GET 变量

> ID：12202029
> 
> 赞同：3
> 
> 时间：2012-08-30T17:09:31.723
> 
> 标签：.htaccess, url-rewriting

我正在为我的 Web 应用程序使用这个 .htaccess 代码，它工作正常，但我无法访问`$_GET`变量。

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)/(.*)/(.*)/$ index.php?$1&p=$2&id=$3 [L]
RewriteRule ^(.*)/(.*)/$ index.php?$1&p=$2 [L]
RewriteRule ^(.*)/$ index.php?$1 
```

我现在使用的 URL 是`http://www.website.com/mainpage/subpage/id/`但如果我做这样的事情`http://www.website.com/mainpage/subpage/id/?template=new`我无法访问该`$_GET['template']`变量，我很确定`htaccess`这是导致此问题的原因，但我不知道如何继续前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:55:26.640

您需要添加`QSA`标志，以便将查询字符串附加到重写目标的末尾：

```
RewriteRule ^(.*)/(.*)/(.*)/$ index.php?$1&p=$2&id=$3 [L,QSA]
RewriteRule ^(.*)/(.*)/$ index.php?$1&p=$2 [L,QSA]
RewriteRule ^(.*)/$ index.php?$1 [L,QSA] 
```

# wpf - 如何更改 RadGridView 中特定单元格的格式

> ID：12202031
> 
> 赞同：2
> 
> 时间：2012-08-30T17:09:40.853
> 
> 标签：wpf, mvvm, binding, telerik, radgridview

所以我有一个动态的 RadGridView。这意味着我以编程方式将列添加到控件中。基本上是这样的：

```
for (int i = 0; i < length; i++)
{
    Binding b = new Binding(string.Format("Collection[{0}].ValueIWant", i));
    binding.StringFormat = "{0:0.##}";
    GridViewDataColumn column = new GridViewDataColumn()
    {
        Header = HeaderFor(i),
        DataMemberBinding = b,
        DataType = typeof(double?)
    };

    Control.columns.Add(column);
} 
```

现在我需要添加显示 line 之间百分比的新行`1 and 2`，`2 and 3`依此类推。

我已经设法做到了，但我不确定我将如何设法专门为这些单元格而不是整个列更改 String.format。

想到了 CellTemplateSelector，但我不确定这是一个好主意，因为这可能意味着我必须再次设置绑定，而不知道`i`诸如此类的值。另外我只想更改绑定上的 string.format 。

当我将数字作为双倍操作（0,5 是 50%，50 是 5000%）时，我想我也必须屏蔽输入。不确定 String.Format 是否也适合我，或者我是否应该使用`RadMaskedInput`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:42:07.833

使用 an`IValueConverter`将每行的列值转换为其适当的表示形式。因此，对于计算列上的绑定，请使用：

```
// bind to the row data itself, not any specific property
Binding b = new Binding();
b.Converter = new RowToFormattedValueConverter 
```

这会将完整的行数据发送到转换器；因此您应该能够使用该行的一些现有属性来确定它是哪种类型（常规或百分比），或者添加一个额外的隐藏属性/列来明确指定它。然后转换器看起来像这样：

```
public class RowToFormattedValueConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var rowData = (MyModelType)value;
        string formattedResult;
        if (rowData.IsPerecentageRow) 
        {
            formattedResult= string.Format("{0:P1}", rowData.ValueIWant);
        }
        else
        {
            formattedResult= string.Format("{0:0.##}", rowData.ValueIWant);
        }
        return formattedResult;
    }
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# wxpython - wxPython：同一事件的多个处理程序在同一事件传播级别的事件处理顺序

> ID：12202032
> 
> 赞同：5
> 
> 时间：2012-08-30T17:09:43.980
> 
> 标签：wxpython

我是一个相对有经验的 wxPython 用户，但在 wxPython 如何处理将多个事件处理程序绑定到同一个事件时总是遇到麻烦（我知道我是笼统的，希望下面的示例更具体）。这不是 wxPython 社区中通常提到的“事件传播”的问题。

这是示例代码（如果结果不正确：我无法弄清楚论坛的代码块系统）：

```
import wx

class MainFrame(wx.Frame):
    def __init__(self, parent, ID, title):
       wx.Frame.__init__(self, parent, ID, title,
                      wx.DefaultPosition, wx.Size(200, 100))

       Panel = wx.Panel(self, -1)
       TopSizer = wx.BoxSizer(wx.VERTICAL)
       Panel.SetSizer(TopSizer)

       Text = wx.TextCtrl(Panel, -1, "Type text here")
       TopSizer.Add(Text, 1, wx.EXPAND)

       Text.Bind(wx.EVT_KEY_DOWN,self.OnKeyText)
       Text.Bind(wx.EVT_KEY_DOWN, self.OnKeyText2)

    def OnKeyText(self, event):
        print "OnKeyText"
        event.Skip()

    def OnKeyText2(self, event):
        print "OnKeyText2"
        event.Skip()

class MyApp(wx.App):
    def OnInit(self):
        Frame = MainFrame(None, -1, "Event Order Demo")
        Frame.Show(True)
        self.SetTopWindow(Frame)
        return True

if __name__ == '__main__':
    App = MyApp(0)
    App.MainLoop() 
```

* * *

函数“OnKeyText2”首先被执行，所以我计算了“事件堆栈”的行为（对于 wxPython 的这一部分是否有适当的术语而不是“事件堆栈”？）对于这个控件是：每个新的处理程序绑定到相同传播级别的相同事件进入堆栈顶部（首先执行）而不是底部（第二个执行）。

尽管我理解这一点，但它在我的应用程序中已经成为一个真正的痛苦，因为我有一个类的子类，其中基类函数绑定一些事件，然后子类绑定它们的附加事件后记。

我觉得事件被倒退到“事件堆栈”中（首先绑定你想要最后发生的事件）。有没有办法让事件*附加*到“事件堆栈”而不是在开头插入？

如果我误解了 event.Skip() 命令或遗漏了什么，请告诉我！:) 有没有更好的方法来做我想做的事情？我不想将事件串在一起（例如：有 OnKeyText()，一旦完成，调用 OnKeyText2()），因为在我的应用程序中，一个事件处理程序由所有子类共享，而另一个不是。

如果答案是“只需要以相反的顺序完成”，那么我将不得不接受这一点并对我的应用程序进行更改。

如果答案是我应该使用控件和面板之间的事件传播来控制事件处理程序的顺序，我觉得我遇到了同样的问题，除非我将每个传播级别的事件处理程序的数量保持为一个。

提前致谢！本杰明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:37:47.203

我不确定我是否理解为什么订单在您的情况下很重要，但我遇到了类似的问题。

我最初在几个上都有一个事件处理程序`TextCtrl`，它实际上完成了对`EVT_TEXT_ENTER`. 然后我想验证输入的字符串，因为我期望文本字段中有一个正整数。我`TextCtrl`为此目的进行了子类化，并在子类中挂钩了一个事件处理程序以进行字符串验证。

当然，有一个问题：`TextCtrl`当子类事件处理程序的验证在超类事件处理程序的工作之前完成时，它只对一半的 s 工作得很好。

我没有调查处理程序是如何在内部管理/处理的，而是修复了设计：子类事件处理程序绑定到`EVT_TEXT_ENTER`，在验证字符串后，它会触发我引入的自定义事件。超类事件处理程序现在与此自定义事件挂钩，而不是`EVT_TEXT_ENTER`.

这样，我总是可以确定处理顺序，并且对解除绑定/重新绑定不敏感。如果字符串验证是它们的先决条件，我可以在自定义事件上挂钩更多处理程序。

# jquery - jQuery mobile 如何在 HIJAX 之后保留非 JQM 内容的可见性？

> ID：12202033
> 
> 赞同：0
> 
> 时间：2012-08-30T17:09:43.470
> 
> 标签：jquery, jquery-mobile, persistent

首次使用 Jquery mobile 作为 Web 应用程序的基础...

我的所有页面上都有一个`<aside>`元素，我只以桌面尺寸显示。它目前位于`<div data-role="page">`每一页上。

它在整个页面加载时显示正常，但在通过默认 AJAX/HIJAX 方法加载页面时显示不正常 - 出于某种原因`<aside>`（或在下面的测试中，它是一个无法正确呈现的不同 div）中的内容只是没有' t 显示（我可以通过 Web Inspector 在 DOM 中看到它，它只是没有被渲染），除非我单击刷新。

如何标记`<aside>`它以使其在 HIJAX 页面加载中持续存在？

这是一个测试网址：[http ://benfrain.com/test/](http://benfrain.com/test/)

如果单击“Header 1”下的“slat 1”，您将看到页面 (stage2.html) 加载。但是，如果您单击该页面上的“刷新”，您将看到应该显示的内容。

然而奇怪的是，一旦您刷新了 stage2.html，单击该页面上“标题 2”下的“slat 1”会正确加载 stage3.html 并保留应有的所有内容。

# php - 在不重新加载某些 div 的情况下更改窗口位置

> ID：12202037
> 
> 赞同：0
> 
> 时间：2012-08-30T17:09:50.707
> 
> 标签：php, jquery, ajax

正如你们许多人所注意到的，当您点击链接以在 Google+ 或 facebook 中从一个页面切换到另一个页面时，URL 会发生变化，正文会发生变化，但页面的某些部分不会，例如聊天框。我相信 AJAX 可以通过从服务器请求 PHP 页面并获得一些结果来更改页面的特定内容，但这不会更改 URL。
实际上，我并不确切知道如何在 Google 中进行搜索，因此，任何关键字/名称/链接都将受到强烈赞赏。
如果这有帮助，我正在使用用于 Javascript 的 JQuery 库和用于 PHP 的 Symfony2 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:31:12.130

您可以使用 iframe 或 ajax 来保持页面的某些部分静态。要更改 url，您可以使用 hash hack。

```
window.location.hash  = "pageidentifier" 
```

或者您可以使用 arxanas 提供的 url 中描述的 html 5 技巧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:23:54.803

查看 JQUERY 加载方法。

[http://api.jquery.com/load/](http://api.jquery.com/load/)

您需要做的就是使用选择器：

```
$('mydiv').load('newcontent'); 
```

非常强大的功能。查一下！

编辑：抱歉错过了网址更改。很多时候，URL 的技巧都围绕着 Hashtag。如果您仔细查看 URL，会在某处出现“#”磅符号。这允许站点存储当前状态而无需重新加载。

目前，如果不完全重新加载站点，则无法更改浏览器中的 URL（除了主题标签后的位）。

# java - 简单的套接字程序

> ID：12202045
> 
> 赞同：0
> 
> 时间：2012-08-30T17:10:30.493
> 
> 标签：java

嘿伙计们，我正在尝试编写一个简单的套接字程序，该程序基本上从客户端发送“Hello”消息，然后服务器获取并打印出来。

我正在尝试遵循本指南： [http ://www.javaworld.com/jw-12-1996/jw-12-sockets.html?page=4](http://www.javaworld.com/jw-12-1996/jw-12-sockets.html?page=4)

但是，当我尝试使用端口号实例化 serverSocket 时，会导致语法错误，建议删除参数或为该方法创建新的构造函数。当我尝试使用它时，它也无法识别 accept() 方法。有谁知道为什么会这样？

这是我的客户代码：

```
public static void main(String[] args) throws UnknownHostException, IOException 
{
    Socket testSocket = null;
    DataOutputStream os = null;
    DataInputStream is = null;

    try
    {
        testSocket = new Socket("192.168.0.104", 5932);
        os = new DataOutputStream(testSocket.getOutputStream());
        is = new DataInputStream(testSocket.getInputStream());
    }
    catch (UnknownHostException e)
    {
        System.err.println("Couldn't find Host");
    }
    catch (IOException e)
    {
        System.err.println("Couldn't get I/O connection");
    }

    if (testSocket != null && os != null && is != null)
    {
        try
        {
            os.writeBytes("Hello Server!\n");

            os.close();
            is.close();
            testSocket.close();

        }

        catch (UnknownHostException e)
        {
            System.err.println("Host not found");
        }
        catch (IOException e)
        {
            System.err.println("I/O Error");
        }
    }

} 
```

这是我的服务器代码（更新）：

```
public static void main(String[] args) 
{
    String line = new String() ;

    try
    {
       ServerSocket echoServer = new ServerSocket(5932);

       Socket clientSocket = echoServer.accept();

      DataInputStream  is = new DataInputStream(clientSocket.getInputStream());
      PrintStream os = new PrintStream(clientSocket.getOutputStream());

           while (true) {
             line = is.readLine();
             os.println(line); 
           }
    }
    catch (IOException e)
    {
        System.out.println(e.getMessage());
    }

} 
```

以下是实际截图。

错误1：http: //i.imgur.com/8JIOd.png 错误2： [http](http://i.imgur.com/7uCow.png) : [//i.imgur.com/7uCow.png](http://i.imgur.com/8JIOd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:46:13.043

您的类名为 ServerSocket。它没有采用 int 的构造函数。将您的类命名为其他名称，以免与 java.net.ServerSocket 冲突。

要么使用绝对路径

```
java.net.ServerSocket clientSocket = new java.net.ServerSocket(5932) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:17:14.530

您尚未发布进口声明。类`ServerSocket`等`Socket`属于包`java.net`。仔细检查您在课程开始时是否有导入语句。

类似的东西`import java.net*`。或者，更好地使用 IDE 来帮助您。Eclipse 中的 Ctrl-Shift-O 将完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:20:22.600

**基于屏幕截图的编辑**：
您定义的类被命名`ServerSocket`。这隐藏了您尝试使用的实际类。您的类没有实现一个接受`int`并且没有定义的构造函数`accept()`，这些是您收到的错误。您不应将您的类命名为与另一个现有类相同的名称，因为它会导致这些类型的错误和进一步的混淆。

**ORIGINAL**：
当您处理由`ServerSocket`.

```
try
{
    echoServer = new ServerSocket(5932);
}
catch (IOException e)
{
    System.out
} 
```

看起来你`.println(e);`从最后一行的末尾丢失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T17:20:24.490

试试这个方法......

**-**首先检查您是否已正确导入包`java.net.*`

```
public static void main(String[] args) 
{

    String line = new String() ;

    try
    {
       ServerSocket echoServer = new ServerSocket(5932);

       Socket clientSocket = echoServer.accept();

      DataInputStream  is = new DataInputStream(clientSocket.getInputStream());
      PrintStream os = new PrintStream(clientSocket.getOutputStream());

           while (true) {
             line = is.readLine();
             os.println(line); 
           }
    }
    catch (IOException e)
    {
        System.out
    }

} 
```

# android - 在 TextWatcher 中检测退格

> ID：12202047
> 
> 赞同：13
> 
> 时间：2012-08-30T17:10:40.993
> 
> 标签：android, textwatcher

我正在使用`TextWatcher`，但无法检测到事件中的`Backspace`关键。`TextWatcher.afterTextChange`我也想`textView`在某些情况下清除`textWatcher`事件。

```
public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub
    // I want to detect backspace key here
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-29T18:49:58.640

要检测 中的退格`TextWatcher`，您可以检查传递给`onTextChange`函数的变量计数（如果输入退格，则计数将为 0），如下所示：

```
@Override
public void onTextChanged(CharSequence cs, int start, int before, int count) {

  if (react) {
    if (count == 0) {
      //a backspace was entered
    }

    //clear edittext
    if(/*condition*/) {
      react = false;
      setText("");
      react = true;
    }
  }
} 
```

`boolean`() 函数需要反应，`setText`否则它会变得递归。希望这可以帮助！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T17:16:55.457

A`KeyListener`可以满足你的两个条件。

```
mEditText.setOnKeyListener(new OnKeyListener() {                 
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
           if(keyCode == KeyEvent.KEYCODE_DEL){  
             //on backspace
             }
    return false        
        }
}); 
```

类似地`onKey()`，在您想要清除`textView`.

**编辑：**正如*@RankoR*指出的那样，请记住，它**`onKeyListener()`仅适用于硬件键盘**，不适用于软键盘。

# wordpress - 如何将成功注册的用户重定向到他登录前正在阅读的页面

> ID：12202048
> 
> 赞同：1
> 
> 时间：2012-08-30T17:10:44.893
> 
> 标签：wordpress, redirect

我有一个注册系统，可以将用户重定向到特定页面让我们说success.php

在此页面中，我自定义脚本向用户发送欢迎邮件并在 facebook 上发布成功，因为注册是通过 FB 誓言进行的。

我想将 success.php 重定向到用户在请求注册/登录之前正在阅读的原始页面。

我该怎么做呢？

如果有帮助，我将使用 Wordpress 作为 CMS。

这样的事情在所有情况下都有效吗？

```
$_SERVER['HTTP_REFERER'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:11:15.420

在 Wp 中有很多方法可以重定向用户，最简单的一种是：

`wp_redirect()`( [HERE](http://codex.wordpress.org/Function_Reference/wp_redirect) ) 有 2 个参数：

$location = 用户将被重定向到的绝对 URI。没有默认值。$status = 要使用的状态代码。例如 301、302 等。默认为 302。

```
wp_redirect('http://mywebsite.com/',302); 
```

请注意，它也是[可插拔的。](http://codex.wordpress.org/Pluggable_Functions)

~~然后你有~~

 ~~```
auth_redirect(); 
```~~ 

~~这基本上是相同的，但在授予访问权限之前需要登录 - 没有参数~~

您还可以使用[login_redirect 过滤器](http://codex.wordpress.org/Plugin_API/Filter_Reference/login_redirect)，但我不确定它是否适合您所描述的情况。

# haskell - Haskell 算术运算和任意/固定精度数的 DB 持久性

> ID：12202051
> 
> 赞同：7
> 
> 时间：2012-08-30T17:10:55.043
> 
> 标签：haskell, persistent, yesod, hdbc

作为一名 Haskell（GHC 平台）初学者，我遇到了处理与涉及货币/货币操作的业务领域相关的数据类型和算术运算的问题，我正在寻找解决方案。

我正在开发应该与（独立）会计模块（通过 Web 服务）交互的应用程序，同时具有用于存储在单独数据库（PostgreSQL）中的临时数据输入的（Web）用户界面。

我来自 C#/F# 环境，System.Decimal 涵盖了那里的所有核心需求。如果我错了，请纠正我，但 Haskell 似乎没有可以被视为等效的集成（默认）数据类型。

理想的选择是提供任意精度算术或至少符合 Decimal128 (IEEE 754) 的数据类型。该类型应支持舍入（最接近，远离零，如果可能还与偶数相关）和以下操作：加法、减法、乘法、除法（理想情况下也是平方/根）。还应支持类型之间的转换。

据我所知，Hackage 上有两个 Haskell 模块应该可以准确地执行计算 - Data.Fixed 和 Data.Decimal （顺便说一句，有什么方法可以在 Haskell 中创建自定义文字 - 例如复制 123.45m来自 F#？）。至少后者会据我所知（在快速测试之后）启用我在上一段中描述的大部分内容，但是当我添加一个数据库（通过 Persistent/HDBC 的 PostgreSQL）和一个 Web 框架（YESOD）时混合的东西看起来不那么桃色。那里似乎缺乏支持。

是否有任何其他组合能够以最小的摩擦实现我所描述的端到端（数据输入 => 数据处理 => 存储）（例如，在从数据库加载后从字符串手动转换似乎很奇怪，拥有一种非常强类型的语言）并且不损失精度（欢迎任何指针）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T22:05:50.257

我正在制作一个 Yesod 应用程序，并使用 Database.Persist。出于我的目的，我将创建一个包装 Data.Fixed 值的新类型，并使用 Int64 字段，如下所示：

```
newtype Dollars = Dollars { unDollars :: Centi } deriving (Eq, Num)

instance PersistField Dollars where
   toPersistValue = PersistInt64 . fromIntegral . fromEnum . unDollars
   fromPersistValue (PersistInt64 c) = Right . Dollars . toEnum . fromIntegral $ c
   fromPersistValue x = Left . Text.pack $ "Expected Int64 counting cents, got: " ++ show x 
```

# apache - 如何使用 APACHE RewriteRule 将带有查询字符串的页面重定向到外部网页

> ID：12202052
> 
> 赞同：2
> 
> 时间：2012-08-30T17:10:57.837
> 
> 标签：apache, mod-rewrite

我正在尝试将登录页面重定向到外部安全服务。此服务在验证凭据后，将使用引荐来源网址将用户返回到原始页面，如下例所示：

```
http://{IP NUMBER}/MyWiki/index.php?title=Special:UserLogin&returnto=Main_Page 
```

或任何对站点中在 query_string 中包含 **Special:UserLogin**的页面的调用都需要重定向到：

```
https://login.security.server.com/test/UI/Login?service=DSSEC&goto=http://{IP NUMBER}/MyWiki/index.php/Special:UserLogin 
```

我一直在使用 RewriteCond 和 RewriteRule 进行测试，但没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:08:19.783

你想要这样的东西吗？

```
RewriteEngine On
RewriteCond %{REQUEST_URI} Special:UserLogin [OR]
RewriteCond %{QUERY_STRING} Special:UserLogin
RewriteCond ?#%{QUERY_STRING} ([^#]+)#([^#]+)
RewriteRule ^ https://login.security.server.com/test/UI/Login?service=DSSEC&goto=http://%{SERVER_ADDR}%{REQUEST_URI}%1%2 [L,B,NE] 
```

好的，这看起来有点令人困惑，但这就是正在发生的事情。

1.  检查是否`Special:UserLogin`在请求 URI 或查询字符串中。
2.  为标记、URI 和查询字符串创建反向引用匹配`?`（这非常重要）
3.  将请求重定向到`https://login.security.server.com/test/UI/Login`，但使用来自先前条件的反向引用来构建`goto=`参数，并使用**`B`**URL 对反向引用进行编码的标志。这样，结果是一个完整的 URL，连同查询字符串，它已经过 URL 编码。（`NE`标志是为了确保`%`标志本身不会被双重编码）。

根据这些规则，请求：

```
/MyWiki/index.php?title=Special:UserLogin&returnto=Main_Page 
```

将被重定向到：

```
https://login.security.server.com/test/UI/Login?service=DSSEC&goto=http://123.45.67.89/MyWiki/index.php%3ftitle%3dSpecial%3aUserLogin%26returnto%3dMain_Page 
```

如您所见，查询字符串`?title=Special:UserLogin&returnto=Main_Page`被编码为`%3ftitle%3dSpecial%3aUserLogin%26returnto%3dMain_Page`，因此**login.security.server.com**不会将其误认为是自己的查询字符串。相反，他们的登录服务会将 goto 参数视为：

```
http://123.45.67.89/MyWiki/index.php?title=Special:UserLogin&returnto=Main_Page 
```

完好无损。

# c# - Linq to Objects - 查询将执行多少次？

> ID：12202053
> 
> 赞同：1
> 
> 时间：2012-08-30T17:11:03.283
> 
> 标签：c#, linq

我有以下 Linq to Objects 查询：

```
var query = this._vaporizerData
    .Where(row => row.Coater == coater)
    .Where(row => row.Distributor == distributor)
    .Where(row => row.PowerTubeA.HasValue);

if (query.Any())
{
    tubeA = query
        .Where(row => row.CoaterTime.Value >= readTime.AddMinutes(-5))
        .Where(row => row.CoaterTime.Value <= readTime)
        .OrderByDescending(row => row.CoaterTime)
        .Select(row => row.PowerTubeA)
        .First()
        .Value;
} 
```

我知道当执行 query.Any() 行时，会评估第一个 Linq 查询。我的问题是这个。假设第一个查询的结果是 5 行数据。当我执行第二个查询（以'tubeA = query'开始）时，我是否正确它会根据第一个查询返回的五行来评估它？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:19:04.083

> 我知道当执行 query.Any() 行时，会评估第一个 Linq 查询。

嗯，有点。*必要时*对其进行评估。因此，如果您有一百万行，`_vaporizerData`但其中第一行与过滤器匹配，则它不会遍历其余数据。

> 当我执行第二个查询（以'tubeA = query'开始）时，我是否正确它会根据第一个查询返回的五行来评估它？

是的，但它必须再次找到这些行，检查过滤器对所有第一次不匹配的行。同样，如果您有一百万行，`_vaporizerData`但这次只有*最后*一行与原始查询匹配，您最终将再次检查所有 999,999 个不匹配的行。

`_vaporizerData`此外，如果在调用 to`Any()`和调用 to之间有任何其他更改的内容`First()`，这些更改*将*是可见的，因为它实际上是返回到原始数据源。

最好只执行一次查询，例如

```
var minTime = readTime.AddMinutes(-5); // Avoid recalculation
var result = this._vaporizerData
                 .Where(row => row.Coater == coater)
                 .Where(row => row.Distributor == distributor)
                 .Where(row => row.PowerTubeA.HasValue);
                 .Where(row => row.CoaterTime.Value >= minTime)
                 .Where(row => row.CoaterTime.Value <= readTime)
                 .OrderByDescending(row => row.CoaterTime)
                 .Select(row => row.PowerTubeA)
                 .FirstOrDefault();

if (result != null)
{
    tubeA = result.Value;
} 
```

编辑：评论中指出的两个要点：

*   如果我们第一个查询匹配一个项目但第二个不匹配，您的原始查询将引发异常；上面的代码最终会`result`为 null。这对你来说可能是也可能不是问题。
*   如果您使用[MoreLINQ](http://morelinq.googlecode.com)，您可以通过使用`.MaxBy(row => row.CoaterTime)`而不是使用`OrderByDescending`and来提高效率`First`。`First`IIRC，虽然输入为空会失败，所以只有在使用原始版本而不是上面的版本时才应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:25:27.080

让我们想象这个集合是一个列表。让我们想象一下它们是否符合前三个标准：

```
F, T, F, F, F, T, F, F, F, T, F, F, T, F, T, F, F, F 
```

（T = 匹配，F = 不匹配）

调用 `Any`将检查两个元素。在这一点上，它知道至少有一个项目。它不再检查任何元素，但返回 true。

假设那些也匹配其他谓词的那些是：

```
F, F, F, F, F, F, F, F, F, F, F, F, T, F, T, F, F, F 
```

因为我们有一个`OrderByDescending`它必须检查每一个项目，以产生它的结果。没有其他方法可以知道哪个先出现。

如果不是，它将检查 13，将其视为“第一”，然后完成。

一方面，这种一般情况可以`ToList()`使事情变得更快——因为我们重用查询结果，而不仅仅是重用查询，存储中间结果的好处可能超过创建列表的成本。

另一方面，查询的其他重用正是需要这种行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:18:36.083

第二个查询不使用第一个查询的结果。所以你用两个查询来命中对象。1 代表`.Any()`和 1 代表`.First()`

如果您想重用第一个查询的结果而不再次点击该对象，请`ToList()`像这样使用：

```
var query = this._vaporizerData
    .Where(row => row.Coater == coater)
    .Where(row => row.Distributor == distributor)
    .Where(row => row.PowerTubeA.HasValue).ToList(); 
```

这会将第一个查询结果存储在 中`query`，`query`否则不保存任何值，但实际上是进行查询的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:24:48.193

如果您的基本集合包含的对象多于查询返回的对象，则您可能不应该调用`Any`，因为正如您所怀疑的那样，它很可能会导致这些对象中的许多对象根据第一组标准被评估两次。`ToList`相反，通过调用or执行第一个查询`ToArray`：

```
var interimResults = this._vaporizerData 
    .Where(row => row.Coater == coater) 
    .Where(row => row.Distributor == distributor) 
    .Where(row => row.PowerTubeA.HasValue)
    .ToList(); 

if (interimResults.Count > 0) 
{ 
    tubeA = interimResults
        .Where(row => row.CoaterTime.Value >= readTime.AddMinutes(-5)) 
        .Where(row => row.CoaterTime.Value <= readTime) 
        .OrderByDescending(row => row.CoaterTime) 
        .Select(row => row.PowerTubeA) 
        .First() 
        .Value; 
} 
```

# sql - SQL如何从汇总表创建明细表

> ID：12202057
> 
> 赞同：0
> 
> 时间：2012-08-30T17:11:33.583
> 
> 标签：sql, row, summary, unpivot

现在我有一个这样的游戏摘要表：

![汇总表](../Images/f792369a6f7fd13bc4948044a114fe80.png)

我想按小时拆分“开始时间”和“结束时间”并将其转换为以下详细外观：

![我需要这个](../Images/83fef941b2af31e7f2b68fb50ba322da.png)

它有点类似于 Unpivot，但不完全相同。sql语句应该怎么写？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:05:33.943

在 PostgreSQL 中是：

```
SELECT PlayerID
     , generate_series(s.StartTime, s.EndTime - 1) AS StartTimeCol
     , generate_series(s.StartTime + 1, s.EndTime) AS EndTimeCol
FROM summaryTable s 
```

在此[链接](http://www.spatialdbadvisor.com/sql_server_blog/86/generate_series-for-sql-server-2008)中，您可以看到如何向*SQL Server 2008*`generate_series`添加功能。

 *[在此处](http://sqlfiddle.com/#!1/20be9/1)查看实际操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:10:43.673

如果您使用的是 SQL Server，则可以尝试以下 TSQL 块。它使用游标遍历开始和结束时间之间超过 1 小时的行，并进行迭代，将单个“小时”添加到 @gamesTable 表变量中。

一旦游标完成并将记录填充到@gamesTable 变量中，针对开始和结束时间之间有 1 小时或更短时间的行的原始表的 SELECT 语句将联合到存储到 @gamesTable 中的所有行。

```
DECLARE Game_Cursor CURSOR FOR
    SELECT *
    FROM summaryTable
    WHERE EndTime - StartTime > 1

OPEN Game_Cursor;
DECLARE @PlayerID char
DECLARE @StartTime int
DECLARE @EndTime int
DECLARE @TempEndTime int
DECLARE @gamesTable TABLE(PlayerID char, StartTime int, EndTime int)

--Fetch the first row
FETCH NEXT FROM Game_Cursor INTO @PlayerID, @StartTime, @EndTime
WHILE @@FETCH_STATUS = 0
BEGIN
        WHILE (@EndTime - @StartTime) > 0
        BEGIN
            SET @TempEndTime = @StartTime + 1
            INSERT INTO @gamesTable
                SELECT @PlayerID AS PlayerID, @StartTime AS StartTime, @TempEndTime AS EndTime

            SET @StartTime = @StartTime + 1
        END;

        --Fetch the next row
        FETCH NEXT FROM Game_Cursor INTO @PlayerID, @StartTime, @EndTime
END;

--Rid of the cursor
CLOSE Game_Cursor;
DEALLOCATE Game_Cursor;

--Output the results
SELECT * FROM summaryTable WHERE (EndTime - StartTime) <= 1
UNION ALL
SELECT * FROM @gamesTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T17:27:15.160

在 SQL Server 2005+ 中，您可以使用 CTE 获得结果：

```
;with cte (playerid, starttime, endtime) as 
(
  select playerid, min(starttime) starttime, max(endtime) endtime
  from yourtable
  group by playerid
  union all
  select playerid, starttime + 1, endtime
  from cte
  where starttime < endtime
)
select playerid,
  starttime,
  case 
    when starttime + 1 < endtime
    then starttime + 1
    else endtime
  end endtime
from cte
where starttime != endtime
order by playerid, starttime 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/54715/14)*

# macos - Apple automator 中的“请求文本”操作不会自动获得焦点

> ID：12202058
> 
> 赞同：11
> 
> 时间：2012-08-30T17:11:35.813
> 
> 标签：macos, automator

我使用 Apple 的 Automator 编写了一个服务。第一个动作是“询问文本”动作。但是，当我触发启动服务的快捷方式时，弹出询问文本的模式，但它没有焦点。我必须用鼠标点击它。

有没有办法让自动机打开这个窗口，重点放在文本输入上？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T14:45:33.813

使用以下代码将一些 applescript 添加到工作流程的顶部。只需将 myapp 替换为您的应用名称即可

```
tell application "myapp"
activate
end tell 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T21:19:35.087

这是一种对我有用的部分答案；我没有使用 Ask for text 操作，而是在我的 automator 应用程序中使用了一个 applescript（而不是 Ask..action，我使用了“Run applescript”操作）。它看起来像这样：

```
on run {input, parameters}

    set x to the text returned of (display dialog "Enter a version number" default answer "1134" buttons {"OK"} default button 1)

    return x
end run 
```

我的 lil' automator 应用程序是帮助我输入票证的版本号；使用鼠标使我的手受伤。applescript 对话框似乎有正确的焦点，所以享受吧！让我们知道你是怎么做的！

# c# - 检查某些文本的文本框asp.net c#

> ID：12202064
> 
> 赞同：0
> 
> 时间：2012-08-30T17:12:03.677
> 
> 标签：c#, asp.net, validation, textbox

如何检查文本框是否包含“@mediacollege.dk”

```
if (email.text == "here it checks if it contains "@mediacollege.dk" and does a command")
{
    DHF_LodderTableAdapter DHFLodder = new DHF_LodderTableAdapter();
    DHFLodder.Insert(UserName.Text, 10);
}
else
{
    // nothing
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:14:15.213

你可以这样做

```
if (email.text.Contains("@mediacollege.dk") )
 {
        // do your work
     DHF_LodderTableAdapter DHFLodder = new DHF_LodderTableAdapter();
     DHFLodder.Insert(UserName.Text, 10);    
}
else
{
    // nothing
} 
```

# c# - 将资源中的图片添加到图片框

> ID：12202066
> 
> 赞同：1
> 
> 时间：2012-08-30T17:12:12.817
> 
> 标签：c#

我在显示我已经添加为资源的图像时遇到了这个问题。我猜我错过了一些重要的东西，但我找不到它是什么。我希望有人对我在 atm 做错了什么有更好的了解。

我已将 .bmp 图像添加到解决方案树中，并将该图像的构建操作属性更改为嵌入式资源，但我不知道如何从管道中调用该图像？

当用户单击一个按钮时，图像应该被发送到图像框，我到目前为止编写的代码如下所示：

这只是 button_click 代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        //Show image in the picturebox of selected cake   

        Image image = Image.FromFile(fruitcake.jpg);
        pictbox.Image = image;
        pictbox.Height = 163;
        pictbox.Width = 223;
        choice = 1;
        lblCookiesPerGram.Text = string.Empty;           
    } 
```

任何人都知道我做错了什么，或者我可以在另一场战争中这样做吗？请注意用户单击的 4 个按钮，每个按钮都有一个图像；）

//问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:15:35.553

如果您转到解决方案 - 属性窗口并选择资源选项卡并通过此管理器添加图像，则可以像这样直接引用图像：

```
Image image = Properties.Resources.fruitcake; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T17:15:22.697

要从资源中检索图像，您可以执行以下操作：

```
using (Stream imgStream = Assembly.GetExecutingAssembly()
    .GetManifestResourceStream(
    "MyNamespace.resources.fruitcake.jpg"))
{
    var image = new Bitmap(imgStream);
    pictBox.Image = image;
    pictBox.Height = image.Height;
    pictBox.Width = image.Width;
} 
```

# twitter-bootstrap - AngularJS ng-click 在弹出框内损坏

> ID：12202067
> 
> 赞同：17
> 
> 时间：2012-08-30T17:12:13.467
> 
> 标签：twitter-bootstrap, angularjs

我正在尝试编写一个指令来加载部分 html 文件，针对范围编译它并将其用作 Bootstrap 弹出内容。

但是我被困在一个非常基本的步骤上，在 popover 范围上编写一个 hide() 方法，以便我可以使用`ng-click=hide()`.

* * *

这已经解决了，plunker 现在正在解决其他问题 ;-)。

[更新：救援人员： http](http://plnkr.co/edit/QH3NQh?p=preview) ://plnkr.co/edit/QH3NQh?p=preview

```
.directive('uiPopover', ['$compile', '$http', function($compile, $http) {
return {
    restrict: 'A',
    scope: {
        hide: '&hide' // did not understand what is this
    },
    link: function postLink(scope, element, attr, ctrl) {
        console.warn('postLink', arguments, this);

        // scope is the anchor scope
        scope.name = "Hello"; // Using {{name}} is working
        scope.hide = function() { // Using ng-click="hide()" is not working :(
            console.log('in');
            element.popover('hide');
        }

        $http.get(attr.uiPopover).success(function(data) {
            element.popover({
                content: $compile(data)(scope), // popover content will get a new scope that I need to put hide() on.
                html: true
            });
        });

    }
}
}]); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-15T16:47:26.933

我的解决方案是一样的，但不管它值多少钱，这是我最终使用的代码片段。希望这可以帮助！

```
//Initialize & config popover controls
$('[data-toggle="popover"]').popover({ html : true })
    .click(function(ev) {
     //this is workaround needed in order to make ng-click work inside of popover
     $compile($('.popover.in').contents())($scope);
}); 
```

并且不要忘记将 $compile 和 $scope 作为依赖项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T14:45:36.873

请参阅[此 google group thread](https://groups.google.com/d/topic/angular/zCPLGa6VtfM/discussion)，尤其是[Andy's fiddle](http://jsfiddle.net/F3nfK/23/)。困难似乎是 popover 小部件/组件创建了一个新的 DOM 元素，该元素放置在 ui-popover 指令所在的范围之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:58:39.780

我必须`$compile(tip.contents())(scope);`在创建提示后使用（通过绑定“点击”）。检查 Plunker 的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T11:48:50.850

看看[这里](https://github.com/mgcrea/angular-strap/blob/master/src/directives/popover.js)你如何能满足你的需要等等。我认为这很棒）

这是库[Angular-Strap的一部分](http://mgcrea.github.io/angular-strap/#/popover)

# facebook - Facebook 页面标签必须是 https 吗？好像不是

> ID：12202068
> 
> 赞同：0
> 
> 时间：2012-08-30T17:12:17.007
> 
> 标签：facebook, http, iframe, https

为什么，如果FB规定框架页面标签必须是https，我可以右键单击其中许多，在新窗口中打开并清楚地看到它们是http？他们只是这么说而不执行吗？示例： [http ://apps.facebook.com/dousaflavor/](http://apps.facebook.com/dousaflavor/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:46:45.163

如果您不包含 HTTPS URL，则通过 HTTPS 使用 Facebook 的用户将无法访问您的应用

# symfony - “此值不应为空。”当我输入现有用户名时

> ID：12202072
> 
> 赞同：1
> 
> 时间：2012-08-30T17:12:27.973
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我正在尝试创建一个表单，您可以在其中选择用户（此示例是一篇新文章，用户可以在其中编写（文本）用户名）。当我写一个现有的用户名时，我遇到了错误：

> 此值不应为空。

当它不是现有的用户名时，我得到：

> 此值无效。

**`ArticleType`**

```
->add('author', 'fos_user_username') 
```

或者（我对自定义模型转换器也有同样的问题）

```
->add(
   $builder->create('author', 'text')->addModelTransformer($transformer)
); 
```

**`Article`**具有链接作者的实体

```
/**
 * @Assert\NotBlank()
 * @Assert\Type(type="Acme\UserBundle\Entity\User", groups={"default", "registration", "profile"})
 * @ORM\OneToOne(targetEntity="Acme\UserBundle\Entity\User")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
private $author; 
```

# git - Jenkins 从 gitHub 克隆时出错

> ID：12202078
> 
> 赞同：30
> 
> 时间：2012-08-30T17:13:09.287
> 
> 标签：git, github, jenkins

我是新手`Jenkins`，从`GitHub`.

我试图在这里搜索所有相关问题，但可以找到确切的 stacktstrace 和答案。

我正在尝试克隆需要用户名和密码的存储库，我`SSH://`在作业配置设置中为我的作业提供存储库路径。我还没有完成任何与 .ssh 相关的设置，因为这似乎与 GIT 存储库的安全问题不同。

我无法弄清楚詹金斯试图执行什么评论，它没有发现哪个文件/目录毫无头绪。

**这是我在 Jenkins 工作中的确切堆栈跟踪：**

> 引起：java.io.IOException：无法运行程序：尝试确定 git 版本时出错：执行命令时出错：--version 假设 1.6 错误：克隆远程 repo 'myRE' 时出错：无法克隆 git@github.com:myORG /RVL.myProj.git hudson.plugins.git.GitException：无法在哈德森的 hudson.plugins.git.GitAPI.clone(GitAPI.java:268) 克隆 git@github.com:myORG/RVL.myProj.git。 plugins.git.GitSCM$2.invoke(GitSCM.java:1122) at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1064) at hudson.FilePath.act(FilePath.java:842) at hudson.FilePath .act(FilePath.java:824) at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1064) at hudson.model.AbstractProject.checkout(AbstractProject.java:1256) at hudson.model.AbstractBuild$AbstractBuildExecution。defaultCheckout(AbstractBuild.java:589) at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88) at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:494) at hudson.model.Run.execute(Run .java:1502) 在 hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477) 在 hudson.model.ResourceController.execute(ResourceController.java:88) 在 hudson.model.Executor.run(Executor.java:236)引起：hudson.plugins.git.GitException：执行命令时出错：clone -o RVL.myProj git@github.com:myORG/RVL.myProj.git /var/lib/jenkins/jobs/myProj/workspace at hudson.plugins .git.GitAPI.launchCommandIn(GitAPI.java:862) 在 hudson.plugins.git.GitAPI.access$000(GitAPI.java:40) 在 hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:264) 在 hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:244) 在 hudson.FilePath.act(FilePath.java:842) 在 hudson.FilePath.act(FilePath.java:824) 在 hudson.plugins .git.GitAPI.clone(GitAPI.java:244) ... 13 更多 **原因：java.io.IOException：无法运行程序“”**：错误=2，在 hudson.Proc$LocalProc.(Proc.java:244) 的 java.lang.ProcessBuilder.start(Unknown Source) 处没有此类文件或目录在 hudson.Proc$LocalProc.(Proc.java:216) 在 hudson.Launcher$LocalLauncher.launch(Launcher.java:709) 在 hudson.Launcher$ProcStarter.start(Launcher.java:338) 在 hudson.Launcher$ProcStarter .join(Launcher.java:345) at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:843) ... 19 更多原因：java.io.IOException: error=2, No such file or directory at java.lang.UNIXProcess.forkAndExec(Native Method) at java.lang.UNIXProcess.(Unknown Source) at java.lang.Pro

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-18T05:57:34.120

我遇到并解决了同样的问题:)

配置git的路径有两种方式：

1.  关于詹金斯大师

    一种。进入 Jenkins 系统配置（Jenkins -> 管理 Jenkins -> 配置系统）

    湾。找到 Git 项并配置 git 安装（在 Jenkins Master 上指定 git 路径）

2.  在詹金斯奴隶上

    一种。进入 Jenkins Slave 的配置

    湾。选中“Tool Locations”复选框并指定 Jenkins Slave 上的 git 路径。

在我的情况下，我无权访问 Jenkins Master。所以我在 Jenkins Slave 上安装了 git 并将其添加到 Jenkins Slave 的配置中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T16:48:36.153

这似乎是一个错误，请参阅[JENKINS-16523](https://issues.jenkins-ci.org/browse/JENKINS-16523)，我在其中发布了解决方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-11T22:17:18.887

我经历了同样的问题。

我注意到单个作业“/var/lib/jenkins/jobs/job_name/config.xml”中混合了 git 配置：

```
[root@jenkins.example.com jobs]# find . -maxdepth 2 -name     config.xml|xargs grep '<gitTool>'
./job1/config.xml:    <gitTool>git</gitTool>
./job2/config.xml:    <gitTool>Default</gitTool>
./job3/config.xml:    <gitTool>git</gitTool>
./job4/config.xml:    <gitTool>Default</gitTool> 
```

所以我修复了 gitTool 的名称并重新启动了 Jenkins。看起来 git 配置不正确，并且 git 的更改没有传播到所有作业。

另请注意，.xml 文件中的 git 配置可能与 Jenkins 的配置和 webface 中的配置不同！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-12T20:20:36.497

1.  `git --version`在 Master 或 Slave 上运行
2.  如果你没有得到任何东西，那意味着 Git 没有安装
3.  如果您认为 Git 已安装，请将 Git 可执行文件的路径（例如 C:\Program Files\Git\cmd）添加到`PATH`环境变量
4.  在 Master 或 Slave 上运行`git --version`并确保您获得有效版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T08:39:08.960

我在创建一个新的 . 之后遇到了同样的问题，`JOB`修复了它`GIT`在.`Label Expression``Restrict where this project can be run`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-03T03:25:04.263

除了 superlee 回答的步骤外，您需要为您的服务器端配置节点属性，如果您的本地是 windows 系统，则工具位置，请参阅下面的屏幕截图：

[服务器端的工具位置](https://i.stack.imgur.com/UxvAL.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-24T05:32:44.143

它可能由于多种原因而发生。

1.  你可能没有安装 git
2.  Jenkins 无法使用 git 二进制文件
3.  权限问题。

这篇博客[Jenkins Git Clone Error](https://scriptcrunch.com/git-clone-error-java-io-ioexception/)解释了这个错误的所有场景及其解决方案。

# macos - 为什么视图的淡出效果不起作用？

> ID：12202080
> 
> 赞同：0
> 
> 时间：2012-08-30T17:13:24.830
> 
> 标签：macos, animation, nsview

我将内容作为文档视图添加到滚动视图中，并使用此代码淡出我的文档视图：

```
- (IBAction)deleteAllRules:(id)sender {

    NSViewAnimation * deleteListOfRulesViewAnimation;
    NSRect viewRect;
    NSMutableDictionary* animDict;

    // Create the attributes dictionary
    animDict = [NSMutableDictionary dictionaryWithCapacity:3];
    viewRect = listOfRulesView.frame;

    // Specify which view to modify.
    [animDict setObject:listOfRulesView forKey:NSViewAnimationTargetKey];

    // Specify the starting position of the view.
    [animDict setObject:[NSValue valueWithRect:viewRect] forKey:NSViewAnimationStartFrameKey];

    // Shrink the view from its current size to nothing.
    NSRect viewZeroSize = listOfRulesView.frame;
    viewZeroSize.size.width = 0;
    viewZeroSize.size.height = 0;
    [animDict setObject:[NSValue valueWithRect:viewZeroSize] forKey:NSViewAnimationEndFrameKey];

    // Set this view to fade out
    [animDict setObject:NSViewAnimationFadeOutEffect forKey:NSViewAnimationEffectKey];

    // Create the view animation object.
    deleteListOfRulesViewAnimation = [[NSViewAnimation alloc] initWithViewAnimations:[NSArray
                                                               arrayWithObjects:animDict, nil]];
    // Set some additional attributes for the animation.
    [deleteListOfRulesViewAnimation setDuration:1.5];    // One and a half seconds.
    [deleteListOfRulesViewAnimation setAnimationCurve:NSAnimationEaseIn];
    [deleteListOfRulesViewAnimation setDelegate:self];

    // Run the animation.
    [deleteListOfRulesViewAnimation startAnimation];

    // The animation has finished, so go ahead and release it.
    [deleteListOfRulesViewAnimation release];

} 
```

但视图隐藏没有淡出效果。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:31:42.030

建议对 10.5+ 代码使用 Core Animation。

使用 Core Animation 最简单的方法是使用动画代理。例如，您可以通过为视图的 alpha 值设置动画来实现淡出效果：

```
[[myView animator] setAlpaValue:0.0f] 
```

您可以使用以下方法更改动画持续时间：

```
[[NSAnimationContext currentContext] setDuration:0.4f] 
```

# xslt - 如何选择价值怪异的肥皂 - xml

> ID：12202081
> 
> 赞同：0
> 
> 时间：2012-08-30T17:13:28.223
> 
> 标签：xslt, select, soap

我是 xsl 的新手，我想知道如何选择字段 r1 的值

这是我的 xml（不是 100% 肥皂）

* * *

```
<Result>
<send>
    <x>1</x>
</send>
<received>
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <ns1:Consult xmlns:ns1="http://www.example.org/New/">
        <message>
            <r1>2</r1>
        </message>
        </ns1:Consult>
    </soapenv:Body>
    </soapenv:Envelope>
</received>
</Result> 
```

* * *

我试过这个

```
<xsl:value-of select="/Result/received/soap:Envelope/soap:Body[1]/*[namespace-uri()='http://www.example.org/New/' and local-name()='Consult'][1]/message/r1"/> 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:45:43.103

您需要注册 SOAP 命名空间：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <xsl:template match="/">
        <xsl:value-of
            select="/Result/received/soap:Envelope/soap:Body[1]/*[
                        namespace-uri()='http://www.example.org/New/' 
                        and local-name()='Consult'][1]/message/r1" />
    </xsl:template>
</xsl:stylesheet> 
```

更好的是，同时注册它们：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:ns1="http://www.example.org/New/>
    <xsl:template match="/">
        <xsl:value-of
            select="/Result/received/soap:Envelope/
                        soap:Body[1]/ns1:Consult[1]/message/r1" />
    </xsl:template>
</xsl:stylesheet> 
```

# python - 如何设置多个单元测试共享的资源？

> ID：12202085
> 
> 赞同：9
> 
> 时间：2012-08-30T17:13:42.627
> 
> 标签：python, unit-testing, python-2.6

在 Python 中，如何为一整套单元测试设置一个设置（可能包含昂贵的函数调用）？

例子：

```
import unittest

class Test1(unittest.TestCase):
    def setUp(self):
        print "expensive call"
    def test1(self):
        self.assertEqual(1, 1)
    def test2(self):
        self.assertEqual(1, 1)

if __name__ == "__main__":
    unittest.main() 
```

将运行两次昂贵的调用：

```
$ python unittest.py
expensive call
.expensive call
.
----------------------------------------------------------------------
Ran 2 tests in 0.000s

OK 
```

我该如何更改它，以便只进行一次昂贵的调用，并且所有测试都可以访问它的资源？

更新：我正在使用 Python 2.6。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T17:23:25.553

您可以使用 setUpClass

```
import unittest

class Test(unittest.TestCase):
    @classmethod
    def setUpClass(cls):
        print 'setUpClass'
        cls.data = 123

    def test_one(self):
        print 'test_one'
        print self.data

    def test_two(self):
        print 'test_two'

if __name__ == "__main__":
    unittest.main() 
```

见[http://docs.python.org/library/unittest.html#unittest.TestCase.setUpClass](http://docs.python.org/library/unittest.html#unittest.TestCase.setUpClass)

更新：

对于 python 2.6，我想你可以使用类级属性：

```
class Test(unittest.TestCase):
     value = result_of_some_expensive_function()
     def test(self):
         print self.value 
```

定义测试时，该函数将运行一次。

# android-layout - 下一行的Android输入框

> ID：12202088
> 
> 赞同：0
> 
> 时间：2012-08-30T17:14:03.563
> 
> 标签：android-layout

好的，所以我决定参加 Google 课程来学习 droid devving。我决定不使用简单的输入框和按钮，而是制作多个输入框和按钮，并让每个输入框和按钮显示一种颜色。问题是它会将所有输入框卡在一行上，而不是它们自己的单独行。这就是我在 activity_color.xml 中的内容

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="horizontal" >

<EditText android:id="@+id/edit_message_blue"
    android:layout_width="0dp"
    android:layout_height="wrap_content" 
    android:layout_weight="1"
    android:hint="@string/edit_message_blue" />

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send_blue" 
    android:onClick="sendMessageBlue" />

<EditText android:id="@+id/edit_message_orange"
    android:layout_width="0dp" 
    android:layout_height="wrap_content" 
    android:layout_weight="1"
    android:hint="@string/edit_message_orange" />

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/button_send_orange" 
    android:onClick="sendMessageOrange" />

</LinearLayout> 
```

这是主要的java类

```
package com.example.color.texts;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class ColorTexts extends Activity {
public final static String EXTRA_MESSAGE = "com.example.colortexts.MESSAGE";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_color_texts);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_color_texts, menu);
    return true;
}

/** Called when the user clicks the Send button for Blue */
public void sendMessageBlue(View view) {
    Intent intent = new Intent (this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message_blue);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}

/** Called when the user clicks the Send button for Red */
public void sendMessageRed(View view) {
    Intent intent = new Intent (this, DisplayMessageActivityRed.class);
    EditText editText = (EditText) findViewById(R.id.edit_message_red);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}

/** Called when the user clicks the Send button for Orange */
public void sendMessageOrange(View view) {
    Intent intent = new Intent (this, DisplayMessageActivityOrange.class);
    EditText editText = (EditText) findViewById(R.id.edit_message_orange);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);

}
} 
```

现在我想问题是如何告诉它开始一个新行，比如 android:layout_next="1" 或其他东西（我知道这不存在），还是我必须添加到公共类？比如制作另一个布局文件并引用它？我非常怀疑后者会起作用。

编辑：按照说明，我认为这是我应该做的，但它只知道显示第一行:(

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="horizontal" 
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText android:id="@+id/edit_message_blue"
    android:layout_width="0dp"
    android:layout_height="wrap_content" 
    android:layout_weight="1"
    android:hint="@string/edit_message_blue" />

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send_blue" 
    android:onClick="sendMessageBlue" />

</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >    

<EditText android:id="@+id/edit_message_red"
    android:layout_width="0dp" 
    android:layout_height="wrap_content"
    android:layout_weight="1" 
    android:hint="@string/edit_message_red" />

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/button_send_red" 
    android:onClick="sendMessageRed" />

</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<EditText android:id="@+id/edit_message_orange"
    android:layout_width="0dp" 
    android:layout_height="wrap_content" 
    android:layout_weight="1"
    android:hint="@string/edit_message_orange" />

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/button_send_orange" 
    android:onClick="sendMessageOrange" />

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:03:20.603

您的父布局设置为`android:orientation="horizontal"`. 这需要设置为`android:orientation="vertical"`。

**编辑：**这是 Android 文档中的参考：http: [//developer.android.com/reference/android/widget/LinearLayout.html#attr_android :orientation](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:orientation)

# wordpress - Wordpress - 在移动设备上使用桌面 CSS

> ID：12202089
> 
> 赞同：0
> 
> 时间：2012-08-30T17:14:13.057
> 
> 标签：wordpress

我正在为我的 WordPress 网站编写一个子主题。它在桌面上运行良好，但是当我在我的 Android 手机上浏览它时，它似乎忽略了 CSS。

如何制作主题，以便 WordPress 在移动设备上使用我的桌面主题？

我尝试寻找`meta viewport`标签，但我的主题中没有。另外，尝试设置，`media query`但这似乎也没有多大作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:10:10.700

原来是我的 Android（可能还有其他移动设备也有相同的行为）没有解析本地网络上我的计算机的主机名。因此没有提供 CSS 文件。尝试使用绝对 URL 并加载主题。

# sql - SQL Server 性能：表上的完整索引值得吗？

> ID：12202091
> 
> 赞同：1
> 
> 时间：2012-08-30T17:14:16.553
> 
> 标签：sql, performance, tsql, sql-server-2008-r2

今天我只是看了一些评论，我做了一些实验。我想象了一个存储一些坐标的系统。

情况如下：

我有两张桌子，第一张是：

```
CREATE TABLE Points
(
ID int IDENTITY(1,1) PRIMARY KEY,
X int,
Y int,
Name varchar(20),
Created datetime
) 
```

它只是存储坐标（100 万行）。第二个是一个帮助表，存储一些我们说经常使用的点进行选择（大约 1100 行）

```
CREATE TABLE PointSearchHelper
(
X int,
Y int
) 
```

到目前为止一切顺利。

我想做一个简单的选择：

```
SELECT p.* FROM Points p 
INNER JOIN PointSearchHelper h
ON p.X = h.X AND p.Y = h.Y 
```

我运行脚本，它平均在**280 毫秒**左右获得 1100 行。

当我检查我看到的执行计划时，SQL Server 2008 R2 推荐了一个索引（谁会想到？;)）：

```
CREATE NONCLUSTERED INDEX [<Name of Missing Index, sysname,>]
ON [dbo].[Points] ([X], [Y])
INCLUDE ([ID], [Name], [Created]) 
```

这是一个**完整的表索引**，包含每一列。它的大小是“巨大的”比较，我现在存储数据两次！

所以查询 no 要快得多！大约是**75 毫秒**（！） 非常大的改进**但**我需要几乎*两倍的空间*来进行这种改进。

**我的问题**很简单：有没有办法告诉列上的 SQL Server 如何存储值或任何其他技巧来避免双重存储？

更新：

换句话说：是否有任何技巧可以避免具有相同性能的“完整索引”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:36:13.923

将您的 PointSearchHelper 表更改为仅使用索引而不是 x、y 坐标：

```
create table PointSearchHelper . . .
    points_id int not null primary key 
```

当您进行连接时，请改为在 points_id 上进行。这应该减少空间并提高性能。

PS。我遇到了最奇怪的问题。向代码添加开放括号会导致加载答案时出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:12:18.523

你的 X+Y 对是独一无二的吗？
如果是，您可以考虑删除标识列并在 X+Y 对上创建复合主键。这将消除对附加索引的需求，并可能进一步加快您的查询速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:12:47.867

它在很大程度上取决于对该表的其他查询，但如果您不想拥有完整索引，则可以从 ID 中删除主键，而是将主键（和聚集索引）放在`(X, Y)`

这样做会通过 X 和 Y 值将数据存储在表中，因此这个特定的查询会更快，并且只需要使用新创建的聚集索引。

`Points`如果您对使用 ID in 子句的表进行查询，您将不得不寻找可能产生的性能问题`WHERE`，因为该列将不再像现在一样按 ASC 排序存储。如果您发现您的大多数查询是通过 X、Y 值查询此表，您可以在开发服务器中测试此更改并查看它是否适合您的需要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T18:14:26.130

当您创建索引而不包含非键值时，您会得到什么结果？它可能接近您使用完整索引获得的速度。

此外，如果 X、Y 坐标在 Points 中保证唯一，那么您可以考虑删除 ID 列并直接在 (X, Y) 上创建主键。这将为您节省一些空间以及索引该列的开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T05:44:02.927

我想在这里更容易回答答案，因为我做了“功课”，我很惊讶：

**第一的：**

在**没有包含非键值的情况下更改 INDEX** -> 这没有帮助，性能大约是 280 毫秒，就像没有完整索引的正常情况一样。

**第二：**

**删除 ID 列，**使**X + Y 作为主键**（假设这些点是唯一的）并*在 X + Y 上的 PointSearchHelper 表上创建另一个主键索引*。该解决方案让我感到惊讶，因为当时执行计划同时使用了两个索引，但速度也在 280 毫秒左右。所以它**根本没有帮助**。

**第三：**

删除存储 X 和 Y 的 ID，假设当我保存值时围绕它做一些逻辑，我检查这些记录的主键 ID 是什么。这样只有两个索引，Points 和 PointHelperSearch 上还有两个主键索引。（我可以在 exectuin 计划中看到它们，它们都被使用了。）它**做到了**！速度约为 60-70 毫秒。所以这里是诀窍。

现在，我想知道*Second*和*Third*之间有什么区别。是否计数了这么多毫秒，以至于有两个数字而不是一个？

# vb.net - WinRT - 访问被拒绝读取文件

> ID：12202092
> 
> 赞同：4
> 
> 时间：2012-08-30T17:14:20.087
> 
> 标签：vb.net, windows-8, windows-runtime

我正在尝试编写一些代码来写入文本文件。我有代码工作......但今天（没有更改）它开始产生“拒绝访问”错误。我正在写 LocalFolder (Windows.Storage.ApplicationData.Current.LocalFolder)。

我是否必须在清单中声明我要将文件保存在 LocalStorage 中？我知道我必须为我的文件，或者我错过了什么？这是我的示例方法，说明了我如何尝试写入文件：

```
 ''' <summary>
    ''' Writes all of the text to the specified file in one of the specified safe storage folders.
    ''' </summary>
    ''' <param name="text">The text to write.</param>
    ''' <param name="append">Whether or not to append the data or overwrite what is in the file.</param>
    ''' <param name="fileName">The name of the file to write the data to.</param>
    ''' <param name="safeFolder">The safe storage folder that should be written to.  These folders are isolated for the application to use
    ''' and do not require additional manifest permissions.</param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    Public Shared Async Function WriteAllText(text As String, append As Boolean, fileName As String, safeFolder As SafeStorageFolder) As Task
        Dim folder As Windows.Storage.StorageFolder

        Select Case safeFolder
            Case SafeStorageFolder.Local
                folder = Windows.Storage.ApplicationData.Current.LocalFolder
            Case SafeStorageFolder.Roaming
                folder = Windows.Storage.ApplicationData.Current.RoamingFolder
            Case SafeStorageFolder.Temp
                folder = Windows.Storage.ApplicationData.Current.TemporaryFolder
            Case Else
                folder = Windows.Storage.ApplicationData.Current.LocalFolder
        End Select

        Dim sf As StorageFile

        If append = True Then
            sf = Await folder.CreateFileAsync(fileName, Windows.Storage.CreationCollisionOption.OpenIfExists)
        Else
            sf = Await folder.CreateFileAsync(fileName, Windows.Storage.CreationCollisionOption.ReplaceExisting)
        End If

        ' WriteTextAsync will always overwrite the file even if the existing file has been opened.  We'll use
        ' AppendTextAsync here, the above CreateFileAsync will handle whether the file has been truncated or not.
        Await FileIO.AppendTextAsync(sf, text)

    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:17:02.183

我在测试项目中使用了相同的代码逻辑，它对我来说很好。我没有遍历所有附加/不附加路径，但我能够写入每个文件夹。

您是否从您在选择中设置的文件夹对象中提取了文件路径并仔细检查您是否可以在文件资源管理器中打开它？

# class - 类模块的子对象在 vba for excel 中不起作用

> ID：12202098
> 
> 赞同：2
> 
> 时间：2012-08-30T17:14:38.587
> 
> 标签：class, vba, collections, excel

我搜索了一下，但找不到足够相似的问题/答案。所以这里是：

我有一个名为 Project 的类对象。一个项目可以有多个与之相关的场景。

我为每个对象创建了类模块。但我相信，我在为给定项目实例化场景集合时遇到了困难。

以下是类模块：

**1) 项目：**

```
Private pProjectID As Integer 
Private pName As String 
Private pDateCreated As String 
Private pScenarios As cScenarios

' PROPERTIES

Public Property Get ProjectID() As Integer
    ProjectID = pProjectID 
End Property
Public Property Let ProjectID(value As Integer)
    pProjectID = value 
End Property
Public Property Get name() As String
    name = pName 
End Property 
Public Property Let name(value As String)
    pName = value 
End Property 
Public Property Get Scenarios() As cScenarios
    Set Scenarios = pScenarios 
End Property
Public Property Set Scenarios(value As cScenarios)
    Set pScenarios = value 
End Property 
```

**2）cScenarios集合类模块：**

```
Private pScenarios As Collection

Private Sub Class_Initialize()
    Set pScenarios = New Collection
End Sub
Private Sub Class_Terminate()
    Set pScenarios = Nothing
End Sub
Public Function Item(index As Variant) As cScenario
    Set Item = pScenarios.Item(index)
End Function
Public Property Get Count() As Long
    Count = pScenarios.Count
End Property
Public Sub Add(obj As cScenario)
    pScenarios.Add obj
End Sub
Public Sub Remove(index As Variant)
    pScenarios.Remove index
End Sub 
```

**最后（3）场景类对象：**

```
Private pScenarioID As Integer
Private pName As String
Private pDateCreated As String
Private pParent As cProject

Public Property Get ScenarioID() As Integer
    ScenarioID = pScenarioID
End Property
Public Property Let ScenarioID(value As Integer)
    pScenarioID = value
End Property
Public Property Get name() As String
    name = pName
End Property
Public Property Let name(value As String)
    pName = value
End Property
Public Property Get parent() As cProject
    parent = pParent
End Property
Public Property Let parent(value As cProject)
    pParent = value
End Property 
```

这是一个标准模块：

```
Sub test1()

Dim cS As cScenarios
Dim s As cScenario

Set cS = New cScenarios

For i = 1 To 3
    Set s = New cScenario
    s.name = "s" & i
    cS.Add s
Next

Debug.Print cS.Item(3).name
Debug.Print cS.Count

End Sub 
```

这行得通。一切都很好。目前。我能够用多种场景填充 cS。但是，如果我将场景集合作为项目的子对象引用（参见下面的 test2() ），我会在 cs.cs 上触发“运行时错误'91'：对象变量或未设置块变量”。添加通话。

```
Sub test2()

Dim p As cProject
Dim cS As cScenarios
Dim s As cScenario

Set p = New cProject
Set cS = p.Scenarios

For i = 1 To 3
    Set s = New cScenario
    s.name = "s" & i
    cS.Add s
Next

Debug.Print cS.Item(3).name
Debug.Print cS.Count

End Sub 
```

我在构建班级模块时做错了什么和/或如何修复它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:10:20.853

`pScenarios`在尝试`cProject`使用`Add()`. 您可以通过向以下位置添加初始化程序来解决此问题`cProject`：

```
Private Sub Class_Initialize()
    Set pScenarios = New cScenarios
End Sub 
```

这将保证`cS`实例不会`Nothing`在您尝试`Add`在其内部调用时出现`test2`。另一种方法（较弱的 IMO）是在内部`p.Scenarios = new cScenarios`更新后设置。另外，请确保属性设置器是而不是.`p``test2``cScenario.parent``Property Set``Property Let`

# php - 将内容限制为前 10 个用户的最佳方法是什么，可能使用 PHP 和 MySQL？

> ID：12202099
> 
> 赞同：0
> 
> 时间：2012-08-30T17:14:40.960
> 
> 标签：php, mysql

我需要向我的应用程序的前 10 个用户提供内容，然后向后续用户显示道歉消息 - 我假设使用 MySQL 记录用户，一旦达到 10 个切换到其他内容但找不到最佳方式.. .

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:16:26.627

基本上我会假设你想一次又一次地这样做，所以我认为最简单的方法是有一个表，在每页加载的基础上存储多行..如果特定活动的行数小于不管你想说什么，都是截断。

我会说只是在每个广告系列的基础上进行计数，但是谁知道您可能想了解更多关于您的用户的信息，可能是 ip、时间等。我肯定会说 IP，因为我可以登陆您的页面，刷新第 10 页并为其他人杀死它，因此您可能希望将其带到 IP 也是检查以限制该行为的地方。但是你可以跟踪他们降落的时间，以及所有其他的东西，尽管如此，我会保持它超级简单。

所以基本上你想做..

就像是

询问：

```
SELECT * FROM `load_count_table` WHERE campaignID = 1

PHP:
<?php
//note not sure which sql version your using, ie: mysql, mysqli, postgress
//so you will have to do conversion from query to php based array
//example $row = mysql_fetch_array($result);
if($countOfrows < 10)
{

   if($row['userip'] !== $ipOfcurrentuser)
   {
      //you can get IP through the global $_SERVER
      //you will want to cycle over your sql array for all the userip's to compare
      //this if statement is checking to see if there is no match
      //no match found..
      include_once('special_page.php');
      query("INSERT INTO `load_count_table` (userip, campaignID, the_time) values('$ipOfcurrentuser', '1', 'sql formated datetime, timestamp')");
   }
   else
   {
      include_once('sorry_page.php');
   }
}
else
{
  include_once('sorry_page.php');
}
?> 
```

现在根据我在这里得到的你想要的数据库表模式

列：userip varchar(25)、campaignID int(11)、the_time 日期时间。

# sql - 添加和减去多列

> ID：12202100
> 
> 赞同：-3
> 
> 时间：2012-08-30T17:14:43.110
> 
> 标签：sql, oracle

我在一个表中有 3 列，所有列都包含数值。

我想添加列 a 和 b 并减去列 c 那会是什么 SQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:20:23.180

除非我遗漏了什么，听起来你只需要这样做：

```
select (NVL(cola, 0) + NVL(colb, 0)) - NVL(colc, 0)
from yourtable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:35:22.313

回答您在评论中对@bluefeet 的回答提出的问题：

```
SELECT CASE
         WHEN A = B + C THEN A - C
         ELSE A + B - C
       END AS RESULT_VAL
  FROM SOME_TABLE 
```

或者您可以在第一种情况下简单地返回 B ：

```
SELECT CASE
         WHEN A = B + C THEN B
         ELSE A + B - C
       END AS RESULT_VAL
  FROM SOME_TABLE 
```

分享和享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T15:26:28.217

请检查以下逻辑进行减法，使用多列相加实现相同

```
select 
SUM(a.COL1 -       B.COL1) COL1,
SUM(a.COL2 -       B.COL2) COL2,
SUM(a.COL3 -  B.COL3) COL3,
SUM(a.COL4 - B.COL4) COL4,
SUM(a.COL5 -       B.COL5) COL5 ,
SUM(a.COL6 -       B.COL6) COL6,
SUM(a.COL7-    B.COL7) COL7
FROM 
(select Coln, --Common column
sum(COL1) COL1 ,
sum(COL2)  COL2,
sum(COL3) COL3,
sum(COL4) COL4,
sum(COL5) COL5,
sum(COL6) COL6,
sum(COL7) COL7
from wrk_prod
GROUP BY Coln) a,
(select Coln, --Common column
sum(COL1) COL1 ,
sum(COL2)  COL2,
sum(COL3) COL3,
sum(COL4) COL4,
sum(COL5) COL5,
sum(COL6) COL6,
sum(COL7) COL7
from wrk_test
GROUP BY Coln) b
where a.Coln = b.Coln; 
```

谢谢阿杰

# sql - SQL批量导入/插入多个表

> ID：12202101
> 
> 赞同：0
> 
> 时间：2012-08-30T17:14:45.513
> 
> 标签：sql, batch-file

我有一种情况，我需要将平面文件中的记录导入到多个表中，确保在每行插入的结果主键上保留选项卡，以便插入到下一个表中。

例子

```
For each Row in FlatFile_Import 

    RowID = INSERT Row_ELEMENTS1 INTO TABLEA

    PROPID = INSERT ROW_ELEMENTS2 & ROWID INTO TABLEB

    ATTRID = INSERT ROW_ELEMENTS3 & PROPID INTO TABLEC

    . . .  ..
NEXt 
```

我有一个临时表，**StagingTable**填充了来自 excel 文件的数据。**StagingTable**中的每一行数据都包含需要插入到各个表（TableA、TableB 和 TableC）中的记录。现在，当我从每一行插入到**TableA**的列时，我需要检索创建/生成的主 键**KeyA**接下来我选择从**StagingTable**行中插入应该进入**TableB**的列以及**KeyA**，然后取回**KeyB**和等等等等。

请问我怎样才能最好地处理这个要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:31:44.907

此解决方案假定您可以修改 TableA 和 TableB 以添加列。

将数据加载到 StagingTable 中。Staging 表应具有 StageRecordID（身份）。然后你需要修改 TableA 以添加一个列 StageRecordID。填充 TABLEA 时将 StageRecordId 存储在此列中。当填充 TableB 时，将 StagingTable 与 TableA 连接以获取 TableA 的 RowID，同样将 StageRecordID 存储在 TableB 中，以便您可以在填充 TABLEC 时加入它

**编辑**：一些示例代码

```
--Assuming TableA is 

/*
CREATE TABLE TABLEA
{
RowID INT IDENTITY(1,1)
,Row_ELEMENTS1 varchar(25)
,StageRecordID int  ---you need to add this column to the Table
}
*/
INSERT INTO TABLEA
(
Row_ELEMENTS1,
StageRecordID
)
   SELECT Col1 AS Row_ELEMENTS1,StageRecordID FROM StaginTable

--NOW assuming TABLEB is 

/*
CREATE TABLE TABLEA
{
PROPID  INT IDENTITY(1,1)
,Row_ELEMENTS2 varchar(25)
,ROWID 
,StageRecordID int ---you need to add this column to the Table
}
*/
INSERT INTO TABLEB
(
Row_ELEMENTS2,
ROWID,
StageRecordID
   )
    SELECT a.Col2 AS Row_ELEMENTS2, b.ROWID ,a.StageRecordID FROM StaginTable AS a
    INNER JOIN TABLEA AS b
    ON a.StageRecordID=b.StageRecordID 
```

# android - 各种 API 上的日历

> ID：12202105
> 
> 赞同：2
> 
> 时间：2012-08-30T17:15:08.050
> 
> 标签：android, events, calendar, uri

我在向 Android 日历添加事件时遇到问题。我的最低 SDK 版本是 7。我使用 Intent 添加事件，但问题在于各种 API。我用这个：

```
 String eventUriString;
    if (Build.VERSION.SDK_INT > 7)
     eventUriString = "content://com.android.calendar/events";
    else  eventUriString = "content://calendar/events";

    ContentValues eventValues = new ContentValues();

    eventValues.put("calendar_id", 1); 
    eventValues.put("title", "title");
    eventValues.put("description", desc);
    eventValues.put("eventLocation", "");

    long endDate = startDate + 1000 * 60 * 60; 

    eventValues.put("dtstart", MyClass.getDate());
    eventValues.put("dtend", endDate);

    eventValues.put("eventStatus", 0); 
    eventValues.put("visibility", 2); 
    eventValues.put("transparency", 0); 

    eventValues.put("hasAlarm", 0); 

    Uri eventUri = context.getContentResolver().insert(Uri.parse(eventUriString), eventValues);
    long eventID = Long.parseLong(eventUri.getLastPathSegment()); 
```

编辑我使用的一些事件：

```
String calendarUriBase = null;
            long id = MyEvents.getID(p);  //something ID from my another class
        Uri calendars = Uri.parse("content://calendar/calendars");
        Cursor managedCursor = null;
        try {
            managedCursor = managedQuery(calendars, null, null, null, null);
        } catch (Exception e) {
            // eat
        }

        if (managedCursor != null) {
            calendarUriBase = "content://calendar/";
        } else {
            calendars = Uri.parse("content://com.android.calendar/calendars");
            try {
                managedCursor = managedQuery(calendars, null, null, null, null);
            } catch (Exception e) {
                // eat
            }

            if (managedCursor != null) {
                calendarUriBase = "content://com.android.calendar/";
            }

        }

        ContentValues event = new ContentValues();

        event.put("title", "new Title");

        Uri eventsUri = Uri.parse(calendarUriBase+"events");
        Uri eventUri = ContentUris.withAppendedId(eventsUri, id);

        getContentResolver().update(eventUri, event, null, null); 
```

它适用于我的手机（带有 Android 2.3.7 的 SE X8），但不适用于 SDK 14。

是否有通用代码，我可以使用它来向日历添加事件 Android 适用于各种 SDK？我不知道它是怎么做的。我必须使用 API 7，因为我的经理想要。你有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T06:17:26.670

在 ICS 中引入了新的日历 API，因此您的代码将无法在 ICS 中运行。 [ICS 中的新公共 API](http://android-developers.blogspot.com/2011/10/ics-and-non-public-apis.html)

为了支持向所有日历添加事件，您可以像这样更改代码 -

```
if (Build.VERSION.SDK_INT >= 14) {
                saveCalendarEventICS();
            }
            else {
                int cal_id = getCalendar_ID();
                if(cal_id != 0){
                    saveCalendarEvent(cal_id);
                }
            }

private int getCalendar_ID() {
            // TODO Auto-generated method stub
            int calendar_id         = 0;
            String[] projection     = new String[] { "_id", "name" };
            String selection        = "selected=1";
            String path             = "calendars";
            Cursor calendarCursor   = getCalendarCursor(projection, selection, path);

            if (calendarCursor != null && calendarCursor.moveToFirst()) {
                int nameColumn      = calendarCursor.getColumnIndex("name");
                int idColumn        = calendarCursor.getColumnIndex("_id");
                do {
                    String calName  = calendarCursor.getString(nameColumn);
                    String calId    = calendarCursor.getString(idColumn);
                    if (calName != null /*&& calName.contains("Test")*/) {
                        calendar_id = Integer.parseInt(calId);
                    }
                } while (calendarCursor.moveToNext());
            }
            return calendar_id;
        }

private void saveCalendarEventICS() {

            Intent intent = new Intent(Intent.ACTION_INSERT)
             .setType("vnd.android.cursor.item/event")
             .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, frsttime)
             .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, sncdtime)
             .putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY , false) // just included for completeness
             .putExtra(Events.TITLE, vl_hldr[0])
             .putExtra(Events.DESCRIPTION, vl_hldr[2])
             .putExtra(Events.EVENT_LOCATION, vl_hldr[1])
             .putExtra(Events.RRULE, "FREQ=DAILY;COUNT=10") 
             .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)
             .putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE)
             .putExtra(Events.ALLOWED_REMINDERS, "METHOD_DEFAULT")
             .putExtra(Intent.EXTRA_EMAIL, "");
            startActivity(intent);
        }

private void saveCalendarEvent(int calid) {
            // TODO Auto-generated method stub

//Create the event here -----------

                Uri newEvent;
                if (Build.VERSION.SDK_INT >= 8) {
                    //newEvent = Uri.parse("content://com.android.calendar/events");
                    newEvent = ctx.getContentResolver().insert(Uri.parse("content://com.android.calendar/events"), event);

                    if (newEvent != null) {
                        long id = Long.parseLong( newEvent.getLastPathSegment() );
                        ContentValues values = new ContentValues();
                        values.put( "event_id", id );
                        values.put( "method", 1 );
                        values.put( "minutes", 15 ); // 15 minuti

                        getContentResolver().insert( Uri.parse( "content://com.android.calendar/reminders" ), values );
                    }
                }
                else {
                    newEvent = ctx.getContentResolver().insert(Uri.parse("content://calendar/events"), event);

                    if (newEvent != null) {
                        long id = Long.parseLong( newEvent.getLastPathSegment() );
                        ContentValues values = new ContentValues();
                        values.put( "event_id", id );
                        values.put( "method", 1 );
                        values.put( "minutes", 15 ); // 15 minuti

                        getContentResolver().insert( Uri.parse( "content://calendar/reminders" ), values );
                    }
                }

            }catch(Exception ee){}

        } 
```

# coldfusion - ColdFusion 9 中的输出限制？

> ID：12202108
> 
> 赞同：0
> 
> 时间：2012-08-30T17:15:22.167
> 
> 标签：coldfusion, coldfusion-9

每次有人填写表格但电子邮件报告被切断时，我都有我的代码设置向我发送电子邮件。

这是我在数据库中作为用户输入示例的内容：

```
awd wda aawd awd awd aaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
awd awdaawd awd awdaawd awd awd 
```

这就是电子邮件报告中显示的内容：

```
awd wda aawd awd awd aaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd
awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd awd awdaawd 
```

除了常规之外，我的电子邮件模板中没有任何样式

标签来分隔答案输出。

您可以输出的内容有任何限制吗？

这是我的 CF 代码：

```
 <cfquery name="fullResults" datasource="#variables.dsn#">
     select s.id, s.name surveyname, q.question, subq.answer subquestion, isnull(isnull(isnull(isnull(a.answer, r.textboxmulti),r.other),r.textbox),r.truefalse) as         selectedanswer, a.*, r.*
    from results r
    join questions q on r.questionidfk = q.id
    left join answers subq on r.itemidfk = subq.id
    left join answers a on r.answeridfk = a.id
    join surveys s on q.surveyidfk = s.id
    where owneridfk = <cfqueryparam value="#arguments.ownerid#" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
    order by s.id, owneridfk, q.rank, subq.rank desc
   </cfquery>

#fullResults.selectedanswer# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:10:18.927

您应该在 ColdFusion Administrator 中检查您的数据源设置，并确保将长文本缓冲区设置为足够长的值，以便您提取所需的数据。 ![在此处输入图像描述](../Images/73ed662d7bf1ae5d4e88df76e9c89082.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:00:57.663

问题是设置为 225 个字符，而其他所有内容都被缩减为该字符`isnull(isnull(isnull(isnull(a.answer, r.textboxmulti),r.other),r.textbox),r.truefalse) as selectedanswer`。`a.answer`在我周围添加了一个转换功能后，一切正常。

# iphone - 在 iOS 中使用 Core Audio 同时播放和录音

> ID：12202110
> 
> 赞同：7
> 
> 时间：2012-08-30T17:15:22.980
> 
> 标签：iphone, ios, core-audio, audiounit, audioqueueservices

我需要使用 Core Audio 同时播放和录制。我真的不想使用 AVFoundation API (AVAudioPlayer + AVAudioRecorder) 来做这件事，因为我正在制作一个音乐应用程序并且不会有任何延迟问题。

我查看了来自 Apple 的以下源代码：
[aurioTouch](http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007770)
[MixerHost](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html)

我已经查看了以下帖子：
[iOS：同时录制和播放的示例代码同时录制和](https://stackoverflow.com/questions/7184341/ios-sample-code-for-simultaneous-record-and-playback)
[播放音频](https://stackoverflow.com/questions/4215180/record-and-play-audio-simultaneously?lq=1)

我仍然不清楚如何使用 Core Audio 同时播放和录制相同的内容。任何关于我如何实现这一目标的指针都将非常可观。任何指向任何示例源代码的指针也将有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:30:59.783

The RemoteIO Audio Unit can be used for simultaneous record and play. There are plenty of examples of recording using RemoteIO (aurioTouch) and playing using RemoteIO. Just enable both unit input and unit output, and handle both buffer callbacks. See an example [here](http://atastypixel.com/blog/using-remoteio-audio-unit/)

# ruby-on-rails - 如何截断字符串并返回没有中心部分的第一部分和最后一部分？

> ID：12202112
> 
> 赞同：1
> 
> 时间：2012-08-30T17:15:27.177
> 
> 标签：ruby-on-rails, ruby, truncate

让`string_a = "I'm a very long long long string"`

Ruby 中是否有一种方法可以截断这样的字符串？：

```
magic_method(string_a) # => "I'm a ver...ng string" 
```

在 Rails 中我可以做到：`truncate(string_a)`但只返回第一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:21:16.107

为什么不尝试类似的东西：

```
s[0..l] + "..." + s[s.length-l..s.length] 
```

l * 2 + 3 是所需的长度，所以可能是这样的方法

```
def middle_truncate(s,length=20,ellipsis="...")
 return s if s.length <= length + ellipsis.length
 return s[0..length] if length < ellipsis.length
 len = (length - ellipsis.length)/2 
 s_len = len - length % 2
 s[0..s_len] + ellipsis + s[s.length-len..s.length]
end

s ="I'm a very long long long string"
puts middle_truncate(s, 100) 
puts middle_truncate(s, 21) 
puts middle_truncate(s, 11) 
puts middle_truncate(s, 5) 
puts middle_truncate(s*2, 45)
puts middle_truncate(s)
puts middle_truncate(s,2) 
```

输出

```
I'm a very long long long string
I'm a ver...ng string
I'm ...ring
I...g
I'm a very long long ...long long long string
I'm a ver...g string
I'm 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T18:24:41.577

您可以尝试`String.scan`使用正则表达式的方法来在您希望的位置断开字符串。尝试类似的东西：

```
def magic_method(string_x)
    splits = string_x.scan(/(.{0,9})(.*?)(.{0,9}$)/)[0]
    splits[1] = "..." if splits[1].length > 3
    splits.join
end 
```

解释：假设`string_a = "I'm a very long long long string"`；`string_b = "A small test string"`; 和`string_c = "tiny"`。首先将字符串分成 3 组。

*   第一组`(.{0,9})`尝试捕捉前 9 个或更少的字符。前任。`"I'm a ver"` 对于`string_a`; `"A small t"`为`string_b`和`"tiny"`为`string_c`。
*   最后一组`(.{0,9}$)`尝试捕获最后 9 个或更少的字符和字符串 ( `$`) 的结尾。前任。`"ng string"`对于`string_a`; `"st string"`对于`string_b`和`""`对于`string_c`;
*   中间那组`(.*?)`试图抓住剩下的东西。这只起作用，因为`?`这使得这个正则表达式不贪婪（否则它会得到字符串的其余部分，不给最后一组留下任何东西。例如：`"y long long lo"`for `string_a`，`"e"`for`string_b`和`""`for`string_c`

然后我们检查中间组是否大于 3 个字符，如果是，我们替换为`"..."`. 这只会发生在`string_a`. 在这里，我们不想做`string_b`更长的时间，用`"e"`结果`"..."`代替`"A simple t...st string"`。

最后将组（数组元素）连接成一个字符串`Array.join`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:39:32.927

```
str = "abcdefghijklmnopqrstuvwxyz"
str[9..-10] = "..."
p str #=> "abcdefghi...rstuvwxyz" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T17:56:29.090

这可以解决问题：

```
ELLIPSIS = "..."
DEFAULT_MAX_LEN = 15

def trunc_to_len(string, len = DEFAULT_MAX_LEN)
    return "" if len <= 0
    return "." * len if len < ELLIPSIS.length + 2
    return string if string.length <= len

    # make room for "..."
    half = (len - ELLIPSIS.length) / 2
    string[0,half] + ELLIPSIS + string[-half,half]
end 
```

这些例子：

```
puts trunc_to_len("I'm a very long long long string", 100)
puts trunc_to_len("I'm a very long long long string", 21)
puts trunc_to_len("I'm a very long long long string", 11)
puts trunc_to_len("I'm a very long long long string", 5)
puts trunc_to_len("I'm a very long long long string")
puts trunc_to_len("I'm a very long long long string",2) 
```

输出：

```
I'm a very long long long string
I'm a ver...ng string
I'm ...ring
I...g
I'm a ...string
.. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T19:02:33.320

```
def trunc_to_len(s, n)
  if n < s.length
    i, j = n.divmod 2
    s[0..i+j-1] + "..." + s[-i..-1]
  else
    s
  end 
end 
```

# jquery - JQuery：向元素添加类-不能将此类用于选择器？

> ID：12202114
> 
> 赞同：0
> 
> 时间：2012-08-30T17:15:28.627
> 
> 标签：jquery, jquery-selectors, addclass

我有以下问题：为了在不同情况下标记元素，我想向元素添加一个类：

```
jQuery('#menu-item-41 a').addClass('newsbox-closed1'); 
```

稍后，当单击具有此类的元素时，我想做一些有趣的工作人员-到目前为止，它工作正常：

```
jQuery('.newsbox-closed1').click(function(){
      jQuery('#newsbox').css('display', 'block');
      jQuery(this).css('background-color', '#FF33AB').removeClass('newsbox-closed1').addClass('news-open');
 }); 
```

直到现在一切都很好。元素获得类“news-open”并且新闻框出现。但随后以下内容不再起作用：

```
jQuery('.news-open').click(function(){
  alert('JUCVJU');
  jQuery(this).removeClass('news-open').addClass('newsbox-closed2');
  jQuery('#newsbox').css('display', 'none');
}); 
```

想法：当有人再次点击同一个链接时，新闻框应该消失并且链接获得一个新的类。这不起作用 - 没有删除类“new-open”，没有显示警报框，什么都没有。此外，以下工作已完成一半 - 它是新闻框上的关闭按钮：

```
jQuery('#close').click(function(){
  jQuery('#newsbox').css('display', 'none');
  jQuery('.news-open').removeClass('news-offen').addClass('newsbox-closed2')
}); 
```

id 为“newsbox”的元素消失了，但第二部分没有效果。该元素的类仍然存在。我没有收到任何错误消息，什么都没有……有人知道是什么原因导致的吗？

最好的，托拜厄斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:17:34.520

您可能需要委托您的事件处理程序，因为您在文档加载后更改类。尝试更换

```
jQuery('.news-open').click(function(){ 
```

和

```
jQuery(document).on('click', '.news-open', function(){ 
```

但是，如果您可以使其比 更具体`document`，那么您应该这样做。将您的活动委托给最近的容器，`.news-open`以获得最佳效率。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:20:18.310

您正在运行时添加类。改变

```
jQuery('.news-open').click(function(){ 
```

至

```
jQuery('.news-open').on('click',(function(){ 
```

以上是针对 JQuery >=1.7

对于 JQuery <1.7，使用

```
jQuery('.news-open').live('click',function(){ 
```

在运行时创建的元素也可以在 JQuery 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T13:43:10.813

非常相似的问题：在单击链接时，我制作了一个动画以显示隐藏的 div，并将`'.hideMe'`类添加到布局的其余部分，以便单击显示的 div 之外的任何位置都会再次隐藏它。 `'.hideMe'`jQuery 不能选择它，因为它在页面加载时不存在。通过将两种方法与委托链接在一起来解决`.on()`，如下所示：[https ://stackoverflow.com/a/8261148](https://stackoverflow.com/a/8261148)

```
$(document.body).on('click', '#link', function() {
  $('div').addClass('.hideMe').animate(); // animation code here
  $('#newdiv').show();
}).on('click', '.hideme', function() {
  $('div').removeClass('.hideMe').animate(); // animation code here
  $('#newdiv').hide();
}); 
```

这是 jQuery 1.10.x。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:52:39.277

感谢你们！！！

为了让其他面临类似问题的人明白这一点，我的工作代码如下所示：

```
jQuery('#menu-item-41').on('click', '.news-open', (function(){
  alert('JUCVJU');
  jQuery(this).removeClass('news-open').addClass('newsbox-closed2');
  jQuery('#newsbox').css('display', 'none');
})); 
```

id“menu-item-41”是容器的id，它用类“news-open”围绕我的元素。现在，当我再次单击进一步重新分类的元素并且新闻框消失时，我得到了警报框。

# javascript - Modernizr IE 跳过“卸载”

> ID：12202117
> 
> 赞同：0
> 
> 时间：2012-08-30T17:15:37.353
> 
> 标签：javascript, modernizr

阅读 [https://github.com/Modernizr/Modernizr/blob/master/modernizr.js#L198](https://github.com/Modernizr/Modernizr/blob/master/modernizr.js#L198)

这是什么意思：

```
// When using `setAttribute`, IE skips "unload", WebKit skips "unload" and "resize", whereas `in` "catches" those
var isSupported = eventName in element; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:20:37.970

如果您要问评论的含义，我认为这与`if`之后语句中的代码有关。如果简单`in`测试失败，则代码尝试调用`setAttribute()`以创建虚拟事件处理程序。显然，根据该评论，某些浏览器会忽略此类尝试。因此`in`首先进行测试。

也就是说，我认为这意味着第 208 行的代码：

```
 isSupported = is(element[eventName], 'function'); 
```

将对某些事件返回“假阴性”。

# javascript - 使用 JavaScript 显示鼠标 x 和 y 位置

> ID：12202118
> 
> 赞同：9
> 
> 时间：2012-08-30T17:15:38.390
> 
> 标签：javascript, dom-events, onmousemove

第一个版本没有显示 x 和 y 并得到以下错误：

> 未捕获的类型错误：无法读取未定义的属性“pageX”

第二个版本有效，但编码非常相似，找不到问题。

第一个版本（不工作）

```
 <form name ="show">
        <input type="text" name="mouseXField" value="0" size="6">Mouse X Position<br>
        <input type="text" name="mouseYField" value="0" size="6">Mouse Y Position<br>
    </form>

        <script type="text/javascript">

        var mie = (navigator.appName == "Microsoft Internet Explorer") ? true : false;

        if (!mie) {                
            document.captureEvents(Event.MOUSEMOVE);
            document.captureEvents(Event.MOUSEDOWN);
        }

        document.onmousemove = mousePos();
        document.onmousedown = mouseClicked();

        var mouseClick;
        var keyClicked;

        var mouseX = 0;
        var mouseY = 0;

        function mousePos (e) {                
            if (!mie) {
                mouseX = e.pageX; 
                mouseY = e.pageY;
            }
            else
                mouseX = event.clientX + document.body.scrollLeft;
                mouseY = event.clientX + document.body.scrollTop;

        document.show.mouseXField.value = mouseX;
        document.show.mouseYField.value = mouseY;

        return true;
        }

        </script> 
```

第二版（工作）

```
 <form name="Show">
            <input type="text" name="MouseX" value="0" size="4"> X<br>
            <input type="text" name="MouseY" value="0" size="4"> Y<br>
      </form>

        <script type="text/javascript">

            var IE = document.all?true:false

            if (!IE) document.captureEvents(Event.MOUSEMOVE)

            document.onmousemove = getMouseXY;

            var tempX = 0
            var tempY = 0

            function getMouseXY(e) {
                if (IE) {       
                tempX = event.clientX + document.body.scrollLeft
                tempY = event.clientY + document.body.scrollTop
                } 
                else 
                {  
                 tempX = e.pageX
                 tempY = e.pageY
                }  

                document.Show.MouseX.value = tempX
                document.Show.MouseY.value = tempY

                return true
                }
        </script> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-30T17:22:17.217

乍一看：`clientX`应该在你`clientY`的：`{}``else`

```
else {
   mouseX = event.clientX + document.body.scrollLeft;
   mouseY = event.clientY + document.body.scrollTop;
} 
```

您还需要将事件发送到函数，

```
document.onmousemove = function (e) {mousePos(e);};
...
function mousePos (e) {
... 
```

看看这个：http: [//jsfiddle.net/NLsdZ/1/](http://jsfiddle.net/NLsdZ/1/)

此外，`captureEvents`不推荐使用 of，您应该`addEventListener`改用。更多信息在这里：[http ://forums.asp.net/t/1576872.aspx](http://forums.asp.net/t/1576872.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T06:01:24.043

我还注意到你没有在下面加载，或者至少说明你是。

```
var mie = (navigator.appName == "Microsoft Internet Explorer") ? true : false;

    if (!mie) {

        document.captureEvents(Event.MOUSEMOVE);
        document.captureEvents(Event.MOUSEDOWN);
    }

    document.onmousemove = mousePos();
    document.onmousedown = mouseClicked(); 
```

应该像/或最终为我工作：

```
 window.onload = function () {
         mie = (navigator.appName == "Microsoft Internet Explorer") ? true : false;

    if (!mie) {
         document.captureEvents(Event.MOUSEMOVE);
         document.captureEvents(Event.MOUSEDOWN);
    }
         document.onmousemove = function (e) {mousePos(e);};
         document.onmousedown = function (e) {mouseClicked();};
 }; 
```

# javascript - 如何使用正则表达式按类获取 svg 元素

> ID：12202120
> 
> 赞同：0
> 
> 时间：2012-08-30T17:16:05.567
> 
> 标签：javascript, regex, dom, svg

我正在尝试用 svg 制作一个交互式图表，其中包含边缘的路径和节点的圆。为了找到一个节点的子节点，我希望能够使用某个正则表达式搜索边缘的 id，因为这些 id 都是以下形式：“node1_id node2_id”。我尝试了许多解决方案，包括美元美元符号和将正则表达式直接放入 id 的查找元素中，但我没有运气。我找不到其他可以回答这个问题的东西，而且我对前端交易很陌生，所以我不确定这是否是 svg 特有的东西。

```
$$('path[id^="\b10020 ([\d]+)"')
Error: SYNTAX_ERR: DOM Exception 12

document.getElementById("\b10020 ([\d]+)")
null 
```

可能是我做过的两个最明智的尝试。在这种情况下，所有 node1_id 为 10020 的边。

```
<path fill="none" stroke-width="1.0"
              d="M -1026.321777,958.875610 C -987.123413,912.258789 -858.400574,901.130981 -811.783752,940.329346"
              id="10020 12050" stroke-opacity="1.0" stroke="#7dcb3c"/> 
```

作为一个应该返回匹配的边缘的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:43:39.130

如果我这样做，我会将标记更改为：

```
<path fill="none" stroke-width="1.0"
      d="M -1026.321777,958.875610 C -987.123413,912.258789 -858.400574,901.130981 -811.783752,940.329346"
      data-node-1="10020" data-node-2="12050" stroke-opacity="1.0" stroke="#7dcb3c"/> 
```

然后使用“单美元符号”（又名，jQuery）：

```
$('path[data-node-1="10020"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:32:38.487

There is no CSS selector that accepts regular expressions, not even in the next [level 4 version](http://www.w3.org/TR/selectors4/#overview). `[foo^=bar]` means "an element whose `foo` attribute value begins exactly with the string `bar`". You can do several things:

*   if all you want is nodes with an ID beginning with `10020`, then you can use `$$("path[id^='10020 ']")` but this will accept IDs that don't continue with other digits only
*   if you want the `10020` value to appear in the ID, regardless of the position, then use the `path[id~='10020']` selector
*   if you really need to use regular expressions, then you have to walk the tree yourself and filter only the elements that you're interested in; you can optimize a bit by pre-filtering according to one of the selectors above, so that you have to check only the elements that do start with `10020`

However, there is one big problem with your usecase: **IDs may not contain spaces**, that's an invalid SVG document. You really must use another attribute than `id`, maybe `class` is better suited for you, or if there is a semantic meaning to those numbers, define your own namespace and use new attributes in that namespace.

If you use `class`, then your selectors could also become simpler: `$$("path.10020")`

# python - python在加载模块时捕获NameError

> ID：12202121
> 
> 赞同：2
> 
> 时间：2012-08-30T17:16:13.517
> 
> 标签：python, exception-handling, module, nameerror

我试图捕捉无法加载模块时发生的任何异常。当前的结果是“except”块没有被执行。

```
import sys 
def loadModule(module):
   try: 
      import module
   except: 
      print """ 
      Cannot load %s
      For this script you will need: 
         cx_Oracle:  http://cx-oracle.sourceforge.net/
         pycrypto:   https://www.dlitz.net/software/pycrypto/
         paramiko:   http://www.lag.net/paramiko/
       """ % module
      sys.exit(1)

loadModule(cx_Oracle) 
```

错误：

```
Traceback (most recent call last):
  File "./temp_script.py", line 16, in <module>
    loadModule(cx_Oracle)
NameError: name 'cx_Oracle' is not defined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:19:58.177

```
loadModule(cx_Oracle) 
```

你认为你传递给这个函数的是什么？`cx_Oracle`到目前为止，代码中没有任何名称。这就是您收到 NameError 的原因。你甚至没有进入这个功能。

```
 import module 
```

您不能将变量传递给导入，它会将您输入的内容解释为模块的文字名称

在这种情况下，我怀疑你甚至需要一个函数。只需将 try/except 移动到模块级别并直接导入 cx_Oracle。

只是因为我很好奇，这里有一种方法可以制作可重用的异常捕获导入函数。我不确定它何时/如何有用，但这里是：

```
from contextlib import contextmanager
import sys

@contextmanager
def safe_import(name):
    try:
        yield
    except:
        print 'Failed to import ' + name
        sys.exit(1)

with safe_import('cuckoo'):
    import cuckoo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:19:07.150

当 Python 试图在函数被调用之前查找`cx_Oracle`变量时，就会发生错误。`loadModule`

如果你想保持当前的策略，你可能真的想使用[importlib.import_module](http://docs.python.org/library/importlib.html#importlib.import_module)这样的东西，这样你就可以按名称导入模块，比如`import_module('cx_Oracle')`.

我建议做这样的事情：

```
try:
    import cx_Oracle
except ImportError:
    print "Can't load the Oracle module"
    dosomething() 
```

在模块的顶层。这是处理这种情况的 Pythonic 方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:19:20.927

始终考虑要捕获哪个异常。不要仅仅通过编码来概括`except:`。在这种情况下，您想要捕获`ImportError`. 您要传递给函数的参数`loadModule`应该是字符串类型，例如`loadModule('cx_Oracle')`（然后您将摆脱`NameError`）。要在其中动态加载模块`loadModule`，请查看例如[Dynamic loading of python modules](https://stackoverflow.com/questions/951124/dynamic-loading-of-python-modules)。

# ravendb - RavenDB 空间查询不返回结果

> ID：12202122
> 
> 赞同：1
> 
> 时间：2012-08-30T17:16:14.867
> 
> 标签：ravendb

我得到以下结果 0 ，我认为不应该是这种情况。

查询代码：

```
 var sourceResults = session.Advanced.LuceneQuery<Route>("Routes/BySource")
            .WithinRadiusOf(5, toMatch.Source.Location.Latitude, toMatch.Source.Location.Longitude)
            .WhereBetween(r => r.DateTime, minDateTime, maxDateTime).ToArray(); 
```

索引代码：

```
 /// <summary>
    /// Index for spatial search by route source.
    /// </summary>
    public class Routes_BySource : AbstractIndexCreationTask<Route>
    {
        public Routes_BySource()
        {
            Map = routes => from r in routes
                            select new { _ = SpatialIndex.Generate(r.Source.Location.Latitude, r.Source.Location.Longitude) };
        }
    } 
```

模型：

```
public class Route
{       
    /// <summary>
    /// Gets or sets the id.
    /// </summary>
    /// <value>
    /// The id.
    /// </value>        
    public string Id { get; set; }

    /// <summary>
    /// Gets or sets the source.
    /// </summary>
    /// <value>
    /// From.
    /// </value>
    public Address Source { get; set; }

    /// <summary>
    /// Gets or sets destination.
    /// </summary>
    /// <value>
    /// To.
    /// </value>
    public Address Destination { get; set; }

    /// <summary>
    /// Gets or sets the id of the user who requested the route.
    /// </summary>
    /// <value>
    /// The user id.
    /// </value>
    public string UserId { get; set; }

    /// <summary>
    /// Gets or sets the date time that the request is for.
    /// </summary>
    /// <value>
    /// The date time.
    /// </value>
    public DateTime DateTime { get; set; }
}

public class Address
{
    /// <summary>
    /// Gets or sets the name. This is the formatted full name of the address.
    /// </summary>
    /// <value>
    /// The name.
    /// </value>
    public string Name { get; set; }

    /// <summary>
    /// Gets or sets the location.
    /// </summary>
    /// <value>
    /// The location.
    /// </value>
    public Location Location { get; set; }
}

public class Location
{
    public double Latitude { get; set; }
    public double Longitude { get; set; }
} 
```

单元测试（调用查询代码）

```
 using (var session = Common.DocumentStore.OpenSession())
        {
            var routeService = new RouteService(session);
            var newRoute = new Route
            {
                Id = Guid.NewGuid().ToString(),
                DateTime = DateTime.Now,
                UserId = "user",
                Source = new Address { Name = "101 W. 79th St. NY, NY", Location = new Location { Latitude = 32, Longitude = 72 } },
                Destination = new Address { Name = "101 W. 79th St. NY, NY", Location = new Location { Latitude = 32, Longitude = 72 } }
            };
            routeService.Save(newRoute);
            var routes = routeService.Search(newRoute);
            Assert.IsTrue(routes.Any());
        } 
```

知道我在这里做错了什么吗？似乎它应该很简单......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:37:33.513

在您的代码中，您有 routeService.Save(newRoute);，我习惯于看到 session.Store(newRoute); 然后 session.SaveChanges();

在您调用 session.SaveChanges(); 之前，事情不会被写入数据库。

但是您需要给 ravenDB 时间来索引更改。我建议使用“等待非陈旧结果”，我现在不记得代码，但如果你谷歌 ravendb 非陈旧结果。

# jquery - 变量切换类

> ID：12202131
> 
> 赞同：0
> 
> 时间：2012-08-30T17:16:38.163
> 
> 标签：jquery, each, toggleclass

当单击外部链接时，我在运行 .each 函数以打开/关闭 div 时遇到困难。该功能有效，但我希望它适用于几个不同的 div（现在，missiondiv 和 visiondiv）。所以我创建了一个变量前缀，它找到一个跨度的 id 并以 this 作为前缀运行函数。（对不起，如果这没有意义）。我的脚本仅适用于第一个跨度 ID。[http://jsfiddle.net/jessica_b/KMJPf/](http://jsfiddle.net/jessica_b/KMJPf/)

链接的 HTML：

```
<div id="whoweare">
<span id="mission"><a href='#'>Mission</a></span></br>
<span id="vision"><a href='#'>Vision</a></span></br>
</div> 
```

div 的 HTML：

```
<div id="missiondiv" class="closed">Mission item</div>
<div id="visiondiv" class="closed">Vision item</div> 
```

Javascript函数：

```
 $.each($("#whoweare").find("span").attr("id"), function(){
    var prefix = $("#whoweare").find("span").attr("id");
    $('#' + prefix + ' a').click(function() {
        $('#' + prefix + 'div').toggleClass("closed");
        $('#' + prefix + 'div').toggleClass("item block");
        $(this).toggleClass('active-page');
        $container.isotope('reLayout');
    });
}); 
```

它在同位素内运行，但所有这些都有效。错误存在于上述脚本中，我对 jQuery 的熟练程度还不足以诊断我的错误！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:03:55.930

```
$('#whoweare span a').each(function(index, element) {
    $(element).click(function() {
        var prefix = $(this).parent('span').attr('id');
        $('#' + prefix + 'div').toggleClass("closed");
        // other actions
       return false;
    });
});​ 
```

[http://jsfiddle.net/MtX7p/16/](http://jsfiddle.net/MtX7p/16/)

或者

```
$('#whoweare span').each(function(index, element) {
    $(element).find('a').click(function() {
        var prefix = $(element).attr('id');
        $('#' + prefix + 'div').toggleClass("closed");
        // other actions
       return false;
    });
});​ 
```

[http://jsfiddle.net/MtX7p/17/](http://jsfiddle.net/MtX7p/17/)

这是您的完整脚本：http: [//jsfiddle.net/KMJPf/49/](http://jsfiddle.net/KMJPf/49/)

# asp.net - 为什么默认不启用 ViewStateUserKey

> ID：12202134
> 
> 赞同：0
> 
> 时间：2012-08-30T17:16:55.340
> 
> 标签：asp.net

ViewStateUserKey 似乎是一个非常有用的功能，可以防止某些 CSRF 攻击。为什么在 asp.net 应用程序中默认不启用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:29:15.690

我谈谈一些想法：

这`ViewStateUserKey`可能会破坏有效用户的视图状态，从而导致有效用户看到错误。所以最好让它出来，只有高级程序员才能使用它并且知道为什么视图状态会中断并尽可能处理它。

让我们给你一些例子。

如果您按原样使用它：

```
void Page_Init (Object sender, EventArgs e)
{ 
   if (User.Identity.IsAuthenticated)
      ViewStateUserKey = User.Identity.Name;
} 
```

并查看此步骤。

*   有效的登录用户在不需要记录的页面上看到 GridView。
*   此用户已离开页面一段时间，并且日志记录已过期
*   现在是尝试分页gridview，并获得一个viewstate break

为什么，因为是使用 启动页面`ViewStateUserKey`，但是在过期之后`ViewStateUserKey`现在不同（null，因为用户现在没有登录）并打破视图状态，同时这个页面不需要登录，而不是重定向恰好要求再次记录。

用这个简单的例子，这真的发生在我身上，我说这个参数可以打破视图状态，如果这个默认设置可能会导致一些类似的问题。

相对： [ViewStateUserKey + 共享主机 + ViewStateMac 验证失败](https://stackoverflow.com/questions/10862258/viewstateuserkey-shared-hosting-viewstatemac-validation-failure)

[http://www.hanselman.com/blog/ViewStateUserKeyMakesViewStateMoreTamperresistant.aspx](http://www.hanselman.com/blog/ViewStateUserKeyMakesViewStateMoreTamperresistant.aspx)

[http://msdn.microsoft.com/en-us/library/ms972969.aspx](http://msdn.microsoft.com/en-us/library/ms972969.aspx)

## 经验总结。

如果您将此密钥用于任何未请求登录的页面，并且您只是在其他页面登录，这很容易在回发时创建视图状态错误并破坏页面和回发。所以你不能默认启用它 - 使用它的人必须知道我上面描述的这种情况。

# facebook - 跟踪生成 Facebook Like 的外部网站

> ID：12202136
> 
> 赞同：1
> 
> 时间：2012-08-30T17:16:57.417
> 
> 标签：facebook, facebook-like

我们在互联网上有各种属性，每个属性都有相同 Facebook 网站的“Like”按钮。我们希望能够跟踪哪些站点（哪个域）生成了 Like。

我们正在使用 XMLFB Facebook Like 按钮实现，并且还用站点填写了`data-ref`参数（尽管从我读过的内容来看，`data-ref`它只是用于在发生 Like 后跟踪来自 Facebook 个人资料的点赞点击）。我们的目标是将每个 Like 归因于发生 Like 的每个特定的 Like 按钮或域。

这是我尝试过的：

*   在为其生成“赞”的 Facebook 网站上设置见解。域或数据引用没有明确的来源。
*   在产生类似内容的 Facebook 网站上设置洞察力（网站洞察力）。我发现见解没有正确记录喜欢。
*   我查看了 FQL，我得到的最接近源数据等详细指标的指标是 FQL，`page_fans_by_like_source`但事实证明这无关紧要。

有人对我如何实现我想要的功能有任何见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:43:46.600

跟踪此问题的唯一方法是自己执行此操作，方法是订阅 JS SDK 在各个站点上发布的“edge.create”事件。

# c# - 非常慢的foreach循环

> ID：12202137
> 
> 赞同：7
> 
> 时间：2012-08-30T17:17:00.770
> 
> 标签：c#, .net, ado.net

我正在处理现有的应用程序。该应用程序从一个巨大的文件中读取数据，然后在进行一些计算后，将数据存储在另一个表中。

但是这样做的循环（见下文）需要很长时间。由于该文件有时包含 1,000 条记录，因此整个过程需要数天时间。

我可以`foreach`用别的东西代替这个循环吗？我尝试使用`Parallel.ForEach`，它确实有帮助。我是新手，所以会感谢你的帮助。

```
foreach (record someredord Somereport.r)
{
    try
    {
        using (var command = new SqlCommand("[procname]", sqlConn))
        {
            command.CommandTimeout = 0;
            command.CommandType = CommandType.StoredProcedure;
            command.Parameters.Add(…);

            IAsyncResult result = command.BeginExecuteReader();
            while (!result.IsCompleted)
            {
                System.Threading.Thread.Sleep(10);
            }
            command.EndExecuteReader(result);
        }
    }
    catch (Exception e)
    {
        …
    }
} 
```

查看答案后，我删除了 Async 并使用如下编辑代码。但这并没有提高性能。

```
using (command = new SqlCommand("[sp]", sqlConn))
{
    command.CommandTimeout = 0;
    command.CommandType = CommandType.StoredProcedure;
    foreach (record someRecord in someReport.)
    {
        command.Parameters.Clear();
        command.Parameters.Add(....)
        command.Prepare();                            

        using (dr = command.ExecuteReader())
        {
            while (dr.Read())
            {
                if ()
                {

                }
                else if ()
                {

                }
            }
        }                             
    }                        
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T17:20:58.843

有没有考虑从 sql server 中提取整组数据并通过数据集处理数据，而不是循环多次 sql 连接？

编辑：决定进一步解释我的意思..您可以执行以下操作，伪代码如下

1.  使用 select * 并从数据库中获取所有信息并将它们存储到类或*字典的**列表*中。
**   做你的 foreach（在 someReport 中记录 someRecord）并像往常一样进行条件匹配。*

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T17:23:30.043

**第 1 步：**放弃异步尝试。它没有正确实施，无论如何你都在阻止。所以只需执行该过程，看看是否有帮助。

**第 2 步：**将 SqlCommand 移出循环并在每次迭代中重用它。这样您就不会为循环中的每个项目产生创建和销毁它的成本。

**警告：**确保您从上一次迭代中重置/清除/删除不需要的参数。我们使用可选参数做了类似的事情，并且从上一次迭代中“流血”，因为我们没有清理我们不需要的参数！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T17:39:08.380

你最大的问题是你正在循环这个：

```
IAsyncResult result = command.BeginExecuteReader();

while (!result.IsCompleted)
{
   System.Threading.Thread.Sleep(10);
}

command.EndExecuteReader(result); 
```

异步模型的整个想法是调用线程（执行此循环的线程）应该使用 Begin 方法启动所有异步任务，然后再开始使用 End 方法处理结果。如果您在主调用线程中使用 Thread.Sleep() 来等待异步操作完成（就像您在这里一样），那么您做错了，最终发生的是每个命令，一次一个, 正在被调用，然后在下一个开始之前等待。

相反，尝试这样的事情：

```
public void BeginExecutingCommands(Report someReport)
{
    foreach (record someRecord in someReport.r) 
    {
        var command = new SqlCommand("[procname]", sqlConn);

        command.CommandTimeout = 0;
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.Add(…);

        command.BeginExecuteReader(ReaderExecuted, 
            new object[] { command, someReport, someRecord });                   
    }
}

void ReaderExecuted(IAsyncResult result)
{
    var state = (object[])result.AsyncState;
    var command = state[0] as SqlCommand;
    var someReport = state[1] as Report;
    var someRecord = state[2] as Record;

    try
    {
        using (SqlDataReader reader = command.EndExecuteReader(result))
        {
            // work with reader, command, someReport and someRecord to do what you need.
        }
    }
    catch (Exception ex)
    {
        // handle exceptions that occurred during the async operation here
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T21:40:42.790

正如我们在评论中所说，将这些数据存储在内存中并使用它可能是一种更有效的方法。

因此，一种简单的方法是从实体框架开始。Entity Framework 将根据您的数据库模式自动为您生成类。然后，您可以导入包含 SELECT 语句[的存储过程。](http://msdn.microsoft.com/en-us/library/bb896279.aspx)我建议将存储过程导入 EF 的原因是，这种方法通常比在 LINQ 中针对 EF 进行查询更有效。

然后运行存储过程并将数据存储在`List`这样的...

`var data = db.MyStoredProc().ToList();`

然后你可以用它做任何你想做的事情`data`。或者正如我提到的，如果您要对主键进行大量查找，请使用[`ToDictionary()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)类似这样的东西......

`var data = db.MyStoredProc().ToDictionary(k => k.MyPrimaryKey);`

无论哪种方式，此时您都将使用您`data`的内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T17:41:42.420

在 SQL 中，写入的另一端是一个（一个）磁盘。你很少能并行写得更快。事实上，由于索引碎片，并行通常会减慢它的速度。如果您可以在加载之前按主（集群）键对数据进行排序。在大负载甚至禁用其他键时，加载数据重建键。

不太确定异步中在做什么，但可以肯定它没有按照您的预期做，因为它正在等待自己。

```
try
{
    using (var command = new SqlCommand("[procname]", sqlConn))
    {
        command.CommandTimeout = 0;
        command.CommandType = CommandType.StoredProcedure;

        foreach (record someredord Somereport.r)
        {
            command.Parameters.Clear()
            command.Parameters.Add(…);

            using (var rdr = command.ExecuteReader())
            {
                while (rdr.Read())
                {
                    …
                }
            }
        }
    }
}
catch (…)
{
    …
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T17:40:04.470

似乎执行您的`SQL`命令会锁定一些必需的资源，这就是强制您使用`Async`方法的原因（我的猜测）。

如果数据库未在使用中，请尝试对其进行独占访问。即便如此，由于数据模型的复杂性存在一些内部事务，请考虑咨询数据库设计人员。*

# ruby-on-rails - 在简单表单中手动设置表单输入字段的 ID？

> ID：12202142
> 
> 赞同：2
> 
> 时间：2012-08-30T17:17:17.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, simple-form

是否可以否决 simpleform 在表单中对文本字段的命名？

这个：

```
= f.input_field :age_from, 
```

输出：

```
<input type="text" size="50" name="/people/search[query]" id="_people_search_query"> 
```

应该

```
<input type="text" size="50" name="/people/search[query]" id="query"> 
```

我试过 * :name => "query" * :id => "query"

无济于事

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:49:00.953

像您的其他问题一样，html 选项应该在 simple_form 中的 input_html 哈希中传递：

```
<%= f.input :age_from, ..., :input_html => { :id => 'my_id' } %> should work. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:42:08.267

我认为您需要在 html 属性哈希中传递它

html: {id: '查询'}

# http - URL 可以以“//”开头吗？

> ID：12202144
> 
> 赞同：8
> 
> 时间：2012-08-30T17:17:22.343
> 
> 标签：http, url, ssl, https

> **可能重复：**
> [在 <script src=“...”> 中用 // 替换是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

我们在 http[s]://A.example.com/ 上有一个站点，它引用了 http[s]://A.example.com/ 上的一些资源（JS 和 CSS）

如果在引用主站点 A 正在使用的资源时使用相同的方案，这是有道理的，并且避免了一些浏览器警告。站点 A 使用 PHP，因此我们可以以编程方式检测当前方案（http 或 https）并将其插入页面标题。

但是，我们发现仅使用 '//' 而不是该方案也可以。

因此，无论我们使用 http 还是 https 访问站点 A，站点 A 可以在我们尝试过的所有浏览器中毫无问题地引用“//B.example.com/theme/main.css”。

我的问题是：这是一个有效的网址吗？它似乎有效，但我找不到其他人这样做，我找不到任何建议或推荐的例子。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T17:19:00.307

是的。它被称为相对协议的 URL。另请参阅[我可以将所有 http:// 链接更改为 // 吗？](https://stackoverflow.com/q/4831741/1048572)

# java - 后台 HTTP 任务

> ID：12202146
> 
> 赞同：0
> 
> 时间：2012-08-30T17:17:33.040
> 
> 标签：java, android, service, android-asynctask

我的应用程序上有一个启动页面，我想做的是启动一个后台任务来开始下载东西，以便在用户需要它们时准备好它们。

例如，一周的照片或其他东西。

**启动画面开始（启动后台任务）
启动画面完成（后台任务仍在工作）
主屏幕启动（临时“加载”占位符）
用户导航到另一个活动
下载完成
用户返回主屏幕，该屏幕更新为一周的图片** 

现在我知道异步任务，但我听说异步任务会被取消，`finish()`而且我也听说它们不会被取消。

这种任务，后台加载是否最好在服务中处理？任何人都可以为我提供有关在后台加载此类内容的教程吗？

**编辑：**
人们提到 UI 工作应该在 UI 中，而非 UI 中的非 UI 中。我考虑过处理程序，但是当当前活动不活动时，侦听器是否工作？

假设我在 main 中启动一个处理程序，然后切换页面。当我回来时，我很确定主 UI 不会更新，因为在我查看另一个页面时侦听器没有触发。

我假设我必须创建一个类来存储变量或其他东西。服务完成后，它会将“pic_of_week_loaded”设置为 true，并且当主程序重新加载时，它会检查此 var。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:24:50.947

您可以从类扩展`Application`，在其中创建一个线程（或 AsyncTask），基本上可以从 Internet 下载内容。完成后，您可以通知主屏幕活动以将内容显示到占位符中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:24:20.770

考虑使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)来完成你的后台工作，这样你就不会被活动生命周期所束缚。

编辑：根据评论。

使用自己的应用程序对象非常简单。只需像这样创建它：

```
final public class MyApplication extends Application {
 ....
} 
```

然后将您的清单更新为如下所示：

```
<application
    android:name=".MyApplication"
    ... 
```

理论上就是这样。您现在可以在那里添加自己的方法，包括。异步任务操作。您可以使用 just`MyApplication app = (MyApplication)getApplicationContext();`然后 do来处理您的应用程序对象`app.XXX()`；不过有一些重要说明：如果您想在 ApplicationObject 中使用 AsyncTask，请注意[Android Bug #20915](http://code.google.com/p/android/issues/detail?id=20915)。根据讨论，解决方法是在以下位置执行此操作`onCreate()`：

```
public void onCreate() {
  // Workaround for android bug #20915
  // http://code.google.com/p/android/issues/detail?id=20915
  try {
    Class.forName("android.os.AsyncTask");
  } catch (Exception e) {
    e.printStackTrace();
  }

  super.onCreate();
  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:44:13.343

另一种选择是使用[Android Asynchronous Http Client](http://loopj.com/android-async-http/)

我只会在活动中执行此操作，但请确保在您显示活动时检查活动是否仍处于活动状态（确保尚未调用 onDestroy）..

然后我会缓存结果，这样你就不必从网络上再次加载它（将日期存储在文件名中，这样你就知道图片是哪个日期的，这样你就知道缓存是否已经保存了最新的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T19:15:49.630

我将尝试解释为什么（1）在`Application`sublcas 中保持全局状态和（2）`AsyncTask`在这种情况下使用都是不好的方法。

(1) 如果应用程序不在前台并且当前应用程序中没有正在运行的服务，操作系统可能会终止您的应用程序进程。这篇文章中有更多详细信息：[如何在 Android 中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables/4642069#4642069)

(2)`AsyncTask`比最初看起来更狡猾。:) 例如，如果 ((OS < 1.6) || (OS >= 3.0)) 默认情况下，所有任务都在同一个后台工作线程上运行。我的意思是当前 Java 进程的所有任务都在唯一的后台线程上执行。因此，其他活动中下一个可能开始的任务将不得不等到第一个/init 一个完成。我认为这不是您想要得到的（如果用户从 Home 活动导航到其他活动，并且另一个活动需要使用 加载一些数据`AsyncTask`，那么请确保您的第一个/init 任务快速完成，因为它会阻止任何后续任务）。当然，如果 first/init 任务的工作量不大，那么这点可以不用担心。关于这篇文章如何`AsyncTask`工作的更多细节：[同时运行多个 AsyncTask —— 不可能吗？](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible/4072832#4072832)

所以我的建议是用来`IntentService`下载你在启动时需要的图像/日期。一旦下载数据，它就会设置标志`SharedPreferences`并发送广播。此时 Home 活动可能处于 3 种状态：

*   活动（通过`onResume()`，但尚未`onPause()`）
*   暂停（通过`onPause()`，但尚未返回`onResume`）
*   毁坏

当它处于活动状态时，它使用广播接收器来收听服务。当它暂停时，它会注销广播接收器，但是当它处于活动状态时，它做的第一件事就是检查来自`SharedPreferences`. 如果 flag 仍未设置，则注册广播接收器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T17:25:20.483

**1.** Well`AsyncTask`被引入 android 以提供它所知道的`Painless Threading`，但我不认为这里是这种情况....

**2.**现在让UI工作在UI线程上总是好的，Non-UI工作在Non-UI线程上，这从Android版本的到来就成为了一个**规则。**`HoneyComb`

**3.**现在你想在后台下载一些东西，这不包括反映在 UI 上的输出。然后我想你看看`CountDownLatch`java.util.concurrent中的Class。

**4.**否则，您可以随时`Non-UI thread`在后台运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T17:27:54.613

我更喜欢将`Threads`and`Handlers`用于后台任务。线程会在后台执行一些操作，然后当任务完成时，更新处理程序以更新 UI。下面是一些示例代码：

```
Handler handler = new Handler() { //Declare this as a global variable to the class
      @Override
      public void handleMessage(Message msg) {
    //display each item in a single line
          if(msg.obj.equals("update subcat")){
              subcategoryAdapter.notifyDataSetChanged();
          }else if (msg.obj.equals("update products")){
              productsAdapter.notifyDataSetChanged();
          }else if (msg.obj.equals("update cat")){
              categoryAdapter.notifyDataSetChanged();
          }
     }
 }; 
```

这是您的后台任务：

```
Thread background = new Thread(new Runnable() {

    @Override
    public void run() {
        getSubCategories(((Categories)searchResults.get(pos)).ID);
        handler.sendMessage(handler.obtainMessage(pos, "update subcat"));
        }
    });
    background.start(); 
```

# .net - 可移植类库和 .NET ConcurrentDictionary

> ID：12202150
> 
> 赞同：10
> 
> 时间：2012-08-30T17:17:44.070
> 
> 标签：.net, concurrency, f#, windows-8, portable-class-library

查看[http://msdn.microsoft.com/en-us/library/dd287191(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/dd287191(v=vs.110).aspx)，似乎命名空间中`ConcurrentDictionary`的所有朋友`System.Collections.Concurrent`都可以在可移植类库中使用。

但是，当我创建 F# 或 C# 可移植类库时，即使我显式添加对 的引用`mscorlib.dll`，使用`ConcurrentDictionary`.

为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T17:53:52.450

术语“便携式”现在应该松散地应用。创建类库项目时，系统会提示您输入要支持的目标。只有当您选择“.NET Framework”和“.NET for Windows Store apps”时，您才会获得 ConcurrentDictionary。

选择其他任何一个，整个命名空间就会消失。

我想这会随着时间的推移而变得更好，但 Windows Phone 7、XBox 和 Silverlight 现在落后了。

# c# - 重载网站

> ID：12202153
> 
> 赞同：1
> 
> 时间：2012-08-30T17:17:48.053
> 
> 标签：c#, asp.net, .net, vb.net

我有一个 aspx 网站，其中包含许多页面，这些页面接受用户输入，从 SQL 数据库中提取数据，进行一些繁重的数据处理，然后最终将数据呈现给用户。

该站点变得越来越大，并且开始对服务器施加很大压力。

我想做的可能是将事情分开一点：

服务器-A 将托管网站，该站点将接受用户的输入并将这些参数传递给在服务器-B 上运行的应用程序

Server-B 将从 SQL 中获取数据，进行繁重的数据处理，然后将数据集或数据表对象传递回网站。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:19:06.780

当然，这称为[N 层架构](http://en.wikipedia.org/wiki/Multitier_architecture)。

最明显的分离是一台数据库服务器，经过调整以满足数据库的需求（快速磁盘、大量 RAM）和一台或多台独立的 Web 服务器。

您可以通过在 Web 服务器和数据库服务器之间放置一个应用层来扩展它。应用层可以接受在 Web 层收集的用户输入，与数据库交互，进行繁重的处理，并将结果返回给 Web 层。最典型的是，您将使用[Windows Communication Foundation](http://msdn.microsoft.com/en-us/library/ms735119%28v=vs.90%29.aspx) (WCF) 将应用层的功能公开给 Web 服务器。应用程序服务器可能经常被调整为具有非常快的 CPU，并且可能具有比数据库服务器更慢的磁盘和更少的内存，具体取决于它们需要做什么。这个解决方案的美妙之处在于，随着应用程序负载的增长，您可以添加越来越多相同的应用程序服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:27:46.290

根据业务模型，您需要一些缓存策略来防止对每个输入进行大量计算。考虑一个股票网站。虽然每分钟有很多交易，但它们不会为每一个更新市场趋势。他们可以根据定义的时间间隔（每小时、每天...）、定义的交互次数（基于值的计数）等来安排更新。任务应该在服务器负载较低时完成。通过这种方式，访问者可以在足够准确的情况下在主页上看到股票趋势。对于如此重的负载情况，好的设计就是一切，因为有时即使是昂贵的硬件也无济于事。如果您愿意，请分享一些有关正在做的事情的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:38:45.500

我会使用像 F5 这样的负载均衡器

这样您的架构不会改变，但我会使用 ntier 方法将您的站点拆分为数据和表示层，然后负载均衡器会将每个请求定向到负载最轻的服务器

# facebook - Facebook OpenGraph - 使用 FB.api 发布

> ID：12202154
> 
> 赞同：0
> 
> 时间：2012-08-30T17:17:52.430
> 
> 标签：facebook, facebook-opengraph

这可能是一个初学者的问题，但我仍然必须问它，因为我真的不明白这一点。我已成功调试我的页面，并且用户已通过身份验证以使用该应用程序。所以调试器正在正确地拾取我所有的 meta og: 标签。运行以下功能允许我将状态更新发布到我的时间线，即“状态更新”。但这不是我想要的，我想要 meta og: 标签来创建一个漂亮的页面特定帖子，这就是 Open Graph 的全部内容，但这不会发生，它只是一个普通的无聊状态更新，带有指向我的页面的链接. 为什么？

```
FB.api(
 '/me/[my namespace]:button',
 'post',
 { message: 'A status update' },
 callback function
}); 
```

另外，我实际上应该在第三个参数中输入什么，第三个参数是什么？那是 {message: 'A status update'} 参数。

最后，这是使用 opengraph 和应用程序发布到时间线的方式吗？我不确定，因为当我在开发人员页面上“获取代码”时，我不知道他们有什么东西。那卷曲的东西，那是干什么用的？我的页面上不能有这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:02:56.927

> 但这不是我想要的，我想要 meta og: 标签来创建一个漂亮的页面特定帖子，这就是 Open Graph 的全部内容，但这不会发生，它只是一个普通的无聊状态更新，带有指向我的页面的链接. 为什么？

因为您没有在操作中提供任何 Open Graph**对象**的地址……任何地方都没有 URL，所以您认为 Facebook 应该从哪里提取 OG 元数据……？

以某种方式设置您的操作，以便它引用某种 OG 对象，然后在您发布操作时提供该对象的 URL。

开发者部分的 Open Graph 文档中的示例应该非常清楚它是如何工作的。

[https://developers.facebook.com/docs/opengraph/actions/#create](https://developers.facebook.com/docs/opengraph/actions/#create)

# python - Python 脚本中的 HTTP 基本身份验证失败

> ID：12202156
> 
> 赞同：2
> 
> 时间：2012-08-30T17:18:10.130
> 
> 标签：python, basic-authentication, urllib

我正在尝试连接到 REST 资源并使用 Python 脚本（Python 3.2.3）检索数据。当我运行脚本时，我收到错误为 HTTP 错误 401：未经授权。请注意，我可以使用基本身份验证的 REST 客户端访问给定的 REST 资源。在 REST 客户端中，我指定了主机名、用户和密码详细信息（不需要领域）。下面是代码和完整的错误。非常感激您的帮忙。

**代码：**

```
import urllib.request

# set up authentication info
auth_handler = urllib.request.HTTPBasicAuthHandler()
auth_handler.add_password(realm=None,
                       uri=r'http://hostname/',
                       user='administrator',
                       passwd='administrator')
opener =  urllib.request.build_opener(auth_handler)
urllib.request.install_opener(opener)
res = opener.open(r'http://hostname:9004/apollo-api/nodes')
nodes = res.read() 
```

**错误**

```
Traceback (most recent call last):
File "C:\Python32\scripts\get-nodes.py", line 12, in <module>
    res = opener.open(r'http://tolowa.wysdm.lab.emc.com:9004/apollo-api/nodes')
File "C:\Python32\lib\urllib\request.py", line 375, in open
   response = meth(req, response)
File "C:\Python32\lib\urllib\request.py", line 487, in http_response
   'http', request, response, code, msg, hdrs)
File "C:\Python32\lib\urllib\request.py", line 413, in error
   return self._call_chain(*args)
File "C:\Python32\lib\urllib\request.py", line 347, in _call_chain
   result = func(*args)
File "C:\Python32\lib\urllib\request.py", line 495, in http_error_default
   raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:24:34.873

尝试给出正确的领域名称。例如，您可以在浏览器中打开页面时发现这一点 - 密码提示应显示名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T18:10:51.020

您还可以通过捕获引发的异常来读取领域：

```
import urllib.error
import urllib.request

# set up authentication info
auth_handler = urllib.request.HTTPBasicAuthHandler()
auth_handler.add_password(realm=None,
                       uri=r'http://hostname/',
                       user='administrator',
                       passwd='administrator')
opener =  urllib.request.build_opener(auth_handler)
urllib.request.install_opener(opener)
try:
    res = opener.open(r'http://hostname:9004/apollo-api/nodes')
    nodes = res.read()
except urllib.error.HTTPError as e:
    print(e.headers['www-authenticate']) 
```

您应该得到以下输出：

```
Basic realm="The realm you are after" 
```

从上面读取领域并将其设置在您的`add_password`方法中，这应该很好。

# c# - Mongo中压倒一切的鉴别器

> ID：12202157
> 
> 赞同：1
> 
> 时间：2012-08-30T17:18:11.160
> 
> 标签：c#, mongodb

我有以下类结构：

```
public class Parent {
    public List<Child> Children { get; set; }
}

public class Child {

}

public class MyParent : Parent {

}

public class MyChild : Child {

} 
```

我创建了 MyParent 的一个实例，并将 MyChild 的一个实例添加到 Children。

当我将 MyParent 保存到 Mongo 时，希望类型为“父母”，每个孩子的类型为“孩子”。相反，它将类型设置为 MyParent 并将每个孩子设置为 MyChild，然后另一个不知道 MyParent 和 MyChild 的程序无法处理它。

我尝试在'MyParent'上方添加[BsonDiscriminator（“Parent”）]，与正确设置'_t'值的MyChild相同，但随后我在自己的反序列化应用程序中遇到了一个模棱两可的类错误。

有任何想法吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:40:00.643

您不能对两个类使用相同的鉴别器（这就是为什么您会收到关于模棱两可的鉴别器的错误消息）。

这是一个非常奇怪的情况，让你的类结构与你在其他语言中所做的相匹配不是更好吗？

在任何情况下，您都可以通过对基类使用不同的鉴别器来解决歧义（它可能永远不会出现在您的数据库中......）。

```
[BsonDiscriminator("BaseParent")]
public class Parent
{
    public ObjectId Id { get; set; }
    public List<Child> Children { get; set; }
}

[BsonDiscriminator("BaseChild")]
public class Child
{

}

[BsonDiscriminator("Parent")]
public class MyParent : Parent
{

}

[BsonDiscriminator("Child")]
public class MyChild : Child
{

} 
```

# java - Tomcat 的 JAX-RS 异常

> ID：12202159
> 
> 赞同：3
> 
> 时间：2012-08-30T17:18:16.693
> 
> 标签：java, rest, jakarta-ee, tomcat

**启动 servlet（来自 eclipse）时，出现以下错误：** 它是 tomcat 7，而 servlet 是 REST。

```
INFO: validateJarFile(C:\beezer\WebServerWorkspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\BeezerServer\WEB-INF\lib\geronimo-j2ee_1.4_spec-1.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
448 [localhost-startStop-1] ERROR org.apache.wink.server.internal.servlet.RestServlet - com.test.AddressBookApplication<br />
java.lang.ClassNotFoundException: com.test.AddressBookApplication<br />
    at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)<br/>
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)<br/>
    at java.lang.Class.forName0(Native Method)<br/>
    at java.lang.Class.forName(Class.java:169)<br/>
    at org.apache.wink.server.internal.servlet.RestServlet.getApplication(RestServlet.java:144)<br/>
    at org.apache.wink.server.internal.servlet.RestServlet.createRequestProcessor(RestServlet.java:105)<br/>
    at org.apache.wink.server.internal.servlet.RestServlet.init(RestServlet.java:81)<br/>
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)<br/>
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)<br/>
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)<br/>
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)<br/>
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)<br/>
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)<br/>
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)<br/>
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)<br/>
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)<br/>
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)<br/>
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)<br/>
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)<br/>
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)<br/>
    at java.lang.Thread.run(Thread.java:662)<br/>
Aug 30, 2012 7:49:41 PM org.apache.catalina.core.ApplicationContext log<br/>
INFO: Marking servlet JAX-RS Servlet as unavailable<br/>
Aug 30, 2012 7:49:41 PM org.apache.catalina.core.StandardContext loadOnStartup<br/>
SEVERE: Servlet /BeezerServer threw load() exception<br/>
javax.servlet.UnavailableException: com.test.AddressBookApplication<br/>
    at org.apache.wink.server.internal.servlet.RestServlet.init(RestServlet.java:91)<br/>
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)<br/>
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)<br/>
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)<br/>
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)<br/>
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)<br/>
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)<br/>
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)<br/>
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)<br/>
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)<br/>
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)<br/>
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)<br/>
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)<br/>
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)<br/>
    at java.lang.Thread.run(Thread.java:662)<br/>
Aug 30, 2012 7:49:41 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"] 
```

**我的 web.xml：**

```
<?xml version="1.0" encoding="UTF-8"?><br/> <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee<br/> http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>BeezerServer</display-name>
    <servlet>
      <description>JAX-RS Tools Generated - Do not modify</description>
      <servlet-name>JAX-RS Servlet</servlet-name>
      <servlet-class>org.apache.wink.server.internal.servlet.RestServlet</servlet-class>
      <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.test.AddressBookApplication</param-value>
      </init-param>
      <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
      <servlet-name>JAX-RS Servlet</servlet-name>
      <url-pattern>/jaxrs/*</url-pattern>
    </servlet-mapping> 
```

有人有线索吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:25:28.203

首先检查这个类是否真的存在。检查类名和包。它属于web项目还是依赖项目？

如果一切正常，刷新项目，然后运行 ​​Project/Clean，然后清理并重新发布 tomcat。如果它不起作用再次创建服务器（我的意思是在 Eclipse 中）。如果它仍然不起作用，请转到`C:\beezer\WebServerWorkspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\BeezerServer\WEB-INF\classes`（路径取自您的日志）并检查类文件是否存在。

祝你好运，欢迎来到与tomcat插件中的错误作斗争的人俱乐部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:40:17.323

摆脱`C:\beezer\WebServerWorkspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\BeezerServer\WEB-INF\lib\geronimo-j2ee_1.4_spec-1.1.jar`它包含的类Servlet.java，应该由AS自己提供。如果您使用的是 Maven，请将依赖项标记为已提供 ( `<scope>provided</scope>`)

顺便提一句。jar 仍然需要编译，但在运行时不需要。

*编辑：哦，现在我注意到了，它只是日志中的信息。所以这不是问题的根源，根本原因是`ClassNotFound`前任。确保类在类路径上。*

# linux - 在 Linux Shell 脚本中准备就绪时检测 USB 拇指驱动器

> ID：12202178
> 
> 赞同：1
> 
> 时间：2012-08-30T17:19:32.510
> 
> 标签：linux, shell, usb-flash-drive

我是 Windows 管理员和开发人员，我通常不使用 Linux，如果这在某种程度上很明显，请原谅我。

我有一个不太好的 Linux 机器，一些旧版本的 Open SU​​SE，我有一个脚本可以卸载 USB 拇指驱动器，格式化它，然后等待设备再次准备好，然后再运行一个执行复制的脚本对源文件和目标文件进行 /MD5 校验和验证，以确保副本有效。问题是，在一个盒子上，USB 拇指驱动器在以一致的方式格式化后没有准备好。我需要 1 到 2 分钟以上的时间才能通过`/media/LABELNAME`.

直接路径是`/dev/sdb`，但是，当然，我不能通过这个路径直接访问它来复制文件。这是我的shell脚本：

```
#!/bin/bash
set -e
echo "Starting LABELNAME.\n\nUnmounting /dev/sdb/"
umount /dev/sdb
echo "Formatting /dev/sdb/"
mkfs.vfat -I -F32 -n "LABELNAME" /dev/sdb
echo "Waiting on remount..."
sleep 30
echo "Format complete. Running make master."
perl /home/labelname_master.20120830.pl 
```

有什么建议么？我如何等待驱动器准备好并检测到它？我已经看到[自动检测和写入 USB 密钥/拇指驱动器](https://stackoverflow.com/questions/7413197/detecting-and-writing-to-a-usb-key-thumb-driveautomatically)，但坦率地说，我什至不知道这个答案是什么意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:55:05.740

似乎您正在运行一些自动挂载服务，它检测闪存盘并挂载分区。但是，您已经知道分区是什么，所以我建议您在脚本中简单地挂载磁盘，自己选择合适的挂载点。

```
mkfs.vfat -I -F32 -n "LABELNAME" /dev/sdb
echo "Format complete, remounting"
mount /dev/sdb $mountpoint #<-- you would choose $mountpoint
echo "Running make master."
perl /home/labelname_master.20120830.pl 
```

# windows-phone-7 - 在哪里可以找到 WP7 中支持语言的默认文本

> ID：12202180
> 
> 赞同：1
> 
> 时间：2012-08-30T17:19:40.717
> 
> 标签：windows-phone-7

我正在创建一个应用程序，但我注意到在我的应用程序中找不到诸如“pin to start”之类的文本用于活动磁贴（创建辅助磁贴）。我尝试向 Microsoft 的 AppHub 发送支持票，但我只收到回复说我无法帮助翻译？我明确表示需要在我的第三方应用程序和默认行为之间进行标准化和统一，但这对答案没有影响。当我使用 resx 翻译工具和 Bing 作为我的翻译服务翻译我的应用程序时，我的问题就出现了。有些单词翻译不正确，这很好，因为我回去检查然后尝试手动执行此操作，但是 WP7 应用程序列表中如此独特的短语（例如“pin to start”）有时根本无法正确翻译. 对于受支持的显示语言，我希望尽可能接近 Microsoft 的默认语言翻译，但是否有任何资源可以帮助我？还是我被留在尘土中试图自己弄清楚这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:43:10.390

没有文档可以显示系统字符串的本地化版本。为此，您将不得不挖掘操作系统文件，这意味着您将有权访问 WP OS 映像。您必须依靠自己的翻译技能或简单地在手机上切换语言来检查特定的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T09:01:45.030

有一个页面[Microsoft Terminology Collection](http://www.microsoft.com/Language/en-US/Terminology.aspx) ，您可以在其中下载标准文本集。

# sql - 在 where 子句中多次使用用户定义函数 (UDF)，并且只运行一次函数

> ID：12202181
> 
> 赞同：1
> 
> 时间：2012-08-30T17:19:45.123
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表格来保存任务列表，这些任务需要在特定的日期和时间处理。棘手的部分是这些任务是递归的，运行时间必须基于 5 个不同的参数来计算。

通过 UDF 计算运行时间很简单：

```
Function dbo.task_next_run(
    @task_type varchar(10),
    @task_schedule_day_of_week varchar(20),
    @task_schedule_time varchar(20),
    @task_period smallint,
    @last_run datetime
)
Returns datetime
...
...
...
Return @next_run 
```

我最后的任务查询是这样的：

```
SELECT id, 
       task_name, 
       last_run 
From tasks 
Where dbo.task_next_run
(
   task_type, @task_schedule_day_of_week, 
   @task_schedule_time, @task_period, @last_run
) < getdate() and 
dbo.task_next_run
(
     task_type, @task_schedule_day_of_week, 
     @task_schedule_time, @task_period, @last_run
) > last_run 
```

我的问题是在 where 子句中运行相同的函数 2 次。我需要一个解决方案来在 where 子句中使用计算值作为别名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:23:03.827

你为什么不这样做：

```
DECLARE @now DATETIME = CURRENT_TIMESTAMP;

SELECT id, task_name, last_run
FROM 
(
  SELECT id, task_name, last_run, d = dbo.task_next_run
  (task_type, @task_schedule_day_of_week, @task_schedule_time, @task_period, @last_run)
  From tasks 
) AS x
WHERE x.d < @now
AND x.d > x.last_run; 
```

我相当肯定 SQL Server 会将它折叠成相同的东西，并且只调用该函数一次而不是两次。不过，根据函数的性质，它可能仍每行执行一次。您是否考虑过将 UDF 转换为内联表值函数？这些通常优化得更好。

另一种选择是（如评论中所述）：

```
DECLARE @now DATETIME = CURRENT_TIMESTAMP;

DECLARE @d TABLE(task_type INT PRIMARY KEY, post DATETIME);

INSERT @d SELECT task_type, dbo.task_next_run(task_type, @variables)
  FROM (SELECT task_type FROM dbo.tasks GROUP BY task_type); 
```

现在你可以说：

```
SELECT t.id, t.task_name, t.last_run
FROM dbo.tasks AS t
INNER JOIN @d AS d
ON t.task_type = d.task_type
AND t.last_run > d.post
WHERE d.post < @now; 
```

您甚至可以先进一步过滤：

```
DELETE @d WHERE post >= @now; 
```

这使您可以消除上面的 WHERE。

总而言之，它可能仍然优化相同，但可能值得一试以获得更好的性能（对于这里的任何人来说，从 30,000 英尺预测的变量太多了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:21:38.850

**交叉应用**是我需要的。这是 Cross Apply 的最终查询。

```
SELECT id, task_name, last_run, func.next_run
FROM tasks
Cross Apply (Select dbo.task_next_run(task_type, @task_schedule_day_of_week, @task_schedule_time, @task_period, @last_run) as next_run) as func
WHERE 
func.next_run < getdate() and
func.next_run > last_run 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T17:25:18.693

```
SELECT id, 
       task_name, 
       last_run 
       From tasks 
WHERE dbo.task_next_run
      (
            task_type, @task_schedule_day_of_week, 
            @task_schedule_time, @task_period, @last_run
      ) BETWEEN  last_run AND getdate() 
```

# sorting - 弹性图表排序列系列顺序

> ID：12202184
> 
> 赞同：0
> 
> 时间：2012-08-30T17:19:58.270
> 
> 标签：sorting, apache-flex, bar-chart, series

我正在尝试创建一个 BarChart，它将按照取决于该值的顺序显示 ColumnSeries 中的值。
例如，如果我在 BarChart 中有一个 ColumnSeries ，一个显示利润，另一个显示费用，如果利润大于费用，它将正确呈现，因为费用系列呈现在顶部。

但是，如果费用超过利润，则利润将不可见，因为它将在费用下呈现。

在这一点上，我将尝试包含一个图像来显示我的问题......

好的，事实证明我不允许显示图像:(

该图像确实显示 2 月份的利润为 500，但 1 月份的 300 利润被隐藏，因为 500 的费用显示在它上面。

您可以运行以下代码来创建示例：

```
 <mx:Application xmlns:mx="http://www.adobe.com/2006/mxml">
<mx:Script><![CDATA[
    import mx.collections.ArrayCollection;
    [Bindable]
    public var expenses:ArrayCollection = new ArrayCollection([
        {Month:"Jan", Profit:300, Expenses:500},
        {Month:"Feb", Profit:500, Expenses:300}
    ]);
]]></mx:Script>
<mx:Panel title="Bar Chart">
    <mx:BarChart id="myChart" dataProvider="{expenses}" showDataTips="true" type="overlaid" >
        <mx:verticalAxis>
            <mx:CategoryAxis  dataProvider="{expenses}" categoryField="Month" />
        </mx:verticalAxis>

        <mx:series>
            <mx:BarSeries yField="Month" xField="Profit" displayName="Profit" />
            <mx:BarSeries yField="Month" xField="Expenses" displayName="Expenses" />
        </mx:series>
    </mx:BarChart>
    <mx:Legend dataProvider="{myChart}"/>
</mx:Panel> 
```

一个明显的解决方案是使 BarChart 类型“聚集”，因为这两个值都会被看到，但是我的客户要求 BarChart 被“覆盖”，因此目前隐藏了一些较小的值。

我希望有一种方法可以对 BarSeries 的顺序进行排序，但我似乎找不到如何排序，我真的很感激有人在图表方面的卓越知识。;)

# python - 读取文件python

> ID：12202185
> 
> 赞同：0
> 
> 时间：2012-08-30T17:20:04.690
> 
> 标签：python, file, readfile

我想以高级模式读取文件。

**第一的：**

在这个文件中，我有一些代码必须遵循的步骤，我如何阅读这些步骤，直到字符串`[data]`出现。

```
[Steps]
step1 = WebAddress
step2 = Tab
step3 = SecurityType
step4 = Criteria
step5 = Date
step6 = Click1
step7 = Results
step8 = Download
[data]
...... 
```

**第二：** 我怎样才能阅读[数据]之后的所有内容。

```
[data]
WebAddress___________________________ Destination___________ Tab_____________ SecurityType___________________________________________________ Criteria___ Date_______ Click1_ Results_ Download    
https://mbsdisclosure.fanniemae.com/  q:\\%s\\raw\\fnmapool  Advanced Search  Interim MBS: Single-Family                                      Issue Date  09/01/2012  Search  100      CSV XML
https://mbsdisclosure.fanniemae.com/  q:\\%s\\raw\\fnmapool  Advanced Search  Preliminary Mega: Fannie Mae/Ginnie Mae backed Adjustable Rate  Issue Date  09/01/2012  Search  100      CSV XML
https://mbsdisclosure.fanniemae.com/  q:\\%s\\raw\\fnmapool  Advanced Search  Preliminary Mega: Fannie Mae/Ginnie Mae backed Fixed Rate       Issue Date  09/01/2012  Search  100      CSV XML 
```

我想通过`step____________________`where 步骤下的所有内容可以是步骤（例如 WebAddress）。例如，如果`step1 = WebAddress`我如何阅读下面的所有内容`WebAddress__________________________`等等？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:21:46.613

第一的：

```
 with open(file_name) as f:
      print (f.read()).split("[data]") 
```

第二：

```
with open(file_name) as f:
      pre_data,post_data =[s.strip() for s in (f.read()).split("[data]")]
post_data_lines = post_data.splitlines()
headers = post_data_lines[0].split()
print headers
for line in post_data_lines[1:]:
      print line.split()
      print dict(zip(headers,line.split())) 
```

我也不确定您的 [数据] 是如何分隔的，`line.split('\t')`如果它是标签式的

这是未经测试的......但它应该可以工作，它并不能完全让你到达你想要的地方，但至少它得到了你想要的大部分（“硬”部分）

按标题宽度拆分使用

```
file_name = "testdata.txt"
with open(file_name) as f:
      pre_data,post_data =[s.strip() for s in (f.read()).split("[data]")]
post_data_lines = post_data.splitlines()
headers = post_data_lines[0].split()

for line in post_data_lines[1:]:
    tmpline  = []
    pos = 0
    for itm in headers:
        tmpline.append(line[pos:pos+len(itm)])
        pos += len(itm)+1

    print dict(zip(headers,tmpline)) 
```

如果您想要没有**__**的实际标题，请使用

```
file_name = "testdata.txt"
with open(file_name) as f:
      pre_data,post_data =[s.strip() for s in (f.read()).split("[data]")]
post_data_lines = post_data.splitlines()
headers = post_data_lines[0].split()
headers2 = [s.replace("_"," ").strip() for s in headers]
for line in post_data_lines[1:]:
    tmpline  = []
    pos = 0
    for itm in headers:
        tmpline.append(line[pos:pos+len(itm)])
        pos += len(itm)+1

    print dict(zip(headers2,tmpline)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:05:51.227

第一步：

```
>>> import ConfigParser
>>> cfg = ConfigParser.RawConfigParser()
>>> with open('sample.cfg') as f:
...     cfg.readfp(f)
... 
>>> cfg.get('Steps','step1')
'WebAddress' 
```

第二步：

```
>>> data_section = ''
>>> with open('sample.cfg') as f:
...    data_section = f.read()
... 
>>> data = data_section[data_section.index('[data]')+len('[data]')+1:]
>>> reader = csv.reader(io.BytesIO(data),delimiter='\t')
>>> reader.next() # skips header
>>> results = [row for for row in reader] 
```

现在 results 是一个列表列表，每个内部列表都有来自数据部分的项目。

```
[['https://mbsdisclosure.fanniemae.com/','q:\\\\%s\\\\raw\\\\fnmapool','Advanced Search', 'Interim MBS: Single-Family', 'Issue Date','09/01/2012','Search','100', 'CSV XML']...] 
```

# javascript - 调用函数值

> ID：12202188
> 
> 赞同：-2
> 
> 时间：2012-08-30T17:20:22.240
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-framework

> **可能重复：**
> [函数提前触发](https://stackoverflow.com/questions/12201816/function-triggering-early)

我已经编写了这段代码，但是当我调用函数 test() 时，即使我什至没有机会从 UI 日期选择器中单击并选择一个日期，它到底为什么会提醒我它未定义？

对我来说似乎没有意义？

```
var sdate

function test() {
    alert(select_date())
}

function select_date() {
    $('#dd').dialog({
        autoOpen: true,
        modal: true,
        overlay: {
            opacity: 0.5,
            background: 'black'
        },
        title: "title",
        height: 265,
        width: 235,
        draggable: false,
        resizable: false
    }); //end of dialog

    $('#d1').datepicker({
        onSelect: function() {
            sdate = $(this).val();
            $("#dd").dialog("close");
        }
    });
    return sdate
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:34:36.013

`onSelect`是一个事件回调，您试图在它知道要做什么之前返回一个值。不可能让您`test()`返回该值，因为它稍后会出现。

您应该从事件回调中执行警报或任何逻辑：

```
$('#d1').datepicker({
    onSelect: function() {
        sdate = $(this).val();
        $("#dd").dialog("close");
        alert(sdate);
        // or your own function
        someOtherTest(sdate);
    }
}); 
```

-

```
function someOtherTest(date) {
    alert(date);
} 
```

# drupal-6 - 开发网站后更改主题会影响代码或任何其他因素

> ID：12202191
> 
> 赞同：0
> 
> 时间：2012-08-30T17:20:25.193
> 
> 标签：drupal-6

网站开发后是否可以更改主题。是否可取。我喜欢我使用的主题。它会影响代码以及当我将其转储到其他服务器时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:14:31.623

很有可能改变主题。该站点仍将正常运行。我从来没有仅仅通过改变主题来“打破”网站，它不应该。

有几点需要考虑：

1.  如果您进行了任何自定义主题工作，则必须为新主题执行此操作。
2.  您还必须正确配置块。

希望这可以帮助。

# css - 移动网站无法正确显示

> ID：12202199
> 
> 赞同：1
> 
> 时间：2012-08-30T17:21:04.430
> 
> 标签：css, mobile, twitter-bootstrap, responsive-design

使用移动设备查看时，我似乎无法使该网站的格式正确（对移动设备“响应”）。

我正在使用 Bootstrap，但是当我从移动设备查看时，它看起来就像一个普通的桌面正在查看它。我做过的其他网站，它在文本上“放大”，这样在移动设备上看起来不错。

如果我在这里遗漏了一些小东西，我很抱歉，但任何帮助将不胜感激！

这是我正在使用的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>TITLE HERE</title>

<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
<meta content="yes" name="apple-mobile-web-app-capable">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/bootstrap-responsive.min.css">

<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.js"></script>

<script type="text/javascript" src="/js/modernizr-2.5.3.min.js"></script>
</head>
<body>
<div role="main">
    <header>
        <div class="container">
            <div class="row address">
                <div class="span12">
                    <h2><?=$content['address']?><br/>
                    <?=$content['city']?> <?=$content['state']?> <?=$content['zip']?></h2>
                </div>
            </div>
            <div class="row-fluid prop_info">
                <div class="span12">
                    <h3>$<?=number_format($content['price'])?>  | <?=$content['beds']?> Bedrooms  |  <?=$content['baths']?> Bathrooms  | <?=number_format($content['square_feet'])?> Square Feet |  MLS# <?=$content['mls_id']?></h3>
                </div>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="row center">
            <div class="span12">
                <ul class="nav nav-pills menu">
                    <li><a href="#">VIDEO</a></li>
                    <li><a href="#">PHOTOS</a></li>
                    <li><a href="#">WALKSCORE MAP</a></li>
                </ul>
            </div>
        </div>
        <div class="container">
            <div class="row center">
                <div class="span12">
                    <div id="description-shadow-video-top"></div>
                    <iframe id="vp1HMbXI" title="Video Player" width="100%" height="auto" frameborder="0" src="<?=$content['video_url']?>" allowfullscreen></iframe>
                    <div id="description-shadow-video"></div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="span12">
                    <?=$content['main_content']?>
                </div>
            </div>
        </div>
        <br/>
        <div class="container">
            <div class="row">
                <div class="span12">
                    <div class="pull-left">
                        <br/>
                        <br/>
                        <br/>
                        <img src="/img/foundation/presented-by.png" width="120" alt="" />
                    </div>
                    <div class="pull-left">
                        <img src="/img/some_pic.jpg" alt="" name="agentImg" width="90" id="agentImg" />
                    </div>
                </div>
            </div>
            <br/>
            <div class="row center">
                <div class="span12">
                    <h3><?=$user['first_name']?> <?=$user['last_name']?></h3>
                    <br />
                    <?=$user['company']?><br /><?=$user['address']?>
                    <br />
                    <?=$user['city']?>, <?=$user['state']?> <?=$user['zip']?>
                    <br />
                    <br />
                    <?=$user['contact_number']?>
                    <br />
                    <a href="mailto:<?=$user['email_address']?>"><?=$user['email_address']?></a>
                    <br />
                    <br />
                </div>
            </div>
        </div>
    </div>
    <footer>
        <div class="container">
            <div class="span12">
                <a href="http://www.somesite.com" target="_blank">
                    <img src="/img/the_logo.png" width="210" />
            </div>
        </div>
    </footer>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:51:42.470

似乎您只`span12`在所有 中使用`rows`，这意味着当视口更改时它们永远不会被分割。具有响应式网格布局的很大一部分是将行的元素分成段，以便在视口低于某些阈值时可以调整行的布局。

如果`<div>`每行中的主要内容是该行中`span12`的所有内容，则该行中的所有内容将基本上保持不变`width=100%`，并且内容只会随着视口的减小而缩小。

我建议避免使用`span12`每个主要`<div>`内容，并花一些时间重新考虑内容的粒度。请参阅[有关 Scaffolding 的 Twitter Bootstrap 文档以](http://twitter.github.com/bootstrap/scaffolding.html)供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T11:40:01.083

**使用这个布局，我认为它会解决你的问题。我删除了行类。** 标题在这里

```
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"> <meta content="yes" name="apple-mobile-web-app-capable">

<link rel="stylesheet" href="/css/bootstrap.min.css"> <link rel="stylesheet" href="/css/bootstrap-responsive.min.css">

<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script> <script type="text/javascript" src="/js/bootstrap.js"></script>

<script type="text/javascript" src="/js/modernizr-2.5.3.min.js"></script> </head> <body> <div role="main">
    <header>
        <div class="container">
            <div class="address">
                <div class="span12">
                    <h2><?=$content['address']?><br/>
                    <?=$content['city']?> <?=$content['state']?> <?=$content['zip']?></h2>
                </div>
            </div>
            <div class="row-fluid prop_info">
                <div class="span12">
                    <h3>$<?=number_format($content['price'])?>  | <?=$content['beds']?> Bedrooms  |  <?=$content['baths']?> Bathrooms  | <?=number_format($content['square_feet'])?> Square Feet |  MLS# <?=$content['mls_id']?></h3>
                </div>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="center">
            <div class="span12">
                <ul class="nav nav-pills menu">
                    <li><a href="#">VIDEO</a></li>
                    <li><a href="#">PHOTOS</a></li>
                    <li><a href="#">WALKSCORE MAP</a></li>
                </ul>
            </div>
        </div>
        <div class="container">
            <div class="center">
                <div class="span12">
                    <div id="description-shadow-video-top"></div>
                    <iframe id="vp1HMbXI" title="Video Player" width="100%" height="auto" frameborder="0" src="<?=$content['video_url']?>" allowfullscreen></iframe>
                    <div id="description-shadow-video"></div>
                </div>
            </div>
        </div>
        <div class="container">

                <div class="span12">
                    <?=$content['main_content']?>
                </div>

        </div>
        <br/>
        <div class="container">

                <div class="span12">
                    <div class="pull-left">
                        <br/>
                        <br/>
                        <br/>
                        <img src="/img/foundation/presented-by.png" width="120" alt="" />
                    </div>
                    <div class="pull-left">
                        <img src="/img/some_pic.jpg" alt="" name="agentImg" width="90" id="agentImg" />
                    </div>
                </div>

            <br/>
            <div class="center">
                <div class="span12">
                    <h3><?=$user['first_name']?> <?=$user['last_name']?></h3>
                    <br />
                    <?=$user['company']?><br /><?=$user['address']?>
                    <br />
                    <?=$user['city']?>, <?=$user['state']?> <?=$user['zip']?>
                    <br />
                    <br />
                    <?=$user['contact_number']?>
                    <br />
                    <a href="mailto:<?=$user['email_address']?>"><?=$user['email_address']?></a>
                    <br />
                    <br />
                </div>
            </div>
        </div>
    </div>
    <footer>
        <div class="container">
            <div class="span12">
                <a href="http://www.somesite.com" target="_blank">
                    <img src="/img/the_logo.png" width="210" />
            </div>
        </div>
    </footer> </div> </body> </html> 
```

# java - Java 从外部访问枚举字段

> ID：12202201
> 
> 赞同：-2
> 
> 时间：2012-08-30T17:21:07.033
> 
> 标签：java, enums

我如何访问该`Name`字段？

```
public class Animals {

    public enum animal{
        a1("CAT", 4),
        a2("DOG", 4);
    }

    String Name;
    int E;
    public animal(String Name, int E){
        this.Name = Name;
        this.E    = E;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:29:04.617

这可以做到，但是您有许多语法错误。关键是为枚举成员变量提供getter方法。

```
public enum Animal {
  a1("CAT", 4), a2("DOG", 4);
  private String Name;
  private int E;

  private animal(String Name, int E)
  {
    this.Name = Name;
    this.E = E;
  }

  public String getName() {
    return Name;
  }

  public int getE() {
    return E;
  }
} 
```

然后，您可以在程序其余部分的任何位置访问这些值。

```
Animal.a1.getName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:34:48.853

假设你有这样的内心`enum`：

```
public class Animals {

    public enum Animal {
        a1("CAT", 4), a2("DOG", 4);

        final String Name;
        final int E;

        private Animal(String Name, int E) {
            this.Name = Name;
            this.E = E;
        }

        public String getName() {
            return Name;
        }
    }
} 
```

您*可以*使用（字段所以没有括号）来获取名称

```
Animals.Animal.a1.Name 
```

但最好将所有字段设为私有并使用 getter：

```
Animals.Animal.a1.getName() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:05:19.010

如果我理解正确，我相信 OP 在问：

“给定一个字符串“a1”，返回一个Animal类型的对象，其值为Animal.a1”</p>

...在这种情况下，您要查找的方法是 Enum.valueOf(Class,String)

```
 String enumName = "a1";
 Animal a = Enum.valueOf (Animal.class (enumName));
 if (null == a) {
      // error handler …
 } else {
      // do something interesting with “a”
 } 
```

# c - 如何以编程方式生成 /proc/pid/maps 之类的内容？

> ID：12202202
> 
> 赞同：1
> 
> 时间：2012-08-30T17:21:06.913
> 
> 标签：c, linux

如何以编程方式生成 /proc/pid/maps 之类的内容？是否有一个 API 可以让我获得与 /proc/pid/maps 中相同的数据？解析文本可能有点不稳定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:27:35.457

`/proc/$pid/maps` **是**API。如果您使用的是 C，则可以使用以下`scanf`格式可靠地解析此文件中的行：

```
"%08lx-%08lx %c%c%c%c %08llx %02x:%02x %lu %n" 
```

（[来源](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=fs/proc/task_mmu.c;h=4540b8f76f163fbaaef250b6facf161424a90869;hb=28a33cbc24e4256c143dce96c7d93bf423229f92#l242)）

# c# - 使用字节作为主键数据类型

> ID：12202203
> 
> 赞同：10
> 
> 时间：2012-08-30T17:21:08.533
> 
> 标签：c#, .net, sql-server, entity-framework, ef-code-first

我首先使用实体​​框架代码。我有一个不超过 100 行的表，我想使用数据类型`byte`（`tinyint`在 SQL Server 中）作为主键。

这是我到目前为止所拥有的：

```
[Key]
public byte Id { get; set; } 
```

问题是当实体框架创建数据库时，它没有设置允许行在插入时自动递增的标识规范属性。

如果我将数据类型更改为`Int16`（`smallint`在 SQL Server 中）一切正常。

有没有办法告诉实体框架设置自动增量属性，或者一个字节不能用作实体框架代码优先的主键？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T19:11:10.180

支持该`byte`类型作为键和标识列。`byte`将主键标记为身份并不是默认设置。但是你可以覆盖这个默认值：

```
[Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public byte Id { get; set; } 
```

对于 a 、 a和 a （也许还有更多类型？）`Identity`不需要显式设置选项，但对于 a （=在 SQL Server 中）是必需的。我通过测试发现了它，但在任何地方都找不到它的正式记录。`int``long``short``byte``tinyint`

# facebook - 非安卓、非ios、非网络应用

> ID：12202207
> 
> 赞同：0
> 
> 时间：2012-08-30T17:21:17.543
> 
> 标签：facebook, post, device

我们计划制造一种我们希望它与 Facebook 通信的设备。如果用户按下设备上的按钮，我们希望某些内容作为帖子出现在用户墙上。这意味着该设备将代表用户在 Facebook 上发帖。

正如我们从 Facebook 开发者页面看到的，应用程序的类型是 Facebook 应用程序、Web 应用程序或移动应用程序。我们刚刚解释的东西不属于这些类别中的任何一个。例如，它不是一个网络应用程序，因为该设备只支持 http 连接，但没有内置的网络浏览器。它不是 Andorid 或 iOs 应用程序，因为此设备中的操作系统不是这些。

你对这种应用有什么建议？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:34:57.333

可能的答案 = 使其成为网络应用程序，但不要忘记有关用户隐私问题的 Facebook 政策。您的设备可以向您的服务器发送信号，并且服务器可以发布我认为这是可能的（嗯，但是要再次获取访问令牌，您的客户必须每 60 天再次登录您的 webapp，必须有更好的解决方案）

我也在研究类似的问题

我有一个用于慢跑腕带的原型设备，我试图通过在连接到 wlan 或 android 时单击机器上的按钮，代表用户发布关于当天步数和速度的墙故事以无线方式拨打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:30:18.070

绝对看看[http://developers.facebook.com/docs/authentication/devices/](http://developers.facebook.com/docs/authentication/devices/)

您的另一个不错的选择是在您的设备上运行 HTTP 服务器，用户可以从计算机或手机连接到该服务器以进行身份​​验证。

一旦获得授权，只需一个简单的 HTTP 请求即可共享任何内容。

编辑：刚刚注意到 Facebook 不再接受具有身份验证设备模式的新合作伙伴的申请。这绝对是你想要的。无论如何，您可以尝试与他们联系。

# hibernate - Maven 存储库中的依赖关系损坏 - Hibernate 3.6.5 和 jboss-jacc-api_JDK4

> ID：12202212
> 
> 赞同：0
> 
> 时间：2012-08-30T17:21:46.543
> 
> 标签：hibernate, maven, ivy

你好，

我尝试使用 Ivy 在一个简单的 java 项目中管理我的依赖项。我想使用休眠 3.6。但是当我在 ivy.xml 中添加依赖并尝试解决它时，它失败了，说它找不到 jboss-jacc-api_JDK4 版本 1.1.0。

在 maven 存储库中，hibernate 依赖于那个工件，但是如果我点击它，我有一个“请求的资源 () 不可用”。其他工件并非如此：我可以看到具有给定依赖项的页面，并且可以导航以查看项目的所有现有版本。

Maven存储库有什么问题吗？如何在休眠 3.6 中使用 Ivy？

非常感谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:44:36.773

> can't find jboss-jacc-api_JDK4 version 1.1.0

This artifact is available in the JBoss repository under the groupId "org.jboss.javaee". This is an older groupId which was never sync'ed to Maven central, so the short term solution is to add the JBoss repository to your build configuration.

[https://repository.jboss.org/nexus/content/groups/public](https://repository.jboss.org/nexus/content/groups/public)

Longer term these artifacts should be copied over to Maven central so that they are available to default Maven builds, and other builds using the central Maven repository.

# ruby-on-rails - 如何在rails 3应用程序中使用dob日期时间字段搜索age_from到age_to？

> ID：12202216
> 
> 赞同：0
> 
> 时间：2012-08-30T17:21:59.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

刚接触轮胎并试图弄清楚如何在我的个人资料模型中搜索 DOB（出生日）列。

*   尝试建立一个简单的搜索，我可以设置 age_from 和 age_to （比如 20 到 60 ）
*   由于我只有一个 dob 字段，我该怎么做？
*   在创建记录时计算年龄并将其存储在列中并将其添加到我的 Profile 模型以清理搜索是否会更好？

对此最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:50:33.010

如果您的模型有一个 dob 字段，那么您可以像这样进行查询：

```
Profile.where(:dob => date_from..date_to) 
```

您可以通过执行类似`date_from`和`date_to``Date.today-18.years``Date.today-24.years`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:54:20.357

要使用范围，您可以执行以下操作：

```
scope :age_from, lambda { |age| 
 { :conditions => ["profiles.dob >= ?", DateTime.now << (12* age)] } 
}

scope :age_to, lambda { |age| 
 { :conditions => ["profiles.dob <= ?", DateTime.now << (12* age)] } 
} 
```

# c# - 母版页中的布局模板

> ID：12202219
> 
> 赞同：0
> 
> 时间：2012-08-30T17:22:07.930
> 
> 标签：c#, asp.net, master-pages

所以这是我的第一篇文章。我想，这是我在 ASP.net 中学习一些新东西的好地方。好吧，我刚开始使用Asp创建系统，只是想问这里的任何人，如何将下载的布局模板应用到我的母版页中？期待任何反馈。祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:35:03.607

在您的 ASP.NET 网站中实现布局是将其分解为页眉、页脚、主要内容等部分的问题。页眉和页脚部分是进入母版页的不错选择，但主要内容会有所不同每页，因此属于页面本身。

在这里，您可以很好地阅读有关使用母版页的站点范围布局的信息：

[http://www.asp.net/web-forms/tutorials/master-pages/creating-a-site-wide-layout-using-master-pages-cs](http://www.asp.net/web-forms/tutorials/master-pages/creating-a-site-wide-layout-using-master-pages-cs)

# c - typedef和define的区别

> ID：12202220
> 
> 赞同：5
> 
> 时间：2012-08-30T17:22:12.033
> 
> 标签：c

> **可能重复：**
> [c 中的 typedef 和 #define 是否相同？](https://stackoverflow.com/questions/1666353/is-typedef-and-define-the-same-in-c)
> [对#define 和 typedef 感到困惑](https://stackoverflow.com/questions/5389387/confused-by-define-and-typedef)

以下是否有区别：

```
#define NUM int

...

NUM x;
x = 5;
printf("X: %d\n", x); 
```

和这个：

```
typedef int NUM;

...

NUM x;
x = 5;
printf("X : %d\n", x); 
```

两个测试都编译和运行没有问题。那么，它们是等价的吗？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T17:27:11.190

当您要创建指针类型的别名时，会有所不同。

```
typedef int *t1;
#define t2 int *

t1 a, b; /* a is 'int*' and b is 'int*' */
t2 c, d; /* c is 'int*' and d is 'int'  */ 
```

此外，`typedef`遵守范围规则，*即*您可以声明一个块本地的类型。

另一方面，`#define`当你想在预处理器指令中管理你的类型时，你可以使用它。

# ios - UITableView + 核心动画

> ID：12202221
> 
> 赞同：0
> 
> 时间：2012-08-30T17:22:12.067
> 
> 标签：ios, xcode, uitableview, core-animation

我想在我的 iOS 应用程序中建立一个**表格视图部分**，就像**Facebook**风格一样（每一行都有很多信息，图像和按钮，..）。

我还想在每一行包含**核心动画效果**，比如淡出单元格，或者自定义图形界面。

您是否建议我使用 UITableView 类或其他更“可定制”的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:30:20.553

您应该使用常规`UITableView`但自定义的`UITableViewCells`。 `UITableView`支持淡入淡出和其他类型的动画，用于添加/删除/重新加载单元格

```
NSMutableArray *affectedRows = [NSMutableArray array];
[affectedRows addObject:[NSIndexPath indexPathForRow:0 inSection:0]];
[affectedRows addObject:[NSIndexPath indexPathForRow:1 inSection:0]];

// use whatever corresponds
[self.tableView deleteRowsAtIndexPaths:affectedRows withRowAnimation:UITableViewRowAnimationLeft];

[self.tableView insertRowsAtIndexPaths:affectedRows withRowAnimation:UITableViewRowAnimationLeft];

[self.tableView reloadRowsAtIndexPaths:affectedRows withRowAnimation:UITableViewRowAnimationLeft]; 
```

使用这些方法时要小心，因为 numberOfRowsInSection: 函数会再次被调用，如果新结果与新的行数不匹配，您的应用程序将崩溃

IE：你有 5 行，删除 2，你的方法必须返回 3

# tomcat - 使用 JSF 2.0 执行 TommEE 1.0 时出错

> ID：12202224
> 
> 赞同：0
> 
> 时间：2012-08-30T17:22:19.383
> 
> 标签：tomcat, jsf-2, openejb, apache-tomee

我正在尝试将 apache-tomee-1.0.0 与我的 JSF 2.0 Web 应用程序一起使用……但我做不到:(。

我的问题是当我运行服务器时会记录此错误：

```
30-ago-2012 18:49:39 org.apache.catalina.core.StandardContext listenerStart
GRAVE: Excepción enviando evento inicializado de contexto a instancia de escuchador de clase com.sun.faces.config.ConfigureListener
java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! org.apache.openejb.jsf.CustomApplicationFactory
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! org.apache.openejb.jsf.CustomApplicationFactory
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:379)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
    ... 14 more
Caused by: java.lang.InstantiationException: org.apache.openejb.jsf.CustomApplicationFactory
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at javax.faces.FactoryFinder.getImplGivenPreviousImpl(FactoryFinder.java:617)
    at javax.faces.FactoryFinder.getImplementationInstance(FactoryFinder.java:485)
    at javax.faces.FactoryFinder.access$400(FactoryFinder.java:141)
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:886)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:319)
    at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:303)
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:219)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:360)
    ... 15 more 
```

也许我需要修改我的 web.xml 中的任何参数？？？

我试着用谷歌搜索，但我没有发现任何值得尊重的东西。任何人都可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:25:41.710

看起来你在 webapp 中有 Mojarra。您是否可以尝试删除它并使用 TomEE 附带的 JSF 实现（即 MyFaces）？

# c# - == 和等于。为什么复杂？

> ID：12202227
> 
> 赞同：4
> 
> 时间：2012-08-30T17:22:31.177
> 
> 标签：c#

使用`==`操作员我可以做到这一点：

```
int a = 10;
int b = 10;
a==b //true 
```

在这种情况下，C# 做出编译时决定，并且没有虚拟行为发挥作用。

但是，如果我使用：

```
object a = 10;
object b = 10;
a == b //false 
```

结果是假的，因为`object`它是一个类（引用类型），`a`并且`b`每个都引用堆上不同的装箱对象。

为了解决它，我应该这样做：

```
object a = 10;
object b = 10;
a.Equals (b) // True 
```

因为`Equals`是一个虚拟方法，它在运行时根据对象的实际类型解析。

我的问题是：

**为什么 C# 的设计者没有通过使 == 虚拟化而在功能上与 Equals 相同来避免这个问题？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T17:25:58.577

因为`==`是`static`方法，所以不能是虚的。这样做可能是为了更好地处理`null`.

请注意，您的困境与装箱无关，C# 使用两个参数的编译时类型来确定哪些重载*`==`有意义。例如，举以下例子。

```
object s1 = "Hello";
object s2 = new String('H', 'e', 'l', 'l', 'o');
s1 == s2; //False
(string)s1 == (string)s2; //True 
```

* 重载不是绝对正确的，因为我们要搜索不止一个类层次结构，但它在语义上足够接近讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:24:53.477

我能想到的一个原因：因为使 == 任何类型的虚拟都会导致继承类的可预测行为显着降低。

```
class Base {
  public int First;
}

class Derived {
  public int Last;
}

var me = Base{ First = "Alexei" };
var someone = Derived { First = "Alexei", Last = "Unknown" }; 
```

现在，如果某种“==”在基类中是虚拟的，并且在派生类中没有被覆盖，那么`me == someone`这是令人惊讶的。

也不要忘记 C# 不是为 .Net 运行时编译代码的唯一语言，因此对于类似概念可能具有不同语法特征的其他语言，行为应该是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:37:56.117

`a`因为那样确定是否和`b`实际上是同一个对象要困难得多。我们可能想知道这一点。我们特别想知道我们是否通过 type 变量来处理它们`object`。身份是`object`qua的有意义的特征之一`object`。其他的平等定义不是。

对于引用类型，我们从两者开始`==`，`Equals`并且`GetHashCode`只引用身份。`ReferenceEquals`总是只指身份。

当我们很可能关心将一个类型的两个对象视为等价的其他方式时，我们重写`Equals`以使用它并`GetHashCode`进行对应。

当我们不太可能关心身份时，我们`==`也会忽略。（例如：）`string`。

对于值类型，我们从两者开始`==`，`Equals`并`GetHashCode`引用逐个字段的比较，因为这是对值类型具有任何逻辑意义的最具区分性的平等观点。

在处理`object`变量时，我们很可能关心身份——所以我们有，也很有可能我们关心身份，`==`所以`Equals`我们有。很难想出任何不碍事的事情。

# javascript - 重新加载后调整列大小

> ID：12202230
> 
> 赞同：0
> 
> 时间：2012-08-30T17:22:50.217
> 
> 标签：javascript, jquery-ui, jqgrid

我正在使用 jqgrid，由于某种原因，在我使用`'reloadGrid'`一列之后改变了它的宽度。

```
conf_users = BindJQGrid("#usersList", {
    url : humanportal.sysvar.humandns + 'groups.json',
    rowheight : 30,
    colNames : [
                    '#',
                    '<?php echo $this->lang->trans('group', 'attrs')?>',
                    ''
                ],
    colModel : [
                    {sortable:false, align:'center', title:false, width:50},
                    {sortable:false, name:'name', index:'name', width:300},
                    {sortable:false, align:'right', title:false, width:200}
                ],
    rowNum : 50, 
```

我称之为重新加载的地方：

```
conf_users.sortableRows({
    update: function(event,ui) {
        var rows = $("#usersList").getDataIDs();
        for (i=1 ; i<=rows.length; i++) {
            $.ajax({
                url: humanportal.sysvar.humandns + 'groups/setattribute/' + rows[i-1] + '.personal?json=1&attr=level&val=' + i ,
                dataType: 'json',
                success: function() {
                    conf_users.trigger('reloadGrid');
                }
            });
        }
    }
}); 
```

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:10:57.520

如果您总是希望列具有您指定的宽度，请将 fixed: true 添加到每列。

例子：

```
{sortable:false, align:'right', title:false, width:200, fixed: true} 
```

# javascript - 在 css ie6 问题中需要帮助

> ID：12202232
> 
> 赞同：0
> 
> 时间：2012-08-30T17:22:56.193
> 
> 标签：javascript, css

我正在使用 CSS 灯箱来显示通讯订阅功能。弹出窗口在除 IE 6 之外的所有浏览器中都能正常工作 - black_overlay - 背景颜色和不透明度不显示。

下面列出了我用于弹出显示的样式：

```
 .black_overlay{
        position: relative;
        top: 0px;
        left: 0px;
        width: 400px;
        height: 300px;
       min-height: 900px;
       height:auto !important;
        background-color: black;
        z-index:1001;
        -moz-opacity: 0.8;
        opacity:.80;
        filter: alpha(opacity=80); }

         .white_content {
        display:none;
        position: relative;
        top: 100px;
        left: 50px;
        width: 500px;
        height: 300px;
        min-height: 400px;
        height:auto !important;
        padding: 16px;
        border: 16px solid #999;
        background-color: white;
        z-index:1002;
        overflow: auto;
    } 
```

**还有一项：我正在使用 javascript 来显示一个弹出窗口。这个显示块可以在 IE 6 上运行吗？我无法在 IE6 上进行测试，因为我的系统中安装了 IE8。**

document.getElementById('newsletter').style.display='block';

```
 <div id="newsletter" class="white_content"></div>
      <div id="fade" class="black_overlay" ></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:48:16.493

对于 ie6 中的叠加层，您需要将`15x15px`透明 gif 作为叠加层，并且需要在背景中重复作为叠加层，而不是适合您的不透明度 :-)。对于 ie6 中的 hack，您需要添加 hack。例如`height:20x;`这个东西只适用于ie6

# ruby-on-rails - Rails Will_paginate：包括父母？

> ID：12202236
> 
> 赞同：1
> 
> 时间：2012-08-30T17:23:06.807
> 
> 标签：ruby-on-rails, include, will-paginate

假设我有以下模型：爷爷，爸爸，孩子

爷爷有_很多爸爸，爸爸有_很多孩子。

我正在使用 will_paginate 显示儿童。有什么办法可以包括爷爷，这样我就可以显示他们的名字？我知道我可以包括孩子，但我遇到了包括父母在内的问题......

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:59:02.437

是的，您可以使用 children.dad.grandpa 显示爷爷，
或者
您可以像下面这样查询包括爷爷在内的孩子

Children.find(:all, :include => {:dad => :grandpa})

# android - 在解析前过滤掉不正确的 JSON

> ID：12202238
> 
> 赞同：1
> 
> 时间：2012-08-30T17:23:15.323
> 
> 标签：android, json, jsonexception

我正在尝试解析一些作为 API 响应发送给我的 JSON，但是由于某种原因，它总是在开头给我一个“一个”，即使其余部分都很好，例如

```
"one"{"position":"0", "level":"0", "is_active":"0", "name":"Root",
"children": [{
    "position":"0"... 
```

这给了我一个例外：

`org.json.JSONException: Value one of type java.lang.String cannot be converted to JSONObject`

我能做些什么来摆脱它吗？

# java - 在 Fedora 16 中为 Libre Office Base 设置 java 类路径

> ID：12202248
> 
> 赞同：1
> 
> 时间：2012-08-30T17:24:00.297
> 
> 标签：java, mysql, fedora16, libreoffice-base

使用 Fedora 16 操作系统。我想使用 Libre Office Base 连接到 MySQL。当我设置 JDBC 连接时，它要求我提供驱动程序，但是，它无法加载（因为它在类路径中看不到它）。

有人知道如何为 Libre Office 设置类路径吗？有没有类似的配置实用工具？

例如，我的驱动程序是 [B]com.mysql.jdbc.Driver [/B] 位于 [B] /usr/share/java/mysql-connector-java-5.1.17.jar[/B]。当我从其他 JDBC 客户端（如直接 Java 或 Eclipse Quantum 插件）连接时，它工作正常。问题是 Libre Office 没有询问我在哪里可以找到驱动程序的（类）路径，我不知道在哪里以及如何设置它以使其可见。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:55:55.853

这是旧的，但 Libre Office 不尊重 CLASSPATH。您必须关闭 Base，**打开 writer**并在菜单上添加 /usr/share/java/mysql-connector-java-5.1.17.jar jar 文件：

工具 > 选项 > Java，点击“类路径”按钮并在弹出的对话框中添加 jar。

关闭 writer，打开 Base，您的驱动程序必须被识别。

# android - 是否可以创建 sim 卡的图像并在 Android 手机上使用它？

> ID：12202256
> 
> 赞同：1
> 
> 时间：2012-08-30T17:24:26.553
> 
> 标签：android, gsm

我有一部安卓手机，想一次激活两张 SIM 卡。但是我的手机不支持双卡。

我想知道是否可以创建一个程序，将 sim 卡复制到手机内存中并模拟到手机，就好像有真正的 sim 卡一样。通过这种方式，我们几乎可以将任意数量的 SIM 卡插入任何手机。

在开始编写任何此类事情之前，我有以下查询

*   这可能吗 ？
*   我用谷歌搜索了 SIM 卡的内部工作，我发现天线和手机之间的通信是使用 SIM 生成的一些序列号进行的，并且这个序列号与来自天线的信号相匹配。任何人都有很好的链接来了解 SIM 卡的工作原理？
*   我从哪里开始？我对GSM协议知之甚少。我需要了解 GSM 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:34:22.613

SIM 卡克隆在技术上是可行的，但即使您设法复制您的 SIM 卡，您也无法编写模拟 SIM 卡的程序，因为 SIM 卡是在硬件中处理的，您的应用程序将无法访问该硬件。此外，这不仅仅是拥有第二张 SIM 卡的问题。双手机需要不同的硬件方法，系统逻辑和固件等中的不同逻辑等等。所以不幸的是，“寻找真正的双手机”是这里便宜得多的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:51:55.650

SIM 卡读取和管理不是安卓软件栈的一部分。这是在单独的处理器上运行的协议栈的一部分。

所以这是不可能的。因此，即使您 root 设备以向 android 提供 SIM 值，执行协议处理的通信处理器也不会更新值

# r - 在 R 中保存和增量更新最近邻模型

> ID：12202263
> 
> 赞同：39
> 
> 时间：2012-08-30T17:16:57.010
> 
> 标签：r

有几个最近邻 R 包（例如，FNN、RANN、yaImpute），但它们似乎都不允许节省 NN 数据结构（覆盖树、KD 树等），因此无需计算新查询的最近邻重建整棵树。R中有这样的功能吗？

我正在寻找一个返回数据结构的函数，当新数据到达时我可以增量更新以执行近似 K 最近邻搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:53:01.257

没有 NN 包这样做是有充分理由的。

原因是“NN 数据结构”必然包括所有输入数据点（以[KD 树](http://en.wikipedia.org/wiki/K-d_tree)的形式），因此对输入数据没有*空间节省。*看来不必为每个新输入重新创建 KD-tree 会节省*时间*，但事实并非如此，唉。

原因是构建 KD 树的时间通常**比**线性算法要差。*这意味着，对于较大的输入，在构建 KD-tree之前*对数据进行*排序*是有意义的，因为这样可以更快地生成 KD-tree，并且会更好地平衡，这也将改善搜索（它也比对数更差） ， 一般来说）。当然，这种方法会加速建模和评估，但会阻止增量更新。

 *我认为你最好的选择是找到一个通用的[KD-tree 包](https://stat.ethz.ch/R-manual/R-devel/library/class/html/knn.html)并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T04:44:43.150

nabor 包允许您构建一棵树并随后对其执行查询。但我不认为它可以让你增量更新树。*

# android - 如何自动测试 iOS 和 Android 应用程序的功能？

> ID：12202280
> 
> 赞同：14
> 
> 时间：2012-08-30T17:26:02.880
> 
> 标签：android, ios, ui-automation, galaxy, packet-capture

我必须定期测试电影租赁网站的可用性和功能。我写了一个 Windows 程序，它可以根据脚本自动运行 Web 浏览器，所以这个任务基本解决了。现在我必须自动化这个 Web 应用程序的移动版本：一个原生 iOS 应用程序和一个原生 Android 应用程序。

这些应用程序是封闭源代码，因此不能以任何方式修改。我认为测试应用程序应该部署在测试设备（iPhone、iPad、Galaxy Tab、Galaxy S II）上，但我必须能够远程控制它。我的意思是，我想在测试设备和 PC 之间建立连接，将测试脚本从 PC 上传到设备，运行它们，然后将测试结果下载到 PC。测试脚本应该启动要测试的应用程序，操作其 GUI（填充编辑框、按钮等），并以某种方式跟踪其响应，例如通过分析 GUI（某些 GUI 元素的存在、它们的标题等） 、分析屏幕截图和/或检查 IP 数据包。

我为 Windows 编写了许多类似的测试程序：我使用了 ShellExecute、PostMessage、FindWindow、WinPcap 库等，所以我知道这样的程序应该如何工作。但由于我从来没有为移动操作系统编写过应用程序，我什至不知道是否有适用于 iOS 和 Android 的类似 API 和库。

我想知道从哪里开始，我的意思是，可以使用哪些 SDK 和开发人员工具来编写这样的应用程序。我也对商业解决方案感兴趣。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T05:22:36.770

我喜欢[LessPainful的“](https://www.lesspainful.com/) [Calabash-iOS](https://github.com/calabash/calabash-ios) / [Calabash-Android](https://github.com/calabash/calabash-android) ” 。这对我来说是最好的。

*   自由
*   适用于 iPhone 和 Android
*   记录和回放
*   在本机和模拟器上测试

他们没有 GUI IDE。它们是基于 Ruby 的解决方案，编写测试用例脚本非常容易，如下所示：

```
Then I swipe left
And I wait until I don't see "Please swipe left"
And take picture 
```

也可以

```
Then I touch the "login" button 
```

点击按钮，或

```
Then I fill in "placeholder" with "text to write" 
```

向文本框写入内容。

并且脚本可以被 Calabash-iOS 和 Calabash-Android 共享。该功能对于同时制作 iPhoneApp 和 Android App 的开发人员来说非常方便。

我认为 MonkeyTalk 很好，但实际上不稳定，至少在我的环境中是这样。
有时MonkeyIDE会崩溃，所以我们必须对MonkeyTalk进行调试......

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T09:16:57.093

[MonkeyTalk](http://www.gorillalogic.com/testing-tools/monkeytalk)看起来很有希望。Gorilla Logic[网站](http://www.gorillalogic.com/testing-tools/monkeytalk)的功能：

*   免费和开源
*   iOS、Android、HTML5 和 Adob​​e Flex 应用程序的[自动化测试](http://www.gorillalogic.com/testing-tools/monkeytalk/documentation/monkeytalk-spec)
*   跨平台录制和回放
*   在 iOS 模拟器、Android 模拟器或真实设备上测试原生、Web 或混合应用程序（无需越狱）
*   从简单的“冒烟测试”到复杂的数据驱动测试套件，应有尽有

数据包追踪：[iOS](http://developer.apple.com/library/mac/#qa/qa1176/_index.html)、[Android](https://stackoverflow.com/questions/3631200/running-tcpdump-from-android-application)、[Android](http://blog.umitproject.org/2011/05/libpcap-for-android.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T15:51:16.780

[Selenium](http://code.google.com/p/selenium/wiki/WebDriverForMobileBrowsers)为移动设备和模拟器提供驱动程序。这是一个谷歌项目。他们有很好的文档。它有一个用于测试套件快速原型设计的 IDE，并支持多种语言，如 ruby​​、PHP、c# 等，

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T15:43:49.837

如果脚本是您在 android 上的首选解决方案，您可以在安装[Scripting Layer for Android](http://code.google.com/p/android-scripting/downloads/list)后轻松导入和运行脚本。只需下载最新的 apk 文件，导入脚本并运行它。这在 iOS 上不可用，但您的一半问题可能会通过此解决。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-01-28T19:25:40.977

我知道这是一篇旧文章，但任何阅读 2016 年自动化的首选应该是 Appium（适用于 IOS /Android）。上面提到的所有工具都必须使用应用程序构建。Appium 确实需要使用 App 代码进行任何构建。它在各种编程语言支持（PHP/JAVA/RUBY/PYTHON）中非常受欢迎。[链接]：appium.io 和 [链接]：[https ://github.com/appium/appium](https://github.com/appium/appium)

# java - 很难找出正确的正则表达式来匹配大写单词

> ID：12202284
> 
> 赞同：1
> 
> 时间：2012-08-30T17:26:18.123
> 
> 标签：java, regex, pattern-matching, match

我有一个简单的要求。我们使用休眠验证引擎来确定约束是真还是假。

如果所有单词都以大写字符开头，则 True 应该是文本。有一些困难：

单词也可以这样开头

```
8-测试
甚至
8测试
甚至
（测试）
甚至
-测试
或任何类似的东西

```

通常它们也用逗号分隔（或不同的分隔符）：

```
测试，测试，测试

```

**请记住，我只想确保字符串中的单词以大写开头。当你看到我的尝试时，可能我把事情复杂化了。**

以下是一些示例： 预计匹配所有（真）：

```
- 羟基异己基 3-环己烯甲醛，苄基
- 测试，测试，测试
- CI 15510，甲基氯异噻唑啉酮，EDTA二钠
- 不适用
- 不适用
```

预计不匹配所有（假）：

```
- 羟基异己基 3-环己烯甲醛，苄基
- 测试，测试，测试
- CI 15510，甲基氯异噻唑啉酮，eDTA二钠
- 呐
- 不适用
```

我的尝试正朝着这个方向发展：

```
 final String oldregex = "([\\W]*\\b[A-Z\\d]\\w+\\b[\\W]*)+";
final String regex = "([A-Z][\\d\\w]+( [A-Z][-\\d\\w]+)*, )*[A-Z][-\\d\\w]+( [A-Z][-\\d\\w]+)*\\.";'
```

实际上使用“ **oldregex** ”选项我遇到了一些文本的不定式计算使用它来测试正则表达式：[http](http://gskinner.com/RegExr/) ://gskinner.com/RegExr/ （当然没有双反斜杠）

谢谢帮忙！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:34:12.743

## 正则表达式

看看它**[在行动](http://regexr.com?320ok)**：

```
^(?:[^A-Za-z]*[A-Z][^\s,]*)*[^A-Za-z]*$ 
```

## 解释

```
^                # start of the string
(?:              # this group matches a "word", don't capture the group
  [^A-Za-z]*     # skip any non-alphabet characters at start of the word
  [A-Z]          # force an uppercase letter as a first letter
  [^\s,]*        # match anything but word separators (\s and ,) after 1th letter
)*               # the whole line consists of such "words"
[^A-Za-z]*       # skip any non-alphabet characters at the end of the string
$                # end of the string 
```

**注意：**如果您的单词分隔符不同于空格和逗号，您可以修改正则表达式。（例如，更改`[^\s,]`为`[^,:-]`或您使用的任何内容）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:10:14.047

测试了这个

```
^([^A-Za-z]*[A-Z][A-Za-z]*)+?$ 
```

它适用于您的测试用例

编辑：

```
^([^A-Za-z]*?[A-Z][A-Za-z]*?)+.? 
```

对于性能问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:24:41.177

这就是我想要的：[大写单词和字符 java 匹配](https://stackoverflow.com/questions/12215025/uppercase-words-characters-java-matches/12215990#12215990)

`"^((^|[^A-Za-z]+)[A-Z][A-Za-z]*)*[^A-Za-z]*$"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:32:32.733

这样的事情似乎是正确的：

```
\b[^a-zA-Z,\s]*?[A-Z][^,\s]*?(\b|,) 
```

`\b`s 匹配单词边界。`[^a-zA-Z]*?`允许前缀不是字母。然后我们有一个带有 的大写字母`[A-Z]`，然后是任何不是大写字母的`[^A-Z,\s]*?`。

# c# - 水晶报告如何在 asp.net 中的客户端服务器上部署。

> ID：12202286
> 
> 赞同：0
> 
> 时间：2012-08-30T17:26:22.903
> 
> 标签：c#, asp.net, visual-studio-2008, crystal-reports, crystal-reports-2008

当我在客户端服务器上部署我的项目时，我的水晶报告不起作用。如何在客户端服务器上部署水晶报表。我需要做什么，当我发布我的项目时。

```
 protected void FillOrderByClients(DateTime FromDate,DateTime ToDate,int Accountnumber,int SearchBy,int SigDate)
{
    rptClients.ReportSource = null; 
    int CompanyId = 1;

    string path = Server.MapPath("~/Report/OrdersByClient.rpt");
    reportDocument.Load(path);
    DataSet ds = _activeOrdersService.GetOrderByClientsReport(FromDate, ToDate, Accountnumber, CompanyId, SearchBy, SigDate);
    reportDocument.SetDatabaseLogon
    (myLogOnInfo.ConnectionInfo.UserID, myLogOnInfo.ConnectionInfo.Password, myLogOnInfo.ConnectionInfo.ServerName, myLogOnInfo.ConnectionInfo.DatabaseName);
    reportDocument.SetDataSource(ds.Tables[0]);
    rptClients.Visible = true;
    rptClients.ReportSource = reportDocument;
    rptClients.DataBind();
    rptClients.RefreshReport();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:28:53.837

您需要在服务器上安装水晶报表运行时。

[这是 Visual Studio 2010 中包含的 Crystal 版本的 SAP 下载页面的链接](http://search.sap.com/notes?id=0001529068&boj=/sap/bc/bsp/spn/scn_bosap/notes.do?access=69765F6D6F64653D3939382669765F7361706E6F7465735F6E756D6265723D30303031353239303638)。如果您需要其他版本，请搜索 SAP 站点（祝您好运，这很痛苦）。

# bash - 如果不是重复行，则 Bash 添加到文件末尾 (>>)

> ID：12202290
> 
> 赞同：3
> 
> 时间：2012-08-30T17:26:41.323
> 
> 标签：bash, logging

通常我对我在服务器上运行的进程使用这样的东西

```
./runEvilProcess.sh >> ./evilProcess.log 
```

但是我目前正在使用 Doxygen，它会产生大量重复输出

示例输出：

```
QGDict::hashAsciiKey: Invalid null key
QGDict::hashAsciiKey: Invalid null key
QGDict::hashAsciiKey: Invalid null key 
```

所以你最终会得到一个非常混乱的日志

**如果**该行不是最后添加的行，有没有办法我只能将该行添加到日志文件中。

一个糟糕的例子（但不确定如何在 bash 中做）

```
$previousLine = ""
$outputLine = getNextLine()
if($previousLine != $outputLine) {
  $outputLine >> logfile.log
  $previousLine = $outputLine
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:31:05.203

如果进程连续返回重复的行，请将进程的输出通过管道传输`uniq`：

```
 $ ./t.sh 
one
one
two
two
two
one
one
 $ ./t.sh | uniq
one
two
one 
```

如果日志被发送到标准错误流，您也需要重定向：

```
 $ ./yourprog 2>&1 | uniq >> logfile 
```

（如果重复来自程序的多次运行，这将无济于事 - 但是您可以`uniq`在查看日志文件时通过管道传输它。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T17:36:37.493

创建过滤器脚本 ( `filter.sh`)：

```
while read line; do
  if [ "$last" != "$line" ]; then
    echo $line
    last=$line
  fi  
done 
```

并使用它：

```
./runEvilProcess.sh | sh filter.sh >> evillog 
```

# wpf - 如何有条件地在自定义 ListView 的列表项中插入 Checkbox？

> ID：12202294
> 
> 赞同：0
> 
> 时间：2012-08-30T17:27:03.870
> 
> 标签：wpf, listview, data-binding, controltemplate, contentcontrol

我尝试制作一个自定义的 ListView，如果需要，它会用一些东西和一个初始 Checkbox 填充每个列表项。目前没有显示复选框，所以我猜我的 ContentControl 代码在某种程度上是错误的。

```
<ListView  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<ListView.View>
    <GridView>
        <GridViewColumn>
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <!-- Each list item: [Checkbox] Label -->
                    <StackPanel Orientation="Horizontal">
                        <!-- The code for the optional check box -->
                        <ContentControl>
                            <ContentControl.Style>
                                <Style TargetType="ContentControl">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsCheckable}" Value="True">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <CheckBox IsChecked="{Binding Path=SomeProperty}" />
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ContentControl.Style>
                        </ContentControl>
                        <!-- The non-optional test label -->
                        <Label Content="Test Content" />
                    </StackPanel>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
    </ListView.View>
</ListView> 
```

背后的代码：

```
public partial class MyListView : ListView {
    public MyListView () {
        InitializeComponent();
    }

    public bool IsCheckable
    {
        get { return (bool)GetValue(IsCheckableProperty); }
        set { SetValue(IsCheckableProperty, value); }
    }

    public static readonly DependencyProperty IsCheckableProperty =
        DependencyProperty.Register(
        "IsCheckable", 
        typeof(bool), 
        typeof(AppropriatenessWidget), 
        new UIPropertyMetadata(false));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:49:15.703

`{Binding IsCheckable}`绑定到`DataContext`非控件，例如使用：

```
{Binding IsCheckable,
         RelativeSource={RelativeSource AncestorType=local:MyListView}} 
```

我也怀疑这种子类化方法是否是个好主意，这可以通过底层轻松处理`DataContext`​​。

# php - 使用lua上传文件到服务器

> ID：12202301
> 
> 赞同：2
> 
> 时间：2012-08-30T17:27:23.863
> 
> 标签：php, lua

我一直在尝试使用 LUA 将文件上传到网络服务器。

我的问题是我想使用 LUA 将文件上传到网络服务器，该服务器模仿从浏览器上传文件。

我成功地能够使用服务器上传文件，我可以在`file_get_contents('php://input')`其中获取内容和 mime_decode 并保存该文件。

但是，我想`$_FILES['file_name']`在服务器端使用 lua 实现我可以做的事情。

那么有人知道如何在LUA中做到这一点吗？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:31:39.393

您可以使用 HTTP 套接字库发送 HTTP 请求，使用 ltn12 库进行过滤器（文件输入）。两者都应该与 Lua 一起提供。

```
http = require("socket.http")
ltn12 = require("ltn12")

http.request{
    url = "url://to.server/upload/script.php",
    method = "POST",
    headers = {
        ["Content-Type"] =  "multipart/form-data",
        ["Content-Length"] = sizeOfFile
    },
    source = ltn12.source.file(io.open(pathToLocalFile)),
    sink = ltn12.sink.table(response_body)
}
print(response_body[1]) --response to request 
```

# java - 在 Spring MVC 中映射 /（根 URL）

> ID：12202302
> 
> 赞同：5
> 
> 时间：2012-08-30T17:27:30.643
> 
> 标签：java, spring, spring-mvc, mapping, url-routing

这是我认为应该很容易的事情，但到目前为止我还没有让它发挥作用。

我想要做的是将我的根路径映射到 Spring MVC 控制器。使用 normal`Servlet`时，我只需`/`在 my 中为 ""添加一个映射`web.xml`，它就会很好地适应它。但是对于 Spring MVC，就没有那么多了。

我尝试了很多组合，但似乎没有一个有效。我认为以下一个应该工作。

在`web.xml`：

```
<servlet-mapping>
    <servlet-name>myDispatcherServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

在我的`contextConfigLocation`文件中：

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="alwaysUseFullPath" value="true"/>
    <property name="mappings">
        <util:map>
            <entry key="/" value-ref="rootController"/>
        </util:map>
    </property>
</bean>

<bean id="rootController" class="my.package.RootController"> 
```

然后很明显，有控制器本身的情况。我不知道如何将该方法映射到实际的根路径。我的尝试是这样的：

```
public class RootController extends MultiActionController {

    @RequestMapping("/")
    public ModelAndView display(HttpServletRequest request, HttpServletResponse response) throws Exception {

        final Map<String, Object> model = new HashMap<String, Object>();
        model.put("someVariable", "Hello, MVC world.");
        return new ModelAndView("rootPage", model);
    }
} 
```

因此，假设我的应用程序在其上运行`http://localhost:8080/app/`，我想要那个确切的 URL 来执行该方法`display`。我不想在`/app/`. 事实上，之后的一些东西`/app/`被映射到其他控制器，并且一切正常（并且它们必须继续工作）。

我在这里想念什么？为什么这不是简单的工作？如果我使用它`url-pattern`来映射到一个普通的`Servlet`实例，它可以正常工作并且我可以使用该`doGet`方法，但是对于 Spring MVC，我似乎缺少一些特殊的黑魔法来让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:17:58.277

`/`您可以在文件中声明欢迎页面，而不是映射到您`web.xml`：

```
<welcome-file-list>
    <welcome-file>welcome.htm</welcome-file>
</welcome-file-list> 
```

因此，您的`/`路径将被处理`/welcome.htm`，然后如果您的控制器正确映射到`/welcome.htm`它，它将像处理`/`请求一样处理`/welcome.htm`，而不会更改其他配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:36:00.830

我建议摆脱 SimpleUrlHandlerMapping 并执行以下操作：

```
@Controller
@RequestMapping("/")
public class RootController
{
  @RequestMapping(method=RequestMethod.GET)
  public ModelAndView display(...)
  {
    ...
  }
} 
```

这应该得到你想要的结果。此外，使用 a 添加`<mvc:annotation-driven/>`到您的 servlet 上下文以`<context:component-scan base-package="some.package.path.to.controller" />`使 Spring 连接该控制器。

否则，您可能可以像这样使用 SimpleUrlHandlerMapping 映射 URL：

```
<property name="mappings">
    <value>
        /*=rootController
    </value>
<property> 
```

如果这样做，您可以保留为 rootController 定义的 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T17:57:24.303

对于 Spring Webflow，Boris Treukhov 建议使用 web-file-list 导致我发现了一个适用于 weblogic 的 hack。例如，如果welcome 是一个flow.xml 文件，请执行以下操作： 将web.xml 中的url 模式从\ 更改为*.html。将一个虚拟（空）文件welcome.htm 放入文件夹src\main\webapp\WEB-INF。在 SimpleUrlHandlerMapping 中映射值 /welcome.htm=flowController。最后，完成注册表，flow-location path="welcome.xml"。参考链接：http: [//forum.spring.io/forum/spring-projects/web/50547-welcome-file-list-with-spring](http://forum.spring.io/forum/spring-projects/web/50547-welcome-file-list-with-spring)。

# python - mysql-python 与 Percona 服务器安装

> ID：12202303
> 
> 赞同：1
> 
> 时间：2012-08-30T17:27:31.420
> 
> 标签：python, percona

我正在尝试`mysql-python`在带有 Percona Server 的 Centos 6.2 机器上安装软件包。但是我遇到了**EnvironmentError: mysql_config not found**错误。

我仔细搜索了有关此错误的信息，但我发现的只是需要将 mysql_config 二进制文件的路径添加到 PATH 系统变量中。

但看起来，在我的 percona 安装中，根本没有 mysql_config 文件

`find / -type f -name mysql_config`什么都不返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:09:39.840

mysql_config 是 mysql-devel 包的一部分。

# php - 如何在 PHP 中添加用户位置？

> ID：12202305
> 
> 赞同：1
> 
> 时间：2012-08-30T17:27:35.063
> 
> 标签：php, location

> **可能重复：**
> [来自 php 的国家名称](https://stackoverflow.com/questions/1998386/country-name-from-php)

我正在为管理员管理 PHP 中的用户数据。我想问一个问题：如何添加用户注册的位置，然后在管理端显示该位置？

# php - Twitter API - 检查帐户是否被暂停

> ID：12202307
> 
> 赞同：2
> 
> 时间：2012-08-30T17:27:51.587
> 
> 标签：php, api, twitter

对于我的一个工具，我有一个包含许多 Twitter 帐户的数据库。有时会发生，在数据库中列出的帐户被 twitter 暂停。

我想知道是否有办法检查帐户是否被暂停。

我正在使用 Abraham Williams 的 php twitter api 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:08:16.927

使用您要检查的用户 ID执行[用户查找查询。](https://dev.twitter.com/docs/api/1/get/users/lookup)

列表之外的**将**是**暂停**的。

到目前为止，我就是这样做的。不确定是否有特定的方法可以做到这一点。

# javascript - jQuery 到 Javascript 代码转换

> ID：12202308
> 
> 赞同：0
> 
> 时间：2012-08-30T17:27:53.443
> 
> 标签：javascript, jquery

我没有很好的 Javascript 知识，但我对 jQuery 还算不错。我想将一些 jQuery 代码更改为纯 Javascript，但我不知道该怎么做。

```
$(document).ready(function() 
{
    $('#block').one('click', function()
    {
       $(this).val('{L_SEND_CONFIRM}').removeClass('button1');
       $('#replacement').val('{L_BLOCK_CODE}');
    });
}); 
```

请问有人愿意帮我吗？

PS：抱歉问了这么愚蠢的问题，我真的需要尽快自己学习Javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:31:30.860

这是一个*粗略*的等价物（如果你想解决一些微妙的问题，开始变得烦人，因此首先需要框架）：

```
window.onload = function() {
    document.getElementById('block').onclick = function() {
        this.onclick = '';
        this.value = '{L_SEND_CONFIRM}';
        this.className = this.className.replace('button1','');
        document.getElementById('replacement').value = '{L_BLOCK_CODE}';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:28:30.637

`onready``onload`是两种不同的野兽。

`onready`当 DOM 准备好时触发，但图形可能尚未加载。

`onload`当所有需要的东西（包括图形）都完成时触发。

我喜欢这里的图书馆来处理这些`onready`东西。它对支持它的浏览器使用 DOM 方法，并在必须时使用奇怪的 IE hack：

[https://github.com/ded/domready](https://github.com/ded/domready)

# python - python sum 函数 - 需要`start`参数解释

> ID：12202311
> 
> 赞同：6
> 
> 时间：2012-08-30T17:28:03.687
> 
> 标签：python, sum

我试图了解内置`sum()`函数的工作原理，但是，这个`start`参数已经让我忘记了：

1.  ```
    a=[[1, 20], [2, 3]]
    b=[[[[[[1], 2], 3], 4], 5], 6]
    >>> sum(b,a)
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    TypeError: can only concatenate list (not "int") to list
    >>> sum(a,b)
    [[[[[[1], 2], 3], 4], 5], 6, 1, 20, 2, 3] 
    ```

2.  ```
    >>> a=[1,2]
    >>> b=[3,4]
    >>> sum(a,b)
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    TypeError: can only concatenate list (not "int") to list
    >>> sum(b,a)
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    TypeError: can only concatenate list (not "int") to list 
    ```

我对此感到目瞪口呆，不知道发生了什么。这是 python 文档必须说的： http: [//docs.python.org/library/functions.html#sum](http://docs.python.org/library/functions.html#sum)。这没有对“如果开始不是字符串而不是整数怎么办？”给出任何解释。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T17:36:22.267

总和做这样的事情

```
def sum(values, start = 0):
    total = start
    for value in values:
        total = total + value
    return total 
```

`sum([1,2],[3,4])`展开类似`[3,4] + 1 + 2`的内容，您可以看到它尝试将数字和列表相加。

为了用于`sum`生成列表，值应该是列表的列表，而 start 可以只是一个列表。您会在失败的示例中看到该列表至少包含一些整数，而不是所有列表。

您可能会想到将 sum 与列表一起使用的通常情况是将列表列表转换为列表

```
sum([[1,2],[3,4]], []) == [1,2,3,4] 
```

但实际上你不应该这样做，因为它会很慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T17:36:02.907

```
a=[[1, 20], [2, 3]]
b=[[[[[[1], 2], 3], 4], 5], 6]
sum(b, a) 
```

此错误与 start 参数无关。列表中有两个项目`b`。其中一个是`[[[[[1], 2], 3], 4], 5]`，另一个是`6`，并且 list 和 int 不能相加。

```
sum(a, b) 
```

这是添加：

```
[[[[[[1], 2], 3], 4], 5], 6] + [1, 20] + [2, 3] 
```

哪个工作正常（因为您只是将列表添加到列表中）。

```
a=[1,2]
b=[3,4]
sum(a,b) 
```

这是尝试添加`[3,4] + 1 + 2`，这又是不可能的。同样，`sum(b,a)`正在添加`[1, 2] + 3 + 4`.

> 如果 start 不是字符串也不是整数怎么办？

`sum`不能对字符串求和。看：

```
>>> sum(["a", "b"], "c")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: sum() can't sum strings [use ''.join(seq) instead] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-27T15:24:21.813

在其他答案中已暗示但未明确说明的一件事是**该`start`值定义了`type`返回值和被求和的项目**。因为默认值是`start=0`, （当然 0 是整数）可迭代对象中的所有项都必须是整数（或具有`__add__`处理整数的方法的类型）。其他示例提到了连接列表：

( `sum([[1,2],[3,4]], []) == [1,2,3,4]`)

或`timedate.timedelta`对象：

( `sum([timedelta(1), timedelta(2)], timedelta()) == timedelta(3)`)。

请注意，这两个示例都将可迭代类型的空对象作为开始参数传递，以避免出现`TypeError: unsupported operand type(s) for +: 'int' and 'list'`错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-29T11:06:15.640

我只是想澄清一些困惑。
sum 函数的签名应该是：

```
sum(iterable,start=0) 
```

而不是

```
sum(values,start=0) 
```

如上所述。此更改将使签名更清晰。

全功能：

```
def sum(iterable,start=0):
       total=start
       for val in iterable:
            total+=val
       return total 
```

# java - 在 mouseMoved 中调用重绘时光标消失？

> ID：12202312
> 
> 赞同：1
> 
> 时间：2012-08-30T17:28:09.037
> 
> 标签：java, swing, graphics, paintcomponent, mousemove

我在光标移动时从光标位置绘制水平和垂直线时遇到问题。光标似乎消失了。

我已将 MouseInputAdapter 附加到我的摇摆组件，该组件有一个调用 repaint() 的 mouseMoved 方法；

调用 repaint 将导致调用 paintComponent(Graphics g)。在paintComponent 中，我绘制水平线和垂直线：

```
Dimension dim = getSize();
g2.setColor(Color.white);
g2.fillRect(0, 0, dim.width, dim.height);
g2.setColor(Color.black);
Point pos = this.getMousePosition();
g2.draw(new Line2D.Double(0, pos.y, dim.getWidth(), pos.y));
g2.draw(new Line2D.Double(pos.x, 0, pos.x, dim.getHeight())); 
```

这是一个屏幕截图：

![在此处输入图像描述](../Images/3a8bcdbfd8643605b42d6ed204af12bc.png)

光标应位于大水平线和垂直线之间的白色区域，并且应位于大数字 1.2434307 的左侧...

当我用鼠标移动光标时，我可以看到光标（十字准线）闪烁，这让我相信我的绘画方法正在光标上绘画。

有谁知道问题可能出在哪里？

根据要求，我添加了一些测试代码。

```
public class TestApp extends JFrame {
public TestApp() {
    super("TestApp");

    this.getContentPane().setLayout(new BorderLayout());
    this.getContentPane().add(new CustomComponent(), BorderLayout.CENTER);
    this.setSize(300, 300);
    this.setVisible(true);

}

class CustomComponent extends JComponent {
    public CustomComponent() {
        setCursor(Cursor.getPredefinedCursor(Cursor.CROSSHAIR_CURSOR));

        MouseInputAdapter mia = new MouseInputAdapter() {

            @Override
            public void mouseMoved(MouseEvent e) {
                repaint();
            }

        };

        addMouseMotionListener(mia);
        addMouseListener(mia);
    }

    @Override
    public void paintComponent(Graphics g) {
        Dimension dim = getSize();
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        g2.setColor(Color.white);
        g2.fillRect(0, 0, dim.width, dim.height);

        g2.setColor(Color.black);
        Point pos = this.getMousePosition();
        if (pos != null) {

            g2.draw(new Line2D.Double(0, pos.y, dim.getWidth(), pos.y));
            g2.draw(new Line2D.Double(pos.x, 0, pos.x, dim.getHeight()));
            g2.drawString("where is my cursor?", pos.x, pos.y);
        }
    }
}

public static void main(String[] args) {
    new TestApp();
}
} 
```

# java - 我读取大文本文件的 Java 程序内存不足，谁能帮忙解释一下原因？

> ID：12202313
> 
> 赞同：15
> 
> 时间：2012-08-30T17:28:20.487
> 
> 标签：java

我有一个包含 2000 万行文本的大型文本文件。当我使用以下程序读取文件时，它工作得很好，实际上我可以读取更大的文件而没有内存问题。

```
public static void main(String[] args) throws IOException {
    File tempFile = new File("temp.dat");
    String tempLine = null;
    BufferedReader br = null;
    int lineCount = 0;
    try {
        br = new BufferedReader(new FileReader(tempFile));
        while ((tempLine = br.readLine()) != null) {
            lineCount += 1;
        }
    } catch (Exception e) {
        System.out.println("br error: " +e.getMessage());
    } finally {
        br.close();
        System.out.println(lineCount + " lines read from file");
    }
} 
```

但是，如果我需要在读取该文件之前将一些记录附加到该文件中，则 BufferedReader 会消耗大量内存（我刚刚使用 Windows 任务管理器对此进行了监控，我知道这不是很科学，但它证明了问题所在）。修改后的程序如下，与第一个相同，只是我先将一条记录附加到文件中。

```
public static void main(String[] args) throws IOException {
    File tempFile = new File("temp.dat");
    PrintWriter pw = null;
    try {
        pw = new PrintWriter(new BufferedWriter(new FileWriter(tempFile, true)));
        pw.println(" ");
    } catch (Exception e) {
        System.out.println("pw error: " + e.getMessage());
    } finally {
        pw.close();
    }

    String tempLine = null;
    BufferedReader br = null;
    int lineCount = 0;
    try {
        br = new BufferedReader(new FileReader(tempFile));
        while ((tempLine = br.readLine()) != null) {
            lineCount += 1;
        }
    } catch (Exception e) {
        System.out.println("br error: " +e.getMessage());
    } finally {
        br.close();
        System.out.println(lineCount + " lines read from file");
    }
} 
```

Windows 任务管理器的屏幕截图，其中行中的大凸起显示了我运行该程序的第二个版本时的内存消耗。

![任务管理器截图](../Images/9d491ea91a19d90344a5939b231c2079.png)

所以我能够读取这个文件而不会耗尽内存。但是我有超过 5000 万条记录的更大文件，当我对它们运行这个程序时遇到内存不足异常？有人可以解释为什么该程序的第一个版本适用于任何大小的文件，但第二个程序的行为如此不同并以失败告终？我在 Windows 7 上运行：

java 版本 "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) Client VM (build 23.1-b03, 混合模式, 共享)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:38:25.557

[您可以使用VM-Options](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)启动 Java-VM

```
-XX:+HeapDumpOnOutOfMemoryError 
```

这会将堆转储写入文件，可以对其进行分析以查找泄漏嫌疑人

使用“+”添加选项，使用“-”删除选项。

如果您使用 Eclipse Java Memory Analyzer Plugin [MAT](http://www.eclipse.org/mat/)从正在运行的 VM 中获取堆转储，并对 Leak Suspects 等进行一些很好的分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T11:13:25.410

这可能是因为您的文件中可能根本没有换行符/回车符。在这种情况下，`readLine()`尝试从您的文件中仅创建一个字符串，该字符串可能内存不足。

readLine() 的 Java 文档：

`Reads a line of text. A line is considered to be terminated by any one of a line feed ('\n'), a carriage return ('\r'), or a carriage return followed immediately by a linefeed.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:56:57.143

你有没有尝试过：

A）创建一个新的 File 实例用于读取，但指向同一个文件。B）在第二部分中读取一个完全不同的文件。

我想知道 File 对象是否仍然以某种方式附加到 PrintWriter，或者操作系统是否对文件句柄做了一些有趣的事情。这些测试应该告诉你应该把重点放在哪里。

这看起来不是代码的问题，你认为它不应该中断的逻辑似乎是合理的，所以它必须是一些底层功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T11:07:09.300

```
 pw = new PrintWriter(new BufferedWriter(new FileWriter(tempFile, true))); 
```

你试过不使用 BufferedWriter 吗？如果您在末尾附加几行，也许您不需要缓冲区？如果这样做，请考虑使用字节数组（集合或字符串构建器）。最后你在 java 1.6_32 中尝试过同样的方法吗？可能是其中一位作家的新版本中的错误。

你能在 pw.close() 前后打印空闲内存吗？?

```
System.out.println("before wr close :"  + Runtime.getRuntime().freeMemory()); 
```

关闭后和阅读器关闭后类似

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T23:44:50.123

每次执行 Java 后的 Java 例程时，都会创建一个全新的对象：

```
tempLine = br.readLine() 
```

我相信每次调用 readLine() 时，它可能会创建一个新的 String 对象，每次调用重新分配以将值分配给 tempLine 时，该对象都会留在堆上。

因此，由于 GC 不会一直被调用，因此数以千计的对象可以在几秒钟内留在堆上。

有人说每 1000 行左右调用 System.gc() 是个坏主意，但我很好奇这是否能解决您的问题。此外，您可以在每一行之后运行此命令，以基本上将每个对象标记为可垃圾回收：

```
tempLine=null; 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-08-30T17:31:07.717

你需要用更大的堆启动java。尝试将 -Xmx1024m 作为 java 命令的参数。

基本上你需要比文件大小更多的内存。

# c++ - 通过不影响不变量的集合的 NON-const 迭代器访问成员

> ID：12202315
> 
> 赞同：1
> 
> 时间：2012-08-30T17:28:36.813
> 
> 标签：c++, invariants, const-iterator, stdset

假设我有这样的代码：

```
#include <set>
#include <math.h>

typedef int OtherTypes;

struct MyType
{
    double Field1;
    OtherTypes MoreFields;

    MyType(double blah) :
        Field1(blah)
    {
    }

    bool operator < (const MyType &That) const
    {
        // Does not use any other member besides Field1
        return ( fabs(Field1 - That.Field1) > 1e-6 &&
                 Field1 < That.Field1 );
    }

};

int main()
{
    std::set<MyType> foo;
    std::pair< std::set<MyType>::iterator,
               bool > inchk = foo.insert(MyType(1.0));

    OtherTypes SomeVal = 1;
    if ( inchk.second )
        inchk.first->MoreFields = SomeVal; // error

} 
```

我如何向编译器保证编写 MoreFields 不会影响任何不变量或不会做任何事情来使集合中元素的顺序无效？

如果唯一的办法是使用另一个容器，例如向量，我如何在排序位置插入一个新值，同时检查一个是否已经存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:33:02.207

*   声明`MoreFields`为`mutable`，或

*   `const_cast`删除常量的`inchk.first`表达式，或

*   封装`MoreFields`在返回非 const 引用的 const 限定访问器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:44:37.220

我认为您想使用地图而不是集合。

# scala - 如何合并两个 Scala (String, String) 进行播放！查询字符串？

> ID：12202317
> 
> 赞同：2
> 
> 时间：2012-08-30T17:28:46.103
> 
> 标签：scala, playframework-2.0

最终目标是连接两个正在传递给 Play 的查询参数！网络服务请求。看起来像：

```
WS
.url(requestUri)
.withQueryString(finalQueries) 
```

我尝试使用几个运算符，但它失败了：

```
val finalQueries = queryParams match {
        case Some(queries) =>
          tokenParam ++ queries
        case None =>
          tokenParam
} 
```

**错误：** `value ++ is not a member of (String, String)`

API 文档显示`withQueryString`接受一个`(String, String)*`

我对 Play! 的`withQueryString`方法有点困惑，因为它似乎在我每次访问它时都会完全替换整个查询字符串。有什么方法可以体面地组合查询字符串？

**编辑：**示例查询字符串如下（类型语法及其最终外观有点令人困惑......）：

`val queryString = ("timeMin" -> "2012-08-20T01%3A11%3A06.000Z")`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T17:39:06.087

从您的代码中，在我看来`queryParams`应该是，`Option[(String, String)]`并且从错误消息中， 我认为您可以试试这个：`tokenParam``(String, String)`

```
val finalQueries = Seq(tokenParam) ++ queryParams
WS
.url(requestUri)
.withQueryString(finalQueries:_*) 
```

* * *

它之所以有效，是因为`Option`可以被视为`Seq`，例如：`Seq(1, 2) ++ Some(3)`将成为`Seq(1, 2, 3)`并且`Seq(1, 2) ++ None`将是公正的`Seq(1, 2)`

然后`.withQueryString`接受一个`(String, String)*`方法，你可以调用它 like `.withQueryString(param1, param2, andMore)`，
或者你可以用 a 调用它并告诉编译器像*任何东西*`Seq`一样对待它，通过在like的末尾写入重复*`: _*``Seq``.withQueryString(Seq(param1, param2, andMore): _*)`*

# javascript - 将文本拆分为页面并单独呈现 (HTML5)

> ID：12202324
> 
> 赞同：22
> 
> 时间：2012-08-30T17:29:10.267
> 
> 标签：javascript, html, css, html5-canvas

假设我们有一个像罗密欧与朱丽叶这样的长文本，我们想在一个简单的电子阅读器中呈现它（没有动画，只有页面和自定义字体大小）。有什么方法可以做到这一点？

到目前为止我想出了什么：

*   使用 css3 列，可以将整个文本加载到内存中，使其样式化，使得单个列占用整个页面的大小。事实证明，这样做非常难以控制，并且需要将整个文本加载到内存中。
*   使用 css3 区域（任何主流浏览器都不支持）将构成与以前的解决方案相同的基本概念，主要区别在于它不会那么难以控制（因为每个“列”都是一个自包含的元素）。
*   在画布上绘制文本可以让您准确知道文本的结束位置，从而根据该文本绘制下一页。优点之一是您只需要将所有文本加载到当前页面（仍然很糟糕，但更好）。缺点是无法与文本交互（如选择文本）。
*   将每个单词放在一个元素中，并为每个元素赋予一个唯一的 id（或在 javascript 中保留一个逻辑引用），接下来用于`document.elementFromPoint`查找页面上最后一个元素（单词）并从该单词开始显示下一页。尽管这是唯一一个在我看来实际上是现实的，但由此产生的开销必须是巨大的。

然而，这些似乎都不可接受（首先没有给予足够的控制以使其工作，第二个还不支持，第三个很难并且没有文本选择，第四个给出了一个荒谬的开销），所以任何好的方法我还没有想到，或者解决上述方法的一个或多个缺点的方法（是的，我知道这是一个相当开放的问题，但它越开放，产生任何相关答案的机会就越高）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-09T04:37:44.987

**SVG 可能非常适合您的文本分页**

*   SVG 文本实际上是文本——与仅显示文本图片的画布不同。

*   SVG 文本是可读的、可选择的、可搜索的。

*   SVG 文本本身不会自动换行，但使用 javascript 很容易解决这个问题。

*   灵活的页面大小是可能的，因为页面格式是在 javascript 中完成的。

*   分页不依赖于浏览器的格式。

*   文本下载小而高效。只需要下载当前页面的文本。

**以下是如何进行 SVG 分页的详细信息和一个 Demo：**

[http://jsfiddle.net/m1erickson/Lf4Vt/](http://jsfiddle.net/m1erickson/Lf4Vt/)

![在此处输入图像描述](../Images/b83b66a33c3338f12466e902afc6738b.png)

**第 1 部分：从服务器上的数据库中有效地获取大约一页的单词**

将整个文本存储在数据库中，每行 1 个单词。

每行（单词）按单词的顺序顺序索引（单词#1 的索引==1，单词#2 的索引==2，等等）。

例如，这将以正确的词序获取整个文本：

```
// select the entire text of Romeo and Juliet
// “order by wordIndex” causes the words to be in proper order

Select word from RomeoAndJuliet order by wordIndex 
```

如果您假设任何页面在格式化时包含大约 250 个单词，那么此数据库查询将获取第 1 页的前 250 个单词的文本

```
// select the first 250 words for page#1

Select top 250 word from RomeoAndJuliet order by wordIndex 
```

*现在好的部分！*

假设第 1 页在格式化后使用了 212 个单词。然后，当您准备好处理 page#2 时，您可以从 word#213 开始再获取 250 个单词。这导致快速有效的数据获取。

```
// select 250 more words for page#2
// “where wordIndex>212” causes the fetched words
// to begin with the 213th word in the text

Select top 250 word from RomeoAndJuliet order by wordIndex where wordIndex>212 
```

**第 2 部分：将获取的单词格式化为适合指定页面宽度的文本行**

每行文本必须包含足够的单词来填充指定的页面，但不能更多。

以单个单词开始第 1 行，然后一次添加 1 个单词，直到文本适合指定的页面宽度。

安装第一行后，我们向下移动一个行高并开始第 2 行。

将单词放在一行上需要测量一行上添加的每个额外单词。当下一个单词超出行宽时，多余的单词将移至下一行。

可以使用 Html Canvases`context.measureText`方法测量一个单词。

此代码将采用一组单词（例如从数据库中获取的 250 个单词），并将格式化尽可能多的单词以填充页面大小。

`maxWidth`是一行文本的最大像素宽度。

`maxLines`是适合一页的最大行数。

```
function textToLines(words,maxWidth,maxLines,x,y){

    var lines=[];

    while(words.length>0 && lines.length<=maxLines){
        var line=getOneLineOfText(words,maxWidth);
        words=words.splice(line.index+1);
        lines.push(line);
        wordCount+=line.index+1;
    }

    return(lines);
}

function getOneLineOfText(words,maxWidth){
    var line="";
    var space="";
    for(var i=0;i<words.length;i++){
        var testWidth=ctx.measureText(line+" "+words[i]).width;
        if(testWidth>maxWidth){return({index:i-1,text:line});}
        line+=space+words[i];
        space=" ";
    }
    return({index:words.length-1,text:line});
} 
```

**第 3 部分：使用 SVG 显示文本行**

SVG 文本元素是一个真正的 html 元素，可以阅读、选择和搜索。

SVG Text 元素中的每一行文本都使用 SVG Tspan 元素显示。

此代码采用在第 2 部分中格式化的文本行，并使用 SVG 将这些行显示为文本页面。

```
function drawSvg(lines,x){
    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    var sText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    sText.setAttributeNS(null, 'font-family', 'verdana');
    sText.setAttributeNS(null, 'font-size', "14px");
    sText.setAttributeNS(null, 'fill', '#000000');
    for(var i=0;i<lines.length;i++){
        var sTSpan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');
        sTSpan.setAttributeNS(null, 'x', x);
        sTSpan.setAttributeNS(null, 'dy', lineHeight+"px");
        sTSpan.appendChild(document.createTextNode(lines[i].text));
        sText.appendChild(sTSpan);
    }
    svg.appendChild(sText);
    $page.append(svg);
} 
```

这是完整的代码，以防 Demo 链接中断：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<style>
    body{ background-color: ivory; }
    .page{border:1px solid red;}
</style>
<script>
$(function(){

    var canvas=document.createElement("canvas");
    var ctx=canvas.getContext("2d");
    ctx.font="14px verdana";

    var pageWidth=250;
    var pageHeight=150;
    var pagePaddingLeft=10;
    var pagePaddingRight=10;
    var approxWordsPerPage=500;        
    var lineHeight=18;
    var maxLinesPerPage=parseInt(pageHeight/lineHeight)-1;
    var x=pagePaddingLeft;
    var y=lineHeight;
    var maxWidth=pageWidth-pagePaddingLeft-pagePaddingRight;
    var text="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";

    // # words that have been displayed 
    //(used when ordering a new page of words)
    var wordCount=0;

    // size the div to the desired page size
    $pages=$(".page");
    $pages.width(pageWidth)
    $pages.height(pageHeight);

    // Test: Page#1

    // get a reference to the page div
    var $page=$("#page");
    // use html canvas to word-wrap this page
    var lines=textToLines(getNextWords(wordCount),maxWidth,maxLinesPerPage,x,y);
    // create svg elements for each line of text on the page
    drawSvg(lines,x);

    // Test: Page#2 (just testing...normally there's only 1 full-screen page)
    var $page=$("#page2");
    var lines=textToLines(getNextWords(wordCount),maxWidth,maxLinesPerPage,x,y);
    drawSvg(lines,x);

    // Test: Page#3 (just testing...normally there's only 1 full-screen page)
    var $page=$("#page3");
    var lines=textToLines(getNextWords(wordCount),maxWidth,maxLinesPerPage,x,y);
    drawSvg(lines,x);

    // fetch the next page of words from the server database
    // (since we've specified the starting point in the entire text
    //  we only have to download 1 page of text as needed
    function getNextWords(nextWordIndex){
        // Eg: select top 500 word from romeoAndJuliet 
        //     where wordIndex>=nextwordIndex
        //     order by wordIndex
        //
        // But here for testing, we just hardcode the entire text 
        var testingText="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";
        var testingWords=testingText.split(" ");
        var words=testingWords.splice(nextWordIndex,approxWordsPerPage);

        // 
        return(words);    
    }

    function textToLines(words,maxWidth,maxLines,x,y){

        var lines=[];

        while(words.length>0 && lines.length<=maxLines){
            var line=getLineOfText(words,maxWidth);
            words=words.splice(line.index+1);
            lines.push(line);
            wordCount+=line.index+1;
        }

        return(lines);
    }

    function getLineOfText(words,maxWidth){
        var line="";
        var space="";
        for(var i=0;i<words.length;i++){
            var testWidth=ctx.measureText(line+" "+words[i]).width;
            if(testWidth>maxWidth){return({index:i-1,text:line});}
            line+=space+words[i];
            space=" ";
        }
        return({index:words.length-1,text:line});
    }

    function drawSvg(lines,x){
        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        var sText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        sText.setAttributeNS(null, 'font-family', 'verdana');
        sText.setAttributeNS(null, 'font-size', "14px");
        sText.setAttributeNS(null, 'fill', '#000000');
        for(var i=0;i<lines.length;i++){
            var sTSpan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');
            sTSpan.setAttributeNS(null, 'x', x);
            sTSpan.setAttributeNS(null, 'dy', lineHeight+"px");
            sTSpan.appendChild(document.createTextNode(lines[i].text));
            sText.appendChild(sTSpan);
        }
        svg.appendChild(sText);
        $page.append(svg);
    }

}); // end $(function(){});
</script>
</head>
<body>
    <h4>Text split into "pages"<br>(Selectable & Searchable)</h4>
    <div id="page" class="page"></div>
    <h4>Page 2</h4>
    <div id="page2" class="page"></div>
    <h4>Page 3</h4>
    <div id="page3" class="page"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-30T20:45:48.630

See [my answer](https://stackoverflow.com/a/11277573/102441) to [*Wrap text every 2500 characters in a for pagination using PHP or javascript*](https://stackoverflow.com/q/11277529/102441). I ended up with [http://jsfiddle.net/Eric/WTPzn/show](http://jsfiddle.net/Eric/WTPzn/show)

Quoting the original post:

> Just set your HTML to:
> 
> ```
> <div id="target">...</div> 
> ```
> 
> Add some css for pages:
> 
> ```
> #target {
>     white-space: pre-wrap; /* respect line breaks */
> }
> .individualPage {
>     border: 1px solid black;
>     padding: 5px;    
> } 
> ```
> 
> And then use the following code:
> 
> ```
> var contentBox = $('#target');
> //get the text as an array of word-like things
> var words = contentBox.text().split(' ');
> 
> function paginate() {
>     //create a div to build the pages in
>     var newPage = $('<div class="individualPage" />');
>     contentBox.empty().append(newPage);
> 
>     //start off with no page text
>     var pageText = null;
>     for(var i = 0; i < words.length; i++) {
>         //add the next word to the pageText
>         var betterPageText = pageText ? pageText + ' ' + words[i]
>                                       : words[i];
>         newPage.text(betterPageText);
> 
>         //Check if the page is too long
>         if(newPage.height() > $(window).height()) {
>             //revert the text
>             newPage.text(pageText);
> 
>             //and insert a copy of the page at the start of the document
>             newPage.clone().insertBefore(newPage);
> 
>             //start a new page
>             pageText = null;
>         } else {
>             //this longer text still fits
>             pageText = betterPageText;             
>         }
>     }    
> }
> 
> $(window).resize(paginate).resize(); 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-13T19:42:51.643

我有一个非常简单、可变的 css 标记和 3 个非常短的 js 函数的解决方案。

首先，我创建了两个 div 元素，其中一个隐藏但包含整个文本，另一个显示但为空。**HTML**看起来像这样：

```
<div id="originalText">
some text here
</div>
<div id="paginatedText"></div> 
```

这两个的**CSS**是：

```
#originalText{
    display: none; // hides the container
}

#paginatedText{
    width: 300px;
    height: 400px;
    background: #aaa;
} 
```

我还为类名页面准备了 css，如下所示：

```
.page{
    padding: 0;
    width: 298;
    height: 398px; // important to define this one
    border: 1px solid #888;
} 
```

真正重要的部分是定义高度，否则当我们稍后填写单词时页面只会被拉伸。

* * *

现在是重要的部分。**JavaScript**函数。评论应该不言自明。

```
function paginateText() {
    var text = document.getElementById("originalText").innerHTML; // gets the text, which should be displayed later on
    var textArray = text.split(" "); // makes the text to an array of words
    createPage(); // creates the first page
    for (var i = 0; i < textArray.length; i++) { // loops through all the words
        var success = appendToLastPage(textArray[i]); // tries to fill the word in the last page
        if (!success) { // checks if word could not be filled in last page
            createPage(); // create new empty page
            appendToLastPage(textArray[i]); // fill the word in the new last element
        }
    }
}

function createPage() {
    var page = document.createElement("div"); // creates new html element
    page.setAttribute("class", "page"); // appends the class "page" to the element
    document.getElementById("paginatedText").appendChild(page); // appends the element to the container for all the pages
}

function appendToLastPage(word) {
    var page = document.getElementsByClassName("page")[document.getElementsByClassName("page").length - 1]; // gets the last page
    var pageText = page.innerHTML; // gets the text from the last page
    page.innerHTML += word + " "; // saves the text of the last page
    if (page.offsetHeight < page.scrollHeight) { // checks if the page overflows (more words than space)
        page.innerHTML = pageText; //resets the page-text
        return false; // returns false because page is full
    } else {
        return true; // returns true because word was successfully filled in the page
    }
} 
```

最后我只是`paginateText`用

```
paginateText(); 
```

* * *

整个脚本适用于每个文本和页面的每种样式。

因此，您可以更改字体和字体大小，甚至页面的大小。

我也有一个**[jsfiddle 里面](http://jsfiddle.net/3TJxE/)**的所有东西。

如果我忘记了什么或者您有任何问题，请随时发表评论并提出建议或提出问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-27T01:06:03.713

我还没有足够的代表发表评论，但我只想说 Eric 的回答效果很好。我正在创建一个电子阅读器，除了它读取 HTML 文件，您可以将它用于未准备好发布的文本。有两个页面可以看到，它们只有在您按下按钮时才会调整大小。

我做了很多修改。不过，我只发现了一个小缺陷。当您检查最后一个单词是否从页面边缘掉下来时，您需要将该单词添加回列表中。简单地说，在 if 语句的第一种情况下，放入 i--; 行。为了回去把那个词放在下一页。

这是我的修改：

1.  用参数（内容，目标）把它全部变成一个函数。
2.  添加了一个变量 backUpContent，以便在我调整页面大小时重用。
3.  将 newPage 更改为不可见的 testPage 并添加了一个数组 page[i]，其中包含每个页面的内容，以便在排序页面后轻松来回。
4.  在 else 语句的第一部分添加了行“pC++;”，一个页面计数器。
5.  将 .text 更改为 .html，这样它就不会将标签视为其文本等价物。
6.  我围绕 1 或 2 个内容变化的 div 设计了它，而不是许多隐藏和显示的 div。
7.  还有更多的插入我还没有得到。

如果您想将整段内容保留在同一页面上，请更改行

```
pageText + ' ' + words[i] 
```

至

```
pageText + '</p><p>' + words[i] 
```

和线

```
words = content.split(' '); 
```

至

```
words = content.split('</p><p>'); 
```

但是，只有当您确定每个这样的元素都小到可以放在一页上时，您才应该使用它。

埃里克的解决方案正是我所缺少的。我本来打算问自己的问题，但在输入了几乎所有问题后，我终于在建议中找到了这个页面。不过，这个问题的措辞有点令人困惑。

谢谢埃里克！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-15T02:48:42.467

另一个想法是使用[CSS 列](https://developer.mozilla.org/en-US/docs/Web/CSS/columns)来拆分 html 内容，这个重排是由浏览器自己完成的，所以它会非常快，下一步是将每个页面内容插入到 dom 中，我通过复制整个列并滚动每个页面来做到这一点裁剪的窗口，请参见 codepen 示例：

[https://codepen.io/alphakevin/pen/eXqbQP](https://codepen.io/alphakevin/pen/eXqbQP)

```
const pageWidth = 320;
const content = document.getElementById('content');
const totalWidth = content.scrollWidth;
const totalPages = totalWidth / pageWidth;
console.log('totalPages', totalPages);

let contentVisible = true;
const button = document.getElementById('btn-content');
const buttonText = document.getElementById('btn-content-text');
const showHideContent = () => {
  contentVisible = !contentVisible;
  content.style.display = contentVisible ? 'block' : 'none';
  buttonText.innerText = contentVisible ? 'Hide' : 'Show';
}
button.addEventListener('click', showHideContent);

const html = content.innerHTML;
const container = document.getElementById('container');
// console.log('content', content);
for (let p = 0; p < totalPages; p++) {
  const page = document.createElement('div');
  page.innerHTML = html;
  page.className = 'page';
  page.style.cssText = `
    width: ${totalWidth}px;
    transform: translateX(-${p * pageWidth}px);
  `;
  const pageClip = document.createElement('div');
  pageClip.className = 'page-clip';
  pageClip.appendChild(page);
  const pageWrapper = document.createElement('div');
  pageWrapper.className = 'page-wrapper';
  pageWrapper.appendChild(pageClip);
  container.appendChild(pageWrapper);
}

showHideContent(); 
```

这非常适合少量分页内容，但不适用于大内容，您会得到很多永远不会显示的浪费的 DOM 元素。

但我认为必须有更好的想法，比如结合其他答案，使用 javascript 来帮助拆分列结果。

作为参考，请查看分页媒体解决方案

[https://codepen.io/julientaq/pen/MBryxr](https://codepen.io/julientaq/pen/MBryxr)

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-08-30T17:38:31.913

这很简单，不需要 javascript。从[CSS2](http://www.w3.org/TR/CSS2/media.html)`paged media type`开始支持。有关受支持的属性，请参阅[http://www.w3.org/TR/CSS21/page.html](http://www.w3.org/TR/CSS21/page.html)（或[当前 CSS3 模块）。](http://www.w3.org/TR/css3-page/)

# javascript - 为什么我需要将我的 JQuery 代码包装在函数文字中？

> ID：12202325
> 
> 赞同：3
> 
> 时间：2012-08-30T17:29:13.810
> 
> 标签：javascript, jquery

我有以下有效的代码 -

```
$(function(){
    $('#testbutton').click(function(){
        var checkedValue = $('[name="someRadioGroup"]:radio:checked').val();
        $('#result').html('The radio element with value <tt>' + checkedValue + '</tt> is checked');
    });
}); 
```

我知道 $('#testbutton') 获取带有 id testbutton 的 HTML 元素并为其分配一个事件处理程序。

但我不明白为什么我需要将该代码放在函数文字中？

如果我删除`$(function(){`（和相应的`});`）它不起作用。

但是，其他代码可以在不包含在函数文字中的情况下工作。例子 - `alert('Hi there')`

有什么不同？为什么 alert 有效但事件赋值语句无效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:30:26.653

`$(function(){...});`是 的简写`$(document).ready(function(){...});`。它的目的是在您打算使用的元素存在于 DOM 中之前（通常是在文档准备好之后）才运行您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:30:56.013

这不是一个要求。

您将代码放入事件处理程序中，当 DOM 准备好时调用该事件处理程序。

如果您没有将代码放入 DOM 就绪处理程序中，并且如果您的代码执行 DOM 选择，则需要找到其他方法来确保 DOM 在运行之前准备好。

如果您的代码不执行 DOM 选择，则不需要。这就是你`alert()`工作的原因，因为它不需要获取任何元素。

另一种选择是这样。

```
<body>
   <button id="testbutton">click</button>
   <div id="result"></div>

   <script type="text/javascript" src="/your/script.js"></script>
</body> 
```

这会将您的代码置于页面上所有元素的下方，因此它们在您的代码运行时肯定是可用的。

另一种选择是使用`window.onload`处理程序。

```
window.onload = function() {
    // your code
}; 
```

或使用 jQuery。

```
$(window).on("load", function() {
    // your code
}); 
```

这类似于 DOM 就绪处理程序，不同之处在于它等待所有资源（如图像）被加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:32:53.673

在最基本的层面上，某种形式`(function(){...})()`是立即执行的函数字面量。这意味着您已经定义了一个函数并且您正在立即调用它。

这种形式对于信息隐藏和封装很有用，因为您在该函数中定义的任何内容都保留在该函数的本地，并且无法从外部世界访问（除非您专门公开它 - 通常通过返回的对象文字）。

这种基本形式的一种变体是您在 jQuery 插件（或通常在此模块模式中）中看到的。由于您正在定义函数文字，因此除非您明确传递信息，否则它无法访问外部世界的任何内容。因此：

```
(function($) {
  ...
})(jQuery); 
```

这意味着您正在传递对实际 jQuery 对象的引用，但它在函数字面量的范围内称为 $。

# jquery - jQuery 换行表格行

> ID：12202329
> 
> 赞同：1
> 
> 时间：2012-08-30T17:29:30.247
> 
> 标签：jquery, html-table

我正在尝试使用 jQuery 包装一组连续的表行，但是当我尝试定位它们时，它没有找到我期望的行。

```
$("tr.row1").next("tr:lt(4)").wrapAll("<tr class='wrapped'><td><table></table></td></tr>");​ 
```

我不知道如何正确解释这一点，所以请看这个例子：http: [//jsfiddle.net/uqp6H/](http://jsfiddle.net/uqp6H/)

它不是包装 row2、row3、row4 和 row5，而是包装接下来的四个 row2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:48:40.300

```
​$('tr.row2').each(function() {
    $(this).nextUntil('tr.row5 + *').andSelf().wrapAll("<tr class='wrapped'><td colspan='3'><table></table></td></tr>");
});​​​​​​​​​​​​​​​​​ 
```

这从第 2 行到第 5 行。（它还将包装器的 colspan 设置为 3 - 如果您需要的话）。

[http://jsfiddle.net/g59mg/](http://jsfiddle.net/g59mg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:50:30.797

这应该选择您需要的行，但是您的包装元素会破坏结构

作为测试，我只是选择了前四行并将红色应用到它们，效果很好。

```
$("table").each(function(){
    $("tr",this).slice(1,5).css('color','red')
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:51:24.070

```
$('table').each(function(){
    $("tr:gt(0)",this).wrapAll("<tr class='wrapped'><td colspan='3'><table></table></td></tr>");  
}) 
```

# perl - perl如何用两个替换一个字符的出现

> ID：12202330
> 
> 赞同：2
> 
> 时间：2012-08-30T17:29:35.070
> 
> 标签：perl, character, substitution

我想用两个字符翻译一个字符的所有实例。我会这样做的通常方法是：

```
$text =~ s/a/aa/g; 
```

我只希望一个字符的单个实例加倍。所以`aa`会留下`aa`而不变成`aaaa`。

我想我必须在`s///`语句中使用变量，但我在这里或网上找不到任何合适的模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:30:55.897

`a`不相邻的匹配实例`a`：

```
s/(?<!a)a(?!a)/aa/g; 
```

# objective-c - @end 必须出现在 Objective-C 上下文中

> ID：12202332
> 
> 赞同：0
> 
> 时间：2012-08-30T17:29:54.473
> 
> 标签：objective-c, appearance

我正在学习[http://www.raywenderlich.com/14172/how-to-parse-html-on-ios](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)上的教程。

这是我的 detailviewcontroller.h 文件。

```
#import <UIKit/UIKit.h>

    @end <-- //errors shows up here.

    @interface DetailViewController : UIViewController

    @property (strong, nonatomic) id detailItem;

    @property (weak, nonatomic) IBOutlet UILabel *detailDescriptionLabel;
    @end 
```

这是我的 detailview.m 文件

```
#import "DetailViewController.h"

@interface DetailViewController ()
- (void)configureView;
@end

@implementation DetailViewController

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.detailDescriptionLabel.text = [self.detailItem description];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Detail", @"Detail");
    }
    return self;
}

@end 
```

正如我上面提到的，@end 错误消息出现并在红色方块中等待自动修复，我同意进行自动修复。然后 xCode 在那里应用 @end 代码，如 .h 文件中所示。然后出现另一个错误，如标题“@end 必须出现在objective-c 上下文中”

我应该怎么办 ？xCode是疯了还是什么。

怎么了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:16:42.333

In my case, somewhere along the line I missed a @end in one of the .h file. So all files that import that .h file is prompting this error. The funny thing is, I don't receive this error message on the one .h file that does miss the @end. So I guess you need to do some searching make sure you close all your @interface, @implementation or @protocol with @end. Hope that helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:54:55.610

只需先删除它`@end`。这是完全错误的。您只能`@end`在`@implementation`、`@interface`或`@protocol`声明之后。

# c# - 如何从 C# 中的非托管内存中读取数据？

> ID：12202334
> 
> 赞同：5
> 
> 时间：2012-08-30T17:30:00.273
> 
> 标签：c#, c++, interop, unmanaged

我想从C++ 中创建`Foo`的非托管结构数组中创建 C# 中的对象。`Foo`这就是我认为它应该工作的方式：

在 C++ 方面：

```
extern "C" __declspec(dllexport) void* createFooDetector()
{
    return new FooDetector();
}

extern "C" __declspec(dllexport) void releaseFooDetector(void* fooDetector)
{
    FooDetector *fd = (FooDetector*)fooDetector;
    delete fd;
}

extern "C" __declspec(dllexport) int detectFoo(void* fooDetector, Foo **detectedFoos)
{
    FooDetector *fd = (FooDetector*)fooDetector;
    vector<Foo> foos;
    fd->detect(foos);

    int numDetectedFoos = foos.size();
    Foo *fooArr = new Foo[numDetectedFoos];
    for (int i=0; i<numDetectedFoos; ++i)
    {
        fooArr[i] = foos[i];
    }

    detectedFoos = &fooArr;

    return numDetectedFoos;
}

extern "C" __declspec(dllexport) void releaseFooObjects(Foo* fooObjects)
{
    delete [] fooObjects;
} 
```

在 C# 方面：（我省略了一些花哨的代码，使得可以从 C# 中调用 C++ 函数以获得更好的可读性）；

```
List<Foo> detectFooObjects()
{
    IntPtr fooDetector = createFooDetector();

    IntPtr detectedFoos = IntPtr.Zero;
    detectFoo(fooDetector, ref detectedFoos);

    // How do I get Foo objects from my IntPtr pointing to an unmanaged array of Foo structs?

    releaseFooObjects(detectedFoos);

    releaseFooDetector(fooDetector);
} 
```

但我不知道如何从`IntPtr detectedFoos`. 应该有可能……有什么提示吗？

**更新**

假设`Foo`是一个简单的检测矩形。

C++：

```
struct Foo
{
    int x;
    int y;
    int w;
    int h;
}; 
```

C＃：

```
[StructLayout(LayoutKind.Sequential)]
public struct Foo
{
    public int x;
    public int y;
    public int width;
    public int height;
} 
```

是否可以在释放非托管内存之前从非托管内存中读取并从中创建新的托管对象？

我不知道如何`Foo`检测到对象，所以我不知道在调用`detectFoo()`. 这就是为什么我在 C++ 中分配/释放内存并传递一个指向它的指针。但不知何故，我无法`detectedFoo`在 C# 下检索 s 指针地址。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:48:26.820

`Foo`您必须在您的 C# 项目中重新声明。假设您知道 s 的计数`Foo`和您的值，`sizeof(Foo)`您应该能够一次使用一个`System.Runtime.Interopservices.Marshal.PtrToStructure()`来检索您的`Foo`结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:49:28.393

您必须在 C# 中再次定义您的结构，这取决于您的结构。您的结构必须是 blitable （C# struct ave 的内存布局与 C 结构的内存布局相同）

看看“编组结构”

或者发布你真正的“Foo”结构，我可以给你看 C# 版本

**更新：**

因为您的结构似乎是 blitable，您可以简单地将指向非托管内存的指针转换为指向 c# 中定义的结构的指针：

如果您的应用程序可以使用不安全代码，您可以编写：

```
unsafe List<Foo> detectFooObjects()
{
 List<Foo> res = new List<Foo>()
IntPtr fooDetector = createFooDetector();

IntPtr detectedFoos = IntPtr.Zero;
int nNumFoos = detectFoo(fooDetector, ref detectedFoos );
for(int i=0;i<nNumFoos;i++)
{
   Foo** ppDetectedFoos = detectedFoos.ToPointer();

   Foo* pFoo = *ppDetectedFoos
   res.Add(*pFoo); //copies the struct because is a struct
   ppDetectedFoos++:
}

releaseFooObjects(detectedFoos);

releaseFooDetector(fooDetector);
return res;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:20:36.473

我最终通过使用 C++/CLI 包装类解决了我的问题。

# java - CXF Web 服务 JMX 端口分配

> ID：12202336
> 
> 赞同：1
> 
> 时间：2012-08-30T17:30:13.830
> 
> 标签：java, cxf, jmx, jconsole

我们有许多在 Tomcat 下运行的 CXF Web 服务。对于每个服务，都有一个 beans 配置文件，每个服务都有一个类似下面的条目。变量 ${JMX.PORT} 在运行时被分配的端口替换。每个服务都有一个单独的端口。我到处寻找，但无法确认这是正确的。但是，我确实知道，两个或多个服务使用相同的端口会导致启动问题。所以，我正在寻找确认每个服务都应该有自己的端口。注意 - 当我使用 JConsole 远程查看服务时，使用诸如**service:jmx:rmi:///jndi/rmi:/192.168.29.35:9912/jmxrmi 之**类的连接字符串，我还可以看到*另一个*服务，即使它们有不同的端口分配。这是没有意义的，除非有某种共享资源。谁能帮我理解这一点？谢谢！

```
 <bean id="org.apache.cxf.management.InstrumentationManager" class="org.apache.cxf.management.jmx.InstrumentationManagerImpl">

<property name="bus" ref="cxf" /> 
<property name="enabled" value="true" />
<property name="threaded" value="false" /> 
<property name="daemon" value="false" /> 
<property name="usePlatformMBeanServer" value="true"/> 
<property name="JMXServiceURL" value="service:jmx:rmi:///jndi/rmi://localhost:${JMX.PORT}/jmxrmi" /> 

    </bean> 
```

# c# - ASP.NET 更新 SQL

> ID：12202338
> 
> 赞同：1
> 
> 时间：2012-08-30T17:30:19.213
> 
> 标签：c#, asp.net, sql-server

我有一个带有名册/信息的 SQL Server。我想用仰卧起坐、俯卧撑和 Id 更新表格。我知道如何将信息插入到表中，但在更新部分遇到问题。

这是我的代码：

```
SqlConnection conns = new SqlConnection(ConfigurationManager.ConnectionStrings["TestDBConnectionString1"].ConnectionString);
SqlCommand cmd = new SqlCommand("UPDATE test SET SitUps = @SitUps, pushUps = @pushUps WHERE (Id = @Id)", conns);
cmd.CommandType = CommandType.Text;

Label sitL = ((Label)FormView2.FindControl("SitUpsLabel"));
Label pushL = ((Label)FormView2.FindControl("pushUpsLabel"));
Label IdL = ((Label)FormView2.FindControl("IdLabel"));

cmd.Parameters.AddWithValue("@SitUps", sitL.Text);
cmd.Parameters.AddWithValue("@pushUps", pushL.Text);
cmd.Parameters.AddWithValue("@Id", IdL.Text); 
```

我收到此错误

> *System.NullReferenceException：对象引用未设置为对象的实例。*

我很确定这是我对待`Id`价值的方式。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:48:02.050

1.  确保您在此处声明的 3 个 id，“SitUpsLabel”、“pushUpsLabel”和“IdLabel”与您在表单视图中的相同。

2.  我注意到“IdL”颜色很奇怪，请尝试使用其他变量名。您可能会将“IdL”用于其他目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:42:17.023

最有可能的是 FormView2.FindControl 返回 null，请检查控件的实际 ID。你怎么确定这段代码会引发异常？好像你没有调试代码（否则你会知道确切的线路和原因），所以我建议这样做=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:34:10.507

在将值分配给 cmd.Parameters 之前，首先检查它们是否为空。例子：

```
if( sitL != null )
{
    cmd.Parameters.AddWithValue("@SitUps", sitL.Text);
}
// In this way add the all parameters. 
```

发生错误`System.NullReferenceException`是因为未找到您的控件之一并且它包含 null。

# python - 遍历 DynamoDB 表中的所有项目

> ID：12202340
> 
> 赞同：10
> 
> 时间：2012-08-30T17:30:23.393
> 
> 标签：python, amazon-web-services, amazon-dynamodb

我正在尝试遍历我的 DynamoDB 表中的所有项目。（我知道这是一个低效的过程，但我这样做是为了构建一个索引表。）

我了解 DynamoDB 的 scan() 函数返回 1MB 或提供的限制中的较小者。为了弥补这一点，我编写了一个函数来查找“LastEvaluatedKey”结果并从 LastEvaluatedKey 开始重新查询以获取所有结果。

不幸的是，似乎每次我的函数循环时，整个数据库中的每一个键都会被扫描，很快就会耗尽我分配的读取单元。它非常慢。

这是我的代码：

```
def search(table, scan_filter=None, range_key=None,
           attributes_to_get=None,
           limit=None):
    """ Scan a database for values and return
        a dict.
    """

    start_key = None
    num_results = 0
    total_results = []
    loop_iterations = 0
    request_limit = limit

    while num_results < limit:
        results = self.conn.layer1.scan(table_name=table,
                                  attributes_to_get=attributes_to_get,
                                  exclusive_start_key=start_key,
                                  limit=request_limit)
        num_results = num_results + len(results['Items'])
        start_key = results['LastEvaluatedKey']
        total_results = total_results + results['Items']
        loop_iterations = loop_iterations + 1
        request_limit = request_limit - results['Count']

        print "Count: " + str(results['Count'])
        print "Scanned Count: " + str(results['ScannedCount'])
        print "Last Evaluated Key: " + str(results['LastEvaluatedKey']['HashKeyElement']['S'])
        print "Capacity: " + str(results['ConsumedCapacityUnits'])
        print "Loop Iterations: " + str(loop_iterations)

    return total_results 
```

调用函数：

```
db = DB()
results = db.search(table='media',limit=500,attributes_to_get=['id']) 
```

我的输出：

```
Count: 96
Scanned Count: 96
Last Evaluated Key: kBR23QJNAwYZZxF4E3N1crQuaTwjIeFfjIv8NyimI9o
Capacity: 517.5
Loop Iterations: 1
Count: 109
Scanned Count: 109
Last Evaluated Key: ATcJFKfY62NIjTYY24Z95Bd7xgeA1PLXAw3gH0KvUjY
Capacity: 516.5
Loop Iterations: 2
Count: 104
Scanned Count: 104
Last Evaluated Key: Lm3nHyW1KMXtMXNtOSpAi654DSpdwV7dnzezAxApAJg
Capacity: 516.0
Loop Iterations: 3
Count: 104
Scanned Count: 104
Last Evaluated Key: iirRBTPv9xDcqUVOAbntrmYB0PDRmn5MCDxdA6Nlpds
Capacity: 513.0
Loop Iterations: 4
Count: 100
Scanned Count: 100
Last Evaluated Key: nBUc1LHlPPELGifGuTSqPNfBxF9umymKjCCp7A7XWXY
Capacity: 516.5
Loop Iterations: 5 
```

这是预期的行为吗？或者，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:19:12.363

### 简短的回答

你没有做错任何事

### 长答案

这与亚马逊计算容量单位的方式密切相关。首先，了解以下内容非常重要：

*   `capacity units == reserved computational units`
*   `capacity units != reserved network transit`

好吧，即使严格来说，这也不是完全准确的，而是非常接近，尤其是在涉及到`Scan`.

在`Scan`手术过程中，两者之间存在根本区别

*   **扫描项目**：累积大小*最多*`limit`为 1MB，如果已经达到，则可能低于该大小
*   **返回的项目**：**扫描项目****中**的 所有**匹配**项目

 ****由于`capacity unit`是一个计算单元，您需要为**扫描的 Items*****付费***。好吧，实际上，您需要为扫描项目的累积尺寸付费。请注意，此大小包括所有存储和索引开销......**`0.5 capacity / cumulated KB`**

 **扫描的大小不依赖于任何过滤器，无论是字段选择器还是结果过滤器。

从您的结果来看，我猜您的 Items 每个都需要约 10KB，您对其实际有效负载大小的评论往往会证实这一点。

### 另一个例子

我有一个只包含非常小的元素的测试表。一次扫描仅消耗`1.0`容量单位来检索 100 个项目，因为`cumulated size < 2KB`******

# java - Java 错误：找不到符号方法 add(Date,int)

> ID：12202342
> 
> 赞同：-2
> 
> 时间：2012-08-30T17:30:27.427
> 
> 标签：java, compiler-errors

```
I have this code:
import javax.swing.JOptionPane;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.*;
import java.text.*;

    public class BillionSeconds {

        public static void main(String[] args)
        {
            Date thedate ;

            String Birthday = JOptionPane.showInputDialog("What is your birthday in the form dd-MM-yy");

            DateFormat dateFormat = new SimpleDateFormat("dd/MMM/yy");
            try{
            thedate = dateFormat.parse(Birthday);
            }
            catch (Exception e) {
                System.out.println("Unable to parse date stamp");
            }
            Date newdate = thedate.add(thedate, 1);
        }
    } 
```

但我得到这个错误，我不知道为什么：

```
error: cannot find symbol method add(Date,int) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:32:33.517

正如它所说，java.util.Date 中没有`add`方法。你可能想看看[`GregorianCalendar`](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html)。它具有您需要的智能方法。或者更好的是，使用第三方库[JodaTime](http://joda-time.sourceforge.net)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:32:51.517

`add(thedate, 1);`

在**not** ...中有一个 add()**方法。**`Calendar Class` **`Date class`**

 ****例如：**

`Calendar desiredDate = toDay.add(Calendar.DATE, 4);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:33:08.983

是的，那是因为[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)没有`add`方法。是什么让你认为它做到了？

听起来您*可能*正在考虑这[`Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)门课，尽管那时您会想要：

```
Calendar nextDay = currentDay.add(Calendar.DATE, 1); 
```

......这不完全一样。

我*强烈*建议您完全放弃`Date`，`Calendar`而是开始使用[Joda Time](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)，这是一个更好的日期/时间 API。

请注意，由于您的“捕获并继续”错误处理，您*还*应该得到一个编译时错误，说明`thedate`可能尚未初始化。**

# iphone - iPhone Restkit - 按下后退按钮后加载数据时出错

> ID：12202343
> 
> 赞同：0
> 
> 时间：2012-08-30T17:30:30.757
> 
> 标签：iphone, objective-c, ios, ipad, restkit

我发现像我的问题答案一样，但我的应用程序仍然无法正常工作。

我将视图从控制器 1 推送到控制器 2。在控制器 2 Restkit 加载数据但未加载时，我快速按下返回按钮到控制器 1，几秒钟后应用程序崩溃（Restkit 加载数据）。

我使用ARC。

请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:42:26.697

发生这种情况是因为 RestKit 继续网络活动，然后找不到您的控制器，因为它已经关闭并且它在内存中的位置被释放。我建议添加一些逻辑以防止用户在 RestKit 加载数据时回击，或者取消所有未决的网络请求，如 mja 建议的。

一种方法是将以下行添加到`viewDidUnload`：

```
[[[[RKObjectManager sharedManager] client] requestQueue] cancelRequestsWithDelegate:self]; 
```

# tfs - TFS 2012根据权限隐藏工作项字段的内容

> ID：12202344
> 
> 赞同：3
> 
> 时间：2012-08-30T17:30:35.673
> 
> 标签：tfs, hide

有没有办法根据角色隐藏字段的内容？

我考虑过创建一个服务器端插件，如果用户无权查看该字段并在保存时重新填充它，该插件会清空该字段。但我不知道该怎么做，我没有找到任何可以使用的事件。任何想法？

我的第一个意图是使用 EMPTY 规则，但这确实会清除内容并且不会重新填充它。我们也不能接受 READONLY 规则。你有什么主意吗？

我知道这已经被要求[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2088177-add-ability-to-hide-mask-fields-in-a-work-item-bas](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2088177-add-ability-to-hide-mask-fields-in-a-work-item-bas)但是我现在需要这个功能。

我还考虑过创建一个存储隐藏字段的工作项并将其链接到另一个工作项，但这不是我想要的解决方案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:08:53.957

唯一的方法是创建一个自定义工作项控件。如果用户具有正确的权限，则该控件只能显示值的内容。但它不会阻止通过 Excel、工作项查询或批量更新等其他工具查看/更新数据。

正如关于用户语音的建议所暗示的那样，今天在 TFS 中是不可能的。因此，请投票并确保 Team Foundation Server 团队知道它对我们的许多客户来说是高优先级。

Ewald Hofman（项目经理，Team Foundation Server）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T22:43:09.510

在 VS 2013 中，当您使用空规则时，该字段消失了！您可以在 Scrum 模板中看到，当您将 de WIT 状态更改为 Done 时，Remaining Work 字段被隐藏

# java - JSON Parse: 解析数据时出错 org.json.JSONException: End of input character 0 of

> ID：12202350
> 
> 赞同：1
> 
> 时间：2012-08-30T17:30:59.817
> 
> 标签：java, android, json

我面临 json 解析器错误，我不知道是什么原因导致它，因为有时它工作正常，有时错误只是弹出并且我的数据没有更新到数据库中。数据将被发布到 php 文件以加密并更新到数据库。有时它可以将数据插入数据库，当它不能时，它会显示 json 解析错误。

这是我的错误：

```
08-31 01:10:55.598: E/JSON Parser(360): Error parsing data org.json.JSONException: End of input at character 0 of 
```

这是我的代码：

```
String email = db.getEmail();
            String currentPassword = cpCurrentPassword.getText().toString();
            String newPassword = cpNewPassword.getText().toString();

                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("email", email));
                        params.add(new BasicNameValuePair(
                                "currentpassword", currentPassword));
                        params.add(new BasicNameValuePair("newpassword",
                                newPassword));
                                JSONObject json = jsonParser
                                        .makeHttpRequest(
                                                newpassword_url, "POST",
                                                params);

                                try {
                                    int success1 = json1
                                            .getInt(TAG_SUCCESS);
                                    if (success1 == 1) {    
                                        showToast("Password successfully changed!"); 
```

这是我的PHP：

```
<?php
// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['email']) && isset($_POST['newpassword'])){
$email = $_POST['email'];
$newpassword = $_POST['newpassword'];
}
// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

$result = mysql_query("UPDATE users SET encrypted_password = '$newpassword' WHERE email = '$email'");

// check if row inserted or not
if ($result) {
// successfully updated
$response["success"] = 1;
$response["message"] = "Password successfully changed";

// echoing JSON response
echo json_encode($response);
}
?> 
```

即使数据没有更新到数据库，我的成功标签仍然会响应 1。这是我不明白的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-17T14:59:24.127

尝试更改参数的名称。

```
// Building Parameters
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("email", email));
params.add(new BasicNameValuePair("currentpassword", currentPassword));
params.add(new BasicNameValuePair("newpassword", newPassword)); 
```

有了这个

```
// Building Parameters
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("email1", email));
params.add(new BasicNameValuePair("currentpassword1", currentPassword));
params.add(new BasicNameValuePair("newpassword1", newPassword)); 
```

并在 php 代码中更改它

```
$email = $_POST['email1'];
$newpassword = $_POST['newpassword1']; 
```

让我们看看这是否有效

# java - “响应已提交”错误 - chain.doFilter()

> ID：12202351
> 
> 赞同：-1
> 
> 时间：2012-08-30T17:31:03.710
> 
> 标签：java, jsp, servlets, redirect, servlet-filters

我想通过登录页面授权用户。我创建了一个登录页面，`login.jsp`它有登录表单。当我提交表单时，它的值被重定向到检查 servlet，如果用户有效，则 servlet 设置会话 UserName。

我通过过滤器拦截此请求并希望在之后重定向页面，`chain.doFilter`但我收到一条错误消息，表明响应已提交。问题是什么 ？

```
HttpServletRequest req=(HttpServletRequest) request;
HttpServletResponse res=(HttpServletResponse) response;

if(req.getRequestURI().contains("/ShowHome"))  {

  chain.doFilter(req, res);

  if(req instanceof HttpServletRequest) {

      boolean authorized=false;

      HttpSession session= req.getSession(false);

      if(session!=null) {
        if(session.getAttribute("UserName")!=null) {
          authorized=true;
        }
      } else {
        authorized=false;
      }

    if(authorized) {
      System.out.println("You are authorized user ");
      res.sendRedirect("/FilterAuth/welcome.jsp");
    } else {
      System.out.println("authentication failed ! ");

      try {
        //response.flushBuffer();

        RequestDispatcher disp= request.getRequestDispatcher("/index.jsp");
        disp.forward(request, response);
        return;
      } catch(Exception e) {
          e.printStackTrace();
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:35:12.087

理想情况下，在 servlet 之前调用 servlet 过滤器应该执行授权操作。一旦成功，应该通过 chain.doFilter(req, res) 传递调用。

res.sendRedirect() 不应在 servlet 过滤器中调用。这仅表明响应已提交。

web.xml 中的正确映射可确保在调用 servlet 之前调用所需的过滤器。稍后在 servlet 中，如果需要任何重定向，则可以实现。

# c# - Prism RegionManager：如何从当前视图导航？

> ID：12202357
> 
> 赞同：1
> 
> 时间：2012-08-30T17:31:29.097
> 
> 标签：c#, wpf, prism

为了将 Prism 模块的视图加载到 WPF 应用程序区域

```
<ContentControl Name="MainRegion" prism:RegionManager.RegionName="MainRegion"/> 
```

我可以使用`regionManager.RequestNavigate`：

```
this.regionManager.RequestNavigate(RegionNames.MainContentRegion, toViewUri); 
```

有时我只需要从`MainRegion`（清除所有内容）中删除模块的视图。如果我这样做，`this.MainRegion.Content = null;`那么一切都很好，除了我无法导航到上一个视图，直到我导航到另一个视图。

**如何从当前视图正确导航而不导航到任何其他视图？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:29:18.390

您是否尝试过其中任何一个？

```
regionManager.Regions[RegionNames.MainContentRegion].Remove(view)
regionManager.Regions[RegionNames.MainContentRegion].Deactivate(view) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:02:24.333

[`IRegion.Remove`](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.iregion.remove%28v=pandp.40%29)正是这样做的。

# jquery - 多次调用 Jqueryui 可排序接收事件

> ID：12202364
> 
> 赞同：3
> 
> 时间：2012-08-30T17:31:54.783
> 
> 标签：jquery, jquery-ui, jquery-plugins

所以我有一个嵌套的 jqueryui 可排序和一个可拖动的项目，我可以将副本拖动到任何可排序的级别。

在此处查看 jsfiddle [http://jsfiddle.net/rmossuk/JUnA7/4/](http://jsfiddle.net/rmossuk/JUnA7/4/)

*   产品
*   *   项目1
*   *   项目2
*   *   第 3 项
*   *   *   项目5
*   *   *   第6项
*   *   项目4

> 新物品

问题是当我将 NewItem 拖入嵌套可排序（ Item3 ）时，接收事件被调用 3 次。一次用于可排序的产品，出于某种原因两次用于可排序的 Item3 !!??

我需要它以便只调用 Item3 可排序接收事件而不是其他 2。

请问有人知道怎么做吗？？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:03:40.010

嘿，如果您可以在使用 ol 和 li 上妥协，我更改了您的代码 如果它适用于您，请尝试一下此代码

HTML

```
 <div class="container">Product1
    <ol class="sortable">
        <li>Item1</li>
        <li>Item2</li>
        <li name="to item3">Item3
           <ol>
                <li class="inner">Item5</li>   
                <li class="inner">Item6</li>  
           </ol>              
        </li>
        <li>Item4</li>
        <li name="new item moved">New Item</li>
    </ol>
 </div> 
```

查询

```
 $(document).ready(function(){
    $('ol.sortable').nestedSortable(
        {
            disableNesting: 'no-nest',
            forcePlaceholderSize: true,
            handle: 'div',
            items: 'li',
            opacity: .6,
            placeholder: 'placeholder',
            revert: 250,
            tabSize: 25,
            tolerance: 'pointer',
            toleranceElement: '> div',
            connectWith: '.sortable',
            stop: function(event, ui){
                var element = $(ui.item).attr("name");
                var parent = $(ui.item).parent().attr("name");
                alert(element);
                alert(parent);
           }
        });
   }); 
```

CSS

```
li {
   margin-left: 10px;
   margin-top: 10px;
}
.inner{
   margin-left: 40px;
} 
```

不要忘记包含 nestedsortable.js 和最新的 Jquery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:25:55.520

该错误是由于 div.sortable 嵌套在另一个 div.sortable 中的结果，因此当您放入新元素时它会触发两次排序。我想出的解决方法只是计算在特定拖放中添加的元素数量，并将一个名为“deleteMe”的类添加到重复项中。

然后，您只需在排序结束时调用 $(".deleteMe").remove() 即可删除额外内容。

不理想，但似乎对我有用。 [http://jsfiddle.net/JUnA7/72/](http://jsfiddle.net/JUnA7/72/)

```
$(function() {
    var dropCount=0;
    $(".sortable").sortable({
        connectWith: ".sortable",
        cursor: 'pointer',
        receive: function(event, ui) {
            dropCount=dropCount+1;
            if(dropCount>1)
                $(ui.item).addClass("deleteMe");
            console.log(dropCount);
        },
        start: function(event, ui) {
            dropCount=0;   
            var placeholders=0;
            $(".ui-sortable-placeholder").each(function(){
                placeholders=placeholders+1;                
                if(placeholders>1)
                    $(this).height(0);
            });
        },
        stop: function(event, ui) {
            $(".deleteMe").remove();
            dropCount=0;   
        }
    });
    $(".draggable").draggable({
        handle: ".icon-move",
        connectToSortable: ".sortable",
        appendTo: "body",
        helper: 'clone',
        distance: 30
    });
});​ 
```

**更新**

另外，我注意到排序占位符也是重复的..所以我通过将它们的高度设置为 0px 来删除重复项。

```
 start: function(event, ui) {
        dropCount=0;   
        var placeholders=0;
        $(".ui-sortable-placeholder").each(function(){
            placeholders=placeholders+1;                
            if(placeholders>1)
                $(this).height(0);
        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:42:33.987

我认为您需要防止事件传播，例如：

```
 event.stopPropagation(); 
```

我使用 jsfiddle 在几个地方快速尝试了它，但它没有立即工作，因此您可能需要编写更多代码。

# javascript - 缩放功能

> ID：12202365
> 
> 赞同：1
> 
> 时间：2012-08-30T17:31:56.483
> 
> 标签：javascript, jquery, asp.net, html, internet-explorer

我的页面上有一张静态背景图片。有一个工具栏，我可以从中将图像拖放到上面讨论的静态背景图像上。现在我需要缩放背景图像的能力，但同时拖放到背景图像顶部的图像也应该缩放并相应地移动它们的位置，就像它只是一个单一的图像一样我在工作。我只需要为 IE 浏览器完成这项工作。我已经尝试过 -ms-zoom 但是拖放的图像似乎根本没有改变它们的位置，因为它们是绝对定位的。Zoom 内置的浏览器似乎工作得很好，但我们的客户需要页面上的自定义链接来放大和缩小，因为我们只需要页面的特定部分来缩放而不是整个页面。

有什么办法可以完成这个要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:23:44.270

一个简单的`zoom`应该像你描述的那样工作。尝试这个：

```
<script>
a=100;
</script>
</head>
<body>
<div id="div" style="position:absolute;z-index:-1;top:50px;left:0px;width:400px;
    height:400px;background:url(some_image.jpg)"
>
    <img src="another_image.png" style="position:absolute; top:50px;left:50px;" />
</div>
<button onclick="a+=50;document.getElementById('div').style.zoom=a+'%';">
Zoom
</button> 
```

# java - 模拟列表中的 Mockito 问题

> ID：12202366
> 
> 赞同：0
> 
> 时间：2012-08-30T17:32:05.997
> 
> 标签：java, mockito

我想模拟一个列表

```
private Item populateData(Item i) {
    List<Person> groupIdList = xyzDao.getData(id);
    for (Person p: groupIdList) {

    }
} 
```

我想通过模拟 groupIdList 来测试该功能如何执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:36:57.163

Mockito 官方文档有点误导。你不应该模拟列表（没有太多逻辑的数据容器），你应该模拟行为。在你的情况下`xyzDao.getData(id)`是行为。模拟`xyzDao`并返回一些虚假数据：

```
//given
XyzDao xyzDaoMock = mock(xyzDao);
//inject to XyzService class under test
given(xyzDaoMock.getData(id)).willReturn(Arrays.asList(...));

//when
xyzService.populateData()  //...XyzService uses mocked XyzDao

//then 
```

在*then*部分中，您应该调用或确保返回正确的列表`verify()`。`xyzDao`根据您的代码片段很难说出您需要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:52:44.483

或 Tomasz 答案的非 BDD 版本（但如果合适，请接受他对我的回答）：

```
XyzDao xyzDaoMock = mock(xyzDao);
when(xyzDaoMock.getData(id)).thenReturn(Arrays.asList(...));

xyzService.populateData()  //...XyzService uses mocked XyzDao 
```

# android - 如何在 Button 上设置图像并在 Android 上通过 xml 添加圆角？

> ID：12202367
> 
> 赞同：0
> 
> 时间：2012-08-30T17:32:07.830
> 
> 标签：android, xml, image, button

我已经找到了几个关于如何通过活动做到这一点的解决方案，但我更愿意坚持使用 xml 进行布局和图形。

我想在具有圆角边缘而不是普通默认角的按钮上设置图像。

XML 样本：

```
<ImageView
                android:id="@+id/featuredimage"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:clickable="true"
                android:background="@drawable/rounded"
                android:src="@drawable/budlight_sample"
                android:scaleType="centerCrop" /> 
```

圆角.XML

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >

    <corners
        android:bottomLeftRadius="10dp"
        android:bottomRightRadius="10dp"
        android:topLeftRadius="10dp"
        android:topRightRadius="10dp" >
    </corners>

</shape> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:40:31.717

使用 shape drawable 作为圆角，在应用的 drawable 文件夹中定义一个 rounded.xml。

```
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape=["rectangle" | "oval" | "line" | "ring"] >
    <corners
        android:radius="integer"
        android:topLeftRadius="integer"
        android:topRightRadius="integer"
        android:bottomLeftRadius="integer"
        android:bottomRightRadius="integer" />
</shape> 
```

参考：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

在您的 layout.xml 文件中，使用 rounded.xml 作为视图的背景。

```
android:background="@drawable/shape" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:34:28.677

在 xml 文件中绘制一个形状，然后调用它。

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 
     <gradient android:startColor="#Anycolor" android:endColor="#Anycolor" 
            android:angle="90"/> 

    <corners android:bottomRightRadius="10dp" android:bottomLeftRadius="10dp" 
     android:topLeftRadius="10dp" android:topRightRadius="10dp"/> 
</shape> 
```

另一种选择是使用 draw9patch。但是，您必须为此创建一个自定义图像按钮。使用上面的代码要容易得多。

# param - 当按下 bean 2 的命令按钮时，使用 f:param 从一个 bean 传递值会丢失值

> ID：12202370
> 
> 赞同：1
> 
> 时间：2012-08-30T17:32:17.893
> 
> 标签：param, view-scope

在两个 bean 上使用 ViewScope 我通过 commandLink 使用 f:param 将值从一个 bean (browseUsers) 传递到另一个 bean，但在 bean 2 (editUsers) 上，当在构造函数上按下命令按钮并且所有值都丢失时。请指教。

browseUsers.xhtml 上的 commandlink 和 datatable 代码：

```
<h:form id="form">  
    <p:dataTable id="dataTable" var="users" value="#{browseUsers.userList}" rowKey="#{users.firstName}" widgetVar="usersTable" paginator="true" paginatorAlwaysVisible="false" rows="10"  
            filteredValue="#{browseUsers.filteredUser}" emptyMessage="No users found with given criteria">

     <f:facet name="header">                  
        <p:outputPanel>  
            <h:outputText value="Search all fields" />                  
            <p:inputText id="globalFilter" onkeyup="usersTable.filter()" style="width:150px" />  
        </p:outputPanel>
     </f:facet>         
     <p:column  style="width:40px">                    
     <h:panelGrid columns="3" styleClass="actions" cellpadding="2">           
             <p:commandLink  action="#{browseUsers.editUser}"  title="View">
             <p:graphicImage styleClass="ui-icon ui-icon-pencil" style="display: inline-block;"/>               
             <h:outputText value="#{users.id}" />
               <f:param name="userId" value="#{users.id}" />                                
             </p:commandLink>
         </h:panelGrid>
        </p:column>     
     <p:column id="firstNameColumn" filterBy="#{users.firstName}" sortBy="#{users.firstName}" headerText="First Name" filterMatchMode="contains">
        <h:outputText value="#{users.firstName}" />
    </p:column>  

      <p:column id="lastNameColumn" filterBy="#{users.lastName}" sortBy="#{users.lastName}" headerText="Last Name" filterMatchMode="contains">
        <h:outputText value="#{users.lastName}" />  
    </p:column>

    <p:column id="userNameColumn" filterBy="#{users.userName}" sortBy="#{users.userName}" headerText="Username" filterMatchMode="contains">  
        <f:facet name="header">  
            <h:outputText value="Username" />  
        </f:facet>  
        <h:outputText value="#{users.userName}" />    
    </p:column>

    </p:dataTable> 
```

editUsers.xhtml 上的命令按钮代码如下：

```
 <h:form id="saveForm">                                          
       <p:panelGrid id="display" columns="2" cellpadding="4" tableStyle="width:auto">                      
           <h:outputText value="First Name:" />  
           <h:inputText value="#{editUsers.selectedUser.firstName}" id="firstName"/>

            <h:outputText value="Last Name:" />
           <h:inputText value="#{editUsers.selectedUser.lastName}" id="lastName"/>  

           <h:outputText value="Username:" />
           <h:inputText value="#{editUsers.selectedUser.userName}" id="userName"/>

           <h:outputText value="Password:" />
           <h:inputText value="#{editUsers.selectedUser.password}" id="password"/>

         <p:commandButton value="Reset" type="reset" /> 
      <p:commandButton value="Submit" actionListener="#{editUsers.saveUser}" action="#{editUsers.browseUser}" ajax="false" />

       </p:panelGrid>          
        </h:form> 
```

editUsers.java 上的 bean 方法如下：

```
@ManagedBean(name = "editUsers") 
```

@ViewScoped

公共类editUsers实现可序列化{

```
private List<User> userList; 

private User selectedUser;  

private Long userId;

public editUsers() 
{  

    AdminFacadeRemote afr = ContextUtil.contextLookup(AdminFacadeRemote.class, AdminFacade.class);

    setSelectedUser(new User());
}

@PostConstruct  
public void initialize()
{       

    String s = JSFContextUtil.getRequestParameter("userId");

    if (! StringUtils.isEmpty(s))           
    {
        userId = Long.parseLong(s);

        try {

            AdminFacadeRemote afr = ContextUtil.contextLookup(AdminFacadeRemote.class, AdminFacade.class);
            User u = afr.findUser(userId);
            setSelectedUser(u);
        }
        catch (Exception e){
            e.printStackTrace();
        }
    }
}
 public void saveUser(ActionEvent event)
{           

    AdminFacadeRemote afr = ContextUtil.contextLookup(AdminFacadeRemote.class, AdminFacade.class);

    afr.saveUsers(selectedUser);                      

}

public String browseUser()
{
    return "browseusers";
} 
```

# mysql - 查询结果表末尾的小计

> ID：12202371
> 
> 赞同：-1
> 
> 时间：2012-08-30T17:32:19.603
> 
> 标签：mysql, sql, sum, subtotal

我正在尝试在表格末尾获取已接受、已取消、未显示和已标记的小计...我尝试分组，但它会引发错误。有没有其他或简单的方法来做到这一点？

```
Select * From (
SELECT 
c.ComID, ISNULL(c.Client,'-') AS Driver_Name, GROUPING(c.MTNum) WHILE 1 THEN 'TOTAL' ELSE ISNULL(c.MTNum,'-'), ISNULL(Accepted,0) AS Accepted, ISNULL(Cancelled,0) AS Cancelled, ISNULL(NoShow,0) AS No_Show, ISNULL(Flagged,0) AS Flagged
FROM
(SELECT 
    HistoryLTD.CompanyID, HistoryLTD.Client, HistoryLTD.MTNum
FROM
    HistoryLTD
GROUP BY HistoryLTD.Client, HistoryLTD.CompanyID, HistoryLTD.MTNum) c
    LEFT JOIN
(SELECT 
    HistoryLTD.MTNum, count(HistoryLTD.MTNum) AS Cancelled
FROM
    HistoryLTD
WHERE
    HistoryLTD.Notes LIKE '%Cancelled%' AND TimeAssigned > '2011-08-28' AND TimeAssigned < '2011-08-30'
GROUP BY HistoryLTD.MTNum) c1 ON c.MTNum = c1.MTNum
    LEFT JOIN
(SELECT 
    HistoryLTD.MTNum, count(HistoryLTD.MTNum) AS NoShow
FROM
    HistoryLTD
WHERE
    HistoryLTD.Notes LIKE '%No Show%' AND TimeAssigned > '2011-08-28' AND TimeAssigned < '2011-08-30'
GROUP BY HistoryLTD.MTNum) c2 ON c.MTNum = c2.MTNum
    LEFT JOIN
(SELECT 
    HistoryLTD.MTNum, count(HistoryLTD.MTNum) AS Flagged
FROM
    HistoryLTD
WHERE
    HistoryLTD.Notes LIKE '%Flagged%' AND TimeAssigned > '2011-08-28' AND TimeAssigned < '2011-08-30'
GROUP BY HistoryLTD.MTNum) c3 ON c.MTNum = c3.MTNum
LEFT JOIN
(SELECT 
    HistoryLTD.MTNum, count(HistoryLTD.MTNum) AS Accepted
FROM
    HistoryLTD
where 
    Notes Not LIKE '%Cancelled%'
    OR Notes Not LIKE '%No Show%'
    OR Notes Not LIKE '%Flagged%'
    AND TimeAssigned > '2011-08-28' AND TimeAssigned < '2011-08-30'
GROUP BY HistoryLTD.MTNum) c4 ON c.MTNum = c4.MTNum ) firstQuery
UNION
Select Null, Null, 'Total', SUM(Accepted), SUM(Cancelled), SUM(No_Show), SUM(Flagged)
  FROM ??? 
```

结果我要找...

```
ComID   Client_Name mtNum   acc canc    noshow  Flgd
CTBV    Brian       3834    19  0   5   1
CTBV    Central     3863    5   0   0   5
CTBV    Charles     3815    25  0   2   5
CTBV    Chris       3842    14  0   0   0
CTBV    Chris       3864    17  0   1   0
CTBV    Cory        3829    15  0   1   1
               TOTAL        95  0   9   12   <-- This total at bottom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:47:21.670

1.  使用 UNION 组合两个查询，第一个查询将按组显示聚合，第二个查询将显示总数

2.  为确保总数位于底部，请按类似于以下的表达式进行排序：

    NULL 时按大小写 ComID 排序，然后 'ZZZZZZ' 否则 ComID 结束

# php - 使用 bash 或 php 获取文件夹层次结构

> ID：12202373
> 
> 赞同：1
> 
> 时间：2012-08-30T17:32:23.963
> 
> 标签：php, linux, bash

我正在使用我不熟悉的 linux 机器，所以我想从它的文件夹结构中得到一个 txt 打印。我记得曾经编写过一个在 php 中执行类似操作的脚本，但找不到它。我正在寻找以下任何可能帮助我完成此任务的内容：

*   一个 bash 脚本
*   现有的 linux 命令行
*   一个php脚本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:36:02.203

```
 find . -type d > dirstructure.txt 
```

但是，在典型的 linux 机器上，我宁愿不从目录根目录运行它。如果您这样做并获得了一些权限错误，您可以将错误发送到`/dev/null`

```
 find . -type d > dirstructure.txt 2> /dev/null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:42:27.460

又快又脏：

```
class Crawl_directory
{
    public $exclude = array();
    public $paths = array();
    public $tree = FALSE;
    public $tree_str = FALSE;
    public function __construct($path, $exclude = array())
{
        if ( !$path || !is_dir($path) )
            return FALSE;
        $this->exclude = array_merge(array(), $exclude);
        $this->tree = $this->crawl($path);
        $this->tree_str = $this->create_tree($this->tree);
}
    public function crawl($path)
    {
        $arr = array();
        $items = scandir($path);
        $this->paths[] = $path;
        foreach ( $items as $k => $v ) {
            if ( !in_array($v, $this->exclude) && $v != '.' && $v != '..' ) {
                if ( is_dir($path.'/'.$v) ) {
                    $arr[$v] = $this->crawl($path.'/'.$v);
                } else {
                    $arr[$v] = '';
                }
            }
        }
        return $arr;
    }
    function create_tree($arr)
    {
        $out = '<ul>'."\n";
        foreach ( $arr as $k => $v ) {
            $out .= '<li class="'.((is_array($v)) ? 'folder' : 'file').'">'.$k.'</li>'."\n";
            if ( is_array($v) ) {
                $out .= $this->create_tree($v);
            }
        }
        $out .= '</ul>'."\n";
        return $out;    
    }
    function get_tree()
    {
        return $this->tree; 
        }
    function print_tree()
    {
        echo $this->tree_str;   
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:38:25.890

试试这个？

```
ls -R | grep ":$" | sed -e 's/:$//' -e 's/[^-][^\/]*\//--/g' -e 's/^/   /' -e 's/-/|/' 
```

取自[http://www.centerkey.com/tree/](http://www.centerkey.com/tree/)

# objective-c - 为什么 cStringUsingEncoding：返回 const char * 而不是 char *？

> ID：12202374
> 
> 赞同：1
> 
> 时间：2012-08-30T17:32:25.657
> 
> 标签：objective-c, c, pointers, constants

cStringUsingEncoding：返回一个“const char *”，尽管它返回一个动态分配的 C 字符串（来自它的文档）。那么，这里 const 的目的是什么？我们可以通过转换为 char * 来简单地修改返回的 C 字符串。

> **cStringUsingEncoding：**
> 
> 保证返回的 C 字符串仅在接收器被释放或当前自动释放池被清空之前有效，以先发生者为准。

我认为库遵循指向常量的常见做法；预计不会被修改或发布。

> **来自 Objective-C 运行时；**
> 
> **const char *** object_getClassName(id obj) -- 没有指定返回的字符串。
> 
> **char *** method_copyArgumentType(Method method, unsigned int index) -- 您必须使用 free() 释放字符串。（可能是因为它正在返回副本而提供建议。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:42:47.743

常见的模式是您不应该修改不属于您的缓冲区。`const`文件并（在某种程度上）强制执行此操作。

至于`cStringUsingEncoding:`，文档说返回的缓冲区仅在您收到它的 NSString 或当前自动释放池的持续时间内有效。这意味着您*不*拥有返回的缓冲区，因为您不希望释放它。

运行时的最后两个示例遵循相同的约定：

*   `const char * object_getClassName(id obj)`

    不通知您应该释放缓冲区，并且名称不包含任何表明您拥有缓冲区的指示。因此`free()`，您不这样做，也不修改它。

*   `char * method_copyArgumentType(Method method, unsigned int index)`

    文档明确告诉您应该释放缓冲区，并且函数名称包含说明，`copy`这也意味着您拥有缓冲区。因此，您可以随心所欲地修改它，而且必须`free()`如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:42:25.090

事实是，结果是 const 因为

*   修改它不会改变字符串本身，并且 cString 实际上只是意味着字符串的不同表示
*   只要字符串没有改变，它可能会“一遍又一遍地”返回相同的 cString。

除此之外，即使实现不强制或要求接口设计人员可以做的事情，也将结果声明为 const ，也许是因为他希望以这种方式对待它。它为“const”有用的情况留下了优化的道路。

# php - Symfony2 / Doctrine 在类表继承中间映射超类

> ID：12202375
> 
> 赞同：11
> 
> 时间：2012-08-30T17:32:28.310
> 
> 标签：php, database, symfony, doctrine-orm

我目前的模型结构如下：

```
/**
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="related_type", type="string")
 * @ORM\DiscriminatorMap({"type_one"="TypeOne", "type_two"="TypeTwo"})
 */
abstract class BaseEntity {

    ... (all the usual stuff, IDs, etc)

    /**
     * @ORM\OneToMany(targetEntity="Comment", mappedBy="baseEntity")
     */
    private $comments;
}

/**
 * @ORM\Entity
 */
class TypeOne extends BaseEntity {
    /**
     * @ORM\Column(type="string")
     */
    private $name;

    /**
     * @ORM\Column(type="string")
     */
    private $description;
}

/**
 * @ORM\Entity
 */
class TypeTwo extends BaseEntity {
    /**
     * @ORM\Column(type="string")
     */
    private $name;

    /**
     * @ORM\Column(type="string")
     */
    private $description;   
}

/**
 * @ORM\Entity
 */
class Comment {

    ... (all the usual stuff, IDs, etc)

    /**
     * @ORM\ManyToOne(targetEntity="BaseEntity", inversedBy="comments")
     */
    private $baseEntity;
} 
```

这里的想法是能够将评论绑定到任何其他表。到目前为止，这一切似乎都运行良好（当然，我仍在探索设计选项，因此可能有更好的方法来做到这一点......），但我注意到的一件事是子类有一些共同的领域我想搬到一个共同的父类。我不想将它们移到 BaseEntity 中，因为会有其他对象是 BaseEntity 的子对象，但不会有这些字段。

我考虑过在中间创建一个 MappedSuperclass 父类，如下所示：

```
/**
 * @ORM\MappedSuperclass
 */
abstract class Common extends BaseEntity {
    /**
     * @ORM\Column(type="string")
     */
    private $name;

    /**
     * @ORM\Column(type="string")
     */
    private $description;       
}

/**
 * @ORM\Entity
 */
class TypeOne extends Common {}

/**
 * @ORM\Entity
 */
class TypeTwo extends Common {} 
```

我认为这会起作用，但是教义数据库模式生成器抱怨我不能在 MappedSuperclass 上进行 OneToMany 映射。我没想到这会成为问题，因为 OneToMany 映射仍在根 BaseEntity 和 Comment 表之间。我应该使用不同的结构，还是以其他方式使这些字段通用而不将它们添加到 BaseEntity 上？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T18:38:25.077

**从文档：**

> 映射的超类是一个抽象或具体的类，它为其子类提供持久的实体状态和映射信息， **但它本身并不是一个实体**。通常，这种映射超类的目的是定义多个实体类共有的状态和映射信息。

也就是说，您如何将一个实体与一个不存在的实体联系起来？

**更多来自文档：**

> 映射的超类不能是实体，**它不是可查询的**，并且由映射的超类定义的持久关系必须是单向的（仅具有拥有方）。**这意味着在映射的超类上根本不可能进行一对多关联。** 此外，只有当映射的超类目前仅在一个实体中使用时，多对多关联才是可能的。为了进一步支持继承，**必须使用单表或联表继承特性。**

来源：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html)

* * *

**更新**

因为您的 MappedSuperClass 扩展了 BaseEntity，它也继承了 BaseEntity 的关联，就好像它是它自己的一样。所以你实际上在 MappedSuperClass 上有一个 OneToMany。

为了解决这个问题，你需要修改/扩展原则以按照你想要的方式工作。

就本机功能而言，您有两种选择：

**类表继承** 您的公共类和生成的 DB 表示将具有公共字段，而子类现在将仅具有特定于它们自己的字段。不幸的是，如果您只是为了对公共字段进行分组而尝试对它们进行分组，那么这可能是对您的数据的错误陈述。

**使公共实体成为一个实体** 看起来所有映射的超类都是一个不在数据库中表示的实体。因此，改为使 common 成为一个实体。缺点是你最终会得到一个数据库表，但你可以删除它。

我建议您再次查看您的数据，并确保您只对名称和用途都相同的字段进行分组。例如，ComputerBox、ShoeBox、Man 和 Woman 可能都具有“height”属性，但在这种情况下，我不建议使用具有“height”属性的 Common 类来继承它们。相反，我将有一个 Box，其中包含 ComputerBox 和 ShoeBox 共有的字段，而我将有一个 Person，其中包含 Man 和 Woman 共有的字段。在这种情况下，如果您愿意，类表继承或单表将完美运行。

如果您的数据遵循该示例，请使用单表或类表继​​承。如果没有，我可能会建议不要对字段进行分组。

# mysql - Zend Db / Mysql - 使用 Select 插入

> ID：12202376
> 
> 赞同：1
> 
> 时间：2012-08-30T17:32:31.273
> 
> 标签：mysql, zend-framework, zend-db

我正在尝试找到最好的方法来做到这一点，如果我可以使用 Zend_db_table 会更好。基本上我插入一行，其中一个值来自同一个数据库，这个值不断变化，所以我需要确保插入的数据是有效的。我不能先查询该值，然后将其附加到插入查询，因为在两个查询之间数据可能会发生变化，我最终会插入错误的值。我想知道锁定表是否是要走的路，或者 Zend 是否有捷径。

我正在使用Mysql。

[编辑]

例如：该表有一个名为 item_number 的字段，对于每个新行，我取最后一个 item_number+1（来自同一个 item_family）并插入它。这是手动增量。

```
 TABLE ITEMS
 | item_id |  item_family | item_number |   name    |  
 |   15    |       1      |      10     |   Pan     |
 |   16    |       2      |      1      |   Dress   |  
 |   17    |       1      |      11     |   Spoon   | 
```

在此示例中，您会看到 item_family 1 的下一行的 item_number = 11，因为同一 item_family 的前一行是 10。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T12:36:12.240

我的解决方案（使用 Zend）是锁定表，而不是查询 item_number，将结果附加到插入查询，插入并解锁表。以下是锁定和解锁的方法：

```
$sql = "LOCK TABLE items WRITE";
$this->getAdapter()->query($sql);

//run select to get last item_number
//append result to insert array
//insert

$sql = "UNLOCK TABLES";
$this->getAdapter()->query($sql); 
```

另一种方法是编写查询，以便在插入期间选择值。这是一个例子：

```
$sql = INSERT INTO items (item_id, item_family, item_name, item_number) 
              VALUES (item_id, item_family, item_name, (SELECT item_number FROM... )+1);
$this->getAdapter()->query($sql); 
```

[有关MySQL Web](http://dev.mysql.com/doc/refman/5.0/es/insert-select.html)中此类查询的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:09:27.037

Provided that `item_id` is the primary key of your table, and it set as auto increment field, the `Zend_Db_Table::insert()` function will return the primary key of the row just you inserted.

**For example**:

```
$table = new Items();

$data = array(
    'item_family' => '1',
    'item_number' => '10',
    'name'        => 'Pan'
     );

$itemId = $table->insert($data); 
```

You can also call directly the mysql last inserted id function:

```
$itemId = $this->getAdapter()->lastInsertId('items'); 
```

# tridion - 使用 Content Delivery/Broker API 的 StructureGroup 详细信息

> ID：12202380
> 
> 赞同：8
> 
> 时间：2012-08-30T17:32:38.203
> 
> 标签：tridion, tridion-2011

我正在尝试使用 PublicationID 获取在给定出版物中发布的所有结构组。我期望`StructureGroupCriteria`通过传递根结构组 TCM ID 但获取页面 ID 来获取结构组（我期待 SG）。

现在我正在尝试遍历列表并获取每个结构组的详细信息。我没有找到任何 API (.net) 来获取这些详细信息，而且 API 只返回页面。

**到目前为止，我所做的和使用的工作`StructureGroupCriteria`返回页面 ID 列表而不是 SG ID**

```
 PublicationCriteria pubCriteria = new PublicationCriteria(pubID);
  // Root StructureGroup TCM ID -- tcm:45-3-4
  StructureGroupCriteria sgCriteria = new StructureGroupCriteria("tcm:45-3-4", true); 
  Criteria allSGsInPub = CriteriaFactory.And(pubCriteria, sgCriteria);
  Query allSGs = new Query(allSGsInPub);
  string[] sgInfo = allSGs.ExecuteQuery();
  Response.Write("Total : " + sgInfo.Length);
  foreach (string sgid in sgInfo ) {
    // HOW DO I get the Structure Group Details here
     //TCMURI sgURI = new TCMURI(sgid);
  } 
```

**Q #1** : 如何获取所有结构组和单个结构组的详细信息？（可能很简单，我找不到合适的 API）。

**Q#2**：如何使用`ItemTypeCriteria sgCriteria = new ItemTypeCriteria(4); // 4 is SG Item Type`.

当我尝试此选项时，查询成功，但未返回任何结果。这是预期的行为，我们应该总是使用`StructureGroupCriteria`而不是`ItemTypeCriteria`吗？

采用这种方法的原因是，我想避免使用上述代码所需的 Root StructureGroup ID。但目前，没有任何方法返回 StructureGroup 信息，我总是得到页面信息。

Tridion 版本：2011 SP1，.net API。

**注意：**当我发布时，我正在检查发布 SG 信息复选框并成功发布。在 Broker DB 方面，我也可以看到分类表上的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:20:18.780

我在玩 Odata 服务时，偶然发现我可以从 Odata Web 服务中获取我所有的结构组信息。

```
/cd_webservice/odata.svc/StructureGroups?$filter=PublicationId%20eq%2045 
```

此外，结果是返回带有`depth`参数的子结构组。

只是为了澄清一下，使用 Broker API 获取结构组是不可行的（我最初的问题）。但是，解决方法是使用 OData 服务来获取结构组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:31:31.383

我认为您不会得到 Query 对象返回的结构组。

根据文档，当您发布结构组信息时，结构组层次结构将发布到内容交付端，并在其中存储为**分类**。

您是否尝试过使用分类 API 来获取您需要的信息？

# mysql - 如何使用组合索引进行昂贵的聚合查询？

> ID：12202381
> 
> 赞同：0
> 
> 时间：2012-08-30T17:32:49.787
> 
> 标签：mysql, performance, indexing, query-optimization

我在一个相对较大的表（约 2000 万行）上使用以下查询：

```
SELECT 
    MAX(`col_1`) 
FROM `table` 
WHERE  
    col_2 = X AND
    col_3 = Y AND
    col_4 = Z 
```

`WHERE`我在 col_2、col_3 和 col_4 列上有一个组合索引，在 col_1 上有一个单独的索引，但查询仍然比没有该部分的同一查询慢多个数量级。

如何使用索引来提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:45:25.217

您可以尝试`col_1`在第四个位置建立索引，但很大程度上取决于表的结构（即单行的权重）。当计算`MAX`,`col_1`没有`WHERE`时，信息可以立即通过索引获得（只要走它总是保持在左边，就像它一样）。

添加一个`WHERE`，它不再是这样。您的查询很可能已经优化。通过了解 X、Y 和 Z 的类型和分布，可以（也许）进行进一步的改进。

（一个愚蠢的例子：假设`col_2`,`col_3`并且`col_4`已知在 (-255,+255) 范围内。然后你可以考虑添加一个额外的非规范化列保存`(((col_1+255)*512+(col_2+255))*512+(col_3+255))`和索引 和`col_1`。甚至可能基于该索引进行*聚类*。这个如果您可以找到一个具有相当小的数据类型结果的单射函数，并且您经常在 X、Y 和 Z 上运行“精确”查询，即没有任何`WHERE col_2 BETWEEN X1 AND X2`东西，那么这是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:57:34.673

如[MySQL 如何使用索引](http://dev.mysql.com/doc/en/mysql-indexes.html)中所述：

> MySQL 对这些操作使用索引：
> 
> `[ deletia ]`
> 
> *   查找特定索引列的[`MIN()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_min)或值。这由预处理器优化，该预处理器检查您是否正在使用索引中之前出现的所有关键部分。在这种情况下，MySQL 为每个or表达式执行单个键查找并将其替换为常量。如果所有表达式都替换为常量，则查询立即返回。例如：[`MAX()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_max)***`key_col`***`WHERE key_part_N = constant`***`key_col`***[`MIN()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_min)[`MAX()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_max)
>     
>     
>     
>     ```
>     选择最小值（*key_part2*），最大值（*key_part2*）
>     FROM *tbl_name* WHERE *key_part1* =10;
>     ```

因此，当您应用过滤器时，MySQL 不能使用您定义的简单索引`col_1`进行查找`MAX(col_1)`：它必须扫描所有匹配的行（尽管它可以通过对该简单索引进行排序以降序执行此操作`col_1`），就像由`EXPLAIN`查询的输出显示。

您应该在`(col_2, col_3, col_4, col_1)`.

# objective-c - nsmutabledictionary 没有可见接口声明选择器 setobject:forkey：

> ID：12202384
> 
> 赞同：2
> 
> 时间：2012-08-30T17:32:55.137
> 
> 标签：objective-c, ios, nsmutabledictionary

谁能指出我为什么会收到编译错误

```
[objToSend setObject:self.pathidEdit forkey:@"PathId"];
[objToSend setObject:indexData forkey:@"data"]; 
```

在下面的代码中？

```
NSMutableArray *indexData = [[NSMutableArray alloc]init];

        NSMutableDictionary *dict = [NSMutableDictionary dictionary];
        NSMutableDictionary *objToSend = [NSMutableDictionary dictionary];

        for(int i=0;i<myPathvideoArray.count;i++)
        {

        NSString *vId=[[myPathvideoArray objectAtIndex:i]valueForKey:@"videoId"];
    NSNumber *indexNum = [NSNumber numberWithInt:i+1];

            [dict setObject:vId forKey: @"VideoId"];

            [dict setObject:indexNum forKey: @"index"];

            [indexData addObject:dict];

        }

        [objToSend setObject:self.pathidEdit forkey:@"PathId"];
        [objToSend setObject:indexData forkey:@"data"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:40:28.397

Objective-C 区分大小写：

这是对的：

```
[dict setObject:object forKey:key]; 
```

虽然这不是：

```
[dict setObject:object forkey:key]; 
```

# java - Websocket在playframework 2中向所有客户端发送数据

> ID：12202385
> 
> 赞同：0
> 
> 时间：2012-08-30T17:32:55.710
> 
> 标签：java, playframework, websocket, playframework-2.0

我需要帮助来理解 playframework 中的 WS

我的控制器中有下一个代码

```
public static WebSocket<String> sockHandler() {
return new WebSocket<String>() {
    // Se llama para establecer el WS

    public void onReady(WebSocket.In<String> in, WebSocket.Out<String> out) {

        //por cada evento recivido por el socket
        // Se regitra una llamada para el procesamiento de los eventos
        in.onMessage(new Callback<String>() {
            public void invoke(String event) {
                //Logger.info(event)
                System.out.println("este es el event "+event);

            } 
         });

        // write out a greeting
        out.write("Hola a todos");
    }
}; 
```

}

在我看来，我有：

```
<script type="text/javascript" charset="utf-8">

    $(function() {
        var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket
        var sock = new WS("@routes.Application.sockHandler().webSocketURL(request)")

        $('button.send').click(function() {
          console.log('entro al click');
          sendMessage();  
        }); 

        var sendMessage = function() {
            sock.send("llamando controller");
        }

        var receiveEvent= function(event) {
            $('.greeting').append(event.data);
            alert('entro');
        }

        sock.onmessage=receiveEvent;
    })

</script> 
```

当客户端发送操作时，我需要始终在所有客户端上打印警报（'entro'）。

请原谅我的英语，但我会说西班牙语。

非常感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:02:46.477

在您的代码中，您正在编写对实际创建的 Websocket（即调用客户端和服务器之间的实际 Websocket）的响应。您必须知道每个客户端都有自己的 Websocket。

如果你想为每个客户端写一些东西，你必须将所有创建的 Websocket 保存在某个地方。在[Play 示例](https://github.com/playframework/playframework/blob/2.0.6/samples/java/websocket-chat/)中，它是通过以下代码部分完成的：

[包含所有 Websocket 的地图](https://github.com/playframework/playframework/blob/2.0.6/samples/java/websocket-chat/app/models/ChatRoom.java#L76)（实际上有输出）：

```
Map<String, WebSocket.Out<JsonNode>> members = new HashMap<String, WebSocket.Out<JsonNode>>(); 
```

然后注册在[这里](https://github.com/playframework/Play20/blob/2.0.6/samples/java/websocket-chat/app/models/ChatRoom.java#L89)完成：

```
members.put(join.username, join.channel); 
```

并向所有客户端发送一条消息，它是通过[遍历所有已注册的 Webscoket](https://github.com/playframework/Play20/blob/2.0.6/samples/java/websocket-chat/app/models/ChatRoom.java#L117)来完成的：

```
for(WebSocket.Out<JsonNode> channel: members.values()) {

    ObjectNode event = Json.newObject();
    event.put("kind", kind);
    event.put("user", user);
    event.put("message", text);

    ArrayNode m = event.putArray("members");
    for(String u: members.keySet()) {
        m.add(u);
    }

    channel.write(event);
} 
```

# apache - .htaccess ErrorDocument 404 未显示

> ID：12202387
> 
> 赞同：153
> 
> 时间：2012-08-30T17:33:03.423
> 
> 标签：apache, .htaccess, amazon-ec2, amazon-web-services, apache-config

我有一台运行在 Linux ubuntu 上的 AWS EC2 服务的服务器，并且我已经安装了 apache、php 和 mysql。

我`.htaccess`在文档根目录中添加了一个文件`/var/www/html`。

我在其中输入了这段代码： `ErrorDocument 404 /var/www/html/404.php`它仍然没有出现。

我多次输入此命令：`sudo service httpd restart`重新启动服务器但未显示任何更改...

我该如何解决这个问题...我做错了什么吗？

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2012-08-30T19:01:10.823

首先，请注意 .htaccess 文件不需要重新启动 httpd。.htaccess 文件专门用于没有 root 权限的人 - 即，无权访问 httpd 服务器配置文件，并且无法重新启动服务器。由于您能够重新启动服务器，因此您不需要 .htaccess 文件并且可以直接使用主服务器配置。

其次，如果 .htaccess 文件被忽略，您需要检查 AllowOverride 是否设置正确。有关详细信息，请参阅[http://httpd.apache.org/docs/2.4/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.4/mod/core.html#allowoverride)。您还需要确保它设置在正确的范围内 - 即，在您的配置中的正确块中。例如，请确保您*没有*编辑块中的那个。

第三，如果您想确保 .htaccess 文件实际上正在被读取，请将垃圾放入其中。当您将浏览器指向包含该文件的目录时，.htaccess 文件中的无效行（例如“INVALID LINE HERE”）将导致 500 服务器错误。如果没有，那么您没有正确配置 AllowOverride。

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2013-10-16T06:27:50.077

1.  启用 Apache mod_rewrite 模块

    `a2enmod rewrite`

2.  将以下代码添加到`/etc/apache2/sites-available/default`

    `AllowOverride All`

3.  重启阿帕奇

    `/etc/init.d/apache2 restart`

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2015-09-18T15:30:31.170

如果您已尝试上述所有方法，这些都是有效且良好的答案，并且您的 htaccess 文件无法正常工作或被读取，请更改`apache2.conf`文件中的指令。在 Ubuntu 下，路径是`/etc/apache2/apache2.conf`

更改`<Directory>`指向 htaccess 文件所在的公共网页的指令。从 更改`AllowOverride None`为`AllowOverride All`

```
<Directory /var/www/>
Options Indexes FollowSymLinks
AllowOverride All
Require all granted
</Directory> 
```

我遇到了同样的问题，并在 Ubuntu Ask 上找到了答案和解释！论坛[https://askubuntu.com/questions/421233/enabling-htaccess-file-to-rewrite-path-not-working](https://askubuntu.com/questions/421233/enabling-htaccess-file-to-rewrite-path-not-working)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-04-20T11:15:21.510

对于**Ubuntu，**
首先，运行以下命令：-

```
sudo a2enmod rewrite 
```

然后，`/etc/apache2/sites-available/000-default.conf`使用以下命令使用 nano 或 vim 编辑文件：-

```
sudo nano /etc/apache2/sites-available/000-default.conf 
```

然后在`000-default.conf`文件中，将其添加到`DocumentRoot /var/www/html`. 如果您的根 html 目录是其他目录，请写下：-

```
<Directory "/var/www/html">
  AllowOverride All
</Directory> 
```

完成所有操作后，使用命令重新启动 apache`sudo service apache2 restart`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-05T13:27:35.910

根据我的经验， /var/www/ 目录指令会阻止子文件夹虚拟主机指令。因此，如果您尝试了所有建议但仍然无法正常工作并且您正在使用虚拟主机，请尝试此操作；

1 - 确保你有 `AllowOverride All`指令 `/etc/apache2/sites-available/example.com.conf`

2 - 检查 /var/www/ 中的目录指令`/etc/apache2/apache2.conf`（可能在第 164 行），如下所示；

```
<Directory /var/www/>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
</Directory> 
```

如果有`AllowOverride None`指令将其更改为 `AllowOverride All` 或只是转义线

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-10-03T05:57:43.453

最有可能的是，AllowOverride 设置为 None。在位于 /etc/apache2 文件夹中的 apache2.conf 的目录部分

尝试将其设置为 AllowOverride All

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-07-02T07:34:44.630

只需按照 3 个步骤

1.  使用以下命令启用 mode_rewrite

    sudo a2enmod 重写

将询问密码。所以输入你的密码

2.  更新位于***/etc/apache2/sites-available/***目录的**000-default.conf**或**default.conf文件。**你不能直接编辑它。所以使用以下命令打开

     *sudo gedit /etc/apache2/sites-available/000-default.conf* 

 *或 sudo gedit /etc/apache2/sites-available/default.conf

你会得到

> DocumentRoot /var/www/html

或者

> 文档根目录 /var/www

线。在其后添加以下代码。

```
<Directory /var/www/html/>
Options Indexes FollowSymLinks
AllowOverride All
Require all granted
</Directory> 
```

使用户目录标记路径与文件中显示的相同。

3.  使用以下命令重新启动您的 apache 服务器

    须藤服务 apache2 重启

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-08-04T19:29:41.827

默认情况下，Apache 禁止使用 .htaccess 文件来应用重写规则，因此

**第 1 步 — 启用 mod_rewrite（如果未启用）** 首先，我们需要激活 mod_rewrite。它可用，但未通过干净的 Apache 2 安装启用。

```
$ sudo a2enmod rewrite 
```

这将激活模块或提醒您该模块已启用。要使这些更改生效，请重新启动 Apache。

```
$ sudo systemctl restart apache2 
```

mod_rewrite 现在已完全启用。在下一步中，我们将设置一个 .htaccess 文件，我们将使用它来定义重定向的重写规则。

**第 2 步 — 设置 .htaccess** 使用 nano 或您喜欢的文本编辑器打开默认的 Apache 配置文件。

```
$ sudo nano /etc/apache2/sites-available/000-default.conf 
```

在该文件中，您会发现从第一行开始的块。在该块内，添加以下新块，使您的配置文件如下所示。确保所有块都正确缩进。

/etc/apache2/sites-available/000-default.conf

```
<VirtualHost *:80>
    <Directory /var/www/html>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    </Directory>

    . . . 
</VirtualHost> 
```

保存并关闭文件。要使这些更改生效，请重新启动 Apache。

```
$ sudo systemctl restart apache2 
```

完毕。您的 .htacess 应该可以工作。 **这个链接实际上可以帮助某人** [https://www.digitalocean.com/community/tutorials/how-to-rewrite-urls-with-mod_rewrite-for-apache-on-ubuntu-16-04](https://www.digitalocean.com/community/tutorials/how-to-rewrite-urls-with-mod_rewrite-for-apache-on-ubuntu-16-04)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-10-10T21:38:46.287

转到 /etc/apache2/apache2.conf

您必须编辑该文件（您应该具有 root 权限）。更改目录文本如下：

> <Directory /var/www/>
> 选项索引 FollowSymLinks
> AllowOverride All
> 要求全部授予

现在你必须重新启动 apache。

服务 apache2 重启

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-07-16T06:30:49.247

我清除了这个用途。通过使用此站点[单击此处](http://www.iasptk.com/enable-apache-mod_rewrite-ubuntu-14-04-lts/)，按照步骤操作，直到 ubuntu 版本 18.04 都遵循相同的步骤

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-05-27T11:14:08.243

在`WampServer`打开 WampServer 托盘图标 ----> Apache ---> Apache 模块 --->rewrite_module

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-19T15:27:43.170

在您的 .htaccess 上使用 RewriteBase /{your folder}/

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-12T13:13:55.117

为了完整起见，如果“AllowOverride All”不能解决您的问题，您可以使用以下方法调试此问题：

1.  运行`apachectl -S`并查看您是否有多个 namevhost。可能是 httpd 正在寻找另一个 DocumentRoot 的 .htaccess。

2.  使用`strace -f apachectl -X`并查找它从哪里加载（或不加载）.htaccess。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-03-04T12:44:37.453

我的虚拟机上有很多站点，我只能通过更改需要 .htaccess 的站点的配置来解决它

我做了什么：

1.  `sudo a2enmod rewrite`

接下来我只更改了特定站点的配置，而不是每个站点“example.com”

2.  `sudo nano /etc/apache2/sites-enable/example.com.conf`

在里面我加了

```
<Directory /var/www/example.com>
    AllowOverride All
</Directory> 
```

3.  `service apache2 restart`

所以它只适用于 1 个站点，因为当我尝试对整个服务器应用更改时它崩溃了，不知道为什么，但这解决了我的问题*

# mysql - 获取sql中的特定字符串

> ID：12202389
> 
> 赞同：0
> 
> 时间：2012-08-30T17:33:08.723
> 
> 标签：mysql, sql

我在 Windows 7 上使用 MySQL 4.1.21 (win 32)。

我在表“test”中有一个名为“path”的字段，一些行如下所示：

```
/date/sunday/morning/
/date/sunday/morning/9
/date/wednesday/morning/11
/date/monday/morning/10
/date/monday/afternoon/
/date/friday/wholeday/10/pm 
```

...ETC。

我想`/date/`在下一个'/'开始之后的所有日子里得到例如：星期日或星期三或早上作为结果。

谢谢你-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:37:54.817

您可以使用 MySQL 的[`SUBSTRING_INDEX()`](http://dev.mysql.com/doc/en/string-functions.html#function_substring-index)函数以及基于[模式匹配](http://dev.mysql.com/doc/en/pattern-matching.html)的过滤器：

```
SELECT DISTINCT SUBSTRING_INDEX(SUBSTRING_INDEX(path, '/', 3), '/', -1)
FROM   test
WHERE  path LIKE '/date/%' 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/7ed90/1/0)上查看。

# java - 带有精灵表的 ArrayIndexOutOfBoundsException

> ID：12202393
> 
> 赞同：0
> 
> 时间：2012-08-30T17:33:30.087
> 
> 标签：java, android, andengine

使用精灵表时，andengine 不断出现此错误。

谁能解释我的意思？

```
08-30 13:31:50.053: E/AndroidRuntime(9643): java.lang.ArrayIndexOutOfBoundsException: length=12; index=12 
```

这是发生错误的地方。

```
 pItem.setCurrentTileIndex(MathUtils.random(0, pItem.getTileCount())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:37:51.550

尝试： `pItem.setCurrentTileIndex(MathUtils.random(0, pItem.getTileCount()-1));`

`getTileCount()`可能会返回瓷砖的数量，因此索引将是负 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:37:52.123

我的猜测是`MathUtils.random`包含在内，这意味着在您的示例中（大小为 12 的数组），它将生成一个从 0 到 12 的数字，*包括*12。尝试将您的代码更改为：

```
pItem.setCurrentTileIndex(MathUtils.random(0, pItem.getTileCount() - 1)); 
```

# c# - 数据库备份错误

> ID：12202396
> 
> 赞同：0
> 
> 时间：2012-08-30T17:33:35.637
> 
> 标签：c#, winforms, visual-studio-2010, sql-server-2008

我有这个创建数据库备份的代码片段：

```
try
{
  string connStr = "<valid connection string>";

  using (SqlConnection conn = new SqlConnection(connStr))
  {
    conn.Open();

    string sqlStmt = String.Format("BACKUP DATABASE InventoryDB TO DISK='{0}'", 
                                      DBBackupSaveFileDialog.FileName);

    using (SqlCommand bu2 = new SqlCommand(sqlStmt, conn))
    {
      bu2.ExecuteNonQuery();
    }
... 
```

问题是它在开发人员电脑上工作正常但是当我在不同的机器上尝试时会出现这个错误

> 无法打开备份设备“C:\User\Saleh\Documents\12.bak”。操作系统错误 5（无法检索此错误的文本。原因：15105）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:35:26.073

您需要确保 SQL Server 服务帐户对`C:\Users\Saleh\`

首先，查看 SQL Server 以什么帐户运行。控制面板 > 管理工具 > 服务，右键单击相关的 SQL Server 服务，点击属性，然后查看登录选项卡上列出的帐户。现在转到 Windows 资源管理器，右键单击文件夹，点击属性，然后在安全选项卡上，您可以将此用户帐户添加到列表中，并确保他们具有写入权限。如果您对此有进一步的问题，您的问题可能应该交给 superuser.com，因为它正在成为 Windows / 权限问题，而不是编程问题。

更好的是，停止运行对用户文件夹的备份 - 使用 SQL Server 的备份文件夹，SQL Server 已经有权写入该文件夹。如果您以后需要移动它，请单独进行。

# ruby-on-rails - Rails 线程安全，包括模块

> ID：12202397
> 
> 赞同：0
> 
> 时间：2012-08-30T17:33:37.287
> 
> 标签：ruby-on-rails, ruby, thread-safety

我想根据实例变量在我的应用程序控制器中包含模块。

我现在有这样的事情：

```
class ApplicationController

  before_filter :include_module

  def include_module
    @@site = "foo"
    class_eval{ include @@site.classify.constantize::Bar }
  end
end 
```

但是，我想让这个片段线程安全。可能吗？我想要实现的是每个请求加载模块，其名称取决于某个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:44:45.793

AFAIK Rails 是线程安全的，在 MRI 上将是单线程的。然而，上下文很重要。您正在运行 MRI 还是 JRuby？我建议你通读以下 3 次

[http://m.onkey.org/thread-safety-for-your-rails](http://m.onkey.org/thread-safety-for-your-rails)

[http://yehudakatz.com/2010/08/14/threads-in-ruby-enough-already/](http://yehudakatz.com/2010/08/14/threads-in-ruby-enough-already/)

[http://blog.headius.com/2008/08/qa-what-thread-safe-rails-means.html](http://blog.headius.com/2008/08/qa-what-thread-safe-rails-means.html)

编辑：如果您的 rails 应用程序是单线程的，那么您的变量是线程安全的。我应该之前添加的。在这种情况下，Rails 是线程安全的。

# php - Jquery 移动 HTTPS 失败

> ID：12202399
> 
> 赞同：2
> 
> 时间：2012-08-30T17:33:44.433
> 
> 标签：php, jquery, ajax, jquery-mobile, https

我正在尝试编写一个使用 PHP 协议切换以即时从 HTTP 和 HTTPS 切换的网站，但由于我现在已经在 J​​Query 移动设备中编写了我的网站，它似乎只是点击了“错误加载页面”并且从不加载这些部分我的网站。可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:13:21.290

您可以在每个标签中添加 rel="external" 以从 http => https 或 https => http 重定向到

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:37:34.843

尽管在性质上略有不同，但这个问题将帮助您解决问题：[AJAX calls to untrusted (self-signed) HTTPS failed silently](https://stackoverflow.com/questions/4565772/ajax-calls-to-untrusted-https-fail-silently)。

因为您很可能使用自签名证书或用于不同子域的证书，所以默认情况下 AJAX 调用将失败，因为出于安全目的它们无法接受证书。

# variables - 如何使用临时变量更新表

> ID：12202406
> 
> 赞同：1
> 
> 时间：2012-08-30T17:34:24.563
> 
> 标签：variables, plsql, sql-update, bind

我想更新循环内的表，并且想添加存储在临时变量中的值。部分代码如下所示：

```
SELECT SUM(CASE WHEN temp_atr_val = temp_val THEN net_sales_home ELSE 0 END) into temp_variable
       FROM schemafinal_1;
EXECUTE IMMEDIATE 'ALTER TABLE SAR ADD ('||temp_name||' number)';
EXECUTE IMMEDIATE ' UPDATE SAR b 
SET b.'||temp_name||' = temp_variable';
END LOOP;
END LOOP;   
END; 
```

当我运行上面的代码时，它显示 ORA-00904：“TEMP_VARIABLE”：无效标识符，当我在 temp_variable 之前放置 & 时，它会询问我绑定值，并且该值填充在每个单元格中。如果我使用：temp_variable，它会显示“ORA-01008：并非所有变量都绑定

我是 pl/sql 和 oracle sql 开发人员的新手。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:44:50.197

干得好-

```
SELECT SUM(CASE WHEN temp_atr_val = temp_val THEN net_sales_home ELSE 0 END) into temp_variable
       FROM schemafinal_1;
EXECUTE IMMEDIATE 'ALTER TABLE SAR ADD ('||temp_name||' number)';
EXECUTE IMMEDIATE 'UPDATE SAR b SET b.'||temp_name||' = '|| temp_variable;
END LOOP;
END LOOP;   
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:31:42.437

您应该使用 EXECUTE IMMEDIATE ' UPDATE SAR b SET b.'||temp_name||' =' || to_char(temp_variable); 或 EXECUTE IMMEDIATE 'UPDATE SAR b SET b.'||temp_name||' = :a' 使用 temp_variable

temp_variable 超出范围，因此更新失败。

# javascript - 从父级触发弹出窗口中的事件

> ID：12202408
> 
> 赞同：0
> 
> 时间：2012-08-30T17:34:27.563
> 
> 标签：javascript, popup

我有两个 windows ，第二个是 popup ，我想从父级触发一个事件（第一个有指向此弹出窗口的链接）。

这是触发器的 javascript 代码（在父窗口的 javascript 代码中）：

```
winPop=window.open(opts.url,opts.nom,"width="+opts.width+",height="+opts.height+",top="+opts.top+",left="+opts.left);

    winPop.onload=function(){

     $(winPop.document).trigger('connected', {
      jid: "jid",
      password: '123'
     });

    } 
```

此 javascript 代码启动弹出窗口并尝试触发绑定在弹出（就绪）函数中的事件：

```
$(document).ready(function () {
 $(document).bind('connected', function () {
  alert("Hello , I'm here");
 }); 
```

问题是使用以前的javascript代码..绑定事件没有按预期触发。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:53:20.897

我之前做过这样的事情：

```
var realWindowOpen = window.open;
window.open = wrappedWindowOpen;
function wrappedWindowOpen(url, name, specs, replace) {
    window.open = realWindowOpen;
    var windowHandle = window.open(url, name, specs, replace);
    if (windowHandle)
        console.log("New Popup Window created: ", {name:name});
    else
        console.error("New Window Failed. " + {name:name});

    if (popupFnCreationNotify) {
        popupFnCreationNotify(windowHandle);
        popupFnCreationNotify = null;
    }
    window.open = wrappedWindowOpen;
}

// Calling example
var popupFnCreationNotify = function() {
    console.log("I got called back");
};
window.open("my url"); 
```

请注意：

*   realWindowOpen 总是指向 window.open。
*   正如您在代码中看到的那样，我用 WrappedWindowOpen 包装了实际的 window.open。
*   在调用 window.open 之前，调用者将 popupFnCreationNotify 设置为他们希望的任何回调函数。

# converter - 将 MediaWiki 标记转换为 Textile 标记

> ID：12202411
> 
> 赞同：1
> 
> 时间：2012-08-30T17:34:35.107
> 
> 标签：converter, markup, textile, redcloth, wikitext

我有一个问题：0 在我的工作地点，我们有两个 wiki 系统，我负责找到一种从 MediaWiki 迁移到 redmine wiki 的方法——唯一的问题是他们使用不同的标记语言（WikiText 与 Textile）和一个可能的解决方案（Pandoc）只是另一种方式：0 任何关于如何做到这一点的建议将不胜感激！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-30T22:37:17.710

[MediaWiki 到 Redmine 迁移工具 (MRMT)](https://github.com/GSI/mrmt)刚刚发布。

它使用分配给每个修订版的正确用户迁移整个历史记录。

除了基本的**Pandoc**翻译之外，它还添加了一些有用的替换，这些替换很可能在任何此类迁移中都是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:22:33.173

pandoc 的开发版本现在有一个 mediawiki 阅读器。它不支持所有的 mediawiki 语法（例如模板），并且没有经过很好的测试，但您可以尝试一下。

您需要从源代码安装 pandoc 的开发版本才能执行此操作。安装 Haskell 平台，然后按照[此处](https://github.com/jgm/pandoc/wiki/Installing-the-development-version-of-pandoc-1.10)的说明进行操作。（这些说明假设一个 *nix 构建环境。）

您可能想要使用一些脚本来调整结果，例如将标题为“wikilink”的链接制作成正确的 redmine wikilinks。在 pandoc AST 级别而不是在纺织结果中执行此操作是最容易的。[pandoc 网站上有关使用 pandoc 编写脚本](http://johnmacfarlane.net/pandoc/scripting.html)的文档在这里可能会有所帮助。

另一种方法是抓取您的 redmine wiki 生成的 HTML，并使用 pandoc 将其转换为纺织品。不过，这种方法通常需要大量的预处理和后处理。

您还可以尝试使用各种[替代 mediawiki 解析器](http://www.mediawiki.org/wiki/Alternative_parsers)之一，生成 HTML 或 DocBook 并使用 pandoc 将其转换为纺织品。

# android - 在 EditText 数组上禁用 Android 键盘

> ID：12202416
> 
> 赞同：2
> 
> 时间：2012-08-30T17:35:03.220
> 
> 标签：android, android-layout, android-intent, android-widget

我有一个 EditText 数组，我想禁用每次单击它们时出现的标准键盘 Android。

这些是我正在使用的零件代码：

```
InputMethodManager imm = (InputMethodManager)getSystemService(
              Context.INPUT_METHOD_SERVICE);
for (i=0;i<dim*dim;i++){

        imm.hideSoftInputFromWindow(value[i].getWindowToken(), 0);
        value[i].setOnTouchListener(this);
        value[i].setOnClickListener(this);
        value[i].setOnFocusChangeListener(this);

    } 
```

编辑：

我用这些代码行创建了一个新类：

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.EditText;

public class KeyboardControlEditText extends EditText {
private boolean mShowKeyboard = false;

public void setShowKeyboard(boolean value) {
    mShowKeyboard = value;
}

// This constructor has to be overriden
public KeyboardControlEditText(Context context, AttributeSet attrs) {
    super(context, attrs);
}

// Now tell the VM whether or not we are a text editor
@Override
public boolean onCheckIsTextEditor() {
    return mShowKeyboard;
}
} 
```

在我的 OnCreate 主课中：

```
for (i=0;i<dim*dim;i++){

((KeyboardControlEditText) value[i]).setShowKeyboard(false);
value[i].setOnTouchListener(this);
value[i].setOnClickListener(this);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:38:15.027

您需要为此创建自己的`EditText`类。然后，覆盖默认值[`onCheckIsTextEditor`](http://developer.android.com/reference/android/view/View.html#onCheckIsTextEditor%28%29)并返回`false`。

```
public class NoKeyboardEditText extends EditText {
    // This constructor has to be overriden
    public NoKeyboardEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    // Now tell the VM that we are not a text editor
    @Override
    public boolean onCheckIsTextEditor() {
        return false;
    }
} 
```

确保用正确的名称替换新的`EditText`. 例如，如果你的包是`com.example.widget`，你会想使用`<com.example.widget.NoKeyboardEditText ... />`.

如果你需要它是动态的，你可以变得更漂亮：

```
public class KeyboardControlEditText extends EditText {
    private boolean mShowKeyboard = false;

    public void setShowKeyboard(boolean value) {
        mShowKeyboard = value;
    }

    // This constructor has to be overriden
    public KeyboardControlEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    // Now tell the VM whether or not we are a text editor
    @Override
    public boolean onCheckIsTextEditor() {
        return mShowKeyboard;
    }
} 
```

这样，您可以`((KeyboardControlEditText) myEditText).setShowKeyboard(false);`在运行时调用来更改它。

# swig - 当底层 C++ 层包含引用时，在 swig 导向器包装器中管理 Java 生命周期的正确方法是什么？

> ID：12202417
> 
> 赞同：1
> 
> 时间：2012-08-30T17:35:17.773
> 
> 标签：swig

给定一个类似的接口

```
%feature("director") HeldBase;
%feature("smartptr") HeldBasePtr;   
typedef SmartPtr<HeldBase> HeldBasePtr;  // a minor wrapper around boost::shared_ptr
// Various typemaps that ensure Java-side HeldBase instances are always HeldBasePtr
class HeldBase {
public:
   virtual void doSomething(int) = 0;
}

class Holder {
   void hold(HeldBasePtr hb);
   void release(HeldBasePtr hb);
   void clear();
   void process(int seconds);
} 
```

现在一些代码实现了 HeldBase，在 java 端执行如下操作：

```
class MyHeldBase: extends HeldBase { 
   void doSomething(int i) { System.out.println("Hello whirled"); }
}

Holder h = new Holder();
HeldBase local = new MyHeldBase();
h.hold(new MyHeldBase());
h.hold(local);
h.process(1000000);     // presumably doing something with the held things. 
```

底层 C++ 层“正确”处理智能指针，因此（例如）销毁 Holder（swig 代理和底层 C++ 对象）正确地减少了底层智能指针上的引用计数。

现在，“本地”持有的基础工作正常，但是在 java 端没有持有引用的基础会给出一个“null upcall”错误，大概是在某些 gc 导致 java 实例消失之后。

我注意到生成的 swigTakeOwnership 和 swigReleaseOwnership 方法，并在代码中跟踪它们以切换主管是否持有 GlobalRef 或 GlobalWeakRef。所以我做了一些包装代码，以便调用hold(HeldBase hb) 调用hb.swigReleaseOwnership() 和release() 调用hb.swigTakeOwnership()。查看代码，swigReleaseOwnership 似乎会将底层的 director ref 转换为 GlobalRef（这样 C++ 层将拥有 Java MyHeldBase 的所有权）。swigTakeOwnership 反之亦然。

不幸的是，由于不相关的原因，这不起作用......我们的类型图中的某些内容使 swigTakeOwnership 和 swigReleaseOwnership 不可调用，因为它们（认为它们）持有 HeldBase * 而不是 HeldBasePtr *。

如果这是解决此问题的正确方法，我将尝试找出未正确生成这些方法的原因。但我仍然觉得有未解决的问题（很难思考。）

例如，关于：

```
HeldBase local = new MyHeldBase()
Holder h1 = new Holder(); Holder h2 = new Holder(); 
h1.hold(local);
h2.hold(local);
h1.release(local)
local = null; 
```

在这种情况下，对 swigReleaseOwnership() 的调用发生了两次，但第二次是 noop。当 release() 调用 swigTakeOwnership（将引用返回到 GlobalWeakRef）时，java 层再次“拥有”并且 h2 将获得空调用。此外，如果需要调用 swigTakeOwnership，那么 Holder.clear() 似乎意味着我需要添加代码来保存所有传递的 java 扩展导向器（此时我可以这样做来管理它们的生命周期）。

它“感觉”就像在将智能指针与导向器一起使用时，导向器的 C++ 端应该始终只使用 GlobalRef 并且事情会“正常工作”但是 OTOH 似乎是那里的内存泄漏，从那时起 C++ 端将保留 Java代理活着，反之亦然。

# javascript - 在显示/隐藏中单击时删除的文本

> ID：12202422
> 
> 赞同：-2
> 
> 时间：2012-08-30T17:35:40.613
> 
> 标签：javascript, html, css

在下面的示例中，如何使“查看更多”文本不消失，此时文本在单击时被删除。我希望它留下来。非常感谢。

[http://www.cssnewbie.com/example/showhide-content/](http://www.cssnewbie.com/example/showhide-content/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:38:50.037

删除`<script>`标签中引用的所有内容`shID+'-show'`。那就是显示/隐藏链接的东西。

备查：

```
<script language="javascript" type="text/javascript">
function showHide(shID) {
   if (document.getElementById(shID)) {
      if (document.getElementById(shID+'-show').style.display != 'none') {
         document.getElementById(shID+'-show').style.display = 'none';
         document.getElementById(shID).style.display = 'block';
      }
      else {
         document.getElementById(shID+'-show').style.display = 'inline';
         document.getElementById(shID).style.display = 'none';
      }
   }
}
</script>

[...snip...]

<a href="#" id="example-show" class="showLink" onclick="showHide('example');return false;">See more.</a> 
```

删除隐藏链接的东西会给出：

```
<script language="javascript" type="text/javascript">
function showHide(shID) {
   if (document.getElementById(shID)) {
      if (document.getElementById(shID).style.display != 'none') {
         document.getElementById(shID).style.display = 'none';
      }
      else {
         document.getElementById(shID).style.display = 'block';
      }
   }
}
</script>

[...snip...]

<a href="#" id="example-show" class="showLink" onclick="showHide('example');return false;">See more.</a> 
```

*上面的代码未经测试，但应该可以工作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:43:26.773

删除此行

```
onclick="showHide('example');return false;" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:43:42.807

将以下行更改为它下面的代码块。

原来的：

```
<a href="#" id="example-show" class="showLink" onclick="showHide('example');return false;">See more.</a> 
```

修改的：

```
<a href="#" id="example-show" class="showLink" >See more.</a> 
```

# c# - 初始化继承的类

> ID：12202423
> 
> 赞同：0
> 
> 时间：2012-08-30T17:35:42.857
> 
> 标签：c#, class, initialization

我有一个类（我们称之为Class1），它继承了另一个类（Class2）。我想要做的是在 Class1 中继承时在 Class2 中运行 costructor 方法。

我想它必须看起来像这样：

```
// Class1
public class Class1 : Class2
{
    public Class1()
    {

    }
}
// Class2
public class Class2
{
    public Class2()
    {
        //this is the function I want to run
    }
} 
```

但我不能让它像这样工作。
有没有办法做到这一点，而实际上不必从 Class1 调用 Class2() 构造函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:36:47.023

您错误地声明了构造函数。删除`void`关键字：

```
// Class1 
public class Class1 : Class2 
{ 
    public Class1() 
    { 

    } 
} 
// Class2 
public class Class2 
{ 
    public Class2() 
    { 
        //this is the function I want to run 
    } 
} 
```

基类的默认构造函数将自动运行。如果你想调用一个非默认的构造函数，你可以这样做：

```
// Class1 
public class Class1 : Class2 
{ 
    public Class1() : base("argument")
    { 

    } 
} 
// Class2 
public class Class2 
{ 
    public Class2() 
    { 
    } 
    public Class2(string theParameter)
    {
        //code for initializing the object with the string parameter 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:41:30.937

你总是调用`Class2`'s 的构造函数。如果您没有调用代码，`base()`它会为您添加。如果`Class2`没有无参数构造函数，并且您没有显式调用基本构造函数，则会出现编译错误。

如果你有一个`Class1`你必须有一个`Class2`构造；`C_Sharp_Developer`没有第一个，你就不可能有一个`Person`。

# javascript - SVG 路径命中测试

> ID：12202424
> 
> 赞同：2
> 
> 时间：2012-08-30T17:35:51.010
> 
> 标签：javascript, jquery, svg, mouseover, jquery-svg

我在检测 SVG 路径元素上的鼠标悬停事件时遇到问题。似乎路径元素的 strokeWidth 越小，检测鼠标悬停的成功率就越低。

另外，我正在使用 jquery-svg 插件进行绘图。

下面是尝试在路径元素上使用 jquery mouseover 事件进行检测的小提琴。 [鼠标悬停小提琴](http://jsfiddle.net/mwoodsmall/jEatE/2/)

下面是尝试通过将 mousemove 侦听器附加到 svg，然后使用 document.getElementFromPoint 来检测的小提琴。 [getElementFromPoint 小提琴](http://jsfiddle.net/mwoodsmall/ZP2TK/76/)

这些似乎都不能可靠地工作，尤其是在鼠标快速移动的情况下。是否可以使这些中的任何一个更敏感以更好地检测鼠标悬停？或者也许是更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:01:19.387

浏览器的工作方式，您不会`mouseover`连续获得事件，但每次操作系统更新光标位置时您都会获得一个。如果鼠标移动得很快，你会得到一个相隔几个像素的事件。鼠标不会在文档上*滑动，它会**跳转*。这是一个显示每个事件发生位置[的 jsfiddle 。](http://jsfiddle.net/NAnys/1/)您无法`mouseover`为光标的两个连续位置之间的所有元素获取事件。

您可以做一些不同的事情：记住`mousemove`事件的先前位置，计算该点与当前鼠标位置之间的线，并计算该线与文档中所有其他形状之间的所有交点。但这将是资源密集型的，因为没有可用的 API，您必须自己计算交叉点。有一个[图书馆](http://www.kevlindev.com/gui/math/intersection/index.htm)可以帮助你。

# objective-c - 故事板在uialertview之后不会改变视图

> ID：12202429
> 
> 赞同：-2
> 
> 时间：2012-08-30T17:36:02.670
> 
> 标签：objective-c, xcode, ios5, uialertview

我在执行 UIAlertView 时遇到了麻烦，（警报视图工作正常）但是...我无法执行到另一个窗口的 segue... 转换类型是模态的...有什么帮助吗？

```
if([txtPeticion hasText] )
{
   alertaVeladora = [[UIAlertView alloc]
                          initWithTitle:@"Santuario Virtual" 
                          message:@"Gracias por compartir tu veladora!" 
                          delegate:self 
                          cancelButtonTitle:nil
                          otherButtonTitles:nil];

    [alertaVeladora show];  
    [self postMessage:txtPeticion.text shareTw:shareTwitter shareFb:shareFacebook withEmail:email];
    txtPeticion.text = @"";
    [self performSelector:@selector(dismissAlert:) withObject:alertaVeladora afterDelay:1.0f];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:55:46.117

如果我理解正确，您想在用户按下 AlertView 上的关闭按钮时执行 segue 吗？要在按下按钮时执行操作，请使用以下代码：

```
if([txtPeticion hasText] )
{
   alertaVeladora = [[UIAlertView alloc]
                      initWithTitle:@"Santuario Virtual" 
                      message:@"Gracias por compartir tu veladora!" 
                      delegate:self 
                      cancelButtonTitle:nil
                      otherButtonTitles:nil];

[alertaVeladora show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex  
{
    if(alertView.tag == 1)
    {
        // Perform Segue
        [self performSegueWithIdentifier: @"MySegue" sender: self];

    }
} 
```

# jquery - jQuery Validation - 如何让生成的错误标签出现在 div 的末尾

> ID：12202431
> 
> 赞同：0
> 
> 时间：2012-08-30T17:36:13.507
> 
> 标签：jquery, jquery-validate

我有这样的情况：

```
<div>
  <label>Text</label>
  <input type="text" id="email">
  <label>Text</label>
  <input type="text" id="name">
</div> 
```

使用 jQuery 验证库（使用所有默认值进行验证），将生成电子邮件“错误”标签，如下所示：

```
<div>
  <label>Text</label>
  <input type="text" id="email">
  <label>ERROR:|</label>
  <label>Text</label>
  <input type="text" id="name">
</div> 
```

但我的目标是像这样得到它：

```
<div>
  <label>Text</label>
  <input type="text" id="email">
  <label>Text</label>
  <input type="text" id="name">
  <label>ERROR:|</label>
</div> 
```

我该怎么做呢？

[jQuery 验证库](http://docs.jquery.com/Plugins/Validation)

**编辑：** 我只是在 invalidHandler 事件中附加标签时遇到的问题是，在 invalidHandler 事件之后才生成标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:54:30.917

验证库中有一个 errorPlacement 函数。

```
$('.inputForm').validate({
   ... settings ....
   errorPlacement: function(error, element) {
      error.appendTo(element.parent());
   },
   ... other settings ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:40:23.503

只需为您的主 Div 分配一个 Id，然后将错误附加到该 Div。例如

$("div#divid").append("error");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:58:11.977

jQuery Validation Plugin 将始终预先添加错误标签**，除非**您先添加自己的标签。所以...

```
<div>
 <label>Text</label>
 <input type="text" id="email">
 <label class="error" style="display:none"></label>

 <label>Text</label>
 <input type="text" id="name">
 <label class="error" style="display:none"></label>
</div> 
```

确保将类设置为与插件使用的相同，并默认隐藏元素。

# java - 如何从其他活动中调用主要活动中的方法？

> ID：12202432
> 
> 赞同：1
> 
> 时间：2012-08-30T17:36:14.937
> 
> 标签：java, android, methods, android-activity, static-methods

我想从其他活动中调用主要活动中的公共方法。我怎样才能做到这一点？

```
class MainActivity extends Activity {
    public void myMethod() {}
}

class MyActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // How can I call myMethod() in MainActivity?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:48:45.593

这取决于。

1.  在这种情况下，如果您只想使用一些共享功能（例如进行一些计算的代码）。

    我建议将此共享功能移动到某个独立类并从那里调用它。

2.  如果你想调用 MainActivity，那么 MainActivity 对 MainActivity UI 做了一些事情，你将不得不使用 Intent ( [http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html) )，因为 MainActivity 应该是首先恢复，并且只有在此之后它才能对 UI 执行某些操作。

    在这种情况下，您可能需要在 Intent 中添加一些额外的内容，这些内容将由 MainActivity 代码（在 onCreate 或 onResume 中）解析并调用适当的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:53:28.973

实现`static`、传递`activity`、实例化，还是更好地重新考虑设计方法？我不认为你应该`activity`从你的另一个中调用一个方法`main activity`- 可能会更好地制作一个`new class`?

静态代码：

```
class MainActivity extends Activity 
{
    public void myMethod() 
    {
        MyActivity.runMyMethod();
    }
}

class MyActivity extends Activity 
{
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
    }

    public static void runMyMethod() 
    {
        //Run code...
    }
} 
```

实例化活动：

```
class MainActivity extends Activity 
{
    public void myMethod() 
    {
        MyActivity myActivity = new MyActivity();
        myActivity.runMyMethod();
    }
}

class MyActivity extends Activity 
{
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
    }

    public void runMyMethod() 
    {
        //Run code...
    }
} 
```

通行证活动参考：

```
class MainActivity extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
            OtherActivity otherActivity = new OtherActivity(this);
    }

    public void yourMethod()
    {
    }

}

class OtherActivity extends Activity
{
    MainActivity mainRefrence;
    OtherActivity(MainActivity main)
    {
        mainRefrence = main;
    }

    public void onCreate()
    {
        mainRefrence.yourMethod();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-23T00:47:03.603

**如何从另一个活动中调用 MainActivity 中的方法**

有时你不能将方法设为静态，因为它依赖于 MainActivity 中的所有其他状态。将所有依赖状态设为静态无异于将**所有内容都设为全局**，这不是一个好主意。

想要在 MainActivity 上调用非静态方法也没有错——就像一个类调用另一个类一样。

这是你要做的：

您的应用程序在您的所有活动中共享（前提是它们都在同一个进程中）。此应用程序可用于存储状态。尽管一个明智的想法是存储您的活动实例并让它们存储各自的状态，这就是我们要做的。

1.  创建您自己的应用程序子类：

    `public class MyApplication extends Application { MainActivity mainActivity; }`

2.  调整清单：

    `<application android:name=".MyApplication" ...`

3.  在 MainApplication 初始化`MyApplication.mainActivity`

    `@Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); MyApplication ma = (MyApplication)getApplication(); ma.mainActivity = this; ...`

4.  在`OtherActivity`检索 MainActivity 实例。

`private MainActivity mainActivity;`

```
 @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        MyApplication ma = (MyApplication)getApplication();
        mainActivity = ma.mainActivity;
        ... 
```

5.  利用 mainActivity 实例调用方法：

`mainActivity.someMethodOnMainActivtiy();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:50:37.570

将 myMethod() 声明为静态的。

```
public static void myMethod()
{
...
} 
```

在你的应用程序的任何地方调用它**`MainActivity.myMethod();`**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:54:10.157

如果您要从任何活动中调用静态方法，则应该有一个实用程序或帮助程序类，您可以在其中从任何地方静态调用这些方法

这是帮助程序类的示例

```
 public Class ActivityHelper{

    public static void myMethod(Context context){
    // If you need to do something with your Context

    }

/* and you can create a lot of  static methods that you would need to use from any activity or service on your app*/

} 
```

# c - 如何在堆栈上声明一个采用单个函数参数的 lua_CFunction？

> ID：12202436
> 
> 赞同：0
> 
> 时间：2012-08-30T17:36:24.140
> 
> 标签：c, lua

我想知道如何使用 Lua C API 创建一个 lua_CFunction ，它需要堆栈上的单个函数参数？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:02:49.753

[在书里。](http://www.lua.org/pil/26.1.html)
[在手册中。](http://www.lua.org/manual/5.2/manual.html#lua_CFunction)

```
// lua function that expects a single number argument
int myfunction(lua_State* L)
{
    double argument = lua_tonumber(L, 1);
    return 0;
} 
```

# clojure - 如何对记录列表的键值求和？

> ID：12202438
> 
> 赞同：5
> 
> 时间：2012-08-30T17:36:25.580
> 
> 标签：clojure

例如：

```
{defrecord Item [cost value]}
{def items [(Item. 20 50)
            (Item. 30 40)
            (Item. 10 70)] 
```

我将如何对物品的成本求和？（所以我会得到 60）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T17:56:58.417

```
user=> (defrecord Item [cost value])
user.Item
user=> (def items [(Item. 20 50)
            (Item. 30 40)
            (Item. 10 70)])
#'user/items   
user=> (reduce + (map :cost items))
60 
```

# android - 在外部设备中查看数据表 odf 数据库

> ID：12202440
> 
> 赞同：0
> 
> 时间：2012-08-30T17:36:32.190
> 
> 标签：android, database, sqlite, device, adb

在外部设备中获取和可视化我的数据库的数据表的唯一方法是通过外部设备中超级用户权限的权限的归属？不存在另一种允许在模拟器中可视化数据表的方式吗？

我提出这个问题是因为这种超级用户特权方式不会激发我的安全感。

感谢您的关注（PS：对不起，错了，但英语不是我的母语:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:17:08.813

您可以添加功能，将数据库文件从内部只读应用存储导出到 SD 卡，只需让您的应用复制文件即可。

然后使用任何你必须从那里得到它的方法。适用于任何设备，无需root。

```
private void exportDb() {
    File database = getDatabasePath("myDb.db");
    File sdCard = new File(Environment.getExternalStorageDirectory(), "myDb.db");
    if (copy(database, sdCard)) {
        Toast.makeText(this, "Get db from " + sdCard.getPath(), Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(this, "Copying the db failed", Toast.LENGTH_LONG).show();
    }
}

private static boolean copy(File src, File target) {
    // try creating necessary directories
    target.mkdirs();
    boolean success = false;
    FileOutputStream out = null;
    FileInputStream in = null;
    try {
        out = new FileOutputStream(target);
        in = new FileInputStream(src);
        byte[] buffer = new byte[8 * 1024];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
        success = true;
    } catch (FileNotFoundException e) {
        // maybe log
    } catch (IOException e) {
        // maybe log
    } finally {
        close(in);
        close(out);
    }
    if (!success) {
        // try to delete failed attempts
        target.delete();
    }
    return success;
}

private static void close(final Closeable closeMe) {
    if (closeMe != null)
        try {
            closeMe.close();
        } catch (IOException ignored) {
            // ignored
        }
} 
```

# jquery - 如何设置 JQuery 对话框内容的样式？

> ID：12202448
> 
> 赞同：1
> 
> 时间：2012-08-30T17:37:03.060
> 
> 标签：jquery, dialog, styles, jquery-ui-dialog

**我正在尝试单击一个链接并将该文本与其原始样式（不是对话框的样式）一起放入一个 jquery 对话框中？**

我正在使用 jquery 通过鼠标（如 Firebug）进行元素选择，然后单击该元素后，我想将其添加到`div`jquery 对话框内部。除了样式之外，一切都很好 - 我希望单击元素的样式在对话框内部与在第三方页面上的样式相同。

我在这里使用*www.wsj.com*作为示例，但它可以是任何站点——当它打开时，单击右侧的订阅或登录链接（它们是橙色的，直到您将鼠标悬停，此时它们变为白色）。

所以——如果我点击订阅——我想要的只是在对话框中有一个橙色链接，其字体大小和系列与*www.wsj.com 上的字体大小和系列相同。*

**笔记：**

*   如果无法获得原始的非悬停颜色（橙色），我会选择悬停颜色（白色）。我只是不希望对话框样式指定的颜色（无论它是什么 - 在本示例中显示为蓝色）。
*   我需要由对话框 CSS 设置“hello world”div 的样式，就像目前一样

我怀疑周围的东西`dialogClass`可能会这样做，但我无法让它发挥作用。

感谢任何可以在这里帮助我的人！

```
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<style>
    .ui-widget-header { border: 1px solid green; background: #1f84f5 url(images/ui-bg_highlight-hard_75_1f84f5_1x100.png) 50% 50% repeat-x; color: #ffffff; font-weight: bold; font-size: 20pt; }
    .ui-widget-content { border: 1px solid #aaaaaa; background: #ffffff url(images/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x; color: #222222;  font-size: 20pt;}
</style>
<script>
    var $j = jQuery.noConflict();
    var horiz = ($j(window).width() / 2) - (750 / 2);
    $j(document).ready(function() {
        // MOUSE ENTER  
        $j("div,a").mouseenter(function (e) {
            $j(this).css("outline","3px solid green");
            var target = event.target || event.srcElement;
            stuff = target.outerHTML;
        });
        // MOUSE OUT    
        $j("div,a").mouseout(function (e) {
            $j(this).css("outline","0px solid");
        });
        // CLICK    
        $j("div,a").click(function (e) {
            e.stopPropagation();
            e.preventDefault();
            var thisCOL = $j(this).css("color"); 
            alert('to check : thisCOL='+thisCOL);
            document.getElementById('contents').innerHTML = stuff;
            $j( "#thedialog" ).dialog({
                title: "Dialog",
                height:'auto', 
                minHeight:300, 
                width:780,
                position: [horiz,50],
                modal: true,
                buttons: {
                    "Cancel": function() {$j(this).dialog( "close" ); },
                    "Save": function() {$j('#myform').submit(); }
                }
            });
        });
    });
</script>
    </head>
    <body>
<?php 
    $url = 'http://www.wsj.com';
    $data = file_get_contents($url);
    $data = '<head><base href='.$url.'/></head>'.$data;
    echo $data;
?>
<div id="thedialog" title="Simple dialog box" style="display:none">
    <div id="something">Hello world</div>  <!-- I need this to stay black, not inherit the wsj.com color -->
    <div id="contents">I want this text to be styled</div>  <!-- to be the right color from wsj.com -->
</div>
<!-- FORM submission code from dialog SAVE button left out for clarity  -->
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:48:45.977

在对话框中维护链接颜色等的最简单方法是在当前的 css 中添加另一个`a {}`css。

**#1：**`a, body .ui-widget-content a { /* whatever you want for both of them */ }` body 添加到 trump css 规范方面，jQuery UI 添加的 css。

[**示例 #1**](http://jsfiddle.net/k8H9f/)

**#2：** `#keepOriginal a { color:#5279a4; }` #keepOriginal 是围绕它的一些 Div（甚至是围绕所有页面的 div 包装器。）

[**示例 #2**](http://jsfiddle.net/qzduy/)

# android - 跟踪开始新活动

> ID：12202452
> 
> 赞同：0
> 
> 时间：2012-08-30T17:37:10.667
> 
> 标签：android, android-activity, android-logcat

我想跟踪新活动的开始，我使用此代码仅获取 I:ActivityManager ：

```
process = Runtime.getRuntime().exec(
                            "/system/bin/logcat ActivityManager:I"); 
```

但它会获取所有 logcat 并且不使用此类标记进行过滤。

哪里有问题 ？

访问此链接：

[http://developer.android.com/tools/debugging/debugging-log.html#filteringOutput](http://developer.android.com/tools/debugging/debugging-log.html#filteringOutput)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:08:06.170

您需要告诉`logcat`隐藏其他消息。

```
process = Runtime.getRuntime().exec(
                        "/system/bin/logcat *:S ActivityManager:I"); 
```

`*:S`让其他一切都沉默

# ruby - 对象可以在方法执行之前重新初始化自己吗？

> ID：12202456
> 
> 赞同：0
> 
> 时间：2012-08-30T17:37:32.127
> 
> 标签：ruby, automated-tests, pageobjects

我可以在执行方法之前让对象重新初始化吗？我正在使用 Ruby 和 selenium 来测试一个网络应用程序，并且我正在尝试改进我的页面对象。例如

```
class Foo

  def initialize
    #stuff happens here 
  end

  def NewMethod
    self.initialize
    #What happens here is what I really want to happen 
  end 

end 
```

这是个好主意还是坏主意？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:37:39.997

提前说明：方法以小写形式编写。请替换`NewMethod`为`newmethod`.

如果你尝试`Foo.newmethod`你会得到一个错误。

你想让我做什么？您想定义创建对象的不同可能性吗？

你可以做什么：

```
class Foo
  def initialize
  end

  def self.newmethod
    me = self.new
    #Some actions ...
    me #Return the (modified?) object
  end 

end 

p Foo.newmethod #->#<Foo:0xb77d58> 
```

`Time`正在使用这样的东西。有`Time.new`, `Time.gm`, `Time.local`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:47:02.737

始终可以更改对象中包含的数据。您可以将所有初始化逻辑放入一个附加方法中，然后从您的自定义方法中调用它。

通常，您尝试做的事情听起来不是一个好主意...

# java - 如何将输出与java中的字符串进行比较？

> ID：12202457
> 
> 赞同：0
> 
> 时间：2012-08-30T17:37:32.810
> 
> 标签：java

我写了一个程序，它给出了类似的输出

“bbccaa”

java中有没有办法将它存储到一个字符串中并与另一个字符串进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:45:43.173

使用`equalsIgnoreCase()`or`equals()`比较**2 个 String 对象**....

```
String s = "hello";

String sOutput = "bbccaa";

if (sOutput.equalsIgnoreCase(s)){   // Ignore case while comparing

 }

if (sOutput.equals(s)){            // Consider case while comparing

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:40:49.503

你是什​​么意思'给出一个输出'？它是否将字符串打印到控制台？

假设你有类似的东西：

```
String s = ...; // Something that creates bbccaa
System.out.println(s); 
```

然后你可以这样做：

```
s.equals(otherString); 
```

比较两个字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:38:48.207

怎么样

```
"bbccaa".equals(anotherString) 
```

或者

```
"bbccaa".compareTo(anotherString) 
```

* * *

**看**

*   [`String`API文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:39:18.303

这个字符串是如何生成的？如果使用 Streams，则将流保存为字符串并使用 equals 方法

# xsl-fo - 有人知道如何在 XEP 中渲染 cgm 文件吗？

> ID：12202459
> 
> 赞同：0
> 
> 时间：2012-08-30T17:37:33.707
> 
> 标签：xsl-fo

显然 XEP 不支持 cgm 文件，所以我想知道是否有人知道任何插件或任何可以使用的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:44:47.210

没有我知道的插件。我过去所做的是拥有一个单独的 SVG 版本的图形并使用它。当 XML 转换为 XSL-FO 时，我修改了 NDATA ENTITY 声明以指向 SVG。

您也许可以在处理管道中将 CGM 转换为 SVG，但我不确定这会对性能产生什么样的影响，也不确定您将使用什么来进行转换。

Antenna House 确实支持 CGM（额外的 $$），但我从未使用过它。

# facebook - 图 api 中新引入的“字段扩展”会影响依赖图 api 从 Facebook 获取数据的现有应用程序吗？

> ID：12202462
> 
> 赞同：1
> 
> 时间：2012-08-30T17:37:46.883
> 
> 标签：facebook, facebook-graph-api, field

Facebook 在 Graph API 中引入了字段扩展功能，以帮助开发人员构建复杂的嵌套查询。 [https://developers.facebook.com/docs/reference/api/field_expansion/](https://developers.facebook.com/docs/reference/api/field_expansion/)

毫无疑问，此功能将给我们带来的好处。但是现有的应用程序呢？这会影响它们还是已经注意向后兼容性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:27:02.327

我是平台团队的一名工程师，致力于此功能。一切都是 100% 向后兼容；现有的应用程序不需要更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:41:52.127

从您链接的文档中 - “这是一项高级功能，对基本 Graph API 的简单性没有任何成本。”

我看不出 API 的这个特性与已经存在的基本用法不兼容的任何原因。否则，它将被宣布为一项重大更改

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-04T05:15:35.577

我的申请受到影响。`daily_active_users, weekly_active_users, monthly_active_users`on`graph.facebook.com/{APP_ID}`已经消失了它去哪儿了？

# c# - 如何在页面加载时运行的 jquery 脚本之后运行 C# 代码？

> ID：12202464
> 
> 赞同：1
> 
> 时间：2012-08-30T17:37:48.333
> 
> 标签：c#, javascript, jquery

我有一个网页，一旦页面准备就绪，就会加载并运行 jquery，如下所示：

```
$(document).ready(function () {
        navigator.geolocation.getCurrentPosition(showPosition, positionError);

        function showPosition(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            document.getElementById('div_latitude').innerHTML = latitude;
            document.getElementById('div_longitude').innerHTML = longitude;
        }

        function positionError(position) {
            alert("Error: " + position.code);
        }
    }); 
```

在我为 div_latitude 和 div_longitude 分配了它们的值之后，我想运行将自动使用此信息的代码。如何确保第二段代码将在 jquery 之后运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:39:16.397

您将不得不对服务器进行 AJAX 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:45:46.173

您可能希望将 jquery 中的状态检查为“完成”，并且可以对要执行的 C# 代码进行 AJAX 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:22:27.013

您必须进行 ajax 调用以与服务器端代码通信，以便在加载 jQuery 后传递所需的值。

代码如下。$(document).ready(function () { navigator.geolocation.getCurrentPosition(showPosition, positionError);

```
 function showPosition(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        document.getElementById('div_latitude').innerHTML = latitude;
        document.getElementById('div_longitude').innerHTML = longitude;
    }

    function positionError(position) {
        alert("Error: " + position.code);
    }
     makeAjaxCall();

});
  function makeAjaxCall()
   {
     $.ajax({
          type: "POST",
          url: "PageName.aspx/MethodName",
          data: "{}",
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function(msg) {
          // Ajax Call Successfull.
           }
       });
    } 
```

# objective-c - 从 unbutton 执行 segue 会导致“无法识别的选择器”错误

> ID：12202467
> 
> 赞同：0
> 
> 时间：2012-08-30T17:37:51.517
> 
> 标签：objective-c, ios, xcode

我已经通过单击按钮实现了一个简单的 segue。这是视图控制器代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
   {
{
    if (self.categoryInt == 1)
        [segue.destinationViewController setCategoryKey:SD_ADDITION];
    else if (self.categoryInt == 2)
       [segue.destinationViewController setCategoryKey:SD_SUBTRACTION];

}}

- (IBAction)category1Selected:(id)sender {
self.categoryInt = 1;
[self performSegueWithIdentifier:@"ShowWorksheet" sender:self];} 
```

从日志消息中，我可以看到它完全通过目标视图控制器上的 ViewDidLoad 运行，但随后出现错误：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[MainMenuViewController categorySelected:]：无法识别的选择器已发送到实例0x75360e0'

我没有在这些按钮上实现任何特定的选择器。我的 MainMenuViewController 中也没有“categorySelected”方法。被调用的方法是“category1Selected”。是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:50:48.907

我想你自己回答了这个问题。当您应该发送 category1Selected 时，您以某种方式发送“categorySelected”。

检查您之前是否在界面生成器中将按钮连接到 categorySelected。如果您之前已这样做，但随后在代码中将 categorySelected 的名称更改为 category1Selected，则界面构建器可能不会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:57:21.133

这通常是连接错误，请转到您的连接检查器并确保那里一切正确。

如果您不确定断开所有连接并重新连接，请仔细检查所有内容。

还要确保除了操作命令之外，您还没有将操作按钮连接为插座。

# php - 使用 PHP 和代理缓存进行动态图片加载？

> ID：12202468
> 
> 赞同：0
> 
> 时间：2012-08-30T17:37:52.737
> 
> 标签：php, image, caching, dynamic, proxy

我是[Wave Framework](http://waveframework.com/)的开发人员，这是一个轻量级框架，包含许多功能，可以更轻松地部署 API 和动态提供资源。

其中一项功能是按需图像编辑。例如，在我的服务器上，我有这个文件：

[http://www.waher.net/w/resources/images/logo.png](http://www.waher.net/w/resources/images/logo.png)

但在我的 HTML 中，我从这样的 URL 加载图像：

[http://www.waher.net/w/resources/images/160x160&logo.png](http://www.waher.net/w/resources/images/160x160&logo.png)

这个“160x160&logo.png”文件实际上并不存在，唯一存在的文件是“logo.png”。每个 HTTP 请求都被路由到 PHP，并解析文件 URL 中的参数以应用附加功能，例如图片分辨率。

为什么这很有用？如果我的系统有大量用户头像并且我的设计发生变化，我可以轻松更改头像图片 URL，一切都按预期工作。我永远不必重新生成所有用户的所有头像，尤其是那些不再存在于我的系统中并且只是浪费资源的用户。

但这是我的问题，如果我想实现 Nginx 在我的服务器上提供静态文件，我的系统无法工作。这是因为 Nginx 将尝试自己加载静态文件，如果找不到图片，则会抛出 404 Not Found 消息。我认为 Apache 和 Squid 也是如此。

我的一位客户特别要求他们希望通过 Nginx 来提供图像和资源，但他们仍然希望动态图像以方便开发和设计。

是否可以告诉 Nginx 或 Squid 将请求发送到 PHP，如果找不到图像文件本身，从 PHP 获取“动态”图像，然后通过 Nginx 将其发送给用户？同时总是在对同一文件的任何后续请求中从 Nginx 缓存中提供它？

我希望有动态加载图像文件的灵活性，同时也有 Nginx 在提供图像文件时的速度。这样的事情可能吗？我是否需要在 PHP 中设置允许这样做的特定文件头？（我已经设置了缓存和过期标头）。

谢谢！

# java - 使用 URL 类的 URL 的主机名

> ID：12202472
> 
> 赞同：1
> 
> 时间：2012-08-30T17:38:00.690
> 
> 标签：java, url

我使用 Java 中的 URL 类来检索 URL 的主机名部分，如下所示。

IE，如果 URL 是[https://hostname.mycompany.com](https://hostname.mycompany.com)，我希望输出只是 'hostname'

```
URL host = new URL(url);
String hostname = site.getHost().split("\\.")[0]; 
```

有没有更简单的方法来做到这一点？谢谢。

getHost 函数返回 'hostname.company.com' 而不是 'hostname'

# mongodb - 在数据库级别实现 Mongodb 分片并使集合不分片

> ID：12202474
> 
> 赞同：2
> 
> 时间：2012-08-30T17:38:05.293
> 
> 标签：mongodb, sharding

我正在尝试在我们的 mongoDB 数据库上实现分片，这是场景

我们有 1 台服务器正在运行配置服务器

我们有 2 台服务器运行名为 node1 和 node2 的 mongod 实例

我们有 1 台服务器运行 mongos

我已使用以下命令将服务器 node1 和 node2 添加为 mongos shell 中的分片服务器

db.runCommand( { addhard : "serverhostname[:port]" } );

后来我在 node1 中创建了数据库，并从 Mongos 为该数据库启用了分片

现在我们有 2 个分片服务器，根据 MongoDB 文档，mongos 应该放置一些创建节点 1（数据库实际驻留的位置）的集合和节点 2 上的一些集合。

我从 mongos 创建了 300 个集合，但所有集合仍然只发送到一台服务器上面提到的支持中有什么问题

注意： - 由于我无法升级应用程序层，因此我无法在集合级别进行分片，因此我有一个脚本可以为某些要求动态创建多个集合。

请就我们如何在数据库级别进行分片提供您的建议，以便集合在所有分片服务器之间平均分配。

我正在寻找一些解决方案，例如

如果我自动创建 300 个集合，mongos 应该在两个分片服务器的每一个中创建大约 150 或 100 个集合。

提前感谢您介入并帮助我解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:46:12.827

[除非您在它们上启用分片](http://www.mongodb.org/display/DOCS/Configuring+Sharding#ConfiguringSharding-ShardingaCollection)然后添加数据，否则集合不会自动分布在分片上。然后，这些分片集合将在两个分片上都有数据（分成块并自动平衡）。

直到您实际对集合运行命令，并且其中有足够的数据以便它们开始拆分和迁移块，然后它们都将保持在原来的位置。

那是因为每个数据库都有一个主分片，它不会改变。这是最初创建数据库的地方，也是所有非分片数据所在的地方。如果添加另一个数据库，mongos 应该在第二个分片上创建它，并为每个创建的数据库交替（如果超过两个，则为循环）。在每种情况下，在您对集合进行分片之前，它将仅保留在该数据库的主分片上。

# c++ - 使用Windows的c ++中的任意精度？

> ID：12202487
> 
> 赞同：0
> 
> 时间：2012-08-30T17:39:02.047
> 
> 标签：c++, numbers, arbitrary-precision

有没有可以在windows中相对容易实现的库？不久前我做了一些函数，它们使用数字数组来获得所需的结果。当我有时间时，我可能会在他们那里工作。

但是是否有任何这样的功能已经可以很容易地实现到 c++ 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:41:33.420

显然，人们在使用[GNU Multiple Precision Arithmetic Library](http://gmplib.org/) [for Windows](http://www.cs.nyu.edu/exact/core/gmp/)时很幸运。

# networking - 不同插槽上的 CPU 是如何通信的？

> ID：12202488
> 
> 赞同：7
> 
> 时间：2012-08-30T17:39:04.763
> 
> 标签：networking, cpu-architecture, multicore, motherboard

我正在调整我的并行 Java 程序的性能。我对建筑效果很好奇。

给定一台有两个 CPU 插槽的机器，每个插槽都有一个四核 Intel Xeon CPU，然后：

*   两个 CPU 是如何通信的，它们的通信速度有多快？
*   同一芯片上的两个内核的通信速度有多快？
*   同一芯片上的四个内核在通信或内存访问方面是否等效？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T18:35:16.853

如何将线程调度到内核以接近最佳内存性能取决于对内存的访问模式，通常不值得麻烦。如果您的程序是用 Java 编写的，那么您可能无法获得接近最佳性能所需的控制级别。

现代 CPU 具有集成内存控制器，现代多插槽系统具有分布式内存。这就是所谓的

[非统一内存访问 (NUMA)](http://en.wikipedia.org/wiki/Non-Uniform_Memory_Access)

在现代多插槽英特尔处理器中，插槽之间的通信是使用 QPI 完成的

[QuickPath 互连 (QPI)](http://www.intel.com/content/www/us/en/io/quickpath-technology/quick-path-interconnect-introduction-paper.html)

QPI 是指定其工作方式的英特尔架构。AMD 的等价物是 HyperTransport。您可以在此处了解有关各种架构的更多信息：

[系统架构](http://www.qdpma.com/systemarchitecture/SystemArchitecture_2009.html)

对 1 级数据缓存中未命中的内存的访问可能由 2 级数据缓存（在同一个套接字中）提供服务，或者由英特尔所谓的“最后一级缓存 (LLC)”提供服务，该缓存位于具有该内存地址的内存控制器的套接字。在另一个插槽中访问 LLC 可能需要几十个处理器周期，但仍然比访问 DRAM（超过一百个处理器周期）快得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T17:55:16.297

> 1) 两个 CPU 是如何通信的，它们的通信速度有多快？

大多数时候，它们通过内存或最近的共享内存层次结构级别进行通信。（SMP 和 NUMA 上的系统内存都被视为共享级别；即使在 NUMA 中它是通过另一个芯片的内存控制器访问。这只是 Non-Uniform=较慢的访问）

> 2) 同一芯片上的两个内核的通信速度有多快？

同一芯片上的内核通常共享 L2 或 L3 缓存。不同芯片上的内核通过内存或使用缓存一致性协议的缓存到缓存交互进行通信。

因此，如果 1（不同的芯片）在 CPU 之间传递的内存速度（带宽）将接近普通内存读/写。在情况 2（相同芯片）中，这个速度可以更大，最高可达缓存读/写速度。

在案例 1 中，通信延迟将是数百个 CPU 滴答声，在案例 2 中将是几十个。

> 3) 同一芯片上的四个内核在通信或内存访问方面是否等效？

同一芯片的所有四个内核通常与 RAM 具有相同的距离。这取决于芯片架构和实现；对于一些较旧的英特尔，例如多核芯片实际上是将两个芯片封装在一个封装中。

# visual-c++ - 如何在 mfc 应用程序中将文本打印到视图上？

> ID：12202490
> 
> 赞同：0
> 
> 时间：2012-08-30T17:39:06.217
> 
> 标签：visual-c++, mfc

CDC 类的什么功能允许您在客户区显示字符串？

这不起作用：

```
 void CpuzzleView::OnDraw(CDC* pDC)
 {
  CpuzzleDoc* pDoc = GetDocument();
  ASSERT_VALID(pDoc);
  if (!pDoc)
    return;

  pDC->Rectangle(50,50,100,100);
  pDC->MoveTo(75,75);
  std::cout << "3"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:41:24.653

您可以使用[`CDC::TextOut`](http://msdn.microsoft.com/en-us/library/yzabsdzx)或[`CDC::DrawTextEx`](http://msdn.microsoft.com/en-us/library/7dfdzwya.aspx)。

# javascript - 一种将 Apache Thrift JS 绑定与 Backbone.js 结合使用的方法？

> ID：12202494
> 
> 赞同：2
> 
> 时间：2012-08-30T17:39:17.680
> 
> 标签：javascript, backbone.js, thrift

我有一个 Thrift API（使用[http://thrift.apache.org/](http://thrift.apache.org/)上的软件）。

我想将 Thrift JavaScript 绑定（[示例](http://svn.apache.org/repos/asf/thrift/trunk/tutorial/js/tutorial.html)）与 Backbone.js 结合使用，而不是 REST。

这可能吗？有没有传统的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:59:01.933

当然。然后整个“同步”层是可替换的。Backbone.js 文档有一些关于[同步层](http://backbonejs.org/#Sync)的信息。这是默认[(REST) 实现](http://backbonejs.org/docs/backbone.html#section-162)。

可以在[主干本地存储扩展](http://documentcloud.github.com/backbone/docs/backbone-localstorage.html)中找到替换同步层的简单示例。

在您的情况下，您只需编写用于读取、创建、更新和删除的代码，Backbone 会为您处理其余的工作。

另请注意，您可以全局或在实例级别覆盖同步层（通过在`Model`or`Collection`实例上设置“同步”属性）

# android - 我可以将图像设置为相对布局吗？

> ID：12202496
> 
> 赞同：0
> 
> 时间：2012-08-30T17:39:18.410
> 
> 标签：android, image, android-relativelayout

我有两个相对布局，我想以`Image`编程方式将（从资源中绘制）设置为其中一个布局。图片不能是背景图片。我尝试过使用`setBackgroundResource()`，但这并没有达到目的。有没有一种方法可以为我的布局设置前景图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:42:43.293

您可以使用 ImageView。

```
Bitmap bmp1 = BitmapFactory.decodeResource(getResources(), R.drawable.tnj1);

ImageView img = new ImageView(your_activity_name.this);
img.setImageBitmap(bmp1);

RelativeLayout.LayoutParams imgParams = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
img.setLayoutParams(imgParams);
YOUR_RELATIVE_LAYOUT.addView(img); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:44:00.410

以下代码应该可以解决问题：

```
ImageView img_view = new ImageView(context);
img_view.setImageDrawable(your_image_here);
img_view.setLayoutParams(new RelativeLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
layout.addView(img_view); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:40:58.133

将 ImageView 子项添加到具有`match_parent`高度和宽度属性的布局中，然后将图像设置为该 ImageView。

# java - 如何在jsp中获取日期值并将其更新到mysql

> ID：12202498
> 
> 赞同：0
> 
> 时间：2012-08-30T17:39:20.220
> 
> 标签：java, sql, jsp, servlets

我必须将日期动态插入数据库，我应该如何获取文本值并更新它？我已经尝试了以下代码。

```
<input type="Text" name="tbox" id="${up.adId}" maxlength="15"size="18" value="${expiryDate}"><a href="javascript:NewCal(${up.adId},'mmddyyyy',false,24)"> 
```

`UPDATE classifiedads SET expiry_date='"+ textBox[i]+"' where`

在哪里应该从上面的代码中检查什么条件。

我想将文本框中的编辑值保存到保持不变的数据库中，但是由于我最初将每个文本框的值作为到期日期，我无法写出编辑值的条件，请帮助我。

如果我在没有更新条件空值的情况下更新

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:42:18.873

在 servlet 上，您将以 的形式收到日期`String`，您需要执行以下步骤以从此字符串日期中获取日期

*   验证字符串日期的无效性和格式
*   使用从字符串日期转换为日期实例`SimpleDateFormat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:37:48.387

您可以通过更改查询来解决此问题`to_date(<value-to-insert>,'<format>')`

前任：`select to_date('2007-01-01 12:00:01 AM','yyyy-mm-dd hh:mi:ss pm') as dt from dual;`

在你的情况下：

`UPDATE classifiedads SET expiry_date=to_date('"+ textBox[i]+"','mmddyyyy') where " e.t.c`

如果有任何问题，请告诉我。

# sql - SQL查询中的datetime字段等于9999-12-31 00:00:00时需要替换

> ID：12202501
> 
> 赞同：1
> 
> 时间：2012-08-30T17:39:36.880
> 
> 标签：sql, sql-server, tsql, datetime, case-when

我有一个名为 ACTUALCLOSEDATE 的日期时间字段，当相应的字段名为 STATUSNUM = 0 时，该字段等于 9999-12-31 00:00:00。当 STATUSNUM 更改为 1（记录关闭时）时，ACTUALCLOSEDATE 的值为更改为当前日期时间。

在我的查询中，我想用 'Still Open' 替换 ACTUALCLOSEDATE 当它 = 9999-12-31 00:00:00 时的值，而我只想要日期。

我在下面尝试了错误的代码。想法？我不知道 IIF 是否可用 SQL 2008 r2，是吗？如果可以，我可以使用它吗？

```
/* This is what I need but it dosen't work in SQL 2008 R2 */
SELECT
IIF (YEAR(ACTUALCLOSEDATE)=9999, "Still Open", ACTUALCLOSEDATE) AS ActCloseDate,
FROM OPPORTUNITY

/* This dosen't work either */
SELECT
CAST YEAR(ACTUALCLOSEDATE)
    WHEN 9999 THEN 'Still Open'
    ELSE ACTUALCLOSEDATE
    END AS Act_Close,
FROM OPPORTUNITY 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:43:25.830

您的列必须是一致的数据类型；在您的实例中，您正试图有条件地显示日期或 varchar。

你可以做：

```
SELECT 
    CASE YEAR(ACTUALCLOSEDATE)     
    WHEN 9999 THEN 'Still Open'     
    ELSE CAST(ACTUALCLOSEDATE AS nvarchar(25))
    END AS Act_Close
FROM OPPORTUNITY 
```

您可能希望使用将表达式`CONVERT`中的日期格式化`ELSE`为首选格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:43:55.573

这是语法：

```
SELECT
    CASE WHEN YEAR(ACTUALCLOSEDATE) = 9999 
      THEN 'Still Open'
      ELSE CONVERT(VARCHAR, createDate, 120) --Format: yyyy-mm-dd hh:mi:ss(24h)
    END AS Act_Close,
FROM OPPORTUNITY 
```

您需要将日期列转换为 a`varchar`以便它与“仍然打开”的类型相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:42:21.957

`IIF`从 SQL Server 2012 开始可用。

您可以`CASE`在 2008 R2 中使用该语句。请注意，它是`CASE`，不是`CAST`。

# coq - Coq：实例化多个泛化？

> ID：12202502
> 
> 赞同：0
> 
> 时间：2012-08-30T17:39:39.223
> 
> 标签：coq, theorem

```
Require Import ProofWeb.

Variables x y z a : D.
Variables p: D * D * D -> Prop.

Theorem letra_a : (all x, p(a,x,x) /\  (all x, ( all y, ( all z, p(x,y,z))) -> p(f(x),y,f(z)))) -> p(f(a),a,f(a)).
Proof.
intros.
imp_e (p(a,a,a)).
destruct H. 
```

现在问题出在哪里，我需要 p (a, a, a) -> p (fa, a, fa) 从所有 x, all y, all z, p (x, y, z) 中很明显 - > p (fx, y, fz) 只需要实例化 x,y 和 z = a，但我做不到。我所做的任何事情在这里都不被接受。

```
f_all_e H0. 
```

给我错误：战术失败：（论证不是一个普遍量化的公式或不符合目标）。

如果我尝试 all_e (all x, all y, all z, p (x, y, z) -> p (fx, y, fz))。错误：战术失败：（论点不是普遍的量化）。

你能帮忙吗？我已经全面挖掘 Coq 信息，打印 PDF，一直在尝试但仍然无法掌握 Coq 的语法和逻辑流程，我仍然非常迷失其中。

提前感谢您的任何指点！

找到的解决方案：

```
Theorem letra_c : (all y, q b y) /\ (all x, (all y, (q x y -> q (s x) (s y))) ) -> ( exi z, (q b z /\ q z (s (s b))) ).
Proof.
intros.
destruct H.
exi_i (s b).
con_i.
apply H.
imp_e (q b (s b)). 
all_e (all y, (q b y -> q (s b) (s y))).
all_e (all x, (all y0, (q x y0 -> q (s x) (s y0)))).
apply H0.
apply H.
Qed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:17:18.597

```
H : all x, p (a, x, x)
H0 : all x, all y, all z, p (x, y, z) -> p (f x, y, f z)
H1 : p (a, a, a)
============================
 p (f a, a, f a) 
```

在常规 Coq 中，您可以：

*   `apply H0`，这将产生目标`p (a, a, a)`，很容易解决；

*   `specialize (H0 a a a)`，这会给你`H0: p (a, a, a) -> p (f a, a, f a)`；

*   或者只是去`exact (H0 _ _ _ H1)`完成它。

现在，我尝试使用[http://prover.cs.ru.nl/index.html](http://prover.cs.ru.nl/index.html)来完成您的目标，但我也找不到该命令。

我会考虑某种向前的全部消除，或向后的方式，但我也无法让它发挥作用。你有这方面的文件吗？

# java - 从两个或多个 Servlet 同步访问一个文件

> ID：12202510
> 
> 赞同：1
> 
> 时间：2012-08-30T17:40:29.517
> 
> 标签：java, servlets, synchronization

我正在编写一个基于 Tomcat 和 Java Servlet 的 Web 应用程序。就我而言，有一些（不同的）Servlet 必须访问同一个文件，我需要一种机制来同步这些访问。

我尝试使用我称为“控制器”的新 Servlet（带有空`doGet()`和`doPost()`方法），以便将它用作我需要的每个对象（锁、条件变量等）的“容器”。不幸的是，这种方法基于使用方法`getServlet(name)`, from `ServletContext`，该方法已被弃用，并且在我的情况下不起作用。

这类问题有什么已知的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:43:32.877

这类问题通常通过引入额外的抽象层来解决。
将对文件的访问封装在一个对象中，并使用这个新对象来协调对文件的访问。
servlet 都将使用此中间对象来访问文件，并且此对象将处理任何并发/多线程问题。不需要你说的新的servlet。
您可以使用[Servlet 上下文](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)来存储对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:46:45.410

您可以使用文件锁定[`FileChannel.lock`](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html#lock%28long,%20long,%20boolean%29)：

[如何使用 java 锁定文件（如果可能）](https://stackoverflow.com/questions/128038/how-can-i-lock-a-file-using-java-if-possible)

# javascript - 跳转到 vim 中的节点文档

> ID：12202512
> 
> 赞同：3
> 
> 时间：2012-08-30T17:40:44.183
> 
> 标签：javascript, node.js, vim

全部，

我最近开始做一些 javascript 编码。我使用了[python-mode vim 插件](https://github.com/klen/python-mode)，并且正在寻找具有类似功能的 javascript 插件。

我已经掌握了大部分重要的东西，所以我最想要的是一个插件，它可以直接跳转到内置库的文档。在 python 模式下，这是通过将光标放在函数调用上来完成的并按下`D`。它打开一个包含文档内容的新拆分。

粗略的谷歌搜索没有显示任何与 javascript/node.js 类似的东西，所以我想知道是否有可用的东西，或者我是否需要自己动手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:12:08.657

如果在浏览器中显示文档对您有用，我创建了一个名为[dochub.vim](https://github.com/stephenmckinney/vim-dochub)的 Vim 插件。

它将光标放在类、属性或方法上并键入`JJ`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:46:56.203

恐怕JavaScript没有这样的东西。

Python 模式使用 Python 的内置`help('keyword')`但我不知道在任何 JavaScript 引擎中有这样的事情。甚至没有nodejs。不过，我想被证明是错误的。

你可以想出一些`https://developer.mozilla.org/fr/search?q=Date`在光标打开时调用的东西`Date()`。但我认为期望更多是不现实的。

你看过[那里](http://www.vim.org/scripts/script_search_results.php?keywords=javascript&script_type=utility&order_by=creation_date&direction=descending&search=search)吗？

# python - 具有基于方法的端点的 Werkzeug URL 映射仅返回 Method Not Allowed

> ID：12202515
> 
> 赞同：1
> 
> 时间：2012-08-30T17:40:53.463
> 
> 标签：python, methods, werkzeug, url-mapping, http-status-code-405

这是我们映射的截断版本：

```
url_map = Map([
    Rule('/actions/<int:id>/', endpoint='actions.get_action', methods=('GET')),
    Rule('/actions/<int:id>/', endpoint='actions.put_action', methods=('PUT')),
    Rule('/actions/<int:id>/', endpoint='actions.dismiss_action', methods=('DELETE'))
]) 
```

[经过大量搜索，我在（ http://nullege.com/codes/search/werkzeug.routing.Rule](http://nullege.com/codes/search/werkzeug.routing.Rule) ）找到了一些人做同样事情的例子......但是当我这样做时，所有三个都作为不允许的方法返回。我可能会做

```
... methods=('GET', 'PUT', 'DELETE') ... 
```

并且有一个将请求分派给备用函数的端点，但是根据我的阅读，我的映射应该可以正常工作，或者至少，如果我知道正确的语法（我没有在外面找到），可以工作上面的链接。）

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T04:35:30.583

在您的规则列表中，方法参数不应该是列表吗？就像是

```
... methods=('GET',) ... 
```

注意使它成为元组的逗号。

# asp.net - System.Web.Optimization 是 .Net Framework 4.5 的一部分吗？

> ID：12202516
> 
> 赞同：21
> 
> 时间：2012-08-30T17:40:55.900
> 
> 标签：asp.net, .net, .net-4.5

我已经通过 Visual Studio 2012*试用*[`Microsoft.Web.Optimization`](http://nuget.org/packages/microsoft.web.optimization)包使用了一段时间。我在想优化命名空间将成为 .NET 4.5 的一部分，如此处[所述](http://msdn.microsoft.com/en-us/library/system.web.optimization%28v=vs.110%29.aspx)。

 *但是，我安装了[Visual Studio 2012 和 .NET Framework 4.5](http://www.microsoft.com/visualstudio/11/en-us/downloads)`System.Web.Optimization`的新版本，现在默认没有命名空间！我必须通过[NuGet安装包](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization)

VS 2012 Ultimate 版本还没有完成吗？或者，`Microsoft.Web.Optimization`命名空间不在 .NET 4.5 中吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T18:03:59.160

Microsoft 正在采用 VS2012 的新策略，其中他们将更多新功能组件化为可以通过 nuget 下载的包。例如，Entity Framework、MVC4、WebApi、Web Optimization等现在都是包而不是框架的一部分。

原因是这些系统现在可以很容易地升级到框架的其余部分之外。因此，无需等待 .NET 5 就可以轻松发布 MVC5，并且只要准备好就可以发布 Web Optimization v2。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T18:11:08.233

这是一个类似的问题：

*   [如何为 MVC-3-converted-to-4 应用添加对 System.Web.Optimization 的引用](https://stackoverflow.com/questions/9475893/how-to-add-reference-to-system-web-optimization-for-mvc-3-converted-to-4-app)

`Microsoft.Web.Optimization`包现在是“旧版”：

*   [Microsoft.Web.Optimization 1.0.0-beta2](http://nuget.org/packages/microsoft.web.optimization)

新包是`Microsoft.AspNet.Web.Optimization`：

*   [Microsoft ASP.NET Web 优化框架 1.0.0](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization)

*`Microsoft.AspNet.Web.Optimization`并且`Microsoft.Web.Optimization`不是 .NET Framework 4.5 的一部分。*

*   [.NET Framework 4.5 类库](http://msdn.microsoft.com/en-us/library/gg145045)*

# xcode - 在 ios (Xcode 4.3) 中创建存档构建

> ID：12202518
> 
> 赞同：1
> 
> 时间：2012-08-30T17:40:58.463
> 
> 标签：xcode, build, archive

我无法在 xcode 4.3 中创建存档版本。

即使我已将发布配置设置为正确的配置文件并选择了“为存档构建”，“AppName.app”文件仍为 RED

补充：当我单击左侧栏中的“AppName.app”时，这是我在 xcode 窗口中看到的内容：

![在此处输入图像描述](../Images/96811c80d300cf318e08bcd43099637a.png)

我还在查找器窗口中看到了相同的图像，我已经压缩了这个文件并将其作为应用程序二进制文件发送。

我希望这不是问题？

谢谢， 乌巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:49:59.860

如果您选择“IOS Device”，然后选择“Archive”，在构建 XCode 结束时会自动打开“Organizer”，您可以看到存档包

# matlab - 什么是另一个比 randperm 执行时间更快的逻辑

> ID：12202521
> 
> 赞同：1
> 
> 时间：2012-08-30T17:41:18.443
> 
> 标签：matlab, random

我是新的matlab用户。现在，我正在使用 matlab 软件做我的工作。但我有问题要改进我的代码以便快速执行。现在，我必须创建一个矩阵 (A,10,C))，其值为整数 [1 10]。目前，我正在使用逻辑`randperm`。这是我的代码：

```
for c=1:C,
   for a=1:A,
       result(a,:,c)=randperm(10);
   end
end 
```

但是当我尝试使用个人资料查看器进行分析时。该代码需要更多时间。

所以我希望有人想分享他/她的经验。感谢您。看待

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:01:45.480

这是一个替代解决方案，但它没有`randperm`关于随机数分布的良好特性：

```
[~,result_alt] = sort( rand(A,10,C) , 2); 
```

快速配置文件显示，您的方法平均需要大约 1.6e-3 秒，`A = C = 10`而此方法平均需要 5.6e-5 秒。

### 笔记：

旧版本的 MATLAB 不支持该`~`运算符。如果是这样，请尝试：

```
[vals result_alt] = sort( rand(A,10,C) , 2); 
```

并忽略`vals`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:26:18.723

这必须很快。

```
result = ceil(10 * rand(A, 10, C)); 
```

# java - Jackson 1.8.5（用于 JSON）不反序列化：“没有找到这样的类”

> ID：12202522
> 
> 赞同：5
> 
> 时间：2012-08-30T17:41:20.217
> 
> 标签：java, json, jackson, deserialization

我将 JSON 用于我的 RESTful 服务，并且我有 JSON（作为有效负载载体格式）。

我`@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = "class")`在界面上使用`IntA`。类`SuperClass`实现`IntA`。`MyClass`延伸`SuperClass`

我遇到的问题有点奇怪。当我使用独立的主程序序列化和反序列化我的类时，它工作得非常好。但是，当我在战争中将它部署在 tomcat 上并尝试反序列化时，它说没有找到这样的类

堆栈跟踪：

```
Caused by: java.lang.IllegalArgumentException: Invalid type id 'com.abc.xyz.MyClass' (for id type 'Id.class'): no such class found
        at org.codehaus.jackson.map.jsontype.impl.ClassNameIdResolver.typeFromId(ClassNameIdResolver.java:55)
        at org.codehaus.jackson.map.jsontype.impl.TypeDeserializerBase._findDeserializer(TypeDeserializerBase.java:77)
        at org.codehaus.jackson.map.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:67)
        at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeWithType(BeanDeserializer.java:423)
        at org.codehaus.jackson.map.deser.StdDeserializerProvider$WrappedDeserializer.deserialize(StdDeserializerProvider.java:460)
        at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2376)
        at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1166)
        at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:410)
        at org.apache.cxf.jaxrs.client.AbstractClient.readBody(AbstractClient.java:447) 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T19:05:07.843

这听起来像是一个类路径问题：也就是说，Jackson 代码无法使用其类加载器找到命名类。如果可能的话，也许你可以看到杰克逊和价值等级的罐子来自哪里，看看这是否能解释它。不幸的是，类路径问题在 servlet 容器部署中非常臭名昭著。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-24T19:16:17.737

在我的情况下我是如何解决这个问题的（这可能与你的情况完全无关）：

```
 ClassLoader oldClassLoader = Thread.currentThread().getContextClassLoader();
    Thread.currentThread().setContextClassLoader( classLoader );
    try
    {
        invokeCodeThatPerformsSerializationDeserialization();
    }
    finally
    {
        Thread.currentThread().setContextClassLoader( oldClassLoader );
    } 
```

# php - 使用 PHP 检索每个 Active Directory 属性

> ID：12202546
> 
> 赞同：3
> 
> 时间：2012-08-30T17:42:31.830
> 
> 标签：php, active-directory

在 PHP 中，我正在构建一个将用户添加到我们的 Active Directory 中的函数。我想比较一个我们已经在 Active Directory 中拥有的条目，这样我就可以弄清楚我需要在 addUser 函数中包含哪些信息。

我试过了：

```
$results = ldap_search($ad, $adDN, $filter, $attr);
$entries = ldap_get_entries($ad, $results);
print_r($entries); 
```

`$filter`是用户名，`$attr`为空，但它只返回用户的DN（专有名称），仅此而已。如果我开始向其中添加内容，`$attr`它将返回添加的内容。

我怎样才能返回每个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:52:24.117

我想出了如何返回每个属性：

```
$attr = array('*'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:58:42.507

在以下行中：

```
$results = ldap_search($ad, $adDN, $filter); 
```

将属性字段留空。

这不会指定要拉取的任何属性，这意味着 LDAP 将拉取每个属性。

从手册[`ldap_search();`](http://php.net/manual/en/function.ldap-search.php)

> **属性**
> 
> 所需属性的数组，例如array("mail", "sn", "cn")。请注意，无论请求哪种属性类型，总是返回“dn”。
> 
> **使用此参数比默认操作（即返回所有属性及其关联值）要高效得多。因此，应将使用此参数视为良好做法。**

# c++ - 如何使用 CPPCMS 基础内容类

> ID：12202549
> 
> 赞同：0
> 
> 时间：2012-07-25T23:03:59.947
> 
> 标签：c++, templates

我正在创建一个小型事实网站作为实验，以使用 cppcms 从 C++ 创建一个非常高效的网站。

我在决定如何为要访问的模板创建 base_content 类时遇到问题。

在我的类结构中，我创建了一个容器类，称为 Fact，它使用 getter 和 setter 来管理变量，继承自 IContainer。

为了避免将数据复制到单独的类中，我必须继承 IContainer 中的 cppcms::base_content 并在 Fact 中公开私有变量（以便模板可以直接访问它们）。

有没有办法我可以从单独的内容类创建和访问指向容器类中数据的指针，或者（更好）从模板中调用 getter（返回 const int 或 const string），使用充当内容类的事实对象。

如果需要澄清，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:32:52.347

为什么不在模板中使用 getter：

```
class Fact : public cppcms::base_content {
public:
      std::string get_foo() const;
      void set_foo(std::string const &v) const;
private:
      std::string foo_;
}; 
```

并且在模板中

```
<%= get_foo() %> 
```

在任何情况下，如果您有许多带有 getter/setter 的字段只能执行“get”和“set”，那么您可能应该考虑将它们公开而不使用 getter/setter。

# smalltalk - 魅力和鹦鹉螺问题

> ID：12202552
> 
> 赞同：9
> 
> 时间：2012-08-30T17:43:23.943
> 
> 标签：smalltalk, squeak, pharo, visualworks

在 Smalltalk 中，系统浏览器是几乎所有东西的中心工具。Glamour 似乎是一个使用声明性脚本语言构建通用浏览器的包。从[论文](http://scg.unibe.ch/archive/masters/Bung09a.pdf)中它可以在 VisualWorks 和 Pharo 中获得，但我在这里只讨论 Pharo 版本。

除了 Glamour 相对于旧方法的技术优势之外，对 OmniBrowser 的支持似乎在 2011/2012 年停止了。因此，从 2009 年开始出现的 Glamour 可能是 OmniBrowser 的合乎逻辑的继任者。但是有一个惊人的惊喜：创建了另一个“浏览器项目”，它被称为[Nautilus](http://rmod.lille.inria.fr/web/pier?_s=THDxoUBefXQB5rn8)。

可能是因为开发人员注意到作为浏览器实现框架和类浏览器难以维护，OmniBrowser 在浏览器框架的 Glamour 和 Smalltalk Class Browsing 的 Nautilus 中被“拆分”。*引用 Nautilus 章节：“它旨在浏览 RPackage，与 RB 重构引擎兼容，具有环境意识并使用公告”*

*   这种印象对吗？
*   魅力还在积极发展吗？
*   Glamour 和 Nautilus 有重叠的目的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:55:08.897

Nautilus 的构建是为了拥有一个 Pharo 核心维护人员可以使用的又好又小的浏览器。Nautilus 替换了旧的代码浏览器。

Glamour 正在构建原型和实现具有完全不同形状和功能的新代码浏览器。Glamour 使开发人员可以轻松地根据自己的代码和流程创建自己的浏览器。Glamour 是一个大型编程框架，目前阻止其包含在 Pharo 核心中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T11:52:23.690

魅力是积极发展和维护的。在用它构建了 60 多个浏览器之后，我不得不说它是一个非常高效的框架。由于支持不同的窗格（Mondrian、Magritte、Roassal、EyeSee、List、Tree、Text 等），很容易构建比浏览器通常预期的更多功能的应用程序。

我对 Nautilus 的当前状态不太满意。它的功能仍然有太多代码。我更希望它建立在基于 Spec 的 Glamour 核心之上。Spec 对浏览器来说是一个太低级的抽象。

如果您在 Pharo 中开发应用程序，我强烈建议您使用整个 MOOSE 环境。

# unix - 在末尾添加分号那些没有分号

> ID：12202555
> 
> 赞同：3
> 
> 时间：2012-08-30T17:43:28.740
> 
> 标签：unix, sed, awk, grep

我有文件，其中大多数（不是全部）行以分号结尾。我想只在那些不以分号结尾的行的末尾添加分号。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T17:48:27.490

从技术上讲，这将起作用：

```
sed '/;$/!s/$/;/' input 
```

但是您可能关心尾随空格，所以：

```
sed '/; *$/!s/$/;/' input 
```

如果您的 sed 支持`\s`：

```
 sed '/;\s*$/!s/$/;/' input 
```

或者你可以使用：

```
sed '/;[[:space:]]*$/!s/$/;/' input 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T17:49:03.937

使用 sed：

```
sed -i '/[^;] *$/s/$/;/' input_file 
```

意思是：

```
-i          overwrite the original file with new contents
/[^;] *$/   find lines that do not contain a `;` at the end (after 
            ignoring trailing spaces)
s/$/;/      add a semicolon at the end 
```

# visual-studio-2010 - 当我开始输入 .aspx 文件时出现 VS2010 异常

> ID：12202557
> 
> 赞同：0
> 
> 时间：2012-08-30T17:43:33.827
> 
> 标签：visual-studio-2010, exception

我正在使用 Visual Studio 10.0.40219.1 SP1 Rel，我最近才开始遇到问题。当我打开一个 .aspx 页面以更改任何标记时，我一开始输入就会弹出一条错误消息，上面写着

> “Visual Studio 遇到异常。这可能是由扩展引起的。”

然后它告诉我，我可以使用 /log 触发器查看有关错误的更多详细信息，然后查看 ActivityLog.xml。在异常之后，当我开始打字时，我的智能感知不起作用

> System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。参数名称： System.ThrowHelper.ThrowArgumentOutOfRangeException() 处的索引 System.Collections.Generic.List `1.get_Item(Int32 index) at System.Collections.ObjectModel.ReadOnlyCollection`1.System.Collections.Generic.IList.get_Item(Int32 index) 处 Artem.VisualStudio.Outlining.OutliningTagger.CalculateChange(TextContentChangedEventArgs e) 处Artem.VisualStudio.Outlining.OutliningTagger.HandleBufferChanged(Object sender, TextContentChangedEventArgs e) at Microsoft.VisualStudio.Text.Utilities.GuardedOperations.RaiseEvent[TArgs](Object sender, EventHandler`1 eventHandlers, TArgs args)

和

> System.Runtime.InteropServices.SEHException (0x80004005)：外部组件已引发异常。在 Microsoft.VisualStudio.OLE.Interop.IOleCommandTarget.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) 在 Microsoft.VisualStudio.Editor.Implementation.CommandChainNode.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) 在 Microsoft.VisualStudio.Editor.Implementation.CommandFilterWrapper.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) 在 Microsoft.VisualStudio.Editor.Implementation.CommandChainNode.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) 在 Microsoft.VisualStudio.Editor.Implementation.CommandFilterWrapper.Exec(Guid & pguidCmdGroup, UInt32 nCmdID,*0（KeyProcessor p，TextCompositionEventArgs args）在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.<>c* _DisplayClass1e`1.b__1a() 在 Microsoft.VisualStudio.Text.Utilities.GuardedOperations.CallExtensionPoint（对象错误源，操作调用）

在“源”下（在 ActivityLog.xml 中），它们都说“编辑器或编辑器扩展”。

我已尝试禁用所有已安装的扩展程序，但没有任何区别。我在Win7 64位机器上。

我看过一些与修复注册表项有关的帖子，但我的注册表项看起来已经完全正确。我很茫然，我希望有人遇到过类似的问题。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:48:30.377

导致问题的扩展在您的错误消息中是正确的：

```
Artem.VisualStudio.Outlining.OutliningTagger 
```

[http://jsoutlining.codeplex.com/workitem/29965](http://jsoutlining.codeplex.com/workitem/29965)相关？

# c# - 使用多态传递值对象是一种不好的做法吗？

> ID：12202561
> 
> 赞同：0
> 
> 时间：2012-08-30T17:43:48.297
> 
> 标签：c#, design-patterns, polymorphism

```
public interface IRecord
{

}

public class BirthRecord : IRecord
{
    public string CityOfBirth;
    public Date DateOfBirth;
    public BirthRecord(string cityOfBirth, Date dateOfBirth)
    {
        // assign these to properties
    }
}

public class CarRecord : IRecord
{
    public Color Color;
    public string Manufacturer;
    public CarRecord(Color color, string manufacturer)
    {
        // assign these to properties
    }
}

public interface IAccount
{
    public List<IRecord> Records { get; set; }
}

public class Client
{
    public void ProcessAccount(IAccount account)
    {
        foreach(IRecord record in account.Records)
        {
            if(record is CarRecord)
                handleCarRecord((CarRecord)record);
            else if(record is BirthRecord)
                handleBirthRecord((BirthRecord)record);
        }
    }
} 
```

因此，当您到达客户端并想要处理值对象时，您必须进行各种杂乱的类型检查和强制转换——这是一种可接受的模式还是我犯了一个更根本的设计错误？如果不是其他 OOD 原则，这似乎违反了 OCP。有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:41:16.797

您提出的方法称为访问者模式，但是访问者用于在复杂数据结构上创建抽象算法，以便您拥有模板算法并提供它的具体实现。

```
public abstract class AbstractAccountVisitor {     

  public void ProcessAccount(IAccount account)     
  {          
     foreach(IRecord record in account.Records)         
     {             
         if(record is CarRecord)                 
             handleCarRecord((CarRecord)record);             
         else if(record is BirthRecord)                 
             handleBirthRecord((BirthRecord)record);         
     }     
  } 

  public abstract void handleCarRecord( CarRecord record );
  public abstract void handleBirthRecord( BirthRecord record );

} 
```

这让你有

```
public class ConcreteAccountVisitor : AbstractAccountVisitor {

    public override handleCarRecord( CarRecord record ) {
       // do something concrete with carrecord
    }

    public override handleBirthRecord( BirthRecord record ) {
       // do something concrete with birthrecord
    }

}

// client
AbstractAccountVisitor visitor = new ConcreteAccountVisitor();

visitor.ProcessAccount( account ); 
```

请注意，通过将算法的核心封装在基本访问者中，您可以通过覆盖处理特定类型记录的方法来自定义处理。

另请注意，您可以将处理过程介绍给您的类，而不是提供访问者：

```
public interface IRecord {
    void Operation();
}            

public class AccountProcessor {     

  public void ProcessAccount(IAccount account)     
  {          
     foreach(IRecord record in account.Records)         
     {             
         record.Operation();
     }     
  } 
} 
```

当您的对象上可能的操作列表已知时，建议使用这种更简单的方法，以便您可以在接口的合同中引入所有操作。另一方面，访问者允许您在类/接口上引入任意数量的操作，因为您只需提供新的具体访问者。

# wcf - 使用现有 wsdl 创建 BizTalk WCF 终结点

> ID：12202565
> 
> 赞同：1
> 
> 时间：2012-08-30T17:44:02.267
> 
> 标签：wcf, wsdl, biztalk, biztalk-2010

第三方供应商为我提供了他们希望能够调用的服务的 wsdl。是否可以根据现有的服务合同和架构在 BizTalk 中公开 WCF 终结点，而无需尝试对其进行逆向工程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:51:38.097

这可以按如下方式完成：

从 Visual Studio 开始：

1.  在要导入架构的项目上，右键单击并选择[添加生成的项目](http://msdn.microsoft.com/en-us/library/bb226552%28v=bts.20%29.aspx)
2.  选择使用 WCF 服务
3.  在 BizTalk 消费向导上选择`Metadata Files (WSDL and XSD)`，添加 WSDL / XSD 文件，并为工件提供名称空间。
4.  （不要删除 .odx 文件，因为它包含端口类型）
5.  然后创建您的 Orch 来处理传入消息，该消息返回适当响应类型的响应（例如，请参阅[ExposeWebService](http://iaimtomisbehave.org/2007/12/12/how-to-expose-your-schemas-as-web-services-in-biztalk) Biztalk 示例，分别使用供应商提供的请求和响应模式作为输入和输出）。使用导入的端口类型可以节省查找和分配模式以请求和响应的时间。该端口还将具有供应商期望的操作名称。
6.  您需要构建项目并将其部署到 BTS。
7.  然后可以使用[BizTalk WCF 发布向导](http://msdn.microsoft.com/en-us/library/bb226564.aspx)在本地 IIS 上发布 web 服务。如果您通过消息框使用直接绑定，那么如果您已经有 WCF 接收端口，则不需要创建新的接收端口。您可以指定虚拟目录的名称，但请注意 BizTalk 将为 .svc 生成任意名称。
8.  如果您还没有用于 BizTalk WCF 接收的应用程序池，则需要使用与 BizTalk 隔离主机相同的凭据创建一个
9.  将上述向导创建的虚拟目录分配给应用程序池。
10.  确保 BizTalk 中的接收位置正在运行

您现在应该能够导航到发布您的 orch 的虚拟根目录、添加服务引用、测试您的 orch 等。

由于您的集成供应商已经拥有 WSDL，因此如果您不想使用 IIS，也可以完全跳过发布（步骤 7-9），而是通过使用直接在 Biztalk 中手动创建接收端口来让 BizTalk 在端口 80 上侦听WCF-自定义。您可能需要[使用 netsh](https://stackoverflow.com/questions/885744/wcf-servicehost-access-rights)来允许此操作（除非您的 BizTalk 以管理员访问权限或类似权限运行，这是不可取的）。

# jquery - 关闭模式窗口时 Firefox 出错

> ID：12202566
> 
> 赞同：0
> 
> 时间：2012-08-30T17:44:07.367
> 
> 标签：jquery, jquery-ui, firefox, file-upload, firebug

我有一个模态窗口，其中有一个手风琴，其中一个手风琴有一个文件上传。我单击浏览，打开窗口以选择文件，然后关闭窗口而不选择文件。现在，我尝试通过单击它抛出的关闭按钮来关闭模式窗口

> NS_ERROR_XPC_SECURITY_MANAGER_VETO：安全管理器否决了操作 arg 0 [nsIDOMHTMLDivElement.contains]

在 javascript 控制台中。有没有人遇到过这个问题以及如何解决这个问题？我正在使用 jquery-ui 1.8.18 和 jquery 1.7.1 分钟

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:55:55.650

在这里看这篇文章： [https ://github.com/mihaild/jquery-html5-upload/issues/2](https://github.com/mihaild/jquery-html5-upload/issues/2)

有人遇到过这个问题，看来他们已经解决了。

它已在[jQuery-UI 1.8.21中修复](http://bugs.jqueryui.com/ticket/8288)

# excel - Excel VBA：二维数组搜索，检查单元格是否为空

> ID：12202569
> 
> 赞同：1
> 
> 时间：2012-08-30T17:44:11.610
> 
> 标签：excel, vba

我在 excel 中有一系列单元格，左列有人名，顶行有某些任务（作为数字），比如两个暗淡的数组。我想做的就是能够搜索名称和编号的任务，以查看该单元格在 VBA 中是否为空白。

在 Excel 表中，我可以使用如下公式： =ISBLANK(VLOOKUP("Bob", A2:AE33,3,FALSE))

哪个有效，但似乎无法在 VBA 中找到这样做。

我试图做这样的事情：

```
Application.WorksheetFunction.ISBLANK(Application.WorksheetFunction.VLookup(studentComboBox.Value, Range("A2:AE33"), i + 2, False)) 
```

但它给出了一个错误，比如“对象不支持这个属性或方法”。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:02:19.350

您无权通过 WorksheetFunction 访问 ISBLANK。尝试： `Application.WorksheetFunction.VLookup(studentComboBox.Value, Range("A2:AE33"), i + 2, False)=""`

# security - 我的基本用户身份验证方法有什么问题吗？

> ID：12202571
> 
> 赞同：2
> 
> 时间：2012-08-30T17:44:14.420
> 
> 标签：security, google-app-engine, session, authentication

在安全性和身份验证以及大多数其他客户端-服务器通信方面，我还是个新手。我想做的很简单，如果可能的话，避免引入 3rd 方框架和类来完成这项工作。（我将 Google App Engine 与 Python 一起使用）

用户通过移动应用程序 (iOS) 登录一次服务。登录后，用户将发出许多请求，以获取消息、朋友、状态等信息。因此，每次应用程序与服务器通信时，我们不会发送该用户的电子邮件和密码进行身份验证，而是发送一个会话 ID。到目前为止，这只是我对系统的理解。

我想出了一个非常简单的方法，在我看来它会很好用，但是由于缺乏经验，我可能看不到很多东西。这样做会有什么问题：

1.  在设备上，用户输入电子邮件/密码，凭据被发送到服务器并进行验证，一旦通过验证，就会生成一个随机数。这个随机数以 IntegerProperty 的形式存储在 User 模型上，名称为 session_number。

2.  session_number 被发送到用户的设备并被保存。现在，只要用户连接到服务器进行请求，session_number**和**用户的整数 ID 号就会发送到服务器。我们得到该 userId 的 User 实体，现在我们比较 user.session_number == incoming_session_number 的值。如果他们匹配，我们很好，否则错误。

3.  如果用户注销，我们会从数据存储中清除 session_number。

这里唯一的另一个问题是当用户从多个设备登录时如何处理？每个设备都应该存储自己的 session_number 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:57:11.760

除了我对重新发明轮子的评论之外；我看到这个理论的主要问题是它完全受到重放攻击。

例如，给定一个 ID 为 99 且会话 ID/cookie 为“MONKEY-1”的用户——如果用户想要发送一个请求，他必须以某种方式使用“from, 99, MONKEY-1”对其进行签名。让我们假设它是这样的：

```
{ FROM: 99, TO: SERVER, COMMAND: GET-NEW-MAIL, SESSION: MONKEY-1 } 
```

太好了，如果 MONKEY-1 是秘密的话。（无论你喜欢什么格式；它也可能是一个 4KiB 的二进制线路噪声块。）

然而，现在我们有一个窃听者，他看到了那个数据包经过……她现在发送了她自己的数据包。也许她很聪明，并且欺骗了真实用户 99 正在使用的源 IP 地址——即使窃听者听不到您的回复，她仍然可以向您发送数据包。也许那个看起来像这样：

```
 { FROM: 99, TO: SERVER, COMMAND: DELETE-ALL-MAIL, SESSION: MONKEY-1 } 
```

有很多方法可以防止这种事情，它们的效果各不相同。在 SSL 中包装连接有助于使这变得极其困难（但绝不是不可能）；这是很多网站都依赖的解决方案。一种更好的方法是使用双向通信以一种入侵者无法获取秘密数据的方式对事物进行签名，使用散列或公钥/私钥加密。例如，假设我们有这样的交换：

```
{ FROM: SERVER, TO: ??, COMMAND: PLEASE-LOGIN, NONCE: PIGEON }

{ FROM: BILL, TO: SERVER, COMMAND: LOGIN, AUTH: hash ( hash ( password ) . "PIGEON" ) } 
```

......其中`hash()`表示，比如说，一个 SHA-256 总和，并且`. "PIGEON"`是指连接；

```
{ FROM: SERVER, TO: BILL, COMMAND: LOGIN-OK, SESSION: hash ( password ) ^ "MONKEY-1" } 
```

… where`^`指的是一些操作，比如按位异或，也许。然后，随后，Bill 发送如下请求：

```
 { FROM: BILL, TO: SERVER, COMMAND: GET-NEW-MAIL, NONCE: "ARMADILLO", 
   AUTH: hash ( "GET-NEW-MAIL" . #\Newline . "ARMADILLO" . #\Newline . "MONKEY-1" ) } 
```

现在，MONKEY-1 从未在任何时候畅通无阻；并且，在每个请求上给出的 AUTH 密钥与所使用的动词或命令以及一个随机数相关联，该随机数应该随每个请求而变化，服务器可以轻松验证其完整性，但窃听者无法再次重播相同的消息，或更改动词和做一些不同的事情。

解释密码问题：

我有一个数据库表，它包含

```
User: BILL, Password: hash(DOLPHIN) 
```

如果，在网上，我收到

```
{ FROM: BILL, PASSWORD: hash(DOLPHIN), COMMAND: GET-ALL-MAIL } 
```

......那么窃听者不太可能（但相当合理）知道密码是 DOLPHIN，但是，她不需要知道或关心：

```
 { FROM: BILL, PASSWORD: hash(DOLPHIN), COMMAND: DELETE-ALL-MAIL } 
```

你提到加盐密码......你会怎么做？

```
 User: BILL, PASSWORD: hash( SALT . DOLPHIN ) 
```

除非您将 SALT 和 DOLPHIN 分开存放，否则您很难从 `hash ( SALT . DOLPHIN )`到`hash (DOLPHIN)`. 因此，要么用户必须向`hash ( SALT . DOLPHIN )`您提交（在客户端放置一个静态 SALT），要么您必须再次存储明文密码。

解决方法可能是做类似的事情

```
 Database: ( BILL => hash ( SALT . DOLPHIN ) )

 Server sends: ( NONCE )

 Client sends: ( BILL => hash ( NONCE . hash ( SALT . DOLPHIN ) ) ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:02:47.593

这种安全模型的一个**重要方面是您如何存储密码（或者更确切地说，您如何不存储密码）。**这并不像看起来那么简单，因为如果操作不当会有很多危险。

[本文](http://crackstation.net/hashing-security.htm#properhashing)涵盖了基础知识，并提供了一个很好的大纲来说明要研究的内容。它讨论了散列、彩虹表、加盐和慢散列函数。

由于您使用的是 App Engine，因此您需要研究 Python 中的加密库。[`hashlib`](http://docs.python.org/library/hashlib.html)和[`hmac`](http://docs.python.org/library/hmac.html)是标准库的一部分，但不幸的是 Python 的标准库没有任何慢散列函数的实现，如`bcrypt`or `pbkdf2`。

因此，我建议使用[`passlib`](http://code.google.com/p/passlib/)密码散列。我自己将它用于一个项目（*正在进行中*）。具体来说，我决定使用`sha512_crypt`- 你可以[看看这里的代码](https://github.com/voithos/gae-starter-kit/blob/master/core/utils/crypto.py)（欢迎任何批评）。

显然，还有一个由斯坦福构建的 PBKDF2的[JavaScript 实现。](http://crypto.stanford.edu/sjcl/)

# c# - 中继器中的匿名类型 - Eval？动态的？

> ID：12202574
> 
> 赞同：3
> 
> 时间：2012-08-30T17:44:19.300
> 
> 标签：c#, asp.net, linq

好的，所以我从两个列表的连接中创建了一个匿名类型。我将它绑定到我的中继器以便在我的页面上显示它但是......我不确定最好的方法是什么。我应该在 asp 页面中执行 Eval() 吗？我应该使用新的动态类型吗？如今，这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T18:18:12.340

我喜欢将这种方法与匿名对象和评估一起使用：

代码背后：

```
rpt.DataSource = list.Select(i => new 
  {
    Url = i.GetField("Url"),
    Text = i.GetField("Text")
  });
rpt.DataBind(); 
```

标记：

```
<asp:Repeater ID="rpt" runat="server">
    <ItemTemplate>
        <a href="<%# Eval("Url") %>"><%# Eval("Text") %></a>
    </ItemTemplate>
</asp:Repeater> 
```

顺便说一句，如果您使用 ASP.NET 4.5，我建议使用强类型中继器，更多信息请点击此处：

[http://weblogs.asp.net/scottgu/archive/2011/09/02/strongly-typed-data-controls-asp-net-vnext-series.aspx](http://weblogs.asp.net/scottgu/archive/2011/09/02/strongly-typed-data-controls-asp-net-vnext-series.aspx)

# perl - 未找到导出的 Perl 子程序

> ID：12202575
> 
> 赞同：1
> 
> 时间：2012-08-30T17:44:30.597
> 
> 标签：perl, export, undefined, subroutine

我每隔一段时间就会遇到这个问题。出于某种原因，我在尝试调用导出的子程序时收到“未定义的子程序”错误，我不知道为什么，因为它似乎是在成熟的代码中突然发生的。

上次发生这种情况时，我想我使用了“package_2::exported_sub()”之类的东西。这一次有效，但它只是为 package_2 中的另一个子返回了一个错误。甚至把“使用package_2；” 在上面的行没有帮助！我唯一能想到的是，导出的 sub 以某种方式未定义。

我的代码看起来有点像这样：

在文件 package_1.pm 中：

```
package package_1;

require Exporter;
@ISA = qw( Exporter );

@EXPORT = qw(
local_sub
);

use package_2;
use strict;
use warnings;
use diagnostics;

sub local_sub {
  &exported_sub;
} 
```

在文件 package_2.pm 中：

```
package package_2;

require Exporter;
@ISA = qw( Exporter );

@EXPORT = qw(
exported_sub
);

use strict;
use warnings;
use diagnostics;

sub exported_sub {
 # do something
} 
```

我已经束手无策了......当这个弹出来时，我正在处理一张不相关的热门票，明天开始用户测试！

提前致谢！

* * *

更新：

ikegami，感谢您的修复！不过我很好奇。我又遇到了这个问题，但这一次我没有找到循环依赖。我把它缩小到一行：

```
$row->{$attr} = '&nbsp;' unless ( $row->{$attr} ); 
```

显然，该行与使用或要求根本无关！我查看了 Apache 日志，但似乎没有什么特别突出的，但会努力解决我发现的任何问题。我也会看看我是否可以获得更多警告。

除此之外，您建议下一步做什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:10:30.780

我怀疑你有一个循环依赖： package_1 使用 package_2 而 package_2 使用 package1 （直接或间接）。

以下是我最初在 PerlMonks 上发布的解决方案：[http ://www.perlmonks.org/?node_id=778639](http://www.perlmonks.org/?node_id=778639)

* * *

[ 使用这种技术的需要是系统中设计缺陷的一个非常强烈的指标，但我认识到资源并不总是可用于修复设计缺陷。]

如果ModA使用ModB，ModB使用ModA，ModA或ModB从对方导入符号，需要注意代码执行顺序。我发现避免问题的最佳方法是在加载任何其他模块之前设置 Exporter。

`ModA.pm`：

```
package ModA;

use strict;
use warnings;

BEGIN {
   our @ISA = qw( Exporter );
   our @EXPORT_OK = qw( ... );
   require Exporter;
}

use This;
use ModB;
use That;

...

1; 
```

`ModB.pm`：

```
package ModB;

use strict;
use warnings;

BEGIN {
   our @ISA = qw( Exporter );
   our @EXPORT_OK = qw( ... );
   require Exporter;
}

use This;
use ModA;
use That;

...

1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:48:08.180

你确定你的`use`线完全一样，而不是类似的东西`use package_2 qw(xyz);`吗？

后者将定义 Exporter 的 import() 子例程将导出到调用者模块中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T11:38:06.147

我希望我的经验能适合你的情况。Perl 包名必须用 Namespace 填写。如果你的模块文件在路径 $PERL_LIB/Fruit/Apple.pm 那么在模块文件中，你必须指定命名空间 Fruit::

```
package Fruit::Apple;

....... 
```

如果你只写

```
package Apple;

....... 
```

没有编译错误。但是当你在模块文件 Apple.pm 中调用你的方法时，会得到“未定义的子程序”错误。

# jquery - qTip：当元素可见时显示工具提示

> ID：12202576
> 
> 赞同：3
> 
> 时间：2012-08-30T17:44:31.783
> 
> 标签：jquery, show, hidden, qtip

我有一个 qTip 工具提示附加到我的页面上的一个元素，其父级`<div>`是隐藏的 ( `display: none`)。我想在父项可见时自动显示工具提示（`display: block`）。这可能吗？

示例 HTML：

```
<div id="parent" style="display: none;">
    <div id="child">Child Element</div>
</div> 
```

JS：

```
$("#child").qtip(); 
```

我尝试使用该`ready`选项自动触发工具提示：

```
$("#child").qtip({
    ready: true
}); 
```

但这会使工具提示立即出现，即使父级`<div>`被隐藏。

qTip 还提供了一个`when`选项，您可以在其中显示某个事件发生时的工具提示，但这仅接受内置的 jQuery 事件。当`display`父级的`<div>`值为`block`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:59:46.343

您可以使用自定义事件，

```
$("#child").qtip({
    show: { when: { target: $("#child").parent(), event: "showevent" } }
});

$("#parent").show().trigger("showevent"); 
```

[http://craigsworks.com/projects/qtip/docs/reference/](http://craigsworks.com/projects/qtip/docs/reference/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:57:22.887

看起来您可能必须简单地`qtip()`在触发显示父级的相同位置触发（无论如何您这样做）。

```
$('#whatever').on('click', function () { // just as an example
    $('#parent').show();
    $('#child').qtip();
}); 
```

# flash - 获取可用的浏览器宽度和高度

> ID：12202581
> 
> 赞同：1
> 
> 时间：2012-08-30T17:44:52.150
> 
> 标签：flash, apache-flex, flex4

如何在 Flex（***不是***Flash）中获得可用的浏览器宽度和高度？

Capabilities.screenResolutionY 和 screenResolutionX 提供了总监视器分辨率，还有 stage.stageWidth 和 stage.stageHeight 但在文档中它说“调用 Stage 对象的 stageWidth 属性会为任何不同的调用者引发异常安全沙箱作为舞台所有者（主 SWF 文件）”。并且有时舞台属性为空（如果您在某个随机类中，您甚至如何在非显示对象上获得它？）。

那么我将如何以 Flex 方式做到这一点而不抛出错误（我的应用程序可能会在某个时候被另一个加载）？

~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~
所以我一直在做一些测试，它看起来像，

```
Rectangle(systemManager.getVisibleApplicationRect()).width
Rectangle(systemManager.getVisibleApplicationRect()).height 
```

给我我需要的信息。这些甚至在应用程序初始化时可用。

还，

```
systemManager.stage.stageWidth
systemManager.stage.stageHeight 
```

给我同样的信息。

systemManager 是 Application 和每个 UIComponent 上的一个属性，所以除非我在其中一个类中（我认为在 UIComponent 的情况下它是 Application 的子级），我仍然需要找到一种方法来获取对 systemManager 的引用在其他类型的课程中。

~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~
所以freakazoid_em 评论说我可以使用FlexGlobals.topLevelApplication 来获取对systemManager 的引用。有了它，我可以从我的 Flex 应用程序中的任何位置（随时）获取对可见浏览器宽度和高度的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:10:32.583

```
var visibleWidth:Number = FlexGlobals.topLevelApplication.systemManager.getVisibleApplicationRect().width;
var visibleHeight:Number = FlexGlobals.topLevelApplication.systemManager.getVisibleApplicationRect().height;

// this seems to return the same values
var visibleWidth:Number = FlexGlobals.topLevelApplication.systemManager.stage.stageWidth;
var visibleHeight:Number = FlexGlobals.topLevelApplication.systemManager.stage.stageHeight; 
```

# c# - 使用 asp.net 获取 web 浏览器控制源

> ID：12202582
> 
> 赞同：3
> 
> 时间：2012-08-30T17:44:53.937
> 
> 标签：c#, asp.net, vb.net

如何使用`WebBrowser()`asp.net 代码隐藏页面中的控件获取另一个网站的源代码。

到目前为止，我有这个但没有任何选项来导航或设置 cookie 或获取页面加载源？你能帮忙吗？

```
Imports System.Windows.Forms

Partial Class _Default
    Inherits System.Web.UI.Page

    Dim a As WebBrowser = New WebBrowser()
    webBrowser1.Navigate("http://www.google.com")
    'get the source

End Class 
```

我得到这个错误

> 无法实例化 ActiveX 控件“8856f961-340a-11d0-a96b-00c04fd705a2”，因为当前线程不在单线程单元中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-04T14:03:35.347

这将完美地工作

我们需要添加带有线程的网络浏览器，否则我们将无法实例化 ActiveX 控件“8856f961-340a-11d0-a96b-00c04fd705a2”，因为当前线程不在单线程单元中。错误

这是我们可以让 webbrowser 在 asp.net 网页中工作的方式

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Threading;
using System.Windows.Forms;

/// <summary>
/// Summary description for CustomBrowser
/// </summary>
public class CustomBrowser
{
    public CustomBrowser()
    {
        //
        // TODO: Add constructor logic here
        //
    }

    protected string _url;
    string html = "";
    public string GetWebpage(string url)
    {
        _url = url;
        // WebBrowser is an ActiveX control that must be run in a
        // single-threaded apartment so create a thread to create the
        // control and generate the thumbnail
        Thread thread = new Thread(new ThreadStart(GetWebPageWorker));
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
        thread.Join();
        string s = html;
        return s;
    }

    protected void GetWebPageWorker()
    {
        using (WebBrowser browser = new WebBrowser())
        {
            //  browser.ClientSize = new Size(_width, _height);
            browser.ScrollBarsEnabled = false;
            browser.ScriptErrorsSuppressed = true;
            browser.Navigate(_url);

            // Wait for control to load page
            while (browser.ReadyState != WebBrowserReadyState.Complete)
                Application.DoEvents();

            html = browser.DocumentText;

        }
    }

} 
```

在网页中

```
CustomBrowser browser = new CustomBrowser();
string s = browser.GetWebpage("http://localhost:8781/WebSite3/Default3.aspx");
Response.Write(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:56:05.680

您希望在 ASP.NET 中做的事情有点不正统，但这里有一个可能对您有所帮助的示例：

[http://www.codeproject.com/Articles/50544/Using-the-WebBrowser-Control-in-ASP-NET](http://www.codeproject.com/Articles/50544/Using-the-WebBrowser-Control-in-ASP-NET)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T04:23:30.163

当我在 asp.net 页面中使用 webBrowser 对象时，我发现了同样的错误。
但在我找到解决方案后，

[https://stackoverflow.com/a/1054408/900284](https://stackoverflow.com/a/1054408/900284)

现在好了。

# github - Jenkins：找出哪个分支被推送到 GitHub？

> ID：12202583
> 
> 赞同：2
> 
> 时间：2012-08-30T17:45:00.190
> 
> 标签：github, continuous-integration, jenkins

有没有一种简单的方法可以找出哪个分支在 Jenkins 中触发了构建过程？我正在使用[Jenkins GitHub 插件](https://wiki.jenkins-ci.org/display/JENKINS/Github+plugin)和 GitHub Webhooks。

我不想为每个分支设置 CI 作业，而是创建一个自动处理此问题的中央脚本。

有任何想法吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:56:15.253

我查看了源代码，看起来 GitHub 插件在后台使用了 Git 插件：[http ://wiki.hudson-ci.org/display/HUDSON/Git+Plugin](http://wiki.hudson-ci.org/display/HUDSON/Git+Plugin)

如果是这种情况，您应该可以使用 env-var`GIT_BRANCH`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-19T12:45:12.933

我正在使用[1.19.2 版的 Github 插件](https://wiki.jenkins.io/display/JENKINS/Github+Plugin)并依赖于`GIT_BRANCH`不起作用。这个和 Git 插件文档中指定的其他变量都`null`在我的情况下。不知道为什么。

[所以，在这里](https://stackoverflow.com/questions/6245570/how-to-get-the-current-branch-name-in-git)和[这里](https://stackoverflow.com/questions/1593051/how-to-programmatically-determine-the-current-checked-out-git-branch)研究了这些帖子后，我决定[使用`git-name-rev`command](https://git-scm.com/docs/git-name-rev)。我是这样做的：

```
def cmd = 'git name-rev --name-only HEAD > branch'
isUnix()?sh(cmd):bat(cmd)
def branch = readFile('branch').trim()
echo("Branch is '${branch}'") 
```

我希望这对其他人有帮助。

# php - 如何在 PHP 中缓存 JSON cURL 响应？

> ID：12202584
> 
> 赞同：3
> 
> 时间：2012-08-30T17:45:03.230
> 
> 标签：php, json, curl

*我对使用 cURL 很陌生。*有没有一种简单的方法来缓存 cURL JSON 请求的响应？这是我的要求...

```
<?php

error_reporting(E_ALL);

$url = "[JSON api call url]";

$timeout = 40;

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/json'));

$str = curl_exec($ch);

curl_close($ch);

$data = array();

if ($str !== false) {
    $data = json_decode($str);
}

?> 
```

谢谢！

# linux - 使用脚本自动输入 SSH 密码

> ID：12202587
> 
> 赞同：243
> 
> 时间：2012-08-30T17:45:17.483
> 
> 标签：linux, shell, ssh, openssh

我需要创建一个脚本来自动向 OpenSSH`ssh`客户端输入密码。

假设我需要`myname@somehost`使用密码SSH 进入`a1234b`。

我已经试过了...

```
#~/bin/myssh.sh
ssh myname@somehost
a1234b 
```

...但这不起作用。

我怎样才能将此功能放入脚本中？

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2013-05-24T12:21:23.553

首先你需要安装[sshpass](http://sourceforge.net/projects/sshpass/)。

*   Ubuntu/Debian：`apt-get install sshpass`
*   Fedora/CentOS：`yum install sshpass`
*   拱：`pacman -S sshpass`

* * *

**例子：**

```
sshpass -p "YOUR_PASSWORD" ssh -o StrictHostKeyChecking=no YOUR_USERNAME@SOME_SITE.COM 
```

**自定义端口示例：**

```
sshpass -p "YOUR_PASSWORD" ssh -o StrictHostKeyChecking=no YOUR_USERNAME@SOME_SITE.COM:2400 
```

**笔记：**

*   `sshpass``-f`也可以在传递标志 时从文件中读取密码。
    *   如果执行命令，使用`-f`可防止密码可见。`ps`
    *   存储密码的文件应具有安全权限。

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2015-02-03T06:59:49.997

在寻找这个问题的答案几个月后，我终于找到了一个更好的解决方案：编写一个简单的脚本。

```
#!/usr/bin/expect

set timeout 20

set cmd [lrange $argv 1 end]
set password [lindex $argv 0]

eval spawn $cmd
expect "password:"
send "$password\r";
interact 
```

把它放到`/usr/bin/exp`，所以你可以使用：

*   `exp <password> ssh <anything>`
*   `exp <password> scp <anysrc> <anydst>`

完毕！

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2012-08-30T17:51:10.590

使用公钥认证：[https ://help.ubuntu.com/community/SSH/OpenSSH/Keys](https://help.ubuntu.com/community/SSH/OpenSSH/Keys)

在源主机中只运行一次：

```
ssh-keygen -t rsa # ENTER to every field
ssh-copy-id myname@somehost 
```

就是这样，之后你就可以在没有密码的情况下进行 ssh 了。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-08-30T17:53:31.990

您可以使用期望脚本。我已经很久没有写过一篇了，但它应该如下所示。您将需要使用`#!/usr/bin/expect`

```
#!/usr/bin/expect -f
spawn ssh HOSTNAME
expect "login:" 
send "username\r"
expect "Password:"
send "password\r"
interact 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2015-01-17T00:10:59.930

变体 I

```
sshpass -p PASSWORD ssh USER@SERVER 
```

变体 II

```
#!/usr/bin/expect -f
spawn ssh USERNAME@SERVER "touch /home/user/ssh_example"
expect "assword:"
send "PASSWORD\r"
interact 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2018-01-16T21:47:33.340

# sshpass + autossh

已经提到的一个很好的好处`sshpass`是您可以将它与 一起使用`autossh`，从而消除更多的交互效率低下。

```
sshpass -p mypassword autossh -M0 -t myusername@myserver.mydomain.com 
```

如果您的 wifi 因关闭笔记本电脑而中断，这将允许自动重新连接。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2017-11-20T17:07:16.143

## `sshpass`具有更好的安全性

我在寻找一种通过 ssh 进入陷入困境的服务器的方法时偶然发现了这个线程——处理 SSH 连接尝试花了一分钟多的时间，并且在我输入密码之前就超时了。在这种情况下，我希望能够在提示可用时*立即*提供我的密码。

（如果不是很清楚：如果服务器处于这种状态，那么设置公钥登录为时已晚。）

`sshpass`救援。但是，有比`sshpass -p`.

我的实现直接跳到交互式密码提示（不会浪费时间查看是否可以进行公钥交换），并且永远不会将密码显示为纯文本。

```
#!/bin/sh
# preempt-ssh.sh
# usage: same arguments that you'd pass to ssh normally
echo "You're going to run (with our additions) ssh $@"

# Read password interactively and save it to the environment
read -s -p "Password to use: " SSHPASS 
export SSHPASS

# have sshpass load the password from the environment, and skip public key auth
# all other args come directly from the input
sshpass -e ssh -o PreferredAuthentications=keyboard-interactive -o PubkeyAuthentication=no "$@"

# clear the exported variable containing the password
unset SSHPASS 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-12-04T17:04:47.873

我认为我没有看到任何人建议这样做，而 OP 只是说“脚本”所以......

我需要解决同样的问题，而我最熟悉的语言是 Python。

我使用了 paramiko 库。此外，我还需要使用`sudo`. 事实证明 sudo 可以通过“-S”标志通过标准输入接受其密码！见下文：

```
import paramiko

ssh_client = paramiko.SSHClient()

# To avoid an "unknown hosts" error. Solve this differently if you must...
ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy())

# This mechanism uses a private key.
pkey = paramiko.RSAKey.from_private_key_file(PKEY_PATH)

# This mechanism uses a password.
# Get it from cli args or a file or hard code it, whatever works best for you
password = "password"

ssh_client.connect(hostname="my.host.name.com",
                       username="username",
                       # Uncomment one of the following...
                       # password=password
                       # pkey=pkey
                       )

# do something restricted
# If you don't need escalated permissions, omit everything before "mkdir"
command = "echo {} | sudo -S mkdir /var/log/test_dir 2>/dev/null".format(password)

# In order to inspect the exit code
# you need go under paramiko's hood a bit
# rather than just using "ssh_client.exec_command()"
chan = ssh_client.get_transport().open_session()
chan.exec_command(command)

exit_status = chan.recv_exit_status()

if exit_status != 0:
    stderr = chan.recv_stderr(5000)

# Note that sudo's "-S" flag will send the password prompt to stderr
# so you will see that string here too, as well as the actual error.
# It was because of this behavior that we needed access to the exit code
# to assert success.

    logger.error("Uh oh")
    logger.error(stderr)
else:
    logger.info("Successful!") 
```

希望这可以帮助某人。我的用例是一次在大约 300 台服务器上创建目录、发送和解压缩文件以及启动程序。因此，自动化至关重要。我试过了`sshpass`，`expect`然后想出了这个。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-08-03T13:57:17.403

```
# create a file that echo's out your password .. you may need to get crazy with escape chars or for extra credit put ASCII in your password...
echo "echo YerPasswordhere" > /tmp/1
chmod 777 /tmp/1

# sets some vars for ssh to play nice with something to do with GUI but here we are using it to pass creds.
export SSH_ASKPASS="/tmp/1"
export DISPLAY=YOURDOINGITWRONG
setsid ssh root@owned.com -p 22 
```

参考：[https ://www.linkedin.com/pulse/youre-doing-wrong-ssh-plain-text-credentials-robert-mccurdy?trk=mp-reader-card](https://www.linkedin.com/pulse/youre-doing-wrong-ssh-plain-text-credentials-robert-mccurdy?trk=mp-reader-card)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2019-05-28T12:48:16.437

这是我登录服务器的方式：

```
ssp <server_ip> 
```

*   `alias ssp='/home/myuser/Documents/ssh_script.sh'`
*   `cat /home/myuser/Documents/ssh_script.sh`

`ssp`：

```
#!/bin/bash

sshpass -p mypassword ssh root@$1 
```

因此：

```
ssp server_ip 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-09-29T19:03:11.840

我正在使用以下解决方案，但为此您必须安装`sshpass`如果尚未安装，请使用`sudo apt install sshpass`

现在你可以这样做了，

`sshpass -p *YourPassword* shh root@IP`

您也可以创建一个 bash 别名，这样您就不必一次又一次地运行整个命令。请按照以下步骤操作

`cd ~`

`sudo nano .bash_profile`

在文件末尾添加以下代码

`mymachine() { sshpass -p *YourPassword* shh root@IP }`

`source .bash_profile`

现在只需`mymachine`从终端运行命令，您将在没有密码提示的情况下进入您的机器。

笔记：

1.  `mymachine`可以是您选择的任何命令。
2.  如果在此任务中安全性对您而言并不重要，并且您只想自动化工作，则可以使用此方法。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-10-21T12:58:43.127

这基本上是 abbotto's answer 的扩展，有一些额外的步骤（针对初学者）可以让你从你的 linux 主机启动你的服务器，非常容易：

> 1.  编写一个简单的 bash 脚本，例如：

```
#!/bin/bash

sshpass -p "YOUR_PASSWORD" ssh -o StrictHostKeyChecking=no YOUR_USERNAME@SOME_SITE.COM 
```

> 2.  保存文件，例如“startMyServer”，然后通过在终端中运行来使文件可执行：

```
sudo chmod +x startMyServer 
```

> 3.  将文件移动到“PATH”变量中的文件夹（在终端中运行“echo $PATH”以查看这些文件夹）。因此，例如将其移动到“/usr/bin/”。

瞧，现在您可以通过在终端中输入“startMyServer”来进入您的服务器。

PS (1) 这不是很安全，请查看 ssh 密钥以获得更好的安全性。

PS (2) SMshrimant 的答案非常相似，对某些人来说可能更优雅。但我个人更喜欢使用 bash 脚本。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-08-13T14:26:03.157

如果您在 Windows 系统上执行此操作，则可以使用 Plink（PuTTY 的一部分）。

```
plink your_username@yourhost -pw your_password 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-03-27T02:57:24.813

我得到这个工作如下

.ssh/config 被修改以消除是/否提示 - 我在防火墙后面，所以我不担心被欺骗的 ssh 密钥

```
host *
     StrictHostKeyChecking no 
```

为期望创建一个响应文件，即 answer.expect

```
set timeout 20
set node [lindex $argv 0]
spawn ssh root@node service hadoop-hdfs-datanode restart

expect  "*?assword {
      send "password\r"   <- your password here.

interact 
```

创建您的 bash 脚本并在文件中调用 expect

```
#!/bin/bash
i=1
while [$i -lt 129]    # a few nodes here

  expect answer.expect hadoopslave$i

  i=[$i + 1]
  sleep 5

done 
```

使用新配置刷新 128 个 hadoop 数据节点 - 假设您为 hadoop/conf 文件使用 NFS 挂载

希望这对某人有所帮助-我是 Windows numpy，这花了我大约 5 个小时才弄清楚！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-04-16T17:23:59.480

我设法让它与它一起工作：

```
SSH_ASKPASS="echo \"my-pass-here\""
ssh -tt remotehost -l myusername 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-05-24T13:25:38.493

我有一个更好的解决方案，包括使用您的帐户登录，而不是更改为 root 用户。这是一个 bash 脚本

[http://felipeferreira.net/index.php/2011/09/ssh-automatic-login/](http://felipeferreira.net/index.php/2011/09/ssh-automatic-login/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-11-15T14:40:38.170

@abbotto 的答案对我不起作用，不得不做一些不同的事情：

1.  yum install sshpass 改为 -rpm *-ivh [http://dl.fedoraproject.org/pub/epel/6/x86_64/sshpass-1.05-1.el6.x86_64.rpm](http://dl.fedoraproject.org/pub/epel/6/x86_64/sshpass-1.05-1.el6.x86_64.rpm)*
2.  使用 sshpass 的命令更改为 - *sshpass -p "pass" ssh user@mysite -p 2122*

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-14T10:09:41.283

这有效：

```
#!/usr/bin/expect -f
spawn ssh USERNAME@SERVER "touch /home/user/ssh_example"
expect "assword:"
send "PASSWORD\r"
interact 
```

**但是**！如果您遇到如下错误，只需使用 expect 开始您的脚本，而不是 bash，如下所示：`expect myssh.sh` 而不是`bash myssh.sh`

```
/bin/myssh.sh: 2: spawn: not found /bin/myssh.sh: 3: expect: not found /bin/myssh.sh: 4: send: not found /bin/myssh.sh: 5: expect: not found /bin/myssh.sh: 6: send: not found 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-10-03T13:03:44.510

在下面的示例中，我将编写我使用的解决方案：

场景：我想使用 sh 脚本从服务器复制文件：

```
#!/usr/bin/expect
$PASSWORD=password
my_script=$(expect -c "spawn scp userName@server-name:path/file.txt /home/Amine/Bureau/trash/test/
expect \"password:\"
send \"$PASSWORD\r\"
expect \"#\"
send \"exit \r\"
")

echo "$my_script" 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2019-02-18T10:19:29.050

在脚本中使用此脚本 tossh，第一个参数是主机名，第二个参数是密码。

```
#!/usr/bin/expect
set pass [lindex $argv 1]
set host [lindex $argv 0]
spawn ssh -t root@$host echo Hello
expect "*assword: " 
send "$pass\n";
interact" 
```

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2017-08-07T15:46:24.923

要通过 shell 脚本连接远程机器，请使用以下命令：

```
sshpass -p PASSWORD ssh -o StrictHostKeyChecking=no USERNAME@IPADDRESS 
```

其中`IPADDRESS`,`USERNAME`和`PASSWORD`是需要在脚本中提供的输入值，或者如果我们想在运行时提供，请使用“读取”命令。

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2021-01-09T15:55:33.713

这在大多数情况下应该会有所帮助（您需要先安装 sshpass！）：

```
#!/usr/bin/bash
read -p 'Enter Your Username: ' UserName;
read -p 'Enter Your Password: ' Password;
read -p 'Enter Your Domain Name: ' Domain;

sshpass -p "$Password" ssh -o StrictHostKeyChecking=no $UserName@$Domain 
```

* * *

## 回答 #23

> 赞同：-16
> 
> 时间：2019-09-30T10:33:13.170

在 linux/ubuntu 中

```
ssh username@server_ip_address -p port_number 
```

按回车，然后输入您的服务器密码

如果您不是 root 用户，请在命令开头添加*sudo*

# android - 如何设置自定义 ListView 单元格背景颜色？

> ID：12202588
> 
> 赞同：0
> 
> 时间：2012-08-30T17:45:16.790
> 
> 标签：android, android-listview, android-view, android-selector

我需要添加自定义逻辑来设置 ListView 背景颜色。我希望阅读项目显示为灰色。我知道我可以在视图本身上调用 setBackgroundColor ，但这似乎弄乱了 ListView 选择器的默认行为已按下/禁用单元格颜色。按下时将不再显示正确的蓝色背景动画。

在 gmail 应用程序中，您可以看到与已读邮件条目类似的效果。如果您点击它们，则会发生正确的背景颜色动画。

# c# - Sitecore 自定义项目验证器

> ID：12202591
> 
> 赞同：1
> 
> 时间：2012-08-30T17:45:24.220
> 
> 标签：c#, content-management-system, sitecore, sitecore6

我需要制作一个自定义项目验证器，用于检查工作流最终状态关于特定项目存在的语言版本。我知道我应该继承 Sitecore.Data.Validators.StandardValidator 或 Sitecore.Data.Validators.ItemValidators.WorkFlowFinalStateValidator，但是我可以使用哪些方法呢？有没有办法我可以找到这个？

**更新：** 我使用 StandardValidator 类创建了一个自定义验证器，并实现了 ValidatorResult 方法。然后我在系统/设置/验证规则部分注册了这个类。然后我为项目设置标准值字段，这适用于常规快速栏验证规则和验证栏。我能够看到错误。

现在我想在工作流操作规则中使用它。我需要做什么？我选择了新规则将其设置在项目标准值部分的工作流规则区域中，但是当我在工作流中执行命令时，它只是不运行......我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:35:11.723

我们的团队使用 StandardValidator 作为我们正在进行的任何字段验证的基础，例如编写一个 AlphanumericValidator 来确保文本字段值是字母数字。

我不确定您打算对语言版本做什么，但我知道我们正在运行一些工作流操作来检查项目是否有另一种语言的版本，以通知用户当前的翻译状态。当 Approve 动作发生在某个步骤中时，在 final 之前，我们添加了一个工作流动作来启动我们的代码。我们实际上没有使用验证器，而是实现并注册了一个事件处理程序。它看起来像这样：

```
public void Process(WorkflowPipelineArgs args)
{
    Item dataItemCurrentLanguage = args.DataItem;
    Item dataItemOtherLanguage = GetItemInOtherLanguage(dataItemCurrentLanguage);

    if (dataItemOtherLanguage != null && dataItemOtherLanguage.Versions.Count > 0)
    {
        //Insert what you want to check for here
        if(isGood)
        {
            //Do something
        }
        else
        {
            Context.ClientPage.ClientResponse.Alert("Something bad!");
            args.AbortPipeline();
        }
    }
} 
```

# java - 有什么方法可以设计我的 Java 代码，使这两个对象不引用自己？

> ID：12202603
> 
> 赞同：0
> 
> 时间：2012-08-30T17:46:06.680
> 
> 标签：java, design-patterns, composition

**设置**

我的 Java 代码包含两个对象：Group 和 Person。每个 Group 可以包含对多个 Person 的引用，但每个 Person 只能属于一个 Group。

每个人的运动衫的颜色都来自他们所在小组的颜色。（注意：如果他们不属于某个组，他们的毛衣是灰色的。）

当我在屏幕上绘制一个 Person 时，我会接收 Person 本身和一个颜色。

**编码**

*人*

```
public class Person {
    Color sweatshirtColor = Color.gray;
    Group belongsToGroup = null;

    public void setGroup(Group g) { belongsToGroup = g; }
} 
```

*团体*

```
public class Group {
    Color color = Color.red;
    List<Person> people = new ArrayList<Person>();
    // ... setters for adding and getting people
} 
```

*画*

```
public void draw(Person dudette, Color shirtColor) { //... } 
```

**问题** 组和人员都相互引用 - 我担心一个可能会与另一个不同步。我的绘图代码必须修复（因为它是外部的），但是在这个设计中有什么明显的我做错了吗？

编辑：还有一个注意事项 - 组可以在整个程序中更改。一个人的组取决于他们的位置，所以他们不断地切换组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:55:22.187

您可以为每个类引入设置器，以允许任一实体修改另一个实体和自身，以使它们永远不会不同步。例如

```
class Group {
    List<Person> people;
    void removePerson(Person p) {
        if(people.remove(p))
            p.removeFromGroup();
    }
}

class Person {
    Group grp;
    void removeFromGroup() {
        grp.removePerson(this);
        grp = null;
    }
} 
```

您可以对添加组成员执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:55:35.643

您是否从一个组中获取人员列表，即您实际上是否`Group#getPeople()`在您的代码中调用？然后，您将需要两个类之间的双向连接，因为您还使用连接 from`Person`来`Group`获取 T 恤颜色。如果您不使用`getPeople()`，则无需保留组中的人员列表，然后连接 from `Group`to`Person`将是不必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:55:38.870

不将容器（Group）存储在 Person 中的一种方法是使 Person 成为 Group 的内部类，实际上这是内部类的主要目标。

```
public class Group {

    public Person createPerson() { ... }

    public class Person {
        private Person() { ... }
        ...
            Group.this
        ...
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T18:33:15.440

请记住，Group 用于添加/删除人员的公共方法必须更新 Person 对 Group 的引用，反之亦然：

```
public class Person {
    public static final Color DEFAULT_COLOR = Color.GRAY;

    private Group group;

    // If group is not assigned returns default color
    public Color getColor() {
        return group != null ? group.getColor() : DEFAULT_COLOR;
    }

    public Group getGroup() {
        return group;
    }

    // This way you will always have Person.group and Group.people in sync
    public void setGroup(Group newGroup) {
        if (group != newGroup) {
            if (group != null) {
                Group oldGroup = this.group;
                group = null;
                oldGroup.removePerson(this);
            }
            group = newGroup;
            if (newGroup != null) {
                newGroup.addPerson(this);
            }
        }
    }
}

public class Group {
    private final List<Person> people = new ArrayList<Person>();
    private Color color;

    public Color getColor() {
        return color;
    }

    public void setColor(Color color) {
        this.color = color;
    }

    public void addPerson(Person person) {
        if (person != null) {
            people.add(person);
            person.setGroup(this);
        }
    }

    public void removePerson(Person person) {
        if (people.remove(person)) {
            person.setGroup(null);
        }
    }
} 
```

# sql - 在 SQL 的 from 语句中使用局部变量

> ID：12202606
> 
> 赞同：0
> 
> 时间：2012-08-30T17:46:15.913
> 
> 标签：sql, sql-server, select, local-variables

我有一个数据库，其中每个表都按标准约定命名。我正在构建一个 SQL 脚本以定期在各种类似命名的表集上运行。

我想声明一个包含表之间表名的公共部分的局部变量，并使用该变量在`FROM`我的`SELECT`语句中填写表名的一部分。

我如何将其抽象为在`1234`替换为局部变量值的表上运行？

```
Select count(*) From [Database].[dbo].[Table_1234] 
```

这显然不起作用：

```
Select count(*) From [Database].[dbo].['Table_'+@variable] 
```

有没有办法在选择语句中使用局部变量作为表名或解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:52:45.187

**免责声明：**这对我来说*看起来*像 SQL Server，但这个问题没有被标记为这样。

您可以使用 EXEC 功能：

```
EXEC('Select count(*) From [Database].[dbo].[Table_' + @variable + ']') 
```

SQL 小提琴：[http ://www.sqlfiddle.com/#!3/0ef1d/3](http://www.sqlfiddle.com/#!3/0ef1d/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:04:37.133

我不知道如何绕过动态 SQL。但我建议通过使用同义词来最小化它（假设您将运行多个/复杂的查询而不是简单的行数）：

```
DECLARE @var NVARCHAR(8)

SET @var = '1234'

EXEC('create synonym synTable1 for Table1_' + @var)
EXEC('create synonym synTable2 for Table2_' + @var)
EXEC('create synonym synTable3 for Table3_' + @var)

SELECT COUNT(*) FROM synTable1
...

DROP SYNONYM synTable1
DROP SYNONYM synTable2
DROP SYNONYM synTable3 
```

# java - 哪个集合用于前面的关键删除并在最后添加？

> ID：12202611
> 
> 赞同：2
> 
> 时间：2012-08-30T17:46:35.633
> 
> 标签：java

我正在实现一种算法，该算法将在集合的末尾添加字符串并在开头删除字符串。在极少数情况下，我将执行随机访问删除以将其推送到最后。我主要是 C++ 开发人员，我不确定在 java 的关键循环中使用什么会有好处。我认为 java 列表不太适合这项任务。当然它会起作用，但我已经在努力解决性能问题。

链表？向量？建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:00:29.190

我建议使用`ArrayDeque`，它实现`Queue`和[`Deque`](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)接口但不实现`List`（您可能不需要）：

> 接口的可调整大小的数组实现`Deque`。数组双端队列没有容量限制；它们会根据需要增长以支持使用。它们不是线程安全的；在没有外部同步的情况下，它们不支持多线程并发访问。禁止使用空元素。此类可能比`Stack`用作堆栈时更快，并且比`LinkedList` 用作队列时更快。

您还提到了删除：

> 该接口提供了两种移除内部元素的方法， `removeFirstOccurrence`以及`removeLastOccurrence`.

`ArrayDeque`提供您需要的所有方法 - `addFirst(E e)`, `addLast(E e)`, `removeFirst()`.

另请参阅[此问题](https://stackoverflow.com/questions/6129805/what-is-the-fastest-java-collection-with-the-basic-functionality-of-a-queue)以了解更多信息`ArrayDeque`。

PS这里是上面链接中的[一些集合基准](http://microbenchmarks.appspot.com/run/limpbizkit@gmail.com/com.publicobject.blog.TreeListBenchmark)`ArrayDeque`，其他`LinkedList`人`ArrayList`提到过；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:51:27.723

您似乎正在尝试实现队列（LIFO）。 [http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)。您可以查看源代码及其实现方式以获得更多想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T17:52:40.170

听起来你想要一个队列，是吗？查看[`Queue`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)界面。

```
Queue<String> strQueue = new LinkedList<String>();
strQueue.offer("Hello");
strQueue.offer("World");
System.out.println(strQueue.poll());
System.out.println(strQueue.poll()); 
```

印刷：

```
Hello
World 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T17:56:08.957

在 ArrayList 上使用 Vector 是没有意义的，除非您需要所有单独的操作都是`synchronized`，而这通常不需要。

如果您只打算进行头部和尾部插入/删除，那么 LinkedList 最有意义。但是，如果列表很大并且您需要进行随机访问检索，那么必须遍历列表可能会很痛苦。

另一方面，ArrayList 提供了非常便宜的随机访问，但是从列表头部插入或删除元素需要移动后备数组的其余部分。JDK 实现通过调用`System.arraycopy()`来做到这一点，它能够非常便宜地做到这一点。

在这种情况下，最好的办法是使用两种实现进行基准测试并比较结果。编写有问题的算法以仅使用 a ，您可以轻松地为您的基准`List`交换不同的实现。`List`

我看不出在 ArrayList 上使用常规数组的目的是什么，因为您必须自己编写头/尾移除/插入代码，并在大小超过容量时调整数组大小，所有这些ArrayList 已经为你做了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T18:00:04.557

`java.util.ArrayDeque`*支持使用循环缓冲区的队列操作，这可能是在末尾添加和在开头删除的最有效方法，但它不支持按索引进行随机访问 - 除了索引n*之外，您不能删除索引处的条目通过遍历迭代器。有一些方法可以删除特定*值*的第一次/最后一次出现，但这些方法在内部进行线性搜索。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T18:03:32.820

不知道你所说的java列表是什么意思。您描述的问题听起来像是 LinkedList 的经典案例。该[文档](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html "文件")指定“所有操作都按照双向链表的预期执行”。这意味着在末尾插入一个对象以及从开头删除一个对象都是在 O(1) 中完成的，这意味着无论列表中有多少元素都需要相同的时间。然而，随机访问更加困难，应该在 O(N) 内完成，这意味着时间与列表中的实际元素数量成正比。

当然，根据您拥有的元素数量，具有 O(1) 的链表可能不会给出最佳时间。例如，如果您只期望列表中的几个元素，那么可能具有 O(N) 添加/删除时间但访问器更快的数据结构实际上可能会执行得更好。但对于较大的结构，LinkedList 类可能是开始的地方。

# eclipse - 如何将 git 详细信息获取到已配置的 Eclipse 项目中

> ID：12202617
> 
> 赞同：0
> 
> 时间：2012-08-30T17:47:07.803
> 
> 标签：eclipse, git

我有一个用 git 签出的项目，并将其导入 Eclipse。后来我在 Eclipse 中添加了 git 插件，但是 Eclipse 无法识别我的详细信息。我不知道它是看不到我的 .git 文件夹还是不想看到它，当我单击团队子菜单时，我会得到标准的共享项目菜单。

如何让 Eclipse 从 git 查看我过去的交易和详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:48:49.813

嗯，为了回答我自己和可能的其他绊脚石，我点击了**Share project**，然后我将它添加为一个新的 git 项目，当问我要使用哪个存储库时，它已经提供了我需要的那个:)

所以我想它已经在我的鼻子底下:)

# mysql - 在 MySQL 中使用 LEFT JOIN 和 LIMIT 删除

> ID：12202618
> 
> 赞同：15
> 
> 时间：2012-08-30T17:47:12.023
> 
> 标签：mysql, left-join

我正在尝试删除数据库中的孤立帖子，并且创建了以下查询：

```
DELETE post.*
      FROM foro_post AS post
      LEFT JOIN foro_thread AS thread USING(threadid)
      WHERE thread.threadid IS NULL 
```

问题是我想限制因为我的表有超过 7,000,000 条记录。

因为我不能在查询中使用 LIMIT，所以我尝试了这个并且确实有效，但我不确定它是否是一个有效的解决方案，或者它是否可以做得更好。

```
DELETE post.*
      FROM foro_post AS post
      LEFT JOIN foro_thread AS thread USING(threadid)
      WHERE thread.threadid IS NULL
      AND post.postid < 500

      // Where < 500 should be increasing as I delete records 
```

我怎样才能更有效地做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T17:51:20.413

当您同时引用多个表时，您不能`LIMIT`直接在[DELETE](http://dev.mysql.com/doc/refman/5.1/en/delete.html)中使用，但您可以通过将要删除的内容包含在子选择中来解决这个问题：

```
DELETE po 
FROM   foro_post po
JOIN   (
       SELECT    p.postid
       FROM      foro_post p
       LEFT JOIN foro_thread t ON p.threadid = t.threadid
       WHERE     t.threadid IS NULL
       ORDER BY  p.postid
       LIMIT     50
       ) pp ON po.postid = pp.postid 
```

# networking - 使用 Netsh 的特定应用程序的网络跟踪

> ID：12202622
> 
> 赞同：1
> 
> 时间：2012-08-30T17:47:21.157
> 
> 标签：networking, windows-7, trace, netsh

我希望对应用程序进行网络跟踪，以查看其与 WLAN 的交互方式（场景）。生成的捕获包含太多信息，我只想关注特定应用程序如何与 WLAN 通信。是否有其他软件可以让我这样做？此外，如果有人解释场景和提供者的概念，也会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-20T21:33:20.437

您可以将[过滤器](https://technet.microsoft.com/en-us/library/dd878517(v=ws.10).aspx#bkmk_exampleFilter)添加到 netsh 跟踪，但不能按应用程序甚至端口过滤。我发现过滤进出特定 IP 地址的流量通常就足够了。这与加载到消息分析器时的时间过滤相结合通常可以缩小问题的范围。

这是我用来启动新捕获的 Powershell 脚本，该脚本仅包含本地系统和两个远程 IP 地址（10.0.2.1 和 10.0.3.1）之间的流量。[请注意，使用Get-NetIPAddress](https://technet.microsoft.com/en-us/library/hh826136.aspx)找到本地 IP 地址并查找名为 *-TEAM 的 NIC

```
$filename = "c:\captures\${env:computername}_netsh_trace.etl" 
$IPs = "({0},10.0.2.1,10.0.3.1)" -f (Get-NetIPAddress -AddressFamily IPv4 -InterfaceAlias *-TEAM).IPAddress 
netsh trace start capture=yes tracefile=$filename maxsize=2048 filemode=circular overwrite=yes report=no correlation=no IPv4.SourceAddress=$IPs IPv4.DestinationAddress=$IPs Ethernet.Type=IPv4 
```

然后使用`netsh trace stop`停止捕获，然后在[Microsoft Message Analyzer](https://www.microsoft.com/en-us/download/details.aspx?id=44226)中打开 etl 文件。如果您只想加载特定时间范围或添加其他过滤器，您可以使用 File -> New Session -> Files 然后指定您的选项，如下所示：

![Microsoft 消息分析器筛选选项](../Images/ba767e26b3a24533770a186fa75cd1a5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:53:33.987

如果您想在其[Microsoft 网络监视器](http://www.microsoft.com/en-us/download/details.aspx?id=4865)的应用程序级别捕获网络流量，或者如果您想进行更深层次的尝试，请尝试具有广泛过滤功能的[Wireshark 。](http://www.wireshark.org/)

# php - 将 jQuery 日期转换为 php 日期或 mysql 日期以正确插入数据库

> ID：12202624
> 
> 赞同：2
> 
> 时间：2012-08-30T17:47:51.657
> 
> 标签：php, javascript, jquery, mysql

我使用带有以下代码的 jQuery datepicker

```
$(".item").datepicker({
  showWeek: true,
  firstDay: 1,
  minDate: -30,
  dateFormat: 'mm-dd-yy'
}); 
```

该日期选择器的值将通过 ajax 发送到 php 函数，该函数在 mysql 表中插入数据。

mysql 数据库中的`date`列类型是`Datetime`.

每次从 datepicker 输入值读取值时，`date`数据库中的列为空显示`00-00-0000 00:00:00`。

我是 php 的新手，也许我在某个地方犯了错误。

php代码段

`mysqli_query($connect, "Insert into tab(date) values ('".$myData."')");`

如何为 mysql 格式化 javascript 日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:57:27.607

您能否首先验证 datepicker 是否向服务器发布了正确的值？

尝试在某处提醒值。

如果您有来自 javascript 的正确输入，则脚本的 php 部分可以这样完成：

```
if (isset$_GET['date']){$date=$_GET['date'];}
$date=date("Y-m-d h:i:s",strtotime($date)); 
```

回显以确认您是否正确，最后将该 $date 插入表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:53:28.923

~~mysql 中的日期格式为 YYYY-MM-DD，因此您可以使用[strtotime](http://php.net/manual/en/function.strtotime.php)：~~

 ~~```
$myDataSQL = date("Y-m-d", strtotime($myData));
mysqli_query($connect, "Insert into tab(date) values ('".$myDataSQL."')"); 
```~~ 

~~顺便说一句，我建议使用准备好的语句来避免 sql 注入问题，尽管在这种特定情况下它并不重要。我总是使用准备好的陈述，所以我不必考虑它。~~

 ~~**编辑：**似乎[strtotime 需要`/`分隔符](http://www.php.net/manual/en/datetime.formats.date.php)才能工作。

如果您使用的是 PHP 5.3+，则可以使用`DateTime`该类：

```
$date = DateTime::createFromFormat('m-d-y', $myData);
$myDataSQL = $date->format('Y-m-d');
mysqli_query($connect, "Insert into tab(date) values ('".$myDataSQL."')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:58:35.297

查询根据mysql[文档](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-literals.html)：

> 作为 'YYYY-MM-DD' 或 'YY-MM-DD' 格式的字符串。允许使用“宽松”语法：任何标点符号都可以用作日期部分之间的分隔符。例如，“2012-12-31”、“2012/12/31”、“2012^12^31”和“2012@12@31”等价。

因此您可以更改 datepicker 获取日期的格式。

```
$( ".item" ).datepicker({ dateFormat: "yy-mm-dd" }); 
```

将其放入您的更新中应该可以解决问题，您甚至不需要额外的服务器操作来进行解析。只要确保它将安全地到达服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:59:16.233

对杰罗恩的回答有不同的看法，同样合适

```
$myDataSQL = date("c", strtotime($myData));
mysqli_query($connect, "Insert into tab(date) values ('".$myDataSQL."')"); 
```

我发现在任何地方使用 ISO 8601 日期更容易处理时区，因为它们是可见的。加上它插入到mysql中。

同样在过去，我遇到了 jQuery datapicker 的问题，需要在其初始化中指定更好的格式。

也许试试

```
$(".item").datepicker({
    showWeek: true,
    firstDay: 1,
    minDate: -30,
    dateFormat: "yy/mm/dd"
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-10T08:50:41.073

As in JavaScript date values are created using `let date = new Date("2017-01-26");`, you have to use the same format when formatting the date in your PHP script.

Just convert yout php date as following format `date('Y-m-d', $date)`.

This will give you the right format for javascript `<input type="date">` field.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-05T04:43:13.327

我使用转换器（这里的源代码：[https](https://github.com/lingtalfi/DatePickerHelper/blob/master/DatePickerHelper.php) ://github.com/lingtalfi/DatePickerHelper/blob/master/DatePickerHelper.php ）

用法：

```
<?php
    echo DatePickerHelper::convertFromDatePickerToPhpDate("dd/mm/yy"); // prints d/m/Y
    echo DatePickerHelper::convertFromPhpDateToDatePicker("Y-m-d"); // prints yy-mm-dd
    $birthdayDate = "09/12/1944"; // your input from the web
    echo DatePickerHelper::convertFromNumericInputToMysqlDate($birthdayDate, "d/m/Y"); // 1944-12-09 
```

-

```
class DatePickerHelper
{

    private static $map = [
        "yy" => "<1>",
        "y" => "<2>",
        "MM" => "<3>",
        "M" => "<4>",
        "mm" => "<5>",
        "m" => "<6>",
        "DD" => "<7>",
        "D" => "<8>",
        "oo" => "<9>",
        "o" => "<10>",
        "dd" => "<11>",
        "d" => "<12>",
    ];

    private static $map2 = [
        "<1>" => 'Y',
        "<2>" => 'y',
        "<3>" => 'F',
        "<4>" => 'M',
        "<5>" => 'm',
        "<6>" => 'n',
        "<7>" => 'l',
        "<8>" => 'D',
        "<9>" => 'z', // note: php doesn't have "day of the year with three digits", but this is the closest
        "<10>" => 'z',
        "<11>" => 'd',
        "<12>" => 'j',
    ];

    private static $mapRegex = [
        'Y' => '<1>',
        'y' => '<2>',
        'm' => '<3>',
        'n' => '<4>',
        'd' => '<5>',
        'j' => '<6>',
    ];

    private static $mapRegex2 = [
        '<1>' => '(?P<year4>[0-9]{4})',
        '<2>' => '(?P<year2>[0-9]{2})',
        '<3>' => '(?P<month_leading>[0-9]{2})',
        '<4>' => '(?P<month_no_leading>[0-9]{1,2})',
        '<5>' => '(?P<day_leading>[0-9]{2})',
        '<6>' => '(?P<day_no_leading>[0-9]{1,2})',
    ];

    public static function convertFromDatePickerToPhpDate(string $datePickerFormat): string
    {
        $map = self::$map;
        $map2 = self::$map2;
        $first = str_replace(array_keys($map), array_values($map), $datePickerFormat);
        return str_replace(array_keys($map2), array_values($map2), $first);
    }

    public static function convertFromPhpDateToDatePicker(string $phpDate): string
    {
        $map2 = array_flip(self::$map2);
        $map = array_flip(self::$map);
        $first = str_replace(array_keys($map2), array_values($map2), $phpDate);
        return str_replace(array_keys($map), array_values($map), $first);
    }

    /**
     * @param string $input , the string to convert, the format of this string should match the given phpFormat
     *                  Plus, it must contain exactly:
     *                          - one day component
     *                          - one month component
     *                          - one year component
     *
     * @param string $phpFormat , all components of the phpFormat  have to be one of those:
     *          - Y: year, four digits
     *          - y: year, two digits
     *          - m: numeric month, with leading zeros
     *          - n: numeric month, without leading zeros
     *          - d: numeric day of the month, with leading zeros
     *          - j: numeric day of the month, without leading zeros
     */
    public static function convertFromNumericInputToMysqlDate(string $input, string $phpFormat)
    {
        $map = self::$mapRegex;
        $map2 = self::$mapRegex2;
        $first = str_replace(array_keys($map), array_values($map), $phpFormat);
        $pattern = str_replace(array_keys($map2), array_values($map2), $first);

        if (preg_match('!' . $pattern . '!', $input, $match)) {
            $day = $match['day_leading'] ?? $match['day_no_leading'] ?? null;
            if (null !== $day) {
                $day = (int)$day;
                $month = $match['month_leading'] ?? $match['month_no_leading'] ?? null;
                if (null !== $month) {
                    if (
                        array_key_exists("year4", $match) ||
                        array_key_exists("year2", $match)
                    ) {
                        // a component of each type is there, we will be able to return a result
                        if (array_key_exists("year4", $match)) {
                            $year = (int)$match['year4'];
                        } else {
                            // assumed it's 20, but we don't know really, that sucks.
                            // That's why you should use year4 instead...
                            $year = "20" . $match['year2'];
                            $year = (int)$year;
                        }

                        return $year . "-" . sprintf('%02s', $month) . "-" . sprintf("%02s", $day);
                    }
                }
            }
        }
        return false;
    }

} 
```~~

# string - 整数和字符串 F#

> ID：12202626
> 
> 赞同：12
> 
> 时间：2012-08-30T17:47:57.207
> 
> 标签：string, f#, int

我在 F# 中有一个函数，我在其中获取一个`int`值并将其`int`作为`string`.

```
let inttostring (x:int):string = 
    ""+x 
```

我无法让 ToString 工作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-30T17:49:47.050

空字符串与类型`""`不兼容。您可以使用`x``int`

```
let int2String x = sprintf "%i" x 
```

或者

```
let int2String (x: int) = string x 
```

# javascript - 从 Mac Cocoa 应用程序中提交 HTML 表单

> ID：12202633
> 
> 赞同：0
> 
> 时间：2012-08-30T17:48:18.963
> 
> 标签：javascript, html, macos, cocoa, webkit

我正在用 Objective-C 制作一个 Mac 应用程序，我需要它能够在网站上提交表单（好吧，按下按钮），但用户所要做的就是提供与表单相关的时间。

这是来自网站的代码：

```
<td class=t_h>07:16</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td class=t_s  height='24'>
<form method="POST" action="members_booking.php?operation=member_booking_form" onSubmit="return ValidateMemberBookNow(this)">
<INPUT NAME=double_click TYPE=hidden>
<INPUT NAME=course_id TYPE=hidden VALUE="1">
<INPUT NAME=unique_id TYPE=hidden VALUE="230693">
<INPUT NAME=d_date    TYPE=hidden VALUE="2012-09-07">
<INPUT NAME=Booking_Operation TYPE=hidden VALUE="Book Casual">
<INPUT NAME=SubmitButton TYPE=submit VALUE="Book Now">
</form>
</td>
</tr>
<tr>
<td class=t_h>07:24</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td class=t_s  height='24'>
<form method="POST" action="members_booking.php?operation=member_booking_form" onSubmit="return ValidateMemberBookNow(this)">
<INPUT NAME=double_click TYPE=hidden>
<INPUT NAME=course_id TYPE=hidden VALUE="1">
<INPUT NAME=unique_id TYPE=hidden VALUE="230694">
<INPUT NAME=d_date    TYPE=hidden VALUE="2012-09-07">
<INPUT NAME=Booking_Operation TYPE=hidden VALUE="Book Casual">
<INPUT NAME=SubmitButton TYPE=submit VALUE="Book Now">
</form>
</td>
</tr>
<tr>
<td class=t_h>07:32</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td class=t_s  height='24'>
<form method="POST" action="members_booking.php?operation=member_booking_form" onSubmit="return ValidateMemberBookNow(this)">
<INPUT NAME=double_click TYPE=hidden>
<INPUT NAME=course_id TYPE=hidden VALUE="1">
<INPUT NAME=unique_id TYPE=hidden VALUE="230695">
<INPUT NAME=d_date    TYPE=hidden VALUE="2012-09-07">
<INPUT NAME=Booking_Operation TYPE=hidden VALUE="Book Casual">
<INPUT NAME=SubmitButton TYPE=submit VALUE="Book Now">
</form>
</td>
</tr>
<tr> 
```

最多可以有 40 个这样的块。`<td class=t_h>07:32</td>`是用户指定的时间。我需要自动按下与该时间关联的按钮。如何？

提前谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:21:50.700

这就是[jQuery](http://jquery.com/)出现的问题。`t_h`基本思想是用文本找到类的元素`07:32`。然后，在其父节点中，找到一个`form`元素和`submit()`它。

干得好：

```
function submitFormForTime(time){
    $(".t_h").each(function(i, obj){ // find each element with the class t_h
        if ($(this).text() != time) return; // not the right one
        $(this).parent().find("form").each(function(i, obj){
            obj.submit(); // submit that form
        });
    });
}

submitFormForTime("07:32"); 
```

将此脚本添加到网站。要从 Objective-C 调用此脚本，请参阅：

*   [http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/JavaScriptFromObjC.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/JavaScriptFromObjC.html)

从上述文档中，以下将从 Objective-C 调用 JavaScript 函数：

```
id win = [webView yourWebView]; // assumes your webView is called yourWebView
[win evaluateWebScript:@"submitFormForTime('07:32');"]; 
```

# xml - JAXB（在 Jersey JAX-RS 中）是否可以支持 XML 和 JSON 格式的 java.util.HashMap

> ID：12202634
> 
> 赞同：3
> 
> 时间：2012-08-30T17:48:20.147
> 
> 标签：xml, jaxb, hashmap, jersey, jax-rs

我正在使用 JAX-RS 的 Jersey 实现来创建 RESTful 服务。我希望该服务通过 JAX-RS 中内置的非常方便的 JAXB 支持同时支持 XML 和 JSON 响应。

在我尝试使用 java.util.HashMap 之前，一切都运行良好（注意：您不能将接口与 JAXB 一起使用）。我惊讶地发现 JAXB 不支持 XML 中的 Maps，尽管 Jackson JSON JAXB 插件确实支持。

**第一次尝试：**

```
@XmlElement(name = "Links")
HashMap<String, LinkDTO> links = new HashMap<String, LinkDTO>(); 
```

**XML 输出空：**

```
<Links /> 
```

**JSON 输出正确：**

```
"Links": {
    "status": {
        ...
    },
    "cancel": {
        ...
    }
} 
```

因此，为了解决这个问题，我认为自定义 XmlAdapter 可以解决问题，但这会破坏 JSON 序列化。

**第二次尝试：**

```
@XmlJavaTypeAdapter(HashMapAdapter.class)
@XmlElement(name = "Links")
HashMap<String, LinkDTO> links = new HashMap<String, LinkDTO>();

public class HashMapAdapter extends XmlAdapter<MapElement, HashMap<String, LinkDTO>> {
    public HashMap<String, LinkDTO> unmarshal(ArrayList<MapEntryType> jaxbDTO) throws Exception {
        ... mapping code ...
    }
    public MapElement marshal(HashMap<String, LinkDTO> map) throws Exception {
        ... mapping code ...
    }
}

public static class MapElement {
    @XmlElement(name = "Link")
    public List<MapEntryType> entries = new ArrayList<MapEntryType>();
}

public class MapEntryType {
    @XmlElement(name = "Key")
    public String key;

    @XmlElement(name = "Value")
    public RESTfulLinkDTO value;
} 
```

**XML 输出现在可以接受：**

```
<Links>
    <Link>
        <Key>status</Key>
        <Value> ... </Value>
    </Link>
    <Link>
        <Key>cancel</Key>
        <Value> ... </Value>
    </Link>
</Links> 
```

**JSON 输出不再是有效的 JavaScript 映射：**

```
"Links": {
    "Link": [
        {
            "Key": "status",
            "Value": {
                ...
            }
        },
        {
            "Key": "cancel",
            "Value": {
                ...
            }
        }
    ]
} 
```

是否有任何可能的方法可以在不破坏 JSON 输出的情况下将 HashMap 数据输出为 XML？只要所有数据都存在，我并不真正关心 XML 的特定布局是什么。对于这个问题，我更喜欢 JAXB 解决方案，但如果有一个 Jersey 配置可以解决这个问题，我会接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:26:29.227

地图似乎是 JAXB 的痛处。

但是，如果您正在做的事情相当简单，那么@XmlElementWrapper 注释形式有一个相当简单的解决方案。

这是我项目中的一个代码段：

```
@XmlElementWrapper(name="Parameters")
protected LinkedHashMap<String, String> parameters; 
```

这会产生类似于以下内容的 XML：

```
<Parameters>
   <entry>
       <key>key-value</key>
       <value>value</value>
   </entry>
   ...
</Parameters> 
```

我不确定这是否适用于所有实现。我认为它适用于 Jersey 附带的 JAXB 和 JAXB 参考实现。

我希望 JAXB 规范的某些未来修订版将对 Maps 提供更好的支持。我希望有人会写/出版一本关于 JAXB 的相当详尽的书。

# c++ - boost::system::error_code::message 以 -stdlib=libc++ 的形式出现

> ID：12202646
> 
> 赞同：3
> 
> 时间：2012-08-30T17:49:10.157
> 
> 标签：c++, macos, boost, c++11, clang

我在 OS X 10.7.4 下使用 Boost 1.51，我发现链接 C++11 标准库会导致 boost 的系统错误代码消息输出完整的乱码。
有谁知道为什么会这样，以及如何阻止它发生？

例子：

```
#include <iostream>
#include <boost/system/error_code.hpp>

int main() {
    std::cout << "system_category(9): " << boost::system::system_category().message( 9 ) << std::endl;
    std::cout << "system_category(bad_file_desc): " << boost::system::system_category().message( boost::system::errc::bad_file_descriptor ) << std::endl;
    return 0;
} 
```

* * *

```
$ c++ --version
Apple clang version 4.1 (tags/Apple/clang-421.11.65) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix

$ c++ -lboost_system -o boost_error_codes boost_error_codes.cpp -std=c++11 && ./boost_error_codes
system_category(9): Bad file descriptor
system_category(bad_file_desc): Bad file descriptor

$ c++ -lboost_system -o boost_error_codes boost_error_codes.cpp -std=c++11 -stdlib=libc++ && ./boost_error_codes
system_category(9):     ?HJ?a?Q???t??
system_category(bad_file_desc):     ??U?a?? W?a?0W?a?X  ?HJ?a?Q???t?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:46:28.803

你也用 libc++ 编译过 boost.system 吗？

LLVM 的 libc++ 和 GNU 的 libstdc++ 不兼容 ABI，所以如果你不兼容，那可能就是罪魁祸首。

# android - android地图覆盖不显示文本

> ID：12202648
> 
> 赞同：0
> 
> 时间：2012-08-30T17:49:23.487
> 
> 标签：android, text, maps, overlay

我已经编写了用于在地图上显示各种人的位置的代码。我正在从 PHP 脚本解析 Json 数据。我想在地图上显示带有文字的图标。我的图标显示得很好，但没有显示相关的文本。我的代码如下。如何在地图上显示带有 INFO 的图标？

```
public class Maps extends MapActivity {

    private void callPolice()
    {
            Intent callintent = new Intent(Intent.ACTION_CALL);
            callintent.setData(Uri.parse("tel:6100"));
            startActivity(callintent);
    }

private MapView mapView;

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_maps);

//button code starts here
Button panic_button = (Button) findViewById(R.id.button1);

panic_button.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://xyz.com/index.php");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
           nameValuePairs.add(new BasicNameValuePair("uid", "4"));
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
           //Toast.makeText(this, resId, duration)
            HttpResponse response = httpclient.execute(httppost);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
        callPolice();

    }
});
//button code ends
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 

mapView = (MapView) findViewById(R.id.themap);       
        mapView.setBuiltInZoomControls(true);
      mapView.setSatellite(true);
      mapView.invalidate();

 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://xyz/maps.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();
     }catch(Exception e){
         Log.e("log_tag", "Error in http connection"+e.toString());
    }
//convert response to string
try{
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
       sb = new StringBuilder();
       sb.append(reader.readLine() + "\n");

       String line="0";
       while ((line = reader.readLine()) != null) {
                      sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
        }catch(Exception e){
              Log.e("log_tag", "Error converting result "+e.toString());
        }
//paring data
double LAT;
double LANG;
String INFO;
try{
      jArray = new JSONArray(result);
      JSONObject json_data=null;
      for(int i=0;i<jArray.length();i++){
             json_data = jArray.getJSONObject(i);
             LAT=json_data.getDouble("lat");
             LANG=json_data.getDouble("lon");
             INFO=json_data.getString("name");

//Overlay code
List<Overlay> mapOverlays = mapView.getOverlays();
                Drawable drawable = this.getResources().getDrawable(R.drawable.mark_red);
       // CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable, this);
                AddItemizedOverlay itemizedOverlay = new AddItemizedOverlay(drawable, this);
        //GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
        GeoPoint point = new GeoPoint((int)(LAT * 1e6),(int)(LANG * 1e6));
        OverlayItem overlayitem = new OverlayItem(point, INFO, INFO);
        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

        MapController mapController = mapView.getController();

        mapController.animateTo(point);
        mapController.setZoom(15);

//Overlay code

         }
      }
      catch(JSONException e1){
          Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
      } catch (ParseException e1) {
            e1.printStackTrace();
    }
}
@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_maps, menu);
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item)
{

    switch (item.getItemId())
    {
    case R.id.menu_friends:
        Intent intent = new Intent(this, Friends.class);
        startActivity(intent);
        return true;

    case R.id.menu_invite:
        Intent intent1 = new Intent(this, Invite.class);
        startActivity(intent1);
        return true;

    case R.id.menu_logout:
        Intent intent2 = new Intent(this, Logout.class);
        startActivity(intent2);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:15:39.873

修改您的 AddItemizedOverlay 以包含 onDraw 方法覆盖，并修改您的构造函数以包含 textsize 参数：

```
public class MapItemizedOverlay extends ItemizedOverlay<OverlayItem>
{
//member variables
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;
private int mTextSize;

public MapItemizedOverlay(Drawable defaultMarker, Context context, int textSize)
{
    super(boundCenterBottom(defaultMarker));
    mContext = context;
    mTextSize = textSize;
}

//In order for the populate() method to read each OverlayItem, it will make a request to createItem(int)
// define this method to properly read from our ArrayList
@Override
protected OverlayItem createItem(int i)
{
    return mOverlays.get(i);
}

@Override
public int size()
{
    return mOverlays.size();
}

@Override
protected boolean onTap(int index)
{
    OverlayItem item = mOverlays.get(index);

    //Do stuff here when you tap, i.e. :
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();

    //return true to indicate we've taken care of it
    return true;
}

@Override
public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow)
{
    super.draw(canvas, mapView, shadow);

    if (shadow == false)
    {
        //cycle through all overlays
        for (int index = 0; index < mOverlays.size(); index++)
        {
            OverlayItem item = mOverlays.get(index);

            // Converts lat/lng-Point to coordinates on the screen
            GeoPoint point = item.getPoint();
            Point ptScreenCoord = new Point() ;
            mapView.getProjection().toPixels(point, ptScreenCoord);

            //Paint
            Paint paint = new Paint();
            paint.setTextAlign(Paint.Align.CENTER);
            paint.setTextSize(mTextSize);
            paint.setARGB(150, 0, 0, 0); // alpha, r, g, b (Black, semi see-through)

            //show text to the right of the icon
            canvas.drawText(item.getTitle(), ptScreenCoord.x, ptScreenCoord.y+mTextSize, paint);
        }
    }
}

public void addOverlay(OverlayItem overlay)
{
    mOverlays.add(overlay);
    populate();
}

public void removeOverlay(OverlayItem overlay)
{
    mOverlays.remove(overlay);
    populate();
}

public void clear()
{
    mOverlays.clear();
    populate();
}

} 
```

# c++ - C++11 lambda 实现和内存模型

> ID：12202656
> 
> 赞同：104
> 
> 时间：2012-08-30T17:50:11.117
> 
> 标签：c++, memory, lambda, c++11

我想要一些关于如何正确思考 C++11 闭包以及`std::function`如何实现它们以及如何处理内存的信息。

虽然我不相信过早的优化，但我确实有一个习惯，即在编写新代码时仔细考虑我的选择对性能的影响。我还进行了大量的实时编程，例如在微控制器和音频系统上，要避免非确定性的内存分配/释放暂停。

因此，我想更好地了解何时使用或不使用 C++ lambda。

我目前的理解是，没有捕获闭包的 lambda 与 C 回调完全一样。但是，当通过值或引用捕获环境时，会在堆栈上创建一个匿名对象。当必须从函数返回值闭包时，将其包装在`std::function`. 在这种情况下，闭包内存会发生什么？它是从堆栈复制到堆的吗？是否在释放时`std::function`释放它，即它是否像 a 一样被引用计数`std::shared_ptr`？

我想在一个实时系统中，我可以设置一个 lambda 函数链，将 B 作为一个延续参数传递给 A，从而`A->B`创建一个处理管道。在这种情况下，A 和 B 闭包将被分配一次。虽然我不确定这些是否会分配在堆栈或堆上。然而，一般来说，这在实时系统中使用似乎是安全的。另一方面，如果 B 构造了一些它返回的 lambda 函数 C，那么 C 的内存将被重复分配和释放，这对于实时使用来说是不可接受的。

在伪代码中，一个 DSP 循环，我认为这将是实时安全的。我想执行处理块 A，然后是 B，A 调用它的参数。这两个函数都返回`std::function`对象，对象`f`也将返回对象，`std::function`其环境存储在堆中：

```
auto f = A(B);  // A returns a function which calls B
                // Memory for the function returned by A is on the heap?
                // Note that A and B may maintain a state
                // via mutable value-closure!
for (t=0; t<1000; t++) {
    y = f(t)
} 
```

我认为在实时代码中使用可能不好的一个：

```
for (t=0; t<1000; t++) {
    y = A(B)(t);
} 
```

还有一个我认为堆栈内存可能用于关闭的地方：

```
freq = 220;
A = 2;
for (t=0; t<1000; t++) {
    y = [=](int t){ return sin(t*freq)*A; }
} 
```

在后一种情况下，闭包是在循环的每次迭代中构造的，但与前面的示例不同，它很便宜，因为它就像一个函数调用，不进行堆分配。此外，我想知道编译器是否可以“解除”闭包并进行内联优化。

它是否正确？谢谢你。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-30T18:43:19.033

> 我目前的理解是，没有捕获闭包的 lambda 与 C 回调完全一样。但是，当通过值或引用捕获环境时，会在堆栈上创建一个匿名对象。

不; 它*始终*是在堆栈上创建的具有未知类型的 C++ 对象。无捕获的 lambda 可以*转换*为函数指针（尽管它是否适合 C 调用约定取决于实现），但这并不意味着它*是*函数指针。

> 当必须从函数返回值闭包时，将其包装在 std::function 中。在这种情况下，闭包内存会发生什么？

lambda 在 C++11 中并没有什么特别之处。它是一个像任何其他对象一样的对象。一个 lambda 表达式会产生一个临时的，可用于初始化堆栈上的变量：

```
auto lamb = []() {return 5;}; 
```

`lamb`是一个堆栈对象。它有一个构造函数和析构函数。它将遵循所有 C++ 规则。的类型`lamb`将包含捕获的值/引用；它们将成为该对象的成员，就像任何其他类型的任何其他对象成员一样。

你可以把它给一个`std::function`：

```
auto func_lamb = std::function<int()>(lamb); 
```

在这种情况下，它将获得的值的*副本*`lamb`。如果`lamb`通过价值捕获了任何东西，那么这些价值将有两个副本；一进`lamb`一进`func_lamb`。

当前作用域结束时，`func_lamb`将被销毁，然后`lamb`按照清理堆栈变量的规则。

您可以轻松地在堆上分配一个：

```
auto func_lamb_ptr = new std::function<int()>(lamb); 
```

确切地说，a 内容的内存位置`std::function`取决于实现，但`std::function`通常需要至少一个内存分配。这就是为什么`std::function`的构造函数可以使用分配器。

> 是否在释放 std::function 时释放它，即它是否像 std::shared_ptr 一样进行引用计数？

`std::function`存储其内容的*副本*。与几乎所有标准库 C++ 类型一样，`function`使用*值语义*。因此，它是可复制的；当它被复制时，新`function`对象是完全独立的。它也是可移动的，因此任何内部分配都可以适当地转移，而无需更多的分配和复制。

因此不需要引用计数。

假设“内存分配”等同于“在实时代码中使用不好”，您陈述的所有其他内容都是正确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-03T11:20:13.897

C++ lambda 只是重载的（匿名）Functor 类的语法糖，`operator()`并且`std::function`只是可调用对象（即仿函数、lambdas、c 函数...）的包装器，它通过值从当前**复制**“实体 lambda 对象”堆栈范围 - 到**堆**。

为了测试实际构造函数/重定位的数量，我做了一个测试（对 shared_ptr 使用另一种包装，但事实并非如此）。你自己看：

```
#include <memory>
#include <string>
#include <iostream>

class Functor {
    std::string greeting;
public:

    Functor(const Functor &rhs) {
        this->greeting = rhs.greeting;
        std::cout << "Copy-Ctor \n";
    }
    Functor(std::string _greeting="Hello!"): greeting { _greeting } {
        std::cout << "Ctor \n";
    }

    Functor & operator=(const Functor & rhs) {
        greeting = rhs.greeting;
        std::cout << "Copy-assigned\n";
        return *this;
    }

    virtual ~Functor() {
        std::cout << "Dtor\n";
    }

    void operator()()
    {
        std::cout << "hey" << "\n";
    }
};

auto getFpp() {
    std::shared_ptr<std::function<void()>> fp = std::make_shared<std::function<void()>>(Functor{}
    );
    (*fp)();
    return fp;
}

int main() {
    auto f = getFpp();
    (*f)();
} 
```

它使这个输出：

```
Ctor 
Copy-Ctor 
Copy-Ctor 
Dtor
Dtor
hey
hey
Dtor 
```

将为堆栈分配的 lambda 对象调用完全相同的一组 ctors/dtors！（现在它调用 Ctor 进行堆栈分配，Copy-ctor (+ heap alloc) 在 std::function 中构造它，另一个用于进行 shared_ptr 堆分配 + 构造函数）

# iphone - 将数据从数据存储中的可变数组传递到视图中的 UILabel

> ID：12202657
> 
> 赞同：0
> 
> 时间：2012-08-30T17:50:12.967
> 
> 标签：iphone, objective-c, xcode, ios5

我是 iOS 编程和整个编程的新手，我目前正在从事的项目有问题。我正在开发一个测验应用程序，我想将我的问题存储在一个包含问题数组的对象中。我的测验 ViewController 然后导入问题库并`UILabel`在视图中显示这些问题。

抱歉，如果这有点像菜鸟问题，但我似乎无法弄清楚，网络搜索也没有太大帮助。我还处于学习过程的早期阶段。

我有： ViewController.h ViewController.m QuestionBank.h QuestionBank.m

在 QuestionBank.h 中：

```
//QuestionBank.h

#import <Foundation.h>

@interface QuestionBank : NSObject

- (id)initWithQuestionsArray:(NSMutableArray *)questions;
@property (nonatomic, copy) NSMutableArray *questions;
@property in currentQuestionIndex;
@property (nonatomic, copy) NSString *currentQuestion;
@end 
```

在 QuestionBank.m 中：

```
//QuestionBank.m

#import "QuestionBank.h"

@implementation QuestionBank;
@synthesize questions _questions;
@synthesize currentQuestionIndex;
@synthesizeCurrentQuestion;

- (id)initWithQuestionsArray:(NSMutableArray *)questions
   {
    self = [super init];
    if (self) {
    questions = [[NSMutableArray alloc] init];
    [_quesitons addObject:@"What is the 14 +6?];
    [_questions addObject:@"What is my name?"];
    [_questions addObject:@"What is my age?"];
    }
    return self;
}

- (void)setCurrentQuestion:(NSString *)q
{
    q = [_questions objectAtIndex:currentQuestionIndex];
} 
```

在 ViewController.h

```
//ViewController.h
#import <UIKit/UIKit>
@class QuestionBank;

@interface ViewController : UIViewController <UINavigationController Delegate>

@property (weak, nonatomic) IBOutlet UILabel *questionLabel;
@property (retain, nonatomic) QuestionBank *questionBank; 
```

在 ViewController.m 中

```
#import "ViewController.h"
#import "QuestionBank.h"

@implementation ViewController
@synthesize questionLabel;
@synthesize questionBank;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = _subjectName;

    if (self.title == @"AGK") {
    [_questionLabel setText:self.questionBank.currentQuestion];
    NSLog(@"AGK was selected");
    }
} 
```

使用代码，我在数组中遇到的问题没有出现在`UILabel`（标签正确连接到`ViewController`）中。

请随时指出任何错误，分享我如何让它工作的任何建议，以及我可以在代码的其他任何地方进行的任何一般性改进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:44:42.190

您的代码有很多问题，需要进行一些修复。这里有几个：

我认为您并不完全理解在 Objective C 中如何将变量传递给函数。例如，在您的 - (void)setCurrentQuestion:(NSString *)q 方法中，您实际上并没有做任何事情。例如，请允许我在一个假装程序中演示以下代码：

```
- (void)testStringPassing:(NSString *)string
{
    string = @"Goodbye World!";
}

- (void)viewDidLoad
{
    NSString *string = @"Hello World.";
    [self testStringPassing:string];
    NSLog(@"%@", string);
} 
```

在该示例代码中，您将记录“Hello World”，而不是“Goodbye World”。所以，本质上， -(void)testStringPassing:(NSString *)string 并没有真正做任何事情。如果你想改变“字符串”的值，你会想做更多这样的事情：

```
- (NSString *)testStringPassing
{
    return @"Goodbye World";
}

- (void)viewDidLoad
{
    NSString *string = @"Hello World";
    string = [self testStringPassing];
    NSLog(@"%@", string);
} 
```

该代码将记录“再见世界”，因为您为 testStringPassing 返回一个值并将“字符串”设置为等于该值。

同样，这与您的代码有关，因为您的 -(void)setCurrentQuestion(NSString*)q 方法就像您没有真正完成任何事情的第一个示例。

您必须在使用它们之前分配和初始化您的类。在您的 ViewController 中，您尝试在分配和初始化之前使用您的 questionBank 类。尝试这样的事情：

```
- (void)viewDidLoad
{
    [super viewDidLoad]
    self.questionBank = [[QuestionBank alloc] init];

    //the rest of your code here
} 
```

上述两个问题的组合是您使用 - (id)initWithQuestionsArray:(NSMutableArray *)questions 作为自定义初始化程序，但您没有将传递的值用于任何事情。在您当前的代码中，我建议您将 -(id)initWithQuestionsArray:(NSMutableArray *)questions 代码替换为以下代码：

```
- (id)init
{
    self.questions = [[NSMutableArray alloc] init];
    [self.questions addObject:@"Your Question Text Goes Here!!!!"];
    [self.questions addObject:@"Another question can go here."];
} 
```

下划线命名约定在 Objective C 中有点不受欢迎，因为它违背了合成属性和使用生成的 getter 和 setter 的观点。特别是因为你刚刚学习，我会放弃下划线符号。代替

```
@synthesize questions _questions; 
```

和

```
@synthesize questions; 
```

然后，在您访问问题数组的任何地方，使用 self.questions 而不是 _questions。

无论如何，这应该足以让你开始/指出正确的方向。我强烈建议拿起一本只关注 Objective C 的书。学习 iOS 很棒，但是有这么多资源假设你已经知道或熟悉 Objective C，但似乎情况并非如此。

# c++ - 自定义内存分配器设计

> ID：12202659
> 
> 赞同：0
> 
> 时间：2012-08-30T17:50:25.693
> 
> 标签：c++, templates, memory-management

我有内存分配器，它为一个对象分配内存并使用任何给定的参数调用它的构造函数，见下文。

```
 // 0 args to constructor
    template <class T>
    inline T* AllocateObject() { return new (InternalAllocate(sizeof(T), alignof(T))) T(); }

    // 1 args to constructor
    template <class T, typename arg0>
    inline T* AllocateObject(const arg0& a0) { return new (InternalAllocate(sizeof(T), alignof(T))) T(a0); }

    template <class T, typename arg0>
    inline T* AllocateObject(arg0& a0) { return new (InternalAllocate(sizeof(T), alignof(T))) T(a0); }

    // 2 args to constructor
    template <class T, typename arg0, typename arg1>
    inline T* AllocateObject(arg0& a0, arg1& a1) { return new (InternalAllocate(sizeof(T), alignof(T))) T(a0,a1); }

    template <class T, typename arg0, typename arg1>
    inline T* AllocateObject(const arg0& a0, arg1& a1) { return new (InternalAllocate(sizeof(T), alignof(T))) T(a0,a1); }

    template <class T, typename arg0, typename arg1>
    inline T* AllocateObject(arg0& a0, const arg1& a1) { return new (InternalAllocate(sizeof(T), alignof(T))) T(a0,a1); }

    template <class T, typename arg0, typename arg1>
    inline T* AllocateObject(const arg0& a0, const arg1& a1) { return new (InternalAllocate(sizeof(T), alignof(T))) T(a0,a1); }

    //......... 
```

正如您所看到的，调用数量随着参数数量的增加而迅速增长。我必须为每个参数交替使用“const”和“non-const”，以确保它与我通过的任何参数都能正常工作。（具体来说，能够通过引用传递以及通过值传递）

有没有比重复这个方案更好的方法来执行相同的任务？基本上，我正在查看最多 8-10 个参数之类的东西，我觉得它不是很可行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:53:20.163

您可以使用可变参数模板。

```
template <class T, class... Args>
inline T* AllocateObject(Args&&... args) {
    return new (InternalAllocate(sizeof(T), alignof(T)))
               T(std::forward<Args>(args)...);
} 
```

该`std::forward`调用将保留任何引用和`const`属性。

* * *

请注意，这需要 C++11。大多数最新的编译器已经支持可变参数模板（不过我不确定微软的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:24:52.977

不是模板解决方案，而是可变参数`#define`可以帮助您解决这个问题。
确切的格式取决于你的编译器，但在 MSVC 中它看起来像这样：

```
#define ALLOCATE_OBJECT(TYPE, ...) \
    ( new( InternalAllocate(sizeof(TYPE), alignof(TYPE)) ) TYPE(__VA_ARGS__) ) 
```

# java - 使用 javamail 发送邮件会引发错误

> ID：12202662
> 
> 赞同：0
> 
> 时间：2012-08-30T17:50:35.500
> 
> 标签：java, android, smtp, imap, jakarta-mail

我有两个活动，一个是使用 Imap 接收电子邮件，第二个是使用 SMTP 发送电子邮件。发送电子邮件活动的按钮位于接收电子邮件活动中，因此接收电子邮件活动必须在发送电子邮件活动之前运行。

`Could not connect to SMTP host: localhost, port: 25`我的问题是我不断收到一个异常说 `Transport.send(new_message)`

但是，如果我在没有先调用接收电子邮件活动的情况下运行相同的活动，那么它可以正常工作。有人可以帮我解释为什么会这样吗？

这是 RecieveEmail 异步任务的代码（完整的活动代码太长）

```
 try{

               Properties props = new Properties();
               props.setProperty( "mail.imaps.socketFactory.class", "com.X509TrustAll.DummySSLSocketFactory" );
               Log.v("EmailList", "Stting properties");

              // Get the default Session object.
              session = Session.getDefaultInstance(props, null);
              Log.v("EmailList", "Geting Default Instance");

              // Get a Store object that implements the specified protocol.
              store = session.getStore("imaps");
              Log.v("EmailList", "Getting Sesion");

              //Connect to the current host using the specified username and password.
              Log.v("EmailList", "Connecting...");
              store.connect(host,port, user, password);
              Log.v("EmailList", "Connected");

              //Create a Folder object corresponding to the given name.
              Folder[] folders = store.getDefaultFolder().list("*");
              Log.v("EmailList", "Got Folder List");
              folder =  folders[5];

              // Open the Folder.
              Log.v("EmailList", "Opening Folder");
              folder.open(Folder.READ_ONLY);

              Log.v("EmailList", "Getting Messages");
              messages = folder.getMessages();

              Log.v("EmailList", "Got Messages");

          } catch (Exception e){

              Log.v("EmailList", "Exception");

          }
        }

              for (int i = lastMessageNumber -1;  i >= interateUpto; i--) {

                  Log.v("EmailRecieve", "Email no. " + Integer.toString(i));

                  javax.mail.Address[] froms = messages[i].getFrom();
                  String emailAdress = froms == null ? null : ((InternetAddress) froms[0]).getAddress();

                  FromAsync.add(emailAdress);

                  SubjectAsync.add(messages[i].getSubject());

                  SentDateAsync.add(messages[i].getSentDate().toString());

                  Part part = messages[i];

                  checkAttachments(part);

                  if (messages[i].isSet(Flag.SEEN)){

                      SeenAsync.add("true");

                  }else{

                      SeenAsync.add("false");

                  }

              }

              lastMessageNumber = lastMessageNumber - 19;   //new last number is stored

              folder.close(false);
              store.close();

        } catch (Exception e){

                  Log.v("EmailList", "Exception");

        }

      Log.v("EmailList", "Retrieve Email Finished");

        return null;

    } 
```

这是发送电子邮件的代码（同样，完整的代码太长了，所以我只发布相关的内容，即 UI 等未发布

```
@Override
    protected Void doInBackground(Void... arg0) {

        //Recipient's email ID needs to be mentioned.
          String to = To.getText().toString();

          // Sender's email ID needs to be mentioned
          String from = "foobar@foobar.hehe";

          // The Host
          String smtphost = "www.isleworthsyon.hounslow.sch.uk";

          // Get system properties
          Properties smtpproperties = System.getProperties();

          // Setup mail server
          smtpproperties.setProperty("mail.smtp.host", smtphost);

          // Get the default Session object.
          Session smtpsession = Session.getDefaultInstance(smtpproperties);

          try{
             MimeMessage new_message = new MimeMessage(smtpsession);

             // Set From:
             new_message.setFrom(new InternetAddress(from));

             // Set To:
             new_message.addRecipient(Message.RecipientType.TO,
                                      new InternetAddress(to));

             // Set Subject: 
             new_message.setSubject(Subject.getText().toString());

             if (hasAttachment == true){

                 // Create the message part 
                 BodyPart messageBodyPart = new MimeBodyPart();

                 // Fill the message
                 messageBodyPart.setText(Body.getText().toString());

                 // Create a multipar message
                 Multipart multipart = new MimeMultipart();

                 // Set text message part
                 multipart.addBodyPart(messageBodyPart);

                 // Iterating over all Attachments    
                 for (int i=0; i < attachmentFiles.size(); i++){

                    if (attachmentFiles.get(i).equals("null") != true)    {

                         messageBodyPart = new MimeBodyPart();
                         String filename = attachmentFiles.get(i);
                         FileDataSource source = new FileDataSource(filename);
                         messageBodyPart.setDataHandler(new DataHandler(source));
                         messageBodyPart.setFileName(source.getName());
                         multipart.addBodyPart(messageBodyPart);

                    }
                 }

                 new_message.setContent(multipart);

             }else{

                 // Set Body if not attaching anything
                 new_message.setText(Body.getText().toString());

             }

             // Send message
             Transport.send(new_message);
             sendingSuccesfull = true;
          }catch (MessagingException mex) {
             sendingSuccesfull = false;
             Log.v("Email Compose", "Message Sending Failed, Details: " + mex.getMessage());

          }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:17:41.560

尝试清理[这些常见错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)，看看是否能解决问题。

# .net - 创建上下文“spring.root”时出错：无法从字符串值加载类型

> ID：12202666
> 
> 赞同：2
> 
> 时间：2012-08-30T17:50:53.877
> 
> 标签：.net, spring, console-application, spring.net

我正在做.net项目，

因为从过去 2 天开始出现以下错误，这是指其他程序集`Valhalla.Core`但没有得到确切的错误原因。

最近没有进行任何更改帮助我确定原因。

```
{"Error creating context 'spring.root': Could not load type from string value 'Valhalla.Core.Events.Implementation.EventListenerManager, Valhalla.Core.Events.Implementation'."}

{"Could not load type from string value 'Valhalla.Core.Events.Implementation.EventListenerManager, Valhalla.Core.Events.Implementation'.":""} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:38:27.003

您提到程序集名称是 Valhalla.Core，但错误消息中的类型限定符指示名为 Valhalla.Core.Events.Implementations 的程序集。逗号后面的部分是程序集名称，也就是相关dll的确切名称。

在您的 XML 配置文件中搜索

```
type="Valhalla.Core.Events.Implementation.EventListenerManager, Valhalla.Core.Events.Implementations" 
```

并将其替换为

```
type="Valhalla.Core.Events.Implementation.EventListenerManager, Valhalla.Core" 
```

您可以调查的其他一些事情：

*   哪个程序集包含`EventListenerManager`？
*   该程序集是否存在于输出目录中？
*   在什么命名空间中`EventListenerManager`？

# c# - 从 Oracle 到 EntityFramework 的触发器/序列保存项目获得 ID？

> ID：12202668
> 
> 赞同：1
> 
> 时间：2012-08-30T17:51:02.097
> 
> 标签：c#, oracle, entity-framework, sequence

如果我设置触发器/序列来获取表的 nextval，我的代码中的对象是否会在保存后获得 ID？

例子：

```
using(TestContainer testContainer = new TestContainer()) {
    TestObj test = new TestObj;
    test.Name = "Test Object";
    testContainer.AddObject("TESTOBJ", test);
    testContainer.ObjectStateManager.ChangeObjectState(test, System.Data.EntityState.Added);
    testContainer.SaveChanges();
    System.Console.WriteLine("The test object ID is: " + test.ID);
} 
```

我想知道新对象的 ID 的原因是因为 ID 将用作另一个对象的参考，以了解创建的新 TestObjet。

# linux - 无法使用 linux 连接到防火墙代理后面的 svn

> ID：12202669
> 
> 赞同：2
> 
> 时间：2012-08-30T17:51:02.843
> 
> 标签：linux, eclipse, svn, ssh, putty

我在同一台机器上安装了 Windows 7 和 Ubuntu 12，并使用 eclipse。

我的计算机位于代理后面的 Novell 网络中，而 svn 服务器位于另一个代理后面的另一个网络中。我使用 putty 通过隧道连接到 svn。它适用于 Windows，但不适用于 Linux。两个eclipse代理设置都是一样的。

另外，在 linux 中，我可以使用 putty 连接到远程服务器，但是当我使用 ssh 时，无法建立连接。

在 Putty 中，设置为：

```
Hostname: 192.168.0.3 
Tunnel: L22 localhost:22
proxy: remoteproxy Port 8283 
```

尝试执行 ssh：

```
ssh -L 8283:remoteproxy:22 192.168.0.3
ssh -L 22:remoteproxy:8283 192.168.0.3 
```

而且它不起作用。

即使使用 putty 登录并尝试从 eclipse 连接到 svn 也无法在 linux 上运行，但在 windows 上就可以了。

有人可以帮助我吗？

我按照 Fabien 的指示进行操作，但没有奏效。在另一个终端中，我执行了 netstat 并出现以下内容：

```
Proto Recv-Q Send-Q Local Address Foreign Address State  
tcp 0 1 10.0.40.106:39108 192.168.0.3:ssh SYN_SENT  
tcp 0 0 10.0.40.106:55637 10.0.1.3:3128 ESTABLISHED  
tcp 0 0 10.0.40.106:55700 10.0.1.3:3128 TIME_WAIT  
tcp 0 1 10.0.40.106:56876 91.189.94.25:http SYN_SENT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:49:14.313

隧道配置应为：

`ssh -f -L localport:host:hostport user@ssh_server -N`

在你的情况下：

```
localport=22
host=remoteproxy
user is missing
ssh_server=192.168.0.3 
```

有关其他信息，您可以阅读此[链接](http://www.linuxhorizon.ro/ssh-tunnel.html)

# c# - 添加形状时的 Visio 绘图控件 AccessViolationException

> ID：12202671
> 
> 赞同：1
> 
> 时间：2012-08-30T17:51:06.793
> 
> 标签：c#, com, access-violation, visio

我有一个表格，`Visio Drawing Control`上面有一个。我正在使用`Visio Drawing Control 11.0`（我的 PC 上安装了 Visio 2003）。在表单加载事件中，我执行以下操作：

```
private void Form1_Load(object sender, EventArgs e)
{
    this.axDrawingControl1.Src = @"D:\visio test\drawing.vsd";
    Document currentStencil = this.axDrawingControl1.Document.Application.Documents.OpenEx(@"Basic_U.vss", (short)VisOpenSaveArgs.visOpenDocked);
    Window stencilWindow = this.axDrawingControl1.Document.OpenStencilWindow();
} 
```

当我运行应用程序时，我向文档添加了一个形状，然后应用程序崩溃并`AccessViolationException.`显示错误消息`Attempted to read or write protected memory. This is often an indication that other memory is corrupt.`
但是，当我*没有*通过将属性设置为文档的文件名来打开文档时`DrawingControl.Src`，应用程序工作正常，但我*需要*打开一个文档并使用绘图控件对其进行编辑。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T17:31:56.903

您可能需要等到文档完全加载。

为 this.axDrawingControl1.DocumentOpened 添加一个事件处理程序并将您的绘图代码移动到该处理程序。

# css - 液体布局：未应用 100% 最大宽度 img - 为什么？

> ID：12202673
> 
> 赞同：0
> 
> 时间：2012-08-30T17:51:18.503
> 
> 标签：css, liquid-layout

我对这种液体布局的东西完全陌生。我注意到，和我们大多数人一样，虽然我的大多数布局组件“液化”，但不幸的是，图像不会。

因此，我尝试`max-width: 100%`在几个地方使用建议的图像。

然而，尽管定义了`max-width`和`min-height`的 img **container**，但**img**不能缩放。

如果您以较宽的分辨率查看它，您会注意到例如“儿童图像”不会缩放。

关于问题可能是什么的任何线索，为什么该图像不能缩放？

**测试用例：**

浏览器：*Firefox 15.0* / *Chrome 21.0*

IOS：*MAC OS X Lion - 10.7.3*

分辨率：*1920x1200*

**我得到了什么：** 我得到一个直到容器结束才缩放的图像。img 宽度不适合`article`包含它的元素。 ![图像应按箭头所示缩放](../Images/4a3cfad227af1b169fdba3a3a7dee4ea.png)

**我所期望** 的：我希望图像会放大，直到它到达容器的末尾。从视觉上看，我希望图像与下面的段落一样宽，在某种程度上，图像的右侧与下面段落的右侧保持垂直对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:04:31.923

我想你误解了什么`max-width`。

`max-width:100%`意思是“这个元素的最大宽度是它的容器的 100%”。任何自然较小的东西都不会受到影响。这就是您现在所拥有的，并且工作正常。如果你使用`max-width:800px`，这意味着“永远不要让这个图像超过 800px 宽”，它不会强制 800px 宽度，这就是`width`目的。

`width:100%`表示“此元素应始终为其容器的 100% 宽度”。通常较小的任何东西现在必须占据整个宽度。任何更大的东西都会缩小到容器的宽度。

对于您的情况，只需使用`width:100%`实际图像并调整其大小以适合实际最大值（并为容器选择合理的最大宽度）。缩小后的图像通常比放大时看起来更好，但在针对移动设备进行优化时，您可能想要做相反的事情。

您通常将`max-width:100%`其视为默认样式的原因是图像不会超出其容器并破坏布局，因为图像通常根据其实际宽度自然调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:53:27.270

对我来说，您的图像随着视口大小的调整而缩放。但不要使用最大宽度，而是只使用宽度。但它适用于两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T06:15:53.563

据我所知，如果我有一个 300 像素宽度的图像（意味着图像是这样创建的，宽度为 300 像素）

现在这个图像在一个 div 里面，它的宽度是它的容器的 40%（在我的例子中是 body）

如果我给我的 img widht:100% 这意味着说如果我的 div 是 500px（全身宽度的 40%）宽度，我的图像将与其容器（在我的情况下为 div）具有相同的宽度。

如果我给 img max-width:100% 这意味着我的图像的最大宽度将始终为 300px（换句话说，它创建时的原始宽度是多少）

max-widht 确实有助于保持图像的像素清晰度

# crystal-reports - 返回不同数据类型的水晶公式

> ID：12202677
> 
> 赞同：0
> 
> 时间：2012-08-30T17:51:32.410
> 
> 标签：crystal-reports, crystal-reports-2008

我有一个要求，根据选择的参数，表格字段应显示为文本或日期。例如，如果用户选择 true，则作为日期时间类型的 OriginDate 字段应显示为报告中的日期，否则应显示为文本。我尝试创建一个公式并执行如下操作，然后将公式放在报告的详细信息部分，但由于返回的数据类型不同，它不起作用。

```
if {?Mailmerge}=true then
ToText({Travel.OriginDatetime}, "M/d/yy")
else
{Travel.OriginDatetime} 
```

有没有一种方法可以满足上述要求，这样我就不会最终创建 2 个报告，其中一个字段显示为文本，另一个显示为日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:50:53.467

尝试创建一个公式，将您的字段作为字符串返回，并将`totext({Travel.OriginDateTime},"M/d/yy")`其与原始字段重叠，`{Travel.OriginDateTime}`并根据值有条件地抑制它们，`{?MailMerge}`以便在报告的任何一个实例中只显示一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:06:16.690

如果我关注你，你只想显示`M/d/yy`何时`?MailMerge`为真，否则你想显示完整日期？

您不能在同一个公式中显示不同的数据类型，因此只需将条件语句的两个部分都转换为字符串：

```
if {?Mailmerge}=true then
ToText({Travel.OriginDatetime}, "M/d/yy")  // 8/30/12
else
ToText({Travel.OriginDatetime}, "M/d/yy hh:mm:ss")  // 8/30/12 02:06:00 
```

我不知道您的日期在数据库中到底是什么样的，但您可以使用以上内容作为根据`?MailMerge`参数格式化日期的指南。

# search - ElasticSearch 中的模糊性设置

> ID：12202679
> 
> 赞同：12
> 
> 时间：2012-08-30T17:51:48.797
> 
> 标签：search, elasticsearch, fuzzy-search

我的搜索引擎需要一种方法来处理搜索字符串中的小错别字并仍然返回正确的结果。

根据 ElasticSearch 文档，在文本查询中存在与模糊匹配相关的三个值：**fuzziness**、**max_expansions**和**prefix_length**。

不幸的是，没有太多关于这些参数的确切作用以及它们的合理值的详细信息。我确实知道模糊度应该是 0 到 1.0 之间的浮点数，而另外两个是整数。

任何人都可以为这些参数推荐合理的“起点”值吗？我确信我将不得不通过反复试验进行调整，但我只是在寻找能够正确处理错别字和拼写错误的大致值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-07T01:51:32.757

我发现使用模糊查询来实际使用术语查询和模糊查询（具有相同术语）以检索拼写错误的结果时很有帮助，而且还确保输入的搜索词的实例在结果中出现最高.

IE

```
{
    "query": {
        "bool": {
            "should": [
                {
                    "match": {
                        "_all": search_term
                    }
                },
                {
                    "match": {
                        "_all": {
                            "query": search_term,
                            "fuzziness": "1",
                            "prefix_length": 2
                        }
                    }
                }
            ]
        }
    }
} 
```

此处列出了更多详细信息：[https ://medium.com/@wampum/fuzzy-queries-ae47b66b325c](https://medium.com/@wampum/fuzzy-queries-ae47b66b325c)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T21:09:43.883

根据[Fuzzy Query](http://www.elasticsearch.org/guide/reference/query-dsl/fuzzy-query.html)文档，默认值为`0.5`min_similarity （看起来像您的**模糊**选项），**max_expansions**和**prefix_length**的“无界**”**。****`0`****

 ******[这个答案](https://stackoverflow.com/a/7151284/681986)应该可以帮助您理解**min_similarity**选项。`0.5`似乎是一个好的开始。

**prefix_length**和**max_expansions**会影响性能：您可以尝试使用默认值进行开发，但要确保它不会扩展（[lucene 开发人员甚至考虑将 prefix_length 的默认值设置为 2](http://find.searchhub.org/document/ec26cdd59b01e525#ec26cdd59b01e525)）。我建议运行基准测试以找到适合您特定情况的正确值。******

# c# - 如果 __type 不是属性列表中的第一个，.NET 的 json 反序列化将失败

> ID：12202680
> 
> 赞同：1
> 
> 时间：2012-08-30T17:51:50.177
> 
> 标签：c#, json

我以格式将 json 对象发送到 DotNet 服务

```
{"__type":"EntityItem#ru.test.com","name":"sample"} 
```

在网络服务上，我得到了对象 EntityItem，一切都很好。

但是如果 __type 不会首先出现在列表属性中，那么它会在解析对象时出错。下一个版本 JSON 崩溃

```
{"name":"sample","__type":"EntityItem#ru.test.com"} 
```

是否存在解决方案如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:24:50.007

它被称为“类型提示”。这是链接[http://msdn.microsoft.com/en-us/library/bb412170.aspx](http://msdn.microsoft.com/en-us/library/bb412170.aspx) 和 qoute

```
Note that the type hint must appear first in the JSON representation. This is the only case where order of key/value pairs is important in JSON processing. 
```

真难过。

# c# - 每秒生成事件 X 次，但每秒内间隔不均匀

> ID：12202681
> 
> 赞同：3
> 
> 时间：2012-08-30T17:51:51.910
> 
> 标签：c#

我想编写一个类，它会以`x`每秒预定义的次数触发事件调用它`n`。

但是，我不想在每秒内均匀地开火`x` **。**

因此，假设`n`= 100, 25 可能会在前 300 毫秒内触发，然后在接下来的 600 毫秒内再触发 50 次，在剩余的 100 毫秒内触发最后 25 次。

理想情况下，我想要比上面介绍的更好的粒度和每秒内更大的间距范围。

我想知道我是否能够创建一个定义毫秒的数组以及要触发多少个事件。然后使用循环和`Stopwatch`类来确定是否应该触发该毫秒航点的定义事件。

问题是，是否可以足够快地每秒计算数组，每一秒都应该有随机间距。

显然，事件需要是异步的，以避免被连接到它的东西延迟。

有人遇到过类似的需求吗？

## 更新

我想我至少会把我最初的努力放在这里。

所以我发现有足够的分辨率来检查你当前处于哪一毫秒和哪一秒。基本上，每一秒我重建我的间距，每毫秒都会在数组中获得一个条目，每个条目表示该毫秒触发事件的次数。

我的问题是间距...我需要一种更好的方法来尝试聚集事件计数，目前这个 jsut 似乎将它们均匀地分布在 0、1 或 2 中。

```
public delegate void EmptyEventDelegate();
    public class RandEvent
    {
        public event EmptyEventDelegate OnEvent = delegate { };
        private bool running = false;
        Random r = new Random();

        private int eventsPS;

        public RandEvent(int eventsPS = 1)
        {
            this.eventsPS = eventsPS;
        }

        public void Start()
        {
            running = true;
            Task.Factory.StartNew(() =>
                {
                    Run();
                });
        }

        private void Run()
        {
            var sw = new Stopwatch();
            sw.Start();

            int currentSecond = 0;
            int[] eventCount = BuildEventSpacing();

            while(running)
            {
                if (currentSecond != sw.Elapsed.Seconds)
                {
                    currentSecond = sw.Elapsed.Seconds;
                    eventCount = BuildEventSpacing();
                }
                else
                {
                    for(int i = 0; i < eventCount[sw.Elapsed.Milliseconds]; i++)
                        OnEvent();

                }
            }

            sw.Stop();
        }

        private int[] BuildEventSpacing()
        {
            var array = new int[1000];

            for (int i = 0; i < eventsPS; i++)
            {
                array[r.Next(0, 999)]++;
            }

            return array;
        }

        public void Stop()
        {
            running = false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:15:56.310

创建一个`Timer`并在`Tick`事件中做任何需要做的事情。此外，使用以下方法（在`Tick`事件的附加处理程序中）每次更改间隔。最好`Random`每次都提供相同的实例传递给方法，而不是提供新的实例。

```
private static double millisecondsPerSecond = 1000.0;
/// <summary>
/// Method used to determine how long you would wait for the event to fire next
/// </summary>
/// <param name="averageFiresPerSecond">The approximate number of times the event should occur per second.</param>
/// <param name="variance">How much variance should be allowed, as a percentage.  i.e. a variance of 0.1 would mean that 
/// the delay will be +/- 10% of the exact rate.</param>
/// <param name="generator">A randon number generator.</param>
/// <returns>The number of milliseconds to wait for the next event to fire.</returns>
public double GetNextDelay(int averageFiresPerSecond, double variance, Random generator)
{
    double randomFactor = ((generator.NextDouble() * 2) * variance);
    return (millisecondsPerSecond / averageFiresPerSecond) * randomFactor;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:46:37.620

假设您想要 100 个总和为 1 的数字。您可以执行以下操作：

1.  生成 0 到 1 之间的 100 个随机数（即`Random.NextDouble`）并存储在列表中。
2.  对数字求和。
3.  将列表中的每个数字除以总和。

您现在有一个包含 100 个数字的列表，总和为 1.0。

现在，创建一个一次性计时器，其间隔是列表中的第一个值。当它触发时，处理程序完成它的工作，然后再次设置一次性计时器，其间隔等于列表中的下一个值。

除非这不会完美地工作，因为它没有考虑处理滴答声和再次设置计时器所需的时间。因此，您必须跟踪该延迟并相应地调整下一个刻度。但即使这样也不会是完美的。

正如我在评论中所说，您将很难让任何 .NET 计时器每秒为您提供超过 60 个滴答声。*充其量*，您可以预期计时器滴答之间有 15 毫秒。即使您使用自定义计时器实现，您也会遇到一些麻烦，因为计时器滴答声不会*完全*准时发生。当然，随着计时器间隔的减少，问题会变得更糟。

无论如何，您无法让 Windows 计时器为您提供优于 1 毫秒的分辨率，因此您必须调整我上面描述的方法以提供大于或等于 0.001 的数字。

您使用的想法`Stopwatch`可以与我创建事件间隔的方法一起使用。但是，请理解循环将在单个内核上消耗接近 100% 的 CPU 时间。即使那样，它也可能不会*准确地*按时为您提供事件，因为其他更高优先级的任务可能会导致您的循环被换出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:00:37.737

要创建随机事件时间数组：

1.  选择事件之间的最小时间间隔，并用所有可能的事件时间填充数组。例如，如果您选择 1ms 的粒度，那么数组将有 1000 个值：0、0.001、0.002、...、0.999。
2.  每秒对数组进行打乱以随机化元素的顺序。
3.  使用数组的前 n 个元素作为事件的触发时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:37:15.177

我建议将 TimeSpan 对象的集合初始化为相等并且总和为 1 秒。确切的值将由您的`n`.

从那里，你可以用你喜欢的任何值来抵消对或组，你的总数仍然是一秒。例如...

```
var offset = new TimeSpan.FromMilliseconds(10); // 10ms offset
timeSpans[0] += offset;
timeSpans[1] -= offset; 
```

通过这种方式，您可以在不影响总和的情况下移动它们。如果你需要让它们来得早，晚来得少，那么你可以做类似的事情......

```
timeSpans[0] -= offset;
timeSpans[1] -= offset;
timeSpans[2] += offset;
timeSpans[2] += offset; 
```

这将使索引 0 和 1 的延迟更短，索引 2 的延迟将增加一倍，但总和不受影响。

唯一要记住的是，任何时间跨度都不应小于 0，并且总和应始终为 1，那么您就是金。分发 TimeSpan 对象后，您可以使用它们在触发事件之间暂停`x`。你会想要改变（随机化？）你的偏移量几次，每次你改变它时，选择新的 timeSpans（随机？）来应用偏移量。在该过程结束时，它应该非常混乱地间隔开。

如果这太抽象，我可以提供更详细的代码示例。:)

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T19:50:33.240

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Diagnostics;

namespace TestProject1
{
    [TestClass]
    public class Test
    {
        [TestMethod]
        public void TestSteps()
        {   
            var random = new Random();
            for (int i = 0; i < 20000; i++)
            {
                int numberOfEvents = random.Next(1,1000);
                var generator = new RandomTimeStepGenerator(numberOfEvents);
                var stopwatch = new Stopwatch(); 
                stopwatch.Start();
                var steps = generator.MillisecondDeltas;
                Assert.AreEqual(numberOfEvents, steps.Count);
                var sum = generator.MillisecondDeltas.Sum();
                Assert.AreEqual(1000.0,sum,0.1);
                Assert.IsTrue(stopwatch.ElapsedMilliseconds<10);
            }

        }        
    }

    public class RandomTimeStepGenerator
    {
        private readonly int _numberOfEvents;
        const int timeResolution = 10000;

        public RandomTimeStepGenerator(int numberOfEvents)
        {
            _numberOfEvents = numberOfEvents;
        }

        public int NumberOfEvents
        {
            get { return _numberOfEvents; }
        }

        public List<double> MillisecondDeltas
        {
            get
            {
                var last=0;
                var result = new List<double>();
                var random = new Random();

                for (var i = 0; i < timeResolution && result.Count < _numberOfEvents; i++)
                {
                    var remainingEvents = _numberOfEvents - result.Count;
                    var remainingTime = timeResolution - i;
                    if(remainingEvents==1) // make sure the last event fires on the second
                    {
                        result.Add((timeResolution - last) / 10.0);
                        last = i;  
                    }
                    else if (remainingTime <= remainingEvents) // hurry up and fire you lazy !!! your going to run out of time 
                    {
                        result.Add(0.1);
                    }
                    else
                    {
                        double probability = remainingEvents / (double)remainingTime;
                        int next = random.Next(0,timeResolution);                        
                        if ((next*probability) > _numberOfEvents)
                        {
                            result.Add((i - last)/10.0);
                            last = i;
                        }
                    }                   
                }                 
                return result;
            }
        }
    }    
} 
```

# compact-framework - nServiceBus 和紧凑型框架

> ID：12202682
> 
> 赞同：1
> 
> 时间：2012-08-30T17:51:56.477
> 
> 标签：compact-framework, nservicebus

是否有可能将 CF 应用程序集成到 nServiceBus 架构中？或者有没有支持 Compact Framework 的 nServiceBus 替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:10:52.663

根据我对 Compact Framework 的有限理解，它对反射有限制，这可能会导致难以在其中托管 NServiceBus 库。你最好让它只调用一个调用 NServiceBus 的 Web 服务。

# java - 如何存储日期和时间并能够将其绑定到标签并相互比较

> ID：12202691
> 
> 赞同：0
> 
> 时间：2012-08-30T17:52:39.487
> 
> 标签：java, javafx, javafx-2

我找不到任何有趣的信息如何在 JavaFX2 中存储时间和日期并能够将其绑定到标签。我想我可以为自己的目的扩展 StringProperty，但我不确定如何实现所有这些方法。另外我有一个包含很多职位的列表，我希望能够过滤这个列表，例如只显示 3 岁以上的模型。有什么好的方法吗？

**编辑：** 我目前的解决方案

```
public class DateProperty extends SimpleStringProperty {

    private final Calendar calendar = Calendar.getInstance();

    public DateProperty() {
    }

    public Date getDate() {
        return calendar.getTime();
    }

    public Calendar getCalendar() {
        return calendar;
    }

    public void set(String a) {
        calendar.set(Calendar.HOUR_OF_DAY, 0);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MILLISECOND, 0);
        try {
            DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
            calendar.setTime(formatter.parse(a));
        } catch (ParseException e) {
            DateFormat formatter = new SimpleDateFormat("HH:mm:ss");
            try {
                calendar.setTimeInMillis(formatter.parse(a).getTime()
                        + calendar.getTimeInMillis());
            } catch (ParseException e1) {
                calendar.setTimeInMillis(0);
            }
        }
    }

    abstract class DateBinding extends StringBinding {
        abstract protected DateFormat getFormatter();

        @Override
        protected String computeValue() {
            return getFormatter().format(calendar.getTime());
        }
    }

    public StringBinding asDateString() {
        return new DateBinding() {
            @Override
            protected DateFormat getFormatter() {
                return new SimpleDateFormat("yyyy-MM-dd");
            }
        };
    }

    public StringBinding asTimeString() {
        return new DateBinding() {
            @Override
            protected DateFormat getFormatter() {
                return new SimpleDateFormat("HH:mm:ss");
            }
        };
    }

    public StringBinding asDateAndTimeString() {
        return new DateBinding() {
            @Override
            protected DateFormat getFormatter() {
                return new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            }
        };
    }
} 
```

# java - 使用 MinGW64 的 JAWT 应用程序无法运行

> ID：12202695
> 
> 赞同：1
> 
> 时间：2012-08-30T17:52:51.583
> 
> 标签：java, java-native-interface, windows-7-x64, mingw-w64, jawt

尝试运行 JAWT/JNI 应用程序。

我在 Windows 7 x64 上使用 jdk1.6.0_31 和[MinGW64 。](http://mingw-w64.sourceforge.net/)编译顺利，但仍然无法运行应用程序。`JAWT_GetAWT()`在我添加功能之前没有问题。

问题是我是 C/C++ 编程语言的新手。

**本机.java**

```
import java.awt.Component;
import javax.swing.JFrame;

public class Native{

    static {
        System.loadLibrary("native");
    }

    public static native boolean getBoolean(Component component);

    public static void main(String args[]){
        JFrame frame = new JFrame("test viewport");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.pack();

        getBoolean(frame);
    }
} 
```

生成**的 Native.h**

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class Native */

#ifndef _Included_Native
#define _Included_Native
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     Native
 * Method:    getBoolean
 * Signature: (Ljava/awt/Component;)Z
 */
JNIEXPORT jboolean JNICALL Java_Native_getBoolean
  (JNIEnv *, jclass, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

**本机.c**

```
#include <jni.h>
#include <jawt_md.h>
#include <jawt.h>
#include "Native.h"

JNIEXPORT jboolean JNICALL Java_Native_getBoolean(JNIEnv *env, jclass class, jobject component){
    JAWT awt;
    awt.version = JAWT_VERSION_1_4;

    return JAWT_GetAWT(env, &awt);//can't run after I add this function
} 
```

**来自[这里的](http://www.mingw.org/node/41)**GCC 编译命令行****

 **```
gcc -Wall -D_JNI_IMPLEMENTATION_ -Wl,--kill-at -Id:/devtools/java/jdk1.6.0_31/include -Id:/devtools/java/jdk1.6.0_31/include/win32 -LD:/devtools/java/jdk1.6.0_31/jre/bin -ljawt -shared Native.c -o native.dll 
```

应用程序给出 java.lang.UnsatisfiedLinkError：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\Users\t.key\Desktop\Native\native.dll: Can't find dependent libraries
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(Unknown Source)
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.loadLibrary0(Unknown Source)
        at java.lang.System.loadLibrary(Unknown Source)
        at Native.<clinit>(Native.java:7)
Could not find the main class: Native.  Program will exit. 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:31:35.407

您可以尝试这里提出的解决方案：[https ://github.com/mikiobraun/jblas/issues/9](https://github.com/mikiobraun/jblas/issues/9)

（他们也在使用 MinGW64，这就是为什么我认为这也可以解决你的问题。）**

# php - 从逗号分隔的列表中生成一组 HTML 列表项？PHP

> ID：12202700
> 
> 赞同：1
> 
> 时间：2012-08-30T17:53:28.527
> 
> 标签：php, html, arrays, csv

我的数据库中有一个包含文本值的字段：

**“这些，是，一些，关键字”**（减去引号）

现在，我想知道我是否可以从中生成一个无序列表，所以最终我的 HTML 内容如下：

```
<ul>
<li>these</li>
<li>are</li>
<li>some</li>
<li>keywords</li>
</ul> 
```

这对 PHP 可行吗？如果可以，有人可以帮我解决这个问题吗？

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:00:21.883

您可以通过以下方式完成此操作：

```
<?php
$yourList = "these, are, some, keywords";
$words = explode(',', $yourList);
if(!empty($words)){
    echo '<ul>';
    foreach($words as $word){
        echo '<li>'.htmlspecialchars($word).'</li>';
    }
    echo '</ul>';
}
?> 
```

正如 elcodedocle 所提到的，如果更合适，您可能希望使用[str_getcsv()而不是 explode 。](http://php.net/str_getcsv)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:56:14.567

看看[str_getcsv()](http://www.php.net/manual/en/function.str-getcsv.php)和[explode()](http://www.php.net/manual/en/function.explode.php)

例子：

```
<?php
$mystring = "these, are,some , keywords";
$myvalues = str_getcsv($mystring);
$myoutput = "<ul>";
foreach ($myvalues as $value){
    $myoutput .= "<li>".trim($value)."</li>\n";
}
$myoutput .= "</ul>";
echo $myoutput;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:58:01.313

1.  你需要[爆炸](http://php.net/manual/en/function.explode.php)你的字符串`', '`
2.  打印`<ul>`
3.  对于您收到的数组中的每个元素，您打印`'<li>' . $value . '</li>'`
4.  打印`</ul>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:03:13.660

你可以试试：

```
$arr = explode(",","these, are, some, keywords");
$res = "<ul>";
foreach ($arr as $val){
    $res .=  "<li>" . $val . "</li>";
}
$res .= "</ul>";
echo $res; 
```

# sql-server-2008 - SQL Server IN statement with wildcard

> ID：12202704
> 
> 赞同：2
> 
> 时间：2012-08-30T17:53:36.840
> 
> 标签：sql-server-2008

> **Possible Duplicate:**
> [Is there a combination of “LIKE” and “IN” in SQL?](https://stackoverflow.com/questions/3014940/is-there-a-combination-of-like-and-in-in-sql)

The first where clause below runs fine for me but it does not pick up contacts that might have 45211-1234 or 45213-4321

```
SELECT * FROM contacts
WHERE zipcode IN ('45211','45213') 
```

I thought I could change the where clause to the below to fix, but it fails.

```
SELECT * FROM contacts
WHERE zipcode IN ('45211%','45213%') 
```

How might I change this so it brings back anything that has proper zip + dash + any zip4? For example, `45211-1234` or `45213-4321`.

Note I have whole bunch of zipcodes to enter, not just these two.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:02:27.530

How about this:

```
SELECT * FROM contacts
WHERE Left(zipcode,5) IN ('45211','45213') 
```

# android - ListView 项目未显示为已激活

> ID：12202705
> 
> 赞同：4
> 
> 时间：2012-08-30T17:53:43.203
> 
> 标签：android, android-listview, android-selector

因此，一切都在智能手机上运行良好。但是，在平板电脑上，my`ListView`应该显示为左侧导航元素，当前激活的项目在详细信息片段中显示为展开。这也很有效。但是， 的已`ListFragment`激活项目不会显示为选中状态。我已经设置`android:choiceMode`为`singleChoice`. 我已经激活了正确的选择器，并且在按下项目时会出现背景可绘制对象。选择器有正确的项目`android:state_activated="true"`。我`android:activatedBackgroundIndicator`在我的**styles.xml**文件中指定。当我记录它`listView.getCheckedItemCount()`内部的输出时，它会像我期望的那样`onListItemClick`给我回报。`1`

曾几何时，几周前`ArrayAdapter`，在我开始真正连接我的数据源之前，在我开始使用自定义列表视图项布局之前，我什至让这一切都完全按照预期工作。然后在途中的某个地方，我做了一些使激活的项目显示不正确的事情，但我不确定它是什么。

**selectable_background.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
        android:exitFadeDuration="@android:integer/config_mediumAnimTime" >
    <item android:state_pressed="false" android:state_focused="true" android:drawable="@drawable/list_focused" />
    <item android:state_pressed="true" android:drawable="@drawable/pressed_background" />

    <!-- selected -->
    <item android:state_activated="true" android:drawable="@drawable/pressed_background" />
    <item android:state_checked="true" android:drawable="@drawable/pressed_background" /> <!-- paranoia -->
    <item android:state_selected="true" android:drawable="@drawable/pressed_background" /> <!-- paranoia -->

    <!-- default -->
    <item android:drawable="@android:color/transparent" />
</selector> 
```

**片段列表.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

    <ListView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:choiceMode="singleChoice"
        android:listSelector="@drawable/selectable_background" >
    </ListView>
    <TextView android:id="@id/android:empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingTop="16dp"
        android:paddingBottom="16dp"
        android:paddingLeft="12dp"
        android:paddingRight="12dp"
        android:text="@string/empty_list" />
</LinearLayout> 
```

**list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView android:id="@+id/item_image"
        android:layout_width="63dp"
        android:layout_height="63dp"
        android:contentDescription="@string/list_image"
        android:src="@drawable/ic_thumbnail_placeholder"
        android:background="#f0f0f0" />

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/item_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceListItemSmall"
        android:gravity="center_vertical"
        android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
        android:paddingRight="?android:attr/listPreferredItemPaddingRight"
        android:minHeight="?android:attr/listPreferredItemHeightSmall" />
</LinearLayout> 
```

**MyListFragment.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getActivity().getLoaderManager().initLoader(ALL_ITEMS_LOADER, null, this);
    listAdapter = new SimpleCursorAdapter(
            this.getActivity(),
            R.layout.list_item,
            null,
            new String[] { Item.NAME },
            new int[] { R.id.item_name },
            CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER
    );
    this.setListAdapter(listAdapter);
}

@Override
public Loader<Cursor> onCreateLoader(int i, Bundle bundle) {
    Uri queryUri;
    switch (i) {
        case ALL_ITEMS_LOADER:
            queryUri = Item.CONTENT_URI;
            return new CursorLoader(this.getActivity(), queryUri, null, null, null, null);
        default:
            throw new IllegalArgumentException("Unknown loader ID: " + i);
    }
}

@Override
public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
    if (listAdapter == null) {
        throw new IllegalStateException("List adapter is missing!");
    } else {
        Log.d(TAG, "Load finished. Cursor swapped.");
        listAdapter.swapCursor(cursor);
    }
} 
```

**更新：**

我还尝试用`SimpleCursorAdapter`我`ArrayAdapter`以前工作过的替换，但没有骰子：

```
listAdapter = new ArrayAdapter<String>(
        this.getActivity(),
        R.layout.list_item,
        R.id.item_name,
        new String[] {"1", "2", "3"}
); 
```

**更新 2：**

啊啊！线索！

```
listAdapter = new ArrayAdapter<String>(
        this.getActivity(),
        android.R.layout.simple_list_item_activated_1,
        android.R.id.text1,
        new String[] {"1", "2", "3"}
); 
```

这行得通。但由于我实际上需要使用自己的布局，它并不能解决我自己的问题。`R.layout.list_item`和之间有什么不同`android.R.layout.simple_list_item_activated_1`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:03:37.860

> 曾几何时，几周前，我什至让这一切都按预期工作......在我开始使用自定义列表视图项目布局之前。

我的猜测是您之前使用过其中一种`simple_list_item_activated_x`布局，它在其背景可绘制对象定义中定义了激活的可绘制对象。框架所做的一件事是将按下的逻辑与激活的逻辑分开（前者是列表选择器的一部分，而后者在列表项上），但不需要这样做，您可以将它们全部放在列表项背景中并完全禁用选择器。

我建议将您的自定义可绘制对象作为每个列表项的背景，而不是列表选择器；激活是应用于每个单独项目视图的状态。然后您可以设置`android:listSelector="@null"`，因为您在某些状态下具有透明背景，并且您不希望默认选择器显示出来。

# mysql - 使用 REGEX 更改 mysql 查询中的字段数据

> ID：12202707
> 
> 赞同：0
> 
> 时间：2012-08-30T17:53:44.493
> 
> 标签：mysql

我有两个数据库，都包含电话号码。我需要找到所有重复电话号码的实例，但数据库 1 的格式与数据库 2 的格式相差很大。

我想去掉所有非数字字符，然后比较两个 10 位字符串以确定它是否重复，例如：

```
SELECT b.phone as barPhone, sp.phone as SPPhone FROM bars b JOIN single_platform_bars sp ON sp.phone.REGEX = b.phone.REGEX 
```

在 mysql 查询中甚至可能发生这样的事情吗？如果是这样，我该怎么做呢？

编辑：看起来它实际上是你可以做的事情！万岁！以下查询完全返回了我需要的内容：

```
SELECT b.phone, b.id, sp.phone, sp.id
FROM bars b JOIN single_platform_bars sp ON REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(b.phone,' ',''),'-',''),'(',''),')',''),'.','') = REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(sp.phone,' ',''),'-',''),'(',''),')',''),'.','') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:09:49.390

MySQL 本身不支持此类字符串操作。您将需要使用这样的 UDF [，](http://www.mysqludf.org/lib_mysqludf_preg/)或者创建一个存储函数，该函数迭代一个字符串参数，该字符串参数连接到它遇到的每个数字的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:07:43.197

MySQL 不支持返回正则表达式的“匹配”。MySQL REGEXP 函数返回 1 或 0，具体取决于表达式是否匹配正则表达式测试。

您可以使用 REPLACE 函数替换特定字符，并且可以嵌套这些字符。但是对于所有“非数字”字符来说，这将是笨拙的。如果你想删除空格，破折号，打开和关闭括号，例如

```
REPLACE(REPLACE(REPLACE(REPLACE(sp.phone,' ',''),'-',''),'(',''),')','') 
```

* * *

一种方法是创建用户定义的函数以仅返回字符串中的数字。但是，如果您不想创建用户定义的函数...

* * *

这可以在本机 MySQL 中完成。这种方法有点笨拙，但对于“合理”长度的字符串是可行的。

```
SELECT CONCAT(IF(SUBSTR(sp.phone,1,1) REGEXP '^[0-9]$',SUBSTR(sp.phone,1,1),'')
             ,IF(SUBSTR(sp.phone,2,1) REGEXP '^[0-9]$',SUBSTR(sp.phone,2,1),'')
             ,IF(SUBSTR(sp.phone,3,1) REGEXP '^[0-9]$',SUBSTR(sp.phone,3,1),'')
             ,IF(SUBSTR(sp.phone,4,1) REGEXP '^[0-9]$',SUBSTR(sp.phone,4,1),'')
             ,IF(SUBSTR(sp.phone,5,1) REGEXP '^[0-9]$',SUBSTR(sp.phone,5,1),'')
       ) AS phone_digits
  FROM sp 
```

解压一下……我们从字符串的第一个位置提取单个字符，检查它是否是数字，如果是数字，则返回字符，否则返回空字符串。我们对字符串中的第二个、第三个等字符重复此操作。我们将所有返回的字符和空字符串连接成一个字符串。

显然，上面的表达式只检查字符串的前五个字符，你需要扩展它，基本上为你想要检查的每个位置添加一行......

像这样笨拙的表达式可以包含在谓词中（在 WHERE 子句中）。（为方便起见，我刚刚在 SELECT 列表中显示了它。）

# jsp - 在javascript中加载隐藏的jsp页面

> ID：12202709
> 
> 赞同：0
> 
> 时间：2012-08-30T17:54:01.330
> 
> 标签：jsp

我有一个 html 页面（使用 xml en xsl 构建）。当有人使用名称用户、日期和页面访问页面时，我想更新我的数据库。

我想这样做是为了添加一个更新数据库的 javascript，但这不是一个好主意，因为 javascript 是基于客户端的。

所以我认为在加载 html 页面时可以调用一个 jsp 文件（其中编写代码以更新数据库）。

问题是我不知道如何调用jsp文件，而没有在浏览器中加载它。我在stackoverflow上发现了这样的东西：

```
<script language="JavaScript">
function updateStats(){
var jspcall="url.jsp"
window.location.href=jspcall
}
</script> 
```

然后我尝试了

```
<body onload="updateStats()"> 
```

但是当然页面已加载。有人出主意

# php - 未定义的偏移量：1 在遍历数组时

> ID：12202710
> 
> 赞同：1
> 
> 时间：2012-08-30T17:54:07.447
> 
> 标签：php, arrays, list, foreach, offset

这是一个相对简单的问题，但我希望能深入了解发生此错误的原因。贝娄是引发错误的代码：

```
 foreach($courseArray[0] as $value)
    {
        list( $courseQuarter,$coursePrefix ) = explode( "-", $value );
        if( $courseQuarter == get_current_yearquarter()) 
        {
                array_push( $return, $value );
        }
    } 
```

该错误具体来自该`list()`行。

这是`var_export()`一个`$courseArray`：

```
array ( 0 => array( 
          'count' => 15, 
          0 => '20103-0610-442-01', 
          1 => '20103-0508-446-01', 
          2 => '20103-0501-406-01', 
          3 => '20104-0660-499-01', 
          4 => '20111-0307-782-70', 
          5 => '20111-0610-870-01', 
          6 => '20111-0621-504-01', 
          7 => '20112-0621-513-01', 
          8 => '20112-0303-762-90', 
          9 => '20112-0101-794-71', 
          10 => '20112-0610-710-90', 
          11 => '20113-0307-770-70', 
          12 => '20113-0610-820-01', 
          13 => '20113-0617-631-01', 
          14 => '2121-0106-744-01', 
      ), 
); 
```

感谢您在修复我的代码时提供的任何帮助 :) 我想我可以解释一下偏移量以及它们与数组的关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:58:04.713

它将遍历'count'元素，其中没有'-'。

```
foreach($courseArray[0] as $key => $value)
{
    if ($key == 'count') {continue;} // <- skip the 'count' key
    list( $courseQuarter,$coursePrefix ) = explode( "-", $value );
    if( $courseQuarter == get_current_yearquarter()) 
    {
            array_push( $return, $value );
    }
} 
```

# jquery - 如何在不使用叠加层的情况下单击我的页面来关闭花式框：true

> ID：12202711
> 
> 赞同：0
> 
> 时间：2012-08-30T17:54:07.663
> 
> 标签：jquery, fancybox-2

当我在fancybox 内容之外单击时，如何关闭fancybox [http://fancyapps.com/fancybox/ 。](http://fancyapps.com/fancybox/)我可以使用叠加：true，但我希望在fancybox 打开时仍然能够单击另一个图像。

我试过这段代码，但它完全取消了fancybox的打开。

```
$(document).click(function() {
    $.fancybox.close()
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:01:34.443

这可能不是一个优雅的解决方案，但会起作用..

要在单击外部时关闭花式框，可以使用以下内容..

```
$(':not(<fancybox_links_selector>)').live('click', function(event){
    event.stopPropagation();
    $.fancybox.close();
}); 
```

通过使用这个 jQuery :not 运算符和正确的选择器，您可以选择除打开幻想框的元素之外的所有元素（在您的情况下是图像..）

现在，当您单击所需的链接（再次图像..）时能够打开花式框，您应该阻止他们的点击事件传播给父母..

见下文 ...

```
$('<fancybox_links_selector>').live('click', function(event){
    event.stopPropagation();
    event.preventDefault();

    // write any extra required code here
    return false;
}); 
```

这将阻止点击事件冒泡并允许fancybox打开......

希望这可以帮助 ...

# sql - 如何只修改游标持有的数据，而不更新数据库？

> ID：12202712
> 
> 赞同：1
> 
> 时间：2012-08-30T17:54:17.843
> 
> 标签：sql, oracle, cursor, updating

我有一个光标如下：

```
CURSOR employee_cur IS
       SELECT * FROM employee where department_id='accounts'; 
```

我只需要修改游标内某些特定行的数据。以后谁会使用这个游标，他们应该只从这个游标中找到修改后的数据。

我不想更新任何数据库表。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:00:24.313

你不能。

游标是只读结构。它是一个指向 SQL 语句的指针。执行该 SQL 语句时，将从数据库中获取数据。您可以随意操作`SELECT`语句本身中的数据。但是您不能修改打开游标后游标返回的数据。

当然，您可以操作`SELECT`语句中的数据。例如，您的查询可以执行类似的操作

```
SELECT employee_id, 
       first_name,
       last_name,
       (CASE WHEN last_name = 'King' 
             THEN salary*2
             ELSE salary
         END) salary
  FROM employee 
```

将结果集中任何名为“King”的员工的薪水加倍。您可以使用 a`UNION ALL`返回数据库中不存在的行，即

```
SELECT employee_id, 
       first_name,
       last_name,
       salary
  FROM employee
UNION ALL
SELECT -1,
       'Justin',
       'Cave',
       17
  FROM dual 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:24:10.337

让您尝试实现的最简单方法是返回可变数组或嵌套表（流水线或输出参数）。当你填充它时，你可以做你需要的所有改变。如果您确实需要返回游标并且不需要像 UPDATE CURRENT OF 之类的东西，您可以将数据放在 vararray/nested 表中，作为 IN 参数过去到 pipilined 函数中，并从您的 pipilened 函数中创建游标作为 select *（准备 vararray/nested桌子）。

您可以在函数内部进行所有处理，将结果放在任何临时表中并从临时表中返回游标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:39:04.790

声明一个集合-

```
type my_emp_table_type is table of employee%rowtype;
myEmpTable  my_emp_table_type; 
```

然后`BULK COLLECT`用来收集游标数据，通过

```
SELECT * BULK COLLECT INTO myEmpTable 
  FROM employee 
 WHERE department_id='accounts'; 
```

修改集合元素，例如-

```
myEmpTable(10).id := 10;
myEmpTable(10).first_name  := 'John';
myEmpTable(10).last_name   := 'Doe'; 
```

并`myEmpTable`在任何你想要的地方使用。 **请注意**，您可以将集合循环为

```
 for i in myEmpTable.first .. myEmpTable.last loop
    if myEmpTable.(i)last_name = 'Doe'
    then
          myEmpTable.(i)sal := 50000;
    end if;
    ...
    ....
 end loop; 
```

# javascript - jQuery中这两个词有什么区别

> ID：12202717
> 
> 赞同：3
> 
> 时间：2012-08-30T17:54:42.763
> 
> 标签：javascript, jquery, libraries

我正在尝试获取页面在警报中使用的 jQuery 版本。它完美无缺：

我用`alert(jQuery.prototype.jquery)`

现在我的问题是在原型之前和之后指定的 jQuery 和 jquery 单词之间有什么区别。

哪一个由 $ 指定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T17:56:06.080

第一个由“$”指定，第二个是返回 jquery 版本号。

在 Chrome 控制台中 ->

```
jQuery >>> function (a,b){return new e.fn.init(a,b,h)}

$ >>> function (a,b){return new e.fn.init(a,b,h)}

jQuery.prototype.jquery >>> "1.7.1" 
```

也许注意到 JavaScript 区分大小写会有所帮助，因此 jQuery 和 jquery 是两个不同的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T17:58:29.590

与大写“Q”相同`$`。`jQuery`小写`jquery`仅代表版本号。

它更常被写为`jQuery.fn.jquery`构造的 jQuery 对象的属性或属性，例如`jQuery('div').jquery`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T18:01:36.167

全局`$`和`jQuery`变量只是指向同一个函数对象，它们是“别名”。`jquery`只是原型对象的属性名称。这两个名称彼此无关——它们是不同对象上不同属性的名称。

# amazon-ec2 - 无法远程登录到 EC2 实例上的端口 25

> ID：12202718
> 
> 赞同：5
> 
> 时间：2012-08-30T17:54:49.457
> 
> 标签：amazon-ec2, amazon-web-services, smtp, amazon

我的安全组具有以下内容：

```
>22 (SSH)   0.0.0.0/0   
>80 (HTTP)  0.0.0.0/0   
>143 (IMAP) 0.0.0.0/0   
>443 (HTTPS)    0.0.0.0/0   
>995 (POP3S)    0.0.0.0/0   
>465 (SMTPS)    0.0.0.0/0   
>25 (SMTP)  0.0.0.0/0 
```

在服务器上运行 netstat 会显示以下内容：

```
>Active Internet connections (servers and established)
>Proto Recv-Q Send-Q Local Address           Foreign Address         State      
>tcp        0      0 127.0.0.1:9000          0.0.0.0:*               LISTEN     
>tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     
>tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
>tcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN     
>tcp        0      0 10.211.30.202:44025     194.14.0.125:6667       ESTABLISHED
>tcp6       0      0 :::995                  :::*                    LISTEN     
>tcp6       0      0 :::110                  :::*                    LISTEN     
>tcp6       0      0 :::143                  :::*                    LISTEN     
>tcp6       0      0 :::22                   :::*                    LISTEN     
>tcp6       0      0 :::25                   :::*                    LISTEN     
>tcp6       0      0 :::993                  :::*                    LISTEN 
```

当我尝试从外界访问这个盒子时，我什么也得不到。

```
>thedude:~ root$ telnet mail.sd0a.com 25<br />
>Trying 107.20.235.215...<br />
>telnet: connect to address 107.20.235.215: Operation timed out<br />
>telnet: Unable to connect to remote host<br /> 
```

任何人都对 Amazon EC2 实例以及将邮件发送到可以正常工作的状态有任何积极的经验吗？值得注意的是，通过命令行，邮件似乎可以通过。如果重要的话，系统是 Ubuntu 12.04.1 LTS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:59:55.327

可能是您的 ISP 过滤到端口 25/tcp 的出站连接，以防止僵尸网络垃圾邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:10:07.563

消除显而易见的问题：您是否尝试过

*   连接到 25 以外的另一个端口？
*   连接到另一个新的 ec2 实例，端口 25？（在 EC2 上复制它的简单任务）
*   从另一台机器（或您朋友的 PC）连接到 sd0a.com:25？
*   traceroute 来识别数据包被丢弃的位置？
*   在端口 2525 上设置后缀（记得将其添加到安全组中）
*   ufw* 在 Ubuntu 上。（默认关闭......但很好检查）

据我所知，Amazon EC2 上的所有 IP 地址都被列入 spamhaus.com（以及许多其他反垃圾邮件列表）的黑名单。因此，您的 ISP 很可能正在阻止这些数据包，如果是 IP 阻止或端口阻止？

# jquery - 如何让 jqplot 以一定角度呈现 xaxis 代码？

> ID：12202719
> 
> 赞同：0
> 
> 时间：2012-08-30T17:54:50.870
> 
> 标签：jquery, ruby-on-rails, jqplot

我遵循了一些我发现的例子（即 - [http://www.jqplot.com/tests/rotated-tick-labels.php](http://www.jqplot.com/tests/rotated-tick-labels.php)），但我仍然无法让我的 xAxis 上的刻度以任何其他角度呈现，除了默认。

我的代码：

```
$(document).ready(function(){
var s1 = <%= @funding_documents.map { |f| f.authorized_amount.to_i } %>;
var s2 = <%= @funding_documents.map { |f| f.budget_at_completion.to_i } %>;
var s3 = <%= @funding_documents.map { |f| f.assigned_cost.to_i } %>;
// Can specify a custom tick Array.
// Ticks should match up one for each y value (category) in the series.
var ticks = <%= raw @funding_documents.map { |f| f.funding_document_number } %>;

var plot1 = $.jqplot('chart2', [s1, s2, s3], {
  // The "seriesDefaults" option is an options object that will
  // be applied to all series in the chart.
  tite: 'Project Funding',
  seriesDefaults:{
      renderer:$.jqplot.BarRenderer,
      rendererOptions: {fillToZero: true}
  },
  // Custom labels for the series are specified with the "label"
  // option on the series option.  Here a series option object
  // is specified for each series.
  series:[
      {label:'Authorized'},
      {label:'Budgetted'},
      {label:'Assigned'}
  ],
  // Show the legend and put it outside the grid, but inside the
  // plot container, shrinking the grid to accomodate the legend.
  // A value of "outside" would not shrink the grid and allow
  // the legend to overflow the container.
  legend: {
      show: true,
      placement: 'outsideGrid'
  },
  axesDefaults: {
  },
  axes: {
      // Use a category axis on the x axis and use our custom ticks.
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer,
        ticks: ticks,
        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
        tickOptions: {
            angle: -45,
            fontSize: '8pt'
        }
      },
      // Pad the y axis just a little so bars can get close to, but
      // not touch, the grid boundaries.  1.2 is the default padding.
      yaxis: {
        pad: 1.2,
        tickOptions: {
          formatString: '$%d',
          angle: 0
        }
      }
  }
}); 
```

});

我还包括了教程中提到的所有文件：

```
<script src="/assets/jqplot/jquery.jqplot.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jqplot/plugins/jqplot.barRenderer.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jqplot/plugins/jqplot.categoryAxisRenderer.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jqplot/plugins/jqplot.pointLabels.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jqplot/plugins/jqplot.canvasTextRenderer.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jqplot/plugins/jqplot.dateAxisRenderer.min.js?body=1" type="text/javascript"></script> 
```

不知道此时还能做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:15:40.623

导入此 JavaScript 文件：`plugins/jqplot.canvasAxisTickRenderer.min.js`.

# debugging - 跟踪程序的 TCP/UDP 连接

> ID：12202726
> 
> 赞同：1
> 
> 时间：2012-08-30T17:55:11.033
> 
> 标签：debugging, tcp, udp, tcp-ip

跟踪应用程序的 Internet 通信的最佳方法是什么？我过去曾将[Fiddler2](http://www.fiddler2.com/fiddler2/)与 Internet Explorer 一起使用（在 SSL 测试中取得了巨大成功）。但是我没有找到一种简单的方法来跟踪特定 Windows 程序之间的所有通信，以及它使用操作系统 Windows 7、64 位创建的套接字。

Fiddler 会很好用，不幸的是，这个程序需要我设置一个代理。我不确定如何为我试图从中读取所有通信的程序执行此操作。而且我很确定我会为每个连接到我的机器的插座获得“桶”，我相信这很难过滤。

Netstat 似乎只给出被访问的远程位置，而不是其他的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:07:20.687

我会尝试一下[Port Reporter 。](http://support.microsoft.com/kb/837243)

# spring - 需要有关带有正文参数的 RestTemplate 发布请求的帮助？

> ID：12202729
> 
> 赞同：10
> 
> 时间：2012-08-30T17:55:16.690
> 
> 标签：spring, resttemplate

我有一个rest api url，并通过Rest Client（restclient-ui-2.4-jar-with-dependencies）提交了与带有正文（用户名，密码，其他参数）的POST请求相同的内容，它运行良好，没有任何问题。

前任：

网址：[https](https://test.com/cgi-bin/testing/api) ://test.com/cgi-bin/testing/api 正文：username=testuser&password=pass123&id=13002&name=raju

当我使用 Spring RestTemplate postForObject(url, varmap, Employee.class) 方法时，同样不能正常工作。

有人可以帮我举一个简单的例子，其中请求是 URL，带有正文参数，响应是与类映射的 XML？

示例代码：

```
 MultiValueMap<String, String> map = new LinkedMultiValueMap<String, String>();
  map.add("username", "test");
  map.add("password", "test123");
  map.add("id", "1234");
  MarshallingHttpMessageConverter mc = new MarshallingHttpMessageConverter();
  mc.setMarshaller(new Jaxb2Marshaller());
  mc.setUnmarshaller(new Jaxb2Marshaller());
  list.add(marshallingHttpMessageConverter);
  emediateRestTemplate.setMessageConverters(list);
  Employee employee = (Employee) restTemplate.postForObject(url, map, Employee.class); 
```

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T06:28:47.203

上述转换器例如：“MarshallingHttpMessageConverter”不是必需的。

```
MultiValueMap<String, String> parametersMap = new LinkedMultiValueMap<String, String>();
parametersMap.add("username", "test");
parametersMap.add("password", "test123");
parametersMap.add("id", "1234"); 
```

对于帖子：

```
restTemplate.postForObject(url, parametersMap, Employee.class); 
```

*   url 是字符串-rest api URL
*   参数映射 - 多值映射
*   Employee - 需要从 JSON 响应转换的对象

忘记：

```
restTemplate.getForObject(url,  class object, variablesMap); 
```

*   url 是：字符串-rest api URL
*   variablesMap - 地图
*   类对象 - 需要从 JSON 响应转换的对象

# ruby-on-rails - 尝试向我的refinerycms 引擎添加下拉字段

> ID：12202730
> 
> 赞同：1
> 
> 时间：2012-08-30T17:55:19.667
> 
> 标签：ruby-on-rails, refinerycms

我正在尝试向我创建的现有引擎添加一个下拉字段。我按照本指南[http://refinerycms.com/guides/multiple-resources-in-an-extension](http://refinerycms.com/guides/multiple-resources-in-an-extension)运行命令时`rails g refinery:engine categories name:string --extension group_classes`

然后我尝试运行`bundle install`，`rails generate refinery:group_classes`然后我得到了这个错误： `rake aborted! Multiple migrations have the version number 1`

我查看了 vender/extensions/group_classes/db/migrate 文件夹中的迁移，它们的前缀都是 1。我将类别前缀更改为 2 并重新运行所有内容，它工作但当我尝试运行时`rake db:seed`，我收到了这个错误： `rake aborted! uninitialized constant Refinery::GroupClasses::Engine`

完整的堆栈跟踪：

```
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
rake aborted!
uninitialized constant Refinery::GroupClasses::Engine
/var/www/vhosts/tomstestsite.us/PersonalTrainingKT/db/seeds.rb:46:in `<top (required)>'
/var/www/vhosts/tomstestsite.us/PersonalTrainingKT/refinerycms/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:520:in `load_seed'
/var/www/vhosts/tomstestsite.us/PersonalTrainingKT/refinerycms/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/railties/databases.rake:309:in `block (2 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `<main>'
Tasks: TOP => db:seed 
```

什么会导致这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:04:16.683

尝试再次使用， `--extension group_classes`或者您尝试重新启动服务器？

# ios - 如果文件已存在，则重命名文件

> ID：12202737
> 
> 赞同：1
> 
> 时间：2012-08-30T17:55:42.607
> 
> 标签：ios, objective-c, nsdata, nsfilemanager

如果存在同名文件，那么在objective-c中重命名文件的最佳方法是什么。

理想情况下，如果名为 untitled.png 的文件已经存在，我想将 untitled.png 命名为 untitled-1.png。

我在下面包含了我的解决方案作为答案，但我认为应该有更好的方法（内置函数）来做到这一点。

我的解决方案不是线程安全的，并且容易受到竞争条件的影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:55:42.607

以下函数返回下一个可用文件名：

```
 //returns next available unique filename (with suffix appended)
- (NSString*) getNextAvailableFileName:(NSString*)filePath suffix:(NSString*)suffix
{   

    NSFileManager* fm = [NSFileManager defaultManager];

    if ([fm fileExistsAtPath:[NSString stringWithFormat:@"%@.%@",filePath,suffix]]) {
        int maxIterations = 999;
        for (int numDuplicates = 1; numDuplicates < maxIterations; numDuplicates++)
        {
            NSString* testPath = [NSString stringWithFormat:@"%@-%d.%@",filePath,numDuplicates,suffix];
            if (![fm fileExistsAtPath:testPath])
            {
                return testPath;
            }
        }
    }

    return [NSString stringWithFormat:@"%@.%@",filePath,suffix];
} 
```

调用函数示例如下：

```
 //See" http://stackoverflow.com/questions/1269214/how-to-save-an-image-that-is-returned-by-uiimagepickerview-controller

    // Get the image from the result
    UIImage* image = [info valueForKey:@"UIImagePickerControllerOriginalImage"];

    // Get the data for the image as a PNG
    NSData* imageData = UIImagePNGRepresentation(image);

    // Give a name to the file
    NSString* imageName = @"image";
    NSString* suffix = @"png";

    // Now we get the full path to the file
    NSString* filePath = [currentDirectory stringByAppendingPathComponent:imageName];

    //If file already exists, append unique suffix to file name
    NSString* fullPathToFile = [self getNextAvailableFileName:filePath suffix:suffix];

    // and then we write it out
    [imageData writeToFile:fullPathToFile atomically:NO]; 
```

# ubuntu - 检测进程是否在 ubuntu 中停止

> ID：12202743
> 
> 赞同：3
> 
> 时间：2012-08-30T17:55:56.133
> 
> 标签：ubuntu, process, daemon

我的服务器上运行了一个守护进程。它已经顺利运行了一段时间，我一直在守护进程中记录每一个事件的发生。

昨天我注意到了一些奇怪的事情。守护程序已停止运行，但日志中没有错误条目。

对于我的系统来说，这个守护进程保持运行非常重要，如果它因任何原因停止，它会重新启动。

有没有一种方法可以定期检测特定进程是否在 Ubuntu 中运行？如果我能检测到我可以轻松地重新启动它，但检测是主要问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:15:06.460

使用 cron。

让它每 x 分钟运行一次脚本

在您的脚本中使用类似的行

```
ps aux | grep -c <your process/daemon name> 
```

并检查输出。

这将始终返回至少一个（检查进程本身的过程），因此如果您的计数大于 1，您可以假设您的进程正在运行并且什么也不做，否则重新启动守护程序。

[https://help.ubuntu.com/community/CronHowto](https://help.ubuntu.com/community/CronHowto)

如果您的进程需要由特定用户（例如 wwwrun）运行，请确保您以该用户身份启动该进程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:24:36.507

如果程序没有自动从控制台分离（即继续在前台运行），您可以执行以下操作：

```
while /bin/true; do
  /PATH/TO/YOUR/daemon
  logger -p local0.warn "daemon crashed"
done 
```

这将记录一个警告并重新启动守护进程。否则你可能不得不运行一个看门狗：

```
PID=`cat /var/run/daemon.pid`
if [ -z `ps hp $PID` ]; then
  logger -p local0.warn "daemon crashed"
fi 
```

或者

```
if [ -z `ps ax | grep [d]aemon` ]; then
  logger -p local0.warn "daemon crashed"
fi 
```

可以在第一个示例中的循环中，或者通过 Loopo 建议的 cron。

最后一个示例中守护进程名称的第一个字母周围的方括号可防止 grep 进程显示在输出中。

# c# - 如何使 DataGridView 单元格的字体具有特定颜色？

> ID：12202751
> 
> 赞同：15
> 
> 时间：2012-08-30T17:56:15.837
> 
> 标签：c#, winforms, datagridview, fonts, datagridviewtextboxcell

此代码适用于使单元格的背景为蓝色：

```
DataGridViewRow dgvr = dataGridViewLifeSchedule.Rows[rowToPopulate];
dgvr.Cells[colName].Style.BackColor = Color.Blue;
dgvr.Cells[colName].Style.ForeColor = Color.Yellow; 
```

...但是 ForeColor 的效果不是我所期望/希望的：字体颜色仍然是黑色，而不是黄色。

如何使字体颜色变黄？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T18:18:11.890

你可以这样做：

```
dataGridView1.SelectedCells[0].Style 
   = new DataGridViewCellStyle { ForeColor = Color.Yellow}; 
```

您还可以在该单元格样式构造函数中设置任何样式设置（例如字体）。

如果你想设置一个特定的列文本颜色，你可以这样做：

```
dataGridView1.Columns[colName].DefaultCellStyle.ForeColor = Color.Yellow;
dataGridView1.Columns[0].DefaultCellStyle.BackColor = Color.Blue; 
```

**更新**

因此，如果您想根据单元格中的值进行着色，则可以使用以下方法：

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value != null && !string.IsNullOrWhiteSpace(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString()))
    {
        dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style = new DataGridViewCellStyle { ForeColor = Color.Orange, BackColor = Color.Blue };
    }
    else
    {
        dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style = dataGridView1.DefaultCellStyle;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T18:21:35.473

1.  为避免性能问题（与 中的数据量有关`DataGridView`），请使用`DataGridViewDefaultCellStyle`和`DataGridViewCellInheritedStyle`。参考：http: [//msdn.microsoft.com/en-us/library/ha5xt0d9.aspx](http://msdn.microsoft.com/en-us/library/ha5xt0d9.aspx)

2.  您可以使用`DataGridView.CellFormatting`以前的代码限制来绘制受影响的单元格。

3.  在这种情况下，您可能需要覆盖`DataGridViewDefaultCellStyle`,。

**//edit**
回复您对@itsmatt 的评论。如果要为所有行/单元格填充样式，则需要以下内容：

```
 // Set the selection background color for all the cells.
dataGridView1.DefaultCellStyle.SelectionBackColor = Color.White;
dataGridView1.DefaultCellStyle.SelectionForeColor = Color.Black;

// Set RowHeadersDefaultCellStyle.SelectionBackColor so that its default 
// value won't override DataGridView.DefaultCellStyle.SelectionBackColor.
dataGridView1.RowHeadersDefaultCellStyle.SelectionBackColor = Color.Empty;

// Set the background color for all rows and for alternating rows.  
// The value for alternating rows overrides the value for all rows. 
dataGridView1.RowsDefaultCellStyle.BackColor = Color.LightGray;
dataGridView1.AlternatingRowsDefaultCellStyle.BackColor = Color.DarkGray; 
```

# image-processing - 使用从缓冲区复制的图像更改 cv::Mat 会影响原始图像

> ID：12202755
> 
> 赞同：0
> 
> 时间：2012-08-30T17:56:29.920
> 
> 标签：image-processing, opencv

我有 24 位 RGB 格式的图像缓冲区。这个缓冲区被复制到 cv::Mat 使用

```
cv::Mat mat = cv::Mat(image->height, image->width, CV_8UC3, image->data); 
```

由于这个缓冲区是 RGB 格式，而 OpenCV 使用 BGR 格式，我正在转换`mat`为 BGR

```
cv::cvtColor(mat, mat, CV_RGB2BGR); 
```

这可行，但是当我检查原始图像时，它的通道也被反转（因此它们变得错误），我不希望这种情况发生。

我想反转`mat`通道顺序，使`image-data`（我的图像缓冲区）保持不变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:29:40.130

我假设（我不确定）如果你使用`cv::cvtColor(mat, mat, CV_RGB2BGR);`，你实际上是重新创建 mat，但是你用 RGB->BGR 转换的数据覆盖数据。由于您使用指针将数据传递给“垫子”，因此如果您覆盖垫子中的数据，您也会更改“图像->数据”。

因此，我预计性能不会低于：

```
cv::Mat mat = cv::Mat(image->height, image->width, CV_8UC3, image->data);
cv::Mat mat2;
cv::cvtColor(mat, mat2, CV_RGB2BGR);
//Work with mat 2 now 
```

您写入新数据而不是覆盖。这应该承担相同的性能成本......我不知道你的图像在颜色转换后有什么打算，但即使性能不同，也可能对整体产生轻微影响。

# jquery - 在 img src 之前添加文本

> ID：12202756
> 
> 赞同：0
> 
> 时间：2012-08-30T17:56:33.917
> 
> 标签：jquery, text, image, add, src

我试图在图像之前添加文本。该图像没有默认的类/ID。代码是这样的：

```
$('.status img').attr('src', 'LINK IMAGE').after('My text'); 
```

编辑：完整代码：

```
$('.status img').attr('src', 'LINK IMAGE1').after('My text1');
$('.status img').attr('src', 'LINK IMAGE2').after('My text2');
$('.status img').attr('src', 'LINK IMAGE3').after('My text3'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:06:22.357

HTML：

```
<ul>
<li class="status">T1<img /></li>
<li class="status">T2<img /></li>
<li class="status">T3<img /></li>
</ul> 
```

JavaScript：

```
var imgArray = new Array('http://cache2.allpostersimages.com/p/LRG/20/2070/7T92D00Z/posters/bitte-im-sitzen-pinkeln.jpg', 'http://cache2.allpostersimages.com/p/LRG/20/2070/7T92D00Z/posters/bitte-im-sitzen-pinkeln.jpg', 'http://cache2.allpostersimages.com/p/LRG/20/2070/7T92D00Z/posters/bitte-im-sitzen-pinkeln.jpg');
var count = 1;

$('.status').children('img').each(function(){
   $(this).attr('src', imgArray[count]);

}); 
```

# java - 如何让Java Swing Application在windows和linux中字体一致？

> ID：12202758
> 
> 赞同：4
> 
> 时间：2012-08-30T17:57:13.380
> 
> 标签：java, linux, swing, fonts, windows-xp

我有一个在 Windows XP 中开发的 Java 7 Swing 应用程序。我使用跨平台外观：

```
UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName()); 
```

当我在 linux (Fedora 12) 上运行它时。字体有点宽。因此，布局在某些地方发生了变化。

有没有办法让应用程序使用 jre 附带的相同字体或类似字体，但不是本地系统？然后我们可以让它的外观和感觉真的一样。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:15:33.730

你可以看看[`UIManager`](http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html)。Swing 使用此处的属性，例如`Label.font`，来获取默认字体。所以你可以这样做：

```
Font font = // create font
UIManager.put("Label.font", font) 
```

*确保在创建任何*组件之前更改这些内容，否则您将获得一些具有正确字体的字体，而另一些则没有。[这是一个程序](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)，它将向您显示`UIManager`. 任何以结尾的`.font`都是你要找的。

另一种方法是创建一个实用程序类，该类将使用您自己的默认值创建组件：

```
public class MyComponents {

    public static final Font LABEL_FONT = // create font

    public static JLabel createLabel(String text) {
        JLabel label = new JLabel(text);
        label.setFont(LABEL_FONT);
        return label;
    }
} 
```

如果这是一个没有很多组件的新应用程序，我推荐第二种方法。如果它是一个旧的应用程序，到处都有大量的组件生成，第一种方法会更省时，但第二种方法可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:34:32.627

This may not work, but. You could provide your own Font, bundled with the application and load that at Runtime.

Check out [Load fonts out of JAR-file and create AWT font (works) and register iText font (does not work)](https://stackoverflow.com/questions/3830170/load-fonts-out-of-jar-file-and-create-awt-font-works-and-register-itext-font) for an example (the answers not quite right, but the intention is good) or [http://www.java2s.com/Code/Java/2D-Graphics-GUI/Loadfontfromttffile.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Loadfontfromttffile.htm)

Once loaded, you could walk the UIManager's properties, replacing all keys with ".font" in there names to your Font instead.

The problem you are going to face ultimately is the difference in the rendering engines of the OS, including things like DPI and the difference in the Font rendering engines.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:19:42.060

目前尚不清楚这是字体问题还是布局问题。自然，[sscce](http://sscce.org/)将有助于说明您认为是什么问题。相比之下，此[示例](https://stackoverflow.com/a/5630271/230513)说明了如何调整布局以适应不同平台上的默认字体系列。

当您使用[跨平台 L&F](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)时，您可能需要关闭粗体字体，如此[处所示](http://docs.oracle.com/javase/6/docs/api/javax/swing/plaf/metal/DefaultMetalTheme.html)。一些平台没有使用实际的粗体字体，而是从普通字体中派生出粗体样式，通常结果参差不齐。

# javascript - jQuery验证模糊的文本字段

> ID：12202759
> 
> 赞同：0
> 
> 时间：2012-08-30T17:57:18.683
> 
> 标签：javascript, jquery, jquery-validate, onblur

我正在使用 jQuery 验证插件：[http ://docs.jquery.com/Plugins/Validation/](http://docs.jquery.com/Plugins/Validation/)

我遇到了一个问题，导致验证在用户开始输入时开始，但这不是我想要的。我想在用户离开文本字段后开始验证。这是我的代码：

```
 <input class="required email" type="text" size="26" name="usernameField" id="usernameField" /> 

<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript">

  $(document).ready(function(){

         $("#usernameField").validate({
           onfocusout:false
          });

   });

</script> 
```

我认为使用 onfocusout 选项会起作用，但它仍在验证用户类型。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:27:57.783

您可以使用此代码来验证 onblur：

### jQuery

```
$("#Email").blur(function() 
{
 var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;  
 var emailaddress = $("#Email").val();
 if(!emailReg.test(emailaddress)) 
    $("#emailspan").html('<font color="#cc0000">Please enter valid Email address</font>');  
 else
    $("#emailspan").html('<font color="#cc0000"></font>');  
}); 
```

### HTML

```
<h4>
<br />Email <span id="star5">*</span>
</h4>                       
<input type="text" id="Email" name="Email" maxLength="50" size="45" /><span id="emailspan" value="0"></span> 
```

# c++ - Boost.python 从包装类继承

> ID：12202763
> 
> 赞同：1
> 
> 时间：2012-08-30T17:57:29.433
> 
> 标签：c++, boost-python

使用 boost.python 为现有库创建 python 绑定时遇到问题。场景如下：

```
#include<boost/python.hpp>

namespace bp = boost::python;

struct Base {
    std::stringstream _myString;
    Base() { };
    Base(const Base& base) { _myString<<base._myString.str(); }

    void getString(std::stringstream& some_string) {
        _myString.str("");
        _myString<<some_string.str();
        std::cout<<"Got string: \""<<_myString.str()<<"\""<<std::endl;
    }
};

struct BaseWrapper : Base,
                     bp::wrapper<Base>
{
    BaseWrapper() :
        Base(),
        bp::wrapper<Base>() { };

    BaseWrapper(const Base& base) :
        Base(base),
        bp::wrapper<Base>() { };

    void getString(bp::object pyObj) {
        std::string strLine = bp::extract<std::string>(pyObj);
        std::stringstream sstrLine;
        sstrLine<<strLine;
        Base::getString(sstrLine);
    }
};

struct Derived : Base
{
    Derived() : Base() { };
    Derived(const Derived& derived) : Base() { _myString<<derived._myString.str(); };
};

struct DerivedWrapper : Derived,
                        bp::wrapper<Derived>
{
    DerivedWrapper() :
        Derived(),
        bp::wrapper<Derived>() { };

    DerivedWrapper(const Derived derived) :
        Derived(derived),
        bp::wrapper<Derived>() { };
};

BOOST_PYTHON_MODULE(testInheritance){
    bp::class_<BaseWrapper>("Base")
        .def("getString", &BaseWrapper::getString);

    bp::class_<DerivedWrapper, bp::bases<Base> >("Derived");
} 
```

（抱歉，代码块很长，这是我能想到的最小示例。）

您可以看到我必须重写`getString()`BaseWrapper 中的方法，以便它可以与 Python 字符串一起使用，并且这部分工作正常：

```
>>> import testInheritance
>>> base = testInheritance.Base()
>>> base.getString("bla")
Got string: "bla"
>>> 
```

一旦我尝试`getString`从以下实例调用，问题就会出现`Derived`：

```
>>> derived = testInheritance.Derived()
>>> derived.getString("bla")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
Boost.Python.ArgumentError: Python argument types in
    Base.getString(Derived, str)
did not match C++ signature:
    getString(BaseWrapper {lvalue}, boost::python::api::object)
>>> 
```

我可以理解这里出了什么问题，但我不知道如何解决这个问题。我将不胜感激任何帮助！

最好的问候， eDude

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:46:44.763

问题是，这`DerivedWrapper`与`BaseWrapper`. 因此 DerivedWrapper 需要提供自己的 Python 适配实现`void getString(bp::object pyObj)`。

所以让它工作的一种方法是这样的：

```
struct DerivedWrapper : Derived,
                        bp::wrapper<Derived>
{
    DerivedWrapper() :
        Derived(),
        bp::wrapper<Derived>() { };

    DerivedWrapper(const Derived derived) :
        Derived(derived),
        bp::wrapper<Derived>() { };

    void getString(bp::object pyObj) {
        std::string strLine = bp::extract<std::string>(pyObj);
        std::stringstream sstrLine;
        sstrLine<<"(from DerivedWrapper) "<<strLine;
        Derived::getString(sstrLine);
    }
};

[...]

    bp::class_<DerivedWrapper, bp::bases<Base> >("Derived")
        .def("getString", &DerivedWrapper::getString); 
```

和输出

```
base = testInheritance.Base()
base.getString("bla")

derived = testInheritance.Derived()
derived.getString("blub") 
```

正如预期的那样

```
Got string: "bla"
Got string: "(from DerivedWrapper) blub" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:57:38.507

我遇到了与我设法解决的完全相同的问题，但是在某些特殊情况下，解决方案存在一些内部故障。当需要从 boost::python 传递的值创建 boost::weak_ptr 引用时，在 python 中使用 boost::shared_ptr 存在一个已知问题。由于与帖子无关，我不会详细说明。无论如何，我需要将 boost::shared_ptr 包装到另一个类中（我称之为 PythonSharedPtr）以从 boost::python 中隐藏 boost::shared_ptr，然后我遇到了类似的问题。考虑以下设置：A 类在 c++ 端用作 boost::shared_ptr，B 类（从 A 继承）作为 boost::shared_ptr，在 python 中，shared_ptr 都被包装到另一个类中（有关我需要制作它的更多信息，在以下位置进行了解释： [boost::python 和 weak_ptr : 东西消失了](https://stackoverflow.com/questions/8233252/boostpython-and-weak-ptr-stuff-disappearing) [http://mail.python.org/pipermail/cplusplus-sig/2009-November/014983.html](http://mail.python.org/pipermail/cplusplus-sig/2009-November/014983.html)

那么我需要编写正确的导出到boost python：class_，wrapped_shared_ptr，noncopyable>和class_，wrapped_shared_ptr，noncopyable>

我认为到目前为止它与您的代码相似。棘手的部分是如何允许在 boost::python 中使用基数来导出 B（而 shared_ptr 与 shared_ptr 无关）。经过对 boost::python 源代码的一些研究，并附带了非常好的解决方案，但它仅适用于 B 类没有多重继承的情况。

这是代码：

```
namespace boost { namespace python { namespace objects
{
    template<typename Source, typename Target>
    struct shared_ptr_cast_generator
    {
        static void* execute(void* source)
        {
            const boost::shared_ptr<Source>* sourcePtr = static_cast<boost::shared_ptr<Source>*>(source);
            const boost::shared_ptr<Target> target     = boost::dynamic_pointer_cast<Target>(*sourcePtr);
            if(reinterpret_cast<size_t>(target.get()) == reinterpret_cast<size_t>(sourcePtr->get()))
                return source;
            else
            {
                // assertion which is triggered when multi-inheritance is used for Source type
                // in this case it is necessary to create new instance of shared_ptr<Target> but
                // it is not possible to make it in-place due to memory leak
                assert(!"Wrong cast");
                return nullptr;
            }
        }
    };

    template<typename Source, typename Target>
    struct cast_generator<boost::shared_ptr<Source>, boost::shared_ptr<Target> >
    {
        typedef shared_ptr_cast_generator<Source, Target> type;
    };
}}} 
```

通过提供这样的代码，可以调整第二次导出到 python：class_、wrapped_shared_ptr、noncopyable、bases >

请注意存储在执行函数中的转换 - 如果 Source 和 Target 之间存在转换，则它返回相同的地址 - 因此，如果您只是将 Source* 重新解释为 Target*，它也必须有效（两个类中的数据必须存储在完全相同的位置）地方）。

也许这样的解决方案在你的情况下是不够的，但至少它可以给你一些想法。

# excel - 文档达到特定大小后，使用 Excel VBA 归档并创建另一个文档

> ID：12202765
> 
> 赞同：1
> 
> 时间：2012-08-30T17:57:36.110
> 
> 标签：excel, vba

当将数据输入 .txt 以充当日志时，它确实会变得非常大，有几 MB，并且用于 MS 的通用 txt 阅读器将有一个 conniption。有没有办法将日志放入可能存在或不存在的文件夹中？换句话说，如果文件夹不存在，创建文件夹，然后将旧日志剪切并粘贴到新文件夹中？

既然我知道多个日志可能会出现在所述日志文件夹中，是否有办法让它在日志名称上也附加今天的日期？

以为我解决了...

```
If FileLen(sLogFileName) > 3145728# Then
    sLogFileName = "Open Order Log - " & Format(Date, "dd-mm-yyyy")
    Name sLogFileName As "ThisWorkbook.path & Application.PathSeparator & \Temp\Open Order Log - " & Format(Date, "dd-mm-yyyy")
End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:01:53.153

从您的另一个问题中，很明显您知道如何创建日志文件。

根据您的上述问题，我可以总结出这是您的查询

1.  检查文件夹是否存在
2.  创建文件夹
3.  将日期添加到日志文件的名称
4.  检查文件大小
5.  移动文件

因此，让我们一一介绍。

检查文件夹是否存在。您可以使用该`DIR`功能进行检查。请参阅下面的示例

```
Public Function DoesFolderExist(strFullPath As String) As Boolean
    On Error GoTo Whoa
    If Not Dir(strFullPath, vbDirectory) = vbNullString Then _
    DoesFolderExist = True
Whoa:
    On Error GoTo 0
End Function 
```

关于您的下一个查询，您可以使用`MKDIR`创建一个文件夹。看这个例子

```
Sub Sample()
    MkDir "C:\Sample"
End Sub 
```

关于第三个查询，您可以像这样创建一个附加日期的日志文件

```
Sub Sample()
    Dim FlName As String

    FlName = "Sample File - " & Format(Date, "dd-mm-yyyy")

    Debug.Print FlName
End Sub 
```

要检查文件大小，您可以使用该`FileLen`功能。看这个例子

```
Sub Sample()
    Dim FileNM As String

    FileNM = "C:\Sample.txt"
    Debug.Print "The File size of " & FileNM & " is " & _
    FileLen(FileNM) & " bytes"
End Sub 
```

并且要将文件从一个目录移动到另一个目录，您可以使用该`NAME`功能。请参阅此示例。

```
Sub Sample()
    Dim FileNM As String

    FileNM = "C:\Sample.txt"
    Name FileNM As "C:\Temp\Sample.txt"
End Sub 
```

所以现在你可以把所有这些放在一起来实现你想要的:)

**跟进（来自聊天）**

这就是我们最终到达的

```
Option Explicit

Dim PreviousValue

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    PreviousValue = Target(1).Value
End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim sLogFileName As String, ArchiveFileName As String
    Dim ArchFolder As String, sLogMessage As String
    Dim nFileNum As Long
    Dim NewVal

    On Error GoTo Whoa

    Application.EnableEvents = False

    sLogFileName = ThisWorkbook.path & Application.PathSeparator & _
    "Open Order Log.txt"

    If Not Target.Cells.Count > 1 Then
        If Target.Value <> PreviousValue Then
            '~~> Check if the Log File exists
            If DoesFileFldrExist(sLogFileName) = True Then
                '~~> Check for the File Size
                If FileLen(sLogFileName) > 3145728 Then
                    '~~> Check if the "Log History" folder exists
                    ArchFolder = ThisWorkbook.path & _
                    Application.PathSeparator & "Log History"

                    '~~> If the "Log History" folder doesn't exist, then create it
                    If DoesFileFldrExist(ArchFolder) = False Then
                        MkDir ArchFolder
                    End If

                    '~~> Generate a new file name for the archive file
                    ArchiveFileName = ArchFolder & Application.PathSeparator & _
                    "Open Order Log - " & Format(Date, "dd-mm-yyyy") & ".txt"

                    '~~> Move the file
                    Name sLogFileName As ArchiveFileName
                End If
            End If

            '~~> Check if the cell is blank or not
            If Len(Trim(Target.Value)) = 0 Then _
            NewVal = "Blank" Else NewVal = Target.Value

            sLogMessage = Now & Application.UserName & _
            " changed cell " & Target.Address & " from " & _
            PreviousValue & " to " & NewVal

            nFileNum = FreeFile

            '~~> If the log file exists then append to it else create
            '~~> a new output file
            If DoesFileFldrExist(sLogFileName) = True Then
                Open sLogFileName For Append As #nFileNum
            Else
                Open sLogFileName For Output As #nFileNum
            End If

            Print #nFileNum, sLogMessage
            Close #nFileNum
        End If
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub

Public Function DoesFileFldrExist(strFullPath As String) As Boolean
    On Error GoTo Whoa
    If Not Dir(strFullPath, vbDirectory) = vbNullString _
    Then DoesFileFldrExist = True
Whoa:
    On Error GoTo 0
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-06T09:11:48.467

```
Sub MoveFiles()
Set wb = ThisWorkbook
Set ws = wb.Worksheets("Sheet1")

Dim MyFile As String
Inlocation = ws.Range("A1").Value & "\"
Lastdate = Format(ws.Range("A3").Value, "DD-MM-YYYY")
Outlocation = ws.Range("A2").Value
Foulocation = Outlocation & "\" & Lastdate
MyFile = Dir(Inlocation & "*.*")

Set oFSO = CreateObject("Scripting.FileSystemObject")
'Check Specified Folder exists or not
If Not oFSO.FolderExists(Foulocation) Then
    'If Folder is available
    MkDir Foulocation
End If

Do Until MyFile = ""
 oFSO.CopyFile Inlocation & MyFile, Foulocation & "\", True
 If Inlocation <> Foulocation Then
 oFSO.DeleteFile Inlocation & MyFile
 End If
 'Name Inlocation & MyFile As Foulocation & "\" & MyFile
 MyFile = Dir
Loop
MsgBox "Files successfully moved to location " & Foulocation

End Sub 
```

# java - File.mkdir 或 mkdirs 返回 false - 原因？

> ID：12202766
> 
> 赞同：48
> 
> 时间：2012-08-30T17:57:37.670
> 
> 标签：java, file, javadoc, mkdir

为什么 file.mkdir 返回 false？

Google 指出可能有多种原因（例如安全性、权限、路径名等）。

我的问题：

1.  如何找到返回false的确切原因？
2.  如果安全/权限是一个原因，那么为什么不抛出 SecurityException？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-30T19:26:29.393

如果目录已经存在，mkdir 和 mkdirs 返回 false，因此这可能是失败的原因之一。

如果您使用的是 Java 7，则可以使用 Files 类。它会在错误时抛出一个 IOException 并提供非常好的描述。

```
Files.createDirectory(file.toPath()); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-08-30T18:06:39.417

> 如果安全/权限是一个原因，那么为什么没有抛出 SecurityException（在 javadoc 中提到）？

A`SecurityException`当你没有 JVM 级别的权限做某事时抛出，而不是操作系统级别的权限

> 有没有办法找到返回 false 的确切原因？

不，AFAIK。唯一知道的方法是自己检查目录的权限，在调用它们之前确保它不存在，检查父目录是否存在等。

但是，如果您使用的是**Java 7 或更高版本**，则可以改用 NIO 来创建目录。具体来说，[`Files.createDirectory`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createDirectory(java.nio.file.Path,%20java.nio.file.attribute.FileAttribute...))：

```
File dir = new File("mydir");
Files.createDirectory(dir.toPath()); 
```

如果你想完全使用 NIO 而不是 using `java.io.File`，你可以使用[`Paths.get`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html#get(java.lang.String,%20java.lang.String...))来创建一个`Path`：

```
Path dir = Paths.get("mydir");
Files.createDirectory(dir); 
```

在这两种情况下，如果无法创建目录，它将抛出一个`IOException`操作失败的确切原因。

对于 中的大多数方法都是如此`Files`，因此建议使用它而不是使用`File`类中的方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-30T18:06:44.957

1.  不，没有办法找到`mkdirs()`返回 false 的确切原因，至少不是来自 Java 内部，因为它可能取决于操作系统。

2.  如果's和方法`SecurityException`中存在安全违规，则抛出A。如果存在操作系统权限问题，则不会引发异常。`SecurityManager``checkRead()``checkWrite()`

* * *

另外，请注意，如果您调用`File.mkdir()`，并且父目录不存在，`mkdir()`将返回 false。但是，调用`File.mkdirs()`将创建不存在的父目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-04T06:29:18.590

这是 Windows 特有的内容：在我的例子中，该`file.mkdir()`方法失败了，`NoSuchFileException`因为我试图在 Windows 上直接创建嵌套目录结构（例如`results\results_ddMMyyyy`，不首先创建`results`目录）。

但是，完全相同的代码在我的 Mac 上运行良好，即在 Mac 上没有引发此类异常，并且中间`results`目录是由该`file.mkdir()`方法隐式创建的。

希望这对将来的人有所帮助。

# objective-c - iOS 电影等大文件的本地化

> ID：12202769
> 
> 赞同：1
> 
> 时间：2012-08-30T17:57:52.550
> 
> 标签：objective-c, ios, video, localization

我正在创建一个新的 iOS 项目，我必须在我的应用程序中包含一个视频。我们还需要在离线模式下访问该视频 - 所以我需要将它作为视频文件包含在我的项目中。问题 - 这种大文件本地化的最佳实践是什么？应用程序将至少使用 7 种语言，我无法决定 - 包含 7 种语言的视频，这会显着改变应用程序的大小，还是仅包含英语并本地化其他内容？可能有人知道 - 例如，如果我的手机语言是西班牙语并且我下载了可本地化的应用程序 - 这个应用程序是否包含所有语言的视频或仅包含我选择的视频？

任何答案都将被占用，并提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:08:48.013

您可以通过捆绑分离的视频和音频来做一些漂亮的事情。然后，您可以为每个本地化播放正确的音频。字幕也可以这样做。

最优化的方法是不在应用程序中捆绑任何视频，只允许用户从应用程序内下载当前本地化的视频。那就是我所想的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:48:36.523

一个视频可以有多个音频流。因此，您可以简单地创建一个包含多个音频流的视频。与视频相比，音频通常更小。所以应该不会那么痛。然后用户可以选择音频语言[或程序可以根据某些偏好预选]来播放它。

几乎所有容器格式都可以包含超过 1 个音频流。[几乎所有，绝对是我猜你正在使用的mp4。]

编辑：您也可以有两个文件。一种是最常见的语言的一半，另一种是不太常见的语言，以减少一些大小。

# php - Symfony后端：根据另一个在组合框上加载数据

> ID：12202770
> 
> 赞同：0
> 
> 时间：2012-08-30T17:57:53.487
> 
> 标签：php, web-applications, symfony1, symfony-1.4

我从 symfony 开始，我在这里有点迷路。当然，没有什么是一个好的教程可以管理的。但是我已经达到了我的教程没有涵盖的一点。

创建后端我写这个 generator.yml

```
...product/config/generator.yml
generator:
  class: sfDoctrineGenerator
  param:
    model_class:           Product
    theme:                 admin
    non_verbose_templates: true
    with_show:             false
    singular:              ~
    plural:                ~
    route_prefix:          product
    with_doctrine_route:   true
    actions_base_class:    sfActions

  config:
    actions: 
    fields:  
      product_type_id: {label: Product Type}
      product_name: {label: Product Name}
    list:    
      display: [product_type_id, category, product_name, created_at, updated_at]
    filter:  ~
    form:    ~
    edit:  ~        
    new:    
      display: [product_type_id, product_name, url, description, _category] 
```

最后一个字段通过自定义文件 _category.php 呈现

```
<?php 
    echo '<HTML CODE><select><option>...</option>';

    $query = Doctrine_Core::getTable('category')
         ->createQuery('c')
         ->where("id <> 1");
    $quer= $query->fetchArray();
    foreach($quer as $q) {
          echo '<option value="'.$q['id'].'">'.$q['category_name'].'</option>';
    }
    echo '</select> </HTML CODE>'
?> 
```

它提供了一个简单的形式来介绍数据，并且可以。但我试图让“新”操作（product_type_id）上的第一个组合框允许我修改类别查询以仅显示匹配的那些。

我想知道我是否可以访问 product_type_id 的值，调用一些 sfFuction 或教义......或其他东西。

在此先感谢您的帮助。

# java - Junit 测试空点异常

> ID：12202771
> 
> 赞同：0
> 
> 时间：2012-08-30T17:57:53.817
> 
> 标签：java, unit-testing, junit

我目前正在为我的医院管理系统进行 JUnit 测试。但是当尝试检查JUnit测试中的insertDoctor方法的布尔值时出现空点异常。那点Statement stmt=con.createStatement。我附上了下面的所有代码。请检查一下。

```
public class JUnitTest extends TestCase {
    private Connection con;
    public JUnitTest(String testName) {
        super(testName);
        con=DBConnector.getConnection();
    }

    @Override
    protected void setUp() throws Exception {
        super.setUp();
    }

    @Override
    protected void tearDown() throws Exception {
        super.tearDown();
    }
    // TODO add test methods here. The name must begin with 'test'. For example:
    // public void testHello() {}
    public void testdeltePatient() throws SQLException{

        Patients p=new Patients();
       assertEquals(true, p.removePatient(333));

    }
    public void testdeleteDoctor() throws SQLException{

        Doctors d=new Doctors();
       d.setSpeciality("General");
       d.setSumOfQn("MBBS");
       d.setExp("3 Years");

        d.setDocId(678);
        d.setEmpId(4344);

        assertEquals(true, d.insertDoctor(d));
    }
} 
```

* * *

![在此处输入图像描述](../Images/3d7a1caebe1e234d1f7c3571c83a1ae5.png)

* * *

```
public class Doctors extends Employee  {

    private int docId;
    private String exp;
    private String sumOfQn;
    private int empId;
    private String speciality;
    private Connection con;

    public String getSpeciality() {
        return speciality;
    }

    public void setSpeciality(String speciality) {
        this.speciality = speciality;
    }

    public Doctors() {

        con = DBConnector.getConnection();
    }

    public int getDocId() {
        return docId;
    }

    public void setDocId(int docId) {
        this.docId = docId;
    }

    public String getExp() {
        return exp;
    }

    public void setExp(String exp) {
        this.exp = exp;
    }

    public String getSumOfQn() {
        return sumOfQn;
    }

    public void setSumOfQn(String sumOfQn) {
        this.sumOfQn = sumOfQn;
    }

    @Override
    public int getEmpId() {
        return empId;
    }

    @Override
    public void setEmpId(int empId) {
        this.empId = empId;
    }

    public Connection getCon() {
        return con;
    }

    public void setCon(Connection con) {
        this.con = con;
    }

    public ResultSet getEmployeeId() throws SQLException {

        ResultSet rs;
        String query = "select * from employee";
        Statement stmt = con.createStatement();
        rs = stmt.executeQuery(query);

        return rs;

    }

    public boolean insertDoctor(Doctors d) throws SQLException {

        PreparedStatement ps;
        boolean result = false;
        **Statement stmt = con.createStatement();**

        String query = "INSERT INTO doctors VALUES ('" + d.getDocId() + "','" + d.getSpeciality() + "','" + d.getExp() + "','" + d.getEmpId() + "',' " + d.getSumOfQn() + "')";
        ps = con.prepareStatement(query);
        int res = ps.executeUpdate();
        if (res > 0) {
            result = true;
        }

        return result;                       
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:36:36.123

```
Statement stmt = con.createStatement(); 
```

这里 con 为空。现在 con 的值在构造函数中设置。它说

```
con = DBConnector.getConnection(); 
```

因此，DBConnector.getConnection() 肯定返回 null。您必须在 Junit 中实例化 DBConnector()。提供有关 DBConnector 的更多信息

# php - jQuery .append 在单个对象上执行多次

> ID：12202775
> 
> 赞同：0
> 
> 时间：2012-08-30T17:58:10.247
> 
> 标签：php, jquery

我想使用 jQuery .append 将 div 插入另一个父 div，该 div 是列表元素的一部分，由一个动态创建的表单字段组成。虽然父类只包含一个对象（即文本字段）并且在整个文档中只存在一次，但.append 增加了六次div。它适用于 JSfiddle，但不适用于我的本地代码（Magento 形式）。这是为什么？会不会和父类的动态创建有关？

PHP

```
$input_name     = $this->getInputName();
$input_id       = $this->getInputId();
$input_value    = $this->getValue();
$input_class    = $this->getInputClass();
$label          = $this->getLabel();

<div class="input-box <?php echo $input_id;?>">
 <input type="text" name="<?php echo $input_name;?>" id="<?php echo $input_id;?>" value="<?php echo $this->htmlEscape($input_value) ?>" title="<?php echo $this->__($label); ?>" class="<?php echo $input_class;?>" />
</div> 
```

用 jQuery

```
$(".input-box.billing_postcode") .append("<div>My Link</div>") 
```

总是导致以下 HTML

```
<li>
<div class="input-box billing_postcode">
<input id="billing_postcode" class=" input-text required-entry absolute-advice " type="text" title="ZIP" value="" name="billing[postcode]">
<div>My Link</div>
<div>My Link</div>
<div>My Link</div>
<div>My Link</div>
<div>My Link</div>
<div>My Link</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:15:05.943

这应该解决：

```
var $element = $(".input-box.billing_postcode");
if($('.foo', $element).length == 0) {
    $element.append('<div class="foo">My Link</div>');
} 
```

# linux - 什么时候应该在布尔条件下将变量放在引号中？

> ID：12202778
> 
> 赞同：4
> 
> 时间：2012-08-30T17:58:14.340
> 
> 标签：linux, bash

以下两个布尔表达式是否相同？

```
if [ -n $1 ] ; then   
if [ -n "$1" ] ; then 
```

而这两个

```
if [ $? == 0 ] ; then
if [ "$?" == 0 ] ; then 
```

如果不是 - 什么时候应该将变量放在引号中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T18:02:28.113

当值可能包含空格或通常不是连续的字符串时，将变量放在引号中。所以

因为`$?`应该总是介于 0 和 255 之间，你不需要引用它，因为它是每个子流程返回后设置的返回值。不可能通过直接分配字符串值来打破它，即

```
$?=Is of course wrong and should be

 ?=Bad value assigment 
```

因为用户变量名称必须以 [A-Za-z_] 开头，所以不要那样做；-)

而对于 1 美元，如果传入一个值

```
myscript "arg1 with spaces" 
```

考试

```
if [ -n $1 ] ; then 
```

会爆炸，

但测试

```
if [ -n "$1" ] ; then 
```

将会成功。

IHTH

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T18:11:39.520

使用`[`命令（是的，它是命令），您几乎应该总是使用引号。例外是如此罕见，我什至可能不会进入它们。例如，

```
set -- 'x -a -z b'
if [ -n $1 ]; then echo foo; fi
# … crickets
if [ -n "$1" ]; then echo foo; fi
foo 
```

Bash 也有`[[`关键字（是的，它是关键字），它足够聪明，可以了解扩展并避免不引用的陷阱。（但在`[[`表达式中引用通常仍然是安全的。）

由于该`[`命令符合 POSIX 并且`[[`是一个 bashism，因此您决定何时使用哪个。

至于您的第二个示例，如果您将某物与数字进行比较，则 using`==`是一种bashism。如果您正在编写 bash，请使用算术表达式，例如

```
if (( $? == 0 )); then … 
```

但是，如果您正在尝试 POSIX 合规性，请编写它

```
if [ "$?" = 0 ]; then … 
```

通常，直接比较`$?`是一个危险信号，因为比较命令的成功/失败正是这样`if`做的：

```
if somecommand; then … 
```

好于

```
somecommand
if (( $? == 0 )); then … 
```

但是如果你确实需要使用它，`$?`这是一个例外，因为它保证永远只是一个单字节无符号整数，所以使用 unquoted 是非常安全的，尽管引用它并没有什么坏处。

```
$ false; if [ $? = 0 ]; then echo t; else echo f; fi
f
$ true; if [ $? = 0 ]; then echo t; else echo f; fi
t
$ false; if [ "$?" = 0 ]; then echo t; else echo f; fi
f
$ true; if [ "$?" = 0 ]; then echo t; else echo f; fi
t
$ false; if [ $? == 0 ]; then echo t; else echo f; fi
f
$ true; if [ $? == 0 ]; then echo t; else echo f; fi
t
$ false; if [ "$?" == 0 ]; then echo t; else echo f; fi
f
$ true; if [ "$?" == 0 ]; then echo t; else echo f; fi
t 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T18:05:39.237

它们并不总是相同的。如果所讨论的变量为空或包含空格，则`[`命令（别名为`test`）的参数可能太少或太多。

在`bash`中，您可以使用在评估条件之前不将变量拆分为单词的内置`[[ -n $1 ]]`条件构造，这意味着不需要双引号。

# jquery - 使用 AJAX 的 jQuery 选项卡式 UI - 按钮的事件处理程序不再工作

> ID：12202780
> 
> 赞同：1
> 
> 时间：2012-08-30T17:58:21.117
> 
> 标签：jquery, ajax, jquery-ui

我正在使用 jQuery 选项卡式界面在使用 ajax 的 Facebook 应用程序的视图之间切换。我有两个选项卡-tab1 和 tab2，它们都有表单的按钮。

问题是，当我转到 tab1 并单击按钮时，它们不起作用。如果我然后转到 tab2，该页面上的按钮将起作用。如果我然后回到 tab1 按钮在那里工作。反过来也会发生同样的情况：如果我先转到 tab2 并单击它们不起作用的按钮，但如果我转到 tab1 它们确实起作用。返回到 tab2，按钮现在可以工作了。

有谁知道为什么会发生这种情况？

编辑：下面是页面代码的精简版本。事件处理程序当前位于标头中。不过，我已经尝试过将它们放在身体的底部。

```
 <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
            <title>Profile Page</title>
            <link href="../css/profilepage_s.css" rel="stylesheet" type="text/css"/>
            <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
            <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/redmond/jquery-ui.css" rel="stylesheet" type="text/css" />

            <!-- Importing javascript configuration file and library of functions to call Facebook features -->
            <?php include('../../config_js.php'); ?>
            <script type="text/javascript" src="../js/facebookFeatures.js"></script>

             <!-- This is all jQuery code -->
            <script type="text/javascript">
                $(document).ready(function (e) {
                    <!-- Converts Link into button -->
                    //$("#thisIsAButton").button();

                    <!-- Updates the user's shortlist with id of this person -->
                    $("#updtShortlistBtn").click(function () {
                        alert("I'm in");

                        //$(this).hide();

                        $.get('../Scripts/updateShortlist.php', 'uid=<?php echo $uid?>&targ_id=<?php echo $targ_id?>');
                    }); 
                });
            </script>​​​

        </head>
        <body>

        <div id="container">

            <a id="thisIsAButton" href="../View/edit_profile.php">go to page 4</a>

            <?php //echo $targ_id ?>

            <!-- Displays the Profile Picture -->
            <div id="profile_pic">
                <img src="<?php echo $picture ?>"/>
            </div>

            <!-- Displays list of comparisons-->
            <div id="comparison"></div>
            <div id="bio"><?php //echo $bio ?></div>

            <!-- Show different views if user is viewing their own profile or another user's profile -->
            <!-- These features should only be available if the user is viewing their own profile -->
            <?php 

                if ($activeUsersProfile){ ?>
                    <!-- Edit Profile Button -->
                    <div id="editProfileBtn">
                        <button data-pagelink="../View/edit_profile.php">Edit Profile</button>
                    </div>

                    <!-- Button to publish a summary of user's app profile to their Facebook profile -->
                    <div id="publishBtn">
                        <input type="button" value="Publish Profile" onclick="publishToWall(<?php echo $targ_id ?>)"/>
                    </div>

            <?php } else { ?>

                            <!-- Displays Send Message Button and Update shortlist button -->
                    <div id="sndBtn">
                            <button type="button" id="updtShortlistBtn">Say 'Hey'!</button>
                    </div>  
<?php } ?>
            </div>
        </body>
    </html> 
```

编辑：

```
$(document).ready(function (e) {

                $(document).on('click', '#updtShortlistBtn', function () {

                alert("I'm in");
                 $.get('../Scripts/updateShortlist.php', 'uid=<?php echo $uid?>&targ_id=<?php echo $targ_id?>');
            });

            }); 
```

EDIT2：抱歉，在尝试缩短示例代码时，我取出了一些没有 jQuery 的按钮，例如下面的按钮。我现在意识到这对于找到解决方案可能很重要！

```
// Calls a method in the facebookFeatures.js file linked at top
<button type="button" id="sndMessageBtn" onclick="sendMessage(<?php echo $targ_id ?>)">Send Message</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:25:44.970

事件被绑定到文档准备就绪，所以我假设按钮可能不存在？您说选项卡是通过 ajax 加载的，因此在 document ready 触发时它们（可能）不存在。

在 jQuery 选项卡中有一个事件`load`，你应该把你的点击绑定放在哪里

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

```
$('#tabs').tabs({
    load: function() {
        $("#updtShortlistBtn").click(function () { /* do Stuff */ });
    }
}); 
```

或者，您可以使用委托处理程序绑定到文档：

```
$(document).on('click', '#updtShortlistBtn', function () {
    //do Stuff
}); 
```

这样，按钮何时存在都无关紧要......处理程序绑定到文档并且事件冒泡处理问题

# silverlight-4.0 - Silverlight 中具有多个数据网格的 ScrollViewer

> ID：12202781
> 
> 赞同：0
> 
> 时间：2012-08-30T17:58:26.547
> 
> 标签：silverlight-4.0, scrollviewer

我在堆栈面板和网格中有 3 个数据网格，我也需要在滚动查看器中添加它们。当我尝试将滚动查看器添加到网格或堆栈面板时，没有任何反应。当我用滚动查看器包围整个堆栈面板和网格时，它可以工作，但它会将滚动条放在与数据网格分开的页面一侧。我需要的是网格/堆栈面板将所有三个网格一起滚动（我不希望每个数据网格都滚动；我需要它们保持组合在一起）。以下是我当前的代码。感谢！！

```
 <StackPanel Margin="10,162,0,50" HorizontalAlignment="Left" Width="365">                    
                <Grid>  

                <Rectangle Fill="{StaticResource BaseColor}" 

                           Stroke="Gray"  
                           RadiusX="10" 
                           RadiusY="10" 
                           Margin="0,0,0,0" />

                <StackPanel x:Name="IdentifyResultsStackPanel" 
                        Margin="15,10,15,10" 
                        Visibility="Collapsed">

                <TextBlock Text="ELEMENTARY SCHOOL ATTENDANCE AREA:" 
                           Foreground="White" 
                           FontSize="14" 
                           FontStyle="Italic" 
                           Margin="0,0,0,5" />

                    <slData:DataGrid x:Name="IdentifyDetailsDataGrid" 
                                 AutoGenerateColumns="False"
                                 LoadingRow="IdentifyDetailsDataGrid_LoadingRow"
                                 HeadersVisibility="None" >
                        <slData:DataGrid.Columns>
                            <slData:DataGridTextColumn Binding="{Binding Path=Key}" FontWeight="Bold"/>
                            <slData:DataGridTextColumn Binding="{Binding Path=Value}"/>
                        </slData:DataGrid.Columns>
                    </slData:DataGrid>

                    <TextBlock Text="MIDDLE SCHOOL ATTENDANCE AREA:" 
                           Foreground="White" 
                           FontSize="14" 
                           FontStyle="Italic" 
                           Margin="0,0,0,5" />
                    <slData:DataGrid x:Name="IdentifyDetailsDataGrid2" 
                                     AutoGenerateColumns="False"
                                     LoadingRow="IdentifyDetailsDataGrid_LoadingRow"
                                     HeadersVisibility="None" >
                        <slData:DataGrid.Columns>
                            <slData:DataGridTextColumn Binding="{Binding Path=Key}" FontWeight="Bold"/>
                            <slData:DataGridTextColumn Binding="{Binding Path=Value}"/>
                        </slData:DataGrid.Columns>
                    </slData:DataGrid>

                    <TextBlock Text="HIGH SCHOOL ATTENDANCE AREA:" 
                           Foreground="White" 
                           FontSize="14" 
                           FontStyle="Italic" 
                           Margin="0,0,0,5" />
                    <slData:DataGrid x:Name="IdentifyDetailsDataGrid3" 
                                 AutoGenerateColumns="False"
                                 LoadingRow="IdentifyDetailsDataGrid_LoadingRow"
                                 HeadersVisibility="None" >
                        <slData:DataGrid.Columns>
                            <slData:DataGridTextColumn Binding="{Binding Path=Key}" FontWeight="Bold"/>
                            <slData:DataGridTextColumn Binding="{Binding Path=Value}"/>
                        </slData:DataGrid.Columns>
                    </slData:DataGrid>

                </StackPanel> 
            </Grid>
        </StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:38:55.327

堆栈面板是问题所在。以下链接帮助我解决了这个问题：

[如何在 Silverlight 中将 ScrollBar 添加到 StackPanel？](https://stackoverflow.com/questions/2691236/silverlight-scrolling-with-a-stackpanel)

# android - Android捏缩放，ZoomOut和ZoomIn，在限制

> ID：12202782
> 
> 赞同：0
> 
> 时间：2012-08-30T17:58:26.670
> 
> 标签：android, touch, android-imageview, zooming, pinchzoom

我已经在这里搜索了很多，但还没有找到解决方案。所以问题是，我有一个 3000*3000 像素的图像，我将它设置为缩放类型矩阵。现在我只有图像的左角显示。现在我不希望人们在这个阶段放大，只缩小到最大'x'（还是要看多少）。
必须缩放的是图像视图“kaart”。

**问题：**如何让人们一开始只缩小，不让他们通过x？之后，不要让他们放大超过原来的大小

我试过用负值，但没用

这是我的代码：

```
 // These matrices will be used to move and zoom image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// max and min zoom
//private static final float MIN_ZOOM = 1.0f;
//private static final float MAX_ZOOM = 5.0f;
//scale = Math.max(MIN_ZOOM, Math.min(scale, MAX_ZOOM));

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;

int mode = NONE;

// Remember some things for zooming
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;
String savedItemClicked;

ImageView view;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.kaart);
   view = (ImageView) findViewById(R.id.kaart);
   view.setOnTouchListener(this);
}

public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    ImageView view = (ImageView) v;
    dumpEvent(event);

    // Handle touch events here...
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());
        //Log.d(TAG, "mode=DRAG");
        mode = DRAG;
        break;
    case MotionEvent.ACTION_POINTER_DOWN:
        oldDist = spacing(event);
        //Log.d(TAG, "oldDist=" + oldDist);
        if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            //Log.d(TAG, "mode=ZOOM");
        }
        break;
    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_POINTER_UP:
        mode = NONE;
       // Log.d(TAG, "mode=NONE");
        break;
    case MotionEvent.ACTION_MOVE:
        if (mode == DRAG) {
            // ...
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY()
                    - start.y);
        } else if (mode == ZOOM) {
            float newDist = spacing(event);
           // Log.d(TAG, "newDist=" + newDist);

            if (newDist > 10f) {
                matrix.set(savedMatrix);
                float scale = newDist / oldDist;

                matrix.postScale(scale, scale, mid.x, mid.y);

            }
        }
        break;
    }
    limitZoom(matrix);
    limitDrag(matrix);
    view.setImageMatrix(matrix);
    return true;
}

@SuppressWarnings("deprecation")
private void dumpEvent(MotionEvent event) {
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
            "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);
    if (actionCode == MotionEvent.ACTION_POINTER_DOWN
            || actionCode == MotionEvent.ACTION_POINTER_UP) {
        sb.append("(pid ").append(
                action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }
    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }
    sb.append("]");
   // Log.d(TAG, sb.toString());
}

/** Determine the space between the first two fingers */
private float spacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/** Calculate the mid point of the first two fingers */
private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}
} 
```

希望可以有人帮帮我。我真的很感激。

**编辑**

我添加了我在某处找到的 2 个函数。

```
 private void limitZoom(Matrix m) {

    float[] values = new float[9];
    m.getValues(values);
    float scaleX = values[Matrix.MSCALE_X];
    float scaleY = values[Matrix.MSCALE_Y];
    if(scaleX > MAX_ZOOM) {
        scaleX = MAX_ZOOM;
    } else if(scaleX < MIN_ZOOM) {
        scaleX = MIN_ZOOM;
    }

    if(scaleY > MAX_ZOOM) {
        scaleY = MAX_ZOOM;
    } else if(scaleY < MIN_ZOOM) {
        scaleY = MIN_ZOOM;
    }

    values[Matrix.MSCALE_X] = scaleX;
    values[Matrix.MSCALE_Y] = scaleY; 
    m.setValues(values);
} 
```

和

```
private void limitDrag(Matrix m) {
    float[] values = new float[9];
    m.getValues(values);
    float transX = values[Matrix.MTRANS_X];
    float transY = values[Matrix.MTRANS_Y];
    float scaleX = values[Matrix.MSCALE_X];
    float scaleY = values[Matrix.MSCALE_Y];

    ImageView iv = (ImageView)findViewById(R.id.kaart);
    Rect bounds = iv.getDrawable().getBounds();
    int viewWidth = getResources().getDisplayMetrics().widthPixels;
    int viewHeight = getResources().getDisplayMetrics().heightPixels;

    int width = bounds.right - bounds.left;
    int height = bounds.bottom - bounds.top;

    float minX = (-width + 20) * scaleX; 
    float minY = (-height + 20) * scaleY;

    if(transX > (viewWidth - 20)) {
        transX = viewWidth - 20;
    } else if(transX < minX) {
        transX = minX;
    }

    if(transY > (viewHeight - 80)) {
        transY = viewHeight - 80;
    } else if(transY < minY) {
        transY = minY;
    }

    values[Matrix.MTRANS_X] = transX;
    values[Matrix.MTRANS_Y] = transY; 
    m.setValues(values);
} 
```

我必须在 switch case 之后以及在我的视图上设置 imagematrix 之前立即调用这些函数。（我已将此添加到我之前的代码中）

也许这不是最好的解决方案，但它确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:07:21.530

如果我理解你的代码，你会继续保存矩阵，以记住缩放和滚动的状态（这可以单独由一个矩阵完成，但也许你正在做其他操作）。

这样，每个动作效果都相对于最后一个状态，并且很难为缩放（和滚动）设置绝对限制：要获得它们的绝对值，您必须调用 matrix.getValues() 并选择它返回的数组中的值。

尝试保存当前的 x 滚动、y 滚动和缩放，并在每次操作时检查它们的更新值（现在仍然是绝对值）是否在您的限制范围内；如果是这样，则实际更新它们，然后重置矩阵并设置新的滚动/缩放值。

（另外，考虑使用 GestureDetector 和 ScaleGestureDetector）

# common-lisp - 是否有用于 common lisp 的随机数生成器测试库

> ID：12202784
> 
> 赞同：0
> 
> 时间：2012-08-30T17:58:33.387
> 
> 标签：common-lisp

我想测试一个由RNG生成的列表，该列表是否可以被认为是随机的。

我知道单个测试不会做交易，并且需要一个测试套件才能获得可靠的结果。此外，我确实知道那里有一个库/工具，例如[DieHard(er)](http://www.phy.duke.edu/~rgb/General/dieharder.php)，据我所知，它们没有提供在 lisp 中使用的简洁界面，我也找不到 lisp 的端口。

因此我想知道：

**在 Linux 上使用 common-lisp (sbcl) 测试 RNG 有哪些选择？**

要测试的随机数生成器在安全相关代码中使用，因此必须满足高标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:18:47.460

我不知道有任何 rng 测试套件在任何语言中都像顽固分子那样全面。我会简单地使用 CFFI 与 libdieharder 交互。

# php - 获取div标签高度

> ID：12202788
> 
> 赞同：5
> 
> 时间：2012-08-30T17:58:46.310
> 
> 标签：php, javascript, jquery, html

我有 div 标签，在这个 div 标签中，我从数据库中写入结果（使用 PHP / MYSQL）。我想要这个 div 标签的警报高度。问题是，有时警报会返回不正确的 div 高度（小于实际结果）。有时结果是正确的。

我认为，发生这种情况是因为 javascript 之前返回结果，而不是 php 完成他们的工作，并且结果小于真实高度 div 标签。有人知道如何解决这个问题吗？（恰当，不正确的警报结果，只有chrome和safari，在opera和firefox中结果总是真实的。）这是php代码：

```
$res = mysqli_query("SELECT some_column FROM table");
echo '<div id="my_div">';
while ($row = mysqli_fetch_row($res)) {
    echo '<p>'.row[0].'</p>';
}
echo "</div>"; 
```

和js代码：

```
$(document).ready ( function () {

   alert( $("#my_div").height() );

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:23:45.617

计算页面加载后的高度，

```
window.onload = function (){
    alert( $("#my_div").height() );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:23:32.250

您可以尝试使用`outerHeight`方法 [http://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)

# c# - Linq 按日期和时间分组顺序

> ID：12202796
> 
> 赞同：3
> 
> 时间：2012-08-30T17:59:24.697
> 
> 标签：c#, .net, linq

晚上好，

我设法让我的 Linq 查询几乎正确。还有一个问题我正在努力解决。

我的查询是

```
var o =
  (from c in x
   group c by x.Date.Date into cc
   select new 
   { 
      Group = cc.Key.Date, 
      Items = cc.ToList(),
      ItemCount = cc.Count() 
   }).OrderByDescending(p => p.Group); 
```

现在这个查询工作正常。它按日期在 ListView 中分组。x.Date 是我的 SQL 数据库中的 DateTime 字段。因此，我选择 x.Date.Date 以按 DateTime 字段的实际日期分组，就好像它只是 x.Date 它会按日期和时间分组。

我的问题是，我如何按时间分组，以便最新时间位于组的顶部？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:01:22.807

使用 linq“ThenBy()”方法：

```
var o = (from c in x group c by x.Date.Date into cc select new 
  { 
    Group = cc.Key.Date, 
    Items = cc.OrderByDescending(y=>y.Date).ToList(), 
    ItemCount = cc.Count() 
  })
  .OrderByDescending(p => p.Group) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:07:47.950

更改`Items = cc.ToList()`为`Items = cc.OrderBy(c => c.[field_you_want_to_sort_by]).ToList()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:09:30.703

```
var o =
  (from c in x
   group c by c.Date.Date into cc
   select new 
   { 
      Group = cc.Key.Date, 
      Items = cc.OrderByDescending(a=>a.Date.Time).ToList(),
      ItemCount = cc.Count() 
   }).OrderByDescending(p => p.Group); 
```

# php - 从另一个文件调用php函数

> ID：12202797
> 
> 赞同：0
> 
> 时间：2012-08-30T17:59:26.420
> 
> 标签：php, mysql, html

我是一名 PHP 初学者，正在尝试编写适用于 HTML 和 MySql 的 PHP 类。我面临以下问题，我创建了一个名为 DatabaseManager 的类，其中包含函数 get_value。这个函数只是返回一个值。在另一个文件中，我使用 java 脚本在单击按钮时调用此函数。但是这两个文件之间的链接似乎不起作用....有人可以帮我吗？谢谢你。

这是我的包含 PHP 类的文件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
</head>

<body>

<?php

class DatabaseManager {

private $value=1;

    public function get_value ()
    {   
    return value;
    }

}

/php>
</body>
</html> 
```

这是另一个调用它的文件。

```
<html>
<head>
<?php include("DatabaseManager.php"); ?>

<script type="text/javascript">

function connect()
{

<?php

$database_manager= new DatabaseManager;
echo "the value is" . $database_manager->get_value();

?>
}

</script>
</head>

<body>

<input type="button" value="Search " onclick="connect()">

</body>
</html> 
```

包含函数 get_value 的文件的名称是 DatabaseManager.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:26:04.313

像这样

在 Databasemanager.php 中

```
<?php
    class DatabaseManager {    
    private $value = 1;

       public function get_value() {    
            return $this->value;
        }    
    }

    ?> 
```

在另一个 PHP 文件中

```
<html>
<head>
<?php include("Databasemanager.php"); ?>

<script type="text/javascript">

function connect()
{
<?php
$database_manager= new DatabaseManager;
echo "the value is" . $database_manager->get_value();
?>
}

</script>
</head>

<body>

<input type="button" value="Search " onclick="connect()"> 

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:14:31.233

这里有很多事情你做错了。

1.  您不需要第一个示例中的 html 代码。
2.  你关闭php错误`/php>`应该会产生错误，应该是`?>`
3.  当您实例化 DatabaseManager 类时，您省略了括号，这意味着构造函数将永远不会被调用，这也会产生错误。
4.  您可能正在尝试在 javascript 中使用 alert ，在这种情况下您没有这样做。

它应该看起来像这样：

```
<?php
class DatabaseManager {
private $value = 1;

    function getValue() {
        return $this->value;
    }

}

?> 
```

在您的 html（仍然是 php，但包含 html-markup）文件中：

```
<html>
<head>
    <script type="text/javascript">
    function connect() {
        alert("
        <?php
            include "nameofDBManagerClassFile.php"
            $dbm = new DatabaseManager();
            echo "the value is " . $dbm->getValue();
        ?>
        ");
    }
</script>
</head>
<body>
</body>
</html> 
```

也可能是您认为在调用 JS 函数 connect() 之前不会执行 javascript 函数内部的 php 代码，但事实并非如此。PHP代码在服务器上执行，因此当用户请求该网页时将被调用，另一方面，javascript是客户端，将在用户浏览器中执行。我强烈建议您阅读 php 和 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T16:42:00.703

我认为最简单的方法是使用 require i 另一个文件。

```
require('login.php');

function get_value()
{
return get_value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:05:40.867

一些东西：

1.  `DatabaseManager.php`删除所有 HTML 。您将文件包含在其他地方，您不需要或不想要重复的 HTML 标记。

2.  删除`@`MySQL 部分中的 。这可以抑制您遇到的任何错误。

3.  切换到[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。它们更安全（如果使用得当）

4.  您的关闭 php 标记在数据库文件中是错误的。你有`/php>`它应该是`?>`

5.  你的班级完全没有按原样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:07:31.837

你做错了，在你的 JavaScript 函数 connect() 中输出一些东西：

```
 function connect() {
        alert("
     <?php    
           $database_manager= new DatabaseManager;
            echo "the value is" . $database_manager->get_value();     
       ?>
        ");
    } 
```

因为 php 代码是在您的点击事件之外执行的。实际上，您不清楚您希望得到什么，但是您误解了基础知识。

[编辑澄清用户问题如何输出到屏幕]

# java - 插入排序和二维数组

> ID：12202799
> 
> 赞同：0
> 
> 时间：2012-08-30T17:59:39.637
> 
> 标签：java, arrays, 2d

我正在尝试使用插入排序按每行的第一列值对 Java 中的二维数组进行排序。我已经在大小为 2 的数组上对其进行了测试，但是当我尝试大小为 3 的代码时，它甚至没有运行 for 循环。感谢您提供的任何帮助。

```
public int[][] sortC(int[][] temp)
    {
        if (temp.length == 1)       
        {
            return temp;
        }
        else if (temp.length >= 2)
        {
               for (int i = 1; i <= temp.length - 1; i++)
               {
                   int holdRow = temp[i][0];
                   int holdCol = temp[i][1];
                   // hold past index
                   int holdRowP = temp[i - 1][0];
                   int holdColP = temp[i - 1][1];

                   int j = i;

                   while (j > 0 && holdRow < holdRowP)
                   {
                       holdRow = temp[j][0];
                       holdCol = temp[j][1];
                       // hold past index
                       holdRowP = temp[j - 1][0];
                       holdColP = temp[j - 1][1];   

                       // make single swap
                       temp[j][0] = holdRowP;
                       temp[j][1] = holdColP;

                       temp[j-1][0] = holdRow;
                       temp[j-1][1] = holdCol;

                       j--;
                   }
               }
        }

        return temp;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:57:32.117

通过使用 Java 2D 数组实际上是数组数组这一事实，您可以简化很多并使其适用于任意大小。内部数组（即行）可以作为整个单元移动，而不是像您正在做的那样零碎移动。

由于您的代码正在修改传递的参数，因此也无需返回数组。

调用后`sortC(input)`，`input`数组将被排序。

使用这两种方法，您的代码可以简化为

```
public void sortC(int[][] temp)
{
    if (temp.length >= 2)
    {
        for (int i = 1; i <= temp.length - 1; i++)
        {
            int[] hold = temp[i];
            int[] holdP = temp[i-1];

            int j = i;

            while (j > 0 && hold[0] < holdP[0])
            {
                hold = temp[j];
                holdP = temp[j-1];

                temp[j] = holdP;
                temp[j-1] = hold;

                j--;
            }
        }
    }

} 
```

# c - 为什么 gcc 只用 _mm_set_ss 添加这个 movss 指令？

> ID：12202801
> 
> 赞同：5
> 
> 时间：2012-08-30T17:59:40.677
> 
> 标签：c, optimization, sse, compiler-optimization

考虑使用 SSE 的这两个函数：

```
#include <xmmintrin.h>

int ftrunc1(float f) {
    return _mm_cvttss_si32(_mm_set1_ps(f));
}

int ftrunc2(float f) {
    return _mm_cvttss_si32(_mm_set_ss(f));
} 
```

对于任何输入，两者的行为完全相同。但是汇编器的输出是不同的：

```
ftrunc1:
    pushl   %ebp
    movl    %esp, %ebp
    cvttss2si   8(%ebp), %eax
    leave
    ret

ftrunc2:
    pushl   %ebp
    movl    %esp, %ebp
    movss   8(%ebp), %xmm0
    cvttss2si   %xmm0, %eax
    leave
    ret 
```

也就是说，额外`ftrunc2`使用一条指令！`movss`

这是正常的吗？有关系吗？当您只需要设置底部元素时，应该`_mm_set1_ps`始终首选？`_mm_set_ss`

* * *

使用的编译器是 GCC 4.5.2，带有`-O3 -msse`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:14:42.813

`_mm_set_ss`直接映射到汇编指令 ( `movss`)。但`_mm_set1_ps`没有。

根据我在 GCC、MSVC 和 ICC 上看到的情况：

将一对一映射到汇编指令的 SSE 内在函数通常被“按原样”处理——一个黑盒子。所以编译器只会优化适用于整个指令本身的优化。但它不会尝试对单个向量元素进行任何需要数据流/依赖性分析的优化。

和内在函数不映射到单个指令，并且大多数编译器都有特殊情况处理`_mm_set1_ps`。`_mm_set_ps`从我所见，上面列出的所有三个编译器*都*尝试对各个元素执行数据流分析优化。

* * *

当你把它们放在一起时，第二个例子离开了，`movss`因为编译器没有意识到前 3 个元素无关紧要。（它没有试图“打开”`_mm_set_ss`内在。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:38:11.333

您遇到了窥孔优化器的怪癖。由于某种原因，在第一种情况下它发现它可以折叠`mov`成，`cvttss2si`而在第二种情况下它失败了。问题是，这有关系吗？额外的移动指令*几乎*免费——它在指令流中占用额外的 4 个字节和一个额外的解码槽，但两个序列都需要相同数量的执行槽和相同数量的加载/存储槽（这通常很重要）。唯一潜在的症结是 ifetch 的 4 个额外字节——但由于 ftrunc1 使用 10 个字节，而 ftrunc2 使用 14 个字节，因此两者都适合单个高速缓存行，因此您不会看到任何差异。为了最大限度地减少这种开销，我会更关心不需要的 %ebp 垃圾（您是否使用 -fno-omit-frame-pointer 进行编译？ - 我虽然 -O3 默认包含 -fomit-frame-pointer ）。通过内联此函数，您会做得更好，这可能会完全改变窥视孔优化器看到的内容，因此可能会使其在任何一种情况下都能更好地工作（或者甚至反转它工作得更好的情况）——那里'

最重要的是，两者之间不太可能有任何可测量的速度差异......

# java - sql server jdbc查询日期时间列

> ID：12202803
> 
> 赞同：1
> 
> 时间：2012-08-30T17:59:45.373
> 
> 标签：java, sql-server, jdbc, spring-jdbc

我环顾四周，似乎找不到在 SO 上专门提出的问题，但我发现了类似的问题，例如[这个](https://stackoverflow.com/questions/4558400/sql-server-2008-datetime-column-jdbc-insert-problem)问题以及很多关于 SQL 本身或 C# 的问题......

这是我所看到的：

```
MapSqlParameterSource parameterSource = new MapSqlParameterSource();
        //parameterSource.addValue( "insertDate", DateTime.now().minusHours( 1 ).toGregorianCalendar(), Types.TIME );
        parameterSource.addValue( "insertDate", new Timestamp( DateTime.now().minusHours( 1 ).getMillis() ) );

        List< String > contents =
            _simpleJdbcTemplate
                .query(
                    "SELECT TOP (200) inserteddatetime, Contents FROM dbo.tsomeTable WHERE (ServiceName = 'something') and inserteddatetime > :insertDate",
                    new RowMapper< String >() {
                        @Override
                        public String mapRow( final ResultSet rs, final int rowNum ) throws SQLException {
                            System.out.println( rs.getTimestamp( "inserteddatetime" ) );

                            return rs.getString( "Contents" );
                        }
                    }, parameterSource ); 
```

查询“挂起”\什么都不做\从不返回，如果：

1.  我使用未注释的 Timestamp 对象（如上所示）
2.  我用或替换`parameterSource`对象`DateTime.now().minusHours( 1 ).toGregorianCalendar()``DateTime.now().minusHours( 1 ).toGregorianCalendar().getTime()`
3.  我尝试注释掉的行，但将类型更改为`Timestamp`

所以，这是我的一个或多个问题......

在 sql server 中查询日期时间列是否存在已知错误\问题？

为什么我必须使用`Time`而不是`Timestamp`？

我怀疑 Spring 将日期对象转换为`Timestamp`当我直接查询对象时（如 #2 所示）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:43:43.927

1.  `TIMESTAMP`是用于帮助的服务器生成的值`data consistency`，它不是一个简单的数据类型，所以对于`storing datetime value`，避免使用 TIMESTAMP 数据类型。

2.  此外，SQL Server TIMESTAMP 是`confusing`，它是`deprecated`. 它被替换为`ROWVERSION keyword`，这应该可以减少混乱。

# eclipse - 更改 Eclipse 的外观

> ID：12202805
> 
> 赞同：6
> 
> 时间：2012-08-30T17:59:47.950
> 
> 标签：eclipse

我正在使用 Eclipse，我不喜欢用户界面的外观，它的背景颜色太白了。我之前使用过 Eclipse，然后最好不要所有的白色区域！我一直在查看首选项，但没有找到任何更改用户界面的地方。有没有可以改变的主题！？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T18:09:00.413

打开您的 Eclipse Market Place 并搜索“Eclipse Color Theme”，安装它。

比去窗口>首选项>外观>颜色主题，选择你喜欢的风格，并享受。

[欲了解更多信息，请阅读野兔。](http://marketplace.eclipse.org/content/eclipse-color-theme#.UD-q1qDi6So)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T01:40:44.103

在 Eclipse Juno (4.2) 中，可以通过 CSS 完全自定义 Eclipse 的外观和感觉，但您自己这样做并非易事。您可以通过更改首选项轻松获得“旧”风格主题（靛蓝），请参阅[此问题](https://stackoverflow.com/questions/11893410/old-style-tabs-in-eclipse-juno)。

以下是其他几个相关的 SO 问题和答案：

*   [Eclipse 4 Juno 主题](https://stackoverflow.com/questions/11980102/eclipse-4-juno-themes)
*   [eclipse Juno 自定义工作台颜色](https://stackoverflow.com/questions/11289312/eclipse-juno-custom-workbench-colors)

# ruby-on-rails - wicked_pdf：ActionView::Template::Error（找不到文件 'twitter/bootstrap'

> ID：12202808
> 
> 赞同：5
> 
> 时间：2012-08-30T18:00:00.860
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, sprockets, wicked-pdf

我们有一些 PDF 生成代码在开发环境中运行良好，但是当我们尝试在生产环境中渲染它时，Rails 显示错误：

```
***************WICKED***************
  Rendered invoices/show.pdf.haml within layouts/invoices_pdf.pdf (8.8ms)
Completed 500 Internal Server Error in 73ms

ActionView::Template::Error (couldn't find file 'twitter/bootstrap' 
```

尝试将 application.css 资产包含在以下内容中失败：

```
!!!
%html
  %head
    %meta{"http-equiv"=>"content-type", :content=>"text/html; charset=utf-8"}
    = wicked_pdf_stylesheet_link_tag "application"

  %body
    .container
      = yield 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:28:01.793

css 文件“twitter/bootstrap.css”在生产中可能不存在，因为 sprockets 会将其编译为 application.css - 然而，在开发中不会出现这种情况，因为 sprockets 默认维护单独的文件。

您是否在代码中专门引用了 twitter/bootstrap.css？如果是这样，更改对 application.css 的引用以进行生产可能会解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T18:11:58.813

`:asset`您的 gemfile 中的组下是否有 less-rails-bootstrap ？如果是这样，请将其从那里移出，它可能会完成这项工作！

# sql-server - 通过本地计算机上的 SQL Server Management Studio 访问 Azure VM 上的 SQL Server

> ID：12202811
> 
> 赞同：8
> 
> 时间：2012-08-30T18:00:13.293
> 
> 标签：sql-server, azure, virtual-machine

我确定这在某个地方，但我找不到它，我的大脑很痛。

我在 Azure 上有一个 VM。它上面运行着 SQL Server。我可以在 VM 上本地访问它没问题，但我想通过 SQL Server Management Studio 从我的开发计算机管理它。

这可能吗？我会使用什么信用？虚拟机登录？

谢谢，R

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T19:17:28.893

您需要完成以下所有操作才能实现您想要的：

*   在端口 1433 上为该 VM 添加 TCP 端点 - 公共和私有（如果愿意，您可以更改公共端口）。
*   将 SQL Server 实例配置为侦听 TCP。
*   在 VM 的本地防火墙规则中启用 incomping TCP 端口 1433。
*   在 SQL Server 上启用混合模式身份验证
*   确保您的 ISP 不会阻止传出端口 1433（自[2003 年以来大多数 ISV 的常见做法 SQL Slammer](http://en.wikipedia.org/wiki/SQL_Slammer)） - 这可以通过您的 TCP 端点的自定义公共端口覆盖。

然后，您将能够使用本地 SSMS 连接到 Azure VM 中的 SQL Server。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-24T19:11:08.833

面对 Azure VM 的这个问题，我无法连接到 SQL 服务器。完成了上面答案中描述的所有步骤，但没有成功..

当我为 TCP/IP 协议设置特定端口时，它开始工作。

因此，打开 SQL Server 配置管理器，为您的实例找到 TCP/IP 协议，打开属性并在 IPAll 部分中将端口设置为 1433。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T13:50:37.357

我有同样的问题，我应该改变的是：点击AzurePortal中的VM --> SQL Server configuration --> Change SQL Connectivity to public

那么它对我有用！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-03-01T07:08:28.953

除了 SSMS，您还可以使用 Powershell 检查与 Azure VM 上的 SQL 服务器的连接。详细的 powershell 脚本位于以下链接 -

[http://sanganakauthority.blogspot.in/2014/02/connecting-to-sql-server-virtual.html](http://sanganakauthority.blogspot.in/2014/02/connecting-to-sql-server-virtual.html)

这使您免于在要连接到 SQL Server 虚拟机的计算机上安装 SSMS。

# javascript - 将响应式 div 高度设置为与其兄弟相同

> ID：12202814
> 
> 赞同：5
> 
> 时间：2012-08-30T18:00:26.583
> 
> 标签：javascript, html, css

我有两个宽度由百分比控制的 div。我希望右边的 div 和左边的 div 一样高，左边的 div 会根据它包含的图像的宽度和浏览器窗口的宽度来扩展和缩小。

有没有办法在没有javascript的情况下完成这个？

[http://jsfiddle.net/5JU2t/](http://jsfiddle.net/5JU2t/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T18:12:37.623

实现这一点的最简单方法是使`.right`div 绝对定位并`top`设置`bottom`为`0`.

只需记住`.main`相对定位父 ( ) div 并删除所有浮动：

```
.right {
    bottom:0;
    position: absolute;
    right:0; 
    top: 0;
}

.main {
    position: relative;
} 
```

**工作示例：http: [//jsfiddle.net/5JU2t/1/](http://jsfiddle.net/5JU2t/1/)**

### 笔记

示例中右列稍长的原因是由于在图像下方添加了空白。如果您只在此列中使用图像，那么您可以添加`float: left`到图像以解决此问题：

**工作示例：http: [//jsfiddle.net/5JU2t/2/](http://jsfiddle.net/5JU2t/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:06:08.110

我会尝试将它包装在第三个 div 中，然后给你的两个 div`height:auto`或者`height: 100%`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T02:34:26.680

将父级 ​​( `.main`) 设置为表格，将子级 ( `.right`, `.left`) 设置为表格单元格。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-08-30T18:10:13.920

我会说放克所有额外的 CSS 并使用表格布局

# python - API 调用在 GAE 上的服务器端非常慢，但在浏览器端却非常快

> ID：12202815
> 
> 赞同：1
> 
> 时间：2012-08-30T18:00:28.580
> 
> 标签：python, api, google-app-engine, jinja2

我这里只有一个简单的问题。我总共对 Twitch TV API 进行了 10 次调用并对它们进行索引，这相当慢（15 秒 - 25 秒慢）。

每当我在浏览器端进行这些调用（即将它们放入我的 url）时，它们的加载速度相当快。由于我在 python 中编码，有什么方法可以使用 jinja2 来获取/索引多个 URL？

如果没有，我还能做些什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:18:02.247

如果您不希望它们不断变化，您可以将结果缓存在 memcache 中，并仅在必要时访问真正的 API。

最重要的是，如果您认为 API 调用是可预测的，您可以使用后端来执行此操作，并将结果缓存（基本上是抓取），这样用户就可以获取缓存的结果，而不必访问真正的 API。

# c# - 控制台窗口关闭时是否可以订阅事件？

> ID：12202817
> 
> 赞同：2
> 
> 时间：2012-08-30T18:00:29.173
> 
> 标签：c#, .net, events, console-application

我有一个控制台应用程序；以下代码块是执行的主要部分：

```
this.service.Start(args);
Console.WriteLine("Service started; press any key to kill.");
Console.WriteLine();
Console.Read();
this.service.Cease(); 
```

这里的关键是在控制台窗口中按下一个键后服务会关闭。但是，如果控制台窗口使用窗口右上角的红色 X 'x'd out，`this.service.Cease()`则永远不会调用。

我尝试连接到`AppDomain.CurrentDomain.ProcessExit`，但它似乎没有用。有没有其他选择，还是我被卡住了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:24:03.167

我听说你可以显示一个隐藏的窗口并使用它的退出消息，但除此之外你被卡住了。您可以使 Ctrl+C 和 Ctrl+Break 正常工作：

```
 using (var waiter = new ManualResetEventSlim())
        {
            Console.TreatControlCAsInput = false;
            Console.CancelKeyPress += (sender, eventArgs) => { waiter.Set(); eventArgs.Cancel = false; };
            Console.WriteLine(@"Press Ctrl+C or Ctrl+Break for a clean exit...");
            waiter.Wait();
            Console.WriteLine("Exiting...");
        } 
```

# c++ - matlab 对于 std::vector ( c++) 的 isempty

> ID：12202820
> 
> 赞同：0
> 
> 时间：2012-08-30T18:00:58.867
> 
> 标签：c++, matlab, stl

实现类似 matlab 的函数来检查 std::vector 是否为空的最有效方法是什么？

这是我正在尝试的示例代码

```
for (int i = 0; i<N; i++) {
    tmp = x[i];
    if ((tmp > max) || (tmp < max)) {
        indexout.push_back(tmp);
    }

    if ((tmp < min) && (tmp > max)) {
        indexin.push_back(tmp);
    }
}

if (isempty(indexin)) {   //heres the part i don't know how to do
    //do something
}
else 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T18:02:28.047

使用[`vector::empty()`](http://www.cplusplus.com/reference/stl/vector/empty/).

```
if(indexin.empty()) {
} 
```

# c# - C# 将静态方法更改为非静态方法

> ID：12202825
> 
> 赞同：1
> 
> 时间：2012-08-30T18:01:14.297
> 
> 标签：c#, plugins, static

我对 C# 很陌生，对处理静态类/方法也很陌生。我正在开发一个以前只是独立的应用程序，现在正在转换为插件应用程序。我有一个插件是全局数据表，另一个插件是一个模型，它使用全局数据表的副本，但可以在运行模型之前进一步操作它。因此，我创建了一个名为 DatasheetControl 的自定义控件。全局数据表插件和建模插件使用控件的实例。我正在修复与从独立数据表到在 2 个不同插件中访问此控件相关的错误。控件用于获取和设置列信息的类。

```
public class dtColumnInformation
{
    //table to operate with
    private DataTable _dt = null;
    //dictionary to hold column info
    private Dictionary<string, bool> dictColstatus = null;
    //class variable
    private static dtColumnInformation dtCI = null;

    // method initializes a datatable cols information structure to all enabled
    public dtColumnInformation(DataTable dt)
    {
        if (dt != null)
        {
            _dt = dt.Copy();
            dictColstatus = new Dictionary<string, bool>();

            for (int c = 0; c < _dt.Columns.Count; c++)
            {
                dictColstatus.Add(_dt.Columns[c].ColumnName.ToString(), true);
            }
        }
    }

    // constructor optionally calls method to init the column information structure
    // and return the itself - singleton
    public static dtColumnInformation getdtCI(DataTable dt, bool init)
    {
        //pass null after initialization to access the DTcolInfo property
        //or pass init=true (after import) to initialize
        if (dtCI == null || init) dtCI = new dtColumnInformation(dt);
        return dtCI;
    }

    // method returns the enable/disable status of the column name (key)
    public bool getColStatus(string key)
    {
        //returns the status of a row
        bool boolStatus;
        dictColstatus.TryGetValue(key, out boolStatus);
        return boolStatus;
    }

    // method to set a table column to enable/disable
    public void setColStatus(string key, bool val)
    {
        //sets the status of a column
        dictColstatus[key] = val;
    }

    // property - structure to return column status of all columns in table...
    public Dictionary<string, bool> DTColInfo
    {
        //returns a col-status dictionary for all cols in the datatable
        set { dictColstatus = value; }
        get { return dictColstatus; }
    } 
```

这在一些位置（包括全局数据表插件）中使用，调用类似于以下内容：

```
//(builds dictionary of keys, <string>datetime and values <bool>enabled/disabled col)
dsControl1.DTCI = VBCommon.Metadata.dtColumnInformation.getdtCI(dsControl1.DT, true); 
```

所以，我开始明白为什么这不起作用。当我在全局数据表和模型之间来回切换时，dictColStatus 并没有维护每个单独的状态。当我右键单击 col 标题并想要选择是启用禁用的 col 还是禁用它时，这就会发挥作用。此函数的方法查看 dictColStatus 中的内容，以决定在右键单击菜单中填充哪些选项。

我需要将此 dtColumnInformation 类中的静态内容更改为不是静态的，以便维护控件的每个实例。我知道我需要通过实例化 dtColumnInformation 类的实例来做一些事情。但是

```
private static dtColumnInformation dtCI = null; 
```

和

```
public static dtColumnInformation getdtCI(DataTable dt, bool init) 
```

把我甩了。我不太清楚他们在做什么以及如何在我的课程中进行更改以不使用静态的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:11:14.663

getDtCI() 只是一个使用单值缓存的初始化程序。如果静态字段尚未初始化，则将其初始化并返回静态字段中的值。如果传入的 init 参数为真，那么它将为静态字段初始化一个新值并返回该值。静态字段的先前值被丢弃。使用 init=false 多次调用 getdtCI() 将返回相同的 dtColumnInformation 实例。这个单值缓存可能是为了为需要大量请求和/或构建成本高昂的东西节省内存。

如果您想拥有多个具有独立 dtColumnInformation 对象的容器，则必须以某种方式对其进行更改。最简单的方法是完全消除单项缓存 - 更改 getdtCI() 以始终创建 dtColumnInformation 的新实例。查看对 getdtCI() 的引用以调查代码影响。如果构造 dtColumnInformation 不需要大量时间或内存，并且代码没有调用 getdtCI() 数百万次，那么您可能完全消除静态缓存并始终构造新的 dtColumnInformation 实例。

如果总是构造一个新的 dtColumnInformation 花费太多时间或确实消耗大量内存，您也许可以将单项缓存存储位置从 dtColumnInformation 类移到使用 dtColumnInformation 实例的容器类中。也许那是您的 DatasheetControl。最直接的方法是将静态字段和 getdtCI() 静态方法移动到容器类中。

如果您遇到调用 getdtCI() 且无法访问容器类的代码，那么您将无法使用这个简单的解决方案。超出这一点，它变得非常丑陋。:P

# python - python内置的垃圾收集 - 总和

> ID：12202827
> 
> 赞同：2
> 
> 时间：2012-08-30T18:01:27.750
> 
> 标签：python, garbage-collection

当我尝试在 python 解释器中运行以下代码时，它给了我一个明显的 MemoryError，因为我正在运行一个无限循环以检查内存使用情况。

```
def a():
 i=2
 while True:
  yield i
  i*=i

print sum(a()) 
```

当我运行这段代码时，我可以看到 python 的内存使用量在增长。但是，当我收到 MemoryError 时，我可以看到 python 解释器进程仍然持有大约 200 MB 的内存，即使 sum 函数不再在解释器中运行。我的问题是：python 的内置函数是否不应该非常高效，即使在垃圾收集方面也是如此？内置程序不应该将垃圾收集的责任交给用户，而不是清理自己的混乱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:22:31.857

如果 python 内置有内存泄漏，它是一个错误。

然而，仅仅因为 python 仍然持有内存并不意味着存在内存泄漏。Python 有各种有趣的分配技巧，因此它可能会保留您的内存以备将来使用。所以你不能简单地在任务管理器中查看 python 是否正确处理内存。

要检查实际的内存泄漏，一种技术是重复运行您的代码。如果它是真正的内存泄漏，则每次运行它时都应该丢失内存。如果它是幻像内存泄漏，内存实际上将被第二次重用，并且您不会丢失任何内存。

我在我的 Linux 机器上运行了你的代码，虽然我确实发现它在运行该循环一段时间而不是之前使用了更多的内存，但再次运行它并没有使用额外的内存，实际上一些内存“丢失”在第一次运行中似乎恢复了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T12:09:05.620

[免费列表](http://docs.python.org/library/gc.html)上关于 GC 的 Python 文档：

> 由于特定的实现，尤其是 int 和 float，并非某些空闲列表中的所有项目都可能被释放。

因此，通过生成器分配一个无穷大的整数会吃掉你所有的内存（直到接收到内存错误），而并不是所有的项目都可以按照上面的定义被释放。

但那段记忆就这样消失了吗？不，环境会保留它以供您的代码重用。垃圾收集“高效”并不意味着它会在对象离开范围的那一刻进行回收。它也可能意味着“让我们继续使用刚刚使用的内存，也许这段愚蠢的代码会想要再次使用它。”

或者正如[Effbot](http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm)告诉我们的那样：

> 返回给给定分配器的内存将被该分配器重用，即使它没有返回给系统。

您*可以* [强制进行 GC 收集](http://docs.python.org/library/gc.html?highlight=gc.collect#gc.collect)，但这实际上可能会影响性能，除非您知道原因并且有非常非常好的理由强制它。

```
gc.collect([generation])
With no arguments, run a full collection. The optional argument generation may be an integer specifying which generation to collect (from 0 to 2). A ValueError is raised if the generation number is invalid. The number of unreachable objects found is returned.

Changed in version 2.5: The optional generation argument was added.

Changed in version 2.6: The free lists maintained for a number of built-in types are cleared whenever a full collection or collection of the highest generation (2) is run. Not all items in some free lists may be freed due to the particular implementation, in particular int and float. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:47:24.147

`sum`这与、 生成器或垃圾收集器的实现无关。

您看到的内存使用量不断增长是保持`i`. `i`Python 支持任意大的整数，并且每次迭代存储双倍所需的位数。如果你改变你的改变你的生成器功能是：

```
def a():
    i=2
    while True:
        yield i
        i += 1 
```

你会看到内存占用是稳定的。

# java - BeanFactory not initialized or already closed

> ID：12202832
> 
> 赞同：1
> 
> 时间：2012-08-30T18:01:51.587
> 
> 标签：java, eclipse, spring-mvc, spring-security, tomcat6

Sorry for my English. I use `Eclipse 3.7`, that runs web-app (`spring-mvc` + `spring-secirity`) on `tomcat6`, but happens next error:

```
java.lang.IllegalStateException: BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext
    at org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:172)
    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1071)
    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1045)
    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:993)
    at org.springframework.web.context.ContextLoader.closeWebApplicationContext(ContextLoader.java:548)
    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:142)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4245)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4886)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4750)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

Can anyone help me please?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:03:20.917

I have seen this stacktrace before when working on a project that uses `Spring 3.0.6` and runs in `JBoss`.

When I have seen this, it was inevitably in conjunction with database connectivity or permission issues.

Here is another developer who encountered this issue and it was also related to communication with the database: [How can I cope with “IllegalStateException: BeanFactory not initialized or already closed”?](https://stackoverflow.com/a/7152318/463196)

There is another developer on this thread who commented that he had a similar exception, and his was caused by a bad Spring Security configuration file.

Also, you may want to check into where you have placed the Spring JARs. Here is a relevant post: [Spring Tomcat issue](https://stackoverflow.com/questions/10755516/spring-tomcat-issue).

Finally, there are certain versions of application servers where this error could be caused by a bug in the application server. Here is a post on [SpringSource forums regarding a bug in Weblogic 9.2 MP2](http://forum.springsource.org/showthread.php?47145-BeanFactory-not-initialized-or-already-closed-call-refresh-before-accessing-beans&s=e077b42fd45ae3a3177a01c90339893c). Here is another post [regarding a bug in a particular version of jbossws](https://issues.jboss.org/browse/JBWS-2527).

Good luck, hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-02T13:59:37.623

The above mentioned solution is the exact accurate solution. But sometimes there are same issues related `BeanFactory not initialized or already closed` ...still persist after applying solution. In that case you should try to clean your tomcat directory. Delete your target folder and rebuild your artefact.

This solution is for most rare BeanFactory issues but less in frequency which can be resolved by following the way I mentioned.

# java - Android Tabs + Sliding，如何实现ActionBarSherlock？

> ID：12202834
> 
> 赞同：6
> 
> 时间：2012-08-30T18:02:08.333
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我正在使用 Google 的新工具来启动一个能够在三个选项卡之间切换的应用程序。

![在此处输入图像描述](../Images/e458c64f2e63967533a9fb1746a3ee7f.png)

这很棒，但缺乏对旧设备的支持。

**1.**我在应用程序中添加了带有支持库的ABS。

**2.**`public class MainActivity extends FragmentActivity implements ActionBar.TabListener {`我改成`public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener {`

**3.**我仍然有很多错误，我什至不知道这是否能在旧设备上正常工作。有人对如何实现与 2.x 及更高版本兼容的滑动选项卡有任何提示吗？

![在此处输入图像描述](../Images/aa564bb5695e2ba60fc74183eedea4da.png)

## 更新：

我被困在alextsc答案的第6步 ![在此处输入图像描述](../Images/603545a795d1541427d39b6cf38dd93a.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T18:42:42.487

我试过这个向导一次，我想当我用 ActionBarSherlock 实现这个确切的模式时，我完全丢弃了生成的代码，所以我建议你从头开始一个正常的“空白”活动。这是一个小的分步指南。并非所有步骤都被完整描述，但您应该找到足够的包含关键字的文档来开始。

**1）将 ActionBarSherlock 添加到您的项目中（显然）**

**2）创建一个扩展`SherlockFragmentActivity`并设置适当的abs主题的新活动**

此时您应该有一个带有操作栏的空白活动。

**3) 更改布局并包含一个填充视口的 ViewPager**

**4）写你的片段（或占位符）和 ViewPager 的适配器，将它们连接在一起**

有很多教程可以解释这里的所有必要内容，例如[这篇博](http://android-developers.blogspot.de/2011/08/horizontal-view-swiping-with-viewpager.html)文。

这应该为您提供一个带有操作栏和可滑动布局的活动。您现在可以在片段之间滑动。

**5）添加操作栏选项卡并为其附加一个空白选项卡侦听器**

例子：

```
actionBar = getSupportActionBar();

sampleTab = actionBar.newTab()
    .setText(R.string.title)
    .setTag(TABTAG_SAMPLE)
    .setTabListener(tabListener);

actionBar.addTab(sampleTab); 
```

确保给每个选项卡一个单独的标签（字符串 const 很好）。这将用于识别在一秒钟内单击了哪个选项卡。还要确保将创建的选项卡实例保存在类变量中。稍后您将需要它们。对每个选项卡重复上述代码段。您可以使用普通的 TabListener，但我建议您使用 SimpleTabListener，因为您以后只需要覆盖一个方法。

现在您应该有一个带有操作栏、可滑动片段和（非功能性）选项卡的活动。

**6）填充选项卡侦听器并将其连接到viewpager**

```
private SimpleTabListener tabListener = new SimpleTabListener() {

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        final String tag = (String) tab.getTag();

        if (TABTAG_SAMPLE.equals(tag)) {
            viewPager.setCurrentItem(INDEX_SAMPLE);
        } else if (TABTAG_SECONDTAB.equals(tag)) {
            viewPager.setCurrentItem(INDEX_SECONDFRAGMENT);
        }
    }
}; 
```

这应该很简单。您侦听选项卡选择事件，通过保存的标记检查选择了哪个选项卡，并`setCurrentItem()`使用与某个选项卡关联的片段的索引调用 viewpagers 方法。

现在您应该能够通过选项卡选择片段以及左右滑动。您会注意到滑动到某个片段不会相应地同步选项卡，它们不会被正确选择。

**7) 将 OnPageChangeListener 附加到您的 ViewPager 并相应地选择选项卡**

同样，您也可以在此处使用 SimpleOnPageChangeListener 而不是接口。简短的例子：

```
private SimpleOnPageChangeListener onPageChangeListener 
        = new SimpleOnPageChangeListener() {

    @Override
    public void onPageSelected(int position) {
        switch (position) {
        case INDEX_SAMPLE:
            actionBar.selectTab(sampleTab);
            break;

        case INDEX_SECONDFRAGMENT:
            actionBar.selectTab(secondTab);
            break;
        }
    };
}; 
```

这也应该是不言自明的。您注意更改显示片段的滑动操作，检查它的索引并选择适当的选项卡。您在这里看到了为什么必须保留步骤 5 中的选项卡实例，您需要它们来选择一个选项卡。

现在一切都应该正常了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T16:55:05.067

完全相同的过程对我有用。我删除了所有导入，然后按 ctrl+shift+o 并选择了兼容性类。它工作得非常好。看[这里](http://android.amolgupta.in/2013/01/backward-compatibility-super-quick.html)的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:21:51.700

我已经使用 actionbar sherlock 实现了非常复杂的应用程序。它在我测试过的 2.2 到 ICS 设备上运行良好。我还使用了标签，一切正常。我后来将其更改为导航列表，因为应该有 6 个选项卡。尝试从操作栏包含的演示开始。这个错误可能是一些类路径问题。您需要将 sherlock 添加为 lib 项目，并且支持库必须包含在 sherlock lib 项目和您的项目中。还要检查两个支持库是否必须具有相同的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:25:35.157

我建议看一下[ViewPagerIndicator](http://viewpagerindicator.com/)它与 ActionBarSherlock 和兼容性库一起使用，我目前有一个应用程序使用它在 2.2 及更高版本上滑动标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:42:46.497

我无法添加评论，所以这是我对 ViewPagerIndicator 的评论。我已经习惯了，但是当我开始使用加载器加载数据和片段适配器时，有时会出现奇怪的问题，当新数据到来时，方向发生了变化......但是使用带有 actionbarsherlock ViewPagerIndicator 的选项卡是没有必要的。

# java - 如何绑定命令对象（Spring MVC）中的枚举列表？

> ID：12202837
> 
> 赞同：0
> 
> 时间：2012-08-30T18:02:16.690
> 
> 标签：java, jsp, spring-mvc

这是我的简单测试类（命令对象类）

```
public class Test {
private List<MyEnum> list;

//setters and getters
} 
```

这是部分 od JSP 页面：

```
<form:form ......>
<form:select multiple="true" path="list" items="enumvalues">
</form:form> 
```

我想将 jsp 列表中的所有选定项目绑定到我的命令对象列表。做这个的最好方式是什么？我知道，我需要编写一些自定义编辑器，但经过一些测试，我不知道如何实现。

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:36:56.207

如果您在 JSP 中具有适当的访问权限`list`，则应该可以：

```
<form:form ...>
  <form:select multiple="true" path="list">
    <form:options />
  </form:select>
</form:form> 
```

PS如果你想`options`有不同的可读名称而不是值，只需覆盖枚举值`toString()`，Spring MVC 会神奇地使用它作为描述。

# html - 文本区域内的样式文本

> ID：12202844
> 
> 赞同：9
> 
> 时间：2012-08-30T18:02:29.893
> 
> 标签：html, css, textarea, margin

我正在以这种形式工作，其设计完全像这样：

![在此处输入图像描述](../Images/f551a97659a48a94ba85730961eb5a49.png)

现在我正处于这个阶段，所以要处理一些小细节： ![在此处输入图像描述](../Images/e7e8eb238eaa8f653312da8d01d6e352.png)

正如您将看到的那样，“您的文本...”粘贴在文本区域的左上角。如果可能的话，我正试图找到一种通过 CSS 来操作它的方法。我只需要对文本区域内的文本应用一些边距/填充。如果 CSS 无法做到这一点，我愿意接受建议。

如何通过 CSS 操作 textarea 中的文本？？？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-30T18:04:32.273

您可以使用 CSS`padding`属性：

```
textarea {
    padding: 5px;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-01-30T00:51:56.043

```
textarea {
padding: 5px;
box-sizing: border-box;
} 
```

注意： box-sizing 是 CSS3 属性。它非常有用，因为没有它 width: 100% 或 other 将无法按您的预期工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-30T18:05:48.480

您可以使用 CSS 创建所需的效果

```
textarea {
  padding: 20px;
  margin: 10px;
}
```

```
<textarea></textarea>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-12T04:57:49.397

您可以使用以下代码：

```
line-height: _px; 
```

把 textarea 的高度值相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T21:54:04.993

是的，来自 CSS 的填充应用于 textarea 是正确的。但是随着整个文本区域的尺寸发生变化，您需要更改“行”和“列”。

谢谢！

丹妮

# python - python/numpy：numpy linal.eig 的问题

> ID：12202845
> 
> 赞同：0
> 
> 时间：2012-08-30T18:02:45.417
> 
> 标签：python, numpy, linear-algebra

我刚刚发现 numpy linalg.eig 算法的这种非常奇怪的行为。

如果运行

```
>>> import numpy as np
>>> a = np.array([[1., 0., 0., 0., 0., 0., 0., 0.],
... [0., -1., -0.5, 0., -0.5, 0., 0., 0.], 
... [0., -0.5, 0., 0., 0., 0., 0., 0.], 
... [0., 0., 0., 0., 0., 0., -0.5, 0.], 
... [0., -0.5, 0., 0., 0., 0., 0., 0.], 
... [0., 0., 0., 0., 0., 0., -0.5, 0.],  
... [0., 0., 0., -0.5, 0., -0.5, -1., 0.], 
... [0., 0., 0., 0., 0., 0., 0., 1.]])
>>> np.linalg.eig(a)
(array([-1.366,  0.366, -1.366,  0.366,  0\.   ,  0\.   ,  1\.   ,  1\.   ]),
array([[ 0\.   ,  0\.   ,  0\.   ,  0\.   ,  0\.   ,  0\.   ,  1\.   ,  0\.   ],
   [-0\.   ,  0\.   , -0.822,  0.426,  0\.   ,  0\.   ,  0\.   ,  0\.   ],
   [ 0\.   ,  0\.   , -0.301, -0.581,  0.13 ,  0\.   ,  0\.   ,  0\.   ],
   [-0.325, -0.628, -0.123, -0.237, -0.695, -0.707,  0\.   ,  0\.   ],
   [ 0\.   ,  0\.   , -0.301, -0.581, -0.13 , -0\.   ,  0\.   ,  0\.   ],
   [-0.325, -0.628, -0.123, -0.237,  0.695,  0.707,  0\.   ,  0\.   ],
   [-0.888,  0.46 , -0.336,  0.174, -0\.   , -0\.   ,  0\.   ,  0\.   ],
   [ 0\.   ,  0\.   ,  0\.   ,  0\.   ,  0\.   ,  0\.   ,  0\.   ,  1\.   ]])) 
```

我得到了上面显示的错误特征向量（在列中）。

正确答案由

```
>>> np.linalg.eigh(a)
(array([-1.366, -1.366, -0\.   ,  0\.   ,  0.366,  0.366,  1\.   ,  1\.   ]),
 array([[-0\.   ,  0\.   ,  0\.   ,  0\.   ,  0\.   , -0\.   ,  1\.   ,  0\.   ],
   [-0\.   , -0.888,  0\.   ,  0\.   ,  0\.   , -0.46 ,  0\.   ,  0\.   ],
   [-0\.   , -0.325,  0\.   , -0.707,  0\.   ,  0.628,  0\.   ,  0\.   ],
   [-0.325,  0\.   , -0.707,  0\.   , -0.628, -0\.   ,  0\.   ,  0\.   ],
   [ 0\.   , -0.325,  0\.   ,  0.707,  0\.   ,  0.628,  0\.   ,  0\.   ],
   [-0.325,  0\.   ,  0.707,  0\.   , -0.628, -0\.   ,  0\.   ,  0\.   ],
   [-0.888,  0\.   ,  0\.   ,  0\.   ,  0.46 , -0\.   ,  0\.   ,  0\.   ],
   [-0\.   ,  0\.   ,  0\.   ,  0\.   ,  0\.   , -0\.   ,  0\.   ,  1\.   ]])) 
```

我真的很惊讶 eig 算法不能对角化这样一个简单的矩阵！

我应该报告这种行为吗？

**编辑**

numpy 版本 1.6.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:16:28.207

这里显示的所有结果都是正确的。

因为您的矩阵有两个 2D 子空间，其特征值 = -1.366 和 0.366。对于 2D 子空间，您可以选择线性独立特征向量的不同线性组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:19:18.140

在我看来一切都很好：

```
import numpy as np

a = np.array([[1., 0., 0., 0., 0., 0., 0., 0.],
              [0., -1., -0.5, 0., -0.5, 0., 0., 0.], 
              [0., -0.5, 0., 0., 0., 0., 0., 0.], 
              [0., 0., 0., 0., 0., 0., -0.5, 0.], 
              [0., -0.5, 0., 0., 0., 0., 0., 0.], 
              [0., 0., 0., 0., 0., 0., -0.5, 0.],  
              [0., 0., 0., -0.5, 0., -0.5, -1., 0.], 
              [0., 0., 0., 0., 0., 0., 0., 1.]])

fns = np.linalg.eig, np.linalg.eigh
for fn in fns:
    print fn
    ww, vv = fn(a)
    for i in range(len(ww)):
        w = ww[i]
        v = vv[:,i]
        print i, np.allclose(np.dot(a, v),w*v),
    print 
```

生产

```
<function eig at 0xb5b570d4>
0 True 1 True 2 True 3 True 4 True 5 True 6 True 7 True
<function eigh at 0xb5b5710c>
0 True 1 True 2 True 3 True 4 True 5 True 6 True 7 True 
```

# python - 记住用于分页的表单数据

> ID：12202852
> 
> 赞同：6
> 
> 时间：2012-08-30T18:03:15.957
> 
> 标签：python, pagination, flask, template-engine, flask-sqlalchemy

在我的 Flask 应用程序中，我有一个使用 Flask-SQLAlchemy 分页方法呈现项目表的视图。到目前为止很棒的东西。但是我想添加排序和过滤，所以我创建了一个带有选择框的表单，用户可以在其中选择排序和过滤选项。

在页面上提交排序/过滤器时，视图工作正常：第一页已排序。但是在页面上选择另一个页面，分页正在回退到原始查询。在新页面加载期间，我应该怎么做才能保存我的排序/过滤选项？使用`flask.g`已经出现在我身上，但它是正确的方法吗？

```
class ItemTableForm(Form):
    sort_choices = [('id', 'ID'),
                    ('name', 'Name'),
                    ('status', 'Status')]
    filter_choices = [('all', 'All'),
                      ('instock', 'In stock'),
                      ('sold', 'Sold')]
    sort = SelectField(u'Sort by', choices=sort_choices)
    filter = SelectField(u'Filter by', choices=filter_choices)

@app.route('/browse/<int:page>', methods=("GET", "POST"))
def browse(page):
    form = ItemTableForm()
    if form.validate_on_submit():
        query = Item.query.order_by(getattr(Item, form.sort.data))
    else:
        query = Item.query

    pagination = paginate(query, page)
    return render_template('browse.html', pagination=pagination, form=form)

# My template contains this form and a regular HTML table
<form action="{{ url_for('browse') }}" method="POST">
  {{ form.hidden_tag() }}
  {{ form.sort.label }} {{ form.sort() }}
  {{ form.filter.label }} {{ form.filter() }}
  <button type="submit" class="btn">Submit</button>
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T08:38:38.500

您可以使用 url 参数来传递有关排序的信息。假设用户选择按名称排序。然后在url末尾添加这个

```
 your_url?sort=name 
```

然后你可以访问它

```
 value = request.args.get('name','') 
```

只需将排序变量值传递给您将排序值附加到下一个 url 的模板。

编辑：

要在 Flask 中创建这样的 url，请执行以下操作：

```
 url_for('url_view_name', sort='name') 
```

这将返回带有排序附加作为查询参数的 url。[在此处](http://flask.pocoo.org/docs/quickstart/#url-building)查看烧瓶文档以了解有关 url 构建的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:17:33.230

你可以用 Javascript 做到这一点。由于页码是您的 URL 的一部分，因此您可以让 javascript 更改`action`表单的更改页面以提交到具有所需页码而不是当前页面的 URL。

澄清一下，当用户单击“下一步”链接/按钮或页码时，使用 Javascript 更改 html 表单的操作，以便将表单发布到所需页面而不是当前页面。

# html - HTML5 数据值属性的最佳位置？

> ID：12202859
> 
> 赞同：1
> 
> 时间：2012-08-30T18:03:45.523
> 
> 标签：html

我有以下 HTML：

```
<ul class='dropSelect'>
    <li data-value="one">
        <span>Menu1</span>
    </li>
    <li data-value="two">
        <span>Menu2</span>
    </li>
    <li data-value="three">
        <span>Menu3</span>
    </li>
</ul> 
```

`li`我的问题是：将 data-value 属性放在实际菜单项文本旁边的跨度上是更好的做法，还是像我所做的那样放在父元素上一样好？此属性将从 Web 服务接收数据，我正在使用一些 js 来获取此属性的值并将其放置在页面上的另一个元素中。

SOF 在发布这个问题时警告我，它可能过于主观......而且可能......但我关心的是了解我的这个属性的放置可能会对 UI 工程、javascript DOM 操作产生什么影响（如果有的话），可访问性等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:17:01.407

从广义上讲，我建议将数据存储在最接近映射到数据“父级”或“所有者”的元素上。这一切都与传达最有意义的东西有关。

例如，如果您在 html 中表示“人员”列表，那么

```
<ul>
    <li class="person">Tim Bresnan</li>
    <li class="person">Joe Root</li>
</ul> 
```

如果您希望关联出生日期*而不*显示它，请将其放在`li`代表此人的项目上。

```
$('.person').data('dob'); 
```

但是，如果您对一个人的 html 表示更复杂，请说

```
<ul>
    <li class="person">
        <div class="name">Tim Bresnan</div>
        <div class="dob">28th Feb 1985</div>
    </li>
    <li class="person">
        <div class="name">Joe Root</div>
        <div class="dob">30th Dec 1990</div>
    </li>
</ul> 
```

您可能希望将 ISO8601 日期时间表示作为`dob`类元素的数据。

```
$('.person .dob').data('dob'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:12:11.060

尽管 html5 数据属性是主观的，并且可以随时随地使用，但我假设您正在根据您的情况查找这些元素。在您的情况下，出于几个原因，我会将它们放在与您相同的位置。

*   这是顶层（子级），因此很容易通过 data 属性将它们全部抓取。 `$('li[data-value]')`

*   在某些时候，你可能在 each 里面有更多`<li>`，现在它可能只是，`<span>`但是通过让 list-item 保存数据值，你可以轻松地在其中获取其他 DOM 元素。如果您将它放在跨度内，则必须将其升级到列表项，然后 .find() 任何您想要的元素。

如果您的*跨度*持有数据值：

`$('[data-value="whatever"]').closest('li').find('.someOtherThing');`

相反，现在您不必为 parent 进行无意义的查找`<li>`！

`$('[data-value="whatever"]').find('.someOtherThing');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:13:43.467

我想说将数据值放在列表中的范围内。我认为最好将数据属性放在最接近它所影响的字符串的位置，在这种情况下是跨度。

另一方面，这段 jQuery 工作正常：

```
$(document).ready( function() {
    $("li").click(function(){
       var txt = $(this).text();
       $("#mydiv").text(txt);
    });
}); 
```

有了这个，我在 jsFiddle (http://jsfiddle.net/YqePE/) 中测试了点击一个 li，可以返回它的文本值，所以它也会返回你在那个 li 中的任何数据属性。

但是，如果通过某种奇怪的 CSS 构成，这可能会产生不受欢迎的结果，当你认为你没有点击某个 LI 时，浏览器会认为你点击了。为了防止这种情况，您需要使跨度保持数据属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:15:03.107

从看起来你正在尝试做的事情来看。你可以使用 jQuery 的[`.index()`](http://api.jquery.com/index/). （是的，我知道它没有标记 jQuery）

```
$('ul.dropSelect > li').each(function(){
  var i = $(this).index();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:17:52.510

不必为此信息使用数据属性。

尝试使用 CSS 或 jQuery 的伪类选择器来绑定特定项：

CSS：

```
.dropSelect li:nth-child(1) {
  // First <li>
} 
```

或 jQuery：

```
// Second <li>
$('.dropSelect li').eq(1) 
```

演示：http: [//jsfiddle.net/wYpK6/](http://jsfiddle.net/wYpK6/)

# gdb - 使用 gdb 调试程序集，如何跳过调用

> ID：12202860
> 
> 赞同：1
> 
> 时间：2012-08-30T18:03:45.790
> 
> 标签：gdb

我正在调试汇编代码。我使用 stepi，但它会进入被调用者。当源代码可用时，如何像使用“n”一样跳过调用指令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:40:41.030

很简单：`nexti`就是`stepi`原样`next``step`

# ruby-on-rails - FactoryGirl、Rspec、let 和之前的问题

> ID：12202861
> 
> 赞同：16
> 
> 时间：2012-08-30T18:03:50.323
> 
> 标签：ruby-on-rails, rspec

我是第一次使用其中一些工具。我已经阅读了文档，但想在这里确切地问一下我想要实现的目标。

我有一组用户，我想测试我可以在控制器规范中执行的一些操作。创建每个用户时，都会发生一组回调以创建关联的对象。

我想访问这些用户实例和该 ActiveRecord 类的关联对象。例如，一个用户将有一组列表，所以我希望能够调用 user1.lists 例如。

另外，我想在顶部隔离此设置并使用 let's 或 a before black。似乎只是像这样调用 let ：

```
# will test that get_count_for_list will return 5
describe ApiController do

  # why same name - seems really confusing!
  let(:user) { FactoryGirl.create(:user) }
  let(:user2) { FactoryGirl.create(:user2) } 
```

不调用关联的回调。它是否正确？还是可能是时间问题？

我喜欢使用 let 的语法，并且能够访问我的 ExampleGroups 中的这些对象，例如 user.id，但不能访问 user.lists。目前我正在做类似的事情：

```
# will test that get_count_for_list will return 5

describe ApiController do

  # why same name - seems really confusing!
  let(:user) { FactoryGirl.create(:user) }
  let(:user2) { FactoryGirl.create(:user2) }
  let(:user3) { FactoryGirl.create(:user3) }

  before do
    FactoryGirl.create(:user2)
    FactoryGirl.create(:user3)
  end 
```

但觉得必须有更好的方法。我是否两次创建这些用户？

谢谢

## 编辑 1

我在这里隔离了有问题的代码。global_id 值是通过回调创建的。它正确存在于数据库中，可以通过相应的 find_by_email 访问，但使用 user2 var 不提供访问权限。

```
require 'spec_helper'

# will test that get_count_for_list will return 5
describe ApiController do
  # why same name - seems really confusing!
  let!(:user) { FactoryGirl.create(:user) }
  let!(:user2) { FactoryGirl.create(:user2) }
  let!(:user3) { FactoryGirl.create(:user3) }

  before do
    session[:user_id]=user.id # works
  end

  describe 'FOLLOW / UNFOLLOW options' do
    it 'shall test the ability to follow another user' do
      puts "user1: " + user.global_id.to_s # doesn't output anything
      u2=User.find_by_email('jo@jo.com') # corresponds to user2
      post :follow, :global_id => user2.global_id # doesn't work
      #post :follow, :global_id => u2.global_id  #works

      u3=User.find_by_email('su@su.com')
      puts "user_3" + u3.global_id.to_s # outputs correct value

      post :follow, :global_id => user3.global_id  #doesn't work
      #post :follow, :global_id => u3.global_id # works

      post :unfollow, :global_id => user.following.sample(1)
      response.code.should eq('200')
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-30T18:17:52.373

检查 rspec 文档：[https ://www.relishapp.com/rspec/rspec-core/v/2-11/docs/helper-methods/let-and-let](https://www.relishapp.com/rspec/rspec-core/v/2-11/docs/helper-methods/let-and-let)

注意 let 是惰性求值的：直到它定义的方法第一次被调用时才会求值。你可以使用让！在每个示例之前强制调用方法。

换句话说，如果您使用`let`的`factory_girl`记录将不会在 let-variable 调用之前创建。

正确的代码是：

```
# will test that get_count_for_list will return 5
describe ApiController do

  # why same name - seems really confusing!
  let!(:user) { FactoryGirl.create(:user) }
  let!(:user2) { FactoryGirl.create(:user2) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T21:35:15.887

我刚刚解决了一个类似的听起来问题。我的用户身份验证规范没有使用“让”通过。

我破碎的规格：

```
describe "signin" do
  before { visit signin_path }

  describe "with valid information", :js => true do
    let(:user) { FactoryGirl.create(:user) }
    before do
      fill_in "email", with: user.email
      fill_in "password", with: user.password
      click_button "Log In"
    end
    it { should have_selector('a', text: "#{user.first} #{user.last}") }
  end
end 
```

这是行不通的。当我的会话控制器尝试对其进行身份验证时，登录身份验证失败，就好像用户记录实际上不在数据库中一样。我尝试用 let 替换 let！但这并没有解决任何问题。阅读这篇文章，以及上面解释 let 和 let 的链接！我意识到我不应该在这个规范中使用 let。现在我有一个合格的规格：

```
describe "signin" do
  before { visit signin_path }

  describe "with valid information", :js => true do
    user = FactoryGirl.create(:user)
    before do
      fill_in "email", with: user.email
      fill_in "password", with: user.password
      click_button "Log In"
    end
    it { should have_selector('a', text: "#{user.first} #{user.last}") }
  end
end 
```

# javascript - 显示/隐藏不会加载

> ID：12202867
> 
> 赞同：0
> 
> 时间：2012-08-30T18:04:00.533
> 
> 标签：javascript, html, css

单击“查看更多”时，文本不会展开。怎么会？谢谢

**HTML**：

```
<div id="wrap">
      <h1>Show/Hide Content</h1>
      <p>
          This example shows you how to create a show/hide container using a 
          couple of links, a div, a few lines of CSS, and some JavaScript to 
          manipulate our CSS. Just click on the "see more" link at the end of 
          this paragraph to see the technique in action, and be sure to view the 
          source to see how it all works together. 
          <a href="#" id="example-show" class="showLink"
              onclick="showHide('example');return false;">
              See more.
          </a>
      </p>
      <div id="example" class="more">
         <p>
             Congratulations! You've found the magic hidden text! Clicking the 
             link below will hide this content again.
         </p>
         <p>
             <a href="#" id="example-hide" class="hideLink"
                 onclick="showHide('example');return false;">
                 Hide this content.
             </a>
         </p>
      </div>
   </div>​ 
```

**Javascript**：

```
function showHide(shID) {
   if (document.getElementById(shID)) {
      if (document.getElementById(shID).style.display != 'none') {
         document.getElementById(shID).style.display = 'none';
      }
      else {
         document.getElementById(shID).style.display = 'block';
      }
   }
} 
```

**CSS**：

```
body {
    font-size: 62.5%;
    background-color: #777; 
}
#wrap {
    font: 1.3em/1.3 Arial, Helvetica, sans-serif;
    width: 30em;
    margin: 0 auto;
    padding: 1em;
    background-color: #fff; 
}
h1 {
    font-size: 200%; 
}
/* This CSS is used for the Show/Hide functionality. */
.more {
    display: none;
    border-top: 1px solid #666;
    border-bottom: 1px solid #666; 
}
a.showLink, a.hideLink {
    text-decoration: none;
    color: #36f;
    padding-left: 8px;
    background: transparent url(down.gif) no-repeat left; 
}
a.hideLink {
    background: transparent url(up.gif) no-repeat left; 
}
a.showLink:hover, a.hideLink:hover {
    border-bottom: 1px dotted #36f; 
}​ 
```

[现场演示](http://jsfiddle.net/EMEL6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:06:39.063

您正在`showHide`从 HTML 窗口调用，但`showHide`尚未定义。只需将该`showHide`函数包含`<script>`在 HTML 窗口中的一个块中，它就会起作用。请参阅我的 jsfiddle：http: [//jsfiddle.net/HGbSX/1/](http://jsfiddle.net/HGbSX/1/)

必须单击两次才能显示附加内容的附加问题与您的逻辑有关。第一次通过时，该元素的显示未设置`none`为您所期望的，而是设置为空字符串，因此它重新隐藏了它。您可以通过颠倒您的逻辑并寻找`display='block'`. 请参阅我的 jsfiddle：http: [//jsfiddle.net/HGbSX/2/](http://jsfiddle.net/HGbSX/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:12:54.290

代码正确；它不起作用的原因是您设置 jsfiddle 的方式。在右侧它要求一个框架/你希望你的 JS 出现的地方，你有 jQuery 和 onLoad（我相信默认值） - 这使得你的小提琴的结果代码看起来像这样：

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
function showHide(shID) {
   if (document.getElementById(shID)) {
      if (document.getElementById(shID).style.display != 'none') {
         document.getElementById(shID).style.display = 'none';
      }
      else {
         document.getElementById(shID).style.display = 'block';
      }
   }
}

});//]]> 
```

这意味着您在 jQuery 的 load 事件的匿名函数中定义 showHide。如果您将第一个下拉列表更改为“不换行（头部）”，它将单独保留您的 JavaScript，并且您的 onclick 将能够看到定义的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T18:17:24.407

我已经纠正了一个小错误，它需要单击 2 次才能开始运行。刚刚替换 != 'none' 已替换为 == 'block'。此外，在 JSFiddle 中，您在“选择框架”下选择了错误的设置。它应该是“头无包装”。

[http://jsfiddle.net/EMEL6/12/](http://jsfiddle.net/EMEL6/12/)

也是一个非常简单的方法来实现相同的：

```
function showHide() {
    $('#example').toggle();
} 
```

# c++ - odeint 内存使用和执行时间

> ID：12202870
> 
> 赞同：0
> 
> 时间：2012-08-30T18:04:14.987
> 
> 标签：c++, numerical-methods

我注意到与我的 RK4 算法或 Mathematica 实现相比，odeint 使用的内存非常少。对于相同的步长，odeint 使用大约 3.11GB，而我的程序使用 7GB，并且使用 Mathematica，我必须手动将页面文件大小增加到 40GB，否则它会耗尽内存。（编辑：**CPU 使用率仅为 18%**）

我很好奇这是怎么可能的，因为当我保存结果时，在所有三种情况下数据文件的大小几乎相同。

但是，就执行时间而言，odeint 似乎比我的程序或 Mathematica 慢一个数量级。这种取舍正常吗？我以**超级菜鸟**的方式做事。

**编辑：2** ** 步长与执行时间 **

*   0.0005=2:55.59 ~ 24.44hrs for 500 step
*   0.001=1:29.14 ~ 12.5hrs for 500 step
*   0.005= 0:17.19~ 2.5 小时 500 步。
*   0.01= 8.34 ~ 1hr10min 500 步

例如：

```
void Classical(vector<vector<double> >& u1,vector<vector<double> >& u2,vector<vector<double> >& phi1,vector<double>& delta,vector<vector<double> >& theta,vector<vector<double> >& phi2, vector<double>& Gamma,vector<double>& z,double h,double u10,double u20,double theta_initial){

for(int i=0;i<delta.size();++i){ 

        double v1=u10;
        double v2=u20;
        double ph1=0.0;
        double ph2=0.0;
        double angle=delta[i]; //OK

    u1.push_back ( vector<double>() );
    u2.push_back ( vector<double>() );
    phi1.push_back ( vector<double>() );
    phi2.push_back ( vector<double>() );
    theta.push_back ( vector<double>() );

        for(int j=0;j<z.size();++j){

            double k1=0.0; double k2=0.0;double k3=0.0;double k4=0.0;
            double L1=0.0; double L2=0.0;double L3=0.0;double L4=0.0;
            double m1=0.0; double m2=0.0;double m3=0.0;double m4=0.0;
            double n1=0.0; double n2=0.0;double n3=0.0;double n4=0.0;                               

            k1=h*(v2*v2-1.0)*cos((angle));
            L1=h*( (2.0/(1.0-(v2*v2))) - (1.0/(v2*v2)) )*Gamma[i];
            m1=h*(1.0/(1.0-(v2*v2)))*Gamma[i];
            n1=h*(1.0/((v2*v2)))*Gamma[i];

            k2=h*((v2+k1/2)*(v2+k1/2)-1)*cos(((angle+L1/2)));
            L2=h*( (2.0/(1-((v2+k1/2)*(v2+k1/2)))) - (1/((v2+k1/2)*(v2+k1/2))) )*Gamma[i];
            m2=h*(1/(1-((v2+k1/2)*(v2+k1/2))))*Gamma[i];
            n2=h*(1/(((v2+k1/2)*(v2+k1/2))))*Gamma[i];

            k3=h*((v2+k2/2)*(v2+k2/2)-1)*cos(((angle+L2/2)));
            L3=h*( (2.0/(1-((v2+k2/2)*(v2+k2/2)))) - (1/((v2+k2/2)*(v2+k2/2))) )*Gamma[i];
            m3=h*(1/(1-((v2+k2/2)*(v2+k2/2))))*Gamma[i];
            n3=h*(1/(((v2+k2/2)*(v2+k2/2))))*Gamma[i];

            k4=h*((v2+k3)*(v2+k3)-1)*cos(((angle+L3)));
            L4=h*( (2.0/(1-((v2+k3)*(v2+k3)))) - (1/((v2+k3)*(v2+k3))) )*Gamma[i];
            m4=h*(1/(1-((v2+k3)*(v2+k3))))*Gamma[i];
            n4=h*(1/(((v2+k3)*(v2+k3))))*Gamma[i];

            v2=v2+(k1/6)+(k2/3)+(k3/3)+(k4/6); 
            angle=angle + (L1/6)+(L2/3)+(L3/3)+(L4/6);
            ph1=ph1+(m1/6)+(m2/3)+(m3/3)+(m4/6); 
            ph2=ph2+(n1/6)+(n2/3)+(n3/3)+(n4/6);

            v1=sqrt(1.0-(v2*v2));

            u1[i].push_back(v1);
            u2[i].push_back(v2);
            theta[i].push_back(angle);
            phi1[i].push_back(ph1);
            phi2[i].push_back(ph2);
        }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:50:26.983

我认为您应该以发布方式编译程序以启用编译器优化。odeint 使用大量模板代码，在调试模式下编译时非常慢。在发布方式上，性能将提高几个数量级。

# objective-c - Objective-C 中间对象优化

> ID：12202875
> 
> 赞同：3
> 
> 时间：2012-08-30T18:04:42.257
> 
> 标签：objective-c

我通常使用选项 B，因为它允许我在需要时对字典进行一些调试（如选项 C 所示）。在我看来，它看起来也更干净。这可能不是问题，但我想知道选项 B 或 C 是​​否使用更多内存，或者在 iOS 编程中执行此操作时是否需要考虑其他事项。顺便说一句，我正在使用ARC。

**与选项 B 或 C 相比，使用选项 A 是否有优势？**

```
// OPTION A
NSString *someString = [[self grabDictionaryFromDB] objectForKey:@"someField"];

// OPTION B
NSDictionary *dbRow = [self grabDictionaryFromDB]; // dbRow ONLY gets used in the next line
NSString *someString = [dbRow objectForKey:@"someField"];

// OPTION C
NSDictionary *dbRow = [self grabDictionaryFromDB]; // dbRow ONLY gets used in the next two lines
NSLog(@"Row: %@", dbRow);
NSString *someString = [dbRow objectForKey:@"someField"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:16:53.347

选项 A 和 B 可能会被编译器优化为完全相同的输出，因此使用选项 B 获得的唯一好处是可读性。选项 C 可能需要额外的存储指令和来自 ARC 的一对`[retain]`/ `[release]`，但与选项 A 或 B 相比，您不会注意到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:03:48.637

我建议选项 B，因为它在将来更容易修改。让我介绍两个场景：

问题一：您想使用该字典执行另一个操作。

```
//Option A version
NSString *someString = [[self grabDictionaryFromDB] objectForKey:@"someField"];
NSString *someOtherString = [[self grabDictionaryFromDB] objectForKey:@"someOtherField"];

//Option B version
NSDictionary *myDictionary = [self grabDictionaryFromDB];
NSString *someString = [myDictionary objectForKey:@"someField"];
NSString *someOtherString = [myDictionary objectForKey:@"someOtherField"]; 
```

如果 [self grabDictionaryFromDB] 执行时间过长怎么办？突然间，您执行了两次而不是一次，因为您可以保存返回的字典指针并且只执行一次。

问题二：如果你将来突然想访问不同的字典怎么办？使用上述选项，您只需更改选项 B 中的一行代码，无论您访问字典多少次。在选项 B 中，您只需更改 myDictionary 的值。在选项 A 中，您将不得不更改一堆代码行。

# ms-access - 如何动态传递附加方法签名

> ID：12202878
> 
> 赞同：0
> 
> 时间：2012-08-30T18:04:53.877
> 
> 标签：ms-access, vba, ms-access-2010

好的，所以我遇到了这种情况，我需要动态打开一个表单，请参见下面的代码，并且如果可能的话，为该表单执行一个已知方法。

### 打开表格方法：

```
Public Sub ShowForm(par As Form, nm As String)
    DoCmd.OpenForm nm

    While IsOpen(nm)
        DoEvents
    Wend

End Sub 
```

### 警告：

并非所有表格都有相同的方法。所以如果可能的话，添加一个额外的可选参数来传递方法调用，可能是一个字符串值。

## 一些例子：

### 表格1：

```
public sub InitItem(id as string)
 ....
end sub 
```

### 表格2：

```
public sub InitCategory(id as string)
 ....
end sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:18:26.270

发疯了怎么办？

```
Private Sub Form_Open(Cancel As Integer)
    Cancel = Not BuildForm(Me.Name, True)
End Sub

Function BuildForm(strFormName, blnRS, Optional strParent = "None", _
                Optional strSubname = "", Optional strParentS = "", _
                Optional NameMod = "", _
                Optional strFormReport = "Form") As Boolean 
```

OpenArgs，一些注释

```
If Me.OpenArgs & "" = "" Then
    Cancel = True
    Exit Sub
End If

astrOpenArgs = Split(Me.OpenArgs, ",") 
```

# html - iOS Safari 上的图像大小翻倍

> ID：12202880
> 
> 赞同：0
> 
> 时间：2012-08-30T18:05:04.527
> 
> 标签：html, mobile-safari, viewport

我正在 iOS Safari 上试用以下 HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>HTML5 test</title>
    </head>
<body>
    <img src="image.jpg" width="100" alt="Image" />
</body>
</html> 
```

在桌面浏览器上看起来不错。不过，在 iOS Safari（iOS 5、iPhone）上，图像宽度为 200 像素。当我使用比例为 1.0 的视口时，它也应该是 100 像素，但事实并非如此 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:17:35.303

浏览器中的逻辑像素是两个实际的屏幕像素，因为屏幕相对于它的分辨率来说太小了。

使用比例 1.0 可为您提供图像像素和逻辑像素之间的 1 比 1 关系，以及图像像素和实际屏幕像素之间的 1 比 2 关系。

# android - 异步任务将结果发送到 gui

> ID：12202889
> 
> 赞同：1
> 
> 时间：2012-08-30T18:06:03.603
> 
> 标签：android, android-asynctask

**异步任务可以定期**向 GUI发送结果吗？

例如：我有 3 件我想让我的异步任务去做的事情。在每件事之后，我想将一个字符串发送回 gui：`"task x completed"`

我可以在不创建 3 个异步任务的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:08:24.363

用于`onProgressUpdate()`在 UI 中生成显示。

```
boolean first = false, second = false, third = false; // task not completed yet

doInBackground()
{
// complete your task and set the corresponding boolean to **true**
}

onProgressUpdate(..)
{
if(first== true) Toast.makeText(context, "Task 1 finished", Toast.LENGTH_LONG).show();
//similarly check which task has been done
} 
```

***编辑：***您还可以查看另一种称为`publishProgress()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:08:42.160

是的。查看 onProgressUpdate() 和 publishProgress() 方法。

这是我很快找到的一个例子，它可能有效，也可能无效。但我认为你有足够的信息来自己弄清楚。

[从 AsyncTask 更新 Activity 中的进度对话框](https://stackoverflow.com/questions/4591878/updating-progress-dialog-in-activity-from-asynctask)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:27:15.683

除了其他建议：如果您可以从您的 asycntask 访问活动，那么您也可以使用`Activity.runOnUiThread(Runnable action)`. 另一个选项 - 如果您可以访问屏幕上添加的任何视图，那么您还可以通过`View.post(Runnable action)`. 这些可以安全地从`doInBackground()`.

# .htaccess - yii, mamp, htaccess 重写 url

> ID：12202890
> 
> 赞同：0
> 
> 时间：2012-08-30T18:06:06.320
> 
> 标签：.htaccess, mod-rewrite, yii, rewrite, mamp

我正在尝试重写 yii url，但没有运气。我花了几个小时浏览网站，每次都得出相同的答案，这对我不起作用：

[http://www.yiiframework.com/doc/guide/1.1/en/topics.url#user-friendly-urls](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#user-friendly-urls)

我想将网址解析为基本路径，例如

/index.php/site/index 到 /

/index.php/ads 和 /index.php/ads/ 到 /ads

/ads/details?ad=9 到 /ads/9

问题似乎是 .htaccess 没有效果。

我在用：

**mamp pro** 在带有 lion 的 mac 上，并且**web 目录与 webserver root 不同**。我已经通过控制台设置**了 AllowOveride 。**

.htaccess 与主 index.php 位于同一文件夹中，但即使我创建错误也不会注册。

我对使用 htaccess 文件的其他非 yii web 目录没有任何问题

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /index.php 
```

//main.php

```
 'urlManager'=>array(
        'urlFormat'=>'path',
                    'showScriptName'=>false,

        'rules'=>array(

                        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:05:05.420

我有一个项目，我的 Yii 应用程序也在一个子文件夹中。

这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\?*$ index.php/$1 [L,QSA] 
```

然后在 main.php 中，您需要将这些行添加到“规则”数组中：

```
'' => 'site/index', // This is for the home page 
```

广告是您控制器的名称吗？换句话说，您的控制器文件夹中有一个名为 AdsController.php 的文件吗？如果是这样，那么它将默认工作。

只是好奇你为什么直接点击 index.php ？你应该能够设置你的 localhost 直接指向你的 Yii 应用程序文件夹。例如，在我的机器上，我创建了 http://mytestapp/，它指向 htdocs 中的应用程序文件夹。

由于您使用的是 Mac，因此您还需要编辑 etc/hosts 文件...

我添加了这样一行：127.0.0.1 mytestapp

希望有帮助...

# php - PHP 使用 ajax 发布并在 DIV 中附加响应

> ID：12202891
> 
> 赞同：0
> 
> 时间：2012-08-30T18:06:06.443
> 
> 标签：php, jquery

我正在使用 Ajax、jQuery 和 PHP，试图熟悉它们的组合以及它们如何相互集成。这是我的第一次尝试，这是一个非常简单的表单提交，没有什么特别之处，只是想看看 ajax 如何处理请求和响应。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7">
    <title>My 1st AJAX attempt</title>
    <link href="http://www.ht-webcreations.com/test/styles.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" language="javascript">

    $(document).ready(function() {

        $('#wait').hide();

        $("#emailContactus").submit(function(){
             $('#wait').show(),
             $.ajax({
                data: $(this).serialize(),
                type: "POST",
                url: 'includes/ajax.php?action=emailContactus',
                success: function(data) {
                    console.log("Success posting emailContactus"),
                    $('#wait').hide(),
                    $('#notifications').html(data).addClass('ajaxsuccess').show();
                },
                error: function (xhr, textStatus, errorThrown) {
                    console.log("Success posting emailContactus: "+ textStatus, errorThrown);
                },
                complete: function(data){
                    $('#wait').hide(),
                    $('#notifications').html(data).addClass('ajaxsuccess').show();
                }
            });
           return false;
         }); 
    });
    </script>

    </head>

    <body>
    <div id="wait"><img src="http://www.ht-webcreations.com/test/loading_ajax.gif" width="80" height="80"></div>
    <div id="notifications"></div>

    <form name="emailContactus" id="emailContactus" method="post">
      <table width="500" border="0" align="center" cellpadding="5" cellspacing="0">
        <tr>
          <td>name</td>
          <td><label for="name"></label>
          <input type="text" name="name" id="name"></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="submit" name="button" id="button" value="Submit"></td>
        </tr>
      </table>
    </form>
    </body>
    </html> 
```

ajax.php：

```
<?
/////////////////  AJAX REQUESTS  /////////////////
switch($_REQUEST['action']){
    case('emailContactus'): if($_POST['name']=='a') { echo $value = 'User is A'; } else { echo $value = 'User is NOT A'; } 
                                break;
    case('addContact'):         echo 'Contact added!'; 
                                break;
    default:                    break;

}
?> 
```

**这个简单示例[（此处的工作演示）中](http://codepad.viper-7.com/dZLwId)**的问题**是，虽然我希望数据响应被附加到#notifications div，但它被输出到文档的最顶部，甚至在加载任何 HTML 之前。请查看并建议需要更改的内容。此外，我很高兴听到您对我的代码的所有评论，因为我希望从一开始就指出正确的方向。谢谢！**

# asp.net-mvc-3 - 未绑定模型的复选框

> ID：12202893
> 
> 赞同：0
> 
> 时间：2012-08-30T18:06:09.940
> 
> 标签：asp.net-mvc-3

所以我是 MVC 和 ASP.Net 的新手。我整个下午都在阅读这里的帖子，但我无法让它发挥作用。我试过[这个](https://stackoverflow.com/questions/5675037/mvc3-using-checkbox-with-a-complex-viewmodel)、[这个](https://stackoverflow.com/questions/6781730/checkboxfor-not-binding-with-nested-objects)和[这个](https://stackoverflow.com/questions/7557897/how-to-bind-checkboxfor)，我只是不知道我做错了什么。

条件类

```
public class conditions
{
    public string condName;
    public bool condValue;

    public conditions(string s)
    {
        condName = s;

    }
} 
```

风险历史课程

```
public class riskHistory
{
    public List<conditions> results;
    public riskHistory()
    {
        results = new List<conditions>();
        results.Add(new conditions("History of Marfans Syndrome"));
        results.Add(new conditions("Family history of aortic disease"));
        results.Add(new conditions("Recent aortic manipulation"));
        results.Add(new conditions("Known thorasic aorta aneurysm"));

    }
} 
```

现在有一个以相同方式定义的 riskPain 和 riskFeatures 类。我需要将其分成 3 个，因为每个都必须以不同的方式处理。我在视图中显示的每个类都是唯一的。

视图模型定义为

```
public class adViewModel
    {
        public riskFeatures rF;

 public riskPain rP;
    public riskHistory rH;

    public adViewModel()
    {
        rF = new riskFeatures();
        rH = new riskHistory();
        rP = new riskPain();
    }
} 
```

然后我在视图中有这段代码。它是 adViewModel 的强类型。

```
Does the patient have any of the following history?
@for (int x =0; x<Model.rH.results.Count; x++)
{
    string n = Model.rH.results[x].condName.ToString();

    <b>@Html.Label(n)</b> @Html.CheckBoxFor(m => m.rH.results[x].condValue)
}

Does the patient have any of the following features to their pain? 
```

// 继续其他类

视图显示正确，但是当我提交表单时它没有绑定（所有 condvalue 都是假的）。如果您要建议一个编辑器模板，那么我还有第二个问题。for 循环上方视图代码中的问题“患者是否有以下病史？” 对于每组复选框，该问题必须不同。那将如何运作？

非常感谢你们！~乍得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:56:14.623

因此，在 for 循环中使用像 CheckBoxFor 这样的 Html 助手给我带来了问题，因为我无法控制生成的输入标签的 id。检查呈现的最终标记并查看它正在制作的控件的 id 是什么。写出控件的 html 并不会比调用 helper 方法长得多。

# php - 如何在php中获取协议？

> ID：12202894
> 
> 赞同：-2
> 
> 时间：2012-08-30T18:06:12.337
> 
> 标签：php

> **可能重复：**
> [如何确定您是否在没有 $_SERVER['HTTPS'] 的情况下使用 HTTPS](https://stackoverflow.com/questions/1175096/how-to-find-out-if-you-are-using-https-without-serverhttps)
> [PHP 获取站点 URL 协议 - http 与 https](https://stackoverflow.com/questions/4503135/php-get-site-url-protocol-http-vs-https)

我如何在 php 中获取协议？

```
$_SERVER['SERVER_PROTOCOL'] 
```

向我展示了 HTTP/1.1，但有什么方法可以回显 http 或 https？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:08:25.380

```
$protocol = current(explode('/',$_SERVER['SERVER_PROTOCOL'])); 
```

如果你真的只是想知道它是否启用了 HTTPS，你可以使用`$_SERVER['HTTPS']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:10:46.457

```
list($protocol) = explode("/",$_SERVER['SERVER_PROTOCOL']); 
```

# jquery-ui - 使用 AJAX 的 jQuery 选项卡式 UI - 在选项卡上一个视图之间切换

> ID：12202898
> 
> 赞同：1
> 
> 时间：2012-08-30T18:06:26.880
> 
> 标签：jquery-ui, jquery

假设我有两个标签 tabA 和 tabB。当我单击 tabA 时，会出现该部分的第一页，将其命名为 tabA1。如果我单击该页面上的链接，则页面 tabA1 将替换为 tabA2。如果我然后单击另一个选项卡，比如说tabB，然后再次单击tabA，我会得到一个tabA2 的图像，它会徘徊一会儿。

我怎样才能让它点击tabA总是会立即显示tabA1？是否将其保存在 cookie 中以便快速访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:07:55.423

在另外切换之前尝试将选项卡（或等效包装器）中的内容设置为`display : none`.

这发生在我身上，这就是我修复它的方式。虽然我知道它可以解决症状而不是确切的问题。

# excel - Excel VBA - 下标超出一维数组的范围

> ID：12202905
> 
> 赞同：3
> 
> 时间：2012-08-30T18:07:09.070
> 
> 标签：excel, vba

这是一个非常简单的问题，但我已经为此头疼了一个小时。我正在尝试执行以下操作：

1.  从我的电子表格中的命名范围定义一个 VBA 数组
2.  访问该数组中的项目

现在，如果命名范围恰好覆盖了多维区域（行和列），那么这可以正常工作：

```
foobar = Range("two_dimensional_range")
MsgBox foobar(1,1) 
```

但是，如果命名范围由单个维度（只是一列）数据组成，则会产生“下标超出范围”错误：

```
foobar = Range("one_dimensional_range")
MsgBox foobar(1) 
```

我已经验证 foobar 确实是一个数组。我可以用 For Each ... Next 遍历它。如果我调用 Ubound(foobar) 那么它会给我正确的大小。我只是不能直接访问它的单个元素！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T18:33:49.800

当您将范围（不是单个单元格）分配给变量数组时，它将始终是多维数组，因此此 MsgBox foobar(1,1) 仍将在第二个实例中工作。

看这个例子

```
Option Explicit

Sub Sample()
    Dim Ar As Variant

    Ar = Range("A1:A2")

    Debug.Print Ar(1, 1)
    Debug.Print Ar(2, 1)
End Sub 
```

另一个例子

```
Option Explicit

Sub Sample()
    Dim Ar As Variant

    Ar = Range("A1:B2")

    '~~> Get Values from Col A
    Debug.Print Ar(1, 1)
    Debug.Print Ar(2, 1)

    '~~> Get Values from Col B
    Debug.Print Ar(1, 2)
    Debug.Print Ar(2, 2)
End Sub 
```

# facebook - 为什么网站页面的 Facebook 个人资料图片看起来很糟糕？

> ID：12202909
> 
> 赞同：-2
> 
> 时间：2012-08-30T18:07:37.447
> 
> 标签：facebook

我尝试上传 .png 和 .jpg 但个人资料图片看起来很糟糕。也许是因为 Facebook 对图像的优化。
注意：当我将此图像保存在相册中时也会发生这种情况。

坏的：
![在此处输入图像描述](../Images/9772ebe4459621aedc5bc076ff90a7b3.png)

好的：
![在此处输入图像描述](../Images/729df5b4620e9f21d4c0475663e3c784.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:18:28.400

您是否尝试过使用照片编辑器将其裁剪为您想要的部分，例如在 Windows 机器上使用油漆。剪切它，然后将图像粘贴到一个新文件中，并将其保存为 png、jpg 或其他格式。然后从那里尝试将其上传到 Facebook。从那里应该没问题。

# java - 测试套接字程序

> ID：12202911
> 
> 赞同：-2
> 
> 时间：2012-08-30T18:07:44.537
> 
> 标签：java, sockets

因此，我编写了一个简单的 Socket 程序，将消息从客户端发送到服务器程序，并想知道进行测试的正确程序是什么？我的客户端和服务器机器都在 Ubuntu 12.04 上运行，我正在远程连接到它们。

对于我的客户端代码，当我实例化客户端套接字 (testSocket) 时，我是使用其 IP 地址和端口号还是服务器 IP 地址和端口号？

这是客户端的代码：

```
public static void main(String[] args) throws UnknownHostException, IOException 
{
    Socket testSocket = null;
    DataOutputStream os = null;
    DataInputStream is = null;

    try
    {
        testSocket = new Socket("192.168.0.104", 5932);
        os = new DataOutputStream(testSocket.getOutputStream());
        is = new DataInputStream(testSocket.getInputStream());
    }
    catch (UnknownHostException e)
    {
        System.err.println("Couldn't find Host");
    }
    catch (IOException e)
    {
        System.err.println("Couldn't get I/O connection");
    }

    if (testSocket != null && os != null && is != null)
    {
        try
        {
            os.writeBytes("Hello Server!\n");

            os.close();
            is.close();
            testSocket.close();

        }

        catch (UnknownHostException e)
        {
            System.err.println("Host not found");
        }
        catch (IOException e)
        {
            System.err.println("I/O Error");
        }
    }

} 
```

这是服务器的代码：

```
public static void main(String[] args) 
{
    String line = new String() ;

    try
    {
       ServerSocket echoServer = new ServerSocket(5932);

       Socket clientSocket = echoServer.accept();

      DataInputStream  is = new DataInputStream(clientSocket.getInputStream());
      PrintStream os = new PrintStream(clientSocket.getOutputStream());

           while (true) 
           {
             line = is.readLine();
             os.println(line); 
           }
    }
    catch (IOException e)
    {
        System.out.println(e.getMessage());
    }

} 
```

我是 Sockets 的新手，不确定我应该看到什么。我在终端很好地编译了两个程序，但不确定我应该先运行哪个程序还是需要同时启动它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:42:03.127

您的服务器正在无限循环中运行。避免这种情况。您必须重新启动计算机。

```
while (true) 
           {
             line = is.readLine();
             os.println(line); 
           } 
```

尝试

```
while (!line.equals("Hello Server!")) 
           {
             line = is.readLine();
             os.println(line); 
           } 
```

首先运行服务器。echoServer.accept(); 等待连接。当它获得第一个连接时，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:58:39.583

[http://docs.oracle.com/javase/tutorial/networking/sockets/](http://docs.oracle.com/javase/tutorial/networking/sockets/)这是一个关于如何使用套接字的简短 java 教程，您还可以学习如何制作一个一次接受多个连接的服务器。本教程说明您总是需要先启动服务器，这是合乎逻辑的。您应该使用线程来管理连接，然后关闭它们，以便有效地使用资源

# wordpress - wordpress wp_enqueue_script 不工作，但工作正常。

> ID：12202915
> 
> 赞同：0
> 
> 时间：2012-08-30T18:07:55.453
> 
> 标签：wordpress

```
 add_action("publish_post", "php_func");

 function php_func(){
     wp_register_script("customscript","link to js file");
     wp_enqueue_script("customerscript")

 } 
```

我认为上述过程是正确的，但那是行不通的。上面 func 中的两行在直接写入 php 文件时可以正常工作（没有动作），但是有了动作，上面就不起作用了。

```
 function php_func(){
     echo "<script>alert("hiii");</script>"; //working but not good method. Also, getting errors like headers sent already .
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:24:02.593

每个动作都注册到特定的钩子。在代码中到达该挂钩时，将运行注册到该挂钩的所有操作。

当您发布帖子时，`publish_post`钩子将运行您的功能，并将您的 javascript 排入队列。

您的问题是代码，然后循环遍历所有排队的脚本并运行它们，已经运行了。

您需要将它们排入较早的钩子中。并且为此调用了特定的钩子构建`wp_enqueue_scripts`。

```
add_action("wp_enqueue_scripts", "php_func");

function php_func(){
    wp_register_script("customscript","link to js file");
    wp_enqueue_script("customerscript")
} 
```

[在Codex](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)中可以找到更多信息。

# php - 如何在多个视图中包含相同的表单？

> ID：12202918
> 
> 赞同：0
> 
> 时间：2012-08-30T18:08:01.883
> 
> 标签：php, codeigniter

我有一个时事通讯注册 FORM，我想为我的 CodeIgniter 项目中的所有视图包含相同的 FORM，而不需要在每个视图的每个控制器中重复代码，必须只有一个控制器来处理表单。

加载视图或包含在另一个视图中不是问题，问题是没有重复处理（js验证并在数据库中记录数据）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:11:50.303

每个函数可以包含多个视图，也可以在视图中调用视图。

```
$this->load->view('template'); 
```

并在模板内...

```
$this->load->view('header');
$this->load->view('form');
$this->load->view('footer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:10:41.167

让表单本身成为一个独立的视图..并且在您希望将其包含在其中的每个视图的基础上..您可以将`include()`其放入或像视图中的视图一样加载它`$this->view->load()`（该语法可能是错误的但是是的）通常这就是你会/可以做到的方式。

# ubuntu - Ubuntu 12 的动态防火墙规则或 iptables API？

> ID：12202925
> 
> 赞同：0
> 
> 时间：2012-08-30T18:08:32.447
> 
> 标签：ubuntu, firewall, iptables

我有一个防火墙服务器（在这种情况下是 Redis，但这可能不是我的问题的核心。）我想锁定对某些 IP 地址的访问——一个变量，改变一组工作 Amazon EC2 实例。问题是我事先不知道 IP 地址。有什么好的方法来管理这个？

*2012-08-31 更新*：Redis 服务器*未*在 EC2 上运行。如果是，我可以使用[Amazon Security Groups](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html)。

*2012-09-20 更新*：另请参阅 2008 年[的这个问题：如何以编程方式即时管理 iptables 规则？](https://stackoverflow.com/questions/109553/how-can-i-programatically-manage-iptables-rules-on-the-fly). 我正在寻找更新的方法、解决方法或其他任何东西。目前，我正在使用一些从模板文件生成规则的手工脚本——如果没有更好的东西，我会感到惊讶。

*2012-09-21 更新*：我正在运行 Ubuntu 12。我正在使用 Amazon Elastic IP。目前，我正在使用[ERB](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)模板重新生成 iptables 配置并通过远程脚本重新加载。我希望，至少，为 iptables 找到一个 API——或者，更好的是，一个可以提供帮助的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:52:18.897

这个 2008 年的问题中提到了各种选项：[How can I programmatically manage iptables rules on the fly？](https://stackoverflow.com/questions/109553/how-can-i-programatically-manage-iptables-rules-on-the-fly). 据此，iptables 没有 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:33:16.800

您必须选择亚马逊的弹性 IP，并将弹性 IP 关联到您在 ec2 上的实例。这将为您的 ec2 实例提供静态公共 IP。

# windows - 将值传递给 Windows 命令的中间（运行时）输入提示

> ID：12202927
> 
> 赞同：3
> 
> 时间：2012-08-30T18:08:49.643
> 
> 标签：windows, command-line, batch-file

我有一个 Windows exe，它显示一些版权信息，连接到服务器，然后提示输入用户名和密码。

所以每当我运行它时，我都必须等待提示输入用户名和密码。我一般在命令开始显示版权信息后先输入用户名、密码，但这是一种粗略的方式。

有没有更好的方法在批处理文件中将参数传递给 windows 命令的输入提示，这样我就可以避免总是输入它们？

PS 在 Linux 中，我们使用 << 操作符来做到这一点，就像这样

```
linux_command <<delimiter
inputparamvalue1
inputparamvalue2
delimiter 
```

linux_command 将运行，在第一个输入提示符下，它读取 inputparamvalue1，在下一个输入提示符下，它读取 inputparamvalue2

作为对詹姆斯的回应，感谢您提供有关安全性的建议。我会处理的。

我试图实施您的解决方案，但没有奏效。

这些是我的文件。请看看你是否得到任何提示。

vpn.bat

```
@ echo off    
"C:\Program Files (x86)\Cisco\Cisco AnyConnect VPN Client\vpncli.exe" connect "mycompanyvpnsite.com" 
```

登录.txt

```
myusername  
mypassword 
```

启动VPN.bat

```
@ECHO OFF  
CALL vpn.bat < login.txt  
ECHO I'm back! 
```

结果

```
D:\>startvpn.bat  
Cisco AnyConnect VPN Client (version 2.5.6005) .  

Copyright (c) 2004 - 2010 Cisco Systems, Inc.  
All Rights Reserved.  

  >> state: Disconnected  
  >> notice: Ready to connect.  
  >> registered with local VPN subsystem.  
  >> state: Disconnected  
  >> notice: Ready to connect.  
VPN>   >> contacting host (mycompanyvpnsite.com) for login information...  
  >> notice: Contacting mycompanyvpnsite.com.  
VPN>  
  >> Please enter your username and password.  

Username: [myusername] Password: 
```

它显示的用户名 myusername 是从我以前的手动登录中缓存的。因此，这次运行似乎没有从 login.txt 中获取任何值。
如果我在没有任何参数的情况下单独执行了我的 vpn.bat，我会得到这样的提示

```
VPN>  
  >> Please enter your username and password.  

Username: [myusername] <i press enter to take the cached value>  
Password: ******** <i enter password and press enter> 
```

它连接起来。

vpn 客户端没有权限在命令行上指定密码，这就是我尝试这种方式的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:57:50.077

我有一个工作代码！它与 James K 的相似，但有一些错误被敲定。我想再次重申，这是相当不安全的，因为它会将您的密码暴露在未加密的设置中。话虽如此：

```
'Anyconnect login script
Dim oShell
Set oShell = WScript.CreateObject("WScript.Shell")

' rather clunky way of selecting the correct directory - open to suggestion
oShell.Run "cmd /k cd %PROGRAMFILES(x86)%\Cisco & cd Cisco* & vpncli.exe connect MYCOMPANYVPN.COM"

' sleep of 100 neccessary or else it opens multiple cmd windows
Wscript.sleep 100

' activate correct window
oShell.AppActivate "Connect"

' optional ipsec Identifier used for multiple VPN profiles on the same server
'(if you don't have one, just comment this out)
oShell.SendKeys "IPSECID{ENTER}"

' Send Username and Password to Active Window.
oShell.SendKeys "USERNAME{ENTER}"
oShell.SendKeys "USERPASSSWORD{ENTER}"

oShell.SendKeys "exit{ENTER}" 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:04:52.197

将您的用户名和密码保存在一个文件中以自动执行登录过程是一个非常糟糕的主意，并且会使需要用户名和密码提供的任何安全性无效，因为任何获得对您计算机的电子或物理访问权限的人都可以访问您的纯文本用户名和密码。

也就是说，在 DOS / Windows 命令提示符中，您将需要一个包含您的用户名和密码的额外文件，如下所示：

`LOGIN.TXT`

```
MyUserName
MyPassword 
```

然后将该文件通过管道传输到您的命令中，如下所示：

```
@ECHO OFF
CALL Command_Or_Batch < login.txt
ECHO I'm back! 
```

这将就像您在控制台并键入一样`MyUserName[ENTER]` `MyPassword[ENTER]`。

`login.txt`只是一个普通的文本文件，不需要`.txt`扩展名，或者根本不需要任何扩展名。

该`CALL`语句仅在启动另一个批处理文件时才需要，如果您希望它在完成后继续在原始调用批处理文件中执行。`CALL`调用可执行文件（批处理文件以外的任何内容）时，使用没有区别。

* * *

**编辑：**根据您的评论，我相信您需要这样做才能使其正常工作：

```
@ echo off    
"C:\Program Files (x86)\Cisco\Cisco AnyConnect VPN Client\vpncli.exe" connect "mycompanyvpnsite.com" < login.txt 
```

在这种情况下，您将重定向到您的`vpncli.exe`，但我相信这会产生副作用，即`vpncli.exe` **只**接受来自 的输入，而在退出`login.txt`之前根本不接受来自键盘的输入。`vpncli.exe`这意味着您需要自动化（存储在`login.txt`）您通常需要输入的所有内容。这应该不是问题，除非您`vpncli.exe`以后需要手动交互。

* * *

**编辑：**由于`vpncli.exe`似乎在读取任何击键之前清除了缓冲区，我建议可能使用 VBS 可能会让你到达你想去的地方。

`VPN.VBS`
'VBScript 示例集 WshShell = WScript.CreateObject("WScript.Shell")

```
WshShell.Run "C:\Program Files (x86)\Cisco\Cisco AnyConnect VPN Client\vpncli.exe connect mycompanyvpnsite.com"

' You need to know the name of the window, It should be in the upper left corner
' I'm guessing that it will be the filename of the executible
WshShell.AppActivate "vpncli.exe"

' Send Username and Password to Active Window.
WshShell.SendKeys "MyUserName{ENTER}"
WshShell.SendKeys "MyPassword{ENTER}" 
```

但我不能确定。我在测试这个时遇到了问题，尽管我只是在批处理文件和 VBS 脚本之间来回切换。

虽然我知道您是否将**WshShell.Run**和**WshShell.AppActivate**替换为以下两行...

```
WshShell.Run "%windir%\notepad.exe"
WshShell.AppActivate "Notepad" 
```

...记事本将打开，将出现以下两行：

```
MyUserName
MyPassword 
```

如果这对您不起作用，我正在考虑完全删除此答案，因为它仅包含无效的建议。

# jquery - jQuery 自动完成和解析收到的 JSON

> ID：12202931
> 
> 赞同：1
> 
> 时间：2012-08-30T18:09:23.927
> 
> 标签：jquery

执行ajax请求的JavaScript代码

```
$('#search-field').autocomplete({source: 'url/of/autocomplete'}); 
```

在我更改 JSON 结构之前，它运行良好。它曾经返回

```
["anything","something","super value"] 
```

现在它（服务器）返回一个有点复杂的 JSON

```
[{"title":"some-title","link":"/searc?q=some-title"}, {"title":"some-title2","link":"/searc?q=some-title2"}] 
```

嗯，现在不显示了。它正在工作，但值（标题）没有明显显示。

我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:24:40.407

我认为您使用的是 AJAX 返回的数据，因此源属性应该是一个函数，并且您必须在选择它时添加一个新属性。当您收到数据时，您需要将其存储在全局变量中，然后在另一个函数中获取其值：

```
 $('#search-field').autocomplete({source: function(){
       jQuery.post('url', data, function(dataReceived){globalVariable = dataReceived; }, 'json');
   },

   select: function(event, ui) { 
      var local = globalVariable[ui.item];
      // work with the local variable.
 }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:34:36.517

它必须将“标题”重命名为“标签”，将“链接”重命名为“值”。而已！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:55:16.467

由于我看不到您的代码，我们假设这`[{"title":"some-title","link":"/searc?q=some-title"}, {"title":"some-title2","link":"/searc?q=some-title2"}]`是您的数据源。话虽这么说，这就是我将如何去做......

```
$(document).ready(function(){

var dataSource= [{"title":"some-title","link":"/searc?q=some-title"}, {"title":"some-title2","link":"/searc?q=some-title2"}];

    $('#search-field').autocomplete({
        source: function(request, response) {
        var filterResults = $.map(dataSource, function(item) {
            if(item.title.toLowerCase().indexOf(request.term.toLowerCase()) != -1 || item.link.toLowerCase().indexOf(request.term.toLowerCase()) != -1){
             return item;
         }
        else{
            return null;
        }
    });
      response(filterResults);
     }
    }).data('autocomplete')._renderItem = function (ul, item)
{
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append($("<a></a>").html("Title: " + item.title + ", Link: " + item.link))
        .appendTo(ul);
};
}); 
```

现场演示：http: [//jsfiddle.net/hUE9M/131/](http://jsfiddle.net/hUE9M/131/)

使用这种方法，您可以搜索“标题”和“链接”属性。我希望这有帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T18:17:55.307

保留旧的 JSON 结构并首先尝试有效的方法

# c# - FormsAuthentication 更改域后无法进行身份验证

> ID：12202932
> 
> 赞同：0
> 
> 时间：2012-08-30T18:09:24.753
> 
> 标签：c#, sql-server-2008, iis-6, forms-authentication, windows-server-2003

在我试图协助的客户项目中，我遇到了一个有趣的 FormsAuthentication 问题。这是问题所在：

*   Web 应用程序的域从 .companyA.com 更改为 .companyB.com，我设置了 IIS 重定向，将任何试图访问 .companyA.com 的人发送到 .companyB.com。这工作得很好。

*   现在我无法登录该网站。我做了一些挖掘，发现 web.config 中定义了 authCookies，所以我更改了 authCookie 域以匹配 .companyB.com。我仍然无法登录。

*   我做了更多的挖掘，发现有一个 SQL 报告服务器设置。我更改了报告服务器配置文件中的域以匹配 .companyB.com。仍然无法登录。

对于此类问题的通用故障排除，我还有其他地方可以查看吗？我刚刚被当作交火，所以我的领域知识有限，无法在 VS 中打开解决方案，因为他们唯一可用的 VS 对解决方案来说太旧了。

编辑：好的，经过进一步挖掘，我发现用户没有进行身份验证不是主要问题。连接到报告服务数据库时出现问题，异常被吞没。值得庆幸的是，它出现在事件查看器中。不幸的是，这仍然给我留下了问题，我无法弄清楚为什么 SQL 不再对我进行身份验证，以及更改域名如何可能导致这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:26:36.107

调试非常简单。只需获取任何 http 调试器（Fiddler 即可）并运行您的应用程序。您将看到一个请求列表。只需注意设置身份验证 cookie 的响应，然后注意连续请求中发生的情况。

您可能会看到 cookie 已设置但进一步丢失。这可能是因为 cookie 是为域 A 发出的（您将在调试器中看到 cookie 的域）并且浏览器没有将其传送到域 B（浏览器应该这样做；它永远不会将 cookie 传送到其他域）。

无论如何，一个 http 调试器将在这里提供很大的帮助。

# c# - 使用 WebClient ping 网站

> ID：12202933
> 
> 赞同：2
> 
> 时间：2012-08-30T18:09:27.230
> 
> 标签：c#, .net, webclient, http-authentication

我有一个小应用程序，我想运行并 ping 一个内部网站。这是代码：

```
using (var client = new WebClient())
{
    client.DownloadString("http://MyServer/dev/MyApp");
} 
```

但是，它抛出以下错误：

> 远程服务器返回错误：(401) Unauthorized。

我拥有访问服务器的所有正确凭据。我在想我不知道如何很好地使用 WebClient，我只需要在客户端对象上设置属性。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:12:15.873

我找到了答案。我需要使用 WebClient 的 NetworkCredentials() 方法。见下文：

```
 using (var client = new WebClient())
    {
        client.Credentials = new NetworkCredential ("theUser", "thePassword", "theDomain"); 
        client.DownloadString("http://MyServer/dev/MyApp");
    } 
```

[这是帮助我的网址](http://www.dreamincode.net/forums/topic/242194-getting-errors-when-i-tried-to-download-files-using-credentials/)

# cocoa - cocoa：如何使用基于视图的源列表

> ID：12202935
> 
> 赞同：2
> 
> 时间：2012-08-30T18:09:29.717
> 
> 标签：cocoa

我想使用像Finder这样的源列表来实现一个应用程序：

![在此处输入图像描述](../Images/17aec688480f11c1883c2a8d0cc4f5e4.png)

我已经使用 NSOutlineView 和我自己实现的树数据结构完成了一个源列表应用程序。我发现 IB 已经提供了 SourceList 视图：

![在此处输入图像描述](../Images/65a2a01d936b5fc1ff97973d6bedba29.png)

，但我不知道如何使用它，我想也许使用 SourceList 视图会更容易实现类似 Finder 的应用程序。我想知道：

1.  实现源列表应用程序的最简单方法是什么？
2.  SourceList 视图是否可以在项目名称之前显示一个图标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T03:19:16.863

看看这个，它可能对你有帮助。 [http://blog.latenightsw.com/?p=352](http://blog.latenightsw.com/?p=352)

# delphi - 我如何将 RegisterClass() 工作到单位

> ID：12202941
> 
> 赞同：0
> 
> 时间：2012-08-30T18:09:51.653
> 
> 标签：delphi, system, delphi-7

来自anwser的基础[如何消除变量...](https://stackoverflow.com/questions/12081700/how-to-eliminate-variables-panel1-panel2-panel3-etc-in-delphi)当我拥有所有这些组件并从主窗体中进行按钮1.click之类的操作时，我得到并接受了它的工作原理...

但我习惯从单位做出行动......所以

当我单击一个按钮时，我会看到一个过程 DoMaths(Sender: TObject);

```
procedure Tform1.DoMaths(Sender: TObject);
  begin
    if TButton1(Sender).hint := 'Make the standard Package' then
      do_Maths_standard_package;
  end; 
```

do_Maths_standard_package 在单位 ComplexMaths 中。

是程序 do_Maths_standard_package 表单单元 ComplexMaths 它从 Form1 调用一些组件...例如 Form1.label1 等...

因此，当我调用 RegisterClass(TLabel) 并从类型中删除 Tlabel 时，它会给出一个错误，它无法找到 Label1 ...

请有人可以帮助我，以免从一开始就进行洞计划...

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:58:06.523

我认为你有两个选择。

1) 您可以为每个组件分配一个唯一的数字 ID。并将其保存到 .Tag 属性中。就像你用来在 .HelpContext 属性中生成和绑定 ID 一样。

然后要按数字获取控件，您将枚举 Form.Controls 并获取具有适当标记值的控件。

问题是在 PAS 文件和 DFM 文件中有两个独立的 ID 列表同步。打字错误很难被发现。特别是因为您在 DFM 中没有常数，而只有“幻数”。

2) 设置 .Name 属性并使用 iMan Biglari 的配方 - FindComponent by name。问题是您是否可以拥有 .Name 但不能拥有变量。由于没有人回答 - 试试看。以我的经验 - 使用 Delphi 5，希望 D7 基本相同 - 你可以删除变量。

*   如果你对变量进行了错误的声明，那么 Delphi 编辑器会注意到并要求更正它。
*   如果你有没有 DFM 对象的变量，Delphi 会注意到它并要求删除它。
*   但是如果有没有对应变量的DFM 对象，那么Delphi 编辑器就忽略了。也许它认为该对象是继承的或其他。但是，如果您根本没有声明它，它并不介意。

但是，由于您删除了名称，因此您似乎由于某种原因无法执行此操作。

* * *

在这两种情况下，如果某些过程对某些控件进行大量访问，您都必须缓存值。甚至可能跨越程序。实际上，至少对于大多数使用的控件，yu 会手动恢复这些变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:29:43.247

您可能可以像这样引用您的组件：

```
TLabel(Form1.FindComponent('Label1')).Caption := '...';
TCheckBox(Form1.FindComponent('CheckBox12')).Checked := False; 
```

但是真的很痛...

# php - PHP 工作流引擎框架

> ID：12202942
> 
> 赞同：1
> 
> 时间：2012-08-30T18:09:54.717
> 
> 标签：php, workflow

ezComponent Workflow 是否仍在积极开发中？我已经下载了他们的代码并试图让一切正常工作（使用 postgres db，php 5.4），但他们的示例代码不断失败。话虽如此，您可以推荐任何基于 PHP 的成熟工作流引擎实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:42:08.580

ezComponents 现在称为 Zeta 组件。

请参阅[http://zetacomponents.org/](http://zetacomponents.org/) -- 引用：*Zeta 组件最初是由 eZ Systems 以“eZ Components”的名义开发的，并得到了 Apache 软件基金会的慷慨赞助以进行进一步的开发。自 07/2010 起，这些组件被称为“Zeta 组件”*

这可以解释为什么您没有看到对主要 ezComponents 站点的任何更新，因为所有新的开发工作都是在 Zeta Components 项目下完成的。

# ios - 如何在 RubyMotion 中创建字符串的 md5 哈希值

> ID：12202945
> 
> 赞同：6
> 
> 时间：2012-08-30T18:10:00.763
> 
> 标签：ios, rubymotion

我有一封电子邮件，想从 gravatar.com 中提取相应的图像

使用 ruby​​，很容易：

```
 require 'Digest/md5'

    Digest::MD5.hexdigest("my string") 
```

由于 RubyMotion 中没有`require`方法，我如何从电子邮件中生成哈希？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T18:58:17.843

一种可能性是使用“NSData+MD5”cocoapod。通过将它添加到你的 Rakefile 来安装它（确保你有`require 'motion-cocoapods'`顶部）：

```
app.pods do
  pod 'NSData+MD5Digest'
end 
```

然后你可以像这样使用它：

```
digest = NSData.MD5HexDigest("my string".dataUsingEncoding(NSUTF8StringEncoding)) 
```

# c++ - 操纵 QGradient 跟随路径

> ID：12202946
> 
> 赞同：3
> 
> 时间：2012-08-30T18:10:02.947
> 
> 标签：c++, qt, user-interface, qt4, qt4.7

我正在使用 Qt 绘制一些看起来像管道的东西，它可以使用 QPainterPath 弯曲和弧线。我使用 QLinearGradient 填充管道，以使其具有三维外观。我不知道如何弯曲/弧形管道并使渐变*遵循*相同的曲线，以便保持 3D 效果。有什么想法吗？

换句话说，QGradient 上的色标需要随着路径中的曲线旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:06:39.003

据我从 qt[示例](http://doc.qt.digia.com/stable/painting-painterpaths.html)中可以看出，填充路径的渐变都是相同的。因此，您定义了一个漂亮的渐变，而不是路径，并使用如下代码将渐变添加到所有形状：

```
QLinearGradient myGradient;
QPen myPen;

QPainterPath myPath;
myPath.cubicTo(c1, c2, endPoint);

QPainter painter(this);
painter.setBrush(myGradient);
painter.setPen(myPen);
painter.drawPath(myPath); 
```

最难的部分是定义一个移动顺畅的管道......你能分享你的代码，以便我们看到你的问题吗？

# java - SwingWorker：propertyChange 很少调用

> ID：12202959
> 
> 赞同：1
> 
> 时间：2012-08-30T18:10:46.590
> 
> 标签：java, performance, swing, swingworker, propertychangelistener

我似乎对 SwingWorker 有疑问。我基本上实现了从我的 JFrame 的 propertyChange() 方法更新 UI 的 Java 示例代码。

我还在 doInBackground 中复制了最多一秒钟的睡眠部分。这使我的 Worker 中的 setProgress 更新率很高。

然而，propertyChange 事件大约每 10 秒触发一次。我从 API 知道并非每个 setProgress 都会触发一个事件，我对此表示满意，但是这似乎有点慢，并且丢失了太多事件。

在调试器中单步执行时，我得到了更好的速度，〜每 3 次调用 setProgress

任何想法为什么它这么慢？

以下是我的代码的部分：

```
public Void doInBackground() {
    Random random = new Random();
    setProgress(0);
    float getSize=0,gotSize=0;
    while (Sync.syncing) {
        //Sleep for up to one second.
        try {
             Thread.sleep(random.nextInt(1000));
        } catch (InterruptedException ignore) {
            ignore.printStackTrace();
        }
        try{
            getSize=Main.getSyncGet();
            gotSize=Main.getSyncGot();
            System.out.println("setProgress: "+(gotSize/getSize));
            setProgress((int)((gotSize/(getSize))*100));
        }catch(Exception e){
            Main.LOGGER.log(Level.WARNING,"Error setting progress",e);
        }
    }
    return null;
}

public void propertyChange(PropertyChangeEvent evt) {
        if ("progress" == evt.getPropertyName()) {
            jpb.setValue((Integer) evt.getNewValue());
        }
} 
```

亲切的问候

延斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:26:56.037

您的问题很可能在这里：

```
System.out.println("setProgress: "+(gotSize/getSize));
setProgress((int)((gotSize/(getSize))*100)); 
```

您是否测试过进度实际上正在改变？更好的 println 将是：

```
int value = (int)((gotSize/(getSize))*100);
System.out.println("setProgress: "+ value);
setProgress(value); 
```

现在检查 value 是否真的在变化。

哎呀，这绝对是错误的：

```
public void propertyChange(PropertyChangeEvent evt) {
        if ("progress" == evt.getPropertyName()) {
            jpb.setValue((Integer) evt.getNewValue());
        }
} 
```

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T18:28:56.963

1.  阅读[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，描述了可能的场景，包括代码示例

2.  `setProgress(0);`并且 `setProgress((int)((gotSize/(getSize))*100));`必须在 EDT 上调用

3.  [在 doInBackground() 期间，](https://stackoverflow.com/a/12108209/714968)可以在 EDT 上完成以下方法的输出

    *   `process()`

    *   `publish()`

    *   `setProgress()`

4.  [@trashgod 关于 PropertyChangeListener 的](https://stackoverflow.com/a/7054627/714968)最复杂的代码示例

5.  尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T08:05:00.973

您可以尝试手动触发属性更改：

```
setProgress(1);
firePropertyChange("progress", 0, 1); 
```

# security - 自定义未通过身份验证时采取的操作

> ID：12202970
> 
> 赞同：1
> 
> 时间：2012-08-30T18:11:28.930
> 
> 标签：security, symfony

我有一个 Symfony 2.1 应用程序，根据请求的 url，我想在用户凭据过期时采取不同的操作。我正在使用 fos_userbundle，默认情况下，它会重定向到登录 url。就我而言，我想返回客户端将处理的特殊响应，而不是重定向。

**想法#1：**
我不确定我需要做些什么来完成这个。我单步执行了代码，发现在哪里`Symfony\Component\Security\Http\Firewall\ExceptionListener`捕获了抛出的异常并最终`RedirectResponse`设置了 a 。我想我需要在这里连接到某个地方并设置不同的响应，但我还没有找到它。

**想法#2：**
我想我可能需要设置另一个以不同方式处理丢失凭据的防火墙。这似乎需要做更多的工作，而且*感觉*不太对劲。

我的两个想法都可能离谱。想起来似乎不应该那么难，但我搜索了高低，找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:59:51.220

我不知道他们是否在 2.1 和 2.0 中更改了内核侦听器的格式，但也许您可以创建一个侦听器来处理 onKernelRequest 方法并检查它们是否经过身份验证。

```
kernel.listener.pageloadlistener:
    class: Acme\DemoBundle\EventListener\PageLoadListener
    tags:
        - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest  }

class PageLoadListener
{
    public function onKernelRequest(GetResponseEvent $event)
    {
       //Do whatever here, you could pass in the security context in the construct of this class to get the user
    }
} 
```

# xcode - 如何在 Xcode 中查看完整的错误或警告？

> ID：12202971
> 
> 赞同：26
> 
> 时间：2012-08-30T18:11:29.530
> 
> 标签：xcode, xcode4

不管我把窗口做多大，这就是我能看到的所有警告：

![](../Images/d9bb0eaa382e3d086a40482b062c4923.png)

如何在警告出现的地方看到警告的全文？

我*可以*将鼠标悬停在左窗格中出现的警告上，等待足够长的时间后，会出现一个带有全文的工具提示，但我觉得这很尴尬......这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-02-25T19:41:41.687

**#### 这是一个非常方便的技巧：####**

**1）**查看*问题导航器*

![在此处输入图像描述](../Images/f4e97c0a53fa86e4e7d53913498de716.png)

**2）**转到：xCode 首选项>常规>“问题导航器详细信息”>现在将下拉列表增加到**10 行**。

现在您可以在问题导航器中看到整个消息！

![在此处输入图像描述](../Images/7c3ad7ab0d05404c7dd971635eb82492.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-30T20:12:07.850

问题导航器是一个紧凑的表示。如果您真的想要*所有*详细信息，可以查看构建记录：

*   命令+7
*   单击最顶部的“Build $APP”部分。
*   定位警告或错误
*   单击右侧的按钮以查看您感兴趣的步骤的完整详细信息

双击消息将在编辑器中显示源位置。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-06T09:31:37.243

最简单的方法是右键单击“问题导航器”中的消息并选择“在日志中显示”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:14:53.473

您可以在左侧的“警告”选项卡部分中找到警告/错误列表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T20:00:26.963

您可以类似地将鼠标悬停在警告本身上。即使是“未使用的变量”也可以被压缩得足够小，以至于它不能适应（如果你把编辑器缩小到足够大的话）。将鼠标悬停在警告位置上是您最接近的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-06T19:39:36.027

在 Xcode 9.2（至少）中，您可以单击工具提示中的错误/警告**图标**，它会展开。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-30T18:14:06.710

我确定如果您展开左侧窗格，它会显示完整的错误。确保您位于警告/错误选项卡中。

据我所知，这是唯一的方法。

# javascript - 类更改时引导动画按钮样式

> ID：12202980
> 
> 赞同：1
> 
> 时间：2012-08-30T18:12:21.687
> 
> 标签：javascript, css, twitter-bootstrap, css-transitions

当我更改 .btn 按钮的类时，我想为背景设置动画，例如从加载到 .btn-success 或 .btn-danger 的 .btn-primary 传递。

现在，如果我将 -webkit-transition: background 1s linear 添加到 .btn 类并使用 js 切换类，则更改不会动画

（兴趣点：我尝试仅在 chrome 元素检查工具中添加 css 过渡指令。）

任何的想法？

更新：如果按钮处于禁用模式，则转换工作，也许问题是由于使用 css3 渐变作为背景图像，而 -webkit-transition 可能不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:23:53.353

我认为您在更新中确定了它。CSS 可以转换背景颜色和位置，但不能在渐变之间转换，这将需要为这些设置动画。

如果您有兴趣，这里有一个绝望的解决方法的想法：

*   创建一个css3关键帧动画
*   首先将背景位置设置为“0 -20px”（不一定是 -20px，但无论如何都会使渐变不碍事，因此您只能看到背景颜色）
*   然后，将背景颜色设置为您想要的新背景颜色
*   在为背景颜色设置动画的某个时间点，将渐变切换为您想要的新渐变。渐变不在视野范围内，因此在动画中看不到。
*   最后，当背景颜色完成动画时，将背景位置动画回“0 0”。

如果你足够快地完成这一切，你可能会获得一个不错的效果。如果你试一试，我很想看看。

# html - 图像圆角

> ID：12202981
> 
> 赞同：0
> 
> 时间：2012-08-30T18:12:22.440
> 
> 标签：html, css

我有一个包含图像的 div。我想要这个带圆角的 div。问题是 div 内的图像比 div 大，我`overflow:hidden`用来剪切图像，因为使用 jquery 我减小了鼠标悬停时的大小，所以现在 div 有圆角，但只有当我减小大小时我才能看到它们图片。

```
 .thumb{
       float: left;
       overflow: hidden;
       width: 230px;
       height: 230px;
       position: relative;
       margin-right: 1px;
       margin-bottom: 1px;
       border-radius: 12px;
    }
    .thumb img {
       max-width: 270px;
       height: 270px;
       left: -20px;
       position: relative;
       top: -20px;
       width: 270px;
       border-radius: 12px;
   } 
```

# python - 使用 PyObjC 与 Mountain Lion 的通知中心合作

> ID：12202983
> 
> 赞同：8
> 
> 时间：2012-08-30T18:12:31.677
> 
> 标签：python, osx-mountain-lion, pyobjc, nsusernotification

我正在尝试从我的 python 脚本向 Mountain Lion 发送通知，并对点击通知做出反应。现在可以完美地找到发送通知。但是我无法让 Lion 在单击时回调我的脚本。

这就是我所做的。我实现了一个通知类。该类实例的唯一目的是通过调用来提供通知`notify()`。在相同的方法中，我将对象设置为应用程序的委托。

```
import Foundation
import objc
import AppKit

class MountainLionNotification(Foundation.NSObject, Notification):

    def notify(self, title, subtitle, text, url):
        NSUserNotification = objc.lookUpClass('NSUserNotification')
        NSUserNotificationCenter = objc.lookUpClass('NSUserNotificationCenter')
        notification = NSUserNotification.alloc().init()
        notification.setTitle_(str(title))
        notification.setSubtitle_(str(subtitle))
        notification.setInformativeText_(str(text))
        notification.setSoundName_("NSUserNotificationDefaultSoundName")
        notification.setUserInfo_({"action":"open_url", "value":url})
        AppKit.NSApplication.sharedApplication().setDelegate_(self)
        NSUserNotificationCenter.defaultUserNotificationCenter().scheduleNotification_(notification)

    def applicationDidFinishLaunching_(self, sender):
        userInfo = sender.userInfo()
        if userInfo["action"] == "open_url":
            import subprocess
            subprocess.Popen(['open', userInfo["value"]]) 
```

现在，我希望`applicationDidFinishLaunching_()`在单击通知时被呼叫。不幸的是，这永远不会发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T08:53:36.997

好的，找到了。没跑`AppHelper.runEventLoop()`。很明显是面相错误。以下代码有效：

```
class MountainLionNotification(Foundation.NSObject, Notification):

    def notify(self, title, subtitle, text, url):
        NSUserNotification = objc.lookUpClass('NSUserNotification')
        NSUserNotificationCenter = objc.lookUpClass('NSUserNotificationCenter')
        notification = NSUserNotification.alloc().init()
        notification.setTitle_(str(title))
        notification.setSubtitle_(str(subtitle))
        notification.setInformativeText_(str(text))
        notification.setSoundName_("NSUserNotificationDefaultSoundName")
        notification.setHasActionButton_(True)
        notification.setOtherButtonTitle_("View")
        notification.setUserInfo_({"action":"open_url", "value":url})
        NSUserNotificationCenter.defaultUserNotificationCenter().setDelegate_(self)
        NSUserNotificationCenter.defaultUserNotificationCenter().scheduleNotification_(notification)

    def userNotificationCenter_didActivateNotification_(self, center, notification):
        userInfo = notification.userInfo()
        if userInfo["action"] == "open_url":
            import subprocess
            subprocess.Popen(['open', userInfo["value"]]) 
```

# java - 当一个对象有多个内部集合时，我如何从外部迭代它们？

> ID：12202985
> 
> 赞同：0
> 
> 时间：2012-08-30T18:12:38.630
> 
> 标签：java, oop, collections

不久前，我为表示建筑物内部（和之间）路径的导航图编写了一个编辑器。它存储在 Graph 类中。

例如，边缘存储在每个楼层的一个集合中，再加上一个用于楼层之间的集合。

要绘制它们（仅当前楼层）或将它们保存到磁盘（全部），我需要从外部获取它们。为此，我实现了 callWithAllEdges 和 callWithAllEdgesIn 等方法，后者采用参数来指定楼层。

这些方法采用了一个仿函数（至少我这样称呼它），然后用边缘调用它。

这就是绘制一层楼的边缘的样子：

```
graph.callWithAllEdgesIn(id, new Functor<Edge>() {
    public void call(Edge e) {
        drawEdge(g,e);
    }
}); 
```

当然，这有点啰嗦。可能是java的问题，而不是我的解决方案，我不知道。

另一种方法是创建一个方法，将对所有需要的边缘的引用放入一个新集合中，然后对其进行迭代，我猜。不过对我来说似乎有点不对劲。

我的问题是：我怎么能更好地解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:55:32.957

你目前的设计是完全合理的。另一种选择是提供一个 Iterable/Iterator。这样您就不需要将所有内容复制到新列表中，而是可以懒惰地逐步浏览您的内部列表。

# asp.net - 和 不工作

> ID：12202986
> 
> 赞同：0
> 
> 时间：2012-08-30T18:12:43.327
> 
> 标签：asp.net, web-config, request.form, requestvalidationmode

我继承了一个使用框架 4.0 的 MVC asp.net 应用程序。

我收到可怕的“从客户端检测到潜在危险的 Request.Form 值”错误，我的所有研究都让我相信这应该可以解决它：

```
<system.web>
    <httpRuntime requestValidationMode="2.0" />
    <pages validateRequest="false" />
</system.web> 
```

但是，我已将其添加到我的 web.config 中，但仍然出现错误。我已经走到尽头了，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:36:47.183

除了您所做的之外，您还必须使用`ValidateInput`属性来装饰您的方法。

```
[ValidateInput(false)]
public ActionResult MyActionMethod(string myParameter)
{
    // Method implementation goes here... 
} 
```

不过，还有一个替代方案，如果您想处理整个站点的验证，您可以实现自己的请求验证器并将其绑定到 web.config 中。看看这篇关于如何完全实现它的[博客文章。](http://jefferytay.wordpress.com/2010/04/15/creating-your-own-custom-request-validation/)

基本上，创建一个继承自的类，`RequestValidator`然后将其连接到 web.config。

```
<httpRuntime requestValidationType=”Globals.CustomRequestValidation”/> 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:29:41.377

采取另一种方法。在 中`httpRuntime`，指向您的自定义验证类。这种方式可以完全控制传入的请求，因为在处理管道开始时，验证器会在每个请求上触发。

特别是，如果您将验证器实现为 return `true`，您将无条件地接受所有传入的请求。

[http://msdn.microsoft.com/en-us/library/system.web.util.requestvalidator.aspx](http://msdn.microsoft.com/en-us/library/system.web.util.requestvalidator.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-09T14:15:56.090

最简单的方法是从验证系统中删除您想要的字符。

这是[元素](https://msdn.microsoft.com/en-us/library/e1f13641(v=vs.100).aspx)`requestPathInvalidCharacters`的属性及其默认值。[`httpRuntime`](https://msdn.microsoft.com/en-us/library/e1f13641(v=vs.100).aspx)

```
<httpRuntime requestPathInvalidCharacters="&lt;,&gt;,*,%,&amp;,:,\" />
<!-- the unescaped characters are: < > * % & : \  --> 
```

删除您要授权的字符，请求将起作用。

# hibernate - 如何以编程方式生成 Coldfusion ORM 实体和属性

> ID：12202993
> 
> 赞同：0
> 
> 时间：2012-08-30T18:13:07.830
> 
> 标签：hibernate, orm, coldfusion, cfc

假设我想使用 Coldfusion 的 Hibernate ORM。但我不想为每个对象编写 CFC，我有一个详细说明我的架构的配置文件。

我想解析该配置文件并动态生成 ORM。

* * *

或者，如果我有一些 CFC 怎么办

*   博客.cfc
*   标签.cfc

但这种关系具有更“动态”的性质。有没有办法以编程方式添加我自己的属性来关联博客和标签？

* * *

这些例子对于我想要完成的事情来说过于简单，但它们是必要的第一步，而且似乎没有其他人问这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:23:12.450

我编写了一个 CFC 进行数据库自省并为我创建了我的 ORM CFC。就使它们“动态”而言，这实际上取决于动态程度。如果您希望它们如此流畅，您可以传递参数并更改属性，这可能会起作用，但我认为从性能角度来看它不会有效。我也不确定它是否会起作用，因为一旦应用程序加载或调用 ORMReload()，ORM 就会生成所有休眠文件。换句话说，CF 从后台的那些休眠文件中工作。持久 CFC 用作生成这些休眠配置文件的映射。至少，这是我对其工作原理的理解。

您可能想要做的是开发一个直接与 Hibernate 一起工作的接口，这可能允许您使您的 ORM 实体真正“动态”。如果这就是您想要做的，那么您应该会发现此[链接](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSB51B3786-8E55-4a72-ABDB-5707B9A853D9.html)很有帮助。

# android - 如何解析json相似的内部对象？

> ID：12202995
> 
> 赞同：0
> 
> 时间：2012-08-30T18:13:14.807
> 
> 标签：android, json, parsing

我有以下代码

```
{"sports" :[{"name" :"baseball","id" :1,"links" :{"api" :{"sports" :{"href" :"http://api.espn.com/v1/sports/baseball"},"news" :{"href" :"http://api.espn.com/v1/sports/baseball/news"},"notes" :{"href" :"http://api.espn.com/v1/sports/baseball/news/notes"},"headlines" :{"href" :"http://api.espn.com/v1/sports/baseball/news/headlines"},"events" :{"href" :"http://api.espn.com/v1/sports/baseball/events"}}},"leagues" :[{"name" :"Major League Baseball","abbreviation" :"mlb","id" :10,"groupId" :9,"shortName" :"MLB","season" :{"year" :2012,"type" :2,"description" :"regular","startDate" :"2012-03-27T19:00:00Z","endDate" :"2012-10-05T06:59:59Z"},"week" :{"number" :23,"startDate" :"2012-08-28T19:00:00Z","endDate" :"2012-09-04T18:59:00Z"}}]}],"timestamp" :"2012-08-30T18:01:29Z","status" :"success"} 
```

我想解析 json 对象，在运动对象中，我们有另一个运动对象如何用元素数组解析内部 json 对象。

我正在尝试使用以下代码：

```
public class BaseballActivity extends ListActivity{

private static String url = "http://api.espn.com/v1/sports/baseball?apikey=h29yphwtf7893hktfbn7cd5g";

private static final String TAG_SPORTS = "sports";
private static final String TAG_ID = "id";
private static final String TAG_TIMESTAMP = "timestamp";
private static final String TAG_NAME = "name";
private static final String TAG_NEWS = "news";
private static final String TAG_HEADLINES = "headlines";
private static final String TAG_LINKS = "links";
private static final String TAG_API = "api";
private static final String TAG_SPORTS1 = "sports";
private static final String TAG_HREF = "href";

JSONArray sports = null;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // HashMap for ListView

    ArrayList<HashMap<String, String>> sportsList = new ArrayList<HashMap<String, String>>();

    // creating Json parser instance
    JSONParser jParser = new JSONParser();

    // getting Json String from url

    JSONObject json = jParser.getJSONFromUrl(url);

    try{
        // Getting Array of Contacts
                    sports = json.getJSONArray(TAG_SPORTS);

                    // looping through All Contacts
                    for(int i = 0; i < sports.length(); i++){
                        JSONObject c = sports.getJSONObject(i);

            //String news = c.getString(TAG_NEWS);
           // String headlines = c.getString(TAG_HEADLINES);
            String name = c.getString(TAG_NAME);
           // String timestamp = c.getString(TAG_TIMESTAMP);
            String id = c.getString(TAG_ID);

         //   JSONObject links = c.getJSONObject(TAG_LINKS);
          //  JSONObject api = c.getJSONObject(TAG_API);
          //  JSONObject sports = c.getJSONObject(TAG_SPORTS1);

         //   String href = c.getString(TAG_HREF);

            HashMap<String, String> map = new HashMap<String, String>();

         //  map.put(TAG_TIMESTAMP, timestamp);
            map.put(TAG_NAME, name);
           // map.put(TAG_NEWS, news);
           // map.put(TAG_HEADLINES, headlines);
            map.put(TAG_ID, id);
         //   map.put(TAG_HREF, href);
            sportsList.add(map);
         }
    }
        catch (JSONException e) {
            e.printStackTrace();    

        }

    ListAdapter adapter = new SimpleAdapter(this, sportsList,
            R.layout.list_item,
            new String[]{TAG_NAME,TAG_ID} , new int[] {
            R.id.id,R.id.name});

setListAdapter(adapter);
}}

ublic class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;
}} 
```

当我尝试解析内部对象时可以显示名称和 ID 没有输出请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:21:55.970

您应该有一个 Sports 类，其中包含您的 JSON 字符串中的对象

比这应该为你做的工作

JSONObject jObject = new JSONObject(json); jObject.getJSONObject("运动");

这将从您的 JsonString 中生成一个 JSONOBJECT 比您将使用 Googles Gson 库执行以下操作

Gson gson = 新 Gson(); 体育运动 = gson.fromJson(jObject.toString(), Sports.class);

I advise u to have a class to handle all the WebReqeuisitions and not have this code on your Activitys makes your project more structured and your code will be cleaner

# eclipse - SVNException: svn: {file} 不受版本控制

> ID：12202996
> 
> 赞同：0
> 
> 时间：2012-08-30T18:13:19.927
> 
> 标签：eclipse, eclipse-plugin

![在此处输入图像描述](../Images/f1b125a09c0bf28564454492352a912a.png)

我在版本控制下存储一个文件夹。此文件夹是一个虚拟文件夹，显示为单个文件。当我将 flow1.iwp 与“存储库中的最新版本”进行比较时，出现以下错误：

> org.tigris.subversion.javahl.ClientException: svn: '/home/akravets/dev/workspaces/runtime-trunk/test1/Flows/flow1.iwp/.compiledFlow' 不受 org.tigris.subversion.svnclientadapter 的版本控制.javahl.AbstractJhlClientAdapter.diff(AbstractJhlClientAdapter.java:2462) 在 org.tigris.subversion.subclipse.ui.operations.ShowDifferencesAsUnifiedDiffOperationWC.execute(ShowDifferencesAsUnifiedDiffOperationWC.java:50) 在 org.tigris.subversion.subclipse.ui.operations.SVNOperation .run(SVNOperation.java:90) 在 org.eclipse.team.internal.ui.actions.ProgressDialogRunnableContext$3.run(ProgressDialogRunnableContext.java:100) 在 org.eclipse.core.internal.resources.Workspace.run(Workspace. java:1800) 在 org.eclipse.jface 的 org.eclipse.team.internal.ui.actions.ProgressDialogRunnableContext$2.run(ProgressDialogRunnableContext.java:97)。operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 引起：org.tigris.subversion.javahl.ClientException: svn: '/home/akravets/dev/workspaces/runtime-trunk/test1/Flows/flow1.iwp /.compiledFlow' 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.throwException(SVNClientImpl.java:1850) 的 org.tigris.subversion.javahl.JavaHLObjectFactory.throwException(JavaHLObjectFactory.java:778) 不受版本控制org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl.java:2035) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl.java:1990) 在 org.tmatesoft.svn.core。 javahl.SVNClientImpl.diff(SVNClientImpl.java:1985) at org.tigris.subversion.svnclientadapter.javahl.AbstractJhlClientAdapter.diff(AbstractJhlClientAdapter.java:2459) ... 6 更多原因：org.tmatesoft.svn.core.SVNException ：svn: '/home/akravets/dev/workspaces/runtime-trunk/test1/Flows/flow1.iwp/.compiledFlow' 不在 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager .java:64）在 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51) 在 org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.getVersionedEntry(SVNWCAccess.java :621) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465) 的 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499)。 svn.core.wc.SVNDiffClient.doDiffURLWC(SVNDiffClient.java:2725) 在 org.tmatesoft.svn.core.wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl。 diff(SVNClientImpl.java:2024) ... 还有 9 个/home/akravets/dev/workspaces/runtime-trunk/test1/Flows/flow1.iwp/.compiledFlow' 不受 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java: 64) 在 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51) 在 org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.getVersionedEntry(SVNWCAccess.java:621)在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465) 在 org.tmatesoft.svn.core .wc.SVNDiffClient.doDiffURLWC(SVNDiffClient.java:2725) 在 org.tmatesoft.svn.core.wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl .java:2024) ... 还有 9 个/home/akravets/dev/workspaces/runtime-trunk/test1/Flows/flow1.iwp/.compiledFlow' 不受 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java: 64) 在 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51) 在 org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.getVersionedEntry(SVNWCAccess.java:621)在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465) 在 org.tmatesoft.svn.core .wc.SVNDiffClient.doDiffURLWC(SVNDiffClient.java:2725) 在 org.tmatesoft.svn.core.wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl .java:2024) ... 还有 9 个compiledFlow' 不受 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java) 的 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64) 的版本控制:51) 在 org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.getVersionedEntry(SVNWCAccess.java:621) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在org.tmatesoft.svn.core.wc.SVNDiffClient.doDiffURLWC(SVNDiffClient.java:2725) 上的 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465)。 wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl.java:2024) ... 还有 9 个compiledFlow' 不受 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java) 的 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64) 的版本控制:51) 在 org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.getVersionedEntry(SVNWCAccess.java:621) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在org.tmatesoft.svn.core.wc.SVNDiffClient.doDiffURLWC(SVNDiffClient.java:2725) 上的 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465)。 wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl.java:2024) ... 还有 9 个org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51) org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.getVersionedEntry ( SVNWCAccess.java:621) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465) 在 org .tmatesoft.svn.core.wc.SVNDiffClient.doDiffURLWC(SVNDiffClient.java:2725) 在 org.tmatesoft.svn.core.wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl .SVNClientImpl.diff(SVNClientImpl.java:2024) ... 还有 9 个org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51) org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.getVersionedEntry ( SVNWCAccess.java:621) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465) 在 org .tmatesoft.svn.core.wc.SVNDiffClient.doDiffURLWC(SVNDiffClient.java:2725) 在 org.tmatesoft.svn.core.wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl .SVNClientImpl.diff(SVNClientImpl.java:2024) ... 还有 9 个svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465) 在 org.tmatesoft.svn.core.wc.SVNDiffClient。 doDiffURLWC(SVNDiffClient.java:2725) 在 org.tmatesoft.svn.core.wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl.java:2024) ... 9 更多svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:499) 在 org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:465) 在 org.tmatesoft.svn.core.wc.SVNDiffClient。 doDiffURLWC(SVNDiffClient.java:2725) 在 org.tmatesoft.svn.core.wc.SVNDiffClient.doDiff(SVNDiffClient.java:685) 在 org.tmatesoft.svn.core.javahl.SVNClientImpl.diff(SVNClientImpl.java:2024) ... 9 更多

有没有办法可以绕过不受版本控制的文件的比较？在这种情况下，甚至考虑将它们进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:33:20.683

我必须在比较期间添加标志以添加未版本控制的文件：

```
SVNDiffClient diffClient = SVNClientManager.newInstance().getDiffClient(); 
diffClient.getDiffGenerator().setDiffUnversioned(true); 
```

# android - 在同一部安卓手机中安装开发应用程序和播放商店应用程序

> ID：12202997
> 
> 赞同：2
> 
> 时间：2012-08-30T18:13:26.380
> 
> 标签：android, eclipse, google-play

我已经向在真实服务器上运行的 Google Play 商店提交了一个应用程序。另一方面，我仍在使用假服务器改进应用程序。有2台服务器的原因是因为假服务器中的所有数据都不会影响真实服务器。

每当我想用真实服务器做演示时，我都必须卸载测试应用程序并在谷歌播放器上下载真实应用程序。演示后，我必须卸载真正的应用程序，然后在安卓手机上安装我的测试应用程序。每天这样做超过2次之后有点麻烦。

有什么办法可以在同一部手机上同时安装测试和真实应用程序？

我试图重命名我的包名。但我发现 eclipse 中的重构函数不是一个干净的重命名。我必须手动重命名一些文件，这会占用很多时间。只是想知道是否还有其他更好的方法可以做到这一点。如果有一些我可以尝试的建议会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:16:05.240

用您的生产密钥替换您的调试密钥并设置适当的密码以允许签名。这样，Android 将让您更新/覆盖旧版本。

在 Eclipse 中，选择 Window --> Preferences--> Android --> Build

您可以将您的密钥库指向此处

但是，您的密钥库必须使用与默认密钥库相同的配置文件名称和密码。

# python - Python在while循环中输入

> ID：12202998
> 
> 赞同：0
> 
> 时间：2012-08-30T18:13:28.717
> 
> 标签：python, bots, irc

我正在用 python 制作一个 IRC 机器人，现在我想要一些控制台命令。

main 函数在一个 while 循环中，所以我不能把`input_raw()`. 有谁知道如何在不中断循环的情况下获取用户输入。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:59:59.433

您可以尝试将非阻塞套接字与`select`. 就像是：

```
from sys import stdin
from select import select

while True:
    print "Enter command> ",
    # Add on_write sockets as necessary
    on_read, _, _ = select([stdin], [], [], 5)
    if on_read:
        command = stdin.readline()
        print "Now I can process you command..."
    else:
        print "No command, we can do here something else..." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:38:48.740

问题已解决，使用了 Threading，来源：[FaceBot 来源](https://github.com/FaceHunter/FaceBot)