# StackOverflow 问答 12194000-12194999

# java - 卡片布局与内存效率

> ID：12194000
> 
> 赞同：1
> 
> 时间：2012-08-30T09:39:42.050
> 
> 标签：java, swing, memory-management, cardlayout

卡片布局内存的使用效率高吗？例如，如果我将 20 个 JPanel 加载到卡片布局中，它可能会占用大量内存空间。加载几个面板然后再加载一些并卸载不再使用的面板会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:43:20.050

> 加载几个面板然后再加载一些并卸载不再使用的面板会更好吗

A确实会保留对添加到它的`CardLayout`所有 s 的强引用。`Component`所以是的，从记忆的角度来看，`Component`如果您不再需要它们，最好再次删除 s 。

> 卡片布局内存的使用是否有效

可能与任何其他布局一样有效。唯一的区别是您在使用`CardLayout`. 将 20 个面板添加到一个`CardLayout`将或多或少地使用与将它们添加到一个相同的内存量`FlowLayout`

# java - 使用 ConcurrentHashMap

> ID：12194001
> 
> 赞同：2
> 
> 时间：2012-08-30T09:39:46.003
> 
> 标签：java, multithreading

我是 Java 线程的新手，我需要从几个活动线程访问数据结构。我听说*java.util.concurrent.ConcurrentHashMap*是线程友好的。`synchronized(map){}` 访问 ConcurrentHashMap 时是否需要使用它，否则它会自行处理锁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T09:41:11.337

它自己处理锁，实际上您无法访问它们（没有其他选择）

您可以`synchronized`在特殊情况下用于写入，但很少需要这样做。例如，如果您需要实现自己的`putIfAbsent`，因为创建对象的成本很高。

使用 syncrhonized 进行读取会破坏使用并发集合的目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T09:54:35.143

`ConcurrentHashMap`仅适用于您不需要比提供的开箱即用更多的原子性的情况。例如，如果您需要获取一个值，对其进行操作，然后设置一个新值，所有这些都在原子操作中，如果没有外部锁定，这是无法实现的。

在所有这些情况下，没有什么可以替代代码中的显式锁，使用此实现而不是基本的`HashMap`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T09:47:07.553

不，你不需要，但是如果你需要依赖内部同步，你应该使用`Collections.synchronizedMap`。来自的javadoc `ConcurrentHashMap`：

> 在依赖线程安全但不依赖同步细节的程序中，此类与 Hashtable 完全可互操作。

实际上它不会在整个数据结构上同步，而是在它的子部分（一些桶）上同步。这意味着`ConcurrentHashMap`' 的迭代器是弱一致的，并且映射的大小可能不准确。（但另一方面它的 put 和 get 操作仍然是一致的并且吞吐量更高）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T09:41:28.957

简短回答：不，您不需要使用`synchronized(map)`.
长答案：

*   提供的所有操作`ConcurrentHashMap`都是线程安全的，您可以调用它们而不必担心锁定
*   但是，如果您需要在代码中进行一些原子操作，您仍然需要在客户端进行某种锁定

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-02T18:38:37.653

**除了它提供的并发**特性，concurrenthmp还有**一个更重要的特性**需要注意，那就是故障安全迭代器。使用 CHMP 只是因为他们想在迭代时编辑用于放置/删除的条目集。 是另一个。但 ConcurrentModificationException 可能出现在上述情况下。**`Collections.synchronizedMap(Map)`**

# iphone - 应用内购买实施

> ID：12194010
> 
> 赞同：2
> 
> 时间：2012-08-30T09:40:02.400
> 
> 标签：iphone, objective-c, ipad, in-app-purchase

在我的应用程序中，我必须在以下场景中实现应用程序购买：- 应用程序对所有用户免费，即每个人都可以免费下载。我为此实现了 Consumable 类型。在应用程序中有一个选项以 1.99 美元购买 10 个硬币。一旦用户成功完成交易，但当用户再次点击购买 10 个硬币时，它提示“您已经下载了这个应用程序”。我想在那个 wat 中实现应用程序购买，以便用户可以购买 10 个硬币的多种类型？这将是什么类型和场景。

请建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:10:49.737

```
 - (void)requestProductData {
  //  NSLog(@"%@",strCheck);
if ([strCheck isEqualToString:@"inApp"]) {
    myString = strCheck;
    SKProductsRequest *request= [[SKProductsRequest alloc] initWithProductIdentifiers:            [NSSet setWithObject:@"All_labelling"]];
    request.delegate = self;

    [request start];
}

    }
    - (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {
      NSArray *myProduct = response.products;

  SKPayment *payment = [SKPayment paymentWithProduct:[myProduct objectAtIndex:0]];
  [[SKPaymentQueue defaultQueue] addPayment:payment];

      [request autorelease];
   }

    - (void)inAppPurchase {

      reachability = [Reachability reachabilityForInternetConnection];

      NetworkStatus remoteHostStatus = [reachability currentReachabilityStatus];

       if(remoteHostStatus == NotReachable) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"LeaderFollow!" message:@"Network is not found" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
         [alert show];
         [progInd stopAnimating];
          [progInd setHidden:YES];
       }

else if ([SKPaymentQueue canMakePayments]) {
    [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    [self requestProductData];

}
else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Please enable the ability to make purchases." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
  }
    }

   - (void)finishMyTransaction:(SKPaymentTransaction *)transaction {
[[SKPaymentQueue defaultQueue] finishTransaction:transaction];
self.view.userInteractionEnabled=YES;
[[UIApplication sharedApplication] endIgnoringInteractionEvents];
    [progInd stopAnimating];
    [progInd setHidden:YES];

   }

   #pragma mark Payment Delegate
   #pragma mark -

   - (void)recordTransaction:(SKPaymentTransaction *)transaction {
   }

    - (void)provideContent:(NSString *)productIdentifier {

   if([productIdentifier isEqualToString:@"All_labelling"]){
    strCheck=@"inApp";
    myString=strCheck;

   }
   if ([strCheck isEqualToString:@"inApp"]){
    [prefs setBool:YES forKey:@"inApp"];
    if(!isTapped){

        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Congratulations!" message:@"You Have Successfully Purchased All Objects Pack" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }
    [self viewWillAppear:YES];
   }

//}

  [progInd stopAnimating];
  [progInd setHidden:YES];

  }

  - (void)completeTransaction:(SKPaymentTransaction *)transaction {

[self recordTransaction:transaction];
     [self provideContent:transaction.payment.productIdentifier];

    [self finishMyTransaction:transaction];
  }

  -(IBAction)btnRestoreTapped{
    [progInd setHidden:NO];
    [progInd startAnimating];
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
    [[UIApplication sharedApplication]beginIgnoringInteractionEvents];

   }

    - (void)restoreTransaction: (SKPaymentTransaction *)transaction {

[self recordTransaction:transaction];
     [self provideContent:transaction.originalTransaction.payment.productIdentifier];

     [self finishMyTransaction:transaction];

    }

     - (void)failedTransaction: (SKPaymentTransaction *)transaction {

 if (transaction.error.code != SKErrorPaymentCancelled) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:[transaction.error localizedDescription]
                                                    delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];
         }

    [self finishMyTransaction:transaction];
      }

       - (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {
for (SKPaymentTransaction *transaction in transactions) {
    switch (transaction.transactionState) {

        case SKPaymentTransactionStatePurchased:
            [self completeTransaction:transaction];

            break;

        case SKPaymentTransactionStateFailed:
            [self failedTransaction:transaction];

            break;

        case SKPaymentTransactionStateRestored:

            [self restoreTransaction:transaction];

            break;

        default:
            break;
       }

     }

     }
      - (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue{
       [progInd stopAnimating];
        [progInd setHidden:YES];
         [[UIApplication sharedApplication]endIgnoringInteractionEvents];
         if([prefs boolForKey:@"inApp"]){
    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"LeaderFollow!" message:@"You Have Successfully Restored   Pack(s)" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
        [prefs setObject:@"YES" forKey:@"Restore"];
        }
        else{
           UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"LeaderFollow!" message:@"No purchases to restore" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
           [alert show];
          [alert release];
     }
       isTapped=NO;
      }

     - (void)paymentQueue:(SKPaymentQueue*)queue restoreCompletedTransactionsFailedWithError:(NSError*)error
     {
      [[UIApplication sharedApplication]endIgnoringInteractionEvents];
      [progInd stopAnimating];
      isTapped=NO;
      self.view.userInteractionEnabled=YES;
       [progInd setHidden:YES];
   } 
```

# iphone - iphone sdk 应用内购买错误

> ID：12194017
> 
> 赞同：1
> 
> 时间：2012-08-30T09:40:09.767
> 
> 标签：iphone, ios, in-app-purchase

我在我的应用程序中实现了应用内购买。我需要在我的应用程序中使用应用内购买购买产品。为此，我将我的产品 app_id 添加到我的 iTunes 空调中。

这是我的代码参考，

代码：

**视图控制器.m**

```
NSMutableArray *featuredappidArray; 

- (void)viewDidLoad 
{
[super viewDidLoad];
featuredappidArray=[[NSMutableArray alloc]init];

 }

-(void)parseRecentPosts:(NSString*)responseString
{
    NSString *app_store_id = [NSString stringWithFormat:@"%@",[post   objectForKey:@"app_store_id"]];
            NSLog(@"Recent Post app_store_id: %@",app_store_id);
            [featuredappidArray addObject:app_store_id];
            indexvalue=ndx;
 }

 - (void)buttonTapped:(UIButton *)sender
 {

     [detailview Receivedappidurl:featuredappidArray idx:indexvalue];

 } 
```

**DetailViewController.h**

```
-(void)Receivedappidurl:(NSMutableArray*)recentappidArray idx:(int)index; 
```

**细节视图控制器.m**

```
NSMutableArray *appidArray;

-(void)Receivedappidurl:(NSMutableArray*)recentappidArray idx:(int)index
{
      NSLog(@"recentappidArray:%@",recentappidArray);
      appidArray=recentappidArray;
} 
```

现在我的控制台窗口从我的 Web 服务接收所有 app_id。

我在我的项目中添加了应用内购买所需的类，例如 IAPHelper、InAppRageIAPHelper、MBProgressHUD、Reachability 类。

```
-(IBAction)purchaseButton
{

   NSLog(@"appidarray:%@",appidArray);
   NSLog(@"pdt index:%d",productIndex);
   NSLog(@"APPLe indentifier:%@",[[appidArray objectAtIndex: productIndex] objectForKey:  @"app_store_id"]);
    [InAppRageIAPHelper sharedHelper].productIndex = productIndex;
    [[InAppRageIAPHelper sharedHelper] buyProductIdentifier:[[appidArray objectAtIndex: productIndex] objectForKey: @"app_store_id"]];

    self.hud = [MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES];
    _hud.labelText = @"Buying Book...";
    [self performSelector:@selector(timeout:) withObject:nil afterDelay:60*5];
} 
```

在这里，当我点击购买按钮时，我的应用程序崩溃并出现以下错误，“由于未捕获的异常 'NSInvalidArgumentException' 而终止应用程序，原因：'-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x9154ad0'”

我参考了很多教程。如何使用这个购买？请帮我解决这个问题。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:46:11.087

这使您的代码崩溃

```
[[appidArray objectAtIndex: productIndex] objectForKey:  @"app_store_id"] 
```

这很可能是因为`[appidArray objectAtIndex: productIndex]`返回一个字符串，而不是字典。

第一步：您需要像这样从商店加载商品：

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
SKProductsRequest *productsRequest = [[[SKProductsRequest alloc] initWithProductIdentifiers:yourProductIdentifiers autorelease]; 
productsRequest.delegate = self;
[productsRequest start]; 
```

PS。您可以在网络上的“管理应用内购买”部分中找到您的产品标识符

完成此操作后，您将收到一份产品清单，并购买其中任何一种：

```
SKPayment *payment = [SKPayment paymentWithProduct:product];
[[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

# c++ - 用于存储数字窗口并返回唯一数字的标准容器/库？

> ID：12194021
> 
> 赞同：0
> 
> 时间：2012-08-30T09:40:26.747
> 
> 标签：c++, std

我正在寻找具有以下功能的 C++ 标准容器/库：

1.  存储数字窗口（入队和出队就足够了）。
2.  返回窗口中唯一数字的数量。

它可以是合并 std::queue 和 std::set 功能的东西。

已编辑：示例预期操作。对于这个序列 '1 2 3 3 4 4 5 5 6 6 7 7 8' 和 2 的窗口大小，我们将有以下步骤：

1.  窗口 = [1 2]，唯一的 = 2
2.  窗口 = [2 3]，唯一的 = 2
3.  窗口 = [3 3]，唯一的 = 1
4.  窗口 = [3 4]，唯一的 = 2
5.  等等 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:50:57.807

You want two containers:

*   a `deque<number>` to store the numbers in the window in order;
*   a `map<number, size_t>` (or `unordered_map` if available) to store the count of each unique number.

Then your operations are:

```
void push(number n) {
    deque.push_back(n);
    ++map[n];
}

void pop() {
    auto found = map.find(deque.front());
    assert(found != map.end());
    assert(found->second > 0);
    if (--found->second == 0) {
        map.erase(found);
    }
    deque.pop_front();
}

size_t count_unique() {
    return map.size();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:21:04.637

Thanks to [Mike](https://stackoverflow.com/users/204847/mike-seymour), here is the complete class:

```
#include <stdio.h>
#include <assert.h>

using namespace std;
#include "map"
#include "deque"

class window{
    private:
        std::deque<int> numbers;
        std::map<int, size_t> unique;
    public:
        window(){};
        void push(int n) {
            numbers.push_back(n);
            ++unique[n];
        }

        void pop() {
            map<int, size_t>::iterator found = unique.find(numbers.front());
            assert(found != unique.end());
            assert(found->second > 0);
            if (--found->second == 0) {
                unique.erase(found);
            }
            numbers.pop_front();
        }

        size_t count_unique() {
            return unique.size();
        }
}; 
```

And this is the test case:

```
int main(){
    // example list '1 2 3 3 4 4 5 5 6 6 7 7 8'
    int list[13] = {1, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8};
    window w1;
    w1.push(list[0]);w1.push(list[1]);

    int i=0;
    printf("The list is: ");
    for(i=0; i<13; i++){
        printf("%d ",list[i]);
    }
    printf("\n");

    for(i=0; i<11; i++){
        printf("[%d] Unique ones: %d\n",i+1,w1.count_unique());
        w1.push(list[i+2]);w1.pop();
    }

    return 0;
} 
```

# javascript - 无法运行构造函数：TypeError：Object # 没有方法'addPlugin'

> ID：12194026
> 
> 赞同：0
> 
> 时间：2012-08-30T09:40:40.870
> 
> 标签：javascript, cordova

我正在尝试将 macaddress 插件添加到我的项目中。但我得到的是来自日志聊天的“无法运行构造函数：TypeError：Object # has no method 'addPlugin' at file:///android_asset/www/javascripts/cordova-2.0.0.js:297”。任何人都可以知道我该如何处理它以使我的插件工作。我正在使用来自[https://github.com/phonegap/phonegap-plugins/tree/master/Android/MacAddress](https://github.com/phonegap/phonegap-plugins/tree/master/Android/MacAddress)的插件。在我的 application.js 文件中，我写了

```
 function onLoad() {
        console.log('Init reached');
        document.addEventListener('deviceready', onDeviceReady, false);
    }

    function onDeviceReady() {

        console.log('Starting up...');
    //  navigator.app.overrideBackbutton(true);
        document.addEventListener("backbutton", onBackKeyDown, false);

    }

function getMacAddress(){
    /*get macaddress*/
    var networkInterface = {};
    // Get network interface   
    networkInterface = window.plugins.macaddress.getMacAddress();

    console.log(networkInterface.mac);
    $("#wifi_mac_address").text(networkInterface.mac);   
} 
```

在 index.html 文件中，我写了

```
<!DOCTYPE html>
<html>
    <head>
        ...
    <script type="text/javascript" charset="utf-8" src="javascripts/cordova-2.0.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="javascripts/application.js"></script>
        <script type="text/javascript" charset="utf-8" src="javascripts/jquery/jquery.mobile-1.1.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="javascripts/MacAddress.js"></script>

   </head>
    <body onload="onLoad()">
         ...

          <li data-theme="c">
                 WiFi mac address:
                 <span id="wifi_mac_address">
                 123
                 </span>
          </li>

         ...
    </body>
</html> 
```

我开始 phonegap 和 Jquery mobile 仅 3 周。如果你知道，请给我一些建议来解决它。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:29:11.213

您的脚本放置错误，当您尝试运行您的 mac 地址功能时，您还没有加载您的 MacAdress.js，要解决您的问题，您需要像这样放置脚本：

```
<script type="text/javascript" charset="utf-8" src="javascripts/cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8" src="javascripts/jquery/jquery.mobile-1.1.1.js"></script>
<script type="text/javascript" charset="utf-8" src="javascripts/MacAddress.js"></script>
<script type="text/javascript" charset="utf-8" src="javascripts/application.js"></script> 
```

# c# - 如何在 c#.net 中将 Outlook 邮件文件正文内容显示到 RichTextBox 中？

> ID：12194038
> 
> 赞同：0
> 
> 时间：2012-08-30T09:41:27.073
> 
> 标签：c#, outlook

我有一个 Outlook 消息文件，使用下面的代码转换成流

```
Stream messageStream = File.Open(MessageFileName, FileMode.Open, FileAccess.Read); 
```

将此流放入 OutlookStorage.Message 对象，如下所示。

```
OutlookStorage.Message message = new OutlookStorage.Message(messageStream); 
```

我正在将此消息对象正文显示到 RichTextBox 中。

```
RichTextBox1.Text = message.BodyText; 
```

在 RichTextBox1 中，我只能看到图像中的文本数据和任何未显示在richtextbox 中的格式化数据

我的要求是我想在 Richtextbox 中显示消息正文，无论它可能是图像、格式化文本还是其他任何东西。我怎样才能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:47:30.423

您需要使用`message.BodyRTF`而不是`message.BodyText`. 要将其显示在 RichTextBox 中，请使用`Rtf`：

```
RichTextBox1.Rtf = message.BodyRTF; 
```

# typo3 - 如果选择结果为空，则选择其他 PID

> ID：12194040
> 
> 赞同：0
> 
> 时间：2012-08-30T09:41:30.713
> 
> 标签：typo3, typoscript

我得到了这个 TS：

```
markers.input_readonly_b_price = CONTENT
markers.input_readonly_b_price {
        table = tx_pricelist_prices_full
        select {
          pidInList = 27
          orderBy = uid
          selectFields = uid, group_b_1_3
          # possible conditions
           where = ( hidden='0' AND deleted='0')
        } 
        renderObj = COA
        renderObj {
          #value  
          1 = TEXT
          1.insertData = 1 
          1.data = field:group_b_1_3
          2 = TEXT
          2.value = *
          3 = TEXT
          3.insertData = 1 
          3.data = TSFE:fe_user|sesData|finish_day          
          stdWrap.prioriCalc = 1   
        }
      } 
```

我需要使用该条件更改该 TypoScript：

如果在 id 为 27 的页面上 -`pid=27`内部记录将具有状态`deleted/hidden`，则从`pid=20`else 读取数据（有一条记录可见）从读取数据`pid=27`

会有`pid=20`一个记录（总是）。在“pid=27”上将是一条记录，但有时隐藏，有时可见。

有谁知道如何设置这个条件？

# google-maps - Google Maps API V3：如何获取区域边界坐标（折线）数据？

> ID：12194046
> 
> 赞同：34
> 
> 时间：2012-08-30T09:42:00.167
> 
> 标签：google-maps, google-maps-api-3, coordinates, google-polyline

我试图从谷歌地图获取（指定的）区域边界作为 GMaps 坐标（形成折线）。这在某种程度上可能吗？（来自 maps.google.com 或我自己域中的我自己的 GMaps）。

**注意：** 我知道您可以使用专用工具（例如[http://www.birdtheme.org/useful/v3tool.html](http://www.birdtheme.org/useful/v3tool.html)）手动绘制/勾勒区域，但是准确地覆盖大区域是一项繁重的工作。在这种情况下，自己绘制答案不是一种选择。

## 例子：

1.  [https://maps.google.com/](https://maps.google.com/) -> 输入“芬兰乌西马”
2.  您可以看到勾勒出所需区域的粉红色边框
3.  那个边界是我需要坐标的折线

## 要求：

*   从给定的搜索中提取区域数据坐标（如果可用）（如示例中所示）
*   如果前一个不可行，则需要“芬兰 Uusimaa”地区的准确地图的来源（普通的谷歌搜索没有产生所需的结果）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T10:07:18.873

这正在成为一个常见问题解答。请参阅对这些问题的答复：

[在谷歌地图结果中添加“搜索区域”轮廓](https://stackoverflow.com/questions/9706484/add-search-area-outline-onto-google-maps-result)

[谷歌已开始以粉色突出显示搜索区域。Google Maps API 3 中是否提供此功能？](https://stackoverflow.com/questions/11207045/google-has-started-highlighting-search-areas-in-pink-color-is-this-feature-avai)

# php - Yii gii 俄语文本不可见

> ID：12194048
> 
> 赞同：0
> 
> 时间：2012-08-30T09:42:07.133
> 
> 标签：php, encoding, sqlite, yii

我是 Yii 的新手。我已经创建了 sqlite DB，将它包含在 Yii 配置中。后来通过 gii，我创建了对该数据库的访问。我可以看到我的数据库表及其行，但俄语字符不可见。如果我尝试借助 gii 生成的 Web 界面创建行，情况相同。英文文本显示正常。但是如果我通过命令行使用 sqlite3 连接到这个数据库并输入 SELECT 命令，我可以看到俄语文本很好！

如何让俄语可见？也许一些编码错误？

我的 Yii 项目[**的备份在这里**](https://www.dropbox.com/s/w54f2hnqw5mjs08/www.rar)，里面有 sqlite db！

PS当我这样做时：

```
Yii::createWebApplication($config);
Yii::app()->charset='cp1251';
Yii::app()->run(); 
```

俄语文本可见，但看起来不是俄语。例如：*„Ґбпвм ҐЈаЁвпв/ Ј«Ё©бЄЁ© (Ќ®ў.®д.)*

同时，如果我通过 gii 界面将此文本更改为另一个俄语 - 它工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:39:20.310

尝试将字符**编码**设置为如下：`UTF8``config.php`

```
 'db'=>array(
        'connectionString' => 'sqlite:'.dirname(__FILE__).'/ /data/testdrive.db',
        'charset' => 'utf8',
    ), 
```

# javascript - jQuery .scrollTop 混淆

> ID：12194049
> 
> 赞同：1
> 
> 时间：2012-08-30T09:42:07.407
> 
> 标签：javascript, jquery, scrolltop

有人可以帮我处理这个 JavaScript 吗？

我想`div`在您向下滚动超过 1000 像素时显示，目前它适用于下面的脚本，但在滚动时会立即显示。

我试着设置它`>1000`，它根本不显示？

有任何想法吗？

```
$(window).scroll( function(){

    /* Check the location of each desired element */
    $('.hideme').each( function(i){

        /* If the object is completely visible in the window, fade it in */
        if ($(this).scrollTop() < 1000){
            $(this).animate({'opacity':'1'},900);
        }
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:10:50.223

希望这会有所帮助？

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script>
    $(window).scroll( function(){
        /* Check the location of each desired element */
        $('.hideme').each( function(i){
            console.log($(window).scrollTop());
            if ($(window).scrollTop() < 500){
                $(this).stop().animate({
                    opacity: 1.0
                },900);
            } else {
                $(this).stop().animate({
                    opacity: 0.0
                },900);
            }
        }); 
    });
    </script>
</head>
<body style="height: 1500px;">

<div style="width: 400px; height: 50px; position: absolute; top: 500px; background-color: silver; opacity: 0.0;" class="hideme">asdsa</div>

</body>
</html> 
```

我稍微改变了功能，希望你知道该怎么做；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:50:27.397

哦，亲爱的..已修复:)

if ($(window).scrollTop() > 1200 ) {

需要从窗口设置而不是 .hideme div ($this)

# email - 发送 CFmail 需要多长时间？

> ID：12194052
> 
> 赞同：1
> 
> 时间：2012-08-30T09:42:16.860
> 
> 标签：email, coldfusion, coldfusion-9

我正在制作一个创建自定义 PDF 的应用程序，将其邮寄，然后将其删除。我已经分别测试了所有 3 个组件并且它们可以工作，但是当我将它们放在一起时，电子邮件不会发送。

是否有可能在发送电子邮件之前删除附件，即使删除位于脚本中的附件之后？

这是我的代码。

```
<!---Get the PDF--->
<cfscript>
    PDFBuilder = createobject("component", "form_admin.email.PDFBuilder" ); 
    pdf = PDFBuilder.createPDF(form_id);
</cfscript>

<!---Create link to the pdf --->
<cfscript>
    foo =  expandPath('../email/tmp/')  & pdf & '.pdf';
</cfscript>

<!---Create email--->
<cfmail to="will@hazardousfrog.com"
        from="will@hazardoufrog.com"
        subject="Jag intrest form. "
        type="text/html" >
    <cfmailparam file="#foo#">

    Dear #getEmail.title#, #getEmail.first_name# #getEmail.surname# <br />
    Attached is a PDF boucher telling you more information about the cars you were interested in.  <br />
    Best wishes <br />
    Jaguar <br /><br /><br /><br /><br /><br /><br /><br />
    This is not actually jaguar this is a test application by Hazardousfrog.
</cfmail>

<!---Delete the file after it has been sent ---> 
<cfif FileExists(#foo#)> 
    <cffile action="delete"
            file="#foo#">
<cfelse>
    <cfoutput >
        error
    </cfoutput>
    <cfabort>
</cfif> 
```

抱歉，如果代码不是很好，我只做了 2 周的 CF。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T09:54:51.447

好的，我设法从一个工作朋友那里得到了答案。

当 cfmail 被处理时，邮件被保存到一个假脱机并在大约 3 分钟后定期发送出去。就我而言，这意味着在发送邮件之前删除了电子邮件 PDF 附件，因此邮件无法发送。

[ColdFusion 邮件标签](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f8e.html)有一个属性，可以立即发送或保持假脱机状态。

> spoolenable ：是假脱机邮件还是总是立即发送。

因此，为了让我的代码正常工作，我将此行添加到我的邮件属性中。

```
spoolenable="false" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T11:06:22.290

另一种选择是使用 cfmailparam 标签的 remove 属性，它会告诉 CF 在文件发送后删除文件。这样，您的 spoolenable 属性可以为真，它应该可以按需要工作。版本 8.0.1 中引入了 remove 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T09:59:36.183

我还会`fileExists()`在 cfmail 代码周围放置一个关于 pdf 文件是否确实已创建的内容。

# jquery - 使用 jquery 显示/隐藏字段集

> ID：12194054
> 
> 赞同：0
> 
> 时间：2012-08-30T09:42:22.590
> 
> 标签：jquery, html

我有以下html代码：-

```
<!DOCTYPE html>
<html>
    <body>
        <fieldset>
            <legend>
                <button>
                    Show/Hide form
                </button>
            </legend>
            Name:
            <input type="text" />
            <br />
            Email:
            <input type="text" />
            <br />
            Date of birth:
            <input type="text" />
        </fieldset>

        <fieldset>
            <legend>
                <button>
                    Show/Hide form
                </button>
            </legend>
            Name:
            <input type="text" />
            <br />
            Email:
            <input type="text" />
            <br />
            Date of birth:
            <input type="text" />
        </fieldset>

        <fieldset>
            <legend>
                <button>
                    Show/Hide form
                </button>
            </legend>
            Name:
            <input type="text" />
                <br />
            Email:
            <input type="text" />
                <br />
            Date of birth:
            <input type="text" />
        </fieldset>

    </body>
</html> 
```

但是，如果用户单击“显示/隐藏表单”按钮，我如何显示和隐藏字段集，并且有没有办法根据字段集的当前状态将按钮标签更改为显示或隐藏？BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:45:09.143

当`fieldset`被隐藏时，您的按钮也被隐藏。您可以修改您的标记和使用`toggle`方法：

```
<button class='toggle'>Hide</button>
<fieldset>
Name: <input type="text" /><br />
Email: <input type="text" /><br />
Date of birth: <input type="text" />
</fieldset> 
```

```
$('.toggle').click(function(){
   var $this = $(this);
   $this.text( $this.text() == 'Show' ? "Hide" : "Show" )
   $this.next().toggle()
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:05:28.583

您的 HTML 代码：

```
<button>Show/Hide form</button>

    <fieldset>
    <legend></legend>
    Name: <input type="text" /><br />
    Email: <input type="text" /><br />
    Date of birth: <input type="text" />
    </fieldset>
    <br />
    <button>Show/Hide form</button>
    <fieldset>
    <legend></legend>
    Name: <input type="text" /><br />
    Email: <input type="text" /><br />
    Date of birth: <input type="text" />
    </fieldset>
    <br/>
    <button>Show/Hide form</button>
    <fieldset>
    <legend></legend>
    Name: <input type="text" /><br />
    Email: <input type="text" /><br />
    Date of birth: <input type="text" />
    </fieldset> 
```

你的 jQuery 代码：

```
 $(function(){
        $('button').click(function(){  
                if( $(this).html()=='Show/Hide form') $(this).html('Hide');
            $(this).nextAll('fieldset:first').toggle();

            $(this).html()=='Show'?($(this).html('Hide')):($(this).html('Show'));
        });
    }) 
```

你的 JSFIDDLE：

[http://jsfiddle.net/bzAkL/](http://jsfiddle.net/bzAkL/)

# php - iPhone 主屏幕 Web 应用程序和保持登录状态

> ID：12194059
> 
> 赞同：2
> 
> 时间：2012-08-30T09:42:38.603
> 
> 标签：php, iphone, web-applications, local-storage, homescreen

当我使用浏览器时，我一直在使用 PHP Session 保持登录状态，但是当我将 Web 应用程序保存到主屏幕并启动应用程序时，我每次打开应用程序时都必须登录。有没有办法保持登录状态？

当我查看本地存储时，任何人都可以提供代码示例或指出正确的方向，并且不确定在我登录时如何设置 LocalStorage 值以及如何检查该值是否存在。

注意：我目前使用 PHP 登录

谢谢

**索引.php**

```
<script type="text/javascript">
    <?php echo $_SESSION['logged'];?> 
    <?php if ($_GET['logged'] == 1){?>
        $.cookie( 'loggedin', '1',  { expires: 7, path: '/' } );
    <?php }?>
        if( $.cookie('loggedin') == '1' ) { 
            <?php $userlog = true?>
            $.cookie( 'loggedin', '1',  { expires: 7, path: '/' } );
        } else {
            <?php $userlog = false?>
        $.cookie( 'loggedin', '0',  { expires: 7, path: '/' } );        
        }
</script> 
```

$_SESSION['logged'] 是从 sign-in.php 文件中设置的

**登录.php**

```
 if($count==1) {
        session_register("username");
        $_SESSION['logged']= $user;
        header("location: /?logged=1");
    } else {
        echo "Your Login Name or Password is invalid";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:45:01.737

我很确定您不需要 LocalStorage。

只需设置一个在未来过期的 cookie，而不是会话 cookie（当浏览器关闭时会被删除）。

您可能无法为此使用 PHP 会话，因为它们会被定期删除。相反，您必须自己处理登录 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:16:20.683

我不确定是什么问题，但是如果您想要可持续的本地存储，请检查您是否已登录，在您的 iOS 应用程序关闭后，这里是：

将标志设置为用户默认值，例如：

```
 [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"isLogin"]; 
```

然后在应用程序启动时检索此值以检查您是否已登录：

```
 BOOL isLogin = [[NSUserDefaults standardUserDefaults] valueForKey:@"isLogin"]; 
```

现在相应地执行您需要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:32:11.483

我目前使用 LocalStorage 工作正常

# python - 当客户端连接不稳定时，在 heroku 上运行的 django 中的工作人员会挂在帖子上

> ID：12194070
> 
> 赞同：5
> 
> 时间：2012-08-30T09:43:21.770
> 
> 标签：python, django, post, heroku, gunicorn

我们在 heroku 上运行 django/gunicorn 服务器。我们的大多数用户所在的国家/地区的移动网络都不是那么好，因此他们的连接经常不稳定。

我们的大多数请求都是来自移动设备的“原始帖子”，似乎即使 POST 请求没有完全传输，请求也已经被发送给 gunicorn worker 处理。当工作人员尝试处理请求并读取数据时，它只是挂起等待剩余的数据。虽然这种行为对于在“流”模式下读取文件/图像数据是有意义的，但在我们的案例中却没有意义，因为我们所有的帖子都相对较小，可以很容易地被整个 Web 服务器读取，然后才转发到我们的 gunicorn工人。

当我们有许多这样的并行请求时，这种早期切换会导致麻烦——因为所有工作人员都可能被阻塞。目前，我们通过增加工人/测功机的数量来解决这个问题，但这非常昂贵。我找不到任何方法来强制 Web 服务器或 gunicorn 等待，并且只有在请求完全传输后才将请求转发给工作人员。

有没有办法让heroku的Web服务器/gunicorn仅在客户端完全传输请求（服务器完全接收）时才将请求传输给gunicorn工作者？

一些示例代码（我们添加了 newrelic 'per-instruction' tracking 以确保这是导致问题的确切行）：

```
def syncGameState(request):
    transaction = agent.current_transaction()
    with agent.FunctionTrace(transaction, "syncGameState_raw_post_data", 'Python/EndPoint'):
        data = request.raw_post_data
    with agent.FunctionTrace(transaction, "syncGameState_gameStateSyncRequest", 'Python/EndPoint'):
        sync_request = sync_pb2.gameStateSyncRequest()
    with agent.FunctionTrace(transaction, "syncGameState_ParseFromString", 'Python/EndPoint'):
        sync_request.ParseFromString(data) 
```

这是此示例慢速请求的 New Relic 测量结果（它是一个包含 7K 数据的 POST）。读取 POST 需要 99% 的方法时间....

![在此处输入图像描述](../Images/15b09113b5477410924a295d2478eb7b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T20:16:36.300

[您可能希望阅读本文](http://blog.etianen.com/blog/2014/01/19/gunicorn-heroku-django/)并研究一个请求缓冲 HTTP 服务器，例如 Waitress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:43:35.393

在我看来，这里真正的问题是 gunicorn 正在阻塞。这是因为 gunicorn（默认情况下）使用同步工作者来运行您的任务。这意味着当 Web 请求命中 gunicorn 时，它将阻塞，直到它返回响应 - 在您的情况下，很长一段时间。

为了解决这个问题，你可以使用 gevent 和 gunicorn 来做非阻塞 IO。由于您的大部分时间都花在做 IO 事情上，这将确保 gunicorn 可以并行处理更多的 Web 请求。

要将 gevent 与 gunicorn 一起使用，您需要安装 gevent ( `pip install -U gevent`)，并通过添加更改您的 gunicorn 启动命令：（`gunicorn -k gevent`这将告诉 gunicorn 使用 gevent 作为工作器）。

# php - 在jquery甘特图上自动更新时间戳

> ID：12194074
> 
> 赞同：3
> 
> 时间：2012-08-30T09:43:31.627
> 
> 标签：php, jquery, ajax, timestamp

我创建了一个甘特图，用作轮换班图，用于使用交付驱动程序和可用时间。我想要甘特图做的是，每次打开时更新到当天。目前它使用unix时间戳来显示日期和时间。用于加载甘特图的 jquery 是：

```
 $(".gantt").gantt({
      source: "ajax.php?action=planner",
      navigate: 'scroll',
      scale: 'hours',
      maxScale: 'hours',
      minScale: 'hours'
  }); 
```

用于信息的来源是：

```
case 'planner':

 $json = array();

 $values = array();

 $values[] = array('from' = > '/Date(1344357102000)/', 'to' = > '/Date(1344357102000)/', 'desc' = > '<b>Task #</b>1<br><b>Data</b>: [2011-02-02 09:00:00 - 2011-02-02 12:30:00] ', 'customClass' = > 'ganttRed');
 $json[] = array('name' = > 'Aadil', 'desc' = > 'Progam', 'values' = > $values);

 echo json_encode($json);

 break; 
```

有关如何在不每次更改时间戳的情况下自动更新日期的任何信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:46:03.013

您可以只使用 PHP 变量作为日期。

在这里查看更多信息： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# c++ - Visual C++ 内联 x86 程序集：访问“this”指针

> ID：12194083
> 
> 赞同：6
> 
> 时间：2012-08-30T09:43:53.173
> 
> 标签：c++, visual-c++, x86, this, inline-assembly

根据 MSDN 文档，当使用类函数的默认[__thiscall调用约定时，“this”指针存储在 ECX 中。](http://msdn.microsoft.com/en-us/library/ek8tkfbw%28v=vs.100%29.aspx)尽管在翻译常规 C++ 代码时肯定会出现这种情况，但我在尝试使用内联汇编访问“this”时遇到了问题。

这是测试程序：

```
#include <cstdio>

class TestClass
{
    long x;

    public:
        inline TestClass(long x):x(x){}

    public:
        inline long getX1(){return x;}
        inline long getX2()
        {
            _asm
            {
                mov eax,dword ptr[ecx]
            }
        }
};
int main()
{
    TestClass c(42);

    printf("c.getX1() = %d\n",c.getX1());
    printf("c.getX2() = %d\n",c.getX2());

    return 0;
} 
```

两个 Get 函数翻译如下：

```
?getX1@TestClass@@QAEJXZ (public: long __thiscall TestClass::getX1(void)):
  00000000: 8B 01              mov         eax,dword ptr [ecx]
  00000002: C3                 ret

?getX2@TestClass@@QAEJXZ (public: long __thiscall TestClass::getX2(void)):
  00000000: 8B 01              mov         eax,dword ptr [ecx]
  00000002: C3                 ret 
```

我认为可以肯定地说这两个功能是相同的。然而，这是程序的输出：

```
c.getX1() = 42
c.getX2() = 1 
```

显然，当调用第二个 Get 函数时，“this”*不会*存储在 ECX 中，所以我的问题是：如何确保包含内联汇编的类函数遵循调用约定和/或以与常规/非内联相同的方式调用职能？

编辑：主要功能是这样翻译的：

```
_main:
  00000000: 51                 push        ecx
  00000001: 6A 2A              push        2Ah
  00000003: 68 00 00 00 00     push        offset $SG3948
  00000008: E8 00 00 00 00     call        _printf
  0000000D: 83 C4 08           add         esp,8
  00000010: 8D 0C 24           lea         ecx,[esp]
  00000013: E8 00 00 00 00     call        ?getX2@TestClass@@QAEJXZ
  00000018: 50                 push        eax
  00000019: 68 00 00 00 00     push        offset $SG3949
  0000001E: E8 00 00 00 00     call        _printf
  00000023: 33 C0              xor         eax,eax
  00000025: 83 C4 0C           add         esp,0Ch
  00000028: C3                 ret 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T10:21:59.160

不知道你是不是看错文档了，还是写的不好，但**不代表**指针`__thiscall`存储 在*ECX*中；这意味着指向对象的指针 在 ECX中*传递。*在较大的函数中，我看到它在函数的不同位置从一个寄存器移动到另一个寄存器，在某些情况下，我看到它溢出到内存中。你不能指望它在 ECX 中。它的位置可以根据函数中的其他代码以及传递给编译器的优化标志而改变。**`this`**

 ****在您的情况下，由于您的函数是内联的，并且可能已经内联，因此问题变得更加复杂。（除了 `_asm`可能会抑制内联。）常量传播（一种非常简单且广泛使用的优化技术）几乎肯定意味着您的调用`c.getX1()`将只使用`42`，没有函数调用，也无法访问`c`任何内容。

通常，内联汇编器是一个棘手的问题，正是因为您不知道编译器使用什么寄存器来做什么。通常，除了实际的汇编器指令外，还会有指令告诉编译器您使用哪些寄存器和哪些变量，您将能够在汇编器中引用变量本身以及其他此类信息。除非您使用这些，否则您可以对内联汇编器做出非常非常少的假设。

但是每个编译器都有自己的规则。通常使用特殊的语法。`mov eax, [cx].x`例如，或者`mov eax, x`，可能是 Microsoft 内联汇编程序需要的东西。无论如何，编译器不可能从您所写的内容中推断出您正在访问`c.x`. 而且由于所有其他用途都已通过常量传播消除，因此它甚至会生成一个非常糟糕的编译器 variable `c`。

编辑：

FWIW：Microsoft 内联汇编器的文档位于 [http://msdn.microsoft.com/en-us/library/4ks26t93%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/4ks26t93%28v=vs.71%29.aspx)。我没有详细看它，但是有一节是关于“在 __asm 块中使用 C 或 C++ 符号”。这可能会解释如何`x`以编译器知道`x`已被访问的方式访问内联汇编程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T10:31:33.603

问题是，根据我对 MS 编译器的了解，编译器不知道它`[ecx]`与 相同`this->x`，因此编译器不知道正在访问成员变量（通过函数跟踪数据流很棘手）。

编译器已经优化了对对象构造函数的调用，并内联了`getX1`将传递给构造函数的常量。这意味着在调用时未正确构造对象，`getX2`因为从编译器的角度来看，该函数`getX2`不会访问任何成员，因此不需要正确构造它。在 MS 编译器中，我还没有看到告诉编译器正在使用成员变量的方法，即使在使用`[ecx]TestClass.x`.

而且，已经多次提到`inline`的内容通常被编译器忽略，编译器对何时最好内联代码有更好的了解。在这种情况下，带有`_asm`块的函数没有被内联，其他函数被内联/重写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:04:32.030

`this`实际上存储在`ecx`中，至少是如果对象没有被优化掉的地址：

```
00000010: 8D 0C 24           lea         ecx,[esp] 
```

问题是优化器并不真正理解汇编代码，所以代码正确性的责任在你身上。它只是删除了该对象，因为它看到它可以将其内联`42`到`printf`调用中，例如：

```
printf("c.getX1() = %d\n",42); 
```

为了使它工作，定义`getX2`为`noinline`：

```
long __declspec(noinline) getX2() { ... } 
```

这使得优化器将其视为一个完整的黑盒，因此它不会对它是否访问`c`对象做出任何假设。这确实对我有用，但没有记录。

相反，我建议您不要在 MSVC 中使用内联汇编，它甚至不支持 64 位编译。改用 MASM，这也将消除未来的挫败感。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T09:50:12.920

由于您已内联该函数，编译器不知道它必须`ecx`在调用 asm 代码之前正确设置，尤其是当函数的其余部分不使用任何对象属性或方法时。

尝试非`inline`先声明和定义方法。`getX2`在不同的翻译单元中定义非内联非成员函数可能会更好，因此编译器的优化机会受到限制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T11:05:22.370

这就是我设法使函数正确工作的方法（即在 ECX 中传递“this”）：

**测试类.hpp**：

```
class TestClass
{
    long x;

    public:
        inline TestClass(long x):x(x){}

    public:
        long getX1();
        long getX2();
}; 
```

**测试类.cpp**：

```
#include "testclass.hpp"

long TestClass::getX1()
{
    return x;
}
long TestClass::getX2()
{
    _asm
    {
        mov eax,dword ptr[ecx]
    }
} 
```

**测试main.cpp**：

```
#include <cstdio>
#include "testclass.hpp"

int main()
{
    TestClass c(42);

    printf("c.getX1() = %d\n",c.getX1());
    printf("c.getX2() = %d\n",c.getX2());

    return 0;
} 
```

**输出**：

```
c.getX1() = 42
c.getX2() = 42 
```

问题是 MSVC 2010 中的内联类函数不一定遵循 MSDN 指定的调用约定。我不认为这是一个错误，但如果您打算在内联函数中使用内联汇编，您至少应该意识到这一点。我的建议是你不要这样做。如果您需要在类函数中进行内联汇编，请将声明和实现分开。****

# c# - 在 .net 中存储 SQL 命令

> ID：12194085
> 
> 赞同：3
> 
> 时间：2012-08-30T09:44:17.823
> 
> 标签：c#, asp.net, database, ado.net

我正在使用 .net 构建我的第一个 Web 应用程序，它需要与一个非常大的现有数据库进行交互。我已经建立了连接，并创建了一个类，我可以调用它来构建传递几个参数的选择、插入、更新和删除查询。

我可以通过在按钮单击中编写我想要的查询来连接，但我想知道这是最好的解决方案吗？这种方式似乎很难调试，因为它将数据库代码与其他代码混合在一起。

过去（在其他语言中）我创建了一个类，该类将包含所有数据库查询字符串和参数，其余代码将调用它们。这样，如果像存储过程参数这样简单的事情发生变化，代码就都在一个地方。

当我在.net 中查找此内容时，我看不到以这种方式执行此操作，并且我热衷于学习最佳实践。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
       NameLabel.Text = UserNoTextBox.Text;

       string spName = "SP_SelectUser";
       SqlParameter[] parameters = new SqlParameter[]
       {
           new SqlParameter("@User_No", UserNoTextBox.Text)
       };

       DataAccess dbAccess = new DataAccess();

       DataTable retVal = dbAccess.ExecuteParamerizedSelectCommand(spName, CommandType.StoredProcedure, parameters);
 } 
```

更新：我所指的类是来自以下网站的 DataAccess 类：http: [//www.codeproject.com/Articles/361579/A-Beginners-Tutorial-for-Understanding-ADO-NET](http://www.codeproject.com/Articles/361579/A-Beginners-Tutorial-for-Understanding-ADO-NET) （类可在[http： //www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=361579](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=361579) )

更新：最后我选择了将 MVC 3 与 Entity Framework 一起使用——太棒了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:10:36.497

这是一个巨大的话题，但一个**非常简短**的观点可能如下：

1.  `DataTable`必须死（好吧，它有*一些*用途，但总的来说：它必须死）；考虑使用自定义类型，例如：

    ```
    public class User {
        public int Id {get;set;}
        public string Name {get;set;}
        public string EmployeeNumber {get;set;}
        // etc
    } 
    ```

    还应该注意的是，许多 ORM 工具会从底层表结构中 *为您生成这些。*

2.  不要混合 UI 和数据访问；将此代码分开，理想情况下分成单独的类，但至少分成单独的方法：

    ```
    protected void Button1_Click(object sender, EventArgs e)
    {
        NameLabel.Text = UserNoTextBox.Text;
        var user = SomeType.GetUser(UserNoTextBox.Text);
        // do something with user
    }
    ...
    public User GetUser(string userNumber) {
       ... your DB code here
    } 
    ```

3.  使用诸如 ORM（EF、LINQ-to-SQL、LLBLGenPro）或 micro-ORM（dapper、PetaPoco 等）之类的库 - 例如，这是带有 dapper 的代码：

    ```
    public User GetUser(string userNumber) {
        using(var conn = GetOpenConnection()) {
            return conn.Query<User>("SP_SelectUser",
            new {User_No = userNumber}, // <=== parameters made simple
            commandType: CommandType.StoredProcedure).FirstOrDefault()
        }
    } 
    ```

    或使用 LINQ-to-SQL（EF 非常相似）：

    ```
    public User GetUser(string userNumber) {
        using(var db = GetDataContext()) {
            return db.Users.FirstOrDefault(u => u.User_No == userNumber);
        }
     } 
    ```

4.  并非所有内容都需要是存储过程；两者之间曾经存在巨大的性能差异 - 但现在情况已不再如此。使用它们有充分的理由（非常精细的安全性、与多个应用程序消费者共享数据库、认为自己是开发人员的 dba），但它们也会产生维护问题，尤其是在部署更改时。在大多数情况下，我会毫不犹豫地使用原始（但参数化的）SQL，例如：

    ```
    public User GetUser(string userNumber) {
        using(var conn = GetOpenConnection()) {
            return conn.Query<User>(@"
    select [some columns here]
    from Users where User_No = @userNumber",
            new {userNumber}).FirstOrDefault()
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T10:04:12.373

我会做这样的事情：

**后面的代码**

```
protected void Button1_Click(object sender, EventArgs e)
{
    UserController uc = new UserController();
    User u = UserController.GetUser(Convert.ToInt32(UserNoTextBox.Text);
    NameLabel.Text = u.UserName;
} 
```

在你的**UserController.cs**

```
class UserController{
    public User GetUser(int userId)
    {
        return DataAccess.GetUser(userId);
    }
} 
```

在你的**User.cs**

```
class User{
    private string _userName;
    public string UserName{ get{ return _userName;} set{ _userName= value;} }
} 
```

并在您的**DataAccess.cs**中使用[Dapper](http://code.google.com/p/dapper-dot-net/)

```
public User GetUser(int id)
{
    var user = cnn.Query<User>("SP_SelectUser", new {User_No = id}, 
        commandType: CommandType.StoredProcedure).First();
    return user;
} 
```

这只是一种选择，但你也可以使用不同的[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)的，这是关于个人风格的。这是[.Net ORM 的列表](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software#.NET)

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:03:33.717

在 OOP 世界中，一般的最佳实践往往与语言无关。您说您过去曾在其他 OOP 语言中使用过数据访问，因此在 .net 中也会这样做。有关一般最佳实践的良好链接，请参阅@Oded 的回复。

如果您正在寻找有关如何最好地使用 .net 数据访问技术的指导，请尝试[以 MSDN 关于 ADO 的文章](http://msdn.microsoft.com/en-us/library/aa286484)为起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T09:46:48.917

您正在做的事情会起作用，但没有遵循良好的 OOP 原则，其中之一是[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)- 您的 UI 不应该直接与数据库对话。

您应该将所有数据访问代码放在 UI 层可以调用的单独层中。

另请参阅[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)和[不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

* * *

与数据库交互时，许多人使用 ORM - 实体框架、nHibernate、Dapper 和许多其他存在于 .NET 应用程序的工具。这些充当数据访问层，您应该调查它们在您的应用程序中的使用情况。

# matlab - 3D 体积索引以获得任意向量 matlab

> ID：12194089
> 
> 赞同：2
> 
> 时间：2012-08-30T09:44:36.977
> 
> 标签：matlab, computer-vision

我有一个 3D 体积和一个`x,y`坐标列表。我需要从卷中提取所有向量

```
V(x,y,:) 
```

转向`x,y`线性索引，但我不能使用：

```
V(ind,:) 
```

因为 Matlab 假定这`ind`是一个下标，我得到一个错误（超出索引...）。可以使用`V(:,ind)`，但这不是我需要的。

有什么方法可以在没有第三维的情况下做到这一点`repmat`并在所有三个维度上使用线性索引？我想避免这种情况，因为体积非常大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:54:51.010

您可以使用[`permute`](http://www.mathworks.de/help/techdoc/ref/permute.html)重新排列您的数据矩阵

```
 V2 = permute(V, [3 1 2]); 
```

然后您可以通过 访问（以前的）z 数据`V2(:,ind)`，即，`V(x,y,:)`将给出与 相同的结果`V2(:,ind)`。

# java - Activity 中的 setRetainInstance 而不是 Fragments

> ID：12194090
> 
> 赞同：1
> 
> 时间：2012-08-30T09:44:40.300
> 
> 标签：java, android, android-activity

我有简单的活动，没有片段。

我需要使用 onRetainNonConfigurationInstance。文档说不推荐使用 Fragment setRetainInstance

现在我的应用程序中没有任何片段。我可以依靠过时的方法在更高的 api 平台上也能很好地工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:58:48.213

与所有已弃用的方法一样，不能保证`onRetainNonConfigurationInstance`在下一个 API 版本中仍然有效。

目前，所有 android API 都能正确处理它，但强烈建议切换到 Fragments，因为它是当前设计 android UI 的方式。它既快速又简单，以后处理已弃用的方法也不会有问题。

# ssh - 从 Windows 的公钥 ssh 登录

> ID：12194092
> 
> 赞同：0
> 
> 时间：2012-08-30T09:44:49.413
> 
> 标签：ssh

我的客户向我提供了公钥并要求我进行 ssh 登录。但我之前没有做过任何 ssh 登录。那么您能否建议我如何使用公钥进行 ssh 登录。我在窗户上使用腻子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:04:41.353

这是一个非常好的教程，介绍如何在 Windows 上设置基于密钥的身份验证 usint putty。 [http://www.ualberta.ca/CNS/RESEARCH/LinuxClusters/pka-putty.html](http://www.ualberta.ca/CNS/RESEARCH/LinuxClusters/pka-putty.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:18:23.390

使用 SSH，公钥存储在服务器上，用户必须拥有相应的私钥才能登录。如果这是您的情况，您可以通过以下两种方式之一使用 PuTTY 指定您的私钥：

1.  配置 -> 连接 -> SSH -> 身份验证 -> 用于身份验证的私钥文件

2.  启动 PuTTY 时使用`-i`命令行选项。

在这两种情况下，您都需要 PuTTY 格式 (.ppk) 的私钥。如果您的密钥格式不同，则必须使用 PuttyGen 对其进行转换。

# iphone - Twitter 反向认证信息

> ID：12194098
> 
> 赞同：0
> 
> 时间：2012-08-30T09:45:10.493
> 
> 标签：iphone, twitter

我正在向 Twitter 请求 iOS5+ 的反向身份验证许可。

在[https://support.twitter.com/forms/platform](https://support.twitter.com/forms/platform)获得反向身份验证权限时，它会要求提供一些信息。

我需要在此表单中填写应用程序 ID 和应用程序 URL，以便获取 twitter API 的访问令牌值？

谢谢，
吉姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:36:02.853

创建一个 Twitter 应用程序：[https](https://dev.twitter.com/apps) ://dev.twitter.com/apps这将为您提供一个应用程序 ID。URL 只是您的应用程序的网站。

# java - wsdl2java 生成的类名

> ID：12194100
> 
> 赞同：0
> 
> 时间：2012-08-30T09:45:16.823
> 
> 标签：java, axis2, axis, wsdl2java

当我使用 wsdl2java 工具基于 wsdl 文件生成 java 类时，我得到每个类的两个文件：第一个 - 纯虚拟类文件，第二个 - 具有实现的类文件，它们在类名中有 Impl 后缀。

因此，例如，如果我在 wsdl 消息中指定名称为 ServerMessage，则 ServerMessage.java 将是虚拟的，而 ServerMessageImpl.java 将包含所需的东西。

我应该如何在非生成代码中使用结果文件？我只想使用我的 wsdl 文件中指定的类，但是在这样的生成中，我不得不在每个类名之后编写 Impl 后缀。我是不是误会了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:00:34.860

解决了这个问题。命令行参数 -uw 成功了。

> unwrap - 这将在代码生成期间在已包装和未包装之间进行选择。默认设置为假。映射到命令行工具的 -uw 选项。

[http://axis.apache.org/axis2/java/core/tools/CodegenToolReference.html](http://axis.apache.org/axis2/java/core/tools/CodegenToolReference.html)

# sql - SSIS Network Path Issue

> ID：12194102
> 
> 赞同：0
> 
> 时间：2012-08-30T09:45:25.373
> 
> 标签：sql, sql-server-2008, ssis

I have an SSIS job (2008) which uses variables set up in the SSIS Configurations database table. One of these variables is the folder path which the job should look in for files.

When I have this set to a local path on the same computer it works fine, e.g. d:\Processing\

but if I change this to a network path e.g. \\networklocation\Processing, it fails with the following error

Flat File Connection Manager - Description - the flat file "\\networklocation\processing\" specified in the connection was not valid. End Error. Code 0xC001401D. Failed Validation 0xC001401E

File name property is not valid. The file name is a device or contains invalid characters.

I've read various problems about network paths and SSIS - is there a solution for it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:24:09.433

好的，我在数据库上创建了一个新凭据，然后创建了一个新代理，并以该用户身份运行作业

这似乎工作正常 - 一定是阻止它看到网络文件夹的权限

# eclipse-cdt - Eclipse CDT 索引器 - 如何解决未解决的包含

> ID：12194103
> 
> 赞同：13
> 
> 时间：2012-08-30T09:45:24.983
> 
> 标签：eclipse-cdt, indexer

我有一个包含多个项目的工作区，所有项目都可以毫无问题地编译。但是，由于未解析的包含，一些项目在编辑器中给出了很多关于未解析符号的警告。大多数是来自工作区中其他项目或第三方库的标题。

谷歌搜索表明这是索引器的问题，但我没有找到任何关于如何修复它的连贯解释 - 我假设我需要将这些库的路径添加到索引器的 PATH 中，但我看不到任何选项这样做（我正在使用朱诺）。

谁能向我解释如何配置 CDT 的索引器？

我还在两个项目中遇到了未解决的包含 STL 标头的警告。一些 STL 标头已解析，但其他标头未解析，并且两个项目之间的列表似乎不一样（一个找到向量和 iostream 之类的东西，但没有找到 sstream 或字符串，另一个也找不到 iostream） .

可能相关：这些是 C++ 项目，但所有文件扩展名都是 .c。我将 GCC C 编译器命令更改为“g++”来编译它们，但我想我还需要对索引器设置做一些事情来应对它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-07T19:48:48.740

我有一个类似的问题，我的项目将构建但在 Eclipse Kepler 中显示未解决的包含。

在我的例子中，我采用了一个现有的 ARM 项目并创建了一个使用不同工具链的自定义构建配置。新的构建配置包含所有正确的内容，因此项目构建正确，但索引器没有拾取它。

**我通过将索引器设置为使用活动构建配置来修复它。**在 Window->Preferences->C/C++->Indexer 中，在标记为“为索引器构建配置”的部分下，我选择了“使用活动构建配置”并将其清除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T09:41:26.817

好的，所以我现在已经解决了这个问题。

1.  通过将其他项目添加为参考，解决了工作区中其他项目和第三方库中未解决的包含问题。我猜编译器知道去哪里看，因为我已将位置添加到包含列表中，但索引器没有（可能是由于 eclipse 只处理一次标头？）

2.  STL 中未解决的包含我通过将所有实际上是 C++ 的 .c 文件更改为 .cpp 来修复。仅将编译命令更改为“g++”显然不足以告诉索引器将项目视为 C++。

在 1) 的情况下，我需要先清理/重建引用项目的索引，以删除未解决的包含错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T10:44:09.147

在工作区中右键单击您的项目，选择`Properties`-> `C++ General`-> `Paths and Symbols`，然后为您的特定编译器添加包含和符号，在可用选项卡上添加库和其他您需要的东西。在那次命中之后`Apply`- 它应该开始重新索引，并且您的问题应该消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-30T11:28:45.047

所有答案都有帮助，但还有另一个技巧可以解决我的问题。我发现与编译器相比，**索引器不处理包含路径的子目录**。因此，在包含头文件时需要更加具体。

示例
*#include "subdirectory\include_2.h"*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-19T09:53:00.187

附加*提示*：

*   右键单击您的`project`-> `Index`-> 搜索`unresolved includes`.
*   在搜索结果中打开文件夹和文件，查看它们有哪些未解决的包含。
*   找到它们的目录并将它们添加到路径和符号中。

![在此处输入图像描述](../Images/c9026d1b6588b1615b536ef9c3fd846c.png)

# mysql - dynamic MYSQL query in stored procedure

> ID：12194104
> 
> 赞同：1
> 
> 时间：2012-08-30T09:45:29.690
> 
> 标签：mysql

> SELECT @query1 := GROUP_CONCAT(CONCAT('SELECT * FROM asterisk.', table_name) SEPARATOR ' UNION ALL ') AS CUSTOMQUERY FROM Information_Schema.tables WHERE table_name LIKE '%custom%'; PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt;
> 
> ..but at the end of the result we got missing query like SELECT * FROM asterisk.custom_70003 UNION ALL SELECT * FROM asterisk.custom_70006 UNION ALL SELECT * FROM asterisk.custom_70007 UNION ALL SELECT * FROM asterisk.custom_70010 UNION ALL SELECT * FROM asterisk.custom_70011 UNION ALL SELECT * FROM asterisk.custom_70042 UNION ALL SELECT * FROM asterisk.custom_70043 UNION ALL SELECT * FRO ..

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FRO' at line 1

so it gives me error

> ..I want to use this in my SSRS report .and ssrs querybuilder prompt me for parameter .. so if we use this in procedure it will be benefit for me.because in that way i can easily access this in my report.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:52:58.337

您应该增加[group_concat_max_len](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_group_concat_max_len)值。

来自文档：`group_concat_max_len`是 GROUP_CONCAT() 函数的最大允许结果长度（以字节为单位）。默认值为 1024。

# c# - 按下热键时如何确定WinForm是否处于焦点？

> ID：12194107
> 
> 赞同：0
> 
> 时间：2012-08-30T09:45:33.980
> 
> 标签：c#, focus

我设置 Ctrl + Space 来做到这一点：

*   如果 Form1 是焦点，请将其隐藏。

*   如果 Form1 被隐藏，或者它不是焦点，则显示并聚焦它 (SetForegroundWindow)。

我几乎完成了我的工作，唯一的事情是我不知道如何确定我的 Form1 是否在焦点上。你能帮助我吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:52:59.137

[当窗体获得焦点时在Form.Activated](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated.aspx)事件中处理..

同样，当表单失焦时，在[Form.Deactivate](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.deactivate.aspx)事件上处理它......

# android - Where can I find all android.os.Build.MODEL value for all phone?

> ID：12194109
> 
> 赞同：5
> 
> 时间：2012-08-30T09:45:45.680
> 
> 标签：android, build, model, key-value

As the question stated, is there anyway I can get these values for every smartphone?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-10-30T18:03:21.350

[您可以从Google 的支持设备列表](https://support.google.com/googleplay/answer/1727131?hl=en)中获得很长的设备品牌和型号列表。截至 2022 年 1 月，已列出超过 35,000 台设备。设备列表可以下载为 CSV 文件（非常有用）或 PDF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T07:04:39.397

不完整，但你可以试试[https://github.com/mataanin/android-devices](https://github.com/mataanin/android-devices)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:56:36.263

不可能列出所有智能手机的详细信息。通过使用 android.os.Build.MODEL 我们可以找到我们正在使用的设备。有关智能手机的详细信息，请参阅本网站 ( [http://en.wikipedia.org/wiki/Comparison_of_Android_devices](http://en.wikipedia.org/wiki/Comparison_of_Android_devices) )

# iphone - UIWebView in iPhone only app displayed on iPad

> ID：12194111
> 
> 赞同：0
> 
> 时间：2012-08-30T09:45:56.267
> 
> 标签：iphone, ipad, uiwebview, uikit, retina-display

I've got a question concerning a UIWebView in iPhone app (not a universal iPhone/iPad) displayed on an iPad. There are some ways to treat the application as a iPhone retina app (960x640), however I can't fing the way to display the UIWebView on the iPad in the same way as it's displayed on iPhone. The whole view and the fonts are blurred, because UIWebView thinks it's not a retina display.

Is there a way to make it think that it's retina display and to render a 960x640 instead of 480x320 scaled up?

UIWebView contentScaleFactor property is not changing anything. The site works perfectly on iPhone 4, with proper fonts and retina images. If I set the UIWebView frame as (0, 0, 960, 640) and scale it down then all content on the site is scaled down as well so that's not the proper way I think.

Edit: As a content I'm loading a local site, which is perfectly displayed on iPhone/iPhone (retina):

Body setion of a html:

```
(...)
<body>
    <h1>Header</h1>
    <p>Some paragraphs</p>
    <img src="image.png" width=250px height=200px/>     
</body>
(...) 
```

Style.css:

```
body 
{
    width:400px;
    height:100%;
} 
```

Edit2: Here is the link to [screenshot](http://i.stack.imgur.com/FLpI5.png) of what am I getting - on the iPad, the iPhone retina UIWebView is displayed like on the iPhone and scaled up twice, what gives blurred result.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:34:26.767

不，当您按下 2x 按钮时，您的应用程序会按比例放大，而您无法在代码中检测到这一点。

这对 Apple 来说是一个很大的失误，当应用程序在 iPad 上以 2x 模式显示时，它应该在视网膜模式下运行，但这意味着你需要在应用程序进入 2x 模式时重新启动它。

您的应用程序的 Retina 版本将用于新 iPad，但此处的 agin 缩放只会使像素翻倍。

# javascript - 如何在 JavaScript 中获取 textarea 的选定文本范围

> ID：12194113
> 
> 赞同：14
> 
> 时间：2012-08-30T09:46:01.320
> 
> 标签：javascript, textarea

我正在尝试在 textarea 中检索/查找选择的起点和终点。这是我的代码，在 Mozilla 和 chrome 中运行良好，但在 IE9 中无法运行

```
<script type="txt/javascript">
    function update(o) {

            var t = o.value, s = getSelectionStart(o), e = getSelectionEnd(o);
            alert("start :" + s + " End :" + e);
        }

        function getSelectionStart(o) {
            if (o.createTextRange) {
                var r = document.selection.createRange().duplicate()
                rse = r.text.length;
                r.moveEnd('character', o.value.length)
                if (r.text == '') return o.value.length
                return o.value.lastIndexOf(r.text)
            } else return o.selectionStart
        }

        function getSelectionEnd(o) {
            if (o.createTextRange) {
                var r = document.selection.createRang;e().duplicate()
                r.moveStart('character', -o.value.length)
                return r.text.length
            } else return o.selectionEnd
        }
</script>

<textarea id ="text" rows=10 cols="50" onselect="update(this);"></textarea> 
```

当我在 Mozilla 和 chrome 中测试这段代码时，它给了我正确的答案，但是当我在 IE9 上运行这段代码时，它显示 -1 表示 start ，任何值表示 end 。

我只想找出文本区域选择文本的起点和终点/索引。实际上，上面的代码适用于所有浏览器中的文本框，但不适用于 textarea。

请建议我...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T10:10:29.170

使用下面的代码或检查这个[小提琴](http://jsfiddle.net/nSX52/)

```
 function getTextSelection(el) {
    var start = 0, end = 0, normalizedValue, range,
        textInputRange, len, endRange;

    if (typeof el.selectionStart == "number" && typeof el.selectionEnd == "number") {
        start = el.selectionStart;
        end = el.selectionEnd;
    } else {
        range = document.selection.createRange();

        if (range && range.parentElement() == el) {
            len = el.value.length;
            normalizedValue = el.value.replace(/\r\n/g, "\n");

            // Create a working TextRange that lives only in the input
            textInputRange = el.createTextRange();
            textInputRange.moveToBookmark(range.getBookmark());

            // Check if the start and end of the selection are at the very end
            // of the input, since moveStart/moveEnd doesn't return what we want
            // in those cases
            endRange = el.createTextRange();
            endRange.collapse(false);

            if (textInputRange.compareEndPoints("StartToEnd", endRange) > -1) {
                start = end = len;
            } else {
                start = -textInputRange.moveStart("character", -len);
                start += normalizedValue.slice(0, start).split("\n").length - 1;

                if (textInputRange.compareEndPoints("EndToEnd", endRange) > -1) {
                    end = len;
                } else {
                    end = -textInputRange.moveEnd("character", -len);
                    end += normalizedValue.slice(0, end).split("\n").length - 1;
                }
            }
        }
    }
    alert("start :" + start + " End :" + end);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-20T02:14:51.220

虽然最初的答案可能对 2012 年的 OP 有所帮助，但情况发生了变化，现在变得更简单了，至少在现代浏览器中是这样。

## 您可以使用 Javascript`selectionStart`和`selectionEnd`textarea 的属性。

**基本用法：**

这些都是可在当今主要浏览器（Chrome、Safari、Firefox、Opera、Edge、IE）中使用的标准属性。

例如：

```
console.log(document.getElementById("text").selectionStart,document.getElementById("text").selectionEnd) 
```

将返回带有 ID 的文本区域中选择的起点和终点`text`。

**边界案例：**

如果在 textarea 中没有选择项目，则 start 和 end 属性都将返回[caret](https://en.wikipedia.org/wiki/Cursor_(user_interface)#Text_cursor)的最后一个位置。如果 textarea 尚未收到焦点，则属性都将返回`0`.

**更改选择：**

通过将这些属性设置为新值，您将调整活动文本选择。因此，您也可以使用它来选择文本区域中的文本。

**检查选择是否到位：**

You can check if there is currently a selection by checking if the values are both different, i.e. if

```
document.getElementById("text").selectionStart != document.getElementById("text").selectionEnd 
```

is true, then there is a text selection.

## References

*   [Live Demo (JSFiddle)](https://jsfiddle.net/040pdkpa/1/)
*   [Docs at MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLTextAreaElement)
*   [Docs at MSDN](https://msdn.microsoft.com/en-us/library/ff974768(v=vs.85).aspx)

# css - css过滤器是否有动画转换属性？

> ID：12194115
> 
> 赞同：56
> 
> 时间：2012-08-30T09:46:05.033
> 
> 标签：css, css-transitions

我正在尝试为 CSS 过滤器设置动画，但找不到有关正确过渡属性的任何信息。这些是什么？

这是一个例子：http: [//jsbin.com/onijim/3/](http://jsbin.com/onijim/3/)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-30T09:52:17.813

```
-webkit-transition : -webkit-filter 500ms linear 
```

在 webkit 中工作。我不知道 FF 或 Opera 中的过滤器支持。

我不确定我是否完全理解你的问题。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-03-09T21:36:15.010

这就是我正在使用的。对于 Mozilla 来说，第二个对我有用，但在我的资料中我发现它带有 -moz- 前缀，所以保留两者并没有什么坏处。

```
-webkit-transition: 1s -webkit-filter linear;
-moz-transition: 1s -moz-filter linear;
-moz-transition: 1s filter linear;
-ms-transition: 1s -ms-filter linear;
-o-transition: 1s -o-filter linear;
transition: 1s filter linear, 1s -webkit-filter linear; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-05T10:10:54.360

`transition`在支持无前缀的最新版本的 Chrome 中`-webkit-`，如果您使用`transition-property`（无速记`transition`）和`filter`仍然需要`-webkit-`前缀的属性，则需要混合无前缀和带前缀的代码：

```
transition-property: width, left, transform, box-shadow, filter, -webkit-filter; 
```

请注意，该`filter`属性以 重复`-webkit-filter`。这对于不使用前缀的浏览器是必需的，例如 Firefox，在这种情况下`-webkit-filter`会被忽略。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-04-07T00:02:20.797

检查过滤器属性中是否有不同的值：

错误的

```
.link-image {
    transition: 0.3s;
    filter: brightness(80%);
}

.link-image:hover {
    transition: 0.3s;
    filter: brightness(10);
} 
```

正确的

```
.link-image {
    transition: 0.3s;
    filter: brightness(80%);
}

.link-image:hover {
    transition: 0.3s;
    filter: brightness(100%);
} 
```

# iphone - 基于网络连接发送电子邮件或短信（慢/快）

> ID：12194117
> 
> 赞同：4
> 
> 时间：2012-08-30T09:46:13.137
> 
> 标签：iphone, objective-c, ios, ipad, connection

我想根据数据连接的可用性实现向特定电子邮件地址或号码发送电子邮件/短信的功能。三种情况——

1) 如果数据连接是 Wi-fi 或 3G 及以上，则发送电子邮件。

2) 如果数据连接为 2G 或更低，请发送 SMS。

3）如果没有数据连接，那么什么都不做。

那么，我将如何获得 iPhone/iPad 的连接类型呢？我在 google 和 stackoverflow 上搜索过，但没有得到正确的答案。该解决方案能否通过 Apple 的审核周期？

谢谢阿克谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T09:57:40.050

是的，这在一定程度上是可能的，您需要使用 Apple 的[`Reachability`](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)代码。

但是你只能检测你是否在 WiFi 上，WAN 上根本没有连接。其中 WAN 是 3G 或 2G。

# perl - Perl 模块 Mac::PropertyList 用于 plist XML 文件

> ID：12194118
> 
> 赞同：2
> 
> 时间：2012-08-30T09:46:19.003
> 
> 标签：perl, plist

我正在使用`Mac::PropertyList`模块来读取 plist 兼容`XML`文件。该函数以 " 形式`plist_as_perl()`返回`plist/XML`文件内容`unblessed perl data structure"`。这是我卡住的地方，因为我不知道如何访问其中包含的数据。

这是程序

```
use Mac::PropertyList;

print "\nbefore parsing the plist ...";
my $data  = Mac::PropertyList::parse_plist_file("abc.xml");

my $pvar = Mac::PropertyList::plist_as_perl($data); 
```

现在如何使用 pvar？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:51:34.227

如果您想查看结构内部的内容，可以使用[Data::Dumper](http://p3rl.org/Data%3a%3aDumper)：

```
use Data::Dumper;
print Dumper $pvar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:52:31.237

尝试使用 Data::Dumper 或 YAML 或 JSON 或 Data::Dump 或 Data::Dump::Streamer 或任何其他模块...转储数据并转储变量。或者使用调试器。

**更新**：如果你像这样创建 pvar，我发现它工作正常：`my $pvar = $data->as_perl;`然后你可以转储它.. 不要问我为什么;--(

# xml - 当我在 Internet Explorer 中打开时在 xml 文件中应用我的 xslt 2.0 时出现错误

> ID：12194120
> 
> 赞同：1
> 
> 时间：2012-08-30T09:46:22.077
> 
> 标签：xml, xslt, xslt-2.0

当我申请到 xml 文件时，我有 xsl 文件。当我在 Internet explorer 中查看它时，我得到了一个错误。

```
Expected token ']' found 'NAME'. threshold[substring-before(normalize-space(), ' ')-->castable <--as xs:integer] 
```

这是我的 xsl 文件。

```
<xsl:template match="threshold[substring-before(normalize-space(), ' ')castable as xs:integer]">
<xsl:variable name="vNorm" select = "translate(normalize-space(), '%', '')"/>
<xsl:variable name="vAtUnit" select = "substring-after($vNorm, ' ')"/>
<xsl:variable name="vUnit" select ="replace($vAtUnit, '([^0123456789]+)(\d*)', '$1')"/>
<xsl:variable name="vLastPart" as="xs:string" select ="substring-after($vAtUnit, $vUnit)"/>
<xsl:variable name="vNum" select="concat($vLastPart, '100'[not($vLastPart)])"/>
    <threshold>
        <t-r-value><xsl:value-of select="substring-before(., ' ')"/></t-r-value>
        <unit><xsl:value-of select="normalize-space($vUnit)"/></unit>
        <samplepct><xsl:value-of select="$vNum"/></samplepct>
    </threshold>
    <xsl:call-template name="tested"></xsl:call-template>
</xsl:template>
<xsl:template name="tested">
<xsl:for-each select="../following-sibling::interval-repeats[1]/ repeat[ count(current()/preceding-sibling::threshold) + 1]" >
<xsl:variable name="vNormrep" select = "translate(normalize-space(), '%', '')"/>
<xsl:variable name="vAtUnitrep" select = "substring-after($vNormrep, ' ')"/>
<xsl:variable name="vUnitrep" select ="replace($vAtUnitrep, '([^0123456789]+)(\d*)', '$1')"/>
<xsl:variable name="vLastPart" as="xs:string" select ="substring-after($vAtUnitrep, $vUnitrep)"/>
<xsl:variable name="vNumrep" select="concat($vLastPart, '100'[not($vLastPart)])"/>
    <repeat>
        <t-r-value><xsl:value-of select="substring-before(., ' ')"/></t-r-value>
        <unit><xsl:value-of select="normalize-space($vUnitrep)"/></unit>
        <samplepct><xsl:value-of select="$vNumrep"/></samplepct>
    </repeat>
</xsl:for-each> 
```

任何人都可以在这里帮助我吗？

在此先感谢 Karthic

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:07:43.380

浏览器只支持 XSLT 1.0 和一些 EXSLT 扩展，如果你想使用 XSLT 2.0，你需要使用像 Saxon 9、AltovaXML 或 XmlPrime 这样的 XSLT 2.0 处理器。如果您想使用 XSLT 2.0 客户端，您可以检查 Saxon CE [http://www.saxonica.com/ce/download.xml](http://www.saxonica.com/ce/download.xml)是否是一个选项。

[编辑] 至于尝试在 XSLT 1.0 中实现整数检查，您可以尝试

```
<xsl:template match="threshold[not(translate(substring-before(normalize-space(), ' '), '0123456789', ''))]"> 
```

该检查删除任何数字，然后检查结果是否为空字符串，这可能足以检查整数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:52:41.057

**验证字符串是否可转换为整数的一个简短 XPath 表达式是**：

```
$x = floor($x) 
```

正如在另一个答案中已经指出的那样，主要的五种浏览器都不支持 XSLT 2.0。目前在浏览器中使用 XSLT 2.0 的方法由**[Saxon CE](http://www.saxonica.com/html/ce/download.html)**提供。

# java - 使用 exec 通过 PHP 运行 JAR 时避免 JVM 启动延迟

> ID：12194133
> 
> 赞同：1
> 
> 时间：2012-08-30T09:47:07.323
> 
> 标签：java, php, jvm, exec

有什么办法可以避免每次在 PHP 中运行 exec 命令时 JVM 启动造成的延迟？

我有两个需要使用 PHP 运行的用于加密和解密的 JAR。两者都在同一个脚本上运行，尽管一个会解密 URL 参数，然后另一个会加密其他一些信息。当我通过命令行运行它们时，它们都在不到 0.4 秒的时间内完成。但是，当我使用 PHP exec 函数运行它们时，会启动一个新的 JVM 实例，这会在每个 JAR 执行时间上增加 5 秒。

我已经使用 Nailgun 进行了调查，但无法使其正常工作。我找不到任何让它运行 JAR 的文档，当我使用类时，它也永远找不到它们。

我也考虑过使用 PHP/Java Bridge。但是，我更愿意继续使用 exec。我已经在运行 IIS 7.5，但我不确定如何配置网桥来使用它。

**我的问题是：
有没有办法让 JVM 在后台运行，这样 PHP exec 函数就不需要每次都启动一个新实例？我认为必须有一种方法，因为命令行没有延迟。**

如果没有办法做到这一点，那么我愿意接受其他建议。运行 PHP 脚本 11 秒意味着网站的访问者很可能会离开。

可能会或可能不会使用的其他信息：
它将在 Windows Server 2008 R2 32 位操作系统上运行。
仅需要本地访问。
正在使用 IIS 服务器 7.5。
网站是用 PHP 编码的。PHP 版本是 5.3.5。
服务器正在运行最新的 JRE - Java7 u6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:52:29.087

> 有没有办法让 JVM 在后台运行，这样 PHP exec 函数不需要每次都启动一个新实例？

您可以在已知端口上启动 ServerSocket。

如果它是第一次运行应用程序，这将是成功的，这个过程可以继续运行。

如果这不成功，应用程序可以在该端口上打开一个 Socket 并根据需要发送命令并获得响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:07:22.090

尽管接受的答案主要解决了我的问题，但 JAR 执行时间仍然稍微有点太长了。我意识到这个问题专门针对 JVM 启动时间，但如果其他人有类似的问题，这也可能对他们有帮助。

我一直在使用 Eclipse 生成可执行的 JAR。我正在将第 3 方 JAR 打包到我的 JAR 中。在检查生成的 JAR 时，我注意到 Eclipse 添加了许多它自己的类，其中一个在清单中作为主类（我相信它处理在 JAR 中加载 JAR）。我还注意到 JAR 中的所有文件都已压缩（正如您在存档中所期望的那样）。

看到我的 JAR 保留在服务器机器上并且从不通过网络传输，我将解压缩视为可以轻松避免的额外开销。

我决定根据上面的信息对我的 JAR 进行三个简单的更改：

**1）**在命令行中使用 java 命令生成 JAR 并编写我自己的清单。这消除了 Eclipse 添加的其他类文件。

**2)**通过命令行生成 JAR 时，我添加了 0 选项来禁用压缩。

**3)**我的 JAR 档案中没有包含第 3 方 JAR。相反，我将它们包含在同一个文件夹中，并将它们添加到每个生成的 JAR 清单文件中的类路径选项中。

这将运行 JAR 所需的时间减少了约 269%。

# iphone - CABasicAnimation 展开高度方向

> ID：12194134
> 
> 赞同：2
> 
> 时间：2012-08-30T09:47:11.847
> 
> 标签：iphone, objective-c, ios, core-animation, cabasicanimation

我有一个包含 CALayer ("layerPlot_") 的 UIView 当您调用以下方法时它可以工作，但它会在两个方向（向上和向下）上扩展高度我想指定是否要向下或向上扩展高度以及该层的其他边缘保持在同一位置。

代码如下：

```
/**
 * Resizes the layer to a new height.
 *
 * @param newHeight the new height of the layer
 */
-(void)resizeLayerTo:(CGFloat)newHeight {

// Create animation
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"bounds.size.height"];

[animation setFromValue:[NSNumber numberWithFloat:0.0f]];
[animation setToValue:[NSNumber numberWithFloat:newHeight]];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
[animation setFillMode:kCAFillModeForwards];
[animation setDuration:1.2f];

// Update the layer's bounds so the layer doesn't snap back when the animation completes.
CGRect newSize = [layerPlot_ bounds];
newSize.size.height = newHeight;
layerPlot_.bounds = newSize;

// Add the animation, overriding the implicit animation.
[layerPlot_ addAnimation:animation forKey:@"bounds"];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:20:14.153

您可以自己进行计算并为框架而不是边界设置动画，或者您可以将图层的锚点更改为底部，然后更新边界。

请注意，它将绘制相对于该点的所有内容，因此必须更新位置，否则它看起来会向上移动一半宽度。

# php - php mktime 在同一日期给出不同的结果？

> ID：12194140
> 
> 赞同：3
> 
> 时间：2012-08-30T09:47:42.077
> 
> 标签：php, mktime

以下代码：

```
 // settings 1st alternative
    $season = 2011;
    $startweek = 36;

    // calculation, 1st alternative
    // in any case Jan 1st is in 1\. week
    $firstweekuniversal = mktime(0,0,0,1,4,$season);
    // I'd like to calculate monday 0:00 of the given week.
    // date(...) computes to monday of the calculated week.
    $startday1 = $firstweekuniversal + 86400 * (7*($startweek-1) - date('w', $firstweekuniversal)+1);

    // settings 2nd alternative
    $StartingDate = "KW36 - 5.09.2011 (Mo)";

    // calculation, 2nd alternative
    $firstparts = explode(" ", $StartingDate);
    $secparts = explode(".", $firstparts[2]);
    $startday2 = mktime(0,0,0,intval($secparts[1]),intval($secparts[0]),intval($secparts[2]));

    // Output
    echo "Start: \$startday1=".$startday1.", Timestamp=\"".date("d.m.Y - H:i:s", $startday1)."\"<br>\n";
    echo "Start: \$startday2=".$startday2.", Timestamp=\"".date("d.m.Y - H:i:s", $startday2)."\"<br>\n"; 
```

导致此输出：

```
Start: $startday1=1315177200, Timestamp="05.09.2011 - 01:00:00"
Start: $startday2=1315173600, Timestamp="05.09.2011 - 00:00:00" 
```

1h的差异来自哪里？不可能是夏季问题，在这种情况下，1h 必须反过来，还是我错了？没有区别，当我尝试使用我的环境（本地主机）时，但在我的 prvider 的服务器上有。

谁能给我解释一下？我在这里完全感到困惑。提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:26:25.777

我对夏令时的理解是，在冬季和夏季之间的某个时间点，太阳开始升得更早，所以早上 8 点感觉应该是早上 9 点......这正是时钟所做的，它向前移动稍后（通常是一小时）。这也是为什么这是一个在学校迟到的好借口:)

在任何情况下，本地 php 的时区设置可能是 UTC（或其他一些“中性”时区），但服务器时区设置尊重夏令时。

# c++ - 为什么编译器会输出以下错误代码：C2143、C2238、C2501

> ID：12194143
> 
> 赞同：2
> 
> 时间：2012-08-30T09:48:05.820
> 
> 标签：c++, compiler-errors

C2143：语法错误：缺少“；” 在'<'之前

我可能对 C++ 很生疏，因为我真的不知道这些错误的原因。代码其实很简单。(VS2003)

```
#include <vector>

class store
{
public:
    vector<int>storage;
};

int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:48:49.530

因为你需要`std::`在前面添加`vector`：

```
std::vector<int>storage; 
```

该类`vector`位于`std`命名空间内。

* * *

或者只是添加

```
using namespace std; 
```

**强烈不**推荐，尤其是对于头文件。

# python - OSX 10.8.1 上的 python 成像

> ID：12194147
> 
> 赞同：2
> 
> 时间：2012-08-30T09:48:15.137
> 
> 标签：python, django, macos

我目前正在为一个项目检查 django。我也在看 django-cms。Django-cms 需要 python 映像。我找不到在当前版本的 OSX 上安装它的简单方法，事实上，在我开始运行 python-imaging 之前，我似乎必须构建一大堆 python 扩展：

[http://wiki.python.org/moin/MacPython/UniversalLibrariesAndExtensions](http://wiki.python.org/moin/MacPython/UniversalLibrariesAndExtensions)

真的没有更简单的方法可以做到这一点吗？如果不是，是因为没有人这样做吗？Django 开发人员通常在 Linux 上工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:14:44.820

或者你可以使用[homebrew](https://brew.sh/ "家酿")。Homebrew 是 OS X 的包管理器。它在 OS X 10.6+ 上运行。

要安装“python-imaging”（或者更准确地说是 Simon 指出的 PIL），只需执行

```
brew install pil 
```

你可以走了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:05:40.140

django-cms 需要 PIL，即 Python 图像库。看来您指的是 python-imaging ，它是该要求的 Ubuntu 软件包名称。我的经验是在 Mac OS X 上构建和安装 PIL，这似乎也是您的用例。您是正确的，PIL 需要编译和构建一些 C 文件，因为各种图像算法是用 C 而不是 Python 实现的。

过去可以从 PyPI ( [PIL 1.1.6](http://pypi.python.org/pypi/PIL/1.1.6) ) 安装 PIL ，但这似乎不再起作用。您现在必须从[此处](http://effbot.org/downloads/#Imaging)或[此处](http://www.pythonware.com/products/pil/)下载并安装所需的源版本。之后，该命令`python setup.py install`应该足以安装它（这会构建扩展，进而构建 Python 图像库本身）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:52:06.633

我已经写了一篇关于这个的博客文章（[http://blog.artooro.com/2013/01/04/how-to-install-pil-python-imaging-library-on-mac-os-x-10- 8/](http://blog.artooro.com/2013/01/04/how-to-install-pil-python-imaging-library-on-mac-os-x-10-8/) )

以下是适用于 Apple 原生设置的简单说明，不需要自制软件或 macports 或其他任何东西。

1.  从 App Store 安装 Xcode。
2.  打开 Xcode 并打开 Xcode 首选项。
3.  单击“下载”选项卡，您将看到命令行工具。单击安装按钮以安装命令行工具。（这提供了 gcc 来编译 PIL）
4.  现在打开终端应用程序，并运行以下命令：
5.  `sudo easy_install pip`
6.  `sudo pip install PIL`

# ajax - 如何立即验证值，但仅在完整提交时检查 required ？

> ID：12194148
> 
> 赞同：2
> 
> 时间：2012-08-30T09:48:14.797
> 
> 标签：ajax, validation, jsf, required-field

我目前正在向表单添加验证。有两件事要检查：值本身的正确性（例如，它是正整数还是有效的电子邮件）以及是否填写了所有必填字段。

但是，如果通过某种方式（`f:ajax`或 IceFaces`partialSubmit`属性）我立即验证类型正确性（例如，当字段失去焦点时），它也会`required`在同一步骤中检查属性。在大多数情况下，这没有问题，因为用户已经输入了一个值并且可能更正它而不是返回空白字段。

但是，如果他真的想再次清场，他就不能再不报错了。因此，我只想在最终提交页面时检查字段的必要性。

目前，分离这两种验证类型的唯一想法是在支持 bean 操作方法中执行所有必需的检查，从而将其直接绑定到最终通过按钮提交。

还有其他方法吗？

（作为背景：人们可能想要再次清除该字段的原因是要求可能会根据表单中的其他选择而改变。因此，人们可能最终决定不提供此字段，并且只有在更正实际使该字段的选项之后字段可选。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:56:30.393

只需让`required`属性评估`true`提交按钮何时真正被按下。

然而，答案取决于您的提交按钮如何执行其逻辑（标准`f:ajax`、、ICEfaces 等）。但它基本上归结为您可以检查请求参数映射中的请求参数，该参数指示已按下所需的提交按钮。

例如，如果它是标准命令按钮：

```
<h:form id="form">
    ...
    <h:commandButton id="submit" value="Submit" action="#{bean.submit}" />
</h:form> 
```

然后您可以通过检查按钮的客户端 ID 是否存在于请求参数映射中来检查它：

```
<c:set var="submitButtonPressed" value="#{not empty param['form:submit']}" />
...
<h:inputText ... required="#{submitButtonPressed}" />
<h:inputText ... required="#{submitButtonPressed}" />
<h:inputText ... required="#{submitButtonPressed}" /> 
```

或者，如果它是一个`<f:ajax>`按钮：

```
<h:form id="form">
    ...
    <h:commandButton id="submit" value="Submit" action="#{bean.submit}">
        <f:ajax execute="@form" ... />
    </h:commandButton>
</h:form> 
```

然后您可以通过检查`javax.faces.source`参数是否等于按钮的客户端 ID 来检查它：

```
<c:set var="submitButtonPressed" value="#{param['javax.faces.source'] == 'form:submit'}" />
...
<h:inputText ... required="#{submitButtonPressed}" />
<h:inputText ... required="#{submitButtonPressed}" />
<h:inputText ... required="#{submitButtonPressed}" /> 
```

您甚至可以将两者结合起来：

```
<c:set var="submitButtonPressed" value="#{not empty param['form:submit'] or param['javax.faces.source'] == 'form:submit'}" />
...
<h:inputText ... required="#{submitButtonPressed}" />
<h:inputText ... required="#{submitButtonPressed}" />
<h:inputText ... required="#{submitButtonPressed}" /> 
```

# android - phonegap 本地通知

> ID：12194149
> 
> 赞同：0
> 
> 时间：2012-08-30T09:48:18.350
> 
> 标签：android, cordova, notifications, local

我已经使用 phonegap localnotification 插件在我的 android 应用程序中实现了本地通知。

通知得到正确触发，但点击通知应用程序时未打开。

我想在单击状态通知时重新启动应用程序。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:01:11.283

在 AlarmReciever 类中，在 onRecieve 事件中，更改第 79 行，

```
final PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0); 
```

至

```
final PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(context,mainActivity.class), 0); 
```

开始了，新的活动

# syntax - Golang 语法的历史是怎样的？

> ID：12194150
> 
> 赞同：4
> 
> 时间：2012-08-30T09:48:18.387
> 
> 标签：syntax, go

我正在尝试使用 Golang，我发现它的语法非常有趣：

```
var a int = 10

b := 10

for {
 ...
}

func hello() world() int{

} 
```

这些语法让我对它很感兴趣，有没有人知道它的语法历史？

或者为什么他们这样设计。

谢谢。

# php - PHP 语法错误，“意外的 T_VARIABLE” - isQuestion($query)

> ID：12194156
> 
> 赞同：-1
> 
> 时间：2012-08-30T09:48:36.320
> 
> 标签：php, syntax-error

代码：

```
public function isQuestion($query){

    $questions = $this->getAllQuestions();

    if (count($questions)){
            foreach ($questions as $q){
                if ($this->isQuestion$q($query)){
                    return $this->isQuestion$q($query);
                }
            }
        }

    return false;
} 
```

错误：

> 解析错误：语法错误，第 7 行 /Applications/XAMPP/xamppfiles/htdocs/ai/application/models/question_model.php 中的意外 T_VARIABLE

问题发生在：

```
if ($this->isQuestion$q($query)){

return $this->isQuestion$q($query); 
```

我有一些函数，如**isQuestion1**、**isQuestion2**、**isQuestion3**等……我调用另一个**函数** **getAllQuestions**，它将返回数组中的所有问题数，如**1,2,3,4,5...**。

然后我使用上面的代码来检查每个函数是否是基于查询的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:51:42.523

问题出在你的方法`isQuestion$q`上。

`$`表示变量的开始并且混淆了解释器。

像这样写：

`isQuestion{$q}`

花括号允许您将变量插入字符串（或具有字符串表示的任何内容）。阅读[PHP 中字符串中的花括号以](https://stackoverflow.com/questions/2596837/curly-braces-in-string-in-php)获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:52:53.187

好吧，以下是无效的语法：

```
if ($this->isQuestion$q($query)){ 
```

试试这个：

```
foreach ($questions as $q) {
    if ($result = $this->{'isQuestion' . $q}()) {
        return $result;
    }
}
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:04:23.273

如果您需要使用动态名称调用函数，请查看[http://de2.php.net/manual/en/function.call-user-func-array.php](http://de2.php.net/manual/en/function.call-user-func-array.php)或[http://de2.php。网络/手册/en/function.call-user-func.php](http://de2.php.net/manual/en/function.call-user-func.php)

您可能希望确保该方法确实存在以避免出现致命错误：[http ://de2.php.net/manual/en/function.method-exists.php](http://de2.php.net/manual/en/function.method-exists.php)

还要检查是否要更换

```
if ($this->isQuestion$q($query)){
    return $this->isQuestion$q($query);
} 
```

和

```
if ($this->isQuestion$q($query)){
    return true;
} 
```

一般来说，最好创建一个`interface` `Question`并持有一个`array`要询问的 Question 实例。

# javascript - ie中的换行符

> ID：12194157
> 
> 赞同：0
> 
> 时间：2012-08-30T09:48:36.667
> 
> 标签：javascript, html, internet-explorer, newline

我有以下html

```
<label>Hello\r\nUsername</label>

<textarea></textarea> 
```

页面加载后，我想将内容设置`label`为`textarea`

一般

```
$("textarea").val($("label").html()); // or may be $("label").text(); 
```

将内容设置为文本区域，包括新行。它在 FF 中工作正常，但在 IE 中不行。

看起来 IE 正在丢失新的线路信息。

我该如何解决这个问题？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:01:00.153

在谷歌上进行小搜索后，我发现在 IE 中不可能使用低于 9 的版本，因为它是一个内置问题。检查 web.student.tuwien.ac.at/~e0226430/innerHtmlQuirk.html 以供参考。总之，IE<9 会删除除 pre 和 textarea 之外的任何 DOM 元素中的所有空白。

# python - 如何在 SQLAlchemy 中设置复杂条件复合外键

> ID：12194158
> 
> 赞同：1
> 
> 时间：2012-08-30T09:48:36.870
> 
> 标签：python, postgresql, sqlalchemy, declarative

这是我的 ORM 实体类。主键是复合的，因为不同用户的“id_string”可能相同（由 uid 标识）。在创建基于此类的表时，我从 Postgres SQL 错误中了解到一件事（

```
ProgrammingError: (ProgrammingError) there is no unique constraint matching given keys for referenced table "sync_entities" 
```

) 是我需要在 parent_id_string 的 ForeignKey() 参数中添加一些内容。我认为，这就是当前记录的 uid。

你建议尝试使用不同的主键（自动递增整数）还是有其他方法？

```
class SyncEntity(Base):
    __tablename__ = 'sync_entities'
    __table_args__ = (ForeignKeyConstraint(['uid'], ['users.uid'], ondelete='CASCADE'), {})

    uid = Column(BigInteger, primary_key=True)

    id_string = Column(String, primary_key=True)
    parent_id_string = Column(String, ForeignKey('sync_entities.id_string'))
    children = relation('SyncEntity',
                        primaryjoin=('sync_entities.c.id_string==sync_entities.c.parent_id_string'),
                        backref=backref('parent', \
                                        remote_side=[id_string]))

    # old_parent_id = ...
    version = Column(BigInteger)
    mtime = Column(BigInteger)
    ctime = Column(BigInteger)
    name = Column(String)
    non_unique_name = Column(String)
    sync_timestamp = Column(BigInteger)
    server_defined_unique_tag = Column(String)
    position_in_parent = Column(BigInteger)

    insert_after_item_id = Column(String, ForeignKey('sync_entities.id_string'))
    insert_after = relation('SyncEntity',
                            primaryjoin=('sync_entities.c.id_string==sync_entities.c.insert_after_item_id'),
                            remote_side=[id_string])

    deleted = Column(Boolean)
    originator_cache_guid = Column(String)
    originator_client_item_id = Column(String)
    specifics = Column(LargeBinary)
    folder = Column(Boolean)
    client_defined_unique_tag = Column(String)
    ordinal_in_parent = Column(LargeBinary) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:37:57.207

你知道，主键是一个自动递增的整数通常是最好的方法。任何在系统中似乎是唯一的值，将来可能会被复制。如果您依赖它们的独特性，您将陷入困境。

但是，如果有理由要求每行中的某些值对（或三重）是唯一的，只需向表中添加约束，但使用自增整数作为主键。然后，如果需求发生变化，您可以更改/删除/放松您的独特约束，而无需在其他地方进行更改。

另外 - 如果您使用简单的整数键，则您的连接更简单，并且可以通过 DBMS 更快地执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:34:37.957

我想我想出了一个好主意。只需在***__tableargs*** **__***成员中创建复杂的外键结构，如 (parent_id_string, uid) 和 (insert_after_item_id, uid)，相应地修改 primaryjoin 语句**。***

# ftp - VPS 上的 FTP 服务器

> ID：12194159
> 
> 赞同：1
> 
> 时间：2012-08-30T09:48:41.147
> 
> 标签：ftp, vps

我正在尝试连接到我的 VPS 上的 FileZilla ftp 服务器。我已经安装了它。添加了一个用户。为 FileZillaServer.exe 添加了 Windows 防火墙的例外；将 FileZilla 配置为使用被动模式并输入我的 VPS 服务器 IP。然后我在 VPS 上启动了服务器。但我仍然无法从外部连接到 FileZilla。它说：错误：连接超时错误：无法连接到服务器

PS如果我在本地连接到服务器，他们可以工作。

有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:22:23.967

好吧，我自己来回答：）由于某种原因我无法启动 Filezilla 服务器，但我能够启动 IIS FTP 服务器。您需要做的就是转到 IIS 管理器并添加 FTP 站点。添加用户，就是这样。

# c# - 向 WebRequest 返回状态错误

> ID：12194166
> 
> 赞同：2
> 
> 时间：2012-08-30T09:49:15.837
> 
> 标签：c#, asp.net-mvc, httpwebrequest

我用这样的方式调用远程操作`WebRequest`：

```
var site = "http://remoteSite.com/controller/IsolateSite?url=xxx&target=in";
var request = (HttpWebRequest)WebRequest.Create(site);
var response = (HttpWebResponse)request.GetResponse();

if (response.StatusDescription == "OK")
{ /* code */ }
else
{ /* code */ } 
```

在远程操作中，我返回一条消息或`null`（如果`id`好或不好）。

但是即使动作返回`response.StatusDescription`也总是等于。`"OK"``null`

如何强制将错误作为状态或检索消息（如`"Cool."`或`"Error."`）？

* * *

远程操作示例：

```
public static string IsolateSite(string url, string target)
{
    var serverManager = new ServerManager();
    var isHttps = url.Contains("https");
    var regex = new Regex("^(http|https)://");
    var host = regex.Replace(url, "");
    var instance = serverManager.Sites.First(site => site.Bindings.Any(binding => binding.Host == host));
    var pool = instance.Applications[0].ApplicationPoolName;

    if ((pool.Contains("isolation") && target == "out") || (!pool.Contains("isolation") && target == "in"))
    {
        return "Error."; //or return null but the status code is OK so useless
    }

    //etc...

    return "Cool.";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:46:03.810

Httpstatus 代码喜欢`error`或`cool`无效，您可以[在此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)找到所有状态代码。

最好不要在错误时返回字符串，而是抛出 HttpException：

```
throw new HttpException(500, "Error"); 
```

在这种情况下，我使用 http 响应状态代码 500（内部服务器错误）。

另一个考虑是看一下这种服务的 ASP.NET WebApi，我认为它比 Asp.NET MVC 控制器更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:29:22.810

只需对 StreamReader 做出响应，如下所示。

```
 var site = "http://remoteSite.com/controller/action/id";
      var request = (HttpWebRequest)WebRequest.Create(site);
      var response = (HttpWebResponse)request.GetResponse();
      StreamReader reader = new StreamReader(response.GetResponseStream());
       // This will contain the status of message e.g.    failed, ok etc.
      string resultStatus = reader.ReadToEnd(); 
```

结果状态将为您提供错误状态和描述

# .net - 如何查找我的托管 .net 应用程序加载的所有非托管 DLL 的列表

> ID：12194167
> 
> 赞同：6
> 
> 时间：2012-08-30T09:49:33.060
> 
> 标签：.net, dll, unmanaged

我的托管 .net 应用程序使用第三方 .net 库，这些库使用（通过 PInvoke）非托管 dll。我想知道加载了哪些 dll。我尝试使用“Process Explorer”和“Dependency Walker”，但我只能看到托管的 DLL。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T10:12:20.923

*任何调试器都可以做到这一点（`windbg`例如） - 但是因为这是你打包 Visual Studio 的好机会，所以我将讨论如何做到这一点*

将 Visual Studio 调试器附加到应用程序，记住只选择 Native 调试器，如下所示：

![如何将调试器类型设置为 Native](../Images/22cb6635c8f9a1b287b2227e268c9ca9.png)

连接后，点击 Debug -> Break 然后按`[CTRL] + [ALT] + [U]`调出 Modules 窗口（它在菜单上的某个地方，但我找不到它！） - 这是我桌面上 Samsung Kies 应用程序的示例（使用WPF）：

![模块列表](../Images/e24e2bd9b1c583d58695c1d17daef1e9.png)

在我的情况下，我也启用了托管调试器，并将进程名称移动到列列表的开头以用于该屏幕截图。

如果进程名称`: Native`后面有它，那么它是一个非托管 DLL（好吧，我想它也可能是混合模式）。

请注意， Windows 中的*所有*进程*总是*会加载很长的非托管 DLL 列表；因为 Windows 本质上是不受管理的，并且是应用程序的最终宿主。

但当然你可以使用这个列表作为起点并从那里过滤。

# php - 在 hostgator vps 服务器中安装 imap 模块

> ID：12194168
> 
> 赞同：0
> 
> 时间：2012-08-30T09:49:40.967
> 
> 标签：php, configuration, module, hosting, imap

这个服务器再次让我感到痛苦，他们的支持拒绝包括他们承诺在您付款之前提供的这些问题......啊，无论如何，如果有些人已经经历过这个，并且可以指导我如何在这个服务器上安装 imap 模块。我可以访问控制面板、ssh 和所有配置文件，只是不知道如何使用它。请帮忙 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:49:21.887

好的，已经完成了！

我试图为 imap 放置 .dll 文件，但这是 linux 服务器

在 ssh 提示符下我点击了这个命令

```
yum install php53-imap 
```

然后更新 php.ini 广告`extension imap.so`

并重新启动我的服务，它的工作:)

# javascript - The best way to redefine a method in jquery library

> ID：12194171
> 
> 赞同：4
> 
> 时间：2012-08-30T09:49:45.943
> 
> 标签：javascript, jquery, twitter-bootstrap

Let's suppose I want to change the render function in bootstrap-typeahead library. [http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js](http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js)

One way to active this goal is to make:

```
_.extend($.fn.typeahead.Constructor.prototype, {
    render: function (items) {
      // some code
    }
}); 
```

Let's suppose I want to redefine the render function just for a specific element like…</p>

```
element.typeahead({
    minLength: 3,
    source: getSource
}); 
```

How should I redefine the render function in order to be valid just for this element?

P.S.:
I am using jquery and underscore

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:54:36.543

也许你可以先克隆它？

```
$.fn.typeaheadCustom = $.fn.typeahead;

_.extend($.fn.typeaheadCustom.Constructor.prototype, {
    render: function (items) {
      // some code
    }
 });

element.typeaheadCustom({
    minLength: 3,
    source: getSource
}); 
```

**更新**

您可能需要对其进行深度克隆：

```
$.fn.typeaheadCustom = $.extend(true, $.fn.typeahead, {}); 
```

# php - Pass PHP value to javascript using Ajax

> ID：12194173
> 
> 赞同：0
> 
> 时间：2012-08-30T09:49:51.890
> 
> 标签：php, javascript, ajax-request

I have a php code that provides the database values. I need those values in the javascript variable.

Javascript Code

```
<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script type="text/javascript">
    function text() {
        var textVal=$("#busqueda_de_producto").val();
        $.ajax(
        {
            type:"POST",
            url:"index.php",  //here goes your php script file where you want to pass value
            data: textVal,
            success:function(response)
            {
               // JAVSCRIPT VARIABLE = varable from PHP file.
            }
        });

        return false;
    }
</script> 
```

PHP FILE CODE:

```
<?php
    $q11 = "select * from sp_documentocompra_detalle where dcd_codigo".$_GET['codigo']; 
    $res11 = mysql_query($q11);
    $row11 = mysql_fetch_array($res11);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:52:35.770

您返回的数据在`response`参数中。您必须使用`echo`PHP 中的数据才能获得结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:57:04.653

使用JSON格式很方便

因为它的键值性质。

使用[json_encode](http://php.net/manual/en/function.json-encode.php)将 PHP 数组转换为 JSON。

`echo`json_encoded 变量

您将能够通过以下方式接收该 JSON 响应数据`$.ajax`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T16:27:20.020

JavaScipt/HTML：

```
<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script type="text/javascript">
    function text()
    {
        var textVal=$("#busqueda_de_producto").val();
        $.post('index.php', { codigo:textVal }, function(response) {
            $('#output').html(response.FIELDNAME);
        }, 'json');

        return false;
    }
</script>
<span id="output"></span> 
```

PHP：

```
$q11 = "select * from sp_documentocompra_detalle where dcd_codigo='".mysql_escape_string($_POST['codigo'])."'";
$res11 = mysql_query($q11);
$row11 = mysql_fetch_array($res11);

echo json_encode($row11); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:07:50.157

最好的解决方案是使用 **echo json_encode("YOUR ARRAY/VALUE TO BE USED");**

然后将 javascript 代码中的 JSON 解析为 **obj = JSON.parse(response);**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T10:01:42.203

我看到很多需要纠正的事情

ajax 中的数据是这样做的，`data: {'codigo':textVal},`因为您使用的是 $_GET['codigo']，这会导致第二次更正，`type:"POST"`因此您还必须访问 $_POST 变量而不是 $_GET 变量，最后是你的 ajax 不显示/返回任何你`echo`它或`echo json_encode()`它的东西

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T09:57:17.200

**您没有在 PHP 脚本中回显任何内容。**

尝试将您的 PHP 更改为：

```
<?php
        $q11 = "select * from sp_documentocompra_detalle where dcd_codigo".$_GET['codigo']; 
        $res11 = mysql_query($q11);
        $row11 = mysql_fetch_array($res11);

        echo $row11; //This sends the array to the Ajax call. Make sure to only send what you want.
?> 
```

然后在您的 Ajax 调用中，您可以通过编写`alert(response)`成功处理程序来提醒这一点。

**提示**

将您的数据作为 URL 序列化字符串发送到服务器：`request=foo&bar=4`。如果您愿意，也可以尝试 JSON。

不要使用`mysql_*`PHP 函数，因为它们已被弃用。尝试[搜索](http://php.net/manual/en/book.pdo.php)PHP 数据对象 (PDO)。

# java - Tool for java execution path analysis

> ID：12194176
> 
> 赞同：0
> 
> 时间：2012-08-30T09:50:07.497
> 
> 标签：java, profiling

While determining the impact of various bug fixes, I often find myself trying to find all the routes through the codebase which can end up in my changed code. This is a tedious manual process, involving lots of clicking on method names in Eclipse and searching for 'References...' while I draw a tree structure of calls in my notepad.

This *seems* like it should be automatable, but whenever I search for such tools I fail to find such a thing. There seem to be tools which will analyse code for bugs, race-conditions, etc (FindBugs, PMD, Checkstyle, for example) but nothing which will simply output potential routes through the code. It's quite possible I'm not using the correct search terms.

Does such a tool exist for Java or I have overlooked a key reason why this is not possible?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T09:56:16.950

您正在搜索的不是“Open Call Hierarchy”命令吗？

要使用它，请选择方法、字段、构造函数等，然后选择“Open Call Hierarchy”。在这里，您可以浏览代码引用所选元素的位置。

还有一个捷径：`Ctrl`++`Alt``H`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:54:55.730

我相信您正在寻找呼叫层次结构。它内置在 Eclipse、IntelliJ 和 Netbeans 中。

[https://www.google.co.uk/search?q=eclipse+call+hierarchy](https://www.google.co.uk/search?q=eclipse+call+hierarchy)

# eclipse - resource not publishing automatically when change in Spring 3 + eclipse

> ID：12194178
> 
> 赞同：0
> 
> 时间：2012-08-30T09:50:08.877
> 
> 标签：eclipse, jsp, spring-mvc

Previously i worked with Spring 2.5.6, and whenever i do some changes in jsp pages, i simply refresh the project in eclipse and the change will be reflect.

But then, we are migrating this to 3.0 and everything is fine, but even when i make some changes in JSP, and refresh the project, it is not reflecting. Every time we need to restart the server, to see the changes.

I tried everywhere and didn't get a solution for this.

I am using Eclipse 3.3 + jdk 1.6.0_22 + Windows 7\. I am suffering a lot because of this and it would be great if someone helps me fix this issue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:27:30.530

有时这可能是由于您的浏览器缓存，尤其是像 javascript 或 css 这样的“大”文件。可以尝试的几件事可能是手动清除缓存，或者使用 Firefox 或 Chrome 之类的浏览器，使用隐私浏览功能（隐私浏览中没有缓存）并使用它来测试新功能。（如果您`<resources>`在 Spring MVC 中使用新 bean 尤其如此，我相信它会自动缓存它所指向的资源）

如果这不起作用，您的容器可以设置为不重新发布应用程序更改。

# zend-framework2 - Loop through Form Elements in the order they were added

> ID：12194180
> 
> 赞同：5
> 
> 时间：2012-08-30T09:50:12.520
> 
> 标签：zend-framework2, zend-form2

Zend Form 2 structures all Elements in Fieldsets. (Zend\Form\Form extends Fieldset - Form::add calls parent::add )

If i just add Elements to the Form i can get them via `$form->getElements()` if i use a fieldset i can get them via

```
foreach($form->getFieldsets() as $fieldset){
  $elements = $fieldset->getElements();
} 
```

But imagine a form where i add a few hidden fields, then a fieldset, and at last a submit button.

How can i get the elements/fieldsets in their right order ?

Reason behind this, I'm working on a view helper which lets me print forms via a simple call to the view helper.

I don't want to call every form element via a call to `formRow()` (I know of the concept behind Form2 - separating logic from presentation)

Any help is much appreciated. TIA

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T20:21:01.757

您可以按照添加到表单的顺序执行以下操作来获取元素和字段集：

```
/* $form is an instance of \Zend\Form\Form */
foreach ($form as $element) {

    // check if it's a form element or a fieldset etc.
    // and recursively iterate over elements of fieldsets etc.
} 
```

# sharepoint - Reader - Contributor difference in Sharepoint

> ID：12194182
> 
> 赞同：0
> 
> 时间：2012-08-30T09:50:27.403
> 
> 标签：sharepoint, sharepoint-designer, sharepointadmin

I basicall do not understand the privileges of a reader and a contributor. Whats the difference.

Any authenticated user(added to the list) is a reader or a contributor?

In a system engineer-manager scenario, who will be the reader and who the contributor

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:40:45.943

读者具有只读权限，贡献者通常具有 crud 访问权限（创建、读取、更新和删除），但不能管理设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:16:36.230

参与和阅读是 SharePoint 中的默认站点角色

读取授予查看列表项\文档、打开列表项\文档、查看列表项\文档版本、查看页面、浏览器用户信息、查看表单页面、使用客户端集成（直接从共享点打开文档）、创建某些各种站点，并使用远程 API。

Contribute 授予所有这些权限以及：编辑列表项\文档、添加列表项]\文档、编辑自己的用户信息、创建警报、更新个人 Web 部件、添加/删除私有 Web 部件、浏览目录和管理个人视图。

这些权限都没有直接映射到工程师 - 经理场景 - 我会说最好将其建模为生产者 - 消费者。如果经理只需要消耗工程师生产的东西，经理应该阅读，工程师应该贡献。如果工程师只阅读经理生产的内容，您可以扭转这种关系。

# php - Warning: mail(): SMTP server response: 451 spamhaus-xbl - Blocked

> ID：12194184
> 
> 赞同：-1
> 
> 时间：2012-08-30T09:50:37.267
> 
> 标签：php, email, yii, wamp

Here I am trying to send email from my local machine.At that time I have got this warning.

> Warning: mail(): SMTP server response: 451 spamhaus-xbl - Blocked - 121.246.216.118 in C:\wamp\www\OpenInviter\example.php on line 117

I have got this error when I am adding the bellow code at top in my example.php file.

```
ini_set("SMTP","mail.domain.com");
ini_set("smtp_port","25");
ini_set('sendmail_from', 'Email@domain.com'); 
```

**Example.php**

```
foreach ($selected_contacts as $email=>$name)
                    mail($email,$message_subject,$message_body,$headers);
                $oks['mails']="Mails sent successfully"; 
```

What's the problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:11:59.370

Spamhaus 正在阻止您的 IP，因为它列出了@http: [//cbl.abuseat.org](http://cbl.abuseat.org) - 原因是您的计算机上可能有病毒、木马，或者可能感染了垃圾邮件僵尸网络的代理，这不好。

一旦您确定所有使用该 IP 的系统都没有被感染，请访问：[http](http://cbl.abuseat.org/lookup.cgi?ip=121.246.216.118) ://cbl.abuseat.org/lookup.cgi?ip=121.246.216.118并单击底部的链接。在所有阻止列表清除您的 IP 之前，您可能需要等待一周/一个月。

如果您最近从服务提供商处获得了 IP，请与他们联系并要求他们更改您的 IP。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:01:09.737

您的 IP 已被正确或错误地视为垃圾邮件的来源，并且 SMTP 服务器不接受您的电子邮件。尝试使用您正确进行身份验证的其他 SMTP 服务器，可能是付费服务，或者尝试让自己在 spamhaus 中除名（祝您好运）。

# php - Why php script may stop?

> ID：12194187
> 
> 赞同：2
> 
> 时间：2012-08-30T09:50:44.547
> 
> 标签：php, apache, timeout

I'm running really long task in php. It's a website crawler and It has to be polite and sleep for 5 seconds each page to prevent server overloading. Script starts with:

```
ignore_user_abort(1);
session_write_close();
ob_end_clean();
while (@ob_end_flush());
set_time_limit(0);
ini_set('max_execution_time',0); 
```

After few hours (between 3-7h) script dies without any visible reason. I've checked

*   apache error log (nothing)
*   php_errors.log (nothing)
*   output for errors (10 578 467b of debug output, no errors)
*   memory consumption (stable, around 3M from `memory_get_usage(true)` checked every 5 sec, limit set to 512M)

It's not browser, cause I was using wget and chrome to check with the similar reason. Output is sent to browser every 2-3 seconds, so I don't think that's the fault + I ignore user abort.

Is there any other place I can check to find the issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:03:03.297

我认为脚本的其余部分存在问题，而不是 Apache。

尝试使用[register_tick_function](http://it2.php.net/manual/en/function.register-tick-function.php)和像[这样](http://it2.php.net/manual/en/control-structures.declare.php#control-structures.declare.ticks)的光分析器来分析您的应用程序并记录[内存使用情况](http://it2.php.net/manual/en/function.memory-get-usage.php)，可能就是这样。

# php - 登录后如何返回重定向页面（codeigniter）？

> ID：12194189
> 
> 赞同：5
> 
> 时间：2012-08-30T09:50:48.283
> 
> 标签：php, codeigniter

我的 CI 应用程序中有登录控制器：

```
function index()
{
    if($this->session->userdata('logged_in')==TRUE) 
        redirect('/success');

    $data['error']=$this->session->flashdata('errormessage');
    $this->load->view('auth',$data);
}

function process_login()
{

    $username=$this->input->post('username');
    $password=$this->input->post('password');

    if($password == "good_pwd")
    {
    $data=array('username'=>$username,'logged_in'=>TRUE);
    $this->session->set_userdata($data);
    redirect('/success');   
    }   
    else 
    {
        $this->session->set_flashdata('errormessage','Login failed');
        redirect('/failed');
    }
} 
```

那是我在主控制器中的安全构造函数：

```
function __construct()
{
    parent::__construct();
    if($this->session->userdata('logged_in')!=TRUE)  redirect('/login');
} 
```

当我试图进入 www.mysite.com/main/function1/ 并且我没有登录时，构造函数将我重定向到登录页面 - 当我正确登录时，我被重定向到主页而不是将我重定向到登录页面的页面（在本例中： www.mysite.com/main/function1/ ） - 怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T09:56:58.213

为此，您需要将请求 URI 存储在会话中，这样您就可以返回上一页，类似于以下内容：

```
function __construct()
{
    parent::__construct();
    if($this->session->userdata('logged_in')!=TRUE) {
        $this->load->helper('url');
        $this->session->set_userdata('last_page', current_url());
        redirect('/login');
    }
} 
```

...然后您可以使用会话数据重定向回来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:09:41.360

在控制器中设置重定向 url

```
$redirect_to = "where you want to redirect after login";
$this->session->set_userdata('redirect_to',$redirect_to); 
```

在用户控制器中使用类似这样的东西

```
 $redirect_to = $this->input->post('redirect_to') ? $this->input->post('redirect_to') : $this->session->userdata('redirect_to');

    $this->template->build('login', array(
                '_user' => $user,
                'redirect_to' => $redirect_to,
            )); 
```

# c# - 使用 nhibernate 和 mvc 进行分页

> ID：12194196
> 
> 赞同：2
> 
> 时间：2012-08-30T09:51:14.777
> 
> 标签：c#, asp.net-mvc, nhibernate, pagination

我发现非常有趣的使用 nhibernate 进行分页的教程 [http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Simple-paging-with-ASPNET-MVC-and-NHibernate.aspx](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Simple-paging-with-ASPNET-MVC-and-NHibernate.aspx)

如何 `public PagedList<PSScript> GetPaged(int pageIndex, int pageSize)`在没有期货的情况下重写这些查询以供使用（主要原因是我应该有其他数据库的工作版本，如 firbird 等）

或者，如果您有其他有趣的分页教程要分享，请分享。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:55:09.177

您可以简单地创建没有`Futures`. 唯一的区别是您将有两次往返数据库而不是一次。我认为这在您的情况下不会成为问题。

像这样的东西应该工作：

```
using (ISession session = NHibernateHelper.OpenSession())
{
    var rowCount = session.CreateCriteria<PSScript>()
                        .SetProjection(Projections.RowCount())
                        .UniqueResult<Int32>();

    var results = session.CreateCriteria<PSScript>()
        .SetFirstResult((pageIndex - 1) * pageSize)
        .SetMaxResults(pageSize)
        .ToList<PSScript>();

    return new PagedList<PSScript>(results, pageSize, pageSize, rowCount);
} 
```

# android - 我可以从首选项内部开始一个方法吗？

> ID：12194199
> 
> 赞同：0
> 
> 时间：2012-08-30T09:51:26.913
> 
> 标签：android, xml, methods, preferences

是否可以从首选项开始特定类的方法而不是创建类的对象？

```
<PreferenceCategory
    android:key="facebook_cat"
    android:title="Σύνδεση με Facebook" >
    <PreferenceScreen
        android:key="facebook_screen"
        android:summary="Δεν έχετε συνδεθεί στο Facebook. Πατήστε κλικ εδώ για να συνδεθήτε."
        android:title="Αποσυνδεδεμένος" >
        <intent
         -->android:targetClass="com.testproject.facebook.FacebookConnectActivity" <--
            android:targetPackage="com.testproject" />
    </PreferenceScreen>
</PreferenceCategory> 
```

`facebookConnectActivity`是一类。在该类中，我创建了一个`public void called log()`.

是否可以开始它而不是创建整个对象`FacebookActivity`（因此开始`log()`而不是`onCreate()`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:56:11.613

你可以让你的方法是静态的：

```
public static void log() 
```

并从您的偏好中调用它，只需：`FacebookConnectActivity.log();`

并且要清楚，您不要创建扩展 Activity 的对象，因为那里没有构造函数，您应该调用：`startActivity()`为了调用它的`onCreate()`方法，并且 Activity 将对您可见。

# java - 管理员网页内容中的 Liferay 自定义字段验证

> ID：12194203
> 
> 赞同：0
> 
> 时间：2012-08-30T09:51:33.460
> 
> 标签：java, jakarta-ee, liferay, portlet, liferay-6

我在 liferay 6.1 的控制面板中的管理网页内容中添加了自定义字段。

现在我正试图使这些字段成为强制性的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:03:43.497

你不能。自定义字段在 Liferay 中设计为可选。

您的问题的另一个解决方案可能是使用**结构化 Web 内容**并将您的自定义字段定义为结构字段。在 Liferay 6.1 中，结构化字段有几个新选项，例如将它们标记为**required**。

例如，假设您想为每个 Web 内容添加“源”信息，然后使用以下 XSD 创建一个新的 Web 内容结构：

```
<root>
    <!-- other fields... -->
    <dynamic-element name='source' type='text' repeatable='false'>
        <meta-data>
            <entry name="displayAsTooltip"><![CDATA[true]]></entry>
            <entry name="required"><![CDATA[true]]></entry>
            <entry name="instructions"><![CDATA[News agency this article is coming from]]></entry>
            <entry name="label"><![CDATA[Source]]></entry>
            <entry name="predefinedValue"><![CDATA[]]></entry>
        </meta-data>
    </dynamic-element>
</root> 
```

如果您基于此结构创建新文章，内容编辑器必须输入文章的来源，否则 Liferay 将显示错误消息。

# php - 如何检查 $_GET 数组中的变量是否为整数？

> ID：12194205
> 
> 赞同：4
> 
> 时间：2012-08-30T09:51:33.657
> 
> 标签：php, get, validation

我有一个这样的页面：

> `http://sitename/gallery.php?page=2`

它在底部有分页链接，我们可以通过它浏览。每次点击页码时，它都会发送一个带有参数**page=1**或**page=2**等的 GET 请求......

当我将这些值存储到`$page`变量`$_GET`时，它是一个字符串值。我可以使用以下方法将其转换为整数`(int)`：

```
if(!empty($_GET['page'])){
       $page = (int)$_GET['page'];
       echo "Page Number: ".$page;
} 
```

但是我怎样才能确保传递的值只是一个***整数***而不是其他废话？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-30T09:59:58.943

使用过滤器：

```
if (null !== ($page = filter_input(INPUT_GET, 'page', FILTER_VALIDATE_INT, FILTER_NULL_ON_FAILURE))) {
    // $page is now an integer
} 
```

这还检查变量是否同时出现在查询字符串中。如果你想区分缺失和无效，你必须省略最后一个参数`filter_input()`：

```
$page = filter_input(INPUT_GET, 'page', FILTER_VALIDATE_INT);
// $page can be null (not present), false (present but not valid) or a valid integer 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T09:55:16.527

[`filter_var()`](http://www.php.net/manual/en/function.filter-var.php)与过滤器一起使用`FILTER_VALIDATE_INT`，并检查返回值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T09:58:13.483

使用[is_numeric()](http://www.php.net/manual/en/function.is-numeric.php)。

`is_int()`将不起作用，因为 GET 参数始终是字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T10:10:29.187

我在这里和那里留下了一些评论。由于弱类型化，函数喜欢`empty`并且`isset`往往是不可靠的。检查参数是否为 int 的最快方法是 IMO：

```
if (array_key_exists('page',$_GET) && ($_GET['page'] == (int) $_GET['page'])) 
```

转换为 int 然后比较各自的值将仅在有效 int 时返回`$_GET['page']` *true*。如果您出于某种原因（有些原因）想使用严格的类型比较，您可以双重转换：

```
if (array_key_exists('page',$_GET) && ($_GET['page'] === (string)((int) $_GET['page']))) 
```

但在这种特殊情况下，我真的不明白你为什么要这样做

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-24T07:30:38.863

这是一种检查参数是否为整数的方法。

```
if (is_int((int) $_GET['user_id']) && (int) $_GET['user_id'] != 0) {
    $user_id = $_GET['user_id'];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T09:57:46.790

使用`is_int`可能无济于事。PHP 将所有传入参数（包括 $_GET 和 $_POST）解析为字符串。该`is_int`函数检查数据类型，而不是值。`ctype_digit`虽然只检查数字：

```
if(isset($_GET['page']) && ctype_digit($_GET['page']){
   $page = (int)$_GET['page'];
   echo "Page Number: ".$page;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T09:58:03.203

```
if(!empty($_GET['page']) and is_numeric($_GET['page'])){
       $page = (int)$_GET['page'];
       echo "Page Number: ".$page;
} 
```

[is_numeric](http://php.net/manual/en/function.is-numeric.php)可能是您需要的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-30T10:11:41.557

你也可以检查

```
isNAN($_GET['something']);//is_numeric($_GET['something']) 
```

它返回一个布尔值（true，flase）......如果它是真的那么它不是一个整数，如果它是一个整数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-26T07:48:43.717

```
if (isset($_GET['page']) && (($get_page_filtered = filter_var($_GET['page'], FILTER_VALIDATE_INT)) !== FALSE) {
  $get_page_int = $get_page_filtered;
} 
```

@见[https://stackoverflow.com/a/41868665/6758130](https://stackoverflow.com/a/41868665/6758130)

# php - 如何在 PayPal 快速结账中禁用“给买家的备注”？

> ID：12194210
> 
> 赞同：0
> 
> 时间：2012-08-30T09:52:06.737
> 
> 标签：php, paypal

我在集成 PayPal Express Checkout 时遇到问题。我想禁用在结帐过程中向买家添加备注的可能性。

*   我正在使用 PHP SOAP SDK ( `merchant-php-1.1.93_0.zip`)。
*   service.EndPoint 目标为`https://api.sandbox.paypal.com/2.0/`.
*   在订单的第一步，我`SetExpressCheckout..`拨打电话时，我设置了以下值：

    $SetECReqDetails->AllowNote = 0;

$SetEcReqDetails 是 的实例`\SetExpressCheckoutRequestDetailsType`。但是客户仍然可以在 PayPal 网站上输入注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:22:19.943

您将 AllowNote 设置为 0，而不是“0”。

```
var_dump(0 == null) //outputs: boolean true 
```

PayPalAPIInterfaceService 中的代码，第 2436 行，具有以下内容：

```
if($this->AllowNote != null) {
    //prop is not a collection
    //prop not complex
    //prop is not value 
```

所以基本上，你没有定义 AllowNote。

我已经验证了您正在使用的 SDK（目前在 x.com 上为 EC 提供），您的代码不起作用，并且以下内容起作用：

```
$setECReqDetails->AllowNote = "0"; 
```

# jquery - Jquery UI Slider - 基本示例不起作用

> ID：12194214
> 
> 赞同：1
> 
> 时间：2012-08-30T09:52:28.820
> 
> 标签：jquery, jquery-ui, slider, jquery-ui-slider

以下使用 CSS 和 javascript 的 CDN 的简单 jquery 滑块网页 - 显示滑块但不操作（不随着鼠标单击而步进）。有什么想法吗？

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>

        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />

    </head>

    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.8.19/jquery-ui.min.js" type="text/javascript"></script>

    <body>
        <form id="form1" runat="server">
        <div>

            <script>
                $(function () {
                    $("#slider").slider();
                });
            </script>

            <div id="slider"></div>

        </div>
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:13:03.133

更新您的 jQuery UI CDN 路径

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:15:19.340

使用以下代码，它工作正常。

```
 < link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

      < script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
      < script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

# multithreading - 在 Delphi 中使用 CreateRemoteThread 将代码注入另一个进程的正确方法是什么？

> ID：12194216
> 
> 赞同：1
> 
> 时间：2012-08-30T09:52:32.993
> 
> 标签：multithreading, delphi, winapi, ipc

我在[这个博客](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/22/191123.aspx)上读到 sysinernals 用来`CreateRemoteThread()`注入`ExitProcess`另一个进程来终止它。这是真的吗？而且，如果是的话，有人可以告诉我如何在我的 Delphi 应用程序中执行此操作吗？我想终止启动我的应用程序的进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:01:29.173

您在这里提出的问题已在此博客文章中得到解答：http: [//private-storm.de/2009/08/11/case-terminateprocess/](http://private-storm.de/2009/08/11/case-terminateprocess/)

这包括 Delphi 源代码。由于某种原因，该代码启用了`SE_DEBUG_NAME`特权，这不是必需的。

这种方法的困难在于`ExitProcess`在目标应用程序中定位地址。本文中的代码假定它与您自己的进程中的地址相同。这很可能是真的，但并非总是如此。例如，如果您的进程是 64 位进程而目标进程是 32 位进程，那么它就不是真的。或者，如果目标进程的基地址不允许 kernel32 在其首选地址加载。

另一个问题是如果您的进程是 32 位，而目标进程是 64 位。在那种情况下，我相信这个`CreateRemoteProcess`把戏根本就失败了。

总而言之，我会使用`TerminateProcess`.

# sql - 合并两个日期时间

> ID：12194219
> 
> 赞同：1
> 
> 时间：2012-08-30T09:52:37.577
> 
> 标签：sql

在 SQL 中，我有以下代码片段：

```
DECLARE 
@DayPart as datetime,
@TimePart as datetime   

SET @DayPart='2012-01-10 00:00:00.000'
SET @TimePart='2012-08-30 15:41:10.403' 
```

现在我需要：

```
 '2012-01-10 15:41:10.403' 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:54:59.663

您应该得到**@DayPart**`'yyyy-mm-dd'`格式和@TimePart**格式**`'HH:MI:SS:MMM(24H)'`并连接两个字符串。

试试这个

```
SELECT 
     CONVERT(char(10), @DayPart,126) + ' ' + 
     CONVERT(VARCHAR(12), @TimePart, 114) 
```

有关 SQL Server 日期格式的更多信息

[SQL Server 日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:57:02.360

SQL2K8；

```
select @DayPart + cast(@TimePart as time) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:58:12.300

```
SELECT CONVERT(VARCHAR(10),@DayPart,111) + ' ' +  
       CONVERT(VARCHAR(10),@TimePart,108); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T09:59:47.087

```
SELECT REPLACE(CONVERT(VARCHAR(10),@DayPart,102),'.','-') + ' ' +  
       CONVERT(VARCHAR(10),@TimePart,108); 
```

**[其他日期格式](https://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)**

但如果您使用的是 SQL Server 2008+

```
SELECT CONVERT(date, @DayPart) + ' ' + CONVERT(time, @TimePart) 
```

# css - CSS 背景：外部服务器上的 url()

> ID：12194227
> 
> 赞同：6
> 
> 时间：2012-08-30T09:53:02.097
> 
> 标签：css, background-image, external

我正在使用以下 CSS 规则：

```
background: url("http://example.com/background.jpg"); 
```

它不起作用，我想这是因为不支持引用外部服务器。这是真的？如果是这样，我可能会使用什么样的解决方法？

不确定它是否相关，但我需要这个内联。现在在 JSFiddle 上进行测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T10:05:01.287

您的背景无法正常工作的原因可能有两个

1.  您的容器没有高度、宽度或填充（没有显示背景的区域）
2.  您指定的 URL 已损坏或不正确。您指定的 URL 中没有图像。

否则，你`background: url("http://example.com/background.jpg");`是**正确的**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T22:07:52.697

我不确定这是否已解决，但我遇到了类似的问题，我找到了一个简单的解决方案。首先，我使用背景图像而不是背景。其次，我确保包含完整的网址。所以代替背景： url(" [http://example.com/background.jpg](http://example.com/background.jpg) "); 我会放 background-image: url(" [http://www.example.com/background.jpg](http://www.example.com/background.jpg) ");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:56:13.297

它确实有效。你的网址一定有问题。

[http://jsfiddle.net/ebLQQ/](http://jsfiddle.net/ebLQQ/)

# java - Android后退按钮导致错误的Keycharmap警告

> ID：12194231
> 
> 赞同：0
> 
> 时间：2012-08-30T09:53:14.333
> 
> 标签：java, android, progressdialog, back

我正在为android编写一个java应用程序。

在应用程序中，我使用手机上的后退按钮来取消正在运行的任务。但是，当我按下它时，在 Log Cat 中，我得到以下信息：

```
08-30 10:45:25.784: W/KeyCharacterMap(1661): Bad keycharmap - filesize=32

08-30 10:45:25.784: W/KeyCharacterMap(1661): Error loading keycharmap file '/system/usr/keychars/bravo-keypad.kcm.bin'. hw.keyboards.0.devname='bravo-keypad'

08-30 10:45:25.784: W/KeyCharacterMap(1661): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

取消仍然发生，但我担心出现的这个警告。我希望应用程序尽可能稳定。有谁知道这个错误是什么意思？

通过取消**ProgressDialog**和**AsyncTask**会发生取消，如下所示：

```
usingDialog.setOnCancelListener(new OnCancelListener()
{
    public void onCancel(DialogInterface dialog)
    {
        cancel(true);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T23:37:10.587

因此，我对您的问题没有完整的答案，但是我在自己的应用程序中遇到了类似的问题（我得到了相同的警告，但在不同的条件下）并且设法弄清楚了一点。我发现的最重要的事情是，虽然它发生在我的摩托罗拉 Defy XT 上，但它似乎并没有出现在我的 Galaxy SIII 上。你用什么样的手机？

我发现的其他东西：

1）这似乎发生在后退按钮按下解决之前。

2）如果我在两个活动之间来回走动，这只发生在我第一次连续点击后退按钮时。例如，如果我从活动 A 开始，转到活动 B，然后回击，则会出现错误。但是，如果我去活动 B 并再次回击，它不会出现。更奇怪的是，如果我然后转到活动 C，回击（错误按预期出现），然后转到活动 B 并再次返回，然后错误再次开始出现。只有两个活动之间的连续时间才会出现。

3）警告也出现在其他物理按钮上（但不是主页）。我在搜索、设置和音量按钮上看到了它。但是，音量按钮附带的警告使用了与其他三个不同的 devname。

4) 在我的 SIII 上，虽然我没有收到此警告，但我确实收到了另一个错误消息：

```
E/SpannableStringBuilder(6946): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

两者似乎都源于系统使用了不正确的键盘。我希望这只是一个巧合，但似乎值得一提。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:26:49.343

试试这个::

```
 public void onBackPressed() {

    //Task to be performed
    //finish();

 } 
```

# jquery - jquery 验证错误所需的处理程序

> ID：12194236
> 
> 赞同：0
> 
> 时间：2012-08-30T09:53:44.457
> 
> 标签：jquery, jquery-validate

我正在尝试将 jquery 验证错误显示为标题。即，我们将其显示为标题的任何验证错误，它工作正常。

我正在将标题添加到`placeError`函数中的元素。

正如我们所知，jquery 会在未输入数据时进行即时验证，并且对于电子邮件字段，它显示为电子邮件字段是强制性的，如果输入数据的格式无效，则显示为“无效格式”（仅当我显示div 或 span 中的错误消息）我也需要将此行为应用于元素标题，有人可以说明如何处理这个问题，我在哪里可以处理这个问题。

如果以上信息不充分，我可以提供更多细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:09:38.413

使用`errorPlacement`回调；像：

```
$(yourForm).validate({
    // some stuff here
errorPlacement: function(error, element) {
    // do stuff with error and element
        }
    // some more stuff here
}); 
```

见[Jquery Validation 插件自定义错误放置](https://stackoverflow.com/questions/2969381/jquery-validation-plug-in-custom-error-placement)

# java - EntityManager 不需要的后台提交

> ID：12194239
> 
> 赞同：3
> 
> 时间：2012-08-30T09:53:51.290
> 
> 标签：java, jpa, transactions, glassfish

我的一个 glassfish 服务器有一个奇怪的问题。看看这段代码：

```
userTransaction.begin();

MyEntity entity = new MyEntity(12345);
//setting values..
entityManager.persist(entity);

MyEntity persistedEntity = entityManager.createQuery("SELECT p FROM MyEntity p WHERE p.idpk=12345").getSingleResult();
//...

userTransaction.commit(); //OK => the tuple is in the DB 
```

现在出现业务问题，需要回滚事务。

```
userTransaction.begin();

MyEntity entity = new MyEntity(12345);
//setting values..
entityManager.persist(entity);

MyEntity persistedEntity = entityManager.createQuery("SELECT p FROM MyEntity p WHERE p.idpk=12345").getSingleResult();
//...

//Business problem => rollback
userTransaction.rollback(); //ERROR => the tuple 12345 is in the DB ! 
```

即使回滚似乎有效（没有引发异常或奇怪的日志输出），元组已经提交到数据库中......为了搜索问题所在，我尝试了以下代码：

```
userTransaction.begin();

MyEntity entity = new MyEntity(12345);
//setting values..
entityManager.persist(entity);

//Business problem => rollback
userTransaction.rollback(); //OK => the tuple 12345 is NOT in the DB ! 
```

使用此代码（不检索实体），元组不会提交到数据库，这是正确的行为。让我们更进一步：

```
userTransaction.begin();

MyEntity entity = new MyEntity(12345);
//setting values..
entityManager.persist(entity);

MyEntity persisted = entityManager.find(MyEntity.class, 12345);
//...

//Business problem => rollback
userTransaction.rollback(); //OK => the tuple 12345 is NOT in DB 
```

在最后一种情况下，结果仍然正确，并且没有提交给数据库的元组。似乎 EntityManager 在使用查询检索实体时做了一个神奇的 [不需要的] 提交......我还尝试在另一个表上进行查询，这不会导致错误的提交（回滚有效）。此外，我尝试在自己的服务器上重现该问题，并且没有问题：所有回滚都正常工作。因此，它确实应该是服务器配置问题。

有关信息，它是在 linux 上运行的 glassfish v2.1.1。EntityManager 在 FlushModeType.AUTO 中。

有人有想法吗？

谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:11:51.083

发现一些讨论似乎可以解释您所看到的一些内容：

通过 EJB3 In Action Book 的 P-331：

> 默认情况下，数据库刷新模式设置为 AUTO。这意味着 Entity-Manager 会根据需要自动执行刷新操作。通常，这发生在事务范围的 EntityManager 的事务结束时，以及应用程序管理或扩展范围的 EntityManager 的持久性上下文关闭时。**此外，如果在查询中使用了具有未决更改的实体，则持久性提供程序将在执行查询之前将更改刷新到数据库。** **如果将刷新模式设置为 COMMIT，则持久性提供程序将仅在事务提交时与数据库同步。**但是，您应该小心这一点，因为在执行查询之前将实体状态与数据库同步是您的责任。如果您不这样做并且 EntityManager 查询从数据库返回过时的实体，则应用程序可能会以不一致的状态结束。

P-353 EJB3 In Action Book 指出：

> 如果**Query 设置为 FlushModeType.COMMIT**，则对持久性上下文中的实体进行更新的效果不是由规范定义的，实际行为是特定于实现的。

也许尝试在返回的查询上切换刷新模式

`entityManager.createQuery("SELECT p FROM MyEntity p WHERE p.idpk=12345").getSingleResult();`

或实体管理器本身，看看是否改变了什么？

这里有一些进一步的讨论：

[http://www.coderanch.com/t/475041/ORM/databases/EntityManager-setFlushMode-COMMIT-Vs-Query](http://www.coderanch.com/t/475041/ORM/databases/EntityManager-setFlushMode-COMMIT-Vs-Query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:47:37.743

为什么不这样做：

```
MyEntity persisted = entityManager.persist(entity); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T08:44:14.013

我终于发现问题出在哪里：在 JDBC 连接池中，有一个“事务”部分，其中启用了“非事务性连接”选项......只需删除此选项即可使整个工作正常工作:)

# mysql - 在 MySQL 命令中显示 PROCESSLIST：sleep

> ID：12194241
> 
> 赞同：92
> 
> 时间：2012-08-30T09:53:55.253
> 
> 标签：mysql, processlist

当我在 MySQL 数据库中运行 SHOW PROCESSLIST 时，我得到以下输出：

```
mysql> show full processlist;

+--------+------+-----------+--------+---------+-------+-------+-----------------------+
| Id     | User | Host      | db     | Command | Time  | State | Info                  |
+--------+------+-----------+-------+---------+-------+-------+-----------------------+
| 411665 | root | localhost | somedb | Sleep   | 11388 |       | NULL                  | 
| 412109 | root | localhost | somedb | Query   |     0 | NULL  | show full processlist | 
+--------+------+-----------+-------+---------+-------+-------+------------------------+ 
```

我想知道命令下的进程“睡眠”。这是什么意思？为什么它运行了很长时间并显示为NULL？它使数据库变慢，当我终止进程时，它可以正常工作。请帮我。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-04T14:36:00.713

这不是等待连接的查询；这是一个等待超时终止的连接指针。

它对性能没有影响。它唯一使用的是每个连接都使用的几个字节。

最糟糕的情况：它使用了你的池的一个连接；如果您要通过控制台客户端连接多次并关闭客户端而不关闭连接，您可能会用完所有连接并且必须等待超时才能再次连接......但这不太可能:-)

查看[充满“睡眠”条目导致“连接过多”的 MySql 进程列表？](https://stackoverflow.com/questions/2407732/mysql-proccesslist-filled-with-sleep-entries-leading-to-to-many-connections)和[https://dba.stackexchange.com/questions/1558/how-long-is-too-long-for-mysql-connections-to-sleep](https://dba.stackexchange.com/questions/1558/how-long-is-too-long-for-mysql-connections-to-sleep)了解更多信息。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-03T20:12:15.003

“睡眠”状态连接通常由维护与数据库的持久连接的代码创建。

这可能包括由应用程序框架创建的连接池或客户端数据库管理工具。

正如上面评论中提到的，真的没有理由担心这些连接......当然，除非你不知道连接来自哪里。

（警告：如果您有一长串此类连接，则可能存在同时连接用完的危险。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-12T11:36:44.767

我在这里找到了这个答案：[https](https://dba.stackexchange.com/questions/1558) ://dba.stackexchange.com/questions/1558 。简而言之，使用以下（或在 my.cnf 中）将消除超时问题。

`SET GLOBAL interactive_timeout = 180; SET GLOBAL wait_timeout = 180;`

如果连接保持在睡眠状态 3 分钟（或您定义的任何内容），这将允许连接结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T03:22:40.357

睡眠意味着该线程什么也不做。由于anthor线程查询时间过长，但没有断开服务器，默认wait_timeout=28800；所以你可以设置较小的值，例如10。也可以杀死线程。

# java - 使用 maven 构建项目

> ID：12194246
> 
> 赞同：-1
> 
> 时间：2012-08-30T09:54:04.253
> 
> 标签：java, maven

我正在尝试从这里执行示例应用程序：[http](http://www.ixtendo.com/secure-your-jsf-application-with-jaas/#comment-3792) ://www.ixtendo.com/secure-your-jsf-application-with-jaas/#comment-3792 。作者说：

> 要构建项目，您必须安装 Maven 并调用 mvn clean package。

我已经在我的 Ubuntu 12.04 中安装了 Maven。但我是 Maven 新手，不知道如何用它构建项目。有人可以详细解释如何使用 Maven 构建项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:14:28.747

**仅当您从pom.xml**所在的应用程序的上下文中执行命令时，该命令`mvn clean`才会起作用。

 **这是[Maven](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)的快速教程。**

# android - 为 2.3.3 版本开发的应用程序在 maifest 中添加 android:tragetSdkVersion="14"，这是个好主意吗？

> ID：12194248
> 
> 赞同：1
> 
> 时间：2012-08-30T09:54:10.463
> 
> 标签：android, android-tabhost, android-tabactivity

我想添加`android:tragetSdkVersion= "14"`我的清单，但我很困惑，因为最初我为 2.3.3 版本开发了我的应用程序。所以我用`TabActivity`了那个。但`TabActivity`在 4.0 版本中已弃用，根据文档，包括`android:tragetSdkVersion= "14"`意味着系统不会对应用程序施加任何前向兼容性。`android:tragetSdkVersion= "14"`所以我想知道将其包含在我的清单中是否是个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:43:57.337

如果您想让它在 sdk 14 上运行，为什么要在代码中保留 TabActivity？

否则，不要以 sdk14 为目标，最好防止 4.0 或更高版本的用户安装您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T17:29:06.160

You should use the v4 support libraries if you target higher SDK versions and also provide a minSdk:

```
<uses-sdk android:minSdkVersion="integer"
          android:targetSdkVersion="integer"
          android:maxSdkVersion="integer" /> 
```

here is info about the support libraries

[http://developer.android.com/tools/support-library/index.html](http://developer.android.com/tools/support-library/index.html)

# c# - WPF 图标预加载

> ID：12194249
> 
> 赞同：2
> 
> 时间：2012-08-30T09:54:13.327
> 
> 标签：c#, wpf, performance, image, preloading

我的应用程序对货币做了很多工作，因此经常使用我拥有的 80-90 个 .ICO 文件作为国家标志资源，来代表每种货币。大多数屏幕都使用这些，每次使用都重新加载它们似乎是一种浪费，特别是考虑到当我使用具有 IMG 标签的数据模板时，它会冻结 GUI 或在 ListViews 等中加载它们时使其性能非常低下。

在 WPF 中是否推荐了某种方式或设计，我可以将这些图像预加载到 WPF 应用程序空间中，以便每当它们被引用时，它们已经被全局缓存和加载，所以我只需在应用程序启动时将它们加载到内存中，然后从那时起，每次使用都快如闪电？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:57:25.200

我建议将它们放入您的 xaml 中的 Application.Resources 中。

这些只加载一次，并且在您的应用程序中随处可访问。

请参阅[如何：使用](http://msdn.microsoft.com/en-us/library/ms746624.aspx)msdn 上的应用程序资源。

**编辑：** 在您也绑定项目的类（包含 的类`IconSelect`）中，您需要添加一个额外的属性。

```
public BitmapImage BitmapIconSelect
{
    get
    {
        return Application.Resources[IconSelect];
    }
} 
```

然后绑定到这个属性：

```
<Image Source="{Binding BitmapIconSelect, IsAsync=True, Mode=OneWay}" Width="20" Height="20" /> 
```

我徒手写了这段代码，所以我不确定它是否可以编译，但我希望你明白我的意思。

# unit-testing - Qt：如何组织多个类的单元测试？

> ID：12194256
> 
> 赞同：33
> 
> 时间：2012-08-30T09:54:48.227
> 
> 标签：unit-testing, qt4, qt-creator

我有一个 Qt 单元测试（子）项目，它为我生成一个类（主要由 生成`QTEST_APPLESS_MAIN`）。我可以从 Qt Creator 作为控制台应用程序启动它。

问：我如何向这个特定项目添加额外的类作为测试用例。

1.  如果这些类只有“测试”槽（`private Q_SLOTS`），则不会调用方法，而只会调用具有`QTEST_APPLESS_MAIN`
2.  由于只能有一个`main(..)`，我不能`QTEST_APPLESS_MAIN`在项目中使用多个类（对吗？）
3.  当然，我可以手动将（附加）类中的插槽与包含 的类“连接” `main`，但这非常乏味。

那么在单元测试项目中对多个类运行单元测试的最佳方法是什么？

PS：在“[在项目中使用 QT 单元测试 - 冲突的 main(...) 函数](https://stackoverflow.com/questions/9780602/using-qt-unit-tests-in-a-project-conflicting-main-functions)”[中提到了一个博客](http://qtcreator.blogspot.ca/2010/04/sample-multiple-unit-test-project.html)，但是，我无法下载描述该解决方案的 zip。

![Qt 单元测试子项目](../Images/7bbd262045940ecc12b6fb82eeb95c0e.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-31T00:40:04.913

根据您链接到的解决方案，在单个 Qt 单元测试项目中完成测试两个（或多个）类的方法是确保要测试的每个类都有相应的测试类，并且您已经创建了一个自定义`int main`的执行每个测试类。

例如：

```
class TestClassA : public QObject
{
   Q_OBJECT
public:
   TestClassA();

   ...

private Q_SLOTS:
   void testCase1();
   ...
};

class TestClassB : public QObject
{
   Q_OBJECT
public:
   TestClassB();

   ...

private Q_SLOTS:
   void testCase2();
   ...
};

void TestClassA::testCase1()
{
   // Define test here.
}

void TestClassB::testCase2()
{
   // Define test here.
}

// Additional tests defined here.

// Note: This is equivalent to QTEST_APPLESS_MAIN for multiple test classes.
int main(int argc, char** argv)
{
   int status = 0;
   {
      TestClassA tc;
      status |= QTest::qExec(&tc, argc, argv);
   }
   {
      TestClassB tc;
      status |= QTest::qExec(&tc, argc, argv);
   }
   return status;
} 
```

显然，不同的测试类可以分布在多个翻译单元中，然后简单地使用您的`int main`. 不要忘记包含适当的`.moc`文件。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-05-05T19:01:41.807

基于接受的答案，如果您使用的是 C++11，您可能会对使用 lambdas 的解决方案感兴趣。它避免了您每次都编写相同的代码。虽然你可以用函数替换 lambda，但我认为 lambda 更干净。

```
#include <QtTest>

#include "test1.h"
#include "test2.h"

int main(int argc, char** argv)
{
   int status = 0;
   auto ASSERT_TEST = [&status, argc, argv](QObject* obj) {
     status |= QTest::qExec(obj, argc, argv);
     delete obj;
   };

   ASSERT_TEST(new Test1());
   ASSERT_TEST(new Test2());

   return status;
}

#ifndef TEST1_H
#define TEST1_H 
```

样品测试

```
#include <QtTest>

class Test1 : public QObject
{
    Q_OBJECT

  private Q_SLOTS:
    void testCase1();
}; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-12-29T18:44:27.023

在寻找同样的答案时，我从[http://qtcreator.blogspot.de/2009/10/running-multiple-unit-tests.html](http://qtcreator.blogspot.de/2009/10/running-multiple-unit-tests.html)找到了一个非常好的解决方案。他使用一个容器创建了一个命名空间，该容器注册了所有创建的测试（通过 DECLARE_TEST 宏），然后使用它来运行列表中的所有测试。我重写了它以适合我的代码，并在此处发布我的版本（我的 Qt Creator 版本：4.1.0）：

```
/* BASED ON
 * http://qtcreator.blogspot.de/2009/10/running-multiple-unit-tests.html
 */    
#ifndef TESTCOLLECTOR_H
#define TESTCOLLECTOR_H

#include <QtTest>
#include <memory>
#include <map>
#include <string>

namespace TestCollector{
typedef std::map<std::string, std::shared_ptr<QObject> > TestList;
inline TestList& GetTestList()
{
   static TestList list;
   return list;
}

inline int RunAllTests(int argc, char **argv) {
    int result = 0;
    for (const auto&i:GetTestList()) {
        result += QTest::qExec(i.second.get(), argc, argv);
    }
    return result;
}

template <class T>
class UnitTestClass {
public:
    UnitTestClass(const std::string& pTestName) {
        auto& testList = TestCollector::GetTestList();
        if (0==testList.count(pTestName)) {
            testList.insert(std::make_pair(pTestName, std::make_shared<T>()));
        }
    }
};
}

#define ADD_TEST(className) static TestCollector::UnitTestClass<className> \
    test(#className);

#endif // TESTCOLLECTOR_H 
```

然后，只需在测试标头中添加 ADD_TEST(class) 行，如下所示：

```
#ifndef TESTRANDOMENGINES_H
#define TESTRANDOMENGINES_H

#include <QtTest>
#include "TestCollector.h"

class TestRandomEngines : public QObject
{
    Q_OBJECT

private Q_SLOTS:
    void test1();
};

ADD_TEST(TestRandomEngines)

#endif // TESTRANDOMENGINES_H 
```

并且要运行所有测试，只需执行以下操作：

```
#include "TestCollector.h"
#include <iostream>

int main(int argc, char *argv[]) {
    auto nFailedTests = TestCollector::RunAllTests(argc, argv);
    std::cout << "Total number of failed tests: "
              << nFailedTests << std::endl;
    return nFailedTests;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-16T10:25:44.570

我正在使用以下代码收集所有测试结果：

```
#include "testclassa.h"
#include "testclassb.h"
#include <QtTest>
#include <QDebug>

int main(int argc, char** argv){

    int failedTests = 0;
    TestClassA testClassA
    TestClassB testClassB
    failedTests += QTest::qExec(&testClassA, argc, argv);
    failedTests += QTest::qExec(&testClassB, argc, argv);

    if(failedTests > 0){
        qDebug() << "total number of failed tests: " << failedTests;
    }else{
        qDebug() << "all tests passed :)";
    }
    return failedTests;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-08T06:37:40.233

我这样做的方式：

*   创建一个通用的“子目录”项目。

*   将要测试的代码放在 C++ 库子项目中。

*   我没有使用单元测试项目，而是使用控制台应用程序子项目。

*   将库链接到此控制台应用程序，不要忘记在层次结构顶部的 .pro 文件中处理依赖项。

*   在这个控制台子项目中，定义任意数量的测试类，并在同一个项目的主项目中启动它们。

我基本上对[这篇文章](https://sites.google.com/a/embeddedlab.org/community/technical-articles/qt/qt-posts/creatingandexecutingasingletestprojectwithmultipleunittests)做了些许改动。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-27T13:59:58.060

使用 CMake 而不是 QMake 构建，并添加两个测试目标。

```
add_executable(firstTest tst_testfirst.cpp)
add_test(NAME firstTest COMMAND firstTest)

add_executable(secondTest tst_testsecond.cpp)
add_test(NAME secondTest COMMAND secondTest) 
```

tst_testfirst.cpp 和 tst_testsecond.cpp 都有自己的 QTEST_MAIN 行。

Qt Creator 将运行这两个测试类。如果您从命令行运行它们，则使用“ctest”运行测试。

# android - 安卓。ScrollView“无限”滚动

> ID：12194259
> 
> 赞同：0
> 
> 时间：2012-08-30T09:54:51.860
> 
> 标签：android

我有`ImageView`整个屏幕的高度。其中显示的图像类似于尺子。

我想做一些事情，比如在一个巨大的列表中`ScrollView`滚动，当我滚动时，我希望标尺与列表中的项目一起使用。

我肯定会遇到的问题将是一个`OutOfMemory`例外，因为所有标尺 ImageViews 我都需要在另一个下显示一个。

所以我的问题是，有没有一种方法可以让我使用一个`ImageView`，或者说几个、5 个或类似的东西，可以在一个循环中滚动。所以当我向下滚动并且最后一个`ImageView`结束时，第一个开始。类似于没有开始也没有结束的“无限循环”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:50:13.457

我已经想通了。我只需要使用`ListViews`. 似乎他们管理内容，因此不会引发`OutOfMemory`异常

[http://www.google.com/events/io/2010/sessions/world-of-listview-android.html](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)

# c# - 更新到 EF5 现在 NotMapped 注释不起作用

> ID：12194267
> 
> 赞同：20
> 
> 时间：2012-08-30T09:55:13.223
> 
> 标签：c#, entity-framework-5

我刚刚将实体框架更新到最新的 5.0.0 版本。并且`NotMapped`注释现在不起作用。我试图用谷歌搜索修复它的答案，但找不到。当您更新实体框架并知道解决此问题的解决方案时，有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-30T10:59:31.683

EF 5.0 和 .NET 4.5 中的注释属性已移至 System.ComponentModel.DataAnnotations 程序集和`System.ComponentModel.DataAnnotations.Schema`命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-17T04:08:47.490

[ **NotMapped** ] 在**System.ComponentModel.DataAnnotations.Schema**中。确保添加`using System.ComponentModel.DataAnnotations.Schema;`到您的代码中。

# javascript - 访问 Firefox 插件内容脚本中的窗口对象？

> ID：12194275
> 
> 赞同：1
> 
> 时间：2012-08-30T09:55:52.203
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我似乎无法访问内容脚本中的窗口对象。这是正常的吗？

例如，这什么都不做：

```
window.onload = function() {
  console.log("Hello from the onload");
}; 
```

相反，我必须使用该`unsafeWindow`对象。

```
unsafeWindow.onload = function() {
  console.log("Hello from the onload");
}; 
```

我一定错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T08:01:38.077

不要使用`window.onload`，而是写：

```
window.addEventListener("load", function() {
  console.log("Hello from the onload");
}, false); 
```

`window.onload`具有只能有一个事件侦听器的限制，设置不同的侦听器会替换现有的侦听器 - 这已经是您永远不应该使用它的原因。在附加 SDK 的情况下，事情会变得更加复杂，因为内容脚本具有与网页不同的 DOM 视图。所以只需使用[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener).

哦，请不要使用`unsafeWindow`- 它（正如名字已经说过的）本质上是不安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T14:28:49.247

内容脚本中可用的 window 对象实际上是一个代理 - 因此 unsafeWindow 有效，而 window 无效。我做了一些测试，但 document.addEventListener 也不起作用：

[https://builder.addons.mozilla.org/package/150362/latest/](https://builder.addons.mozilla.org/package/150362/latest/)

jQuery 似乎工作正常，但我想他们会做一些魔法来确保无论如何都能触发。

解决方法只需将 contentScriptWhen 设置为“结束”并立即运行您的代码 - 这应该始终有效，因为在完成加载文档时附加了内容脚本。

我确实记录了这个关于我喜欢认为的“wtf？”的错误。这种行为的一个方面——我认为结果对 Web 开发人员来说是令人惊讶的，我们应该尽量不那么令人惊讶：

[https://bugzilla.mozilla.org/show_bug.cgi?id=787063](https://bugzilla.mozilla.org/show_bug.cgi?id=787063)

# c# - 如何获得当天的“数字”

> ID：12194277
> 
> 赞同：1
> 
> 时间：2012-08-30T09:55:54.940
> 
> 标签：c#, date, windows-8, microsoft-metro

我想得到“当天的数字。例如：一月的第一个是1。二月的第一个是32。

这样我们起床一整年有 365 天。

对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T09:57:38.507

[`DateTime.DayOfYear`](http://msdn.microsoft.com/en-us/library/system.datetime.dayofyear.aspx)是你想要的

```
 DateTime.Now.DayOfYear 
```

或无论你的日期是什么；

```
yourDate.DayOfYear; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T09:58:10.227

使用`DayOfYear`任何`DateTime`对象的属性：

```
var date = new DateTime(2012, 1, 1);
var dayNumber = date.DayOfYear; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:00:42.313

有一个`DateTime`属性名为：[DayOfYear](http://msdn.microsoft.com/en-us/library/system.datetime.dayofyear.aspx)

```
Console.WriteLine(DateTime.Now.DayOfYear); 
```

或任何日期：

```
var d = new DateTime(2012, 8, 30);
Console.WriteLine(d.DayOfYear); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:00:47.417

像这样

```
private int GetDaysInAYear(int year)
{

   int days = 0;
   for (int i = 1; i <= 12; i++)
   {
       days += DateTime.DaysInMonth(year, i);
   }
  return days;
} 
```

并执行此操作（上述方法获取一年中的天数）

DateTime.Now.DayOfYear

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T10:07:19.747

```
DateTime.Now.DayOfYear.ToString() 
```

# java - 如何清理和清理用户提交的 url 以便在 java 中重新显示？

> ID：12194284
> 
> 赞同：2
> 
> 时间：2012-08-30T09:56:22.267
> 
> 标签：java, javascript, html, security

我希望用户能够提交一个 url，然后将该 url 作为链接显示给其他用户。

如果我天真地重新显示用户提交的内容，我会让自己对诸如

```
http://somesite.com' ><script>[any javacscript in here]</script> 
```

当我将它重新显示给其他用户时会做一些讨厌的事情，或者至少会让我看起来不专业，因为没有阻止它。

是否有一个库，最好是在 java 中，它将清理一个 url，以便它保留所有有效的 url，但清除任何漏洞/tomfoolery？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:59:12.457

我认为您正在寻找的是输出编码。看看[OWASP ESAPI](https://github.com/ESAPI/esapi-java)，它是在 Java 中执行编码的久经考验的方法。

另外，只是一个建议，如果您想检查用户是否提交了恶意 URL，您可以对照 Google 恶意软件数据库进行检查。您可以为此使用[SafeBrowing](https://developers.google.com/safe-browsing/) API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:48:48.920

具有 in 的 URL`'`完全有效。如果您将它们输出到 HTML 文档而不进行转义，那么问题在于您缺少 HTML 转义，而不是输入检查。您需要确保*每次*将任何可变文本（包括 URL）输出到 HTML 文档中时都调用了 HTML 编码方法。

Java 没有内置的 HTML 编码器（表现不佳！），但大多数 Web 库都有（随[你选择](https://stackoverflow.com/questions/1265282/recommended-method-for-escaping-html-in-java)，或者自己编写一些字符串替换）。如果您使用 JSTL 标签，`escapeXml`默认情况下您可以免费使用：

```
<a href="<c:out value="${link}"/>">ok</a> 
```

虽然您的主要问题是 HTML 转义，但验证输入 URL 是否有效以捕获错误仍然可能有益 - 您可以通过解析它`new URL(...)`并查看是否收到 MalformedURLException 来做到这一点。

您还应该检查 URL 是否以已知良好的协议开头，例如`http://`或`https://`。这将防止任何人使用危险的 URL 协议，比如`javascript:`像 HTML 注入一样容易导致跨站点脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:09:39.203

您可以使用[apache 验证器](http://commons.apache.org/validator/) [URLValidator](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html)

```
UrlValidator urlValidator = new UrlValidator(schemes);
if (urlValidator.isValid("http://somesite.com")) {
   //valid
} 
```

# java - 用于导出到 jar 的 FileInputStream 路径

> ID：12194286
> 
> 赞同：0
> 
> 时间：2012-08-30T09:56:28.837
> 
> 标签：java, jar, inputstream, filepath, executable-jar

我正在尝试将我的项目导出到 .jar 或 .exe。这适用于外部文本文件。

这是我的代码：

```
 InputStream  is = new FileInputStream("MYPATH/start.txt");
    Reader r = new InputStreamReader(is);

  while ((my_char = r.read()) != -1) {
    text_list.add(String.valueOf((char) my_char));
  } 
```

我如何设置“MYPATH”以便我的 jar 文件与其他 PC 的文本一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:59:03.077

也许你正在寻找

```
FileReader r = new FileReader(mypath + "/start.txt");
// or
FileReader r = new FileReader(new File(mypath, "start.txt")); 
```

我不会尝试将所有字节的列表创建为字符串。通常一次读一行更有用。

```
BufferedReader br = new BufferedReader(new FileReader(new File(mypath, "start.txt")));
for(String line; (line = br.readLine()) != null; ) {
    // process line
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:30:12.387

```
 URL res = getClass().getClassLoader().getResource("Interface/Text/start.txt");
  InputStream is = res.openStream();
   r = new InputStreamReader(is);             
   while ((my_char = r.read()) != -1) {
        text_list.add(String.valueOf((char) my_char));
    } 
```

这就是我的解决方案。

# javascript - 如何使用 Jquery 从二维选择框中获取值

> ID：12194287
> 
> 赞同：0
> 
> 时间：2012-08-30T09:56:32.533
> 
> 标签：javascript, jquery-ui, jquery

我有一个具有相同 ID 和名称的选择框，如下所示：

```
 <input id="primary_employee_address[country_code]" name ="primary_employee_address[country_code]" 
```

现在如果我这样做

```
document.getElementById( 'primary_employee_address[country_code]' ).value 
```

我得到了想要的结果。但是，如果我尝试

```
jQuery( '#primary_employee_address[country_code]' ).val()); 
```

我总是得到“未定义”的结果。我怎样才能解决同样的问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:01:01.487

因此，jQuery 文档`[]`用于为您的选择定义一些过滤器，所以我认为 jQuery 试图让您获得具有不存在`primary_emplyee_address`属性的 id 元素。`country_code`

[在jQuery 选择器文档](http://api.jquery.com/category/selectors/)中阅读更多相关信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:01:38.800

`\\`如果选择器包含对 jQuery 选择器引擎有意义的字符，则需要使用 with 转义选择器；

```
$('#primary_employee_address\\[country_code\\]')... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:08:17.020

是的老板...

JQuery 使用这个方框表示来根据在这些方括号之间定义的属性来选择元素。

喜欢 ：

$('输入[类型=复选框][名称=问题]')

最好在这些括号之前使用转义序列“\”（[ 作为 \[ 和 ] 作为 \]）让 JQuery 解释您的控件 ID

# javascript - 使用带有 ext.net 控件的 javascript 函数

> ID：12194288
> 
> 赞同：0
> 
> 时间：2012-08-30T09:56:49.133
> 
> 标签：javascript, jquery, ext.net

我用javascript写了这个函数

```
function CheckBeforeAddNew(btnId, gridSelected) {
$(btnId).click(function () {
      for (var i in gridSelected) {
        return true;
      };
      Ext.Msg.alert('Add', 'Can not do without selected item');
      {
        return false;
      };
    });
}; 
```

当我试图让这个功能到达按钮点击时，如下所示：

```
<ext:Button runat="server" ID="btnAddNewToMme" Cls="topButton" Text="Add new" Icon="Add" OnDirectClick="btnAddNewToMme_OnDirectClick">
                    <DirectEvents>
                        <Click Before="CheckBeforeAddNew('#<%= btnAddNewToMme.ClientID%>','<%=dlOuterObject.Grid_ClientID %>.selectedIds')"></Click>
                    </DirectEvents>
                </ext:Button> 
```

我有错误`ReferenceError: $ is not defined $(btnId).click(function () {`

**我怎样才能调用这个函数来使它工作？**

**编辑：** 当然我添加了这个功能的文件到我的`.aspx`喜欢

`<script type="text/javascript" src="Scripts/Synchronization.js"></script>`

**Edit1：** 在萤火虫中我可以先看到

`<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>` 所以 jQuery 被正确加载

**Edit2：** 我对@geoffrey 提供的函数进行了更改：

```
var CheckBeforeAddNew = function (gridSelected) {
for (var i in gridSelected) {
    return true;
}
Ext.Msg.alert('Error', 'Something wrong!');
return false; 
```

};

但是使用它

```
<ext:Button runat="server" ID="btnAddNewToMme" Cls="topButton" Text="Add new" Icon="Add" OnDirectClick="btnAddNewToMme_OnDirectClick">
                <DirectEvents>
                    <Click Before="return CheckBeforeAddNew('<%= dlOuterObject.Grid_ClientID %>.selectedIds');"></Click>
                </DirectEvents>
            </ext:Button> 
```

我无法完成这项工作：

```
if (grid.getSelectionModel().getCount() < 1) {
   Ext.Msg.alert('Error', 'Please select an Item');

   return false;
} 
```

我的 dlOuterObject`UserControl`包含网格。那么有什么想法可以让它发挥作用吗？

谢谢你的帮助：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:41:32.037

您的原始代码示例存在一些问题。

此`<%= btnAddNewToMme.ClientID%>`语法在 ASP.NET 标记配置中不起作用。您将需要使用`<%# %>`DataBinding 语法。

您的`CheckBeforeAddNew`JavaScript 函数不使用`btnId`，因此您不需要传递它。

您也不需要使用任何 jQuery。所需的所有功能都包含在`ExtJS`框架中，该框架已经包含在您的`Page`.

只需将 的实例传递`GridPanel`到您的 JavaScript 函数中，然后封装用于获取/检查函数中选定项目计数的逻辑。

这是一个功能齐全的示例，演示了使用 Ext.NET 2.0 的场景。如果您使用的是 v1.x，则代码`.Before`处理程序基本相同，只是 GridPanel 模型配置会略有不同。

**例子**

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!X.IsAjaxRequest)
        {
            var store = this.GridPanel1.GetStore();

            store.DataSource = this.Data;
            store.DataBind();
        }
    }

    private object[] Data
    {
        get
        {
            return new object[]
            {
                new object[] { "3m Co" },
                new object[] { "Alcoa Inc" },
                new object[] { "Altria Group Inc" },
                new object[] { "American Express Company" },
                new object[] { "American International Group, Inc." },
                new object[] { "AT&T Inc." },
                new object[] { "Boeing Co." },
                new object[] { "Caterpillar Inc." },
                new object[] { "Citigroup, Inc." },
                new object[] { "E.I. du Pont de Nemours and Company" },
                new object[] { "Exxon Mobil Corp" },
                new object[] { "General Electric Company" }
            };
        }
    }

    protected void Button1_Click(object sender, DirectEventArgs e)
    {
        X.Msg.Notify("Message", "Button1 Clicked").Show();
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Simple Array Grid - Ext.NET Examples</title>

    <script type="text/javascript">
        var checkSelected = function (grid) {
            if (grid.getSelectionModel().getCount() < 1) {
                Ext.Msg.alert('Error', 'Please select an Item');

                return false;
            }

            return true;
        };
    </script>
</head>
<body>
    <ext:ResourceManager runat="server" />

    <ext:GridPanel 
        ID="GridPanel1"
        runat="server" 
        Title="Example" 
        Width="600" 
        Height="350">
        <Store>
            <ext:Store runat="server">
                <Model>
                    <ext:Model runat="server">
                        <Fields>
                            <ext:ModelField Name="company" />
                        </Fields>
                    </ext:Model>
                </Model>
            </ext:Store>
        </Store>
        <ColumnModel>
            <Columns>
                <ext:Column runat="server" Text="Company" DataIndex="company" Flex="1" />
            </Columns>            
        </ColumnModel>       
        <SelectionModel>
            <ext:RowSelectionModel runat="server" Mode="Multi" />
        </SelectionModel>
        <Buttons>
            <ext:Button runat="server" Text="Submit" Icon="Accept">
                <DirectEvents>
                    <Click OnEvent="Button1_Click" Before="return checkSelected(App.GridPanel1);" />
                </DirectEvents>
            </ext:Button>
        </Buttons>
    </ext:GridPanel>
</body>
</html> 
```

希望这可以帮助。

# c# - 找出在 MS TestInitialize 中执行的下一个测试方法

> ID：12194289
> 
> 赞同：11
> 
> 时间：2012-08-30T09:56:55.560
> 
> 标签：c#, unit-testing, vs-unit-testing-framework

我将特定测试方法的测试数据保存在与函数名称相同的文件夹中。我以前在每个 中都有相同的函数调用`[TestMethod]`，`ClearAllAndLoadTestMethodData()`它通过 确定方法名称`StackTrace`。现在，我将此功能移至`[TestInitialize]`. 如何找到即将执行的方法的名称？

我想`TestContext`提供这个。我可以通过它访问它，`[AssemblyInitialize()]`并且在第一次运行时，它的属性`Name`设置为测试方法的名称。但是，稍后这不会改变（如果我将对象保存在静态字段中）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T13:43:45.480

[AssemblyInitialize](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute.aspx)方法在所有测试之前只执行一次。

使用`TestContext`里面的`TestInitialize`方法：

```
[TestClass]
public class TestClass
{
    [TestInitialize]
    public void TestIntialize()
    {
        string testMethodName = TestContext.TestName;
    }

    [TestMethod]
    public void TestMethod()
    {
    }

    public TestContext TestContext { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-27T21:12:15.833

```
[TestClass]
public class MyTestClass
{
    private static TestContext _testContext;

    [ClassInitialize]
    public static void TestFixtureSetup(TestContext context)
    {
        _testContext = context;
    }

    [TestInitialize]
    public void TestIntialize()
    {
        string testMethodName = MyTestClass._testContext.TestName;
        switch (testMethodName)
        {
            case "TestMethodA":

                //todo..

                break;
            case "TestMethodB":

                //todo..

                break;              
            default:
                break;
        }
    }

    [TestMethod]
    public void TestMethodA()
    {
    }

    [TestMethod]
    public void TestMethodB()
    {
    }   
} 
```

# loops - 批处理循环直到满足条件

> ID：12194292
> 
> 赞同：2
> 
> 时间：2012-08-30T09:57:03.220
> 
> 标签：loops, batch-file

我正在使用windows，我想在bat中做一个循环并在满足条件时打破它，我不想使用**goto**，有人可以给我一般的方法吗？就我而言，我想循环直到文件大小大于 200 KB，所以在我的批处理中我创建了一个文件（随着时间的推移会变大），然后我想用循环检查它的大小，如果它大于 200 KB 我想打破循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:01:44.837

不幸的是，批处理脚本语言没有`while`循环，只有`for`具有预定迭代次数的循环，所以恐怕`if`+`goto`是您唯一的选择。为什么你决心避免`goto`批量声明？

下面的代码类似于一个常见的`do-while`循环：

```
:do_while_loop_start
rem This is the body of the loop (do something here...)

:do_while_loop_end
for /f "usebackq" %%a in ('somefile.txt') do set filesize=%%~za
if %filesize% leq 204800 goto do_while_loop_start 
```

还不够优雅吗？我认为是这样。

# macos - 在 Mac 机器上运行的 jenkins 中找不到命令

> ID：12194294
> 
> 赞同：0
> 
> 时间：2012-08-30T09:57:04.190
> 
> 标签：macos, jenkins

我主要在 Windows 操作系统上工作，对 MAC 系统很陌生。我正在尝试在其中一台 MAC 机器上设置 Jenkins CI 工具，我已经在 mac 上安装了 jenkins，它在 8080 端口上运行。

问题：当我执行作业时，我在 Jenkins 控制台输出上收到以下错误：

```
**/var/folders/zz/zzzivhrRnAmviuee+++++E++++2/-Tmp-/hudson6910375920437308281.sh: line 13:
  **ampts: command not found**
Build step 'Execute shell' marked build as failure** 
```

我尝试过的事情：

1.  我在 .bash_profile 中添加了正确的路径，从那时起我就能够从终端成功运行 ampts 命令，并且在终端上一切正常。但同样不能从在 MAC 上运行的 Jenkins 中的执行 shell 运行。

2.  早些时候，这项工作以匿名方式运行，我在 jenkins 中创建了帐户，并将`.bash_profile`正确的路径放在下面`~jenkins/users/home/my.account`并重新启动了 jenkins，但我仍然面临同样的问题。

3.  我也尝试过放在`.bashrc`下面`~jenkins`和下面，`~jenkins/users/home/my.account`但仍然没有成功。

有人可以指出我所缺少的。或者如果 Jenkins 在 MAC 上运行需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:27:57.017

这取决于您如何启动 Jenkins 客户端。如果您使用命令从命令行启动它，`javaws`那么我认为这将继承终端提示符的环境变量。如果您从浏览器启动 JNLP 代理，那么它将继承系统环境（与 bash 环境不同）。您可以尝试以下几件事：

*   在文件中显式设置 PATH 变量`~/.MacOSX/environment.plist`（请参阅[Apple 文档](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html)）
*   如果您使用 Ant 运行作业，那么您可以将环境变量添加到`~/.antrc`文件中（与 的语法相同`.bash_profile`）
*   在 Jenkins 配置页面中为此节点设置环境变量。

# php - 通过套接字的mysql连接失败

> ID：12194298
> 
> 赞同：3
> 
> 时间：2012-08-30T09:57:36.463
> 
> 标签：php, drupal, amazon-ec2, mysql

情况是，我们有 AWS EC2 中型实例，上面有 Linux。
它也有 Drupal。除此之外，我们也很少有文件可以访问 mysql，它们的设置与 Drupal 相同。
问题是 - 在某一时刻 mysql 拒绝连接。
它发生在低负载或大负载（与此无关）时，以及一旦无法访问，mysqld 进程仍在运行，并且不会下降。
重新启动此过程并不能解决问题。重新启动实例 - 修复问题。

当我连接到本地主机时，它给出了这个：

```
Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) 
```

**虽然 mysql.sock 文件就位并具有正确的权限。
重新启动 mysqld 没有帮助，但重新启动实例 - 解决了问题。**

my.cnf 看起来像这样：

```
[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
symbolic-links=0

wait_timeout=28800

interactive_timeout = 28800

max_allowed_packet=32M

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

mysqld 运行也没有任何错误，在日志中我们有这个：

```
120830  9:48:00 [Note] /usr/libexec/mysqld: Shutdown complete

120830 09:48:00 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
120830 09:48:01 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120830  9:48:01 [Note] Plugin 'FEDERATED' is disabled.
120830  9:48:01 InnoDB: The InnoDB memory heap is disabled
120830  9:48:01 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120830  9:48:01 InnoDB: Compressed tables use zlib 1.2.3
120830  9:48:01 InnoDB: Using Linux native AIO
120830  9:48:01 InnoDB: Initializing buffer pool, size = 128.0M
120830  9:48:01 InnoDB: Completed initialization of buffer pool
120830  9:48:02 InnoDB: highest supported file format is Barracuda.
120830  9:48:02  InnoDB: Waiting for the background threads to start
120830  9:48:03 InnoDB: 1.1.8 started; log sequence number 4191070086
120830  9:48:03 [Note] Event Scheduler: Loaded 0 events
120830  9:48:03 [Note] /usr/libexec/mysqld: ready for connections.
Version: '5.5.20'  socket: '/var/lib/mysql/mysql.sock -u root'  port: 3306  MySQL Community Server (GPL) 
```

当问题再次出现时，我再次记录日志，尝试停止 httpd 然后 mysqld，然后运行 ​​mysqld 然后运行 ​​httpd，日志与正常情况下的日志完全相同，重启顺序相同。

更改 php.ini 并没有挽救这种情况：

```
mysql.allow_persistent = Off 
```

按此顺序重新启动没有帮助（甚至尝试了不同的顺序）：

```
service httpd stop
service mysqld stop
service mysqld start
service httpd start 
```

我们想找出问题所在以及如何防止它像那样掉下来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:46:11.807

只需浏览一下您的配置：您的超时时间非常高。正如其他人所猜测的那样，我认为您正在尝试使用*持久连接*。但这些通常不能与标准`ext/mysql(i)`或 ext/PDO 一起使用。

如果您不想[玩弄新的 mysqlnd 多路复用插件](http://docs.php.net/mysqlnd_mux)之类的东西（请参阅[介绍](http://blog.ulf-wendel.de/2012/new-plugin-connection-multiplexing-with-php-and-mysql/)，请参阅[常见问题解答](http://blog.ulf-wendel.de/2012/php-mysql-persistent-cached-pooled-connection-for-how-long/)，我建议您`wait_timeout`显着降低并`max_connections`在遇到流量高峰时（在 mysqld 端）观看。

因此`wait_timeout`，当您的应用程序无法正确处理连接句柄时，它们基本上会释放连接句柄。在 Web 应用程序中，连接空闲超过 10 秒是没有意义的。而且您不希望有很多孤儿连接处于待机状态。

其次，这个`max_connections`变量也很重要，因为仅仅将它提高到 5,000 是不够的——因为虽然这意味着 MySQL 将允许这么多连接，但它也会分配资源（RAM）来处理这些潜在的连接——**即使你从来没有需要他们**。

在峰值期间，您应该能够使用您的`root`帐户连接到 MySQL。这是能够调试服务器的安全措施。我的建议是也暂时启用[慢日志。](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)

此外，在峰值期间检查进程列表：`mysqladmin -u root -pPASS PROCESSLIST`. 如果有任何东西被切断，请与 root ( `mysql -u root -pPASS`) 连接并发出`SHOW FULL PROCESSLIST;`。

从进程列表中，调查出现几次的查询以深入`EXPLAIN`了解它。如果他们不使用索引，那是您的问题之一。

另一种选择可能是迁移到[Percona server](http://www.percona.com/doc/percona-server/5.5/)之类的东西。他们有很多补充——冰山一角：xtradb（100% 与 innodb 兼容）和一个慢查询日志，可以为您提供更精细的输出（毫秒）。当然，它也是免费的。关于 MySQL 的所有内容的好读物是他们的博客[——mysql 性能博客](http://www.mysqlperformanceblog.com/)。

LBNL – 我只是猜测，但可能只是缺乏资源。`c1.medium`是一个不错的入门级实例（`t1.micro`或`m1.small`没有真正的用途 IM* *H* *O），但这可能还不够。这完全取决于数据库的大小和实际流量。

随时发表评论，我可以尝试扩展我的答案。

**另外**——我刚刚阅读了对另一个答案的评论。

您可能想要摆脱 EBS 支持的实例。我认为他们是一个非常糟糕的主意。如果您真的需要持久性，您希望创建一个具有临时存储的常规实例，然后将几个（超过 1 个）EBS 卷附加到它，并[在它们之间添加 RAID 10](http://blog.9minutesnooze.com/raid-10-ebs-data/)以增加 IO/s。

另外，我还没有提到这一点，但听起来你也缺乏对服务器的监控。就个人而言，我们使用[Librato silverline](http://silverline.librato.com)，它为我们的所有实例提供近乎实时的生命体征。这也应该有助于缩小存储的潜在问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T02:53:26.837

仅从提到的症状来看，可能会发生以下情况。我希望它有所帮助。

您的 PHP 可能使用未正确关闭的持久数据库连接。一旦达到某个限制，数据库将不再接受新连接（来自 unix 套接字或网络）。

在 php.ini 中有与数据库持久连接相关的设置，例如：

```
mysql.allow_persistent = Off 
```

mysqld 重启不起作用的事实可能与两件事有关：

1.  重新启动可能与显式`service mysqld stop`后跟`service mysqld start`;不同。此外，您可以在它重新启动时检查日志，看看它是否遇到任何异常情况。

2.  重新启动顺序可以稍微改变，也包括你的 PHP 设置，所以你应该先停止 apache，然后停止 mysqld；之后，您以相反的顺序启动它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T02:59:29.547

我在这个主题上不是很有经验的用户，但是当我遇到一些套接字文件问题时，我将我的应用程序配置为使用 TCP/IP。您可以在软件配置中使用 127.0.0.1 而不是 localhost，以强制使用 TCP/IP 而不是套接字文件。

您可能对腾晓峰对[另一个 stackoverflow 问题](https://stackoverflow.com/questions/5239376/mysql-localhost-127-0-0-1-problem)的回答感兴趣：

> 除了迈克尔的话，
> 
> 还有另一个链接： [http](http://dev.mysql.com/doc/refman/5.1/en/connecting.html) ://dev.mysql.com/doc/refman/5.1/en/connecting.html ，它说：
> 
> > 在 Unix 上，MySQL 程序对主机名 localhost 进行了特殊处理，与其他基于网络的程序相比，这种方式可能与您所期望的不同。对于到 localhost 的连接，MySQL 程序尝试使用 Unix 套接字文件连接到本地服务器。即使给出 --port 或 -P 选项来指定端口号，也会发生这种情况。
> 
> 这不是典型的 tcp/ip 连接。

当然，这不会回答您的问题，但可能会解决您的问题。

# operating-system - 是否可以通过任何十六进制编辑器编写笔式驱动器的 MBR？

> ID：12194301
> 
> 赞同：0
> 
> 时间：2012-08-30T09:57:43.530
> 
> 标签：operating-system, usb-drive, hex-editors, mbr

创建引导加载程序后，如果我复制引导加载程序的字节并使用十六进制编辑器将其粘贴到笔式驱动器的第一个 512 字节上，它会工作吗？（实际上我想学习从头开始创建操作系统。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:05:49.407

我不完全确定我理解你的问题，但回答标题：是的。您可以使用具有适当权限的适当设计的十六进制编辑器写入驱动器的任何部分（通常在 Linux 上需要“sudo”访问权限）。

例如，写入闪存驱动器的引导扇区对于自动引导[CHDK 系统](http://chdk.wikia.com/wiki/Prepare_your_SD_card)是必要的。

并非所有十六进制编辑器都旨在访问驱动器，有些只能处理文件。例如，[NCurses Hexeditor](http://www.rogoyski.com/adam/programs/hexedit/)通常只处理文件，但可以通过使用`-d`标志在 Linux/Unix 环境中将磁盘作为文件访问。

Linux`dd`命令还启用对驱动器的低级写入。这在您的情况下可能很有用，因为它可用于执行驱动器内容的逐字节复制，包括 MBR 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:07:49.283

不了解 HEX 编辑器，但看起来在 Windows 上您可以尝试`CreateFile`使用这样的名称`\\.\PHYSICALDRIVE0`或只是`\\PHYSICALDRIVE0`. 并更改它们`WriteFile`（小心！！！否则您可能会损坏您的操作系统安装或其他数据）。

[您可能可以使用WinObj](http://technet.microsoft.com/en-us/sysinternals/bb896657)找出设备名称。也看看[这个项目](http://www.codeproject.com/Articles/63878/Enumerate-and-Auto-Detect-USB-Drives)和[这个问题](https://stackoverflow.com/questions/2735920/how-to-list-all-attached-usb-devices-in-visual-c)。

# django - django 模板循环中的 get_profile 导致许多 SQL 请求

> ID：12194302
> 
> 赞同：3
> 
> 时间：2012-08-30T09:57:45.513
> 
> 标签：django, performance, django-templates

在 django 模板中，当您执行循环以显示许多用户的配置文件信息时，您调用 get_profile，从而生成尽可能多的 SQL 请求：

```
{% for user in users %}
{{ user.username }} : {{ user.get_profile.birth_date }}
{% endfor %} 
```

如果要显示 50 个用户，它将生成 50 个 SQL 请求来获取每个用户的配置文件。

有没有一种优雅的方法来减少请求的数量？

编辑 ：

最终目标是管理一个项目列表，其中项目具有用户对象作为属性。示例：stackoverflow 中的每个问题都有一个用户作为创建者。如何在最少的 SQL 请求中显示用户配置文件信息时列出所有最近的问题：

模板应该是这样的：

```
{% for question in recent_questions %}
{{ question.title }}
{{ question.body }}
{{ question.creator.username }}
{{ question.creator.get_profile.age }}
{{ question.creator.get_profile.country }}
{% endfor %} 
```

但这会产生太多的 SQL 请求...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:09:06.270

我会为这种情况编写自己的模板标签，

```
@register.simpletag(takes_context=True)
def load_profiles(context,users):
    context['profiles']=ProfileClass.objects.select_related().filter(user__in=users)
    return '' 
```

模板：

```
{% load_profiles users %}
{% for one in profiles%}
    {{one.user.username}} : {{one.birth_date }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:09:50.747

我认为您可以使用[select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)查询。但我不确定是否`.get_profile()`会使用缓存实例命中数据库。在这种情况下，我建议您在视图中查询配置文件列表，`select_related`以便`profile.user`缓存和可用，并将配置文件列表传递给模板而不是用户列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:14:47.777

它不是特别优雅，但您可以在视图中使用 raw() 在一个请求中获取数据：

```
users = User.objects.raw("SELECT **the data you want**, birth_date FROM auth_user,
    app_userprofile as p WHERE p.user_id=auth_user.id" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:17:17.093

```
{% for profile in profiles  %}
{{ profile.user.username }} : {{ profile.birth_date }}
{% endfor %} 
```

# c++ - QTcpSocket stateChanged 是否适合心跳检查？

> ID：12194306
> 
> 赞同：0
> 
> 时间：2012-08-30T09:57:56.933
> 
> 标签：c++, qt, networking

如果客户端被关闭，QTcpSocket 是否会立即接收 stateChanged 信号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:50:46.703

您可以在服务器端使用客户端信号 (disconnected()) 来接收状态更改信号。

例如：

在服务器端

```
connect(client, SIGNAL(disconnected()), this, SLOT(funcA())); 
//to recieve a signal immediately when client is shutdown

connect(client, SIGNAL(connected()), this, SLOT(funcB()));
// to recieve a signal immediately when client is connected 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:17:13.330

如果套接字的远程端已关闭，则它变得可读，并且从它读取时您将收到零字节。从套接字读取是检测远程端是否已正常关闭的正确方法。

所以要回答你的问题，我猜当远程端关闭时*不会*`stateChange`立即调用信号，因为在你尝试从套接字读取之前无法知道这一点。

# c# - 存储过程调用给出错误 PLS-00306 ORA-06550

> ID：12194311
> 
> 赞同：2
> 
> 时间：2012-08-30T09:58:06.607
> 
> 标签：c#, oracle, stored-procedures

我在 Oracle 中有一个存储过程，它有一些参数，我从 C#（http 处理程序）调用它，有时会出现异常。

> PLS-00306：调用“PROC_ADD_...”时参数的数量或类型错误
> ORA-06550：第 1 行，第 7 列：
> PL/SQL：语句被忽略

我知道错误数字或类型的含义。这意味着我没有在过程调用的所有参数中提供值。

我的问题是我`string.trim()`在每个参数值中都使用了该函数，如下所示

所以它应该给出错误，`object reference`或者我在某个地方错了。

```
var prm = new OracleParameter[8];
prm[0] = Command.Parameters.Add(new OracleParameter("IP_ACTION", OracleType.VarChar, 20));
prm[0].Value = pobjCustomerProps.Action.Trim();
prm[1] = Command.Parameters.Add(new OracleParameter("IOP_CUSTOMER_UID", OracleType.VarChar, 30));
prm[1].Direction = ParameterDirection.InputOutput;
prm[1].Value = pobjCustomerProps.CustomerID.Trim();

prm[2] = Command.Parameters.Add(new OracleParameter("IP_MOBILE_NO", OracleType.VarChar, 50));
prm[2].Value = objEncryption.Encrypt(pobjCustomerProps.MobileNo.Trim());
prm[3] = Command.Parameters.Add(new OracleParameter("IP_CUSTOMER_NAME", OracleType.VarChar, 200));
prm[3].Value = pobjCustomerProps.CustomerName==""? "": objEncryption.Encrypt(pobjCustomerProps.CustomerName.Trim());

 prm[4] = Command.Parameters.Add(new OracleParameter("IP_EMAILID", OracleType.VarChar, 500));
 prm[4].Value = pobjCustomerProps.EmailID == "" ? "" : objEncryption.Encrypt(pobjCustomerProps.EmailID.Trim());

 prm[5] = Command.Parameters.Add(new OracleParameter("IP_MODEL_CODE", OracleType.VarChar, 10));
 prm[5].Value = pobjCustomerProps.ModelCode.Trim();

 prm[6] = Command.Parameters.Add(new OracleParameter("IP_USER_UID", OracleType.VarChar, 10));
 prm[6].Value = pobjCustomerProps.UserUID.Trim();

var lobjparamErrorCode = new OracleParameter("OP_ERROR_CODE", OracleType.Number) { Direction = ParameterDirection.Output };
prm[7] = Command.Parameters.Add(lobjparamErrorCode); 
```

这是我的 sp 定义

```
 PROCEDURE PROC_ADD_DETAILS_V1
(
    IP_ACTION IN VARCHAR2,
    IOP_CUSTOMER_UID IN OUT DIGICALL.CUSTOMER_DTL.CUSTOMER_UID%TYPE,
    IP_MOBILE_NO IN DIGICALL.CUSTOMER_DTL.MOBILE_NO%TYPE,
    IP_CUSTOMER_NAME IN DIGICALL.CUSTOMER_DTL.CUSTOMER_NAME%TYPE,
    IP_EMAILID IN DIGICALL.CUSTOMER_DTL.EMAIL_ID%TYPE,
    IP_MODEL_CODE IN  DIGICALL.CUSTOMER_DTL.MODEL_CODE%TYPE,
    IP_USER_UID IN DIGICALL.CUSTOMER_DTL.USER_UID%TYPE,
    OP_ERROR_CODE OUT NUMBER        
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:17:49.987

有几件事可能会出错：

*   您可能有错误数量的参数。在你的情况下似乎没问题。
*   您可能有错误类型的参数（关于输入/输出，关于数据类型）。在您的情况下，输入/输出似乎没问题。无法从您的描述中派生数据类型，因为存储过程定义引用了其他对象。
*   您可以以错误的顺序提供参数（因此具有错误的类型）。请注意，默认情况下，即使您为每个参数指定了名称，参数也受位置约束。这部分取决于您是使用 ODP.NET 还是 System.Data.OracleClient 类。在你的情况下，这似乎不是问题。
*   可能是您的 CommandText 与参数不匹配。您的问题中缺少它，因此我们无法确定。

`String.trim()`当然不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-11T04:31:48.583

我收到了这个错误，这是一个完全的红鲱鱼。

[![在此处输入图像描述](../Images/61e0cf0b4abd72e68ddcd6b61606577a.png)](https://i.stack.imgur.com/xGlDS.png)

Oracle 客户端 11.2 和 9.2 均已安装。带有 x86 应用程序的 x64 位服务器。

该问题已通过卸载 11.2 并将连接字符串更改为使用**msdaora.1**而不是**OraOLEDB.Oracle.1**得到解决。

Alex Keh - 产品经理 - Oracle 解释了为什么这样做：[https ://community.oracle.com/thread/2491412](https://community.oracle.com/thread/2491412)

[希望这可以为其他人节省几绺头发和几天的挫败感。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-16T23:34:05.483

我有一个类似的问题，但我需要更改我的连接字符串以包含

> providerName="Oracle.ManagedDataAccess.Client"

代替

> providerName="Oracle.DataAccess.Client"

# iphone - 使用自定义 URL/协议启动 MonoTouch iPhone 应用程序？

> ID：12194317
> 
> 赞同：7
> 
> 时间：2012-08-30T09:58:20.613
> 
> 标签：iphone, xamarin.ios

是否可以使用 MonoTouch 注册自定义 Url 方案或协议，例如 myapp:123？我希望我的 MonoTouch 应用程序在用户单击网页、邮件或日历描述中的此链接时启动，并获取 URL“参数”，在本例中为“123”。

简而言之，我想要与 iPhone 中的 Spotify 应用程序相同的功能，它的 spotify:track:123123 可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T13:30:21.120

是的，这就是您需要做的。

在 dict 标签中的某处添加 Info.Plist 以下内容：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>com.companyname.com.receiver</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>myapp</string>
        </array>
    </dict>
</array> 
```

然后在 AppDelegate.cs 中覆盖该`HandleOpenURL`方法：

```
public override bool HandleOpenURL (UIApplication application, NSUrl url)
{
    if (url == null) {
        return false;
    }

    var uri = new Uri(url.ToString()); // I prefer working with the Uri class.

    // Your logic here

    return true;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T12:18:59.907

是的，我已经在我的几个 MonoTouch 应用程序中做到了。当您使用 Facebook SDK 登录您的应用程序时，它实际上是必需的。

一般来说，遵循与常规 Objective-C 应用程序相同的说明：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html) （查看“通信与其他应用程序”）

在你`AppDelegate`有一种`HandleOpenURL`方法可以覆盖。除此之外，您的 Info.plist 中只有一些设置需要更改。

# c++ - COM 获取 INetFWMgr 错误

> ID：12194318
> 
> 赞同：1
> 
> 时间：2012-08-30T09:58:21.567
> 
> 标签：c++, com, windows-firewall

所以问题是当我尝试获取该接口的指针时，它告诉我`error LNK2001: unresolved external symbol _CLSID_NetFwMgr`。

我查看了标题，并以`NetFwMgr`这种方式声明了 CLSID_：

```
EXTERN_C const CLSID CLSID_NetFwMgr;

#ifdef __cplusplus

class DECLSPEC_UUID("304CE942-6E39-40D8-943A-B913C40C9CD4")
NetFwMgr;
#endif 
```

所以我想我应该在我的 C++ 库中添加一个 *.lib 文件，其中包含如下字段

```
DEFINE_GUID( CLSID_ActiveDesktop, 0x75048700L, 0xEF1F, 0x11D0, 0x98, 0x88, 0x00, 0x60, 0x97, 0xDE, 0xAC, 0xF9); 
```

Ps：我`VC++ 6`用作编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:14:44.893

不完全是。它应该这样定义：

```
extern "C" const CLSID CLSID_NetFwMgr = {0x304CE942,0x6E39,0x40D8,{0x94,0x3A,0xB9,0x13,0xC4,0x0C,0x9C,0xD4}}; 
```

如果你想在 header 中而不是在 cpp 单元中定义它，你也可以`__declspec(selectany)`在之后添加。`const``CLSID`

# macos - 在 Xcode(MAC) 上的 .cpp 文件中运行 unix 命令，而不是 system() 方法

> ID：12194324
> 
> 赞同：0
> 
> 时间：2012-08-30T09:58:32.923
> 
> 标签：macos

需要在 Xcode(MAC) 的 .cpp 文件中运行此“system/Library/CoreServices/Menu Extras/User.menu/Contents/Resources/CGSession -suspend”可执行命令。提出一个 system() 以外的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:01:00.757

在 Mac 上，如果您想低于系统级别，您可以使用[exec(3)](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/exec.3.html)中的任何调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-07T15:09:31.113

如果您正在制作 Cocoa 应用程序，请尝试使用[NSTask 。](https://developer.apple.com/documentation/foundation/nstask)如果您使用的是 Swift，则改为使用 Process。

# c# - 获取 Enum 类型中的元素数量并迭代它们

> ID：12194326
> 
> 赞同：1
> 
> 时间：2012-08-30T09:58:43.997
> 
> 标签：c#, reflection, enums

有没有办法迭代枚举类型中的元素？就像是：

```
public enum MyEnum
{
   One,
   Two,
   Three,
}

foreach(var temp in MyEnum)
{
    //Do something
} 
```

我可以通过反思或其他方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:00:03.360

使用[System.Array Enum.GetValues(Type)](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)方法。

```
 foreach(var temp in Enum.GetValues(typeof(MyEnum)))
  {
      //code
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:00:01.630

使用`Enum.GetValues(typeof(MyEnum))`：

```
foreach(MyEnum temp in Enum.GetValues(typeof(MyEnum))) 
{ 
    //Do something 
} 
```

请注意：我使用`MyEnum temp`而不是`var temp`，因为`GetValues`不返回强类型数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:00:31.160

```
foreach (var name in Enum.GetNames(typeof(MyEnum)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:01:02.067

```
var test = Enum.GetValues(typeof(MyEnum));
foreach (MyEnum e in test)
{
    Console.Write(e);
} 
```

请参阅[Enum.GetValues](http://msdn.microsoft.com/en-us/library/system.enum.getvalues%28v=vs.100%29.aspx)

# php - 通过 PHP SOAP SDK 使用“买家在 PayPal 上付款”

> ID：12194331
> 
> 赞同：0
> 
> 时间：2012-08-30T09:59:04.280
> 
> 标签：php, paypal

我已将 PayPal 快速结账集成到在线商店中。在客户在 PayPal 网站上填写表格并且 PayPal 将她/他重定向回商店后，我立即拨打 DoExpressCheckout 电话。但是在 PayPal 表单中，最后一步中按钮的名称是“Proceed”（或类似名称）。还有一个说明，买家可以在下一步完成他/她的订单。

我在这里找到了一个注释，可以更改按钮的标签：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECCustomizing](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECCustomizing)

（页面末尾的“买方在 PayPal 上付款”一章）。我正在使用 PHP SOAP SDK (merchant-php-1.1.93_0.zip)。如何使用该 SDK 实现此功能？`useraction`中没有参数`\SetExpressCheckoutRequestDetailsType`。也设置`PaymentAction`为`Sale`不会改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:05:42.963

useraction 不是 API 调用的参数。它是您将客户发送到 PayPal 时传递的 GET 参数。

[我再次下载了 PHP SDK，以确保在回答您的问题时获得最新信息。](https://www.x.com/sites/default/files/merchant-php-1.1.93_0.zip)

从 'samples\ExpressCheckout\SetExpressCheckout.php' 的第 82 行开始：

```
if($setECResponse->Ack =='Success')
{
        $token = $setECResponse->Token;
    // Redirect to paypal.com here
    $payPalURL = 'https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&token=' . $token; 
```

将“$payPalURL”更改为

```
$payPalURL = 'https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&useraction=commit&token=' . $token; 
```

此外，“paymentaction”参数决定您的交易是销售还是授权。这应该始终是销售，除非您有无法立即发送的订单（这只适用于实物商品，数字商品应该始终是“销售”）

# ebay-api - eBay API 更改退回价格的货币

> ID：12194332
> 
> 赞同：1
> 
> 时间：2012-08-30T09:59:13.593
> 
> 标签：ebay-api

有没有办法使用 eBay API 以另一种货币购买商品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T20:37:29.617

很简单。您所要做的就是更改站点 ID 参数。由于您没有指定语言，我将假设您正在执行此 HTTP-GET 并仅解析 XML。无论您如何以编程方式进行操作，相同的原则都将适用。

对于 URL：

“ [http://open.api.ebay.com/shopping](http://open.api.ebay.com/shopping) ”

*   ?callname=GetSingleItem
*   &responseencoding=XML
*   &appid=[APPID]
*   &siteid=2 <------------例如，这是加拿大的siteid。0 是美国。这将更改 <ConvertedCurrentPrice> 下返回的货币
*   &版本=839
*   &ItemID=181195344321

把它们放在一起，你就会得到这个复制/粘贴友好的“http://open.api.ebay.com/shopping?callname=GetSingleItem&responseencoding=XML&appid=[APPID]&siteid=2&version=839&ItemID=181195344321”

确保使用您的应用 ID 作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-08T06:51:05.293

您可以使用此调用更改货币：
可以在 Ebay 中更改货币类型，同时在 Ebay 的交易 API 中使用 Add Item 调用列出项目。
[http://developer.ebay.com/devzone/xml/docs/Reference/eBay/extra/additms.rqst.additmrqstcntnr.itm.crrncy.html](http://developer.ebay.com/devzone/xml/docs/Reference/eBay/extra/additms.rqst.additmrqstcntnr.itm.crrncy.html)

感谢
CedCommerce

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-05T18:30:09.027

你可以，而且它实际上非常简单。您可以使用购物 API GetSingleItem。根据您感兴趣的货币，您所要做的就是更改您拨打电话的 SiteID。例如，如果您想获取欧元的价格，您可以将 SiteID 设置为 3（英国）或 77（德国）。您还必须将 IncludeSelector 设置为“详细信息”。这样，您将获得包含以下字段的响应。

```
<ConvertedCurrentPrice currencyID="GBP">68.55</ConvertedCurrentPrice>
<CurrentPrice currencyID="USD">92.9</CurrentPrice> 
```

其中 CurrentPrice 是列表的原始价格，在 ebay 网站上发布列表，ConvertedCurrentPrice 是与您提供的 SiteID 对应的站点上列表的价格。[您可以在此处查看](http://developer.ebay.com/devzone/xml/docs/reference/ebay/types/sitecodetype.html)包含所使用货币的 SiteID 的完整列表

# c# - 从头开始一个实体框架代码第一个项目的建议

> ID：12194333
> 
> 赞同：1
> 
> 时间：2012-08-30T09:59:14.920
> 
> 标签：c#, .net, entity-framework

我正在尝试从头开始创建一个项目。我将使用 asp .net mvc4（带有 asp net web api）和实体框架 5 进行数据访问（所有最新技术）

由于这是一个新的开始，我正在考虑将我的设计集中在我的模型上，而不是先创建数据库然后创建 EF 模型，所以我认为我会采用代码优先的方法。

代码优先的问题（据我所知）是您失去了 EF 在模型优先场景中为您所做的所有脚手架（设计支持、轻松生成和维护实体关系 1-1、1-*、*-*等) 问题是：在设计模型时，我可以使用哪些工具或模板或片段或任何东西来让我的生活更轻松？我希望这个过程尽可能轻松，因为它涉及大量重复（例如，FK 关系始终相同）我应该使用 DbContext 还是其他东西？是否有某种方法可以先启动代码但同时维护 edmx 模型，或者它们是互斥的？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:14:29.543

EF Code First 的伟大之处在于您不需要任何脚手架。您不需要 EDMX 模型，甚至不需要指定关系的确切性质，这一切都基于约定。例如，您的类必须有一个名为 Id 的属性，它将被视为表的主键。所有基于字符串的字段都生成为`nvarchar(MAX)`. 当然，某些约定可能不是您想要的，Code First 通过可插入约定支持这一点（您可以删除大多数约定并创建自己的约定）

您应该学习一些基本教程来了解 Code First 流程的工作原理，因为它与 Db First 方法完全不同。

# java - IntelliJ 抱怨 OSGi 引用属性

> ID：12194334
> 
> 赞同：4
> 
> 时间：2012-08-30T09:59:16.480
> 
> 标签：java, spring, intellij-idea, osgi

我的配置文件中有一个`OSGi`参考`spring-context.xml`。当我指定：

```
<osgi:reference id="cxfInboundLoggingInterceptor" interface="com.groupgti.esb.cxf.interceptors.MessageLoggerInbound" /> 
```

`IntelliJ`说：`Attribute id is not allowed here`。我的`osgi`前缀指向这个模式：`xmlns:osgi="http://www.springframework.org/schema/osgi"`

和架构位置：

```
http://www.springframework.org/schema/osgi                  http://www.springframework.org/schema/osgi/spring-osgi.xsd 
```

从`Spring` `OSGi` [文档](http://www.springsource.org/osgi/specification)：

> *该`<osgi:reference>`元素用于定义充当 OSGi 服务（或服务集）代理的本地 bean。唯一需要的属性是 id（定义本地 bean 的名称）和 interface（定义注册目标服务的接口的完全限定名称）。*

所以我看到 id 是必需的，但为什么`IntelliJ`要抱怨呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:45:43.443

我已经在[J​​etBrains Tracker中创建了此错误的票证](http://youtrack.jetbrains.com/issue/IDEA-105450)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:44:03.593

也许您需要限定 id 属性：xml:id?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:33:11.787

我注意到 osgi xsd 确实

```
<xsd:import namespace="http://www.springframework.org/schema/beans"/>
<xsd:import namespace="http://www.springframework.org/schema/tool"/> 
```

对我来说，他们找不到。但即使你设置它们，它似乎也不起作用。

[您可能需要在http://youtrack.jetbrains.com/issues/IDEA](http://youtrack.jetbrains.com/issues/IDEA)为 IntelliJ 提交错误报告。

# android - 我在片段中有一个线性布局。如何从活动中动态添加视图？

> ID：12194337
> 
> 赞同：3
> 
> 时间：2012-08-30T09:59:34.357
> 
> 标签：android

我正在从一个片段发布数据并通过向其添加视图来更新另一个片段。我没有使用列表视图。我正在使用线性布局。

我有一个非常简单的疑问。如何获取视图并通过向其添加另一个视图来更新它？

基本上我想膨胀已经有数据的线性布局，并在添加片段的主要活动中添加一个视图。

编辑：

```
LinearLayout ll = (LinearLayout)fragment.getView().findViewById(R.id.commentFragmentLayout);
            ViewGroup view = (ViewGroup) ll.getParent();
            View customView = view;

            TextView   commentContext  = (TextView) customView.findViewById(R.id.commentText);

            commentContext.setText("hello");

            view.addView(customView); 
```

我试图在主要活动中这样做，但我的观点给出了空指针异常。

编辑2：

```
 FragmentManager fm       = getSupportFragmentManager();
                // You can find Fragments just like you would with a View by using FragmentManager.
                android.support.v4.app.Fragment fragment = fm.findFragmentById(R.id.fragmentCommentContent); 
                LayoutInflater inflater = (LayoutInflater)   getApplicationContext().getSystemService(getApplicationContext().LAYOUT_INFLATER_SERVICE);
                View child = inflater.inflate(R.layout.comments_list_item, null);

            LinearLayout ll = (LinearLayout)fragment.getView().findViewById(R.id.commentFragmentLayout);
            TextView    newText  = (TextView) child.findViewById(R.id.commentText);
            newText.setText("Important text");
            ll.addView(newText); 
```

我试过了，得到：指定的孩子已经有了父母。首先在孩子的父母上调用 removeView()。问题是，如果我调用删除视图，我会丢失之前在布局中插入的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:01:30.543

您发布的代码没有任何意义。您从片段中获取`LinearLayout`具有 id的父级`R.id.commentFragment`，在该父级中搜索 a`TextView`以设置一些文本，然后将父级添加到自身。

> 我有一个非常简单的疑问。如何获取视图并通过向其添加另一个视图来更新它？

你得到`View`一个片段的`getView()`。您在返回的视图上搜索所需的组件`getView()`，然后将所需的视图添加到该容器：

```
LinearLayout ll = (LinearLayout)fragment.getView().findViewById(R.id.commentFragmentLayout);
TextView newText = new TextView(context);
newText.setText("Important text");
ll.addView(newText); 
```

> 基本上我想膨胀已经有数据的线性布局，并在添加片段的主要活动中添加一个视图。

您膨胀布局文件而不是已经存在的视图。我真的不明白你想要在这里尝试更好地解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:33:20.497

```
 LayoutParams params =new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T15:58:31.923

```
 lay=(LinearLayout)rootView.findViewById(R.id.Lay);
 lay.addView(yourView); 
```

# c# - LINQ。想要动态添加 where 子句。我害怕 IO 到 DB

> ID：12194339
> 
> 赞同：-4
> 
> 时间：2012-08-30T09:59:36.227
> 
> 标签：c#, linq, asp.net-web-api

我使用 ASP.NET Web API 和存储库模式。
我想动态添加 where 子句。像，

```
//controller
  static readonly ICustomerRepository repository = new CustomerRepository();
  //
 var result = repository.GetAll();

 if (form['name'] != null) result.Where( p => p.custName.Contains( form['name'].toString() ) );
 if (form['attribute1'] != null) result.Where( p => p.attribute1.Equals( form['attribute1'].toString() ) );
 return result;
// 
```

不怕IO吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:01:07.353

> 不怕IO吗？

您的意思不是很清楚，但是只有在您尝试执行查询时才会将查询发送到数据库 - 这可能在某些调用您的方法的代码中。它不会执行一次 for `GetAll`，然后执行第一个`Where`子句一次，然后执行一次第二个`Where`子句。当您开始从`IQueryable<>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:02:17.130

如果你想要多个 where 子句，看看我问的这个问题：[Combine LinQ queries](https://stackoverflow.com/questions/9804683/combine-linq-queries)

我有一个类似的问题。我想进行查询屏幕，然后相应地应用结果，我得到的答案非常适合我的需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:02:40.203

如果您访问`data-base`，几乎总是`IO`可以访问，如果没有一些内存缓存设置。所以就看你怎么管理了`data-base`。但总的来说，`data-base`它被调整为具有高性能`IO`访问，所以在你不打算编写大规模应用程序之前，我个人不会担心`IO`像这样的简单查询的操作开销。

如果您想*优化*查询，通过（比如说）一个查询，您可以找到这两个数据之间的关系并在它们上进行[InnerJoin](http://msdn.microsoft.com/en-us/library/bb397941.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:06:44.960

查询将在您实际获取数据时执行，因此您可以将条件堆栈到它，而不会导致它从数据库中获取所有记录。

但是，您必须将结果分配给某些东西，否则您将只是创建表达式并将它们丢弃：

```
var result = repository.GetAll();

if (form['name'] != null) {
  result = result.Where( p => p.custName.Contains( form['name'].toString() ) );
}
if (form['attribute1'] != null) {
  result = result.Where( p => p.attribute1.Equals( form['attribute1'].toString() ) );
}
return result; // or return result.ToList(); 
```

考虑是否要通过添加在方法末尾运行实际查询`ToList`，或者是否要返回要由调用该方法的代码执行的表达式。

# data-binding - Visual C# datagridview 绑定到对象不起作用

> ID：12194340
> 
> 赞同：0
> 
> 时间：2012-08-30T09:59:44.797
> 
> 标签：data-binding, visual-c#-express-2010

我已经通过几种方法完成了几个不同的教程，但我得到的只是一个空的 datagridview。代码的适用部分是：

```
public partial class ViewRoster2 : Form
{
    public League vleague;
    public List<Player> vlist;
    public int selteam;

    public ViewRoster2(League myLeague)
    {
        InitializeComponent();
        selteam = 0;
        vleague = myLeague;
        vlist = vleague.playerlist;
        dGrid1.DataSource = vlist;
    } 
```

根据我从教程中了解到的情况，Datagrid - dGrid1 - 应该使用基于对象“Player”属性的列来填充自己，并用 List<> - vlist 中的每个“Player”条目填充行。

但如前所述，我得到的只是一个带有空数据网格视图的表单。

任何帮助或推动正确的方向表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T19:33:47.913

我只是按照相同类型的教程将对象列表绑定到 DataGridView 并遇到与您完全相同的问题。

由于您没有说明“播放器”对象的定义，我不确定原因是否完全相同，但在我的情况下，问题是我的对象定义没有吸气剂，因此 DataSource 无法检索对象属性以构造视图

例如，如果您像这样定义对象，您将获得一个空视图：

```
public class Player
{
    public string name;
    public int age;

    public Player(string name, int age)
    {
        this.name = name;
        this.age = age;
    }
} 
```

通过添加例如 { get; 放; } 然后视图被填充：

```
public class Player
{
    public string name **{ get; set; }**
    public int age **{ get; set; }**

    public Player(string name, int age)
    {
        this.name = name;
        this.age = age;
    }
} 
```

我希望它能帮助像我这样的其他初学者;-)

# java - 在java中转换UTC时间时出现无法解析的日期异常

> ID：12194347
> 
> 赞同：1
> 
> 时间：2012-08-30T10:00:02.563
> 
> 标签：java, simpledateformat

如果这是我正在做的一个非常愚蠢的错误，我很抱歉，但我似乎看不到它。我在尝试使用 SimpleDateFormat 解析 2012-08-28T21:52:57.020Z 时遇到不可解析的日期异常，格式字符串为“yyyy-MM-dd'T'HH:mm:ss.SSSZ”。有人可以指出我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:04:33.277

我不认为 SimpleDataFormat 将解析字符串中的“Z”解析为时区。:( 它仅以`Z`格式作为查找时区的位置。

尝试格式`"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"`或尝试更好地处理时区的 JodaTime。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:03:52.093

最后的“Z”对应于时区。您应该将输入中的“Z”替换为时区 ID，例如 IST/EST 等，

```
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
String date = "2012-08-28T21:52:57.020IST";
System.out.println(df.parse(date));

output: Tue Aug 28 21:52:57 IST 2012 
```

# java - 从 SFTP 位置下载 zip 或 exe 文件

> ID：12194351
> 
> 赞同：1
> 
> 时间：2012-08-30T10:00:08.303
> 
> 标签：java, sftp, j2ssh

下面是我的应用程序中的两个片段，我使用 J2SSH jar 进行 SFTP 访问。

第一：

```
 .........
 .........
 //Open the SFTP channel
 com.sshtools.j2ssh.SftpClient client = sshClient.openSftpClient();
 // writing from source path to outputstream
 client.get("/Repository/Test/index.zip", outputStream);            
 ........
 ........ 
```

第二个（JSP 文件）：

```
response.setContentType("application/octet-stream");
response.setHeader("Content-disposition","attachment; filename=index.zip");
BufferedOutputStream bos = new BufferedOutputStream(response.getOutputStream());
client.fillOutputStream(bos);    //  this method calls to first block code.
bos.flush();
bos.close();
response.flushBuffer(); 
```

应用程序中的一切工作正常，没有任何例外。下载文本文件时没有问题。但是，当我尝试下载 zip 或 exe 文件时，其中缺少某些内容。即使下载成功，文件也无法提取或无法执行。

请建议我这可能是其中的问题......尤其是它应该适用于 exe 文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:40:28.583

对于这种工作，我使用[http://commons.apache.org/vfs/](http://commons.apache.org/vfs/)

```
StandardFileSystemManager manager = new StandardFileSystemManager();
FileObject target = manager.resolveFile("file://" + path + File.separator + filenameTarget);
FileObject source = manager.resolveFile(sftpUri + path + File.separator + filenameSource, options);
target.copyFrom(fichierSource, Selectors.SELECT_SELF); 
```

# visual-studio-2012 - 在 LightSwitch 中创建登录页面（VS2012）

> ID：12194362
> 
> 赞同：0
> 
> 时间：2012-08-30T10:00:57.260
> 
> 标签：visual-studio-2012, visual-studio-lightswitch

我正在尝试使用[本教程](http://blogs.msdn.com/b/mthalman/archive/2011/12/08/creating-a-custom-login-page-for-a-lightswitch-application.aspx)创建登录页面，但该教程不适用于 Visual Studio 2012。在 Visual 2012 中找不到某些步骤。如果有人可以建议或分享一些链接，我该如何在 LightSwitch 中创建登录页面使用 Visual Studio 2012。非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:12:32.140

```
 If txtUsername.Text = "cu135328" And
            txtPassword.Text = "121292" Then

        MsgBox("You have access") 
```

# passenger - 如何在 VHost 或 Passeneger (Ruby) 中添加响应标头

> ID：12194371
> 
> 赞同：3
> 
> 时间：2012-08-30T10:01:20.600
> 
> 标签：passenger, redmine, virtualhost, cors

我对同源策略有疑问。我想提出跨域请求 - 我找到了很好的解决方案：[http ://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

但我不想在 Apache 中设置标头，因为我有很多域并且只有一个需要它。是否可以通过虚拟主机或乘客添加**Access-Control-Allow-Origin标头？**

我这样做是因为我需要在 Chrome/Mozilla 插件中使用 Redmine REST API (XHR)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:49:25.377

我有类似的要求。如果您希望 Redmine 提供这些标头，那么您需要修改 Redmine 源。我写[了一篇关于这样做的博客文章](http://richard-towers.com/2013/01/13/cors-with-redmine.html)。

大部分细节都归功于[这篇博文。](http://www.tsheffler.com/blog/?p=428)

为了方便起见，我将在这里重现我必须做的事情：

* * *

首先让我们解决预检检查。为此，我添加了一个全新的控制器，位于`/app/controllers/cors_controller.rb`. 看起来像：

```
class CorsController < ApplicationController

    skip_before_filter :session_expiration, :user_setup, :check_if_login_required, :set_localization

    def preflight
            headers['Access-Control-Allow-Origin'] = '*'
            headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS, PUT'
            headers['Access-Control-Allow-Headers'] = 'X-Requested-With, X-Prototype-Version, Content-Type'
            headers['Access-Control-Max-Age'] = '1728000'
            render :text => '', :content_type => 'text/plain'
    end

end 
```

很简单的东西。然后，我将所有`OPTIONS`请求路由到该控制器`/config/routes.rb`：

```
match '*path', :to => 'cors#preflight', :constraints => {:method => 'OPTIONS'} 
```

进行了预检检查，这只是按照Tom 的建议使用`after_filter`in将标头添加到主响应的一种情况：`/app/controllers/application_controller.rb`

```
class ApplicationController < ActionController::Base
  include Redmine::I18n
  # ...
  before_filter :session_expiration, :user_setup, :check_if_login_required, :set_localization

  #************ Begin Added Code ****************
  after_filter :cors_set_access_control_headers

  # For all responses in this application, return the CORS access control headers.

  def cors_set_access_control_headers
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS, PUT'
    headers['Access-Control-Max-Age'] = "1728000"
  end
  #************* End Added Code *****************
  #...
end 
```

# sql - 无法分配 id，“列 'id' 不能为空”

> ID：12194372
> 
> 赞同：2
> 
> 时间：2012-08-30T10:01:36.057
> 
> 标签：sql, ruby

我使用 Rails 继承了一个没有`id`增量设置的数据库，并且还有两个主键：

```
CREATE TABLE `t_user_history` (
`id` int(11) NOT NULL,
`history_no` int(11) NOT NULL,
`user_login_id` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
`user_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
`user_pass` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
`created_at` datetime DEFAULT NULL,
`updated_at` datetime DEFAULT NULL,
`deleted_at` datetime DEFAULT NULL,
`app_version` varchar(31) COLLATE utf8_unicode_ci DEFAULT NULL,
PRIMARY KEY (`history_no`,`id`)) 
```

但是，当我尝试使用 ruby​​ 插入此表时：

```
tuser = TUserHistory.find_by_id(user.id)
TUserHistory.transaction do
ntuser = TUserHistory.new
ntuser.id = tuser.id
ntuser.history_no = 0
ntuser.user_login_id = tuser.user_login_id
ntuser.user_name = tuser.user_name
ntuser.user_pass = tuser.user_pass
ntuser.app_version = params[:app]
ntuser.save 
```

我得到错误：

```
getName {"error_code":"Mysql2::Error: Column 'id' cannot be null: INSERT INTO `t_user_history` 
(`app_version`, `created_at`, `deleted_at`, `history_no`, `id`, `updated_at`, `user_login_id`, `user_name`, `user_pass`)
VALUES ('v1.2.9', '2012-08-30 09:26:57', NULL, 0, NULL, '2012-08-30 09:26:57', 'userlogin', 'username', 'userpass')"} 
```

即使我设置`ntuser.id = 9127`或其他一些值，它仍然说`'id' cannot be null`. 我查看了其他答案，说确实可以修改此值，但似乎我尝试设置的任何值`ntuser.id`都被忽略了。

不允许破坏表并以理智的方式重新开始，因为我们的服务已经在使用该表。`user_id`在我发现它没有自动递增之前，我以为我会为 创建一个新列，但即使在到达该步骤之前什么也没有，甚至没有`ntuser.id = 0`或删除定义的行`ntuser.id`。

这里发生了什么？为什么不识别数据已通过？解决此问题的最佳（不，最快）方法是什么？

编辑：Rails 版本 3.1.0

TUserHistory 类：

```
class TUserHistory < ActiveRecord::Base
set_table_name "t_user_history"
default_scope select("id, user_login_id,user_name,user_pass,app_version")
acts_as_paranoid
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:19:02.237

终于开始做这件事了，只做一个 SQL 语句。我想使用 rails，看看 rails/ruby 如何为 SQL 代码提供包装器，但它只是不起作用。最后，它看起来像：

```
tuser = TUserHistory.order("history_no DESC").find_by_id(user.id) #get last entry
    TUserHistory.transaction do
        id = tuser.id
        history_no = Integer(tuser.history_no)
        intHist_no = history_no + 1 #because this column doesn't auto-increment
        user_login_id = tuser.user_login_id
        user_name = tuser.user_name
        user_pass = tuser.user_pass
        app_version = params[:app]
        sql = "INSERT INTO t_user_history (id, history_no, user_login_id,user_name,user_pass,app_version) VALUES ('#{id}','#{intHist_no}','#{user_login_id}','#{user_name}','#{user_pass}','#{app_version}')"
         ActiveRecord::Base.connection.execute(sql) 
```

唯一改变的另一件事是添加了类描述，`TUserHistory`以便`history_no`它会与`tuser`select 调用一起返回，然后可以修改。

# wordpress - 来自专用服务器的传出连接因 iptables 关闭而被拒绝

> ID：12194375
> 
> 赞同：0
> 
> 时间：2012-08-30T10:01:42.077
> 
> 标签：wordpress, http, iptables, dedicated-server

我的专用网络服务器有一个特殊的问题。它运行 CentOS 并使用 PLESK 通过 Web 进行管理。

在尝试更新 wordpress 中的插件以及 wordpress 本身时，我注意到了标题中的问题。当尝试更新插件或 wordpress 时，它会抛出这个错误：

“下载失败。：无法连接到 72.233.56.139：权限被拒绝”

我做的第一件事是应用一个规则（在 PLESK 防火墙中），允许传入和传出流量到 IP，但无济于事。我通过 SSH 连接到服务器并检查 iptables 进一步调查了这一点，该 iptables 具有以下传出规则：

```
Chain OUTPUT (policy DROP)
target     prot opt source               destination
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
REJECT     tcp  --  0.0.0.0/0            0.0.0.0/0           tcp flags:!0x17/0x02     reject-with tcp-reset
DROP       all  --  0.0.0.0/0            0.0.0.0/0           state INVALID
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0
ACCEPT     udp  --  0.0.0.0/0            72.233.56.138
ACCEPT     tcp  --  0.0.0.0/0            72.233.56.138
ACCEPT     udp  --  0.0.0.0/0            72.233.69.88
ACCEPT     udp  --  0.0.0.0/0            72.233.69.89
ACCEPT     udp  --  0.0.0.0/0            66.135.58.62
ACCEPT     udp  --  0.0.0.0/0            66.135.58.61
ACCEPT     tcp  --  0.0.0.0/0            72.233.69.88
ACCEPT     tcp  --  0.0.0.0/0            72.233.69.89
ACCEPT     tcp  --  0.0.0.0/0            66.135.58.62
ACCEPT     tcp  --  0.0.0.0/0            66.135.58.61
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0 
```

其他 IP 用于 Akismet 反垃圾邮件过滤器，该过滤器也无法正常工作（它无法连接到 akismet 服务器）。

我联系了我的主人，他们进行了调查，但我得到的答复是他们不知道（！）是什么导致了问题，并说我需要自己解决。

我尝试的第一件事是停止 iptables 并打开所有内容，但我仍然获得拒绝传出流量的权限（允许传入并且工作完美，因为人们可以在我的博客上疯狂评论/垃圾邮件）。

有谁知道我可以尝试进一步解决这个问题吗？即使防火墙完全（？）使用“iptables stop”关闭，流量仍然被阻止似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:05:33.723

采取这个停止防火墙脚本；有用。

```
#! /bin/bash

# In order to flush all iptables rules , Run the following commands :

/sbin/iptables -F
/sbin/iptables -X
/sbin/iptables -t nat -F
/sbin/iptables -t nat -X
/sbin/iptables -t mangle -F
/sbin/iptables -t mangle -X
/sbin/iptables -P INPUT ACCEPT
/sbin/iptables -P FORWARD ACCEPT
/sbin/iptables -P OUTPUT ACCEPT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:33:03.913

在所有事情中，我最终发现问题是由设置为“强制”的 selinux 引起的。我改变了它使用

```
# nano -w etc/sysconfig/selinux 
```

并将“SELINUX=enforcing”行更改为“SELINUX=permissive”并重新启动我的服务器。现在一切都按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T19:06:20.000

我有同样的问题，你的解决方案确实有效。但是，我在这里找到的解决方案[https://unix.stackexchange.com/questions/8854/how-do-i-configure-selinux-to-allow-outbound-connections-from-a-cgi-script](https://unix.stackexchange.com/questions/8854/how-do-i-configure-selinux-to-allow-outbound-connections-from-a-cgi-script) 能够修复它也不需要完全禁用 SELinux 防火墙功能。

# html - 不透明悬停效果在 IE 中无法正常工作

> ID：12194381
> 
> 赞同：0
> 
> 时间：2012-08-30T10:02:19.943
> 
> 标签：html, css, internet-explorer, hover, opacity

我有这个简单的悬停效果[http://www.mysecretathens.gr/Sera/index.html](http://www.mysecretathens.gr/Sera/index.html)

```
#footer ul li:hover {
opacity: 0.7;
filter: alpha(opacity=40);
 } 
```

在页脚下方的社交媒体图标中，但在 IE 中，我看到每个图标周围都有一个蓝色边框。如何解决？你也看到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:04:31.780

我没有看到它，但我想它们是`<a>`锚标签。因此，对于 IE，您必须添加`border:0px;`作为您的社交媒体图标的锚标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:08:01.813

如果您在图像周围有一个链接，IE 会自动在其周围放置一个边框。

删除蓝色边框添加`a { border: 0 }`到您的 CSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:11:23.000

将此添加到您的CSS：

```
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)"; 
```

编辑：之前添加`filter: alpha(opacity=40);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:12:25.283

如果你有一个链接（锚），它是 Internet Explorer 的标准。在这种情况下，您必须使用以下命令重置边框：

```
a { 
  border :none;
} 
```

或者

```
a { 
  border :0px;
} 
```

下次，我建议您使用[jsfiddle](http://jsfiddle.net/)，您可以在其中轻松地放置您的代码以在站点上运行和调试它以解决问题。

# routes - Zend 框架中不同类型的路由

> ID：12194383
> 
> 赞同：3
> 
> 时间：2012-08-30T10:02:34.747
> 
> 标签：routes, zend-framework2

我一直在偶然发现 Zend Framework 2，我能找到的所有关于路由类型的信息都只适用于“段”，尤其是来自[Zend Framework 2 官方网站的 Album 模块示例](http://packages.zendframework.com/docs/latest/manual/en/user-guide/routing-and-controllers.html)

是否有人可以向我提供有关可以使用的不同类型路线的更多信息，在这种情况下应该使用哪种路线类型。包括一些基本示例的信息将提供更多信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:48:25.640

我认为这个介绍可以帮助你：

[http://evan.pro/zf2-router-talk.html](http://evan.pro/zf2-router-talk.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-14T08:13:44.927

如果仍然想了解 ZF2 中的路由类型，这可能对某人有所帮助 [http://zf2.readthedocs.org/en/latest/modules/zend.mvc.routing.html](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.routing.html)

# android - 从“普通”Java 类访问 Android 应用程序

> ID：12194386
> 
> 赞同：0
> 
> 时间：2012-08-30T10:02:42.377
> 
> 标签：android, android-asynctask

我的数据库连接有问题。我有一个创建数据库连接等的 DataManager。我还创建了一个创建此 DataManager 的应用程序类，以便 UI 线程可以获取数据。现在的问题是有一个后台线程也需要访问数据库，我不确定如何执行此操作（目前我在尝试在 AsyncActivity 中创建新 DataManager 时遇到错误，因为数据库没有关闭（这是正确的，因为 UIThread 已将其打开）。

所以我认为（这可能不是正确的方法，因为它是一个不同的线程）我可以访问应用程序并在新会话上使用相同的 DataManager。但是我如何才能从没有上下文或活动的“普通”类访问应用程序（我在想之前已经做过，但不记得了）。

后台任务的代码是：

```
public class SyncTask extends AsyncTask<String, Integer, String> {

    private static final String TAG = "Sync";

    /** application context. */
    private Context context;
    private ProgressDialog dialog;

    public SyncTask(Context aContext) {
        //this.activity = activity;
        this.context = aContext;
        dialog = new ProgressDialog(context);
    }

    protected void onPreExecute() {
        this.dialog.setMessage("Loading...");
        this.dialog.setMax(100);
        this.dialog.setProgress(0);
        this.dialog.show();
    }

    @Override
    protected void onPostExecute(final String errMessage) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (errMessage == null) {
            Toast.makeText(context, "Update completed", Toast.LENGTH_LONG).show();
        } else {
            AlertDialog alertDialog = new AlertDialog.Builder(context).create();
            alertDialog.setTitle("Error...");
            alertDialog.setMessage(errMessage);
            alertDialog.show();
        }
    }

    protected void onProgressUpdate(Integer... progress) {
        Log.d(TAG, "Progress Update: " + progress[0].toString());

        super.onProgressUpdate(progress[0]);
        dialog.setProgress(progress[0]);
    }

    protected String doInBackground(final String... args) {
        try{
            publishProgress( new Float(50).intValue());
            iDomsAndroidApp app = ((iDomsAndroidApp) ?? cannot remember ??);
            DataManager manager = app.getDataManager();
            manager.updateData();

            return null;
        } catch (Exception e){
            Log.e(TAG, "error", e);
            return e.getMessage();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:07:14.453

您应该使用 a`ContentProvider`来访问数据库，它是线程安全的，并且是处理数据的首选方式。

[http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:41:46.670

您可以使用您拥有的任何 Context 实例的 getApplicationContext() 方法并将返回值转换为 YouApplication。它完全符合条件。

# php - 在 localhost 安装 Laravel 的问题

> ID：12194387
> 
> 赞同：1
> 
> 时间：2012-08-30T10:02:52.890
> 
> 标签：php, laravel, xampp

我正在尝试在 Windows 8 中安装 PHP-Laravel，并且我正在使用 Xamp 服务器（本地主机）。我正在关注[安装 Laravel](http://daylerees.com/2012/03/25/laravel-getting-started/)指南。根据本指南，我正在使用以下代码制作虚拟主机：

```
<VirtualHost *:80>
 DocumentRoot "C:/xampp/htdocs/TssApp/public"
 ServerName TssApp
  <Directory "C:/xampp/htdocs/TssApp/public">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
   </Directory>
</VirtualHost> 

//Where "C:/xampp/htdocs/TssApp/public" is path of Laravel public folder 
```

我还在 etc/hosts 中添加了以下行

```
 127.0.0.2             TssApp 
```

在我输入***“http://TssApp”***时执行本教程中提到的必要步骤后，它总是重定向到***“http://tssapp/xampp/”***而不是 Laravel 主页。我不知道我是否缺少任何东西。

**注意：我可以通过****“http://localhost/tssapp/public/”**访问 laravel 主页，但想使用***“http://TssApp”***链接访问我的应用程序。

请帮助我解决这个问题。谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:39:55.220

你有`NameVirtualHost *`虚拟主机配置吗？

在对 /etc/hosts 或您的虚拟主机配置文件进行任何更改后，您需要重新启动 Apache

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T05:36:30.973

尝试将代码添加到 C:\xampp\apache\conf\extra\httpd-vhosts.conf 而不是将其添加到您自己的 conf 文件中。据我所知，xampp 会忽略它，除非它在 ​​vhosts 文件中。

你可以试试这个。

```
<VirtualHost *>
DocumentRoot "C:\xampp\htdocs"
ServerName localhost
</VirtualHost>
<VirtualHost *>
DocumentRoot "C:\xampp\htdocs\TssApp\public"
ServerName tssapp
<Directory "C:\xampp\htdocs\TssApp\public">
Options Indexes FollowSymLinks
AllowOverride All
Require all granted
</Directory>
</VirtualHost> 
```

尽管您应该将文件放在 xampp 目录而不是 htdocs 目录中，但您的文件应该是 C:\xampp\TssApp\public，这将阻止人们访问作为公共文件夹的 htdocs 并访问您的应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-01T07:03:13.250

根据文档（您指向的），您应该写

```
<VirtualHost 127.0.0.2> 
```

并不是

```
<VirtualHost *:80> 
```

您可以尝试一下并重新启动计算机/服务器吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-22T08:53:21.900

加入：

```
Allow from all 
```

后

```
AllowOverride all 
```

最终结果应该是：

```
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs/TssApp/public"
    ServerName TssApp
    <Directory "C:/xampp/htdocs/TssApp/public">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride all
        Allow from all
    </Directory>
</VirtualHost> 
```

还要确保您正在编辑位于以下位置的文件“httpd-vhosts.conf”：

```
C:\xampp\apache\conf\extra 
```

# scala - scala 只有类可以有声明但未定义的成员

> ID：12194389
> 
> 赞同：2
> 
> 时间：2012-08-30T10:03:02.203
> 
> 标签：scala, scala-collections

```
 def random[T](array: Array[(T, Double)]): T = {
    var total: Double = 0
    array.foreach(x => total += x._2)

    if (total > 1)
      throw new IllegalArgumentException("The total ratio shouldn't greater than 1.")

    val ratio = rand.nextDouble()
    var min: Double = 0
    var max: Double = 0

    var theOne:T = null // error here !!!

    array.foreach {
      x =>
        max += x._2
        if (ratio > min && ratio <= max)
          theOne = x._1

        min += x._2
    }

    theOne
  } 
```

我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:47:21.097

您可以使用**选项**类型：

```
 def random[T](array: Array[(T, Double)]): Option[T] = {
var total: Double = 0
array.foreach(x => total += x._2)

if (total > 1)
  throw new IllegalArgumentException("The total ratio shouldn't greater than 1.")

val ratio = rand.nextDouble()
var min: Double = 0
var max: Double = 0

var theOne:Option[T] = None

array.foreach {
  x =>
    max += x._2
    if (ratio > min && ratio <= max)
      theOne = Some(x._1)

    min += ratio
}

theOne
} 
```

带有**匹配表达式**

```
def show[T](x: Option[T]) = x match {
 case Some(s) => s
 case None => null
}

val res = random...
show(res) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:02:14.287

这里的问题是你没有保证 null 是类型 T 的有效值。Scala 的类型层次结构是这样开始的。

任何

AnyVal extends Any //不能为空

AnyRef extends Any //可以为空

因为您没有以任何方式限制类型 T，所以它不能保证 T 不是 anyval 的子类（如 Int 或 Double），因此不能允许您分配 null。一个简单的解决方案是用 _ 替换 null ，就像这样......

```
class Container[T] {
    var t: T = _
} 
```

这将使 Scala 编译器将 _ 替换为 T 的适当默认值（引用类型为 null）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:44:22.333

如果您想拥有快速代码，请不要使用`foreach`. 否则，您可以执行以下操作以与第二个元组元素成比例地绘制：

```
def random[T](array: Array[(T, Double)]): T = {
  val cumulative = array.scanLeft(0d)(_ + _._2)
  val pick = rand.nextDouble() * cumulative.last

  array.
var min: Double = 0
var max: Double = 0

var theOne:T = null // error here !!!

array.foreach {
  x =>
    max += x._2
    if (ratio > min && ratio <= max)
      theOne = x._1

    min += ratio
}

theOne 
```

}

# matlab - 使用Matlab的可变长度结构

> ID：12194392
> 
> 赞同：1
> 
> 时间：2012-08-30T10:03:13.653
> 
> 标签：matlab, variables, struct

我正在从结构中的进程收集数据，如下所示；

```
timepace(1,i) = struct(...
    'stageNo',str2num(stageNo), ...
    'split1', splits(1,1),...
    'split2', splits(1,2),...
    'split3', splits(1,3) ); 
```

但是，“拆分”的数量可以从 2 到 10 不等。目前，我使用比上面显示的更长的代码来分配所有“拆分”，如果没有，则输入 0。但这让我创造了很多用于“以防万一”有这么多拆分的情况的未使用数据。有没有办法让它的长度变得灵活？我知道所需的最终数字，因为它是我执行的每个查询的系统输入。

关于如何使其灵活并与长度变量相关的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:08:22.167

你可以使用类似的东西

```
S = struct('stageNo',str2num(stageNo));

for jj = 1:size(splits,2)
    S.(['split' num2str(jj)]) = splits(1,jj);
end

timepace(1,i) = S; 
```

它被称为“动态字段引用”。例如，您可以[在此处](http://blogs.mathworks.com/loren/2005/12/13/use-dynamic-field-references/)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:37:30.143

只需使用数组而不是`struct`：

```
timepace(1,i) = struct(...
    'stageNo',str2num(stageNo), ...
    'split',  *PUT HERE YOUR ARRAY*...
); 
```

不要忘记，在元胞数组的情况下，您需要额外的`{}`括号。

```
timepace(1,i) = struct(...
    'stageNo',str2num(stageNo), ...
    'split',  {{1,2,3,4,5}}... 
```

);

如果您必须使用`struct`，请参阅 Rodys 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:45:33.977

您还可以使用 cell2struct：

```
 labels = {'split1','split2','split3',...}
 c = num2cell(splits);
 f = labels(1:numel(c));
 s = cell2struct(c,f,2); 
```

# facebook - 使用 facebook 应用程序登录网站

> ID：12194395
> 
> 赞同：0
> 
> 时间：2012-08-30T10:03:33.700
> 
> 标签：facebook, referrals

首先让我介绍一下问题。我有一个网站，我想允许用户使用他们的 Facebook 帐户登录。我还希望有可能在用户墙上发帖并访问他的电子邮件。我创建了 Facebook 应用程序，每次未登录的用户进入登录页面时，他都会单击 Facebook 按钮并进入应用程序的身份验证对话框，在该对话框中他必须允许获取他的电子邮件，并在下一个屏幕上允许在墙上发帖。对于此对话框，用户将获得包含 scope=email、publish_stream 的链接。

第一个问题：当用户点击不允许在墙上发帖时，下次他使用这个链接时，他必须再次这样做。Facebook不应该记住这一点吗？我认为我不应该在链接中给出范围并使用在权限页面上选择扩展权限的应用程序设置。但这些权限从未被要求。即使我启用了推荐。

第二个问题：使用FB应用程序是否正确？我不应该使用 fblogin 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:00:44.743

> 当用户点击不允许在墙上发帖时，下次他使用此链接时，他必须再次这样做。脸书不应该记住这一点吗？

不——因为一旦用户拒绝了，就没有办法要求用户延长许可。

当然，当用户只想登录到您的页面时，每次看到该对话框都要求发布权限，这可能会让用户感到恼火。

这就是为什么 Facebook 自己建议您只请求当前任务实际需要的权限。要提供登录到您网站的能力，您只需要基本数据，也许还需要电子邮件——所以只需要在用户刚刚登录时提出这些要求。

然后，当您遇到用户积极希望通过您的应用程序共享内容的地步时 -*然后*检查您是否已经获得必要的权限，如果它不存在，请向他们询问（通过再次调用 auth 对话框，这次在范围参数中设置了扩展权限）。

这样，用户就很清楚为什么此时会要求他获得该权限，并且如果他只是尝试登录，他就不会一次又一次地为此烦恼。

> 我认为我不应该在链接中给出范围并使用在权限页面上选择扩展权限的应用程序设置。但这些权限从未被要求。即使我启用了推荐。

要使这些设置产生任何效果，连接到您的应用程序必须以实际*触发*Authenticated Referrals 的方式发生。在您的应用程序逻辑中自己进行登录*不会*触发这种身份验证方式。

# java - com.ibm.websphere.rsadapter.DB2UniversalDataStoreHelper 类需要哪个 jar 文件？

> ID：12194398
> 
> 赞同：0
> 
> 时间：2012-08-30T10:03:46.913
> 
> 标签：java, websphere, websphere-7, websphere-6.1

**`com.ibm.websphere.rsadapter.DB2UniversalDataStoreHelper`**运行我的 java 应用程序时出现 ClassNotFound 异常。有谁知道我在哪里可以得到这个类，哪个 jar 文件？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:12:14.020

com.ibm.ws.ejb.thinclient_7.0.0.jar

# opencart - vQmod 代码语法

> ID：12194402
> 
> 赞同：0
> 
> 时间：2012-08-30T10:03:58.477
> 
> 标签：opencart

我正在编写 vqmod opencart 修改并遇到一个问题。有一个基本代码：

```
<operation>
<search position="after"><![CDATA[<?php echo $description; ?></div></div>]]></search>
<add>
<![CDATA[<div class="content"><h2>Testimonials</h2><div class="box-testimonial"><?php echo $description_new; ?></div></div>]]>
</add>
</operation> 
```

所以我想要做的是做出某种条件，仅当 $description_new 不为空时才显示代码。这个 vqmode 代码的语法是什么？

提前致谢， 阿雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:23:23.247

好的，我想通了。似乎它是 CDATA 中常用的 php 语法

```
 <![CDATA[<?php if (isset($this->data['description_new'])) { echo '<div class="content"><h2>Testimonials</h2><div class="box-testimonial">' . $description_new . '</div></div>'; } else { echo ' '; }?>]]> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:01:34.703

vQmod 只允许您像往常一样插入代码到文件中，但不实际接触文件内容。所以是的，像你一样使用 if 语句就可以了。另外，我要指出的一件事是，您应该在搜索部分使用尽可能少的内容，这是独一无二的。所以对于你上面的代码

```
echo $description; 
```

应该足够匹配。如果您使用其他模组，它也不太可能破坏

# java - JFrame.setDecoratedLookAndFeel(true) 是如何工作的？得到一些奇怪的结果

> ID：12194403
> 
> 赞同：0
> 
> 时间：2012-08-30T10:03:58.567
> 
> 标签：java, window, jframe

所以我有 3 个 JFrame。JFrame 1（又名 opts）用于输入一些变量。确定后，它会创建 JFrame 2（又名视图，图形查看框架）。在构造函数中，立即创建了 JFrame 3（又名管理器，用于在图形视图中循环）。我希望它们像 Windows 一样装饰`JFrame.setDefaultLookAndFeelDecorated(true)`（从现在起称为“它”）。

几种不同的情况：

1.  当我根本不设置它时，所有的 JFrame 都是 Windows 装饰的。
2.  当我将它放在“opts”或“manager”构造函数中，运行项目，然后单击 OK 按钮，所有的 JFrame 都像 Windows 一样装饰。
3.  但是，当我把它放在“view”构造函数中时，只有“opts”和“view”是Windows修饰的，而“manager”是Java修饰的。
4.  但是当我把它放在一个只从文件中读取一些数据并从中制作一些对象的类中时，只有“opts”是 Windows 修饰的。

它究竟是如何工作的？我想知道为什么它会发生。

编辑：我无法复制案例 4，但仍然发生了一些我不明白的事情。尝试注释掉一些“它”。它会给出一些奇怪的结果。

```
package test;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public class Frame1 extends JFrame {
  public Frame1() {
    JFrame.setDefaultLookAndFeelDecorated(true);
      Frame1.setOptions(this);
      JButton b1 = new JButton("hi");
      b1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
          makeFrame2(2);
        }
      });
      this.add(b1);
    }

    public void makeFrame2(int x) {
      this.dispose();
      new Frame2(x);
    }

    public static void setOptions(JFrame f) {
      f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      f.setSize(250, 250);
      f.setEnabled(true);
      f.setVisible(true);
    }

    public static void main(String[] args) {
      new Frame1();
    }
}

package test;

import javax.swing.JFrame;

public class Frame3 extends JFrame {
  Frame2 link;
  SomeClass sc;

  public Frame3(Frame2 link)  {
    JFrame.setDefaultLookAndFeelDecorated(true);
    Frame1.setOptions(this);
    this.link = link;
    sc = new SomeClass(25);
  }
}

package test;

import javax.swing.JFrame;

public class SomeClass {
  int x;

  public SomeClass(int x) {
    JFrame.setDefaultLookAndFeelDecorated(true);
    this.x = x;
  }
}

package test;

import javax.swing.JFrame;

public class Frame2 extends JFrame {
  public Frame2(int x) {
    JFrame.setDefaultLookAndFeelDecorated(true);
    Frame1.setOptions(this);
    new Frame3(this);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:21:01.090

根据oracle java文档，`setDefaultLookAndFeelDecorated`更改所有新创建的JFrames的参数，所有现有的JFrames都不变。

[JFrame 文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setDefaultLookAndFeelDecorated%28boolean%29)

# delphi - 如何在 Delphi 中使用应用程序恢复和重启？

> ID：12194404
> 
> 赞同：4
> 
> 时间：2012-08-30T10:04:02.810
> 
> 标签：delphi, winapi

MSDN[声明](http://msdn.microsoft.com/en-us/library/cc948909%28VS.85%29.aspx)“ARR 是为 C 和 C++ 开发人员设计的”。在谷歌搜索了一段时间后，我找不到任何用于 ARR 的 Delphi 示例。是否可以在 Delphi 应用程序中使用 ARR？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:13:29.510

尚未对此进行测试，但就它的标题而言，它应该可以工作。为了实现它，您可以获得[`JEDI API Headers`](http://blog.delphi-jedi.net/jedi-api-headers/)包含[`JwaAppRecovery.pas`](http://jedi-apilib.svn.sourceforge.net/viewvc/jedi-apilib/jwapi/trunk/Win32API/JwaAppRecovery.pas?view=markup)应用程序恢复和重启 API 的单元。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T10:13:48.310

是的，它是一个常规的 Windows C 风格的 API。快速谷歌搜索显示[InnoSetup 支持它](http://www.jrsoftware.org/files/is5-whatsnew.htm)，所以也应该有你的 Delphi 源代码示例。

# url-rewriting - 如何将 UrlRewritingFilter 与 Struts 2.X 集成

> ID：12194407
> 
> 赞同：0
> 
> 时间：2012-08-30T10:04:28.270
> 
> 标签：url-rewriting, struts2, wildcard

1）有没有办法将 UrlRewritingFilter 与 Struts2**瓦片**集成。我认为 web xml 中的侦听器存在问题。

```
<listener>
    <listener-class>listener.ApplicationListener</listener-class>
</listener>

<listener>
    <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
</listener> 
```

2）如何使用struts2高级通配符映射来编写更好的带有actions的url。任何人都可以分享一个工作示例吗？

谢谢。！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:33:06.133

这就是您需要配置重写过滤器的方式

## web.xml

```
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
    <init-param>
        <param-name>logLevel</param-name>
        <param-value>WARN</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

请注意对 S2 过滤器所做的更改

在下面添加一个`rewrite.xml`文件`WEB-INF`，如

```
<urlrewrite>

    <rule>
    <from>^/some/olddir/(.*)$</from>
    <to type="redirect">/very/newdir/$1</to>
    </rule>

</urlrewrite> 
```

有关详细信息，请参阅那里的[文档](http://tuckey.org/urlrewrite/manual/2.6/)。还有一个选项可以使用创建干净的 URL `NamedVariablePatternMatcher`，有关详细信息，请参阅此博客示例和理解

*   [更好的 urls-with-struts2](http://www.struts2.info/displaycontent/content/better-urls-with-struts2)

# c# - 如何防止 MVC 中的每个请求加载数据？

> ID：12194408
> 
> 赞同：0
> 
> 时间：2012-08-30T10:04:29.220
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我正在分析数据库调用，我注意到每个请求都有很多数据库调用。我认为我可以通过将人员数据 (DTO) 存储到会话或缓存中来减少数据库调用。

我们正在使用 NHibernate，问题是每次我们需要 person 的单个属性时都会加载 person 的完整对象图。所以我想知道是否有一种方法可以一次加载完整的对象图，然后将其存储在内存中的某个位置，这样就不是每个请求都必须加载 person 对象。

是否有一些架构最佳实践来实现这一点？还是有其他一些最佳实践来处理他的这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:40:07.143

NHibernate 提供了一个 L2 缓存，它对从同一个 SessionFactory（应该是静态的）创建的所有 ISession 对象都有效。您可以使用 InMemory 提供程序，甚至可以使用 AppFabric、SqlServer、Redis 等外部提供程序。

我认为这对您来说是最简单的解决方案，因为您只需更改 NHibernate 配置。

一些起始参考-> [http://www.sharpcoder.co.uk/post/2012/01/04/NHibernateCachesAppFabric.aspx](http://www.sharpcoder.co.uk/post/2012/01/04/NHibernateCachesAppFabric.aspx)

# postgresql - PostgreSQL 中的 FROM_UNIX 备用

> ID：12194416
> 
> 赞同：6
> 
> 时间：2012-08-30T10:04:41.390
> 
> 标签：postgresql, unix-timestamp

伙计们，我已经在我的 MySQL 数据库中存储了 unix 时间戳，我正在使用 MySQL 函数读取它们`FROM_UNIX()`。

现在我正在将数据库从 MySQL 迁移到 PostgreSQL。在 PostgreSQL 中，我如何像在 MySQL 中那样读取 unix 时间戳`FROM_UNIX()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T10:15:09.637

取自[手册](http://www.postgresql.org/docs/current/static/functions-formatting.html)：

> to_timestamp(double precision) 将 Unix 纪元转换为时间戳

如果您需要创建时间戳的一部分，请使用该[`extract`](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)函数

```
select extract(year from to_timestamp(1284352323)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T10:53:05.983

```
SELECT to_char(date(to_timestamp(1195374767)),'YYYY-MM-DD'); 
```

*   to_timestamp - 转换为 Postgresql 时间戳，没有 unix 时间戳
*   日期转换为日期类型
*   to_char 格式输出

[http://www.postgresql.org/docs/8.1/static/functions-formatting.html](http://www.postgresql.org/docs/8.1/static/functions-formatting.html)

extract 可以做同样的事情，但不能一步完成

# html - 使用客户端代码为不同设备设置不同的视口宽度？

> ID：12194425
> 
> 赞同：0
> 
> 时间：2012-08-30T10:05:41.943
> 
> 标签：html, css, responsive-design, viewport

我正在制作一个具有三种状态（完整、480 像素和 320 像素）的响应式网站。

缩放到设备宽度在智能手机和屏幕小于 700 像素的设备上看起来不错，这是第一个响应模式启动的地方。

`<meta name="viewport" content="width=device-width, initial-scale=1.0"/>`

但是，在 iPad 上，我希望宽度为 1200 像素，因此页面最初显示为“全光”。

有没有办法通过客户端代码做到这一点？我知道我可以在服务器端获取用户代理，但由于我没有制作后端代码，我更喜欢 html/js 解决方案。

当然，iPad 的响应状态将是理想的，但是没有时间或金钱来做这件事，而且桌面站点运行得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:27:33.477

不知道这是否会成为其他人来这里的解决方案，但对我来说解决这个问题的是设置`min-width`每个响应状态`<body>`.. 使网站在 ipad 上加载得足够好..

# css - 为浮动在固定容器内的悬停元素添加额外边框？

> ID：12194426
> 
> 赞同：0
> 
> 时间：2012-08-30T10:05:46.523
> 
> 标签：css

我有一个瓷砖网格，我想要做的是悬停一个瓷砖并添加一个 3px 边框并保持瓷砖正确定位而不会破坏它周围的其他瓷砖。目前我不完全确定如何实现这一目标？这可以使用浮动来实现，还是我必须绝对定位每个图块，然后增加悬停图块的 z-index 以使其突出于其余部分？

此外，瓷砖尺寸必须保持不变，并且边框必须在瓷砖之外而不是插入。

在这里小提琴：http: [//jsfiddle.net/Z7TwF/](http://jsfiddle.net/Z7TwF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:07:53.807

在 :hover 选择器上，您需要删除边框的组合宽度：

```
li:hover{border:3px solid #f00; width: 44px; height: 44px;} 
```

当您为元素添加边框时，它会增加其尺寸。因此，当您将元素悬停时，删除维度属性上边框的组合宽度将解决问题。

[http://jsfiddle.net/Z7TwF/2/](http://jsfiddle.net/Z7TwF/2/)

* * *

另一种解决方案是更改 box-sizing 方法：

```
li
{
    box-sizing: border-box;
} 
```

这实质上是告诉浏览器用元素的宽度计算边框的宽度，防止您在原始示例中出现偏移。

[http://jsfiddle.net/Z7TwF/3/](http://jsfiddle.net/Z7TwF/3/)

# java - 使用 struts2 复选框显示/隐藏字段

> ID：12194431
> 
> 赞同：0
> 
> 时间：2012-08-30T10:05:56.927
> 
> 标签：java, javascript, struts2

我想根据是否选中 struts2 复选框来显示/隐藏字段。这是我的代码：

```
<s:checkbox label="Show/Hide" name="showHide" />
<s:textfield required="false" label="Extra Details" name="person.extraDetails" /> 
```

因此，当用户检查“showHide”时，它应该显示“person.extraDetails”。当他们取消选中它应该隐藏它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:53:41.927

很多方法可以实现这一目标

带有 jquery 的示例：

```
<div  style="display: none;" id="divHideID">
<s:textfield required="false" label="Extra Details" name="person.extraDetails" />
</div> 
```

**脚本**

```
<script type="text/javascript">
$("#showHide").click(function () {
        $("#divHideID").toggle();
        });
</script> 
```

# if-statement - 比较 /F 循环中的变量 (BATCH)

> ID：12194433
> 
> 赞同：0
> 
> 时间：2012-08-30T10:06:02.123
> 
> 标签：if-statement, for-loop, batch-file

我有这个代码：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION

SET /A counter=0
SET /A counter2=0

for /f %%h in (users.txt) do (
    set /a counter2=0
    set /a counter=!counter!+1

for /f %%i in (users.txt) do (
    set /a counter2=!counter2!+1
    IF !counter! gtr !counter2!
            echo !counter! and !counter2! 
    )
) 
```

出于某种原因，我在那里的 If 语句有错误。如果我把它划掉，一切都会很好。我的语法有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:48:36.710

我可以发现两个问题：

1）第一个`for`循环没有右括号：

```
for /f %%h in (users.txt) do (
    set /a counter2=0
    set /a counter=!counter!+1
)   <---------------------------------- You're missing this ")"! 
```

2) 在第二个循环中，`if`语句缺少左括号：

```
IF !counter! gtr !counter2! (   <------ You're missing this "("!
        echo !counter! and !counter2! 
) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T12:46:40.063

EitanT 可能有您正在寻找的解决方案，但它并不能完全解释您的问题。

如果您删除 IF 语句，则在调整缩进以更好地显示实际逻辑之后，您会得到这个。第二个循环在第一个循环内运行。

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION

SET /A counter=0
SET /A counter2=0

for /f %%h in (users.txt) do (
  set /a counter2=0
  set /a counter=!counter!+1

  for /f %%i in (users.txt) do (
    set /a counter2=!counter2!+1
    echo !counter! and !counter2!
  )
) 
```

当您输入 IF 语句时，您会得到这个不正确的代码

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION

SET /A counter=0
SET /A counter2=0

for /f %%h in (users.txt) do (
  set /a counter2=0
  set /a counter=!counter!+1

  for /f %%i in (users.txt) do (
    set /a counter2=!counter2!+1
    IF !counter! gtr !counter2!
    echo !counter! and !counter2!
  )
) 
```

IF 语句是不完整的——你没有告诉它如果是真的该怎么做。

如果您希望 ECHO 成为 IF 的一部分，那么您需要做 3 件事中的 1 件事：

1) 将 ECHO 附加到 IF 语句中

```
IF !counter! gtr !counter2! echo !counter! and !counter2! 
```

2) 使用line continuation 将IF 和ECHO 线变成一个逻辑线

```
IF !counter! gtr !counter2!^
echo !counter! and !counter2! 
```

3) 添加另一组括号。注意左括号必须与 IF 在同一行，并且前面必须有一个空格。

```
IF !counter! gtr !counter2! (
  echo !counter! and !counter2!
) 
```

帮助系统描述了 IF 的正确语法。键入`HELP IF`或`IF /?`从命令行获取帮助。

请注意，我发布的代码逻辑与 EitanT 解决方案不同。我不确定哪个是正确的。像大多数编程语言一样，缩进不会影响逻辑，它的存在是为了让人们更清楚地了解逻辑是什么。您的原始缩进表示 EitanT 提供的逻辑。我忽略了缩进并提供了计算机看到的逻辑。

顺便说一句 - 您不需要在 SET /A 语句中扩展变量。以下工作正常：

```
set /a counter=counter+1 
```

更好的是，您可以使用递增赋值运算符：

```
set /a counter+=1 
```

SET /A 还支持在一个语句中进行多个赋值：

```
set /a counter2=0, counter+=1 
```

您不需要在顶部初始化 counter2 ，因为您也在第一个循环中进行了初始化。

这是使用我根据您现有括号看到的逻辑的最终代码，忽略您的缩进：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION

SET /A counter=0

for /f %%h in (users.txt) do (
  set /a counter2=0, counter+=1

  for /f %%i in (users.txt) do (
    set /a counter2+=1
    IF !counter! gtr !counter2! echo !counter! and !counter2!
  )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:35:49.617

您的`if`声明应该全部在一行上，或者包含在`()`.

这是一个更正：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION

SET /A counter=0
SET /A counter2=0

for /f %%h in (users.txt) do (
  set /a counter2=0
  set /a counter=!counter!+1

  for /f %%i in (users.txt) do (
    set /a counter2=!counter2!+1
    IF !counter! gtr !counter2! (
      echo !counter! and !counter2! 
    )
  )
) 
```

正确的缩进可以帮助您追踪包围错误。

# javascript - 无法设置未定义的属性“显示”

> ID：12194435
> 
> 赞同：33
> 
> 时间：2012-08-30T10:06:18.067
> 
> 标签：javascript, css

我正在编写脚本来隐藏/显示菜单，但我遇到了一些麻烦。

```
 function displayMenu() {
//var classMenu = event.target.className;
//classMenu += 'Menu';
    //document.getElementsByClassName(classMenu).style.display = 'block';
document.getElementsByClassName('btn-pageMenu').style.display = 'block';
    } 
```

在评论中我最终想要做什么，但即使我尝试使用 static var 它也不起作用。在 CSS 中：

```
 fieldset.toolsbox ul.btn-pageMenu {display:none;} 
```

我也尝试这样：

```
 .btn-pageMenu {display:none;} 
```

没有更多的成功。有人有建议吗？我正在学习 JS，当我与其他类似的脚本进行比较时，我没有发现错误。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-30T10:07:55.937

`document.getElementsByClassName('btn-pageMenu')`提供一个[nodeList](http://reference.sitepoint.com/javascript/NodeList)。您应该使用：（`document.getElementsByClassName('btn-pageMenu')[0].style.display`如果它是您要更改的列表中的第一个元素。

如果要更改`style.display`所有节点，请遍历列表：

```
var elems = document.getElementsByClassName('btn-pageMenu');
for (var i=0;i<elems.length;i+=1){
  elems[i].style.display = 'block';
} 
```

要完整：如果您使用 jquery，它很简单：

```
​$('.btn-pageMenu').css('display'​​​​​​​​​​​​​​​​​​​​​​​​​​​,'block');​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T15:01:17.730

我在网站[https://plainjs.com/javascript/styles/set-and-get-css-styles-of-elements-53/](https://plainjs.com/javascript/styles/set-and-get-css-styles-of-elements-53/)中找到了这个答案。

在这段代码中，我们在一个元素中添加多个样式：

```
let
    element = document.querySelector('span')
  , cssStyle = (el, styles) => {
      for (var property in styles) {
          el.style[property] = styles[property];
      }
  }
;

cssStyle(element, { background:'tomato', color: 'white', padding: '0.5rem 1rem'});
```

```
span{
font-family: sans-serif;
color: #323232;
background: #fff;
}
```

```
<span>
lorem ipsum
</span>
```

# continuous-integration - 如何在无头环境中测试 JavaFX 2？

> ID：12194436
> 
> 赞同：11
> 
> 时间：2012-08-30T10:06:24.260
> 
> 标签：continuous-integration, automated-tests, javafx-2, headless, xvfb

我正在尝试使用集成的 JavaFX 2.2 自动测试在 Java 7u6 上运行的 JavaFX 2 应用程序。为此，我将[Jemmy3](http://java.net/projects/jemmy)和[JemmyFX](http://fxexperience.com/2012/02/announcing-jemmyfx/)构建并集成到我的构建环境中。一个简单的冒烟测试在所有相关操作系统上运行。

作为下一步，我想在持续部署过程中运行测试。由于目前的 CI 服务器运行在 OpenSUSE 上，JavaFX 并没有官方支持，所以我在虚拟机中设置了一个 Ubuntu Server 安装，并安装了 gtk2。
为了弥补缺乏完全成熟的窗口系统的问题，我尝试在*Xvnc*和*Xvfb*上运行测试，但无济于事。

在*Xvnc*上，测试失败

```
Prism ES2 Error - nInitialize: glXChooseFBConfig failed 
```

而在*Xvfb*上，他们给了我

```
Xlib:  extension "RANDR" missing on display ":10". 
```

一篇[博](http://timothyandrewbarber.blogspot.de/2012/04/xlib-extension-randr-missing-on-display.html)文建议安装`gtk-engines-pixbuf`以缓解第二个问题，但这只是改变了错误消息中的显示数量。

现在，我召唤StackOverflow的JavaFX知识并问

*   你知道如何解决上述错误吗？
*   您是否在（无头）CI 服务器上成功运行了 JavaFX 2 测试或机器人交互？
*   您是如何配置该系统以使其正常工作的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-23T10:52:59.687

我有一个类似的问题 - 在 Maven 的无头环境中运行 JUnit 测试。

我们不使用 JemmyFX。我们只有非常简单的测试，使用类似于这个的 JUnit 规则： [https](https://gist.github.com/andytill/3835914) ://gist.github.com/andytill/3835914 （这是使用 Platform.runLater(...) 的代码所必需的）

当前版本的 JavaFX（随 JDK 1.7.0-21 提供）似乎可以在 Ubuntu 12.04 上的 Xvfb 中运行，而无需运行 Xserver：

1.  **`Xvfb :99`**
2.  **`DISPLAY=:99 mvn clean install`**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-01T18:05:29.577

在 JavaFX 8 之前，对 JavaFX 的（无头）CI 服务器测试的支持不可用。

根据这些 JavaFX 问题跟踪记录中的信息回答：

*   [JDK-8088651](https://bugs.openjdk.java.net/browse/JDK-8088651) “Headless Glass 工具包需要连接到 Quantum 和 Prism 单元测试”
*   [JDK-8091286](https://bugs.openjdk.java.net/browse/JDK-8091286) “Quantum 需要无头和有头测试”）。

**2015 年 1 月 8 日更新**

链接的 JavaFX 问题跟踪记录未针对 Java 8 实施，已重新分配给 Java 9。

Java 8 源代码当前包含一个名为 Monocle 的最小渲染引擎，它为 JavaFX 组件提供无头渲染（以及针对各种其他目标平台的渲染）。我从未使用过 Monocle，也无法提供有关如何使用它进行无头渲染的详细说明。我相信要使用 Monocle，您目前需要从源代码执行 JavaFX 的自定义构建（因为我认为 Monocle 通常只提供嵌入式 JavaFX 版本，这不是桌面 Java 运行时和 JDK 环境附带的标准 JavaFX 版本） .

[JavaFX wiki](https://wiki.openjdk.java.net/display/OpenJFX/Monocle)上提供了有关 Monocle 的信息。

虽然，无头渲染是由 Monocle 提供的，但我不认为 Oracle 官方支持使用 Monocle 进行无头渲染（虽然我不认为官方支持任何形式的 JavaFX 无头渲染，所以我猜 Monocle 是否可以正常工作对你来说，一定要使用它）。

Monocle 中的无头渲染是一种软件渲染实现，因此某些图形基元的执行可能比 JavaFX 在桌面环境中的标准硬件加速操作慢。

可能还有其他方法可以让 JavaFX 在我不知道的无头环境中运行。

如果有疑问，请[咨询 openjfx-dev 邮件列表](http://mail.openjdk.java.net/mailman/listinfo/openjfx-dev)上的 JavaFX 开发人员。

如果您在 Linux 下运行，则按照 Jan Zarnikov 的回答建议使用 Xvfb 可能是一个很好的解决方案，并且可能比使用 Monocle 更可取。

# sql - 解码在 oracle sql 查询中不起作用

> ID：12194438
> 
> 赞同：0
> 
> 时间：2012-08-30T10:06:41.497
> 
> 标签：sql, oracle

我在这里使用组函数进行简单查询。这是查询

```
SELECT DECODE (DIRAPP, NULL, 'SML', DIRAPP) DD
  FROM (SELECT      'At Director Approval '
                 || NVL (COUNT (*), 0)
                 || ' Cheques of Rs. '
                 || NVL (TO_CHAR (SUM (BPV_AMT), '9,999,999,999'), 0)
                 || ' in '
                 || CONCATENATE_LIST
                                 (CURSOR (SELECT DISTINCT NVL
                                                             (BPV_DTE,
                                                              SYSDATE
                                                             ) BPV_DTE
                                                     FROM CHECK_DATA
                                                    WHERE STA_FLG IN (1, 3)
                                                 ORDER BY 1 DESC
                                         )
                                 ) DIRAPP
            FROM CHECK_DATA
           WHERE STA_FLG IN (1, 3)
        GROUP BY 1, 2) A 
```

我已经使用了 nvl 函数并且还进行了解码，但是当没有针对标志 1 和 3 找到任何数据时，即使`0`从 nvl 也没有显示任何内容，并且还在工作 decode。我想用 as 显示整个字符串，`At Director Approval 0 Cheques of Rs.0`请任何人帮我这样做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:12:14.833

`decode`没有损坏，它只是没有数据可以使用。您正在过滤`where sta_flg in (1,3)`，因此如果没有任何状态的记录，则根本没有行。你无法解码不存在的东西。

解决此问题的一种方法是更改​​您对值进行计数和求和的方式，以便在 中有效地完成过滤`select`，而不是在`where`. 暂时删除格式，而不是执行以下操作：

```
SELECT COUNT(*), SUM(BPV_AMT)
FROM check_data
WHERE sta_flag IN (1,3); 
```

...如果没有具有匹配标志的记录，它将不返回任何行，即使表中有其他数据，您也可以这样做：

```
SELECT SUM(CASE WHEN sta_flg IN (1,3) THEN 1 ELSE 0 END) AS rec_cnt,
    SUM(CASE WHEN sta_flg IN (1,3) THEN bpv_amt ELSE 0 END) AS bpv_amt_tot
FROM check_data; 
```

只要表不为空，这将返回单行数据，具有正常值或两者兼有`rec_cnt`并`bpv_amt_tot`设置为零。

将其作为内部选择插入，您的查询可能如下所示：

```
SELECT 'At Director Approval '
    || rec_cnt
    || ' Cheques of Rs. '
    || TO_CHAR(bpv_amt_tot, '9,999,999,999')
    || CASE WHEN rec_cnt = 0 THEN NULL
        ELSE ' in ' || CONCATENATE_LIST(CURSOR(
            SELECT DISTINCT NVL(bpv_dte, SYSDATE)
            FROM check_data
            WHERE sta_flg IN (1, 3)
            ORDER BY 1 DESC
        )) END AS dirapp
FROM (
    SELECT SUM(CASE WHEN sta_flg IN (1,3) THEN 1 ELSE 0 END) AS rec_cnt,
        SUM(CASE WHEN sta_flg IN (1,3) THEN bpv_amt ELSE 0 END) AS bpv_amt_tot
    FROM check_data
); 
```

`case`周围的部分`' in ' || CONCATENATE_LIST(...`只是为了避免`in`在没有匹配状态时出现尾随。

由于您没有选择任何非聚合列，因此不需要`group by`子句。（无论如何，您所拥有的那个是不正确的-您不能按列位置`group by 1,2`分组，因此按两个常量值分组也是如此，这不会添加任何内容）。

最后，由于您使用的是[`concatenate_list()`](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php#generic_function_using_ref_cursor)我假设您使用的是早于 11gR2 的版本；如果您使用的是当前版本，那么内置`listagg()`会更简单。

# sql - 如何将现有 SQL Server 8.0 数据库文件附加到 Microsoft 数据引擎 (MSDE)？

> ID：12194440
> 
> 赞同：0
> 
> 时间：2012-08-30T10:06:49.447
> 
> 标签：sql, database, sql-server-2008, msde

我正在尝试将 microsoft sql server 2008 数据库附加到 msde 2000 但无法附加。我用谷歌搜索了很多网站，但仍然找不到解决方案。我发现的唯一一件事是新版本无法连接到旧版本服务器......

请建议我我能做什么？有什么方法可以附加数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:50:46.663

你需要做的是：

编写您的数据库结构，包括存储过程、索引、函数等（SQL 管理工作室中有一个向导）。

在您的 MSDE 实例上创建一个空数据库。

运行脚本，在早期版本的 SQL 中不支持任何类型的对象的地方进行更改

将新版本的数据批量插入旧版本（再次进行更改以克服错误，因为旧版本不支持功能） SQL管理工作室中有一个向导。（不修复你的错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:17:57.997

没有**办法**实现这一点 - 您**永远无法**使用 SQL Server回到*过去。*

也就是说：您**不能**使用任何方法或技巧或破解或解决方法将较新的数据库（文件）附加或恢复到**较**旧的 SQL Server 版本。

没门。不工作。甚至不要尝试。没有。

您需要找到一种方法来同步两个数据库——它们的结构（表、视图、存储过程等）和它们的数据（表的内容）——手动同步，例如使用 T-SQL 脚本更新一个数据库另一方面，[一个可以帮助您的工具](http://www.red-gate.com/products/sql-development/sql-compare/)，或者您想使用的任何方法。

但是您**不能**以任何方式将较新的 SQL Server 数据库文件分离/附加或备份/恢复到旧版本上。

# scala - 在 Play2 for Scala 中测试 Promise

> ID：12194443
> 
> 赞同：1
> 
> 时间：2012-08-30T10:07:01.657
> 
> 标签：scala, testing, integration-testing, playframework-2.0, promise

我有一个需要调用外部服务的 Play2 应用程序。我想测试我是否可以连接到这些服务并获得预期的答案。

问题是`WS`API 只返回一个结果的承诺。这很好，因为它使我从明确地执行演员的请求中解放出来。但我不知道如何测试它。

有没有办法：

*   要求承诺阻止直到它满意，或者
*   在 Play2 中安排异步测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:09:28.733

我发现我可以`Promise`用`await`方法等待 a 的结果，所以我的测试看起来像

```
Service.query.await.get must contain("something") 
```

# makefile - 删除变量中的所有空格并附加到另一个变量（如果不是空白）

> ID：12194444
> 
> 赞同：1
> 
> 时间：2012-08-30T10:07:02.683
> 
> 标签：makefile

我在 Windows 中使用 make，我需要操作一些变量来创建文件名。我有一个基本文件名和一个要附加的可选部分。如果附加了可选部分，则应在两个部分之间插入下划线。可选部分是从文件中读入的，包含 5 个字符（空格或字母数字）。

这是我期望的工作：

```
OPTIONAL_NAME="     "
BASE_NAME=myfile
STRIPPED_OPTIONAL_NAME=$(strip $(OPTIONAL_NAME))
ifeq ("$(STRIPPED_OPTIONAL_NAME)","")
FULL_NAME=$(BASE_NAME)
else
FULL_NAME=$(BASE_NAME)_$(STRIPPED_OPTIONAL_NAME)
endif 
```

OPTIONAL_NAME 可以具有以下值：

```
OPTIONAL_NAME="     "
OPTIONAL_NAME="ABCDE"
OPTIONAL_NAME="A    "
OPTIONAL_NAME="  A  "
OPTIONAL_NAME="    A" 
```

由于导入的方式， OPTIONAL_NAME 的值周围有引号（请参阅我之前的问题 -[从文件中读取值到变量](https://stackoverflow.com/questions/12180162/read-a-value-from-a-file-into-a-variable)中）。

结果的问题是`strip`似乎将多个空格减少为单个空格，但实际上并未删除前导或尾随空格。

我试过用它来去除空格：

```
space:=
space+=
STRIPPED_OPTIONAL_NAME=$(subst $(space),,$(OPTIONAL_NAME)) 
```

这确实删除了空格，但我很难检查是否有空字符串。

谢谢

斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:14:11.507

您不应该将变量放在引号中的比较中。试试这个：

```
ifeq ($(STRIPPED_OPTIONAL_NAME),"") 
```

上面检查空字符串。

或者

```
ifeq ($(STRIPPED_OPTIONAL_NAME)," ") 
```

检查单个空间。

# android - 在android中的某些字符之后显示点序列的字符串

> ID：12194446
> 
> 赞同：0
> 
> 时间：2012-08-30T10:07:10.280
> 
> 标签：android, string

我正在点击一个特定的 URL 并从中得到一些响应。我将响应存储到一个字符串中。但是我的字符串存储了大约 3500 个字符，然后显示 ... 。如何将所有响应数据存储到字符串中？请注意，响应是 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:18:31.103

由于您正在处理大型 json，因此最好使用[JsonReader](http://developer.android.com/reference/android/util/JsonReader.html)。这样您就不必担心这些点和内存不足异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:27:20.577

尝试通过显示您的 String.length() 值来调试并证明...它真的是 3500 吗？

# actionscript - AS3 工人：收到的对象抛出“类型强制失败”错误

> ID：12194451
> 
> 赞同：0
> 
> 时间：2012-08-30T10:07:15.040
> 
> 标签：actionscript, worker

我创建了一个工人类来解析 Collada 文件（Alternativa3d 引擎）。

我正在将 dae/xml 文件发送到 Worker 类并对其进行解析。在主课上收到它时，收到一条错误消息“类型强制失败”。

这是代码。

主类：发送数据

```
if (bgWorkerX.state == WorkerState.RUNNING)
        {
            var _b:ByteArray = (new modelX() as ByteArray);
            var xml:XML = (new XML(_b.readUTFBytes(_b.length)));
            bgWorkerCCX.send(["START_PARSING", XParser]);
        } 
```

主类：接收数据

```
if (!resultCX.messageAvailable)
        {
            return;
        }
        var result:String = resultCX.receive(true);
        if (result == "SUCCESS")
        {

            var txt3:TextField = new TextField();
            txt3.text = "Parsed result : " + Mesh(resultCX.receive(true)); //ERROR LINE : TYPE COERCION FAILED.
        }
    } 
```

工人阶级：

```
private function handleCommandMessage(event:Event):void
    {
        if (!commandChannel.messageAvailable)   {
            return;
        }

        var message:Array = commandChannel.receive() as Array;

        if (message != null && message[0] == "START_PARSING")
        {
            StartParsing(XML(message[1]));
        }
    }

    private function StartParsing(xml:XML):void
    {
        parser = new ParserCollada();
        parser.parse(xml);
        resultChannel.send("SUCCESS");
        resultChannel.send(parser.getObjectByName('mainbody') as Mesh);
    } 
```

有人知道如何将类似类型的对象转换为所需的类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:42:32.563

尝试使用`ByteArray.writeObject`...
`ByteArray.readObject`方法...
我也遇到过这个问题，但不确定是否可以这样做。
如果您成功解决它，请告诉我。

# .htaccess - 将目录重写为域

> ID：12194453
> 
> 赞同：5
> 
> 时间：2012-08-30T10:07:18.940
> 
> 标签：.htaccess, url-rewriting, rewrite

我正在为 .htaccess 重写而苦苦挣扎，有人能指出我正确的方向吗？

我希望能够将所有请求重写为

www.domain.com/images 到 images.domain.com（子域在不同的服务器上），保持任何文件名和子文件夹请求不变。

因此，对 www.domain.com/images/folder1/image1.jpg 的请求将从 images.domain.com/folder1/image1.jpg 获取图像

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:12:20.403

使用此规则：

```
RewriteEngine on
RewriteRule ^images/(.*)$ http://images.domain.com/$1 [L,R=301] 
```

# java - 正则表达式挂起 - Java 匹配器

> ID：12194456
> 
> 赞同：1
> 
> 时间：2012-08-30T10:07:25.897
> 
> 标签：java, regex, string

细绳：

> 水，月桂基聚醚硫酸钠，月桂基硫酸钠，聚二甲基硅氧烷，椰油酰胺MEA，碳酸锌，二硬脂酸乙二醇酯，氯化钠，吡啶硫酮锌，二甲苯磺酸钠，鲸蜡醇，香水，瓜尔胶羟丙基三甲基氯化铵，硫酸镁，苯甲酸钠，月桂基聚醚硫酸铵，镁碳酸氢盐、芳樟醇、丁基苯基甲基丙醛、柠檬烯、羟基异己基 3-环己烯甲醛、苯甲醇、肉桂醛己酯、香茅醇、生育酚乙酸酯、石蜡液、聚萘磺酸钠、CI 19140、DMDM 乙内酰脲、CI 15510、甲基氯异噻唑啉酮、EDTA 二钠、EDTA 四钠甲基异噻唑啉酮。

当前正则表达式：

```
System.out.println(string.matches("([\\W]*\\b[A-Z\\d]\\w+\\b[\\W]*)+")); 
```

Java 应用程序挂起。我在 RegEx 中找不到错误。通过谷歌搜索，我发现这可以称为“灾难性回溯”！？正则表达式应该匹配字符串，如果它只包含大写单词，如果例如 1 个单词是小写不应该匹配它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:13:29.690

我建议您按单词拆分输入字符串，然后对其进行模式匹配，事件更简单：如果您只想测试每个单词的第一个字母是否为大写，则不要进行模式匹配，例如：

```
for (String s : string.split("\\W")) {
  if (s.charAt(0) < 'A' || s.charAt(0) > 'Z') {
    return false;
  }
} 
```

对我来说听起来要快得多（如果需要，您甚至可以使用失败的单词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:10:43.993

也许你的想法是

```
String regex = "([A-Z][\\d\\w]+( [A-Z][-\\d\\w]+)*, )*[A-Z][-\\d\\w]+( [A-Z][-\\d\\w]+)*\\.";
System.out.println(string.matches(regex)); 
```

返回真。

正则表达式的问题是它过于复杂。添加表达式直到你得到的缺点`true`是它可以匹配你没有想到的东西。

```
Random rand = new Random();
while(true) {
    byte[] bytes = new byte[40];
    rand.nextBytes(bytes);
    for (int i = 0; i < bytes.length; i++) bytes[i] &= 0x7F;
    String string = new String(bytes, 0);
    if (string.matches("([\\W]*\\b[A-Z\\d]\\w+\\b[\\W\\d]*)+"))
        System.out.println(string);
} 
```

打印诸如

```
"^;%XX`'SwJ|[*4"*0C<Tgbom_. \^
{PvU_y9aJSm?08EL(   NpfA9a[:$YbN8VTtMk
;![`LR7Yy\AO5PZ@X4}GajC<*XvKE11
8l5W6*IDNH[9C'@.>7`LHsCN*,{26O}
EFJ5MBVxi%W_t6v54EmLmgjFvqyYh\<"
+7]|ULh2[MT`Yx{MKH4N
'8p!2mf 
```

而我给出的表达式匹配

```
KfhBuGv7, S3.
IWzu, XHop4Z.
LJbXfrd, PdR.
V2dxQV, LA9z.
HKf37cy0, TS.
RAw2E5a, Ajs.
Up-, GPQ7 I_. 
```

# c# - AuthorizeAttribute 和参数

> ID：12194459
> 
> 赞同：2
> 
> 时间：2012-08-30T10:07:36.323
> 
> 标签：c#, asp.net-mvc

我的应用程序中有一个自定义 AuthorizeAttribute ，它带有一个输入参数`bool UserIsOnline`。此参数用于增加一个表字段，该字段包含有关上次用户交互时间的信息，即对于在幕后执行的 ajax 请求，我提供一个值`false`，对于常规请求或用户发起的 ajax 请求，一个`true`值。

这在大多数情况下都有效，但并非总是如此。[我读过这](http://forums.asp.net/post/3321931.aspx "我读过") `AuthorizeAttribute`不是线程安全的，这让我想知道这个`UserIsOnline`参数是否错误，因为它在被处理之前被另一个进程修改。我将如何解决这个问题？我不应该为此操作使用 AuthorizeAttribute 吗？

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
  private MyMembershipProvider _provider = new MyMembershipProvider(); // this class is thread-safe
  private bool _userIsOnline = true;
  public bool UserIsOnline { get { return _userIsOnline; } set { _userIsOnline = value; } }

  protected override bool AuthorizeCore(HttpContextBase httpContext)
  {
    if (httpContext == null)
    {
      throw new ArgumentNullException("httpContext");
    }

    // Check if user is authenticated
    IPrincipal user = httpContext.User;
    if (!user.Identity.IsAuthenticated)
    {
      return false;
    }
    // Check that the user still exists in database
    MyMembershipUser myUser = (MyMembershipUser)_provider.GetUser(user.Identity.Name, _userIsOnline);
    if (myUser == null)
    {
      // User does not exist anymore, remove browser cookie
      System.Web.Security.FormsAuthentication.SignOut();
      return false;
    }
    return true;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:07:17.500

您可以完全跳过参数并使用`httpContext.Request.IsAjaxRequest`

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
  protected override bool AuthorizeCore(HttpContextBase httpContext)
  {
    if (httpContext == null)
    {
      throw new ArgumentNullException("httpContext");
    }

    // Check if user is authenticated
    IPrincipal user = httpContext.User;
    if (!user.Identity.IsAuthenticated)
    {
      return false;
    }

    if (!httpContext.Request.IsAjaxRequest()) 
    {
         // do your thing in the DB
    } 
```

# c# - FileSystemWatcher 异常上升

> ID：12194463
> 
> 赞同：0
> 
> 时间：2012-08-30T10:07:53.457
> 
> 标签：c#, filesystemwatcher

我写了一个小应用程序来监控文件的变化。当我运行它时，每次我得到关于路径的异常。我不明白为什么。路径是真实存在的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Run();
        }

        public static void Run()
        {
            FileSystemWatcher watcher = new FileSystemWatcher();
            watcher.Path = @"D:\test\1.txt";
            watcher.NotifyFilter = NotifyFilters.LastWrite;

            watcher.Changed +=new FileSystemEventHandler(watcher_Changed);
            watcher.EnableRaisingEvents = true;
        }

static void  watcher_Changed(object sender, FileSystemEventArgs e)
{
    Console.WriteLine(e.ChangeType);
}

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:10:59.797

FileSystemWatcher.Path 应该是 Path 而不是文件名

```
watcher.Path = @"D:\test"; 
watcher.Filter = "1.txt";

private static void watcher_Changed(object source, FileSystemEventArgs e)
{
    // this test is unnecessary if you plan to monitor only this file and
    // have used the proper constructor or the filter property
    if(e.Name == "1.txt")
    {
         WatcherChangeTypes wct = e.ChangeType;
         Console.WriteLine("File {0} {1}", e.FullPath, wct.ToString());
    }
} 
```

您还可以使用带有两个参数（路径和文件过滤器）的构造函数来限制监视。

```
FileSystemWatcher watcher = new FileSystemWatcher(@"d:\test", "1.txt"); 
```

[请参阅 MSDN 参考资料](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.path.aspx)

# ipad - iOS App Store，强制重新安装

> ID：12194466
> 
> 赞同：1
> 
> 时间：2012-08-30T10:07:57.067
> 
> 标签：ipad, ios5, app-store

真的没有办法强制从应用商店更新应用程序进行完全重新安装吗？（假设您的数据库需要更新，但您并没有真正需要（或希望）迁移现有数据）。

（我想知道在没有更新功能的情况下在设备上获取新版本应用程序的唯一方法是完成删除当前应用程序，为更新的（新）应用程序提供一个新的命名空间/标识符并从“scratch”上传"，然后希望用户会真正注意到该应用程序现在是一个新应用程序......）。

有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:15:28.683

第二个选项似乎是个坏主意，用户不会知道您的应用程序有一个新的“版本”，所以不会去寻找它，所以您必须向他们发送通知，告诉他们有关它的信息。我无法想象你会得到很大比例的人改变

如果您需要做的就是删除旧数据库并重新开始，您可以这样做。[这个问题](https://stackoverflow.com/questions/5266967/trying-to-overwrite-sqlite-database-in-iphone-app-update)有一个 sqlite 数据库的答案。基本上你只需要跟踪用户拥有的模型版本，当他们升级时，你删除旧的并从头开始建立一个新的数据库

# python - python wkhtmltopdf 生成pdf

> ID：12194467
> 
> 赞同：9
> 
> 时间：2012-08-30T10:08:00.910
> 
> 标签：python, wkhtmltopdf

我可以使用命令行 wkhtmltopdf 生成 pdf，但是当我在 python lib 中使用它时

```
from wkhtmltopdf import WKhtmlToPdf

wkhtmltopdf = WKhtmlToPdf(
    url='http://www.wikipedia.org',
    output_file='a.pdf',
) 
```

我明白了

```
'Exception: Missing url and output file arguments' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T02:20:08.900

我认为当前版本存在问题。我有同样的问题，如果你查看他们的 Github[问题页面](https://github.com/qoda/python-wkhtmltopdf/issues/5)，两天前有人发布了同样的问题。

根据他们的文档，这也应该有效：

```
python -m wkhtmltopdf.main google.com ~/google.pdf 
```

但相反，我得到：

`optparse.OptionConflictError: option -h/--header-html: conflicting option string(s): -h`

由于它是一个包装器，我猜测底层应用程序已更新，但包装器尚未更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T16:59:14.637

```
from wkhtmltopdf import WKhtmlToPdf

wkhtmltopdf = WKhtmlToPdf(*
    [url='http://www.wikipedia.org',
    output_file='a.pdf']
) 
```

2015 年就在这里，但这会奏效；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T17:50:36.970

wkhtmltopdf/main.py 中的拼写错误和重写 API 的问题

现在API是：

```
from wkhtmltopdf import WKhtmlToPdf

wkhtmltopdf = WKhtmlToPdf('http://www.wikipedia.org','out.pdf') 
```

# javascript - 在 HTML 中进行拆分窗格的最佳方法

> ID：12194469
> 
> 赞同：78
> 
> 时间：2012-08-30T10:08:03.430
> 
> 标签：javascript, html, css

有没有一种很好的技术可以在 HTML 中制作可调整大小的拆分窗格？

是否可以使用 CSS / jQuery / JavaScript 完成，或者是否有一个好的 JavaScript 库已经使用？

（拆分窗格的一个示例是[Internet Explorer](https://en.wikipedia.org/wiki/Internet_Explorer)中的收藏夹栏，您可能已将其停靠在主浏览器窗口的左侧。）

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2015-08-29T17:20:29.690

我想要一个普通的、轻量级的（[jQuery UI](https://en.wikipedia.org/wiki/JQuery_UI) Layout 大小为 185 KB），没有依赖选项（所有现有的库都需要 jQuery），所以我编写了[Split.js](https://github.com/nathancahill/Split.js)。

它的重量小于 2 KB，不需要任何特殊标记。它支持旧版浏览器回到 Internet Explorer 9（或带有 polyfills 的 Internet Explorer 8）。对于现代浏览器，您可以将其与[Flexbox](https://en.wikipedia.org/wiki/CSS_Flexible_Box_Layout)和[网格](https://en.wikipedia.org/wiki/CSS_grid_layout)布局一起使用。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2019-03-17T00:10:01.667

改进[Reza 的回答](https://stackoverflow.com/a/52536726/1098603)：

*   防止浏览器干扰拖动
*   防止将元素设置为负大小
*   防止由于与元素宽度饱和的增量增量交互而导致拖动与鼠标不同步

```
<html><head><style>

.splitter {
    width: 100%;
    height: 100px;
    display: flex;
}

#separator {
    cursor: col-resize;
    background-color: #aaa;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='30'><path d='M2 0 v30 M5 0 v30 M8 0 v30' fill='none' stroke='black'/></svg>");
    background-repeat: no-repeat;
    background-position: center;
    width: 10px;
    height: 100%;

    /* Prevent the browser's built-in drag from interfering */
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

#first {
    background-color: #dde;
    width: 20%;
    height: 100%;
    min-width: 10px;
}

#second {
    background-color: #eee;
    width: 80%;
    height: 100%;
    min-width: 10px;
}

</style></head><body>

<div class="splitter">
    <div id="first"></div>
    <div id="separator" ></div>
    <div id="second" ></div>
</div>

<script>

// A function is used for dragging and moving
function dragElement(element, direction)
{
    var   md; // remember mouse down info
    const first  = document.getElementById("first");
    const second = document.getElementById("second");

    element.onmousedown = onMouseDown;

    function onMouseDown(e)
    {
        //console.log("mouse down: " + e.clientX);
        md = {e,
              offsetLeft:  element.offsetLeft,
              offsetTop:   element.offsetTop,
              firstWidth:  first.offsetWidth,
              secondWidth: second.offsetWidth
             };

        document.onmousemove = onMouseMove;
        document.onmouseup = () => {
            //console.log("mouse up");
            document.onmousemove = document.onmouseup = null;
        }
    }

    function onMouseMove(e)
    {
        //console.log("mouse move: " + e.clientX);
        var delta = {x: e.clientX - md.e.clientX,
                     y: e.clientY - md.e.clientY};

        if (direction === "H" ) // Horizontal
        {
            // Prevent negative-sized elements
            delta.x = Math.min(Math.max(delta.x, -md.firstWidth),
                       md.secondWidth);

            element.style.left = md.offsetLeft + delta.x + "px";
            first.style.width = (md.firstWidth + delta.x) + "px";
            second.style.width = (md.secondWidth - delta.x) + "px";
        }
    }
}

dragElement( document.getElementById("separator"), "H" );

</script></body></html>
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2019-03-15T19:54:16.187

**最简单的 HTML + CSS 手风琴，只需[CSS resize](https://developer.mozilla.org/en-US/docs/Web/CSS/resize)。**

```
div {
  resize: vertical;
  overflow: auto;
  border: 1px solid
}
.menu {
  display: grid
  /* Try height: 100% or height: 100vh */
}
```

```
<div class="menu">
  <div>
    Hello, World!
  </div>
  <div>
    Hello, World!
  </div>
  <div>
    Hello, World!
  </div>
</div>
```

* * *

**最简单的 HTML + CSS 垂直可调整大小的窗格：**

```
div {
  resize: horizontal;
  overflow: auto;
  border: 1px solid;
  display: inline-flex;
  height: 90vh
}
```

```
<div>
  Hello, World!
</div>
<div>
  Hello, World!
</div>
```

* * *

**纯 HTML，[详细信息元素！](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details).**

```
<details>
  <summary>Morning</summary>
  <p>Hello, World!</p>
</details>
<details>
  <summary>Evening</summary>
  <p>How sweat?</p>
</details>
```

* * *

**最简单的 HTML + CSS 顶栏折叠菜单**

```
div{
 display: flex
}
summary,p{
 margin: 0px 0 -1px 0px;
 padding: 0 0 0 0.5rem;
 border: 1px black solid
}
summary {
  padding: 0 1rem 0 0.5rem
}
```

```
<div>
  <details>
    <summary>FILE</summary>
    <p>Save</p>
    <p>Save as</p>
  </details>
  <details>
    <summary>EDIT</summary>
    <p>Pump</p>
    <p>Transfer</p>
    <p>Review</p>
    <p>Compile</p>
  </details>
  <details>
    <summary>PREFERENCES</summary>
    <p>How sweat?</p>
    <p>Powered by HTML</p>
  </details>
</div>
```

* * *

**固定底部菜单栏，向上展开。**

```
div{
 display: flex;
 position: fixed;
 bottom: 0;
 transform: rotate(180deg)
}
summary,p{
 margin: 0px 0 -1px 0px;
 padding: 0 0 0 0.5rem;
 border: 1px black solid;
 transform: rotate(180deg)
}
summary {
  padding: 0 1rem 0 0.5rem;
}
```

```
<div>
  <details>
    <summary>FILE</summary>
    <p>Save</p>
    <p>Save as</p>
  </details>
  <details>
    <summary>EDIT</summary>
    <p>Pump</p>
    <p>Transfer</p>
    <p>Review</p>
    <p>Compile</p>
  </details>
  <details>
    <summary>PREF</summary>
    <p>How?</p>
    <p>Power</p>
  </details>
</div>
```

* * *

**最简单的可调整大小的窗格，使用 JavaScript。**

```
let ismdwn = 0
rpanrResize.addEventListener('mousedown', mD)

function mD(event) {
  ismdwn = 1
  document.body.addEventListener('mousemove', mV)
  document.body.addEventListener('mouseup', end)
}

function mV(event) {
  if (ismdwn === 1) {
    pan1.style.flexBasis = event.clientX + "px"
  } else {
    end()
  }
}
const end = (e) => {
  ismdwn = 0
  document.body.removeEventListener('mouseup', end)
  rpanrResize.removeEventListener('mousemove', mV)
}
```

```
div {
  display: flex;
  border: 1px black solid;
  width: 100%;
  height: 200px;
}

#pan1 {
  flex-grow: 1;
  flex-shrink: 0;
  flex-basis: 50%; // initial status
}

#pan2 {
  flex-grow: 0;
  flex-shrink: 1;
  overflow-x: auto;
}

#rpanrResize {
  flex-grow: 0;
  flex-shrink: 0;
  background: #1b1b51;
  width: 0.2rem;
  cursor: col-resize;
  margin: 0 0 0 auto;
}
```

```
<div>
  <div id="pan1">MENU</div>
  <div id="rpanrResize">&nbsp;</div>
  <div id="pan2">BODY</div>
</div>
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-09-27T12:10:46.923

我为它编写了简单的代码，没有任何第三方库。此代码仅适用于水平拆分器（垂直相同）。

```
function onload()
{
    dragElement( document.getElementById("separator"), "H" );
}

// This function is used for dragging and moving
function dragElement( element, direction, handler )
{
  // Two variables for tracking positions of the cursor
  const drag = { x : 0, y : 0 };
  const delta = { x : 0, y : 0 };
  /* If present, the handler is where you move the DIV from
     otherwise, move the DIV from anywhere inside the DIV */
  handler ? ( handler.onmousedown = dragMouseDown ): ( element.onmousedown = dragMouseDown );

  // A function that will be called whenever the down event of the mouse is raised
  function dragMouseDown( e )
  {
    drag.x = e.clientX;
    drag.y = e.clientY;
    document.onmousemove = onMouseMove;
    document.onmouseup = () => { document.onmousemove = document.onmouseup = null; }
  }

  // A function that will be called whenever the up event of the mouse is raised
  function onMouseMove( e )
  {
    const currentX = e.clientX;
    const currentY = e.clientY;

    delta.x = currentX - drag.x;
    delta.y = currentY - drag.y;

    const offsetLeft = element.offsetLeft;
    const offsetTop = element.offsetTop;

    const first = document.getElementById("first");
    const second = document.getElementById("second");
    let firstWidth = first.offsetWidth;
    let secondWidth = second.offsetWidth;
    if (direction === "H" ) // Horizontal
    {
        element.style.left = offsetLeft + delta.x + "px";
        firstWidth += delta.x;
        secondWidth -= delta.x;
    }
    drag.x = currentX;
    drag.y = currentY;
    first.style.width = firstWidth + "px";
    second.style.width = secondWidth + "px";
  }
}
```

```
.splitter {
    width: 500px;
    height: 100px;
    display: flex;
}

#separator {
    cursor: col-resize;
    background: url(https://raw.githubusercontent.com/RickStrahl/jquery-resizable/master/assets/vsizegrip.png) center center no-repeat #535353;
    width: 10px;
    height: 100px;
    min-width: 10px;
}

#first {
    background-color: green;
    width: 100px;
    height: 100px;
    min-width: 10px;
}

#second {
    background-color: red;
    width: 390px;
    height: 100px;
    min-width: 10px;
}
```

```
<html>

    <head>
        <link rel="stylesheet" href="T10-Splitter.css">
        <script src="T10-Splitter.js"></script>
    </head>

    <body onload="onload()">
        <div class="splitter">
            <div id="first"></div>
            <div id="separator"></div>
            <div id="second"></div>
        </div>
    </body>

</html>
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-11-20T12:46:06.943

这是我使用[Flexbox](https://en.wikipedia.org/wiki/CSS_Flexible_Box_Layout)的轻量级原生 JavaScript 方法：

[http://codepen.io/lingtalfi/pen/zoNeJp](http://codepen.io/lingtalfi/pen/zoNeJp)

在Google Chrome 54, Firefox 50, Safari 10 测试成功，不知道其他浏览器。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.rawgit.com/lingtalfi/simpledrag/master/simpledrag.js"></script>

    <style type="text/css">

        html, body {
            height: 100%;
        }

        .panes-container {
            display: flex;
            width: 100%;
            overflow: hidden;
        }

        .left-pane {
            width: 18%;
            background: #ccc;
        }

        .panes-separator {
            width: 2%;
            background: red;
            position: relative;
            cursor: col-resize;
        }

        .right-pane {
            flex: auto;
            background: #eee;
        }

        .panes-container,
        .panes-separator,
        .left-pane,
        .right-pane {
            margin: 0;
            padding: 0;
            height: 100%;
        }

    </style>

</head>

<body>

<div class="panes-container">
    <div class="left-pane" id="left-pane">
        <p>I'm the left pane</p>
        <ul>
            <li><a href="#">Item 1</a></li>
            <li><a href="#">Item 2</a></li>
            <li><a href="#">Item 3</a></li>
        </ul>
    </div>
    <div class="panes-separator" id="panes-separator"></div>
    <div class="right-pane" id="right-pane">
        <p>And I'm the right pane</p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. A accusantium at cum cupiditate dolorum, eius eum
            eveniet facilis illum maiores molestiae necessitatibus optio possimus sequi sunt, vel voluptate. Asperiores,
            voluptate!
        </p>
    </div>
</div>

<script>

    var leftPane = document.getElementById('left-pane');
    var rightPane = document.getElementById('right-pane');
    var paneSep = document.getElementById('panes-separator');

    // The script below constrains the target to move horizontally between a left and a right virtual boundaries.
    // - the left limit is positioned at 10% of the screen width
    // - the right limit is positioned at 90% of the screen width
    var leftLimit = 10;
    var rightLimit = 90;

    paneSep.sdrag(function (el, pageX, startX, pageY, startY, fix) {

        fix.skipX = true;

        if (pageX < window.innerWidth * leftLimit / 100) {
            pageX = window.innerWidth * leftLimit / 100;
            fix.pageX = pageX;
        }
        if (pageX > window.innerWidth * rightLimit / 100) {
            pageX = window.innerWidth * rightLimit / 100;
            fix.pageX = pageX;
        }

        var cur = pageX / window.innerWidth * 100;
        if (cur < 0) {
            cur = 0;
        }
        if (cur > window.innerWidth) {
            cur = window.innerWidth;
        }

        var right = (100-cur-2);
        leftPane.style.width = cur + '%';
        rightPane.style.width = right + '%';

    }, null, 'horizontal');

</script>

</body>
</html> 
```

此 HTML 代码依赖于[simpledrag](https://github.com/lingtalfi/simpledrag) vanilla JavaScript 轻量级库（少于 60 行代码）。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-07-27T04:10:08.990

嗯，我在 CSS 3 中遇到了这个属性。这可能更容易使用。

*[CSS 调整大小属性](https://www.w3schools.com/cssref/css3_pr_resize.asp)*

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-08-30T10:31:28.567

在过去，您会使用框架来实现这一点。这种方法不太好有几个原因。请参阅 Reece 对*[为什么 HTML 框架不好？](https://stackoverflow.com/questions/3073706/why-frames-are-bad)*. 另请参阅 Jakob Nielson 的*[Why Frames Suck (Most of the Time)](http://www.useit.com/alertbox/9612.html)*。

一种*较*新的方法是使用内联框架。这也有优点和缺点：*[iframe 是否被认为是“不好的做法”？](https://stackoverflow.com/questions/362730/are-iframes-considered-bad-practice)*

更好的方法是使用**固定定位**。通过将导航内容（例如，您的示例中的收藏夹链接）放置在块元素（如 a `div`）中，然后应用`position:fixed`到该元素并设置 left、top 和 bottom 属性，如下所示：

```
#myNav {
    position: fixed;
    left: 0px;
    top: 0px;
    bottom: 0px;
    width: 200px;
} 
```

...您将在页面左侧实现垂直列，当用户滚动页面时该列不会移动。

页面上的其余内容不会“感觉到”这个 nav 元素的存在，所以它必须考虑到它占用的 200px 空间。您可以通过将内容的其余部分放在另一个 div 和设置中来做到这一点`margin-left:200px;`。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-03-27T20:40:47.957

您可以使用 jQuery UI 来完成，而无需其他 JavaScript 库。只需在`.resizable`resize 事件中添加一个函数来调整另一个 div 的宽度。

```
$("#left_pane").resizable({
  handles: 'e', // 'East' side of div draggable
  resize: function() {
    $("#right_pane").outerWidth( $("#container").innerWidth() - $("#left_pane").outerWidth() );
  }
}); 
```

这是完整的[JSFiddle](https://jsfiddle.net/silkfield/4gq7z45a/59/)。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-06-06T20:36:08.427

一种完全不同的方法是将事物放在网格中，例如 ui-grid 或 Kendo 的网格，并让列可调整大小。一个缺点是用户将无法调整行的大小，尽管可以通过编程方式设置行大小。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-12-18T10:06:09.830

许多人错过了**Barguast**于 15 年 2 月 27 日发布的这篇文章，其中展示了一个有趣的通用 flexbox 垂直和水平调整器。

看一看：[Flexbox 调整大小](https://stackoverflow.com/questions/28767221/flexbox-resizing)

Barguast 注意到“......它只处理使用 flex-grow 调整大小的项目。如果定义了 flex-shrink 或 flex-basis，那么计算根本就不起作用。”，他正在寻找更好的解决方案，所以这样做我。

这是他的代码供参考：

```
function manageResize(md, sizeProp, posProp)
{
    var r = md.target;

    var prev = r.previousElementSibling;
    var next = r.nextElementSibling;
    if (!prev || !next) {
        return;
    }

    md.preventDefault();

    var prevSize = prev[sizeProp];
    var nextSize = next[sizeProp];
    var sumSize = prevSize + nextSize;
    var prevGrow = Number(prev.style.flexGrow);
    var nextGrow = Number(next.style.flexGrow);
    var sumGrow = prevGrow + nextGrow;
    var lastPos = md[posProp];

    function onMouseMove(mm)
    {
        var pos = mm[posProp];
        var d = pos - lastPos;
        prevSize += d;
        nextSize -= d;
        if (prevSize < 0) {
            nextSize += prevSize;
            pos -= prevSize;
            prevSize = 0;
        }
        if (nextSize < 0) {
            prevSize += nextSize;
            pos += nextSize;
            nextSize = 0;
        }

        var prevGrowNew = sumGrow * (prevSize / sumSize);
        var nextGrowNew = sumGrow * (nextSize / sumSize);

        prev.style.flexGrow = prevGrowNew;
        next.style.flexGrow = nextGrowNew;

        lastPos = pos;
    }

    function onMouseUp(mu)
    {
        window.removeEventListener("mousemove", onMouseMove);
        window.removeEventListener("mouseup", onMouseUp);
    }

    window.addEventListener("mousemove", onMouseMove);
    window.addEventListener("mouseup", onMouseUp);
}

function setupResizerEvents()
{
    document.body.addEventListener("mousedown", function (md) {
        var target = md.target;
        if (target.nodeType !== 1 || target.tagName !== "FLEX-RESIZER") {
            return;
        }
        var parent = target.parentNode;
        var h = parent.classList.contains("h");
        var v = parent.classList.contains("v");
        if (h && v) {
            return;
        } else if (h) {
            manageResize(md, "scrollWidth", "pageX");
        } else if (v) {
            manageResize(md, "scrollHeight", "pageY");
        }
    });
}

setupResizerEvents();
```

```
flex {
    display: flex;
}

flex-item > flex {
    position: absolute;
    width: 100%;
    height: 100%;
}

flex.h {
    -ms-flex-direction: row;
    flex-direction: row;
}

flex.v {
    -ms-flex-direction: column;
    flex-direction: column;
}

flex-item {
    display: flex;
    position: relative;
    overflow: hidden;
}

flex > flex-resizer {
    -ms-flex: 0 0 8px;
    flex: 0 0 8px;
    background: white;
}

flex.h > flex-resizer {
    cursor: ew-resize;
}

flex.v > flex-resizer {
    cursor: ns-resize;
}
```

```
<body>
    <flex class="v" style="height: 500px">
        <flex-item style="flex: 1; background: red">Flex 1</flex-item>
        <flex-resizer></flex-resizer>
        <flex-item style="flex: 1; background: blue">
            <flex class="h">
                <flex-item style="flex: 1">Flex 2</flex-item>
                <flex-resizer></flex-resizer>
                <flex-item style="flex: 2; background: green">
                    <flex class="v">
                        <flex-item style="flex: 1; background: pink;">Flex 3</flex-item>
                        <flex-resizer></flex-resizer>
                        <flex-item style="flex: 1">
                            <flex class="h">
                                <flex-item style="flex: 1">Flex 4</flex-item>
                                <flex-resizer></flex-resizer>
                                <flex-item style="flex: 2; background: yellow">Flex 5</flex-item>
                                <flex-item style="flex: 2; background: yellow">Flex 6</flex-item>
                            </flex>
                        </flex-item>
                    </flex>
                </flex-item>
            </flex>
        </flex-item>
    </flex>
</body>
```

这是我的改进版本：

```
function manageResize(md, sizeProp, posProp) {
    var r = md.target;

    var prev = r.previousElementSibling;
    var next = r.nextElementSibling;
    if (!prev || !next) {
        return;
    }

    md.preventDefault();

    var prevSize = prev[sizeProp];
    var nextSize = next[sizeProp];
    var sumSize = prevSize + nextSize;
    var prevGrow = Number(prev.style.flexGrow);
    var nextGrow = Number(next.style.flexGrow);
    var sumGrow = prevGrow + nextGrow;
    var lastPos = md[posProp];

    function onMouseMove(mm) {
        var pos = mm[posProp];
        var d = pos - lastPos;
        prevSize += d;
        nextSize -= d;
        if (prevSize < 0) {
            nextSize += prevSize;
            pos -= prevSize;
            prevSize = 0;
        }
        if (nextSize < 0) {
            prevSize += nextSize;
            pos += nextSize;
            nextSize = 0;
        }

        var prevGrowNew = sumGrow * (prevSize / sumSize);
        var nextGrowNew = sumGrow * (nextSize / sumSize);

        prev.style.flexGrow = prevGrowNew;
        next.style.flexGrow = nextGrowNew;

        lastPos = pos;
    }

    function onMouseUp(mu) {
        // Change cursor to signal a state's change: stop resizing.
        const html = document.querySelector('html');
        html.style.cursor = 'default';

        if (posProp === 'pageX') {
            r.style.cursor = 'ew-resize'; 
        } else {
            r.style.cursor = 'ns-resize';
        }

        window.removeEventListener("mousemove", onMouseMove);
        window.removeEventListener("mouseup", onMouseUp);
    }

    window.addEventListener("mousemove", onMouseMove);
    window.addEventListener("mouseup", onMouseUp);
}

function setupResizerEvents() {
    document.body.addEventListener("mousedown", function (md) {

        // Used to avoid cursor's flickering
        const html = document.querySelector('html');

        var target = md.target;
        if (target.nodeType !== 1 || target.tagName !== "FLEX-RESIZER") {
            return;
        }
        var parent = target.parentNode;
        var h = parent.classList.contains("h");
        var v = parent.classList.contains("v");
        if (h && v) {
            return;
        } else if (h) {
            // Change cursor to signal a state's change: begin resizing on H.
            target.style.cursor = 'col-resize';
            html.style.cursor = 'col-resize'; // avoid cursor's flickering

            // use offsetWidth versus scrollWidth (and clientWidth) to avoid splitter's jump on resize when a flex-item content overflow (overflow: auto).
            manageResize(md, "offsetWidth", "pageX");

        } else if (v) {
            // Change cursor to signal a state's change: begin resizing on V.
            target.style.cursor = 'row-resize';
            html.style.cursor = 'row-resize'; // avoid cursor's flickering

            manageResize(md, "offsetHeight", "pageY");
        }
    });
}

setupResizerEvents();
```

```
body {
    /* margin:0; */
    border: 10px solid #aaa;
}

flex {
    display: flex;
    overflow: hidden;
}

/* flex-item > flex {
    position: absolute;
    width: 100%;
    height: 100%;
} */

flex.h {
    flex-direction: row;
}

flex.v {
    flex-direction: column;
}

flex-item {
    /* display: flex; */
    /* position: relative; */
    /* overflow: hidden; */
    overflow: auto;
}

flex > flex-resizer {
    flex: 0 0 10px;
    /* background: white; */
    background-color: #aaa;
    background-repeat: no-repeat;
    background-position: center;
}

flex.h > flex-resizer {
    cursor: ew-resize;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='30'><path d='M2 0 v30 M5 0 v30 M8 0 v30' fill='none' stroke='black'/></svg>");
}

flex.v > flex-resizer {
    cursor: ns-resize;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='30' height='10'><path d='M0 2 h30 M0 5 h30 M0 8 h30' fill='none' stroke='black'/></svg>");
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>flex-splitter</title>
    <link rel="stylesheet" href="./src/styles.css">
    <script src="./src/index.js" defer></script>
</head>

<body>
    <flex class="v" style="flex: 1; height: 500px;">
        <flex-item style="flex: 1;">Flex 1</flex-item>
        <flex-resizer></flex-resizer>
        <flex class="h" style="flex: 1;">
            <flex-item style="flex: 1; background-color: aqua;">

      <!-- 
        The next section is an example to test the splitter when there is content inside a flex-item
      -->
        <section>
                    <div>
                        <label for="CursorCoor" style="display: block;">showCursorCoor: </label>
                        <textarea id="CursorCoor" rows="6" cols="50" wrap="soft" readonly></textarea>
                    </div>

                    <br />

                    <div>
                        <label for="boxInfo" style="display: block;">showBoxInfo: </label>
                        <textarea id="boxInfo" rows="6" cols="50" wrap="soft" readonly></textarea>
                    </div>
                </section>

      </flex-item>
            <flex-resizer></flex-resizer>
            <flex class="v" style="flex: 2; ">
                <flex-item style="flex: 1; background: pink;">Flex 3</flex-item>
                <flex-resizer></flex-resizer>
                <flex class="h" style="flex: 1">
                    <flex-item style="flex: 1; background: green;">Flex 4</flex-item>
                    <flex-resizer></flex-resizer>
                    <flex-item style="flex: 2;">Flex 5</flex-item>
                    <!-- <flex-resizer></flex-resizer> -->
                    <flex-item style="flex: 3; background: darkorange;">Flex 6</flex-item>
                </flex>
            </flex>
        </flex>
    </flex>

</body>
</html>
```

或者在 Codesandbox 上查看：

[![编辑悲伤蝴蝶 1fwo4](../Images/d24ed1d187fba0d9cda58f0f602bd41e.png)](https://codesandbox.io/s/sad-butterfly-1fwo4?fontsize=14&hidenavigation=1&theme=dark)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-08-30T10:23:38.473

您可以使用绝对定位的固定定位。例如，此 CSS 将停靠在页面左侧的 2em-bar：

```
body {
    padding-left: 2.5em;
}
body > #bar {
    position:fixed;
    top:0; left:0;
    width: 2em;
    height: 100%;
    border-right: 2px solid #55F; background: #ddd;
} 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/eD4Z3/)）

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-10-25T09:52:15.450

没有第三方库的 Angular 版本（基于[personal_cloud的回答](https://stackoverflow.com/questions/12194469/best-way-to-do-a-split-pane-in-html/55202728#55202728)）：

```
import { Component, Renderer2, ViewChild, ElementRef, AfterViewInit, OnDestroy } from '@angular/core';

@Component({
  selector: 'my-app',
  templateUrl: './app.component.html',
  styleUrls: [ './app.component.css' ]
})

export class AppComponent implements AfterViewInit, OnDestroy {

  @ViewChild('leftPanel', {static: true})
  leftPanelElement: ElementRef;

  @ViewChild('rightPanel', {static: true})
  rightPanelElement: ElementRef;

  @ViewChild('separator', {static: true})
  separatorElement: ElementRef;

  private separatorMouseDownFunc: Function;
  private documentMouseMoveFunc: Function;
  private documentMouseUpFunc: Function;
  private documentSelectStartFunc: Function;

  private mouseDownInfo: any;

  constructor(private renderer: Renderer2) {
  }

  ngAfterViewInit() {

    // Init page separator
    this.separatorMouseDownFunc = this.renderer.listen(this.separatorElement.nativeElement, 'mousedown', e => {

      this.mouseDownInfo = {
        e: e,
        offsetLeft: this.separatorElement.nativeElement.offsetLeft,
        leftWidth: this.leftPanelElement.nativeElement.offsetWidth,
        rightWidth: this.rightPanelElement.nativeElement.offsetWidth
      };

      this.documentMouseMoveFunc = this.renderer.listen('document', 'mousemove', e => {
        let deltaX = e.clientX - this.mouseDownInfo.e.x;
        // set min and max width for left panel here
        const minLeftSize = 30;
        const maxLeftSize =  (this.mouseDownInfo.leftWidth + this.mouseDownInfo.rightWidth + 5) - 30;

        deltaX = Math.min(Math.max(deltaX, minLeftSize - this.mouseDownInfo.leftWidth), maxLeftSize - this.mouseDownInfo.leftWidth);

        this.leftPanelElement.nativeElement.style.width = this.mouseDownInfo.leftWidth + deltaX + 'px';
      });

      this.documentSelectStartFunc = this.renderer.listen('document', 'selectstart', e => {
        e.preventDefault();
      });

      this.documentMouseUpFunc = this.renderer.listen('document', 'mouseup', e => {
        this.documentMouseMoveFunc();
        this.documentSelectStartFunc();
        this.documentMouseUpFunc();
      });
    });
  }

  ngOnDestroy() {
    if (this.separatorMouseDownFunc) {
      this.separatorMouseDownFunc();
    }

    if (this.documentMouseMoveFunc) {
      this.documentMouseMoveFunc();
    }

    if (this.documentMouseUpFunc) {
      this.documentMouseUpFunc();
    }

    if (this.documentSelectStartFunc()) {
      this.documentSelectStartFunc();
    }
  }
}
```

```
.main {
  display: flex;
  height: 400px;
}

.left {
  width: calc(50% - 5px);
  background-color: rgba(0, 0, 0, 0.1);
}

.right {
  flex: auto;
  background-color: rgba(0, 0, 0, 0.2);
}

.separator {
  width: 5px;
  background-color: red;
  cursor: col-resize;
}
```

```
<div class="main">
  <div class="left" #leftPanel></div>
  <div class="separator" #separator></div>
  <div class="right" #rightPanel></div>
</div>
```

[在 Stackblitz 上运行示例](https://stackblitz.com/edit/angular-rvia1b)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-03T08:31:24.743

我找到了一个工作拆分器[http://www.dreamchain.com/split-pane/](http://www.dreamchain.com/split-pane/)，它适用于 jQuery v1.9。请注意，我必须添加以下 CSS 代码才能使其与固定`bootstrap`导航栏一起使用。

```
fixed-left {
    position: absolute !important; /* to override relative */
    height: auto !important;
    top: 55px; /* Fixed navbar height */
    bottom: 0px;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-10-31T16:19:43.087

一个很好的库是 Shield UI - 你可以看看他们灵活的[Splitter 小部件](http://demos.shieldui.com/web/splitter/basic-usage)和框架提供的其他强大组件。

# jquery - 容器中的多个图像，带有放大缩小按钮、下一个上一个按钮、图像计数与 Google Pdf Viewer 相同

> ID：12194470
> 
> 赞同：0
> 
> 时间：2012-08-30T10:08:09.890
> 
> 标签：jquery, asp.net

我正在寻找一个带有放大和缩小按钮、下一个上一个按钮、具有总计数的活动图像的图像容器，与 Google Pdf Viewer 相同...

Jquery 中是否有类似的容器？欢迎评论：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:17:20.213

Well Guyz .. 我找到了一个 Jquery 库“iViewer” 这是链接：[点击这里](http://test.dpetroff.ru/jquery.iviewer/test/)..根据我的情况很好。

# java - JDialog - 如何设置固定宽度和可变高度？

> ID：12194471
> 
> 赞同：3
> 
> 时间：2012-08-30T10:08:12.600
> 
> 标签：java, swing

我有一个`JDialog`对象，很简单，**必须为 200 像素宽**，无论其内容如何。

我需要能够**动态调整高度**，以始终确保显示所有内容。我该怎么做？

*   我已经尝试过覆盖`JDialog.getPreferredSize()`方法，但我不知道要为高度值添加什么。
*   我试过检查`main`JPanel`isValid()`和是否`isShowing()`都返回 true，只要 Panel 的一部分实际上是可见的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:17:52.257

首选大小仅适用于布局管理器，它们不能限制窗口大小。

窗口对等体有一种强制最小尺寸的方法，因此效果很好，但除了监听调整大小并重置为所需大小之外，没有什么可以用于最大尺寸：

```
 setMinimumSize(new Dimension(200, Integer.MAX_VALUE));
    addComponentListener(new ComponentAdapter() {
        @Override
        public void componentResized(ComponentEvent e) {
            Dimension size = getSize();
            size.width = 200;
            setSize(size);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:16:32.237

覆盖时`getPreferredSize()`，您可以向超类询问高度：

```
public Dimension getPreferredSize() {
    Dimension superPref = super.getPreferredSize();
    return new Dimension(200, superPref.getHeight());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-25T23:14:47.130

如果您使用的是 JDialog，则可以`getPreferredSize`像这样覆盖该方法：

```
@Override
public Dimension getPreferredSize() {
    return Toolkit.getDefaultToolkit().getScreenSize();
} 
```

或明确指定维度：

```
@Override
public Dimension getPreferredSize() {
    return new Dimension(width, height);
} 
```

# jquery - 谷歌地图在 jquery 选项卡中未正确显示

> ID：12194476
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:08:29.063
> 
> 标签：jquery, jquery-ui, google-maps, google-maps-api-3

我在 jquery 选项卡中有一个谷歌地图。问题是当我切换到包含地图的选项卡时，我的地图显示不正确。看图片：

![在此处输入图像描述](../Images/8037a044f01a842bd0205f8c1899d44c.png)

调整窗口大小后，地图渲染正常。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:00:41.590

调用 google.maps.event.trigger(map, 'resize')

# android - 如何在phonegap中调用自定义意图页面？

> ID：12194478
> 
> 赞同：2
> 
> 时间：2012-08-30T10:08:43.363
> 
> 标签：android, cordova, phonegap-plugins

```
Intent intent = new Intent(this, com.xxx.MapRouteActivity.class);
this.ctx.startActivity(intent); 
```

这不起作用`Phonegap`，我调用了插件执行方法，但它是强制关闭应用程序，请任何人都可以告诉如何调用自定义意图以及从哪里调用这个。

我在 logcat 中遇到了这样的错误

```
E/AndroidRuntime(870): FATAL EXCEPTION: Thread-22
08-30 15:15:01.463: E/AndroidRuntime(870): java.lang.NoClassDefFoundError: com.camden.intenttest.MapRouteActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:35:41.353

尝试使用而不是：

```
Intent intent = new Intent(this, com.xxx.MapRouteActivity.class);
this.ctx.startActivity(intent); 
```

这个：

```
Intent intent = new Intent(NameOfTheCurrentActivity.this, com.xxx.MapRouteActivity.class);
startActivity(intent); 
```

喜欢：

```
Intent in = new Intent(FirstActivity.this, SecondActivity.class);
startActivity(in); 
```

# java - 在 Java Mail API 中将“消息成功传递”到错误的邮件地址

> ID：12194480
> 
> 赞同：3
> 
> 时间：2012-08-30T10:08:56.733
> 
> 标签：java, jakarta-mail

我已经开始使用 JAVA 邮件 API 实现一个邮件模块。我正在使用 SMTPMessage，以便我可以获取邮件的传递状态。问题是正在获得成功的交付报告`wrong mail addresses`

这就是我为发送消息所做的

```
SMTPMessage smtpMsg=new SMTPMessage(message);
            smtpMsg.setReturnOption(SMTPMessage.RETURN_HDRS);
            smtpMsg.setNotifyOptions(SMTPMessage.NOTIFY_SUCCESS |SMTPMessage.NOTIFY_FAILURE);
            Transport transport = session.getTransport("smtp");
            //attach the listeners for the connection and transmission
            transport.addConnectionListener(this);
            transport.addTransportListener(this);
            transport.connect();
            //connect to the server and send the message
            transport.sendMessage(smtpMsg, smtpMsg.getAllRecipients()); 
```

自从我的班级实施以来`TransportListener,ConnectionListener`，我将听众附加为

```
public void opened(ConnectionEvent e) {
    System.out.println("Connection opened");
    }
    public void disconnected(ConnectionEvent e) {
    System.out.println("Connection disconnected");
    }
    public void closed(ConnectionEvent e) {
    System.out.println("Connection closed");
    }

    public void messageDelivered(TransportEvent e) {
        System.out.println("Message delivered for:");
        if (e != null) {
            Address[] a = e.getValidSentAddresses();
        if (a != null && a.length > 0) {
            for (int i = 0; i < a.length; i++) {
                System.out.println(((InternetAddress) a[i]).getAddress());
            }
        }
        System.out.println("");
        }
    }

    public void messageNotDelivered(TransportEvent e) {
        System.out.println("Message not delivered for:");
        if (e != null) {
            Address[] a = e.getValidUnsentAddresses();
        if (a != null && a.length > 0) {
            for (int i = 0; i < a.length; i++) {
                System.out.println(((InternetAddress) a[i]).getAddress());
            }
        }
        System.out.println("");
        }
    }

    public void messagePartiallyDelivered(TransportEvent e) {
        System.out.println("These addresses are invalid:");
        if (e != null) {
            Address[] a = e.getInvalidAddresses();
        if (a != null && a.length > 0) {
            for (int i = 0; i < a.length; i++) {
                System.out.println(((InternetAddress) a[i]).getAddress());
            }
        }
        System.out.println("");
        }
    } 
```

这是在 oe 的博客中提出的。这里有什么问题？对于错误的邮件 IDS，我如何才能将传递状态设为 false

这就是我初始化消息的方式

```
MimeMessage message=new MimeMessage(session);
        //set the mail sender address
        message.setFrom(new InternetAddress(userName));
        //set the recipient addresses
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(toAddr));
        //set subject of the mail
        message.setSubject(subject);
        //Set the body of the message
        message.setText(body); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:36:05.493

[http://www.oracle.com/technetwork/java/javamail/faq/index.html#badaddr](http://www.oracle.com/technetwork/java/javamail/faq/index.html#badaddr)

# c# - 如何匹配和提取空格之间的所有内容

> ID：12194486
> 
> 赞同：1
> 
> 时间：2012-08-30T10:09:18.517
> 
> 标签：c#, .net, regex

现在我有一个像这样的长字符串

```
{"" ,"" ,"" ,"" } , {"" ,"" ,"" ,"" } 
```

`" "`甚至Unicode字符之间也可能有任何东西。我用过这样的东西

```
string pattern = "\"([\u0000-\uffff]+)+\""; 
```

但它只是返回所有内容而不是一一返回。我使用了 Groups 和 Capture 属性，Capture Collection 包含所有匹配的信息，但我仍然无法提取我需要的内容。我需要`""`一一提取两者之间的所有内容。我不需要提取`{ } " "`每个`" "`.

所以在我的情况下应该返回8组，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:17:01.063

使用非贪婪捕获

```
string pattern = "\"([\u0000-\uffff])*?\""; 
```

然后使用系统 linq 得到你的结果......

```
var matches=Regex.Matches(input,pattern).OfType<Match>();
var results=matches.Select(g=>g.Groups[1].Value).ToArray(); 
```

结果现在将是一个包含所有匹配项的 String[]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:10:48.693

```
string pattern = "\"([\u0000-\uffff])+\""; 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:27:44.430

如果 pattern`","`是可靠的分隔符（不能显示为文本）并且大括号和引号之间没有空格，则可以使用以下方法：

```
 string input = @"{""a"",""b"","" my name is ""vul"" and it's nice "",""""},{"""","""","""",""""}";

        input = input
                .Replace("{", String.Empty)
                .Replace("}", String.Empty);

        var strings = input.Split(new string[] {@""","""}, StringSplitOptions.None);

        strings[0] = strings[0].TrimStart('"');
        strings[strings.Length - 1] = strings[strings.Length - 1].TrimEnd('"'); 
```

# oop - 私有构造函数还是私有函数？

> ID：12194498
> 
> 赞同：0
> 
> 时间：2012-08-30T10:09:58.093
> 
> 标签：oop, constructor

我有一个有两个构造函数的类，它们共享一些共同的功能。它们也有自己特定的功能。

我正在考虑创建一个私有方法并从两个构造函数中调用它。这个方法应该是私有构造函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:12:16.540

如果此方法是常见的*构造函数*行为 - 然后是 IMO - 是的，它将使代码更具可读性。

一个常见的用法是例如（java语法）：

```
MyClass() { 
   this(SOME_DEFAULT_VALUE); 
} 
MyClass(int x) { ... } 
```

有时您*必须*将此方法编写为构造函数，例如（再次是 java）它设置了一个`final`字段，该字段不能在方法中修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:17:25.423

你的两个构造函数都需要一个方法，我猜之前（或之后）已经执行了不同的操作。它本身不必是构造函数。它可以，而且在我看来应该（至少据我从你的问题中可以理解），通过一种私人方法。

# html - 等轴测图的平滑拖动滚动 - Html5

> ID：12194500
> 
> 赞同：2
> 
> 时间：2012-08-30T10:10:03.553
> 
> 标签：html, coffeescript, isometric

我已经实现了一个基本的等距平铺引擎，可以通过用鼠标拖动地图来进行探索。请看下面的小提琴并拖走：

[http://jsfiddle.net/kHydg/14/](http://jsfiddle.net/kHydg/14/)

分解的代码是（CoffeeScript）：

**绘图功能**

```
draw = ->
  requestAnimFrame draw
  canvas.width = canvas.width

  for row in [0..width]
    for col in [0..height]
      xpos = (row - col) * tileHeight + width
      xpos += (canvas.width / 2) - (tileWidth / 2) + scrollPosition.x
      ypos = (row + col) * (tileHeight / 2) + height + scrollPosition.y
      context.drawImage(defaultTile, Math.round(xpos), Math.round(ypos), tileWidth, tileHeight) 
```

**鼠标拖动滚动控制**

```
scrollPosition =
  x: 0
  y: 0

dragHelper = 
  active: false
  x: 0
  y: 0

window.addEventListener 'mousedown', (e) =>
  handleMouseDown(e)
, false

window.addEventListener 'mousemove', (e) =>
  handleDrag(e)
, false

window.addEventListener 'mouseup', (e) =>
  handleMouseUp(e)
, false

handleDrag = (e) =>
  e.preventDefault()
  if dragHelper.active
    x = e.clientX
    y = e.clientY
    scrollPosition.x -= Math.round((dragHelper.x - x) / 28)
    scrollPosition.y -= Math.round((dragHelper.y - y) / 28)

handleMouseUp = (e) =>
  e.preventDefault()
  dragHelper.active = false

handleMouseDown = (e) =>
  e.preventDefault()
  x = e.clientX
  y = e.clientY
  dragHelper.active = true
  dragHelper.x = x
  dragHelper.y = y 
```

**问题**

正如您从小提琴中看到的那样，拖动动作还可以，但并不完美。我将如何更改代码以使拖动动作更流畅？我想要的是您单击的地图点，以便在拖动时保持在鼠标点下方；和他们在这里做的一样：http: [//craftyjs.com/demos/isometric/](http://craftyjs.com/demos/isometric/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:48:18.460

很多图书馆都可以帮助解决这样的事情。出于几个原因，我建议使用 d3 的数据操作能力来提供帮助。

首先，在 d3 中，有一个拖动行为，其中存储了对象的原点，并在拖动开始时计算相对于原点的鼠标位置。然后，您可以使用鼠标的绝对位置来确定对象应该在哪里，并避免在使用相对更改时发生的增量错误 - 当您开始四舍五入时会变得更糟，如上所述。

```
dragMap = (d) ->  
  d.x = d3.event.x # d3.event.x, y are computed relative to the origin for you!
  d.y = d3.event.y 

dragBehavior = d3.behavior.drag()
  .origin(Object) # equivalent to (d) -> d 
  .on("drag", dragMap)

d3.select(canvas)
  .datum(x: 0, y: 0)  # Load your canvas with an arbitary origin
  .call(dragBehavior) # And now you can drag it! 
```

其次，通过使用 d3 的线性或其他数字比例，您可以避免自己进行典型的绘图数学，这很容易出错，尤其是当您必须在所有地方都这样做时。在将拖动缩放 28 之前。在我当前的方法中，这是不必要的，但是如果您将绘图算法更改为使用平铺而不是像素，您可以更改此比例，它会自动将鼠标像素转换为平铺大小。

```
pixelToTile = d3.scale.linear()
  .domain([0, 1])
  .range([0, 1]) 
```

这是您在 d3 帮助下重新完成的小提琴。没有 dragHelper 和所有必要的无关代码。除了用于防止抗锯齿的画布绘制之外，所有 Math.round 调用也是不必要的。

[http://jsfiddle.net/kHydg/23/](http://jsfiddle.net/kHydg/23/)

这不是更短更甜吗？

PS Isometric 实时浏览器游戏是一个很棒的主意。当我有时间的时候，我一定会尝试做一个。

# django - django + nginx - 自动启动 django 服务器

> ID：12194502
> 
> 赞同：0
> 
> 时间：2012-08-30T10:10:20.817
> 
> 标签：django, nginx

我通过 unix socket 使用 nginx+fastcgi 到我的 django 站点。我正在使用以下命令来启动 django 站点：

```
python manage.py runfcgi socket=/var/run/fcgi.django.sock method=prefork daemonize=true 
```

如何在重新启动时自动启动，或者有更好的方法来启动 django 服务器？

另外，我正在做的最佳实践是什么？我对 python 服务器没有太多经验，所以我最关心的是可靠性/性能。任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:19:26.953

要自动启动这样的流程，您需要使用像[supervisor](http://supervisord.org)这样的流程管理器。然后，Supervisor 将在系统重新启动时自动启动您的流程，并为您提供一个管理自定义流程的中心位置。

大多数人更喜欢[django +](http://www.jeremybowers.com/blog/post/5/django-nginx-and-uwsgi-production-serving-millions-page-views/) nginx + uwsgi或[django + nginx + gunicorn](http://senko.net/en/django-nginx-gunicorn/)堆栈。

# java - Spring、NotReadablePropertyException 和 Glassfish 版本

> ID：12194503
> 
> 赞同：7
> 
> 时间：2012-08-30T10:10:27.030
> 
> 标签：java, spring-mvc, glassfish

我正在开发一个使用 Spring MVC 的 Web 应用程序。

它在 Glassfish 3.0.1 上运行良好，但在迁移到 Glassfish 3.1 时，它开始表现得很奇怪。有些页面只显示了一部分，或者根本没有显示，并且在日志中，有很多这种类型的消息：

```
 [#|2012-08-30T11:50:17.582+0200|WARNING|glassfish3.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=69;_ThreadName=Thread-1;|StandardWrapperValve[SpringServlet]: PWC1406: Servlet.service() for servlet SpringServlet threw exception
    org.springframework.beans.NotReadablePropertyException: Invalid property 'something' of bean class [com.something.Something]: Bean property 'something' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
        at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:729)
        at org.springframework.beans.BeanWrapperImpl.getNestedBeanWrapper(BeanWrapperImpl.java:576)
        at org.springframework.beans.BeanWrapperImpl.getBeanWrapperForPropertyPath(BeanWrapperImpl.java:553)
        at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:719)
        at org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:99)
        at org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:226)
        at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
        at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
        at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
        at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
        at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:127)
        at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
        at org.springframework.web.servlet.tags.form.TextareaTag.writeTagContent(TextareaTag.java:95)
        at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
        at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) 
```

错误消息并非不正确，因为相关属性没有设置方法（通过构造函数获取其值）。但就像我说的，在使用 Glassfish 3.0.1 时这不是问题，只有在带有 Glassfish 3.1 的新服务器上使用它时才会出现问题。

有谁知道 Glassfish 版本中是否有可能导致这种情况的东西？还是新服务器上缺少某种配置？

一些代码：

控制器：

```
@ModelAttribute
public SomethingContainer retriveSomethingContainer(@PathVariable final long id {
    return somethingContainerDao.retrieveSomethingContainer(id);       
}

@InitBinder("somethingContainer")
public void initBinderForSomething(final WebDataBinder binder) {
    binder.setAllowedFields(new String[] {
        "something.title",
        "something.description",
    });
} 
```

东西容器：

```
@Embedded
private final Something something = new Something();

public Something getSomething() {
    return something;
}
//no setter

public String getDescription() {
    return something.getDescription();
} 
```

更新：

重新启动 Glassfish 实际上可以暂时解决问题。我怀疑这可能与加载自定义活页夹有关，我们遇到了一些内存不足错误的问题，我认为这与它有关，但已解决但未解决此问题。

更新 2：

在 3.0.1 服务器上，jvm 参数之一是 -client。在 3.1-server 上，它是 -server。我们将其更改为 -client，这使得错误的频率下降了很多，使用 -server 每隔一天发生一次，使用 -client 需要 2 周的时间。

更新 3：

有关服务器的一些信息（如果需要，可以添加更多信息..）

Server1（工作的）：

```
Windows Server 2003
Java jdk 6 build 35
Glassfish 3.0.1 build 22
-xmx 1024m 
```

Server2（有问题的那个）：

```
Windows Server 2008 64-bit
Java jdk 6 build 31
Glassfish 3.1 build 43
-xmx 1088m
-xms 1088m 
```

我们使用的是 Spring 3.1.0 版。

更新 4：

我通过将 jsp 中的字段重命名为模型属性中不存在的内容来重新创建错误。

但是，更重要的是，我注意到了一点：系统找不到 getter 的字段通常是模型属性中引用的超类的字段。继续我的例子，SomthingContainer 真的是这样的：

```
public class SuperSomethingContainer {
    [...]
    private Something something;
    public Something getSomething() {
        return something;
    }
}

public class SomethingContainer extends SuperSomethingContainer {
    [...]
} 
```

控制器中的引用保持原样，因此它引用了相关对象的超类中的字段。

更新 5：

发生错误后，我尝试使用调试器连接到生产服务器。我在返回错误对象的控制器方法的返回语句上设置了一个断点，并尝试查看当时是否可以访问有问题的字段。我可以，所以问题必须出在 Spring MVC/生成的 jsp 类中。

（此外，错误字段的类型为“someobject.something[0].somethingelse[0]”，但是当 somethingelse 列表为空时，没有错误！对我来说，这意味着它不能查找列表的获取方法（？））

更新 6：

似乎问题与从 jsps 生成 Java 类有关。我们在部署的时候没有使用预编译jsps，所以在第一次使用的时候就编译好了。第一次访问页面并编译jsp时会出现问题。我也注意到一旦出现问题，编译后的jsps都会报错。我保留了一些问题生成的 java 文件，下次重新启动时，我会将它们与工作文件进行比较。越来越近 ：）

更新 7：

将编译后的jsp java文件中导致错误的文件与没有错误的jsp文件进行比较，没有区别。所以这有点忽略了。

所以，我现在知道离开控制器的 Java 对象没问题（用调试器检查），从 jsp 生成的 java 类也没问题。所以它一定是介于两者之间的东西，现在我需要找出...

更新 8：

又一轮调试，把问题缩小了一些。事实证明，spring 对属于各种类的属性进行了一些缓存。在org.springframework.beans.BeanWrapperImpl方法getPropertyValue中，有以下内容：

```
private Object getPropertyValue(PropertyTokenHolder tokens) throws BeansException {
    String propertyName = tokens.canonicalName;
    String actualName = tokens.actualName;
    PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName);
    if (pd == null || pd.getReadMethod() == null) {
        throw new NotReadablePropertyException(getRootClass(), this.nestedPath + propertyName);
    } 
```

问题是 cachedIntrospectionResults 不包含有问题的属性，但它包含该类的所有其他属性。将需要更多地挖掘以找出它丢失的原因，是否从一开始就丢失了，或者它是否在沿线的某个地方丢失了。

另外，我注意到缺少的属性是那些没有设置器的属性，只有获取器。而且，它似乎是上下文感知的，如堆栈跟踪所示。因此，在访问一个页面时没有找到属性并不意味着在访问另一个页面时它不可用。

更新 9：

改天，更多调试。确实发现了一些好东西。前面代码块中的 getCachedIntrospectionResults() 调用最终调用了 CachedIntrospectionResults#forClass(theClassInQuestion)。这返回了一个 CachedIntrospectionResults 对象，其中包含的属性远非预期的所有属性（21 个中的 11 个）。进入 forClass 方法，我发现：

```
static CachedIntrospectionResults forClass(Class beanClass) throws BeansException {
    CachedIntrospectionResults results;
    Object value = classCache.get(beanClass);
    if (value instanceof Reference) {
        Reference ref = (Reference) value;
        results = (CachedIntrospectionResults) ref.get();
    }
    else {
        results = (CachedIntrospectionResults) value;
    }
    if (results == null) {
    //build the CachedIntrospectionResults, store it in classCache and return it. 
```

原来返回的 CachedIntrospectionResults 是通过 classCache.get(beanClass) 找到的。因此，存储在 classCache 中的内容已损坏/未包含应有的所有内容。我在 classCache.get(beanClass)-line 上放了一个断点，并尝试通过调试器运行它：

> classCache.put(beanClass, null);

当允许该方法完成并重建 CachedIntrospectionResults 时，事情又开始工作了。因此，存储在 classCache 中的内容与如果允许重建它将会和应该创建的内容不同步。这是否是由于第一次构建时出现问题，或者 classCache 在我目前不知道的某处损坏。

我开始怀疑这与类加载器有关，因为我以前遇到过问题，因为更新 Glassfish 时类加载器的工作方式发生了变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:16:02.457

可能的原因不止一个。我不确定实际情况，但我可以为您提供找出问题的方法

**第 1 步：**在***服务器 2机器上在******Glassfish 3.0.1 build 22***上部署应用程序，现在如果它在服务器 2 机器上工作正常，则意味着 Glassfish 的库可能存在问题，以下可能是导致此问题的原因

1.  ***Glassfish 3.1 build 43***中缺少的任何库都在***Glassfish 3.0.1 build 22***中。您可以通过将所有库从工作 Glassfish 服务器复制到新服务器来解决。
2.  我的 Glassfish 库与春季版本冲突。[*我在 tomcat 上遇到过类似的问题，当我将 spring 库从 3.0.1 替换为 3.0.3 时，它对我有用]*，所以用最新的替换你的 spring 库。

**第 2 步：** 如果第 1 步的结果是应用程序未在 Glassfish 3.0.1 build 22 上的服务器 2 机器上运行，则可能有以下原因

1.  如果您粘贴在***java lib***上的任何库未包含在此服务器计算机中或具有不同的版本。

2.  ***在类路径***上设置或使用服务器 1 上的任何***环境变量***的任何文件夹，要么在服务器 2 上不存在，要么没有 jars 或具有不同版本的 jars

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:44:48.630

我让我的一位同事调查了这个错误，他能够在单元测试中重新创建它。这是通过调用为类构建 CachedIntroSpectionResults 的方法完成的，同时通过向内存添加字符串来对 jvm 施加压力，并且内存设置非常低。这种方法使它失败了 20/30000 次。

至于它的原因，我只得到了口头解释，所以我没有详细说明，但大致是这样的：Java有它自己的introspection-results，这些都是Spring封装的。问题是 java-results 使用了软引用，这使得它们容易被垃圾回收。因此，当 Spring 在垃圾收集器运行的同时围绕这些软引用构建其包装器时，它实际上清除了 Spring 使用的一些基础，导致属性“丢失”。

该解决方案似乎正在从 Spring 3.1.0.RELEASE 升级到 Spring 3.1.3.RELEASE。这里有一些变化，Spring 在确定类的属性时不再包装软引用（软引用在极少数特殊情况下使用，而不是一直使用）。升级Spring版本后，通过单元测试，错误已经无法重现，还有待通过实际使用看看是否是这样。

更新：已经几个星期了，没有任何错误迹象。所以更新 Spring 版本有效:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:12:49.157

我想我实际上已经找到了一个候选人。

在很短的时间和很少使用之后在其中一个测试服务器上得到错误后，我们对原因进行了一些额外的检查。事实证明，测试服务器只有一半的可用内存，这让我们对它进行了更彻底的研究。原来它并没有用完所有的内存，但是当使用JConsole调查堆上新生空间不同部分的内存使用情况时，结果发现其中一个幸存空间被挤满了。我猜这使得它的一部分溢出，导致溢出的部分被 GC-ed 或由于不在它应该在的地方而无法访问。

我们还没有验证这实际上也是生产环境中的问题，但是一旦错误再次出现，我们将检查，如果是这种情况，我们将更改一些内存设置，以便为生存区留出更多空间新一代堆。（-XX:SurvivorRatio=6 或类似的东西）。

因此，似乎较大的 Spring MVC 应用程序需要较大的幸存者空间，特别是在较新版本的 Glassfish 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T09:44:30.533

实际上，`ExtendedBeanInfo`Spring 3.1.0 中新引入的类存在问题，该问题已在 Spring 3.1.1 中修复 - 请参阅 ( [https://jira.spring.io/browse/SPR-8347](https://jira.spring.io/browse/SPR-8347) )。

# delphi - 如果我不知道我是否有浮点数或整数，如何在将字符串转换为数字时避免错误？

> ID：12194506
> 
> 赞同：0
> 
> 时间：2012-08-30T10:10:31.597
> 
> 标签：delphi

我在 delphi 表单上有 stringgrid，我试图将一个单元格的值与另一列中另一个单元格的值相除。

但问题是，stringgrid 单元格填充了不同类型的数字，所以我得到了 ConvertErrors。例如，单元格中的数字可能看起来像 0.37 或 34 或 0.0013 或 0.00 或 0.35 或 30.65 或 45.9108 或 0.0307 或 6854.93。

换句话说，我永远不知道在这些单元格中它会是实数、浮点数、整数还是任何其他类型的类型。

我在互联网上到处寻找，但没有运气。任何人任何想法。顺便说一句，我不完全是德尔福专家。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:13:35.643

对于每个字符串，首先使用`StrToFloat`in 函数将其转换为浮点值`SysUtils.pas`。这应该允许处理任何数字类型（除非你有一些不寻常的东西，比如复数）。由于您在上面的列表中有一些零值，您还应该确保检查除以零的条件，因为这也可能引发异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T23:11:03.413

`TryStrToFloat, TryStrToInt, TryStrToInt64`为此，SysUtils 具有许多功能，例如 etc。这些函数接受一个引用参数（var 参数）来返回转换后的值，如果转换成功，函数本身返回 true。

如果您确定字符串有一个有效数字，那么您可以在决定使用哪个函数之前检查输入字符串是否有小数点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:12:58.637

将所有数字视为浮点数。使用`StrToFloat`，将数字相除，然后使用 将结果转换回字符串`FloatToStr`。如果结果是整数，则不会产生小数点。

# ios - 加载xib时的执行顺序？

> ID：12194509
> 
> 赞同：1
> 
> 时间：2012-08-30T10:10:42.380
> 
> 标签：ios, initialization, xib

我已经在 iOS 上编程将近六个月了，左右使用 xibs，但我仍然不知道加载过程是如何工作的......

我的意思是，我有视图控制器和按钮来打开新的模式视图控制器。从那时起，事情是如何完成的。是否首先调用 init 方法，然后创建 xib，连接插座，然后加载 nib？

有什么好的文章或书籍可以详细解释这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:19:18.117

这可能无法以您想要的方式回答您的问题，但我建议您自己找出答案。

**如何？**见上面的文字。

*   `XLog()`在以下情况下使用`NSLog()`
*   将上面的代码粘贴到您的 prefix.pch 文件中
*   把你想要的每一个方法都放入一个`XLog()`语句，然后看看，首先调用哪些方法。

`XLog()`是一种更好的方式`NSLog()`。在控制台中，您可以看到调用日志的行号和方法名。这应该可以帮助您了解加载笔尖的方式。

* * *

```
 #define DEBUG 1  

 //#define RELEASE 1

#ifdef DEBUG 

// Debug definitions 
#define DEBUG_MODE 
#define XLog(fmt, ...) NSLog(@"%s line:%d " fmt, __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__) 

#else 

#ifndef RELEASE 
#error DEBUG or RELEASE need to be #defined 
#endif 

// Release definitions 
#define RELEASE_MODE 
#define XLog(...) 

#endif 
```

# css - 溢出-x IE 7

> ID：12194514
> 
> 赞同：4
> 
> 时间：2012-08-30T10:10:58.483
> 
> 标签：css, internet-explorer, internet-explorer-7, overflow, internet-explorer-6

我将如何让 IE6/7 承认溢出属性？

我的网站在 IE 8+ 中运行良好，但由于某种原因 IE6/7 忽略了溢出属性，因此创建了一个水平滚动条并破坏了布局。

网站：http: [//jshjohnson.com](http://jshjohnson.com)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T13:52:58.790

使用它并尝试在条件 css 中为 ie 编写此代码

```
html {overflow-x:hidden} 
```

# vba - 带断点的宏表现不同

> ID：12194519
> 
> 赞同：0
> 
> 时间：2012-08-30T10:11:30.443
> 
> 标签：vba, ms-word

这让我很头疼。我有一个非常大的 Word 宏。在某个时候，我必须更改页面的标题和格式。

因此我在这一点插入一个休息

```
Selection.InsertBreak Type:=wdSectionBreakContinuous 
```

更改为横向/横向格式（因为图像也有这种格式）

```
 WordBasic.TogglePortrait Tab:=3, PaperSize:=0, TopMargin:="2.5", _
    BottomMargin:="2.5", LeftMargin:="2", RightMargin:="2.5", Gutter:="0", _
    PageWidth:="29.7", PageHeight:="21", Orientation:=1, FirstPage:=0, _
    OtherPages:=0, VertAlign:=0, ApplyPropsTo:=0, FacingPages:=0, _
    HeaderDistance:="1.25", FooterDistance:="1.25", SectionStart:=0, _
    OddAndEvenPages:=0, DifferentFirstPage:=0, Endnotes:=0, LineNum:=0, _
    StartingNum:=1, FromText:=wdAutoPosition, CountBy:=0, NumMode:=0, _
    TwoOnOne:=0, GutterPosition:=0, LayoutMode:=0, CharsLine:=41, LinesPage:= _
    39, CharPitch:=220, LinePitch:=360, DocFontName:="+Textkörper", _
    DocFontSize:=11, PageColumns:=1, TextFlow:=0, FirstPageOnLeft:=0, _
    SectionType:=1, FolioPrint:=0, ReverseFolio:=0, FolioPages:=1 
```

输入标题

```
ActiveDocument.ActiveWindow.ActivePane.View.SeekView = wdSeekCurrentPageHeader 
```

不应更改之前的页面，因此将标题格式与前一个页面取消链接

```
Selection.HeaderFooter.LinkToPrevious = False 
```

跳出页眉到最后一页=新节的第一页这个需要做，否则由于上面的命令，我在上一节的页眉中。（不知道为什么会跳转到最后一个标题）并跳转到正确的标题

```
ActiveDocument.ActiveWindow.ActivePane.View.SeekView = wdSeekMainDocument
Selection.EndKey unit:=wdStory
ActiveDocument.ActiveWindow.ActivePane.View.SeekView = wdSeekCurrentPageHeader 
```

选择整个标题并将其删除

```
Selection.WholeStory
Selection.Delete 
```

如果我在更改为水平格式后设置断点，则一切正常，这意味着我第一次跳转到标题或上面列出的较早点。但这是最后一种可能。

没有断点而不是只删除最后一页的标题，还会删除上一节的标题。

我不知道为什么会发生这种情况或如何防止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:35:18.087

好的，我想出了如何做到这一点。我已经认为它与运行时有关，并且某些事件无法及时执行。

所以我用doevents写了一个循环

```
For u = 1 To 1000000
DoEvents
Next u 
```

我知道的太多了，但它有效；）

编辑：实际上2次就足够了，不需要1000000我只是想在一开始就确定：D

# asp.net - 使用 GUID 自定义 Web 安全性

> ID：12194521
> 
> 赞同：0
> 
> 时间：2012-08-30T10:11:47.443
> 
> 标签：asp.net, asp.net-webpages

嗨，我也在官方的 asp.net 论坛上问过这个问题，尽管在这里问会很痛苦。

首先是一些背景信息（请随意跳过）

我最近才开始学习 asp.net 网页

首先，我拿起了几本书，它们通过了网络安全注册/登录等。使用 WebSecurity 类。

不久前，我创建了自己的网站来销售/分发自己的软件。这是使用 php 和 mysql 完成的。

然而，我一直想要更新它并建立更多面向产品的网站。并且只需将主站点用作商店。

我可以在 php 中做到这一点，但我需要先复习一下。考虑到我的情况，这不是我时间的最佳利用。由于许多工作需要使用 asp.net 的经验以及几年的编程经验，这也是我决定尝试开发自己的软件的部分原因。但这并不成功，我需要一份工作，这就是我开始学习 asp.net 的原因。

现在的问题

对于我现有的网站，我选择生成一串随机字母和数字作为产品、客户等的 id。我在我的软件中也这样做，而不是在数据字段中使用自动增量，所以 id 1,2， 3等

相反，我有像 a3hgt4ssf、3243dfsa、sdas342d 这样的字符串。

最初，使用 WebSecurity 并与角色提供者一起处理登录、创建用户、限制访问等，事情开始顺利。

然后我发现我必须使用自动递增的 ID。所以我开始根据他们相同的功能等创建自己的网络安全和角色提供者。

但是现在我一开始就卡住了，我将一些数据存储在登录的 cookie、客户 ID、用户名和密码中，然后我只是检查了登录 cookie。当我第一次开始学习 Web 开发时，这本书就是这样做的，但是我转向了软件，并且多年来没有太多地关注它（时间不足）。

现在我不确定我是否应该使用cookies（和以前一样），或者我应该使用浏览器关闭时过期的会话（据我所知）

我主要关心的是安全性，我使用贝宝处理付款。所以我认为这使它不再是一个问题，但仍然存在。

我也知道 .net 框架的大小，所以如果功能已经可用于完成我需要的功能，我不想重新发明轮子。

# objective-c - IOS - Superview 在横向模式下捕捉触摸事件

> ID：12194524
> 
> 赞同：0
> 
> 时间：2012-08-30T10:11:51.743
> 
> 标签：objective-c, ios, landscape, superview

我有一个以编程方式创建的 UIViewController，当我将它的视图插入到我的一般视图中时，UIView 底部的 300 像素没有收到任何触摸事件，触摸事件被主 UIView 超级视图捕获。

重要的事实是，仅在我处于横向模式时才会发生。

有任何想法吗？

编辑：这是一个屏幕截图，橙色背景是具有自己的 UIViewController 并且需要触摸的 UIView，但正如我所说，主 UIViewController 正在捕获底部的最后一个像素（大约 275）。所以按钮永远不会被调用。仅在横向模式下！

![图库截图](../Images/0989da76dccd578db541278869db9a7c.png)

# spring - 由 Quartz Job 触发时未启动速度

> ID：12194531
> 
> 赞同：1
> 
> 时间：2012-08-30T10:12:12.907
> 
> 标签：spring, quartz-scheduler, velocity

Velocity Engine 在我的项目中用于发送有关用户操作和作业触发的邮件。

虽然通过用户操作发送的邮件非常好，但作业发送的邮件有时会收到内容为空的邮件。这是非常随机的，我似乎无法将其与任何原因联系起来。发生这种情况时没有错误日志。（在添加 NullLogChute 属性之前，我确实收到了一次 Velocity 无法初始化错误。我被告知这将解决异常，但它所做的只是阻止异常出现在日志中。邮件仍然有空内容） 请帮忙！

之前的例外：

```
ERROR 2012-07-29 05:00:00,219 com.myProject.util.VelocityUtil - Velocity could not be initialized!
java.lang.RuntimeException: Velocity could not be initialized!
..
..
Caused by: org.apache.velocity.exception.VelocityException: Failed to initialize an instance of org.apache.velocity.runtime.log.AvalonLogChute with the current runtime configuration. 
```

我在我的 spring servlet xml 中设置速度配置属性：

```
<bean id="velocityUtil" class="com.myProject.util.VelocityUtil" >
 <property name="velocityConfiguration">
  <props> 
   <prop key="resource.loader">class</prop>
   <prop key="class.resource.loader.class">org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader</prop>
   <prop key="runtime.log.logsystem.class">org.apache.velocity.runtime.log.NullLogChute</prop> 
  </props>
 </property> 
```

在 spring servlet 中设置的 Quartz 属性：

```
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="applicationContextSchedulerContextKey"><value>applicationContext</value></property>
     <property name="quartzProperties">
        <props> 
            <prop key="org.quartz.scheduler.instanceName">Quartz</prop> 
            <prop key="org.quartz.scheduler.instanceId">AUTO</prop> 
            <prop key="org.quartz.scheduler.rmi.export">false</prop> 
            <prop key="org.quartz.scheduler.rmi.proxy">false</prop> 
            <prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop> 
            <prop key="org.quartz.threadPool.threadCount">5</prop> 
            <prop key="org.quartz.threadPool.threadPriority">1</prop> 
            <prop key="org.quartz.jobStore.class">org.quartz.impl.jdbcjobstore.JobStoreTX</prop> 
            <prop key="org.quartz.jobStore.tablePrefix">EES.QRTZ_</prop> 
            <prop key="org.quartz.jobStore.isClustered">true</prop> 
            <prop key="org.quartz.jobStore.misfireThreshold">60000</prop> 
            <prop key="org.quartz.jobStore.driverDelegateClass">org.quartz.impl.jdbcjobstore.MSSQLDelegate</prop>
        </props>
      </property>
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
    <property name="triggers">
    <list>
        <ref bean="Mod1CronTrigger" />
        <ref bean="Mod2CronTrigger" />
        <ref bean="Mod3CronTrigger" />
        <ref bean="Mod4CronTrigger" /> 
        <ref bean="Mod5CronTrigger" /> 
        <ref bean="Mod6CronTrigger" />
    </list>
    </property>
</bean> 
```

`<list>`定义jobDetail 和CronExpression中的每个触发器。例如，

```
<bean id="Mod1CronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="Mod1Job"/>
    <property name="cronExpression" value="0 30 3 1/1 * ? *"/>
</bean> 
```

和

```
<bean name="Mod1Job" class="org.springframework.scheduling.quartz.JobDetailBean">
    <property name="jobClass" value="com.myProject.jobs.Mod1Job" />
    <property name="name" value="Mod1Job" />
</bean> 
```

# html - ruby on rails 数据类型：文本呈现在视图中

> ID：12194540
> 
> 赞同：0
> 
> 时间：2012-08-30T10:12:35.797
> 
> 标签：html, css, ruby-on-rails-3.1

我尝试在 Rails 中使用脚手架来构建博客。我将博客的内容保存为 :text。然而，当我看到景色时。它只能显示在一行中。看起来不太好。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:17:21.380

您的数据库存储文本，而不是 HTML。在 HTML 中，换行符会被忽略，除非它们被相关的 HTML 标记所标记。例如，两个段落之间的换行符应该由一个元素的结尾和另一个`<p>`元素的开头来标记，单个换行符应该由一个`<br>`标签表示。

Rails 的[`simple_format`](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)助手通过用 HTML 标记替换换行符将文本转换为 HTML。

所以不是这样的：

```
<p><%= @post.content %></p> 
```

你会这样做：

```
<%= simple_format @post.content %> 
```

# xml - Magento AW-Blog：帖子视图的不同模板

> ID：12194545
> 
> 赞同：0
> 
> 时间：2012-08-30T10:13:07.560
> 
> 标签：xml, templates, magento, blogs

我们正在使用 Magento 1.7.0.2 和最新版本中的修改“Aw-Blog”。是否可以给 blog_post_view 一个不同的模板？

我们需要在加载 iframe/ajax 的灯箱中打开 post.phtml 站点。因此，我需要禁用除 Post View 的内容部分之外的所有内容。

这就是我们已经尝试过的：

```
<blog_post_view translate="label">
        <reference name="root">
            <action method="setTemplate"><template>page/popup.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="blog/post" name="post" template="aw_blog/post.phtml" />
        </reference>
    </blog_post_view> 
```

在 aw_blog.xml 中，我们尝试将模板“popup.phtml”设置为根目录。不知何故，这并没有奏效，这让我们感到困惑，因为这种方法已经在我们修改过的“sendtofriend”文件中运行良好......我们在那里做了同样的事情，将发送给朋友的表单加载到 iframe 灯箱中。

我们做错了什么吗？
有人可以帮助我们吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T13:24:05.503

后端的博客配置中有一个设置，位于 system/config/blog （左栏中的 aheadworks 菜单）。在那里你会发现页面布局设置为 2columns-right。

要将布局更改为弹出窗口，您需要向 Magento 的布局添加一个额外的模板。

Magento 给出了如何[按照本教程](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/0_-_theming_in_magento/adding_cms_layout_templates)执行此操作的示例。

Tutsplus 在这里有更[完整的描述](http://code.tutsplus.com/tutorials/custom-layouts-and-templates-with-magento--cms-21419)。但是您必须向下滚动到**“创建自定义模块布局和块文件”的位置**

完成教程后，您将能够在 system/config/blog 中选择弹出模板

干杯！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-17T08:19:29.627

为了让 xml 工作，我需要设置：

```
//PostController()

public function viewAction() {<br />
        $this->loadLayout();<br />
        $this->renderLayout();

//... 
} 
```

在`PostController()`视图动作中。然后它开始渲染我的布局。

希望能帮助到你，

# php - mail() 将消息作为 .txt 文件发送

> ID：12194547
> 
> 赞同：-2
> 
> 时间：2012-08-30T10:13:13.007
> 
> 标签：php

我对 PHP 很陌生，所以不要介意`@`... 是打开脚本没有错误的快速修复

我目前正在编写一个邮件脚本，它工作得很好。可悲的是，它将用户输入的文本作为`.txt`文件而不是纯文本发送

基本上，表单存储在`messenger_mailsend.php`Textarea 的内容中`messenger_mailsend_controller.php`，使用`$_POST[]`.

```
 @$inhalt = $_POST['inhalt'];
    $message = strip_tags($inhalt);

    if(isset($_POST['submit'])){
    @mail($mailto, $subject, 'why not zoidberg?', $headers); 
    echo 'The mail was sent!';
    } 
```

'why not zoidberg' 是我用来检查 var 是否有问题的测试文本，实际上它说`mail($mailto, $subject, $message, $headers);`

是我用来从表单中获取输入消息、删除标签并将其存储为`$message`.

如果我这样做，`var_dump`它会说“我很满足”（在表单中输入的内容）.. 当`$message`var 被一些纯文本替换时，它仍然被发送为`TEXT.txt`

我用于 $headers 的代码是：

```
 $headers .= 'From:' . $usrmail . "\n";
$headers .= 'Reply-To:' . $reply . "\n";
$headers .= 'X-Mailer: PHP/' . phpversion() . "\n";
$headers .= 'X-Sender-IP:' . $_SERVER['REMOTE_ADDR'] . "\n";
$headers .= 'Content-type: text/html; charset=ISO-8859-1\r\n';

$headers .= 'Cc: ' . $cc . "\n";
$headers .= 'Bcc: ' . $bcc . "\n"; 
```

-- 解决方案：通过将内容类型设置为 text/plain 可以正常工作，谢谢大家！--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:26:10.733

那么，当您在发送前剥离所有 html 标签时，您怎么能期望邮件以 html 格式发送....

但是，如果要发送 html 邮件，则必须在发送前在标题中定义相同的内容。见片段：

```
$to = 'bob@example.com';
$subject = 'Website Change Reqest';

$headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "Reply-To: ". strip_tags($_POST['req-email']) . "\r\n";
$headers .= "CC: susan@example.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

@$inhalt = $_POST['inhalt'];
$message = strip_tags($inhalt); 
```

然后你像这样发送邮件：

```
mail($to, $subject, $message, $headers); 
```

# eclipse - Eclipse Juno 中的 Windows Builder - 杂乱的调色板

> ID：12194555
> 
> 赞同：0
> 
> 时间：2012-08-30T10:13:41.740
> 
> 标签：eclipse

从google repo（eclipse 4.2的插件，beta和stable）在Eclipse Juno中安装了Windows Builder，但是调色板窗口很杂乱，它“卡在”Eclipse的左上角，并被项目资源管理器、菜单和按钮部分覆盖重叠。不可用。

有什么解决办法吗？恢复到 Eclipse 3.7？

# ios - 不能在核心数据中使用“对象”或“对象”作为实体？

> ID：12194558
> 
> 赞同：1
> 
> 时间：2012-08-30T10:13:51.313
> 
> 标签：ios, core-data, reserved-words

我不确定，但我认为我的项目有问题，因为一个实体的名称为“对象”，试图将其更改为“对象”，没有任何变化。也许它是一个保留字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:21:36.227

根据[这](http://lists.apple.com/archives/cocoa-dev/2009/Sep/msg02159.html) `Object`是 Objective-C 的原始根类，它仍然存在于类层次结构中的某个位置，因此无法使用。我不确定，`Objects`但显而易见的解决方案是为您的类名添加前缀（无论如何您都应该这样做，但对于像“Object”这样的通用名称尤其重要）

# ms-access-2007 - 在 ms 访问 2007 中更新字段时出错

> ID：12194559
> 
> 赞同：0
> 
> 时间：2012-08-30T10:13:59.900
> 
> 标签：ms-access-2007

我有一个表单，其中有两个子表单。在 subform1 的组合框的 afterUpdate() 事件中，我希望子表单的组合框使用相同的值进行更新，反之亦然。Subform2 的 ID 字段取决于 subform2。如如果我在 subform1 上创建一条新记录，那么 subform2 会根据 subform1 中的记录显示数据。可以在 subform1 中创建新条目，并且可以为 subform1 中的记录修改 subform2 上的数据。这是因为 subform1 从基表和 subform2 也从其他一些相关表中获取相关数据。如果我必须为现有记录更新 2 个子表单中的组合框，一切运行正常。但是，如果我在 subform1 中添加新记录，那么它会在组合框的 afterupdate 事件中引发错误“您无法为该对象分配值”子窗体 1。现在，如果我导航到 subform2 并返回 subform1 并更改组合框的值，它会更新并且不会引发错误。两种形式的组合框具有相同的行源。

请建议我一些可以用来避免此问题的方法。

# java - 如何在 JMeter 中获得相当于 Google Chrome 请求的“接收时间”

> ID：12194560
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:14:00.393
> 
> 标签：java, jmeter, qa, performance-testing

如何在JMeter中获得这个接收时间/加载时间请尽快告诉。 ![这是 Chrome 的快照](../Images/241fecaa3b531a7c553f0c0daabbb233.png)

这是 Chrome 的快照。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:43:08.660

我将接收时间理解为最后接收到的字节和第一次接收到的字节之间的时间（不是页面加载时间，其中包括浏览器解释响应的时间）所以这应该是：

*   [经过时间](http://jmeter.apache.org/usermanual/glossary.html)- [延迟](http://jmeter.apache.org/usermanual/glossary.html)

**经过的时间。**JMeter 测量从发送请求之前到收到最后一个响应之后所经过的时间。JMeter 不包括呈现响应所需的时间，JMeter 也不处理任何客户端代码，例如 Javascript。

**潜伏。**JMeter 测量从发送请求之前到接收到第一个响应之后的延迟。因此，时间包括组装请求所需的所有处理以及组装响应的第一部分，这通常会比一个字节长。协议分析器（例如 Wireshark）测量通过接口实际发送/接收字节的时间。JMeter 时间应该更接近浏览器或其他应用程序客户端所体验的时间。

但我没有找到接收时间的定义：

*   [https://developers.google.com/chrome-developer-tools/docs/network](https://developers.google.com/chrome-developer-tools/docs/network)

# java - 在java中将条形码128设置为B型

> ID：12194572
> 
> 赞同：0
> 
> 时间：2012-08-30T10:14:33.257
> 
> 标签：java, pdf-generation, barcode, barcode-printing

我正在使用此代码生成barcode128：

```
String stb1 = "123456789";
code128.setCode(stb1);
//code128.setCodeType(Barcode128.CODE128_UCC);
//code128.setCode("1234567890");
code128.setStartStopText(true);
Image image128 = code128.createImageWithBarcode(cbd, null, Color.white);
image128.setAbsolutePosition(20 + x, 626 + y);
image128.scaleAbsolute(109, 33);
document.add(image128); 
```

我的客户想要条形码128 B型。如何将其设置为B型？我试过`CODE128_UCC`, `CODE128_RAW`,`CODE128`但`setCodyType()`其中三个看起来很相似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:34:00.223

感谢 pmoleri 之前的回答，我成功地使用了 Itext（Itextsharp 版本 5.3.3.0）生成了 B 型条形码 128。这是我写的 c# 代码，希望对您有所帮助：

```
String stb1 = "123456789";
Barcode128 code128 = new Barcode128();
code128.CodeType = Barcode.CODE128_RAW;
code128.ChecksumText = true;
code128.GenerateChecksum = true;
code128.StartStopText = true;
code128.Code = (StringEncode128(stb1) + "\uffff");
System.Drawing.Bitmap bm = new System.Drawing.Bitmap(code128.CreateDrawingImage(System.Drawing.Color.Black, System.Drawing.Color.White));
bm.Save(Server.MapPath("barcode128.gif"), System.Drawing.Imaging.ImageFormat.Gif);
ImageBarCode128 = Image.GetInstance(Server.MapPath("barcode.gif")); 
```

字符串编码功能：

```
public String StringEncode128(String text) {
const int Ascii_FNC1 = 102;
const int Ascii_STARTB = 104;

int CharAscii = 0;
for (int CharPos = 0; CharPos < text.Length; ++CharPos)
{
  string letter = text.Substring(CharPos, 1);
  CharAscii = (int)Convert.ToChar(letter);
  if (CharAscii > 127 && CharAscii != Ascii_FNC1) {
    throw new Exception(text + "|" + CharAscii);
    }
}

StringBuilder outstring = new StringBuilder();
outstring.Append((char)(Ascii_STARTB));

for (int CharPos = 0; CharPos < text.Length; ++CharPos)
{
    string letter = text.Substring(CharPos, 1);
    CharAscii = (int)Convert.ToChar(letter) - 32;
    outstring.Append((char)(CharAscii));
}

return outstring.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:02:35.580

Itext 可能是最紧凑的条形码版本，这就是为什么您不能选择字符集的原因。例如，如果它以大数字序列开头，它将选择字符集 C，然后如果后面有一个 alpha 字符序列，则更改为字符集 B。

任何能够读取的条形码扫描仪都`Code 128`必须能够读取任何字符集，所以我认为不需要坚持使用字符集 B。

**更新**

我不认为你可以用 iText 做到这一点，除非你通过原始代码。幸运的是，字符集 B 非常简单，只需将一个字符串与以下内容放在一起：

*   字符集 B 的起始字符：`104`
*   从原始字符串中每个字符的 ascii 码中减去 32
*   用 "\uffff" 结束字符串

然后使用以下命令以原始模式创建条形码：`setCodeType(Barcode.CODE128_RAW)`

您可以在此处获取更多信息：http: [//grandzebu.net/informatique/codbar-en/code128.htm](http://grandzebu.net/informatique/codbar-en/code128.htm)

# twitter-bootstrap - Bootstrap：面包屑中的下拉菜单

> ID：12194573
> 
> 赞同：16
> 
> 时间：2012-08-30T10:14:34.667
> 
> 标签：twitter-bootstrap

显然，这种特殊的组合（面包屑内的下拉菜单）并没有得到很好的支持：

![在此处输入图像描述](../Images/a4f739758a532e9c0f5872d493c7c1f5.png)

我的标记（引导 2.1.0）：

```
<ul class="breadcrumb">
  <li class="dropdown open">
    <a class="dropdown-toggle" id="branches" role="button" data-toggle="dropdown" href="#">default <b class="caret"></b></a>
    <ul id="branches-dropdown" class="dropdown-menu">
        <li><a tabindex="-1" href="...8109a3a986c7">commissions - <code>8109a3a986c7</code></a></li>
        <li><a tabindex="-1" href="...76d3a7022f9e">dashboard-integration - <code>76d3a7022f9e</code></a></li>
        <li><a tabindex="-1" href="...4ee00eb42b72">default - <code>4ee00eb42b72</code></a></li>
        <li><a tabindex="-1" href="...10755b086192">led-support - <code>10755b086192</code></a></li>
        <li><a tabindex="-1" href="...298fa9e18508">stable - <code>298fa9e18508</code></a></li>
        <li><a tabindex="-1" href="...990826c5d5df">xdm-customer-selection - <code>990826c5d5df</code></a></li>
    </ul>
    <span class="divider">/</span>
  </li>
  <li>
    <a href="...4ee00eb42b72">aeroclub.aeroexpress</a> <span class="divider">/</span>
  </li>
</ul> 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T10:25:23.607

我猜您希望悬停效果突出显示整个列表项。

该类`breadcrumb`设置`li`为`display: inline-block;`，但`dropdown`该类未显式设置该`display`属性。

尝试手动设置：

```
.dropdown-menu li {
  display: block;
} 
```

# php - Preg_match 只需要第一个括号

> ID：12194574
> 
> 赞同：2
> 
> 时间：2012-08-30T10:14:35.323
> 
> 标签：php, arrays, preg-match

再会，

我在下面有这个脚本来识别第一个标签（[Test1]）
但是它对我现在拥有的uri所做的只是获取第一个括号和最后一个括号，
所以输出是“ **Test1] Title [Test9** ”

我希望输出为“ **Test1** ”。我已经尝试更改 preg_match，但似乎我没有得到我想要的。希望有人可以帮助我走上正确的道路。

```
<?php
$uri = "[Test1] Title [Test9].jpg";
$str = "'".$uri."'";
if (preg_match('/\[([^\)]+)\]/', $str, $matches)) {
    echo "[".$matches[1]."]";
}
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:27:04.053

你必须使用'？签名以获得不贪婪的匹配：

```
<?php
$uri = "[Test1] Title [Test9].jpg";
$str = "'".$uri."'";
if (preg_match('/\[(.+?)\]/', $str, $matches)) {
    echo "[".$matches[1]."]";
} 
```

[在线测试](http://ideone.com/OOInA)

# html - Internet Explorer 上的 CSS 损坏

> ID：12194582
> 
> 赞同：0
> 
> 时间：2012-08-30T10:14:59.497
> 
> 标签：html, css, internet-explorer-9

我有一个 Web 项目，当我在 Internet Explorer 上运行它时会中断。在这里，在[jsfiddle](http://jsfiddle.net/QgAAK/)上按我的意愿工作。

在 IE 上，`display_area`上升并与顶部的工具栏混合。此外，这些帖子混合到 中，`side_display_area`而不是`main_display_area`像 jsfiddle 那样被限制在 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:15:31.353

我遇到的问题是，默认情况下，IE 使用“Quirky”模式进行 CSS 渲染，以便与为 IE 临时编写的旧代码兼容。虽然 IE 目前有不同的标准兼容模式（但我无法证明它的兼容程度），但它仍然默认为这种兼容模式。

解决方案是通过`X-UA-Compatible`header 覆盖或显式设置 IE 的呈现模式。您可以通过 html 标签执行此操作：

```
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head> 
```

[更多信息](https://stackoverflow.com/questions/6156639/x-ua-compatible-is-set-to-ie-edge-but-it-still-doesnt-stop-compatibility-mode/9624500#9624500)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:08:43.120

我认为这可能会有所帮助[http://css-tricks.com/the-css-overflow-property/](http://css-tricks.com/the-css-overflow-property/)

考虑向您的水平菜单添加一些 div 并在其上放置一些高度

```
div.hmenu {
    margin-left:auto;
    margin-right:auto;
    height: 20px;
    min-width:1000px;
    max-width:90%;
    overflow:auto;
} 
```

# android - Phonegap，jQuery Mobile，Android，文本输入后不再固定工具栏

> ID：12194591
> 
> 赞同：4
> 
> 时间：2012-08-30T10:15:42.360
> 
> 标签：android, cordova, jquery-mobile, footer, textinput

关于工具栏的 jQuery mobile、phonegap 和 android 的组合，我有一个问题。更准确地说，我希望我的页眉和页脚在我输入文本区域后保持稳定（data-position="fixed"）。

我还在页眉和页脚中包含属性 data-tap-toggle="false"，但是在我在文本区域上写一些内容并返回页面后，页脚和页眉不再“固定”，我必须再次触摸屏幕以便再次可见和固定。

有什么建议吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:43:24.710

最好的解决方案（对我来说完美）是：

[https://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

它是 jquery mobile 和 iscroll 的组合。基本上，它完成了加入上述 2 个库的所有令人讨厌的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:29:25.667

I had the same issue on Android 4.0.3 . I had a list with a search box. As soon as I tap the search box for input, the header and footer lost their fixed position. I got a very simple fix work for me.

```
 $('input[data-type=search]').live("focus", function() {
        $("[data-role=header]").css('position','fixed');
        $("[data-role=footer]").css('position','fixed');
    }); 
```

Hope it works !

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:59:46.760

我在 iOS 上遇到了完全相同的问题。几个小时后，尝试了几种不同的方法，我选择了[iScroll](http://cubiq.org/iscroll-4)。如果除此之外还有其他答案，我很乐意听到。

# windows-phone-7 - 在 wp7 中处理 Web 浏览器链接事件

> ID：12194598
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:15:58.567
> 
> 标签：windows-phone-7, webbrowser-control

我正在使用 WP7 WebBrowser 控件。在这个页面上我有一个超链接。这个链接来自网络服务。我想在我的应用程序代码后面（即在 C# 中）处理该超链接的单击事件。我想在此超链接单击事件上显示另一个 Web 浏览器控件

有没有办法让 WebBrowser 控件处理点击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:37:21.020

If i understand you, you want to intercept the onClick event in your first WB control (call this WB1), and open that page up (when the hyperlink is clicked) in another WB control (call this WB2)?

There are several ways you can do this, is this link set to open up in a new window? If so, you can intercept the NewWindow2 event is WB1 and run the following code in the NewWindow2 event of WB1...

```
Set pDisp = WB2.object 
```

(it may be ppDisp instead of pDisp, but it will show up when your event is auto generated, choose whichever object name shows up in your arguments list).

Otherwise, you can intercept this request during BeforeNavigate2 event of the WB1 event, check the URL property if it is the link you're interested in, and if so, cancel the current request and reissue a new one as below... (in the WB1 BN2 event)...

```
Cancel = True ' This cancels the request
WB2.Navigate2 URL, , "YourWB2sDocumentNameOrTargetFrameNameGoesHere" 
```

Second line of code just reissues the request.

Of course, the YourWB2sDocumentNameOrTargetFrameNameGoesHere is the TargetFrameName (or the frame or document name of the top level document, or any iframe, in your WB2 control/window). This can usually be found in the BODY tags name= property, but you don't even need to do this if all you want is to load it as the top level document in WB2... if you just want to load it as the parent top level document in WB2, just do this...

```
Cancel = True
WB2.Navigate2 URL 
```

By referencing WB2 it will just send the same URL request to WB2 window after cancelling WB1 request.

Let me know if you need more help and let me know how you get along.

# ajax - forge.request.ajax 将数据发布为 json

> ID：12194600
> 
> 赞同：1
> 
> 时间：2012-08-30T10:16:06.817
> 
> 标签：ajax, request, trigger.io, forge

我已经开始使用 trigger.io 将我们的 jQuery 移动 Web 应用程序作为原生构建。当前形式的 Web 应用程序使用一个名为[janky.post](http://saunter.org/janky.post/)的插件来制作跨域帖子，以 json 格式提交数据 - 这是我们基于 PHP 的 API 所期望的。

我已经开始`forge.request.ajax`在本机构建中使用，它适用于应用程序中的所有表单，除了一个。该请求似乎不是作为 json 编码对象提交的，而是一个标准的 $_POST 数组。这不是什么大问题，因为我可以修改 API 来检测这一点，但是由于提交的数据是多维的，因此该方法似乎对数组进行了错误处理，因此它的结构不像预期的那样。

如何纠正这种行为以获得我想要的输出？无论如何，我是否可以强制为表单提交 json？如果是，这样做有什么缺点吗？它会阻止我将来向此表单提交添加文件上传吗？

**例子：**

为了扩展我的意思，过程如下。提交时，控制器将表单数据格式化为 json 并将其传递给 ajax 方法，如下所示：

```
window.forge.ajax({
    type: 'POST',
    url: 'foo.com/bar',
    data: data,
    dataType: 'json',
    success: function( response ) {
        /* code omitted */
    });
}); 
```

这样做的原因是因为帖子中的一些数据不是直接来自表单本身，而是由其他模型提供的。发布的结构`data`如下：

```
{
    id: '23',
    date: '2012-08-30 00:00:00',
    name: 'Foo',
    items: [{
        description: 'Bar',
        quantity: '1',
        price: '20'
    }]
} 
```

但是当我们基于 PHP 的 API 将其作为数组接收时，结构如下：

```
array(
    'id' => '23'
    'date' => '2012-08-30 00:00:00',
    'name' => 'Foo',
    'items' => array(
        0 => array( 'description' => 'Bar' ),
        1 => array( 'quantity' => '1' ),
        2 => array( 'price' => '20' )
    )
) 
```

如您所见，items数组中与单个项目对应的每个字段都已更改为自己的数组，这是错误的，应该是：

```
 items = array(
     0 => array(
         'description' => 'Bar',
         'quantity' => '1',
         'price' '20'
     )
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:54:52.820

正如@Connorhd 所说，这是我们如何在数组中编码对象的一个​​错误：我现在已经修复 - 将在本周末部署。带来不便敬请谅解！

# c# - MVC 4 和带有 Razor 的扩展方法

> ID：12194603
> 
> 赞同：15
> 
> 时间：2012-08-30T10:16:16.257
> 
> 标签：c#, asp.net-mvc, razor

我创建了一个扩展方法并将其命名空间包含在我的`web.config`文件中。扩展方法工作正常，测试代码可以正常访问。问题是，我仍然收到与未找到命名空间有关的错误。

我收到的 ASP .NET 错误消息是：

> CS1061：“System.Uri”不包含“IsCurrentUrl”的定义，并且找不到接受“System.Uri”类型的第一个参数的扩展方法“IsCurrentUrl”（您是否缺少 using 指令或程序集引用？）

下面是各自的代码。

网络配置：

```
<system.web>
    <httpRuntime targetFramework="4.5" />
    <compilation debug="true" targetFramework="4.5" />
    <pages>
        <namespaces>
            <add namespace="System.Web" />
            <add namespace="System.Web.Helpers" />
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Routing" />
            <add namespace="System.Web.WebPages" />
            <add namespace="MyMainSite2.Library.Extensions" />
        </namespaces>
    </pages>
</system.web> 
```

扩展方法代码：

```
namespace MyMainSite2.Library.Extensions
{
    public static class UriExtensions
    {
        #region Public Static Methods

        public static bool IsCurrentUrl(this Uri uri, string url)
        {
            if (String.IsNullOrWhiteSpace(url))
                return false;

            url = url.Trim().ToLower();
            string absolutePath = uri.AbsolutePath.Trim().ToLower();

            if (!url.StartsWith("/") && absolutePath.StartsWith("/"))
                absolutePath = absolutePath.Remove(0, 1);

            bool match = absolutePath == url;

            return match;
        }

        #endregion
    }
} 
```

剃须刀代码：

```
@model MyMainSite2.UI.Web.Models.Shared.TopMenuModel

@foreach (var item in this.Model.Items)
{
    if(this.Request.Url.IsCurrentUrl(item.Url)) // this line is failing because UriExtensions.IsCurrentUrl is not being found
    {
        @:<li class="current">
    }
    else
    {
        @:<li>
    }

    @:<a href="@item.Url">@item.Text</a></li>
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T13:53:53.957

petro.sidlovskyy 给出了答案。

我将命名空间添加到主 Web.config 而不是视图的 Web.config。

当我将命名空间添加到Views文件夹中的Web.config时，该命名空间被视图识别，从而问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T02:06:24.147

我只想发布这个问题已经好几个月了，我按照 ASP.NET 网站上的指南逐行进行操作，我能够为 Razor 文件获取 Intellisense。

这是链接：[http ://www.asp.net/mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5 -and-web-api-2](http://www.asp.net/mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2)

我希望这也有助于防止其他人脱发。

# javascript - 将 Google AdWords 转换跟踪 (javascript) 代码添加到 PrestaShop / Smarty 页面

> ID：12194608
> 
> 赞同：1
> 
> 时间：2012-08-30T10:16:49.617
> 
> 标签：javascript, prestashop, smarty3

我正在运行一个 PrestaShop 网站，并希望将其与 Google AdWords 和转化跟踪功能集成。PrestaShop 代码在 Smarty 3 中。

现在我发现我可以将 Google 的 JS 代码放在一个 tpl 文件的末尾：order-confirmation.tpl。这是谷歌代码：

```
<script type="text/javascript"> 
/* <![CDATA[ */ 
var google_conversion_id = <my id>; 
var google_conversion_language = "en"; 
var google_conversion_format = "3"; 
var google_conversion_color = "ffffff"; 
var google_conversion_label = "<my label>"; 
var google_conversion_value = {$total}; 
/* ]]> */ 
</script> 
<script type="text/javascript" src="http://www.googleadservices.com/pagead/conversion.js"> 
</script> 
<noscript> 
<div style="display:inline;"> 
<img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/pagead/conversion/<id>/?value=0&amp;label=<label>&amp;guid=ON&amp;script=0"/> 
</div> 
</noscript> 
```

问题是向 JS 变量`google_conversion_value`提供总订单值的内容。

我正在使用 Smarty 3，并且我尝试在 {literal} 标签之间包含整个 JS 块，或者不使用空格包围大括号，没有空格，任何东西似乎都可以工作。

同样的转换值也在该部分中，它是指向 googleadservices 的链接中的一个参数，它当前设置为 0，但我希望 $total 值也可以去那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:55:56.027

看起来我不得不调用`getOrderTotal`对象`$cart`：

```
var google_conversion_value = {$cart->getOrderTotal(false, Cart::BOTH_WITHOUT_SHIPPING)}; 
```

第一个参数是您是否想获得含税总额。第二个参数是 Cart.php 中的常量：

```
const ONLY_PRODUCTS = 1;
const ONLY_DISCOUNTS = 2;
const BOTH = 3;
const BOTH_WITHOUT_SHIPPING = 4;
const ONLY_SHIPPING = 5;
const ONLY_WRAPPING = 6;
const ONLY_PRODUCTS_WITHOUT_SHIPPING = 7;
const ONLY_PHYSICAL_PRODUCTS_WITHOUT_SHIPPING = 8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T14:11:40.027

恐怕`$cart->getOrderTotal()`不能这样工作，因为`$cart`到达 order-confirmation.tpl 时变量设置为 null。我们必须另寻出路……

我找到了一种不是很聪明的方法，但到目前为止就完成了这项工作。我们必须使用 id_cart 参数调用 Cart 静态方法 getTotalCart。问题是我们没有任何带有此参数的 smarty var。我发现的唯一方法是从请求 URI 中获取它。

因此，首先，以这种方式获取 cart_id（使用 regex_replace）：

```
{assign var='id_cart' value={$request_uri|regex_replace:"/.*id_cart=([\d]*).*/":"$1"}} 
```

然后使用此参数调用 getTotalCart 方法：

```
{$cart->getTotalCart($id_cart)|regex_replace:"/[\D]+.*/":""} 
```

所以完整的代码是：

```
<script type="text/javascript"> 
    /* <![CDATA[ */ 

    {assign var='id_cart' value={$request_uri|regex_replace:"/.*id_cart=([\d]*).*/":"$1"}}

    {literal}
    var google_conversion_id = <my id>; 
    var google_conversion_language = "en"; 
    var google_conversion_format = "3"; 
    var google_conversion_color = "ffffff"; 
    var google_conversion_label = "<my label>"; 
    var google_conversion_value = {/literal}{$cart->getTotalCart($id_cart)|regex_replace:"/[\D]+.*/":""}{literal};{/literal}
    /* ]]> */ 
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T06:29:08.137

它似乎在 prestashop v1.5.4 中对我有用

```
<script type="text/javascript">
/* <![CDATA[ */
{assign var='id_cart' value={$request_uri|regex_replace:"/.*id_cart=([\d]*).*/":"$1"}}
{assign var='total_cart' value={$cart->getTotalCart($id_cart)|regex_replace:"/[\D]+.*/":""}}
{literal}
var google_conversion_id = YOUR_CONVERSION_ID;
var google_conversion_language = "en"; // or your language iso
var google_conversion_format = "3"; // or your format
var google_conversion_color = "ffffff";
var google_conversion_label = "YOUR_CONVERSION_LABEL";
var google_conversion_value = {/literal}{$total_cart}{literal};{/literal}
/* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="//www.googleadservices.com/pagead/conversion/YOUR_CONVERSION_ID/?value={$total_cart}&amp;label=YOUR_CONVERSION_LABEL&amp;guid=ON&amp;script=0"/>
</div>
</noscript> 
```

# c# - 在后面的代码中创建页面的新实例时设置查询字符串

> ID：12194609
> 
> 赞同：0
> 
> 时间：2012-08-30T10:16:50.090
> 
> 标签：c#, silverlight, .net-4.0

在 Silverlight 应用程序页面中，我创建了另一个页面的新实例。

```
MyPage2 Pippo = new MyPage2(); 
```

如果`MyPage2` `OnNavigatedTo`我根据查询字符串做一些事情。

像以前一样创建页面时如何传递查询字符串？

提前致谢，

再见 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:43:12.107

我认为你的问题是基于“糟糕”的设计......我不知道你想做什么，但如果有任何东西从你的“MyPage2”上的任何地方计算或加载，你为什么不提取这段代码并使用它您在哪里需要这些信息？

# php - 类似于 PHP 模板的 HTML 模板

> ID：12194611
> 
> 赞同：1
> 
> 时间：2012-08-30T10:16:52.447
> 
> 标签：php, html, templates

我知道这样的事情已经被问过好几次了，只是我不能轻易地理解这个想法，还是太难接受事情真的是这样那样。

我知道 HTML 用于前端，繁琐的工作在客户端完成，而 PHP 在幕后工作（服务器端）。有这么多的规定、指令、标准等等。我相信我已经把自己和这些东西弄糊涂了，让我很难咀嚼和理解东西（新的和旧的），尤其是在它们的最佳用途方面。 ..

无论如何，我已经创建了一个基于 MVC 概念的 Web 应用程序，但我没有使用该主题的强大基础或框架，我自己分离了逻辑、规则和设计关注点。

不幸的是，我遇到了一些类似的问题，例如正确的做事方式，应该如何实施等等......

我最终需要对 HTML 进行模板化，但是，由于我将 HTML 用作 HTML 本身，我最终会更新/编辑每个受影响的文件（例如网页标题），这与我之前使用 PHP 时不同，从字面上看，一个带有 .php 扩展名的文件，我可以在其中充分利用模板，但是，我在某处读到这不是一个好习惯，因为它破坏了 HTML .. 所以我应该遵循哪个以及如何解决我的问题，应该我移至 .php，然后创建一个模板页面，或者有没有办法使用 HTML 来做到这一点？如果有的话，怎么办？

同时，请不要向我指出可用的框架，我想在学习框架之前先了解基本的东西......

任何人，请...

编辑...所以这很好，它没有任何缺点... main.php

```
 <?php php stuffs ?>
 <html>
 <body>
  HTML stuffs and some <?php php stuffs ?>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:18:52.890

HTML 没有模板功能。

它有框架和 iframe，但它们有很大的缺点，并且只提供包含功能。

您应该使用适当的模板语言。这可以在客户端、服务器或构建系统上运行。

我建议不要在客户端上运行它。它增加了访问者（包括搜索引擎索引器）必须满足的不必要的依赖。

PHP 将完成这项工作（它跨越了编程语言和模板语言的边界）。我个人的偏好是[Template-Toolkit](http://template-toolkit.org/)。

TT 可以通过[ttree 实用程序](http://template-toolkit.org/docs/tools/ttree.html)在您的构建系统中运行，或者您可以在您的服务器上运行它。有[一个教程](http://template-toolkit.org/docs/tutorial/Web.html)介绍了如何使用它来构建网站。

如果您开始构建对服务器端要求更高的网站，那么您可以继续使用 TT，因为它受支持，但 Perl 领域的大多数 Web 框架（例如，TT 的[dancer 模块和 TT](https://metacpan.org/module/Dancer%3a%3aTemplate%3a%3aTemplateToolkit)的[催化剂模块](https://metacpan.org/module/Catalyst%3a%3aView%3a%3aTT). 请注意，这些链接指向模块的硬编码文档，如果您打算使用其中一个框架，您应该从更高级别的教程开始）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:22:08.160

HTML 是一种标记语言 - 换句话说，它可以标记文本以显示给用户。

它不能执行您在 Web 应用程序中可能需要的任何动态类型功能——例如更新日期。

因此，最好考虑 HTML 文档，就像您可能会想到 Word 文档一样，即向用户显示的大量文本。

一旦您想开始使用模板来显示动态信息（可能来自数据库的内容），您就需要一种脚本语言。PHP 对此有好处。

我对[Smarty](http://www.smarty.net/)有很好的经验- 一个 php 模板引擎。

* * *

另一方面，学习框架可能是学习基础知识的一个非常有用的部分。大多数框架*迫使*你以一种好的方式做事，有时它们让你在代码中编写的东西可能看起来有点奇怪或不合逻辑，突然有一天，一分钱会掉下来，你会意识到为什么你被强迫了从工程的角度来看，这样做是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:23:28.780

你可以看看@javascript 模板。我建议你试试[http://mustache.github.com/](http://mustache.github.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T20:20:05.293

[Modest](https://github.com/goalzen/modest "谦虚")是一个看起来和感觉都像 HTML 的模板系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-23T10:08:24.333

使用 PHP 进行 HTML 模板化的最常见方法是使用以下流行的模板引擎之一：

*   **[聪明的](http://www.smarty.net/)**
*   **[枝条](http://twig.sensiolabs.org/documentation)**
*   **[拿铁](https://github.com/nette/latte)**
*   **[胡子](http://mustache.github.io/)**

* * *

或者，您可以在 HTML 中放置类似于`<% variablename %>`. 只需加载您的 HTML，执行正则表达式即可找到所有占位符并将其替换为相应的变量。

* * *

或者，您可以加载 HTML，将其解析为[**DOM 文档**](http://php.net/manual/en/class.domdocument.php)，然后修改 DOM。我创建了库[**DOM Query**](https://github.com/PHPPowertools/DOM-Query)以便能够使用类似 jQuery 的语法来执行此操作，但您也可以使用 vanilla PHP 或其他几个库之一。

* * *

或者，您可以在前端使用 JavaScript 做一些 HTML 模板。如果你想在前端和后端都做 HTML 模板，你可能需要考虑使用**[Mustache](http://mustache.github.io/)**，因为 Mustache 模板可以在前端（使用 JavaScript）和后端（使用 PHP）中使用。

# spring - 春天getEnvironment（）

> ID：12194614
> 
> 赞同：0
> 
> 时间：2012-08-30T10:17:03.487
> 
> 标签：spring

嗨，我正在尝试写一个使用 Spring Profiles 的简单示例，她是代码。

```
 public static void main(String[] args) { 
 GenericXmlApplicationContext ctx = new GenericXmlApplicationContext(); 
 ctx.getEnvironment().setActiveProfiles("kindergarten"); 
 ctx.load("classpath:profile/*-config.xml"); 
 ctx.refresh(); 
 FoodProviderService foodProviderService =     
     ctx.getBean("foodProviderService", FoodProviderService.class); 
 List<Food> lunchSet = foodProviderService.provideLunchSet(); 
 for (Food food: lunchSet) { 
     System.out.println("Food: " + food.getName()); 
 } 
```

但是奇怪的事情发生了它 GenericXmlApplicationContext 在它的 API 中没有 getEnviroment() 方法所以第三行

```
ctx.getEnvironment().setActiveProfiles("kindergarten"); 
```

不工作。我的 STS 拒绝运行 main，因为他认为这是一个 sintax 错误，他给了我这个消息：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
The method getEnvironment() is undefined for the type GenericXmlApplicationContext 
```

有任何想法吗 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:33:06.310

找到了答案，似乎我有 3.0.6.RELEASE Spring 版本，但配置文件是从 3.1.0 版本添加的，所以我需要做的就是转到我的 pom.xml 并更改它。

```
 <spring.framework.version>3.0.6.RELEASE</spring.framework.version> 
```

对此

```
 <spring.framework.version>3.1.0.RELEASE</spring.framework.version> 
```

# java - Heroku 继续使用 Postgres 而不是 MySQL

> ID：12194615
> 
> 赞同：1
> 
> 时间：2012-08-30T10:17:04.250
> 
> 标签：java, mysql, hibernate, postgresql, heroku

我有一个使用 Hibernate 的 Java 应用程序。它被配置为写入 MySQL 数据库。我可以说我配置正确，因为当我在本地机器上运行它时`(on Tomcat and Jetty)`，表是在我的本地数据库中创建的。

但是，当我将它部署到 Heroku 时，并没有创建表。Heroku 日志：

```
Cannot create JDBC driver of class 'com.mysql.jdbc.Driver' for connect URL 'po
stgres://zzz:zzz@ec2-111-11-111-11.compute-1.a
mazonaws.com:5432/zzz' 
```

日志

为什么 Heroku 连接到这个数据库而不是使用我的配置？

附加信息：应用程序已部署。只是没有创建数据库表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:19:53.577

看起来您正在尝试建立与 Postgres 数据库的 MySQL 连接。要么使用 Postgres 驱动程序，要么使用 MySQL 数据库。

在此处查找 MySQL 数据库：[https ://addons.heroku.com](https://addons.heroku.com)

PS。我猜你使用了默认的 Heroku Postgres 数据库——它使用[Heroku Postgres Starter Tier](https://devcenter.heroku.com/articles/heroku-postgres-starter-tier)数据库填充 DATABASE_URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:04:03.140

您需要将 DATABASE_URL 变量指向 mysql 数据库。

```
heroku config:set DATABASE_URL=mysql://xxxxxx 
```

# linux - 这个shell命令是什么意思“exec 3>&1>>（logger -t“OKOK”）”

> ID：12194616
> 
> 赞同：6
> 
> 时间：2012-08-30T10:17:05.467
> 
> 标签：linux, bash

我在一些源代码中找到了以下 bash 命令。

```
exec 3>&1 > >(logger -t "OKOK") 
```

它到底是什么意思？

据我所知，它将这些日志重定向到系统日志。

然而，什么是`3>&1`？

我以前从未见过 3 的文件描述符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:21:32.193

确实不寻常，但确实存在：

> 每个打开的文件都被分配一个文件描述符。stdin、stdout 和 stderr 的文件描述符分别为 0、1 和 2。**为了打开其他文件，还有描述符 3 到 9**。有时将这些附加文件描述符之一分配给 stdin、stdout 或 stderr 作为临时重复链接很有用。这简化了复杂重定向和重新洗牌后恢复正常的过程

[在IO 重定向页面](http://tldp.org/LDP/abs/html/io-redirection.html)上了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:39:58.160

从这一行开始，打印到 STDOUT 的所有内容都将由`logger`. 原来的 STDOUT 已保存在 fd3 中，因此您可以稍后（如果需要）恢复正常的 STDOUT。有关详细信息，请参阅[高级 BASH 脚本指南](http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/x13082.html)。

# java - 通过 Google plus 在 android 应用中进行用户身份验证

> ID：12194617
> 
> 赞同：3
> 
> 时间：2012-08-30T10:17:06.420
> 
> 标签：java, android, authentication, google-plus

我正在使用 Android 应用程序。应用程序中的用户身份验证具有三种方式。首先是使用查询完成的简单身份验证。其次是 Facebook。它也完成了。

我正在研究 Google plus 身份验证。但我无法找到 facebook 应用程序中提供的正确文档。

任何人都可以指导我进行 google plus 身份验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:20:44.947

您可能想查看Android SDK（[于 09/26 发布）中的“](https://plus.google.com/+GooglePlusDevelopers/posts/AHdqSf6G21y) **Google Play Services** ” 。

> Google Play 服务是由 Google Play 商店提供的平台，可将 Google 产品（例如 Google+）集成到 Android 应用程序中。Google Play 服务框架由在设备上运行的服务组件和与应用程序一起打包的瘦客户端库组成。

以下组件包含在 Google Play 服务 v1 中，相应的客户端 API 包含在客户端库中：

*   OAuth 2.0 身份验证
*   Google+ 登录
*   谷歌 +1 按钮

这是 Google 开发者网站上的链接： [https ://developers.google.com/android/google-play-services/index](https://developers.google.com/android/google-play-services/index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:04:27.640

要添加 chrkad 的建议，还有 Google+ 移动 API： [https ://developers.google.com/+/mobile/](https://developers.google.com/+/mobile/)

对于 Android，特别是： [https ://developers.google.com/+/mobile/android/](https://developers.google.com/+/mobile/android/)

这些服务将使您能够获得给定帐户的 plus.me 范围，然后您可以将其用于身份验证和用户凭据。使用传统的 OAUTH2 流程，您现在可以执行此操作，一旦 API 发布，它会更容易。

# c++ - 使用 devc++ 和 c++ 语言复制文件和目录

> ID：12194624
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:17:28.057
> 
> 标签：c++, windows, dev-c++

如何使用 c++ 在 c:/'Program Files'/blablabla 创建目录？

我还想在 blablabla 文件夹中复制一些文件。比如test.exe，如何用c++语言实现呢？

另外，如何在桌面创建快捷方式以连接 blabla 文件夹中的 test.exe。

我正在使用 devc++ 版本 4.9.9.2 和 windows 7，有人可以帮助我吗？感谢您的帮助。

编辑：我得到了这个代码

```
fstream f("FILE.EXTENSION", fstream::in|fstream::binary);
f << noskipws;
istream_iterator<unsigned char> begin(f);
istream_iterator<unsigned char> end;

fstream f2("c:\\FILE.EXTENSION",
fstream::out|fstream::trunc|fstream::binary);
ostream_iterator<char> begin2(f2);

copy(begin, end, begin2); 
```

当我尝试复制快捷方式或文件夹时出现问题，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:26:32.853

在本机 C++ 中，您不能复制目录，您可以复制文件（即创建新文件并将信息从旧文件复制到新文件），但如果不使用非标准库，则无法创建目录。你可以寻找到`WINApi`这个或到`boost`。

对于创建目录和复制文件，例如使用[boost::filesystem](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/index.htm)或一些`OS-dependent`API。

创建目录示例：

```
namespace fs = boost::filesystem;
fs::path dir_p("/home/blabla");
if (!fs::exists(dir_p))
{
   if (!fs::create_directory(dir_p))
   {
      // error
   }
} 
```

# php - 如何在 DNS 更新之前保持 magento 迁移同步

> ID：12194625
> 
> 赞同：0
> 
> 时间：2012-08-30T10:17:30.460
> 
> 标签：php, mysql, magento, magento-1.6

我正在将我的 magento 安装从我当前的主机迁移到 VPS。当然这需要一段时间，因为我还添加了一些新功能并且我正在设置服务器。每天我们都在添加新的制造商和产品，导致新服务器上的副本总是过时（没有产品）。我无法下载/覆盖整个 Magento，因为它会重置我的所有更改......

我正在使用 cron 任务转储数据库以使其保持同步，但它不会导出产品的图像...如何在这两个安装之间执行完整的同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:42:30.593

最好的方法是让您的两个 magento 站点使用相同的数据库。当您完成移动所有文件并完成更新后，只需将整个数据库连同您的产品图像一起移动到您的 VPS。这样您就不必更新这两个地方或担心同步。

# jakarta-ee - mongodb java加入两个集合

> ID：12194626
> 
> 赞同：1
> 
> 时间：2012-08-30T10:17:32.973
> 
> 标签：jakarta-ee, join, mongodb-java, mongodb

我是 mongodb 的新手。我需要通过加入两个集合来进行查询。

```
comments
{ uid:12345, pid:444, comment="blah" }
{ uid:12345, pid:888, comment="asdf" }
{ uid:99999, pid:444, comment="qwer" }

users
{ uid:12345, name:"john" }
{ uid:99999, name:"mia"  }

query: Select c.pid, c.comment from comments c, users u uwhere c.uid = u.uid; 
```

我需要使用 java api for mongodb 来执行它。我知道 mongodb 不支持连接。我有一个想法要实施，但我不知道它是否是最好的。

主意：

通过拆分它来执行两个查询。（从用户集合中检索 uuid 并检查评论集合的 uuid）

还有其他想法来实现它吗？任何人都可以通过拆分为两个查询并获取结果来向我发送 mongodb java 代码来执行此查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:29:27.727

```
for each retrieved user
    find every comments for this user 
```

或使用[DBRef](http://api.mongodb.org/java/current/com/mongodb/DBRef.html#fetch%28com.mongodb.DB,%20com.mongodb.DBObject%29)

```
for each comment
    DBRef::fetch(comment.user) 
```

# php - 每 10 分钟运行一次 PHP 文件？

> ID：12194632
> 
> 赞同：0
> 
> 时间：2012-08-30T10:18:04.293
> 
> 标签：php, file, timer, web

好的，首先，我研究了 cron 作业，不幸的是我只能访问 FTP，所以除非我误读了它，否则我认为这是不可能的。

不需要视觉表示，它只是在页面上运行的功能。

我希望它只运行一些 mysql 代码并执行快速功能..

寻找任何有用的答案或建议，无论是 jquery 还是其他插件，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:24:43.697

谷歌 cronjob 服务并选择一个。（我的第一个结果是：[https](https://www.setcronjob.com/) ://www.setcronjob.com ）

在您的服务器上设置一个执行所需操作的页面。

将此页面的 url 提供给 cronjob 服务并让它每 10 分钟调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:26:23.513

为什么不尝试使用外部 cronjob 服务？

你谈到了 jQuery，所以我想象你有一个前端，添加一个秘密路由，比如使用[Iron.io IronWorker 之](http://www.iron.io/products/worker)`/_/path/to/cron/job`类的东西来调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:35:04.500

好吧，如果您无论如何都可以访问 exec 命令，则可以执行类似的操作来通过 PHP 脚本设置 cron 作业

```
exec('echo -e "`crontab -l`\n30 9 * * * /path/to/script" | crontab -'); 
```

如果不是这样，您应该会看到： [它是第三方 cron 作业服务。10分钟的间隔是免费的。](https://www.setcronjob.com/)

# c# - 我可以将什么用作 Regex.Match(String, Int32) 的静态等效项？

> ID：12194637
> 
> 赞同：0
> 
> 时间：2012-08-30T10:18:45.587
> 
> 标签：c#, .net, regex

我使用一组永久的大约 11 个正则表达式来解析大约 80k - 200k 个字符的长字符串。到目前为止，我只`new Regex(@"blah")`在每个必须使用[Match(String, Int32)](http://msdn.microsoft.com/en-us/library/3583dcyh)、[Replace(String, String)](http://msdn.microsoft.com/en-us/library/xwewhkd1)和[Replace(String, MatchEvaluator)](http://msdn.microsoft.com/en-us/library/cft8645c)的地方使用。

但是使用这些实例方法并没有利用 .NET 的正则表达式缓存。所以我想重构我的代码以使用静态方法。问题是我找不到[Match(String, Int32)](http://msdn.microsoft.com/en-us/library/3583dcyh)的静态等效项。

我考虑过适当地使用[String.Substring(Int32)](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)但据我所知它会为我分配新的字符串。

我还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:25:51.123

您可以创建 11 个正则表达式的静态实例并在任何地方使用它。

```
static Regex r= new Regex(...); 
```

或者您可以创建一个包含正则表达式的静态单例对象。

```
public MyStaticObject{
    private  Regex r1;
    private  Regex r2;

    public Regex R1{
        get{ return r1;}
    }
    //...
    private MyStaticObject instance;

    private MyStaticObject(){
        r1=new Regex(...);
    }

    public MyStaticObject GetInstance(){
        if(instance==null){
            instance= new MyStaticObject();
        }
        return instance;
    }
} 
```

# spss - 在记事本上获取 SPSS 数据？

> ID：12194639
> 
> 赞同：0
> 
> 时间：2012-08-30T10:18:48.647
> 
> 标签：spss

我在spss中有数据。在spss中我有根据变量的数据。我希望将数据写在记事本上的记事本上，它显示变量，并在该变量下对应的打孔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:05:12.263

只需使用 File > Save As 将数据导出为 csv 文件，然后选择 .csv (, delimiter) 或 .dat (tab, \t delimiter) 作为类型。

# c# - 使用未赋值的局部变量

> ID：12194641
> 
> 赞同：2
> 
> 时间：2012-08-30T10:18:52.283
> 
> 标签：c#, loops, for-loop

我在我的代码中使用了 for 循环，但它显示使用未分配的局部变量的错误。

这是我的代码：

```
public List<CustomTypeLayer.EmployeeLeave> GetLeaveRecord(int emplid)
{
    DataSet ds = objLMSRepository.GetLeaveRecord(emplid);
    List<EmployeeLeave> leavelist = new List<EmployeeLeave>();
    if (ds != null && ds.Tables.Count > 0 && ds.Tables[0].Rows.Count > 0)
    {
        for (int k; k < ds.Tables[0].Rows.Count; k++)
        {
            DataRow dr = ds.Tables[0].Rows[k];
            EmployeeLeave leave = new EmployeeLeave();
            leave.DateFrom = Convert.ToDateTime(dr["dt_from"]);
            leave.DateTo = Convert.ToDateTime(dr["dt_to"]);
            leave.EmployeeId = Convert.ToInt32(dr["EmployeeID"]);
            leave.Reason = Convert.ToString(dr["txt_reason"]);
            leave.LeaveType = (LeaveReason)Enum.Parse(typeof(LeaveReason), dr["id_leave_type"].ToString(), true);
            leavelist.Add(leave);
        }
    }
    return leavelist;
} 
```

错误出现在 for 循环中`k`。你可以在 for 循环中看到我已经`k`用`int k`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:20:08.700

不，您还没有初始化 k 值，您刚刚将变量 k 声明为索引器。

初始化普通 for 循环的索引器的正确语法如下

```
for (int k = 0; k < ds.Tables[0].Rows.Count; k++) 
{ 
    ......
} 
```

请参阅有关 for-loop 的[MSDN参考资料](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T10:20:57.617

您需要给出`k`一个初始值，例如

```
for (int k = 0; k < someValue; k++)
{
    // Do stuff.
} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:20:42.380

你还没有初始化 k。你已经*声明*了它，但没有*初始化*它。将您的 for 循环更改为：

```
for(int k = 0; k < ds.Tables[0].Rows.Count; k++)
{
    //...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T10:21:23.737

初始化实际上是给一个变量加上一个初始值。尝试添加`int k = 0`for 循环，你应该没问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T10:23:07.820

`k`需要有一个初始值。

它应该是：

```
for(int k = 0; k < ds.Tables[0].Rows.Count; k++) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-29T14:48:25.233

你需要初始化k。写`k=0`在for循环里面

# android - mapview（滑动）动画停止后的动作

> ID：12194643
> 
> 赞同：1
> 
> 时间：2012-08-30T10:18:53.550
> 
> 标签：android, android-mapview

## 问题

我正在使用带有叠加层的地图视图。当我滑动时，必须重绘覆盖。但它只是在动画过程中选择了一些随机点。

## 问题

如何确保仅在地图视图停止移动*后才执行操作（通常）？*

# javascript - 再次点击前超时

> ID：12194648
> 
> 赞同：2
> 
> 时间：2012-08-30T10:19:16.937
> 
> 标签：javascript, jquery

在我的拼写游戏中，用户点击字母来拼写单词。当单击一个字母时，它会动画到正确的区域。

问题是当您单击它们以加快动画混乱并且字母重叠时。

为了解决这个问题，我想在可以再次点击可点击之前添加 1 或 2 秒的超时。

**我将如何做到这一点，我将把它放在我的代码中的什么位置？**

这是可点击的代码

```
$('.drag').on('click', function(e) {
e.preventDefault();

var target = $('.drop-box.spellword:not(.occupied):first');
var targetPos = target.position();
var currentPos = $(this).offset();
var b = $(this);

if (target.length) {
    target.addClass("occupied");
    $(".minibutton").prop("disabled", true);
    b.clone().addClass(
    b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target);
        if (!$('.drop-box.spellword:not(.occupied)').length) {
            var wordIsCorrect = 0;
            $('.drop-box.spellword').each(function() {
                if ($(this).attr("data-letter") == $(this).find("div").attr("data-letter")) {
                    wordIsCorrect++;
                }
            });
            console.log(wordIsCorrect);
            console.log($('.drop-box.spellword').length);
            if ($('.drop-box.spellword').length == wordIsCorrect) {

                $('.drop-box.spellword').addClass('wordglow2');
                $(right).val('Well Done!');
                $(right).show();
                audioS.play();
                $('.counter').html(completeWords + '/6').show();
                $(wrong).hide();
                $('.minibutton').prop('disabled', false);

            } else {

                $('.drop-box.spellword').addClass("wordglow4").css('color', 'transparent');
                $(wrong).val('Try Again');
                $('.minibutton').prop('disabled');
                $(wrong).show();
                audioF.play();
                $('.counter').html(completeWords + '/6').show();
                $(right).hide();
                //$('.minibutton').prop('disabled', true);
                $('.drop-box.spellword').animate({
                    'opacity': 1
                }, 1000, function() {
                    $(this).removeClass('wordglow4').removeClass('occupied').html('')
                });
            }

        }
    });

} 
```

**谢谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:23:49.800

```
var animation = false;
$('.drag').on('click', function(e) {
  if(animation) return;
  animation = true; 
```

并添加到您的回调中：

```
animation = false; 
```

**全点亮：**

```
var animation = false;

$('.drag').on('click', function(e) {
e.preventDefault();
if(animation) return;
animation = true;
setTimeout(function(){animation = false;},1000); // Can't click letters for 1 sec

var target = $('.drop-box.spellword:not(.occupied):first');
var targetPos = target.position();
var currentPos = $(this).offset();
var b = $(this);

if (target.length) {
    target.addClass("occupied");
    $(".minibutton").prop("disabled", true);
    b.clone().addClass(
    b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target);
        if (!$('.drop-box.spellword:not(.occupied)').length) {
            var wordIsCorrect = 0;
            $('.drop-box.spellword').each(function() {
                if ($(this).attr("data-letter") == $(this).find("div").attr("data-letter")) {
                    wordIsCorrect++;
                }
            });
            console.log(wordIsCorrect);
            console.log($('.drop-box.spellword').length);
            if ($('.drop-box.spellword').length == wordIsCorrect) {

                $('.drop-box.spellword').addClass('wordglow2');
                $(right).val('Well Done!');
                $(right).show();
                audioS.play();
                $('.counter').html(completeWords + '/6').show();
                $(wrong).hide();
                $('.minibutton').prop('disabled', false);

            } else {

                $('.drop-box.spellword').addClass("wordglow4").css('color', 'transparent');
                $(wrong).val('Try Again');
                $('.minibutton').prop('disabled');
                $(wrong).show();
                audioF.play();
                $('.counter').html(completeWords + '/6').show();
                $(right).hide();
                //$('.minibutton').prop('disabled', true);
                $('.drop-box.spellword').animate({
                    'opacity': 1
                }, 1000, function() {
                    $(this).removeClass('wordglow4').removeClass('occupied').html('')
                });
            }

        }
    }, function(){
      animation = false;
    });

} 
```

在那里我使用了 setTimeout 而不是回调。

# asp.net - asp.net 将属性添加到 gridview 命令字段删除按钮

> ID：12194650
> 
> 赞同：0
> 
> 时间：2012-08-30T10:19:19.583
> 
> 标签：asp.net, gridview

我有以下网格视图

```
<asp:GridView DataSourceID="odsRooms" DataKeyNames="id,objectid" ID="gvRooms" PageSize="10" runat="server" AutoGenerateColumns="False" >
<Columns>
<asp:TemplateField HeaderStyle-HorizontalAlign="Left" HeaderStyle-VerticalAlign="Bottom" HeaderText="Name">
    <ItemTemplate>
        <%# Eval("title")%>                    
    </ItemTemplate>
    <EditItemTemplate>
        <asp:TextBox ID="tbRoomname" MaxLength="20" Text='<%# Bind("title")%>' runat="server" />                    
    </EditItemTemplate>
</asp:TemplateField>
<asp:CommandField ValidationGroup="updateroom" ShowDeleteButton="true" DeleteText="Delete" ShowEditButton="true" EditText="Edit" CancelText="Cancel"  />
</Columns>        
</asp:GridView> 
```

现在，一切正常，但是当用户单击 CommandField 行中的删除按钮时，该项目会立即删除而无需确认。我希望将以下属性添加到命令字段的删除按钮： OnClientClick="javascript:return confirm('You sure to delete?');"

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:24:41.667

使用以下代码

```
protected void gvRooms_RowDataBound(object sender, 
                     GridViewRowEventArgs e)
{
   if (e.Row.RowType == DataControlRowType.DataRow)
   {
       LinkButton lb = (LinkButton)e.Row.Cells[1].Controls[1];
       if( lb != null )
       {
           lb.Attributes.Add("onclick", "javascript:return " +
"confirm('Are you sure you want to delete this record ')");
       }      
   } 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T03:03:36.780

您可以将删除列设置为模板，之后您可以使用 OnClientClick 命令在删除数据之前返回确认。

```
<ItemTemplate>
<asp:ImageButton ID="ImageButton1" runat="server" CausesValidation="False" 
CommandName="Delete" ImageUrl="~/Delete.png" Text="Delete" 
OnClientClick="return confirm('Are you sure to delete data?');" />
</ItemTemplate> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-19T07:59:43.480

ASPX

```
<asp:CommandField HeaderImageUrl="..\Images\DeleteImg.png" ShowDeleteButton="True" 
            DeleteImageUrl="..\Images\DeleteImg.png" DeleteText="Delete Record" 
            ItemStyle-Font-Size="8pt" ItemStyle-Width="30px" ButtonType="Image">
</asp:CommandField> 
```

。CS

```
protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // loop all data rows
        foreach (DataControlFieldCell cell in e.Row.Cells)
        {
           // check all cells in one row
           foreach (Control control in cell.Controls)
           {
                // Must use LinkButton here instead of ImageButton
                // if you are having Links (not images) as the command button.
                ImageButton button = control as ImageButton;
                if (button != null && button.CommandName == "Delete")
                    // Add delete confirmation
                    button.OnClientClick = "if (!confirm('Are you sure " + 
                           "you want to delete this record?')) return;";
            }
        }
    }
} 
```

# c# - 为什么 Response.Redirect 保持加载当前页面？

> ID：12194651
> 
> 赞同：0
> 
> 时间：2012-08-30T10:19:20.960
> 
> 标签：c#, asp.net

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Redirect("Home.aspx", false);
} 
```

为什么我的页面在 default.aspx 上保持加载而不重定向到 Home.aspx，加载完成后我的浏览器会弹出一个错误“页面未正确重定向”告诉我清除 cookie 但我仍然遵循相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:28:43.370

请访问以下[链接](http://support.microsoft.com/kb/307903)

**从上面的链接中提取**

HttpResponse 类实现了 Redirect 方法的两个重载版本。第一个重载方法只接受一个输入参数，即目标位置的 URL。该版本定义如下：

```
public void Redirect(string url); 
```

第二个重载方法采用两个输入参数：目标位置的 URL，以及指示是否停止运行当前页面的布尔值。该版本定义如下：

```
public void Redirect(string url, bool endResponse); 
```

当您使用第一个重载版本时，会在内部调用第二个重载版本，并为第二个输入参数传递一个布尔值 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:33:06.577

用这个

```
<%@ Page Language="C#" %>
<script runat="server">
  protected override void OnLoad(EventArgs e)
  {
      Response.Redirect("Home.aspx");
      base.OnLoad(e);
  }
</script> 
```

# git - git 可以检测到在添加之前的提交中发生删除的重命名吗？

> ID：12194656
> 
> 赞同：3
> 
> 时间：2012-08-30T10:19:32.507
> 
> 标签：git

例子：

在以下命令序列之后：

```
echo "abc
> def
> ghi" > a
git add a
git commit -m "Add a"
git rm a
git commit -m "Remove a"
git show HEAD^:a > b
git add b
git commit -m "Add b" 
```

是否有任何参数可以传递给`git log`将显示重命名为 b 的参数？

我问主要是因为 SVN 通过做来支持这个用例`svn cp $REPO/a@$REVISION b`，其中 $REVISION 是一个不存在的修订版；这将导致`svn log b`显示 a 和 b 的历史。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:57:08.543

目前，删除和添加必须在同一个提交中，以便 git 将其检测为重命名。这并不意味着将来有人无法添加该功能（即使您愿意）。这也不意味着您以后不能将它们放入同一个提交中。如果您在推送之前不小心这样做了，您可以使用`rebase -i`or组合提交，`merge --squash`并且将使用标准`git log --follow`命令检测重命名。

# python - 如何为键赋值

> ID：12194658
> 
> 赞同：0
> 
> 时间：2012-08-30T10:19:34.427
> 
> 标签：python, string, dictionary

执行以下操作时出现“不可散列”错误：

```
a = {}
a["wer":"table.%%maker%%"]

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    a["wer":"table.%%maker%%"]
TypeError: unhashable type 
```

“wer”键在这里应该有“table.%maker%”的值，但我不能插入百分号。我应该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T10:21:19.177

您可以在字典键中使用 % 字符，但是您分配的值是错误的。

```
>>> my_dict = {} 
>>> my_dict['wer'] = 'table.%maker%'
>>> my_dict
{'wer': 'table.%maker%'} 
```

您可以将符号与 : 一起使用，如下所示：

```
>>> my_dict = {'wer': 'table.%maker%'}
>>> my_dict
{'wer': 'table.%maker%'} 
```

[Python 有一个很棒的文档，它在这里](http://docs.python.org/tutorial/datastructures.html)描述了如何使用数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:23:27.573

使用它来将值分配给“wer”键：

```
a["wer"] = "table.%%maker%%" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:25:10.130

您可以在字典的构造（init）期间设置值：

```
a = {"wer":"table.%%maker%%"} 
```

或者在构造字典之后，使用下标运算符：

```
a = {}
a["wer"] = "table.%%maker%%" 
```

# jakarta-ee - 如何在 ADF 中以编程方式访问请求参数 lly

> ID：12194659
> 
> 赞同：0
> 
> 时间：2012-08-30T10:19:40.173
> 
> 标签：jakarta-ee, oracle-adf

我有一个要求，我想在 ADF 上下文下运行的托管 bean 中以编程方式访问请求参数（作为 HTTP post/Get 发送）。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:09:45.330

外部上下文使您可以访问请求参数，但使用 ADF Faces 时可能会在页面呈现时发送多个请求。所以最好在页面上定义一个phaseListener（f:view afterMethod）并监听RESTORE_VIEW。然后检查请求参数并将其保存在范围大于请求的托管 bean 中（最好使用 viewScope）。这样，只要页面处于活动状态，您就可以访问其参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:23:44.807

通常，您以编程方式从 ExternalContext 访问请求范围。要获取外部上下文：

```
FacesContext.getCurrentInstance().getExternalContext() 
```

从 ExternalContext 中，您可以访问各种基于请求的信息（标头、参数等）

现在，问题是您是如何发出请求的，因为在使用 ADF 时，通常不会手动构建 HTTP post/get 请求？

# matlab - 如何对非常大的数据集进行潜在语义分析

> ID：12194660
> 
> 赞同：0
> 
> 时间：2012-08-30T10:19:40.643
> 
> 标签：matlab, nlp, pca, dimensionality-reduction, latent-semantic-analysis

我正在尝试对一个非常大的数据集（大约 50,000 个文档和超过 300,000 个单词/术语）运行 LSA 或主成分分析，以降低维度，以便我可以在二维中绘制文档。

我在 Python 和 MATLAB 中尝试过，但由于数据集的体积，我的系统在任一实例中都内存不足并崩溃。有谁知道我可以如何减少负载，或者做某种可以更快更有效地运行的近似 LSA/PCA？我的总体目标是在 300k 单词上进行大幅降维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:33:48.930

你可以看看[Oja 的规则](http://en.wikipedia.org/wiki/Oja%27s_rule)。它定义了一个迭代过程来学习 PCA。现在您只需要实现不要立即从磁盘加载整个数据集，以防止内存过载。

# html - 如何使用鼠标单击旋转画布中的文本？

> ID：12194661
> 
> 赞同：2
> 
> 时间：2012-08-30T10:19:42.563
> 
> 标签：html, canvas, kineticjs

我想知道在画布中添加文本后，如何使用鼠标单击将文本旋转到我喜欢的任何动态角度？这是一个例子：

```
<html>
<head>
 <style>
   body { margin: 0px; padding: 0px; }
   canvas { border: 1px solid #9C9898; }
 </style>
 <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.10.2.js">         </script>
 <script>
   window.onload = function() {
    var angle = 0;
    var stage = new Kinetic.Stage({
      container: "container",
      width: 578,
      height: 200
    });
    var layer = new Kinetic.Layer();
    var text = new Kinetic.Text({
      x:225,
      y: 80,
      text: "Simple",
      fontSize: 30,
      fontFamily: "Calibri",
      textFill: "black"
    });         
    text.on("click", function(){
        angle+=1
        text.transitionTo({
           rotation:Math.PI*angle/2,
           duration:1 

        });
     });
     layer.add(text);
     stage.add(layer);
  }
 </script>
 </head>
 <body>
<div id="container"></div>
</body>
</html> 
```

这里使用鼠标单击，每次单击鼠标时它都会旋转 45 度，但我想将文本旋转到任何所需的角度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:22:42.310

[这个库](http://janne.aukia.com/zoomooz/)旋转和缩放 HTML 画布。也许你的工作没问题。它被称为 zoomooz.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:01:47.713

请参考以下代码以动态旋转画布中的文本

```
<html>

<head>
 <style>
   body { margin: 0px; padding: 0px; }
   canvas { border: 1px solid #9C9898; }
 </style>
 <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.10.2.js">         </script>
 <script>
   window.onload = function() {
     var angle = 0;
     var stage = new Kinetic.Stage({
       container: "container",
       width: 578,
       height: 200
     });
     var layer = new Kinetic.Layer();
     var text = new Kinetic.Text({
       x:225,
       y: 80,
       text: "Simple",
       fontSize: 30,
       fontFamily: "Calibri",
       textFill: "black"
     });         
     text.on("click", function(){
       angle=getRandomInt(1,4);
       text.transitionTo({
         rotation:Math.PI*angle/2,
         duration:1 

       });
     });
     layer.add(text);
     stage.add(layer);
   }
     function getRandomInt (min, max) {
       return Math.random() * (max - min + 1);
     }

 </script>
 </head>
 <body>
<div id="container"></div>
</body>
</html> 
```

# c++ - Windows 8 和 CListCtrl

> ID：12194663
> 
> 赞同：1
> 
> 时间：2012-08-30T10:19:50.323
> 
> 标签：c++, mfc, windows-8, clistctrl

我目前正在尝试将产品移植到 Windows 8（桌面模式）。根据微软的说法，该产品应该可以正常工作，但是在使用 CListCtrl 调用时我遇到了问题。列表控件生成列表项，但没有文本显示在列表控件上，只是一个空白文档图标。

该控件是所有者绘制的控件，传入的数据肯定是有效的，但是当将此数据插入控件的新条目时，它最终显示为空白。这只发生在 Windows 8..

有没有人遇到过这个问题，或者对这个问题有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:33:53.090

事实证明，我们正在调用 ListBox_AddItemData() 来推送 Windows 消息，这在以前的 Windows 版本中有效，但 Windows 8 不允许这样做。

实际上捕获此消息的是 ListView 控件。一旦我切换了调用 ListBox_AddItemData() 的函数来发送自定义消息，被 ListView 控件捕获，指针现在是正确的，因此在 Listbox_AddItemData 的消息破解程序中发生了一些变化。

# android - SQLiteOpenHelper.close() 和 SQLiteDatabase.close() 有什么区别？

> ID：12194664
> 
> 赞同：7
> 
> 时间：2012-08-30T10:19:51.503
> 
> 标签：android, android-sqlite

当我打电话时会发生什么，当我打电话`SQLiteOpenHelper.close()`时会发生什么`SQLiteDatabase.close()`？

对于我的 android 应用程序，我总是创建`Application`具有单个实例的`MySQLiteOpenHelper`类的子类，该子类的子类`SQLiteOpenHelper`将由所有应用程序组件（如服务、活动和广播接收器）共享。

在`MySQLiteOpenHelper`中，我有单个实例`SQLiteDatabase`。我在 Application.onCreate() 方法中创建实例，并且`MySQLiteOpenHelper`从不调用`close()`任何实例。虽然我在每个我用来插入、更新或删除数据的游标对象上显式调用 close() 。`SQLiteOpenHelper``SQLiteDatabase``query()``SQLiteStatement`

到目前为止，它工作正常，没有任何问题。但最近我收到了来自用户的崩溃日志。抛出的异常是`SQLiteDatabaseLockedException`. 我读了文件说

> 如果数据库引擎无法获取完成其工作所需的数据库锁，则抛出该异常。

我不明白当我只使用一个数据库实例并且文档说所有数据库调用都由系统序列化时，他们在获取数据库锁方面怎么会出现问题。此外，我没有使用 beginTransaction() 或任何其他相关方法开始或结束任何数据库事务。

经过一番搜索，我认为我应该调用`close()`我的数据库连接。

我的问题是：

1.  我在这里使用正确的方法吗（我不需要在其他应用程序或第 3 方应用程序之间共享数据，因此不使用 ContentProviders）？

2.  我应该什么时候关闭数据库连接？

3.  另外，我应该打电话给 close`MySQLiteOpenHelper`还是`SQLiteDatabase`？

> MySQLiteOpenHelper.java 的代码：

```
public class MySQLiteOpenHelper extends SQLiteOpenHelper {

        public static String TAG = Common.MAIN_TAG + "MySQLiteOpenHelper";

        public static int DATABASE_VERSION = 19;

        private static String DB_PATH = null;
        public static final String DB_NAME = "data.sqlite";
        private SQLiteDatabase db;

        private final Context context;

        /**
         * Constructor Takes and keeps a reference of the passed context in order to
         * access to the application assets and resources.
         * 
         * @param context
         */
        public MySQLiteOpenHelper(Context context) {
            super(context, DB_NAME, null, DATABASE_VERSION);
            DB_PATH = "/data/data/" + context.getPackageName().replace("/", "")
                    + "/databases/";
            this.context = context;
        }

        /**
         * Creates a empty database on the system and rewrites it with your own
         * database.
         * */
        public void createDataBase() throws IOException {

            // Log.v(TAG, "Create database checkpoint - 1");
            boolean dbExist = checkDataBase();
            // Log.v(TAG, "Create database checkpoint - 2");
            if (dbExist) {
                // Log.v(TAG,
                // "Create database checkpoint - 3 - database already exists");
            } else {
                // Log.v(TAG,
                // "Create database checkpoint - 3 - database needs to be copied");
                // Log.v(TAG, "Create database checkpoint - 4");
                try {
                    copyDataBase();
                    checkDataBase();
                    // Log.v(TAG,
                    // "Create database checkpoint - 5 - database cpoied");
                } catch (IOException e) {
                    e.printStackTrace();
                    throw new Error("Error copying database");
                }
            }
        }

        void copyDatabaseToSdCard() throws IOException {
            if (Log.isInDebugMode()) {
                InputStream input = null;
                FileOutputStream output = null;

                int c;
                byte[] tmp;
                try {
                    File databaseFile = new File(
                            Environment.getExternalStorageDirectory(),
                            Common.MAIN_TAG + "sqlite");
                    if (databaseFile.exists()) {
                        databaseFile.delete();
                    }
                    databaseFile.createNewFile();
                    output = new FileOutputStream(databaseFile);
                    int i = 0;

                    input = new FileInputStream(new File(DB_PATH + DB_NAME));
                    tmp = new byte[1024];
                    while ((c = input.read(tmp)) != -1) {
                        i++;
                        output.write(tmp, 0, c);
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    if (input != null) {
                        input.close();
                    }
                    if (output != null) {
                        output.close();
                        output.close();
                    }
                }
            }
        }

        /**
         * Check if the database already exist to avoid re-copying the file each
         * time you open the application.
         * 
         * @return true if it exists, false if it doesn't
         */
        private boolean checkDataBase() {
            // Log.v(TAG, "Check database checkpoint - 1");
            SQLiteDatabase checkDB = null;
            try {
                // checkDB = getWritableDatabase();
                String myPath = DB_PATH + DB_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null,
                        SQLiteDatabase.OPEN_READWRITE);
                // Log.v(TAG,
                // "Check database checkpoint - 2 - got database file on device");
                checkDB.close();
                getWritableDatabase().close();
                // Log.v(TAG, "Check database checkpoint - 3");
            } catch (Exception e) {
                // Log.v(TAG,
                // "Check database checkpoint - 4 - database does not exists on device");
                // database does't exist yet.
                if (checkDB != null)
                    checkDB.close();
                // Log.v(TAG, "Check database checkpoint - 5");
            }

            return checkDB != null ? true : false;
        }

        /**
         * Copies your database FROM your local raw-folder to the just created empty
         * database in the system folder, FROM where it can be accessed and handled.
         * This is done by transfering bytestream.
         * */
        private void copyDataBase() throws IOException {
            // Log.v(TAG, "Copy database checkpoint - 1");
            InputStream input = null;
            FileOutputStream output = null;
            SQLiteDatabase myDB = null;

            myDB = context.openOrCreateDatabase(DB_NAME, 0, null);
            if (myDB != null) {
                myDB.close();
            }

            int c;
            byte[] tmp;
            try {
                File databaseFile = new File(DB_PATH, DB_NAME);
                databaseFile.mkdirs();
                databaseFile.createNewFile();
                output = new FileOutputStream(DB_PATH + DB_NAME);
                int i = 0;

                input = context.getResources().openRawResource(R.raw.hcgtabletdb);
                tmp = new byte[1024];
                while ((c = input.read(tmp)) != -1) {
                    i++;
                    output.write(tmp, 0, c);
                }
                // Log.v(TAG, "Finished copying database");
            } catch (Exception e) {
                e.printStackTrace();
                // Log.e(TAG, "Error in copying database" + DB_NAME);
            } finally {
                if (input != null) {
                    input.close();
                }
                if (output != null) {
                    output.close();
                    output.close();
                }
            }
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            createDataBase();
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }

        public int getIdFor(String name) {
            String query = "SELECT * FROM bloodpressure WHERE userid=" + userId
                + " ORDER BY createdon, timecreatedon";
            Cursor cur = db.rawQuery(query, new String[] {});
            int id = cur.getInt(0);
            cur.close();
            return cur;
        }
} 
```

> MyApplication.java 的代码

```
public class MyApplication extends Application {

    private static MyApplication singleton;
    private MySQLiteOpenHelper dbHelper;

    public static MyApplication getInstance() {
        return singleton;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        singleton = this;
        dbHelper = new MySQLiteOpenHelper(getApplicationContext());
        // Some code
    }

    public MySQLiteOpenHelper getDatabaseHelper() {
        return dbHelper;
    }

} 
```

> 在任何应用程序组件中使用代码：

```
int id = MyApplication.getInstance().getDatabaseHelper().getIdFor("ashish"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:18:08.667

`SQLiteOpenHeloper::close()`和之间没有区别`SQLiteDatabase::close()`。

`SQLiteOpenHeloper::close()`只是一个包装`SQLiteDatabase::close()`。

但根据经验，要么让`SQLiteOpenHelper`管理您的连接，要么不使用它并自己管理它。

看到这篇博文。我使用`SQLiteOpenHelper`自己的预加载数据库，但可以很好地使用`SQLiteOpenHelper`，让它管理连接。

[使用带有 SQLiteOpenHelper 的预加载 sqlite 数据库](http://blog.kdehairy.com/2012/08/19/using-a-preloaded-sqlite-database-with-sqliteopenhelper/)

**更新** 这是源代码`SQLiteOpenHelper::close()`：

```
/**
 * Close any open database object.
 */
public synchronized void close() {
    if (mIsInitializing) throw new IllegalStateException("Closed during initialization");

    if (mDatabase != null && mDatabase.isOpen()) {
        mDatabase.close();
        mDatabase = null;
    }
} 
```

# php - Update form to database where the form was loaded in div using ajax

> ID：12194666
> 
> 赞同：1
> 
> 时间：2012-08-30T10:20:00.587
> 
> 标签：php, jquery, ajax

I have USER.PHP which load USERDETAIL.PHP inside

Inside USERDETAIL.PHP there is updateform (textfield's value is call from mysql)

When I press update button, nothing happened..

user.php

```
<html>
    <a href="#" onClick="permintaanAJAX('profil.php')">My Profile</a>
</html> 
```

library.js

```
var objekXHR=false;
function permintaanAJAX(namaFile) {
    try {
        //  Firefox  IE7 etc
        objekXHR= new XMLHttpRequest();
    } catch (error) {
        try {
            //   IE 5 dan IE 6
            objekXHR = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (error) {
        return false;
    }
    }
    objekXHR.open("POST", namaFile);
    objekXHR.onreadystatechange = responAJAX;
    objekXHR.send(null);
}

function responAJAX() {
   if (objekXHR.readyState !=4) return;
   if (objekXHR.status==200) {
       // jika request sukses
       kaloSukses();
   } else alert("Request gagal: " + objekXHR.statusText);
   return true;
} 
```

userdetail.php

```
<?php
include "session-s.php";
$username = $_SESSION['username'];
$koneksi_database = mysql_connect("localhost","root","");
if (!$koneksi_database)
{
    die('Failed ' . mysql_error());
}
mysql_select_db("fff", $koneksi_database);
$query_dari_db= mysql_query("SELECT * FROM user where code_user='$username'");

if (isset($_POST['submit']))
{
    $usql = "Update user set email='".$_POST['txtemail']."' where code_user='".$_POST['txtcode']."'";
    $updatedata = mysql_query($usql,$koneksi_database);

    print("<br><br><br> <font face = verdana size=2>You have updated your profile");
    echo message.alert("aa");
}
while($baris = mysql_fetch_array($query_dari_db))
{
?>
<form action="" method="post">  
    <table border="0">
        <tr>
            <td><img src=uploads/".$baris['attach']." width=100 height=100/>
            <td>
                <table border="0">
                    <tr>
                        <td>Kode User</td>
                        <td><input type="text" name="txtkode" value="<?php echo $baris['code_user'];?>"  /></td>
                    </tr>
                    <tr><td>Nama</td>
                        <td><input type="text" name="txtnama" value="<?php echo $baris['name'];?>"   /></td>
                    </tr>
                    <tr><td>Alamat</td>
                        <td><input type="text" name="txtalamat" value="<?php echo $baris['adds'];?>"  /></td>
                    </tr>
                    <tr><td>No Telepon</td>
                        <td><input type="text" name="txttelp" value="<?php echo $baris['phone'];?>"  /></td>
                    </tr>
                    <tr><td>Email</td>
                        <td><input type="text" name="txtemail" value="<?php echo $baris['email'];?>"  /></td>
                    </tr>
                    <tr><td>Status</td>
                        <td><input type="text" name="txtstatus" value="<?php echo $baris['status'];?>" disabled /></td>
                    </tr>
                    <tr><td>Attachment<td><input name="uploadedfile1" type="file" size=50 maxlength=50>
                    <tr><th colspan=2 align=right><td><input type="submit" name="submit" value="Submit"></th>
                    </tr>
                </table>
    </table>
</form>

<?php
}
mysql_close($koneksi_database);
?> 
```

# solr - Taking backup in Solr

> ID：12194668
> 
> 赞同：0
> 
> 时间：2012-08-30T10:20:12.547
> 
> 标签：solr, backup

I have a doubt in Solr database backup. I want to know the number of records has been transferred from source to destination. Is it possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:34:47.100

您需要备份数据文件夹。而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:08:49.820

在 SolrAdmin 屏幕中，您可以看到 Solr 中的文档数量：http: [//lucidworks.lucidimagination.com/display/solr/The+Solr+Section](http://lucidworks.lucidimagination.com/display/solr/The+Solr+Section)

![在此处输入图像描述](../Images/ad16eb0cf3f1f7d04d5bb11dd4679596.png)

那是你要找的吗？

# sql - INSERT INTO，基于 WHERE 子句中的 COUNT

> ID：12194673
> 
> 赞同：0
> 
> 时间：2012-08-30T10:20:38.070
> 
> 标签：sql, sql-server

我根据他们提供的产品类型将供应商记录插入到我的表中。

我正在做这样的事情；

```
INSERT INTO RedItems (ID, Name, NumItems)
SELECT ID, Name, NULL
FROM supplier
WHERE status = 'Supplier' 
```

但是，我只想添加**至少提供了一件**“红色”商品的供应商。

“红色”项目没有特定字段，“红色”是产品列中的一种类型。

如何以这种方式构造我的 WHERE 子句？

**编辑**

**供应商**（表）

```
ID    /    Name    /    Status     /     Product
1     /    Smith   /     Supplier    /    Red
2     /    Baxter   /     Supplier    /    Round 
```

**红色项目**（表）

```
ID    /    Name    /    NumItems
1     /    Smith    /       23 
```

其中 NumItems 是该供应商的总（红色）项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:33:26.420

> 我只想添加至少提供了一件“红色”商品的供应商

```
INSERT INTO RedItems (ID, Name, NumItems)
SELECT ID, Name, COUNT(Product)
FROM supplier
WHERE status = 'Supplier'
  AND Product = 'RED'
GROUP BY ID, Name
HAVING COUNT(Product) >= 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:26:30.310

```
INSERT INTO RedItems (ID, Name, NumItems) 
SELECT suppliers.ID, suppliers.Name, count(distinct products.id)
FROM suppliers
    inner join products on suppliers.id = products.supplierid
WHERE status = 'Supplier' and products.type='red'
group by suppliers.ID, suppliers.Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:26:45.910

如果数据在同一个表中，那么您可以执行以下操作：

```
INSERT INTO RedItems (ID, Name, NumItems)
SELECT ID, Name, count(product)
FROM mytable
WHERE status = 'Supplier'
  AND product = 'red'
GROUP BY ID, Name 
```

如果没有，那么

```
INSERT INTO RedItems (ID, Name, NumItems)
SELECT t1.ID, t1.Name, count(p.product)
FROM mytable t1
INNER JOIN products p
   ON t1.id = p.supplierID
WHERE t1.status = 'Supplier'
   and p.product = 'red'
GROUP BY t1.ID, t1.Name 
```

# css - 字体与 pc 中的框顶部对齐，在 mac 中与底部对齐

> ID：12194674
> 
> 赞同：0
> 
> 时间：2012-08-30T10:20:38.827
> 
> 标签：css, fonts, size, line

我有`h2`一个`@font-face`字体。出于某种原因，在 Mac 上，字体与顶部对齐，`h2`如下所示：

![在此处输入图像描述](../Images/697bed7fc28c349ba158133753b55bb8.png)

在电脑上它与顶部对齐：

![在此处输入图像描述](../Images/59fae4bcd2a8a84e0c5c883769d5aa04.png)

我试着给他们`line-height`，`height`并`width`没有使对齐方式相同。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:30:04.480

尝试`vertical-align:baseline;`或`vertical-align:text-top;`。

编辑：这可能行不通。而是检查[一下。](http://www.icavia.com/2010/09/solving-font-face-alignment-issues/)

# sql - How to reduce execution time of the sql query?

> ID：12194678
> 
> 赞同：0
> 
> 时间：2012-08-30T10:20:46.447
> 
> 标签：sql, oracle, toad, execution-time

```
SELECT T1.DESCRIPTION,
   T1.NAME,
   T1.EXTERNALKEY,
   T2.STATECODE
  FROM TABLE1 T1, TABLE2 T2, TABLE3 T3
WHERE     T1.CLASSID = 7040
   AND T2.ID = T3.ID
   AND T2.RECEIVERID = T1.ID
   AND T1.OWNERID = (SELECT ID
                      FROM TABLE1
                     WHERE EXTERNALKEY = 'XXX')
MINUS
SELECT T1.DESCRIPTION,
   T1.NAME,
   T1.EXTERNALKEY,
   T2.STATECODE
FROM TABLE3 T3, TABLE1 T1, TABLE2 T2
WHERE VALUE = 'XXXX' AND T3.ID = T1.ID; 
```

Hi. This is my execution query and it takes very large time. Can anyone changed this to optimized one. Thank u

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:43:54.147

首先我会在表上放置适当的索引，理想情况下覆盖索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:34:10.913

如果没有执行计划，我们当然无法帮助你，但我看到你得到了什么

```
SELECT ID
FROM TABLE1
WHERE EXTERNALKEY = 'XXX' 
```

我建议您使用 WITH 子句将其具体化，或者使用 id%type 将 ID 放入任何 plsql 变量中，并在查询中使用它来代替您的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:14:05.710

```
ALTER TABLE `TABLE1 ` ADD INDEX `index1` (`NAME`, `EXTERNALKEY`);  

ALTER TABLE `TABLE1 ` ADD INDEX `index2` (`OWNERID`);

ALTER TABLE `TABLE2 ` ADD INDEX `index3` (`STATECODE`);

ALTER TABLE `TABLE2 ` ADD INDEX `index4` (`RECEIVERID`); 
```

现在记下查询的执行时间

# matplotlib - matplotlib条形图中的奇怪空格具有> 140个值

> ID：12194679
> 
> 赞同：4
> 
> 时间：2012-08-30T10:20:56.103
> 
> 标签：matplotlib

我正在用 matplotlib 绘制条形图。我需要 144 个竖线。

如果我使用多达 140 个小节，一切都会按预期工作，但是一旦达到 141 个或更多，我会在最后一个小节的右侧得到一个奇怪的空白：

```
IDs =  ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '111', '112', '113', '114', '115', '116', '117', '118', '119', '120', '121', '122', '123', '124', '125', '126', '127', '128', '129', '130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '140', '141', '142', '143', '144']
values =  [875, 1439, 1613, 1112, 1590, 1413, 1146, 1325, 1888, 1500, 1409, 827, 1431, 1024, 1271, 1203, 1503, 1423, 1571, 1216, 1279, 1158, 1095, 1355, 1331, 1292, 1002, 840, 806, 1141, 1032, 1046, 1000, 941, 818, 728, 1146, 1093, 1284, 1074, 1127, 1034, 1207, 1051, 1379, 692, 1205, 1103, 1528, 1105, 1116, 961, 1150, 840, 513, 8, 1270, 1427, 1051, 820, 1439, 852, 0, 1216, 987, 503, 565, 655, 1198, 503, 860, 848, 670, 998, 697, 865, 961, 891, 1095, 1120, 1001, 590, 630, 1133, 862, 787, 959, 1026, 459, 564, 437, 807, 290, 569, 482, 0, 4695, 4726, 4858, 4514, 5039, 5865, 5336, 3873, 5666, 3644, 3789, 4269, 4629, 5308, 3681, 4212, 5003, 5141, 5835, 5331, 5284, 5526, 5185, 4973, 4899, 4866, 5167, 5054, 4413, 5668, 4533, 5122, 127, 4210, 4582, 4734, 4681, 5319, 3519, 5414, 3902, 4139, 5108, 5040, 4450, 4085, 4489, 5632]

width = 0.75
N = len(IDs)
ind = numpy.arange(N)
plt.bar(ind, values,width)
plt.xticks(ind+width/2., IDs)

fig = plt.gcf()
fig.set_size_inches(len(IDs)/4,10)
ax = fig.add_subplot(1,1,1)
ax.tick_params(axis='x', labelsize=6)
plt.tight_layout()

plt.savefig(filename, dpi=200, facecolor='w', edgecolor='w',bbox_inches='tight', pad_inches=0.1)

plt.close() 
```

仅包含 140 个 ID/值对的 ![140 个 ID 和值](../Images/ba819cb11aad2dd1159b5a5e3829433c.png) 结果： 包含 141 个（或更多）ID/值对的结果： ![141 个 ID 和值](../Images/2290745704bba07f5c20cde08938ec36.png)

谁能解释这种行为，或者更好的是，告诉我如何摆脱右侧的这个空白？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:38:16.417

您可以轻松地手动设置限制：

```
fig = plt.figure()
ax = fig.add_subplot(111)

#.... do the plotting here

ax.set_xlim([0,150]) # or any other number
plt.show()  # or savefig 
```

# iphone - How to resize image with aspect ratio?

> ID：12194687
> 
> 赞同：0
> 
> 时间：2012-08-30T10:21:23.430
> 
> 标签：iphone, objective-c, ios

this is my code:-

```
(UIImage*)imageWithImage:(UIImage*)image 
              scaledToSize:(CGSize)newSize;
{        
    UIGraphicsBeginImageContext( newSize );
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:37:04.167

使用[此](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)站点中的类别文件来调整 UIImages 的大小：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:30:41.377

看看这个 Qus ，可能对你有帮助...

> [用纵横比调整 UIImage 的大小？](https://stackoverflow.com/questions/1703100/resize-uiimage-with-aspect-ratio)

# ios - ios相当于Android中的getLastKnownLocation

> ID：12194688
> 
> 赞同：2
> 
> 时间：2012-08-30T10:21:28.687
> 
> 标签：ios, geolocation

在 android 中有方法`getLastKnownLocation()`，它获取设备上最后获取的更新位置。

关键是这个位置甚至不需要从你的应用程序中获取。

我需要在 IOS 中做同样的事情，所以我需要从设备获取的最后一个位置，即使它不是来自我的应用程序（因为我需要的位置根本不需要精确）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:30:28.233

没有全局范围，您可以要求最后一个已知位置。如果您的应用程序需要位置信息，那么您的应用程序将使用 CLLocationManager 及其委托方法，因此别无他法。

请注意，其中涉及一些缓存，只需检查 CLLocation 对象的时间戳 - locationManager:didUpdateToLocation:fromLocation:

马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:37:40.660

我正在解决以下问题：

我创建了一个 GpsManager 类，例如：

```
@interface GpsManager : NSObject <CLLocationManagerDelegate>
@property (nonatomic, retain) CLLocationManager *locationManager;
@property (nonatomic, retain) CLLocation *location;
+(GpsManager*) getShared;
@end 
```

我在appdelegate上启动它，这个类将保存位置并且你可以使用它，它不像android的getLastKnownLocation（）那样实用，但希望有点。

# objective-c - Core Data 未正确重置数据库

> ID：12194692
> 
> 赞同：2
> 
> 时间：2012-08-30T10:21:40.440
> 
> 标签：objective-c, ios, core-data

当用户在那里设置当前模型时，我正在尝试重置我的核心数据数据库。

我尝试了各种选项，但没有一个能正常工作。

我希望在添加任何新数据之前删除核心数据及其所有数据（包括持久数据）。

我一直在使用 SQLite 数据库浏览器 2.0b1 版来检查数据是否已正确删除。此外，我在运行每个测试之前都重置了模拟器。

我正在寻找一个简洁的解决方案，我已经搜索了 stackoverflow 以找到正确的方法。

此解决方案导致数据库被完全删除，但没有创建新数据库。 [https://stackoverflow.com/a/11812997/1565615](https://stackoverflow.com/a/11812997/1565615)

此解决方案并未删除所有数据，因为之前的会话仍然存在并且刚刚创建的数据。 [https://stackoverflow.com/a/1078306/1565615](https://stackoverflow.com/a/1078306/1565615)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:29:23.303

我这样使用它：

1.  删除 coreData 中的所有值
2.  保存上下文，所以这些值真的被删除了。
3.  保存新值并再次保存上下文。

* * *

1.  我正在使用此代码从**每个实体**中删除值：

* * *

```
NSError *error = nil;  

NSManagedObjectContext *context = [self managedObjectContext];
NSFetchRequest *fetchREntityUser            = [[[NSFetchRequest alloc] init] autorelease];
NSEntityDescription *entityUser         = [NSEntityDescription entityForName:@"EntityUser" inManagedObjectContext:context];

[fetchREntityUser           setEntity:entityUser];

NSArray *fetchedObjUser         = [context executeFetchRequest:fetchREntityUser error:&error];

if (error) {
    XLog(@"deleteCoreDataEntitys Error: %@", [error localizedDescription]);
}

for (NSManagedObject *CDentityUser in fetchedObjUser) {
    [context deleteObject:CDentityUser];
}

[context save:&error]; 
```

# java - 我应该如何继承测试以避免定义测试数据的冗余？

> ID：12194696
> 
> 赞同：3
> 
> 时间：2012-08-30T10:21:54.830
> 
> 标签：java, unit-testing, junit

最初，我写了一个类（让我们称之为`RangeSet`），它在一个`ArrayList`区间（我定义为两个 Long 值的区间类）上运行。该列表是间隔的集合，有一种`void add(Range range)`方法可以检查列表中已有的间隔是否存在重叠、覆盖、包含或邻接。关键是要保存非重叠区间的列表。

我为该类设计并编写了大量测试，检查了可能发生的各种情况。这就是我所说的很多代码。

现在事实证明（无论出于何种原因）我不得不将该类拆分为两个单独的类 -`RangeSet`将是一个具有几个有用方法并从中继承的抽象类 - `ArrayRangeSet`（在 中保存间隔集合`ArrayList`）和`TreeRangeSet`（保存集合a ) 中的区间`TreeSet`。方法的实现`add(Range range)`在这两者之间有很大不同。

我应该如何继承测试以避免定义测试数据的冗余？

示例测试如下所示：

```
@Test
void testCase4(){
    RangeSet set = new RangeSet();
    Range r1 = new Range(4, 5);
    Range r2 = new Range(13, 15);
    Range r3 = new Range(19, 22);
    set.add(r1);
    set.add(r2);
    set.add(r3);

    Range testRange = new Range(11,100);
    set.add(testRange);

    assertEquals(2,set.iterator().size());
    assertEquals(new Range(4,5),set.iterator().getAt(0));
    assertEquals(new Range(11,100),set.iterator().getAt(1));
} 
```

我不知道我是否清楚：有很多测试数据定义并且这两个类的测试看起来相同。我该如何解决？

编辑：有没有办法将这些断言语句传递给继承的测试类？毕竟，这些`add`方法应该实现相同的目标，尽管通过不同的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:26:26.320

您可以使用夹具方法，例如[JUnit`@Before`](http://junit.sourceforge.net/javadoc/org/junit/Before.html)。或者您可以将其保存在单独的[夹具类](http://en.wikipedia.org/wiki/Test_fixture#Test_fixture_in_xUnit)中。或者，如果合适的话，您可能希望将其保存在属性文件中。我的意思是有多种选择。

这种固定装置对我来说听起来不像是父母。我的意思是夹具和测试类之间没有`is a`关系。顺便说一句，有基类来处理两个测试类之间的共性是没有害处的。如果您决定使用基类，您可以在那里有一个方法`setup`，或者说`/@Before`，方法，它在一个地方准备数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:28:44.320

将共享的测试数据放入一个不可变且恒定的类中，例如`RangeSetTestData`保存测试运行所需的所有内容。`RangeSet`针对、`TreeRangeSet`和实施三个测试`ArrayRangeSet`，这些测试基于恒定的测试数据来测试功能。

编辑：这样你就不必处理任何属性文件/测试资源的序列化和反序列化，并且恒定的测试数据类可以很好地维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:05:51.627

我会为 编写一个测试类`RangeSet`，它提供测试数据并让测试`ArrayRangeSet`和`TreeRangeSet`继承它。如果您提供一种机制来创建基础测试的实例`ArrayRangeSet`和`TreeRangeSet`在基础测试中创建实例（例如，抽象的“工厂”方法），您可以将在两个类中应该具有相同行为的所有方法的测试放入基础测试中。测试类`ArrayRangeSet`仅`TreeRangeSet`包含“特定”方法的测试。

# c# - VS2005 Build app for ARM platform target

> ID：12194699
> 
> 赞同：0
> 
> 时间：2012-08-30T10:22:14.697
> 
> 标签：c#, visual-studio-2005, arm, platform

I need to develop an app for a terminal which runs on Pocket PC 2002\. This should be possible using .NET Compact Framework 1.0\. But I can't seem to find a way to build the app for use with an ARM CPU. I can only choose x86 or x64 which both do not function (ERROR: 'App' is not a valid Pocket PC application).

Anyone know a solution?

# python - Asynchronous sockets with select - Python

> ID：12194701
> 
> 赞同：5
> 
> 时间：2012-08-30T10:22:24.493
> 
> 标签：python, sockets, select

i am studying asynchronous sockets right now and i have this code:

```
#!/usr/bin/env python 

""" 
An echo server that uses select to handle multiple clients at a time. 
Entering any line of input at the terminal will exit the server. 
""" 

import select 
import socket 
import sys 

host = 'localhost' 
port = 900 
backlog = 5 
size = 1024 
server = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
server.bind((host,port)) 
server.listen(backlog) 
input = [server,sys.stdin] 
running = 1 
while running: 
    inputready,outputready,exceptready = select.select(input,[],[]) 

    for s in inputready: 

        if s == server: 
            # handle the server socket 
            client, address = server.accept() 
            input.append(client) 

        elif s == sys.stdin: 
            # handle standard input 
            junk = sys.stdin.readline() 
            running = 0 

        else: 
            # handle all other sockets 
            data = s.recv(size) 
            if data: 
                s.send(data) 
            else: 
                s.close() 
                input.remove(s) 
server.close() 
```

It shoud be a basic kind of echo server using select(), but when I run it, I ger select error 10038 - attemp to manipulation with something which is not socket. Can someone tell me what is wrong? Thank you:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:35:52.450

你在 Windows 上工作，不是吗？在 Windows 上，选择仅适用于套接字。但是 sys.stdin 不是套接字。从第 15 行删除它，它应该可以工作。

在 Linux 或类似设备上，我希望它可以按照上面列出的方式工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-24T01:29:12.787

我以前解决过一个非常相似的问题。

您可以做的是在自己的线程中运行异步循环，并在用户输入内容时将主线程`.put`数据放入 a`Queue.queue`中。每次循环时，您都可以检查队列中是否有任何内容。如果确实如此，您将对其采取行动，在您的情况下，通过设置`running=0`.

如果你这样做，你需要给 select 一个足够短的超时来响应用户输入，比如 0.01 秒。不要对超时的使用感到反感，这就是 Twisted 的 Win32 选择反应器处理这个问题的方式。

仅供参考，在 Unix 系统上，这种事情要容易一百万倍，在那里您可以选择的不仅仅是套接字。我相信在 Windows 上`select`系统调用是由 Winsock 提供的。在 Unix 上，您可以选择带有文件描述符的任何内容。

如果您需要更多说明，请告诉我。

编辑：你也可以看看`multiprocessing.pipe`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:27:41.743

关于[文档](http://docs.python.org/howto/sockets.html#non-blocking-sockets)，正确的交互方式`select`是

```
ready_to_read, ready_to_write, in_error = select.select(potential_readers,
                                                        potential_writers,
                                                        potential_errs,
                                                        timeout) 
```

在你的代码中，

```
input = [server,sys.stdin] 
```

`sys.stdin`不是套接字（而是文件描述符）。

# java - 如何在 Spring Controller 方法中从许多 @RequestParam 参数切换到 @ModelAttribute

> ID：12194705
> 
> 赞同：4
> 
> 时间：2012-08-30T10:22:33.290
> 
> 标签：java, spring, jsp, controller, spring-annotations

我是 spring 新手，我设法从 JSP 视图中的表单收集数据并将我的表单提交给控制器。从视图获取的数据中，我正在实例化一个模型对象，该对象还包含其他模型对象：

```
@RequestMapping(value = "/updateEntry", method = RequestMethod.GET)
public RedirectView updateAction(ModelAndView model,
@RequestParam(value = "name", defaultValue = "none") String selectedWaveName,
@RequestParam(value = "id", defaultValue = "-1") int id,
@RequestParam(value = "function", defaultValue = "none") String function,
@RequestParam(value = "evidence", defaultValue = "none") String evidence,
@RequestParam(value = "action", defaultValue = "none") String action,
@RequestParam(value = "topicId", defaultValue = "-1") int topicId,
@RequestParam(value = "topic", defaultValue = "none") String topic,
@RequestParam(value = "topicDesc", defaultValue = "none") String topicDesc,
@RequestParam(value = "waveId", defaultValue = "-1") int waveId,
@RequestParam(value = "waveStart", defaultValue = "none") String waveStart,
@RequestParam(value = "waveEnd", defaultValue = "none") String waveEnd)
throws ParseException {

DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
Date dateStart = formatter.parse(waveStart);;
Date dateEnd = formatter.parse(waveEnd);

waveDAO.updateFormResults(new FormResults(id, 
new Topic(topicId, topic, topicDesc), 
new Wave(waveId, selectedWaveName, dateStart, dateEnd), 
evidence, action, function));
return new RedirectView("/hr/?name=" + selectedWaveName);
} 
```

如何使用 @ModelAttribute 用更少的行替换整个 @RequestParam 行？我是否还需要将 @ModelAttribute 注释添加到模型类（FormResults、Topic、Wave）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:26:36.430

`@ModelAttribute`这里真的不需要。我通常做的（但可能不适合你的情况）是一个包含所有这些数据的对象：

```
@RequestMapping(value = "/updateEntry", method = RequestMethod.GET)
public RedirectView updateAction(ModelAndView model, Options options) throws ParseException {
    ...
}

public static class Options {
    private String selectedWaveName,
    private int id,
    ...
    // Getters and setters
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:25:13.403

ModelAttribute 注释最终确实起作用了，我发现当使用这个注释时，你从前端传递的变量，在我的例子中，来自 JSP 页面，应该与你声明的属性具有完全相同的名称是模特班！

例如，如果您有一个模型类，例如：

```
public class FormResults {

private int id;
private Topic topic;
private Wave wave;
private String evidence;
private String action;
private String manager;
 ... } 
```

您还需要所有类属性的 getter 和 setter 方法，以及默认构造函数！

您从 JSP 页面发送到使用 @ModelAttribute 注释的控制器方法的变量将被命名为：

```
<input type="text" name="id"     ...
<input type="text" name="evidence" ...
<input type="text" name="action"   ....
<input type="text" name="manager"  ... 
```

这也适用于您有一个具有另一个对象作为属性的复杂对象的情况（例如在我的情况下：Topic、Wave）。您所要做的就是用类名的前缀命名这些输入：例如：主题，波，然后是类属性，例如：topic.id，wave.id ...

这是我的控制器方法的签名：

```
@RequestMapping(value = "/updateEntry", method = RequestMethod.GET)
public ModelAndView updateAction(ModelAndView model,
        @ModelAttribute("fr") FormResults fr) throws ParseException {
...} 
```

Spring 自动创建一个 FormResults 对象。就是这样！:)

# jquery - Jquery: simple selector does not work, ignoring parent element

> ID：12194708
> 
> 赞同：1
> 
> 时间：2012-08-30T10:22:34.830
> 
> 标签：jquery, jquery-selectors

I've got a simple piece of HTML, that I retrieve via AJAX. It looks like this:

```
<div id="hiddencontact">
    <form id="hiddenform"></form>
</div> 
```

So, that's stored in the 'data' variable.

Now I try to run this:

```
$('#hiddencontact', data); 
```

But it does not work. I do not get the div.

This, however, does work, and returns the form to me:

```
$('#hiddenform', data); 
```

Why is that? Why is the first element being ignored?

Btw: I'm using jquery 1.7.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:24:18.020

> 为什么第一个元素被忽略？

因为的根节点`data`就是`#hiddencontact`它自己。所以你找不到它作为嵌套元素

随着`$('#hiddencontact', data);`您正在寻找嵌套在的元素`data`：就像搜索`$(data).find('#hiddencontact')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:26:10.347

只需执行此操作`$(data);`，您将获得整个 div

# objective-c - Parsing Data from a Website in Objective-c

> ID：12194710
> 
> 赞同：0
> 
> 时间：2012-08-30T10:22:39.970
> 
> 标签：objective-c, xml-parsing, html-parsing

Can you create an XML for a website that you do not own?

This is the first question came to my mind when I was thinking to do the following demo app:

Let's say there is a `Main Page` contains `5 Best Students` each has a unique URL with the pattern (`http://www.URL.com/StudentDetail.aspx?Id=xxx`) directing to a `Student Detail Page`.

In `Student Detail Page` there are 3 attributes for a Student. `(Name,GPA,Major)`

The website updates the names every day with new `5 Students` and different `5 URLS` with the pattern I mentioned above.

![enter image description here](../Images/42a90abd94aee7f0efd60ab717facc26.png)

So, If I want to parse all the 5 best students to my UIView. What would be the best ideal way to do it? HTML Parsing would be a nightmare for me because the html `Main Page` code is not well organized. That's why I asked the first question above.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:38:17.087

虽然有人说你不能在这里使用正则表达式来解析 HTML 页面，但我仍然建议尝试一下。如果您需要简单地提取与您的 pttern 匹配的字符串（例如[http://www.URL.com/StudentDetail.aspx?Id=xxx](http://www.URL.com/StudentDetail.aspx?Id=xxx)），则正则表达式可能会派上用场。而且您无需担心糟糕的 HTML。

# javascript - 使用 Sharepoint 2007 寻找 SPservices 的 UpdateListItems 的一个非常简单的示例

> ID：12194715
> 
> 赞同：0
> 
> 时间：2012-08-30T10:22:50.117
> 
> 标签：javascript, jquery, sharepoint-2007

我刚刚进入 Sharepoint 的 SPServices，似乎它可能是我需要的业务，即以编程方式更新列表中的值。

作为测试，我尝试使用以下代码更新名为 jQueryList 的列表的 Title 列，其中包含一行 (ID=1)。

```
<script src="..../js/jquery.SPServices-0.7.1a.min.js" type="text/javascript"></script>
<script src="..../js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
$(#inhere).html(waitMessage).SPServices({
    operation: "UpdateListItems",
    listName: jQueryList,
    ID: 1,
    valuepairs: [["Title", "eggs"]],
    completefunc: function (xData, Status) {
        var out = $().SPServices.SPDebugXMLHttpResult({
            node: xData.responseXML,
            outputId: inhere
        });
        $(#inhere).html("").append("<b>This is the output from the UpdateListItems operation:</b>" + out);
        $(#inhere).append("<b>Refresh to see the change in the list above.</b>");
    }
});
}
</script>
<div id="inhere">
</div> 
```

我已经把它放在我的列表 jQueryList 底部的 CEWP 中，但它不会更新我的行中的值。对这个问题的完全新手风格表示歉意，但如果有人有任何指示，我将不胜感激。注意：我通过在默认视图中显示 ID 列来获取 ID 值。

最好的问候/科尔姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:09:15.033

下面的内容在同一个子站点中的列表上运行良好，我将不得不进一步挖掘以了解如何为单独的子站点上的列表执行此操作。

```
<script src="http://ccs.xxx.corp/sites/TDP_SCS/SiteAssets/js/jquery-1.8.2.js" type="text/javascript"></script>
<script src="http://ccs.xxx.corp/sites/TDP_SCS/SiteAssets/js/jquery.SPServices-0.7.2.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
$(document).ready(function() {
$().SPServices({
    operation: "UpdateListItems",
    async: false,
    batchCmd: "Update",
    listName: "jQueryList",
    ID: 1,
    valuepairs: [["Title", "eggs & ham"]],
    completefunc: function (xData, Status) {
        alert("Dang");
    }
});
});
</script> 
```

# javascript - How to limit the amount of times a javascript highlight function can be used?

> ID：12194716
> 
> 赞同：0
> 
> 时间：2012-08-30T10:22:50.330
> 
> 标签：javascript, limit, counter, highlight

I have this JavaScript function that highlight table TD's when clicked on each individual TD

```
<script type="text/javascript">
    window.onload = function(){
    var all = document.getElementsByClassName("clicker");
    for (var i=0;i<all.length;i++) {
        all[i].onclick = inputClickHandler;       
    }
};

function inputClickHandler(e){
    e = e||window.event;
    var tdElm = e.target||e.srcElement;
    if(tdElm.style.backgroundColor == 'rgb(0, 153, 0)'){
        tdElm.style.backgroundColor = '#fff';
    } else {
        tdElm.style.backgroundColor = '#009900';
    }
}
    </script> 
```

And I have a table say 8 by 8 and they are all square. Now above the table I have a form with a selection menu which looks like this.

```
<form id="filter">
<select id="highlights" name="highlights">
<option value="0"> Select... </option>
<option value="20"> 20 </option>
<option value="24"> 24 </option>
<option value="28"> 28 </option>
<option value="30"> 30 </option>
</select> 
```

Basically what I want is for the user to select an option from the highlights form, so say I pick "24", it then only allows me to highlight "24" squares in the table. If I change from "24" to "28" im then allowed to highlight "28" and no more than what is selected. How would I do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:32:37.577

只需执行以下操作：

```
var max = 0, highlighted = 0
document.getElementById('highlights').onchange = function () {
  max = this.value
}
...
function inputClickHandler(e){
  e = e||window.event;
  var tdElm = e.target||e.srcElement;
  if(tdElm.style.backgroundColor == 'rgb(0, 153, 0)'){
    highlighted--
    tdElm.style.backgroundColor = '#fff';
  } else if (highlighted != max) {
    highlighted++
    tdElm.style.backgroundColor = '#009900';
  }
} 
```

# ruby-on-rails - Where classes live? Models or lib directory?

> ID：12194717
> 
> 赞同：0
> 
> 时间：2012-08-30T10:22:52.010
> 
> 标签：ruby-on-rails

I've inherited a rails project that I am looking to refactor. The app uses ActiveRecord very lightly; most of the calls are to REST endpoints. Right now the classes that make these calls are in the lib directory. I've been reading a couple of [posts regarding the lib directory](http://blog.codeclimate.com/blog/2012/02/07/what-code-goes-in-the-lib-directory/), and I'm wondering the rationale why the original developer did not use the models directory (there must be some reason) and what are the pros/cons of moving these classes into the models directory.

It "feels" like these classes should be in the models directory as they are core to the application.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:01:56.277

这就是我正在做的，将所有负责使用数据库的类放入模型文件夹中。如果是库或类，它不依赖于数据库并且可以在不同的项目中使用，那么它可以放在 lib 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:38:34.563

如果你的类不是完全与模型相关（ActiveRecord），你应该考虑把它放在一个比模型更具体的地方，但是如果你把它放在模型中，把它们放在一个封闭的文件夹中。

app -> models -> endpoints 里面 config -> application.rb，把这行代码放进去加载

```
config.autoload_paths += %W(#{Rails.root}/app/models/ar) 
```

或者你可以把它放在一个单独的目录 app -> 端点中

这样做的原因是因为您的 REST 端点将被隔离；如果您计划在应用程序上构建更多内容，您的业务逻辑将更加“干净”和模块化，并且不会杂乱无章。

# php - php删除foreach中的元素

> ID：12194722
> 
> 赞同：0
> 
> 时间：2012-08-30T10:23:18.280
> 
> 标签：php, foreach

```
$array = array('1','3','20','10');
foreach ($array as $i=>$arr) {
   if ($i==0) unset($array[$i]);
} 
```

问题：删除一个元素会扰乱这个循环的迭代顺序吗？当我删除索引小于/等于/大于当前迭代索引的元素时会发生什么？

在迭代原始数组时修改原始数组时应该避免做什么？

编辑：如果数组是通过引用传递的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:17:25.850

特别是对于您提供的代码，一次

```
$array = array('1','3','20','10'); 
```

被声明，键被绑定，所以

```
if($i==0) unset($array[$i]); 
```

只会取消设置`'1'`，你会留下

```
array(2) {
  [1]=>
  string(1) "2"
  [2]=>
  string(1) "3"
} 
```

* * *

正如@cleong 所说，PHP 似乎在迭代时创建了数组的副本：

```
$arr=array("1","2","3");
foreach($arr as $idx=>$val)
{
    if(isset($arr[1])) unset($arr[1]);
    echo $val."\n";
}
var_dump($arr); 
```

将返回

```
1
2
3
array(2) {
  [0]=>
  string(1) "1"
  [2]=>
  string(1) "3"
} 
```

因此，在迭代中取消设置元素是“可以的”，只要`unset`不会产生错误（例如取消设置已经取消设置的变量）。

**但是**，我认为这不是一个好主意。如果您的问题是“如何避免这种情况”，**请举例说明您为什么必须这样做**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:37:07.570

当您使用 foreach loop() 时，PHP 会创建一个数组的副本。即使您完全清除了数组，迭代也会继续进行，就像什么都没发生一样。以机智：

```
$array = array("a", "b", "c");

foreach($array as $element) {
    $array = null;
    echo "$element ";
} 
```

输出：

```
a b c 
```

# php - 通过引用挖掘数组不起作用？

> ID：12194724
> 
> 赞同：1
> 
> 时间：2012-08-30T10:23:25.920
> 
> 标签：php, arrays, reference, variable-assignment

仅提供代码示例更容易：

```
private $ParseRuleMap = array();

public function __construct( $rules ) {
    foreach( $rules as $which=>$rule ) {
        $mapping = $rule->getMinimumMatchables();

        foreach( $mapping as $match ) {
            $rulelvl &= $this->ParseRuleMap;    // Fun begins here

             $len = strlen($match);
            for( $i=0; $i<$len; $i++ ) {
                if( !isset($rulelvl[ $match[$i] ]) ) {
                    $rulelvl[ $match[$i] ] = array();
                }
                $rulelvl &= $rulelvl[ $match[$i] ]; // Here too!
            }

            // ... other code here ...
        }
    }
} 
```

我经常收到以下错误垃圾邮件（对于上面注释的行）：

> PHP 警告：第 35 行的 parser.php 中不能使用标量值作为数组

我是否误解了参考分配在这里的工作方式？要（尝试）清楚，`$rulelvl`应该通过给定的`$this->ParseRuleMap`'s 子数组行向下迭代。参考分配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:43:36.740

`&=`是`bitwise operator`（按位“和”并赋值）不是`reference operator`

将您的代码更改为：

```
$rulelvl = &$this->ParseRuleMap;    // note the = & 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:10:53.100

> 我在这里放置的另一个提示作为答案，即使它只是一个评论。

您已经知道自己做错了什么，但可能不清楚原因。当然你打错了什么，但只是一个简短的提醒：

> 1.) 你的构造函数做的太多了。将这里所做的事情放到它自己的函数中。

```
public function __construct($rules) {
    $this->processRules($rules);
}

private function processRules($rules) {
    foreach ($rules as $which => $rule) {
        ...
    }
} 
```

这降低了构造函数的复杂性。稍后您可能已经想将正确的对象传递给构造函数，以便您可以从整个类中删除该预处理。但这暂时没有必要，甚至可能永远不会变得有必要，所以只是给出一些展望。

> 2.) 处理本身非常嵌套和复杂。通过将大问题分成更小的部分来降低复杂性。

当然，这与您的需求有关，希望以下代码提供一些有用的示例，您可以如何通过拆分多个函数来降低复杂性：

```
private function processRules($rules) {
    foreach ($this->rulesGetMappingsMatches($rules) as $match) {
        $this->parseRuleMapMatch($this->parseRuleMap, $match);
    }
}

private function parseRuleMapMatch(&$parseRuleMap, $match) {
    $len = strlen($match);
    foreach(str_split($match) as $char) {
        isset($parseRuleMap[$char])) || $parseRuleMap[$char] = array();
        $parseRuleMap = &$parseRuleMap[$char];
    }
    ...
}

private function rulesGetMappingsMatches($rules) {
    $matches = array();
    foreach ($rules as $rule) {
        foreach ($rule->getMinimumMatchables() as $match) {
            $matches[] = $match;
        }
    }
    return $matches;
} 
```

> 3.) 不要在不需要的地方使用引用。

我不知道为什么在你的场景中你使用引用。获得更好的变量名？那么可能就没事了。为了提高速度？那么你不应该这样做，除非你真的知道你在做什么，因为 PHP 在优化速度和内存方面做得很好。通常最好让函数返回一个值，而不是通过引用传递并修改该值。这也有助于代码重用和调试。

```
private function processRules($rules) {
    foreach ($this->rulesGetMappingsMatches($rules) as $match) {
        $this->parseRuleMap = $this->parseRuleMapMatch($this->parseRuleMap, $match);
    }
}

private function parseRuleMapMatch($parseRuleMap, $match) {
    ...
    return $parseRuleMap;
} 
```

> 4.）最简单的解决方案通常是解决方案。

好吧，只是示例：

```
public function __construct( $rules ) {
    $this->importRulesMapFromArray($rules);
} 
```

应该很自说自话。分而治之。还要起个好听的名字。你会在编写代码时犯更少的错误。

# jaxb - 如何设置 Jaxb XMLelement 的值？

> ID：12194728
> 
> 赞同：2
> 
> 时间：2012-08-30T10:23:29.170
> 
> 标签：jaxb

我的问题是：从`xml`计划中：

```
<topnode>
    topNodeValue
   <bottomnode/> 
</topnode> 
```

用 Jaxb 生成的类看起来像

```
class topnode {
    List<bottomnode> bottomnodeList;
} 
```

它不会生成 value 字段来为 topnode 设置值。

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:02:40.873

当元素的内容同时包含字符和元素数据时，它被称为混合内容。在[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)`@XmlMixed`中，它使用如下注释映射：

```
class topnode {
    @XmlMixed
    String text;

    List<bottomnode> bottomnodeList;
} 
```

混合内容的使用可能会很棘手，因为您可能会因为用于格式化的文本节点而得到意想不到的结果。有关更详细的解释，请参阅以下对类似问题的回答。

*   [https://stackoverflow.com/a/11099303/383861](https://stackoverflow.com/a/11099303/383861)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:10:36.377

对于文本节点，使用`@XmlValue`注释。像这样的东西：

```
class topnode {

    @XmlValue
    String topNodeValue;

    List<bottomnode> bottomnodeList;

} 
```

作为建议，请尝试尊重 java 命名标准，如果它与 xml 元素不匹配，请使用注释的`name`属性。`@Xml...`

# php - 通过 Ajax POST 和 PHP 将数据保存到文件

> ID：12194735
> 
> 赞同：5
> 
> 时间：2012-08-30T10:23:50.100
> 
> 标签：php, jquery, ajax

我只想在服务器上的文件中保存一些 JSON（使用 Javascript 生成）。但我什至不让它与一个简单的字符串一起工作：

HTML 文件：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<style>
#test{
padding:20px 50px;
background:#ccc;
color:#000;
}
</style>
<script>
$(function(){
$('#test').click(function(){
    $.ajax({
        url: "page.php",
        data: {"foo": "bar"},
        processData: false,
        contentType: 'application/json'
    });

});
});
</script>
</head>
<body>

<div id="test">
KLICK
</div>
</body>
</html> 
```

php文件是这样的：

```
<?php
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w');
fwrite($fh,$_POST['data']);
fwrite($fh,$_POST['foo']);
fwrite($fh,$_POST["foo"]);
fwrite($fh,$_POST[foo]);
fclose($fh); 
```

没有任何效果。我也试过

```
$.ajax({
    var datatosend="foo bar";
    url: "page.php",
    data: datatosend,
    processData: false
    }); 
```

我不知道有什么问题。单击html文件中的div后，txt文件就在那里。但是文件中没有内容。如果我只是将 $_POST 写入文本文件，则该文件包含文本“数组”，这意味着 $_POST 有一些内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:28:19.843

这里很少有事情会出错。检查您尝试写入的目录的权限。还要确保您的 ajax 调用使用的是 POST 方法。

```
$.ajax({
  url: "page.php",
  type : 'POST',
  ...
}); 
```

如[jQuery 文档](http://api.jquery.com/jQuery.ajax/)中所述，type 参数设置请求类型，POST 或 GET。

> 要发出的请求类型（“POST”或“GET”），默认为“GET”。

* * *

要考虑的另一件事是，您实际上并没有编写 JSON 数据。数据以该格式发送，但当它到达`$_POST`变量时，它已被转换为数组。您应该尝试将 PHP 数组写入文件 -

```
$fh = fopen($myFile, 'w');
fwrite($fh,'<?php $arr='.var_export($_POST['data'],true).' ?>');
fclose($fh); 
```

那应该给出一个类似于这个的文件 -

```
<?php
  $arr = array(
    'foo'=>'bar'
  )
?> 
```

如您所见，该`var_export()`函数返回变量的可解析版本。

*   [`var_export()`](http://php.net/manual/en/function.var-export.php)

> **var_export** — 输出或返回变量的可解析字符串表示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:28:11.520

您需要`POST`拨打电话，见下文：

```
$('#test').click(function(){
    $.ajax({
        url: "page.php",
        type : 'post', 
        data: {"foo": "bar"},
        processData: false,
        contentType: 'application/json'
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:28:25.850

默认情况下，所有 $.ajax() 请求都使用 GET 方法发送，而不是 POST。您需要将类型指定为“POST”：

```
$.ajax({
    var datatosend="foo bar";
    url: "page.php",
    type: 'post',
    data: datatosend,
    processData: false
    }); 
```

从文档中：

> 类型 - 字符串
> 
> 默认值：“获取”
> 
> 要发出的请求类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:28:54.367

也许应该是

```
 $.ajax({
    url: "page.php",
    type: "POST", // add this
    data: {"foo": "bar"},
    processData: false,
    contentType: 'application/json'
}); 
```

**或者**

在 PHP 中使用`$_REQUEST`而不是`$_POST`

# ruby-on-rails-3 - DRY-ify RSpec 测试

> ID：12194736
> 
> 赞同：0
> 
> 时间：2012-08-30T10:23:58.540
> 
> 标签：ruby-on-rails-3, rspec

我花了一个晚上的大部分时间阅读有关 RSpec 的各种文章和演练。虽然我学到了很多东西，但我仍然对保持干燥和有用的东西有点不知所措。RSpec 的表现力很棒，但它似乎让初学者难以编写简洁的测试。

我可以看到自己经常做的一件事是测试每个边缘情况的两侧，以及单个变量的单个或多个有效值。目前，我对这样的事情有以下几点：

```
context "when physical address line 1 is too short" do
  before { @contact.physical_addr_line_1 = "1" }

  it { should_not be_valid }
  specify { @contact.save.should_not be_true }
end

context "when physical address line 1 is too long" do
  before { @contact.physical_addr_line_1 = "1"*111 }

  it { should_not be_valid }
  specify { @contact.save.should_not be_true }
end

context "when physical address line 1 is valid length" do
  before { @contact.physical_addr_line_1 = "11111" }

  it { should be_valid }
  specify { @contact.save.should be_true }
end 
```

有没有办法重构它来清理它？我想在其中添加多个有效值（目前仅根据长度检查该值），并对多个其他地址行变量执行相同的测试集。效率、可读性和可维护性对我来说都很重要，因此任何关于如何更好地进行此类测试的建议或任何推荐的阅读材料都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:33:30.830

你可以像这样把它弄干一点。我认为也让它更具可读性。

在 before 块中定义一次有效属性：

```
before(:each) do
  @attr = #attributes hash
end

context "validations" do

  it "should not accept attribute that is too long" do
     long_string = "a" * unacceptable number
     Model.new(@attr.merge(attribute: long_string)).should_not be_valid
  end

  it "should not accept attribute that is too short" do
     short_string = "a" * unacceptable number
     Model.new(@attr.merge(attribute: short_string)).should_not be_valid
  end
end 
```

此外，shouda gem 非常棒。[https://github.com/thoughtbot/should](https://github.com/thoughtbot/shoulda)

它将允许编写如下测试：

```
it {should ensure_length_of(:attribute).is_at_least(n).is_at_most(n)} 
```

# android - Android 本地化语言环境不起作用，所有区域代码都有问题

> ID：12194737
> 
> 赞同：3
> 
> 时间：2012-08-30T10:24:14.600
> 
> 标签：android, locale

除了普通的德语语言之外，我还需要在我的应用程序中添加像瑞士这样的子语言环境。

我找到的德语资源文件夹的语言环境扩展名是 de。所以我的文件夹被命名为“values-de”。这很好用。

然后我添加了“values-de_CH”并不断收到错误“无效的资源目录名称”。

我还尝试了“values-de_rCH”和“values-de_ch” - 无济于事。

当我将手机设置为德语（瑞士）并从应用程序中打印语言环境时：

```
String locale = java.util.Locale.getDefault().getDisplayName();
String locale2 = java.util.Locale.getDefault().getLanguage();

if (DEBUG)
    Log.i(this.getClass().getSimpleName(), " ->" + "locale= " + locale
        + "country= " + locale2); 
```

，它也只打印“de”

我也尝试了“values-en_US”并得到了同样的错误。

当我打印所有可用的语言环境时，我什至得到了这些：

```
07-30 11:45:38.236: D/asset(2298): locale 32: 'uk_UA'
07-30 11:45:38.236: D/asset(2298): locale 33: 'en_ZA'
07-30 11:45:38.236: D/asset(2298): locale 34: 'en_GB'
07-30 11:45:38.236: D/asset(2298): locale 35: 'et_EE'
07-30 11:45:38.236: D/asset(2298): locale 36: 'ga_IE'
07-30 11:45:38.236: D/asset(2298): locale 37: 'en_IE'
07-30 11:45:38.236: D/asset(2298): locale 38: 'bg_BG'
07-30 11:45:38.236: D/asset(2298): locale 39: 'fi_FI'
07-30 11:45:38.236: D/asset(2298): locale 40: 'sl_SI'
07-30 11:45:38.236: D/asset(2298): locale 41: 'mk_MK'
07-30 11:45:38.236: D/asset(2298): locale 42: 'sk_SK'
07-30 11:45:38.236: D/asset(2298): locale 43: 'no_NO'
07-30 11:45:38.236: D/asset(2298): locale 44: 'ro_RO'
07-30 11:45:38.236: D/asset(2298): locale 45: 'hr_HR'
07-30 11:45:38.236: D/asset(2298): locale 46: 'es_ES'
07-30 11:45:38.236: D/asset(2298): locale 47: 'is_IS'
07-30 11:45:38.236: D/asset(2298): locale 48: 'sr_RS'
07-30 11:45:38.236: D/asset(2298): locale 49: 'en_US'
07-30 11:45:38.236: D/asset(2298): locale 50: 'es_US'
07-30 11:45:38.236: D/asset(2298): locale 51: 'lt_LT'
07-30 11:45:38.236: D/asset(2298): locale 52: 'pt_PT'
07-30 11:45:38.236: D/asset(2298): locale 53: 'en_AU'
07-30 11:45:38.236: D/asset(2298): locale 54: 'hu_HU'
07-30 11:45:38.236: D/asset(2298): locale 55: 'ru_RU'
07-30 11:45:38.236: D/asset(2298): locale 56: 'lv_LV'
07-30 11:45:38.236: D/asset(2298): locale 57: 'kk_KZ'
07-30 11:45:38.236: D/asset(2298): locale 58: 'en_NZ'
07-30 11:45:38.236: D/asset(2298): locale 59: 'nl_BE'
07-30 11:45:38.241: D/asset(2298): locale 60: 'de_DE'
07-30 11:45:38.241: D/asset(2298): locale 61: 'sv_SE'
07-30 11:45:38.241: D/asset(2298): locale 62: 'de_CH'
07-30 11:45:38.241: D/asset(2298): locale 63: 'fr_CH'
07-30 11:45:38.241: D/asset(2298): locale 64: 'da_DK'
07-30 11:45:38.241: D/asset(2298): locale 65: 'nl_NL'
07-30 11:45:38.241: D/asset(2298): locale 66: 'pl_PL'
07-30 11:45:38.241: D/asset(2298): locale 67: 'fr_FR'
07-30 11:45:38.241: D/asset(2298): locale 68: 'el_GR'
07-30 11:45:38.241: D/asset(2298): locale 69: 'ko_KR'
07-30 11:45:38.241: D/asset(2298): locale 70: 'tr_TR'
07-30 11:45:38.241: D/asset(2298): locale 71: 'de_AT'
07-30 11:45:38.241: D/asset(2298): locale 72: 'it_IT'
07-30 11:45:38.241: D/asset(2298): locale 73: 'cs_CZ' 
```

有没有办法拥有这些地区或者我需要做些什么特别的事情？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T11:09:34.033

您需要使用“values-de-rCH”。文件名中不允许使用下划线。

请参阅[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# c# - 创建自过期文件

> ID：12194739
> 
> 赞同：3
> 
> 时间：2012-08-30T10:24:20.067
> 
> 标签：c#, windows, vb.net

我经常使用各种 shell 脚本创建日志/报告文件。这很好，但大多数时候我只需要简单地看一下内容——通常是同一天或最多一周后。

我想做的是能够将文件标记为过期，因此在给定的时间段后，文件要么被删除，要么被移动到存档目录。

由于我可以控制文件的创建，我当然可以给它一个特定的扩展名，例如 .SEF 并编写一个服务来定期解析我硬盘上的目录，但这似乎有点笨拙。

我还研究了自定义文件属性：

[http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/173ab6de-3cd8-448f-8c42-de9d2240b913](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/173ab6de-3cd8-448f-8c42-de9d2240b913)

但是我需要写一些东西来将文件属性添加到文件中。所以在 Powershell/SFU 或类似的：

```
cat JobOutput.txt | grep -e Error | expire > report.txt 
```

或普通的旧窗户：

```
type JobOutput.txt | findstr Error | expire > report.txt 
```

有没有人远程做过这样的事情？

**编辑：**

我上面描述的只是我想做的事情的一个方面。例如，您可能希望发送一封电子邮件，该电子邮件需要在一定时限内回复，然后在该时间限制后被删除。

另一个示例可能是您发布的文档，其中包含您不希望在给定时间后使用的临时系统解决方法的详细信息。

当然，我们现在对各种应用程序的变幻莫测，但自定义文件属性的想法看起来很有希望和吸引力。问题当然是如何将它们应用于每种文件类型......

现在，我很高兴根据我最初提出的问题来关闭它，在这种情况下，我可以定义一个自定义扩展，它会被预定的作业清除。

**解决方案：**

好的，我决定使用 Powershell 解决方案（稍作调整），因为我对此非常熟悉：

```
$HowManyDays = 15  
$LastWrite = (Get-Date).AddDays(-$HowManyDays)  
Get-ChildItem -recurse -include *.sef |     
Where {$_.LastWriteTime -le "$LastWrite"} |     
Remove-Item 
```

非常感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:01:22.030

如果您对 Alex K. 提供的内容相当满意，那么它应该很容易调整。

创建一个 cmd 文件，当你调用它时传入文件搜索模式，如果是这样，`*.*`那就这样吧。

在 cmd 文件调用中：

```
robocopy "c:\from" "c:\to" /s %1 /MINAGE:7 /MOV 
```

请参阅：[如何将命令行参数传递给批处理文件？](https://stackoverflow.com/questions/26551/how-to-pass-command-line-parameters-in-batch-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:33:58.020

我们在 Powershell 中使用一个小脚本通过任务调度程序来删除超过 15 天的日志。

您可以删除文件或移动它们。这是脚本：

```
 $HowManyDays = 15

$LastWrite = (Get-Date).AddDays(-$HowManyDays)

Get-ChildItem *.log |
    Where {$_.LastWriteTime -le "$LastWrite"} |
    Remove-Item 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T22:10:08.207

我也会去预定的调用。

如果您不喜欢调用 Powershell 或下载 robocopy，您可以坚持使用命令行单行：

```
forfiles /p "C:\Path" /m *.log /d -7 /c "cmd /c del @file" 
```

我对其进行了调整并将其烘焙成一批，我可以安排它来清理任何文件夹+子文件夹。仅供参考，这将为您提供以下内容：

```
forfiles /p "C:\Path" /m *.* /d -7 /c "cmd /c if [@isdir]==[TRUE] rmdir @file /s /q" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:48:38.170

您有*两个*问题： 1\. 如何指示哪些文件应该“过期”。2.如何（快速）找到过期文件。

对于 1，您需要确定文件扩展名是否是可接受的方法，或者是否需要使用某些自定义文件属性，以及是否将其存储在 NTFS 文件系统中或嵌入文件内容中。

对于 2，您可以使用例如 locate32 创建索引，但这只会让您根据扩展名快速查找文件；自定义属性已经过时——除非您想获取源来定位32 并添加索引自定义属性的能力。它可能非常有用（例如，在 DLL 中具有自定义属性或版本的 Word 文档）。另一种建立索引的方法是在“to be expired”目录中创建指向要过期的文件的符号链接。

实际删除是微不足道的，您可以使用此处发布的任何解决方案；使用索引只是可以更快地找到过期文件。

# cordova - 在项目 ID 中提供什么？

> ID：12194741
> 
> 赞同：1
> 
> 时间：2012-08-30T10:24:25.930
> 
> 标签：cordova, google-cloud-messaging

![进入](../Images/5db19e6c28e5e1ba523d58e5ec3ec373.png)

它要求在图像中输入“ProjectID”：“Register ProjectID”，我们是否需要在 URL 中提供已经由 google 生成的 projectID，例如：project:999999999 - 10 位数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:25:42.140

“DNS 兼容”通常表示“com.mycompany.myproject”的形式。不是数字。请参阅底部的格式说明符：“必须以字母开头”。

# css - 如何将css样式仅应用于孩子

> ID：12194742
> 
> 赞同：0
> 
> 时间：2012-08-30T10:24:26.273
> 
> 标签：css, css-selectors

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:25:59.203

Did u try this?

```
.list ul>li{float:left ;list-style:none ; }
.list ul li ul li{float:none!important;list-style:none !important; } 
```

Here is the demo [http://jsfiddle.net/vY6RG/4/](http://jsfiddle.net/vY6RG/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:26:15.807

使用`>`选择器，例如`.list ul > li`

# iphone - Reading using Keychain Wrapper class return Null - IOS

> ID：12194749
> 
> 赞同：0
> 
> 时间：2012-08-30T10:24:45.723
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

I am using Keychainwrapper class downloaded from Apple documentation for storing login information like password. In my apps when user click on sign in button, I am storing in key chain like below...

```
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] 
                                     initWithIdentifier : @"vmo_login" accessGroup:nil];

[keychainItem setObject:email_id.text forKey:(__bridge NSString*)kSecAttrAccount];
[keychainItem setObject:password.text forKey:(__bridge NSString*)kSecValueData]; 
```

And if user click on sign out I am exiting application with exit(1). Once application is launched again, I am reading from keychain like below..

```
NSString *loc_email1 = [keychainItem objectForKey:(__bridge NSString*)kSecAttrAccount];
NSString *loc_pwd1 = [keychainItem objectForKey:(__bridge NSString*)kSecValueData]; 
```

I have not got what I have stored below, it returns NULL. Any Idea?.

thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:41:31.940

我发现了问题。。

```
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] 
                                     initWithIdentifier : @"<need to give same as when we write>" accessGroup:nil]; 
```

现在工作正常。

# jquery-ui - jQueryUI draggable sets "position: relative" on my draggable divs

> ID：12194750
> 
> 赞同：16
> 
> 时间：2012-08-30T10:24:47.337
> 
> 标签：jquery-ui, draggable, css-position

I'm having an odd problem with jQuery draggable this morning, I wonder if anyone else has come across this.

I have many small divs inside a large div. They are absolutely positioned: "position:absolute" in CSS for their class, with the actual position itself calculated and set in JS on demand.

Now I'm adding functionality to allow these divs to be draggable.

But, as soon as I make one draggable, it is given "position:relative" directly on the element, which as you might imagine, seriously messes up the on screen position.

Does anyone know why it changes the "position" like this or how to tell it not to?

**EDIT:**

Just realised there is a rather obvious answer staring me in the face - !important on my position:absolute! This seems to fix it. BUT I'm still interested if anyone knows why it sets "position: relative" like this (and doesn't either make it configurable or check first if it needs position)...I'm wondering what problems I've just stored up for myself ;-)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-10T18:09:08.177

“我今天遇到了同样的问题。原因是我正在应用`draggable()`一个动态创建的元素。我'后来'将它附加到。当你应用时`dom`，元素应该在里面（如果样式正在由一个类应用）。在简而言之，当它发现没有附加的位置时，它会添加。” - 贾什旺`dom``draggable()``element``relative`

先做：`.append(jElement)`然后：`jElement.draggable()`

出于某种原因，Jashwant 将他的答案放在了对该问题的评论中。所以我认为其他人在这里转发它会很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:30:35.903

它也发生在我身上，但仅限于 Chrome。原因？

是这样的：

```
$("#div-popup").draggable({ handle: ".top", containment: 'document'}); 
```

然后我删除了*包含*参数，如下所示：

```
$("#div-popup").draggable({ handle: ".top"}); 
```

所以它是关于浏览器（在本例中为 Chrome），当您指定哪个元素可以拖动时，它将位置设置为相对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-06T18:50:25.190

在我的情况下，这似乎是样式表和 javascript 加载之间的竞争条件......

我意识到我犯了在文档头中包含 javascript 之后的样式表的错误。它们应该包含在 javascript 之前，因为`$(document).ready()`不考虑浏览器加载的 CSS：[https ://stackoverflow.com/a/1324720/3633109](https://stackoverflow.com/a/1324720/3633109)

# php - What is the raw POST data?

> ID：12194751
> 
> 赞同：10
> 
> 时间：2012-08-30T10:24:51.857
> 
> 标签：php

I'm trying to understand the meaning of raw POST data. The PHP manual page for [`$HTTP_RAW_POST_DATA`](http://php.net/manual/en/reserved.variables.httprawpostdata.php) just state that this variable contains `Raw POST data`.

When will this variable be set and what's the meaning of raw POST data?

I understand the `$_POST`, but I am totally confused with `$HTTP_RAW_POST_DATA`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T10:44:21.107

HTTP 请求由两部分组成。一组标题和一个正文。

标头包括请求的 URL 和缓存控制助手等内容（例如“我有一个昨天的版本，只有在有变化时才给我一个新版本，好吗？”）。

正文可能会出现也可能不会出现，具体取决于请求的类型。POST 请求有正文。

正文可以是客户喜欢的任何格式。其中一个标头将告诉服务器格式是什么。

HTML 表单使用了几种格式，PHP 知道如何解析这些格式并将数据放入`$_POST`.

如果数据是另一种格式，例如 JSON，或者如果数据不符合 PHP 的怪癖（例如在具有`[]`相同名称的键的末尾的规则），那么您可能希望直接访问数据所以你可以自己解析。

那是原始的 POST 数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T10:39:03.467

`$_POST`可以说是拆分`$HTTP_RAW_POST_DATA`变量后的结果。PHP 会拆分原始帖子数据并按照我们在`$_POST`数组中看到的方式对其进行格式化。例如：

> `$HTTP_RAW_POST_DATA`看起来像这样

```
key1=value1&key2=value2 
```

> 然后`$_POST`看起来像这样：

```
$_POST = array(
    "key1" => "value1",
    "key2" => "value2",); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:27:40.530

HTTP 是基于文本的协议，因此所有数据都作为字符串传递。当您使用时`$_POST`- 您已经处理了传递的数据，以便您采用数组形式。这是在将控件传递给您的脚本之前由 PHP 自动完成的。

因此，在原始 POST 数据中存在通过网络传递的数据。

您可能会看到`a=1&b=2`数据，就像您在 URL 中看到的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T10:29:22.077

您可以使用 HTTP 协议做的一件事是执行 POST 请求，将一些文本发送回服务器。

`$HTTP_RAW_POST_DATA`将包含该文本，无论它说什么。

大多数情况下，当我们发出 POST 请求时，我们会在发送的文本中添加“内容类型”。这告诉服务器它是什么类型的内容。大多数时候，我们在网络上发送内容类型为“application/x-www-form-urlencoded”。

当服务器接收到带有此内容类型标记的 POST 请求时，服务器将知道尝试将数据转换为`$_POST`数组，以便 "test=hello" 变为：

```
$_POST['test']='hello' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-18T08:32:39.180

`$HTTP_RAW_POST_DATA`包含以下格式的原始 POST 数据：

*   文本
*   JSON
*   XML
*   HTML

通常，`php://input`应该使用 代替，`$HTTP_RAW_POST_DATA.`因为从 PHP 5.6.0 开始，此功能已被弃用。强烈建议不要依赖此功能。

来源：[php.net - $HTTP_RAW_POST_DATA](http://php.net/manual/en/reserved.variables.httprawpostdata.php)

# android - 使用 monkeyrunner 模拟阻力

> ID：12194753
> 
> 赞同：1
> 
> 时间：2012-08-30T10:25:01.737
> 
> 标签：android, drag, monkeyrunner

我有 android ics-x86，我需要模拟拖动事件，但是 device.drag 给出错误它给了我类转换异常。我这样称呼它-

```
 x=(67.8,100.0)
      y=(267.8,100.0)
      device.drag(x,y,10.0,10) 
```

论点有什么问题？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:44:59.263

device.drag（元组开始、元组结束、浮点持续时间、整数步长）

例如：device.drag((350, 620), (13, 620), 0.5, 50)

# c++ - Where to free up memory of a dynamic array created inside a function

> ID：12194760
> 
> 赞同：2
> 
> 时间：2012-08-30T10:25:44.983
> 
> 标签：c++, local-variables, delete-operator

This is in reference to the discussion in this topic here [How to have a char pointer as an out parameter for C++ function](https://stackoverflow.com/questions/1217173/how-to-have-a-char-pointer-as-an-out-parameter-for-c-function)

In the code below, where do I free the memory of **pTemp**? Is it not required? Would things would have changed in anyway if instead of array of chars there was array of integers?

```
void SetName( char **pszStr )
{
    char* pTemp = new char[10];
    strcpy(pTemp,"Mark");
    *pszStr = pTemp;
}

int main(int argc, char* argv[])
{
    char* pszName = NULL;
    SetName( &pszName );
    cout<<"Name - "<< pszName << endl;
    delete [] pszName;
    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T10:32:30.453

您分配`pTemp`给`*pszStr`，并`pszStr`指向`pszName`。

因此，`delete [] pzxName`根据需要删除分配的内存。

这种混淆是一个很好的例子，说明了为什么你应该避免奇怪的 C 风格的习惯用法和手动内存管理。它会更清楚：

```
#include <string>
#include <iostream>

std::string GetName() {return "Mark";}

int main() {
    std::string name = GetName();
    std::cout << "Name - " << name << std::endl;
} 
```

没有指针，`new`或`delete`需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T10:32:02.013

你不需要。
当您调用时，分配给它的内存将被释放：

```
delete [] pszName; 
```

请注意，`new`/`new []`返回一个地址，为了避免内存泄漏，您需要在**完全相同的地址**`delete`上调用/并且**只调用一次**。 `delete []`

 ****您在上面的代码中拥有的是两个不同的指针（`pszName`和`pTemp`），它们指向由 . 返回的相同地址`new []`。所以叫`delete []`一个就够了。

在 C++ 中，你最好使用 a`std::string`而不是`char *`其他数据类型，你当然可以使用**智能指针**并为自己节省显式内存管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:32:08.880

`pTemp`，变量*本身*，一旦函数退出，就会被释放，因为它首先是在堆栈上分配的。指针被放入的数组`pTemp`通过传递给它的参数保留在函数外部，`pszName`. 当*这个*变量中的值被删除时，数组使用的堆内存将被释放。****

# grails - Grails empty log file with log4j

> ID：12194764
> 
> 赞同：0
> 
> 时间：2012-08-30T10:26:02.603
> 
> 标签：grails, log4j

it seems that my grails (2.1) log4j config isn't used properly and i can't find the problem. The log file is created but empty and the stdout doesn't follow my pattern.

```
log4j = {

    appenders {
        rollingFile name: "myFileAppender", file: "LogFile.log", maxFileSize: 1024, layout:pattern(conversionPattern: '%d (%t) [%24F:%-3L:%-5p]%x %m%n')
        console name: 'myStdoutAppender', layout:pattern(conversionPattern: '%d (%t) [%24F:%-3L:%-5p]%x %m%n')

    }

    warn   'org.codehaus.groovy.grails.web.servlet',        // controllers
           'org.codehaus.groovy.grails.web.pages',          // GSP
           'org.codehaus.groovy.grails.web.sitemesh',       // layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping',        // URL mapping
           'org.codehaus.groovy.grails.commons',            // core / classloading
           'org.codehaus.groovy.grails.plugins',            // plugins
           'org.codehaus.groovy.grails.orm.hibernate',      // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'    

   debug  'org.my.stuff',
          'grails.test',
          'grails.app'

   root = {
            debug 'myFileAppender', 'myStdoutAppender'
            additivity = true
    }
} 
```

Anyone an idea what i did wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:45:33.850

不要分配给根记录器。只需使用提供的闭包调用它：

```
// No equals sign
root {
    debug 'myFileAppender', 'myStdoutAppender'
    additivity = true
} 
```

# wpf - 第二个窗口定位 WPF

> ID：12194766
> 
> 赞同：2
> 
> 时间：2012-08-30T10:26:05.193
> 
> 标签：wpf, window, size, width

我有 MainWindow，它有一个按钮，允许它打开另一个 WPF 窗口。我希望这个窗口总是在 MainWindow 的右侧打开，几乎就在它旁边。

我怎样才能做到这一点？即使 MainWindow 的宽度发生变化，这也需要工作，因为我在 MainWindow 上有各种按钮，可以根据可见的面板更改 MainWindow 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:53:26.197

您需要在属性或代码中为第二个窗口设置手动启动位置：

```
WindowStartupLocation = WindowStartupLocation.Manual; 
```

在第一个窗口的 Loaded、SizeChanged、LocationChanged 事件上，您应该像这样调整第二个窗口的位置：

```
 public void AdjustPosition()
    {
        window2.Left = Application.Current.MainWindow.Left + Application.Current.MainWindow.ActualWidth;
        window2.Top = Application.Current.MainWindow.Top;
    }

    private void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
            AdjustPosition();
    }

    private void MainWindow_SizeChanged(object sender, SizeChangedEventArgs e)
    {
           AdjustPosition();
    }

    void MainWindow_LocationChanged(object sender, EventArgs e)
    {
           AdjustPosition();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:48:20.373

如果您有对另一个窗口的引用，您可以计算您想要新窗口的位置。

通过访问 Left 和 Top 属性以及通过访问 ActualWidth 或 Width 属性获取其宽度来获取其他窗口的位置。

现在您可以通过添加 Left + Width + Some 间距来计算新窗口的位置。

在此处查看 Left 属性的文档：http: [//msdn.microsoft.com/en-us/library/system.windows.window.left.aspx](http://msdn.microsoft.com/en-us/library/system.windows.window.left.aspx)

其他人的行为类似。

# django - 我如何将过滤器传递给 django sweetpie

> ID：12194774
> 
> 赞同：1
> 
> 时间：2012-08-30T10:26:22.830
> 
> 标签：django, backbone.js, tastypie

我对 django sweetpie 的这种行为有点困惑，我试图通过backbone.js 将过滤器传递给我的资源，但没有任何返回。

我的资源类看起来像这样；

```
class TenderResource(ModelResource):
    class Meta:
        queryset = Tender.objects.all()
            authorization = Authorization()
            list_allowed_methods = ['get', 'post']
            detail_allowed_methods = ['get']
        resource_name = 'tender'
        filtering = {
                'dept_ref':ALL,
                } 
```

我的 URLconf 文件如下所示；

```
v1_api = Api(api_name='v1')
v1_api.register(TenderResource())

urlpatterns = patterns('',
    # Examples:
    url(r'^$', DocView.as_view(), name='docview'),
    url(r'^api/$', include(v1_api.urls)),
) 
```

在我的apps.js中，包含主干逻辑，我用过滤器调用资源的url看起来像这样；

```
TENDER_API = "/api/v1/tender/?dept_ref=119/"; 
```

但是当我运行应用程序时，没有返回任何结果！，如果我使用这个 URL 并直接从浏览器运行它，即

```
"http://127.0.0.1:8000/api/v1/tender/?dept_ref=119/" 
```

我从资源中收到 json 结果；

**但 ...**

当我从我的应用程序传递以下没有过滤器的 URL 时，我收到所有数据；

```
TENDER_API = "/api/v1/tender/"; 
```

我错过了什么？或将过滤器传递给 django sweetpie 的最佳方法是什么？

加思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:01:49.983

经过几次搜索后，我在 SO 中得到了[这个](https://stackoverflow.com/questions/7063291/backbone-js-collection-and-tastypie-filters)问题，它很好地回答了我的问题。

基本上，您将过滤添加到您的美味派资源文件中，

```
class TenderResource(ModelResource):
    class Meta:
        ....
        filtering = {
                       "dept_ref":ALL
                    } 
```

然后你通过你的骨干 collections.fetch 方法将过滤器作为称为“数据”的javascript对象传递给

```
MyCollection.fetch({data:{"dept_ref":"119"}}) 
```

# javascript - jQuery仅隐藏表格中的一部分

> ID：12194786
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:26:53.650
> 
> 标签：javascript, jquery, html, css

我有一个将动态填充的表，结构如下：

```
<table>
<tr>
<td> The </td><td> Fields </td><td> To </td><td>Be</td><td>visible</td>
</tr>
<tr> 
```

和相同的结构 2 次，但它必须在加载和单击时隐藏，并在单击时显示

```
</tr>
... the other trs ...

<table> 
```

当我单击第一个时，我希望第二个和第三个`tds`向下和向上滑动`td`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:29:10.440

```
$('table > tr > td').first().bind('click', function (event) {
    $(this).next().slideToggle().next().slideToggle();
}); 
```

更新：使用以下内容：[小提琴](http://jsfiddle.net/2QaUX/6/)

```
<table>
    <thead><!-- Clickable Header --></thead>
    <tbody>
    <tr><!-- Content --></tr>
    <tr><!-- Content --></tr>
    </tbody>
</table> 
```

JS：

```
$(document).ready(function () {
    $('table tbody').css('display', 'none');
    $('table thead').click(function (event) {
        $('table tbody').slideToggle();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:44:53.817

```
You can try this 
```

***HTML***

```
<table>
    <tr>
        <td class="clickitem">
            The
        </td>
        <td>
            Fields
        </td>
        <td>
            To
        </td>
        <td>
            Be
        </td>
        <td>
            visible
        </td>
    </tr>
</table> 
```

***JS代码***

```
$('.clickitem').on('click', function(){
    $(this).siblings().slideToggle();
}); 
```

[http://jsfiddle.net/qYJ3B/9/](http://jsfiddle.net/qYJ3B/9/)

# c - 如何获取结构中的成员数？

> ID：12194793
> 
> 赞同：0
> 
> 时间：2012-08-30T10:27:21.857
> 
> 标签：c, runtime, structure

我想计算结构中的成员数。例如：

```
typedef struct
{
    char    MrChar;
    int MrInt;
    long    MrLong;
} Bg_Typedef;
Bg_Typedef FooStr; 
```

我创建了一个函数原型，它应该返回结构中的成员数

```
int NumberOfMem(Bg_Typedef *psStructure); 
```

=> NumberOfMem(&FooStr) 应该返回 3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-18T02:57:17.377

可以用[`X_MACRO`](https://en.wikipedia.org/wiki/X_Macro)'s来完成。

做这样的事情：

```
#define X_BG_MEMBERS \
    X(char, MrChar) \
    X(int, MrInt) \
    X(long, MrLong)

typedef struct {
#define X(type, member) type member;
    X_BG_MEMBERS
#undef X
} Bg_Typedef;

Bg_Typedef FooStr; 
```

定义一个计算成员的函数。也可以只是一个变量，但要使变量`static const`不被覆盖

```
static int
bg_members_count() {
    #define X(_, __) +1
    static int COUNT = 0
    X_BG_MEMBERS;
    #undef X

    return COUNT;
} 
```

现在您可以在 main 中执行以下操作：

```
#include <stdio.h>
...

int main() {
    printf("The number of members defined in Bg_Typedef is %d\n", bg_members_count());
} 
```

你应该得到类似的东西：

```
The number of members defined in Bg_Typedef is 3 
```

您可能还需要一个常量，因此您可以执行以下操作

```
#define X(_, __) +1
static const int COUNT = X_BG_MEMBERS;
#undef X 
```

* * *

## 替代模式

为了避免有很多`#define X...`后跟`#undef X`，做这样的事情可能是有益的：

```
#define X_BG_MEMBERS(X) \
    X(char, MrChar) \
    X(int, MrInt) \
    X(long, MrLong)

#define BG_STRUCT_FIELD(type, field) type field;
#define BG_COUNT_MEMBER(_, __) +1

typedef struct {
  X_BG_MEMBERS(BG_STRUCT_FIELD)
} Bg_Typedefarguably;

static int
bg_members_count() {
    static int COUNT = X_BG_MEMBERS(BG_COUNT_MEMBER);    
    return COUNT;
}

// OR constant
// static const int COUNT = X_BG_MEMBERS(BG_COUNT_MEMBER); 
```

它的工作原理与上述相同，但应该明显更具可读性。见[参考文献](https://www.embedded.com/reduce-c-language-coding-errors-with-x-macros-part-1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:34:24.113

C 仅允许您使用`sizeof`运算符确定结构所需的字节数（包括填充字节）。只要结构成员都具有相同的类型，就可以`sizeof(struct foo)/sizeof(membertype)`用来计算成员的数量。在一般情况下，对于不同大小的成员类型，这在 C 语言中是不可能的（您可以自动对源进行后处理并填写结果，但这很难看）。C 根本不允许在其他语言（例如 perl）中所谓的**自省。**

但是，您（和编译器）知道*编译时*的成员数。**为什么要在运行时计算已知数**？也许您可以说明您要解决的实际问题，我们可以指出一个不涉及成员数量的解决方案......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:34:03.450

没有办法做到这一点，这是内置在 C 语言 AFAIK 中的。如果你想这样做，你需要记住成员的数量或将数字硬编码为函数的返回值。C 可以告诉您结构的大小（以字节为单位），但不能告诉您它们包含的成员数。或者，您可以使用结构的成员函数来返回硬编码的成员数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:42:14.863

这不能在 C 中完成。

如果你真的需要这个，你应该尝试一种支持反射的更高级的语言。（Java、Python）。

[http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)

# javascript - 如何在“javascript 类”中重新定义方法

> ID：12194795
> 
> 赞同：5
> 
> 时间：2012-08-30T10:27:35.520
> 
> 标签：javascript, jquery, underscore.js

请运行以下代码片段¹并查看 JS 控制台中发生了什么：

我的问题是关于片段中的最后一行：

1.  为什么`F.prototype.method;`变了？
2.  我应该如何重新定义`Fcustom.prototype.method`才能不改变`F.prototype.method`？

**注意：**我使用 jQuery 和下划线来扩展功能。

* * *

*   ¹测试代码片段：

    ```
    var F = function () {};
    F.prototype.method = function () {
        // some code
    }

    F.prototype.method; // it shows "some code"

    Fcustom = $.extend(true, F, {});

    _.extend(Fcustom.prototype, {
    method: function () {
        // other code
        }
    });

    Fcustom.prototype.method; // it shows "other code"

    F.prototype.method; // it shows "other code" instead of "some code" Why? 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:20:44.727

```
var obj = { myMethod : function() { 
              //some code
          }
};

var newObj = $.extend(true, {}, obj);

newObj.myMethod = function (){       
   //new method
};

newObj.myMethod();  //should call the new method 
```

尽管，

```
obj.myMethod(); //still calls the old "//some code" 
```

* * *

[演示](http://jsfiddle.net/mrobin/K8g8q/)：

# ssas - 没有 Active Directory 帐户的 SSAS 身份验证方法

> ID：12194797
> 
> 赞同：0
> 
> 时间：2012-08-30T10:27:40.483
> 
> 标签：ssas

就像标题所说的那样，是否可以在没有任何 AD 或 Windows 帐户的情况下连接到 SSAS？我可以将用户凭据存储在我自己的 SQL Server 数据库中，还是只需要 AD？因为我认为在 SSRS 中可以使用自定义身份验证（或者我错了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:03:48.277

Windows 身份验证是唯一的选项，但是您可以通过以下方式从远程计算机登录：

使用与来自 ssas 机器的用户完全相同的登录名和密码准备远程机器用户帐户（具有正确的 ssas 访问设置），您应该能够使用此用户登录。

或相反：在 ssas 机器上创建具有 execly 名称和密码的用户帐户作为远程用户，并授予他对 ssas 的访问权限。

# c# - 如何在 C# 中正确设置 MemoryMappedFile 安全选项

> ID：12194804
> 
> 赞同：4
> 
> 时间：2012-08-30T10:28:11.707
> 
> 标签：c#, memory-mapped-files, access-rights

我的问题不是如何在 C++/C# 中读取/写入共享内存 (MemoryMappedFiles)，而是更多关于如何在 C# 中正确设置 MemoryMappedFile 的安全选项（而且我对 C# 很陌生，如果有问题请见谅很傻）。

我有一个作为服务运行的进程（在 SYSTEM 帐户下），它设置了一个共享内存空间。然后我有另一个进程，也作为服务运行（在 SYSTEM 帐户下），它访问该共享内存空间。

它们的第一个版本都是用 C++ 编写的，服务器（“编写器”）主要执行（假设我想要一个 1024 字节的内存段，其名称为 Global\mySegment）：

```
HANDLE m_memoryHandle = CreateFileMappingA(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, 1024, "Global\\mySegment");
SetSecurityInfo(m_memoryHandle, SE_KERNEL_OBJECT, DACL_SECURITY_INFORMATION, 0, 0, (PACL) NULL, NULL);
LPVOID m_pSharedMemorySegment = MapViewOfFile(m_memoryHandle, FILE_MAP_ALL_ACCESS, 0, 0, 1024); 
```

和读者：

```
HANDLE m_memoryHandle = OpenFileMappingA(FILE_MAP_ALL_ACCESS, FALSE, "Global\\mySegment");
LPVOID m_pSharedMemorySegment = MapViewOfFile(m_memoryHandle, FILE_MAP_ALL_ACCESS, 0, 0, 0); 
```

此代码运行良好，即编写器创建的共享内存空间在任何情况下都可供读者访问（即，如果编写器作为服务运行或在当前（登录）用户帐户（具有管理员权限）下运行）和如果阅读器作为服务运行或在相同的当前（登录）用户帐户下运行）。

现在，我将这段代码（仅限作者）翻译成 C#，主要是这样做的：

```
MemoryMappedFile mappedFile = MemoryMappedFile.CreateNew(@"Global\mySegment", 1024, MemoryMappedFileAccess.ReadWrite); 
```

使用此编写器，它仅在编写器由当前用户运行时才有效。当它作为服务启动时（因此由“SYSTEM”用户运行），阅读器不再有权访问共享内存空间（“访问被拒绝”，在这两种情况下，当阅读器由当前用户运行或作为SYSTEM 的服务）。

所以我尝试翻译 C++ 行

```
SetSecurityInfo(m_memoryHandle, SE_KERNEL_OBJECT, DACL_SECURITY_INFORMATION, 0, 0, (PACL) NULL, NULL); 
```

到 C#。我发现最近的实现是：

```
var security = new MemoryMappedFileSecurity();
// Create a SecurityIdentifier object for "everyone".
SecurityIdentifier everyoneSid = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
security.AddAccessRule(new AccessRule<MemoryMappedFileRights>(everyoneSid, MemoryMappedFileRights.FullControl, AccessControlType.Allow)); 
MemoryMappedFile mappedFile = MemoryMappedFile.CreateNew(_memoryRegionName, _memRegionSize, MemoryMappedFileAccess.ReadWrite, MemoryMappedFileOptions.None, security, HandleInheritability.Inheritable); 
```

但结果是现在读者根本无法访问共享内存空间，在前面提到的所有4种service-no service组合下

鉴于这种行为对于 C# 代码来说是完全违反直觉的，我有点迷茫......

有人对如何解决这个问题有很好的实施或想法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-05T03:40:34.990

尝试添加`Global\`到用于内存映射文件的名称的开头。我遇到了与您描述的完全相同的问题，但是使用在 NETWORK 帐户下运行的服务，这解决了它。

# c++ - 压缩其他容器的容器

> ID：12194806
> 
> 赞同：0
> 
> 时间：2012-08-30T10:28:23.663
> 
> 标签：c++, boost, containers

我需要一个容器，它可以包装其他容器并使它们像 zip_iterator 一样可遍历，但也可以包装它们的其他功能（如`push_back()`, `size()`, ...）。`stdlib`在or中有这样的东西`boost`吗？

**背景：**

我有一个将多态基类存储在 a 中的类，`boost::ptr_list<BaseClass>`但需要更多信息与此一起存储。正常情况`std::list`下我会做`std::list<std:pair<BaseClass, OtherInformation> >`并且已经完成，但我想要`boost::ptr_list`.

我想出的明显解决方案是：有两个容器`boost::ptr_list<BaseClass>`和`std::list<OtherInformation>`. 这解决了问题，但让我总是处理两个容器而不是一个（这也会导致容器之间的不一致）。

所以我正在寻找一个包装器，它将包装两个（或任意数量的）容器，并使它们像一个一样可访问，它存储数据的元组。

*总结一下：*

要么我需要一个容器来执行此操作，然后我想知道是否已经有一个容器，或者我是否必须自己实现它（我认为这很有趣:)。

或者我想到的解决方案是错误的方法，那么请告诉我替代方案。

# iphone - 在 iPhone 上更新 SQLite 数据库

> ID：12194812
> 
> 赞同：2
> 
> 时间：2012-08-30T10:28:37.207
> 
> 标签：iphone, ios, database, sqlite

我对应用程序开发知之甚少，但我正在更新现有的 SQLite 数据库（对存储在数据库中的 html 进行简单的文本更改）。一切正常，但是当我将应用程序提交给 Apple 时，人们升级时没有显示更改（如果您是第一次下载它 - 直接从 App Store 下载 - 很好，所以数据库必须保存到缓存中）。

有谁知道我如何覆盖现有的数据库？人们说要更改数据库的文件名，但这会使应用程序运行速度变慢（两个数据库是否会停滞在缓存中）。人们的数据也停滞在数据库中（书签等），因此如果可能的话，仍然需要保留这些信息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:52:03.690

我认为更改应该只发生在您测试的构建中，而不是您上传到应用商店的版本中。

所以更好的方式你再次上传它......完成所有测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:33:13.283

我还建议您重命名数据库。那是最简单和最快的方法。重命名您的模型并将其设置为标准。

我也在使用这个解决方案。我的应用程序运行速度并没有比以前慢。只是测试它。

另请参阅这两个链接以将新模型添加到您的项目中：

[创建新模型版本（苹果）](http://developer.apple.com/library/ios/#recipes/xcode_help-core_data_modeling_tool/Articles/creating_new_version.html)

[如何将核心数据添加到现有的实用程序应用程序](https://stackoverflow.com/questions/1528341/how-to-add-core-data-to-an-existing-utility-application)

# entity-framework - 带有子组的多对多实体框架

> ID：12194815
> 
> 赞同：0
> 
> 时间：2012-08-30T10:28:41.310
> 
> 标签：entity-framework, many-to-many

我对实体框架模型有疑问。我也找不到答案，因为我真的不知道如何很好地解释它。

我有一个用户表和一个权限表。存在多对多的关系。EF 用户模型有两个属性：GrantedRights 和 RevokedRights。

据我了解，EF 应该只使用 RightsID 和 UserID 创建 2 个表（一个用于授予，另一个用于撤销）。

但我找不到那些表，上下文也没有给我选择。我没有创建数据库。

我想知道在这种情况下是否有一个示例代码可以从用户那里提取 GrantedRights 列表。

谢谢

# android - 从布局将标题设置为列表视图

> ID：12194818
> 
> 赞同：0
> 
> 时间：2012-08-30T10:28:46.210
> 
> 标签：android, header, android-listview

大家！

我遇到了这样的情况：我有一个带有一些视图和一个 listView 的布局。一个问题是：是否可以获取这些视图（从列表视图所在的布局）并将它们设置为该列表视图的标题？

到目前为止，我尝试过：

```
LinearLayout header = (LinearLayout)getView().findViewById(R.id.header);
listView.addHeaderView(header, null, true); 
```

这给了我一个错误：

```
ERROR/AndroidRuntime(18913): FATAL EXCEPTION: main
java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams
    at android.widget.ListView.clearRecycledState(ListView.java:553)
    at android.widget.ListView.resetList(ListView.java:539)
    at android.widget.ListView.layoutChildren(ListView.java:1477)
    at android.widget.AbsListView.onLayout(AbsListView.java:1407)
    at android.view.View.layout(View.java:7314)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
    at android.view.View.layout(View.java:7314)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7314)
    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
    at android.view.View.layout(View.java:7314)
    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
    at android.view.View.layout(View.java:7314)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7314)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
    at android.view.View.layout(View.java:7314)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
    at android.view.View.layout(View.java:7314)
    at android.view.ViewRoot.performTraversals(ViewRoot.java:1180)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1900)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3691)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
    at dalvik.system.NativeStart.main(Native Method) 
```

# css - 如何选择 通过 CSS？

> ID：12194819
> 
> 赞同：0
> 
> 时间：2012-08-30T10:28:49.070
> 
> 标签：css, jsf, jsf-2, datatable, primefaces

首先我在使用`<h:dataTable>`，我对此没问题，但之后我需要更多功能，所以我开始使用 Primefaces 并使用它的`<p:dataTable>`. 一切正常，但我在表格上应用的 CSS 停止工作。然后我发现`<p:dataTable>`是先创建一个`<div>`然后在里面`<div>`，它是创建一个`<table>`。

```
 <div id="tcform:tclist" .......>
       <table role="grid">....</table>
 </div> 
```

但`<h:dataTable>`只创建 HTML `<table>`。现在我想知道如何获取表的 ID，或者是否有任何解决方案可以访问该表。我也想知道为什么`<h:dataTable>`和`<p:dataTable>`彼此不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:00:54.523

如果您想以通用方式设置表格样式，只需相应地更改 CSS 选择器。`<table>`of`<p:dataTable>`可由`ui-datatable`班级选择。

```
.ui-datatable td {
    background: pink;
} 
```

如果您只想以特定方式设置特定表格的样式，请给它一个类名，以便您可以按类名而不是 ID 进行选择。

例如

```
<p:dataTable styleClass="foo"> 
```

可由 覆盖`.ui-datatable.foo {}`。例如

```
.ui-datatable.foo td {
    background: hotpink;
} 
```

# c++ - P2P最重要的基础知识

> ID：12194820
> 
> 赞同：3
> 
> 时间：2012-08-30T10:28:49.163
> 
> 标签：c++, networking, p2p, router, peer

我一直在 www 上阅读，但无法获得 P2P 最重要的基础知识。

图是这样的：

```
[peer1]<-->[dsl-router1]<-->[central server]<-->[dsl-router2]<-->[peer2] 
```

我正在中央服务器上开发一个聊天软件。聊天消息现在通过中央服务器传输得很好，但是，我需要制作 p2p 文件共享功能，因为服务器的带宽（电缆带宽，而不是传输限制）应该只用于传输聊天消息。

问题是，我在中央服务器上的软件知道 router1 和 router2 的 IP 和端口，但不知道 peer1 和 peer2，因为这些对等点位于路由器后面并且没有 IP 地址。

如何在不让这些数据通过中央服务器的情况下实际将一些数据从 peer1 传输到 peer2，反之亦然？

（最坏的情况是peer和dsl-router之间有无线路由器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:19:46.177

有两种基本方法可以做到这一点。新方法是使用 IGDP（通过 uPnP 打开端口）。这在这里描述得很好：

[http://www.codeproject.com/Articles/13285/Using-UPnP-for-Programmatic-Port-Forwardings-and-N](http://www.codeproject.com/Articles/13285/Using-UPnP-for-Programmatic-Port-Forwardings-and-N)

如果两个节点都没有支持 uPnP 的路由器，那么另一种选择是 TCP 打孔，它并不完美，但在实践中运行良好。此处对此进行了描述：

[http://www.brynosaurus.com/pub/net/p2pnat/](http://www.brynosaurus.com/pub/net/p2pnat/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:18:34.027

在某些情况下，ISP 提供的“路由器”可能会以桥接模式运行，这会将对等计算机直接暴露在 Internet 上（计算机获得公共 Internet 地址）。如果至少一方有这种配置（或者在对等客户端不在另一台设备后面的类似情况下），那么事情应该相当简单：只需将中央服务器的工作分配给拥有此权限的任何人。

在另一种情况下，两个对等点都只有一个本地地址（例如 192.168.0.2）分配给他们的计算机，那么通过路由器将相当困难。路由器后面的客户端大部分情况下都无法从外部访问，除非它们发起了请求。然后，该问题的一种解决方案是端口转发。通过明确编写的规则或 UPnP 进行端口转发，对等计算机上的某些端口会暴露在公共互联网上，就像在第一种情况下，整个计算机都暴露在外，而不是仅暴露一些端口。

如果您没有其中任何一个，那么没有简单的方法可以避免通过中央服务器发送。尽管您可能会找到其他有能力为他人转移的同行。

# multithreading - 两个（非主）线程同步

> ID：12194821
> 
> 赞同：2
> 
> 时间：2012-08-30T10:28:49.450
> 
> 标签：multithreading, delphi

我有两个线程（A 和 B）+ 一个主线程（C）正在运行。线程 A 包含一个用于写入数据库的对象。有时线程 B 也想写入数据库。

据我了解，出于这个原因，我必须在线程 A 和 B 之间创建同步。如果我`Synchronize`在线程 B 中使用方法，它将与主线程 C 同步，但不会与 A 同步。如何处理这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T13:45:03.363

这最好集成到共享服务或资源中，这样两个线程就不需要相互了解。伪代码：

```
uses
  SyncObj; 
```

* * *

```
TSomeService = class
private
  FLock : TCriticalSection;
public
  constructor Create;
  destructor Destroy; override;
  procedure UseService;
end; 
```

* * *

```
constructor TSomeService.Create;
begin
FLock := TCriticalSection.Create;
end;

destructor TSomeService.Destroy;
begin
FreeAndNil (FLock);
end;

procedure TSomeService.UseService;
begin
FLock.Enter;
try
  // ...
finally
  FLock.Leave;
 end; 
```

这对两个线程都是完全透明的，所以两个线程都可以调用

```
FSomeService.UseService; 
```

无需打扰同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:33:50.193

您可以使用临界区来防止同时访问内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:58:10.810

使用某种线程间通信将消息从 B 发送到 A 以将数据写入 DB。这使数据库可以访问一个线程。确切的机制取决于线程 B 通常如何获取其输入（它是如何获得的？）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:08:50.657

对于数据库，除非您使用数据库会话，否则大多数数据库组件都不是线程安全的。通常最好给每个线程自己的数据库连接，而不是跨线程边界共享连接或组件。

# python - 以可移植的方式包含 Python 库 (suds)

> ID：12194822
> 
> 赞同：0
> 
> 时间：2012-08-30T10:28:50.410
> 
> 标签：python, import, suds

我正在使用 suds（brilliant library，顺便说一句），我想让它可移植（这样每个使用依赖它的代码的人都可以签出文件并运行它）。

我已经找到了“suds-0.4-py2.6.egg”（在 python/lib/site-packages 中），并将其与我的文件一起放入，我尝试过：

```
import path.to.egg.file.suds
from path.to.egg.file.suds import *
import path.to.egg.file.suds-0.4-py2.6 
```

前两个抱怨 suds 不存在，最后一个抱怨语法无效。

在 __init__.py 文件中，我有：

```
__all__ = [ "FileOne" ,
            "FileTwo",
      "suds-0.4-py2.6"] 
```

并且之前尝试过

```
__all__ = [ "FileOne" ,
            "FileTwo",
      "suds"] 
```

但两者都不起作用。

这是正确的方法吗？如果是这样，我怎样才能让我的进口工作。如果没有，我还能如何获得相同的结果？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:39:25.210

您必须将您的 egg 文件添加到`sys.path`，如下所示：

```
import sys
# insert at 0 instead of appending to end to take precedence 
# over system-installed suds (if there is one).
sys.path.insert(0, "suds-0.4-py2.6.egg")
import suds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:41:24.460

`.egg`文件是压缩档案；因此，您不能像发现的那样直接导入它们。

简单的方法是简单地解压缩存档，然后将`suds`目录复制到应用程序的源代码目录。由于 Python 将在它发现的第一个模块处停止；即使没有为 Python 全局安装，也将使用您的本地 suds 副本。

更进一步，是`egg`通过将 附加到您的路径来将其添加到`sys.path`.

但是，正确的方法是[打包您的应用程序](http://guide.python-distribute.org/)以进行分发；或者提供一个[需求文件](http://www.pip-installer.org/en/latest/requirements.html)，让其他人知道你的程序依赖于哪些外部包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:38:14.977

`requirements.txt`通常我用一个包含所有依赖项及其版本的文件分发我的程序。然后，用户可以使用以下命令安装这些库：

```
pip install -r requirements.txt 
```

我认为包含`eggs`您的代码不是一个好主意，如果用户使用 python2.7 而不是 python2.6 怎么办

有关需求文件的更多信息：[http ://www.pip-installer.org/en/latest/requirements.html](http://www.pip-installer.org/en/latest/requirements.html)

# c++ - TCP协议，减少RTT瓶颈

> ID：12194824
> 
> 赞同：0
> 
> 时间：2012-08-30T10:28:54.420
> 
> 标签：c++, sockets, tcp, roundtrip

据我了解，tcp 协议的性能受到 RTT（往返时间）的限制。如果客户端向服务器发送消息，它需要等待确认响应才能发送序列中的下一条消息。这意味着如果我使用 250 毫秒 RTT 的链接，我将被限制为每秒 4 条消息，这对于许多应用程序来说非常慢，并且严重阻碍了数据传输率。

有哪些方法可以解决此限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:34:48.290

> 如果客户端向服务器发送消息，它需要等待确认响应才能发送序列中的下一条消息。

这是不正确的。有诸如延迟和选择性 ACK 之类的东西。

> 这意味着如果我使用 250 毫秒 RTT 的链接，我每秒只能发送 4 条消息。

不，它没有。

*实际*的瓶颈是链路的带宽延迟积。确保您的套接字两端的发送和接收缓冲区至少等于该产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:52:34.330

RTT 只是告诉您从发送缓冲区中驱逐数据包的延迟约为 250 毫秒。鉴于发送缓冲区足够大，没有什么可以阻止您以最大带宽减去协议开销进行双向通信。

如果您不需要纠错（即消息到达太晚时毫无价值），请考虑使用 UDP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:02:49.157

如果我理解正确。您的协议将等待来自对等方的响应消息，然后才能发送下一个请求消息。在这种情况下，RTT 会限制您所说的速度（每秒 4 条消息）。

如果您的协议规范要求这种等待，那么该协议的设计很糟糕。

如果没有，那么您可以通过在等待响应消息之前向对等方发送几条消息来提高性能。这样，高 RTT 不会导致如此糟糕的缓慢。

# c# - C#回调接收UTF8字符串

> ID：12194828
> 
> 赞同：5
> 
> 时间：2012-08-30T10:29:13.723
> 
> 标签：c#, c++, string, utf-8, callback

我有一个 C# 函数，一个回调，从用 C++ 编写的 Win32 DLL 调用。来电者给了我一个 UTF8 字符串，但我无法正确接收，所有的匈牙利特殊字符都出错了。

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate int func_writeLog(string s); 
```

当我将参数类型更改为`IntPtr`并编写代码时，它可以正确编写。但我发现这是一个非常缓慢的解决方案：

```
 byte[] bb = new byte[1000];
        int i = 0;
        while (true)
        {
            byte b = Marshal.ReadByte(pstr, i);
            bb[i] = b;
            if (b == 0) break;
            i++;
        }
        System.Text.UTF8Encoding encodin = new System.Text.UTF8Encoding();
        var sd = encodin.GetString(bb, 0, i); 
```

我试图将一些属性写入字符串参数，例如：

```
 [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
  public delegate int func_writeLog([In, MarshalAs(UnmanagedType.LPTStr)] string s); 
```

没有人在工作。请问有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T12:14:50.123

在纯托管代码中没有快速做到这一点的好方法，它总是需要复制字符串，这非常尴尬，因为您不知道所需的缓冲区大小。您需要调用 Windows 函数来为您执行此操作，MultiByteToWideChar() 是主力转换器函数。像这样使用它：

```
using System.Text;
using System.Runtime.InteropServices;
...
    public static string Utf8PtrToString(IntPtr utf8) {
        int len = MultiByteToWideChar(65001, 0, utf8, -1, null, 0);
        if (len == 0) throw new System.ComponentModel.Win32Exception();
        var buf = new StringBuilder(len);
        len = MultiByteToWideChar(65001, 0, utf8, -1, buf, len);
        return buf.ToString();
    }
    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int MultiByteToWideChar(int codepage, int flags, IntPtr utf8, int utf8len, StringBuilder buffer, int buflen); 
```

# java - 读取 xmlbeans 时出现“java.lang.NoSuchMethodError”异常

> ID：12194830
> 
> 赞同：0
> 
> 时间：2012-08-30T10:29:19.437
> 
> 标签：java, apache-poi, xmlbeans

我正在尝试读取 XLSX 文件。它显示此错误

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.setSaveAggressiveNamespaces()Lorg/apache/xmlbeans/XmlOptions;
        at org.apache.poi.POIXMLDocumentPart.<clinit>(POIXMLDocumentPart.java:46)
        at NewClass.main(NewClass.java:33)
Java Result: 1 
```

错误在行：

```
OPCPackage opc=OPCPackage.open(is);
XSSFWorkbook wb= new XSSFWorkbook(opc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:39:31.750

**确保您的类路径中有正确的XmlBeans**版本 (2.x) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T08:39:45.317

检查您的 xmlbeans 版本是否正确。如果你使用的是maven，会发现没有其他单元包含不同版本的xmlbeans。（使用 mvn 依赖：树）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:38:04.823

请参阅[javadoc](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlOptions.html)：

XmlOptions setSaveAggresiveNamespaces() : `Deprecated. replaced by setSaveAggressiveNamespaces() in 2.0`。您可能正在使用[Apache XMLBeans](http://xmlbeans.apache.org/) 1.x 库。使用最新版本（推荐）或将方法调用更改为`setSaveAggresiveNamespaces()`

# android - Android - 如何在响铃状态下获得振动？

> ID：12194844
> 
> 赞同：0
> 
> 时间：2012-08-30T10:29:57.787
> 
> 标签：android

ICS 和 JB 有一个操作系统设置：“振动环”。我尝试了下一个代码尝试获取状态，但值不一样。我可以使用广播或其他方法吗？

```
 AudioManager audioManager = (AudioManager) this.getApplicationContext()
            .getSystemService(Context.AUDIO_SERVICE);
    boolean bVibrateRing = audioManager
            .shouldVibrate(AudioManager.VIBRATE_TYPE_RINGER); 
```

在 ICS 声音模式下，当检查“振动环”时，它会是真的。但在 JB 中，这将是错误的。

我试过这样广播：

```
 receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            Bundle extras = intent.getExtras();
            if (extras != null) {
                int nstate = extras
                        .getInt(AudioManager.EXTRA_RINGER_MODE);
                Log.d("receiver", " receiver EXTRA_RINGER_MODE :  "
                        + nstate);
            }
        }
    };
    IntentFilter filter = new IntentFilter(
            AudioManager.RINGER_MODE_CHANGED_ACTION);
    registerReceiver(receiver, filter); 
```

我只能获得下一个模式更改：

```
RINGER_MODE_NORMAL
RINGER_MODE_SILENT
RINGER_MODE_VIBRATE 
```

没有关于“振动环”的信息。

感谢您的任何提示和时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T08:09:24.990

下一个代码可以检查状态：

```
Settings.System.getInt(this.getApplicationContext().getContentResolver(),
                       "vibrate_when_ringing", 0); 
```

# asp.net - Asp.net：从 .cs 文件的下拉列表中获取选定的值

> ID：12194848
> 
> 赞同：-2
> 
> 时间：2012-08-30T10:30:15.107
> 
> 标签：asp.net

我想获得下拉列表的选定值，我无法控制 runat="server"

```
 <form id="form" action="Default.aspx" method="post">       
 <table>
   <tbody>
   <tr>
   <td align="left" >
   <select id="formsSelect" style="font-family: arial,sans-serif;font-size:10px;>      
  <%
  for (int x = 0; x < forms.Count; x++)
  {
  %>
      <option><%= forms[x].ToString() %></option>        
 <%
  }
 %>
</select>

<input  type="submit" name="formType" value="Search" style="color: #000000;"/> 
</td>
</tr>
</tbody>
</table>
</form> 
```

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:38:12.827

使用 JavaScript 你可以得到它

```
<script type="text/javascript">
   var ddl = document.getElementByID('formsSelect');
   // The value is persent in ddl, you can use it as
   var selectedvalue= ddl.options[ddl.selectedIndex].value; 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:15:57.750

你无法在代码隐藏中获取 html 控件值，你应该使用 asp:DropDownList 控件，然后你会得到

```
 protected void Dropdown_SelectedIndexChanged(object sender, EventArgs e)
    {            
     string val= Dropdown.SelectedValue.tostring();
    } 
```

# c# - 将数据绑定到 Windows 窗体 TabControl

> ID：12194849
> 
> 赞同：13
> 
> 时间：2012-08-30T10:30:16.053
> 
> 标签：c#, winforms, tabcontrol

我正在尝试我的第一个 Windows 窗体项目，以前完全基于 Web 并遇到了一些问题。我想将对象列表绑定到 TabControl 并让它创建选项卡，然后从每个选项卡的单击事件中访问数据绑定值。

我要绑定的对象是

```
public class TreeNodeItem
{
    private NTree<string> node;

    public TreeNodeItem(NTree<string> node)
    {
        this.node = node;
    }

    public string Value
    {
        get { return this.node.data; }
    }
} 
```

NTree 节点表示对象中的一个节点，该对象以树结构对数据进行建模。我想为列表中的每个对象创建一个选项卡，并将 Value 属性绑定到 Tab Text 属性。其他帖子提到绑定到控件的 ItemsSource 属性，但 Visual Studio 没有给我这个属性。

任何帮助将不胜感激。

干杯

斯图尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T14:11:48.517

好吧，我不知道**绑定**是必须的。尽管我从未见过在 Windows 窗体应用程序中执行过类似的操作，但我决定创建一个类来为我们执行此操作。

它使用`ObservableCollection<T>`来跟踪对象/属性在其列表中是否已更改。

```
 public class ObservableList<T> : ObservableCollection<T>
    {
        public ObservableList() : base()
        {
            CollectionChanged += new NotifyCollectionChangedEventHandler(nObservableCollection_CollectionChanged);
        }

        public event PropertyChangedEventHandler OnPropertyChanged;

        void nObservableCollection_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (OnPropertyChanged != null)
            {
                OnPropertyChanged(new object[] { e.OldItems, e.NewItems }, null); // Call method to let it change the tabpages
            }
        }
    } 
```

现在，我们必须创建一个帮助我们跟踪的帮助类：

```
 public class TabControlBind
    {
        public TabControlBind(TabControl tabControl)
        {
            // Create a new TabPageCollection and bind it to our tabcontrol
            this._tabPages = new TabControl.TabPageCollection(tabControl);
        }

        // Fields
        private ObservableList<TreeNodeItem> _treeNodeItems;
        private TabControl.TabPageCollection _tabPages;

        // Properties
        public ObservableList<TreeNodeItem> TreeNodeItems
        {
            get { return _treeNodeItems; }
            set
            {
                if (_treeNodeItems != value)
                {
                    _treeNodeItems = value;
                    _treeNodeItems.OnPropertyChanged += OnPropretyChanged;
                    OnPropretyChanged(null, null);
                }
            }
        }

        public TabControl.TabPageCollection TabPages
        {
            get
            {
                return this._tabPages;
            }
        }

        // Events
        private void OnPropretyChanged(object sender, PropertyChangedEventArgs e)
        {
            if (sender == null) // If list got set
            {
                // Remove existing tabpages
                this._tabPages.Clear();

                // Loop through all items inside the ObservableList object and add them to the Tabpage
                foreach (TreeNodeItem _treeNodeItem in this._treeNodeItems)
                {
                    TabPage tabPage = new TabPage() { Text = _treeNodeItem.Value, Tag = _treeNodeItems };
                    this._tabPages.Add(tabPage);
                }
            }
            else if (sender is object[]) // If only one (or multiple) objects have been changed
            {
                // Get OldItems and NewItems
                object[] changedItems = (object[])sender;
                // Remove OldItems
                if (changedItems[0] != null)
                {
                    foreach (dynamic oldItems in (IList)changedItems[0])
                    {
                        foreach (TabPage tab in this._tabPages)
                        {
                            if (tab.Text == oldItems.Value)
                            {
                                this._tabPages.Remove(tab);
                                break;
                            }
                        }

                    }
                }
                // Add OldItems
                if (changedItems[1] != null)
                {
                    foreach (dynamic newItems in (IList)changedItems[1])
                    {
                        TabPage tabPage = new TabPage() { Text = newItems.Value, Tag = newItems };
                        this._tabPages.Add(tabPage);
                    }
                }
            }
        }
    } 
```

这是有关如何使用它的示例：

```
 TabControlBind tabControlBinder;
    ObservableList<TreeNodeItem> treeNodeItems;

    private void btnAdd_Click(object sender, EventArgs e)
    {
        // This will automatically update the TabControl
        treeNodeItems.Add(new TreeNodeItem(new NTree<string>() { data = "Test3" }));
    }

    private void frmMain_Load(object sender, EventArgs e)
    {
        // Create a new list object an add items to it
        treeNodeItems = new ObservableList<TreeNodeItem>();
        treeNodeItems.Add(new TreeNodeItem(new NTree<string>() { data = "Test" }));
        treeNodeItems.Add(new TreeNodeItem(new NTree<string>() { data = "Test2" }));

        // Create a new instance of the TabControlBind class, set it to our TabControl
        tabControlBinder = new TabControlBind(tabControl);
        tabControlBinder.TreeNodeItems = treeNodeItems;
    } 
```

# c# - 在 Repeater 中的 Dropdownlist SelectedIndexChanged 上查找控件

> ID：12194854
> 
> 赞同：0
> 
> 时间：2012-08-30T10:30:31.203
> 
> 标签：c#, selectedindexchanged

我有一个中继器控件，它具有 a`DropDownlist`和 a `TextBox`。

在`selectedIndexChanged`下拉事件中，我需要根据下拉选择的值启用或禁用文本框。

我能够触发该`SelectedIndexChanged`事件，但无法`TextBox`在该事件中找到控件。

下面是我在代码隐藏中的 SelectedIndexChanged 事件处理程序。

```
 protected void ddl_userType_SelectedIndex(object sender, EventArgs e)
    {
        var ddl = (DropDownList)sender;           
    } 
```

有人可以帮我实现我需要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:19:29.847

希望有这样的事情......

```
protected void ddl_userType_SelectedIndex(object sender, EventArgs e)
{
    DropDownList ddl = sender as DropDownList;
    RepeaterItem item = ddl.Parent as RepeaterItem;    
    Textbox tb = item.FindControl("MyTextBox") as Textbox;   
} 
```

# .net - 在VB的自定义Linq Provider中实现字符串比较器

> ID：12194855
> 
> 赞同：2
> 
> 时间：2012-08-30T10:30:34.213
> 
> 标签：.net, vb.net, linq, provider

我正在尝试关注[这一系列文章](http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx)。我在第 2 部分和第 3 部分之间，但遇到了一些问题。

我正在 VB.Net 中编写代码，这引发了一些怪癖。

具体来说，在访问表达式树时，字符串比较没有按预期工作。

QueryProvider 中的这个方法（[第 2 部分](http://blogs.msdn.com/b/mattwar/archive/2007/07/31/linq-building-an-iqueryable-provider-part-ii.aspx)）

```
Protected Overrides Function VisitMethodCall(m As MethodCallExpression) As Expression
    If m.Method.DeclaringType = GetType(Queryable) AndAlso m.Method.Name = "Where" Then
        sb.Append("SELECT * FROM (")
        Me.Visit(m.Arguments(0))
        sb.Append(") AS T WHERE ")
        Dim lambda As LambdaExpression = DirectCast(StripQuotes(m.Arguments(1)), LambdaExpression)
        Me.Visit(lambda.Body)
        Return m
    End If
    Throw New NotSupportedException(String.Format("The method '{0}' is not supported", m.Method.Name))
End Function 
```

为字符串比较抛出 NotImplementedException

`m.Method.DeclaringType`是 类型`Microsoft.VisualBasic.CompilerServices.Operators`并且 `m.Method.Name`是`CompareString`。看起来 VB 对字符串相等的处理方式略有不同，并且没有以正确的方式进行处理。

我正在使用 a`Query.Where(function(x) x.Content_Type <> "")`进行测试。

`VisitBinary(b As BinaryExpression)`具体来说，如果我调试对（也是[第 2 部分](http://blogs.msdn.com/b/mattwar/archive/2007/07/31/linq-building-an-iqueryable-provider-part-ii.aspx)）的调用，`b`是`{(CompareString(x.Content_Type, "", False) != 0)}`

然后，它会尝试访问`b.Left`( `CompareString(x.Content_Type, "", False)`)，这是我们从 . 中的洞落入的地方`VisitMethodCall`。

如果我只是将 VisitMethodCall 中的 If 展开为

```
 If (
            m.Method.DeclaringType = GetType(Queryable) AndAlso
            m.Method.Name = "Where"
        ) Or (
            m.Method.DeclaringType = GetType(Microsoft.VisualBasic.CompilerServices.Operators) AndAlso
            m.Method.Name = "CompareString") Then 
```

它在尝试将其转换为时抛出 InvalidCastException `StripQuotes(m.Arguments(1))`（`LambdaExpression`说它是 a `ConstantExpression`）

我需要做什么才能从 VB 中正确处理字符串比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:44:09.653

使用以下类：

```
Imports System.Linq.Expressions

Public Class VbCompareReplacer
    Inherits ExpressionVisitor

    Public Overrides Function Visit(node As Expression) As Expression
        If Not TypeOf node Is BinaryExpression Then Return MyBase.Visit(node)

        Dim binaryExpression = DirectCast(node, BinaryExpression)

        If Not TypeOf binaryExpression.Left Is MethodCallExpression Then Return MyBase.Visit(node)

        Dim method = DirectCast(binaryExpression.Left, MethodCallExpression)

        If Not (method.Method.DeclaringType = GetType(Microsoft.VisualBasic.CompilerServices.Operators) AndAlso
            method.Method.Name = "CompareString") Then Return MyBase.Visit(node)

        Dim left = method.Arguments(0)
        Dim right = method.Arguments(1)

        Return If(binaryExpression.NodeType = ExpressionType.Equal,
                  Expression.Equal(left, right),
                  Expression.NotEqual(left, right))
    End Function
End Class 
```

现在，如果您有来自 vb 编译器的表达式，例如

```
Dim expressionFromVb As Expression(Of Func(Of String, Boolean)) = Function(x) x = "b" 
```

它具有结构 {(CompareString(x, "b", False) == 0)} 使用

```
Dim newExpression = New VbCompareReplacer().Visit(expressionFromVb) 
```

而不是`expressionFromVb`具有结构 {x => (x == "b")}。所有凌乱的 vb 比较都被预期的（不）等式比较所取代。如果您放入`newExpression`为 c# 编写的 linq 提供程序，它现在应该可以正常工作。

# objective-c - 例如消息的接收器类型“WebFrame”是前向声明

> ID：12194865
> 
> 赞同：0
> 
> 时间：2012-08-30T10:31:14.620
> 
> 标签：objective-c, xcode, cocoa, interface-builder, forward-declaration

我正在学习 ObjC 和可可开发，遇到了一个真正的“笨蛋”。用尽谷歌后，我恭敬地戴上我的绝望帽子并向您介绍：

一个类和一个视图控制器：

“内容窗口”类导入一个视图控制器实例并将其放置在一个窗口中：

内容窗口.h

```
#import <Foundation/Foundation.h>
#import <WebKit/WebView.h>
#import "ContentViewController.h"
@interface ContentWindow : NSWindow{
    ContentViewController* viewController;
}
@property IBOutlet ContentViewController* viewController;
-(NSWindow *) newWindow;
@end 
```

内容窗口.m

```
#import "ContentWindow.h"
@implementation ContentWindow

@synthesize viewController;
-(NSWindow *) newWindow{
    //Builds the window  as 'window' and displays it successfully here
    //... [code redacted for brevity]

    // Build view
    viewController = [[ContentViewController alloc] initWithNibName:@"ContentViewController" bundle:nil];
    [window setContentView: viewController.view];
    NSString *urlString = @"http://www.google.com";
    [[viewController.webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];
    [viewController.title setStringValue:@"my title"];
}
@end 
```

我试图用界面做两件事：

```
[viewController.title setStringValue:@"my title"]; 
```

这成功地将视图元素“标题”设置为“我的标题”。

```
[[viewController.webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]]; 
```

但是，这会引发错误：

```
Receiver type 'WebFrame' for instance message is a forward declaration. 
```

并用红色下划线的部分：

```
viewController.webView mainFrame 
```

我的视图控制器如下：

内容视图控制器.h

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebView.h>
@interface ContentViewController : NSViewController {
    IBOutlet NSTextField *title;
    IBOutlet WebView *webView;
}
@property IBOutlet WebView *webView;
@property IBOutlet NSTextField *title;
@end 
```

内容视图控制器.m

```
#import "ContentViewController.h"
@interface ContentViewController ()
@end
@implementation ContentViewController
@synthesize  title, webView;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) { 
    }
return self;
}
@end 
```

最后使用这个类，我从我的 AppDelegate 类实例化一个内容窗口

```
contentWindow = [[ContentWindow new] newWindow]; 
```

将 ContentWindow.h 导入 AppDelegate.h 并设置：

```
__strong NSWindow * contentWindow 
```

作为 AppDelegate 合成的实例变量。

我已经在 IB 中链接了这两个项目（当然！）我还在我的项目中添加了 Webkit 基础，这是在另一个线程中建议的。

我一生都无法理解发生了什么。我知道合乎逻辑的答案是放下 Xcode 并拿起“Learn Xcode and Objective c”一书（书签大约在我傲慢到认为我已经学到了足够的东西可以尝试的一半的地方），但是在我这样做之前，偶然的机会：

有人可以帮忙吗？

一如既往地感谢 AtFPt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:25:29.173

通常这个错误信息意味着，一个类的类型是未知的（因为由@class 声明）。确保您的代码可以看到`WebFrame`. 如果是这样，也许你稍后添加它，XCode 可以处理旧的元数据。在这种情况下，构建前的清理通常会有所帮助。

# mysql - 堆积的 SQL 查询错误和并发症

> ID：12194870
> 
> 赞同：1
> 
> 时间：2012-08-30T10:31:47.017
> 
> 标签：mysql, sql, sql-server, phpmyadmin

我刚刚了解到您可以堆叠 SQL 查询，而不是运行 4 个不同的查询并组合数据。所以我阅读了教程和东西，但仍然无法弄清楚这一点。

```
SELECT ID,
       (SELECT firstname
        FROM   user
        WHERE  ID = fundraiser.user_ID) AS firstname,
       (SELECT lastname
        FROM   user
        WHERE  ID = fundraiser.user_ID) AS lastname,
       (SELECT org_fund_id
        FROM   fundraiser
        WHERE  ID = fundraiser.ID)      AS org_fund_ID,
       (SELECT ref_ID
        FROM   fundraiser
        WHERE  ID = fundraiser.ID)      AS ref_ID
FROM   fundraiser
WHERE  1
ORDER  BY org_fund_ID ASC 
```

这是被调用的数据库/表的基本设置：[fundraiser] - (ID, ref_ID, user_ID, org_fund_ID) 和 [user] - (firstname, lastname)

基本上，我想从数据库中提取“fundraiser”中的所有字段，但获取相应的“user.firstname”和“user.lastname”，其中“fundraiser.user_ID”=“user.ID”。

所以它会像这样连续出现：fundraiser.ID、fundraiser.user_ID、fundraiser.ref_ID、user.firstname、user.lastname

我已经尝试了 30 种不同的方式来编写这个查询，但都失败了。我得到的错误是“#1242 - 子查询返回超过 1 行”。

不知道我怎样才能给你更多的信息，这样你就可以想象我在说什么，但我会提供我能提供的任何数据。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:34:41.053

选择所有列：

```
SELECT *
FROM   fundraiser f
       INNER JOIN user u
               ON u.ID = f.user_ID
ORDER  BY f.ord_fund_id ASC; 
```

选择**所需**的列：

```
SELECT 
    u.firstname,
    u.lastname,
    f.org_fund_id,
    f.ref_ID
FROM fundraiser f 
INNER JOIN user u ON u.ID = f.user_ID
ORDER BY f.ord_fund_id ASC; 
```

这应该是你需要的。请参阅[此维基百科页面](https://en.wikipedia.org/wiki/Join_%28SQL%29)。

# ios - iOS：拨号时拦截某些号码并启动自己的应用程序

> ID：12194871
> 
> 赞同：0
> 
> 时间：2012-08-30T10:31:49.550
> 
> 标签：ios, phone-call

**用例：** 我的热线有电话号码 0815/111222333 用户启动拨号器并拨打该号码而不是调用我的应用程序启动为他提供服务。

我在 Android 上做到了，但我很确定这在 iOS 中是不允许的。但是我没有找到那个明确的声明。我只是在寻找确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:17:44.053

这在 iOS 上很可能是不可能的。事件如果我注意到有这方面的专利。

# php - PHP - 如何使用给定的数组格式化此输出？

> ID：12194872
> 
> 赞同：0
> 
> 时间：2012-08-30T10:31:48.830
> 
> 标签：php, arrays

所以现在我有一个名为 $socialMeta 的数组，其中包含：

```
Array (
    [0] => Array (
        [socialFacebook] => Array (
            [0] => http://www.facebook.com/someUsername
        )
    )
    [1] => Array (
        [socialYoutube] => Array (
            [0] => http://www.youtube.com/user/someUsername
        )
    )
    [2] => Array (
        [socialSoundcloud] => Array (
            [0] => http://www.soundcloud.com/someUsername
        )
    )
) 
```

从这个数组中，我需要创建以下输出：

```
<div class="social">
<a href="http://www.facebook.com/someUsername" class="fb" target="_blank">Add us on <span>Facebook</span></a>
<a href="http://www.youtube.com/user/someUsername" class="yt" target="_blank">Visit us on <span>Youtube</span></a>
<a href="http://www.soundcloud.com/someUsername" class="sc" target="_blank">Visit us on <span>Souncloud</span></a>
</div> 
```

请注意，第一个链接有不同的锚文本。

对于锚类，我可以使用 $socialMeta 键使整个过程更容易一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:49:35.157

```
<?php if (!empty($socialMeta)) { ?>
<div class="social">
<?php foreach ($socialMeta as $rows) {?>
<?php foreach ($rows as $key => $val) {?>
<?php 
switch ($key) {
    case "socialFacebook":
        $title = "Facebook";
        $class = "fb";
        break;
    case "socialYoutube":
        $title = "Youtube";
        $class = "yt";
        break;
    case "socialSoundcloud":
        $title = "Souncloud";
        $class = "sc";
        break;
}
?>
<a href="<?php echo $val[0]; ?>" class="<?php echo $class; ?>" target="_blank">Add us on <span><?php echo $title; ?></span></a>
<?php }?>
<?php }?>
</div>
<?php }?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:49:11.390

首先为数组中的每个元素识别网络（我假设名称`$array`在以下示例中）：

```
function add_network($array) {
  static $networks = array('Facebook', 'Youtube', 'Soundcloud');
  foreach($networks as $network)
    if (isset($array['social' . $network])) {
      $array['network'] = $network;
      return $array;
    }

  //None found
  $array['network'] = false;
  return $array;
}

$array = array_map('add_network', $array); 
```

然后转换数组（你应该为这个函数找到一个更好的名字）：

```
function transform_array($a) {
  static $classes = array('Youtube' => 'yt', 'Facebook' => 'fb', 'Soundcloud' => 'sc');
  $network = $a['network'];
  $class = $classes[$network];
  $url = $a['social' . $network][0]

  return array('network' => $network,
               'url' => $url,
               'class' => $class);
}

$array = array_map('transform_array', $array); 
```

现在只需遍历以下元素`$array`：

```
foreach($array as $row) {
  $network = $row['network'];
  $url = $row['url'];
  $class = $row['class'];
  if ($network === 'Facebook')
    $link_text = 'Add us on <span>%s</span>';
  else
    $link_text = 'Visit us on <span>%s</span>'

  $link_text = sprintf($link_text, $network);
  printf('<a href="%s" class="%s" target="_blank">%s</a>',
         $url, $class, $link_text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:46:36.423

```
<?php
function flattenArray(array $input){
    $nu = array();
    foreach($input as $k => $v){
        if(is_array($v) && count($v) == 1){
            $nu[key($v)] = current($v);
            if(is_array($nu[key($v)]) && count($v) == 1)
                    $nu[key($v)] = current($nu[key($v)]);
        }
        else
            $nu[$k] = $v;
    }

    return $nu;
}

// here you can maintain the sortorder of the output and add more social networks with the corresponding URL-text...
$urlData = array(
    'socialFacebook' => 'Add us on <span>Facebook></span>',
    'socialYoutube' => 'Visit us on <span>Youtube</span>',
    'socialSoundcloud' => 'Visit us on <span>Souncloud</span>',
);

$testArray = array(
    array('socialFacebook' => array('http.asdfsadf')),
    array('socialYoutube' => array('http.asdfsadf')),
    array('socialSoundcloud' => array('http.asdfsadf'))
);

$output = flattenArray($testArray); 
```

开始了

```
echo '<div class="social">';
foreach($urlData as $network => $linkText){
    if(!empty($output[$network]))
        echo sprintf('<a href="%s" class="fb" target="_blank">%s</span></a>', $output[$network], $linkText);
}
echo '</div>'; 
```

# asp.net - 请求超时发生，同时执行过程

> ID：12194875
> 
> 赞同：0
> 
> 时间：2012-08-30T10:31:58.870
> 
> 标签：asp.net

我正在 asp.net 2.0 中开发一个应用程序，我是从一个站点到另一个站点的产品详细信息。但是由于要上传的产品有数千种，因此会出现请求超时并且该过程未完成。

任何人都可以帮助我或建议我如何避免在两者之间发生请求超时。我的应用程序处于 asp.net 2.0 并使用 InProc 会话状态。

提前致谢。

我还在 web.config 中设置了执行超时，如下所示：

```
<httpRuntime executionTimeout="3500" maxRequestLength="2097151" useFullyQualifiedRedirectUrl="false" minFreeThreads="8" minLocalRequestFreeThreads="4" appRequestQueueLimit="100" enableVersionHeader="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:37:52.467

您可以使用[sessionState](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx)。[类似的问题在这里](http://forums.asp.net/t/1143744.aspx)得到了回答。

# iphone - Facebook graph api注销不起作用

> ID：12194876
> 
> 赞同：7
> 
> 时间：2012-08-30T10:31:59.057
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在使用 Graph Api 进行 Facebook 身份验证，我使用以下方法登录。

```
[FBSession openActiveSessionWithPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:
     ^(FBSession *session, 
       FBSessionState state, NSError *error) {}]; 
```

这会导致登录页面在移动 safari 中打开。我 `[FBSession.activeSession closeAndClearTokenInformation];`用于注销。我的问题是我无法以其他用户身份重新登录，因为注销过程不会清除 safari 中的会话。

[developer.facebook.com http://cloud.github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.0.8.pkg](http://cloud.github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.0.8.pkg)中提供的示例应用程序中存在同样的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:42:49.187

iPhone 上的 Facebook 应用程序通常是供一个人使用的，但是当您作为开发人员进行测试时，您会尝试使用不同的用户 ID 登录。这就是问题所在，在登录应用程序之前，您应该首先使用所需的用户 ID 登录 fb 应用程序。发生这种情况是因为 fb api dnt 让应用程序使 facebook 应用程序退出。每次用户从应用程序注销时也会使其 fb 注销，这对用户来说非常烦人。

# sql-server-2005 - 确定 SQL Server 数据库表中是否存在列的最佳方法是什么？

> ID：12194879
> 
> 赞同：0
> 
> 时间：2012-08-30T10:32:07.497
> 
> 标签：sql-server-2005

> **可能重复：**
> [INFORMATION_SCHEMA vs sysobjects](https://stackoverflow.com/questions/4381765/information-schema-vs-sysobjects)

我正在维护一个旧系统（SQL Server 2005），并且遇到了两个执行相同操作的 select 语句版本。

**以下陈述之一是否比另一个更有效？**

```
SELECT 1 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'tblMyTable' AND COLUMN_NAME = 'MyColumn' 
```

或者

```
SELECT 1  
FROM sys.columns 
WHERE object_id = OBJECT_ID(N'[dbo].[tblMyTable]') AND name = N'MyColumn' 
```

# php - 在 Linux 上备份上传的文档

> ID：12194882
> 
> 赞同：0
> 
> 时间：2012-08-30T10:32:11.670
> 
> 标签：php, linux, backup, crontab

所以我有一个在使用 mysql 数据库的 linux 机器上运行的 PHP 应用程序。通过在 CRONTAB 中添加代码，我每天都设法添加备份我的 mysql 数据库。在我的应用程序客户端能够上传文件，其中一个保存在应用程序文件夹中的一个目录中`ie /myapp/uploaded_documents/`，我正在寻找备份这个目录。

我的问题是：如何在每天的某个时间将目录备份到某个远程位置？是否也可以在我的应用程序文件夹中使用密码保护此目录？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:27:04.533

如上一个答案所述，要在远程机器上定期备份，您可以使用 rsync+ssh+crontab。只需将 ssh 设置为无需密码即可访问远程计算机（对于 ubuntu 发行版）[https://help.ubuntu.com/community/SSH/OpenSSH/Keys](https://help.ubuntu.com/community/SSH/OpenSSH/Keys)，然后在您想要的时间和日期向 crontab 添加 rsync 作业（检查man crontab 以了解如何执行此操作），告诉 rsync 在远程计算机上通过 ssh 备份，例如`0 2 * * * rsync -ae ssh dir_to_bkp name@host:dir_where_bkp`每天凌晨 02:00 使用“name”用户和“dir_where_bk”备份“主机”计算机中的“dir_to_bkp” “作为目的地。rsync 中的 -e ssh 选项指定使用 ssh。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:34:13.033

最好的方法是使用 rsync，因为您只会上传（很可能）更改。

[http://linux.die.net/man/1/rsync](http://linux.die.net/man/1/rsync)

此外，您可以创建增量备份：

[http://www.mikerubel.org/computers/rsync_snapshots/](http://www.mikerubel.org/computers/rsync_snapshots/)

所以我建议的解决方案是 rsync + crontab

# android - Button.setEnabled(true) 保持灰色

> ID：12194883
> 
> 赞同：0
> 
> 时间：2012-08-30T10:32:13.530
> 
> 标签：android

我有一个 Activity 恢复

```
@Override
protected void onResume() {
            Log.v(TAG, " onResume() disables the OK button");
    // onAuthentificated will re-enable it
    findViewById(android.R.id.button1).setEnabled(false);
    super.onResume();
} 
```

后来认证成功，调用我的回调

```
@Override
public void onAuthenticated(String username) {
    Log.v(TAG, "user can press button");
    findViewById(android.R.id.button1).setEnabled(true);
    super.onAuthenticated(username);
} 
```

我知道`setEnabled(true)`最后调用了。

我的问题是按钮仍然是灰色的。发生了什么事，我该如何解决？

布局（但无济于事）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/VerticalLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <!-- other stuff --> 
    <Button
        android:id="@android:id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:text="@android:string/ok" />

</LinearLayout> 
```

这是logcat的最后几行

```
08-30 13:00:45.182: V/ReportActivity(344): onResume() disables the OK button
8-30 13:00:45.382: I/ReportActivity(344): Authentification token callback
08-30 13:00:45.477: D/dalvikvm(344): GC_CONCURRENT freed 324K, 5% free 9960K/10375K, paused 2ms+3ms
08-30 13:00:45.567: D/NetworkService(344): Broadcast the fact user is authenticated
08-30 13:00:45.567: D/ReportActivity(344): user can press button 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:39:03.980

解决方案是将结果存储在`findViewById(android.R.id.button1)`由该`onResume()`方法初始化的字段中。

# php - 需要帮助理解一段php代码

> ID：12194886
> 
> 赞同：0
> 
> 时间：2012-08-30T10:32:27.740
> 
> 标签：php

```
<?php 
if($sitedown==true) {
echo <<<MESSAGE
<div style="width: 700px; height: 328px; background: transparent url({${constant(BASE_PATH)}}/images/down.jpg) top left no-repeat;">
<p style="font-size: 20px; font-weight: bold; color: #666; font-family: tahoma, arial; margin: 0px; padding: 100px 10px 0px 200px;">
</p>
</div>
}
?> 
```

究竟是`url({${constant(BASE_PATH)}}`做什么的？`BASE_PATH`是一个 php 配置变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:34:47.353

`url(something)`是“这是一个 URL”的 CSS

`${constant(BASE_PATH)}`应该给你一个字符串（应该是一个 URL），它会被插入到字符串文字中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:34:39.813

来自 PHP 手册：[`constant()`](http://php.net/manual/en/function.constant.php) `is useful if you need to retrieve the value of a constant, but do not know its name. I.e. it is stored in a variable or returned by a function.`

并且[`url()`](http://www.w3.org/TR/CSS21/syndata.html#uri)是从 URL 中检索某些图像（可能）的 css“函数”。

在上面的代码中，URL 可能是从 PHP 常量生成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:34:54.167

BASE_PATH 是一个[命名常量](http://php.net/manual/en/function.define.php)，最有可能输出您的 webroot 的位置/图像存储的位置。

```
define('BASEPATH', '/path/to/imagefolder/'); 
```

# msbuild - Jenkins 从属 VM 上不存在 MSBuild.exe

> ID：12194888
> 
> 赞同：1
> 
> 时间：2012-08-30T10:32:30.983
> 
> 标签：msbuild, jenkins

我无法在 Jenkins 中设置从设备来构建我的 .net 项目。我不断收到的错误是 FATAL: C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe 不存在。MSBuild 确实存在于上述路径中的 VM 从属设备上。

我正在使用 Jenkins MSBuild 插件，版本 1.15（也无法使用 1.13）。我已将“msbuild 的路径”设置为“C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe”，没有默认参数，并自动取消勾选安装。如果我在主节点上运行相同的项目配置，它构建得很好。

我也尝试为从节点设置节点属性 - 工具位置，但这也没有效果。

有谁知道如何让 Jenkins 在从节点上看到 MSBuild？

谢谢汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:14:01.903

我有一个类似的问题。确保配置中的路径中没有引号。当您在寡妇中使用左移右键单击方法“复制为路径”时，它会添加引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T17:59:16.233

我设法在 MSBuild 可执行路径的开头插入空格，这显然使 Jenkins 执行的检查是否存在逻辑失败。您会认为 MSBuild 插件会在提交配置之前修剪输入......只需删除它就可以了！

# android - adListener adMob onDismissScreen

> ID：12194889
> 
> 赞同：0
> 
> 时间：2012-08-30T10:32:32.647
> 
> 标签：android, admob, interstitial

我的应用中有 2 个不同的广告，一个普通横幅 (320x50) 和一个插页式广告。当用户触摸横幅时，我使用 adListener->onDismissScreen 捕获此事件。

但这似乎不适用于插页式广告。有没有办法对插页式广告做同样的事情？我只想知道用户是否点击了广告！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:40:54.300

AdListener 对插页式广告的工作方式与对横幅广告的工作方式相同。只需确保致电`interstitial.setAdListener(this);`注册这些活动即可。

另请注意，`onDismissScreen`当用户在单击您的添加后返回应用程序时调用。 `onPresentScreen`当用户点击您的广告并且在用户被定向到移动浏览器或 Play 商店之前被调用。

# java - 回滚 @Transactional 注释的方法

> ID：12194891
> 
> 赞同：16
> 
> 时间：2012-08-30T10:32:41.153
> 
> 标签：java, spring, hibernate, transactions

再会。以下代码：

```
 class A{
     private B b;
    @Transactional
    public SomeResult doSomething(){
        SomeResult res = null;
        try {
          // do something 
        } catch (Exception e) {
            res  = b.saveResult();
        }
        return res ;
    }
}
@Transactional(propagation = Propagation.REQUIRES_NEW)
class B{
  public SomeResult saveResult(){
      // save in db 
  }
} 
```

据我了解，如果方法中出现异常，`doSomething`则不会回滚事务。以及如何让它滚动？并返回 SomeResult

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T10:53:59.407

您不应该以编程方式调用 Rollback。[正如文档](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative-rolling-back)所推荐的，最好的方法是使用声明性方法。为此，您需要注释哪些异常将触发回滚。

在你的情况下，像这样

```
@Transactional(rollbackFor={MyException.class, AnotherException.class})
public SomeResult doSomething(){
   ...
} 
```

查看[@Transaction API](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Transactional.html)和有关[回滚事务](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative-rolling-back)的文档。

如果尽管有文档建议，但您想要进行程序化回滚，那么您需要`TransactionAspectSupport`按照已经建议的方式调用它。这是来自文档：

```
public void resolvePosition() {
  try {
    // some business logic...
  } catch (NoProductInStockException ex) {
    // trigger rollback programmatically
    TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();
  }
} 
```

虽然可能存在架构错误。如果你的方法失败并且你需要抛出一个异常，你不应该期望它返回任何东西。也许你给这个方法太多的责任，应该创建一个单独的模型数据，如果出现问题，抛出异常，回滚事务。无论如何，请阅读文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:39:50.190

使用 TransactionAspectSupport.currentTransactionStatus() 等事务管理器获取 TransactionStatus 到您的 bean 尝试在事务管理器中调用 Rollback(DefaultTransactionStatus status)。

参考弹簧[文档](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative)

> 如果可能，强烈建议您使用声明性方法进行回滚。如果您绝对需要，可以使用程序化回滚，但它的使用与实现干净的基于 POJO 的架构背道而驰。

# opencv - OpenCV将帧附加到现有视频（.avi）文件？

> ID：12194902
> 
> 赞同：12
> 
> 时间：2012-08-30T10:33:17.053
> 
> 标签：opencv

我有一个小问题。是否可以使用 OpenCV 将新帧添加（附加）到现有的 .avi 视频文件，而不覆盖整个文件？我在带有 QT 的 Windows7 上使用 OpenCV2.4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-06T09:32:59.953

如果要使用 OpenCV，则必须读取和写入所有数据内容。

```
import cv2
import os

# this two lines are for loading the videos.
# in this case the video are named as: cut1.mp4, cut2.mp4, ..., cut15.mp4
# videofiles = [n for n in os.listdir('.') if n[0]=='c' and n[-4:]=='.mp4']
# videofiles = sorted(videofiles, key=lambda item: int( item.partition('.')[0][3:]))

videofiles = [n for n in os.listdir('.') if n[0]=='c' and n[-4:]=='.avi']
videofiles = sorted(videofiles, key=lambda item: int( item.partition('.')[0][3:]))

video_index = 0
cap = cv2.VideoCapture(videofiles[0])

# video resolution: 1624x1234 px
# out = cv2.VideoWriter("video.avi", 
#                       cv2.cv.CV_FOURCC('F','M','P', '4'), 
#                       15, (1624, 1234), 1)

# fourcc = cv2.VideoWriter_fourcc(*'MP4V')
# out = cv2.VideoWriter('cutout.mp4', fourcc, 20, (640, 480))

fourcc = cv2.VideoWriter_fourcc(*'XVID')
out = cv2.VideoWriter('cutout.avi', fourcc, 20.0, (640, 480))

while(cap.isOpened()):
    ret, frame = cap.read()
    if frame is None:
        print ("end of video " + str(video_index) + " .. next one now")
        video_index += 1
        if video_index >= len(videofiles):
            break
        cap = cv2.VideoCapture(videofiles[ video_index ])
        ret, frame = cap.read()
    cv2.imshow('frame',frame)
    out.write(frame)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
out.release()
cv2.destroyAllWindows()

print ("end.") 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-30T10:41:25.320

看看[VideoWriter](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=videocapture#videowriter)类。

# java - 当我们说一个特定的数据结构是缓存友好的时，这意味着什么？

> ID：12194903
> 
> 赞同：4
> 
> 时间：2012-08-30T10:33:25.087
> 
> 标签：java, caching, memory, data-structures, java-memory-model

我经常读到链表数据结构及其变体跳过列表在并行硬件中是缓存友好的。这是什么意思 ？有人可以用通俗易懂的方式解释一下。

**编辑**：上下文在 [这个链接](http://www.drdobbs.com/parallel/choose-concurrency-friendly-data-structu/208801371?pgno=2)中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T10:38:57.677

> 我经常读到链表数据结构及其变体跳过列表是缓存友好的

链表和类似结构对 CPU 缓存不友好，因为每个节点都可以在内存中随机排列，从而导致许多缓存未命中。

相比之下，一个 ArrayList 将在内存中顺序地拥有所有引用，因此当读入高速缓存行（通常为 64 字节长）时，它可以一次读入 16 个引用。

注意：List 引用的对象仍然可以在内存中随机排列，这是您无法控制的。:|

* * *

从问题中的文章。

> 除了非常适合并发遍历和更新之外，链表在并行硬件上也是缓存友好的。例如，当一个线程移除一个节点时，唯一需要转移到随后读取列表的每个其他内核的内存是包含两个相邻节点的内存。

这里所说的是一个链表在被多个线程同时修改时（`LinkedList`Java 中不支持的东西）只有被修改的链表的节点需要缓存一致。相比之下，如果在 ArrayList 的中间或开头删除或添加元素，则需要更新所有引用。众所周知，这样做是低效的，无论如何最好避免。

Java 中与此最接近的示例是`ConcurrentLinkedQueue`支持并发添加和删除。问题是，您可能通过更新缓存的开始和结束而获得的任何好处都会因为此操作创建垃圾这一事实而丢失，这更重要，尽管仍然不是很重要。

如果您使用 ArrayBlockingQueue，您将获得更好的缓存和垃圾行为，因为引用在内存中是连续的，不需要像 ArrayList 那样洗牌，也不会创建垃圾来添加条目。（不幸的是`take()`创建了一个对象：P）

# java - Oracle VARCHAR 限制作为过程输出参数

> ID：12194907
> 
> 赞同：2
> 
> 时间：2012-08-30T10:33:52.607
> 
> 标签：java, oracle, stored-procedures

我有一个在 Oracle 11g 下编写的存储过程，我的输出参数之一是一个字符串（即 type `VARCHAR`）。

我使用此参数返回由 . 分隔的数字的串联列表`;`。这个列表可以是任何大小，我事先不知道大小。

我的问题是`VARCHAR`足够还是有大小限制（这当然会给我带来麻烦）。如果不是，我应该在这种情况下使用什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T10:34:34.777

PL/SQL 中的 VARCHAR2 可能包含 32,767 个字符。（请注意，这与数据库上的 VARCHAR2 列不同，它的最大长度为 4,000 个字符）

另外，您在上面说您正在使用 VARCHAR。Oracle 建议您使用 VARCHAR2，而不是 VARCHAR。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T10:39:10.317

为什么不使用合适的数据类型（如数字数组）而不是尝试在字符串中编码复杂结构？

# html - 我想在这行代码上出现一个按钮，我该怎么办？

> ID：12194911
> 
> 赞同：0
> 
> 时间：2012-08-30T10:34:15.710
> 
> 标签：html, css, ruby-on-rails

我需要一个小按钮显示在浏览器的这行代码上：

```
<%= link_to "New Article", new_article_path, :class => "new_article" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:36:19.833

`<button>This is the text of the button</button>`

# android - 从我的 Android 活动中打开文件选择器

> ID：12194912
> 
> 赞同：4
> 
> 时间：2012-08-30T10:34:17.387
> 
> 标签：android, android-intent, sd-card, actionview

我正在制作一个 Android 应用程序，它将一些下载的 pdf 文件存储在设备的 SD 卡中。一切正常，但现在我想添加一个函数来弹出默认的 android 文件/文件夹浏览器，显示我的应用程序存储所有 PDF 的目录（其中包含子目录），以便用户看到他的文档的存储位置和可以轻松浏览它们。

我已经阅读了许多其他 SO 问题和论坛帖子，但似乎这只能用于音乐/图像/联系人/等。基本上是那些具有“专用浏览系统”但不具有一般文件浏览功能的文件类型。

我实际上正在使用这段代码：

```
File file = new File("/sdcard/MySorgenia/Documenti/");
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
Uri data = Uri.fromFile(file);
String type = "*/*";
intent.setDataAndType(data, type);
startActivity(intent); 
```

但这将向我显示一个“选择应用程序以完成您的操作”对话框，其中包含许多应用程序，例如“音乐”“画廊”等，但没有通用应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T10:40:23.107

因为在 android 中没有任何本机应用程序可以用作文件资源管理器并响应`Intent type "*/*"`

`File-Explorer`为此目的实现您自己的代码..

看看这两个链接..

1.  [开放意图](http://code.google.com/p/openintents/downloads/detail?name=FileManager-source-1.0.0.zip&can=1&q=)

2.  [Android-文件-探索](https://github.com/mburman/Android-File-Explore)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-01T05:44:03.563

```
public void loadfile()
{
    private static final int gallery=12; 
    private static final String type="*/*";

    Intent i=new Intent(Intent.ACTION_GET_CONTENT);
    i.setType(type);
    startActivityForResult(Intent.createChooser(i,"select file"), gallery);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == gallery && resultCode == RESULT_OK && data != null) {
        Uri uploadfileuri = data.getData();
        File file = new File(uploadfileuri.getPath());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-25T13:10:14.690

从[Android 4.4 KitKat（API 级别 19）](https://developer.android.com/about/versions/android-4.4)开始，有一个 Android 内置文件选择器：您的应用调用`ACTION_OPEN_DOCUMENT`和/或`ACTION_CREATE_DOCUMENT`意图并接收文档提供程序返回的文件。更多信息可以在这里找到：

[使用存储访问框架打开文件 | 安卓开发者](https://developer.android.com/guide/topics/providers/document-provider)

根据您要存储文件的位置，您可能需要请求权限：

[请求应用权限 | 安卓开发者](https://developer.android.com/training/permissions/requesting)

这是一个如何：

[Android 存储访问框架示例 - Techtopia](https://www.techotopia.com/index.php/An_Android_Storage_Access_Framework_Example)。

[Ian Lake](https://github.com/ianhanniballake/)的**本地存储**就是一个很好的工作示例。它的源代码可以在 GitHub 上找到：

[https://github.com/ianhanniballake/LocalStorage](https://github.com/ianhanniballake/LocalStorage)

该应用程序可以从 Google Play 下载：

[https://play.google.com/store/apps/details?id=com.ianhanniballake.localstorage](https://play.google.com/store/apps/details?id=com.ianhanniballake.localstorage)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T10:42:37.407

大多数 android 发行版都没有默认文件浏览器，您注意到的行为是默认的 android 行为。如果安装了任何好的第三方文件浏览器，它将自动显示在该列表中。但是，不能保证每个最终用户都会安装文件浏览器。可以为此创建一个通用的片段小部件（并且可能与其他人共享）。

# c++ - 将 osx 上的默认编译器从 llvm-g++ 更改为 g++

> ID：12194913
> 
> 赞同：0
> 
> 时间：2012-08-30T10:34:30.397
> 
> 标签：c++, macos, g++, llvm

我想在 osx 上将我的默认编译器从 llvm-g++ 更改为 g++，最干净/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:44:27.690

没有这样的“默认”编译器。操作系统是编译器不知道的。*工具*会根据不同的因素选择不同的编译器。例如，Xcode 可以配置为使用不同的默认编译器。

另一方面，如果您想将终端配置为使用不同的默认编译器，只需调整`$PATH`变量，以便在安装 LLVM 之前找到您的 GCC 安装。在最简单的情况下，这可以通过将以下行添加到您的`$HOME/.bashrc`文件中来完成（假设您使用`bash`的是 shell）：

```
export PATH=path/to/gcc/:$PATH 
```

（之后，您需要在更改生效之前重新加载 shell。）

# arrays - jQuery / json 循环没有给我完整的结果 .html()

> ID：12194916
> 
> 赞同：0
> 
> 时间：2012-08-30T10:34:37.507
> 
> 标签：arrays, json, jquery

```
// Calling the video function with JSON

$.getJSON("videos.php", function(data){
// first check if there is a member available to display,
//if not then show error message
    if(data == '') { 
        $('#tabs-4').html("<div class='errorMember'>Sorry, there is currently no member available videos</div>");
    } 
    // if there is a member, then loop through each data available
    else {
          $.each(data, function(i,name){
            content = '<div class="left"><img src="' + name.pic + '"/>';
            content += '<p>' + name.name + '</p>';
            content += '<a href="' + name.link + '" target="_blank">Video link</a>';
            content += '</div><br/><hr>';
            $("#tabs-4").html(content);
        });
    }
});​ 
```

问题是它只给了我一个结果而不是数组中的结果列表，但是如果我 appendTo(content) .. 它会在 current 下添加完整的结果列表，这不是我想要的，因为我需要刷新该内容与更新的数据。

对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:52:34.363

到目前为止，可能只有最后一个 Element 正在显示。

```
// Calling the video function with JSON

$.getJSON("videos.php", function(data){

    // first check if there is a member available to display, if not then show error message
    if(data == '') { 
        $('#tabs-4').html("<div class='errorMember'>Sorry, there is currently no member available videos</div>");
    } 
    // if there is a member, then loop through each data available
    else {
        //If you want to Clear the Container html
        $("#tabs-4").html(''); 
        $.each(data, function(i,name){
            content = '<div class="left"><img src="' + name.pic + '"/>';
            content += '<p>' + name.name + '</p>';
            content += '<a href="' + name.link + '" target="_blank">Video link</a>';
            content += '</div><br/><hr>';
            $("#tabs-4").append(content);
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:37:41.847

如果我很好理解，可能你可能想做这样的事情

```
...
else {
        $("#tabs-4").empty(); // remove previous data (if any)

        $.each(data, function(i,name){
            content = '<div class="left"><img src="' + name.pic + '"/>';
            content += '<p>' + name.name + '</p>';
            content += '<a href="' + name.link + '" target="_blank">Video link</a>';
            content += '</div><br/><hr>';

            $("#tabs-4").append(content); // append new data
        });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:44:26.707

在填充之前清空元素：

```
$('#tabs-4').empty();
$.each(data, function(i,name){
  var content =
    '<div class="left"><img src="' + name.pic + '"/>' +
    '<p>' + name.name + '</p>' +
    '<a href="' + name.link + '" target="_blank">Video link</a>' +
    '</div><br/><hr>';
  $("#tabs-4").append(content);
}); 
```

或者在将字符串放入元素之前将所有元素放入字符串中：

```
var content = '';
$.each(data, function(i,name){
  content +=
    '<div class="left"><img src="' + name.pic + '"/>' +
    '<p>' + name.name + '</p>' +
    '<a href="' + name.link + '" target="_blank">Video link</a>' +
    '</div><br/><hr>';
});
$("#tabs-4").html(content); 
```

# c - RSA_generate_key() openssl: exp 参数

> ID：12194919
> 
> 赞同：1
> 
> 时间：2012-08-30T10:34:46.653
> 
> 标签：c, unix, openssl, rsa

我在互联网上发现函数的 exp 参数“通常是 3,17 或 65,537”。

我如何选择它，使用 3,17 和 65,537 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:48:46.193

这是您问题的一个很好的答案：[出于安全考虑，RSA公共指数是否应该仅在{3、5、17、257或65537}中？](https://security.stackexchange.com/questions/2335/should-rsa-public-exponent-be-only-in-3-5-17-257-or-65537-due-to-security-c)

如果你喜欢数学，你也可以浏览这个：

[一些数学](http://modular.math.washington.edu/edu/2007/spring/ent/ent-html/node41.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:47:46.613

你应该选择你的指数，以便它对于除模的所有素数 p 都是 p-1 的相对素数。`3,5,17,257,65537`尽管如果您尝试使用其他值（[维基百科](https://en.wikipedia.org/wiki/RSA_%28algorithm%29#Key_generation)提供了有关 RSA 密钥生成的更多详细信息），您可能会遇到某些库的问题

[这](https://security.stackexchange.com/questions/2335/should-rsa-public-exponent-be-only-in-3-5-17-257-or-65537-due-to-security-c)是对相关问题的非常好的描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:33:16.383

我建议坚持 NIST 今天在[SP 800-56B](http://csrc.nist.gov/publications/nistpubs/800-56B/sp800-56B.pdf)中推荐的内容：值 65'537（实际上，他们推荐任何不小于该值的奇数正整数）。

选择较小数字（例如 3 或 17）的唯一原因与以下有关：

*   与仅支持特定公共指数的现有系统的兼容性
*   验证签名或加密有效负载时的性能问题。

如果这些对您来说是有效的担忧，您应该考虑较低的指数，但您应该意识到您对 RSA 实现中的缺陷变得更加敏感。

# http - HTTP：缺少资源字符串

> ID：12194923
> 
> 赞同：0
> 
> 时间：2012-08-30T10:34:46.850
> 
> 标签：http, localhost, xpages

我正在尝试`xPages`在本地主机上打开我的应用程序，但收到此错误：

```
HTTP: Missing resource string 
```

当我在 中运行应用程序时`Notes client`，它可以工作。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:06:58.177

我解决了这个问题，我将扩展库文件复制到设计器 Web 预览服务器：

[http://www.openntf.org/internal/home.nsf/response.xsp?action=openDocument&documentId=FF8152FA2DEA7106862577A7002C72DE&MainID=319414B3B3926EF1862577A70028DA46](http://www.openntf.org/internal/home.nsf/response.xsp?action=openDocument&documentId=FF8152FA2DEA7106862577A7002C72DE&MainID=319414B3B3926EF1862577A70028DA46)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:58:17.017

一种可能是您只安装了 Notes 客户端，而不是 Designer 客户端。Notes 客户端不附带在浏览器中预览时使用的 nhttp.exe。nhttp.exe 仅随完整客户端或 Domino Designer 客户端提供。

# shell - 如何限制shell脚本执行时间？

> ID：12194927
> 
> 赞同：7
> 
> 时间：2012-08-30T10:34:54.780
> 
> 标签：shell, cron, cron-task

我有一个预定的 cron 作业（实际上是一个 shell 脚本）。我想限制脚本执行时间，因为它的工作时间长得令人无法接受。出于某种原因，我无法从脚本内部限制脚本执行时间。实际上，如果它运行超过 N 小时，我希望我的系统强制终止任务。请指教。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-04T04:40:21.187

我自己回答只是因为没有人回答。

```
0 * * * * timeout -s 9 3540 /path/to/your_command.sh 
```

如果 59 分钟内未完成，将向您的命令发送 SIGINT。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-09T14:39:33.510

使用 -s 9 有点极端，因为它不会让进程进行任何清理。是的，如果它可以被杀死，它将杀死进程，但是> 90％的时间 a -s 1 请求优雅挂断就足够了。

# opengl - 在 CUDA 中使用 OpenGL 深度信息

> ID：12194929
> 
> 赞同：4
> 
> 时间：2012-08-30T10:35:01.017
> 
> 标签：opengl, cuda, depth

我知道 CUDA 4.2 的 CUDA 互操作性不支持 GL_DEPTH_COMPONENT，但我想知道 CUDA 5 或未来版本是否支持 GL_DEPTH_COMPONENT。

目前我正在使用 fbo 将深度信息渲染到纹理。然后我使用这个纹理作为源在其他纹理中渲染它，并将最后一个颜色纹理与 CUDA 互操作性一起使用。

我也在尝试用它`glCopyPixels`来制作副本。但是这两种解决方案都需要大量内存（两个大纹理，用于深度和颜色）。

我也可以使用着色器，但我不想混合太多技术。

在 CUDA 上拥有 OpenGL 深度数据的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-06T09:15:08.930

2020 年的情况仍然是深度组件无法通过 OpenGL 互操作性子系统在 CUDA 中使用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-03T10:57:54.960

您是否尝试过使用带有深度附件的渲染缓冲区，然后通过 注册它`cudaGraphicsGLRegisterImage`？

此函数支持将渲染缓冲区作为目标，因此您应该能够访问深度信息

# c++ - Cocos2dx中通过plist文件加载动画

> ID：12194930
> 
> 赞同：3
> 
> 时间：2012-08-30T10:35:02.310
> 
> 标签：c++, animation, sprite, cocos2d-x

我正在学习使用`cocos2dx`这些天。从现在开始，我已经能够加载和播放保存为`.plist`文件的精灵动画。我正在以这种方式加载动画：

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("oras.plist");
CCAnimation *bearWalkingAnimation = CCAnimation::create();

for (int i = 0 ; i < 8 ; ++i )
{

    std::stringstream ss;
    ss << "bear" << i + 1  << ".png";

    std::string name = ss.str();
    CCSpriteFrame* sprite =  CCSpriteFrameCache::sharedSpriteFrameCache()>spriteFrameByName(name.c_str());
    bearWalkingAnimation->addSpriteFrame(sprite);

} 
```

我依赖于我知道图像名称的事实，但现在我正在尝试组织一点我的代码。

我想知道在加载时是否知道在哪个 plist 文件中属于精灵帧。我可以这样做吗？怎么做？

换句话说，我想编写一个能够加载仅知道`plist`文件名的动画的通用类。就像是：

```
void MyLoaderClass::LoadAnimation(std::string plist_file_name){ ....} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:56:47.020

我已经解决了`CCDictionary`从加载的`plist`文件构建一个：

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile(fileName.c_str());

mAnimation = CCAnimation::create();

CCFileUtils *fileUtils = CCFileUtils::sharedFileUtils();
const char *fullPath = fileUtils->fullPathFromRelativePath(fileName.c_str());

CCDictionary *dictionary = CCDictionary::createWithContentsOfFileThreadSafe(fullPath);
CCDictionary *framesDict = static_cast<CCDictionary*> (dictionary->objectForKey("frames"));

CCArray *keys = framesDict->allKeys();

for (int i = 0 ; i < keys->count(); ++i)
{
    CCString *spriteFileName = static_cast<CCString *> (keys->objectAtIndex(i));
    CCSpriteFrame* sprite =  CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(spriteFileName->getCString());
    mAnimation->addSpriteFrame(sprite);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-30T06:40:23.193

//“horse.png”通过哪个batch node crate

```
CCSpriteBatchNode* spritebatch = CCSpriteBatchNode::create("horse.png");
CCSpriteFrameCache* cache = CCSpriteFrameCache::sharedSpriteFrameCache();
cache->addSpriteFramesWithFile("horse.plist");

// "hero" is CCSprite and "horse_1.png" is a sprite in "horse.png" batch node

hero = CCSprite::createWithSpriteFrameName("horse_1.png");

addChild(spritebatch);
spritebatch->addChild(hero);

CCLog("In the anim2");

CCArray* animFrames = CCArray::createWithCapacity(16);
char str[100] = {0};
for(int i = 1; i < 16; i++)
{
    // in my batch node all the sprite name as 'horse_1.png', 'horse_2.png'.....
    sprintf(str, "horse_%i.png", i);
    CCSpriteFrame* frame = cache->spriteFrameByName( str );
    animFrames->addObject(frame);
}
CCAnimation* animation = CCAnimation::createWithSpriteFrames(animFrames, .1f);
animation->setRestoreOriginalFrame(true);
hero->runAction( CCRepeatForever::create( CCAnimate::create(animation) ) ); 
```

# objective-c - iOS 应用程序中的 TreeView

> ID：12194932
> 
> 赞同：1
> 
> 时间：2012-08-30T10:35:04.330
> 
> 标签：objective-c, ios, ipad, treeview

我将为 ipad 开发一个 iOS 应用程序。

我需要在树中表示数据，用（+）表示展开元素，（-）表示缩小子元素，每个节点前面都有一个按钮，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:09:54.727

Apple[示例项目](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)可能会对您有所启发。实际上，您需要做的就是更改数据模型和单元格/标题视图的外观（并且您可能只想`UITapGestureRecognizer`使用按钮从标题视图中删除）。

# php - 检查当前日期是否在假期日期范围内

> ID：12194934
> 
> 赞同：0
> 
> 时间：2012-08-30T10:35:06.420
> 
> 标签：php, mysql

如何检查当前日期是否在假期日期范围内？我有一个包含两个 DATE 列 start_date 和 end_date 的“假期”表。用户可以在该范围内定义假期日期。我需要创建一个循环来检查假日日期范围内的当前日期，如果是，则当前日期变为“+1 天”，然后再次检查。到目前为止，我已经做到了：

```
<?php
include ("config.php");
$curdate = date('Y-m-d', time());
$res = mysql_query("SELECT * FROM holidays WHERE '$curdate' BETWEEN `start_date` and `end_date`");
$resu = mysql_num_rows($res);
 if ($resu == NULL)
      {
      echo "Date is not range";
      }
 else
    {
    echo "Date is in range";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:49:23.470

试试这个。

```
<?php
  include ("config.php");
  $curdate = date('Y-m-d', time());

  while(1) {
     $res = mysql_query("SELECT * FROM holidays WHERE '$curdate' BETWEEN `start_date` and `end_date`");
     if(!mysql_num_rows($res))
     {
         echo "Date is not range";
         break;
     }
     else
     {
         echo "Date is in range";
         $TS = strtotime($curdate);
         $curdate = date('Y-m-d', strtotime('+1 day', $TS));
     }
  }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:49:25.983

这应该有效：

```
<?php
include ("config.php");

$curdate = date('Y-m-d', time());

while(1)
{
    $res = mysql_query("SELECT * FROM holidays WHERE '$curdate' BETWEEN `start_date` and `end_date` LIMIT 1");

    if( !mysql_num_rows($res) )
    {
        echo 'closest data available: ' . $curdate;
        break;
    }

    $ar = mysql_fetch_assoc($res);
    $curdate = date('Y-m-d', strtotime("+1 day", $ar['end_date']));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:53:50.583

你不需要有一个循环，所以你可以这样做

```
<?php
   include ("config.php");
   $curdate = date('Y-m-d', time());
   $res = mysql_query("SELECT id FROM holidays WHERE '$curdate' BETWEEN `start_date` and `end_date`");
   $resu = mysql_num_rows($res);
   if ($resu == 0)
   {
      echo "Date is not range";
   }
   else
   {
      $res = mysql_query("SELECT end_date FROM holidays WHERE end_date > '$curdate' ORDER BY end_date ASC LIMIT 1");
      $resu = mysql_fetch_array($res);

      $next_day = strtotime($resu['end_date']) + 24 * 60 * 60;
      echo 'The next available day is ' . date("Y-m-d", $next_day);
   }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:38:01.690

`$resu`将包含结果行数。所以你必须验证是否`$resu == 0`

# android - 电话间隙返回键提示信息

> ID：12194935
> 
> 赞同：-1
> 
> 时间：2012-08-30T10:35:11.483
> 
> 标签：android, cordova

我想在单击后退按钮时弹出一个窗口。现在使用我的代码后退按钮被禁用，但它没有发出警报消息。它仍然无法正常工作。我的工作..

```
function load()
{
document.addEventListener("backbutton", backKeyDown, false);
function backKeyDown() {console.log("PhoneGap Ready!");}
}

<body onLoad="load()">
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:44:32.197

只需尝试在 pageshow 函数中调用此文档 addEventListener 即可。您必须检查每个页面显示中的后退按钮事件。

这个例子会帮助你，

```
$(document).bind ('pageshow', function (e, data) {
            document.addEventListener("backbutton", function () { 
                setTimeout( function() {console.log("PhoneGap Ready!");}, 100 );
            }, true);
        }
    }); 
```

只需在 onDeviceReady 方法中调用此绑定方法即可。正文 onLoad 事件在某些 phonegap 情况下不起作用。与 phonegap 事件一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:44:50.903

我不确定，但你为什么不给按钮添加一个类，然后告诉它要做什么。

```
<a href="#home" class="backButton">Back</a>

$('.backButton').click(function() { alert("This should work!"); }); 
```

# iphone - 广告横幅查看 UITabBar

> ID：12194937
> 
> 赞同：0
> 
> 时间：2012-08-30T10:35:15.540
> 
> 标签：iphone, objective-c, ios, ipad

我按照本[教程](http://www.ioslearner.com/implement-iads-tutorial-iphone-ipad-sdk/)进行操作，但是我的示例比上面提到的要复杂一些。我的例子`TabBar`底部有一个，`UITableViewController`上面有一个。其中`UITableViewController`有一个`UISearchBar`（当然还有一个单元`UITableViewCell`格内容的单元格原型）。

我想要做的是像链接中描述的那样在所有单元格的`adBannerView`上方和下方放置一个。`TabBar`

希望大家理解的足够清楚，如果没有，请告诉我。

谢谢达里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:33:41.123

将您的 adBannerView 添加到 tableview 的窗口属性。还要根据窗口为bannerview提供适当的框架。

```
[self.tableview.window addSubview:adbannerview]; 
```

# https - https 用于子域证书类型

> ID：12194939
> 
> 赞同：0
> 
> 时间：2012-08-30T10:35:18.533
> 
> 标签：https, subdomain

我目前正在为我们的私人网络界面开发一个客户端部分。我想使用 https，但服务器未注册到域。

我的研究表明，对 IP 地址使用有效的 https 证书是不可能的，或者至少相当复杂。

另一种选择是使用诸如 remote.example.com 之类的子域，它将指向我的服务器 IP 地址。

我的问题是这可以用标准证书来完成吗？我可以只使用 remote.example.com 作为域名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:15:28.530

好的，它适用于标准证书，只需将 CN 设置为 remote.example.com

# iphone - 设备方向改变时图像动画自动停止

> ID：12194941
> 
> 赞同：0
> 
> 时间：2012-08-30T10:35:22.030
> 
> 标签：iphone, objective-c, ios, animation, uiinterfaceorientation

我是 iPhone 开发的新手。我的笔尖中有一个图像视图，我成功地制作了动画，使用以下代码使其从底部移动到顶部。

```
- (void)viewWillAppear:(BOOL)animated{ 
    [super viewWillAppear:YES];

    [self animateImage];    
}

-(void)animateImage{

    CGRect oldFrame=self.displayImg.frame;

     [UIView animateWithDuration:2.0 animations:^{

     CGRect newFrame=self.displayImg.frame;

      newFrame=CGRectOffset(newFrame, 0, -420);

      self.displayImg.frame=newFrame;

    }completion:^(BOOL finished){

        if(finished){

            self.displayImg.frame=oldFrame;

            [self animateImage];            
         }
    }];
} 
```

我的问题是当我将设备方向更改为横向时，图像动画停止并且图像消失。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:30:50.983

它工作得很好，递归没有中断，动画继续。这意味着如果递归真的停止或更改视图内容/初始位置，您自己正在做一些事情来中断它，以便在动画仍在工作时您无法再看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:40:26.877

不，它没有，伙计。我自己检查过。它工作正常。解决方法，错误出现在代码中的其他位置。

# python - 不应该在下面的代码中缩进

> ID：12194947
> 
> 赞同：2
> 
> 时间：2012-08-30T10:35:55.900
> 
> 标签：python

在[python教程](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)中有一个例子（复制如下），不`else`应该缩进吗？我运行了代码，但它没有工作，但我缩进了它（`else`），它工作了。是，我说的对吗？如果文档有误，那么如何将其作为错误报告给 python 文档人员？

```
>>> for n in range(2, 10):
...     for x in range(2, n):
...         if n % x == 0:
...             print n, 'equals', x, '*', n/x
...             break
...     else:
...         # loop fell through without finding a factor
...         print n, 'is a prime number'
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T10:40:09.563

请参阅您链接的文档：

```
循环语句可能有一个 else 子句；它在循环时执行
通过用尽列表（使用 for）或条件时终止
变为假（使用 while），但不是当循环被中断终止时
陈述。这可以通过以下循环来举例说明，该循环搜索
质数：

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T10:41:07.397

Tha示例正在运行并且缩进很好，请看这里：

```
 # Ident level:
>>> for n in range(2, 10):                          # 0 
...     for x in range(2, n):                       # 1                          
...         if n % x == 0:                          # 2
...             print n, 'equals', x, '*', n/x      # 3
...             break                               # 3
...     else:                                       # 1
...         # loop fell through without finding a factor                        
...         print n, 'is a prime number'            # 2 
```

如您所见，通过遵循以下规则`else`与第二个相关：`for`

> 循环语句可能有一个 else 子句；**它在循环因列表用尽而终止时（使用 for）或条件变为假（使用 while）时执行，但不是在循环由 break 语句终止时执行**。

在该示例中，这意味着如果第二个 for （在第二行中）将完成运行但永远不会运行 break 命令，则将调用 else - 仅当`n % x == 0`永远不会 eval to 时`TRUE`。

如果`(n % x == 0)`在任何时候 break 将被调用，第二个 for 将停止，`n`从第一个 for 将增长 1，(n = n + 1)，第二个 for 将再次调用 new `n`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:40:09.393

这是 Python 的示例`for ... else` [http://psung.blogspot.co.il/2007/12/for-else-in-python.html](http://psung.blogspot.co.il/2007/12/for-else-in-python.html)

它基本上在 for 循环结束并正常终止后调用`else`部分中的代码（无论如何都不会中断）

# css - CSS背景图片没有出现？

> ID：12194949
> 
> 赞同：0
> 
> 时间：2012-08-30T10:36:06.933
> 
> 标签：css, wordpress

您好，我的网站是[http://math.pixelworklab.com/](http://math.pixelworklab.com/)

我正在尝试为所有导航按钮（白色）添加活动状态，但主页按钮的形状不同。我添加了一个更具体的选择器，它显示圆形背景 .png 正在加载，但在导航上仍显示为正方形。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:48:06.393

尝试使用边框半径 CSS 属性：

例如

```
.homelink { border-radius: 20px 20px 20px 20px; /* An over the top example */ } 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:39:31.107

你在哪里声明的`background-image`？我能看到的只是`background-color`and `none`for `background-image`。

![bg](../Images/40959826cb954eec6f0b0658e15ce3e8.png)

### 在您发表评论后，将使用相关修复更新答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:43:10.170

您的自定义 css 行号 131 重叠行号 222，

```
At line number 131
border-radius: 0;

At line number 222
border-radius: 3px;

I suggest you to add at line No. 222
border-radius: 3px !important; 
```

# iphone - 更改分段控制段背景不起作用

> ID：12194954
> 
> 赞同：0
> 
> 时间：2012-08-30T10:36:31.253
> 
> 标签：iphone, objective-c, xcode

我在 uitableview 的标题中添加了分段控件。这很好用。但由于某种原因，我无法使分段按钮（或至少只是第一个按钮）具有红色背景色。它只加载默认的银色。

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView* NEWview = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    NEWview.backgroundColor = [UIColor colorWithRed:78.0/255.0f green:88.0/255.0f blue:74.0/255.0f alpha:1.0]; 
    NSArray *itemArray = [NSArray arrayWithObjects: @"Organisations", @"Events", nil];
    UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
    segmentedControl.frame = CGRectMake(15, 5, 290, 30);
    segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
    segmentedControl.selectedSegmentIndex = 1;
    UIColor *newSelectedTintColor = [UIColor redColor];
    [[[segmentedControl subviews] objectAtIndex:0] setTintColor:newSelectedTintColor];
    [NEWview addSubview:segmentedControl];
    return NEWview;
} 
```

有任何想法吗？提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:44:56.880

请参阅[此](https://goddess-gate.com/dc2/index.php/post/454)链接以更改所选段的背景颜色

你还可以做的是设置标题颜色选择而不是这样选择：

```
NSDictionary *normalAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [UIFont fontWithName:@"Arial" size:20.0],UITextAttributeFont,
                                  [UIColor colorWithRed:75.0/255.0 green:75.0/255.0 blue:75.0/255.0 alpha:1.0], UITextAttributeTextColor,
                                  [UIColor clearColor], UITextAttributeTextShadowColor,
                                  [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
                                  nil];//[NSDictionary dictionaryWithObject:  [UIColor redColor]forKey:UITextAttributeTextColor];
[segmentCtrl setTitleTextAttributes:normalAttributes forState:UIControlStateNormal];

NSDictionary *selectedAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [UIFont fontWithName:@"Arial" size:20.0],UITextAttributeFont,
                                    [UIColor redColor], UITextAttributeTextColor,
                                    [UIColor clearColor], UITextAttributeTextShadowColor,
                                    [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
                                    nil] ;//[NSDictionary dictionaryWithObject:  [UIColor redColor]forKey:UITextAttributeTextColor];
[segmentCtrl setTitleTextAttributes:selectedAttributes forState:UIControlStateSelected]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:58:16.553

仅当分段控件为条形样式时，分段控件的色调颜色才有效。

```
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
segmentedControl.tintColor=[UIColor redColor]; 
```

# php - PHP 和 JavaScript：在 PHP 中获取 HTML 值

> ID：12194955
> 
> 赞同：0
> 
> 时间：2012-08-30T10:36:34.747
> 
> 标签：php, javascript

我有一个跨度，它看起来像这样：

```
<span class="price" id="product-price-167">€47.00</span> 
```

47.00 是使用 JavaScript 动态设置的。现在，当用户单击按钮时，将触发对 PHP 脚本的请求。我需要该脚本中的 47.00。我怎么能那样做？我知道 JS 是前端，PHP 是服务器端，但有什么办法吗？

谢谢 ：）

**解决方案：**我正在使用隐藏字段并使用

```
$price = $_POST["price"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:40:13.230

```
var path = 'path-to-script.php';
var data = 'price='+Number($('#product-price-167').replace(/[^0-9\.]+/g,"")); // to remove redundant [currency] characters
$.post(path, data, function(returnText){
    // do stuff here
}); 
```

应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:39:09.333

您可以使用 jquery 来检索元素的值：

```
var value = $('#product-price-167').text(); 
```

我认为这应该给你 47.00。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:41:16.070

使用 JQuery：

您可以获得跨度内的价格：

```
var price = $('#product-price-167').text(); 
```

然后，您可以相应地解析价格以摆脱欧元符号。在不确切知道按钮将放置在何处或如何工作的情况下，很难告诉您如何将其添加到您的 PHP 脚本中。

请注意，如果这是一个严肃的应用程序，则不应将其解析为 Float：使用

```
var parsedNumber = Number(price.replace(/[^0-9\.]+/g,"")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T10:44:24.417

您可以使用 ajax 轻松地使用 jquery 将该值发布到 php 页面

```
<script type="text/javascript">

// i m assuming that 167 in id product-price-167 comes from database in a loop

function buttonClick(pid){
 var price=$("#product-price-"+pid).text();
    $.ajax({
        type : "POST",
        data  : "price="+price,
        url   : "yourphppage.php",
        success :function(data){
            //return something from php page
        }
    });
}
</script> 
```

和你的输入按钮

```
<input type="button" onclick="buttonClick('167')" /> 
```

# asp.net - 在 Visual Studio 中在哪里编写 ASP 代码？

> ID：12194956
> 
> 赞同：0
> 
> 时间：2012-08-30T10:36:39.817
> 
> 标签：asp.net, visual-studio-2008, asp-classic

一个愚蠢的问题要问。实际上我是 ASP.NET 的开发人员，但根据项目要求，我必须使用 Classic ASP。现在我想知道在 MS VISUAL STUDIO-2008 中如何以及在何处编写经典 ASP 代码。因为当我们开始一个新网站时，它说的是 ASP.NET 网站而不是 ASP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:40:01.640

对 SO 进行一点搜索会引导你到[这个](https://stackoverflow.com/a/5129122/394028)它应该也适用于 VS2008

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:02:47.167

如果你想在visual studio中编写classic-asp的代码，那就把它写在源文件
中，即设计页面。不要将其写入类（.cs）文件中。
但我的建议是，如果您想编写高效的 classic-asp 代码，请
使用 Dreamweaver

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T10:44:32.870

只需在您的项目中添加一个新项目，选择文本文件并将扩展名更改为 asp。

# facebook-apps - 如何正确授权 Facebook 应用

> ID：12194958
> 
> 赞同：0
> 
> 时间：2012-08-30T10:36:47.800
> 
> 标签：facebook-apps, facebook-authentication, facebook-app-requests

我正在创建一个基本的 Facebook 应用程序，当未经许可的用户访问该应用程序时，他们将被重定向到授权页面。但是，该页面未显示，并且我看到以下错误。

> 此内容无法在框架中显示

在新窗口中打开它然后显示我的应用程序的授权页面。单击“转到应用程序”然后将我带到应用程序，但在它自己的窗口中，远离 Facebook。现在可以返回 FB 并重新加载 App 页面。

更奇怪的是，当我注销并转到我的应用程序页面时，我得到一个 Facebook 404 页面（4oh4.php）。

我猜我以某种方式做错了，所以有人能看出我的脚本有什么明显的问题吗？谢谢。

看看发生了什么 - [http://apps.facebook.com/dyne_drewett_news/](http://apps.facebook.com/dyne_drewett_news/)

```
<?php
require 'fb/facebook.php';

$fbconfig['appUrl'] = 'my-app-url';    // Create An instance of our Facebook Application.
$facebook = new Facebook(array(
    'appId'  => 'my-app-ID', // Entered correctly in actual script
    'secret' => 'me-app-secret', // Entered correctly in actual script
    'cookies' => 'true',
));

// Get the app User ID
$user = $facebook->getUser();

if($user) :
    try{       // If the user has been authenticated then proceed
        $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e){
        error_log($e);     
        $user = null;
    }
endif;

// If the user is authenticated then generate the variable for the logout URL
if($user) :
    $logoutUrl = $facebook->getLogoutUrl();
?>

<!-- My HTML goes here -->

<?php
else :
    $loginUrl = $facebook->getLoginUrl();
    header('Location: '.$loginUrl);
endif;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:39:30.190

因为您在 iframe 中工作，所以您必须执行 JavaScript 重定向。只有这样，您才能重定向最顶层的帧 -

```
echo "<script language=javascript>";
echo "top.location.href ='".$url."';";
echo "</script>";
exit(); 
```

这是在 Facebook 应用程序中进行完整重定向的唯一方法。任何其他重定向（例如使用 PHP）只会重定向iframe*内的用户...*

# c# - OutOfMemoryException 在我的应用程序中，我尝试使用 using 和 dispose()！

> ID：12194964
> 
> 赞同：0
> 
> 时间：2012-08-30T10:37:06.340
> 
> 标签：c#, sql-server, out-of-memory

我刚刚阅读了有关同一问题的所有答案，但它们没有帮助。

这是我的 c# 代码的一部分，它太长了。它有很多`SQLConnection`s 和 2 个计时器。

```
Indirizzo nuovoInd = new Indirizzo();

SqlConnection cn = new SqlConnection(nuovoInd.OttieniIP());
string strSql = "INSERT INTO Pietanze(nome,prezzo,ingredienti,cod_cat) VALUES ('"+nome+"','"+prezzo+"','"+ingredienti+"','"+contCat+"')";
SqlCommand cmd = new SqlCommand(strSql, cn);

cn.Open();
SqlDataReader dr = cmd.ExecuteReader(); 
```

或者

```
public static float GetCoperti(int codOrdine)
    {
        float copertiTot = 0;
        List<Ordine> ordini = new List<Ordine>();

        VisualizzaOrdini.Form1.Indirizzo nuovoInd = new VisualizzaOrdini.Form1.Indirizzo();

        SqlConnection cn = new SqlConnection(nuovoInd.OttieniIP());
        string strSql = "SELECT codo,tavolo,InsertDate,nCoperti,costoCoperti FROM Ordini, Riga_Ordine, Coperti where codo=cod_or and cod_or = '"+ codOrdine + "' ORDER BY InsertDate DESC";
        SqlCommand cmd = new SqlCommand(strSql, cn);

        cn.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            Ordine currO = new Ordine();
            currO.Data = Convert.ToDateTime(dr["InsertDate"]);
            currO.Coperti = (int)dr["nCoperti"];
            currO.PrezzoCoperto = Convert.ToSingle(dr["costoCoperti"]);
            currO.Tavolo = dr["tavolo"].ToString();
            currO.Codice = (int)dr["codo"];
            copertiTot = (currO.PrezzoCoperto * Convert.ToSingle(currO.Coperti));
            ordini.Add(currO);
        }

        return copertiTot;

    } 
```

我正在为代码抛出`OutOfMemoryException`. 这可能是什么原因造成的？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:47:22.227

首先，打开数据库连接以完全执行代码是不好的做法。将执行语句分配给 some `DataTable`。它将为您提供数据库的本地副本。处理起来也更方便，你肯定不会出现内存不足的异常。

**数据表 DTab = cmdexecuteReader(); 数据集 DSet = cmdexecuteReader();**

两者都会总是给你预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:45:23.280

这可能是您在获取记录后没有关闭对象的问题，[您](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.close.aspx)`SqlDataReader`必须明确关闭它。

```
dr.Close(); 
```

此外，关闭阅读器后关闭您的连接，或按照**Habib**`using`的建议使用块。

 **```
cn.Close(); 
```**

# javafx-2 - 初级阶段关闭时如何关闭所有阶段？

> ID：12194967
> 
> 赞同：6
> 
> 时间：2012-08-30T10:37:08.710
> 
> 标签：javafx-2

我有一个应用程序，当发生异常时我调用以下代码 - 也就是说，它位于“try/catch”的“catch”内。它只是创建一个类似“弹出”的窗口，告诉用户输入一个 int 代替。

```
Stage dialogStage = new Stage();
dialogStage.initModality(Modality.WINDOW_MODAL);
dialogStage.setScene(new Scene(VBoxBuilder.create().
children(new Text("Please enter an integer."), new Button("Ok.")).
alignment(Pos.CENTER).padding(new Insets(5)).build()));
dialogStage.show(); 
```

唯一的问题是即使主阶段（即 public void start(Stage primaryStage) 中的参数）关闭，阶段仍然存在。

我试过什么？：

我通过将 dialogstage 定义为类变量来使整个类中可见。然后我实现了以下代码：

```
primaryStage.setOnCloseRequest((new EventHandler<WindowEvent>(){

        @Override
        public void handle(WindowEvent arg0) {
                            arg0.consume();
            try
            {
             dialogStage.close();

                            }
            catch(Exception ex)
            {
                System.out.print(ex.getMessage()+"\r\n");
            }

        }
    }));
} 
```

当用户尝试退出主应用程序时，这个“有效”的对话阶段会关闭，但是，它实际上并没有按照我的意图进行：当您尝试关闭主阶段时，只有对话阶段会关闭。

这也是一个美学上令人不快的解决方案，因为我不希望全班都知道愚蠢的对话框，它只位于一次尝试/捕获中并且可能永远不会被使用。

我想知道是否有一个简单的解决方案可以告诉 dialogstage 在主要阶段关闭时关闭，并且我不必在 try/catch 之外编写太多代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T11:00:00.083

在主舞台上的 OnCloseRequest 事件中，执行`Platform.exit`( [docs.oracle.com/javafx/2/api/javafx/application/Platform.html](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html) )

# mysql - 计算mysql中两个日期时间之间的差异

> ID：12194968
> 
> 赞同：-4
> 
> 时间：2012-08-30T10:37:12.283
> 
> 标签：mysql, sql, database

我希望**查询**计算两个日期时间字段之间的差异

*   计算总时间

*   两个日期时间字段与**start_time 和 stop_time在同一个表中**

*   我想计算总开始时间和停止时间

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T10:46:36.143

您可以使用 MySQL 的[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_unix-timestamp)函数将 datetime 表达式转换为自 UNIX 纪元以来的秒数，然后将所有差异的总和得出总持续时间（以秒为单位）：

```
SELECT SUM(UNIX_TIMESTAMP(stop_time) - UNIX_TIMESTAMP(start_time)) FROM my_table 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/fa7c2/1/0)上查看。

请注意，`UNIX_TIMESTAMP()`仅限于`'1970-01-01 00:00:01'`UTC 到`'2038-01-19 03:14:07'`UTC 的范围。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T10:42:27.427

**暗示：**

```
SELECT TIMESTAMPDIFF(SECOND,'2012-12-30 12:01:01','2012-12-31 10:02:00'); 
-- result: 79259  the difference in seconds with the time. 
```

有关功能的更多详细信息，请参阅[此](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)链接`DateTime`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T10:44:34.007

试试这个

```
SELECT TIMEDIFF(STOP_TIME - START_TIME) AS INTERVAL
FROM ...... 
```

# java - java.sql.SQLException“数据库处于自动提交模式”的原因

> ID：12194972
> 
> 赞同：5
> 
> 时间：2012-08-30T10:37:28.210
> 
> 标签：java, sqlite, transactions

我在 servlet 应用程序中使用`sqlite`数据库和`java.sql`类将一些数据批量插入到数据库中。有连续四次插入不同类型的数据。每个看起来像这样：

```
PreparedStatement statement = conn
    .prepareStatement("insert or ignore into nodes(name,jid,available,reachable,responsive) values(?,?,?,?,?);");
for (NodeInfo n : nodes)
{
    statement.setString(1, n.name);
    statement.setString(2, n.jid);
    statement.setBoolean(3, n.available);
    statement.setBoolean(4, n.reachable);
    statement.setBoolean(5, n.responsive);
    statement.addBatch();
}

conn.setAutoCommit(false);
statement.executeBatch();
conn.commit();
conn.setAutoCommit(true);
statement.close(); 
```

但有时我得到

```
java.sql.SQLException: database in auto-commit mode 
```

我在源代码中发现，当数据库处于自动提交模式`java.sql.Connection`时调用时会引发此异常。`commit()`但是我之前关闭了自动提交，我看不到任何与并行执行相关的问题，因为现在应用程序只打开一次。

你知道如何调试这个问题吗？`null`也许这个错误还有其他原因（因为我刚刚发现插入非空字段时会抛出关于数据库未找到或配置不当的异常）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:59:34.750

可能是*语句*顺序的*问题*。您的数据库语句应该是：

```
 PreparedStatement statement1 = null;
  PreparedStatement statement2 = null;
  Connection connection=null;

    try {
        //1\. Obtain connection and set `false` to autoCommit
        connection.setAutoCommit(false);
        //2\. Prepare and execute statements
        statement1=connection.prepareStatement(sql1);
        statement2=connection.prepareStatement(sql2);
        ...
        //3\. Execute the statements

        statement1.executeUpdate();
        statement2.executeUpdate();

        //4\. Commit the changes

        connection.commit();
        }
    } catch (SQLException e ) {
        if (connection!=null) {
            try {
                connection.rollback();
            } catch(SQLException excep) {}
        }
    }finally {
        if (statement1 != null) {
            statement1.close();
        }
        if (statement2 != null) {
            statement2.close();
        }
       if(connection != null){
          connection.setAutoCommit(true);
          connection.close();
        }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:40:47.867

您必须准备您的 Statement 并在之后创建批次`conn.setAutoCommit(false);`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T10:45:30.290

从 servlet 运行它时，您必须确保 的使用`Connection`是同步的。多个请求可以`Connection`几乎同时将其设置为不同的自动提交模式。如果您`Connection`每个请求使用一个，这将不是问题。否则，用临界区保护上述部分。

适用于 tomcat / eclipse 的调试提示。

1) 为您的应用服务器启用 JDPA 调试。在 tomcat 中，您可以通过在 catalina.sh / catalina.bat 中添加以下行来做到这一点：

```
 set JPDA_ADDRESS=8000
 set JPDA_TRANSPORT=dt_socket 
```

2）重启应用服务器

3) 使用 eclipse 连接到您的应用程序服务器。“调试为”->“远程 Java 应用程序”

4）在上面的代码中设置一个断点。

5) 运行小服务程序。

# clojure - 如何按值对结构向量进行排序？

> ID：12194977
> 
> 赞同：1
> 
> 时间：2012-08-30T10:37:47.960
> 
> 标签：clojure

更具体地说：如何按某个键的值对结构向量进行排序？

例如，如果我有：

```
(defstruct Item :weight :value :cost
(def my-items [(struct Item 30 50 5)
               (struct Item 15 75 20)
               (struct Item 50 10 35)]) 
```

我将如何按值对向量中的所有项目进行排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T10:46:03.290

使用[排序依据](http://clojuredocs.org/clojure_core/clojure.core/sort-by)

```
Clojure 1.4.0
user=> (defstruct Item :weight :value :cost)
#'user/Item
user=> (def my-items [(struct Item 30 50 5)
               (struct Item 15 75 20)
               (struct Item 50 10 35)])
#'user/my-items
user=> (sort-by :value my-items)
({:weight 50, :value 10, :cost 35} {:weight 30, :value 50, :cost 5} {:weight 15, :value 75, :cost 20}) 
```

# iphone - 在 webView 中加载时如何在电影播放器 中完成按钮操作？

> ID：12194978
> 
> 赞同：2
> 
> 时间：2012-08-30T10:37:49.833
> 
> 标签：iphone

我是 Iphone 新手，正在尝试在 webView 中播放视频。所以，我需要完成按钮操作。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:29:17.657

最后我找到了完成按钮操作的解决方案......这个逻辑也适用于 ipad 和 iphone。我通过使用 UIGestureRecognizer 解决了这个问题。

这是我的代码。

首先，我通过使用为 EnterFullScreen 添加通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(youTubeStarted:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil]; 
```

现在在 youTubeStarted 方法中我添加了这个代码..

```
-(void)youTubeStarted:(NSNotification *)notification{
if (!tapRecognizer1) {
    tapRecognizer1 = [[UITapGestureRecognizer alloc] init];
    tapRecognizer1.delegate = self;
    [tapRecognizer1 setNumberOfTapsRequired:1];
    [self.view addGestureRecognizer:tapRecognizer1];
}    
} 
```

这会将 TapRecognizer 添加到电影播放器​​中。

现在下面的委托方法将检查它是否完成按钮

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
NSLog(@"%@",touch.description);
NSString *ViewName = touch.description ;
CGPoint location = [touch locationInView:touch.view];
NSLog(@"location x===%f , location y=== %f",location.x,location.y);
NSRange Check = [ViewName rangeOfString:@"UINavigationButton"];
NSRange checkFrameOfButton;
if (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) {
   checkFrameOfButton = [ViewName rangeOfString:@"frame = (7 7; 50 30)"];
    if (checkFrameOfButton.length <= 0) {
        checkFrameOfButton = [ViewName rangeOfString:@"frame = (7 7; 51 30)"];
    } 
}
else {
    checkFrameOfButton = [ViewName rangeOfString:@"frame = (5 7; 48 30)"];
    if (Check.length<=0) {
        Check = [ViewName rangeOfString:@"UIView"];
    }
}
if (location.y<40 && location.x<85 && Check.length>0 && checkFrameOfButton.length>0) {
    [self endplaying];  
    }
    return YES;
} 
```

现在在 endplaying 方法中，你可以做你想做的事......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:49:37.103

如果视频在 UIWebView 中播放，那么您可以使用以下代码以及在 webview 中加载 url 的代码来访问视频何时播放以及按下完成按钮时

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoPlayStarted:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoPlayFinished:) name:@"UIMoviePlayerControllerDidExitFullscreenNotification" object:nil]; 
```

并且可以通过

```
BOOL isVideoInFullScreenMode;//Temperory added here.. must be in .h file or at teh top if required
-(void)videoPlayStarted:(NSNotification *)notification{
//Your stuff here
   isVideoInFullScreenMode = YES;
}

-(void)videoPlayFinished:(NSNotification *)notification{
    //Your stuffs here
    isVideoInFullScreenMode = NO;
} 
```

# ant - 无法初始化类 net.sourceforge.pmd.lang.xpath.Initializer

> ID：12194980
> 
> 赞同：0
> 
> 时间：2012-08-30T10:37:54.277
> 
> 标签：ant, pmd

这是我的 ant build.xml 的 pmd 脚本

```
<property name="pmd.dir" value="${basedir}/pmd" /><!-- directory that contains pmd.jar -->
<property name="pmd.test.results" location="${build.dir}/pmd"/>
<path id="pmd.lib" >
    <fileset dir="${pmd.dir}">
        <include name="*.jar"/>
        <exclude name="/rulesets" />
    </fileset>
</path>
<target name="pmd" depends="compile" >
     <taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask" classpathref="pmd.lib"/>
     <pmd shortFilenames="true">
           <ruleset>b</ruleset>
           <formatter type="text" toFile="pmd-ant-results.txt"/>
           <fileset dir="src">
                 <include name="**/*.java"/>
           </fileset>
     </pmd>
</target> 
```

这是我的项目资源管理器的屏幕截图，这是指向[ruleset.xml的 pastebin 链接](http://pastebin.com/raw.php?i=DGuHzxg3)

[![项目](../Images/24cb5fb5f0327a60e53ce2130995ea55.png)](https://i.stack.imgur.com/7MHLM.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/zmystq0w.2q2.png)）]

这是错误

> pmd：
> 
> 构建失败 C:\Users\Michael\Desktop\log4jassignment.s06005586\build.xml:112：找不到资源规则集/java/basic.xml。确保资源是有效的文件或 URL 或在 CLASSPATH 上。这是当前的类路径：C:\Program Files\eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730\lib\ant-antlr.jar;C:\Program Files\eclipse\plugins\org.apache.ant_1 .8.3.v20120321-1730\lib\ant-apache-bcel.jar;C:\Program Files\eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730\lib\ant-apache-bsf.jar;C :\Program Files\eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730\lib\ant-apache-log4j.jar;C:\Program Files\eclipse\plugins\org.apache.ant_1.8.3.v20120321 -1730\lib\ant-apache-oro.jar;C:\Program Files\eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730\lib\ant-apache-regexp.jar;C:\Program Files \eclipse\plugins\org.apache.ant_1.8.3。

我遇到的主要问题是缺乏关于 pmd 和 ant 的信息（可怕的是那里什么都没有）所以我在这一点上几乎迷失了我做错了什么......我很确定我还没有正确设置我的规则集（但由于缺乏关于 ant/pmd 实现的信息，所以无法判断）....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:02:23.213

该错误清楚地表明...

```
BUILD FAILED C:\Users\Michael\Desktop\log4jassignment.s06005586\build.xml:112: Can't find resource ruleset/java/basic.xml 
```

我没有看到`java`里面的文件夹`ruleset`。因此，将文件夹和文件放在正确的位置，然后查看它是否有效

# javascript - 访问器：setter 不起作用

> ID：12194988
> 
> 赞同：4
> 
> 时间：2012-08-30T10:38:13.683
> 
> 标签：javascript

我正在使用 Javascript 访问器属性（我从零开始学习 javascript），试图为一个简单的对象创建 getter 和 setter，这里的代码：

```
var dummy = {
        name: 'empty',
        description: 'static description',

        get nameAccessor(){return 'name value is: ' + this.name;},
        set nameAccessor(value){ this.name = value;},

        get descAccessor(){return 'desccription value is: ' + this.description;},
};

console.log(dummy.nameAccessor);
console.log(dummy.nameAccessor('Mazinga'));
console.log(dummy.nameAccessor); 
```

但它会抛出一个错误：

> 未捕获的类型错误：对象# 的属性“nameAccessor”不是函数

当它执行setter代码时：

```
 console.log(dummy.nameAccessor('Mazinga')); 
```

这里出了什么问题？

**编辑**：

好的，这似乎不是javascript的一个众所周知的功能，但是我从 [Javascript中遵循了这个例子：权威指南](https://rads.stackoverflow.com/amzn/click/com/0596805527)

```
var o = { 
          data_prop: value,
          get accessor_prop() { /* function body here */ },
          set accessor_prop(value) { /* function body here */ }
    }; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T10:42:37.037

访问器不是作为对象属性的函数（“方法”），而是在[分配（设置）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/set)或[检索（获取）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get)该属性时调用的函数。采用

```
dummy.nameAccessor = 'Mazinga'; 
```

调用 setter 函数。

相反，`dummy.nameAccessor('Mazinga')`获取属性“nameAccessor”（生成名称字符串），然后尝试将其作为函数调用，这将失败。如果你的 getter 返回一个函数，它会起作用，但这不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:43:51.670

`dummy.nameAccessor`不是一个函数，它是一个字符串`name value is: empty`。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-30T10:44:18.687

您的方法语法不正确，请尝试：

```
var dummy = {

    name: 'empty',
    description: 'static description',

    getName : function(){return 'name value is: ' + this.name;},
    setName : function(value){ this.name = value;},
    getDesc : function(){return 'description value is: ' + this.description;}

}; 
```

# eclipse - 无法在 tomcat(7) 运行时更改 tomcat-users.xml 和 server.xml **within** eclipse(juno)

> ID：12194997
> 
> 赞同：1
> 
> 时间：2012-08-30T10:38:25.493
> 
> 标签：eclipse, tomcat7, realm

我今天遇到了一个问题，我希望有人可以为我回答/解释。我试图向 tomcat-users.xml 添加一个新角色和新用户，并向 server.xml 添加一个领域，以在我正在玩的一个小型 Web 应用程序中测试一些基本身份验证。我在基本 tomcat 目录中进行了更改，然后尝试使用新角色登录。似乎没有任何效果。我刚刚发现 Eclipse 在我创建服务器实例时创建了一个新的 tomcat-users.xml 和 server.xml，所以我想我只需在其中添加我的新用户（和领域），一切都会好起来的；但是，当我更改这些文件时，它不会应用于服务器。我重新启动了 eclipse，它将两个文件都更改为默认值。我在某处读到了这个可怕的解决方法，删除了 eclipse 中的 tomcat-reinstall tomcat，它将最新的 tomcat-users.xml 导入到 eclipse 中。我的问题是：有没有办法从eclipse改变tomcat用户？如果没有，除了删除服务器还有其他解决方案吗？

谢谢

检查出来![在此处输入图像描述](../Images/4b26c8a9c632ce1d4835c09bf964f119.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:02:21.327

您应该在 Servers 项目中编辑原始文件，而不是直接编辑已部署的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T12:15:00.710

复制到 tmp 部署目录的配置文件位于 Eclipse 工作区中： `workspace-name/Servers/TomcatServerName-config/`

# logging - 在 Eclipse RCP 项目中为多个插件创建方面

> ID：12194999
> 
> 赞同：0
> 
> 时间：2012-08-30T10:38:34.807
> 
> 标签：logging, aspectj, ajdt

我正在开发一个具有多个插件的 rcp 项目，并且我正在使用 AJDT aspectJ 在应用程序中进行日志记录。我创建了两个方面，一个用于信息记录，一个用于每个插件中的异常记录。Aspect 对于基本插件工作正常，但不适用于其他插件。

我对上述实现几乎没有疑问：

1.  这是为每个插件定义一个方面的正确方法还是我们可以为所有插件创建一个方面
2.  如果不同插件中的包名称相同，那么在为每个插件创建单独的方面时是否会出现问题。
3.  我试图为正常日志记录和异常日志记录创建一个方面，但对我不起作用。附加正常方面和异常方面的示例。
4.  有没有办法在不提供包名称的情况下定义一个方面，我认为当我在切入点中提到包名称时，它会产生问题。

如果每个插件都有一个方面，我会遇到以下错误：

```
Caused by: org.aspectj.lang.NoAspectBoundException: com_tsystems_rvs_client_gui_user_RvsUserAspect
at com.tsystems.rvs.client.gui.user.RvsUserAspect.aspectOf(RvsUserAspect.aj:1)
at com.tsystems.rvs.client.gui.user.RvsUserAspect.<clinit>(RvsUserAspect.aj:27) 
```

用于记录 info msg 的正常方面的代码

```
public aspect RvsFrameworkAspect {

public pointcut scope(): within(com.tsystems.rvs.client.gui.framework.*);

before() : scope(){
    Signature sig=thisJoinPointStaticPart.getSignature();
    String infoFormat="Entering ["+sig.getDeclaringType().getName()+"."+sig.getName();
    logTrace(infoFormat, thisJoinPointStaticPart, thisEnclosingJoinPointStaticPart);
}

after() : scope(){
    Signature sig=thisJoinPointStaticPart.getSignature();
    String infoFormat="Leaving ["+sig.getDeclaringType().getName()+"."+sig.getName()+"]";
    logTrace(infoFormat, thisJoinPointStaticPart, thisEnclosingJoinPointStaticPart);
}
protected synchronized void logTrace(String info, StaticPart location,
        StaticPart enclosing) {

        Signature signature = location.getSignature();

        String source = signature.getDeclaringTypeName() + ":" + 
            (enclosing.getSourceLocation().getLine());
       LoggerMode.getInstance().logInfo(" " + source + " - " + info);

}

} 
```

插件中的日志异常代码

```
public aspect RvsFrameworkExceptionAspect {

public pointcut scope(): within(com.tsystems.rvs..*);
private Map<Throwable, String> loggedThrowables = new WeakHashMap<Throwable, String>();

after() throwing(Throwable t): scope() {

    logThrowable(t, thisJoinPointStaticPart, 
            thisEnclosingJoinPointStaticPart);
    }

before (Throwable t): handler(Exception+) && args(t) && scope() {

    logThrowable(t, thisJoinPointStaticPart, 
            thisEnclosingJoinPointStaticPart);
    }
protected synchronized void logThrowable(Throwable t, StaticPart location,
        StaticPart enclosing) {

    if (!loggedThrowables.containsKey(t)) {
        loggedThrowables.put(t, null);

        Signature signature = location.getSignature();

        String source = signature.getDeclaringTypeName() + ":"
                + (enclosing.getSourceLocation().getLine());

            LoggerMode.getInstance().logError(" " + source + " - " + t.toString(), t);

    }
} 
```

}

请帮助我在我的实施中做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:05:02.270

可能您的切入点`RvsFrameworkExceptionAspect`只是建议您要排除的类。具体来说，

`within(com.tsystems.rvs..*)`

将匹配

`com.tsystems.rvs.client.gui.user.RvsUserAspect`,

即，您似乎在建议另一个方面。尝试更具体地了解您要拦截的内容。

* * *

**在评论中编辑**您的其他问题：

如果你的切面都有以“Aspect”结尾的类名，你可以试试这个：

`within(com.tsystems.rvs..*) && !within(*..*Aspect)`

否则，您可以排除单个方面类或只包含更少的非方面类，无论您的情况更简单。通常，在不了解您的完整代码库的情况下很难提供有用的提示，因此请理解我可能不会像您希望的那样准确地达到目标。;-)