# StackOverflow 问答 11067000-11067999

# android - Android 处理活动 To Finish() 还是 Not to Finish()？

> ID：11067000
> 
> 赞同：0
> 
> 时间：2012-06-16T21:00:35.163
> 
> 标签：android, android-activity

在我的游戏应用程序中，我有几个不同的活动，都可以通过按下主菜单活动中的按钮来访问。现在我只在您退出应用程序时完成（）主菜单活动。

但是我想知道当我返回主菜单时是否应该完成个别不同的活动？

它有那么大的不同吗？现在，由于我没有完成活动，它不会只是回到现有活动，还是每次我从菜单转到活动时都会创建一个新活动？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:05:31.870

使用返回键从活动返回完成该活动并在您再次使用意图调用它时创建新活动。

因此，如果您来自所有活动，使用返回键到主菜单活动，那么您只需要调用完成即可存在应用程序（如果主菜单活动是打开应用程序时的第一个活动）

# php - 计算网络点击次数 - 最好的方法？

> ID：11067007
> 
> 赞同：2
> 
> 时间：2012-06-16T21:01:21.593
> 
> 标签：php, count

我已经用 PHP 编写了一个程序来增加文本文件中的值，但有人告诉我，当多个用户同时使用同一个 PHP 脚本时，这可能会变坏。

有人知道如何解决这个问题或更好的方法吗？我所需要的只是计算一个按钮的点击次数并以某种方式保存它们并在另一个页面中显示它。

这是我的代码：

```
<?php

    $clicks = file_get_contents("clicks.txt");
    $clicks++;

        $fp = fopen("clicks.txt", "w+");
        fwrite($fp, $clicks);
        fclose($fp);

//give the count to the user
echo "result: $clicks";

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:06:49.500

它可能变坏的原因是当两件事试图同时写入文件时。您可以通过在写入文件之前锁定文件来避免这种情况。PHP 有[`flock`](http://php.net/manual/en/function.flock.php).

获得排他锁`LOCK_EX`将允许您写入文件，但没有其他人。因此，如果您这样做，则只有一个脚本实例可以随时写入。如果脚本无法获得锁定，则意味着其他内容正在写入文件，因此您可以再次尝试或抛出错误。

来自 PHP 文档的示例`flock`：

```
$fp = fopen("/tmp/lock.txt", "r+");

if (flock($fp, LOCK_EX)) {  // acquire an exclusive lock
    ftruncate($fp, 0);      // truncate file
    fwrite($fp, "Write something here\n");
    fflush($fp);            // flush output before releasing the lock
    flock($fp, LOCK_UN);    // release the lock
} else {
    echo "Couldn't get the lock!";
}

fclose($fp); 
```

对于任何现实世界的应用程序，您将使用数据库并为您想要监控的每次点击插入一行。您还可以存储有关每次点击的更多信息，例如时间、用户所在的页面以及您可能想要的任何其他信息。然后您可以查询数据库并获取所有这些统计信息。您将完全避免这个问题。

更新：阅读[此页面](http://www.tuxradar.com/practicalphp/8/11/0)以获取教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:07:33.480

使用数据库。例如，Mysql 可以为您的数据库事务提供 ACID 保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:21:08.867

在我看来，关于计算点击次数的最佳方法的问题的答案是使用免费的谷歌分析帐户。

如果您坚持自己做，则需要将每次点击的信息记录到数据库中，然后将这些数据转化为有趣的可视结果。

如果你不愿意做这两件事，那么你的有效率就会急剧下降，在这种情况下，你已经使用的方法已经是最好的方法了，因为你的范围很窄。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-16T21:04:01.623

如果您不介意刷新页面，那么只需发送一个带有隐藏字段的表单并在数据库中增加一个数字。

如果您不想刷新页面以保存单击，那么只需向服务器发出 AJAX 请求并再次执行相同的操作 - 如果您愿意，可以将其保存为数据库或文件。

# sed - 如何使用 sed/awk 删除具有多个模式计数的单词

> ID：11067008
> 
> 赞同：1
> 
> 时间：2012-06-16T21:01:37.660
> 
> 标签：sed, awk

我有一个字符串记录文件，其中一个字段 - 由“，”分隔 - 可以在其中包含一个或多个“-”。

目标是删除包含两个以上“-”的字段值。

我正在努力恢复我过去对 sed/awk 的了解，但没有取得太大进展

==========

```
info,whitepaper,Data-Centers,yes-the-6-top-problems-in-your-data-center-lane

info,whitepaper,Data-Centers,the-evolution-center

info,whitepaper,Data-Centers,the-evolution-of-lan-technology-lanner 
```

==========

**预期结果：**

```
info,whitepaper,Data-Centers

info,whitepaper,Data-Centers,the-evolution-center

info,whitepaper,Data-Centers 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:12:29.733

尝试

```
sed -r 's/(^|,)([^,-]+-){3,}[^,]+(,|$)/\3/g' 
```

或者如果你喜欢斜线

```
sed 's/\(^\|,\)\([^,-]\+-\)\{3,\}[^,]\+\(,\|$\)/\3/g' 
```

**解释：**

我正在使用最基本的`sed`命令：替换。语法是：`s/pattern/replacement/flags`.

这里`pattern`是`(^|,)([^,-]+-){3,}[^,]+(,|$)`，`replacement`是`\3`，`flags`是`g`。

该`g`标志意味着全局替换（所有匹配的部分都被替换，而不仅仅是第一个）。

在`pattern`：

*   括号`()`创建一个组。有点像数学。它们还允许稍后引用带有编号的组。
*   `^`并`$`表示字符串的开头和结尾。
*   `|`表示“或”，因此`(^|,)`表示“逗号或字符串的开头”。
*   方括号`[]`表示一个字符类，`^`里面表示否定。所以`[^,-]`意思是“除了逗号或连字符之外的任何东西”。并不是说通常连字符在字符类中具有特殊含义：`[a-z]`表示所有小写字母。但这里它只是一个连字符，因为它不在中间。
*   `+`在表达式之后表示“匹配它 1 次或多次”（如`*`表示匹配它 0 次或多次）。
*   `{N}`意思是“完全匹配” `N`。`{N,M}`是“从`N`到`M`次”。`{3,}`意思是“三次或更多”。`+`相当于`{1,}`.

所以就是这样。`replacement`只是`\3`。_ `()`在这种情况下，这是指第三组`(,|$)`。这将是替换后唯一剩下的东西。

PS该`-r`选项只会更改需要转义的字符：没有它，所有字符都将`()-{}|`被视为常规字符，除非您使用`\`. 相反，要将*文字* `(`与`-r`选项匹配，您需要对其进行转义。

[PPS](http://www.grymoire.com/Unix/Sed.html)这是`sed`. `man sed`也是你的朋友。如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:12:56.293

这可能对您有用：

```
sed 's/,\{,1\}[^,-]*\(-[^,]*\)\{3,\}//g file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:21:17.480

您可以尝试使用 perl 而不是 sed 或 awk：

```
perl -F, -lane 'print join ",", grep { !/-.*-.*-/ } @F' < file.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T21:23:55.900

```
sed 's/\(^\|,\)\([^,]*-\)\{3\}[^,]*\(,\|$\)//g' 
```

这应该适用于更多情况：

```
sed 's/,$/\n/g;s/\(^\|,\|\n\)\([^,\n]*-\)\{3\}[^,\n]*\(,\|\n\|$\)/\3/g;s/,$//;s/\n/,/g' 
```

# uitabbarcontroller - UITabBarDelegate 还是 UITabBarControllerDelegate？

> ID：11067013
> 
> 赞同：3
> 
> 时间：2012-06-16T21:02:20.330
> 
> 标签：uitabbarcontroller, uitabbar

每当用户触摸标签栏项目时，我都需要收到一条消息（即使它对应于当前显示的视图）。我不确定是否使用 UITabBarDelete 协议，该协议提供：

```
- (void)tabBar:didSelectItem: 
```

描述：

> 当用户选择标签栏项目时发送给委托人。

或者，从 UITabBarControllerDelegate：

```
- (void)tabBarController:didSelectViewController: 
```

描述：

> 告诉代理用户在选项卡栏中选择了一个项目。

似乎任何一个都可以使用。就我而言，我需要重新加载/重新初始化与真正的当前选项卡按钮关联的视图。

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:38:02.657

你可以使用任何一个。

在这种情况下： - (void)tabBar:didSelectItem: 您必须从 viewControllers 数组中访问相应的视图控制器。

而在这种情况下： - (void)tabBarController:didSelectViewController: 你会得到它作为一个参数。

# python - 使用 python 的 urllib2 urlopen 时缺少“内容长度”标头

> ID：11067015
> 
> 赞同：2
> 
> 时间：2012-06-16T21:02:53.060
> 
> 标签：python, urllib2

尝试在 python 中使用 urllib2 检查某些网页的“内容长度”标头时，标头丢失。例如，来自 google.com 的响应缺少此标头。知道为什么吗？

例子：

```
r = urllib2.urlopen('http://www.google.com')
i = r.info()
print i.keys() 
```

给出：

```
['x-xss-protection', 'set-cookie', 'expires', 'server', 'connection', 'cache-control', 'date', 'p3p', 'content-type', 'x-frame-options'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:41:50.663

您可以[在此处](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)看到 http 响应可以包含`Content-Length`或`Transfer-Encoding: chunked`。

但是，当`Transfer-Encoding: chunked`在标头中使用时，在标头之后，您将得到一个十六进制字符串，如果将其转换为十进制，将为您提供下一个块的长度。在最后一个块之后，你会得到一个`0`这个值，这意味着你已经到达了文件的末尾。

您可以使用正则表达式来获取这个十六进制值（虽然不是必须的）

```
read = #string containing a line or a part of the http response
hexPat = re.compile(r'([0-9A-F]+)\r\n', re.I)
match = re.search(hexPat, read)
chunkLen = int(match.group(1), 16) #converts hexadecimal to decimal 
```

或者您可以只读取第一个十六进制值，获取第一个块的长度并接收该块，然后获取下一个块的长度，依此类推，直到找到`0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:18:02.027

HEAD 响应的 Content-Length 应该，但并不总是包含 GET 响应的 Content-Length 值：

堆栈溢出会：

```
> telnet stackoverflow.com 80
HEAD / HTTP/1.1
Host: stackoverflow.com

HTTP/1.1 200 OK
Cache-Control: public, max-age=60
Content-Length: 362245                           <--------
Content-Type: text/html; charset=utf-8
Expires: Mon, 04 Oct 2010 11:51:49 GMT
Last-Modified: Mon, 04 Oct 2010 11:50:49 GMT
Vary: *
Date: Mon, 04 Oct 2010 11:50:49 GMT 
```

谷歌没有：

```
> telnet www.google.com 80
HEAD / HTTP/1.1
Host: www.google.ie

HTTP/1.1 200 OK
Date: Mon, 04 Oct 2010 11:55:36 GMT
Expires: -1
Cache-Control: private, max-age=0
Content-Type: text/html; charset=ISO-8859-1
Server: gws
X-XSS-Protection: 1; mode=block
Transfer-Encoding: chunked 
```

# python - 根据列名对熊猫数据框中的列进行排序

> ID：11067027
> 
> 赞同：415
> 
> 时间：2012-06-16T21:05:01.030
> 
> 标签：python, pandas, dataframe

我有`dataframe`超过 200 列。问题是它们生成的顺序是

```
['Q1.3','Q6.1','Q1.2','Q1.1',......] 
```

我需要按如下方式对列进行排序：

```
['Q1.1','Q1.2','Q1.3',.....'Q6.1',......] 
```

我有什么方法可以在 Python 中做到这一点吗？

* * *

## 回答 #1

> 赞同：532
> 
> 时间：2012-06-16T21:12:21.780

```
df = df.reindex(sorted(df.columns), axis=1) 
```

这假定对列名进行排序将给出您想要的顺序。如果您的列名不会按字典顺序排序（例如，如果您希望列 Q10.3 出现在 Q9.1 之后），您需要进行不同的排序，但这与 pandas 无关。

* * *

## 回答 #2

> 赞同：405
> 
> 时间：2012-07-08T18:56:47.510

你还可以做的更简洁：

```
df.sort_index(axis=1) 
```

* * *

确保将结果分配回去：

```
df = df.sort_index(axis=1) 
```

或者，就地执行：

```
df.sort_index(axis=1, inplace=True) 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2014-06-24T21:22:45.420

你可以这样做：

```
df[排序（df.columns）]

```

* * *

编辑：较短的是

```
df[sorted(df)] 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-10-08T02:22:08.443

[Tweet 的答案](https://stackoverflow.com/a/11067079/841830)可以传递给上面的 BrenBarn 的答案

```
data.reindex_axis(sorted(data.columns, key=lambda x: float(x[1:])), axis=1) 
```

因此，对于您的示例，请说：

```
vals = randint(low=16, high=80, size=25).reshape(5,5)
cols = ['Q1.3', 'Q6.1', 'Q1.2', 'Q9.1', 'Q10.2']
data = DataFrame(vals, columns = cols) 
```

你得到：

```
data

    Q1.3    Q6.1    Q1.2    Q9.1    Q10.2
0   73      29      63      51      72
1   61      29      32      68      57
2   36      49      76      18      37
3   63      61      51      30      31
4   36      66      71      24      77 
```

然后做：

```
data.reindex_axis(sorted(data.columns, key=lambda x: float(x[1:])), axis=1) 
```

导致：

```
data

     Q1.2    Q1.3    Q6.1    Q9.1    Q10.2
0    2       0       1       3       4
1    7       5       6       8       9
2    2       0       1       3       4
3    2       0       1       3       4
4    2       0       1       3       4 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-03-11T05:54:35.027

对于几列，您可以将列按您想要的顺序排列：

```
#['A', 'B', 'C'] <-this is your columns order
df = df[['C', 'B', 'A']] 
```

此示例显示排序和切片列：

```
d = {'col1':[1, 2, 3], 'col2':[4, 5, 6], 'col3':[7, 8, 9], 'col4':[17, 18, 19]}
df = pandas.DataFrame(d) 
```

你得到：

```
col1  col2  col3  col4
 1     4     7    17
 2     5     8    18
 3     6     9    19 
```

然后做：

```
df = df[['col3', 'col2', 'col1']] 
```

导致：

```
col3  col2  col1
7     4     1
8     5     2
9     6     3 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2015-11-05T21:48:39.667

如果你需要一个任意序列而不是排序序列，你可以这样做：

```
sequence = ['Q1.1','Q1.2','Q1.3',.....'Q6.1',......]
your_dataframe = your_dataframe.reindex(columns=sequence) 
```

我在 2.7.10 中对此进行了测试，它对我有用。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2014-12-08T15:33:31.697

不要忘记在 Wes 的答案中添加“inplace=True”或将结果设置为新的 DataFrame。

```
df.sort_index(axis=1, inplace=True) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-01-29T12:37:26.447

最快的方法是：

```
df.sort_index(axis=1) 
```

请注意，这会创建一个新实例。因此，您需要将结果存储在一个新变量中：

```
sortedDf=df.sort_index(axis=1) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-16T21:14:20.077

该`sort`方法和`sorted`函数允许您提供自定义函数来提取用于比较的键：

```
>>> ls = ['Q1.3', 'Q6.1', 'Q1.2']
>>> sorted(ls, key=lambda x: float(x[1:]))
['Q1.2', 'Q1.3', 'Q6.1'] 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-24T09:43:43.147

一个用例是您已使用某些前缀命名（某些）列，并且您希望使用这些前缀以某种特定顺序（非字母顺序）对列进行排序。

例如，您可能会以 开始所有功能`Ft_`，以 等开始标签`Lbl_`，并且您首先需要所有不带前缀的列，然后是所有功能，然后是标签。您可以使用以下函数来执行此操作（我会注意到`sum`用于减少列表的可能的效率问题，但这不是问题，除非您有很多列，而我没有）：

```
def sortedcols(df, groups = ['Ft_', 'Lbl_'] ):
    return df[ sum([list(filter(re.compile(r).search, list(df.columns).copy())) for r in (lambda l: ['^(?!(%s))' % '|'.join(l)] + ['^%s' % i  for i in l ] )(groups)   ], [])  ] 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-06-20T19:58:40.727

```
print df.sort_index(by='Frequency',ascending=False) 
```

其中 by 是列的名称，如果要根据列对数据集进行排序

# cygwin - configure.ac 在 cygwin 下找不到依赖项

> ID：11067037
> 
> 赞同：0
> 
> 时间：2012-06-16T21:07:03.700
> 
> 标签：cygwin, autoconf

我在 cygwin 上使用了 autoconf/automake 配置脚本，但我遇到的问题是它无法找到我的依赖项。

例如，在我的 configure.ac 中：

AC_CHECK_LIB(mp3lame,lame_init,,AC_MSG_ERROR(找不到所需的库 LAME。)) AC_CHECK_HEADER(lame/lame.h,,AC_MSG_ERROR(找不到 LAME 的头文件。))

找跛脚。Lame 已安装，如果我安装了，我`locate lame.h`会在`/usr/local/include/lame/lame.h`. 现在，如果我设置 LIBRARY_PATH 和 INCLUDE_PATH

导出 INCLUDE_PATH=/usr/local/include/ 导出 LIBRARY_PATH=/usr/local/lib/

它按预期工作。我通过下载并运行安装了 lame：

```
./configure
make
make install 
```

所以我认为它应该以一个“足够标准”的路径结束，以便我的配置脚本找到它。以类似的方式，我正在使用以下方法检查 json 解析器 jansson：

```
PKG_CHECK_MODULES(JANSSON,jansson) 
```

除非我这样做，否则它不会找到它：

导出 PKG_CONFIG_PATH=/usr/local/lib/pkgconfig/

这是 cygwin 的问题（我不这么认为）还是我的 configure.ac 脚本有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:51:19.577

这不是 cygwin 的问题，也不是您的 configure.ac 的问题。它是它的“功能”，`PKG_CHECK_MODULES`也是我不建议使用它的原因之一。如果使用从 configure.ac 生成的配置脚本`PKG_CHECK_MODULES`，则需要用户设置`PKG_CONFIG_PATH`. 最好的方法是使用`AC_CHECK_LIB`而不是`PKG_CHECK_MODULES`. 你是绝对正确的，它`./configure && make && make install`给你一个应该工作的标准安装。问题在于`PKG_CHECK_MODULES`标准安装不能很好地发挥作用。

# ios - 如果文本为空，UITableViewCell detailTextLabel 不支持 KVO？苹果漏洞？

> ID：11067053
> 
> 赞同：2
> 
> 时间：2012-06-16T21:09:50.963
> 
> 标签：ios, uitableview, uitextfield, key-value-observing, iboutlet

我在配置了正确细节的表格视图单元格时遇到了奇怪的行为。单元格是一个静态单元格，它是在情节提要中创建的表格视图控制器的一部分。在我的视图控制器中，我创建了一个`IBOutlet UITextField *detail`连接到单元格细节的。到目前为止，一切都很好。视图被配置为当单元格的附件被击中时，另一个控制器被推送到堆栈上，以便用户可以输入要显示的文本。返回时，detail.text 被设置为用户的字符串。我依靠 IBOutlet 和情节提要中的细节之间的 KVO 进行自动更新。

问题是如果`detail.text`在进入视图时设置为@""（空字符串，而不是 nil），则无论用户更改文本多少次，单元格的详细信息都*不会更新。*我可以通过调试器看到细节反映了用户的更改，但单元格没有。奇怪的是，如果我离开视图并重新输入，以便将 detail.text 初始化为一些非空字符串，一切都很好。如果 detail.text 的初始值不是空字符串，则不会发生此问题。用户可以随心所欲地更改文本，返回时单元格会反映更改。

苹果错误，还是我错过了什么？

问候，

- 约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T17:18:21.580

我发现将文本设置为 @" " （带空格）而不是 @"" 可以解决问题。下次您将使用非空字符串更新标签时，它将按预期更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:23:01.140

当必须重新绘制单元格时，只需重新加载即可。

```
[tableView reloadData]; 
```

# c - libClang 上的“当存在 '-fsyntax-only' 时未使用链接器输入”

> ID：11067056
> 
> 赞同：2
> 
> 时间：2012-06-16T21:10:09.967
> 
> 标签：c, compiler-errors, clang, libclang

有没有人在尝试使用 libclang 在代码上运行由 clang 生成的可执行文件时遇到过这种问题（如果我也使用 gcc 编译也会出现这种情况）？使用少量打印我注意到它发生在以下函数调用中：`fprintf(stderr, "%s\n", clang_getCString(String));`在这种情况下，有来自 Cstring 的输出。我正在使用 Clang -lclang 进行编译

谢谢。

# ruby-on-rails - Rails 3使用嵌套资源创建方法？

> ID：11067058
> 
> 赞同：0
> 
> 时间：2012-06-16T21:10:44.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested, has-many, form-for

如何使用 rails 3 功能清理它？我有一个属于一个组和一个用户的帖子。组和用户 has_many 帖子。我正在使用嵌套资源

```
resources :groups do
    resources :posts
end

<%= form_for @post, :url => group_posts_path(params[:group_id]) do |f| %>
....
<% end %>

 def create
   @group = Group.find(1)
   @post = @group.posts.build(params[:post])
   @post.user_id = current_user.id

   respond_to do |format|
      if @post.save
      .....
      end
   end
 end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:41:36.637

`accepts_nested_attributes_for`在您的模型中使用该方法。

如果您不熟悉嵌套表单，请查看[此 railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)和[第二部分](http://railscasts.com/episodes/197-nested-model-form-part-2)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:15:10.183

鉴于：

```
 <%= form_for [@group, @group.posts.build] do |f| %>
    ...
  <% end %> 
```

在控制器中：

```
 class PostsController < ApplicationController
    before_filter :find_group
    ...
    def create
      @post = @group.posts.build(params[:post])
      current_user.posts << @post
    end

    protected
    def find_group
      @group = Group.find(params[:group_id])
    end
  end 
```

# css - IE8 去除 Asp:Gridview 标题行的背景色

> ID：11067059
> 
> 赞同：0
> 
> 时间：2012-06-16T21:10:51.453
> 
> 标签：css, internet-explorer, cross-browser

我正在使用 Asp.net 4.0 GridView 控件来显示数据库中的数据。我已将内置主题应用于 GridView。

```
 <asp:GridView ID="gv" runat="server" CellPadding="4" EmptyDataText="No records found."
    ForeColor="#333333" OnRowCommand="gv_RowCommand" Width="99%" OnPageIndexChanging="gv_PageIndexChanged"
    PageSize="50" AllowPaging="True" GridLines="None" AutoGenerateColumns="true">
    <AlternatingRowStyle BackColor="White" />
    <EditRowStyle BackColor="#7C6F57" />
    <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
    <HeaderStyle CssClass="GridHeader" BackColor="#1C5E55" Font-Bold="True" ForeColor="White" HorizontalAlign="Left" />
    <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#E3EAEB" />
    <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#F8FAFA" />
    <SortedAscendingHeaderStyle BackColor="#246B61" />
    <SortedDescendingCellStyle BackColor="#D4DFE1" />
    <SortedDescendingHeaderStyle BackColor="#15524A" /></asp:GridView> 
```

我尝试在我的母版页中强制设置 CSS

```
 .GridHeader { background-color:#1C5E55 !important;} 
```

但我仍然缺少背景颜色。

当页面加载 js/css 内容时，我可以看到背景颜色应用于网格（不到 1 秒）

注意：我已经尝试过清除 IE、ctrl + F5、shift + reload 等的缓存。

这是我的问题的示例页面。

[http://vd2.weenggs.com/Items.aspx](http://vd2.weenggs.com/Items.aspx)

邮箱：test@test.com

通过：测试

* * *

```
.PACP-box:before, .PACP-box:after, .PACP-box-body:after, .PACP-box-body:before
{
background-repeat: no-repeat;
bottom: 0;
content: " ";
line-height: 0;
position: absolute;
top: 0;
} 
```

我发现上面的 CSS 块会导致样式渲染/覆盖问题。我无法删除此块，因为它会导致布局中断。

任何人都可以拥有上述块的备用 CSS。? ​</p>

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:34:53.697

我`#1C5E55`在标题中看到。我没有看到`GridHeader`在 HTML 中定义的任何类。`BackColor`中定义的`HeaderStyle`是编码 throw`tr`的样式属性。正如您所提到的，您的颜色被 ecmascript 代码覆盖。您可以通过禁用 ecmascript 轻松检查这一点。然后你就会知道问题出在 CSS 还是脚本上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T11:39:12.437

给 BackColor="你想要的颜色" 它适用于所有浏览器。但你不能给标题渐变

# php - Soapclient 响应为“null”，但 xml 响应可以使用 __getLastResponse

> ID：11067062
> 
> 赞同：2
> 
> 时间：2012-06-16T21:11:18.767
> 
> 标签：php, wsdl, soap-client

我正在寻求有关 php soapclient 调用的帮助：

呼叫是远程面板，我想提取日志数据。通过 WSDL 发布了各种服务，我可以毫无问题地使用其中的几个。这是列表：

```
array(12) { 
[0]=> string(77) "GetGPTimerChannelsResponse GetGPTimerChannels(GetGPTimerChannels     $parameters)" 
[1]=> string(74) "GetGPTimerChannelResponse GetGPTimerChannel(GetGPTimerChannel $parameters)" 
[2]=> string(74) "SetGPTimerChannelResponse SetGPTimerChannel(SetGPTimerChannel $parameters)" 
[3]=> string(47) "GetSlaveResponse GetSlave(GetSlave $parameters)" 
[4]=> string(71) "GetLogDataInlineResponse GetLogDataInline(GetLogDataInline $parameters)" 
[5]=> string(71) "GetLogItemInlineResponse GetLogItemInline(GetLogItemInline $parameters)" 
[6]=> string(59) "GetAlarmListResponse GetAlarmList(GetAlarmList $parameters)" 
[7]=> string(50) "GetSyslogResponse GetSyslog(GetSyslog $parameters)" 
[8]=> string(47) "SetSlaveResponse SetSlave(SetSlave $parameters)" 
[9]=> string(53) "GetVersionResponse GetVersion(GetVersion $parameters)" 
[10]=> string(53) "GetTDBInfoResponse GetTDBInfo(GetTDBInfo $parameters)" 
[11]=> string(53) "GetLogItemResponse GetLogItem(GetLogItem $parameters)" } 
```

我正在尝试使用需要四个参数的 GetLogDataInline 服务 - 这些我作为数组传递，并且在进行连接时似乎一切正常（请求/响应大约需要 30 秒来处理）。

当我查看结果的 var_dump / print_r 时，它返回 NULL，而当我调用 __getLastResponse 时，我需要填充本地数据库的所有数据都在那里。

下面是soapclient调用的代码：

```
$client = new soapclient ("http://192.168.1.126/cgi-bin/cgi.cgi?WSDL", 
array("trace" => 1,
"exceptions" => true,
"cache_wsdl" => WSDL_CACHE_NONE,
"features" => SOAP_SINGLE_ELEMENT_ARRAYS
));
$params = array (
        "ResponseType" => "Xml",
        "Step" => 15,
        "Start" => "2012-06-14T12:00:00+01:00",
        "End" => "2012-06-14T23:59:45+01:00"
);  
$result = $client -> GetLogDataInline ($params); 
```

var_dump / __getLastResponse 的摘录是：

```
var_dump($client)
object(SoapClient)#1 (4) { ["trace"]=> int(1) ["_features"]=> int(1) ["_soap_version"]=>  int(1) ["sdl"]=> resource(4) of type (Unknown) }

var_dump($result)
NULL

__getLastResponse

<?xml version="1.0" encoding="UTF-8" ?> 
<soap:Envelope  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> 
<soap:Body> <GetLogDataResponse xmlns="http://url/RDMPlantTDB/2009/03/13/">  
<GetLogDataResult> 
<Step>15</Step> 
<Start>2012-06-14T12:00:00+01:00</Start> 
<End>2012-06-14T23:59:45+01:00</End> 
<LogData>
<![CDATA[<?xml version="1.0" encoding="UTF-8" ?> 
<Data> 
<Fields> <Field>External Temperature</Field> <Field>Workshop Lux Level</Field> <Field>Electricity Pulse 100wh</Field> <Field>Workshop PIR Active</Field> <Field>Boiler Flow Temp</Field> <Field>Outside Lux</Field> <Field>Workshop_Light_Override_Hours</Field> <Field>Water Consumption (Litres)</Field> <Field>Electricity kWh Consumption</Field> <Field>Water Consumption M3</Field> <Field>Gas kWh Consumption</Field> <Field>Outside Lighting</Field> <Field>Heating Effective Setpoint</Field> <Field>Router Reset</Field> <Field>Workshop Lighting State</Field> <Field>Heating Run Hours</Field> <Field>Heating On</Field> <Field>Receptin Percent RH</Field> <Field>Reception Temp</Field> <Field>Reception RH</Field> <Field>Reception Temp</Field> </Fields> 
<Entries> <Entry> <Time>2012-06-14T12:00:00+01:00</Time> <Values> <Value>-85.6</Value> <Value>2.1</Value> <Value>-1.0</Value> <Value>Off</Value> <Value>-91.5</Value> <Value>13.8</Value> <Value>0.0</Value> <Value>-1.0</Value> <Value>0.0</Value> <Value>0.0</Value> <Value>-0.1</Value> <Value>Off</Value> <Value>21.0</Value> <Value>Off</Value> <Value>Off</Value> <Value>0.0</Value> <Value>Off</Value> <Value>53.0</Value> <Value>22.0</Value> <Value>53.0</Value> <Value>22.0</Value> </Values> </Entry> <Entry> <Time>2012-06-14T12:00:15+01:00</Time> <Values> <Value>-85.4</Value> <Value>2.1</Value> <Value>-1.0</Value> <Value>Off</Value> <Value>-91.8</Value> <Value>13.8</Value> <Value>0.0</Value> <Value>-1.0</Value> <Value>0.0</Value> <Value>0.0</Value> <Value>-0.1</Value> <Value>Off</Value> <Value>21.0</Value> <Value>Off</Value> <Value>Off</Value> <Value>0.0</Value> <Value>Off</Value> <Value>53.0</Value> <Value>22.0</Value> <Value>53.0</Value> <Value>22.0</Value> </Values> </Entry> <Entry> <Time>2012-06-14T12:00:30+01:00</Time> <Values> <Value>-85.4</Value> <Value>2.1</Value> <Value>-1.0</Value> <Value>Off</Value> <Value>-91.8</Value> <Value>13.8</Value> <Value>0.0</Value> <Value>-1.0</Value> <Value>0.0</Value> <Value>0.0</Value> <Value>-0.1</Value> <Value>Off</Value> <Value>21.0</Value> <Value>Off</Value> <Value>Off</Value> <Value>0.0</Value> <Value>Off</Value> <Value>53.0</Value> <Value>22.0</Value> <Value>53.0</Value> <Value>22.0</Value> </Values> </Entry> <Entry> <Time>2012-06-14T12:00:45+01:00</Time> <Values> <Value>-85.4</Value> <Value>2.1</Value> <Value>-1.0</Value> <Value>Off</Value> <Value>-91.5</Value> <Value>13.7</Value> <Value>0.0</Value> <Value>-1.0</Value> <Value>0.0</Value> <Value>0.0</Value> <Value>-0.1</Value> <Value>Off</Value> <Value>21.0</Value> <Value>Off</Value> <Value>Off</Value> <Value>0.0</Value> <Value>Off</Value> <Value>54.0</Value> <Value>22.0</Value> <Value>54.0</Value> <Value>22.0</Value> </Values> </Entry> <Entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:22:12.890

不知道为什么你会得到 NULL 但我总是使用下面的方法让 SOAP 客户端处理错误（如果有的话）。

```
// Calling soap
try{

    // Creating soap server object
    $client     =   new SoapClient("http://192.168.1.126/cgi-bin/cgi.cgi?WSDL");

    // Creating parameters
    $params = array (
        "ResponseType" => "Xml",
        "Step" => 15,
        "Start" => "2012-06-14T12:00:00+01:00",
        "End" => "2012-06-14T23:59:45+01:00"
    );

    // Calling createUser method
    $result     =   $client->__soapCall('METHOD_NAME',$params);

    // Check for a fault
    if (is_soap_fault($client)) {       
        echo '<h2>Fault</h2><pre>';
        print_r($result);
        echo '</pre>';      
    }else{
        echo "Result: <BR><pre>";
        print_r($result);
        echo '</pre>';
    }

}catch(SoapFault $fault){
    $error      =   "SOAP Fault: (faultcode: {$fault->faultcode}\n" ."faultstring: {$fault->faultstring})"; 
    echo $error;
}catch(Exception $exception){
    $error      =   $exception; 
    echo "<BR>".$error;
} 
```

在上面的示例中，您必须将 METHOD_NAME 替换为肥皂服务器中定义的实际方法以获取参数并返回结果。但我怀疑第一个参数“ResponseType”是处理请求的方法所期望的实际第一个参数吗？

您可以尝试运行上面的代码，看看会发生什么错误

我假设在服务器上启用了 SOAP 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:49:12.063

PHP soapClient 不太支持 SOAP 中的相对名称空间，这通常是导致此行为的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T15:48:54.580

如果您的 Web 服务启用了访问权限，则 | 新的 SoapClient - 第一个问题？使用公共 IP public 或 DNS | $result = $client -> 方法($params); - 第二个问题？使用私有IP，取决于DNS的配置

```
$client->__setLocation('http:// youDNSorIPpublic /cgi-bin/cgi.cgi');
var_dump($client); 
```

//$old_location = $client->__setLocation(); // 禁用定位 //echo $old_location;

```
$result = $client -> Method($params); //new request 
```

# json - 谷歌地图 v3 上的不同标记

> ID：11067065
> 
> 赞同：1
> 
> 时间：2012-06-16T21:11:21.313
> 
> 标签：json, google-maps, google-maps-markers

如何向谷歌地图 v3 添加不同的标记？

这是我的标记的示例：

```
var latlng = new google.maps.LatLng(lat,lng); 
var image = "../img/hotel_icon.png";
var locationDescription = this.locationDescription;
var marker = new google.maps.Marker({
  map: map,
  position: latlng,
  title:'pk:'+name,
  icon: image
});

bounds.extend(latlng);
setMarkes(map, marker, name, locationDescription);

});//close each
map.fitBounds(bounds);
});//close getjson

}//close initialize
function setMarkes(map, marker, name, locationDescription){
  google.maps.event.addListener(marker, 'mouseover', function() {
      infowindow.close();
      infowindow.setContent('<h3>'+name+'</h3><em>'+locationDescription+'</em>');
      infowindow.open(map, marker);
  });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:47:42.293

这是一个可能有帮助的例子： [http ://www.geocodezip.com/v3_markers_normal_colored_infowindows.html](http://www.geocodezip.com/v3_markers_normal_colored_infowindows.html)

**代码片段：**

```
function initialize() {
  var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(-33.9, 151.2),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
  });
  setMarkers(map, beaches);
}
var icons = new Array();
icons["red"] = new google.maps.MarkerImage("http://www.geocodezip.com/mapIcons/marker_red.png",
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 9,34.
  new google.maps.Point(9, 34));

function getMarkerImage(iconColor) {
  if ((typeof(iconColor) == "undefined") || (iconColor == null)) {
    iconColor = "red";
  }
  if (!icons[iconColor]) {
    icons[iconColor] = new google.maps.MarkerImage("http://www.geocodezip.com/mapIcons/marker_" + iconColor + ".png",
      // This marker is 20 pixels wide by 34 pixels tall.
      new google.maps.Size(20, 34),
      // The origin for this image is 0,0.
      new google.maps.Point(0, 0),
      // The anchor for this image is at 6,20.
      new google.maps.Point(9, 34));
  }
  return icons[iconColor];

}
// Marker sizes are expressed as a Size of X,Y
// where the origin of the image (0,0) is located
// in the top left of the image.

// Origins, anchor positions and coordinates of the marker
// increase in the X direction to the right and in
// the Y direction down.

var iconImage = new google.maps.MarkerImage('http://www.geocodezip.com/mapIcons/marker_red.png',
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 9,34.
  new google.maps.Point(9, 34));
var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
  // The shadow image is larger in the horizontal dimension
  // while the position and offset are the same as for the main image.
  new google.maps.Size(37, 34),
  new google.maps.Point(0, 0),
  new google.maps.Point(9, 34));
// Shapes define the clickable region of the icon.
// The type defines an HTML &lt;area&gt; element 'poly' which
// traces out a polygon as a series of X,Y points. The final
// coordinate closes the poly by connecting to the first
// coordinate.
var iconShape = {
  coord: [9, 0, 6, 1, 4, 2, 2, 4, 0, 8, 0, 12, 1, 14, 2, 16, 5, 19, 7, 23, 8, 26, 9, 30, 9, 34, 11, 34, 11, 30, 12, 26, 13, 24, 14, 21, 16, 18, 18, 16, 20, 12, 20, 8, 18, 4, 16, 2, 15, 1, 13, 0],
  type: 'poly'
};
var infowindow = new google.maps.InfoWindow({
  size: new google.maps.Size(150, 50)
});

function createMarker(map, latlng, label, html, color) {
  var contentString = '<b>' + label + '</b><br>' + html;
  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    shadow: iconShadow,
    icon: getMarkerImage(color),
    shape: iconShape,
    title: label,
    zIndex: Math.round(latlng.lat() * -100000) << 5
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
  });
}

/**
 * Data for the markers consisting of a name, a LatLng and a zIndex for
 * the order in which these markers should display on top of each
 * other.
 */
var beaches = [
  ['Bondi Beach', -33.890542, 151.274856, "red"],
  ['Coogee Beach', -33.923036, 151.259052, "blue"],
  ['Cronulla Beach', -34.028249, 151.157507, "green"],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, "yellow"],
  ['Maroubra Beach', -33.950198, 151.259302, "orange"]
];

function setMarkers(map, locations) {
  // Add markers to the map

  for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var marker = createMarker(map, myLatLng, beach[0], beach[0], beach[3]);
  }
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body {
  height: 100%;
  height: 100%;
  padding: 0;
  margin: 0
}

#map_canvas {
  width: 100%;
  height: 100%;
}
```

```
<div id="map_canvas"></div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:58:22.187

我已经解决了一个问题很简单，只要我放了这个

```
var currentplace = $("#currentplace").text();
  if(name == currentplace ){image = "../img/hotel_icon.png";}else{ image = "../img/home_icon.png";} 
```

# objective-c - Mac OS X：对视网膜显示进行运行时检查的最佳方法？

> ID：11067066
> 
> 赞同：19
> 
> 时间：2012-06-16T21:11:23.000
> 
> 标签：objective-c, macos, cocoa, osx-lion, retina-display

给定一个在 Mac OS X 10.7 及更高版本上运行的 Cocoa 应用程序：

在运行时检查您的应用程序当前是否在连接了至少一个视网膜显示器的 Mac 上运行的最佳方法是什么？

如果检查这类事情真的是错误的，我完全欢迎对原因进行合理的解释（如果这些答案很好，我会投票赞成）。

但我仍然想知道:)。

您似乎可以专门针对新的 Mac Book Pro“Retina”硬件（目前唯一具有视网膜显示屏的 Mac）进行检查，但我真的更喜欢更通用/通用/面向未来的检查方式比这个。

理想情况下，我想知道如何检测视网膜显示器，而不是目前恰好配备视网膜显示器的特定 Mac 型号。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-16T21:25:22.277

如果您确实需要这样做，请查看`-[NSScreen backingScaleFactor]`. 但是，这似乎是错误的，至少在不知道更多关于你为什么想知道的情况下。

虽然目前只有一台配备 Retina 显示器的 Mac，但最终可能会有支持 Retina 的独立显示器（并且可以在运行时连接/分离），并且您也许能够在 1x 模式下配置内置 Retina 显示器。因此，“是否连接了 Retina 显示器”这个问题的答案可以随时改变。

相反，您可能想知道您的内容是否应该使用`-convert*ToBacking:`或 方法以给定的比例绘制`-[NSWindow backingScaleFactor]`。如需更多详细信息，请观看 WWDC 2012 会议视频“OS X 上高分辨率的高级技巧和窍门”（发布后，希望在接下来的几周内发布）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T20:43:23.007

我刚刚遇到一个实例，我需要检测是否有任何屏幕是高分辨率的，这行得通

```
float displayScale = 1;
    if ([[NSScreen mainScreen] respondsToSelector:@selector(backingScaleFactor)]) {
        NSArray *screens = [NSScreen screens];
        NSUInteger screenCount = screens.count
        for (int i = 0; i < screenCount; i++) {
            float s = [screens[i] backingScaleFactor];
            if (s > displayScale)
                displayScale = s;
        }
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-16T21:21:16.277

好吧，在 iOS 上，您使用该[`UIScreen.scale`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIScreen_Class/Reference/UIScreen.html#//apple_ref/doc/uid/TP40006903-CH3-SW16)属性。如果它返回`2.0`，那么您使用的是具有高分辨率显示屏的设备。否则，您使用的是低分辨率设备。

所以我想在 Mac OS 上你可以使用[`-[NSScreen backingScaleFactor]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScreen_Class/Reference/Reference.html#//apple_ref/doc/uid/20000333-DontLinkElementID_2)或[`-[NSWindow backingScaleFactor]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-SW182).

# c - How do I use compiler intrinsic __fmul_?

> ID：11067068
> 
> 赞同：1
> 
> 时间：2012-06-16T21:11:32.337
> 
> 标签：c, compiler-construction, cuda, intrinsics

I am writing a massively parallel GPU application using CUDA. I have been optimizing it by hand. I received a 20% performance increase with `__fdividef_(x, y)`, and according to *The Cuda C Programming Guide (section C.2.1)*, using similar functions for multiplication and adding is also beneficial.

The function is stated as this: `__fmul_[rn,rz,ru,rd](x,y)`.

`__fdividef(x,y)` was not stated with the arguments in brackets. I was wondering, what are those brackets?

If I run the simple code:

```
int t = __fmul_(5,4); 
```

I get a compiler error about how `__fmul_` is undefined. I have the CUDA runtime included, so I don't think it is a setup thing; rather it is something to do with those square brackets. How do I correctly use this function? Thank you.

EDIT: I should clarify, the compiler is the CUDA-compiler NVCC.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:18:18.713

You should specify rounding mode with `ru` (rounding up) or `rd` (rounding down). There is no function `__fmul_` but available function signatures are `__fmul_rd` or `__fmul_ru`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T14:24:09.663

[CUDA Programming Guide](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#intrinsic-functions) explains the suffixes:

*   `_rd`: round down.
*   `_rn`: round to nearest even.
*   `_ru`: round up.
*   `_rz`: round towards zero.

See [CUDA's Single Precision Intrinsics documentation](http://developer.download.nvidia.com/compute/cuda/4_1/rel/toolkit/docs/online/group__CUDA__MATH__INTRINSIC__SINGLE.html) for details on these functions.

# java - Java Socket Connection 泛滥网络或导致高 ping

> ID：11067070
> 
> 赞同：1
> 
> 时间：2012-06-16T21:11:51.340
> 
> 标签：java, android, sockets, connection, wireless

我的 Java 套接字代码有一点问题。我正在编写一个 android 客户端应用程序，它通过直接（！）无线连接将数据发送到我的 pc 上的 java 多线程套接字服务器。它工作正常，但我想为移动应用程序改进它，因为它现在非常耗电。当我在我的代码中删除两个特殊行时，我的移动设备（htc one x）的 cpu 使用率完全没问题，但是我的连接似乎有很高的 ping 率或类似的东西......

这是我接收客户端数据的服务器代码片段：

```
while(true)
  {
    try {
                   ....
            Object obj = in.readObject();
            if(obj != null) {
                Class clazz = obj.getClass();
                String className = clazz.getName();
                if(className.equals("java.lang.String")) {
                    String cmd = (String)obj;
                    if(cmd.equals("dc")) {
                        System.out.println("Client "+id+" disconnected!");
                        Server.connectedClients[id-1] = false;
                        break;
                    }
                    if(cmd.substring(0,1).equals("!")) {
                        robot.keyRelease(PlayerEnum.getKey(cmd,id));
                    }
                    else {
                        robot.keyPress(PlayerEnum.getKey(cmd,id));
                    }

                }
            }

    } catch .... 
```

这是客户端部分，我在其中循环发送我的数据：

```
private void networking() {
    try {
        if(client != null) {
            ....
                out.writeObject(sendQueue.poll());

            ....
        }
    } catch .... 
```

当我写这个为什么时，每次执行while循环时我都会发送数据..当sendQueue为空时，将发送一个空的“对象”。这会导致“高”网络流量和“高”cpu 使用率。但是：几乎立即收到所有发送评论。

当我将代码更改为以下内容时：

```
while(true)
...
if(sendQueue.peek() != null) {
    out.writeObject(sendQueue.poll());
}
... 
```

cpu 使用率完全没问题，但我有一些滞后 .. 命令到达的速度不够快.. 正如我所说，如果我每隔一段时间发送数据（使用空对象），它工作正常（除了 cpu 使用率）执行。但我确信这是一种非常粗糙的编码风格，因为我有点淹没网络。任何提示？

我究竟做错了什么？？

* * *

感谢您的帮助！

真诚的，maaft

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:57:42.747

代码的 CPU 密集型版本正在用`null`值淹没输出流。它们算作要传输的数据。尽管您的服务器明确忽略了它们，但它们也有助于最终强制任何有用的数据通过。

您修改后的代码`peek`更合理。调用`flush`after 是一种很好的形式`writeObject`。否则，写入的对象可能会卡在输出缓冲区中并等待更多项目的到来。缓冲是针对多个对象一起发送的情况的性能优化。不进行缓冲的流类不需要刷新。

更好的是：

```
Object item = sendQueue.poll();
if (item != null) {
    out.writeObject(item);
    out.flush();  // maybe not needed, depending on the class of your stream 
} 
```

这稍微快一点；`peek`无论如何，如果您打算`poll`立即进行评估，则毫无意义。

此外，`socket.setTcpNoDelay(true)`在将套接字传递给之前调用套接字`SocketOutputStream`（假设这是您创建输出流的方式）。这会禁用[Nagle 算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)，这可能不一定是节省网络带宽的最佳决策，但它是一种快速检查方法，除了调整 TCP 发送/接收缓冲区之外，您的客户端和服务器是否正常工作。如果您与服务器有直接连接，我根本不用担心禁用 Nagle 算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:40:54.490

您应该使用阻塞队列以便 poll() 阻塞，而不是返回 null。发送空值根本没有意义，这只是浪费每个人的时间、带宽和金钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T14:22:24.513

进一步说明，您可能需要查看适用于 Android 的 ARO 工具，该工具可帮助您优化应用程序，包括网络使用情况。[http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)

# java - Java Play Mustache NPE 错误

> ID：11067073
> 
> 赞同：5
> 
> 时间：2012-06-16T21:12:29.287
> 
> 标签：java, playback, mustache

我们在生产（amazon linux EC2 AMI）中遇到胡须播放错误，但在开发（MAC）中没有，我们尝试升级 jvm，改用 jdk，并从 tomcat 部署模型更改以匹配我们的开发环境可能，但没有任何效果。请任何帮助将不胜感激。我们在 java 和 javascript 中有很多使用 mustache 的共享代码，如果我们不得不在 java 端抛弃 mustache，那么重写所有内容将是一件大事。

20:48:52,403 错误 ~

```
@6al2dd0po
Internal Server Error (500) for request GET /mystuff/people

Execution exception (In {module:mustache-0.2}/app/play/modules/mustache/MustacheTags.java around line 32)
NullPointerException occured : null

play.exceptions.JavaExecutionException
    at play.templates.BaseTemplate.throwException(BaseTemplate.java:90)
    at play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:257)
    at play.templates.Template.render(Template.java:26)
    at play.templates.GroovyTemplate.render(GroovyTemplate.java:187)
    at play.mvc.results.RenderTemplate.<init>(RenderTemplate.java:24)
    at play.mvc.Controller.renderTemplate(Controller.java:660)
    at play.mvc.Controller.renderTemplate(Controller.java:640)
    at play.mvc.Controller.render(Controller.java:695)
    at controllers.MyStuff.people(MyStuff.java:183)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.NullPointerException
    at play.modules.mustache.MustacheTags._template(MustacheTags.java:32)
    at play.modules.mustache.MustacheTags$_template.call(Unknown Source)
    at /app/views/User/people.html.(line:22)
    at play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:232)
    ... 13 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:38:36.800

似乎问题出在threadlocal上。根据我的日志，在 Prod 中，会话使用主线程初始化。

```
 [2012-06-30 18:35:38,102] INFO 10097[**main**] - Mustache module initialized 
```

但是，MustacheTag 会在请求期间尝试使用类似这样的各种线程进行访问。

```
 [2012-06-30 17:48:44,669] INFO 66048[**play-thread-1**] - [{module:mustache-0.2}/app/play/modules/mustache/MustacheTags.java:46] _meta() :: MustachePlugin.session():null 
```

所以我像这样改变了 MustachePlugin 的实现。Changed 行注释掉了：

```
 //private static ThreadLocal<MustacheSession> session_ = new ThreadLocal<MustacheSession>();
    private static MustacheSession _session = null;
    public static MustacheSession session(){
    //return session_.get();
    return _session;
    }
    public void onConfigurationRead(){
    // some code
    _session = new MustacheSession(compiler, root);
    // some code
    } 
```

现在在 prod 模式下工作正常！我看不出为什么它应该首先在 ThreadLocal 中，因为会话在启动时被初始化！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:59:45.327

您的问题很难重现，所以我将在这里给出一些指示。您已尝试消除环境问题。所以其他可能的问题可能是

1.  数据问题：很多时候生产问题的原因通常是实际数据和测试数据的差异。检查是否导致 NPE 的数据问题。

2.  代码问题：是否有`people.html.(line:22)`导致问题的原因。首先尝试删除/更改它以检查是否导致问题。或者您能否获取`mustache`（您正在使用的确切版本）的源代码，并查看它试图创建的对象以及失败的位置。

3.  不同环境的属性文件：每个环境都有不同的属性文件吗？如果是，您是否错过了 prod env 的任何属性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:09:53.667

在第 32 行的 MustacheTags.java 上有一个 NullPointerException。

这意味着您可能正在调用 Mustache 库的方法并传递一个空值。尝试记录您传输到此方法的所有参数（MyStuff.java 第 183 行？）。

您可以在[此处查看](https://github.com/murz/play-mustache/blob/e5df76e6935db4d19aa67f6ab9f18d20efd723a0/app/net/murz/play/mustache/MustacheTags.java)MustacheTags 的源代码，它可能会帮助您了解要传递的值以及应该传递的值。

# vim - 在文件之间共享函数的惯用方式是什么？

> ID：11067080
> 
> 赞同：1
> 
> 时间：2012-06-16T21:14:24.167
> 
> 标签：vim

我有一个名为 InComment() 的插件函数存储在 magic.vim *1

我想在两个 ftplugin 文件之间共享它：

*   ftplugin/c.vim
*   ftplugin/python.vim

从我的 ftplugin 文件中调用 InComment() 函数的惯用方法是什么？

*1 插件/magic.vim

```
function! s:InComment() " {{{
    let syn = s:SyntaxName(line('.'), col('.') - 1, 1)
    if syn =~? 'comment'
        return 1
    else
        return 0
    endif
endfunction "}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:12:13.793

古拉什王子引用的文件有你需要的一切。为了具体回答您，您需要根据插件名称为函数命名，如下所示：

```
function! magic#InComment() " {{{
    let syn = s:SyntaxName(line('.'), col('.') - 1, 1)
    if syn =~? 'comment'
        return 1
    else
        return 0
    endif
endfunction "}}} 
```

然后你可以像这样从你的插件中调用它：

```
call magic#InComment() 
```

# 之前的部分必须与插件文件的名称匹配。这也将导致插件在调用函数时自动加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:49:07.077

我刚刚在尝试自己回答时发现了这个问题。

有一个关于[编写库脚本](http://vimdoc.sourceforge.net/htmldoc/usr_41.html#41.15)的 Vim 帮助部分，看起来正是我们所需要的！

（注意：我还没有真正尝试过。如果遇到问题，我会更新这篇文章。）

# ruby-on-rails - 从链接创建对象不实现参数

> ID：11067081
> 
> 赞同：0
> 
> 时间：2012-06-16T21:14:27.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试生成一个创建新对象的链接。它创建对象，但不设置 user_id 或 subreddit_id。

```
<%= link_to ' (add to my subreddits)', 
            { 
              controller: 'subscriptions',
              action: 'create',
              user_id: current_user.id,
              subreddit_id: subreddit.id
            },
              method: :post %> 
```

以下是相关的控制器：

```
def new
@subscription = Subscription.new

unless current_user.admin?
  @subscription.user_id = current_user.id
end

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @subscription }
end
end

def create
@subscription = Subscription.new(params[:subscription])

unless current_user.admin?
  @subscription.user_id = current_user.id
end

respond_to do |format|
  if @subscription.save
    format.html { redirect_to @subscription, notice: 'Subscription was successfully created.' }
    format.json { render json: @subscription, status: :created, location: @subscription }
  else
    format.html { render action: "new" }
    format.json { render json: @subscription.errors, status: :unprocessable_entity }
  end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:43:23.383

我猜你的错误在这里：

```
# in create
@subscription = Subscription.new(params[:subscription]) 
```

您没有设置`subscription`参数的值。你设置`params[:user_id]`和`params[:subreddit_id]`。在创建订阅时使用它们，例如：

```
@subscription = Subscription.new(
  user_id: params[:user_id], 
  subreddit_id: params[:subreddit_id]
) 
```

# c# - 使用函数 参数

> ID：11067087
> 
> 赞同：2
> 
> 时间：2012-06-16T21:16:08.237
> 
> 标签：c#, .net

我的代码中有一个 Func，声明如下：

```
Func<string, int, bool> Filter { get; set; } 
```

如何访问作为 Func 参数的字符串和 int 变量以便在我的代码中使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T21:19:55.367

参数仅在调用函数时*存在*......并且它们仅在函数中可用。例如：

```
foo.Filter = (text, length) => text.Length > length;

bool longer = foo.Filter("yes this is long", 5); 
```

这里，值 "yes this is long" 是*委托执行时*`text`的参数值，同样，值 5 是*执行时*参数的值。在其他时候，这是一个毫无意义的概念。*`length`*

 **你真正想要达到什么目的？如果您能给我们更多的背景信息，我们几乎可以肯定地为您提供更好的帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T21:19:57.840

您可以使用匿名方法：

```
Filter = (string s, int i) => {
    // use s and i here and return a boolean
}; 
```

或标准方法：

```
public bool Foo(string s, int i)
{
    // use s and i here and return a boolean
} 
```

然后您可以将 Filter 属性分配给此方法：

```
Filter = Foo; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T21:20:16.610

在此处查看此示例 - [http://www.dotnetperls.com/func](http://www.dotnetperls.com/func)

```
using System;

class Program
{
    static void Main()
    {
    //
    // Create a Func instance that has one parameter and one return value.
    // ... Parameter is an integer, result value is a string.
    //
    Func<int, string> func1 = (x) => string.Format("string = {0}", x);
    //
    // Func instance with two parameters and one result.
    // ... Receives bool and int, returns string.
    //
    Func<bool, int, string> func2 = (b, x) =>
        string.Format("string = {0} and {1}", b, x);
    //
    // Func instance that has no parameters and one result value.
    //
    Func<double> func3 = () => Math.PI / 2;

    //
    // Call the Invoke instance method on the anonymous functions.
    //
    Console.WriteLine(func1.Invoke(5));
    Console.WriteLine(func2.Invoke(true, 10));
    Console.WriteLine(func3.Invoke());
    }
} 
```**

# python - 来自 Python 的 7zip 命令

> ID：11067097
> 
> 赞同：16
> 
> 时间：2012-06-16T21:18:29.050
> 
> 标签：python, 7zip

已经有一篇关于这个主题的[帖子](https://stackoverflow.com/questions/9128169/how-to-execute-7zip-commands-from-python-script)，但它没有明确回答我在这里重新提出的基本问题：

你如何从 Python 制作 7zip 命令？

尝试使用[subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)模块，我实现了以下运行但什么都不做（据我所知）：

```
import subprocess
cmd = ['7z', 'a', '"Test.7z"', '"Test"', '-mx9']
subprocess.Popen(cmd, stderr=subprocess.STDOUT, stdout=subprocess.PIPE) 
```

我知道以下 7zip 命令有效，因为我在 Windows 命令行本身上进行了测试：

```
7z a "Test.7z" "Test" -mx9 
```

我如何从 Python 实现那个简单的 7zip 命令？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T21:47:01.483

```
import subprocess
cmd = ['7z', 'a', 'Test.7z', 'Test', '-mx9']
sp = subprocess.Popen(cmd, stderr=subprocess.STDOUT, stdout=subprocess.PIPE) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-02T15:10:08.987

您可以使用以下方法将其包装为函数：

```
import subprocess

def sevenzip(filename, zipname, password):
    print("Password is: {}".format(password))
    system = subprocess.Popen(["7z", "a", zipname, filename, "-p{}".format(password)])
    return(system.communicate()) 
```

这绝对有效，因为我已经尝试过并测试过它。如果你想调整它，即提取文件，那么你可以使用以下内容：

```
def extractfiles(zipname):
    system = subprocess.Popen(["7z", "e", zipname])
    return(system.communicate()) 
```

试一试，让我知道你是怎么过的。

请记住，这是针对 Linux 的。在 Windows 中，将“7z”与“C:\Program Files\7-Zip\7z.exe”交换（我认为这是正确的位置）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-20T21:15:21.577

以下对我有用，python 3.5.2, windows8.1, 7z path added to system

```
 rc = subprocess.call(['7z', 'a', output_filename + '.zip', '-mx9', '-pSecret^)'] + [src_folder + '/']) 
```

有两个参数，-mx9 表示最大压缩，-pSecret^) 表示密码是 "Secret^)" ， "^" 是 windows 系统中 ")" 的转义，但是解压时需要输入 "^" .

如果没有“^”，windows 系统在 7z.exe 创建 zip 文件时将不会应用密码。

另外，如果你想使用“-mhe”开关，你需要 7z 的文件格式而不是 zip。

# c++ - 使用 c++/WinAPI 计算 Windows 上进程运行实例的可靠方法

> ID：11067100
> 
> 赞同：2
> 
> 时间：2012-06-16T21:19:40.330
> 
> 标签：c++, windows, winapi, pid

我需要知道我的进程有多少实例在本地 Windows 系统上运行。我需要能够使用 C++/MFC/WinAPIs 来做到这一点。那么有什么可靠的方法来做到这一点呢？

我正在考虑为此使用进程 ID，将其作为列表存储在进程可以访问的共享内存数组中。但问题是，当一个进程关闭或崩溃时，它的进程 ID 多久会被重用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:31:13.810

[您可以使用此问题](https://stackoverflow.com/questions/865152/how-can-i-get-a-process-handle-by-its-name-in-c)中描述的方法通过进程名称来获取进程句柄。它被称为[过程行走](http://msdn.microsoft.com/en-us/library/ms684887%28v=VS.85%29.aspx)。这将比进程 ID 或文件路径更可靠。

您正在寻找[此答案](https://stackoverflow.com/a/865207/921739)的变体。只需使用 循环遍历进程`Process32Next`，并使用 查找具有相同名称的进程`MatchProcessName`。与我提供的链接中的示例不同，您将希望计算或创建具有相同名称的进程列表，但这是一个微不足道的补充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:31:48.317

进程和线程标识符可以在所有句柄关闭后的任何时间重用。请参阅[进程 ID 何时可以重用？](http://blogs.msdn.com/b/oldnewthing/archive/2011/01/07/10112755.aspx)有关这方面的更多信息。

但是，如果您要存储一对 { identifier, process start time }，您可以解决这些歧义并检测标识符重用。您可以创建命名文件映射以在进程之间共享信息，并使用 IPC 同步访问此共享数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T00:08:45.950

如果您试图将进程的实例数限制为某个数量，则可以使用信号量。
您可以在这里详细阅读：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686946 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686946(v=vs.85).aspx)

简而言之，信号量使用当前计数和最大计数进行初始化。进程的每个实例在获取信号量时都会递减计数。当第 n 个进程尝试获取它但计数已达到零时，该进程将无法获取它并且可以终止或采取适当的措施。

以下代码应该为您提供必须做的事情的要点：

```
#include <windows.h>
#include <stdio.h>

// maximum number of instances of your process
#define MAX_INSTANCES 10

// name shared by all your processes.  See http://msdn.microsoft.com/en-us/library/windows/desktop/aa382954(v=vs.85).aspx
#define SEMAPHORE_NAME "Global\MyProcess"

// access rights for semaphore, see http://msdn.microsoft.com/en-us/library/windows/desktop/ms686670(v=vs.85).aspx
#define MY_SEMAPHORE_ACCESS SEMAPHORE_ALL_ACCESS

DWORD WINAPI ThreadProc( LPVOID );

int main( void )
{
        HANDLE semaphore;

    // Create a semaphore with initial and max counts of MAX_SEM_COUNT

    semaphore = CreateSemaphore( 
        NULL,           // default security attributes
        MAX_INSTANCES,  // initial count
        MAX_INSTANCES,  // maximum count
        SEMAPHORE_NAME ); 

    if (semaphore == NULL) 
    {
        semaphore = OpenSemaphore(
            MY_SEMAPHORE_ACCESS, 
        FALSE, // don't inherit the handle for child processes
        SEMAPHORE_NAME );

        if (semaphore == NULL)
        {
            printf("Error creating/opening semaphore: %d\n", GetLastError());
                return 1;           
        }
    }

    // acquire semaphore and decrement count
    DWORD acquireResult = 0;
        acquireResult = WaitForSingleObject( 
        semaphore,
        0L);  // timeout after 0 seconds trying to acquire

    if(acquireResult == WAIT_TIMEOUT)
    {
        printf("Too many processes have the semaphore.  Exiting.");
        CloseHandle(semaphore);
        return 1;
    }

    // do your application's business here

    // now that you're done release the semaphore
    LONG prevCount = 0;
    BOOL releaseResult = ReleaseSemaphore(
            semaphore,
            1, // increment count by 1
            &prevCount );

    if(!releaseResult)
    {
        printf("Error releasing semaphore");
        CloseHandle(semaphore);
        return 1;
    }

    printf("Semaphore released, prev count is %d", prevCount);

    CloseHandle(semaphore);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T21:26:05.770

好吧，您的解决方案不是很可靠。操作系统可以在以后的任何时间重用 PID。我通过遍历所有进程并将它们的命令行字符串（可执行文件的路径）与我的进程的命令行字符串进行比较来完成一次。效果很好。

应特别注意通过批处理文件启动的程序（如某些 java 应用程序/服务器）。

其他解决方案涉及 IPC，可能通过命名管道、套接字、共享内存（如您所述）。但是它们都不是那么容易实现和维护的。

# jquery - 贾斯汀电视 API - Jquery / JSON

> ID：11067101
> 
> 赞同：0
> 
> 时间：2012-06-16T21:19:48.333
> 
> 标签：jquery, ajax, json, api, justin.tv

我想知道是否有人可以向我展示如何使用 Justin TV API 的示例。他们有这个[文档](http://apiwiki.justin.tv/mediawiki/index.php/REST_API_Documentation)和一个“示例”以及[返回值](http://apiwiki.justin.tv/mediawiki/index.php/Returned_Objects)（这是[xml 文件](http://api.justin.tv/api/stream/list.xml?channel=dreamhacksc2)），但是当我尝试使用它时，我不明白它在哪里定义了它从哪个频道中提取。如果我想提取频道摘要 - 我试过这个：

```
$.getJSON("http://api.justin.tv/stream/summary?channel=dreamhacksc2", function(a){alert(a.summary);}); 
```

但我不断收到 Bad Origin 错误。我一直在尝试在线查找示例，但没有找到任何可靠的示例。有人可以举一个从某个渠道拉东西的例子吗？我可能可以从那里解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T21:23:46.043

您似乎没有为[摘要](http://apiwiki.justin.tv/mediawiki/index.php/Stream/summary)方法和 JSONP 使用正确的 url。试试这个：

```
http://api.justin.tv/api/stream/summary.json?channel=dreamhacksc2&jsonp=? 
```

像这样：

```
$.getJSON('http://api.justin.tv/api/stream/summary.json?channel=dreamhacksc2&jsonp=?', function(a) {
    alert(a.viewers_count);
}); 
```

# c - 在另一个文件夹中创建 1000 个文件夹并将文件放在最后一个文件夹中的最快方法

> ID：11067106
> 
> 赞同：4
> 
> 时间：2012-06-16T21:20:04.783
> 
> 标签：c, linux, file, ubuntu, hierarchy

我编写了一个用于搜索特定文件的代码，用户在其中输入 a`starting path`和 a `filename`，然后程序在文件存在时打印其详细信息，否则打印`not found`。

该代码基于递归。我想用一个大文件夹层次结构来测试它，比如说 1000 个文件夹，一个在另一个文件夹中，然后`david.txt`在第 1000 个文件夹中放置一个名为的文件。

如何在接下来的 3 小时内不创建 1000 次文件夹的情况下做到这一点？

代码写在`C`, 下`Ubuntu`。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T21:31:44.930

在您的 shell 中键入以下内容：

```
mkdir -p folder$( seq -s "/folder" 999 )1000 
```

然后就可以进入这个文件夹了：

```
cd folder$( seq -s "/folder" 999 )1000 
```

并创建一个文件：

```
touch david.txt 
```

并回到你以前的目录：

```
cd - 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T21:28:46.663

正如一些评论所述，我将外壳用于此类目的：

```
#!/bin/sh

for i in $(seq 1000)
do
    mkdir tst
    cd tst
done
touch david.txt 
```

关于一个相关主题，让我推荐[这篇文章](http://www.leancrew.com/all-this/2011/12/more-shell-less-egg)，它展示了有时 shell 脚本如何在更短的开发时间内解决您的问题。特别适用于像这样*的临时*问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T21:28:34.133

简单的 bash 循环：

```
$ pushd .
$ for i in {1..1000}; do
      mkdir d$i;
      cd d$i;
  done

$ touch david.txt
$ popd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T21:23:20.643

（几乎）使用相同的代码来创建文件夹和文件。一旦开始工作，搜索/报告也几乎完成。这是一种自我测试:)

# ruby-on-rails - Rails 3.2 Postgres 保存错误“ActiveRecord::StatementInvalid: PG::Error: ERROR: Syntax error near 'T' at position 5”

> ID：11067120
> 
> 赞同：15
> 
> 时间：2012-06-16T21:22:35.920
> 
> 标签：ruby-on-rails, ruby, postgresql, syntax-error

当我尝试将特定类保存到数据库时，我的应用程序开始抛出错误。我不确定到底是什么原因导致这种情况开始发生——过去几天我遇到了各种各样的数据库问题......

无论如何，我的模型似乎工作正常（它正在正确计算所有 before_save 值），但随后它尝试保存到数据库并崩溃了。

```
SQL (0.8ms)  INSERT INTO "portfolios" ("correlation_matrix", "created_at", "data", "mean_return", "std_dev", "updated_at", "weights") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["correlation_matrix", "--- \n- - 1.0\n  - -0.4873114574375062\n- - -0.4873114574375062\n  - 1.0\n"], ["created_at", Sat, 16 Jun 2012 15:12:35 MDT -06:00], ["data", {"TSX"=>0.5, "VUSTX"=>0.5}], ["mean_return", #<BigDecimal:7fadb119b750,'0.488052381E-1',18(45)>], ["std_dev", #<BigDecimal:7fadb119b598,'0.7668705159 123244E-1',18(45)>], ["updated_at", Sat, 16 Jun 2012 15:12:35 MDT -06:00], ["weights", "--- \nTSX: 0.5\nVUSTX: 0.5\n"]] 
```

引发此错误：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  Syntax error near 'T' at position 5 
```

我不知道这个错误是什么意思（或者这个'T'是什么......），甚至不知道从哪里开始对其进行故障排除......任何帮助将不胜感激。

我可以发布任何可能需要的信息来解决这个问题......

相关迁移：

```
 create_table :portfolios do |t|
    t.text :weights
    t.decimal :mean_return, :precision => 15, :scale => 10
    t.decimal :std_dev, :precision => 15, :scale => 10
    t.text :correlation_matrix
    t.hstore :data

    t.timestamps
  end

  execute "CREATE INDEX portfolios_gin_data_hstore ON portfolios USING GIN(data);" 
```

完整的堆栈跟踪：

```
 ActiveRecord::StatementInvalid: PG::Error: ERROR:  Syntax error near 'T' at position 5
: INSERT INTO "portfolios" ("correlation_matrix", "created_at", "data", "mean_return", "std_dev", "updated_at", "weights") VALUES ($1, $2, $3, $4,     $5, $6, $7) RETURNING "id"
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:1164:in `get_last_result'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:1164:in `exec_cache'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:665:in `block in exec_query'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.    rb:20:in `instrument'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/postgresql_adapter.rb:663:in `exec_query'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract/database_statements.rb:63:in `exec_insert'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract/database_statements.rb:90:in `insert'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/relation.rb:66:in `insert'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/persistence.rb:363:in `create'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/timestamp.rb:57:in `create'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/callbacks.rb:268:in `block in     create'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:403:in     `_run__772785567275930853__create__1186465801021498362__callbacks'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in     `__run_callback'
... 11 levels...
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/validations.rb:50:in `save'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/attribute_methods/dirty.rb:22:in     `save'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/transactions.rb:241:in `block (2     levels) in save'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/transactions.rb:295:in `block in     with_transaction_returning_status'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2\.    6/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/transactions.rb:208:in     `transaction'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/transactions.rb:293:in     `with_transaction_returning_status'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/transactions.rb:241:in `block in     save'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/transactions.rb:252:in     `rollback_active_record_state!'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activerecord-3.2.6/lib/active_record/transactions.rb:240:in `save'
  from (irb):33
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
  from /Users/brandon/.rvm/gems/ruby-1.9.3-p194@myapp/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
  from script/rails:6:in `require'
  from script/rails:6:in `<main>' 
```

**更新 1** 根据要求提供一些型号代码。

宏的东西：

```
attr_accessible :weights

serialize :correlation_matrix
serialize :weights

has_and_belongs_to_many :securities, :uniq => true
has_and_belongs_to_many :efficient_frontiers

before_validation :format_weights_tickers, :add_securities, :validate_weights, :set_weights_in_hstore, :build_correlation_matrix, :set_mean_return, :set_standard_deviation

validates_presence_of :mean_return, :std_dev, :securities, :correlation_matrix, :weights
validates_numericality_of :mean_return, :std_dev

validate :uniqueness_of_weights 

before_destroy :check_for_dependent

scope :by_std_dev, :order => 'std_dev ASC' 
```

我能找到的与 HStore 列有关的任何事情， *我真正使用 HStore 的目的都是搜索特定代码。这曾经有效...我不知道发生了什么变化。我可能已经升级了 Postgres（我正在摆弄自制软件）或者可能会随着 Rails 发生一些变化。我确实尝试回到 3.2.3，但我得到了同样的错误。*

```
def self.find_by_hstore(search_key, search_value)  
  where("data @> (:key => :value)", :key => search_key.to_s, :value => search_value.to_s)
end  

def set_weights_in_hstore
  self.data = {} if self.data.nil?
  weights.each_pair {|ticker, weight| self.data[ticker.to_s] = weight}
end 
```

如果这太脱节，我可以发布整个模型。让我知道！

**更新＃2 - 我在其他地方也遇到类似的错误......**

简单的用户注册后......

```
SQL (10.9ms)  INSERT INTO "users" ("admin", "confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "data", "email", "encrypted_password", "last_email_at", "last_sign_in_at", "last_sign_in_ip", "name", "plan", "remember_created_at", "reset_password_sent_at", "reset_password_token", "selected_portfolio_id", "sign_in_count", "unconfirmed_email", "updated_at", "verified") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23) RETURNING "id"  [["admin", false], ["confirmation_sent_at", Sat, 16 Jun 2012 20:37:07 MDT -06:00], ["confirmation_token", "7Xu15pMrV9zTNmofv8bD"], ["confirmed_at", nil], ["created_at", Sat, 16 Jun 2012 20:37:07 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["data", {"min_rebalance_spacing"=>90 days, "max_contact_frequency"=>7 days, "allowable_drift"=>5}], ["email", "joe@what.com"], ["encrypted_password", "$2a$10$HNUmlYmcVXbBsyZRFCAB7e8c5mf6S9UOdWr/ZCz10y5Sg4gOh8Zvq"], ["last_email_at", Sat, 16 Jun 2012 20:37:07 MDT -06:00], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["name", "Joe Blow"], ["plan", "basic"], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["selected_portfolio_id", nil], ["sign_in_count", 0], ["unconfirmed_email", nil], ["updated_at", Sat, 16 Jun 2012 20:37:07 MDT -06:00], ["verified", false]]

20:37:07 log.1          | [ef4a7d55fb30e8fb82ac6c860e674bfc] [127.0.0.1] PG::Error: ERROR:  Syntax error near 'm' at position 5

20:37:07 log.1          | : INSERT INTO "users" ("admin", "confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "data", "email", "encrypted_password", "last_email_at", "last_sign_in_at", "last_sign_in_ip", "name", "plan", "remember_created_at", "reset_password_sent_at", "reset_password_token", "selected_portfolio_id", "sign_in_count", "unconfirmed_email", "updated_at", "verified") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23) RETURNING "id" 
```

**UDPATE 3**

我的数据库/用户表似乎发生了一些奇怪的事情。在迁移中加载环境时出现以下错误：

```
rake aborted!
PG::Error: ERROR:  relation "users" does not exist
LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc,         a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"users"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-17T20:18:27.963

我在 Rails 3.2 上遇到了类似的问题。如果您没有使用 Rails 主干（朝着 4.0 发展），它本身就无法理解 hstore - 您需要定义一个序列化编码器（由`activerecord-postgres-hstore`gem 提供），如下所示：

```
class Example < ActiveRecord::Base
  serialize :data, ActiveRecord::Coders::Hstore
end 
```

# uitabbarcontroller - UINavigationBar 与 UITabBarController 不可见

> ID：11067126
> 
> 赞同：0
> 
> 时间：2012-06-16T21:23:46.023
> 
> 标签：uitabbarcontroller, uinavigationbar

> **可能重复：**
> [尝试构建顶部带有导航栏的表格视图](https://stackoverflow.com/questions/6990915/trying-to-construct-a-tableview-with-a-navigation-bar-at-top)

我有一个里面`UITabBarController`有一个`TabBar`。现在我需要的是一个`UINavigationBar`顶部的控制器来显示标题和一个按钮。为此，我采取了一个独立的立场`UINavigationBar`，但它不可见，我不明白为什么。

很抱歉，到目前为止还没有找到任何合适的解决方案。是否有任何特定的方式可以单独使用和`UINavigationBar`访问`UITabBarController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:37:13.480

创建您的 UIViewControllers 并使用 Interface Builder 或编码在每个选项卡中显示视图。将 NavigationBar 添加到这些视图中的每一个。

然后将这些 UIViewControllers 添加到 UITabViewController 的 viewControllers NSArray 中。

IE。在你 AppDelegate 的应用程序中的 didFinishLaunching 函数

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

使用 IB 或对其进行编码，将 UINavigationBar 添加到 viewController1 和 viewControllers2 视图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T20:46:51.443

以下链接对我非常有用！

[尝试构建顶部带有导航栏的表格视图](https://stackoverflow.com/a/6991026/437146)

# javascript - 滚动列表元素不会在第一次单击时开始

> ID：11067140
> 
> 赞同：1
> 
> 时间：2012-06-16T21:25:37.697
> 
> 标签：javascript, jquery

我正在编写一个脚本，该脚本将通过单击“上一个”和“下一个”链接来滚动列表元素。当用户第一次单击“下一步”按钮时，他们必须单击两次才能显示第二个列表元素。“上一个”链接工作得很好，但是如何将我的脚本修复到用户只需单击“下一个”按钮一次的位置？

[http://jsfiddle.net/S79qp/290/](http://jsfiddle.net/S79qp/290/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:31:39.453

默认情况下只需放在`active`第一个元素上。

```
<li class="first active none">Ferrari</li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:35:35.337

问题是在第一次点击“下一步”时，类中没有元素`.active`，因此`$('.active')`找不到任何东西并且`$('.active').next().length`将为0，所以第一个元素将被赋予类`.active`。

解决方案将类添加`.active`到最初显示的第一个元素，这将使类`.first`过时：http: [//jsfiddle.net/hx4AD/](http://jsfiddle.net/hx4AD/)

# php - 使用正则表达式解析成分列表时排除“AND”

> ID：11067143
> 
> 赞同：1
> 
> 时间：2012-06-16T21:25:55.263
> 
> 标签：php, regex

我已经搜索了很多，似乎无法找到一种方法来将“AND”之类的内容排除在如下条目中：

> 番茄泥（水、番茄酱）、焦糖色素、山梨酸钾和 EDTA 钙二钠、糖浆、玉米糖浆、糖、香料、罗望子、天然香料。

我当前的正则表达式字符串可以捕获所有内容，但我不知道如何让它拆分“山梨酸钾”和“乙二胺四乙酸钙二钠”。这是我所拥有的：

```
[\(,\)\s]*\s*([^,\)\(\.]+)\s*[\.,\)\s\(] 
```

顺便说一句，这是在 PHP 中，我不想在找到匹配项后拆分它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T21:45:12.633

# 代码：

```
$text = 'TOMATO PUREE (WATER, TOMATO PASTE), CARAMEL COLOR, POTASSIUM SORBATE AND CALCIUM DISODIUM EDTA, MOLASSES, CORN SYRUP, SUGAR, SPICES, TAMARIND, NATURAL FLAVOR.';

$array = preg_split('/\)?, | \(|, | AND |\./', $text, -1, PREG_SPLIT_NO_EMPTY);

var_dump($array); 
```

# 输出：

```
array(13) {
  [0]=>
  string(12) "TOMATO PUREE"
  [1]=>
  string(5) "WATER"
  [2]=>
  string(12) "TOMATO PASTE"
  [3]=>
  string(13) "CARAMEL COLOR"
  [4]=>
  string(17) "POTASSIUM SORBATE"
  [5]=>
  string(21) "CALCIUM DISODIUM EDTA"
  [6]=>
  string(8) "MOLASSES"
  [7]=>
  string(10) "CORN SYRUP"
  [8]=>
  string(5) "SUGAR"
  [9]=>
  string(6) "SPICES"
  [10]=>
  string(8) "TAMARIND"
  [11]=>
  string(14) "NATURAL FLAVOR"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:31:54.760

我懂了：

```
$str = "TOMATO PUREE (WATER, TOMATO PASTE), CARAMEL COLOR, POTASSIUM SORBATE AND CALCIUM DISODIUM EDTA, MOLASSES, CORN SYRUP, SUGAR, SPICES, TAMARIND, NATURAL FLAVOR.";

$array = preg_split("/\s*(,|AND)\s*/i", $str);

print_r($array); 
```

输出：

```
Array
(
    [0] => TOMATO PUREE (WATER
    [1] => TOMATO PASTE)
    [2] => CARAMEL COLOR
    [3] => POTASSIUM SORBATE
    [4] => CALCIUM DISODIUM EDTA
    [5] => MOLASSES
    [6] => CORN SYRUP
    [7] => SUGAR
    [8] => SPICES
    [9] => TAMARIND
    [10] => NATURAL FLAVOR.
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:40:16.740

如果您想使用正则表达式，那么真相解决方案就是其中之一。它还同时处理空白。

如果您不了解正则表达式，作为替代解决方案，您可以：

1.  用逗号替换每个 'AND'
2.  使用逗号分隔符将字符串拆分为元素

    ```
    $array = preg_split(",", str_replace(" AND ", ",", $str)); 
    ```

此解决方案使用您应该能够使用的简单字符串函数。

[最后，您可能希望使用功能trim](http://php.net/manual/en/function.trim.php)删除不需要的空白字符。

# google-apps - 如何为我的域将 Web 应用程序与 google 集成？

> ID：11067144
> 
> 赞同：1
> 
> 时间：2012-06-16T21:25:57.987
> 
> 标签：google-apps

我有一个 Web 应用程序可供我的 google 域上的所有用户使用。

有没有一种方法可以让应用程序管理用户的电子邮件、日历等，而不需要用户授权，因为所有用户都是域的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:27:21.343

您需要查看 Google Apps 2-Legged OAuth API，它们将允许您在未经授权的情况下访问/操作用户数据。

[您可以在此处](http://support.google.com/a/bin/answer.py?hl=en&answer=162106&topic=2759255&ctx=topic)找到可用的 2-Legged OAuth API 列表。

不幸的是，您会发现使用 2-Legged API 无法像使用 3-Legged API 那样做很多事情。但是，3-Legged OAuth 要求用户至少同意一次。

# php - 即使发生更新，jquery ajax 也总是出错

> ID：11067149
> 
> 赞同：2
> 
> 时间：2012-06-16T21:26:19.047
> 
> 标签：php, jquery, mysql, ajax, mysqli

当我调用下面的函数时：

```
function savePlace(id) {
var myName     = $('#placeName').val();
var myAtmosphere     = $('#placeAtmosphere').val()
var myType     = $('#placeFoodType').val()
var myPrice     = $('#placePrice').val();
$.ajax({
    type: "POST",
    url: "savePlace.php",
    data: {"placeID" : id, "placeName": myName, "placeAtmosphere" : myAtmosphere, "placeType": myType, "placePrice" : myPrice},  
    dataType:"html",
    success: function(data){
        alert("YES");
    },
    // error function is always being called - even if database gets updated correctly
    error: function (data) {
        alert("no");
    }
});
return false;
} 
```

它将运行 - 因为它将执行 savePlace.php 中的 php（运行 mysql 更新命令）。savePlace.php 目前不返回任何内容，但如果需要，它可以返回 html 或文本。在任何情况下，错误处理程序总是被执行。我已经检查了 chrome js 检查器，它报告：

```
statusText:"error"
responseText:""
status:0 
```

这是mysql代码，如果有帮助

```
<?php
require_once 'config/Common.php';
mysqli_report(MYSQLI_REPORT_ALL);
$placeID = htmlspecialchars(trim($_POST['placeID']));
$placeID = (int)$placeID;
$placeName = htmlspecialchars(trim($_POST['placeName']));
$placeAtmosphere = htmlspecialchars(trim($_POST['placeAtmosphere']));
$placeType = htmlspecialchars(trim($_POST['placeType']));
$placePrice = htmlspecialchars(trim($_POST['placePrice']));
$stmt = $EAE_CON->prepare("UPDATE EAE_PLACES SET NAME=?,ATMOSPHERE=?,FOOD_TYPE=?,PRICE=? WHERE idEAE_PLACES=?");
$stmt->bind_param('ssssi',$placeName, $placeAtmosphere, $placeType, $placePrice, $placeID);
$stmt->execute();
echo "Stuff";
?> 
```

注意：我在 localhost（我的本地机器，XAMPP）上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:21:23.153

我发现了问题。我必须更改激活此功能的按钮的标记。由于某种原因影响了这一点。

我将它从 a 更改为 a 。我不确定为什么会有所作为，但它似乎已经解决了这个问题。

# php - SQL 视图更新

> ID：11067153
> 
> 赞同：1
> 
> 时间：2012-06-16T21:26:53.127
> 
> 标签：php, mysql

我有一个加载缓慢的 SQL 视图程序。我试图找出原因，并且我认为每次访问网站时都会更新视图。或者它只是在视图本身被点击时更新？

# r - 使用 RTextTools 时如何保存 ID 字段

> ID：11067156
> 
> 赞同：1
> 
> 时间：2012-06-16T21:27:57.647
> 
> 标签：r, machine-learning, svm

我正在使用 RTextTools 来训练和分类来自 MySQL 表的数据。我有一个名为的字段`id`，用于标识数据库中的每个文档。但是，使用以下代码后，该`id`字段不再存在。

```
matrix <- create_matrix(cbind(data$text,data$id),
language="english", removeNumbers=TRUE,
removeSparseTerms=.998)

corpus <- create_corpus(matrix,
as.numeric(data$valid),
trainSize=1:750, testSize=751:1000,
virgin=FALSE)

SVM <- train_model(corpus,"SVM")

SVM_CLASSIFY <- classify_model(corpus, SVM) 
```

如上所述，`data$id`在此过程中似乎丢失了。知道如何保持 ID 与数据相关联吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T00:50:36.837

您可以使用该`cbind`命令将 ID 列添加回输出。例如：

```
output <- cbind(data$id,SVM_CLASSIFY) 
```

# java - 试图保护 PDF (iText) 试图禁止用户复制 pdf 的内容

> ID：11067159
> 
> 赞同：1
> 
> 时间：2012-06-16T21:28:42.557
> 
> 标签：java, pdf, itext, copy-protection, pdf-writer

下面是我的代码。我的目标是创建一个 PDF，最终用户可以在其中做任何他们想做的事情，除了复制文本（选择文本并复制到记事本）。谁能解释第 18 行应该包含什么代码？我允许打印但不允许 ALLOW_COPY）

我的印象是，下面的代码足以限制用户这样做，但“事实上”他们能够复制选定的文本并将内容粘贴到记事本中。

非常感谢！

```
package com.itext;

import java.io.FileOutputStream;
import com.itextpdf.text.Document;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;
import java.io.IOException;
import com.itextpdf.text.DocumentException;

public class ProtectMePdf 
{ 
public static void main(String[] args) throws IOException, DocumentException 
{
    Document document = new Document();
    PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("/Users/adhg/protectMe.pdf"));

    //LINE 18: what's wrong with this line? - if you run the code you will be able to copy the selected text. 
    writer.setEncryption(null, null, PdfWriter.ALLOW_PRINTING, PdfWriter.STANDARD_ENCRYPTION_128);

    writer.createXmpMetadata();
    document.open();
    document.add(new Paragraph("Protect me! if you can do copy-paste of this message to a notepad = NO GOOD :-(")); 
    document.close();
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-20T03:37:56.080

接受的答案是错误的。事实上，您可以禁用复制并允许打印。这很容易，您只需取消权限：

```
writer.setEncryption(null, null,  ~(PdfWriter.ALLOW_COPY), PdfWriter.STANDARD_ENCRYPTION_128); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:39:26.937

我不是 iText 和 PDF 规范的专家，但我认为您不能同时允许打印和禁用复制和粘贴。您可以在此处找到[更多信息](https://stackoverflow.com/questions/6664867/how-to-really-secure-a-pdf-using-itextpdf-preferably)。

另一种选择是将图像放入 PDF 中，但 OCR 有点先进，可以避免这种情况。

# java - 如何在java中的文件中循环写入或附加字符串？

> ID：11067162
> 
> 赞同：0
> 
> 时间：2012-06-16T21:29:03.420
> 
> 标签：java, file, collections, memory-leaks, filewriter

我在处理非常大的数据集时遇到内存问题，并且使用 char[] 和 Strings 出现内存泄漏，不知道为什么！所以我正在考虑将一些处理后的数据写入文件而不是存储在内存中。因此，我想使用循环将 arrayList 中的文本写入文件中。首先，程序将检查当前工作目录中是否已经存在特定文件，如果不存在，则创建具有特定名称的文件并开始使用循环逐行从 arrayList 写入文本；如果文件已经存在，则打开文件并在文件的最后一行（在新行中）后附加第一个数组值，并开始逐行在循环中写入其他数组值。

任何人都可以建议我如何在 Java 中做到这一点？我在 Java 方面不是那么好，所以如果可能的话，请提供一些示例代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:45:11.137

我不确定您不确定该过程的哪些部分，所以我将从头开始。

该`Serializable`接口允许您将对象写入文件。任何实现的对象`Serializable`都可以传递给`ObjectOutputStream`并写入文件。

`ObjectOutputStream`接受一个`FileOutputStream`作为参数，它可以附加到一个文件。

```
ObjectOutputstream outputStream = new ObjectOutputStream(new FileOutputStream("filename", true));
outputStream.writeObject(anObject); 
```

有一些异常处理需要处理，但这些是基础。注意`anObject`应该实现`Serializable`。

读取文件非常相似，除了它使用我提到的类的输入版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:39:53.153

尝试这个

```
ArrayList<String> StringarrayList = new ArrayList<String>(); 
    FileWriter writer = new FileWriter("output.txt", true); 
    for(String str: StringarrayList ) {
      writer.write(str + "\n");
    }
    writer.close(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T23:17:37.597

**// 在主**

```
List<String> SarrayList = new ArrayList<String>(); 
..... 
```

**用内容填充它**

`enter content to SarrayList here`......

**写入文件**

```
appendToFile (SarrayList); 
```

......

```
public void appendToFile (List<String> SarrayList) {

      BufferedWriter bw = null;
      boolean myappend = true;
      try {
         bw = new BufferedWriter(new FileWriter("myContent.txt", myappend));
         for(String line: SarrayList ) {
         bw.write(line);
         bw.newLine();
         }
         bw.flush();
      } catch (IOException ioe) {
        ioe.printStackTrace();
      } finally { 
        if (bw != null) try {
        bw.close();
        } catch (IOException ioe2) {
        // ignore it  or write notice
        }
      }

   } 
```

# ios - 如何在视图控制器中使用自定义类？

> ID：11067163
> 
> 赞同：2
> 
> 时间：2012-06-16T21:29:03.593
> 
> 标签：ios, xcode, methods, keychain

好吧，我从[本教程](http://josebolanos.wordpress.com/2012/03/16/core-data-passwords-in-keychain/)中为我的项目创建了一些自定义类，我想知道是否要在我的*ViewControllerWelcome.m*文件中使用这个类，我需要首先使用以下文件在文件顶部导入该类： `#import "KeychainHelper.h`

完成后，我在*ViewControllerWelcome.m*文件中创建一个 Keychainhelper 对象，其中包含以下内容`KeychainHelper *keychainhelper = [[KeychainHelper alloc]init];`

现在我想检查用户输入到文本字段中的 pin 到存储在钥匙串中的 pin。KeychainHelper 类有一个方法 `+ (NSString*)getPasswordForKey:(NSString*)aKey;`，但我不确定如何在我的*ViewControllerWelcome.m*文件中使用/实现/向该方法发送消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:32:45.897

您应该能够执行以下操作：

```
NSString *password = [KeychainHelper getPasswordForKey:inputKey] 
```

# php - 增加 LAMP 服务器上的最大并发文件上传数

> ID：11067165
> 
> 赞同：1
> 
> 时间：2012-06-16T21:29:16.917
> 
> 标签：php, linux, apache, upload, lamp

我有一个问题，我的客户希望一次能够上传两个以上的大文件，我想知道你们中是否有人对此有解决方案，我很确定这是 Apache 或php。

这是场景，我有一个最大文件大小为 1024MB (1GB) 的视频上传表单，所以当用户上传 1 个小于或等于 1GB 的文件时，它可以正常工作，然后他们打开一个新标签并上传另一个大文件，但是当他们打开该表单的第三个选项卡并尝试上传时，我从表单中获取 IO 错误，所以我假设 PHP 或 apache 正在限制并发上传到服务器的最大数量。

**编辑：**

当我使用另一台具有完全独立的互联网连接（独立/不同的外部 IP）的计算机时，我也可以在那里上传，所以这似乎是每个客户端/IP 的最大并发上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:00:34.650

我认为增加分配给 php 脚本的内存可以帮助您，我认为这不是最合适的解决方案，但是当我在处理大量大文件时遇到问题时，我增加了脚本的内存。如果您正在为一个非常繁忙的站点开发此方法，我不推荐这种方法，但据我所知尝试增加内存。

```
 ini_set('memory_limit','128M'); 
```

为了测试您是否有 -1 而不是 128M，系统将为脚本提供无限内存。您可以使用它来测试问题是否是由于内存引起的。

# ruby-on-rails - rails在页面结果中获取相关数据

> ID：11067166
> 
> 赞同：0
> 
> 时间：2012-06-16T21:29:22.823
> 
> 标签：ruby-on-rails

假设我有 3 个表：用户、角色和用户角色。我可以在请求中获取 user_roles：`users/1/user_roles`但是如果我想获取用户的角色，例如：`users/1/roles`.

我的关系如下：

```
has_many :roles, :through => :user_roles 
```

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:43:41.740

您模型中的关系与您访问的 url 没有直接关系。您需要复制现有行为，`routes`而不是`user_routes`通过添加新操作或新控制器并创建新视图等。

目前你可能有：

*   调用的`user_routes`动作`UsersController`
*   调用的`index`动作`UserRoutesController`

所以要么：

*   添加`routes`在`UsersController`
*   添加一个`RoutesController`使用索引操作调用的控制器。

无论您使用哪种方法，在您的操作中将您的实例变量设置为`user.roles`而不是`user.user_roles`.

然后，您可以编写所需的任何视图代码。

# php - 如何将简单的 MySQL 示例转换为 MySQLi 面向对象的风格？

> ID：11067175
> 
> 赞同：-2
> 
> 时间：2012-06-16T21:30:52.733
> 
> 标签：php, mysql, mysqli, mysqli-multi-query

如何将这个简单的 MySQL 示例转换为 MySQLi 面向对象的样式：

```
$query = mysql_query("SELECT id, name FROM fruits WHERE `group`=''");

if ($query) {
    while ($row = mysql_fetch_array($query, MYSQL_ASSOC)) {
        echo $row['name'];

        $query2   = mysql_query("SELECT name FROM fruits WHERE `group`='{$row['id']}'");

        if (mysql_num_rows($query2)) {
            echo ':';

            while ($row2 = mysql_fetch_array($query2, MYSQL_ASSOC)) {
                echo ' '. $row2['name'] . ',';
            }
            mysql_free_result($query2);

            echo '<br>';
        }
    }
    mysql_free_result($query);
} 
```

结果：

```
Berries: blueberry, raspberry, strawberry,
Citrus: grapefruit, lime,
Pear 
```

数据库结构`SELECT * FROM fruits`：

```
id   | group | name
-------------------------
03E7 |       | Berries
0618 | 03E7  | blueberry
051B | 03E7  | raspberry
02AA | 03E7  | strawberry
035F |       | Citrus
07A5 | 035F  | grapefruit
0633 | 035F  | lime
05E1 |       | Pear 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:01:36.400

完整的工作代码：

```
<?php

$mysqli = new mysqli('localhost', 'root', '', 'test');

$query1 = 'SELECT id, name FROM fruits WHERE `group` = \'\'';// AND id = \'03E7\'
$query2 = 'SELECT name FROM fruits WHERE `group` = ?';

if ($stmt1 = $mysqli->prepare($query1)) {
    $stmt1->execute();
    $stmt1->store_result();
    $stmt1->bind_result($id, $name);

    while ($stmt1->fetch()) {
        echo $name;

        if ($stmt2 = $mysqli->prepare($query2)) {
            $stmt2->bind_param('s', $id);
            $stmt2->execute();
            $stmt2->store_result();
            $stmt2->bind_result($name);

            $count = $stmt2->num_rows;

            if ($count > 0) {
                echo ':';

                $i = 1;
                while ($stmt2->fetch()) {
                    echo ' ' . $name;

                    if($i < $count) {
                       echo ',';
                    } else {
                       echo '.';
                    }
                    $i++;
                }
                $stmt2->free_result();
                $stmt2->close();
            }
            echo '<br>';
        }
    }
    $stmt1->free_result();
    $stmt1->close();
}

?> 
```

改进的结果：

```
Berries: blueberry, raspberry, strawberry.
Citrus: grapefruit, lime.
Pear 
```

# c - 如何对齐 16 位整数以与 SSE 内在函数一起使用

> ID：11067178
> 
> 赞同：2
> 
> 时间：2012-06-16T21:31:32.077
> 
> 标签：c, sse, simd, memory-alignment, sse2

我正在使用定义为的 16 位整数的二维数组

```
int16_t e[MAX_SIZE*MAX_NODE][MAX_SIZE];
int16_t C[MAX_SIZE][MAX_SIZE]; 
```

其中`Max_SIZE`和`MAX_NODE`是常数值。我不是专业的程序员，但不知何故，在 StackOverflow 的帮助下，我设法编写了一段代码，在我的数据上部署了 SSE 指令并实现了显着的加速。目前，我正在使用不需要数据对齐的内在函数（主要是`_mm_loadu_si128`and `_mm_storeu_si128`）。

```
for (b=0; b<n; b+=8){
    v1 = _mm_loadu_si128((__m128i*)&C[level][b]); // level defined elsewhere.
    v2 = _mm_loadu_si128((__m128i*)&e1[node][b]); // node defined elsewhere.
    v3 = _mm_and_si128(v1,v2);
    _mm_storeu_si128((__m128i*)&C[level+1][b],v3);
} 
```

当我将内在函数更改为对齐数据的对应项（即`_mm_load_si128`和`_mm_store_si128`）时，我会遇到运行时错误，这导致我假设我的数据未正确对齐。

我现在的问题是，如果我的数据没有正确对齐，我该如何对齐它才能使用相应的内在函数？我认为由于整数是 16 位，它们会自动对齐。但是我好像错了！

对此的任何见解都将受到高度赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T22:29:10.503

SSE 需要数据在 16*字节*边界上对齐，而不是 16*位*，这是你的问题。

您正在寻找对齐静态数组的内容取决于编译器。

如果您使用的是 MSVC，则必须使用[`__declspec(align(16))`](http://msdn.microsoft.com/library/83ythb65.aspx)，或者使用 GCC，这将是[`__attribute__((aligned (16)))`](http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html).

# c++ - 仅在编辑另一个类后编译更改

> ID：11067183
> 
> 赞同：2
> 
> 时间：2012-06-16T21:31:49.127
> 
> 标签：c++, sfml

所以我有这个奇怪的问题——我在 C++ 中使用 sfml，我想编辑一个游戏屏幕（我创建了一个屏幕类，由游戏的不同级别和屏幕派生）但奇怪的是当我改变东西时类（例如，如果我试图改变精灵的像素移动率），然后我编译并运行程序，我看到绝对没有任何变化，但是如果我之后更改另一个类（哪个类，任何类都无关紧要会工作）而不是看到我创建的游戏屏幕的变化......我真的不知道这里有什么问题所以我寻求你的帮助

顺便说一句，如果它的问题有类（没有标题，只有 .cpp ）

```
#include "Screen.hpp"
#include "Sprite.hpp"
#include <iostream>

using namespace sf;

class GameScreen : public rce::Screen
{
private:
    rce::Sprite s;

public:
    GameScreen() : Screen()
    {
    }

    void Load()
    {
        s.SetImage("circle.png");
    }

    void Unload()
    {
    }

    void Update()
    {
        s.SetX(s.GetX()+1);
    }

    void Draw()
    {
        s.Draw();
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:25:47.120

如果您使用 C/C++ 处理多个文件，C/C++ 的编译器会编译每个 *.c 或 *cpp 文件并使其成为 *.o 或 *obj 文件，在某些 compilers.gcc 中使用 *.o 。然后链接器将它们链接在一起。当你重新编译一个特殊文件时，你应该编译它的依赖。

# html - 正在使用 里面 语义上好吗？

> ID：11067186
> 
> 赞同：5
> 
> 时间：2012-06-16T21:31:58.317
> 
> 标签：html, semantics, footer

我一直在环顾四周，看看您是否可以像这样使用页脚：

```
<form>
   <input />
   <input />
  <footer>
   <input />
  </footer>
</form> 
```

在我看来，它符合规范：

> footer 元素表示它适用的部分的页脚

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T21:59:53.500

根据[http://dev.w3.org/html5/markup/footer.html](http://dev.w3.org/html5/markup/footer.html)

> footer 元素表示它适用的部分的页脚。
> 
> **许可内容**
> 流内容

根据[http://dev.w3.org/html5/markup/terminology.html#flow-content](http://dev.w3.org/html5/markup/terminology.html#flow-content)

> **流内容**
> 流内容由混合了普通字符数据的流元素组成

根据[http://dev.w3.org/html5/markup/common-models.html#common.elem.flow](http://dev.w3.org/html5/markup/common-models.html#common.elem.flow)

> **7.1。流元素**
> 短语元素 or a or p or hr or pre or ul or ol or dl or div or h1 or h2 or h3 or h4 or h5 or h6 or hgroup or address or blockquote or ins or del or object or map or noscript or section or nav or article or aside or header or footer or video or audio or figure or table or form or fieldset or menu or canvas or details
> 
> **7.3\. 短语元素**
> a 或 em 或 strong 或 small 或 mark 或 abbr 或 dfn 或 i 或 b 或 s 或 u 或 code 或 var 或 samp 或 kbd 或 sup 或 sub 或 q 或 cite 或 span 或 bdo 或 bdi 或 br 或 wbr 或ins or del or img or embed or object or iframe or map or area or script or noscript or ruby​​ or video or audio or ***input*** or textarea or select or button or label or output or datalist or keygen or progress or command or canvas or time or仪表

输入是一个短语元素，所以**是的，你可以**。

网上有很多参考资料

> 页脚通常/应该包含有关其包含元素的信息。
> 
> 页脚通常包含文档的作者、版权信息、使用条款的链接、联系信息等。

但规格不止于此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:51:54.817

从句法上讲，是的，您可以这样做。据我所知，它仍然是有效的 HTML。

从语义上讲，是的，如果您有理由这样做（如果这样做有意义的话），您仍然可以这样做。它有点像新`<section>`元素，用于识别页面的逻辑“区域”。[我认为这里](http://www.html-5-tutorial.com/header-element.htm)解释得很好：

> 这些新元素帮助 [网络爬虫] 看到网站更像人。

您甚至可以制作多个[页脚](http://www.w3schools.com/html5/tag_footer.asp)：

> 您可以`<footer>`在一个文档中包含多个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:48:03.677

语义只是`<footer>`意味着一个页脚，让它打开页脚是什么。`<footer>`除了默认情况下应将它们呈现为块（并非在所有当前浏览器上都发生）之外，对元素没有要求甚至不推荐对元素进行处理。

所以答案并不重要；这只是某人对“页脚”是什么的看法。

在实际方面，如果您使用`<footer>`IE，旧版本的 IE 不会让您对其进行样式设置，除非您使用 JavaScript 技巧来引入它（希望启用 JavaScript）。

因此，几乎没有任何充分的理由在此处更喜欢`<footer>`使用class 或 id `<div>`（或者，在某些情况下，优于）。`<p>`

# windows-ce - WinCe 6.0 添加 ActiveSync 到镜像

> ID：11067187
> 
> 赞同：0
> 
> 时间：2012-06-16T21:32:11.670
> 
> 标签：windows-ce

我是 WinCe 开发的新手。我为设备创建图像并将其上传并安装在设备上。所有设置正常并加载操作系统。但我没有在设备上找到 Activesync。将设备连接到 PC 后没有任何问题。activesync 未连接。我在目录项窗口上检查了 ActiveSync 选项。所以 CoreOs->CEBASE->ApplicationsEndUse-ActiveSync。也许我必须添加其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:24:22.760

所需的和相关的组件是：

1.  核心操作系统->应用程序-最终用户->ActiveSync->文件同步
2.  核心操作系统->通信服务和网络->网络-广域网 (WAN)->拨号网络 (RAS/PPP)
3.  核心操作系统->通信服务和网络->网络-广域网 (WAN)->电话 API (TAPI 2.0)->Unimodem 支持
4.  Core OS->Shell 和用户界面->用户界面->网络用户界面

# c++ - 游戏的公共领域琐事数据库？

> ID：11067191
> 
> 赞同：9
> 
> 时间：2012-06-16T21:32:53.650
> 
> 标签：c++, csv

我的一个朋友正在用 C++ 制作一个琐事游戏，我代表他询问是否有任何公共领域的琐事数据库？它最好是 csv 样式的格式，以便于解析，但其他格式也可以，只要问题很好并且许可证是公共领域的？有没有人有任何提示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T22:06:41.387

首先想到的是你们这些老 IRC 琐事机器人：[archive.org 链接到 irc-wiki.org 琐事问题类别](https://web.archive.org/web/20150418134735/http://www.irc-wiki.org/Category:Trivia_questions#Where_can_I_get_these_funky_new_questions.3F)

这里的内容由 CC 授权，以及社区生成。不确定这是否符合您对“公共领域”的要求。

我不确定这个的许可：http: [//moxquizz.de/about.html](http://moxquizz.de/about.html)

# mysql - 创建 SQL 视图的权限

> ID：11067192
> 
> 赞同：0
> 
> 时间：2012-06-16T21:32:56.647
> 
> 标签：mysql, sql, sql-view

我在本地主机上为我的论文创建了一个 webapp。现在，当尝试在实时环境中导入 MySQL 时，我被拒绝创建 VIEW 的权利。

```
#1142 - CREATE VIEW command denied to user 'md122830db219181'@'172.16.0.22' for table 'x_likes' 
```

有可能克服这一点吗？或者任何人都可以推荐另一个允许查看的主机（真的很便宜，只需要它来上传我的论文，并且需要在线一个月）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:46:23.100

如果您使用的是 MySQL，请使用[http://versio.nl](http://versio.nl)，非常便宜，而且我只是测试了视图，它们是允许的。

# ruby-on-rails - 如何限制跨多个进程的 ActiveRecord 数据库连接

> ID：11067193
> 
> 赞同：1
> 
> 时间：2012-06-16T21:33:34.543
> 
> 标签：ruby-on-rails, activerecord, amazon-ec2, xeround

当使用 DBaaS（数据库即服务）（例如 Xeround）和托管在 EC2 实例上的 Rails 应用程序时，如何限制与数据库的并发连接数（根据数据库服务计划限制）？有必要这样做吗？

我知道 ActiveRecord 连接池是每个进程并且是线程安全的，但是如果有多个进程（也跨多个不同的机器）怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:46:55.760

不幸的是，没有办法正确限制跨多个客户端（应用程序）的连接数。唯一的方法，几乎​​是静态的和经验的，是将最大允许连接数除以应用程序数，并将结果设置为每个应用程序的连接数限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:28:02.837

使用[连接池](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html)基类来管理 Active Record 数据库连接。

# nhibernate - NHibernate：SaveOrUpdate - 子项重复键异常

> ID：11067194
> 
> 赞同：0
> 
> 时间：2012-06-16T21:34:04.833
> 
> 标签：nhibernate

我有一个我开发的 Web 应用程序，它有一个相当复杂的保存例程。用户构建和修改一系列计划，然后选择保存数据。此时所有的添加、删除和修改都被一次性保存（都在一个事务中）。

```
Plan
    Collection Of Child
        Collection of ChildDetail 
```

大部分保存是通过在计划对象上调用 SaveOrUpdate 并让此保存管理计划及其子项来执行的。当我想插入一条新记录时，我使用零作为未保存的值，并使用 cascade=all-delete-orphan 来确保如果在客户端删除了子对象或子详细信息对象，则该对象将被删除。

但是，当发生以下情况时，我收到一个异常：用户创建一个包含子对象的计划并保存它们。这会很好地保存。

```
Plan(id=0)
    Child[0](id=0), Child[1](id=0), Child[2](id=0) 
```

如果用户随后移除子对象，并在其位置添加新的子对象，然后尝试保存更改。

```
Plan(id=123)
    Child[0](id=0), Child[1](id=0), Child[2](id=0) 
```

这会引发 GenericAdoException 无法插入具有内部异常“SQL0803 Duplicate Key Value Specified”的 Child。

我正在寻找的行为是 NHibernate 删除以前的子对象，然后在计划上调用 SaveOrUpdate 时插入新的子对象。我怎样才能在让父母管理关系的同时实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:57:14.980

我暂时找到的一个解决方案是将已删除子项的 ID 传递给保存例程。然后，我将新孩子的 ID 设置为已移除孩子的 ID。有效地将删除/添加转换为更新。

# .net - 在 DBML 中使用 Linq to SQL 创建和插入临时表

> ID：11067196
> 
> 赞同：2
> 
> 时间：2012-06-16T21:34:47.943
> 
> 标签：.net, linq, sql-server-2008

我正在寻找创建临时表并使用 LINQ TO SQL .net 3.5

```
CREATE TABLE #InfoDetails
        (
            ID              INT NOT NULL,
            Detail          SMALLINT NOT NULL,
            PKeyID          BIGINT NOT NULL,
            HashValue           VARCHAR(128) NULL, 
            InfoErrors        XML NULL,
            ReasonCode              CHAR(2) NULL,
            ReasonCodeDes             VARCHAR(80) NULL
        ) 
```

在创建此临时表插入数据后，插入后我需要实现 SQLBULK 复制我不知道如何在 .net 3.5 LINQ TO SQL 中创建临时表插入数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:59:14.440

您不能使用 LINQ-to-SQL 插入临时表。但是你可以`DataContext.ExecuteCommand`用来执行任意 SQL 并以这种方式执行插入。

`SqlBulkCopy`您可以使用该类批量加载。

# assembly - 组装：遍历二叉搜索树

> ID：11067199
> 
> 赞同：0
> 
> 时间：2012-06-16T21:35:18.427
> 
> 标签：assembly, recursion, x86

我试图按顺序遍历二叉搜索树，并将数据（排序）放在一个数组中。由于某种原因，指向数组中当前位置的指针没有向右移动。

这是 DS 的声明：

```
TreeRoot    DWORD              Null (left child)
            DWORD   Null (right child)
            SDWORD   6 (numeric value) 
```

这是我正在尝试编写的函数：

```
TreeToArray PROC
    rootPtr=8;
    ArrayPtr=rootPtr+4;

    ;Saving the Registers 
    push ebp;
    mov ebp,esp;
    push esi;
    push edx;
    push ebx;
    push edi;
    push ecx;

Check:
    mov esi,rootPtr[ebp]; esi holds the current root
    mov edi, ArrayPtr[ebp] ;edi holds the pointer to the array
    cmp esi,Null ;if root=null
    je Done2;

LeftSubTree:
    push edi
    push BinTreeLeft[esi]
    call TreeToArray; recursive call for left sub tree

Visit:
    mov ebx,BinTreeValue[esi] ;getting the value of the node
    mov [edi],ebx
    add edi,4

RightSubTree:
    push edi
    push BinTreeRight[esi]
    call TreeToArray; recursive call for right sub tree

Done2:
    pop ecx;
    pop edi;
    pop ebx
    pop edx
    pop esi
    pop ebp
    ret 8;

TreeToArray ENDP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:16:32.497

您的代码现在看起来像这样（如果用 C 拼写）：

```
typedef struct tNode
{
  struct tNode* pLeftChild;
  struct tNode* pRightChild;
  int Value;
} tNode;

void TreeToArray(tNode* pNode, int* pArrayElement)
{
  if (pNode == NULL) return;

  TreeToArray(pNode->pLeftChild, pArrayElement);

  *pArrayElement = pNode->Value;
  pArrayElement++;

  TreeToArray(pNode->pRightChild, pArrayElement);
} 
```

只有在转到正确的子节点时才“移动”指针，而在返回父节点时忘记推进指针。

你想要做的是：

```
int* TreeToArray(tNode* pNode, int* pArrayElement)
{
  if (pNode == NULL) return pArrayElement;

  pArrayElement = TreeToArray(pNode->pLeftChild, pArrayElement);

  *pArrayElement = pNode->Value;
  pArrayElement++;

  pArrayElement = TreeToArray(pNode->pRightChild, pArrayElement);

  return pArrayElement;
} 
```

# wolfram-mathematica - Mathematica -- turning a list into a partition of element positions

> ID：11067204
> 
> 赞同：3
> 
> 时间：2012-06-16T21:36:01.733
> 
> 标签：wolfram-mathematica

I would like to make a function that takes in a list of integers and returns a partition of the indices of the list, based on the elements of the list.

For instance:

```
{1,3,3,7} --> { {1}, {2,3}, {4}}
{3,1,3} --> {{1,3}, {2}} 
```

I can think of messy ways to do this, but is there a natural way to do this in Mathematica?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:23:53.133

I would use:

```
indicies[x_] := Reap[MapIndexed[Sow[#2, #] &, x]][[2, All, All, 1]] 
```

This will be *much* faster than repeatedly using `Position`, on a long lists with many unique elements. Example:

```
list = RandomInteger[9999, 10000];

Timing[
  result1 =
    Function[x, (Flatten@Position[x, #] &) /@ DeleteDuplicates[x]]@list;
] 
```

> ```
> {3.463, Null} 
> ```

```
Timing[
  result2 = indicies @ list;
] 
```

> ```
> {0.031, Null} 
> ```

```
result1 === result2 
```

> ```
> True 
> ```

* * *

`TomD` suggested using the newer `GatherBy` in place of `Sow` and `Reap`. This is even faster on long lists with little repetition.

```
indicies2[x_] := GatherBy[List ~MapIndexed~ x, First][[All, All, 2, 1]]

list2 = RandomInteger[99999, 100000];

Do[indicies @ list2, {10}] // Timing
Do[indicies2 @ list2, {10}] // Timing 
```

> ```
> {5.523, Null}
> 
> {2.823, Null} 
> ```

Speed is more similar on lists with greater repetition:

```
list3 = RandomInteger[99, 100000];

Do[indicies @ list3, {10}] // Timing
Do[indicies2 @ list3, {10}] // Timing 
```

> ```
> {1.716, Null}
> 
> {1.607, Null} 
> ```

If going for pure speed one must recognize that `MapIndexed` is not optimized for packed arrays, therefore `Range` and `Transpose` will be considerably faster in that case:

```
indicies3[x_] := GatherBy[{x, Range@Length@x}\[Transpose], First][[All, All, 2]]

Do[indicies3 @ list2, {10}] // Timing 
```

> ```
> {1.981, Null} 
> ```

```
Do[indicies3@list3, {10}] // Timing  (* big difference here *) 
```

> ```
> {0.125, Null} 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:14:28.720

One possibility:

```
Function[x, (Flatten@Position[x, #] &) /@ DeleteDuplicates[x]]@{1, 3, 
  3, 7} 
```

giving

```
(*  {{1}, {2, 3}, {4}  *) 
```

Another example:

```
lst = {1, 3, 3, 3, 7, 4, 3};
Function[x, (Flatten@Position[x, #] &) /@ DeleteDuplicates[x]]@lst 
```

giving:

```
(*{{1}, {2, 3, 4, 7}, {5}, {6}}*) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:22:51.243

Yet another approach:

```
f[x_] := Flatten[x~Position~First@#] & /@ Gather@x 
```

# apache - mod_rewrite 规则不起作用

> ID：11067206
> 
> 赞同：0
> 
> 时间：2012-06-16T21:36:17.787
> 
> 标签：apache, .htaccess, mod-rewrite

我已经与我的虚拟主机联系过，他们在某种程度上没有帮助，所以我来到了这里的天才。

我无法通过 .htaccess 文件重写我网站上的任何 URL。

我只有一个 .htaccess 文件，它位于我的主目录的根目录中。这是那个文件：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

# The support guys thought it was in issue with the L flag below, so I commented out my original implementation and used their supplied one

#RewriteCond %{HTTP_HOST} ^www.mythofechelon.co.uk$ [NC]
#RewriteRule ^(.*)$ http://mythofechelon.co.uk/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^www\.(([a-z0-9_]+\.)?mythofechelon\.co.uk)$ [NC]
RewriteRule .? http://%1%{REQUEST_URI} [R=301,L]

RewriteRule ^/$ /main/pages/index.php?home
RewriteRule ^/home(.*)?$ /main/pages/index.php?home
RewriteRule ^/404(.*)?$ /main/pages/index.php?404

#I will eventually change the following commands to link to the rewritten URLs when this all eventually works
DirectoryIndex /main/pages/index.php?home
ErrorDocument 404 /main/pages/index.php?404

AddType application/x-shockwave-flash swf

Options All -Indexes

#Protect .htaccess
<files .htaccess>
    order allow,deny
    deny from all
</files>

<Files *.reg>
    ForceType application/pdf
    Header set Content-Disposition attachment
</Files>

#Block bots
<limit GET POST HEAD>
    Order Allow,Deny
    Allow from all
    Deny from env=bad_bot
</limit>

RewriteRule ^.* - [F,L]
RewriteCond %{HTTP_USER_AGENT} ^Anarchie [OR]
RewriteCond %{HTTP_USER_AGENT} ^ASPSeek [OR]
RewriteCond %{HTTP_USER_AGENT} ^attach [OR]
RewriteCond %{HTTP_USER_AGENT} ^autoemailspider [OR]
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot@yahoo.com [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Custo [OR] 
RewriteCond %{HTTP_USER_AGENT} ^DISCo [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Download\ Demon [OR] 
RewriteCond %{HTTP_USER_AGENT} ^eCatch [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EirGrabber [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EmailSiphon [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EmailWolf [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Express\ WebPictures [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ExtractorPro [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EyeNetIE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GetRight [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GrabNet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Grafula [OR] 
RewriteCond %{HTTP_USER_AGENT} ^HMView [OR] 
RewriteCond %{HTTP_USER_AGENT} HTTrack [NC,OR] 
RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [OR] 
RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR] 
RewriteCond %{HTTP_USER_AGENT} ^InterGET [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [OR] 
RewriteCond %{HTTP_USER_AGENT} ^JetCar [OR] 
RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^larbin [OR] 
RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Mass\ Downloader [OR] 
RewriteCond %{HTTP_USER_AGENT} ^MIDown\ tool [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Mister\ PiX [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Navroad [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NearSite [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetAnts [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetSpider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Net\ Vampire [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetZIP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Octopus [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Explorer [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Navigator [OR] 
RewriteCond %{HTTP_USER_AGENT} ^PageGrabber [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Papa\ Foto [OR] 
RewriteCond %{HTTP_USER_AGENT} ^pavuk [OR] 
RewriteCond %{HTTP_USER_AGENT} ^pcBrowser [OR] 
RewriteCond %{HTTP_USER_AGENT} ^RealDownload [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ReGet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SiteSnagger [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SmartDownload [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SuperBot [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SuperHTTP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Surfbot [OR] 
RewriteCond %{HTTP_USER_AGENT} ^tAkeOut [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Teleport\ Pro [OR] 
RewriteCond %{HTTP_USER_AGENT} ^VoidEYE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Web\ Image\ Collector [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Web\ Sucker [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebAuto [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebFetch [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebGo\ IS [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebLeacher [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebReaper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebSauger [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Website\ eXtractor [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebStripper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebWhacker [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebZIP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Wget [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Widow [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [OR]
RewriteCond %{HTTP_USER_AGENT} ^Xenu [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus.*Webster [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus 

SetEnvIfNoCase user-Agent ^FrontPage [NC,OR]
SetEnvIfNoCase user-Agent ^Java.* [NC,OR]
SetEnvIfNoCase user-Agent ^Microsoft.URL [NC,OR]
SetEnvIfNoCase user-Agent ^MSFrontPage [NC,OR]
SetEnvIfNoCase user-Agent ^Offline.Explorer [NC,OR]
SetEnvIfNoCase user-Agent ^[Ww]eb[Bb]andit [NC,OR]
SetEnvIfNoCase user-Agent ^Zeus [NC] 
```

（伙计，你们需要更改它，这样您就不必手动缩进每一行。）

我已独立确认：

*   该`DirectoryIndex`命令正常`DirectoryIndex /main/pages/index.php`工作。
*   显然，该`ErrorDocument 404`命令正在工作。
*   `DirectoryIndex`使用 PHP 变量链接到文件是有效的，因为and`ErrorDocument 404`命令的当前实现是有效的。
*   任何文件保护或机器人阻止命令都不是问题。
*   “www”不是问题。删除命令，因为我已经注释掉并完全删除了它们的所有尝试实现，但仍然存在相同的问题。

问题似乎完全在于`RewriteRule`命令。`RewriteEngine`至少在 .htaccess 中已启用并且`mod_rewrite`几天前在我重新启动我的站点之前正在工作。

我在想这可能是因为`RewriteRule`s 没有`RewriteCond`s，但是这些确切的命令几天前就可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:24:23.253

在您上面发布的 .htaccess 中，没有立即遵循以下规则的 RewriteRule ：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f 
```

因此它们将与下一个未注释的规则相结合，这些规则执行重定向但未定义应处理这些请求的文件：

```
RewriteCond %{HTTP_HOST} ^www\.(([a-z0-9_]+\.)?mythofechelon\.co.uk)$ [NC]
RewriteRule .? http://%1%{REQUEST_URI} [R=301,L] 
```

你会想要这样的东西：

```
# Strip www. from domain name 
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Send requests for non-existent files and directories to index.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^home/(.*)$ /main/pages/index.php?$1 [L] 
```

规则的顺序对于 mod_rewrite 是必不可少的。文件中出现问题的另一个示例是您尝试阻止不良机器人的部分。`RewriteRule`必须`RewriteCond`遵循规则。此外，您的限制部分实际上并没有做任何事情，因为关于机器人的规则都没有真正设置环境变量。

实际上还有另一个指令可以专门用于查看用户代理和设置环境变量：`BrowserMatch`和`BrowserMatchNoCase`- [http://httpd.apache.org/docs/2.2/mod/mod_setenvif.html#browsermatchnocase](http://httpd.apache.org/docs/2.2/mod/mod_setenvif.html#browsermatchnocase)。

我会用这样的东西替换坏机器人的行：

```
BrowserMatchNoCase Anarchie bad_bot 
```

然后将您的限制部分移到条目下方`BrowserMatchNoCase`- 否则可能尚未设置环境变量。

`SetEnvIfNoCase`此外，mod_rewrite 标志对条目无效。

**更新**

要处理 404，您可以添加以下内容：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^!home/(.*)$ /main/pages/index.php?404 [L] 
```

或者（**这就是我的建议**）您可以将 home 更改为 .*，然后更新您的 php 脚本以在适当的时候发送 404。

# java - 在 Java 中的 File 中指定相对路径

> ID：11067207
> 
> 赞同：0
> 
> 时间：2012-06-16T21:37:08.223
> 
> 标签：java, image

我正在使用 Spring 和 Hibernate 上传图像。我将图像保存在服务器上，如下所示。

```
File savedFile = new File("E:/Project/SpringHibernet/MultiplexTicketBooking/web/images/" + itemName);
item.write(savedFile); 
```

`itemName`解析请求后的图片文件名在哪里（ `enctype="multipart/form-data"`）。*但是，我*需要在`File`. 如下图所示。

```
File savedFile = new File("MultiplexTicketBooking/web/images/" + itemName);
item.write(savedFile); 
```

但它不起作用抛出`FileNotFoundException`. 有没有办法`File`在 Java 中指定相对路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:56:28.857

尝试从您的程序中打印工作目录。

```
String curDir = System.getProperty("user.dir"); 
```

为您获取该目录。然后检查该目录`MultiplexTicketBooking/web/images/`中是否存在目录。

数不清有多少次我弄错了我当前的目录并花了一些时间寻找我写过的文件......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T21:56:14.390

您可以使用以下命令获取项目的路径 -

```
File file = new File("");
System.out.println("" + file.getAbsolutePath()); 
```

因此，您可以拥有一个`constants`或一个`properties`文件，您可以在其中定义`MultiplexTicketBooking/web/images/`相对路径之后的路径。

您可以将路径附加到您从中获取的路径中`file.getAbsolutePath()`，这将是文件的真实路径。- `file.getAbsolutePath() + MultiplexTicketBooking/web/images/`。

确保项目路径之后的文件夹即`MultiplexTicketBooking/web/images/`存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T22:19:15.953

似乎服务器应该提供在方法[`getContextPath()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getContextPath%28%29)或[`getRealPath(String)`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29). 基于这些类型的服务器相关和可重现的路径来构建路径是很常见的。不要使用在服务器中几乎*没有*`user.dir`意义的东西。

## 更新

```
ServletContext sc=request.getSession().getServletContext(); 
File savedFile = new File(sc.getRealPath("images")+"\\" + itemName); 
```

而不是使用`"\\"`我倾向于用以下内容替换它，这将导致为每个平台使用正确的文件分隔符。当客户端决定将基于 MS/ISS 的服务器换成 Linux/Tomcat 堆栈时，保持跨平台兼容性。;)

```
File savedFile = new File(sc.getRealPath("images"), itemName); //note the ',' 
```

详情请参阅[`File(String,String)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T21:54:52.150

您可以使用 指定绝对路径和相对路径`File`。`FileNotFoundException`可以抛出，因为文件夹可能在那里。尝试`mkdirs()`首先使用该方法创建所需的文件夹结构，以便将文件保存在您尝试保存的位置。

# arrays - 排序：如何对包含 3 种数字的数组进行排序

> ID：11067209
> 
> 赞同：13
> 
> 时间：2012-06-16T21:37:20.063
> 
> 标签：arrays, algorithm, sorting, language-agnostic, pseudocode

例如：`int A[] = {3,2,1,2,3,2,1,3,1,2,3};`

如何有效地对该数组进行排序？

这是一个工作面试，我只需要一个伪代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T21:52:54.003

如何对其进行排序的有希望的方法似乎是**[计数排序](http://en.wikipedia.org/wiki/Counting_sort)**。值得一看 Richard Buckland 的[这个讲座](http://www.youtube.com/watch?v=3mxp4JLGasE)，尤其是 15:20 的部分。

类似于计数排序，但更好的是创建一个表示域的数组，将其所有元素初始化为 0，然后遍历您的数组并计算这些值。一旦知道了域值的这些计数，就可以相应地重写数组的值。这种算法的复杂性是 O(n)。

这是具有我描述的行为的 C++ 代码。它的复杂度实际上是 O(2n) 虽然：

```
int A[] = {3,2,1,2,3,2,1,3,1,2,3};
int domain[4] = {0};

// count occurrences of domain values - O(n):  
int size = sizeof(A) / sizeof(int);
for (int i = 0; i < size; ++i)
    domain[A[i]]++;

// rewrite values of the array A accordingly - O(n):    
for (int k = 0, i = 1; i < 4; ++i)
    for (int j = 0; j < domain[i]; ++j)
        A[k++] = i; 
```

请注意，如果域值之间存在很大差异，则将域存储为数组是低效的。在这种情况下，最好使用 map （感谢[abhinav](https://stackoverflow.com/users/190041/abhinav)指出）。这是`std::map`用于存储域值的 C++ 代码 - 出现次数对：

```
int A[] = {2000,10000,7,10000,10000,2000,10000,7,7,10000};
std::map<int, int> domain;

// count occurrences of domain values:  
int size = sizeof(A) / sizeof(int);
for (int i = 0; i < size; ++i)
{
    std::map<int, int>::iterator keyItr = domain.lower_bound(A[i]);
    if (keyItr != domain.end() && !domain.key_comp()(A[i], keyItr->first))
        keyItr->second++; // next occurrence 
    else
        domain.insert(keyItr, std::pair<int,int>(A[i],1)); // first occurrence
}

// rewrite values of the array A accordingly:    
int k = 0;
for (auto i = domain.begin(); i != domain.end(); ++i)
    for (int j = 0; j < i->second; ++j)
        A[k++] = i->first; 
```

（如果有办法`std::map`在上面的代码中更有效地使用，请告诉我）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T15:04:14.717

它是计算机科学中的一个标准问题：[荷兰国旗问题](http://en.wikipedia.org/wiki/Dutch_national_flag_problem) 见链接。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T21:46:04.567

计算每个数字，然后根据它们的计数创建新数组...时间复杂度 O(n)

```
 int counts[3] = {0,0,0};
 for(int a in A)
  counts[a-1]++;
 for(int i = 0; i < counts[0]; i++)
  A[i] = 1;
 for(int i = counts[0]; i < counts[0] + counts[1]; i++)
  A[i] = 2;
 for(int i = counts[0] + counts[1]; i < counts[0] + counts[1] + counts[2]; i++)
  A[i] = 3; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-16T21:42:45.357

我认为这个问题是打算让你使用[bucket sort](http://en.wikipedia.org/wiki/Bucket_sort)。在有少量值的情况下，桶排序可以比更常用的快速排序或合并排序快得多。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-16T21:52:09.967

正如罗伯特提到的篮子排序（或桶排序）在这种情况下是最好的。

我还将添加下一个算法（它实际上与 busket 排序非常相似）：

*[伪代码是java风格]*

创建一个`HashMap<Integer, Interger> map`并循环遍历您的数组：

```
for (Integer i : array) {
    Integer value = map.get(i);
    if (value == null) {
        map.put(i, 1);
    } else {
        map.put(i, value + 1);
    }
 } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-16T22:32:42.040

问题描述：你有n个桶，每个桶包含一个硬币，硬币的价值可以是5或10或20。在这个限制下你必须对桶进行排序：1。你只能使用这2个功能：SwitchBaskets（Basket1 , Basket2) – 切换 2 个篮子 GetCoinValue (Basket1) – 返回选定篮子中的硬币值 2\. 你不能定义大小为 n 的数组 3\. 尽量少使用 switch 函数。

我的简单伪代码解决方案，可以用任何 O(n) 复杂度的语言实现。

我将从篮子中挑选硬币 1）如果是 5 - 将其推为第一个，2）如果是 20- 将其推为最后一个，3）如果是 10 - 将其留在原处。4) 并查看排队的下一个桶。

**编辑：** *如果你不能将元素推到第一个或最后一个位置*，那么[合并排序](http://en.wikipedia.org/wiki/Sorting_algorithm)将是盗版实现的理想选择。以下是它的工作原理：

合并排序利用了将已排序列表合并到新排序列表中的便利性。它首先比较每两个元素（即，1 与 2，然后 3 与 4...），如果第一个应该在第二个之后，则交换它们。然后，它将结果列表中的每一个 2 合并为 4 列表，然后合并这些 4 列表，依此类推；直到最后两个列表合并到最终的排序列表中。在这里描述的算法中，这是第一个可以很好地扩展到非常大的列表的算法，因为它的最坏情况运行时间是 O(n log n)。合并排序最近在实际实现中流行起来，被用于编程语言中的标准排序例程

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-19T21:01:52.020

我想我理解这个问题 - 你只能使用 O(1) 空间，你只能通过交换单元格来更改数组。（因此您可以在数组上使用 2 个操作 - 交换和获取）

我的解决方案：

使用 2 个索引指针 - 一个用于最后 1 的位置，一个用于最后 2 的位置。

在阶段 i，您假设数组已从 1 排序到 i-1，然后检查第 i 个单元格：如果 A[i] == 3，您什么也不做。如果 A[i] == 2 您将其与最后 2 个索引之后的单元格交换。如果 A[i] == 1 您将其与最后 2 个索引之后的单元格交换，然后将最后 2 个索引（包含 1）之后的单元格与最后 1 个索引之后的单元格交换。

这是主要思想，您需要注意小细节。总体 O(n) 复杂度。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-22T17:27:08.723

这是基于@ElYusubov 的常规解决方案，但不是将 Bucket(5) 推到开始并将 Bucket(15) 推到结束。使用筛选，使 5 向开始移动，15 向结束移动。

每当我们将存储桶从 end 位置交换到当前位置时，我们都会减少 end，不要增加当前计数器，因为我们需要再次检查元素。

```
array = [15,5,10,5,10,10,15,5,15,10,5]

    def swapBucket(int a, int b) {

        if (a == b) return; 
        array[a] = array[a] + array[b]
        array[b] = array[a] - array[b]
        array[a] = array[a] - array[b]

    }

def getBucketValue(int a) {
    return array[a];
}

def start = 0, end = array.size() -1, counter = 0;
// we can probably do away with this start,end but it helps when already sorted.

// start - first bucket from left which is not 5
while (start < end) {

    if (getBucketValue(start) != 5) break;
    start++;

}     

// end - first bucket from right whichis not 15
while (end > start) {

    if (getBucketValue(end) != 15) break;
    end--;

}

// already sorted when end = 1 { 1...size-1 are Buck(15) } or start = end-1      

for (counter = start; counter < end;) {

    def value = getBucketValue(counter)

    if (value == 5) { swapBucket(start, counter); start++; counter++;}
    else if (value == 15) { swapBucket(end, counter); end--; } // do not inc counter
    else { counter++; }

}

for (key in array) { print " ${key} " } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-16T21:44:59.733

例如，您是否尝试过查看 wiki？- [http://en.wikipedia.org/wiki/Sorting_algorithm](http://en.wikipedia.org/wiki/Sorting_algorithm)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-16T21:53:57.203

此代码适用于 c#：

但是，您必须考虑以非语言/框架特定的方式实现它的算法。正如所建议的那样， [Bucket set](http://en.wikipedia.org/wiki/Bucket_sort)可能是最有效的方法。如果您提供有关问题的详细信息，我会尝试寻找最佳解决方案。祝你好运...

这是 C# .NET 中的代码示例

```
int[] intArray = new int[9] {3,2,1,2,3,2,1,3,1 };
Array.Sort(intArray);
// write array
foreach (int i in intArray) Console.Write("{0}, ", i.ToString()); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-21T12:59:42.050

正如 ElYusubub 所建议的那样，只是为了好玩，以下是您将如何实现“将值推送到远端”的方法：

```
sort(array) {
  a = 0
  b = array.length
  # a is the first item which isn't a 1 
  while array[a] == 1
    a++
  # b is the last item which isn't a 3
  while array[b] == 3
    b--

  # go over all the items from the first non-1 to the last non-3
  for (i = a; i <= b; i++)
    # the while loop is because the swap could result in a 3 or a 1
    while array[i] != 2
      if array[i] == 1
        swap(i, a)
        while array[a] == 1
          a++
      else # array[i] == 3
        swap(i, b)
        while array[b] == 3
          b-- 
```

这实际上可能是一个最佳解决方案。我不知道。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-07-01T07:44:59.810

这可以很容易地使用-->

> 荷兰国旗算法 [http://www.csse.monash.edu.au/~lloyd/tildeAlgDS/Sort/Flag/](http://www.csse.monash.edu.au/~lloyd/tildeAlgDS/Sort/Flag/)

而不是使用 1,2,3 将其视为 0,1,2

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-28T14:14:39.853

让我们打破数组中只有两个数字的问题。[1,2,1,2,2,2,1,1]

如果：我们从左右两个指针开始，直到它们相遇。如果左元素更大，则将左元素与右元素交换。（升序）

我们可以为三个数字再做一遍（k-1遍）。在第一个通道中，我们将 1 移到了它们的最终位置，在第 2 通道中，我们将 2 移到了它们的最终位置。

```
def start = 0, end = array.size() - 1;

// Pass 1, move lowest order element (1) to their final position 
while (start < end) {
    // first element from left which is not 1
    for ( ; Array[start] ==  1 && start < end ; start++);
    // first element from right which IS 1
    for ( ; Array[end] != 1 && start < end ; end--);

    if (start < end) swap(start, end);
}     

// In second pass we can do 10,15

// We can extend this using recurion, for sorting domain = k, we need k-1 recurions 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-08-06T04:51:59.167

```
def DNF(input,length):
    high = length - 1
    p = 0
    i = 0
    while i <= high:
            if input[i] == 0:
                    input[i],input[p]=input[p],input[i]
                    p = p+1
                    i = i+1
            elif input[i] == 2:
                    input[i],input[high]=input[high],input[i]
                    high = high-1
            else:
                    i = i+1
input = [0,1,2,2,1,0]
print "input: ", input
DNF(input,len(input))
print "output: ", input 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-11T16:26:10.060

我会在这里使用递归方法

```
fun sortNums(smallestIndex,largestIndex,array,currentIndex){
if(currentIndex >= array.size)
   return
if (array[currentIndex] == 1){
You have found the smallest element, now increase the smallestIndex
//You need to put this element to left side of the array at the smallestIndex position.
//You can simply swap(smallestIndex, currentIndex)
// The catch here is you should not swap it if it's already on the left side
//recursive call
sortNums(smallestIndex,largestIndex,array,currentIndex or currentIndex+1)// Now the task of incrementing current Index in recursive call depends on the element at currentIndex. if it's 3, then you might want to let the fate of currentIndex decided by recursive function else simply increment by 1 and move further
} else if (array[currentInde]==3){
// same logic but you need to add it at end
}
} 
```

您可以通过 sortNums(smallestIndex=-1,largestIndex=array.size,array,currentIndex=0) 启动递归函数

你可以在这里找到示例代码 [代码链接](https://leetcode.com/problems/sort-colors/discuss/402610/Recursive-solution-in-Kotlin)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2012-07-05T13:36:21.960

```
//Bubble sort for unsorted array - algorithm
public void  bubleSort(int arr[], int n) { //n is the length of an array
    int temp;
    for(int i = 0; i <= n-2; i++){
        for(int j = 0; j <= (n-2-i); j++){
            if(arr[j] > arr[j +1]){
                temp = arr[j];
                arr[j] = arr[j +1];
                arr[j + 1] = temp;

            }
        }

    } 
```

# python - 用python中的列表理解减少

> ID：11067210
> 
> 赞同：2
> 
> 时间：2012-06-16T21:37:20.937
> 
> 标签：python, for-loop, nested, list-comprehension, reduce

有没有更好的方法来编写以下 for 循环？

```
my_list = []
for key in my_set_of_keys:
    for val1,val2 in my_dict[key]:
        my_list.append((key,val2,val1)) 
```

我的尝试可能......有点漫无边际......

```
my_list = list(chain.from_iterable(map(
    lambda key: [(key,val2,val1) for (val1,val2) in my_dict[key]],
    my_set_of_keys)))

my_list = reduce(lambda x,y: x+y,(map(
    lambda key: [(key,val2,val1) for (val1,val2) in my_dict[key]],
    my_set_of_keys)))

my_list = reduce(list.__add__, (map(
    lambda key: [(key,val2,val1) for (val1,val2) in my_dict[key]],
    my_set_of_keys))) 
```

my_dict 看起来像这样：

```
'keyA' : { ('foo',1), ('bar',2), ('baz',3) }
'keyB' : { ... } 
```

my_set_of_keys：

```
{ 'keyA', 'keyC', ... } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T21:39:20.500

这可能对您有用：

```
my_list = [(key, v2, v1) for key in my_set_of_keys for v1, v2 in my_dict[key]] 
```

# perl - 模板工具包和懒惰的 Moose 属性 - 如何使它们表现得很好？

> ID：11067213
> 
> 赞同：6
> 
> 时间：2012-06-16T21:38:06.257
> 
> 标签：perl, moose, template-toolkit

如果我使用 Moose 在 perl 类中声明惰性属性，并且该属性正在使用构建器：

```
has 'colors' => (
  is => 'rw',
  isa => 'ArrayRef',
  lazy => 1,
  builder => '_build_colors',
); 
```

然后在 Template::Toolkit 模板中我会尝试使用这个属性：

```
[% FOREACH color IN colors %]
...
[% END %] 
```

我什么也得不到。在使用 TT 处理属性之前，我必须在 perl 脚本中手动调用这个 attr。TT有什么办法可以自己初始化这个attr？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T23:08:51.477

我假设您正在像这样传递 Moose 对象。

```
$template->process('some.tt', $moose_object, ... ); 
```

第二个参数被假定为一个 hashref，而不是任何类型的祝福对象（Moose 与否）。

因此，Moose 对象被视为普通哈希，并且在您通过调用 Template Toolkit 外部的访问器来填充它之前没有“colors”键。

你需要做这样的事情：

```
$template->process('some.tt', { obj => $moose_object }, ... ); 
```

然后在您的模板中：

```
[% FOREACH color IN obj.colors %]
...
[% END %] 
```

哪个应该像您期望的那样工作。

# r - R中的“反转”数据组织（不是转置）

> ID：11067216
> 
> 赞同：-1
> 
> 时间：2012-06-16T21:38:25.223
> 
> 标签：r

这是我的数据框的示例列，RR 是标题：

```
RR
Cvv  
Cvv  
Caa 
```

我需要的是“反转”数据，以便将子字符串 vv 和 aa 作为标题，并在数据帧中获取 RR。结果矩阵将是：

```
vv  | aa  
CRR |  
CRR |  
    | CRR 
```

所以我们在两个矩阵中得到了相同的关系。在第一行和第二行，vv 与 RR 耦合。在第三行，aa 与 RR 耦合。

这可以用 R 实现吗？有任何想法吗 ？

感谢您的关注！

在上面的示例中，我过度简化了我的数据。所以这是我的实际数据集的示例：

```
> dput(head(A1F[4:15],n=20))
structure(list(RR = structure(c(15L, 15L, 15L, 27L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("", 
" ", "Caa", "Caj", "Cbb", "Cbb ", "Cbv", "Cja", "Cjr", "Crj", 
"Crr", "Crv", "Cvb", "Cvr", "Cvv", "Gaa", "Gaj", "Gbb", "Gbv", 
"Gja", "Gjr", "Grj", "Grr", "Grv", "Gvb", "Gvr", "Gvv"), class = "factor"), 
    AA = structure(c(13L, 13L, 13L, 1L, 1L, 1L, 1L, 15L, 27L, 
    27L, 27L, 27L, 27L, 27L, 27L, 27L, 27L, 27L, 27L, 1L), .Label = c("", 
    "Caa", "Caj", "Car", "Cbb", "Cbv", "Cja", "Cjr", "Cjr ", 
    "Crj", "Crr", "Crv", "Cvb", "Cvr", "Cvv", "Gaa", "Gaj", "Gbb", 
    "Gbv", "Gja", "Gjr", "Grj", "Grr", "Grv", "Gvb", "Gvr", "Gvv"
    ), class = "factor"), BB = structure(c(9L, 9L, 9L, 9L, 9L, 
    9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L
    ), .Label = c("", "?", "Caa", "Caj", "Cbv", "Cja", "Cjr", 
    "Crj", "Crr", "Crv", "Cvb", "Cvr", "Cvv", "Gaa", "Gaj", "Gbv", 
    "Gja", "Gjr", "Grj", "Grr", "Grv", "Gvb", "Gvr", "Gvv"), class = "factor"), 
    VV = structure(c(8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
    8L, 1L, 1L, 16L, 16L, 16L, 16L, 16L, 16L, 16L), .Label = c("", 
    " ", "Caa", "Caj", "Caj+", "Cbb", "Cbv", "Cja", "Cjr", "Crv", 
    "Cvb", "Cvr", "Cvv", "Gaa", "Gbb", "Gja", "Gjr", "Grv", "Gvb", 
    "Gvr"), class = "factor"), RJ = structure(c(8L, 3L, 3L, 1L, 
    1L, 12L, 12L, 12L, 12L, 12L, 1L, 12L, 12L, 12L, 12L, 12L, 
    12L, 12L, 12L, 12L), .Label = c("", "Caa", "Caj", "Cbv", 
    "Ccrj", "Cja", "Cjr", "Crj", "Crj ", "Crr", "Crv", "Cvr", 
    "Cvv", "Gaa", "Gaj", "Gbv", "Gja", "Gjr", "Grj", "Grr", "Grv", 
    "Gvr", "Gvv"), class = "factor"), JR = structure(c(7L, 7L, 
    18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 
    18L, 18L, 18L, 18L, 18L, 18L), .Label = c("", "Caa", "Caj", 
    "Cbv", "Cja", "Cjr", "Crj", "Crr", "Crv", "Cvb", "Cvr", "Cvv", 
    "Gaa", "Gaj", "Gbv", "Gja", "Gjr", "Grj", "Grr", "Grv", "Grv ", 
    "Gvb", "Gvb ", "Gvr", "Gvv"), class = "factor"), BV = structure(c(4L, 
    4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L, 4L), .Label = c("", "Caa", "Caj", "Cbb", "Cbv", 
    "Cja", "Cjr", "Crj", "Crr", "Crv", "Cvb", "Cvr", "Cvv", "Gaa", 
    "Gaj", "Gbb", "Gbv", "Gja", "Gjr", "Grj", "Grv", "Gvb", "Gvr", 
    "Gvv", "R"), class = "factor"), VB = structure(c(1L, 1L, 
7L, 7L, 18L, 18L, 1L, 1L, 10L, 10L, 21L, 21L, 21L, 1L, 21L, 
21L, 21L, 21L, 21L, 1L), .Label = c("", "Caa", "Caj", "Cbb", 
"Cbv", "Cja", "Cjr", "Crj", "Crr", "Crv", "Cvb", "Cvv", "Gaa", 
"Gaj", "Gbb", "Gbv", "Gja", "Gjr", "Grj", "Grr", "Grv", "Gvb", 
"Gvr", "Gvv"), class = "factor"), AJ = structure(c(2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 1L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 10L, 
1L, 10L, 10L), .Label = c("", "Caa", "Caj", "Cbb", "Cbv", 
"Cja", "Cjr", "Crj", "Crv", "Cvb", "Cvr", "Cvv", "Gaa", "Gaj", 
"Gbb", "Gbv", "Gja", "Gjr", "Grj", "Grj ", "Grr", "Grv", 
"Gvb", "Gvr", "Gvv"), class = "factor"), JA = structure(c(10L, 
10L, 10L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 6L, 6L, 6L, 6L), .Label = c("", "Caa", "Caj", "Cbv", 
"Cja", "Cjr", "Crr", "Crv", "Cvb", "Cvr", "Cvv", "Gaa", "Gaj", 
"Gbv", "Gja", "Gjr", "Grr", "Grv", "Gvb", "Gvv"), class = "factor"), 
VR = structure(c(1L, 5L, 5L, 5L, 16L, 16L, 16L, 16L, 16L, 
16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L), .Label = c("", 
"Caa", "Caj", "Caj ", "Cbv", "Cja", "Cjr", "Crj", "Crr", 
"Crv", "Cvb", "Cvr", "Cvv", "Gaa", "Gaj", "Gbv", "Gja", "Gjr", 
"Grj", "Grr", "Grv", "Gvb", "Gvr", "Gvv"), class = "factor"), 
RV = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
15L, 15L, 15L, 15L, 15L, 15L, 15L, 15L, 1L, 1L), .Label = c("", 
"Caa", "Caj", "Cbb", "Cbv", "Cja", "Cjr", "Crj", "Crr", "Crv", 
"Cvr", "Cvv", "Cvv ", "Gaa", "Gaj", "Gbb", "Gbv", "Gja", 
"Gjr", "Grj", "Grr", "Grv", "Gvr", "Gvv"), class = "factor")), .Names = c("RR", 
"AA", "BB", "VV", "RJ", "JR", "BV", "VB", "AJ", "JA", "VR", "RV"
), row.names = c(NA, 20L), class = "data.frame") 
```

如上所述，所需的矩阵将保持关系和行顺序。GSee 提供了一个我可以应用的答案，但仅适用于我的矩阵的一列，因为 [[ 仅选择特定条目并使用 [ 选择多个条目不起作用。我不确定我是否朝着正确的方向前进......

根据实际数据集（如上），这是所需输出（前三行）的样子：

```
structure(list(vv = structure(c(1L, 1L, 1L), .Label = "CRR", class = "factor"), 
    rv = c(NA, NA, NA), ja = structure(c(1L, 1L, 1L), .Label = "CVV", class = "factor"), 
    aa = structure(c(1L, 1L, 1L), .Label = "CAJ", class = "factor"), 
    bv = structure(c(1L, 2L, 2L), .Label = c("", "CVR"), class = "factor"), 
    aj = structure(c(1L, 2L, 2L), .Label = c("", "CRJ"), class = "factor"), 
    vb = structure(c(1L, 1L, 1L), .Label = "CAA", class = "factor"), 
    rj = structure(c(2L, 1L, 1L), .Label = c("", "CRJ"), class = "factor"), 
    rr = structure(c(1L, 1L, 1L), .Label = "CBB", class = "factor"), 
    vr = structure(c(1L, 1L, 1L), .Label = "CJA", class = "factor"), 
    bb = structure(c(1L, 1L, 1L), .Label = "CBV", class = "factor"), 
    jr = c(NA, NA, NA)), .Names = c("vv", "rv", "ja", "aa", "bv", 
"aj", "vb", "rj", "rr", "vr", "bb", "jr"), class = "data.frame", row.names = c(NA, 
-3L)) 
```

我希望这更有意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T22:17:37.920

这有点硬编码，但想法就在那里。

```
require(stringr)
require(plyr)
vect <- data.frame(RR=c("Cvv", "Cvv", "Caa"))
theMat <- t(adply(levels(vect$RR), .margins=1, .fun=function(x){str_extract(string=vect$RR, pattern=x)}))[-1 ,]
colnames(theMat) <- levels(vect$RR)
colnames(theMat) <- str_sub(colnames(theMat), start=2, end=3)
theMat <- str_replace(string=theMat, pattern=paste(colnames(theMat), collapse="|"), replacement="RR") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T04:13:18.843

好吧。我是codez 4 u。

```
#dat is the data.frame that was created from the `dput` output in the question
m <- as.matrix(dat) #convert to matrix
m[10, "AJ"] <- "" # Fix the typo/error in your data 
```

找到输出矩阵的名称，并制作矩阵（现在用 NA 填充）

```
ocn <- unique(substr(paste(m[m!=""]), 2, 3)) #out column names
out <- matrix(NA, nrow(m), length(ocn))
colnames(out) <- ocn 
```

循环遍历每一列的每一行

```
for (i in seq_len(NCOL(m))) { #for each column
  cn <- colnames(m)[i] #this will become the second 2 characters of new value
  for (j in seq_along(m[, i])) { # for each row of this column
    if (nzchar(m[j, i])) { # if there is something there (i.e. it is not "")
      # do the substitution
      out[j, substr(m[j, i], 2, 3)] <- paste0(substr(m[j, i], 1, 1), cn)   
    }
  }
}
out
#      vv    vb    rr    ja    rj    aj    vr    bb    jr    rv    aa    bv   
# [1,] "CRR" "CAA" "CBB" "CVV" "CJR" NA    "CJA" "CBV" NA    NA    "CAJ" NA   
# [2,] "CRR" "CAA" "CBB" "CVV" "CJR" "CRJ" "CJA" "CBV" NA    NA    "CAJ" "CVR"
# [3,] "CRR" "CAA" "CBB" "CVV" "GJR" "CRJ" "CJA" "CBV" "CVB" NA    "CAJ" "CVR"
# [4,] "GRR" NA    "CBB" "CVV" "GJR" NA    NA    "CBV" "CVB" NA    "CAJ" "CVR"
# [5,] NA    NA    "CBB" "CVV" "GJR" NA    NA    "CBV" "GVB" NA    "CAJ" "GVR"
# [6,] NA    NA    "CBB" "CVV" "GJR" NA    "CRJ" "CBV" "GVB" NA    "CAJ" "GVR"
# [7,] NA    NA    "CBB" "CVV" "GJR" NA    "CRJ" "CBV" NA    NA    "CAJ" "GVR"
# [8,] "CAA" NA    "CBB" "CVV" "GJR" NA    "CRJ" "CBV" NA    NA    "CAJ" "GVR"
# [9,] "GAA" NA    "CBB" "CVV" "GJR" "CRV" "CRJ" "CBV" NA    "CVB" NA    "GVR"
# [10,] "GAA" NA    "CBB" "CVV" "GJR" "CRV" "CRJ" "CBV" NA    "CVB" NA    "GVR"
# [11,] "GAA" NA    "CBB" "CVV" "GJR" "GRV" NA    "CBV" NA    "GVB" NA    "GVR"
# [12,] "GAA" NA    "CBB" NA    "GJR" "GRV" "CRJ" "CBV" NA    "GVB" NA    "GVR"
# [13,] "GAA" NA    "CBB" NA    "GJR" "GRV" "CRJ" "CBV" NA    "GVB" NA    "GVR"
# [14,] "GAA" NA    "CBB" "GVV" "GJR" "GRV" "CRJ" "CBV" NA    NA    NA    "GVR"
# [15,] "GAA" NA    "CBB" "GVV" "GJR" "GRV" "CRJ" "CBV" NA    "GVB" NA    "GVR"
# [16,] "GAA" NA    "CBB" "GVV" "GJR" "GRV" "CRJ" "CBV" NA    "GVB" NA    "GVR"
# [17,] "GAA" "CAJ" "CBB" "GVV" "GJR" "GRV" "CRJ" "CBV" "CJA" "GVB" NA    "GVR"
# [18,] "GAA" NA    "CBB" "GVV" "GJR" "GRV" "CRJ" "CBV" "CJA" "GVB" NA    "GVR"
# [19,] "GAA" "CAJ" "CBB" "GVV" "GJR" NA    "CRJ" "CBV" "CJA" "GVB" NA    "GVR"
# [20,] NA    "CAJ" "CBB" "GVV" "GJR" NA    "CRJ" "CBV" "CJA" NA    NA    "GVR" 
```

# asynchronous - clojure 中 Web 响应的异步合并

> ID：11067217
> 
> 赞同：3
> 
> 时间：2012-06-16T21:38:35.647
> 
> 标签：asynchronous, clojure

我正在尝试编写一段代码：

*   通过一些请求访问 2 web 服务
*   响应将是对象序列，每个对象由 id 标识，响应按 ID 升序排序
*   响应将很大并且流式传输（或 gzip 分块）
*   结果将是基于 ID 合并来自两个输入的数据

我试图实现的是，一旦响应的相应部分可用，就应该写出输出。我也不想等待整个响应到位，因为这会耗尽内存。我想尽快开始流式输出，并尽可能少地保留内存。

什么是开始的好方法？

我看过 aleph 和 lamina，还有 async.http.client。这些工具似乎可以帮助我，但我很难弄清楚如何让一段代码对来自两个 Web 服务的相同部分的响应做出反应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T06:50:20.207

你可以做这样的事情（使用 aleph - 在引擎盖下使用层通道抽象）。

*   用于`sync-http-request`创建2个http请求
*   `:body`从上面创建的 2 个请求对象中获取。例如：在[https://github.com/ztellman/aleph/wiki/Consuming-and-Broadcasting-a-Twitter-Stream](https://github.com/ztellman/aleph/wiki/Consuming-and-Broadcasting-a-Twitter-Stream)
*   是`:body`一个lamina通道，使用lamina`join`方法将2个通道合并为一个通道
*   订阅上述频道（这是`join`调用的结果）。

现在，订阅回调将在每个 JSON 对象到达任一通道后立即接收它，并且您可以拥有一个本地`atom`映射，其中键是您想要组合来自 2 个通道和值的结果的值是一个向量，它将存储相同键的值。所以这将是这样的：

*   在回调中接收项目时，检查本地`atom`地图是否已经有密钥
*   如果 key 已经存在，则对 key 的 2 个项目（一个已经在地图中，另一个是您刚刚收到的）存储或进行其他处理，然后从地图中删除该 key。
*   如果 key 不存在，则创建 key 和 value，`[item]`即现在正在接收的一项的向量。

# php - （嵌套 MySQL 语句）是否可以用一个 SQL 查询来实现？有什么改进吗？

> ID：11067220
> 
> 赞同：0
> 
> 时间：2012-06-16T21:39:06.363
> 
> 标签：php, mysql, sql

是否可以使用一个 SQL 查询来实现？有什么改进吗？

```
$query = mysql_query("SELECT id, name FROM fruits WHERE `group`=''");

if ($query) {
    while ($row = mysql_fetch_array($query, MYSQL_ASSOC)) {
        echo $row['name'];

        $query2   = mysql_query("SELECT name FROM fruits WHERE `group`='{$row['id']}'");

        if (mysql_num_rows($query2)) {
            echo ':';

            while ($row2 = mysql_fetch_array($query2, MYSQL_ASSOC)) {
                echo ' '. $row2['name'] . ',';
            }
            mysql_free_result($query2);

            echo '<br>';
        }
    }
    mysql_free_result($query);
} 
```

结果：

```
Berries: blueberry, raspberry, strawberry,
Citrus: grapefruit, lime,
Pear 
```

数据库结构`SELECT * FROM fruits`：

```
id   | group | name
-------------------------
03E7 |       | Berries
0618 | 03E7  | blueberry
051B | 03E7  | raspberry
02AA | 03E7  | strawberry
035F |       | Citrus
07A5 | 035F  | grapefruit
0633 | 035F  | lime
05E1 |       | Pear 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T21:44:39.140

```
SELECT a.name as group_name, b.name as item_name
FROM fruits a
LEFT JOIN fruits b
ON b.`group` = a.id
WHERE a.`group` = '' 
```

将为您提供一组看起来像...的结果行

```
group_name   item_name
----------------------
Berries      blueberry
Berries      raspberry
...          ...
Citrus       grapefruit
Citrus       lime
...          ...
Pear         NULL 
```

然后，您可以在代码中处理它以生成您想要的任何最终输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:25:43.053

完整的工作示例：

```
<?php

header("Content-Type: text/plain");

$con = mysql_connect("localhost", "root", "");
mysql_select_db("test");

$query = mysql_query("SELECT a.name as `group`, GROUP_CONCAT(b.name ORDER BY b.name SEPARATOR ', ') as name FROM fruits a LEFT JOIN fruits b ON b.`group` = a.id WHERE a.`group` = '' GROUP BY a.name");

if ($query) {
    while ($row = mysql_fetch_array($query)) {
        $group = $row['group'];
        $name  = $row['name'];

        if (isset($name)) {
            echo $group . ': ' . $name . "\n";
        } else  {
            echo $group . "\n";
        }
    }
    mysql_free_result($query);
}
mysql_close($con);

?> 
```

结果：

```
Berries: blueberry, raspberry, strawberry
Citrus: grapefruit, lime
Pear 
```

# c# - 在使用 Union 表达式之前，我应该如何初始化 IQueryable 变量？

> ID：11067226
> 
> 赞同：6
> 
> 时间：2012-06-16T21:39:51.887
> 
> 标签：c#, linq, iqueryable

我在 IQueryable 类型上创建了一个扩展方法，它采用实体子集并根据一些标准过滤它们。我的问题是我不能返回一个由变量组成的联合表达式，而不是先初始化所有变量。如前所述，空值无效。

```
public static IQueryable<Person> FilterHairColors(this IQueryable<Person> subQuery, string[] hairColors)
    {
        IQueryable<Person> q1 = null;
        IQueryable<Person> q2 = null;
        IQueryable<Person> q3 = null;
        IQueryable<Person> q4 = null;

        foreach (var value in hairColors)
        {
            switch (value)
            {
                case "1":
                    q1 = subQuery.Where(p => p.HairColor_bright == true);
                    break;
                case "2":
                    q2 = subQuery.Where(p => p.HairColor_brown == true);
                    break;
                case "3":
                    q3 = subQuery.Where(p => p.HairColor_dark == true);
                    break;
                case "4":
                    q4 = subQuery.Where(p => p.HairColor_red == true);
                    break;
            }
        }
        return q1.AsQueryable().Union(q2.AsQueryable()).Union(q3.AsQueryable()).Union(q4.AsQueryable());
    } 
```

呈现的代码块是多个代码块的一部分，每个代码块都会产生一个数据子集，以这种方式传送到后续过滤方法：

```
results = persons.FilterGender(vm.gender).FilterAge(vm.age).FilterHeight(vm.height)...... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:52:32.480

当参数之一为空时，不要调用 Union。

“空查询”对您意味着什么？如果它的意思是“没有行”，那么就不要联合它。如果它表示“所有行”，则不需要合并，因为您可以只采用底层的未过滤查询。

像这样：

```
var result = new [] { q1, q2, q3, q4, }.Where(query => query != null).Aggregate(Queryable.Union); 
```

这是使用 LINQ-to-Objects 来构造 LINQ-to-SQL 查询。

一个新版本：

```
var result = dataContext.Persons.Where(_ => false);
if(q1 != null) result = result.Union(q1);
if(q2 != null) result = result.Union(q2);
if(q3 != null) result = result.Union(q3);
if(q4 != null) result = result.Union(q4); 
```

SQL Server 查询优化器将删除第一个虚拟查询，使其完全没有运行时成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:37:43.357

```
public static IQueryable<Person> FilterHairColors(this IQueryable<Person> subQuery, string[] hairColors)
{
    var result = new Person[] { }.AsQueryable();
    var contains = new Dictionary<string, Expression<Func<Person, bool>>>();

    contains.Add("1", p => p.HairColor_bright);
    contains.Add("2", p => p.HairColor_brown);
    contains.Add("3", p => p.HairColor_dark);
    contains.Add("4", p => p.HairColor_red);

    foreach (var color in hairColors)
    {
        result = subQuery.Where(contains[color]).Union(result);
    }

    return result;
} 
```

# css - 如何防止div改变位置

> ID：11067228
> 
> 赞同：0
> 
> 时间：2012-06-16T21:40:12.887
> 
> 标签：css, html, position

我正在尝试创建一种由多个 div 组成的窗口。我基本上是在我的 cshtml 页面中将 div 放在 div 之后，并尝试在 .css 文件中设置它们的位置。经过相当大的努力，我设法将 div 设置在它们漂亮的位置。但是，一旦我开始在其中一个 div 中放置文本或 dom 元素或其他任何内容，它就会改变其位置，并推动其他 div，从而造成混乱。我以某种方式设法通过使用浮动来保留一些，但这真的很困难。难道没有一种简单的方法来管理 div 的内部元素吗？为什么 inside 元素会导致容器 div 移动到其他地方？

这是 .html 和 .css 代码。div 为空且位置正确。例如，您可以在 div id="fiyat"> 中简单地写“qwe”，然后看看我在说什么。

.html 代码：

```
<div id="tablodetay">
    <div id="secimler">     
    </div>

        <div id="parcacerceve">
        </div>

        <div id="resim">   
        </div>

        <div id="ebatsecimvefiyat">
            <div id="ebatsecim"> 

            </div>

            <div id="fiyat">
            </div>
        </div>

        <div id="urunozellik">       
        </div>
    </div> 
```

.css 代码：

```
div#tablodetay div#secimler
{
    border:1px solid #000000;
    margin:2px;
    display:block;
    width:706px;
    height:100px;
    display:block;
}

div#tablodetay div#parcacerceve
{
    border:1px solid #000000;
    margin:2px;
    display:inline-block;
    width:86px;
    height:400px;
}

div#tablodetay div#resim
{
    border:1px solid #000000;
    margin:2px;
    height:400px;
    width:400px;
    display:inline-block;
}

div#tablodetay div#ebatsecimvefiyat
{
    margin:2px;
    height:402px;
    width:200px;
    display:inline-block;
}

div#tablodetay div#ebatsecim
{
    border:1px solid #000000;
    height:248px;
    width:200px;
    margin-bottom:2px;
}

div#tablodetay div#ebatsecim form input
{
    float:left;
    border:1px solid #000000;
}

div#tablodetay div#fiyat
{
    border:1px solid #000000;
    height:148px;
    width:200px;
}

div#tablodetay div#urunozellik
{
    border:1px solid #000000;
    height:120px;
    width:706px;
    margin-top:-2px;
    margin-left:2px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:47:37.143

您需要为每个 div 定义 css 属性。为了防止它改变你需要的大小或位置

```
div ... {
   position:absolute;
   left: 50px;
   top:50px;
   width:100px;
   height:50%;
} 
```

位置：绝对；忽略所有其他 div 并将您的 div 放在您定义的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:48:10.980

如果溢出未设置为无或滚动，则宽度和高度将被否决

浏览器将使用您的宽度和高度作为起点，而不是终点。

您也可以尝试设置最大宽度和最大高度。

# javascript - 网站文本和代码编辑器解决方案

> ID：11067231
> 
> 赞同：0
> 
> 时间：2012-06-16T21:40:37.117
> 
> 标签：javascript, html, editor

我花了几天时间尝试在我的网站中加入不同的编辑器。似乎没有人能胜任这项工作。我已经深入研究了他们的代码，但一件事或另一件事不起作用。

这是我的要求：

*   基本格式，例如大小、粗体、斜体、删除线、下标和上标
*   通过 ajax 上传图片、调整图片大小和定位
*   链接处理
*   代码标签或样式化的 div，右上角有一个下拉菜单，用于选择语法突出显示。在离开代码标签/样式的 div 时，文本会通过 ajax 更新以包含行号。
*   粘贴但对用户代码进行编码

我尝试过的编辑器的主要问题是：

回车/换行不会将光标移出当前元素，如果这样做，它们会重新创建当前元素或在其自身内重新创建当前元素。

他们使用了很多不必要的代码，例如多个嵌套的 div。哎呀，看看你得到的一些来源`<div><div><div><div><div><div>Hello World</div></div></div></div></div></div>`

他们不会在我需要他们的怪癖中工作。

这是我的想法的图像，它只是一个敲门声：

![在此处输入图像描述](../Images/1f5081ca19f03c810e3bf157d0081518.png)

所以我的想法是使用内容可编辑的 div 和正则表达式来跟踪代码标签并实现我自己的功能。但我需要在所有浏览器公司的怪癖中获取内容 div 的选择开始和长度。我怎样才能做到这一点？

还替换内容 div 中的文本。

任何建议、想法或帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:50:40.663

其实很容易。你只需要一个`<div/>`名为`contenteditable`. 从那时起，您可能遇到的唯一浏览器问题就是将 HTML 可靠地插入到该 div 中。但我之前已经看到它运行良好，所以它不应该是一个真正的问题。

既然您提到了怪癖模式，恐怕没有色调黑客是不可能的，但是，有一个简单的解决方法：将您的编辑器（div）放在一个单独的页面中并将其嵌入到 iframe 中。

关于图片上传部分，您的服务器需要处理。从编辑器的角度来看，它只是一个`<img/>`标签。

# c# - 将图像调整为更小只是切断边缘

> ID：11067235
> 
> 赞同：0
> 
> 时间：2012-06-16T21:41:05.490
> 
> 标签：c#, image, resize, crop

这一切都在 C# 中：

我正在使用此代码来调整图像的大小：

```
_image = (Image)new Bitmap(_refImage, _width, _height); 
```

_refImage 只是一个参考图像，与原始图像相同，因此如果我多次调整大小，分辨率不会混乱。

如果我使图像更大，则此代码可以正常工作，它会按预期拉伸它。

但是，如果我使图像更小，那么它只会切断边缘。

我只是调整宽度，因为我只想改变宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:02:52.813

我找到了一个可能有效的链接：[Here](http://www.dzone.com/snippets/c-resize-image-while)。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:09:04.227

试试这个：

```
 /// <summary>
        /// Scales to within given boundaries - Aspect ratio is kept. High Quality Bi-Cubic interpolation is used.
        /// If boundary is larger than the image, then image is scaled up; if smaller, it is scaled down.
        /// </summary>
        /// <param name="originalImg">Image: Image to scale</param>
        /// <param name="width">Int: Restriction on width for output size. Must be greater than zero</param>
        /// <param name="height">Int: Restriction on height for output size. Must be greater than zero</param>
        /// <param name="backgroundColour">Color: Colour to shade background behind image</param>
        /// <returns>Image: Scaled Image</returns>
        /// <exception cref="ArgumentException">[ArgumentException] Boundary dimensions must exceed zero</exception>
        public static Image ScaleToFit(Image originalImg, int width, int height, Color backgroundColour)
        {
            if (originalImg == null) return null;
            if (width < 1 || height < 1) throw new ArgumentException("ScaleToFit: Boundary dimensions must exceed zero.");

            var destX = 0;
            var destY = 0;
            float nPercent;

            var nPercentW = (width / (float)originalImg.Width);
            var nPercentH = (height / (float)originalImg.Height);
            if (nPercentH < nPercentW)
            {
                nPercent = nPercentH;
                destX = Convert.ToInt16((width - (originalImg.Width * nPercent)) / 2);
            }
            else
            {
                nPercent = nPercentW;
                destY = Convert.ToInt16((height - (originalImg.Height * nPercent)) / 2);
            }

            var destWidth = (int)(originalImg.Width * nPercent);
            var destHeight = (int)(originalImg.Height * nPercent);

            var bmPhoto = new Bitmap(width, height, PixelFormat.Format24bppRgb);
            bmPhoto.SetResolution(originalImg.HorizontalResolution, originalImg.VerticalResolution);

            var grPhoto = Graphics.FromImage(bmPhoto);
            grPhoto.Clear(backgroundColour);
            grPhoto.InterpolationMode = InterpolationMode.HighQualityBicubic;

            grPhoto.DrawImage(originalImg,
                new Rectangle(destX, destY, destWidth, destHeight),
                new Rectangle(0, 0, originalImg.Width, originalImg.Height),
                GraphicsUnit.Pixel);

            grPhoto.Dispose();
            return bmPhoto;
        } 
```

注意：这会保持纵横比，如果你想足够容易地倾斜它，你可以改变它。

# android - 从 onItemCheckedStateChanged 获取 TextView 文本

> ID：11067237
> 
> 赞同：0
> 
> 时间：2012-06-16T21:41:13.150
> 
> 标签：android, listview, textview

我正在开发一个使用 ListView 并允许用户长按项目的 android 项目，以便他们可以在列表视图中选择多个项目。此位工作正常，但我遇到的问题是找出已选择的项目，以便我可以获取值并根据用户选择的内容对数据库执行查询。下面是我用于检查状态事件的代码，但我无法从这里弄清楚如何从 TextView 获取值。

```
 public void onItemCheckedStateChanged(ActionMode mode, int position, long id, boolean checked)
    {
        final int checkedCount = getListView().getCheckedItemCount();
        String data = 
        switch (checkedCount)
        {
            case 0:
                mode.setSubtitle(null);
                break;
            case 1:
                mode.setSubtitle("One item selected");
                break;
            default:
                mode.setSubtitle("" + checkedCount + " items selected");
                break;
        }
    } 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:50:35.920

```
 can't figure out from here how to get the value from the TextView. 
```

不确定您为什么要从 TextView 中获取值。由于它是不可编辑的，因此您拥有该项目的正电子，只需从该位置的适配器获取数据，您将获得在该位置的文本视图中设置的内容。

# c# - 在单个键盘快捷键中使用 R# 重新格式化代码

> ID：11067239
> 
> 赞同：16
> 
> 时间：2012-06-16T21:41:23.987
> 
> 标签：c#, visual-studio-2010, formatting, resharper

使用 R# 键盘快捷键格式化代码会显示以下窗口：

![在此处输入图像描述](../Images/37f3f06d59acb1ceddb4712f3f7bb4fc.png)

这迫使我每次都单击“*运行”按钮。*

有没有办法将键盘快捷键直接绑定到“*重新格式化代码”*选项中，而不仅仅是打开这个对话框窗口？

**编辑：**为了清楚起见，我*实际上*并没有用光标单击“运行”按钮，而是按 Enter。（我仍然觉得它很烦人，并希望有一个直接的捷径。）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-16T22:05:10.737

哦，亲爱的.. 我刚刚检查了工具 -> 选项 -> 键盘，找到了命令“ReSharper_SilentCleanupCode”。似乎在不弹出对话框的情况下执行了 ReSharper 的代码格式化功能。试一试，但尽量不要弄断你的手指...默认是 ctrl-alt-shift-f :D 这需要重新绑定...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:55:45.020

虽然我不能直接回答这个问题，但我想提出`Ctrl-K-D`一个替代方案。这将调用 Visual Studio 内置格式。它不太彻底，但侵入性也较小。

# c# - 构造函数注入过度使用

> ID：11067241
> 
> 赞同：4
> 
> 时间：2012-06-16T21:41:31.560
> 
> 标签：c#, .net, unit-testing, dependency-injection, repository-pattern

我正在寻找避免构造函数注入过度使用的最佳实践。例如，我有会议实体，它有几个子实体，如下所示：

*   会议
    1.  会议联系人
    2.  会议与会者
    3.  会议类型
    4.  地址
    5.  会议公司
    6.  会议记录

MeetingService 类如下所示：

```
public class MeetingService
{
    private readonly IMeetingContactRepository _meetingContactRepository;
    private readonly IMeetingAttendeeRepository _meetingAttendeeRepository;
    private readonly IMeetingTypeRepository _meetingTypeRepository;
    private readonly IAddressRepository _addressRepository;
    private readonly IMeetingCompanyRepository _meetingCompanyRepository;
    private readonly IMeetingNoteRepository _meetingNoteRepository;
    private readonly IMeetingRepositoy _meetingReposity;

    public MeetingService(IMeetingRepositoy meetingReposity, IMeetingContactRepository meetingContactRepository, IMeetingAttendeeRepository meetingAttendeeRepository, 
        IMeetingTypeRepository meetingTypeRepository, IAddressRepository addressRepository, 
        IMeetingCompanyRepository meetingCompanyRepository, IMeetingNoteRepository meetingNoteRepository)
    {
        _meetingReposity = meetingReposity;
        _meetingContactRepository = meetingContactRepository;
        _meetingAttendeeRepository = meetingAttendeeRepository;
        _meetingTypeRepository = meetingTypeRepository;
        _addressRepository = addressRepository;
        _meetingCompanyRepository = meetingCompanyRepository;
        _meetingNoteRepository = meetingNoteRepository;
    }

    public void SaveMeeting(Meeting meeting)
    {
        meetingReposity.Save();
        if(Condition1())
            _meetingContactRepository.Save();
        if(Condition2())
            _meetingAttendeeRepository.Save();
        if(Condition3())
            _meetingTypeRepository.Save();
        if(Condition4())
            _addressRepository.Save();
        if(Condition5())
            _meetingCompanyRepository.Save();
        if(Condition6())
            _meetingNoteRepository.Save();
    }
    //... other methods
} 
```

这里只是七个依赖项，但实际代码包含更多。我使用了[“依赖注入构造函数疯狂”](https://stackoverflow.com/questions/2420193/dependency-injection-constructor-madness)中描述的不同技术，但我还没有找到如何处理存储库依赖关系。

有什么办法可以减少依赖项的数量并保持代码可测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T04:19:57.460

构造函数过度使用只是一个症状 - 似乎您通过拥有一个了解消息持久性的各种元素并将它们插入整体保存的“主”类来近似一个[工作单元。](http://martinfowler.com/eaaCatalog/unitOfWork.html)

缺点是每个存储库都通过公开专用`Save`方法来传达其与其他存储库的独立性；但是，这是不正确的，因为`SaveMeeting`明确指出存储库不是独立的。

我建议识别或创建存储库*使用*的类型；这集中了您的更改，并允许您从一个地方保存它们。示例包括[DataContext (LINQ to SQL)](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)、[ISession (NHibernate)](http://www.nhforge.org/doc/nh/en/)和[ObjectContext (Entity Framework)](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)。

您可以在我以前的回答中找到有关存储库如何工作的更多信息：

[为每个对象创建通用存储库与特定存储库的优势？](https://stackoverflow.com/questions/1230571/advantage-of-creating-a-generic-repository-vs-specific-repository-for-each-obje/1231473#1231473)

拥有存储库后，您将确定它们将在其中运行的上下文。这通常映射到单个 Web 请求：在请求开始时创建公共工作单元的实例并将其交给所有存储库。在请求结束时，保存工作单元中的更改，让存储库不必担心*要*访问哪些数据。

这巧妙地将所有内容捕获并保存为一个单元。这与源代码控制系统的工作副本非常相似：将系统的当前状态拉入本地上下文，使用它，并在完成后保存更改。您不会单独保存每个文件 - 您将它们全部同时保存为离散修订。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T23:13:12.677

稍微扩展一下我上面的评论：

由于这个问题是针对如何管理存储库依赖关系的，所以我必须假设它`MeetingService`正在管理某种持久提交。过去，当我看到`MeetingService`具有这么多依赖项的类时，很明显它们做得太多了。所以，你必须问自己，“我的交易边界是什么”。换句话说，您可以做出的最小提交意味着会议已成功保存。

如果答案是在调用后成功保存了会议，`meetingReposity.Save();`那么这就是`MeetingService`应该管理的所有内容（对于提交）。

本质上，其他所有内容都是会议已保存这一事实的副作用（请注意，现在我们用过去时态说话）。在这一点上，对其他每个存储库的事件订阅更有意义。

这还具有将所有条件中的逻辑分离到遵循 SRP 以处理该逻辑的订阅者类的良好效果。*例如，当*联系人存储库提交的逻辑发生更改时，这一点变得很重要。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:37:24.020

前三个答案中的每一个都为处理摘要中的问题提供了重要的建议和想法。*但是，我可能对您上面的示例阅读过多，但这看起来像是聚合根过多的问题，本身*并没有太多的依赖关系。这与缺少存储库注入基础设施底层的持久性机制或配置错误有关。

简单地说，就是联系人、与会者、笔记等。应该是会议本身的复合属性（如果仅作为链接到单独管理的联系人等对象/数据）；因此，您的持久性机制应该自动保存它们。

听从 Bryan Watts 的格言“构造函数过度使用只是一种症状”，还有其他几种可能性：

*   您的持久性机制应该自动处理会议图的持久性，并且配置错误或缺乏执行此操作的能力（Bryan 建议执行此操作的所有三个，我将添加[DbContext (EF 4.1+)](http://blogs.msdn.com/b/adonet/archive/2011/04/11/ef-4-1-released.aspx)）。在这种情况下，实际上应该只有一个依赖`IMeetingRepositoy`项——它可以处理会议及其组合本身的原子保存。
*   `SaveMeeting()`不仅保存了指向其他对象（联系人、与会者等）的链接，而且还保存了这些对象，在这种情况下，我必须同意 dtryon 的观点，`MeetingService`并且`SaveMeeting()`所做的远远超出名称所暗示的范围，他的机制可以减轻它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T22:20:05.847

您真的需要将存储库功能拆分为这么多接口吗？你需要单独模拟它们吗？如果没有，您可以使用更少的接口，使用更多的方法。

但是让我们假设您的班级确实需要那么多依赖项。在这种情况下，您可以：

*   创建一个`MeetingServiceBindings`提供所有依赖项的配置对象 ( )。每个模块可以有一个配置对象，而不仅仅是单个服务。我认为这个解决方案没有任何问题。
*   使用依赖注入工具，例如[NInject](http://www.ninject.org/)。这很简单，您可以在一个地方在代码中配置您的依赖项，并且不需要任何疯狂的 XML 文件。

# php - 从服务器设置 HTTP Referrer？

> ID：11067243
> 
> 赞同：2
> 
> 时间：2012-06-16T21:41:51.590
> 
> 标签：php, redirect, header

有没有办法从服务器而不是浏览器发送 http 引荐来源网址？

这是我到目前为止尝试过的

```
 if ($download_result['redirect'])
    {
        header('Referer: http://torcache.net/torrent/DD157829553E81D3C513D93420624942FFA48D99.torrent');
        header('Server: nginx/1.3.0');
        header('Content-Type: application/x-bittorrent');
        header('Content-Encoding: gzip');
        header('Content-Length: 10767');
        header('Location: ' . $download_result['url2']);
    }
    } 
```

我需要设置引用代理，因为在实际下载 torrent 缓存之前，首先使用 Torcache 会转到一个 html 页面；这很烦人，因为您必须单击后退按钮才能在 dl 之后返回网站；在看到发送的 GET 标头后，我想伪造 http 引用代理，以便它跳过 html 页面并获取缓存

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T21:43:12.383

不，服务器不能强制客户端发送特定的 HTTP Referer 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:47:36.270

好吧，您可以像这样使用 cURL 执行 GET 请求。

```
header('Content-type: application/x-bittorrent');
$ch = curl_init('http://torcache.net/torrent/DD157829553E81D3C513D93420624942FFA48D99.torrent');                                                                      
curl_setopt($ch, CURLOPT_POSTFIELDS, null);
curl_setopt($ch, CURLOPT_POST, FALSE);
curl_setopt($ch, CURLOPT_HTTPGET, TRUE);                                                                 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-bittorrent','Referer: http://torcache.net/torrent/DD157829553E81D3C513D93420624942FFA48D99.torrent')); 
curl_setopt($ch, CURLOPT_REFERER, 'http://torcache.net/torrent/DD157829553E81D3C513D93420624942FFA48D99.torrent'); 
curl_setopt($ch, CURLOPT_ENCODING,"gzip");
$result = curl_exec($ch);
echo $result; 
```

# entity-framework - EntityFramework dbContext 导航属性导致重复连接

> ID：11067245
> 
> 赞同：0
> 
> 时间：2012-06-16T21:42:39.673
> 
> 标签：entity-framework

我在使用实体框架从我的 DbContext 对象生成的 SQL 中得到了很多重复的连接。这是我的基本结构

CatalogTable（CatalogID int 主键）

CategoryTable( CategoryID int PRIMARY KEY, CatalogID int NOT NULL )

DepartmentTable（DepartmentID int PRIMARY KEY，CatalogID int NOT NULL）

产品（CatalogID int NOT NULL，CategoryID int NOT NULL，DepartmentID int NOT NULL）

很简单，产品必须有目录、类别和部门。我已经设置了所有导航属性来反映这一点。是的，“产品”可以通过类别或部门间接关联到目录。但是因为有两种可能的路径，我选择明确指出一个产品属于一个目录。

所以问题变成了 EF 不断加入这些必需的关系，基本上为类别和部门吐出双重连接。

模型：

```
 //catalogs
            modelBuilder.Entity<Catalog>().ToTable("Catalog.Catalogs");
            modelBuilder.Entity<Catalog>().HasKey(k => k.CatalogID);

            //products
            modelBuilder.Entity<CatalogItem>().ToTable("Catalog.Products");
            modelBuilder.Entity<CatalogItem>().HasKey(k => k.ProductID);
            modelBuilder.Entity<CatalogItem>().HasRequired(req => req.CatalogCategory).WithMany().Map(m => m.MapKey("CatalogCategoryID"));
            modelBuilder.Entity<CatalogItem>().HasRequired(req => req.CatalogDepartment).WithMany().Map(m => m.MapKey("CatalogDepartmentID"));
            modelBuilder.Entity<CatalogItem>().HasRequired(req => req.Catalog).WithMany().Map(m => m.MapKey("CatalogID"));

            //departments
            modelBuilder.Entity<CatalogDepartment>().ToTable("Catalog.Departments");
            modelBuilder.Entity<CatalogDepartment>().HasKey(k => k.CatalogDepartmentID);
            modelBuilder.Entity<CatalogDepartment>().HasRequired(req => req.Catalog).WithMany().Map(m => m.MapKey("CatalogID"));

            //categories
            modelBuilder.Entity<CatalogCategory>().ToTable("Catalog.Categories");
            modelBuilder.Entity<CatalogCategory>().HasKey(k => k.CatalogCategoryID);
            modelBuilder.Entity<CatalogCategory>().HasRequired(req => req.Catalog).WithMany().Map(m => m.MapKey("CatalogID")); 
```

林克：

```
var query = Products
    .Include(inc=>inc.CatalogCategory)
    .Include(inc=>inc.CatalogDepartment)
    .Include(inc=>inc.Catalog);

query.ToList(); 
```

生成的 Sql：

```
SELECT *
FROM     [Catalog].[Products] AS [Extent1]
INNER JOIN [Catalog].[Categories] AS [Extent2] ON [Extent1].[CatalogCategoryID] = [Extent2].[CatalogCategoryID]
LEFT OUTER JOIN [Catalog].[Categories] AS [Extent3] ON [Extent1].[CatalogCategoryID] = [Extent3].[CatalogCategoryID]
LEFT OUTER JOIN [Catalog].[Departments] AS [Extent4] ON [Extent1].[CatalogDepartmentID] = [Extent4].[CatalogDepartmentID]
LEFT OUTER JOIN [Catalog].[Catalogs] AS [Extent5] ON [Extent1].[CatalogID] = [Extent5].[CatalogID] 
```

您可以清楚地看到“类别”被加入了两次；一次作为内部连接，一次作为外部连接。

这里有什么想法可以干净地（准确地）建立关系但防止重复绑定吗？谢谢！

# c# - 如何将c#代码编译到内存中？

> ID：11067255
> 
> 赞同：4
> 
> 时间：2012-06-16T21:43:39.780
> 
> 标签：c#, .net, compiler-construction, compilation

我正在使用 Microsoft 的 CSharpCodeProvider 来动态创建和执行代码。

现在，它在一个 dll 中创建一个程序集，该程序集位于一个临时文件夹中。

我希望它在内存中创建一个程序集，而不必将其写入硬盘驱动器。

我怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T21:47:14.257

我想你只是在寻找[`CompilerParameters.GenerateInMemory`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.generateinmemory.aspx).

将编译时传入的编译器参数设置为true，它不会生成文件。

# hibernate - 如何让hibernate print只生成一次SQL语句？

> ID：11067259
> 
> 赞同：1
> 
> 时间：2012-06-16T21:44:32.853
> 
> 标签：hibernate

我已将休眠配置为打印出它生成的 sql 语句，并且我有一个每 10 秒运行一次的后台任务，它使用休眠并最终一次又一次地打印出相同的 sql 语句......等等。

有没有办法将hibernate配置为打印出sql语句，但每个语句只打印一次，以后忽略打印出来？

**更新：**似乎没有办法在休眠中配置它，我最终使用 Spring JDBC 来处理这个频繁执行的查询，以避免在开发过程中每 10 秒将查询打印到控制台。如果有人想出一种简单的方法，我会保持这个问题的开放性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:12:39.157

你可以实现你自己的`log4net.Appender.IAppender`，它使用一个集合来确定它是否已经打印出来

# ruby-on-rails - Rails / Windows：克隆需要 eventmachine 0.12.10 的应用程序

> ID：11067260
> 
> 赞同：1
> 
> 时间：2012-06-16T21:44:35.987
> 
> 标签：ruby-on-rails, windows, eventmachine

我正在克隆一个需要`eventmachine <0.12.10>`. 不幸的是，[这个特定版本的 eventmachine 与 Windows 不兼容](https://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7)，所以我收到了十亿个错误。

我应该怎么办？

谢谢！

**编辑：** `eventmachine <0.12.10>`直接需要。它也是间接需要的`thin`（尽管`thin`只需要`eventmachine`版本> = 0.12.06）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:12:38.033

好的，对。出色地。你绝对需要瘦吗？你不能用 Webrick 工作吗？在您的应用程序中，您将其更新到最新版本 1.0.x。您也可以设置边缘版本，将 github 存储库作为源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:26:06.067

我遇到了同样的问题，发现您需要 --pre 版本的 eventmachine 才能运行瘦身。您可以手动安装 eventmachine 和 Thin，也可以将其添加到 gem 文件中：

gem "eventmachine", ">= 1.0.0.beta" # 同 eventmachine --pre
gem 'thin'

到目前为止，这对我来说没有故障。

# c - 获取 kobject_add 的父级

> ID：11067262
> 
> 赞同：1
> 
> 时间：2012-06-16T21:44:59.777
> 
> 标签：c, linux-kernel, kernel-module, sysfs

有什么简单的方法可以让父母在 kobject_add 函数中使用吗？我想把文件放在`/sys/module/mymodule/parameters`. 我已经有了工作参数，但是我在错误的目录中创建了它。我发现module.h中有module_subsys，但我不知道如何使用它。这是我的 init 函数代码：

```
static int __init init_hello(void)
{
    subsystem_register(&module_subsys);
     struct my_attr *a;
    Major = misc_register(&mydevice);
     mykobj = kzalloc(sizeof(*mykobj), GFP_KERNEL);
        if (mykobj) {
            kobject_init(mykobj, &mytype);
            kobj_set_kset_s(mykobj, module_subsys);
            if (kobject_add(mykobj, NULL, "%s", "sysfs_example")) {
                    printk("Sysfs creation failed\n");
                    kobject_put(mykobj);
                    mykobj = NULL;
                    return -1;
                    }
        }

     a = container_of(&(my_first.attr), struct my_attr, attr);
    msg_Ptr = kzalloc(a->value, GFP_KERNEL);
    bytesindev=0;
    if(Major) {
        printk(KERN_ALERT "Rejestrowanie urządzenia nie powiodło się\n");
        return Major;

    }

    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:05:27.120

自己从未尝试过，但`&THIS_MODULE->mkobj.kobj`看起来很合适。
我没有看到任何`kobject_add`直接使用它的内核代码，所以它可能不是正确的方法。

如果您已经注册了设备驱动程序，那么`&dev->kobj`看起来是个不错的方法。

# android - 将视图传递给另一个活动？

> ID：11067269
> 
> 赞同：0
> 
> 时间：2012-06-16T21:45:37.017
> 
> 标签：android

当用户单击`Main`活动中的按钮时，我将启动`Second`ActivityForResult 活动。我想从 to 传递一个`Main`视图`Second`。我不想复制，我想实际删除视图`Main`并将其添加到`Second`, 属性中。

我可以使用 startActivityForResult 而不是 View 来打包意图附加内容（字符串、整数等）。我尝试通过 view.getId() 但似乎无法将其转换为`Second`. 有任何想法吗？

# css - 奇怪的 CSS 和 HTML 下拉菜单故障重叠

> ID：11067273
> 
> 赞同：0
> 
> 时间：2012-06-16T21:46:17.687
> 
> 标签：css

出于某种原因，我遇到了一个奇怪的重叠下拉菜单故障。当我用 Firefox 打开它时它工作正常，但是当我将 HTML 发布到 Blogger.com 网站时，它会重叠。

我正在将其更新到的网站是[http://clubpenguinspin.com/](http://clubpenguinspin.com/)，如您所见，当您将鼠标悬停在“聊天”上时，它有很多选择和奇怪的重叠菜单。这是它的图片：

[http://prntscr.com/aopk4](http://prntscr.com/aopk4)

看看我的 HTML：

```
<center>
<!-- Link to styles used for our Navigation Bar -->
<link href="http://cpspintest123.x10.mx/nav-id-19fnroex/tea.css" rel="stylesheet" type="text/css" />

<!-- Link to a file with couple simple JavaScript functions used for our Navigation Bar -->
<script src="http://cpspintest123.x10.mx/nav-id-19fnroex/SimpleNavBarScripts.js" language="JavaScript" type="text/javascript"></script>

<!-- main nav bar titles -->
<!-- Note how the the closing angle bracket of each </a> tag runs up against the next <a> tag,
      to avoid leaving a gap between each menu title and the next one. -->

<!-- REPLACE each "placeholder.html" URL below with the specific page you want the user
      to go to when the given menu title is clicked. For example, the first link below
      is for the "Home" menu title, so you'd probably replace the first URL with index.html. -->

<div class="mynavbar">

<a class="navbartitle" id="t1" href="http://clubpenguinspin.com/"
      onmouseout="HideItem('products_submenu');" 
      onmouseover="ShowItem('products_submenu');"
    >Home<a class="navbartitle" id="t2" href="http://xat.com/clubpenguincheatzone"
      onmouseout="HideItem('services_submenu');" 
      onmouseover="ShowItem('services_submenu');"
    >Chat<a class="navbartitle" id="t3" href="http://twitter.com/#!/cpcheatzone"
      onmouseout="HideItem('funstuff_submenu');" 
      onmouseover="ShowItem('funstuff_submenu');"
    >Twitter<a class="navbartitle" id="t4" href="#"
      onmouseout="HideItem('aboutus_submenu');" 
      onmouseover="ShowItem('aboutus_submenu');"
    >Extras<a class="navbartitle" id="t5" href="http://support.clubpenguinspin.com"
      onmouseout="HideItem('contact_submenu');" 
      onmouseover="ShowItem('contact_submenu', 't5');"
    >Support</a>
<a class="navbartitle" id="t6" href="#"
      onmouseout="HideItem('yeaman_submenu');" 
      onmouseover="ShowItem('yeaman_submenu');"
    >Coming Soon

<!-- Products sub-menu, shown as needed  -->
<div class="submenu" id="products_submenu" 
    onmouseover="ShowItem('products_submenu');" 
    onmouseout="HideItem('products_submenu');">
  <div class="submenubox">
  </div>
</div>

<!-- Services sub-menu, shown as needed  -->
<div class="submenu" id="services_submenu" 
    onmouseover="ShowItem('services_submenu');" 
    onmouseout="HideItem('services_submenu');">
  <div class="submenubox">
    <ul>
      <li><a href="http://xat.com/clubpenguincheatzone" class="submenlink">CPCheatZone Chat</a></li>
      <li><a href="http://xat.com/noeexclusives" class="submenlink">NoeExclusives Chat</a></li>
      <li><a href="http://xat.com/cprichnich" class="submenlink">TheCpWorld Chat</a></li>
      </ul>
  </div>
</div>

<!-- Fun Stuff sub-menu, shown as needed  -->
<div class="submenu" id="funstuff_submenu" 
    onmouseover="ShowItem('funstuff_submenu');" 
    onmouseout="HideItem('funstuff_submenu');">
  <div class="submenubox">
    <ul>
      <li><a href="http://twitter.com/#!/cpcheatzone" class="submenlink">CPCheatZone</a></li>
      <li><a href="http://twitter.com/#!/444ppenguincp" class="submenlink">444ppenguin</a></li>
      <li><a href="http://twitter.com/#!/noe231cp" class="submenlink">Noe231</a></li>
      <li><a href="http://twitter.com/#!/cprichnich" class="submenlink">Rich Nich</a></li>
      <li><a href="http://twitter.com/#!/wastermcdude" class="submenlink">Master Swamp</a></li>
    </ul>
  </div>
</div>

<!-- About Us sub-menu, shown as needed  -->
<div class="submenu" id="aboutus_submenu" 
    onmouseover="ShowItem('aboutus_submenu');" 
    onmouseout="HideItem('aboutus_submenu');">
  <div class="submenubox">
    <ul>
      <li><a href="http://www.clubpenguinspin.com/p/freebies.html" class="submenlink">Freebies</a></li>
      <li><a href="#" class="submenlink">Graphics Store</a></li>
      <li><a href="http://youtube.com/cpcheatzone" class="submenlink">Club Penguin Cheats</a></li>
      <li><a href="#" class="submenlink">Fun</a></li>
      <li><a href="#" class="submenlink">More coming soon!</a></li>
     </ul>
  </div>
</div>

<!-- CONTACTS & DIRECTIONS sub-menu, shown as needed  -->
<div class="submenu" id="contact_submenu" 
    onmouseover="ShowItem('contact_submenu');" 
    onmouseout="HideItem('contact_submenu');">
  <div class="submenubox">
    <ul>
      <li><a href="#" class="submenlink">Banners</a></li>
       <li><a href="http://support.clubpenguinspin.com" class="submenlink">Contact Us</a></li>
       <li><a href="#" class="submenlink">More</a></li>
   </ul>
  </div>
</div>

<div class="submenu" id="yeaman_submenu" 
    onmouseover="ShowItem('yeaman_submenu');" 
    onmouseout="HideItem('yeaman_submenu');">
  <div class="submenubox">
    <ul>
   </ul>
  </div>
</div><!-- end of sub-meus -->

</a></a></a></a></a></div>
</center> 
```

这是我的CSS：

```
.mynavbar {
    position: relative;
  width: 974px;
  height: 23px; /* corresponds to 'line-height' of a.navbartitle below */
  margin: 0; border: 0; padding: 0;
  background-color: #005EFF; 
  border-bottom: #003cff solid 3px; 
  border-left: #003cff solid 3px; 
  border-right: #003cff solid 3px; 
}

a.navbartitle {
  display: block; 
  float: left;
  color: white;
  text-shadow: 1px 1px 3px #000;
  outline: 0;
  background-color:  #005EFF;
  font-family: Verdana, Arial, Geneva,  Helvetica, sans-serif;
  font-size: 12px;
  font-weight: bold;
  margin: 0; border: 0; padding: 0;
  line-height: 23px; /* corresponds to 'top' value of .submenu below */
  text-align: center;
  text-decoration:none;
}
a.navbartitle:hover {
  background-color: #0241AD;
}
/* menu title widths */
#t1 { width: 104px; }
#t2 { width: 100px; }
#t3 { width: 102px; }
#t4 { width: 102px; }
#t5 { width: 120px; }
#t5 { width: 110px; }
#t6 { width: 120px; }
/* We just specify a fixed width for each menu title. Then, down below we specify
    a fixed left position for the corresponding submenus (e.g. #products_submenu, etc.)
    Using these fixed values isn't as elegant as just letting the text of each 
    menu title determine the width of the menu titles and position of the submenus,
    but we found this hardwired approach resulted in fewer cross-browser/cross-OS 
    formatting glitches -- and it's pretty easy to adjust these title widths and the
    corresponding submenu 'left' positions below, just by eyeballing them whenever
    we need to change the navbar menu titles (which isn't often). */

.submenu {
    position:absolute;
  z-index: 2;
  top: 23px; /* corresponds to line-height of a.navbartitle above */
  padding: 0; margin: 0; 
    width:166px; /* If adjust this, then adjust width of .submenu below a too */
    color: white;
    background-color:  #0241ad;
    border: 1px solid transparent; /* box around entire sub-menu */
  font-family: Verdana, Arial, Geneva,  Helvetica, sans-serif;
    font-size: 11px;
}
/* Fix IE formatting quirks. */
* html .submenu { width: 148px; } /* IE needs narrower than width of .submenu above */
/* End */

/* position of each sub menu */
/* We just eyeball the position of each submenu here -- can move left or right as needed. 
   If you adjust menu title text, you might want to adjust these too. */
#products_submenu {  left: 0px; visibility: hidden;  }
#services_submenu {  left: 104px; visibility: hidden;  }
#funstuff_submenu {  left: 204px; visibility: hidden; }
#aboutus_submenu {  left: 306px; visibility: hidden; }
#contact_submenu { left: 408px; visibility: hidden; }
#contact2_submenu { left: 408px; visibility: hidden; }
#yeaman_submenu { left: 517px; visibility: hidden; }
/* Note, each submenu is hidden when the page loads - then made visible when
    the mouse goes over the menu title. Using the 'visibility' property instead
    of using the 'display' property avoided a bug in some versions of Safari. 
    (The bug is pretty where esoteric: The browser ignored the 'hover' property 
    on 'li' objects inside an object whose display property was set to 'none' 
    when the page loaded...) Using the 'visibility' property instead of 'display'
    would normaly take up extra room on the page, but that's avoided here by putting
    the submenu on a second layer: see 'position: absolute' and 'z-index: 2'
    in .submenu definition, higher up this page. */

.submenu a
{
  display: block;
  color: #eee; 
  background-color: #005EFF;
  width: 146px; /* This should be width of .submenu above minus right-side padding on next line */
  padding: 5px 0px 4px 20px;
  text-decoration: none;
  background-color: #005EFF; 
  border-bottom: #003cff solid 1px; 
  border-left: #003cff solid 1px;
  border-right: #003cff solid 1px;
}

ul { position: left; display: block; }
li { position: left; display: block; }

.submenubox { 
  margin: 0; padding: 0; border: 0;
}
.submenubox ul
{
  margin: 0; padding: 0; border: 0;
  list-style-type: none;
}

.submenubox ul li { 
  margin: 0; padding: 0; border: 0;
}

.submenubox ul li a:link { }
.submenubox ul li a:visited { }
.submenubox ul li a:hover
{
  color: #c6e8e2; /* text color for submenu items */
  background-color: transparent;
  border-bottom: transparent solid 1px; 
} 
```

请帮我！这对我的网站浏览者和其他人来说非常烦人。

:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:14:13.867

您必须`</a>`在“即将推出”和其他链接之后添加关闭：

```
<a class="navbartitle" id="t1" href="http://clubpenguinspin.com/"
      onmouseout="HideItem('products_submenu');" 
      onmouseover="ShowItem('products_submenu');"
    >Home</a><a class="navbartitle" id="t2" href="http://xat.com/clubpenguincheatzone"
      onmouseout="HideItem('services_submenu');" 
      onmouseover="ShowItem('services_submenu');"
    >Chat</a><a class="navbartitle" id="t3" href="http://twitter.com/#!/cpcheatzone"
      onmouseout="HideItem('funstuff_submenu');" 
      onmouseover="ShowItem('funstuff_submenu');"
    >Twitter</a><a class="navbartitle" id="t4" href="#"
      onmouseout="HideItem('aboutus_submenu');" 
      onmouseover="ShowItem('aboutus_submenu');"
    >Extras</a><a class="navbartitle" id="t5" href="http://support.clubpenguinspin.com"
      onmouseout="HideItem('contact_submenu');" 
      onmouseover="ShowItem('contact_submenu', 't5');"
    >Support</a>
<a class="navbartitle" id="t6" href="#"
      onmouseout="HideItem('yeaman_submenu');" 
      onmouseover="ShowItem('yeaman_submenu');"
    >Coming Soon</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:12:35.163

幸运的是，问题很简单。`</a>`在“即将推出”链接的末尾添加一个：

```
<a class="navbartitle" id="t6" href="#"
      onmouseout="HideItem('yeaman_submenu');" 
      onmouseover="ShowItem('yeaman_submenu');"
   >Coming Soon 
```

我会仔细梳理一下，确保您的 HTML 设置正确。另外，考虑在可能的情况下从 HTML 文件中取出 JS 并制作一个单独的 JS 文件吗？以后你会感谢自己的。

# objective-c - iOS 4 基于文档的应用程序

> ID：11067282
> 
> 赞同：0
> 
> 时间：2012-06-16T21:47:18.870
> 
> 标签：objective-c, ios, ios4, document-based

我需要创建一个能够在 IOS 上修改和管理文件的应用程序。

使用 IOS 5 可以“轻松”创建基于文档的应用程序，但我也需要支持 IOS 4。

任何人都知道是否有办法在 IOS 4 中创建基于文档的应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:06:44.647

简短的回答是否定的，`UIDocument`并且`UIManagedDocument`仅随 iOS 5 提供

长答案是肯定的。iOS 有数百个基于文档的应用程序。例如 Brushes、Sketchbook Pro，它们都是基于文档的应用程序。我自己的应用程序是基于文档的，做起来并不难。

`UIDocument`/提供的是`UIManagedDocument`用于制作通用文档的罐装 API。给它一个 URL，它会做（大部分）其余的家务。

如果你想做一个基于 iOS4 的应用程序，那么你需要注意的是。

*   UIApplicationWillTerminateNotification/UIApplicationDidEnterBackgroundNotification
*   打开一个新文档。
*   保存文档。
*   关闭文档。
*   自动保存（可能）
*   Core Data stack ，如果你使用的是 Core Data

[www.raywenderlich.com](http://www.raywenderlich.com)有一些很棒的教程。甚至可能仍然是基于 iOS4 的。

IMO - 不要为 iOS4 支持而烦恼。就像上面的帖子所说，85% 的人使用 iOS5，而仍在使用 iOS4 的任何人都可能不在您的目标市场中。特别是因为这是（我假设）一个新的应用程序，iOS6 将在你上市时出现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T21:50:20.213

只想问，你*真的*需要支持iOS 4吗？超过 85% 的设备采用 iOS。

需要继续支持 iOS 4 的基础是什么？

# c - MSYS：错误 c 编译器无法创建可执行文件

> ID：11067283
> 
> 赞同：2
> 
> 时间：2012-06-16T21:47:34.680
> 
> 标签：c, mingw, libxml2

我正在尝试按照[本](http://www.pokorra.de/coding/compile_libxml_mingw.html)教程在 MinGW 上构建 libxml2。但是当我`/.configure`在 MSYS 终端上运行时，我得到：

```
 ./configure
checking build system type... i686-pc-mingw32
checking host system type... i686-pc-mingw32
checking for a BSD-compatible install... /bin/install -c
checking whether build environment is sane... yes
/c/Users/name/Documents/libxml2-2.4.25-special/missing: Unknown `--run' option
Try `/c/Users/name/Documents/libxml2-2.4.25-special/missing --help' for more i                                             nformation
configure: WARNING: `missing' script is too old or missing
checking for gawk... gawk
checking whether make sets ${MAKE}... yes
checking for gcc... gcc
checking for C compiler default output... configure: error: C compiler cannot create executables                                             eate executables
check `config.log' for details. 
```

我尝试在 libxml2 目录上设置 755，但没有任何改变。

如何解决这个问题？

**编辑**`config.log`文件：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by configure, which was
generated by GNU Autoconf 2.54\.  Invocation command line was

  $ ./configure 

## --------- ##
## Platform. ##
## --------- ##

hostname = username-PC
uname -m = i686
uname -r = 1.0.9(0.46/3/2)
uname -s = MINGW32_NT-6.1
uname -v = 2003-07-03 07:26

/usr/bin/uname -p = unknown
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
hostinfo               = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: .
PATH: /usr/local/bin
PATH: /mingw/bin
PATH: /bin
PATH: /c/Program Files/Common Files/Microsoft Shared/Windows Live
PATH: /c/Windows/system32
PATH: /c/Windows/System32/WindowsPowerShell/v1.0/
PATH: /c/Program Files/CodeBlocks/MinGW/bin
PATH: /c/Program Files/CodeBlocks/MinGW/bin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:1491: checking build system type
configure:1509: result: i686-pc-mingw32
configure:1517: checking host system type
configure:1531: result: i686-pc-mingw32
configure:1570: checking for a BSD-compatible install
configure:1624: result: /bin/install -c
configure:1635: checking whether build environment is sane
configure:1678: result: yes
configure:1703: WARNING: `missing' script is too old or missing
configure:1711: checking for gawk
configure:1727: found /bin/gawk
configure:1737: result: gawk
configure:1747: checking whether make sets ${MAKE}
configure:1767: result: yes
configure:1966: checking for gcc
configure:1982: found /mingw/bin/gcc
configure:1992: result: gcc
configure:2234: checking for C compiler version
configure:2237: gcc --version </dev/null >&5
gcc.exe (GCC) 4.7.0
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2240: $? = 0
configure:2242: gcc -v </dev/null >&5
Using built-in specs.
COLLECT_GCC=C:\mingw\bin\gcc.exe
Target: mingw32
Configured with: ../gcc-4.7.0/configure --enable-languages=c,c++,ada,fortran,objc,obj-c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgomp --disable-win32-registry --enable-libstdcxx-debug --disable-build-poststage1-with-cxx --enable-version-specific-runtime-libs --build=mingw32 --prefix=/mingw
Thread model: win32
gcc version 4.7.0 (GCC) 
configure:2245: $? = 0
configure:2247: gcc -V </dev/null >&5
gcc.exe: error: unrecognized command line option '-V'
gcc.exe: fatal error: no input files
compilation terminated.
configure:2250: $? = 1
configure:2270: checking for C compiler default output
configure:2273: gcc    conftest.c  >&5
gcc.exe: error: CreateProcess: No such file or directory
configure:2276: $? = 1
configure: failed program was:
#line 2253 "configure"
#include "confdefs.h"

int
main ()
{

  ;
  return 0;
}
configure:2303: error: C compiler cannot create executables
check `config.log' for details.

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=i686-pc-mingw32
ac_cv_build_alias=i686-pc-mingw32
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXCPP_set=
ac_cv_env_CXXCPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_F77_set=
ac_cv_env_F77_value=
ac_cv_env_FFLAGS_set=
ac_cv_env_FFLAGS_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=i686-pc-mingw32
ac_cv_host_alias=i686-pc-mingw32
ac_cv_path_install='/bin/install -c'
ac_cv_prog_AWK=gawk
ac_cv_prog_ac_ct_CC=gcc
ac_cv_prog_make_make_set=yes

## ----------------- ##
## Output variables. ##
## ----------------- ##

ACLOCAL='aclocal-1.6'
AMDEPBACKSLASH=''
AMDEP_FALSE=''
AMDEP_TRUE=''
AMTAR='tar'
ANSI2KNR=''
AS=''
AUTOCONF='autoconf'
AUTOHEADER='autoheader'
AUTOMAKE='automake-1.6'
AWK='gawk'
C14N_OBJ=''
CATALOG_OBJ=''
CC='gcc'
CCDEPMODE=''
CFLAGS=''
CPP=''
CPPFLAGS=''
CXX=''
CXXCPP=''
CXXDEPMODE=''
CXXFLAGS=''
DEBUG_OBJ=''
DEFS=''
DEPDIR=''
DLLTOOL=''
DOCB_OBJ=''
ECHO='echo'
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP=''
EXEEXT=''
F77=''
FFLAGS=''
FTP_OBJ=''
HAVE_ISINF=''
HAVE_ISNAN=''
HTML_DIR=''
HTML_OBJ=''
HTTP_OBJ=''
ICONV_LIBS=''
INSTALL_DATA='${INSTALL} -m 644'
INSTALL_PROGRAM='${INSTALL}'
INSTALL_SCRIPT='${INSTALL}'
INSTALL_STRIP_PROGRAM='${SHELL} $(install_sh) -c -s'
LDFLAGS=''
LIBOBJS=''
LIBS=''
LIBTOOL=''
LIBXML_MAJOR_VERSION='2'
LIBXML_MICRO_VERSION='25'
LIBXML_MINOR_VERSION='4'
LIBXML_VERSION='2.4.25'
LIBXML_VERSION_INFO='6:25:4'
LIBXML_VERSION_NUMBER='20425'
LN_S=''
LTLIBOBJS=''
MAINT=''
MAINTAINER_MODE_FALSE=''
MAINTAINER_MODE_TRUE=''
MAKEINFO='makeinfo'
MV=''
M_LIBS=''
OBJDUMP=''
OBJEXT=''
PACKAGE='libxml2'
PACKAGE_BUGREPORT=''
PACKAGE_NAME=''
PACKAGE_STRING=''
PACKAGE_TARNAME=''
PACKAGE_VERSION=''
PATH_SEPARATOR=':'
PYTHON=''
PYTHON_INCLUDES=''
PYTHON_SITE_PACKAGES=''
PYTHON_SUBDIR=''
PYTHON_VERSION=''
RANLIB=''
RDL_LIBS=''
RM=''
SET_MAKE=''
SHELL='/bin/sh'
STRIP=''
TAR=''
TEST_REGEXPS=''
TEST_SCHEMAS=''
TEST_THREADS=''
THREAD_CFLAGS=''
THREAD_LIBS=''
U=''
VERSION='2.4.25-special'
WIN32_EXTRA_LDFLAGS=''
WIN32_EXTRA_LIBADD=''
WITH_C14N=''
WITH_CATALOG=''
WITH_DEBUG=''
WITH_DOCB=''
WITH_FTP=''
WITH_HTML=''
WITH_HTTP=''
WITH_ICONV=''
WITH_MEM_DEBUG=''
WITH_PYTHON_FALSE=''
WITH_PYTHON_TRUE=''
WITH_REGEXPS=''
WITH_SCHEMAS=''
WITH_THREADS=''
WITH_TRIO=''
WITH_TRIO_SOURCES_FALSE=''
WITH_TRIO_SOURCES_TRUE=''
WITH_XINCLUDE=''
WITH_XPATH=''
WITH_XPTR=''
XINCLUDE_OBJ=''
XML_CFLAGS=''
XML_INCLUDEDIR=''
XML_LIBDIR=''
XML_LIBS=''
XPATH_OBJ=''
XPTR_OBJ=''
Z_CFLAGS=''
Z_LIBS=''
ac_ct_AS=''
ac_ct_CC='gcc'
ac_ct_CXX=''
ac_ct_DLLTOOL=''
ac_ct_F77=''
ac_ct_OBJDUMP=''
ac_ct_RANLIB=''
ac_ct_STRIP=''
am__include=''
am__quote=''
bindir='${exec_prefix}/bin'
build='i686-pc-mingw32'
build_alias=''
build_cpu='i686'
build_os='mingw32'
build_vendor='pc'
datadir='${prefix}/share'
exec_prefix='NONE'
host='i686-pc-mingw32'
host_alias=''
host_cpu='i686'
host_os='mingw32'
host_vendor='pc'
includedir='${prefix}/include'
infodir='${prefix}/info'
install_sh='/c/Users/name/Documents/libxml2-2.4.25-special/install-sh'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localstatedir='${prefix}/var'
mandir='${prefix}/man'
oldincludedir='/usr/include'
prefix='NONE'
program_transform_name='s,x,x,'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

#define PACKAGE "libxml2"
#define PACKAGE_BUGREPORT ""
#define PACKAGE_NAME ""
#define PACKAGE_STRING ""
#define PACKAGE_TARNAME ""
#define PACKAGE_VERSION ""
#define VERSION "2.4.25-special"

configure: exit 77 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T02:49:42.837

解决方案：

问题出在我安装的新 MinGW 版本中（`4.7`）。这个版本没有为我编译任何 C 代码。然后，当`MSYS`安装询问“你安装了 mingw 吗？”时，我输入：“n”。因此，通过使用旧`gcc`版本，我能够编译 C 程序，然后运行`./configure`和`make`文件。

# wcf - 未找到自托管 WCF 合同

> ID：11067290
> 
> 赞同：0
> 
> 时间：2012-06-16T21:49:03.317
> 
> 标签：wcf, silverlight, sql-server-2008, hosting

我使用这个 MSDN 示例来构建我的控制台主机应用程序：

[http://msdn.microsoft.com/en-us/library/ms731758.aspx](http://msdn.microsoft.com/en-us/library/ms731758.aspx)

它工作我有一个服务正在运行，在运行时我可以将它作为服务引用添加到我的 Silverlight 类库 ViewModel 中，我可以看到它在浏览器中运行。

但是，当我运行我的 Silverlight 应用程序时，我收到以下错误消息：

> 在 ServiceModel 客户端配置部分中找不到引用合同“ServiceLayer.IServiceLayer”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

这是我的服务代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Activation;
using Model;

namespace ServiceLayer
{
    [ServiceContract(Namespace = "ServiceLayer")] //This has to match references or updating the service reference will not work.
    public interface IServiceLayer
    {
        [OperationContract] //This is needed for each method.
        string Compile(string cscode, string name, string type, int token);

        [OperationContract] //This is needed for each method.
        string LoginClick(string username, string password, bool createuser, int token);

        [OperationContract]
        bool IsLoggedIn(int token);

        [OperationContract] //This is needed for each method.
        object[] GetMessages(int token);

        [OperationContract] //This is needed for each method.
        int GetToken(int token);

        [OperationContract] //This is needed for each method.
        string[][] GetPlugins(int token);

        [OperationContract] //This is needed for each method.
        string Finalize(int token, string[] descriptions);

        [OperationContract] //This is needed for each method.
        object[][] Communicate(string methodName, int token, object[] args);
    }

    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class ServiceLayer : IServiceLayer
    {
        public string Compile(string cscode, string name, string type, int token)
        {
            // Add your operation implementation here
            ModelInterface MI = new ModelInterface();
            return MI.Compile(cscode, name, type, token);
        }

        public String LoginClick(string username, string password, bool createuser, int token)
        {
            ModelInterface MI = new ModelInterface();
            return MI.LoginClick(username, password, createuser, token);
        }

        public bool IsLoggedIn(int token)
        {
            ModelInterface MI = new ModelInterface();
            return MI.IsLoggedIn(token);
        }

        public object[] GetMessages(int token)
        {
            ModelInterface MI = new ModelInterface();
            return MI.GetMessages(token);
        }

        public int GetToken(int token)
        {
            ModelInterface MI = new ModelInterface();
            return MI.GetToken(token);
        }

        public string[][] GetPlugins(int token)
        {
            ModelInterface MI = new ModelInterface();
            return MI.GetPlugins(token);
        }

        public string Finalize(int token, string[] descriptions)
        {
            ModelInterface MI = new ModelInterface();
            return MI.Finalize(token, descriptions);
        }

        public object[][] Communicate(string methodName, int token, object[] args)
        {
            ModelInterface MI = new ModelInterface();
            return MI.Communicate(methodName, token, args);
        }
        // Add more operations here and mark them with [OperationContract]
    }
} 
```

这是 ViewModel 的 ServiceReferences.ClientConfig：

```
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IServiceLayer" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding>
            <binding name="BasicHttpBinding_IServiceLayer1" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:3263/front" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IServiceLayer" contract="IServiceLayer"
            name="BasicHttpBinding_IServiceLayer" />
        <endpoint address="http://localhost:3263/front" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IServiceLayer1" contract="ServiceLayer.IServiceLayer"
            name="BasicHttpBinding_IServiceLayer1" />
    </client>
</system.serviceModel> 
```

这是项目的 Web.Config 文件，其中包含托管 Silverlight 应用程序的网站。我发布它是因为我尝试了这个[找不到默认端点元素](https://stackoverflow.com/questions/352654/could-not-find-default-endpoint-element) 指南 - 即将 VM 配置中的 servicemodel 部分复制到下面的 web.Config 中：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <pages controlRenderingCompatibilityVersion="4.0"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <customBinding>
        <binding name="OrgOS.Web.ServerCommunicationService.customBinding0">
          <binaryMessageEncoding/>
          <httpTransport/>
        </binding>
        <binding name="OrgOS.Web.ServiceLayer.customBinding0">
          <binaryMessageEncoding/>
          <httpTransport/>
        </binding>
      </customBinding>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
    <services>
      <service name="OrgOS.Web.ServiceLayer">
        <endpoint address="" binding="customBinding" bindingConfiguration="OrgOS.Web.ServiceLayer.customBinding0" contract="OrgOS.Web.ServiceLayer"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

我租用的服务器没有 ASP.NET，尽管我已经付费了，支持正在休假，而且我的最后期限即将到来！试图让 WCF 工作让我发疯 - 请帮助我......

为什么展示一个简单的 Silverlight 项目这么难……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:36:30.517

啊没关系; 您必须在 View Silverlight 项目、Web 项目和 ViewModel Silverlight 项目中发布配置设置。

您还必须删除所有端点和绑定，但要避免混淆。

还更改了一些内容以确保 namespace="namespace" 适合实际的命名空间。

......并不是因为这个原因，事情才有效，哦，不，我得到的只是无效的结果。

现在FML。

# html - CSS固定标题溢出？

> ID：11067291
> 
> 赞同：1
> 
> 时间：2012-06-16T21:49:16.253
> 
> 标签：html, css

我有以下代码：

```
<div id="header">
  <h1>HEADER TEXT</h1>
  <div id="members">
    <form action="" method="post">
    <input type="text" value="Search this site" />
    </form>
    <a href="#">Member Login</a>
    </div>
  <div id="nav">
  <ul>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
    </ul>
    </div>
</div>
<div id="main">

</div>
</body> 
```

这是CSS：

```
<style>
body {
    font-family:Verdana, Geneva, sans-serif;
    font-size: 16px;
    background-color: #EEE;
    color: #111;
    margin: 0;
    padding: 0;
}
h1 {
    display:inline;
    margin:0;
    padding:0;
    color:#000;
}
#header {
    position:fixed;
    width:100%;
    min-width:100%;
    background-color:#EEE;
}
#members {
    position:absolute;
    right:.5em;
    bottom:3em;
    margin: 0;
    padding: 0;
}
#members form {
    display: inline;
    margin: 0;
    padding: 0;
}
#nav {
    border-bottom:1px solid #3d5086;
    font-size:13px;
    font-family: Verdana, Geneva, sans-serif;
    font-weight: bold;
    height: 3.5em;
    border-top: 1px solid #7683c4;
    background-color: #44529C;
    width: 100%;
    min-width: 100%;
    overflow: hidden;
}
#nav ul {
    padding:0;
    margin:0;
}
#nav li {
    display:inline;
    list-style-type:none;
    margin:0;
    cursor:pointer;
    border-left: 1px solid #7085ba;
    border-right: 1px solid #3d5086;
    float: left;
    height: 2.5em;
    padding-top: 1em;
    text-shadow: 1px 1px 1px #111;
}
#nav li:hover {
    background-color:#5a64b3;
    color:#FFF;
}
#nav a {
    padding: 1.6em;
    color: #EEE;
    text-decoration: none;
}
#main {
    background:#FFF;
    width: 1000px;
    height: 1000px;
    margin: 0 auto;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
}
</style> 
```

我遇到的问题是，如果我将窗口缩小到足够小，#nav 中的链接就会开始消失（或者如果没有隐藏溢出，它会被推到下一行）。我无法为#nav 指定宽度，因为我需要背景扩展 100%。有一个简单的解决方法吗？另一个小问题，如果窗口缩小得足够小，是否有可能使 h1 和#members div 不重叠？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:50:47.937

尝试将 min-width 设置为仍能正常显示的最小尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:52:35.413

放入`display:inline`#nav 和/或#header

# android - onclick sqlite 项目

> ID：11067292
> 
> 赞同：0
> 
> 时间：2012-06-16T21:49:29.947
> 
> 标签：android, android-listview

该应用程序可以正常工作到 // ***** ** *** ** *** ** *** ** *** ******在 ListViewActivity.java 中。在这一点之后，我希望能够单击一个项目并修改该项目。我尝试了很多例子都无济于事。我的第一个目标是能够为点击的项目敬酒。

```
package bipsnm.android;
import java.util.List;
import android.app.Activity;
import android.app.ListActivity;
import android.database.Cursor;
import android.database.sqlite.SQLiteException;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
public class ListViewActivity extends Activity{
public void onCreate(Bundle savedInstanceState, String[] outputData, String[]
 ListView1){
    super.onCreate(savedInstanceState);
    Toast.makeText(this, "list/textview", Toast.LENGTH_LONG).show();
    final String KEY_ROWID = "_id";
    final String KEY_ITEMTYPE = "itemType";
    final String KEY_QUANTITY = "quantity";
    setContentView(R.layout.sqlview);
//      TextView content = (TextView) findViewById(R.id.outputData);
    ListView content = (ListView) findViewById(R.id.listView1);
    DatabaseControl control = new DatabaseControl(this);
    String result = "ItemType\t Quantity \n";
    try {
        control.open();
        result = result + "" + control.fetchItemIdByQty();
        control.close();
    }catch (SQLiteException e) {
        e.printStackTrace();
    }
    content.setFilterText(result);
//***************************************************************************

  setListAdapter(new ArrayAdapter<String>(this, R.layout.sqlview,ListView1));
      ListView lv = getListView();
      lv.setTextFilterEnabled(true); 
      lv.setOnItemClickListener(new OnItemClickListener(){
public void onItemClick(AdapterView<?> parent,View view,int position,long id){
Toast.makeText(getApplicationContext(),((TextView)view).getText(),Toast.LENGTH_LONG).show();
         }
      });
    }
private ListView getListView() {
    // TODO Auto-generated method stub
    return getListView();
}
private void setListAdapter(ArrayAdapter<String> arrayAdapter) {
    // TODO Auto-generated method stub
}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:17:37.777

```
// binding array to ListAdapter
setListAdapter(new ArrayAdapter<String>
           (this,android.R.layout.simple_expandable_list_item_1,result));
    selection = (TextView)findViewById(R.id.selection);

// listening to single list item on click
protected void onListItemClick(ListView l,View v, int position, long id){
    super.onListItemClick(l, v, position, id);
// selected item
String product = result[position];
Intent ii = new Intent(getApplicationContext(),Desire.class);
// sending data to new activity
ii.putExtra("product", product);
startActivity(ii);
}; 
```

# objective-c - 在不知道其名称的情况下打开现有的 Search Kit Framework 搜索索引

> ID：11067295
> 
> 赞同：0
> 
> 时间：2012-06-16T21:50:24.457
> 
> 标签：objective-c, macos, cocoa, search

OS X 的[Search Kit Framework](https://developer.apple.com/library/mac/#documentation/UserExperience/Reference/SearchKit/Reference/reference.html)允许创建和访问搜索索引。但是，如果该索引的名称未知，则无法访问现有的搜索索引。可用于访问现有搜索索引的框架的所有功能（SKIndexOpenWithData、SKIndexOpenWithMutableData、SKIndexOpenWithURL）都要求提供索引名称。这与存储搜索索引数据的文件的文件名不同。

当我尝试在不知道索引名称的情况下调用 SKIndexOpenWithURL 来访问现有搜索索引文件时，该函数不会返回有效的 SKIndexRef。将 NULL 作为索引名称传递（如框架文档所建议的那样）不起作用，因为 Search Kit 框架仅尝试使用索引名称“IADefaultIndex”。

例如，如果我创建一个索引名称如下的索引文件：

```
 NSString *path = @"/Users/Tim/Desktop/searchindex.skindex";
    NSURL *url = [NSURL fileURLWithPath: path];  
    NSString *name = @"myIndex";          
    SKIndexType type = kSKIndexInverted;                    
    SKIndexRef skIndex;
    skIndex = SKIndexCreateWithURL ((__bridge CFURLRef)url, (__bridge CFStringRef)name, (SKIndexType)type, (CFDictionaryRef)NULL);
    // .. 
```

如果我知道索引名称“myIndex”，我以后只能打开文件并访问存储的索引。如果我尝试在没有（或不知道）索引名称的情况下打开文件，则以下代码示例将失败：

```
 NSURL *skURL = [NSURL fileURLWithPath:@"/Users/Tim/Desktop/searchindex.skindex"];
    SKIndexRef skIndex;
    skIndex = SKIndexOpenWithURL((__bridge CFURLRef)skURL, NULL, true);
    if (!skIndex) NSLog (@"couldn't open index!"); 
```

但是，搜索索引的名称肯定在该索引文件中。有人知道在不知道搜索索引名称的情况下检索该名称或以其他方式访问搜索索引文件的方法吗？我知道根据框架文档，不可能使用框架来获取该索引名称，但它仍然应该是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:25:49.023

好的，经过一番研究，我想出了如何从搜索索引文件中提取索引名称：

```
-(NSString*)getIndexNameOfSKFile:(NSString*)filePath
{
    if (!filePath) return nil;

    // open the search index file
    NSData *data = [NSData dataWithContentsOfFile:filePath];
    if (!data) return nil;
    NSUInteger dataLength = [data length];

    // calculate the offset where the index name is stored
    int32_t offset1, offset2;
    if (dataLength<11) return nil;
    [data getBytes:&offset1 range:NSMakeRange(4,4)];
    [data getBytes:&offset2 range:NSMakeRange(8,4)];
    int32_t offset = CFSwapInt32HostToBig(offset1)+(CFSwapInt32HostToBig(offset2)/2)+14;

    // Get index name string (stored as zero-terminated string)
    unichar c;
    NSMutableString *indexName = [NSMutableString stringWithCapacity:0];
    do {
        if (dataLength<(offset+1)) return nil;
        [data getBytes:&c range:NSMakeRange(offset, 2)];
        if (c!=0) [indexName appendString:[NSString stringWithCharacters:&c length:1]];
        offset+=2;
    } while (c!=0);
    return indexName;
} 
```

这可能不适用于每个 OS X 版本，但它适用于 10.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:46:40.443

您确定是没有索引名称导致问题，而不是代码的其他部分，例如有效的 URL？正如您所注意到的，文档说它应该在不知道索引名称的情况下工作。我已经广泛使用 Search Kit 并且从来不需要它，这就是为什么我怀疑问题可能是其他问题。

你可以发布一些代码吗？

要回答有关是否可以从索引中获取名称的问题，方法 SKIndexCreateWithURL 的文档说不：

> inIndexName 索引的名称。如果在 inIndexName 设置为 NULL 的情况下调用此函数，Search Kit 会为索引分配默认索引名称 IADefaultIndex。如果您随后尝试在同一文件中创建第二个索引而不指定名称，则不会创建第二个索引并且此函数返回 NULL。**Search Kit 目前不支持从索引中检索索引名称**。

如果您在 Cocoa 领域工作，我想邀请您使用我的开源 Search Kit 包装器。你会在 Github 上找到代码：

[https://github.com/phildow/SPSearchStore](https://github.com/phildow/SPSearchStore)

如果您可以发布一些代码，我很乐意看看它。

# jquery - jQuery 和 position:relative 让我悬停起来！为什么？

> ID：11067296
> 
> 赞同：1
> 
> 时间：2012-06-16T21:50:25.990
> 
> 标签：jquery, css

所以我在使用 jquery 放置悬停工具提示时遇到了一点问题 - 如果我的 CSS 中父 div 的“位置”属性设置为“相对”，那么工具提示会飞到屏幕的左上角。如果我删除位置属性，那么一切都很好，工具提示又回来了。

我不太*了解*jQuery 或 css 定位规则，所以问题是：

1.  为什么 position:relative 会弄乱 jQuery 工具提示的位置？
2.  如果我确实需要职位：相对（我不需要），我能做些什么来解决这个问题？

相关代码是：

```
$("yay").hover(
 function(){
     // .position() uses position relative to the offset parent,
     var pos = $(this).position();
     // .outerWidth() takes into account border and padding.
     var width = $(this).outerWidth();

     var messageToLoad = dumpArray[$(this).attr('class')];
     $(messageToLoad).css({
         left: (pos.left + width) + "px",
         top: pos.top + "px",
         position: "absolute",
         "visibility":"visible",
         "display":"inline"
     });
 }, 
```

然后（有问题的）CSS是：

```
.content {
    margin: 0 0 0 35px;
    position:relative;
} 
```

html是：

```
...
<tr class="PostOdd">
    <td>
    <div class="contents">
        <div class="content">
            <p> Brand new post goes here</p>
            <p class="postDate">June 15, 2012, 4:02 a.m.</p>
            <p class="options">
                <a href="/comments/1/1">
                    <img class="yay" src="/static_files/chat-icon.png">
                </a>
            </p>
        </div>
    </div>
... 
```

更新：

一个。我只使用 jquery，根本没有其他 java 插件

湾。如果我在 css 文件中删除父级的“位置”属性，那么一切正常。实际上，我已经删除了它，所以这对我来说与其说是好奇不如说是个问题。我正在处理另一部分 - 如果在我完成该部分时我没有得到答案，我将制作一个 jfiddle 演示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:32:26.420

我认为它正在发生，因为 DIV “.content” 是第一个定位元素。例如，看这个结构：

```
<div class="great-grandfather">

    <div class="grandfather">

        <div class="father">

            <div class="son">

                <img class="yay" src="/static_files/chat-icon.png">

            <div>

        </div>

    </div>

</div> 
```

当您将鼠标悬停在具有“yay”类的图像上时，正如它所设置的那样`position: absolute`，您的位置的引用是第一个具有**相对**或**绝对**位置属性的父元素。

如果 DIV ".son" 具有相对或绝对位置，则 ".yay" 图像将根据 ".son" 协调您的位置。如果是“.father”就有，根据“.fahter”等等。

如果所有父元素都有位置属性，可以是相对的或绝对的，将被视为第一个父元素，在本例中为“.son”。

希望我能帮助您解释这个问题，如果您有任何疑问，请发表评论，我将编辑答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:28:08.093

您可能必须像这样将 z-index 添加到您的内容类中：

```
.content {
    margin: 0 0 0 35px;
    position: relative;
    z-index: 1;
} 
```

# authentication - 谷歌身份验证令牌使用

> ID：11067301
> 
> 赞同：0
> 
> 时间：2012-06-16T21:50:42.130
> 
> 标签：authentication, google-fusion-tables

我想使用谷歌融合表，我需要先登录。我做了一个http请求并得到“auth”令牌作为响应。但是现在我卡住了，不知道如何使用这个令牌？我既找不到关于此的任何 google 文档，也找不到此线程的帮助：[Google Auth using Token](https://stackoverflow.com/questions/3067780/google-auth-using-token)

因为将身份验证令牌添加到 url 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:12:37.130

您使用授权码来获取 access_token。

这有有用的信息：

[https://developers.google.com/usiontables/docs/articles/oauthfusiontables](https://developers.google.com/usiontables/docs/articles/oauthfusiontables)

然后，您将 access_token 与您的 sql 查询一起发送。

# django - Django 静态文件无法使用正确的配置进行开发

> ID：11067312
> 
> 赞同：3
> 
> 时间：2012-06-16T21:52:47.127
> 
> 标签：django, django-settings

我的项目布局如下： Project App1 App2

我的静态文件夹在 Project 中，有 2 个目录，如下所示：-/Project/static/css -/Project/static/js

我的 settings.py 文件中有以下配置：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

...

urlpatterns += staticfiles_urlpatterns() 
```

但是，我在从那里提供的任何文件上都得到 404。我的 INSTALLED_APPS 常量中有“django.contrib.staticfiles”，我的静态常量设置如下：

```
PROJECT_PATH = os.path.realpath(os.path.dirname(__file__))

MEDIA_ROOT = PROJECT_PATH + '/media/'

MEDIA_URL = '/media'

STATIC_ROOT = PROJECT_PATH + '/static/'

STATIC_URL = '/static' 
```

我可能做错了什么？我只得到 404，这让我发疯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:11:12.320

当我应该设置这个时，我正在设置 STATIC_ROOT 和 MEDIA_ROOT：

```
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    PROJECT_PATH + '/static/',
) 
```

# php - PHP in_array() 方法告诉我我传递了一个空值，而它不是，提示？

> ID：11067318
> 
> 赞同：0
> 
> 时间：2012-06-16T21:53:28.690
> 
> 标签：php, arrays, class, components

我正在实现一个 PHP (5.4.4) 类，用于包含用于 HTML 呈现的类定义（以动态方式），所以如果我有一个带有两个按钮、四个文本输入和一个复选框的表单，我只包含 .php 文件对应于一个表单、一个文本框和一个按钮，而不是其他任何东西（每个 HTML 对象都用一个类表示）。

但是我有一个问题......我创建了一个名为 ComponentManager 的类来管理加载过程，使用以下代码：

```
 class ComponentManager {
    // component manager properties
    protected $components;

    // constructor for this object
    public function __construct() {
        if (!empty($_SESSION['components'])) {
            $this->components = explode(" ", $_SESSION['components']);
        } else {
            $this->components = null;
        }
    }

    // destructor for this object
    public function __destruct() {
        $this->components = null;
    }

    // getter for this object
    public function __get($property) {
        if ($property === "components") {
            return $this->components;
        }
    }

    // addComponents - add components to the current components list
    public function addComponents($components) {
        if (!empty($components)) {
            $list = explode(" ", $components);

            $count = sizeof($list);
            for ($i = 0; $i < $count; $i++) {
                if (!in_array($list[$i], $this->components)) {
                    $this->components[] = $list[$i];
                    $component = null; 
```

问题是我似乎在使用 in_array() 函数时失败了，我不知道为什么......我的意思是，我过去曾多次将它用于不同的事情，但一直告诉我：

> **警告**：in_array() 期望参数 2 为数组，在第**34**行的**D:\apache\htdocs\webapps\skeleton\assets\scripts\manager.php中给出 null**

 **我在测试代码中将 $components 作为空格分隔的列表传递，如下所示：

```
$page->addComponents("form checkbox textbox button range number"); 
```

我的意图是指定：如果组件列表**不为空**，则给我一个包含输入组件的数组，并且对于每个组件，**当且仅当**它不存在于组件数组中时才插入它。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T21:57:41.107

显然，您的构造函数启动`$this->components`，`null`然后您尝试通过`addComponents()`.

您可能打算启动它，`$this->components = array();`以便列表以空数组开始，从而允许您使用`in_array()`它？**

# python - 如何为父/子/祖父母设计类层次结构？

> ID：11067319
> 
> 赞同：0
> 
> 时间：2012-06-16T21:53:30.600
> 
> 标签：python, class, oop, inheritance, composition

这个递归函数 ( `search_Bases`) 有望遍历每个基类和`__init__`它。我如何在`self`不实际使用的情况下引用每个类的`self`？我已经尝试了几件事，但我无法弄清楚。当我改变`Child()`班级做类似的事情时，它会起作用。所以我不知道下一步该做什么。

```
def search_Bases(child=0):
    if child.__bases__:
        for parent in child.__bases__:
            parent.__init__(self) # <-----I can't figure out how to initiate the class
                                  # without referring to 'self'.... 
            search_Bases(parent)

class Female_Grandparent:
    def __init__(self):
        self.grandma_name = 'Grandma'

class Male_Grandparent:
    def __init__(self):
        self.grandpa_name = 'Grandpa'

class Female_Parent(Female_Grandparent, Male_Grandparent):
    def __init__(self):
        Female_Grandparent.__init__(self)
        Male_Grandparent.__init__(self)
        self.female_parent_name = 'Mother'

class Male_Parent(Female_Grandparent, Male_Grandparent):
    def __init__(self):
        Female_Grandparent.__init__(self)
        Male_Grandparent.__init__(self)
        self.male_parent_name = 'Father'

class Child(Female_Parent, Male_Parent):
    def __init__(self):
        Female_Parent.__init__(self)
        Male_Parent.__init__(self)

        #search_Bases(Child)

child = Child()
print child.grandma_name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T01:59:31.700

我认为您没有正确理解类继承。在 Python 中，

```
class Female_Parent(Female_Grandparent, Male_Grandparent):
    def __init__(self): 
```

表示`Female_Parent`IS-A `Male_Grandparent`，这似乎不太可能。你想说的是

```
class Female_Parent(object):
    def __init__(self, female_grandparent, male_grandparent): 
```

这也有问题，因为角色的变化取决于谁在问 - 根据定义，`Male_Grandparent`（他的孙子孙女的）也是`Male_Parent`（他的孩子的）谁也是`Child`（他的父母的）。

您可以将所有课程归结为

```
class Person(object):
    def __init__(self, mother, father): 
```

并从那里获得进一步的关系。这给出了一个更简单的结构，没有观点矛盾，但仍然导致评估进一步关系的问题，因为给定人的链接只会“上升” - 给定人知道他们的父母是谁，但不能识别他们的父母孩子们。

您可以保留所有人员的列表并每次搜索该列表（就像一位母亲在幼儿园周围说：“你是我的孩子吗？你吗？你是我的孩子吗？”）但这似乎非常低效。

相反，您可以将每种关系设为双向 - 每个父母都有一个包含所有孩子的列表，每个孩子都有一个包含所有父母的列表。它使添加和删除人员变得更加困难，但非常值得。

以下内容比我喜欢的要长，但我可以做到尽可能短；它应该更适合您的需求！

```
class Person(object):
    def __init__(self, name, sex, parents=None, children=None):
        """
        Create a Person
        """
        self.name = name
        self.sex = sex    # 'M' or 'F'

        self.parents = set()
        if parents is not None:
            for p in parents:
                self.add_parent(p)

        self.children = set()
        if children is not None:
            for c in children:
                self.add_child(c)

    def add_parent(self, p):
        self.parents.add(p)
        p.children.add(self)

    def add_child(self, c):
        self.children.add(c)
        c.parents.add(self)

    def __str__(self):
        return self.name

    def __repr__(self):
        return "Person('{}', '{}')".format(self.name, self.sex)

    #
    # Immediate relationships
    #
    # Each fn returns a set of people who fulfill the stated relationship
    #

    def _parent(self):
        return self.parents

    def _sibling(self):
        return set().union(*(p.children for p in self.parents)) - set([self])

    def _child(self):
        return self.children

    def _female(self):
        if self.sex=='F':
            return set([self])
        else:
            return set()

    def _male(self):
        if self.sex=='M':
            return set([self])
        else:
            return set()

    def relation(self, *rels):
        """
        Find the set of all people who fulfill the stated relationship

        Ex:
            self.relation("parent", "siblings")     # returns all aunts and uncles of self
        """
        # start with the current person
        ps = set([self])

        for rel in rels:
            # each argument is either a function or a string
            if callable(rel):
                # run the function against all people in the current set
                #   and collect the results to a new set
                ps = set().union(*(rel(p) for p in ps))
            else:
                # recurse to evaluate the string
                do = Person._relations[rel]
                ps = set().union(*(p.relation(*do) for p in ps))

        return ps

    def print_relation(self, *rels):
        print ', '.join(str(p) for p in self.relation(*rels))

#
# Extended relationships
#
# Supplies the necessary information for Person.relation() to do its job -
# Each key refers to a recursive function tree (nodes are string values, leaves are functions)
#
# (Unfortunately this table cannot be created until the Person class is finalized)
#
Person._relations = {
    "parent":        (Person._parent,),
    "mother":        (Person._parent, Person._female),
    "father":        (Person._parent, Person._male),
    "sibling":       (Person._sibling,),
    "sister":        (Person._sibling, Person._female),
    "brother":       (Person._sibling, Person._male),
    "child":         (Person._child,),
    "daughter":      (Person._child, Person._female),
    "son":           (Person._child, Person._male),
    "grandparent":   ("parent", "parent"),
    "grandmother":   ("parent", "mother"),
    "grandfather":   ("parent", "father"),
    "aunt":          ("parent", "sister"),
    "uncle":         ("parent", "brother"),
    "cousin":        ("parent", "sibling", "child"),
    "niece":         ("sibling", "daughter"),
    "nephew":        ("sibling", "son"),
    "grandchild":    ("child", "child"),
    "grandson":      ("child", "son"),
    "granddaughter": ("child", "daughter")
} 
```

现在，在行动：

```
mm  = Person('Grandma', 'F')
mf  = Person('Grandpa', 'M')
m   = Person('Mom', 'F', [mm, mf])
fm  = Person('Nana', 'F')
ff  = Person('Papi', 'M')
f   = Person('Dad', 'M', [fm, ff])
me  = Person('Me', 'M', [m, f])
s   = Person('Sis', 'F', [m, f])
joe = Person('Brother-in-law', 'M')
s1  = Person('Andy', 'M', [s, joe])
s2  = Person('Betty', 'F', [s, joe])
s3  = Person('Carl', 'M', [s, joe])

me.print_relation("grandmother")    # returns 'Nana, Grandma'
me.print_relation("nephew")         # returns 'Andy, Carl' 
```

# emacs - with-timeout 示例用法（哪些原语可以等待？）

> ID：11067321
> 
> 赞同：4
> 
> 时间：2012-06-16T21:53:49.913
> 
> 标签：emacs, timer

文档说`with-timeout`宏只能等待它在内部执行的代码“是可以等待的原语”。有没有这种原始的例子？

更多信息：我遇到了一种情况，我必须从一个对 TCP 服务器进行异步调用的函数返回结果。因此，如果您知道如何使此调用同步，那也会有所帮助。

不幸的是，我不能选择让它同步——这是一个由自动完成库调用的回调，它必须返回值。以下是尝试执行此操作的代码：

```
(defun haxe-ac-init ()
  (unless (get-process haxe-compiler-process)
    (haxe-connector-sentinel nil nil))
  (let ((ac-request
         (haxe-build-compile-string
          (haxe-package) (buffer-file-name))))
    (save-buffer)
    (setq haxe-last-ac-candidates nil)
    (process-send-string haxe-compiler-process ac-request)
    (process-send-string haxe-compiler-process "\0")
    (process-send-eof haxe-compiler-process))
  (haxe-log 3 "haxe-ac-init sent request.")
  (with-local-quit
    (with-timeout (3 (haxe-log 0 "Compiler is too slow..."))
      (block x ;; this while sometimes will loop forever
        (while (equal (process-status (get-process haxe-compiler-process)) 'open)
          (when (and last-compiler-response (= received-status 2))
            (haxe-parse-ac-response last-compiler-response)
            (throw 'x haxe-last-ac-candidates))))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:24:54.433

要回答我自己的问题，这并不容易！:) 所以...为了使`with-timeout`工作，就我而言，我必须`accept-process-output`进入循环。这似乎使 Emacs 有能力中断循环，从等待写入的进程中读取并返回到循环。最终版本的代码如下：

```
(defun haxe-ac-init ()
  (message "haxe-ac-init 0 %s" (get-process haxe-compiler-process))
  (let ((old-proc (get-process haxe-compiler-process)))
    ;; (message "haxe-ac-init 1 %s %s" old-proc (when old-proc (process-status old-proc)))
    ;; process-live-p doesn't exist :/
    (when (or (not old-proc)
              (not (equal (process-status old-proc) 'open)))
      (setq haxe-network-process nil)
      (haxe-connect-to-compiler-server)
      (sleep-for 1)
      (setq old-proc (get-process haxe-compiler-process)))
    (let ((ac-request
           (haxe-build-compile-string
            (haxe-package) (buffer-file-name))))
      (setq haxe-last-ac-candidates nil
            haxe-last-ac-candidates-filtered nil
            last-compiler-response nil
            received-status 2)
      (clrhash documentation-hash)
      (process-send-string old-proc ac-request)
      (process-send-string old-proc "\0")
      (process-send-eof old-proc)
      (haxe-log 3 "haxe-ac-init sent request: %s\n completing: %s"
                ac-request
                (substring (buffer-string)
                           (max (point-min) (- (point) 10))
                           (point))))
    (with-local-quit
      (with-timeout (5 (haxe-log 0 "Failing to fetch all completion options, giving up"))
        (while (not haxe-last-ac-candidates)
          (accept-process-output old-proc)
          (haxe-log 3 "statsus: %s"
                    (when last-compiler-response
                      (concat
                       (substring last-compiler-response
                                  0 (min (length last-compiler-response) 42)) "...")))
          (when (and last-compiler-response (= received-status 2))
            (if (string= response-terminator "</list>\n")
                (haxe-parse-ac-response last-compiler-response)
              (haxe-parse-hint-response last-compiler-response)))))
      haxe-last-ac-candidates))) 
```

# html - Rails：image_tag 和 usemap 在 Firefox 中表现不佳

> ID：11067326
> 
> 赞同：0
> 
> 时间：2012-06-16T21:54:22.020
> 
> 标签：html, ruby-on-rails, firefox, imagemap

我正在使用以下代码加载图像和关联的图像映射：

```
<span><%= image_tag bookcase.image_url.to_s, :usemap => "#shelfmap" %></span>
<map name="#shelfmap">
  <area shape="rect" coords="0,0,500,100" href="\" alt="test" />
</map> 
```

图像地图在 Google Chrome 中加载，但由于某种原因它没有在 Firefox 中显示。我检查了源代码，图像确实有一个 usemap 参数设置为“#shelfmap”。我不确定还有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:08:14.430

从[精细规范](http://www.w3.org/TR/html-markup/img.html#img.attrs.usemap)：

> **usemap** = hash-name reference
> 对与图像相关联的映射元素的哈希名称引用。

什么是*哈希名称参考*？好吧，[哈希名称引用](http://www.w3.org/TR/html-markup/datatypes.html#common.data.hash-name)是：

> *对 type类型*元素的有效哈希名称引用是一个以 " `#`" 字符开头的字符串，后跟一个与文档中任何位置type*类型*`name`元素的属性值完全匹配的字符串。

 *这意味着如果你有，`<img usemap="#x">`那么你应该有一个`<map name="x">`元素来定义图像映射；请注意，该`name`属性不包含哈希。所以你`<map>`应该看起来像这样：

```
<map name="shelfmap">
  <area shape="rect" coords="0,0,500,100" href="\" alt="test" />
</map> 
```

Chrome 很好地忽略了你的错误（属性`#`中的`name`），Firefox 很好地强迫你遵守规范而不是试图猜测你的意思。*

# iphone - 无法将应用程序包转换为 NSData

> ID：11067327
> 
> 赞同：0
> 
> 时间：2012-06-16T21:54:24.547
> 
> 标签：iphone, objective-c, ios, ipad, nsdata

我正在尝试将我的包转换为 NSData 以便我可以散列数据并让服务器在允许下载之前验证散列。唯一的问题是，当我尝试将包转换为 NSData 时，我`Error: The operation couldn’t be completed. (Cocoa error 257.)`查找错误 257，这意味着由于权限问题而无法读取包。我做错了什么？谢谢你的帮助。

```
NSString *bundlePath = [[NSBundle mainBundle] resourcePath];  
NSLog(@"%@", bundlePath);
NSError *error;
NSData *bData = [NSData dataWithContentsOfFile:bundlePath options:nil error:&error];
NSLog(@"Error: %@", [error localizedDescription]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:15:25.593

如果盗版保护是您的最终目标，请参阅此以获得一些见解和代码。

[http://thwart-ipa-cracks.blogspot.com/2008/11/detection.html?m=1](http://thwart-ipa-cracks.blogspot.com/2008/11/detection.html?m=1)

# javascript - jQuery函数未执行

> ID：11067330
> 
> 赞同：-5
> 
> 时间：2012-06-16T21:54:40.853
> 
> 标签：javascript, jquery, wordpress

这应该非常简单。第一个代码块有效，但是当我将它包装在一个函数中并尝试调用该函数时，它不起作用。

**这有效：**

```
$(document).ready(function() {

        $("#groups-image").hide();
        $("#quiz-image").hide();
        $("#members-image").hide();     

}); 
```

**这不起作用：**

```
$(document).ready(function() {

        function hideatstart() {

        $("#groups-image").hide();
        $("#quiz-image").hide();
        $("#members-image").hide();     
        }

        hideatstart();
}); 
```

**更新：**查看接受的答案后，我能够获得工作代码。它涉及在代码行之间没有任何空格，这将允许插入 p 标记。最佳做法是将 JQuery 删除到单独的脚本中，我会这样做。以下代码有效：

```
$(document).ready(function() {
    function hideatstart(){
        $("#groups-image").hide();
        $("#quiz-image").hide();
        $("#members-image").hide();
        }
    hideatstart();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:24:14.313

我检查了您的实时网站上的 HTML，发现您的代码段输出如下：

```
<div class="art-postcontent">
    <!-- article-content -->
    <!-- [snipped] -->
    <p><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script><br />
<script type="text/javascript">
    $(document).ready(function() {</p>
<p>         function hideatstart() {</p>
<p>         $("#groups-image").hide();
            $("#quiz-image").hide();
            $("#members-image").hide();     
            }</p>
<p>         hideatstart();
    });
</script></p>
    <!-- [snipped] -->
</div> 
```

如您所见，WordPress 的`wpautop`过滤器将您的行包含在段落中。

如果您需要在某处注入脚本，最好使用插件或主题功能，而*不是*将代码粘贴到 WordPress 帖子或小部件中。所有常规的 WordPress 内容类型都被转义以防止此类可能的恶意注入。您似乎正在使用自定义`art`帖子类型，通常会得到类似的处理。有一些方法可以防止内容被转义，但您应该**认真**考虑将脚本代码移到其他地方。

# cluster-analysis - 双标题聚类

> ID：11067332
> 
> 赞同：1
> 
> 时间：2012-06-16T21:54:48.873
> 
> 标签：cluster-analysis, bipartite

我有一个查询的二分图和相关的点击网址。基于这些查询，我想对查询进行聚类。我打算使用简单的基于集合的公式来确定两个查询是否相同。我的初始输入数据格式如下：

```
Url   Queries   
Url1   Q1, Q2, Q3   
Url2   Q1, Q5, Q6 
```

我很难确定合适的算法来解决这个问题。

将不胜感激任何帮助。

# ios - UIStepper 没有更新相应的标签

> ID：11067334
> 
> 赞同：1
> 
> 时间：2012-06-16T21:54:55.357
> 
> 标签：ios, uitableview, uilabel, uistepper

我有一个以`UIStepper`编程方式在我的`UITableViewCell`. `UILabel`我还以编程方式为单元创建了一个。发生的事情是，按下时步进器正在访问`UILabel`位于不同单元格中的 a，即索引路径 1 而不是 0。这是代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 
...
 //---------UIStepper Creation-------------------//

stepper = [[UIStepper alloc]init];
[stepper setFrame:CGRectMake(220.0f, 65.0f, 0.0f, 0.0f)];
[stepper setTag: indexPath.row];
[stepper addTarget:self action:@selector(stepperPressed:) forControlEvents:UIControlEventValueChanged];

stepperLabel = [[UILabel alloc] init];
[stepperLabel setFrame:CGRectMake(105,70, 20, 20)];
[stepperLabel setTextColor:[UIColor whiteColor]];
[stepperLabel setBackgroundColor:[UIColor clearColor]];
[stepperLabel setTag:stepper.tag];
[stepperLabel setText:[NSString stringWithFormat: @"%d", (int) [stepper value]]];
stepperLabel.lineBreakMode = UILineBreakModeWordWrap;
stepperLabel.numberOfLines = 1;//Dynamic

//Set min and max
[stepper setMinimumValue:0];
[stepper setMaximumValue:4];
// Value wraps around from minimum to maximum
[stepper setWraps:YES];
[stepper setContinuous:NO];

// To change the increment value for each step

...
[cell addSubview:stepperLabel];
[cell addSubview:stepper];
return cell; 
```

这是我需要执行操作的地方

```
-(void) stepperPressed:(UIStepper *)sender{
NSIndexPath *indexPath = [self.tableView indexPathForCell:(UITableViewCell *)[sender superview]];
int row = indexPath.row;
NSLog(@"stepper is in row %d",row);
NSLog(@"stepperLabel is in row %d",stepperLabel.tag);
double value = [sender value];
if(sender.tag ==row){
  [stepperLabel setText:[NSString stringWithFormat: @"%d", (int) value]];
}
} 
```

真的需要一些帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T22:43:20.787

stepperLabel 将始终指向您在 cellForRowAtIndexPath 中创建的最后一个 Cell 的标签。所以你不能这样使用它。

编辑答案：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    valueArray=[[NSMutableArray alloc]initWithObjects:[NSNumber numberWithInt:0],[NSNumber numberWithInt:0],[NSNumber numberWithInt:0], nil]; //Array Count = 
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
       cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(10.0f, 10.0f, 100.0f, 21.0f)];
       [cell addSubview:label];
       [label setTag:456];

       UIStepper *stepper = [[UIStepper alloc]initWithFrame:CGRectMake(110.0f, 10.0f, 20.0f, 20.0f)]; 
       [cell addSubview:stepper];
       [stepper setTag:123];
       [stepper addTarget:self action:@selector(stepperChanged:) forControlEvents:UIControlEventValueChanged];        
   }
   [cell setTag:indexPath.row];
   int count = [[valueArray objectAtIndex:indexPath.row] intValue];

   [(UIStepper*)[cell viewWithTag:123] setValue:count];
   [(UILabel*)[cell viewWithTag:456] setText:[NSString stringWithFormat:@"%@: %d", @"Stepper", count]];
    return cell;
}
- (void)stepperChanged:(UIStepper*)sender {
    int row = [sender.superview tag];
    int value = (int)[sender value];
    NSLog(@"Stepper%d = %d", row,value);

    [valueArray replaceObjectAtIndex:row withObject:[NSNumber numberWithInt:value]];

    [(UILabel*)[(UITableViewCell *)sender.superview viewWithTag:456] setText:[NSString stringWithFormat:@"%@: %d", @"Stepper", value]];
} 
```

# php - 使用 PHP 进行 MySQL 查询

> ID：11067340
> 
> 赞同：1
> 
> 时间：2012-06-16T21:56:14.490
> 
> 标签：php, mysql, preg-match

我正在自学做 MySQL 和 PHP。这对我来说是一个新世界，我有几本书，在问这里之前我对谷歌做了很多研究。所以我遇到了以下问题，找不到答案，我有一个 MySQL 数据库，该数据库有一个名为 URL 的特定字段。

部分 URL 字段如下所示：

```
&path=products&user=Mark24&id=2616 
```

目前我已经设置好了，所以人们可以在数据库中搜索项目，效果很好。我希望能够添加到搜索功能的是按用户搜索。如您所见，用户位于整个网址的中间，所以我有这个：

```
 $query = "select Productid, Productname, url,  from Products where Productid like '%$keyword%' or Productname like '%$keyword%' or url like '%$keyword%' ";
    $result = mysqli_query($dbc,$query); 
```

现在真正的问题来了，^^ 这很有效，人们实际上可以搜索用户名，它会准确显示我想要的内容。但是，如果人们在 url 中搜索单词“products”或“path”，他们将获得超过 2000 个匹配项，因为我数据库中的每个 url 都有单词 products 和 path。为什么我想避免这种情况？我不希望客户查找我们的整个数据库，我也担心服务器过载，因为每次查询客户都会获得产品的图像，以及产品名称和产品链接。尝试加载超过 2000 张图片也会减慢或崩溃我的浏览器，所以我需要以某种方式解决这个问题，但我不知道如何解决它。

那么有没有办法只匹配 URL 字段中显示 user="blah" 的部分？我用 PHP 来做这个吗，也许是预赛？？？

非常感谢您提供的任何信息！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T21:59:02.817

为什么不多做两列呢？一个包含用户名和ID？然后，当您进行搜索时，请改为搜索这些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:10:59.857

试试这个：

```
$query = "select Productid, Productname, url,  from Products where Productid like '%$keyword%' or Productname like '%$keyword%' or url like '%user=$keyword%' "; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T22:06:08.670

只是搜索

```
"%&path=products&user=%what you're searching for%" 
```

这样，除了 path=product 参数之外，您只会返回那些具有“产品”的行。或者，mysql、postgresql 等数据库也允许您使用[正则表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)，但在处理能力方面成本更高。

在正则表达式形式中，它看起来有点像这样；中间有 php 变量：

```
"... WHERE url REGEXP  '&path=products&user=" . $user . "&id=[0-9]+$'" 
```

如果你使用这样的东西，那么你需要通过转义来保护你输入的值免受 sql 注入。您应该开始查看[pdo](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)以制作数据库驱动的应用程序，并使用带有[绑定参数的](http://www.php.net/manual/en/pdostatement.bindparam.php)[准备好的语句](http://www.php.net/manual/en/pdo.prepare.php)来保护自己。你基本上只需要构造你的正则表达式并将它作为参数传递给绑定。

# terminology - 术语“monad”是否适用于 Maybe 或 List 等类型的值，还是仅适用于类型本身？

> ID：11067343
> 
> 赞同：15
> 
> 时间：2012-06-16T21:57:29.890
> 
> 标签：terminology, monads

我注意到“monad”这个词的使用方式似乎有些不一致。我开始相信这是因为那里的许多（如果不是大多数）monad 教程是由刚刚开始自己​​弄清楚 monad 的人编写的（例如：核废料太空服卷饼），所以这个学期结束了变得有点超载/损坏。

特别是，我想知道术语“monad”是否可以应用于类型的单个值，例如 Maybe、List 或 IO，或者术语“monad”是否真的应该只应用于类型本身。

这是一个微妙的区别，所以也许一个类比可能会更清楚。在数学中，我们有环、场、群等。这些术语适用于整个值集以及可以对它们执行的操作，而不是单个元素。例如，整数（连同加法、否定和乘法运算）形成一个环。你可以说“整数是一个环”，但你永远不会说“5 是一个环”。

那么，你能说“`Just 5`是一个单子”，还是说“5是一个环”是错误的？我不知道范畴论，但我的印象是说“`Maybe`是一个单子”而不是“`Just 5`是一个单子”才有意义。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T16:52:25.800

“Monad”（和“Functor”）通常被*误*用作描述值。没有值是 monad、functor、monoid、applicative functor 等。只有类型和类型构造函数（更高种类的类型）可以。当你听到（你会听到）“列表是幺半群”或“函数是单子”等，或者“这个函数需要一个单子作为参数”时，不要相信它。*问演讲者“考虑到 Haskells 类对类型*（包括高阶类）而不是值进行分类，任何值怎么可能是幺半群（或单子或……） ？” 列表不是幺半群（等）。`List a`是。

我的猜测是，这种流行的误用源于具有价值类而不是类型类的主流语言，因此习惯性的、无意识的价值类思维潜入其中。

为什么我们是否准确地使用语言很重要？因为我们用语言思考，我们通过语言建立和传达理解。所以为了有清晰的想法，有清晰的语言是有帮助的（或者能够随时）。

“我们语言的邋遢让我们更容易产生愚蠢的想法。关键是这个过程是可逆的。” - 乔治奥威尔，政治与英语

*编辑：*这些评论适用于 Haskell，而不适用于更一般的范畴论设置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-18T19:55:59.997

`List`是一个单子，`List a`是一个类型，并且`[]`是一个`List a`（类型的元素）。

从技术上讲，monad 是一个具有额外结构的*函子。*在 Haskell 中，我们只使用 Haskell 类型类别中的函子。

因此，它特别是一个“函数”，它接受一种类型并返回另一种类型（它有 kind `* -> *`）。

`List`, `State s`, `Maybe`, 等是单子。`State`不是单子，因为它有 kind `* -> * -> *`。

*（顺便说一句：为了混淆问题，Monads 只是函子，如果我给自己一个偏序集合 A，那么它形成一个类别， Hom(a, b) = { 1 element } if a <= b and Hom(a , b) = 否则为空 现在任何递增函数 f : A -> A 形成一个函子，单子是那些满足 x <= f(x) 和 f(f(x)) <= f(x) 的函数，因此 f(f(x)) = f(x) - 这里的 monad 在技术上是“A -> A 的元素”。另见[闭包运算符](http://en.wikipedia.org/wiki/Closure_operator)。）*

*（旁白 2：由于您似乎了解一些数学知识，因此我鼓励您阅读范畴论。您会发现代数结构可以看作是由单子产生的。请参阅[Dan Piponi 的优秀博客中的这篇优秀博客条目](http://blog.sigfpe.com/2007/02/monads-for-vector-spaces-probability.html)预告片。）*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T20:35:17.967

确切地说，单子是范畴论的结构。他们没有直接对应的代码。为简单起见，让我们讨论通用函子而不是 monad。在 Haskell 的情况下，大致来说，函子是从一类类型到一类类型的映射，它也将第一类中的函数映射到第二类中的函数。该`Functor`实例使您可以访问映射函数，但不直接捕获函子的概念。

然而，公平地说，实例中提到的类型构造函数`Functor`是实际的函子：

```
instance Functor Tree 
```

在这种情况下`Tree`是函子。但是，因为`Tree`是类型构造函数，它不能代表同时生成函子的两个映射函数。映射函数的函数称为`fmap`。因此，如果您想精确，则必须说元组`(Tree, fmap)`是函子，`fmap`特定`fmap`from`Tree`的`Functor`实例在哪里。再次为方便起见，我们称其`Tree`为函子，因为对应的`fmap`来自其`Functor`实例。

请注意，函子始终是 kind 的类型`* -> *`。所以`Maybe Int`不是函子——函子是`Maybe`。人们也经常谈论“国家单子”，这也是不准确的。 `State`是一个包含无限多个状态单子的整个家族，如您在实例中所见：

```
instance Monad (State s) 
```

对于每种类型`s`，类型构造函数`State s`（种类`* -> *`）都是*一个*状态单子，是众多单子之一。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T21:13:20.550

> 那么，你能说“Just 5 is a monad”，还是说“5 is a ring”是错误的？

你的直觉是完全正确的。`Int`is to `Ring`( `AbelianGroup`orwhat) as `Maybe`is to `Monad`( `Functor`orwhat)。值（`5`、`Just 5`等）并不重要。

在代数中，我们说整数的集合*形成*一个环；在 Haskell 中，我们会（非正式地）说它`Int`是类型类的成员，或者（稍微`Ring`更正式地）存在. 你可能会觉得[这个提议](http://hackage.haskell.org/trac/haskell-prime/wiki/NumericClasses)很有趣和/或有用。无论如何，同样的处理单子。`Ring``Int`

> 我不知道范畴论，但是...

无论如何，如果您对抽象代数有所了解，那么您就是金子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T22:01:38.600

我会说“只有 5 是 Monad 的实例类型”，就像我会说“5 是一个具有类型（整数）是一个环的数字”。

我使用术语实例是因为在 Haskell 中您如何声明类型类的实现，而 Monad 就是其中之一。

# php - 有没有办法在没有持续运行的服务器端 php websocket 服务器的情况下运行 websockets？

> ID：11067344
> 
> 赞同：3
> 
> 时间：2012-06-16T21:57:35.313
> 
> 标签：php, websocket, phpwebsocket

让我澄清一下

我玩过，[`phpwebsockets`](http://code.google.com/p/phpwebsocket/)发现它需要`websocket server`永远/持续运行以将状态等保存在内存中，`websockets`当无法在服务器端运行服务器时，有什么方法可以运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:29:14.087

您可以使用托管的实时服务，例如我工作的[Pusher 。](http://pusher.com)这[是实时托管服务的完整列表](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T17:36:48.820

总会有某种服务器不断地监听。例如，HTTP 流量由持续运行的 Web 服务器（Apache、Nginx、Lighttpd 等）传递。

Web 服务器可以生成一个新的基于 PHP 的进程，然后将客户端的连接交给新进程。然而，目前主要的 Web 服务器都没有这样做，并且路由 WebSocket 流量的 Web 服务器模块的范例是将连接发送到现有的、持续运行的服务器。

您必须编写自己的自定义 Web 服务器，以防止不断运行 WebSocket 服务器……然后，真的，有什么意义，因为您仍在编写自己的不断运行的服务器？

# javascript - 使用 JavaScript 使用 MoSync 原生 UI 捕获用户输入

> ID：11067349
> 
> 赞同：1
> 
> 时间：2012-06-16T21:58:40.640
> 
> 标签：javascript, android, html, mobile, mosync

我一直在努力使用`JavaScript`and来捕获用户输入`jQuery`。我试过使用`$("#userInput").val(),getNativeElementById("userInput").text/getText/getProperty("text").`

我正在尝试构建用户登录屏幕，但文档确实不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:19:58.893

我设法让它工作（虽然不使用 jQuery），结果证明文档是错误的。这是一个工作示例：

```
var editbox = document.getNativeElementById("editbox");
editbox.getProperty(
    "text",
    function(property, value)
    {
        alert("Text is: " + value);
    },
    function()
    {
        alert("getProperty error");
    }); 
```

我使用这个标记创建了编辑框：

```
<div data-widgetType="EditBox" id="editbox"
    data-width="100%" data-text="Edit me" data-fontSize="20">
</div> 
```

这是文档：

[http://www.mosync.com/files/imports/doxygen/latest/html5/mosync-nativeui.js.html#mosync.nativeui.NativeWidgetElement.getProperty](http://www.mosync.com/files/imports/doxygen/latest/html5/mosync-nativeui.js.html#mosync.nativeui.NativeWidgetElement.getProperty)

它说 value 和 widgetID 将传递给成功回调，这是错误的，传递的是属性名称和属性值。

# opengl - OpenGL是如何在操作系统中实现的？

> ID：11067353
> 
> 赞同：12
> 
> 时间：2012-06-16T21:59:48.383
> 
> 标签：opengl, operating-system, implementation

我正在研究 linux 和图形 API，但是我对如何在操作系统中实现 opengl 感到困惑。它只是一组使用内核与您的显卡“讨论”哪些像素要着色或不着色的库吗？如果是这样，那么我不知道管道的来源 - 3D 场景如何被光栅化以及着色器如何影响几何图形。

为什么 GPU 可以同时支持 DX 和 OGL 的着色器语言？- 着色器语言实际上适合哪里？- 它们是在运行时编译还是解释？

尽管使用了多个游戏引擎，但我本人对图形 API 并没有太多经验——通常，由于多层抽象，细节会远远丢失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:50:20.837

我在这里彻底解释了：[https](https://stackoverflow.com/a/6401607/524368) ://stackoverflow.com/a/6401607/524368和这里[https://stackoverflow.com/a/7967211/524368](https://stackoverflow.com/a/7967211/524368)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:08:10.717

至少在大多数典型的显卡上，大部分 OpenGL 管线（固定的或可编程的）都是在图形硬件本身中实现的。DirectX 更是如此（即，DirectX 在 OpenGL 中缺少很多当前硬件不直接支持的功能）。

着色器通常被编译。显卡有一个特殊用途的处理器（或者，通常不止一个），所以编译器接受着色器语言的输入并将其转换为该处理器的汇编语言，就像 C 编译器为 CPU 所做的那样。支持不同的输入语言与支持 C、C++、Pascal、Fortran、Cobol 等输入的单个 CPU 并没有太大的不同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T22:02:35.950

我无法谈论 API 是如何实现的。

但我确实从经验中知道着色器是编译的。因此，您编译它们并将它们发送到执行它们的 GPU。

# php - 处理、解析和流式传输大型文本文件的实用方法是什么？

> ID：11067357
> 
> 赞同：0
> 
> 时间：2012-06-16T22:00:25.793
> 
> 标签：php, javascript, jquery, linux, centos

我目前有一个日志文件流（文本格式），它通过运行进程不断附加。我正在使用 PHP 将其处理为 JSON 格式，然后使用 jQuery 的 getJSON 对其进行解析。

我想知道在日志文件中获取数据的实用方法是什么。我使用了 jQuery 的 post 函数，该文件太长而无法获取。函数 getJSON 很好，但是日志文件太长以至于 PHP 无法处理它，所以它没有被传递给函数。

我曾考虑过限制日志文件中的行数（来自 CentOS 的 Tee），并从日志文件中获取一定数量的行（对于速度来说不切实际），但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:10:08.750

要仅读取文件的最后一部分，请[fseek](http://php.net/fseek)到一个好的位置并从那里开始。例如：

```
define('FILE', '/var/log/logfile');
define('SIZE', 1024*1024);
if (filesize(FILE) <= SIZE) {
  $text = file_get_contents(FILE);
} else {
  $fh = fopen(FILE, 'r');
  fseek($fh, -SIZE, SEEK_END);
  // Remove up to newline to avoid a broken line
  $skip = strlen(fgets($fh));
  $text = fread($fh, SIZE - $skip);
  fclose($fh);
}
// Do your work with $text here... 
```

# objective-c - 方法和可选参数

> ID：11067358
> 
> 赞同：3
> 
> 时间：2012-06-16T22:00:34.390
> 
> 标签：objective-c, ios

我在 Apple 文档中读到我们可以在目标 c 方法调用中使用可选参数。Apple 文档中的示例：

> 采用可变数量参数的方法也是可能的，尽管它们很少见。额外的参数在方法名称的末尾用逗号分隔。（与冒号不同，逗号不被视为名称的一部分。）在以下示例中，虚构的 makeGroup: 方法传递了一个必需参数（组）和三个可选参数：

```
[receiver makeGroup:group, memberOne, memberTwo, memberThree]; 
```

有人可以告诉何时使用此功能以及如何使用？Apple API中有任何示例吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T22:11:03.837

您描述的方法类型称为*可变参数*方法。Cocoa 中的示例包括`+[NSArray arrayWithObjects:]`和`+[NSDictionary dictionaryWithObjectsAndKeys:]`。您可以使用定义在`stdarg.h`.

`+[NSArray arrayWithObjects:]`以下是如何实现该方法的示例：

```
+ (NSArray *)arrayWithObjects:(id)firstObject, ... {
    int count = 0;
    va_list ap;
    va_start(ap, firstObject);
    id object = firstObject;
    while (object) {
        ++count;
        object = va_arg(ap, id);
    }
    va_end(ap);

    id objects[count];
    va_start(ap, firstObject);
    object = firstObject;
    for (int i = 0; i < count; ++i) {
        objects[i] = object;
        object = va_arg(ap, id);
    }
    va_end(ap);

    return [self arrayWithObjects:objects count:count];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:55:35.923

我已经写过一次或两次这样的方法。这有点痛苦。它的工作方式非常类似于在 C 程序中解析命令行。

我现在不记得在哪里找到了有关如何操作的文档。如果我没记错的话，它使用函数 va_start() 和 va_end()。

这种方法的一个主要缺点是逗号分隔的参数列表没有经过类型检查，并且没有像在普通方法中那样的标签。

使用这种方法的主要方法是在像 NSArray 的 arrayWithObjects 这样的方法中，您需要允许任何类型的可变大小的参数列表或 NSLog。

# javascript - parseInt 解析数字字符串的替代方法

> ID：11067362
> 
> 赞同：3
> 
> 时间：2012-06-16T22:01:00.037
> 
> 标签：javascript

假设我有一个数字字符串：

```
var foo = "0"; 
```

假设我想将它解析为一个数字，并将它的值分配给`bar`（只是一个算术示例），我知道我可以这样做：

```
var bar = parseInt(foo, 10)+1; 
```

但我相信上面的例子可以更简单，更易读。考虑这个例子：

```
//alternative 1
var bar = +foo+1; 
```

和这个：

```
//alternative 2
var bar = ++foo; 
```

这两个也将产生相同的结果`bar`（后者也将增加`foo`，但这没问题）。

我的问题是，通过使用这些替代方法之一，我是否会将我的代码暴露于相同的可能依赖于实现的缺陷，[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)而无需指定`radix`/ `base`？

或者这些也可以安全使用？

[**小提琴进行测试**](http://jsfiddle.net/ult_combo/q4q4v/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:12:56.007

从**可读性**和**可维护性** `parseInt`的角度来看是最好的选择。它清楚地**说明了它做了什么**并且**可靠地完成了它**。

明天，当一位开发人员加入该项目时，或者在几个月后您自己将查看自己的代码时，或者如果您突然决定增加 10 而不是仅增加 1，那么与您一起工作的麻烦就会减少`parseInt`.

另外，尝试[JSLint](http://www.jslint.com/)。这很值得。

# windows - Windows 7 防止关机

> ID：11067364
> 
> 赞同：0
> 
> 时间：2012-06-16T22:01:19.973
> 
> 标签：windows, administration, shutdown, autoit, system-administration

我希望能够防止在 Windows 7 上定期关机。我找到了这个 AutoIt 脚本，但它并没有真正单击强制关机对话框上的 CANCEL 按钮。

有人可以测试它并告诉我到底出了什么问题？

```
$WM_QUERYENDSESSION = 0x11
GUIRegisterMsg($WM_QUERYENDSESSION, "Cancel_Shutdown")
$Hwnd = GUICreate("PreventShutdownGUI")
;~ GUISetSTate(@SW_SHOW)

_ShutdownBlockReasonCreate($hwnd, "Sorry, AutoIt > Windows")
TrayTip("Shutdown Blocker - Started", "Denies shutdowns from now on.", 20)
While Sleep(100)
WEnd
_ShutdownBlockReasonDestroy($hwnd)

Func _ShutdownBlockReasonCreate($Hwnd, $wStr)
    ; http://msdn.microsoft.com/en-us/library/ms...28VS.85%29.aspx
    ; Prog@ndy
    Local $aResult = DllCall("User32.dll", "int", "ShutdownBlockReasonCreate", "hwnd", $Hwnd, "wstr", $wStr)
    If @error Then Return SetError(1,0,0)
    Return $aResult[0]
EndFunc

Func _ShutdownBlockReasonDestroy($Hwnd)
    Local $aResult = DllCall("User32.dll", "int", "ShutdownBlockReasonDestroy", "hwnd", $Hwnd)
    If @error Then Return SetError(1,0,0)
    Return $aResult[0]
EndFunc

Func Cancel_Shutdown($hWndGUI, $MsgID, $WParam, $LParam)
    ; This HAS to be here to capture the endsession...
    AdlibRegister("Cancel_ShutdownResolver",50)
    Return False
EndFunc

Func Cancel_ShutdownResolver()
    Local $iOpt = Opt("WinTitleMatchMode",4),$hwnd = WinGetHandle("[CLASS:BlockedShutdownResolver]")
    Opt("WinTitleMatchMode",$iOpt)
    If $hwnd Then
        If @OSVersion = "WIN_7" Then ControlClick($hwnd,"","[CLASS:Button; INSTANCE:1]")
        If @OSVersion <> "WIN_7" Then ControlClick($hwnd,"","[CLASS:Button; INSTANCE:2]")
        AdlibUnRegister("Cancel_ShutdownResolver")
        TrayTip("Shutdown Blocker - Shutdown denied", "Denied shutdown successfull!", 5)
        _DeineFunktion()  ; <================ Hier musst du deine Funktion einfügen
    EndIf
EndFunc

Func _DeineFunktion()
    MsgBox(0,"","Das hier ist deine Funktion ;) - Danach musst du erneut _ShutdownBlockReasonDestroy($hwnd) aufrufen, und einen neuen Shutdown machen.")
EndFunc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:13:23.787

在我看来这是一种防止`autoit`函数被杀死的方法..

`_deineFunction()`（德语为您的功能）是您不想被杀死的功能。

# python - 在 Matplotlib 中注释时间序列图

> ID：11067368
> 
> 赞同：39
> 
> 时间：2012-06-16T22:01:39.920
> 
> 标签：python, numpy, matplotlib

我有一个日期索引数组（x）（日期时间对象）和一个实际值数组（y：债券价格）。做（在 iPython 中）：

```
plot(x,y) 
```

生成一个非常精细的时间序列图，其中 x 轴标有日期。到目前为止没有问题。但我想在某些日期添加文字。例如，在 2009 年 10 月 31 日，我希望显示文本“事件 1”，并带有指向该日期*y*值的箭头。

*我已经阅读了有关text()*和*annotate()*的 Matplotlib 文档，但无济于事。它仅涵盖标准编号的 x 轴，我无法推断如何在我的问题上处理这些示例。

谢谢

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-17T00:30:01.453

Matplotlib 对日期使用内部浮点格式。

您只需要将日期转换为该格式（使用`matplotlib.dates.date2num`or `matplotlib.dates.datestr2num`），然后`annotate`照常使用。

作为一个有点过于花哨的例子：

```
import datetime as dt
import matplotlib.pyplot as plt
import matplotlib.dates as mdates

x = [dt.datetime(2009, 05, 01), dt.datetime(2010, 06, 01), 
     dt.datetime(2011, 04, 01), dt.datetime(2012, 06, 01)]
y = [1, 3, 2, 5]

fig, ax = plt.subplots()
ax.plot_date(x, y, linestyle='--')

ax.annotate('Test', (mdates.date2num(x[1]), y[1]), xytext=(15, 15), 
            textcoords='offset points', arrowprops=dict(arrowstyle='-|>'))

fig.autofmt_xdate()
plt.show() 
```

![在此处输入图像描述](../Images/76183a56edf2201179655183b9e12f53.png)

# c++ - c++：对于多重继承类的子类中的重复成员字段，什么是好的重构？

> ID：11067370
> 
> 赞同：3
> 
> 时间：2012-06-16T22:01:58.497
> 
> 标签：c++, refactoring, multiple-inheritance

欢迎进行能更好地概括问题的标题编辑。

我想以某种方式重构这三个类以删除其中表示的重复字段`class C`（请参阅层次结构）。我想过将字段拉到父类中，但问题是 A 和 B 不够相似，不能被认为是“is-a”，C 被认为是*两者*，它实际上只是*一个*成员字段，所以创建一个类仅仅持有一件事似乎有点矫枉过正。

等级制度：

```
(abstract data type)
class A : public O {
    public:
    //...
    std::string GetName();
    std::string GetName() const;
    void SetName(std::string name);
    //...
    protected:
    //...
    std::string _name;
    //...
};

//Methods and fields shown here represent the exact same representative data as in A but the classes are so dissimilar as to not be considered "is-a" relationship.
(abstract data type)
class B {
    public:
    //...
    std::string GetName();
    std::string GetName() const;
    void SetName(std::string name);
    //...
    protected:
    //...
    std::string _name;
    //...
};

(concrete)
class C : public A, public B {
    public:
    //...
    C(/*..Other parameters..*/, std::string name, /*....*/)
    : A(name, /*...*/), B(name, /*...*/) {
        /*...*/
    }
    //...
    private:
    //...        
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:13:08.900

您可以保持原样，如前所述，也可以考虑对 C 类使用[组合而不是继承，例如：](http://en.wikipedia.org/wiki/Composition_over_inheritance)

```
class C : public A
{
public:
    // ...
    // The GetName and SetName methods are inherited from A.

private:
    B* b;
}; 
```

或者

```
class C
{
public:
    // ...

    std::string GetName();
    std::string GetName() const;
    void SetName(std::string name);

private:
    A* a;
    B* b;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:21:15.080

看看这个问题和答案：[摆脱丑陋的 if 语句](https://stackoverflow.com/questions/3786358/get-rid-of-ugly-if-statements)清楚地表明，正如@Andre 所提到的，您当前的代码是完全可以接受的，并且试图“修复”它可能会导致同样的痛苦和心灵打击。

保持原样，这很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T23:12:51.863

由于`C`将相同的`name`参数传递给`A`and `B`，因此您可以通过虚拟继承获得所需的内容。`V`下面被定义为 、 和 的公共基类`A`，`B`但是`C`通过虚拟继承，它们都共享同一个实例。

```
class V {
    public:
    std::string GetName();
    std::string GetName() const;
    void SetName(std::string name);
    protected:
    std::string _name;
    V () {}
    V (std::string n) : _name(n) {}
    ~V () {}
};

class A : virtual public V, public O {
    //...
};

class B : virtual public V {
    //...
};

class C : virtual public V, public A, public B {
    public:
    C (/*...otherargs,*/std::string name/*,moreargs...*/)
        : V(name), A(/*...*/), B(/*...*/) {
        //...
    }
    //...
}; 
```

# android - Android PhoneGap 获取相对于地球坐标的偏航、俯仰、滚动

> ID：11067371
> 
> 赞同：4
> 
> 时间：2012-06-16T22:02:01.237
> 
> 标签：android, cordova, webview, orientation, sensors

我在网页中有以下脚本：

```
window.addEventListener('deviceorientation', function(event) {

    // Get Euler angles from device
    var alpha = 360 - event.alpha;
    var beta = event.beta;
    var gamma = event.gamma;

    // Display Euler angles
    document.getElementById("alpha").innerHTML = alpha;
    document.getElementById("beta").innerHTML = beta;
    document.getElementById("gamma").innerHTML = gamma;

}, false); 
```

这在浏览器中非常有效，例如 Android 的移动 Firefox。它显示了我相对于地球坐标的航向、俯仰和滚动（指向北方时 alpha 始终为 0，当设备垂直时，beta 始终为 90，等等）。

现在我使用 WebView 将相同的脚本加载到 PhoneGap 应用程序中，但它什么也不显示。如何在 PhoneGap 中获得这些值，而无需从头开始完全重新发明传感器融合？

# android - Android的图像效果？

> ID：11067372
> 
> 赞同：8
> 
> 时间：2012-06-16T22:02:09.913
> 
> 标签：android, image-processing, camera, imagemagick, effects

我正在制作一个应用程序，它允许用户单击图片，然后在图片上应用各种效果过滤器。基本上，我想创建一个类似于[Pudding Camera](https://play.google.com/store/apps/details?id=com.kth.PuddingCamera&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5rdGguUHVkZGluZ0NhbWVyYSJd)的应用程序。

我进行了很多研究，并遇到了 3 个选项来做到这一点：-

1) 使用 OpenCV 并手动实现所有效果 [不是我的首要任务，因为它会花费大量时间，但如果其他一切都没有结果，我会这样做]。

2)通过 NDK 移植到 Android，使用[ImageMagick](http://www.imagemagick.org/) / [ImageJ](http://imagej.nih.gov/ij/) / [Marvin之类的库。](http://marvinproject.sourceforge.net/)

3）使用像[jjil](http://code.google.com/p/jjil/)这样的库。

现在我想知道哪种方法最好。我的优先事项是：-

1) 我希望能够调整效果并创建自己的新自定义效果。

2) 我希望它快速运行，因为我希望我的应用程序快速响应。

3）我想使用一个最容易学习的库，因为我不是图像处理方面的专家。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:34:10.703

OpenCV 适用于 Android 2.3 及更高版本，您可以考虑 Qualcomm 的 FastCV，它类似于 OpenCV，但更针对 Qualcomm 芯片进行了优化。我不推荐 JJIL，它一直没有更新，只适用于非常旧的 Android 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T01:27:32.203

使用和学习的最佳库。[加泰罗尼亚框架](https://code.google.com/p/catalano-framework/)。查看这篇[文章](http://www.codeproject.com/Articles/656059/Catalano-Framework)，你会用几行代码快速学习，包含几个例子。有几个过滤器在多线程中运行，你可以在这个命名空间 Catalano.Imaging.Concurrent.Filters 中检查

# c# - C# Word 加载项使用 VSTO 创建有序列表

> ID：11067380
> 
> 赞同：0
> 
> 时间：2012-06-16T22:03:10.083
> 
> 标签：c#, vsto

我是 VSTO 开发的新手，所以请多多包涵！我正在开发一个 Word 插件，它从 String[] 中获取元素并将它们输入到有序列表（1.、2.、3\. 等）中。但是，我很难做到这一点。有人可以解释如何使用 VSTO for C# 将有序列表插入 Word Doc 吗？

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:54:47.577

[这里](https://stackoverflow.com/questions/1939995/numbered-list-in-microsoft-word)已经回答了。

您必须从[ListGalleries中检索](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.listtemplate)[ListTemplate](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.listgalleries)，然后为[ListLevel设置样式](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.listlevel)

另一个帖子中给出了很好的例子。

# ide - 在 LyX 中插入代码

> ID：11067382
> 
> 赞同：-3
> 
> 时间：2012-06-16T22:03:54.257
> 
> 标签：ide, latex, lyx

有人知道如何将代码插入 lyx 吗？就像这里有什么？我想要一个像 `this` .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:08:10.587

不了解 LyX，但在 LaTeX 中有`lstlisting`（来自`listings`包）和`verbatim`环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:06:47.200

如果你在 lyx wiki 主页上搜索`listing`- 你会找到[这个](http://wiki.lyx.org/Examples/IncludeExternalProgramListing)- 也许它对你有帮助。

# sql-server - 如果 web 应用和 SQL Server 在内网的不同机器上，Windows 身份验证还能用吗？

> ID：11067383
> 
> 赞同：1
> 
> 时间：2012-06-16T22:04:24.153
> 
> 标签：sql-server

如果web应用和SQL Server在内网的不同机器上（都运行Windows），是否仍然可以使用Windows身份验证来访问SQl​​ Server，还是需要使用SQL身份验证方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:16:31.527

是的，您仍然可以使用 Windows 身份验证。但是您如何执行此操作取决于 Web 应用程序是否强制 Windows 身份验证，或者它是否允许匿名访问，并且您已将应用程序本身设置为作为特定域帐户进行连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:19:04.410

如果它们都属于同一个 Active Directory，则 Web 应用程序服务器将能够使用集成安全性（Windows 身份验证）来访问 SQL 服务器。如果不是，您将需要使用混合模式。

# java - 如何使用 Hibernate 处理重复记录

> ID：11067387
> 
> 赞同：-1
> 
> 时间：2012-06-16T22:05:07.350
> 
> 标签：java, hibernate, duplicates, try-catch

我的 Web 服务获取要添加到数据库的数据列表。

要写入的表包含`3 fields`：`(id,userId,contactId)`。在 DB`(userId,contactId)`上是一个`unique key`.

如果 Web 服务检索到重复的几个值`(userId,contactId)`，我需要在 java 端处理异常，如果引发重复异常，还要继续添加剩余的记录。

[这](http://pastebin.com/34EbvCbz)是我正在使用的代码。

```
Session session = HibernateUtil.getSessionFactory().openSession();
Transaction transaction = null;
try {
    transaction = session.beginTransaction();

    for (int i=0; i<contactsToAdd.size(); ++i)
    {
        Contact contact = new Contact(userId, contactsToAdd.get(i));
        try
        {
            session.saveOrUpdate(contact);                          // line 11
            session.flush();
        }
        catch (HibernateException e)
        {
            transaction.rollback();                                 // line 16
//                  e.printStackTrace();
        }
        finally
        {
            session.clear();                                        // line 21
        }
    }

    transaction.commit();
    return true;
}
catch (HibernateException e) {
    transaction.rollback();                                                 // line 29
    e.printStackTrace();
}
finally {
    session.close();                                                        // line 33
} 
```

*   当`i`= 0 时，执行第 11、12、16、21 行。
*   当`i`= 1 时，执行第 11、12、16、21、29、30、33 行。

你能帮我理解为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:10:27.583

假设 Contact 在两个相关字段上实现 Equals 和 Gethashcode

```
Set<Contact> contacts = ...;
for (int i=0; i<contactsToAdd.size(); ++i)
{
    contacts.Add(new Contact(userId, contactsToAdd.get(i)));
}

for (Contact contact in contacts)
{
    Session.Save(contact);
} 
```

# iphone - 带有 NSData 的 QLPreviewController？

> ID：11067392
> 
> 赞同：9
> 
> 时间：2012-06-16T22:05:31.860
> 
> 标签：iphone, objective-c, ios, ipad

我有一个文件存储在服务器上作为`NSData`. 我正在从服务器获取数据（这没有问题）。接下来，我正在尝试`QLPreviewController`展示该文件。我似乎无法弄清楚如何让这一步起作用。

我已经实现了 QLPreviewController，设置了我的数据源和委托，并以模态方式呈现了 previewController。所有这一切似乎都在起作用，但是，我似乎无法弄清楚如何`previewController:previewItemAtIndex:`使用我的 NSData 正确实现。有什么建议/例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:06:36.887

QLPreviewController 仅适用于文件 url。:(

> @property (只读) NSURL *previewItemURL;
> 
> 此属性的值必须是文件类型的 URL。

# c# - 对象类型末尾的 & 字符是什么？

> ID：11067395
> 
> 赞同：14
> 
> 时间：2012-06-16T22:05:51.390
> 
> 标签：c#, decompiling, reflector

我不得不反编译一些代码，我不知道这个语法是什么？你们能帮忙吗，或者指点我写一篇关于它是什么的文章？我用谷歌搜索并搜索了这个网站，但找不到任何东西。

只需一行代码：

```
Rectangle pageBounds;
// ISSUE: explicit reference operation
// ISSUE: variable of a reference type
Rectangle& local = @pageBounds; 
```

`@`Rectangle 对象类型末尾和变量`@`之前的符号是什么？`pageBounds`

这是我需要修复的最后一行代码，以便让这个可执行文件再次编译。

这是使用这种语法的方法，我可以删除它吗？

```
protected override void OnPrintPage(PrintPageEventArgs e)
{
  Application.DoEvents();
  ++this._pageNum;
  float num1;
  if (this.Header != null)
  {
    num1 = this.Header.CalculateHeight(this, e.Graphics);
    this.Header.Draw(this, (float) e.MarginBounds.Top, e.Graphics, e.MarginBounds);
  }
  else
    num1 = 0.0f;
  float num2;
  if (this.Footer != null)
  {
    num2 = this.Footer.CalculateHeight(this, e.Graphics);
    this.Footer.Draw(this, (float) e.MarginBounds.Bottom - num2, e.Graphics, e.MarginBounds);
  }
  else
    num2 = 0.0f;
  Rectangle pageBounds;
  // ISSUE: explicit reference operation
  // ISSUE: variable of a reference type
  Rectangle& local = @pageBounds;
  int left = e.MarginBounds.Left;
  Rectangle marginBounds = e.MarginBounds;
  int y = (int) ((double) marginBounds.Top + (double) num1);
  marginBounds = e.MarginBounds;
  int width = marginBounds.Width;
  marginBounds = e.MarginBounds;
  int height = (int) ((double) marginBounds.Height - (double) num2 - (double) num1);
  // ISSUE: explicit reference operation
  local = new Rectangle(left, y, width, height);
  float yPos = (float) pageBounds.Top;
  bool flag = false;
  int num3 = 0;
  while (this._printIndex < this._printElements.Count)
  {
    PrintElement printElement = (PrintElement) this._printElements[this._printIndex];
    float num4 = printElement.CalculateHeight(this, e.Graphics);
    if ((double) yPos + (double) num4 > (double) pageBounds.Bottom && num3 != 0)
    {
      flag = true;
      break;
    }
    else
    {
      printElement.Draw(this, yPos, e.Graphics, pageBounds);
      yPos += num4;
      ++this._printIndex;
      ++num3;
    }
  }
  e.HasMorePages = flag;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-16T22:49:58.980

那行代码之前的注释告诉你到底发生了什么。类型名称后的 & 符号表示它是一个引用类型，变量名称前的 @ 生成对该变量的引用。

（@ 符号也可以在 C# 代码中用于“转义”关键字以用作变量名，但这不是这里发生的事情。“pageBounds”不是 C# 关键字。）

请注意，这不是有效的 C# 语法——您不能在 C# 中引用局部变量，尽管 CLR 支持它。（注意：从 C# 7.0 开始，这不再是真的；[这里](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/ref-returns)描述了语法，但它不使用 ，`&`所以这个反编译的代码仍然是无效的 C#）。

例如，当您使用`ref`和`out`参数时，会隐式创建对局部变量的引用，但使用关键字而不是显式键入参数作为引用。（例如，如果您有一个`out int x`，则该变量在内部的类型为`Int32&`。）如果它是合法的 C#，代码的*意图*`pageBounds`就是这样，并且`local`是具有两个不同名称的*同一个实例；*你对一个人所做的任何事情都会发生在另一个人身上。因此，例如，这个非法代码：

```
Rectangle pageBounds;
Rectangle& local = @pageBounds;
local = new Rectangle(); 
```

将与此法律代码相同：

```
Rectangle pageBounds = new Rectangle(); 
```

如果你试图编译反编译的代码，你会得到一个错误，因为编译器将 & 视为按位与，并且会抱怨你使用了一个类型，就好像它是一个变量一样。但这没关系，因为您不是从 C# 源文件中获取它的。你*反编译了一个 IL 方法*来得到它，你可以在 IL 中做很多在 C# 中是非法的事情。当您反编译代码时，这种情况总是会发生；例如，您会看到非法的类和方法名称。这只是意味着编译器基于原始代码生成 IL，该代码不会直接转换回 C#，而是按照您想要的方式*运行。*你得到的代码很简单，反编译器从它拥有的 IL 生成 C# 代码的最佳尝试。

您可以在大量 Jetbrains 错误报告中看到生成这些引用的代码示例：

*   [http://youtrack.jetbrains.com/issue/DOTP-521](http://youtrack.jetbrains.com/issue/DOTP-521)
*   [http://youtrack.jetbrains.com/issue/DOTP-1077](http://youtrack.jetbrains.com/issue/DOTP-1077)
*   [http://youtrack.jetbrains.com/issue/DOTP-524](http://youtrack.jetbrains.com/issue/DOTP-524)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T22:11:48.670

请参阅此处 - [http://msdn.microsoft.com/en-us/library/aa664670(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664670(v=vs.71).aspx)（虽然从未使用过）

`The prefix "@" enables the use of keywords as identifiers`，这在与其他编程语言交互时很有用。字符 @ 实际上不是标识符的一部分，因此标识符在其他语言中可能被视为普通标识符，没有前缀。带有@ 前缀的标识符称为逐字标识符。允许对不是关键字的标识符使用 @ 前缀，`but strongly discouraged as a matter of style`.

这个例子：

```
class @class
{
   public static void @static(bool @bool) {
      if (@bool)
         System.Console.WriteLine("true");
      else
         System.Console.WriteLine("false");
   }   
}
class Class1
{
   static void M() {
      cl\u0061ss.st\u0061tic(true);
   }
} 
```

# scala - 理解 Scala 枚举

> ID：11067396
> 
> 赞同：124
> 
> 时间：2012-06-16T22:06:06.023
> 
> 标签：scala, enums

我不得不说我不懂 Scala 枚举类。我可以从文档中复制粘贴示例，但我不知道发生了什么。

```
object WeekDay extends Enumeration {
  type WeekDay = Value
  val Mon, Tue, Wed, Thu, Fri, Sat, Sun = Value
}
import WeekDay._ 
```

*   什么意思`type WeekDay = Value`，为什么我必须写那个？
*   为什么是`val Mon = Value`？那有什么意思？
*   为什么我必须导入`WeekDay` 对象？和，
*   当我写的时候`val day = WeekDay.Mon`，为什么是打字`WeekDay.Value`而不是打字`WeekDay`？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-06-16T22:21:23.757

`Enumeration`trait 有一个类型成员，`Value`表示枚举的各个元素（它实际上是一个内部类，但这里的区别并不重要）。

因此`object WeekDay`继承了该类型成员。该行`type WeekDay = Value`只是一个*类型别名*。它很有用，因为在您使用 将其导入其他地方后`import WeekDay._`，您可以使用该类型，例如：

```
def isWorkingDay(d: WeekDay) = ! (d == Sat || d == Sun) 
```

相反，最小版本将是：

```
object WeekDay extends Enumeration {
  val Mon, Tue, Wed, Thu, Fri, Sat, Sun = Value
} 
```

并且您不必*导入*的内容`object WeekDay`，但是您需要使用 type`WeekDay.Value`并限定单个成员。所以这个例子会变成

```
def isWorkingDay(d: WeekDay.Value) = ! (d == WeekDay.Sat || d == WeekDay.Sun) 
```

* * *

第二个问题是关于 的含义`val Mon, ... = Value`。如果您不研究`Enumeration`. 这不是类型的分配！相反，它调用了一个**同名的受保护方法**，`Value`它返回一个类型的具体实例`Value`。

碰巧你可以用`val a, b, c = foo`Scala 编写，并且对于每个值`a`, `b`，`c`该方法`foo`将被一次又一次地调用。`Enumeration`使用这个技巧来增加一个内部计数器，以便每个值都是单独的。

如果您打开 Scala API 文档`Enumeration`并单击`Visibility: All`，您将看到该方法出现。

# javascript - 用户更改输入值时触发功能（backbone.js）

> ID：11067399
> 
> 赞同：1
> 
> 时间：2012-06-16T22:06:44.120
> 
> 标签：javascript, jquery, backbone.js

我刚开始使用backbone.js，目前正在制作一个页面，其中包含一个`#listing_filter`包含文本输入元素的div和一个显示从RESTful后端（PHP / Codeigniter）获取的一些列表的表格。文本输入中的值将充当过滤器，以缩小服务器检索的结果范围。

**问题：**每当任何文本框中的值发生变化时，我都希望浏览器根据过滤器值获取另一组结果。以下是我的尝试，`updateFilter`即使文本输入值已更改，该函数也不会触发。任何想法出了什么问题？

另一个问题是我应该将 的内容`#listing_filter`放入模板中，还是将其硬编码到主体 HTML 中？谢谢！

**JS代码**

```
window.ListingFilterView = Backbone.View.extend({
    initialize: function() {
        _.bindAll(this, 'updateFilter');
    },

    events: {
        'change input' : 'updateFilter'
    },

    updateFilter: function() {
        console.log('hey');
    }

});

// Router

var AppRouter = Backbone.Router.extend({
    routes: {
        '': 'listings',
    },

    listings: function() {
       //... some other code here
        this.listingFilterView = new ListingFilterView();
    }
}); 
```

**HTML 代码**

```
<div id="listing_filter">
    Price: <input type="text" id="listing_filter_price" />
    Beds: <input type="text" id="listing_filter_bedroom" />
    Baths: <input type="text" id="listing_filter_bathroom" />
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:31:04.503

Backbone 视图只会响应视图`el`或其内部元素上的事件`el`。默认情况下，视图`el`只是[一个空的`<div>`](http://documentcloud.github.com/backbone/#View-el)，您不会告诉视图使用其他任何东西。

您可以告诉视图`el`使用哪个（[http://jsfiddle.net/ambiguous/5yXcU/1/](http://jsfiddle.net/ambiguous/5yXcU/1/)）：

```
new ListingFilterView({ el: $('#listing_filter') })
// Or like this:
new ListingFilterView({ el: '#listing_filter' }) 
```

[`setElement`](http://documentcloud.github.com/backbone/#View-setElement)或者您可以使用（[http://jsfiddle.net/ambiguous/APEfa/1/](http://jsfiddle.net/ambiguous/APEfa/1/) ）让视图将自身附加到该元素：

```
initialize: function() {
    this.setElement($('#listing_filter'));
    // or setElement('#listing_filter')
} 
```

或`el`在定义视图时设置（[http://jsfiddle.net/ambiguous/nyTZU/](http://jsfiddle.net/ambiguous/nyTZU/)）：

```
window.ListingFilterView = Backbone.View.extend({
    el: '#listing_filter',
    //...
}); 
```

一旦不碍事，您需要了解[直到失去焦点](https://stackoverflow.com/a/7055771/479863)`<input>`才会触发更改事件，因此您必须等待用户退出输入或切换到侦听事件和使用计时器来检测他们何时停止打字。`keypress`

# python - Python中的焦点测试

> ID：11067402
> 
> 赞同：0
> 
> 时间：2012-06-16T22:07:01.280
> 
> 标签：python, image, image-processing, focus

我目前正在使用 opencv、image 和 pygame 从高清网络摄像头捕获帧。我想要实现的是检查捕获的帧是否聚焦。这是又名焦点测试，但我无法在 Python 中提出解决方案。恕我直言，问题可以简化为确定每个像素的模糊百分比并做出决定。我正在寻找的这个算法的名称是什么？有没有人有在 Python 中实现类似算法的经验？

我将不胜感激任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:00:33.657

如果您想检查图像是否模糊，[有没有办法检测图像是否模糊？](https://stackoverflow.com/questions/7765810/is-there-a-way-to-detect-if-an-image-is-blurry)或许能帮到你，挺有意思的。

# python - 如何将用户输入（来自python）导出到excel工作表？

> ID：11067404
> 
> 赞同：0
> 
> 时间：2012-06-16T22:07:26.300
> 
> 标签：python, excel, user-interface, user-input

我正在尝试在 python 2.7.3 中开发用户表单。请注意，我是 python 初学者。

如何将用户输入（来自python）导出到excel工作表？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T23:36:23.843

为了编写表单，您可能需要使用 Tk - 它内置于 Python ( `import Tkinter`)。

对于导出到 Excel，有几个选项：

1.  将数据写入 .csv 文件 ( `import csv`)，然后使用 Excel 加载
2.  使用模块写入 .xls 文件
3.  使用 .COM 自动化“远程控制”Excel

**编辑：**好的，这是使用 Tkinter 和 xlwt 的更具体的答案：

```
import Tkinter as tk
import xlwt
from xlwt.Utils import cell_to_rowcol2

class MyForm(tk.Frame):
    def __init__(self, master=None, cnf={}, **kw):
        tk.Frame.__init__(self, master, cnf, **kw)

        self.fname = tk.StringVar(value="myfile.xls")
        self.sheet = tk.StringVar(value="sheet1")
        self.cell  = tk.StringVar(value="x1")
        self.value = tk.StringVar(value="1234")

        tk.Label(master, text="File").grid(row=0, column=0, sticky=tk.E)
        tk.Entry(master, textvariable=self.fname).grid(row=0, column=1, padx=4, pady=4)

        tk.Label(master, text="Sheet").grid(row=1, column=0, sticky=tk.E)
        tk.Entry(master, textvariable=self.sheet).grid(row=1, column=1, padx=4, pady=4)

        tk.Label(master, text="Cell").grid(row=2, column=0, sticky=tk.E)
        tk.Entry(master, textvariable=self.cell).grid(row=2, column=1, padx=4, pady=4)

        tk.Label(master, text="Value").grid(row=3, column=0, sticky=tk.E)
        tk.Entry(master, textvariable=self.value).grid(row=3, column=1, padx=4, pady=4)

        go = tk.Button(master, text="Do it!", command=self.write_to_xls).grid(row=4, column=1, padx=4, pady=4, sticky=tk.W)
        self.grid()

    def write_to_xls(self):
        # create new workbook
        wb = xlwt.Workbook()

        # add sheet using given name
        ws = wb.add_sheet(self.sheet.get())

        # get offset of cell to write to
        row,col = cell_to_rowcol2(self.cell.get())

        # write text to cell
        ws.write(row, col, self.value.get())

        # save to given file name
        wb.save(self.fname.get())

def main():
    master = tk.Tk()
    myform = MyForm(master)
    tk.mainloop()

if __name__=="__main__":
    main() 
```

# awk - awk and regular expressions confusion

> ID：11067407
> 
> 赞同：1
> 
> 时间：2012-06-16T22:07:51.280
> 
> 标签：awk

Having never used `awk` before on Linux I am attempting to understand how it matches regular expressions. For example in the past based on my experience the regular expression `/2/` would match 2 in all of the following lines.

1.  This will match 2
2.  This will not match 2

Now if I run the command `awk '{if(NR~2)print}' sample.txt` which has the contents

1.  2 will be matched
2.  This will not match 2
3.  2 may be matched

The line that is matched is `This will not match 2` which indicates it is matching the line 2 because if I replace the command with `awk '{if(NR~3)print}' sample.txt` it matches `2 may be matched`. Now if I also run the command `awk '{if(NR~/^2$/)print}' sample.txt`, the matches the same exact line i.e. line 2.

However the source I am referring to at [http://www.youtube.com/watch?feature=player_detailpage&v=Htnno4CHVus#t=502s](http://www.youtube.com/watch?feature=player_detailpage&v=Htnno4CHVus#t=502s) seems to indicate otherwise.

What am I missing and how is the command `awk '{if(NR~2)print}' sample.txt` different to that of `awk '{if(NR~/^2$/)print}' sample.txt`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:11:45.693

The condition `NR~2` is checking whether the record number, NR, matches 2\. For a 2 or 3 line input file, the expression is equivalent to:

```
if (NR == 2) 
```

Similarly with `NR~3`, of course. Try:

```
awk '/2/' 
```

That will print all lines where the text of the line (`$0`) contains a 2\. By default, a regular expression matches against the whole line; you could limit it to a particular field with `$3 ~ /3/`, for example.

An `awk` program consists of patterns and actions, where either the pattern or the action may be omitted.

```
awk '{ if ($0 ~ /2/) print }
     /2/
     /2/ { if ($0 ~ /a.*z/) print "Matches a.*z"; }' 
```

The first line has no pattern; the action in the `{ ... }` is executed for each input line (but only some input lines will generate output because of the conditional. All lines that contain a 2 will be printed. (If there is no argument to `print`, it prints `$0` followed by a newline.)

The second line has a pattern but no action; all lines that contain a 2 will be printed again. (The missing action is equivalent to `{ print }`.)

The third line has both a pattern and an action; all lines that both contain a 2 and also contain an 'a' followed by a 'z' will be remarked upon.

* * *

> How are these two commands different?
> 
> ```
>  `awk '{if(NR~2)print}' sample.txt`
>  `awk '{if(NR~/^2$/)print}' sample.txt` 
> ```

The first command will print line numbers 2, 12, 20..29, 32, 42, ... 102, 112, 120..129, ... 200..299, ...; all lines where the line number contains a 2.

The second command will print only line number 2 because the `/^2$/` constrains the value to contain start of string, digit 2 and end of string.

* * *

> I take it that means that the source is wrong?

Now I've looked at the YouTube resource, I think you must have misunderstood what it is trying to teach. When it talks about `{if (NR~2) print}`, it should be saying it will print any *line number* which contains a 2; the video cites line numbers 2, 12, 20, 21, 22, etc. It should not be saying any *line* which contains a 2; I think the video does say that, but the video misspoke (but the text was accurate). The comparison against NR is not actually wrong, but it is aconventional; I'm not sure that I'd include regexes against NR in an introductory video describing `awk`. So, the video appears to have a glitch in the audio but the text on screen is accurate, I think. I may still have missed something.

* * *

> The command `awk '{ if ($0 ~ /2/) print }` against the file say `sample.txt` with the contents I mentioned would only result in the output 2 will be matched. Is that correct?

That command, given the input:

```
2 will be matched
This will not match 2
2 may be matched 
```

will print all three lines; they all contain the digit 2.

> I also thought that the action was `print` and the pattern was `$0 ~ /2/`.

No; the pattern was empty (because there was nothing before the open brace) — so all lines match it — and the action was the part in braces `{ if ($0 ~ /2/) print }`. Now, the action contains a conditional, but that's a separate issue.

> Now the command `awk '/2/' sample.txt` would print all three lines. Is that correct?

Yes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:11:34.833

`NR` means the Number of the Record being processed... You are matching against line number 2.

# html - Flash as3 土耳其语字符结尾

> ID：11067408
> 
> 赞同：-3
> 
> 时间：2012-06-16T22:07:51.983
> 
> 标签：html, facebook, actionscript-3

我使用 Flash as3 开发了一个 Facebook 应用程序。在此应用程序中，当用户完成测试时，证书 URL 会发布在用户墙上。url 使用土耳其字符用户名和用户姓氏进行编码。在证书 swf 文件中，它读取 url 并在 jpg 上显示用户名。这对英语用户很有用，但是当用户名是土耳其语时问题就来了。我附上了主要问题的 jpg，您可以清楚地看到 url 看起来不错，但是当我复制过去 url 时，我得到的结果与图片上显示的结果相同。

![错误截图](../Images/145e3c5ecff06fdca66ee793845995bb.png)

我的证书 Swf 代码是

```
package  {

import flash.display.MovieClip;
import flash.net.URLLoader;
import flash.net.URLVariables;
import flash.external.ExternalInterface;
import com.adobe.images.JPGEncoder;

public class main extends MovieClip {

    public function main() {
        valuePairs = new Array();
        nextValuePare = new Array();

        var search:String = ExternalInterface.call("window.location.href.toString");

        //var vars:URLVariables = new URLVariables(search);

        valuePairs = search.substring(search.indexOf("?")+1).split("&");
        trace(valuePairs);
        var map:Object = new Object();
        for (var i:int = 0; i<valuePairs.length; i++)
        {
            nextValuePare = valuePairs[i].split("=");
            trace(nextValuePare);
            map[nextValuePare[0]] = nextValuePare[1];
        }

        picture.fbookName.text = String(map["fName"]) +" "+ String(map["lName"]);

    }

    private var _urlLoader:URLLoader;
    private var _urlVariable:URLVariables;
    private var valuePairs:Array;
    private var nextValuePare:Array
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:11:02.517

您应该使用顶级函数[encodeURI()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#encodeURI%28%29)对您的 URL 进行 URL 编码。然后在从 URL 中提取名称的 swf 中使用[decodeURI()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#decodeURI%28%29)。

# jquery - 如何在 slideToggle() 上更改/交替图像的背景位置？

> ID：11067413
> 
> 赞同：3
> 
> 时间：2012-06-16T22:08:14.383
> 
> 标签：jquery, css

当我单击某个按钮时，我找到了打开/关闭 div 的代码。现在我不仅想让 div 打开/关闭，而且打开/关闭按钮从向下箭头变为向上箭头。

如果我的帖子不正确，因为这是我的第一篇帖子，这就是我到目前为止所要原谅的。

图像高度 = 60 像素，宽度 = 30 像素。向上箭头在一半，向下箭头在另一半。

```
<style>
.content_toggle {
background: url(toggle-btn.png);
background-color: rgba(0, 0, 0, 0.9);
position: absolute;
cursor: pointer;
bottom: 62px;
left: 850px;
height: 30px;
width: 30px;
}
</style>

<body>
<div class="content_toggle" style="display: block;"></div>

<script>
$("div.content_toggle").click(function () {
  $("div.content").slideToggle("slow");
});
</script>

<div class="content">content, content, content</div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:16:53.973

将一个类用于“向上箭头”，另一个用于“向下箭头”，然后在切换 div 可见性时在它们之间切换：

```
<style>
    .content_toggle {
        background-color: rgba(0, 0, 0, 0.9);
        position: absolute;
        cursor: pointer;
        bottom: 62px;
        left: 850px;
        height: 30px;
        width: 30px;
    }
    .arrow-up {
        background: url(toggle-btn.png);
        background-position: 0 0;
    }
    .arrow-down {
        background: url(toggle-btn.png);
        background-position: 0 -30;
    }
</style>
<body>
    <div class="content_toggle arrow-up" style="display: block;"></div>
    <script>
        $(document).ready(function () {
            $("div.content_toggle").click(function() {
                var self = $(this); //cache jQuery object
                $("div.content").slideToggle("slow");
                if (self.hasClass("arrow-up")) {
                    self.removeClass("arrow-up").addClass("arrow-down");
                } else {
                    self.removeClass("arrow-down").addClass("arrow-up");
                }
            });
        });
    </script>
    <div class="content">content, content, content</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:14:56.520

在单击处理程序中，将简单地切换一个名为“活动”的类。您将需要编写一个 css 规则以`.content_toggle.active`按照您想要的方式调整图像

```
$("div.content_toggle").click(function () {
      $("div.content").slideToggle("slow");       
      $(this).toggleClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T22:15:12.493

由于两个箭头都在同一个图像中，您需要设置 css background-position 属性：

```
<script type="text/javascript">
$(function(){

    $("div.content_toggle").data('bgp',0).click(function () {
        $("div.content").slideToggle("slow");
        $(this).data('bgp', 30 - $(this).data('bgp'));  // toggle the stored value
        $(this).css('background-position', '0 '+$(this).data('bgp')+'px'); // set the scss
    });
});
</script> 
```

请注意，我将背景位置的 y 轴更改了 30px

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T22:35:48.350

我会用`.toggle()`. 你有更多的控制权并且代码更具可读性，即看看什么时候会发生什么。

并且绝对使用一两个类作为打开/关闭状态。

请参阅此处的示例：http: [//jsbin.com/anebug/edit#html,live](http://jsbin.com/anebug/edit#html,live)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<style>
  .content_toggle {
    background: url(toggle-btn.png);
    background-color: rgba(0, 0, 0, 0.9);
    position: absolute;
    cursor: pointer;
    bottom: 62px;
    left: 850px;
    height: 30px;
    width: 30px;
  }
  .content { background-image:url(arrow.png); }
  .closed { background-position:0 -30px; } 
  .open { background-position:0 0; }
</style>
</head>

<body>
<div class="content_toggle" style="display: block;"></div>

<div class="content">content, content, content</div>

<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>  
<script>
  $("div.content_toggle").toggle(
      function() { $('.content').slideDown('slow',
                                  function(){$(this).removeClass('open')});}, 
      function() { $('.content').slideUp('slow',
                                  function(){$(this).addClass('closed')});
  });
</script>

  </body>
</html> 
```

# php - 从 iOS 通过 php 将图像上传到 mySql

> ID：11067415
> 
> 赞同：0
> 
> 时间：2012-06-16T22:08:20.297
> 
> 标签：php, mysql, ios, image, upload

我已经准备好从表单接收数据的服务器端 php 代码，我已经对其进行了测试。现在我正在尝试将图像添加到应用程序。这意味着用户不仅会在注册时输入他的姓名和密码以及电子邮件，还会选择要上传的图像。到目前为止我有这个：  

```
Create a urlString with the string data to send.
Prepare an image
Prepare the post string
Create URLRequest and set its parameters
Add a boundary
Prepare Image to Post
Receive Server Response

-(NSDictionary*)addUser:(NSString *)usuario withPass:(NSString *)clave withAddress:(NSString*)direccion withImage:(UIImage*)imagen{

    //1.CREATE URL TO SEND
    NSString *urlString = [NSString stringWithFormat:@"username=%@&password=%@&email=%@",usuario,clave,direccion];

    NSLog(@"user registration string:%@",urlString);

    //2.PREPARE IMAGE
    NSData *imageData = UIImageJPEGRepresentation(imagen, 90);

    //3.POST THE STRING
    NSData *postData = [urlString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    //4.CREATE URLREQUEST WITH STRING TO POST TO
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.santiapps.com/learnable/login2/user_add_save.php"]];
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    //5.ADD BOUNDARY
    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    //6.PREPARE IMAGE POST DATA
    NSString *name1= [NSString stringWithFormat:@"imagefor%@",usuario];
    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"images\"; filename=\"%@\"\r\n",name1] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    //7.PREPARE TO RECEIVE RESPONSE
    NSURLResponse *response = nil;
    NSError *error = nil;
    // Later add code to parse returned data
    NSData *myData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *returnString = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding];
    NSLog(@"server string %@",returnString);
    NSError *outError = NULL;
    NSDictionary *tempDict = [NSDictionary dictionaryWithJSONData:myData error:&outError];
    NSLog(@"Dict of errors:%@",tempDict);
    return tempDict;

} 
```

# java - 链表 - 排序列表的删除方法

> ID：11067418
> 
> 赞同：0
> 
> 时间：2012-06-16T22:08:58.393
> 
> 标签：java, linked-list, sortedlist

新程序员在这里，我试图理解并分解下面的代码以获取删除方法，排序链表。我在下面添加了我的理解和不理解的评论。有人可以阐明不清楚的事情吗？

提前致谢。

```
/* 1  */ public void remove(E e) throws NotFoundException{
/* 2  */     Node<E> p; //declares node p
/* 3  */     // chunk below determines where to start traversing based on element value. should traverse from head if new element < pos value
/* 4  */     if(pos == head || pos.compareTo(e) >= 0 ){ //I do not understand 2nd equality..why?
/* 5  */         p = head; //traverse list from head
/* 6  */     }else{
/* 7  */         //traverse list from pos
/* 8  */         p = pos;
/* 9  */     }
/* 10 */     for( ;p.next!=null && p.next.compareTo(e)<0; p = p.next); //nothing to initialize?
/* 11 */     //e not found in the list
/* 12 */     if(p.next == null || p.next.compareTo(e) > 0){
/* 13 */         throw new NotFoundException();
/* 14 */     }
/* 15 */     if(p.next == pos){
/* 16 */         //if node to be deleted is pos, update pos to head
/* 17 */         pos = head;
/* 18 */     }
/* 19 */     p.next = p.next.next; //delete node
/* 20 */ } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:26:53.557

第 4 行：它是一个排序列表，因此如果您要删除的元素大于或等于 pos 所指向的元素，则可以从 pos 开始移动（而不是从列表的头部）-（如果您不知道，a.compareTo(b) < 0 如果 a < b，0 如果 a == b 和 > 0 如果 a < b)

第 10 行：当 p.next 低于您要查找的内容（且不为空）时，在列表中移动 - 一旦完成，您要么位于您要查找的节点，要么抛出 NotFoundException()

还有什么不清楚的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:32:18.850

```
4\. if(pos == head || pos.compareTo(e) >= 0 ){ //I do not understand 2nd equality..why? 
5\. p = head; //traverse list from head
6\. }else{
7\. //traverse list from pos 
8\. p = pos;  
9\. } 
```

首先，这是[compareTo](http://msdn.microsoft.com/en-us/library/35f0x18w.aspx#Y20) 的文档。第二个相等性检查 pos 是否指向“e”之后的节点。如果它是真的，那么你必须从它的头部遍历列表，因为 e 在 pos 之前。否则，e 在 pos 之后，因此您可以从 pos 遍历列表。这是真的，因为列表是排序的。

```
10\. for( ;p.next!=null && p.next.compareTo(e)<0; p = p.next); //nothing to initialize?
11\. //e not found in the list
12\. if(p.next == null || p.next.compareTo(e) > 0){
13\. throw new NotFoundException();
14\. } 
```

在这里，您从选择的位置开始扫描列表，如果您到达一个为空的节点（列表的末尾）或一个大于“e”的节点，那么您知道“e”在列表（因为列表已排序），因此您抛出异常

第 10 行：你不必在这里初始化任何东西，因为你已经在上面初始化了 p。

# android - alarmManager 唤醒时更改 ImageView 资源

> ID：11067420
> 
> 赞同：1
> 
> 时间：2012-06-16T22:09:06.393
> 
> 标签：android, service, timer, handler, android-view

我的活动中有一个 ImageView，它在激活服务时显示“活动”符号。服务执行后，ImageView 应该回到“非活动”符号。

启动服务的 AlarManager：

```
 context = this;
    Intent intent = new Intent(context, AlarmReceiver.class);
            sender = PendingIntent.getBroadcast(context, INTENT_CODE, intent,
                    PendingIntent.FLAG_UPDATE_CURRENT);
            am = (AlarmManager) getSystemService(ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, calNew.getTimeInMillis(), sender);
setImage(active); 
```

警报管理器：

```
@Override
    public void onReceive(Context context, Intent intent) {

        Intent wakeupIntent = new Intent(context, WakeupActivity.class);
        context.startService(wakeupIntent);

    } 
```

如何在服务执行后将图像更改回非活动状态？我尝试使用处理程序创建一个新的 Runnable 然后 postDelayed(runnable, calNew.getTimeInMillis()) 。实际上它没有工作，什么也没发生。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:18:12.963

> 如何在服务执行后将图像更改回非活动状态？

第 1 步：将 Android 支持包添加到您的应用程序。

第 2 步：让您的活动在 in 中注册并在`BroadcastReceiver`中取消注册。`LocalBroadcastManager``onResume()``onPause()`

第 3 步：让您的服务`LocalBroadcastManager`在其工作完成时发送一个广播，以由活动的`BroadcastReceiver`.

这是一个演示此技术[的示例项目。](https://github.com/commonsguy/cw-omnibus/tree/master/Intents/Local)

# ruby - put 和 MESSAGE 之间的区别？

> ID：11067421
> 
> 赞同：0
> 
> 时间：2012-06-16T22:09:30.467
> 
> 标签：ruby

`MESSAGE`最后一个字符串的使用和标签有什么区别？

```
user = ARGV.first
prompt = '>  '

puts "Hi #{user}, im the #{$0} script."
puts "I'd like to ask you a few questions."
puts "Do you like me #{user}?"
print prompt
likes = STDIN.gets.chomp()

puts "Where do you live #{user}?"
print prompt
lives = STDIN.gets.chomp()

puts "What kind of computer do u have?"
print prompt
computer = STDIN.gets.chomp()

puts <<MESSAGE
"Alright, so you said #{likes} about liking me. You live in #{lives}. Not sure where it is.
And you have a #{computer} computer, which is nice." 
MESSAGE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:12:26.677

你看到的是一个叫做[here-docs](http://blog.jayfields.com/2006/12/ruby-multiline-strings-here-doc-or.html)的东西。这是一种无需转义引号即可拥有多行字符串的便捷方式。除此之外，它们只是常规字符串。

一些编辑器可能会提供额外的功能。请参阅[我的其他答案](https://stackoverflow.com/a/10561197/125816)。

# scala - Squeryl：显式运行查询

> ID：11067425
> 
> 赞同：5
> 
> 时间：2012-06-16T22:10:17.537
> 
> 标签：scala, orm, playframework, playframework-2.0, squeryl

当我在 squeryl 中创建查询时，它返回一个 Query[T] 对象。查询尚未执行，当我迭代 Query 对象时（Query[T] 扩展 Iterable[T]），查询尚未执行。

围绕查询的执行必须有一个 transaction{} 或一个 inTransaction{} 块。

我只是说 SELECT 查询和事务不是必需的，但是 squeryl 框架需要它们。

我想在我的应用程序模型中创建一个查询，并将其直接传递给模板中的视图助手对其进行迭代并呈现数据的视图。这只有在将 transaction{} 块放入控制器时才有可能（控制器包含模板的调用，因此执行迭代的模板也在内部）。不可能将 transaction{} 块放入模型中，因为模型并没有真正执行查询。

但据我了解，交易与控制器无关。由模型决定使用哪个数据库框架、如何使用它以及在哪里使用事务。所以我希望 transaction{} 块在模型中。

我知道我可以——而不是返回 Query[T] 实例——在这个 Query[T] 对象上调用 Iterable[T].toList，然后返回创建的列表。然后整个查询在模型中执行，一切都很好。但我不喜欢这种方法，因为从数据库请求的所有数据都必须缓存在这个列表中。我更喜欢将这些数据直接传递给视图的方式。我喜欢在结果集很大时流式传输结果集的 MySql 功能。

有没有可能？可能类似于将请求发送到数据库的函数 Query[T].executeNow() 能够关闭事务，但仍使用 MySQL 流功能并接收其余的（选择并因此固定）结果集它被访问了吗？因为结果集在查询时是固定的，所以关闭事务应该不是问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T10:07:04.310

我在这里看到的一般问题是您尝试结合以下两个想法：

*   数据的惰性计算；这里：数据库结果

*   隐藏对必须在计算完成时触发的后处理操作的需求；此处：从您的控制器中隐藏或查看必须关闭数据库会话

由于您的计算是惰性的，并且由于您没有义务将其执行到最后（这里：迭代整个结果集），因此没有明显的钩子可以触发后处理步骤。

您的调用建议`Query[T].toList`不会出现此问题，因为计算执行到最后，并且请求结果集的最后一个元素可以用作关闭会话的触发器。

也就是说，我能想到的最好的方法如下，这是对内部代码的改编`org.squeryl.dsl.QueryDsl._using`：

```
class IterableQuery[T](val q: Query[T]) extends Iterable[T] {
  private var lifeCycleState: Int = 0
  private var session: Session = null
  private var prevSession: Option[Session] = None

  def start() {
    assert(lifeCycleState == 0, "Queries may not be restarted.")
    lifeCycleState = 1

    /* Create a new session for this query. */
    session = SessionFactory.newSession

    /* Store and unbind a possibly existing session. */
    val prevSession = Session.currentSessionOption
    if(prevSession != None) prevSession.get.unbindFromCurrentThread

    /* Bind newly created session. */
    session.bindToCurrentThread
  }

  def iterator = {
    assert(lifeCycleState == 1, "Query is not active.")
    q.toStream.iterator
  }

  def stop() {
    assert(lifeCycleState == 1, "Query is not active.")
    lifeCycleState = 2

    /* Unbind session and close it. */
    session.unbindFromCurrentThread
    session.close

    /* Re-bind previous session, if it existed. */
    if(prevSession != None) prevSession.get.bindToCurrentThread
  }
} 
```

客户端可以按如下方式使用查询包装器：

```
var manualIt = new IterableQuery(booksQuery)
manualIt.start()
manualIt.foreach(println)
manualIt.stop()
//      manualIt.foreach(println) /* Fails, as expected */

manualIt = new IterableQuery(booksQuery) /* Queries can be reused */
manualIt.start()
manualIt.foreach(b => println("Book: " + b))
manualIt.stop() 
```

`manualIt.start()`在创建对象时，即在 的构造函数中`IterableQuery`，或在对象被传递给控制器​​之前，可能已经完成了对 的调用。

但是，以这种方式处理资源（文件、数据库连接等）非常脆弱，因为在出​​现异常时不会触发后处理。如果您查看实现，您会`org.squeryl.dsl.QueryDsl._using`看到.`try ... finally``IterableQuery`

# java - 在 Java 中只检测红色像素

> ID：11067426
> 
> 赞同：1
> 
> 时间：2012-06-16T22:10:18.987
> 
> 标签：java, image-processing, colors, rgb

我需要使用 Java 检测图像中的所有红色像素。最好的方法是什么？

仅当红色 RGB 值 > 200 时才假设像素为红色还不够好（请参阅[此表](http://www.workwithcolor.com/red-color-hue-range-01.htm)）。

那么有没有更好的方法来做到这一点？还是有一些 red-color-rgb 算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:13:10.183

看看[YCrCb](http://en.wikipedia.org/wiki/YCbCr)颜色空间。

简单算法：将您的 RGB 图像转换为 YCrCb，提取红色通道并设置阈值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T22:13:15.490

将 RGB 转换为[HSL](http://en.wikipedia.org/wiki/HSL_and_HSV)，并对色调 (H) 分量进行阈值处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T22:20:02.787

正如您所建议的，您可能想在 HSB 空间中进行一些比较。您可能希望根据您的期望为所有三个值定义适当的愤怒。

您可以使用`Color.RGBtoHSB`从给定颜色获取值。

[http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#RGBtoHSB%28int%2C%20int%2C%20int%2C%20float%5B%5D%29](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#RGBtoHSB%28int%2C%20int%2C%20int%2C%20float%5B%5D%29)

# objective-c - 像 UITextField 一样遮蔽 UITextview

> ID：11067427
> 
> 赞同：2
> 
> 时间：2012-06-16T22:10:57.550
> 
> 标签：objective-c, ios, uitextfield, uitextview

我在 Stack Overflow 上搜索了苹果的文档和其他帖子，但我仍然无法在 UITextView 内部添加阴影。我想让它看起来像一个 UITextField。这是我尝试过的代码。

```
CALayer *frontLayer = self.frontField.layer;
[frontLayer setBorderColor:CGColorCreate(CGColorSpaceCreateDeviceGray(), nil)];
[frontLayer setBorderWidth:1];
[frontLayer setCornerRadius:5];
[frontLayer setShadowRadius:10.0];
CGSize shadowOffset = {0.0,3.0};
[frontLayer setShadowOffset:shadowOffset];
[frontLayer setShadowOpacity:1];
self.frontField.clipsToBounds = YES; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:19:39.370

从简单开始，试试这个：

```
[myTextView.layer setShadowColor:[[UIColor blackColor] CGColor]];
[myTextView.layer setShadowOffset:CGSizeMake(1.0, 1.0)];
[myTextView.layer setShadowOpacity:1.0];
[myTextView.layer setShadowRadius:0.3];
[myTextView.layer.masksToBounds = NO]; //<-- for UITextView! 
```

为了优化性能还添加：

```
view.layer.shadowPath = [UIBezierPath bezierPathWithRect:myTextView.bounds].CGPath; 
```

然后，您可以将其他属性一一添加，看看是什么导致了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T16:37:37.400

根据[25 个 iOS 性能提示和技巧](http://www.raywenderlich.com/31166/25-ios-app-performance-tips-tricks#shadowpath)，通过设置 shadowOffset 添加阴影是一项昂贵的操作并且会影响性​​能。

> Core Animation 必须先进行屏幕外传递，才能在渲染投影之前确定视图的确切形状，这是一项相当昂贵的操作。

您可以改用：

```
myTextView.layer.shadowPath = [[UIBezierPath bezierPathWithRect:view.bounds] CGPath]; 
```

# mysql - MYSQL + 同时选择和删除

> ID：11067428
> 
> 赞同：2
> 
> 时间：2012-06-16T22:10:58.160
> 
> 标签：mysql

是否可以同时选择和删除？

例如：在一个命令中还是必须作为 2 个单独的命令运行？

从表中读取行（使用 WHERE）然后删除已读取的行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:13:30.370

是的，有可能。您可以在事务中运行这两个命令，将它们作为一个原子单元提交。

# ios - 从 OS X 以外的环境驱动的 iOS UI 测试

> ID：11067433
> 
> 赞同：2
> 
> 时间：2012-06-16T22:11:20.170
> 
> 标签：ios, testing

我正在寻找一种工具来测试 iPhone 应用程序 UI，并且希望通过 HTTP 向手机上的测试服务器发送命令，让测试驱动程序在 Windows 或 Linux 环境中执行测试。那里有这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:40:54.400

我一直找不到任何可以让我在非 OSX 环境中自动测试 GUI 的东西。

Instruments 的自动化部分有替代方案。例如，您可以使用 FoneMonkey [http://www.drdobbs.com/open-source/231901614](http://www.drdobbs.com/open-source/231901614)

您写道，您想使用 HTTP 向设备上运行的某种神奇的 TestServer 发送命令。我认为这在非​​root手机上是非常不可能的，同时您将无法自动获得测试结果，（通过HTTP询问屏幕上是否有按钮似乎......错误） .

您进行此设置的原因是什么？

无论如何，长话短说，我的回答是否定的，那里没有你要求的东西，我建议你研究一下 Apples [Automation Instruments](https://developer.apple.com/library/ios/#documentation/AnalysisTools/Reference/Instruments_User_Reference/AutomationInstrument/AutomationInstrument.html)，它可以让你做很多漂亮的事情

祝你好运！

# vbscript - VBS 将文件重命名为与文件夹名称相同

> ID：11067434
> 
> 赞同：0
> 
> 时间：2012-06-16T22:11:24.377
> 
> 标签：vbscript, rename

是否可以使用 vbs 将文件夹中的文件重命名为其文件夹名称？我有以下脚本，此时我只是在使用 MsgBox 进行调试，然后再实施重命名。由于某种原因，ObjFolder 没有改变。

```
Option Explicit
Dim strFolderToSearch, objFSO, objRootFolder, objFolder, colSubfolders, strOutput, objStartFolder, colFiles, objFile

strFolderToSearch = "D:\Shared\Films"

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objRootFolder = objFSO.GetFolder(strFolderToSearch)
Set colSubfolders = objRootFolder.SubFolders

For Each objFolder in colSubfolders

objStartFolder = objFolder
Set objFolder = objFSO.GetFolder(objStartFolder)
Set colFiles = objFolder.Files

For Each objFile in colSubfolders
MsgBox objFile.name & "," & objFolder.name
Next
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:42:04.607

我承认我看不懂你的文件夹、子文件夹和文件的纠结。但是，如果您想重命名文件夹中的文件，请使用以下策略：

```
 Dim sDName  : sDName  = "FancyRename"
  Dim sDName2 : sDName2 = "," & sDName
  Dim oFile, sNewName
  For Each oFile In goFS.GetFolder(goFS.BuildPath("..\testdata", sDName)).Files
      If 0 = Instr(oFile.Name, sDName2) Then
         sNewName = Replace(oFile.Name, ".", sDName2 & ".")
      Else
         sNewName = Replace(oFile.Name, sDName2, "")
      End If
      WScript.Echo oFile.Name, "=>", sNewName
      oFile.Name = sNewName
  Next 
```

运行这三次的输出：

```
that.txt => that,FancyRename.txt
this.txt => this,FancyRename.txt

that,FancyRename.txt => that.txt
this,FancyRename.txt => this.txt

that.txt => that,FancyRename.txt
this.txt => this,FancyRename.txt 
```

**更新**

怎么样：给定一个文件夹 D 和一个文件名 F（例如 someavi.avi），将 D 及其子文件夹中的所有（现有）Fs 重命名为“subfoldername.avi”，除非这样的文件已经存在：

```
recursiveRename goFS.GetFolder("..\testdata\FancyRename"), "someavi", "avi"

Sub recursiveRename(oDir, sFiNa, sExt)
  WScript.Echo "Looking into", oDir.Path
  Dim sOFiNa  : sOFiNa  = sFiNa & "." & sExt
  Dim sOFSpec : sOFSpec = goFS.BuildPath(oDir.Path, sOFiNa)
  Dim sNFSpec
  If goFS.FileExists(sOFSpec) Then
     WScript.Echo "found ", sOFSpec
     sNFSpec = goFS.BuildPath(oDir.Path, oDir.Name & "." & sExt)
     If goFS.FileExists(sNFSpec) Then
        WScript.Echo "found ", sNFSpec, "- can't rename"
     Else
        WScript.Echo "found no", sNFSpec, "- will rename"
        goFS.MoveFile sOFSpec, sNFSpec
     End If
  Else
     WScript.Echo "found no", sOFSpec
  End If

  Dim oSubF
  For Each oSubF In oDir.SubFolders
      recursiveRename oSubF, sFiNa, sExt
  Next
End Sub 
```

样本输出：

```
Looking into M:\lib\kurs0705\testdata\FancyRename
found no M:\lib\kurs0705\testdata\FancyRename\someavi.avi
Looking into M:\lib\kurs0705\testdata\FancyRename\subfa
found no M:\lib\kurs0705\testdata\FancyRename\subfa\someavi.avi
Looking into M:\lib\kurs0705\testdata\FancyRename\subfc
found  M:\lib\kurs0705\testdata\FancyRename\subfc\someavi.avi
found no M:\lib\kurs0705\testdata\FancyRename\subfc\subfc.avi - will rename
Looking into M:\lib\kurs0705\testdata\FancyRename\subfb
found  M:\lib\kurs0705\testdata\FancyRename\subfb\someavi.avi
found  M:\lib\kurs0705\testdata\FancyRename\subfb\subfb.avi - can't rename 
```

**更新二**

更改规格：将 .avi 重命名为文件夹名称，如果只有一个 .avi

```
recursiveRename03 goFS.GetFolder("..\testdata\FancyRename")

Sub recursiveRename03(oDir)
  WScript.Echo "Looking into", oDir.Path
  Dim sNFSpec : sNFSpec = goFS.BuildPath(oDir.Path, oDir.Name & ".avi")
  If goFS.FileExists(sNFSpec) Then
     WScript.Echo "found ", sNFSpec, "- can't rename"
  Else
     Dim oOFile  : Set oOFile = Nothing
     Dim oFile
     For Each oFile In oDir.Files
         If "avi" = goFS.GetExtensionName(oFile.Name) Then
            If oOFile Is Nothing Then
               Set oOFile = oFile
            Else
               WScript.Echo "Found second avi", oFile.Name
               Set oOFile = Nothing
               Exit For
            End If
         End If
     Next
     If oOFile Is Nothing Then
        WScript.Echo "not exactly one avi found"
     Else
        WScript.Echo "found ", oOFile.Name, "- will rename"
        oOFile.Name = oDir.Name & ".avi"
     End If
  End If

  Dim oSubF
  For Each oSubF In oDir.SubFolders
      recursiveRename03 oSubF
  Next
End Sub 
```

**更新三**

*   如果您使用全局 FSO 或将 FSO 传递给需要它的 Subs/Function，则可以避免重复重新创建它。
*   如果您将文件夹/文件对象而不是字符串传递给处理此类对象的 Subs/Function，则可以立即/免费访问它们的属性/方法（无需通过字符串操作回收/取回信息）。
*   如果重命名文件，则必须检查是否存在具有新名称的文件（仅检查您使用的文件是否没有新名称是不够的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:25:28.303

理想情况下，您的脚本应具有以下功能：

*   递归 - 用于遍历 D:\Shared\Films 深度为 1-n 的文件夹
*   重命名文件功能 - 用于根据您的规则重命名匹配文件。

我编写了以下脚本，其中包含以下例程：

*   RenameAllVideos(strFolder) - 这将递归搜索子文件夹
*   RenameVideo(strFileName) - 将使用您的规则重命名匹配的视频文件

这是我的脚本：

```
Option Explicit

Call RenameAllVideos("D:\Shared\Films")

Sub RenameAllVideos(strFolder)
  Dim fso, file, folder
  Set fso = CreateObject("Scripting.FileSystemObject")

  ' Check for AVIs to rename.
  For Each file in fso.GetFolder(strFolder).Files
    If Right(file.Name, 4) = ".avi" Then
      Call RenameVideo(strFolder & "\" & file.Name)
    End If
  Next

  ' Check for SubFolders to recurse into.
  For Each folder in fso.GetFolder(strFolder).SubFolders
    Call RenameAllVideos(strFolder & "\" & folder.Name)
  Next
End Sub

Sub RenameVideo(strFileName)
  Dim fso, strExt, strFolder, strNewFileName
  Set fso = CreateObject("Scripting.FileSystemobject")

  ' Note the extension (should be avi)
  strExt = fso.GetExtensionName(strFileName)

  ' Derive the full path to the folder.
  strFolder = fso.GetParentFolderName(strFileName)

  ' Derive the new filename.
  strNewFileName = strFolder & "\" & fso.GetBaseName(strFolder) & "." & strExt

  ' Do the rename.
  If strFileName <> strNewFileName Then
    WScript.Echo "Renaming " & strFileName & " to " & strNewFileName
    fso.MoveFile strFileName, strNewFileName
  End If
End Sub 
```

# mysql - 学生报告数据库设计

> ID：11067438
> 
> 赞同：1
> 
> 时间：2012-06-16T22:11:53.910
> 
> 标签：mysql, database

我想显示这样的表格 ![举报图片](../Images/9372c2fd45207e417ab70dfc8f84baa0.png)

从三个数据库表生成取决于学生证

![表格图像](../Images/bdea7d5a9217bb256797202c8dc9bddc.png)

这是插入学生分数的最佳方式吗？如果我一年有 5,000 名学生和 10 个科目和 12 次考试，我将在 Stu_Marks 表中有超过 500.000 条记录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:19:55.970

是的，表格已标准化。顺便说一句，您还应该有一个学生信息表（姓名，姓氏）。

关于记录数：您指的是数据的粒度，而您的粒度与元组{student，subject，exam}有关。如果您想存储每个学生投票的信息，则无法避免使用包含 500,000 条记录的表。

# linux - 如何搜索多个pdf文件的内容并返回pdf的文件名？

> ID：11067447
> 
> 赞同：2
> 
> 时间：2012-06-16T22:12:38.110
> 
> 标签：linux, pdf, full-text-search, grep, debian

我在这里搜索并找到了这个：

```
find /path -name '*.pdf' -exec pdftotext {} - \; | grep "your query" 
```

但是，它会返回具有“您的查询”的 pdf 文件中的文本块。有一种方法可以返回文件名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:46:53.880

这列出了其文本转换与您的查询匹配的所有文件：

```
find /path -name '*.pdf' -exec sh -c "pdftotext {} - | grep --label {} -l 'your query'" \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T22:21:04.927

正如 Neil 建议的那样：您可以使用该`-l`选项。如果你也需要匹配数，你可以试试这个：

```
find /path -name '*.pdf' -exec pdftotext {} - \; | grep -H -c "your query" 
```

该`-H`选项打印文件名，该`-c`选项打印计数。当然，您可以稍后删除计数。

# mysql - MySQL查询AND OR运算符逻辑

> ID：11067451
> 
> 赞同：5
> 
> 时间：2012-06-16T22:13:09.060
> 
> 标签：mysql, database, computer-science

我周一正在为我的 Comp Science 项目做一个项目，我遇到了一个关于查询的 MySQL 问题。

我想通过文字实现的就是这个。

如果**to=jake 列和 from=connor**列或**to=connor 列和 from=jake 列**从该特定表中获取 cID。

到目前为止我所拥有的是这个

```
 $query="SELECT cID FROM conversation WHERE to='$to' AND to='$from' OR to='$from' AND        from='$to'"; 
```

我可以做些什么来让这个查询工作？提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-16T22:15:28.247

您只需要一对`()`将两个条件对分组，用逻辑分隔`OR`

```
$query="
  SELECT cID 
  FROM conversation
  WHERE 
      /* to Jake, from Connor */
     (`to`='$to' AND `from`='$from')
      /* OR to connor, from jake */ 
     OR  (`to`='$from' AND `from`='$to')"; 
```

注意：`FROM`and`TO`都是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此需要用反引号引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:16:41.490

这是未经测试的，但我认为您需要将 to='$to' AND to='$from' （我猜应该是 from not to ??）放入括号中？

刚刚意识到别人在我打字的时候放了这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T22:16:54.143

```
$query="SELECT cID FROM conversation WHERE 
(to='$to' OR to='$from' OR to='$from') AND from='$to'"; 
```

# drupal - Drupal 7 在搜索块表单配置中添加一个字段

> ID：11067456
> 
> 赞同：1
> 
> 时间：2012-06-16T22:13:51.260
> 
> 标签：drupal

我想构建一个模块，在搜索表单块配置页面上添加一个额外的字段来存储将显示为 HTML5 占位符属性的文本。我需要使用哪些钩子？如何仅修改搜索表单块以使额外的 texbox 打印在页面上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:41:56.480

这是最终工作的代码，感谢您的帮助：

```
function yourmodule_form_alter(&$form, &$form_state, $form_id) {  
  if (($form_id == 'block_admin_configure') && ($form['module']['#value'] == 'search')) {
    $form['settings']['theplaceholder'] = array(
      '#type' => 'textfield', 
      '#title' => t('Add placeholder text'), 
      '#default_value' => variable_get('theplaceholder'),
      '#maxlength' => 64,
      '#description' => 'Override the default placeholder',
      '#weight' => 2,
      '#access' => TRUE,
    );
    $form['#submit'][] = 'yourmodule_submit_function';
  }

if ($form_id == 'search_block_form') {
    $form['search_block_form']['#attributes']['placeholder'] = variable_get('theplaceholder');
  }
}
function yourmodule_submit_function($delta = '', $edit = array()){  
    variable_set('theplaceholder', $edit['values']['theplaceholder']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:00:04.090

您可以使用以下挂钩来修改任何形式：

```
function MODULE_NAME_form_FORM_ID_alter(&$form, &$form_state, $form_id) {

} 
```

插入您自己的模块名称和您要更改的表单的表单 ID。在您的情况下，它只是块的 search-form 或 search-block-form 。通过查看页面的 html 源代码并从元素中获取 id，找出您尝试更改的表单的 id。

无论如何，一旦你确定了要插入的正确 id，就开始向表单添加元素：

```
function MODULE_NAME_form_FORM_ID_alter(&$form, &$form_state, $form_id) {
  $form['my_new_field'] = array(
    '#type' => 'item',
    '#markup' => t('Just testing'),
    '#weight' => 10, 
  );
} 
```

加载表单以确保您的新标签、字段或任何内容都显示出来。

这对你有用吗？

关于这个函数的更多文档在这里：[http ://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_FORM_ID_alter/7](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_FORM_ID_alter/7)

# php - 无论附加过滤器如何，都按属性对商店的所有产品进行排序

> ID：11067457
> 
> 赞同：1
> 
> 时间：2012-06-16T22:13:52.540
> 
> 标签：php, magento, magento-1.6

我认为这很简单，因为 Magento 确实提供了一些很好的方法来做一些很酷的小技巧，但我需要做的只是让所有产品都有一个商店，对所有将按属性值列出的产品进行排序。我不会基于 url 参数，而是进行设置，以便您以编程方式在每次调用产品集合时添加排序。这是我的第一次尝试。在 header.phtml

```
$selected = isset($_GET['gender_orientation'])?$_GET['gender_orientation']:0;

$GenOr=Mage::getModel('core/cookie')->get('GenOr');
if(!$GenOr||$selected>0){
    Mage::getModel('core/cookie')->set('GenOr', $selected, null, null, null, null, null);
}
$selected=Mage::getModel('core/cookie')->get('GenOr');
if($selected>0){
    //Mage::getResourceModel('catalog/product_collection')->addAttributeToFilter('gender_orientation', $selected);
    $productcollection = Mage::getModel('catalog/product')->getCollection();
    $productcollection = $productcollection->addCategoryFilter(Mage::getModel('catalog/category')->load($currcategory),true);
    $productcollection = $productcollection->addAttributeToFilter('gender_orientation', $selected);
    //$collection->getSelect()->addAttributeToSort('name', 'ASC');
} 
```

所以目标是我读取一个 cookie (atm)，然后在完成任何操作之前尝试应用排序。我知道在示例中我将返回集合，但必须有一种方法可以让所有人都参与其中。任何人都有想法..

杰里米

# android - Android：在画布上画“不规则”的笔触，有点像黑板上的粉笔

> ID：11067459
> 
> 赞同：4
> 
> 时间：2012-06-16T22:14:13.323
> 
> 标签：android, android-canvas

我想达到这样的效果：

![黑板上的粉笔效果](../Images/1a7a3d9a3b70b71c288c1ffdd44049f9.png)

有人知道如何在画布上画这样一条线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:11:11.920

靠近一点：

```
 chalkPaint = new Paint();
    chalkPaint.setStyle(Style.STROKE);
    chalkPaint.setStrokeWidth(12);
    Bitmap chalkShader = ((BitmapDrawable)context.getResources().getDrawable(R.drawable.chalk_texture)).getBitmap();
    chalkPaint.setShader(new BitmapShader(chalkShader, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT)); 
```

这将绘制具有粉笔效果的纹理：

![粉笔纹理](../Images/ef302ae63426247dcbc848bccf68b581.png)

现在我“只是”需要不规则的边界......仍在尝试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:08:34.513

这可能比你想象的更难做到。

像这样画线主要是基于随机性。例如，在你图片中的“M”和“N”之间，我认为不是一个而是四个连续的不同画笔大小的小线（在一个小区间内随机选择）。仔细看，你会看到它们。

这四条小线的坐标也是随机调整的（以非常小的量），以避免一旦放在一起就形成一条直线。

两个正方形之间也可能有随机数量的小线（我认为“R”和“X”之间的小线不止四条）。

您可以尝试搜索一个已经完成这项工作的库，我不知道是否有，但这并非不可能。

# r - R：使用 Alpha 控制填充

> ID：11067462
> 
> 赞同：4
> 
> 时间：2012-06-16T22:14:21.227
> 
> 标签：r, ggplot2, alpha

我正在尝试使用 alpha 来控制图形填充的透明度。我了解 alpha 功能已移至 scales 包中，但我仍然无法使其工作。

数据集：

```
library(scales)
library(ggplot2)
Groups <- data.frame(Level=c("High", "Above Average", "Average", "Below Average", "Low"),       
                     Start=c(7.5, 5.5, 4.5, 2.5, .5), End=c(11.5, 7.5, 5.5, 4.5, 2.5)) 
Groups$Start<-as.numeric(as.character(Groups$Start))

d <- data.frame(x=1:10, y=1:10)

basicBox <- ggplot(d, aes(factor(x), y)) + geom_boxplot()
basicBox + 
  geom_rect(aes(NULL, NULL, xmin=Start, xmax=End, fill=Level), ymin=0, ymax=20, data=Groups) + 
  scale_fill_manual(values=alpha(c("red", "blue", "green", "grey", "purple"), 0.2)) 
```

类似的代码可以在 Hadley Wickham 的 ggplot2 的第 86 页找到。当我不加载 scales 库时，我得到并错误地说 R 无法识别 alpha 函数，但即使在我加载 scales 之后，我也无法让 alpha 正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T22:20:59.713

如果我得到你的要求，它应该是这样的：

```
basicBox + 
  geom_rect(aes(NULL, NULL, xmin=Start, xmax=End, fill=Level), 
            ymin=0, ymax=20, data=Groups, alpha=0.2) + 
  scale_fill_manual(values=c("red", "blue", "green", "grey", "purple")) 
```

我将 alpha 参数放入`geom_rect`并没有将其用作函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:20:24.517

不确定“无法让 alpha 正常工作”是什么意思；你的代码对我来说运行良好。

小建议：

```
ggplot(d, aes(factor(x), y)) + 
  geom_rect(aes(NULL, NULL, xmin=Start, xmax=End, fill=Level), 
            alpha = 0.2, ymin=-Inf, ymax=Inf,data=Groups) + 
  geom_boxplot() +
  scale_fill_brewer(palette="Pastel1") 
```

# php - 安装脚本，删除公共 html 中的所有内容，此后出现 500 内部错误

> ID：11067463
> 
> 赞同：0
> 
> 时间：2012-06-16T22:14:54.693
> 
> 标签：php, web, internal

我在 freetravian.com 域名下的虚拟主机上安装了一个名为 travian 的浏览器游戏

它并不顺利，所以我删除了公共 html 中的所有内容并重新开始，在安装过程中我收到了这个错误

内部服务器错误

```
The server encountered an internal error or misconfiguration 
```

并且无法完成您的请求。

```
Please contact the server administrator, webmaster@freetravian.com 
```

并告知他们错误发生的时间，以及您可能所做的任何可能导致错误的事情。

```
More information about this error may be available in the server error log.

Additionally, a 404 Not Found error was encountered while trying to 
```

使用 ErrorDocument 来处理请求。

我提交了一张罚单，他们试图修复它，但三天内没有这样做。所以我决定向成员询问堆栈溢出问题。

该消息说要检查错误日志，所以我这样做了。

```
[Sat Jun 16 17:05:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml
[Sat Jun 16 17:05:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/favicon.ico
[Sat Jun 16 17:05:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/500.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:52 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml
[Sat Jun 16 17:04:52 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/favicon.ico
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/img, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/new.js, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/unx.js, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:51 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/mt-full.js, referer: http://www.freetravian.com/travian/install/index.php?s=3
[Sat Jun 16 17:04:42 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml
[Sat Jun 16 17:04:42 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/favicon.ico
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/img, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/new.js, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/unx.js, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:04:41 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/mt-full.js, referer: http://www.freetravian.com/travian/install/index.php?s=2
[Sat Jun 16 17:02:04 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml
[Sat Jun 16 17:02:04 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/favicon.ico
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/img, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/new.js, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/unx.js, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:03 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/mt-full.js, referer: http://www.freetravian.com/travian/install/?s=1
[Sat Jun 16 17:02:01 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml
[Sat Jun 16 17:02:01 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/favicon.ico
[Sat Jun 16 17:01:56 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/
[Sat Jun 16 17:01:56 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/img, referer: http://www.freetravian.com/travian/install/
[Sat Jun 16 17:01:56 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/
[Sat Jun 16 17:01:56 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/new.js, referer: http://www.freetravian.com/travian/install/
[Sat Jun 16 17:01:56 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/
[Sat Jun 16 17:01:56 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/unx.js, referer: http://www.freetravian.com/travian/install/
[Sat Jun 16 17:01:55 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/404.shtml, referer: http://www.freetravian.com/travian/install/
[Sat Jun 16 17:01:55 2012] [error] [client 75.95.232.155] File does not exist: /home/freetrav/public_html/travian/install/mt-full.js, referer: http://www.freetravian.com/travian/install/ 
```

可能是什么原因？我怀疑我删除了公共 html 中的一些重要内容。我会为所有回答的人 +1。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:20:56.033

我相信这些是您的 Apache 错误日志，我认为您需要查看您的 PHP 错误日志才能找到正确的错误。

# windows - 如何将 Windows 笔记本电脑用作 Macbook Pro 的外接显示器？

> ID：11067470
> 
> 赞同：9
> 
> 时间：2012-06-16T22:15:42.210
> 
> 标签：windows, macos

是否可以将 windows 笔记本电脑用作 macbook pro 的外接显示器？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T22:20:05.177

是的，请查看[Maxivista](http://www.maxivista.com/)（适用于 PC）和[ScreenRecycler](http://www.screenrecycler.com/ScreenRecycler.html)（适用于 Mac）。

# image - 为什么谷歌浏览器不显示 base64 编码的图像？

> ID：11067472
> 
> 赞同：11
> 
> 时间：2012-06-16T22:16:11.713
> 
> 标签：image, google-chrome, base64

Firefox、Internet Explorer、Opera 接受以下代码：

```
<html>
<head>
<style type="text/css">
.minus
{
    width: 11px;
    height: 11px;
    background-image: url("data:image/gif;base64,R0lGODlhCwALAIABAAAAAP///yH5BAEAAAEALAAAAAALAAsAAAIUhI8Wy6zdHlxyqnTBdHqHCoERlhQAOw");
}
</style>
</head>
<body>
<div class="minus">
</body>
</html> 
```

Chrome（版本 19.0.1084.56）没有。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T22:31:47.530

这是 Chrome 中的一个错误，请参阅[错误 #105725](http://code.google.com/p/chromium/issues/detail?id=105725)。必须填充 base64 字符串。以下解决方案可以正常工作：http: [//jsfiddle.net/TunfH/](http://jsfiddle.net/TunfH/)（我`==`在最后添加了）。

```
<html>
<head>
<style type="text/css">
.minus
{
    width: 11px;
    height: 11px;
    background-image: url("data:image/gif;base64,R0lGODlhCwALAIABAAAAAP///yH5BAEAAAEALAAAAAALAAsAAAIUhI8Wy6zdHlxyqnTBdHqHCoERlhQAOw==");
}
</style>
</head>
<body>
<div class="minus"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T22:31:06.503

您的 base64 数据无效，我相信您的意思是

```
data:image/gif;base64,R0lGODlhCwALAIABAAAAAP///yH5BAEAAAEALAAAAAALAAsAAAIUhI8Wy6zdHlxyqnTBdHqHCoERlhQAOw== 
```

这在 Chrome 和 Firefox 中似乎工作得很好[我可以访问的]

我猜 Chrome 的 base64 实现稍微严格一些，并且需要填充。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-05T08:11:15.357

您的问题是您有“//”，您需要“转义”以避免在控制台中看到 err_invalid_url 警告

所以拿你的：

```
R0lGODlhCwALAIABAAAAAP///yH5BAEAAAEALAAAAAALAAsAAAIUhI8Wy6zdHlxyqnTBdHqHCoERlhQAOw 
```

并将其转换为

```
R0lGODlhCwALAIABAAAAAP/%0a/%0a/yH5BAEAAAEALAAAAAALAAsAAAIUhI8Wy6zdHlxyqnTBdHqHCoERlhQAOw 
```

它会正确显示

如果图像以“/”开头，应使用相同的解决方案，将其替换为“%0a/”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-30T16:36:46.623

我将 ...;charset=utf-8;base64, .... 添加到我的一个文件中，这对我有用，只是想我会分享使用 chrome 对我有用的东西，我知道我添加了图像文件到我的代码，但它没有显示在我客户的计算机上，发现这是一个 chrome 问题，添加字符集解决了我的问题。

# iphone - 如何将获取我在 Google Streetview 中的当前位置的按钮添加到我的 iPhone 应用程序？

> ID：11067480
> 
> 赞同：-3
> 
> 时间：2012-06-16T22:18:10.933
> 
> 标签：iphone, objective-c, ios, google-maps, google-maps-api-3

我在视图中创建了一个按钮。

在 ViewModel 中，我希望这个按钮可以打开 Google Streetview 并转到我当前的位置。

我在哪里可以找到一些资源来了解有关在 iPhone 上使用 Google 地图 API 的更多信息？我希望允许用户保存路线等。

我怎样才能让我的按钮在我当前的位置以街景模式打开谷歌地图？我可以在我的应用程序中执行此操作，而无需关闭我的应用程序并打开 Google 地图/返回我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:05:24.390

不清楚你在问什么。你说谷歌地图，但你说你想留在你的应用程序中。

iOS 包含地图工具包，可让您显示地图。这些地图目前由 Google 提供，但听起来这可能会在未来的 iOS 版本中发生变化。阅读 MKMapView 了解更多信息。iOS SDK 包含几个示例应用程序，展示了如何使用地图工具包做不同的事情。

如果你想链接到谷歌地图街景，你需要生成一个谷歌 URL，它应该调用设备上的谷歌地图应用程序。您需要查阅 Google 地图 API 文档以获取有关如何执行此操作的信息。

# android - 在 Android 软键盘中同时具有大写锁定和多行

> ID：11067483
> 
> 赞同：2
> 
> 时间：2012-06-16T22:18:36.083
> 
> 标签：android, text, view

我希望我的键盘有大写锁定，这是由

```
mEditText.setInputType(TYPE_TEXT_FLAG_CAP_CHARACTERS); 
```

我还希望将操作按钮用作`Return`按钮，这意味着转到下一行的开头。这是键盘默认为我打开的方式，也可以通过

```
mEditText.setInputType(131073); 
```

我的问题是，有没有办法让它们共存？同时拥有大写锁定和返回按钮？我尝试了以下选项：

```
mEditText.setInputType(TYPE_TEXT_FLAG_MULTI_LINE); 
```

但它确实没有任何帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:22:54.563

这是一个猜测，但您是否尝试过：

```
mEditText.setInputType(TYPE_TEXT_FLAG_CAP_CHARACTERS | 131073); 
```

# java - 在 Java 中获取非 Java Windows 的标题

> ID：11067484
> 
> 赞同：10
> 
> 时间：2012-06-16T22:18:36.643
> 
> 标签：java, windows

```
Window.getWindows(); 
```

没有得到所有打开的窗口，只有 java 的。有没有办法让操作系统打开的所有窗口。我正在制作一个java任务栏。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-16T22:19:46.313

没有使用核心 Java 的解决方案，但可以使用 JNI 或更简单的 JNA 来解决问题。如评论中所述，没有解决方案（据我所知）将独立于平台。

例如，这个演示程序使用 JNA 枚举 Windows 平台中所有带有标题的 Windows，但也将包括非顶级窗口甚至不可见的窗口：

```
import java.util.ArrayList;
import java.util.List;

import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.win32.StdCallLibrary;

public class EnumAllWindowNames {
   static interface User32 extends StdCallLibrary {
      User32 INSTANCE = (User32) Native.loadLibrary("user32", User32.class);

      interface WNDENUMPROC extends StdCallCallback {
         boolean callback(Pointer hWnd, Pointer arg);
      }

      boolean EnumWindows(WNDENUMPROC lpEnumFunc, Pointer userData);
      int GetWindowTextA(Pointer hWnd, byte[] lpString, int nMaxCount);
      Pointer GetWindow(Pointer hWnd, int uCmd);
   }

   public static List<String> getAllWindowNames() {
      final List<String> windowNames = new ArrayList<String>();
      final User32 user32 = User32.INSTANCE;
      user32 .EnumWindows(new User32.WNDENUMPROC() {

         @Override
         public boolean callback(Pointer hWnd, Pointer arg) {
            byte[] windowText = new byte[512];
            user32.GetWindowTextA(hWnd, windowText, 512);
            String wText = Native.toString(windowText).trim();
            if (!wText.isEmpty()) {
               windowNames.add(wText);
            }
            return true;
         }
      }, null);

      return windowNames;
   }

   public static void main(String[] args) {
      List<String> winNameList = getAllWindowNames();
      for (String winName : winNameList) {
         System.out.println(winName);
      }
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-10T00:33:40.653

除了[@Hovercraft Full Of Eels 之外](https://stackoverflow.com/users/522444/hovercraft-full-of-eels)，如果您还有**标题为不可读字符**并**获得“？”的窗口。**为这些字符打印，尝试：

*   ***通过使用不同的编码****将 byte[] 转换为字符串*（据我所知）

见下文：

```
String wText = Native.toString(windowText, "windows-1254").trim(); 
```

可能的编码而不是“windows-1254（对**土耳其语字符**有效）”：

*   UTF-8
*   UTF-16
*   ASCII
*   ISO-8859-1
*   ...

# c - 为什么 c 允许 main() 即使它不是 int main() 或 void main()？

> ID：11067485
> 
> 赞同：1
> 
> 时间：2012-06-16T22:18:37.093
> 
> 标签：c, syntax

在阅读 K&R 第 2 版时，我注意到程序总是以“main(){”开头。我一直认为 main() 在它之前必须有 int 或 void 。所以它看起来像“int main()”或“void main()”。什么是“main()”，有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T22:20:43.130

`main()`是旧的 K&R 样式，如果未指定`int`，则返回类型默认为省略`int`（您应该指定它）。此外，空括号采用 K&R 样式，表明它不带参数。在 C99 中，现在应该`void`这样表示。空括号意味着该函数将接受任意数量的任何类型的参数，这显然不是您想要的。所以最终的结果是：

```
int main(void) { ... } 
```

`main()`应该返回`int`.. 约定说`return 0;`最后的语句将有助于向调用者指示程序已成功执行 - 非 0 返回值表示异常终止。

对您的问题更直接的答案是`main() { ... }`可行，因为它没有错。编译器看到没有为`main`函数声明返回类型，所以它默认为`int`. 空括号表明它`main`接受任意数量的任何类型的参数，这也没有错。但是，要符合 C99 样式/标准，请使用

```
int main(void) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:24:03.940

因为旧版本的 c 支持这一点。

```
main() 
```

相当于

```
int main() 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-16T22:23:10.587

大多数时候语法取决于**编译器**。例如，当您使用 Visual c++ 时，您编写“void main”，但当您使用 GCC 时，您应该编写“int main()”，然后如果程序完成好或坏，则返回 0 或 1。

# iphone - 用户选择允许后如何处理启用位置服务？

> ID：11067498
> 
> 赞同：2
> 
> 时间：2012-06-16T22:20:16.717
> 
> 标签：iphone, ios, location, cllocationmanager

基本上，当我的应用程序第一次启动时，会出现启用位置服务提示。当用户点击允许时，我想开始更新用户位置并放大该区域。

在我的 viewDidLoad 中，我启动了位置管理器，但不幸的是，在用户有机会点击允许之前加载了视图。在应用程序的第二次启动时一切正常，因为用户已经允许位置服务

我的问题是如何捕获点击允许的事件，以便我可以运行代码来放大某个区域？

我试过使用`-(void)locationManager:didChangeAuthorizationStatus:`，但当用户点击允许时，它似乎没有调用这个委托方法。

希望这是有道理的，我对此很陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T20:55:22.313

据我所知，您不能，但您不必捕获此事件，因为在获得该位置的坐标之前，您将无法缩放到某个位置。您的应用在第二次启动时运行良好，因为它从第一次启动时就使用缓存的位置数据。因此，您需要在收到新的有效坐标后运行缩放代码。如果您使用 CLLocationManager，请查看

```
– locationManager:didUpdateToLocation:fromLocation: 
```

在其代表中。如果用户拒绝使用位置服务，您的代表将收到

```
locationManager:didFailWithError: 
```

有相应的错误。

如果你使用 MKMapKit，比在 MKMapView 委托实现方法中

```
– mapViewWillStartLocatingUser: 
```

专注于当前用户位置。处理拒绝工具

```
– mapView:didFailToLocateUserWithError: 
```

对应 Apple 文档的链接：

[CLLocationManager](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

[CLLocationManagerDelegate](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intf/CLLocationManagerDelegate)

[MKMapViewDelegate](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intf/MKMapViewDelegate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:18:06.890

在这里它工作得很好。我启动位置管理器，然后设置它的委托并启动它。当允许的弹出窗口出现时，将`-(void)locationManager:didChangeAuthorizationStatus:`调用`CLAuthorizationStatus`等于`kCLAuthorizationStatusNotDetermined`。如果我点击“不允许”，它会再次被调用，`CLAuthorizationStatus`等于`kCLAuthorizationStatusDenied`。当点击“允许”时，它被称为`CLAuthorizationStatus`等于`kCLAuthorizationStatusAuthorized`。检查您的委托是否设置正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T10:05:05.780

你可以这样处理：

```
- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status
{

    switch([CLLocationManager authorizationStatus])
    {
        case kCLAuthorizationStatusAuthorized:
            NSLog(@"Location services authorised by user");
            break;

        case kCLAuthorizationStatusDenied:
            NSLog(@"Location services denied by user");
            break;

        case kCLAuthorizationStatusRestricted:
            NSLog(@"Parental controls restrict location services");
            break;

        case kCLAuthorizationStatusNotDetermined:
            NSLog(@"Unable to determine, possibly not available");
            break;
    }
} 
```

# https - HTTPS 是有状态的还是无状态的？

> ID：11067500
> 
> 赞同：16
> 
> 时间：2012-06-16T22:20:34.860
> 
> 标签：https

我想弄清楚 HTTPS 是有状态的还是无状态的？这是关于我构建的 RESTful API 的。我们最初使用的是 HTTP。由于 HTTP 本质上是通过无状态的 TCP/IP 工作的，因此 HTTP 是无状态的，但是当我切换到 HTTPS 时，我的 API 变得有状态。我想知道我的结论是否 HTTPS 是有状态的。正确与否？我使用名为 webMethods 的中间件工具创建了我的 API。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-11-12T21:25:26.747

**TLS/SSL is stateful.** The web server and the client (browser) cache the session including the cryptographic keys to improve performance and do **not** perform key exchange for every request.

**HTTP 1 is not stateful.** HTTP/2 however defines many [stateful components](https://stackoverflow.com/questions/33682693/which-parts-of-http-2-are-stateful), but the "application layer" still remains stateless.

**TL;DR:** The transport pipe (TLS) is stateful, original HTTP is not.

Additional note: Cookies and other stateful mechanisms are later additions defined in separate RFC's. They are not part of the original [HTTP/1.0](https://tools.ietf.org/search/rfc1945) specification, although other stateful mechanisms like caching and HTTP auth are defined [HTTP 1.1 RFC](https://www.rfc-editor.org/rfc/rfc2616) and RFC 2617\. HTTP 1 is said to be stateless although in practice we use standardized stateful mechanisms. HTTP/2 defines stateful components in its standard and is therefore stateful. A particular HTTP/2 application can use a subset of HTTP/2 features to maintain statelessness.

Theory aside, in practice you use HTTP statefully in your everyday life.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-16T22:57:42.817

HTTPS 中的 S 与传输有关，而不是协议。HTTP 协议的语义对于 HTTPS 保持不变。正如[维基百科上关于 HTTPS 的文章](http://en.wikipedia.org/wiki/HTTP_Secure#Network_layers)所述，

> 严格来说，HTTPS 并不是一个单独的协议，而是指在加密的 SSL/TLS 连接上使用普通 HTTP。

而且 HTTP 协议在设计上是无状态的，并不是因为它最常通过 TCP/IP 使用（例如，没有什么能阻止您使用[基于 UDP 的 HTTP](https://stackoverflow.com/questions/323351/does-http-use-udp/323401#323401)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-27T09:35:11.330

HTTPS 是基于安全连接的 HTTP。

HTTP 比连接更高级别。

连接到 Web 服务器时，您的连接（可能总是？）类型为 TCP/IP。因此，如果您通过 HTTPS 访问网站，您的 TCP/IP 连接将被加密。

服务器和/或客户端发送的数据没有被服务器和/或客户端加密。它只是通过 HTTP 发送的，但这次使用的是通过 TCP/IP 的连接，该连接通过加密保护。

如果数据是车辆，而连接是高速公路，那么： - 使用 HTTP 就像在高速公路上行驶的车辆，每个人都可以看到它们；- 使用 HTTPS 也一样，但车辆会通过隧道或任何阻止不在高速公路上的人看到它们的东西。您可以确定有交通，但您无法识别车辆，除了在隧道的两端。

我相信这是一个接近幕后发生的事情的图像。但我不是专家。我只是希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T14:09:08.443

我相信 HTTPS 是一个有状态的协议，因为它包含会话标识符字段。它最初由服务器生成，用于识别与所选客户端的会话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-16T03:13:40.893

HTTP 和 HTTPS 都是无状态协议。HTTPS 中的**S**代表 Secure，它指的是通过加密的 SSL/TLS 连接使用普通 HTTP。

使用 JWT 令牌或使用 cookie 建立会话的传统方式帮助我们克服 HTTP 作为无状态协议的问题，因为它使服务器能够验证客户端的身份，因此您无需每次都登录您单击链接以在网页上导航。

因此，例如，当您登录银行的网站时，它只要求您输入一次登录详细信息。登录后，您无需在导航到帐户设置页面时重新输入它们，这是因为银行网站能够使用 JWT 令牌验证您的身份。

JWT token 只用在 HTTPS 上，不能用在 HTTP 上，因为连接是用 HTTPS 加密的，所以不能被任何人截获。

因此，HTTP 和 HTTPS 都是无状态协议，但 JWT Tokens 为它提供了一种解决方法。

# python - python：非正则表达式等价于 re.findall

> ID：11067511
> 
> 赞同：2
> 
> 时间：2012-06-16T22:21:54.520
> 
> 标签：python, regex, match, findall

我想知道python中是否存在以下任何内容：

*   答：非正则表达式等效于“re.findall()”。
*   B：一种在传递给 findall() 之前中和变量中正则表达式特殊字符的方法。

我将一个变量传递给 re.findall，当变量有句点、斜线或克拉等时会遇到问题，因为我希望这些字符按字面意思解释。我意识到没有必要使用正则表达式来完成这项工作，但我喜欢 re.findall() 的行为，因为它返回找到的每个匹配项的列表。这使我可以使用 len() 轻松计算子字符串存在的次数。

这是我的代码示例：

```
>>substring_matches = re.findall(randomVariableOfCharacters, document_to_be_searched)
>>
>>#^^ will return something like ['you', 'you', 'you']
>>#but could also return something like ['end.', 'end.', 'ends']
>>#if my variable is 'end.' because "." is a wildcard.
>>#I would rather it return ['end.', 'end.']
>>
>>occurrences_of_substring = len(substring_matches) 
```

如果可能的话，我希望不必使用 string.find()。非常感谢任何帮助和/或建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:35:43.470

如果您只想要出现次数，则可以使用[str.count()](http://www.tutorialspoint.com/python/string_count.htm)，但它不等同于[re.findall()](http://docs.python.org/library/re.html#re.findall)它只获取计数。

```
document_to_be_searched = "blabla bla bla."
numOfOcur = document_to_be_searched.count("bl") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T22:32:48.943

当然：查看您的代码，我认为您正在寻找的是`string.count`.

```
>>> 'abcdabc'.count('abc')
2 
```

但是请注意，这*不*等同于`re.findall`; 尽管它看起来更适合您的情况。

# java - java.lang.Class 不能强制转换为 java.lang.reflect.ParameterizedType

> ID：11067512
> 
> 赞同：13
> 
> 时间：2012-06-16T22:22:47.000
> 
> 标签：java, spring

我被这个问题困扰了很长时间。我搜索了这个问题一段时间，但没有一个解决方案有效。

结构：

```
public interface GenericDAO<T extends Serializable, ID extends Serializable>

@Repository
public class AbstractGenericDAO<T extends Serializable, ID extends Serializable> 
    implements GenericDAO<T, ID> {

   private Class<T> persistentClass;

   @Autowired
   private SessionFactory sessionFactory;

   static Logger LOGGER = Logger.getLogger(AbstractGenericDAO.class);

   @SuppressWarnings("unchecked")
   public AbstractGenericDAO() {
       this.persistentClass = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
   }

   /**
    * @param entity
    * @return T
    * @throws DBException
    */
   @SuppressWarnings("unchecked")
   public T saveEntity(T entity) throws DBException {
       return saveEntity(entity, false);
   }

   /**
    * @param entity
    * @param explicitFlush
    * @return T
    * @throws DBException
    */
   @SuppressWarnings("unchecked")
   public T saveEntity(T entity, boolean explicitFlush) throws DBException {
       Session session = getSessionFactory().getCurrentSession();

       try {
           session.save(entity);
           if(explicitFlush) {
               session.flush();
               session.refresh(entity);
           }
       } catch (HibernateException he) {
           String errorMsg = "Could not save entity. Reason: " + he.getMessage();
           LOGGER.error(errorMsg, he);
           throw new DBException(errorMsg, he);
       }

       return entity;
   }

   /* (non-Javadoc)
    * @see com.amazon.fc.receive.dbaccess.dao.GenericDAO#getPersistentClass()
    */
   @SuppressWarnings("unchecked")
   public Class<T> getPersistentClass() {
       return persistentClass;
   }

   /**
    * @return the sessionFactory
    */
   public SessionFactory getSessionFactory() {
       return this.sessionFactory;
   }

   /**
    * @param sessionFactory the sessionFactory to set
    */
   @Autowired
   public void setSessionFactory(SessionFactory sessionFactory) {
       this.sessionFactory = sessionFactory;
   }
}

public interface ShlkActiveWorkflowDAO 
    extends GenericDAO<ShlkActiveWorkflow, Serializable> 

@Repository
public class ShlkActiveWorkflowDAOImpl 
    extends AbstractGenericDAO<ShlkActiveWorkflow, Serializable>
    implements ShlkActiveWorkflowDAO 
```

我也在我`<context:component-scan>`的.`application-config.xml` `+ <tx:annotation-driven />``application-config.xml`

请提供一些有关如何解决此问题的信息。

```
Exception:

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'abstractGenericDAO' 

Constructor threw exception; nested exception is java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:946)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:890)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:479)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:557)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:842)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:416)
    at com.coral.spring.Launcher.<init>(Launcher.java:95)
    at com.coral.spring.Launcher.main(Launcher.java:56)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.workflow.dao.AbstractGenericDAO]: Constructor threw exception; nested exception is     
java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:141)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:72)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:938)
    ... 12 more
Caused by: java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType
    at com.workflow.dao.AbstractGenericDAO.<init>(AbstractGenericDAO.java:43)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    ... 14 more 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T00:33:55.743

从中删除`@Repository`注释`AbstractGenericDAO`并使其`abstract`：

```
public abstract class AbstractGenericDAO<T extends Serializable, ID extends Serializable> 
   implements GenericDAO<T, ID> 
```

出现您的问题是因为`@Repository`它是 的特化`@Component`，这意味着 Spring 将尝试创建`AbstractGenericDAO`用于注入的实例。由于`AbstractGenericDAO`超类 ( `Object`) 不是通用的，您将无法将其向下转换`Type`为`ParameterizedType`，因此这行代码将失败（与您尝试使用手动实例化它的方式相同`new AbstractGenericDAO()`）：

```
this.persistentClass = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0]; 
```

专业类`ShlkActiveWorkflowDAOImpl`仍应使用 注释`@Repository`。当 spring 尝试创建此类的实例时，`AbstractGenericDAO`会隐式调用构造函数，但这一次上面提到的代码行将按预期运行。发生这种情况是因为`getClass()`返回`ShlkActiveWorkflowDAOImpl.class`是泛型的子类`AbstractGenericDAO`（因此向下转型`ParameterizedType`）。

由于`ShlkActiveWorkflowDAOImpl` `extends` `AbstractGenericDAO<ShlkActiveWorkflow, Serializable>`实际类型`ShlkActiveWorkflow`将在运行时正确反映。这是避免将`Class<T>`引用传递给`AbstractGenericDAO`构造函数的已知解决方法。

如果您担心 处的`@Autowired`注释`AbstractGenericDAO`，请不要担心。当您注入其子类之一的实例时，Spring 将正确连接所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-29T08:43:04.187

```
Type genericSuperClass = getClass().getGenericSuperclass();

ParameterizedType parametrizedType = null;
while (parametrizedType == null) {
   if ((genericSuperClass instanceof ParameterizedType)) {
       parametrizedType = (ParameterizedType) genericSuperClass;
   } else {
       genericSuperClass = ((Class<?>) genericSuperClass).getGenericSuperclass();
   }
}

this.itemClass = (Class<T>) parametrizedType.getActualTypeArguments()[0]; 
```

# javascript - JS - 使用变量设置 Div 背景颜色

> ID：11067516
> 
> 赞同：4
> 
> 时间：2012-06-16T22:23:13.233
> 
> 标签：javascript, html, colors

好吧，基本上，我的一个朋友正在练习 JS，他有一个测试基础站点的想法。所以我说我们将进行一场比赛来完成它。在这一点上，我们都遇到了错误。我们在 JS 中创建了一种颜色。但是，当我们需要输出时，它不起作用。我有这个。

```
document.getElementById("outputColor").style.backgroundColor=currentColor; 
```

通过这个制作当前颜色的地方

```
part1 = Math.floor(Math.random() * (255 - 0 + 1)) + 0;
part2 = Math.floor(Math.random() * (255 - 0 + 1)) + 0;
part3 = Math.floor(Math.random() * (255 - 0 + 1)) + 0;
currentColor = "\"rgb (" + part1 + ", " + part2 + ", " + part3 + ")\""; 
```

将当前颜色放在“”中意味着它期待 currentColor 的值。不是实际的变量值。

希望这是有道理的。这是可能的，还是我们找错了树？

谢谢

编辑：它确实有一个与之相关的 CSS 样式

```
#outputColor
{
    height: 100px;
    width: 100px;
    background-color: rgb(0,0,0);
} 
```

编辑：已解决，解决方案是

```
currentColor = "rgb(" + part1 + ", " + part2 + ", " + part3 + ")"; 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:35:54.813

双引号太多了，用这个：

```
currentColor = "rgb(" + part1 + ", " + part2 + ", " + part3 + ")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:38:35.940

```
currentColor = "rgba(" + part1 + ", " + part2 + ", " + part3 + ",0)"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T22:39:05.180

```
currentColor = "rgb(" + part1 + ", " + part2 + ", " + part3 + ")"; // RGB 
```

或使用十六进制格式

```
currentColorHex="#"+(part1).toString(16)+(part2).toString(16)+(part3).toString(16); 
```

[**演示。**](http://jsfiddle.net/heera/WTWGH/1/)

# php - PHP：为什么不获取我将插入数据库的图像数据？

> ID：11067520
> 
> 赞同：1
> 
> 时间：2012-06-16T22:24:09.337
> 
> 标签：php, file-upload

我有下一个问题：验证姓名、地址和电子邮件的代码有效，但验证图像无效，不知道为什么会发生这种情况。一如既往地打印“选择图像”

我做了一个测试，并设置了用**“print $photo”打印**图像的临时名称但没有打印出来的行！

**表单.php**

```
<form id="formregister" name="formregister" action="register.php" method="post">
    <input id="name" name="name" type="text"/>
    <input id="address" name="address"  type="text"/>
    <input id="email" name="email" type="email" />
    <input id="photouser" name="imguser" type="file"/>
    <input id="bregister" name="bregister" type="submit" value="Registrer"/>
</form> 
```

**注册.php**

```
..............
$name = $_POST['name'];
$address = $_POST['address'];
$email = $_POST['email'];
$photo = $_FILES['imguser']['tmp_name'];
$errors = array();

    if(!isset($photo)) {
        $errors[] = "Select an image";
    } else {
        $fototemp = addslashes(file_get_contents($_FILES['imguser']['tmp_name']));
        $fotoname = addslashes($_FILES['imguser']['name']);
        $fotosize = getimagesize($_FILES['imguser']['tmp_name']);
        if ($fotosize == false) {
            $errors[] = "Invalid format";
        }
    } 
//Code to validate the other fields (name, address, email)
.................... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:27:17.817

您在表单上缺少正确`enctype`的文件上传。它应该是`enctype='multipart/form-data'`

```
<form id="formregister" name="formregister" action="register.php" method="post" enctype='multipart/form-data'> 
```

与其直接访问辅助键，不如`tmp_name`先测试它是否被设置以避免未定义的索引通知：

```
if (isset($_FILES['imguser']) {
  $photo = $_FILES['imguser']['tmp_name'];
} 
```

# css - 是否有免费使用、模块化、css 样式的存储库？

> ID：11067524
> 
> 赞同：3
> 
> 时间：2012-06-16T22:24:46.670
> 
> 标签：css, stylesheet

我正在组建一个小型网站，作为一名程序员（而不是设计师），我认为是小型、模块化、可重用的单元。因此，与其从头开始编写我所有的 css，我希望有一个类似 CSS 样式的存储库，其中包含各种 CSS 元素（表单域、排版、按钮、布局）和屏幕截图，这样我就可以在窗口商店中混合和匹配我想要的东西，在我的网站上获取代码并将所有内容组装在一起。

我知道有 CSS 主题网站，但是有了这些网站，你就可以得到整个网站，如果你只是想借用一个按钮，那么你必须深入挖掘主题的 css 并自己提取所有相关的 css 属性（我猜萤火虫等在这里会有所帮助，但仍然如此）。

还有一些片段站点，但这些站点是偶然的，并且不打算像我描述的那样使用（没有截图可以看到样式的样子）。

网络上还散布着一些用于特定元素的小型库（如导航菜单或表单）。这些更接近我想要的，但似乎没有单一的存储库来托管它们（可以这么说，没有 CSS 的 github）。你得到的最好的是那些“40 个很棒的 CSS 导航菜单”类型的文章之一。

*必须*有这样的事情。如果没有，有人可以建造它（或告诉我为什么不能建造它）。

# javascript - Facebook 图 FB.login 连接对话框，取消事件

> ID：11067525
> 
> 赞同：1
> 
> 时间：2012-06-16T22:25:08.727
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

当用户未连接并且一切看起来都很好时，我正在使用 FB.login，但是当用户在 fb 连接对话框上单击**取消**时，它会关闭，并且我必须在此取消事件上在我的页面上引发一个事件（或者至少在某个地方重定向用户点击取消）。

搜索和搜索但找不到如何引发此类事件（我尝试订阅“auth.cancel”但它不起作用）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T06:06:34.137

当用户取消登录时，他将使用以下 GET 参数重定向到您的页面：

1.  error_reason=user_denied
2.  错误=拒绝访问
3.  error_description=+用户+拒绝+您的+请求。

编辑：

在 JS SDK 中，如此[处](https://developers.facebook.com/docs/reference/javascript/FB.login/)所述：

```
 FB.login(function(response) {
     if (response.authResponse) {
         console.log('Welcome!  Fetching your information.... ');
         FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.');
         });
     } else {
         console.log('User cancelled login or did not fully authorize.');
     }
 }); 
```

# c# - 如何在 C# 中替换字符串的第一个和最后一个字符？

> ID：11067527
> 
> 赞同：1
> 
> 时间：2012-06-16T22:25:20.133
> 
> 标签：c#

我有一个简单的问题，我做了一些研究，但找不到正确的答案。

我有这个字符串：

> |她想吃早餐|

`|`我找到了用另一个字符替换所有字符的答案。

我的想法是我想用 . 替换第一个`|`，`{`最后一个替换为`}`.

我知道这很容易，但我对这个问题的回答真的会帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T22:28:30.247

您可以使用[`string.Substring`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)：

```
s = "{" + s.Substring(1, s.Length - 2) + "}"; 
```

在线查看它：[ideone](http://ideone.com/TtqCr)

这假定您要替换的字符是字符串中的第一个和最后一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T23:12:06.037

如果您使用 .Net 3 及更高版本并且不想使用扩展方法，那么您可以更喜欢 Lambda 以获得比普通字符串操作更好的性能。

```
string s = "|she wants to eat breakfast|";
s.Replace(s.ToCharArray().First(ch => ch == '|'), '{'); //this replaces the first '|' char
s.Replace(s.ToCharArray().Last(ch => ch == '|'), '}'); // this replaces the last '|' char 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T22:29:05.967

```
string oldString = "|She wants to eat breakfast|";
string newString = "{" + oldString.SubString(1,oldString.Length-2) + "}"; 
```

或使用 string.Concat（字符串的 + 运算符的内部实现调用 string.Concat）

```
string newString = string.Concat("{",oldString.SubString(1,oldString.Length-2),"}"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T01:48:34.127

**最快**的方法是：

```
var str = "|She wants to eat breakfast|";

unsafe
{
    fixed (char* pt = str)
    {
        pt[0] = '{';
        pt[str.Length - 1] = '}';
    }
}

Console.WriteLine(str); // Prints: {She wants to eat breakfast} 
```

您将需要启用**不安全代码**（右键单击项目 > 属性 > 构建 > “允许不安全代码”。

这比使用 Substring 并在边缘添加手镯快约**19 倍。**

# java - Java - 在这种情况下，委托是好的解决方案吗？

> ID：11067530
> 
> 赞同：2
> 
> 时间：2012-06-16T22:25:55.500
> 
> 标签：java, design-patterns, architecture, overriding, delegation

这是我的问题：

我有一个巨大的类（HugeClass），我想把它分成几个小类（LittleClass1，LittleClass2，...）。我听说过代表团。听起来不错，但我认为它不适用于我的情况。确实，我的小班需要一些 HugeClass 的属性：

```
public class  HugeClass
{
    // Attributes
    private Object object1;
    private Object object2;
    private Object object3;
    ...
    private Object objectN;

    // Delegation 1
    private LittleClass1  little1 = new LittleClass1 ();

    // Function delegated in the LittleClass1
    public void  delegated1 ()
    {
        little1.delegated1 ();
    }

} 
```

这是一个委托类的示例：

```
public class  LittleClass1
{
    public LittleClass1 ()
    {

    }

    public void  delegated1 ()
    {
        // Here, I need object1, object3, and more to work !
    }

} 
```

delegated1 函数所需的属性数量可能很大。所以我觉得使用LittleClass1的构造函数不是很方便。

而且因为 LittleClass1 只覆盖了 HugeClass 的一个方法，所以我认为 LittleClass1 不应该扩展 HugeClass。

你有解决方案的想法吗？使用另一种模式？

谢谢 ！

**更新**

委托函数可能不仅需要实例变量，还需要实例函数：

```
public class  LittleClass2
{
    public LittleClass2 ()
    {

    }

    public void  delegated2 ()
    {
        // I need object2 and delegated1 to work !
    }

} 
```

将 HugeClass 赋予构造函数可能会解决此问题。但这是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T23:48:28.283

将一个巨大的类分解成更小的类通常有助于提高代码的可维护性、可测试性和整体质量。较小的块应该更容易单独推理。您想要的是寻找巨大类的语义上不同的特征，并将它们分开，首先通过提取方法，然后通过提取类。您不一定要寻找一种模式，而是要寻找重构技术，例如*Refactoring*和[*Working Effectively with Legacy Code*](http://codecrafter.blogspot.ca/2010/08/working-effectively-with-legacy-code.html)中的技术。

现在，如果你的小类似乎共享了大类的太多实例变量，也许你应该退后一步，从一些低垂的果实开始，比如不依赖太多变量的代码；或者尝试找到一组在语义上有意义的变量以封装在一个新对象中，什么会减少这些自由变量的数量并提高设计质量，因为在设计中找到潜在*概念*会使代码更多*明确*易懂。*_*

**更新**：顺便说一句，继承真的不是一个好主意。您想解耦关注点，而继承只是另一种更微妙的耦合方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T00:05:02.800

看起来您只需要`LittleClass1`子类`HugeClass`及其字段`protected`：

```
public abstract class HugeClass {
    // Attributes - now protected instead of private
    protected Object object1;
    protected Object object2;
    protected Object object3;
    ...
    protected Object objectN;

    -- Note: No delegation, no reference to LittleClass1 here    

    public abstract void delegated ()

}

public class LittleClass1 extends HugeClass {

    public void delegated () {
        // Here, you have access to object1, object2 etc
    }
} 
```

# c++ - 将灰度、彩色和精巧的图像（3）全部复制到一个大的 IplImage：Opencv 错误？

> ID：11067531
> 
> 赞同：0
> 
> 时间：2012-06-16T22:25:59.197
> 
> 标签：c++, opencv, colors, grayscale, iplimage

我有一个源代码（test.cpp），它应该显示从 avi 文件（逐帧）复制到大图像并显示在单个窗口中的三个图像（彩色、灰度和 canny）。我在 Linux 平台上使用 OpenCV 库和 c++ 编译器（gnu）。

但是我遇到了分段错误（核心转储）。

核心转储：

```
GNU gdb (GDB) 7.0.1-debian
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/ad/Desktop/opencv_exercises/ch4/ex1_b/test...done.

warning: Can't read pathname for load map: Input/output error.
Cannot access memory at address 0x5454505052525555
(gdb) r test.avi
Starting program: /home/ad/Desktop/opencv_exercises/ch4/ex1_b/test test.avi
[Thread debugging using libthread_db enabled]

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff627f831 in memcpy () from /lib/libc.so.6
(gdb) bt
#0  0x00007ffff627f831 in memcpy () from /lib/libc.so.6
#1  0x00007ffff6e5ee42 in cv::Mat::copyTo(cv::Mat&) const ()
   from /usr/lib/libcxcore.so.2.1
#2  0x00007ffff6e629fb in cvCopy () from /usr/lib/libcxcore.so.2.1
#3  0x0000000000400e0a in main (argc=2, argv=0x7fffffffe3a8) at test.cpp:55
(gdb) 
```

这里 test.cpp 的第 55 行是：

...... cvCopy(gray, gray_sub);

……

该程序是（test.cpp）下面给出。是否可以在单个 IplImage 上复制三个图像（彩色、灰度和 canny）？我肯定做错了什么。是否可以帮助我找出我做错了什么？

```
#include <cv.h>
#include <highgui.h>
#include <stdio.h>

int main( int argc, char** argv )
{
    IplImage *frame;
    CvCapture *capture = NULL;

    if(( argc < 2 ) || !(capture = cvCreateFileCapture( argv[1] )))
    {
        printf("Failed to open %s\n", argv[1] );
        return -1;
    }

    double f = cvGetCaptureProperty(
        capture,
        CV_CAP_PROP_FRAME_COUNT
        );
    double fps = cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);

    CvSize size = cvSize(cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH), cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT));
    IplImage *img = NULL;
    double index = 0;
    IplImage *gray = cvCreateImage(size,IPL_DEPTH_8U,1);
    IplImage *canny = cvCreateImage(size,IPL_DEPTH_8U,1);
    IplImage *long_img = cvCreateImage(cvSize(size.width*3, size.height),IPL_DEPTH_8U, 3);
    IplImage *color_sub, *gray_sub, *canny_sub;
    cvNamedWindow("ALLONE", 1);
    int key = 0;

    while( index++ < f)
    {       
            cvGrabFrame(capture);
        img = cvRetrieveFrame(capture);

        color_sub = cvCreateImageHeader(size, long_img->depth, long_img->nChannels);
        color_sub->origin = long_img->origin;
        color_sub->widthStep = long_img->widthStep;
        color_sub->imageData = long_img->imageData;

        cvCopy(img, color_sub);

        cvConvertImage(img, gray);
        gray_sub = cvCreateImageHeader(size, IPL_DEPTH_8U, 1);
        gray_sub->origin = long_img->origin;
        gray_sub->widthStep = long_img->widthStep;
        gray_sub->imageData = long_img->imageData + size.height * long_img->widthStep + size.width * long_img->nChannels;

        cvCopy(gray, gray_sub);

        cvCanny(gray, canny, 100, 200);
        canny_sub = cvCreateImageHeader(size, IPL_DEPTH_8U, 1);
        canny_sub->origin = long_img->origin;
        canny_sub->widthStep = long_img->widthStep;
        canny_sub->imageData = long_img->imageData + size.height * long_img->widthStep + (size.width * 2) * long_img->nChannels;

        cvCopy(canny, canny_sub);

        cvShowImage("ALLONE", long_img);

        key = cvWaitKey(10);
        if(key == 27) break;
        printf("%d\n", key);
    }

    cvReleaseCapture( &capture );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T04:07:25.413

我找到了解决方案。有兴趣的人代码如下：

```
#include <cv.h>
#include <highgui.h>
#include <stdio.h>

int main( int argc, char** argv )
{
    IplImage *frame;
    CvCapture *capture = NULL;

    if(( argc < 2 ) || !(capture = cvCreateFileCapture( argv[1] )))
    {
        printf("Failed to open %s\n", argv[1] );
        return -1;
    }

    double f = cvGetCaptureProperty(
        capture,
        CV_CAP_PROP_FRAME_COUNT
        );
    double fps = cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);

    CvSize size = cvSize(cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH), cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT));
    IplImage *img = NULL;
    double index = 0;
    IplImage *gray = cvCreateImage(size,IPL_DEPTH_8U,1);
    IplImage *canny = cvCreateImage(size,IPL_DEPTH_8U,1);
    IplImage *long_img = cvCreateImage(cvSize(size.width*3, size.height),IPL_DEPTH_8U, 3);
    IplImage *color_sub, *gray_sub, *canny_sub;
    cvNamedWindow("ALLONE", 1);
    int key = 0;

    while( index++ < f)
    {       cvGrabFrame(capture);
        img = cvRetrieveFrame(capture);

        color_sub = cvCreateImageHeader(size, long_img->depth, long_img->nChannels);
        color_sub->origin = long_img->origin;
        color_sub->widthStep = long_img->widthStep;
        color_sub->imageData = long_img->imageData;

        cvCopy(img, color_sub);

        cvCvtColor(img, gray, CV_BGR2GRAY);
        gray_sub = cvCreateImageHeader(size,  long_img->depth,long_img->nChannels);
        gray_sub->origin = long_img->origin;
        gray_sub->widthStep = long_img->widthStep;
        gray_sub->imageData = long_img->imageData  + (size.width * long_img->nChannels);

        cvMerge(gray , gray, gray, NULL, gray_sub);

        cvCanny(gray, canny, 100, 200);
        canny_sub = cvCreateImageHeader(size, long_img->depth, long_img->nChannels);
        canny_sub->origin = long_img->origin;
        canny_sub->widthStep = long_img->widthStep;
        canny_sub->imageData = long_img->imageData +  ((size.width * 2)  * long_img->nChannels);

        cvMerge(canny , canny, canny, NULL, canny_sub);

        cvShowImage("ALLONE", long_img);

        key = (char) cvWaitKey(1000/fps);
        if(key == 27) break;
        printf("%d\n", key);
    }

    cvReleaseCapture( &capture );

    return 0;
} 
```

# ruby-on-rails - 导轨视图未更新

> ID：11067534
> 
> 赞同：1
> 
> 时间：2012-06-16T22:26:28.410
> 
> 标签：ruby-on-rails, erb

我已经开始使用 Redmine 进行我的第一个 Rails 项目。我已经开始深入研究代码以获得更好的想法并且很难理解 erb 文件。当我对welcome.html.erb 文件进行简单更改时，我进行了更改并在浏览器中进行了检查，但没有任何更改。保存文件后，在更新视图之前我需要运行一些东西吗？我不这么认为，但这就是我在这里询问的原因，因为当我保存文件时视图不会更新页面。

预先感谢您的任何帮助。

更新：更新 .html.erb 文件并在 vim 中再次打开它后，我的更改仍然存在。唯一的问题是该页面没有反映所做的更改，当我查看源代码时它也不存在？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:21:36.547

看起来我的云服务器更新页面很慢，所以我需要检查一下，看看为什么会这样。在本地工作时页面没有问题，第二天早上在源中更新了页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:34:48.560

在学习 Rails 时使用 IDE 不是一个好主意。尝试打开控制台并 cd 进入您的应用程序目录。然后运行`rails s`，当您指向`localhost:3000`

您可以让服务器保持运行并使用任何文本编辑器修改您的视图文件。更改应该会自动反映，甚至不需要重新启动服务器。

！

# php - 这是从 PHP 使用 Sphinx 的正确方法吗？

> ID：11067537
> 
> 赞同：10
> 
> 时间：2012-06-16T22:26:52.583
> 
> 标签：php, mysql, search, full-text-search, sphinx

我刚从狮身人面像开始。到目前为止，我成功安装了它，`profiles`在我的 MySQL 数据库上调用了一个表，并且能够使用 PHP API 得到正确的结果。我正在使用 CodeIgniter，因此我将默认的 PHP API 包装为 CodeIgniter 库。

无论如何，这就是我的代码的样子：

```
$query = $_GET['q'];
$this->load->library('sphinxclient');
$this->sphinxclient->setMatchMode(SPH_MATCH_ANY);
$result = $this->sphinxclient->query($query);

$to_fetch = array();
foreach($result['matches'] as $key => $match) {
  array_push($to_fetch, $key);
} 
```

该数组`$to_fetch`包含匹配的表行的 id。现在我可以使用典型的 MySQL 查询来让所有相关用户显示在搜索页面上，如下所示：

```
$query = 'SELECT * FROM profiles WHERE id IN('. join(',', $to_fetch) . ')'; 
```

我的问题是：

1.  这是正确的方法吗？或者是否有默认的“Sphinx 方式”可以更好地提高性能。

2.  其次，我现在得到的只是匹配表行的 id。我还想要列中匹配的部分文本。例如，如果某人搜索关键字，而表中`dog`的用户`profiles`在其`about`列中包含以下文本：

    `I like dogs. I also like ice cream.`

我希望 Sphinx 回归：

```
I like <strong>dogs</strong>. I also like ice cream. 
```

我怎样才能做到这一点？我尝试使用该`buildExcerpts()`功能，但无法使其正常工作。

## 编辑

这就是我现在获得摘录的方式：

```
// get matched user ids
$to_fetch = array();
foreach($result['matches'] as $key => $match) {
  array_push($to_fetch, $key);
}

// get user details of matched ids
$members = $this->search_m->get_users_by_id($to_fetch);

// build excerpts
$excerpts = array();
foreach($members as $member) {

    $fields = array(
        $member['about'],
        $member['likes'],
        $member['dislikes'],
        $member['occupation']
    );

    $options = array(
        'before_match'      => '<strong class="match">',
        'after_match'       => '</strong>',
        'chunk_separator'   => ' ... ',
        'limit'             => 60,
        'around'            => 3,
    );

    $excerpt_result = $this->sphinxclient->BuildExcerpts($fields, 'profiles', $query, $options);
    $excerpts[$member['user_id']] = $excerpt_result;
}

$excerpts_to_return = array();
foreach($excerpts as $key => $excerpt) {
    foreach($excerpt as $v) {
        if(strpos($v, '<strong class="match">') !== false) {
            $excerpts_to_return[$key] = $v;
        }
    }
} 
```

如您所见，我在 4 个不同的 mysql 列中搜索每个查询：

```
about
likes
dislikes
occupation 
```

因此，我不知道 4 列中的哪一列包含匹配的关键字。它可以是其中任何一个，甚至不止一个。所以我别无选择，只能通过`BuildExcerpts()`函数运行所有 4 列的内容。

即便如此，我也不知道带标签`BuildExcerpts()`返回的是哪一个。`<strong class="match">`因此，我`stpos`对返回的所有值进行检查，`BuildExcerpts()`以最终获得正确的摘录并将其映射到其个人资料所属的用户。

考虑到我需要匹配 4 个不同列的内容的情况，您是否看到比这更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:13:49.747

是的，这看起来不错。要记住从 Mysql 返回的行可能不会按照 sphinx 的顺序。

有关如何使用 FIELD() 的信息，请参阅 sphinx 网站上的常见问题解答，但我个人喜欢将 sphinx 中的行放入关联数组中，然后循环遍历我列出的 sphinx 并从数组中获取行。以内存为代价完全避免了排序阶段！

至于突出显示，是的，请坚持使用 buildExcerpts - 这就是这样做的方法。

* * *

编辑添加，这个演示 [http://nearby.org.uk/sphinx/search-example5-withcomments.phps](http://nearby.org.uk/sphinx/search-example5-withcomments.phps) 演示了从 mysql 获取行和应用程序中的“排序”。并建摘录。

# javascript - 从 utf-timecode 转换时，Date.parse 发送三个额外的零

> ID：11067541
> 
> 赞同：1
> 
> 时间：2012-06-16T22:27:52.597
> 
> 标签：javascript

我有一个变量叫

```
posts_object[i].updated_time 
```

它始终是一个 utf 时间码。它似乎总是发送三个零太多。几个例子：

```
Unix            Date
1339705666000 · 2012-06-14T20:27:46+0000
1280403912000 · 2010-07-29T11:45:12+0000
1338635118000 · 2012-06-02T11:05:18+0000 
```

编码：

```
postobj.created=posts_object[i].updated_time.substring(0,10);
var sortvar= (posts_object[i].updated_time);
postobj.sort=Date.parse(sortvar); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T22:30:18.210

JavaScript 以毫秒为单位使用时间戳，而不是像“应该”那样使用整秒。由于一秒钟有 1000 毫秒，这可以解释三个额外的零。

# php - 仅当找不到会话变量时 PHP 才重定向多次重定向

> ID：11067551
> 
> 赞同：0
> 
> 时间：2012-06-16T22:30:32.070
> 
> 标签：php, session, redirect, header

我有几个域指向同一个 php 脚本。访问时，我想重定向用户做一个随机域，但只有一次。为此，我设置了一个会话变量、重定向并检查该变量。

我的代码是这样的：

```
    session_start();
    if($_SESSION['seen'] != 1) {
    $_SESSION['seen'] = 1;
    header("位置：".$randomurl);
}

```

因此，如果用户从未见过该页面，它应该只重定向 1 次，因为之后会话变量将包含 1 并且它不会重定向。

然而，这将我重定向了大约 5 次，直到它停在一个页面上，我无法解释为什么。

有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:31:56.987

尝试：

```
if(isset($_SESSION['seen']) && $_SESSION['seen']!= 1) {
....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T11:37:36.837

```
<?php

session_start();

if ( !isset( $_SESSION["valid_user"]) )

  { header("location:domain");
} 
```

# memory - 如何将整数传输到 __constant__ 设备内存？

> ID：11067552
> 
> 赞同：-1
> 
> 时间：2012-06-16T22:30:33.640
> 
> 标签：memory, cuda

我有一个奇怪的问题，所以我想我会问一下，看看是否有比我更有经验的人能找到解决方案。

我正在用 CUDA C/C++ 编写一个程序，我有一些常量整数来指定各种东西，比如计算边界的坐标等。目前我只有这些东西在全局设备内存中。它们被每个内核调用中的每个线程访问，所以我认为如果它们在全局内存中，那么它们永远不会被缓存或广播（对吗？）。所以这些小整数占用了很多（相对）开销，并且有很多“读取冗余”。

所以我在标题中声明：

```
__constant__ int* number; 
```

我包括那个标题，并且，当我做记忆的东西时，我会：

```
cutilSafeCall( cudaMemcpyToSymbol(number, &(some_host_int), sizeof(int) ); 
```

然后我传入`number`我所有的内核：

```
__global__ void magical_kernel(int* number, ...){

   //and I access 'number' like this
   int data_thingy = big_array[ *number ];

} 
```

我的代码崩溃了。有了全局内存中的数字，就可以了。我已经确定它在访问内核中的数字时会崩溃。这意味着我访问或分配错误。如果它持有错误的值，它也会导致崩溃，因为它是用来索引到数组中的。

最后，我会问几个问题。首先，我做错了什么？作为奖励：有没有比常量内存更好的方法来完成这个任务 - 我不知道`number`编译时的值，所以一个简单的 #define 不起作用。恒定内存是否会完全加快代码速度，或者它是否一直被缓存和广播？我能否以某种方式将每个线程块的数据放入共享内存中，并通过多个内核调用将其保留在共享内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:52:35.557

这里有几个问题：

1.  您已声明`number`为指针，但从未为其分配一个值，该值是 GPU 内存中的有效地址
2.  您有一个变量范围冲突：`int * number`定义的参数变量与定义为编译单元范围`magic_kernel` *的变量不同。*`__constant__ int * variable`
3.  调用的第一个参数`cudaMemcpyToSymbol`几乎可以肯定是不正确的。

如果您不明白为什么前两点中的任何一点都是正确的，那么您需要对 C++ 中的指针和范围进行一些修改。

根据您对现已删除的答案的回复，我怀疑您实际上想要做的是：

```
__constant__ int number;

__global__ void magical_kernel(...){

   int data_thingy = big_array[ number ];

}

cudaMemcpyToSymbol("number", &(some_host_int), sizeof(int)); 
```

ie`number`旨在成为常量内存中的整数，而不是指针，也不是内核参数。

* * *

编辑：这是一个例子，它显示了这一点：

```
#include <cstdio>

__constant__ int number;

__global__ void magical_kernel(int * out)
{
   out[threadIdx.x] = number;
}

int main()
{
    const int value = 314159;
    const size_t sz = size_t(32) * sizeof(int);
    cudaMemcpyToSymbol("number", &value, sizeof(int));

    int * _out, * out;

    out = (int *)malloc(sz);
    cudaMalloc((void **)&_out, sz);

    magical_kernel<<<1,32>>>(_out);

    cudaMemcpy(out, _out, sz, cudaMemcpyDeviceToHost);
    for(int i=0; i<32; i++)
        fprintf(stdout, "%d %d\n", i, out[i]);

    return 0;
} 
```

您应该能够自己运行它并确认它像宣传的那样工作。

# ios - 如何在 viewWillDisappear 上清除/清空粘贴板

> ID：11067554
> 
> 赞同：6
> 
> 时间：2012-06-16T22:30:55.200
> 
> 标签：ios, cocoa-touch, uitextview, uipasteboard

我用来`UIPasteboard`在两个`UITextView`.

代码如下所示：

```
- (void)viewDidLoad {
   [super viewDidLoad];
   pasteBoard = [UIPasteboard generalPasteboard]; //it is declared in .h as UIPasteboard *pasteBoard;
}

-(IBAction)doCopyBtn {
    if (![toCopyTextView.text isEqualToString:@""]){
        pasteBoard.string = toCopyTextView.text;
        NSLog(@"pasteb1 %@", pasteBoard.string);
    } else {
        NSLog (@"error! enter smth");
    }
}

-(IBAction)doPasteBtn {
    if (![pasteBoard.string isEqualToString:@""]){ 
        toPasteTextView.text = pasteBoard.string;
        NSLog(@"pasteb2 %@", pasteBoard.string);
    } else {
        NSLog (@"error! enter smth");
    }
} 
```

甚至这也无济于事（NSLog 返回`pasteb2 (null)`：）

```
-(void) viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
    [pasteBoard setString:@""]; 
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-26T15:53:02.930

# iOS –`UIPasteboard`

尝试以下操作：

```
 UIPasteboard *pb = [UIPasteboard generalPasteboard];
    [pb setValue:@"" forPasteboardType:UIPasteboardNameGeneral]; 
```

Arab_Geek 的回答是正确的，但可用于 Cocoa（我怀疑您正在寻找 iOS 解决方案）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T23:58:46.840

# 操作系统 -`NSPasteboard`

干得好 ..

```
NSPasteboard *pb = [NSPasteboard generalPasteboard];
[pb declareTypes: [NSArray arrayWithObject:NSStringPboardType] owner: self];
[pb setString: @"" forType: NSStringPboardType]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-27T16:39:33.130

将值设置为`""`将返回`nil`用于所有预期目的。但是，它会使粘贴板处于与粘贴操作之前略有不同的状态。

**迅速**

```
let pb = self.pasteBoard()
pb.setValue("", forPasteboardType: UIPasteboardNameGeneral) 
```

...不等于`UIPasteboard.removePasteboardWithName()`. 如果需要恢复`UIPasteboard`状态（1），您可以使用以下块：

**迅速**

```
let pb = self.pasteBoard()

let items:NSMutableArray = NSMutableArray(array: pb.items)
for object in pb.items {
    if let aDictionary = object as? NSDictionary {
        items.removeObject(aDictionary)
    }
}
pb.items = items as [AnyObject] 
```

*(1) 恢复状态。*

# wordpress - 用于edit.php自定义帖子列表的wordpress自定义过滤器

> ID：11067555
> 
> 赞同：0
> 
> 时间：2012-06-16T22:31:04.300
> 
> 标签：wordpress, filter, custom-post-type

我有一个自定义订单帖子，我希望在管理菜单中为列表视图（选择下拉菜单）实施一个额外的过滤器。

我已经搞砸了几个小时，但找不到解决方案。我希望通过几个元键和值过滤帖子，并且按发布日期这是我用于此问题的代码

```
add_filter( 'parse_query', 'order_posts_filter' );

function order_posts_filter( $query ){
    global $pagenow,$wpdb;
    $type = 'post';
    if (isset($_GET['post_type'])) {
        $type = $_GET['post_type'];
    }
    if ( 'orders' == $type && is_admin() && $pagenow=='edit.php' && isset($_GET['ADMIN_FILTER_FIELD_VALUE']) && $_GET['ADMIN_FILTER_FIELD_VALUE'] != '') {
        $query->query_vars['post_date'] = $_GET['ADMIN_FILTER_FIELD_VALUE'];
    }
    if ( 'orders' == $type && is_admin() && $pagenow=='edit.php' && isset($_GET['ADMIN_FILTER_STATUS_VALUE']) && $_GET['ADMIN_FILTER_STATUS_VALUE'] != '') {
        $query->query_vars['meta_key'] = 'order_status';
        $query->query_vars['meta_value'] = $_GET['ADMIN_FILTER_STATUS_VALUE'];
    }
    return $query;
} 
```

我在这里做错了什么？我的 $_GET 参数按预期工作，我正在从选择框中获取相关数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-23T07:10:52.480

我正在使用这个：

```
function wpse454363_posts_filter( $query ){
global $pagenow;
$type = 'post';
if (isset($_GET['post_type'])) {
    $type = $_GET['post_type'];
}
if ( 'product' == $type && is_admin() && $pagenow=='edit.php') {
    $meta_query = array(); // Declare meta query to fill after
    if (isset($_GET['post_date']) && $_GET['post_date'] != '') {
        // first meta key/value
        $meta_query[] = array (
            'key'      => 'post_date',
            'value'    => $_GET['post_date']
        );
    }
    if (isset($_GET['order_status']) && $_GET['order_status'] != '') {
        // second meta key/value
        $meta_query[] = array (
            'key'      => 'order_status',
            'value'    => $_GET['order_status']
        );
    }
    $query->query_vars['meta_query'] = $meta_query; // add meta queries to $query
}
}

add_filter( 'parse_query', 'wpse454363_posts_filter' ); 
```

# scala - 有没有办法在 Scala 的 Int 上使用 ++？

> ID：11067558
> 
> 赞同：2
> 
> 时间：2012-06-16T22:31:25.207
> 
> 标签：scala

> **可能重复：**
> [Scala 中的 ++ 运算符](https://stackoverflow.com/questions/3992399/operator-in-scala)

我想`Int`在scala中增加一个变量。但是，因为`Int`是不可变的，所以我必须这样做

```
var myInt: Int = 5
....
myInt = myInt + 1 
```

这似乎有点太复杂了。我想做的是

```
var myInt: Int = 5
....
myInt++ 
```

但是，由于 Int 是不可变的，我不能这样做。有什么解决办法吗？因为我不能成为第一个想要`++`在整数变量上使用的人......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T22:37:25.527

运算符不是 Scala的`++`语言结构，使用常规方法定义无法实现所需的行为。但是 Scala 至少提供了一些语法帮助，因为除非存在直接方法，否则调用`a += b`将自动扩展为。因此：`a = a + b``+=`

```
var myInt = 5
myInt += 1 
```

# android - 牺牲性能以换取移动平台的易于开发和可移植性值得吗？

> ID：11067561
> 
> 赞同：2
> 
> 时间：2012-06-16T22:32:05.030
> 
> 标签：android, ios

所以我一直在为 iPhone 开发一个中型企业应用程序，我可能需要移植到 Android 上。我使用原生 iOS SDK 编写了应用程序，完全不关心可移植性。我最初对不得不用 Java 重新编写整个应用程序并维护两个代码库感到畏缩，因此我研究了一些跨平台选项。

我在两个跨平台应用程序和一个使用原生 SDK 的应用程序中编写了一个简单的“hello world”，只是为了感受每个平台的性能和稳定性。这绝不是一个完全详尽的实验，只是快速而肮脏的测试。我惊讶地发现 PhoneGap 和 Appcelerator 的 Titanium 有一个非常明显的启动时间，只是为了显示“hello world”。此外，如果我关闭应用程序然后快速连续重新打开它（30-40 快速迭代），PhoneGap 和 Titanium 都会崩溃。另一方面，本机应用程序从未出现任何问题。

最初，我认为我可以忍受较慢的启动时间，因为承诺一个代码库可以统治所有这些。然后我遇到了以下潜在的障碍：

1.  调试支持似乎有限。

    根据 phone gap [wiki](http://wiki.phonegap.com/w/page/16494768/Debugging%20PhoneGap%20Apps)，建议您在桌面上调试 (1) (2) 使用远程 Web 检查器 (3) printf 调试 [你在开玩笑吗？] 或 (4) 使用[weinre](http://debug.phonegap.com/)

    Titanium 的调试稍好一些，但仍然缺乏设备调试支持。有一个开放的设备调试[请求](https://jira.appcelerator.org/browse/TISTUD-501?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)已有一年之久，因此将来可能会得到修复。

    对于只有少数开发人员的小型项目，调试可能不是问题，但随着项目变得越来越大并且越来越多的开发人员在相同的代码库上工作，它很快变得非常重要。

2.  您仍然需要为每台设备调整 UI。

    对于某些人来说，这可能会或可能不会担心，但我希望我们的应用程序看起来像原生应用程序并遵循每个平台的人机界面指南。所以我仍然会在 UI 层有重复的代码。

在这一点上，鉴于我必须为每个设备拥有单独的 UI 代码，并且设备上的调试选项不如原生应用程序丰富，我看不到跨平台开发框架会带来的节省。我认为最好的方法是用 C 重写我的模型，然后我可以在 Android（使用 NDK）和 iOS 之间共享该代码，每个设备都有自己的本机 UI。

所以我的问题是，有人对跨平台移动框架有什么经验吗？我对有限调试和重复 UI 代码的担忧是没有根据的吗？请记住，我想要一个看起来像每个平台的本机应用程序的应用程序。

对于那些使用过跨平台框架的人来说，这个项目有多大？你遇到了什么问题？你会再次使用这个框架吗？

-谢恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:43:00.910

我已经使用了相当多的 appcelerators 钛。我的总体感觉是 IOS 部分非常好，但 android 仍然缺乏，特别是在错误消息中，调试还不错，您只需添加一些打印输出，但问题是 99% android上的错误将类似于app crashed with nullPointerException，没有任何提示，因为它来自底层java，至少可以说很棘手。

但是我会说 UI 的东西不是问题，钛控制自动将应用程序缩放到不同的设备屏幕（当打开设置时 - 应该查看 1.7 中的这个）。所以通常你会遇到的唯一问题是设备特定的东西，比如在 IOS 中有一个正确的导航按钮，没有 android 等价物，所以你必须为此编写一些特殊的代码，考虑到有 2 个不同的平台，这是可以理解的。

鉴于 IOS 已经完全开发，我不确定我会做什么，人们通常会这样做以避免两个平台的学习曲线并节省时间以保持相同的代码库，不确定你会从中获得多少好处这个的。Appcelerator 很好，但控件有错误，它会更慢，学习需要时间，但它确实有好处。

我个人不会使用 phonegap，因为我不喜欢它基本上是一个 webview 包装器的想法，而且我在桌面上遇到了足够多的基于浏览器的问题，足以让我终生受益。

# powershell - Powershell 获取特定进程计数器，id 为进程

> ID：11067565
> 
> 赞同：5
> 
> 时间：2012-06-16T22:32:39.263
> 
> 标签：powershell, process, counter

我想为我拥有进程 ID 的进程获取特定的计数器。但是我想不出一种方法来使用 where-object 来匹配计数器的过程。像

```
Where Gc '\process(*)\id process -eq 456 gc '\process($name)\working set' 
```

因此，使用进程 ID 来检索名称并获取工作集（或类似的东西）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-21T01:44:02.087

为具有相同进程名称的多个实例的进程获取正确的性能计数器路径似乎有点令人费解：

```
$proc_id=6580
$proc_path=((Get-Counter "\Process(*)\ID Process").CounterSamples | ? {$_.RawValue -eq $proc_id}).Path
Get-Counter ($proc_path -replace "\\id process$","\% Processor Time")

Timestamp                 CounterSamples
---------                 --------------
11/20/2014 5:39:15 PM     \\myhost\process(conhost#2)\% processor time :
                          0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-17T07:37:41.087

您可以获取进程名称的计数器，因此首先使用其 Id 获取进程名称，然后将进程名称嵌入计数器中。例如：

```
$id = # your process id
$proc = (Get-Process -Id $id).Name
Get-Counter -Counter "\Process($proc)\% Processor Time" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-29T11:18:29.587

如果您想要一个还包括具有多个实例 ID 的进程的解决方案，您可以使用：

```
$p = $((Get-Counter '\Process(*)\ID Process' -ErrorAction SilentlyContinue).CounterSamples | % {[regex]$a = "^.*\($([regex]::Escape($_.InstanceName))(.*)\).*$";[PSCustomObject]@{InstanceName=$_.InstanceName;PID=$_.CookedValue;InstanceId=$a.Matches($($_.Path)).groups[1].value}})
# In french, use '\processus(*)\id de processus' for the counter name
$id = # your process id
$p1 = $p | where {$_.PID -eq $id}
Get-Counter -Counter "\Process($($p1.InstanceName+$p1.InstanceId))\% Processor Time"
# In french, use "\Processus($($p1.InstanceName+$p1.InstanceId))\% temps processeur" for the counter name 
```

或者，如果您避免使用 Get-Counter 并等待采样间隔，请尝试使用 WMI：

```
$id = YourProcessIdHere
(gwmi -class Win32_PerfRawData_PerfProc_Process -Namespace "root\CIMV2" | ? {$_.IdProcess -eq $id}).Name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T05:12:07.793

可以使用 Get-Process commandlet 直接获取*一些性能信息，而无需解析实例 ID。*

对于内存工作集的情况，只需过滤您想要使用的进程 id 的输出`where-object`，然后选择您感兴趣的参数：

```
get-process | where-object{ $_.id -eq 456 } | select name,workingset 
```

# javascript - 使用 Youtube API 使用 JavaScript 中的正则表达式从 Youtube 评论中获取时间戳 (hh:mm:ss)

> ID：11067572
> 
> 赞同：5
> 
> 时间：2012-06-16T22:33:13.693
> 
> 标签：javascript, regex, youtube-api

我正在分析带有时间戳的 YouTube 评论。因为有些注释可能会引用 mm:ss、m:ss、hh:mm:ss 或 h:mm:ss 中的句点，所以我需要为这些情况做好准备。以下代码适用于 mm:ss 和 m:ss，但仍将带有小时数的代码视为 mm:ss。例如，02:24:30 返回 144，因为它只分析前两个部分。这是代码：

```
var timePattern = /(([0-5][0-9])|[0-9])\:[0-9]{2,2}/;
var seconds = "";

for (var i = 0; i < comments.length; i++) {
    var matches = comments[i].match(timePattern);
    var matched = matches[0];
    var a = matched.split(':');
    if(matched.length == 7 || matched.length == 8) {
        seconds = (+a[0])*60*60 + (+a[1])*60 + a[2];        
    } else {
        seconds = (+a[0])*60 + (+a[1]); 
    }
    times.push(seconds);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T22:42:11.717

尝试不同的正则表达式。

```
(?:([0-5]?[0-9]):)?([0-5]?[0-9]):([0-5][0-9]) 
```

第一个包含小时，第二个包含分钟，最后一个包含秒。

如果没有找到小时数，小时数将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:48:42.033

如果您使用 API，您还可以在评论提要中获取此信息：[https ://developers.google.com/youtube/2.0/developers_guide_protocol#Comments](https://developers.google.com/youtube/2.0/developers_guide_protocol#Comments)

评论提要有一个`published`元素，其中包含可用于解析秒数的日期和时间信息。

# ruby-on-rails - MiniTest 中的方法期望

> ID：11067573
> 
> 赞同：3
> 
> 时间：2012-06-16T22:34:02.690
> 
> 标签：ruby-on-rails, ruby, minitest

我正在尝试为 ActiveRecord 编写测试——Rails 使用 MiniTest 进行测试，所以我没有选择测试框架。我要测试的条件是这样的（来自 db:create rake 任务，为了本示例的目的，拉入了一个方法）：

```
def create_db
  if File.exist?(config['database'])
    $stderr.puts "#{config['database']} already exists"
  end
end 
```

因此，我想测试 $stderr 如果文件存在则接收放置，否则不接收。在 RSpec 中，我会这样做：

```
File.stub :exist? => true

$stderr.should_receive(:puts).with("my-db already exists")

create_db 
```

MiniTest 中的等价物是什么？assert_send 似乎没有像我预期的那样表现（并且实际上并没有任何文档 - 它应该在执行之前进行，如 should_receive，还是之后？）。我在想我可以在测试期间用模拟临时设置 $stderr，但 $stderr 只接受响应写入的对象。你不能在模拟上存根方法，我不想在我的 stderr 模拟上设置 write 方法的期望——这意味着我正在测试一个我正在模拟的对象。

我觉得我在这里没有以正确的方式使用 MiniTest，所以一些指导将不胜感激。

更新：这是一个可行的解决方案，但它*设置*了对 :write 的期望，这是不对的。

```
def test_db_create_when_file_exists
  error_io = MiniTest::Mock.new
  error_io.expect(:write, true)
  error_io.expect(:puts, nil, ["#{@database} already exists"])
  File.stubs(:exist?).returns(true)

  original_error_io, $stderr = $stderr, error_io

  ActiveRecord::Tasks::DatabaseTasks.create @configuration

ensure
  $stderr = original_error_io unless original_error_io.nil?
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:27:06.933

因此，Rails 将 Mocha 与 Minitest 结合使用，这意味着我们可以利用 Mocha 更好的消息期望。工作测试如下所示：

```
def test_db_create_when_file_exists
  File.stubs(:exist?).returns(true)

  $stderr.expects(:puts).with("#{@database} already exists")

  ActiveRecord::Tasks::DatabaseTasks.create @configuration
end 
```

# c++ - C ++：如何根据类型不同地处理源自 std:exception 的异常？

> ID：11067574
> 
> 赞同：1
> 
> 时间：2012-06-16T22:34:03.660
> 
> 标签：c++, exception-handling, derived-class

我想创建一个异常层次结构。我使用了 C++ 成语“多态异常”。

困难的一点是我希望这些类从 std::exception 派生 - 能够使用 try ... catch(exception &e) 在代码的任何点捕获任何异常。

但是，无论异常来自 std::exception 还是来自我的用户定义的异常，我都想以不同的方式处理异常。

这建议使用多态性，但是我无法在 std::exception 上定义虚函数。

我也尝试过使用函数模板（参见下面的代码），但它不起作用，因为调用的模板函数是在编译时确定的。

```
#include <iostream>
#include <string>
using namespace std;

#include <boost\type_traits\is_base_of.hpp>
#include <boost\utility\enable_if.hpp>

class BaseError :public exception {
  public:
    virtual void raise(){throw *this;}
    virtual string msg (){ return "This is the base class"; }
  };

class DerivedError: public BaseError {
  public:
    void raise(){throw *this;}
    string msg (){ return "This is the derived class"; }
  };

template <typename T>
typename boost::disable_if<boost::is_base_of<BaseError, T>>::type
handleException(T &e)
{
    cout << "Handling generic exception" << endl;
    cout << e.what() << endl;
}
template <typename T>
typename boost::enable_if<boost::is_base_of<BaseError, T>>::type
handleException(T &e)
{
    cout << "Handling specific exception" << endl;
    cout << e.msg() << endl;
}

int main () {
  BaseError b;
  handleException(b);
  // prints "Handling specific exception"
  // prints "This is the base class"
  try{
      throw exception("Exception !!!");
  }
  catch (exception &e){
      handleException(e);
      // prints "Handling generic exception"
      // prints "Exception !!!"
  }
  try{
      BaseError b;
      b.raise();
  }
  catch (exception &e){
      handleException(e);
      // prints "Handling generic exception" - I would like the specific behaviour
      // prints "Unknown exception"
  }
  try{
      DerivedError d;
      d.raise();
  }
  catch (exception &e)
  {
      handleException(e);
      // prints "Handling generic exception" - I would like the specific behaviour
      // prints "Unknown exception"
  }
  return 0;
} 
```

知道如何实现这一目标吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:38:23.277

您可以在任何时候重新抛出异常，如果它发生在 catch 之间，它将被定义。例如：

```
try
{
    // something that throws an exception
} catch(std::exception& e) {
    try
    {
        throw; // rethrows the original exception
    } catch(std::runtime_error& e) {
        // handle runtime error
    } catch(std::exception& e) {
        // handle everything else
    }
} 
```

现在嵌套`try-catch`块可以在任何地方，它可以是一个函数，甚至是一个对象析构函数。您可以组合一组处理特定异常的对象，将它们链接在一起并`throw;`在链的末端调用。伪代码：

```
template< typename E, typename Base = void >
struct exception_handler : Base
{
    void handle() const
    {
        try
        {
            Base::handle();
        } catch( E& e ) {
            // do something
        }
    }
};

template< typename E >
struct exception_handler< E, void >
{
    void handle() const
    {
        try
        {
            throw;
        } catch( E& e ) {
            // do something
        }
    }
}; 
```

那么上面的例子可以这样解释：

```
try
{
    // something that throws an exception
} catch(std::exception& e) {
    exception_handler<
        std::exception
      , exception_handler<
            std::runtime_error
        >
    > handler;
    handler.handle();
} 
```

可以使用继承和常规类手动创建相同的层次结构，您可以在其中定义每个异常*级别*以及如何处理它们。

```
struct runtime_error_handler : base_handler
{
    void handle() const
    {
        try
        {
            throw;
        } catch( std::runtime_error& e ) {
            // if the original exception was a runtime_error it will be caught here
            // otherwise it will be propagated up the stack to exception_handler

            // do something if runtime_error
        }
    }
};

struct exception_handler : runtime_error_handler
{
    void handle() const
    {
        try
        {
            runtime_error_handler::handle();
        } catch(std::exception& e) {
            // do something else in the general case
        }
    }
}; 
```

# css - 如何将居中的文本和固定的图像放在一起？

> ID：11067578
> 
> 赞同：2
> 
> 时间：2012-06-16T22:34:26.680
> 
> 标签：css

我有一个只有 500x250 文本框和图像的白页。页面流畅。

我试图将文本框置于页面中心，同时将图片固定在屏幕的左下角。我通过以下 css 部分实现了这一点：

```
.bottom-right { /* used to fix the image to the bottom of the screen */
    bottom: 0;
    right: 0;
    position: fixed;
}

#content {
    margin-left: auto;
    margin-right: auto;
    margin-top: 50%;
    width: 500px;
    height: 250px;
    position: relative;
} 
```

当我垂直调整窗口大小时，图像会覆盖文本框。相反，我希望文本上升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:49:29.607

如果我正确理解了您的问题，您需要始终在右下角固定的图像上方放置“文本框”。

请参阅此[工作小提琴](http://jsfiddle.net/zuul/zDtm9/)示例！

**CSS**

```
#content {
    width: 500px;
    height: 250px;
    position: absolute;          /* this is the key */
    z-index: 1;                  /* this is the key */
    left: 50%;
    top: 50%;
    margin: -125px 0 0 -250px;
} 
```

* * *

*   CSS[`position:absolute;`](http://www.w3.org/wiki/CSS/Properties/position)

    这样做是将元素放置在`#content`正常文档流之外，因此不受其他元素的影响或影响后续兄弟元素的布局。

*   CSS[`z-index:1;`](http://www.w3.org/wiki/CSS/Properties/z-index)

    这样做是将元素在文档堆栈上向上移动，从而将其放置在具有较低值的其他元素之上（默认堆栈级别为 0）。

有关详细信息，请参阅[CSS 绝对定位和固定定位 - W3C Wiki](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:47:30.343

我能想到的两个选择：

1.  使用 CSS 媒体查询，如果视口小于某个高度，则更改文本框的高度或位置，以使图像不会覆盖它。
2.  `min-height`在父级周围设置一个`div`，一旦它小于某个高度，就显示一个垂直滚动条。

# java - Java中的等式重排

> ID：11067579
> 
> 赞同：3
> 
> 时间：2012-06-16T22:34:35.763
> 
> 标签：java, equation, solver

是否有任何java库可以重新排列方程如下：

```
Input equation: x = y * 2
What I need from lib: Rearrange so that y becomes subject
Output string: y = x / 2 
```

我搜索了很多，但我发现的大多数库只能求解方程（通过找到满足方程的值）但不能重新排列。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:37:00.737

你想要的是符号代数：

[http://krum.rz.uni-mannheim.de/jas/](http://krum.rz.uni-mannheim.de/jas/)

你的例子是一个*非常*简单的例子。更复杂的方程将更具挑战性。

# salesforce - 顶点调度程序 - 如果场景怎么办？

> ID：11067581
> 
> 赞同：0
> 
> 时间：2012-06-16T22:35:02.207
> 
> 标签：salesforce, apex-code, scheduler

我正在研究使用 apex 调度程序来运行批处理作业。我们可以随时运行它，比如凌晨 3 点，当流量很低时，但我试图预测一些“哦，废话”的场景。你们能帮我回答这些问题吗？

**设置：**

当用户修改一个区域时，可以更新 100k 的记录。

**问题：**

1.  有哪些实际情况会导致我的工作无法终止？我想到了一个场景——当用户正在编辑一个恰好在其中一个批次中的联系人正在运行时。

2.  处理不会终止的工作有哪些好的做法？我正在考虑在此之后 2 小时安排另一个批处理作业，但我看不到我的老板喜欢这样。我想过也许在 finish() 方法中做点什么——但不知道具体是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:13:49.380

1.  批次中的任何错误都将阻止该批次正确完成。
2.  我建议您进行某种检查以了解您处理了所有内容。我通常用于批次的是以某种方式标记需要处理的记录，以将它们与不需要处理的记录区分开来。当我完成处理一个批次时，我将记录标记为已处理。然后，您可以检查 finish() 方法是否仍有任何记录需要处理并重新安排批处理以再次运行。

# python - 网页找不到样式表

> ID：11067586
> 
> 赞同：-1
> 
> 时间：2012-06-16T22:36:05.983
> 
> 标签：python, html, css, django

出于某种原因，我的 html 页面没有找到我的样式表。如果有帮助的话，我正在使用 Django 框架。我目前正在本地主机上运行它。

html:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

 <link rel="stylesheet" href="../fitness/templates/masterpage.css"  type="text/css">

</head>
<body>
<h1> MasterPage</h1>

{% block content %} {% endblock %} 
</body>
</html> 
```

母版页.css

```
h1 {
color: #fff;

} 
```

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:44:02.177

对于提供静态文件，如 CSS，django 有 staticfiles 库：

[https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/) - 开发版本 [https://docs.djangoproject.com/en/1.4/howto/static-files/](https://docs.djangoproject.com/en/1.4/howto/static-files/) - Django 1.4
[https:// docs.djangoproject.com/en/1.3/howto/static-files/](https://docs.djangoproject.com/en/1.3/howto/static-files/) - Django 1.3

请注意，这需要最新版本的 Django，因为它是最近添加的

我的猜测是 CSS 的 URL 与 urls.py 中的任何模式都不匹配，因此返回错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:57:10.260

根据 css 链接，您的路径可能是：

> [同根]/fitness/templates
> 
> [same root]/[maybe else?]/current（具有显示 html 的那个）

看到您对克里斯的评论（回答），我建议您将 css 链接更改为：

> /fitness/templates/masterpage.css

并确保你在对应的物理路径下有masterpage.css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:44:40.203

此处的简短答案：在您的 settings.py 中，确保为 STATIC_DIRS 设置了一个文件夹，即 STATIC_URL（通常只是“/static/”）。设置 myproject/static/ 的 STATIC_ROOT 设置。将此文件夹留空。在 STATIC_DIRS 下添加一个文件夹，命名为 myprojet/assets/。然后在 assets/ 中有 css、img 和 js。现在，您可以通过此位置访问这些组织文件夹中的所有资产，无论其位于哪个文件夹。 {{ STATIC_URL }}/main.css {{ STATIC_URL }}/banner.png 作为最后的手段，运行 python manage.py collectstatic at你的 shell，并确保在你的 settings.py 中你有取消注释 Django 的静态文件处理程序。（默认情况下它们是未注释的。）

Django 最佳实践长答案继续阅读（以我有限的经验）。

由于他们引入了 STATIC_DIRS { } 设置，我一直将 myproject/static/ 目录留空。（在部署期间，有必要在您的服务器上运行 python manage.py collectstatic 命令以收集站点包中的所有管理文件以及您的静态服务器将提供的其他内容。因此，将其留空，以免发生混乱稍后在那里。为您的“资产”使用不同的文件夹。）

我有一个名为 src 的目录，许多人在项目级别也将其称为媒体。带有 manage.py 的 Django 1.4 项目级别而不是您的 settings.py。我将 myproject/src/ 添加到 STATIC_DIRS 设置中。它是一个应该包含字符串的元组。在 src/ 目录中，我有 js、img、css。您可能决定创建的所有 STATIC_DIRS 最酷的事情是它们都可以通过以下方式访问

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/main.css" /> 
```

注意：即使您的 css 文件目录结构可能是多个嵌套文件夹，或者在本例中为 myproject/src/css/main.css ，您也可以这样做。Django 不关心你的目录结构。一般来说，Django 与其元素的耦合非常松散。例如，很容易插入您选择的另一种 Pythonic 模板语言。就像设置 STATIC_URL 和 STATIC_DIRS 很容易一样，Django 知道在哪里查找，它从 /static/ 为它们提供服务。

# php - DOM replaceChild 没有替换所有指定的元素

> ID：11067587
> 
> 赞同：5
> 
> 时间：2012-06-16T22:36:27.617
> 
> 标签：php, domdocument

考虑以下代码：

```
$xml = <<<XML
<root>
<region id='thisRegion'></region>
<region id='thatRegion'></region>
</root>
XML; 
```

* * *

```
$partials['thisRegion'] = "<p>Here's this region</p>";
$partials['thatRegion'] = "<p>Here's that region</p>";
$DOM = new DOMDocument;
$DOM->loadXML($xml);

$regions = $DOM->getElementsByTagname('region');

foreach( $regions as $region )
{
    $id = $region->getAttribute('id');
    $partial = $DOM->createDocumentFragment();
    $partial->appendXML( $partials[$id] );
    $region->parentNode->replaceChild($partial, $region);

}

echo $DOM->saveXML(); 
```

输出是：

```
<root>
<p>Here's this region</p>
<region id="thatRegion"/>
</root> 
```

我一生都无法弄清楚为什么所有区域标签都没有被替换。这是我的项目中的一个问题，起初我认为它没有替换我在 loadXML 之后附加的元素，但是通过一些实验我无法缩小这里的模式。

我将不胜感激代码更正，以允许我用给定的元素节点替换 DOMDocument 中的所有标签。如果我还没有找到它，我也不介意对更有效/更实用的方法进行任何输入。

提前致谢！

[编辑] PHP 5.3.13

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T23:05:59.630

NodeLists 是实时的。因此，当您删除文档内的项目时，NodeList 也将被修改。避免使用对 NodeList 的引用并从最后一项开始替换：

```
$DOM = new DOMDocument;
$DOM->loadXML($xml);
$regions = $DOM->getElementsByTagname('region');

$regionsCount = $DOM->getElementsByTagName('region')->length;
for($i= $regionsCount;$i>0;--$i)
{   
    $region=$DOM->getElementsByTagName('region')->item($i-1);
    $id = $region->getAttribute('id');
    $partial = $DOM->createDocumentFragment();
    $partial->appendXML( $partials[$id] );
    $region->parentNode->replaceChild($partial, $region);
}

echo $DOM->saveXML();
?> 
```

[**http://codepad.org/gTjYC4hr**](http://codepad.org/gTjYC4hr)

# c++ - 如何写入/管道到由 V4L2loopback 模块创建的虚拟网络摄像头？

> ID：11067588
> 
> 赞同：10
> 
> 时间：2012-06-16T22:36:28.287
> 
> 标签：c++, linux, opencv, v4l2, v4l2loopback

我编写了一个应用程序，它从网络摄像头读取并在 Linux 上使用 OpenCV 处理帧。现在我想将我的应用程序的输出通过管道传输到由 V4L2loopback 模块创建的虚拟网络摄像头，以便其他应用程序能够读取它。我已经使用 C 编写了应用程序。我不知道该怎么做。你能给我一些提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T20:54:52.177

我在 Google 代码的旧 V4L2loopback 模块页面中找到了答案。

[http://code.google.com/p/v4l2loopback/source/browse/test.c](http://code.google.com/p/v4l2loopback/source/browse/test.c)

较新的链接：[https ://github.com/umlaeute/v4l2loopback/blob/master/examples/test.c](https://github.com/umlaeute/v4l2loopback/blob/master/examples/test.c)

到目前为止，这已经帮助我写入设备。

# spring - 在 Spring 3.1 中围绕数据存储库动态创建通用服务

> ID：11067592
> 
> 赞同：0
> 
> 时间：2012-06-16T22:37:19.167
> 
> 标签：spring

我已经或多或少地了解了 Spring 的基础知识（我认为），并且我正在尝试新事物。目前，如果该服务只是要扩展通用服务类，我正在尝试找出一种方法，不要为每个实体/存储库显式编写服务类。

我想做的是，在加载实体和存储库 bean 后，循环遍历它们，检查是否存在名为 [Model Name]Service 的 bean，如果不存在，则创建一个新实例我的通用服务类，传入Repository对象，然后在applicationContext中注册这个服务。

这可能吗？如果可以，最好的方法是什么？我一直在试图找出 PostProcessor，但我认为实际工作的那个（BeanPostProcessor）似乎不适合这样做。

谢谢你的时间

# asp.net-mvc-3 - 如何在视图中将数组模型属性显示为列表？

> ID：11067602
> 
> 赞同：2
> 
> 时间：2012-06-16T22:38:43.380
> 
> 标签：asp.net-mvc-3

我的模型中有这个数组属性，并希望在我的视图中看到它作为下拉列表。这是数组属性：

```
public string[] weekDays = new string[5] { "monday", "Tuesday", "Wednesday", "Thursday", "Friday" };

public string[] WeekDays
{
    get { return weekDays; }
} 
```

我找了几个小时没有简单的解释或例子。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T23:00:06.513

您可以使用[DropDownList()](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions.dropdownlist.aspx) html 助手。

```
Html.DropDownList("weekDays",
                  Model.WeekDays.Select(s => new SelectListItem { Text = s })) 
```

如果要读取选定的值，可以使用[DropDownListFor()](http://msdn.microsoft.com/en-us/library/ee834953)助手。

```
Html.DropDownListFor(model => model.SelectedWeekDay, //a property to assign the value
                              Model.WeekDays.Select(s => new SelectListItem { Text = s, Value = s })) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T03:30:42.427

这是我解决它的方法。

```
@{
    var wekdys = new Enrollment();
    @Html.DropDownList("weekDays", wekdys.WeekDays.Select(s => new SelectListItem { Text = s.ToString(), Value = s.ToString() }))
} 
```

这允许我在 foreach 循环之外有一个 DropDownList

# java - 在 Android 中使用 if/else 之间的变量

> ID：11067609
> 
> 赞同：1
> 
> 时间：2012-06-16T22:42:05.710
> 
> 标签：java, android

我正在开发一个小应用程序，同时学习 Android。

该应用程序基本上是在进行一系列简单的数学计算。一个按钮正在调用进行计算的函数。一切正常，直到我插入了一个 if/else 构造。

在这个结构中，我使用之前创建的变量，进行计算和设置其他变量

```
if (TS>Ex) {
    Double AE = 0.00;
} else {
    Double AE = (Ex-TS);
};

Double TBTAT = (TS-Ex);
Double Exx = 2864.17;   
if (TBTAT>Exx) {
    Double TAT = (Exx*0.2);
} else {
    Double TAT = (TBTAT*0.2);
}; 
```

我有两个 if/else 结构。

然后收集所有内容并发送到文本

```
IT_ResultTXT.setText(Double.toString(AE+TAT+TAF)); 
```

在正常情况下，AE、TAT、TAF 在代码的最后一行中变成“无法解析为变量”，但如果我在函数开头声明它们，则会出现重复变量的错误。

我想这是一个非常愚蠢的基本 Java 编程错误，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T22:46:07.190

您必须在开头（或封闭范围内的其他地方）声明一次：

```
Double AE;

if (TS > Ex) {
    AE = 0.00;
} else {
    AE = (Ex - TS);
};

Double TBTAT = (TS - Ex);
Double Exx = 2864.17;    

Double TAT;

if (TBTAT > Exx) {
    TAT = (Exx * 0.2);
} else {
    TAT = (TBTAT * 0.2);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:36:11.460

AE、TAT、TAF 的范围是`only within the if/else statement block`，并且是`not visible outside`。

最好将其声明为存在这些 if/else 语句的方法的局部变量或作为类实例变量

```
As local varibles:

    public void go() {

    Double AE = 0.00;
    Double TBTAT = (TS-Ex);
    Double Exx = 2864.17;  

    if(condition){

      }

   else{

      }

}

   As Class scope:

             public class A {

               Double AE = 0.00;
               Double TBTAT = (TS-Ex);
               Double Exx = 2864.17; 

            public void go(){

                if (condition){

              }
                else{

                }

              }

         } 
```

# ios - 生物动画

> ID：11067614
> 
> 赞同：-1
> 
> 时间：2012-06-16T22:42:33.567
> 
> 标签：ios, animation, 2d

我正在研究制作一个有小生物的 iOS 应用程序。我计划让这些生物根据用户交互成长和改变形状。因此，根据用户的操作，这些生物最终可能看起来非常不同。

我的问题是动画这些生物。过去我用 cocos2d 处理过简单的动画，但没有这样的。

我如何在不让我的平面设计师绘制所有可能使用的图像的情况下为这些不同大小和形状的生物制作动画。在游戏孢子中，用户可以创建他们想要的任何形状或大小的动物，并且这些动物会动画。我的问题是如何在 2d 中做类似的事情？我知道这不是一个简单的答案，但我正在寻找一个正确方向的点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:15:51.880

您可以使用一些`CGAffineTransforms`来缩放您的绘图和使用 Core Image 的自定义过滤器可能会更改颜色。

# html - 在 Rails 中根据 HTML 类名销毁数据

> ID：11067615
> 
> 赞同：0
> 
> 时间：2012-06-16T22:42:36.847
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails (3.2.5) 构建一个简单的待办事项列表。

我在一个无序列表中显示所有用户的待办事项，每个列表项都是待办事项本身。通过单击待办事项，用户将其标记为已完成。使用 jQuery 我给 li 一个 done 类，这样我就可以改变它的样式。通过单击“清除已完成”按钮，我希望销毁已完成的项目（并从数据库中删除）。

如何才能做到这一点？

注意：我基本上是在尝试使用 Rails 重新创建这个应用程序：http: [//davidpdrsn.com/todos/](http://davidpdrsn.com/todos/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:49:40.433

假设调用了模型并且调用`Todo`了完成的列`completed`，您可以在控制器中编写其中之一：

```
Todo.destroy_all(:completed => true)
Todo.where(:completed => true).destroy_all 
```

如果您需要有关如何管理 ajax 请求/响应的帮助，[这里](http://ruby.railstutorial.org/chapters/following-users#sec%3aa_working_follow_button_with_ajax)有一个好的开始（对不起，我不想给您解决方案，恕我直言，您应该自己解决）

资源：[ActiveRecord#Base::destroy_all](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-destroy_all)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:51:50.230

你可以使用远程表单来做到这一点所以你会有类似的东西

您将有一个包含`remote: true`每个项目的表单，或者您可以只有一个表单并使用 JQuery 提交。

```
class TodoController
  def set_completed
    @todo = Todo.find(params[:id])
    @todo.done = true  # you could move this to your model and do something like @todo.done! and that would save it automatically
    @todo.save
  end

  def  destroy_completed 
    @todos_to_delete = Todo.where(done: true)# here you could also move it to your model and do it like Todo.completed
    @todos_to_delete.destroy_all
  end
end 
```

并且您将使用 js 呈现响应以进行格式化，甚至删除列表中的项目，例如

意见/待办事项/set_completed.erb.js

```
$("#item_<%= @todo.id %>").addClass("completed"); 
```

# http - HTTP 持久连接与无状态 Web

> ID：11067617
> 
> 赞同：0
> 
> 时间：2012-06-16T22:43:07.317
> 
> 标签：http, sockets, stateless

如果 HTTP 持久连接保持活动状态并在同一个套接字上完成，而没有丢弃套接字或为下一个 HTTP 连接创建新的。那么，为什么 HTTP 是无状态的，并且每个 HTTP 请求在共享同一个套接字时都是独立的？

如果我的假设是错误的，请纠正我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:46:13.337

HTTP 被认为是无状态的，因为浏览器会在 HTTP 请求标头中发送服务器使用的所有信息（cookies、referrer 等）。

虽然可能涉及存储状态的数据库，但 HTTP 是无状态的，因为它不存储任何内容。即使套接字保持打开状态，只要它不存储任何内容，它仍然被认为是无状态的。

# r - 如何从 R 中的 csv 表中读取数据？

> ID：11067623
> 
> 赞同：3
> 
> 时间：2012-06-16T22:44:20.117
> 
> 标签：r, quantmod

我有一个 csv 文件，我想将每一列 a 提取为字符串，以便我可以将它与包中的`getSymbols`函数一起使用`quantmod`。

csv 文件如下所示：

```
AEGR,Aegerion Pharmaceuticals Inc
AKS,AK Steel Holding Corp
ALXA‎,Alexza Pharmaceuticals Inc
CCL‎,Carnival Corporation
CECO‎,Career Education Corp
CDXS‎,Codexis Inc 
```

我使用这段代码来读取文件：

```
data<-read.csv(file='CAPM/allquotes.csv',header=F)
symbols=gettext(data[,1])
symbol.names=gettext(data[,2])
getSymbols(symbols) 
```

我收到此错误：

```
Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  : cannot open URL 'http://chart.yahoo.com/table.csv?s=ALXA‎&amp;a=0&b=01&c=2007&d=5&e=16&f=2012&g=d&q=q&y=0&z=ALXA‎&amp;x=.csv'
In addition: Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  : cannot open: HTTP status was '404 Not Found' 
```

当我一一输入符号时，它工作正常。我还注意到，当我走到最后一行的末尾时，边距似乎已损坏。在图像中，您可以看到“符号”的值，行尾的右侧比应有的多几个空格（由于初始括号的颜色，您可以看到这一点）。

![符号对象](../Images/4b2451e5166a99459c8473a3f070c7f4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T23:33:12.567

您的 csv 中有隐藏的字符 - 即从左到右的标记。由于您使用的是 RStudio，因此您可以`gsub`使用“\016”作为`pattern`参数的值来删除它。或者，您可以只保留您知道自己想要的字符，而不是删除您不想要的隐藏字符。例如，如果您的符号只有字母和/或数字，您可以使用类似`gsub("[^A-Za-z0-9]", "", data[, 1])`

```
data <- read.csv(text="AEGR,Aegerion Pharmaceuticals Inc
AKS,AK Steel Holding Corp
ALXA‎,Alexza Pharmaceuticals Inc
CCL‎,Carnival Corporation
CECO‎,Career Education Corp
CDXS‎,Codexis Inc", header=FALSE)
#data[, 1] <- gsub("\016", "", data[, 1]) #this should work in RStudio
data[, 1] <- gsub("[^A-Za-z0-9]", "", data[, 1]) #but this should work anywhere
symbols=gettext(data[,1])
getSymbols(symbols, src='yahoo') 
```

在您之后`read.csv`，您可以检查`data`对象以查看是否有问题。

```
s <- as.character(data[, 1])
str(s)
#chr [1:6] "AEGR" "AKS" "ALXA""| __truncated__ "CCL""| __truncated__ "CECO""| __truncated__ "CDXS""| __truncated__
str(s[3])
#chr "ALXA""| __truncated__

charToRaw(s[3])
#[1] 41 4c 58 41 e2 80 8e
# Compare what we have to what we think we have
charToRaw("ALXA")
#[1] 41 4c 58 41 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T00:21:33.450

我正在使用使用 quantmod 的 Systematic Investor Toolbox。感谢 GSee，解决方案是这样的：

```
source('SystematicInvestorToolbox.r')
load.packages('quantmod')
dates='2012::2012'
data<-read.csv(file='CAPM/allquotes.csv',header=F,stringsAsFactors=F)
data[, 1] <- gsub("[^A-Za-z0-9]", "", data[, 1])
symbols=gettext(data[,1])
symbol.names=gettext(data[,2])
ia=aa.test.create.ia.custom(symbols,symbol.names,dates)
plot.ia(ia,(1:1)) 
```

值得注意的是，当我提取“symbol.names”中引号名称的字符时，从左到右的标记仅与“symbols”一起出现。

谢谢您的帮助。

# c# - 字符串如何存储在对象数组中？

> ID：11067624
> 
> 赞同：3
> 
> 时间：2012-06-16T22:44:23.433
> 
> 标签：c#, arrays, string, object

```
object[] objs = new object[]{"one","two","three"}; 
```

存储在数组中的字符串是否作为对字符串对象的引用

```
[@] - one
[@] - two
[@] - three 
```

还是字符串对象存储在数组元素中？

```
[one][two][three] 
```

谢谢。

编辑：对不起，我的精美图表惨遭失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T22:48:22.517

字符串对象*永远*不能直接存储在数组中，也不能作为任何其他变量存储。它*总是*引用，即使在简单的情况下，例如：

```
string x = "foo"; 
```

这里的值`x`是一个引用，而不是一个对象。没有表达式值永远是对象——它总是一个引用、一个值类型值或一个指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T23:01:37.150

Jon Skeet 很好地描述了实际的实现，但让我们考虑一下为什么 CLR 将字符串直接存储在数组中是荒谬的。

第一个原因是直接在数组中存储字符串会损害性能。如果字符串直接存储在数组中，那么为了到达数组的元素 1000，CLR 必须遍历数组中所有字符串的字节，直到到达元素 1000，并一直检查字符串边界。由于字符串和任何其他引用类型作为引用存储在数组中，因此找到数组的正确元素需要一次乘法、一次加法和跟随一个指针（这里指针的概念是在实现级别，而不是程序员可见等级）。这会产生更好的性能。

字符串不能合理地直接存储在数组中的第二个原因是[引用类型的 C# 数组是协变的](http://blogs.msdn.com/b/ericlippert/archive/2007/10/17/covariance-and-contravariance-in-c-part-two-array-covariance.aspx)。假设字符串直接存储在生成的数组中

```
string[] strings = new string[] {"one", "two", "three"}; 
```

然后，你把它转换成一个对象数组，这是合法的

```
object[] objs = (object[])strings; 
```

编译器应该如何生成考虑到这种可能性的代码？将对象数组作为参数的方法可以将字符串数组传递给它，因此 CLR 需要知道是将数组作为对象数组、字符串数组还是其他类型的数组进行索引。不知何故，在运行时，每个数组都必须用数组的类型声明进行标记，并且每个数组访问都必须检查类型声明，然后根据数组的类型以不同的方式遍历数组。坚持使用引用要简单得多，它允许数组访问的单一实现并提高启动性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T22:48:11.773

它们作为参考存储在内部。存储了字符串的副本，并且在使用该字符串的任何地方，都有对相同存储字符串的引用。（这是字符串不可变的众多原因之一；否则，修改字符串的一个实例会修改它出现的任何地方）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T22:57:52.897

所有原始类型都直接存储到数组中，但所有其他对象或引用类型都存储为内存引用。对于不限于字符串的所有对象都是如此。

# php - PHP JavaScript Facebook SDK Codeigniter 设置应用权限

> ID：11067632
> 
> 赞同：-1
> 
> 时间：2012-06-16T22:46:34.860
> 
> 标签：php, javascript, facebook, facebook-graph-api

好的，我有 codeigniter 作为我的 MVC，并且我有股票 facebook sdk 3.x，无论现在是最新的，我试图弄清楚如何在我的应用程序权限中添加更多的“基本信息”用户首先进行身份验证。我基本上是从头开始构建的，最初我尝试过 Elliot Haughin 的库，但由于某种原因它开始让我失望，所以我认为而不是第 3 方从头开始构建我自己的交易，并且更好地了解正在发生的事情何时何地。

问题是，尽管 Elliots 库他将其设置为在一个文件中键入您想要的一组设置，然后将其传递给其他内容，我假设用户在应用程序尚未登录时登录得到用户的认可。

我想要做的是重新创建这个想法，或者至少知道我应该在哪里包含它，这样我就可以得到我的基本信息需求之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:58:20.393

[您在](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)`getLoginUrl`函数中设置权限，如下所述：

```
$params = array( 
             'scope' => 'read_stream, friends_likes',
             'redirect_uri' => 'https://www.myapp.com/post_login_page'
         );
$loginUrl = $facebook->getLoginUrl($params); 
```

如果要从配置文件加载权限，可以这样做：

```
'scope' => $this->config->item('app_permissions'), 
```

编辑：

在 JS SDK 中，您有两个选项，具体取决于登录按钮的实现：

一种。

```
FB.login(function(response) {
       // handle the response
 }, {scope: 'read_stream, friends_likes'}); 
```

湾。

```
<div class="fb-login-button" scope="read_stream, friends_likes" data-show-faces="true" data-width="200" data-max-rows="1"></div> 
```

# c# - 在我的 asp.net 网站上附上linkedin 和 facebook 上未显示徽标的链接

> ID：11067634
> 
> 赞同：0
> 
> 时间：2012-06-16T22:47:11.603
> 
> 标签：c#, asp.net, meta-tags

我有一个带有徽标的 asp.net 网站。当我访问 facebook 或链接并输入我的网站时，它不会显示徽标。我做了一些研究并在我的网站上添加了下面的元标记，但它什么也没做。有没有办法让社交网站知道我的标志是什么感谢任何帮助。

```
<meta property="og:image" content="My LOGO Image URL" /> 
```

感谢大家的帮助。我想当您在 facebook 或链接或任何其他社交网站上附加链接时，实际上不可能使用您的徽标作为缩略图。也许他们将来会允许你这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:05:49.240

把它放在你的标题中，它应该可以工作：

```
<link href='YourIconPath' rel='icon' type='image/x-icon'/> 
```

图标需要采用 ICO 格式才能正常工作（gif 或 png 不工作）。您可以在 Internet Explorer 中对其进行测试，看看 AdressBar 中是否显示了正确的图标。

您可以在此处找到更多信息：

[http://en.kioskea.net/faq/1423-favicon-have-the-icon-of-your-site-in-the-address-bar](http://en.kioskea.net/faq/1423-favicon-have-the-icon-of-your-site-in-the-address-bar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:59:59.383

把这个放在头上

```
 <link href="/path_to_your_icon/favicon.ico" rel="icon" type="image/image/png" /> 
```

我个人使用这样的链接：，就像其他答案一样

```
 <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

但是LinkedIn说要以第一种方式对其进行样式设置

# c# - 如何在浏览器控件中填充文本字段

> ID：11067639
> 
> 赞同：1
> 
> 时间：2012-06-16T22:48:12.603
> 
> 标签：c#, web

我正在以编程方式创建一个 Web 浏览器并使用 documentcompleted 事件处理程序来填充一些字段。但是，一个字段接受用户输入，然后另一个（标签样式）字段以格式化的方式显示用户输入。如果我在此输入字段上使用 SetAttribute 方法，则第二个字段不知道第一个字段已被填充，因此它始终显示为空白。

任何想法我可以如何填充该字段以使第二个字段响应更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:02:50.917

进程中有多个 DocumentComplete 事件。我应该等到所有文件都加载完毕。

# ruby-on-rails - 您如何创建到特定节目项目的路线？

> ID：11067640
> 
> 赞同：0
> 
> 时间：2012-06-16T22:48:21.433
> 
> 标签：ruby-on-rails, routes

我想将 'about' 路由到 'abouts/1'

我试过这个：

```
match 'about' => 'abouts#show/1', :via => get 
```

它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:52:55.283

仅从路由中删除 1 并直接在控制器方法中检索您想要的记录怎么样？

```
# routes.rb
match 'about' => 'abouts#show', :via => get

# abouts_controller.rb
def show
  @about = About.find(1)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T22:57:15.533

怎么样：

```
match 'about' => 'abouts#show', :via => :get, :defaults => {:id => 1} 
```

# java - 将许多位图上传到服务器的最佳方法

> ID：11067649
> 
> 赞同：2
> 
> 时间：2012-06-16T22:49:41.413
> 
> 标签：java, android, bitmap

我有一个允许用户提交表单的 android 应用程序，现在这个表单可以有 9 个位图（MAX）。现在我的代码运行良好，但是上传图片需要很长时间。有没有更好的上传图片的方法？？

我的代码：

```
Iterator<String> it = car_images.iterator();
                int i = 0;
                while (it.hasNext()) {
                    String imagepath = it.next();
                    ByteArrayOutputStream bos = new ByteArrayOutputStream();
                    Bitmap b = BitmapFactory.decodeFile(imagepath);
                    b.compress(CompressFormat.JPEG, 100, bos);
                    byte[] data = bos.toByteArray();
                    entity.addPart("image_" + i, new ByteArrayBody(data,

                    "myImage.jpg"));
                    Log.d("image loaded", "image_" + i);
                    ++i;

                }
                put.setEntity(entity);
                HttpResponse repsone = client.execute(put); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T23:10:21.873

您可以使用线程并行运行上传任务，这可以加快上传速度。[Android 开发人员指南在Threads 和 process](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)上有很好的文档（带有示例代码）。

# ruby-on-rails - 干掉我的 Rails 的 belongs_to 和 has_many 关联

> ID：11067651
> 
> 赞同：1
> 
> 时间：2012-06-16T22:49:48.560
> 
> 标签：ruby-on-rails, has-many, belongs-to, has-and-belongs-to-many

我正在开发一个应用程序来计算债务以及谁欠谁等等。

目前它的工作原理是这样的：

```
create_table "debts", :force => true do |t|
  t.string   "amount"
  t.integer  "payer_id"
  t.integer  "payee_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

create_table "people", :force => true do |t|
  t.string   "name"
  t.integer  "bank"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

class Debt < ActiveRecord::Base
    attr_accessible :amount, :payee_id, :payer_id

    belongs_to :payee, :class_name => 'Person'
    belongs_to :payer, :class_name => 'Person'
 end

class Person < ActiveRecord::Base
    attr_accessible :amount, :payee_id, :payer_id

    has_many :debts_owed, :class_name => Debt, :foreign_key => "payee_id"
    has_many :debts_to_pay, :class_name => Debt, :foreign_key => "payer_id"
end 
```

它正在工作，但我知道必须有一种更简单的方法来表示同一个模型的多个关联？我一直在阅读 has_and_belongs_to_many 这看起来是正确的，但老实说我迷路了。

任何帮助，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:01:42.823

我不认为 HABTM 在这里会有所帮助。

HABTM 适用于需要多对多关系的情况，例如标签。如果我有一组博客文章，我可能希望能够标记它们。博客文章可以有许多标签，并且标签可以用于许多博客文章。

在你的情况下，这种关系不会发生。老实说，我不相信有更好的方法来建立你所拥有的关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:23:13.353

就两行来说，这不是太多的重复，但是如果你真的想要，你可以做这样的事情：

```
[:payee, :payer].each {|f| belongs_to(f, :class_name => 'Person') } 
```

所以这是一行而不是两行，但阅读和维护可能不太清楚。如果您有更多行使用相同的 class_name，这可能是值得的。

# c# - 计量单位换算+数据绑定

> ID：11067653
> 
> 赞同：1
> 
> 时间：2012-06-16T22:49:58.353
> 
> 标签：c#, xaml, c#-4.0, data-binding

我目前正在为 Windows Phone 构建一个测量单位转换应用程序。设置好我的用户界面后，我将数据绑定添加到两个文本框，每个文本框都显示一个测量值。（例如华氏<->摄氏度）

到目前为止，一切都很好。但是，当我部署我的应用程序时，我遇到了循环依赖。每当我更新一个值时，都会调用转换函数并更新另一个单元。因此，设置它的值会导致转换函数再次运行。

我能做些什么来避免这种依赖？我想它更多的是概念性的东西而不是实际的编程。谢谢

示例代码

```
 private float _fahrenheit;
    private float _celsius;

    public float Fahrenheit {
        get { return _fahrenheit; }
        set { 
            _fahrenheit = value;
            FahrenheitToCelsius();
        }
    }

    public float Celsius
    {
        get { return _celsius; }
        set
        {
            _celsius = value;
            CelsiusToFahrenheit();
        }
    }

    private void CelsiusToFahrenheit()
    {
       Fahrenheit = _celsius * 1.8f + 32.0f;
    }

    private void FahrenheitToCelsius()
    {
        Celsius = ((_fahrenheit - 32.0f) * 5.0f) / 9.0f;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:39:53.473

我会选择其中一个作为你的基地。另一个永远是这个的转换。我们通过应用程序的公制到英制转换来做到这一点。所有值都以公制存储，但您可以显示公制或英制。如果你打算使用摄氏度作为你的基础，它看起来像这样：

```
private float _celsius;

public float Fahrenheit {
    get { return _celsius * 1.8f + 32.0f }
    set 
    { 
        float cels = (((value - 32.0f) * 5.0f) / 9.0f);
        if (cels != _celsius)
        {
            _celsius = cels;
            TempPropertiesChanged();
        }
    }
}

public float Celsius
{
    get { return _celsius; }
    set
    {
        if (value != _celsius)
        {
            _celsius = value;
            TempPropertiesChanged();
        }
    }
}

private void TempPropertiesChanged()
{
   OnPropertyChanged("Fahrenheit");
   OnPropertyChanged("Celsius");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:55:36.120

不要在两个方法中使用setter，而是直接将值写入实例字段。它实际上更像是一个编程的东西而不是一个概念的东西。

# php - 如何将 JSON 数组传递到 URL？

> ID：11067657
> 
> 赞同：3
> 
> 时间：2012-06-16T22:50:30.947
> 
> 标签：php, jquery, arrays, json

## JavaScript/JQuery

```
var arr=[];

$('.element').each(function(i)
{
    arr.push({"id":i,"value":$(this).attr('data-value')});
});

$.get('/json.php?arr='+arr,function(result)
{
    alert(result);
}); 
```

## PHP

```
<?php

$j = json_decode($_GET['arr'], true);

foreach($j as $k => $v)
{
    echo $v['id'].':'.$v['value'].'<br />';
}

?> 
```

## 问题

但问题是 URL 看起来像`/json.php?arr=[object Object],[object Object]`而不是`/json.php?arr=[{"id":1,"value":"value 1"},{"id":2,"value":"value 2"}]`. 我需要将对象转换为字符串吗？但我不想使用 JQuery 以外的其他库。这可能吗？：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T22:56:00.523

试试 JSON.stringify

```
$.get('/json.php?arr='+JSON.stringify(arr),function(result) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T22:54:39.887

如果您不喜欢通过 JSON 传递 if 的想法，您可以在 jQuery 请求的数据部分提供它：

```
$.get( url, data, callback ); 
```

然后稍后检索它：

```
foreach( $_POST as $key => $value ){
   //....
} 
```

# css - scss 加入课程

> ID：11067659
> 
> 赞同：1
> 
> 时间：2012-06-16T22:50:46.807
> 
> 标签：css, layout, less, sass

所以，这是“LESS”代码的例子

```
.my_class{
    color: #000;
    font: 12px/12px Arial;
    &_comething_else{ color: #f00; }
} 
```

这将被编译成：

```
.my_class{
    color: #000;
    font: 12px/12px Arial;
}

.my_class_something_else{
    color: #f00;
} 
```

类“.my_class”和“_something_else”已加入，但使用 SCSS，此代码将编译为：

```
.my_class{
    color: #000;
    font: 12px/12px Arial;
}

.my_class _something_else{
    color: #f00;
} 
```

“.my_class”之后的空格在“_something_else”中下划线之前的位置

那么，有没有办法在 SCSS 中做这个 LESS 技巧？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:52:01.840

我找到了解决方案。它比 LESS 更难看，但有效：

```
$ns: ".my_class";
.my_class{
    color: #000;
    font: 12px/12px Arial;
    #{$ns}_comething_else{ color: #f00; }
} 
```

将被编译成

```
.my_class{
    color: #000;
    font: 12px/12px Arial;
}

.my_class .my_class_comething_else{
    color: #f00;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:36:28.857

即使仍然无法在 SASS(3.2.6) 中加入类名，我注意到您可以在 jsFiddle 上重新完成。

这是我使用的代码：

```
.elem {
    &__child {
        border: solid red;

        &-text {
            color: blue;
        }
    }
} 
```

查看示例[http://jsfiddle.net/nicolasmn/6cvFZ/](http://jsfiddle.net/nicolasmn/6cvFZ/)

# random - 在 TI 83 上模拟 randIntNoRep( 命令

> ID：11067662
> 
> 赞同：5
> 
> 时间：2012-06-16T22:51:46.170
> 
> 标签：random, ti-basic

该`randIntNoRep(`命令已针对 OS 2.53MP 及更高版本上的 TI-84+/SE 计算器发布。

当您需要以随机顺序创建不重复整数的数字列表时，使用该命令。它对于改组任何数字的序列非常有用。如何在早期版本（操作系统或设备方面）上实现此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:51:47.167

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T03:08:22.103

You can randomize a list by swapping its elements, like this.

```
:For(F,1,dim(L1))
:    iPart(dim(L1)rand+1)->R
:    L1(R)->T
:    L1(F)->L1(R)
:    T->L1(F)
:End 
```

This randomize L1, assuming L1 has all the elements you want it to.

# drupal - 查看同一数据库列中的字段

> ID：11067664
> 
> 赞同：1
> 
> 时间：2012-06-16T22:51:50.230
> 
> 标签：drupal, drupal-7, views, field

所以，我已经序列化了 uc_orders 表中的数据。这个数据有几个感兴趣的参数，我想从中创建一个唯一的字段。

这些 $data 值中的每一个都独立工作。显然我正在重写第二个声明的值。如何两次引用相同的数据位置，以便可以使用两个字段，并且可以将所有序列化数据分解为单独的字段？

```
 function uc_order_views_data() {
    $data['uc_orders']['data'] = array(
      'group' => t('Order') . ':data',
      'title' => t('Arrival Date'),
      'help' => t('Arrival date choosen by customer during checkout.'),
      'field' => array(
      'handler' =>'uc_order_handler_field_arrive_date',
        'click sortable' => TRUE,
      ),
      'sort' => array(
        'handler' => 'views_handler_sort',
      ),
      'filter' => array(
        'handler' => 'views_handler_filter_string',
      ),
    );

    $data['uc_orders']['data'] = array(
      'group' => t('Order') . ':data',
      'title' => t('Ship Date'),
      'help' => t('The date to ship the order by.'),
      'field' => array(
      'handler' =>'uc_order_handler_field_ship_date',
        'click sortable' => TRUE,
      ),
      'sort' => array(
        'handler' => 'views_handler_sort',
      ),
      'filter' => array(
        'handler' => 'views_handler_filter_string',
      ),
    );
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:26:28.033

我终于找到了答案。

```
 $data['uc_orders']['data2'] = array(
    'group' => t('Order') . ':data',
    'title' => t('Arrival Date'),
    'real field' => 'data',
    'help' => t('Arrival date choosen by customer during checkout.'),
    'field' => array(
    'handler' =>'uc_order_handler_field_arrive_date',
      'click sortable' => TRUE,
     ),
     'sort' => array(
       'handler' => 'views_handler_sort',
     ),
     'filter' => array(
       'handler' => 'views_handler_filter_string',
     ),
  );

  $data['uc_orders']['data'] = array(
    'group' => t('Order') . ':data',
    'title' => t('Ship Date'),
    'help' => t('The date to ship the order.'),
    'field' => array(
    'handler' =>'uc_order_handler_field_ship_date',
      'click sortable' => TRUE,
     ),
     'sort' => array(
       'handler' => 'views_handler_sort',
     ),
     'filter' => array(
       'handler' => 'views_handler_filter_string',
     ),
  ); 
```

解决方案是添加`'real field' => 'field name',`和更改 $data id。

# php - 在 Zend Framework 1.11 中为命名空间 (5.3) 类添加操作助手路径

> ID：11067665
> 
> 赞同：2
> 
> 时间：2012-06-16T22:52:07.760
> 
> 标签：php, zend-framework, config, ini

有谁知道如何告诉 Zend Framework 1.11 如何找到我的命名空间操作助手类？我正在使用正确的 PHP5.3 命名空间，所以不是正常的 My_Helper 等。

我也很想在不使用 ini 文件的情况下执行此操作，因为我没有使用 Zend_Application 并且真的不想重构我的所有设置。

我可以使用 ini 文件很好地注册视图助手路径，但无法让动作助手工作。

## 工作视图助手 ini 配置：

resources.view.helperPath.Foo\View\Helper\ = APPLICATION_PATH "/../library/Foo/View/Helper/"

## 非工作动作助手 ini 配置：

resources.frontController.actionhelperpaths.Foo\Helper\ = APPLICATION_PATH "/../library/Foo/Helper/"

似乎找不到任何有关它的信息？

如果你知道如何在不使用 Ini 文件的情况下做到这一点，那也很棒:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:31:30.143

AFAIK，虽然[ZF1 自动加载器可以处理真正的 PHP 命名空间](https://stackoverflow.com/questions/6513529/using-php-namespaces-in-a-zend-framework-v1-application)，但用于视图助手的插件加载器和标准资源自动加载器（通常用于模型、表单等）都不能处理真正的 PHP-5.3 命名空间路径/前缀映射（[见这里](https://stackoverflow.com/questions/6409424/zend-resource-autoloaders-not-working-for-namespaces)） .

可能有必要：

*   编写自己的插件加载器并在引导期间将其提供给视图
*   编写您自己的资源自动加载器并在应用程序/模型引导程序中调用它。

真可惜。希望我错了。

ZF2 - 在撰写本文时仍处于后期测试阶段 - 完全有能力处理真正的 PHP 命名空间。

# php - MySQL中的计数

> ID：11067666
> 
> 赞同：0
> 
> 时间：2012-06-16T22:52:07.873
> 
> 标签：php, mysql, database

我试图在 MySQL 中创建一个点击计数器，但它似乎不起作用。

这是我的 PHP 代码（count.php）

```
<?php
mysql_connect("myhost", "username", "password") or die(mysql_error());
mysql_select_db("mydatabase") or die(mysql_error());

mysql_query("INSERT INTO `table` (`field`) VALUES(\'+1\'); ") 
or die(mysql_error()); 
?> 
```

这是HTML

```
<html>
    <head>
    </head>
    <div onClick="count.php">Click!</div>
    </script>
    </body>
</html> 
```

这段代码会处理多人同时点击按钮吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T23:11:09.627

**onClick**不像**href**，它应该是这样的：

```
<div onClick="count()">Click</div>
<script>
    function count() {
        // java script function that loads count.php by ajax //
    }
</script> 
```

在**count.php**而不是

```
mysql_query("INSERT INTO table (field) VALUES (1)"); 
```

您可以使用

```
mysql_query("UPDATE table SET field = field+1 WHERE id = 1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:57:43.503

在您的表格中放置一行，ID 为 (say) `1`，然后执行....

```
mysql_query("UPDATE `table` SET `field`=`field`+1 WHERE Id = 1;"); 
```

这将增加值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T23:01:23.827

对于为您做事的单个查询：

```
INSERT INTO `table` (`Id`, `field`) VALUES (ID_HERE, 1)
    ON DUPLICATE KEY UPDATE `field`=`field`+1 
```

如果 ID 尚不存在，这将创建一个新行，如果存在则增加计数器。

# mysql - 无法在 my.ini 文件/（my.cfn 文件）中将自动提交设置为 0

> ID：11067670
> 
> 赞同：1
> 
> 时间：2012-06-16T22:53:27.640
> 
> 标签：mysql, wampserver, my.cnf

我正在使用 wamp 服务器，所以 my.ini 文件是新的 my.cfn 文件。我用编辑器打开了文件，然后向下滚动直到看到

```
[mysqld] 
```

之后我输入了

```
init_connect='SET autocommit=0' 
```

然后我保存了文件重新启动我的 wamp 服务器启动了 mySQL concol 并输入了命令

```
SELECT @@autocommit; 
```

我得到了`@@autocommit | 1` ，但据我了解，如果自动提交关闭，它应该为零。

有谁明白怎么回事？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:01:00.517

检查此页面的答案：

[http://bugs.mysql.com/bug.php?id=5035](http://bugs.mysql.com/bug.php?id=5035)

特别是在这里：

> [2004 年 8 月 17 日 11:20] Sergey Gluhov 看起来这不是错误。如果用户有 SUPER 权限，init_connect 将不会执行（否则如果 init_connect 将出现错误的查询，则任何人都无法连接到服务器）。
> 
> 请注意，如果 init_connect 是一个错误查询，则连接正在关闭且没有任何错误，并且下一个命令将子句“丢失连接”错误。

也许你也有同样的情况？

# c - 在两个 C 结构之间复制数据

> ID：11067671
> 
> 赞同：3
> 
> 时间：2012-06-16T22:54:07.400
> 
> 标签：c, struct, synchronization, copy

我在两台不同的机器上有一个 C 结构——服务器和客户端。例如：

```
struct account {
   int account_number;
   char *first_name;
   char *last_name;
   float balance;
}; 
```

我的问题是在机器之间复制数据的可能方法是什么？也许我可以尝试将数据转换为 XML 并复制它？或者我可以使用数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:11:17.867

最简单、最轻量级的解决方案 - 如果您在两台机器之间以 a 的形式打开连接`FILE*`- 可能是一端传输，`fprintf`另一端解码`fscanf`。

协议.h：

```
typedef struct _packet packet_t;

struct _packet {
  int account_number;
  char *first_name;
  char *last_name;
  float balance;
};

static const char packet_fmt[]=" acct: %d fname: %s sname: %s balance: %f"; 
```

发件人：

```
 ...
  printf(packet_fmt, acct, "Greg", "Benison", bal);
  ... 
```

听众：

```
...
int n_read = fscanf(fin, packet_fmt, &acct, fname, sname, &balance);

if (n_read == 4)
  printf("Received balance update for %s %s: %f\n", fname, sname, balance);
... 
```

这对于您的四字段结构可能就足够了，但是如果您预计它的结构会发生变化或显着增长，那么使用 XML、JSON 或其他一些更正式的编码可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:19:04.203

如果您熟悉 C，那么我会使用 TCP 套接字来传输和接收您的数据。您基本上需要将数据作为原始字节并以指定的顺序传输，以便在收到时对其进行解码。您将需要考虑机器的一致性，并且您还需要发送额外的数据字段来指定可变长度名称的长度（以便您知道要接收多少字节）。通常最好添加一个字段来指示您发送的数据包的总大小。基本上你可以用你选择的任何方式对你的数据包进行编码，只要你在另一端以同样的方式解压它，你的数据就会被传输。也许这是一种老套的做事方式，但我在日常工作中一直使用这种方法在机器之间传输数据。它是您可以使用的众多选项之一。您可以以其他格式将数据作为 xml 发送，但发送原始字节会导致数据包更小（这可能是您需要解决的问题，也可能不是）。希望这可以帮助。

# opengl - 在opengl中绘制顺序排序

> ID：11067672
> 
> 赞同：2
> 
> 时间：2012-06-16T22:54:20.057
> 
> 标签：opengl, z-order, orthographic

我有一个正交投影，我正在绘制精灵。问题是精灵按照 OpenGL 中绘制的顺序出现。我想为它们分配一个 Z 值，并让它们以排序的 Z 顺序绘制。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:58:16.947

对它们进行排序，然后按该顺序绘制它们。真的没有必要再进一步了。只需将它们全部放在数据结构中，对它们进行排序，然后按顺序绘制它们。

# java - 在另一个网页上读取和分析数据并插入到我的

> ID：11067674
> 
> 赞同：0
> 
> 时间：2012-06-16T22:54:33.973
> 
> 标签：java, html, matlab, web-scraping

我正在尝试制作一个获取足球联赛表数据的简单网页

[http://www.skysports.com/football/league/0,19540,11660,00.html](http://www.skysports.com/football/league/0,19540,11660,00.html)

例如，我想在积分栏中阅读并将其除以所玩游戏的数量，以获得我将打印到我的网页上的每个游戏栏的平均积分。

我怎样才能在网上做到这一点？

我在使用 C/Matlab 等离线程序执行此操作方面非常有经验，但我不知道从哪里开始在线使用它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:12:52.170

我不建议在客户端（在浏览器上）进行。按照以下步骤在服务器端（例如使用 java）报废会更容易：

1.  抓取网页内容（skysports）
2.  使用带有正则表达式的现有 html 标记来定位所需的内容部分。
3.  使用正则表达式剥离/拆分 html 标记以获取记录 (tr) 和字段 (td)。
4.  铸造价值并做你的数学。
5.  使用结果生成您的 html 或 json 或其他版本。
6.  将生成的内容提供给您的客户。

一般来说，报废很容易，但明天不能保证，因为源 html 标记可能随时更改（并且没有警告）。

如果您愿意，我可以提供 C# 中的基本示例。（对不起，自 1997 年以来我没有“java”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:13:08.680

你像这样使用[jQuery.get](http://api.jquery.com/jQuery.get/) ：

```
$.get('http://www.skysports.com/football/league/0,19540,11660,00.html', function(data) {
//do the parsing here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:39:18.733

有几种编程语言能够获取此信息，**PHP**将是使用**curl**或**file_get_contents**和正则表达式解析来提取所需位的经典方法。如果您的网络主机不允许远程 URL 检索，您也可以使用**Yahoo Pipes进行操作。**

如果 Java 团队没有人回来提供更好的东西，请联系我，我会用 PHP 为您编写一些粗略的代码。

# ios - IOS用前置摄像头拍照

> ID：11067676
> 
> 赞同：0
> 
> 时间：2012-06-16T22:54:43.207
> 
> 标签：ios, camera, image

我正在尝试构建一个非实时人脸检测应用程序。

在这篇文章之后：http: [//maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)我可以加载 jpg 并检测人脸。

我想每 20 秒自动拍照，然后在 UIImageView* 中显示图像，然后在其上运行现有的检测面部功能。

我的问题是两方面的。

1.  有没有一种简单的方法可以从相机中获取样本图片并将其加载到 UIImageView* 中而不保存它？

2.  如何在没有用户交互的情况下自动每 30 秒发生一次？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:53:13.097

查看 AVFoundation 编程指南

[AVFoundation 编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)

本指南向您展示如何使用 AVFoundation 来捕获媒体。

您需要考虑设备旋转，因为相机将仅显示其原始输出，直到您通过 CATransformMatrix 旋转输出，但这比您想要的要深入一些。

只要知道，您就可以逃脱惩罚。您从原始点旋转 45° 到最终旋转位置。

这是我的小相机测试实用程序的代码。

构建一个 UIView 并连接 IBOutlets 和 IBActions

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIView *previewViewContainer;
@property (weak, nonatomic) IBOutlet UIView *playerViewContainer;
- (IBAction)button1Pressed:(id)sender;
- (IBAction)button2Pressed:(id)sender;
- (IBAction)button3Pressed:(id)sender;
- (IBAction)button4Pressed:(id)sender;
- (IBAction)startPressed:(id)sender;
- (IBAction)stopPressed:(id)sender;
- (IBAction)swapInputsPressed:(id)sender;
- (IBAction)recordPressed:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

#import <AVFoundation/AVFoundation.h>

@interface ViewController ()

@property (nonatomic, strong) AVCaptureSession *captureSession;
@property (nonatomic, strong) AVCaptureVideoPreviewLayer *capturePreviewLayer;

@property (nonatomic, strong) AVCaptureDeviceInput *frontCam;
@property (nonatomic, readonly) BOOL frontCamIsSet;
@property (nonatomic, readonly) BOOL hasFrontCam;
@property (nonatomic, readonly) BOOL isUsingFrontCam;

@property (nonatomic, strong) AVCaptureDeviceInput *backCam;
@property (nonatomic, readonly) BOOL backCamIsSet;
@property (nonatomic, readonly) BOOL hasBackCam;
@property (nonatomic, readonly) BOOL isUsingBackCam;

@property (nonatomic, strong) AVCaptureDeviceInput *mic;
@property (nonatomic, readonly) BOOL micIsSet;
@property (nonatomic, readonly) BOOL hasMic;

@end

CGFloat DegreesToRadians(CGFloat degrees)
{
    return degrees * M_PI / 180;
};

CGFloat RadiansToDegrees(CGFloat radians)
{
    return radians * 180 / M_PI;
};

@implementation ViewController

#pragma mark - Helper Methods

- (NSArray *) inputDevices{
    return [AVCaptureDevice devices];
}
- (NSArray *) videoInputDevices{
    return [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
}
- (NSArray *) audioInputDevices{
    return [AVCaptureDevice devicesWithMediaType:AVMediaTypeAudio];
}

#pragma mark - Properties

@synthesize captureSession = _captureSession;
- (AVCaptureSession *)captureSession{
    if (_captureSession == nil){
        _captureSession = [[AVCaptureSession alloc] init];
    }
    return _captureSession;
}
@synthesize capturePreviewLayer = _capturePreviewLayer;
- (AVCaptureVideoPreviewLayer *)capturePreviewLayer{
    if (_capturePreviewLayer == nil){
        _capturePreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.captureSession];
    }
    return _capturePreviewLayer;
}

@synthesize frontCam = _frontCam;
- (AVCaptureDeviceInput *)frontCam{
    if (_frontCam == nil && !self.frontCamIsSet){
        _frontCamIsSet = YES;
        NSArray *videoDevices = [self videoInputDevices];
        for (AVCaptureDevice *inputDevice in videoDevices) {
            if ([inputDevice position] == AVCaptureDevicePositionFront){
                NSError *error = nil;
                _frontCam = [AVCaptureDeviceInput deviceInputWithDevice:inputDevice error:&error];
                if (!_frontCam){
                    NSLog(@"Error Attaching Front Cam %@",error);
                }
            }
        }
    }
    return _frontCam;
}
- (BOOL)hasFrontCam{
    return self.frontCam != nil;
}
@synthesize isUsingFrontCam = _isUsingFrontCam;

@synthesize backCam = _backCam;
- (AVCaptureDeviceInput *)backCam{
    if (_backCam == nil && !self.backCamIsSet){
        _backCamIsSet = YES;
        NSArray *videoDevices = [self videoInputDevices];
        for (AVCaptureDevice *inputDevice in videoDevices) {
            if ([inputDevice position] == AVCaptureDevicePositionBack){
                NSError *error = nil;
                _backCam = [AVCaptureDeviceInput deviceInputWithDevice:inputDevice error:&error];
                if (!_backCam){
                    NSLog(@"Error Attaching Back Cam %@",error);
                }
            }
        }
    }
    return _backCam;
}
- (BOOL)hasBackCam{
    return self.backCam != nil;
}

@synthesize mic = _mic;
- (AVCaptureDeviceInput *)mic{
    if (_mic == nil && !self.micIsSet){
        _micIsSet = YES;
        NSArray *audioDevices = [self audioInputDevices];
        for (AVCaptureDevice *inputDevice in audioDevices) {
            NSError *error = nil;
            _mic = [AVCaptureDeviceInput deviceInputWithDevice:inputDevice error:&error];
            if (!_mic){
                NSLog(@"Error Attaching Mic %@",error);
            }
        }
    }
    return _mic;
}
- (BOOL)hasMic{
    return self.mic != nil;
}
- (BOOL)isUsingBackCam{
    return !self.isUsingFrontCam;
}

- (IBAction)button1Pressed:(id)sender {
    if (NO && self.hasFrontCam && [self.captureSession canAddInput:self.frontCam]){
        _isUsingFrontCam = YES;
        [self.captureSession addInput:self.frontCam];
    }
    else if(self.hasBackCam && [self.captureSession canAddInput:self.backCam]){
        _isUsingFrontCam = NO;
        [self.captureSession addInput:self.backCam];
    }
    if (self.hasMic && [self.captureSession canAddInput:self.mic]) {
        [self.captureSession addInput:self.mic];
    }
}
- (IBAction)button2Pressed:(id)sender {
    self.capturePreviewLayer.frame = self.previewViewContainer.layer.bounds;

    [self.previewViewContainer.layer addSublayer:self.capturePreviewLayer];

}

- (void) orientationChanged:(NSNotification*) notification{
    NSLog(@"Notification Of Orientation Change\n\n%@",notification.userInfo);
    if (_capturePreviewLayer != nil){

        CGFloat rotate90 = DegreesToRadians(90);

        CGFloat rotateFinish = 0;

        UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;
        switch (orientation) {
            case UIDeviceOrientationLandscapeLeft:
                rotateFinish += rotate90;
            case UIDeviceOrientationPortraitUpsideDown:
                rotateFinish += rotate90;
            case UIDeviceOrientationLandscapeRight:
                rotateFinish += rotate90;
            case UIDeviceOrientationPortrait:
            default:
                break;
        }

        _capturePreviewLayer.transform = CATransform3DMakeRotation(rotateFinish, 0.0, 0.0, 1.0);
    }
}

- (IBAction)button3Pressed:(id)sender {

}
- (IBAction)button4Pressed:(id)sender {
}

- (IBAction)startPressed:(id)sender {
    [self.captureSession startRunning];
}
- (IBAction)stopPressed:(id)sender {
    [self.captureSession stopRunning];
}

- (IBAction)swapInputsPressed:(id)sender {
    if (!self.isUsingFrontCam){
        _isUsingFrontCam = YES;
        [self.captureSession removeInput:self.backCam];
        [self.captureSession addInput:self.frontCam];
    }
    else {
        _isUsingFrontCam = NO;
        [self.captureSession removeInput:self.frontCam];
        [self.captureSession addInput:self.backCam];
    }
}

- (IBAction)recordPressed:(id)sender {

}
- (NSString *) applicationDocumentsDirectory{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
}

- (void)viewDidLoad{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(orientationChanged:)
                                                 name:UIDeviceOrientationDidChangeNotification
                                               object:nil];

}

- (void) dealloc{
    [[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UIDeviceOrientationDidChangeNotification
                                                  object:nil];
}
- (void)didReceiveMemoryWarning{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

对你来说幸运的是，我刚刚构建了这个用于抓取照片的测试应用程序。

哦，在我忘记之前。将 CALayer 渲染成图形就像

```
+ (UIImage *) captureImageOfView:(UIView *)srcView{
    UIGraphicsBeginImageContext(srcView.bounds.size);
    [srcView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *anImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return anImage;
} 
```

但是，我建议您查看 AVFoundation 编程指南，了解他们如何实际捕获它。正如我所说，这只是我自己的演示应用程序。它不完整。

# linq - Linq 查询选择计数到同一实体中

> ID：11067677
> 
> 赞同：1
> 
> 时间：2012-06-16T22:54:46.937
> 
> 标签：linq, entity-framework, code-first

我有两个表：comments 和commentLikes 在同一个查询中我计算用户对评论的喜欢。

我得到了以下（简化的）查询：

```
var res = (from c in db.Comments
                           where c.Topic.ID == topicID
                           select new
                           {
                               comment = c,
                               count = c.CommentLikes.Count()
                           }).ToList(); 
```

但是，我不想再次将likecount 映射到评论实体中，而是希望获得一个评论列表，其中仅包含一个LikeCount 字段，最好使用有效的查询。像这样的东西：

```
 var res = (from c in db.Comments
                               where c.Topic.ID == topicID
                               select new
                               {
                                   comment = c,
                                   c.LikeCount = c.CommentLikes.Count()
                               }).ToList(); 
```

此查询无法编译。

如何在linq中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:06:02.817

你不能那样做。EF 不支持将 (= `select`) 数据投影到实体中。`LikeCount`执行查询后，您必须将属性填充到内存中。您可以以紧凑的方式编写它，但它基本上只是`foreach`物化匿名对象的循环：

```
IEnumerable<Comment> res =
          (from c in db.Comments
           where c.Topic.ID == topicID
           select new
           {
               comment = c,
               count = c.CommentLikes.Count()
           })
           .ToList() // DB query runs here, the rest in memory
           .Select(a => {
               a.comment.LikeCount = a.count;
               return a.comment;
           }); 
```

# java - 如何使用不同的属性值集自动化 GWT 构建？

> ID：11067687
> 
> 赞同：4
> 
> 时间：2012-06-16T22:57:21.787
> 
> 标签：java, gwt, ant, build

我需要能够使用两组不同的属性值来构建我的 GWT 应用程序的两个不同版本。例如，一个版本将使用`custom_property`设置为“A”的值构建，而另一个版本将使用`custom_property`设置为“B”的值构建。

目前我正在手动编辑应用程序的模块 XML 文件。因此，要制作一个版本，我首先要添加：

```
<set-property name="custom_property" value="A"/> 
```

为了进行其他构建，我会将这一行更改为：

```
<set-property name="custom_property" value="B"/> 
```

这种方法工作正常，但如果可能的话，我想自动化它。

有没有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:18:35.787

一种有效的方法是使用 Maven 替换。我已经在许多基于 GWT 和非基于 GWT 的应用程序中使用了这种方法。由于 Maven 的流行，您会发现*大量*Mavenizing 您的 GWT 应用程序的示例。然后你可以使用 Maven 替换来实现所有的魔法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T03:21:31.750

您可以克隆应用程序的模块 XML 文件并更改其中的自定义属性的值（例如`MyAppStaging.gwt.xml`和`MyAppProd.gwt.xml`）。因此，您将能够编写不同应用程序版本的脚本构建，并在 IDE 中具有不同的运行配置。这里的缺点是随后需要维护两个模块 XML 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T17:40:19.267

基于[@BorisBrudnoy 的](https://stackoverflow.com/a/11068690/196844)多个模块XML 文件的想法，我将所有与设置不同构建之间的属性无关的模块XML 放在一个`MyAppBase.gwt.xml`文件中。然后我创建`MyAppA.gwt.xml`了：

```
<module rename-to="myappA">
  <inherits name="com.mycompany.MyAppBase"/>

  <set-property name="custom_property" value="A"/>
</module> 
```

并`MyAppB.gwt.xml`与：

```
<module rename-to="myappB">
  <inherits name="com.mycompany.MyAppBase"/>

  <set-property name="custom_property" value="B"/>
</module> 
```

现在我可以在 GWT 编译命令行中指定`com.mycompany.MyAppA`或指定`com.mycompany.MyAppB`，并且不会复制配置。

# java - 有 Eclipse 项目 jar 的存储库吗？

> ID：11067690
> 
> 赞同：2
> 
> 时间：2012-06-16T22:57:47.047
> 
> 标签：java, eclipse, maven, jar

Eclipse Foundation 中有一个项目 DevTools，它包含一个子项目 SqlTools，其中包含一些与解析 SQL 相关的库。我希望能够将这些库链接到我自己的项目。我一辈子都想不出谷歌的正确术语来为这些罐子找到一些存储库。

我发现源代码没问题并克隆了 git 存储库，但那是源代码。我想避免不仅托管我自己的项目的 jar，而且避免托管它可能具有的任何依赖项。有人知道在哪里可以买到这些吗？已经联系了邮件列表，但很不耐烦。为了自己的兴趣，我终于有空闲时间在周末进行黑客攻击了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:08:13.237

jar 发布在[p2 存储库](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_overview.htm)中。 [http://download.eclipse.org/datatools/updates](http://download.eclipse.org/datatools/updates)

content.jar 文件描述了 repo，实际的 jar 在[http://download.eclipse.org/datatools/updates/plugins](http://download.eclipse.org/datatools/updates/plugins)

在[http://maven.eclipse.org/nexus/index.html](http://maven.eclipse.org/nexus/index.html)有一个包含一些 sqltools jar 的 nexus 实例，但将 jar 发布到 maven.eclipse.org 仍在建设中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:11:12.463

我用这个 - [http://search.maven.org/#browse](http://search.maven.org/#browse)

更好看。干净，光滑，更用户友好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T01:18:43.030

我使用 mvnrepository.com 来搜索库。

[http://mvnrepository.com/search.html?query=Eclipse](http://mvnrepository.com/search.html?query=Eclipse)

# c++ - 禁用特定进程的注册表访问 (WinAPI)

> ID：11067693
> 
> 赞同：6
> 
> 时间：2012-06-16T22:58:10.523
> 
> 标签：c++, c, winapi

我有一个问题，我似乎找不到答案，但我确信它就在那里。有没有办法可以禁用新创建的进程的注册表和文件访问？我正在使用作业对象（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682409(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682409(v=vs.85).aspx)），它说要为每个新的作业流程设置权限，在我读过的几本书中，可以控制注册表和文件访问等内容。

在寻找我的答案时，我看到我需要为诸如 SE_BACKUP_NAME 之类的东西（或任何它被称为的东西）添加 LUID，但这些特权常量似乎都没有反映我想要的控制类型。所以我的确切问题是：我将如何为作业中新创建的进程禁用注册表/文件写入访问权限？

我正在尝试创建一个沙盒应用程序，顺便说一句。这样我就可以防止它在运行时对注册表进行任何更改或写入任何文件。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T09:47:39.233

Windows 在进程启动期间会访问许多资源，因此如果您成功禁用对文件系统和注册表的访问，该进程将不会启动。

理想情况下，您希望在进程初始化完成后限制访问，但 Windows 没有针对任意进程执行此操作的机制。Chrome浏览器中的沙盒依赖于沙盒进程的配合。

[Chrome 沙盒](http://dev.chromium.org/developers/design-documents/sandbox)的文档很好地概述了 Windows 中可用的各种安全机制，并解释了它们在 Chrome 中的使用方式。如果您尝试对自己的代码进行沙箱化，这是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:37:09.410

我不认为您可以完全禁用访问，因为许多子系统都依赖它（COM、shell、一些 DLL 初始化、调试等）另一种方法是允许访问，但可以使用有限的沙箱，可以通过[完整性来完成系统](http://msdn.microsoft.com/en-us/library/bb625957.aspx)。将其设置为[低完整性](http://msdn.microsoft.com/en-us/library/bb625960)将阻止大多数写访问，并由保护模式 IE 使用。

# javascript - 需要一个 JS 日期库。DateJS 自 2007-2008 年左右以来一直没有更新。红色的标志？

> ID：11067697
> 
> 赞同：3
> 
> 时间：2012-06-16T22:59:05.323
> 
> 标签：javascript, datejs

我正在构建一个基于日历的 Web 应用程序，并且非常需要一个 JavaScript 日期库——类似于 python 的[dateutil](http://labix.org/python-dateutil)。我遇到了[DateJs](http://www.datejs.com/)。功能看起来很棒。我唯一的犹豫是自 2008 年初以来就没有触及过 repo。通常这对于开源项目来说是一个（非常）不好的迹象。所以我想检查人们目前是否使用、信任和推荐这个库，或者它是否只是一个被遗弃的具有良好 SEO 的良好意图。如果没有，是否还有另一个我应该查看的综合 JS 日期库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T23:01:23.870

我想推荐[momentjs](http://momentjs.com/) - 一个非常轻量级但功能惊人的 Date JS 库。)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-10T09:37:45.277

试试[https://github.com/abritinthebay/datejs](https://github.com/abritinthebay/datejs)，

它是[http://www.datejs.com/的分叉版本](http://www.datejs.com/)

它由新作者积极维护！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T21:29:16.623

DateJS 为我们创造了奇迹。我并不担心开发似乎已经停滞，因为它已经相当完整。

# android - 错误检查 MediaPlayer android

> ID：11067698
> 
> 赞同：1
> 
> 时间：2012-06-16T22:59:10.727
> 
> 标签：android, media-player, error-checking

我正在制作一个简单的媒体播放器应用程序，它从预定的 URL 下载歌曲，然后让用户播放、暂停和停止歌曲等。我现在唯一的问题是，如果用户在下载歌曲之前尝试播放歌曲，则应用程序强制关闭。

我的第一直觉是创建一个全局布尔标志，当我的下载服务下载文件时将其设置为 true，然后在我让 play.onclick 按钮运行播放服务之前使用该标志进行错误检查。

例如：

```
play.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if (downloadFlag == true){
                Intent intent = new Intent(getApplicationContext(), PlayService.class);
                intent.putExtra("key", 0);
                intent.putExtra("nkey", 0);
                startService(intent);   
                String artistFirst = url.substring(url.lastIndexOf('/')+1, url.lastIndexOf('_'));
                String artistLast = url.substring(url.lastIndexOf('_')+1, url.lastIndexOf('-'));
                String song = url.substring(url.lastIndexOf('-')+1, url.lastIndexOf('.'));
                tv_artist.setText("Artist: "+artistFirst+" "+artistLast);
                tv_song.setText("Song: "+song);
                final ImageView album = (ImageView) findViewById(R.id.imageView1);
                album.setImageResource(R.drawable.album);
            }
        }
    }); 
```

这是解决这个问题的好方法还是我应该寻求更优雅的解决方案？

编辑::找到解决方案

在应用程序启动时，我禁用播放按钮，然后在我的广播接收器中启用它（下载完成时捕获）

```
 Button play = (Button) ((Activity) context).findViewById(R.id.play);
    play.setEnabled(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:02:31.160

下载歌曲后添加听众（在您将标志设置为 true 的同一位置）。或者禁用该按钮并在下载歌曲时启用它。这样你就不必使用标志了。

```
play.setEnabled(false)
//...
play.setEnabled(true) 
```

# c++ - 在类中使用 C++ 返回子字符串

> ID：11067699
> 
> 赞同：-1
> 
> 时间：2012-06-16T22:59:30.553
> 
> 标签：c++, string, oop, error-handling, substring

所以我有一个子字符串函数，它接受子字符串的起始位置及其长度。有了它，它应该提取其中的字符并将它们作为字符串返回，而不实际使用任何字符串函数。

```
//default constructor that sets the initial string to the value "Hello World"
MyString::MyString()
{
    char temp[] = "Hello World";

    int counter(0);
    while(temp[counter] != '\0')
    {
            counter++;
    }
    Size = counter;
    String = new char [Size];
    for(int i=0; i < Size; i++)
            String[i] = temp[i];
 }

  //copy constructor
  MyString::MyString(const MyString &source)
 {

    int counter(0);
    while(source.String[counter] != '\0')
    {
            counter++;
    }
    Size = counter;
    String = new char[Size];
    for(int i = 0; i < Size; i++)
            String[i] = source.String[i];

 } 
```

这是我的子字符串函数：

```
MyString MyString::Substring(int start, int length)
{
 char* leo = new char[length+1];
    for(int i = start; i < start + length+ 1; ++i)
    {
            leo[i-start] = String[i];
    }

    MyString sub;
    delete [] sub.String;
    sub.String = leo;
    sub.Size = length+1;
    return sub;

} 
```

使用 main.cpp 文件中的代码：

```
 int main (int argc, char **argv)
 {
   MyString String1; // String1 must be defined within the scope

  const MyString ConstString("Target string");      //Test of alternate constructor 

 MyString SearchString;  //Test of default constructor that should set "Hello World". 

  MyString TargetString (String1); //Test of copy constructor

 cout << "Please enter two strings. ";

 cout << "Each string needs to be shorter than 256 characters or terminated by /\n." << endl;

 cout << "The first string will be searched to see whether it contains exactly the second string. " << endl;

cin >> SearchString >> TargetString; // Test of cascaded string-extraction operator

  if(SearchString.Find(TargetString) == -1) {

   cout << TargetString << " is not in " << SearchString << endl;
  }

   else {

   cout << TargetString << " is in " << SearchString << endl;

    cout << "Details of the hit: " << endl;

    cout << "Starting position of the hit: " << SearchString.Find(TargetString) << endl;

    cout << "The matching substring is: " << SearchString.Substring(SearchString.Find(TargetString), TargetString.Length()-1)<<"\n";
  } 
```

它返回：

请输入两个字符串。每个字符串必须少于 256 个字符或以 / 结尾。将搜索第一个字符串以查看它是否正好包含第二个字符串。

永远

更多的

morev 世界并非永远存在

关于为什么它实际上没有从用户输入中输出没有额外字符的单词有什么想法吗？我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T23:04:14.750

```
for(int i = start; i < length+1; i++) 
```

这不是你想要的方式。它应该是：

```
for (int i = start; i < start + length; ++i) 
```

你有一个错误的错误，一旦你意识到它在说什么，你的结束条件就没有意义了。

取一个从索引 2 开始，长度为 5 的子字符串。要复制的字符位于索引 2 到 6 处，符合条件。

但是，在内部，您还有另一个问题。除非`i`从 0 开始，否则您不会复制到正确的数组索引中。它应该是：

```
sub [i - start] = String [i]; 
```

这样，您将从`sub`索引 0 开始填充。

此外，一旦你完成，你需要空终止它：

```
sub [length] = '\0'; 
```

这样它就不会跑过终点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:12:06.263

您可以考虑使用以下[`std::copy`](http://www.cplusplus.com/reference/algorithm/copy/)算法：

```
MyString MyString::Substring(int start, int length)
{
    char* sub;
    sub = new char[length + 1];
    sub[length] = '\0';

    std::copy(String + start, String + start + length, sub);
    return MyString(sub);
} 
```

（我假设这`String`是对象的一些`char *`数据成员`MyString`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T23:06:16.713

```
MyString MyString::Substring(int start, int length)
{
    char* sub;
    sub = new char[length+1];
    sub[length] = '\0';
    int j = 0;
    for(int i = start; i < start + length; ++i)
    {
        sub[j] = String[i];
        ++j;
    }
    return MyString(sub);
} 
```

像这样的东西。

# c# - DotNetOpenAuth：让示例 OAuth 2.0 AuthorizationServer 工作

> ID：11067700
> 
> 赞同：1
> 
> 时间：2012-06-16T22:59:38.887
> 
> 标签：c#, oauth-2.0, dotnetopenauth

我正在确定一个框架，用于构建具有良好客户端库（没有很多）的本地 OAuth (2.0) Provider，乍一看，DotNetOpenAuth 似乎很理想，我很兴奋并想尝试这些示例.

我花了几天时间摆弄示例和源代码本身，但我仍然无法找到让 OAuth2\AuthorizationServer 示例正常工作的方法。示例适用于所有其他外部提供程序。我浏览了许多帖子以找出理想的设置、输入、设置以通过初始登录屏幕，但我没有运气。

有人可以分享启动和运行 OAuth2\AuthorizationServer 示例要遵循的初始步骤。包括数据库设置。我尝试单步执行代码但丢失了它。

珍惜你的时间。如果我能清楚地理解这些步骤，我很乐意记录这些步骤。我认为该框架非常好，但缺乏文档。再次感谢！

这是我得到的错误，

**DotNetOpenAuth.Messaging.ProtocolException：未找到 OpenID 端点。---> System.InvalidOperationException：序列不包含任何元素**

我使用依赖方 URI 作为输入，http:// localhost:59722 / http:// localhost:59722 /SampleWcf2.aspx

以及完整的堆栈跟踪，

```
DotNetOpenAuth.Messaging.ProtocolException: No OpenID endpoint found. ---> System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.CreateRequest(Identifier userSuppliedIdentifier, Realm realm, Uri returnToUrl) in d:\Temp\dotnetopenid\src\DotNetOpenAuth.OpenId.RelyingParty\OpenId\RelyingParty\OpenIdRelyingParty.cs:line 352
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.CreateRequest(Identifier userSuppliedIdentifier, Realm realm, Uri returnToUrl) in d:\Temp\dotnetopenid\src\DotNetOpenAuth.OpenId.RelyingParty\OpenId\RelyingParty\OpenIdRelyingParty.cs:line 354
   at OAuthAuthorizationServer.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl) in D:\Temp\dotnetopenid\samples\OAuthAuthorizationServer\Controllers\AccountController.cs:line 40
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

2012-06-15 16:08:03,490 (GMT+10) [16] DEBUG DotNetOpenAuth.Http - HTTP GET http://localhost:59722/SampleWcf2.aspx
2012-06-15 16:08:03,498 (GMT+10) [16] DEBUG DotNetOpenAuth.Yadis - HTML discovery failed to find any endpoints.
2012-06-15 16:08:03,498 (GMT+10) [16] INFO  DotNetOpenAuth.Yadis - Performing discovery on user-supplied identifier: http://localhost:59722/SampleWcf2.aspx
2012-06-15 16:08:03,498 (GMT+10) [16] DEBUG DotNetOpenAuth.Yadis - Filtering and sorting of endpoints did not affect the list.
2012-06-15 16:08:03,578 (GMT+10) [16] ERROR DotNetOpenAuth.OAuthAuthorizationServer - An unhandled exception occurred in ASP.NET processing: DotNetOpenAuth.Messaging.ProtocolException: No OpenID endpoint found. ---> System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.CreateRequest(Identifier userSuppliedIdentifier, Realm realm, Uri returnToUrl) in d:\Temp\dotnetopenid\src\DotNetOpenAuth.OpenId.RelyingParty\OpenId\RelyingParty\OpenIdRelyingParty.cs:line 352
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.CreateRequest(Identifier userSuppliedIdentifier, Realm realm, Uri returnToUrl) in d:\Temp\dotnetopenid\src\DotNetOpenAuth.OpenId.RelyingParty\OpenId\RelyingParty\OpenIdRelyingParty.cs:line 354
   at OAuthAuthorizationServer.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl) in D:\Temp\dotnetopenid\samples\OAuthAuthorizationServer\Controllers\AccountController.cs:line 40
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
DotNetOpenAuth.Messaging.ProtocolException: No OpenID endpoint found. ---> System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.CreateRequest(Identifier userSuppliedIdentifier, Realm realm, Uri returnToUrl) in d:\Temp\dotnetopenid\src\DotNetOpenAuth.OpenId.RelyingParty\OpenId\RelyingParty\OpenIdRelyingParty.cs:line 352
   --- End of inner exception stack trace ---
   at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty.CreateRequest(Identifier userSuppliedIdentifier, Realm realm, Uri returnToUrl) in d:\Temp\dotnetopenid\src\DotNetOpenAuth.OpenId.RelyingParty\OpenId\RelyingParty\OpenIdRelyingParty.cs:line 354
   at OAuthAuthorizationServer.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl) in D:\Temp\dotnetopenid\samples\OAuthAuthorizationServer\Controllers\AccountController.cs:line 40
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

**强文本**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:19:27.093

听起来您将 OAuth 2.0 授权服务器与 OpenID 2.0 提供者混淆了。他们完全不同。当“登录”到授权服务器示例时，这似乎是您原始问题中的故障点，您需要输入有效的 OpenID。您尝试的 URL 似乎是 OAuth 2.0 客户端示例的 URL，它不是 OpenID。

您应该使用 OpenIdProvider 示例提供的标识符登录到授权服务器，或者（最容易）如果您有 Yahoo 帐户，则使用“yahoo.com”或“tinyurl.com/googop”使用 Google 登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:17:28.310

除非我弄错了（这并非完全不可能），否则该`AuthorizationServer`示例几乎可以充当网关，通过向用户授权 OpenID 提供程序来验证 OAuth 请求。您可以尝试输入 OpenID 提供者 URL，而不是放入依赖方的 URL。（即使是为了测试，您应该可以使用[您可能拥有帐户的任何公共提供商](http://openidexplained.com/get)）

# android - 运行应用程序但不是从启动器

> ID：11067704
> 
> 赞同：2
> 
> 时间：2012-06-16T23:00:09.397
> 
> 标签：android, android-intent, android-service

我正在开发一个 android 服务应用程序，它会对一些意图做出反应。如您所知，在第一次启动应用程序之前不会触发意图。因为我的应用程序不是交互式的，所以我不希望它显示在启动器（应用程序列表）中。我可以通过删除来做到这一点

```
<category android:name="android.intent.category.LAUNCHER"/> 
```

从清单文件，但在那之后，我如何执行应用程序，因为它没有显示在任何地方？:|

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:09:56.233

> 我如何执行该应用程序，因为它没有在任何地方显示？

所以你必须使用[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)这样类似的主题，你可以在其中找到类似的解决方案。检查[这个](https://stackoverflow.com/questions/7414272/how-to-launch-an-android-app-without-android-intent-category-launcher)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:35:28.727

第一次启动应用程序后禁用启动器图标怎么样？

[http://www.helloandroid.com/tutorials/removing-app-icon-launcher](http://www.helloandroid.com/tutorials/removing-app-icon-launcher)

虽然这

> 该图标只会在启动器重新启动时消失，因此很可能在下次手机重新启动时，不建议强制启动器重新启动”

不好听……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T00:25:37.617

如果您的应用程序是基于服务的，响应意图，为什么需要执行它？意图不会启动您的应用程序吗？

确保在清单中包含正确的意图过滤器。没有它们，意图将不会触发您的服务。

[http://developer.android.com/guide/topics/manifest/intent-filter-element.html](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)

# php - php javascript facebook sdk access_token

> ID：11067706
> 
> 赞同：-1
> 
> 时间：2012-06-16T23:00:35.373
> 
> 标签：php, javascript, facebook, facebook-graph-api

我正在使用用于 php/javascript 的股票 SDK。现在，我正在构建它的许多部分的应用程序，如果用户批准使用并接受权限作为 facebook 之上的一个层。计划让我的应用程序与它进行几乎交互的地方，就好像用户当时已登录一样。

以前我正在使用offline_access，但我最近读到该权限完全来自api，并且很快任何已经存在的令牌都将转换为60天令牌。我从阅读的内容中知道，如果用户登录我的应用程序时需要，我可以每天更新令牌。但我无法弄清楚的两个最大问题是。

我如何确保我获得“长期存在”的令牌，并使用这些令牌将它们存储在我的末端并通过 api 将它们传递给 FB，或者 facebook 是否存储这些并通过使用 api 的方式和我不需要将它们存储在某个地方。我目前知道，当我登录时它会生成一个令牌并将其存储在一个 php 会话中，但该会话通常只在用户使用我的应用程序期间有效。请注意，这也是一个桌面应用程序，而不是 facebooks 画布中的应用程序。

如果我必须存储令牌以使用它们，并且 php sdk 以会话中存储的内容为基础，我是否使用存储的访问令牌为用户重新创建会话，或者我不知道，我在输入时让自己感到困惑，希望有人可以为我阐明这个主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:52:44.987

在这里您可以找到有关如何处理过期令牌的一些帮助，
[https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

这里有更多关于如何使用新方法的信息，
[Facebook 离线访问分步](https://stackoverflow.com/questions/1059640/facebook-offline-access-step-by-step)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:30:45.360

这一切也总是让我怀疑，但我注意到 facebook 通常将令牌保存在用户端的某个地方，可能是一个 cookie，以便它会自动连接。所以我不认为令牌只持续一个会话，我宁愿说你不会对offline_access的折旧有太多问题，尽管这可能只是我个人的看法。

# jquery - 使用 jQuery 处理并将 json 数据转换为选项选择器

> ID：11067713
> 
> 赞同：1
> 
> 时间：2012-06-16T23:01:28.960
> 
> 标签：jquery

所以我有一个`$.post`，返回一些`json_encode($array);`

`$array`是一维的，它包含数字：2、4、6。

所以现在`data`持有 json 数据，我该如何循环并为我的`#time`选择器设置选项？和`value=""`显示文本应该是数组中的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:03:58.397

像这样的东西应该工作：

```
$.each(data, function(i, val) {
    $("<option />").text(val).val(val).appendTo("#time");
}​);​ 
```

**演示：http:** [//jsfiddle.net/tmSqR/](http://jsfiddle.net/tmSqR/)

* * *

**更新。**您的数据未从字符串格式解码为 JSON。在进行迭代之前添加`dataType`属性`$.post`或使用。`data = JSON.parse(data)`

**演示：http:** [//jsfiddle.net/tmSqR/1/](http://jsfiddle.net/tmSqR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:12:30.410

也许你想这样做：

```
var s = $('select#time');
s.empty();
$.each(data, function(key, value){
  s.append($("<option />").text(value).val(key);
  //or 
  s.append($("<option value="key">value</option>"); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T23:18:31.980

实际上`json_encode($array)`from返回的数据`PHP`是 javascript 中的字符串，需要先转换为对象才能循环，所以`$.parseJSON`在循环开始之前使用

```
var obj=$.parseJSON(data);
$.each(obj, function(k, v) {
    $("<option />").text(v).val(v).appendTo("#time");
});​ 
```

[**演示。**](http://jsfiddle.net/heera/SQBZM/)

# wpf - 选中时 WPF 更改 ListboxItem 背景颜色

> ID：11067720
> 
> 赞同：0
> 
> 时间：2012-06-16T23:03:15.420
> 
> 标签：wpf, pixelsense

我有一个surfacelistbox如下

```
<s:SurfaceListBox x:Name="viewList" Height="200" Width="Auto" SelectedIndex="0"
                ItemsSource="{Binding Source={StaticResource views}, XPath=Views/View}"
                DisplayMemberPath="@Title"                    
                SelectionChanged="viewList_SelectionChanged" Grid.Row="2" VerticalAlignment="Bottom" HorizontalContentAlignment="Stretch" ScrollViewer.VerticalScrollBarVisibility="Disabled">
        <s:SurfaceListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch"/>
            </ItemsPanelTemplate>
        </s:SurfaceListBox.ItemsPanel>
    </s:SurfaceListBox> 
```

我已经为 App.xaml 文件中的项目设置了如下样式

```
<Style TargetType="{x:Type s:SurfaceListBoxItem}">

        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" 
                     Color="#0071bc"/>
        </Style.Resources>
        <Setter Property="Height" Value="200"></Setter>
        <Setter Property="Width" Value="480"></Setter>
        <Setter Property="BorderThickness" Value="0,0,0,0"></Setter>
        <Setter Property="Padding" Value="20,20,0,20"></Setter>
        <Setter Property="Margin" Value="0"></Setter>
        <Setter Property="Foreground" Value="White"></Setter>
        <Setter Property="BorderBrush" Value="White"></Setter>
        <Setter Property="FontSize" Value="57"></Setter>
        <Setter Property="FontFamily" Value="TitilliumText22L"></Setter>
        <Setter Property="FontWeight" Value="Bold"></Setter>
        <Setter Property="TextBlock.TextAlignment" Value="Left"></Setter>
        <Setter Property="TextBlock.HorizontalAlignment" Value="Stretch"></Setter>
        <Setter Property="Background">
            <Setter.Value>
                <LinearGradientBrush>
                    <GradientStop Color="#3c3c3c" Offset="0"></GradientStop>
                    <GradientStop Color="#383838" Offset="0.6"></GradientStop>
                    <GradientStop Color="#6d6e6e" Offset="1"></GradientStop>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Foreground" Value="White"></Setter>
                <Setter Property="BorderBrush" Value="#0071bc"></Setter>
                <Setter Property="Background" Value="#0071bc"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

我的问题是，所选项目的背景颜色保持白色，而不是样式中描述的颜色。任何指针将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:11:12.550

不确定您是否找到了答案，但我遇到了同样的问题。尝试以您的风格设置表面颜色资源。您可以在此处找到表面颜色列表：http: [//msdn.microsoft.com/en-us/library/microsoft.surface.presentation.surfacecolors_properties.aspx](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.surfacecolors_properties.aspx)

确保导入 SurfaceColors 的命名空间

```
xmlns:sc="clr-namespace:Microsoft.Surface.Presentation;assembly=Microsoft.Surface.Presentation" 
```

然后更新 SurfaceListBox 样式中的表面颜色：

```
<s:SurfaceListBox>
     <s:SurfaceListBox.ItemContainerStyle>
         <Style TargetType="s:SurfaceListBoxItem">
              <Style.Resources>
                 <SolidColorBrush x:Key="{x:Static sc:SurfaceColors.ListBoxItemSelectionBackgroundBrushKey }" Color="#FFA2CD65"/>
              </Style.Resources>
          </Style>
     </s:SurfaceListBox.ItemContainerStyle>
</s:SurfaceListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:26:05.753

看起来您正在尝试创建自己的 ListBox。通常不需要这样做，但如果您觉得必须这样做，请确保覆盖 GetContainerForItemOverride 方法

```
 protected override DependencyObject GetContainerForItemOverride()
    {
        return new SurfaceListBoxItem();
    } 
```

# php - PDO::FETCH_ASSOC PDO::FETCH_ARRAY 是什么？

> ID：11067721
> 
> 赞同：4
> 
> 时间：2012-06-16T23:03:30.973
> 
> 标签：php, pdo

```
<?php
$sth = $dbh->prepare("SELECT name, colour FROM fruit");
$sth->execute();

/* Fetch all of the remaining rows in the result set */
print("Fetch all of the remaining rows in the result set:\n");
$result = $sth->fetchAll();
print_r($result);
?> 
```

上面的示例将获取结果集中所有剩余的行并输出类似于：

```
Array
(
    [0] => Array
        (
            [NAME] => pear
            [0] => pear
            [COLOUR] => green
            [1] => green
        )

    [1] => Array
        (
            [NAME] => watermelon
            [0] => watermelon
            [COLOUR] => pink
            [1] => pink
        )

) 
```

是否有任何选项可以得到类似`my_sql_fetch_array`返回的结果，如下所示：

```
Array
(
    [0] => Array
        (

            [0] => pear
            [1] => green
        )

    [1] => Array
        (

            [0] => watermelon             
            [1] => pink
        )

) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T23:11:25.043

来自[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

```
$result = $sth->fetchAll(PDO::FETCH_NUM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T03:00:33.990

尝试使用这个

```
$data = $sth->fetch();
print_r($data); 
```

希望它会帮助你。

# java - 用 ZXing 编码和解码 byte[]

> ID：11067723
> 
> 赞同：9
> 
> 时间：2012-06-16T23:04:13.407
> 
> 标签：java, android, character-encoding, zxing, iso-8859-1

我正在开发一个 Android 应用程序，我需要在使用 ZXing 应用程序生成的 QRCode 中对字节数组进行编码和解码。我的问题是我解码的消息与生成的字节数组不完全匹配。我试图创建一个基于包含递增索引的字节数组的二维码，即

```
input = [0, 1, 2, ..., 124, 125, 126, 127, -128, -127,... -3, -2, -1, 0, 1, 2, ...] 
```

在 QRCode 中对消息进行编码并在响应端对其进行解码后，我得到以下字节数组输出：

```
output = [0, 1, 2, ..., 124, 125, 126, 127, 63, 63,... 63, 63, 63, 0, 1, 2, ...] 
```

所有“负”字节值都转换为 ASCII char 63: '?' 问号字符。我认为编码字符集出了点问题，但由于我使用的是 ISO-8859-1，每个人都声称它是此类问题的解决方案（[其他主题处理相同类型的问题](https://stackoverflow.com/a/2489611/1424133)或[此处](http://code.google.com/p/zxing/issues/detail?id=103)），我不看不出我的错误在哪里，或者我是否在编码或解码的实例化过程中跳过了一个步骤。这是我执行以对给定字节数组进行编码的代码：

```
String text = "";
byte[] res = new byte[272];
for (int i = 0; i < res.length; i++) {
    res[i] = (byte) (i%256);
}
try {
    text = new String(res, "ISO8859_1");
} catch (UnsupportedEncodingException e) {
    // TODO
}
Intent intent = new Intent(Intents.Encode.ACTION);
Intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
intent.putExtra(Intents.Encode.TYPE, Contents.Type.TEXT);
intent.putExtra(Intents.Encode.FORMAT, "ISO8859_1");
intent.putExtra(Intents.Encode.DATA, text);
intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());

boolean useVCard = intent.getBooleanExtra(USE_VCARD_KEY, false);
QRCodeEncoder qrCodeEncoder = new QRCodeEncoder(activity, intent, dimension, useVCard);
Bitmap bitmap = qrCodeEncoder.encodeAsBitmap(); 
```

为了解码 QRCode，我发送以下 Intent

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.qrcodeDecoding);

    Intent intent = new Intent(Intents.Scan.ACTION);
    intent.putExtra(Intents.Scan.MODE, Intents.Scan.QR_CODE_MODE);
    startActivityForResult(intent, 0);
} 
```

并等待结果：

```
@Override
protected void onActivityResult(int request, int result, Intent data)
{
    if(request == 0)
    {
        //action
        if(result == RESULT_OK)
        {
            String res = data.getStringExtra(Intents.Scan.RESULT);
            byte[] dat = null;

            try{
                    dat = res.getBytes("ISO8859_1");
            } catch(UnsopportedEncodingException e) {
                    //TODO
            }
        }
        else if(result == RESULT_CANCELED)
        {
            //TODO
        }
    }

} 
```

你能告诉我我的错误在哪里，或者我应该在哪里看？

十分感谢，

弗兰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-22T20:28:56.043

在我的一个应用程序中，我需要对使用 ZXing 应用程序生成的 QRCode 中的字节数组进行编码和解码。由于字节数组包含压缩文本数据，我想避免使用 base64 编码。可以这样做，但由于我到目前为止还没有看到完整的代码片段集，所以我将它们发布在这里。

编码：

```
public void showQRCode(Activity activity, byte[] data){
  Intent intent = new Intent("com.google.zxing.client.android.ENCODE");
  intent.putExtra("ENCODE_TYPE", "TEXT_TYPE");
  intent.putExtra("ENCODE_SHOW_CONTENTS", false);
  intent.putExtra("ENCODE_DATA", new String(data, "ISO-8859-1"));
  activity.startActivity(intent);
} 
```

开始扫描：

```
public static void startQRCodeScan(Activity activity){
  Intent intent = new Intent(com.google.zxing.client.android.SCAN);
  intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
  intent.putExtra("CHARACTER_SET", "ISO-8859-1");
  activity.startActivityForResult(intent, 0);
} 
```

扫描结果处理程序：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
  byte[] result = intent.getStringExtra("SCAN_RESULT").getBytes("ISO-8859-1");
  ...
} 
```

我认为在开始扫描的意图数据中没有将 CHARACTER_SET 设置为 ISO-8859-1 是导致原始问题代码失败的原因。我花了很长时间才弄清楚这个问题，因为我在任何地方都没有看到这个清晰的帖子，而且拉丁 1 编码是 Xzing 中 QR 码的标准编码。尤其棘手的是，Xzing 在线解码器[http://zxing.org/w/decode.jspx](http://zxing.org/w/decode.jspx)也没有设置 CHARACTER_SET，因此在此站点上解码时生成的 QR 码看起来有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T01:54:59.970

您错误地认为可以将任意二进制数据转换为有效字符串，而无需使用某种装甲。它不起作用。Binary -> text -> binary 使用任何标准字符集/编码都是有损的。（提示：使用 UTF-8 也不起作用。）

您应该使用 base64 编码或十六进制编码之类的东西来确保二进制数据不会被破坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T10:26:18.900

从概念上讲，二维码编码的是文本，而不是字节。当然，它们在内部将输入转换为一系列字节，尽管这对调用者来说是不透明的。你是对的，碰巧选择正确的编码会让你偷偷通过，ISO-8859-1 是正确的选择。实际上，它确实有效。

ASCII 是不可能的，因为它没有为 >= 128 定义字符，而且 UTF-8 绝对行不通

这里的问题可能是您的代码。我不确定你在这里尝试什么......看起来你正在设置发送某个`Intent`地方（到条形码扫描仪？）但是你没有，你只是在制作一个`Intent`并将它发送到一些代码你从项目中复制？我想你如何为`Intent`.

如果您在应用程序中执行此操作，这应该会简单得多。只需`QRCodeEncoder.encodeAsBitmap()`直接重用并删除其余部分。

# c++ - 当 VISUAL_ID 和 screen->root_visual 不相等时，glXCreateWindow 不起作用

> ID：11067725
> 
> 赞同：1
> 
> 时间：2012-06-16T23:04:22.267
> 
> 标签：c++, c, x11, glx, xcb

我正在处理与此非常相似的代码：

[http://xcb.freedesktop.org/opengl/](http://xcb.freedesktop.org/opengl/)

当我使用默认的帧缓冲区配置时它工作正常，尽管当我尝试查询某个它失败时。我已经确定它在任何时候都会失败`VISUAL_ID`（`visualID`在示例代码中）并且`screen->root_visual`是不同的值。

这是错误消息：

```
X Error of failed request:  BadWindow (invalid Window parameter)
  Major opcode of failed request:  135 (GLX)
  Minor opcode of failed request:  31 (X_GLXCreateWindow)
  Resource id in failed request:  0x1600003
  Serial number of failed request:  32
  Current serial number in output stream:  34 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:14:07.443

最可能的事件是`xcb_create_window()`调用失败（使用`xcb_create_window_checked()`和`xcb_request_check()`来验证）。它失败是因为`COPY_FROM_PARENT`被指定为深度，它与所需的视觉深度不匹配。

您应该查询您正在使用的视觉效果的深度，并将其传递给`xcb_create_window()`.

**更新**如果您创建一个深度与其父级不同的窗口，您必须指定边框像素，可能还有背景像素和颜色图，请参见例如[this question](https://stackoverflow.com/q/3645632/775806)。

# javascript - 将 SPAN 包裹在 DIV 中的所有数字周围

> ID：11067726
> 
> 赞同：4
> 
> 时间：2012-06-16T23:04:23.623
> 
> 标签：javascript, numbers, html

我试图在 div 中的所有数字周围包裹一个跨度，以便我可以相应地设置它们的样式。

我已经搜索了一些 javascript 来执行此操作，但无法定位 div 中的所有数字。

它将被复制并粘贴到文本区域中的圣经经文。我想设计其中的所有数字。类似于此站点在此处的操作：http: [//marshill.com/media/trial/trial-and-jesus#scripture](http://marshill.com/media/trial/trial-and-jesus#scripture)

在“圣经”选项卡下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T23:11:47.727

这里：

```
elem.innerHTML = elem.innerHTML.replace( /\b(\d+)\b/g, '<span>$1</span>' ); 
```

**现场演示：http:** [//jsfiddle.net/ujA86/](http://jsfiddle.net/ujA86/)

# c++ - 如何使用 Cocoa 改变鼠标位置差异？

> ID：11067728
> 
> 赞同：0
> 
> 时间：2012-06-16T23:05:09.943
> 
> 标签：c++, macos, cocoa, opengl

我正在使用 opengl 并尝试创建第一人称相机。所有示例都使用 GLUT，我需要在可可中获取鼠标差异。但是我遇到了一些与 mouseMoved 相关的问题，一旦鼠标移动就会被调用（这是可以预料的）。有没有办法使这个mroe准确？还是类似 GLUTS glutMouseFunc 的函数？

当前尝试：

```
-(void)mouseMoved:(NSEvent *)event{
        static bool wrap = false;

        if(!wrap){
            NSPoint eventLocation = [event locationInWindow];

            float centerX = self.frame.size.width/2 + [self window].frame.origin.x;
            float centerY = self.frame.size.height/2 + [self window].frame.origin.y;
            CGPoint mousePointCenter = CGPointMake(centerX, centerY);
            CGWarpMouseCursorPosition(mousePointCenter);

            int dx = eventLocation.x - self.frame.size.width/2 ;
            int dy = eventLocation.y - self.frame.size.height/2 ;

            const float mousespeed = 0.001;

            angles.x += dx * mousespeed;
            angles.y += dy * mousespeed;

            if(angles.x < -M_PI)
              angles.x += M_PI * 2;
            else if(angles.x > M_PI)
              angles.x -= M_PI * 2;

            if(angles.y < -M_PI / 2)
              angles.y = -M_PI / 2;
            if(angles.y > M_PI / 2)
              angles.y = M_PI / 2;

            lookat.x = sinf(angles.x) * cosf(angles.y);
            lookat.y = sinf(angles.y);
            lookat.z = cosf(angles.x) * cosf(angles.y);

           CGWarpMouseCursorPosition(mousePointCenter);

          [self setNeedsDisplay:YES];
        }
        else{
            wrap = true;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:40:23.953

我不确定我是否遵循了您的代码应该做的事情，但是反复将鼠标光标弯曲到中心点很少是正确的做法。

首先，您可以使用 的`deltaX`和`deltaY`值`NSEvent`。

也许您想`CGAssociateMouseAndMouseCursorPosition(false)`将鼠标与光标位置分离。当您这样做时，屏幕上的光标不再随鼠标移动。你可以隐藏它或重新定位它（是的，在这种情况下你会扭曲它一次）。此外，事件的绝对位置不再发生变化。但它们仍然带有反映鼠标移动的增量移动值。

# java - 为什么静态方法中不允许使用“this”？

> ID：11067735
> 
> 赞同：-2
> 
> 时间：2012-06-16T23:06:24.583
> 
> 标签：java, static

我知道`this`代表调用方法的对象，并且`static`方法未绑定到任何对象，但我的问题仍然是您可以在类对象上调用静态方法。

为什么 java 提供了这个东西而不是 for `this`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T23:09:11.250

`this`指向类的当前实例。

静态方法与一个类相关联，而不是与一个实例相关联，因此没有什么`this`可以指向的。

这是一个例子：

```
public class Foo {
    private String name; 

    public static void someClassMethod() { System.out.println("associated with a class"); }

    public Foo(String n) { this.name = n; }

    public String getName() { return this.name; }
    public void setName(String n) { this.name = n; }
    public void doAnotherThing() { 
       Foo.someClassMethod();   // This is what is really happening when you call a static method in an non-static method.
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T23:10:23.143

简单的答案：`this`没有在非静态方法之外定义。

在实例上调用静态方法是一种语法简写，我不同意它应该存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T23:09:59.660

从每个角度来看，`this`总是意味着**这个对象**，所以给*这个类*赋予意义的可能性可能会导致多个错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T23:13:17.163

这里的区别在于**类**和**对象**之间。对对象调用非静态方法，对类调用静态方法。

您可以将类视为构建对象的蓝图。一个类`House`有一个静态方法`hasDoor()`（它将返回`true`），而该类型的对象`House`可以有一个方法`openDoor()`。你无法打开蓝图的大门。

一个可以打电话`House.hasDoor()`，但不能`House.openDoor()`。一个可以打电话

```
House h = new House();
h.openDoor(); 
```

虽然你可以打电话`h.hasDoor()`，但这有点讨厌，在大多数情况下应该避免

# delphi - 压缩文件夹

> ID：11067741
> 
> 赞同：9
> 
> 时间：2012-06-16T23:08:25.370
> 
> 标签：delphi, delphi-xe

我正在尝试使用

```
TZipFile.ZipDirectoryContents() 
```

像这样：

```
TZipFile.ZipDirectoryContents('Test.PCF', WorkingDir); 
```

如果我没看错，它应该将文件夹“workingdir”的内容保存到名为 Test.pcf 的文件中。

现在当我这样做时，我得到错误::

```
Raised exception class EFOpenError with message Cannot open file
...test.pcf. The process cannot access the file because its being used by another process." 
```

有两件事让我感到困惑：

1.  它说它无法打开文件。还没有 test.pcf。我希望这会创造它。

2.  它说无法访问文件。这是因为它还没有创建吗？我在使用这个功能吗？如果是这样，我将如何从文件夹位置创建一个 zip 文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-17T01:39:54.037

我测试了您的代码，它以与您报告的相同的方式失败。

然后我通过运行 WinZip 手动创建了一个空的 zip 文件。

*然后*运行你的代码，它运行良好。

似乎 zip 文件必须已经存在才能使 ZipDirectoryContents 工作。

以编程方式创建 zip 文件：

```
 myZipFile := TZIpFile.Create;
  myZipFile.Open('c:\myfolder\newzipfile.zip', TZipMode.zmWrite);
  myZipFile.Close;
  myZipFile.Free; 
```

然后这条线将起作用：

```
 TZipFile.ZipDirectoryContents('c:\myfolder\newzipfile.zip', WorkingDir); 
```

# php - 通过 PDO 和 mysql 从潜在的不安全输入创建新数据库

> ID：11067744
> 
> 赞同：5
> 
> 时间：2012-06-16T23:08:47.507
> 
> 标签：php, mysql, pdo, prepared-statement

我正在自动化我编写的软件的部署，并且需要能够为新帐户生成新的 mysql 数据库。但是，在清理输入时，我感到担忧。

我正在使用 PDO；但是，显然您不能将准备好的语句与“CREATE DATABASE”一起使用。所以，我也尝试使用 PDO::quote; 但是，然后我新创建的数据库名称用单引号括起来（不是世界末日，但我仍然想避免这种情况）。

有没有办法让它与准备好的语句一起工作？如果没有，我该怎么做才能尽可能保护自己免受 sql 注入攻击？我唯一的另一个想法是允许一个小的字符白名单。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:23:48.413

您需要编写一个[存储过程](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)，然后您可以将经过清理的输入传递给该过程（使用我的示例，您需要更改一些变量，例如数据库名称和正确的用户并传递等，以使其在您的当然是数据库）

例子：

```
<?php
$dsn = 'mysql:dbname=scratch;host=127.0.0.1';
$user = 'root';
$password = '';

try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$dbname = 'brand_new_db';

$statement = $dbh->prepare("CALL dbcreator(:db)");
$statement->bindParam(':db',$dbname);

if(!$statement->execute()){
    print_r($statement->errorInfo());
}
else {
    foreach( $dbh->query('SHOW DATABASES')->fetchAll() as $row){
        print "$row[0]" . PHP_EOL;
    }
} 
```

存储过程：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `scratch`.`dbcreator` $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `dbcreator`(IN dbname VARCHAR(64))
BEGIN

SET @db = dbname;
SET @statement = CONCAT('CREATE DATABASE ',@db);
PREPARE prepared_statement FROM @statement;
EXECUTE prepared_statement;

END $$

DELIMITER ; 
```

[您为PREPARE](http://dev.mysql.com/doc/refman/5.6/en/prepare.html)创建一个 SQL 语句，在我们的例子中，`CREATE DATABASE <our database>;`因为该`CREATE DATABASE`语句不适用于变量，然后您只需[执行](http://dev.mysql.com/doc/refman/5.6/en/execute.html)它。最后，您`CALL dbcreator('<dbname>')`执行存储过程。就是这样`CALL dbcreator(:dbname)`，您可以使用并将参数绑定到。

如您所见，这样您仍然可以在创建数据库时通过 pdo 安全地绑定您的参数。不过，为您创建的所有数据库添加一些固定的短字符串前缀可能不是一个坏主意，以便于查找和区分。在存储过程中，dbname[限制为 64 个字符](http://dev.mysql.com/doc/refman/5.6/en/identifiers.html)，因为这是 mysql 的当前限制

# c# - 打印 HasMorePages 不起作用 c#

> ID：11067746
> 
> 赞同：2
> 
> 时间：2012-06-16T23:08:49.833
> 
> 标签：c#, printing

好吧，所以我一直在环顾四周（在 SO 和 Google 上），看看一个问题是否可以解决我的错误，但显然不能，所以这里是：

我正在尝试打印有时会超过一页的内容，并且正在检查要打印的页数。在检查了所有这些逻辑之后，我使用该`HasMorePages`属性来设置是否有另一个页面。这是我的代码：

```
int currentpage = 0;
int pagesleft = 0;
private void doc_PrintPage(object sender, PrintPageEventArgs ev)
{
    ev.Graphics.Clear(Color.White);
    int numofpages = (int)Math.Ceiling((double)(numofwords / 29.0));
    numofpages = (int)Math.Ceiling((double)(numofwords / 29.0));
    currentpage = currentpage + 1;
    if(currentpage == 1)
    {
        pagesleft = numofpages;
    }
    if (numofwordsleft >= 29)
    {
        currentwords = 29;
    }
    else
    {
        currentwords = numofwordsleft;
    }
    Font f19 = new Font("Arial", (float)19);
    Font f9 = new Font("Arial", (float)9);            

    ev.Graphics.DrawString("Pages: "+numofpages.ToString()+"         Words: "+numofwords.ToString()+"     "+currentwords.ToString(), f19, Brushes.Red, 200, 300);
    ev.Graphics.DrawString("Words Left: "+numofwordsleft, f19, Brushes.Green, 200, 500);

    ev.Graphics.DrawString("Pages: "+numofpages.ToString()+"       Current Page: "+currentpage.ToString(), f19, Brushes.Blue, 200, 700);

    numofwordsleft = numofwordsleft - currentwords;
    pagesleft = pagesleft - 1;

    //currentpage++;
    //if (currentpage != numofpages && currentpage < numofpages && pagesleft > 0 && pagesleft != 0)
    if(currentpage < numofpages)
    {
        ev.HasMorePages = true;
    }
    else 
    {
        ev.HasMorePages = false;
    }
} 
```

现在一切正常，但是当我尝试打印多页时，它会打印 2 页。我做了一些调试，发现了这个：

![在此处输入图像描述](../Images/875e4fa009030c44fe6ba7cb39d4e9d8.png)

所以`HasMorePages`等于`false`所以它应该只打印一页。我按下了继续调试，它在最后再次到达断点。因为我一开始就清除了页面，所以我只看到了第二页（在 a 中`printpreview`），但是`printpreview`说只有一页，唯一显示的页面是第二页。

这是`printpreview`：

![在此处输入图像描述](../Images/927ed14bdc3f0d15bda60cef888b87e7.png)

对于蓝色文本，我正在这样做：

```
ev.Graphics.DrawString("Pages: "+numofpages.ToString()+"    Current Page: "+currenpage.ToString(), ...); 
```

打印预览清楚地表明它在第 1 页。

对不起，很长的帖子，但我需要帮助。如果您可以帮助我/指出解决此问题的正确方向，请在此处发布。

谢谢！

编辑：所以当我尝试打印 2 页时，使用：

```
int numofpages = Math.Ceiling(39.0 / 29.0); 
```

它打印 3 页，但都在同一页上，如图所示，`PrintPreview`除非它不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:44:44.810

尝试这个

```
 int currentpage = 0;
    int pagesleft = 0;
    int numofwordsleft = 0;
    int currentwords = 0;//For testing
    int numofwords = 120; // For testing
    private void doc_PrintPage(object sender, PrintPageEventArgs ev)
    {
        ev.Graphics.Clear(Color.White);
        int numofpages = (int)Math.Ceiling((double)(numofwords / 29.0));
        numofpages = (int)Math.Ceiling((double)(numofwords / 29.0));
        currentpage = currentpage + 1;
        if (currentpage == 1)
        {
            pagesleft = numofpages;
        }
        if (numofwordsleft >= 29)
        {
            currentwords = 29;
        }
        else
        {
            currentwords = numofwordsleft;
        }
        Font f19 = new Font("Arial", (float)19);
        Font f9 = new Font("Arial", (float)9);

        ev.Graphics.DrawString("Pages: " + numofpages.ToString() + "         Words: " + numofwords.ToString() + "     " + currentwords.ToString(), f19, Brushes.Red, 200, 300);
        ev.Graphics.DrawString("Words Left: " + numofwordsleft, f19, Brushes.Green, 200, 500);

        ev.Graphics.DrawString("Pages: " + numofpages.ToString() + "       Current Page: " + currentpage.ToString(), f19, Brushes.Blue, 200, 700);

        numofwordsleft = numofwordsleft - currentwords;
        pagesleft = pagesleft - 1;

        //currentpage++;
        //if (currentpage != numofpages && currentpage < numofpages && pagesleft > 0 && pagesleft != 0)
        if (currentpage < numofpages)
        {
            ev.HasMorePages = true;
        }
        else
        {
            ev.HasMorePages = false;
        }
    } 
```

希望这可以帮助。这是我在更改字数后得到的预览。 ![打印预览屏幕截图](../Images/52b7163c6534cbb3f826b573110796d8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:26:44.690

尝试以下方法：

```
int currentpage = 0;
private void doc_PrintPage(object sender, PrintPageEventArgs ev)
{
    ev.Graphics.Clear(Color.White);
    int numofpages = (int)Math.Ceiling((double)(numofwords / 29.0));
    currentpage++;
    // Print some graphics onto ev.Graphics
    ev.HasMorePages = (currentpage < numofpages)
} 
```

不要忘记包括 currentpage=0; 在开始新的打印之前！

更新：

您的打印通过单击按钮或菜单项单击或其他方式开始。假设您使用一个按钮，预期（至少）是这样的：

```
private void cmdStartPrint_Click(object sender, System.EventArgs e)
{
    currentpage = 0;
    PrintDocument pd = new PrintDocument();
    pd.PrintPage  += new PrintPageEventHandler(this.doc_PrintPage);
    pd.Print();
} 
```

还有一个提示：处理一次性的（包括 pd）

# arduino - 如何从 Arduino 查询网站

> ID：11067750
> 
> 赞同：0
> 
> 时间：2012-06-16T23:09:10.900
> 
> 标签：arduino

我正在建立一个网站，我希望我的 Arduino Uno（通过 USB 连接到我的本地机器）在每次到达网站上的某个页面时执行。（例如，当有人注册我们的服务时闪烁灯。）我没有以太网屏蔽。有替代方案吗？

我想出的唯一方法是从网站反复下载一个日志文件到我的本地机器，并在我的 Arduino 上运行一个循环查询该日志文件的内容，但是不断的请求会给我带来太大的压力服务器。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:48:39.713

当服务器上请求该页面时，您可以运行一个程序，该程序会向控制 Arduino 的本地机器发出信号。实施取决于您正在运行的 Web 服务器以及内容是否是静态的。但即使它只是一个简单的静态 html 页面，该页面也可以包含对该服务的请求，就像 html 页面包含对包含图像的请求一样。您的本地计算机将需要一个静态 IP 地址。如果本地计算机位于通用路由器后面的不同网络上，您可能需要将端口转发到静态地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:37:01.273

最终想通了，在这里的帮助下：

[http://labs.arduino.cc/NET/GettingStarted](http://labs.arduino.cc/NET/GettingStarted)

您需要使用Processing来ping网站，并将获取的数据通过串口发送到Arduino。由于两者都使用相同的端口，因此请确保在开始运行处理代码之前先将代码加载到 Arduino。

# qt - 移动 QGraphicsItem 的“图形”

> ID：11067752
> 
> 赞同：0
> 
> 时间：2012-06-16T23:09:18.090
> 
> 标签：qt, qgraphicsview, qgraphicsitem, qpainter, qgraphicsscene

我有一个带有自定义图形的 QGraphicsItem，如下图的上半部分所示，其中红色圆圈是`shape()`该项目的：

![qgraphicsitem](../Images/951982ddecb7e430942b3f8b9704eb92.png)

有没有办法保留图形，但只是像下半部分所示的那样移动它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:43:06.233

我不认为，你可以移动没有形状的 QGraphicsItem。形状绑定到 QGraphicsItem。它根据 QGraphicsItem 改变它的坐标。

如果你想实现像你的图的后半部分一样的东西。你需要有两个 QGraphicsItems（一个是你的红色外圈，第二个是你的内部图形项）。

# android - 为什么我们不能从 /raw 或 /assets 读取 sqlite 文件？

> ID：11067765
> 
> 赞同：2
> 
> 时间：2012-06-16T23:11:52.013
> 
> 标签：android

我有一个要与我的应用程序一起分发的 sqlite 数据库。大约3mb。如果我理解正确，如果它位于我的应用程序的 /raw 或 /assets 文件夹中，我无法直接打开它，对吗？我们需要首先直接将其复制出来，如下所示：

[获取 Assets 文件夹中的 SQLite 路径](https://stackoverflow.com/questions/6751757/how-to-get-the-sqlite-path-in-asset-folder)

所以我的应用程序会消耗两倍的磁盘空间吗？我不明白为什么必须将数据库文件放在特定文件夹中？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T23:55:06.230

> 所以我的应用程序会消耗两倍的磁盘空间吗？

是的。从技术上讲，可能更多，因为您的数据库被压缩在 APK 文件中。

> 我不明白为什么必须将数据库文件放在特定文件夹中？

数据库文件不必位于特定文件夹中。但是，`assets/`是您的开发机器上的一个文件夹；它是设备上 APK 文件的一部分。中的所有内容也是如此`res/raw/`。

顺便说一句，我建议[`SQLiteAssetHelper`将数据库从`assets/`](https://github.com/jgilfelt/android-sqlite-asset-helper).

# php - 我可以让 Smarty 根据优先级从目录中选择模板吗？

> ID：11067774
> 
> 赞同：4
> 
> 时间：2012-06-16T23:13:16.740
> 
> 标签：php, templates, smarty

我正在制作一个 PHP wiki 引擎，它对指向它的所有网站都使用相同的模板。但是，有些网站有自定义模板。如果它存在，我可以让 Smarty 使用这个自定义模板吗？

这是我的目录结构：

```
/web/wiki/templates                 <--  all templates here
/web/wiki/templates/wiki.domain.com <-- individual template 
```

我怎样才能使 smarty 在`/web/wiki/templates/wiki.domain.com`第一个 for中使用模板`wiki.domain.com`，如果此目录中不存在该模板，则在 中使用该模板`/web/wiki/templates`？

我可以为 Smarty 定义多个模板目录，并让它首先尝试从顶层目录中选择模板吗？如果我能做到这一点，我可以简单地改变模板目录的顺序：

```
/web/wiki/templates/wiki.domain.com
/web/wiki/templates 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T14:52:39.700

从[Smarty Docs](http://www.smarty.net/docs/en/api.set.template.dir.tpl)尝试：

```
// set multiple directoríes where templates are stored
$smarty->setTemplateDir(array(
    'one'   => './templates',
    'two'   => './templates_2',
    'three' => './templates_3',
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:20:23.033

[default_template_handler](http://www.smarty.net/docs/en/variable.default.template.handler.func.tpl)是在找不到模板时调用的回调。[在单元测试](http://code.google.com/p/smarty-php/source/browse/trunk/development/PHPunit/DefaultTemplateHandlerTests.php)中可以找到一些“示例”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T23:37:51.003

要扩展 Krister 的代码，如果您有很多可能的模板：

```
$possibleTemplates = array(
    // ...
);

do {
    $template = array_shift($possibleTemplates);
} while($template && !$smarty->template_exists($template));

if(!$template) {
    // Handle error
}

$smarty->display($template); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T23:21:30.810

我认为您不能在不同的模板上设置优先级，但我不确定。您可以做的是检查是否存在特定模板：

```
// check for if a special template exists
$template = 'default.tpl.php';
if ($smarty->template_exists('example.tpl.php')) {
   $template = 'example.tpl.php';
}
// render the template
$smarty->display($template); 
```

# javascript - JavaScript 的基本搜索功能

> ID：11067778
> 
> 赞同：1
> 
> 时间：2012-06-16T23:14:33.530
> 
> 标签：javascript, search

我正在寻找使用 JavaScript 的基本搜索功能。

**场景**：用户输入一个或多个单词，然后点击一个按钮。JavaScript 在字符串数组中查找可能与输入的搜索语句相关的项目。

我现在知道的唯一函数是“string.search”，它返回您正在搜索的字符串的位置。这很好，但并非适用于所有情况。以下是搜索功能应涵盖的几个示例

假设我的数组中有以下字符串：“这是美好的一天”。在针对我的搜索功能进行测试时，以下搜索词应返回 true。

*   搜索词 1：这是美好的一天
*   搜索词 2：这一天
*   搜索词 3：这很好
*   搜索词 4：good dy -*用户打错了*-

所以没有什么特别或具体的。只是一个基本的搜索功能，可以预测（在低级别，并且与语言无关）搜索词是否与测试数组中的字符串相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T23:17:54.110

最后一个是“day”的错字吗？

如果没有，您可以使用 split() 函数简单地拆分搜索语句以及原始字符串。

然后，您将遍历搜索词，并确保它们出现在源字符串中。一旦你没有找到这个词，你就停止搜索。

这是假设所有搜索词都应该是与，而不是或。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:27:39.463

这并不像人们想象的那么简单。我们正在谈论模糊匹配和 Levenshtein 距离/算法。

请参阅过去的问题： [获取最接近的字符串匹配](https://stackoverflow.com/questions/5859561/getting-the-closest-string-match)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T04:15:38.880

我猜您正在寻找的是基于模式匹配的*实时搜索*，类似于类有限状态自动机 (FSA) 搜索：

[此链接显示了一个示例](http://ejohn.org/apps/livesearch)，该示例允许您不区分大小写地进行搜索：

示例：数组包含“这是美好的一天”

搜索以下任何（或全部）是有效的：

*   这一天
*   Thagd **（**今天是**个****好日子**）**_**
*******   好的 dy *- 故意的错字 -*******

 ******等等

可以在[此处](http://nakajima.github.com/jquery-livesearch)找到区分大小写（尽管不是基于 FSA 的完美版本）的版本。还有[John Resig](http://ejohn.org/blog/jquery-livesearch/)的版本，但我没有指向他的演示的链接，但值得一看 - 这是一个 javascript/jquery 端口我提到的第一个链接。

希望这可以帮助！******

# objective-c - 为什么 Instagram 无法打开我的图片？

> ID：11067783
> 
> 赞同：1
> 
> 时间：2012-06-16T23:17:53.907
> 
> 标签：objective-c, uiimageview, uiimage, share, instagram

我正在努力将 Share to Instagram 集成到我的 iPhone 应用程序中，但我无法让编辑后的图像在 Instagram 中打开。

这是我正在尝试的代码：

```
 mainToolBar.hidden = YES;
    colorToolBar.hidden = YES;
    [self.view setNeedsDisplay];
    UIGraphicsBeginImageContext(CGSizeMake(320, 416));
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * imageA = [UIImage imageWithData:UIImageJPEGRepresentation(UIGraphicsGetImageFromCurrentImageContext(), 1.0)];
    UIGraphicsEndImageContext();
    mainToolBar.hidden = NO;
    colorToolBar.hidden = NO;

    NSString * documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString * savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"Image.ig"];

    NSData * imageData = UIImagePNGRepresentation(imageA);

    [imageData writeToFile:savedImagePath atomically:YES];

    NSURL * imageUrl = [NSURL fileURLWithPath:savedImagePath];

    UIDocumentInteractionController * docController = [[UIDocumentInteractionController alloc] init];
    docController.delegate = self;
    [docController retain];

    docController.UTI = @"com.instagram.photo";

    [docController setURL:imageUrl];

    [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
```

如果我将 imageData 设置为等于 UIImagePNGRepresentation(self.image) 图像确实会显示，但只是原始图像，而不是编辑后的图像（绘图/着色应用程序）。

谁能帮我看看我错过了什么？

太感谢了！

# ajax - 基于不同链接的不同输出（Ajax）

> ID：11067785
> 
> 赞同：0
> 
> 时间：2012-06-16T23:18:15.397
> 
> 标签：ajax, parameters

我确信这是一个常见问题，但由于我对 Ajax 很陌生，我无法弄清楚哪种解决方案最适合我以及如何执行它：

我有一个包含多个链接的页面，以及页面中间的一个 div，其中显示了 ajax 请求的输出。到目前为止，我已经成功地将这个 ajax 函数用于一个链接：

```
function loadXMLDoc()
{
  var xmlhttp;
  if (window.XMLHttpRequest)
  {
    // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
  }
  else
  {
    // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
  xmlhttp.open("GET","history.html");
  xmlhttp.send();
} 
```

但是，我想根据单击的链接显示不同的输出。这些是我的一些链接：

```
<li class="menu-item"><a href="#" onclick="loadXMLDoc()">Link 1 - History</a></li>
<li class="menu-item"><a href="#">Link 2 - Economics</a></li>
<li class="menu-item"><a href="#">Link 3 - Physics</a></li> 
```

我想根据点击的链接获取并显示不同的 html 文件，但我不知道如何执行它。

我猜它是通过传递参数来完成的，但我不知道该怎么做才能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:24:49.690

在你的情况下，你可以这样做：

```
<li class="menu-item"><a href="#" onclick="loadXMLDoc(1)">Link 1 - History</a></li>
<li class="menu-item"><a href="#" onclick="loadXMLDoc(2)">Link 2 - Economics</a></li>
<li class="menu-item"><a href="#" onclick="loadXMLDoc(3)">Link 3 - Physics</a></li> 
```

和：

```
function loadXMLDoc(doc) {
    // ...
    xmlhttp.open("GET","history.php?q="+doc);
    // ...
} 
```

并在服务器端输出不同的东西，具体取决于`q`参数。（或者，在 JS 中执行：如果为 1，则打开“page1.html”；如果为 2，则打开“page2.html”等。

* * *

但是，我建议你不要重新发明轮子，而是使用 jQuery 之类的 JS 库；它会让你的生活更轻松。例如，使用 jQuery，您可以只使用以下内容：

```
function loadXMLDoc(doc) {
    $.post('ajax/test.html?q=' + doc, function(data) {
        $('#myDiv').html(data);
    });
} 
```

起初这可能看起来有点陌生，但它比你拥有的要方便得多。另一个亮点是您可以为自己保存`onclick`属性以及生成的 HTML 和 JS 混合。

```
// no need to use onclick
$('.menu-item').eq(0).click(function() { loadXML(1); });
$('.menu-item').eq(1).click(function() { loadXML(2); });
$('.menu-item').eq(2).click(function() { loadXML(3); }); 
```

* * *

[如果您只需要在一个项目中做一些事情，您可以节省几千字节并使用来自http://microjs.com/#](http://microjs.com/#)的单任务库。

# xpath - Scrapy 中的 xpath 语法

> ID：11067794
> 
> 赞同：2
> 
> 时间：2012-06-16T23:21:28.320
> 
> 标签：xpath, scrapy

team = hxs.select ('//table[@class="tablehead"/tbody/tr[contains[.@class, "player"]')

我要选择的表的网站结构如下：

```
<html>
 <body>
  <table>
   <tbody>
    <tr>
     <td>...</td>
     <td>...</td>
       ...
    </tr>
   </tbody>
  </table>
 </body>
</html> 
```

由于网站中有多个表格，我只想选择一个其类定义为“tablehead”的表格。另外，对于该表，我只想选择其类属性包含字符串“player”的标签。我上面的尝试一开始看起来有点参差不齐。我尝试运行爬虫，它说我上面生成的行是无效的 xpath 行。任何建议都会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T05:55:11.607

我以前遇到过这些问题，请尝试`tbody`在 xpath 表达式中省略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T23:41:38.617

> //table[@class="tablehead"/tbody/tr[contains[.@class, "player"]

**纠正这个结果**：

```
//table[@class='tablehead']/tbody/tr[contains(@class, 'player')] 
```

这将选择其属性包含字符串的每个`tr`字符串值，并且 (the ) 是XML 文档中 any 的子级 a 的子级，其属性具有字符串 value 。`class``"player"``tr``tbody``table``class``"tablehead"`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
   <xsl:copy-of select=
    "//table[@class='tablehead']
        /tbody/tr[contains(@class, 'player')]
    "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 文档应用此转换时**（更真实一点）：

```
<html>
    <body>
        <table class="tablehead">
            <tbody>
                <tr class="major-player">
                    <td>player1</td>
                    <td>player2</td>
                </tr>
            </tbody>
        </table>
    </body>
</html> 
```

**评估 Xpath 表达式，并将选定的节点（在本例中只有一个）复制到输出**：

```
<tr class="major-player">
   <td>player1</td>
   <td>player2</td>
</tr> 
```

# orm - symfony2 中的未知实体命名空间别名

> ID：11067797
> 
> 赞同：17
> 
> 时间：2012-06-16T23:21:57.027
> 
> 标签：orm, symfony, annotations, doctrine-orm

嘿，我的 symfony2 项目中有两个包。一个是Bundle，另一个是PatentBundle。

我的 app/config/route.yml 文件是

```
MunichInnovationGroupPatentBundle:
resource: "@MunichInnovationGroupPatentBundle/Controller/"
type:     annotation
prefix:   /
defaults:  { _controller: "MunichInnovationGroupPatentBundle:Default:index" }

MunichInnovationGroupBundle:
resource: "@MunichInnovationGroupBundle/Controller/"
type:     annotation
prefix:   /v1
defaults:  { _controller: "MunichInnovationGroupBundle:Patent:index" }

login_check:
pattern:   /login_check

logout:
pattern:   /logout 
```

在我的控制器里面我有

```
<?php
namespace MunichInnovationGroup\PatentBundle\Controller;

use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;
use JMS\SecurityExtraPatentBundle\Annotation\Secure;
use Symfony\Component\Security\Core\Exception\AccessDeniedException;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Symfony\Component\Security\Core\SecurityContext;

use MunichInnovationGroup\PatentBundle\Entity\Log;
use MunichInnovationGroup\PatentBundle\Entity\UserPatent;
use MunichInnovationGroup\PatentBundle\Entity\PmPortfolios;
use MunichInnovationGroup\PatentBundle\Entity\UmUsers;
use MunichInnovationGroup\PatentBundle\Entity\PmPatentgroups;
use MunichInnovationGroup\PatentBundle\Form\PortfolioType;
use MunichInnovationGroup\PatentBundle\Util\SecurityHelper;
use Exception;
/**
 * Portfolio controller.
 * @Route("/portfolio")
 */
class PortfolioController extends Controller {
/**
 * Index action.
 *
 * @Route("/", name="v2_pm_portfolio")
 * @Template("MunichInnovationGroupPatentBundle:Portfolio:index.html.twig")
 */
   public function indexAction(Request $request) {
    $portfolios = $this->getDoctrine()
    ->getRepository('MunichInnovationGroupPatentBundle:PmPortfolios')
    ->findBy(array('user' => '$user_id'));

           // rest of the method
  } 
```

**编辑：**

我的实体类

```
<?php

 namespace MunichInnovationGroup\PatentBundle\Entity;

 use Doctrine\ORM\Mapping as ORM;

  /**
  * MunichInnovationGroup\PatentBundle\Entity\PmPortfolios
  *
  * @ORM\Table(name="pm_portfolios")
  * @ORM\Entity
  */
  class PmPortfolios
  {
/**
 * @var string $id
 *
 * @ORM\Column(name="id", type="string", length=36, nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="UUID")
 */
private $id;

/**
 * @var string $portfolioName
 *
 * @ORM\Column(name="portfolio_name", type="string", length=255, nullable=false)
 */
private $portfolioName;

/**
 * @var text $description
 *
 * @ORM\Column(name="description", type="text", nullable=true)
 */
private $description;

/**
 * @var string $permalink
 *
 * @ORM\Column(name="permalink", type="string", length=255, nullable=false)
 */
private $permalink;

/**
 * @var string $sharingCode
 *
 * @ORM\Column(name="sharing_code", type="string", length=255, nullable=false)
 */
private $sharingCode;

/**
 * @var boolean $shared
 *
 * @ORM\Column(name="shared", type="boolean", nullable=false)
 */
private $shared;

/**
 * @var integer $sharedPortfolioCalls
 *
 * @ORM\Column(name="shared_portfolio_calls", type="integer", nullable=true)
 */
private $sharedPortfolioCalls;

/**
 * @var boolean $isDefault
 *
 * @ORM\Column(name="is_default", type="boolean", nullable=false)
 */
private $isDefault;

/**
 * @var UmUsers
 *
 * @ORM\ManyToOne(targetEntity="UmUsers")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 * })
 */
private $user;

/**
 * Get id
 *
 * @return string 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set portfolioName
 *
 * @param string $portfolioName
 */
public function setPortfolioName($portfolioName)
{
    $this->portfolioName = $portfolioName;
}

/**
 * Get portfolioName
 *
 * @return string 
 */
public function getPortfolioName()
{
    return $this->portfolioName;
}

/**
 * Set description
 *
 * @param text $description
 */
public function setDescription($description)
{
    $this->description = $description;
}

/**
 * Get description
 *
 * @return text 
 */
public function getDescription()
{
    return $this->description;
}

/**
 * Set permalink
 *
 * @param string $permalink
 */
public function setPermalink($permalink)
{
    $this->permalink = $permalink;
}

/**
 * Get permalink
 *
 * @return string 
 */
public function getPermalink()
{
    return $this->permalink;
}

/**
 * Set sharingCode
 *
 * @param string $sharingCode
 */
public function setSharingCode($sharingCode)
{
    $this->sharingCode = $sharingCode;
}

/**
 * Get sharingCode
 *
 * @return string 
 */
public function getSharingCode()
{
    return $this->sharingCode;
}

/**
 * Set shared
 *
 * @param boolean $shared
 */
public function setShared($shared)
{
    $this->shared = $shared;
}

/**
 * Get shared
 *
 * @return boolean 
 */
public function getShared()
{
    return $this->shared;
}

/**
 * Set sharedPortfolioCalls
 *
 * @param integer $sharedPortfolioCalls
 */
public function setSharedPortfolioCalls($sharedPortfolioCalls)
{
    $this->sharedPortfolioCalls = $sharedPortfolioCalls;
}

/**
 * Get sharedPortfolioCalls
 *
 * @return integer 
 */
public function getSharedPortfolioCalls()
{
    return $this->sharedPortfolioCalls;
}

/**
 * Set isDefault
 *
 * @param boolean $isDefault
 */
public function setIsDefault($isDefault)
{
    $this->isDefault = $isDefault;
}

/**
 * Get isDefault
 *
 * @return boolean 
 */
public function getIsDefault()
{
    return $this->isDefault;
}

/**
 * Set user
 *
 * @param MunichInnovationGroup\PatentBundle\Entity\UmUsers $user
 */
public function setUser(\MunichInnovationGroup\PatentBundle\Entity\UmUsers $user)
{
    $this->user = $user;
}

/**
 * Get user
 *
 * @return MunichInnovationGroup\PatentBundle\Entity\UmUsers 
 */
public function getUser()
{
    return $this->user;
} 
```

}

我的捆绑主类：MunichInnovationGroupPatentBundle.php

```
 <?php

  namespace MunichInnovationGroup\PatentBundle;

  use Symfony\Component\HttpKernel\Bundle\Bundle;

  class MunichInnovationGroupPatentBundle extends Bundle
 {
 } 
```

当我尝试加载 localhost/web/app_dev.php/portfolio

它说

```
 Unknown Entity namespace alias 'MunichInnovationGroupPatentBundle'. 
```

我无法弄清楚这个错误，如果有人知道我在谷歌上搜索了很多，请帮助我:(

提前致谢 500 Internal Server Error - ORMException

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-27T07:31:07.827

请检查您的 config.yml。

`mappings`在 部分进行了审查`entity_managers`。
你应该有类似的东西`MunichInnovationGroupPatentBundle: ~`

那是：

```
doctrine:
    orm:
        entity_managers:
            defaults:
                mappings:
                    MunichInnovationGroupPatentBundle: ~ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-08T12:19:03.100

在我的情况下，我在 provider 下的 security.yml 中缺少命名空间名称

我有：

`entity: { class: AdministratorBundle:AdminUser }`

并且需要：

`entity: { class: NamespaceAdministratorBundle:AdminUser }`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-21T14:20:25.763

如果您使用 2 个或更多实体管理器 - 您还需要指定管理器 **getManager('YourManager')**

```
$repository = 
    $this->getDoctrine()
    ->getManager('YourManager')
    ->getRepository('YourBundle:YourEntity'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T09:11:03.120

检查您的捆绑逻辑名称 (MunichInnovationGroupPatentBundle)。Bundle 逻辑名称是你的 bundle 的主类的名称，例如 JobsBundle

并提供您的实体源代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-09T04:57:32.823

Documentation [here](http://symfony.com/doc/current/book/doctrine.html#fetching-objects-from-the-database) states you can use the string **`'MunichInnovationGroupPatentBundle:PmPortfolios'`** as shortcut to **`'MunichInnovationGroupPatentBundle\Entity\PmPortfolios'`** as long as your entity lives under the Entity namespace of your bundle.

Your bundle is **MunichInnovationGroupBundle** so instead of

```
->getRepository('MunichInnovationGroupPatentBundle:PmPortfolios') 
```

use

```
->getRepository('MunichInnovationGroupPatentBundle\Entity\PmPortfolios') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-14T06:23:39.017

请检查您的 config.yml + AppKernel.php

**config.yml**必须是

```
orm:
    auto_generate_proxy_classes: "%kernel.debug%"
    naming_strategy: doctrine.orm.naming_strategy.underscore
    auto_mapping: true 
```

或将**auto_mapping**替换为

```
 mappings:
        StoreShopBundle: ~ 
```

更多信息，请查看：[https ://stackoverflow.com/a/37652091/5809937](https://stackoverflow.com/a/37652091/5809937)

在**AppKernel.php** 中不要忘记检查 bundle 是否被激活：

```
 new MunichInnovationGroup\PatentBundle\MunichInnovationGroupPatentBundle(), 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-19T11:25:51.833

尝试通过添加一些字段在 config.yml 文件中更加明确：

```
orm:
    ...

    mappings:
        MunichInnovationGroupPatentBundle:
                type: annotation
                dir: "MunichInnovationGroupPatentBundle/Controller"
                is_bundle: true
                prefix: MunichInnovationGroup\PatentBundle
                alias: MunichInnovationGroupPatentBundle
        [more mappings..] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-21T20:39:51.277

在 Symfony 2.3.7 版中，我使用了 NameofCompanySomethingBundle:EntityRequired 例如 AcmeBlogBu​​ndle:User 并且它可以工作。

auto-mapping: true （默认）在 orm: 下使用，在 config.yml 中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-21T18:35:20.407

如果您使用多个实体管理器并且未在控制器函数中指定实体管理器，则会发生此错误。

```
$em = $this->get('doctrine.orm.//your_entity_manager_name_here//_entity_manager');
$dql   = "SELECT ...";
$query = $em->createQuery($dql); 
```

这对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-08T10:20:24.947

当我尝试使用没有核心文件夹名称的 bandle 名称时，我遇到了这个问题。它在 config/security.yml

在我的情况下，文件夹结构是下一个 src/Dp/UserBundle/....

我改变了这个`提供者：

```
 main:
        entity: { class: UserBundle:User, property: username }` 
```

对此`提供者：

```
 main:
        entity: { class: DpUserBundle:User, property: username }` 
```

所以复制未知实体名称的名称并搜索项目中的每个条目，检查 - 它们必须带有文件夹前缀（在我的情况下为 Dp）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-19T13:56:44.533

打开你的 app\config.yml，必须是

```
orm:
    auto_generate_proxy_classes: "%kernel.debug%"
    naming_strategy: doctrine.orm.naming_strategy.underscore
    auto_mapping: true
replace to
    orm:
        auto_generate_proxy_classes: '%kernel.debug%'
        naming_strategy: doctrine.orm.naming_strategy.underscore
        auto_mapping: true
        mappings:
              MunichInnovationGroupPatentBundle: ~ 
```

# php - 如何使用 Smarty 模板中的 Smarty 模板？

> ID：11067798
> 
> 赞同：1
> 
> 时间：2012-06-16T23:22:14.613
> 
> 标签：php, templates, smarty, templating

我遇到了一个有趣的问题。我需要在 Smarty 模板*中*使用Smarty 模板。

这就是为什么。我为各种 wiki 网站使用相同的模板，每个网站都有自己的配置。配置包含主模板的部分（例如更改的标题和标题等）。

这是一个简化的例子。我有一个`topic-list.template.html`在所有网站上共享的文件：

```
<div id="topics">
  <h1>{$h1}</h1>
  ...
</div> 
```

如您所见，此模板文件包含一个`<h1>`可以为每个网站定制的标签。

然后对于每个网站，我都有一个如下所示的配置文件（简化）：

```
$config = [
  "h1-titles" => [
      "topics" => "Showing Topics in {\$category}"
  ]
]; 
```

如您所见，配置文件包含一个 Smarty 模板。

因此，当我渲染`topic-list.template.html`文件时，我必须先渲染`$config['h1-titles']['topics']`通过`$smarty->fetch("string":$config['h1-titles']['topics'])`，然后将其分配给`h1`Smarty 变量。我的简化代码如下所示：

```
$h1_tag = $smarty->fetch("string":$config['h1-titles']['topics']);
$smarty->assign('h1', $h1_tag);
$smarty->display('topic-list.template.html'); 
```

我想知道我是否可以以某种方式自动将其插入文件`$config['h1-titles']['topics']`中`topic-list.template.html`，然后一次性全部渲染？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:25:06.633

请查看[String Template Resources](http://www.smarty.net/docs/en/resources.string.tpl)上的文档。您会立即注意到您的`$smarty->fetch('string:…')`方法也可以在模板中完成：`{include file="string:…"}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:18:49.770

我相信**{eval}**标签可以帮助你：

*{eval} 用于评估作为模板的变量。这可用于将模板标签/变量嵌入到变量中或将标签/变量嵌入到配置文件变量中。*

[http://www.smarty.net/docs/en/language.function.eval.tpl](http://www.smarty.net/docs/en/language.function.eval.tpl)

# c# - 设置 RSA 参数

> ID：11067799
> 
> 赞同：3
> 
> 时间：2012-06-16T23:22:51.393
> 
> 标签：c#, rsa

我已经获得了 RSA 参数的 M、Exponent 和 D 组件，并且一直在尝试在 C#.NET 中使用它来加密数据。我想知道作为公钥的一部分，这些组件中的哪些是加密数据所必需的？此外，以 16 为底的指数为 10001。我应该在 C# 中设置什么 RsaParameters.Exponent 参数？我不知道我应该如何准确地解释该数字并将其放在 Exponent 中，这是一个字节数组。组件不需要以 16 为基数的长度均匀吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:05:37.570

```
RSAParameters rsaKeyInfo = new RSAParameters
{
   Exponent = new byte[] {1, 0, 1},
   ...
};

using (RSACryptoServiceProvider rsa = new RSACryptoServiceProvider())
{
    rsa.ImportParameters(rsaKeyInfo);
    rsa.Decrypt(...)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T01:22:07.663

这是一个[代码示例](http://msdn.microsoft.com/ru-ru/library/system.security.cryptography.rsacryptoserviceprovider.encrypt.aspx) 因此，您应该将指数设置为数字 65537 的字节表示（以 16 为基数的 10001）。我不太确定它是如何工作的`RSACryptoServiceProvider`，但如果您使用的是 OpenSSL，这`BitConverter.GetBytes(65537)`是一个坏主意，因为它是`{1, 0, 1, 0}`，但不是`{1, 0, 1}`，它不能正常工作。因此，我认为最好以 MSDN 示例中所写的方式保留它：

```
byte[] Exponent = {1,0,1}; 
```

# ncurses - ncurses- KEY_ENTER 失败

> ID：11067800
> 
> 赞同：13
> 
> 时间：2012-06-16T23:23:37.713
> 
> 标签：ncurses

我一直在尝试自学 ncurses，到目前为止我很喜欢它。但是，我正在尝试编写一个小型文本编辑器，例如 pico 或 nano。到目前为止，我已经把它设置得很好。我创建了一个函数来映射键。无论我做什么，我都无法得到回应`KEY_ENTER`。每当我按下它时，它就会转到我当前所在行的开头。我试过使用 raw(); 并使用 13 而不是`KEY_ENTER`没有运气。所有其他键都按预期响应。我会很感激任何建议。我一直盯着这个试图让它永远工作。谢谢！

```
#include <stdlib.h>
#include <ncurses.h>

// gcc keymaps.c -lncurses -o keymaps
int main(){
    int ch;

    initscr();
    cbreak();
    noecho();

    keypad(stdscr,TRUE);

    while (ch = getch()) {
      switch(ch){
         case KEY_UP:
              addstr("Up\n");
              break;
          case KEY_LEFT:
              addstr("Left\n");
              break;
          case KEY_RIGHT:
              addstr("Right\n");
              break;
          case KEY_BACKSPACE:
              addstr("Backspace\n");
              break;
          case KEY_ENTER:
              addstr("You pressed Enter\n");
          default:
            printw ("%u\n", ch);
            break;
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-07-05T23:35:22.233

可能的问题是用户混淆`Enter`了普通键盘上的`Enter`键和数字键盘上的键。它们都*可以*发送控制/M (13)，但不一定。端子说明并`KEY_ENTER`参考数字键盘。

ncurses 手册页`getch`解释了[*NOTES*](http://invisible-island.net/ncurses/man/curs_getch.3x.html#h2-NOTES)中的行为：

> 一些键可能与常用的控制键相同，例如，**`KEY_ENTER`** 相对于 control/M， `KEY_BACKSPACE` 相对于 control/H。一些 curses 实现可能会有所不同，具体取决于它们是专门处理这些控制键（并忽略 terminfo），还是使用 terminfo 定义。Ncurses 使用 terminfo 定义。如果它说 是 control/M， 那么当你按下 control/M 时**`KEY_ENTER`** getch 将返回。**`KEY_ENTER`**
> 
> 通常，表示**数字键盘上的***Enter*键**`KEY_ENTER`**发送的字符 ：
> 
>  ****   终端描述列出了最有用的键，
>     
>     
> *   **常规键盘**上的 *Enter*键已经由标准 ASCII 字符处理，用于回车和换行，
>     
>     
> ***   根据是否`nl`被`nonl`调用，在常规键盘上按“Enter”可能会返回回车或换行，最后
>     
>     *   “输入或发送”是此键的标准描述。*****

 *****顺便说一句，换行符是 10。但在 C 语言中，它通常显示为`'\n'`（而回车符为`'\r'`）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-09T04:57:03.903

尝试将 10 作为 ASCII 值...在 ncurses 上为我工作。另外请更新实际代码，因为您输入的代码在语法上是错误的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T23:30:33.267

从[PDCurses 文档](http://pdcurses.cvs.sourceforge.net/viewvc/pdcurses/PDCurses/curses.h?view=markup)中：

```
#define KEY_ENTER 0x157 /* enter or send (unreliable) */ 
```

`nonl()`之后尝试调用`raw()`。

> nl 和 nonl 例程控制底层显示设备是否在输入时将返回键转换为换行符，以及是否将换行符转换为返回并在输出时换行（在任何一种情况下，调用 addch('\n')虚拟屏幕上的返回和换行）。最初，确实会发生这些翻译。如果您使用 nonl 禁用它们，curses 将能够更好地利用换行功能，从而更快地移动光标。此外，curses 将能够检测到返回键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-05T12:39:54.107

我`KEY_ENTER`最近遇到了同样的问题，我通过替换`KEY_ENTER`10 或**\n**来修复它，这是 ASCII 新行。

```
#include <ncurses.h>
int main() {
    initscr();  /* init ncurses */
    keypad(stdscr, TRUE);   /* get keyboard input */
    addstr("Press enter to exit.\n");
    while (10 != getch()) {}    /* 10 == enter */
    endwin();   /* end ncurses */
    return 0;
} 
```*****

# jquery - Jquery显示默认css

> ID：11067801
> 
> 赞同：0
> 
> 时间：2012-06-16T23:24:18.907
> 
> 标签：jquery, css

嗨，请看看这个小提琴[http://jsfiddle.net/bloodygeese/pwjNQ/1/](http://jsfiddle.net/bloodygeese/pwjNQ/1/)

我试图弄清楚如何在按住“预览推荐样式”文本时获取要使用的默认/当前 css 值 - 仅在按住时，

然后如果用户喜欢推荐的样式，他们可以单击“使用推荐的样式”以默认设置以匹配 css/preview。

我的问题是实际上 css 会被其他功能改变，所以有时颜色会是推荐的黑色，有时是推荐的红色。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:37:30.880

对于仅在按住鼠标时发生的事情，使用`.mouseDown()`并恢复，使用`.mouseUp()`

此外，我将在您的 CSS 中为各种选项定义一个类，而不是字体和颜色的数组，并将这些类添加到预览元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:46:59.430

这是一个演示，它将使用 mouseup/mousedown 更改样式值。您可以使用这个 jsfiddle 示例查看它。

[http://jsfiddle.net/nickadeemus2002/yCnxw/](http://jsfiddle.net/nickadeemus2002/yCnxw/)

它应该可以帮助您开始最终解决方案。编辑演示以满足您的需求。

# java - Applet 的 .jar 搞砸了？

> ID：11067803
> 
> 赞同：3
> 
> 时间：2012-06-16T23:24:20.660
> 
> 标签：java, jar, applet, magic-numbers

我正在尝试将小程序放入 Google 网站（因为域托管需要花钱）。我有那个工作，它在网站上。现在，我对此完全陌生，我的问题是为什么我的小程序不起作用？

我尝试的第一件事是将所有文件上传到谷歌驱动器并在那里访问它们（我的小程序访问多个文本文件 [只读，不写]）但这给了我一个幻数错误，因为 FTP 是 ASCII 这使得类文件都是愚蠢的，或者我已经研究过了。

好的，所以我有一个托管文件的网站，它选择了 FTP（它自动为我的类文件做二进制，为我的文本文件做 ASCII）这使它更好，但显然未签名的小程序无法访问类文件以外的文件（我认为）。

所以，我为我的小程序制作了一个 .jar 使用`jar cvf [jar name].jar [blah blah blah, class files I need and text files I need]`

我把它上传到我的文件托管网站，唉 - 幻数错误！2东西东西很多数字。此时，我的 HTML 代码如下所示：

```
<applet
codebase = "[URL for jar file]"
archive = "[jar file].jar"
code = "[class file].class"
width = ###
height = ###>
</applet> 
```

偏执地认为该站点的 FTP 客户端弄乱了我的 jar，我使用 FileZilla 上传到我的服务器（我选择了二进制传输类型），这仍然导致了一个幻数错误，特别是 1347093252，这是我的 zip 文件的开头相信（如果有帮助，当我单击此文件的链接时，它实际上会下载）。

我可能做了一些愚蠢的事情，但我想重申我在这方面是全新的。

如果有人可以提供帮助，那就太棒了；

我已经尝试过的事情：清除我的 java 缓存并加载小程序（从这里开始，假设列出的所有内容都以“并加载小程序”结尾），再次清除它，关闭我的浏览器，清除我的 java 缓存，清除我的缓存 -关闭我的浏览器 - 清除我的缓存、重新加载、更改计算机、更改 Internet 连接、更改计算机和 Internet 连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:53:33.570

首先，未签名的小程序可以从它所来自的服务器读取文件。如果你把圆顶文本文件和你的小程序放在同一个文件夹中，小程序就可以抓取。我认为该方法类似于 getDocumentBase 来获取您的applet wad 加载的目录。你不能做什么我们访问本地文件系统。用命令行制作 jar 文件很痛苦。您可能希望使用像 netbeans 这样的 IDE 来构建您的项目。

# clang - 重用 Clang 的元数据

> ID：11067806
> 
> 赞同：1
> 
> 时间：2012-06-16T23:25:46.420
> 
> 标签：clang, static-analysis

我想分析一个大代码库，编译需要几分钟。有没有办法保存clang生成的所有“元数据”，这样我每次运行分析都不必等待？

# opa - Opa 可执行错误：无法获取系统语言

> ID：11067807
> 
> 赞同：0
> 
> 时间：2012-06-16T23:25:51.570
> 
> 标签：opa

我只是在学习 Opa 语言并阅读他们的手册。在手册的第三部分，它向您展示了如何构建应用程序“你好，聊天”。

我已经复制并粘贴了 .css 和 .opa 文件，并且已经安装了 .exe 文件。当我运行它时，我收到以下错误：

[警告]: I18n ServerI18n.get_system_lang 无法获取系统语言

是什么赋予了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:03:43.227

这只是一个警告，因为服务器会尝试猜测您的服务器语言（用于[i18n 模块](http://doc.opalang.org/module/stdlib.core.i18n/I18n).

您可以设置 LANG 或 LANGUAGE 环境变量来避免它。

# php - 在 HTML 更新表单中插入 SQL 数据库值

> ID：11067809
> 
> 赞同：0
> 
> 时间：2012-06-16T23:26:34.157
> 
> 标签：php, sql-server

我正在尝试制作一个允许用户编辑数据库中记录的表单。

My`main.php`是一个表格，用户可以在其中单击记录进行编辑/删除：

```
 echo "<td>".$row["fname"].", ".$row["first_name"]."</center></td>";
    echo "<td><center>".$row["gender"]."</center></td>";
    echo "<td><center>".$row["city"]."</center></td>";
    echo "<td><center>".$row["extra"]."</center></td>";
    echo '<td><center><a href="form.php?id='.$row["p_ID"].'"><img src="edit_icon.png"/></a><center></td>';
    echo '<td><center><a href="delete.php?id='.$row["p_ID"].'"><img src="delete.gif"/></a><center></td>';
    echo "</tr>";
    }
?>

<input type="hidden" name="p_ID" value="<?php echo $row["p_ID"]?>"></input>
<input type="hidden" name="lname" value="<?php echo $row["lname"]?>"></input>
etc.. 
```

当用户单击**编辑图标**时，它会重定向到我需要值 ( `$row['fname']`) 显示在其各自字段中的表单页面。我已经尝试过建议的解决方案，但我仍然不知道如何正确完成此操作。我不断收到错误。这是我尝试过的`form.php`

```
@$submit=$_POST['submit'];
@$lname=$_GET['lname'];
@$gender=$_GET['gender'];
@$city=$_GET['city'];
@$extra=$_GET['extra'];
?>

Last name <input type="text" name="lname" value= <?php echo $lname ?>><br><br>
Gender <input type="radio" name="gender" value="M" <?php if($gender=="M") {echo "checked";} else {echo " ";} ?>/>M&nbsp;
<input type="radio" name="gender" value="F" <?php if($gender=="F") {echo "checked";} else {echo " ";} ?>/>F<br><br>
City <select name="city">
    <option value="x">Select</option>
    <?php
    $db=mysql_connect("localhost","root") or die('Not connected : ' . mysql_error());
    mysql_select_db("my_db",$db) or die (mysql_error());
    $SQL="SELECT * FROM cities"; 
    $result=mysql_query($SQL) or die(mysql_error());
    $num_results=mysql_num_rows($result);
    mysql_close($db);
    for ($i=0;$i<$num_results;$i++)
        {
        $row=mysql_fetch_array($result);
        echo"<option value='".$row['city_id']."'", $row['city_id']==$row['city_ID']? " selected='selected'" : '',">".$row['city']."</option>";
        }
    ?>
    </select><br><br>

Extra <input type="checkbox" name="extra" value="yes" <?php if($extra=="yes") {echo "checked";} else {echo " ";} ?>/><br><br> 
```

而且我现在并不真正关心任何 SQL 注入或任何事情，我只需要这个工作。我将不胜感激任何帮助！

错误：所有内容的未定义索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:54:34.343

您正在关闭连接之前`mysql_query`用于`mysql_fetch_array`.

您正在尝试错误地获取行。

`mysql_close`除非您在查询后进行大量处理，否则不需要，因为无论如何在脚本完成运行后连接已关闭。

此外，像这样声明您的变量以删除未定义的索引错误：

```
$submit = isset($_POST['submit']) ? mysql_real_escape_string($_POST['submit']) : ""; 
```

注意：这也可以防止 sql 注入，但`mysql_real_escape_string()`只有在您连接后才能工作。

```
<?php

$db=mysql_connect("localhost","root") or die('Not connected : ' . mysql_error());
mysql_select_db("my_db",$db) or die (mysql_error());

$submit = isset($_POST['submit']) ? mysql_real_escape_string($_POST['submit']) : "";
//other vars here

$SQL="SELECT * FROM cities"; 
$result=mysql_query($SQL) or die(mysql_error());
while($row = mysql_fetch_array($result)){
  echo "<option value='".$row['city_id']."'>".$row['city']."</option>";
}
mysql_close(); // now you can close the connection
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T00:01:54.707

您需要的是表单提交检查。以下是单页更新脚本的一般形式：

```
<?php
if(isset($_POST['submit'])) {
    // Form was submitted, process it and display message
    exit(); // Prevent form from being displayed again
}
?>
<!doctype html>
<html>
<body>
   <form method="POST" action="form.php">
       <!-- fields -->
       <input type="submit" name="submit" value="Submit" />
   </form>
</body>
</html> 
```

# c - 你能在 C 中把一个字符串分解成一个字符数组吗？

> ID：11067814
> 
> 赞同：-2
> 
> 时间：2012-06-16T23:27:33.377
> 
> 标签：c

如何将字符串分解为字符数组，以便我可以单独分析和处理字符串中的每个字母？

示例类型代码，而我将是每个字母......

```
int
main(int argc, char *argv[])
{
    printf("what is the string?: ");
    string s = GetString();
    for(int i = 0; i<strlen(s); i++)
    printf("s[i]");
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T23:28:49.680

字符串*是*一个字符数组（额外的“\0”是数组中的最后一个元素）。

```
#define MAXLEN 80

int
main(int argc, char *argv[])
{
    char buf[MAXLEN];
    printf("what is the string?: ");
    fgets (buf, MAXLEN, stdin);
    for(int i = 0; i<strlen(buff); i++)
      printf("buff[%d]: %c\n", i, buf[i]);
    return(0);
} 
```

===== 再举一个例子 =====

```
#include <stdio.h>
#include <string.h>

int
main (int argc, char *argv[])
{
  int i;
  char string[] = "ABC";

  for (i=0; i < strlen (string); i++) {
    printf ("%c\n", string[i]);
  }

  return 0;
} 
```

样品输出：

```
A
B
C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:31:59.540

字符串已经是一个字符数组，并且已经可以这样处理。您可以对数组执行的任何操作都可以对字符串执行，因此最好保持简单并仅使用数组。除非你有一些你没有提到的原因，但我想不出一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:36:08.757

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef char* string;

//input string from console stdin
string GetString(){
    char buff[1024];
    int len;
    fgets(buff, sizeof(buff), stdin);
    len = strlen(buff);
    if(buff[len-1] == '\n')
        buff[len-1]='\0';
    return strdup(buff);
}

int
main(int argc, char *argv[])
{
    printf("what is the string?: ");
    string s = GetString();
    for(int i = 0; i<strlen(s); i++)
        printf("s[%d]:%c\n", i, s[i]);

    char ca[strlen(s)+1];
    for(int i = 0; i<=strlen(s); i++)
        ca[i]=s[i];

    for(int i = 0; i<strlen(s); i++)
        printf("ca[%d]:%c\n", i, ca[i]);
    free(s);
    return(0);
}
/*
what is the string?: test
s[0]:t
s[1]:e
s[2]:s
s[3]:t
ca[0]:t
ca[1]:e
ca[2]:s
ca[3]:t
*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T23:29:01.103

在 c 中，字符串**是**一个字符数组。

# android - 片段最佳实践

> ID：11067817
> 
> 赞同：5
> 
> 时间：2012-06-16T23:28:38.573
> 
> 标签：android, android-fragments

我正在制作一个应用程序，我终于开始使用 Fragments，在阅读了所有文档之后，我来到了这里。我设计的应用程序在纵向模式下是两个活动，选择器和细节，而在横向左侧是选择器右侧是细节，在平板电脑上。现在，这个效果非常好，就像这张图片一样： ![在此处输入图像描述](../Images/ae94a2ebc77353cca89e1f543ec1a584.png)

但是，现在当我将手机变成横向时，它和平板在横向中所做的一样，有两个片段。首先，我想知道我是否也应该将它作为手机上的两个片段保留？这会是“最佳实践”吗？如果没有，我想知道如何在不弄乱平板电脑风景的情况下制作像肖像一样的风景。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T00:29:06.180

您需要有两种单独的布局，一种在布局端口中（用于纵向），另一种在布局区域中（用于横向）。您的纵向布局应该只包含一个片段。在您的活动中，您需要检查该片段的存在，或包含它的视图（如果您使用的是 FrameLayouts），并采取相应的行动。

[从开发者网站看到这个。](http://developer.android.com/training/multiscreen/adaptui.html)

# macos - 您如何重置“git credential-osxkeychain”中存储的凭据？

> ID：11067818
> 
> 赞同：132
> 
> 时间：2012-06-16T23:28:40.323
> 
> 标签：macos, git, github

我已按照 GitHub 说明设置我的帐户，并且可以克隆，但无法远程推送。

当我执行“git push”时，出现 403 错误。它有正确的 URL。我尝试了“git credential-osxkeychain get”来查看它提供了什么，这会打印出错误的凭据。

我相信发生的事情是它第一次要求提供凭据，我认为这是另一个应用程序要求，并且它输入了错误的凭据。

我只需要重置它，以便它为我的 GitHub 帐户使用正确的钥匙串项。

我试过了：

```
git credential-osxkeychain erase
git credential-osxkeychain set 
```

该程序从不给出任何提示。如果我没有做正确的事情，Set 会说“输入错误”。我尝试输入“ `password=password`”等，但是当我执行“get”时，我仍然会得到旧的。

我无法弄清楚这些存储在哪里，因为它们不在 .gitconfigure 中。此外，没有最近的钥匙串项目可能是它。（我的钥匙串中有几个 GitHub 帐户，但没有使用其中的任何一个。）

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2015-01-18T04:11:01.893

From Terminal：（需要输入以下三行）

```
 $ git credential-osxkeychain erase ⏎
 host=github.com  ⏎
 protocol=https   ⏎
 ⏎
 ⏎ 
```

注意：在上面输入“protocol=https”后，需要按 ~~RETURN~~ 两次（每个 '⏎' 相当于一个 'press enter/return' ）

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-06-26T20:22:52.670

我不确定如何通过命令行擦除，但通过 Keychain Access 应用程序很容易做到这一点。只需转到 Applications -> Utilties -> Keychain Access，然后输入“github.com”。您可以使用应用程序删除无效项目或更新密码。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-07-20T16:35:30.963

解决方案原来是这样的：

该命令`git credential-osxkeychain`使用了我的钥匙串中的*第一个*GitHub 帐户条目。这个不是可以访问相关项目的那个。

我通过触摸 Keychain Access 中的帐户解决了这个问题，因此它的日期发生了变化（我想我只是更改了评论），现在它成为了最新的 GitHub 帐户，它成为第一个返回 credential-osxkeychain 的帐户，因此一切正常.

支持多个 GitHub 帐户的更好形式会很好，但大多数人可能只有一个主帐户并且不会遇到这个问题。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2021-01-30T17:33:12.913

在你的命令行中试试这个。

`git config --local credential.helper ""`

每当我在 OSX 钥匙串中有多个 GitHub 帐户时，它都适用于我

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-16T17:05:01.980

如上所述，git-credential-osxkeychain 将密码存储在 Apple Keychain 中。

默认情况下，gitcredentials 只考虑域名。如果您希望 Git 考虑完整路径（例如，如果您有多个 GitHub 帐户），请将`useHttpPath`变量设置为`true`，如[http://git-scm.com/docs/gitcredentials.html](http://git-scm.com/docs/gitcredentials.html)中所述。请注意，更改此设置将再次询问您的每个 URL 的凭据。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-04-18T19:23:45.990

在 Mac 上，使用命令`git credential-osxkeychain erase`.

或从*Applications* → *Utilities* → *Keychain Access*手动从钥匙串中删除。然后删除 github.com 钥匙串。然后使用推送；它将要求钥匙串访问；然后否认。

它会询问新的用户名和密码，添加它然后推送一个文件。

**在`git push`我发现这个错误之后。然后我使用大写的问题：**

> 远程：对 user1/file.git 的权限拒绝给 user2（以前存在的用户）。致命：无法访问' [https://github.com/xxxxxxxxxxxx/](https://github.com/xxxxxxxxxxxx/) '：请求的URL返回错误：403

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-06-17T08:49:38.227

尝试运行`/Applications/Utilities/Keychain Access`。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-08-28T12:21:45.360

此问题的 GitHub 帮助页面： [https ://help.github.com/articles/updating-credentials-from-the-osx-keychain/](https://help.github.com/articles/updating-credentials-from-the-osx-keychain/)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-05-17T08:51:21.113

您可以通过“钥匙串访问”删除现有凭据并添加新凭据

[![图片](../Images/22e4b4db06af0e38eadd4f7ab1542c54.png)](https://i.stack.imgur.com/lKeTU.png)

参考。[https://docs.github.com/en/github/getting-started-with-github/updating-credentials-from-the-macos-keychain](https://docs.github.com/en/github/getting-started-with-github/updating-credentials-from-the-macos-keychain)

# perl - Perl 获取标签之间的文本

> ID：11067821
> 
> 赞同：0
> 
> 时间：2012-06-16T23:29:21.677
> 
> 标签：perl

我尝试了很多我在互联网上找到的代码，但没有一个可以工作。

我有一个类似这样的 HTML 代码。

```
<div class="usernameHolder">Username: user123</div> 
```

我想要的是从这行代码中获取文本 user123，当然这段代码与 HTML 内容的其余部分（一个 HTML 页面）一起使用 谁能指出我正确的方向？

```
$text = @source=~ /Username:\s+(.*)\s+</;
print $text; 
```

但它不会返回任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T23:31:45.687

你的第二个`\s+`不匹配任何东西，因为`user123`和下面的标签之间没有空格。

这个怎么样？

```
/Username:\s*(.*?)\s*</ 
```

在这里，*如果有*空格，`\s*`则丢弃空格，这样您就不会在此过程中抓取大部分文档。（参见贪婪与非贪婪）*`.*?`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:53:30.370

如果 HTML 在字符串中：

```
$source = '<div class="usernameHolder">Username: user123</div>';

# Allow optional whitespace before or after the username value.
$text = $source=~ /Username:\s*(.*?)\s*</;

print $1 . "\n";   # user123 
```

如果 HTML 在数组中：

```
@source = (
    '<p>Some text</p>',
    '<div class="usernameHolder">Username: user123</div>',
    '<p>More text</p>'
);
# Combine the matching array elements into a string.
$matching_lines = join "",grep(/Username:\s*(.*?)\s*</, @source);

# Extract the username value.
$text = $matching_lines =~ /Username:\s*(.*?)\s*</;

print $1 . "\n";   # user123 
```

使用数组的更紧凑的版本：

```
@source = (
    '<p>Some text</p>',
    '<div class="usernameHolder">Username: user123</div>',
    '<p>More text</p>'
);

# Combine the matching array elements in a string, and extract the username value.
$text = (join "",grep(/Username:\s*(.*?)\s*</, @source)) =~ /Username:\s*(.*?)\s*</;

print $1 . "\n";   # user123 
```*

# iphone - 使用 prefix.pch 文件构建时出现警告

> ID：11067824
> 
> 赞同：0
> 
> 时间：2012-06-16T23:29:59.917
> 
> 标签：iphone, zbar-sdk

```
//
// Prefix header for all source files of the 'Bar_scan' target in the 'Bar_scan' project
//

#ifdef __OBJC__
# import <Foundation/Foundation.h>
# import <CoreFoundation/CoreFoundation.h>
# import <CoreGraphics/CoreGraphics.h>
# import <UIKit/UIKit.h>
# import <QuartzCore/QuartzCore.h>
# import <AVFoundation/AVFoundation.h>
# import <CoreMedia/CoreMedia.h>
# import <CoreVideo/CoreVideo.h>
# import "ZBarSDK.h"
#endif 
```

我通过使用 prefix.pch 文件构建收到此[警告](http://i.stack.imgur.com/MQ6ZI.png)：

> 词法或预处理器问题

可能是什么原因？

这是一个使用[zbar SDK](http://sourceforge.net/projects/zbar/files/latest/download)的项目。不幸的是，他们的程序也无法正常工作，并且存在完全相同的问题。实际上它没有看到我的任何框架。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:23:45.227

去除那个 ！`#endif`如此使用后：

```
#ifdef __OBJC__
# import <Foundation/Foundation.h>
# import <CoreFoundation/CoreFoundation.h>
# import <CoreGraphics/CoreGraphics.h>
# import <UIKit/UIKit.h>
# import <QuartzCore/QuartzCore.h>
# import <AVFoundation/AVFoundation.h>
# import <CoreMedia/CoreMedia.h>
# import <CoreVideo/CoreVideo.h>
# import "ZBarSDK.h"
#endif 
```

# java - ActionBarSherlock - 共享内容图标问题

> ID：11067829
> 
> 赞同：3
> 
> 时间：2012-06-16T23:30:47.917
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我正在使用`ActionBarSherlock`并已实施`ShareActionProvider`.

当用户选择要与之共享内容的应用程序时，例如`Twitter`，操作栏会在共享按钮图标旁边显示一个`Twitter`图标。这永远留在那里。

有人知道如何禁用应用程序图标出现在`Share`按钮旁边吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T14:04:25.310

找到了答案：

实现 OnShareTargetSelectedListener 并将其设置在 ShareActionProvider

```
public void onCreateOptionsMenu(Menu menu){
    ....
    actionProvider.setOnShareTargetSelectedListener(this);
    ....

 @Override 
 public boolean onShareTargetSelected(ShareActionProvider source, 
         Intent intent) { 

     context.startActivity(intent); 

     // started activity ourself to prevent search history 
     return true; 
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T23:44:55.847

顶部目标显示在操作栏中。这是存在于 Android 中的小部件的行为。

如果您不希望这种行为将源复制到您的应用程序中并修改其行为以从不显示顶部目标图标。

# hibernate - 谷歌应用引擎——NoSuchMethodError

> ID：11067831
> 
> 赞同：0
> 
> 时间：2012-06-16T23:31:17.327
> 
> 标签：hibernate, google-app-engine, struts2, nosuchmethoderror

我正在尝试在 Google App Engine 中运行 JSP，并且在我的控制台上收到以下错误消息。任何人都可以帮忙吗？我的类路径中确实有 asm-3.3.jar。

```
 WARNING: Error starting handlers
java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V
    at net.sf.cglib.core.DebuggingClassWriter.<init>(DebuggingClassWriter.java:47)
    at net.sf.cglib.core.DefaultGeneratorStrategy.getClassWriter(DefaultGeneratorStrategy.java:30)
    at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:24)
    at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:215)
    at net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:145)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:117)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
    at org.hibernate.impl.SessionFactoryImpl.<clinit>(SessionFactoryImpl.java:321)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1005)
    at com.configuration.ConfigurationListener.contextInitialized(ConfigurationListener.java:19)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:189)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:128)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:104) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T00:40:46.980

好的，所以它在你的类路径中用于什么 Eclipse？你的 AE 项目的 WEB_INF/lib 中有它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:50:59.147

你检查过这个吗？

[错误：java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V](https://stackoverflow.com/questions/2432471/error-java-lang-nosuchmethoderror-org-objectweb-asm-classwriter-initiv)

具体来说，这可能是您的 cglib 和 asm-attrs 版本的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T22:10:54.697

我添加了 asm-1.5.2.jar （早期版本），解决了这个问题。

# delphi - Delphi - 无需下载即可显示图像

> ID：11067833
> 
> 赞同：0
> 
> 时间：2012-06-16T23:31:56.543
> 
> 标签：delphi, image

> **可能重复：**
> [如何从 Delphi 中的 URL 获取图像](https://stackoverflow.com/questions/1227646/how-to-get-images-from-url-in-delphi)

我正在使用Delphi 2010，有一些功能我可以下载并以cximage或图像对象的形式显示JPG或PNG图片，但我试图不将图片下载到硬盘驱动器，我想知道这可能吗？我通过 google 和 stackoverflow 搜索但找不到，所有示例都是关于下载文件的。

例如，我在表单中添加了一个 cximage1 并希望显示来自“ [http://www.someaddress.com/pictures/001.JPG](http://www.someaddress.com/pictures/001.JPG) ”之类的 url 的图片。

感谢所有帮助，抱歉英语不好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:19:40.263

您可以使用此函数（使用 Delphi 2010 编译和测试）通过 HTTP 下载文件并将其存储在 TBitMap 中。它将读取在 Delphi 的 TGraphic hiearachy 中注册支持的所有文件类型，并将自动检测 BMP、GIF、JPG 和 PNG 文件格式：

```
USES Graphics, IdHTTP, PngImage, jpeg, GIFImg;

FUNCTION DownloadImage(CONST URL : STRING ; ImageType : TGraphicClass = NIL) : TBitMap;
  VAR
    HTTP        : TIdHttp;
    S           : TStream;
    IMG         : TGraphic;
    STR         : AnsiString;

  BEGIN
    HTTP:=TIdHttp.Create(NIL);
    TRY
      S:=TMemoryStream.Create;
      TRY
        HTTP.Get(URL,S);
        IF NOT Assigned(ImageType) THEN BEGIN
          S.Position:=0;
          SetLength(STR,5);
          S.Read(STR[1],LENGTH(STR));
          IF COPY(STR,1,2)='BM' THEN
            ImageType:=TBitMap
          ELSE IF COPY(STR,1,3)='GIF' THEN
            ImageType:=TGIFImage
          ELSE IF COPY(STR,2,3)='PNG' THEN
            ImageType:=TPngImage
          ELSE IF (ORD(STR[1])=$FF) AND (ORD(STR[2])=$D8) THEN
            ImageType:=TJPEGImage
        END;
        IF NOT Assigned(ImageType) THEN RAISE EInvalidImage.Create('Unrecognized file format!');
        IMG:=ImageType.Create;
        TRY
          S.Position:=0;
          IMG.LoadFromStream(S);
          Result:=TBitMap.Create;
          TRY
            Result.Assign(IMG)
          EXCEPT
            Result.Free;
            RAISE
          END
        FINALLY
          IMG.Free
        END
      FINALLY
        S.Free
      END
    FINALLY
      HTTP.Free
    END
  END; 
```

如果您已经知道文件类型，则可以将其指定为 TGifImage、TPngImage、TJPegImage 或 TBitMap 作为第二个参数。如果不是，例程将尝试在这四种类型中自动检测它。如果您使用自定义图形类型，则需要将其指定为第二个参数或更新自动检测逻辑以检测它。

因此，如果您想使用它在 TImage 中显示下载的图像而不将其保存到光盘，您可以这样使用它：

```
 VAR
    BMP : TBitMap;

  BEGIN
    BMP:=DownloadImage('http://domain.com/image.jpg');
    TRY
      Image1.Picture.Assign(BMP)
    FINALLY
      BMP.Free
    END
  END; 
```

# android - android项目数组中元素的生命周期

> ID：11067835
> 
> 赞同：1
> 
> 时间：2012-06-16T23:32:00.303
> 
> 标签：android

我有我在 android 项目的一项活动中填充的数组。然后我退出那个活动去参加另一个活动。如果我回到活动 1，那么数组是否仍会在其中保存值，或者这些值会消失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:42:27.657

取决于系统是否需要这些资源来做其他事情。如果确实如此，那么您的阵列将不复存在。如果没有，那么是的，您的数组仍将保存所有相同的值。

请参阅：[活动的生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

# php - PHP：为什么这个图片下载失败？

> ID：11067841
> 
> 赞同：-1
> 
> 时间：2012-06-16T23:33:17.883
> 
> 标签：php, curl, download, imagedownload

使用 PHP 我正在尝试下载/保存以下图像：

```
http://www.bobshop.nl/catalog/product_image.php?size=detail&id=42428 
```

当您在浏览器中加载此图像时，您可以看到它，但是当我尝试使用几种不同的方法下载它时，我得到一个 1 KB 的文件，显示在服务器上找不到该产品。

我用 the`file_put_contents`和 the `curl`way 都试过了。我什至使用了`get_web_page`在 StackOverflow 上找到的函数来捕捉可能的重定向。

还有什么可能是您可以在浏览器中看到图像但无法下载的原因？

***更新：*** 由于尝试不同答案时抛出的错误，我才发现问题的真正原因。在抓取 html 的过程中，URL 得到了`&amp;`而不是`&`. 我现在替换这些，现在所有其他方法也可以使用......谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:45:44.947

我刚刚实现了一种简单的下载和存储方法，并且成功了：

```
<?php

$fileContent = implode("",file("http://www.bobshop.nl/catalog/product_image.php?size=detail&id=42428"));
$fp = fopen("/tmp/image","w+");

fwrite($fp, $fileContent);

fclose($fp);

?> 
```

你在代理后面吗？这可能是问题（您配置了代理但没有配置 php）；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:47:39.267

此 PHP 脚本可能正在执行某种标头检查，以确保浏览器正在请求图像，而不是有人试图抓取其内容。这可以用 cURL 伪造（尽管在做了这样的事情之后我觉得我需要洗个澡）。具体来说，[`curl_setopt()`](http://www.php.net/manual/en/function.curl-setopt.php)：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'User-agent: Some legitimate string'
)); 
```

要找出需要发送哪些标头，您需要进行一些实验。如果您有 Google Chrome，您可能使用过 Inspector（如果您没有 Firefox 也有类似的插件，那么您可以使用 Firebug 之类的东西）。如果您使用 Chrome 请求图像，您可以右键单击以检查它。转到网络选项卡。现在刷新页面。请求`product_image.php`应该出现。如果单击它并单击“标头”选项卡，您应该会看到已发送的标头列表。我的浏览器发送：`User-Agent`、`Accept`、`Accept-Encoding`、`Accept-Language`和`Accept-Charset`。

![在此处输入图像描述](../Images/70602dd2c7e86bbbbbe57210250991a4.png)

尝试将这些标头与有效值组合，以查看需要发送哪些标头才能返回图像。我敢打赌，这个网站可能只检查`User-agent`所以**从那个开始。**

* * *

**重要说明：**您应该缓存此调用的结果，因为如果您的服务器快速连续多次请求图像（例如，如果您站点上的许多用户请求获取此图像的脚本），这将是非常可疑的。此外，作为额外的匿名层，您可能希望`User-agent`从一系列有效请求中选择您的请求，因此 bobshop.nl 认为所有请求都来自大型网络（如大学校园）后面的用户。[您可以在UserAgentString.com](http://www.useragentstring.com/pages/useragentstring.php)上找到有效的用户代理字符串。

# javascript - 使用 gBrowser 和 observerService 在启动时查找选项卡

> ID：11067842
> 
> 赞同：0
> 
> 时间：2012-06-16T23:33:47.837
> 
> 标签：javascript, events, firefox-addon

我正在尝试创建一个 Firefox 插件，它将在启动时查找某个页面并从中获取一些信息。我在加载时找不到页面。这是我到目前为止所拥有的：

```
var myfancyaddon = {
  onLoad: function() {
      var observerService = Components.classes["@mozilla.org/observer-service;1"].getService(Components.interfaces.nsIObserverService);
      observerService.addObserver(function restored() {
          observerService.removeObserver( restored, "sessionstore-windows-restored");
          var browser = myfancyaddon.findMySite();
          if (browser) {
              alert("tree falling in the woods"); // THIS LINE NEVER RUNS
              browser.contentWindow.addEventListener("load", function tab_loaded(){
                  browser.contentWindow.removeEventListener("load", tab_loaded(), false);
                  alert("mysite loaded!");
              }, false);
          }
      }, "sessionstore-windows-restored", false);
  },

  findMySite: function() {
      var browsers = gBrowser.browsers;
      for ( var i = 0; i < browsers.length; i++ ) {
          var browser = browsers[i];
          if (!browser.currentURI.spec) continue;
          if ( browser.currentURI.spec.match('^https?://(www\.)?mysite\.com/') ) return browser;
      }
      return null;
  }
};

window.addEventListener("load", function ff_loaded(){
    window.removeEventListener("load", ff_loaded, false); //remove listener, no longer needed
    myfancyaddon.onLoad();
},false); 
```

经过一番调查，在它变成 mysite.com 之前，currentURI.spec 似乎在短时间内是“about:blank”。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:10:05.823

`gBrowser.addEventListener("DOMContentLoaded", myfunction, false);`您可以使用侦听所有选项卡文档上的页面加载，然后仅根据 url 运行代码，而不是先过滤然后添加负载侦听器。

[https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads](https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:53:00.253

当`"sessionstore-windows-restored"`上一个会话中的选项卡已恢复并且这些选项卡中的加载已经开始时发送通知（有时：“在选择之前不加载选项卡”选项意味着加载甚至没有在后台选项卡中开始） . 但是这些选项卡的位置在联系服务器之前仍然存在`about:blank`，因为加载的地址可能会重定向或服务器可能无法访问（意味着内部重定向到`about:neterror`）。Firefox 仅在确定从新位置提供内容时才会更改浏览器位置。

[拦截页面加载](https://developer.mozilla.org/en/Code_snippets/On_page_load)而不是等待会话恢复确实应该更好。

# jquery - jQuery 如何访问我刚刚在回调函数中使用的 url？

> ID：11067847
> 
> 赞同：1
> 
> 时间：2012-06-16T23:35:10.330
> 
> 标签：jquery

所以我有一个像这样的加载函数的jQuery回调：

```
$(".editStoryLink").click(function() {
    $(this).parent().siblings(".storyTitleDesc")
        .load($(this).attr("href"), function(data) {
            alert("the url that was just used above!");
        });
    return false;
}); 
```

如何访问我刚刚使用的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T23:39:44.997

在运行`load`请求之前进行备份：

```
$(".editStoryLink").click(function() {
    var url = this.href;
    $(this).parent().siblings(".storyTitleDesc").load(url, function(data) {
        alert(url);
    });
    return false;
});​ 
```

**演示：http:** [//jsfiddle.net/MhSAH/](http://jsfiddle.net/MhSAH/)

# apex-code - 你能用 sql 填充一个集合吗？

> ID：11067852
> 
> 赞同：2
> 
> 时间：2012-06-16T23:36:36.553
> 
> 标签：apex-code, soql

你能从一个 sql 查询中填充一个集合吗？我无法让我的语法正常工作

设置 c = [从联系人限制 1000 中选择 id]；

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T09:56:01.350

您需要声明集合的类型，并使用将列表作为参数的集合构造函数，为您提供如下内容：

```
Set<Contact> c = new Set<Contact>( [SELECT Id, Name FROM Contact LIMIT 1000] ); 
```

# sas - SAS 创建动态间隔

> ID：11067853
> 
> 赞同：2
> 
> 时间：2012-06-16T23:37:27.507
> 
> 标签：sas

这有点复杂（至少对我来说很好）。

这是我必须做的：假设我有以下数据集：

```
date    price   volume
02-Sep  40  100
03-Sep  45  200
04-Sep  46  150
05-Sep  43  300 
```

假设我有一个断点，希望在我的数据集中创建一个区间。例如，让我的断点 = 200 卷交易。

我想要的是创建一个 ID 列并为每个断点 = 200 记录一个 ID 变量 =1,2,3,...。当您对每个 ID 的所有体积求和时，该值必须在所有 ID 变量中保持不变。

因此，使用上面的示例，我的最终数据集应如下所示：

```
date    price   volume  id
02-Sep  40  100 1
03-Sep  45  100 1
03-Sep  45  100 2
04-Sep  46  100 2
04-Sep  46  50  3
05-Sep  43  150 3
05-Sep  43  150 4 
```

（最后一行可能会错过一些价值，但这很好。我会踢出最后一个 id）

如您所见，我必须“分解”一些行（例如第二行，我将 200 分成两个 100 卷），以便在所有 ID 中保持总和 200 的恒定值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T00:42:18.070

看起来您正在为流量毒性 VPIN 计算进行体积分桶。我认为这有效：

```
%let bucketsize = 200;

data buckets(drop=bucket volume rename=(vol=volume));
    set tmp;
    retain bucket &bucketsize id 1;

    do until(volume=0);
        vol=min(volume,bucket);
        output;
        volume=volume-vol;
        bucket=bucket-vol;
        if bucket=0 then do;
            bucket=&bucketsize;
            id=id+1;
        end;
    end;
run; 
```

我用您的数据集对此进行了测试，它看起来正确，但我会仔细检查几个案例以确认它是否正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:47:35.797

如果您有一个指示“买入”或“卖出”的变量，那么您可以试试这个。假设这个变量被称为类型并取值“B”或“S”。使用此方法的一个优点是更容易处理“按组”（如果有）。

```
%let bucketsize = 200;

data tmp2;
  set tmp;
  retain volsumb idb volusums ids;

  /* Initialize. */
  volusumb = 0; idb = 1; volsums = 0; ids = 1;

  /* Store the current total for each type. */
  if type = 'B' then volsumb = volsumb + volume;
  else if type = 'S' then volsums = volsums + volume;

  /* If the total has reached 200, then reset and increment id. */
  /* You have not given the algorithm if the volume exceeds 200, for example the first two values are 150 and 75\. */
  if volsumb = &bucketsize then do; idb = idb + 1; volsumb = 0; end;
  if volsums = &bucketsize then do; ids = ids + 1; volsums = 0; end;

  drop volsumb volsums;
run; 
```

# php - Zend 布局 - 页眉和页脚

> ID：11067858
> 
> 赞同：0
> 
> 时间：2012-06-16T23:38:15.997
> 
> 标签：php, zend-framework

我觉得我的问题比较简单。我是 Zend 框架的新手，我希望能够调用控制器来为页眉或页脚做一些工作。我已经创建了一个 HeaderController 和一个 applications/views/scripts/headers/index.phtml - 我要做的就是获取该数据，并默认将其放入我的布局中。

如果我导航到 /header，一切正常。

编辑：

取得了一些进展 - 如果我添加：

```
$this->render("header/index.phtml"); 
```

它呈现所有静态数据，但似乎没有运行 HeaderController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:54:38.210

试试这段代码，一定要禁用标题控制器中的布局，因为目的只是呈现有限数量的内容。

```
<?= $this->action('index', 'header', null, array('possible_args'=>'here')); ?> 
```

可以在此处查看文档。

[http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.action](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.action)

# opencl - OpenCL 数组索引似乎损坏了

> ID：11067862
> 
> 赞同：1
> 
> 时间：2012-06-16T23:39:14.950
> 
> 标签：opencl

我有一个带有简单数组声明和初始化的内核，以及一个额外的函数“get_smooth_vertex(...)”，我对其进行了更改以演示一个问题：

```
//More const __constant declarations
const __constant int edge_parents[12][2] = {    {0,1},  {0,2},  {1,3},  {2,3},  {0,4},  {1,5},  {2,6},  {3,7},  {4,5},  {4,6},  {5,7},  {6,7} };
//More Functions
float3 get_smooth_vertex(const int edge_index, const float* cube_potentials) {
    int i1 = edge_parents[edge_index][0];
    int i2 = edge_parents[edge_index][1];
    if (i1==i2) return (float3)(0);\n"
    return (float3)(1);\n"
}
__kernel void march(const __global float* potentials, __global float* vertices, __global float* normals, const __constant float4* points, const int numof_points) {
    //Lots of stuff.
    //Call get_smooth_vertex(...) a few times
    //More stuff.
} 
```

“get_smooth_vertex(...)”中的 if 路径似乎总是被执行！现在，我无法想象为什么会这样，因为“edge_parents”中的每一对都是不同的。我检查了“edge_index”，它总是 >= 0 并且总是 <= 11。此外，没有一个变量在全局或局部范围内有别名。内核（和主机代码，FWIW）编译时没有警告或错误。

所以，我不知道出了什么问题——为什么索引会彼此相等？对齐，也许？我只是完全忘记了 C 是如何工作的吗？注意——这将是皇家用户错误。. .

谢谢，
伊恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:27:44.910

我检查了您的代码并且比较工作正常（删除尾随之后`\n"`）。在评估 的返回值时，您可能犯了一个错误`get_smooth_vertex()`。但是如果没有显示它是如何调用的代码，这很难说。

# html - 如何使用 CSS3 在文本中放置图像？

> ID：11067863
> 
> 赞同：3
> 
> 时间：2012-06-16T23:39:20.720
> 
> 标签：html, css

我想在鼠标悬停时使用蒙版更改文本的外观。我认为 image-mask 是正确的方法，但我无法让它工作。我的目标是在文本中包含图像。

HTML：

```
<div id="BEN">BEN</div> 
```

​ CSS：

```
#ben {
    font-family: 'Arial';
    font-size: 72px;
    color: rgba(0,0,0,1);
    float: right;
    line-height:90px;
    font-weight:bold;

}
#ben:hover {
-webkit-mask-image:url(https://dl.dropbox.com/u/16640285/mask.jpg);
-o-mask-image:url(https://dl.dropbox.com/u/16640285/mask.jpg);
-moz-mask-image:url(https://dl.dropbox.com/u/16640285/mask.jpg);
mask-image:url(https://dl.dropbox.com/u/16640285/mask.jpg);
}​ 
```

[http://jsfiddle.net/tKE6N/3/](http://jsfiddle.net/tKE6N/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T00:52:45.367

根据您的问题标题，更重要的是您对文本字母内的图像的期望，您需要使用 CSS3`background-clip`来完成此操作，而不是`mask-image`.

这是一个 webkit[**教程**](http://tympanus.net/codrops/2011/12/12/experiments-with-background-clip-text/)，可以为您指明正确的方向。

[**用这个jsFiddle**](http://jsfiddle.net/f2Bg3/)玩它（Chrome 或 Safari）。

* * *

对于`background-clip` **值**，[**Firefox**](https://developer.mozilla.org/en/CSS/background-clip)不支持`text`但支持`border-box`、`padding-box`和`content-box`。由于这个原因，该演示无法在 Firefox v13.0.1 中运行，但预计 v14 将具有此功能。

解决方法是使用[**此处**](http://www.myadzel.ru/tests/html/text-background/)所示的 SVG 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:43:01.737

它不起作用，因为您声明了您的 div`<div id="BEN">BEN</div>`并且您的`CSS`班级是本所以将班级更改为`BEN`或将您的 div 更改为`id="ben"`

`HMTL`这是您必须首先检查广告`CSS`文件中是否有正确的类的第一件事。`CSS`课程是`case-sensitive`如此的本，与本不一样。

更多[信息](http://devedge-temp.mozilla.org/viewsource/2001/css-class-id/)

这是有关[CSS Mask-Image & Text的更多信息](http://trentwalton.com/2011/05/19/mask-image-text/)

# phantomjs - Casperjs 检查一个 javascript 对象

> ID：11067866
> 
> 赞同：16
> 
> 时间：2012-06-16T23:40:39.287
> 
> 标签：phantomjs, casperjs

如何检查 casperjs 脚本中的对象？

我试过`console.log(arguments)`了，但它只打印 [object Arguments] 或 [object Object]。

我希望得到类似的东西：{'firstparam':'value'...}

就像在 Javascript 控制台或 Node.js 中一样...

也许这是一个 Phantomjs 的问题，我不确定......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-16T23:44:19.300

我想我找到了：[http ://docs.casperjs.org/en/latest/debugging.html#dump-serialized-values-to-the-console](http://docs.casperjs.org/en/latest/debugging.html#dump-serialized-values-to-the-console)

```
var utils = require('utils');

utils.dump({
    foo: {
        bar: 42
    },
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-22T00:15:02.077

JSON.stringify 用于简单的字符串读取，例如

```
casper.test.comment(JSON.stringify(object)); 
```

# jquery - 试图弄清楚如何移动jquery ui按钮

> ID：11067869
> 
> 赞同：0
> 
> 时间：2012-06-16T23:41:02.593
> 
> 标签：jquery, jquery-ui-dialog

我在这里阅读了许多与 jquery ui 按钮相关的问题，我看不到有人问的一件事可能会指出我的方法是错误的 - 但我需要能够做以下两件事之一：

1.  要么像平常一样将按钮添加到 jquery UI 对话框，然后将它们重新定位到对话框上我需要它们的位置（一些在按钮窗格之外）

2.  或者向我在对话框中呈现的视图添加一个按钮，以及如何让它继承由 jquery 呈现的按钮的 css 和行为。

编辑：所以要回答一些具体的问题。

对话框的按钮窗格上当前有一个保存和取消按钮。他们应该在那里。但我想添加几个与 Knockout JS 绑定的按钮，并希望将它们放在我正在加载的对话框中的视图中。

示例：我有一个带有“添加”按钮的文本框，该按钮允许将文本框中的文本添加到列表框（如组合框）。这只是严格在对话框的视图模型上工作的两种附加按钮之一。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:50:29.110

创建按钮后，只需将 .addClass(className) 用于新创建的按钮，该按钮的定位位于 Css 类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:42:46.840

实际上，我发现我可以使用 jQuery 的 .content() 和 .append() 方法来允许我移动 dom 元素而不破坏绑定。

# python - Python：递归深度超出错误

> ID：11067873
> 
> 赞同：0
> 
> 时间：2012-06-16T23:41:42.620
> 
> 标签：python

我重新设计了程序以获得大素数。现在它工作正常，除了在打印所有输出之后我最后得到大量红色短语。有人可以告诉我为什么吗？

输出的结尾是：

```
(100000939.0, 'is prime')
(100000963.0, 'is prime')
(100000969.0, 'is prime') 
```

错误是

```
Traceback (most recent call last):
  File "C:/Users/Marcela/Documents/Prime numbers to 100", line 48, in <module>
    loopfunction()
  File "C:/Users/Marcela/Documents/Prime numbers to 100", line 35, in loopfunction
    loopfunction()
  File "C:/Users/Marcela/Documents/Prime numbers to 100", line 35, in loopfunction
    loopfunction()
  File "C:/Users/Marcela/Documents/Prime numbers to 100", line 35, in loopfunction
    loopfunction()
...(many lines of it, the int ends with:) 
File "C:/Users/Marcela/Documents/Prime numbers to 100", line 13, in loopfunction
    while index <= 200000000.0:
RuntimeError: maximum recursion depth exceeded in cmp 
```

这是脚本：

```
from __future__ import division
import sys
index=100000000.0
checker=2.0

def loopfunction():
    global index
    global checker
    checker=2

    while index <= 200000000.0:

        if index>=200000001:
            sys.exit(1)
        while checker<=14473.0:

            div = index/checker
            roundiv=round(index/checker, 0)
            if index == 1:
                print (index, "is prime")
                checker=2
                index=index+1
                loopfunction()   
            if checker == index:
                print (index, "is prime")
                checker=2
                index=index+1
                loopfunction()
            if roundiv==div:

                checker=2
                index=index+1
                loopfunction()    

            if checker==14473.0:

                print (index, "is prime")
                checker=2
                index=index+1
                loopfunction()

            checker = checker +1

loopfunction() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:54:34.243

You can fix your recursion limit issue by simply not recursing. Your code already has the loops you need.

Just change the calls to `loopfunction()` in the various if statements to `break`.

While that is all that is needed to make the code function, I've noticed though that some of number of your if statements are unnecessary (either redundant with the loop conditions, or simply impossible to ever hit). You're also using `while` loops where `for _ in range()` loops would make more sense. Here's a greatly simplified version of your code, with some things renamed to clarify their purposes:

```
from math import sqrt

def primeFinder(start, end):
    prime = True

    for index in range(start, end):
        for checker in range(2, int(sqrt(index))+1):
            if index % checker == 0:
                prime = False
                break

        if prime:
            print("%d is prime" % index)

        prime = True

primetest(100000000, 200000001) 
```

This version will still take a very long time (probably hours). If you really want to test a hundred million values for primeness, you should probably investigate a better algorithm, such as the [Sieve of Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes).

# mysql - Ruby 的 have_header 方法在哪里查找头文件？

> ID：11067877
> 
> 赞同：5
> 
> 时间：2012-06-16T23:42:07.583
> 
> 标签：mysql, ruby-on-rails, rubygems, centos, header-files

在 CentOS 5.7 机器上，我无法安装最新版本的 mysql2 gem；它没有找到 errmsg.h：

```
/usr/bin/ruby extconf.rb
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... no
checking for mysql_query() in -lmysqlclient... yes
checking for mysql.h... no
checking for mysql/mysql.h... yes
checking for errmsg.h... no
-----
errmsg.h is missing.  please check your installation of mysql and try again.
-----
*** extconf.rb failed *** 
```

mysql 头文件位于/usr/include/mysql。服务器上存在较旧版本的 gem，因此它一定是在某一时刻成功构建的。

请注意，它在检查 mysql.h 时失败，但在 mysql/mysql.h 上成功。但是，它不会对 errmsg.h 重复此操作。通过这个我猜它不是在看/usr/include，但我不确定。

我深入研究了 extconf.rb 源代码，发现它正在使用该`have_header`方法来定位头文件。我调试了执行以发现它正在寻找“mysql/errmsg.h”的相对路径。但是我还没有找到任何文档来解释它如何将其扩展为绝对路径。

have_header 在哪里以及如何定位其头文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T19:01:32.840

我相信我已经找到了答案。

看来是`have_header`看系统包含路径。如果未设置相关环境变量，则默认包含路径为`/usr/local/include`和`/usr/include`。

如果您想手动设置它们，您可以执行以下操作：

```
export C_INCLUDE_PATH=/usr/include/mysql/ 
```

如果头文件是 C 文件，即使您正在编译 C++ 程序也是如此。另一方面，如果你的头文件是 C++，而不是 C，你会这样做：

```
export CPLUS_INCLUDE_PATH=/usr/include/mysql 
```

当然，您找到了解决方法，即包含`dir_config('mysql')`在您的`extconf.rb`. 这使您能够使用该`--with-mysql-include`选项并手动提供路径。

这是我的来源： http: [//www.network-theory.co.uk/docs/gccintro/gccintro_23.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_23.html)

这是同一问题的更通用版本（带有答案）：[How to add a default include path for gcc in linux?](https://stackoverflow.com/questions/558803/how-to-add-a-default-include-path-for-gcc-in-linux)

# android - Android：OpenGL上下文何时销毁？

> ID：11067881
> 
> 赞同：15
> 
> 时间：2012-06-16T23:42:25.170
> 
> 标签：android, opengl-es

在android上，`GLSurfaceView`文档是这样说的：

> 当活动暂停和恢复时，必须通知 GLSurfaceView。GLSurfaceView 客户端需要在活动暂停时调用 onPause() 并在活动恢复时调用 onResume()。这些调用允许 GLSurfaceView 暂停和恢复渲染线程，还允许 GLSurfaceView 释放和重新创建 OpenGL 显示。

所以我应该在我的活动中做这样的事情：

```
public void onPause() {
    myGlSurfaceView.onPause();
}

public void onResume() {
    myGlSurfaceView.onResume();
} 
```

我在我的代码中观察到，如果我不打电话`onPause()`，`onResume()`那么当我按下主页按钮时上下文不会丢失，所以我可以在应用程序之间切换，然后回到我的游戏，一切正常。我看到的是，如果我使用后退按钮关闭游戏，那么当我再次打开它时屏幕是黑色的，但我可以更改后退按钮的行为以完全关闭游戏并避免这个问题。

所以我的问题是：*OpenGL*上下文何时被破坏？如果我不打电话`onPause()`，`onResume()`我可以假设它永远不会被破坏吗？

**编辑：**

我的目标是 Android 2.2，所以`setPreserveEGLContextOnPause()`不是我的选择。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T13:54:07.603

只有在调用了 Activity::onPause() 之后，OpenGL 才可能丢失，并且仅在这种情况下。请参阅[setPreserveEGLContextOnPause](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#setPreserveEGLContextOnPause%28boolean%29)文档：

> EGL 上下文是否实际保留取决于运行程序的 Android 设备是否可以支持任意数量的 EGL 上下文。只能支持有限数量的 EGL 上下文的设备必须释放 EGL 上下文才能允许多个应用程序共享 GPU。[...] **EGL 上下文 [可以] 在 GLSurfaceView 暂停时释放**，并在 GLSurfaceView 恢复时重新创建。

*编辑：文档中描述的情况在所有 Android 版本上都有效。不管你是否有权访问`setPreserveEGLContextOnPause`*

在我看来，这是 Android OGLES 实现的一个主要缺点：你不能确定。

[文档](http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html)本身含糊不清（EGL Context Lost note）：

> 在某些情况下，EGL 渲染上下文会丢失。这通常发生在设备在进入睡眠状态后唤醒时

我注意到关于 Home 和 Back 按钮的行为与您相同。通话并不完全相同（但无法准确记住它们）。

确保 OpenGL 上下文可用的唯一方法是在[onSurfaceCreated中创建所有 OpenGL 资源](http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html#onSurfaceCreated%28javax.microedition.khronos.opengles.GL10,%20javax.microedition.khronos.egl.EGLConfig%29)

注意**setPreserveEGLContextOnPause**。再一次，此[文档注释](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#setPreserveEGLContextOnPause%28boolean%29) 演示了上下文破坏的“随机”行为：

> 如果设置为 true，则在 GLSurfaceView 暂停时**可以保留EGL 上下文。**[...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:18:11.303

setPreserveEGLContextOnPause 是您的一个选项，您只需要自己实现 GlSurfaceView。

在此处查看我对类似问题的回答： [防止 onPause 破坏 OpenGL 上下文](https://stackoverflow.com/questions/2112768/prevent-onpause-from-trashing-opengl-context/11167948#11167948)

# c - 我可以从静态库中制作标题吗？

> ID：11067883
> 
> 赞同：0
> 
> 时间：2012-06-16T23:42:31.250
> 
> 标签：c, winapi, gcc, cygwin, winsock2

我有一个库（ws2_32）和一个头文件（ws2tcpip.h），但由于某种原因，库中有一些函数不在头文件中。有没有办法可以确定方法签名，以便我自己将它们包含在标题中？

```
asdf@fdsa ~$ strings /usr/lib/w32api/libws2_32.a | grep -i 'inet_*ntop'
_inet_ntop@16
__imp__inet_ntop@16
_InetNtopW@16
__imp__InetNtopW@16
inet_ntop                      <<< I need this one
_inet_ntop@16
__imp__inet_ntop@16
InetNtopW                      <<< or this one
_InetNtopW@16
__imp__InetNtopW@16
asdf@fdsa ~$ grep -i -B 4 -A 2 -R "ntop" /usr/include/w32api/ws2tcpip.h
asdf@fdsa ~$ 
```

这应该是可能的，因为链接器必须验证这一点，不是吗？

参考：[GCC/Cygwin下的InetNtop和ws2tcpip.h](https://stackoverflow.com/questions/10974328/inetntop-and-ws2tcpip-h-under-gcc-cygwin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T23:59:04.113

不，那里没有。并非没有拆卸库并进行大量猜测。一般来说，认为它是无望的。

但是，类似`InetNtopW`和的函数`inet_ntop`都有文档记录（[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/cc805843%28v=vs.85%29.aspx)），所以我们知道函数签名是什么。请注意，这些功能被标记为需要 Vista，实际上您可以看到`WS2tcpip.h`它们被一个守卫包围：

```
#if (NTDDI_VERSION >= NTDDI_VISTA) 
```

因此，除非您为 Vista 支持定义预处理器宏，否则您将无法获得原型。

```
// Require Vista
#define WINVER 0x0600
#define _WIN32_WINNT 0x0600
#include <WS2tcpip.h> 
```

或者，您可以使用`WSAAddressToString`. 这是一个类似的功能，但不完全兼容。可`WSAAddressToString`从 Windows 2000 获得。

**脚注：**和`InetNtopW`函数`inet_ntop`基本上是一样的，除了 W 版本的 take`wchar_t`和`inet_ntop`take `char`。许多 Windows 功能都是以这种方式复制的。

# haskell - 如何将本地版本的库与 cabal 链接

> ID：11067885
> 
> 赞同：4
> 
> 时间：2012-06-16T23:42:45.213
> 
> 标签：haskell, cabal, hakyll

我想进行本地更改`Pandoc`并重新编译`Hakyll`，以便它使用该本地更改。所以，我下载了这两个库的开发版本：

```
git clone https://github.com/jgm/pandoc.git
git clone https://github.com/jaspervdj/hakyll.git 
```

然后我进行了`Pandoc`我想要的更改，然后使用

```
cd pandoc
cabal install 
```

我使用安装`pandoc`二进制文件进行了测试，它可以按预期工作。

现在，我想`Hakyll`了解这些变化。所以，我尝试了

```
cd hakyll
cabal install 
```

现在`hakyll`开始重新安装`pandoc`，并从 Hackage 获取新版本（我猜），从而覆盖我在`Pandoc`. 如何说服`cabal`使用本地安装的版本`Pandoc`而不是重新安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:30:15.833

我意识到默认情况下`pandoc`使用旧版本的`blaze-html`while `Hakyll`requires构建`blaze-html 1.5`。使用重建 pandoc

```
cabal install -fblaze_html_1_5_0 
```

然后`Hakyll`不会重新安装`Pandoc`。

# ruby-on-rails - 从 rails 3.1 升级到 3.2.6 后出错

> ID：11067889
> 
> 赞同：0
> 
> 时间：2012-06-16T23:43:05.560
> 
> 标签：ruby-on-rails, macos, rvm

我为自己设定了在本地 mac book air lion 开发环境中将我的应用程序从 rails 3.1 升级到 rails 3.2.6 的任务。我按照本[指南](http://railsapps.github.com/installing-rails.html)升级了 ruby​​，我的所有 gem 似乎都已安装，并且 rails -v 给出了 rails 3.2.6 的答案。如果我运行任何 rails 命令，例如 rails c 来启动控制台，我会得到：

```
MacBook-Air:myapp bob$ rails c
/Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/pubnub-ruby-0.0.9/lib/pubnub-ruby.rb:1:in `require': cannot load such file -- ./pubnub.rb (LoadError)
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/pubnub-ruby-0.0.9/lib/pubnub-ruby.rb:1:in `<top (required)>'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/bundler-1.0.21/lib/bundler/runtime.rb:68:in `require'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/bundler-1.0.21/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/bundler-1.0.21/lib/bundler/runtime.rb:66:in `each'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/bundler-1.0.21/lib/bundler/runtime.rb:66:in `block in require'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/bundler-1.0.21/lib/bundler/runtime.rb:55:in `each'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/bundler-1.0.21/lib/bundler/runtime.rb:55:in `require'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/bundler-1.0.21/lib/bundler.rb:122:in `require'
    from /Users/bob/work/myapp/config/application.rb:13:in `<top (required)>'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/railties-3.2.6/lib/rails/commands.rb:39:in `require'
    from /Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/railties-3.2.6/lib/rails/commands.rb:39:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

是的，我确实在我的应用程序中使用了 pubnub - 它一直运行良好，所以我不怀疑这一定是问题所在。

application.rb 第 13 行（可能不相关）是

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require *Rails.groups(:assets => %w(development test))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

我在部署之前预编译资产。

/Users/bob/.rvm/gems/ruby-1.9.3-p0@rails32/gems/pubnub-ruby-0.0.9/lib/pubnub-ruby.rb:1 文件存在，我打开它很好。

有谁知道发生了什么/是pubnub特定的还是其他的？我不确定如何进一步排除故障，到目前为止，谷歌搜索还没有提出任何问题。

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:52:58.337

`pubnub-ruby.rb`我在[repo 中](https://github.com/pubnub/pubnub-api/tree/master/ruby/lib)没有看到该 gem 的文件。尝试运行`$ bundle install`或`$ gem update pubnub-ruby`.

# python - 在 Python 序列中删除相邻的多个元素

> ID：11067892
> 
> 赞同：1
> 
> 时间：2012-06-16T23:44:33.670
> 
> 标签：python, sequence

我有一个类似的序列`[0, 1, 0, 1, 0, 1, 0]`，我需要一个函数来删除重复的相邻序列对，保留第一个，然后返回`[0, 1, 0]`。这些是我期望的一些结果。

```
>>> remove_repeated_pairs([0, 1])
[0, 1]
>>> remove_repeated_pairs([0, 1, 0])
[0, 1, 0]
>>> remove_repeated_pairs([0, 1, 0, 1])
[0, 1]
>>> remove_repeated_pairs([0, 1, 0, 1, 0])
[0, 1, 0]
>>> remove_repeated_pairs([2, 0, 1, 0, 1, 0])
[2, 0, 1, 0]
>>> remove_repeated_pairs([1, 2, 0, 1, 0, 1, 0])
[1, 2, 0, 1, 0] 
```

第一版：

我试过这段代码：

```
def remove_repeated_pairs(seq):
    result = []
    for i in range(0, len(seq), 2):
        if len(result) >= 2:
            last_seq = result[-2:]
        else:
            last_seq = None
        pair = seq[i:i + 2]
        if pair != last_seq:
            result.extend(pair)
    return result 
```

但它不适用于此：

```
>>> remove_repeated_pairs([1, 3, 0, 2, 1, 2, 1, 3, 0])
[1, 3, 0, 2, 1, 2, 1, 3, 0] 
```

正确答案应该是`[1, 3, 0, 2, 1, 3, 0]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:24:36.727

我认为问题出在这样一个事实，即您将列表中的元素逐个遍历 2（对于 i in range(0, len(seq), 2)。因此，如果重复的对从一个奇怪的地方开始，您就赢了'不要检测到它 - 就像你给出的最后一个例子一样。

我会尝试类似的东西：

```
def remove_repeated_pairs(l):
    i = 2;
    while i < len(l)-1:
            if l[i] == l[i-2] and l[i+1]==l[i-1]:
                l.pop(i);
                l.pop(i);
            else:
                i+=1;

    return l; 
```

问候，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T01:01:16.677

这是适用于任意可迭代的版本，而不仅仅是序列：

```
def remove_repeated_pairs(iterable):
    it = iter(iterable)
    a = next(it) # always yield the first pair
    yield a
    b = next(it)
    yield b

    c = next(it)
    for d in it:
        if a != c or b != d:
            yield c
            a, b, c = b, c, d # shift by one item
        else: # repeated pair, skip it
            a, b, c = c, d, next(it)
    yield c 
```

### 例子

```
>>> list(remove_repeated_pairs([1, 3, 0, 2, 1, 2, 1, 3, 0]))
[1, 3, 0, 2, 1, 3, 0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T01:05:55.907

这是一个更简洁的版本：

```
def remove_repeated_pairs(seq):
    pairs = zip([-1] + seq,seq)[1:]
    l = [index for (index,pair) in enumerate(pairs) if (index > 1) and
                (pair == pairs[index-2])]
    return [seq[x] for x in range(len(seq)) if x not in l and x+1 not in l ]

print remove_repeated_pairs([1, 3, 0, 2, 1, 2, 1, 3, 0])
#OUTPUT: [1, 3, 0, 2, 1, 3, 0]

print remove_repeated_pairs([1, 2, 4, 1, 4, 1, 3])
#OUTPUT: [1, 2, 4, 1, 3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T00:49:13.773

您还必须检查从奇数索引开始的对，即对 seq[1:2] 等于 seq[3:4] 以及偶数，即 seq[0:1] 等于 seq[2:3]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T00:53:56.940

您需要一个接一个地前进，而不是两个接一个地前进

```
def remove_repeated_pairs(l):
     if(len(l) < 4):
         return l
     result = l[:2]
     i = 2
     while i < (len(l)-1):
         if l[i] == result[-2] and l[i+1] == result[-1]:
             i += 2
         else:
             result.append(l[i])
             i += 1
     result += l[i:]
     return result 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T01:00:33.600

```
def remove_repeated_pairs(seq):
    ret = [seq[0]]
    s = None
    i = 1
    while i < len(seq)-1:
        pair = (seq[i], seq[i+1])
        if pair != s:
            s = (seq[i-1], seq[i])
            ret.append(seq[i])
        else:
            i+=1
        i+=1
    if i == len(seq)-1:
        ret.append(seq[i])
    return ret 
```

# android - 谷歌地图点击事件不会在移动设备上触发 addDomListener 但适用于桌面浏览器

> ID：11067898
> 
> 赞同：2
> 
> 时间：2012-06-16T23:47:19.010
> 
> 标签：android, google-maps, google-maps-api-3, listener, google-maps-mobile

我有两个按钮

```
<CENTER><button id="prevbutton" type="button">Prev &#171;</button>&nbsp;&nbsp;&nbsp;&nbsp;<button id="nextbutton" type="button">Next &#187;</button> 
```

定义如上。

我想在使用下面的代码单击按钮时更改方向。

```
 function attachInstructionText(marker, text) {
          google.maps.event.addListener(marker, 'click', function() {
            stepDisplay.setContent(text);
            stepDisplay.open(map, marker);
            map.setCenter(marker.getPosition());
            map.setZoom(16);
          });
        }
        calcRoute();
        var prevbutton=  document.getElementById("prevbutton");
        var nextbutton=  document.getElementById("nextbutton");
        google.maps.event.addDomListener(prevbutton, 'click', function() {
            if(stepnumber>0){
            stepnumber-=1;
            if(directionsvisiblemarker&&directionsvisiblemarker!=null){
                directionsvisiblemarker.setVisible(false);
            }
            directionsvisiblemarker=mArray[stepnumber];
            google.maps.event.trigger(directionsvisiblemarker, 'click');
        }

        });
        google.maps.event.addDomListener(nextbutton, 'click', function() {
            if(stepnumber<totalsteps){
                stepnumber+=1;
                if(directionsvisiblemarker&&directionsvisiblemarker!=null){
                    directionsvisiblemarker.setVisible(false);
                }
                directionsvisiblemarker=mArray[stepnumber];
                google.maps.event.trigger(directionsvisiblemarker, 'click');
                console.log(directionsvisiblemarker);
            }
        });

}; 
```

上面的代码至少适用于 safari 和 chrome 桌面浏览器，但不适用于移动设备。我也尝试用 mouseup 替换 click 但没有成功。

# object - 是否有克隆 CLOS 对象的通用方法？

> ID：11067899
> 
> 赞同：8
> 
> 时间：2012-06-16T23:47:38.207
> 
> 标签：object, clone, common-lisp, clos

我正在寻找一种以浅层方式克隆 CLOS 对象的方法，因此创建的对象将是相同类型，每个插槽中的值相同，但是是一个新实例。我发现最接近的是标准函数复制结构，它对结构执行此操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T02:40:40.887

一般来说，没有标准的预定义方法来复制 CLOS 对象。如果可能的话，提供一个合理的默认复制操作（至少）在大多数时间为任意对象做正确的事情并不是一件容易的事，因为正确的语义会随着类和应用程序的变化而变化。MOP 提供的扩展可能性使得提供这样的默认值变得更加困难。此外，在 CL 中，作为一种垃圾收集语言，对象的复制并不经常需要，例如当作为参数传递或返回时。因此，根据需要实施复制操作可能是最干净的解决方案。

话虽这么说，这是我在我的一个片段文件中找到的，它可能会做你想做的事：

```
(defun shallow-copy-object (original)
  (let* ((class (class-of original))
         (copy (allocate-instance class)))
    (dolist (slot (mapcar #'slot-definition-name (class-slots class)))
      (when (slot-boundp original slot)
        (setf (slot-value copy slot)
              (slot-value original slot))))
    copy)) 
```

`class-slots`您将需要对和的一些 MOP 支持`slot-definition-name`。

（我可能从[一个旧的 cll 线程](https://groups.google.com/d/topic/comp.lang.lisp/O2JU9m71t-0/discussion)中采用了这个，但我不记得了。我从来没有真正需要过这样的东西，所以它完全未经测试。）

您可以像这样使用它（使用 CCL 测试）：

```
CL-USER> (defclass foo ()
           ((x :accessor x :initarg :x)
            (y :accessor y :initarg :y)))
#<STANDARD-CLASS FOO>
CL-USER> (defmethod print-object ((obj foo) stream)
           (print-unreadable-object (obj stream :identity t :type t)
             (format stream ":x ~a :y ~a" (x obj) (y obj))))
#<STANDARD-METHOD PRINT-OBJECT (FOO T)>
CL-USER> (defparameter *f* (make-instance 'foo :x 1 :y 2))
*F*
CL-USER> *f*
#<FOO :x 1 :y 2 #xC7E5156>
CL-USER> (shallow-copy-object *f*)
#<FOO :x 1 :y 2 #xC850306> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T20:34:49.867

这是danlei提交的函数的一个略有不同的版本。我前段时间写了这篇文章，偶然发现了这篇文章。由于我不完全记得的原因，这在复制后调用了 REINITIALIZE-INSTANCE。我*认为*这样你就可以通过将额外的 initargs 传递给这个函数来对新对象进行一些更改

例如

```
(copy-instance *my-account* :balance 100.23) 
```

这也被定义为对“标准对象”对象的通用函数。这可能是也可能不是正确的做法。

```
(defgeneric copy-instance (object &rest initargs &key &allow-other-keys)
  (:documentation "Makes and returns a shallow copy of OBJECT.

  An uninitialized object of the same class as OBJECT is allocated by
  calling ALLOCATE-INSTANCE.  For all slots returned by
  CLASS-SLOTS, the returned object has the
  same slot values and slot-unbound status as OBJECT.

  REINITIALIZE-INSTANCE is called to update the copy with INITARGS.")
  (:method ((object standard-object) &rest initargs &key &allow-other-keys)
    (let* ((class (class-of object))
           (copy (allocate-instance class)))
      (dolist (slot-name (mapcar #'sb-mop:slot-definition-name (sb-mop:class-slots class)))
        (when (slot-boundp object slot-name)
          (setf (slot-value copy slot-name)
            (slot-value object slot-name))))
      (apply #'reinitialize-instance copy initargs)))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-28T14:46:21.960

此解决方案不需要`sl-mob`：

```
(defun copy-slot (s d slot)
  `(setf (,slot ,d) (,slot ,s)))

(defun copy-by-slots (s d slots)
  (assert (eql (class-of s) (class-of d)))
  (let ((f (lambda (s$) (eval (copy-slot s d s$)))))
    (mapcar f slots)))

(copy-by-slots src dest quoted-list-of-slots) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-04T14:47:56.587

我提到了一个产生 CLOS 实例克隆的肮脏技巧。

```
(defclass cl () ((sl1 :initarg :sl1) (sl2 :initarg :sl2)))

(defmethod update-instance-for-different-class ((copy cl) (original cl) &key)
  (setf clone copy))

(setf a (make-instance 'cl :sl1 111 :sl2 222))

(change-class a 'cl)

(eq clone a) -> NIL
(eql (slot-value a 'sl1) (slot-value clone 'sl1)) -> T 
```

暗示 CLOS 本身需要一个克隆的概念。

# ruby - Rails 3.2.6 路线不再工作

> ID：11067903
> 
> 赞同：2
> 
> 时间：2012-06-16T23:47:56.467
> 
> 标签：ruby, ruby-on-rails-3, routes

我一直在 3.2.3 中构建一个应用程序，它运行良好，一旦我升级到 3.2.6 以解决安全漏洞，我的一条路线就停止了工作。

这是一个简单的视图，当我在块对象上单击编辑时，它会将我带到编辑屏幕。但是，当我进行更改并点击提交时，我收到此错误：

```
Routing Error

No route matches {:action=>"edit", :controller=>"units", :id=>nil} 
```

在我的控制器中有一个编辑和更新操作：

```
def edit
    @units = Unit.find(params[:id])
  end

def update
    @units = Unit.find(params[:id])

    respond_to do |format|
      if @units.update_attributes(params[:unit])
        format.html { redirect_to @units, notice: 'Unit was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @units.errors, status: :unprocessable_entity }
      end
    end
  end 
```

在更新操作中，如果我将 redirect_to @units 更改为 redirect_to units_path，错误就会消失。3.2.6 中有什么改变不会让你像我一样重定向吗？我有另一个具有完全相同的编辑和更新操作的控制器，它可以正常工作。

我有两台笔记本电脑，一台是 3.2.3，另一台是 3.2.6。3.2.3 工作正常，但一旦我升级它，我就得到了同样的错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:05:43.273

是的，[redmine](https://github.com/rails/rails/issues/6585)报告了一个类似的问题……但这实际上是您自己的代码中暴露的错误问题。在某处你有一个 nil 被传递给一个路径函数，这应该总是一个错误但不是，而是在请求中捕获了其他参数（有时会做正确的事情）。

通读该链接以获取完整的独家新闻。

我不确定是否真的在看这段代码而没有看到完整的堆栈跟踪......很难想象`@units`在这一点上为零，所以可能涉及其他一些东西。

这不是超级关键，但在您的命名约定中，`@unit`它更适合于编辑和更新操作，而不是`@units`，因为应该只编辑一个单元。控制器的名称是什么？

# c++ - 指定范围内的维持值

> ID：11067907
> 
> 赞同：1
> 
> 时间：2012-06-16T23:49:21.970
> 
> 标签：c++, math, assembly, binary

可以说我有一个点，它在二维平面上的位置。这个点会随机改变它的位置，但这不是重点，所以让我们假设它有自己的速度，并且它在宽度和高度受限的平面上移动；因此，经过一段时间的移动，该点将到达平面边界。但它不允许离开飞机。

所以现在我可以检查每一帧的点位置，看看它是否到达边界。

if(point.x>bound.xMax)point.x=bound.xMax

如果我想将自己传送到飞机的第二侧，我可以简单地：

point.x = point.x%bound.xMax;

但是我需要将点位置存储在整数中。

对于我的 corei7 1.6 上的 1000 万个值，两种解决方案都有相似的时间。41ms vs 47 on second，所以在这种情况下使用模函数是没有意义的，只检查值会更快。

但是，有什么技巧可以让它更快吗？用于迭代数组的多线程方法不是解决方案。

也许我可以将我的绑定值缩放到一些奇怪的值，例如丢弃位置值的二进制解释的一部分。

如果有一些技巧可以做到，我认为有人在我之前做到了:) 你知道任何可以帮助我的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:30:49.090

如果有某种方法可以在平面坐标周围添加信息，则可以很好地在平面周围创建一个“边界”，其中包含一个被标识为“超出边界”的值。例如，如果您有一个 10x10 的板，请将其设为 12x12，并使用 2 个额外的行和列来插入该信息。

现在你可以做（​​伪代码）：如果板内点是“超出边界值”那么做你的事情END IF

请注意，如果您的点同时具有 x 和 y 值（我对您的情况的假设），则此方法仅是一种优化。

# jquery - 如何淡化和滑动jQuery动画

> ID：11067908
> 
> 赞同：2
> 
> 时间：2012-06-16T23:49:56.277
> 
> 标签：jquery, jquery-ui

我已经写了这个，但是动画正在发生冲突。如何更改它以使其正常工作？

```
 function () { 
$("#presentState").show("slide", { duration: 1500, easing: 'easeOutBack', direction: directionActive }); 
$("#presentState").fadeIn( 1500,  'easeOutBack'); 
} 
```

我也试过这个，它根本不起作用。

```
 $("#presentState").show("slide", { duration: 1500, easing: 'easeOutBack', direction: directionActive }).fadeIn(1500, 'easeOutBack').dequeue(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T23:51:59.613

您可以通过向 animate 发送属性映射来为多个 CSS 属性*[设置动画](http://api.jquery.com/animate/)*：

隐藏：

```
$("#presentState").animate({ marginLeft: "-1000px", opacity: 0 }, 1500); 
```

节目：

```
$("#presentState").animate({ marginLeft: "0", opacity: 1 }, 1500); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T00:31:46.193

这就是我最终做的事情：

```
function () {
$("#presentState").show("slide", { duration: 1500, easing: 'easeOutBack', direction: directionActive }).hide(); 
$("#presentState").fadeIn(1500).dequeue(); 
} 
```

我必须`.hide();`在第一个函数调用结束时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T02:59:26.850

这是我在stackoverflow中的第一个回复，希望得到您的同意，谢谢~

我已经添加了 2 个基于 jquery UI 效果的效果，它们是 slideFadein 和 slideFadeout 您可以从名称中想象效果是什么样的：同时滑动和淡入/淡出。用法与其他效果类似：

```
//this will slide up and fade out the element
$("#effect").effect("slideFadein",{},500);

//this will remove the element after effect end
$("#effect").effect("slideFadein",{mode:'remove'},duration); 
```

jquery UI 效果：[jqueryui.com/effect](http://jqueryui.com/effect)

jsFiddle：[jsfiddle.net/rw42S](http://jsfiddle.net/rw42S)

您可以通过将以下代码保存在 javascript 文件中并包含在 jquery.ui.js 之后来使用这两种效果，或者将它们粘贴到 jquery.ui.js 中

这是我的代码：

```
(function( $, undefined ) {
    $.effects.effect.slideFadeout = function(o,done){
        // create element
        var el = $( this ),
            props = [ "width" , "height" , "opacity"],
            speed = o.duration || 500,
            // 'hide' or 'remove'
            mode = o.mode || 'hide',
            animation,wrapper;

        // save properties
        $.effects.save( el, props );

        animation = {
            height: "0px",
            opacity: "0"
        };

        // create wrapper
        wrapper = $.effects.createWrapper( el ).css({
            overflow: "hidden"
        });

        // animate
        wrapper.animate(animation,speed,'swing',function(){
            if(el[mode]) el[mode]();
            // restore properties
            if(mode == 'hide') $.effects.restore( el, props );
            // remove wrapper
            $.effects.removeWrapper( el );
            // callback
            done();
        });
    };

    $.effects.effect.slideFadein = function(o,done){
        // create element
        var el = $( this ),
            speed = o.duration || 5000,
            props = [ "height" , "opacity"],
            animation,wrapper;

        animation = {
            height: el.outerHeight(true) + "px",
            opacity: "1"
        };

        // save properties
        $.effects.save( el, props );

        // show element to get correct width(if the element has no width)
        el.css({ height: "0px" }).show();

        // create wrapper
        wrapper = $.effects.createWrapper( el ).css({
            overflow: "hidden",
            opacity: "0",
            height: "0px"
        });

        // restore properties
        $.effects.restore( el, props );

        // animate
        wrapper.animate(animation,speed,'swing',function(){
            // remove wrapper
            $.effects.removeWrapper( el );
            // callback
            done();
        });
    };
})(jQuery); 
```

# javascript - backbone.js 应该如何处理没有返回结果的 GET 请求？

> ID：11067912
> 
> 赞同：3
> 
> 时间：2012-06-16T23:51:53.227
> 
> 标签：javascript, jquery, codeigniter, rest, backbone.js

我有许多文本输入元素，当其值发生更改时，将触发 fetch`listingListView`的 collection `listingCollection`，然后通过如下所示`listingListView`的函数使用新数据进行更新。`listingListView.refreshList`我正在使用 PHP/Codeigniter 来公开 RESTful API。

**问题：**如果从`fetch()`. 但是，当过滤器没有返回结果时，服务器端和客户端应该如何处理呢？目前 Chrome 的 javascript 控制台显示`404`错误，并且在 Network 选项卡中，XHR 请求以红色突出显示。如果返回零结果，我要做的就是将其置空`listingListView`并显示一条消息，例如*（没有返回结果）*，并且不在 javascript 控制台中引发任何错误。谢谢！

**PHP 代码**

```
function listings_get() {
    // Get filters
    $price_min = $this->get('price_min');

    $this->load->model('app_model');
    $results = $this->app_model->get_listings($price_min);

    if($results)
        $this->response($results);
    else 
        $this->response(NULL);
} 
```

**JS代码**

```
window.ListingListView = Backbone.View.extend({
    tagName: 'table',

    initialize: function() {
        this.model.bind('reset', this.refreshList, this);
        this.model.bind('add', function(listing) {
            $(this.el).append(new ListingListItemView({ model: listing }).render().el);
        }, this);
    },

    render: function() {
        _.each(this.model.models, function(listing) {
            $(this.el).append(new ListingListItemView({ model: listing }).render().el);
        }, this);
        return this;
    },

    close: function() {
        $(this.el).unbind();
        $(this.el).empty();
    },

    refreshList: function() {
        $(this.el).empty();
        this.render();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:54:30.997

Backbone triggers an "error" event on "sync" errors. You can catch the 404 error by creating an error handler function in your view.

```
this.model.on('error',this.defaultErrorHandler,this);

defaultErrorHandler: function(model, error) {
        console.log('status', error.status);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:11:31.600

您可以重载主干中的错误事件；尽管最好更改来自服务器的 REST 响应。如果没有结果，则使用空的 JSON 对象发回 200 ok。请务必从服务器测试空对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:22:50.213

没错，只需将响应设置为空，并将状态设置为 200：

```
$this->response(NULL, 200); 
```

# c# - 如何在 C# 中反转文本？

> ID：11067914
> 
> 赞同：-10
> 
> 时间：2012-06-16T23:52:08.593
> 
> 标签：c#, string, reverse

我知道这是一个简单的问题，但我想我会试一试。

所以说我有一个名为“toReverse”的文本框。如果我想反转那个 TextBox 中的所有文本，我该怎么做呢？

此外，我不能在其中使用 VB.NET，即使它有一种单行方式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-16T23:55:13.390

```
using System.Linq;

new String(str.Reverse().ToArray()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T00:06:27.977

```
char[] chararray = this.toReverse.Text.ToCharArray();
Array.Reverse(chararray);
string reverseTxt = "";
for (int i = 0; i <= chararray.Length - 1; i++)
{
    reverseTxt += chararray.GetValue(i);
}
this.toReverse.Text = reverseTxt; 
```

希望这可以帮助

![演示图片](../Images/b4b2768fe40d2ab8b5ee2a5119e2807e.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-16T23:53:54.397

您可以将其传递给 char 数组并将其反转:)

```
char[] arr = s.ToCharArray();
Array.Reverse(arr);
var yourString = new string(arr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T00:51:53.403

如果您不想使用内置设施，有几种方法可以做到这一点。例如，您可以创建一个数组，反转该数组（使用显式循环而不是`Array.Reverse`），然后从该数组创建一个新字符串：

```
char[] txt = myString.ToArray();
int i = 0;
int j = txt.Length - 1;
while (i < j)
{
    char t = txt[i];
    txt[i] = txt[j];
    txt[j] = t;
    ++i;
    --j;
}
string reversed = new string(txt); 
```

另一种方法是使用堆栈。将单个字符推入堆栈，然后将它们弹出以填充`StringBuilder`：

```
Stack<char> charStack = new Stack<char>();
foreach (var c in myString)
{
    charStack.Push(c);
}
StringBuilder sb = new StringBuilder(myString.Length);
while (charStack.Count > 0)
{
    sb.Append(charStack.Pop());
}
string reversed = sb.ToString(); 
```

另一种方法是向后遍历字符串，填充 a `StringBuilder`：

```
StringBuilder sb = new StringBuilder(myString.Length);
for (int i = myString.Length-1; i >= 0; --i)
{
    sb.Append(myString[i]);
}
string reversed = sb.ToString(); 
```

当然，上述内容有很多变化。

# python - PyTables：索引大型数组的多个维度

> ID：11067916
> 
> 赞同：3
> 
> 时间：2012-06-16T23:52:41.987
> 
> 标签：python, numpy, hdf5, pytables

我正在分析一些成像数据，这些数据由大型 3 维像素强度数组组成，尺寸为`[frame, x, y]`. 由于这些通常太大而无法保存在内存中，因此它们作为 PyTables 数组驻留在硬盘上。

我想做的是读出所有帧中任意像素子集的强度。这样做的自然方法似乎是列表索引：

```
import numpy as np
import tables

tmph5 = tables.open_file('temp.hdf5', 'w')
bigarray = tmph5.create_array('/', 'bigarray', np.random.randn(1000, 200, 100))

roipixels = [[0, 1, 2, 4, 6], [34, 35, 36, 40, 41]]
roidata = bigarray[:, roipixels[0], roipixels[1]]
# IndexError: Only one selection list is allowed 
```

不幸的是，PyTables 目前似乎只支持一组列表索引。另一个问题是列表索引不能包含重复项 - 我无法同时读取像素`[1, 2]`和`[1, 3]`，因为我的像素 x 坐标列表将包含`[1, 1]`. 我知道我可以遍历数组中的行：

```
roidata = np.asarray([row[roipixels[0], roipixels[1]] for row in bigarray]) 
```

但是对于我正在处理的大量帧，这些迭代读取变得非常慢。

有没有更好的方法来做到这一点？我对 PyTables 比较陌生，所以如果你有任何关于在大型数组中组织数据集的技巧，我很想听听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:50:19.593

不管它值多少钱，我经常对以 hdf 格式存储的 3D 地震数据做同样的事情。

由于嵌套循环，迭代读取速度很慢。如果您只执行一个循环（而不是遍历每一行），它会非常快（至少在使用时`h5py`。我通常只使用存储类似表的数据`pytables`）并且完全按照您的意愿行事。

在大多数情况下，您需要遍历索引列表，而不是遍历每一行。

基本上，你想要：

```
roidata = np.vstack([bigarray[:,i,j] for i,j in zip(*roipixels)]) 
```

代替：

```
roidata = np.asarray([row[roipixels[0],roipixels[1]] for row in bigarray]) 
```

如果这是您最常见的用例，调整存储数组的块大小将有很大帮助。在您的情况下，您需要长而窄的块，沿第一个轴的长度最长。

（警告：我没有用 测试过这个`pytables`，但它可以完美地与`h5py`。）

# javascript - 如何停止绑定到 AMQP 默认交换？

> ID：11067924
> 
> 赞同：4
> 
> 时间：2012-06-16T23:54:16.110
> 
> 标签：javascript, node.js, rabbitmq, amqp

每次我将 AMQP 队列绑定到交换器时，它似乎都会自动绑定到“默认”直接交换器。

这是使用rabbitMQ服务器和node.js的代码：

```
var amqp = require('amqp');

var connection = amqp.createConnection({host:'localhost'});

connection.on('ready', function(){
    var q = connection.queue('test_queue_name');
    var exc = connection.exchange('test_exchange', { autoDelete:true });
    q.bind('test_exchange', 'test.key');
}); 
```

这是使用“rabbitmqctl list_bindings”命令时的控制台输出：

```
Listing bindings ...
        exchange        test_queue_name queue   test_queue_name []
test_exchange   exchange        test_queue_name queue   test.key        []
...done. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:29:13.893

RabbitMQ 使用与队列名称相同的路由键自动将每个队列绑定到默认交换。

从[文档](http://www.rabbitmq.com/tutorials/amqp-concepts.html#exchange-default)

> 默认交换是代理预先声明的没有名称（空字符串）的直接交换。它有一个特殊的属性，使它对简单的应用程序非常有用：**创建的每个队列都会自动绑定到它，并使用与队列名称相同的路由键。**

我很确定这是 AMQP 规范的一部分。

# java - 找不到 Quartz Window 服务

> ID：11067935
> 
> 赞同：1
> 
> 时间：2012-06-16T23:58:26.733
> 
> 标签：java, macos, frameworks

我需要找到打开的窗口的坐标，即使它们不是由我的应用程序启动的，经过一番搜索后，我遇到了[quartz window services](https://developer.apple.com/library/mac/#documentation/Carbon/reference/CGWindow_Reference/DataTypes/DataTypes.html#//apple_ref/doc/uid/TP40008073-CH100-SW2)。但是，我链接到的参考文档没有提到它的位置，这是我能找到的唯一文档。我查看了其他框架参考文档，但没有一个提到它。

这个问题显然完全是我自己的无知，我也不想问。但是，我在整个互联网上进行了搜索，并且完全找不到有关石英窗口服务位置的参考。

它在哪里？它是框架的一部分吗？如果是，它属于哪个类？我只知道它包含什么功能，它们看起来正是我需要的！

预先感谢您的任何帮助。另外，如果您知道我将来如何为自己解决这个问题，我也将不胜感激。

注意：我不知道这是否重要，但我打算使用 JNA 从 Java 调用它，而不是从 C 中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:35:04.313

是的，这有点不太明显。通过搜索“Quartz Window Services”，我能够找到概述的链接，例如：[https ://developer.apple.com/library/mac/#documentation/Carbon/Reference/CGWindow_Reference/Reference/Introduction .html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/CGWindow_Reference/Reference/Introduction.html)

这表明它在 ApplicationServices 框架中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:35:41.167

首先，我不能 100% 确定您将如何从 Java 访问 C 方法（我自己从未做过），但如果可以进行桥接，您可以使用 Accessibility API 以获取所有正在运行的应用程序的窗口（[请参阅此相关问题的答案](https://stackoverflow.com/questions/2107657/mac-cocoa-getting-a-list-of-windows-using-accessibility-api)）。一旦你有了那个窗口列表，你就可以得到每个窗口在屏幕上所在位置的框架（坐标）。

使用 Accessibility API 的另一件事是，用户必须“选择加入”才能允许它。默认情况下通常不会打开它。

[这是另一个与您的问题非常匹配的问题](https://stackoverflow.com/questions/4036420/how-to-get-a-list-of-all-open-nswindow-from-all-running-application)，但接受的答案仅提供了一种解决方案来为您自己的（当前正在运行的）应用程序检索窗口。

# iphone - 获取 writeToFile:atomically: URL 保存到

> ID：11067939
> 
> 赞同：0
> 
> 时间：2012-06-17T00:00:25.813
> 
> 标签：iphone, objective-c, ios, ipad

我正在保存一些文件`NSData`，`writeToFile:atomically:`然后很快就想使用该文件。`NSURL`获取我刚刚保存的文件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:03:34.363

[`[NSData writeToFile: atomically:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/writeToFile%3aatomically%3a)有一个路径参数。

只需将路径参数设置为文件 URL 并将其保存为实例变量或属性，就可以完成所有设置。

或者更好的是，使用[`[NSData writeToURL: atomically:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/writeToURL%3aatomically%3a)（即将您的路径转换为 ​​URL 开头）并将其保存*为*属性或实例变量以供以后使用。

您可以通过 将路径转换为文件 URL [`[[NSURL alloc] initFileURLWithPath:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/initFileURLWithPath%3a)。

最后，您要问的问题的*真正*`NSData`答案是：不，您无法从任意“ ”对象中预测路径或 URL。您必须单独或与数据一起保存该信息，以便跟踪它的来源。

# windows-phone-7 - Facebook 身份验证显示不推荐使用的方法错误

> ID：11067940
> 
> 赞同：0
> 
> 时间：2012-06-17T00:01:16.167
> 
> 标签：windows-phone-7, facebook-c#-sdk

我正在使用 Facebook C# SDK 并尝试对我的用户进行身份验证。第一部分工作，我的应用程序向我展示了浏览器控件内的 facebook 登录页面。

这是我的代码，我正在关注[这个例子](http://igrali.com/2012/06/05/facebook-authentication-from-windows-phone-app/)。

```
 private readonly FacebookClient _fb = new FacebookClient();

    private void Browser_Loaded(object sender, RoutedEventArgs e)
    {
        var loginUrl = GetFacebookLoginUrl();
        BrowserControl.Navigate(loginUrl);
    }

    private Uri GetFacebookLoginUrl()
    {
        var parameters = new Dictionary<string, object>();
        parameters["client_id"] = FacebookSettings.AppID;
        parameters["redirect_uri"] = "https://www.facebook.com/connect/login_success.html";
        parameters["response_type"] = "token";
        parameters["display"] = "page";

        if (!string.IsNullOrEmpty(FacebookSettings.ExtendedPermissions))
            parameters["scope"] = FacebookSettings.ExtendedPermissions;

        return _fb.GetLoginUrl(parameters);
    } 
```

在我填写了我的详细信息以登录 facebook 后，我收到了这个错误：

![在此处输入图像描述](../Images/b40a6f3e72f6f117a8cfb046d641144b.png)

有什么想法不推荐使用哪种方法以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:08:45.067

我使用了相同的代码并且它正在工作。当显示参数设置为“touch”或“wap”时，由于 facebook API 中的错误而发生此类错误。使用“页面”时不应该发生这种情况。尝试使用“弹出”作为显示。

尝试在应用程序的高级设置选项卡（在 developer.facebook.com）中更改 2012 年 7 月的重大更改。有关此问题的信息，请参阅[此链接](http://www.rudyhuyn.com/blog/2012/04/09/1220/)。和facebook 开发者网站中的[类似问题](http://developers.facebook.com/bugs/355102764525510)。

# oop - 我需要更好地理解组合和继承

> ID：11067942
> 
> 赞同：0
> 
> 时间：2012-06-17T00:01:42.290
> 
> 标签：oop, inheritance, polymorphism, composition

我有一个棒球运动员超级班

我有一个从球员那里继承的左外野、中外野、右外野、3b、ss、2b、1b、接球手、投手。

所以，让我们以投手为例。投手班也会是从棒球运动员那里继承的超班吗？与从投手和棒球运动员类继承的首发，救援，设置，更接近的类？

我的投手武器库会是一个接口吗？例如，快球、曲线球、滑块、换球？

假设我们有一个新的名为 nolan 的投手实例，那么 nolan 的快球是否会是一个“组合”，因为 nolan 的快球依赖于 nolan，或者换句话说，或者没有他就不存在？

我被困在构图上……有人可以根据棒球的类比来解释一下吗……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:08:17.043

简单来说，继承是*is-a*关系，composition是*has-a*关系。

投手*是*棒球运动员，因此投手将从棒球运动员那里继承。此外，投手*有*一个投手库，因此可以定义为组合，尽管如果投手使用不同的投手，聚合可能更合适，因为聚合包括列表。

# jquery - jQuery UI - 带有标签的链接

> ID：11067946
> 
> 赞同：0
> 
> 时间：2012-06-17T00:03:26.697
> 
> 标签：jquery, jquery-ui

我想确保我在给定选项卡内单击的任何链接，实际上都将该 URL 调用到选项卡中......文档说我可以做到这一点，但是这里有一些帖子表明我不是唯一一个遇到问题...我已经尝试过来自 jQuery UI 站点的代码，并且我已经尝试了该站点上其他文章中的建议...我敢肯定，对于熟悉 JS 和 jQuery 的人来说，这是一个明显的问题。 .. 请帮忙....

到目前为止，这是我@的地方......（每个“试验”都应该在没有 epag 上的其他代码的情况下完成 - 它就在这里，所以你有我尝试过的代码，也许可以看到共性）

```
<script>
$(document).ready(function(){

// trial #1 - specific ID called into tab - doesn't work
$('#tabs-community').tabs('select', 'tabs-signup');

  $('#blogs').click(function() {
      $('#tabs-bboard').load('blogs.cfm');
 });      

// trial #2 - the documented way - doesn't work
$('#tabs-community').tabs({
    load: function(event, ui) {
    $('a', ui.panel).click(function() {
        $(ui.panel).load(this.href);
    return false;
    });
}
});

// trial #3 - suggestion given on this site - doesn't work
$('#tabs-community').tabs({
    load: function(event, ui) {
    $('a', ui.panel).live('click', function() {
        $(ui.panel).load(this.href);
    return false;
    });
}
});

});

</script>       
<article class="col1">
    <div id="tabs-community" >
        <ul>
            <li><a href="#tabs-bboard">Community</a></li>
            <li><a href="#tabs-signup">Sign-up</a></li>
        </ul>
        <div id="tabs-bboard">
            <cfinclude template="bboard.php"><br/>
        </div>
        <div id="tabs-signup">
            <cfinclude template="signup_form.php"><br/>
        </div>
    </div>
</article> 
```

“bboard.php”看起来像这样

```
<a href="blogs1.cfm" id="blogs">blogs 1</a>
<a href="blogs2.cfm" >blogs 2</a>
<a href="blogs3.cfm" >blogs 3</a> 
```

所有链接始终作为新页面调用打开...没有一个示例将链接加载到选项卡中...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:39:15.737

好的...解决了这个问题，这是一个简单的问题。创建页面加载和选项卡时，不会触发加载事件。您的所有点击处理程序都隐藏在选项卡的加载回调中，并且永远不会绑定到选项卡内容中的任何初始链接。因此，初始链接都加载一个新页面。

解决方案是将点击处理程序从负载回调中取出。`live()`如果不推荐使用 jquery > 1.7 ，请`on()`改用。

演示：http: [//jsfiddle.net/c7arQ/](http://jsfiddle.net/c7arQ/)

由于 jsfiddle 的限制，Demo ses ajax 略有不同

```
$(function() {

    /* delegate click handler to id=tabs to account for future elements */         
    $('#tabs').on('click', '.ui-tabs-panel a', function(){
        /* get parent tab panel to load into */                                             
        var $panel=$(this).closest('.ui-tabs-panel');
        $panel.load(this.href);
        return false;
    });
    $('#tabs').tabs();​

}); 
```

编辑：删除您的 $('#blogs') 点击处理程序以避免重复加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:11:27.340

创建加载外部内容的选项卡的基本方法如下所示。

```
<script>
    $(function() {
        $('#tabs').tabs();
    });
</script>

<div id="tabs">
    <ul>
        <li><a href="/foo.php">foo</a></li>
        <li><a href="/bar.php">bar</a></li>
    </ul>
</div> 
```

在您的情况下，不要`href`将锚标签指向 div，而是将它们指向内容所在的 URL。

# php - 解析错误：语法错误，C:\wamp\www\reg.php 中出现意外的“{”

> ID：11067948
> 
> 赞同：-7
> 
> 时间：2012-06-17T00:04:04.910
> 
> 标签：php, forms, interactive

```
<html>
<head>
<title>
Registration
</title>
</head>
<?php
if(isset($_POST['submit buttton'])){
    processForm();
}else{
    displayForm();
}

/*check out this function. Here in array doesnot work*/

function validateField($fieldname,$missingfield){
    if(in_array($fieldname,$missingfield)){
        echo 'class = "error"';
    }
}
function setValue($fieldname){
    if(isset($_POST[$fieldname])){
        echo $_POST[$fieldname];
    }
}

function setChecked($fieldname,$fieldvalue){
    if((isset($_POST[$fieldname]) and ($_POST[fieldname] == $fieldvalue)){
        echo 'checked = "checked"';
    }
}
function setSelected( $fieldName, $fieldValue ) {
    if ( isset( $_POST[$fieldName] ) and $_POST[$fieldName] == $fieldValue ) {
        echo ' selected="selected"';
    }
}
function processForm(){
    $requiredfields = ("firstname","lastname","password1","password2","gender");
    $missingfields = array();
    foreach($missingfields as $missingfield){
        if((!isset($_POST[$requiredfield]) or $_POST[$requiredfield]){
            $missingfields[] = $requiredfield ;
        }
    }
    if ( $missingFields ) {
        displayForm( $missingfields );
    } else {
    displayThanks();
    }
}

function displayForm($missingfields){
    <?php
        <h1>Membership Form</h1>
        <?php if ( $missingFields ) { ?>
        <p class="error">There were some problems with the form you submitted.
        Please complete the fields highlighted below and  click Send Details to
        resend the form.</p>
        <?php } else { ?>
        <p>Thanks for choosing to join The Widget Club. To register, please
        fill in your details below and click Send Details. Fields marked with an
        asterisk (*) are required.</p>
    ?>

<?php } ?>

    <form action="registration.php" method="post">
    <div style="width: 30em;">
    <label for="firstName"<?php validateField( "firstName",
                        $missingFields ) ?>>First name *</label>
    <input type="text"  name="firstName" id="firstName"
                        value="<?php setValue( "firstName" ) ?>" />
    <label for="lastName"<?php validateField( "lastName",
$missingFields ) ?>>Last name *</label>
    <input type="text" name="lastName" id="lastName" value=
    "<?php setValue( "lastName" ) ?>" />
    <label for="password1"<?php if ( $missingFields ) echo
    ' class="error"’ ?>>Choose a password *</label>
    <input type="password" name="password1" id="password1" value="" />
    <label for="password2"<?php if ( $missingFields ) echo
    ' class="error"’ ?>>Retype password *</label>
    <input type="password" name="password2" id="password2" value="" />
    <label<?php validateField( "gender", $missingFields ) ?>>Your
    gender: *</label>
    <label for="genderMale">Male</label>
    <input type="radio" name="gender" id="genderMale" value=
    "M"<?php setChecked( "gender", "M" )?>/>
    <label for="genderFemale">Female</label>
    <input type="radio" name="gender" id="genderFemale" value=
    "F"<?php setChecked( "gender", "F" )?> />
    <label for="favoriteWidget">What’s your favorite widget? *</label>
    <select name="favoriteWidget" id="favoriteWidget" size="1">
    <option value="superWidget"<?php setSelected( "favoriteWidget",
    "superWidget" ) ?>>The SuperWidget</option>
    ?>

</html> 
```

在我第一次运行文件时，in_array 函数似乎不起作用。我的意思是像 isset() 这样的函数以粗体显示，但似乎未检测到 in_array 函数。浏览器将错误显示为：

> ( ! ) 解析错误：语法错误，第 15 行 C:\wamp\www\reg.php 中出现意外的“{”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:07:47.853

```
$requiredfields = ("firstname","lastname","password1","password2","gender"); 
```

此行无效。您应该`array`在`(`.

通常，使用具有括号匹配的代码编辑器。`)}]`这将帮助您更`({[`轻松地找到丢失的内容。有些甚至以类似的方式包含 HTML 标记匹配。

[http://notepad-plus-plus.org/](http://notepad-plus-plus.org/)就是一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:07:07.650

```
function setChecked($fieldname,$fieldvalue){
    if((isset($_POST[$fieldname]) and ($_POST[fieldname] == $fieldvalue)){ 
```

第二个`(`需要`if((`离开。

您还需要`array`在该`$requiredfields = ...`行中添加：

```
$requiredfields = array("firstname","lastname","password1","password2","gender"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T01:13:32.563

如前所述：使用`&& , ||`而不是`and , or`。您需要`array('a', 'b', 'c')`，您需要非常小心大写、小写：`$fieldname`与`$fieldName`(n/N) 不同。还有一些其他元素可以检查这应该会有所帮助：

```
<html>
<head>
<title>Registration</title>
<style type="text/css">.error{color:#F00}</style>
</head>
<?php

if($_SERVER['REQUEST_METHOD'] == 'POST') {
    processForm();
}
else {
    displayForm();
}

function validateField($error)
{
    if($error)
    {
        return 'class="error"';
    }
}

function setValue($fieldname)
{
    if(isset($_POST[$fieldname]))
    {
        return $_POST[$fieldname];
    }
}

function setChecked($fieldname,$fieldvalue)
{
    if(isset($_POST[$fieldname]) && $_POST[$fieldname] == $fieldvalue)
    {
        return ' checked="checked"';
    }
}

function setSelected( $fieldname, $fieldvalue )
{
    if ( isset( $_POST[$fieldname] ) && $_POST[$fieldname] == $fieldvalue )
    {
        return ' selected="selected"';
    }
}

function processForm()
{
    $requiredfields = array("firstName", "lastName", "password1", "password2", "gender");
    $missingfields = array();
    $missingfields['title'] = false;

    foreach($requiredfields as $requiredfield)
    {
        if(!isset($_POST[$requiredfield]) || empty($_POST[$requiredfield]))
        {
            $missingfields[$requiredfield] = true;
            $missingfields['title'] = true;
        }
        else {
            $missingfields[$requiredfield] = false;
        }
    }

    if ($missingfields['title'])
    {
        displayForm( $missingfields );
    } 
    else {
        echo displayThanks();
    }
}

function displayThanks()
{
    return '<h1>Everything is OK !</h1>';
}

function displayForm($missingfields)
{
?>
    <h1>Membership Form</h1>
    <?php if ($missingfields['title']) { ?>
    <p class="error">There were some problems with the form you submitted.
    Please complete the fields highlighted below and  click Send Details to
    resend the form.</p>
    <?php } else { ?>
    <p>Thanks for choosing to join The Widget Club. To register, please
    fill in your details below and click Send Details. Fields marked with an
    asterisk (*) are required.</p>
    <?php } ?>

    <form action="registration.php" method="post">
        <div style="width: 30em;">
            <label for="firstName"<?php echo validateField( $missingfields['firstName'] ) ?>>First name *</label>
            <input type="text"  name="firstName" id="firstName"  value="<?php echo setValue( "firstName" ) ?>" />
            <br>
            <label for="lastName"<?php echo validateField( $missingfields['lastName'] ) ?>>Last name *</label>
            <input type="text" name="lastName" id="lastName" value="<?php echo setValue( "lastName" ) ?>" />
            <br>
            <label for="password1"<?php echo validateField( $missingfields['password1'] ); ?>>Choose a password *</label>
            <input type="password" name="password1" id="password1" value="" />
            <br>
            <label for="password2"<?php echo validateField( $missingfields['password2'] ); ?>>Retype password *</label>
            <input type="password" name="password2" id="password2" value="" />
            <br>
            <label<?php echo validateField( $missingfields['gender'] ) ?>>Your gender: *</label>
            <label for="genderMale">Male</label>
            <input type="radio" name="gender" id="genderMale" value="M" <?php echo setChecked( "gender", "M" )?>/>
            <label for="genderFemale">Female</label>
            <input type="radio" name="gender" id="genderFemale" value="F" <?php echo setChecked( "gender", "F" )?> />
            <br>
            <label for="favoriteWidget">What’s your favorite widget? *</label>
            <select name="favoriteWidget" id="favoriteWidget" size="1">
                <option value="superWidget"<?php echo setSelected( "favoriteWidget", "superWidget" ) ?>>The SuperWidget</option>
            </select>
            <br>
            <input type="submit" value="Sign up">
        </div>
    </form>
<?php } ?>
</html> 
```

希望能帮助到你。

# javascript - elem 未定义？

> ID：11067950
> 
> 赞同：1
> 
> 时间：2012-06-17T00:04:32.160
> 
> 标签：javascript, dom, element, getelementsbytagname

当我运行以下代码时，萤火虫控制台说 elem 是未定义的，虽然......它不是！

```
var domTools = {};
domTools.searchInElements = function (elem, pattern) {
    if (pattern.constructor !== RegExp) {
        throw "Pattern must be a RegExp";
    }
    if (elem.constructor !== String) {
        throw "Element must be a String";
    }
    elem = document.getElementsByTagName[elem];
    var matches = [];
    for (e = 0; e < elem.length; e++) {
        if (pattern.test(elem[e].innerHTML)) {
            matches.push(elem[e]);
        }
    }
    return matches;
}
domTools.searchInElements("p", /hello/); 
```

它在`for`声明期间给了我错误。所有这些代码都在页面已经加载时运行。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T00:05:30.860

这是`()`和不是`[]`

```
elem = document.getElementsByTagName(elem); 
```

将`getElementsByTagnName()`其视为函数调用，这样您就不会忘记它使用`()`. 并且不要忘记使用开发者控制台`F12`来发现这些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T00:20:49.577

由于[梦想家约瑟夫](https://stackoverflow.com/users/575527/joseph-the-dreamer)已经发现了导致错误的错误，因为您使用`document.getElementsByTagName[elem]`的是`document.getElementsByTagName(elem)`.

但是您可能会遇到此调用的另一个问题，`domTools.searchInElements("p", /hello/);`因为它会匹配`hello, helloo, hellos etc`，因此您应该使用

```
domTools.searchInElements("p", /^hello$/) 
```

或者只是另一个想法[**。**](http://jsfiddle.net/heera/UH67r/1/)

# python - SQLAlchemy 唯一对象

> ID：11067951
> 
> 赞同：2
> 
> 时间：2012-06-17T00:04:39.790
> 
> 标签：python, mysql, database, sqlalchemy

假设我有以下课程：

```
class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    public_key = Column(String(16), nullable=False, unique=True)
    private_key = Column(String(64), nullable=False, unique=True) 
```

我需要两者兼而有之`public_key`，并且`private_key`是随机字符串（这不是问题），但我不确定确保这一点的最佳方法

1.  字符串在其他任何地方都不存在
2.  在检查它们的存在和创建对象之间，它们还没有被另一个进程创建。

我知道我不可能是第一个遇到这个问题的人，但我在这方面找不到太多东西。似乎 SQLAlchemy 实际上并没有强制执行`unique`，所以我不确定该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:19:20.923

意识到碰撞的机会非常、非常、非常低。

假设您的随机字符串仅由大写字母和数字组成。每个字符有 36 种可能性。您的公钥的 16 个字符将为您提供 36^16 个组合。大约是 8，后面有 24 个 0。即使您的数据库中有一百万个键，当您添加一个新键时发生冲突的几率也是 10^-19。

我不会担心的。我没有，而且我使用的随机值（大多数情况下是 UUID4）发生碰撞的可能性比你的要高得多。（但仍然很低。）

如果您仍然担心：SQLAlchemy 可能不会强制执行`UNIQUE`，但您的 DBMS 应该执行，这意味着如果违反 UNIQUE 约束，SQLAlchemy 将抛出异常。可以捕获异常并优雅地降级。

# php - PHP SoapClient 没有将 XML 响应解释为数组

> ID：11067952
> 
> 赞同：4
> 
> 时间：2012-06-17T00:04:51.937
> 
> 标签：php, soap, soap-client

我正在努力让 PHP 内置`SoapClient`来解释从我试图调用的 Web 服务返回的响应。

`SoapUI`能够询问此肥皂方法并返回良好的结果。我也能够`nusoap_client`返回正确的结果（但由于其他原因无法使用`nusoap`并认为我被困住了`SoapClient`）。

使用`SoapClient`，我可以看到看似不错的数据正在返回，但不是将结果解析并分解为易于使用的值数组，而是将 XML 响应字符串填充到对象中的单个字段中（标记为“任何”）。

我的代码和结果如下所示：

```
$client = new SoapClient($url);
$results = $client->GetPropertiesByProjectAndContractStatus($params);
var_dump($results); 
```

上述代码的输出如下：

```
object(stdClass)[3]
  public 'GetListingsByGUIDResult' => 
    object(stdClass)[4]
      public 'any' => string '<xs:schema xmlns="" ........ (long xml here) .... 
```

现在，也许我正在使用的服务正在返回一些有问题的 xml（尽管在我看来这似乎很好）。 `nusoap`并且`SoapUI`两者都没有使用它的问题。

所以我想知道它有什么`SoapClient`不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:47:30.993

我有一个函数可以抓取该结果并将其转换为 dom 对象，因此您可以使用 dom 函数来提取数据。

```
protected function getElementsFromResult($elementName, $simpleresult) {
  $dom = new DOMDocument ();
  $dom->preserveWhiteSpace = FALSE;
  if ($simpleresult == null) {
     echo 'null';
     return null;
  } else {
    $dom->loadXML ( $simpleresult->any );
    return $dom->getElementsByTagName ( $elementName );
  } 
```

`$elementName`是您想要从结果中获得的元素的名称，并且`$simpleresult`是包含“任何”字符串的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-18T23:18:33.823

当您使用的 WSDL 中未指定返回的数据时，就会发生这种情况。在解析 XML 结束时，任何不在 WSDL 中的内容都将集中到这个“任何”元素中。

如果发生这种情况，那么您应该确保您的脚本对您正在使用的 SOAP 服务使用正确的 WSDL。

例如，如果您正在使用旧的 WSDL，而新元素现在正在服务中使用，那么它们最终会出现在这个“任何”元素中！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:45:21.853

您是否尝试使用该[`SOAP_SINGLE_ELEMENT_ARRAYS`功能](http://www.php.net/manual/en/soapclient.soapclient.php)？

```
<?php
$client = new SoapClient($url, array('features' => SOAP_SINGLE_ELEMENT_ARRAYS)); 
```

# html - 移动 safari - 输入字段失去对 dom 元素的重新父级的关注

> ID：11067961
> 
> 赞同：3
> 
> 时间：2012-06-17T00:07:27.087
> 
> 标签：html, mobile, safari

在 Mobile Safari (5.1.1) 中，如果 HTML 输入具有焦点并在 DOM 中重新设置父级，则它会失去焦点。并且由于这个相关问题：[Mobile Safari Autofocus 文本字段](https://stackoverflow.com/questions/6287478/mobile-safari-autofocus-text-field)- 如果之前已获得焦点，则无法以编程方式再次赋予输入焦点。

重新育儿问题的 JS Fiddle：http: [//jsfiddle.net/Ex7j7/2/](http://jsfiddle.net/Ex7j7/2/)

我已经决定接受这个重新父母/焦点损失问题。除非任何人都可以编辑这个 JS fiddle 来证明否则。

# image - 是否可以使用opencv在同一窗口上显示黑白和彩色图像？

> ID：11067962
> 
> 赞同：13
> 
> 时间：2012-06-17T00:07:45.933
> 
> 标签：image, opencv, colors, window, grayscale

是否可以使用opencv libraray在同一窗口上显示黑白和彩色图像？我怎样才能在同一个窗口上同时拥有这两个图像？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-17T06:00:16.803

fraxel 的回答解决了旧 cv 界面的问题。我想使用 cv2 界面来展示它，只是为了了解这在新的 cv2 模块中是多么容易。（可能对未来的访客有帮助）。下面是代码：

```
import cv2
import numpy as np

im = cv2.imread('kick.jpg')
img = cv2.imread('kick.jpg',0)

# Convert grayscale image to 3-channel image,so that they can be stacked together    
imgc = cv2.cvtColor(img,cv2.COLOR_GRAY2BGR)
both = np.hstack((im,imgc))

cv2.imshow('imgc',both)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

下面是我得到的输出：

![在此处输入图像描述](../Images/6f1176f869e1d37ebcc8961550e1f177.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-17T03:00:32.903

是的，这是一个例子，评论中的解释：

![在此处输入图像描述](../Images/dce29076c3dadea8f882e579bd08eb4d.png)

```
import cv
#open color and b/w images
im = cv.LoadImageM('1_tree_small.jpg')
im2 = cv.LoadImageM('1_tree_small.jpg',cv.CV_LOAD_IMAGE_GRAYSCALE)
#set up our output and b/w in rgb space arrays:
bw = cv.CreateImage((im.width,im.height), cv.IPL_DEPTH_8U, 3)
new = cv.CreateImage((im.width*2,im.height), cv.IPL_DEPTH_8U, 3)
#create a b/w image in rgb space
cv.Merge(im2, im2, im2, None, bw)
#set up and add the color image to the left half of our output image
cv.SetImageROI(new, (0,0,im.width,im.height))
cv.Add(new, im, new)
#set up and add the b/w image to the right half of output image
cv.SetImageROI(new, (im.width,0,im.width,im.height))
cv.Add(new, bw, new)
cv.ResetImageROI(new)
cv.ShowImage('double', new)
cv.SaveImage('double.jpg', new)
cv.WaitKey(0) 
```

它在python中，但很容易转换成任何东西..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-21T10:29:23.997

现代写作对代码的小改进

> 连接

代替

> 堆栈

已停产（也可以使用堆栈）

```
import cv2
import numpy as np

im = cv2.imread('kick.jpg')
img = cv2.imread('kick.jpg',0)

# Convert grayscale image to 3-channel image,so that they can be stacked together    
imgc = cv2.cvtColor(img,cv2.COLOR_GRAY2BGR)
both = np.concatenate((im,imgc), axis=1)   #1 : horz, 0 : Vert. 

cv2.imshow('imgc',both)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-03-31T09:55:58.487

```
import cv2
img = cv2.imread("image.jpg" , cv2.IMREAD_GRAYSCALE)
cv2.imshow("my image",img)
cv2.waitkey(0)
cv2.destroyAllWindow

#The image file should be in the application folder.
#The output file will be 'my image' name.
#The bottom line is to free up memory. 
```

# google-app-engine - @GeneratedValue(strategy = GenerationType.SEQUENCE) 是否生成唯一值

> ID：11067963
> 
> 赞同：0
> 
> 时间：2012-06-17T00:07:47.667
> 
> 标签：google-app-engine, jpa

我有下面的注释：

```
@GeneratedValue(strategy = GenerationType.SEQUENCE)
private long userID; 
```

它会产生独特的价值吗？环境是不支持唯一约束注释的 Google App Engine。

请问有什么文件吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:17:58.833

源代码告诉你答案，特别是评论 [http://code.google.com/p/datanucleus-appengine/source/browse/trunk/src/com/google/appengine/datanucleus/valuegenerator/SequenceGenerator.java](http://code.google.com/p/datanucleus-appengine/source/browse/trunk/src/com/google/appengine/datanucleus/valuegenerator/SequenceGenerator.java)

# objective-c - Objective-C、NSFileManager 和授权？

> ID：11067966
> 
> 赞同：1
> 
> 时间：2012-06-17T00:07:51.813
> 
> 标签：objective-c, authorization, nsfilemanager

我有一个应用程序需要复制、删除、修改 Library/Application Support 目录中的文件以及`writeToFile:atomically`这些文件。这样做的问题是我必须获得此类事件的授权，而且似乎没有任何直接的方法可以实现这一目标。我已经阅读了许多[问题](https://stackoverflow.com/questions/6841937/authorizationexecutewithprivileges-is-deprecated)、[答案](https://stackoverflow.com/questions/6267197/osx-how-to-programmatically-delete-a-file-with-elevated-privileges)并尝试[了代码示例](http://developer.apple.com/library/mac/#samplecode/SMJobBless/Listings/ReadMe_txt.html)；不幸的是，他们似乎都使用特权帮助工具来处理，往往与使用 NSTask 的命令行功能更相关，或者他们只是没有工作。这是我想做的一个简单的例子：

```
NSFileManager *fileManager = [[NSFileManager alloc] init];

if ([fileManager fileExistsAtPath:sourceFile]) {

  NSError *error = nil;
  if (![fileManager copyItemAtPath:sourceFile
                            toPath:destFile
                             error:&error]) {
    // Deal with error
  }
}

[fileManager release]; 
```

这是我想做的非常简单的事情，那么为什么仅访问某些目录中的数据似乎如此困难？如果有人可以提供一个示例或适用的方法来做到这一点，我们将不胜感激——谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:30:20.370

Unix 安全模型的一部分是进程不能获得比创建时更多的权限。因此，授权特权操作需要启动具有特权的新进程，而不是简单地获得当前进程的特权。

* * *

更新：Apple 推荐的技术使用`SMJobBless()`并通过此示例代码进行演示：[https ://developer.apple.com/library/mac/#samplecode/SMJobBless/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/SMJobBless/Introduction/Intro.html)

# php - 如果满足条件，php为变量分配新值

> ID：11067968
> 
> 赞同：0
> 
> 时间：2012-06-17T00:08:14.343
> 
> 标签：php, variables, if-statement

下面的代码中向变量添加新值`$timestop`以及`$time_diff`条件是否满足的更好方法是什么？

```
//Calculates difference in time using 24h format

$timestart = strtotime("14:00:00");
$timestop = strtotime("07:00:00"); //if smaller value, it must end next day and meets the condition below

$time_diff = $timestop - $timestart; //elapsed time

if ($time_diff < 0 || $time_diff == 0) //if result is negative value, $timestop ends next day
{
   $timestop = strtotime( '+1 day' , strtotime("07:00:00") ); //+ 1 day changes timestamp
}

/* UPDATED */

$time_diff = $timestop - $timestart; //added again

echo $time_diff; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:18:35.317

不，覆盖变量是没有问题的，这是日常工作。您甚至没有覆盖任何其他类型，您只是重置为另一个整数值。

甚至更好，因为你不会浪费任何额外的内存空间（当然不高，但大体上想想）。

# windows - 路由来自特定应用程序的流量

> ID：11067970
> 
> 赞同：3
> 
> 时间：2012-06-17T00:08:26.400
> 
> 标签：windows, networking, routing, packet, traffic

有没有办法可以将流量从应用程序路由到不同的 ip，例如将 Firefox 的流量路由到 localhost？

我正在使用窗户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:52:33.687

有各种各样的[proxifer](http://en.wikipedia.org/wiki/Comparison_of_proxifiers)、防火墙和端口转发软件，可让您通过一系列不同的 Windows 软件包按 IP 地址、协议、内部端口和外部端口重定向流量。

但是，我发现唯一允许您在 Windows 应用程序级别指定规则（除块之外）的是 Initex 软件的试用软件包“ [Proxifer](http://www.proxifier.com/) ”。

# function - “函数”与“函数指针”——有什么区别？

> ID：11067972
> 
> 赞同：4
> 
> 时间：2012-06-17T00:08:58.027
> 
> 标签：function, function-pointers, d

我对[的文档`isSomeFunction`](http://dlang.org/phobos/std_traits.html#isSomeFunction)以及以下代码感到非常困惑：

```
static assert(!isFunctionPointer!(typeof(Object.toString)));  // makes sense
static assert(!isDelegate!(typeof(Object.toString)));         // what??
static assert( isSomeFunction!(typeof(Object.toString)));     // what?? 
```

有人可以向我解释“函数”和“函数指针”之间的区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T02:18:23.547

### 简短的回答：

*   `is(T == function)`      是否`T`是函数
*   `isFunctionPointer!T`  是否`T`是函数指针（而*不是*委托）
*   `isDelegate!T`                是否`T`为代表
*   `isSomeFunction!T``T`是函数、函数*指针*        还是委托

### 长答案：

函数就是函数。

```
auto func(int val) {...} 
```

它是一段代码，您可以使用该名称调用该名称。你给它参数，它做任何事情，它返回一个结果。你可以调用它，但你不能传递它。你需要一个函数指针。

函数指针是指向函数的指针。因此，就像`int`is an`int`和`int*`是指向 an 的指针`int`，而`int`不是指向 的指针一样，函数也不是函数指针*。*`int`如果你想要一个函数指针，你需要一个指向函数的指针。语法与它的语法不同`int`，但它是相同的概念。

委托是具有状态的函数指针。例如，在

```
int foo(int value)
{
    int bar()
    {
        return value + 5;
    }

    auto barDel = &bar;

    return barDel();
}

void main()
{
    auto fooFunc = &foo;
} 
```

`foo`是一个函数，`bar`是一个可以访问其外部范围的嵌套函数，并且`barDel`是一个委托，因为它是一个具有状态（`bar`可以访问的外部状态）的函数指针。如果你传递`barDel`给另一个函数（或返回它），你会得到一个闭包（除非传递给它的函数接受委托`scope`，在这种情况下，该函数保证委托不会逃脱其范围），因为该状态需要放在堆上，以便它继续存在，即使它的状态来自的函数调用在它被调用时已经完成。`funcFoo`另一方面，它是一个函数指针，因为`foo`它没有任何外部状态。如果`bar`是`static`，那么`barDel`也将是一个函数指针而不是一个委托，因为`bar`将不再有权访问它所在的函数（尽管它的主体必须更改，因为它不再有权访问`value`）。

现在，至于你的例子。`Object.toString`是 的成员函数`Object`。所以，它是一个函数。它*没有*与之关联的状态。函数永远不会。它当前的签名是

```
string toString(); 
```

但是因为它是 的成员函数`Object`，所以它的签名实际上类似于

```
string toString(Object this); 
```

`this``toString`作为参数传递给。它不是与 关联的状态`toString`。所以，`&Object.toString`不是代表。它只是一个函数指针。并且`Object.toString`不是函数指针，所以即使`&Object.toString` *是*委托，`static assert(isDelegate!(typeof(Object.toString)))`仍然会失败，因为要成为委托，它必须是函数指针，但事实并非如此。这是一个功能。

现在，不幸的是，`typeof(&Object.toString)`被认为是`string function()`而不是`string function(Object)`，因此使用它来调用`toString`实际`Object`需要一些工作。可以做到，但我现在不记得是怎么做到的（而且 IIRC 有点难看）。但无论如何它都不会是委托，因为没有与之关联的状态。

如果您想要一个可以传递`Object`给并让它调用成员函数的函数，那么您可以执行类似的操作

```
auto obj = getObjectFromSomewhere();
auto func = function(Object obj){return obj.toString();};
auto result = func(obj); 
```

如果您想将一个对象与一个成员函数相关联，并且能够在该对象上调用该成员函数而无需传递该对象，那么您只需将其包装在一个委托中：

```
auto obj = getObjectFromSomewhere();
auto del = delegate(){return obj.toString();};
auto result = del(); 
```

这段代码应该总结并很好地说明事情：

```
int foo(int value)
{
    int bar()
    {
        return value + 5;
    }

    static assert( is(typeof(bar) == function));
    static assert(!isFunctionPointer!(typeof(bar)));
    static assert(!isDelegate!(typeof(bar)));
    static assert( isSomeFunction!(typeof(bar)));

    auto barDel = &bar;
    static assert(!is(typeof(barDel) == function));
    static assert(!isFunctionPointer!(typeof(barDel)));
    static assert( isDelegate!(typeof(barDel)));
    static assert( isSomeFunction!(typeof(barDel)));

    static int boz(int i)
    {
        return i + 2;
    }

    static assert( is(typeof(boz) == function));
    static assert(!isFunctionPointer!(typeof(boz)));
    static assert(!isDelegate!(typeof(boz)));
    static assert(isSomeFunction!(typeof(boz)));

    auto bozFunc = &boz;
    static assert(!is(typeof(bozFunc) == function));
    static assert( isFunctionPointer!(typeof(bozFunc)));
    static assert(!isDelegate!(typeof(bozFunc)));
    static assert( isSomeFunction!(typeof(bozFunc)));

    return boz(bar());
}

static assert( is(typeof(foo) == function));
static assert(!isFunctionPointer!(typeof(foo)));
static assert(!isDelegate!(typeof(foo)));
static assert( isSomeFunction!(typeof(foo)));

void main()
{
    auto fooFunc = &foo;
    static assert(!is(typeof(fooFunc) == function));
    static assert( isFunctionPointer!(typeof(fooFunc)));
    static assert(!isDelegate!(typeof(fooFunc)));
    static assert( isSomeFunction!(typeof(fooFunc)));
}

static assert( is(typeof(Object.toString) == function));
static assert(!isFunctionPointer!(typeof(Object.toString)));
static assert(!isDelegate!(typeof(Object.toString)));
static assert( isSomeFunction!(typeof(Object.toString)));

static assert(!is(typeof(&Object.toString) == function));
static assert( isFunctionPointer!(typeof(&Object.toString)));
static assert(!isDelegate!(typeof(&Object.toString)));
static assert( isSomeFunction!(typeof(&Object.toString))); 
```

`isSomeFunction`适用`true`于所有这些，因为它们要么是函数，要么是*没有*状态的函数指针，要么是委托。

`foo`, `bar`, `boz`, 和`Object.toString`都是函数，所以它们`true`适用于其他函数，`is(T == function)`而不适用于其他函数。

`fooFunc`, `bozFunc`, 和是*没有 state*`&Object.toString`的函数指针，所以它们是用于但不是用于其他的。*`true``isFunctionPointer!T`*

 *`barDel`是一个代表，所以它是`true`给其他人的，`isDelegate!T`但不是给其他人的。

希望这可以为您解决问题。*

# python-3.x - python3如何为导入库的返回类型定义ctypes结构

> ID：11067973
> 
> 赞同：1
> 
> 时间：2012-06-17T00:09:12.597
> 
> 标签：python-3.x, ctypes, fann

我正在尝试使用 ctypes 在 python3 中使用[fann](http://leenissen.dk/fann/wp/)（用 C 编写的神经网络库）。到目前为止，这是我的删节代码：

```
from ctypes import *
cdll.LoadLibrary("/usr/local/lib/libdoublefann.dylib")
fann = CDLL("/usr/local/lib/libdoublefann.dylib")

# Call fann to create a neural network
nn = fann.fann_create_from_file(b'/Users/xxxxx/Code/fanncode/net/nnf_25_1339802027.net')

# this outputs 3909360
print(nn) 
```

如果我尝试针对 nn 变量（现在应该是 fann 神经网络）调用 fann 库中的任何其他函数，我会得到`Segmentation fault: 11`或`AttributeError: 'int' object has no attribute 'getMSE'`（例如）。我认为我的问题是，根据 ctypes 文档，变量 nn 最终是一个 int，而函数 fann_create_from_file 的 fann 文档指出：

```
FANN_EXTERNAL struct fann *FANN_API fann_create_from_file(const char * configuration_file) 
```

所以我想我需要声明：

```
class FANN_API(Structure):
    <fields and things which I don't know what they should be> 
```

然后做：

```
fann.fann_create_from_file.restype = FANN_API 
```

我的问题是我找不到 struct FANN_API 应该是什么。fann.h 的第 130 行指出，仅`#define FANN_API`此而已，没有定义或任何内容。

我对需要定义结构的猜测是否正确？如果是这样，那么我怎样才能找出它在 python 代码中声明的格式？如果没有，那么任何人都可以建议我可能需要做什么/阅读什么来让我的代码工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:07:20.140

您可以告诉`ctypes`函数的参数和返回码。您应该能够摆脱`c_void_p`(void*) 作为类型，除非您有一些理由来操纵结构的内容：

```
fann.fann_create_from_file.restype = c_void_p
fann.fann_create_from_file.argtypes = [c_char_p] 
```

请注意，这`struct fann *`是您的函数的返回类型。 `FANN_API`表示调用约定。你说过它被定义为`#define FANN_API`. 被定义为无意味着默认调用约定，因此您的使用`CDLL`应该是正确的。

如果您需要定义更具体的内容，请发布`struct fann`.

# c++ - 覆盖非虚拟方法

> ID：11067975
> 
> 赞同：101
> 
> 时间：2012-06-17T00:10:32.437
> 
> 标签：c++, overriding

让我们假设 Visual C++ 2010 中的这种情况：

```
#include <iostream>
#include <conio.h>

using namespace std;

class Base
{
public:
    int b;
    void Display()
    {
        cout<<"Base: Non-virtual display."<<endl;
    };
    virtual void vDisplay()
    {
        cout<<"Base: Virtual display."<<endl;
    };
};

class Derived : public Base
{
public:
    int d;
    void Display()
    {
        cout<<"Derived: Non-virtual display."<<endl;
    };
    virtual void vDisplay()
    {
        cout<<"Derived: Virtual display."<<endl;
    };
};

int main()
{
    Base ba;
    Derived de;

    ba.Display();
    ba.vDisplay();
    de.Display();
    de.vDisplay();

    _getch();
    return 0;
}; 
```

从理论上讲，这个小应用程序的输出应该是：

*   基础：非虚拟显示。
*   基地：虚拟展示。
*   ***基础：非虚拟显示。***
*   派生：虚拟显示。

因为 Base 类的 Display 方法不是虚拟方法，所以 Derived 类应该不能覆盖它。对？

问题是当我运行应用程序时，它会打印：

*   基础：非虚拟显示。
*   基地：虚拟展示。
*   ***派生：非虚拟显示。***
*   派生：虚拟显示。

所以要么我不理解虚拟方法的概念，要么在 Visual C++ 中发生了一些奇怪的事情。

有人可以帮我解释一下吗？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-06-17T00:18:17.570

是的，你有点误会了。

在这种情况下，派生类上的同名方法将隐藏父方法。您可以想象，如果不是这种情况，尝试创建与基类非虚拟方法同名的方法应该会引发错误。这是允许的，这不是问题 - 如果您直接调用该方法，就像您所做的那样，它将被调用。

但是，由于是非虚拟的，因此不会使用允许多态性的 C++ 方法查找机制。因此，例如，如果您创建了派生类的实例，但通过指向基类的指针调用了“Display”方法，则将调用基类的方法，而对于“vDisplay”，将调用派生方法。

例如，尝试添加这些行：

```
Base *b = &ba;
b->Display();
b->vDisplay();
b = &de;
b->Display();
b->vDisplay(); 
```

...并按预期观察输出：

> > 基础：非虚拟显示。
> > 基地：虚拟展示。
> > **基础：非虚拟显示。**
> > 派生：虚拟显示。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-11-17T17:32:55.690

是的，你误解了一点：

纯虚函数：

`virtual void fun1()=0`-> 必须在派生类中重写

虚函数：

`virtual void fun2()`-> 可以被覆盖

正常功能：

`void fun3()`-> 不要覆盖它

为了实现运行时多态性，您需要在 C++ 中重写虚函数

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-03T14:02:12.580

我认为在静态与动态绑定的上下文中查看它可能会更好。

如果该方法是非虚拟的（它在 C++ 中已经默认与 Java 不同），则该方法在编译时绑定到它的调用者，这不可能知道将在运行时指向的实际对象。因此，变量类型是最重要的，即“基础”。

# android - 扩展的 TextView 没有出现

> ID：11067977
> 
> 赞同：1
> 
> 时间：2012-06-17T00:11:05.777
> 
> 标签：android, textview

假设以下代码正在执行此操作：
- 使用标准 TextView
显示字符串 - 使用扩展 TextView 显示字符串。（这个覆盖了 OnDraw 并在字符串上画了一条线，使它看起来像是被删除了）

问题是只出现了标准的。

请检查以下代码：

# ExpenseWatchActivity.java（这是主要活动）

```
package com.app.expensewatch;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import java.util.Calendar;

public class ExpenseWatchActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        int day,mon,yr;

        Calendar cal = Calendar.getInstance();

        day = cal.get(Calendar.DATE);
        mon = 1 + cal.get(Calendar.MONTH);
        yr = cal.get(Calendar.YEAR);

        String text = getResources().getString(R.string.hello, day , mon , yr);

        TextView tx1 = (TextView)findViewById(R.id.text1);
        tx1.setText(text);

        List1 list = (List1)findViewById(R.id.list1);
        list.setText(text);
    }
} 
```

# List1.java（这是扩展的 TextView）

```
package com.app.expensewatch;

import android.util.AttributeSet;
import android.widget.TextView;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import com.app.expensewatch.R;

public class List1 extends TextView {

    public List1(Context context) {
        super(context);
    }

    public List1(Context context, AttributeSet attrs) {
        super( context, attrs );
    }

    public List1(Context context, AttributeSet attrs, int defStyle) {
        super( context, attrs, defStyle );
    }

    float ht = (float)getHeight();
    float wd = (float)getWidth();

    @Override
    protected void onDraw(Canvas canvas)
    {
        Paint divider = new Paint();
        divider.setColor(getResources().getColor(R.color.line1));
        canvas.drawLine(0,ht/2,wd,ht/2,divider);
    }
} 
```

# 主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <com.app.expensewatch.List1
        android:id="@+id/list1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello" />
       />
 </LinearLayout> 
```

# 字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

   <string name="app_name">ExpenseWatch</string>
   <string name="hello">Today is : %1$d / %2$d / %3$d</string>

</resources> 
```

# 颜色.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <color name="line1">#6456648f</color>

</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:36:12.420

当您在扩展的 TextView 中设置宽度和高度时，尚未测量视图。它的宽度和高度为零。在扩展的 TextView 中覆盖 onMeasure()，并在那里设置宽度和高度。

```
protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    ht = getHeight();
    wd = getWidth();    
} 
```

在调用 onMeasure() 之前，始终避免设置将在视图中保存维度的私有变量。

# mysql - mysql复制表？

> ID：11067980
> 
> 赞同：0
> 
> 时间：2012-06-17T00:11:18.707
> 
> 标签：mysql

我在用

```
mysql_query("INSERT INTO imaegs_backup SELECT * FROM images"); 
```

为了将图像表的信息复制到 images_backup 表。在图像表上，我有：

```
id     name      link

1      name1     www.aaa.com/1
2      name2     www.aaa.com/2
3      name3     www.aaa.com/3

5      name5     www.aaa.com/5 
```

如您所见，图像表中缺少 id 编号 4。当我处理表格时，我在表格 images_backup 中得到相同的结果（这是预期的）。如何将图像表复制到 images_backup 并且我希望结果是这样的：

```
id     name      link

1      name1     www.aaa.com/1
2      name2     www.aaa.com/2
3      name3     www.aaa.com/3
4      name5     www.aaa.com/5 
```

正如您在第 4 行中看到的那样，有 name5 和指向图像 5 的链接。注意：id 列设置为自动递增，但我可以更改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:31:24.503

如果您要插入的表具有自动递增的 ID，则只需指定两列；自动递增字段将处理值本身：

```
INSERT INTO images_backup (name, link) 
SELECT name, link FROM images ORDER BY id 
```

# c# - 从列表框中的选定项目更新文本框中的文本。列表框工作正常

> ID：11067982
> 
> 赞同：0
> 
> 时间：2012-06-17T00:12:40.143
> 
> 标签：c#, asp.net, sql, textbox, listbox

我构建了一个 WinForm 应用程序，可以很好地与在线存储的 SQL 数据库配合使用。我现在正试图转移到 asp.net 应用程序。在学习了构建 WinForm 应用程序所需的一切之后，我对新的学习曲线感到沮丧！

这是一个基本的应用程序，它有一个包含数据库中所有人的列表框。列表框将 NameLast + ', ' + NameFirst 组合显示为 NameFull，显示类似“Smith, John”的内容。当用户选择一个人时，文本框应显示相关信息。一旦我开始它应该很容易......我如何构建一个 OnSelectedChanged 类型的命令来填充文本框。在此示例中，我将有四 (4) 个文本框：NameFirstTxt、NameMiddleTxt、NameLastTxt 和 RecordIDTxt。

我附上了所选索引更改事件期间使用的 WinForm 应用程序的代码。任何建议和评论（好的或坏的）都会有所帮助。先感谢您。

```
 private void peopleDetailsDirectoryLbx_SelectedIndexChanged(object sender, EventArgs e)
    {
        peopleDirectoryGbx.Text = "People Records : " + peopleDetailsDirectoryLbx.Items.Count.ToString();
        DataRowView PeopleRow = peopleDetailsDirectoryLbx.SelectedItem as DataRowView;
        if (PeopleRow != null && PeopleRow.Row != null && PeopleRow.Row.ItemArray != null)
        {
            DataRow row = PeopleRow.Row;
            if (row.ItemArray.Count() > 0)
                try
                {
                    peopleDetailsIDTxt.Text = Convert.ToString(row["ID"]).ToString();

                    try
                    {
                        peopleDetailsPhotoImg.Load(@"http://www.officertech.com/PeoplePhotoBase/" + peopleDetailsIDTxt.Text + ".jpg");
                    }
                    catch
                    {
                        peopleDetailsPhotoImg.Load(@"http://www.officertech.com/PeoplePhotoBase/NoPhoto.jpg");
                    }
                    if (Convert.ToString(row["Active"].ToString()) == "True")
                    {
                        peopleDetailsActiveChk.Checked = true;
                    }
                    else
                    {
                        peopleDetailsActiveChk.Checked = false;
                    }
                    peopleDetailsNameFirstTxt.Text = (row["NameFirst"]).ToString();
                    peopleDetailsNameMiddleTxt.Text = (row["NameMiddle"]).ToString();
                    peopleDetailsNameLastTxt.Text = (row["NameLast"]).ToString();
                    peopleDetailsNameAka1Txt.Text = (row["NameAKA1"]).ToString();
                    peopleDetailsNameAka2Txt.Text = (row["NameAKA2"]).ToString();
                    peopleDetailsDobTxt.Text = Convert.ToDateTime(row["DOB"]).ToShortDateString();
                    peopleDetailsRaceCbx.Text = (row["Race"]).ToString();
                    peopleDetailsGenderCbx.Text = (row["Gender"]).ToString();
                    peopleDetailsAddStreetNumTxt.Text = (row["AddStreetNum"]).ToString();
                    peopleDetailsStreetNameCbx.Text = (row["AddStreetName"]).ToString();
                    peopleDetailsAddCityTxt.Text = (row["AddCity"]).ToString();
                    peopleDetailsAddStateTxt.Text = (row["AddState"]).ToString();
                    peopleDetailsAddZipTxt.Text = (row["AddZip"]).ToString();
                    peopleDetailsAddCountyTxt.Text = (row["AddCounty"]).ToString();
                    peopleDetailsDriverLicenseTxt.Text = (row["DriverLicense"]).ToString();
                    peopleDetailsDriverLicenseStateTxt.Text = (row["DriverLicenseState"]).ToString();
                    peopleDetailsSSNTxt.Text = (row["SSN"]).ToString();
                    peopleDetailsTrackingLab.ForeColor = Color.Black;
                    if (row["Tracking"].ToString() == "True")
                    {
                        peopleDetailsTrackingYesRad.Checked = true;
                        peopleDetailsTrackingLab.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleDetailsTrackingNoRad.Checked = true;
                        peopleDetailsTrackingLab.ForeColor = Color.Black;
                    }
                    peopleDetailsPhysIDColorHairCbx.Text = (row["PhysIDColorHair"].ToString());
                    peopleDetailsPhysIDColorEyesCbx.Text = (row["PhysIDColorEyes"].ToString());
                    peopleDetailsPhysIDWeightTxt.Text = (row["PhysIDWeight"].ToString());
                    peopleDetailsPhysIDHeightTxt.Text = (row["PhysIDHeight"].ToString());
                    peopleDetailsPhysIDScarTattTxt.Text = (row["PhysIDScarTatt"].ToString());
                    //////
                    if (Convert.ToString(row["School"].ToString()) == "True")
                    {
                        peopleDetailsSchoolRad.Checked = true;
                    }
                    else
                    {
                        peopleDetailsSchoolRad.Checked = false;
                    }
                    //////
                    if (Convert.ToString(row["Work"].ToString()) == "True")
                    {
                        peopleDetailsWorkRad.Checked = true;
                    }
                    else
                    {
                        peopleDetailsWorkRad.Checked = false;
                    }
                    //////
                    if (Convert.ToString(row["ciAssault"].ToString()) == "True")
                    {
                        peopleCIAssaultChk.Checked = true;
                        peopleCIAssaultChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIAssaultChk.Checked = false;
                        peopleCIAssaultChk.ForeColor = Color.Black;
                    }
                    //////
                    peopleDetailsSchoolWorkNameTxt.Text = (row["SchoolWorkName"]).ToString();
                    //////
                    if (Convert.ToString(row["ciBattery"].ToString()) == "True")
                    {
                        peopleCIBatteryChk.Checked = true;
                        peopleCIBatteryChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIBatteryChk.Checked = false;
                        peopleCIBatteryChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciBatteryAgg"].ToString()) == "True")
                    {
                        peopleCIBatteryAggChk.Checked = true;
                        peopleCIBatteryAggChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIBatteryAggChk.Checked = false;
                        peopleCIBatteryAggChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciBatteryDVR"].ToString()) == "True")
                    {
                        peopleCIBatteryDVRChk.Checked = true;
                        peopleCIBatteryDVRChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIBatteryDVRChk.Checked = false;
                        peopleCIBatteryDVRChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciBatteryLEO"].ToString()) == "True")
                    {
                        peopleCIBatteryLEOChk.Checked = true;
                        peopleCIBatteryLEOChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIBatteryLEOChk.Checked = false;
                        peopleCIBatteryLEOChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciBurglary"].ToString()) == "True")
                    {
                        peopleCIBurglaryChk.Checked = true;
                        peopleCIBurglaryChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIBurglaryChk.Checked = false;
                        peopleCIBurglaryChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciChildCrimes"].ToString()) == "True")
                    {
                        peopleCIChildCrimeChk.Checked = true;
                        peopleCIChildCrimeChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIChildCrimeChk.Checked = false;
                        peopleCIChildCrimeChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciCrimMisch"].ToString()) == "True")
                    {
                        peopleCICrimMischChk.Checked = true;
                        peopleCICrimMischChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCICrimMischChk.Checked = false;
                        peopleCICrimMischChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciDealStolen"].ToString()) == "True")
                    {
                        peopleCIDealStolenChk.Checked = true;
                        peopleCIDealStolenChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIDealStolenChk.Checked = false;
                        peopleCIDealStolenChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciDisorderly"].ToString()) == "True")
                    {
                        peopleCIDisorderlyChk.Checked = true;
                        peopleCIDisorderlyChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIDisorderlyChk.Checked = false;
                        peopleCIDisorderlyChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciDrugs"].ToString()) == "True")
                    {
                        peopleCIDrugsChk.Checked = true;
                        peopleCIDrugsChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIDrugsChk.Checked = false;
                        peopleCIDrugsChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciDUI"].ToString()) == "True")
                    {
                        peopleCIDUIChk.Checked = true;
                        peopleCIDUIChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIDUIChk.Checked = false;
                        peopleCIDUIChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciDWLSR"].ToString()) == "True")
                    {
                        peopleCIDWLSRChk.Checked = true;
                        peopleCIDWLSRChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIDWLSRChk.Checked = false;
                        peopleCIDWLSRChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciFraud"].ToString()) == "True")
                    {
                        peopleCIFraudChk.Checked = true;
                        peopleCIFraudChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIFraudChk.Checked = false;
                        peopleCIFraudChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciHomicide"].ToString()) == "True")
                    {
                        peopleCIHomicideChk.Checked = true;
                        peopleCIHomicideChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIHomicideChk.Checked = false;
                        peopleCIHomicideChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciLewdLasciv"].ToString()) == "True")
                    {
                        peopleCILewdLascivChk.Checked = true;
                        peopleCILewdLascivChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCILewdLascivChk.Checked = false;
                        peopleCILewdLascivChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciMental"].ToString()) == "True")
                    {
                        peopleCIMentalChk.Checked = true;
                        peopleCIMentalChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIMentalChk.Checked = false;
                        peopleCIMentalChk.ForeColor = Color.Black;
                    }
                    //////
                    peopleCIProbationLab.ForeColor = Color.Black;
                    if (row["ciProbation"].ToString() == "True")
                    {
                        peopleCIProbationYesRad.Checked = true;
                        peopleCIProbationLab.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIProbationNoRad.Checked = true;
                        peopleCIProbationLab.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciResisting"].ToString()) == "True")
                    {
                        peopleCIResistingChk.Checked = true;
                        peopleCIResistingChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIResistingChk.Checked = false;
                        peopleCIResistingChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciRobbery"].ToString()) == "True")
                    {
                        peopleCIRobberyChk.Checked = true;
                        peopleCIRobberyChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIRobberyChk.Checked = false;
                        peopleCIRobberyChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciSexCrime"].ToString()) == "True")
                    {
                        peopleCISexCrimeChk.Checked = true;
                        peopleCISexCrimeChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCISexCrimeChk.Checked = false;
                        peopleCISexCrimeChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciShoplift"].ToString()) == "True")
                    {
                        peopleCIShopLiftChk.Checked = true;
                        peopleCIShopLiftChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIShopLiftChk.Checked = false;
                        peopleCIShopLiftChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciTheft"].ToString()) == "True")
                    {
                        peopleCITheftChk.Checked = true;
                        peopleCITheftChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCITheftChk.Checked = false;
                        peopleCITheftChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciTraffic"].ToString()) == "True")
                    {
                        peopleCITrafficChk.Checked = true;
                        peopleCITrafficChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCITrafficChk.Checked = false;
                        peopleCITrafficChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciTrespass"].ToString()) == "True")
                    {
                        peopleCITrespassChk.Checked = true;
                        peopleCITrespassChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCITrespassChk.Checked = false;
                        peopleCITrespassChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciWarrants"].ToString()) == "True")
                    {
                        peopleCIWarrantsChk.Checked = true;
                        peopleCIWarrantsChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIWarrantsChk.Checked = false;
                        peopleCIWarrantsChk.ForeColor = Color.Black;
                    }
                    //////
                    if (Convert.ToString(row["ciWeapons"].ToString()) == "True")
                    {
                        peopleCIWeaponsChk.Checked = true;
                        peopleCIWeaponsChk.ForeColor = Color.Red;
                    }
                    else
                    {
                        peopleCIWeaponsChk.Checked = false;
                        peopleCIWeaponsChk.ForeColor = Color.Black;
                    }
                    //////
                    CalcAge_People();
                    //arrestFieldsFill();
                }
                catch (Exception ex)
                {
                    MessageBox.Show("Problem Locating Person Information" + ex, "CARDS 2012 | Message Center", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:29:22.280

确保 ListBox 的**AutoPostback**属性设置为 true。

ASP 代码：

```
<asp:ListBox ID="ListBox1" runat="server" OnSelectedIndexChanged="ListBox1_SelectedIndexChanged"
        AutoPostBack="True">
        <asp:ListItem>1st Person</asp:ListItem>
        <asp:ListItem>2nd Person</asp:ListItem>
        <asp:ListItem>3rd person</asp:ListItem>
    </asp:ListBox>
    <br />
    FIRST NAME:<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <br />
    LASTNAME:<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
    <br />
    EMAIL:<asp:TextBox ID="TextBox3" runat="server"></asp:TextBox> 
```

后面的代码：

```
protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            foreach (ListItem li in ListBox1.Items)
            {
                if (li.Selected == true)
                {
                    // what ever you want to assign to TextBox 
                    this.TextBox1.Text = li.Text + "First Name"; // (row["NameFirst"]).ToString();
                    this.TextBox2.Text = li.Text + "Last Name";
                    this.TextBox3.Text = li.Text + "Email";
                }
            }
        } 
```

希望这可以帮助。

# android - 将 android 数据库与间歇性 Internet 连接的服务器同步

> ID：11067983
> 
> 赞同：1
> 
> 时间：2012-06-17T00:12:45.760
> 
> 标签：android

所以我正在编写一个 android 应用程序，该应用程序将在某些商店的销售点用于调查问题。我有一个 java jsf web 应用程序，它使用 jpa 和一个我想要同步的 mysql 数据库，最好是两种方式，但只有几个表。android 应用程序将只有几个表，不会完全复制我的服务器数据库。不幸的是，在某些地方，Android 应用程序只会断断续续地访问互联网。我目前正在寻找用于在 android 上存储我的数据的不同选项。我看过：

1.  在我的服务器上的数据库和 android 上的 SQLite 之间编写我自己的同步，但必须有一个更简单的选择
2.  根据android开发人员指南中的示例将我的数据存储在应用引擎上并与应用引擎同步但是我不确定我有限的互联网连接将如何工作
3.  使用 couchdb 但我真的不想走这条路，因为我已经设置了服务器端

有人有什么想法吗？

我可以使用 android 在本地存储数据，然后在连接时与应用引擎同步吗？

谢谢

# javascript - 计算文档准备好的javascript

> ID：11067984
> 
> 赞同：0
> 
> 时间：2012-06-17T00:13:24.980
> 
> 标签：javascript, calculated-field

我希望字段“sub_total”随着各种字段的更改而更新，而不是在更新一个特定字段时更新（即：“add_on”）

我**尝试**将 $(document).ready(function(){ 添加到代码顶部，但如果我添加它，它根本不会计算。

HTML：

```
<td>Total Cost Full Day</td>
<input type="text" name="total_full" id="total_full"  />

<td>&nbsp;</td>
    <td>&nbsp;</td>

 <td>Total Cost Half Day</td>
<input type="text" name="total_half" id="total_half"  />

<td>&nbsp;</td>
    <td>&nbsp;</td>

<td>Addon Charge</td>
<input type="text" name="add_on" id="add_on"  />

<td>&nbsp;</td>
    <td>&nbsp;</td>

<td>Sub Total</td>
<input name="sub_total" type="text" id="sub_total" />​ 
```

JAVASCRIPT

```
//Calculate Sub Total

function calculateSubTotal() {

    var SubTotal = +total_full.value + +total_half.value + +add_on.value;

    document.getElementById("sub_total").value = isNaN(SubTotal) ? 0 : SubTotal;
}

document.getElementById("add_on").onchange = calculateSubTotal;
document.getElementById("add_on").onkeyup = calculateSubTotal;​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:24:20.660

您需要使用 jQuery 才能使用类似`$(document).ready`. 否则它将无法正常工作。

这是我最喜欢的方法，但也可以使用类似的方法`window.onload`。见下文...我还更改了您的 SubTotal 的计算。`total_full`除非您声明了名为、`total_half`和的变量，否则您`add_on`仍然需要以与分配事件时相同的方式获取元素。

```
window.onload=function(){
//Calculate Sub Total

function calculateSubTotal() {

    var SubTotal = +document.getElementById("total_full").value + +document.getElementById("total_half").value + +document.getElementById("add_on").value;

    document.getElementById("sub_total").value = isNaN(SubTotal) ? 0 : SubTotal;
}

document.getElementById("add_on").onchange = calculateSubTotal;
document.getElementById("add_on").onkeyup = calculateSubTotal;
document.getElementById("total_full").onchange = calculateSubTotal;
document.getElementById("total_full").onkeyup = calculateSubTotal;
document.getElementById("total_half").onchange = calculateSubTotal;
document.getElementById("total_half").onkeyup = calculateSubTotal;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T00:22:33.307

如果您的函数与 add_on 字段一起使用，则应将该函数绑定到要计算的每个字段上。就像您为“add_on”所做的一样。

因此，每次更改其中一个字段时，您的函数都会更新小计。

# c++ - CreateFileMapping/MapViewOfFile 返回的共享内存数组是否初始化为零？

> ID：11067988
> 
> 赞同：6
> 
> 时间：2012-06-17T00:14:57.617
> 
> 标签：c++, winapi, shared-memory

只是好奇我是否正在像这样在 Windows 平台上创建共享内存数组：

```
HANDLE hFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE | SEC_COMMIT, 0, 1024 * 4, _T("mySharedMemName"));
if(hFile)
{
    VOID* pData = MapViewOfFile(hFile, FILE_MAP_ALL_ACCESS, 0, 0, 1024 * 4);

    //Is 'pData' array initialized with zeros the first time the 'hFile' is used?
} 
```

我第一次调用这个代码片段时，内存数组是用 0 初始化的吗？如果没有，如何使其零初始化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T00:28:51.027

从[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx)中：

> 操作系统页面文件支持的文件映射对象中页面的初始内容为 0（零）。

# javascript - 如何获取从 DOMNodeRemoved 事件中移除的元素的节点位置

> ID：11067991
> 
> 赞同：1
> 
> 时间：2012-06-17T00:16:07.117
> 
> 标签：javascript, html, dom, mutation-observers

我正在尝试确定从 DOMNodeRemoved 事件中删除的节点的文档位置。但是，由于它是被移除的元素，因此该节点不再保存其 previousSibling 元素。有没有办法确定删除节点的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T13:58:03.387

您的答案已使用 Parcelforce 发送。
只需替换选择器 $('body').children() 并调整处理函数。

```
$.each($('body').children(), function(i,item){item.addEventListener('DOMNodeRemoved',function(e){ console.log('I has been removed'); console.log($(e.target).position());})}) 
```

# css - 背景不会到达页面底部

> ID：11067992
> 
> 赞同：0
> 
> 时间：2012-06-17T00:16:42.313
> 
> 标签：css

我在 bg 顶部有一个白色容器，但即使 min-height 设置为 100%，它也会停止，这是这个容器的 CSS，在底部我包含了当我滚动到底部时发生的情况的图像： Container where post是：黄色背景：

```
 .home-body {
                background-color:#EAC117;
                height: 100%;

            .home-main-content {
            width:800px;
            min-height: 100%;
            position:absolute;
            overflow:hidden;
            margin-left:56.5%;
            left:-500px;
            top:51px;
            border-left:1px solid black;
            border-right:1px solid black;
            background-color:#fff;
            background-repeat:repeat-y;

            .home-post-echoed-container {
            width:400px;
            position:absolute;
            margin-left:50%;
            left:-200px;
            top:200px;
            overflow:hidden;
            }
            .home-echoed-posts {
            width:600px;
            overflow:hidden;
            left:-98px;
            position:relative;
            background-color:#fff;
            margin-bottom:-5px;
            border-top:1px solid;color:#0a527e;
            border-left:1px solid;color:#0a527e;
            border-right:1px solid;color:#0a527e;
            }
            .home-echoed-posts-post {
            margin:10px;
            color:black;
            }
            .home-echoed-posts-email {
            margin:10px;
            color:black;
            }
            .home-echoed-posts-date {
            margin:10px;
            color:black;
                            } 
```

![这是清除 bg 结尾时发生的情况](../Images/ac8858e9f577001c6ddc3a9a3d6abdc1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T00:34:49.633

你这样做是不对的。

要使您应该使用的东西居中（而不是绝对定位）：

```
.foobar{
   margin: 0 auto;
   width: 800px;
} 
```

至于“为什么评论没有扩展容器”，没有代码很难猜到，但有两种合理的可能性：**定位**或**浮动**。我对此无能为力。但是如果它们是浮动的，那么很容易拥有具有以下 css 的容器：

```
.container{
   overflow: hidden;
} 
```

这有点违反直觉，但就像魅力一样。[**你可以在这里**](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)阅读更多关于它的信息。

更新：也阅读[**这篇文章**](http://colinaarts.com/articles/float-containment/)。

**更新 2**：

看起来这是麦芽汁的情况。您正在使用定位 .. 来处理一切。你真的需要学习如何使用浮点数。

```
.home-post-echoed-container {
    width: 600px;
    margin: 0 auto;
    padding-top: 200px; // im guessing what top:200px was doing
    overflow:hidden;
}
.home-echoed-posts {
    width:600px;
    float: left;
    background: #fff;
    margin-bottom: -5px;
    border: 1px solid #0a527e;
    border-bottom: 0;
} 
```

像这样的东西。但我真的只是猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:33:33.673

```
html, body 
{
    height:100%;
} 
```

确保将其包含在 CSS 脚本的顶部，否则设置`.home-main-content`为`min-height:100%;`不起作用，因为对于 CSS，如果在其他地方未定义，`100%`则只是当前 div 的高度。

`.home-main-content`如果您被另一个 div 包围，还要确保您具有相同的属性集。

# php - 如何在关联数组中使用 PHP here-doc？

> ID：11067993
> 
> 赞同：20
> 
> 时间：2012-06-17T00:17:27.740
> 
> 标签：php, arrays, associative-array, heredoc

我有一大段多行文本，我需要通过 here-doc 将其放入 PHP 关联数组中。它看起来像这样：

```
 $data = [
      "x" => "y",
      "foo" => "bar",
      /* ... other values ... */
      "idx" = <<< EOC
data data data data
data data data data
data data data data
EOC;
      "z" => 9,
      /* ... more values ... */
    ]; 
```

我不知道如何通过 here-doc 将带有多行文本的元素“idx”放入 $data 数组中。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-17T00:22:56.693

有几个问题，它必须看起来像这样：

```
$data = [
  "x" => "y",
  "foo" => "bar",
  /* ... other values ... */
  // you need to use '=>' 
  "idx" => <<<EOC
data data data data
data data data data
data data data data
EOC
 ,"z" => 9, // you can't end it with a semicolon, WHY EVER! and the comma needs to be on a new line
 /* ... more values ... */
]; 
```

那是一些笨拙的 PHP 代码。我不推荐使用它，它充满了问题（可能是由词法分析器引起的）。最好坚持使用好的旧琴弦。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-31T11:50:20.890

在 PHP 7.3 中，事情有了[显着改善](https://wiki.php.net/rfc/flexible_heredoc_nowdoc_syntaxes)。您现在可以这样做：

```
$data = [
  "x" => "y",
  "foo" => "bar",
  /* ... other values ... */
  "idx" => <<<EOC
    data data data data
    data data data data
    data data data data
    EOC,
  "z" => 9,
  /* ... more values ... */
]; 
```

* * *

我遇到了同样的问题，我最终这样做了（旧解决方案）：

```
$data = [
  "x" => "y",
  "foo" => "bar",
  /* ... other values ... */
  "z" => 9,
  /* ... more values ... */
];

$data["idx"] = <<<EOC
data data data data
data data data data
data data data data
EOC; 
```

这个想法是我可以使用heredoc，而不需要非常难看的数组格式。

# c - 米利和摩尔之间的区别

> ID：11067994
> 
> 赞同：7
> 
> 时间：2012-06-17T00:17:36.257
> 
> 标签：c, state-machine, fsm

当涉及到 C 实现时，Mealy 和 Moore 状态机之间的区别是否有任何实际意义？这种差异通常是什么？

很久以前，当谈到 RTL 时，我更容易理解 Mealy/Moore 的优势/劣势。取决于当前状态的整个输出/取决于当前状态+当前输入差异的输出是有意义的，在某些情况下，Mealy 可以少 1 个状态这一事实也是有意义的。将时序图与每个 FSM 实现相关联也使它们之间的区别更加清晰。

假设我正在用 C 语言制作状态机。在一种情况下，LUT 取决于状态/当前输入（Mealy），而在 Moore 中，LUT 只是查找当前状态并返回下一个状态。在任一输出中都发生在从 LUT 返回之后（我认为，尽管我可能是错的）。我还没有想到一个明确的方式来说明 Mealy 在用 C 编码时具有优势。诸如代码可读性、速度、代码密度、设计易用性等主题可能都是相关主题——从我的角度来看，这两个模型看起来几乎相同。

也许这种差异只是学术界的一个话题——在 C 实现的实践中，这种差异可以忽略不计。如果您知道 Mealy 和 Moore 之间 C 状态机实现不同的关键方式，并且是否有真正的优势（这也很重要），我很想知道。我想强调一下——我不是在问 RTL 的实现。

我确实在这里看到了另一篇 Mealy/Moore 帖子：[Mealy v/s。摩尔](https://stackoverflow.com/questions/4009283/mealy-v-s-moore)

但这并不是我正在寻找的解释水平。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-26T12:41:24.070

您有一个将一种形式主义转换为另一种形式主义的机械程序，因此两者之间没有结构上的差异。

说到实现上的区别，两种形式主义只是在*输出函数*上不同，它告诉你应该输出什么符号。具体来说：

1.  在摩尔机器中，输出仅取决于当前状态
2.  在 Mealy 机器中，输出取决于当前状态**和**当前输入。

Moore 机器的实现可能更简单一些，因为在生成输出时需要跟踪的信息较少，但差异会非常小。

下面是一个简单的摩尔机器在 C 语言中的样子：

```
int state = INITIAL;
while (!isTerminal(state)) {
    char input = nextInputSymbol();
    fprintf(output, "%c", nextOutputSymbol(state));
    state = nextState(state, input);
} 
```

这是 Mealy 机器：

```
int state = INITIAL;
while (!isTerminal(state)) {
    char input = nextInputSymbol();
    fprintf(output, "%c", nextOutputSymbol(input, state));
    state = nextState(state, input);
} 
```

如您所见，唯一的区别在于`nextOutputSymbol()`. 对于一种形式或另一种形式而言，所述功能的实现是否更容易，这实际上取决于具体的应用。

`nextInputSymbol`只是获取新符号（可能是 a`scanf`或类似符号）的例程，`nextState`将取决于特定的机器，但它的复杂性在 Mealy 和等效的 Moore 之间不会有太大变化。

特别是，两者都`nextOutputSymbol`归结`nextState`为一个表查找或一个`switch`或一个`if/else`链，没有真正的实现困难。他们写起来很无聊，真的。

**注意**：我省略了代码片段中的错误检查，以使我们专注于讨论的要点。现实世界的代码会执行一些额外的检查，例如处理 EOF on`nextInputSymbol`或`break`ing 错误状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-25T18:02:56.917

摩尔机：输出仅取决于当前状态。Mealy Machine：输出取决于当前状态和当前输入。

# ios - 带有 UISlider 的 CIFilter

> ID：11067998
> 
> 赞同：6
> 
> 时间：2012-06-17T00:19:44.123
> 
> 标签：ios, hue

所以我有一个 UISlider 正在使用 CIFilter 更改 HUE。它非常慢，因为我在使用 uislider 时影响了基本图像。

有人对如何更有效地做到这一点有建议吗？

```
 // UI SLIDER
-(IBAction)changeSlider:(id)sender {

    [self doHueAdjustFilterWithBaseImage:currentSticker.image 
                            hueAdjust:[(UISlider *)sender value]];

}
//Change HUE
-(void)doHueAdjustFilterWithBaseImage:(UIImage*)baseImage hueAdjust:(CGFloat)hueAdjust {

    CIImage *inputImage = [[CIImage alloc] initWithImage:baseImage];
    CIFilter * controlsFilter = [CIFilter filterWithName:@"CIHueAdjust"];

    [controlsFilter setValue:inputImage forKey:kCIInputImageKey];
    [controlsFilter setValue:[NSNumber numberWithFloat:hueAdjust] forKey:@"inputAngle"];

    //NSLog(@"%@",controlsFilter.attributes);

    CIImage *displayImage = controlsFilter.outputImage;
    CIContext *context = [CIContext contextWithOptions:nil];

    if (displayImage == nil){

        NSLog(@"Display NADA");

    } else {

        NSLog(@"RETURN Image");
        currentSticker.image =  [UIImage imageWithCGImage:[context createCGImage:displayImage fromRect:displayImage.extent]];

    }

    displayImage = nil;
    inputImage = nil;
    controlsFilter = nil;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T01:37:29.013

您可以将 UISlider 的连续属性设置为 NO。这样您的 changeSlider 只会在用户松开手指时被调用。这是Apple的[文档](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/UIKit/Reference/UISlider_Class/Reference/Reference.html)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:36:05.673

您的问题是您不断重新声明上下文。将上下文作为属性并在初始化程序中初始化一次，然后一遍又一遍地使用它并看到巨大的性能提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T01:48:54.903

我想宁可改变你想要的令人敬畏的行为，滑动时频繁更新是好的！它最适合用户体验。所以不要改变这种行为，而要研究你的算法以实现更大的优化。检查这个先前提出的问题，其中有一些很好的提示。

[如何在 iOS 平台上实现快速图像过滤器](https://stackoverflow.com/questions/7122221/how-to-implement-fast-image-filters-on-ios-platform)

* * *

我的做法是，继续更新滑块属性，但尝试编写一些代码，当滑块碰到一个整数时进行更新（有趣的术语，它也可能是错误的）我的意思是检测滑块何时通过 10.000、20.000， 30.000。然后才更新图像，而不是更新每个点。希望这是有道理的。

### 编辑：

做你的，

输入法师和过滤器变量为 iVar。并检查它们是否已经被分配然后重用它而不是每次都创建。

# jquery - jQuery Validation 插件在单击事件处理程序中时不会验证

> ID：11067999
> 
> 赞同：1
> 
> 时间：2012-06-17T00:20:24.170
> 
> 标签：jquery, jquery-validate

```
$("#tournamentDesignTabs").tabs();
$("#tournamentDesign").validate();
$("#createTournament").click(function(){
    if($("#tournamentDesign").validate()){
    $.post(
        "createTournament.php",  
        {tournamentName: $("#tournamentName").val(), district: $("#district").val(), region: $("#region").val(), location: $("#location").val(), date: $("#date").val(), time: $("#time").val(), logo: $("#logo").val()},  
        function(responseText){  
            $("#result").html(responseText);  
        },  
        "html"  )
    } else {
        alert("oh no");
    }
    }
); 
```

所以上面是我用来验证一些表单信息然后将其输入数据库的脚本。我遇到的问题是 validate 函数在附加到 span 的 click 事件处理程序时似乎没有做任何事情。我还注意到 onfocusout 似乎也不正常。关于我做错了什么的任何建议或想法。我知道我正确包含了插件，因为当我提交表单时验证功能仍然有效。不过我更喜欢ajax。谢谢！

编辑：正如下面的一个答案所说，他们认为拥有 html 会有所帮助，所以这里是页面。最后一点代码和内容。我知道它又脏又乱，但我正在学习，很快就会清理干净。无论如何，它是：

```
<!DOCTYPE HTML SYSTEM>
<html>
<head>
<title>Tournament Designer</title>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/smoothness/jquery-ui.css" type="text/css" media="all" />
<link type="text/css" rel="stylesheet" href="stylesheet.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.js"></script>
<script type="text/javascript" src="jquery.ui.touch-punch.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>
<script type="text/javascript" src="code.js"></script>
</head>
<body>
<div class="topBanner">Tournament Designer</div>
<br/>
<form id="tournamentDesign" method="post" style="display:inline;">
<span id="tournamentDesignTabs">
    <ul>
        <li><a href="#tabs-1">Details</a></li>
        <li><a href="#tabs-2">Pricing & Promo Codes</a></li>
        <li><a href="#tabs-3">Divisions</a></li>
        <li><a href="#tabs-4">Mats</a></li>
        <span id="createTournament" class="pseudoButton">Create Tournament</span>
        <input type="submit" value="submit"/>
    </ul>
    <div id="tabs-1">
        <p>Enter the details concerning the tournament name, location, date, etc. here.<br/><em>(* denotes a required field)</em></p>
        Tournament Name:<input id="tournamentName" name="tournamentName" value="" class="required"/>*<br/>
        District:<select id="district" name="district" value="" class="required">
                  <option value="0">Provo</option>
                  <option value="1">SLC</option>
                </select>*<br>
        Region:<select id="region" name="region" value="" class="required">
                  <option value="0">West-USA</option>
                </select>*<br/>
        Location:<input id="location" name="location" value="" class="required"/>*<br/>
        Date:<input id="date" name="date" value="" class="required date"/>*<br/>
        Time:<input id="startTime" name="startTime" value="" class="required"/>*<br/>
        Logo:<input id="logo" name="logo" value="" class="url"/>*<span id="addPicture" onclick="displayPicture('tournamentLogo',document.getElementById('logo').value)" class="pseudoButton">Add</span><span id="removePicture" onclick="removePicture('tournamentLogo')" class="pseudoButton">Remove</span><br/>
        <span id="tournamentLogo" class="tournamentLogo"></span>
    </div>
    <div id="tabs-2">
        <p>Set the pricing structure here. You can add as many structures as you like. To remove a structure select it in the textbox below including the comma and delete it.</p>
        # of Divisions:<input id="divisionCount" name="divisionCount" value="" size="3"/> Price:<input id="divisionPrice" name="divisionPrice" value="" size="3"/><span id="addDivisionPricing" onclick="addDivisionPricing()" class="pseudoButton">Add</span><br/>
        Pricing Structures:<br/>
        <span id="divisionPricingInfo" name="divisionPricingInfo" class="divisionPricingInfo"></span><br/>
        <p>Add Promo Codes Here. A valid Promo Code will contain any character between A-Z and 0-9\. When creating a Promo Code you can set it to discount by a percentage or fixed dollar amount. Percentage is selected by default. To remove a promo code follow the same steps as above.</p>
        Promo Codes:</br>
        Code:<input id="promoCode" name="promoCode" value="" size="3"/> Discount(Percent<input type="radio" name="percentorDollar" value="0" checked>[%] or Dollars<input type="radio" name="percentorDollar" value="1">[$]): <input id="promoCodeValue" name="promoCodeValue" value="" size="3"/><span id="addPromoCode" onclick="addPromoCode()" class="pseudoButton">Add</span><br/>
        <span id="promoCodeInfo" name="promoCodeInfo" class="divisionPricingInfo"></span><br/>
    </div>
    <div id="tabs-3">
        <p>Skill & Weight Divisions</p>
        Enter Top Level Divisions Here:<input id="tournamentDivisionInput" value="" size=5><span class="addButton" onclick="addDivisions('tournamentDivisionInfo',document.getElementById('tournamentDivisionInput').value,true)">+</span>
        <span id="tournamentDivisionInfo" class="divisionInfo" style="width:800px;"></span>
    </div>
    <div id="tabs-4">
        <p>Mat Design</p>
        Add Mat Area <input id="matAreaInput" size=3/> With 4 mats. <span class="pseudoButton" onclick="addMatArea(document.getElementById('matAreaInput').value)">Add</span><br/>
        <span class="divisionPricingInfo" id="matAreaInfo"></span>
    </div>
</span>
</form>
<span id="result" class="tournamentInfo">I'm here!<span>
<script type="text/javascript">
$("#tournamentDesignTabs").tabs();
//$("#tournamentDesign").validate();
$("#createTournament").click(function(){
    if($("#tournamentDesign").validate()){
    $.post(
        "createTournament.php",  
        {tournamentName: $("#tournamentName").val(), district: $("#district").val(), region: $("#region").val(), location: $("#location").val(), date: $("#date").val(), time: $("#time").val(), logo: $("#logo").val()},  
        function(responseText){  
            $("#result").html(responseText);  
        },  
        "html"  )
    } else {
        alert("oh no");
    }
    }
);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T00:50:59.703

[`.validate()`](http://jqueryvalidation.org/validate/)是在您的`form`.

[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)返回`true`或`false`取决于您的表格目前是否有效。

因此，您将在语句中使用`.valid()`, not来测试表单是否有效......`.validate()``if`

```
$("#tournamentDesign").validate();
$("#createTournament").click(function(){
    if($("#tournamentDesign").valid()){
    ... 
```

有关更多信息，请参阅[docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid)。