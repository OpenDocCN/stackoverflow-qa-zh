# StackOverflow 问答 10012000-10012999

# html - Jpeg、png、gif 格式的图像在任何浏览器中均不显示

> ID：10012000
> 
> 赞同：0
> 
> 时间：2012-04-04T13:21:49.273
> 
> 标签：html, eclipse, adobe, adobe-illustrator

我正在设计一个网站，我正在使用 illustrator 和 Photoshop 软件为该网站创建一些图像，并将这些图像存储为 jpeg、png 和 gif 格式。我在eclipse软件中为网站编写代码，因为我使用jsp和javascript来调试它。

我的问题是，我创建并链接到 html 文件的图像显示在 Eclipse 浏览器中（它是用于检查代码的内置浏览器）。但是，它们不会在任何其他浏览器中显示，例如 IE、CROME、FIREFOX。

有谁能够帮助我？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:29:20.100

顺便说一句，听起来您没有正确链接图像。除了检查代码本身，我会在 Firefox ( `CTRL` + `U`) 中查看源代码并尝试单击 img src url。如果单击它们不会加载实际的图像文件，则您的链接是错误的。

# visual-studio-2010 - 如何使用 CMake 将 Visual Studio 项目与 OpenCV（superpack）正确链接

> ID：10012008
> 
> 赞同：0
> 
> 时间：2012-04-04T13:22:10.083
> 
> 标签：visual-studio-2010, opencv, cmake

我目前正在数字化旧的 VHS 磁带。对于后处理，我想使用 C++ 和 OpenCV 实现自定义算法。我已经在 Matlab 中实现了一个有前途的原型，但它只能处理单个图像（在我的版本（R2010a）中无法读取/写入视频文件；而且，Matlab 太慢了）。

可悲的是，我 - 一遍又一遍 - 坚持使用 CMake。虽然我想知道......这不会那么难。我*经常*遇到 CMake 的问题，所以我将在这里详细介绍。我希望您不仅可以向我指出我在这里做错了什么，还可以对我使用 CMake 提供一般性建议。也许我做错了，我不知道。

这是我到目前为止所做的：

1.  我已经从 sourceforge下载了**OpenCV 2.3.1 superpack 。**superpack 包含 OpenCV 源代码，包括并且 - 最重要的是 - 用于所有主要平台的 .lib 和 .dll 文件。因此，我不需要自己构建 OpenCV。它已经完成了。我只需要使用/链接它。
2.  我在`C:\dev\vs2010sp1_win32\opencv\2.3.1`.
3.  我已重命名`C:\dev\vs2010sp1_win32\opencv\2.3.1\OpenCVConfig.cmake.in`为`OpenCVConfig.cmake`.
4.  我为我的项目创建了一个文件夹，`C:\dev\VhsDejitterizer`其结构如下：

```
 VhsDejitterizer/
    CMakeLists.txt (A)
    src/
        CMakeLists.txt (B)
        libvhsdejitter/
            CMakeLists.txt (C)
            vhsdejitter/
                util.h
                util.cpp
        main/
            CMakeLists.txt (D)
            main.cpp 
```

* * *

以下是各个 CMakeLists.txt 文件的内容。

**/CMakeLists.txt (一)**

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT("VhsDejitterizer")

CMAKE_POLICY(SET CMP0015 OLD)
FIND_PACKAGE(OpenCV REQUIRED
            NO_MODULE
            PATHS "C:/dev/vs2010sp1_win32/opencv/2.3.1"
            NO_DEFAULT_PATH)

ADD_SUBDIRECTORY("src") 
```

**/src/CMakeLists.txt (B)**

```
ADD_SUBDIRECTORY("libvhsdejitter")
ADD_SUBDIRECTORY("main") 
```

**/src/libvhsdejitter/CMakeLists.txt (C)**

```
UNSET(source_files)
FILE(GLOB_RECURSE source_files "*.h" "*.cpp")

ADD_LIBRARY(libvhsdejitter STATIC ${source_files})
TARGET_LINK_LIBRARIES(libvhsdejitter ${OpenCV_LIBS})

UNSET(source_files) 
```

**/src/main/CMakeLists.txt (D)**

```
UNSET(source_files)
FILE(GLOB_RECURSE source_files "*.h" "*.cpp")

ADD_EXECUTABLE(main ${source_files})
TARGET_LINK_LIBRARIES(main libvhsdejitter ${OpenCV_LIBS})

UNSET(source_files) 
```

* * *

配置和生成 Visual Studio .sln (...) 文件效果很好。事实上，我没有收到任何警告或错误：

```
Configuring done
Generating done 
```

但是，我在 Visual Studio 中构建“主”项目的尝试失败了：

```
1>------ Build started: Project: main, Configuration: Debug Win32 ------
1>Build started 04.04.2012 14:38:47.
1>InitializeBuildStatus:
1>  Touching "main.dir\Debug\main.unsuccessfulbuild".
1>CustomBuild:
1>  All outputs are up-to-date.
1>ClCompile:
1>  main.cpp
1>LINK : fatal error LNK1104: cannot open file '@CMAKE_LIB_DIRS_CONFIGCMAKE@/libopencv_gpu.so.@OPENCV_VERSION@@OPENCV_DLLVERSION@@OPENCV_DEBUG_POSTFIX@.lib'
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.59
========== Build: 0 succeeded, 1 failed, 2 up-to-date, 0 skipped ========== 
```

* * *

更多细节：

*   操作系统：Windows 7 Pro 64 位
*   IDE：Visual Studio 2010 SP1
*   CMake 版本：2.8.4
*   目标平台（即我要为什么编译/构建）：Windows 32 位

* * *

我的问题：

1.  如何成功构建“主”项目？即如何解决该错误？
2.  这些是什么`@VARIABLE_OR_SOMETHING@`？我试图找出它们来自哪里，它们似乎是在`OpenCVConfig.cmake`. 但他们应该如何工作？它们是否应该在“构建时”由 Visual Studio 评估？如果是这样，他们是如何评估的？
3.  您可能已经注意到我已经建立了一个相当复杂的文件夹结构。你对此有什么建议吗？你如何组织你的图书馆和项目？有最佳实践吗？它们在哪里记录？

谢谢你和最好的问候，罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:37:43.277

这些变量可能与 CMake 的[configure_file](http://www.cmake.org/cmake/help/cmake2.6docs.html#command%3aconfigure_file)命令有关，该命令允许您指定参数化模板文档（通常以扩展名结尾`.in`），并且您可以将 CMake 变量替换到文件中以创建它。它们在`configure_file`调用时进行评估，这发生在运行 CMake 时。我认为正在发生的事情是，您使用的那个将有一个父 CMake 脚本，它将使用这些变量的内容配置该文件，然后在`add_subdirectory`调用中使用它。我建议检查任何描述顶级运行过程的自述文件（或任何定义这些变量然后手动替换它们的文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:27:33.520

我现在已经修好了。我想我可以肯定地说整个混乱不是我的错。很抱歉回答我自己的问题。

* * *

这是我首先尝试的（当然，这对我*不起作用*，但它可能对其他人有用）：

正如 Martin Foot 在他的回答中指出的那样，*.in 文件是模板，应该在 CMake 配置期间用正确的值填写。但是，我使用的是 OpenCV 超级包，其中包含所有二进制文件。出于这个原因，我从来没有执行过这样的配置步骤，因为我认为只有在你想编译某些东西时才需要这样做。

但是，似乎 - 即使您使用带有预构建二进制文件的超级包 - 您也必须配置项目才能生成 OpenCVConfig.cmake。Vadim Pisarevsky[在 OpenCV bug tracker 中声明了这一点](http://code.opencv.org/issues/597)。

出于某种原因，这对我不起作用。我像往常一样启动了 Cmake GUI，将其指向 OpenCV 目录并点击“配置”。我什至绝望地点击了“生成”。然而，没有出现 OpenCVConfig.cmake。

所以我不得不更进一步......

* * *

这实际上是有帮助的：

在最近提交的与 OpenCVConfig.cmake 相关的错误报告中，[Sergiu Dotenco 指出](http://code.opencv.org/issues/1347)“当前提供的 OpenCVConfig.cmake 非常脆弱”等。幸运的是，Sergio 还提供[了自定义 FindOpenCV.cmake 脚本](https://bitbucket.org/sergiu/opencv-cmake)。通过使用他的脚本，我终于能够生成一个有效的 Visual Studio 解决方案。

顺便说一下，这是我当前的顶级 CMakeLists.txt：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT("VhsDejitterizer")

SET(CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake-modules" ${CMAKE_MODULE_PATH})

SET(OPENCV_ROOT_DIR "C:/dev/vs2010sp1_win32/opencv/2.3.1")
#SET(OPENCV_USE_GPU_LIBS ON)
FIND_PACKAGE(OpenCV REQUIRED)

ADD_SUBDIRECTORY("src") 
```

我已经在项目`FindOpenCV.cmake`的一个新子文件夹中安装了 Sergio 的脚本`cmake-modules/`。同样重要的是要注意我正在使用（与我使用*“配置模式”*的原始设置相反）最小的 FIND_PACKAGE 变体（*“模块模式”*）。仅当使用最小变体时，CMake 才会`Find<package-name>.cmake`在 CMake 模块路径中查找脚本。请参阅[FIND_PACKAGE 的 CMake 文档](http://www.cmake.org/cmake/help/cmake-2-8-docs.html#command%3afind_package)。

* * *

我还找到了本指南，如果您是库开发人员，该指南是关于如何正确使用 CMake：[http ://www.vtk.org/Wiki/CMake/Tutorials/How_to_create_a_ProjectConfig.cmake_file](http://www.vtk.org/Wiki/CMake/Tutorials/How_to_create_a_ProjectConfig.cmake_file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:56:17.637

*我现在已经修好了。我想我可以肯定地说整个混乱不是我的错。很抱歉回答我自己的问题。*

你修好了？我遇到了同样的问题，我按照您的解决方案进行了操作，但是没有用。当 CMake 执行命令 FIND_PACKAGE( OpenCV REQUIRED )

它会输出：

```
One or more OpenCV components were not found:
  calib3d
  contrib
  core
  features2d
  flann
  highgui
  imgproc
  legacy
  ml
  objdetect
  video
CMake Error at C:/Program Files/CMake 2.8/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:91 (MESSAGE):
  Could NOT find OpenCV (missing: OPENCV_CALIB3D_LIBRARY
  OPENCV_CONTRIB_LIBRARY OPENCV_CORE_LIBRARY OPENCV_FEATURES2D_LIBRARY
  OPENCV_FLANN_LIBRARY OPENCV_HIGHGUI_LIBRARY OPENCV_IMGPROC_LIBRARY
  OPENCV_LEGACY_LIBRARY OPENCV_ML_LIBRARY OPENCV_OBJDETECT_LIBRARY
  OPENCV_VIDEO_LIBRARY) (found version "2.3.1") 
```

最后，我使用了命令 include_directories TARGET_LINK_LIBRARIES 来包含所有必要的目录或文件，它以一种尴尬的方式工作！

# android - 当设备在android中收到来电时如何播放声音？

> ID：10012009
> 
> 赞同：0
> 
> 时间：2012-04-04T13:22:12.487
> 
> 标签：android, phone-call

我想自动接听来电，我现在已经完成了我想向我的呼叫者播放我自己创建的声音，而不是 android 将使用它的默认麦克风..

来电后可以播放自己的声音吗？

**我[对此](https://stackoverflow.com/questions/3900957/how-to-automatically-answer-call-and-play-prerecorded-sound-out-to-the-caller-an)进行了裁判。谁能告诉我现在可以吗？**

我搜索了很多与这个主题相关的东西，但我仍然找不到有用的东西。

如果有人知道这件事，请帮助我..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:22:37.700

我发现这可能对你有帮助

引用自： [如何在 Android 上自动接听电话并向呼叫者和 DTMF 播放预先录制的声音](https://stackoverflow.com/questions/3900957/how-to-automatically-answer-call-and-play-prerecorded-sound-out-to-the-caller-an)

“不，抱歉，Android 无法访问通话中的音频流。最接近的是，如果设备处于免提模式，您可以将您的音频混合到扬声器播放的内容中，这可能会被麦克风拾取。”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T13:24:59.290

如此处所述（[http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/](http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/)），您应该能够检测到这一点：

> 为了检测来电，我们为动作 android.intent.action.PHONE_STATE 注册了一个 BroadcastReceiver。这将在电话状态发生变化时广播。接收意图将有一个额外的字符串变量 TelephonyManager.EXTRA_STATE 描述电话状态。如果此状态是 TelephonyManager.EXTRA_STATE_RINGING，那么将有另一个额外的字符串变量 TelephonyManager.EXTRA_INCOMING_NUMBER。此变量包含传入的电话号码。请注意，当状态不是 TelephonyManager.EXTRA_STATE_RINGING 时，此变量将不存在。

# objective-c - 如何避免向 NSURLRequest 隐式添加“If-Modified-Since”和“If-None-Match”HTTP 标头

> ID：10012010
> 
> 赞同：1
> 
> 时间：2012-04-04T13:22:13.893
> 
> 标签：objective-c, http, nsurlconnection, azure-storage, nsurlrequest

我创建`NSURLRequest`但没有设置“If-Modified-Since”和“If-None-Match”标头值，但在调试和嗅探流量之后，我发现它们是自动设置的。

对我来说这很重要，因为我使用的是 Windows Azure 存储，它需要在 url 中包含所有标头值的散列字符串。

此问题仅在 Mac OS X 上存在（我在 10.7.3 上尝试过）。在 iOS 上它无法复制。

如何避免“If-Modified-Since”和“If-None-Match”标头的这种隐式设置？

我尝试将缓存策略更改为`NSURLRequestReloadIgnoringCacheData`并有所帮助，但一段时间后此问题再次出现。非常奇怪的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T13:01:51.780

我遇到了同样的问题。我似乎通过处理 NSURLConnectionDelegate 的[connection:willCacheResponse:](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009947-CH1-BAJIECHD)方法并从该方法返回 nil 来克服它。这可以防止响应被缓存，从而避免为对同一 URL 的后续请求隐式添加这些条件标头。

# jquery - 使用 jquery 和 xml 创建动态关联数组

> ID：10012011
> 
> 赞同：0
> 
> 时间：2012-04-04T13:22:16.290
> 
> 标签：jquery, xml, arrays, associative

我正在尝试将 xml 文件中的数据存储在关联数组中。创建数组工作正常，但我无法访问其他函数（即 checkArray()）中的数据。

```
var picSetsData = (function () {
    var _picSets = [];

    $.ajax({
        type: "GET",
        url: "xml/content.xml",
        dataType: "xml",
        success: function (xml) {

            $(xml).find('set').each(function (i) {
                _picSets[i] = [];
                _picSets[i].fehler = [];
                _picSets[i].url = $(this).find('src').text();

                $(this).find('spot').each(function (e) {
                    _picSets[i].fehler[e] = [];
                    _picSets[i].fehler[e].x = $(this).find("x").text();
                    _picSets[i].fehler[e].y = $(this).find("y").text();
                });
            });
        }
    });

    return {
        getPicSets: function () {
            if (_picSets) return _picSets;
            else {
                console.log('error');
            }
        }
    };
})();

checkArray();

function checkArray() {
    console.log(picSetsData.getPicSets().length); // 1
    console.log(picSetsData.getPicSets()); // my Array Data
    console.log(picSetsData.getPicSets()[1]); //undefinded
    console.log(picSetsData.getPicSets()[1].url); //undefinded
} 
```

有什么想法可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:27:08.433

您已在函数内声明`_picSets`为**局部变量**`picSetsData`。如果要使其成为可以跨函数共享的全局变量，则需要在函数外部声明它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:32:23.650

该`$.ajax()`调用是异步的，因此周围的函数将在服务器发送数组的数据之前很久就返回。

您可以在“成功”回调中执行“checkArray()”*工作*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:33:02.887

那里没有关联数组，只有常规数组。

数组索引是从零开始的，所以如果数组中有一项，它的索引为零：

```
console.log(picSetsData.getPicSets()[0]); 
```

# ios - 了解堆栈跟踪

> ID：10012012
> 
> 赞同：1
> 
> 时间：2012-04-04T13:22:17.963
> 
> 标签：ios, xcode, stack-trace

我试图更好地理解堆栈跟踪的含义。在这种情况下，我有两个具体问题。

1 - 此堆栈跟踪是否意味着方法 setOutcome: 无法被 Task 对象的实例识别？

2 - 如果传入的参数与预期参数的类不匹配，是否会无法识别方法？

```
012-03-30 01:53:57.988 Arbonne[17625:15203] -[Task setOutcome:]: unrecognized selector sent to instance 0x81b6b60 
2012-03-30 01:53:58.151 Arbonne[17625:15203] ERROR main [Line 20] Uncaught exception: -[Task setOutcome:]: unrecognized selector sent to instance 0x81b6b60 
2012-03-30 01:53:58.154 Arbonne[17625:15203] ERROR main [Line 21] Stack trace: ( 
0 CoreFoundation 0x01d8903e __exceptionPreprocess + 206 
1 libobjc.A.dylib 0x01f1acd6 objc_exception_throw + 44 
2 CoreFoundation 0x01d8acbd -[NSObject doesNotRecognizeSelector:] + 253 
3 CoreFoundation 0x01cefed0 ___forwarding___ + 432 
4 CoreFoundation 0x01cefcb2 _CF_forwarding_prep_0 + 50 
5 Arbonne 0x00030d5d -[TaskViewController addTask:] + 237 
6 CoreFoundation 0x01d8ae99 -[NSObject performSelector:withObject:withObject:] + 73 
7 UIKit 0x0081a14e -[UIApplication sendAction:to:from:forEvent:] + 96 
8 UIKit 0x00a58a0e -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 145 
9 CoreFoundation 0x01d8ae99 -[NSObject performSelector:withObject:withObject:] + 73 
10 UIKit 0x0081a14e -[UIApplication sendAction:to:from:forEvent:] + 96 
11 UIKit 0x0081a0e6 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61 
12 UIKit 0x008c0ade -[UIControl sendAction:to:forEvent:] + 66 
13 UIKit 0x008c0fa7 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503 
14 UIKit 0x008c0266 -[UIControl touchesEnded:withEvent:] + 549 
15 UIKit 0x0083f3c0 -[UIWindow _sendTouchesForEvent:] + 513 
16 UIKit 0x0083f5e6 -[UIWindow sendEvent:] + 273 
17 UIKit 0x00825dc4 -[UIApplication sendEvent:] + 464 
18 UIKit 0x00819634 _UIApplicationHandleEvent + 8196 
19 GraphicsServices 0x02653ef5 PurpleEventCallback + 1274 
20 CoreFoundation 0x01d5d195 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53 
21 CoreFoundation 0x01cc1ff2 __CFRunLoopDoSource1 + 146 
22 CoreFoundation 0x01cc08da __CFRunLoopRun + 2218 
23 CoreFoundation 0x01cbfd84 CFRunLoopRunSpecific + 212 
24 CoreFoundation 0x01cbfc9b CFRunLoopRunInMode + 123 
25 GraphicsServices 0x026527d8 GSEventRunModal + 190 
26 GraphicsServices 0x0265288a GSEventRun + 103 
27 UIKit 0x00817626 UIApplicationMain + 1163 
28 Arbonne 0x0000324f main + 127 
29 Arbonne 0x00002c55 start + 53 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:28:29.600

1.  是的
2.  不，但是一旦您尝试使用该方法执行某些操作，您可能会从该方法中得到一个无法识别的选择器错误*-*例如，如果您期望一个数组并且您传入一个字符串，然后尝试从您的“数组”中获取一个对象，那时你会得到一个错误。

# eclipse - 如何让eclipse显示文件系统中的文件夹

> ID：10012019
> 
> 赞同：11
> 
> 时间：2012-04-04T13:22:51.283
> 
> 标签：eclipse

我需要在 Eclipse 中从文件系统中查看一个文件夹（svn）（是否有文件浏览功能）。如何做到这一点？

我不希望文件夹嵌套在项目中。在最好的情况下，eclipse 将该文件夹链接到 svn 存储库，就像所有其他项目一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T13:43:07.347

有一个*远程系统*视图可以访问您的文件系统。

```
Window -> Show View -> Other... -> Remote Systems -> Remote Systems 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-05T00:15:45.340

Eclipse：文件->新建->项目->常规->项目->

取消勾选“默认位置”

将位置设置为要浏览的文件所在的文件夹。

按“完成”后，将创建一个 Eclipse 项目，显示您文件夹中的所有文件

（因为：在现有文件夹中创建 Eclipse 项目不会清除其中的文件）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T13:55:47.043

Eclipse 以项目为中心，它不会显示不属于项目的文件或文件夹。您可以创建指向文件系统上任意位置的链接，但该链接必须位于项目中。

我所知道的最接近的事情是安装远程系统资源管理器（RSE，参见[http://www.eclipse.org/tm/](http://www.eclipse.org/tm/)），它在其远程系统视图中提供了一个本地节点。但我怀疑它与 svn 有任何集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:25:28.717

打开导航器视图....这是文件系统上的一个视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-11T19:25:11.933

您还可以创建一个作为链接的文件夹：

```
File -> New -> Folder -> Advanced (button) -> "Link to alternate location". 
```

通常我用它来链接到我的本地主机服务器（容器）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-19T19:53:21.517

您也可以右键单击要打开的文件，您将在此处看到`Show in Remote Systems view`。我不知道，如果它可能在其他 Eclipse 版本中，但我正在使用 Eclipse Mars 4.4 制作它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-20T00:11:17.257

如果你使用 git，你可以打开 Window > Perspective > Git。这将为您提供一个显示工作树的 Git 存储库资源管理器。工作树将显示文件系统中的所有文件，甚至是您创建的尚未添加到 git 的临时文件。

# c# - 我可以在 VC2010 中很好地设置 LINQ to SQL，那么为什么 SQLMetal 相关？

> ID：10012029
> 
> 赞同：2
> 
> 时间：2012-04-04T13:23:28.633
> 
> 标签：c#, .net, linq, linq-to-sql, sqlmetal

我是新来的，所以你好。

我正在使用 ASP.NET 4，并且我正在使用 LINQ to SQL 进行数据控件。按照建议，我创建了一个 DBML（LINQ to SQL 类项），然后从 SQL Server 拖动相关表。然后我在我的代码中使用这个 DBML 与 LINQ 即：

```
 using (ProjectDataContext Data = new ProjectDataContext())
        {
           Order MyOrder = new Order();

        } 
```

这一切都很好。我现在遇到了 SQLMetal。我看不到这个工具的相关性，我错过了什么吗？

谢谢，

埃德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:28:22.207

由于您使用向导将表从 SQL 中拖过，这反过来又为您生成了对象，因此不需要 SQLMetal。

SQLMetal 是一个命令行工具，您可以使用它来生成从 linq 到 sql 的这些对象，但在向导中拖放它们要容易得多。它也有它的其他用途。如需参考，请参阅此处：http: [//msdn.microsoft.com/en-us/library/bb386987.aspx](http://msdn.microsoft.com/en-us/library/bb386987.aspx)

# xml - 用于将元素嵌套在另一个元素中的 XSD 语法

> ID：10012036
> 
> 赞同：0
> 
> 时间：2012-04-04T13:23:50.290
> 
> 标签：xml, xsd

这是否是声明 XML 元素`Cluster`包含（1 个或多个实例）单个 XML 元素类型的正确方法`Node`：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Cluster" type="Node" minOccurs=2>
    </xs:element>

    <xs:element name="Node"/>
    </xs:element>
</xs:schema> 
```

我正在学习的教科书和我遇到的所有在线资源都专门讨论了涉及 的更复杂的安排`<xs:complex>`，我怀疑在这种情况下这太过分了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:44:48.047

实际上，您的 XSD 充满了各种各样的问题。尝试使用一个像样的 XSD/XML 编辑器，它应该比你想象的更能帮助你。

问题：

*   基数属性（min/max Occurs）不适用于全局元素声明。
*   如果您引用一个类型，您应该在某处对该类型进行简单或复杂的定义。

我将从一个示例 XML 开始，因为您已经知道：

```
<Cluster>
    <Node>node1</Node>
    <Node>node2</Node>
</Cluster> 
```

然后您可以使用像样的工具来生成 XSD，这是一个比您刚刚可视化的简单 XML 更复杂的主题：

```
<?xml version="1.0" encoding="utf-8"?>
<!--W3C Schema generated by QTAssistant/W3C Schema Refactoring Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="Cluster">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element maxOccurs="unbounded" name="Node" type="xsd:string" />
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

在那里您可以看到 maxOccurs，然后将其更改为您想要的值。随着您对 XSD 语法越来越熟悉，您可以开始将工作中的 XSD 编辑成更有意义的东西；最后，XSD 推断可能并不总是令人愉悦……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T15:55:25.080

我不会尝试添加关于这个特定模式的讨论。我只想说，即使在工具的帮助下，您也不应该尝试编写任何类型的模式，直到您更详细地研究了该语言。这是一个非常复杂的规范。不要试图阅读 W3C 规范；但一定要阅读有关该主题的众多好书之一，例如 Eric van der Vlist 的一本非常平易近人。它不是一种可以通过反复试验来学习的语言。

# django - 如何为基于类的视图编写装饰器——基于视图对象的权限

> ID：10012039
> 
> 赞同：4
> 
> 时间：2012-04-04T13:24:05.500
> 
> 标签：django, django-class-based-views

现在我正在使用这个应用程序进行权限检查：[django-rules](https://github.com/maraujop/django-rules)

然而，它已经一年多没有更新了，并且没有用于“新”（自 django 1.3 以来）基于类的视图的装饰器。我希望能够像这样在 urls.py 中使用：

```
url(r'^casos/(?P<pk>\d+)/editar/$', rules_permission_required('lawsuits.logical_check', raise_exception=True)(CaseUpdateView.as_view()), name='case_edit'), 
```

我不知道如何从装饰器的基于类的视图中获取对象。你们有什么想法吗？这是我到目前为止所拥有的：

```
from django.utils.decorators import available_attrs
def rules_permission_required(perm, queryset=None, login_url=None, raise_exception=False):
    def wrapper(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def inner(request, *args, **kwargs):
            #view_func is the class based view -> <function MyEditView at 0x94e54c4>

            print view_func.get_object() # doesnt work
            print view_func(request, *args, **kwargs).get_object() # doesnt work either

            #any ideas?

            if not request.user.has_perm(perm, obj=obj):
                return redirect_to_login(request, login_url, raise_exception)
            return view_func(request, *args, **kwargs)
        return inner
    return wrapper 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T15:38:06.710

`method_decorator`在 dispatch() 方法上使用： [https ://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-class-based-views](https://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-class-based-views)

```
from django.utils.decorators import method_decorator
class ClassBasedView(View):
    @method_decorator(rules_permission_required)
    def dispatch(self, *args, **kwargs):
        return super(ClassBasedView, self).dispatch(*args, **kwargs) 
```

`as_view`或者，您可以在您的 url 配置中（如上面的链接中所述）或通过将实例保存到变量中来装饰类方法的输出。

```
class ClassBasedView(View):
    def dispatch(self, *args, **kwargs):
        return super(ClassBasedView, self).dispatch(*args, **kwargs)
class_based_view = rules_permission_required(ClassBasedView.as_view()) 
```

虽然我不太确定最后一个示例是否会导致线程安全问题（取决于 Django 如何处理实例）。最好的方法可能是坚持使用`method_decorator`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:09:14.813

我最终使用了一个类装饰器

```
def rules_permission_required(perm, queryset=None, login_url=None, raise_exception=False):

    def wrapper(cls):                
        def view_wrapper(view_func):
            @wraps(view_func, assigned=available_attrs(view_func))
            def inner(self, request, *args, **kwargs):
                # get object
                obj = get_object_from_classbased_instance(
                        self, queryset, request, *args, **kwargs
                    )

                # do anything you want
            return inner
        cls.dispatch = view_wrapper(cls.dispatch)
        return cls
    return wrapper 
```

# linq - Linq Take 和 Ria 服务

> ID：10012040
> 
> 赞同：1
> 
> 时间：2012-04-04T13:24:07.357
> 
> 标签：linq, entity-framework, wcf-ria-services

我们有一种方法来获取人员。我们正在使用 EF 和 Ria 服务。按照现在的情况，我们称之为 GetPeople，在一种情况下（示例），我们得到了 920 人。我们用所有这些信息填充一个网格。我们已经决定，因为我们的应用程序正在增长，我们应该为此设置一个上限 - 500。我们也有一系列可以使用的过滤器。年就是其中之一。因此，当我在搜索中添加 2012 年的过滤器时，我返回了 460 人。我们的代码从此开始

```
return _personSearchRepository.All().Where(x => x.ProgramID == programID && x.PersonType == "Person"); 
```

到

```
return _personSearchRepository.All().Where(x => x.ProgramID == programID && x.PersonType == "Person").Take(500); 
```

我们添加了 Take(500) - 问题是当我们添加此代码时，第一次没有过滤器的搜索返回 500 人 - 这里没有问题。但是当我们添加年份过滤器时——我预计 460 会被带回，我得到了 79。我取出了，我又回到了 460。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:32:57.317

如果在 之后添加年份过滤器`.Take(500)`，则过滤器将应用于这 500 人。您将必须创建第二种方法或修改现有方法以包含过滤器的参数，然后可以在调用之前应用该参数`.Take(500)`。

我假设您的方法 return `IQueryable<Person>`，在这种情况下，应用在客户端上的过滤器基本上会产生如下结果：

```
_personSearchRepository.All().Where(x => x.ProgramID == programID 
      && x.PersonType == "Person")
   .Take(500).Where(x => x.CreatedYear = 2012); 
```

如果您将方法修改为如下所示：

```
IQueryable<Person> GetPersonsWithYearFilter(int year)
{
    return _personSearchRepository.All().Where(x => x.ProgramID == programID 
          && x.PersonType == "Person" && x.CreatedYear = year)
       .Take(500);
} 
```

那么它应该可以工作。

以上代码未经测试。

# php - 取消定义 PHP 定义？

> ID：10012042
> 
> 赞同：1
> 
> 时间：2012-04-04T13:24:12.113
> 
> 标签：php, translation, redefine

我正在努力将基于 define() 的旧语言/翻译系统转换为更灵活的系统（可能基于 JSON，但它仍然是开放的）。

作为此转换的一部分，我需要将 42 个具有数千个字符串的 .php 文件转换为我将使用的任何格式。一些定义的字符串引用其他定义或使用 PHP 代码。我不需要保持这种动态行为（无论如何它从来都不是动态的），但我需要在转换时拥有“当前”值。一个定义可能如下所示：

```
define('LNG_Some_string', 'Page $s of $s of our fine '.LNG_Product_name); 
```

由于所有定义都有一个易于识别的“LNG_”前缀，因此转换单个文件是微不足道的。但我想制作一个小脚本，一次处理所有 42 个。

理想情况下，我可以取消定义或重新定义define()，但我找不到一种简单的方法来做到这一点。这是可能吗？

或者，处理这种转换的好方法是什么？该脚本将是一次性的，因此它不需要可维护或快速。我只是希望它完全自动化以避免人为错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:44:35.317

如果速度不重要，那么您可以使用 get_defined_constants 函数。

```
$constans = get_defined_constants(true);
$myconst = array();
$myconst = $constans['user']; 
```

`$myconst`将包含您的脚本定义的所有常量:-)
PS：我不是一个好的 php 编码器，这只是一个建议:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:38:30.923

您不能取消定义常量，但可以通过使用它们和 constant() 函数来生成新脚本：

```
<?php
/* presuming all the .php files are in the same directoy */
foreach (glob('/path/*.php') as $file) {
  $contents = file_get_contents($file);
  $matches = array();
  if (!preg_match('/define\(\'LNG_(\w+)\'/', $contents, $matches) {
    echo 'No defines found.';
    exit;
  }

  $newContents = '';
  include_once $file;
  foreach ($matches as $match) {
    $newContents .= "SOME OUTPUT USING $match AS NAME AND " . constant($match) . " TO GET VALUE";
  }
  file_put_contents('new_'.$file, $newContents);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:33:58.027

定义的常量不能是未定义的。它们是不可变的。

也许您可以做的是在它们被定义之前进入并在某些情况下修改它们。

# symfony - 在 Twig 中引用表达式内部的变量

> ID：10012052
> 
> 赞同：0
> 
> 时间：2012-04-04T13:24:52.377
> 
> 标签：symfony, twig

我正在使用 Symfony2 和 Twig 显示一个表单，并且需要使用数组上的循环以动态顺序显示一些字段。代码如下所示：

```
{% for activity in activities %}
  <div class="check">
    {{ form_label(tags_form.chactivity{{ activity.id }}) }}
    {{ form_widget(tags_form.chactivity{{ activity.id }}) }}
  </div>
{% endfor %} 
```

但是当然`{{ activity.id }}`不适合这里。

如何在and表达式中使用`activity.id`（整数） ？`{{ form_label(...) }}``{{ form_widget(...) }}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:32:27.520

您可以使用[属性](http://twig.sensiolabs.org/doc/functions/attribute.html)函数执行此操作：

```
{{ form_label(attribute(tags_form, 'chactivity' ~ activity.id)) }} 
```

# windows - Windows Phone - 图钉 + 上下文菜单 + 每个图钉多个项目

> ID：10012053
> 
> 赞同：0
> 
> 时间：2012-04-04T13:24:53.550
> 
> 标签：windows, windows-phone-7, map, contextmenu, pushpin

所以我的问题是这样的：我有一个地图控件，它根据每个对象中指定的坐标创建许多图钉。在每个图钉内，我使用上下文菜单控件，以便在用户将手指放在图钉上时显示项目的名称。当我有两个项目共享完全相同的坐标时，我的问题就出现了。从我所见，基本上最后一个要创建的项目成为顶部图钉并隐藏在它下面的图钉。因此，当我单击图钉时，我只会看到该项目的上下文菜单名称，而不是下方的那个。我想要做的是让这两个项目共享一个图钉，如果它们具有相同的坐标，然后当我按下图钉时它们都出现在上下文菜单列表中。

但我完全被难住了。如果在一定距离内，图钉控件是否可能具有合并图钉的方法？我猜解决方案会比这更困难一些！

# mysql - 使用mysql获取每个名称的最佳记录

> ID：10012054
> 
> 赞同：0
> 
> 时间：2012-04-04T13:24:54.373
> 
> 标签：mysql, greatest-n-per-group

我正在尝试为某些游戏统计数据制作某种“顶级”

表是这样的

```
mapname     authid  country     name    time    date    weapon  server 
```

我有这个查询，但是不行

```
SELECT *, min(time) FROM kz_nub15 WHERE mapname = '".$map."' GROUP BY name ASC ORDER BY time ASC LIMIT 15 
```

我试图获得地图名称的最佳 15 次，但只显示每个名称的最佳时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:30:08.257

以这种方式尝试如何：

```
SELECT *
FROM kz_nub15
WHERE mapname = '".$map."'
GROUP BY name
ORDER BY time ASC
LIMIT 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:30:17.803

这是因为 min() ，取出 min() 再试一次。

# c# - C#.NET 从 JPEG 图像创建 WMV 文件

> ID：10012055
> 
> 赞同：-5
> 
> 时间：2012-04-04T13:24:54.280
> 
> 标签：c#, asp.net, .net

我有一组 JPEG 图像。我想用 C# 从 jpeg 图像创建 wmv 文件。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:39:28.213

最简单的方法是使用第三方库，例如[Bytescout Image To Video SDK](http://bytescout.com/products/developer/imagetovideosdk/imagetovideosdk_convert_jpg_to_video.html)。

# css - @Html.RenderAction 和 CSS

> ID：10012061
> 
> 赞同：0
> 
> 时间：2012-04-04T13:25:04.340
> 
> 标签：css, asp.net-mvc, asp.net-mvc-3

如何将一个类应用于以下内容，以便我可以对其应用特定的 css 样式？

其余部分由锚标记组成，因此我可以轻松地应用一个类，但是我应该将它贴在这个 @Html.RenderAction 的哪里？？？？？？

```
<li>@{Html.RenderAction("CartSummary", "ShoppingCart");}</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:29:36.137

RenderAction 不支持传入包含 html 属性的对象，就像大多数其他 MVC 辅助方法一样，因此您不能使用此方法直接应用 css 类。您可以使用父视图中的 css 类将 RenderAction 的输出包装在 div 中，也可以将包装器 div 添加到操作本身的输出中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:30:36.387

RenderAction 将输出一个 PartialView 所以我猜你的类属性应该放在视图中（你从 ShoppingCartController 中的 CartSummary 方法调用的那个）或 `<li>`调用它的内部（可能带有 DIV）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T06:22:47.233

为什么你不想使用`<a href="@Url.Action("index", "shoppingcart")" class="@yourClass" id="yourId">Cart (@ViewBag.CartCount)</a>`

简单点。

# c - 逼近常数 e 的简单 C 程序

> ID：10012064
> 
> 赞同：0
> 
> 时间：2012-04-04T13:25:07.840
> 
> 标签：c

我正在尝试创建一个将 e (e=1+1/1!+1/2!+1/3!+...) 近似为限制因子 epsilon 的程序。程序应继续添加项，直到当前语句变得小于 epsilon，其中 epsilon 是用户输入的一个小（浮点）数。

我可以编写将 e 近似为第 n 项的程序，但是一旦最近的项小于 epsilon，我就无法将其停止在停止的位置。

任何帮助将不胜感激。

```
#include <stdio.h>

int main(void)
{

int i=1,l;
float e,p,epsilon;

printf("Enter the value of epsilon: ");
scanf("%f", &epsilon);

for(;;)
{
    p=1;
    for(l = 1; l < 1; l--)
    {
        p*=l;
        if (1/p<epsilon) {
            goto done;
        }
    }

    e+=1/p;
    i++;
}

done:
    printf("The value of e limited by epsilon is %f\n",e);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:46:43.287

这些线上的东西应该可以帮助你

```
double expo ( double x, double epsilon )
{
       double sum=0;
       unsigned i=0;
       double fact=0;
       double factorial=1;
       while ( 1 )
       {
             fact=1/factorial; 
             if ((fact-epsilon) < 0.000001) /* Comparing doubles. Am I safe here? */
                 break;

             sum+=fact;
             i++;
             factorial*=i;
       }
       return sum;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:56:42.473

Go to 可能是[有害](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)的，您应该尽量减少对它的使用。你的第二个循环永远不会执行，因为 1 永远不会小于 1。如果你想跳出这样的循环，那么 while 构造就可以了。沿着这条线的东西：

```
while(1)
   Do stuff until you get what you want. A second loop here should do.
   break; 
```

使用它应该使您的程序工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:55:07.113

这是我的解决方案：

```
double eulersNumber(double epsilon)
{
    double e = 0;
    double factorial = 1;

    for (int i = 1; TRUE; i++) {
        double add = 1.0 / factorial;

        if (add < epsilon)
            break;

        e += add;
        factorial *= i;
    }

    return e;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:20:26.177

您没有初始化变量`e`。在进入循环之前初始化变量：

```
e = 1; 
```

您可能还打算使用该变量在内部循环中`i`进行初始化。循环条件似乎也被颠倒了。采用`l``for`

```
for(l = i; l > 0; l--) 
```

代替

```
for(l = 1; l < 1; l--) 
```

# php - ssl 页面不安全不知道为什么 https://www.englishandproud.org/donate/

> ID：10012065
> 
> 赞同：-2
> 
> 时间：2012-04-04T13:25:08.913
> 
> 标签：php, wordpress, ssl

我有一个客户的网站，他们的网站没有解析 https 现在我的设置与其他网站完全相同

[https://www.englishandproud.org/donate/](https://www.englishandproud.org/donate/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:33:01.653

您应该使用 https 包含所有外部文件。

使用非安全 url 获取以下内容：

[http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/script.js](http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/script.js)

[http://www.britainfirst.org/wp-content/plugins/wp-slimstat/wp-slimstat-js.php?sw=1280&sh=1024&cd=24&aa=0&id=227df&ty=0&sid=170f91a4d79c0eb180ebde832415db7d&bid=0&pl=java|flash|媒体播放器|](http://www.britainfirst.org/wp-content/plugins/wp-slimstat/wp-slimstat-js.php?sw=1280&sh=1024&cd=24&aa=0&id=227df&ty=0&sid=170f91a4d79c0eb180ebde832415db7d&bid=0&pl=java|flash|mediaplayer|)

[http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/javascript-footer.js](http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/javascript-footer.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:33:26.540

以下三个文件正在通过标准 HTTP 加载。它们看起来是您用于网站的插件之一。

[http://www.britainfirst.org/wp-content/plugins/wp-slimstat/wp-slimstat-js.php?sw=1152&sh=864&cd=24&aa=0&id=227de&ty=0&sid=91f95638b19dadc52127c4d4d9f59ca0&bid=0&pl=java|acrobat|闪光灯|媒体播放器|银光|](http://www.britainfirst.org/wp-content/plugins/wp-slimstat/wp-slimstat-js.php?sw=1152&sh=864&cd=24&aa=0&id=227de&ty=0&sid=91f95638b19dadc52127c4d4d9f59ca0&bid=0&pl=java|acrobat|flash|mediaplayer|silverlight|)

[http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/javascript-footer.js](http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/javascript-footer.js)

[http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/script.js](http://www.britainfirst.org/wp-content/uploads/it-file-cache/builder-core/script.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:34:27.820

页面上的以下两个元素可以使用`http://`和 not访问`https://`： `http://englishandproud.org/favicon.ico`

`http://englishandproud.org/wp-content/themes/BuilderChild-Default/images/favicon.ico`

请更新这些链接或完全删除对协议的引用，例如： `//englishandproud.org/wp-content/themes/BuilderChild-Default/images/favicon.ico`这将适用于安全和非安全连接。

# c# - HttpListenerResponse, C# , 代理

> ID：10012067
> 
> 赞同：0
> 
> 时间：2012-04-04T13:25:15.123
> 
> 标签：c#, proxy

当客户端关闭连接时，我的课程有问题`HttpListenerResponse`我无法将响应复制到 outputStream 这是合乎逻辑的，因为流被中断了。有没有一些简单的方法可以修复它或处理这个异常。我知道`HttpListener`这不是代理服务器的最佳解决方案。

我尝试在 true 上设置属性`IgnoreWriteExceptions`，但它不起作用。

```
 public class Ask
    {
        private int requestCounter = 0;
        private ManualResetEvent stopEvent = new ManualResetEvent(false);

        public class HttpListenerCallbackState
        {
            private readonly HttpListener _listener;
            private readonly System.Threading.AutoResetEvent _listenForNextRequest;

            public HttpListenerCallbackState(HttpListener listener)
            {
                if (listener == null) throw new ArgumentNullException("listener");
                _listener = listener;
                _listenForNextRequest = new AutoResetEvent(false);
            }

            public HttpListener Listener { get { return _listener; } }
            public AutoResetEvent ListenForNextRequest { get { return _listenForNextRequest; } }
        }

        public void ListenAsynchronously(IEnumerable<string> prefixes)
        {
            HttpListener listener = new HttpListener();

            foreach (string s in prefixes)
            {
                listener.Prefixes.Add(s);
            }

            listener.IgnoreWriteExceptions = true;
            listener.Start();

            HttpListenerCallbackState state = new HttpListenerCallbackState(listener);
            ThreadPool.QueueUserWorkItem(Listen, state);
        }

        public void StopListening()
        {
            stopEvent.Set();
        }

        private void Listen(object state)
        {
            HttpListenerCallbackState callbackState = (HttpListenerCallbackState)state;

            while (callbackState.Listener.IsListening)
            {
                callbackState.Listener.BeginGetContext(new AsyncCallback(ListenerCallback), callbackState);
                int n = WaitHandle.WaitAny(new WaitHandle[] { callbackState.ListenForNextRequest, stopEvent });
                if (n == 1)
                {
                    // stopEvent was signalled  
                    callbackState.Listener.Stop();
                    break;
                }
            }
        }

        private void ListenerCallback(IAsyncResult ar)
        {
            HttpListenerCallbackState callbackState = (HttpListenerCallbackState)ar.AsyncState;
            HttpListenerContext context = null;

            int requestNumber = Interlocked.Increment(ref requestCounter);

            try
            {
                context = callbackState.Listener.EndGetContext(ar);
            }
            catch (Exception ex)
            {
                return;
            }
            finally
            {
                callbackState.ListenForNextRequest.Set();
            }

            if (context == null) return;

            HttpListenerRequest request = context.Request;
            // add Proxy and network credentials
            HttpWebRequest webReq = (HttpWebRequest)WebRequest.Create(request.Url.AbsoluteUri);
            // get response 
            HttpWebResponse response = (HttpWebResponse)webReq.GetResponse();

            Stream responseOut = context.Response.OutputStream;

            int CopyByte = CopyStream(response, responseOut);

            responseOut.Close();

        }
    }
} 
```

# visual-studio-2005 - 当我没有遗漏任何东西时，遗漏了 using 指令或程序集引用错误

> ID：10012068
> 
> 赞同：0
> 
> 时间：2012-04-04T13:25:15.993
> 
> 标签：visual-studio-2005, .net-2.0

我有一个包含 4 个项目的解决方案。在第一个中，我引用了其他三个，不是使用浏览，而是使用添加参考-> 项目选项卡。

一开始我有所有三个 using 语句。

该程序运行良好。我测试了它并且它有效。但我无法构建它。

我收到错误“缺少 using 指令或程序集引用”。

我的项目都没有在客户资料上。（我认为.Net 2.0 甚至没有客户端配置文件）。

为什么VS这样做？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:54:58.510

干净的构建是解决方案。呃。

# c++ - C++ 通过指针传递和修改值

> ID：10012075
> 
> 赞同：2
> 
> 时间：2012-04-04T13:25:53.830
> 
> 标签：c++, pass-by-reference

直到那里我信任这种方法

```
bool solverMethod::buildSimplex(double** simplex_ , double* funcEvals_, double* initPt_)
{
  // things
} 
```

会在调用它的方法中更改 simplex、funcEvals_、initPt_ 的值（通过指针传递）。我错了吗？那怎么放呢？

感谢和问候并为简单的问题道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:43:27.187

这可能不是一个答案，因为它是对指针、引用和引用语义的一般解释。

如果函数可以更改传递给它的参数对象，则称该函数具有引用语义。例如，如果以下`swap`函数交换值，则它具有引用语义：

```
int x = 4;
int y = 8;

swap(x, y);

assert(x == 8 && y == 4); 
```

问题是如何*实现*引用语义。C++ 有一个本地引用类型，这使得这很自然：

```
void swap(int & a, int & b) { int t = a; a = b; b = t; } 
```

相比之下，C 没有这样的原生特性， C 中的*每个*对象都是按值传递的。但是，C 有一个不同的特性可以用来*实现*引用语义，即*指针*：对于每种类型`T`，都有一个相关的类型`T*`，可以通过获取类型对象的*地址*`T`来获得其值：`int x; int * p = &x;`。现在您可以按值传递这些指针对象，并使用它们来访问它们指向的原始对象。请注意，我们是按值传递指针！

```
void c_swap(int * p, int * q) { int t = *p; *p = *q; *q = t; } 
```

我们必须以不同的方式调用该函数：`swap(&x, &y)`. 因此，在 C 语言中，您始终可以判断参数是否正在被修改，因为这样做的唯一方法是将其*地址*传递给函数。在 C++ 中，您必须知道实际的函数签名才能知道引用或值语义是否到位。

# .net - 使用单位作为类型参数和覆盖方法

> ID：10012078
> 
> 赞同：2
> 
> 时间：2012-04-04T13:26:10.723
> 
> 标签：.net, f#

我基本上是在问为什么以下代码行无法编译：

```
type IGenericType<'a> = 
    abstract member MyFunc : 'a -> 'a -> 'a

type Implementer() = 
    member x.Test () () = () // unit->unit->unit
    interface IGenericType<unit> with 
        member x.MyFunc a b = b // FS0017
        // member x.MyFunc () () = () // FS0017 
```

只是好奇是否有一种方法可以使这项工作按预期进行。我认为这是一个限制，它与单元和泛型的实现有关。

我目前使用以下解决方法：

```
type Nothing = 
    | Nothing
type Implementer() = 
    interface IGenericType<Nothing> with 
        member x.MyFunc a b = b 
```

希望有人可以为这种行为带来一些启示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:43:55.423

你猜对了。对于 .NET 框架内的互操作性，F# 编译器不会发出 IL`unit`而是将其替换为`void`。

因此，您的通用接口适用于除`unit`. 这似乎不是什么大问题；您的解决方法是解决此问题的好方法。

更详细的讨论可以在[F# interface inheritance failure due to unit](https://stackoverflow.com/questions/4485445/f-interface-inheritance-failure-due-to-unit)中找到。

# mobile - 无法将三星手机（蓝牙/usb）都连接到我的 linux 盒子

> ID：10012080
> 
> 赞同：0
> 
> 时间：2012-04-04T13:26:17.727
> 
> 标签：mobile, ubuntu, bluetooth, gprs

我尝试了所有不同的东西。但它不起作用。它对linux来说是通用的。我已经在 Arch Linux 中尝试过它，现在我已经安装了 Ubuntu 12.04 beta2 也一样。我正在尝试将三星手机连接到用于 gprs 的 ubuntu 盒子，但它无法正常工作。蓝牙和usb都试过了。它与蓝牙配对很好，但在使用 DUN 服务或浏览文件等时……它只是崩溃了……就像手机没有响应它的请求一样。我已将内核从 ubuntu PPA 升级到 3.3。认为这可能会解决问题。但它是一样的。我从另一个 PPA 下载了 blueman。它还能找到手机，配对但每当我尝试浏览文件、发送文件或使用 DUN 时，它都会说我的手机没有响应。我试过手动 rfcomm bind 0... 它创建一个 /dev/rfcomm0 的东西，当你 cat > /dev/rfcomm0 它与电话通信并要求输入密码等...但是当我执行 pppd 时...聊天 dailing ...日志说同样没有来自我的电话的响应。请指导我......我该怎么办。只是为了信息。手机在windows上工作正常。我现在正在使用它。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T11:21:20.027

你应该试试这个项目：[Android File Transfer For Linux](https://github.com/whoozle/android-file-transfer-linux)

# .net - Log4Net：使用 UTC 时间记录

> ID：10012083
> 
> 赞同：35
> 
> 时间：2012-04-04T13:26:35.520
> 
> 标签：.net, log4net

使用带 .NET 的 log4net 1.2.11.0，如何让 RollingFileAppender 输出 UTC 日期？

根据 Apache，它应该很简单：

```
<dateTimeStrategy type="log4net.Appender.RollingFileAppender+UniversalDateTime" /> 
```

不幸的是，这不起作用。

我的整个 log4net 配置是：

```
 <log4net>
    <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
      <file value="Log-.txt" />
      <rollingStyle value="Date" />
      <datePattern value="yyyyMMdd"/>
      <PreserveLogFileNameExtension value="true" />
      <staticLogFileName value="false"/>
      <appendToFile value="true" />
      <maxSizeRollBackups value="10" />
      <dateTimeStrategy type="log4net.Appender.RollingFileAppender+UniversalDateTime" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date %-5level %logger - %message%newline" />
      </layout>
    </appender>
    <root>
      <!-- Options are "ALL", "DEBUG", "INFO", "WARN", "ERROR", "FATAL" and "OFF". -->
      <level value="DEBUG" />
      <appender-ref ref="RollingFile" />
    </root>
  </log4net> 
```

使用反编译器，我可以看到 log4net dll 的类型为“UniversalDateTime”，作为 RollingFileAppender 内部的私有类。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-04T16:49:13.350

请注意，使用 AdoNetAppender 时所做的更改有很大不同。在这种情况下，您需要更改参数设置：

```
<parameter>
   <parameterName value="@log_date" />
   <dbType value="DateTime" />
   <layout type="log4net.Layout.RawUtcTimeStampLayout" />
   <!--<layout type="log4net.Layout.RawTimeStampLayout" />-->
</parameter> 
```

现在，此更改将为 logDate 字段写入正确的 UTC 值。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-04T14:17:15.040

将 %date 替换为 %utcdate。

例子：

```
<conversionPattern value="%utcdate{ABSOLUTE} UTC %c{1} - %m%n" /> 
```

在此示例中，{ABSOLUTE} 是日期格式说明符：有关详细信息，请参阅[Log4Net PatternLayout 文档](http://logging.apache.org/log4net/release/sdk/?topic=html/T_log4net_Layout_PatternLayout.htm)。

我怀疑`dateTimeStrategy`可能更多地与确定在按日期滚动时使用哪个午夜（本地或 UTC）有关，但对此不确定。

# python - 如何使用 Python YouTube API 收集特定视频评论的所有作者的个人信息（年龄、性别……）

> ID：10012086
> 
> 赞同：1
> 
> 时间：2012-04-04T13:26:42.730
> 
> 标签：python, youtube-api

我正在使用带有 Python 的 YouTube API。我已经可以收集特定视频的所有评论，包括作者姓名、评论的日期和内容。
我还可以使用单独的一段代码，提取特定作者的个人信息（年龄、性别、兴趣……）。但我不能在一个地方使用它们。即我需要收集视频的所有评论，包括评论作者的姓名以及所有这些作者的个人信息。下面是我开发的代码。但是我收到一个“RequestError”，我不知道如何处理以及问题出在哪里。

```
 import gdata.youtube
import gdata.youtube.service

yt_service = gdata.youtube.service.YouTubeService()
f = open('test1.csv','w')
f.writelines(['UserName',',','Age',',','Date',',','Comment','\n'])

def GetAndPrintVideoFeed(string1):

        yt_service = gdata.youtube.service.YouTubeService()
        user_entry = yt_service.GetYouTubeUserEntry(username = string1)
        X = PrintentryEntry(user_entry)
        return X

def PrintentryEntry(entry):

        # print required fields where we know there will be information
        Y = entry.age.text
        return Y

def GetComment(next1):

        yt_service = gdata.youtube.service.YouTubeService()
        nextPageFeed = yt_service.GetYouTubeVideoCommentFeed(next1)

        for comment_entry in nextPageFeed.entry:

            string1 = comment_entry.author[0].name.text.split("/")[-1]
            Z = GetAndPrintVideoFeed(string1)
            string2 = comment_entry.updated.text.split("/")[-1]
            string3 = comment_entry.content.text.split("/")[-1]

            f.writelines( [str(string1),',',Z,',',string2,',',string3,'\n'])

        next2 = nextPageFeed.GetNextLink().href
        GetComment(next2)

video_id = '8wxOVn99FTE'
comment_feed = yt_service.GetYouTubeVideoCommentFeed(video_id=video_id)

for comment_entry in comment_feed.entry:

        string1 = comment_entry.author[0].name.text.split("/")[-1]
        Z = GetAndPrintVideoFeed(string1)
        string2 = comment_entry.updated.text.split("/")[-1]
        string3 = comment_entry.content.text.split("/")[-1]

        f.writelines( [str(string1),',',Z,',',string2,',',string3,'\n'])

next1 = comment_feed.GetNextLink().href
GetComment(next1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:59:20.790

我认为您需要更好地了解 Youtube API 以及一切如何相互关联。我编写了可以处理多种类型的 Feed 或 Entries 的包装类，并“修复”了 gdata 不一致的参数约定。

以下是一些片段，展示了如何在没有太大困难的情况下概括抓取/爬行。

我知道这不是直接回答您的问题，它是更高级的设计，但如果您要进行大量 youtube/gdata 数据提取，则值得考虑。

```
def get_feed(thing=None, feed_type=api.GetYouTubeUserFeed):

    if feed_type == 'user':
        feed = api.GetYouTubeUserFeed(username=thing)

    if feed_type == 'related':
        feed = api.GetYouTubeRelatedFeed(video_id=thing)

    if feed_type == 'comments':
        feed = api.GetYouTubeVideoCommentFeed(video_id=thing)

    feeds = []
    entries = []

    while feed:
        feeds.append(feed)
        feed = api.GetNext(feed)

    [entries.extend(f.entry) for f in feeds]

    return entries 
```

...

```
def myget(url,service=None):

    def myconverter(x):
        logfile = url.replace('/',':')+'.log'
        logfile = logfile[len('http://gdata.youtube.com/feeds/api/'):]
        my_logger.info("myget: %s" % url)

        if service == 'user_feed':
            return gdata.youtube.YouTubeUserFeedFromString(x)

        if service == 'comment_feed':
            return gdata.youtube.YouTubeVideoCommentFeedFromString(x)

        if service == 'comment_entry':
            return gdata.youtube.YouTubeVideoCommentEntryFromString(x)

        if service == 'video_feed':
            return gdata.youtube.YouTubeVideoFeedFromString(x)

        if service == 'video_entry':
            return gdata.youtube.YouTubeVideoEntryFromString(x)

    return api.GetWithRetries(url,
            converter=myconverter,
            num_retries=3,
            delay=2,
            backoff=5,
            logger=my_logger
            )

mapper={}
mapper[api.GetYouTubeUserFeed]='user_feed'
mapper[api.GetYouTubeVideoFeed]='video_feed'
mapper[api.GetYouTubeVideoCommentFeed]='comment_feed' 
```

[https://gist.github.com/2303769](https://gist.github.com/2303769) data/service.py（路由）

# android - AsyncTask 中的 ProgressDialog，NullPointerException

> ID：10012088
> 
> 赞同：0
> 
> 时间：2012-04-04T13:26:45.693
> 
> 标签：android

我已经设法实现了一个 Asynctask 来计算一些东西，但我也想在 doInBackground 运行时显示一个进度对话框。

到目前为止，这是我的代码：

```
 protected void onPreExecute() {

    this.dialog.setMessage("Please wait");
    this.dialog.show(); 

    }

    protected Integer doInBackground(Void... b) {

            ........

     return price;

    }

    protected void onPostExecute(Integer price) {

    if(dialog.isShowing()) {
        dialog.dismiss();
    }

    Toast.makeText(_ctx, price, Toast.LENGTH_LONG).show();

    } 
```

当我运行调试器时，它说对话框只包含`NULL`

我在这里做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:28:39.023

您需要实例化您的`dialog`（例如`dialog = new ProgressDialog(_ctx)`）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:29:58.833

而不是使用`this`尝试`getApplicationContext();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:32:35.153

将 onPreExecute() 中的 'this.dailog' 替换为您的 'ActivityClassname.this'。因为对话框在您的活动上下文中，但这里的“this”是指您的扩展 AsyncTask 类的类。

# c# - GridView/RadGrid - 从数据源中提取原始类型对象

> ID：10012092
> 
> 赞同：1
> 
> 时间：2012-04-04T13:27:05.993
> 
> 标签：c#, .net, visual-studio, telerik

我正在使用 Telerik RadGrid 控件来显示从数据库中提取的数据。

标记如下所示：

```
<MasterTableView runat="server" AllowMultiColumnSorting="false" DataKeyNames="PersonNumber" AllowNaturalSort="false">
            <Columns>
                <telerik:GridClientSelectColumn UniqueName="RowSelectColumn"  HeaderText="&nbsp;" Resizable="false" Reorderable="false">
                    <HeaderStyle HorizontalAlign="Center" Width="18px" />
                    <ItemStyle HorizontalAlign="Center" Width="18px" />
                </telerik:GridClientSelectColumn>
                <telerik:GridBoundColumn HeaderText="Name" UniqueName="Name" DataField="Name" SortExpression="Name" HtmlEncode="false">
                    <HeaderStyle HorizontalAlign="Center" Width="250px" />
                    <ItemStyle HorizontalAlign="Left" Width="250px" />
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn HeaderText="E-mail Address" UniqueName="EmailAddress"  DataField="EmailAddress" SortExpression="EmailAddress" HtmlEncode="false">
                    <HeaderStyle HorizontalAlign="Center" Width="200px" />
                    <ItemStyle HorizontalAlign="Left" Width="200px" />
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn HeaderText="Invite Status" UniqueName="InviteResult" DataField="InviteResult" SortExpression="InviteResult">
                    <HeaderStyle HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Left"/>
                </telerik:GridBoundColumn>            
            </Columns>
        </MasterTableView> 
```

我有一个类，比如 MyObject，它映射到数据行（某些属性未显示在网格中）。我需要它，因此当用户选择一行时，我能够检索该行表示/绑定到的原始对象。我知道关键是从数据源中提取，但是如何将一行映射到源中的等效数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:39:21.353

您可以使用 DataKeyNames 来包含网格中不存在的值，通过在客户端或服务器端检索行时设置这些值，您可以访问其他列，最常见的用途是使用 2 个函数 SelectedIndexChanged（服务器端）和 OnRowSelected（客户端）。您可以将额外的列存储在 datakeynames 中，也可以使用主键和一些 linq 从数据源中检索相同的行

```
<telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="false"
  OnSelectedIndexChanged="RadGrid1_SelectedIndexChanged">
  <MasterTableView DataKeyNames="Id,HiddenVal1,HiddenVal2" ClientDataKeyNames="Id,HiddenVal1,HiddenVal2,clientsideSpecialId">
    <Columns>
      <telerik:GridButtonColumn CommandName="Select" Text="Select" UniqueName="SelectColumn" />
      <telerik:GridBoundColumn UniqueName="ContactName" HeaderText="Contact name" DataField="ContactName" />
      <telerik:GridBoundColumn UniqueName="ContactTitle" HeaderText="Contact title" DataField="ContactTitle" />
    </Columns>
  </MasterTableView>
  <ClientSettings>
   <ClientEvents OnRowSelected="RowSelected"/>
  </ClientSettings>
</telerik:RadGrid> 
```

在所选索引上检索那些 dataKeyName 值服务器端已更改：

```
protected void RadGrid1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (RadGrid1.SelectedItems == null || RadGrid1.SelectedItems.Count == 0)
        return;

    var dataItem = RadGrid1.SelectedItems[0] as GridDataItem;
    if (dataItem != null)
    {
        var myId = dataItem.GetDataKeyValue("id").ToString();
        myTable = getDataSource();//stored in mem or retrieve from db again
        //linq or whatever you want to retrieve that row (if you need to go back to your datasource
        var name = from r in MyTable
              where r.ID == myId
              select r.Name;
    }
} 
```

如果可能的话，我建议将您需要的任何列添加到 dataKeyNames 中。

# xml - OpenERP XML Schemas 在哪里发布？

> ID：10012096
> 
> 赞同：3
> 
> 时间：2012-04-04T13:27:20.740
> 
> 标签：xml, openerp

OpenERP 将 XML 用于配置和数据文件等。它们代表了一些系统对象的序列化格式，如视图、动作等。

那么，有人知道为每个版本发布的相应 XML 模式或 DTD 在哪里吗？这将帮助我知道哪些节点和属性对每个代码版本有效。它还可以让我在某些编辑器中进行验证和自动完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:58:04.587

如果您在服务器项目中搜索`*.rng`，您会在两个地方找到它们。在 5.0 中，[该`bin/addons/base/rng`文件夹](http://bazaar.launchpad.net/~openerp/openobject-server/5.0/files/head:/bin/addons/base/rng/)有一堆文件来描述视图定义，但它们都已被合并到[`view.rng`](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/head:/openerp/addons/base/rng/view.rng)6.0 中。另一个地方是描述模块数据文件[的`import_xml.rng`文件。](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/head:/openerp/import_xml.rng)

# ruby-on-rails - 缺少模板 PDFkit

> ID：10012097
> 
> 赞同：5
> 
> 时间：2012-04-04T13:27:21.873
> 
> 标签：ruby-on-rails, routes, middleware, pdfkit

我将 gem 放入 gem 文件中，捆绑安装它。

在我的 application.rb 中有这个：

```
require 'pdfkit'
config.middleware.use PDFKit::Middleware, :print_media_type => true 
```

在做 rake 中间件时，我在其中看到“使用 PDFKit::Middleware”。

我的路线中有这个

```
match "/option_invoice/view_invoice/(/:id)" => "option_invoice#view_invoice" 
```

现在，当我转到[http://0.0.0.0:3000/option_invoice/view_invoice/2.pdf](http://0.0.0.0:3000/option_invoice/view_invoice/2.pdf)时，我收到了缺少模板的错误。没有 .pdf 的页面显示得非常好。

> 缺少模板 option_invoice/view_invoice、application/view_invoice 和 {:formats=>> >[:pdf], :locale=>[:en], :handlers=>[:coffee, :erb, :builder, :arb]}。

如果有帮助，我在 Rails 3.2.2 上。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T10:44:21.397

基本上，您只是在给定路径中缺少与 view_invoice.pdf.erb 或 view_invoice.pdf.haml 或您正在使用的任何东西相对应的模板。

您可以创建它并在 PDF 中呈现您想要的任何视图，或者您覆盖 PDFKit 提取的默认模板。

我会推荐第一个变体，这使得渲染的 PDF 独立于您的视图（种类）。

干杯!

# ios - 如何让一段代码在后台保持活跃？

> ID：10012100
> 
> 赞同：3
> 
> 时间：2012-04-04T13:27:39.237
> 
> 标签：ios, nstimer, background-process

我已经搜索过这个主题，但主要是我面临 Apple 的限制。我需要每分钟控制一次我的服务器，如果有变化，请触发本地通知。我需要的是，如何让计时器（NSTimer）在后台（或激活设备锁时）保持活动状态。请有任何想法。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:55:46.593

您可以在服务器部分执行您的逻辑，如果有更改发送推送通知。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T14:01:27.910

您需要重新考虑应用程序的设计。你不能保证当操作系统出去寻找内存来释放你的应用程序时永远不会被杀死。在那种情况下会发生什么？推送通知是您最好的选择。首先，您不需要每 60 秒轮询一次服务器；当您感兴趣的内容在服务器上发生更改时，您只需发出通知。其次，即使您的应用程序没有运行，也会收到通知。

另一个问题是您必须通过 info.plist 告诉 Apple 您的应用程序支持哪些背景模式。这确实适用于在后台运行音乐或 VoIP 的应用程序。轮询 Web 服务器不是这些受支持的模式之一。通过推送通知，您还可以获得一些委托方法，当应用程序进入前台时，您可以使用这些委托方法来处理通过通知传递的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T10:33:17.297

我的应用程序使用以下代码在后台持续运行.....

```
-(void)applicationDidEnterBackground:(UIApplication *)application

{ 
  UIApplication *app = [UIApplication sharedApplication];

  UIBackgroundTaskIdentifier bgTask = 0;

  backgroundTimer = [NSTimer scheduledTimerWithTimeInterval:10 target:self   selector:@selector(backgroundTask) userInfo:nil repeats:YES];

  bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:bgTask];
  }];

} 
```

**现在在backgroundTask**方法中做任何你想做的事情。

# windows - 重命名以

> ID：10012104
> 
> 赞同：0
> 
> 时间：2012-04-04T13:27:58.457
> 
> 标签：windows, batch-file

我创建了一个批处理脚本来使用 wget for Windows 自动更新一些文件。它下载文件名中带有版本号的文件，例如`server-2.0.exe`. 我想自动将文件重命名为`server.exe`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:32:20.423

这可能会满足您的需求，具体取决于文件名的可变性：

```
ren C:\server*.exe server.exe 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:51:24.563

我认为 wget 直接在其命令中具有该选项。

```
--output-document=file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:31:54.637

试试这个：

```
ren server????.exe server.exe 
```

# parsing - 如何使用 Data.ByteString 解析 7GB 文件？

> ID：10012106
> 
> 赞同：7
> 
> 时间：2012-04-04T13:28:21.720
> 
> 标签：parsing, haskell, readfile, bytestring

我必须解析一个文件，实际上必须先阅读它，这是我的程序：

```
import qualified Data.ByteString.Char8 as B
import System.Environment    

main = do
 args      <- getArgs
 let path  =  args !! 0
 content   <- B.readFile path
 let lines = B.lines content
 foobar lines 

 foobar :: [B.ByteString] -> IO()
 foobar _ = return () 
```

但是，编译后

```
> ghc --make -O2 tmp.hs 
```

使用 7G 文件调用时，执行会出现以下错误。

```
> ./tmp  big_big_file.dat
> tmp: {handle: big_big_file.dat}: hGet: illegal ByteString size (-1501792951): illegal operation 
```

感谢您的回复！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T13:42:35.020

`ByteString`s的长度为`Int`。如果`Int`是 32 位，则 7GB 文件将超出范围，`Int`并且缓冲区请求的大小将错误，并且很容易请求负大小。

`readFile`将文件大小转换`Int`为缓冲区请求的代码

```
readFile :: FilePath -> IO ByteString
readFile f = bracket (openBinaryFile f ReadMode) hClose
    (\h -> hFileSize h >>= hGet h . fromIntegral) 
```

如果溢出，“非法 ByteString 大小”错误或分段错误是最可能的结果。

如果可能的话，使用lazy `ByteString`s 来处理那么大的文件。在您的情况下，您几乎必须使其成为可能，因为使用 32 位s，不可能创建`Int`7GB 。`ByteString`

如果需要处理的行是 strict `ByteString`，并且没有行过长，可以通过 lazy`ByteString`来实现

```
import qualified Data.ByteString.Lazy.Char8 as LC
import qualified Data.ByteString.Char8 as C

main = do
    ...
    content <- LC.readFile path
    let llns = LC.lines content
        slns = map (C.concat . LC.toChunks) llns
    foobar slns 
```

但是如果你可以修改你的处理来处理惰性`ByteString`s，那总体上可能会更好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T13:44:30.733

Strict`ByteString`仅支持最多 2 GiB 的内存。您需要使用[lazy`ByteString`](http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString-Lazy.html)才能使其工作[。](http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString-Lazy.html)

# javascript - 用 JS 创建 IFRAME 并显示在页面的任何位置

> ID：10012108
> 
> 赞同：1
> 
> 时间：2012-04-04T13:28:26.717
> 
> 标签：javascript, iframe

如何使用 JavaScript 创建 IFRAME 并将我的任何页面作为 src 提供，我还需要为 src 提供参数，以便根据这些参数返回数据。例如，这是我的 src 链接：[http](http://www.mysite.com/pages/exportdata.aspx?category=game) : //www.mysite.com/pages/exportdata.aspx?category=game 这将转到我的数据库并返回游戏类别下的游戏名称。

然后我将在页面上的任何地方显示这个 iframe，它本身不能访问我的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:47:30.920

你的意思是

```
window.onload=function() {
  var cat = "game";
  var fr = document.createElement("iframe");
  fr.width="400";
  fr.height="500";
  fr.src="http://www.mysite.com/pages/exportdata.aspx?category="+cat;
  document.getElementById('frameContainer').appendChild(fr);
} 
```

# sqlite - Phonegap Sqlite 需要的示例插入记录，然后将其他记录插入到不同的表中

> ID：10012112
> 
> 赞同：-1
> 
> 时间：2012-04-04T13:28:34.743
> 
> 标签：sqlite, cordova

我有一点确实让我陷入困境，需要帮助

我有两张桌子 1) Jobs 2) JobNotes

Jobs 由以下 ID 整数 PRIMARY KEY、Name nvarchar(100) COLLATE NOCASE 等组成。

JobNotes 由以下 ID 整数 PRIMARY KEY、JobID 整数组成。注释 nvarchar(100) COLLATE NOCASE FOREIGN KEY ([JobID ]) REFERENCES Jobs,

当我将作业插入数据库时​​，我需要插入作业注释并将 JobID 设置为之前刚刚插入的作业的 id。

有没有人有例子或知道可以使用phonegap和sqlite完成的方法。

最好的问候， Lmac

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T07:29:16.263

完成插入后，我得到最大 id，然后将其传递给另一个更新外键的函数。

它不是最理想的方式，但到目前为止似乎有效。

# apache - CXF JAXRS - http-conf:client ReceiveTimeout 不起作用？

> ID：10012118
> 
> 赞同：2
> 
> 时间：2012-04-04T13:28:42.967
> 
> 标签：apache, cxf, jax-rs

我客户的春季环境：

```
<http-conf:conduit name="*.http-conduit">
    <http-conf:authorization>
        <sec:AuthorizationType>Negotiate</sec:AuthorizationType>
    </http-conf:authorization>
    <http-conf:client ReceiveTimeout="0"></http-conf:client>
</http-conf:conduit> 
```

服务器继续处理请求，但是客户端在 60000ms 后超时，这是默认的超时值。有什么帮助吗？

**更新（2012 年 4 月 10 日）：**

尝试了以下方法。

```
 ClientProxyImpl client = (ClientProxyImpl) alertService;
    Client proxy = ClientProxy.getClient(alertService);

    HTTPConduit conduit = (HTTPConduit) proxy.getConduit();

    HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();
    httpClientPolicy.setConnectionTimeout(30000);
    httpClientPolicy.setReceiveTimeout(60000);

    conduit.setClient(httpClientPolicy); 
```

得到以下异常。

```
Exception in thread "main" java.lang.ClassCastException: org.apache.cxf.jaxrs.client.ClientProxyImpl cannot be cast to org.apache.cxf.frontend.ClientProxy
at org.apache.cxf.frontend.ClientProxy.getClient(ClientProxy.java:120) 
```

感谢任何帮助以使其正常工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:58:13.547

尝试更改为：

```
<http-conf:conduit name="http://hostname.com/.*"> 
```

看看是不是这样捡的。Rest 并没有真正的端点名称的概念，而像 JAX-WS 那样，它可能无法匹配。

# java - 猴子修补库，直到 OSS 项目发布补丁

> ID：10012126
> 
> 赞同：1
> 
> 时间：2012-04-04T13:29:03.217
> 
> 标签：java, reflection, aop, bcel

我在我的代码中使用了一个完善的开源库，我在其中发现了一个错误并将其报告给社区。但是我没有资格修复这个错误，因为我不知道更改代码的所有副作用。该错误位于最终类的私有函数中。该框架将这个类的一个已经实例化的版本传递给我的函数。我想知道是否有任何合适的猴子修补技术可以用来在我需要的时间内修复该类的该实例。这将限制任何潜在的不良副作用。我知道有些技术可能会有所帮助，例如面向方面的编程、字节码操作或反射。在这种情况下我应该怎么做？

非常感谢您的建议。

# asp.net-mvc-3 - 带有 Bind 的通用操作结果

> ID：10012127
> 
> 赞同：0
> 
> 时间：2012-04-04T13:29:04.043
> 
> 标签：asp.net-mvc-3, generics

是否可以有一个带有以下签名的 ActionResult：

```
[HttpPost]
public ActionResult SomeAction<T>([Bind(Prefix = typeof(T).Name)] T data)
{
  MapAndUpdateModel<T>(data);
  return Content(Boolean.TrueString);
} 
```

我好像不能用`typeof(T).Name`？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:47:45.867

属性参数必须是类型或编译时常量。您不能调用方法（Name 属性 getter）来为属性提供值。

不幸的是，BindAttribute 被长长的硬编码调用链中的 MVC 内部消耗，没有一个微不足道的扩展钩子。如果您想添加一个允许推断前缀的类似属性，这是可能的，但您几乎需要替换 ControllerActionInvoker 只是为了更改参数绑定行为。

# ruby-on-rails - Rails Facebook 自定义登录按钮

> ID：10012132
> 
> 赞同：2
> 
> 时间：2012-04-04T13:29:23.263
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-plugins, facebooker2

我正在使用 Facebooker2 插件在 Rails 中进行 Facebook 集成。这是我目前呈现 Facebook 登录按钮的方式：

```
fb_login_and_redirect("redirect_url", :text => "Login with Facebook", :scope => 'email,offline_access') 
```

而不是使用标准的 Facebook 按钮，我想使用我自己的风格。最简单的方法是什么？

谢谢，米哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:16:37.350

我没有使用 facebooker2 插件，但是 koala。您能否关注这一集并使用许多提供商： [http ://railscasts.com/episodes/304-omniauth-identity?view=asciicast](http://railscasts.com/episodes/304-omniauth-identity?view=asciicast)

# c# - 如何在 C# 中将常规字符串转换为 ASCII 十六进制字符串？

> ID：10012140
> 
> 赞同：1
> 
> 时间：2012-04-04T13:29:46.150
> 
> 标签：c#, .net, string, hex

我最近在做一个项目，我需要将常规的数字字符串转换为 ASCIII 十六进制并将十六进制存储在字符串中。

所以我有类似的东西

```
string random_string = "4000124273218347581" 
```

我想将其转换为形式的十六进制字符串

```
string hex_string = "34303030313234323733323138333437353831" 
```

这似乎是一项奇怪的特定任务，但这是我遇到的一项任务，当我试图找出如何执行它时，我在网上找不到任何答案。

无论如何，我想通了并创建了一个类来使我的代码更整洁。

如果其他人需要将常规字符串转换为十六进制字符串，我将在稍后发布包含我的解决方案的答案。

（我对stackoverflow相当陌生，所以我希望这样做没问题）

==========================================

事实证明，由于没有足够高的声誉，我无法在提问的前 8 小时内自己回答我的问题。

所以我在这里坚持我的答案：

好的，这是我的解决方案：

我创建了一个`StringToHex`在命名空间中调用的类

```
public class StringToHex
{
    private string localstring;
    private char[] char_array;
    private StringBuilder outputstring = new StringBuilder();
    private int value;

    public StringToHex(string text)
    {
        localstring = text;
    }

    public string ToAscii()
    {
        /* Convert text into an array of characters */
        char_array = localstring.ToCharArray();
        foreach (char letter in char_array)
        {
            /* Get the integral value of the character */
            value = Convert.ToInt32(letter);

            /* Convert the decimal value to a hexadecimal value in string form */
            string hex = String.Format("{0:X}", value);

            /* Append hexadecimal version of the char to the string outputstring*/
            outputstring.Append(Convert.ToString(hex));
        }
    return outputstring.ToString();
    }
} 
```

要使用它，您需要执行以下操作：

```
/* Convert string to hexadecimal */
StringToHex an_instance_of_stringtohex = new StringToHex(string_to_convert);
string converted_string = an_instance_of_stringtohex.ToAscii(); 
```

如果它工作正常，转换后的字符串应该是原始字符串长度的两倍（由于十六进制使用两个字节来表示每个字符）。

现在，正如有人已经指出的那样，您可以在这里找到一篇类似的文章：

[http://www.c-sharpcorner.com/UploadFile/Joshy_geo/HexConverter10282006021521AM/HexConverter.aspx](http://www.c-sharpcorner.com/UploadFile/Joshy_geo/HexConverter10282006021521AM/HexConverter.aspx)

但是我发现它对我的具体任务没有多大帮助，我想我的解决方案更优雅；）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T13:38:54.957

只要字符串中的字符代码不大于 255 (0xFF)，这将起作用：

```
string hex_string =
  String.Concat(random_string.Select(c => ((int)c).ToString("x2"))); 
```

注意：这也适用于 16 (0x10) 以下的字符代码，例如，它将`"0D0A"`从换行符生成十六进制代码`"\r\n"`，而不是`"DA"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:32:16.260

您需要阅读以下文章 -

[http://www.c-sharpcorner.com/UploadFile/Joshy_geo/HexConverter10282006021521AM/HexConverter.aspx](http://www.c-sharpcorner.com/UploadFile/Joshy_geo/HexConverter10282006021521AM/HexConverter.aspx)

将数据转换为十六进制格式的主函数

```
public string Data_Hex_Asc(ref string Data)
{
    string Data1 = "";
    string sData = "";
    while (Data.Length > 0)
    //first take two hex value using substring.
    //then convert Hex value into ascii.
    //then convert ascii value into character.
    {
        Data1 = System.Convert.ToChar(System.Convert.ToUInt32(Data.Substring(0, 2),  16)).ToString();
        sData = sData + Data1;
         Data = Data.Substring(2, Data.Length - 2);
    }
    return sData;
} 
```

看看这是不是你要找的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T08:49:23.407

好的，这是我的解决方案：

我创建了一个`StringToHex`在命名空间中调用的类

```
public class StringToHex
{
    private string localstring;
    private char[] char_array;
    private StringBuilder outputstring = new StringBuilder();
    private int value;

    public StringToHex(string text)
    {
        localstring = text;
    }

    public string ToAscii()
    {
        /* Convert text into an array of characters */
        char_array = localstring.ToCharArray();
        foreach (char letter in char_array)
        {
            /* Get the integral value of the character */
            value = Convert.ToInt32(letter);

            /* Convert the decimal value to a hexadecimal value in string form */
            string hex = String.Format("{0:X}", value);

            /* Append hexadecimal version of the char to the string outputstring*/
            outputstring.Append(Convert.ToString(hex));
        }
    return outputstring.ToString();
    }
} 
```

要使用它，您需要执行以下操作：

```
/* Convert string to hexadecimal */
StringToHex an_instance_of_stringtohex = new StringToHex(string_to_convert);
string converted_string = an_instance_of_stringtohex.ToAscii(); 
```

如果它工作正常，转换后的字符串应该是原始字符串长度的两倍（由于十六进制使用两个字节来表示每个字符）。

现在，正如有人已经指出的那样，您可以在这里找到一篇类似的文章：

[http://www.c-sharpcorner.com/UploadFile/Joshy_geo/HexConverter10282006021521AM/HexConverter.aspx](http://www.c-sharpcorner.com/UploadFile/Joshy_geo/HexConverter10282006021521AM/HexConverter.aspx)

但是我发现它对我的具体任务没有多大帮助，我想我的解决方案更优雅；）

# html - 用于移动设备的 html，页面大小调整和页面加载后出现滚动

> ID：10012141
> 
> 赞同：0
> 
> 时间：2012-04-04T13:29:51.050
> 
> 标签：html, mobile, resize, scroll

我正在尝试制作一个响应式网站，也适用于手机。我的问题是当我试图在我的手机上进入该网站时，它看起来还不错，直到页面加载，之后页面调整大小使其自身变大并在宽度和高度上滚动出现。

有什么我可以添加以使其占用屏幕大小的吗？提前谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:37:34.070

没有源代码，我们无法知道您的网站为什么不适合屏幕。尝试在您的 CSS 中查看一些内容，例如

```
@media (max-width: 640px) {
  body {
    width: 100%;
  }
} 
```

[来自alsacreations](http://www.alsacreations.com/astuce/lire/1177-une-feuille-de-styles-de-base-pour-le-web-mobile.html)的更多 css 风格

```
@media (max-width: 640px) {

 /* passer tous les éléments de largeur fixe en largeur automatique */
 body, element1, element2 {
   width: auto;
   margin: auto;
   padding: auto;
 }

 /* fixer une largeur maximale  de 100 % aux éléments potentiellement problématiques */
 img, table, td, blockquote, code, pre, textarea, input, iframe, object, embed, video {
   max-width: 100%;
 }
/* conserver le ratio des images et empêcher les débordements de boîtes dûs aux border ou padding */
 img {
   height: auto; width: auto;
   -webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
 }

 /* gestion des mots longs */
 textarea, table, td, th, code, pre, samp {
   word-wrap: break-word; /* passage à la ligne forcé */
   -webkit-hyphens: auto; /* césure propre */
   -moz-hyphens: auto;
   hyphens: auto;
 }
 code, pre, samp {
   white-space: pre-wrap; /* passage à la ligne spécifique pour les éléments à châsse fixe */
 }

 /* Passer à une seule colonne (à appliquer aux éléments multi-colonnes) */
 element1, element2 {
   float: none !important;
   width: auto !important
 }

 /* masquer les éléments superflus */
 .hide_mobile {
   display: none !important;
 }

 /* Un message personnalisé */
 body:before {
   content: "Version mobile du site";
   display: block;
   color: #777;
   text-align: center;
   font-style: italic;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:33:08.050

尝试将页面宽度设置为 100%

身体{宽度：100%；}

# c++ - 检查多维数组C++的内存位置

> ID：10012143
> 
> 赞同：0
> 
> 时间：2012-04-04T13:30:01.750
> 
> 标签：c++, memory-management, multidimensional-array

我有一个代码段，它生成一个随机数的动态 3D 数组并将其分配给一块内存。我想我是正确的，但我如何测试它是否都位于一个连续的内存块中？有办法吗？我有一个 cout 函数，可以将每个元素的地址打印到屏幕上，它似乎是正确的，但我不能确定。我知道我也必须再次释放内存，但这会在以后发生。

```
#include <cstdlib>
#include <cstdio>
#include <iostream>
#include <ctime>

using namespace std;

int main()
{
 int ***dyn_array;
 int **buffer_1;
 int i;
 int j;
 int k;

  int *buffer=new int[5*3*2];//Create a buffer for a block of memory
 dyn_array = new int**[5];
 buffer_1 = new int *[3];

  srand(time(NULL));

  cout<<"The address of the buffer is: "<<buffer<<endl;

 for(i=0;i<5;i++)
 {
  dyn_array[i] = &buffer_1[i*3]; 
    for(j=0;j<3;j++)
    {
     dyn_array[i][j] = &buffer[j*2];
    }
 }

   for(i=0; i<5; i++)
   {
     for(j=0; j<3; j++)
     {
       for(k=0; k<2; k++)
       {
      dyn_array[i][j][k]=rand()%40;
          cout<<"dyn array ["<<i<<"]["<<j<<"]["<<k<<"] is: "<<dyn_array[i][j][k]<<endl;
          cout<<"Memory Address is: "<<&dyn_array[i][j][k]<<endl;
       }
     }
    }
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:35:51.103

> 如何测试它是否全部位于连续的内存块中？

如果表达式`new int[5*3*2];`没有引发异常并且没有返回 0，那么您已经分配了一个连续的内存块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:42:23.383

先说几点：

```
buffer_1 = new int *[3];
for(i=0;i<5;i++) {
  dyn_array[i] = &buffer_1[i*3];
  ...
} 
```

您正在为`buffer_1`（元素 0、1、2）的三个整数指针分配内存，但在循环中您访问元素 0、3、6、9、12。（实际上，您获取那些未分配元素的地址，但是然后你*会*立即在循环中访问它们）访问越界元素是不可抗拒的行为

另外，回答您的主要问题：语言保证当您分配数组（静态或动态）时，元素占用一个连续的内存块。否则指针算术 (`int*p=new int[2]; *(p+1)=5;) 将不起作用。

来自评论的更新：

要实现多维数组效果，最简单的方法是使用您的`int *buffer=new int[5*3*2];`声明：它为 30 个元素分配内存。要对其进行索引，您可以使用`buffer[i*3*2+j*2+k]=n`, 其中`0<=i<5`, `0<=j<3`,`0<=k<2`和`n`是一个整数。如果您要静态分配数组 ( `int buffer[5][3][2];`)，内部索引机制将是相同的。

此外，使用命名常量（例如`const int MAX_DIM1=5;`）而不是原始数字（又名幻数）——将使您的代码更易于维护

# java - 我可以在不下载的情况下比较两个文件：http 服务器上的本地和远程文件吗？

> ID：10012144
> 
> 赞同：5
> 
> 时间：2012-04-04T13:30:02.970
> 
> 标签：java, android

我想比较两个文件（一个文件位于本地位置，第二个文件位于 http 服务器上）。我可以不下载吗？我想知道这两个文件是完全一样的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T13:31:22.407

1.  散列两边的文件
2.  从服务器获取哈希
3.  与本地文件的哈希比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:31:47.193

取决于您需要什么级别的比较。我假设您也不想将本地副本上传到服务器。您可以使用 MD5 或 SHA1 轻松获取文件的哈希值，并将该哈希值发送到服务器以比较文件。如果哈希匹配，它们是相同的。如果它们不同，那么您可以选择上传文件以进行差异类型比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:32:18.033

你不能。

您可以创建一个 MD5 或 SHA1 校验和并将其放在您的文件旁边到服务器上。比你必须下载该文件。

您可以使用 http 缓存机制（电子标签等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:54:21.567

我不明白你为什么需要这种东西..它不是通常的情况。

首先是位于本地服务器中的文件（我想你可以得到它的大小）

以及 http 服务器上的文件，您需要制作可以为您提供文件大小的 web 服务..

这样您就可以轻松比较拖车文件的大小。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T13:31:20.783

我使用一个名为 Beyond Compare 的应用程序来做到这一点。[http://www.scootersoftware.com/](http://www.scootersoftware.com/)

# video - Flow 播放器和支持的文件格式

> ID：10012147
> 
> 赞同：0
> 
> 时间：2012-04-04T13:30:15.543
> 
> 标签：video, flowplayer

Flow 播放器声称它支持所有文件格式。视频文件是否需要转成flv格式才能支持上述说法？或者我们可以以原始格式（avi，mov）播放视频吗？

我正在使用带有“flowplayer-3.2.8.min.js”和“flowplayer-3.2.9.swf”的免费版本来呈现网页上的视图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:45:35.750

Flowplayer 支持 FLV、H.264 和 MP4 视频格式。基本上Adobe Flash支持的所有视频格式；它们在[此处](http://flowplayer.org/documentation/technical-facts.html#formats)列出。

您必须将文件转换为上述格式之一。

希望这可以帮助。

# c# - 如何以编程方式创建 GPO？

> ID：10012150
> 
> 赞同：0
> 
> 时间：2012-04-04T13:30:26.323
> 
> 标签：c#, vb.net, group-policy, gpo

我需要通过组策略部署我的 vb.net 应用程序。我在这里找到了一些关于如何做到这一点的信息[http://windowsdevcenter.com/pub/a/windows/2006/11/14/how-to-deploy-software-using-group-policy.html](http://windowsdevcenter.com/pub/a/windows/2006/11/14/how-to-deploy-software-using-group-policy.html)。

现在我需要以编程方式做同样的事情。请就此提出一些链接、文档或教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:11:25.583

出色地，

~~我认为没有记录在案的 API 可以创建 GPO。您可以手动创建它，然后使用[CreateGPOLink](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373492(v=vs.85).aspx)函数将其链接到 OU 的~~

刚刚找到了假设创建新 GPO 的 PS 脚本，认为它可能对您有所帮助 [http://blogs.technet.com/b/heyscriptingguy/archive/2009/02/11/how-can-i-create-new-组策略对象.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2009/02/11/how-can-i-create-new-group-policy-objects.aspx)

我认为您的问题在这里得到了回答[C# linking group policy in AD](https://stackoverflow.com/questions/5312157/c-sharp-linking-group-policy-in-ad)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:40:58.827

希望这可以帮助。就像我说的，它很丑，但它有效。您可能必须安装组策略管理控制台，以便添加对 GPMGMTLib.dll 的引用。这直接来自我的代码，所以你必须使用它，但它应该让你朝着正确的方向前进：

```
Dim GPM As New GPMGMTLib.GPM
Dim GPMConst As GPMGMTLib.GPMConstants = GPM.GetConstants
Dim GPMDomain As GPMGMTLib.GPMDomain = GPM.GetDomain(Environment.GetEnvironmentVariable("USERDNSDOMAIN"), "", GPMConst.UseAnyDC)
Dim RootDSE As New DirectoryServices.DirectoryEntry("LDAP://RootDSE")
'Dim GPMSOM As GPMGMTLib.GPMSOM = GPMDomain.GetSOM("OU name") 'to link to specific OU
Dim GPMSOM As GPMGMTLib.GPMSOM = GPMDomain.GetSOM(RootDSE.Properties("defaultNamingContext").Value.ToString()) '//DC=domain,DC=test

'//=======================
'//see if we already exist
'//=======================
Dim GPMSearchExisting As GPMGMTLib.GPMSearchCriteria = GPM.CreateSearchCriteria
GPMSearchExisting.Add(GPMConst.SearchPropertyGPODisplayName, GPMGMTLib.GPMSearchOperation.opEquals, "Agent_Installation")
Dim GPOListExisting As GPMGMTLib.GPMGPOCollection = GPMDomain.SearchGPOs(GPMSearchExisting)
If GPOListExisting.Count <> 0 Then
    MsgBox("GPO already exists.")
    Exit Sub
End If

'//=============================================================================
'//copy compressed GPO template from embedded resources to filesystem then unzip
'//=============================================================================
lblStatus.Text += "Copying embedded GPO template to filesystem..." & vbNewLine
lblStatus.Refresh()
My.Computer.FileSystem.WriteAllBytes("c:\Agent_Installation_GPO.zip", My.Resources.Agent_Installation_GPO, False)
lblStatus.Text += "Extracting GPO template from archive..." & vbNewLine
lblStatus.Refresh()
Call UnZip("c:\Agent_Installation_GPO.zip", "c:\")

'//=========================================================================================
'//need to create a GPO migration table on the fly. see Create_Migration_Table() for details
'//=========================================================================================
lblStatus.Text += "Creating GPO migration table..." & vbNewLine
lblStatus.Refresh()
Call Create_Migration_Table("c:\Agent_Installation_GPO.migtable")

lblStatus.Text += "Creating GPO..." & vbNewLine
lblStatus.Refresh()

Dim GPO As GPMGMTLib.GPMGPO = GPMDomain.CreateGPO
GPO.DisplayName = "Agent_Installation"

lblStatus.Text += "Linking GPO to domain..." & vbNewLine
lblStatus.Refresh()

'//===========================
'//links the GPO to the domain
'//===========================
GPMSOM.CreateGPOLink(-1, GPO)

Dim GPMSearchCriteria As GPMGMTLib.GPMSearchCriteria = GPM.CreateSearchCriteria
GPMSearchCriteria.Add(GPMConst.SearchPropertyGPODisplayName, GPMGMTLib.GPMSearchOperation.opEquals, "Agent_Installation")
Dim GPOList As GPMGMTLib.GPMGPOCollection = GPMDomain.SearchGPOs(GPMSearchCriteria)
Dim GPMGPO As GPMGMTLib.GPMGPO = GPOList.Item(1)

lblStatus.Text += "Importing settings from template..." & vbNewLine
lblStatus.Refresh()

'//========================================================
'//link migration table to template and import all settings
'//========================================================
Dim GPMBackupDir As GPMGMTLib.GPMBackupDir = GPM.GetBackupDir("C:\Agent_Installation_GPO")
Dim GPMBackup As GPMGMTLib.GPMBackup = GPMBackupDir.GetBackup("{193E0BEE-B37E-4472-A032-F297C4A5D8E1}")
Dim GPMMigrationTable As GPMGMTLib.GPMMigrationTable = GPM.GetMigrationTable("c:\Agent_Installation_GPO.migtable")
Dim GPMResult As GPMGMTLib.GPMResult = GPMGPO.Import(0, GPMBackup, GPMMigrationTable)

lblStatus.Text += "Done"
lblStatus.Refresh() 
```

这就是创建迁移表的函数。对于我的测试，我使用了 test.domain，但正如您所见，我在合并 XML 之前将其替换为当前域。请注意，XML 必须是 utf-16，否则这将不起作用。

```
Using objWriter As New System.IO.StreamWriter(strPath, False, System.Text.Encoding.Unicode) '//must be utf-16
    objWriter.WriteLine("<?xml version=""1.0"" encoding=""utf-16""?>")
    objWriter.WriteLine("<MigrationTable xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns=""http://www.microsoft.com/GroupPolicy/GPOOperations/MigrationTable"">")
    objWriter.WriteLine("  <Mapping>")
    objWriter.WriteLine("    <Type>UNCPath</Type>")
    objWriter.WriteLine("    <Source>\\test.domain\netlogon</Source>")
    objWriter.WriteLine("    <Destination>\\" & Environment.GetEnvironmentVariable("USERDNSDOMAIN") & "\netlogon</Destination>")
    objWriter.WriteLine("  </Mapping>")
    objWriter.Write("</MigrationTable>")
    objWriter.Close()
End Using 
```

# javascript - 使用 dojo 向外部服务器发送请求登录

> ID：10012151
> 
> 赞同：0
> 
> 时间：2012-04-04T13:30:27.380
> 
> 标签：javascript, login, dojo

我正在尝试使用 dojo 编写登录功能。就我而言，在这种情况下，我需要向 extern (!!) 服务器发出 post 请求：

登录定义如下：

> **登录**
> 
> 登录是一种特殊操作，不处理任何数据，而是对用户进行身份验证。将发出一个 POST 请求，其中包含一个带有“电子邮件”和“密码”键的 json 对象。返回值为真或假。返回一个特殊的 Cookie 以供进一步识别。
> 
> **有效的 API 调用**
> 
> 网址：/api/login
> 
> 方法：POST
> 
> **领域：**
> 
> 电子邮件
> 
> 密码
> 
> **说明：**以 PLIST 格式返回登录用户的所有数据。如果登录失败，则以 PLIST 格式返回 false。

好吧，我尝试通过 io.iframe.send 调用解决该问题，但出现以下错误：错误：访问属性“getElementsByTagName”的权限被拒绝

但是，我什至不确定 io.iframe 是否是解决我的问题的正确方法。

也许你可以帮助我 非常感谢

PS：我当前的代码如下所示：

```
function login(){
    require(["dojo/io/iframe", "dojo/dom"], function(iframe, dom){
        var email = dom.byId("logEmail").value;
        var password = dom.byId("logPassword").value;

        function JSONreq(){

            var jsonpArgs = {
                method: 'POST',
                handleAs:"json",
                content:{
                    email: email,
                    password: password

                },
                url: "http://---someServerThatIDontWantToName---/api2/login",
                load: function (response, ioargs){
                    //console.log(response)
                    alert('succes');
                },
                error: function(response, ioargs){
                    alert("error");
                }
            };
            iframe.send(jsonpArgs);
        }
        dojo.ready(JSONreq);

    });
}; 
```

* * *

移动开发有什么不同吗？跨服务器发布请求应该可以在移动设备上进行。

所以：我可以出于这个原因使用 io.iframe.send 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:02:04.293

您可以使用目标 iframe 向另一个域发送 POST 请求，但不能从该 iframe 读取任何属性或 DOM 节点。

有`XHR2`，但并非所有浏览器都支持它，服务器应该返回特定的标头。而且我不确定您是否可以通过 XHR2 发送 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:01:48.673

简而言之，您不能在任何给定时间通过浏览器客户端在 X 域上使用 POST 请求。原因是，DOM 在另一个命名空间上受到保护，通过 io.iframe 发生的事情是；

1.  建立 GET 请求
2.  查找表单，如果存在（远程）输入，则检查 foreach（本地）名称/值内容密钥对
    *   如果不存在，则创建如下：`dojo.create("input", {type: "hidden", name: name, value: value}, fn);`
    *   否则，在 form.element-of-name 上设置值。

因此，首先 2) 由于安全限制，DOM 查找将失败，这意味着“不存在”，然后反过来，2.1) dojo.create 将以相同的原因失败。

典型的解决方法是

1.  在您的 x-domainserver/api/login 中打开 GET 方法（设置 url: prefix + dojo.formToQuery(form)
2.  创建一个在轮询间隔上刷新的 url，使登录保持活动状态
3.  在您的 samehost-server/api/login/passthrough 上创建一个“跳转主机”，服务器端会 POST 到 x-domainserver/api/login，然后返回结果。为此提供PHP解决方案

    $allowedDomains = array("http://facebook.whatever.org/", "http://yournavigation.org/");

    // x-domain 上的目标请求 uri，比如“form action” $action = $_REQUEST["url"];

    // 方法只查找 POST 并且默认 GET $method = $_REQUEST["method"];

    // 查询占位符，通过滚动 _REQUEST 填充，将附加除方法/url 对之外的所有内容 $fields = "";

    // 对 allowedDomains 授权或死亡

    foreach ($allowedDomains 作为 $domain) {

    ```
    if (strpos(substr($action, 0, strlen($domain)), $domain) !== false) {
    header("HTTP/1.0 403 Forbidden");
    die("Domain name "".$action."" not allowed. Access denied.");
    flush();
    } 
    ```

    }

    如果（计数（$_REQUEST）> 2）{

    ```
    foreach ($_REQUEST as $key => $value) {

        if ($key != "url" && $key != "method") // append anything but url and method
            $fields .= $key . "=" . rawurlencode($value) . "&";
    } 
    ```

    } $fields = substr($fields, 0, strlen($fields) - 1);

    // 设置 curl $ch = curl_init(); if (strtoupper($method) == "POST") { curl_setopt($ch, CURLOPT_URL, $action); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, $fields); } else { curl_setopt($ch, CURLOPT_URL, $action . "?" . $fields);
    } curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($ch, CURLOPT_USERAGENT, "transport.php (CURL)");

    // 发送，捕获返回响应并关闭 $response = curl_exec($ch); $info = curl_getinfo($ch); curl_close($ch);

    // 回复客户端 XHR header("Content-type: ".$info["content_type"]); 回声$响应；

# perl - Perl 继承 - 谁是父类的调用者

> ID：10012160
> 
> 赞同：5
> 
> 时间：2012-04-04T13:30:48.680
> 
> 标签：perl, perl-module

我有一种情况，我需要找到一个包的调用者，我的代码看起来像：

继承.pm：

```
package Inherited;
our @ISA = qw(BaseClass);
sub new {
   SUPER::new();
} 
```

基类.pm

```
package BaseClass;
sub new {
  $a = caller(0);
  print $a
} 
```

现在我有另一个类（MyClass.pm）：
MyClass.pm：

```
$obj = Inherited->new(); 
```

这将打印继承。但我需要**MyClass**作为打印的语句。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:05:33.253

当你给[调用者](http://perldoc.perl.org/functions/caller.html)一个参数时，你告诉它要返回多少级。你已经给了它参数`0`，这是当前级别。如果你想提升一级，请添加`1`：

```
use v5.12;

package Inherited {
    our @ISA = qw(BaseClass);
    sub new {
       $_[0]->SUPER::new();
    }
}

package BaseClass {
    sub new {
      say "0: ", scalar caller(0);
      say "1: ", scalar caller(1);
    }
}

package MyClass {
    my $obj = Inherited->new;
    } 
```

现在结果是：

```
0: Inherited
1: MyClass 
```

请记住始终在您的问题中包含完整的示例程序。[您发布的 Perl 代码由于与caller](http://perldoc.perl.org/functions/caller.html)无关的各种其他原因而被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T15:15:06.260

如果我正确阅读了您的帖子，您需要在调用堆栈中找到调用构造函数的最后一帧。

```
package BaseClass;
sub new {
    my $a = caller(0);
    for (my $n=0; my @c=caller($n); $n++) {
        last if $c[4] !~ /::new$/;
        $a = $c[0];
    }
    print $a;
} 
```

或者

```
package BaseClass;
sub new {
    my @a;
    unshift @a, [ caller(@a) ] while caller(@a);
    my ($a) = grep { $_->[4] =~ /::new$/ } @a;
    print $a // caller(0);
} 
```

第二个代码片段将处理存在不是构造函数的中间函数调用的情况，例如，如果调用堆栈看起来像

```
 GrandChild::new
 GrandChild::init
 Inherited::new
 BaseClass::new 
```

第一个片段将返回调用者`Inherited::new`（大概是`GrandChild`，第二个片段将返回调用者`GrandChild::new`.

# python - 如何断言一个方法是用 python unittest 装饰的？

> ID：10012161
> 
> 赞同：11
> 
> 时间：2012-04-04T13:30:52.107
> 
> 标签：python, unit-testing, unittest2

我有一个装饰器，我想断言我的代码中的某些方法是用它装饰的。

```
import functools

def decorator(func):
    def _check_something(*args, **kwargs):
        # some logic in here
        return func(*args, **kwargs)
    return functools.wraps(func)(_check_something)

class MyClass(object):

    @decorator
    def my_method(foo, bar):
        pass 
```

我如何用 unittest (unitttest2) 断言`my_method`没有`@decorator`人删除它，并且它没有被遗忘？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T14:01:35.777

如果由于某种原因您无法修改装饰器，您也可以尝试检查封闭变量的某些特征。

在您的示例中，您知道原始`my_method`变量是装饰器关闭的唯一变量，因此您可以：

```
assert (my_method.__closure__ and 
           my_method.__closure__[0].cell_contents.__name__ == my_method.__name__) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T13:54:23.197

您可以通过依赖装饰器使用属性标记包装函数来做到这一点，然后断言。

一个好的做法是让装饰器设置一个[__wrapped__](https://docs.python.org/3/library/functools.html#functools.update_wrapper)属性，指向返回的包装器上的原始函数。

因此：

```
def decorator(func):
    @functools.wraps(func)
    def _check_something(*args, **kwargs):
        # some logic in here
        return func(*args, **kwargs)
    _check_something.__wrapped__ = func   # <== add this
    return _check_something 
```

然后，在您的测试代码上：

```
assert getattr(MyClass.my_method, "__wrapped__").__name__ == 'my_method' 
```

# actionscript-3 - MOUSE_OUT 在影片剪辑之外？

> ID：10012162
> 
> 赞同：0
> 
> 时间：2012-04-04T13:31:06.793
> 
> 标签：actionscript-3, flash, events, actionscript

我在这里遇到了一点问题，我是 Actionscript 3 的新手，我想做的是构建一个导航菜单。我所做的是制作了一个影片剪辑，添加了两个听众，MOUSE_OVER 和 MOUSE_OUT，

MOUSE_OVER 告诉菜单播放，然后它会动画它的打开，

但是问题是，当我将鼠标放在按钮上时，菜单会认为鼠标不在其中，

我知道鼠标离开菜单本身并进入了其他对象，我想制作一个新的矩形，然后在鼠标移出时检查鼠标是否真的在菜单区域之外，但它没有用，

我很高兴知道该怎么做，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:32:44.837

您应该使用`MouseEvent.ROLL_OUT`仅当您的鼠标不在剪辑及其**所有子**项之外时触发的事件，而`MOUSE_OUT`仅考虑剪辑本身。

# ruby-on-rails - Rails 3 - 通过嵌套属性保存属于少数模型的模型

> ID：10012164
> 
> 赞同：2
> 
> 时间：2012-04-04T13:31:17.377
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model, nested-attributes

我有几个模型 - **User**，**Teacher**和**TeacherLeader**。

```
class User < ActiveRecord::Base                                                              
  attr_accessor   :password                                                              
  attr_accessible :user_login,                                                            
                  :password,
                  :teacher_attributes,
                  :teacher_leader_attributes

  has_one :teacher
  has_one :teacher_leader

  accepts_nested_attributes_for :teacher_leader
end

class Teacher < ActiveRecord::Base
  belongs_to :user                                              
  has_one :teacher_leader
end

class TeacherLeader < ActiveRecord::Base
  belongs_to :user
  belongs_to :teacher
end 
```

我想通过嵌套属性将数据保存在**TeacherLeader中。**所以，在**用户**模型中，我添加了`accepts_nested_attributes_for :teacher_leader`and `attr_accessible :teacher_leader_attributes`。

我也有控制器：

```
class TeacherLeadersController < ApplicationController      
  def new
    ...
    @user = User.new
    @teacher_leader = @user.build_teacher_leader       
    @teachers_collection = Teacher.all                                                    
                                  .collect do |t| 
                                    [ "#{t.teacher_last_name} #{t.teacher_first_name} #{t.teacher_middle_name}", t.id ] 
                                   end
    @choosen_teacher = @teachers_collection.first.last unless @teachers_collection.empty? 
  end

  def create
    user = User.new( params )
    user.user_role = "class_head"

    if user.save
      flash[:success] = "Successfully created class head!"
    else
      flash[:error] = user.errors.full_messages
    end
  end
end 
```

我也有**TeacherLeader**控制器的视图（**new.html.erb**）：

```
<%= form_for @user, :url => teacher_leaders_url, :html => {:class => "form-horizontal"} do |f| %>
<%= field_set_tag do %>
  <%= f.fields_for :teacher_leader do |tl| %>
      <div class="control-group">
        <%= tl.label :teacher_id, "Teacher names", :class => "control-label" %>
        <div class="controls">
        <%= select_tag( :teacher_id, 
                        options_for_select( @teachers_collection, @choosen_teacher )) %>         
        </div>
      </div>
    <% end %>

  <div class="control-group">
    <%= f.label :user_login, "Login", :class => "control-label" %>
    <div class="controls">
      <%= f.text_field :user_login %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label :password, "Pass", :class => "control-label" %>
    <div class="controls">
      <%= f.text_field :password %>
    </div>
  </div>  
  <% end %>

<%= f.submit "Create", :class => "btn btn-large btn-success" %> 
```

当我试图保存我的模型时，我得到了一些奇怪的错误，比如“用户登录不能为空”等等。我知道 User 模型的验证会生成它们（我不知道为什么，即使在**params**中有值我也会得到这样的错误）。我想，我认为我做错了什么，因为提交后我有这样的**参数**：

```
teacher_id: '1'
user: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  user_login: schoolh_1rF32
  password: txaqxuTXz96auhX
commit: Create
action: create
controller: teacher_leaders 
```

但我应该有这样的东西：

```
user: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
      user_login: schoolh_1rF32
      password: txaqxuTXz96auhX
      teacher_leader_attributes: 
        teacher_id: '1' 
```

怎么了？我可以解决吗？

**UPD**：类头创建页面的 HTML 代码：

```
<form accept-charset="UTF-8" action="http://0.0.0.0:3000/teacher_leaders" class="form-horizontal" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="ZKlDTKG8SU8fZuMrUfQoCOSGknOhj651DT2LJDrfliA=" /></div>
    <fieldset>

          <div class="control-group">
            <label class="control-label" for="user_teacher_leader_attributes_teacher_id">Teacher names</label>
            <div class="controls">

            <select id="teacher_id" name="teacher_id">
              <option value="1" selected="selected">Jack P. Tompson </option>
              <option value="2">Ronald V. Herwud</option>        
            </div>
          </div>

      <div class="control-group">
        <label class="control-label" for="user_user_login">Login</label>
        <div class="controls">
          <input id="user_user_login" name="user[user_login]" size="30" type="text" />
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="user_password">Password</label>
        <div class="controls">
          <input id="user_password" name="user[password]" size="30" type="text" />
        </div>
      </div>  
</fieldset> 
    <input class="btn btn-large btn-success" name="commit" type="submit" value="Create" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:24:06.983

你不需要

```
<%= select_tag( :teacher_id, 
                        options_for_select( @teachers_collection, @choosen_teacher )) %> 
```

但类似的东西

```
<%= tl.select( :teacher_id, 
                        options_for_select( @teachers_collection, @choosen_teacher )) %> 
```

# json - Windows Phone WebClient 不会更新新数据

> ID：10012166
> 
> 赞同：0
> 
> 时间：2012-04-04T13:31:21.637
> 
> 标签：json, windows, rest, windows-phone

我有一个连接到本地 IIS 服务器的 windows phone 应用程序。它下载一些 json 数据并将其显示在列表框中。我在页面上也有一个刷新按钮。当页面加载时，一切都是正确的，但按下刷新按钮只会返回加载页面时可用的相同数据。我已经用 uri 检查了我的网络浏览器，并且更新的数据在那里正确显示。此外，如果我退出 windows phone 应用程序并重新加载它，数据就在那里。这是我正在测试的一些简化代码。

**在页面加载时：**

```
 WebClient download = new WebClient();
        download.DownloadStringCompleted += new DownloadStringCompletedEventHandler(download_DownloadStringCompleted);
        download.DownloadStringAsync(new Uri("http://sampledata/data"));

        void download_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            MessageBox.Show(e.Result);
        } 
```

这工作正常，并显示一个带有我的 json 字符串的消息框。

**刷新时：**

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        WebClient refresh = new WebClient();
        refresh.DownloadStringCompleted += new DownloadStringCompletedEventHandler(refresh_DownloadStringCompleted);
        refresh.DownloadStringAsync(new Uri("http://sampledata/data"));
    }

    void refresh_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        MessageBox.Show(e.Result);
    } 
```

即使数据已更改，这也会显示在页面加载时显示的相同 json 字符串。有没有人有任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:43:27.467

尝试在 URL 末尾添加时间戳。喜欢`refresh.DownloadStringAsync(new URI("http://sampledata/data" + DateTime.Now.ToString()));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:45:58.000

您从服务器中提取了多少数据？如果您需要繁重的工作，请尝试使用 HttpWebRequest。我在 webclient 加载和刷新数据方面也遇到了一些问题。服务器上的每一次更改都会带来很大的延迟......

# python - 遍历类文件和调用 readline 之间的区别

> ID：10012170
> 
> 赞同：6
> 
> 时间：2012-04-04T13:31:26.387
> 
> 标签：python, io, iterator, subprocess, pipe

我一直认为在 Python 中迭代类文件相当于`readline`循环调用它的方法，但今天我发现情况并非如此。具体来说，我有一个' `Popen`d 过程`p`

```
list(itertools.takewhile(lambda x: x != "\n",
                         p.stdout)) 
```

挂起（可能是因为`p`等待输入；两者`stdin`都是`stdout`我的 Python 进程的管道），而以下工作：

```
list(itertools.takewhile(lambda x: x != "\n",
                         iter(p.stdout.readline, ""))) 
```

有人可以解释其中的区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T14:02:36.960

区别纯粹在于迭代与`readline`方法的实现。文件迭代读取块（默认为 8 KB），然后在使用缓冲区时将缓冲区拆分为行。`readline`另一方面，该方法注意不要读取超过一行，这意味着逐个字符地读取。在块中读取效率更高，但这意味着您不能在读取之间混合文件上的其他操作。期望是，当您遍历文件时，您的意图是顺序读取所有行，并且您不会对其进行其他操作。该`readline`方法不能做出这样的假设。

正如 Sven Marnach 在他对您的问题的评论中暗示的那样，您可以使用以牺牲性能为代价获取一个从文件中读取行*而不*读取块`iter(f.readline, '')`的迭代器。

# php - 在 mysql 中查找 2 个变量（mybe 唯一值）我找不到更好的标题

> ID：10012175
> 
> 赞同：0
> 
> 时间：2012-04-04T13:31:41.687
> 
> 标签：php, mysql, find

有谁知道怎么找？我有 3 列

1-身份证

2 - 用户名

3-IP

样本数据为：

```
+----+-----------+----------------+
| id | username  |    ip          |
+----+-----------+----------------+
|  1 | John      |  127.0.0.1     | 
|  2 | John      |  127.0.0.1     | 
|  3 | John      |  127.0.0.1     | 
|  4 | John      |  127.0.0.1     | 
|  5 | John      |  127.0.0.1     | 
|  6 | John      |  127.0.0.2     | 
|  7 | John      |  127.0.0.2     | 
|  8 | John      |  127.0.0.3     | 
|  9 | John      |  127.0.0.1     | 
| 10 | John      |  127.0.0.1     | 
| 11 | John      |  127.0.0.1     | 
| 12 | Pit       |  127.1.1.1     | 
| 13 | Pit       |  127.1.1.1     | 
| 14 | Pit       |  127.1.1.1     | 
| 15 | Pit       |  127.1.1.1     | 
| 16 | Pit       |  127.1.1.1     | 
| 17 | Pit       |  127.1.1.1     | 
+----+-----------+----------------+ 
```

所以我想找到任何值都重复了 ip 在更好的情况下我想找到唯一值所以通过这个查询我可以找到它：

```
SELECT distinct `username`, `ip` FROM `logs` 
```

现在查询结果是

```
+----+-----------+----------------+
| id | username  |    ip          |
+----+-----------+----------------+
|  1 | John      |  127.0.0.1     | 
|  7 | John      |  127.0.0.2     | 
|  8 | John      |  127.0.0.3     | 
| 12 | Pit       |  127.1.1.1     | 
+----+-----------+----------------+ 
```

这很好，但我真正想要的是什么？我想找到任何用户名有重复的 ip 所以结果必须：

```
+----+-----------+----------------+
| id | username  |    ip          |
+----+-----------+----------------+
|  1 | John      |  127.0.0.1     | 
|  7 | John      |  127.0.0.2     | 
|  8 | John      |  127.0.0.3     | 
+----+-----------+----------------+ 
```

因为那里的坑没有重复的 ip 我怎样才能从结果中删除坑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:34:59.287

尝试以下 -

```
SELECT `logs`.`username`, `logs`.`ip`
FROM (
    SELECT `username`
    FROM `logs`
    GROUP BY `username`
    HAVING COUNT(DISTINCT `ip`) > 1
) AS `dups`
INNER JOIN `logs`
    ON `dups`.`username` = `logs`.`username`
GROUP BY `logs`.`username`, `logs`.`ip`; 
```

**更新**随着数据集的增长，在用户名和 ip 上添加索引会对该查询的性能产生很大影响 -

```
CREATE INDEX `IX_username_ip` ON `logs` (`username`, `ip`); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:36:14.730

```
SELECT distinct `username`, `ip` 
FROM `logs`
WHERE `username` 
  IN (SELECT `username`
      FROM `logs`
      GROUP BY `username`
      HAVING COUNT(*) >1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:38:43.820

尝试这个

```
SELECT l1.username, l1.ip FROM logs l1
INNER JOIN logs l2
    ON l2.username = l1.username
    AND l2.ip != l1.ip
GROUP BY l1.username, l1.ip 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T13:38:11.180

```
 select distinct username,group_concat( distinct ip ) ,count(distinct ip) as cnt from table_name group by username  having cnt>1; 
```

# c# - 从内存流 C# 创建 Zip 文件

> ID：10012178
> 
> 赞同：17
> 
> 时间：2012-04-04T13:31:47.973
> 
> 标签：c#, zip, memorystream

基本上，用户应该能够单击一个链接并下载多个 pdf 文件。但问题是我无法在服务器或任何地方创建文件。一切都必须在记忆中。

我能够将内存流和 Response.Flush() 创建为 pdf，但是如何在不创建文件的情况下压缩多个内存流。

这是我的代码：

```
Response.ContentType = "application/zip";

// If the browser is receiving a mangled zipfile, IIS Compression may cause this problem. Some members have found that
// Response.ContentType = "application/octet-stream" has solved this. May be specific to Internet Explorer.
Response.AppendHeader("content-disposition", "attachment; filename=\"Download.zip\"");
Response.CacheControl = "Private";
Response.Cache.SetExpires(DateTime.Now.AddMinutes(3)); // or put a timestamp in the filename in the content-disposition                

byte[] abyBuffer = new byte[4096];

ZipOutputStream outStream = new ZipOutputStream(Response.OutputStream);
outStream.SetLevel(3);

#region Repeat for each Memory Stream
MemoryStream fStream = CreateClassroomRoster();// This returns a memory stream with pdf document

ZipEntry objZipEntry = new ZipEntry(ZipEntry.CleanName("ClassroomRoster.pdf"));
objZipEntry.DateTime = DateTime.Now;
objZipEntry.Size = fStream.Length;
outStream.PutNextEntry(objZipEntry);

int count = fStream.Read(abyBuffer, 0, abyBuffer.Length);
while (count > 0)
{
    outStream.Write(abyBuffer, 0, count);
    count = fStream.Read(abyBuffer, 0, abyBuffer.Length);
    if (!Response.IsClientConnected)
        break;

    Response.Flush();
}

fStream.Close();

#endregion

outStream.Finish();
outStream.Close();

Response.Flush();
Response.End(); 
```

这会创建一个 zip 文件，但里面没有文件

我正在使用 iTextSharp.text - 使用 ICSharpCode.SharpZipLib.Zip 创建 pdf - 用于压缩

谢谢，卡维塔

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-09T18:18:12.303

此链接描述了如何使用 SharpZipLib 从 MemoryStream 创建 zip：[https](https://github.com/icsharpcode/SharpZipLib/wiki/Zip-Samples#wiki-anchorMemory) ://github.com/icsharpcode/SharpZipLib/wiki/Zip-Samples#wiki-anchorMemory 。使用这个和 iTextSharp，我能够压缩在内存中创建的多个 PDF 文件。

这是我的代码：

```
MemoryStream outputMemStream = new MemoryStream();
ZipOutputStream zipStream = new ZipOutputStream(outputMemStream);

zipStream.SetLevel(3); //0-9, 9 being the highest level of compression
byte[] bytes = null;

// loops through the PDFs I need to create
foreach (var record in records)
{
    var newEntry = new ZipEntry("test" + i + ".pdf");
    newEntry.DateTime = DateTime.Now;

    zipStream.PutNextEntry(newEntry);

    bytes = CreatePDF(++i);

    MemoryStream inStream = new MemoryStream(bytes);
    StreamUtils.Copy(inStream, zipStream, new byte[4096]);
    inStream.Close();
    zipStream.CloseEntry();
}

zipStream.IsStreamOwner = false;    // False stops the Close also Closing the underlying stream.
zipStream.Close();          // Must finish the ZipOutputStream before using outputMemStream.

outputMemStream.Position = 0;

return File(outputMemStream.ToArray(), "application/octet-stream", "reports.zip"); 
```

CreatePDF 方法：

```
private static byte[] CreatePDF(int i)
{
    byte[] bytes = null;
    using (MemoryStream ms = new MemoryStream())
    {
        Document document = new Document(PageSize.A4, 25, 25, 30, 30);
        PdfWriter writer = PdfWriter.GetInstance(document, ms);
        document.Open();
        document.Add(new Paragraph("Hello World " + i));
        document.Close();
        writer.Close();
        bytes = ms.ToArray();
    }

    return bytes;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-25T13:29:46.727

下面的代码是从 azure blob 存储中的目录获取文件，合并为 zip 并再次将其保存在 azure blob 存储中。

```
 var outputStream = new MemoryStream();
    var archive = new ZipArchive(outputStream, ZipArchiveMode.Create, true);

    CloudBlobDirectory blobDirectory = appDataContainer.GetDirectoryReference(directory);

    var blobs = blobDirectory.ListBlobs();

    foreach (CloudBlockBlob blob in blobs)
    {
        var fileArchive = archive.CreateEntry(Path.GetFileName(blob.Name),CompressionLevel.Optimal);

        MemoryStream blobStream = new MemoryStream();
        if (blob.Exists())
        {
            blob.DownloadToStream(blobStream);
            blobStream.Position = 0;
        }

        var open = fileArchive.Open();
        blobStream.CopyTo(open);
        blobStream.Flush();
        open.Flush();
        open.Close();

        if (deleteBlobAfterUse)
        {
            blob.DeleteIfExists();
        }
    }
    archive.Dispose();

    CloudBlockBlob zipBlob = appDataContainer.GetBlockBlobReference(zipFile);

    zipBlob.UploadFromStream(outputStream); 
```

需要命名空间：

*   System.IO.压缩；
*   System.IO.Compression.ZipArchive；
*   Microsoft.Azure.存储；
*   Microsoft.Azure.Storage.Blob；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-17T12:07:19.053

此代码将帮助您通过多个 pdf 文件创建 Zip，您将从下载链接中获取每个文件。

```
 using (var outStream = new MemoryStream())
                {
                    using (var archive = new ZipArchive(outStream, ZipArchiveMode.Create, true))
                    {
                        for (String Url in UrlList)
                        {
                            WebRequest req = WebRequest.Create(Url);
                            req.Method = "GET";
                            var fileInArchive = archive.CreateEntry("FileName"+i+ ".pdf", CompressionLevel.Optimal);
                            using (var entryStream = fileInArchive.Open())
                            using (WebResponse response = req.GetResponse())
                            {
                                using (var fileToCompressStream = response.GetResponseStream())
                                {
                                    entryStream.Flush();
                                    fileToCompressStream.CopyTo(entryStream);
                                    fileToCompressStream.Flush();
                                }
                            }
                           i++;
                        }

                    }
                    using (var fileStream = new FileStream(@"D:\test.zip", FileMode.Create))
                    {
                        outStream.Seek(0, SeekOrigin.Begin);
                        outStream.CopyTo(fileStream);
                    }
                } 
```

需要的命名空间： **System.IO.Compression；System.IO.Compression.ZipArchive；**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-04T16:00:43.920

下面是使用 ICSharpCode.SharpZipLib dll 中存在的 ZipOutputStream 类在 MemoryStream 中创建 zip 文件的代码。

```
FileStream fileStream = File.OpenRead(@"G:\1.pdf");
MemoryStream MS = new MemoryStream();

byte[] buffer = new byte[fileStream.Length];
int byteRead = 0;

ZipOutputStream zipOutputStream = new ZipOutputStream(MS);
zipOutputStream.SetLevel(9); //Set the compression level(0-9)
ZipEntry entry = new ZipEntry(@"1.pdf");//Create a file that is needs to be compressed
zipOutputStream.PutNextEntry(entry);//put the entry in zip

//Writes the data into file in memory stream for compression 
while ((byteRead = fileStream.Read(buffer, 0, buffer.Length)) > 0)
    zipOutputStream.Write(buffer, 0, byteRead);

zipOutputStream.IsStreamOwner = false;
fileStream.Close();
zipOutputStream.Close();
MS.Position = 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-21T09:36:22.647

您可以生成 pdf 文件并将其存储在 IsolatedStorageFileStream 中，然后您可以从该存储中压缩内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-05T13:36:26.643

我使用了该线程中的信息，但决定发布我的端到端代码，因为它包含下载后端服务器生成的 zip 文件的所有元素。

前端javascript Angular 12

`

```
export class downloadDocs{
  fileName:string = '';
  docs:string[] = [];
}

let docs = new downloadDocs();
//do some code to put names in docs.docs;

docs.fileName = 'download.zip';
this.http.post('api/docs/download', docs,
{ responseType: 'arraybuffer' }).subscribe(zip => {
  let blob = new Blob([zip], { type: "application/octetstream" });

  let url = window.URL || window.webkitURL;
  let link = url.createObjectURL(blob);
  let a = $("<a />");
  a.attr("download", this.baseFileName() + '.zip');
  a.attr("href", link);
  $("body").append(a);
  a[0].click();
  $("body").remove(a);
},
error => {
  //however you handle errors
} 
```

` Azure 应用服务中的 web api core 5 C# 后端。全内存解决方案有效，因为我根本不必使用任何文件资源。使用了 SharpLibZip 包。

`

```
\\drives me nuts in code examples nobody includes the libraries
\\spend lot of time hunting down namespaces
using System.IO;
using System.Threading.Tasks;
using System.Collections.Generic;
using ICSharpCode.SharpZipLib.Zip;
using Microsoft.AspNetCore.Http;

public class DownloadDocs{

    public string FileName = "";

    public List<string> Docs = new List<string>(); 
}

[Route("/api/docs/download")]
[HttpPost]
public async Task<ActionResult> ApiDownloadDocs([FromBody] DownloadDocs docs)
{

  try
  {
      var stream = await this.ReturnZipFile(docs.Docs);
      return File(stream, "application/octet-stream", docs.FileName);
  }
  catch (Exception e)
  {
      var msg = $"Docs Download error: {e.Message}";
      return Problem(msg);
  }
}

private async Task<MemoryStream> ReturnZipFile(List<string> files)
{
  var stream = new MemoryStream();
  stream.Position = 0;
  var zipOutputStream = new ZipOutputStream(stream);
  zipOutputStream.SetLevel(4); //Set the compression level(0-9)

  foreach (let doc in files)
  {
      var docStream = new MemoryStream();
      docStream = await this.GetPdfMemoryStream(doc);
      byte[] buffer = new byte[docStream.Length];
      int byteRead = 0;

      ZipEntry entry = new ZipEntry(doc + ".pdf");
      zipOutputStream.PutNextEntry(entry);
      while ((byteRead = docStream.Read(buffer, 0, buffer.Length)) > 0)
          zipOutputStream.Write(buffer, 0, byteRead);

      docStream.Close();
  }

  zipOutputStream.Finish();
  //zipOutputStream.Close(); //this also closed the output stream and made it worthless

  stream.Position = 0;
  return stream;
} 
```

`

Sql Server 代码从表中读取 blob 并将其作为字节数组返回，然后返回内存流。

`

```
public async Task<byte[]> GetPdfBytes(string uuid)
{
    byte[] fileBytes = null;
    var conn = new SqlConnection(connectionString);
    await conn.OpenAsync();

    string sql = $"SELECT CONVERT(varbinary(max),BLOB)  FROM DOC_BLOBS WHERE UUID = '{uuid}'";
    using (var cmd = new SqlCommand(sql, conn))
    {
        using (var reader = await cmd.ExecuteReaderAsync())
        {
            if (await reader.ReadAsync())
            {
                fileBytes = (byte[])reader[0];
            }
        }
    }
    return fileBytes;
}

public async Task<MemoryStream> GetPdfMemoryStream(string uuid)
{
    return new MemoryStream(await GetPdfBytes(uuid));
} 
```

`

# lucene - JackRabbit：不推荐使用 textFilterClasses。如何指定提取器？

> ID：10012180
> 
> 赞同：1
> 
> 时间：2012-04-04T13:31:52.043
> 
> 标签：lucene, jackrabbit, jcr

我的**Jackrabbit 2.4**说，**SearchIndex元素的****textFilterClasses**参数已被弃用并被忽略。当我一起删除**textFilterClasses**参数时，它会索引 Pdf、Rtf - 所有内容。

 ****当我没有指定任何提取器时，它怎么知道它应该索引哪些二进制文件？

API 说它已被弃用，但没有提供任何替代方案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:53:48.220

在 Jackrabbit 2.x 中，Apache Tika 被引入作为默认的二进制文件解析器。默认情况下，Jackrabbit 带有一个默认的 tika-config.xml 文件，其中包含要解析和提取的 mime 类型的配置。

在 Jackrabbit 2.4 中，您应该能够从 repository.xml 中设置 tika-config.xml 的位置。

搜索索引配置中的正确参数应类似于：

```
<SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
  <param name="path" value="${wsp.home}/index"/>
  <param name="supportHighlighting" value="true"/>
  <param name="tikaConfigPath" value="${wsp.home}/tika-config.xml"/>
</SearchIndex> 
```****

# ruby-on-rails - 捆绑安装返回“找不到 Gemfile”

> ID：10012181
> 
> 赞同：121
> 
> 时间：2012-04-04T13:31:53.897
> 
> 标签：ruby-on-rails, installation, bundle, gemfile

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-04-04T16:17:39.637

You just need to change directories to your app, THEN run `bundle install` :)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-10-20T11:32:52.740

You may also indicate the path to the gemfile in the same command e.g.

```
BUNDLE_GEMFILE="MyProject/Gemfile.ios" bundle install 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-08-31T17:38:26.677

**I had this problem as well on an OSX machine. I discovered that rails was not installed... which surprised me as I thought OSX always came with Rails. To install rails**

*   `sudo gem install rails`
*   **to install jekyll I also needed sudo**
*   `sudo gem install jekyll bundler`
*   `cd ~/Sites`
*   `jekyll new <foldername>`
*   `cd <foldername>` **OR** `cd !$` **(that is magic ;)**
*   `bundle install`
*   `bundle exec jekyll serve`
*   **Then in your browser just go to** [http://127.0.0.1:4000/](http://127.0.0.1:4000/) **and it really should be running**

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-02-26T14:24:42.510

You must be in the same directory of `Gemfile`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-11-05T19:51:00.787

I had this problem on Ubuntu 18.04\. I updated the gem

```
sudo gem install rails
sudo gem install jekyll
sudo gem install jekyll bundler
cd ~/desiredFolder
jekyll new <foldername>
cd <foldername> OR 
bundle init
bundle install
bundle add jekyll
bundle exec jekyll serve 
```

All worked and goto your browser just go to [http://127.0.0.1:4000/](http://127.0.0.1:4000/) and it really should be running

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-02-02T15:48:49.070

When I had similar problem `gem update --system` helped me. Run this before `bundle install`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-30T00:16:29.503

1.  Make sure that the file name is Capitalized `Gemfile` instead of `gemfile`.
2.  Make sure you're in the same directory as the `Gemfile`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-23T15:12:49.940

In my case this worked:

*   `cd /usr/bin`
*   `touch Gemfile`
*   Now you can then run `bundle install`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-08-30T09:37:23.537

Search for the Gemfile file in your project, go to that directory and then run "bundle install". prior to running this command make sure you have installed the gem "sudo gem install bundler"

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-03-18T19:29:39.603

```
sudo gem install rails 
```

my problem solved, just this code.

* * *

## 回答 #11

> 赞同：-14
> 
> 时间：2016-02-02T15:40:20.603

Think more about what you are installing and navigate Gemfile folder, then try using `sudo bundle install`

# jaxb - Jaxb：这种结构不会发生从 XML 到 java 的数据绑定

> ID：10012182
> 
> 赞同：0
> 
> 时间：2012-04-04T13:31:54.527
> 
> 标签：jaxb

```
<BADFM>
<Order >
<Ord OrdQty="1" faft="O">
<Bag pakka="1"  DSE="C"/>
</Ord>
</Order>
</BADFM> 
```

==================

```
@XmlRootElement(name="BADFM")
public class Message
{
@XmlElement(name="Order")   
private MobBlock mob;
 public MobBlock getMob() {
return mob;
}
public void setmob(MobBlock mob) {
this.mob = mob;
}
} 
```

===================

```
public class MobBlock {
    private Ord ord;
    @XmlElement(name="Ord")
                  public Ord getOrd() {
    return ord;
    }
    public void setOrd(Ord ord) {
        this.ord = ord;
    }
} 
```

====================

```
public class Ord {
 private Bagger Bagger;
 @XmlElement(name="Bag")
    public Bagger getBagger() {
    return Bagger;
    }
    public void setBagger(Bagger Bagger) {
               this.Bagger = Bagger;
    }
    } 
```

========================

```
public class Bagger {
    private String dsc;
    @XmlAttribute(name = "DSE")
    public String getDSE() {
        return dsc;
    }
                public void setDSE(String dsc) {
    this.dsc = dsc;
                  }

} 
```

=========================

当我尝试访问时，它返回我 null

System.out.println(m.getMob().getOrd().getBagger().getDSE());

有人可以告诉我有什么问题吗？

这是我的解析器类

```
public class BadFmParser
{   
public static AbstractMessageT parse(String Str) throws Exception {
    private static JAXBContext jc = null;

            jc = JAXBContext.newInstance("mypackage");

        Unmarshaller um = jc.createUnmarshaller();
        BADFM badfmMessage = (BADFM) um.unmarshal(new StringReader(Str));
        JAXBElement<? extends Message> element = badfmMessage.getMessage();
        return element.getValue();
} 
```

**我这样称呼它**

```
Message message = BADFMParser.parse(XMLFile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:45:46.763

你从哪里得到'm'？发布您的代码以进行解组。

附带说明一下，如果您手动创建了类，则很可能您做错了什么。进行完整性检查的最简单方法是为您的 XML 创建模式（如果您没有它，那么出于多种原因，您应该这样做）并使用“xjc”（JDK 附带）生成 Java 类。然后，您可以直接将这些类用于 Marshal/Unmarshal，或者只是检查它们以查看它们与您的有何不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:58:02.607

你的这段代码...

```
 BADFM badfmMessage = (BADFM) um.unmarshal(new StringReader(Str));
 JAXBElement<? extends Message> element = badfmMessage.getMessage(); 
```

……有点莫名其妙。您从 Unmarshaller 获得一个对象，将其转换为 BADFM，然后从中获得一个 JAXBElement？这个 BADFM 类是什么？

我已将您的 Message、MobBlock、Ord 和 Bagger 类放入一个包中，然后在其中创建了这个 Main 类：

```
package jaxb1;

import java.io.Reader;
import java.io.StringReader;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.Unmarshaller;

public class Main {

    public static void main(String[] args) throws Exception {

        final JAXBContext context = 
            JAXBContext.newInstance(
            Bagger.class, 
            Ord.class, 
            MobBlock.class, 
            Message.class
            );

        final Unmarshaller unmarshaller = context.createUnmarshaller();

        final Reader reader = 
            new StringReader("<?xml version=\"1.0\"?>\r\n"
            + "<BADFM>\r\n"
            + "<Order >\r\n"
            + "<Ord OrdQty=\"1\" faft=\"O\">\r\n"
            + "<Bag pakka=\"1\"  DSE=\"C\"/>\r\n"
            + "</Ord>\r\n"
            + "</Order>\r\n"
            + "</BADFM>");

        final Object o = unmarshaller.unmarshal(reader);

        final Message m = (Message)o;

        System.out.println(m.getMob().getOrd().getBagger().getDSE());

    }

} 
```

结果工作正常。运行时输出`C`。

# javascript - jQuery 幻灯片不会循环播放

> ID：10012186
> 
> 赞同：2
> 
> 时间：2012-04-04T13:32:10.753
> 
> 标签：javascript, jquery

我知道以前有人问过类似的问题，但我对我的 jQuery 非常陌生，而且我似乎无法获得任何解决方案，所以请原谅我的天真。我创建了一个非常简单的幻灯片，但是当显示最后一张幻灯片时，它不会循环回到开头，它只是淡出。我怎样才能让它连续循环？

```
$(document).ready(function(){
  $(".featured > div:gt(0)").hide();

  setInterval(function() {
    $('.featured > div:first')
    .fadeOut(2000)
    .next()
    .fadeIn(2000)
    .end()
    .replaceWith();
  }, 4000);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:37:43.817

[`replaceWith()`](http://api.jquery.com/replaceWith/)完全删除任何调用它的 DOM 元素，因此您无需循环返回。

尝试[`.appendTo('.featured')`](http://api.jquery.com/appendTo/)改用。这会将第一个元素移到末尾，使您能够继续无休止的循环。

```
setInterval(function() {
    $('.featured > div:first')
        .fadeOut(2000)
        .next().fadeIn(2000).end()
        .appendTo('.featured');
}, 4000); 
```

[http://jsfiddle.net/JWc32/1/](http://jsfiddle.net/JWc32/1/)

**更新：**

根据您的页面布局，您可能希望改为`appendTo()`在回调中执行，因此在完成之前它不会移动`fadeOut()`：

```
setInterval(function() {
    $('.featured > div:first').fadeOut(2000, function() {
        $(this).appendTo('.featured');
    }).next().fadeIn(2000);
}, 4000); 
```

[http://jsfiddle.net/JWc32/3/](http://jsfiddle.net/JWc32/3/)

# php - PHP中cURL的mult函数有什么瓶颈？

> ID：10012190
> 
> 赞同：2
> 
> 时间：2012-04-04T13:32:19.610
> 
> 标签：php, curl, curl-multi

使用 cURL_multi 非常适合同时连接，但什么可以限制连接数？我问是因为当做超过 500 个时，其中一些似乎随机无法连接。我正在执行超时为 5 的 HEAD 请求，将超时增加到 10 似乎没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:44:03.520

500个并发连接？这要求很多，服务器可能拒绝为您服务。

尝试设置一个更合理的限制，在 4-12 个并发连接之间。

# python - 使用 Python 和 lxml 从 MySQL 查询创建 xml

> ID：10012192
> 
> 赞同：-1
> 
> 时间：2012-04-04T13:32:21.813
> 
> 标签：python, mysql, xml, parsing, lxml

我正在尝试使用 Python 和 LXML 从 Mysql 查询结果创建 XML 文件。这是我想要的格式。

```
 <DATA>
         <ROW>
             <FIELD1>content</FIELD1>
             <FIELD2>content</FIELD2>
         </ROW>
    </DATA> 
```

由于某种原因，代码格式不正确，XML 将无法验证。这是那个代码

```
from lxml import etree
from lxml.etree import tostring
from lxml.builder import E
import MySQLdb

try:
       conn = MySQLdb.connect(host = 'host',user = 'user',passwd = 'pass',db = 'db')
       cursor = conn.cursor()
except:
       sys.exit(1)

cursor.execute("SELECT * FROM db.table")
columns = [i[0] for i in cursor.description]
allRows = cursor.fetchall()
xmlFile = open("mysqlxml.xml","w")
xmlFile.write('<DATA>')
for rows in allRows:
       xmlFile.write('<ROW>')
       columnNumber = 0
       for column in columns:
              data = rows[columnNumber]
              if data == None:
                     data = ''
              xmlFile.write('<%s>%s</%s>' % (column,data,column))
              columnNumber += 1
       xmlFile.write('</ROW>')
xmlFile.write('</DATA>')
xmlFile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:29:09.200

这是一个关于如何使用 lxml 构建 xml 的小示例。

为元素创建创建一个辅助函数很有用，这里有一个简单的。我为演示目的创建了一个虚拟光标对象。

```
from lxml import etree
from lxml.builder import E as buildE

class DummyCursor(object):
  def __init__(self,fields,rows=5):
    self.description = [[f] for f in fields]
    self.data = [ ["%s%02d" % (f,i) for f in fields] for i in range(rows) ]
  def fetchall(self):
    return self.data

def E(tag,parent=None,content=None):
  """Simple E helper"""
  element = buildE(tag)
  if content is not None:
    element.text = unicode(content)
  if parent is not None:
    parent.append(element)
  return element

def fetchXML(cursor):
  fields = [x[0] for x in cursor.description ]
  doc = E('data')
  for record in cursor.fetchall():
    r = E('row',parent=doc)
    for (k,v) in zip(fields,record):
      E(k,content=v,parent=r)
  return doc

doc = fetchXML(DummyCursor(['name','description']))

print etree.tostring(doc,pretty_print=True) 
```

产量：

```
<data>
  <row>
    <name>name00</name>
    <description>description00</description>
  </row>
  <row>
    <name>name01</name>
    <description>description01</description>
  </row>
  <row>
    <name>name02</name>
    <description>description02</description>
  </row>
  <row>
    <name>name03</name>
    <description>description03</description>
  </row>
  <row>
    <name>name04</name>
    <description>description04</description>
  </row>
</data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-13T22:42:46.260

在 AWS s3 存储桶中，使用 Python 和 lxml 从 MySQL 查询创建或更新 XML。

# - *- 编码：utf-8 -* -

```
from xml.etree import ElementTree
import json, pymysql, requests
import boto3
from boto3.s3.transfer import S3Transfer

BD = 'bd'
HOST = 'host'
USER = 'user'
PASS = 'pass'

HEADERS = {"Content-Type" : "application/json"}
AWS_ACCESS_KEY_ID = 'value_access_key'
AWS_SECRET_ACCESS_KEY = 'value_sercret_access_key'

def updateXMLFunction():

    db = pymysql.connect(HOST,USER,PASS,BD)     
    cursor = db.cursor()

    SQL = "SELECT * FROM table_name"

    cursor.execute(SQL)

    resp = {  
        "response": {
            "message" : "",
            "estatus" : "",
        }  
    }

    s3 = boto3.resource('s3',
         aws_access_key_id=AWS_ACCESS_KEY_ID,
         aws_secret_access_key= AWS_SECRET_ACCESS_KEY)
    bucket = s3.Bucket('name_carpet_bucket')
    object = bucket.Object('filename_heresavetheresult.xml')

    columns = [i[0] for i in cursor.description]
    allRows = cursor.fetchall()

    Document = ElementTree.Element("Document")
    try:
        for rows in allRows:
            Row = ElementTree.SubElement(Document, "Row")
            columnNumber = 0
            for column in columns:

                data = rows[columnNumber]
                if data == None:
                    data = ''
                data = str(data).replace('&', '\&')
                columnas = ('<%s>%s</%s>' % (column,data,column))   
                ElementTree.SubElement(Row, column).text = data
                columnNumber += 1

        xmlstr = ElementTree.tostring(Document, encoding='utf8', method='xml')
        # print(xmlstr)
        object.put(Body=xmlstr, ACL='public-read')

        resp["response"]["message"] = "Se ha creado el XML correctamente"
        resp["response"]["estatus"] = "updated"

        print(json.dumps(resp, indent=4, sort_keys=True))
        return resp

    except Exception as e:
        resp["response"]["message"] = e
        resp["response"]["estatus"] = "error"
        # print(json.dumps(resp, indent=4, sort_keys=True))
        return resp

updateXMLFunction() 
```

# .net - 为什么只允许动态方法跳过可见性检查？

> ID：10012196
> 
> 赞同：6
> 
> 时间：2012-04-04T13:32:38.863
> 
> 标签：.net, clr, reflection.emit

我正在移植`DynamicMethod`广泛使用 s 的代码以允许预编译，以获得更好的冷启动性能。我注意到`DynamicMethod`s 可以在跳过可见性检查的情况下进行 JIT 处理和执行，这允许它们访问私有嵌套类型，但普通程序集不能（或者不能？我没有看到任何明显的加载器选项）。这个设计决定背后的理由是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T19:57:48.703

我需要挥手回答这个问题，CAS永远复杂。skipVisibility 参数与生成在沙箱中执行的代码的受信任主机应用程序相关。在这种情况下，由于执行环境错误，不适合在方法生成时进行检查。它需要在方法在沙箱内*执行时发生。*它受到沙盒执行的正常 CAS 检查的影响。

将参数设置为 true 实际上*会增加*对 ReflectionPermissionFlag.MemberAccess 的权限要求，需要尝试生成方法。

天翻地覆。[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb384237.aspx)“将 RestrictedMemberAccess 添加到沙盒域”部分中有一些背景信息。

# excel - VBA 不会关闭以编程方式打开的工作簿

> ID：10012199
> 
> 赞同：0
> 
> 时间：2012-04-04T13:32:47.803
> 
> 标签：excel, vba

我在一个 Excel 电子表格中编写了一个 VBA 宏，它在特定位置打开所有工作簿，并从这些工作簿中提取数据并验证并将其复制到活动工作簿。然后它会打开目录中的下一个工作簿并重复该过程，直到目录中的所有文件都已通读。

一切正常，除了我似乎无法让目标工作簿在打开后关闭。这包括关闭 Excel。我必须在任务管理器或 powershell 中终止进程才能从系统内存中释放工作簿。

```
Set fs = CreateObject("Scripting.FileSystemObject")
strExcelFileName = Dir(ThisWorkbook.Path & "\Certs\*.xls", vbNormal)
Set xlApp = CreateObject("Excel.Application")
Do While (strExcelFileName <> "")
      xlApp.Workbooks.Open (ThisWorkbook.Path & "\Certs\" + strExcelFileName)
      'code to run for each workbook opened
      ***xlApp.Workbooks.Close*** 'when present, Excel freezes
      strExcelFileName = Dir 'next file in directory
Loop 
```

当 xlApp.Workbooks.Close 行存在并在程序中调用时，excel 每次都会冻结。没有它，我可以在系统不堪重负和死机之前运行 3-5 个工作簿。然后我必须终止这些进程，将这些文件移出，再移入 3 个并重复，直到所有文件都以这种方式处理。大约需要一个半小时才能通过50。

我想要做的是在打开下一个工作簿之前关闭从其中获取数据的工作簿。

```
ActiveWorkbook.Close 
```

这会尝试关闭运行宏的工作簿，而不是关闭已打开以供读取的工作簿。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:51:30.527

您已经打开了 Excel，因此您无需打开另一个副本。尝试：

```
Set WBookOther = Workbooks.Open(PathCrnt & FileNameCrnt)
  :
  :
WBookOther.Close SaveChanges:=False 
```

我的这个[较早的答案](https://stackoverflow.com/a/9864075/973283)循环当前文件夹中的每个工作簿可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T17:24:23.277

我运行你的代码没有任何问题，但这里有一个更干净的选择：

```
Dim strExcelFileName As String
Dim xlApp As Object
Dim wbk As Workbook

strExcelFileName = Dir(ThisWorkbook.Path & "\Certs\*.xls", vbNormal)
Set xlApp = CreateObject("Excel.Application")
Do While (strExcelFileName <> "")
      Set wbk = xlApp.Workbooks.Open(ThisWorkbook.Path & "\Certs\" _
          + strExcelFileName) ' set a reference to the workbook you're opening

      'code to run for each workbook opened
      'Your code should use the "wbk" reference to make sure
      ' you're accessing the correct workbook.

      wbk.Close ' close the workbook using the reference you set earlier

      strExcelFileName = Dir 'next file in directory
Loop 
```

# xml - 如何使用 drupal 中的规则从 XML 创建内容？

> ID：10012200
> 
> 赞同：0
> 
> 时间：2012-04-04T13:32:56.310
> 
> 标签：xml, drupal, drupal-rules

我是 drupal 的新手，目前我必须找到一种使用规则模块从 XML 创建内容的方法。

我设法从 web 服务获取 xml，并且我已经创建了相应的内容类型，其中包含显示数据的字段。在此之后，我不知道如何在规则中创建我需要的内容节点。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:37:06.217

我不建议仅使用[规则模块](http://drupal.org/project/rules)来执行此操作。查看可以从 XML 提要创建节点的[提要模块。](http://drupal.org/project/feeds)

# c# - 带有 OrderBy 字数的 Linq 查询

> ID：10012210
> 
> 赞同：4
> 
> 时间：2012-04-04T13:33:21.353
> 
> 标签：c#, .net, linq, sql-order-by

我有这段代码，

```
 public static List<string> GetSentencesFromWords(List<string> words, string fileContents)
{
    return fileContents.Split('.')
        .Where(s => words.Any(w => s.IndexOf(w) != -1))
        .Select(s => s.TrimStart(' ') + ".")
        .ToList();
} 
```

它工作得很好，另一个用户在另一个问题上帮助了我，但我认为与它相关的新问题值得一个新帖子。我需要按每个句子中的匹配数对返回的单词列表进行排序。我尝试了几种方法，但我对 Linq 不是很有经验，我尝试过的一切似乎都是按句子长度而不是字数排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:41:20.233

试试这个，它应该适合你吗？

```
return fileContents.Split('.')
    .Where(s => words.Any(w => s.IndexOf(w) != -1))
    .Select(s => s.TrimStart(' ') + ".")
    .OrderByDescending(s => words.Count(w => s.IndexOf(w) != -1))
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T13:52:39.750

那这个呢：

```
return fileContents.Split('.')
   .Where(s => words.Any(w => s.Contains(w) != -1))
   .Select(s => s.TrimStart(' ') + ".")
   .OrderByDescending(s => words.Sum(w => Regex.Matches(s, w).Count))
   .ToList(); 
```

不要忘记包括 `using System.Text.RegularExpressions`

# ruby - Ruby Zlib“未找到符号”

> ID：10012213
> 
> 赞同：0
> 
> 时间：2012-04-04T13:33:28.837
> 
> 标签：ruby, macos, rvm, zlib

## 问题

Zlib 不能包含在我的任何脚本中。如果包括在内，我会收到此错误

```
LoadError: dlsym(0x7f859bc94d90, Init_Zlib): symbol not found - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0/Zlib.bundle
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0/Zlib.bundle
from (irb):1 
```

无论我使用的是内置 Ruby 还是 RVM 1.8.7 或 1.9.2，都会发生这种情况

## 系统

*   麦金塔 10.7.3
*   酷睿 i7
*   8GB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:27:04.190

请阅读并遵循以下说明：

```
rvm requirements 
```

安装完所有已安装的软件包后，重新安装您的 rubies：

```
rvm reinstall 1.8.7,1.9.2 
```

如果您没有 homberew 或 macports，您也可以使用 RVM 安装软件包：

```
rvm pkg help 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T21:46:32.800

`require 'zlib'`而不是`require 'Zlib'`

# c# - 使用 c# 在 asp.net 中裁剪图像

> ID：10012216
> 
> 赞同：1
> 
> 时间：2012-04-04T13:33:37.287
> 
> 标签：c#, jquery, asp.net, image, crop

我正在使用 c# 在 asp.net 上工作。我必须通过拍摄该图像的一部分来调整图像。我想从中间裁剪一部分图像，如下图所示。

[![在此处输入图像描述](../Images/e78e6c3672042a64bf52c48a4a47e250.png)](https://i.stack.imgur.com/EUsAC.png)

谁能帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:19:48.100

我通过 Jquery 获取图像部分的坐标来做到这一点。

```
jQuery(function($) {
        $('#target').Jcrop({
            onChange: showCoords,
            onSelect: showCoords,
            onRelease: clearCoords
        });
    });
    function showCoords(c) {
        $('#xaxis').val(c.x);
        $('#yaxis').val(c.y);
        $('#x2').val(c.x2);
        $('#y2').val(c.y2);
        $('#xwidth').val(c.w);
        $('#div_width').val(c.w);
        $('#yheight').val(c.h);
        $('#div_height').val(c.h);
    };
    function clearCoords() {
        $('#coords input').val('0');
        $('#yheight').css({ color: 'red' });
        window.setTimeout(function() {
            $('#yheight').css({ color: 'inherit' });
        }, 500);
    }; 
```

然后我使用这些坐标在 C# 中裁剪图像，例如

```
String savedFileName = uploadProfileImage(profileImageName, new System.Drawing.Rectangle(Int32.Parse(xaxis), Int32.Parse(yaxis), Int32.Parse(xwidth), Int32.Parse(yheight)));

public String uploadProfileImage(string profileImageName, System.Drawing.Rectangle rectangle)
    {
        try
        {
            String retFileName = "";
            if (profileImageName != null || profileImageName != "")
            {
                GenerateCroppedThumbNail(profileImageName, rectangle);
            }
            return retFileName;
        }
        catch (Exception)
        {
            return String.Empty;
        }
    } 
```

这很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:40:47.870

如果您在服务器上执行此操作，我建议使用[服务器安全包装器](http://imageresizing.net)而不是直接使用 System.Drawing，[这样您就不必担心避免 29+ 陷阱和错误](http://nathanaeljones.com/163/20-image-resizing-pitfalls/)。

我的[ImageResizing.Net 库提供自动和手动裁剪](http://imageresizing.net/)

**自动的**

```
new ImageJob(source,dest,new 
 ResizeSettings("width=200;height=200;mode=crop;anchor=middlecenter")).Build(); 
```

**手动（按百分比）**

```
new ImageJob(source,dest,new 
 ResizeSettings("crop=20,20,80,80;cropxunits=100;cropyunits=100")).Build(); 
```

**手动（在源图像坐标中）**

```
new ImageJob(source,dest,new 
 ResizeSettings("crop=200,200,1000,1000;")).Build() 
```

# c++ - 如何在 Ray Tracer 中实现景深？

> ID：10012219
> 
> 赞同：5
> 
> 时间：2012-04-04T13:33:46.740
> 
> 标签：c++, raytracing, depth

有人可以帮我在 Ray Tracer 中实现景深吗？

我正在使用一个简单的针孔相机模型，如下所示。我需要知道如何使用针孔相机模型生成 DOF 效果？（图片取自[维基百科](http://en.wikipedia.org/wiki/Ray_tracing_%28graphics%29)）

![在此处输入图像描述](../Images/fbcd9b15d876d01f7fa19d609946bcc8.png)

我的基本光线追踪器工作正常。

我注视着 (0,0,0,1) 方向在 (dx, dy , 1.0f, 0.0f) 哪里

> 浮动 dx = (x * (1.0 / Imgwidth) ) - 0.5;
> 浮动 dy = (y * (1.0 / Imgheight) ) - 0.5;

现在在我读到的所有地方，他们都在谈论对应该放置在图像平面和场景之间的镜头进行采样。例如如下所示（图片取自维基百科）：

如果光线来自一个单点位置（相机或眼睛），如何在图像平面前引入镜头？

如果有人可以提供帮助，那就太好了！

谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T13:56:02.593

有 3 种方法可以做到这一点：

1.  物理上正确的自由度将需要场景的多次渲染。相机具有景深，因为它们不是真正的针孔模型。取而代之的是，它们有一个光圈，可以让光线在一定直径内进入。这相当于使用针孔相机并在该光圈内拍摄大量照片并将它们平均化。

    所以基本上，您需要围绕焦点稍微旋转相机多次，渲染整个场景，将输出颜色累积在缓冲区中，然后将所有值除以渲染次数。

2.  一个简单的后期处理效果——不仅渲染场景颜色，还渲染它的深度，然后使用这个深度来控制模糊效果的强度。请注意，这项技术需要一些技巧才能在不同模糊级别的对象之间实现无缝过渡。

3.  更复杂的后期处理效果 - 像以前一样创建深度缓冲区，然后使用它为原始场景的每个像素渲染一个孔径形状的粒子。使用深度来控制粒子大小，就像使用它来控制模糊效果强度一样。

(1) 给出最好的结果，但是是最昂贵的技术；(2) 最便宜，(3) 相当棘手，但提供了良好的成本效益平衡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T16:49:06.433

这是我为生成自由度而编写的代码。

```
void generateDOFfromEye(Image& img, const Camera& camera, Scene scene, float focusPoint)
{
    float pixelWidth = 1.0f / (float) img.width;
    float pixelHeight = 1.0f / (float) img.height;

    for (int y = 0; y < img.height; ++y)
        {
        for (int x = 0; x < img.width; ++x)
            {
            Color output(0,0,0,0);
            img(x, y) = Color(0,0,0,0);

            //Center of the current pixel
            float px = ( x * pixelWidth) - 0.5;
            float py = ( y * pixelHeight) - 0.5;

            Ray cameraSpaceRay = Ray(Vector(0,0,0,1), Vector(px, py, 1.0f, 0.0f));

            Ray ray = camera.Transform() * cameraSpaceRay;

            int depth = 0;
            int focaldistance = 2502;
            Color blend(0,0,0,0);

             //Stratified Sampling i.e. Random sampling (with 16 samples) inside each pixel to add DOF
                for(int i = 0; i < 16; i++)
                {
                //random values between [-1,1]
                float rw = (static_cast<float>(rand() % RAND_MAX) / RAND_MAX) * 2.0f - 1.0f;
                float rh = (static_cast<float>(rand() % RAND_MAX) / RAND_MAX) * 2.0f - 1.0f;
                // Since eye position is (0,0,0,1) I generate samples around that point with a 3x3 aperture size window.
                float dx =  ( (rw) * 3 * pixelWidth) - 0.5;
                float dy =  ( (rh) * 3 * pixelHeight) - 0.5;

                //Now here I compute point P in the scene where I want to focus my scene
                Vector P = Vector(0,0,0,1) + focusPoint * ray.Direction();
                Vector dir = P - Vector(dx, dy, 0.0f, 1.0f);

                ray  = Ray(Vector(dx,dy,0.0f,1.0f), dir);
                ray = camera.Transform() * ray;

                //Calling the phong shader to render the scene
                blend += phongShader(scene, ray, depth, output);

                }
            blend /= 16.0f;

            img(x, y) += blend;
            }
        } 
} 
```

现在我在代码中看不到任何错误。但是我得到的结果只是一个模糊的图像，其值`focuspoint > 500`如下所示： ![在此处输入图像描述](../Images/5ae912d5009926aaf19f57ef99287f26.png)

如果您能说出这段代码有什么问题，那将非常有帮助:) 谢谢！

# php - 使用 Mac 终端运行 PHP 脚本

> ID：10012226
> 
> 赞同：0
> 
> 时间：2012-04-04T13:34:15.587
> 
> 标签：php, html, macos, terminal

现在我可以从我的 Mac 终端运行 PHP 脚本，比如回显一些输出、创建文件夹等。这只是 PHP，它不接受任何输入参数。

是否可以运行带有 HTML 部分的 PHP 脚本，该部分包含用于输入用户名的表单，该用户名再次发布在 PHP 部分中，以便我可以使用输入的用户名创建文件夹名称。我想使用终端来测试它，而不是 Mac 上的浏览​​器。

我刚刚尝试使用 html 部分运行脚本，我在终端输出中得到的是整个 html 部分只是反映为终端输出中的输出，包括标签。我想要的可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:40:39.860

PHP 确实从终端获取参数，只需执行您的脚本`./myScript.php name`并在您的脚本中 $argv[1] 将持有`name`. $argv[0] 是当前脚本的绝对路径。

虽然我不太确定你的脚本是做什么用的，但你可能想阅读 php-cli ......它比你想象的要复杂得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:38:45.130

Apache 负责网络请求，如果没有网络服务器，您无法将帖子发送到 php 文件。如果您在控制台中运行该文件，您将得到的只是一堆 HTML，但控制台无法解释 HTML，这就是浏览器所做的，但是您可以制作一个 PHP 脚本以在控制台中运行并请求如果这是您需要的用户名，这是唯一的方法。

PHP 有一个最新版本的[内置网络服务器](http://php.net/manual/en/features.commandline.webserver.php)，如果你不想要像 apache 这样的网络服务器，你可以只使用 PHP 的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:40:49.877

我不认为你在问什么是可能的。终端不“知道”什么是 HTML，它实际上只是一堆文本字符串。HTML 表单显示在浏览器中的原因是 HTML 被渲染。

PHP 确实支持命令行脚本，但您应该只输出纯文本字符串，而不是输出 HTML 字符串。终端窗口不像浏览器窗口那样具有交互性，因此您能做的最好的事情就是提出问题并等待文本响应。我从来没有用 PHP 做过这个，我不知道这是否可能。如果您熟悉 PHP，您可能会发现迁移到 Perl 或 Python 相对容易，这两者都允许这种交互式会话样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:41:47.987

要解释 HTML 内容，您需要一个浏览器；终端窗口只会以纯文本格式显示输出。

但是，如果您想在终端窗口中读取用户的输入，您可能需要查看 I/O 流：[http ://www.php.net/manual/en/wrappers.php.php](http://www.php.net/manual/en/wrappers.php.php)

# perl - 具有数组形成的 Perl

> ID：10012227
> 
> 赞同：-7
> 
> 时间：2012-04-04T13:34:24.497
> 
> 标签：perl

我有一个这样的txt文件..

```
Heading1
Configparameter1  
Configparameter2  
..  
ConfigparameterN  
Input variable1  
Input variable2  
..  
Input variableN  
Output variable1 
.
.  
Output variableN  

Heading2
Configparameter1  
Configparameter2  
..  
ConfigparameterN  
Input variable1  
Input variable2  
..  
Input variableN  
Output variable1  
.  .  
Output variableN  

HeadingN
Configparameter1  
Configparameter2  
..  
ConfigparameterN  
Input variable1  
Input variable2  
..  
Input variableN  
Output variable1  
.
.  
Output variableN 
```

我不知道如何在谷歌搜索这个所以我在这里问...请帮助 perl 脚本形成如下结构..非常感谢

```
'Heading1' => {    
    'Configparameters' => [  
        Configparameter1  
        Configparameter2  
        .  
        .  
        ConfigparameterN  
    ],  
    'Input variables' => [  
        Input variable1  
            Input variable2  
            .  
            .  
            Input variableN  
    ],  
    'Output variables' => [  
        Output variable1  
        Output variable2  
        .  
        .  
        Output variableN  
    ],  
},  
'Heading2' => {  
    'Configparameters' => [  
        Configparameter1  
        Configparameter2  
        .  
        .  
        ConfigparameterN  
    ],  
    'Input variables' => [  
        Input variable1  
        Input variable2  
        .  
        .  
        Input variableN  
    ],  
    'Output variables' => [  
        Output variable1   
        Output variable2  
        .  
        .  
        Output variableN  
    ],  
},  
'HeadingN' => {
    'Configparameters' => [  
        Configparameter1  
        Configparameter2  
        .  
        .  
        ConfigparameterN  
    ],  
    'Input variables' => [  
        Input variable1  
        Input variable2  
        .  
        .  
        Input variableN  
    ],  
    'Output variables' => [  
        Output variable1  
        Output variable2  
        .  
        .  
        Output variableN  
    ],  
}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T15:06:45.870

你在找什么？

*   你知道任何 Perl 吗？或者，
*   你知道 Perl：
    *   而且，您需要帮助设置这样的复杂数据结构吗？
    *   或者，您不知道如何解析输入文件？

如果您不了解 Perl，请阅读《[学习 Perl](http://shop.oreilly.com/product/9780596101053.do) 》一书并逐步完成。这是我见过的为**任何**编程语言编写的最好的入门编程书籍之一。这比要求人们为您编写脚本要好得多。

如果您了解 Perl 并且只是不确定如何设置这样的数据结构，或者您是如何解析它的。问，我们会帮忙的。

如果您能更好地描述您想要做什么以及您的输入文件的实际外观，这也会有所帮助。例如，我怎么知道某物是标题、输出变量、输入变量还是配置？您的描述中没有任何内容可以帮助我们。你不必给我们真实的数据，但我们需要更好的方向。

我已经投票决定暂时*关闭*这个问题，因为这真的不是一个问题，也不清楚你想要什么。查看[常见问题解答](https://stackoverflow.com/faq)以了解 StackOverflow 的问题类型。如果您在这个问题上需要帮助，请编辑它，让我们更好地了解您到底需要什么以及最终想要实现什么。这将防止您的问题被关闭。

Perl 本身通过`perldoc`命令内置了很多 Perl 教程。但是，您也可以在[Perldoc 网页](http://perldoc.perl.org/index-tutorials.html)中找到这些教程。通过其中一些。第一个是关于 Perl 参考的优秀教程，以及创建如此复杂的数据结构所需的内容。

您甚至尝试过自己编写代码吗？如果人们看到您编写的一些代码，他们会更愿意提供帮助。它证明您已经尝试过查看问题，并且至少了解了您遇到的一些困难。它还让我们更好地了解您的 Perl 编码技能，以及我们可以在哪些方面为您提供帮助。

而且，还有一件事：学习本 Wiki 中使用的语法。我已经编辑了您的问题，以将您的代码显示为代码和您的文本文件。我通过将所有内容缩进四个空格来做到这一点。这告诉 Wiki 格式化语言这是格式化代码。

# foursquare - /venue/id 端点返回不同的场地 id

> ID：10012228
> 
> 赞同：2
> 
> 时间：2012-04-04T13:34:26.547
> 
> 标签：foursquare

我有一个作为参考存储的场地 ID。在尝试从foursquare API 中提取信息以显示给用户时，我从/venues/ 返回的地点与我请求的地点不同。它们本质上是相同的，除了id...

[https://api.foursquare.com/v2/venues/4e75fc201495be51715b18f1](https://api.foursquare.com/v2/venues/4e75fc201495be51715b18f1)

返回 id=4e6c56a5483b1f5ebe0a6e0f 的场地

这怎么可能？我假设场地倒塌了，这个场地是主要的？仍然这似乎是一个问题，因为我希望回到我要求的场地，即使它是重复的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T03:35:08.660

合并场地时，两个场地中“更受欢迎”的是保留的那个，并且辅助条目的值将合并到该对象中。

因此，如果您请求场地并取回具有不同 ID 的场地，则应更新本地数据库以使用此新 ID 作为该位置的规范四方标识符。

# jquery - jquery mouseover find() 交换 div

> ID：10012233
> 
> 赞同：0
> 
> 时间：2012-04-04T13:34:48.240
> 
> 标签：jquery, html, mouseover, fadein, swap

我是一个 javascript 新手，需要一些帮助来完成这个简单的事情......我希望 div:last 在鼠标悬停时显示在 div:first 上。它们被包裹在 .workpost 中。

我有几个 .workpost，只想触发活动的...

随着 fadeIn 下面的代码闪烁。

```
$('.workpost').mouseover(function() {
    $(this).find('div:last').fadeIn(200);
    $(this).mouseout(function() {
        $(this).find('div:last').fadeOut(200);
     });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:37:40.060

不要嵌套事件处理程序：

```
$('.workpost').hover(function() {
    $(this).find('div:last').fadeIn(200);
}, function() {
    $(this).find('div:last').fadeOut(200);
}); 
```

# python - Python 2.7 编码和 feedparser

> ID：10012236
> 
> 赞同：1
> 
> 时间：2012-04-04T13:35:04.153
> 
> 标签：python, encoding, feedparser

所以简而言之，我的情况是这样的：

*   从 RSS 提要读取数据
*   将内容打印到终端

当然，内容不是纯 ascii，它是 utf-8，所以我得到像“öäå”这样的字符。但是当我打印文本时，它都被'\xe4'之类的转义符弄乱了。与编码有关，但我无法理解这一点。这应该是微不足道的事情，但 google fu 让我失望了。

一个例子是当我逐字浏览内容并试图找到字符“ö”时：我这样做：

```
if u"ö" in word: 
```

这只是给出： UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 6 ...

编辑：

所以我想我找到了我的问题。我正在获取提要项目，然后只是执行 str(entry.content) 并继续传递，但 entry.content 是一个列表，其中包含一个以 unicode 字符串作为值的字典，所以我所做的（我猜）只是得到一个 ascii字典内容的表示...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:38:32.543

您正在尝试将编码文本与 unicode 进行比较。Python 不知道编码文本是 UTF-8，所以它猜测它是 ASCII 并尝试将其解码为 un​​icode。解决方案是使用适当的编码对其进行显式解码。

查看[Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)了解更多信息。

我可以用这个文件重现你的问题：

```
# coding: utf-8

word = "öäå"
if u"ö" in word:
    print True 
```

并用这个文件修复它：

```
# coding: utf-8

word = "öäå".decode('utf-8')
if u"ö" in word:
    print True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:39:05.457

如果您知道您的文本是 UTF-8，则可以`unicode`在开始使用它们之前将其解码为对象。从文件中读取字节后，您可以使用`decode()`字符串方法对它们进行解码，`word.decode('UTF8')`以返回 unicode 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:02:00.590

尝试使用 feedparser 包[http://packages.python.org/feedparser/](http://packages.python.org/feedparser/) 它可以很好地处理编码并支持几乎所有的提要格式。您将获得结构良好的数据。

# iphone - 处理触摸的自定义 UIView，上面的 UIWebview 不会将触摸传递给 UIWebview

> ID：10012237
> 
> 赞同：1
> 
> 时间：2012-04-04T13:35:10.280
> 
> 标签：iphone, ios, ipad, uikit, uitouch

尝试了以下所有方法，我希望触摸能够传递，但它们不是：

(a)UIWebView 启用了用户交互（总是）。(b) 自定义 UIView 启用了多个触摸，并且 ExclusiveTouch = NO (默认) (c) 我尝试调用

```
[super touchesBegan:touches withEvent:event] 
```

并且在自定义 UIView 中的其他 3 种触摸处理方法中也称为“超级”。但是触摸仍然没有传递到 UIWebView（即，点击 UIWebView 上的链接等不起作用）

(d) 此外，在 UIView 类中创建了对 Web 视图的引用，而不是调用 super 调用“touchesBegan:”和其余部分的引用。这似乎也不起作用。

注意：自定义 UIView 子类和 Web 视图是容器 UIView 的子视图。

这里缺少什么吗？任何其他方式（使用手势识别器或其他方式，传递触摸？）

布局

- 容器 UIView：

---自定义UIView（前）

---UIWebView（后面）

# c++ - 让 boost::program_options 将输入视为 const char* 而不是 std::string

> ID：10012245
> 
> 赞同：0
> 
> 时间：2012-04-04T13:35:44.887
> 
> 标签：c++, boost-program-options

```
class Foo {};
Foo foo;

namespace po = boost::program_options;

boost::program_options::options_description desc("Allowed options")
desc.add_options()
    ("foo", po::value<Foo>(&foo));

po::variables_map vm;
po::store(po::parse_command_line(argc, argv, desc), vm); 
```

以上将最终尝试从 std::string& 到 Foo& 进行 lex_cast

有没有办法让它从 const char*& 改为 Foo& 进行 lex_cast ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:32:07.813

您可以通过为以下定义 istream 运算符来处理此问题`Foo`：

```
std::istream& operator>>(std::istream &input_stream, Foo &foo) {
    // read from input_stream into foo...
    // if read fails, set failbit in input_stream...
    return input_stream;
} 
```

# jquery - jQuery-Galleriffic，在每张照片上设置 Facebook 点赞按钮

> ID：10012252
> 
> 赞同：0
> 
> 时间：2012-04-04T13:36:09.580
> 
> 标签：jquery

我实现了巨大的 [galleriffic][0] - jQuery 插件，并希望在每张图片上设置一个类似 facebook 的按钮。现在我在 onSlideChange() 函数中尝试了它，如下所示：

```
$(".fb-like").attr("data-href","http://ulc.local/galerie/25#"+nextIndex); 
```

但没有成功。一旦我单击一个喜欢按钮，其他图片上的所有其他按钮也会启用。

任何帮助深表感谢。

编辑：这是更多代码：

```
 <div id="gallery" class="content-image">  
            <div class="border-left"></div>  
            <div class="slideshow-container">
                <div id="loading" class="loader"></div>
                <div id="slideshow" class="slideshow">
                    <div id="slide-container">
                        <div id="slider">
                            <div id="title"></div>
                            <div id="share">
                                <div class="fb-like" data-send="false" data-layout="button_count" data-width="150" data-show-faces="true"></div>
                                <div id="spacer"></div>
                                <a href="https://twitter.com/share" class="twitter-share-button"  data-lang="en" data-count="none"></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="border-right"></div>  
        </div>
        <div style="clear:both"></div> 
```

类“fb-like”的 div 应该显示按钮。现在我尝试在 onSlidechange() 中用这个 div 替换这个 div：

```
onSlideChange:function(prevIndex, nextIndex) {
        // 'this' refers to the gallery, which is an extension of $('#thumbs')
        this.find('ul.thumbs').children()
            .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
            .eq(nextIndex).fadeTo('fast', 1.0);
        newUrl = "http://ulc.local/galerie/25/";
        $(".fb-like").replaceWith("<div class='fb-like' data-href='http://ulc.local/galerie/25#' "+nextIndex+" data-send='false' data-layout='button_count' data-width='150' data-show-faces='true'></div>");
    } 
```

我想制作几个类似按钮，一旦用户单击下一张图像，我就会更改 data-href 属性。不幸的是，没有显示任何按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:18:12.573

不知道您是否已经设法解决了这个问题，但如果您还没有，我建议您改用 Facebook 按钮的 iframe 版本。

然后，您可以使用 PHP（或其他一些服务器端脚本）动态更改 facebook “like” url。

我遇到了与您之前描述的完全相同的问题，但这为我解决了问题（尽管我宁愿不使用 iframe 版本，但至少我设法使它与 Galleriffic 一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:54:44.063

您的选择器按类抓取，这意味着您的属性更改将波及该类的所有元素。您需要找到一种方法来唯一标识要修改的元素。如果您从点击事件和一些 html 结构中发布更多代码，这将有所帮助。

# wpf - 自定义控件不显示

> ID：10012258
> 
> 赞同：2
> 
> 时间：2012-04-04T13:36:36.443
> 
> 标签：wpf, xaml, custom-controls, amcharts

我在显示自定义控件时遇到了一些问题。当页面加载时它是不可见的，但是一旦我调整窗口大小它就会出现。

这是我正在使用的代码：

```
<UserControl x:Class="KinectBewegingsanalyse.View.UserAnalysisChartView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:c="http://schemas.amcharts.com/stock/wpf/2009/xaml"
         mc:Ignorable="d"
         d:DesignWidth="800" d:DesignHeight="600">

<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Resources/Styles.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources>

<Grid>
    <c:StockChart Name="test" Visibility="Visible" PeriodSelectorVisibility="Hidden" IsEquallySpaced="False" Margin="12">
        <c:StockChart.Charts>
            <c:Chart PlotAreaBorderBrush="{StaticResource TassBlue}" PlotAreaBorderThickness="1">
                <c:Chart.DateTimeAxis>
                    <c:DateTimeAxis ValuesEnabled="True" Stroke="Transparent" StrokeThickness="0" />
                </c:Chart.DateTimeAxis>
                <c:Chart.LeftValueAxis>
                    <c:ValueAxis ValuesFormatString="0°" Stroke="Transparent" StrokeThickness="0" />
                </c:Chart.LeftValueAxis>
                <c:Chart.Graphs>
                    <c:Graph GraphType="Line" BulletType="RoundOutline" BulletSize="8" LegendItemType="Value" LegendValueLabelText="Gemeten waarde: " LegendValueFormatString="0°" LegendPeriodItemType="Value" />
                </c:Chart.Graphs>

                <c:Chart.Legend>
                    <c:Legend PositiveValueForeground="Black" NegativeValueForeground="Black" IsDateVisible="True" HideDateOnPeriod="False" />
                </c:Chart.Legend>
            </c:Chart>
        </c:StockChart.Charts>

        <c:StockChart.DataSets>
            <c:DataSet Brush="{StaticResource TassMagenta}" ItemsSource="{Binding PerformedAnalysis}" DateMemberPath="Date" ValueMemberPath="Angle" />
        </c:StockChart.DataSets>
    </c:StockChart>
</Grid> 
```

我使用的 customc 控件是来自 amCharts（[amCharts 网站](http://wpf.amcharts.com/stock "amCharts 网站")）的 StockChart。

提前致谢！

杰伦·科西乌斯

**更新 1：** 因此包含自定义控件的 Grid 的宽度和高度为“NaN”。为 Grid 设置宽度和高度不会改变任何内容。

**更新 2：** 我尝试通过执行以下操作之一来触发图表刷新：

*   base.InvalidateVisual();
*   base.UpdateLayout();
*   网格.UpdateLayout();
*   grid.InvalidateVisual();
*   图表.Focus();
*   Chart.UpdateLayout();
*   Chart.InvalidateVisual();
*   图表.刷新（）；

一切都没有任何结果。

**更新 3：** 在按钮单击事件上执行`Chart.Refresh();`时，图表会显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:02:50.627

尝试在图表上添加以下事件：`Loaded="Chart_Loaded"`，在事件处理程序中添加以下规则：`Chart.Refresh();`。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:18:02.287

使用[snoop](http://www.google.co.il/url?sa=t&rct=j&q=wpf%20snoop&source=web&cd=1&ved=0CC8QFjAA&url=http%3A%2F%2Fsnoopwpf.codeplex.com%2F&ei=Z6l9T8XXLKHU0QXOjpXCDQ&usg=AFQjCNGOZqCZyA9ShSXslnP5ypdWZM1UnA)检查可视化树并查看树损坏的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:18:08.697

确保自定义控件或包含它的东西没有将 minwidth 设置为零。当 studio 或 blend 添加 minwidth=0 作为默认值时，我在 Silverlight 中发生的情况完全相同。

# php - 成功交易后绝对需要重定向吗？

> ID：10012259
> 
> 赞同：1
> 
> 时间：2012-04-04T13:36:44.527
> 
> 标签：php, redirect, transactions, include

我正在编写一个交易页面，在成功交易后，用户将被重定向到“transact_success.php”页面。我想知道是否存在任何问题、安全性或其他问题，而不是：

```
if(transaction is successful)
{
 header("Location: transact_success.php");
 exit();
} 
```

我用：

```
if(transaction is successful)
{
 include("/var/www/include/transact_success.inc");
 exit();
} 
```

在交易页面本身上显示相同的信息。

我问这个问题是因为第一种情况通常是我在许多网站上观察到的，其中一些有多次重定向。我想这是为了防止人们点击“返回”按钮，导致重复交易。

如果在处理交易之前，我要检查数据库的交易状态，是否还需要这种重定向？我可以继续使用第二种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:41:26.657

只要您可以避免重复操作（例如通过刷新），您就可以使用第二种方法，重定向很有用，因为它们减少了代码重复并以“类似网络的方式”运行。

看看[Post/Redirect/Get Pattern](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

# javascript - 想要使用 jqgrid 获取输入键来触发搜索

> ID：10012266
> 
> 赞同：0
> 
> 时间：2012-04-04T13:37:17.600
> 
> 标签：javascript, asp.net, jqgrid

我正在使用 JQgrid，并且始终打开搜索对话框。我想让 Enter 键在按下时开始搜索。我尝试了其他一些解决方案，例如在搜索中使用 onbeforeshowseach 方法，但它摆脱了我始终打开的搜索框。谁能帮我解决这个问题？这是我的网格和搜索对话框代码：

```
//Create the grid
var grid = $("#list"), prmSearch = { multipleSearch: false, overlay: false };
    var url = window.URLS.get('MySample');
    $("#list").jqGrid({
        url: url,
        datatype: 'json',
        mtype: 'POST',
        postData: {
            ignoreCurrentSelectionPage: function () { return ignoreCurrentSelectionPage; },
            groupNo: '<%= ViewBag.value1%>',
            groupType: '<%= ViewBag.value2%>'
        },
        colNames: ['Col1', 'Col2', 'Col3','Col4', 'Col5','Col6', 'Col7'],
        colModel: [
      { name: 'Col1', index: 'Col1', width: 300, align: 'center', hidden: true },
      { name: 'Col2', index: 'Col2', width: 250, align: 'left', search: true, searchoptions: { sopt: ['bw', 'ew','cn','eq', 'ne' ]} },
      { name: 'Col3', index: 'Col3', width: 240, align: 'left' , search: true, searchoptions: { sopt: ['bw', 'ew','cn','eq', 'ne'  ]}},
      { name: 'Col4', index: 'Col4', width: 100, align: 'center', search: false },
      { name: 'Col5', index: 'Col5', width: 100, align: 'center', search: false },
      { name: 'Col6', index: 'Col6', width: 100, align: 'center', search: false },
      { name: 'Col7', index: 'Col7', editable: true, edittype: 'checkbox', editoptions: { value: "yes:no" },search:false,
          formatter: "checkbox", formatoptions: { disabled: false }, align: 'center', width: 50
      },
      ],
        pager: jQuery('#pager'),
        rowNum: 15,
        rowList: [10, 15, 25, 50, 100, 500],
        sortname: 'Col2',
        sortorder: "asc",
        viewrecords: true,
        multiselect: false,
        multikey: "ctrlKey",
        caption: 'Sample',
        width: "100%",
        height: "100%",
        loadError: function (xhr, textStatus, errorThrown) {
        },
        gridComplete: function () {

            prmSearch = { multipleSearch: true, overlay: false };
            ignoreCurrentSelectionPage = true;
            $("#list").setSelection(selectedRowId, true);

            },

    }).navGrid('#pager', 
        { edit: false, add: false, del: false, search: true, refresh: true },
        {},  //  default settings for edit
        {}, //  default settings for add
        {},  // delete instead that del:false we need this
        {overlay:0}, // search options
        {}, /* view parameters*/
        prmSearch);
        // create the searching dialog 
        grid.searchGrid(prmSearch);
        // find the div which contain the searching dialog 
        //var searchDialog = $("#searchmodfbox_" + grid[0].id);
        var searchDialog = $("#searchmodfbox_" + grid[0].id);
        // make the searching dialog non-popup 
        searchDialog.css({ position: "relative", "z-index": "auto"});
        searchDialog.addClass("ui-jqgrid ui-widget ui-widget-content ui-corner-all");
        searchDialog.css({ position: "relative", "z-index": "auto", float: "left"});
        var gbox = $("#gbox_" + grid[0].id);
        gbox.before(searchDialog);
        gbox.css({ clear: "left"});
        //remove the empty span in the search dialog box.
        //we may need to re-add this is advanced searching is turned on
        $("#fbox_list").find('span:empty').parent().remove();

        //remove the empty span in the search dialog box.
        //we may need to re-add this is advanced searching is turned on
        $("#fbox_list").find('span:empty').parent().remove(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:08:30.170

[我在这里](https://stackoverflow.com/a/9659066/315935)回答了这个问题。对应的演示在[这里](http://www.ok-soft-gmbh.com/jqGrid/SearchOnEnter.htm)。我想每次搜索都不容易找到答案，因为“搜索”、“对话”和“输入”这些词太常见了。

# entity-framework - 与 OneWay CascadeOnDelete 的一对一或零关系

> ID：10012267
> 
> 赞同：3
> 
> 时间：2012-04-04T13:37:20.580
> 
> 标签：entity-framework, ef-code-first

我有一个实体，其中包含许多不同的文档，这些文档与我的数据库中的任何实体都有未知的关系。

```
public class Document : BaseEntity
{

    public string Filename { get; set; }

    public string MIMEType { get; set; }
    public int? Length { get; set; }

    public byte[] Content { get; set; }

} 
```

并且codefirst-mapping是：

```
 public DocumentConfiguration()
    {
        Property(x => x.Filename).HasMaxLength(300).IsRequired();
        Property(x => x.MIMEType).HasMaxLength(300).IsRequired();
        Property(x => x.Length).IsOptional();
        Property(x => x.Content).IsOptional().HasColumnType("varbinary(max)");

        ToTable("Document"); 
    } 
```

现在我想要一个与我的地址中的文档表的可选关系，如下所示：

```
public class Address : BaseEntity
{

    public string Name1 { get; set; }
    public string Name2 { get; set; }
    public string Additional { get; set; }

    public string Street { get; set; }
    public string HousNr { get; set; }
    public string ZipCode { get; set; }
    public string City { get; set; }

    public virtual Document Image { get; set; }

} 
```

使用以下映射：

```
 public AddressConfiguration()
    {

        Property(x => x.Name1).IsRequired().HasMaxLength(250);
        Property(x => x.Name2).HasMaxLength(250);
        Property(x => x.Additional).HasMaxLength(250);

        Property(x => x.Street).HasMaxLength(250);
        Property(x => x.HousNr).HasMaxLength(10);
        Property(x => x.ZipCode).HasMaxLength(10);
        Property(x => x.City).HasMaxLength(100);

        HasOptional(x => x.Image)
            .WithOptionalDependent()
            .Map(map => map.MapKey("ImageId")).WillCascadeOnDelete();

        ToTable("Address");

    } 
```

但是当我删除文档表中的图像时，它会删除相关地址。

我想要一个从地址到文件的单向删除，而不是从文件到地址...？

我该如何实施？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T18:59:54.410

它具有从文档到地址的级联的原因是因为您使用[*了 WithOptionalDependent*](http://msdn.microsoft.com/en-us/library/gg696744%28v=vs.103%29.aspx)方法。从文档中：

> *将关系配置为可选：关系另一端没有导航属性的可选。正在配置的实体类型将是从属的，并包含主体的外键。关系所针对的实体类型将是关系中的主体。*

考虑 AddressConfiguration 方法中的这行代码：

```
HasOptional(x => x.Image)         // The entity type being configured is Address
   .WithOptionalDependent()...   // The entity type that the relationship targets
                                //  is Document (x.Image) 
```

这意味着您在此关联中有效地将 Address 指定为依赖项，并将 Document 指定为主体，从而产生级联行为。

但是等等，这个故事还有更多！您可以通过两种方式创建一对一关联。首先是*共享主键关联*或*一对一外键关联*。[**您可以从这里**](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)和[**这里**](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)阅读更多关于它们的信息。看起来您想通过外键（一对一外键关联）映射您的关联。如果是这样，您必须注意依赖实体将始终携带外键，这意味着在您的情况下，文档实体将有一个 AddressId 引用 Address 实体上的 AddressId（您做了相反的操作，这是不正确的。）。

话虽如此，您的对象模型和流畅的 API 代码应该如下所示：

```
public class Address 
{
    public int AddressId { get; set; }
    public virtual Document Image { get; set; }
}

public class Document 
{
    public int DocumentId { get; set; }
}

class Context : DbContext
{
    public DbSet<Address> Addresses { get; set; }
    public DbSet<Document> Documents { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Address>()  // The entity being configured is Address
                    .HasOptional(x => x.Image)  
                    .WithOptionalPrincipal()
                    .Map(map => map.MapKey("AddressId"))
                    .WillCascadeOnDelete();
    }
} 
```

基本上[*WithOptionalPrincipal*](http://msdn.microsoft.com/en-us/library/gg679107%28v=vs.103%29.aspx)是您应该使用的方法：

> *将关系配置为可选：关系另一端没有导航属性的可选。正在配置的实体类型将是关系中的主体。关系目标的实体类型将是从属的，并包含主体的外键。*

结果，级联删除从地址正确打开到文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:54:18.183

尝试删除 OneToManyCascadeDeleteConvention： `modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention >();`

# jquery - 查找ID并添加动画类

> ID：10012274
> 
> 赞同：0
> 
> 时间：2012-04-04T13:37:51.200
> 
> 标签：jquery, animation, addclass, removeclass

我尝试做一个稍微不同的菜单设置。我所有的 a 标签都必须有一个 ID，以便它们可以移动。但是当你在链接上运行鼠标时，它应该从底部动画一个框，其中有一些文本。我怎样才能让 jquery 找到指定的 id，然后添加一个类来动画？

这是我的代码：

[http://jsfiddle.net/sgJUf/](http://jsfiddle.net/sgJUf/)

HTML：

```
<div id="right_nav">
    <ul>
        <li><a id="nav_1" href="#">#</a></li>
        <li><a id="nav_2" href="#">#</a></li>
        <li><a id="nav_3" href="#">#</a></li>
        <li><a id="nav_4" href="#">#</a></li>
        <li><a id="nav_5" href="#">#</a></li>
        <li><a id="nav_6" href="#">#</a></li>
        <li><a id="nav_7" href="#">#</a></li>
        <li><a id="nav_8" href="#">#</a></li>
        <li><a id="nav_9" href="#">#</a></li>
    </ul>
</div> 
```

CSS：

```
#right_nav { width:700px; height:auto; float:left;}
#right_nav ul { width:100%; height:100%; margin:0; padding:0;}
#right_nav ul li { list-style-type:none; float:left;}
#nav_1 { width: 250px; height:160px; background-color:#33CCCC; margin: 0px 0 0 5px; position:absolute;}
#nav_2 { width: 230px; height:400px; background-color:#66F; margin: -100px 0 0 260px; position:absolute;}
#nav_3 { width: 250px; height:100px; background-color:#693;  margin: 329px 0 0 447px; position:absolute;}
#nav_4 { width: 200px; height:200px; background-color:#CC9; margin: 200px 0 0 29px; position:absolute;}
#nav_5 { width: 190px; height:300px; background-color:#F9C; margin: 0 0 0 510px; position:absolute;}
#nav_6 { width: 250px; height:200px; background-color:#CF0; margin: 450px 0 0 450px; position:absolute;}
#nav_7 { width: 150px; height:200px; background-color:#F99; position:absolute; margin: 320px 0 0 250px;}
#nav_8 { width: 220px; height:200px; background-color:#693; position:absolute; margin: 420px 0 0 0;}
#nav_9 { width: 150px; height:100px; background-color:#693; position:absolute; margin: 540px 0 0 250px;}
.hover { width:50px; height:25px; background-color:#993300; } 
```

jQuery：

```
$(document).ready(function() {     
    $("#right_nav ul li").hover(function(){     
        $('#right_nav ul li').addClass("hover");    
    },
    function(){    
        $('#right_nav ul li').removeClass("hover");     
    });
}); 
```

我可以在第一个链接上添加 .Hover 但如果我在其他链接上运行鼠标它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:56:08.113

我会将您的最后一行 CSS 更改为：

```
#right_nav ul li:hover { width:50px; height:25px; background-color:#993300; } 
```

所以你不需要任何 JS 来做到这一点。

我不知道这是否真的是你要找的。你试图“动画”的“盒子”是什么/在哪里？这些方面的东西可能：

```
$(document).ready(function() {     
    $("#right_nav ul li").hover(function(){
        //gets the hovered element's id
        var hovered_li_id = $(this).attr('id'); 

        //adds .hover to an element with id "hoverbox_nav_X" and then eventually animates it
        $('#hoverbox_'+hovered_li_id).addClass('hover').animate( /*...*/ );
    },
    function(){
        //removes .hover from wherever it was set and eventually resets any css the animation modified.
        $('.hover').removeClass('hover').css( /*...*/ );
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:40:20.700

如果您查看您的代码，您会发现您正在将类添加到所有 LI，而不是您悬停的那个。尝试这个：

```
$(document).ready(function() {     
    $("#right_nav ul li").hover(function(){
        $(this).addClass("hover");    
    },     
    function(){    
        $(this).removeClass("hover");     
    });
}); 
```

# c++ - 如何在 C++ 中创建具有引用成员的数组？

> ID：10012280
> 
> 赞同：5
> 
> 时间：2012-04-04T13:38:08.863
> 
> 标签：c++, arrays, reference

我有一些类 Foo 和 Logger：

```
class Logger{/* something goes here */};
class Foo{
  Foo(Logger& logger);
  Logger& logger;
}

Foo::Foo(Logger& logger) : logger(logger)
{} 
```

现在我想创建一个 Foo 类的对象数组，其中所有引用`Foo::logger`都应该指向同一个`Logger`对象。我尝试了类似的东西（我需要堆栈和堆分配）：

```
Logger log (/* parameters */);
Foo objects [3] (log); // On stack
Foo* pObjects = new Foo [3] (log); // On heap 
```

问题是两个版本都试图调用`Foo()`不存在的默认构造函数。此外，据我了解，无法更改引用的引用变量。因此，对默认构造函数的临时调用和稍后在循环中的初始化也无济于事。

那么：正确的方法是什么？我需要使用指向`Logger`对象的指针吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:47:42.037

您不能使用非默认构造函数初始化对象数组。但是，您可以使用[此处](http://bytes.com/topic/c/answers/586377-array-objects-non-default-constructor-possible)显示的向量（查看第一个回复）

对于堆，您可以执行以下操作：

```
Foo* pObjects[3];

for (int i = 0; i < 3; ++i) {
   pObjects[i] = new Foo(log);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:55:14.423

您可以使用 C++11 大括号初始化使用非默认构造函数初始化对象数组：

```
class Logger{/* something goes here */};
class Foo{
public:
  Foo(Logger& logger);
private:
  Logger& logger;
};

Foo::Foo(Logger& logger) : logger(logger)
{} 
```

* * *

*编辑*：在 C++11 中，你可以`vector`用来做你想做的事：

```
#include <vector>
class Logger{/* something goes here */};
class Foo{
public:
  Foo(Logger& logger) : logger(logger) {}
private:
  Logger& logger;
};

int main () {
  Logger log;
  std::vector<Foo>(3, log);
} 
```

请注意，该`vector`解决方案不适用于 C++03。在 C++03 中，向量构造函数调用`Foo::operator=`. 在 C++11 中，它调用`Foo::Foo(const Foo&)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T13:59:22.017

对于一般用途，我通常将记录器设为单例，因此只有一个记录器，并且可以从所有组件中访问。[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

这也使得 Foo 的构造函数更加简单。

```
class Logger
{
    public:
        static Logger& getInstance()
        {
            static Logger    instance;
            return instance;
        }

        public log(const std::string& txt) 
        {
            //do something
        }

    private:
        Logger() {}
        Logger(Logger const&);              // Don't Implement.
        void operator=(Logger const&); // Don't implement
 }; 
```

并在 Foo 中使用它，例如：

```
 Logger::getInstance().log("test"); 
```

或者

```
 Logger& logger = Logger::getInstance();
 logger.log("test"); 
```

(Credits for singleton from @Loki Astari : [C++ Singleton design pattern](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern) )

# c++ - push_back 问题 std::vector

> ID：10012281
> 
> 赞同：1
> 
> 时间：2012-04-04T13:38:10.000
> 
> 标签：c++, vector, push-back

OSX 10.7，XCode 4。

我有一个小问题：在选择过程之后，我需要将 2D 推回`vector<vector<float>>`3D 矢量。它在 stl::vector 模板的 push_back 函数中引发 EXC_BAD_ACCESS 错误。看起来它应该很简单（我以前曾多次使用过复杂的数据结构），我尝试了各种想法但无济于事。其他一切都有效，并将我期望的值输出到命令行。我敢肯定它的代码是盲目的，而且有一些容易上手的代表。

我问只是因为我相信我的语法是正确的，但是在编译时我遇到了问题。下面是一些示例代码：

执行：

```
for(int i=0;i<fdisVec.size();i++){

    int j;

        if(fdisVec[i] < fdisVec2[i]){

            j = 0;

        }

        else if(fdisVec2[i] < fdisVec[i]){

            j = 1;

        }

    clusters[j].push_back(allMfccs[i]);

} 
```

我的 .h 有这样声明的对象（类的公共成员）：

```
 vector< vector <float> > allMfccs;
    vector< vector < vector <float> > > clusters; 
```

如果它有帮助，fdisVec 和 fdisVec2 也是 2d 向量，但是，“if else”语句会响应我想要的方式 - 我非常怀疑它是否与此有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:46:36.547

如果 fdisVec[i] == fdisVec2[i] 怎么办？

在这种情况下， j 未初始化（垃圾），有时该值不是集群向量的有效索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:53:15.363

尽管这`cluster.size() == 0`将是一个问题（正如@VaughnCato 的回答所讨论的那样），访问集群的元素不会导致编译时错误，但很可能会在您运行程序时崩溃。

但是，编译时错误是由于`clusters[j]`预期 a`vector< vector< float > >`但`allMfccs[i]`只是 a的事实`vector< float >`。

所以根据你的`clusters`and声明`allMfccs`，你需要 push `allMfccs`。

# c++ - 这个使用 sprintf 的 Perl 代码的 C++ 等价物是什么？

> ID：10012291
> 
> 赞同：-2
> 
> 时间：2012-04-04T13:38:40.023
> 
> 标签：c++, perl, printf

我需要模仿以下 Perl 代码的功能

```
if($file =~ /^([^_]+)_([^_]+)_MA_(\d{4})(\d\d)(\d\d)_(\d\d)(\d\d)(\d\d)\.MA$/) {
  my ($radar, $beam, $year, $month, $day, $hour, $min, $sec) =
      ($1, $2, $3, $4, $5, $6, $7, $8);
  my $file_ts = sprintf("%04d-%02d-%02d %02d:%02d:%02d",
      $year, $month, $day, $hour, $min, $sec);

  # ...
} 
```

在 C++ 中。我使用哪个功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T13:40:10.700

好吧，总是可以选择使用`sprintf`：

[http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)

或者您可以使用`stringstream`, 作为更 C++ 的替代方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T13:40:26.300

与 Perl 相同：

```
char file_ts[1000];

snprintf(file_ts, "%04d-%02d-%02d %02d:%02d:%02d", year, month, day, hour, min, sec); 
```

# python - 为什么我不能使用 python smtplib 给自己发送邮件？

> ID：10012303
> 
> 赞同：3
> 
> 时间：2012-04-04T13:39:27.667
> 
> 标签：python, smtp, python-2.7

我正在使用从[这里](http://docs.python.org/library/smtplib.html)获取的代码：

```
import smtplib

def prompt(prompt):
    return raw_input(prompt).strip()

fromaddr = prompt("From: ")
toaddrs  = prompt("To: ").split()
print "Enter message, end with ^D (Unix) or ^Z (Windows):"

# Add the From: and To: headers at the start!
msg = ("From: %s\r\nTo: %s\r\n\r\n"
       % (fromaddr, ", ".join(toaddrs)))
while 1:
    try:
        line = raw_input()
    except EOFError:
        break
    if not line:
        break
    msg = msg + line

print "Message length is " + repr(len(msg))

server = smtplib.SMTP('localhost')
server.set_debuglevel(1)
server.sendmail(fromaddr, toaddrs, msg)
server.quit() 
```

我将我的 gmail 邮件帐户放在发件人和收件人中，但出现此错误：

```
Traceback (most recent call last):
  File "C:/Python27/smtpExample.py", line 24, in <module>
    server = smtplib.SMTP('localhost')
  File "C:\Python27\lib\smtplib.py", line 242, in __init__
    (code, msg) = self.connect(host, port)
  File "C:\Python27\lib\smtplib.py", line 302, in connect

    self.sock = self._get_socket(host, port, self.timeout)
  File "C:\Python27\lib\smtplib.py", line 277, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "C:\Python27\lib\socket.py", line 571, in create_connection
    raise err
error: [Errno 10061] No connection could be made because the target machine actively refused it 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T13:42:00.650

您的机器上没有运行[SMTP 服务器](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol#Outgoing_mail_SMTP_server)。

请参阅：[无法建立连接，因为目标机器主动拒绝它](https://stackoverflow.com/questions/4532335/no-connection-could-be-made-because-the-target-machine-actively-refused-it)

# c# - 在 LostFocus 之前触发 SelectedItem 事件以更新源

> ID：10012305
> 
> 赞同：1
> 
> 时间：2012-04-04T13:39:36.460
> 
> 标签：c#, wpf, silverlight, xaml, triggers

我有一段将集合绑定到 DataGrid 的代码，并且 DataGrid 的选择将允许在 TextBoxes 中进行详细编辑。

所以基本上 DataGrid 绑定到一个集合，TextBoxes 绑定到 DataGrid.SelectedItem.(properties)。

这里的问题是当在 TextBoxes 中编辑某些内容时（比如在文本框中添加一个字符，而不会失去焦点），然后在 DataGrid 中选择另一个项目（现在失去焦点）。DataGrid 将更新它的 SelectedItem 属性，但现在假设对前一个项目所做的更改已经消失，当失去焦点事件发生时，PropertyChanged 事件不会触发。

我知道我可以通过使用来解决它`UpdateTriggerSource=PropertyChanged`，但是如果我使用，会有很多事件触发`PropertyChanged`，所以我想看看是否有解决这个问题的解决方案。

以下是我可以重现此问题的示例代码：

代码隐藏：

```
public partial class MainPage : UserControl
{
    Person _SelectedPerson { get; set; }
    public Person SelectedPerson
    {
        get
        {
            return this._SelectedPerson;
        }
        set
        {
            if (this._SelectedPerson == value)
                return;
            this._SelectedPerson = value;
        }
    }

    public MainPage()
    {
        InitializeComponent();

        Person personA = new Person() { FirstName = "Orange", LastName = "Cake" };
        Person personB = new Person() { FirstName = "Apple", LastName = "Pie" };
        ObservableCollection<Person> aPersonCollection = new ObservableCollection<Person>();
        aPersonCollection.Add(personA);
        aPersonCollection.Add(personB);

        MyDataGrid.ItemsSource = aPersonCollection;
        this.DataContext = this;
    }
}

public class Person : INotifyPropertyChanged
{
    string _LastName { get; set; }
    public string LastName
    {
        get
        {
            return this._LastName;
        }
        set
        {
            if (this._LastName == value)
                return;
            this._LastName = value;
            this.OnPropertyChanged("LastName");
        }
    }

    string _FirstName { get; set; }
    public string FirstName
    {
        get
        {
            return this._FirstName;
        }
        set {
            if (this._FirstName == value)
                return;
            this._FirstName = value;
            this.OnPropertyChanged("FirstName");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    void OnPropertyChanged(string property)
    { 
        if (PropertyChanged != null)
            this.PropertyChanged(this, new PropertyChangedEventArgs(property));
    } 
```

XAML：

```
<Grid x:Name="LayoutRoot" Background="White">
    <StackPanel>
        <sdk:DataGrid x:Name="MyDataGrid" SelectedItem="{Binding SelectedPerson, Mode=TwoWay}" />
        <TextBox Text="{Binding SelectedItem.FirstName, ElementName=MyDataGrid, Mode=TwoWay}" />
        <TextBox Text="{Binding SelectedItem.LastName, ElementName=MyDataGrid, Mode=TwoWay}" />
    </StackPanel>            
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:54:51.053

您可以为已编辑的文本框的离开事件添加逻辑。这应该在数据网格获得焦点之前触发。

# java - 确定打印机是否可以在不查找的情况下处理打印作业

> ID：10012314
> 
> 赞同：65
> 
> 时间：2012-04-04T13:40:13.913
> 
> 标签：java, performance, printing

我一直在与`PrintServiceLookup`; 该`lookupPrintServices(DocFlavor flavor, AttributeSet attributes)`方法在初始运行时检测我们的应用程序中的打印机非常慢。拥有超过 100 台网络打印机的客户报告说，执行此代码的行为在第一次运行时表现不佳。

在看到查找结果被缓存后，我最初在一个单独的线程中部署了一个虚拟查找（在启动时执行）。但是，对于特定客户，此解决方案不起作用。

我目前没有他们的环境，也看不到是什么导致了确切的性能问题。

我正在尝试查看 a 是否`PrintService`支持给定`MediaSizeName` **而不**`DocFlavor`执行and的查找`AttributeSet`。所以我拉出所有可用`PrintService`的 s 和默认值`PrintService`：

```
private static final PrintService[] PRINTSERVICES = 
   PrintServiceLookup.lookupPrintServices(null, null);

private static final PrintService DEFAULTSERVICE = 
   PrintServiceLookup.lookupDefaultPrintService(); 
```

然后，从客户端请求中获取`PrintService`和。`MediaSizeName`最后，我问一下`PrintService`是否`MediaSizeName`支持：

```
private void checkPrintServiceForMediaSize(PrintService pservice) throws MediaSizeNotSupportedException{
     if(!pservice.isAttributeValueSupported(_mediaSizeName,null,null))
            throw new MediaSizeNotSupportedException("This media size is not supported by the selected printer.");
     } 
```

[API](http://docs.oracle.com/javase/1.5.0/docs/api/javax/print/PrintService.html#isAttributeValueSupported%28javax.print.attribute.Attribute,%20javax.print.DocFlavor,%20javax.print.attribute.AttributeSet%29)声明 when使用`isAttributeValueSupported(Attribute attrval,DocFlavor flavor,AttributeSet attributes)`null`DocFlavor`和`AttributeSet`

> 这个方法告诉这个打印服务是否支持给定的打印属性值，用于文档风格和属性集的某些可能的组合

并且到目前为止表现正确。但是，如果打印机支持选定的页面大小，我不完全确定这是否是执行方式。

我将感谢您对此问题的反馈和经验。

* * *

**更新**

大约在我实施我的方法时，我的工作站决定出现严重的网络问题，我花了一段时间才弄清楚。最后，我的实现已经用网络工具[SoftPerfect Connection Emulator](http://www.softperfect.com/products/connectionemulator/)（模拟网络负载）进行了测试，结果并没有显着改善。

我将继续测试和更新这个问题。希望我能找到解决方案并与这里的人分享。我猜最初的查找：

```
private static final PrintService[] PRINTSERVICES = 
   PrintServiceLookup.lookupPrintServices(null, null); 
```

仍然导致问题。

* * *

**更新 2**

beta 版本最终在客户端环境中进行了测试，打印对话框的性能提高了大约 5 倍（现在在相同环境下，打印机的初始拉动大约需要 1 分钟，而在相同环境下大约需要 5 分钟）。最初的等待时间仍然不是可接受的时间量，但是，这是我现在能做的最好的时间。我们还从客户那里听说正在使用打印服务器，并且按照评论 (@Wardy) 中的建议，我将朝着这个方向前进。希望我们可以利用打印服务器的优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:08:43.960

更积极的缓存。让客户端执行一次查找并在重新启动之间保留缓存。更好的是，将缓存保存到所有客户端都可以访问的中央数据存储中。

我假设网络打印机及其功能不会经常更改，但您最终必须更新缓存，但“谁”和“何时”取决于您的环境。

可以由在后台运行当前发现的客户端对缓存进行更新，如果检测到更改，则更新缓存。如果您有一个无论如何都连续运行的中央组件，那将是您可以定期检查的好地方。

如果您有某种目录服务，您可以在联系每台打印机之前将其打印机列表与您的缓存进行比较，以获取其减少网络和 CPU 负载的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:24:58.963

如果打印机列表存储在 LDAP 中，您可以尝试使用[LDAP](http://wiki.java.net/twiki/bin/view/Javapedia/LDAP)查找打印机。

# php - PHP表单输入步骤，出现循环错误

> ID：10012316
> 
> 赞同：1
> 
> 时间：2012-04-04T13:40:17.813
> 
> 标签：php, forms, loops

我对 PHP 还很陌生，但我已经应用了我以前的编程知识，以及互联网搜索让我走到了这一步。

我正在尝试逐步输入表单，其中逐页输入标准，并且仅在填写整个表单后才更新数据库。我计划在获得基本功能后进一步修饰表单。

截至目前，名称变量正在填充，但是在提交第二阶段后，它会循环回到输入的第一阶段，尽管 URL 更新到阶段 3，因此无法将信息解析到数据库中。

我正在使用 PHP v5，我已经看到使用 AJAX 解决了这个问题，但我没有在这种情况下使用它。

感谢您的时间和努力。

```
 <?php 

$stage = $_GET['stage'];

//Starting on form 1
$stage = 'one';

//get form details
$name = $_POST['name'];
$surname = $_POST['surname'];

/* ---- Checking if you submitted and if you were on form one THEN set the form the stage2 in order to display the next form ---- */
if (isset($_POST['submitStage1']) && $stage == 'one') {
$stage = 'two';
echo "checking sumbit from stage1";
}
if (isset($_POST['submitStage2']) && $stage == 'two') {
$stage = 'three';
echo "checking submit from stage2 going to 3";
} 

if (isset($_POST['submitStage3']) && $stage == 'three') {
    $stage = 'three';
echo "Adding to database";

}
?>

<?php 
if ($stage == 'one') {
echo $stage;
?>

<div style="width:100%; margin-bottom: 20px;"> Step_001</div>

<form method="post" action="addperson.php?stage=2">
<input name="name" type="text" />
<input name="submitStage1" type="submit" />
</form>

<?php
}
?>

<?php
if ($stage == 'two') {
echo $stage;
?> 

<div style="width:100%; margin-bottom: 20px;"> Step_002</div>

<form method="post" action="addperson.php?stage=3">

<input name="surname" type="text" />
<input name="submitStage2" type="submit" />

</form>

<?php
}
?>

<?php if ($stage == 'three') { echo $stage;

echo "Adding to database";

    $name = mysql_real_escape_string($_POST['name']);   $surname = mysql_real_escape_string($_POST['surname']);     

// Add this product into the database now   
$sql = mysql_query("INSERT INTO testpeople (name, surname) 
        VALUES('$name','$surname')") or die (mysql_error());

    exit(); } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:43:07.113

你有这个：

```
//Starting on form 1
$stage = 'one'; 
```

在您访问`$_GET`变量之后，这意味着它每次都会覆盖它。尝试将它放在 get 之前，它将作为默认值，注意不要用空白覆盖它`$_GET['stage']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:51:13.133

消除

```
$stage = 'one' ; 
```

代替

```
$stage = $_GET['stage']; 
```

和

```
$stage = isset($_GET['stage']) ? $_GET['stage'] : "one" ; 
```

谢谢

:)

# javascript - magento 中的默认 js 文件到底在哪里使用？

> ID：10012323
> 
> 赞同：0
> 
> 时间：2012-04-04T13:40:44.973
> 
> 标签：javascript, magento

Magento 默认包含所有的 js 文件。

```
<script type="text/javascript" src="js/prototype/prototype.js"></script>
<script type="text/javascript" src="js/lib/ccard.js"></script>
<script type="text/javascript" src="js/prototype/validation.js"></script>
<script type="text/javascript" src="js/scriptaculous/builder.js"></script>
<script type="text/javascript" src="js/scriptaculous/effects.js"></script>
<script type="text/javascript" src="js/scriptaculous/dragdrop.js"></script>
<script type="text/javascript" src="js/scriptaculous/controls.js"></script>
<script type="text/javascript" src="js/scriptaculous/slider.js"></script>
<script type="text/javascript" src="js/varien/js.js"></script>
<script type="text/javascript" src="js/varien/form.js"></script>
<script type="text/javascript" src="js/varien/menu.js"></script>
<script type="text/javascript" src="js/mage/translate.js"></script>
<script type="text/javascript" src="js/mage/cookies.js"></script> 
```

我想删除原型、脚本库并使用 jquery 代替它们。我如何知道这些库在哪里使用以及其余 js 文件的作用是什么。无论您的系统是否需要这些文件，都不需要包含这些文件。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:01:03.120

javascript文件通常有2个主要位置...

您上面提到的位于`[magento-root]/js`

里面有很多文件夹，里面存放着不同的 js 文件（比如`js/scriptaculous/*.js`）。

您的模板还可以包含自定义 js 文件..

它们通常位于`skin/frontend/[package]/[template]/js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T23:09:41.460

您可以通过 Layouts XML 添加/删除 JS 文件（以及 CSS 文件）。

大多数 JS 文件是通过 app/design/frontend/package_name/theme_name/layout/page.xml 加载的

```
 <block type="page/html_head" name="head" as="head">
            <action method="addJs"><script>prototype/prototype.js</script></action>
            <action method="addJs"><script>lib/ccard.js</script></action>
            <action method="addJs"><script>prototype/validation.js</script></action>
            <action method="addJs"><script>scriptaculous/builder.js</script></action>
            <action method="addJs"><script>scriptaculous/effects.js</script></action>
            <action method="addJs"><script>scriptaculous/dragdrop.js</script></action>
            <action method="addJs"><script>scriptaculous/controls.js</script></action>
            <action method="addJs"><script>scriptaculous/slider.js</script></action>
            <action method="addJs"><script>varien/js.js</script></action>
            <action method="addJs"><script>varien/form.js</script></action>
            <action method="addJs"><script>varien/menu.js</script></action>
            <action method="addJs"><script>mage/translate.js</script></action>
            <action method="addJs"><script>mage/cookies.js</script></action> 
```

此布局 page.xml 类似于将为大多数页面加载的默认布局。您可以在此处（在您自己的主题中）注释所需的行，或声明您的 jquery 文件。确保让您的 jquery 文件在专用文件夹中可用。

但是，如果您需要使这些 jquery 文件仅可用于一个（或某些）模块，则不应通过 page.xml 加载它，而应直接通过所需的模块布局加载。示例：如果您需要为“联系我们”页面删除/添加 CSS/JS 文件，那么您需要在 contacts.xml 中进行声明，否则您的文件将在您商店的几乎所有地方加载和/或删除。

最后，除非您制作了一个没有任何 javascript 的自定义主题*完整的 css* ，否则我认为没有理由删除原型和/或 scriptaculous 文件。关于 jquery，它可以很容易地添加到原型之上，但请确保正确配置它以避免这两个库之间的任何冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:08:01.003

如果您想知道 JS 的使用位置，请查看您的，或者如果您使用的是默认模板布局，那么默认模板布局......就像您给出的示例一样。但我建议您保留原型并为您需要的位添加 JQuery（因为许多管理功能等使用原型），并且在一起使用这两个库时可以解决“$”问题 [参见 http://docs .jquery.com/Using_jQuery_with_Other_Libraries]

# perl - 为什么要在退出时重构 Unicode (NFC)？

> ID：10012333
> 
> 赞同：8
> 
> 时间：2012-04-04T13:41:06.427
> 
> 标签：perl, unicode

TomC 建议在输入时分解 Unicode 字符，并在输出时重新组合 ( [http://www.perl.com/pub/2012/04/perl-unicode-cookbook-always-decompose-and-recompose.html](http://www.perl.com/pub/2012/04/perl-unicode-cookbook-always-decompose-and-recompose.html) )。

前者对我来说很有意义，但我不明白他为什么建议在出路时重新组合。如果您的文本中包含大量欧洲重音字符，您可能会节省少量空间，但您只是将其推向其他人的分解功能。

我失踪还有其他明显的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T16:35:54.253

正如文达苏在评论中所写，有软件可以处理组合字符，但不能处理分解字符。虽然理论上相反的情况也是可能的，但我在实践中从未见过它，并希望它很少见。

To just display a decomposed character, the rendering software needs to deal with combining diacritic marks. It does not suffice to find them in the font. The renderer needs to position the diacritic properly, using information about the dimensions of the base character. There are often problems with this, resulting in poor rendering—especially if the rendering uses the diacritic from a different font! The result can hardly be better than what is achieved by simply displaying the glyph of a precomposed character like “é”, designed by a typographer.

(Rendering software can also analyze the situation and effectively map the decomposed character to a precomposed character. But that would require extra code.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:30:31.150

这很简单：大多数工具对 Unicode 的支持有限；他们假设字符采用 NFC 形式。

例如，这通常是人们比较字符串的方式：

```
perl -CSDA -e"use utf8; if ($ARGV[0] eq "Éric") { ... }" 
```

当然，“É”是 NFC 形式的（因为这是几乎所有东西都会产生的），所以这个程序只接受 NFC 形式的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:01:48.090

它会使文本编辑器之类的东西变得更简单，因为最终用户会期望一个可见字符是一个字符而不是多个字符。它还可以防止不将分解字符视为“单个”字符的系统出现问题。

除此之外，我没有看到特别的优势。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:54:08.320

You should one normalization form so all the data have the same normalization, so why not choose the potentially shorter one?

As for someone else's decomposition, remember that you want to be strict with what you output but liberal with what you accept. :)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-04T16:36:47.113

Tom Christiansen is an active participant on StackOverflow and answers a lot of Perl questions. There's a good chance he'll answer this question.

Certain character sequences such as `ff` can be represented in UTF-8 as either two Unicode characters `f` and `f`, or as a single Unicode character (`ff`). When you *decompose* your characters, you're making things like `ff` become two separate characters which would be important for sorting. You want this to be two separate letter `f` when you sort.

When you recompose UTF-8 `f` and `f`, they go back to the single UTF-8 character which would be important for displaying (you want them to format nicely) and for editing (you want to edit it as a single character).

Unfortunately, my theory falls apart with things like the Spanish ñ. This is represented as U+00F1 as a single character, and decomposes into U+006E (n) and U+0303 (in-place ~). Maybe Perl has the logic built in to handle this type of two UTF-8 decompose character representation.

# android - 如何将对象的 ArrayList 从一个 Activity 传输到另一个

> ID：10012336
> 
> 赞同：0
> 
> 时间：2012-04-04T13:41:17.160
> 
> 标签：android, android-intent

我在一个活动中有一个对象的 ArrayList，我在另一个活动中需要这个 arrayList。

有没有办法转换这个 ArrayList？我知道我可以对字符串的 ArrayList 使用意图，但是对象的 ArrayList 是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:47:07.483

复杂类型通过另一种原始对象传递`Parcelable`或执行，您可以将其放入 Intent 的附加组件中。`serialization`看到这个问题：

[帮助传递 ArrayList 和 parcelable Activity](https://stackoverflow.com/questions/5819238/help-with-passing-arraylist-and-parcelable-activity)

和本教程：

[在活动之间传递对象列表](http://androidideasblog.blogspot.in/2010/02/passing-list-of-objects-between.html)

# c - 构建一个数组，其中每个元素都依赖于前一个元素

> ID：10012339
> 
> 赞同：1
> 
> 时间：2012-04-04T13:41:22.353
> 
> 标签：c, arrays

我正在构建一组数组，其中每个元素都依赖于前一个元素，我很难想出一个优雅的解决方案来设置初始值。代码看起来像这样：

```
int A[1024];
int B[1024];
/* ... more arrays... */
int i;
for (i = 0; i < 1024; i++) {
    /* do some work */
    A[i] = A[i-1] + some_value();
    B[i] = B[i-1] + some_other_value();
    /* ... and so on... */
} 
```

但是当为 0 时当然是无效的内存访问。`i`我知道所有数组的初始值都应该为 0。

有几种方法可以解决这个问题。`if`我可以在循环中放置一个巨大的语句来检查是否`i`为 0。看起来很笨重，因为它只会计算`true`一次。我可以为每个名为 的数组保留一个初始化为 0 的临时变量，以`prev_val_of_A`保存最后一次迭代的值。我必须在每次迭代结束时将其更新为当前值。这似乎有点傻，因为大多数时候，我想要的值就在数组的前一个元素中。我可以摆弄数组的含义，并采用数组中的*第二个*元素包含循环*第一次*迭代的值的约定；也就是说，分配 for `A[1025]`，初始化`A[0]`，然后在循环中，做

```
A[i+1] = A[i] + some_value(); 
```

这似乎令人困惑，并且可能会在进一步使用`A`.

我正在寻找干净、优雅的建议来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:45:15.167

解决这个问题的最简单方法是初始化`A[0]`等`B[0]`，然后从`i = 1`. IE

```
int A[1024];
int B[1024];
/* ... more arrays... */
int i;

A[0] = stuff();
B[0] = other_stuff();
/* etc */

for (i = 1; i < 1024; i++) {
    /* do some work */
    A[i] = A[i-1] + some_value();
    B[i] = B[i-1] + some_other_value();
    /* ... and so on... */
} 
```

编辑：这是相当优雅的，因为它反映了数学：序列通常由 定义`f(0) = x`，`f(n) = <stuff with f(n-1)>`如果 n > 0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:46:04.850

以下情况如何：

```
int AX[1024+1];
int BX[1024+1];
int *A = AX+1, *B = BX+1;
AX[0] = 0;
BX[0] = 0;

/* ... more arrays... */
int i;
for (i = 0; i < 1024; i++) {
    /* do some work */
    A[i] = A[i-1] + some_value();
    B[i] = B[i-1] + some_other_value();
    /* ... and so on... */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:46:19.057

从概念上讲，您的数组被定义为初始值和递归关系。所以只需在循环外初始化你的第一个元素，然后用循环计算下一个值。我不明白为什么它会不漂亮。

# silverlight - Windows Phone 7 的特定布局

> ID：10012342
> 
> 赞同：0
> 
> 时间：2012-04-04T13:41:43.007
> 
> 标签：silverlight, windows-phone-7, layout

我想在 Silverlight 中创建这个布局。文字需要环绕图片： ![在此处输入图像描述](../Images/17dbd50f9927a28c75c617e1fb266998.png)

我找到的最接近的解决方案是，但这并不是我想要的。

```
<StackPanel Margin="0,0,0,20">
    <TextBlock Text="{Binding Title}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
    <StackPanel Orientation="Horizontal" >
        <Image Source="{Binding Img}" MaxWidth="100" />
        <TextBlock Text="{Binding Desc}" TextWrapping="Wrap" Margin="0,10,0,5" Style="{StaticResource PhoneTextSubtleStyle}"/>
    </StackPanel>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:49:08.123

我能想到的最好的方法是使用网格

```
<Grid >
    <Grid.RowDefinitions>
       <RowDefinition Height="40" />
       <RowDefinition Height="40" />
       <RowDefinition Height="40" />
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200" />
        <ColumnDefinition Width="200" />
    </Grid.ColumnDefinitions>

    <TextBlock Text="Title" Grid.Row="0" Grid.ColumnSpan="2" HorizontalAlignment="Center" />

    <TextBlock Text="Image" Grid.Row="1" Grid.Column="0" />
    <TextBlock Text="Description" TextWrapping="Wrap" Grid.Row="1" Grid.Column="1" Grid.RowSpan="2" />
</Grid> 
```

另一个建议是使用[RichTextBox](http://www.windowsphonegeek.com/articles/Windows-Phone-7-Mango-First-look-at-RichTextBox-control)。我使用的结果还不错

```
<RichTextBox  Width="400" Height="400" FontSize="40">
    <Paragraph>
        <InlineUIContainer >
           <Image Source="/image.png" Width="100" Height="200" />
         </InlineUIContainer>
        <Run Text="A simple RichTextBox with Image: " />
        <Italic Foreground="YellowGreen">Some Italic Text Here!</Italic>
     </Paragraph>
</RichTextBox> 
```

# c++ - std::make_shared 构造函数中的参数数量

> ID：10012345
> 
> 赞同：11
> 
> 时间：2012-04-04T13:41:50.260
> 
> 标签：c++, stl, make-shared

在 Visual Studio 2010/2011 中没有可变参数模板（仍然！）的情况下，采用大量参数的构造函数可能会出现问题。例如以下将无法编译：

```
 MyMaterials.push_back(std::make_shared<Material>(MyFacade,
                                                     name,
                                                     ambient,
                                                     diffuse,
                                                     specular,
                                                     emissive,
                                                     opacity,
                                                     shininess,
                                                     shininessStrength,
                                                     reflectivity,
                                                     bumpScaling,
                                                     maps,
                                                     mapFlags)); 
```

，因为它有 13 个参数，我认为 make_shared 限制在 arg0 到 arg9。显而易见的解决方法是两部分构造，但我希望避免这种情况。*除了使用new*而不是 make_shared之外，这里还有其他可能性吗？

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-04T13:50:55.440

您可以使用构造一个类，然后将其移动到堆分配的值中。

```
MyMaterials.push_back(std::make_shared<Material>(
    Material(MyFacade, name, ambient, diffuse, specular, 
             emissive, opacity, shininess, shininessStrength, 
             reflectivity, bumpScaling, maps, mapFlags))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:56:10.177

您可以创建一个包含所有相关成员的“输入结构”。
用正确的值填充它并用它作为他唯一的参数调用构造函数。

# java - JSF 和 JSP 在客户端有何不同？

> ID：10012349
> 
> 赞同：2
> 
> 时间：2012-04-04T13:42:06.690
> 
> 标签：java, jsp, jsf

> **可能的重复：**
> [JSF 需要什么。什么时候可以从css html javascript jQuery 实现UI？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery)

我是第一次学习 JSF，只是没有看到与 JSP 的内在区别，除了（也许）更清晰地分离表示和业务逻辑。

我对JSF的*理解：*

*   客户端请求一个 JSF 页面
*   （`FacesServlet`JSF 附带）将请求路由到自定义（由开发人员编写）JSF 控制器
*   JSF 控制器知道使用哪些模型/视图/bean 来处理请求
*   JSF 页面`.jsf`（

我对JSP的*理解：*

*   客户端请求一个 JSP 页面
*   web.xml 将请求路由到正确的控制器/处理程序
*   `.jsp`控制器/处理程序确定在响应中使用哪个 JSP 文件 ( )
*   此 JSP 文件包含 HTML、CSS、JS 和特殊 JSP 标记的混合体，这些标记会被询问并最终生成 HTML/CSS/JS 以发送回客户端浏览器

在这两种情况下，您最终都会以标签库的形式混合客户端（HTML、CSS、JS）和 Java 代码。

*   **JSF 如何对 JSP 进行改进**？
*   **JSF 生命周期与 JSP 有何不同（真的！）**？

提前致谢！

# javascript - 向rails控制器发送ajax请求后如何关闭弹出窗口而不重新加载父级

> ID：10012351
> 
> 赞同：1
> 
> 时间：2012-04-04T13:42:31.747
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, popup

我在控制器的显示视图中，如果用户单击链接，则会显示一个带有表单的弹出窗口。如果用户单击“提交”，表单将通过 ajax 提交到同一控制器中的自定义“操作”。在 action.js.erb 部分中，我有以下代码：

```
 window.opener.location.reload();
  window.close(); 
```

它工作正常，但整个显示视图页面被重新加载。而且我只想将焦点重新放在 js.erb 部分中并编写一些 div 更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:54:39.620

不要从 helper 调用，而是在 Ajax 的 onsuccess 事件上关闭窗口。

```
success: function(g) {
  window.close(); OR $('#popup_id').hide();
  $('#div_id').html("Write message or other response form your action").
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:50:25.643

完成后使用 jquery 隐藏它。

```
$('#popup_wrapper_id').fadeOut(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T11:38:21.573

在关联的 action.js.erb 文件中，添加以下代码。

```
function hideDialog() {
  var $dialog = $('#dialog_area');
  if ($dialog.is(':visible')) {  
    PageOverlay.hide();      
    $dialog.hide();
  }
  return this;
}; 
```

# mysql - 我可以将图片加载到 mySQL 服务器端吗？

> ID：10012355
> 
> 赞同：0
> 
> 时间：2012-04-04T13:42:45.863
> 
> 标签：mysql, image

我需要创建一个带有图像字段的简单 mySQL 数据库。

有没有一个简单的例子来解释字段的类型以及如何从服务器上的目录上传等等......？

谢谢。

埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:45:59.297

有两种方法（至少）将图像存储在数据库中：-

1.  在文件系统上存储对文件的引用
2.  将它们作为二进制数据存储在数据库中

存储在数据库中的二进制数据称为 BLOBS（二进制大对象），您可以在此处阅读更多信息：-

[http://dev.mysql.com/doc/refman/5.0/en/blob.html](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:49:11.090

您可以使用[LOAD_FILE](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_load-file)函数将文件内容作为字符串返回，例如 -

```
INSERT INTO table_name VALUES (LOAD_FILE('img.png')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:49:37.890

这是 BLOB 存储的基本示例：

```
CREATE TABLE IF NOT EXISTS `files` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `filename` varchar(255) DEFAULT NULL,
  `ext` varchar(5) DEFAULT NULL,
  `filedata` blob,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0 ;

<?php
$db = mysql_connect('localhost', 'user', 'pass') or die('Could not connect:' . mysql_error());
mysql_select_db('the_database',$db);

if(isset($_FILES['upload'])){

    if (is_uploaded_file($_FILES['upload']['tmp_name'])) {
        $file_parts = pathinfo($_FILES['upload']['name']);

        $file['name'] =$file_parts['filename'];
        $file['ext']  =$file_parts['extension'];
        $file['data'] =addslashes(file_get_contents($_FILES['upload']['tmp_name'])); 

        mysql_query('INSERT into files (id,filename,ext,filedata) values ("","'.$file['name'].'","'.$file['ext'].'","'.$file['data'].'")',$db) or die(mysql_error());
        $notice="File Uploaded successfully";
    }
}
?>

<html>
<head>
<title>BLOB Upload</title>
</head>
<body>

<form method="POST" enctype="multipart/form-data" action="">
<h1 align="center">BLOB Upload</h1>
  <p align="center"><input type="file" name="upload" size="40"></p>
  <p align="center"><input type="submit" value="Upload"></p>
  <?php if(isset($notice)){echo '<p align="center">'.$notice.'</p>';}?>
</form>

</body>

</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:48:28.327

使用 fwrite 或 php GD 库将图像放在文件夹中。

然后将图像路径保存在数据库中，可能还有其他信息，例如大小、宽度、高度、名称等，以便能够过滤/排序它们。

# php - 通过 javascript 设置文件大小

> ID：10012359
> 
> 赞同：1
> 
> 时间：2012-04-04T13:43:01.530
> 
> 标签：php, javascript, html, upload

我想在客户端使用javascript检查用户选择的文件的文件大小。我为此使用的代码是：

```
<script type="text/javascript">
 var myFile = document.getElementById('myfile');

  //binds to onchange event of the input field
  myFile.addEventListener('change', function() {
  //this.files[0].size gets the size of your file.
   alert(this.files[0].size);

   });
 </script> 
```

但是当我运行代码时，选择一个文件，什么都没有发生。任何人都告诉我我做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:51:37.790

[您的代码运行良好](http://jsfiddle.net/Pointy/Z3CLu/) （在带有 File API 的 HTML5 浏览器中）。确保你的块`<script>`在**元素之后**`<input>`。在那个 jsfiddle 中，它位于“加载”处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:46:32.723

您无法使用 javascript 获取文件大小。浏览器中的安全性可防止 Javascript 访问文件系统。我相信您需要使用 Flash、ActiveX 或能够被授予权限的东西来执行此操作。

编辑：如果您使用的是 HTML5 File API，那么我想您可以做到这一点 - 但由于您没有在任何地方表明我不认为是这种情况。我会将 HTML 作为标签放在您的帖子上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:55:13.953

使用 jquery 为我工作：

[http://jsfiddle.net/UUdcy/](http://jsfiddle.net/UUdcy/)

```
$('#myfile').change( function() {
    var fileInput = $("#myfile")[0];
    var imgbytes = fileInput.files[0].fileSize; // Size returned in bytes.
    $('body').append('<p>'+imgbytes+'</p>');
});​ 
```

# c# - 在 VS2010 C# 解决方案中查找缺失引用的更简单方法

> ID：10012364
> 
> 赞同：2
> 
> 时间：2012-04-04T13:43:24.863
> 
> 标签：c#, visual-studio, visual-studio-2010

我刚刚使用 Visual Studio 2010 从 TFS 打开了一个解决方案。该解决方案包含 100 多个项目（如果由我决定，它可能会少于 5 个），其中许多项目碰巧错过了一个引用（对 Unity dll 的）。

有什么方法可以简化这些参考的固定吗？现在我必须手动删除并重新添加它们。麻烦。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:54:25.183

要解决此问题，您需要找出它尝试加载文件的位置。您可以在项目 csproj 文件中执行此操作。您要么安装了更新（或不同）版本的程序集，要么拥有不同的文件和文件夹结构。您需要重新创建已在该项目中使用的文件和文件夹结构，或将 csproj 文件重写到新位置。

将来，您可能希望更改处理 3rd 方引用的方式。我使用这种方法有很好的经验：定义一个 ThirdPartyLibraries 文件夹，所有这些库都在其中检查并签入。它应该在解决方案文件夹中。从现在开始，每个人都必须将第 3 方库放在那里并使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:49:28.923

可能想查看 resharper，它可能会做您需要的参考。我知道它有助于优化和识别类中的引用，在项目级别不确定。Resharper 有 30 天的试用期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:52:05.593

您可以将所有这些二进制文件添加到 Binaries 文件夹并添加到您的 TFS。

现在将二进制文件作为现有项目添加到您的解决方案项目中，这样当您打开解决方案时，它也会获取所有解决方案项目。

确保从二进制文件夹添加引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:52:48.023

如果引用程序集的位置已更改，则在 .csproj 文件中的文件中执行查找和替换以将损坏的引用替换为正确的引用相对简单。

# android - android：尝试创建多个按钮然后删除它们

> ID：10012367
> 
> 赞同：0
> 
> 时间：2012-04-04T13:43:41.877
> 
> 标签：android

我认为我的代码可能写错了，这导致了我的问题。基本上我正在尝试创建多个“程序”按钮（这些按钮由相对视图、线性视图、2 个文本视图、2 个按钮组成）。你可以看到下面的代码。我在 XML 中创建了这个结构，当我想要将新程序添加到应用程序时，我正在扩展该 XML。然后，我根据数据库唯一 ID 添加 ID，并将其分配给此按钮的所有创建视图。

它似乎工作正常，用于单击按钮等。问题是当我试图销毁一个按钮时，我的应用程序不断崩溃。现在我开始怀疑我选择的方法是否存在根本错误。

```
 public void buildprogramholders(String rowID, String title_text, String description_text) {

        int dbRowID = Integer.parseInt(rowID);

        totalTid++;

        LinearLayout ll = (LinearLayout)findViewById(R.id.traininglist);

        LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.trainingprogram, ll);

        tp_container = new RelativeLayout(this);
        tp_container = (RelativeLayout) findViewById(R.id.tp_container);
        tp_container.setId(dbRowID);

        tp_icon = new ImageView(this);
        tp_icon = (ImageView) findViewById(R.id.tp_icon);
        tp_icon.setId(dbRowID);

        tp_textholder = new LinearLayout(this);
        tp_textholder = (LinearLayout)findViewById(R.id.tp_textholder);
        tp_textholder.setId(dbRowID);

        //tp_title = new TextView(this);
        tp_title = (TextView)findViewById(R.id.tp_title);
        tp_title.setId(dbRowID);
        tp_title.setText(title_text);

        tp_description = new TextView(this);
        tp_description = (TextView)findViewById(R.id.tp_description);
        tp_description.setId(dbRowID);
        tp_description.setText(description_text);

        tp_button = new Button(this);
        tp_button = (Button)findViewById(R.id.tp_button);
        tp_button.setId(dbRowID);
        tp_button.setTag(3);
        tp_button.setOnClickListener(this);

        tp_delete_button = new Button(this);
        tp_delete_button = (Button)findViewById(R.id.tp_delete_button);
        tp_delete_button.setId(dbRowID);
        tp_delete_button.setTag(6);
        tp_delete_button.setOnClickListener(this);

    } 
```

然后在 OnClick 我尝试删除该程序。我尝试注释掉整个 drop_tp_xx.setVisibitly(View.gone) 区域并且程序有效。如果我从那里恢复任何单行，我的程序就会变得不可靠。有时我可以删除一两个，然后它崩溃了？

```
 public void onClick(View v) {
int rowId = v.getId();
                    RelativeLayout  drop_tp_container   = (RelativeLayout) tp_container.findViewById(rowId);            
                    ImageView       drop_tp_icon        = (ImageView) tp_icon.findViewById(rowId);
                    LinearLayout    drop_tp_textholder  = (LinearLayout) tp_textholder.findViewById(rowId);
                    TextView        drop_tp_title       = (TextView) tp_title.findViewById(rowId);
                    TextView        drop_tp_description = (TextView) tp_description.findViewById(rowId);
                    Button          drop_tp_button      = (Button) tp_button.findViewById(rowId);
                    Button          drop_tp_delete_button = (Button) tp_delete_button.findViewById(rowId);

                    drop_tp_container.removeAllViews();
                    drop_tp_delete_button.setClickable(false);
                    drop_tp_button.setClickable(false);     
                    drop_tp_title.setVisibility(View.GONE);
                    drop_tp_description.setVisibility(View.GONE);
                    drop_tp_delete_button.setVisibility(View.GONE);
                    drop_tp_textholder.setVisibility(View.GONE);
                    drop_tp_icon.setVisibility(View.GONE);
                    drop_tp_button.setVisibility(View.GONE);
                    drop_tp_container.setVisibility(View.GONE);

    } 
```

错误转储文本

```
04-04 14:20:06.145: E/AndroidRuntime(17242): java.lang.NullPointerException
04-04 14:20:06.145: E/AndroidRuntime(17242):    at com.mediabarltd.digittrainer.HomePage.onClick(HomePage.java:153)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at android.view.View.performClick(View.java:2538)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at android.view.View$PerformClick.run(View.java:9152)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at android.os.Handler.handleCallback(Handler.java:587)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at android.os.Looper.loop(Looper.java:130)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at android.app.ActivityThread.main(ActivityThread.java:3691)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at java.lang.reflect.Method.invoke(Method.java:507)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-04 14:20:06.145: E/AndroidRuntime(17242):    at dalvik.system.NativeStart.main(Native Method) 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:51:10.543

您正在尝试访问 onClick 方法中第 153 行不存在的引用。

你没有给出行号，所以我无法告诉你代码中的哪一行，但尝试在该行上设置一个断点，看看为什么引用为空。

更新：

您错误地使用了 findViewById。

您应该使用`rootlayout.findViewById(ID)`where rootlayout 是父布局。您当前正在尝试从其内部访问该按钮，这是您的空引用的来源。

# wcf - 如何从 WCF 数据协定对象中获取数据到消息头中

> ID：10012368
> 
> 赞同：0
> 
> 时间：2012-04-04T13:43:47.283
> 
> 标签：wcf, soap, datacontract, servicebehavior

我服务中的所有数据合同对象都继承自 BaseMessage...

```
[DataContract(Name = "BaseMessage", Namespace = "http://www..."]
public class BaseMessage
{
    [DataMember]
    public Guid MessageId { get; set; }
} 
```

我熟悉使用 Message Inspectors 查看通过网络传输的实际 SOAP 有效负载。但是，我想要做的是以某种方式连接到消息管道以执行以下操作：

1.  查看传入消息并从中读出 MessageId 字段，最好不要搜索整个字符串消息对象以查找字符串匹配 - 除非有快速的方法来执行此操作。

2.  从消息中提取 MessageId，以便在包含 MessageId 的消息内创建一个标头。同样，我真的不想在整个消息中搜索字符串匹配。

我熟悉使用 IClientMessageInspector 和 IDispatchMessageInspector 查看消息，但我认为在管道中的这一点上，我无法访问实际对象来访问其字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:49:56.747

如果要确定消息正文中的成员与其标头中的成员，则需要消息协定。

# database - 如何区分 DIT UAT SIT 和 PROD 一般项目结构中的数据库数据源属性（Spring 框架）

> ID：10012369
> 
> 赞同：0
> 
> 时间：2012-04-04T13:43:47.877
> 
> 标签：database, jakarta-ee, spring-mvc

如何区分 DIT UAT SIT 和 prod 一般或 spring 框架的项目结构中的数据源属性。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:48:29.090

我们目前使用 Maven 作为我们的构建和配置工具。我们在 Maven 配置文件中保留环境特定的属性，例如数据库 URL、用户名、密码等。Maven 资源过滤应用于 Spring 配置文件以注入特定于环境的属性。

过去，当我使用 Ant 构建应用程序时，我曾经将特定于环境的属性存储在单独的属性文件中。然后，应用 Ant 令牌替换来注入特定于环境的属性。

# django - Django-nonrel 的 OAuth 包

> ID：10012370
> 
> 赞同：1
> 
> 时间：2012-04-04T13:43:49.907
> 
> 标签：django, oauth, oauth-2.0, django-authentication, django-nonrel

谁能帮我找到一个可以与 Django-nonrel 一起使用的 OAuth 包（1.0 或 2.0）？

oauth2app 非常好，但是它使用：scope = models.ManyToManyField(AccessRange)，所以它不能与 Django-nonrel 一起使用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:19:06.917

我目前正在使用 django-social-auth 和 django-nonrel。

[https://github.com/omab/django-social-auth#oauth](https://github.com/omab/django-social-auth#oauth)

但我只使用了 FB 后端。它似乎工作正常，不使用多对多。还有一个 OAuth 后端，但我没有尝试过，我不确定它是否使用 ManyToMany。

# facebook - 使用 Graph API 重新创建 Facebook 评论框或直播？

> ID：10012371
> 
> 赞同：3
> 
> 时间：2012-04-04T13:43:50.497
> 
> 标签：facebook, facebook-graph-api, facebook-comments

一直在寻找关于这个主题的有形的东西。

基本问题是：该网站是完全响应的，但它的数百个 Facebook 社交插件都没有。这意味着当网站放大或缩小以适应和给定浏览器大小时，所有 facebook 小部件都保持固定，从而打破网格。

因此，显而易见的解决方案是不使用任何 facebook 的预制小部件进行实时聊天（Live Stream 插件）或评论（评论插件），而是构建我们自己的小部件并使其具有响应性。但。我找不到任何关于是否可以使用 Graph API 重新创建例如 facebook 评论插件的信息。理想情况下，我想要与预制小部件中已经存在的功能相同的功能。

任何可以引导我走向正确方向的信息都将不胜感激！

最好的弗雷德里克

# objective-c - 获取 UITableView 页眉/页脚

> ID：10012374
> 
> 赞同：0
> 
> 时间：2012-04-04T13:44:00.560
> 
> 标签：objective-c, uitableview

好的，所以我有这个问题，我需要访问 UITableView 中显示的页眉/页脚。此外，我需要从 UITableView 的子类执行此操作（因此我不能简单地将标签从 UITableView 委托分配给视图）。UITableView 确实保留了一组可见的页眉和页脚，但它甚至无法访问这些数组，即使是子类，我个人认为这是愚蠢的。

我需要这个，以便我可以提供自定义拖放插入/移动用户界面。我试图让它几乎像 Apple 自己的重新排列界面一样工作，但当然，使用我自己的自定义实现（比如从另一个表中拖动的能力）。除了页眉/页脚外，一切都完美无缺。

目前我正试图通过遍历 UITableView 的所有子视图来破解它。我很确定 UITableView 的唯一子视图是：backgroundView、UITableViewCells 和页眉/页脚。所以我只需要确定哪些是 UITableViewCells（很容易），哪些是背景视图（也很容易），哪些是页眉/页脚（不太容易）。我很确定我可以这样做，但这绝对是一种技巧，如果可能的话，我宁愿找到更好的方法。

***更新***

我正在重写该`- (void) setDelegate:(id<UITableViewDelegate>)delegate`方法并检查委托是否响应适当的选择器以生成页眉/页脚（并适当地设置 BOOL）。这使得确定特定子视图是什么变得容易得多，因为页眉 -> 单元格 -> 页脚的进程是可预测的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:57:18.603

你说你不能使用 UITableView 委托方法，但是你有没有考虑让 UITableView 子类对象成为它自己的委托？在名为 realDelegate 的子类上创建一个单独的属性，并将任何其他委托调用传递给它。

# vmware - 无法连接到虚拟机控制台

> ID：10012384
> 
> 赞同：0
> 
> 时间：2012-04-04T13:44:35.597
> 
> 标签：vmware, vsphere

我有一个从 linux 映像创建的虚拟机（并打开电源）。我希望能够在 VCenter 中访问其控制台，但现在我收到此错误：

```
"A secure connection to the host could not be established" 
```

控制台是黑屏，上面什么都没有，也没有交互。VSphere 中的任何虚拟机都会发生这种情况。奇怪的是，我可以远程登录到控制台端口 902，但似乎没有任何尝试连接到控制台（在任务管理器中检查 tcp/ip 流量）。

SSH 登录是不可能的，因为我希望控制台访问开始的原因是运行命令来设置这台机器的 IP 地址。

一些事实：打开外部控制台窗口什么都不做（同样的错误）。我正在运行 Windows XP Professional（如果重要，可以使用 VirtualBox）。我的同事使用完全相同的设置（相同版本的 XP，相同版本的 VCenter）可以很好地连接到控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:33:11.273

直接连接到 ESX/ESXi 时是否会出现此问题？如果不是，您在 esx 和 vCenter 之间有连接问题。

您可以在此处找到常用端口列表： http: [//kb.vmware.com/selfservice/microsites/search.do](http://kb.vmware.com/selfservice/microsites/search.do?cmd=displayKC&docType=kc&externalId=1012382&sliceId=1&docTypeID=DT_KB_1_1&dialogID=312218113&stateId=1%200%20312216906#vCenter) ?cmd=displayKC&docType=kc&externalId=1012382&sliceId=1&docTypeID=DT_KB_1_1&dialogID=312218113&stateId=1%200%20312216906#vCenter 4 。X

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:51:27.503

事实证明，在连接到 vCenter 时，我需要使用 https 而不是 http。男孩，你好，我现在觉得自己很聪明。

# c++ - 不需要的多个模板类通过多个 DLL 实例化

> ID：10012385
> 
> 赞同：1
> 
> 时间：2012-04-04T13:44:47.343
> 
> 标签：c++, templates

我有`SystemType`一个类模板，它应该为每个系统提供唯一的 id。

```
//.h file:
extern atomic_counter MY_API s_nextSystemTypeId;

template <typename T>
class SystemType 
{
public:
    static unsigned getId();

private:
    static unsigned next();
};

template <typename T>
unsigned SystemType<T>::getId()
{
    static unsigned sysId = SystemType<T>::next();
    return sysId;
}

template <typename T>
unsigned SystemType<T>::next()
{
    return s_nextSystemTypeId++;
} 
```

.

```
//.cpp file

atomic_counter s_nextSystemTypeId(0); 
```

但是当它通过多个 DLL 使用时，此代码不起作用。在一个 dll 中：

```
SystemType<System1>::getId(); // = 0
SystemType<System2>::getId(); // = 1
SystemType<System1>::getId(); // = 0 
```

但是在其他 dll 中使用时

```
SystemType<System1>::getId(); // = 2
SystemType<System2>::getId(); // = 3
SystemType<System1>::getId(); // = 2 
```

如何只强制实例化一个模板类？

# xpath - Xpath：具有 1 个兄弟和一个...表亲的元素定位器的稳健路径？

> ID：10012387
> 
> 赞同：0
> 
> 时间：2012-04-04T13:44:48.717
> 
> 标签：xpath

这是代码：

```
<li>
    <a>
        <h1>Quorn Stuk­jes</h1>
        <p class="price">
    </a>
    <form>
        <button type="submit">+</button>
    </form>
</li> 
```

我想创建一个定位器，它可以找到第一个具有属性“价格”`<h1>`的兄弟元素的定位器。`<p>`到目前为止很容易。但现在我也希望它与属性类型为“提交”`<h1>`的类共享它的祖父母。`<button>`

我创建的是以下内容：

```
//a/p[@class="price"]/preceding-sibling::p/preceding-sibling::h1 
```

我想知道这是否是最明智的解决方案（它确实有效），或者是否有更优雅和强大的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:27:34.420

`(//*[form/button[@type = 'submit']]/*[p[@class = 'price']]/h1)[1]`应该这样做（假设提交按钮仅在表单父元素中才有意义）。

# jquery - Ajax 验证码验证

> ID：10012388
> 
> 赞同：2
> 
> 时间：2012-04-04T13:44:53.787
> 
> 标签：jquery, ajax, forms, security, captcha

通过 ajax 验证 CAPTCHA 是否合理（或安全）？我想放置一个注册表单而无需重新加载任何页面。它安全吗？（我正在使用验证 [1] 和表单插件）

[1] [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:51:58.277

你不能依赖 JavaScript 来保护任何东西。您可以将其用作首次通过，但您仍然需要在服务器上进行验证码验证（看起来您正计划这样做）。例如，请参阅： http: [//www.howtocreate.co.uk/tutorials/javascript/security](http://www.howtocreate.co.uk/tutorials/javascript/security)

我对完整的 AJAX 解决方案（无页面重新加载）的担忧是，即使验证码无效，用户也有可能绕过 POST-back 的返回值并继续运行。但是您可以跟踪服务器会话中的任何验证码失败，并在您的注册表单末尾仔细检查结果，因为最终一切都将在服务器端完成。如果验证码永远无效，那么无论您从该客户收到的任何其他数据如何，您都必须拒绝注册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T23:51:39.400

一个合理的实现方式如下：

1）当请求表单页面时，生成一个特定于会话的服务器端密钥。

2）当用户按下“提交”时，使用 AJAX 调用将用户输入的验证码文本发送到服务器。

3) 服务器检查用户提交的值。如果与验证码中的文本相同，则返回步骤 1 中生成的服务器端密钥。

4) 浏览器现在具有服务器端密钥。表单提交时，检查浏览器指定的服务器端密钥是否与步骤1中生成的服务器端密钥匹配。如果是，则用户必须通过验证码，因此处理请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T14:31:58.170

是的，它可以使用 php 和 ajax 来完成，但是每次验证码加载该重新加载按钮时，您都需要清除缓存。这是一个完美的例子.. [http://www.thetutlage.com/demo/captcha/](http://www.thetutlage.com/demo/captcha/)

编辑 | 我还找到了文章链接[http://www.thetutlage.com/post=TUT120](http://www.thetutlage.com/post=TUT120)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T13:46:41.680

即使您使用 AJAX，它仍然是服务器端的，因为您调用服务器来验证它。

# eclipse - 在我的 Eclipse 插件编辑器中实现页面滚动（如 Acrobato Reader 中的手动工具）

> ID：10012389
> 
> 赞同：0
> 
> 时间：2012-04-04T13:44:59.373
> 
> 标签：eclipse, plugins, interaction

我正在开发一个 Eclipse 插件编辑器，它有一个 Flyout Palette，里面有几个工具（比如选择等等）。

我想知道如何添加一个特殊工具（我们称之为“手动工具”），它以与 Acrobat Reader 的“手动工具”滚动 PDF 文档页面相同的方式滚动页面。

我正在谷歌上搜索如何解决这个问题的一些想法，但到目前为止没有成功。你能给我一些提示吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:46:17.160

我假设您正在使用 GEF？我的回答可能微不足道，但我正在尝试提出一些想法。

`org.eclipse.draw2d.Viewport`类有一对`getViewLocation()`/方法`setViewLocation()`。似乎使用它们您可以根据需要滚动视图。

现在你需要一个工具。探索`org.eclipse.gef.tools.AbstractTool`后代的层次结构以查找所需行为的一些示例并为您的功能创建自己的工具类。

# sql-server-2008-r2 - group by 子句中的计算列

> ID：10012391
> 
> 赞同：0
> 
> 时间：2012-04-04T13:45:06.163
> 
> 标签：sql-server-2008-r2

我有一个计算列，但不知道如何将列添加到组中

IE

```
SELECT Category, SUM(Actjan + Actfeb + Actmar) AS Q, 'Q1' as quater
FROM tbl 
GROUP BY Category, 'Q1' as quater 
```

这是在 SQL Server 2008 R2 上 - 错误是

> 每个 GROUP BY 表达式必须至少包含一个不是外部引用的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:57:03.547

您不需要按常量分组（您发布的示例不是计算列）。以下应该完全按照要求工作。

```
SELECT  Category,SUM(Actjan + Actfeb + Actmar) AS Q,'Q1' as quater
FROM tbl 
GROUP BY  Category 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:52:45.203

尝试使用列的值

```
...
GROUP BY Category, 'Q1' 
```

# ajax - 如何在 Codeigniter 中捕获参数 ajax？

> ID：10012392
> 
> 赞同：0
> 
> 时间：2012-04-04T13:45:15.333
> 
> 标签：ajax, codeigniter, get, xmlhttprequest

我第一次在 CodeIgniter 中尝试了 AJAX。这一切都成功了，直到我发现我没有检索任何设置的参数。请你能告诉我哪里出错了吗？

先谢谢了！

查看： http: [//pastie.org/3727011](http://pastie.org/3727011)

控制器： http: [//pastie.org/3727014](http://pastie.org/3727014)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:33:23.403

尝试

```
xmlhttp.open("GET", "ajaxcontrolleur", true);
xmlhttp.send("q="+str); 
```

# c# - 如何在不设置最大缓冲区大小的情况下在 wcf 中获取大量数据

> ID：10012395
> 
> 赞同：0
> 
> 时间：2012-04-04T13:45:21.990
> 
> 标签：c#, wcf

我有一个关于 wcf 的问题 - 我想使用 wcf 服务获取大量数据，但我不想更改配置文件。

例如 - 如果数据超过 buffersize 或 maxReceivedMessageSize 我想将其拆分成包并一一发送。在客户端，我想获取所有包并重新创建最终响应。

有可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:11:17.453

我认为 WCF 中没有对此的内置支持。您必须想出自己的方法来在服务器端拆分数据并在客户端将其组合。而且您必须拨打多次电话才能传输所有数据。无论如何，这可能是一个好主意，因为如果您传输大量数据，您可能希望显示进度条或其他内容。

更新：经过一番谷歌搜索后，我发现[了这个](http://msdn.microsoft.com/en-us/library/aa717050.aspx)。本质上，您可以创建自定义频道来为您进行分块。不过，我可能会在应用程序级别而不是通道级别实现分块。

# scala - 访问外部的 Akka 演员

> ID：10012396
> 
> 赞同：0
> 
> 时间：2012-04-04T13:45:22.087
> 
> 标签：scala, servlet-filters, akka

我采用*Akka 2.0*并想在我的 Web 应用程序中使用它。为此，我创建`Filter`了运行`ActorSystem`过滤器初始化。

过滤器加载，启动 Akka 内核`Bootable`实现。

现在我创建了一个 Actor（用于用户身份验证）并希望在我的 akka 过滤器范围之外的应用程序的其他部分向它发送消息。有什么方法可以做到这一点（我看到只做一些`object`来保存系统`val`）？也许我以这种方式使用 Akka 的逻辑是错误的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T15:58:13.797

使用[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)创建和销毁 ActorSystem 并将其设置为 ServletContext 上的[属性](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#setAttribute%28java.lang.String,%20java.lang.Object%29)（制作一个小外观来获取它并设置它？）然后只需从过滤器中的 ServletContext 获取它。

# java - 如何使用 Jsoup 将数据发布到网站

> ID：10012399
> 
> 赞同：27
> 
> 时间：2012-04-04T13:45:35.707
> 
> 标签：java, post, jsoup

我正在尝试将数据发布到网站以使用 Jsoup 登录网站，但它不起作用？

我正在尝试代码

```
 Document docs = Jsoup.connect("http://some.com/login")
        .data("cmd", "login","username", "xxxx","password", "yyyyy")
        .referrer("http://some.com/login/").post(); 
```

在这里，它在 pagesource 中提供了正常的登录页面

我也试过代码

```
 Document docs = (Document) Jsoup.connect("http://some.com/login")
    .data("cmd", "login","username", "xxxx","password", "yyyyy")
    .referrer("http://some.com/login/").method(Method.POST).execute().parse(); 
```

这里也在pagesource中再次给出正常的登录页面。

任何有关相同的建议将不胜感激！

谢谢....

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-04T14:16:12.690

我将通过一个例子来回答你的问题。假设您要登录 facebook。

然后除了用户名和密码之外，还有许多其他参数也通过`POST`请求传递。这些所有参数都是隐藏的，并且像用户名和密码一样传递。例如 ：

如果你打开`html source`facebook，你可以看到有一个隐藏的参数是`lgnrnd`，它的值是`071129_5D7M`。

所以还有很多其他类似的参数。你需要传递所有的参数。您还应该指定`userAgent.`

```
Document doc = Jsoup.connect("http://www.facebook.com")
.data("email", "myemailid")
.data("pass", "mypassword")
// and other hidden fields which are being passed in post request.
.userAgent("Mozilla")
.post();
System.out.println(doc); // will print html source of homepage of facebook. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T17:06:00.123

如果问题是 javascript 重定向，您可以尝试进入 javascript 并检查它重定向到的 URL 是否是静态的，然后使用重定向来获得访问权限。我这样做是为了访问一次由 javascript 制作的弹出框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T10:43:00.233

发布数据也可以使用 Map 发送。看起来更管理和干净。有时网站会检查某些标头的存在，因此传递这些标头以使请求尽可能相似。大多数情况下，内容类型是预期的。

```
package test;

import java.util.HashMap;
import java.util.Map;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

/**
 * POST example
 * 
 * @author iampayload
 *
 */
public class JsoupPost {

    private final String USER_AGENT = "Mozilla/5.0 (Windows NT 10.0; WOW64; rv:65.0) Gecko/20100101 Firefox/65.0";

    private final String urlPost = "https://www.huawei.com/en/accounts/PersonalPost";

    // main class
    public static void main(String[] args) throws Exception {
    JsoupPost http = new JsoupPost();
    http.sendPost();
    }

    // HTTP Post request
    private void sendPost() throws Exception {

    Map<String, String> postData = new HashMap<>();
    postData.put("username", "xxxx");
    postData.put("cmd", "login");
    postData.put("password", "yyyyy");

    Document doc = Jsoup.connect(urlPost).ignoreContentType(true).userAgent(USER_AGENT).data(postData).post();
    }
} 
```

# mysql - 如何在 rails 3.1.0 应用程序中访问多个数据库？

> ID：10012403
> 
> 赞同：4
> 
> 时间：2012-04-04T13:45:50.497
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3.1

在我们的 rails 3.1.0 应用程序中，我们希望根据用户凭据访问多个数据库。有多种解决方案。一种是为每个用户安装一个应用程序，每个应用程序只访问一个数据库。问题是，如果有很多数据库（例如数百个），那么应用程序安装的数量就会相等。维护大量应用程序可能很麻烦。另一种方法是访问应用程序内的多个数据库。然而，这种方法在 rails 3.1.0 中似乎并不容易支持。当然，应用程序中会有一个代码来决定刚刚登录的用户访问哪个数据库。有人可以提供有关该方法的优缺点的解决方案和见解吗？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T14:18:02.027

您应该能够[`ActiveRecord::Base.establish_connection`](http://apidock.com/rails/ActiveRecord/ConnectionHandling/establish_connection)在特定上下文中使用动态连接到您喜欢的任何数据库。如何实现这一点完全是特定于应用程序的，但 Rails 确实具有这种能力。

这是一个非常人为的例子：

```
class User
  def books
    ActiveRecord::Base.establish_connection(
      :adapter  => "mysql",
      :host     => "localhost",
      :username => self.username,
      :password => self.password,
      :database => self.database
    )

    Book.all
  rescue Exception => e
    # ...
  end
end 
```

您可能希望进行实际的错误处理，并可能在实例方法之外的某处建立连接，但这取决于您自己的决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T18:47:00.773

[公寓宝石](https://github.com/bradrobertson/apartment)可能正是您正在寻找的：

> Apartment 提供了一些工具来帮助您处理 Rails 应用程序中的多个数据库。如果您需要基于帐户或公司隔离某些数据，但仍允许某些数据存在于公共数据库中，Apartment 可以提供帮助。

# ios - 如何设置 UIView 的原点参考？

> ID：10012406
> 
> 赞同：21
> 
> 时间：2012-04-04T13:45:59.610
> 
> 标签：ios, xcode, cocoa, uiview

我正在创建一个 UIImageView 并将其循环添加到我的视图中，我将初始帧设置为 0,0,1,47，并且循环的每个段落我都会更改图像视图的中心以将它们隔开。

我总是使用 0 作为 origin.y

问题是原点引用在图像视图的中心，假设我们在界面生成器中，这相当于下图。

如何更改代码中的参考点？

![在此处输入图像描述](../Images/a1a036b93b77f56439dd95315695a82c.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-05T17:41:41.073

在阅读了这些答案和您的评论后，我不确定您的观点是什么。

您可以通过`UIView`两种方式设置位置：

*   `center`- 它肯定说它是中心。
*   `frame.origin`– 左上角，不能直接设置。

如果您希望左下角位于 x=300, y=300，您可以这样做：

```
UIView *view = ...
CGRect frame = view.frame;
frame.origin.x = 300 - frame.size.width;
frame.origin.y = 300 - frame.size.height;
view.frame = frame; 
```

* * *

但是，如果你深入到魔法世界`CALayers`（不要忘记导入 QuartzCore），你会更强大。

`CALayer`有这些：

*   `position`– 你看，它没有明确地说“中心”，所以它可能不是中心！
*   `anchorPoint`–`CGPoint`值在 0..1（包括）范围内，指定视图*内的点。*默认值为 x=0.5, y=0.5，表示“中心”（并`-[UIView center]`假定该值）。您可以将其设置为任何其他值，并且该`position`属性将应用于该点。

示例时间：

1.  你有一个大小为 100x100 的视图
2.  `view.layer.anchorPoint = CGPointMake(1, 1);`
3.  `view.layer.position = CGPointMake(300, 300);`
4.  视图的左上角在 x=200, y=200，右下角在 x=300, y=300。

**注意：**当您旋转图层/视图时，它将围绕 旋转`anchorPoint`，即默认情况下的中心。

但是，由于您只是问**如何**做具体的事情而不是**您**想要实现的目标，所以我现在无法为您提供更多帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T13:56:02.363

对象的框架包括其在其父视图中的位置。您可以使用以下内容进行更改：

```
CGRect frame = self.imageView.frame;
frame.origin.y = 0.0f;
self.imageView.frame = frame; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T13:54:37.463

如果我对您的理解正确，您需要设置您有兴趣移动的图像视图的框架。这可以在这样的简单情况下完成：

```
_theImageView.frame = CGRectMake(x, y, width, height); 
```

显然，您需要自己设置 x、y、宽度和高度。另请注意，视图的框架是参考其父视图。因此，如果您的视图位于左上角 (x = 0, y = 0)，宽 320 磅，高 400 磅，并且您将图像视图的框架设置为 (10, 50, 100, 50) 然后将其添加为前一个视图的子视图，它将位于父视图坐标空间的 x = 10, y = 50，即使图像视图的边界是 x = 0, y = 0 . Bounds 是指视图本身，frame 是指父视图。

因此，在您的场景中，您的代码可能如下所示：

```
CGRect currentFrame = _theImageView.frame;
currentFrame.origin.x = 0;
currentFrame.origin.y = 0;
_theImageView.frame = currentFrame;

[_parentView addSubview:_theImageView]; 
```

或者，您可以说：

```
CGRect currentFrame = _theImageView.frame;
_theImageView.frame = CGRectMake(0, 0, currentFrame.size.width, currentFrame.size.height);

[_parentView addSubview:_theImageView]; 
```

任何一种方法都会将图像视图设置到您添加它的父级的左上角。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-16T14:10:46.903

我想我会在 Swift 中有所作为。

如果想要通过指定坐标到该视图在 X 和 Y 中的原点的坐标来设置屏幕上的视图位置，通过一些数学运算，我们可以计算出视图的中心需要在哪里以便要根据需要定位的框架的原点。

此扩展使用视图的框架来获取宽度和高度。

计算新中心的方程几乎是微不足道的。请参阅以下扩展名：

```
extension CGRect {

    // Created 12/16/2020 by Michael Kucinski for anyone to reuse as desired
    func getCenterWhichPlacesFrameOriginAtSpecified_X_and_Y_Coordinates(x_Position: CGFloat, y_Position: CGFloat)  -> CGPoint
    {
        // self is the CGRect
        let widthDividedBy2 = self.width / 2
        let heightDividedBy2 = self.height / 2

        // Calculate where the center needs to be to place the origin at the specified x and y position

        let desiredCenter_X = x_Position + widthDividedBy2
        let desiredCenter_Y = y_Position + heightDividedBy2

        let calculatedCenter : CGPoint = CGPoint(x: desiredCenter_X, y: desiredCenter_Y)

        return calculatedCenter // Using this point as the center will place the origin at the specified X and Y coordinates
    }
} 
```

用法如下图，将原点放置在左上角区域，25像素中：

```
// Set the origin for this object at the values specified
maskChoosingSlider.center = maskChoosingSlider.frame.getCenterWhichPlacesFrameOriginAtSpecified_X_and_Y_Coordinates(x_Position: 25, y_Position: 25) 
```

如果您想将 CGPoint 传递给扩展而不是 X 和 Y 坐标，那么您可以自己进行简单的更改。

# iphone - AudioUnitRender Callback 如何在 iphone 中被调用

> ID：10012412
> 
> 赞同：0
> 
> 时间：2012-04-04T13:46:26.940
> 
> 标签：iphone, objective-c, audiounit, decibel

我是 iPhone 开发的新手，我需要使用 audiouint 实现音频输出电平计量。（不使用 avaudioplayer，因为我使用的是 cocos 声音引擎，我想改变播放声音的音高）。我从 Internet 获得了一些代码，但不知道如何调用该函数或如何手动调用它。我从[这里得到代码](http://www.politepix.com/2010/06/18/decibel-metering-from-an-iphone-audio-unit/)

任何人都知道如何手动调用此函数

```
 static OSStatus AudioUnitRenderCallback (void *inRefCon,AudioUnitRenderActionFlags *ioActionFlags,
                                                     const AudioTimeStamp *inTimeStamp,
                                                     UInt32 inBusNumber,
                                                     UInt32 inNumberFrames,
                                                     AudioBufferList *ioData)

Thank you 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:17:45.073

您无需手动调用渲染回调。iOS（和 Mac OSX，就此而言）上的音频，当系统准备好读取块时，将其从回调中拉出。

我知道这对你来说不是一个好的答案，但我怀疑你可能以错误的方式思考这个问题......

# html - 免费的网页布局设计师？

> ID：10012413
> 
> 赞同：0
> 
> 时间：2012-04-04T13:46:28.250
> 
> 标签：html, user-interface, layout, designer

我想知道是否有人知道免费的 Web 布局设计器，我可以用它来玩弄表单、表格等的布局等。

我更多地沿着 Visio 风格思考，而不是像 Dreamweaver 设计师。更图形化的东西可以简单地使用布局，而不是创建原型。我宁愿手动编写代码，也不愿移动东西以查看通过代码看起来最好的东西。由于这个项目主要是在服务器端脚本，Dreamweaver 设计器不能很好地工作。

抱歉，如果这含糊不清，但希望我能明白我在寻找什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:48:04.397

试试最近很火的，[www.wix.com](http://www.wix.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:55:54.283

试试这些：

1.  [康波泽](http://www.kompozer.net/)
2.  [阿玛亚](http://www.w3.org/Amaya/User/BinDist.html)
3.  [鯥](http://bluefish.openoffice.nl/index.html)
4.  [屏幕](http://www.screem.org/)
5.  [阿普塔纳工作室](http://www.aptana.com/products/studio3/download)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:50:37.827

我通过构建基本的 HTML 来进行这种游戏，然后在 Firefox 中加载它并使用 Firebug 来尝试看起来不错的东西。除此之外，如果它是关于看起来不错的纯图形元素，那么像 Paintshop 或 GIMP 这样的带有分层的图形编辑器呢？

# android - 如何在 android 项目 mapview 气球中集成当前位置

> ID：10012424
> 
> 赞同：0
> 
> 时间：2012-04-04T13:46:48.660
> 
> 标签：android, android-mapview, balloon

我正在尝试来自：[https](https://github.com/jgilfelt/android-mapviewballoons) ://github.com/jgilfelt/android-mapviewballoons 的信息气球，它运行良好。我缺少的一件事是设置当前位置的能力。有人知道如何精确实现该功能吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:20:51.177

是的，例如我有一些 url 变量，我在 baloon 中显示，我的 onBaloonTap 看起来像这样，其中 c 是上下文

```
 @Override
  protected boolean onBalloonTap(int index, OverlayItem item) {
    String url = WebService.upcomigEvent;
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url));
    c.startActivity(i);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:01:07.880

您可以通过实现 LocationListener 接口或使用 MyLocationOverlay 类来跟踪位置。在这两种方法中，该方法`onLocationChanged`都是可用的，您可以为它提供您自己创建的位置对象，指定 lat/lng/alt。这实际上“欺骗”了用户的位置，这可能不是您想要的。如果您只想将地图滚动到特定点，可以使用`animateTo`MapController 中提供的方法。

# database - Matlab 数据库连接：“struct”类型的输入参数的未定义函数或方法“fetch”

> ID：10012425
> 
> 赞同：0
> 
> 时间：2012-04-04T13:46:54.507
> 
> 标签：database, matlab, database-connection, fetch

当我的数据库连接建立时出现一个奇怪的错误，然后在执行该错误时它会出现此`e=fetch(e)`错误 `Undefined function or method 'fetch' for input arguments of type 'struct'`。我正在调用另一个函数来操作提取的数据

```
Function loadlib(Pin,con_sem)
load(Pin,con_sem);
end 
```

但是现在当我运行连接命令时，像这样单独的 m 文件

```
clear;
con_sem = database('OptProgramSemiLib','root','*********');
e=exec(con_sem,['SELECT *FROM Cond WHERE Type LIKE ''MO'' ']); (here it gives message in debug mode' invalid or closed connection)
e=fetch(e);
e.Data
close(con_sem); 
```

然后它不会给我这个错误。当我尝试从另一个帐户（具有管理员权限）访问数据库时，我也遇到了这个问题。请有任何建议。我要去哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:10:18.060

您无法加载连接对象。建立连接后关闭连接或 MATLAB 会话后，与数据库的连接将丢失。您必须再次连接到数据库。

用脚本或函数更好地保存 m 文件以建立连接。[您可以随时使用ISCONNECTION](http://www.mathworks.com/help/toolbox/database/ug/isconnection.html)函数检查连接对象是否有效。

[另请参阅我的回答和对另一个类似问题](https://stackoverflow.com/a/9155260/163080)的后续评论。

# sql - 加入 4 个查询

> ID：10012426
> 
> 赞同：-3
> 
> 时间：2012-04-04T13:47:01.273
> 
> 标签：sql

我必须创建一个查询，在 user_name 的条目上应该显示该特定 user_name 下的职责。我怎样才能做到这一点？应该使用的表是：

```
FND_USER
FND_RESPONSIBILITITY_VL
FND_APPLICATION_VL
FND_USER_RESP_GROUPS_DIRECT 
```

请帮助...用户名是必填字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:56:41.080

您需要告诉查询表中哪些位的查询是相同的。

根据您的评论，我认为这将是一个开始：

```
Select FND_USER.*, FND_USER_RESP_GROUPS_DIRECT.responsibility_id  
FROM FND_USER, FND_USER_RESP_GROUPS_DIRECT  
WHERE user_name = :usr 
AND FND_USER.user_id=FND_USER_RESP_GROUPS_DIRECT.user_id; 
```

推断到您的其他表格（我们没有任何详细信息）这*可能会*起作用，但即使它不起作用，它也应该让您走上正确的轨道：

```
Select FND_USER.*, FND_USER_RESP_GROUPS_DIRECT.responsibility_id, FND_responsibility_vl.*, FND_application_vl.*   
FROM FND_USER, FND_USER_RESP_GROUPS_DIRECT, FND_responsibility_vl, FND_application_vl  
WHERE user_name = :usr 
AND FND_USER.user_id=FND_USER_RESP_GROUPS_DIRECT.user_id
AND FND_USER.user_id=FND_responsibility_vl.user_id
AND FND_USER.user_id=FND_application_vl.user_id; 
```

但没有更多细节谁知道？

# selenium - OperaDriver 等待 Opera 启动器超时

> ID：10012430
> 
> 赞同：4
> 
> 时间：2012-04-04T13:47:13.213
> 
> 标签：selenium, opera, selenium-webdriver, operadriver

我正在尝试将 OperaDriver for Java（0.11 版）集成到我的测试套件中。这是代码片段：

```
 DesiredCapabilities operaCapabilities = DesiredCapabilities.opera();
  operaCapabilities.setCapability("opera.host", "127.0.0.1");
  operaCapabilities.setCapability("opera.port", 7001);
  operaCapabilities.setCapability("opera.profile", "");

  webDriver = new OperaDriver(operaCapabilities); 
```

上面的代码片段无法返回带有 SocketTimeoutException 的 webdriver 引用`Timeout waiting for launcher to connect on port 29392`。我可以看到浏览器（opera ver. 11.62）在加载快速拨号选项卡的情况下启动，并且启动器也在执行，但不知何故 OperaDriver 似乎无法连接。

我看到的例外是：

```
com.opera.core.systems.runner.OperaRunnerException: Timeout waiting for launcher to connect on port 29392
at com.opera.core.systems.runner.launcher.OperaLauncherRunner.<init>(OperaLauncherRunner.java:159)
at com.opera.core.systems.OperaDriver.<init>(OperaDriver.java:322)
at com.opera.core.systems.OperaDriver.<init>(OperaDriver.java:224)
at com.test.TestMain.main(TestMain.java:31)

Caused by: java.net.SocketTimeoutException: Accept timed out
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at com.opera.core.systems.runner.launcher.OperaLauncherRunner.<init>

(OperaLauncherRunner.java:140)
        ... 3 more 
```

我已经为“opera.port”和 7001 尝试过 -1，但功能设置似乎被忽略了，因为它每次都尝试连接一个随机端口。我也暂时关闭了防火墙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T22:37:20.810

首先，[让我们隔离这里遇到的异常](https://github.com/operasoftware/operadriver/blob/master/src/com/opera/core/systems/runner/launcher/OperaLauncherRunner.java)：

```
private final int launcherPort = PortProber.findFreePort();

...

public OperaLauncherRunner(OperaSettings s) {
    super(s);

    // Locate the bundled launcher from OperaLaunchers project and copy it to its default location
    // on users system if it's not there or outdated
    bundledLauncher =
        OperaLaunchers.class.getClassLoader().getResource("launchers/" + launcherNameForOS());

    if (bundledLauncher == null) {
      throw new OperaRunnerException("Not able to locate bundled launcher: " + bundledLauncher);
    }

    if (settings.getLauncher() == launcherDefaultLocation() &&
        (!settings.getLauncher().exists() || isLauncherOutdated(settings.getLauncher()))) {
      extractLauncher(bundledLauncher, settings.getLauncher());
    }

    makeLauncherExecutable(settings.getLauncher());

    // Find an available Opera if present
    if (settings.getBinary() == null) {
      settings.setBinary(new File(OperaPaths.operaPath()));
    }

    // Create list of arguments for launcher binary
    ImmutableList<String> arguments = buildArguments();
    logger.config("launcher arguments: " + arguments);

    try {
      launcherRunner = new OperaLauncherBinary(settings.getLauncher().getPath(),
                                               arguments.toArray(new String[]{}));
    } catch (IOException e) {
      throw new OperaRunnerException("Unable to start launcher: " + e.getMessage());
    }

    logger.fine("Waiting for launcher connection on port " + launcherPort);

    try {
      // Setup listener server
      ServerSocket listenerServer = new ServerSocket(launcherPort);
      listenerServer.setSoTimeout((int) OperaIntervals.LAUNCHER_TIMEOUT.getValue());

      // Try to connect
      launcherProtocol = new OperaLauncherProtocol(listenerServer.accept());

      // We did it!
      logger.fine("Connected with launcher on port " + launcherPort);
      listenerServer.close();

      // Do the handshake!
      LauncherHandshakeRequest.Builder request = LauncherHandshakeRequest.newBuilder();
      ResponseEncapsulation res = launcherProtocol.sendRequest(
          MessageType.MSG_HELLO, request.build().toByteArray());

      // Are we happy?
      if (res.isSuccess()) {
        logger.finer("Got launcher handshake: " + res.getResponse().toString());
      } else {
        throw new OperaRunnerException(
            "Did not get launcher handshake: " + res.getResponse().toString());
      }
    } catch (SocketTimeoutException e) {
      throw new OperaRunnerException("Timeout waiting for launcher to connect on port " +
                                     launcherPort, e);
    } catch (IOException e) {
      throw new OperaRunnerException("Unable to listen to launcher port " + launcherPort, e);
    }
  } 
```

我们从这段代码中学到了一些东西：

1.  `private final int launcherPort =`[`PortProber.findFreePort()`](http://grepcode.com/file/repo1.maven.org/maven2/org.seleniumhq.selenium/selenium-remote-driver/2.0.0/org/openqa/selenium/net/PortProber.java)`;`设置我们的`launcherPort`，并且这个变量唯一地用于建立连接。

    实际上，您的配置`opera.port`在此块中被完全忽略。这似乎不太理想，它可能确实是一个错误或意外的回归。

2.  一旦我们建立了本地端口，就会立即进行连接尝试：

    `// Setup listener server`
    `ServerSocket listenerServer = new ServerSocket(launcherPort);` `listenerServer.setSoTimeout((int) OperaIntervals.LAUNCHER_TIMEOUT.getValue());`

    `// Try to connect`
    `launcherProtocol = new OperaLauncherProtocol(listenerServer.accept());`

所以，我们有一个与本地服务器紧密耦合的绑定。该端口被忽略，取而代之的是您系统上的空闲端口，但同时，它应该始终能够使用该端口。

如果您的防火墙确实没有阻止连接（正如您所讨论的），假设您希望 Opera 以编程方式连接，而不是手动打开连接。

根据[一些文档](http://sny.no/2011/10/capabilities.html)，`opera.host`带有以下警告：

> **opera.host** *(String)* Opera 应该连接的主机。**除非您手动启动 Opera，否则您将不需要它。**

（另外强调我的。）

不用说，警告与我有关。同样，尽管它明显不适用：

> **opera.port** *(Integer)* Opera 应该连接的端口。0 = 随机，-1 = Opera 默认值**（用于 Opera > 12）**。

（另外强调我的。）

简而言之：尝试运行您的应用程序[，如下所示](http://sny.no/2011/10/capabilities.html)：

```
DesiredCapabilities capabilities = new DesiredCapabilities.opera();
capabilities.setCapability("opera.binary", "/path/to/your/opera");
capabilities.setCapability("opera.log.level", "CONFIG");
WebDriver driver = new OperaDriver(capabilities); 
```

如果这不起作用，则说明您的项目或当前的 Opera 二进制文件有其他问题，无论是版本相关还是其他问题。

# ajax - 在单个 DIV 中定位多个 AJAX 表单

> ID：10012431
> 
> 赞同：1
> 
> 时间：2012-04-04T13:47:16.673
> 
> 标签：ajax, jquery-ui, jquery, jquery-plugins

几天来我一直在寻找答案，但没有运气。

使用 AJAX 将多个表单引入 DIV 时，如何将新表单放置在现有表单之上？

我有一个菜单，可以将新表单调用到工作区。被调用的新表单出现在现有表单的顶部。表单是可拖动的，但我更愿意让新表单本身脱离其他表单。有没有办法做到这一点？

我正在使用 jQuery 来处理 AJAX 和效果。

编辑和回答：

我刚刚发现出了什么问题。对不起，我以前没有看到这个。我的表格都在他们自己的 DIV 中，高度为 0。这是那些面对面的时刻之一。:P

谢谢你们的回复。:)

更好的编辑：

我使用了 float:left 建议并再次添加了 0 高度。现在一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:51:00.700

如果我了解您要完成的工作-您可以在工作区域内“浮动”您的表格，并在需要时将新表格附加到工作区域中。

**[例子](http://jsfiddle.net/Y2dFr/1)**

# dynamics-crm-2011 - 将现有注释与多个实体相关联

> ID：10012433
> 
> 赞同：3
> 
> 时间：2012-04-04T13:47:32.120
> 
> 标签：dynamics-crm-2011

比如说，组织有一个附件文件。我可以通过插件将此附件与父组织相关联吗？

我知道可以为父记录创建另一个注释，并且可以在那里复制文件附件。但我想避免存储附件的副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:26:35.757

简而言之，复制是让注释出现在两条记录中的唯一选择。

Annotations 的设计方式完全阻止了这种合理的可能性。Annotation“有一个”对象，即使在表单中对象被表示为 Annotation 的父级。所以我们被重复所困。

![AnnotationBase 信息](../Images/0712793fe1fd4103a7098d4dfac692dc.png)

您总是可以编写自己的不受微软支持的架构脚本和 Web 资源表单控件...如果您这样做，请务必与社区分享 :)

# asp.net - 如何更新 asp.net azure 应用程序

> ID：10012438
> 
> 赞同：1
> 
> 时间：2012-04-04T13:47:57.387
> 
> 标签：asp.net, visual-studio, azure

我是 Windows azure 的新手。我创建了简单的 HelloWorld ASP.NET azure 应用程序并发布了它。我知道我可以通过单击项目上的右键然后发布它来在 Visual Studio 中重新发布整个应用程序。但是是否可以只更新一个文件（aspx 页面、图片等）？

谢谢！问候，亚历山大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:07:55.060

我认为，如果您只是在学习 Windows Azure，最有帮助的答案是“您不能”。Windows Azure 的工作方式是更新应用程序，创建完整的包并再次部署它。

这并不是说大卫的答案也不正确。我只是想直接回答“部署后如何只更改一个文件？”的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:57:40.380

如果要更新单个文件（例如图像），您可以做的一件事是将所有图像（以及 css、javascript 和任何其他静态内容）存储在 Blob 存储中。这有几个优点：

*   使用免费工具和付费工具轻松单独上传新文件。例如：[Cloudberry Explorer](http://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx)是一款免费应用，Cerebrata [Cloud Storage Studio](http://cerebrata.com/Products/CloudStorageStudio/)是一款付费应用，它们都可以让您单独管理容器和 Blob。
*   较小的部署包，因为您已删除图像和其他大文件
*   IIS 上的负载更少，因为图像请求直接进入 blob 存储，而不是你的角色实例

您不能将您的 aspx 文件存储在 blob 中，但您可以将 html 等静态内容存储在 blob 中。要更新 aspx，您基本上是在更新部署。您现在可以将其作为“升级”来执行，它不会中断您的 IP 地址，并且如果您有多个实例，则不会在升级期间关闭您的服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:50:39.983

您可以使用[webdeploy](http://msdn.microsoft.com/en-us/library/windowsazure/ff683672.aspx#EnableWebDeploy) （它应该对所有文件进行选择性[更新）或通过](http://msdn.microsoft.com/en-us/library/windowsazure/ff683672.aspx#UpdateWebDeploy)[远程桌面](http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx)连接并自己更新某些文件。就像评论和 MSDN 所说：这两种方法都不推荐/可用于生产部署。它们仅作为某些开发场景的捷径。

# iphone - MPMoviePlayerController 不播放新保存的视频文件

> ID：10012444
> 
> 赞同：2
> 
> 时间：2012-04-04T13:48:27.177
> 
> 标签：iphone, ios, video, uiimagepickercontroller, mpmovieplayercontroller

我正在使用 imagePickerController 来录制视频。在`imagePickerController:didFinishPickingMediaWithInfo:`函数中，我试图将视频设置为先前定义的 MPMoviePlayerController：

```
if ([mediaType isEqualToString:(NSString *)kUTTypeMovie]){
    NSURL *movieUrl = [info objectForKey:UIImagePickerControllerMediaURL];
    [self.moviePlayer setContentURL:movieUrl]];
} 
```

这工作正常，视频确实在播放。但我想保存文件以备后用。当我这样做并将保存的文件用于电影播放器​​时，没有任何反应：

*   我已经尝试过了（将数据保存到新文件）

    ```
    NSString *directory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *newPath = [directory stringByAppendingPathComponent:@"myMovie.mov"];
    NSData *videoData = [NSData dataWithContentsOfURL:movieUrl];
    [videoData writeToFile:newPath atomically:NO];
    [self.moviePlayer setContentURL:[NSURL URLWithString:newPath]]; 
    ```

*   或者这个（将临时视频文件复制到我的文件夹）

    ```
    NSString *directory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *newPath = [directory stringByAppendingPathComponent:@"myMovie.mov"];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error = nil;
    [fileManager copyItemAtPath:[videoUrl path] toPath:newPath error:&error];
    [self.moviePlayer setContentURL:[NSURL URLWithString:newPath]]; 
    ```

没有任何成功，即使文件`newPath`确实存在......我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T15:11:50.797

好的，我终于找到了问题。问题实际上不在于 MPMoviePlayerController 而是在于以下行：

```
[self.moviePlayer setContentURL:[NSURL URLWithString:newPath]]; 
```

我通过将该行替换为以下内容来修复它：

```
[self.moviePlayer setContentURL:[NSURL fileURLWithPath:newPath isDirectory:NO]]; 
```

希望这会帮助别人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:18:32.497

使用下面的代码：

```
NSData *movieData;  
    NSError *dataReadingError = nil;        
    movieData = [NSData dataWithContentsOfURL: movieURL options:NSDataReadingMapped error:&dataReadingError];        
    if(movieData != nil)        
        NSLog(@"Successfully loaded the data.");   
    else        
        NSLog(@"Failed to load the data with error = %@", dataReadingError); 
```

# php - 如何使西里尔字符大写？

> ID：10012445
> 
> 赞同：5
> 
> 时间：2012-04-04T13:48:27.440
> 
> 标签：php

那么如何将西里尔字符转为大写？

```
echo strtoupper("русские"); 
```

这不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T13:53:17.730

使用[`mb_strtoupper`](https://www.php.net/manual/en/function.mb-strtoupper.php)正确的编码（没有它将不起作用）：

```
echo mb_strtoupper("русские", "utf-8");
РУССКИЕ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T13:51:23.863

您将不得不使用 MultiByte 函数：

[**mb_strtoupper**](http://www.php.net/manual/en/function.mb-strtoupper.php)

确保在您的 PHP 中安装并启用 MB ;)

# ruby-on-rails - 无法运行 rinari-web-server

> ID：10012449
> 
> 赞同：1
> 
> 时间：2012-04-04T13:48:32.770
> 
> 标签：ruby-on-rails, emacs, rvm, rinari

当我运行 rinari-web-server 时，出现此错误：

```
/home/pedrorolo/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- bundler/setup (LoadError)
    from /home/pedrorolo/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/pedrorolo/workspace/geoptima-registrator/config/boot.rb:6:in `<top (required)>'
    from /home/pedrorolo/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/pedrorolo/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/pedrorolo/workspace/geoptima-registrator/script/rails:5:in `<main>' 
```

我已经安装了 rvm emacs 包。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:09:42.167

有同样的问题，通过安装 rvm.el 修复它

[https://github.com/senny/rvm.el](https://github.com/senny/rvm.el)

编辑：呃，没有完全阅读你的问题。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:02:10.757

我设法通过在我的 .emacs 中显式加载 rvm.el 文件来完成这项工作。

# php - php 对象运算符-> 没有实例？

> ID：10012451
> 
> 赞同：2
> 
> 时间：2012-04-04T13:48:34.490
> 
> 标签：php, object, operator-keyword

我在我实现的脚本中有以下代码，它确实可以正常工作，只是想了解：

```
 $variable1 = function1();  // function1 is a class method, it’s file included per require_once 
   $ variable1 -> function2(); // function2 is a class method, it’s file included per require_once 
```

-> 这里不是对象运算符吗？但是 $variable1 中没有初始化实例保存。

帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T13:49:28.370

这只是意味着`function1()`返回一个对象。

因此，您可以使用该对象及其功能。

例子：

```
class Test {
    function function2(){
        echo "Hi";
    }
}

function function1(){ return new Test; }

//SO:

$variable1 = function1();  
$variable1->function2(); 
```

# ruby-on-rails - 设计否决设计 SessionController 破坏了登录

> ID：10012455
> 
> 赞同：0
> 
> 时间：2012-04-04T13:48:46.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, devise, overriding

我已经为会话扩展了设计控制器。在用户登录时添加一些额外的功能。现在登录时，如果没有输入用户名或密码，我会收到错误：SessionsController#create

为 nil 调用 id，它会错误地为 4 - 如果你真的想要 nil 的 id，请使用 object_id

我上周搜索了长达 2 小时如何解决这个问题，有人可以帮我解决这个问题吗？将不胜感激

**如何正确添加我的自定义功能但仍保留设计创建操作？**

```
class SessionsController < Devise::SessionsController

  def create

    @user = User.where(:id => current_user.id).first
    @moderated = Asset.where(:attachable_id => current_user.id, :moderated => true).first

    if @user.sign_in_count.to_i == 1
      def after_sign_in_path_for(resource)
        "/welcome/basics"
      end
    else
      if @moderated.nil?
        unless @user.has_photo?
          def after_sign_in_path_for(resource)
          "/home/no_photo"
          end
        end
      else
        def after_sign_in_path_for(resource)
          "/home/moderated"
        end
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T15:25:48.250

如果您的附加功能包括在用户第一次登录时将用户重定向到不同的页面，我建议按照[wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-on-successful-sign-in-out)`after_sign_in_path_for`的建议在应用程序控制器中进行定义。

```
class ApplicationController < ActionController::Base

  private

  def after_sign_in_path_for(resource)
    if current_user.sign_in_count == 1
      "/welcome/basics"
    else
      "/other/path"
    end
  end

end 
```

请注意，这仅在用户是可以登录您的应用程序的唯一资源时才有效。否则，您还必须通过资源参数来区分此方法。

# c# - 在 flowlayoutpanel 中按下了哪个按钮？

> ID：10012456
> 
> 赞同：1
> 
> 时间：2012-04-04T13:48:48.043
> 
> 标签：c#, winforms, user-controls, event-handling

对于我当前的项目，我正在向`usercontrols : ucTask`我的`flowlayoutpanel : flpTasks`

```
foreach (task t in tasks)
{
   ucTask uct = new ucTask();
   uct.id = t.task_id;
   uct.date= t.date.ToString();
   uct.btnNaam = t.task_id.ToString();

   uct.OnButtonclick += new EventHandler(uct_OnButtonclick);

   flpTasks.Controls.Add(uct);
} 
```

![uc任务](../Images/82a396bc541c591ac7228f67cdee6196.png)

现在，我将在 flowlayoutpanel 中有几个这样的用户控件，并且我想在按下该按钮时触发一个事件。有了`EventHandler`我可以触发一个事件，但我需要为不同的按钮触发一个不同的事件。

```
 void uco_OnButtonclick(object sender, EventArgs e)
    {
        lblStatus.Text = "TEST";
    } 
```

我不知道如何知道我按下了哪个按钮（或用户控件）。我没有想法，有什么建议吗？

谢谢，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:51:38.440

事件的发送者实际上是按钮之一。当您将 sender 转换为 Button 类型时，您可以访问任何 Buttons 属性并确定按下了哪个按钮：

```
void uco_OnButtonclick(object sender, EventArgs e)
{
   Button button = sender as Button;
   if (button == null)
       return;

   lblStatus.Text = button.Name;
} 
```

更新：再次阅读您的问题后，我知道 ucTask 实际上是 UserControl，当单击其中的按钮时会引发事件。

所以，首先是命名。c# 中类名的良好风格是 PascalCase。例如，对于任务用户控制好名称将是`TaskControl`. 接下来是事件命名。通常将事件命名为`EventName(-ing, -ed)`. 如果你想引发事件，那么好的风格就是受保护的方法`OnEventName(-int, -ed)`。还有一句话——当你编写用户控件时，你可以自由地使用商业术语来命名你的事件。例如TaskCreated、TaskChanged。您还可以通过创建自定义 EventArgs 将任何参数传递给您的事件。

因此，对于您的用户控制：

```
public class TaskChangedEventArgs : EventArgs
{
    public TaskChangedEventArgs(int taskId)
    {
        TaskId = taskId;
    }
    public int TaskId { get; private set; }
}

public class TaskControl : UserControl
{
   public event EventHandler<TaskChangedEventArgs> TaskChanged;

   // raise it inside button click event handler
   protected void OnTaskChanged(int taskId)
   {
       if (TaskChanged != null)
           TaskChanged(this, new TaskChangedEventArgs(taskId));
   }
} 
```

当你使用你的用户控件时，只需订阅它的 TaskChanged 事件：

```
uct.TaskChanged += new EventHandler<TaskChangedEventArgs>(uct_TaskChanged); 
```

您通过事件参数传递的所有参数都将在该事件处理程序中可用：

```
void uco_TaskChanged(object sender, TaskChangedEventArgs e)
{
    lblStatus.Text = e.TaskId.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:52:11.010

那么，发送者应该是用户控制权吧？然后您可以通过 投射和确定项目`ucTask.id`。

```
void uco_OnButtonclick(object sender, EventArgs e)
{
    ucTask uc = sender as ucTask;
    lblStatus.Text = uc.id.ToString();
} 
```

这假定用户控件的`OnButtonclick`事件发送对用户控件的引用，而不是对按下按钮的引用作为事件的发送者。

# java - 更改 TabActivity 中的内容

> ID：10012457
> 
> 赞同：0
> 
> 时间：2012-04-04T13:48:48.657
> 
> 标签：java, android

我在 TabActivity 中更改内容时遇到问题。

```
public class MbankActivity extends TabActivity {
Intent intentMap;
...
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
...
    intentMap = new Intent().setClass(this,MapaActivity.class);
    tabSpecMap = tabHost
    .newTabSpec("Map")
    .setIndicator("Map", ressources.getDrawable(R.drawable.ic_launcher))
    .setContent(intentMap);
...
}
...
} 
```

我尝试更改内容

```
intentMap= new Intent().setClass(this,AnotherMapActivity.class)
.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

但这不起作用。

我也试试：

```
getTabHost().setCurrentTab(2); //old class in run

Intent aa=new Intent().setClass(this,,AnotherMapActivity.class)
.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
this.getLocalActivityManager().startActivity("Map", aa);
// 
```

新课程正在运行，但选项卡是旧课程的视图？！？;/

如何更改内容？

# hbase - HBase 批量 put 操作

> ID：10012460
> 
> 赞同：4
> 
> 时间：2012-04-04T13:49:02.100
> 
> 标签：hbase

我有一个要写入 HBase 的 Put 操作列表。我在 HTable 类中发现了两个可能的 API 调用

批处理（列表）和放置（列表）。

我想知道这两个功能在写作性能方面有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T08:47:04.183

put(list) 在验证 puts 时会进行更多处理（在客户端），但最终它们都会在 HConnectionImplementation 类上调用相同的 processBatch 代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T04:25:23.853

在 put(List) 中，没有定义将 put 插入 DB 的顺序……它也是异步的，即所有 Put 将在实际插入 DB 之前首先存储在客户端写入缓冲区中。在批处理（列表）中，puts 是同步的，即它们立即插入 DB。

# java - 不一致的 JFrame 布局

> ID：10012461
> 
> 赞同：2
> 
> 时间：2012-04-04T13:49:05.303
> 
> 标签：java, swing, jsplitpane

我有一个 JFrame，它显示两个 JSplitPanes（一个在另一个里面）。

> 由于某种原因，分隔线的位置不一致。

我的意思是有时它显示在我设置它的正确位置，而其他时候则没有。当位置错误时，两个拆分面板都是错误的。这是我用于 JSplitPanes 的代码：

```
 JPanel javaPanel = core.getComponentPanel(2);
        JSplitPane splitA = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
                javaPanel.getComponent(0), javaPanel.getComponent(1));
        double pos = (screenDim.getHeight() * 72) / 100;
        splitA.setDividerLocation((int) pos);
        JSplitPane mainSplitP = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,
                new JScrollPane(getCoreComponents()), splitA);
        return mainSplitP; 
```

在 JFrame 上，我有一个带有 CardLayout 的 JPanel。要添加 mainSplitP，我使用以下方法：

```
 private void setFrameContent(Container content, String title) {
        appContent.add(content, title);
        CardLayout cl = (CardLayout) (appContent.getLayout());
        cl.show(appContent, title);
        appFrame.pack();
    } 
```

什么可能导致这种不一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:57:31.457

*   `JComponents`之后知道自己的大小`pack()`，或者当它们曾经在屏幕上可见时

*   将 JSplitPane 的 setDividerLocation包装[到 invokeLater](https://stackoverflow.com/a/7625843/714968)

# vba - 如何从 VBA 中的另一个特定工作簿调用函数？

> ID：10012463
> 
> 赞同：22
> 
> 时间：2012-04-04T13:49:08.813
> 
> 标签：vba, excel

我想知道是否有一种方法可以从另一个指定工作簿的模块调用 VBA 函数或方法，因为特定工作表可以不使用 Application.Run

对于工作表，我可以调用例如：

```
ActiveSheet.MyTest() 
```

如果 MyTest 在工作表模块中定义

但我想调用一个在模块中定义的函数

我试过了 ：

```
ActiveWorkbook.MyTestModule()
ActiveWorkbook.VBProject.VBComponents("MyModule").MyTestModule(myArg) 
```

这不起作用生成错误对象不支持此方法

我可以打电话

```
Application.Run(ActiveWorkbook.name & "!MyTestModule", myArg) 
```

但我不确定 Application.Run 的错误处理，我会发现直接运行该方法更干净

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-04T15:56:07.253

在您要调用的工作簿中（我将其称为 A），您可以添加对您要调用的工作簿的引用（我将其称为 B），如下所示：

1.  在工作簿 A 中，打开 Microsoft Visual Basic for Applications 窗口（例如，按`Alt`+ `F11`）。
2.  选择工具、参考。
3.  在出现的“引用”对话框中，选择“浏览”。
4.  在出现的添加引用对话框中，从文件类型框中选择 Microsoft Excel 文件，选择要调用的文件 (B)，然后选择打开。
5.  选择“确定”关闭“引用”对话框。

在文件 A 中，您应该能够像在文件 A 中一样调用文件 B 中的公共模块级函数。要解决任何命名冲突，您可以为文件 B 的“项目名称”添加前缀，如项目属性对话框的常规选项卡（可通过 Microsoft Visual Basic for Applications 工具菜单中的属性命令访问）。例如，如果文件 B 的“项目名称”是“VBAProjectB”，您可以使用语法 VBAProjectB.F 从文件 A 调用函数 F。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-27T00:36:23.477

顺便说一句，如果您想访问另一个工作簿中的自定义数据类型，这也适用：

```
' In workbook ABC, project name Library

Public Type Book_Data
   Title As String
   Pub_Date As Date
   Pub_City As String
End Type

' In workbook DEF (after a ref to Library)
Dim Book_Info As Library.Book_Data

Book_Info.Title = "War and Peace"
Debug.Print Book_Info.Title 
```

# sql-server-2005 - 登录名与登录名不同

> ID：10012469
> 
> 赞同：1
> 
> 时间：2012-04-04T13:49:32.020
> 
> 标签：sql-server-2005, login, user-management

我目前正在使用 SQL Server 2005，我有一个问题，您是否可以使用不同的登录名登录。我来问这个问题作为查询

```
SELECT * FROM master.sys.syslogins 
```

抛出，除其他外，两列“名称”和“登录名”都显示相同的值。所以我问自己是否有可能有一个名为“XTest”的登录，用户实际上可以使用用户名“Test”登录......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:09:03.807

不，这是不可能的！两列始终具有保存值。您根本不应该`sys.syslogins`在任何当前 SQL Server 版本中使用（在任何数据库中）。仍然提供此表是为了向后兼容，使用`sys.server_principals`和`sys.sql_logins`代替。

# width - 将我的页面标签应用程序更改为 810 宽度，仅在应用程序页面上更改，而不是用户的

> ID：10012470
> 
> 赞同：1
> 
> 时间：2012-04-04T13:49:34.973
> 
> 标签：width, facebook-page

昨天早上，我们更改了页面选项卡应用程序以使用更宽的 810 像素宽度，如本页所述：

[http://developers.facebook.com/docs/appsonfacebook/pagetabs/](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)

如果我去我们的应用程序并查看演示，宽度发生了变化。但是，在我们所有用户的页面上，包括大约 30 分钟前刚刚添加应用程序的页面，520 的窄宽度仍然存在。

这需要一周时间才能在每个人的页面上更改还是有什么问题？

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T01:27:59.500

似乎有一个设置`Advanced Settings`被调用`Page Tab iframe`。
设置它来`enabled`解决问题。

仍在寻找为什么此设置仅出现在某些应用程序而不是全部应用程序上的原因。

# javascript - javascript中的asp.net LinkBut ton在尝试发送邮件时没有被调用

> ID：10012473
> 
> 赞同：-1
> 
> 时间：2012-04-04T13:49:51.807
> 
> 标签：javascript, asp.net, c#-4.0, updatepanel, lightbox

```
 <div class="popup" id="invite-box">
       <asp:UpdatePanel ID="upd1" runat="server">
       <ContentTemplate>
            <a href="#" class="close">close</a>
            <div class="popup-holder">
                <div class="popup-frame">
                    <div class="container"> 
                        <div action="#" class="invite-form" >

                                        <div class="email">
                                            <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox></div>

                                        <div class="textarea">
                                            <div class="textarea-holder">
                                                <asp:TextBox ID="TextBox1" runat="server" TextMode="MultiLine" Rows="10" Columns="30"></asp:TextBox>
                                            </div>
                                        </div>

                                <div class="btn-holder">
                                    <a href="#" class="btn-view">View sample e-mail</a>
                                    <asp:LinkButton ID="LinkButton6" runat="server" CssClass="btn-send" 
                                        onclick="LinkButton6_Click"></asp:LinkButton>
                                </div>

                    </div>
                </div>
</div>
</div>
        </ContentTemplate>
        </asp:UpdatePanel>
        </div> 
```

这是我的弹出代码，我正在尝试在链接按钮单击时发送邮件，但是在后面的代码中没有调用 LinkBut​​ton_Click

我的代码如下：

```
 protected void LinkButton6_Click(object sender, EventArgs e) // Not getting called
{
    if (r1.Checked == true)
    {

        try
        {
            MailMessage mail = new MailMessage();
            mail.Subject = "Some one has invited you: Join abc! Meet ## of %%";
            mail.Body = mee.data[0].name+"</br>"+TextBox1.Text;
            mail.To.Add(TextBox2.Text);

            ////send the message

            SmtpClient mySmtpClient = new SmtpClient();
            System.Net.NetworkCredential myCredential = new System.Net.NetworkCredential("****", "*****");
            //mySmtpClient.Port="25";
            mySmtpClient.Host = "abc";
            mySmtpClient.UseDefaultCredentials = false;
            mySmtpClient.Credentials = myCredential;
            mySmtpClient.Send(mail);
        }
        catch (Exception ex)
        {
            Response.Write(ex.ToString());
        }
    } 
```

**编辑：**

我认为我的代码正在考虑将链接按钮作为 javascript 按钮 ![在此处输入图像描述](../Images/2496bfa2355c0cbaa886dcf7c8b220bd.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:28:47.480

从看你的问题...

我会说您显示的链接按钮与源中的链接按钮不同。

我尝试使用以 Invite 作为其文本的链接按钮来复制您的问题

```
<asp:LinkButton ID="LinkButton6" runat="server" onclick="LinkButton6_Click">Invite</asp:LinkButton> 
```

您可以在源代码中看到它包含标签之间的邀请。

在您的来源中没有提到邀请

```
<asp:LinkButton ID="LinkButton6" runat="server" CssClass="btn-send"                                             onclick="LinkButton6_Click"></asp:LinkButton> 
```

尝试添加另一个链接按钮，双击它，将代码添加到它，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:28:54.753

我认为您在更新面板中缺少触发器。在更新面板的结束标记之前添加以下触发器

```
<Triggers>                      
    <asp:AsyncPostBackTrigger ControlID="LinkButton6" EventName="Click" />
</Triggers>
</asp:UpdatePanel> 
```

希望这可能会有所帮助...

# python - GAE 上的“BadValueError：需要属性类别”

> ID：10012476
> 
> 赞同：0
> 
> 时间：2012-04-04T13:50:01.630
> 
> 标签：python, html, google-app-engine, google-cloud-datastore

我正在尝试制作一个简单的 webapp html 页面，该页面打印出从数据存储区提供的数据。但是，我不断地运行以下错误：

```
 raise BadValueError('Property %s is required' % self.name)
BadValueError: Property category is required 
```

我听说这是因为我必须事先初始化我的属性，但到目前为止，还没有找到合适的方法来做到这一点。

以下放在model.py中

```
class Question(db.Model):
  category = db.StringProperty(required=True)
  question = db.StringProperty(required=True, multiline=True)
  creator = db.StringProperty(required=True, multiline=True)
  answer = db.StringProperty(required=True, multiline=True)
  mustHave = db.StringProperty(required=False, multiline=True)
  group = db.StringProperty(required=False) 
```

以下在单独的 pages.py 中给出

```
class SpPage(webapp.RequestHandler):
    def printPage(self,path):
        user = users.get_current_user()
        template_values = getCommonValues(user)

        if user:
            template_values['questions'] = model.Question.all().fetch(100)
            self.response.out.write(template.render(path, template_values))
        else:
            path = os.path.join(os.path.dirname(__file__), 'html/pleaseLogin.html')
            self.response.out.write(template.render(path, template_values)) 
```

我的html页面如下：

```
Questions<br/>
{% for eachQ in questions %}
    <p>
    <a href='/doQuestionPage?id={{eachQ.key}}'>{{eachQ.question}}</a><br/>
    by {{eachQ.creator}}
</p>
{% endfor %} 
```

将数据添加到数据存储区的类：注意：这是附加到使用此类发布数据的表单上。并非所有代码都在其中，因此如果某些变量（例如“某物”）似乎没有被使用，请不要担心 - 它们是。到目前为止，它似乎正在工作。

```
class AddQuestion(webapp.RequestHandler):
  def doPost(self,something):        
    user = users.get_current_user()
    template_values = getCommonValues(user)

    c = self.request.get('cat')
    q = self.request.get('question')
    a = self.request.get('answer')
    m = self.request.get('musthaves')

    if user:
        emailStr = user.email().lower()
        if q and a and m:
            newQuestion = model.Question(category = c, question = q, creator = emailStr, answer = a, mustHave = m)
            newQuestion.put()
            template_values['message'] = 'New question created!' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:13:33.537

当前数据存储中的某些实体可能没有填写类别属性或其他必需属性。当您在之前已经创建了一些其他实体之后将属性添加到模型时，有时可能会发生这种情况。或者也许将`required=True`选项添加到以前不需要的属性。

如果您正在使用开发数据，我建议您清除数据存储或删除所有`Question`实体，看看是否有效。

否则，您必须手动将数据添加到所有必填字段或删除该`required=True`选项。

# php - json_encode 与 PHP 5.1.6 和 jQuery

> ID：10012479
> 
> 赞同：1
> 
> 时间：2012-04-04T13:50:05.610
> 
> 标签：php, jquery, json

PHP5.1.6 没有 json_encode()，所以我想使用[json_encode 文档](http://www.php.net/manual/en/function.json-encode.php#107968)中的函数。我正在尝试将此函数的输出与 ajax 请求一起使用：

```
fetchArticles: function( e ) {
      $.ajax({
        url: 'article.php',
        type: 'POST',
        data:  { id: $(this).data( 'id_prod' ) },
        dataType: 'json',
        success: function( results ) {
          console.log('finished');
          console.log(results);
        }
      }); 
```

在`article.php`我此时：

```
if ( isset($_POST['id']) ) {
 connect();
 $articles = get_articles( $_POST['id'] );
 echo json_encode( $articles ); return;
} 
```

问题在于将结果返回到 JS 控制台：

*   如果没有结果，则打印空数组，
*   如果有一个结果，则打印正确的对象，
*   但是当有多个结果时，没有任何内容被打印到控制台，甚至没有 word `finished`。

我可以在 HTTP 标头和响应中看到返回了正确的数据，但它没有打印到控制台。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:53:13.797

当 json 文件无法转换时，它会抛出`parsererror`异常，所以试试这个：

```
 $.ajax({
    url: 'article.php',
    type: 'POST',
    data:  { id: $(this).data( 'id_prod' ) },
    dataType: 'json',
    success: function( results ) {
      console.log('finished');
      console.log(results);
    },
    error: function(jqXHR, textStatus, errorThrown) { 
      console.debug(jqXHR, textStatus, errorThrown); 
    }
  }); 
```

当 JSON 无效时，它将输出您的错误。

# javascript - 将包含外部 javascript 文件的外部 html 文件加载到 div

> ID：10012480
> 
> 赞同：1
> 
> 时间：2012-04-04T13:50:06.497
> 
> 标签：javascript, jquery

所以我有一个页面，其中包含指向外部项目页面的链接。这些项目页面通过一个函数加载到一个 div 中：

```
function clickEv(foo) {
    $('#loadContent').load('sub/'+foo+'.html').fadeIn('fast');
    window.location.hash = foo;
} 
```

这些项目页面都具有相同的模板，左侧是 text-div，右侧是图像 div。我想要做的是为 image-div 添加一个滑块。此滑块是一个外部 javascript 文件：

```
$(function() {
var sliderUL = $('.imageBrowser').children('ul'),
    imgs = sliderUL.find('img'),
    imgWidth = imgs[0].width, 
    imgsLen = imgs.length, 
    current = 1,
    totalImgsWidth = imgsLen * imgWidth;

$('#sButtons').find('div').on('click', function() {
    var direction = $(this).data('dir'),
        loc = imgWidth;

    // update current value
    ( direction === 'next' ) ? ++current : --current;

    // if first image
    if ( current === 0 ) {
        current = imgsLen;
        loc = totalImgsWidth - imgWidth;
        direction = 'next';
    } else if ( current - 1 === imgsLen ) {
        current = 1;
        loc = 0;
    }

    transition(sliderUL, loc, direction);
}); 
```

所以首先我在 div 'imageBrowser' 中的无序列表中找到图像，然后使用 div 'sButtons' 中的 prev 和 next 按钮确定我要去哪里。同样，所有项目页面都使用带有 div 和列表的相同模板。

`<script>`我已经尝试通过在项目页面文件的开头附加标签以及包含`.getScript()`在初始`clickEv(foo)`函数中来包含这个slider.js 文件。但是，它似乎不适用于第一个`.load()`，我相信这是因为原始 html 文件中尚不存在 div 的 imageBrowser 和 sButtons？如果我再次按下相同的项目页面链接，第二次加载文件，滑块将按预期工作。每个项目页面都是一样的，例如我打开 project-page1 - 滑块不起作用，我打开 project-page2 - 滑块不起作用，我再次打开 project-page1 - 滑块起作用，我打开 project-page2再次 - 滑块工作。如果我现在切换回 page1，滑块仍然可以工作，但如果我打开 page3，它就不能再次工作了。

我是在尝试一些不可行的事情还是我做错了什么？

// 编辑

我想我现在可以正常工作了，问题是脚本在加载内容之前就被执行了。因此，试图从元素中获取信息的变量只有在它们从缓存中加载时才开始工作。

我所做的是添加`onload="$.getScript('src/slider.js')"`到`<img>`项目页面中的第一个文件中。因此，在加载了所需的元素后，脚本就会被执行！感谢大家，由于性能原因，我仍然会考虑使用 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:58:55.167

如果您在要导入的文件中包含 javascript（原始 javascript，而不是文件链接），您可以按如下方式评估脚本标签中的代码：

```
var scripts = document.getElementByTagId("loadContent").getElementsByTagName("script");
for(i = 0; i < scripts.length; i++){
  eval(scripts[i].innerHTML);
} 
```

我没有在所有浏览器中测试过，但它适用于 Chrome 和 FF

理论上，因为加载的内容已经添加到页面中，所以在评估脚本之前它应该可以工作。

# apache-flex - Flex - 视频显示 FLV

> ID：10012485
> 
> 赞同：0
> 
> 时间：2012-04-04T13:50:30.450
> 
> 标签：apache-flex, air

弹性空气 4.5

我构建了一个显示 FLV 电影问题的 AIR 应用程序，在我的计算机上（以及我检查过的其他 3 个应用程序）一切正常。

但是，在我的客户端计算机（和他的另一台）上，电影没有放映，它发出一个警报，说找不到文件。

奇怪的是：我和客户端计算机上的 nativePath & url & 电影文件完全相同。

Flash 播放器在所有计算机上更新。

有什么建议么？

ps：没有做任何特别的事情，运行应用程序，创建完成后将源提供给视频显示并开始播放。

谢谢！

代码：

```
protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
{
     var viewer:Object;
     var file:File = new File();

     viewer = videoDisplay;

     file.url = 'file:///C:/Videos/08Panorama.flv';

     viewer.source = file.url;

     Alert.show("File Path: " + file.nativePath, file.url);
 } 
```

# java - groovy中的字节数组

> ID：10012493
> 
> 赞同：34
> 
> 时间：2012-04-04T13:51:00.260
> 
> 标签：java, groovy, bytearray

在java中我可以创建字节数组：`byte[] array = new byte[] { 0, 0, 0, 0, 0 };` 但是这个构造在groovy中是无效的。如何在 groovy 中创建字节数组？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-04T13:55:16.833

以下应该足够了：

```
def array = [0, 0, 0, 0, 0] as byte[] 
```

[在这里](http://docs.codehaus.org/display/GROOVY/JN1025-Arrays)查看有关 groovy 中数组的更多详细信息。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-04T14:01:31.750

除了[rich.okelly的回答](https://stackoverflow.com/a/10012581/6509)，

```
byte[] array = [0, 0, 0, 0, 0] 
```

也可以

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T13:55:29.990

您不能以相同的方式初始化文字数组，因为 Groovy 认为花括号形成了一个闭包。你想要的是像

```
def x = [ 0, 0, 0, 0, 0 ] as byte[] 
```

查看更多：[这里](http://groovy.codehaus.org/FAQ+-+Collections,+Lists,+etc.)

# google-app-engine - Google App Engine 用户登录导致重定向循环

> ID：10012509
> 
> 赞同：3
> 
> 时间：2012-04-04T13:51:41.253
> 
> 标签：google-app-engine, google-chrome

我有很多用户在登录[http://entanglement.gopherwoodstudios.com/](http://entanglement.gopherwoodstudios.com/)时遇到问题，这是一个使用 Google 帐户登录并在后端使用 App Engine 的网络游戏。

许多玩家报告在尝试登录时遇到重定向循环错误。我们办公室的一台计算机正在经历这种行为，我们可以对其进行测试，结果如下：

1.  重定向循环错误仅在 Google Chrome 中发生，并且在我们尝试过的每个 Google 帐户中都会发生。
2.  隐身产生相同的结果。
3.  清除 cookie 并重新启动浏览器也不起作用。
4.  登录“appspot.com”版游戏成功。
5.  使用不同的浏览器登录可以正常工作，就像在另一台计算机上使用 Chrome 登录相同的帐户一样。

服务器端使用 Python 和 self.redirect(users.create_login_url(self.request.uri))。根据我在此站点上找到的有关登录重定向的其他信息，我尝试了几次使用 python 重定向的迭代，但似乎没有任何效果。（如[App Engine 登录重定向失败](https://stackoverflow.com/questions/5451495/app-engine-login-redirect-fails)）

我应该在服务器端做些什么吗？我的 Python 代码紧跟 Google 提供的用户登录示例。这是与 App Engine 的用户实现无关的 Chrome 问题吗？

更新 - 这是一个示例事件序列，如下所示：

```
ServiceLoginAuth                                    POST 302        Other
CheckCookie                                         GET  302        https://accounts.google.com/ServiceLoginAuth
SetSID       accounts.youtube.com/accounts          GET  302        https://accounts.google.com/CheckCookie?continue=https%3A%2F%2Fappengine.google.com%2F_ah%2Fconflogin%3Fcontinue%3Dhttp%3A%2F%2Fentanglement.gopherwoodstudios.com%2Fverify&shdf=ChgLEgZhaG5hbWUaDEVudGFuZ2xlbWVudAwSAmFoIhSfkpps7Sou7p0pDcUggvvv-l0GlygBMhT6m5i8V2EjrED8udVQ6r4Zv7VD2A&service=ah&ltmpl=gm&chtml=LoginDoneHtml&checkedDomains=youtube&checkConnection=youtube%3A199%3A0&pstMsg=1
conflogin    appengine.google.com/_ah               GET  (canceled) https://accounts.youtube.com/accounts/SetSID?ssdc=1&sidt=ALWU2ctPyHwOiQrNHkiA%2F7K8edJ99Cfify%2BvvvmKMq1NJed9MhiJ24KelscxzD6XaYmmzTirp3jlKKPe6xa2XkkHR7fR4Gyk%2FiDd%2BO6dbtIns2qkEpSTvzJaQD66SfDKAfpx846QNbu6MsgIcZuSJ5CAILyruSb2eRUW7njEWxVCHtTAeyNWmsLgtyx9kAFjlhE81wgZ5fyqbInld2XSFYC4WyWWjLQPygBhCVLShNqKJ7RaYCJQhcfbNVJOU9CDgzjiH9dtEJACr2Xu0W5JN%2B8pM4d3hcyUcg%3D%3D&continue=https%3A%2F%2Fappengine.google.com%2F_ah%2Fconflogin%3Fcontinue%3Dhttp%253A%252F%252Fentanglement.gopherwoodstudios.com%252Fverify%26auth%3DDQAAAIQAAAD6sQNlJFsUQIrUZMw29w8RwHmwQGvP2ZqQdPRsVz0XGRSmoUK3HxEWytjGroJPTHFAWJCr5ryr5SyWu7ASaeOCGrRZF7H0-wNyL81eJM98LcshCd9eAUHpuwPPXxtOpL9Eq72Akl-ZL0tm59J5r3xMWLvYmPz9O6kcS1_9RvSyjOOOFwClziEVOMeO5oufmZs
conflogin    entanglement.gopherwoodstudios.com/_ah GET  302        Other
verify       entanglement.gopherwoodstudios.com     GET  302        http://entanglement.gopherwoodstudios.com/_ah/conflogin?state=AJKiYcHh2jBzY-th8sqOLfwzTUHt5baRGtYquOLUPRXHgsg0zgaf052TVjKOpFGqd24XAM3jxKHDtz8-Dhnsmik81XwSAewQ02dBeb3Ey0w7GLSPho6LP-BhjQrKDOEVWnsZNWngekespXIfKj-6y62a9o3ewKzgeRo0mRomykVdlrs6mFsL9LM7Qv3pRS0yaj9aLBScP8gYpzbfWYharYZET3PDqO99pNcxVZrZgbG12UharF-rukhAP4bpCPhBHS3aagvphQhTgHIaSk7maeSwmsKr2-hsbdca5E8F50Gjuorh7oNO12RQU9UAbJdiuZ_P62JfqVlFPB4-BhIowQ0Q2jGrT9Ly8X78xNfKIDigHj8kqamew_9it4sjgkKkwnam10xV8ILBB8S8iptlfQuaXPWkZAi9hMeYYa6-cvvBiHWSVnTsoDQ75AjMwKIepP3zevRpcwmWCA9IF-yB_EViugDhc9u62rZZRwBKch-JtSti-jlnJisdE05EjGCSmdRrYYawoSqZdI_ejQV-o6Ot352O3LypMDDtP3ksc0e8LJt4EkmYznT3FhBCmUymCLB-Sw9xq_rb
ServiceLogin www.google.com/accounts                GET  302        http://entanglement.gopherwoodstudios.com/verify
ServiceLogin                                        GET  302        https://www.google.com/accounts/ServiceLogin?service=ah&passive=true&continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttp://entanglement.gopherwoodstudios.com/verify&ltmpl=gm&shdf=ChgLEgZhaG5hbWUaDEVudGFuZ2xlbWVudAwSAmFoIhSfkpps7Sou7p0pDcUggvvv-l0GlygBMhT6m5i8V2EjrED8udVQ6r4Zv7VD2A
conflogin    appengine.google.com/_ah               GET  (canceled) https://accounts.google.com/ServiceLogin?service=ah&passive=true&continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttp://entanglement.gopherwoodstudios.com/verify&ltmpl=gm&shdf=ChgLEgZhaG5hbWUaDEVudGFuZ2xlbWVudAwSAmFoIhSfkpps7Sou7p0pDcUggvvv-l0GlygBMhT6m5i8V2EjrED8udVQ6r4Zv7VD2A
conflogin    entanglement.gopherwoodstudios.com/_ah GET  302        Other
verify       entanglement.gopherwoodstudios.com     GET  302        http://entanglement.gopherwoodstudios.com/_ah/conflogin?state=AJKiYcE0J5fwV9X1rnIOD3aGfKV3EfLCsbXtxgXur-Yqgd7dCnhYNI474er3pCDe63i6L0MKv51cSrtanuQhjzPjGOUZbOdBsATDlAcZDdkyfhqlRE5D7nzs5fDFop23odOD-92CLTAhrdBf9G3Q-HC7ItALo5nej2wxD58zxd0XsLQ0BmezsjWNaI_OrPtjb7z5T7yKnIen-D3NZkxq582CwunrMH_vsD4DM2Oj5TWPVpT3LoFw4-aEQCxztjvvTeUmQd9Tn1CD41BhSEfTVAaQ_68DyCtPSJBs1bKkjavPNIfDo1b0XxlkuukqBumTJlfWiwV0HttGu6hEN7eA91KkInyQ42Avq5VcUo7QobVsCxqhih9nfD3YQb5VaT4gDg0exSfF17Idq_gKjOqmPa-08fKp1wqh1ZzztOiMUXWqVTKmMCg4qdyA5y4bHE40VQ_n9xpV3ZrHQLJRmI2sZ06MSZOg3uUJygwCPy8Jndam1Krasa3ILr0IgymhCjs0VoxarOfdTqfV8zSMLshzNv0TXro_7iplMtdETwFsXdw4YXKaDpizQD18-l_iCP0GQEA6RxiNCxw4
ServiceLogin www.google.com/accounts                GET  302        http://entanglement.gopherwoodstudios.com/verify
ServiceLogin                                        GET  302        https://www.google.com/accounts/ServiceLogin?service=ah&passive=true&continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttp://entanglement.gopherwoodstudios.com/verify&ltmpl=gm&shdf=ChgLEgZhaG5hbWUaDEVudGFuZ2xlbWVudAwSAmFoIhSfkpps7Sou7p0pDcUggvvv-l0GlygBMhT6m5i8V2EjrED8udVQ6r4Zv7VD2A
conflogin    appengine.google.com/_ah               GET  (canceled) https://accounts.google.com/ServiceLogin?service=ah&passive=true&continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttp://entanglement.gopherwoodstudios.com/verify&ltmpl=gm&shdf=ChgLEgZhaG5hbWUaDEVudGFuZ2xlbWVudAwSAmFoIhSfkpps7Sou7p0pDcUggvvv-l0GlygBMhT6m5i8V2EjrED8udVQ6r4Zv7VD2A
conflogin    entanglement.gopherwoodstudios.com/_ah GET  302        Other
verify       entanglement.gopherwoodstudios.com     GET  302        http://entanglement.gopherwoodstudios.com/_ah/conflogin?state=AJKiYcHAxNQQfH71c7VECr-HiYMOnk53-vBka6npDKTcKBmI_p9i6y-_I6IpAlhZkbwpH5KUqoxxvEJimdiMzFMwSrmeuJLCSOB6QN_GRYkdFmc5Skggg-4uNQUmhQcduuDSglNV6kKIQAFjLXh6QngRHmeO6mlsDZ0TyV4zFRjU9cdbvgF7RhKQgDSgRK7hw_UyXsDXDCehdA8b0zSFB0kWpLPgIflokGteTiNve65Q1D4MWwvuCjCMiYhk_ZVSEpvc9-VSuxr4rv5tWCgzU0RaSILQpn6Dasvmb2MrttkGKTp5siP5_WXCtY6tt9iLicCIE5Yz0ZpJgp01_2vxE9kVaHalImgx_uZHW736l9-FKM0Y3yAK-7uPOTAV6CL5UHANaiTVLjqoMTVrnXCDfFsq8PRg70z-D-U2aLGYDXgeqlpKn3oszezHwguyY5WM75TPOJAYCQFs2o1w0v-aomoANBaE8WU2zQ1VkoS8ijQ-udOSReEiDR_o7-DFtvLWlczbl3yORH5Ue2P8o18xCYFdvZJCL-_MltpyaxBI9azP6ngJcz8hu8bxO2sEVmIpzd56jjASfwcH
ServiceLogin www.google.com/accounts                GET  302        http://entanglement.gopherwoodstudios.com/verify
ServiceLogin accounts.google.com                    GET  302        https://www.google.com/accounts/ServiceLogin?service=ah&passive=true&continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttp://entanglement.gopherwoodstudios.com/verify&ltmpl=gm&shdf=ChgLEgZhaG5hbWUaDEVudGFuZ2xlbWVudAwSAmFoIhSfkpps7Sou7p0pDcUggvvv-l0GlygBMhT6m5i8V2EjrED8udVQ6r4Zv7VD2A
conflogin    appengine.google.com/_ah               GET  (canceled) https://accounts.google.com/ServiceLogin?service=ah&passive=true&continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttp://entanglement.gopherwoodstudios.com/verify&ltmpl=gm&shdf=ChgLEgZhaG5hbWUaDEVudGFuZ2xlbWVudAwSAmFoIhSfkpps7Sou7p0pDcUggvvv-l0GlygBMhT6m5i8V2EjrED8udVQ6r4Zv7VD2A
conflogin    entanglement.gopherwoodstudios.com/_ah GET  302        Other
verify       entanglement.gopherwoodstudios.com     GET  302        http://entanglement.gopherwoodstudios.com/_ah/conflogin?state=AJKiYcE7y4DwceZDUhnq9VjbvCXMntARCwn2O8zGJa-TqJjH1QeTSFEeTsleP20ImaDTYNGNFbzF5ViRZuwAXhBcmv2U5hEq4RImYhb0_W4_BI_XPAUf0xVzI25N1mx4dS1IqMx8l6chimKLMWf0gyNENCl1NYJEVkUzZFwDTOaUg_XvRuuSWH0ptDu4FxiysEgxbO0-IVi8mClgvaa42WgRoLZbTZ7rynsIuiOYcha3PzcJ5Ec0eODl6PiNAGeywOQfjMMofBWczBkmpJZiZ0RBHT9cUa5yIxsE9Acer7pUGdVK1VViOr_ymQyXp1aD06FEa05A2DgaPS9OYOHIH5NgZ1HWB-2ZofhDM4EjfKaP-ULXBhioNfzvvczROCZsXPE0fy4j3Q5364B10hniJ9TGgYytT1xGXVumREtCpEF-7md6VFtsFdCAFjcJ1lo-FQ7hQazrA3t_t7KmZSb-5gGES90yfaODCUClnBkakX5h1OAMBIStlfJoojIR19_8S0VdMs_JBwaMG991u1PjdQMR9rKbuQSmXr5HG98dqA0LbzQ6tlwT22b7_6noQ25JgnjcfVutbyL7
ServiceLogin www.google.com/accounts                GET  (failed)   http://entanglement.gopherwoodstudios.com/verify 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:06:43.017

几个月后回到这个问题，我能够查看我们的代码之外的内容并找到触发这种行为的原因。我不确定如何防止这成为我们这边的问题，但这是浏览器设置中的修复。

在 chrome://chrome/settings/content 中，如果选中了“阻止第三方 cookie 和站点数据”框，则会出现重定向循环问题。如果未选中，则登录按预期工作。

# vba - 在 Excel XLA 加载项中公开类

> ID：10012512
> 
> 赞同：7
> 
> 时间：2012-04-04T13:51:52.363
> 
> 标签：vba, excel, xla

我为 Excel 编写了一个 XLA 插件。这个插件包括一个类模块。我想知道如何公开这个类模块以供使用。我四处搜索并找到了一种使用 Visual Studio 的方法，但遗憾的是我没有 Visual Studio。有什么方法可以从 XLA 做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T17:21:05.453

您可以在 XLA 中创建一个返回类实例的公共函数。然后任何引用 XLA 的工作簿都可以调用该函数。假设您有 Book2，其中包含要使用 Class1 的 Class1 和 Book3。将 Class1 Instancing 属性更改为 Public Not Creatable（在类模块中时按 F4）。

在 Book2 的标准模块中创建一个函数

```
Public Function InstantiateClass1() As Class1

    Set InstantiateClass1 = New Class1

End Function 
```

在 Book3 中，调用函数

```
Public Sub DoStuff()

    Dim clsClass1 As Book2Project.Class1

    Set clsClass1 = instantiateclass1

    clsClass1.prop = "something"

    Debug.Print clsClass1.prop

End Sub 
```

在此示例中，Class1 有一个名为 prop 的属性。Book2 的 VBProject 名称已更改为 Book2Project。

# php - magento 层级定价购买 x - x

> ID：10012517
> 
> 赞同：0
> 
> 时间：2012-04-04T13:52:06.153
> 
> 标签：php, magento, loops, count, indexing

我为一堆 magento 产品设置了分级定价，并想更改它们的显示方式。目前它只是说“以 x 数量购买 1”，这并没有真正正确地解释范围。无论如何，它是否可以说“以 x 数量购买 1-9”。例如，我希望每个产品有大约 5 层。

```
Buy 10-19 for £3.32 each
Buy 20-49 for £2.99 each
Buy 50-99 for £2.39 each
Buy 100-199 for £2.39 each
Buy 200-299 for £2.39 each 
```

请注意，这些数字会因产品而异。

我找到了一个已回答的问题，它解释了如何出色地为第一层执行此操作，但我需要它在我的所有层上工作。也许在一个循环内？

[Magento 分组产品标签问题](https://stackoverflow.com/questions/7352978/magento-grouped-products-label-question?answertab=votes#tab-top)

```
<?php
 $_format = 'Buy %1$s for %2$s each';

 if($index === count($_tierPrices) - 1)
 {
      $_format = 'Buy %1$s+ for %2$s each';
 }
 else
 {
      $_next = $_tierPrices[$index + 1];
      $_qty = $_next['price_qty'] - 1;
      if($_qty > 0) $_format = 'Buy %1$s-' . $_qty . ' for %2$s each';
 }

 echo $this->__($_format, $_price['price_qty'], $_price['formated_price']);
?> 
```

您将如何循环此代码以使其影响所有层。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:20:11.413

简单的解决方法

```
<?php
 $_format = 'Buy %1$s for %2$s each';

 if($index === count($_tierPrices) - 1)
 {
      $_format = 'Buy %1$s+ for %2$s each';
 }
 else
 {
      $i  = $i + 1;
      $_next = $_tierPrices[$index + $i];
      $_qty = $_next['price_qty'] -1;

      if($_qty > 0) $_format = 'Buy %1$s-' . $_qty . ' for %2$s each';
 }

 echo $this->__($_format, $_price['price_qty'], $_price['formated_price']);
?> 
```

# android - icu4 anc 自由式

> ID：10012518
> 
> 赞同：0
> 
> 时间：2012-04-04T13:52:08.343
> 
> 标签：android, icu, freetype

我想知道ICU4和freetype有什么区别。许多应用程序或库使用这两个中的任何一个，例如 webkit。这两者之间有什么关系？哪一个更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:49:48.050

它们是完全不同的库，具有完全不同的目的。

[ICU](http://site.icu-project.org/)页面上的第一个简介；

> ICU 是一套成熟的、广泛使用的 C/C++ 和 Java 库，为软件应用程序提供 Unicode 和全球化支持。ICU 具有广泛的可移植性，并在所有平台上以及在 C/C++ 和 Java 软件之间为应用程序提供相同的结果。

[FreeType](http://freetype.sourceforge.net/freetype2/index.html)页面上的第一个简介：

> FreeType 2 是一个软件字体引擎，设计小巧、高效、高度可定制和便携，同时能够产生高质量的输出（字形图像）。它还可以用于图形库、显示服务器、字体转换工具、文本图像生成工具以及许多其他产品中。
> 
> 请注意，FreeType 2 是一种字体服务，不提供 API 来执行更高级别的功能，如文本布局或图形处理（例如，彩色文本渲染、“镂空”等）。但是，它通过提供简单、易于使用和统一的界面来访问字体文件的内容，大大简化了这些任务。

# c# - 在 WP7 上快速获取图像时出错

> ID：10012520
> 
> 赞同：0
> 
> 时间：2012-04-04T13:52:11.683
> 
> 标签：c#, windows-phone-7

```
private void ViewReceivedImage(byte[] buffer)
    {
        try
        {
            MemoryStream ms = new MemoryStream(buffer);
            BitmapImage bi = new BitmapImage();
            bi.SetSource(ms);
            MyImage.Source = bi;
            ms.Close();
        }
        catch (Exception) { }
        finally
        {
            StartReceiving();
        }
    } 
```

我开发此代码以从 PC 屏幕获取图像并在 WP7 上显示，它在 WP7 模拟器上工作正常， [这是在模拟器上工作的视频，](http://www.youtube.com/watch?v=cCwsuj7Hcno) 但是当我在 WP7 设备上安装 xap 时，它不显示所有图像，刷新真的很快，不只显示图像的顶部我想也许 WP7 的硬件在我的电脑前真的很慢。如果我要添加等待时间，我可以放在哪里，或者有什么解决方案？我使用 tcp 套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:39:53.363

因此，请尝试发送更少的数据以加快速度

*   只发送一半的帧数
*   发送更少的颜色数据
*   在发送之前压缩它（压缩它或类似的东西）。

# assembly - DCPU-16 中的 I 和 J 寄存器是特殊的吗？

> ID：10012522
> 
> 赞同：25
> 
> 时间：2012-04-04T13:52:22.417
> 
> 标签：assembly, dcpu-16

DCPU-16 包括 8 个通用寄存器，分别命名为`A, B, C, X, Y, Z, I`和`J`。`I`使用和`J`for 循环计数器有点像程序员的“比喻” 。在 DCPU-16 中，是`I`和`J`专用寄存器，应该只在循环中使用 - 还是它们最终都以相同的颜色结束？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-04T17:03:13.830

一切都表明 DCPU-16 的 8 个主要寄存器是“通用”的：虽然它们是“打算”用于某种用途，但程序员可以随意使用它们。x86 的通用寄存器具有类似的架构。

DCPU-16 上唯一的特殊用途寄存器是 SP、PC 和 O。

编辑：DCPU 1.3 规范引入了单指令 (MVI)，它在执行后将 I 和 J 都加 1，目的是用作快速内存副本。Notch 表示不喜欢这个，所以它最终可能会被丢弃，但现在我和 J*有点*特别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:04:30.923

我确信会出现约定，但指令集与寄存器完全正交，`A, B, C, X, Y, Z, I`因此`J`它们之间在`DCPU-16`.

# java - 后台线程复制集合并重新初始化原始，可能吗？

> ID：10012523
> 
> 赞同：0
> 
> 时间：2012-04-04T13:52:22.767
> 
> 标签：java, multithreading, concurrency

假设我有一堂课：

```
public class Chat {
  private volatile ConcurrentLinkedQueue messages = new ConcurrentLinkedQueue();

  // getter/setter for messages queue
} 
```

我有一个后台线程，它将此类的一个实例作为参数：

```
Thread t = new Thread(new QueuePersister(messages));
t.start(); 
```

线程的任务是：

```
public class QueuePersister implements Runnable {
   private volatile ConcurrentLinkedQueue messages = new ConcurrentLinkedQueue(); 

   public QueuePersister(ConcurrentLinkedQueue messages) {
     this.messages = messages;
   }

   @Override
    public void run() {
        while(true) {

            // this is a 2 step process, probably should synchronize?? i.e. copy and re-initializing
            ConcurrentLinkedQueue copy = messages;
            messages = new ConcurrentLinkedQueue();

            // save to disk using the copy queue

            // sleep for x seconds
         }
    }
} 
```

我想做的想法是：

我的消息被保存到队列中，每隔 x 秒，一个后台线程会创建队列的副本，重新设置原始消息队列，以便它可以开始获取新数据，而旧副本被持久保存到文件/数据库。

这样，任何未来的写入都将写入新队列。

在我的测试中，这不起作用，因为我似乎无法重新初始化传递给线程的队列。

**我相信这是因为消息队列是通过引用传入的，但它传递的是引用的副本，并且不允许您更改引用。您可以更改被引用的对象，但不能更改引用。**

**如果这是真的，那么我有什么选择呢？** 我可以在课堂上公开一些可以为我做这件事的方法吗？

注意：当我的应用程序运行时，Chat 对象只创建一次。

Chat 对象将被多个线程访问。

**更新**

只有一个线程会执行此“持久性”，我希望它在 Chat.messages 队列上工作。我想要它做的只是制作一个集合的副本，然后重新设置聊天的集合，然后它可以花时间将复制的队列版本保存到磁盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:56:09.677

所以`messages`你的线程内部`messages`在`Chat`课堂上是不同的，对吧？所以当你这样做时：

```
 ConcurrentLinkedQueue copy = messages;
   messages = new ConcurrentLinkedQueue(); 
```

这只会影响`Thread`收集字段。你不需要它`volatile`也不需要它是并发的。

我怀疑您正在尝试做的是在线程中使用该集合。由于您使用的是 a `ConcurrentLinkedQueue`，因此您可以从另一个线程对队列进行操作，*而无需*进行复制和替换。当其他线程添加到队列中时，您可以安全地从队列中删除项目。这就是并发课程的全部目的。

您应该将 `messages`字段标记`Chat`为`private final`不可变，因为它不需要更改。您也可以在`Thread`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:57:23.437

我会考虑改用[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)。它有一个`drainTo`方法可以将队列的内容清空到另一个队列中。此时您可以将 LinkedBlockingQueue 声明为 final。

Javadoc

> **public int drainTo（集合 c）**
> 
> 从此队列中删除所有可用元素并将它们添加到给定集合中。此操作可能比重复轮询此队列更有效。尝试将元素添加到集合 c 时遇到的失败可能会导致在引发相关异常时元素既不在集合中，又不属于任何一个集合或两个集合。尝试将队列排空到自身会导致 IllegalArgumentException。此外，如果在操作正在进行时修改了指定的集合，则此操作的行为是未定义的。

# android - Android Facebook 更新用户界面

> ID：10012526
> 
> 赞同：-1
> 
> 时间：2012-04-04T13:52:27.777
> 
> 标签：android, facebook

我有这个连接到 Facebook 的应用程序。出于某种原因，我收到此错误：

> android.view.ViewRoot$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸其视图。

这是我的代码：

活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    app = (AppVariables)getApplicationContext();
    context = getBaseContext();
    facebook = app.getFacebook();
    facebookRunner = new AsyncFacebookRunner(facebook);
    facebookConnection = new FacebookConnection(this);

    internetStatus = (TextView)findViewById(R.id.internetStatus);

    facebookRunner.request("me", facebookConnection);
}

@Override
public void onFacebookResponse(String response) {
    internetStatus.setText(response);
} 
```

这是 FacebookConnection 类：

```
public class FacebookConnection implements RequestListener {

    private FacebookConnectionListener listener;

    public FacebookConnection (FacebookConnectionListener listener)
    {
        this.listener = listener;
    }

    public void updateFacebookListener(String response)
    {
        listener.onFacebookResponse(response);
    }

    @Override
    public void onComplete(String response, Object state) {
        updateFacebookListener(response);
    }

    @Override
    public void onIOException(IOException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onMalformedURLException(MalformedURLException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {
        // TODO Auto-generated method stub

    }
} 
```

这是我的监听器界面：

```
public interface FacebookConnectionListener {

    public void onFacebookResponse(String response);

    } 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:01:50.630

您正在使用*AsyncFacebookRunner*以异步方式发出所有 API 请求。为此，它使用与运行活动的主线程不同的线程。

当异步运行器完成它时，它会自行执行您的*onFacebookResponse*方法，而不是让主线程执行它。

如果您的活动只是在等待图形请求，则不要使用*AsyncFacebookRunner*而是使用常规*Facebook*。

如果没有，那么您的活动应该检查数据是否返回，如果是，则在原始线程中更新它。

我以前从来没有这样做过，所以这不是我个人的经验，我也没有测试过，但是从该教程中的代码看来，您只需将*onFacebookResponse*更改为以下内容：

```
public void onFacebookResponse(String response) {
    this.runOnUiThread(new Runnable() {
        public void run() {
            this.internetStatus.setText(response);
        }
    });
} 
```

# python - 如何在 Python 中生成“大”随机数？

> ID：10012534
> 
> 赞同：29
> 
> 时间：2012-04-04T13:53:01.430
> 
> 标签：python, random, biginteger

如何在 Python 中生成一个大（超过 64 位）随机整数？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-04T13:55:05.960

您可以使用[`random.getrandbits()`](http://docs.python.org//library/random.html?highlight=random.getrandbits#random.getrandbits)：

```
>>> random.getrandbits(128)
117169677822943856980673695456521126221L 
```

如链接文档中所述，`random.randrange()`如果`random.getrandbits()`可用，也可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-14T16:53:33.970

你也可以使用这个函数来生成任意长度的数字。

```
def generateRandomNumber(digits):
    finalNumber = ""
    for i in range(digits // 16):
        finalNumber = finalNumber + str(math.floor(random.random() * 10000000000000000))
    finalNumber = finalNumber + str(math.floor(random.random() * (10 ** (digits % 16))))
    return int(finalNumber) 
```

# google-play - 如何从安卓市场下载APK

> ID：10012535
> 
> 赞同：0
> 
> 时间：2012-04-04T13:53:02.970
> 
> 标签：google-play, apk

我正在开发一个需要在设备上安装另一个应用程序的应用程序。

如果应用程序尚未安装在设备上，**我想通过我的应用程序从 android 市场下载它（.apk 文件）并将其安装在设备上**。

我怎样才能实现它。

# jaxb - MOXy JAXB：如何从编组中排除元素

> ID：10012542
> 
> 赞同：9
> 
> 时间：2012-04-04T13:53:23.693
> 
> 标签：jaxb, eclipselink, moxy

我有我的模型：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class CustomerTest {

    private Long id;

    @XmlPath("contact-info/billing-address")
    private AddressTest billingAddress;

    @XmlPath("contact-info/shipping-address") 
    private AddressTest shippingAddress;

    @XmlPath("FileHeader/SchemaVersion/text()")
    private String schemaVersion;
} 
```

我这样填写对象：

```
private void marshallCustomerTest() {
        try {
            JAXBContext jc = JAXBContext.newInstance(CustomerTest.class);

            CustomerTest customer = new CustomerTest();
            customer.setId(new Long(10));
            customer.setSchemaVersion("3.2");

            AddressTest billingAddress = new AddressTest();
            billingAddress.setStreet("1 Billing Street");
            customer.setBillingAddress(billingAddress);

            AddressTest shippingAddress = new AddressTest();
            shippingAddress.setStreet("2 Shipping Road");
            customer.setShippingAddress(shippingAddress);

            Marshaller m = jc.createMarshaller();
            m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
            m.marshal(customer, System.out);
        } catch (JAXBException jex) {
            jex.printStackTrace();
            log.error(jex);
        }
    } 
```

这将产生下一个 XML：

```
<customerTest xmlns:fe="http://www.facturae.es/Facturae/2009/v3.2/Facturae" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
   <id>10</id>
   <contact-info>
      <billing-address>
         <street>1 Billing Street</street>
      </billing-address>
      <shipping-address>
         <street>2 Shipping Road</street>
      </shipping-address>
   </contact-info>
   <FileHeader>
      <SchemaVersion>3.2</SchemaVersion>
   </FileHeader>
</customerTest> 
```

如您所见，'id' 属性没有 @XmlPath 注释，但这也存在于最终 XML 中。我知道我可以避免将 'id' 属性设置为 null 的这种行为，但我想知道是否有其他方法。关键是我的真实模型比这个大得多，我必须将很多属性设置为空。

有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T14:04:25.887

您可以将属性标记为`@XmlTransient`将其从 XML 表示中排除：

```
@XmlTransient
private Long id; 
```

或者您可以注释您的类型，`@XmlAccessorType(XmlAccessType.NONE)`以便仅映射带注释的字段/属性。

```
@XmlAccessorType(XmlAccessType.NONE)
public class CustomerTest { 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)

# php - ucwords 和法语重音字母编码

> ID：10012545
> 
> 赞同：6
> 
> 时间：2012-04-04T13:53:28.503
> 
> 标签：php, encoding, utf-8, diacritics

我们有一个全部用大写字母的加拿大地址数据库，客户要求我们将第一个字母和“-”后面的字母转换为小写

所以我做了这个功能，但我遇到了法语重音字母的问题。

当文件和字符集为 ISO-88591 时它工作正常，但是当我尝试将其设为 UTF-8 时它不再工作了。

输入示例：'damien-claude élanger' 输出：Damien-Claude élanger

utf-8 中的 é 将变为 �

```
 function cap_letter($string) {
            $lower     = str_split("àáâçèéêë");
            $caps      = str_split("ÀÁÂÇÈÉÊË");
            $letters   = str_split(strtolower($string));

            foreach($letters as $code => $letter) {
                if($letter === '-' || $letter === ' ') {
                    $position = array_search($letters[$code+1],$lower);
                    if($position !== false) {
                        // test
                        echo $letters[$code+1] . ' == ' . $caps[$position] ; 
                        $letters[$code+1] = $caps[$position];
                    }
                    else {
                        $letters[$code+1] = mb_strtoupper($letters[$code+1]);
                    } 
                }
            }
            //return ucwords(implode($letters)) ;
            return implode($letters) ;
        } 
```

我想到的另一个解决方案是： ucwords(strtolower($str)) 因为所有地址都已经大写，所以即使在应用 strtolower 之后 É 也会保持 É 。

但是我会遇到在 ex 里面有 É 的问题：XXXÉXXÉ

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T13:55:06.853

尝试`mb_*`多字节字符的字符串函数。

```
echo mb_convert_case(mb_strtolower($str), MB_CASE_TITLE, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:49:42.880

我在西班牙语中有同样的问题，我创建了这个函数

```
function capitalize($string)
{
    if (mb_detect_encoding($string) === 'UTF-8') {
        $string = mb_convert_case(utf8_encode($string), MB_CASE_TITLE, 'UTF-8');
    } else {
        $string = mb_convert_case($string, MB_CASE_TITLE, 'UTF-8');
    }
    return $string;
} 
```

# android - 查看包含大量图像的分页，它甚至可以工作吗？

> ID：10012548
> 
> 赞同：1
> 
> 时间：2012-04-04T13:53:45.047
> 
> 标签：android, memory, bitmap, android-fragments

**内存问题**

因此，我正在编写一个应用程序，该应用程序应该能够分页浏览顶部有一个 640 x 480 大图像和 3 个属于延迟加载的画廊的图像的详细视图。遵循谷歌设计指南，这是他们建议的做法。在由于内存不足而崩溃之前，我可以分页浏览大约 12 - 13 个片段。我认为这个问题有几个罪魁祸首。

1.) 我正在使用 FragmentStatePager。当内存成为问题时，这不应该破坏未被查看的片段吗？这没有发生。我以为是自动的。我该怎么做才能做到这一点？这可能与我的 Fragment 实现方式有关吗？我在 onCreateView 中完成所有活动配置。为了彻底起见，我已经包含了这个来源。普通香草在这里：

```
public static class MyAdapter extends FragmentStatePagerAdapter {

        public MyAdapter(FragmentManager fm) {
            super(fm);              
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {
            return InventoryDetailFragment.newInstance(position);
        }
    } 
```

2.）我有一种方法试图找出需要下载的图像的大小而不将其放入内存中。然后在下载到所需大小的同时压缩图像。这没有成功实施。但我不确定出了什么问题。

```
private Bitmap downloadBitmap(String url, int width, int height) {
    Bitmap bitmap = null;
    int scale = 1;
    try {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;  
        bitmap = BitmapFactory.decodeStream((InputStream)new URL (url).getContent(), null, options);

        if (options.outHeight > height || options.outWidth > width) {
            scale = (int) Math.max(((options.outHeight)/ height), ((options.outWidth)/ width));             }

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        bitmap = BitmapFactory.decodeStream((InputStream)new URL (url).getContent(), null, o2); 
        cache.put(url, new SoftReference<Bitmap>(bitmap));

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Error e){
        Log.d("TEST", "Garbage Collector called!");
        System.gc();
    }
    return bitmap;
} 
```

我已经尝试了所有我知道如何做的事情，但这超出了我对 Android/Java 的微薄掌握。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:20:54.893

您需要更改以下几点：

1.  这是一个可怕的想法：`BitmapFactory.decodeStream((InputStream)new URL (url).getContent(), null, options);`每次执行此操作时，您都会从网络获取图像（因此在您发布的代码中*两次*）。相反，您需要下载图像并将其缓存在本地。

2.  将逻辑添加到您的片段中，以便`recycle()`在片段分离后立即调用位图。添加逻辑以在附加片段时始终重新加载图像（从缓存中）。

3.  最后，你的`inSampleSize`计算是错误的。`inSampleSize`应该是一个 2 的幂的值，例如 1,2,4,8。您可以使用对数或简单的二进制逻辑来获得正确的逻辑，这就是我使用的，它总是使用至少 2 进行下采样（只有在您知道图像太大时才调用它）：

-

```
int ratio =  (int) Math.max((height/options.outHeight), ( width/options.outWidth); //notice that they're flipped     
  for (int powerOfTwo = 64; powerOfTwo >=2; powerOfTwo = powerOfTwo >> 1 ) { //find the biggest power of two that represents the ratio
    if ((ratio & powerOfTwo) > 0) {
      return powerOfTwo;
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:16:55.913

如果您使用 opengl 实现您的图形，这将不计入内存。另一种选择是使用

```
android:largeHeap="true" 
```

在清单中。可能正在工作。

您是否使用 ddvm 来搜索内存泄漏？

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

# clojure - 如何分配 nil 而不是异常字符串

> ID：10012550
> 
> 赞同：0
> 
> 时间：2012-04-04T13:53:58.757
> 
> 标签：clojure, try-catch

我的问题是如何从异常中返回 nil 而不是 - 在使用 slurp 的情况下 - 不会加载的文件名和异常文本？这是详细信息。

我希望以下代码返回零：

```
(defn open-csv-file
    "Attempts to open a .csv file and complains if the file is not present."

    [file-name]
        (let [file-data 
            (try 
                (slurp file-name)
                (catch Exception e (.getMessage e)))]
            file-data)) 
```

这是现在返回的示例。

```
bene-cmp.core=> (load-file "src/bene_cmp/core.clj")
#'bene-cmp.core/-main
bene-cmp.core=> (def x  (open-csv-file "test_file.csv"))
#'bene-cmp.core/x
bene-cmp.core=> x
"test_file.csv (No such file or directory)"
bene-cmp.core=> 
```

我试图避免修改此函数，以便它引发异常，然后让调用者使用 try/catch 块。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:58:51.763

如果我理解你的问题，你只需要改变这个：

```
(catch Exception e (.getMessage e)))] 
```

对此：

```
(catch Exception e))] 
```

# jquery-mobile - 当您导航返回时，jQuery Mobile 如何为页面设置动画？

> ID：10012559
> 
> 赞同：1
> 
> 时间：2012-04-04T13:54:28.127
> 
> 标签：jquery-mobile

当您在使用 jQuery Mobile 的站点上单击浏览器后退按钮时，不是立即离开页面，而是上一个页面被动画化。这是如何实现的？我认为他们无法拦截浏览器的后退按钮（我可以理解为什么浏览器制造商不想允许这样做）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:19:20.020

使用哈希 URL 方案时（未`pushState`启用插件）：

> 独立于单击发生的哈希更改，例如当用户单击后退按钮时，通过**hashchange 事件**处理，该事件使用 Ben Alman 的 hashchange 特殊事件插件（包含在 jQuery Mobile 中）绑定到窗口对象。当哈希更改发生时（以及第一页加载时），hashchange 事件处理程序会将 location.hash 发送到 $.mobile.changePage() 函数，该函数依次加载或显示引用的页面。

*来源：http: [//jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-navmodel.html)*

启用插件后，`pushState`情况相同，但`hash`会转换为正常/可读的 URL：

> 有一个可选功能可以将上一节中提到的较长的、基于散列的 URL 转换为更清晰的完整文档路径，并使 Ajax 跟踪在 URL 结构中透明。这是作为 Ajax 链接的基于哈希的 URL 系统之上的增强而构建的。请注意，尽管名称如此，但此功能在当前版本中通过使用 history.replaceState（而不是 history.pushState）在技术上转换基于哈希的 url，因为这在我们的目标平台上更可靠地工作。对于不支持 history.replaceState 的浏览器，或者如果禁用此功能，将使用基于哈希的 URL。

*来源：http: [//jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-navmodel.html)*

此外，这里是该`hashchange`活动的 MDN 文档：[https ://developer.mozilla.org/en/DOM/window.onhashchange](https://developer.mozilla.org/en/DOM/window.onhashchange)

# java - 如何使用小端格式的 SeekableByteChannel 读写整数？

> ID：10012560
> 
> 赞同：2
> 
> 时间：2012-04-04T13:54:35.470
> 
> 标签：java, endianness, nio2

我需要用小端格式的 SeekableByteChannel 读写有符号和无符号整数。这可能看起来很愚蠢，但我在 JDK 中找不到任何东西。我是否错过了什么，或者我应该自己推出这个？这没问题，但我今天不想重新发明轮子。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:58:40.970

听起来像是[ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)的作品。

有点像

```
public static void main(String[] args) {
    byte[] payload = toArray(-1991249);
    int number = fromArray(payload);
    System.out.println(number);
}

public static  int fromArray(byte[] payload){
    ByteBuffer buffer = ByteBuffer.wrap(payload);
    buffer.order(ByteOrder.LITTLE_ENDIAN);
    return buffer.getInt();
}

public static byte[] toArray(int value){
    ByteBuffer buffer = ByteBuffer.allocate(4);
    buffer.order(ByteOrder.LITTLE_ENDIAN);
    buffer.putInt(value);
    return buffer.array();
} 
```

# c# - 拆分后按值分组结果

> ID：10012561
> 
> 赞同：3
> 
> 时间：2012-04-04T13:54:35.840
> 
> 标签：c#, logging, split, linq-group

我已经搜索但没有找到我的答案。免责声明：我是 C# 的新手，但我的任务是创建以下程序：从现有日志文件中读取，按选项卡解析它们，将结果限制为特定状态（处理电子邮件），按部门分组（即投资银行），然后按部门计算电子邮件转换量的统计数据，并打印到新的日志文件。

在提出问题之前，想先介绍一下程序本身的背景。我目前正处于我想按部门分组的地步，但不知道该怎么做。

编辑：原始数据：

```
Status          Division      Time          Run Time    Zip Files   Conversions Returned Files  Total E-Mails   
Process E-mail  Investment Bank  12:00 AM   42.8596599  1               0               1             1 
End Processing                   12:05 AM   44.0945784  0               0               0             0 
Process E-mail  Investment Bank  12:10 AM   42.7193253  2               1               0             1 
Process E-mail  Treasury         12:15 AM   4.6563394   1               0               2             2 
```

这是我到目前为止的代码：

```
static void Main()
{
    {

        List<string> list = new List<string>();
        using (StreamReader reader = new StreamReader(Settings.LogPath + "2012-3-10.log"))
        {
            string line;
            int i = 0;
            while ((line = reader.ReadLine()) != null)
            {
                list.Add(line);
                i++;

                string[] split = line.Split('\t');

                string processing = split[0];

                    if(processing.StartsWith("Process"))
                    {
                        string division = split[1];
                        int zipFiles;
                        int.TryParse(split[4], out zipFiles);
                        int conversions;
                        int.TryParse(split[5], out conversions);
                        int returnedFiles;
                        int.TryParse(split[5], out returnedFiles);
                        int totalEmails;
                        int.TryParse(split[5], out totalEmails); 
```

所以我有这个程序，它会像这样向控制台吐出一些东西：

```
Investment Bank
1
0
1
1

Treasury
1
0
2
2

Investment Bank
2
1
0
1 
```

我现在要做的是按“投资银行”、“国库”等分组，然后能够计算总数。

最终的日志文件将如下所示：

```
Division         Zip Files Conversions Returned Files Total E-mails
Investment Bank   3            1             1              2
Treasury          1            0             2              2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:28:14.840

以下代码可以满足您的需要：

```
string filename = @"D:\myfile.log";
var statistics = File.ReadLines(filename)
    .Where(line => line.StartsWith("Process"))
    .Select(line => line.Split('\t'))
    .GroupBy(items => items[1])
    .Select(g =>
            new 
                {
                    Division = g.Key,
                    ZipFiles = g.Sum(i => Int32.Parse(i[2])),
                    Conversions = g.Sum(i => Int32.Parse(i[3])),
                    ReturnedFiles = g.Sum(i => Int32.Parse(i[4])),
                    TotalEmails = g.Sum(i => Int32.Parse(i[5]))
                });

Console.Out.WriteLine("Division\tZip Files\tConversions\tReturned Files\tTotal E-mails");
statistics
   .ToList()
   .ForEach(d => Console.WriteLine("{0}\t{1}\t{2}\t{3}\t{4}", 
           d.Division, 
           d.ZipFiles, 
           d.Conversions, 
           d.ReturnedFiles,  
           d.TotalEmails)); 
```

如果不弄乱匿名类而是使用数组，它可能会更短（虽然不太清楚）。如果您对此类代码感兴趣，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:03:33.497

然后我会建立一个类来处理这个。

就像是

```
public class xxxx
{
    Public string Division {get;set}
    Public Dictionary<string,int> something{get;set;}
} 
```

然后你可以把它们封装起来

```
List<xxx> Divisions; 
```

不确定这是否是最佳的，但它会起作用。

# sql-server - 如何在 SQL Server 2008 中检查字符串是否为阿拉伯语

> ID：10012567
> 
> 赞同：1
> 
> 时间：2012-04-04T13:54:45.470
> 
> 标签：sql-server

如何检查字符串是否为阿拉伯语，我必须将我的语言 ID 列更新为英语或阿拉伯语

```
 IF(PATINDEX('%[^أ-ي]%', RTRIM(@STRING))=0)
        BEGIN
              SET @RETURNVALUE='A'
        END
 ELSE IF(PATINDEX('%[^A-Za-z]%', RTRIM(@STRING))=0)
        BEGIN
              SET @RETURNVALUE='E'
        END 
```

如果假设名称以 S 开头并遵循阿拉伯名称，则它会抛出 null

前任：`set @STRING= N'العربيةs'`

请帮助解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T16:03:19.133

您有效使用的 IF 语句说：

> 如果字符串不包含非阿拉伯字符，则将结果设置为 'A'
> 
> 否则，如果字符串不包含非拉丁字符，则将结果设置为 'E'

如果您的字符串同时包含阿拉伯文和拉丁文，则不会设置结果值。

删除正则表达式中的否定，如下所示：

```
declare @string nvarchar(50), @returnvalue varchar (50)

set @string = N'العربيةs'
set @returnvalue = ''

IF(PATINDEX(N'%[أ-ي]%', RTRIM(@string ))>0)
    BEGIN
      SET @returnvalue= @returnvalue + 'A'
    END
IF(PATINDEX(N'%[A-Za-z]%', RTRIM(@string ))>0)
    BEGIN
      SET @returnvalue= @returnvalue + 'E'
    END

 select @string, @returnvalue 
```

返回

```
العربيةs    AE 
```

**第一条评论后**更新****

 **```
IF(PATINDEX(N'%[أ-ي]%', RTRIM(@string ))>0)
    BEGIN
      SET @returnvalue= 'A'
    END
ELSE IF(PATINDEX(N'%[A-Za-z]%', RTRIM(@string ))>0)
    BEGIN
      SET @returnvalue= 'E'
    END

RETURN @returnvalue 
```**

# android - 如何创建自定义二维码阅读器？

> ID：10012569
> 
> 赞同：3
> 
> 时间：2012-04-04T13:54:53.767
> 
> 标签：android, qr-code

我知道 zing 是最著名的二维码阅读器，我可以很容易地将它添加到我的应用程序中。但我需要一些不同的东西。

故事是：这个二维码应该只对 20 个（预定义的）二维码敏感。当用户单击按钮时，QR 码阅读器将变为活动状态。如果二维码是 20 个，那么在屏幕中间（当相机仍然打开时）我必须放置一个带有图像和两个按钮的对话框。由于摄像头仍处于开启状态，如果用户移动摄像头以捕捉另一个二维码，则包含其内容的对话框应相应更改。

我不知道它怎么可能。如果您有任何建议，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:22:49.273

所以我想你应该继续使用 xzing 作为要走的路。我并不是说将 xzing 安装为向其发送意图的 Android 应用程序，而是获取源代码并让它发挥作用。解码 QR 后检查结果字符串是否在您的 20 列表中。如果是，则显示您的对话框，如果不是则忽略该结果。使用 Xzings 内置的“批量扫描”模式扫描多个 QR。

# powerbuilder - 需要更新时使用插入的 PowerBuilder DataWindow

> ID：10012570
> 
> 赞同：1
> 
> 时间：2012-04-04T13:54:55.187
> 
> 标签：powerbuilder

我遇到的问题是：我有一个 DataWindow，它在窗口打开时检查是否存在任何行，如果不存在，我手动插入一行。在某些时候，在我调用 DataWindow 上的更新之前，一行被插入到表中。当我调用更新时，一行已经存在并且我的更新无法保存，因为它使用的是插入而不是更新。有没有办法缓解这种情况？

```
dw_dates.SetTransObject(SQLCA);
dw_dates.Retrieve(gs_facility_pfi, is_pcn);    

if(dw_dates.rowcount() = 0) then
    int row;
    row = dw_dates.InsertRow(1);    
    dw_dates.setitem(row, 'patient_ctrl_num', is_pcn);
    dw_dates.setitem(row, 'pfi_num', gs_facility_pfi);  
end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:31:11.000

PowerBuilder 不会自动知道那里是否存在具有相同键的行。DataWindow 根据行状态生成 INSERT 或 UPDATE 语句（有关详细信息，请参阅帮助中的 GetItemStatus()）。

目前还不清楚您的要求是什么。如果要插入新记录或覆盖现有记录，我建议从 DataWindow 进行存储过程更新，以确定是否需要 INSERT 或 UPDATE 并采取相应措施。如果您希望此客户端始终插入新记录，并适当调整主键值，以免覆盖或与现有数据冲突，我建议您查看您的 DBMS 是否支持您的键列的标识或序列值，然后查看 DataWindow 的更新属性对话框中的标识列功能。

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:02:06.523

您需要先回答一个业务问题。你想丢失其他人的更新吗？

如果您正在获取 DW 消息：在检索和更新之间更改了行...这是一个有效的消息。如果您查看数据窗口，您会注意到默认情况下，更新使用的列都是可编辑的列。您可以将其更改为仅主键。这将使您的更新“工作”，但它也会覆盖其他人的更改。

听起来你的PK太笼统了。您可能想查看一种独特的、顺序驱动的方法。

杰森

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:29:02.987

不确定是否会使用“ `row = dw_dates.InsertRow(1);` ”，如果您想要一个虚拟行然后尝试使用 `row = dw_dates.InsertRow(0);` 这将在末尾插入行。此外，您可能希望使用 SetRow 或 ScrolltoRow 以使其成为当前行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:55:38.493

所以你说的是其他用户插入了该行。然后，您必须在调用 datawindow 上的 update() 之前再做一次检查。最好的解决方案是使用存储过程更新并检查行是否存在并决定是否执行 INSERT 或 UPDATE。但是话又说回来，如果您执行更新，您将覆盖其他人的数据。

# cmake - CMake中库之间的重叠依赖关系

> ID：10012571
> 
> 赞同：13
> 
> 时间：2012-04-04T13:54:55.907
> 
> 标签：cmake

假设有以下目录结构：

```
projects
   |
   +--lib1
   |   |
   |   +-CMakeFiles.txt
   |
   +--lib2
   |   |
   |   +-CMakeFiles.txt
   |
   +--test
       |
       +-CMakeFiles.txt 
```

### lib1/CMakeFiles.txt：

```
cmake_minimum_required(VERSION 2.0)

add_library(lib1 STATIC lib1.cpp) 
```

### lib2/CMakeFiles.txt：

```
cmake_minimum_required(VERSION 2.0)

add_subdirectory(../lib1 ${CMAKE_CURRENT_BINARY_DIR}/lib1)
add_library(lib2 STATIC lib2.cpp)
target_link_libraries(lib2 lib1) 
```

### 测试/CMakeFiles.txt：

```
cmake_minimum_required(VERSION 2.0)
project(test)

add_subdirectory(../lib1 ${CMAKE_CURRENT_BINARY_DIR}/lib1)
add_subdirectory(../lib2 ${CMAKE_CURRENT_BINARY_DIR}/lib2)

add_executable(test main.cpp)
target_link_libraries(test lib1 lib2) 
```

即`lib2`取决于`lib1`并且`test`取决于它们两者。（我知道技术上的静态库不会“链接”，但这只是一个例子。）

问题在于，在当前设置下，lib1 编译了两次——第一次在“test”构建目录中，第二次在“test/build_directory/lib2/build_directory”中。我想避免这种情况。

我希望能够将对 lib1、lib2 或两者（使用 add_subdirectory）的依赖项添加到位于其他地方的任何项目中。所以移动 CMakeFiles 不是一种选择。我还想避免多次编译任何库。

我怎样才能做到这一点？

平台：CMake v. 2.8.4 和 Windows XP SP3

顶级 CMakeLists.txt 文件不是一个选项，因为我想保持一个干净的顶级目录，并能够在其他项目中包含可以位于其他地方的库。因为它是 Windows，所以我不能“在系统范围内安装包”——我不想失去即时切换编译器的能力。使用不同编译器构建的实用程序库将使用不同的 C 运行时库/ABI，因此将不兼容。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T20:05:23.790

另一种解决方案是在子目录-CMakeLists.txt 的顶部添加一个守卫：

```
if(TARGET targetname)
    return()
endif(TARGET targetname) 
```

这将导致 cmake 在第二次添加子目录时不执行任何操作（当然，如果在该文件中定义了 targetname）。

这将导致 libbeeing 在 build/ 树中的任意位置（取决于首先添加它的模块）中构建，但它只会构建一次并链接到任何地方。

在您的示例中，您将添加

```
if(TARGET lib1)
    return()
endif(TARGET lib1) 
```

在 lib1/CMakeFiles.txt 的顶部

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T20:05:51.670

使用 CMake，库依赖项是可传递的，因此您不应调用`add_subdirectory`两次`test/CMakeFiles.txt`（也不需要将其`lib1`列为依赖项，`test`因为它已经是`lib2`'s 的依赖项）。

因此，您可以将`test`'s CMakeFiles.txt 修改为：

```
cmake_minimum_required(VERSION 2.8.7)  # Prefer the most current version possible
project(test)

add_subdirectory(../lib2 ${CMAKE_CURRENT_BINARY_DIR}/lib2)

add_executable(test main.cpp)
target_link_libraries(test lib2) 
```

此外，您可能应该`cmake_minimum_required`从非项目 CMakeFiles.txt 文件（lib 文件）中删除调用。有关更多信息，请运行：

```
cmake --help-policy CMP0000 
```

`lib1`如果您添加一个类似的 test2 子目录和依赖于and 的项目，此设置仍将导致重新编译所有库`lib2`。如果您真的不想在 中包含顶级 CMakeFiles.txt `projects/`，那么您将无法解决您正在做的事情，或者您可以使用`export`or`install`命令。

`export`将创建一个文件，该文件`include`可由其他项目 d 并将目标导入到调用`include`.

`install`可以将库安装到`projects/`. 根据您的源目录结构，这可能具有仅使预期的库 API 标头可用于依赖项目的好处。

但是，如果修改了这两个选项，则需要重新构建（和安装）依赖库项目，而您当前的设置包括项目中的所有依赖目标，因此对依赖库中源文件的任何更改都会导致您`test`目标过时。

有关 and 的更多详细信息`export`，请`install`运行：

```
cmake --help-command export
cmake --help-command install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:15:55.850

也许在您的项目目录中添加一个顶级 CMakeLists.txt。就像是：

```
project( YourProjects )

add_subdirectory( lib1 )
add_subdirectory( lib2 )
add_subdirectory( test ) 
```

这应该足够了，并且会在您的顶级构建目录中为您提供解决方案文件或生成文件。然后，您应该`add_subdirectory( ../lib1 ...`从您的 lib1 和 lib2 项目中删除 ，而只需链接到它们。CMake 在编译测试时会知道如何找到 lib1 和 lib2。

即在lib2中：

```
project( lib2) 
add_library(lib2 STATIC lib2.cpp)
target_link_libraries(lib2 lib1) 
```

并在测试中：

```
project( test )
add_executable(test main.cpp)
target_link_libraries(test lib1 lib2) 
```

额外的好处：您将在 lib2 目录中获得用于构建 lib2（具有依赖 lib1）的 makefile/解决方案文件...

# vb.net - 如何将 MDIChild 表单定位在 MDIParent 的右下角？

> ID：10012572
> 
> 赞同：2
> 
> 时间：2012-04-04T13:54:57.963
> 
> 标签：vb.net, mdichild, mdiparent

看起来像一个愚蠢的问题，但我尝试了以下（其中“我”是一个 MDIParent 形式）：

```
Dim frmNotif As New frmNotifica
With frmNotif
  .MdiParent = Me
  .StartPosition = FormStartPosition.Manual
  .Location = New Point(ClientSize.Width - .Width, ClientSize.Height - .Height)
  .Show()
End With 
```

但它不起作用。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:14:38.077

假设您有一个“空”的 MDI 父表单（没有停靠面板或 ToolStrips），这应该可以：

```
Dim frmNotif As New frmNotifica
With frmNotif
  .MdiParent = Me
  .StartPosition = FormStartPosition.Manual

  Dim leftStart As Integer = Me.ClientSize.Width - (.Width + (SystemInformation.Border3DSize.Width * 2))
  Dim topStart As Integer = Me.ClientSize.Height - (.Height + (SystemInformation.Border3DSize.Height * 2))

  .Location = New Point(leftStart, topStart)
  .Show()
End With 
```

如果您在 MDIParent 中添加了面板或 ToolStrip，则您也必须将其考虑到您的等式中。

# asp.net-mvc-3 - 最后带有点字符的MVC3动作方法参数

> ID：10012578
> 
> 赞同：1
> 
> 时间：2012-04-04T13:55:13.657
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我的应用程序中有一个有趣的问题。

我的操作方法接收字符串参数。它适用于所有情况，除了此字符串中的最后一个字符是点字符的情况。由于无法找到这种情况的路由（我猜是这样），IIS 显示 HTTP 404 错误。

我的方法接收乐队的名字。例如。

1.  [http://mywebsite/artist/The-Strokes](http://mywebsite/artist/The-Strokes)工作正常
2.  [http://mywebsite/artist/RIO](http://mywebsite/artist/R.I.O)。正如我上面描述的那样失败。

我对该控制器的路线描述为：

routes.MapRoute("", "artist/{artist}", new { controller = "Artists", action = "Name", artist = (string)null });

这是什么原因，我该如何解决？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:08:45.167

您可以考虑在路由规则中使用 {*catchall} ，然后在您的操作中处理参数

```
"artist/{*artist}" 
```

或者您可以尝试将[这篇文章](http://dheemhi.blogspot.it/2010/12/url-manipulation-implementing-routebase.html)作为另一篇文章（也许更好的方法）

# adobe - 页面上最多需要一个组件实例

> ID：10012586
> 
> 赞同：1
> 
> 时间：2012-04-04T13:55:37.337
> 
> 标签：adobe, components, instance, aem, day-cq

我用 Day CQ5 开发网站。我正在开发模板、组件和页面，但遇到了问题。在站点的页面上可以是一个组件的实例，并且需要防止添加其他实例。我怎样才能做到这一点？也许有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:15:58.153

如果作者不需要将组件添加到页面的不同区域（parsys 容器）的能力，您可以将其包含在静态位置。然后，作者可以填充组件或将其留空以隐藏它。然后你会把它放在伙伴之外，这样他们就不能添加额外的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:11:03.680

这只是一个提示，但它可能会解决您的问题：[http](http://dev.day.com/content/kb/home/cq5/Development/Components/HowToDefineComponentListDynamically.html) ://dev.day.com/content/kb/home/cq5/Development/Components/HowToDefineComponentListDynamically.html 。

# coronasdk - Corona SDK - 弹出窗口（带 Director 类）

> ID：10012587
> 
> 赞同：0
> 
> 时间：2012-04-04T13:55:37.770
> 
> 标签：coronasdk

我是游戏开发的新手，我正在尝试为我当前的项目创建一个简单的 GUI 框架。我目前正在使用 Director Class 1.4 进行场景管理。我有我的项目o改变场景，但现在我想创建一个弹出窗口。我只想让弹出窗口显示在我所在的当前场景上。下面是我的 main.lua 和 menu.lua（我的初始场景）的代码。如果有人可以帮助我，我将不胜感激。请尽量具体，因为我对 Corona 和一般编程非常陌生。

主程序.lua

```
_W = display.contentWidth
_H = display.contentHeight

local director = require ("director");

local mainGroup = display.newGroup();

local function main()

mainGroup:insert(director.directorView);

director:changeScene("menu");

return true;
end

main(); 
```

菜单.lua

```
module(..., package.seeall)

function new()
    local localGroup = display.newGroup();

    local bg = display.newImage("Images/background1.PNG");  

    local myText = display.newText("Merchant", 0, 0, native.systemFont, 24)
    myText:setTextColor(255, 255, 255)
    myText:setReferencePoint(display.CenterReferencePoint);
    myText.x = _W/2; myText.y = _H/2;

    local hero_btn = display.newImage("Images/weaponcraft.PNG", 25, 25);
    hero_btn:setReferencePoint(display.BottomLeftReferencePoint);
    hero_btn.x = 252; hero_btn.y = 475;
    hero_btn.scene = "heroMain";

    local craft_btn = display.newImage("Images/smithing.PNG", 25, 25);
    craft_btn:setReferencePoint(display.BottomLeftReferencePoint);
    craft_btn.x = 7; craft_btn.y = 475; 
    craft_btn.scene = "craftMain";

    local inventory_btn = display.newImage("Images/inventory1.png");
    inventory_btn:setReferencePoint(display.CenterReferencePoint);
    inventory_btn.x = _W/2; inventory_btn.y = 430;
    --inventory_btn.scene = "inventory";

    function changeScene(e)
        if(e.phase == "ended") then
            director:changeScene(e.target.scene);
        end
    end     

    localGroup:insert(bg);
    localGroup:insert(hero_btn);
    localGroup:insert(craft_btn);

    hero_btn:addEventListener("touch", changeScene);
    craft_btn:addEventListener("touch", changeScene);

    return localGroup;
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T08:39:51.740

您可以创建自定义弹出窗口，并可以自己处理我正在放置示例代码。

```
--function to create a dialog to be shown on the game over
local function gameOverAlertScreen()
    --Display item used in the popup screen
    local alertBox , restartBtn, levelBtn, soundOnOffSwitch, quitOnOffSwitch, imageSheetSoundOnOff, imageSheetQuitOnOff
    --initial constans used for positioning the display items
    local startTX = -400
    local startTY = halfH
    local btnInitailY = halfH -50
    local btnMargin = 10

    --cancel the game pausse timer
    if(gameTimer_main) then
        timer.cancel(gameTimer_main)
        gameTimer_main = nil
    end

    local optionSoundSheet =
    {
        -- The params below are required
        width = 51,height = 51,numFrames = 2,-- The params below are optional; used for dynamic resolution support
        sheetContentWidth = 102,  -- width of original 1x size of entire sheet
        sheetContentHeight = 51  -- height of original 1x size of entire sheet
    }
    local optionQuitSheet =
    {
        -- The params below are required
        width = 51,height = 51,numFrames = 2,-- The params below are optional; used for dynamic resolution support
        sheetContentWidth = 102,  -- width of original 1x size of entire sheet
        sheetContentHeight = 51  -- height of original 1x size of entire sheet
    }

    isFirstTime=true
    --pauseScreen()
    dialog=true

    alertBox = display.newImage("image/popup_dialog.png")
    alertBox.x = halfW; alertBox.y = halfH
    alertBox:setReferencePoint(display.CenterReferencePoint)

    --creating the restart button fot the popup dialog
    restartBtn = widget.newButton{
        defaultFile="image/replay_btn.png",overFile = "image/replay_btn_hover.png",
        isEnable=true,onRelease =  onReplayBtnGameOverRelease -- event listener function
    }
    restartBtn.x = halfW
    restartBtn.y = btnInitailY

    --creating the level button
    levelBtn = widget.newButton{
        defaultFile="image/menu.png",overFile = "image/menu_hover.png",
        isEnable=true, onRelease =  onLevelBtnGameOverRelease -- event listener function
    }
    levelBtn.x = halfW
    levelBtn.y = restartBtn.y + restartBtn.height + btnMargin

    --creating the sound on off switch
    imageSheetSoundOnOff = graphics.newImageSheet( "image/sound.png", optionSoundSheet )
    soundOnOffSwitch = widget.newSwitch
    {
        left = screenW * 0.18,top = screenH * 0.73, style = "checkbox", sheet = imageSheetSoundOnOff,
        initialSwitchState = soundOn,frameOff = "2",frameOn =  "1",onRelease = onSoundButtonClicked, onPress = onSoundButtonClicked,
    }

    --creating the quit on off switch
    imageSheetQuitOnOff = graphics.newImageSheet( "image/vibration.png", optionQuitSheet )

    quitOnOffSwitch = widget.newSwitch
    {
        left = screenW * 0.7,top = screenH * 0.735,style = "checkbox",sheet = imageSheetQuitOnOff,onPress = onViberationButtonClicked,
        initialSwitchState = vibrationOn,frameOff = "2",frameOn =  "1",
    }
    --soundOnOffSwitch:setState({ isOn = soundOn })
    --quitOnOffSwitch:setState({ isOn = vibrationOn})

    --create/position logo/title image on upper-half of the screen
    local titleLogo = display.newImageRect( "image/gameover.png",144,30)
    titleLogo:setReferencePoint( display.CenterReferencePoint )
    titleLogo.x = halfW
    titleLogo.y =  btnInitailY - 65

    if popupGameOverGroup == nil then
        popupGameOverGroup = display.newGroup()
    end
    -- inserting the buttons and the alert dialog to the popup group
    popupGameOverGroup:insert(alertBox)
    popupGameOverGroup:insert(restartBtn)
    popupGameOverGroup:insert(levelBtn)
    popupGameOverGroup:insert(soundOnOffSwitch)
    popupGameOverGroup:insert(quitOnOffSwitch)
    popupGameOverGroup:insert(titleLogo)

    transition.from(popupGameOverGroup, {time =1000,x=startTX,y=titleLogo.y,xScale = 1, yScale = 1,
        transition = easing.inOutExpo})

    localGroup:insert(popupGameOverGroup)

    showAdd()
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T23:21:51.747

您可以使用该`native.showAlert`功能。这将显示一个弹出对话框。

像这样的东西：

```
local function onComplete( event )

local action = event.action
if "clicked" == event.action then
    if 1 == event.index then

    end
end

local alert = native.showAlert( "You are in scene1!", "Congratulations!", { "OK" }, onComplete ) 
```

这将显示一个对话框，其中包含“您在场景 1 中！” 标题，“恭喜！” 副标题，以及单击（或点击）它时关闭对话框的“确定”按钮。

将这些代码放在场景的前面，并将`native.showAlert`属性更改为您想要的单词。

# jquery - 通过 jQuery 创建滑块

> ID：10012588
> 
> 赞同：2
> 
> 时间：2012-04-04T13:55:46.000
> 
> 标签：jquery

我有一个使用 JQUERY 在 HTML 网页中创建滑块的代码，但它不工作请帮助我以下是该代码。我检查了所有正确的 JS 路径。我已经分离了要检查的滑块代码并且它工作但当我将它集成到以下代码中时它不起作用。

```
 <html>                                                                  
 <head>  
<meta charset="utf-8">

     <link href="tms_style.css" type="text/css" rel="stylesheet">
     <link rel="stylesheet" href="css/jquery.ui.all.css">    
     <link rel="stylesheet" href="style.css" type="text/css" media="screen" />                                                        

     <script type="text/javascript" src="/jquery.js"></script>
     <script type="text/javascript" src="../script.js"></script>  

    <script src="js/jquery.ui.mouse.js"></script>
    <script src="js/jquery.ui.slider.js"></script> 

   <script src="js/jquery-1.7.1.js"></script>
    <script src="js/jquery.ui.core.js"></script>
     <script src="js/jquery.ui.widget.js"></script>
     <script src="js/jquery.ui.datepicker.js"></script>

     <link rel="stylesheet" href="js_includes/development-bundle/themes/base/jquery.ui.all.css">

    <link rel="stylesheet" href="js_includes/development-bundle/demos/demos.css">

    <script src="js_includes/development-bundle/ui/jquery.ui.position.js"></script>
    <script src="js_includes/development-bundle/ui/jquery.ui.autocomplete.js"></script>

    <style>
    #demo-frame > div.demo { padding: 10px !important; };
    </style>

    <style>
    .ui-autocomplete-loading { background: white url('js_includes/development-bundle/demos/autocomplete/images/ui-anim_basic_16x16.gif') right center no-repeat; }
    </style>

    <script>
    $(function() {

        $("#slider-range").slider({

            range: true,
            min: 0,
            max: 16000,
            values: [2000, 9000],
            slide: function(event, ui) {
                $("#amountMin").val(ui.values[0]);
                $("#amountMax").val(ui.values[1]);
            }
        });

        $("#amountMin").val($("#slider-range").slider("values", 0));
        $("#amountMax").val($("#slider-range").slider("values", 1));
    });
    </script>

    <script>

        $(function() {

        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }

        $.ajax({
            url: "AllResponse.xml",
            dataType: "xml",
            success: function( xmlResponse ) {
                var data = $( "Hotel", xmlResponse ).map(function() {
                    return {
                        value: $( "CityCode", this ).text() + ", " +
                            ( $.trim( $( "CityName", this ).text() ) || "(unknown country)" ),
                        id: $( "CityCode", this ).text()
                    };
                }).get();
                $( "#txtCity" ).autocomplete({
                    source: data,
                    minLength: 2,
                    select: function( event, ui ) {
                        log( ui.item ?
                            "Selected: " + ui.item.value + ", CityCode: " + ui.item.id :
                            "Nothing selected, input was " + this.value );
                    }
                });
            }
        });
    });
    </script>

     <script>

    $(function() {
        $( "#datepicker1" ).datepicker({
            numberOfMonths: 2,
            showButtonPanel: true

        });
    });
    </script>
     <script>
    $(function() {
        $( "#datepicker2" ).datepicker({
            numberOfMonths: 2,
            showButtonPanel: true
        });
    });
    </script>

<div style="display: none;" class="demo-description">
<p>The datepicker is tied to a standard form input field.  Focus on the input (click, or use the tab key) to open an interactive calendar in a small overlay.  Choose a date, click elsewhere on the page (blur the input), or hit the Esc key to close. If a date is chosen, feedback is shown as the input's value.</p>
</div>

 <script type="text/javascript">

     $(document).ready(function() {
         $.ajax({
             type: "GET",
             url: "AllResponse.xml",
             dataType: "xml",
             success: parseXml
         });

         function parseXml(document) {

             cnt = 1;
             var count = $(document).find("Hotel").each(function() {

             }).length;

          var Hotel = $(document).find("Hotel")
             Hotel.sort(function(a, b) {
             return (parseInt($(a).find('Property').attr('MinimumRate')) - parseInt($(b).find('Property').attr('MinimumRate')));
         });

         Hotel.each(function(i, v) {

         var title = $(v).find('OptionNo').text()
         var start = $(v).find('StayDateRange').attr('Start')
         var end = $(v).find('StayDateRange').attr('End')
         var Hotelname = $(v).find('Property').attr('HotelName')
         var CityName = $(v).find('CityName').text()
         var Address1 = $(v).find('Address1').text()
         var Address2 = $(v).find('Address2').text()
         var hotelimage = $(v).find('HotelFrontImage').attr('Url')
         var MinRate = $(v).find('Property').attr('MinimumRate')
         var Currency = $(v).find('Property').attr('Currency')

         var NumberOfRooms = $(v).find('ManagementFeesDetails').text()
         var NumberOfRooms1 = $(v).find('Rooms').find('Room').attr('NumberOfRooms')

         var fullLink = '<div id="Hotel_details"> <div id="discounts_and_offers">Book 3 Days In Advance  And Get 15% Discount</div> <div id="hotel_image"><img src="' + hotelimage + '"/></div> <div id="hotel_view"><table height="100%" width="100%" cellpadding="0" cellspacing="0" ><tr><td height="89" ><div id="discount_rate">INR 8,325</div><div id="room_rate">' + Currency + ' ' + MinRate + '</div> Lowest room price <br />per night </td><tr><td height="39" ><img src="images/view_room.png" width="115" height="36"  /></td> </tr></table></div><div id="middle_div"><table width="100%" cellpadding="0" cellspacing="0" ><tr><td height="94"><div id="hotel_information"><div id="hotel_header">' + Hotelname + '-' + CityName + '</div><div id="hotel_star_rating"><img src="images/star_rating.png" width="73" height="19" /></div><div id="hotel_info">' + Address1 + '<br>' + Address2 + '</div></div><div id="hotel_inclusions"><img src="images/inclusion1.jpg" width="17" height="16" /><img src="images/inclusion2.jpg" width="17" height="16" /><img src="images/inclusion3.jpg" width="17" height="16" /><img src="images/inclusion4.jpg" width="17" height="16" /><br /><img src="images/inclusion5.jpg" width="17" height="16" /><img src="images/inclusion6.jpg" width="17" height="16" /><img src="images/inclusion7.jpg" width="17" height="16" /><img src="images/inclusion8.jpg" width="17" height="16" /></div></td></tr><tr><td height="27"><div id="hotel_links"><ul><li>Details</li><li>|</li><li>Photos</li><li>|</li><li>Map</li></ul></div></td></tr></table></div>' + NumberOfRooms1 + '</div>';

         $("#content").append(fullLink);
         cnt = cnt + 1;
         //alert("Option is: " + $(v).find('OptionNo').text() + " Minimum Rate is " + $(v).find('Property').attr('MinimumRate') + " Call is " + $(v).find('Property').attr("Currency"));

         });
             paging(count);

         }

     });

function paging(count1) {
    var show_per_page = 8;
    var number_of_items = count1;
    var number_of_pages = Math.ceil(number_of_items / show_per_page);
    var current_link = 0;
    $('#current_page').val(0);
    $('#show_per_page').val(show_per_page);
    $("<a href='#'>Prev&nbsp;&nbsp;</a>").click(previous).appendTo("#page_navigation");
    while (number_of_pages > current_link) {
        $("<a href='#' class='page_link'>").text(++current_link + '  ').click(go_to_page).appendTo("#page_navigation")
    }
    $("<a href='#'>&nbsp;&nbsp;Next</a>&nbsp;&nbsp;").click(next).appendTo("#page_navigation");
    $('#page_navigation .page_link:first').addClass('active_page');
    $('#content').children().hide().slice(0, show_per_page).show();

    function previous(e) {
        e.preventDefault(); //Don't follow the link
        $(".active_page").prev(".page_link").click();
    }

    function next(e) {
        e.preventDefault();
        $(".active_page").next(".page_link").click();
    }

    function go_to_page(e) {
        e.preventDefault();

        //Get the zero-based index instead of using an attribute
        var page_num = $(this).index(".page_link");

        //get the number of items shown per page
        var show_per_page = parseInt($('#show_per_page').val());

        //get the element number where to start the slice from
        start_from = page_num * show_per_page;

        //get the element number where to end the slice
        end_on = start_from + show_per_page;

        //hide all children elements of content div, get specific items and show them
        $('#content').children().hide().slice(start_from, end_on).show();

        //Since this always points to the page link, use that instead of looking for it
        $(this).addClass("active_page").siblings(".active_page").removeClass("active_page");
    }
}

function getXml() {

    var city=document.getElementById("txtCity").value;
    var checkin=document.getElementById("datepicker1").value;
    var checkout=document.getElementById("datepicker2").value;
    var sortBy = $("#sortBy").val();

    $.ajax({
        type: "GET",
        url: "AllResponse.xml",
        dataType: "xml",
        success: parseXml2
    });

    function parseXml2(document) {

        $("#content").text("");
        $("#page_navigation").text("");
        cnt = 0;
        var count = $(document).find("Hotel").each(function() {

    }).length;
    if (sortBy == 1) {
        var Hotel = $(document).find("Hotel")
        Hotel.sort(function(a, b) {
            return (parseInt($(a).find('Property').attr('MinimumRate')) - parseInt($(b).find('Property').attr('MinimumRate')));
        });
    }
    else {
        var Hotel = $(document).find("Hotel")
        Hotel.sort(function(a, b) {
            return (parseInt($(b).find('Property').attr('MinimumRate')) - parseInt($(a).find('Property').attr('MinimumRate')));
        });
    }

    Hotel.each(function(i, v) {

        // Criteria Find For Only Hotels 
        var title = $(v).find('OptionNo').text()
        var start = $(v).find('StayDateRange').attr('Start')
        var end = $(v).find('StayDateRange').attr('End')
        var Hotelname = $(v).find('Property').attr('HotelName')
        var CityName = $(v).find('CityName').text()
        var Address1 = $(v).find('Address1').text()
        var Address2 = $(v).find('Address2').text()
        var hotelimage = $(v).find('HotelFrontImage').attr('Url')
        var MinRate = $(v).find('Property').attr('MinimumRate')
        var Currency = $(v).find('Property').attr('Currency')

        var NumberOfRooms = $(v).find('ManagementFeesDetails').text()
        var NumberOfRooms1 = $(v).find('Rooms').find('Room').attr('NumberOfRooms')

        //**************************************************************

        // Criteria Find For Hotel Rooms

        if (CityName == city.toUpperCase() && start >= checkin && end <= checkout) {
            cnt = cnt + 1;

            var fullLink = '<div id="Hotel_details"> <div id="discounts_and_offers">Book 3 Days In Advance  And Get 15% Discount</div> <div id="hotel_image"><img src="' + hotelimage + '" /></div> <div id="hotel_view"><table height="100%" width="100%" cellpadding="0" cellspacing="0" ><tr><td height="89" ><div id="discount_rate">INR 8,325</div><div id="room_rate">' + Currency + ' ' + MinRate + '</div> Lowest room price <br />per night </td><tr><td height="39" ><img src="images/view_room.png" width="115" height="36"  /></td> </tr></table></div><div id="middle_div"><table width="100%" cellpadding="0" cellspacing="0" ><tr><td height="94"><div id="hotel_information"><div id="hotel_header">' + Hotelname + '-' + CityName + '</div><div id="hotel_star_rating"><img src="images/star_rating.png" width="73" height="19" /></div><div id="hotel_info">' + Address1 + '<br>' + Address2 + '</div></div><div id="hotel_inclusions"><img src="images/inclusion1.jpg" width="17" height="16" /><img src="images/inclusion2.jpg" width="17" height="16" /><img src="images/inclusion3.jpg" width="17" height="16" /><img src="images/inclusion4.jpg" width="17" height="16" /><br /><img src="images/inclusion5.jpg" width="17" height="16" /><img src="images/inclusion6.jpg" width="17" height="16" /><img src="images/inclusion7.jpg" width="17" height="16" /><img src="images/inclusion8.jpg" width="17" height="16" /></div></td></tr><tr><td height="27"><div id="hotel_links"><ul><li>Details</li><li>|</li><li>Photos</li><li>|</li><li>Map</li></ul></div></td></tr></table></div></div>';

            $("#content").append(fullLink);

        }
        else if (city == "" || checkin == "" || checkout == "") {
            cnt = cnt + 1;

            var fullLink = '<div id="Hotel_details"> <div id="discounts_and_offers">Book 3 Days In Advance  And Get 15% Discount</div> <div id="hotel_image"><img src="' + hotelimage + '" /></div> <div id="hotel_view"><table height="100%" width="100%" cellpadding="0" cellspacing="0" ><tr><td height="89" ><div id="discount_rate">INR 8,325</div><div id="room_rate">' + Currency + ' ' + MinRate + '</div> Lowest room price <br />per night </td><tr><td height="39" ><img src="images/view_room.png" width="115" height="36"  /></td> </tr></table></div><div id="middle_div"><table width="100%" cellpadding="0" cellspacing="0" ><tr><td height="94"><div id="hotel_information"><div id="hotel_header">' + Hotelname + '-' + CityName + '</div><div id="hotel_star_rating"><img src="images/star_rating.png" width="73" height="19" /></div><div id="hotel_info">' + Address1 + '<br>' + Address2 + '</div></div><div id="hotel_inclusions"><img src="images/inclusion1.jpg" width="17" height="16" /><img src="images/inclusion2.jpg" width="17" height="16" /><img src="images/inclusion3.jpg" width="17" height="16" /><img src="images/inclusion4.jpg" width="17" height="16" /><br /><img src="images/inclusion5.jpg" width="17" height="16" /><img src="images/inclusion6.jpg" width="17" height="16" /><img src="images/inclusion7.jpg" width="17" height="16" /><img src="images/inclusion8.jpg" width="17" height="16" /></div></td></tr><tr><td height="27"><div id="hotel_links"><ul><li>Details</li><li>|</li><li>Photos</li><li>|</li><li>Map</li></ul></div></td></tr></table></div></div>';

            $("#content").append(fullLink);

        }
    });

        //alert(cnt);
        paging(cnt);
    }

}

 </script>                                                               
 </head>                                                                 
 <body>  

 <div class="demo">
<div id="sarchBox">
<form name="frmSearch" id="frmSearch" method="post">

    <label for="txtCity">City : </label>
    <input id="txtCity" type="text" />

Check-In: <input type="text" id="datepicker1">

Check-Out: <input type="text" id="datepicker2">

<input type="button" id="search" value="search" onClick="getXml();" />
</form>
</div>

<input type="hidden" id="current_page" />
<input type="hidden" id="show_per_page" />
<div>Sort By Price: <select id="sortBy" onChange="getXml();">
<option value="1" >Low To Heigh</option>
<option value="2">Heigh To Low</option></select></div>

<b style="font-size:medium;">Price Range:</b><br>

<div id="slider-range"></div>

    <b  style="font-size:small;">Rs:</b>
    <input type="text" id="amountMin" size="19" readonly="readonly" style="font-size:small; border:0; color:#f6931f; background-color:#DEDEDE; font-weight:bold;" />
    <b  style="font-size:small;">Rs:</b>
    <input type="text" id="amountMax" size="4" readonly="readonly" style="font-size:small; border:0; color:#f6931f; font-weight:bold; background-color:#DEDEDE;" />

</div>

<ul id="content"></ul>

 <div id="page_navigation" ></div>

</body>                                                                 
</html> 
```

以下是上面滑块的代码

```
<script>
        $(function() {

            $("#slider-range").slider({

                range: true,
                min: 0,
                max: 16000,
                values: [2000, 9000],
                slide: function(event, ui) {
                    $("#amountMin").val(ui.values[0]);
                    $("#amountMax").val(ui.values[1]);
                }
            });

            $("#amountMin").val($("#slider-range").slider("values", 0));
            $("#amountMax").val($("#slider-range").slider("values", 1));
        });
        </script> 
```

# tfs - 为工作项字段设置递增默认值

> ID：10012591
> 
> 赞同：2
> 
> 时间：2012-04-04T13:55:53.107
> 
> 标签：tfs, workitem, tfs-workitem

我们要将迭代路径设置为默认值，我们的树结构如下

根

*   v10.1
*   v10.2
*   v10.3

因此，我们希望它在创建每个新工作项时预先填充最新的（v10.3）......并且将来当我们添加 v10.4 时，它会改为预先填充它。

是否可以对新的迭代路径进行默认或动态更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:29:03.943

在您的工作项中不可能有一个规则来默认迭代路径。也就是说，在 TFS11 中，迭代是一等公民：它们有日期。

产品现在知道团队当前的冲刺/迭代是什么。如果您在该团队的上下文中创建一个新工作项，它将默认使用该迭代的迭代路径。

[在http://msdn.microsoft.com/en-us/library/hh528603(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh528603(v=vs.110).aspx)上查看有关 TFS11 团队的更多信息

# c++ - 如何在 C++ 中对包含双精度值的字符串强制执行精度

> ID：10012594
> 
> 赞同：4
> 
> 时间：2012-04-04T13:55:56.967
> 
> 标签：c++, c, string, double, precision

示例输入字符串：

```
char *str = "12345.567675"; 
```

如果我需要小数点后 3 位的精度，则所需的输出：

```
str = "12345.568"; 
```

有没有办法在不将字符串转换为字符串的情况下做到这一点`double`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:03:40.923

是的，在高层次上：
1\. 搜索 '.' 在字符串中。
2.如果'.'的位置 + 3 小于您所做的长度。
3\. 否则，将字符串连接到 '.' 的位置 + 3\.
4\. 这里很棘手：您需要检查下一个字符是否存在，('.' + 4)，如果它的值 >= 5，则转到 4.1（否则转到 5）
4.1。将字符串复制到一个在左侧多出一个空格的新字符串（因为在 '4' 循环中 9.9999 将更改为 10.0000），并将指针 (P) 设置为该字符串中的最后一个字符。
4.2\. 如果 *P 在 0 到 8 之间，则向其添加 1 并转到 5。
4.3。如果 *P 为 9，则将其设置为零，将指针向左移动一 (-1) 并转到 4.2
4.4。如果 *P 是 '.'，将指针向左移动一 (-1) 并转到 4.2
5.删除小数点右边的所有0（如果需要，小数点自己删除），你就完成了！！！
6.删除所有内容，并使用双重转换方法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T20:57:42.797

您可以使用递归来做到这一点。

```
void roundstr(std::string& strp) {
    char clast;
    char nlast;
    int sl(strp.length()), ipos(0);

    if (strp[sl - 1] == '.') { // skip the dot
        strp.erase(strp.end() - 1);
        nlast='.';
        roundstr(strp);
        return;
    }

    if (strp[sl - 2] == '.') { // handle dot is next char
        ipos = 1;
    }

    if (sl == 1) { // handle first char
        nlast = '0'; // virtual 0 in front of first char
        clast = strp[1];
    } else {
        clast = strp[sl - 1]; // current (last) char
        nlast = strp[sl - 2 - ipos]; // next to last char
    }

    if (clast >= '5') { // need to operate only if meet 5 or larger, otherwise stop
        nlast++;
        strp.erase(strp.end() - 1); // remove the last char from the string
        if (nlast == ':') { // if need to round further
            strp.replace(strp.end() - 1 - ipos, strp.end() - ipos, 1, nlast);
            clast = '0'; // keep current char value
            roundstr(strp);
        } else {
            strp.replace(strp.end() - 1 - ipos, strp.end() - ipos, 1, nlast);
            if(clast==':') clast = '0';
        }
    }

    sl = strp.length();
    if (nlast == ':') {
        if (ipos == 1) {
            strp += '.';
        } else {
            strp += '0';
        }
    } else if (nlast=='.' && strp[sl-1] != '.') {
        strp += '.';
    } else {
        if (ipos == 1 && strp[sl-1]!='.') {
            strp += '.';
        } else {
            strp += clast;
        }
    }

    return;
} 
```

你这样称呼它：

```
#include <string>
#include <iostream>
#include <iterator>
#include <stdlib.h>

void roundstr(std::string&);
int main(int argc, char* argv[]) {
    int p;
    std::string strp;

    switch (argc) {
    case 2:
        p = 2;
        break;
    case 3:
        p = atoi(argv[2]);
        strp = argv[1];
        break;
    default:
        return 1;
        break;
    }

    std::cout << strp << " " << p << std::endl;
    roundstr(strp);
    strp.erase(strp.end()-p, strp.end());
    std::cout << strp << std::endl;
    return 0;
} 
```

如您所见，您必须处理删除多余的数字，但编写包装函数甚至是在构造过程中自动执行此操作的类并不难。

如果使用 c-strings 而不是`std::string`. 如果您打算执行繁重的符号运算，我建议您替换 all`std::string`和`char`with`char *`但在删除添加值时应该更加小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:02:30.783

在字符串中找到点。然后，找到该位置之后的第四个字符。返回子字符串从0到点+3的位置，然后调整最后一个字符-如果原始字符串中点之后的第四个字符大于或等于5，则增加最后一个字符（或设置为'0'，如果'9 ' 并增加 prievous 等等）。如果它小于 5 - 什么都不做，只返回原始字符串的子字符串。

虽然，我认为如果您只是将其转换为浮点数，它不会影响性能，但请使用（例如）`boost::format`使其四舍五入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:15:05.330

这首先将其转换为浮点数。

```
int main()
{
    std::string f = "12345.567675";

    std::ostringstream ss;
    float x = boost::lexical_cast<float>(f);
    ss << std::fixed << std::setprecision(3);
    ss << x;
    std::string s = ss.str();

    std::cout << s << "\n";

    return 0;
} 
```

结果如下：

```
./a.out 
12345.567 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-04T14:15:22.570

假设你总是有一个点，后面至少有 3 个数字：

```
char *str = "12345.567675";
char *p = str;

while ( *p != '.' )
{
    printf( "%c", *p++ );
    // find a dot
}

for ( int i = 0; i < 4; i++ )
{
    printf( "%c", *p++ );
} 
```

# javascript - 如何编写用户点击三次时触发的自定义事件

> ID：10012602
> 
> 赞同：4
> 
> 时间：2012-04-04T13:56:13.560
> 
> 标签：javascript, jquery

我正在尝试编写一个自定义事件，当用户在任何 html 节点上单击三次时，该事件应该会触发。

我知道我甚至可以使用

```
var evt = document.createEvent("Event");
evt.initEvent("myEvent",true,true); 
```

但我不知道如何捕获该三次点击事件。

如果有人可以建议我为此编写方法，我将不胜感激。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:00:19.333

只需创建一个存储点击次数的变量。

```
var clickTimes = 0;

element.addEventListener('click', function(event) {
    clickTimes++;
    if(clickTimes==3) { 
        clickTimes = 0;
        /* do something like dispatch my custom event */ 
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:02:17.867

您可以创建一个特殊的事件 [代码和示例](http://benalman.com/news/2010/03/jquery-special-events/#setup-and-teardown-tripleclick)- 这是您的问题解决方案 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:05:42.687

这将计算任何特定元素的点击次数，并在每三次点击时触发事件。

```
$('selector').on('click',function(e){
    Event_threshold = 500;

    var clicked_times = $(this).data('Event-clicked-times');

    if(clicked_times == '')
        clicked_times = 0;

    if(clicked_times == 0)
        $(this).data('Event-first-click-timestamp',e.timeStamp);

    clicked_times++;

    if(e.timeStamp-$(this).data('Event-first-click-timestamp')<Event_threshold)
    {
        if(clicked_times == 3)
        {
            $(this).data('Event-clicked-times',0);
            $(this).trigger('Event');
        }
        else
            $(this).data('Event-clicked-times',clicked_times);

    }
    else
         $(this).data('Event-clicked-times',0);
}); 
```

编辑：固定并添加阈值控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:59:14.750

您可以创建迭代变量并检查元素是否被点击了三次。

例如：

```
var clickTimer = 0;
document.body.addEventListener('click', function() {
    clickTimer++;
    if(clickTimer == 3) {
        clickTimer = 0;
        // fire your event
    }
}, true); 
```

要使这种行为像`dbclick`您可以将时间戳与首次点击进行比较。

例如：

```
var clickTimes = 0;
var fisrtClickTime = 0;

element.addEventListener('click', function(event) {
    clickTimes++;
    if(clickTimes == 1) {
        fisrtClickTime = +new Date();
    }
    if(clickTimes == 3) { 
        clickTimes = 0;
        firstClickTime = 0;
        if((+new Date() - fisrtClickTime) < 1000) {
            /* do something like dispatch my custom event */ 
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T14:10:52.107

这在不使用外部变量的情况下工作，使用 HTML5 的“data-”属性进行存储，因此您将处理多个元素。

```
$('#yourLink').click(function() {
     window.setTimeout(function() {$(this).data("count",1)},300)
     if(typeof $(this).data("count")=='undefined') {
         $(this).data("count",1) 
     }
     else {
       var myCount = parseInt($(this).data("count"))
       myCount++      
       if(myCount==3) {
          alert("3!")
          $(this).data("count",0)
       }
        else {
           $(this).data("count",myCount)
        }    
    }

}) 
```

# php - 分页在 codeigniter 中不起作用:(

> ID：10012604
> 
> 赞同：-1
> 
> 时间：2012-04-04T13:56:21.757
> 
> 标签：php, pagination, codeigniter-2

我想在视图页面中显示 2 行作为输出。再次，当我单击转到下一页时，它将显示 2 下一行，依此类推（我总共有 8 行在表中）。但是当我运行以下代码时，它会在视图页面中显示所有 8 行以及分页链接。我一整天都在寻找不工作的真正原因，但我的问题仍然没有解决。我在互联网上搜索了相关查询的帮助，但没有用。Finalyy我在这里用我自己的话来解释这个问题。我已经注释了代码中的几乎所有行。我正在自动加载中加载库以进行分页和表单和 URL 的帮助程序。如果有人帮助我，我将非常感激。提前致谢。

```
 <?php
        class ManageUser extends CI_Controller {  // creating class for the controller
            function index()
            {
                if($this->session->userdata('logged_in'))  // checking users under session if he is already logged in
                {           
                    $this->load->model('admin/user');     // loading model . I am not using Datamapper.
                    $result = $this->user->view_user();   // getting response from the model and storing it to result
                    $total_rows = count($result);         // counting number of rows countered ( its 8 in in my database ) 
                    //echo $total_rows;

                    if($result)
                    {
                        $data['users'] = $result;
                        $config['base_url'] = "http://192.168.0.102/project/index.php/admin/manageUser";  // this is the address where I am pointing the view page url
                        $config['total_rows'] = $total_rows;        // Total numbers of rows assigned to pagination-config
                        $config['per_page'] = '2';                  // I want to display 2 rows in 1 page
                        $config['uri_segment'] = '2';
                        $this->pagination->initialize($config);     // initilizing the pagination-config
                        //$data['pagination'] = $this->pagination->create_links();  
                        //$this->load->vars($data);
                        $this->load->view('admin/manageUser',$data);  // Loading the page
                    }

                    //$this->load->view('admin/manageUser',$data);
                }
                else
                {
                    redirect('admin/login');    // incase of faliured session user will be redirected to the login-page.
                }
            }
        }
        ?> 
```

以下代码来自我的名为 User 的模型

```
 <?php
            Class User extends CI_Model   // extending the model
            {
                function __construct()
                {
                    parent::__construct();
                }

                function view_user()        // function which is loaded from controller
                {

                    $query = $this -> db -> get('users');  //query to fetch all the information from the database
                    return $query->result();        // returning result to the Controller.
                }
            }
        ?> 
```

最后这是我用来显示内容的视图页面。

```
 <!-- This is the view page -->

        <?php if(isset($users)) { ?>     <!-- Checking if user is set -->
             <?php foreach($users as $user) { ?>  <!-- running in a loop to accept all the value from the database and display it row wise -->
                <td><?php echo $user -> us_display_name; ?></td>   <!-- Displaying name -->
                <td><?php echo $user -> us_first_name . " " . $user -> us_last_name; ?></td> <!-- Displaying first name and last name together -->
                <td><?php echo $user -> us_email_id; ?></td>  <!-- Displaying email-ID -->
        <?php } } else { ?>
        <tr>    <td>No records found!</td>
        <?php } ?>
        <?php echo $this->pagination->create_links(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:18:06.690

您正在从模型中获取所有用户。这不是你的做法。你的控制器应该是这样的：

```
<?php
    class ManageUser extends CI_Controller {  // creating class for the controller
        function index($offset)
        {
            if($this->session->userdata('logged_in'))  // checking users under session if he is already logged in
            {           
                $this->load->model('admin/user');     // loading model . I am not using Datamapper.
                $perpage = 2;

                $result = $this->user->view_user($offset,$perpage);   // getting response from the model and storing it to result
                $total_rows = $this->db->count_all('users');

                if($result)
                {
                    $data['users'] = $result;
                    $config['base_url'] = "http://192.168.0.102/project/index.php/admin/manageUser";  // this is the address where I am pointing the view page url
                    $config['total_rows'] = $total_rows;        // Total numbers of rows assigned to pagination-config
                    $config['per_page'] = $perpage;                  // I want to display 2 rows in 1 page
                    $config['uri_segment'] = '2';
                    $this->pagination->initialize($config);     // initilizing the pagination-config
                    //$data['pagination'] = $this->pagination->create_links();  
                    //$this->load->vars($data);
                    $this->load->view('admin/manageUser',$data);  // Loading the page
                }

                //$this->load->view('admin/manageUser',$data);
            }
            else
            {
                redirect('admin/login');    // incase of faliured session user will be redirected to the login-page.
            }
        }
    }
    ?> 
```

在模型中你需要限制结果

```
 <?php
        Class User extends CI_Model   // extending the model
        {
            function __construct()
            {
                parent::__construct();
            }

            function view_user($offset,$limit)        // function which is loaded from controller
            {

                $query = $this -> db -> get('users',$perpage,$offset);  //You dont fetch all the data from the database
                return $query->result();        // returning result to the Controller.
            }
        }
    ?> 
```

# java - 如何使用同步原语帮助服务员在 Java 中服务表？

> ID：10012607
> 
> 赞同：2
> 
> 时间：2012-04-04T13:56:25.727
> 
> 标签：java, multithreading, synchronization

我有3节课。一个 Waiter（线程）、一个 Table（线程）和一个 Queue（不是线程）（简单的先进先出队列）。

最初创建了几个服务员，然后创建了表。桌子比服务员多得多，所以桌子必须“等待”服务员为他们服务。我应该使用“java 同步原语、等待通知和通知”来解决这个问题。以下是每个班级的指南：

表：当它启动时，它进入队列，然后调用一个内部方法waitService()，如果它已被服务或等待服务员，则返回。

我现在使用这种方法的方式：

```
$if(serviced)
        return 0;
    try {
        this.wait();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

服务员：服务员代码并没有真正给我任何问题，但本质上它的工作方式是在 run 方法中有一个无限循环，检查是否有桌子在等待，然后在之后的随机时间内提供该桌子服务它检查是否另一个表正在等待。它通过调用表类中的 giveService() 方法让表知道它正在为其提供服务。

队列：它有一个服务员列表和一个表列表。服务员在准备好提供服务时调用队列类中的 nextTable()。这就是我设置它的方式：

```
$public Table nextTable(Waiter w) throws InterruptedException {

    if(closed)
        return null;
    if(tables.isEmpty()) {
        w.wait();
    }
    Table t =  tables.removeFirst();
    t.notify();
    return t;   
} 
```

我知道上面可能有一些非常基本的错误，但基本上我不知道同步原语在 java 中是如何工作的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:10:16.067

这是一个关于使用 wait()、notify() 和 notifyAll() 的教程。先通读一遍，看看您是否还有其他尚未回答的问题，或者您的问题有什么特别的问题。

[http://www.java-samples.com/showtutorial.php?tutorialid=306](http://www.java-samples.com/showtutorial.php?tutorialid=306)

# iphone - 将 touchesMoved 事件传递给 superview 仅传递第一个事件

> ID：10012616
> 
> 赞同：1
> 
> 时间：2012-04-04T13:56:57.333
> 
> 标签：iphone, ios, cocoa-touch, ipad, touch-event

我创建了 UIButton 的子类并实现了`touchesBegan`、`touchesEnded`和`touchesMoved`. 我想提醒超级视图，只要在我的控制范围内发生任何触摸，它就需要执行一些操作。我首先尝试了这个：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
  if(self.superview != nil)
  {
    [self.superview touchesMoved:touches withEvent:event];
  }
} 
```

结果很奇怪：第一个 touchesMoved 事件会正确地冒泡到超级视图，但之后就不会再冒泡了。我尝试打印出 self.super 和 self.superview 的指针值，它们永远不会改变，所以内存没有什么奇怪的。

接下来我尝试将父视图控制器中的选择器作为`SEL`类型传递给自定义控件，从而创建一种回调，但 XCode 不喜欢这样（运行时我收到“无法识别的选择器发送到实例”的错误消息）。

我可能只是实现一个协议来拦截来自我的控件的事件（委托样式）并将我的视图控制器注册为该类型的委托。想法？

# c# - 带有 MVC3 的 Sitecore 6.5

> ID：10012619
> 
> 赞同：6
> 
> 时间：2012-04-04T13:57:11.460
> 
> 标签：c#, asp.net-mvc, sitecore, sitecore6

我必须将 Sitecore 6.5 与 MVC 框架一起使用，并且根据参考文档，我可以设置 Sitecore 并使其运行。我已经创建了 MVC3 .NET Web 应用程序项目（空白并使用 Razor）并且我知道以下事情

1.  如何设置布局和子布局？（这必须不同于我猜的网络表单）
2.  我需要做什么才能使用 Sitecore 数据控件，例如 FieldRenderer、Text 等（我想如果没有这些控件，我们将不容易使用提供页面编辑模式）
3.  如何在 MVC 中使用 Sitecore 占位符？

我已[将此文档](http://sdn.sitecore.net/Reference/Sitecore%206/Sitecore%20and%20MVC.aspx)用作参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T14:30:38.163

目前已设置 Sitecore MVC 支持，以便 ASP.NET MVC 可以与同一主机名下的 Sitecore 安装*一起工作。*

将在 6 月左右的 6.5.1 更新中全面支持将 MVC 与 Sitecore 结合使用。届时，您提到的所有内容以及其他内容（例如使用上下文数据填充视图袋）都是可能的。

有一些方法可以实现这种集成的某些部分，例如允许[使用 Razor](http://trac.sitecore.net/RazorForSitecore)的共享源模块。我亲自编写了一个小模块，可让您将 MVC 路由与 sitecore 项目（[Sitecore MVC Routing](https://github.com/Sitecore/Sitecore-Mvc-Routing)）一起使用，但要获得完整的 MVC 支持，您必须等到 6 月。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:41:30.267

有人已经对您想要的东西进行了概念验证。

这篇博文解释了这一切： http: [//www.chrisvandesteeg.nl/2012/02/26/sitecore-mvc/](http://www.chrisvandesteeg.nl/2012/02/26/sitecore-mvc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:24:13.557

目前，这些功能都不能通过 MVC 轻松获得。Sitecore 允许您并排使用它们，并对 Sitecore 数据层进行一些调用等，但您（和我）正在寻找的集成级别尚未发布。不过估计快出来了。

# android - 嵌套线性布局中的 Listview 未在运行时显示

> ID：10012620
> 
> 赞同：2
> 
> 时间：2012-04-04T13:57:13.860
> 
> 标签：android, listview, android-linearlayout

我的“图形设计”有四行文本视图和文本视图下方的列表视图，所有内容都嵌套在线性布局中。

我设计背后的xml代码如下

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent" 
    android:gravity="left" android:orientation="vertical">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView android:id="@+id/tvs_pname"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="Project Name:" android:textAppearance="?android:attr/textAppearanceMedium" />
            <TextView android:id="@+id/tv_pname"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="Large Text" android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView android:id="@+id/tvs_pamount" android:layout_width="wrap_content"
                android:layout_height="wrap_content" android:text="Budgeted Amout:"
                android:textAppearance="?android:attr/textAppearanceMedium" />
            <TextView android:id="@+id/tv_pamount" android:layout_width="wrap_content"
                android:layout_height="wrap_content" android:text="Large Text"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView android:id="@+id/tvs_pstartdate"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="Start Date:" android:textAppearance="?android:attr/textAppearanceMedium" />
            <TextView android:id="@+id/tv_pstartdate"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="Large Text" android:textAppearance="?android:attr/textAppearanceLarge" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView android:id="@+id/tvs_penddate"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:text="End Date:" android:textAppearance="?android:attr/textAppearanceMedium" />
            <TextView android:id="@+id/tv_penddate" android:layout_width="wrap_content"
                android:layout_height="wrap_content" android:text="Large Text"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

    </LinearLayout>
        <LinearLayout android:layout_height="fill_parent"
            android:layout_width="fill_parent" android:orientation="vertical">

            <ListView android:id="@+id/lst_projlist"
                android:layout_width="fill_parent" android:layout_height="fill_parent">
            </ListView>

        </LinearLayout>
</LinearLayout> 
```

问题是当我在模拟器上运行我的应用程序时，文本视图看起来就像设计一样，但列表视图没有出现在它下面。为什么会这样。

实验性地，我从我的代码中删除了列表视图，并在那里删除了一个按钮。当我运行我的应用程序时，文本视图和按钮都出现在模拟器中，就像设计一样。

那么我的代码有什么问题？我错过了列表视图中的一些属性吗？我是个新手，所以我知道我可能会犯一个非常基本的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:04:16.553

`ListView`您是否通过代码中的某种方式填充数据`Adapter`？如果列表中没有项目，它将是“不可见的”，因为它没有可显示的内容。

如果您是，您可以使用带有模拟器的[Hierarchy Viewer](http://developer.android.com/guide/developing/tools/hierarchy-viewer.html)工具来分析您的布局是如何呈现的，并查看 ListView 可能在哪里。

您还可以尝试使用[layoutopt](http://developer.android.com/guide/developing/tools/layoutopt.html)以确保您为整个屏幕使用最佳布局。我看到很多嵌套`LinearLayouts`可能会被淘汰，比如`TableLayout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:14:39.420

你的代码是对的。可能您还没有填写代码中的列表。例如，尝试将此行添加到您的 onCreate() 方法中：

> ListView lst_projlist=(ListView)findViewById(R.id.lst_projlist);

```
 for (int i=0; i<10;i++)
        elements.add("element "+i);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, elements);
    lst_projlist.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:12:22.087

您是否在列表视图中添加了元素？不知道这是否是解决方案 - 不经常使用模拟器，但尝试一下。

# c - 用于负载的 C 测试生成器

> ID：10012621
> 
> 赞同：1
> 
> 时间：2012-04-04T13:57:16.530
> 
> 标签：c

我正在尝试创建一个每秒发送 100 个调用的函数，并每 60 秒增加到每秒 200 个调用。代码如下

```
for (i = 1; i <= 240; i++) {
        for (j = 0; j <= 100; j++) {
          send_tcp();
        }
        sleep(1);
        if(i %60 == 0) j=j+200;
        else j = j*1;
} 
```

send_tcp() 基本上只是打开一个套接字，并将 TCP 发送到某个地址。问题是，对于 j = 100，它每秒都正确发送。但是，当 j=300 时，发送 300 tcp 需要 3 秒，发送 500 tcp 请求需要 10 秒。基本上当 j 进入数字时，我无法获得 j 呼叫/秒。

我认为这只是一个逻辑错误，但我无法弄清楚如何发送 J 呼叫/秒，无论 j 是什么号码......

将不胜感激任何回应

--对不起我的英语不好，基本上我需要做j个“send_tcp”/秒。但是，当 J 变大时，“send_tcp”的 J 数似乎不是 / 秒，而是变成 / 3 秒或更多..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:01:16.400

是的，存在逻辑错误。您将循环计数器与所需的迭代次数混淆了。这是你需要做的：

```
int n_calls = 100;
for (i = 1; i <= 240; i++) {
        for (j = 0; j < n_calls; j++) {
          send_tcp();
        }
        sleep(1);
        if(i %60 == 0) n_calls+=200;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:02:43.327

你总是在第二个`for`从 0 到 100 循环，它是 101 次。您更改了 J 的值，但是当`for`启动时它再次将值设置`J`为 0。如果我理解你想要做什么，那就是改变增加`send_tcp`时被调用的次数`i`。然后你需要把你的代码改成这样：

```
count_j=100;
for (i = 1; i <= 240; i++) {
        for (j = 0; j <= count_j; j++) {
          send_tcp();
        }
        sleep(1);
        if(i %60 == 0) count_j+=200;

} 
```

是你想要的吗？

# c# - Access 数据库的连接池

> ID：10012627
> 
> 赞同：5
> 
> 时间：2012-04-04T13:57:37.210
> 
> 标签：c#, ms-access, c#-4.0, connection-pooling

我有一个经常从 Access 数据库中读取数据的应用程序，有什么方法可以使用连接池吗？

我的开放数据库方法：-

```
private bool OpenDatabaseConnection(string databaseName)
{
    try
    {
        string connectionString = "Provider = Microsoft.Jet.OLEDB.4.0; " +
            "Data Source = " + databaseName + ";";
        settingsDbConn = new OleDbConnection(connectionString);
        settingsDbConn.Open();
    }
    catch (Exception)
    {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T15:09:24.790

我同意@sll 的评论，但要回答您的问题，请将此字符串添加到您的连接字符串中

`OLE DB Services=-1`

这将强制使用 JET OleDB 提供程序进行连接池。
但是，在使用和不使用此设置的情况下测试您的应用程序的性能。
差异应该可以忽略不计。并且，使用此设置，请记住始终将连接返回到连接池，并使用 con.Close 关闭它或将您的连接封装在一个`using`语句中。

看看你上面的代码，我会非常小心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T18:42:32.490

这些是`connectionstring`可以使用的属性：

*   所有服务（默认）
    `OLE DB Services = -1;`
*   除池外的所有服务
    `OLE DB Services = -2;`
*   除池和自动登记之外的所有服务
    `OLE DB Services = -4;`
*   除客户端光标外的所有服务
    `OLE DB Services = -5;`
*   除客户端游标和池外的所有服务
    `OLE DB Services = -6;`
*   没有服务
    `OLE DB Services = 0;`

* * *

来源：[https ://docs.microsoft.com/en-us/archive/blogs/selvar/ole-db-resource-pooling](https://docs.microsoft.com/en-us/archive/blogs/selvar/ole-db-resource-pooling)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T15:34:14.810

我认为您不会从访问数据库的池中获得任何好处。如果性能是一个问题，那么访问是一个糟糕的选择。

# php - Apache 无法启动，Windows 上的 ScriptAlias

> ID：10012634
> 
> 赞同：0
> 
> 时间：2012-04-04T13:57:57.460
> 
> 标签：php, windows, apache

我已经在 Windows 机器上安装了 Apache 2.2，用于 PHP 本地编码和调试。然而，Apache 没有运行，表示运行 0 of 1 服务。

当我尝试重新启动它时，它只会说“请求的操作失败”。

测试配置的输出显示 ScriptAlias 接受参数、假名和实名。脚本中导致问题的实际行 -

```
#BEGIN PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL
ScriptAlias /php/ ""
Action application/x-httpd-php "php-cgi.exe"
#END PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL 
```

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:59:10.127

确保端口 80 空闲，Skype 或 IIS 等程序使用它。XAMPP 有一个工具可以知道是否所有需要的端口都是免费的。

# jquery - 调用 addJSONData 时不使用 jqGrid autoencode=true

> ID：10012635
> 
> 赞同：1
> 
> 时间：2012-04-04T13:57:58.320
> 
> 标签：jquery, json, jqgrid

如果我从服务器返回包含 javascript 的 JSON 并通过 addJSONData 将其填充到 jqGrid，即使我在选项中有 autoencode = true 也会执行它。为了防止 XSS 我不得不以这种方式修改 jqGrid 的 addCell 函数

```
 var v,prp;
        // This if block has been added
        if(ts.p.autoencode) {
            cell = $.jgrid.htmlEncode(cell);
        }
        v = formatter(rowId,cell,pos,srvr,'add');
        prp = formatCol( pos,irow, v, srvr, rowId, true);
        return "<td role=\"gridcell\" "+prp+">"+v+"</td>"; 
```

这是防止 XSS 的正确方法还是 jqGrid 中有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:28:11.893

抱歉，但我不明白 javascript 如何在 JSON 而不是 HTML 内部（请参阅“我返回包含 javascript 的 JSON”）。您能否更详细地描述您的跨站点脚本攻击场景或更好地提供相应的演示？

我个人完全不明白你为什么要使用`addJSONData`。我在 stackoverflow 上的第一篇文章[中](https://stackoverflow.com/q/2660226/315935)的一篇是关于这个主题的。`autoencode: true`不过，我认为如果您使用选项，数据将被编码。如果您查看代码，`addJSONData`您会发现[该行](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.base.js#L1331)

```
rowData.push( addCell(idr,v,j+gi+si+ni,i+rcnt,cur) ); 
```

用于`addCell`将单元格内容添加到网格中。内部函数[addCell](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.base.js#L995-1000)调用[格式化程序](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.base.js#L979-994)，默认情况下调用[cellVal](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.base.js#L976-978)

```
v = cellVal(cellval); 
```

和`cellVal(val)`回报

```
$.jgrid.htmlEncode(val) 
```

对于任何非空`val`的情况`autoencode: true`。

如果您确实在代码中看到一些问题或错误，您最好发布可用于重现错误的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T06:51:48.747

在我们的应用程序中，用户输入按原样保存并返回到负责对其进行编码的 UI。

这是从包含 javascript 的服务器返回的示例 JSON 数据

```
{"page":1,"total":1,"records":1,"rows":[{"id":"1","cell":["10jcmjn30jjiej8l499p","NO_ALERTS:Ei hälytyksiä","<script>console.log('jep');</script>","Pentti P.","3.4.2012 15:47","Kaupunki","Teiden auraus, KLO","Muu, Moite, Kiitos","Käsittelyssä, Odottaa vastausta","Ei määritetty","Luottamuksellinen","-","0","Kirjattu","x"]}]} 
```

我花了很多时间让 jqGrid 在我们的应用程序中工作得非常好（感谢伟大的软件），并且 addJSONData 已经被使用，所以我不会在不需要这样做的情况下更改它。

问题 - 在格式化程序中

```
} else if($.fmatter){ 
```

总是被调用。在我的 javascript 知识中，$.fmatter 始终为 true，因此永远不会调用最后一个 else。实际上，该错误似乎在 jqGrid 的 Formatter 模块中，而不是在基本模块中。

$.fn.fmatter 不做任何编码。在我的情况下，它永远不会去

```
if ($.fn.fmatter[formatType]){ 
```

块，但它总是按原样返回给定的 cellval。也许那是进行编码的正确地方？

这就是我在我们的应用程序中所做的工作

```
$.fn.fmatter = function(formatType, cellval, opts, rwd, act) {
        // build main options before element iteration
        var v=cellval;
        opts = $.extend({}, $.jgrid.formatter, opts);

        if ($.fn.fmatter[formatType]){
            v = $.fn.fmatter[formatType](cellval, opts, rwd, act);
        } else {
            v = $.jgrid.htmlEncode(cellval);
        }

        return v;
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T22:28:26.353

我发现存在 XSS 缺陷（至少在 jqGrid 4.5.4 中，可能是较新的版本？），因为行的`id`属性是由未适当清理的 AJAX 调用返回的数据设置的[（根据 OWASP XSS 规则 2）](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#RULE_.232_-_Attribute_Escape_Before_Inserting_Untrusted_Data_into_HTML_Common_Attributes)。问题来自`constructTr`未清理`id`参数*，然后将`rowData`其附加到`addJSONData`函数中的 DOM 元素。

不幸的是`constructTr`，由于其范围，不能轻易修补，但您可以修补`getAccessor`通常将 id 提供给`constructTr`.

```
(function(jgrid){
    var _getAccessor = jgrid.getAccessor;
    function htmlAttributeEncode (value) {
        /* your encoding function here */
        return encodedValue;
    }
    jgrid.getAccessor = function () {
        return htmlAttributeEncode(_getAccessor.apply(jgrid, arguments));
    };
})(jQuery.jgrid); 
```

（尚未测试确切的解决方案，但类似的东西应该可以工作。）

**注意：*其他属性也没有被清理，但我不确定它们是否可以包含来自 AJAX 调用的原始数据。值得进一步研究。

# c# - Ninject 重新绑定一个方法

> ID：10012637
> 
> 赞同：2
> 
> 时间：2012-04-04T13:58:04.263
> 
> 标签：c#, asp.net-mvc, ninject

使用 Ninject 我想将一种方法重新绑定到另一种实现，这可能吗？

我会详细说明，我有这个接口有两种不同的实现：

```
public interface IPersonFacade
{
  List<string> GetPeople();
  string GetName();
}

public class PersonFacade:IPersonFacade
{
  //Implement Interface fetching data from a db.
}

public class PersonFacadeStub:IPersonFacade
{
  //Implement Interface with some static data
} 
```

我正在使用 Ninject mvc 扩展并有我的 NinjectModule 实现：

```
public class ServiceModule:NinjectModule
{   
  public override void Load()
  {
    Bind<IPersonFacade>().To<PersonFacade>();
  }
} 
```

回到我的问题，是否可以重新绑定 GetPeople() 方法，使其使用 PersonFacadeStub 的实现，但 IPersonFacade 继续使用 PersonFacade 的 GetName ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:04:57.490

我不认为这是可能的。NInject 像任何其他 DI 容器一样管理类型，而不是方法。如果您想对同一接口模式的不同方法使用不同的类型，**[Composite](http://en.wikipedia.org/wiki/Composite_pattern)**可能会有所帮助：

```
public class CompositePersonFacade : IPersonFacade
{
    private readonly IPersonFacade realFacade;
    private readonly IPersonFacade stubFacade;

    public CompositePersonFacade(IPersonFacade realFacade, IPersonFacade stubFacade)
    {
        this.realFacade = realFacade;
        this.stubFacade = stubFacade;
    }

    public List<string> GetPeople()
    {
        return stubFacade.GetPeople();
    }

    public string GetName()
    {
        return realFacade.GetName();
    }
} 
```

并修改绑定：

```
Bind<IPersonFacade>().To<CompositePersonFacade>()
    .WithConstructorArgument("realFacade", 
                  context => context.Kernel.Get<PersonFacade>())
    .WithConstructorArgument("stubFacade", 
                  context => context.Kernel.Get<PersonFacadeStub>()); 
```

# javascript - 如何更改 DOM 元素？

> ID：10012639
> 
> 赞同：0
> 
> 时间：2012-04-04T13:58:14.920
> 
> 标签：javascript, jquery, html, dom

我想使用 javascript 将所有`<option>`标签更改为`<a>`标签。我希望所有属性保持不变。我只是想切换它是什么类型的标签。

我尝试对这个想法做了几个变化，但无济于事。

```
$.each (array_of_options, function (i, v) {
    v.replace(/option/i, "a");
}); 
```

但这只返回错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:05:12.060

一种选择：

```
$('option').each(
    function(){
        var that = $(this);
        $('<a />')
            .text(that.text())
            .attr('href','#' + that.val() + '.html')
            .appendTo($('body'));
        that.remove();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SFuW3/3/)。

或者，您可以使用纯 JavaScript：

```
var sel = document.getElementById('select'),
    opts = sel.getElementsByTagName('option'),
    b = document.getElementsByTagName('body')[0];

for (var i=0,len=opts.length;i<len;i++){
    var a = document.createElement('a');
    a.href = '#' + opts[i].value + '.html';
    a.innerHTML = opts[i].innerHTML;
    b.appendChild(a);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SFuW3/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:22:41.773

我为此创建了一个快速的 jsFiddle：http: [//jsfiddle.net/KkGUt/](http://jsfiddle.net/KkGUt/)

这将创建一个新标签，复制文本，复制属性，然后替换原始标签。

代码：

```
$( function () {
    $( 'option' ).each( function () {
        var $old  = $( this ),
            $new  = $( document.createElement( 'a' ) ),
            attrs = $old.get( 0 ).attributes;
        //-- copy text from option
        $new.text( $old.text() );
        //-- copy over attributes
        for ( var i = 0, len = attrs.length; i < len; i++ ) {
            $new.attr( attrs[ i ].name, attrs[ i ].nodeValue );
        }
        //-- replace $old with $new
        $old.replaceWith( $new );
    } );
    console.log( $( 'form' ) );
} );​ 
```

# qt - 如何使用 Qt 创建倒计时？

> ID：10012640
> 
> 赞同：0
> 
> 时间：2012-04-04T13:58:19.830
> 
> 标签：qt, qt4.7

所有开发人员都可以告诉我如何使用 c++ Qt 创建倒计时吗？如果可以的话，你应该给我看一个源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:05:55.340

你可以使用类似的东西。它每秒调用一次 timeOutSlot。

```
#define TIMEOUT 60

...
QTimer * timer = new QTimer();
connect(timer,SIGNAL(timeout()),this,SLOT(timeOutSlot()));
timer->start(1000); 
...

void timeOutSlot()
{
    static int time = TIMEOUT;
    time--; // decrement counter
    if (time==0) // countdown has finished
    {
        // timeout
    }
    else // re-start counter
    {
        time->start(1000);
    }
} 
```

# c++ - 即使文件描述符不可用，也能有效地监听多个套接字

> ID：10012644
> 
> 赞同：1
> 
> 时间：2012-04-04T13:58:46.963
> 
> 标签：c++, c, linux, sockets

假设我有两个库（A 和 B），每个库都有一个侦听套接字的函数。这些函数使用 select() ，如果数据到达，它们会立即返回一些事件，否则它们会等待一段时间（*timeout*）然后返回 NULL：

```
A_event_t* A_wait_for_event(int timeout);
B_event_t* B_wait_for_event(int timeout); 
```

现在，我在我的程序中使用它们：

```
int main (int argc, char *argv[]) {
// Init A
// Init B
// .. do some other initialization
    A_event_t *evA;
    B_event_t *evB;
    for(;;) {
        evA = A_wait_for_event(50);
        evB = B_wait_for_event(50);
        // do some work based on events
    }
} 
```

每个库都有自己的套接字（例如 udp 套接字），并且无法从外部访问。

**问题**：这不是很有效。例如，如果有很多事件等待 *B_wait_for_event* 传递，这些事件必须一直等到 *A_wait_for_event* 超时，这有效地限制了库 B 和我的程序的吞吐量。

通常，可以使用线程来分离处理，但是如果某些事件的处理需要调用其他库的函数，反之亦然。例子：

```
if (evA != 0 && evA == A_EVENT_1) {
    B_do_something();
}
if (evB != 0 && evB == B_EVENT_C) {
    A_do_something();
} 
```

因此，即使我可以创建两个线程并从库中分离功能，这些线程也必须在它们之间交换事件（可能通过管道）。这仍然会限制性能，因为一个线程会被 *X_wait_for_event()* 函数阻塞，并且不可能立即从其他线程接收数据。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:38:41.187

根据您使用的库，此解决方案可能不可用，但最好的解决方案是*不要*调用单个库中等待事件的函数。每个库都应该支持挂钩到外部事件循环。然后，您的应用程序使用一个循环，其中包含一个`poll()`or`select()`调用，该循环等待您使用的所有库想要等待的所有事件。

[glib 的事件循环](http://developer.gnome.org/glib/2.30/glib-The-Main-Event-Loop.html)对此很有用，因为许多库已经知道如何挂钩。但是如果你不使用像 glib 这样复杂的东西，通常的方法是这样的：

*   永远循环：
    *   从无限计时器和一组空的文件描述符开始
    *   对于您使用的每个库：
        *   调用库中的设置函数，该函数允许将文件描述符添加到您的集合和/或缩短（但不延长）超时。
    *   跑`poll()`
    *   对于您使用的每个库：
        *   调用库中的调度函数，该函数响应返回时可能发生的任何事件`poll()`。

是的，早期的图书馆仍然有可能饿死后来的图书馆，但它在实践中有效。

如果您使用的库不支持这种设置和调度接口，请将其添加为功能并在上游贡献代码！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:22:37.487

（我将其移至答案，因为评论太长了）

如果您处于不允许`A_do_something`在另一个线程正在执行时调用一个线程的情况`A_wait_for_event`（并且对于 类似`B`），那么我很确定您**无法**做任何有效的事情，并且必须在各种邪恶之间解决。

最明显的改进是在收到事件后立即采取行动，而不是试图从两者中读取：即订购你的循环

*   等待 A 事件
*   也许在 B 做点什么
*   等待 B 事件
*   也许在 A 中做点什么

您可以做的其他缓解措施是

*   尝试预测接下来是 A 事件还是 B 事件更有可能发生，然后先等待。（例如，如果它们连续出现，那么在获取并处理 A 事件后，您应该返回等待另一个 A 事件）
*   摆弄超时值以在自旋循环和过多阻塞之间取得平衡。（甚至可能动态调整）

    * * *

编辑：您可以检查库的 API；他们可能已经提供了解决问题的方法。例如，它们可能允许您为事件注册回调，并通过回调而不是轮询获取事件通知`wait_for_event`。

另一件事是您是否可以为库创建新的文件描述符以进行侦听。例如，如果您创建一个新管道并将一端交给 library `A`，那么如果线程 #1 正在等待`A`事件，线程 #2 可以写入管道以使事件发生，从而迫使 #1 退出`wait_for_event`。由于能够随意将线程踢出`wait_for_event`函数，因此可以使用各种新选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:21:23.083

一个可能的解决方案是使用两个线程来`wait_for_events`加上`boost::condition_variable`“做某事”的“主”线程。一个相似但不精确的解决方案在[这里](https://stackoverflow.com/questions/2060200/what-is-the-best-way-to-wait-for-a-variable-in-a-multithreaded-application/2061237#2061237)

# ember.js - 如何在车把视图中迭代计算的 Ember 数组中的每个项目

> ID：10012645
> 
> 赞同：1
> 
> 时间：2012-04-04T13:58:50.037
> 
> 标签：ember.js, handlebars.js

我有一个控制器，它是一个 ArrayProxy 并包含一些计算数组。

在咖啡脚本中，我的控制器如下所示：

```
MyApp.parentController = Ember.ArrayProxy.create
  content: []
  mothers: (->
    mothers = (person for person in @get("content") when person.sex == 0)
  ).property("content")
  fathers: (->
    fathers = (person for person in @get("content") when person.sex == 1)
  ).property("content") 
```

这很好用，当我从命令行请求'MyApp.parentController.get("mothers")'时，我得到了预期的数组。

现在我想在我的文档中显示该集合，因此我想遍历母亲列表：

```
<div id="parent-mothers-pool">
  {{#each MyApp.parentController.mothers}}
     {{#view MyApp.ParentView contentBinding="this"}}{{/view}}
  {{/each}}
</div> 
```

这不起作用，实际上完全挂起应用程序，永远旋转，甚至没有向控制台打印任何错误。

如您所料，将“.mother”从#each 车把上正确显示所有父母。但是把它放在borks它。

如何迭代这个计算数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:02:49.050

您应该在视图中定义一个绑定`ParentMothersPool`，指向控制器的`mothers`属性：

```
MyApp.EnclosingView = Ember.View.extend
    mothersBinding: 'MyApp.parentController.mothers' 
```

然后在模板中：

```
{{#each mothers}}
    ... 
```

# c# - 放置断点和调试其他项目

> ID：10012646
> 
> 赞同：0
> 
> 时间：2012-04-04T13:58:50.177
> 
> 标签：c#, visual-studio-2010, debugging, breakpoints

我有一个包含多个项目的 ASP.NET MVC 3 解决方案（C#）。有一个服务项目包含我从我的主 UI 项目中使用的服务。调试时我只能调试主启动项目。有没有办法在我的其他项目中放置断点并在我的主项目使用它们时在运行时调试它们？

希望我的问题很清楚非常感谢您的任何回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:03:29.130

是的，您应该能够在另一个项目中放置断点。确保您处于调试模式，并检查您的其他项目的 web.config 或 app.config 文件，并确保 debug="true" 而不是 "false"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:04:17.957

## 是的你可以！

构建您的其他项目并将 .dll 和 .pdb 文件放置在您正在运行的项目引用文件夹中，您可以在其中放置其他项目参考文件）。

在您正在运行的项目中的引用调用方法中放置断点，并`f11`在它中断时按下。现在您将能够调试其他项目文件

# jqgrid - 在struts2中将列表从Action类传递给jsp和从JSP传递给action类

> ID：10012648
> 
> 赞同：0
> 
> 时间：2012-04-04T13:58:53.593
> 
> 标签：jqgrid, struts2

我有一个要求，我在 JSP 中使用 Struts2 和 Jqgrid。

根据我的要求，我通过拦截器从不同的动作类中获取列表。

我必须将列表传递给 JSP 并从 Jgrid url 传回相应的操作类。

当我使用`request.setAttribute`并传递与参数相同的值时

jqgrid 动作类 url 它工作正常 `[E.g showExcelGrid.action?LIST='+"<%=request.getAttribute("LIST")%>"` ，但是当列表很大时它不能正常工作。

请提出一些想法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T15:14:43.240

我不确定 JqGrid 是如何工作的，但下面描述了价值双向流动的方式

要将 List/Map 或任何其他支持集合的对象从您的操作类发送到 JSP，您只需在操作类中创建一个列表属性并为此提供其 getter 和 setter

## 示例动作类

```
public class SampleAction extends ActionSupport{

 private List<String> listForJspPage;

  //getter and setter for this list property

  public String execute() throws Exception{
    listForJspPage=new ArrayList<String>();
    listForJspPage=fill this list with values
    return SUCCESS;
  }

} 
```

使用上面的代码，当您的操作将被执行时，您`listForJspPage`在值堆栈中，可以使用 OGNL 访问

## 示例 JSP

```
<s:iterator value="listForJspPage">
  // do what ever you want to fo
</s:itertor> 
```

这里`value="listForJspPage"`将由 S2 解释为`getListForJspPage()`在您的操作类中以获取值。

为了将值发送回动作类，我们可以在 OGNL 的帮助下确保 setter 方法，例如

```
<s:iterator value="listForJspPage">
     <s:textfield name="listForJspPage['%{id}'].value" value="%{value}" />
    </s:itertor> 
```

在此我们迭代`listForJspPage`列表。在文本字段标签上，我们将名称设置为“ `listForJspPage['%{id}'].value`”，这将导致看起来像“ `listForJspPage['1'].value`”的内容。这进一步可以看作

```
getListForJsppage().get(index).setvalue(out given value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T19:07:16.873

我知道这很晚，但我今天找到了这个有效的。

您可以使用 struts2 的 s:select 标签通过 jsp 将列表从一个动作类传递到另一个动作类，如下所示：

```
List<String> formList //getter and setter should be there in both the action classes

<div id="divList" style="display: none;">
<s:select list="formlist" multiple="true" id="selectedList" name="formListList"></s:select>
</div>
```

# javascript - ExtJS4 MVC：如何按类选择按钮

> ID：10012649
> 
> 赞同：0
> 
> 时间：2012-04-04T13:58:55.853
> 
> 标签：javascript, model-view-controller, extjs

如果有一个网格并且我想控制（从控制器）这个网格的 tbar 中的一些按钮。

我可以找到具有 itemId 属性的按钮，但是**如何按类查找按钮**，以及需要使用什么类（有 baseCls、cls 等，它们不起作用）？

这是我的控制器代码：

```
Ext.define("Wtb.controller.Schedule",{
extend:'Ext.app.Controller',

    refs:[{
        ref:'grid',
        selector:'button'
    }],
init: function () {

    this.control({
        'button#remove':{
            click:this.Remove
        },
        'button#refresh':{
            click: this.Load
        },
        'button#save':{ //Buttons with id works fine
            click:this.Save
        },
        'button.period':{ //It can't be found, because here is the class
            click:this.changePeriod
        }
    }) 
```

这是按钮片段：

```
{ //Button with ID
    xtype:"button",
    itemId:'refresh',
    text:"Refresh"
},'->',{ //Button with class. I need some buttons, like this.
    xtype:"button",
    text:"Period - day",
    cls:'period',
    value:'day'
} 
```

**如何从控制器按类查找按钮？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T23:22:02.320

查看 ComponentQuery 的文档：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.ComponentQuery](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.ComponentQuery)

这应该为您提供正确的按钮：

```
'button[cls=period]' 
```

# eclipse - eclipse java项目中的新maven POM文件

> ID：10012650
> 
> 赞同：1
> 
> 时间：2012-04-04T13:58:57.277
> 
> 标签：eclipse, maven, eclipse-indigo, m2e

已使用新安装升级到 eclipse.indigo。添加了 m2e。Maven 出现在 Windows>Preferences 下。File>New>Other>Maven 获得以下选项：Checkout ...、Maven Module、Maven Project。缺少 Maven POM 文件选项。我正在尝试将 Maven 支持添加到现有的 Java 项目中。已阅读手册、搜索、帮助等。没有解释为什么缺少添加 POM 选项。知道如何让这个选项出现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:14:51.573

为了在您的项目上创建 POM，并将项目结构更改为 Maven 默认值，**请右键单击您的项目 > 配置 > 转换为 Maven 项目**。

不要忘记选择正确的*包装*类型（在你的情况下，我猜它是 POM）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:11:54.620

我也没有这个选项，好像在最新版本中消失了。这个错误报告似乎也指向了这个方向： [https ://issues.sonatype.org/browse/MNGECLIPSE-2709](https://issues.sonatype.org/browse/MNGECLIPSE-2709)

标准方法应该是通过向导创建一个新的 Maven 项目，该项目还将包含一个 POM 文件。您可以使用它来创建一个虚拟项目，然后复制 POM 文件。

在大多数情况下，我也只是将现有的 POM 文件复制到项目中并从它开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:10:01.590

快速解决方法：手动添加 POM。（另外我不确定我是否见过“添加 POM”选项。）

只需将文件添加到您的项目（新建 > 常规 > 文件），并将其命名为*pom.xml*。双击此文件，POM 编辑器将打开。

# visual-studio-2010 - DotNet.Highcharts 不适用于 Visual Studio 2010

> ID：10012654
> 
> 赞同：2
> 
> 时间：2012-04-04T13:59:10.770
> 
> 标签：visual-studio-2010, highcharts

我下载并尝试让 DotNet.Highcharts 与 Visual Studio 2010 一起使用。我按照[DotNet.Highcharts](http://dotnethighcharts.codeplex.com/)中的说明进行操作，但它并没有完全正常工作。我收到错误消息说它找不到某些文件。我完全按照链接中的描述做了所有事情。有没有人有更详细的说明或知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:02:39.287

听起来您可能遇到了与我遇到的类似的问题。请参阅帖子[链接](https://stackoverflow.com/questions/9607931/integrate-highcharts-in-visual-studio-2010)了解我为纠正它所做的工作。看来您可能没有将文件放在正确的位置。

# php - 如何动态添加 HTML 数组元素[]

> ID：10012660
> 
> 赞同：0
> 
> 时间：2012-04-04T13:59:39.353
> 
> 标签：php, javascript, jquery, html, dom

我有一个表单，我需要根据用户的需要动态添加尽可能多的文本字段。我希望文本字段是一个数组，例如：

```
<input type="text" name="room_text[]"> 
```

我已经构建了一些我认为可行的东西。它成功地添加了更多的文本框。我用 javascript 动态添加了两个文本框，使表单看起来像这样：

```
<input type="text" name="room_text[]">
      <input type="text" name="room_text[]">
      <input type="text" name="room_text[]"> 
```

但是，当我将它发布到 PHP 文件时，它只获得第一个值。我知道这是一个 javascript 问题的原因是因为如果您在页面加载时有多个文本框，它可以正常工作。只是当您使用 javascript 添加更多文本框时。

如果这有帮助，这是我用来添加框的 jquery 函数：

```
$('.add').live("click", function() {
    var mu = $(this).parent('td').parent('tr');
    var clone = $(this).parent('td').parent('tr').clone();
    $(clone).children('td').children('.add').remove();
    $(clone).children('td').children('.redtext').remove();
    $(clone).children('td').children('.remove').css("display", "inline");
    $(clone).css("display", "none");
    $(mu).after(clone);
    $(clone).show("fast");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:15:41.537

我相信问题出在`.clone()`功能上。你能不能试试不同的方法，比如说...

```
$('.add').live("click", function() {
    var mu = $(this).parent('td').parent('tr');
    var clone = '<tr>' + $(this).parent('td').parent('tr').html() + '</tr>';
    $(clone).children('td').children('.add').remove();
    $(clone).children('td').children('.redtext').remove();
    $(clone).children('td').children('.remove').css("display", "inline");
    $(clone).css("display", "none");
    $(mu).after(clone);
    $(clone).show("fast");
}); 
```

**更新**- 哎呀。在那个版本中，“克隆”是一个字符串，而不是一个元素，所以这些`.children()`函数不起作用......这是一个更正的版本：

```
$('.add').live("click", function() {
    var mu = $(this).parent('td').parent('tr');
    var clone = $('<tr>' + $(mu).html() + '</tr>');
    $(clone).children('td').children('.add').remove();
    $(clone).children('td').children('.redtext').remove();
    $(clone).children('td').children('.remove').css("display", "inline");
    $(clone).hide();
    $(mu).after(clone);
    $(clone).show("fast");
});​ 
```

# vb.net - 我正在寻找一种 LINQ 解决方案来创建一个子列表，其中跳过带有重复属性值的项目

> ID：10012662
> 
> 赞同：-1
> 
> 时间：2012-04-04T14:00:08.583
> 
> 标签：vb.net, linq, linq-to-objects, vb.net-2010

问题是：我有一个对象列表，其中一些包含相同的 PlanId 属性值。我只想抓住那些第一次出现并忽略具有该 PlanId 的下一个对象。根本问题是数据库中的视图，但它无处不在，我不知道更改它是否会在截止日期前破坏大量内容，所以我现在正在折腾。

所以，如果我有这样的 PlanObjects 列表。

*   **Plan1.PlanId = 1**
*   **Plan2.PlanId = 1**
*   **Plan3.PlanId = 2**
*   **Plan4.PlanId = 3**
*   **Plan5.PlanId = 4**
*   **Plan6.PlanId = 4**

我想从 LINQ 中获取一个子列表（斜体表示不包括一个项目）

*   **Plan1.PlanId = 1**
*   *Plan2.PlanId = 1*
*   **Plan3.PlanId = 2**
*   **Plan4.PlanId = 3**
*   **Plan5.PlanId = 4**
*   *Plan6.PlanId = 4*

对于我的需要，先拿哪一个并不重要。Id 用于更新数据库记录。

如果我解释得不够好，请告诉我，我会编辑问题。不过，我认为这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:09:59.220

```
PlanObjects.GroupBy(p => p.PlanId).Select(r => r.First()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T13:44:47.033

另一个答案（及其评论）提供了流畅的界面解决方案。这是查询语法：

```
From p In PlanObjects Group By p.PlanId Into First Select First 
```

# google-maps - 谷歌地图可拖动折线

> ID：10012666
> 
> 赞同：2
> 
> 时间：2012-04-04T14:00:17.773
> 
> 标签：google-maps, jquery-mobile, google-polyline

我有一张地图，上面有一些距离 [api v3] 的折线。我希望当有人同时拖动折线时，距离也会更新但不知道该怎么做。请帮助我，欢迎任何好的教程或其他线程

谢谢你帮助我

纳文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:53:56.040

本页介绍了使用可拖动标记并在标记移动时更新距离。

[http://exploregooglemaps.blogspot.com.br/2012/02/measuring-distance-with-markers.html](http://exploregooglemaps.blogspot.com.br/2012/02/measuring-distance-with-markers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:25:30.143

有一个属性使您的折线可编辑。

```
polyPath.setEditable(true); 
```

现在使用监听器来检查编辑。

```
 google.maps.event.addListener(polyPath, 'capturing_changed', function() {

    var array = polyPath.getPath(); //getPath() gives u array of current markers latlng over map 

                    var tempDistance = 0;

                    var tempPathArray = [];

                     for(i = 0; i < array.length; i++){

                       tempPathArray.push(array.getAt(i));

                      }

                       for(k = 1; k < tempPathArray.length; k++)

                       {

  var calculateNewDistance=google.maps.geometry.spherical.computeDistanceBetween(tempPathArray[k-1],tempPathArray[k]);

                            tempDistance += calculateNewDistance;

                        }
   } 
```

// 确保添加以下脚本来计算两个纬度之间的距离

# android - 减少 Android 替代 Drawable 资源

> ID：10012670
> 
> 赞同：2
> 
> 时间：2012-04-04T14:00:37.853
> 
> 标签：android, drawable, android-resources

我有需要缩放到屏幕大小的图像。图像中还将包含需要翻译成第二语言的文本。因此，每个图像都会有两个版本开始，每种语言都有一个版本。

Google 建议每个密度都有一个图像资源。所以我将我的两张图像乘以四：xhdpi、hdpi、mdpi 和 ldpi。但后来谷歌说不同的屏幕尺寸有不同的图像资源。这将我的图像再次乘以四：xlarge、large、normal 和 small。我不想为每个图像创建 32 个副本！

我想知道只为 xlarge 屏幕和 xhdpi 密度制作图像是否有任何问题。IE——最好的质量。让 Android 根据其 dp 单位标准缩小图像以降低密度。当我在较小的屏幕上绘图时，我可以使用 Canvas 类来进一步缩小。我可以缓存生成的缩放位图对象，以便在每次需要重绘位图时使用，以避免反复运行昂贵的缩放计算。

这样做有什么缺点吗？或者有没有更好的方法来避免制作同一图像的如此多副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:35:33.173

在较小（低端）设备上缩小大图像会降低性能。这是否会引起注意取决于您必须显示的图像数量。
经比照，记忆也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:50:25.173

我只为最高的 xhdpi 像素密度创建位图，然后在其他屏幕类型上进行测试。

如果位图在某些低密度屏幕上看起来很糟糕，我会专门针对该密度重新制作它。而且这种情况很少发生...

此外，不需要为不同的屏幕尺寸（小/xlarge）制作特殊的位图 - 只需让你的 ImageView-s 更小/更大 - 图像缩放不是一个缓慢的操作，所以在大多数情况下你也不需要担心它（除非您的位图覆盖整个屏幕）。

# xcode - 我可以在不付费加入 Apple 开发者计划的情况下为 iPad 开发吗？

> ID：10012672
> 
> 赞同：1
> 
> 时间：2012-04-04T14:00:48.150
> 
> 标签：xcode, ipad, jailbreak

我知道您需要一个特殊的 ID 才能将您开发的应用程序部署到 iPad，即使您的本地应用程序已插入您的开发机器。正确的？究竟是什么被锁定了——你不能简单地将编译后的应用程序手动复制到设备上或其他任何东西上？

我听说你可以通过越狱设备来解决这个问题，但是这是如何工作的呢？是否更加复杂，或者一旦越狱，您可以像使用 ID 越狱一样将其部署到您的测试设备吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:05:57.930

> 我知道您需要一个特殊的 ID 才能将您开发的应用程序部署到 iPad，即使您的本地应用程序已插入您的开发机器。正确的？

正确的。

> 究竟是什么被锁定了——你不能简单地将编译后的应用程序手动复制到设备上或其他任何东西上？

未越狱的 iPad 将仅运行具有有效代码签名的应用程序。你需要一个证书来制作其中的一个，Apple 只会向开发计划中的人颁发证书。

> 我听说你可以通过越狱设备来解决这个问题，但是这是如何工作的呢？是否更加复杂，或者一旦越狱，您可以像使用 ID 越狱一样将其部署到您的测试设备吗？

我不知道在越狱设备上部署应用程序的细节，但我怀疑它是否会像加入该计划一样简单：要在我自己的设备上运行东西，我只需在 Xcode 中单击一个按钮。使用越狱设备，您必须构建应用程序，然后以某种方式将其单独安装到设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:09:53.837

自从第一部 iPhone 开始越狱以来，越狱过程对用户来说变得越来越简单和容易。[这](http://www.jailbreakingipad.net/)应该可以帮助您进行实际越狱，[这](http://gizmodo.com/5166029/how-to-install-unofficial-apps-on-your-iphone-3g-or-ipod-touch-easily-and-safely)应该有助于添加应用程序。我想在 iPad 上上传应用程序不会离 iPhone 太远，但肯定是越狱*会使*您的保修失效，因此请备份您的数据，以防您需要恢复出厂设置以删除任何痕迹过去的越狱。

长话短说，通过为开发者帐户付费来合法地开发应用程序会更容易，但如果您现金短缺或只是将应用程序作为一种爱好，越狱是一个有效（且有趣）的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:07:34.497

有两种方法可以分发 iOS 应用程序。Apple 认可的方法是通过 iTunes App Store，并通过越狱世界。

Apple 不支持越狱，因此对于不会破坏的依赖项和社区，您几乎只能靠自己。

对于支持的方式，您可以开发适用于 iOS 的应用程序并在模拟器中进行测试。为了能够在设备上对其进行测试，您需要开发程序中的账户，它使您能够为可以在应用程序和设备之间配对的设备制作证书配置文件。

# javascript - 还记得 jquery 或 javascript 中 cookie 的聊天窗口状态吗？

> ID：10012676
> 
> 赞同：0
> 
> 时间：2012-04-04T14:01:01.577
> 
> 标签：javascript, jquery, cookies, session-cookies, setcookie

如何根据聊天窗口的状态创建和更新 cookie？我想在页面重新加载时显示用户正在使用的聊天窗口。如果聊天窗口被最小化，则以最小化状态显示它。像这样我想创建和设置 cookie。我想存储打开的聊天窗口的状态和 ID，最小化。我正在使用切换功能来最小化和最大化聊天窗口。任何人都有想法，如何在 j 查询 cookie 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:09:41.283

您可以将所有内容存储在一个 cookie 中：

$_COOKIES["chatwindows"] = "john@example.com:1;mike@example.com:0";

john@example.com 代表正在与之交谈的用户，1 代表 windows 状态，在这种情况下 1 = 打开。

您只需要正确解析/拆分 cookie 内容。

# php - 为什么sql查询不能运行？

> ID：10012677
> 
> 赞同：0
> 
> 时间：2012-04-04T14:01:03.513
> 
> 标签：php, mysql, pdo

我正在使用pdo插入数据，实际上，sql可以在phpmyadmin中运行，它不会抛出错误，它只是不插入（不插入），数据是正确的，为什么会这样？谢谢

```
try {
    $query='INSERT INTO user_smtp (SmtpID,UserID,LoginID,Pwd) VALUES (?,?,?,?)';
    $stmt = $conn->prepare($query);
    //$stmt->execute(array($_SESSION['smtpEdit'],$_SESSION['username'],$login,$pwd));
    $stmt->execute(array('22','id','as','asdasd'));
    }

catch(PDOException $e)
    {
    die ("<div class='alert alert-error'>".$e->getMessage()."<a href='setting.php'> Back</a>"); 
    } 
```

# c# - HTML 敏捷包 - 使用 Align=left 样式从 DIV 获取文本

> ID：10012678
> 
> 赞同：1
> 
> 时间：2012-04-04T14:01:05.480
> 
> 标签：c#, xpath, html-parsing, html-agility-pack

我想知道如何从 align=left 样式的 DIV 中获取文本？

这是到目前为止我的 xpath 查询的代码，我唯一的问题是在这里我不知道我的 xpath 查询是否正确。

我认为问题出在我的 xpath 查询的 [@align='left]' 代码中。

```
var nodes = doc.DocumentNode.SelectNodes("//div[@align='left']"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:08:54.530

`HtmlNode.SelectNodes`方法选择与传递的 xpath 表达式匹配的节点列表。您需要迭代这些节点并像这样获取每个项目的`InnerHtml`（或`InnerText`）：

```
// check if nodes found
if (nodes != null)
    foreach (var div in nodes)
    {
        var html = div.InneHtml;
    } 
```

# javascript - 跨机器相同浏览器版本的 JavaScript 行为不一致

> ID：10012680
> 
> 赞同：1
> 
> 时间：2012-04-04T14:01:10.473
> 
> 标签：javascript, sharepoint-2010, internet-explorer-9

我在看最奇怪的事情，需要一些帮助来确定发生了什么。我在 Microsoft SharePoint 服务器上运行了一些 JavaScript，它发出异步图像请求。

当我在 32 位和 64 位 IE9 浏览器中加载页面时，代码按预期运行。当我的同事在他的 32 位和 64 位 IE9 中加载完全相同的页面（从预定义列表中提取）时（注意，所有浏览模式都设置为相同的值），图像请求不会发出。

*但是*，如果我的同事打开开发工具并再次关闭它们（不使用它或提交任何命令）然后重新加载页面，则请求正确。如果他随后关闭浏览器并重新打开它，它将停止工作，直到重新打开开发工具。

没有 ActiveX、flash 或其他任何东西。它是 100% JavaScript，所以我完全不知道如何解决问题。谁能告诉我发生了什么或指出我正确的方向？

注意事项：

1.  他的系统确实启用了 JS - 页面上的所有其他 JavaScript 对他来说都运行良好，似乎只是我的 JavaScript 受到了影响。
2.  我们都测试了 Chrome 和 Firefox，都取得了成功的结果。
3.  我们都在 IE9、IE8 和 IE7 的不同浏览器模式下进行了测试（通过 IE9 可执行文件）。
4.  如果重要的话，我们都在 Windows 7 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:16:29.533

我找到了问题的根源，它确实与 console.log() 有关。基本上，我直接从微软那里了解到，window.console 对象在浏览器的开发者工具打开之前是不存在的。在第一次打开之前，没有 window.console，并且引用它会产生代码中断错误。

我发现这是一个特别烦人的错误，因为我习惯于使用控制台跟踪错误......无论如何，MS 说这个问题在 IE10 中得到了解决，但对于我们这些必须支持当前/以前版本的人来说，明智的做法是为这个函数使用一个包装器，在调用它之前测试 window.console 的定义（我实际上有一个用于其他目的的包装器，所以我很容易添加测试条件）。

希望这将帮助其他在追踪 IE 错误时遇到同样困难的人。

# c# - Linq to SQL - 将 Intellisense 添加到生成的类

> ID：10012683
> 
> 赞同：1
> 
> 时间：2012-04-04T14:01:23.347
> 
> 标签：c#, visual-studio-2008, linq-to-sql

是否有任何方法可以将智能感知添加到 LINQ to SQL 中设计器生成的类和属性？我想添加此注释以向文档显示项目中类或属性的含义。

我在 Visual Studio 中创建了新的 LINQ to SQL 类，并通过服务器资源管理器映射了一个示例表。如果我查询如下：

```
var items = from s in db.SampleTable select s; 
```

当我输入 db + dot = 没有什么有用的显示...

当我执行这样的代码时会出现同样的问题：

```
foreach(var item in items)
{
   Console.WriteLine(item.ID);
} 
```

当我输入 item + dot = 时也没有什么有用的显示...

有什么方法可以添加 Intellisense 吗？我们可以将 Comments/XML 添加到 *.designer.cs 类 - 但如果我重新生成代码 - 它会清除所有评论......

任何使它工作的帮助将不胜感激。

**编辑**：对不起，但更具体地说 - 我记得缺少 XML 文档......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:08:03.150

这些类都具有智能感知功能：这就是`SampleTable`当您键入时显示在列表中的原因`db.`。

您要问的是 XML 文档。如果您使用 EDMX 生成实体上下文，您应该能够右键单击实体类型或属性，转到属性，然后会有一个字段，您可以在其中输入描述性信息，这将导致生成 XML 注释在类或属性上。

### 编辑

哦，对了，LINQ to SQL。尝试按照[此处](http://weblogs.asp.net/dwahlin/archive/2008/08/18/using-linq-to-sql-xml-mapping-files-step-by-step.aspx)的说明创建单独的 XML 注释映射文件。

# c# - C# windows 桌面应用程序

> ID：10012691
> 
> 赞同：4
> 
> 时间：2012-04-04T14:01:42.327
> 
> 标签：c#, forms, model-view-controller, user-interface

我熟悉使用 C# 在 ASP.NET MVC 中创建网站。但我从未学习过如何使用 C# 创建桌面应用程序。所以我想进一步研究一下。自从我对 ASP.NET 有经验以来，我几乎涵盖了后端。但是我不知道什么时候涉及到前端开发。我猜微软提供了几种创建桌面应用程序的方法（表单、MVC、...），就像 java 提供不同的包一样。但是当我打开 Visual Studio 时，我看到的只是创建 Windows 窗体应用程序的可能性。

1.  在 C# 中创建 Windows 桌面应用程序有哪些可能性（Windows 窗体、mvc？）
2.  哪个被认为是“最好的”/“最普遍的”？
3.  有什么推荐的教程、指南或免费电子书吗？
4.  任何其他建议总是受欢迎的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T14:09:56.790

如果您使用的是大多数人都使用的 Visual Studio，那么这是一个艰难的选择。

WinForms*非常*适合不需要过多自定义边框、背景等设计的快速项目，因为它使用了 Microsoft 相当旧的表单（它们已经在视觉上进行了很多改进并且明显调整了）它们有很多限制（例如在文本字段等内容上没有填充），但如果您只想要一个具有干净 UI 的常规应用程序，它们仍然看起来不错并且很好。

If you want a dynamic one which is easier to adjust and much more customisable, and also separates design from code using XAML, you definitely want WPF. Sadly you'll need to put in a decent amount of time to learn XAML fluently.

So to sum up, if you want a quick project that looks nice, and you don't want to learn XAML, WinForms If you want to spend a little longer to make it more visually attractive and customisable (Mostly on the coding end, not the end user's), it's got to be WPF.

Another advantage of WPF is that, like I said, it separates design and code, so you could collaborate with a designer at some point on the future. There's also hard-coded WPF as far as I know, but most people use XAML.

Also, I've never looked this up, but I'd give a good guess it's much easier to get a job with experience in WPF as opposed to WinForms in a professional environment due to the design/code seperation

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T14:03:39.503

我推荐 WPF 而不是 WinForms，而 MVVM 模式最适合。

WPF 比 WinForms 更现代、更强大和更灵活，WinForms 在技术上并没有过时，但没有那么有前途（可能类似于 WebForms）。XAML 技能对于 Silverlight 和 Metro 应用程序开发非常有用。

至于 WPF / MVVM 资源 - 互联网上的大量资源。首先，看看[Prism 框架](http://www.google.pl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CFwQFjAE&url=http://msdn.microsoft.com/en-us/library/gg406140.aspx&ei=OlV8T-noF87R4QTXsvTSDA&usg=AFQjCNE7SHQl-XxVVLCUC_I2e5gF_npp5g)

[比较 MVC 和 MVVM 模式以及它们各自的 ViewModel](http://rachelappel.com/comparing-the-mvc-and-mvvm-patterns-along-with-their-respective-viewmodels) - 也是一本不错的读物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:06:13.217

我主张相反。与 WinForms 相比，WPF 有很多东西要学。一旦你掌握了后者，就一定要进步到前者。另外，请获取 Adam Nathan 的书 'Windows Presentation Foundation Unleashed'，因为这将有助于您顺利完成任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:06:49.650

1.  是的，winform，wpf都用了，ms的mvc没有，是ms的web应用的pattern
2.  是的，拖钓最有帮助
3.  是的，我大部分时间都在使用谷歌教程。[我从http://asp.net](http://asp.net)网站学习 asp.net

# jquery - jquery (mobile): 使用翻转开关改变可折叠内容的主题

> ID：10012692
> 
> 赞同：1
> 
> 时间：2012-04-04T14:01:43.407
> 
> 标签：jquery, mobile, jquery-mobile

我有一堆可折叠的集合，每个集合中都有一个用于发布数据的翻转开关。结果（有效）是

```
-itemA YES
-itemB NO
-itemC YES
...
-itemZ NO 
```

我想有一个选择集合的视觉线索（开关隐藏在集合中，所以当关闭时，我不知道它是否被选中）

我发现我可以使用主题来更改外观，但是如何更改仅作为 switch 父级的可折叠集的主题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:08:14.597

您可以更改可折叠小部件的特定主题类以“突出显示”它，这是一个示例：

```
//setup the classes and theme letters to use for on/off states
var classes = {
        on  : 'ui-btn-up-e ui-body-e',
        off : 'ui-btn-up-c ui-body-c'
    },
    themes  = {
        on  : 'e',
        off : 'c'
    };

//delegate the event handler binding for all toggle switches
$(document).on('change', '.ui-slider-switch', function () {

    //if the switch is "off"
    if ($(this).val() == 'off') {

        //find the parent collapsible widget of this switch, change its theme,
        //find the descendant header link and change it's theme attribute as well as class,
        //then go back to the collapsible selection and find the content wrapper
        //and change it's class to the "off" state class
        $(this).closest('.ui-collapsible').attr('data-theme', themes.off).find('a').attr('data-theme', themes.off).removeClass(classes.on).addClass(classes.off)
               .end().find('.ui-collapsible-content').removeClass(classes.on).addClass(classes.off);
    } else {

        //this does the same but backwards to make the "on" or active state
        $(this).closest('.ui-collapsible').attr('data-theme', themes.on).find('a').attr('data-theme', themes.on).removeClass(classes.off).addClass(classes.on)
               .end().find('.ui-collapsible-content').removeClass(classes.off).addClass(classes.on);
    }
});​ 
```

还有一个演示：http: [//jsfiddle.net/ZtJyL/](http://jsfiddle.net/ZtJyL/)

一些文档：

*   [http://jquerymobile.com/demos/1.1.0-rc.1/docs/content/content-collapsible.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/content/content-collapsible.html)
*   [http://jquerymobile.com/demos/1.1.0-rc.1/docs/forms/switch/events.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/forms/switch/events.html)

Note that the `classes` object I created stores two classes for `on` and two for `off`, both of these classes will be added/removed from an element when using the `classes` object. I didn't see any conflict with doing this in my JSFiddle but just be aware that this is a shortcut that isn't necessary.

# php - magento 自定义支付模块未显示在实时站点中。但在开发站点中显示

> ID：10012693
> 
> 赞同：0
> 
> 时间：2012-04-04T14:01:47.007
> 
> 标签：php, xml, magento-1.5, magento

我正在经历非常奇怪的事情。我在我的开发服务器（Mac Lion）上制作了一个自定义支付模块。一切在开发服务器上运行良好实际上完美。当我将它移动到实时站点时，它在后端/管理以及前端都不可见。

我已经花了几个小时，但无法弄清楚。我可以提前看到模块选项卡并启用。我已经清除了缓存，实际上我也禁用了它。我不确定这里有什么问题。我的开发和实时站点具有相同的 magento 版本 1.5.1。我在这里包括我的代码，所以欢迎提出问题所在。

**配置文件**

```
 <global>
    <models>
      <callpayment>
         <class>Bestdirect_CallPayment_Model</class>
      </callpayment>
    </models>
  </global>

 <default>
   <payment>
     <callpayment>
       <active>1</active>
       <model>callpayment/paymentMethod</model>
       <order_status>1</order_status>
       <title>ePayment</title>
       <payment_action>authorize_capture</payment_action>
    </callpayment>
  </payment>
 </default>

 <frontend>
   <routers>
    <callpayment>
        <use>standard</use>
        <args>
        <module>Bestdirect_CallPayment</module>
        <frontName>callpayment</frontName>
        </args>
    </callpayment>
  </routers>
 </frontend> 
```

**系统.xml**

```
<?xml version="1.0"?>
<config>
  <sections>
    <payment>
      <groups>
       <callpayment translate="label" module="paygate">
          <label>ePayment</label>
          <sort_order>670</sort_order>
          <show_in_default>1</show_in_default>
          <show_in_website>1</show_in_website>
          <show_in_store>0</show_in_store>
            <fields>
              <active translate="label">
                <label>Enabled</label>
                <frontend_type>select</frontend_type>
                <source_model>adminhtml/system_config_source_yesno</source_model>
                <sort_order>1</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>0</show_in_store>
              </active>
              <order_status translate="label">
                <label>New order status</label>
                <frontend_type>select</frontend_type>
                <source_model>adminhtml/system_config_source_order_status</source_model>
                <sort_order>4</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>0</show_in_store>
              </order_status>
             <allowspecific translate="label">
                <label>Payment from applicable countries</label>
                <frontend_type>allowspecific</frontend_type>
                <sort_order>50</sort_order>
       <source_model>adminhtml/system_config_source_payment_allspecificcountries</source_model>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
              </allowspecific>
              <specificcountry translate="label">
                <label>Payment from Specific countries</label>
                <frontend_type>multiselect</frontend_type>
                <sort_order>51</sort_order>
                <source_model>adminhtml/system_config_source_country</source_model>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
              </specificcountry>
              <title translate="label">
               <label>Title</label>
               <frontend_type>text</frontend_type>
               <sort_order>2</sort_order>
               <show_in_default>1</show_in_default>
               <show_in_website>1</show_in_website>
               <show_in_store>0</show_in_store>
              </title>
           </fields>
        </callpayment>
      </groups>
     </payment>
   </sections>
  </config> 
```

**PaymentMethod.php**

```
 <?php
  require_once 'Bestdirect' . DS . 'Verkkomaksut_Module_Rest.php';

  class Bestdirect_CallPayment_Model_PaymentMethod extends Mage_Payment_Model_Method_Abstract
  {
    protected $_code  = 'callpayment';

    protected $_isInitializeNeeded      = true;
    protected $_canUseInternal          = false;
    protected $_canUseForMultishipping  = false;

public function capture(Varien_Object $payment, $amount) 
{
    $payment->getOrder()->setCanSendNewEmailFlag(false);
    return parent::capture($payment, $amount);
}

public function getOrderPlaceRedirectUrl()
{
    return Mage::getUrl('callpayment/standard/start', array('_secure' => true));
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:21:07.997

乍一看，我的第一个问题是确定您的生产 PHP`include_path`设置是否知道在哪里查找`Bestdirect`库。该`require_once`语句将使用该路径，如果找不到库则失败。`display_errors`由于您可能已禁用，因此此故障可能在您的生产服务器上保持沉默。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-05T23:22:58.617

我知道这是一个老问题，但这可以帮助某人。这可能是大写/小写的错字。Zero Cool 的模块名称是`Bestdirect_CallPayment`，如果在`app/etc/Bestdirect_CallPayment.xml`模块名称上键入不同的大写/小写组合（例如`Bestdirect_Callpayment`），它将在 Mac 上工作，但在 Linux 上不工作。那是因为文件系统处理大写/小写的方式。希望能帮助到你！

# sql - 使用带多个值的 Where 子句的 SQL 语句

> ID：10012695
> 
> 赞同：54
> 
> 时间：2012-04-04T14:01:58.847
> 
> 标签：sql

我有一个包含多行的表，其中包含以下字段：

```
PersonName SongName Status 
```

我想使用从多选列表框中选择的名称，我可以检索这些值，然后执行 where 子句，以便显示所选人员都可以播放的歌曲名称，因此状态已完成。

例如：

```
 PersonName      SongName    Status 
 Holly           Highland    Complete
 Holly           Mech        Complete 
 Ryan            Highland    Complete 
```

如果我从列表框中选择 Holly 和 Ryan 并按下按钮，查询应该只显示 Highland，因为这是他们都知道的。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-04T14:11:07.630

试试这个：

```
select songName from t
where personName in ('Ryan', 'Holly')
group by songName
having count(distinct personName) = 2 
```

拥有的人数应与人数相匹配。如果您还需要 Status 以`Complete`使用此`where`子句而不是上一个子句：

```
where personName in ('Ryan', 'Holly') and status = 'Complete' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-04T14:04:43.213

```
SELECT PersonName, songName, status
FROM table
WHERE name IN ('Holly', 'Ryan') 
```

如果您使用参数化存储过程：

1.  传入逗号分隔的字符串
2.  使用特殊函数将逗号分隔的字符串拆分为表值变量
3.  使用`INNER JOIN ON t.PersonName = newTable.PersonName`包含传入名称的表变量

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:09:25.303

```
Select t1.SongName
From tablename t1
left join tablename t2
 on t1.SongName = t2.SongName
    and t1.PersonName <> t2.PersonName
    and t1.Status = 'Complete' -- my assumption that this is necessary
    and t2.Status = 'Complete' -- my assumption that this is necessary
    and t1.PersonName IN ('Holly', 'Ryan')
    and t2.PersonName IN ('Holly', 'Ryan') 
```

# java - 如果您想不断访问文件，什么是好的“设计模式”？

> ID：10012701
> 
> 赞同：3
> 
> 时间：2012-04-04T14:02:07.570
> 
> 标签：java, file-io

我有一个包含数据字段条目的文件（dictionary.txt），如下所示 -

```
 ABC This represents ...
    PQR This represents ...
    XYZ This represents ...
    ...
    ...
    ... (hundreds of such entries) 
```

我有一个名为 Searcher.java 的 Java 程序，它具有以下功能

```
private String[] searchInsideFile(String stringToMatch, String fileName) 
```

这将查找文件中包含在 stringToMatch 中的任何数据字段的出现。然而，就目前而言，该函数每次都会打开和关闭文件，并读取其所有数百个字段以查找匹配项。

我将不得不多次调用这个函数（可能数百次），因此，我认为我所做的不是很有效。这种情况有没有好的“设计模式”？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:05:11.670

如果可能，您应该在内存中预加载文件的全部内容，并使用定义为属性的某些数据结构对其进行索引，可能是`Map`与要匹配的字符串键控。然后该方法`searchInsideFile`应该查看数据结构内部并避免完全加载文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:05:28.517

最快的解决方案是读取文件一次并将其保存在内存中。但这只有在文件不是很大的情况下才有用。如果文件太大或将来可能变得太大，您必须每次从磁盘读取它，因为您必须搜索整个文件。在这种情况下，随机访问并不能真正帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:15:25.507

如果文件不是太大并且不会更改，您可以在启动时将其内容读取为字符串，然后在其上进行搜索

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T14:33:42.550

我会使用 ConstantDataManager 模式。基本思想是，当您启动程序时，将产生开销，因为对象会从您正在使用的文件中提取所有信息作为向量，或者您想要存储它（地图等）。

然后您可以对数据存储进行二进制搜索（假设您的字典按顺序存储单词），如果您愿意，您可能还希望在对象中有一个 save 方法来将任何内容更新到文件中。

一本值得一看的好书是“Java 中的软件架构设计模式 - Partha Kuchana” 这是本书相关章节的链接，尽管您必须付费才能看到 72 小时或从他们那里购买。您可能可以从任何图书馆或其他来源获得它... [http://www.crcnetbase.com/doi/pdf/10.1201/9780203496213.ch7](http://www.crcnetbase.com/doi/pdf/10.1201/9780203496213.ch7)

您是否还考虑过使用 MYSQL 数据库，如果您的字典有很多条目，这可能会更快一些？

希望这会有所帮助，-Ben

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T14:05:02.433

也许将 Searcher 类中的文件作为实例变量，然后创建一个单独的函数来打开文件。然后更改 searchInsideFile() 函数以访问之前已经打开的文件。记得之后关闭文件！

# image - 从 BinaryMessage 捕获图像

> ID：10012707
> 
> 赞同：0
> 
> 时间：2012-04-04T14:02:33.700
> 
> 标签：image, blackberry, encoding, sms, mms

我正在为黑莓开发消息捕获应用程序。

我用它来捕获消息：

```
if(TextMessage.class.isAssignableFrom(msg.getClass()))
{
    TextMessage tmsg = (TextMessage)msg;
}
else if(MultipartMessage.class.isAssignableFrom(msg.getClass()))
{
    MultipartMessage mmsg = (MultipartMessage)msg;
    ProcessMultiPartMsg(mmsg);
}
else if(BinaryMessage.class.isAssignableFrom(msg.getClass()))
{
    BinaryMessage bmsg = (BinaryMessage)msg;
    // how to retrieve image from 'bmsg'
} 
```

我的问题是，如何从[BinaryMessage](http://www.blackberry.com/developers/docs/7.1.0api/javax/wireless/messaging/BinaryMessage.html)对象中检索实际图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T02:00:15.497

我以前没有使用过[BinaryMessage](http://www.blackberry.com/developers/docs/7.1.0api/javax/wireless/messaging/BinaryMessage.html)，但是查看文档，看来 BinaryMessage.getBytes() 将是您程序的下一步。您必须弄清楚编码是什么才能将这些字节变成更有意义的东西。如果您通过其他方式知道编码是什么，那么您可以将这些字节交给解码器。否则，您将不得不将它们保存在某处并在开发过程中对字节进行更多分析以找出编码。

# perforce - perforce 进度条

> ID：10012716
> 
> 赞同：2
> 
> 时间：2012-04-04T14:03:00.753
> 
> 标签：perforce

我目前正在使用 Perforce 4，以获取 udk 的许可版本。当我选择获取最新版本时，它似乎在做某事，但我看不到需要多长时间或何时结束。

它偶尔会显示一个进度条，但我不知道是什么导致它出现，所以我的问题是：我如何调出这个进度条，如果可能的话，为什么它在我身上冻结并且它总是在中途冻结。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T20:41:46.160

进度条，嗯，不完全准确。不过，这正在为下一个版本而努力；今年晚些时候在这方面应该有好消息。

# z3 - 量词和模式（QBF 公式）

> ID：10012718
> 
> 赞同：7
> 
> 时间：2012-04-04T14:03:03.810
> 
> 标签：z3

我正在尝试用 smt-lib 2 语法为 z3 编码 QBF。运行 z3 会导致警告

> 警告：找不到量词的模式（量词 id：k！14）

可满足性结果为“未知”。

代码如下：

```
(declare-fun R (Bool Bool Bool Bool) Bool)
(assert
  (forall ((x2 Bool) (x3 Bool)) 
    (exists ((y Bool))
      (forall ((x1 Bool))
        (R x1 x2 x3 y)
      )
    )
  )
)
(check-sat) 
```

我通过将代码重写为

```
(set-option :auto-config false)
(set-option :mbqi false)
(declare-fun R (Bool Bool Bool Bool) Bool)
(declare-fun x1 () Bool)
(declare-fun x2 () Bool)
(declare-fun x3 () Bool)
(declare-fun y () Bool)
(assert
  (forall ((x2 Bool) (x3 Bool)) 
  (!
    (exists ((y Bool))
    (!
      (forall ((x1 Bool))
      (!
        (R x1 x2 x3 y)
      :pattern((R x1 x2 x3 y)))
      )
    :pattern((R x1 x2 x3 y)))
    )
  :pattern((R x1 x2 x3 y)))
  )
)
(check-sat) 
```

然而，sat-query 的结果仍然是“未知的”。

我猜我需要得到正确的模式？如何为嵌套量词指定它们？不过，带有量词的更简单示例似乎可以在没有模式注释的情况下工作。

不幸的是， Z3[中警告消息背后的原因是什么：“未能找到量词的模式（量词id：k！18）”](https://stackoverflow.com/questions/9189949/what-is-the-reason-behind-the-warning-message-in-z3-failed-to-find-a-pattern-f)和z3指南对我没有太大帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T18:15:00.750

可以忽略此警告消息。它只是通知您，电子匹配引擎将无法处理此量化公式。

电子匹配仅在表明问题不可满足时才有效。由于您的示例可以满足，因此电子匹配不会很有用。也就是说，Z3 将无法`sat`使用 E 匹配引擎返回。基于模型的量词实例化 (MBQI) 是 Z3 中唯一能够显示包含量词的问题是可满足的引擎。

使用默认配置，Z3 将返回`sat`您的示例。它返回`unknown`是因为您禁用了 MBQI 模块。

MBQI 引擎保证 Z3 是许多片段的决策过程（参见[http://rise4fun.com/Z3/tutorial/guide](http://rise4fun.com/Z3/tutorial/guide)）。但是，它通常非常昂贵，当快速和近似的答案足够时应该禁用它。在这种情况下，`unknown`可以读作`probably sat`. [VCC](http://research.microsoft.com/en-us/projects/vcc/)等验证工具禁用 MBQI 模块，因为它无法确定它们生成的公式。也就是说，VCC生成的公式不在MBQI引擎可以决定的任何片段中。我们说一个片段可以由 Z3 决定，当片段中的任何公式 Z3 将返回`sat`或`unsat`（即，它不返回`unknown`）。当然，这种说法假设我们拥有无限量的资源。`unknown`也就是说，当 Z3内存不足或用户指定超时时，Z3 也可能因可判定片段而失败（即 return ）。

最后，Z3 3.2在 MBQI 引擎中有一个[bug 。](https://stackoverflow.com/questions/8169734/how-are-int-sort-of-smt-lib-2-0-ints-theory-and-dynamically-declared-sorts-def)该错误已修复，不会影响您的问题。如果您需要，我可以为您提供包含错误修复的 Z3 4.0 的预发布版本。

# c# - SELECT WHERE OleDbException 抛出

> ID：10012721
> 
> 赞同：1
> 
> 时间：2012-04-04T14:03:21.033
> 
> 标签：c#, tsql

我已经为此苦苦挣扎了半个小时。

```
using(con)
{
   con.Open();    

   foreach(string category in categories)
   { 
      string select_cmd = "SELECT FileName FROM Songs WHERE MusicCategory=\'" + category + "\'";
      var cmd = new OleDbCommand(select_cmd, con);
      using(OleDbDataReader reader = cmd.ExecuteReader())
      {
          while(reader != null && reader.Read()
          {
             // do some work
          }
      }
   }
} 
```

我收到一个 OleDbException：查询表达式 '1stMusicType = 'Ε.60's & 70's(Α)'' 中的语法错误（缺少运算符）。看在上帝的份上，我无法理解为什么抛出异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:05:58.783

类别名称中的撇号 ( `'`) 脱离了查询中的字符串：

```
SELECT FileName FROM Songs WHERE MusicCategory='Ε.60's & 70's(Α)'
                                                    ^ this breaks out of the string 
```

所以你需要转义那些字符

```
MusicCategory=\'" + category.Replace(@"'", @"''") + ... 
```

但是，通过使用参数可以很容易地解决这个问题并使其更加健壮，这是将用户输入值放入查询的建议。

```
string select_cmd = "Select FileNAme From songs where MusicCategory=@MusicCategory";
var cmd = new OleDbCommand(select_cmd, con);
var prm = new OleDbParameter("@MusicCategory", category);
cmd.Parameters.Add(prm); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:30:34.523

当我回到家测试参数化命令时，斗争仍在继续。最终我发现了导致异常的原因。

OleDbCommand 应该使用“？” 而不是命名的“@param”参数，但我让它双向工作。原来抛出异常是因为我没有将 MusicCategory 括在方括号中。

sql 查询的工作语法是：

```
string select_cmd = "SELECT FileName FROM Song WHERE [MusicCategory] = ?"
var cmd = new OleDbCommand(select_cmd, con);
cmd.Parameters.AddWithValue("param", category); 
```

# c++ - 在 OpenVM 上构建 Boost

> ID：10012722
> 
> 赞同：3
> 
> 时间：2012-04-04T14:03:22.187
> 
> 标签：c++, boost, openvms

我希望移植一个应用程序以使用 HP C++7.3 打开 vms，但目前只是尝试一些示例来确定它是否是一种潜在的前进方式，但有点卡住了。作为一个全新的打开虚拟机，到目前为止它很有趣。

对于初学者来说，作为一个整体，我在构建 boost 方面还没有走得太远，经过一番谷歌搜索后，我发现有人提到了一些人有 dcl 脚本来构建 boost 但没有实际的脚本。我不认为任何人有任何或可以品脱我。我“只”需要 asio 和线程。

目前我只是在尝试编译 asio 聊天示例。正如我所说，我对 VMS 和编译器完全陌生，我设法编译了一些东西，但现在得到一个“无法打开源文件“sys/select.h””，谷歌搜索表明我可能需要安装 HP 移植库，或者我只是缺少包含正确代码的前处理指令，在 socket_types.hpp 中看不到任何明显的设置？

任何正确的大方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:41:23.423

OpenVMS 上的 boost 库可以直接从头文件中使用。我记得要确保的一件事是 BOOST 逻辑被定义为隐藏的，因此相对包含工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:50:30.437

没有答案，因为问题太开放了，而且在我知之甚少的领域。只是一些想法。

选择可以由 OpenVMS TCPIP 服务（又名 UCX）或其他 TCP 堆栈提供。在 dcl 提示符下尝试： $ HELP TCPIP_Services Programming_Interfaces Socket_API

OpenVMS 上的异步编程通常是“事件驱动的”。Google for SYS$QIO 和 AST

有一个公共访问 OpenVMS 系统，其中包含“NOTES FILES”（网络论坛的前导） 尝试 TELNET 到 EISNER.DECUS.ORG，您将获得注册说明。一旦你找到了前往 PORTING_TO_VMS 会议的路 在 NOTES 会议中，你可以发出命令 DIRECTORY 或 DIR/TIT=xxx 不幸的是没有可供选择的主题，但你可以使用 NOTES> SEARCH "select( " 后跟重复的 SEARCH 命令) ( $ NOTES ... OPEN PORT ... SEARCH "select(" ... SEARCH [] ... SEARCH ... )

PERL 人员在 OpenVMS 上开发开放的东西方面做得令人钦佩。

祝你好运！

# java - Activiti Forms，表单属性的初始值

> ID：10012723
> 
> 赞同：1
> 
> 时间：2012-04-04T14:03:25.557
> 
> 标签：java, jbpm, activiti

我正在使用 activiti 5.9，我希望能够为特定的表单属性设置初始值。

当进程中不存在具有给定 id 的变量时，应使用此初始值，并且当用户任务完成时可能会被覆盖，新值将存储在进程变量中。

我认为Expression是为此目的，但我不能那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:55:37.343

我找到了答案，在 activiti 表单属性中有一个名为*default*的属性用于此目的。旧版本的 Activiti Designer 在表单属性编辑器中没有此属性，但在最近的版本中，他们将此属性添加到了编辑器中。

# android - Google c2dm 服务器无论如何都可以发送空的注册 ID 吗？

> ID：10012733
> 
> 赞同：0
> 
> 时间：2012-04-04T14:04:01.517
> 
> 标签：android, android-c2dm

我正在尝试通过 c2dm 服务器向电话号码发送推送通知。为此，我正在向 c2dm 服务器注册我的手机，并存储从 c2dm 服务器获取的注册 ID。

我知道像 403、500 这样的错误代码

是否存在我的注册 ID 可能为空的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:33:53.703

不，`registration_id`从 Google 收到的信息不可能是空的。

当您向 Google 服务器发出注册请求时，您必须几乎立即在您为处理此类操作而注册的接收器中收到一个注册 ID。记录它或与它一起祝酒以说服自己它不是空的，然后将其存储。没有注册 ID，您无法发送 C2D 消息。

# facebook - Facebook Like 按钮未正确注册喜欢

> ID：10012735
> 
> 赞同：2
> 
> 时间：2012-04-04T14:04:03.137
> 
> 标签：facebook, facebook-like, facebook-opengraph, tumblr

我正在维护一个博客（在 Tumblr 中）：baierblog.com。
在过去的几周里，博客帖子上的 Facebook 点赞按钮正在发挥作用。
一些帖子的点赞按钮是可以的，但其他的则有两个问题：
**A.**一些按钮不保存点赞数（您可以点击按钮，但是当您刷新页面时，按钮被重置，您的点赞数没有了保存）。例如：[糖醋鸡](http://baierblog.com/post/19733836593/sweet-and-sour-chicken "糖醋鸡")。
**B.**其他按钮带有博客本身 (baierblog.com) 的点赞数，而不是确切帖子的点赞数。例如：[电晕黑面包](http://baierblog.com/post/20040868103/corona-brown-bread "电晕黑面包")。

此行为似乎与我的代码无关，因为当我在*Like 按钮页面*中输入 url 时，生成的按钮的行为相同。

该站点通过了*Lint Debug*。

有任何想法吗？

**更新：**虽然 Mutant24 发现了一个错误，但这似乎不是问题的原因。
在没有我的任何干涉的情况下，上面给出的两个例子现在的作用是一样的。意思是，它们都带有博客本身的点赞数（这些网址的点赞按钮生成页面中的点赞按钮也是如此）。
graph.facebook.com/http://baierblog.com/post/19733836593/sweet-and-sour-chicken 中保存的值是该帖子的真实点赞数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:34:37.977

将“糖醋鸡”的网址插入点赞[按钮创建器](https://developers.facebook.com/docs/reference/plugins/like/)会产生以下错误：

> “fb:app_id”元标记中指定的应用 ID 不允许在此域中使用。您必须将应用程序的 Connect Base Domains 设置为 [http://baierblog.com/post/19733836593/sweet-and-sour-chicken](http://baierblog.com/post/19733836593/sweet-and-sour-chicken)的前缀。

它试图喜欢这篇文章但失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:57:11.323

Dori：在 og 元标记中，您在 og:url 中分配了错误的值

```
original url is - http://baierblog.com/post/17578099422/dark-chocolate-cake
and your are providing - http://baierblog.com/ 
```

请修复它并检查您的问题将得到解决。

# c# - 如何序列化 IList 等接口

> ID：10012736
> 
> 赞同：14
> 
> 时间：2012-04-04T14:04:05.617
> 
> 标签：c#, list, interface, xml-serialization

> **可能重复：**
> [如何序列化 IList<T>？](https://stackoverflow.com/questions/464525/how-to-serialize-an-ilistt)

我希望序列化一个`S`包含我定义的另一个类的类型`IList<T>`的属性的类（我们称之为它）。`T`当我尝试将类的实例序列化为`S`XML 时出现异常。这是可以理解的，因为`XmlSerializer`不知道要使用哪个具体类。有没有办法，希望使用属性，在序列化/反序列化实例时指定要实例化的具体类。我的类实现`S`创建了一个类的实例`List<T>`。这是一些代码来说明我的示例：

```
using System;
using System.Xml.Serialization;
using System.IO;

[Serializable]
public class T { }

[Serializable]
public class S
{
    public IList<T> ListOfTs { get; set; }

    public S()
    {
        ListOfTs = new List<T>();
    }
}

public class Program
{
    public void Main()
    {
        S s = new S();
        s.ListOfTs.Add(new T());
        s.ListOfTs.Add(new T());
        XmlSerializer serializer = new XmlSerializer(typeof(S));
        serializer.Serialize(new StringWriter(), s);
    }
} 
```

我希望有一个属性可以放在`ListOfTs`对序列化说的定义之上，“假设`List<T>`序列化/反序列化时的一个实例”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T14:08:17.267

更改

```
public IList<T> ListOfTs { get; set; } 
```

到

```
public List<T> ListOfTs { get; set; } 
```

然后它将起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T14:16:19.547

我认为通常有两种方法可以解决这类问题。

一种是使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)，但由于您已经在使用 XmlSerializer，您可能不想这样做。

“替代方案”是具有专门用于序列化目的的属性，并在序列化期间忽略 IList。

```
[Serializable]
public class S
{
    IList<T> _listofTs;

    [XmlIgnore]
    public IList<T> ListOfTs { get _listofTs; set _listofTs = value; }

    [XmlElement(Name="Not Exactly the Greatest Solution!")]
    public List<T> ListOfTs { get _listofTs; set _listofTs = value; }

    public S()
    {
        ListOfTs = new List<T>();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:12:20.183

您可以`IXmlSerializable`使用 Xml 读取器和写入器手动实现接口并实现序列化逻辑。

# c# - 主体参数“宽度”。GET 操作不能有主体？

> ID：10012737
> 
> 赞同：6
> 
> 时间：2012-04-04T14:04:06.960
> 
> 标签：c#, wcf, web-services, rest

我试图从 wcf 休息服务中获取图像，如下所示：

```
[ServiceContract]
public interface IReceiveData
{
    [OperationContract]
    [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "picture/")]
    //this line is wrong though
    Stream GetImage(int width, int height);
}
public class RawDataService : IReceiveData
{
    public Stream GetImage(int width, int height)
    {
        // Although this method returns a jpeg, it can be
        // modified to return any data you want within the stream
        Bitmap bitmap = new Bitmap(width, height);
        for (int i = 0; i < bitmap.Width; i++)
        {
            for (int j = 0; j < bitmap.Height; j++)
            {
                bitmap.SetPixel(i, j, (Math.Abs(i - j) < 2) ? Color.Blue : Color.Yellow);
            }
        }
        MemoryStream ms = new MemoryStream();
        bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
        ms.Position = 0;
        WebOperationContext.Current.OutgoingResponse.ContentType = "image/jpeg";
        return ms;
    }
} 
```

在我的主机应用程序中：

```
class Program
    {
        static void Main(string[] args)
        {
            string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
            ServiceHost host = new ServiceHost(typeof(RawDataService), new Uri(baseAddress));
            host.AddServiceEndpoint(typeof(IReceiveData), new WebHttpBinding(), "").Behaviors.Add(new WebHttpBehavior());
            host.Open(); // this line
            Console.WriteLine("Host opened");
            Console.ReadLine(); 
```

我收到此错误：

> 合约“IReceiveData”中的“GetImage”操作使用 GET，但也有主体参数“width”。GET 操作不能有主体。将参数“宽度”设为 UriTemplate 参数，或从 WebGetAttribute 切换到 WebInvokeAttribute。

我不确定您如何为图像设置 webinvoke/UriTemplate 方法或如何获取图像并返回它。有人可以在此示例中发布显示图像的正确方法吗？

**编辑**

如果我在导航到时尝试以下答案并`UriTemplate = "picture?w={width}&h={height}"`用作我的 UriTemplate，`http://www.localhost.com:8000/Service/picture?width=50&height=40`则会在我的代码中收到错误：

```
public Stream GetImage(int width, int height)
        {
            Bitmap bitmap = new Bitmap(width, height); // this line
            for (int i = 0; i < bitmap.Width; i++)
            {
                for (int j = 0; j < bitmap.Height; j++)
                {
                    bitmap.SetPixel(i, j, (Math.Abs(i - j) < 2) ? Color.Blue : Color.Yellow);
                }
            }
            MemoryStream ms = new MemoryStream();
            bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
            ms.Position = 0;
            WebOperationContext.Current.OutgoingResponse.ContentType = "image/jpeg";
            return ms;
        } 
```

哪个状态`ArguementException was unhandled by user code:`**参数无效。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T14:09:51.957

在属性中，您需要告诉运行时您希望将宽度和高度作为 URL 参数。

目前，运行时假定您正在调用不带参数的 URL，但被调用的方法需要参数，因此运行时真的不知道如何找到要传递给您的方法的值 for`width`和`height`。

这看起来像

```
[WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "picture/{width}/{height}")]
Stream GetImage(string width, string height)
{
    int w, h;
    if (!Int32.TryParse(width, out w))
    {
        // Handle error: use default values
        w = 640;
    }
    if (!Int32.TryParse(height, out h))
    {
        // Handle error use default values
        h = 480;
    }

    ....
} 
```

您将需要调用 URL，例如`http://test.tld/picture/320/200`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-04T14:11:27.053

```
UriTemplate = "picture/" 
```

应该是这样的

```
UriTemplate = "picture?w={width}&h={height}" 
```

这告诉 WCF 如何从 URL 中获取宽度和高度参数。

# grails - 为 Grails 中的长时间运行操作向用户发送反馈？

> ID：10012738
> 
> 赞同：1
> 
> 时间：2012-04-04T14:04:08.957
> 
> 标签：grails

我的 Grails 应用程序中有一个长时间运行的操作。我的第一个解决方案是简单地在控制器中执行操作，让用户等待操作完成。这不是一个可接受的解决方案，我想向用户展示操作的进度。进度只是文字。该操作可能需要 10 秒到大约 30 分钟。

如何向用户显示我的长期操作的进度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:28:30.260

首先，您可能想尝试[Executor 插件](https://github.com/basejump/grails-executor)，以便可以在后台运行作业。这工作得很好。

那我猜你有2个选择。让浏览器通过 Ajax 轮询服务器以获取更新（正如 Tim 指出的那样，JProgress 插件会为您做类似的事情）或者获得更多优势并考虑[使用 HTML5 WebWorkers](http://en.wikipedia.org/wiki/Web_worker)作为一种服务器推送方法。WebWorkers 在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:50:25.227

您将需要具有字段百分比完成的任务或作业域类之类的东西。控制器将创建并保存任务或作业，然后生成一个新线程来执行它。也许将执行代码放在服务中。

在任务或作业完成任务时更新任务或作业的百分比完成字段将取决于您的执行代码。然后您可以轮询作业（通过 ajax）以查看作业的进展情况。

注意：确定完整的百分比很大程度上取决于您的特定代码。您可能只需要根据您所拥有的知识提出一个最佳猜测。即使对于如何确定完成百分比很明显的操作（如文件下载），也不确定（网络问题等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:51:03.993

[JProgress 插件](http://grails.org/plugin/jprogress)可能会有所帮助，但我从未尝试过...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:24:55.673

你能确定你的进步状态吗？比方说百分比？我会将长时间操作创建为 quarz 作业（背景），并通过 ajax 查询作业/长时间运行进度的状态。

# php - 使用 CodeIgniter 阻止对 index.php 的直接访问

> ID：10012739
> 
> 赞同：0
> 
> 时间：2012-04-04T14:04:15.917
> 
> 标签：php, .htaccess, codeigniter, codeigniter-2

我已经设法消除了输入`index.php`网址的需要，但仍然可以这样做。我不希望这样，并希望阻止用户通过 url 访问我的应用程序，例如`/index.php/home`or`/index.php/contact`甚至`/index.php`.

**有谁知道如何做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:07:50.390

在你`.htaccess`写在顶部

```
DirectoryIndex my_new_index.php

RewriteEngine on
RewriteCond $1 !^(my_new_index\.php|images|robots\.txt) 
RewriteRule ^(.*)$ /my_new_index.php/$1 [L] 
```

将您的`index.php`文件重命名为`my_new_index.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:05:19.533

如果您使用的是 Apache，那么只需设置一个重写规则将用户从 index.php 重定向到 /

```
RewriteRule ^/index\.php$ /
RewriteRule ^/index\.php/(.*) /$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:11:11.297

确切地。这是一个例子：

```
RewriteRule    ^foo\.html$  bar.html 
```

或者您可以使用如下变量：

```
^hotsheet/(.*)$  http://www.tstimpreso.com/hotsheet/$1 
```

# python - 从 epydoc 的文档字符串格式切换到 sphinx 文档字符串格式的自动化方法？

> ID：10012741
> 
> 赞同：10
> 
> 时间：2012-04-04T14:04:16.933
> 
> 标签：python, converter, python-sphinx, docstring, epydoc

我有一个使用 epydoc 记录的项目。现在我正在尝试切换到狮身人面像。我为 epydocs 格式化了所有文档字符串，使用 B{}、L{} 等进行粗体、链接等，并使用@param、@return、@raise 等来解释输入、输出、异常等。

所以现在我切换到狮身人面像它失去了所有这些功能。是否有一种自动方法可以将 epydocs 格式的文档字符串转换为 sphinx 格式的文档字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T18:24:58.633

为了扩展 Kevin Horn 的答案，可以在由[autodoc-process-docstring](http://sphinx.pocoo.org/ext/autodoc.html#event-autodoc-process-docstring)事件触发的事件处理程序中动态翻译文档字符串。

下面是一个小演示（通过将代码添加到**conf.py**来尝试）。它将`@`一些常见的[Epytext 字段](http://epydoc.sourceforge.net/fields.html)中的字符替换为`:`，在相应的[Sphinx 字段](http://sphinx.pocoo.org/domains.html#info-field-lists)中使用。

```
import re

re_field = re.compile('@(param|type|rtype|return)') 

def fix_docstring(app, what, name, obj, options, lines):
    for i in xrange(len(lines)):
        lines[i] = re_field.sub(r':\1', lines[i])

def setup(app):
    app.connect('autodoc-process-docstring', fix_docstring) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-24T07:52:52.497

[**Pyment**](https://github.com/dadadel/pyment)是一个可以转换 Python 文档字符串并创建缺失的骨架的工具。它可以管理**Google**、 **Epydoc**（javadoc 风格）、 **Numpydoc**、 **reStructuredText**（reST，Sphinx 默认）文档字符串格式。

它接受单个文件或文件夹（也探索子文件夹）。对于每个文件，它将识别每种文档字符串格式并将其转换为所需的格式。最后，将生成一个补丁以应用于该文件。

# 要转换您的项目：

*   **安装 Pyment**

键入以下内容（您可以使用 virtualenv）：

```
$ git clone https://github.com/dadadel/pyment.git
$ cd pyment
$ python setup.py install 
```

*   **从 Epydoc 转换为 Sphinx**

您可以通过执行以下操作将您的项目转换为默认输出格式的 Sphinx 格式 (reST)：

```
$ pyment /my/folder/project 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:49:03.530

从理论上讲，您可以编写一个 Sphinx 扩展，它可以捕获读取文档字符串时触发的任何事件（`source_read`也许？）并即时翻译文档字符串。

我说理论上是因为：

1.  很久以前就一直想写这样的东西，但是一直没搞定。
2.  翻译这样的东西总是比看起来更难。

您也可以尝试用 Sphinx 之外的类似翻译器替换代码中的所有文档字符串，可能使用`ast`模块或类似的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-09T20:18:17.660

正如其中一项评论所建议的那样，`sphinx-epytext`确实提供了相关支持。它是如何为我工作的：

安装它非常简单：

```
pip install -U sphinx-epytext 
```

它包含一个文件，该文件通过替换为冒号`process_docstring.py`将 epytext 标记转换为 reStructuredText 标记。`@``:`

我发现其中缺少的一些字段是：`ivar, var, cvar, vartype`

只需在其中扩展现有列表**`FIELDS`**：

```
FIELDS.extend(['ivar', 'var', 'cvar', 'vartype']) 
```

Epytext 理解`@type`变量，但 sphinx 理解`:vartype`.

要解决这个问题，请在方法中用后来的替换以前的`process_docstring`。

Sphinx 无法理解的大多数语法或文档字符串部分都被报告为警告。`sphinx-build`您可以通过运行来记录这些警告`-w <WarningLogFile>`。根据我的经验，Sphinx 对字段应该如何开始或结束、缺少格式语法等非常敏感。

# sql - sql select语句使用模式而不是like

> ID：10012746
> 
> 赞同：0
> 
> 时间：2012-04-04T14:04:32.827
> 
> 标签：sql

我的数据库中有一个数字，例如 99999、17299999、182317299999，我不想使用`like '%99999'`. 模式为 17_99999 和 18__17_99999。

有没有办法使用这种模式而不是 like ？a.id = '17_'+b.id 还是什么？

PS。我有 6000 万条记录.. 所以使用`like`非常讨厌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:08:01.250

我知道你说过你不想使用`Like`，但是......

`like`通过使用下划线来支持单个字符占位符，或者通过使用集合来支持字符`[]`集。

有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms179859.aspx)页面

另外别忘了Like还支持使用变量，

所以你可以做

```
declare @like varchar(200)
set @like = '17_99999'
select * from table where field like @like 
```

`@like`这将允许您以与您描述的方式类似的方式构建变量。

# php - 保留我的字符编码

> ID：10012747
> 
> 赞同：0
> 
> 时间：2012-04-04T14:04:36.087
> 
> 标签：php, encoding, character

我购买了解析为∠.ws的域xn--79n.ws。（在推特上仍然算作一个字符）

我建立了一个自定义图像上传服务，我试图回显链接。我不想回显[http://xn--79n.ws/image.jpg](http://xn--79n.ws/image.jpg) ，而是回显 http://∠.ws/image.jpg。

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:17:42.563

您需要做的就是为您的 HTML 输出添加一个适当的标题，它会起作用

HTML > 头部

```
<meta charset="UTF-8" /> 
```

或者

```
<meta http-equiv='Content-Type' content='Type=text/html; charset=utf-8'> 
```

谢谢

:)

# list - 判断给定元素是否在双精度列表中

> ID：10012749
> 
> 赞同：2
> 
> 时间：2012-04-04T14:04:41.343
> 
> 标签：list, prolog, tuples

我在表格中有一个双打列表`A = [[1,2],[2,3],[3,4],[5,5]]`

我想要做的是创建一个函数，如果一个数字是任何双打中的第一个数字，它将返回 true。所以`somefunction(7,A)`会返回假，`somefunction(5,A)`也会返回真。

我已经尝试过了`somefunction(A,B) :- A == (B,_)`，但这没有任何用处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:37:18.507

或者自己进行递归，您可以使用“高阶”谓词`maplist/3`结合`nth0/3`仅选择列表的第一个元素，然后`member/2`对结果发出调用以实现您想要的：

```
somefunction(Element, List) :-
    maplist(nth0(0), List, Firsts),
    member(Element, Firsts). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:36:55.553

`member([N,_],As).`

但这里有两点说明：

首先，你真的想要这样的列表`[[1,2],[3,4]]`吗？如果您总是有两个元素，请考虑使用对。也就是说，使用函子`(-)/2`。它经常被写`Key-Value`。你会这样写`[1-2,3-4]`。对的列表是常用的，有`keysort/2`哪些只根据`Key`.

其次，“名称查找”的常用习语如下：

```
..., P = (Name-Value), member(P, Dict), ... 
```

这里值得注意的是，对于对列表或我们拥有的任何其他元素，我们不需要“特殊”成员谓词。我们现在可以“按名称”或“按值”搜索，或者两者都搜索，或者都不搜索...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:07:26.240

您可以像这样递归地执行此操作：

检查该值是否位于列表的开头：

```
somefunction(A,[[A,_]|_]). 
```

然后递归检查该值是否在列表的其余部分中：

```
somefunction(A,[BH|BT]) :- somefunction(A,BT). 
```

# java - JPA EntityManager 大内存问题

> ID：10012751
> 
> 赞同：4
> 
> 时间：2012-04-04T14:04:47.167
> 
> 标签：java, spring, hibernate, jpa, entitymanager

我在使用 Spring、Hibernate 和 JPA 的 Web 应用程序时遇到了一些问题。问题是非常高的内存消耗，它随着时间的推移而增加，而且似乎永远不会减少。它们很可能源于对 EntityManager 的错误使用。我已经四处寻找，但我还没有找到确定的东西。

我们正在使用 DAO，它们都扩展了以下 GenericDAO，其中我们唯一的 EntityManager 被注入：

```
public abstract class GenericDAOImpl<E extends AbstractEntity<P>, P> implements
    GenericDAO<E, P> {

@PersistenceContext
@Autowired
private EntityManager entityManager;
    [...] 
```

使用通用 DAO 是因为它具有通过 ID 获取实体的方法等，这在所有约 40 个 DAO 中实现起来会很痛苦。

EntityManager 通过以下方式配置为 Spring bean：

```
<bean class="org.springframework.orm.jpa.JpaTransactionManager"
    id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<tx:annotation-driven mode="aspectj"
    transaction-manager="transactionManager" />
<bean
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="dataSource" ref="dataSource" />
</bean>
<bean id="entityManager" factory-bean="entityManagerFactory"
    factory-method="createEntityManager" scope="singleton" /> 
```

我认为最大的问题是使用这个共享的 EntityManager 来处理所有事情。在服务类中，我们将 @Transactional 注释用于需要事务的方法。这会从我读取的内容中自动刷新 EntityManager，但与清除不同，所以我猜这些对象仍在内存中。

我们注意到每天在数据库中每次自动导入数据后内存都会增加（大约 7 个文件，每个文件 25k 行，其中创建了很多链接对象）。而且在正常运行期间，当检索大量数据时（假设一次请求 100-200 个对象）。

任何人都知道我该如何改善目前的情况（因为此时情况有点糟糕......）？

**编辑**：在已部署的应用程序上运行了探查器，这就是它发现的：

```
One instance of "org.hibernate.impl.SessionFactoryImpl" loaded by "org.apache.catalina.loader.WebappClassLoader @ 0xc3217298" occupies 15,256,880 (20.57%) bytes. The memory is accumulated in one instance of "org.hibernate.impl.SessionFactoryImpl" loaded by "org.apache.catalina.loader.WebappClassLoader @ 0xc3217298". 
```

这大概是EntityManager没有清除吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T22:04:32.797

我倾向于同意你的评价。 [EntityManagers 并不是真正设计为用作单例](https://stackoverflow.com/questions/9370819/hibernate-entitymanager-is-it-supposed-to-be-used-as-a-singleton)的。刷新 EntityManager 不会从内存中清除任何内容，它只会将实体与数据库同步。

可能发生的是 EntityManager 保持对持久性上下文中所有对象的引用，而您永远不会关闭上下文。（[这个人](http://www.mytechtip.com/2010/03/remember-to-clear-entity-manager-if_458.html)也有类似的问题。）清除它确实会删除从 EntityManager 到您的实体的所有引用，但是，如果您发现自己经常需要调用 clear()，您可能应该重新评估您如何使用 EntityManager。如果您只是想避免 LazyInitializationExceptions，请考虑 Spring* 中的 OpenSessionInViewFilter。这允许您延迟加载实体，同时仍然让 Spring 管理 bean 的生命周期。bean 的生命周期管理是 Spring Framework 的一大优势，因此您需要确保覆盖该行为确实是您想要的。

在某些情况下，您确实需要一个长期存在的 EntityManager，但这些情况相对较少，需要大量了解才能正确实施。

*注意：OpenSessionInView 需要非常小心以避免[N+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。这是一个大问题，[有些人在 View an AntiPattern 中调用 Open Session](https://stackoverflow.com/questions/1103363/why-is-hibernate-open-session-in-view-considered-a-bad-practice)。谨慎使用。

***编辑***

此外，您也不需要注释`@PersistenceContext`元素`@Autowired`。`@PersistenceContext`接线本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-15T22:02:21.343

不符合 JEE 的应用程序服务器，您不应该使用`@Autowired/@PersistenceContext private EntityManager entityManager;`！

你应该做的是这样的：

```
class SomeClass {
   @PersistenceUnit private EntityManagerFactory emf;

   public void myMethod() {
      EntityManager em = null;
      try {
         em = emf.createEntityManager();
         // do work with em
      } 
   } catch (SomeExceptions e) {
      // do rollbacks, logs, whatever if needed
   } finally {
      if (em != null && em.isOpen()) {
        // close this sucker
        em.clear();
        em.close();
      }
   }
} 
```

一些注意事项：

*   这适用于带有 Spring + Hibernate 的非完整 JEE 应用服务器
*   我已经用 JDK 1.7 和 1.8 对其进行了测试，在泄漏方面没有区别。
*   常规的 Apache Tomcat*不是*真正的 JEE 应用服务器（但是[TomEE](http://openejb.apache.org/apache-tomee.html)是）
*   [符合 Java EE 的应用服务器列表](http://www.oracle.com/technetwork/java/javaee/overview/compatibility-jsp-136984.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T13:52:26.380

您应该`@Autowired`从上面删除注释并从上下文定义文件中`private EntityManager entityManager;`删除bean 定义。`entityManager`此外，如果您不使用`<context:annotation-config/>`和`<context:component-scan/>`XML 标记，则必须`PersistenceAnnotationBeanPostProcessor`在上下文中定义 bean。

# java - 使 JFrame 透明会中断 Mac 上的滚动

> ID：10012753
> 
> 赞同：6
> 
> 时间：2012-04-04T14:04:50.300
> 
> 标签：java, macos, swing, scroll, transparent

我有一个透明的未装饰`JFrame`，我使用`AWTUtilities.setWindowOpaque(this, false)`. 在 上`JFrame`，我有一个滚动窗格；它在 Windows 上完美运行。在 Mac 上，整体`JFrame`是可拖动的；因此，当我尝试通过在滚动条上单击并按住鼠标来滚动滚动窗格时，整个框架都会移动而不是滚动条拇指。我也尝试使用`setBackground(new Color(0,0,0,0))`而不是`setWindowOpaque()`，但它有同样的问题。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:27:29.147

正如在[这个类似的线程](https://stackoverflow.com/a/6139080/1539697)中所建议的，尝试：

```
getRootPane().putClientProperty("apple.awt.draggableWindowBackground", Boolean.FALSE); 
```

如果您选择使用它，滚动条将可用并且窗口不会拖动。但是，您可能会遇到无法移动的窗口，除非您`MouseMotionListener`在方法中添加 a 并`mouseDragged()`使用类似`frame.setLocation()`.

相反，您可能可以强制用户单击滚动条的箭头按钮，而不是拖动滚动条本身……但这不是我见过的最用户友好的想法。

# python - 处理多个文件python时保存列表

> ID：10012754
> 
> 赞同：1
> 
> 时间：2012-04-04T14:04:56.663
> 
> 标签：python

我有一个python脚本来处理一个文件夹中的几个文件，结果是这样的，有两列叫做user_agent和user_type

```
firefox, pc
IE, pc
iPhone, mobile
.... 
```

由于来自相同或不同文件的结果可能会重复，因此我使用列表来跟踪唯一组合。

```
if (user_agent,user_type) not in lookuplist:
   lookuplist.append((user_agent,user_type))
   print user_agent,user_type 
```

现在的问题是，由于我有多个要解析的原始数据文件，如何在一个文件完成时“保存”查找列表，而当第二个文件启动时，它仍然知道，例如 (firefox, pc) 有已经存在，那么我不会有重复的结果

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:12:13.227

首先，您应该`set`为您的`lookuplist`. 其次，在循环中打开所有文件并在循环中检查重复项。

# visual-studio-2010 - 无法在 Visual Studio 2010 即时窗口中运行“dd”命令

> ID：10012760
> 
> 赞同：1
> 
> 时间：2012-04-04T14:05:20.237
> 
> 标签：visual-studio-2010, windbg, sos

我正在使用Visual Studio 2010 中[的 Son of Strike](http://msdn.microsoft.com/en-us/library/bb190764.aspx) (SOS) 调试托管应用程序。我想从特定位置运行原始内存转储，但出现“预期表达式结束”错误。如果我附加[WinDbg](http://en.wikipedia.org/wiki/WinDbg)，那么我可以运行相同的 'dd' 命令。我该如何解决这个问题？

```
!clrstack -l
OS Thread Id: 0xd5c (3420)
Child SP IP       Call Site
0050eeac 002700eb ConsoleApplication2.Program.Main(System.String[])
    LOCALS:
        0x0050eeb0 = 0x0240c178
        0x0050eebc = 0x00000000

0050f0fc 6b4c21bb [GCFrame: 0050f0fc]

dd 0x0240c178
End of expression expected
dd 0x0050eeb0
End of expression expected 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:06:29.563

在立即窗口中，您必须使用`>dd 0x001AF2E0`它才能使其工作。您必须输入`>`before `dd`。

```
dd 0x001AF2E0
End of expression expected

>dd 0x001AF2E0
0x001AF2E0  6d7c4938 ffffffff 001af34c 00000001  
0x001AF2F0  002dd780 00000000 002dd780 ffffffff  
0x001AF300  00000001 77a220f9 00000000 00713000  
0x001AF310  002711a8 00000001 00000000 00000000 
```

在命令窗口中，您只需键入`dd 0x001AF2E0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T05:54:07.690

键入 .cordll 并查看是否加载了 sos dll。

例如：

0:000> .cordll

CLR DLL 状态：加载的 DLL C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscordacwks.dll

# opa - 如何遍历字符串映射中的键？

> ID：10012763
> 
> 赞同：1
> 
> 时间：2012-04-04T14:05:37.537
> 
> 标签：opa

我真正想做的是遍历字符串映射的键。我正在使用新奇的语法。我在 StringMap.iter() 上找不到任何信息，所以我使用了在某处为 List.iter() 找到的语法。我不认为原始代码实际上迭代了键，如果我能让它工作，现在我会满足于迭代值。

我的代码在这里： http: [//pastebin.com/9HB20yzy](http://pastebin.com/9HB20yzy)

我收到以下错误：

```
Error
File "test.opa", line 23, characters 1-64, (23:1-23:64 | 472-535)
Function was found of type
(string, 'a -> void), ordered_map(string, 'a, String.order) -> void but
application expects it to be of type
(string -> xhtml), stringmap(item) -> 'b.
Types string, 'a -> void and string -> xhtml are not compatible
Hint:
  Function types have different arguments arity (2 versus 1). 
```

我尝试了其他几种方法，但它们似乎使用的是旧语法并且与编译器不兼容。我真的不明白这个错误巫毒教告诉我什么，所以问题是，如何使用 StringMap.iter()？或者以其他方式迭代 StringMap 中的键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:40:00.920

`Function types have different arguments arity (2 versus 1)`意味着您尝试使用带有 1 个参数的函数，而预期使用带有 2 个参数的函数。您仅在列表上`values`迭代，但您在地图上通过`keys`and迭代`values`。

然后，`List.iter`或者`StringMap.iter`不打算执行副作用（例如登录控制台）。它们不返回任何值。这可能不是您想要在代码中执行的操作。

您应该改用 StringMap.fold ：

```
// item is a record of type {string description, string url}
function render_item(item) {
<>
  <li>
    <h4>item</h4>
    <a href="{item.url}">{item.description}</a>
  </li>
</>
}

function render_index() {
    function f(key, item, acc){
        [render_item(item) | acc]
    }
    <ul>
      { StringMap.fold(f, /mydb/items, []) }
    </ul>
} 
```

# ios - AFHTTPRequestOperation 进度参差不齐

> ID：10012766
> 
> 赞同：0
> 
> 时间：2012-04-04T14:05:43.670
> 
> 标签：ios, uiprogressview, afnetworking

我使用 AFHTTPRequestOperation 将 1-6 个图像上传到 Web 服务器。奇怪的是，当它在我的“setUploadProgressBlock”中报告进度时，它报告 totalBytesWritten 为：32,768 32,768 32,768 32,768 3,238 2,420 2,420... 并不断重复 2420 直到最后一个块，这是剩余的部分。

我正在使用 UIProgressView 报告上传进度，由于开头的块不相等（32,768 字节块），它立即跳到 30% 左右。我已经作弊了，基本上忽略了前四个大块，但我想知道是否有人解释它为什么这样做，或者更优雅的方式来处理它。此外，一旦它报告所有字节都已写入，它会在那里“无所事事”几秒钟，这似乎是一个不合理的长时间延迟。我已经用 UIActivityIndi​​cator（微调器）处理了这个问题，但是延迟这么长很烦人。我应该提到这是在 3g 上测试的，因为这将是目标环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:08:09.447

您能否仔细检查您没有读取 的值`bytesWritten`，该值报告上一批中上传了多少字节，而不是`totalBytesWritten`？或者，可能是同时执行多个上传，如果您将这些都记录在同一个回调中，这可能会造成混淆。

几秒钟的“无所事事”可能正在等待服务器的响应。你有更多的细节吗？

# facebook - facebook 照片对象的图像数组中的项目不再包含源

> ID：10012767
> 
> 赞同：1
> 
> 时间：2012-04-04T14:05:50.327
> 
> 标签：facebook, web-services, facebook-graph-api

我们在我们的应用程序中使用来自 facebook 的照片，直到今天我们注意到不再有可用于不同尺寸图像的源字段。

我在[facebook 文档](http://developers.facebook.com/docs/reference/api/photo/)中看到图像数组中的每个项目都应该有一个字段“源”。

> 图片 | 照片的 4 种不同存储表示 | 需要 access_token | 对象数组，包含高度、宽度和源字段

这是我从 facebook 获得的 json 数据：

```
{
     "id": "10150916781197589",
     "from": {
        "name": "Thomas Dekiere",
        "id": "641457588"
     },
     "name": "antwerpen",
     "picture": "http://photos-b.ak.fbcdn.net/hphotos-ak-snc7/383569_10150916781197589_641457588_12988491_2098011643_s.jpg",
     "source": "http://a2.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s720x720/383569_10150916781197589_641457588_12988491_2098011643_n.jpg",
     "height": 720,
     "width": 478,
     "images": [
        {
           "width": 1360,
           "height": 2048
        },
        {
           "width": 637,
           "height": 960
        },
        {
           "width": 478,
           "height": 720
        },
        {
           "width": 318,
           "height": 480
        },
        {
           "width": 212,
           "height": 320
        },
        {
           "width": 180,
           "height": 271
        },
        {
           "width": 86,
           "height": 130
        },
        {
           "width": 86,
           "height": 130
        }
     ],
     "link": "http://www.facebook.com/photo.php?fbid=10150916781197589&set=a.10150916780582589.528576.641457588&type=1",
     "icon": "http://static.ak.fbcdn.net/rsrc.php/v1/yz/r/StEh3RhPvjk.gif",
     "created_time": "2012-04-04T13:42:09+0000",
     "position": 1,
     "updated_time": "2012-04-04T13:42:19+0000"
  } 
```

如您所见，图像数组项中没有源字段。

这是现在的正常行为吗？文档是否过时了，或者这是一个 facebook 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:20:00.480

facebook 服务中存在一个错误：

[http://developers.facebook.com/bugs/328741343854109](http://developers.facebook.com/bugs/328741343854109)

已经解决了：）

# php - 为什么我的路由在 CodeIgniter 中不起作用？

> ID：10012774
> 
> 赞同：0
> 
> 时间：2012-04-04T14:06:04.887
> 
> 标签：php, codeigniter

我已经阅读了一堆关于这个主题的 stackoverflow 文章，例如：

[CodeIgniter：对 SEO 友好的 URL](https://stackoverflow.com/questions/4362460/codeigniter-seo-friendly-urls)

[Codeigniter 路由有时不起作用](https://stackoverflow.com/questions/8450614/codeigniter-routes-not-working-sometimes)

我发誓我已经正确设置了所有内容，但是在我输入路由并保存我的应用程序并尝试转到新 URL 甚至旧 URL 之后，它们都给了我 404 错误。

我有一个当前看起来像这样的扩展：

**搜索/map_view/县**

我想看起来像这样：

**地图/县**

我在 routes.php 文件中编写了以下重新路由，这给了我 404 错误：

```
$route['search/map_view/(:any)'] = 'map/$1'; 
```

以防万一我倒着做，我也这样尝试过：

```
$route['map/(:any)'] = 'search/map_view/$1'; 
```

那没有做任何事情，所以我推断我做错了。值得注意的是，我确实让 apache 的 mod_rewrite 更改了我的 url 以从中删除 index.php。不知道这有什么帮助，但我在其他帖子中注意到了很多。

我应该为此改变其他地方吗？我假设如果我输入以前的地址，我应该会自动重新路由到新地址？或者如果我输入新地址，它应该会自动工作？不知道，真的很烦。。。

无论如何，我对这些东西有很多问题，但我要从这里开始，然后看看我修复这个问题后是否能在这里找到其余的答案。

***编辑***- 我被要求提供更多信息。这里是。

这是 .htaccess 内容

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

目前我没有在 routes.php 文件中定义任何自定义路由，只是因为我无法让它正常工作。

当前控制器是“Search”，方法“map_view”被传递一个变量“county”。所以网址是

```
http://www.base_url.com/search/map_view/county 
```

我想将其更改为

```
http://www.base_url.com/map/county 
```

我之前写的所有其他内容仍然适用。再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:29:23.873

您希望您的网址看起来像**map/country**。

在你的`routes.php`

```
$route['map/(:any)'] = 'search/map_view/$1';
$route['map'] = 'search/map_view'; 
```

并确保您的控制器名称是`Search.php`.Also 类名称是`Search`扩展`CI_Controller`和方法名称`map_view()` *（必须是公共函数）*

查看[**CI 控制器指南**](http://codeigniter.com/user_guide/general/controllers.html)以获取详细信息

# php - Symfony2 Doctrine MongoDB 回滚

> ID：10012779
> 
> 赞同：5
> 
> 时间：2012-04-04T14:06:13.743
> 
> 标签：php, mongodb, symfony, tdd, doctrine-orm

我正在尝试使用 Symfony2、Doctrine 和 MongoDB 构建一组安全的测试。

我需要做的是在测试开始时加载很多夹具，并在测试结束后卸载它们。我想用一个**事务**来做，但是......我找不到关于如何用 Doctrine 和 Mongo 做的文档！

我在 Doctrine 文档中找到了关于如何与 ORM 进行交易的[很好的文档，但没有关于 ODM。](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/transactions-and-concurrency.html#approach-2-explicitly)

所以我也看了一下Doctrine-Mongo 使用[的类的源代码，`Connection.php`](https://github.com/doctrine/mongodb/blob/master/lib/Doctrine/MongoDB/Connection.php)我没有找到[dbal 版本](https://github.com/doctrine/dbal/blob/master/lib/Doctrine/DBAL/Connection.php)使用的`beginTransaction`,`commit`和`rollback`方法。

我一无所知，然后我问自己“是否有可能在 MongoDB 中回滚？”，如果在[MongoDB FAQ](http://www.mongodb.org/display/DOCS/Developer+FAQ#DeveloperFAQ-HowdoIdotransactions/locking?)中找到答案是：

> MongoDB 不使用具有回滚功能的传统锁定或复杂事务

`beginTransaction`:( 所以我想这就是为什么ODM中没有或没有任何东西......

但我的问题仍然存在：**我怎样才能为我的测试实现某种回滚？**

我现在唯一的想法是手动获取我加载的文档的所有 id，然后在`tearDown()`. 但是，嗯……这有点糟糕，不是吗？

其他想法？？

**编辑：** 在我对这个问题的第一次评论之后，关于我希望在测试和开发中拥有相同的数据库这一事实，我想：***为什么不使用单独的测试数据库，当测试开始时，开发数据库会被复制，可以轻松放弃吗？***

这会是一个更好的主意吗？它实际上对我来说看起来更容易，更安全。你们有什么感想？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:30:46.237

> 我没有使用两个单独的数据库进行开发和测试

这是首先要解决的问题 - 因为没有测试数据库，运行测试会影响您的开发数据库*，​​反之亦然*，这是一个糟糕的主意。您应该能够绝对自信地在生产环境中运行测试，您在测试中所做的任何事情都不会影响您部署的站点。

**设置测试连接**

因此，修改您的 parameters.yml 以具有如下内容：

```
database.host: localhost
database.port: 27017
database.db:   myappname

database.test.host: localhost
database.test.port: 27017
database.test.db:   myappname-test 
```

此外，在您的 app/config/config_test.yml 文件中覆盖默认连接，以便您在请求默认文档管理器的测试中触发的任何内容都将收到指向您的测试数据库的管理器：

```
doctrine_mongodb:
    document_managers:
        default:
            database: %database.test.db% 
```

**准备使用夹具进行测试**

然后，您想要有效地做的是：

*   截断相关集合
*   负载夹具

在每次测试之前在您的测试数据库上。

这是一个示例抽象测试类：

```
<?php

use Doctrine\Common\DataFixtures\Executor\MongoDBExecutor as Executor,
    Doctrine\Common\DataFixtures\Purger\MongoDBPurger as Purger,
    Doctrine\Common\DataFixtures\Loader,
    Doctrine\Common\DataFixtures\ReferenceRepository,
    Symfony\Bundle\FrameworkBundle\Test\WebTestCase,
    Symfony\Bundle\FrameworkBundle\Console\Application;

abstract class AbstractTest extends WebTestCase
{
    /**
     * Array of fixtures to load.
     */
    protected $fixtures = array();

    /**
     * Setup test environment
     */
    public function setUp()
    {
        $kernel = static::createKernel(array('environment' => 'test', 'debug' => false));
        $kernel->boot();
        $this->container = $kernel->getContainer();
        $this->dm = $this->container->get('doctrine.odm.mongodb.document_manager');

        if ($this->fixtures) {
            $this->loadFixtures($this->fixtures, false);
        }
    }

    /**
     * Load fixtures
     *
     * @param array   $fixtures names of _fixtures to load
     * @param boolean $append   append data, or replace?
     */
    protected function loadFixtures($fixtures = array(), $append = true)
    {
        $defaultFixtures = false;

        $loader = new Loader();
        $refRepo = new ReferenceRepository($this->dm);

        foreach ((array) $fixtures as $name) {
            $fixture = new $name();
            $fixture->setReferenceRepository($refRepo);
            $loader->addFixture($fixture);
        }

        $purger = new Purger();
        $executor = new Executor($this->dm, $purger);
        $executor->execute($loader->getFixtures(), $append);
    }
} 
```

**在测试中使用固定装置**

使用前面的抽象测试类，您可以编写使用您的夹具数据的测试 - 或不使用 - 视情况而定。下面是一个简单的例子。

```
<?php

use Your\AbstractTest,
    Your\Document\Foo;

class RandomTest extends AbstractTest
{
    /**
     * fixtures to load before each test
     */
    protected $fixtures = array(
        'APP\FooBundle\DataFixtures\MongoDB\TestFoos',
        'APP\FooBundle\DataFixtures\MongoDB\TestBars'
    );

    ...

    /**
     * Check it gets an ID (insert succeeded)
     * 
     */
    public function testCreateDefaults()
    {
        $foo = new Foo();
        $this->dm->persist($foo);
        $this->dm->flush();

        $this->assertNotNull($foo->getId());
        $this->assertSame('default value', $foo->getSomeProperty());
        // etc.
    }

    /**
     * Check result of something with a given input
     * 
     */
    public function testSomething()
    {
        $foo = $this->dm->getRepository(APPFooBundle:Foo)->findByName('Some fixture object');

        $foo->doSomething();
        $this->assertSame('modified value', $foo->getSomeProperty());
        // etc.
    } 
```

在每次测试之前，您定义的固定装置将被加载（截断它们影响的集合），提供一致的数据库状态作为测试的基础。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:15:29.870

只需在每次测试之前删除您的 MongoDB 数据库，然后加载您需要的固定装置。这样，每个测试都将完全隔离。

# ajax - 使用 \ 格式化 JSON 响应

> ID：10012780
> 
> 赞同：3
> 
> 时间：2012-04-04T14:06:19.580
> 
> 标签：ajax, json, coldfusion, jquery-autocomplete

我正在尝试这样格式化 json 响应：

```
[
{
    "id": "23029",
    "label": "F:\path\to\file\filename.txt",
    "value": "filename.txt"
},
{
    "id": "23030",
    "label": "F:\path\to\file\filename.txt",
    "value": "filename.txt"
},
{
    "id": "23031",
    "label": "F:\path\to\file\filename.txt",
    "value": "filename.txt"
} 
```

]

但根据[JSONLint](http://jsonlint.com/)， \ 正在破坏“结构”？如果我用 | 替换 \ 它有效，所以我知道 \ 是问题所在。我正在使用[jQuery 的 Autocomplete](http://jqueryui.com/demos/autocomplete/#default)中的响应。

我应该改用 SerializeJSON() 吗？如果是这样，我是否需要更改 ajax 自动完成脚本中的某些内容？

```
$(function() {
    var cache = {},
        lastXhr;
    $( "#media" ).autocomplete({
        minLength: 2,
        source: function( request, response ) {
            var term = request.term;
            if ( term in cache ) {
                response( cache[ term ] );
                return;
            }

            lastXhr = $.getJSON( "ajax/search.cfm", request, function( data, status, xhr ) {
                cache[ term ] = data;
                if ( xhr === lastXhr ) {
                    response( data );
                }
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T14:10:21.487

是转义字符，如果它是内容的一部分，`\`则需要自行转义。

因此，`JSON`在客户端接收到它之前，字符串应该是这样的：

```
[
    {
        "id": "23029",
        "label": "F:\\path\\to\\file\\filename.txt",
        "value": "filename.txt"
    },
    {
        "id": "23030",
        "label": "F:\\path\\to\\file\\filename.txt",
        "value": "filename.txt"
    },
    {
        "id": "23031",
        "label": "F:\\path\\to\\file\\filename.txt",
        "value": "filename.txt"
    }
] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T14:11:29.153

你试过逃避反斜杠吗？

```
{
"id": "23030",
"label": "F:\\path\\to\\file\\filename.ext",
"value": "filename.txt"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T19:50:04.843

虽然其他响应者指出您应该转义反斜杠，但如果您*要*使用 serializeJSON() 它会为您处理转义。

# javascript - 将 Cookie 添加到一个简单的函数中

> ID：10012783
> 
> 赞同：0
> 
> 时间：2012-04-04T14:06:44.917
> 
> 标签：javascript

我需要添加 cookie，以便当一个 div 打开（显示）并且用户单击刷新时，它会记住最后一个状态。

我知道这应该很容易，但我对 js 脚本完全是个菜鸟，并且一直在摸索这个脚本。任何帮助将不胜感激。我在这个论坛上看过不同的例子，但它们很复杂而且不清楚。寻找简单代码的简单解决方案。谢谢！

```
<script type="text/JavaScript">
$(document).ready(function(){       
    $('a.row_view').click(function() {
        $('.contentPadd.r_view').css('display', 'block');
        $('.contentPadd.l_view').css('display', 'none')
        $('.contentPadd.t_view').css('display', 'none');
    });
    $('a.list_view').click(function() {
        $('.contentPadd.r_view').css('display', 'none') //horizontal
        $('.contentPadd.l_view').css('display', 'block') //list
        $('.contentPadd.t_view').css('display', 'none') //thumbnails
    });
    $('a.table_view').click(function() {
        $('.contentPadd.r_view').css('display', 'none')
        $('.contentPadd.l_view').css('display', 'none')
        $('.contentPadd.t_view').css('display', 'block')
    });
});                                    
</script>

<a class="row_view">1</a>&nbsp;&nbsp;<a class="list_view">2</a>&nbsp;&nbsp;<a class="table_view">3</a>

<div class="contentPadd r_view">NUMBER 1</div>
<div class="contentPadd t_view">NUMBER 2</div>
<div class="contentPadd l_view">NUMBER 3</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T23:17:22.343

感谢尼克。

1.  创建或将其添加到您的 .js 文件中：

    > //用于列出布局的cookie处理程序//实例化一个新对象，创建一个变量并调用new操作符//例如var myCookie = new Ovenmitts(); // 然后就可以通过 myCookie.bakeCookie() 等访问 Ovenmitts 的方法 var Ovenmitts = function() { var ctx = this; // 创建一个 cookie // 接受 3 个参数：name、value、days // cookie 接受 name/value 的 key/value 对，expires / days // days 是可选的，默认为 session end ctx.bakeCookie = function(name , value, days) { if ( days ) { var date = new Date(); date.setTime(date.getTime() + (天 * 24 * 60 * 60 * 1000)); var expires = "; expires=" + date.toGMTString(); } else { var expires = ""; } return document.cookie = name + "=" + value + expires + "; path=/"; }; // 读取 cookie // 接受 name 参数（cookie 中的第一个值） ctx.admireCookie = function(name) { var nameEQ = name + '='; var ca = document.cookie.split(';'); for ( var i = 0; i < ca.length; i += 1 ) { var c = ca[i]; 而 (c.charAt(0) === ' ' ) { c = c.substring(1, c.length); } if ( c.indexOf(nameEQ) === 0 ) { return c.substring(nameEQ.length, c.length); } } 返回空值；}; }; //cookie处理程序结束。) { c = c.substring(1, c.length); } if ( c.indexOf(nameEQ) === 0 ) { return c.substring(nameEQ.length, c.length); } } 返回空值；}; }; //cookie处理程序结束。) { c = c.substring(1, c.length); } if ( c.indexOf(nameEQ) === 0 ) { return c.substring(nameEQ.length, c.length); } } 返回空值；}; }; //cookie处理程序结束。
    > 
    > $(document).ready(function(){ //产品列表布局div switch
    > $('a.row_view').click(function() { var cookieObj = new Ovenmitts(); cookieObj.bakeCookie('opened', ' a.row_view'); $('.contentPadd.r_view').show(); $('.contentPadd.l_view').hide(); $('.contentPadd.t_view').hide(); }) ;
    > 
    > $('a.list_view').click(function() { var cookieObj = new Ovenmitts(); cookieObj.bakeCookie('opened', 'a.list_view'); $('.contentPadd.r_view').hide( );//水平 $('.contentPadd.l_view').show(); //列表 $('.contentPadd.t_view').hide(); //缩略图 });
    > $('a.table_view').click(function() { var cookieObj = new Ovenmitts(); cookieObj.bakeCookie('opened', 'a.table_view'); $('.contentPadd.r_view').hide( ); $('.contentPadd.l_view').hide(); $('.contentPadd.t_view').show(); }); var cookieObj = new Ovenmitts(); var cookie = cookieObj.admireCookie('opened'); if (cookie === 'a.row_view') { $('.contentPadd.r_view').show(); $('.contentPadd.l_view').hide(); $('.contentPadd.t_view').hide(); } var cookieObj = new Ovenmitts(); var cookie = cookieObj.admireCookie('opened'); if (cookie === 'a.list_view') { $('.contentPadd.r_view').hide();//水平 $('.contentPadd.l_view'). 节目（）; //列表 $('.contentPadd.t_view').hide(); //缩略图 } var cookieObj = new Ovenmitts(); var cookie = cookieObj.admireCookie('opened'); if (cookie === 'a.table_view') { $('.contentPadd.r_view').hide(); $('.contentPadd.l_view').hide(); $('.contentPadd.t_view').show(); } //END 产品列表布局 div 开关

2.  将此添加到我的 test.html 页面。同时添加 js 文件：

> ```
>  <script language="javascript" src="YOURJSFILE.js"></script>
>    <script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js.js"></script>
> 
> <a class="row_view">TEST 1</a>&nbsp;&nbsp;
> <a class="list_view">TEST 2</a>&nbsp;&nbsp;
> <a class="table_view">TEST 3</a> 
> ```

1.  将此添加到我的 test.html 页面

> ```
> <div class="contentPadd r_view">TEST 1</div>
> <div class="contentPadd t_view">TEST 2</div>
> <div class="contentPadd l_view">TEST 3</div> 
> ```

而已。- 添加到 PHP - 添加图像 - 扩展 - 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:19:46.920

我写了一个 cookie 处理程序，你可以在这里找到：http: [//forrst.com/posts/JavaScript_cookie_handler-JE9](http://forrst.com/posts/JavaScript_cookie_handler-JE9)

要使用它，请创建`Ovenmitts`对象的新实例。然后，将两个参数传递给该`bakeCookie`方法：名称和值。在您的`click`函数中，执行以下操作：

```
$('a.row_view').click(function() {
  var cookieObj = new Ovenmitts();
  cookieObj.bakeCookie('opened', 'a.row_view');
  $('.contentPadd.r_view').css('display', 'block');
  $('.contentPadd.l_view').css('display', 'none')
  $('.contentPadd.t_view').css('display', 'none');
}); 
```

然后，在页面加载时，调用该`admireCookie`方法：

```
$(document).ready(function() {
  var cookieObj = new Ovenmitts();
  var cookie = cookieObj.admireCookie('opened');
  if (cookie === 'a.row_view') {
    $('.contentPadd.r_view').css('display', 'block');
    $('.contentPadd.l_view').css('display', 'none')
    $('.contentPadd.t_view').css('display', 'none');
  }
}); 
```

如果您在实施此操作时遇到任何问题，请告诉我。

此外，您可以使用 jQuery和函数来代替`.css('display', 'block')`and 。`.css('display', 'none')``.show()``.hide()`

`bakeCookie`您可以通过调用该方法并传入相同的名称（例如'opened'）来覆盖cookie 。这样，您可以向它传递一个值来记住哪个抽屉是打开的。

# c# - 如何删除字符串的一部分

> ID：10012786
> 
> 赞同：-4
> 
> 时间：2012-04-04T14:06:49.710
> 
> 标签：c#, asp.net, string

我想知道如果我的字符串如何删除一部分。

例如我的字符串将是：

```
 string test = "/blabla/test/ok"; 
```

我怎么能说我想删除 /blabla/ ？

我的字符串将是/test/ok。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:08:48.567

```
test = test.Replace("/blabla/", string.Empty); 
```

或者

```
test = test.Substring("/blabla/".Length - 1); 
```

你真的应该看看这个[`String`](http://msdn.microsoft.com/en-us/library/system.string.aspx)类的文档以及它所拥有的所有不同的方法和属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T14:08:30.970

```
test = test.Replace("/blabla", ""); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T14:08:42.030

去掉前 8 个字符怎么样？

```
test = test.Substring(7); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T14:08:31.487

你可以简单地**[.Replace()](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)**它：

```
test.Replace("/blabla/",""); //Yields /test/ok 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T14:13:28.010

如果你在更一般的情况下要做什么，你需要在这里使用正则表达式：

```
Regex.Replace(@"/blabla/test/ok", @"^//(.*?)//(.*?)//(.*?)$", @"/$2/$3") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T14:13:38.273

这取决于您是否要每次都剪掉相同的文本，或者您要删除的文本是否会有所不同。

如果您知道这是一个特定的文本块，它只会在字符串中出现一次，那么请使用 Curt 的答案 ( `test = test.replace("/blabla", "");`)。

如果是其他的话，我个人会使用 Arcturus 答案的变体来剪掉不需要的字符串段 ( `test = test.Substring(7);`)。

反正那是我的两分钱。

# python - Python查找两个列表的最小值和最大值

> ID：10012788
> 
> 赞同：18
> 
> 时间：2012-04-04T14:07:00.000
> 
> 标签：python, list

我有两个列表，例如：

```
l_one = [2,5,7,9,3]
l_two = [4,6,9,11,4] 
```

...我需要从两个列表的组合中找到最小值和最大值。也就是说，我想生成一个最小值和一个最大值。

我的问题是 - 实现这一目标的最 Pythonic 方式是什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-04T14:08:48.210

可以说，最易读的方式是

```
max(l_one + l_two) 
```

或者

```
min(l_one + l_two) 
```

但是，它会复制列表，因为`l_one + l_two`会创建一个新列表。为避免复制，您可以这样做

```
max(max(l_one), max(l_two))
min(min(l_one), min(l_two)) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-04T14:12:23.960

另一种避免复制列表的方法

```
>>> l_one = [2,5,7,9,3]
>>> l_two = [4,6,9,11,4]
>>> 
>>> from itertools import chain
>>> max(chain(l_one, l_two))
11
>>> min(chain(l_one, l_two))
2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-09T14:04:19.197

（修改感谢 AndreasT 评论。删除了“min（min（））”解决方案）

您甚至可能有一个更智能的解决方案，它适用于不同的 numpy 数组：

```
import numpy as np
i1=np.array(range(5))
i2=np.array(range(4))
i3=np.array(range(-5,5))
np.min(np.concatenate([i1,i2,i3])) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T14:09:10.780

您可以将它们组合起来，然后调用 min 或 max：

```
>>> l_one = [2,5,7,9,3]
>>> l_two = [4,6,9,11,4]
>>> min(l_one + l_two)
2
>>> max(l_one + l_two)
11 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-24T01:12:11.710

如果要从两个列表中选择最大值或最小值。我认为以下方法可行：

```
from numpy import maximum
result = maximum(l_one,l_two) 
```

在比较这两个列表中的每个元素后，它将返回一个最大值。

# php - Paypal URL 无法正常工作

> ID：10012789
> 
> 赞同：0
> 
> 时间：2012-04-04T14:07:15.090
> 
> 标签：php, url, paypal

我正在尝试将用户重定向到 Paypal 以进行付款，但我编写了此代码的常用 html 表单（我需要该表单将数据提交到我的网站，然后我重定向到 Paypal）

```
 ($sandbox) ? $url = "https://www.sandbox.paypal.com/cgi-bin/webscr" : $url = "https://www.paypal.com/cgi-bin/webscr";
    ($sandbox) ? $button = "XXXXX" : $button = "YYYYY";

    $notify_url = urlencode($site_url . "index.php?act=member-pn&mid=" . $ld['member_id']);
    $return_url = urlencode($site_url . "index.php?act=member-ps");
    $cancel_url = urlencode($site_url . "index.php?act=member-pc&mid=" . $ld['member_id']);

    $url .= "/?notify_url=$notify_url&return=$return_url&cancel_return=$cancel_url&cmd=_s-xclick&hosted_button_id=$button";

    header("Location: $url"); 
```

为什么只有取消 URL 有效？返回和通知似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T15:16:58.250

我认为您需要将值作为 POST 请求发送。看起来您正在从代码中执行 GET 请求。

至于 notify_url 和 return_url 我假设这些功能已经在您的 Paypal 帐户中启用。

一个可能的解决方案是，您可以使用 jQuery Validate（例如）捕获表单提交，然后将初始数据发送到您的服务器以注册您的用户，然后一旦完成，您就可以将表单提交到贝宝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:46:46.430

几天前我们做了一些非常相似的东西。我们考虑过 ajax 和 jquery....但现在我们使用 2 种形式，这是最简单的方法。用户在商店结账时点击（1\. 表单）-> 发布到我们的服务器-> 我们保存在数据库中-> 用户点击“使用 paypal 付款”（2\. 表单）-> 重定向到 paypal -> 支付 ->我们的服务器得到确认 -> 我们的服务器向商店发送确认

这种方式呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:56:50.547

所以......我的问题的答案很简单：永远记住，如果您对正在处理的站点进行了 htaccess 身份验证。Paypal 的 IPN 从来没有机会访问我的脚本 :)

而且，是的，您可以对一个简单的按钮而不是 POST 执行 GET 请求。

# iphone - 如何在iOS中通过程序打印时间戳

> ID：10012791
> 
> 赞同：0
> 
> 时间：2012-04-04T14:07:20.330
> 
> 标签：iphone, ios, ipad, datetime, nsdateformatter

我的应用程序中的一些操作需要很长时间才能执行。所以，我打算打印从应用程序执行开始到结束的时间戳，以检查某些操作所花费的时间。有什么办法可以做到这一点，以便我可以连续跟踪所有时间戳......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:12:17.407

您可以只使用 NSLog(@"任何描述您在代码中的位置的合理日志消息") - XCode 中的输出包含它被记录的时间，以毫秒为单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:10:57.147

您可以在要分析的方法的开头定义一个 var：

```
NSTimeInterval start = [NSDate timeIntervalSinceReferenceDate]; 
```

然后在最后打印：

```
NSLog(@"It took %f seconds in method <methodname>",[NSDate timeIntervalSinceReferenceDate] - start); 
```

祝你好运！

# objective-c - 通过 UIWindow 从继承自 NSObject 的类以模态方式在整个应用程序顶部显示 UIWebView？

> ID：10012792
> 
> 赞同：0
> 
> 时间：2012-04-04T14:07:20.407
> 
> 标签：objective-c, ios, view, modal-dialog, uiwindow

我有一门与社交网络相关的课程。在某些时候，它可能想要以模态方式设置 UIWebView。它可能不知道当前哪个视图控制器正在工作。我可以通过 UIWindow 显示 WebView 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:26:20.990

尝试做：

```
[[UIApplication sharedApplication].keyWindow.rootViewController 
  presentModalViewController:yourVC animated:YES] 
```

[UIApplication keyWindow 文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728-CH3-SW32)：

> **关键窗口**
> 
> 应用程序的关键窗口。（只读）
> 
> ```
> @property(nonatomic, readonly) UIWindow *keyWindow 
> ```
> 
> **讨论**
> 
> 此属性将 UIWindow 对象保存在最近发送 makeKeyAndVisible 消息的 windows 数组中。
> 
> **可用性**
> 
> 在 iOS 2.0 及更高版本中可用。

[UIWindow rootViewController 文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/doc/uid/TP40006817-CH3-SW33)：

> **根视图控制器**
> 
> 窗口的根视图控制器。
> 
> ```
> @property(nonatomic, retain) UIViewController *rootViewController 
> ```
> 
> **讨论**
> 
> 根视图控制器提供窗口的内容视图。将视图控制器分配给此属性（以编程方式或使用 Interface Builder）将视图控制器的视图安装为窗口的内容视图。如果窗口具有现有的视图层次结构，则在安装新视图之前删除旧视图。
> 
> 此属性的默认值为 nil。
> 
> **可用性**
> 
> 在 iOS 4.0 及更高版本中可用。

# wcf - 从 WCF 服务返回 IEnumerable<> 导致异常：底层连接已关闭：连接意外关闭

> ID：10012794
> 
> 赞同：0
> 
> 时间：2012-04-04T14:07:24.663
> 
> 标签：wcf, service, ienumerable

当我返回`IEnumerable<ProgramRange>`异常时：

**基础连接已关闭：连接意外关闭。**

ProgramRange 类如下所示：

```
[DataContract]
public partial class ProgramRange
{
    public ProgramRange()
    {
        this.GradeVariants = new HashSet<GradeVariant>();
    }

    [DataMember]
    public int ID { get; set; }
    [DataMember]
    public int Range { get; set; }
    [DataMember]
    public string Description { get; set; }

    [DataMember]
    public virtual ICollection<GradeVariant> GradeVariants { get; set; }
} 
```

该系列仅包含八项，因此我认为这`<dataContractSerializer maxItemsInObjectGraph="2147483647" />`不是经常建议的。

当我从上下文中获取数据时，`.ToList()`它不可能是这样的：

```
 public IEnumerable<ProgramRange> GetAll()
    {
        using (Entities dbContext = new Entities())
        {
            return dbContext.ProgramRanges.ToList();

        }
    } 
```

我尝试在实现中将 ProgramRange 类添加到您的服务的已知类型：

```
 [ServiceBehavior]
 [ServiceKnownType(typeof(ProgramRange))]
 public class ValidationService : IValidationService 
```

我已经尝试返回其他一些东西来测试：（`ProgramRange`有效），`IEnumerable<string>`（有效），`List<ProgramRange>`（无效）

我知道在stackowerflow上有几个关于这个主题的问题，我尝试了很多建议，但我无法让它发挥作用。

**编辑：**

这是 GradeVariant 类：

```
[DataContract]
public partial class GradeVariant
{
    public GradeVariant()
    {
        this.GradeVariantRules = new HashSet<GradeVariantRule>();
    }

    [DataMember]
    public int ID { get; set; }
    [DataMember]
    public int GradeTypeID { get; set; }
    [DataMember]
    public int ProgramRangeID { get; set; }
    [DataMember]
    public Nullable<int> ProgramID { get; set; }
    [DataMember]
    public Nullable<int> ApprenticeID { get; set; }
    [DataMember]
    public Nullable<int> Prefix { get; set; }
    [DataMember]
    public Nullable<bool> IV { get; set; }
    [DataMember]
    public string Description { get; set; }

    [DataMember]
    public virtual GradeType GradeType { get; set; }
    [DataMember]
    public virtual ProgramRange ProgramRange { get; set; }
    [DataMember]
    public virtual ICollection<GradeVariantRule> GradeVariantRules { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:13:35.653

编辑：
您正在使用可为空的对象，这在 wcf 服务中是不允许的。
在这些成员前面添加 [IgnoreDataMember] 或使它们不可为空以解决您的问题。

* * *

您也可以发布课程 GradeVariant 吗？该类中可能存在某些无法解析的元素，导致连接意外关闭。
一些可能性是字典或可为空的项目。
您使用单个 ProgramRange 的测试可能会起作用，因为 GradeVariants 列表为空或为空。

尝试的一个好技巧是检查内部异常的内部异常的内部异常...。
在行尾，它通常会说诸如无法解析字典之类的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:27:15.187

如果是序列化（可能是），请更直接地尝试此操作以查看是否可以找到问题：

```
try
{
    MemoryStream tempWrite = new MemoryStream();
    DataContractSerializer ds = new DataContractSerializer(typeof(ProgramRange));
    ds.WriteObject(myProgramRangeInstance, tempWrite);

    MemoryStream tempRead = new MemoryStream(tempWrite.GetBuffer());
    ProgramRange newInstance = (ProgramRange)ds.ReadObject(tempRead);
}
catch(Exception ex)
{
    Console.WriteLine(ex.ToString());
} 
```

尝试`myProgramRangeInstance`从您的类的有效实例开始。这会告诉你这是否是一个序列化问题，以及究竟是什么原因造成的。

现在，我打赌你正在使用 HashSet，但我真的不知道。上面的异常信息应该提供更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:20:20.697

我找到了我自己的问题的答案，这里是：

问题是 WCF 无法序列化 Entity Framework 在加载引用实体时创建的循环引用。

要解决此问题，只需输入

```
[DataContract(IsReference = true)] 
```

在模型类之上。

这里有详细解释，[http://www.binaryforge-software.com/wpblog/?p=129](http://www.binaryforge-software.com/wpblog/?p=129)

# .net - 证书 - 它们何时安装在证书存储中？

> ID：10012796
> 
> 赞同：5
> 
> 时间：2012-04-04T14:07:31.077
> 
> 标签：.net, windows-server-2008, installation, certificate

我有一个 tcp 服务器，它使用证书进行 ssl/tls 和许可。对于 ssl/tls，证书存储在 pkcs#12 文件中，我假设该文件将作为安装过程的一部分进行安装。

关于 Rhino 许可，作为安装过程的一部分，在证书存储中安装 x.509 证书是否正常？安装程序可以是 VS2010 安装程序，也可能是 Installshied。我没有太多的安装经验，通常我会手动安装证书。

我特别在寻找一般建议，即何时是安装证书的最佳时间。不要过分关注 Rhino 许可方面。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:24:57.423

考虑安装证书的[自定义操作。](http://msdn.microsoft.com/en-us/library/d9k65z2d.aspx)这个问题有一个例子： [Installing a certificate in a .MSI Custom Action doesn't work proper](https://stackoverflow.com/questions/1386303/installing-a-certificate-in-a-msi-custom-action-doesnt-work-properly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T20:08:23.223

我知道这不能被视为完整的答案，但它可能会引导您找到解决方案。如果您仍然要决定构建安装的工具集，[WiX](http://wixtoolset.org)有一个漂亮的[证书](http://wix.sourceforge.net/manual-wix3/iis_xsd_certificate.htm)元素，它可以用一行 XML 解决您的任务。如果 WiX 不是一个选项，您将不得不创建一个自定义操作，如果 InstallShield 没有开箱即用地公开此功能（据我所知，VS 项目没有）。但即使在自定义操作的最坏情况下，您也可以看看它是如何在 WiX 中实现的——它是完全开源的。

# c# - 日期选择器显示不正确

> ID：10012799
> 
> 赞同：0
> 
> 时间：2012-04-04T14:07:38.117
> 
> 标签：c#, jquery, asp.net-mvc, jquery-ui-datepicker

我正在尝试编写一个 MVC.NET 网站，并且我想使用`datepicker`jQuery 中的组件。要使用 jQuery，我在布局页面上使用以下代码：

```
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/jquery-1.7.2.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/jquery.ui.core.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.datepicker.js")" type="text/javascript"></script>

<link href="@Url.Content("~/Content/jquery.ui.all.css")" type="text/css" />
<link href="@Url.Content("~/Content/jquery.ui.datepicker.css")" type="text/css" />
</head> 
```

在我想使用的页面上，我`datepicker`使用以下代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#FromDate").datepicker({ dateFormat: 'dd/mm/yy' });
    });
</script>
...
<div class="editor-field-search">
     <label for="fromDate">From date:</label>
     <input type="text" id="FromDate" name="FromDate" value=""/> 
</div> 
```

但是`datepicker`以一种奇怪的方式显示：

![日期选择器的显示方式](../Images/84dcbf54a986a4f88f49a959b6d9aab7.png)

我已经用谷歌搜索并尝试修复，但没有找到解决问题的方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:02:08.933

这是一个纯粹的 CSS 参考问题。您没有正确引用 CSS。[使用带有 ASP.NET MVC 的 HTML5 和 jQuery UI Datepicker Popup Calendar](http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-1)运行我的示例，并使用这些`F12`工具并与您的代码进行比较，以找出未使用 CSS 的原因。– Rick.Anderson-at-Microsoft.com 注释掉我的 CSS 参考，你会得到同样格式错误的日历。这些`F12`工具非常适合解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:49:33.900

我假设你已经从 jQuery 的[ThemeRoller](http://jqueryui.com/themeroller/)下载了一个主题......可以尝试几件事：

1.  使用下载中包含的 jQuery 和 jQuery UI Javascript 版本以确保其兼容（在下载的 js 目录中）。看起来 jQuery 1.7.1 是 jQuery UI 下载中包含的最新版本，并且您的页面上有 jQuery 1.7.2。
2.  试试 css\custom-theme 目录中的 jQuery UI css 文件 - 它包含所有 jQuery 组件所需的所有 css。还要检查以确保图像被复制到应用程序中的 jQuery css 文件旁边，就像它在自定义主题目录中一样。

[jQuery 入门指南](http://jqueryui.com/docs/Getting_Started)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:13:43.887

如果您在此处复制粘贴源代码，我认为您缺少“>”

```
<label for="fromDate">From date:</label**>**
     <input type="text" id="FromDate" name="FromDate" value=""/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:17:26.003

如果关闭`label`标签，它会起作用吗？

```
<label for="fromDate">From date:</label>
                                       ^ 
```

# mocking - BDD 和模拟框架的哪种组合将与 Team Build 门控签入一起使用？

> ID：10012805
> 
> 赞同：3
> 
> 时间：2012-04-04T14:08:13.250
> 
> 标签：mocking, bdd, tfsbuild, moles, mspec

我正在尝试尽可能无缝地在我的团队中实施 BDD/TDD。Team Build 的 Gated check-in 只支持 MSTest，Microsoft Pex 和 Moles 配合得非常好。对于 BDD，我对 MSpec 印象最深，MSMSpec T4 模板会将这些测试转换为 MSTest，但 MSpec 和 Moles 似乎不能一起工作。（请参阅：[在处理 MSpec 中的匿名方法时是否有设置 [HostType("Moles")] 的解决方法？](https://stackoverflow.com/q/9948119/10229)）

所以：

1.  MSTest 适用于单元测试，可与 Team Build 一起使用，但不适用于 BDD。
2.  其他模拟框架可与 MSpec 和 MSTest 一起使用，但 Moles 正在升级为 Microsoft.Fakes 与 VS 11，并且我认为其他框架无法完成的事情。
3.  我为 MSPec 找到的接近替代品（例如 NSpec）仅生成 NUnit 测试，而不生成 MSTest。

什么样的工具组合可以协同工作？

**更新：** SpecFlow 也不适用于 Moles，因为 TestMethods 在生成的代码中，我看不到修改代码生成器以包含必要的 HostType 属性的方法。接下来尝试 StoryQ。

**更新 2：**事实证明，扩展 SpecFlow 以与 Moles 一起工作并不难，所以我现在就这样做，但我仍然有兴趣听取意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:50:17.150

你试过[MSMSpec](http://www.heartysoft.com/Introducing-MSMSpec)吗？

> MSMSpec 是一个基于 T4 的工具，可以生成 MSTest 代码来扩展您的 MSpec (Machine.Specifications) 测试，以便它们可以在运行 MSTest 的任何东西下运行。

# php - PHP获取上一个链接ID

> ID：10012814
> 
> 赞同：0
> 
> 时间：2012-04-04T14:08:38.760
> 
> 标签：php, mysql, database

我正在使用将数据库表中的所有记录提取到页面中；

```
SELECT * FROM table_name; 
```

该页面显示汽车详细信息的摘要：

![汽车清单](../Images/085324b251d35f3634c1790f90e91e76.png)

现在的想法是创建另一个页面来加载每辆车的全部内容。问题是我不知道该怎么做。我在互联网上搜索过，但没有得到任何结果，而且我是 php 新手。

MYSQL 查询类似于；

```
SELECT * FROM table_name WHERE id = {$clicked-id} 
```

其中 clicked id 是之前点击的汽车。我想我必须为每个以前的汽车标题分配一个 ID。

我很迷茫，有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:12:40.707

阅读[PHP 手册](http://php.net/manual/en/index.php)，非常有帮助。

基本上链接应该是这样的：

```
<a href="/detail.php?id=<?= $car_id ?>"> car info .. </a> 
```

`id`因此，您在参数中传递了单击的 id 。

然后，在您的详细信息页面中，您可以像这样检索它：

```
<?php
  $car_id = $_GET['id'];
  $query = 'SELECT * FROM cars WHERE id = '.intval($car_id);
?> 
```

我在`$_GET`这里使用是因为参数来自 URL。再次，查看[PHP 手册](http://php.net/manual/en/index.php)，它对这些早期的东西非常有帮助。

请注意，我过去常常`intval`避免[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。如果你不知道它是什么意思，你应该研究一下。这里的基本思想是防止用户调用类似的东西`detail.php?id=1;DROP TABLE cars;`，如果不使用`intval`，就会进行查询：

```
SELECT * FROM cars WHERE id = 1;DROP TABLE cars; 
```

这会破坏你的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:13:07.350

您想查看`$_GET`PHP 中的变量。这个“特殊”变量允许您获取在 URL 中传递的参数，

有了这个，您将能够在 URL 中传递参数，如下所示：

```
http://yoursite.com/showcar.php?id=5 
```

然后，您可以获取 指定的`id`值`$_GET['id']`。

在此处查看更多信息：[http ://www.php.net/manual/en/reserved.variables.get.php](http://www.php.net/manual/en/reserved.variables.get.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:17:23.087

好的，这是从列表中的第二辆车呈现的标记：

```
<table cellspacing="0" cellpadding="0" border="0">
    <tbody>
      <tr>
        <td valign="top" rowspan="3" style="padding: 8px 15px 0px 0px;"><img src=
        "car-images/2_main.jpg" class="car-list" /></td>

        <td valign="top" colspan="4">
          <h2>MG ZR</h2>
        </td>
      </tr>

      <tr>
        <td valign="top" colspan="4">3 Door Hatchback, Yellow, Petrol, Manual, Drivers
        airbag, 1 owner from new, Folding rear seats, Sports seats, Trip computer, Front
        electric windows, Alarm.service history,ABS,cd player,power steering,remote
        central locking</td>
      </tr>

      <tr>
        <td valign="bottom">
          <h4 class="car-info">Fuel</h4>Petrol
        </td>

        <td valign="bottom">
          <h4 class="car-info">Miles</h4>85000
        </td>

        <td valign="bottom">
          <h4 class="car-info">Year</h4>2006
        </td>

        <td valign="bottom">
          <h4 class="car-info">Price</h4>&Acirc;&pound;7500
        </td>
      </tr>
    </tbody>
</table> 
```

假设您要单击图像以查看详细信息。您需要在图像周围包裹一个锚标记，例如：

```
...
<a href="deatils.php?carId=2"><img src="car-images/2_main.jpg" class="car-list" /></a>
... 
```

这`carId=2`需要来自生成`<div id="car-list">`标记的任何代码。

然后，您当然需要一个页面来在名为 details.php 的 URL 中接收该详细信息（根据我的示例），并`carId=2`像这样解析`$id = $_GET['carId']`。然后，您可以按照您所说的使用`$id`变量查询数据库。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T14:14:19.000

当你点击一辆车时，PHP 需要知道你点击了哪辆车。例如，概览页面位于`www.example.com/cars`。在每辆车上制作一个指向汽车详细信息页面的链接：`www.example.com/viewcar?id=1`。这是 1 数据库中汽车的 ID。

在`viewcar`页面上，您可以使用`$_GET['id']`. 在查询中使用此值：

```
SELECT * FROM `cars` WHERE id = $_GET['id']; 
```

**注意**注意这个解决方案说明了这个概念，但不应该使用，因为它很容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-04T14:12:58.623

简单的。当您建立到汽车“详细视图”的链接时，添加一个参数，例如：

```
<a href="detailview.php?carid=12">Detail view</a> 
```

现在在 detailView.php 中，您可以使用参数进行 SQL 查询，如下所示

```
<?php
    $query = "SELECT * FROM table_name WHERE id = ".$_GET["carid"];
    ...
?> 
```

# iphone - 我可以使用 xcarchive 将我的应用程序发送给客户以更新他们的 Apple 开发者帐户吗？

> ID：10012823
> 
> 赞同：1
> 
> 时间：2012-04-04T14:08:59.067
> 
> 标签：iphone, xcode, iphone-developer-program

我为客户构建了一个应用程序，他们想使用他们的帐户将该应用程序提交到苹果商店。问题是我没有在其他公司帐户下注册为开发人员（我使用我的个人 Apple 开发人员帐户构建和测试了该应用程序）。您认为向他们发送 xcarchive 是个好主意吗？他们可以使用该存档自行签署代码并在他们的帐户下提交应用程序吗？你有其他想法来解决这个问题吗？

谢谢，

弗朗切斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:30:25.967

我认为如果您在构建过程中签署应用程序，您会遇到的问题。

您可以存档您的构建，然后分发存档。（分发：导出为 Xcode 存档）所以这将是上述的最佳途径。

如果标识符与他们的帐户匹配，客户应该能够导入存档，然后为 Enterprise/AdHoc 部署构建。

只有开发帐户管理员才能真正将该构建推送到商店，并且该构建具有自己的特殊签名密钥和证书。

尝试将项目标记为“不要编码签名”，存档并查看客户端是否至少可以使用您的存档推送临时文件。

客户端还应该有人知道如何构建和推送应用程序。

# android - 在数据库中存储时间

> ID：10012825
> 
> 赞同：0
> 
> 时间：2012-04-04T14:09:04.307
> 
> 标签：android

我想知道哪种是将时间存储到数据库中的最佳方法。将时间以毫秒为单位存储为 LONG 值还是使用 sql DATE 类型更好。

我想将时间存储到 android 设备的 SQLite 数据库中，稍后将其发送到服务器。考虑到性能，这是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:14:49.420

我遇到了这两种方法，并且都是有效的选项。我个人会使用 sql DATE 方法，因为您有许多预定义的方法，可以在 SQLite 中读取/操作/写入日期，如此[处](http://www.sqlite.org/lang_datefunc.html)所述。从 QA 的角度来看，如果您以后愿意运行额外的计算来验证数据的准确性，那么以毫秒为单位存储时间是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:15:03.137

完全取决于你打算用时间做什么。如果您只是要显示它，那么一个`text`字段就很好了。如果您要将它转换为不同的格式，a`long`可能是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:23:20.740

正如其他人所说，这完全取决于你想用它做什么。

考虑到您的情况，我会将其存储为您要发送到的服务器所需的任何格式。

俗话说，有很多方法可以给这只特殊的猫剥皮。例如：在某些情况下，我获取了日期并将其转换为 yyyymmdd 格式的 int，这样我就可以进行简单的小于/大于/等于比较，而无需求助于 SQL 中的不同时间函数.

# batch-file - 找到文件扩展名时删除文件夹和子目录

> ID：10012826
> 
> 赞同：1
> 
> 时间：2012-04-04T14:09:07.477
> 
> 标签：batch-file

我是董事会的新手，所以请放轻松！:)

基本上，我正在编写一个批处理文件来删除其中*没有*具有特定扩展名类型的文件的文件夹。

例如，如果我有以下文件夹

```
C:\MUSIC\FLAC\JAZZ\Jazzysong.ape 
```

我需要一些可以删除文件夹 JAZZ 的代码，因为 .ape 是 FLAC 文件夹的错误文件类型。

任何帮助都是很棒的人，因为我尝试了 的变体`findstr`，`exist`并写入文本文件并尝试使用读取路径`dir /s /b`

我迷路了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T08:31:26.350

# java - 将 android 模拟器连接到主机 LAN 网络

> ID：10012830
> 
> 赞同：2
> 
> 时间：2012-04-04T14:09:17.160
> 
> 标签：java, android, sockets, ioexception

我正在编写一个连接到服务器套接字并获取一些数据的 android 应用程序。服务器与我的主机 PC 位于同一网络中。我可以使用具有 10.0.2.2 ip 地址的 android 模拟器访问在我的主机 PC 中运行的服务器，但我无法访问在其他 PC 中运行的服务器。

谁能告诉我该怎么做？我可以从我的主机 PC 访问服务器。

# jquery - 使用 jQuery 显示/隐藏嵌套的 div

> ID：10012839
> 
> 赞同：0
> 
> 时间：2012-04-04T12:10:53.833
> 
> 标签：jquery, html

例如，如果我单击了一个框并将其保持打开状态，然后单击另一个框，则无法使以下 jquery 工作我可以获取我的代码，以便例如第二个框关闭所有其他打开的框并显示其内容而无需再次单击它吗？

HTML 代码：

```
<div class="button">
    <a class="remove">Remove</a> 
    <a class="time">Time</a>
    <a class="space">Space</a> 
    more links......

    <div class="container">
        <div class="firs-container">
            .......
        </div>

        <div class="sec-container">
            .......
        </div>

        <div class="third-container">
            .......
        <div>
    </div>
</div> 
```

jQuery代码：

```
$(document).ready(function() {
    $('a.remove, a.cancel').click(function(){
        $(this).closest('.button').find('.container:first').children().hide();
        $(this).closest('.button').find('.container:first').fadeToggle('slow', 'linear');
        $(this).closest('.button').find('.sec-container:first').fadeToggle('slow', 'linear');
        // prevent default action
        return false;
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:07:54.953

它应该被移动，但我仍然想给你一个提示（如果你使用的是 jQuery 1.7.x）

```
jQuery( document ).ready( function($)
{
    $( '.selector' ).on( 'click', function()
    {
        // do stuff
    } );
} ); 
```

^(注意 WP/jQuery 无冲突模式并确保您处于正确包装的函数中 » 检查您的控制台是否有错误)

# ios - 自定义 UIViewController viewDidUnload 永远不会被调用

> ID：10012845
> 
> 赞同：0
> 
> 时间：2012-04-04T14:10:09.500
> 
> 标签：ios, cocoa, uiviewcontroller

我有一个自定义 UIViewController 子类，它自己处理所有视图初始化（它不使用 nib）。还有另一个从 nib 加载的 UIViewController 子类。两者都包含在 UITabBarController 中。当内存警告出现时，第一个控制器会收到通知，但不会调用 viewDidUnload。第二个控制器也收到通知，它的 viewDidUnload 确实被调用了。我签入了 didReceiveMemoryWarning，self.isViewLoaded 为 TRUE，self.view.superview 为空。在通知出现时，两个控制器（它们的选项卡）都是不可见的。

由于内存警告，自定义视图控制器是否应该做一些特殊的事情来卸载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:34:00.907

如果您是子类`UIViewContoller`化并且您没有从 NIB 初始化它，则需要对该`-loadView`方法进行子类化。否则 iOS 假定视图不能被卸载/重新加载。

只需将以下内容添加到您的实现中就足够了：

```
- (void)loadView {
    [super loadView];
} 
```

我将尝试为此找到文档报价。

[不幸的是，文档在这个问题上不是很清楚。](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:19:04.470

我会查看有关 View Controller Lifecycle 的文档。具体来说，查看收到内存警告时会发生什么的部分。如果您的自定义视图控制器的视图是屏幕上的视图，则操作系统不会尝试释放此视图。当您收到内存警告时，屏幕上是否显示此视图？在模拟器中，导航到 nib-loaded 视图并模拟内存警告，然后查看您的自定义视图是否被释放。另外，查看是否正在调用 viewWillUnload。并确保在您覆盖的任何这些方法中，您都调用了 super。

# java - 如何使用 maven 构建脚本文件在运行时编译 jrxml 文件？

> ID：10012849
> 
> 赞同：0
> 
> 时间：2012-04-04T14:10:25.527
> 
> 标签：java, maven, ant, jasper-reports

我正在研究显示已由 ireport 编译的报告的项目。我想添加 Maven 功能，以便在构建项目时对其进行编译。

任何人都可以告诉我在构建项目时需要做什么来编译它吗？我必须在 pom.xml 和 build.xml 中添加哪些条目？

谢谢。

# tcl - TCL获取我所在的proc名称

> ID：10012851
> 
> 赞同：15
> 
> 时间：2012-04-04T14:10:36.690
> 
> 标签：tcl, proc

如何知道我所在的 proc 的名称是什么。我的意思是我需要这个：

```
proc nameOfTheProc {} {

    #a lot of code here
    puts "ERROR: You are using 'nameOfTheProc' proc wrongly"
} 
```

所以我想获得“nameOfTheProc”而不是硬编码。这样当有人更改 proc 名称时，它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T14:20:47.980

您可以使用以下`info level`命令解决您的问题：

```
proc nameOfTheProc {} {

    #a lot of code here
    puts "ERROR: You are using '[lindex [info level 0] 0]' proc wrongly"
    puts "INFO:  You specified the arguments: '[lrange [info level [info level]] 1 end]'"
} 
```

使用内部`info level`，您将获得当前所处的过程调用深度级别。外部将返回过程本身的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T15:30:03.617

实现问题所*暗示*的正确惯用方法是这样使用`return -code error $message`：

```
proc nameOfTheProc {} {
    #a lot of code here
    return -code error "Wrong sequence of blorbs passed"
} 
```

这样，您的过程将完全按照普通 Tcl 命令在对它们被调用的内容不满意时的行为方式进行：这将导致调用站点出现错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T14:33:16.010

如果您正在运行的 Tcl 8.5 或更高版本，该`info frame`命令将返回一个字典而不是一个列表。所以修改代码如下：

```
proc nameOfTheProc {} {
   puts "This is [dict get [info frame [info frame]] proc]"
} 
```

# html - html/css 盒子模型结构，居中和东西

> ID：10012852
> 
> 赞同：-1
> 
> 时间：2012-04-04T14:10:42.307
> 
> 标签：html, css, internet-explorer, firefox, google-chrome

与往常一样，我很难解释自己，所以我花时间创建了一个小演示： [http ://dl.dropbox.com/u/25916579/drawing.svg](http://dl.dropbox.com/u/25916579/drawing.svg)

开始似乎很容易，但和往常一样，我在这里不知所措。我想javascript可能是一个解决方案，但我不在乎。

我确实找到了适用于 chrome 和 firefox 的解决方案，但不适用于 IE。

注意：我不关心对旧浏览器的支持。

这是我解决问题的尝试：http: [//jsfiddle.net/fLGUh/](http://jsfiddle.net/fLGUh/)

如前所述，我确实得到了一个使用 chrome 和 firefox 的工作解决方案，但它并不完全完美。

在 IE 中查看此内容时，您会注意到底部的 #fill 没有按预期运行。

如果您知道不涉及 javascript 的面糊方式，请告诉我。

最好的祝福。

编辑：只是为了好玩，我对 javascript 解决方案的外观进行了一些研究，显然它并不像我最初想象的那么容易，所以如果你想搞砸它，你会很受欢迎。

edit2：在这一点上，我认为我不得不接受 javascript 解决方案可能是唯一的出路。实在是太糟糕了。我对javascript很烂...

编辑3：已经提出了一个有效的js解决方案，并指出了我的一个主要缺陷。等我有时间我会回来完成这个。在那之前，谢谢大家和最好的问候。

edit4：这正是我想要的：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(
  function() {
    var wh = $(window).height();
    var m = (wh-540)/2;
    if(wh > 540) {
      $('#content').css('margin-top', m).css('margin-bottom', m);
    }
  }
);
</script>
<style type="text/css">
html, body {
  margin: 0px;
  padding: 0px;
  background-color: black
}
#content {
  width: 960px;
  min-height: 540px;
  background-color: #eeeeee;
  margin-left: auto;
  margin-right: auto;
}
</style>
</head>
<body>
<div id="content">test</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:13:54.370

[http://jsbin.com/afemaz/](http://jsbin.com/afemaz/) - 适用于 Chrome、Firefox、Opera 和 IE>=8。与您的解决方案不同，当窗口很小时，它不会裁剪内容的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T15:22:58.643

仅使用 HTML/CSS 无法以可变高度垂直居中，您需要 JS。

你可以尝试的是：

```
<div id="mydiv" style="width:960px; height:540px; margin:10px auto;">
<script type="text/javascript">
    var d = document.getElementById('mydiv');
    var h = window.innerHeight;
    if(h > 560) //window is smaller: use the minimal settings as defined in style
    {
        d.style.marginTop = (h - 540) / 2;
    }
</script> 
```

`window.innerHeight`存储（我认为跨浏览器存在一些争议）当前实际可用的显示空间。`getElementById`访问 div。它`style.marginTop`（和`marginBottom`）以及`style.height`让您控制这些维度。

注意事项：

*   该脚本需要位于 div 下方，否则脚本将运行但 div 尚不存在（这使其无效）。
*   边距在加载时定义一次。如果您之后调整窗口大小，它将不会调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:06:50.163

行。我查看了您原来的 jsfiddle 并尝试删除填充 div 中的 270px 边距约束，正如您所说的底部填充在 IE 中的行为错误。我明白你的意思，在 IE9 中，你的高度比顶部填充 div 大得多。我删除了这个约束，它开始在 IE9 中正常运行。 [http://jsfiddle.net/fLGUh/3/](http://jsfiddle.net/fLGUh/3/) BTW，它在 IE7 中也一样。

此外，您的 div id="fill" 应该是 class="fill"。

# sql - 如何将此 INSERT INTO 语句转换为 UPDATE SET 语句

> ID：10012857
> 
> 赞同：0
> 
> 时间：2012-04-04T14:10:58.647
> 
> 标签：sql, sql-server-2008, where

我试图将下面的 INSERT INTO 转换为 UPDATE SET 但我遇到了一些麻烦......我正在使用 SQL Server 2008

```
INSERT INTO tableA
(c_id, status)
SELECT  tableB.c_id, COUNT(*)
FROM    tableB
    LEFT JOIN tableC
        ON tableB.c_id = tableC.c_id
  WHERE tableC.c_id != tableC.c_id_update
GROUP BY tableB.bl_id 
```

到目前为止我想出了什么......但是我在关键字'SET'之后的变量c_id和项目的分配方面遇到了麻烦。

```
UPDATE tableA SET
c_id = tableB.c_id
,items -- count(*)??
SELECT  tableB.c_id, COUNT(*)
FROM    tableB
    LEFT JOIN tableC
        ON tableB.c_id = tableC.c_id
  WHERE tableC.c_id != tableC.c_id_update
GROUP BY tableB.bl_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:15:10.863

```
UPDATE A
SET
    A.status = X.c
FROM 
tableA A INNER JOIN (
SELECT  tableB.c_id, COUNT(*) as c
FROM    tableB
    LEFT JOIN tableC
        ON tableB.c_id = tableC.c_id
  WHERE tableC.c_id != tableC.c_id_update
GROUP BY tableB.bl_id ) X
ON A.c_id = X.c_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:26:01.427

我分享了将任何选择转换为更新的秘密，将查询的选择部分嵌入为评论：

```
UPDATE A 
    SET     items = X.c 
--select  Aitems, X.c,* 
FROM  tableA A 
INNER JOIN ( SELECT  tableB.c_id, COUNT(*) as c 
            FROM    tableB    
            LEFT JOIN tableC        
                ON tableB.c_id = tableC.c_id   
            WHERE tableC.c_id != tableC.c_id_update 
            GROUP BY tableB.bl_id ) X 
    ON A.id = X.c_id 
```

我还尝试确保在列表的前面显示我正在更新的字段以及我用于新值的字段（如果选择中有很多字段）。这可以很容易地确定您认为要更新的内容是否实际上是您想要的，但从 select 关键字开始运行查询。

# java - 使用 Spring Security 进行两级身份验证

> ID：10012858
> 
> 赞同：1
> 
> 时间：2012-04-04T14:11:02.607
> 
> 标签：java, spring, spring-security, authorization, spring-social

**背景**

我们的网站允许某人使用他们注册的电子邮件和密码登录。现在我们希望允许用户仅使用他们的 Facebook 身份进行注册（作为替代身份验证方法）。我们计划使用 Spring Social + Spring Security 3.1 来做到这一点

**问题**

无论您使用哪种身份验证提供商，网站中都有一个部分要求您输入密码。电子邮件注册用户不受此影响，但 Facebook 用户受此影响（因为他们没有密码）。他们需要以一种懒惰的方式生成一个（Facebook 用户第一次点击链接时），因为一小部分用户会使用这个功能（我们不希望所有 Facebook 用户在创建密码时都被打扰）登记）。

*那么，你将如何建模呢？*

例如：我们知道可以定义一个名为“REGISTERED_WITH_PASSWORD”的安全角色，并使这些页面仅可用于该角色。是否可以设置 Spring，当登录的“无密码”Facebook 用户尝试进入该页面时，将他重定向到密码创建页面，以便他们可以创建并重试？（而不是将其作为授权异常处理）。

还有其他想法吗？任何优雅的设计都会受到欢迎，无论它是否依赖于 Spring Sec 3.1 的特定内容。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:25:05.753

幼稚的实现思想，也许存在更好的方法：

*   编写自定义过滤器并将其添加到`springSecurityFilterChain`
*   仅对您想要的 URL 启用过滤器（例如手动检查 url）
*   签入用户身份验证类型和“登录/密码已通过”标志并将没有标志的 facebook 用户重定向到登录/密码页面
*   将“登录名/密码传递”标志保存到会话

`SecurityContext`保持不变，所以这种方法似乎对春天没有干扰。

编辑：格式化

# asp.net - 缺少 ASP.NET_SessionId

> ID：10012862
> 
> 赞同：8
> 
> 时间：2012-04-04T14:11:09.427
> 
> 标签：asp.net, iis-7

在我网站上的页面之间切换时，我丢失了 ASP.NET_SessionId。该问题发生在 Chrome/Firefox/Safari 中。它不会发生在 IE 中。这很奇怪......这是我的场景。

我的网站可以通过在浏览器中输入 www.example.org 或 example.org 来访问（*这是您将看到的重要信息*）。

我输入 example.org。从我的主页，我登录到我的站点（注意：我没有使用 ASP.NET 表单身份验证）。我被发送到我的默认用户页面（例如，userpage.aspx）。在此页面上，我单击一个`<a>`将我发送到我网站上不同页面的页面。该`<a>`链接是完全限定的（例如，[http](http://www.example.org/page2.aspx) ://www.example.org/page2.aspx ）。当我被发送到新页面时，我的会话丢失了！

所以，我运行 Fiddler 来尝试发现问题。我发现很有趣。请求标头标记*引用*者在页面之间丢失。

以下是步骤：

1.  转到 example.org。
2.  登录到 example.org。
3.  我被重定向到 userpage.aspx。推荐人是[http://example.org](http://example.org)。已设置 ASP.NET_SessionId。
4.  我点击`<a>`（例如，[http](http://www.example.org/page2.aspx) ://www.example.org/page2.aspx ）。呈现页面后，ASP.NET_SessionId 将丢失。

丢失的 ASP.NET_SessionId 始终丢失是 Chrome/Firefox/Safari。这在 IE 中不会发生。

如果通过将 example.org 替换为 www.example.org 来重复上述步骤，则 ASP.NET_SessionId 不会丢失。它每次都能正常工作。

对这种行为有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T14:17:18.353

将其添加到 <system.web> 元素下的 web.config

```
<httpCookies domain=".mysite.com" />

```

看看行为是否有任何变化。听起来好像子域失败了，尽管我认为 cookie 一开始就基于根域。这应该迫使它这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-12T15:54:12.357

在我的情况下，问题如下：

在我的本地 Visual Studio 环境中，我的开发“web.config”文件意外包含以下内容：

```
<configuration>
    <system.web>
        <httpCookies requireSSL="true" />
    </system.web>
</configuration> 
```

由于开发 IIS Express 在`http://localhost:7561`不是 HTTPS 上运行，因此触发此检查以不设置/接受任何 cookie，包括会话 ID cookie。

解决方案是简单地注释掉该`<httpCookies requireSSL="true" />`行。

* * *

我可以想象的另一个类似的问题是，`Content-Security-Policy`HTML 元标记也可以[控制 cookie 的处理方式](https://www.w3.org/TR/csp-cookies/)，也可以配置为不允许设置会话 ID cookie。

# jquery - jQuery 遍历 .next() .show()

> ID：10012865
> 
> 赞同：0
> 
> 时间：2012-04-04T14:11:12.937
> 
> 标签：jquery

在 jQuery 中遍历时遇到问题..希望是一个简单的问题..但我正在敲我的头。我试过`.closest()`, `.next()`, `.find()`.. 和 nada

HTML：

```
<div class='news_box'>
    <img src='".NEWS.$n[image]."' alt='$n[title] Image' class='news_img' />
    <div class='news_text'>
        <h3>$n[title] // ".date("d.m.Y", strtotime($n[created_on]))." // ".date("H.i", strtotime($n[created_on]))."</h3>
        <p>".substr(strip_tags($n[description]), 0, 90)."... <span title='Read More On $n[title]' class='more'>Read More</span></p>
    </div>
    <p class='clear'></p>
    <div class='full_item'>
        $n[description]
    </div>
</div><!--close news_box--> 
```

查询：

```
$(".news_box span.more").click(function(){
    $(this).next(".full_item").show();
}); 
```

CSS for`.full_item`设置为`display:none` 目的是显示 div: full_item 点击跨度`.more`

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:15:06.640

`.more`在 a 里面`p`，它在里面`.news_text`，并且`.full_item`是它的兄弟。因此，以下应该可以解决问题：

```
$(this).closest('.news_text').siblings('.full_item').show(); 
```

[。兄弟姐妹（）](http://api.jquery.com/siblings/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:15:16.153

span 不是 .full_item 的兄弟。尝试

```
$(this).parent().nextAll(".full_item").show(); 
```

此外，该函数`next` **将不起作用**，因为 .full_item 没有紧跟 p 的父级。改为使用`nextAll`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:28:29.863

我已将解决方案放入 jsfiddle：

[http://jsfiddle.net/55mUj/](http://jsfiddle.net/55mUj/)

```
$(".news_box span.more").click(function(){
    $(this).closest('.news_text').siblings('.full_item').show();
});​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T14:15:07.530

```
$(this).parent().next(".full_item").show(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T14:16:26.240

```
$(".news_box span.more").click(function(){
   $(this).closest(".news_box").next(".full_item").show();
}); 
```

应该管用。

# sql - 用 join 关键字加入或用 = 加入有什么区别

> ID：10012867
> 
> 赞同：0
> 
> 时间：2012-04-04T14:11:22.277
> 
> 标签：sql, sql-server-2008, query-optimization

> **可能重复：**
> [显式与隐式 SQL 连接](https://stackoverflow.com/questions/44917/explicit-vs-implicit-sql-joins)
> [在 MySQL 查询中，为什么使用连接而不是 where？](https://stackoverflow.com/questions/2241991/in-mysql-queries-why-use-join-instead-of-where)

使用 = 运算符查询：-

```
 Select us.FirstName 
       ,uf.FileTitle 
       ,pq.Question
       ,pa.Answer from
 UserMst us,UploadedFile uf,PollQuestion pq,PollAnswer pa,PollResult pr
 where us.UserId = pr.U_id 
       and uf.FileId=pr.A_id 
       and pq.Q_id=pr.Q_id 
       and pa.A_id=pr.ans_id 
```

使用 Join 关键字查询：-

```
 Select us.FirstName,uf.FileTitle ,pq.Question,pa.Answer  from 
  PollResult pr join UserMst us on us.UserId = pr.U_id  
           join UploadedFile uf on uf.FileId = pr.A_id 
           join PollQuestion pq on pq.Q_id= pr.Q_id
           join PollAnswer pa on pa.A_id =pr.ans_id 
```

哪一个在执行上更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:14:33.787

在 SQL 2008 中几乎没有什么区别。（虽然我认为前一种方法可能会被弃用？）

但是，在很多 SQL 实现中，如果每个连接都有一个条件，那么后续连接将连接更少的值，因此会稍微快一些。

如果你把所有条件都放在最后，那么这种优化直到最后才会发生。因此，您最终会得到一大堆被一次性过滤的行列表，理论上这会更慢。

例如：

如果表 A 有 1000 行，而您连接到另一个有 1000 行的表 B，但指定了仅连接到 B 中的 10 行的 int eh 连接条件，则您有 10 行。如果您然后加入表 C，您将只加入 10 行。

如果您将 A 连接到 B 到 C 然后过滤，您将过滤 1000 行（或者可能 1,000,000 行，具体取决于连接）

所以为了交叉实现的兼容性和可读性，最好使用后一个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:15:25.720

我更喜欢连接，我认为养成将连接条件放在 ON 子句中的习惯是最有意义的（除非它是一个外连接并且你确实希望它在 where 子句中），因为它更清楚任何阅读您的查询的人都在什么条件下加入表，并且它还有助于防止 WHERE 子句长达数十行。因为它干净

# c# - 构造函数错误的参数数量

> ID：10012872
> 
> 赞同：0
> 
> 时间：2012-04-04T14:11:32.563
> 
> 标签：c#, constructor, arguments

首先，很抱歉在如此复杂的地方提出如此简单的问题。我正在编写一个一次性应用程序来解析文本文件。这是一个带有典型静态 Main() 的控制台应用程序。

我已经像这样声明了另一个类。由于操作的性质，我省略了 get/set（它将被使用一次......再也不会）。

```
public class Entry
{
    public List<string> numbers;
    public string rm;
    public string time;
    public string desc;

    Entry(List<string> n, string r, string t, string d)
    {
        numbers = n;
        rm = r;
        time = t;
        desc = d;
    }
} 
```

当我尝试使用以下语句实例化 Main() 中的类时：

```
Entry newEntry = new Entry(numbers, rn, time, desc); 
```

我收到 Entry 没有接受 4 个参数的构造函数的错误。传递的所有变量都与构造函数定义类型匹配。我睡眠不足，很困惑。我究竟做错了什么？

谢谢，很抱歉这个愚蠢的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T14:14:32.970

您已将构造函数设为私有。如果您的构造函数不使用访问修饰符，则默认情况下将其设置为私有。将“public”放在构造函数前面，它应该可以工作：

```
public class Entry
{
    public List<string> numbers;
    public string rm;
    public string time;
    public string desc;

    public Entry(List<string> n, string r, string t, string d)
    {
        numbers = n;
        rm = r;
        time = t;
        desc = d;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:13:51.587

尝试制作构造函数`public`：

```
public Entry(List<string> n, string r, string t, string d) 
```

# informix - Informix 4GL 中的类型转换

> ID：10012874
> 
> 赞同：2
> 
> 时间：2012-04-04T14:11:49.053
> 
> 标签：informix, 4gl

我想在 Informix 4GL 中将类型变量转换`VARCHAR`为`INTEGER`和反之亦然（即从`INTEGER`类型转换为）。`VARCHAR`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T23:00:17.390

```
DEFINE v VARCHAR(20)
DEFINE i INTEGER

LET v = "12345"
LET i = v
DISPLAY "i = ", i, "; v = ", v

LET i = 123456
LET v = i
DISPLAY "i = ", i, "; v = ", v 
```

容易吧？

如果字符串无法转换为数字（运行时错误等），您会遇到问题。

本质上，I4GL 会在可能的情况下自动在类型之间转换，只有在不可能的情况下才会产生错误。有些转换是不可能的。例如，我认为您无法将 DECIMAL 或 INTEGER 转换为 INTERVAL YEAR TO MONTH。

# ant - 如何将参数传递给 称呼？

> ID：10012879
> 
> 赞同：3
> 
> 时间：2012-04-04T14:11:54.623
> 
> 标签：ant

我有一个主构建文件，它正在调用不同项目的其他 build.xml 文件。

我的一个构建文件需要一个命令行参数来执行

```
ant -Denv=81 -buildfile build_war.xml 
```

我在 master build.xml 中编写了一项任务来调用 build_war.xml

```
<target name="buildDataExtractor">
  <ant antfile="..\SEFTooling\build_war.xml" inheritall="false" /> 
</target> 
```

如何传递“-Denv=81”参数，以便正确执行 build_war.xml。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T14:20:23.347

尝试将属性传递给[ant 任务](http://ant.apache.org/manual/Tasks/ant.html)：

```
<ant antfile="..\SEFTooling\build_war.xml" inheritall="false">
  <property name="env" value="${env}"/>
</ant> 
```

注意：为了使其正常工作，您需要调用主构建`ant -Denv=81`或在主 build.xml 中设置一个属性，如下所示：

```
<property name="env" value="81"/> 
```

# iphone - 如何通过将一个按钮拖到iphone sdk中的另一个按钮来替换按钮位置

> ID：10012881
> 
> 赞同：2
> 
> 时间：2012-04-04T14:12:10.333
> 
> 标签：iphone, objective-c, ios5, uibutton

我有两个不同框架的两个 UIButtons（button1 和 button2），问题是我想将 button2 拖到 button1 上，以便 button2 重新定位到 button1 位置，并且 button2 应该占据 button1 位置。

伙计，我需要你的帮助和想法，我该怎么做。

谢谢大家，莫尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:40:28.437

您需要在框架中更改按钮的 x 轴并使用动画将其显示为相应的移动（如果需要）。

```
[buttonOutletName setFrame:CGRectMake(old_xCoordinate, yCoordinate, width, height)];

[UIView beginAnimations:nil context:NULL];  
[UIView setAnimationDuration: 1.0];
[buttonOutletName setFrame:CGRectMake(new_xCoordinate, yCoordinate, width, height)];
[UIView commitAnimations]; 
```

如果有帮助请标记:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:25:56.937

```
CGRect rect = btn.frame;
btn.frame = btn2.frame;
btn2.frame = rect; 
```

如果您想对此进行动画处理，请先阅读[此内容](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3adelay%3aoptions%3aanimations%3acompletion%3a)

是你要求的吗？

# cygwin - cygwin权限被拒绝

> ID：10012887
> 
> 赞同：1
> 
> 时间：2012-04-04T14:12:24.100
> 
> 标签：cygwin

我一直在尝试更新**Cygwin 程序**，以便它可以找到我的文件，但是当我运行这个命令 ***'updatedb'***时，我得到了很多来自程序的权限被拒绝响应，例如：

```
/usr/bin/find: `/cygdrive/d/Windows/ServiceProfiles/NetworkService': Permission denied 
```

我该如何解决这个问题，以便我可以使用**CYGWIN 程序找到我的文件。**

Ps-我使用的是windows7 pc。

谢谢

吉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:14:51.333

是否有可能您以管理员身份安装了cygwin，但当前用户没有管理员权限？如果是这样，请尝试以管理员身份运行 cygwin 并这样做`updatebd`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T08:00:18.523

这是一个解决方案... > cd /> > mkdir c > mount c: /c > mkdir d > mount d: /d > ...etc –</p>

# mysql - SQL - 计数不返回零

> ID：10012890
> 
> 赞同：4
> 
> 时间：2012-04-04T14:12:40.387
> 
> 标签：mysql, sql

我正在运行这个查询，它从一个表中选择几个字段并从其他一些表中返回计数。

我的问题：如果我的计数器字段之一计数为零，它不会返回数字 0，它只是空白 - 这是我想尝试解决的问题。

```
SELECT mem.member_id, mem.screen_name, mem.firstname, mem.lastname, mem.country_code, 
mem.joined, rep.rep as reputation, com.cnt as comments FROM members AS mem
LEFT OUTER JOIN (
    SELECT member_id, SUM(awarded_what) as rep
    FROM members_reputation
    GROUP BY member_id) rep
    ON mem.member_id = rep.member_id
LEFT OUTER JOIN (
    SELECT member_id, COUNT(comment_id) as cnt
    FROM blog_comments
    GROUP BY comment_id) com
    ON mem.member_id = com.member_id
GROUP BY mem.member_id
ORDER BY mem.joined DESC 
```

我想要的是这样的：

```
Screen Name      | Comments
-----------------|--------------------
marty76          | 0
jonnyBoy12       | 0
adamApple        | 12 
```

但是，我得到的是这样的东西！

```
Screen Name      | Comments
-----------------|--------------------
marty76          | 
jonnyBoy12       | 
adamApple        | 12 
```

使用我的服务器端语言，这很容易解决，方法是用零替换空值。但我希望零直接来自 SQL，这样我就可以按计数排序。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:16:18.577

试试[**IFNULL**](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_ifnull)函数

```
SELECT mem.member_id, mem.screen_name, mem.firstname, mem.lastname, mem.country_code,  
mem.joined, rep.rep as reputation, IFNULL(com.cnt,0) as comments FROM members AS mem 
LEFT OUTER JOIN ( 
    SELECT member_id, SUM(awarded_what) as rep 
    FROM members_reputation 
    GROUP BY member_id) rep 
    ON mem.member_id = rep.member_id 
LEFT OUTER JOIN ( 
    SELECT member_id, COUNT(comment_id) as cnt 
    FROM blog_comments 
    GROUP BY comment_id) com 
    ON mem.member_id = com.member_id 
GROUP BY mem.member_id 
ORDER BY mem.joined DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:16:37.053

改变：

```
COUNT(comment_id) 
```

到

```
IFNULL(COUNT(comment_id), 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:28:25.077

其他方式可能是：

```
 coalesce(count(comment_id),0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T14:29:08.463

我认为这应该给你你想要得到的结果，它比你的查询简单得多：

```
SELECT mem.member_id, mem.screen_name, mem.firstname, mem.lastname,
  mem.country_code, mem.joined,
  SUM(awarded_what) reputation, COUNT(comment_id) comments
FROM members mem
LEFT JOIN members_reputation rep ON mem.member_id = rep.member_id
LEFT JOIN blog_comments com ON mem.member_id = com.member_id
GROUP BY mem.member_id
ORDER BY mem.joined DESC 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-04T14:16:21.650

你可以使用 ISNULL 吗？

```
ISNULL(com.cnt, 0) as comments 
```

# iphone - 有没有办法替换已经定义的预处理器标识符？

> ID：10012895
> 
> 赞同：0
> 
> 时间：2012-04-04T14:12:46.237
> 
> 标签：iphone, objective-c, c, ios, ipad

我有一个库，其中定义了几个选项：

```
#define shouldShowToolbar YES
#define shouldAlignToLeft YES
etc.. 
```

我正在寻找一种方法来实际替换外部的那些（不修改库，因为未来的更新会破坏它）。是否有可能，或者我注定每次更新时都要更改库源代码（我确实有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:15:45.570

有`#undef`

```
#include "library_header.h"    /* Which defines the macro.  */

#undef shouldShowToolbar       /* You undef it.  */
#define shouldShowToolbar NO   /* If you want, you can redefine it.  */ 
```

[http://gcc.gnu.org/onlinedocs/cpp/Undefining-and-Redefining-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Undefining-and-Redefining-Macros.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:16:12.663

如果您不希望特定宏对一段代码生效并且您也知道该宏名称，则可以使用

```
 #undef shouldShowToolbar 

/* Your code */

 #define shouldShowToolbar 
```

这不会完全取消宏定义，因为您永远不知道代码的哪一部分可能真正需要它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:17:10.353

这些是在编译时硬编码的值。如果你用你的项目编译这个库，那么你应该能够在一个稍后在编译列表中编译的文件中重新定义它们，我认为它有一个特殊的关键字。否则就像说我想在库中替换 YES。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:16:00.507

据我所知，预处理器指令在编译之前执行。所以在那之后，就没有机会改变什么了。

# php-5.3 - PHP 5.3.10：var_dump 不像以前那样打印可读的结果

> ID：10012897
> 
> 赞同：2
> 
> 时间：2012-04-04T14:12:56.440
> 
> 标签：php-5.3, var-dump

在我将我的 localhost **wamp 服务器**升级到 php **5.3.10**后，`var_dump`不会打印出像以前那样可读/漂亮的结果。

```
$obj = (object) array('qualitypoint', 'technologies', 'India');
var_dump($obj);

object(stdClass)#2 (3) { [0]=> string(12) "qualitypoint" [1]=> string(12) "technologies" [2]=> string(5) "India" } 
```

正如你所看到的，现在所有的东西都挤在一条线上。

它曾经在下面打印类似这样的东西，

```
object(stdClass)#1 (3) {
 [0]=> string(12) "qualitypoint"
 [1]=> string(12) "technologies"
 [2]=> string(5) "India"
} 
```

如何使 var_dump 返回可读的格式化结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:57:54.677

```
object(stdClass)#2 (3) { [0]=> string(12) "qualitypoint" [1]=> string(12) "technologies" [2]=> string(5) "India" } 
```

此代码的正常 PHP 输出是：

```
$obj = (object) array('qualitypoint', 'technologies', 'India');
var_dump($obj); 
```

对于更易读的格式，您可能使用[了 PHP 的 Xdebug 扩展](http://xdebug.org/)。检查您的 PHP 扩展目录（Windows 上的 PHP 目录/ext/）。

如果没有这样的文件名：

> php_xdebug-XXX-XX-vcX.dll

[为你下载一个 PHP 版本](http://xdebug.org/download.php)

把它放在扩展目录中添加到 PHP 配置（php.ini 文件）下面的其他 PHP 扩展。

例子：

> zend_extension=PHP_EXTENSIONS_ABSOLUTE_PATH\php_xdebug-2.1.2-5.3-vc9.dll

重新启动 Apache 和 var_dump() 输出将被格式化如下：

```
object(stdClass)[1]
  string 'qualitypoint' (length=12)
  string 'technologies' (length=12)
  string 'India' (length=5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-24T21:23:45.427

尝试：

```
echo '<pre>';
var_dump($obj);
echo '</pre>'; 
```

# sql - SQL Server 根据同一列本身对列进行排序

> ID：10012901
> 
> 赞同：0
> 
> 时间：2012-04-04T14:13:08.920
> 
> 标签：sql, sql-server-2005

我有一个包含一列的 db 表`display_order`。数据如下所示：

```
2 
4 
7 
10 
12 
```

我想更新相同的 db 列，它应该如下所示：

```
1
2
3
4
5 
```

请建议一些简单的 SQL 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:17:15.367

看看[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.90%29.aspx)，这将对您有所帮助。

例如，不会更新您的数据的演示，但会根据 ROW_NUMBER 向您显示当前订单和新订单

```
SELECT display_order AS CurrentDisplayOrder, 
    ROW_NUMBER() OVER (ORDER BY display_order) AS NewDisplayOrder
FROM YourTable
ORDER BY display_order 
```

如果这产生了您所期望的结果，那么您可以将其切换为 UPDATE 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:20:55.220

扩展 AdaTheDev 的想法 - 使用 CTE（通用表表达式）可以很容易地了解如何使用实际`UPDATE`来更新您的表。我在`@work`这里使用表变量来模拟您现有的表 - 只需将我的表变量替换为您自己的表名：

```
DECLARE @work TABLE (display_order INT)

INSERT INTO @work VALUES(2)
INSERT INTO @work VALUES(4)
INSERT INTO @work VALUES(7)
INSERT INTO @work VALUES(10)
INSERT INTO @work VALUES(12)

SELECT * FROM @work

;WITH UpdateTable AS
(
    SELECT 
        display_order, new_order = ROW_NUMBER() OVER (ORDER BY display_order) 
    FROM @work
)
UPDATE @work
SET display_order = u.new_order
FROM @work w 
INNER JOIN UpdateTable u ON w.display_order = u.display_order

SELECT * FROM @work 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:30:34.763

没有 CTE（但需要表中的一些键）

```
declare @tbl table(id int primary key identity(1,1),Value int)
insert @tbl values(2)
insert @tbl values(5)
insert @tbl values(3)

select * from @tbl 

select *, ROW_NUMBER() over(order by Value) from @tbl order by id

update @tbl set Value = result from @tbl tbl 
inner join (select id, ROW_NUMBER() over(order by Value) result from @tbl ) hlp    on tbl.id =hlp.ids

select * from @tbl 
```

# javascript - 如何在 HTML 中显示日期？

> ID：10012910
> 
> 赞同：3
> 
> 时间：2012-04-04T14:13:45.293
> 
> 标签：javascript, jquery, html, date

我希望日期在我的页面上，我使用这个 fn 到使用 Javascript 的日期：

```
 function Return() 
        {
           var d = new Date();
           var n = d.();
           var to ="";

           if (n == 0)
            to = 'Sun';
           else if (n == 1)
            to = 'Mon';
           else if (n == 2)
            to = 'Tues';
           else if (n == 3)
            to = 'Wednes';
           else if (n == 4)
            to = 'Thurs';
           else if (n == 5)
            to = 'Fri'
           else if (n == 6)
            to = 'Satur';
           else
           alert('To is No');

          return to;

} 
```

在页面上我用这条线来调用它，但它不起作用：

```
 <input id="DateAndTime" type="text" value ="Return()"></input> 
```

你知道我可以在页面上显示它吗？如果你知道任何更好（但也很简单）在页面上唱日期的想法，请告诉我。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T14:18:01.567

您可以执行以下操作。

您的 javascript 应如下所示

```
 <script>
       function ReturnDay() 
    {
       var d = new Date();
       var n = d.getDay();
       var today ="";

       if (n == 0)
        today = 'Sunday';
       else if (n == 1)
        today = 'Monday';
       else if (n == 2)
        today = 'Tuesday';
       else if (n == 3)
        today = 'Wednesday';
       else if (n == 4)
        today = 'Thursday';
       else if (n == 5)
        today = 'Friday'
       else if (n == 6)
        today = 'Saturday';
       else
       alert('Today is NoDay');

        document.getElementById("DateAndTime").value = today;
    }
ReturnDay();
    </script> 
```

和你的 html

```
 <input id="DateAndTime" type="text" value ="" /> 
```

链接到 jsfiddle：http: [//jsfiddle.net/mr2rr/](http://jsfiddle.net/mr2rr/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:17:13.913

看看[javascript 日期对象。](http://www.w3schools.com/jsref/jsref_obj_date.asp)

您还可以使用[日期](http://php.net/manual/en/function.date.php)函数使用 PHP

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:17:52.943

你可以调用这个函数，它会为你设置日期。

```
function SetDay() 
{
    var d = new Date();
    var n = d.getDay();
    var today ="";

    if (n == 0)
        today = 'Sunday';
    else if (n == 1)
        today = 'Monday';
    else if (n == 2)
        today = 'Tuesday';
    else if (n == 3)
        today = 'Wednesday';
    else if (n == 4)
        today = 'Thursday';
    else if (n == 5)
        today = 'Friday'
    else if (n == 6)
        today = 'Saturday';
    else
       alert('Today is NoDay');

   // Notice this set the day in your field with the id "DateAndTime"
   document.getElementById("DateAndTime").value = today;

   // Or if you want to set it via jQuery
   // $('#DateAndTime').val(today);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T14:20:28.370

不要依赖客户端代码来生成任何与时间相关的数据。

也就是说，除非您不在乎，否则请务必依赖客户端设备的时间设置为 ;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T14:17:55.393

如果需要，您可以使用此内联代码：

```
<html>
<body>

<script type="text/javascript">

var d=new Date();
document.write(d);

</script>

</body>
</html> 
```

查看 W3 学校，了解几乎所有网络开发需求：[http ://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-04T14:19:11.510

这是替换`if-else`语句的更优雅的方式：

```
function dayOfWeek() {
  var now = new Date();
  var dayNames = new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
  return dayNames[now.getDay()];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-04T14:19:13.067

看起来您想要一个日期输入字段，可能您可以使用现有的东西。

jquery UI 库有一个日期选择器，它可能正是您正在寻找的：

```
$( "#yourinputid" ).datepicker(); 
```

[请参阅此链接到 jquery UI 页面](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-04T14:19:56.940

```
function SetDayOfTheWeek(){
    var d=new Date();
    var weekday=new Array(7);
    weekday[0]="Sunday";
    weekday[1]="Monday";
    weekday[2]="Tuesday";
    weekday[3]="Wednesday";
    weekday[4]="Thursday";
    weekday[5]="Friday";
    weekday[6]="Saturday";

    var today = weekday[d.getDay()];
    document.getElementById("DateAndTime").value = today;
}

SetDayOfTheWeek(); 
```

# php - 将文件从服务器附加到电子邮件中

> ID：10012913
> 
> 赞同：0
> 
> 时间：2012-04-04T14:13:51.760
> 
> 标签：php, email-attachments

谁能给我一些想法如何从服务器附加文件并通过电子邮件将其作为附件发送？我有以下代码：

```
<?php 
// Read POST request params into global vars 
$to      = $_POST['to'];
$from    = $_POST['from'];
$subject = $_POST['subject']; 
$message = $_POST['message'];
// Obtain file upload vars
$fileatt      = $_FILES['fileatt']['tmp_name']; 
$fileatt_type = $_FILES['fileatt']['type'];
$fileatt_name = $_FILES['fileatt']['name'];
$headers = "From: $from";  
if (is_uploaded_file($fileatt)) {
// Read the file to be attached ('rb' = read binary)
$file = fopen($fileatt,'rb'); 
$data = fread($file,filesize($fileatt)); 
fclose($file);
// Generate a boundary string 
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";
// Add the headers for a file attachment  
$headers .= "\nMIME-Version: 1.0\n" .
        "Content-Type: multipart/mixed;\n" . 
        " boundary=\"{$mime_boundary}\""; 
// Add a multipart boundary above the plain message 
 $message = "This is a multi-part message in MIME format.\n\n" . 
"--{$mime_boundary}\n" .
"Content-Type: text/plain; charset=\"iso-8859-1\"\n" . 
"Content-Transfer-Encoding: 7bit\n\n" .   
$message . "\n\n"; 
// Base64 encode the file data 
// Add file attachment to the message 
$message .= "--{$mime_boundary}\n" .
"Content-Type: {$fileatt_type};\n" .
 " name=\"{$fileatt_name}\"\n" . 
//"Content-Disposition: attachment;\n" . 
//" filename=\"{$fileatt_name}\"\n" .
"Content-Transfer-Encoding: base64\n\n" .              
          $data . "\n\n" .  "--{$mime_boundary}--\n"; 
}
// Send the message 
$ok = @mail($to, $subject, $message, $headers); 
if ($ok) { 
echo "<p>Mail sent! Yay PHP!</p>"; 
} else { 
echo "<p>Mail could not be sent. Sorry!</p>"; 
}
?> 
```

但此代码不会从服务器附加文件。请帮帮我..提前谢谢..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:17:49.297

一个问题：您想发送带有附件的电子邮件还是想通过这个问题提高您的 PHP 技能？

如果您只想发送邮件，请查看[PHPMailer](http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php5_6/PHPMailer%20v5.1/)，它非常好且易于处理。对于我自己来说，我多年来一直在使用它，没有任何问题。

为了提高你的技能：你说附件是用 base64 编码的，但我找不到你做类似**$data = base64_encode($data);的那一行。**您将附件的*$data*直接添加到邮件中。

# php - 如何在不使用 RDBMS 的情况下在文本中进行全文搜索？

> ID：10012916
> 
> 赞同：1
> 
> 时间：2012-04-04T14:13:59.140
> 
> 标签：php, full-text-search

我想在具有特定条件但不使用任何 RDBMS 和 SQL 的文本中进行搜索。这是我的例子：

文字是：

> “量子光学在探索量子力学的基础问题以及将量子效应用于信息处理和通信目的方面发挥了重要作用。光子量子系统现在也为量子模拟提供了一个有价值的试验台。本文调查了第一代并讨论了解决物理、化学和生物学中突出问题的前景。”

标准是：

> （光学*或塑料或有机或“体异质结”）和（“物理*”或光伏*）

我喜欢的语言是 PHP

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:47:11.763

还有一个[ht://dig](http://www.htdig.org/)一个用 c 编写的索引器，可以做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T03:47:57.927

鉴于您在 PHP 中执行此操作，您想要的是[Zend_Search_Lucene](http://framework.zend.com/manual/en/zend.search.lucene.html)。它与 PHP 5.2.x（及更高版本）兼容，并且经过了全面的单元测试。它显然不如 Java Lucene 快，但它可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:35:17.067

您可以在 PHP 中将[elasticsearch](http://www.elasticsearch.org/)与[elastica一起使用。](https://github.com/ruflin/Elastica)

# java - PBE：在尝试解密之前验证密码

> ID：10012918
> 
> 赞同：4
> 
> 时间：2012-04-04T14:14:00.447
> 
> 标签：java, passwords, encryption

我正在用 Java 制作应用程序，我希望允许用户使用他们选择的密码来加密文件（或文件夹 - 我会压缩目录）。我目前有以下方法：

```
static Cipher createCipher(int mode, String password) throws Exception {
            PBEKeySpec keySpec = new PBEKeySpec(password.toCharArray());
            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
            SecretKey key = keyFactory.generateSecret(keySpec);
            MessageDigest md = MessageDigest.getInstance("MD5");
            md.update("input".getBytes());
            byte[] digest = md.digest();
            byte[] salt = new byte[8];
            for (int i = 0; i < 8; ++i)
              salt[i] = digest[i];
            PBEParameterSpec paramSpec = new PBEParameterSpec(salt, 20);
            Cipher cipher = Cipher.getInstance("PBEWithMD5AndDES");
            cipher.init(mode, key, paramSpec);
            return cipher;
    }

     static void applyCipher(String inFile, String outFile, Cipher cipher) throws Exception {
            String decryption = "";
            CipherInputStream in = new CipherInputStream(new FileInputStream(inFile), cipher);
            BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(outFile));
            int BUFFER_SIZE = 8;
            byte[] buffer = new byte[BUFFER_SIZE];
            int numRead = 0;
            do {
              numRead = in.read(buffer);
              System.out.println(buffer + ", 0, " + numRead);
              if (numRead > 0){
                out.write(buffer, 0, numRead);
                System.out.println(toHexString(buffer, 0, numRead));
              }
             } while (numRead == 8);
            in.close();
            out.flush();
            out.close();
          }
     private static char[] hex_table = {
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 
            'a', 'b', 'c', 'd', 'e', 'f'};

     public static String toHexString(byte[] data, int offset, int length)
     {
       StringBuffer s = new StringBuffer(length*2);
       int end = offset+length;

       for (int i = offset; i < end; i++)
       {
         int high_nibble = (data[i] & 0xf0) >>> 4;
         int low_nibble = (data[i] & 0x0f);
         s.append(hex_table[high_nibble]);
         s.append(hex_table[low_nibble]);
       }

       return s.toString();
     } 
```

但是，为了使程序更加用户友好，我希望能够在生成文件之前检查用户是否输入了正确的密码。我不想“将钥匙留在门垫下”或完全取消安全性等-我只想防止在用户输入错误密码时生成错误的文件...

任何想法将不胜感激。如果您需要更多详细信息，请随时询问。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:25:26.967

您可以将加密的密码与文件一起保存。当用户输入密码时，您对其进行加密并检查文件中是否存在相同的加密密码。如果没有，则不加载文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T04:07:13.957

使用 PBKDF2WithHmacSHA1 而不是 PBEWithMD5AndDES。后来用户使用了两种不同的过时原语。前者是现行标准。

你有两个选择

1.  快速但不太安全：在加密文件的开头放置一个已知的短值，或者使用相同的密码加密一个完全不同的短文件。解密此文件时，请检查已知值。

    显然，这很快就奏效了。它的安全性稍差一些，因为这意味着试图暴力破解密码的攻击者可以更快地丢弃猜测的密码：他们不必查看整个文件，只需检查该值即可。这并不是一个真正的大问题，因为您的密钥派生函数应该足够难，而且他们仍然必须运行它

2.  存储加密文件的哈希值，并在解密时验证哈希值。更安全的是，攻击者必须解密整个文件并通读它，但出于同样的原因，它很慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T04:42:08.247

我会使用[AEAD](http://en.wikipedia.org/wiki/AEAD_block_cipher_modes_of_operation)模式，例如 CCM 或 EAX。这将在解密文件时检查文件每个块的完整性，如果密钥不正确或文件已被篡改，则会失败。Bouncy Castle 提供程序[支持这两种](http://bouncycastle.org/docs/docs1.5on/org/bouncycastle/crypto/modes/package-summary.html)模式。

# blackberry - 在黑莓中一次读取收件箱中的所有短信

> ID：10012921
> 
> 赞同：0
> 
> 时间：2012-04-04T14:14:05.570
> 
> 标签：blackberry, sms, inbox

我正在开发一个短信应用程序，其中我使用文件夹侦听器来访问收件箱短信。我想一次阅读收件箱中的所有短信。是否可以这样做，因为我所做的是读取传入的短信。当在收件箱文件夹中添加一条短信时，我们可以捕捉到该事件，但在这里我不想从收件箱中读取所有短信。

请向我建议解决方案或一些果味示例代码。提前一吨...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:04:43.273

无法读取已收到的短信。唯一的方法是实现 MessageListener 并拦截传入的短信来处理它们。

# asp.net - 在 F# 中实现异步 http 处理程序的模式？

> ID：10012922
> 
> 赞同：1
> 
> 时间：2012-04-04T14:14:05.980
> 
> 标签：asp.net, f#

有人可以告诉我在 F# 中编写异步 http 处理程序时使用的好模式吗？

我必须实现`IHttpAsyncHandler`并且该接口需要一个`BeginProcessRequest`and `EndProcessRequest`。

我要回来`Async.StartTask`吗？我该如何处理`state:obj`和`AsyncCallback`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:02:13.053

突然想到：使用异步工作流实现处理程序，然后使用 Async.AsBeginEnd 公开它

```
open System
open System.Web

type HttpAsyncHandler() = 

    let processRequestAsync (context : HttpContext) = async {
        // TODO: implement
        return()
        }

    let beginAction, endAction, _ = Async.AsBeginEnd(processRequestAsync)

    interface IHttpAsyncHandler with
        member this.BeginProcessRequest(context, callback, extraData) = beginAction(context, callback, extraData)
        member this.EndProcessRequest(iar) = endAction (iar)
        // other members omitted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T04:22:10.150

你到底想做什么？如果可以，您可能需要[`HttpMessageHandler`](http://msdn.microsoft.com/en-us/library/system.net.http.httpmessagehandler%28v=vs.110%29.aspx)考虑[`System.Net.Http`](http://msdn.microsoft.com/en-us/library/system.net.http%28v=vs.110%29.aspx). 您只需覆盖

```
protected abstract Task<HttpResponseMessage> SendAsync(
    HttpRequestMessage request,
    CancellationToken cancellationToken); 
```

method, which is easy with an `async { ... } |> Async.StartAsTask`. You also get better access to the various attributes of HTTP through static typing. Various subclasses allow you to run either through ASP.NET, WCF (self-host), or even third-part platforms like [OWIN](http://whereslou.com/2012/02/20/gate-adds-owin-support-for-the-new-asp-net-web-api-beta).

# jquery - JQGrid 时间预约...选择多列

> ID：10012924
> 
> 赞同：1
> 
> 时间：2012-04-04T14:14:13.460
> 
> 标签：jquery, jqgrid, calendar, multiple-columns

我想开发一个预订应用程序，我们在其中显示代表时间的列，间隔为 1 小时。是否可以拖动并选择多个列（8:00 - 11:00）进行预订。并且只有某些已经没有预订的列才可以编辑。

JQGrid 是否可以实现此功能？如果没有，您还有其他建议吗？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:25:39.977

即使此功能在技术上是可行的，我也不确定 jqGrid 是否是合适的控件。

[FullCalendar](http://arshaw.com/fullcalendar/)似乎是时间预订系统的更好选择，尽管您必须编写自己的代码来防止重叠事件。他们的网站上有实时示例和 API 文档，可让您评估日历的功能。

# vb.net - 如何下载字节数组？

> ID：10012925
> 
> 赞同：-1
> 
> 时间：2012-04-04T14:14:14.567
> 
> 标签：vb.net, bytearray, download

因此，使用 vb.net，我从服务器检索用户希望下载的文件的字节数据。我总是知道文件名和扩展名是什么，但我不知道如何开始以正确的文件格式下载字节数据。我该怎么做呢？

编辑：澄清一下，我已经在代码中以字节格式检索数据，我只需要将其下载为已知的正确文件类型。我一直隐藏文件的 URL，所以它永远不会暴露。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:19:07.670

如果要将文件直接下载到硬盘驱动器，最简单的解决方案是使用[WebClient.DownloadFile](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)。MSDN 页面包含一个很好的示例。

如果要将文件放入字节数组而不是磁盘上的文件，请改用[WebClient.DownloadData](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)：

```
Dim myWebClient As New WebClient()
Dim myByteArray = myWebClient.DownloadData("http://...") 
```

同样，可以在 MSDN 页面上找到更大的示例。

如果您希望程序在下载时保持响应，请查看这些方法[的异步版本](http://msdn.microsoft.com/en-us/library/ms144190.aspx)。

* * *

编辑：我仍然很难理解您的情况，但是您*已经有一个字节数组*并且只想将*其写入磁盘*，您可以使用[File.WriteAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)：

```
File.WriteAllBytes("C:\my\path\myfile.bin", myByteArray) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:32:59.573

好吧，我想通了。将 BinaryWrite 与 AddHeader 和 ContentType 等其他 Response 函数一起使用，我得到了它的工作。GetMimeType 是我制作的一个函数。下面的代码：

```
Response.Clear()
Response.AddHeader("Content-Disposition", "attachment; filename=" + FileName)
Response.ContentType = GetMimeType(FileName)
Response.BinaryWrite(data)
Response.End()
Response.Flush() 
```

感谢那些试图提供帮助的人！

# asciidoc - 是否有可能拥有模块化的 AsciiDoc 书（由几个文件组成）？

> ID：10012939
> 
> 赞同：18
> 
> 时间：2012-04-04T14:14:53.993
> 
> 标签：asciidoc

考虑到 DocBook 格式的书可以以“模块化”方式完成，我希望我可以使用 AsciiDoc 进行类似的操作，并将章节和第一级部分拆分到单独的文件中。不幸的是，文档没有说明这一点。到目前为止，我看到的唯一可能的解决方案是编写我自己的 AsciiDoc 预处理器，它将合并所有“部分”文件并生成本书。现在有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T11:07:15.057

[asciidoc 备忘单中的两个示例方法： http](http://powerman.name/doc/asciidoc) ://powerman.name/doc/asciidoc

```
include::footer.txt[] 
```

或者

```
[source,perl]
----
include::script.pl[]
---- 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-30T20:12:54.207

我已经设置了一个书籍模板，我在所有书籍中都使用它，你可以在这里找到它：[asciidoc-book-template-with-rake-and-github](https://github.com/edusantana/asciidoc-book-template-with-rake-and-github)

```
= Nome da disciplina
:doctype: book
:lang: pt-BR
:ascii-ids:
:showcomments:
:gitrepo: https://github.com/xxx/yyy
:code_dir: code
:image_dir: imagens

include::capitulos/prefacio.adoc[]

////
= Nome da Parte =
////

include::capitulos/cap1.adoc[]

include::capitulos/feedback.adoc[]

include::capitulos/cap2.adoc[]

include::capitulos/feedback.adoc[]

include::capitulos/cap3.adoc[]

include::capitulos/feedback.adoc[]

// ...

include::capitulos/glossario.adoc[]

include::capitulos/respostas.adoc[]

////
Always end files with a blank line to avoid include problems.
//// 
```

注意 include 指令之间的空行：它们[防止包含文件的第一行和最后一行被邻接](https://github.com/asciidoctor/asciidoctor.org/blob/master/docs/_includes/include-directive.adoc#partitioning-large-documents-and-using-leveloffset)。我不会拆分更多文件的章节，因为当您包含一个文件时，asciidoc 会将包含的文件路径作为新包含的父级，请查看此树：

```
.
|-- capitulos
|   |-- cap1.adoc
|   |-- cap2.adoc
|   |-- cap3.adoc
|   |-- code
|   |   `-- cap1
|   |       |-- helloworld.c
|   |       `-- Makefile
|   |-- feedback.adoc
|   |-- glossario.adoc
|   |-- prefacio.adoc
|   |-- respostas.adoc
|   `-- symbols.adoc
|-- docinfo.xml
|-- livro.asc
`-- wip.adoc 
```

*   当我在文件中时`livro.adoc`，`feedback.adoc`我将使用包含的内容`include::capitulos/feedback.adoc[]`
*   但是，如果我在文件中`cap1.adoc`，您将不得不使用`include::feedback.adoc[]`（因为它们位于同一目录中）。

我认为将所有包含在同一个地方更容易，它对我有用。我只包含使用其他方式的代码。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-27T22:43:56.687

这是另一个例子，以防有人正在寻找如何做到这一点。

```
Book Title Goes Here
====================
Author's Name
v1.1, 2012-11
:doctype: book
:icons:
:max-width: 45em

// Push titles down one level
:leveloffset: 1
include::chapter1.asciidoc[tabsize=4]

include::chapter2.asciidoc[]

include::chapter3.asciidoc[]

include::../../common/appendix/MigrationNotes.asciidoc[]

include::glossary.asciidoc[]

// Return to normal title levels
:leveloffset: 0

Index
===== 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T16:08:19.213

用户指南中介绍了一个选项：[https ://asciidoc.org/userguide.html#X90](https://asciidoc.org/userguide.html#X90)

为了解释用户指南，请创建一个顶级包装文档，该文档使用`include::`宏添加所需的内容和`:leveloffset:`属性以调整标题级别。

另一种选择是编写一个脚本，将`cat`所有部分文件放在一起，然后使用标准输入将结果传递给 asciidoc。这可能看起来像`cat part1.txt part2.txt part3.txt | asciidoc -`. 请注意，通过标准输入提供输入时有时会出现问题。另请注意，每个零件文件的末尾可能需要额外的换行符，以防止`cat`影响格式。

# android - 是否可以在android中从后台跟踪用户交互的记录？

> ID：10012944
> 
> 赞同：-1
> 
> 时间：2012-04-04T14:15:06.403
> 
> 标签：android

我正在开发一个 android 应用程序，该应用程序可用于捕获 android 设备上的用户交互序列。从设备开机时开始。

这将由应用程序完成，根据用户事件生成一个脚本（逗号 ( `,`) 分隔的文本格式），该脚本可用于进一步回放事件记录。应用程序必须具有各种按钮来启动、暂停, 录制的停止按钮，脚本创建也应该根据按下的按钮工作。

是否可以在android中从后台跟踪用户交互的记录？

我对此一无所知。任何帮助或建议都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:39:31.577

您描述的应用程序是 KeyLogger。除非您具有 root 权限，否则您无法执行此操作。如果可以的话，它将代表android中的巨大安全漏洞。它将允许任何应用程序捕获信用卡号、密码、电子邮件地址等......

您唯一的选择是使用 root 权限或编写自定义 android 键盘；但是，这只会让您在使用自定义键盘时记录击键。

一个更好的问题是你想做什么，因为可能有更好的方法来实现你想要的。

# sql-server - 带有顺序树的递归 SQL 查询

> ID：10012961
> 
> 赞同：3
> 
> 时间：2012-04-04T14:15:49.183
> 
> 标签：sql-server, tsql, tree, common-table-expression, recursive-query

我在将查询作为树排序时遇到问题

```
WITH UtHierarchy
AS (
    SELECT etabid
        ,ut
        ,utlib
        ,parenteut
        ,0 AS LEVEL
        ,ut AS root
    FROM RUT
    WHERE etabid = 1
        AND parenteut IS NULL

    UNION ALL

    SELECT RUT.etabid
        ,RUT.ut
        ,RUT.utlib
        ,RUT.parenteut
        ,LEVEL + 1 AS LEVEL
        ,RUT.parenteut AS root
    FROM RUT
    INNER JOIN UtHierarchy uh ON uh.ut = rut.parenteut
    WHERE RUT.ETABID = 1
    )
SELECT *
FROM UtHierarchy
ORDER BY root 
```

我需要有以下树：

```
UT 根
UT 根
-- UT 1级
UT 根
-- UT 1级
-- -- UT 2级
UT 根

```

这在级别 0 或 1 中正常工作，但对于更高级别，它已损坏。我尝试在根列中选择“0级”父级以按根和ut排序，但是在解决这个问题一段时间后，我不能:(

如何解决这个问题？

谢谢你的帮助。

**编辑**：感谢您使用 sql 颜色进行编辑 :) 我已经看到了最顶层的解决方案，但用户已删除他的帖子。

```
WITH UtHierarchy 
AS (
  SELECT etabid
  ,ut
  ,utlib
  ,parenteut,
  0 as profondeur,
  ut as root
  FROM RUT 
  where etabid = 278
  and parenteut is null
  UNION  ALL
  SELECT RUT.etabid
  , RUT.ut
  , RUT.utlib
  , RUT.parenteut
  , profondeur + 1 as profondeur
  , root as root 
  FROM RUT 
  inner join UtHierarchy uh on uh.ut = rut.parenteut
  where RUT.ETABID = 278
)
select ut, parenteut, profondeur, root 
from UtHierarchy
order by root 
```

但它也不起作用

这里有一个真实数据的例子

```
ut parenteutlevel 根
10 1 1 1
11 1 1 1
12 1 1 1
13 1 1 1
14 1 1 1
130 13 2 1
131 13 2 1
132 13 2 1
133 13 2 1
134 13 2 1
135 13 2 1
136 13 2 1
120 12 2 1
121 12 2 1
122 12 2 1
110 11 2 1
111 11 2 1
112 11 2 1
113 11 2 1
114 11 2 1
115 11 2 1
116 11 2 1
101 10 2 1
102 10 2 1
103 10 2 1
104 10 2 1
105 10 2 1
106 10 2 1
107 10 2 1
1 0 1

```

如您所见，这不是良好的结构。我需要一棵树：

```
ut parenteutlevel 根
1 0 1
10 1 1 1
101 10 2 1
102 10 2 1
103 10 2 1
104 10 2 1
105 10 2 1
106 10 2 1
107 10 2 1
11 1 1 1
110 11 2 1
111 11 2 1
112 11 2 1
113 11 2 1
114 11 2 1
115 11 2 1
116 11 2 1
12 1 1 1
120 12 2 1
121 12 2 1
122 12 2 1
13 1 1 1
130 13 2 1
131 13 2 1
132 13 2 1
133 13 2 1
134 13 2 1
135 13 2 1
136 13 2 1
14 1 1 1    

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T15:00:14.580

因为递归调用是正确的，你的问题在于结果的排序

> 按根排序

您可以尝试创建一个排序路径来帮助它们以正确的顺序排列：

```
WITH UtHierarchy
AS (
    SELECT etabid
        ,ut
        ,utlib
        ,parenteut
        ,0 AS LEVEL
        ,ut AS root
        ,RIGHT('000000' + CAST(ut AS varchar(MAX)), 6) AS sort
    FROM RUT
    WHERE etabid = 1
        AND parenteut IS NULL

    UNION ALL

    SELECT RUT.etabid
        ,RUT.ut
        ,RUT.utlib
        ,RUT.parenteut
        ,LEVEL + 1 AS LEVEL
        ,RUT.parenteut AS root
        ,uh.sort+'/'+RIGHT('000000' + CAST(RUT.ut AS varchar(20)), 6) AS sort
    FROM RUT
    INNER JOIN UtHierarchy uh ON uh.ut = rut.parenteut
    WHERE RUT.ETABID = 1
    )
SELECT *
FROM UtHierarchy
ORDER BY sort 
```

**编辑：**

CASE => CAST（拼写错误）

**编辑 2（从您的测试数据中添加一个工作示例）：**

在这里，您有一个复制和粘贴测试代码。对我来说很好：

```
SELECT 10 AS ut, 1 AS parenteut
INTO #RUT
UNION ALL SELECT 11, 1
UNION ALL SELECT 12, 1
UNION ALL SELECT 13, 1
UNION ALL SELECT 14, 1
UNION ALL SELECT 130, 13
UNION ALL SELECT 131, 13
UNION ALL SELECT 132, 13
UNION ALL SELECT 133, 13
UNION ALL SELECT 134, 13
UNION ALL SELECT 135, 13
UNION ALL SELECT 136, 13
UNION ALL SELECT 120, 12
UNION ALL SELECT 121, 12
UNION ALL SELECT 122, 12
UNION ALL SELECT 110, 11
UNION ALL SELECT 111, 11
UNION ALL SELECT 112, 11
UNION ALL SELECT 113, 11
UNION ALL SELECT 114, 11
UNION ALL SELECT 115, 11
UNION ALL SELECT 116, 11
UNION ALL SELECT 101, 10
UNION ALL SELECT 102, 10
UNION ALL SELECT 103, 10
UNION ALL SELECT 104, 10
UNION ALL SELECT 105, 10
UNION ALL SELECT 106, 10
UNION ALL SELECT 107, 10
UNION ALL SELECT 1, 0;

WITH UtHierarchy
AS (
    SELECT
        ut
        ,parenteut
        ,0 AS LEVEL
        ,ut AS root
        ,RIGHT('000000' + CAST(ut AS varchar(MAX)), 6) AS sort
    FROM #RUT
    WHERE
        parenteut = 0

    UNION ALL

    SELECT 
        RUT.ut
        ,RUT.parenteut
        ,LEVEL + 1 AS LEVEL
        ,RUT.parenteut AS root
    ,uh.sort+'/'+RIGHT('000000' + CAST(RUT.ut AS varchar(20)), 6) AS sort
    FROM #RUT AS RUT
    INNER JOIN UtHierarchy uh ON uh.ut = rut.parenteut    
    )
SELECT *
FROM UtHierarchy
ORDER BY sort

DROP TABLE #RUT; 
```

# javascript - 使用书签更改 url

> ID：10012966
> 
> 赞同：4
> 
> 时间：2012-04-04T14:16:03.993
> 
> 标签：javascript, regex, url, bookmarklet

尝试编写一个 javascript 小书签以从前端链接跳转到 CMS 编辑页面链接。

所以采取这样的网址

[http://www.example.com/events/13097/article](http://www.example.com/events/13097/article)

并制作一个这样的网址

[http://www.example.com/admin/edit.php?class=events&id=13097](http://www.example.com/admin/edit.php?class=events&id=13097)

我想我需要使用正则表达式来获取类和 id，然后将其包装到一个 javascript 函数中 - 但我是一个绝对的初学者，想知道是否有人可以让我开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:26:02.377

你*不需要*正则表达式，试试这个：

```
var url = ""+window.location;
var urlparts = url.split('/');
window.location = "http://www.example.com/admin/edit.php?class="+urlparts[3]+"&id="+urlparts[4]; 
```

从 URL 中拆分类和 id 并在重定向中重复它们。第一行将 the 转换`window.location`为您也可以`String(window.location)`用来执行此操作的字符串，但这更冗长。

要获取域，您可以使用：

```
"http://"+urlparts[2]+"/admin/edit.php?class="+urlparts[3]+"&id="+urlparts[4] 
```

**编辑：**实际上，您可以`urlparts`使用或模拟[对象](https://developer.mozilla.org/en-US/docs/Web/API/window.location)中其他感兴趣的项目`window.location.href.split('/')`的原始代码（来自[这篇](https://stackoverflow.com/questions/10012966/change-url-with-bookmarklet/10013173#10013173)文章的示例）`window.location.toString().split('/')`[`window.location`](https://developer.mozilla.org/en-US/docs/Web/API/window.location)

```
hash: "#10013173"
host: "stackoverflow.com"
hostname: "stackoverflow.com"
href: "https://stackoverflow.com/questions/10012966/change-url-with-bookmarklet/10013173#10013173"
origin: "http://stackoverflow.com"
pathname: "/questions/10012966/change-url-with-bookmarklet/10013173"
port: ""
protocol: "http:"
search: "" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:21:45.610

这是在 C# 单元测试中使用的正则表达式的示例。由于您不熟悉正则表达式，因此该模式与您的源 url 相同，除了两个[捕获组](http://www.regular-expressions.info/brackets.html)：一个用于 class `(?<class>[^/]+)`，一个用于 id `(?<id>[^/]+)`。每个的工作原理是它需要一个或多个不是斜杠的字符（加号）`(^/)`并将其存储在尖括号中名称的正则表达式组中。

```
var source = "http://www.domain.com/events/13097/article";
var expected = "http://www.domain.com/admin/edit.php?class=events&id=13097";
var pattern = "http://www.domain.com/(?<class>[^/]+)/(?<id>[^/]+)/article";
var r = new Regex(pattern);
var actual = r.Replace(source, "http://www.domain.com/admin/edit.php?class=${class}&id=${id}");
Assert.AreEqual(expected, actual); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:22:36.340

```
//var str = window.location.href;
var str = "http://www.example.com/events/13097/article";
var re = /events\/(\d+)\//;
var match = str.match(re);
var newURL = "http://www.example.com/admin/edit.php?class=events&id=" + match[1];
alert(newURL); 
```

# caching - membase - memcache 1.7.1.1 - windows - 更改最大项目大小限制

> ID：10012967
> 
> 赞同：0
> 
> 时间：2012-04-04T14:16:04.953
> 
> 标签：caching, memory, memcached, limit

我想知道如何更改缓存在 memcache 1.7.1.1 中的项目的限制。这不是节点或集群的配额大小，而是单个缓存项的限制。根据我的阅读，此限制设置为 1 MB。

我的内容大于每个项目 1 MB 的限制，我想将其增加到更高的值。

我已经阅读了“membase.exe”的配置参数，即“-I”参数。但我似乎找不到它。

我真的不想走上用我自己的限制编码重新编译的道路。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:30:46.437

这实际上只是答案的一半，但是您是否考虑过只使用 membase 存储桶来代替？您将获得 20 MB 的限制，无需更改配置。

# python - 在 Python 中处理大文件的最快方法

> ID：10012968
> 
> 赞同：11
> 
> 时间：2012-04-04T14:16:11.587
> 
> 标签：python, optimization, parallel-processing

我们需要处理的各个目录中有大约 500GB 的图像。每个图像大小约为 4MB，我们有一个 python 脚本来一次处理每个图像（它读取元数据并将其存储在数据库中）。每个目录可能需要 1-4 小时来处理，具体取决于大小。

我们可以在 GNU/Linux 操作系统上使用 2.2Ghz 四核处理器和 16GB RAM。当前脚本仅使用一个处理器。利用其他内核和 RAM 更快地处理图像的最佳方法是什么？启动多个 Python 进程来运行脚本会利用其他内核吗？

另一种选择是使用 Gearman 或 Beanstalk 之类的工具将工作外包给其他机器。我查看了多处理库，但不确定如何使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T14:17:30.107

> 启动多个 Python 进程来运行脚本会利用其他内核吗？

是的，如果任务是 CPU 密集型的，它会的。这可能是最简单的选择。但是，不要为每个文件或每个目录生成一个进程；考虑使用一个工具，比如[`parallel(1)`](http://manpages.ubuntu.com/manpages/natty/man1/parallel.1.html)让它在每个核心产生两个进程。

> 另一种选择是使用 Gearman 或 Beanstalk 之类的工具将工作外包给其他机器。

那可能行得通。另外，看看[ZeroMQ 的 Python 绑定](http://www.zeromq.org/bindings%3apython)，它使分布式处理变得非常容易。

> 我查看了多处理库，但不确定如何使用它。

定义一个函数，例如`process`，读取单个目录中的图像，连接到数据库并存储元数据。让它返回一个指示成功或失败的布尔值。让`directories`成为要处理的目录列表。然后

```
import multiprocessing
pool = multiprocessing.Pool(multiprocessing.cpu_count())
success = all(pool.imap_unordered(process, directories)) 
```

将并行处理所有目录。如果需要，您还可以在文件级别进行并行处理；这需要更多的修补。

请注意，这将在第一次失败时停止；使其容错需要更多的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T14:18:53.160

启动独立的 Python 进程是理想的。进程之间不会有锁争用，操作系统会安排它们同时运行。

您可能想尝试看看理想的实例数是多少 - 它可能多于或少于核心数。磁盘和缓存内存会发生争用，但另一方面，您可能会在另一个进程等待 I/O 时运行一个进程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T14:51:00.917

您可以使用多处理池来创建进程以提高性能。假设您有一个用于处理图像的函数 handle_file。如果您使用迭代，它最多只能使用一个核心的 100%。为了利用多核，池多处理为您创建子进程，并将您的任务分配给它们。这是一个例子：

```
import os
import multiprocessing

def handle_file(path):
    print 'Do something to handle file ...', path

def run_multiprocess():
    tasks = []

    for filename in os.listdir('.'):
        tasks.append(filename)
        print 'Create task', filename

    pool = multiprocessing.Pool(8)
    result = all(list(pool.imap_unordered(handle_file, tasks)))
    print 'Finished, result=', result

def run_one_process():
    for filename in os.listdir('.'):
        handle_file(filename)

if __name__ == '__main__':
    run_one_process
    run_multiprocess() 
```

run_one_process 是处理数据的单核方式，简单但速度慢。另一方面，run_multiprocess 创建 8 个工作进程，并将任务分配给它们。如果你有 8 个核心，它会快 8 倍。我建议您将工作人员数量设置为核心数量的两倍或恰好是核心数量。您可以尝试一下，看看哪种配置更快。

对于高级分布式计算，您可以使用[ZeroMQ](http://www.zeromq.org/bindings:python)作为 larsmans 提到的。一开始很难理解。但是一旦你理解了它，你就可以设计一个非常高效的分布式系统来处理你的数据。在您的情况下，我认为一个具有多个 REP 的 REQ 就足够了。

![在此处输入图像描述](../Images/c9aec907563056ab80b84f94e9cac367.png)

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T14:21:58.590

请参阅此[问题的](https://stackoverflow.com/questions/3055696/how-to-use-all-the-cores-in-windows-7/3055824#3055824)[答案](https://stackoverflow.com/a/3055824/177800)。

> 如果应用程序可以处理输入数据范围，那么您可以启动 4 个具有不同输入数据范围的应用程序实例进行处理，并在它们全部完成后合并结果。

尽管这个问题看起来是特定于 Windows 的，但它适用于所有操作系统上的单线程程序。

**警告：**请注意，此进程将受 I/O 限制，并且对硬盘驱动器的过多并发访问实际上会导致进程作为一个组执行比顺序处理**慢**，因为争用 I/O 资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T15:13:45.897

如果您正在读取大量文件并将元数据保存到数据库中，则您的程序不需要更多内核。

您的进程可能是 IO 限制而不是 CPU 限制。使用带有适当延迟和回调的扭曲可能会胜过任何试图争取 4 个核心的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-22T12:24:31.097

我认为在这种情况下使用[Celery](http://docs.celeryproject.org/en/latest/)非常有意义。

# c++ - 大小为 1 MB 的数组

> ID：10012976
> 
> 赞同：0
> 
> 时间：2012-04-04T14:16:23.477
> 
> 标签：c++, stack-overflow

```
#include<iostream>
#include <intrin.h>
using namespace std;
unsigned __int64 TimeValue=0;

unsigned __int64 rdtsc(void) 
{  
   return __rdtsc(); 
};

void time_start() { TimeValue=rdtsc(); }
long long time_stop() { 
    return (rdtsc()-TimeValue); 
}
int main()
{
    long x[262144],i,k,r;
    int j;
    x[0] = 0;
for (i=1; i<262144; i++)
{
    long r = rand()%i;
    x[i] = x[r];
    x[r] = i;
}
    time_start();
    for (j=0; j<1000; j++)
        for (k=0, i=0; i<262144; i++) 
            k = x[k];
    cout<<time_stop()/1000/262144;
} 
```

在程序中，我需要创建一个大小为 1 兆字节的数组。在线调试程序时`long x [262144]`出现错误：“dgdxgdrfy.exe”中的未处理异常“0x00ff1997”：0xC00000FD：堆栈溢出。为什么会这样以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:19:13.710

尝试将其声明为全局变量 - 在`main`方法（）之外。否则它将被分配到远小于堆的栈上。另一种解决方案是使用 动态分配`new`，但这更容易出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T14:26:08.637

局部变量在堆栈上分配，但堆栈是有限的。您可能可以通过编译器上的开关来增加限制。

问题是您声明的数组非常大。一个简单的修复方法是将其从堆栈上更改为动态分配：

```
std::vector<long> x(262144); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:19:20.060

发生这种情况是因为在堆栈上分配了一个本地数组。您可以通过使用动态数组（使用 new 创建的）、向量或在全局范围内声明数组来避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:57:56.797

您可以使用`static long x[262144]`; 它确实将分配移到堆栈之外，您根本不需要修改代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T14:20:20.837

基本上，您应该动态分配 x 数组，如[本文](http://onlamp.com/pub/a/onlamp/2005/11/23/memory-management-2.html)所示。下面的示例是从文本中提取的，如果您将其更改为适合您的情况，它应该可以正常工作。

```
double *num; 
num = (double *) malloc (BUFSZ* sizeof(double)) 
```

# android - Android：如何避免 Activity 被系统杀死，ActivityManager：处理我的包名（pid 935）已经死亡

> ID：10012978
> 
> 赞同：2
> 
> 时间：2012-04-04T14:16:28.150
> 
> 标签：android, android-activity, android-service, voip, aidl

我有一个基于 VOIP 的应用程序，需要 24/7 运行。但是当我的应用程序在后台时，系统正在杀死我的应用程序。

1）我怎么知道系统何时杀死我的应用程序。？
2）我可以设置一些应用程序参数，以便系统不会杀死我的应用程序。？
3）我知道如何在用户单击应用程序时重新存储应用程序，但是如果系统在下午 3 点杀死我的应用程序，并且如果在下午 3.30 收到的任何数据将永远不会到达我的应用程序，因为它被系统杀死了。
4) 对我的应用程序进行基于服务的设计会有帮助吗？

如何解决这个问题。我想让我的应用程序一直运行并监听来自服务器的数据。

你的意见将我非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:21:48.623

您的应用程序是如何设计的？24*7 进程是否在后台作为服务运行？如果没有，我建议将其设为服务，因为这样一来，Android 只会杀死它，以防手机内存太低（如今很少有可用的内存可用）。如果您可以查找要接收的一些广播（取决于您要执行的操作），您可以设置一个广播接收器，然后在广播接收时调用该服务，否则也终止该服务。这样，即使服务也不会一直运行。所以，这一切都取决于，你的要求是什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:22:59.570

你是在自问自答。是的，您需要创建一个服务而不是一个活动，它不会被操作系统杀死。

# c - openssl 获取证书扩展

> ID：10012981
> 
> 赞同：5
> 
> 时间：2012-04-04T14:16:31.300
> 
> 标签：c, openssl

我正在使用 openssl 解析 X509 证书。我设法获得扩展，但我不知道如何提取扩展值。

我正在使用的代码是：

```
 X509_EXTENSION *extension =  sk_X509_EXTENSION_pop(exts);
  int critical =  X509_EXTENSION_get_critical(extension);

  ASN1_OBJECT *obj = extension-> object;
  ln = OBJ_nid2ln(OBJ_obj2nid(obj));
  if( !ln ) ln = "";
  OBJ_obj2txt(objbuf,sizeof(objbuf),obj,1);
  int nid = OBJ_txt2nid(ln); 
```

这段代码告诉我扩展是否重要，并告诉我扩展的 nid。

我想可以通过以下方式获得价值：

ASN1_OCTET_STRING *data= X509_EXTENSION_get_data(extension);

但我不确定如何处理检索到的`data`对象。数据对象应该是去编码的。关于如何获取扩展数据的任何想法？

编辑：正如[这里](https://stackoverflow.com/questions/7329390/decoding-an-asn-1-der-octet-string-with-openssl/)所建议的，我试图做：

```
ASN1_OCTET_STRING* octet_str = X509_EXTENSION_get_data(extension);
const unsigned char* octet_str_data = octet_str->data;
long xlen;
int tag, xclass;
int ret = ASN1_get_object(&octet_str_data, &xlen, &tag, &xclass, octet_str->length);
printf(@"value: %s\n", octet_str_data); 
```

但我解码后得到的字符串与之前的字符串相同 - 例如：4ÁËƒ◊∫Ns∑äP∂W≠%£A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:30:24.363

这很有趣。我一直在观看[您提供的链接](https://stackoverflow.com/a/7343245/517815)和此处的对话，我同意 Roger Dahl 在他的回答勘误表中的评论：

> 您似乎正在寻找有关如何在 x509v3 扩展中提取信息的通用解决方案。正如这个问题的标题所述，它只是关于解码单个`OCTET STRING`. 除此之外，我只能向您指出@Francois 的原始建议，即使用外部 ASN.1 解析器，例如[SNACC](http://directory.fsf.org/wiki/SNACC) 或[libtasn1](http://www.gnu.org/software/libtasn1/)，并查看 OpenSSL 源代码（围绕 crypto/asn1/asn1_par.c： 135)。

（链接补充我的。）

诀窍是您正在尝试使用一般处理不好的模态扩展模型。[这个答案](https://stackoverflow.com/a/5749035/517815)很好地概述了它是如何工作的。至于答案的其余部分，我同意他的观察，即在文档失败的地方，阅读[源代码](http://opensource.apple.com/source/OpenSSL/OpenSSL-12/openssl/crypto/asn1/asn1_par.c)确实是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T22:36:38.760

如果我处于你的位置，我会认真考虑使用专用 ASN.1 库之一来解码证书。让 OpenSSL 做它擅长的事情，即根据信任链验证您的证书。一旦你知道你有一个好的证书，把它传递给一个 ASN.1 库，让它处理剩下的事情。（SNACC 看起来不错。）请注意，整个证书本身是使用 ASN.1 编码的，因此用于处理 v3 扩展的同一个库可以用于处理整个证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T15:57:16.337

如果你想有一个文本表示，你可以使用内存 BIO。[我已经在这个](https://stackoverflow.com/questions/10011730/how-to-get-the-keyusage-value-from-the-x509-certificate)线程中回答了如何为 Key Usage 扩展解决这个问题，但是每个扩展的方法都是一样的。

问候。

# opengl - 为什么OpenGL使用float而不是double？

> ID：10012985
> 
> 赞同：7
> 
> 时间：2012-04-04T14:16:51.010
> 
> 标签：opengl

我想知道为什么 OpenGL 在其函数中使用 float 而不是 double 。Double 应该比 float 准确得多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T19:26:29.823

In the past, many OpenGL functions did have a `double` variant. [`glMultMatrix`](https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glMultMatrix.xml) for example has `f` and `d` variations. Most of these don't exist anymore, but that has nothing to do with `float` vs. `double`. `glMultMatrixd` *and* `glMultMatrixf` are gone in core GL 3.1 and above.

In [core OpenGL](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts), there are still functions that have `double` variants. `glDepthRange` takes `double`, though there is a `float` version (introduced mainly for GL ES compatibility). There are some functions that *don't* have `double` variants, like `glBlendColor`.

Sometimes, OpenGL is just being inconsistent. Other times, it is simply following a reasonable principle: not lying to the user.

Take [`glBlendColor`](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendColor.xhtml). If you could pass it double-precision values, that would imply that floating-point blending took place with double-precision accuracy. Since it most certainly does not (on any hardware that exists), providing an API that offers that accuracy is a tacit lie to the user. You're taking high-precision values to a low-precision operation. Though the same logic is true of `glDepthRange` (no double-precision depth buffers are not available), yet it takes `doubles`. So again, inconsistency.

The [`glUniform*`](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glUniform.xhtml) suite of functions is a much better example. They set state into the current program object. Until GL 4.0, the `double` versions did not exist. Why? Because that would have been a lie. GLSL pre-4.0 did not allow you to declare a `double`, for the simple and obvious reason that no pre-4.0 hardware *could implement it*. There's no point in allowing the user to create a `double` if the hardware couldn't handle it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:24:31.410

因为大多数时候你不需要精度，而双精度数是两倍。

# c# - 可以覆盖 Windows 7 跳转列表项的“Pin”功能吗？或单行上的多个命令

> ID：10012989
> 
> 赞同：0
> 
> 时间：2012-04-04T14:17:06.390
> 
> 标签：c#, wpf, windows-7, jump-list

我已经开始将 JumpLists 添加到我的程序中，并且知道如何使用我的程序的单个实例“回话”，但我想知道是否可以覆盖 Pin 功能或以其他方式将两个命令添加到一行？

我想要一个“打开位置”（主要点击）或“删除位置”选项，并希望能够覆盖 Pin 图标以充当“删除”。

我知道我可以通过制作两倍的项目并将其中一半作为“删除”和一半作为“打开”来做到这一点，但如果它们可以在一行上，它真的会清理 UI / List。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:18:42.667

我不相信这是可能的。查看[托管](http://msdn.microsoft.com/en-us/library/dd985741.aspx)和[非托管](http://msdn.microsoft.com/en-us/library/dd378460(v=VS.85).aspx#jump_lists)API 很明显，JumpList 是 JumpItem 的集合，而 JumpItem（或者实际上是 JumpTask 或 JumpPath）只能采用带有附加参数的单一路径。要覆盖 JumpItem 单击处理程序，您需要访问 Windows 未公开的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T22:24:31.913

我以前没有使用过 Win7 跳转列表，但是如果用户“取消固定”一个项目，你可以捕捉到一个事件吗？如果是这样，您可以捕获该事件，执行必要的操作，然后将该项目重新添加到跳转列表中......有点解决方法，但它会做您想要的。

否则，只需在单击列表项后更改其文本和功能（如果用户打开位置，则从“打开位置”更改为“删除位置”，反之亦然）。您可以为每个项目保留一个布尔值或其他东西来区分当前状态。

# perl - GTK2 和 Perl 手册

> ID：10012997
> 
> 赞同：0
> 
> 时间：2012-04-04T14:17:23.883
> 
> 标签：perl, manual, gtk2

我是第一次学习 Perl，但我发现很难找到一些关于 GTK2 库的语言文档。我完全了解[Perl Manual](http://perldoc.perl.org/)，但它没有涵盖 GTK2 上的任何内容。那么，我在哪里可以找到带有 GTK2 手册的有据可查的 Perl？例如记录为 PHP。

先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:31:28.187

你看过[Perl GTK2 home](http://gtk2-perl.sourceforge.net/)吗？他们在那里有一些[文档](http://gtk2-perl.sourceforge.net/doc/)。

顺便说一句，有一个命令`perldoc`会显示任何 Perl 模块的内置文档。它还具有任何函数、编译指示等的完整文档。例如：

```
$ perldoc Gtk2          #Help on the Gtk2 module
$ perldoc Data::Dumper  #Help with the Data::Dumper Perl module
$ perldoc -f open       #Help with the built in Perl _open_ command
$ perldoc -q data       #Questions in the FAQ that have the keyword _data_ in them. 
```

当然，[Perldoc 网页](http://perldoc.perl.org)中包含所有标准文档。CPAN 模块将在带有该模块的 CPAN 网页上显示其 Perl 文档。

顺便说一句，你知道`cpan`命令吗？这是您[下载和安装在](http://www.perlhowto.com/installing_cpan_modules)[CPAN 网页](http://search.cpan.org)中找到的模块的方式。所有这些东西都很好，但是有很多假设大多数人都知道这些东西。在我意识到您应该使用该`cpan`命令来安装 Perl 模块之前，我是一名 Perl 程序员已有十多年了。`perldoc`直到几年前我才知道该命令，尽管我已经知道 POD（普通旧文档），这是 Perl 的标准文档方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T05:10:58.420

我找到的最好的文档是 Dirk van der Walt 的 Gtk2-Perl 学习指南，从这里链接。

[http://gtk2-perl.sourceforge.net/doc/](http://gtk2-perl.sourceforge.net/doc/)

[在http://live.gnome.org/GTK2-Perl/GladeXML/Tutorial](http://live.gnome.org/GTK2-Perl/GladeXML/Tutorial)上授予 mclean 有一个非常好的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:00:09.587

第三方模块的文档（至少在理论上）包含在模块本身中，并且可以通过[CPAN](https://metacpan.org/module/Gtk2)[`perldoc Module::Name`](http://perldoc.perl.org/perldoc.html)的各种Web 界面访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:09:42.827

GNOME Live 上的[GladeXML 教程](http://live.gnome.org/GTK2-Perl/GladeXML/Tutorial)可能很有用，它使用 Glade，但对于 Gtk2+Perl 来说是一个好的开始。