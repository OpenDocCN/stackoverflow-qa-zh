# StackOverflow 问答 000351000-000351999

# css - 宽度为 25% 的四个节点不适合彼此相邻？

> ID：351000
> 
> 赞同：2
> 
> 时间：2008-12-08T21:37:49.490
> 
> 标签：css

我有一个头节点，其中有四个子节点。没有边框，填充或边距。四个都有宽度：25%；css 规则。在 Opera 中它工作得很好，在 IE 中，最后一个块有时会根据窗口的宽度翻转到下一行。

我可以通过给一个块设置 24.8% 的宽度来解决这个问题，但 Opera 将其解释为 24%，因此在块的末端留下了 1% 的宽阔间隙。

我该如何解决这个问题？最后一个块错过右边的一个像素是可以的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-08T21:47:34.403

[http://ejohn.org/blog/sub-pixel-problems-in-css/](http://ejohn.org/blog/sub-pixel-problems-in-css/)

不幸的是，这在 CSS 世界中是一个众所周知的问题。可能的问题是这些适合的 100% 像素等效是一个奇数，因此在计算像素时存在舍入误差。

通常我通过使用特定于 IE 的选择器来解决这个问题。Rob 建议使用特定于浏览器的样式表，但我总是发现这种行为很难维护，并且需要从浏览器加载额外的 HTTP。我也讨厌 CSS hack，但您可以在声明适当的宽度（例如 width:25%; #width:24.9%; ）后尝试著名的 #width:24.9%。希望如果 IE 在未来的版本中修复了这个 hack，它也与舍入问题一起出现。

此外，如果您知道父元素的像素宽度，您可以确保它可以被 4 整除。但如果这是一个流畅的布局，那不是一个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-08T21:43:11.930

您可能只想根据浏览器加载不同的样式表。您可以在标头中使用一些 JavaScript 来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-08T21:44:00.743

这取决于使用的舍入算法。如果您有许多像素可以被 4 整除，那么您就不会有问题，因为不存在舍入问题。如果你没有，那么有时你会得到太多的像素，因为宽度被四舍五入了。

```
总宽度：800
25% 宽度：200
四个 25% 的区块：800

```

```
总宽度：799
25% 宽度：199.75
四个并排的块：796 或 800

```

800 宽度对 799 宽度的窗口将下降。

# php - php：推送到可能存在或不存在的数组

> ID：351017
> 
> 赞同：13
> 
> 时间：2008-12-08T21:41:00.670
> 
> 标签：php, arrays, declaration, push

我想创建一个带有消息的数组。

```
$myArray = array('my message'); 
```

但是使用此代码，`myArray`如果它已经存在，它将被覆盖。

如果我使用`array_push`，它必须已经存在。

```
$myArray = array(); // <-- has to be declared first.
array_push($myArray, 'my message'); 
```

否则，它会发霉。

有没有办法让上面的第二个例子工作，而无需先清除`$myArray = array();`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-12-08T21:43:25.067

这里：

```
$myArray[] = 'my message'; 
```

$myArray 必须是数组或未设置。如果它保存的值是一个字符串、整数或不实现数组访问的对象，它将失败。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-08T21:47:06.930

首先检查数组是否存在，如果不存在，则创建它...然后添加元素，知道数组肯定会在手之前定义：

```
if (!isset($myArray)) {
    $myArray = array();
}

array_push($myArray, 'my message'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-08T21:57:12.930

您应该使用 is_array()，而不是 isset。如果从返回数组或字符串的函数设置 myArray（例如，错误时为 -1），则很有用

如果 myArray 在其他地方声明为非数组，这将防止错误。

```
if(is_array($myArray))
{
   array_push($myArray,'my message');
}
else
{
   $myArray = array("my message");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-08T21:48:07.380

```
if ($myArray) {
  array_push($myArray, 'my message');
}
else {
  $myArray = array('my message');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-08T21:48:39.580

OIS 的方法会奏效。

或者

```
if (!isset($myArray)) 
    $myArray=array();
array_push($myArray, 'message'); 
```

# xml - 用于描述 XSD 的 XSD

> ID：351022
> 
> 赞同：3
> 
> 时间：2008-12-08T21:41:41.807
> 
> 标签：xml, xsd

我有一个应用程序，用户可以上传 XSD 来描述某些类型的用户数据。应用程序需要解析此 XSD 以正确初始化数据库元数据的各个位（例如，将 xs:enumerations 转换为将填充下拉列表的允许值列表）。相同的用户输入的 XSD 也用于验证由其他系统发送到应用程序的 XML 文档。

是否可以编写一个主 XSD，我可以根据它来验证这样一个用户提供的 XSD，以便我可以限制用户如何描述他们的数据，从而使 XSD 解析工作更容易？例如，假设我希望能够允许用户上传任何 XSD，除非它包含 xs:union 标签。我如何编写一个 XSD 来验证用户上传的 XSD 以强制执行此规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-08T21:47:24.777

你可以在这里找到它：http: [//www.w3.org/2001/XMLSchema.xsd](http://www.w3.org/2001/XMLSchema.xsd)

只是一个提示，模式以 xsd:schema 标记开头。如果正确，则包含一个属性：

```
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
```

按照 url，您可以找到信息页面，其中包含指向 dtd 和 xsd 的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T21:59:44.953

我认为如果您忽略用户提供的文件是 XSD 文件而只将它们视为 XML，您会发现这个问题要容易得多。毕竟，XSD 文件只是 XML，因此您可以像其他任何文件一样对它们强制执行架构规则。

我将从查看[XMLSchema 的 schema](http://www.w3.org/2001/XMLSchema.xsd)开始。使用它，您可以编写自己的模式，对源文档添加额外的要求，例如强制所有文档都有一个联合。

# c - 如何在 dbx 中的内存位置设置断点？

> ID：351052
> 
> 赞同：2
> 
> 时间：2008-12-08T21:48:45.867
> 
> 标签：c, debugging, memory-leaks, solaris, dbx

一位同事的 C 程序由于某些损坏的内存而以可预测的方式失败。他想`dbx`在分配内存位置后使用它来监视内存位置，以查明导致损坏的代码。

这可能吗？如果是这样，在损坏时产生断点的语法是什么？

如果没有，解决此类问题的好方法是什么？

（我通常的策略是查看源代码管理以查看我最近所做的更改，因为这通常是原因。但是有问题的代码听起来好像它只是靠运气才能工作，所以那是行不通的。还有，由于从未使用过代码，我已经将自己作为罪魁祸首消除了。;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-10T00:22:47.723

经过更深入的研究，最近版本的解决方案似乎`dbx`是这样的：

```
stop access w <address>, <size> 
```

由于`<address>`and`<size>`可以是表达式，您可以编写如下命令：

```
stop access w &p, sizeof(int) 
```

这假设`p`是一个指针，我们要监视它指向的第一个单词。

我还遇到了一个关于跟踪和踩踏内存错误的优秀[教程。](http://www.cs.berkeley.edu/~smcpeak/memory-errors/)它使用`gdb`而不是`dbx`，但原理应该相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-18T22:07:15.937

在 AIX 上，您想使用 stophwp：

```
(dbx) help stophwp

stophwp <address> <size>

        Stop execution when the contents of the specified
        memory region change.  This is a accomplished in
        hardware and may not be available on all models. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-08T22:03:20.110

我不是 Solaris 开发人员，但您可以使用 gdb 和硬件断点来执行此操作

# maven-2 - 将源附加到系统范围的依赖项

> ID：351055
> 
> 赞同：4
> 
> 时间：2008-12-08T21:49:31.840
> 
> 标签：maven-2

我有一个范围为“系统”的依赖项。

我想知道是否有办法为依赖项定义附加的源代码和 javadoc。这似乎是应该得到照顾的事情，但我似乎无法对它的任何文档或它被忽视的原因进行罚款。

我专门寻找配置解决方案，而不是将其安装到我的本地存储库，或将其部署到公共存储库。出于讨论的目的，这些选项不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-30T10:53:35.427

您的意思是使用 m2eclipse 附加源吗？

如果是这样，您只需要确保源 jar 位于同一目录中。我通过将 commons-io-1.4.jar 复制到其他目录并设置系统路径来尝试此操作，如果 commons-io-1.4-sources.jar 在同一目录中，m2eclipse 会找到并附加源。

```
<dependency>
  <groupId>commons-io</groupId>
  <artifactId>commons-io</artifactId>
  <version>1.4</version>
  <scope>system</scope>
  <systemPath>C:\test\lib\commons-io-1.4.jar</systemPath>
</dependency> 
```

源jar是

```
C:\test\lib\commons-io-1.4-sources.jar 
```

我想它对 javadoc 的工作方式相同，但没有尝试过。

# html - 表格中两行之间的空间？

> ID：351058
> 
> 赞同：821
> 
> 时间：2008-12-08T21:49:59.060
> 
> 标签：html, css

这可以通过 CSS 实现吗？

我正在努力

```
tr.classname {
  border-spacing: 5em;
} 
```

无济于事。也许我做错了什么？

* * *

## 回答 #1

> 赞同：552
> 
> 时间：2008-12-10T17:18:55.130

You need to use padding on your `td` elements. Something like this should do the trick. You can, of course, get the same result using a top padding instead of a bottom padding.

In the CSS code below, the greater-than sign means that the padding is only applied to `td` elements that are direct children to `tr` elements with the class `spaceUnder`. This will make it possible to use nested tables. (Cell C and D in the example code.) I'm not too sure about browser support for the direct child selector (think IE 6), but it shouldn't break the code in any modern browsers.

```
/* Apply padding to td elements that are direct children of the tr elements with class spaceUnder. */

tr.spaceUnder>td {
  padding-bottom: 1em;
}
```

```
<table>
  <tbody>
    <tr>
      <td>A</td>
      <td>B</td>
    </tr>
    <tr class="spaceUnder">
      <td>C</td>
      <td>D</td>
    </tr>
    <tr>
      <td>E</td>
      <td>F</td>
    </tr>
  </tbody>
</table>
```

This should render somewhat like this:

```
+---+---+
| A | B |
+---+---+
| C | D |
|   |   |
+---+---+
| E | F |
+---+---+ 
```

* * *

## 回答 #2

> 赞同：446
> 
> 时间：2008-12-08T21:52:43.703

在父表中，尝试设置

```
border-collapse:separate; 
border-spacing:5em; 
```

加上一个边界声明，看看这是否达到了你想要的效果。但请注意，IE 不支持“分隔边界”模型。

* * *

## 回答 #3

> 赞同：207
> 
> 时间：2010-10-20T13:49:47.677

您有带有任何数据的 id 专辑的表...我省略了 trs 和 tds

```
<table id="albums" cellspacing="0">       
</table> 
```

在 CSS 中：

```
table#albums 
{
    border-collapse:separate;
    border-spacing:0 5px;
} 
```

* * *

## 回答 #4

> 赞同：143
> 
> 时间：2010-08-09T02:41:33.753

因为我在桌子后面有一个背景图像，所以用白色填充来伪装它是行不通的。我选择在每行内容之间放置一个空行：

```
<tr class="spacer"><td></td></tr> 
```

然后使用 css 为间隔行提供一定的高度和透明背景。

* * *

## 回答 #5

> 赞同：83
> 
> 时间：2015-02-27T13:57:10.040

[来自 Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/Web/CSS/border-spacing)：

> border-spacing CSS 属性指定相邻单元格边框之间的距离（仅适用于分隔边框模型）。这等效于展示性 HTML 中的 cellspacing 属性，**但可以使用可选的第二个值来设置不同的水平和垂直间距。**

最后一部分经常受到监督。例子：

```
.your-table {
    border-collapse: separate; /* allow spacing between cell borders */
    border-spacing: 0 5px; /* NOTE: syntax is <horizontal value> <vertical value> */ 
```

**更新**

我现在明白，OP 希望特定的、单独的行增加间距。我添加了一个带有`tbody`元素的设置，可以在不破坏语义的情况下实现这一点。但是，我不确定是否所有浏览器都支持它。我是用 Chrome 做的。

下面的示例用于展示如何使它看起来像存在单独的行的表，充分展示了 css 的甜蜜。还通过`tbody`设置为第一行提供了更多间距。随意使用！

*支持通知：IE8+、Chrome、Firefox、Safari、Opera 4+*

```
.spacing-table {
  font-family: 'Helvetica', 'Arial', sans-serif;
  font-size: 15px;
  border-collapse: separate;
  table-layout: fixed;
  width: 80%;
  border-spacing: 0 5px; /* this is the ultimate fix */
}
.spacing-table th {
  text-align: left;
  padding: 5px 15px;
}
.spacing-table td {
  border-width: 3px 0;
  width: 50%;
  border-color: darkred;
  border-style: solid;
  background-color: red;
  color: white;
  padding: 5px 15px;
}
.spacing-table td:first-child {
  border-left-width: 3px;
  border-radius: 5px 0 0 5px;
}
.spacing-table td:last-child {
  border-right-width: 3px;
  border-radius: 0 5px 5px 0;
}
.spacing-table thead {
  display: table;
  table-layout: fixed;
  width: 100%;
}
.spacing-table tbody {
  display: table;
  table-layout: fixed;
  width: 100%;
  border-spacing: 0 10px;
}
```

```
<table class="spacing-table">
  <thead>
    <tr>
        <th>Lead singer</th>
        <th>Band</th>
    </tr>
  </thead>
  <tbody>
    <tr>
        <td>Bono</td>
        <td>U2</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
        <td>Chris Martin</td>
        <td>Coldplay</td>
    </tr>
    <tr>
        <td>Mick Jagger</td>
        <td>Rolling Stones</td>
    </tr>
    <tr>
        <td>John Lennon</td>
        <td>The Beatles</td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #6

> 赞同：57
> 
> 时间：2011-08-23T19:44:00.707

您可以尝试添加分隔符行：

html:

```
<tr class="separator" /> 
```

CSS：

```
table tr.separator { height: 10px; } 
```

* * *

## 回答 #7

> 赞同：47
> 
> 时间：2008-12-08T21:59:45.890

您不能更改表格单元格的边距。但是您可以更改填充。更改 TD 的填充，这将使单元格变大并将文本推离具有增加的填充的一侧。但是，如果您有边界线，它仍然不是您想要的。

* * *

## 回答 #8

> 赞同：39
> 
> 时间：2017-12-20T14:04:32.450

看一下[border-collapse: 分离](https://www.w3schools.com/cssref/tryit.asp?filename=trycss_border-collapse)属性（默认）和[border-spacing](https://www.w3schools.com/cssref/tryit.asp?filename=trycss_border-spacing)属性。

首先，您必须使用**border-collapse将它们****分开**，然后您可以使用**border-spacing定义****列和行之间**的空间。

 ******这两个 CSS 属性实际上在每个浏览器上都得到了很好的支持，[请参见此处](https://caniuse.com/)。

```
table     {border-collapse: separate;  border-spacing: 10px 20px;}

table, 
table td,
table th  {border: 1px solid black;}
```

```
<table>
  <tr>
    <td>Some text - 1</td>
    <td>Some text - 1</td>
  </tr>
  <tr>
    <td>Some text - 2</td>
    <td>Some text - 2</td>
  </tr>
  <tr>
    <td>Some text - 3</td>
    <td>Some text - 3</td>
  </tr>
</table>
```

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2010-06-22T08:13:34.397

好的，你可以做

```
tr.classname td {background-color:red; border-bottom: 5em solid white} 
```

确保在 td 而不是在行上设置背景颜色。这应该适用于大多数浏览器......（Chrome，即 & ff 测试）

* * *

## 回答 #10

> 赞同：21
> 
> 时间：2012-08-27T17:18:00.663

你需要`border-collapse: separate;`放在桌子上；大多数浏览器默认样式表从 开始`border-collapse: collapse;`，这会减少边框间距。

此外，border-spacing: 继续`TD`，而不是`TR`.

尝试：

```
<html><head><style type="text/css">
    #ex    { border-collapse: separate; }
    #ex td { border-spacing: 1em; }
</style></head><body>
    <table id="ex"><tr><td>A</td><td>B</td></tr><tr><td>C</td><td>D</td></tr></table>
</body> 
```

* * *

## 回答 #11

> 赞同：19
> 
> 时间：2014-06-12T02:56:30.180

您可以在表格中使用**line-height ：**

```
<table style="width: 400px; line-height:50px;"> 
```

* * *

## 回答 #12

> 赞同：13
> 
> 时间：2011-01-26T15:17:36.473

```
tr { 
    display: block;
    margin-bottom: 5px;
} 
```

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2010-01-26T16:42:53.897

一个为时已晚的答案:)

如果将浮点数应用于元素，则可以使用属性`tr`在两行之间留出空间。`margin`

```
table tr{
float: left
width: 100%;
}

tr.classname {
margin-bottom:5px;
} 
```

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2013-09-27T15:41:12.020

为了创建行之间的间距错觉，将背景颜色应用于行，然后用白色创建一个粗边框，以便创建一个“空间”:)

```
tr 
{
   background-color: #FFD700;
   border: 10px solid white;
} 
```

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2014-02-17T12:23:15.153

我在解决类似问题时偶然发现了这一点。我发现 Varun Natraaj 的回答很有帮助，但我会改用透明边框。

```
td { border: 1em solid transparent; } 
```

透明边框仍然有宽度。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2012-04-24T10:33:22.950

为表格提供间距的正确方法是使用 cellpadding 和 cellspacing 例如

```
<table cellpadding="4"> 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2015-09-16T20:52:21.230

适用于 2015 年最新的浏览器。简单的解决方案。它不适用于透明，但与 Thoronwen 的回答不同，我无法以任何尺寸渲染透明。

```
 tr {
      border-bottom:5em solid white;
    } 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2014-06-23T07:45:21.403

只需在`div`里面设置`td`并设置以下样式`div`：

```
margin-bottom: 20px;
height: 40px;
float: left;
width: 100%; 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2021-02-05T14:45:14.270

最好的方法是添加`<td>`一个`height`属性：

```
<td height="50" colspan="2"></td> 
```

`colspan` [您可以在此处](https://www.w3schools.com/tags/att_td_colspan.asp)阅读更多信息。

在下面的例子中，我们的**表格**是**绿色**的，我们`td`的`height`属性是**黄色**的：

```
<table style="background-color: green">
    <tr>
        <td>
            <span>Lorem</span>
        </td>
        <td>
            <span>Ipsum</span>
        </td>
    </tr>
    <tr>
        <td height="50" colspan="2" style="background-color: yellow"></td>
    </tr>
    <tr>
        <td>
            <span>Sit</span>
        </td>
        <td>
            <span>Amet</span>
        </td>
    </tr>
</table>
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2021-11-24T17:56:03.213

`table { border-collapse: separate; border-spacing: 0 1em; }`

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-05-21T13:37:45.570

我意识到这是对旧线程的回答，可能不是所要求的解决方案，但是虽然所有建议的解决方案都没有达到我的要求，但这个解决方案对我有用。

我有 2 个表格单元格，一个带有背景颜色，另一个带有边框颜色。上述解决方案删除了​​边框，因此右侧的单元格似乎漂浮在半空中。解决问题的解决方案是用 div 和相应的类替换`table`,`tr`和`td`： table 将是`div id="table_replacer"`tr`div class="tr_replacer"`和 td 将是`div class="td_replacer"`（显然也将结束标签更改为 divs ）

为了解决我的问题，css是：

```
#table_replacer{display:table;}
.tr_replacer {border: 1px solid #123456;margin-bottom: 5px;}/*DO NOT USE display:table-row! It will destroy the border and the margin*/
.td_replacer{display:table-cell;} 
```

希望这可以帮助某人。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-12-31T01:04:10.340

您可以使用 <div/> 元素填充 <td/> 元素，并将任何边距应用于您喜欢的那些 div。对于行之间的视觉空间，您可以在 <tr/> 元素上使用重复的背景图像。（这是我今天刚刚使用的解决方案，它似乎在 IE6 和 FireFox 3 中都可以使用，尽管我没有进一步测试它。）

此外，如果您不愿意修改服务器代码以将 <div/>s 放入 <td/>s 中，则可以使用 jQuery（或类似的东西）将 <td/> 内容动态包装在 <div/ >，使您能够根据需要应用 CSS。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-07-01T05:08:23.887

这是一个简单而优雅的解决方案，但有一些注意事项：

*   您实际上无法使间隙透明，您需要为它们提供特定的颜色。
*   您不能在间隙上方和下方绕过边界的角落
*   您需要知道表格单元格的填充和边框

考虑到这一点，试试这个：

```
td {padding:5px 8px;border:2px solid blue;background:#E0E0E0}  /* lets say the cells all have this padding and border, and the gaps should be white */

tr.gapbefore td {overflow:visible}
tr.gapbefore td::before,
tr.gapbefore th::before
{
  content:"";
  display:block;
  position:relative;
  z-index:1;
  width:auto;
  height:0;
  padding:0;
  margin:-5px -10px 5px;  /* 5px = cell top padding, 10px = (cell side padding)+(cell side border width)+(table side border width) */
  border-top:16px solid white;  /* the size & color of the gap you want */
  border-bottom:2px solid blue; /* this replaces the cell's top border, so should be the same as that. DOUBLE IT if using border-collapse:separate */
} 
```

您实际上正在做的是将一个矩形`::before`块粘贴到您想要的行中所有单元格的顶部，前面有一个间隙。这些块伸出单元格有点重叠现有的边界，隐藏它们。这些块只是夹在一起的顶部和底部边框：顶部边框形成间隙，底部边框重新创建单元格原始顶部边框的外观。

请注意，如果表格本身以及单元格周围都有边框，则需要进一步增加“块”的水平 -ve 边距。因此，对于 4px 表格边框，您应该使用：

```
margin:-5px -12px 5px;     /* 14px = original 10px + 2px for 'uncollapsed' part of table border */ 
```

如果您的表格使用`border-collapse:separate`而不是`border-collapse:collapse`，那么您需要 (a) 使用完整的表格边框宽度：

```
margin:-5px -14px 5px;     /* 14px = original 10px + 4px full width of table border */ 
```

...以及（b）替换现在需要出现在间隙下方的双倍宽度边框：

```
border-bottom:4px solid blue;     /* i.e. 4px = cell top border + previous row's bottom border */ 
```

如果您愿意，该技术很容易适应 .gapafter 版本，或者创建垂直（列）间隙而不是行间隙。

这是一个代码笔，您可以在其中看到它的实际效果： [https ://codepen.io/anon/pen/agqPpW](https://codepen.io/anon/pen/agqPpW)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-12-29T03:46:24.247

行间隙的出现可以通过在应该有下一个间隙的单元格上使用底部边框来实现，即`border-bottom:solid white 5px;`

[![有行间距的表](https://i.stack.imgur.com/8MK4Z.png)](https://i.stack.imgur.com/8MK4Z.png)

这是创建屏幕截图的代码：

```
<style>
table.class1 {
    text-align:center;
    border-spacing:0 0px;
    font-family:Calibri, sans-serif;
}

table.class1 tr:first-child {
    background-color:#F8F8F8; /* header row color */
}

table.class1 tr > td {
    /* firefox has a problem rounding the bottom corners if the entire row is colored */
    /* hence the color is applied to each cell */
    background-color:#BDE5F8;
}

table.class1 th {
    border:solid #A6A6A6 1px;
    border-bottom-width:0px; /* otherwise borders are doubled-up */
    border-right-width:0px;
    padding:5px;
}

table.class1 th:first-child {
    border-radius: 5px 0 0 0;
}

table.class1 th.last {
    border-right-width:1px;
    border-radius: 0 5px 0 0;
}

/* round the bottom corners */
table.class1 tr:last-child > td:first-child {
    border-radius: 0 0 0 5px;
}

table.class1 tr:last-child > td:last-child {
    border-radius: 0 0 5px 0;
}

 /* put a line at the start of each new group */
td.newgroup {
    border-top:solid #AAA 1px;
}

/* this has to match the parent element background-color */
/* increase or decrease the amount of space by changing 5px */
td.endgroup {
    border-bottom:solid white 5px;
}

</style>

<table class="class1">
<tr><th>Group</th><th>Item</th><th class="last">Row</th></tr>
<tr><td class="newgroup endgroup">G-1</td><td class="newgroup endgroup">a1</td><td class="newgroup endgroup">1</td></tr>
<tr><td class="newgroup">G-2</td><td class="newgroup">b1</td><td class="newgroup">2</td></tr>
<tr><td>G-2</td><td>b2</td><td>3</td></tr>
<tr><td class="endgroup">G-2</td><td class="endgroup">b3</td><td class="endgroup">4</td></tr>
<tr><td class="newgroup">G-3</td><td class="newgroup">c1</td><td class="newgroup">5</td></tr>
<tr><td>G-3</td><td>c2</td><td>6</td></tr>
</table> 
```

* * *

## 回答 #25

> 赞同：-2
> 
> 时间：2016-06-12T08:48:17.463

这工作顺利：

```
#myOwnTable td { padding: 6px 0 6px 0;} 
```

我想你可以通过指定 which td 如果需要来制定一个更细粒度的布局。

* * *

## 回答 #26

> 赞同：-5
> 
> 时间：2011-01-08T17:30:54.940

这样做如上所示...

```
table tr{ float: left width: 100%; }  tr.classname { margin-bottom:5px; } 
```

删除垂直列对齐，所以要小心你如何使用它

* * *

## 回答 #27

> 赞同：-19
> 
> 时间：2008-12-08T21:53:13.250

你有没有尝试过：

```
tr.classname { margin-bottom:5em; } 
```

或者，每个 td 也可以调整：

```
td.classname { margin-bottom:5em; } 
```

或者

```
 td.classname { padding-bottom:5em; } 
```

# excel - 如何从 Excel 中的公式调用 VSTO 函数？

> ID：351069
> 
> 赞同：5
> 
> 时间：2008-12-08T21:53:24.873
> 
> 标签：excel, ms-office, vsto

我希望能够从 Excel 工作表中的单元格调用 VSTO 插件公开的函数。更具体地说，如果我有一个返回“bar”的 VSTO 函数 Foo()，我希望能够在 A1 中编写 =Foo()，其计算结果为“bar”。

这可能吗？我需要采取哪些关键步骤？

能够利用托管代码和 VS08 IDE 进行 excel 开发的前景非常有吸引力。我认为 VSTO 可以让我轻松做到这一点，但我不再确定。我误解了这里的架构吗？文档有点粗制滥造。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:42:34.467

[Excel-DNA](http://excel-dna.net)（我开发的）是一个开源项目，如您所描述的，它允许您为 Excel 创建用户定义的工作表函数 (UDF)。

使用 Excel-DNA，您还可以制作功能齐全的 Excel 插件，包括功能区自定义、宏、异步功能和 RTD 服务器。Excel-DNA 使用原生 Excel XLL 接口与 Excel 集成，因此与基于 COM 集成的解决方案相比，您也可以获得非常好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T09:46:07.087

我不相信您可以直接这样做，尽管您可以使用 VBA 包装器，例如参见[http://blogs.msdn.com/pstubbs/archive/2004/12/31/344964.aspx](http://blogs.msdn.com/pstubbs/archive/2004/12/31/344964.aspx)。

[您还可以使用ManagedXll](http://www.managedxll.com/)等第三方产品在托管代码中创建 Excel UDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-22T20:18:14.330

我认为您可以使用 COM Interop .. 这是一个网页，我在其中看到了所描述的过程。

[http://www.cpearson.com/excel/creatingnetfunctionlib.aspx](http://www.cpearson.com/excel/creatingnetfunctionlib.aspx)

# asp.net - asmx wsdl 永远加载

> ID：351078
> 
> 赞同：3
> 
> 时间：2008-12-08T21:56:49.063
> 
> 标签：asp.net, iis, wsdl, asmx

我有一个突然停止工作的 Web 服务应用程序。我在 IIS 中启用了目录浏览，并且可以查看应用程序目录。我可以查看应用程序目录中的 xml 文件，但无法查看 .config 文件，也无法查看任何 Web 服务的 wsdls。当我尝试浏览到`http://server/app/service.asmx?wsdl`时，浏览器将永远处于“加载”状态。

任何想法这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-08T22:09:52.360

您查看过服务器的事件日志吗？许多 ASP.NET 错误最终会出现，这听起来可能符合条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-19T00:06:01.063

关于加载的第一个问题，您可以浏览到服务器上的站点吗？

IIS 默认保护 Web.config 文件，通常会返回“不提供此类页面”错误消息。这是一件好事，它将保留您的连接字符串以及不被随意查看的内容。[这里](https://stackoverflow.com/questions/431233/cassini-error-this-type-of-page-is-not-served)有更多关于允许例外的信息。

# php - Google Sitemap - 我应该提供负载控制/缓存吗？

> ID：351096
> 
> 赞同：2
> 
> 时间：2008-12-08T22:01:54.030
> 
> 标签：php, performance, caching, friendly-url

我有一个社区网站，目前有大约 10,000 个列表。我正在采用一种新的网址策略，例如

```
example.com/products/category/some-product-name 
```

作为战略的一部分，我正在实施一个站点地图。谷歌已经对我的网站有一个很好的索引，但是 URL 会改变。我使用一个 php 框架来访问每个产品列表的数据库。

我担心向 google 提供 10,000 个新 URL 的性能影响，**我应该这样做吗？**

我正在考虑的一个可能的解决方案是将我的 php 输出页面呈现为静态 HTML 页面。我在网站的其他地方已经有了这个功能。这样，谷歌将索引 10,000 个 html 页面。这个系统的美妙之处在于，如果用户通过 google 到达该 HTML 页面，一旦他们开始浏览该站点，他们就会直接跳回 PHP 版本。

我对这种方法的问题是我必须将 .html 附加到我漂亮干净的 URL 上......

```
example.com/products/category/some-product-name.html 
```

我会以错误的方式解决这个问题吗？

**编辑 1：** 我想减少 PHP 和 MySQL 的开销。创建 HTML 页面只是一种缓存方法，以在搜索引擎抓取这些页面时为负载峰值做准备。有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-08T22:11:10.580

除非我遗漏了什么，否则我认为您不必担心。我假设您的产品名称列表不会经常更改*-*大约一天左右，而不是每秒。谷歌站点地图应该在一秒钟或更短的时间内被读取，并且抓取工具不会在您更新后*立即抓取您。*我会在没有任何并发​​症的情况下尝试它，并在您折断脖子优化之前测量效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T22:19:31.140

您不应该担心 10000 个新链接，但您可能想分析您当前的 google 流量，看看 google 抓取它们的速度有多快。缓存总是一个好主意（参见：Memcache，甚至生成静态文件？）。

例如，我目前有大约 5 个来自 googlebot 的请求/秒，这意味着 google 将在半小时内抓取这 10,000 个页面，但是，考虑一下：

1.  将所有现有链接重定向到新位置

    通过这样做，您可以确保已被 google 和其他搜索引擎索引的链接几乎立即被重写。当前的 google 排名迁移到新链接（其他链接以分数 0 开头）。

2.  谷歌分析

    我们注意到，谷歌使用分析数据来抓取页面，通常不会通过正常抓取（javascript 重定向、登录用户内容链接）找到这些数据。很有可能，谷歌会很快发现您的网址更改，但请参阅 1)。

3.  网站地图

    在我们的案例中，站点地图文件的经验法则只是让它们使用最新内容进行更新。保留 10,000 个链接，甚至是所有链接都毫无意义。您将如何更新此文件？

* * *

这些天，我和谷歌爬虫是爱恨交织的关系，因为用户使用的大多数链接都被很好地缓存了，但谷歌爬虫爬取的东西通常不是。这就是谷歌在 1/6 的请求中导致 6 倍负载的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-08T22:08:40.957

不是您的主要问题的答案。

您不必附加 .html。您可以保留 URL 原样。如果您找不到更好的方法来重定向到 html 文件（没有 .html 后缀），您可以通过 PHP 使用[readfile](http://no.php.net/manual/en/function.readfile.php)输出它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-08T22:17:09.663

> 我担心向 google 提供 10,000 个新 URL 的性能影响，我应该这样做吗？

对 Google 服务器的性能影响？我不会担心的。

对您自己的服务器的性能影响？我也不会担心。我怀疑您会获得比以前更多的流量，您只会将其发送到不同的 URL。

# java - 在 JSP 中创建不可变对象

> ID：351117
> 
> 赞同：1
> 
> 时间：2008-12-08T22:09:58.880
> 
> 标签：java, jsp, jsp-tags

我知道您可以使用`<jsp:useBean>`标记在 JSP 中实例化对象，而无需借助 scriptlet 代码。但是，我想实例化一个 Integer，其 value 是 EL 表达式的结果，例如：

```
<jsp:useBean id="total" class="java.lang.Integer">
    <jsp:setProperty name="amount" value="${param1 + param2}"/>
</jsp:useBean> 
```

当然这是行不通的，因为 Integer 对象没有名为“amount”的属性，设置它们的值的唯一方法是通过构造函数参数（即 Integer 对象是不可变的）。有没有办法在不使用 scriptlet 代码的情况下实例化这样的对象并设置它的值？

谢谢，唐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-08T23:55:03.833

原始包装器也没有默认构造函数，因此您甚至无法以这种方式初始化一个。

我不确定 EL 是否应该以这种方式使用。它更像是一种模板语言。目前尚不清楚您尝试做的事情与以下内容相比有什么优势：

```
<%
  Integer total = new Integer(param1 + param2);
%> 
```

然后在需要输出值的地方使用 <%= total %> 。你也可以这样做：

```
<%
  pageContext.setAttribute("total", new Integer(param1 + param2));
%> 
```

如果您希望该值像 useBean 那样在页面范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T03:48:52.300

**`<c:set var="amount" value="${param1 + param2}" scope="page" />`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-08T22:17:39.503

如果你有一个 bean，你能用 param1 和 2 更新 bean 吗？创建一个方法 setAmount(param1, param2)，并在使用 getAmount() 之前设置它，这是 bean 将要调用的。

# c# - 我在哪里可以找到 SocketException 抛出的 SocketErrorCode 和 NativeErrorCode 的列表？

> ID：351120
> 
> 赞同：11
> 
> 时间：2008-12-08T22:12:58.610
> 
> 标签：c#, .net, winapi, exception, sockets

SocketException 具有 SocketErrorCode 和 NativeErrorCode。我想找到一个列出这些代码（或常见代码）的列表，以便我能以适当的方式做出回应。

有人知道在哪里可以找到这样的清单吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-08T22:16:30.957

微软？[套接字错误](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketerror.aspx)；或从本机错误代码， [MSDN 页面](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketexception.errorcode.aspx)指出：“有关套接字错误代码的更多信息，请参阅 MSDN 中的 Windows 套接字版本 2 API 错误代码文档。”。

一些搜索[在这里](http://msdn.microsoft.com/en-us/library/ms740668.aspx)显示了这一点。

# vb.net - VB.NET 中的查找使 LDAP 服务器陷入困境

> ID：351121
> 
> 赞同：1
> 
> 时间：2008-12-08T22:13:33.973
> 
> 标签：vb.net, ldap

我的 DBA 告诉我，我的一个应用程序确实使我们的一个 LDAP 服务器陷入困境。我已经多次查看代码，但我看不到任何方法来限制我必须点击 LDAP 的次数。所以现在我决定看看我实际获取数据的方式，看看是否有更好的方法。我没有开发我正在使用的实际数据模型，我不确定 System.DirectoryServices.Protocols 库的全部内容。

如果更熟悉使用 .NET LDAP 提供程序的人能给我一些建议，我将不胜感激。这是我用来在我们的 LDAP 服务器中查找条目的函数：

```
 <DirectoryServicesPermission(SecurityAction.LinkDemand, Unrestricted:=True)> _
    Public Overloads Shared Function GetSearchResultEntry(ByVal connection As LdapConnection, ByVal searchDirectoryPath As String, ByVal filter As String, _
                                          ByVal attributes As String(), ByVal scope As Protocols.SearchScope) As SearchResultEntry

        If connection Is Nothing Then
            Throw New ArgumentNullException("connection", "An ldap connection must be provided in order to search for a directory.")
        End If

        If Strings.IsNullOrBlank(searchDirectoryPath) Then
            Throw New ArgumentException("A directory path must be provided in order to search for a directory.", "searchDirectoryPath")
        End If

        If Strings.IsNullOrBlank(filter) Then
            Throw New ArgumentException("A search filter must be provided in order to search for a directory.", "filter")
        End If

        Dim resp As SearchResponse = CType(connection.SendRequest(New SearchRequest(searchDirectoryPath, filter, scope, attributes)), SearchResponse)

        If resp.Entries.Count > 0 Then
            Return resp.Entries(0)
        End If

        Return Nothing

    End Function 
```

.NET LDAP 提供程序是否可能有点慢？如果有人有一些关于他们如何在他们的商店中使用 LDAP 的代码示例，那就太好了。

无论如何，提前感谢您的帮助。

谢谢，
厘米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-08T22:48:39.990

两件事情：

1.  您只关心 1 个条目。该代码看起来会返回特定查询的所有结果。您可以尝试寻找单一结果查询样式。
2.  如果做不到这一点，我怀疑你可以做很多事情来让这个特定的代码在服务器上更容易。您可能会看到是否有某种方法可以减少调用此函数的频率——也许是通过缓存结果。

# c++ - 通过 ODBC API 从 SQL 查询获得的数据大小

> ID：351122
> 
> 赞同：0
> 
> 时间：2008-12-08T22:13:38.297
> 
> 标签：c++, sql, api, odbc

有人知道我在执行 SQL 查询后如何获取返回的元素数（行*列）吗？如果无法做到这一点，那么是否有一些东西可以相对代表我返回的数据大小？

我正在尝试制作一个状态栏，指示我处理了多少返回的数据，所以我想在某个相对接近的地方。有任何想法吗？

请注意，SQLRowCount 仅返回受 UPDATE、INSERT 或 DELETE 语句影响的行数；不是从 SELECT 语句返回的行数（据我所知）。所以我不能将它直接乘以 SQLColCount。

我的最后一个选择是有一个来回显示的状态栏，表示正在处理数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-08T22:46:58.540

当您想要保留动态内存来保存整个结果集时，这通常是一个问题。

一种技术是将计数作为结果集的一部分返回。

```
WITH
data AS
(
    SELECT interesting-data
    FROM   interesting-table
    WHERE  some-condition
)
SELECT COUNT(*), data.*
from data 
```

如果您事先不知道要选择哪些列或使用 *，如上面的示例，则可以从 USER_TAB_COLS 表中选择列数

```
SELECT COUNT(*)
FROM USER_TAB_COLS
WHERE TABLE_NAME = 'interesting-table' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-15T00:10:47.537

如果驱动程序支持，SQLRowCount 可以返回 SELECT 查询的行数。然而，许多驱动程序不这样做，因为服务器计算它可能很昂贵。如果要保证始终有一个计数，则必须使用 COUNT(*)，从而强制服务器进行可能耗时的计算（或导致它延迟返回任何结果，直到知道整个结果为止）。

我的建议是尝试 SQLRowCount，以便服务器或驱动程序可以决定行数是否易于计算。如果它返回一个值，则乘以 SQLNumResultCols 的结果。否则，如果返回-1，则使用来回状态栏。有时这会更好，因为您可以看起来对用户更敏感。

# .net - 将字符串转换为流

> ID：351126
> 
> 赞同：23
> 
> 时间：2008-12-08T22:15:17.997
> 
> 标签：.net, vb.net, stream

我从网上下载了一张图片并转换为字符串（这是不可更改的）

```
Dim Request As System.Net.WebRequest = _
  System.Net.WebRequest.Create( _
  "http://www.google.com/images/nav_logo.png")

Dim WebResponse As System.Net.HttpWebResponse = _
  DirectCast(Request.GetResponse(), System.Net.HttpWebResponse)

Dim Stream As New System.IO.StreamReader( _
  WebResponse.GetResponseStream, System.Text.Encoding.UTF8)

Dim Text as String = Stream.ReadToEnd 
```

如何将字符串转换回流？

所以我可以使用该流来获取图像。

像这样：

```
Dim Image As New Drawing.Bitmap(WebResponse.GetResponseStream) 
```

但现在我只有文本字符串，所以我需要这样的东西：

```
Dim Stream as Stream = ReadToStream(Text, System.Text.Encoding.UTF8)
Dim Image As New Drawing.Bitmap(Stream) 
```

编辑：

该引擎主要用于下载网页，但我也在尝试使用它来下载图像。字符串的格式为 UTF8，如示例代码中所示...

我尝试使用`MemoryStream(Encoding.UTF8.GetBytes(Text))`，但在将流加载到图像时出现此错误：

> GDI+ 中出现一般错误。

转换中丢失了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-12-08T22:22:15.797

为什么要将二进制（图像）数据转换为字符串？这没有任何意义......除非您使用的是base-64？

无论如何，要扭转您所做的事情，您可以尝试使用`new MemoryStream(Encoding.UTF8.GetBytes(text))`?

这将创建一个以字符串（通过 UTF8）启动的新 MemoryStream。就个人而言，我怀疑它会起作用——你会遇到很多将原始二进制视为 UTF8 数据的编码问题……我希望读取或写入（或两者）都会抛出异常。

（编辑）

我应该添加它以使用 base-64，只需将数据获取为 a `byte[]`，然后调用`Convert.ToBase64String(...)`; 并取回数组，只需使用`Convert.FromBase64String(...)`.

* * *

重新编辑，这正是我在上面试图警告的内容......在.NET中，字符串不仅仅是 a `byte[]`，所以你不能简单地用二进制图像数据填充它。很多数据对编码根本没有意义，因此可能会被悄悄丢弃（或抛出异常）。

要将原始二进制（如图像）作为字符串处理，需要使用 base-64 编码；然而，这增加了尺寸。请注意，这`WebClient`可能会使这更简单，因为它`byte[]`直接公开了功能：

```
using(WebClient wc = new WebClient()) {
    byte[] raw = wc.DownloadData("http://www.google.com/images/nav_logo.png")
    //...
} 
```

无论如何，使用标准`Stream`方法，以下是对 base-64 进行编码和解码的方法：

```
 // ENCODE
        // where "s" is our original stream
        string base64;
        // first I need the data as a byte[]; I'll use
        // MemoryStream, as a convenience; if you already
        // have the byte[] you can skip this
        using (MemoryStream ms = new MemoryStream())
        {
            byte[] buffer = new byte[1024];
            int bytesRead;
            while ((bytesRead = s.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, bytesRead);
            }
            base64 = Convert.ToBase64String(ms.GetBuffer(), 0, (int) ms.Length);
        }

        // DECODE
        byte[] raw = Convert.FromBase64String(base64);
        using (MemoryStream decoded = new MemoryStream(raw))
        {
            // "decoded" now primed with the binary
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-08T22:23:50.430

这行得通吗？我不知道你的字符串是什么格式，所以可能需要一些按摩。

```
Dim strAsBytes() as Byte = new System.Text.UTF8Encoding().GetBytes(Text)
Dim ms as New System.IO.MemoryStream(strAsBytes) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T00:19:03.207

以您显示的方式将二进制数据转换为字符串将使其无用。你不能把它拉出来。文本编码管它。

您需要使用 Base64 - 如[@Marc](https://stackoverflow.com/questions/351126/convert-a-string-to-stream#351156)节目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T18:00:21.193

```
var bytes = new byte[contents.Length * sizeof( char )];
Buffer.BlockCopy( contents.ToCharArray(), 0, bytes, 0, bytes.Length );
using( var stream = new MemoryStream( bytes ) )
{
    // do your stuff with the stream...
} 
```

# c - 如何从 Linux 内核中的函数指针获取函数名？

> ID：351134
> 
> 赞同：61
> 
> 时间：2008-12-08T22:18:17.897
> 
> 标签：c, linux-kernel, function-pointers

如何从C中的[函数指针](http://en.wikipedia.org/wiki/Function_pointer)获取函数名？

编辑：真实情况是：我正在编写一个 linux 内核模块并且我正在调用内核函数。其中一些函数是指针，我想在内核源代码中检查该函数的代码。但我不知道它指向哪个函数。我认为可以这样做，因为当系统失败（内核恐慌）时，它会在屏幕上打印出当前调用堆栈以及函数名称。但是，我想我错了……是吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-12-09T06:44:09.280

我很惊讶为什么每个人都说这是不可能的。在 Linux 上可以使用非静态函数。

我知道至少有两种方法可以实现这一目标。

有用于回溯打印的 GNU 函数：`backtrace()`和`backtrace_symbols()`（参见 参考资料`man`）。在您的情况下，您不需要`backtrace()`，因为您已经有函数指针，您只需将其传递给`backtrace_symbols()`.

示例（工作代码）：

```
#include <stdio.h>
#include <execinfo.h>

void foo(void) {
    printf("foo\n");
}

int main(int argc, char *argv[]) {
    void    *funptr = &foo;

    backtrace_symbols_fd(&funptr, 1, 1);

    return 0;
} 
```

编译`gcc test.c -rdynamic`

输出：`./a.out(foo+0x0)[0x8048634]`

它为您提供二进制名称、函数名称、从函数开始的指针偏移量和指针值，以便您可以解析它。

另一种方法是使用`dladdr()`（另一个扩展名），我猜`print_backtrace()`使用`dladdr()`. `dladdr()`返回在字段`Dl_info`中具有函数名称的结构。`dli_sname`我在这里没有提供代码示例，但很明显 - 请参阅`man dladdr`详细信息。

注意！这两种方法都要求函数是非静态的！

好吧，还有另一种方法 - 使用调试信息，`libdwarf`但它需要未剥离的二进制文件并且不太容易做到，所以我不推荐它。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-12-08T22:21:43.583

如果没有额外的帮助，这是不可能直接实现的。

你可以：

1.  在程序中维护一个表映射函数指针到名称

2.  检查可执行文件的符号表（如果有的话）。

然而，后者很难，而且不便携。该方法将取决于操作系统的二进制格式（ELF、a.out、.exe 等），以及链接器完成的任何重定位。

编辑：既然您现在已经解释了您的真实用例是什么，那么答案实际上并不难。内核符号表在 中可用`/proc/kallsyms`，并且有一个用于访问它的 API：

```
#include <linux/kallsyms.h>

const char *kallsyms_lookup(unsigned long addr, unsigned long *symbolsize,
                            unsigned long *ofset, char **modname, char *namebuf)

void print_symbol(const char *fmt, unsigned long addr) 
```

出于简单的调试目的，后者可能会完全满足您的需求 - 它获取地址、格式化并将其发送到`printk`，或者您可以使用`printk`格式`%pF`说明符。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-02-19T10:32:20.030

在Linux内核中，可以直接使用*“%pF”*格式的printk！

```
void *func = &foo;
printk("func: %pF at address: %p\n", func, func); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-16T13:09:17.617

以下内容适用于 Linux：

*   使用 printf 函数的地址`%p`
*   然后做一个`nm <program_path> | grep <address>`（不带`0x`前缀）
*   它应该向您显示函数名称。

它仅在所讨论的函数在同一个程序中（而不是在动态链接库或其他东西中）时才有效。

如果能查出加载的共享库的加载地址，可以从打印出来的数字中减去地址，在库上用nm来查出函数名。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-08T22:40:45.730

你不能直接，但如果你愿意，你可以用不同的方法来解决这个问题。您可以创建一个结构指针，而不是指向一个函数以及一个描述性字符串，您可以将其设置为您想要的任何内容。我还添加了一个调试姿势，因为您可能不希望这些变量永远被打印。

```
// Define it like this
typedef struct
{
  char        *dec_text;
  #ifdef _DEBUG_FUNC
  void        (*action)(char);
  #endif
} func_Struct;

// Initialize it like this
func_Struct func[3]= {
#ifdef _DEBUG_FUNC
{"my_Set(char input)",&my_Set}};
{"my_Get(char input)",&my_Get}};
{"my_Clr(char input)",&my_Clr}};
#else
{&my_Set}};
{&my_Get}};
{&my_Clr}};
#endif 

// And finally you can use it like this
func[0].action( 0x45 );
#ifdef _DEBUG_FUNC
printf("%s",func.dec_text);
#endif 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-01-06T01:07:04.757

如果可以指向的函数列表不是太大，或者如果您已经怀疑有一小组函数，您可以打印地址并将它们与执行期间使用的地址进行比较。前任：

```
typedef void (*simpleFP)();
typedef struct functionMETA {
    simpleFP funcPtr;
    char * funcName;
} functionMETA;

void f1() {/*do something*/}
void f2() {/*do something*/}
void f3() {/*do something*/}

int main()
{
    void (*funPointer)() = f2; // you ignore this
    funPointer(); // this is all you see

    printf("f1 %p\n", f1);
    printf("f2 %p\n", f2);
    printf("f3 %p\n", f3);

    printf("%p\n", funPointer);

    // if you want to print the name
    struct functionMETA arrFuncPtrs[3] = {{f1, "f1"}, {f2, "f2"} , {f3, "f3"}};

    int i;
    for(i=0; i<3; i++) {
        if( funPointer == arrFuncPtrs[i].funcPtr )
            printf("function name: %s\n", arrFuncPtrs[i].funcName);
    }
} 
```

输出：

```
f1 0x40051b
f2 0x400521
f3 0x400527
0x400521
function name: f2 
```

这种方法也适用于静态函数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-08T22:58:26.257

一般来说，没有办法做到这一点。

如果您将相应的代码编译到 DLL/共享库中，您应该能够列出所有入口点并与您获得的指针进行比较。还没有尝试过，但我对 DLL/共享库有一些经验，并且希望它能够工作。这甚至可以实现跨平台工作。

其他人已经提到使用调试符号进行编译，然后您可以尝试找到一种方法从正在运行的应用程序中分析这些符号，类似于调试器所做的事情。但这绝对是专有的，不可移植。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-27T05:27:56.397

1.  用于`kallsyms_lookup_name()`查找 的地址`kallsyms_lookup`。

2.  使用指向 , 的函数指针`kallsyms_lookup`来调用它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-08T22:24:39.023

查看[Visual Leak Detector](http://www.codeproject.com/KB/applications/visualleakdetector.aspx)以了解他们如何让调用堆栈打印工作。不过，这假设您使用的是 Windows。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-18T20:09:41.843

不完全是问题的要求，但在阅读了这里的答案后，我想到了这个解决方案来解决我的类似问题：

```
/**
* search methods */
static int starts(const char *str, const char *c);
static int fuzzy(const char *str, const char *c);

int (*search_method)(const char *, const char *);

/* asign the search_method and do other stuff */
[...]

printf("The search method is %s\n", search_method == starts ? "starts" : "fuzzy") 
```

如果您的程序需要这个很多，您可以在 XMacro 中定义方法名称以及字符串，并`#define X(name, str) ... #undef X`在代码中使用从函数名称中获取相应的字符串。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-26T08:05:42.550

当我正在寻找一种解决方法以在内核模块中打印出函数的名称时，Alnitak 的回答对我非常有帮助。但是我想提供一件事，那就是您可能想使用 %pS 而不是 %pF 来打印函数的名称，因为 %pF 在某些较新版本的内核（例如 5.10.x）中不再起作用。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2008-12-08T22:21:39.793

你不能。函数名在编译和链接时并未附加到函数上。在这一点上，这完全是内存地址，而不是名称。

* * *

## 回答 #13

> 赞同：-6
> 
> 时间：2008-12-08T23:10:23.267

没有反光镜，你不会知道自己的样子。您必须使用具有反射功能的语言，例如 C#。

# asp.net - 如何从 ASP.NET MVC 中的自定义帮助器方法中访问当前的 System.Web.Routing.RequestContext？

> ID：351149
> 
> 赞同：21
> 
> 时间：2008-12-08T22:21:28.250
> 
> 标签：asp.net, asp.net-mvc

我正在为 ASP.NET MVC 编写一个辅助方法，我需要调用`Url.Content`以获取上下文的适当 URL。但是，为了创建一个新的，`UrlHelper()`我需要获取当前的`RequestContext`（`System.Web.Routing.RequestContext`准确地说）并且我不知道如何获取它。有人知道吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-10-17T19:35:48.417

如果当前 IHttpHandler 是 MvcHandler，则可以使用

```
((MvcHandler)HttpContext.Current.Handler).RequestContext 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-06-15T12:04:53.113

注意到这仍然没有答案。从 MVC 1.0 开始，您可以执行以下操作：

```
public static string NewHelperMethod(this HtmlHelper helper)
{
    UrlHelper url = new UrlHelper(helper.ViewContext.RequestContext); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-08-23T19:37:15.420

您可能在其他地方找到了答案，但这里有；

在控制器操作中，您可以像这样访问当前的 RequestContext：

```
public ActionResult SomeAction(){
  var helper = new UrlHelper(this.ControllerContext.RequestContext);
  ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-14T17:11:46.227

如上所述，只需扩展 HtmlHelper 并以这种方式公开上下文。例如：

```
 public static string ExtensionMethodName(this HtmlHelper html,object o)
    {
        html.ViewContext.HttpContext.Request.Uri ... etc    
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-09T16:35:12.487

不要创建一个新的。只需扩展现有的 UrlHelper，就像扩展 HtmlHelper 一样：

```
public static string IdLink(this UrlHelper helper, Guid id)
    { //... 
```

如果您必须同时使用 HtmlHelper 和 UrlHelper，请将其中一个作为常规（非“this”）参数传递。

# c# - .Net：读取屏幕保护程序和其他电源方案的属性并禁用

> ID：351160
> 
> 赞同：3
> 
> 时间：2008-12-08T22:23:55.093
> 
> 标签：c#, .net, screensaver

我有一个长期运行的 GUI 应用程序，它向用户输出各种状态。用户想要查看每个状态，但不想担心屏幕保护程序在不活动设置后启动。

最好在 C# 中，我如何读取屏幕保护程序/电源方案设置（以便在我的应用程序退出时重新应用它们）并使用适合我的应用程序的设置（基本上禁用它们）？

编辑：在将这些答案标记为解决方案之前，我将对这些答案进行自己的测试。如果有人在其中任何一个方面都取得了成功，请投票，所以我先试试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-08T22:38:56.327

CodeProject 上有一篇文章实现了用于操作屏幕保护程序的 API（[链接](http://www.codeproject.com/KB/cs/ScreenSaverControl.aspx)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-08T22:36:57.843

屏幕保护程序超时值在注册表中：

[如何更改屏幕保护程序超时值](http://www.microsoft.com/technet/scriptcenter/resources/qanda/oct04/hey1027.mspx)（其中的示例代码应该很容易转换为 C#）

不确定电源方案设置，但[这篇文章](http://www.experts-exchange.com/Programming/Languages/Visual_Basic/VB_Script/Q_22951821.html)可能有用

# vim - 删除vi中的重复行？

> ID：351161
> 
> 赞同：141
> 
> 时间：2008-12-08T22:24:19.537
> 
> 标签：vim, duplicates

我有一个文本文件，其中包含一长串条目（每行一个）。其中一些是重复的，我想知道是否可以（如果可以，如何）删除任何重复。如果可能的话，我有兴趣在 vi/vim 中执行此操作。

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2008-12-08T22:32:20.753

如果您可以对文件进行排序，您可以使用：

```
:sort u 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-12-08T22:27:36.083

试试这个：

```
:%s/^\(.*\)\(\n\1\)\+$/\1/ 
```

它搜索紧随其后的一个或多个副本的任何行，并将其替换为单个副本。

在您尝试之前复制您的文件。它未经测试。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2011-04-11T16:31:31.603

从命令行只需执行以下操作：

```
sort file | uniq > file.new 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-08-04T12:38:40.090

`awk '!x[$0]++' yourfile.txt`如果您想保留顺序（即不接受排序）。为了从 vim 调用它，`:!`可以使用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-09T01:16:21.000

我会结合上面的两个答案：

```
go to head of file
sort the whole file
remove duplicate entries with uniq

1G
!Gsort
1G
!Guniq 
```

如果您有兴趣查看删除了多少重复行，请在前后使用 control-G 检查缓冲区中存在的行数。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-11-01T18:23:37.177

```
g/^\(.*\)$\n\1/d 
```

在 Windows 上为我工作。不过，必须先对行进行排序。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-08T22:32:51.317

在视觉线模式 ( `Shift`+ `v`) 中选择线条，然后`:!uniq`。那只会捕获一个接一个的重复项。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-09T10:05:48.250

[关于如何在 VimL 中实现 Uniq，请在我正在维护](http://code.google.com/p/lh-vim/source/browse/system-tools/trunk/plugin/system_utils.vim)的插件中搜索 Uniq 。您将看到 Vim 邮件列表中提供的各种实现方法。

否则，`:sort u`确实是要走的路。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-13T09:56:18.740

如果您不想对整个文件进行排序/uniq，您可以选择要在可视模式下制作 uniq 的行，然后简单地`:sort u`：

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-08T22:34:34.493

我会使用`!}uniq`，但只有在没有空行的情况下才有效。

对于文件中的每一行，使用：`:1,$!uniq`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-30T06:45:51.607

```
:%s/^\(.*\)\(\n\1\)\+$/\1/gec 
```

或者

```
:%s/^\(.*\)\(\n\1\)\+$/\1/ge 
```

这是我给你的答案，它可以删除多个重复的行，只保留一个不删除！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-19T20:36:00.980

此版本仅删除连续的重复行。我的意思是，只删除连续重复的行。使用给定的地图，该函数确实会混淆空白行。但是，如果更改正则表达式以匹配行首`^`，它也会删除重复的空白行。

```
" function to delete duplicate lines
function! DelDuplicatedLines()
    while getline(".") == getline(line(".") - 1)
        exec 'norm! ddk'
    endwhile
    while getline(".") == getline(line(".") + 1)
        exec 'norm! dd'
    endwhile
endfunction
nnoremap <Leader>d :g/./call DelDuplicatedLines()<CR> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-10-16T11:20:01.113

不使用 vi/vim（对于非常大的文件）的另一种方法是从 Linux 命令行使用 sort 和 uniq：

```
sort {file-name} | uniq -u 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-17T10:02:02.273

这对我`.csv`和`.txt`

`awk '!seen[$0]++' <filename> > <newFileName>`

**说明：** 命令的第一部分打印唯一的行，第二部分，即中间箭头之后的部分是保存第一部分的输出。

`awk '!seen[$0]++' <filename>`

`>`

`<newFileName>`

# parameters - 处理大量输入参数，大量输出

> ID：351165
> 
> 赞同：3
> 
> 时间：2008-12-08T22:24:46.637
> 
> 标签：parameters, oop

我需要进行复杂的计算。在我的例子中，创建一个 Calculator 类（使用策略模式抽象）似乎是最自然的。

为了执行计算，该类需要接受大约 20 个输入，其中一些是可选的，其中一些可能在未来发生变化等。一旦调用了**Calculate()**方法，大约需要输出 20 个不同的变量。

有多种方法可以实现这一目标。

*   作为参数传入计算方法的输入
*   通过计算器的属性传入的输入
*   输入封装到它们自己的类中，然后传递给Calculate() 方法。
*   计算（）返回的输出，封装在一个类中
*   填充到传递给 Calculate() 方法的参数中的输出
*   在调用 Calculate() 之后从 Calculator 的公共属性中检索的输出

所有这些方法都有优点和缺点。你会怎么做？

更新：感谢您的反馈。

此计算器的目的是生成报价。输入是客户地址、利率、目标利润、附加费用、产品 ID 等内容，输出包括报价、实际利润、更多费用等。

我已经创建了 ICalculateInput 和 ICalculateOutput 接口及其具体类，现在系统运行良好。Calculator 类还继承自 ICalculator 接口（因为所涉及的计算因产品来源的公司而异）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-08T22:35:19.143

我会推荐

*   输入封装到它们自己的类中，然后传递给Calculate() 方法。
*   计算（）返回的输出，封装在一个类中

仅当您进行多步计算，或者基本计算步骤可能多次完成并且很难重新填充输入时，才在计算器中存储状态才有意义。否则，当您对它进行多线程处理或在代码的不同部分重用相同的对象时，这是一个糟糕的抽象。

有很多参数很难维护和阅读，如果你需要改变一些东西是不灵活的

改变参数以生成输出是一个坏主意。从调用者的角度来看，他“拥有”的类已通过将其传递给函数而被更改，这一点并不明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-08T23:11:56.463

大多数人建议使用“参数类”和“结果类”。我同意这种方法，但在我看来，您的参数分为几类。也许您可以为必需参数创建一个参数类，并为可选参数或可选参数组创建一个单独的参数类。这样，您可以根据需要的计算类型创建不同的方法；

```
Result calculate(RequiredArgs requiredArgs) {
...
}

Result calculate(RequiredArgs requiredArgs, OptionalArgs optionalArgs) {
}

Result calculate(RequiredArgs requiredArgs, OptionalArgs optionalArgs, OtherOptionalArgs oOpitonalArgs) {
} 
```

这将使您的 API 更易于使用。如果您不想为不同的组创建类，您也可以使用 Maps，但这需要计算引擎中的更多验证代码。通常我更喜欢参数类，但必须更多地了解您的特定问题才能做出决定。

由于线程安全和对象可重用性，我不会将计算结果存储在计算引擎本身中。维护无状态的代码要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-08T22:35:01.467

长参数列表变得繁琐且容易出错。告诉我们更多关于应用程序和环境的信息，但一般来说，传递某个类的对象或使用列表等会很诱人。

我已经完成的一种相当不错的处理方法是使用复合模式。例如，在 Java 中，您可以创建一个 Parameter 接口，然后创建一个实现 Parameter 的对象列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-08T22:35:32.807

根据经验，不要创建接受超过 3-4 个单独参数的方法

**在 JavaScript 中**你不应该做的事情：****

 **```
var addUser = function (name,surname, age, add1, add2, telephone) {
    //do something
}; 
```

而不是上面的，它最好做这样的事情：

```
var addUser = function (userDetails) {
    //Do something with userDetails.name etc...
};
//Then invoke the function by passing in an object:
var ud = {name : 'Andreas', surname : 'Grech', age : 20, add1 : 'bla', add2 : 'bla', telephone : 12343}; 
addUser(ud); 
```

这样，您可以通过按您喜欢的任何顺序输入参数来调用该函数而不会破坏它，您甚至可以跳过一些

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-08T23:31:39.123

我同意您的输入和输出应包含在它们自己的类中。

如果部分或所有参数是可选的，您可能要考虑的一种可能性是使用[Builder 模式来构造输入对象。](http://en.wikipedia.org/wiki/Builder_pattern)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-10T00:32:18.797

你漏掉了

*   放入字典中的输入，该字典被传递给计算

有人想知道为什么一个函数有 20 个输入……似乎过多。但是，如果您需要它们，并且有些是可选的，并且将来可能通过策略模式更改计算方法，那么传入命名变量的集合可能是有意义的。您甚至可以在集合中指定策略模式，以便计算方法是完全通用的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-08T22:30:31.023

你没有提到语言，但我会假设 c#。我可能会将它们作为结构（或类）传递并以相同的方式返回输出。

或者，我会找到一些方法来重构它并简化预期的输入/输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-08T22:32:39.413

尝试做 .net 中的数据库提供程序类所做的事情。

有一个参数类（具有方向的类型和值属性，即输入/输出）并有一个参数（参数的集合）作为计算器的属性。

有关详细信息，请查看 .net 中用于调用存储过程/函数的 OleDBCommand/SQLCommand 类。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-08T22:34:52.170

就个人而言，我会创建一个自定义输入和输出结构或类，并预先填充它们，将它们传入，并接收输出结构或类的返回值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-10T01:25:02.747

假设您已经认真考虑过并确定，是的，您确实需要所有这些参数：

我很可能会使用命名参数，但我选择的语言 (Perl) 支持与顺序无关的命名参数。如果你没有，那么传入一个对象是下一个最佳选择。必须以特定顺序（命名或不命名）传递超过 2-3 个参数只是自找麻烦。

对于输出，如果返回的值不止一个，我很可能会返回一个对象。

# vbscript - How to escape slash (/) in VBScript?

> ID：351172
> 
> 赞同：5
> 
> 时间：2008-12-08T22:26:18.240
> 
> 标签：vbscript, string

How do you escape the forward slash character (`/`) in VBScript? For example, in the following string:

```
bob = "VU administration/front desk" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-08T22:29:59.603

You don't escape it: it doesn't mean anything special in php or vbscript, and therefore doesn't need to be escaped. The only character you need to escape in vbscript is the double quote, which escapes itself:

```
MyString = "He said, ""Here's how you escape a double quote in vbscript. Slash characters -- both forward (/) and back (\) -- don't mean anything, even when used with common control characters like \n or \t.""" 
```

Similarly, in php a *backslash* escapes itself, but a forward slash doesn't need any special handling.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:14:47.710

This is so wrong I have to comment on it. The question is about VBScript, not PHP, so who cares what PHP does with a slash? In VB, the forward slash **/** does have special meaning. The character **/** represents **DOUBLE**. If your code editor displays this character as **DOUBLE** or you get an error about converting to **DOUBLE** when you don't mean to convert to **DOUBLE** then you probably need to fix something in your string.

For instance, VB treats the forward slash **/** in this query string as **DOUBLE** and the program would fail here because you cant convert select *replace(convert(char(10),pih.updateon,111),* from text to double.

```
Dim sQuery As String = "select replace(convert(char(10),pih.updateon,111),"/","-") as stopdate from myTable" 
```

The problem however will not likely be an issue with escaping a slash. Chances are you goofed somewhere else. In this case, if you typed the string correctly, it would look like this:

```
Dim sQuery As String = "select replace(convert(char(10),pih.updateon,111),'/','-') as stopdate from myTable" 
```

Hope that example helps understand where you might be going wrong if you are having issues with slashes.

Addendum: In VBScript and VB, the chief difference being VB is compiled and VBScript is interpreted, the syntax in this case is handled the same way.

d-bo

# lucene - 分页 Lucene 的搜索结果

> ID：351176
> 
> 赞同：19
> 
> 时间：2008-12-08T22:29:29.543
> 
> 标签：lucene

我正在使用 Lucene 在 Web 应用程序中显示搜索结果。我也在自定义分页以显示相同的结果。搜索结果可能从 5000 到 10000 或更多。有人可以告诉我分页和缓存搜索结果的最佳策略吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-08T22:49:27.787

我建议您不要缓存结果，至少不要在应用程序级别。不过，在具有大量内存的机器上运行 Lucene 操作系统可用于其文件缓存将有所帮助。

只需为每个页面使用不同的偏移量重复搜索。缓存引入了状态性，最终会破坏性能。我们有数百名并发用户搜索超过 4000 万份文档的索引。在不使用显式缓存的情况下，搜索在不到一秒的时间内完成。

使用`Hits`从搜索返回的对象，您可以像这样访问页面的文档：

```
Hits hits = searcher.search(query);
int offset = page * recordsPerPage;
int count = Math.min(hits.length() - offset, recordsPerPage);
for (int i = 0; i < count; ++i) {
  Document doc = hits.doc(offset + i);
  ...
} 
```

# c# - 启动 WPF 项目。建立自己的控制或购买？

> ID：351179
> 
> 赞同：1
> 
> 时间：2008-12-08T22:30:34.143
> 
> 标签：c#, wpf, visual-studio-2008

我正在启动一个 WPF 项目，该项目的复杂性相当复杂，并且会使用许多现代 UI，例如 Outlook 栏、网格、选项卡等……我在市场上环顾四周，没有控制套件太多。一些可用的是 Beta 或 CTP。其他的看起来并不太精致。然而其他人看起来很漂亮。

在这一点上，今天，我应该购买还是硬着头皮自己建造？人们使用第一代控制套件的体验如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T08:47:30.857

要记住的是 WPF 与 WinForms 非常不同，您可以做一些令人惊奇的事情，只需重新皮肤现有的控件，当您开始您的第一个 WPF 大型项目时，您还不了解 WPF 并且您不知道可能性和系统的陷阱。

我建议您在没有这些控件的情况下开始开发项目并稍后添加它们，这样当您开始添加这些控件时，您将更好地了解您需要哪些控件以及哪些控件是对现有控件的简单自定义。

如果您需要任何不是微不足道的东西，最好购买 - 但前提是您购买的组件是好的，因此请仔细评估。

[并在http://www.joelonsoftware.com/articles/fog0000000007.html](http://www.joelonsoftware.com/articles/fog0000000007.html)阅读 Joel 的“为 Not-Invented-Here Syndrome 辩护”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-09T05:16:10.470

WPF（以及一般的 XAML）的优点之一是它使自定义可用控件比在 WinForms 时代更容易。一切都取决于您需要的定制级别。如果您只需要调整标准控件的外观和感觉，您可以使用 Expression Blend 之类的工具来做到这一点，并且您不需要任何第三方的东西。如果您的团队中有一位优秀的设计师（或者您自己也是），那应该不是问题。如果您需要一些开箱即用的标准控件未提供的高级功能，我仍然建议您尝试自定义标准控件。通过调整 ControlTemplate、DataTemplate 等内容，您可以在多大程度上改变 WPF 中控件的外观和行为，这真是太神奇了，和/或通过子类化。此外 - 现在这只是个人意见 - 取决于第三方自定义控件通常很糟糕......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-08T22:36:43.757

通常，我使用 C# 进行编程，这样我就不必每天都“重新发明轮子”。只要提供的功能证明那里要求的价格合理，我建议使用货架组件。

话虽这么说……要小心，WPF 的存在时间还不够长，组件还没有成熟。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-09T08:21:40.813

我经常问自己的问题之一是，“我们在做什么？”。我特别会问这个问题，尤其是当我要做一些比购买第三方解决方案更耗时的事情时。

您是否从事制作第 3 方控制的业务？或者购买一个包裹并节省您宝贵的时间用于其他东西是否更具经济意义？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-29T07:46:08.983

我会说看看那里已经有什么。在我看来，我几乎涵盖了可用的那些，尤其是在 .NET 4 中，其中包括 DataGridView、Calendar 和 DateTimePicker（最后）。

但是，如果您还想查看一家名为 Infragistics 的公司的组件。它们非常强大，但它们的文档真的很烂！

# event-handling - 有没有一种简单的方法来检测 Linux/Xorg/Qt4/Kde4 中的鼠标或键盘活动？

> ID：351185
> 
> 赞同：4
> 
> 时间：2008-12-08T22:32:43.733
> 
> 标签：event-handling, keyboard, mouse, x11, xorg

有没有一种简单的方法来检测 Linux 或 Xorg 或 Qt4 或 Kde4 环境中的鼠标或键盘活动？显然不仅在特定窗口上，而且在整个 Xorg 桌面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-08T22:40:48.320

您可以使用 XScreenSaver 扩展 ( `man Xss`)。它可以使用以下函数为您提供此结构的值`XScreenSaverQueryInfo`：

```
 typedef struct {
       Window window;                /∗ screen saver window */
       int state;                    /∗ ScreenSaver{Off,On,Disabled} */
       int kind;                     /∗ ScreenSaver{Blanked,Internal,External} */
       unsigned long til_or_since;   /∗ milliseconds */
       unsigned long idle;           /∗ milliseconds */
       unsigned long event_mask;     /∗ events */
   } XScreenSaverInfo; 
```

> 空闲字段指定自在任何输入设备上从用户接收到最后一次输入以来的毫秒数。

我不知道这个只有 Qt 的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-10T18:55:20.333

寻找 expectk，它是开源的，将提供示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-15T22:03:24.360

尝试XRecord（抓取键和鼠标是另一种常见的解决方案，但它与其他应用程序抓取有问题）。

这是我前段时间使用的一些链接：http: [//mtoader.blogspot.com/2005/02/you-want-recording-x11-event-recording.html](http://mtoader.blogspot.com/2005/02/you-want-recording-x11-event-recording.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-08T22:39:11.193

我不熟悉 Qt4 或 KDE API 的内容。

但是一般而言，在任何 X11 系统上，键盘或鼠标输入仅传递到*活动*窗口，除非您调用底层`XGrabMouse`的 ,`XGrabKeyboard`等函数。

当然，一旦你这样做了，没有其他窗口可以接收这些输入事件，所以你必须确保你的程序有办法在你完成后释放鼠标和/或键盘输入。

# 3d - 从场景图中获取绝对位置和旋转？

> ID：351197
> 
> 赞同：1
> 
> 时间：2008-12-08T22:35:32.730
> 
> 标签：3d, scenegraph

所以我几次遇到这个问题：

我的 3D 场景图中有一些对象，它是其他对象的子对象。让我们称它们为 c（子）和 p（父）。

c 的位置是相对于 p 定义的。因此 c 可能有一个位置 (1,0,0) 但当然，由于 p 有一些其他位置，比如 (1,2,3)，它实际上并不是在我们世界的原始位置呈现，而是在 (2 ,2,3)。

现在让我们说由于某种原因我们想知道c在世界坐标中的绝对位置（或旋转，问题是一样的），这通常是怎么做的？

c 是否应该知道它的父级并能够查询该位置并将其添加到它自己的最终返回一个绝对位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-08T23:14:52.743

将孩子坐标系中的坐标转换为全局坐标系是实际渲染场景图所需的事情之一，所以这是一个合理的事情。

如何完成这将取决于您使用的图形库。通常，场景图中的每个节点都会包含一个矩阵，该矩阵将该节点的坐标系转换为全局坐标。该矩阵是通过将来自父节点的矩阵与从父坐标到子坐标的变换矩阵相乘来计算的，反之亦然，具体取决于事物的定义方式。

如果您有这样的矩阵，则可以通过将子坐标中的点乘以节点的矩阵来进行所需的计算。同样，这里的顺序很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T22:49:50.983

恕我直言，父对象更常见的是了解他们的孩子，而不是相反。哪个适合您取决于孩子是否需要知道自己的位置，或者是否需要知道它是否是其他一些外部树遍历算法。

另外，我认为旋转不能与平移一样处理。如果父对象旋转，它也会*平移*子对象的位置。因此，为什么大多数 3D 系统使用齐次坐标，这些坐标使用 (4x4) 变换矩阵，将旋转和平移结合在一个矩阵中。

# php - 使用zend框架（ZF）进行枚举管理？

> ID：351199
> 
> 赞同：3
> 
> 时间：2008-12-08T22:35:37.567
> 
> 标签：php, zend-framework, enumeration, preferences

是否有任何现有的项目或孵化器来管理用户可管理的选项列表？我们有 100 个列表（在我们的应用程序中填充最多的下拉列表），许多都很短 < 50 项，有几个有几百个项目，少数有数千 (<30,000) 个条目。

我们正在寻找的是一种基于数据库的结构和 UI，它允许用户对条目进行编辑。

我们查看了 Xyster 枚举，但它缺少任何 UI，需要进行工作才能使其具备 DB 功能。

用户偏好“模块”可能满足我们的许多需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-23T19:11:55.890

我不认为 Zend Framework 有你正在寻找的东西。您最好查看一些全栈框架，这些框架将根据模型/表定义自动生成类似 Rails 的脚手架管理页面。如果您不介意使用 PHP ，请尝试使用 PHP 或[Ruby on Rails](http://rubyonrails.org/)、[Django中的](http://www.djangoproject.com/)[CakePHP](http://cakephp.org/)、[Symfony](http://www.symfony-project.org/)或[QCodo 。](http://qcodo.com/)不要误会我的意思，Zend Framework 可以做你想做的事，但它需要相当多的自定义代码。

# java - 用 RMI 链接异常是个坏主意？

> ID：351205
> 
> 赞同：2
> 
> 时间：2008-12-08T22:37:41.960
> 
> 标签：java, exception-handling, rmi

抛出 RemoteExceptions 时使用异常链接是不是一个坏主意？我们有一个 RMI 服务器，它执行以下操作：

```
public Object doSomething() throws RemoteException
{
    try
    {
        return getData();
    }
    catch (CustomException ex)
    {
        throw new RemoteException(ex);
    }
} 
```

我收到 UnmarshallException 是由我的客户端中的 ClassNotFoundException 引起的。从好的方面来说，事实证明 CustomException 本身是导出的。不幸的是，这个人内心深处的另一个异常没有被导出，这就是 ClassNotFoundException 进来的地方。我认为层次结构是这样的：

RemoteException -> CustomException -> SQLException -> NotExportedException

我看到的问题是，即使我们可以保证导出 CustomException，我们也不能保证任何较低级别的异常。

因此，我倾向于从不使用 RemoteExceptions 的异常链接。相反，我认为我可能应该在服务器端记录堆栈跟踪，并抛出一个普通的、普通的 RemoteException，没有“原因”异常链接到它。以前有人处理过这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-08T23:05:40.687

您可以像这样修改远程接口，而不是将 CustomException 包装在 RemoteException 中：

```
interface Foo extends Remote {

  Object doSomething() throws CustomException, RemoteException;

} 
```

这里的原则是只有 RMI 运行时应该引发 RemoteExceptions；它们表示远程处理中的一些故障，而不是应用程序逻辑中的一些故障。事实上，具体的实现甚至不需要声明`RemoteException`.

但是，这并不能处理您的服务从某个第三方库捕获异常但又不想在 throws 子句中公开它的情况。

```
public Object doSomething() throws CustomException {
  try {
    return theirSvc.getData();
  } catch (ThirdPartyException ex) {
    throw new CustomException("Failed to obtain requested data.");
    // or: throw new CustomException("Failed to obtain requested data.", ex) ?
  }
} 
```

在这种情况下，我建议您不要创建“泄漏抽象”，其中将在客户端中创建依赖项，否则无需了解该第三方库。

通常，记录*和*抛出是不好的做法，因为会重复记录相同的错误。但在这种情况下，我认为这是有道理的，因为抛出的异常被传输到客户端；在客户端和服务器上都记录它可能很有用。所以 catch 块最终看起来像这样：

```
catch (ThirdPartyException ex) {
   String message = "Failed to obtain requested data.";
   log.error(message, ex);
   throw new CustomException(message);
 } 
```

这样，ThirdPartyException 依赖仅限于服务器，服务器日志包含适当的特定于实现的信息，并且错误被正确报告给客户端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-08T23:09:34.797

我们从源异常中捕获消息 + 整个堆栈跟踪，并将其作为远程异常的内容传递。这样您就可以获得所有堆栈详细信息，但您不必担心任何任何内部异常都是不可序列化的。

您永远不知道其他第三方中可能包含哪些其他对象（甚至您自己的“第一方”自定义异常！）

# sql - 附加字段实体的最佳数据库结构

> ID：351214
> 
> 赞同：6
> 
> 时间：2008-12-08T22:40:12.190
> 
> 标签：sql, database, postgresql, entity-attribute-value

我在数据库中有一个表（基于 Postgres），它就像面向对象编程中的超类。它有一个“类型”列，用于确定表中应存在哪些附加列（子类属性）。但我不希望该表包含所有可能的列（所有可能类型的所有属性）。

所以我决定制作一个表，包含“key”和“value”列（即“filename”=“/file”或“some_value”=“5”），其中包含对象的任何可能属性，不包括在内在超类表中。并且还制作了一个相关表来包含可用的“关键”值。

但是这种架构存在一个问题——默认情况下，“值”列应该是字符串数据类型，才能包含任何内容。但我不认为转换为字符串和从字符串转换是一个好的决定。绕过此限制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-08T23:45:57.470

您正在试验的设计是[Entity-Attribute-Value](http://en.wikipedia.org/wiki/Entity-attribute-value_model)的变体，它带来了很多问题和低效率。对于您正在做的事情，这不是一个好的解决方案，除非作为最后的手段。

fall888 描述的可能是一个更好的解决方案：为每个子类型创建一个“子类型”表。如果您有有限数量的子类型，这没关系，这听起来像您所拥有的。然后，您的子类型特定属性可以具有数据类型，并且`NOT NULL`如果合适，还可以具有约束，如果您使用 EAV 设计，这是不可能的。

子类型表设计的一个剩余弱点是，您不能仅仅因为超类表中的主行表明它应该存在，就强制子类型表中存在一行。但这比 EAV 设计引入的弱点要温和一些。

**编辑：**关于您对任何实体的评论的附加信息，是的，这是一种非常常见的模式。当心被称为“多态关联”的损坏解决方案，这是许多人在这种情况下使用的一种技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-08T22:45:09.730

这个怎么样...每个子类型都有自己的数据库表。基础/超级表只有一个 varchar 列，其中包含子类型 DB 表的名称。然后你可以有这样的东西......

```
Entity
------
ID
Name
Type
SubTypeName   (value of this column will be 'Dog')

Dog
---
VetName
VetNumber
etc 
```

如果您不希望您的（子）表名称是基表中的 varchar 值，您也可以只拥有一个 SubType 表，其主键将在基表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-08T22:44:13.273

唯一的解决方法（同时保留你的结构）是有单独的表：

```
create table IntProps(...);
create table StringProps(...);
create table CurrencyProps(...); 
```

但我不认为这是一个好主意......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-08T22:45:07.267

一种常见的方法是让键值表包含多个列，每个数据类型一个列，即 StringValue、DecimalValue 等。

只需知道您正在为不需要更改的数据库模式交易可查询性和性能。您还可以考虑 ORM 映射或对象数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-08T22:47:53.983

您可以拥有每个类型的键/值表。可用表需要对特定键/类型对的可用性进行编码，以指向正确键入的键/值表。

然而，对于基于行的关系数据库来说，这似乎是一种非常低效的架构。

也许您应该看一下面向列的关系数据库？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-09T11:07:44.177

感谢您的回答。我会更具体地解释一下我需要什么。需要编写一个博客+论坛网站，我一直在研究[WordPress DB 结构](http://codex.wordpress.org/Database_Description)。

强烈需要能够对任何类型的“对象”（例如博客条目或视频文件附件）进行评论。上述数据库结构非常易于扩展并满足我们所有的需求，这是选择它的原因。

但是现在改变它还为时不晚，因为它处于早期工程阶段。此外，我们的模型现在闻起来像一个完全基于树层次结构的数据库。现在我会接受[Bill Karwin 和 fall888 的答案](https://stackoverflow.com/questions/351214/optimal-db-structure-for-additional-fields-entity#351352)，但也许我走错了方向？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-31T14:34:51.983

关于用户能够向表中添加新字段：

我钦佩所有发表评论的人。

几年前我曾经对这种东西很感兴趣，但最近写的代码很少（除了一点点PHP和MYSQL）。

如果你想继续前进，我认为这很好——你最终可能会得到一些新的东西。

很抱歉给这个计划泼冷水——我很佩服你的努力。我个人的信念是，如果你在这个方向上走得足够远，你最终会得到一个比 SQL 解释更多自然语言的系统。（大约在 1970 年，SQL 实际上拼写为 Sequel，它实际上代表“结构化英语查询语言”，但是在 1970 年代他们将其标准化之后——我想有人说 Oracle 是第一个商业实现，19079 年，“英语”得到了放弃了，因为我猜他们认为这只是英语的一小部分。

我在这方面已经筋疲力尽了，因为我没有找到工作。如果没有一份轻松的工作来支付账单，我可以尝试这些想法，那么专注于这个领域有点困难。

向所有人致以最良好的祝愿。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-31T14:35:55.057

抱歉，我在上面写了 19079，我的意思是 1979 年。Oracle 获得了他们的第一份合同，为 CIA 编写数据库。

# wpf - 我应该忽略 WPF 生成代码的 InterfaceMethodsShouldBeCallableByChildTypes 吗？

> ID：351228
> 
> 赞同：2
> 
> 时间：2008-12-08T22:44:51.947
> 
> 标签：wpf, fxcop

将 FxCop 1.36 用于具有尚未修改的单个窗口的 WPF 应用程序时，我收到 InterfaceMethodsShouldBeCallableByChildTypes 错误，其中包含以下详细信息：

```
 Target       : #System.Windows.Markup.IComponentConnector.Connect(System.Int32,System.Object)  (IntrospectionTargetMember)
    Resolution   : "Make 'MainWindow' sealed (a breaking change if 
                   this class has previously shipped), implement the method 
                   non-explicitly, or implement a new method that exposes 
                   the functionality of 'IComponentConnector.Connect(int,
                    object)' and is visible to derived classes."
    Help         : http://msdn2.microsoft.com/library/ms182153(VS.90).aspx  (String)
    Category     : Microsoft.Design  (String)
    CheckId      : CA1033  (String)
    RuleFile     : Design Rules  (String)
    Info         : "Explicit method implementations are defined with private 
                   accessibility. Classes that derive from classes with 
                   explicit method implementations and choose to re-declare 
                   them on the class will not be able to call into the 
                   base class implementation unless the base class has 
                   provided an alternate method with appropriate accessibility. 
                   When overriding a base class method that has been hidden 
                   by explicit interface implementation, in order to call 
                   into the base class implementation, a derived class 
                   must cast the base pointer to the relevant interface.
                    When calling through this reference, however, the 
                   derived class implementation will actually be invoked,
                    resulting in recursion and an eventual stack overflow."
    Created      : 08/12/2008 22:26:37  (DateTime)
    LastSeen     : 08/12/2008 22:41:05  (DateTime)
    Status       : Active  (MessageStatus)
    Fix Category : NonBreaking  (FixCategories)
} 
```

这应该被忽略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-09T01:23:39.100

取决于您期望继承人做什么。

如果你不期望这个类被继承，那么它应该被密封并且问题消失了。

如果您期望它被继承，那么您正在利用继承类的能力来覆盖接口方法并仍然调用它们（即`base.methodname()`）。如果这是您的意图，那么您可以忽略该警告。

但是，这**不是**可继承类的预期行为，因此您应该公开接口（即隐式接口而不是显式接口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T08:52:30.083

忽略它，这是每个 WPF 应用程序中的标准代码，您不会看到有人抱怨 net 能够从派生类调用 IComponentConnector.Connect - 所以它可能是安全的。

一般来说，我认为您应该将 FxCop 输出作为必须仔细考虑的建议来处理，过去我从 FxCop 那里得到了很多不好的建议。

# c++ - 将 hdc 内容复制到位图

> ID：351236
> 
> 赞同：4
> 
> 时间：2008-12-08T22:48:16.103
> 
> 标签：c++, copy, bitmap, gdi

如何将 HDC 的内容复制到位图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-08T22:55:09.117

在我的脑海中，我认为你需要：

*   创建与源 DC 兼容的新 DC。将此称为内存 DC。
*   创建正确大小的新位图。
*   选择位图放入内存 DC。
*   BitBlt 源 DC 到内存 DC。
*   位图现在应该包含源 DC 的副本。

我在家所以不能给你任何代码，所以我希望这足以让你开始。Code Project 上有一个很好的 GDI 部分。

[http://www.codeproject.com/KB/graphics/](http://www.codeproject.com/KB/graphics/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-08T22:54:55.093

[这里](http://www.codexxi.com/MyBlocks.html#atBmpTest)有一段很好的示例代码可以做到这一点（除其他外）。

我以前（很多个月前）使用过类似的技术，但手头没有代码。

# vb.net - VB .Net 中是否可以进行多重继承？

> ID：351242
> 
> 赞同：16
> 
> 时间：2008-12-08T22:50:26.367
> 
> 标签：vb.net, inheritance, multiple-inheritance

VB .Net 中是否可以进行多重继承？如果是这样，语法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-08T22:54:20.290

简短的回答：没有

稍微长一点的答案：是的，如果你继承多个接口和一个基类。由于这通常是 MI 的原因（您想实现多个接口），因此通常就足够了。但是，在“真正的” MI 有用的极少数情况下，.NET 会阻止您这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-08T22:55:01.660

在 VB.Net 中可以像在 C# 中一样以受限的方式：通过接口。由于接口本质上是一个纯抽象基类，因此您可以从任意数量的接口和一个真实类继承。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-17T06:11:50.997

您可能想要做的是真正的组合或聚合（请参阅[此处了解设计模式](http://www.c-sharpcorner.com/uploadfile/pcurnow/compagg07272007062838am/compagg.aspx)）。也许您正在定义一种行为。您始终可以在基类中实现接口 SomeInterface，拥有 SomeInterface 类型的成员（它可以是实现 SomeInterface 的任何类，因此可以让代码执行），在成员构造函数中传递对基类的引用必要时拥有它（如果这样做，请尝试添加另一个接口来定义回调，基类将实现它，子类将其作为成员变量类型）。使用对成员类的调用来实现 SomeInterface。这样代码是在另一个类中实现的，这使得它易于维护，但您并没有进行多重继承。

组合背后的想法是，引擎不是汽车，而是汽车有引擎。汽车需要一个引擎，但不需要知道整个引擎单元是如何工作的，只需要知道如何与它交互即可。所以引擎不应该从汽车继承。但是让汽车实现引擎是愚蠢的。因此，汽车将发动机作为整个汽车的成员，但作为一个对象。这辆车有一个发动机作为其组成的一部分。

听起来你正在做的更像是一种行为，就像鸭子对象有嘎嘎的行为，但橡皮鸭是鸭子但不嘎嘎但吱吱叫。所以它们与野鸭物体不同，但两者都有许多其他的鸭子特征。所以你想要一个庸医的接口，每个接口都以不同的方式实现。但是很多鸭子都会为这个界面嘎嘎，所以你不想每个都写嘎嘎。这就是您使用组合来实现 quack 行为接口的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T04:39:57.977

据我所知，VB.net 通常不支持多重继承，但您可以通过使用接口来实现一种多重继承（使用“Implements”而不是“Inherits”）：

```
Public Class ClassName
    Implements BaseInterface1, BaseInterface2

End Class 
```

这适用于类，但我希望有一个接口继承一些基本接口。像这样的东西：

```
Public Interface InterfaceName
    Implements BaseInterface1, BaseInterface2

End Interface 
```

但是接口不允许使用“Implements”关键字（当然，这是有道理的）。我尝试使用一种我从 Java 中知道的抽象类：

```
Public MustInherit Class InterfaceName
    Implements BaseInterface1, BaseInterface2

End Class 
```

但是现在我需要在 InterfaceName 类中实现 BaseInterface1 和 BaseInterface2 中定义的方法。但是由于 InterfaceName 也应该是一个接口，所以我不想在该类中实现这些方法。

在 C# 中，你可以很容易地做到这一点：

```
public interface InterfaceName: BaseInterface1, BaseInterface2 {} 
```

# vb.net - 注册 COM+ 应用程序代理时出错

> ID：351243
> 
> 赞同：4
> 
> 时间：2008-12-08T22:50:29.237
> 
> 标签：vb.net, vb6, com+, dcom

我已经导出了一个 COM+ 应用程序代理，它可以生成 MSI 和 CAB 文件，并且我已经成功地将它们安装在几个不同的 Win XP 和 Vista 机器上。但是，我有一个不能很好玩的 WinXP 机器。当我尝试运行 MSI 时，它给了我以下错误消息：

“注册 COM+ 应用程序时出错。”

它停在那里，甚至没有达到在 COM+ 中创建应用程序的程度。关于在哪里看的任何想法？我猜某些依赖项是 MIA、禁用或配置错误，但我似乎无法弄清楚魔术酱中缺少什么。

此外，如果你们中的任何人有手动注册客户端应用程序代理的经验，那也会很好。

和平|露水

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-27T18:51:23.940

不幸的是，这个特定的错误可能有很多原因，主要是与 IT 相关的。根据我的经验，最常见的是权限问题或 COM+ 安装损坏。

我遵循几个基本步骤来解决此一般错误。

首先，确保您可以查看框上的 COM+ 应用程序（在组件服务中）。有时您会在尝试导航到 COM+ 应用程序时遇到错误。搜索错误消息通常会导致 Technet 文章描述如何修复错误。

如果您可以查看 COM+ 应用程序，您将需要再次检查是否已经安装了以前的代理。代理不会自动升级——您必须在应用新代理之前删除旧代理。

如果您有以前的代理，则位于“Common Files”文件夹下的文件可能未被正确删除。

使用[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)诊断任何权限错误。我见过其他安装程序删除了安装 COM+ 代理所需的安全权限。

您还可以生成 MSI 安装过程的日志。我通常不觉得这很有帮助，但这里是命令行语法：

```
msiexec /i MyProxy.msi /l*v ProxySetup.log 
```

通过这种技术组合，我一直能够帮助我们的客户服务团队解决数百个代理安装问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-11T22:35:55.613

帮助不大，但请尝试查看事件日志以获取更多信息。

# mysql - MySql Null DateTime 和 MS.net 玩得不好

> ID：351244
> 
> 赞同：0
> 
> 时间：2008-12-08T22:50:41.280
> 
> 标签：mysql, .net, datetime, linq-to-sql, null

继承人的问题。

我有一个包含日期的表（mySQL），其中一些为空。我知道我可以使用 DateTime？或 Nullable 以允许空值，但我不确定在哪里设置它。

我试过的：

我在 dblm 中构建了这个类。date 属性具有以下属性集：

```
Nullable : True
Server Data Type : DateTime
Type : NUllable<DateTime> 
```

这些设置允许构建我的代码。当我调试它时抛出这个异常： System.NullReferenceException: Object reference not set to an instance of an object..

如果我尝试使用这些属性：

```
Nullable : True
Server Data Type : NUllable<DateTime>
Type : NUllable<DateTime> 
```

我得到与上面相同的异常。

其他不起作用的方法：

```
Nullable : True
Server Data Type : DateTime?
Type : NUllable<DateTime>

Nullable : True
Server Data Type : DateTime?
Type : DateTime? 
```

我正在使用 .net 的 3.5 框架

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-08T22:57:14.073

我记得mysql 的 ADO.NET 驱动程序有一个[问题，它在使用空日期/时间字段时表现不佳。](http://www.devnewsgroups.net/group/microsoft.public.dotnet.framework.adonet/topic47934.aspx)

甚至 IsDBNull 也在日期/时间为空的字段上引发异常。

这可能仍然是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-11T17:54:45.853

已修复 - 原来是连接到 mySQL DB 的连接字符串存在问题。

我也不知道可以使用服务器资源管理器将表放入 DBML。我需要做的就是连接到数据库，然后将表放到 DBML 上。

# excel-2007 - Excel countif 拉开一个单元格做不同的事情

> ID：351257
> 
> 赞同：0
> 
> 时间：2008-12-08T22:56:29.270
> 
> 标签：excel-2007

Excel 2007

我有一排带有数字和字母变化的单元格（这都意味着什么......不是随机的。）

它基本上是一个时间表。如果他们请病假，则输入 S，如果他们请部分病假，则输入 PS。问题是他们也投入了工作时间。他们把它放在这种格式：（数字）/PS。

现在，如果只是字母，我可以做 =countif(range,"S") 来跟踪有多少 s / ps 单元格。如果它们是 PS，我将如何跟踪它们也有一个由斜线分隔的数字，然后是 PS.... 我还需要能够使用该数字来添加到总数中。是否有可能或者我必须格式化不同的东西才能跟踪所有这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-05T20:38:03.797

我对此的快速看法是：

*   将单元格值传递给 CSTR 函数，因此无论输入什么，您都将使用字符串。

*   解析信息。查找 S、PS 或您认为有效的任何其他代码。如果您需要查看部分字符串，请使用 Left 或 Right 函数。

*   通过测试 ascii 值或尝试 CINT 函数来检查数字，该函数仅在字符串可以转换为整数时才有效。

如果您可以显示带有数字和字母变化的单元格样本，我可以为您提供更多帮助。希望这行得通。

——迈克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-24T01:58:08.227

假设这类似于您的数据的样子：

```
 A B C D    E 
1   1 2 S 4/PS 8 
```

...那么你可以这样做：

1-添加一列，该列仅使用 COUNTIF 函数总计“S”条目。2-在每个真实数据行下方添加一个隐藏行，该行将仅在每列中使用此功能复制 PS 条目的数字部分：

```
=IF(RIGHT(B1,2)="PS",IF(ISERROR(LEFT(B1,LEN(B1)-SEARCH("/",B1)-1)),"",INT(LEFT(B1,LEN(B1)-SEARCH("/",B1)-1))),"") 
```

3- 在右侧添加另一列，通过对步骤 2 中的隐藏行求和来汇总“PS”条目。 3- 添加另一列，通过仅对数据行求和来汇总所有内容。这将自动忽略文本条目。4-有一个总计列，将这三列加起来

如果您不想看到“S”和“PS”总列，当然可以将它们隐藏起来。

所以最后，工作表看起来像这样：

```
 A B C D    E  F  G  H  I  J
1   1 2 S 4/PS 8     1  4  11 16
2         4        <--- hidden row 
```

HTH...

# apache-flex - 如何使 Flex 文件上传在 firefox 和 safari 上工作？

> ID：351258
> 
> 赞同：9
> 
> 时间：2008-12-08T22:56:30.877
> 
> 标签：apache-flex, firefox, file, upload

我有一个将文件上传到服务器的 flex 应用程序。服务器需要身份验证才能上传。在 IE 中，上传工作正常。但是在 FF 和 Safari 中，它不会上传。我见过到处都有同样问题的人，但没有答案。现在不要让我失望 stackoverflowers。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T02:29:09.170

至少在 Firefox 中的问题是，当您调用 FileReference.upload() 时，会话 cookie 不会在请求中发送。您需要做的是将身份验证令牌添加为表单变量或查询字符串。这是 Java 中的一个示例，其中会话 cookie 称为“jsessionid”

```
var request : URLRequset = new URLRequest( uploadUrl + ";jsessionid=" + jsessionid); 
```

您可以使用 Javascript 和 ExternalInterface 从 cookie 中解析 jsessionid 以调用 Javascript 函数。或者在您进行身份验证后，您可以让 Flex 调用返回当前 sessionID 的后端方法。

相关的 Flex 错误在这里：

[http://bugs.adobe.com/jira/browse/FP-201](http://bugs.adobe.com/jira/browse/FP-201)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-26T13:44:40.337

我在尝试自己寻找答案时发现了这个问题。解决方案相当简单。

基于其他人链接的[Flash 播放器错误](http://bugs.adobe.com/jira/browse/FP-201)以及该页面上的评论，我决定将会话标识符附加到我的上传 URL 并试一试。这真的很容易！

为了使它工作，我首先添加了一个名为 sessionParams 的 flashVar 参数。这使我可以将任何我想要的字符串作为我的会话标识符传递给 Flash 播放器，然后它会被附加到用于上传的 URL 中。

```
//sessionParams - resolves firefox upload bug
public var sessionParams:String = "";

//...

public function initApp():void{
    sessionParams = Application.application.parameters.sessionParams;
} 
```

在我的情况下，我在 ColdFusion 上启用了 java 会话，所以`sessionParams`在传递到 Flash 播放器之前，我的设置如下：

```
<cfset flashVars = "sessionParams=#urlEncodedFormat('jsessionid=' & session.sessionid)#" /> 
```

不要忘记转义特殊字符，如 =、& 等（我已使用 urlEncodedFormat 完成），以便将它们视为“sessionParams”参数值的一部分，而不是指示其他参数的断点。您正在当前 URL 中嵌入未来 URL 信息。

然后，在您的上传代码中使用 sessionParams 值。这是我如何设置的片段：

```
// Set Up URLRequest
_uploadURL = new URLRequest;
_uploadURL.url = _url + "?" + _sessionParams;
_uploadURL.method = "GET";
_uploadURL.data = _variables;
_uploadURL.contentType = "multipart/form-data"; 
```

变量名称不同（但相似），因为这是可重用类的一部分。

希望对您有所帮助。如果没有，请告诉我，我会尝试提供更多代码或解释来帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-05-29T02:03:05.873

我解决了这个问题。使用 flex 上传文件将适用于所有浏览器。在 J2ee 应用程序中，

在 web.xml 中注释安全约束或使 fileupload.do URL 不受保护，您将在其中放置实际代码。

```
<security-constraint>
    <display-name>Senusion Security Constraint</display-name>
    <web-resource-collection>
        <web-resource-name>Un Protected Area</web-resource-name>
          <url-pattern>/fileupload.do</url-pattern>
      </web-resource-collection>
</security-constraint> 
```

希望这对下一位读者有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-04T11:38:50.817

FlashPlayer 10 提供了一个新的 Filereference API，可以提供很多帮助。这是描述它的博客条目：http: [//www.flexpasta.com/index.php/2010/02/21/uploading-files-with-firefox-solution/](http://www.flexpasta.com/index.php/2010/02/21/uploading-files-with-firefox-solution/)。

实际上，在 Flash 10 中，对 flash.net.FileReference 的增强可以在文件上传之前读取文件的内容。这意味着文件可以以不同的方式上传，然后可以在 Flash 9 中完成。以下示例显示文件上传是多么容易，并且不依赖于 SSL、Firefox、IE、Chrome 等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-03-17T20:36:09.700

我设法使用 flex 和 java web 过滤器解决了这个错误

**弹性代码：**

```
var urlVars:URLVariables = new URLVariables();
urlVars.jsessionid = sessionID;

var uploadUrl:String = "http://localhost:8080/mywar;jsessionid="+sessionID;
uploadUrl += "?"+getClientCookies(); //put all client cookies on the query string 
var urlRequest:URLRequest = new URLRequest(uploadUrl);
urlRequest.method = URLRequestMethod.POST;
urlRequest.data = urlVars;

//will go first time and get the cookies set see flex docs  
var testUpload:Boolean = true; 
fileRef.upload(urlRequest,"Filedata",testUpload); 
```

**JAVA代码：**

```
package com.mywar.fileupload;

import java.io.IOException;
import java.util.Enumeration;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * @author orasio - spieler
 * This filter comes to solve the Firefox ,Chrome and SAFARI file upload issue
 * The problem was that the file uploaded by the flex 
 * FileReference came with a different session and no cookies
 * To solve this problem do the following : 
 * 
 * 
 * don't forget to add this filter to the web.xml file
 */
public class FileUploadFilter implements Filter {

    private static final String CONTENT_LENGTH = "content-length";
    private static final String UPLOAD_SITE_PATH = "/";
    private static final String JSESSIONID = "JSESSIONID";

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, 
                 ServletResponse response,
                 FilterChain filterChain) 
                 throws IOException, ServletException {
        if ((request instanceof HttpServletRequest) 
         && (response instanceof HttpServletResponse)) {
            HttpServletRequest httpRequest = (HttpServletRequest) request;

            //httpRequest.getHeader("user-agent");  //Shockwave Flash
            String contentLength = httpRequest.getHeader(CONTENT_LENGTH);
            boolean isFlexTest = (contentLength!=null 
                      && Integer.parseInt(contentLength)==0); 
            if(isFlexTest){ 
               HttpServletResponse httpResponse = 
                                            (HttpServletResponse) response;
               setAllClientCookie((HttpServletResponse)response, httpRequest);
               PrintWriter out = httpResponse.getWriter();
               out.println("OK");
               out.close();
               return;
            }
        }
        filterChain.doFilter(request, response);
    }

    /*
     * write all cookies back to the flex test response 
     */
    @SuppressWarnings("unchecked")
    private void setAllClientCookie(HttpServletResponse httpResponse,
                    HttpServletRequest httpRequest) {
        Enumeration<String> parameterNames = 
                (Enumeration<String>)httpRequest.getParameterNames();
        while (parameterNames.hasMoreElements()) {
           String cookieName = (String) parameterNames.nextElement();
     //since we get IllegalArgumentException: Cookie name "JSESSIONID" is a reserved token

           if(!cookieName.contains(JSESSIONID)) { 
              Cookie cookie = 
                          new Cookie(cookieName, httpRequest.getParameter(cookieName));
              cookie.setPath(UPLOAD_SITE_PATH);
              httpResponse.addCookie(cookie);
           }
        }
    }

    @Override
    public void destroy() {
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T06:36:36.437

我遇到了同样的问题。文件上传在除Firefox之外的所有浏览器上都有效。在 Firefox 中，上传文件时抛出错误#2038。该应用程序使用了 SSL。在我的情况下，即使上传请求也不是从 firefox 生成的，我可以通过在 firebug 的 Net 面板中看到来确认，上传 URL 没有被点击。这意味着，可能是 Firefox 中的 flash 运行时阻止了上传请求。但是，当我在 IE 中运行应用程序时，在 IE 中安装了应用程序的自签名证书，文件上传模棱两可，当然令人惊讶的是，开始在 Firefox 中工作。所以首先请检查请求是否已到达服务器或被阻止客户端。

谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-09T21:49:02.640

看起来这很老了，但我最近也遇到了这个问题。我在 Flex + 身份验证的 Rails 设置下的修复（远非最佳）是关闭上传脚本上基于会话的身份验证。

因为我确实**想要**至少基本身份验证，所以我存储了用户登录时使用的用户名和密码，并编写了代码以在 Rails 端手动发送/验证。我永远无法让“jsessionid”破解工作，因为 Flash 无法访问浏览器会话。

我希望这可以帮助某人节省一些时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-09T23:08:19.267

这是一个实际的[Flash 播放器错误](http://bugs.adobe.com/jira/browse/FP-78)。也许这个链接会给你一些想法。

你在服务器端有什么？也许您可以在请求中添加 sessionid 作为参数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-01T08:27:03.593

有时即使我们通过 URL 发送 cookie，它也不起作用。这是因为 Flex 正在阻止文件上传请求。

要取消阻止它，您必须安装 SSL 证书，然后尝试。

如果有人有任何其他答案，请告诉我。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-06T14:07:59.360

由于我正在为 Facebook 构建 Flash 应用程序，因此我无法访问 jsessionid。

我通过**上传到 HTTPS 地址而不是 HTTP**解决了这个问题。

给我带来麻烦的一件事是，在 OSX Firefox 和 Safari（不是 Chrome）中， (FileReferenceInstance).type 为空，并且 (FileReferenceInstance).name 带有完整的扩展名 (myimage.jpg)。

# .net - HttpWebRequest 不会序列化

> ID：351265
> 
> 赞同：2
> 
> 时间：2008-12-08T22:58:44.023
> 
> 标签：.net, httpwebrequest, serialization

尝试序列化 HttpWebRequest 时出现以下错误

> 在程序集 'System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 中键入 'System.Net.KnownHttpVerb' 未标记为可序列化。

使用 .Net 框架 2.0

这是我的班级拥有的属性之一。这是序列化它的要求。

HttpWebRequest 被标记为可序列化，因此它应该序列化

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-08T23:00:57.187

好吧，如果其中一个包含的对象被标记为不可序列化，我相信你使用默认的序列化程序“不走运”。

如果可能的话，我建议改为使用用于实例化 Web 请求的参数并将其序列化。编写自定义序列化器/反序列化器来重构不合作的对象。

[编辑：这里](http://msdn.microsoft.com/en-us/magazine/cc163902.aspx)有一篇相当不错的文章。

EDIT2：事实上，经过一番谷歌搜索，这似乎是您唯一的选择，因为 HttpWebRequest 上的 Serializable 属性在 .net 2.0 中已被标记为过时。有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/netframework/aa497288.aspx#System.Net)（搜索 HttpWebRequest）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-08T23:32:31.320

System.Net.HttpWebRequest 序列化在 .NET 2.0 中被标记为过时。

官方文档在这里：

> [http://msdn.microsoft.com/en-us/library/aa497288.aspx](http://msdn.microsoft.com/en-us/library/aa497288.aspx)

从应用程序的角度来看，这是最好的结果。HttpWebRequest 实例的主要部分是 IO 状态，通常不能直接再水化。

正如@Andrew-Rollings 建议的那样，改为实现自定义序列化来存储/恢复您的请求参数，然后从头开始重新创建 HttpWebRequest 实例。

# jquery - 如何在 jQuery .animate 完成之前停止链接被跟踪？

> ID：351268
> 
> 赞同：10
> 
> 时间：2008-12-08T23:01:29.010
> 
> 标签：jquery, animation

**背景故事：**我正在为自己设计一个投资组合网站。在其主页上，徽标位于前面和中间，但在子页面上，徽标位于顶部和右侧。

我认为使用 jQuery 为徽标从页面中间到角落的移动设置动画会是一个很好的视觉提示（单击指向子页面的链接时）。

**问题：**子页面加载速度快于动画完成。

**问题：**有什么方法可以暂停链接跟踪，直到动画完成？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-09T06:55:08.977

您还需要返回 false 或阻止锚点单击事件的默认操作，否则浏览器只会跟随 href。无论如何都同意现场演示优于 1000 字。

[在此处查看现场演示](http://pastebin.me/493e1605948d4)

例如

```
 $('#myLink').click( function(ev){
   //prevent the default action of the event, this will stop the href in the anchor being followed
   //before the animation has started, u can also use return false;
   ev.preventDefault();
   //store a reference to the anchor tag
   var $self=$(this);
   //get the image and animate assuming the image is a direct child of the anchor, if not use .find
   $self.children('img').animate( {height:"10px"}, function(){
       //now get the anchor href and redirect the browser
       document.location = $self.attr('href');
   });
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T23:12:58.160

您应该能够使用此处列出的动画功能：[（jquery doc）](http://docs.jquery.com/Effects/animate#paramsdurationeasingcallback)

它表示在动画完成之前不应执行回调。

> callback （可选）函数
> 动画完成时执行的函数，对每个动画元素执行一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T18:36:21.527

以防万一有人对这种变化感兴趣...

我希望**链接本身与动画图像分开**，我对代码进行了一些修改，现在我可以正常工作了。

javascript/jquery：

```
print(" $(function()
    {
        $('#myLink').click( function(ev){
            //prevent the default action of the event, this will stop the href in the anchor being followed
            //before the animation has started, u can also use return false;
            ev.preventDefault();
            //store a referene to the anchor tag
            var $self=$('img#myImage');
            var $link=$('a#myLink');
            //get the image and animate
            ($self).animate( {height:"10px"}, function(){
                //now get the anchor href and redirect the browser
                document.location = $link.attr('href');
            });
        });
    });
"); 
```

标记：

```
print("<body>
<a id="myLink" href="http://www.google.co.uk">LINK</a>

<img id="myImage" src="http://www.derekallard.com/img/post_resources/jquery_ui_cap.png"/>
</body>"); 
```

也就是说，我可能会丑化代码。所以我在那里道歉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-27T16:01:10.947

无需编写任何函数，只需使用内置的 jQuery 事件方法 event.preventDefault() （这可能在发布此问题时不可用）。

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-08T23:13:09.907

试试这个：

```
 $("#thelink").click( function(){
  $(this).animate( { animation stuff }, "medium", "easeboth", function(){
    document.location = $(this).attr('href');  
  });
 }); 
```

或者当链接不是动画而是图像时（如您的问题所述）：

```
 $("#thelink").click( function(){
  $("#theImg").animate( { animation stuff }, "medium", "easeboth", function(){
    document.location = $("thelink").attr('href');  
  });
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-09T08:51:15.793

我知道你可能不想听到这个，但你正在做的事情在可用性方面是一个很大的禁忌。

你想创造一个很酷的效果，这样做会减慢你的用户体验。如今，网络访问者非常忙碌，当他们点击链接时，他们希望尽快到达那里。在此过程中，您将失去一定比例的访问者，并且会为了一点视觉糖果而加剧许多其他访问者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-12-21T13:59:03.333

只需在回调函数中返回 false。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T22:03:07.747

不是每个网站都是一样的。在投资组合网站上——在像谷歌搜索这样的工具上，几乎可以接受没有动画和界面“酷”，如果每次我们可以使用搜索栏之前都动画徽标，它会被延迟。

# python - 函数集用什么来检查两个对象是否不同？

> ID：351271
> 
> 赞同：6
> 
> 时间：2008-12-08T23:02:23.533
> 
> 标签：python, methods, set

简单代码：

```
>>> set([2,2,1,2,2,2,3,3,5,1])
set([1, 2, 3, 5]) 
```

好的，在结果集中没有重复项。如果列表中的对象不是 int 而是我定义的对象怎么办？它检查什么方法来了解它们是否不同？我用一些对象实现了 __eq__ 和 __cmp__ 但**set**似乎没有使用它们：\

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-08T23:08:24.893

根据[集合文档](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset)，元素必须是可[散列](http://docs.python.org/glossary.html#term-hashable)的。

如果一个对象的哈希值在其生命周期内永远不会改变（它需要一个`__hash__()`方法），并且可以与其他对象进行比较（它需要一个`__eq__()`or`__cmp__()`方法），那么它就是可哈希的。比较相等的可散列对象必须具有相同的散列值。

**编辑**：感谢罗伯托添加了正确的 Hashable 定义

# c# - 最佳实践：何时不/使用部分类

> ID：351272
> 
> 赞同：41
> 
> 时间：2008-12-08T23:02:28.823
> 
> 标签：c#, coding-style, partial-classes

一段时间以来，我一直在使用部分类修饰符，以便将辅助类放在自己的文件中。

今天我们来了一个新人，他说与他合作的最后一个团队不允许为此使用分部类，因为修改单独文件中的帮助程序类会导致主要分部类文件因更改而失控. 此外，他们只被允许在主类中放置一个辅助类作为最后的手段，这样一切都保持解耦。

你怎么看？使用这样的部分类有什么问题还是归结为偏好？

例如，我通常有这样的事情：

*   主类.cs
*   MainClass.Helper1.cs
*   MainClass.Helper2.cs

...

```
// Inside of MainClass.cs I have code like this:

public abstract partial class MainClass
{
    // ...
}

// Then in the MainClass.Helper1.cs I have:

partial class MainClass
{
   private class Helper1
   {
       // ...
   }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-08T23:50:17.353

部分类*主要*用于代码生成器，例如设计人员-但我使用您引用的方法-特别是当对象实现多个（非平凡）接口时，我发现将每个接口实现分解为 1 个文件很有用. 我通常也有一个静态方法的文件，它们通常与实例方法有足够的不同以保证分离。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-08T23:10:29.210

就个人而言，我看不出使用这样的部分类有什么问题，但这只是我自己的看法。唯一可能看起来像“坏习惯”的事情是将您的类命名为“Helper1”和“Helper2”（但这可能只是一个用于澄清的示例）。

如果您正在使用这样的部分类，请查看（免费）插件[vsCommands](http://mokosh.co.uk/page/VsCommands.aspx)（适用于 Visual Studio 2008），它可以非常轻松地在解决方案资源管理器中对文件进行分组（就像设计器文件一样），而无需编辑项目文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-08T23:10:36.030

简短的回答：如果所有类都是您的代码，那么您实际上并不需要帮助类，这会使您对部分的需求无效。

长答案：我不确定是否有任何事情表明您的做法明显是错误的。根据我的经验，如果你有几个不同的文件组成了整个班级，你确实需要一个很好的理由这样做，因为：

1.  部分类在一定程度上降低了可读性
2.  如果您的类中有多个辅助类，则可能是设计不佳的症状，我认为我从未遇到过被迫为自己创建的类编写辅助类的情况。

但是，我认为使用部分类的最佳理由是代码生成，您希望能够在不丢失自定义工作的情况下重新生成文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-08T23:09:49.103

我不是部分课程的忠实粉丝，我自己也不使用它们。

有一次我确实发现它们很有帮助并且可以使用，但是当您想向 LINQ to SQL 设计器代码添加一些东西时，除此之外，我发现您是否只是为了它而将代码分散到不同的文件中，它会使阅读和管理变得非常困难。

也许如果您将类拆分为许多文件，那么您的类可能正在做很多事情......只是一个想法:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-09T00:10:51.600

我其实也做过同样的事情。如前所述，对部分类的解密有轻微的可读性影响。

*解耦是我喜欢*这个解决方案的主要原因。私有内部类与其他所有东西的耦合要少得多，因为没有其他东西可以看到或使用它（尽管他们可能在谈论它访问父类的私有数据的潜力，这通常是一个坏主意）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-28T02:19:14.417

根据我的经验，普通类和部分类之间没有区别。如果您的设计需要大量的类结构或实现更多接口，那么选择部分类。无论如何两者都是一样的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-08T23:42:23.420

我认为，如果嵌套类足够大，以至于您觉得需要将它们拆分为自己的文件，那么它们可能不应该是嵌套类。改为让它们成为与 MainClass 相同命名空间的内部成员。

部分类实际上只存在于支持代码生成器，并且使用它们将程序员编写的代码分解为可管理的块是设计不佳的一个指标。

有关不使用部分类的有趣示例，请参阅[这篇文章。](http://www.informit.com/articles/article.aspx?p=437736)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-18T10:39:45.413

由于上述类似的原因，我通常从不使用部分类。

但！虽然并不频繁，但我有时会发现对一个类（通常是外部类）进行广泛的单元测试会导致巨大的单元测试类。将单元测试类拆分为部分类使其更容易理解和理解。

类似于从多个接口继承时的分组思想，单元测试可以针对功能进行分组。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-09T00:36:16.370

我认为最好记住您的工具的默认行为是创建耦合而非内聚的低级形式；并以怀疑的态度看待它，并覆盖它，除非出于上面列出的某些特定原因它是有意义的。但这不是好的默认行为。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-09T04:33:58.637

大多数情况下，我只在代码生成中使用部分类，因此我可以将我的类的行为扩展到需要一些自定义且不包含在代码生成中的分离类上。

# snmp - 更新现有陷阱的参数并在陷阱中部分发送参数

> ID：351274
> 
> 赞同：1
> 
> 时间：2008-12-08T23:03:00.833
> 
> 标签：snmp, mib

我们创建了应用程序暴露的陷阱（通知）列表，并在 MIB 文件中对其进行了描述。

今天，我们发现自己需要更新 MIB 并向陷阱添加一个额外的（*可选*）参数（更新对象），这样最终我们将拥有一个包含更多参数的现有通知.

我的问题是（因为我真的不知道 SNMP 管理器会做什么）：

1.  如果我的客户*没有*在陷阱中安装更新的 MIB 和更新的对象，而我发送了新参数，那么 SNMP 管理器客户端会发生什么情况？
2.  如果客户安装了新的 MIB，而我发送了*没有*新参数的陷阱，会发生什么情况？

直觉上，作为开发人员，我希望一切都会好起来，这意味着对于 (1) 将看到陷阱（显示新参数而没有转换 OID，或者根本不显示），对于 (2) 陷阱会被看到，不会有任何问题。

另外，一般来说，当陷阱消息定义有参数时，它是强制性的还是可选的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-10-21T14:07:34.393

确切的行为取决于经理。

通常，最好不要更改已发布 MIB 中的对象。您应该创建一个包含额外参数的新陷阱。当您需要在没有额外参数的情况下发送时，请使用旧的通知对象。当您需要发送额外的参数时，请使用新对象。

# windows - 使用 JScript 查找操作系统名称/版本

> ID：351282
> 
> 赞同：1
> 
> 时间：2008-12-08T23:07:16.690
> 
> 标签：windows, javascript

我必须维护一个用 JScript（不是 Javascript）编写的服务器端脚本，它需要发现它正在运行的系统的操作系统。我怎样才能正确而稳健地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-08T23:32:55.750

[在此处](http://www.microsoft.com/technet/scriptcenter/scripts/jscript/os/version/ostveb01.mspx?mfr=true)查看您可以获得的所有不同系统信息。

这是我根据该网页汇总的一些示例代码：

```
var wbemFlagReturnImmediately = 0x10;
var wbemFlagForwardOnly = 0x20;
var objWMIService = GetObject("winmgmts:\\\\.\\root\\CIMV2");
var colItems = objWMIService.ExecQuery("SELECT * FROM Win32_OperatingSystem", "WQL",
                                      wbemFlagReturnImmediately | wbemFlagForwardOnly);

var enumItems = new Enumerator(colItems);
var objItem = enumItems.item();
WScript.Echo("Caption: " + objItem.Caption); 
```

# flash - Flash 中的多种字体/语言支持

> ID：351290
> 
> 赞同：4
> 
> 时间：2008-12-08T23:09:48.370
> 
> 标签：flash, unicode, fonts, multilingual

问候，

我正在编写一个支持多语言的 Flash 应用程序。我最初选择的字体是 Tahoma，因为它支持 Unicode。客户更喜欢非标准字体，例如 Lucida Handwriting。Lucida Handwriting 不像 Tahoma 那样支持西里尔字母，这带来了一个有几种方法可以解决的问题，我想请教您哪种方法更可取：

据我了解，我可以：

*   为客户提供一个完全兼容 Unicode（西里尔文、希伯来文、阿拉伯文、繁体中文、东亚文等）字体的列表以供选择。（我不知道从哪里得到这样的列表；我在网络上的搜索只得到了部分符合 unicode 的字体列表。试试[http://look.fo/list-of-unicode-compliant-fonts](http://look.fo/list-of-unicode-compliant-fonts)起点看我看的地方）。
*   根据客户的位置（我们已经拥有），为说英语的用户渲染 Lucida Handwriting，为国际用户渲染 Tahoma。这可能有点让人头疼。有没有人有过这种方法的经验？
*   构建一个新字体（IE，AlexeyMK Bold），它使用 Lucida Handwriting 用于英语，Tahoma 用于其他所有内容。这个广告类似于 500k 到 Flash 文件的重量，但应该（如果我理解正确的话）只在第一次加载。

你有什么建议？其中哪些是合理的解决方案，哪些是完全可行的？有没有我没有想到的方法？

非常感谢！阿列克谢

编辑：关于这个主题的一篇好文章：[http ://www.itworld.com/print/58558](http://www.itworld.com/print/58558)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T01:59:40.167

好吧，最终您只有两个真正的选择：要么在 SWF 中嵌入字体，保证字体的外观，要么不这样做，并使用设备字体。（或两者的混合，根据地区使用嵌入式或设备字体。）

如果您不嵌入任何字体，那么您为文本定义的任何字体最终都只是一个建议 - 用户将看到的是设备字体，由他们自己的机器呈现（使用该机器上的字体）。因此，您可以“建议” Tahoma，但用户看到的内容将取决于他们是否拥有该字体（例如，Mac 版本的字体与 PC 版本的字体可能会有所不同）。当然，这也取决于支持；例如，如果他们没有亚洲字体，那么他们将看不到任何中文。（注意：您也可以选择像“_sans”这样的字体，它只是告诉客户端使用其标准的无衬线字体。我的猜测是，在实践中，这将与您选择的字体相同d 定义了“Tahoma”，但是 YMMV。）

如果您嵌入了字体，那么用户将看到您所期望的，因为字体是由 Flash 而不是操作系统呈现的。但是，如果您完全嵌入所有区域，包括中文所需的字形，那么我想您会发现它增加了超过 500K.. 以我的经验更像是 2-5MB。但也许我遗漏了一些细节。无论如何，对于通过网络传递的内容，我通常会假设，亚洲字体至少应该是设备字体。

要添加有关混合解决方案的内容，我已经完成了此操作，并且可行。也就是说，假设您可以将逻辑添加到 SWF，您可以（例如）为每个文本字段制作两个，一个使用嵌入的“Lucida 不管”，另一个使用非嵌入的“_sans”，然后在运行时制作一个其中不可见并将文本放在另一个中，具体取决于您显示的区域。（我通过制作一个 LocalizedTextfield 组件来做到这一点，并在初始化时让它从静态属性中读取语言环境。）然后，您只需决定，对于每个语言环境，文件大小是否值得显示该特定集合的字形。

最后一句话是，你不能假设你的字体所产生的文件大小只会被加载一次。如果您以简单的方式制作内容并在文本字段中嵌入字体，那么字体信息将成为您的 SWF 的一部分，因此无论何时都会加载。要将其外部化，您可以将 Label 组件设为一个单独的文件，然后决定是否加载它取决于浏览器的缓存设置。您还可以将字体资源本身外部化并将其用作共享资源，但在 AS2 中，这有点麻烦。我听说它在 AS3 中更容易，但我自己没有这样做。

# c# - 如何使用c#将文本显示为隐藏

> ID：351296
> 
> 赞同：1
> 
> 时间：2008-12-08T23:10:53.190
> 
> 标签：c#

我正在用 C# 开发。我需要捕获写在文本框中的密码，但不想显示正在输入的密码，而是显示 **** 或任何其他字符来隐藏密码。

我怎样才能做到这一点？我确定是通过修改属性，但找不到哪个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-08T23:13:50.407

[http://msdn.microsoft.com/en-us/library/d3223ht2.aspx](http://msdn.microsoft.com/en-us/library/d3223ht2.aspx)

设置文本框的 PasswordChar 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T23:14:37.470

设置[`PasswordChar`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.passwordchar.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-08T23:12:59.143

TextBox 类上有一个名为“UseSystemPasswordChar”的属性（假设是winforms），可以让您执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-08T23:16:14.537

要使用您自己的自定义字符：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.textbox.passwordchar.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.passwordchar.aspx)

要使用系统默认字符：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.textbox.usesystempasswordchar.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.usesystempasswordchar.aspx)

```
 textBox1.UseSystemPasswordChar = true;

//or

textBox1.PasswordChar = '%'; 

```

# sendmail - 我可以使用 Google Apps for domain Email 并仍然使用“sendmail”服务器发送电子邮件吗？

> ID：351297
> 
> 赞同：5
> 
> 时间：2008-12-08T23:11:02.767
> 
> 标签：sendmail, google-apps, mx-record

我正在使用 Google Apps for domain 来托管来自我的域的电子邮件，并且我已经根据 Google 文档在我的网站上设置了 MX 记录。我是否也可以使用“sendmail”服务器从我的网络服务器发送其他电子邮件，而不会与 Google APPS 发生冲突？

具体问题：1）我想将我的 sendmail 服务器的 MX 记录添加到我的虚拟主机，以避免从我的 sendmail 服务器发送的邮件被标记为垃圾邮件（通过 IP 查找）。Google Apps 和我的 sendmail 服务器的 MX 记录是否会冲突反正？2) 如果我有一个单独的 sendmail 服务器运行，Google Apps 电子邮件是否仍能正常工作？我希望 Google Apps 电子邮件能够接收我的所有电子邮件，并且只想从我的 sendmail 服务器发送额外的邮件。

我想要拥有自己的 sendmail 服务器的主要原因是对我发送的电子邮件数量没有限制（目前我的 Google Apps 电子邮件限制我每个电子邮件帐户每天发送 250 封电子邮件。）

如果有人确实做到了这一点，请大声说出来！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-08T23:28:34.027

MX 记录只影响*接收*邮件。尝试向您的域发送电子邮件的场外服务器使用 MX 记录来确定将邮件发送到哪些主机。您可以设置 sendmail 主机来*发送*邮件，而不会对您的 MX 记录或接收邮件产生任何影响。（SPF 记录确实会影响发送邮件；如果您使用 SPF，则需要更新它以列出您的 Google Apps 主机和 sendmail 主机。）

**编辑：**由于您的 sendmail 主机仅用于发送邮件，因此不应将其列为 MX 记录。将其列为 MX 记录有几个缺点：

*   它可能会收到发给您的 Google Apps 主机的邮件。（即使您给它较低的优先级，如果您的 Google Apps 主机出现故障，或者出现间歇性 DNS 或网络故障，或者...），它也可能会收到邮件
*   它将接收垃圾邮件，因此您必须在 sendmail 主机上设置垃圾邮件过滤器，或者您必须重新配置 Google Apps 垃圾邮件过滤器以信任 sendmail 主机（否则它们将无法识别垃圾邮件的真正发件人）。
*   如果您阻止 SMTP 到您的 sendmail 主机，以避免前两个问题，那么您可能会受到垃圾邮件过滤器的惩罚（如 jasonrm 所述），并且您可能会延迟合法电子邮件的传递（如果有人试图通过电子邮件发送您的 sendmail 主机）原因并被阻止）。

正如 Zoredache 所提到的，在您的 MX 记录中未列出 sendmail 主机可能会导致一些垃圾邮件过滤器稍微惩罚您，但设置 SPF 应该可以避免这种情况。（任何精心设计的垃圾邮件过滤器都将采用 SPF 而非 MX 记录。）

如果您的 sendmail 主机将向您自己的用户发送任何电子邮件，您还需要确保将其配置为将您的用户的电子邮件中继到您的 Google Apps 主机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-08T23:31:41.180

> 我是否也可以使用“sendmail”服务器从我的网络服务器发送其他电子邮件，而不会与 Google APPS 发生冲突？

是的

> 我想将我的 sendmail 服务器的 MX 记录添加到我的虚拟主机，以避免从我的 sendmail 服务器发送的邮件被标记为垃圾邮件（通过 IP 查找。）

不，你不想那样做。相反，您可能应该考虑设置[SPF](http://www.openspf.org/)记录

> Google Apps 的 MX 记录和我的 sendmail 服务器是否会发生冲突？

如果您为两者都设置了同名 (domain.org) 的 MX 记录，那么是的，它们会发生冲突，邮件将发送到其中一个。无论哪一个具有最低的首选项并且在发送 MTA 尝试传递时可用，都可能会收到该邮件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-08T23:33:16.763

还没有完全按照您的要求完成，但是从什么时候开始阻止人们提供建议？;)

1) 只要您为“仅发送”服务器添加 MX 记录，优先级非常低（例如 50，所有 gmail 服务器都小于 20），除非邮件程序实施不当或 gmail 已关闭，否则不会mailer 应该尝试与您的低优先级服务器通信。如果您只关心 MX 记录，那么端口也将阻止入站 SMTP 到这些服务器，以进一步确保邮件永远不会发错地方。如果他们主动尝试连接回源 sendmail，这可能会抛出一些垃圾邮件检测方案，但我认为这并不常见。您也总是可以运行本地重定向，因此如果邮件确实出于某种原因进入，您可以尽快将其推送回 gmail。

2）看不出有什么理由不这样做。如果您从不允许将电子邮件传递到您的外发服务器并且执行低优先级，那么应该可以正常工作。

此外，请确保在您的 SPF 文本记录中包含所有可能发送邮件的服务器。垃圾邮件过滤器应该检查并信任至少与 MX 记录一样多，因为并非所有公司都使用相同的入站服务器进行出站。

# java - Javascript的最佳源代码格式化程序？

> ID：351298
> 
> 赞同：15
> 
> 时间：2008-12-08T23:11:06.013
> 
> 标签：java, javascript, code-formatting

我一直在挖掘 Stack Overflow 以及一些 Google 搜索，但我找不到令人满意的 Javascript 代码格式化程序。

我找到了几个相关的工具，例如语法荧光笔和漂亮的打印机，但我正在寻找一种工具，我可以理想地在 Eclipse 中为其创建一个包装器并简单地从菜单栏运行。因此，如果有任何基于 Java 的可用，那将是一大优势。免费和/或开源也是首选。

我正在寻找我的开发团队可以用来保持一致的代码风格的东西。

谢谢。

**[编辑]**感谢您的快速响应！如果我有任何业力，我会支持你们两个。但尤其是用于链接到[格式自定义](https://stackoverflow.com/questions/351298/best-source-code-formatter-for-javascript#351310)页面的 kRON。

**[编辑] Stack Overflow 上的** [相关问题](https://stackoverflow.com/questions/18985/javascript-beautifier)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-09-13T17:09:01.673

这是迄今为止我遇到的最好的：http: [//jsbeautifier.org/](http://jsbeautifier.org/)

可作为在线工具使用，或在命令行上使用 node.js 或 python。 [源代码可用](https://github.com/beautify-web/js-beautify)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-08T23:15:39.950

一口气：[Aptana Studio](http://www.aptana.com/products/studio3.html)！是的，它基于 Java 且免费（Eclipse，作为独立或插件）。

您还可以[自定义格式](http://www.aptana.com/docs/index.php/Customizing_your_formatting_preferences)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-08T23:15:56.203

如果您已经使用 Eclipse，我建议您尝试[Aptana](http://www.aptana.com/docs/index.php/Plugging_Aptana_into_an_existing_Eclipse_configuration)，您可以将其安装为 Eclipse 插件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-20T13:40:20.340

*   对于 Eclipse IDE，您可以使用基于[Goolge 样式指南的](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml "谷歌的风格")[JavaScript Code Formatter](https://github.com/jokeyrhyme/eclipse-formatter-profiles "JavaScript 代码格式化程序")

*   对于 IntelliJ IDEA 可以使用相同的 js 代码格式化程序 xml 文件，但之前必须安装一个特殊的插件[Eclipse Code Formatter Plugin](http://plugins.jetbrains.com/plugin/?idea&id=6546 "Eclipse 代码格式化插件")，它解决了在使用 IDEA 和 Eclipse 的团队环境中保持通用代码样式的问题

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-09T06:53:21.493

如果您还需要 Java 编程，我可以推荐“ [IntelliJ IDEA](http://www.jetbrains.com/idea/) ”

它提供了出色的 JavaScript 格式化和开箱即用的重构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-21T19:42:02.720

你试过[jsfiddler 吗](http://jsfiddle.net)？它非常适合使用 Javascript 进行尝试。内置 JSLint 和一个叫做 Tidy 的东西。不确定这是否推断[出 jstidy](http://code.google.com/p/jstidy/) [Piotr Zalewa](http://piotr.zalewa.info/)是写它的人。可能值得给他一条推[文@zalun](http://twitter.com/zalun)来确认。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-28T12:49:26.727

如果你使用的是notepad++，你可以试试jsminnpp插件

# file - 在不考虑标题的情况下计算音频文件的校验和

> ID：351306
> 
> 赞同：5
> 
> 时间：2008-12-08T23:14:06.787
> 
> 标签：file, audio, checksum

我想以编程方式创建音频文件（MP3、Ogg Vorbis、Flac）的 SHA1 校验和。**要求是即使标头（例如 ID3）发生变化**，校验和也应该是稳定的。
*注意：音频文件没有 CRC*

这是我现在尝试的：

### [1) 使用 Perl 和MPEG::Audio::Frame](http://search.cpan.org/dist/MPEG::Audio::Frame/)读取 + 散列所有 MPEG 帧

```
my $sha1 = Digest::SHA1->new;
while (my $frame = MPEG::Audio::Frame->read(\*FH)) {
    $sha1->add($frame->content());
} 
```

### [2) 使用 Python 和libmad (pymad)](http://spacepants.org/src/pymad/)解码 + 散列所有 MPEG 帧

```
mf = mad.MadFile(path)
sha1 = hashlib.sha1()

while 1:
    buf = mf.read()
    if (buf is None):
        break
    sha1.update(buf) 
```

### 3) 使用[mp3cat](http://tomclegg.net/mp3cat)

```
> mp3cat - - < file.mp3 | sha1sum 
```

然而，这些方法都没有提供**稳定**的校验和。即，在*某些情况下，使用*[picard](http://musicbrainz.org/doc/PicardTagger)重新标记文件后校验和会发生变化。

是否有任何图书馆已经提供了我想要的东西？
我不关心编程语言...

**更新：** 我进一步调试了这个案例。libmad 校验和不一致似乎发生在 libmad 出现一些解码错误的情况下，例如*"Huffman data overrun (0x0238)"*。由于这确实发生在许多 mp3 文件上，我不确定它是否真的表明文件损坏......</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-22T11:45:58.540

如果您正在为实际音乐寻找稳定的哈希值，您可能需要查看[libOFA](http://code.google.com/p/musicip-libofa/)。您当前的方法会给您不同的结果，因为格式可以嵌入标签。此外，如果您希望具有相同歌曲的两个不同文件返回相同的哈希值，您需要考虑比特率和采样频率等因素。

另一方面，libOFA 可以为您提供可以在格式和不同编码之间使用的稳定哈希。可能是你想要的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-06-10T11:39:47.877

我需要工具来快速检查我的 MP3/OGG​​ 库是否仍然有效。对于 MP3，我发现 mp3md5.py ( [http://snipplr.com/view/4025/mp3-checksum-in-id3-tag/](http://snipplr.com/view/4025/mp3-checksum-in-id3-tag/) ) 可以完成这项工作，但对于 OGG Vorbis 来说没有简单的工具，但我编写了一些 bash脚本为我执行此操作。这两种工具都应该容忍对评论/ID3Tag 的修改。

```
#!/bin/bash

# This bash script appends an MD5SUM to the vorbiscomment and/or verifies it if it exists
# Later modification of the vorbis comment does not alter the MD5SUM
# Julian M.K.

FILE="$1"

if [[ ! -f "$FILE" || ! -r "$FILE" || ! -w "$FILE" ]] ; then
  echo "File $FILE" does not exist or is not readable or writable
  exit 1
fi

OLDCRC=`vorbiscomment "$FILE" | grep ^CRC=|cut -d "=" -f 2`
NEWCRC=`ogginfo "$FILE" |grep "Total data length:" |cut -d ":" -f 2 | md5sum |cut -d " " -f 1`

if [[ "$OLDCRC" == "" ]] ; then
  echo "ADDED $FILE  $NEWCRC"
  vorbiscomment -a -t "CRC=$NEWCRC" "$FILE" 
  # rewrite CRC to get proper data length, I dont know why this is necessary
  NEWCRC=`ogginfo "$FILE" |grep "Total data length:" |cut -d ":" -f 2 | md5sum |cut -d " " -f 1`
  vorbiscomment -w -t "CRC=$NEWCRC" "$FILE" 
elif [[ "$OLDCRC" == "$NEWCRC" ]]  ; then
  echo "VERIFIED $FILE"
else
  echo "FAILURE $FILE -- $OLDCRC - $NEWCRC"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-11T18:12:05.220

有一种简单稳定的方法可以做到这一点。只需复制文件并从中删除所有标签（例如，使用 mutagen.id3）并获取结果文件的哈希值。

这种方法的唯一缺点是它的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T18:37:42.947

Bene，如果我是你，（我正在做一些与你想做的非常相似的事情），我会对 mp3 数据块进行哈希处理。（首先将其提取为原始数据，然后将其写入磁盘，这样您就知道自己在处理什么了）。然后，修改 ID3 标签。再次散列您的数据。现在，如果它发生了变化，比较你的两组原始数据并找出它在哪里发生了变化。很有可能，您可能在某个地方越界了。如果我记得，MP3 文件以 FF F8 之类的开头。好吧，至少框架可以。

我对你的发现很感兴趣，因为我仍在编写我所有的代码来处理指纹等，还没有得到实际的散列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T12:26:34.600

**多年后**更新：****

 **请参阅[我](https://stackoverflow.com/a/68577633/111036)对一个非常相似的问题的回答。事实证明，它`ffmpeg`实际上支持对各个流进行校验和。要仅获取音频流的 md5 哈希：

```
ffmpeg -i "$filename" -map 0:a -codec copy -f md5 "$filename.md5" 
```

还支持使用通用[`-f hash`](http://ffmpeg.org/ffmpeg-formats.html#hash)格式的其他哈希格式，或者使用[`-f framemd5`](http://ffmpeg.org/ffmpeg-formats.html#framemd5).

* * *

我正在尝试做同样的事情。我使用 MD5 而不是 SHA1。我开始使用 mp3tag ( [www.mp3tag.de/en/](http://www.mp3tag.de/en/) ) 导出音频校验和；然后制作了一个类似于你的 Perl 脚本来做同样的事情。然后我从测试文件中删除了所有标签，音频校验和保持不变。

这是脚本：

```
use MPEG::Audio::Frame;
use Digest::MD5 qw(md5_hex);
use strict;

my $file = 'E:\Music\MP3\Russensoul\01 - 5nizza , Soldat (Russensoul - Russensoul).mp3';
my $mp3tag_audio_md5 = lc '2EDFBD62995A46A45CEEC08C1F303486';

my $md5 = Digest::MD5->new;

open(FILE, $file) or die "Cannot open $file : $!\n";
binmode FILE;

while(my $frame = MPEG::Audio::Frame->read(\*FILE)){
    $md5->add($frame->asbin);
}

print '$md5->hexdigest  : ', $md5->hexdigest, "\n",
      'mp3tag_audio_md5 : ', $mp3tag_audio_md5,  "\n",
      ; 
```

是否有可能您用来修改标签的任何东西有时也会修改 mp3 标头？

# wcf - WCF用户管理技术推荐

> ID：351313
> 
> 赞同：0
> 
> 时间：2008-12-08T23:16:22.053
> 
> 标签：wcf, user-management

我正在编写通过 WCF 服务与 SQL 服务器通信的 C# WinForm 和 asp.net 应用程序。我想避免创建自己的用户管理系统，并想使用可以创建/删除/管理用户和角色的现有组件/技术。你会推荐什么？

注意：我知道日内瓦框架，但 RTM 是 2009 年下半年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T11:26:29.747

对您来说最好的解决方案是为您的 Web 应用程序使用内置的 asp.net 角色管理，这取决于您的应用程序复杂性，内置角色管理可以为您处理多少。请检查这些链接 [http://msdn.microsoft.com/en-us/library/t32yf0a9.aspx](http://msdn.microsoft.com/en-us/library/t32yf0a9.aspx) [http://aspnet.4guysfromrolla.com/articles/120705-1.aspx](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)

关于日内瓦，它是一个基于声明的访问模型，这是 MS 长期以来提出的，最终我们看到了它们。我已经评估了 Beta 并且似乎工作正常，但不知道它在生产级代码中的使用情况如何。如果您正在寻找多平台联合应用程序，您可以使用日内瓦，否则 asp.net 角色管理就足够了。

同样，这完全取决于您正在开发的应用程序的复杂性。Geneva 可以很好地处理复杂的联合应用程序，而无需编写太多代码。

# c++ - 停留在 Trie 的迭代器实现上

> ID：351314
> 
> 赞同：10
> 
> 时间：2008-12-08T23:16:39.527
> 
> 标签：c++, iterator, trie

我必须实现一个自制的 Trie 并且我被困在 Iterator 部分。我似乎无法弄清楚 trie 的增量方法。

我希望有人能帮我把事情弄清楚。

这是迭代器的代码：

```
template <typename T> class Trie<T>::IteratorPrefixe{
friend class Trie<T>;
public:
    IteratorPrefixe() : tree(NULL), currentNode(NULL), currentKey("") {};
    pair<string, T*> operator*() {return make_pair(currentKey, currentNode -> element);} ;
    IteratorPrefixe operator++()throw(runtime_error);
    void operator=(IteratorPrefixe iter) {tree = iter.tree; currentNode = iter.currentNode; currentKey = iter.currentKey;};
    bool operator==(IteratorPrefixe iter) {return tree == iter.tree && currentNode == iter.currentNode;};
    bool operator!=(IteratorPrefixe iter) {return tree != iter.tree || currentNode != iter.currentNode;};
private:
    Trie<T> * tree;
    Trie<T> * currentNode;
    string currentKey;
}; 
```

这是我的特里：

```
template <typename T> class Trie {
friend class IteratorPrefixe;
public:
    // Create a Trie<T> from the alphabet of nbletters, where nbletters must be
    // between 1 and NBLETTERSMAX inclusively
    Trie(unsigned nbletters) throw(runtime_error);

    // Add a key element of which is given in the first argument and content second argument
    // The content must be defined (different from NULL pointer)
    // The key is to be composed of valid letters (the letters between A + inclusive and exclusive nbletters
    //      Eg  if nblettres is 3, a, b and c are the only characters permitted;
    //          If nblettres is 15, only the letters between a and o inclusive are allowed.
    // Returns true if the insertion was achieved, returns false otherwise.
    bool addElement(string, T*) throw(runtime_error);
    // Deletes a key element of which is given as an argument and returns the contents of the node removed
    // The key is to be composed of letters valid (see above)
    // Can also delete at the same time the reference of the ancestors, if these ancestors are no longer used.
    // Returns NULL if the item has no delete
    T* removeElement(string cle) throw(runtime_error);
    // Find a key element of which is given as an argument and returns the associated content
    // The key is to be composed of letters valid (see above)
    // Returns NULL if the key does not exist
    T* searchElement(string cle) throw();
    // Iterator class to browse the Trie <T> in preorder mode
    class IteratorPrefixe;
    // Returns an iterator pointing to the first element
    IteratorPrefixe pbegin() throw(runtime_error);
    // Returns an iterator pointing beyond the last item
    IteratorPrefixe pend() throw();

private:
    unsigned nbLetters;
    T* element;
    vector<Trie<T> *> childs;
    Trie<T> * parent;

    // This function removes a node and its ancestors if became unnecessary. It is essentially the same work
    // as deleteElement that is how to designate remove a node that is changing. Moreover, unlike
    // deleteElement, it does not return any information on the node removed.
    void remove(Trie<T> * node) throw();

    // This function is seeking a node based on a given key. It is essentially the same work
    // searchElement but that returns a reference to the node found (or null if the node does not exist)
    // The key is to be composed of letters valid (see above)
    Trie<T>* search(string key) throw(runtime_error);
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-08T23:39:54.097

我很高兴看到 Tries 仍然被教授，它们是一个经常被忽视的重要数据结构。

您的代码中可能存在设计问题，因为您可能应该有一个 Trie 类和一个 Node 类。你写它的方式看起来你的 Trie 中的每个节点都是它自己的 trie，它可以工作，但会使一些事情变得复杂。

从您的问题中并不清楚您遇到的问题是什么：计算顺序还是计算实际代码？

从迭代器的名称来看，听起来它必须按前缀顺序工作。由于您的 trie 存储单词并且它的子节点是按字母组织的，因此您基本上应该按字母顺序遍历所有单词。每个增量都会带您进入下一个单词。

您的迭代器的不变性在于，在任何时候（只要它是有效的），它都应该指向一个带有“终止符”的节点来表示一个有效的单词。计算这个词只涉及向上扫描父链，直到找到整个字符串。移动到下一个单词意味着进行 DFS 搜索：向上一次，扫描后面的“兄弟”中的链接，看看是否找到了一个单词，如果没有递归向上等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-14T04:36:34.950

您可能希望在以下位置查看我修改后的 trie 实现：

*   [jdkoftinoff 的尝试](http://opensource.jdkoftinoff.com/jdks/trac/wiki/jdktrie)

具体来说，您可能会发现我在 comp.lang.c++.moderated 上关于以符合 STL 的方式为 trie 实现迭代器的[讨论](http://groups.google.com/group/comp.lang.c++.moderated/browse_thread/thread/8770473601ae79d/813eb8d441025ef5)，这是一个问题，因为不幸的是，所有 stl 容器都被迫使用 std::pair<>，并且因此迭代器必须包含该值，而不仅仅是对 trie 中单个节点的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-14T05:30:53.233

一方面，显示的代码实际上并没有描述 trie。相反，它似乎是一棵树，在每个节点 (`T*`和`unsigned`) 中包含一对元素。您可以按照*规则*使用元组树作为 trie，但这只是按照惯例，而不是强制执行。这就是为什么你很难实施的部分原因`operator++`。

您需要做的是让每个都`Trie`包含一个左右不相交的 ADT，而不仅仅是原始元素。它是一种抽象层，在函数式语言中更常见（例如 Scala 的[Either](http://www.scala-lang.org/docu/files/api/scala/Either.html)）。不幸的是，C++ 的类型系统还不够强大，无法做那么优雅的事情。但是，没有什么可以阻止您这样做：

```
template <class L, class R>
class Either
{
public:

    Either(L *l) : left(l), right(0)
    {}

    Either(R *r) : left(0), right(r)
    {}

    L *get_left() const
    {
        return left;
    }

    R *get_right() const
    {
        return right;
    }

    bool is_left() const
    {
        return left != 0;
    }

    bool is_right() const
    {
        return right != 0;
    }

private:
    L *left;
    R *right;
}; 
```

然后您`Trie`的数据成员将定义如下：

```
private:
    Either<unsigned, T*> disjoint;

    vector<Trie<T> *> children;    // english pluralization
    Trie<T> * parent; 
```

我对你的指点玩得又快又松，但你明白我在说什么。重要的是没有给定的节点可以同时包含*an*和`unsigned`a `T*`。

试试这个，看看是否有帮助。我想你会发现能够轻松地确定你是在叶子上还是在树枝上，这将极大地帮助你尝试迭代。

# mailing-list - 遵循/阅读大型邮件列表的最佳实践？

> ID：351318
> 
> 赞同：15
> 
> 时间：2008-12-08T23:21:02.920
> 
> 标签：mailing-list, mailing

您可能会成为各种邮件列表的订阅者，其中一些比其他的更新。

*   遵循这些列表中的所有信息的最佳做法是什么？
*   你曾经管理过的最好的客户是什么？

我敢肯定，我不是唯一一个试图从这种嘈杂的通信方式中获得最佳信号的人 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-08T23:32:17.827

我喜欢 gmail，因为它按对话分组消息的方式，所以我可以通过一个线程向下翻页。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-08T23:37:51.653

我只使用雷鸟。对于某些列表，在平面模式下，对于其他列表（Lua 邮件列表），在线程模式下。以下对于邮件列表来说是很自然的，邮件被推送到您的客户。

起初，我只是收到了邮件，并使用一些规则将它们路由到正确的文件夹。

现在，我使用[Gmane](http://gmane.org/ "Gmane - 邮件到新闻并再次返回")将它们作为新闻组阅读，它还允许了解历史记录（包括在我开始订阅之前发送的邮件以及在临时取消订阅期间发送的邮件）。

有时，当我对某个线程不感兴趣时​​，我只需右键单击第一条消息并选择将此线程的所有消息标记为已读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-08T23:52:15.413

使用 GMail 中的规则贴上标签并归档所有邮件。然后它们很容易分类、可搜索和线程化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-08T23:55:24.503

使用 KDE Ia m 将 Kontact 用于我的邮件和 RSS 提要。这给了我一个很好的指挥中心。

# c# - 自定义 System.Collections.Generic.Contains 用于测试自定义对象

> ID：351324
> 
> 赞同：0
> 
> 时间：2008-12-08T23:28:21.110
> 
> 标签：c#, asp.net

我该如何重写或者是否有办法编写我自己的自定义函数来模拟自定义 System.Collections.Generic.Contains 但仅考虑自定义对象的某些公共属性？

例如，如果我有一个具有属性名称和 ID 的自定义对象，我希望我的唯一值列表包含所有 DISTINCT 名称。在这种情况下，ID 无关紧要。

```
List allvalues = new List ({0, "Burger"}, {1, "Pizza"}, {2, "burger"}) 
```

我希望它返回一个列表，其中包含 0、Burger 和 1、Pizza 的第一个对象......无论 ID 和名称的大小写如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-08T23:44:25.803

是的，使用产量回报，如下所示：

```
 private Collection<T> internalCollection;

    public Collection<T> GetDistinctList<T>()
    {
        List<string> names = new List<string>();
        foreach(T thisT in internalCollection)
           if (!names.Contains(thisT.Name)
           {
               names.Add(thisT.Name);
               yield return thisT;
           }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-08T23:47:35.453

我很不清楚这`Contains(...)`与这些`List ({0, "Burger"}, {1, "Pizza"}, {2, "burger"})`东西有什么关系。你能澄清一下吗？通常，您可能希望考虑提供自定义`Equals()`/ `GetHashCode()`、 or`IEquatable<T>`或`IEqualityComparer<T>`. 或者，LINQ 有很多方法可以让这变得简单——你可以访问 LINQ 吗？

# wcf - Web 服务与 WCF 服务

> ID：351334
> 
> 赞同：114
> 
> 时间：2008-12-08T23:34:09.927
> 
> 标签：wcf, web-services

它们之间有什么区别？

我什么时候会选择其中之一？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2008-12-09T00:05:56.667

此答案基于不再存在的文章：

文章摘要：

“基本上，WCF 是一个服务层，它允许您构建可以使用各种通信机制进行通信的应用程序。有了它，您可以使用对等、命名管道、Web 服务等进行通信。

您无法比较它们，因为 WCF 是用于构建可互操作应用程序的框架。如果您愿意，可以将其视为 SOA 推动者。这是什么意思？

嗯，WCF 符合称为 ABC 的东西，其中 A 是您要与之通信的服务的地址，B 代表绑定，C 代表合同。这很重要，因为可以更改绑定而不必更改代码。合约更强大，因为它强制将合约与实现分离。这意味着合约是在一个接口中定义的，并且有一个具体的实现，消费者使用与合约相同的思想来绑定。数据模型被抽象出来了。”

... 之后 ...

“当我们需要与其他通信技术（例如对等、命名管道）而不是 Web 服务进行通信时，应该使用 WCF”

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-17T08:09:52.570

WCF[和 Web 服务有什么区别？](http://www.codeproject.com/Articles/139787/What-s-the-Difference-between-WCF-and-Web-Services)

> WCF 是 Microsoft 早期所有 Web 服务技术的替代品。它还比传统上认为的“Web 服务”做得更多。
> 
> WCF“Web 服务”是通过 WCF 实现的更广泛的远程通信的一部分。与通过传统 ASMX 相比，您将在 WCF 中获得更高程度的灵活性和可移植性，因为 WCF 的设计从一开始就总结了 Microsoft 提供的所有不同的分布式编程基础结构。WCF 中的端点可以通过 SOAP/XML 与通过 TCP/二进制文件一样容易地进行通信，并且更改此介质只需一个配置文件 mod。理论上，这减少了移植或更改业务需求、目标等时所需的新代码量。
> 
> ASMX 比 WCF 更老，ASMX 可以做的任何事情都可以 WCF（以及更多）。基本上，您可以将 WCF 视为试图将在 Microsoft 世界中让两个应用程序进行通信的所有不同方式逻辑地组合在一起；ASMX 只是众多方式中的一种，因此现在归入 WCF 功能的保护伞下。
> 
> Web 服务只能通过 HTTP 访问，它可以在无状态环境中工作，WCF 是灵活的，因为它的服务可以托管在不同类型的应用程序中。托管 WCF 服务的常见方案是 IIS、WAS、自托管、托管 Windows 服务。
> 
> 主要区别在于 Web 服务使用`XmlSerializer`. 但是 WCF 使用`DataContractSerializer`的性能比`XmlSerializer`.

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-08-12T07:03:13.797

**Web Service** 基于 SOAP 并以 XML 形式返回数据。它只支持 HTTP 协议。它不是开源的，但可以被任何理解 xml 的客户端使用。它只能托管在 IIS 上。

**WCF** 也是基于 SOAP 并以 XML 形式返回数据。它是 Web 服务 (ASMX) 的演进，支持 TCP、HTTP、HTTPS、命名管道、MSMQ 等各种协议。WCF 的主要问题是其繁琐且广泛的配置。它不是开源的，但可以被任何理解 xml 的客户端使用。它可以托管在应用程序或 IIS 上或使用窗口服务。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-08-26T15:25:08.983

基本和主要区别在于，ASP.NET Web 服务旨在仅通过 HTTP 交换 SOAP 消息，而 WCF 服务可以使用任何格式（默认为 SOAP）通过任何传输协议（即 HTTP、TCP、MSMQ 或 NamedPipes 等）交换消息。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-16T11:50:22.523

> Web服务和WCF有什么区别？

1.  Web 服务在将数据从一个应用程序传输到另一个应用程序时仅使用 HTTP 协议。

    但 WCF 支持比 ASP.NET Web 服务更多的消息传输协议。WCF 支持使用 HTTP 以及传输控制协议 (TCP)、命名管道和 Microsoft 消息队列 (MSMQ) 发送消息。

2.  要在 Web Service 中开发服务，我们将编写以下代码

    ```
    [WebService]
    public class Service : System.Web.Services.WebService
    {
      [WebMethod]
      public string Test(string strMsg)
      {
        return strMsg;
      }
    } 
    ```

    要在 WCF 中开发服务，我们将编写以下代码

    ```
    [ServiceContract]
    public interface ITest
    {
      [OperationContract]
      string ShowMessage(string strMsg);
    }
    public class Service : ITest
    {
      public string ShowMessage(string strMsg)
      {
         return strMsg;
      }
    } 
    ```

3.  Web 服务在架构上并不更加健壮。但是 WCF 在架构上更加健壮，并且促进了最佳实践。

4.  Web 服务使用 XmlSerializer，但 WCF 使用 DataContractSerializer。与 XmlSerializer 相比，哪个性能更好？

5.  对于内部（防火墙后）服务到服务调用，我们使用 net:tcp 绑定，它比 SOAP 快得多。

    WCF 比 ASP.NET Web 服务快 25%—50%，比 .NET Remoting 快大约 25%。

> 我什么时候会选择其中之一？

*   WCF 用于在其他平台上开发并使用其他技术的其他应用程序之间进行通信。

    例如，如果我必须将数据从 .net 平台传输到其他操作系统（如 Unix 或 Linux）上运行的其他应用程序，并且它们使用其他传输协议（如 WAS 或 TCP），那么只能传输数据使用 WCF。

*   在一个应用程序与另一个应用程序之间传输数据时，这里不受平台、应用程序传输协议的限制。

*   与 Web 服务相比，安全性非常高

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-08T12:02:01.087

主要区别是超时，WCF服务在没有响应的时候超时，但是web-service没有这个属性。

# algorithm - 对数梳理算法

> ID：351336
> 
> 赞同：14
> 
> 时间：2008-12-08T23:35:51.827
> 
> 标签：algorithm

我们得到这些由 16 字节代码组成的约 50GB 数据文件，我想找到任何出现 1/2% 或更多时间的代码。有什么办法可以在一次数据传递中做到这一点？

编辑：有很多代码 - 每个代码都可能不同。

结语：我选择大流士培根作为最佳答案，因为我认为最好的算法是对他所链接的多数元素的修改。多数算法应该可以修改为只使用少量内存 - 我认为 201 代码可以获得 1/2%。基本上，您只需在流中计算多达 201 个不同的代码。一旦你找到 201 个不同的代码，你就丢弃每个代码中的一个（从计数器中减去 1，忘记任何变成 0 的代码）。最后，您最多删除了 N/201 次，因此任何出现次数超过该次数的代码都必须仍然存在。

但这是一个两遍算法，而不是一个。您需要第二次通过来计算候选人的数量。实际上很容易看出，该问题的任何解决方案都必须使用至少 2 遍（您加载的第一批元素可能都不同，其中一个代码最终可能正好是 1/2%）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-09T01:34:30.183

[Metwally 等人，数据流中频繁和前 k 个元素的有效计算 (2005)](http://serv2.ist.psu.edu/viewdoc/summary;jsessionid=D1A8C5DCB2A47A473F693E4F996332A2?doi=10.1.1.114.9563)。还有一些我在雅虎工作时读到的其他相关论文，现在找不到了；但这看起来是一个好的开始。

**编辑：**啊，请参阅此[Brian Hayes 文章](http://www.americanscientist.org/issues/pub/the-britney-spears-problem)。由于 Demaine 等人，它勾画了一个精确的算法，并附有参考资料。它以非常少的内存一次性完成，产生一组项目，包括您正在寻找的频繁项目（如果存在）。获得准确的计数需要（现在易于处理）第二遍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-08T23:54:16.300

这将取决于代码的分布。如果有足够少的不同代码，您可以使用地图在核心中构建[http://en.wikipedia.org/wiki/Frequency_distribution 。](http://en.wikipedia.org/wiki/Frequency_distribution)否则，您可能必须构建一个[http://en.wikipedia.org/wiki/Histogram](http://en.wikipedia.org/wiki/Histogram)，然后对数据进行多次传递，检查每个存储桶中代码的频率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T00:14:51.937

对内存中的文件块进行排序，就像您正在执行外部排序一样。但是，您不必写出每个块中的所有排序代码，而是只需编写每个不同的代码以及该块中出现的次数。最后，合并这些摘要记录，找出每个代码的出现次数。

此过程可扩展到任何大小的数据，并且只对输入数据进行一次传递。可能需要多次合并，具体取决于您要一次打开多少个摘要文件。

* * *

对文件进行排序允许您使用固定数量的内存计算每个代码的出现次数，而不管输入大小如何。

您还知道代码的总数（通过将输入大小除以固定代码大小，或者通过在更一般的问题中计算排序过程中可变长度代码的数量）。

因此，您知道与每个代码关联的输入的比例。

这基本上是管道`sort * | uniq -c`

如果每个代码只出现一次，那没问题；你只需要能够计算它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-08T23:54:41.040

这取决于存在多少不同的代码，以及您有多少可用内存。

我的第一个想法是建立一个计数器的哈希表，以代码为键。循环遍历整个文件，增加相应代码的计数器，并计算总数。最后，过滤计数器超过 (* total-counter 1/200) 的所有键。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-08T23:58:53.577

如果文件仅包含 16 字节代码，并且您知道每个文件有多大，则可以计算每个文件中的代码数。然后，您可以找到 0.5% 的阈值，并按照其他任何建议来计算每个代码的出现次数，记录每个频率超过阈值的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-09T00:04:20.507

每个文件的内容是否代表一个数据集，或者文件之间是否存在任意截断？在后一种情况下，假设随着时间的推移代码的分布相当稳定，您可以通过将每个文件分成更小、更易于管理的块来简化您的工作。作为奖励，您将更快地获得初步结果，并且可以更早地进入下一个流程。

# oracle - ORA-01426: 执行存储过程时出现数值溢出异常

> ID：351339
> 
> 赞同：2
> 
> 时间：2008-12-08T23:37:01.343
> 
> 标签：oracle, delphi, delphi-2007, bde, ora-01426

我将一个 Delphi 6 应用程序移植到 Delphi 2007，它使用 BDE 连接到一个 Oracle 9i 数据库。我得到一个

> ORA-01426: 数值溢出异常

当我执行存储过程时。这是随机发生的，如果我使用相同的参数通过应用程序重新运行存储过程，则不会发生异常。

旧的 Delphi 6 应用程序工作得很好。

任何人的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T02:11:38.190

显示一个代码示例可以使这更容易，但这里有一些预感：

1.  数据是否来自没有明确数据类型的其他来源（如 Excel）？混合或不明确的数据可能会导致 BDE 将错误的数据类型分配给与数据库字段不兼容的字段。

2.  可能是数字格式问题（某些以美国为中心的组件无法正确处理本地化）。您的本地化不是英语（美国）吗？是这样，将其更改为英语（美国）可以解决问题吗？

如果这些完全错过，更多细节可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-10T01:50:58.310

应用程序的 D6 版本是否使用相同版本的 BDE、Oracle 和数据库？如果是这样，那么它可能与传递的数据有关（内容或机制）。

不知道这些数据是什么，也不知道它们是如何传递的，这使得诊断变得非常困难。

# sql - 连接可能包含空值的人名的最短 TSQL 是什么

> ID：351340
> 
> 赞同：4
> 
> 时间：2008-12-08T23:37:39.187
> 
> 标签：sql, sql-server, tsql

3 个字段：名字、中间名、姓氏

任何字段都可以为空，但我不想要额外的空格。格式应为“First Middle Last”、“First Last”、“Last”等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-08T23:48:36.577

```
 LTRIM(RTRIM(
    LTRIM(RTRIM(ISNULL(FirstName, ''))) + ' ' + 
    LTRIM(RTRIM(ISNULL(MiddleName, ''))) + ' ' + 
    LTRIM(ISNULL(LastName, ''))
    )) 
```

注意：这不会留下尾随或前导空格。这就是为什么它比其他解决方案有点丑陋。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-09T02:18:35.603

假设“额外空格”，您的意思是在连接期间插入的额外空格（我认为这是一个合理的假设。如果您的数据中有额外的空格，您应该清理它）：

```
ISNULL(FirstName + ' ', '')  + ISNULL(MiddleName + ' ', '') + ISNULL(LastName, '') 
```

有效，因为您将在名称中添加一个空格 - 如果它是 NULL 则产生 NULL - 这会产生空字符串。

编辑：如果你不计算 SET OPTION - 它可以是一个连接或数据库选项：

```
SET CONCAT_NULL_YIELDS_NULL OFF
LTRIM(FirstName + ' ' + NULLIF(MiddleName + ' ', ' ') + LastName) 
```

短一点，但丑一点。

Edit2：既然你接受了 UDF 的答案 - IMO，这有点作弊 - 这里有一些相同的内容：

```
SELECT a FROM b 
```

b 是一个视图。;） 或者。一个存储过程，

```
EXEC c 
```

但是，由于 EXEC 是可选的：

```
c 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-09T02:16:24.373

使用 UDF：

```
`Select udfConcatName(First, Middle, Last) from foo` 
```

这样，您连接名称的所有逻辑都在一个地方，一旦您将其写入，就很容易调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-08T23:47:54.503

```
LTRIM(RTRIM(ISNULL(FirstName, '') + ' ' + LTRIM(ISNULL(MiddleName, '') + ' ' + 
    ISNULL(LastName, '')))) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-09T12:24:31.230

为什么不在表上使用计算列，使用此处发布的许多首选语法为您执行连接？然后您将只查询计算列 - 非常优雅，如果您保留计算列，那么您甚至可能会获得轻微的性能提升。 [这里的例子](http://msdn.microsoft.com/en-us/library/ms186241.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-06T16:17:32.687

```
replace(ltrim(rtrim(isnull(FirstName, '') + ' ' + isnull(MiddleName, '') + ' ' + isnull(LastName, ''))), '  ', ' ') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-08T23:48:44.297

`LTrim(RTrim(Replace(IsNull(Firstname + ' ', '') + isNull(MiddleName, '') + IsNull(' ' + LastName, ''), ' ', ' ')))`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-09T02:39:46.667

```
'"' + ltrim(rtrim(isnull(FirstName,''))) + ' ' + ltrim(rtrim(isnull(MiddleName,''))) + 
' ' + ltrim(rtrim(isnull(LastName,''))) + '","' + ltrim(rtrim(isnull(FirstName,''))) + 
' ' + ltrim(rtrim(isnull(LastName,''))) + '","' + ltrim(rtrim(isnull(LastName,''))) + 
'"' 
```

ETC

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-24T00:06:39.810

```
DECLARE @first varchar(10) = 'First'
DECLARE @middle varchar(10) = ''
DECLARE @last varchar(10) = 'Last'

LTRIM(RTRIM(
    @first
    + ISNULL(NULLIF(' '+LTRIM(RTRIM(@middle)),' '),'')
    + ISNULL(NULLIF(' '+LTRIM(RTRIM(@last)),' '),'')
)) 
```

为什么会这样

如果 LTRIM、RTRIM 和 ISNULL 函数为 NULL 或空格，则字段将缩减为空字符串。

```
LTRIM(RTRIM(ISNULL(@middle,''))) -- Result is a trimmed non-null string value. 
```

该值以单个空格为前缀，然后由 NULLIF 函数与单个空格进行比较。如果相等，则结果为 NULL。如果不相等，则使用该值。

```
NULLIF(' '+'',' ')       -- this would return NULL
NULLIF(' '+'Smith',' ')  -- this would return ' Smith' 
```

最后，ISNULL() 用于将 NULLIF 传递的 NULL 转换为空字符串。

```
ISNULL(NULL,'')          -- this would return ''
ISNULL(' Smith','')      -- this would return ' Smith' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-22T12:28:17.183

```
Select firstname, middlename, lastname, ProvidedName = 

RTrim(Coalesce(FirstName + ' ','') 
+ Coalesce(MiddleName + ' ', '')
+ Coalesce(LastName + ' ', '')
+ COALESCE('' + ' ', '')
+ COALESCE(NULL, ''))

From names 
```

# sql-server - Linq：同一张表的多个关系

> ID：351345
> 
> 赞同：1
> 
> 时间：2008-12-08T23:39:56.437
> 
> 标签：sql-server, linq, linq-to-sql

[我和这个人](http://forums.oreilly.com/content/C-3-0-in-a-Nutshell/775/Linq-To-Sql-Classes-With-Multiple-Relationships-To-A-Table/)有同样的问题：

我有一张表，它为两个不同的人两次引用了我的 tblstaff 表。现在我已经添加了第二个参考，它们都不起作用。

那是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-11T15:23:58.823

我必须创建一个函数来 getStaffbyID 并在我想要名称而不是 id 时手动调用它。

```
 Dim id As String = 1
    Session("BusinessPlanID") = id

    Dim oLinq As New Linq
    Dim bp As BusinessPlan = oLinq.getBusinessPlanById(id)

    Dim assignedStaff As Staff = oLinq.getStaffById(bp.AssignedStaffID)
    Dim mp As Staff = oLinq.getStaffById(bp.MPStaffID)

    Public Function getBusinessPlanById(ByVal inId As String) As BusinessPlan

        Dim db As New BusinessPlanDataDataContext

        Dim bpItem = (From b In db.BusinessPlans _
                      Select b _
                      Where b.BusinessPlanID = inId).SingleOrDefault

        Return bpItem

    End Function

    'Linq Class --------------------------------------------------------'

    Public Function getStaffById(ByVal inId As String) As Staff

       Dim db As New BusinessPlanDataDataContext

       Dim staffItem = (From s In db.Staffs _
                       Select s _
                       Where s.StaffID = inId).SingleOrDefault

       Return staffItem

    End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T23:50:52.047

通过添加两个引用，您是说选择 PK = this 和 PK = that 的所有行。由于 Pk 是唯一的，因此该条件将始终为假。

我不太了解 linq，但在 SQL 中，您会引用该表两次并将其别名为

....来自 tblstaff 员工 1，tblstaff 员工 2

# security - 在 IRouteHandler.GetHttpHandler() 中可以重定向吗？

> ID：351354
> 
> 赞同：4
> 
> 时间：2008-12-08T23:46:56.860
> 
> 标签：security, webforms, routing, roles

作为一个贪吃未经证实的性感技术的人，我`System.Web.Routing`在我的 Web 窗体应用程序中采用了管理导航等。此外，我希望将基于角色的安全性从 web.config 转移到路由定义本身，因此我可以说“此路由仅适用于角色 x、y”。

所以我得到了实现 IRouteHandler 的类，在它尝试加载特定页面之前，它会检查用户是否在它的允许角色集中。我的问题是，如果不是，我如何重定向到该处理程序中的登录页面？我知道可以在该实例中加载登录页面，但我更喜欢带有“returnto”页面和所有内容的干净重定向。

```
public IHttpHandler GetHttpHandler(RequestContext requestContext) {

if ( AllowedRoles != null )
{
    bool allowed = false;

    for ( int i = 0; i < AllowedRoles.Length; i++ )
    {
        if ( requestContext.HttpContext.User.IsInRole( AllowedRoles[i] ) )
        {
            allowed = true;
            break;
        }
    }

    if ( !allowed )
    {
        ???
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-25T22:15:56.710

可以从 GetHttpHandler 进行重定向。只需使用：

```
requestContext.HttpContext.Response.Redirect("login.aspx"); 
```

# c++ - 在位掩码中设置下一个工作日的算法

> ID：351360
> 
> 赞同：2
> 
> 时间：2008-12-08T23:50:12.890
> 
> 标签：c++, algorithm

我有这个小问题 - 给定工作日的位掩码（例如，`Sunday = 0x01, Monday = 0x02, Tuesday = 0x04`等...）和今天（以等的形式`Sunday = 1, Monday = 2, Tuesday = 3`） - 从今天开始找出第二天最优雅的方法是什么，这是在位掩码中设置的吗？优雅我的意思是，有没有办法在没有 if/switch/etc... 的情况下做到这一点，因为我知道非优雅的方式？

**编辑**我可能应该提到（为了让这一点更清楚）持有位掩码的变量可以设置好几天，例如（大致）：

```
uDay = Sunday | Monday;
today = Tuesday; 
```

我需要得到“星期天”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T00:22:56.803

```
int getNextDay(int days_mask, int today) {
   if (!days_mask) return -1; // no days set
   days_mask |= days_mask << 7; // duplicate days into next week
   mask = 1 << (today % 7); // keep track of the day
   while (!(mask & days_mask)) {
      mask <<= 1;
      ++today;
   }
   return today % 7;
} 
```

所以这只是一个 if 在开始和 while 循环。怎么样？

**编辑：**我刚刚意识到有一种退化的情况，如果使用今天通过>=14（或大于最高位设置），while 循环将变为无限。第 4 行的 (today % 7) 修复了这种情况。

如果我可能（轻松地）抱怨另一个版本得到复选标记，我的版本只有 2 个模数调用，而选中的解决方案将有最少 1 个和最多 6 个模数调用。

此外，如果设置了今天，关于函数是否返回“今天”的评论很有趣。如果函数今天不应该返回，除非今天是集合中唯一的一天，则需要您今天在我的解决方案的第 3 行预先增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T03:40:38.650

您根本不需要任何额外的变量。最简单的想法——从“明天”开始，查看连续的几天，直到找到面具中的一天——也是最优雅的实现方式。做到这一点的诀窍是将日子想象为 Sunday=0、Monday=1 等等（仅在此函数内部）。然后，“今天”实际上是`t-1`（其中 t 是函数的输入，所以它从 1 到 7），“明天”是`(t-1+1)%7`ie`t%7`等。

这很简单，并且已经针对 litb 的代码进行了详尽的测试，以确保 :-)

```
int getNextDay(int m, int t) {
  if((m&127)==0) return t;          //If no day is set, return today
  t=t%7;                            //Start with tomorrow
  while((m&(1<<t))==0) t = (t+1)%7; //Try successive days
  return t+1;                       //Change back to Sunday=1, etc.
} 
```

编辑：如果您希望“下一个”表示“今天或以后”，则应将“t=t%7”行更改为`t=t-1`or `--t`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T00:05:26.870

我这样理解你的问题：

```
// returns t (today) if no weekday is set in the mask.
int getNextDay(int m, int t) {
    int i, idx;
    for(i = 0, idx=t%7; i<7 && !((1<<idx)&m); i++, idx=(idx+1)%7)
        /* body empty */ ;
    return (i == 7) ? t : (idx + 1);
}

// getNextDay(8|2, 2) == 4, getNextDay(64, 2) == 7
// getNextDay(128, 2) == 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T05:10:44.087

> 我的意思是优雅，有没有办法在没有 if/switch/etc 的情况下做到这一点......

你打赌！这是否意味着任何通常意义上的“优雅”，嗯：

```
static unsigned next_day_set (unsigned today, unsigned set) {
  unsigned arev = bitreverse (highest_bit_set (bitreverse ((set << 7) | set)
                                               & (bitreverse (today) - 1)));
  return ((arev >> 7) | arev) & 0x7f;
} 
```

假设您有“优雅”的功能来反转单词中的位并找到最左边的位集 - 请参阅[Hacker's Delight](http://www.hackersdelight.org/)。如果你以相反的顺序表示工作日位，假设我没有搞砸，它会更简单，实际上甚至有点优雅：

```
enum {
  Sunday  = 1 << 6
  Monday  = 1 << 5
  Tuesday = 1 << 4,
  /* etc */
  Saturday = 1 << 0
};

static unsigned next_day_set (unsigned today, unsigned set) {
  unsigned a = highest_bit_set (((set << 7) | set) & ((today << 7) - 1));
  return ((a >> 7) | a) & 0x7f;
} 
```

# jquery - 重 AJAX 页面上的事件问题

> ID：351368
> 
> 赞同：1
> 
> 时间：2008-12-08T23:54:44.223
> 
> 标签：jquery, ajax, internet-explorer, events

我有一个asp页面，它使用jQuery ajax在页面加载后将成员计数加载到一堆`div`s中。

它在 FireFox 和具有少量组的客户端中运行良好。

对于有很多组（500+）的少数客户，我在 IE 中遇到错误。ajax 调用似乎是同步运行的，因为在每个 ajax 调用返回之前，单击事件不会注册。

对于大多数客户端来说，一系列 ajax 请求只是 1 个请求。它仅被分解为具有大量组的客户端的多个请求。

现在，我看到了`$("a").click`如果在加载 DOM 后添加链接，则函数未绑定的错误。不工作的链接没有被 AJAX 加载，它们不属于这一类。

这是伪代码：

```
ready()
{
    // count the number of groups that this user has, adding the ids to a list
    if( count < 50 )
    {
        runAjax();
    }
    else
    {
        // this calls the ajax request on groups of 50 ids
        // it pauses briefly after each request by using setTimeout to call the next
        runAjaxRecursively();
    }
} 
```

这是ajax请求：

```
// run the HTTPRequest
$.ajax({
    async: true,
    type: "POST",
    url: "emailcatcount.asp?idList="+idList,
    data: "idList="+idList,
    dataType: "html",
    success: function(html) { // blah blah blah }
}); 
```

无论如何，代码工作正常，所以请将任何错误视为拼写错误。唯一的问题是，在 IE 中，单击事件在每个 ajax 调用都返回之前不会触发。

有谁知道为什么会发生这种情况？请注意，我设置`async`为 true。

和jQuery的ready事件在IE中的处理方式有什么关系吗？

我很困惑，并且已经花了几天的时间，所以任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T23:57:38.040

成功函数是否更新表格内容？IE大表渲染是相当可怕的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T06:37:13.257

你的问题是你没有给浏览器时间，尝试在递归循环中添加一点 setTimeout 给浏览器时间来处理其他事件，记住你只有一个线程可以玩。最好只进行一次调用并将 jtemplates 与 json 一起使用来处理数据并呈现标记，而不是返回繁重的 html。

此外，您提到的错误不是错误，jQuery 仅绑定当时存在的元素的处理程序。如果您有动态内容，最好使用事件委托来处理动态元素的点击事件。这样，您无需显式绑定每个元素，而是将 click 事件绑定到静态容器。然后，您可以查询 event.target 以查看它是否是调用事件的所需元素之一，如果是，则处理所需的行为。好处是您不会为 dom 带来多个绑定事件和动态内容工作的负担。

# javascript - jQuery: Creating a circular slider

> ID：351371
> 
> 赞同：5
> 
> 时间：2008-12-08T23:55:55.437
> 
> 标签：javascript, jquery, jquery-ui, slider, draggable

You may have seen JavaScript sliders before:

[http://dev.jquery.com/view/tags/ui/1.5b2/demos/ui.slider.html](http://dev.jquery.com/view/tags/ui/1.5b2/demos/ui.slider.html)

What I'm envisioning is a circular slider. It would consist of a draggable button at one point on the circle -- and that button can be dragged anywhere along the ring. The value depends on what position the button is at (think of a clock).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T00:04:42.580

define a center point c current mouse point at m

in your mouse drag event handler, you'd have

```
var dx = m.x-c.x;
var dy = m.y-c.y;

var scale = radius/Math.sqrt(dx*dx+dy*dy);

slider.x = dx*scale + c.x;
slider.y = dy*scale + c.y; 
```

radius would be some preset value of the slider,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-14T11:49:17.440

How about this: [http://www.thewebmasterservice.com/dev-blog/curved-rounded-or-circular-sliders-javascript-jquery-ui](http://www.thewebmasterservice.com/dev-blog/curved-rounded-or-circular-sliders-javascript-jquery-ui)

Some explanations and a demo.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T16:42:50.537

I have written a [jQuery plugin](https://github.com/princejwesley/circular-slider) which supports full/half circle sliders.

[Demo Page](http://www.toolitup.com/circular-slider.html) & [Documentation](https://github.com/princejwesley/circular-slider/blob/master/README.md)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-12T18:27:24.807

Check the jQuery roundSlider plugin from here [http://roundsliderui.com/](http://roundsliderui.com/). This is what you want exactly.

This roundslider having the similar options like the jQuery ui slider. It support default, min-range and range slider type. Not only the round slider it also supports various [circle shapes](http://roundsliderui.com/demos.html#various-circle-shapes) such as **quarter**, **half** and **pie** circle shapes.

For more details check the [demos](http://roundsliderui.com/demos.html) and [documentation](http://roundsliderui.com/document.html) page.

Please check the demo from [**`jsFiddle`**](http://jsfiddle.net/soundar24/utqgufx0/).

**Related answers:** [https://stackoverflow.com/a/31367164/1845801](https://stackoverflow.com/a/31367164/1845801) and [https://stackoverflow.com/a/31369265/1845801](https://stackoverflow.com/a/31369265/1845801)

**Screenshots:**

![jquery circular sliders - different circle shapes](https://i.stack.imgur.com/qjhAE.png)

# sql-server - 数据库索引：仅选择！

> ID：351372
> 
> 赞同：1
> 
> 时间：2008-12-08T23:56:12.583
> 
> 标签：sql-server, database, indexing, sql-server-2000

再会，

我有大约 4GB 的数据，分成大约 10 个不同的表。每个表都有很多列，每一列都可以是查询中的搜索条件。我根本不是DBA，对索引也不是很了解，但我想尽可能加快搜索速度。重要的一点是，任何时候都不会有任何更新、插入或删除（表每 4 个月填充一次）。在每一列上创建索引是否合适？记住：没有插入、更新或删除，只有选择！另外，如果我可以将所有这些列设为整数而不是 varchar，我会在速度上有所不同吗？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-09T00:11:25.080

答：不可以。单独索引每一列并不是好的设计。索引在很多情况下需要包含多个列，并且针对不同的需求有不同类型的索引。

其他答案中提到的调整向导是一个很好的初选（尤其是对于学习者）。

不要试图通过它来猜测你的方式，或者希望你理解复杂的分析 - 获得针对你情况的建议。我们似乎有几个线程在这里运行，它们对于特定情况和查询优化非常活跃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-09T00:06:44.463

您是否查看过运行[索引调整向导？](http://msdn.microsoft.com/en-us/library/aa933123(SQL.80).aspx)将根据工作负载为您提供索引建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-09T00:13:16.353

**绝对不。**

您必须了解索引的工作原理。如果你有一个表，比如 1000 条记录，但它是一个 BIT，并且可以有两个值之一，如果你只对该列和该列进行索引，它将毫无价值，因为它的选择性不够。当您对列进行索引时，要非常清楚将在表上执行哪些类型的选择。当您在列上创建索引时，该索引的选择性是否足以让优化器有效使用？

到那时，您很可能会发现一些精心挑选的复合索引将大大优于每列上许多单个索引的解决方案。黄金法则：如何查询数据库将决定如何创建索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T00:10:32.070

缺少两条信息：每列中有多少不同的值，以及您正在使用哪个 DBMS。如果您使用 Oracle 并且每列的不同值少于几千个，则可以创建位图索引。对于精确匹配，这些非常节省空间和执行效率。

否则，这是一个折衷方案：每个索引将添加与包含相同数据的单列名称大致相同的空间量，因此您的空间需求基本上会增加一倍（可能是 2.5 倍）。所以也许是 10G，这不是很多数据。

然后是您的 DBMS 是否将有效地合并多个基于索引的选择的问题。很有可能它不会，除非您对您选择的每一列进行自联接。

最佳答案：在较小的数据集上尝试（这样您就不会花费所有时间来构建索引）并看看它是如何工作的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-10T00:02:41.367

如果您从表中选择的一组列大于所选索引中的列所覆盖的列，那么您将不可避免地在查询计划中产生书签查找，这是查询处理器必须检索未覆盖列的地方使用关联非聚集索引中叶行的参考 ID 从聚集索引中获取。

根据我的经验，书签查找确实会降低查询性能，因为需要额外的读取量以及必须单独解决聚集索引中的每一行的事实。这就是为什么我尝试使 NC 索引尽可能覆盖，这在所需查询计划众所周知的较小表上更容易，但如果您有包含大量列的大表，并且预期有任意查询，那么这可能不会是可行的。

这意味着您只能使用任何类型的 NC 索引，如果索引覆盖，或者选择一个足够小的数据集来减轻书签查找的成本 - 实际上，您可能会发现查询优化器如果与聚集索引扫描（所有列都已经可用）相比成本过高，甚至不会查看您的索引。

因此，除非您知道索引会优化给定查询的结果，否则创建索引是没有意义的。因此，索引的值与它可以针对给定表优化的查询百分比成正比，这只能通过分析正在执行的查询来确定，这正是索引调整向导为您所做的。

总而言之：

1）不要索引每一列。这是经典的过早优化。您不能提前为所有可能的查询计划优化带有索引的大表。

2) 不要索引任何列，直到您通过索引调整向导捕获并运行基本工作负载。此工作负载需要代表您的应用程序的使用模式，以便向导可以确定哪些索引实际上有助于您的查询性能。

# eclipse - 创建一个 Eclipse“发行版”？

> ID：351373
> 
> 赞同：11
> 
> 时间：2008-12-08T23:57:03.470
> 
> 标签：eclipse, distribution

在为开发团队创建自定义 Eclipse 发行版的上下文中。

我将如何构建包含一组特定插件的自定义 Eclipse 发行版？是否也很难添加一种更新站点来放置自定义 eclipse 将从中更新的插件的特定版本？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T22:35:48.590

我意识到这是一篇旧文章，但它不断出现在我所做的搜索中，鉴于在交付 Eclipse 插件方面发生的所有变化和成熟度，我想提供更多细节......所以，对于那些最终在此页面上的人，希望以下内容对您有所帮助！

总结一下我的个人发现：

*   这个领域在开源和商业方面都有很多改进
*   分销的复杂性通常比预期的要大
*   建立在别人的背上，这是值得的！

当我为一家提供商业解决方案的公司 ( [http://genuitec.com/sdc](http://genuitec.com/sdc) ) 工作时，我尝试在下面回答使用免费解决方案交付 Eclipse 的实用性。

所以，不用多说……

绝对最小的解决方案是从 Eclipse.org 下载一个 Eclipse 包，添加您想要的插件，在 eclipse.ini 中设置 -clean 参数，压缩目录并将其交给您的团队。只要您从内部更新站点添加了特性（并且 URL 保持不变），Eclipse 就能够从中进行更新。

这将是第一次工作，因为它很容易，所以这是大多数人开始做的事情。但它忽略了工具堆栈的生命周期。以下是我在帮助客户使用 Eclipse 工具时遇到的一些痛点：

*   Eclipse 包：您必须是 Eclipse/p2 专家才能设置和维护 Eclipse 包。EPP 工具允许您构建自己的包，但您需要大量有关 Eclipse 包、p2 和 EPP 工具的领域知识。一个开始的地方是[http://wiki.eclipse.org/EPP/How_to_build_a_package_locally](http://wiki.eclipse.org/EPP/How_to_build_a_package_locally)

*   插件：查找插件需要大量寻找更新站点，然后您永远无法确定您获得了正确的二进制文件。有时更新站点会出现故障，或者当插件开发人员发布新的更新站点时，您会失去对 Eclipse 版本的支持。一个建议是制作更新站点的本地副本，以减少您遇到此类问题的风险。

*   Eclipse 更新：如果您希望您的团队切换 Eclipse 版本，您最终将只是在下一个版本上重建您的工具堆栈并让每个人都重新安装。仅运送拉链时，没有办法解决这个问题。

*   插件更新：Eclipse 旨在继续安装新版本的插件，但在大型生产团队中可能会适得其反。只要您的团队不外出并添加自己的更新站点，更新站点的本地镜像就可以提供帮助。

*   安全性：您是否需要阻止您的团队安装某些软件？需要签名工具怎么样？您必须编写插件来限制软件包的功能，并且您可能必须自己签署插件。PDE 版本对签名有一些支持。

*   长期维护：在几年（或有时几个月）内重建工具堆栈几乎是不可能的，因为对不同版本的 Eclipse 和不同插件版本的支持在 Eclipse 生态系统中动态变化。保存 Eclipse 包的副本。买大硬盘。镜像您使用的更新站点。

*   工作区设置：您可以将 Eclipse 部署到您的团队，但这只是该过程的第一步。工作区设置的自动化，例如首选项、项目、Checkstyle 或 PMD 配置，在减少您的团队准备工作所花费的时间方面大有帮助。此外，当您添加项目时，这些设置经常会发生变化，这会带来持续的管理麻烦。在传递 zip 时，我看到团队也会传递相应的 WIKI 页面或类似的东西。通常由每个开发人员确保他们遵循这些步骤。

*   管理多个包：也许你有一个包给你的开发团队，另一个包给你的 QA 团队。然后你的开发团队成长并分成两组，工具需求略有不同，现在你的 QA 团队也需要多个包。然后您开始在 Eclipse 之上发布您自己的插件，这样您就可以管理另一个包。几年后，您将所有时间都花在构建 Eclipse 包上，甚至不经尝试就成为了 Eclipse/P2/Update Site 专家。显然，这里的解决方案是雇人为你做这件事。:)

*   SMS 分发：这适用于 zip 文件，但推出更新会变得混乱。通常，人们使用 SMS 来下拉第一次安装，然后开发人员的工作就是让它保持最新状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-09T00:01:41.353

Eclipse 不是那些需要“安装”的应用程序之一，因为它可以被复制到一个目录结构中并设置了运行它的快捷方式（例如 BIRT 一体化发行版）。

我建议将它安装在一台机器上，安装所有插件，然后压缩目录并使用它分发到其他机器。

并且运行您自己的更新站点并不难，您只需要一个服务器，您只需要在其中安装您需要的插件版本，并在制作 zip 文件之前确保您的分发点指向该服务器。也没有什么可以阻止您的开发人员连接到另一个站点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T08:41:56.393

回答 Lokki 的原始问题，团队负责人可以创建团队自己的“发行版”，作为 .p2f 文件，其中包含插件 ID、更新站点和要使用的确切版本。

使用 (File -> Export -> Install -> Software Items to file) 准备插件列表文件 (*.p2f)，

文件示例

```
<?xml version='1.0' encoding='UTF-8'?>
<?p2f version='1.0.0'?>
<p2f version='1.0.0'>
  <ius size='5'>
    <iu id='org.chromium.sdk.feature.group' name='ChromeDevTools SDK' version='0.3.9.201302091448'>
      <repositories size='1'>
        <repository location='http://www.tomotaro1065.com/nodeclipse/updates/'/>
      </repositories>
    </iu>
    <iu id='org.chromium.debug.feature.group' name='Chromium JavaScript Remote Debugger' version='0.3.9.201302091448'>
      <repositories size='1'>
        <repository location='http://www.tomotaro1065.com/nodeclipse/updates/'/>
      </repositories>
    </iu>
    <iu id='com.eclipsesource.jshint.feature.feature.group' name='JSHint Eclipse Integration' version='0.9.6.20130319-2128'>
      <repositories size='1'>
        <repository location='http://github.eclipsesource.com/jshint-eclipse/updates/'/>
      </repositories>
    </iu>
    <iu id='markdown.editor.feature.feature.group' name='Markdown Editor' version='0.2.3'>
      <repositories size='1'>
        <repository location='http://winterwell.com/software/updatesite/'/>
      </repositories>
    </iu>
    <iu id='org.nodeclipse.feature.group' name='Nodeclipse' version='0.2.0.201302091448'>
      <repositories size='1'>
        <repository location='http://www.tomotaro1065.com/nodeclipse/updates/'/>
      </repositories>
    </iu>
  </ius>
</p2f> 
```

然后（文件->导入->从文件安装软件项）

![导入 -> 从文件安装软件项](https://i.stack.imgur.com/RqkQM.png)

[Eclipse Node.js IDE](https://github.com/Nodeclipse/eclipse-node-ide#installation)就是以这种方式组装的。

这个问题与 [Eclipse IDE 有关：安装插件集](https://stackoverflow.com/questions/15479513/eclipse-ide-install-set-of-plugins)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-02T01:13:13.870

我可能对任何试图组装自己的 Eclipse 发行版以熟悉 Eclipse 打包项目[http://www.eclipse.org/epp/](http://www.eclipse.org/epp/)的人感兴趣。为了建立一个私人更新站点，Sonatype 的 Nexus Professional 正是为了这个目的（商业许可）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T00:27:52.707

只需压缩 C:\eclipse\plugins 目录并分发。

只需确保开发人员使用“-clean”选项启动 Eclipse，以确保合并任何更改。

# visual-studio - 模拟睡眠中的 Windows 移动设备

> ID：351374
> 
> 赞同：0
> 
> 时间：2008-12-08T23:58:33.187
> 
> 标签：visual-studio, windows-mobile, emulation

是否可以使用 Microsoft 提供的设备模拟器模拟设备睡眠和唤醒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T02:33:37.193

是的，但是您必须使用修改过的内核（更改 OEMPowerOff）生成自己的仿真器映像。Bruce Eitman[在这里写了一篇博客](http://geekswithblogs.net/BruceEitman/archive/2008/08/11/platform-builder-getting-the-emulator-to-resume.aspx)。您没有详细说明您的需求，因此很难说，但您可以通过手动设置命名的电源管理事件来提供某种形式的模拟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-22T23:17:23.227

这是一个旧线程，但如果其他人偶然发现它，您*可以*让 Windows Mobile 仿真器“休眠”并唤醒，尽管不附加调试器。

1.  在应用程序运行时关闭模拟器窗口并保存状态。或者，将电源管理配置为在所需时间使模拟器休眠；模拟器将自动关闭并保存其状态。如果附加了调试器，它将失去连接并停止调试。
2.  打开设备模拟​​器管理器并单击刷新，直到模拟器显示为已断开连接（旁边没有图标）。右键单击模拟器名称并选择连接。
3.  模拟器唤醒并重新出现。如果您的应用程序正在侦听唤醒通知，则会在此时发出信号。

您也可以使用 Debug > Attach to Process 唤醒模拟器，但这并不总是成功。无论哪种方式，当调试器附加时，唤醒序列将已经执行。但是，如果您可以使用调试语句，这比修改模拟器图像更容易。

# oracle - 未索引的外键导致 TM Enqueue Contention

> ID：351375
> 
> 赞同：2
> 
> 时间：2008-12-08T23:58:49.830
> 
> 标签：oracle, indexing, foreign-keys, contention

因此，我们被告知，`TM Enq`争用的一种来源可能是未编入索引的 FK。我的问题是哪一个。

我有一个`INSERT INTO Table_B`正在录音的`TM Enq Wait`。

它包含作为`PK`其他表的父级的 a ，并且它具有`FK`限制为其他`PK`s 的列。

那么哪些`FK`需要索引：该表的列还是它的子表？

注意：我知道这不是 TM 争用的唯一原因。如果是这样的话，你能解释一下为什么不可能是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T02:45:23.943

不确定 Oracle TM 争用，但我会说通常外键关系的双方都被索引。否则，数据库将不得不进行表扫描。

*   每当您插入新的子记录时，都会使用父记录上的索引来验证父记录是否存在。通常这也是一个主键，所以当然有一个索引。
*   每当您更改或删除父记录时，都会使用子记录上的索引来执行级联（包括拒绝更新/删除）。

两边的索引也给数据库一个很好的机会进行快速（索引）连接，不管它的优化器更喜欢来自哪一边。

编辑：在谷歌上搜索过 TM 争用，听起来你可能错过了子记录上的键。但请确保它们在两侧都有，真的。

**编辑2：**回答评论，

> 如果您有一个 OLTP 表，它有 13 个 FK 来查找表，那么除了表、pk 和任何其他索引之外，我不热衷于 13 个索引更新。索引很重要，但出于特定原因。如果您从不更新父 PK 也不从父删除，则子索引就没那么有用了。或者是吗？

然后取决于您正在运行的连接和查询。例如，如果您运行如下查询：

```
SELECT o.something
  FROM oltp_tab o JOIN lookup l ON (o.lookup_no = l.lookup_no)
  WHERE l.lookup_name = ? 
```

那么查询优化器可能会喜欢子记录上的索引。

* * *

此外，根据[http://ashmasters.com/waits/enq-tm-contention/](http://ashmasters.com/waits/enq-tm-contention/)，如果您完全更改父表，您几乎需要拥有索引。显然，除非您有索引，否则您可以通过同时更改父表和子表来获得它们。所以这可能就是您所看到的（假设您没有做明显的事情，例如更新引用的列或删除行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T19:29:04.430

启用的外键关系的父（引用）列必须被索引，因为它必须具有启用的唯一键或主键约束。

你看到的是什么模式的 TM Enqueue？

# xhtml - 与 Content: application/xhtml+xml 服务页面相关的问题是什么

> ID：351380
> 
> 赞同：16
> 
> 时间：2008-12-09T00:03:20.697
> 
> 标签：xhtml, http-headers

从最近开始，我的一些新网页（XHTML 1.1）设置为对请求标头进行正则表达式，`Accept`并在用户代理接受 XML（Firefox 和 Safari 允许）时发送正确的 HTTP 响应标头。

IE（或任何其他不接受它的浏览器）只会获得纯`text/html`内容类型。

谷歌机器人（或任何其他搜索机器人）会对此有任何问题吗？我看过的方法有什么负面影响吗？您认为此标头嗅探器会对性能产生很大影响吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-09T05:55:31.127

内容协商（以及为不同的用户代理提供不同的内容/标头）的一个问题是代理服务器。考虑以下；我在 Netscape 的 4 天里遇到了这个问题，从那以后我就一直害怕服务器端的嗅探。

用户 A 使用 Firefox 下载您的页面，并获得 XHTML/XML 内容类型。用户的 ISP 在用户和您的站点之间有一个代理服务器，所以这个页面现在被缓存了。

用户 B（同一个 ISP）使用 Internet Explorer 请求您的页面。请求首先到达代理，代理说“嘿，我有那个页面，在这里；作为**application/xhtml+xml** ”。提示用户 B 下载文件（因为 IE 将下载以 application/xhtml+xml 发送的任何内容。

您可以使用[Vary Header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)来解决此特定问题，如这篇[456 Berea Street](http://www.456bereastreet.com/archive/200408/content_negotiation/)文章中所述。我还假设代理服务器在自动检测这些事情方面变得更聪明了。

这[就是 HTML/XHTML 的 CF](https://stackoverflow.com/questions/348736/xhtml-is-writing-self-closing-tags-for-elements-not-traditionally-empty-bad-pra)开始蔓延的地方。当您使用内容协商将 application/xhtml+xml 提供给一组用户代理，并将 text/html 提供给另一组用户代理时，您依赖你的服务器和你的用户之间的所有代理都表现得很好。

即使世界上所有的代理服务器都足够聪明，可以识别 Vary 标头（它们不是），您仍然必须与世界上的计算机管理员抗衡。世界上有很多聪明、有才华和敬业的 IT 专业人员。有更多不那么聪明的人整天双击安装程序应用程序并认为“互联网”是他们菜单中的蓝色 E。配置错误的代理仍然可能不正确地缓存页面和标题，让您不走运。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-09T01:57:09.843

唯一真正的问题是，如果您的页面包含无效代码，浏览器将显示 xml 解析错误，而在 text/html 中它们至少会显示可查看的内容。

除非您想嵌入 svg 或正在对页面进行 xml 处理，否则发送 xml 并没有任何好处。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-09T00:21:34.263

我使用内容协商来切换`application/xhtml+xml`，`text/html`就像你描述的那样，没有注意到搜索机器人有任何问题。但严格来说，您应该考虑接受标头中的 q 值，该值指示用户代理对每种内容类型的偏好。如果用户代理更愿意接受`text/html`但将接受`application/xhtml+xml`作为替代，那么为了最大的安全性，您应该将页面用作`text/html`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T15:52:21.547

问题是您需要将标记限制为 HTML 和 XHTML 的子集。

*   您不能使用 XHTML 特性（命名空间、所有元素的自闭合语法），因为它们会破坏 HTML（例如`<script/>`，对`text/html`解析器不关闭并且会杀死文档直到下一个`</script>`）。
*   您不能使用 XML 序列化程序，因为它可能会破坏`text/html`模式（可能会使用前面提到的纯 XML 功能，可能会添加标记名前缀（PHP DOM 有时会这样做`<default:h1>`）。`<script>`在 HTML 中是 CDATA，但 XML 序列化程序可能会输出`<script>if (a &amp;&amp; b)</script>`）。
*   您不能使用 HTML 的紧凑语法（隐含标签、可选引号），因为它不会解析为 XML。
*   使用 HTML 工具（包括大多数模板引擎）是有风险的，因为它们不关心格式是否正确（单个未转义或将完全破坏 XML `&`，并使您的网站看起来*只能在 IE 中工作！*）`href``<br>`

 *我已经测试了我的纯 XML 网站的索引。即使我使用`application/xml`了 MIME 类型，它也已被索引，但无论如何它似乎被解析为 HTML（Google 没有索引`<[CDATA[ ]]>`分段中的文本）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-06T00:50:44.653

由于 IE 不支持 xhtml 作为 application/xhtml+xml，因此获得跨浏览器支持的唯一方法是使用内容协商。根据[Web Devout](http://www.webdevout.net/articles/beware-of-xhtml#content_negotiation)的说法，由于滥用通配符，内容协商很困难，其中 Web 浏览器声称支持现有的每种类型的内容！Safari 和 Konquer 支持 xhtml，但仅通过通配符表示支持，而 IE 不支持，但也表示支持。

W3C[建议仅将 xhtml 发送到](http://www.w3.org/TR/xhtml-media-types/#media-types)在 HTTP Accept 标头中明确声明支持的浏览器，而忽略那些未明确声明支持的浏览器。但请注意，标头并不总是可靠的，并且已知会导致缓存问题。即使你能让这个工作，必须维护两个相似但不同的版本也会很痛苦。

考虑到所有这些问题，我赞成放弃 xhtml，当然，当您的工具和库允许时。

# performance - 如何更有效地使用 MKS Integrity（源代码控制）

> ID：351383
> 
> 赞同：2
> 
> 时间：2008-12-09T00:04:38.713
> 
> 标签：performance, version-control, mks-integrity

我们使用 MKS Integrity 进行源代码控制。我无法控制它——我只需要使用它。

我应该知道和避免哪些“陷阱”？而且，该软件是否有任何巧妙的东西可以让我更好地使用它？

我已经遇到了源代码管理中的树结构与我的沙箱中的树结构不匹配的情况。在不止一种情况下，一个文件存在于两个地方，当我重新同步时，我得到了当前版本，然后一个旧版本覆盖了它，然后就不再同步了。找到较旧的文件是一项挑战，因为当然，树结构不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-23T11:46:21.643

我从 1999 年开始使用 Source Control。它非常可靠，我们从未丢失过更改历史记录。我们不会对分支做任何花哨的事情，所以我无法回答您的问题。

我假设您确实重新同步 (F6) 并更新到 head (F7)。

SI 建立在命令行设计之上。如果您使用命令行版本（pj.exe 等），您可能会得到更一致的结果。文档不是微不足道的。

我们正在尝试迁移到 Subversion，因为 MKS 想要为他们最新的企业版本提供可笑的资金。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-18T17:10:07.827

刚刚发现了这个 MKS 陷阱：它一次只允许一个成员的一个修订版有一个特定的标签。

遇到这种情况：我们团队中的某个人重命名了一个 pdf 资源，在文件名中添加了 _Old（他这样做而不是删除它，因为他希望它仍然是我们部署的一部分）

然后他添加了新版本的 pdf，将其添加到同一个存档中，以便它连接到现有的修订历史图表。

现在，如果您查看该成员的修订历史记录，您会发现同一成员的两个修订版本被同一开发路径使用。

作为我们部署过程的一部分，我们检查点正在部署的工件，将标签应用于成员以指定他们所属的版本。

由于 MKS 仅将标签应用于一个修订，因此当我查看检查点时，看起来新的 pdf 未包含在我们的部署中，因为它缺少标签

另外，**避免视觉工作室集成**！自从安装它以来，我团队的几个成员不得不与频繁的 Visual Studio 崩溃作斗争，显然它的分支机制依赖于完整性命令行或 gui 客户端中没有等效的功能。因此，如果您团队中的任何人使用 Visual Studio 集成，除非他们工作的分支是通过集成创建的，否则它们将无法工作。因此，您会发现自己被困在 Visual Studio 中做的事情，Visual Studio 做的很慢而且很差，只是为了让使用集成的团队成员可以使用它。

# vb.net - 是否有任何 vb 应用程序迁移到 delphi？

> ID：351390
> 
> 赞同：3
> 
> 时间：2008-12-09T00:08:22.340
> 
> 标签：vb.net, delphi, vb6, vb6-migration

我想听听经典 vb 开发人员将他们的应用程序迁移到 delphi 而不是 vb.net 的经验。效果如何？你是高兴还是遗憾你没有搬到 vb.net？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T08:19:24.690

我不是真正的 vb 开发人员，而是被迫维护一些 vb 应用程序一段时间的 Delphi 开发人员。我尝试将一个 vb 应用程序迁移到 vb.net，在那之后我再也没有尝试过。我成功地将几个 vb 应用程序迁移到 Delphi。为一些已经使用过的 OCX 找到原生的 Delphi 替代品并不容易，而且让下背部感到痛苦（我永远不会再依赖我没有源代码的第三方库。） ，但结果很好。

但是如上所述：我是一位经验丰富的 Delphi 开发人员，因此我不必在迁移 vb 应用程序的同时学习 Delphi。这当然让它变得容易多了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-09T07:20:27.507

我刚刚在[DelphiFeeds](http://www.delphifeeds.com/)上发现了这个：

**[面向 Visual Basic 开发人员的 Delphi](http://delphi.about.com/od/beginners/a/vb2delphi.htm)** *帮助将 VB 应用程序（知识和技能）迁移到 Delphi*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T06:28:00.343

我有一个好朋友不久前从 Classic VB 迁移到 Delphi（回到 .NET 之前）。他对这一举动非常满意。

他工作的公司用 VB 制作应用程序，他们组建了一个特殊的团队（2 名开发人员）在 Delphi 中创建 Active X 控件，供公司的其他人使用。此外，当有一些他们在 VB 中无法完成的事情时，Delphi 团队就会去做。那是他被介绍给德尔福的时候。

他说没过多久，Delphi 团队就可以比开发团队的其他成员更快地在 Delphi 中制作应用程序原型（他从未说过有多大，但多于两个）。该公司从未从 VB 切换到 Delphi，因为有人认为 VB 是更好的解决方案，尽管有证据表明 Delphi 更强大、更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-09T08:18:56.640

几年是我在我们的安置年与另一个学生一起工作。我们为一家非常大的制造公司工作。他的一个项目是创建一个经典的 VB 应用程序，以与生产线上的多个摄像头交互并实时分析数据。在经典的 VB 中，这是一团糟——处理来自单个摄像机（7 个摄像机，24 fps）的单个帧平均需要 1.5 分钟，他无法优化它。

他最终涉足 Delphi 并重新编写了该应用程序并运行得非常好。我最近接触了几个还在那里工作的朋友，他的应用程序已经运行了 3 年了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-13T09:49:42.060

我曾在 VB 和 Delphi 中工作过，而 Delphi (IMO)的令人沮丧/限制要少*得多。*您应该能够根据需要使用 ActiveX / OCX 控件（尽管我同意其他评论：尽可能避免使用 ActiveX / OCX 控件，并确保没有完整的源代码）。我们从 VB 迁移到 Delphi 的应用程序（两个）运行良好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-11T11:59:22.497

我确实尝试在两个实例中从 VB 迁移到 Delphi，但不幸的是我不得不在一个应用程序中中途中止，因为它使用了很多第三方 ActiveX（大部分来自 ComponentOne，一些来自 CodeJoke）。我们不得不中途中止，因为我们找不到任何具有与项目中使用的 ActiveX 等效功能的 VCL 组件。

这对我们来说是一场噩梦。感谢上帝，我们中途中止并切换到 C#。令人难以置信的是，我们可以将 .NET 组件中的所有功能都放在同上！

我们设法转换的应用程序运行良好，但我们不得不摆脱在原始软件中实现的一些功能，因为它们需要在 Delphi 中进行更多工作。

# visual-studio - 你知道 Visual Studio 的任何文件比较插件吗

> ID：351394
> 
> 赞同：20
> 
> 时间：2008-12-09T00:10:42.740
> 
> 标签：visual-studio, diff, add-in

Visual Studio 是否有任何内置的插件解决方案来比较两个文件并显示差异的结果？我找不到一个...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-02-03T10:04:03.340

我使用[WinMerge](http://www.winmerge.org)。不如 Beyond Compare 好，但它是免费和开源的。

另请查看[Visual Studio 比较工具](http://www.codeplex.com/ComparisonTools)，它是一个将其连接到 WinMerge 的 Visual Studio 加载项。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-22T18:42:02.537

[这](http://blogs.msdn.com/jmanning/articles/535573.aspx)是一篇很好的文章，描述了许多 3rd 方差异和合并工具到 Visual Studio 中的集成——包括 araxis、beyond compare、WinMerge 和许多其他工具。这篇文章非常需要，因为 VS 可以提供的命令行参数没有完整记录。

就个人而言，我从内置工具切换到 Araxis，并且总体上对它感到满意。我也对集市很好奇，据说（[根据其差异组件的多彩作者](http://bramcohen.livejournal.com/37690.html)），“解决了差异问题”......有人有这方面的经验吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-06-09T06:34:52.430

对我而言，[CodeCompare](http://www.devart.com/codecompare/)对您的任务来说是一个有用的解决方案。您可以在一个环境中比较、合并和编辑数据 - 在 Visual Studio 中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-01-20T13:48:34.243

除了[djeidot](https://stackoverflow.com/users/4880/djeidot)的回答：请注意，如果您使用的是 Visual Studio 2010，[Visual Studio 比较工具](http://www.codeplex.com/ComparisonTools)在 VS 2008 下运行得非常好，但在 VS 2010 下则不行......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-09T00:16:12.667

Visual Studio 2005 Team Edition 有一个内置版本（基于 WinDiff？），但您可以合并第三方工具，例如

[Beyond Compare](http://www.scootersoftware.com/)我经常使用的。

请参阅[此处](http://elegantdevelopment.blogspot.com/2007/03/visual-studio-file-comparison-settings.html)了解操作方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-09T01:12:23.770

该功能似乎与源代码管理有关。所以它实际上是源代码控制问题。

如果您不使用源代码控制 - 您应该 - 尝试[www.sourcegear.com](http://www.sourcegear.com)的 The Vault以获得一个好的（并且对一个用户免费）商业源代码控制系统。还有其他的，它们应该带有一个比较工具（当您安装 Vault 客户端并连接到源代码控制项目时，Vault 有一个并且它安装到 VS 中）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-12T08:34:49.660

将一些版本控制插件添加到 Visual Studio 后，您可以选择 diff 工具。
Perforce 正在免费提供他们的差异和合并工具，它非常好，您不必使用 perforce 版本控制系统来使用它。可以从他们的网站下载；它被称为 p4merge。运行安装程序时，您应该只选择功能“Visual Merge Tool (P4Merge)”并取消选择仅在使用 perforce 时相关的其他功能。

我个人使用 vim 是因为它可以进行语法着色（我觉得这非常有用，尤其是在您进行差异或合并时），但它的学习曲线很陡峭。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-09T00:18:39.887

据我所知，[Beyond Compare](http://www.scootersoftware.com/index.php)可能还是值得一看的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-09T01:49:42.137

根据您的用例，我会推荐 VisualSVN。您将获得 VS IDE 中内置的 SVN 源代码控制功能，以及将任何源代码文件与来自 SVN 的任何签入版本文件进行比较的能力。

它为您安装 SVN（Subversion）、TortoiseSVN、Diff 和 VisualSVN（Visual Studio 集成）的所有先决条件。

它还为 SVN 服务器提供了一个不错的快速 Windows 安装程序，它担心 apache 等，所以你不必这样做。

对于非 linux 极客来说必不可少，它不是免费的，但 49 美元很划算，

[http://www.visualsvn.com/](http://www.visualsvn.com/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-03T00:07:47.177

SlickEdit 工具版本控制工具箱具有与 SlickEdit 程序员编辑器相同的内置差异工具。版本控制工具箱不是免费的，但也不是那么昂贵。差异工具非常好。

# jquery - 显示父元素的项目

> ID：351402
> 
> 赞同：1
> 
> 时间：2008-12-09T00:16:37.907
> 
> 标签：jquery, html, jquery-ui, toggle, show-hide

假设我们有类似的东西：

```
 <div class="row">
      <div class="box">
          <a class="more" href="#more"/>
      </div>
      <div class="hidden">
          stuff
      </div> 
 </div>
 <div class="row">
      <div class="box">
          <a class="more" href="#more"/>
      </div>
      <div class="hidden">
          stuff
      </div>  
  </div> 
```

所以当你点击`more link`它`toggles`时`hidden class`。但不是两个隐藏类。

我试图编辑一些东西，`$(this)`但什么也没有。

刚开始 jquery/js 所以不是最好的。

这就是我所拥有的

```
$(".row .more").click( 
        function()
        {
            var parentTag = $(this);
            var parentTag = "." + $(this).parent().parent().parent().attr('class') + "";
            //$(this).prepend(document.createTextNode(parentTag));      
            $(parentTag + " .forum-stats").slideToggle("slow");
            return false;
        }
    ); 
```

它现在可以工作了。:( 我希望你能理解我的问题......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T00:29:17.057

这可能不是最有效的解决方案，但试试这个：

```
$(".row #more").click(function() {
        $(this).parents(".row").children(".hidden").slideToggle("slow");    
    }
); 
```

如果我正确理解了您的问题，那应该可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T00:35:19.803

```
$('a[href=#more]').click(function() {
    $(this).parents('.row > div.hidden').slideToggle('slow');
}); 
```

# javascript - 如何将某些内容附加到数组？

> ID：351409
> 
> 赞同：2891
> 
> 时间：2008-12-09T00:20:05.937
> 
> 标签：javascript, arrays, append

如何在 JavaScript 中将对象（例如字符串或数字）附加到数组中？

* * *

## 回答 #1

> 赞同：4981
> 
> 时间：2008-12-09T00:24:28.143

使用该[`Array.prototype.push`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push)方法将值附加到数组的末尾：

```
// initialize array
var arr = [
  "Hi",
  "Hello",
  "Bonjour"
];

// append new value to the array
arr.push("Hola");

console.log(arr);
```

* * *

您可以使用该`push()`函数在一次调用中将多个值附加到数组：

```
// initialize array
var arr = ["Hi", "Hello", "Bonjour", "Hola"];

// append multiple values to the array
arr.push("Salut", "Hey");

// display all values
for (var i = 0; i < arr.length; i++) {
  console.log(arr[i]);
}
```

* * *

**更新**

如果要将一个数组的项目添加到另一个数组，可以使用[`firstArray.concat(secondArray)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)：

```
var arr = [
  "apple",
  "banana",
  "cherry"
];

// Do not forget to assign the result as, unlike push, concat does not change the existing array
arr = arr.concat([
  "dragonfruit",
  "elderberry",
  "fig"
]);

console.log(arr);
```

**更新**

如果您想将任何值添加到数组的开头（即第一个索引），那么您可以[`Array.prototype.unshift`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift)为此目的使用这个答案。

```
var arr = [1, 2, 3];
arr.unshift(0);
console.log(arr);
```

它还支持一次附加多个值，就像`push`.

* * *

**更新**

***ES6***语法的另一种方法是使用***[扩展语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)***返回一个新数组。这使原始数组保持不变，但返回一个带有新项的新数组，符合函数式编程的精神。

```
const arr = [
  "Hi",
  "Hello",
  "Bonjour",
];

const newArr = [
  ...arr,
  "Salut",
];

console.log(newArr);
```

* * *

## 回答 #2

> 赞同：1096
> 
> 时间：2008-12-09T00:35:27.370

如果您只附加一个变量，那么`push()`就可以了。如果您需要附加另一个数组，请使用`concat()`：

```
var ar1 = [1, 2, 3];
var ar2 = [4, 5, 6];

var ar3 = ar1.concat(ar2);

alert(ar1);
alert(ar2);
alert(ar3);
```

除非重新分配，否则concat 不会影响`ar1`，`ar2`例如：

```
var ar1 = [1, 2, 3];
var ar2 = [4, 5, 6];

ar1 = ar1.concat(ar2);
alert(ar1);
```

有很多关于*[JavaScript Reference](http://www.javascriptkit.com/jsref/)*的重要信息。

* * *

## 回答 #3

> 赞同：421
> 
> 时间：2010-09-29T22:40:47.717

一些快速基准测试（每个测试 = 500k 附加元素，结果是多次运行的平均值）显示如下：

火狐 3.6 (Mac):

*   小阵列：**`arr[arr.length] = b`更快**（300ms vs. 800ms）
*   大型阵列：**`arr.push(b)`更快**（500ms vs. 900ms）

Safari 5.0 (Mac):

*   小阵列：**`arr[arr.length] = b`更快**（90ms vs. 115ms）
*   大型阵列：**`arr[arr.length] = b`更快**（160ms vs. 185ms）

谷歌浏览器 6.0 (Mac):

*   小阵列：**没有显着差异**（Chrome 速度很快！只有 ~38ms ！！）
*   大数组：**无显着差异**（160ms）

我更喜欢`arr.push()`语法，但我认为使用`arr[arr.length]`版本会更好，至少在原始速度方面。不过，我很想看看 IE 运行的结果。

* * *

我的基准测试循环：

```
function arrpush_small() {
    var arr1 = [];
    for (a = 0; a < 100; a++)
    {
        arr1 = [];
        for (i = 0; i < 5000; i++)
        {
            arr1.push('elem' + i);
        }
    }
}

function arrlen_small() {
    var arr2 = [];
    for (b = 0; b < 100; b++)
    {
        arr2 = [];
        for (j = 0; j < 5000; j++)
        {
            arr2[arr2.length] = 'elem' + j;
        }
    }
}

function arrpush_large() {
    var arr1 = [];
    for (i = 0; i < 500000; i++)
    {
        arr1.push('elem' + i);
    }
}

function arrlen_large() {
    var arr2 = [];
    for (j = 0; j < 500000; j++)
    {
        arr2[arr2.length] = 'elem' + j;
    }
} 
```

* * *

## 回答 #4

> 赞同：318
> 
> 时间：2012-08-30T05:24:44.640

我认为值得一提的是，push 可以使用多个参数调用，这些参数将按顺序附加到数组中。例如：

```
var arr = ['first'];
arr.push('second', 'third');
console.log(arr);
```

因此，您可以使用 push.apply 将数组附加到另​​一个数组，如下所示：

```
var arr = ['first'];
arr.push('second', 'third');
arr.push.apply(arr, ['forth', 'fifth']);
console.log(arr);
```

[Annotated ES5](http://es5.github.com/)有更多关于[push](http://es5.github.com/#x15.4.4.7)和[apply](http://es5.github.com/#x15.3.4.3)做什么的信息。

2016 年更新：使用[spread](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator)，您不再需要它`apply`，例如：

```
var arr = ['first'];
arr.push('second', 'third');

arr.push(...['fourth', 'fifth']);
console.log(arr) ;
```

* * *

## 回答 #5

> 赞同：84
> 
> 时间：2014-03-17T16:27:46.367

您可以使用`push`and`apply`函数来追加两个数组。

```
var array1 = [11, 32, 75];
var array2 = [99, 67, 34];

Array.prototype.push.apply(array1, array2);
console.log(array1);
```

它将附加`array2`到`array1`. 现在`array1`包含`[11, 32, 75, 99, 67, 34]`. 这段代码比编写`for`循环复制数组中的每一项要简单得多。

* * *

## 回答 #6

> 赞同：69
> 
> 时间：2015-06-09T14:02:48.443

使用新的 ES6[扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)，连接两个数组`push`变得更加容易：

```
var arr = [1, 2, 3, 4, 5];
var arr2 = [6, 7, 8, 9, 10];
arr.push(...arr2);
console.log(arr);
```

这会将 的内容添加`arr2`到`arr`.

[Babel REPL 示例](https://babeljs.io/repl/#?experimental=true&evaluate=true&loose=false&spec=false&code=var%20arr%20%3D%20%5B1%2C%202%2C%203%2C%204%2C%205%5D%3B%0Aarr.push(...%5B6%2C%207%2C%208%2C%209%2C%2010%5D)%3B%0Aconsole.log(arr)%3B)

* * *

## 回答 #7

> 赞同：56
> 
> 时间：2011-08-03T11:46:29.507

If`arr`是一个数组，并且`val`是您希望添加的值，请使用：

```
arr.push(val); 
```

例如

```
var arr = ['a', 'b', 'c'];
arr.push('d');
console.log(arr);
```

* * *

## 回答 #8

> 赞同：52
> 
> 时间：2011-08-13T00:52:19.880

使用[`concat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)：

```
a = [1, 2, 3];
b = [3, 4, 5];
a = a.concat(b);
console.log(a);
```

* * *

## 回答 #9

> 赞同：36
> 
> 时间：2015-11-29T17:12:38.957

[现在大多数浏览器都支持的具有ECMAScript 5](https://en.wikipedia.org/wiki/ECMAScript#5th_Edition) (ES5) 标准的 JavaScript ，您可以使用`apply()`附加`array1`到`array2`.

```
var array1 = [3, 4, 5];
var array2 = [1, 2];

Array.prototype.push.apply(array2, array1);

console.log(array2); // [1, 2, 3, 4, 5] 
```

Chrome、Firefox、Internet Explorer 和[Edge支持的](https://en.wikipedia.org/wiki/Internet_Explorer)[ECMAScript 6](https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015) (ES6) 标准的JavaScript ，您可以使用运算符：`spread`

```
"use strict";
let array1 = [3, 4, 5];
let array2 = [1, 2];

array2.push(...array1);

console.log(array2); // [1, 2, 3, 4, 5] 
```

当浏览器正在考虑逻辑时，`spread`运算符将替换`array2.push(...array1);`为。`array2.push(3, 4, 5);`

**奖励积分**

如果您想创建*另一个*变量来存储两个数组中的所有项目，您可以这样做：

**ES5** `var combinedArray = array1.concat(array2);`

**ES6** `const combinedArray = [...array1, ...array2]`

展开运算符 ( `...`) 用于展开集合中的所有项目。

* * *

## 回答 #10

> 赞同：33
> 
> 时间：2014-08-29T13:22:21.187

如果要附加两个数组 -

```
var a = ['a', 'b'];
var b = ['c', 'd']; 
```

那么你可以使用：

```
var c = a.concat(b); 
```

如果您想将记录添加`g`到数组（`var a=[]`），那么您可以使用：

```
a.push('g'); 
```

* * *

## 回答 #11

> 赞同：30
> 
> 时间：2016-12-02T10:08:56.110

**有几种方法可以在 JavaScript 中附加数组：**

**1)**该`push()`方法将一个或多个元素添加到数组的末尾，并返回数组的新长度。

```
var a = [1, 2, 3];
a.push(4, 5);
console.log(a); 
```

输出：

```
[1, 2, 3, 4, 5] 
```

**2)**该`unshift()`方法将一个或多个元素添加到数组的开头并返回数组的新长度：

```
var a = [1, 2, 3];
a.unshift(4, 5);
console.log(a); 
```

输出：

```
[4, 5, 1, 2, 3] 
```

**3)**该`concat()`方法用于合并两个或多个数组。此方法**不会更改**现有数组，而是返回一个新数组。

```
var arr1 = ["a", "b", "c"];
var arr2 = ["d", "e", "f"];
var arr3 = arr1.concat(arr2);
console.log(arr3); 
```

输出：

```
[ "a", "b", "c", "d", "e", "f" ] 
```

**4）**您可以使用数组的`.length`属性将元素添加到数组的末尾：

```
var ar = ['one', 'two', 'three'];
ar[ar.length] = 'four';
console.log( ar ); 
```

输出：

```
 ["one", "two", "three", "four"] 
```

**5)**该`splice()`方法通过删除现有元素和/或添加新元素来更改数组的内容：

```
var myFish = ["angel", "clown", "mandarin", "surgeon"];
myFish.splice(4, 0, "nemo");
//array.splice(start, deleteCount, item1, item2, ...)
console.log(myFish); 
```

输出：

```
["angel", "clown", "mandarin", "surgeon","nemo"] 
```

**6）**您还可以通过指定新索引并分配值来向数组中添加新元素：

```
var ar = ['one', 'two', 'three'];
ar[3] = 'four'; // add new element to ar
console.log(ar); 
```

输出：

```
["one", "two","three","four"] 
```

* * *

## 回答 #12

> 赞同：25
> 
> 时间：2015-05-07T13:55:57.437

该`push()`方法将新项目添加到数组的末尾，并返回新的长度。例子：

```
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.push("Kiwi");

// The result of fruits will be:
Banana, Orange, Apple, Mango, Kiwi 
```

您的问题的确切答案已经得到解答，但让我们看看其他一些将项目添加到数组的方法。

该`unshift()`方法将新项目添加到数组的开头，并返回新长度。例子：

```
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.unshift("Lemon", "Pineapple");

// The result of fruits will be:
Lemon, Pineapple, Banana, Orange, Apple, Mango 
```

最后，该`concat()`方法用于连接两个或多个数组。例子：

```
var fruits = ["Banana", "Orange"];
var moreFruits = ["Apple", "Mango", "Lemon"];
var allFruits = fruits.concat(moreFruits);

// The values of the children array will be:
Banana, Orange, Apple, Mango, Lemon 
```

* * *

## 回答 #13

> 赞同：24
> 
> 时间：2017-02-22T12:46:18.753

现在，您可以利用[ES6](https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015)语法

```
let array = [1, 2];
console.log([...array, 3]); 
```

保持原始数组不可变。

* * *

## 回答 #14

> 赞同：20
> 
> 时间：2018-06-28T19:01:32.350

**附加单个元素**

```
// Append to the end
arrName.push('newName1');

// Prepend to the start
arrName.unshift('newName1');

// Insert at index 1
arrName.splice(1, 0,'newName1');
// 1: index number, 0: number of element to remove, newName1: new element

// Replace index 3 (of exists), add new element otherwise.
arrName[3] = 'newName1'; 
```

**附加多个元素**

```
// Insert from index number 1
arrName.splice(1, 0,'newElemenet1', 'newElemenet2', 'newElemenet3');
// 1: index number from where insert starts,
// 0: number of element to remove,
//newElemenet1,2,3: new elements 
```

**追加一个数组**

```
// Join two or more arrays
arrName.concat(newAry1, newAry2);
//newAry1,newAry2: Two different arrays which are to be combined (concatenated) to an existing array 
```

* * *

## 回答 #15

> 赞同：17
> 
> 时间：2012-08-15T19:02:11.183

如果您知道最高索引（例如存储在变量“i”中），那么您可以这样做

```
myArray[i + 1] = someValue; 
```

但是，如果您不知道，那么您可以使用

```
myArray.push(someValue); 
```

正如其他答案所建议的那样，或者您可以使用

```
myArray[myArray.length] = someValue; 
```

请注意，数组是从零开始的，因此*.length*返回最高索引加一。

另请注意，您不必按顺序添加，实际上可以跳过值，如

```
myArray[myArray.length + 1000] = someValue; 
```

在这种情况下，介于两者之间的值将具有*undefined*值。

因此，在循环 JavaScript 以验证某个值在该点是否确实存在时，这是一种很好的做法。

这可以通过以下方式完成：

```
if(myArray[i] === "undefined"){ continue; } 
```

如果您确定数组中没有任何零，那么您可以这样做：

```
if(!myArray[i]){ continue; } 
```

当然，在这种情况下，请确保不要将 myArray[i] 用作条件（正如互联网上的某些人建议的那样，一旦`i`大于最高索引，它将返回*undefined*评估结果为*假*）。

* * *

## 回答 #16

> 赞同：16
> 
> 时间：2017-10-24T10:44:14.763

**您可以使用 JavaScript[扩展运算符语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)来做到这一点：**

```
// Initialize the array

var arr = [
    "Hi",
    "Hello",
    "Bangladesh"
];

// Append a new value to the array

arr = [...arr, "Feni"]; 

// Or you can add a variable value

var testValue = "Cool";

arr = [...arr, testValue ];

console.log(arr);

// Final output [ 'Hi', 'Hello', 'Bangladesh', 'Feni', 'Cool' ] 
```

* * *

## 回答 #17

> 赞同：12
> 
> 时间：2015-10-28T09:09:09.527

`concat()`，当然，也可以与二维数组一起使用。无需循环。

```
var a = [
    [1, 2],
    [3, 4] ];

var b = [
    ["a", "b"],
    ["c", "d"] ];

b = b.concat(a);

alert(b[2][1]); // Result: 2 
```

* * *

## 回答 #18

> 赞同：11
> 
> 时间：2014-09-18T18:40:39.743

### 让数组长度属性完成工作：

```
myarray[myarray.length] = 'new element value added to the end of the array'; 
```

myarray.length 返回数组中的字符串数。 **JavaScript 是从零开始的**，因此数组的下一个元素键将是数组的当前长度。

例子：

```
var myarray = [0, 1, 2, 3],
    myarrayLength = myarray.length; // myarrayLength is set to 4 
```

* * *

## 回答 #19

> 赞同：10
> 
> 时间：2015-07-21T14:38:37.567

> 只想添加一个用于非破坏性添加元素的片段。

```
var newArr = oldArr.concat([newEl]); 
```

* * *

## 回答 #20

> 赞同：8
> 
> 时间：2018-05-26T22:01:08.857

## 将值附加到数组

由于[Array.prototype.push](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push)将一个或多个元素添加到数组的末尾并*返回数组的新长度，因此*有时我们只想获取新的最新数组，因此我们可以这样做：

```
const arr = [1, 2, 3];
const val = 4;

arr.concat([val]); // [1, 2, 3, 4] 
```

要不就：

```
[...arr, val] // [1, 2, 3, 4] 
```

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2016-09-29T22:10:31.167

如果您使用的是[ES6](https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015)，则可以使用[扩展](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Operators/Spread_operator)运算符来执行此操作。

```
var arr = [
    "apple",
    "banana",
    "cherry"
];

var arr2 = [
    "dragonfruit",
    "elderberry",
    "fig"
];

arr.push(...arr2); 
```

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2018-06-19T15:26:27.513

## 附加单个项目

要将单个项目附加到数组，请使用[`push()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push)Array 对象提供的方法：

```
const fruits = ['banana', 'pear', 'apple']
fruits.push('mango')
console.log(fruits) 
```

`push()`改变原始数组。

要改为创建新数组，请使用[`concat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)Array 方法：

```
const fruits = ['banana', 'pear', 'apple']
const allfruits = fruits.concat('mango')
console.log(allfruits) 
```

请注意，`concat()`它实际上并没有向数组添加项目，而是创建了一个新数组，您可以将其分配给另一个变量，或重新分配给原始数组（将其声明为`let`，因为您不能重新分配 a `const`）：

```
const fruits = ['banana', 'pear', 'apple']
const allfruits = fruits.concat('mango')
console.log(allfruits) 
```

```
let fruits = ['banana', 'pear', 'apple']
fruits = fruits.concat('mango') 
```

## 追加多个项目

要将多个项目附加到数组，您可以[`push()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push)通过使用多个参数调用它来使用：

```
const fruits = ['banana', 'pear', 'apple']
fruits.push('mango', 'melon', 'avocado')
console.log(fruits) 
```

您还可以使用[`concat()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)之前看到的方法，传递以逗号分隔的项目列表：

```
const fruits = ['banana', 'pear', 'apple']
const allfruits = fruits.concat('mango', 'melon', 'avocado')
console.log(allfruits) 
```

或数组：

```
const fruits = ['banana', 'pear', 'apple']
const allfruits = fruits.concat(['mango', 'melon', 'avocado'])
console.log(allfruits) 
```

请记住，如前所述，此方法不会改变原始数组，但会返回一个新数组。

> 最初[发布于](https://flaviocopes.com/how-to-append-item-to-array/)

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2016-03-18T08:24:44.760

如果你想组合两个数组而不重复，你可以试试下面的代码：

```
array_merge = function (arr1, arr2) {
  return arr1.concat(arr2.filter(function(item){
    return arr1.indexOf(item) < 0;
  }))
} 
```

**用法：**

```
array1 = ['1', '2', '3']
array2 = ['2', '3', '4', '5']
combined_array = array_merge(array1, array2) 
```

**输出：**

[1,2,3,4,5]

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2016-02-17T18:31:48.877

如果要将单个值附加到数组中，只需使用 push 方法。它将在数组末尾添加一个新元素。

但是，如果您打算添加多个元素，则将这些元素存储在一个新数组中并将第二个数组与第一个数组连接起来......无论您希望如何。

```
arr=['a','b','c'];
arr.push('d');
//now print the array in console.log and it will contain 'a','b','c','d' as elements.
console.log(array); 
```

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2017-06-13T11:28:22.943

你 .push() 那个值进去。 **例子：** array.push(value);

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2017-05-14T12:18:18.543

我们在 JavaScript 中没有用于 Array 的*append*函数，但我们有**push**和**unshift**。想象一下你有下面的数组：

```
var arr = [1, 2, 3, 4, 5]; 
```

我们喜欢给这个数组附加一个值。我们可以做*arr.push(6)*，它会将 6 添加到数组的末尾：

```
arr.push(6); // Returns [1, 2, 3, 4, 5, 6]; 
```

我们也可以使用*unshift*，看看我们如何应用它：

```
arr.unshift(0); // Returns [0, 1, 2, 3, 4, 5]; 
```

它们是向数组添加或追加新值的主要功能。

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2018-08-22T04:53:12.683

如果要添加值，可以使用 push()，例如`arr.push("Test1", "Test2");`.

如果你有数组，你可以使用 concat()，例如`Array1.concat(Array2)`.

如果你只需要添加一个元素，你也可以尝试使用*长度*方法，例如`array[aray.length] = 'test';`.

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2018-08-07T09:48:46.137

在数组上附加项目

```
let fruits = ["orange", "banana", "apple", "lemon"]; /* Array declaration */

fruits.push("avacado"); /* Adding an element to the array */

/* Displaying elements of the array */

for(var i=0; i < fruits.length; i++){
  console.log(fruits[i]);
} 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2018-01-17T10:11:36.223

您可以使用*推送*方法。

```
Array.prototype.append = function(destArray){
    destArray = destArray || [];
    this.push.call(this, ...destArray);
    return this;
}
var arr = [1,2,5,67];
var arr1 = [7,4,7,8];
console.log(arr.append(arr1)); // [7, 4, 7, 8, 1, 4, 5, 67, 7]
console.log(arr.append("Hola")) // [1, 2, 5, 67, 7, 4, 7, 8, "H", "o", "l", "a"] 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2018-05-30T09:48:21.237

`push()`在数组末尾添加一个新元素。

`pop()`从数组末尾删除一个元素。

要将对象（例如字符串或数字）附加到数组，请使用：

```
array.push(toAppend); 
```

# cruisecontrol - Quick Test Pro（回归测试脚本） - Cruisecontrol.net

> ID：351410
> 
> 赞同：2
> 
> 时间：2008-12-09T00:20:43.673
> 
> 标签：cruisecontrol, qtp

任何人都成功地将 Quick Test Pro (QTP) 自动化测试脚本集成到 Cruisecontrol.net 中。

如果有人想在计划任务或 Cruisecontrol.net 中无人看管地运行它们

会更有用#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-23T02:10:31.600

我确信使用 QTP 自动化对象模型可以做到这一点。请参阅在线帮助的“QuickTest 高级参考”部分中的“QuickTest 自动化”。您应该能够创建一个简单的批处理文件来运行 QTP，然后可以通过 NAnt 和/或 CruiseControl 调用该批处理文件。

# c# - 如何在 C# 中找到用户名/身份

> ID：351415
> 
> 赞同：18
> 
> 时间：2008-12-09T00:23:06.880
> 
> 标签：c#, .net, windows-authentication, identity

我需要使用 C# 以编程方式查找用户名。具体来说，我想让系统/网络用户附加到当前进程。我正在编写一个使用 Windows 集成安全性的 Web 应用程序。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-12-09T05:26:40.903

身份的抽象视图通常是`IPrincipal`/ `IIdentity`：

```
IPrincipal principal = Thread.CurrentPrincipal;
IIdentity identity = principal == null ? null : principal.Identity;
string name = identity == null ? "" : identity.Name; 
```

这允许相同的代码在许多不同的模型（winform、asp.net、wcf 等）中工作——但它依赖于预先设置的标识（因为它是应用程序定义的）。例如，在 winform 中，您可能会使用当前用户的 windows 身份：

```
Thread.CurrentPrincipal = new WindowsPrincipal(WindowsIdentity.GetCurrent()); 
```

但是，主体也可以完全定制 - 它不一定与 Windows 帐户等有关。另一个应用程序可能使用登录屏幕来允许任意用户登录：

```
string userName = "Fred"; // todo
string[] roles = { "User", "Admin" }; // todo
Thread.CurrentPrincipal = new GenericPrincipal(new GenericIdentity(userName), roles); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-09T00:28:23.360

取决于应用程序的上下文。您可以使用 Environment.UserName (console) 或 HttpContext.Current.User.Identity.Name (web)。请注意，使用 Windows 集成身份验证时，您可能需要从用户名中删除域。此外，您可以在代码隐藏中使用页面的 User 属性获取当前用户，而不是从当前 HTTP 上下文中引用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-10T08:24:03.857

```
string user = System.Security.Principal.WindowsIdentity.GetCurrent().Name ; 
```

# python - 以多记录 html 形式确定记录

> ID：351440
> 
> 赞同：1
> 
> 时间：2008-12-09T00:33:01.043
> 
> 标签：python, html, cgi

在一个 html 表单中，我从一个表中显示多个记录，准备更新。

现在我使用：`name=<column-name>_<pk-id> value=<value>`用于字段。然后在我的python脚本中我去：

```
for key in form.keys():
    if key.startswith('<name-A>_'):
        update <table> set <name-A> = <value> where pk=<pk-id>
    if key.startswith('<name-B>_'):
        update <table> set <name-B> = <value> where pk=<pk-id> 
```

是否有更“有机”的方式来处理多记录表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T00:48:36.703

在 Java 应用程序中，将名称 JSON 化是很常见的。

```
<input name="records[pk].fieldName"/> 
```

`pk`是行和`fieldName`字段的主键。当然，大多数框架都透明地处理这个问题。每条记录最终都作为一个类的实例，每个字段都有一个属性，所有这些都放入一个名为“记录”的列表中。您可能需要编写某种解释器，但这应该不会太难。

# delphi - 我的应用程序图标已损坏（编译器有问题？）

> ID：351443
> 
> 赞同：3
> 
> 时间：2008-12-09T00:35:27.107
> 
> 标签：delphi, icons

我的应用程序的“应用程序图标”是错误的。

我的应用程序在任务栏中显示的图标与经典的 Delphi 图标不同。而是显示我的 VCL 之一的图标。我的应用程序中没有使用“被盗”图标的特定 VCL，但使用了同一包中的其他 VCL。

相关信息： - 如果我将应用程序拖放到桌面上，图标看起来还可以。- 当我将光标放在图标上时，Windows Commander 中的图标看起来不错。- 当我将它拖放到“按钮栏”中时，该图标在 Windows Commander 中看起来不正常。结论：图标不是在运行时意外更改的（即使应用程序没有运行也有问题）。

我使用的是 Delphi 7。为了确定，我禁用了 EurekaLog 和 FastMM，并重建了应用程序。问题仍然存在。我什至不知道为什么编译器会插入错误的图标。我真的需要一些提示。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-09T06:02:15.090

在 IDE 中配置的图标将插入到名为*MANICON的项目的**RES*文件中。如果您的*DPR*文件中有该行，则项目资源文件会通过编译器链接到您的应用程序。*`{$R *.RES}`*

 **资源管理器为您的*EXE*文件显示的图标是您应用程序中的第一个图标。图标或按字母顺序排序。如果 Explorer 显示了错误的图标，那么很可能您已将其他图标链接到您的应用程序，并且其中一个图标的名称*位于 MANICON*之前。它可能有一个数字名称。（我不知道 Windows Commander 如何决定显示什么图标。）

如果您的项目使用的某些组件或其他单元具有使用指令链接到它的资源文件`$R`，那么它将包含在您的项目中。您不必对图标进行任何特定引用，甚至不必在代码中的任何位置提及组件的类名。仅在已用单元中存在`$R`指令就足以链接整个资源文件。编译器不会执行任何“智能链接”来删除未使用的资源，因为它无法在编译时检测资源使用情况。

常见的问题是资源管理器显示错误的图标，但程序本身使用正确的图标。通过将“错误”图标重命名为*MAINICON*之后，可以解决此问题。但是您说您的程序的行为方式相反：资源管理器（桌面）显示正确的图标，而您的程序使用了错误的图标，对吗？

一种可能性是您的*DPR*`$R`文件中的指令丢失或错误。Delphi 可能正在链接该文件的旧版本。尝试删除项目的*RES*文件。当 IDE 发现它丢失时，它会重新创建它。此时，重新配置项目选项中的图标。您可能还必须重置项目的版本号。

 **您还应该检查已编译程序中资源的布局。我不记得 Delphi 是否带有适合该任务的资源查看器。你可以试试[PE 资源浏览器](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm)。需要考虑的事项：项目中所有图标的名称是什么？名称为*MANICON*的图标是什么？其他图标来自哪个*RES文件，以及链接它的单位是什么？*

最后，关于术语的说明：*VCL*是 Visual Component Library，它是 Delphi 附带的一组组件。你不能有“一个”VCL。您安装到 Tool Palette（nee Component Palette）并放在表单和数据模块上的东西是组件，而不是 VCL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-09T00:49:00.917

从**Delphi**的菜单栏中选择**Project->Options**

在项目选项中选择**应用程序**

在那里，您将看到为您的应用选择的图标。

你可以在那里改变它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T00:45:25.243

可执行文件可以嵌入不同大小的图标。

检查以确保您已为不同尺寸定义了图标。如果您没有定义所有尺寸，Delphi 可能会随机抽取一个。这可以解释为什么按钮栏看起来是一种方式，而在桌面上它看起来是另一种方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-12T18:30:48.123

重命名 .RES 文件并强制重新编译对我来说很好。

有两种方法可以做到这一点。

将项目图标重置为默认值：

1.  关闭德尔福。
2.  在文件资源管理器中打开项目文件夹。
3.  将文件扩展名从 .RES 文件重命名为 .RES.BAK （您可能需要在文件资源管理器的工具>文件夹选项>查看>高级设置>文件和文件夹部分中取消选中“隐藏已知文件类型的文件扩展名”内容。
4.  在delphi中打开项目。
5.  它将显示一条警告，说它没有找到 RES 文件并将重新创建它。

确保使用一个新图标并为其分配最少的内存（这样，由于应用程序图标的先前反复更改，没有其他未使用的图标被分配给您在此处指定的图标）：

1.  在delphi中打开项目。
2.  打开项目选项（Ctrl + Shift + F11）。
3.  转到应用程序选项卡。
4.  单击加载图标。
5.  选择所需的图标并单击打开，然后单击确定。
6.  在文件资源管理器中打开项目文件夹。
7.  将文件扩展名从 .RES 文件重命名为 .RES.BAK （您可能需要在文件资源管理器的工具>文件夹选项>查看>高级设置>文件和文件夹部分中取消选中“隐藏已知文件类型的文件扩展名”内容。
8.  在 delphi 中，转到项目>编译所有项目。然后转到项目>构建所有项目。
9.  当您退出 Delphi 时，它会询问您是否要保存对项目的更改。单击是。

希望您觉得这个有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T06:53:47.047

Check the language id of your application and default language of OS. If these don't match then you can have a troubles with icons.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-09T12:39:34.397

您是否在不止一台机器上检查过这个？Windows 因图标缓存问题而臭名昭著。

# python - 如何使用 os.system() 从标准输入获取数据

> ID：351456
> 
> 赞同：0
> 
> 时间：2008-12-09T00:48:28.890
> 
> 标签：python, shell, curl, urllib, os.system

我发现使用脚本从维基百科下载文本的唯一可靠方法是使用 cURL。到目前为止，我这样做的唯一方法是调用`os.system()`. 即使输出在 python shell 中正确显示，我似乎无法让函数返回除退出代码（`0`）之外的任何内容。或者有人可以展示如何正确使用`urllib`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-09T01:01:28.427

从[潜入 Python：](http://diveintopython.net/html_processing/extracting_data.html)

```
import urllib
sock = urllib.urlopen("http://en.wikipedia.org/wiki/Python_(programming_language)")
htmlsource = sock.read()
sock.close()
print htmlsource 
```

这将打印出 Python Wikipedia 文章的源代码。我建议您查看 Dive into Python 了解更多详细信息。

[使用Python 库参考](http://www.python.org/doc/2.5.2/lib/urllib2-examples.html)中的 urllib2 的示例：

```
import urllib2
f = urllib2.urlopen('http://www.python.org/')
print f.read(100) 
```

编辑：您也可能想看看[wget。](http://en.wikipedia.org/wiki/Wget#Using_Wget)
Edit2：根据 S.Lott 的建议添加了 urllib2 示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T00:55:36.160

回答这个问题，Python 有一个子进程模块，它允许您与生成的进程进行交互。[http://docs.python.org/library/subprocess.html#subprocess.Popen](http://docs.python.org/library/subprocess.html#subprocess.Popen)

它允许您读取调用进程的标准输出，甚至将项目发送到标准输入。

但是，正如您所说， urllib 是一个更好的选择。如果您[搜索](https://stackoverflow.com/search?q=urllib)stackoverflow，我相信您会发现至少 10 个其他相关问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T01:00:21.877

作为 urllib 的替代品，您可以使用 libCurl [Python bindings](http://curl.haxx.se/libcurl/python/)。

# windows - 我如何通过调度程序根据某些文件（1.htm）的存在来启动程序（比如calc.exe）？

> ID：351459
> 
> 赞同：1
> 
> 时间：2008-12-09T00:48:58.733
> 
> 标签：windows, listener, scheduler, launch

我需要使用调度程序在同一台机器上基于某些文件（1.htm）的存在来启动一个程序。我不想写任何额外的代码。是否有可能通过使用已经在 Windows 上的例如监听器等 1.html 有时存在而有时不存在。所以严格来说，我只需要在 1.htm 存在时运行（calc.exe）。基本上我在窗口上寻找某种监听程序，它监听 1.htm 的存在并触发 calc.exe 的启动。

谢谢，Prav。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T00:54:28.720

真理，

如果没有代码，你绝对没有任何意义，我认为你不能。

但是，如果您的意思是使用标准 Windows 中的工具，您可以使用命令文件来执行此操作。在应该创建 1.htm 文件的同一目录中创建 calcif1.cmd，然后将以下内容放入其中。

```
@echo off
if exist 1.htm calc.exe 
```

然后，安排该命令文件定期运行。当它找到 1.htm 文件时，它会启动一个 calc 的副本。

调度程序本身不会在当前运行时启动另一个 calcif1.cmd 实例，因此您不会同时运行两个实例。

# bitmap - 用winsock发送位图

> ID：351464
> 
> 赞同：2
> 
> 时间：2008-12-09T00:51:53.953
> 
> 标签：bitmap, winsock, transfer

你怎么能通过winsock发送一个位图而不将它保存到一个文件然后发送呢？如果您知道如何在接收回位图后将数据转换为位图，这也会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T02:23:17.560

你使用什么编程语言？

基本上，您必须将位图数据存储到某种字节缓冲区中，然后通过线路发送字节，并从另一端的字节缓冲区中读取位图。

因此，有四个任务：

*   将位图保存到缓冲区
*   使用套接字跨线路写入数据
*   使用套接字从电线读取数据
*   从缓冲区加载位图

您不清楚哪些任务？

# java - MVC 模型应该抽象到什么程度？

> ID：351470
> 
> 赞同：3
> 
> 时间：2008-12-09T00:55:56.597
> 
> 标签：java, php, model-view-controller

我正在扩展和改进一个存在很多结构性问题的网站。它看起来很像我之前听说过 MVC 但不理解抽象或模块化的想法的开发人员。因此，MVC“框架”是 a) 定制 b) 损坏 c) 修补和 d) 同时使用多个。我打算解决这个问题。

这不是我第一次重新构建站点的框架，顺便说一句，但这是我第一次不得不修复 MVC 框架。但是，我在 SO 上遇到了 MVC 知识中的一些缺失漏洞。

首先是程序员似乎将他们的 SQL 数据库与他们的模型紧密结合在一起。这对我来说没有意义：程序员通常让模型负责数据抽象吗？（对我来说，这比将 SQL 放在原始 PHP 代码中要好一点。）或者是否存在通常使用的“Does SQL”的数据访问层？我从经验中知道，后者意味着调用代码不必担心数据在哪里，或者如何获取数据或如何编写数据：API 会处理这些。

但是模型呢？它们是否打算在不同的页面中重复使用？他们应该关心数据的存储位置吗？他们不应该更关心处理数据获取和数据显示之间的逻辑（例如将联系人的组 ID 转换为可显示的名称）吗？以及数据保存和数据写入（例如，弄清楚如何将 $_POST 值转换为可保存的数据）？

也许 MVC 模型真的是 DMVC - Data-Model-View-Controller。

最后，虽然这是从 PHP 的角度来看的，但这些概念在 JSP 站点中的转化效果如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T02:20:26.097

**但是模型呢？它们是否打算在不同的页面中重复使用？**

是的。

**他们应该关心数据的存储位置吗？**

不，他们不需要知道。所有这些信息对于持久层或数据层都是必需的。

**他们不应该更关心处理数据获取和数据显示之间的逻辑（例如将联系人的组 ID 转换为可显示的名称）吗？**

不，他们只关心业务逻辑。我发现一些常见的应用程序使模型变得愚蠢，只有属性/属性，没有别的。Java 中的典型示例是带有 getter/setter 的 POJO。我们称它们为 TO（传输对象），并在任何地方使用它们，作为数据持有者。IMO，我并不真正同意这一点，应该有一些与业务相关的方法，这些方法是适当的并且有资格参与其中。不要让它变得如此愚蠢。新的实体 Bean (EJB3) 就是一个很好的例子。

顺便说一句，数据显示是表示层的工作。在java中JSP是视图技术的一部分。

**以及数据保存和数据写入（例如，弄清楚如何将 $_POST 值转换为可保存的数据）？**

不，这通常在我们的控制器中完成，大部分时间使用一些实用程序类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T01:09:40.750

关于是从数据库模式还是从用户界面开始工作，您会在这里找到不止一个线程。有一个地方可以看。

我能想到的工具不止一种，它采用模式并为您构建 CRUD UI（“脚手架”），反之亦然。还有一个地方可以看。（典型代表：Ruby on Rails 及其认知后代）。

在讨论 ORM 工具时，有太多次（但绝不是全部）首选的首字母缩写词是“ROM”。

我们有很多工具可以鼓励我们“准备好，开火，瞄准”的邪恶倾向。对于管理来说，它是“Proof of Concept”和“RC1”之间最短的一条线。

# c# - 在 C# 中选择性地触发事件

> ID：351473
> 
> 赞同：1
> 
> 时间：2008-12-09T01:00:29.927
> 
> 标签：c#, events

```
class Child
{ 
    private override void Check_CheckedChanged(object sender, EventArgs e)
    {
        if (Check.Checked)
        {
            this.addName(this.FirstName);
            this.disableControls();
        }

        else
        {
            this.addAddress(this.address);
            //this.activatecontrols();// gives error since it's private method in parent.

        }
    }
}

class Parent
{
    private  void Check_CheckedChanged(object sender, EventArgs e)
    {
        if (Check.Checked)
        {
            this.disablecontrols();
        }

        else
        {
            this.addAddress(this.address);
            this.activatecontrols();
        }
    }

} 
```

如果满足条件，我想触发子事件。但是如果不能，我需要调用 base 的 else 条件，因为我 activatecontrols() 在 Parent 中是私有的。那么，我该如何调用这个事件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T01:12:47.640

如果需要`ActivateControls`派生类中的功能，可以`protected`在基类中实现。

或者，您可以让`Check_CheckedChanged`事件处理程序调用`virtual`基类中的方法，该方法可以在派生类中被覆盖：

```
// Parent.cs

private void Check_CheckedChanged(object sender, EventArgs e)
{
    OnCheckedChanged();
}

protected virtual void OnCheckedChanged()
{
    if (Check.Checked)
    {
        this.disablecontrols();
    }
    else
    {
        this.addAddress(this.address);
        this.activatecontrols();
    }
} 
```

中的逻辑`Parent`不需要重复`Child`，因此可以简化处理程序：

```
// Child.cs

protected override void OnCheckedChanged()
{
    if (Check.Checked)
    {
        this.addName(this.FirstName);
    }

    base.OnCheckedChanged();  // Same outcome
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T01:05:43.393

一个非常简单的解决方案是在 Parent 上将 ActivateControls 保护为 virtual 并在 child 上覆盖它，然后如果不是 Check.Checked，则可以在 child 方法中调用 base.activatecontrols。

# sql-server - 您应该为外键字段使用什么大小的 int？

> ID：351474
> 
> 赞同：1
> 
> 时间：2008-12-09T01:01:19.907
> 
> 标签：sql-server, performance

我有一个星型模式类型的数据库，其中包含许多维度表外键的事实表。每个维度表中的记录数量很少——通常小于 256 字节，但总是小于 64k。事实表通常有数十万条记录，因此我希望最大化连接速度。

我想使用 tinyints 和 smallints，但一位同事说我很担心这个问题，并且在每种情况下只使用 4 字节整数。谁是对的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T01:06:12.987

使用 4 字节整数并在其他地方进行优化。与简单模式提供的易于编码、易于使用和易于维护相比，您在这里花费的任何努力都不会为您带来足够的回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T01:51:55.250

你的同事错了。如果你使用四字节整数作为外键，那么事实表中的主键也必须是四字节整数。然后你让事实表比它需要的更宽，减少单个索引页上可以容纳的记录数。如果这会改变主键索引的宽度，则会对索引性能产生不利影响。如果您的主键可能是两个 tinyInts 和 3 个 smallints，而您更改为五个 4 字节整数，则您已将索引的宽度从 8 个字节宽更改为 20 个字节宽。您的索引每个 I/O 页面的条目数将少于一半，并且需要两倍的逻辑和/或物理读取来遍历。

注意：正如 Jim McLeod 在下面的回答，SQL Server 2008（企业版或开发版）包括行级压缩，这意味着您可以将该值声明为 4 字节 INT，但它将以最合适的大小存储该值为每一行键入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T05:11:50.590

在 32 位服务器上，较小的整数不会为您节省任何 CPU 性能，在 64 位服务器上更是如此。也许您会节省磁盘并因此得到一些磁盘改进，但总体而言，总体改进可能微不足道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T01:09:13.573

与性能问题一样，这取决于。如果您的事实行很小，例如每行 20 个字节，那么每行节省两个字节将节省 400 个字节，并允许您在每页上多容纳 20 行。如果您的事实行更大，例如 500 个字节，那么您将只能保存 32 个字节，这根本不重要。

使用 INT 而不是 SMALLINT 的好处是，您不必担心如果突然获得比预期更多的行会发生什么。

SQL Server 2008 包含行级压缩，这意味着您可以将值声明为 4 字节 INT，但它会将值存储为每行最合适大小的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T01:31:44.480

主键的 4 字节整数适用于大多数解决方案。

如果您希望在创建 PK 值和稍后进行一些数据复制方面具有一定的灵活性，您可能需要考虑使用 uniqueidentifiers。Guid 很容易在数据库、存储过程、DAL 层或其他任何地方创建，并保证是唯一的。

有时只有这样才能通过不必进行数据库查找来获取新的记录 ID，从而为您的解决方案提供一些额外的性能。（即在 DAL 层中创建它并立即存储它，而不必使用诸如 scope_identity() 或 @@Identity 之类的东西）

希望这可以帮助。

# winapi - 使用 Win32/Shell PathCombine() 从 Vista 中的相对路径获取绝对路径似乎失败

> ID：351479
> 
> 赞同：1
> 
> 时间：2008-12-09T01:04:16.877
> 
> 标签：winapi, windows-vista, relative-path, absolute-path

不确定这是我正在使用的预期行为还是错误或错误的功能，但问题是 PathCombine() 在 Vista 框中返回错误的路径。

相对路径是（由 WMP 导出到播放列表）：

`..\..\..\Public\Music\Sample Music\Amanda.wma`

它的相对路径是：

`C:\Users\userX\Music\Playlists\playlist.wpl`

和 PathCombine() 返回：

`C:\Users\userX\Public\Music\Sample Music\Amanda.wma`

但是，该文件实际上位于此处（根据资源管理器以及我无法从代码中打开它的事实来判断）：

`C:\Users\Public\Music\Sample Music\Amanda.wma`

这是一个已知的问题？我应该使用其他功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T01:20:24.580

PathCombine的[文档](http://msdn.microsoft.com/en-us/library/bb773571(VS.85).aspx)指定第二个参数*lpszDir*是“指向包含目录路径的最大长度 MAX_PATH 的以空字符结尾的字符串的指针”。您似乎在目录中传递文件的完全限定名，而不是目录的完全限定名。因此，它删除了三个组件：playlist.wpl、播放列表和音乐，然后附加其余部分。

您应该能够使用[PathRemoveFileSpec](http://msdn.microsoft.com/en-us/library/bb773748(VS.85).aspx)从目录路径中删除文件部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T02:32:14.797

当你组合你的两个字符串时，你会得到以下结果。

```
C:\Users\userX\Music\Playlists\playlist.wpl\..\..\..\Public\Music\Sample Music\Amanda.wma 
```

由于每个 " `..`" 都会清除前面的部分，因此您以以下顺序结束 u[p：

```
C:\Users\userX\Music\Playlists\playlist.wpl\..\..\..\Public\Music\Sample Music\Amanda.wma
C:\Users\userX\Music\Playlists\..\..\Public\Music\Sample Music\Amanda.wma
C:\Users\userX\Music\..\Public\Music\Sample Music\Amanda.wma
C:\Users\userX\Public\Music\Sample Music\Amanda.wma 
```

那是因为 " `PathCombine()`" 不受路径的任何段是文件还是目录的困扰。这只是将特殊导航字符（“ `..`”和“ `.`”）与真实导航段匹配以形成没有这些特殊导航字符的路径的一种相对愚蠢的方式。

它只是假设“ `playlist.wpl`”是您的情况下的目录名称。`..`把它去掉（或者在你的相对路径的开头添加另一个“ ”，这是一个避免多余代码用于剥离文件名部分的技巧），它应该可以正常工作。

# asp.net-mvc - 如何在 ASP.NET MVC 中使用单选模式创建 ListBox？

> ID：351483
> 
> 赞同：29
> 
> 时间：2008-12-09T01:07:53.360
> 
> 标签：asp.net-mvc

如何在 ASP.NET MVC 中使用单选模式创建 ListBox？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-12-09T02:11:16.617

我假设您正在寻找一个视觉上类似于 ListBox 的选择框，这意味着显示多行，但功能上类似于 DropDownList（只允许一个选择）。

似乎没有一种特别简单的方法可以使用 ListBox 实现这一目标。我建议使用 Html.DropdownList，类似于：

```
<%= Html.DropDownList("list1", 
    new Dictionary<string, object> {{"size", "5"}} ) %> 
```

size 属性将使选择框具有 ListBox 的外观。此外，您需要将 ViewData 项从 MultiSelectList 更改为 SelectList。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-23T18:31:23.013

MVC5.cshtml

```
@Html.DropDownList("PropertyID", null, htmlAttributes: new {size=5, @class="form-control" }) 
```

控制器

```
ViewBag.PropertyID = new SelectList(db.EntityItems); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-11T16:48:30.827

最好的解决方案在这里。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('select').removeAttr('multiple');
    });
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-11-30T11:29:18.633

遵循代码对我有用，

<%=Html.DropDownList("list1", lstItem, new {@size = 5})%> 其中lstItem表示SelectListItem的List

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-12-09T02:34:03.170

下面应该做到这一点：对象在选择元素的属性列表中进行翻译。

Html.DropDownList("list1", 新对象 {@rows = 5, @multiple = false} )

# asp.net - 如何确定动态加载的用户控件的类型？

> ID：351484
> 
> 赞同：1
> 
> 时间：2008-12-09T01:08:39.347
> 
> 标签：asp.net, reflection, user-controls

我有一个应用程序，它将根据用户动态加载用户控件。您将在下面的示例中看到，我通过 switch/case 语句强制转换每个用户控件。有一个更好的方法吗？反射？（我必须能够在每个控件中添加一个事件处理程序绑定。）

```
override protected void OnInit(EventArgs e)
{
    cc2007.IndividualPageSequenceCollection pages = new IndividualPageSequenceCollection().Load();
    pages.Sort("displayIndex", true);
    foreach (IndividualPageSequence page in pages)
    {
        Control uc = Page.LoadControl(page.PageName);
        View view = new View();
        int viewNumber = Convert.ToInt32(page.DisplayIndex) -1;

        switch(page.PageName)
        {
            case "indStart.ascx":
                IndStart = (indStart) uc;
                IndStart.Bind += new EventHandler(test_handler);
                view.Controls.Add(IndStart);
                MultiView1.Views.AddAt(viewNumber, view);
                break;

            case "indDemographics.ascx":
                IndDemographics = (indDemographics)uc;
                IndDemographics.Bind += new EventHandler(test_handler);
                view.Controls.Add(IndDemographics);
                MultiView1.Views.AddAt(viewNumber, view);
                break;

            case "indAssetSurvey.ascx":
                IndAssetSurvey = (indAssetSurvey)uc;
                IndAssetSurvey.Bind += new EventHandler(test_handler);
                view.Controls.Add(IndAssetSurvey);
                MultiView1.Views.AddAt(viewNumber, view);
                break;
        }

    }
    base.OnInit(e);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T01:18:14.960

怎么样：

 `````
Type t = uc.GetType();
EventInfo evtInfo = t.GetEvent("Bind");
evtInfo.AddEventHandler(this, new EventHandler(test_handler));

````  `我没有测试过这段代码，但它应该是这样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T01:24:14.900

我在您的代码中看不到任何特定于控件类的内容。您执行完全相同的操作，并且看起来所有用户控件都继承自 Control。

如果唯一具体的事情是事件绑定（即 Control 类没有 Bind 事件），那么最好考虑重构您的代码，这样您就可以像这样继承所有用户控件：Control -> MyBaseControl（将事件放在这里） -> 你控制。

如果您无法控制控件的来源，那么 Jeroen 的建议应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T01:39:18.897

如何定义一个带有 Bind 事件的接口并让控件实现它？

```
public interface IBindable
{
  event EventHandler Bind;
} 
```

然后：

```
foreach (IndividualPageSequence page in pages)
{
  IBindable uc = Page.LoadControl(page.PageName) as IBindable;
  if( uc != null )
  {
    uc.Bind += new EventHandler(test_handler);
    View view = new View();
    view.Controls.Add(page);
    int viewNumber = Convert.ToInt32(page.DisplayIndex) -1;
    MultiView1.Views.AddAt(viewNumber, view);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T01:14:43.377

你可以试试 TypeOf (in c#) 或者 uc.GetType() 工作。

# delphi - TfrmMain 和 TApplication - 这些是干什么用的？

> ID：351487
> 
> 赞同：3
> 
> 时间：2008-12-09T01:09:52.747
> 
> 标签：delphi

我是 Delphi 新手，但我正在尝试使用 Spy++ 了解 TApplication 和 TfrmMain 窗口之间的关系。TfrmMain 窗口似乎是具有适当屏幕坐标的真实窗口，但 TApplication 窗口是出现在 Windows 任务栏中的窗口。而且，它们之间似乎根本没有任何关系。一个不是另一个的父窗口，那么这些窗口是如何链接在一起的呢？为什么非 UI 窗口会获得 Windows 任务栏按钮？任何德尔福专家可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-09T01:17:06.630

TApplication 是封装应用程序并处理诸如 Windows 消息之类的事情的类。TfrmMain 将是 TForm 的子类，它将成为您的应用程序“主窗体”。

所以基本上，TApplication 可以说是控制器，它拥有并创建 TfrmMain，并将消息转发给它，或者它的任何孩子。

查看您的 projectname.pas 文件，您会看到如下内容：

```
program Project1;
uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1};
{$R *.RES}
begin
  Application.Initialize;
  Application.CreateForm(TfrmMain, frmMain) ;
  Application.Run;
end. 
```

其中 Application 是 TApplication 类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T02:16:12.143

对于使用 Delphi 2007 之前的 Delphi 版本制作的应用程序，“秘密窗口”将是 Vista 的 Flip 3D 或预览中的可见窗口。这是一篇很棒的文章，解释了如何在 Delphi 2006（及更早版本）上编译 Delphi 应用程序，以便不显示“秘密窗口”：[这里](http://www.installationexcellence.com/articles/VistaWithDelphi/Original/Index.html#Wheres_My_Induction)

# sql - 是否可以从 PL/SQL 块输出 SELECT 语句？

> ID：351489
> 
> 赞同：78
> 
> 时间：2008-12-09T01:10:26.817
> 
> 标签：sql, oracle, plsql, oracle10g, oracle-apex

我怎样才能得到一个 PL/SQL 块来输出一个`SELECT`语句的结果，就像我做了一个普通的一样`SELECT`？

例如如何做一个`SELECT`喜欢：

```
SELECT foo, bar FROM foobar; 
```

暗示 ：

```
BEGIN
SELECT foo, bar FROM foobar;
END; 
```

不起作用。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2016-11-01T12:53:34.047

您可以在 Oracle 12.1 或更高版本中执行此操作：

```
declare
    rc sys_refcursor;
begin
    open rc for select * from dual;
    dbms_sql.return_result(rc);
end; 
```

我没有要测试的 DBVisualizer，但这可能是您的起点。

[有关更多详细信息，请参阅Oracle 12.1 新特性指南](https://docs.oracle.com/database/121/NEWFT/chapter12101.htm#FEATURENO10020)中的隐式结果集、[Oracle Base](https://oracle-base.com/articles/12c/implicit-statement-results-12cr1)等。

对于早期版本，根据工具的不同，您可能可以使用引用游标绑定变量，例如 SQL*Plus 中的以下示例：

```
set autoprint on

var rc refcursor

begin
    open :rc for select count(*) from dual;
end;
/

PL/SQL procedure successfully completed.

  COUNT(*)
----------
         1

1 row selected. 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2008-12-09T04:09:39.827

It depends on what you need the result for.

If you are sure that there's going to be only 1 row, use implicit cursor:

```
DECLARE
   v_foo foobar.foo%TYPE;
   v_bar foobar.bar%TYPE;
BEGIN
   SELECT foo,bar FROM foobar INTO v_foo, v_bar;
   -- Print the foo and bar values
   dbms_output.put_line('foo=' || v_foo || ', bar=' || v_bar);
EXCEPTION
   WHEN NO_DATA_FOUND THEN
     -- No rows selected, insert your exception handler here
   WHEN TOO_MANY_ROWS THEN
     -- More than 1 row seleced, insert your exception handler here
END; 
```

If you want to select more than 1 row, you can use either an explicit cursor:

```
DECLARE
   CURSOR cur_foobar IS
     SELECT foo, bar FROM foobar;

   v_foo foobar.foo%TYPE;
   v_bar foobar.bar%TYPE;
BEGIN
   -- Open the cursor and loop through the records
   OPEN cur_foobar;
   LOOP
      FETCH cur_foobar INTO v_foo, v_bar;
      EXIT WHEN cur_foobar%NOTFOUND;
      -- Print the foo and bar values
      dbms_output.put_line('foo=' || v_foo || ', bar=' || v_bar);
   END LOOP;
   CLOSE cur_foobar;
END; 
```

or use another type of cursor:

```
BEGIN
   -- Open the cursor and loop through the records
   FOR v_rec IN (SELECT foo, bar FROM foobar) LOOP       
   -- Print the foo and bar values
   dbms_output.put_line('foo=' || v_rec.foo || ', bar=' || v_rec.bar);
   END LOOP;
END; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-09T05:26:54.177

在包中创建一个函数并返回一个 SYS_REFCURSOR：

```
FUNCTION Function1 return SYS_REFCURSOR IS 
       l_cursor SYS_REFCURSOR;
       BEGIN
          open l_cursor for SELECT foo,bar FROM foobar; 
          return l_cursor; 
END Function1; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-09T17:54:02.563

来自匿名区块？我现在想更多地了解您认为需要这样做的情况，因为对于子查询分解子句和内联视图，除了最复杂的情​​况之外，您很少需要求助于 PL/SQL。

如果您可以使用命名过程，则使用流水线函数。这是从文档中提取的示例：

```
CREATE PACKAGE pkg1 AS
  TYPE numset_t IS TABLE OF NUMBER;
  FUNCTION f1(x NUMBER) RETURN numset_t PIPELINED;
END pkg1;
/

CREATE PACKAGE BODY pkg1 AS
-- FUNCTION f1 returns a collection of elements (1,2,3,... x)
FUNCTION f1(x NUMBER) RETURN numset_t PIPELINED IS
  BEGIN
    FOR i IN 1..x LOOP
      PIPE ROW(i);
    END LOOP;
    RETURN;
  END;
END pkg1;
/

-- pipelined function is used in FROM clause of SELECT statement
SELECT * FROM TABLE(pkg1.f1(5)); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-11-05T13:34:14.323

如果您想在 pl/sql 中查看选择查询输出，您需要使用显式游标。它将保存活动数据集，并通过一次获取每一行，只要它通过循环迭代从数据集中获取记录，它将显示活动数据集中的所有记录。此数据不会以表格格式生成，此结果将以纯文本格式生成。希望这会有所帮助。对于任何其他问题，您可能会问......

```
set serveroutput on;
declare
cursor c1 is
   select foo, bar from foobar;
begin
  for i in c1 loop
    dbms_output.put_line(i.foo || ' ' || i.bar);
  end loop;
end; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-04T05:55:31.407

经典的“Hello World！” 块包含一个可执行部分，该部分调用该`DBMS_OUTPUT.PUT_LINE`过程以在屏幕上显示文本：

```
BEGIN
  DBMS_OUTPUT.put_line ('Hello World!');
END; 
```

您可以在这里查看： [http ://www.oracle.com/technetwork/issue-archive/2011/11-mar/o21plsql-242570.html](http://www.oracle.com/technetwork/issue-archive/2011/11-mar/o21plsql-242570.html)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-01T04:58:19.540

对于 12c 以下的版本，简单的答案是**NO**，至少不是以 SQL Server 的方式。
您可以打印结果，可以将结果插入表中，可以从函数/过程中将结果作为游标返回，或者从函数返回行集 -
但如果不对结果执行某些操作，**则无法**执行 SELECT 语句。

* * *

### SQL 服务器

```
begin
    select 1+1
    select 2+2
    select 3+3
end 
```

* * *

/* 返回 3 个结果集 */

* * *

### 甲骨文

```
SQL> begin
  2  select * from dual;
  3  end;
  4  /
select * from dual;
*
ERROR at line 2:
ORA-06550: line 2, column 1:
PLS-00428: an INTO clause is expected in this SELECT statement 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-02T19:00:52.340

您需要使用本机动态 SQL。此外，您不需要 BEGIN-END 来运行 SQL 命令：

```
declare
  l_tabname VARCHAR2(100) := 'dual';
  l_val1    VARCHAR2(100):= '''foo''';
  l_val2    VARCHAR2(100):= '''bar''';
  l_sql     VARCHAR2(1000);  
begin
  l_sql:= 'SELECT '||l_val1||','||l_val2||' FROM '||l_tabname;
  execute immediate l_sql;
  dbms_output.put_line(l_sql);
end;
/

Output:
 SELECT 'foo','bar' FROM dual 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-03T17:02:02.113

使用执行立即语句

喜欢：

```
declare
 var1    integer;
var2 varchar2(200)
begin
 execute immediate 'select emp_id,emp_name from emp'
   into var1,var2;
 dbms_output.put_line(var1 || var2);
end; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-26T12:44:25.727

即使问题很老，但我会分享完美回答问题的解决方案：

```
SET SERVEROUTPUT ON;

DECLARE
    RC SYS_REFCURSOR;
    Result1 varchar2(25);
    Result2 varchar2(25);
BEGIN
    OPEN RC FOR SELECT foo, bar into Result1, Result2 FROM foobar;
    DBMS_SQL.RETURN_RESULT(RC);
END; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-06T13:35:30.407

当您的选择查询返回多行时使用游标。因此，如果您想要聚合或单行数据，您可以使用没有游标的过程/函数，而不是使用游标

```
 Create Procedure sample(id 
    varchar2(20))as 
    Select count(*) into x from table 
    where 
       Userid=id;
     End ; 
```

然后简单地调用程序

```
 Begin
   sample(20);
   End 
```

这是过程/函数的实际使用，主要是包装和存储复杂的查询，或者需要使用相同的逻辑但不同的数据进行重复操作

# javascript - 在 JavaScript 关联数组中动态创建键

> ID：351495
> 
> 赞同：205
> 
> 时间：2008-12-09T01:13:34.330
> 
> 标签：javascript, associative-array

到目前为止，我发现的所有文档都是更新已经创建的密钥：

```
 arr['key'] = val; 
```

我有一个这样的字符串：`" name = oscar "`

我想结束这样的事情：

```
{ name: 'whatever' } 
```

也就是说，拆分字符串并获取第一个元素，然后将其放入字典中。

### 代码

```
var text = ' name = oscar '
var dict = new Array();
var keyValuePair = text.split(' = ');
dict[ keyValuePair[0] ] = 'whatever';
alert( dict ); // Prints nothing. 
```

* * *

## 回答 #1

> 赞同：491
> 
> 时间：2008-12-09T03:52:31.793

不知何故，所有示例虽然运行良好，但都过于复杂：

*   他们使用`new Array()`，这对于简单的关联数组（AKA 字典）来说是一种过度杀伤（和开销）。
*   更好的使用`new Object()`. 它工作正常，但为什么所有这些额外的输入？

这个问题被标记为“初学者”，所以让我们让它变得简单。

在 JavaScript 中使用字典的超简单方法或“为什么 JavaScript 没有特殊的字典对象？”：

```
// Create an empty associative array (in JavaScript it is called ... Object)
var dict = {};   // Huh? {} is a shortcut for "new Object()"

// Add a key named fred with value 42
dict.fred = 42;  // We can do that because "fred" is a constant
                 // and conforms to id rules

// Add a key named 2bob2 with value "twins!"
dict["2bob2"] = "twins!";  // We use the subscript notation because
                           // the key is arbitrary (not id)

// Add an arbitrary dynamic key with a dynamic value
var key = ..., // Insanely complex calculations for the key
    val = ...; // Insanely complex calculations for the value
dict[key] = val;

// Read value of "fred"
val = dict.fred;

// Read value of 2bob2
val = dict["2bob2"];

// Read value of our cool secret key
val = dict[key]; 
```

现在让我们更改值：

```
// Change the value of fred
dict.fred = "astra";
// The assignment creates and/or replaces key-value pairs

// Change the value of 2bob2
dict["2bob2"] = [1, 2, 3];  // Any legal value can be used

// Change value of our secret key
dict[key] = undefined;
// Contrary to popular beliefs, assigning "undefined" does not remove the key

// Go over all keys and values in our dictionary
for (key in dict) {
  // A for-in loop goes over all properties, including inherited properties
  // Let's use only our own properties
  if (dict.hasOwnProperty(key)) {
    console.log("key = " + key + ", value = " + dict[key]);
  }
} 
```

删除值也很容易：

```
// Let's delete fred
delete dict.fred;
// fred is removed, but the rest is still intact

// Let's delete 2bob2
delete dict["2bob2"];

// Let's delete our secret key
delete dict[key];

// Now dict is empty

// Let's replace it, recreating all original data
dict = {
  fred:    42,
  "2bob2": "twins!"
  // We can't add the original secret key because it was dynamic, but
  // we can only add static keys
  // ...
  // oh well
  temp1:   val
};
// Let's rename temp1 into our secret key:
if (key != "temp1") {
  dict[key] = dict.temp1; // Copy the value
  delete dict.temp1;      // Kill the old key
} else {
  // Do nothing; we are good ;-)
} 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2008-12-09T01:19:02.807

使用第一个示例。如果密钥不存在，它将被添加。

```
var a = new Array();
a['name'] = 'oscar';
alert(a['name']); 
```

会弹出一个包含'oscar'的消息框。

尝试：

```
var text = 'name = oscar'
var dict = new Array()
var keyValuePair = text.replace(/ /g,'').split('=');
dict[ keyValuePair[0] ] = keyValuePair[1];
alert( dict[keyValuePair[0]] ); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2008-12-09T01:47:52.857

JavaScript*没有关联数组*。它有*对象*。

以下代码行都做了完全相同的事情——将对象上的“名称”字段设置为“猎户座”。

```
var f = new Object(); f.name = 'orion';
var f = new Object(); f['name'] = 'orion';
var f = new Array(); f.name = 'orion';
var f = new Array(); f['name'] = 'orion';
var f = new XMLHttpRequest(); f['name'] = 'orion'; 
```

看起来您有一个关联数组，因为 an`Array`也是一个`Object`- 但是您实际上根本没有将东西添加到数组中；您正在对象上设置字段。

现在已经清除了，这是您示例的有效解决方案：

```
var text = '{ name = oscar }'
var dict = new Object();

// Remove {} and spaces
var cleaned = text.replace(/[{} ]/g, '');

// Split into key and value
var kvp = cleaned.split('=');

// Put in the object
dict[ kvp[0] ] = kvp[1];
alert( dict.name ); // Prints oscar. 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-12-09T01:37:24.453

作为对 MK_Dev 的响应，可以进行迭代，但不能*连续*迭代（为此，显然需要一个数组）。

快速的 Google 搜索会[在 JavaScript 中找到哈希表](http://www.mojavelinux.com/articles/javascript_hashes.html)。

循环哈希值的示例代码（来自上述链接）：

```
var myArray = new Array();
myArray['one'] = 1;
myArray['two'] = 2;
myArray['three'] = 3;

// Show the values stored
for (var i in myArray) {
    alert('key is: ' + i + ', value is: ' + myArray[i]);
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-10-19T19:10:28.890

原始代码（我添加了行号以便可以参考它们）：

```
1  var text = ' name = oscar '
2  var dict = new Array();
3  var keyValuePair = text.split(' = ');
4  dict[ keyValuePair[0] ] = 'whatever';
5  alert( dict ); // Prints nothing. 
```

差不多好了...

*   第 1 行：你应该做一个`trim`on text 所以它是`name = oscar`.

*   第 3 行：好的，只要你的等号周围*总是有空格。*最好不要`trim`在第 1 行。使用`=`和修剪每个 keyValuePair

*   在 3 和 4 之前添加一行：

    ```
     key = keyValuePair[0];` 
    ```

*   第 4 行：现在变为：

    ```
     dict[key] = keyValuePair[1]; 
    ```

*   第 5 行：更改为：

    ```
     alert( dict['name'] );  // It will print out 'oscar' 
    ```

我想说这`dict[keyValuePair[0]]`不起作用。您需要设置一个字符串`keyValuePair[0]`并将其用作关联键。这是我让我的工作的唯一方法。设置完成后，您可以使用数字索引或键入引号来引用它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-07T02:42:13.280

所有现代浏览器都支持[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)，它是一种键/值数据结构。使用 Map 比使用 Object 更好的原因有两个：

> *   一个对象有一个原型，所以地图中有默认键。
> *   Object 的键是字符串，它们可以是 Map 的任何值。
> *   您可以轻松地获取地图的大小，而您必须跟踪对象的大小。

例子：

```
var myMap = new Map();

var keyObj = {},
    keyFunc = function () {},
    keyString = "a string";

myMap.set(keyString, "value associated with 'a string'");
myMap.set(keyObj, "value associated with keyObj");
myMap.set(keyFunc, "value associated with keyFunc");

myMap.size; // 3

myMap.get(keyString);    // "value associated with 'a string'"
myMap.get(keyObj);       // "value associated with keyObj"
myMap.get(keyFunc);      // "value associated with keyFunc" 
```

如果您希望对未从其他对象引用的键进行垃圾回收，请考虑使用[Wea​​kMap](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)而不是 Map。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-06-02T19:31:05.323

我认为如果你像这样创建它会更好：

```
var arr = [];

arr = {
   key1: 'value1',
   key2:'value2'
}; 
```

有关更多信息，请查看以下内容：

[JavaScript 数据结构 - 关联数组](http://www.i-programmer.info/programming/javascript/1441-javascript-data-structures-the-associative-array.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-03-22T16:14:32.567

```
var myArray = new Array();
myArray['one'] = 1;
myArray['two'] = 2;
myArray['three'] = 3;

// Show the values stored
for (var i in myArray) {
    alert('key is: ' + i + ', value is: ' + myArray[i]);
} 
```

这没关系，但它会遍历数组对象的每个属性。

如果你只想遍历属性 myArray.one, myArray.two... 你可以这样尝试：

```
myArray['one'] = 1;
myArray['two'] = 2;
myArray['three'] = 3;
myArray.push("one");
myArray.push("two");
myArray.push("three");
for(var i=0;i<maArray.length;i++){
    console.log(myArray[myArray[i]])
} 
```

现在您可以通过 myArray["one"] 访问这两个属性，并且只遍历这些属性。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-08T06:32:50.210

```
var obj = {};

for (i = 0; i < data.length; i++) {
    if(i%2==0) {
        var left = data[i].substring(data[i].indexOf('.') + 1);
        var right = data[i + 1].substring(data[i + 1].indexOf('.') + 1);

        obj[left] = right;
        count++;
    }
}

console.log("obj");
console.log(obj);

// Show the values stored
for (var i in obj) {
    console.log('key is: ' + i + ', value is: ' + obj[i]);
}

}
};
} 
```

# sql - 是否存在用于管理表的 ASP.NET SQL 库？

> ID：351496
> 
> 赞同：0
> 
> 时间：2008-12-09T01:14:38.977
> 
> 标签：sql, .net

有谁知道可以用来管理表格的`SQL`库？`ASP.NET`

例如

```
SQLTable table = new SQLTable();
table.AddColumn(“First name”, varchar, 100);
table.AddColumn(“Last name”, varchar, 100);
if(table.ColumnExists(“Company”))
  table.RemoveColumn(“Company”); 
```

我正在寻找的操作是添加、编辑和删除表、字段、索引和外键。

这可以使用`SQL`但它很混乱，我正在寻找一个使用直观的干净 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T01:28:57.357

[亚音速](http://subsonicproject.com/)具有[迁移](http://subsonicproject.com/2-1-pakala/subsonic-using-migrations/)功能。它相当新，但我认为它符合您的“直观”要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T02:17:14.123

使用 Microsoft.SqlServer.Management.Smo

其他选项是安装 Microsoft Sql Server Web Data Administrator

[Sql Server Web 数据管理员](http://www.microsoft.com/downloads/details.aspx?FamilyID=C039A798-C57A-419E-ACBC-2A332CB7F959&displaylang=en)

Smo 的一些参考资料：

[使用 C# 和 SMO 在 SQL Server 2005 中创建表](http://davidhayden.com/blog/dave/archive/2006/01/27/2775.aspx)

[如何：在 Visual Basic .NET 中创建、更改和删除表（抱歉选择了语言）](http://msdn2.microsoft.com/en-US/library/ms162203.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T02:07:57.310

我会告诉你使用 SQL DMO，但它的外观似乎已经停止使用：

[http://msdn.microsoft.com/en-us/library/ms131540.aspx](http://msdn.microsoft.com/en-us/library/ms131540.aspx)

不确定它被替换为什么。

# c++ - 插件API设计

> ID：351498
> 
> 赞同：12
> 
> 时间：2008-12-09T01:15:20.770
> 
> 标签：c++, api, qt, plugins, dll

所以我有一个基于 QT API 的应用程序，它使用 QPlugin 系统。使用起来相当简单，您定义一个从接口继承的类，当插件加载时，您会得到该类的一个实例。最后，它会归结为`dlopen`/`dlsym`或`LoadLibrary`/ `GetProcAddress`，任何适合操作系统的东西。我在这里没有问题，一切都按预期工作。

所以，正题。有*很多*功能涉及需要引用主应用程序提供的数据/功能的插件。例如，我的应用程序有一个 GUI，所以我的应用程序中有一个“ `plugin::v1::gui`”函数，它返回一个`QWidget *`. 如果我希望插件能够向我的 UI 添加内容，或者甚至让它的对话框成为我的 UI 的子级，它需要一个指向它的指针。

我开始在 Linux 上进行开发并很快遇到这样一个事实，即默认情况下，加载器不会用加载它的应用程序中的符号填充共享对象中的未解析符号。没问题，轻松解决。将“ `-rdynamic`”添加到我的标志并继续前进。事情运作良好。

现在我发现在 Windows 上似乎没有等价物:(。那么什么是好的解决方案？

到目前为止，我想出的最好的方法是在我的主应用程序中填充一个结构，该结构具有指向插件可能关心的每个对象/函数的指针。然后将其传递给插件的 " `init()`" 函数，现在它具有指向所有内容的正确指针，但这是一个烦人的解决方案，因为现在每当我添加某些内容时，我都必须在多个地方进行更改。

有更好的解决方案吗？SO 社区是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T22:42:57.817

为应用程序公开的主要交互对象创建一组接口，并将它们构建在自己的 lib/dll 中，并在应用程序中的类上适当地实现这些接口。该库还应该包含一个插件接口，其中可能只有一个插件对象将实现的“初始化”方法。

应用程序和插件显然将链接到该 DLL，一旦应用程序加载插件，应用程序应该调用插件的初始化方法，该方法将具有参数来接受控制应用程序所需的任何对象。

一种简化的流行方法是在应用程序中实现类似于 DOM 的层次结构，以便插件可以从一个根对象访问应用程序中的所有相关对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T03:40:11.007

创建一个注册表对象，该对象在包含公开组件字典的初始化函数中传递给插件。然后允许插件通过该注册表中的字符串名称或其他标识符请求指向组件的指针。它为稳定的接口牺牲了编译时类型的安全性。

还有更多重量级的解决方案，例如[CORBA](http://en.wikipedia.org/wiki/CORBA) ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T13:37:16.607

你以一种相对较好的方式做到了这一点。Helper-Classes 通常是（仅）插入新功能的纯粹方式。如果您新设计您的软件，您必须提到并非每个插件都应该访问您的管理结构。所以插件设计应该有区别。

一种可能性：创建一些您从中继承的抽象类，这些类具有将所需指针设置为 Widget 左右的功能。

其他可能性：使用 getParent().getMainWidget()、getParent().getConfigWidget() ... 的功能扩展您的主（父）类。

* * *

如果它只是从你的 UI-Plugin 动态加载 UI 而不使用指针，你可以按照这个页面上的描述来做： http: [//dolzhenko.blogspot.com/2008/10/qt4-dynamic-loading-ui-from -other-ui_07.html](http://dolzhenko.blogspot.com/2008/10/qt4-dynamic-loading-ui-from-other-ui_07.html)

它是通过 ui-Files 完成的，您可以通过主配置文件或其他方式访问它。

# javascript - 如何创建弹窗（好样的）

> ID：351499
> 
> 赞同：3
> 
> 时间：2008-12-09T01:15:51.283
> 
> 标签：javascript, popup, window

我需要制作一个弹出窗口，供用户从其他网站登录我的网站。

我需要使用弹出窗口向用户显示地址栏，以便他们知道这是安全登录，而不是欺骗。例如，如果我使用浮动 iframe，网站可能会欺骗我的登录窗口并记录用户的登录信息。

谢谢

其他详细信息：我的弹出窗口将来自任何域中的 iframe 中的 javascript 代码。我知道这听起来像是我在制作广告……但实际上我不是。如果有任何区别，则 iframe 域和弹出域是相同的。

1 更多细节，我希望做与“Facebook Connect”相同的事情......如果您没有登录到 facebook，它们允许您通过在该域的站点上显示一个弹出窗口从任何域登录到 facebook . 例如，访问 techcrunch.com 上的任何文章并使用 Facebook Connect 发表评论。确保您已退出 facebook，您会看到我在说什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T01:23:35.090

看看[这个网站。](http://www.quirksmode.org/js/popup.html)

从中复制了一些代码：

```
<script language="javascript" type="text/javascript">
<!--
function popitup(url) {
    newwindow=window.open(url,'name','height=200,width=150');  
    if(!newindow){
        alert('We have detected that you are using popup blocking software...');}
    if (window.focus) {newwindow.focus()}
    return false;
}

// -->
</script> 
```

你链接到它：

```
<a href="popupex.html" onclick="return popitup('popupex.html')">Link to popup</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T10:30:07.107

肖恩的例子很好，但你仍然可以通过以下方式检测弹出窗口是否被阻止：

```
<script language="javascript" type="text/javascript">
<!--
function popitup(url) {
newwindow=window.open(url,'name','height=200,width=150');
if(!newwindow){
 alert('We have detected that you are using popup blocking software...');}

if (window.focus) {newwindow.focus()}
return false;
}

// -->
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-14T09:11:00.623

如果弹出窗口阻止程序是在明确的用户操作（如链接或按钮单击）上呈现的，则它们不会生效。即使您的浏览器配置为阻止弹出窗口，Facebook 连接窗口仍会呈现。那是因为用户单击了连接按钮。即使当前站点的域和弹出窗口中的站点不同也没关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T11:03:45.813

这是如何创建一个弹出窗口..

```
<!DOCTYPE html>
<html>
<body>

<button onclick="openWin()">Open "myWindow"</button>
<button onclick="closeWin()">Close "myWindow"</button>

<script>
var myWindow;

function openWin() {
    myWindow = window.open("", "myWindow", "width=200,height=100");
    myWindow.document.write("<p>This is 'myWindow'</p>");
}

function closeWin() {
    myWindow.close();
}
</script>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-09T01:18:19.327

如果您的用户正在使用 IE，并且您的站点位于受信任站点中，则弹出窗口阻止程序将被停用。

这有帮助吗？

# cocoa - CoreAnimation 图层支持视图和图层托管视图有什么区别？

> ID：351503
> 
> 赞同：46
> 
> 时间：2008-12-09T01:16:57.910
> 
> 标签：cocoa, cocoa-touch, core-animation

Core Animation 中的 Layer Backed View 和 Layer Hosting View 有什么区别？

设置每种类型的步骤是什么，何时适合使用任何一种类型？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-12-09T01:25:28.440

支持图层的视图包含 Cocoa 或 Cocoa Touch UI 控件，并且可以使用动画代理进行动画处理。支持图层的视图允许您为 UI 设置动画，并通过将视图内容缓存在核心动画层上来帮助减少绘制的开销。通过设置想要的图层属性创建一个图层支持的视图：

```
NSView *layerBacked = [NSView new];
[layerBacked setWantsLayer:YES]; 
```

层托管视图提供了一个层，用于由 NSView 或 UIView 托管的直接操作。图层托管视图可用于在任何可以放置 NSView 的地方嵌入核心动画绘图和动画：

```
NSView *layerHosting = [NSView new];
[layerHosting setLayer:[[CALayer new] autorelease]];
[layerHosting setWantsLayer:YES]; 
```

# macos - 程序控制的虚拟驱动器

> ID：351508
> 
> 赞同：0
> 
> 时间：2008-12-09T01:19:21.947
> 
> 标签：macos, windows-xp, nt

我将如何创建一个可以以编程方式和动态更改内容的虚拟驱动器？

例如，程序 A 开始运行并创建一个虚拟驱动器。当程序 B 查看驱动器时，它会看到错误日志并开始读取/处理它。在所有这些程序的中间，A 从某个地方得到一个信号并决定添加到日志中。我希望程序 B 不知道更改并继续进行。程序 B 应该继续阅读，就好像什么都没发生一样。程序 A 只会报告日志的文件大小非常大，然后根据需要填写。如果程序 B 试图读取最后一个条目，程序 A 将用标签填充日志。

我知道这是一个奇怪的请求，但实际上没有其他方法可以做到这一点......我基本上无法重写程序 B，所以我需要愚弄它。

我如何在 Windows 中执行此操作？OSX 怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T01:44:05.017

发现您的问题措辞不当。对于第一个问题，我建议使用磁盘映像，但这些仅适用于 Mac。我没有这方面的经验，但[FUSE](http://fuse.sourceforge.net)可能会工作，因为它应该是跨平台的。对于第二个问题，我真的不知道这是可能的。

# caching - Akamai 缓存刷新

> ID：351511
> 
> 赞同：11
> 
> 时间：2008-12-09T01:20:27.327
> 
> 标签：caching, ftp, akamai

Akamai 多久刷新一次缓存？

我们使用 Akamai 缓存经常访问的文件。将文件上传和覆盖到 Akamai FTP 时，我看不到实时反映的新文件。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-09T01:40:36.787

请记住，这些文件也可能缓存在其他地方，包括客户端背后的任何代理服务器或浏览器缓存本身。解决此问题的一种简单方法是将查询字符串添加到 URL，并在每次更新文件时更改值，或将其设置为随机值以每次绕过缓存。服务器会忽略查询字符串，但浏览器和代理会认为它是一个完全不同的 URL 并重新请求它。

例如，而不是请求：

> 样式.css

要求：

> 样式.css?version=1

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-09T01:38:01.550

它是可配置的。您需要与组织中管理您的 Akamai 帐户的任何人交谈。他们将有权更改缓存的方式和内容。如有必要，他们可以让您联系 Akamai 的技术联系人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-02-28T18:44:17.827

要检查的另一件事是 Akamai 缓存的项目的生存时间。

我在工作中使用 Akamai，最近发现它会无限期地缓存任何最大年龄为零的东西。然后，当我将其更正为更有用的东西时，它会从同一个 url 随机返回旧项目和新项目。您可以在标题内容中看到旧项目（在本例中为 PDF 文件）的最大年龄仍然为零，而当前 PDF 具有新的最大年龄值。

为了解决这个问题，我们必须从 Akamai 清除 url，以便它使用更正的最大年龄值缓存 PDF 的新版本。现在，受影响的 PDF 仅在新的最长期限内保持缓存，并且我们始终收到正确的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-22T08:23:44.163

Akamai 网络上的文件可以使用最终客户需要的任何缓存配置进行调整。通常，我看到的两种最常见的缓存设计方法是：

1.  基于文件扩展名进行配置。（例如 *.css、*.js 等）
2.  基于路径配置。（/产品/测试/结帐等）

如果您为您的请求启用以下编译指示标头，那么您可以检查 HTTP 响应标头并确定文件的缓存长度 - 它包含在缓存键中。

Pragma：akamai-x-cache-on、akamai-x-cache-remote-on、akamai-x-check-cacheable、a​​kamai-x-get-cache-key、akamai-x-get-extracted-values、akamai- x-get-ssl-client-session-id, akamai-x-get-true-cache-key, akamai-x-serial-no, akamai-x-get-request-id,akamai-x-get-noces, akamai-x-get-client-ip,akamai-x-feo-trace

例如，以下表示缓存 4 天的文件：

x-cache-key:S/L/3568/82745/ **4d** /mirror-somedomain.akadns.net/contentimages/meganav/020118/2018-02-01-someimg.jpg cid=_site_locale=us&site_language=en_

# ms-word - 有什么可以做语法高亮的东西，我可以把它放到一个word文档中吗？

> ID：351516
> 
> 赞同：2
> 
> 时间：2008-12-09T01:24:58.363
> 
> 标签：ms-word, syntax-highlighting

我将在 Word 文档中包含一些代码。特别是一些 sql 语句，但这个问题适用于任何类型的语言。我想通过一些突出显示使代码看起来更好，更容易阅读。

是否有任何工具可以对某些代码进行语法突出显示并允许我将结果复制到 msword 中？最好以一种让某人将代码复制回记事本而不会损坏的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T01:40:38.020

[Quickhighlighter.com](http://quickhighlighter.com/)可以生成多种语言的 html，然后您可以将其放入 Word。无需下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T01:30:56.277

我已经使用 eclipse 通过复制/粘贴来复制语法突出显示、字体和格式。我不知道它有多可靠，虽然它似乎大部分时间都在工作，但奇怪的时候它会失败。Eclipse 可能比您想要的更多，因为它是一个完整的 IDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-01T13:58:15.483

[我喜欢Pygments](http://pygments.org)的风格。它似乎也支持比快速荧光笔更多的语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T01:37:38.807

使用您选择的语法高亮显示。

这取决于它是服务器还是桌面应用程序。

QT 有一个很好的语法高亮代码库。

HTMLTidy 适用于 HTML。

[http://qbnz.com/highlighter/](http://qbnz.com/highlighter/)

[http://code.google.com/p/syntaxhighlighter/](http://code.google.com/p/syntaxhighlighter/)

[http://doc.trolltech.com/4.4/richtext-syntaxhighlighter.html](http://doc.trolltech.com/4.4/richtext-syntaxhighlighter.html)

确保它输出 HTML。

使用 .doc 扩展名保存 HTML。

在 2008 年的 word 中打开。

瞧，word 中的语法高亮。

# c - 如何通过 C 中的命令行接受 md5sum？

> ID：351519
> 
> 赞同：1
> 
> 时间：2008-12-09T01:25:56.847
> 
> 标签：c, parsing, scanf

```
typedef union
{
    uint ui[4];
} md5hash;

void main(void)
{
    int opt;

    while ((opt = getopt(argc, argv, "c:t:s:h:")) != -1) {
        switch (opt) {
        case 'h':
            hash = optarg;
            break;
        default: /* '?' */
            exit(EXIT_FAILURE);
        }
    }

    md5hash hash;

    sscanf(hash, "%x%x%x%x", &hash.ui);
} 
```

./program -h ffffffffffffffffffffffffffffffff

我想做上面的事情，但是 sscanf 不正确地接受 md5sum ......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-09T01:59:09.073

2.  您似乎有两个称为哈希的变量，除了一个隐含在您的代码中。
3.  该`sscanf`语句试图读`hash`回自身，但显然它不会找到任何十六进制数字。
4.  `%x`可能会在不同平台上加载不同大小的十六进制整数，因为您没有为每个字段指定要读取的任何特定长度。
5.  您没有考虑机器字节序。

如果你确实有一个十六进制字符串，`hashString`那么你可以试试

```
int fieldsScanned = sscanf (hashString, "%8x%8x%8x%8x", &hash.ui[0], &hash.ui[1], &hash.ui[2], &hash.ui[3]);

if (fieldsScanned == 4)
{
    // MD5 sum is in hash variable.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T06:38:32.863

```
int
parse_hex(char *s, unsigned char *hex, int len)
{
  int i, r = 0;

  len *= 2;
  for (i = 0; ; i++, s++)
    {
      if (*s == 0 && !(i & 1))
        return i / 2;
      if (i == len)
        {
          fprintf(stderr, "parsehex: string too long\n");
          //exit(1);
        }
      if (*s >= '0' && *s <= '9')
        r = (r << 4) | (*s - '0');
      else if (*s >= 'a' && *s <= 'f')
        r = (r << 4) | (*s - ('a' - 10));
      else if (*s >= 'A' && *s <= 'F')
        r = (r << 4) | (*s - ('a' - 10));
      else
        {
          fprintf(stderr, "parsehex: bad string\n");
          //exit(1);
        }
      if ((i & 1) != 0)
        {
          hex[i / 2] = r;
          r = 0;
        }
    }
}

void
parse_md5(char *s, unsigned char *md5)
{
  if (!*s)
    {
      memset(md5, 0, 16);
      return;
    }
  if (parse_hex(s, md5, 16) != 16)
    {
      fprintf(stderr, "parsemd5: bad md5\n");
      //exit(1);
    }
} 
```

实际上，上面的 sscanf() 方法不起作用，它在双字中以相反的顺序读取字节。

# asp.net - ASP.NET：将 XPath 转换为 bool - 可能吗？

> ID：351520
> 
> 赞同：0
> 
> 时间：2008-12-09T01:26:36.440
> 
> 标签：asp.net, data-binding, xpath

问候！

我有一个 XML 值，我想将其用作布尔值来切换面板的可见性。我有这样的事情：

```
<asp:FormView id="MyFormView" runat="server" DataSourceID="MyXmlDataSource">
    <ItemTemplate>
        <!-- some stuff -->
        <asp:Panel id="MyPanel" runat="server" Visible='<%# (bool)XPath("Menu/Show") %>'>
        </asp:Panel>
        <!-- some more stuff -->
    </ItemTemplate>
</asp:FormView>
<asp:XmlDataSource id="MyXmlDataSource" runat="sever" DataFile="MyFile.xml" /> 
```

但是，这会引发异常。我尝试在我的 XML 中将 Show 的值设置为“true”、“True”、“0”，但无济于事。这甚至可能吗？我的 XPath 确实有效，因为我尝试将 <%# (bool)XPath("Menu/Show") %> 移到外面，以便我可以看到它的值并且它是正确的。我试过这个：

```
<%#((bool)XPath("Menu/Show")).ToString() %> 
```

但这也会引发异常。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T01:33:45.397

尝试`<%#(Convert.ToBoolean(XPath("Menu/Show"))) %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T01:34:49.543

如果 xpath 返回一个字符串，你不想使用[Boolean.Parse](http://msdn.microsoft.com/en-us/library/system.boolean.parse.aspx) (XPath("Menu/Show"))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T02:01:45.370

完后还有：

```
System.Xml.XmlConvert.ToBoolean() 
```

有效字符串为 true 的 "1" 或 "true"**和**false 的 "0" 或 "false **"**。

*以最晦涩的方式转换为布尔值是否可以获得奖励积分？*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T01:33:52.010

试试这个：

不确定经典 ASP 中字符串相等的语法，但您需要进行字符串比较，然后返回 true 或 false。

...Visible='<%#XPath("Menu/Show")).ToString().equals("0") ？返回 true : false%>'...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-20T22:20:14.703

Visible='<%# (XPath("Menu/Show")) as string == "1" ? 真：假 %>'

谨防空异常。使用“作为字符串”而不是 .ToString()

# c++ - C++ 霍夫曼代码头

> ID：351522
> 
> 赞同：2
> 
> 时间：2008-12-09T01:27:06.317
> 
> 标签：c++, tree, header, binaryfiles

基本上，我有我的霍夫曼表

```
std::map<std::string, char> ciMap; 
```

其中 string 是位模式，char 是所述模式表示的值。问题是如何将其存储为压缩文件的标题，以便在我想解码时可以再次构建相同的地图？

尝试将其存储为二进制：

```
size_t mapLen = ciMap.size();
outFile.write(reinterpret_cast<char*>(&mapLen), sizeof(size_t));
outFile.write(reinterpret_cast<char*>(&ciMap), sizeof(ciMap)); 
```

后来建立：

```
inFile.read(reinterpret_cast<char*>(&mapLen), sizeof(size_t));
inFile.read(reinterpret_cast<char*>(&ciMap), sizeof(mapLen)); 
```

不起作用，我得到字符串初始化错误......与NULL有关。有什么建议么？如果您有更好的方法来存储我想听的位和值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T01:43:39.917

你可以自己做，也可以用 boost 来做：http: [//www.boost.org/doc/libs/1_37_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_37_0/libs/serialization/doc/index.html)。您当前尝试的只是将地图视为普通的旧数据类型，这本质上意味着它是 C 数据类型。但事实并非如此，因此它无法保存/加载。boost 序列化正确地做到了。看看它。如果您不想使用它，可以执行以下操作：

```
typedef std::map<std::string, char> my_map;
my_map ciMap;

// saving
std::ofstream stream("file.txt");
for(my_map::const_iterator it = ciMap.begin(); it != ciMap.end(); ++it) {
    stream << it->first << " " << it->second << std::endl;
}

// loading
char c;
std::string bits;
std::ifstream stream("file.txt");
while(stream >> bits >> c)
    ciMap.insert(std::make_pair(bits, c)); 
```

请注意，如果存储的字符也可以是空白字符，则上述内容需要进行一些更改。因此，最好在写出之前先转换为 int，然后在加载时读取为 int。实际上，我推荐 boost 序列化和 boost iostreams ( [http://www.boost.org/doc/libs/1_37_0/libs/iostreams/doc/index.html](http://www.boost.org/doc/libs/1_37_0/libs/iostreams/doc/index.html) )，其中包括一个压缩流，它也可以透明地压缩你的数据.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-09T01:38:16.887

您不能以这种方式将二进制值序列化到磁盘。内存中的表示不仅仅是一个连续的内存块，即使它是它也可能包含相对于块地址的指针。

您需要遍历地图并单独序列化每个项目。然后将它们带回您通过从磁盘中逐一读取项目并将它们重新插入地图来重建地图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T01:34:59.373

好问题。这里的问题是默认容器不支持序列化 - 你必须自己编写它，这很痛苦，但它是可能的。

以下是如何将 a 序列化为`std::map`文本格式。您可以调整它以写入您需要的任何二进制格式。只需将`<<`运算符替换为`reads`and `writes`。

```
template<typename K, typename V>
std::ostream &operator << (std::ostream &out, const std::map<K,V> &map) {
    out << "map " << map.size() << "\n";
    for (typename std::map<K,V>::const_iterator i = map.begin(); i != map.end(); ++i) {
        out << (*i).first << "\n" << (*i).second << "\n";
    }
    return out;
}

template<typename K, typename V>
std::istream &operator >> (std::istream &in, std::map<K,V> &map) {
    std::string mapkeyword;
    size_t num;
    in >> mapkeyword >> num;
    for (size_t i = 0; i < num; ++i) {
        K key; V value;
        in >> key >> value;
        map[key] = value;
    }
    return in;
} 
```

# uitableview - UITableViewController 子类不会加载

> ID：351546
> 
> 赞同：0
> 
> 时间：2008-12-09T01:42:46.550
> 
> 标签：uitableview, cocoa-touch

我试图在屏幕上显示一个表格......

基本上，我使用 UITableView 委托和数据源所需的方法创建了一个自定义 UITableViewController，因为 UITableViewController 为您完成了它。

当我把它放在`-initWithRootView:`控制器中，并将导航栏视图添加到它不显示的窗口时！通过调试，表正在被创建，但委托方法永远不会被调用！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-09T03:45:16.940

Have you tried manually calling -reloadData on the table memory of your controller? This will, if everything's hooked up, call your delegate/datasource methods. If that doesn't do anything, (a) something's not hooked up right, or (b) you're not loading your controller properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T05:29:19.773

我创建了表格并将 tableView 属性直接添加到窗口中，并且它起作用了。我认为添加 reloaddata 不会使其工作，因为此控制器会自动执行此操作。将它作为 rootviewcontroller 添加到导航栏控制器时可能有些不正确！

# php - 您可以为多个视图调用一个 Drupal 视图模板吗？

> ID：351547
> 
> 赞同：0
> 
> 时间：2008-12-09T01:43:06.767
> 
> 标签：php, drupal, drupal-views, drupal-5

我使用 Views Theming Wizard 输出了一个模板，它给了我以下代码块，可以放入 template.php。

我宁愿只维护一个模板，所以我的所有函数都将调用同一个模板，而不是编写同一个函数的多个版本，我想知道是否有一种方法可以将函数名串在一起？就像是：

```
function phptemplate_views_view_list_recent_articles($view, $nodes, $type),
phptemplate_views_view_list_popular_articles($view, $nodes, $type) {
  $fields = _views_get_fields();

  $taken = array();

  // Set up the fields in nicely named chunks.
  foreach ($view->field as $id => $field) {
    $field_name = $field['field'];
    if (isset($taken[$field_name])) {
      $field_name = $field['queryname'];
    }
    $taken[$field_name] = true;
    $field_names[$id] = $field_name;
  }

  // Set up some variables that won't change.
  $base_vars = array(
    'view' => $view,
    'view_type' => $type,
  );

  foreach ($nodes as $i => $node) {
    $vars = $base_vars;
    $vars['node'] = $node;
    $vars['count'] = $i;
    $vars['stripe'] = $i % 2 ? 'even' : 'odd';
    foreach ($view->field as $id => $field) {
      $name = $field_names[$id];
      $vars[$name] = views_theme_field('views_handle_field', $field['queryname'], $fields, $field, $node, $view);
      if (isset($field['label'])) {
        $vars[$name . '_label'] = $field['label'];
      }
    }
    $items[] = _phptemplate_callback('views-list-first-with-abstract', $vars);
  }
  if ($items) {
    return theme('item_list', $items);
  }
} 
```

谢谢，
史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T16:05:45.183

你可以让你需要的模板调用实际函数的一个版本。

就像是：

```
function phptemplate_views_view_list_recent_articles($view, $nodes, $type){
          actual_template_function($view, $nodes, $type);
}

function phptemplate_views_view_list_popular_articles($view, $nodes, $type){
          actual_template_function($view, $nodes, $type);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T19:39:32.853

上面的一个更正让我慢了 1/2 小时......你需要包括一个回报：

```
return actual_template_function($view, $nodes, $type); 
```

除此之外，效果很好。

# c# - 如何将一列插入到两个现有列之间的数据集中？

> ID：351557
> 
> 赞同：24
> 
> 时间：2008-12-09T01:51:42.850
> 
> 标签：c#, insert, dataset

我正在尝试使用 C# 将一列插入到现有的 DataSet 中。

例如，我有一个 DataSet 定义如下：

```
DataSet ds = new DataSet();
ds.Tables.Add(new DataTable());
ds.Tables[0].Columns.Add("column_1", typeof(string));
ds.Tables[0].Columns.Add("column_2", typeof(int));
ds.Tables[0].Columns.Add("column_4", typeof(string)); 
```

稍后在我的代码中，我想在第 2 列和第 4 列之间插入一列。

DataSets 有添加列的方法，但我似乎无法找到插入列的最佳方法。

我想写一些类似下面的东西......

```
...Columns.InsertAfter("column_2", "column_3", typeof(string)) 
```

最终结果应该是一个包含以下列的表的数据集：column_1 column_2 column_3 column_4

而不是： column_1 column_2 column_4 column_3 这是 add 方法给我的

当然必须有一种方法来做这样的事情。

**编辑**...只是想根据以下一些评论澄清我对 DataSet 所做的事情：

> 我正在从存储过程中获取数据集。然后我必须向数据集添加额外的列，然后将其转换为 Excel 文档。我无法控制存储过程返回的数据，所以我必须在事后添加列。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-12-09T02:40:39.537

为此，您可以使用[DataColumn.SetOrdinal()方法。](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.setordinal.aspx)

```
DataSet ds = new DataSet();
ds.Tables.Add(new DataTable());
ds.Tables[0].Columns.Add("column_1", typeof(string));
ds.Tables[0].Columns.Add("column_2", typeof(int));
ds.Tables[0].Columns.Add("column_4", typeof(string));
ds.Tables[0].Columns.Add("column_3", typeof(string));
//set column 3 to be before column 4
ds.Tables[0].Columns[3].SetOrdinal(2); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-09T04:40:56.783

我使用您的建议为 DataSet 的 DataColumnCollection 创建了一个扩展方法：

```
public static void InsertAfter(this DataColumnCollection columns, 
                              DataColumn currentColumn, DataColumn newColumn)
{
    if (!columns.Contains(currentColumn.ColumnName))
       throw new ArgumentException(/** snip **/);

    columns.Add(newColumn);
    //add the new column after the current one
    columns[newColumn.ColumnName].SetOrdinal(currentColumn.Ordinal + 1); 
} 
```

我现在可以写：

```
 dt = ds.Tables[0];
 dt.Columns.InsertAfter(dt.Columns["column_2"], new DataColumn("column_3")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T06:53:17.153

基于[https://stackoverflow.com/a/17372008/492336](https://stackoverflow.com/a/17372008/492336)，我使用 SetOrdinal 和 IndexOf() 在`bar`之前插入`foo`：

```
table.Columns.Add("bar").SetOrdinal(table.Columns.IndexOf("foo")); 
```

`foo`在添加后插入它`+1`：

```
table.Columns.Add("bar").SetOrdinal(table.Columns.IndexOf("foo")+1); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-09T01:57:59.093

将前两列复制到新数据集中，然后添加第三列，然后添加其余列。

如有必要，您可以将其包装在 InsertAfter 函数中。

# java - System.currentTimeMillis vs System.nanoTime

> ID：351565
> 
> 赞同：398
> 
> 时间：2008-12-09T01:58:47.547
> 
> 标签：java, timer, time-precision

## **准确性对比 精确**

我想知道的是在我的游戏中更新对象的位置时是否应该使用**System.currentTimeMillis()**或**System.nanoTime() ？**他们的运动变化与自上次通话以来经过的时间成正比，我希望尽可能精确。

我读过不同操作系统之间存在一些严重的时间分辨率问题（即 Mac / Linux 的分辨率几乎为 1 毫秒，而 Windows 的分辨率为 50 毫秒？？）。我主要在 Windows 上运行我的应用程序，50 毫秒的分辨率似乎非常不准确。

有比我列出的两个更好的选择吗？

有什么建议/意见吗？

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2008-12-09T02:06:01.230

如果您只是在寻找**经过时间**的极其精确的测量值，请使用`System.nanoTime()`. `System.currentTimeMillis()`将为您提供自纪元以来最准确的可能经过的时间（以毫秒为单位），但`System.nanoTime()`相对于某个任意点为您提供纳秒精度的时间。

来自 Java 文档：

> ```
> public static long nanoTime() 
> ```
> 
> 返回最精确的可用系统计时器的当前值，以纳秒为单位。
> 
> 此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。返回的值表示自某个固定但任意的*原始*时间以来的纳秒（可能在将来，因此值可能为负数）。此方法提供纳秒精度，但不一定提供纳秒精度。不保证值的变化频率。 由于数值溢出，超过大约 292 年（2 ^(63纳秒）的连续调用的差异将无法准确计算经过的时间。)

例如，要测量一些代码需要多长时间执行：

```
long startTime = System.nanoTime();    
// ... the code being measured ...    
long estimatedTime = System.nanoTime() - startTime; 
```

另请参阅：[JavaDoc System.nanoTime()](http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#nanoTime--)和[JavaDoc System.currentTimeMillis()](http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#currentTimeMillis--)了解更多信息。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-02-16T16:03:33.330

由于没有其他人提到这一点……</p>

`System.nanoTime()`比较不同 JVM 之间的调用结果是不安全的，每个 JVM 可能有一个独立的“起源”时间。

`System.currentTimeMillis()`将在 JVM 之间返回（近似）相同的值，因为它与系统挂钟时间相关联。

如果要计算两个事件之间经过的时间量，例如秒表，请使用`nanoTime()`; 系统挂钟的更改`currentTimeMillis()`不适合此用例。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2008-12-09T06:06:04.880

[Arkadiy](https://stackoverflow.com/users/3458/arkadiy)更新：我`System.currentTimeMillis()`在 Oracle Java 8 中观察到 Windows 7 上更正确的行为。时间以 1 毫秒的精度返回。OpenJDK 中的源代码没有改变，所以我不知道是什么导致了更好的行为。

* * *

Sun 的 David Holmes 几年前发表了一篇博客文章，其中非常详细地介绍了 Java 计时 API（特别是`System.currentTimeMillis()`和`System.nanoTime()`），您何时想要使用它们，以及它们如何在内部工作。

[Hotspot VM 内部：时钟、计时器和调度事件 - 第 I 部分 - Windows](https://web.archive.org/web/20160308031939/https://blogs.oracle.com/dholmes/entry/inside_the_hotspot_vm_clocks)

Java 在 Windows 上为具有定时等待参数的 API 使用的计时器的一个非常有趣的方面是，计时器的分辨率可以根据可能进行的其他 API 调用而改变 - 系统范围内（不仅仅是在特定进程中） . 他展示了一个示例，其中使用`Thread.sleep()`将导致此分辨率更改。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-09-25T00:28:56.627

正如其他人所说，currentTimeMillis 是时钟时间，它会因夏令时而改变（**不是：夏令时和时区与 currentTimeMillis 无关，其余的都是真的**），用户更改时间设置，闰秒和互联网时间同步。如果您的应用程序依赖于单调递增的经过时间值，您可能更喜欢 nanoTime。

您可能认为玩家在玩游戏时不会摆弄时间设置，也许您是对的。但不要低估由于互联网时间同步或远程桌面用户造成的中断。nanoTime API 不受这种破坏的影响。

如果您想使用时钟时间，但要避免由于 Internet 时间同步而导致的不连续性，您可以考虑使用诸如 Meinberg 之类的 NTP 客户端，它可以“调整”时钟频率以将其“调零”，而不仅仅是定期重置时钟。

我从个人经历说。在我开发的一个天气应用程序中，我得到了随机出现的风速峰值。我花了一段时间才意识到我的时基被典型 PC 上时钟时间的行为所打乱。当我开始使用 nanoTime 时，我所有的问题都消失了。一致性（单调性）对我的应用程序来说比原始精度或绝对精度更重要。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-12-09T02:06:21.557

`System.nanoTime()`较旧的 JVM 不支持。如果这是一个问题，请坚持`currentTimeMillis`

关于准确性，您几乎是正确的。在某些 Windows 机器`currentTimeMillis()`上，分辨率约为 10 毫秒（不是 50 毫秒）。我不知道为什么，但有些 Windows 机器和 Linux 机器一样准确。

我过去使用过[GAGETimer](http://java.dnsalias.com/)并取得了一定的成功。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-12-09T02:24:09.150

是的，如果需要这种精度，请使用`System.nanoTime()`，但请注意，您需要 Java 5+ JVM。

在我的 XP 系统上，我看到使用以下代码报告的系统时间至少为~~100 微秒~~278*纳秒：*

```
private void test() {
    System.out.println("currentTimeMillis: "+System.currentTimeMillis());
    System.out.println("nanoTime         : "+System.nanoTime());
    System.out.println();

    testNano(false);                                                            // to sync with currentTimeMillis() timer tick
    for(int xa=0; xa<10; xa++) {
        testNano(true);
        }
    }

private void testNano(boolean shw) {
    long strMS=System.currentTimeMillis();
    long strNS=System.nanoTime();
    long curMS;
    while((curMS=System.currentTimeMillis()) == strMS) {
        if(shw) { System.out.println("Nano: "+(System.nanoTime()-strNS)); }
        }
    if(shw) { System.out.println("Nano: "+(System.nanoTime()-strNS)+", Milli: "+(curMS-strMS)); }
    } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-08-17T02:29:35.987

对于游戏图形和平滑位置更新，请使用`System.nanoTime()`而不是`System.currentTimeMillis()`. 我在游戏中从 currentTimeMillis() 切换到 nanoTime()，并在运动平滑度方面获得了重大的视觉改进。

虽然一毫秒似乎应该已经很精确，但从视觉上看却并非如此。`nanoTime()`可以改善的因素包括：

*   低于挂钟分辨率的准确像素定位
*   如果需要，可以在像素之间消除锯齿
*   Windows 挂钟不准确
*   时钟抖动（挂钟实际向前滴答的时间不一致）

正如其他答案所暗示的那样，如果重复调用 nanoTime 确实会产生性能成本 - 最好每帧只调用一次，并使用相同的值来计算整个帧。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-11-28T15:48:15.560

`System.currentTimeMillis()`对于经过的时间是不安全的，因为这种方法对系统的系统实时时钟变化很敏感。你应该使用`System.nanoTime`. 请参考 Java 系统帮助：

关于 nanoTime 方法：

> .. 此方法提供纳秒精度，但不一定提供纳秒分辨率（即值更改的频率） - 除了分辨率至少与 currentTimeMillis() 一样好之外，不做任何保证。

如果您使用`System.currentTimeMillis()`经过的时间可以是负数（返回 <-- 到未来）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-04-21T11:01:25.817

我对[nanotime](http://juliusdavies.ca/nanotime/)有很好的体验。它使用 JNI 库提供两个 long 的挂钟时间（自纪元以来的秒数和该秒内的纳秒）。它适用于为 Windows 和 Linux 预编译的 JNI 部分。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-04-24T04:52:10.777

这里的一件事是 nanoTime 方法的不一致。它没有为相同的输入提供非常一致的值。currentTimeMillis 在性能和一致性方面做得更好，而且，虽然不如 nanoTime 精确，但误差范围较小，因此其值更准确。因此，我建议您使用 currentTimeMillis

# javascript - 我在哪里可以找到有关 Javascript 引擎内部的信息？

> ID：351574
> 
> 赞同：24
> 
> 时间：2008-12-09T02:07:13.817
> 
> 标签：javascript, documentation, internals

我正在寻找关于 Javascript 引擎内部的书籍/文章/论文，这些书籍/文章/论文是关于 JVM 内部、CLR 内部等的许多参考作品。我可以（并且可能会）查看 JavaScriptCore 和 V8/Chromium 的源代码，但如果那里有一本书或其他一些“导游”文档，我宁愿先阅读它们。谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-20T11:18:46.817

我也对此感到好奇，这就是我发现的：

关于 Chrome 的 Javascript 引擎 (v8)：

*   [V8 中的垃圾收集；适用于移动设备及其他设备](http://ajaxian.com/archives/garbage-collection-in-v8-for-mobile-and-beyond)
*   [V8 内部原理：构建高性能 JavaScript 引擎](http://www.scribd.com/doc/16921039/V8-Internals-Building-a-High-Performance-JavaScript-Engine)
*   [Chrome V8 - 设计元素](https://developers.google.com/v8/design?hl=it)

关于 Firefox Javascript 引擎（蜘蛛猴）：

*   [蜘蛛猴内部结构](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Internals)
*   [蜘蛛猴正在节食](https://blog.mozilla.org/nnethercote/2011/11/01/spidermonkey-is-on-a-diet/)
*   [IonMonkey：Mozilla 的新 JavaScript JIT 编译器](http://www.infoq.com/news/2011/05/ionmonkey)
*   [Tracemonkey](http://ejohn.org/blog/tracemonkey/)（过时的 JIT 编译器，但这篇文章仍然很有趣）

关于 IE 9+ Javascript 引擎（Chakra）：

*   [IE10 和 Windows 8 中 JavaScript 性能的进步 - Chakra 的内部结构](http://blogs.msdn.com/b/ie/archive/2012/06/13/advances-in-javascript-performance-in-ie10-and-windows-8.aspx)

关于 Safari Javascript 引擎（SquirrelFish）：

*   [宣布松鼠鱼](https://www.webkit.org/blog/189/announcing-squirrelfish/)
*   [介绍 SquirrelFish Extreme](https://www.webkit.org/blog/214/introducing-squirrelfish-extreme/)

总体概述：

*   [JavaScript 引擎：引擎盖下](http://ontwik.com/javascript/javascript-engines-under-the-hood/)
*   [JavaScript 引擎的未来：用 JavaScript 编译器替换它们](http://www.shorestreet.com/node/43)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-09T02:37:26.937

深入的文档之一可能是[ECMA-262 语言规范](http://www.ecma-international.org/publications/standards/Ecma-262.htm)。

一本关于语言习语和最佳实践的好书是[JavaScript The Good Parts](http://oreilly.com/catalog/9780596517748/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-09T02:40:55.450

谷歌已经记录了很多关于 V8 的文档。[http://code.google.com/p/v8/](http://code.google.com/p/v8/) 主页上有一些有趣的视频（尽管您可能已经看过这些视频）

# language-agnostic - 为什么反射称为反射而不是内省？

> ID：351577
> 
> 赞同：80
> 
> 时间：2008-12-09T02:09:34.217
> 
> 标签：language-agnostic, reflection

反射一词的由来是什么？这似乎更像是自省。为什么不这么叫？

[内省](http://en.wiktionary.org/wiki/introspection)：向内看；具体来说，自我检查的行为或过程。

[反射](http://dictionary.reference.com/browse/reflection)：

1.  反映的行为或被反映的状态。
2.  一个图像; 表示; 对方
3.  将想法固定在某事上；详细的思考
4.  在考虑或冥想中出现的想法。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-12-09T03:03:27.837

关于反射的法语维基百科文章有一个有趣的答案（[这里](http://fr.wikipedia.org/wiki/R%C3%A9flexion_(informatique))）

反射可以分为两部分：

*   内省：程序可以检查自己。
*   代祷：程序可以修改其状态/意义。

因此，反射是比内省“更强”的属性。这就是为什么你说[类型自省](http://en.wikipedia.org/wiki/Introspection_(computer_science))是为了在运行时知道类型的能力（改变它们是另一个动作：转换/转换）。

编辑：实际上我刚刚意识到第一个答案就是这样说的^^。是时候拔掉自己的插头了...

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-12-09T02:30:44.970

反思源于“反省、自我修正、自我复制”的思想，以改变为目的的自我反思。在编程中，您使用反射在使用它的上下文中检查程序本身的结构，而不是仅仅检查它。你得到的是你可以用来修改它的程序的表示，而不是它运行的数据。

更多信息可以[在维基百科文章中找到。](http://en.wikipedia.org/wiki/Reflection_(computer_science)).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-27T15:17:19.757

反射一词来自 Brian Cantwell Smith 1982 年的博士论文，可在[http://publications.csail.mit.edu/lcs/pubs/pdf/MIT-LCS-TR-272.pdf找到](http://publications.csail.mit.edu/lcs/pubs/pdf/MIT-LCS-TR-272.pdf)

被称为反射的东西通常只是自省，即对元数据的访问。Smith 对反射的要求包括从元数据返回的*因果关系*，而这通常是缺少的组件。想象反射的一种方法是访问实现，而不仅仅是某个计算的新实例的实现，而是计算访问它*自己的*实现。当然，Java 的原始反射 api 被错误命名，因为它在这个意义上不是反射的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-09T02:18:16.960

还有另一个概念称为类型自省，它指的是在运行时确定对象类型的能力。

编辑：我意识到您的问题旨在与语言无关，但在 Java 中，反射用于识别对象具有哪些成员，而自省允许您识别对象具有哪些 JavaBeans 属性，这就是自省类在java.beans 包。不过，我不确定这些术语在其他语言中的确切区别是什么，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-07T13:31:54.563

在 .Net 中，我认为反射这个术语非常合适，因为检查的不是类型本身，它是代码的清单，它只是一个描述。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-12-07T13:41:05.673

在定义 3 和 4 的意义上，反射可以是内省的。也就是说，内省是对自己的反思。我认为内省是代码分析自身行为的更好用词，因为这个词更具体，但我不认为反思是完全不合适的。

# html - 在 HTML 中制作可展开按钮

> ID：351578
> 
> 赞同：2
> 
> 时间：2008-12-09T02:10:06.243
> 
> 标签：html, css, localization

我需要在我的 HTML 中制作 OK 和 Cancel 按钮，并且我希望它们具有固定宽度，因此两个按钮的大小相同。例如，像这样：

```
<style>
button.ok_cancel {
    width: 50px;
    background-color: #4274af;
    font-size: 9px;
    line-height: 12px;
    color: #fff;
    cursor: pointer;
    text-transform: uppercase;
    padding: 1px;
    border: 0px;
    margin: 0 0 0 5px;
    text-align: center;
    letter-spacing: 1px;
}
</style>

<button class="ok_cancel" onclick="do_cancel()">Cancel</button> 
```

但现在我正在本地化文本，“取消”的翻译对于按钮来说可能太宽了。如果字符串适合，我希望按钮的固定宽度为 50 像素，但如果字符串更宽，我希望按钮的宽度扩大。将使用固定数量的侧边距来保持按钮看起来不错。

我知道我可能无法使用纯 CSS 来做到这一点，但是我可以使用的最简单的 HTML 是什么，它会给我想要的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-10T01:20:12.490

我从 twodayslate 的回答开始工作，结果是这样的：

```
/* Browser hack! This is for everyone: */
button {
    display: inline;
    cursor: pointer;
    padding: 6px 6px;
    width: 50px;
    overflow: visible;
}
/* and this is for non-IE browsers: */
html>body button {
    min-width: 50px;
    width: auto;
} 
```

IE 想要一个指定的宽度和溢出可见，其他浏览器想要一个最小宽度和宽度自动。CSS hack 让 IE 看​​到一组属性，而另一个浏览器看到另一组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T02:15:53.050

不确定，但是：

> 按钮{最小宽度：50px；宽度：自动；}

LMK 如果这行得通，它应该可以工作，只要它不浮动。

# c++ - 如何发现/控制 C++ fstream 中的内部缓冲级别？

> ID：351582
> 
> 赞同：3
> 
> 时间：2008-12-09T02:14:01.540
> 
> 标签：c++, iostream, ifstream

假设我这样做（一个人为的例子）：

```
#include <iostream>
#include <fstream>

using namespace std;

int main(int argc, char* argv[])
{
    ifstream ifs(argv[1]);

    char ch;
    while(ifs.read(&ch, 1)) {
        cout << ch;
    }
} 
```

我假设（希望）iostream 库在这里做了一些内部缓冲，并且不会在操作系统级别将其变成无数的单字节文件读取操作。

有没有办法：

**a)**找出 ifstream 内部缓冲区的大小？

**b)**改变 ifstream 内部缓冲区的大小？

我正在编写一个文件过滤器，它需要以小块读取数 GB 的文件，我想尝试不同的缓冲区大小，看看它是否会影响性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T02:24:12.237

您可以使用`ios::rdbuf()`来获取指向`streambuf`对象的指针。此对象表示流的内部缓冲区。

您可以调用`streambuf::pubsetbuf(char * s, streamsize n)`以设置具有给定大小的新内部缓冲区。

有关更多详细信息，请参阅[此链接](http://www.cplusplus.com/reference/iostream/streambuf/pubsetbuf.html)。

**编辑：**这是您的情况：

```
 #include <iostream>
#include <fstream>
using namespace std;

int main(int argCount, char ** argList[])
{
    ifstream inStream(argList[1]);

    char myBuffer [512];
    inStream.rdbuf()->pubsetbuf(myBuffer, sizeof(myBuffer));

    char ch;
    while(inStream.read(&ch, 1))
    {
        cout << ch;
    }
}
```

**编辑：正如**[litb](https://stackoverflow.com/users/34509/litb)所指出的，实际行为`streambuf::pubsetbuf`是“实现定义的”。

如果您真的想使用缓冲区，您可能必须滚动自己的缓冲类，该类继承自`streambuf`.

# php - 如何在 PHP 中构建安全的发送给朋友功能？

> ID：351587
> 
> 赞同：2
> 
> 时间：2008-12-09T02:16:38.197
> 
> 标签：php, email

任何人都可以建议一种方法或示例链接，在 PHP 中构建一个允许用户通过电子邮件将链接发送给多个朋友的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-09T03:02:51.770

By "secure" do you mean not allowing your form to be used to send spam?

There are a few ways to combat this:

*   Don't allow the sender to enter any information. You'll just send to that list of e-mails: "such and such" suggested you check out this link. This removes the incentive from spammers.
*   Captcha, force the user to fill out things to make sure it's not a robot sending spam
*   Limit number of e-mails sent from the same IP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T03:46:35.723

The most recent send to a friend form I've done keeps track of the sender's IP, "from" email address, "to" email address and makes sure there are no more than five of any one of those within 24 hours.

Make sure you validate any email addresses with regular expressions, put character limits on any text areas, sanitise anything going into a database (you should use pdo).

With regards to functionality, I modelled it off Amazon's tell-a-friend. They've got a big budget for usability and so on, so I expect modelling it off them is a good idea.

# iphone - 在 iPhone 上创建一个“聊天泡泡”，比如 Tweetie

> ID：351602
> 
> 赞同：12
> 
> 时间：2008-12-09T02:24:32.563
> 
> 标签：iphone, cocoa-touch

只是好奇，我是否忽略了 API 中的某个地方以显示 iPhone 的 SMS 应用程序中的聊天气泡类型图像？有一些应用程序使用与 iPhone 完全一样的气泡，我想知道他们使用的是本机小部件还是他们自己的图像。

这也可以在推文内容所在的 Tweetie 应用程序中看到。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-30T20:24:04.167

我建议使用他们为按钮图像推荐的拉伸方法。

```
[UIImage stretchableImageWithLeftCapWidth:15 topCapHeight:13] 
```

您可以通过下载[Twitterfon](http://twitterfon.net/)的源代码（位于 FAQ 页面）来查看一个工作示例。您可以看到他们如何为它编写可重用控件以及用于创建您自己的气泡的示例图像。

编辑 - 源不再可用（NDA，可能）

我把图像放在[这里](http://drop.io/jibschx)。你应该能够弄清楚其余的:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-04-02T01:11:19.120

这里有一个视频教程显示 Jabs 方法[http://vimeo.com/8718829](http://vimeo.com/8718829)它包括多种颜色的气泡图形。twitterfon 的来源也在这里 [https://github.com/jimpick/twitterfon](https://github.com/jimpick/twitterfon)

（这些应该是对刺戳答案的评论，但我没有足够高的评价来评论）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-09T02:49:53.963

您需要使用自己的图像，Apple 建议使用 9 个 UIImageViews（3 行，每行 3 个）（左上角、上中、右上角、左中、中、右中、左下角、中下、下右上角）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-09T08:04:13.533

阅读 UICatalog 的 ButtonsViewController.m 中的代码：“+buttonWithTitle:”，它从一个图像创建一个可拉伸的按钮，这与创建聊天气泡的情况相同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-04-05T09:37:05.730

查看[AcaniChat](https://github.com/acani/acaniChat)。它是 iPhone Messages 应用程序的最佳开源版本。它使用 Core Data，很快就会使用 WebSockets。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-27T23:27:24.797

我今天从我的一个 RSS 提要中偶然发现了这一点。

它是在 Illustrator 中重新创建的一堆 UI 元素

值得注意的是，他们有聊天气泡。您也许可以将它们用作图像的开始，以执行 kdbdallas 所说的操作。

[http://www.mercuryintermedia.com/blog/index.php/2009/03/iphone-ui-vector-elements](http://www.mercuryintermedia.com/blog/index.php/2009/03/iphone-ui-vector-elements)

希望这可以帮助。

克里斯。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-26T03:18:04.550

制作具有可拉伸图像背景的 UILabel 非常容易。如果您想将图像放入气泡中，则必须进行一些蒙版以使其看起来像 Apple 的。查看[BubbleThingie](https://github.com/tkirby/BubbleThingie/blob/master/README.md)示例代码，了解如何进行图像屏蔽。它还提供了如何使用 UIButton 或 UILabel 制作文本气泡的示例。

![在此处输入图像描述](https://i.stack.imgur.com/VmHq2.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-04T17:57:26.060

我们的许多应用程序都具有聊天或消息传递功能，许多客户要求构建“类似于 iPhone 的 SMS 聊天，带有气泡”的聊天。

不幸的是，Cocoa SDK 并没有提供方便和简单的方式来显示聊天气泡，而且我们在谷歌上搜索到的许多代码片段也不完美——其中一些简直丑陋，一些无论文本长度如何都显示相同大小的气泡，一些没有改变气泡宽度，有些很好，但几乎不能定制，等等。

最终，Alex - 我们领先的 iOS 架构师（他也恰好是 Stex 的 CTO） - 从头开始​​编写了这段代码。主要特点是：

*   很容易（真的很容易！）可定制和嵌入。该代码基于 UITableView 子类化方法，因此一旦您需要将聊天工具添加到应用程序 - 将其视为简单地添加 UITableView，其中每个单元格都是一个消息
*   可轻松自定义气泡的颜色和样式 - 有 2 张图片，可以在 Photoshop 中轻松调整
*   时间分组
*   灵活的气泡高度和宽度

代码可以从GitHub下载，[https://github.com/AlexBarinov/UIBubbleTableView](https://github.com/AlexBarinov/UIBubbleTableView)

# sql-server - 在 SQL Server 中创建索引的最佳实践和反模式？

> ID：351615
> 
> 赞同：19
> 
> 时间：2008-12-09T02:32:35.747
> 
> 标签：sql-server, database, database-design

在为 SQL Server 定义集群和非集群索引时，您会考虑哪些事项？数据库新手应该注意哪些反模式？如果可能，请解释“为什么”或提供参考。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-09T02:52:31.430

索引基本上是“备忘单”。它允许 DBMS 在磁盘上查找特定值（或值范围），而无需扫描整个表。通常，您会通过索引在 INSERT / UPDATE / DELETE 上付出一点代价，但很少会因为它本身就成为瓶颈。一个好的 DBMS 只会在索引有助于查询性能时才使用索引，因此这里没有很多非常负面的反模式；如果您有额外的索引，它通常不会对您造成太大伤害（除非您谈论的是非常高事务性的表）。也就是说，全面的仔细索引将帮助您确保真正重要的索引在那里，而发现它的最佳方法是分析您的应用程序。

了解何时以及何时不使用索引的关键是了解它们在幕后的真正作用。简而言之，当索引的选择性很高（即与关系的大小相比，不同可能值的数量很高）时，您需要它们。因此，例如，如果您有一个包含 10,000 行的表，并且该表上有一个名为“color”的列，该列是“red”或“blue”，那么拥有索引并没有多大帮助，因为 DBMS无论如何，可能不得不将大部分页面加载到内存中（假设是随机分布）。反过来，

大多数现代数据库系统中的索引都是用 B+ 树实现的，它是 B-Tree 的一个非常酷的变体，针对慢速二级存储（磁盘而不是内存）进行了优化。您可以从[Database Systems: The Complete Book](http://infolab.stanford.edu/~ullman/dscb.html)中很好地了解它们的使用和功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-09T03:08:56.280

不要在没有填充有代表性数据的数据库的情况下测试索引或优化查询。

数据库通常会忽略布尔字段上的任何索引。它将作为复合索引的一部分忽略它。（但是，请参阅 SQL Server 2008 中的“过滤索引”。）

对于将提供所有值的复合索引，按基数（或数量，或数据中有多少不同的值）以相反的顺序枚举它们。

不要假设任何事情。测试一切。

您只有一个聚集索引。不要将它浪费在唯一索引上，除非您确定您确实需要几乎总是拉取按该列排序的行。您希望将它用于经常获取多个相邻行的情况。

“覆盖”索引本身包含解析选择所需的所有字段。请记住，在大多数关键情况下，“几乎”涵盖的索引还不够好。

您在在线博客中阅读的有关设计索引的大部分内容要么是错误的，要么是高度合格的且不适用于您的案例，或者在收益和成本方面没有得到很好的校准。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T02:44:35.753

**Blunderbus** - 我过去犯过的索引反模式。在没有查看解释计划或真正了解优化器如何工作的情况下，将索引或相同索引的变体放在表中的列上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-09T02:53:38.417

以下是我见过或犯过的更多索引反模式：

**一揽子覆盖**——将索引放置在增长很少或没有增长和（非常）低行数的表上。这会适得其反，因为索引查找可能需要比表扫描更长的时间。

**工业强度索引**- 在主键列上放置索引。我被要求这样做以“加快”查询。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-09T02:54:32.690

考虑阅读[关系数据库索引设计和优化器](https://rads.stackoverflow.com/amzn/click/com/0471719994)。它会给你很多想法以及它们为什么好的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-09T02:54:37.230

我看到人们只是使用数据库引擎优化顾问并认为它在某种程度上足够聪明，可以建议最佳索引和统计信息。这是您应该避免的模式。

在决定如何进行优化之前，请查看您的查询计划输出。他们可以告诉你很多关于如何最好地处理查询的有用信息。人们经常在各种字段上抛出索引，因为他们认为这是正确的做法，而忽略了在某些情况下，他们可能获得的任何收益都可能因拥有索引本身的影响而被整体否定（表上有很多索引可以减慢插入和更新）。

下次您在书店时，请拿起 Itzik Ben-Gan（MS Press）的一本关于 T-SQL 查询的书（他们会拥有它）。阅读前 3 章，它将介绍查询过程在 SQL Server 中是如何工作的——就您使用这种特定技术的工作而言，它们可能被证明是您将读过的最重要的 3 章。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-09T14:42:31.343

我发现人们在索引时忘记做的一件事是索引外键。主键索引是自动构建的（我说的是 SQL Server，其他数据库可能会有所不同），但外键不是。但许多人认为他们是（大概是那些认为触发器一次只会对一张记录采取行动的人）。由于它们几乎总是参与连接（为什么你会有一个？），它们大部分时间都需要被索引（例外是一个非常小的表）。

我将我最喜欢的索引反模式定义为：为什么我的查询如此慢 - 当非数据库人员设计大型数据库并且甚至不知道在其上放置任何索引时发生的情况。典型的症状出现在留言板上，有人问为什么要花 40 分钟对他们的 5000 万条记录表进行简单查询。这种反模式可能会出现在许多其他数据库设计反模式中，因为即使不熟悉索引的人也不太可能设计出高效或有效的数据库结构。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-20T11:54:39.800

将聚集索引放在 GUID 列上通常不是一个好主意。聚集索引定义了数据存储方式的物理顺序。因此，最好将聚集索引放在递增或递减且唯一的列上。
（如果聚集索引不是唯一的，SQL Server 会在内部将 PK 添加到聚集索引中）。Guid 是一个随机值（除非您确保使用顺序 guid），因此这意味着每次在作为聚集索引的一部分的列中插入或更新 guid 时，Sql Server 都必须在数据页。

此外，尝试在您经常用于执行“范围”搜索的列上放置聚集索引。

# iphone - 扩展 restful_authentication/AuthLogic 以支持匿名 iPhone 的延迟登录的最佳方法是什么？

> ID：351627
> 
> 赞同：8
> 
> 时间：2008-12-09T02:38:03.800
> 
> 标签：iphone, ruby-on-rails, ruby, restful-authentication

我正在构建一个与 Ruby on Rails 后端对话的 iPhone 应用程序。Ruby on Rails 应用程序还将为 Web 用户提供服务。restful_authentication 插件是提供快速和可定制的用户身份验证的绝佳方式。但是，我希望 iPhone 应用程序的用户在新列中存储一个由手机的唯一标识符 ([[UIDevice device] uniqueIdentifier]) 自动创建的帐户。稍后，当用户准备好创建用户名/密码时，帐户将更新为包含用户名和密码，iPhone 唯一标识符保持不变。用户在设置用户名/密码之前不能访问该网站。然而，他们可以使用 iPhone 应用程序，因为该应用程序可以使用它的标识符来验证自己。

修改 restful_authentication 以执行此操作的最佳方法是什么？创建插件？或者修改生成的代码？

替代框架怎么样，例如 AuthLogic。允许 iPhone 将生成的身份验证令牌锁定到其 UUID，然后让用户稍后创建用户名/密码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-14T01:27:53.660

我认为您不应该单独使用电话标识符进行身份验证，因为它不是秘密，而且可能也是可猜测/可预测的。不要忘记，如果有人想破解您的网络应用程序，他们不必使用您的代码 - 他们只需猜测设备 ID 并尝试使用任何网络客户端来弄乱您的用户数据。

您应该将设备 ID 视为类似于用户名 - 它用于识别而不是身份验证。我建议您让用户选择一个密码，或者更好地自动生成一个随机代码，以配合它 - 然后发送设备 ID +此密码/代码首先注册设备，然后对设备进行身份验证。

你也可以打赌，一些用户将拥有不止一台设备——要么他们最终会更换一台，要么你会得到像 Stephen Fry 这样带着 4 部 iPhone 的人。为了解决这个问题，我建议你寻找一种方法来实例化 restful_authentication 两次，一次用于验证用户，第二次用于验证设备。我没有使用过这个插件，但我希望你只需要使用不同的表参数来实现这一点。然后在您的应用程序逻辑中允许用户将多个设备与其帐户相关联。

要安全地做到这一点，要么从设备上执行此操作，要么让设备显示一个随机代码，然后他们将其输入网络应用程序以证明他们拥有该设备（这听起来比实际更痛苦 - 这与苹果使用的过程相同在 iTunes、Apple TV 和远程应用程序中 - 看看他们是如何做到的 - 所以这对用户来说不会那么令人惊讶）。

（还要确保在生成任何随机密码时使用加密随机数生成器作为基础 - 可能有一个 iPhone API 用于此 - 否则您的密码可能是可预测的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T14:36:44.927

您是否尝试过使用其他身份验证方案，例如[Authlogic](http://authlogic.rubyforge.org/)？我发现 restful_authentication 相当侵入性（尽管我使用[bort](http://matthall.wordpress.com/2008/09/09/a-bort-fork-rails-base-application/)作弊）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-06T17:07:29.850

**[在 Rails链接文本](http://www.railsgeek.com/2009/1/6/generate-random-password-in-rails)**中生成随机密码** 我正在为我的一个项目使用 Restful_authentication 插件。作为我的用户创建工作流程的一部分，系统应该为新用户生成一个随机密码。**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-03T02:47:20.823

您如何看待使用 UDID 和使用 UDID + 站点范围定义的盐生成的随机密码？

就像是：

```
salt = 'afG553Dvbf3'

udid = '1234567890'
pass = Digest::MD5.hexdigest(udid + salt) 
```

并在下次连接时将该密码发送到 iPhone。

# css - 如何在 Webkit (Safari/Chrome) 中动态加载 css 规则？

> ID：351633
> 
> 赞同：7
> 
> 时间：2008-12-09T02:41:01.877
> 
> 标签：css, dynamic, webkit, loading

我目前在 Webkit（Safari 和 Chrome）中遇到问题，我尝试将一些 html 动态（innerHTML）加载到 div 中，html 包含 css 规则（...），在 html 被渲染后，样式定义没有加载（所以视觉上我可以告诉样式不存在，并且如果我使用 javascript 搜索它们，也找不到样式）。我曾尝试使用 jquery 插件 tocssRule()，它可以工作，但它太慢了。还有另一种让 webkit 动态加载样式的方法吗？谢谢。帕特里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-09T07:57:30.863

我认为将“链接”标签附加到文档头部是一种更好的做法。如果这不可能，请尝试将“样式”标签附加到头部。样式标签不应该在正文中（甚至不验证）。

附加链接标签：

```
var link = document.createElement('link');

link.setAttribute('rel', 'stylesheet');

link.type = 'text/css';

link.href = 'http://example.com/stylesheet.css';

document.head.appendChild(link); 
```

附加样式标签：

```
var style = document.createElement('style');

style.innerHTML = 'body { background-color: #F00; }';

document.head.appendChild(style); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-12-22T19:26:01.093

直接的 jQuery 方式（适用于主要浏览器 - 包括 Chrome）：[http ://topsecretproject.finitestatemachine.com/2009/09/how-to-load-javascript-and-css-dynamically-with-jquery/](http://topsecretproject.finitestatemachine.com/2009/09/how-to-load-javascript-and-css-dynamically-with-jquery/)

从网站：

```
$("head").append("<link />");
var CSS = $("head").children(":last");
CSS.attr({
"rel": "stylesheet",
"type": "text/css",
"href": "url/to.css"
}); 
```

注意：该示例还包括 JS 的注入，如果您只想注入 CSS 引用，可以忽略它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-05T00:02:36.583

最简单的方法（即使用 jQuery）如下：

```
var cssLink = $('<link />');
cssLink.attr("rel","stylesheet")
cssLink.attr("type", "text/css");
cssLink.attr("href","url/to.css"); 
```

如果你这样做，那么它将在 Safari 中工作。如果你用普通的 jQuery 方式（都在一个文本字符串中）它会失败（css 不会加载）。

然后你只需将它附加到头部 $('head').append(cssLink);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T18:30:58.137

谢谢Vatos，你给了我一个很好的领导，基本上我做了你的建议，但使用jquery设置html并将新样式附加到头部，因为在执行innerHTML和document.head时，safari/chrome会停止并且document.head未定义。我的代码看起来像这样

```
var cssDefinitions = '..my style chunk goes here';
var style = document.createElement('style');'
$(style).html(cssDefinitions);
$('head').append(style);
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-04T19:50:17.963

这是演出。帕特里克所说的对我不起作用。这就是我的做法。

```
 var ref = document.createElement('style');
ref.setAttribute("rel", "stylesheet");
ref.setAttribute("type", "text/css");
document.getElementsByTagName("head")[0].appendChild(ref);
if(!!(window.attachEvent && !window.opera)) ref.styleSheet.cssText = asd;//this one's for ie
else ref.appendChild(document.createTextNode(asd)); 
```

InnerHTML 已被弃用，不应用于此类事情。此外，它也较慢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-05-30T01:12:38.643

嗯。我没有足够的分数来支持 Andrei Cimpoca 的结果，但该解决方案是这里最好的解决方案。

style.innerHTML = "..."; 不适用于 webkit 引擎或 ie。

要正确注入 css 文本，您必须：

style.styleSheet.cssText = "..."; 即。

和

style.appendChild(document.createTextNode("...")); 对于 webkit。

Firefox 也可以使用第二个选项，或者 style.innerHTML = "...";

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-06T23:36:06.480

除了上述基于样式标签的版本外，您还可以直接使用 javascript 添加样式：

```
var style = document.getElementById('some-style-tag');
var sheet = style.sheet;
sheet.insertRule('.mydiv { background-color: ' + color + '; }', sheet.cssRules.length); 
```

这样做的好处是能够使用变量而不必求助于 cssText/innerHTML。

请记住，在基于 webkit 的浏览器上，如果您要插入大量规则，这可能会很慢。[在 webkit ( https://bugs.webkit.org/show_bug.cgi?id=36303](https://bugs.webkit.org/show_bug.cgi?id=36303) )中存在一个修复此性能问题的错误。在此之前，您可以使用样式标签进行批量插入。

这是插入样式规则的 W3C 标准方式，但任何版本的 IE 都不支持： [http ://www.quirksmode.org/dom/w3c_css.html](http://www.quirksmode.org/dom/w3c_css.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-10T23:48:55.613

我知道这是一个较老的话题，但认为有人会受益。我也需要将 css 动态加载到我的页面中（根据包含的“组件”模板，在加载所有内容之前）：

```
var oStyle = $("<style />");

oStyle.append("@import url(" + sTemplateCssUrl + ");");
oStyle.attr("type", "text/css");

$(document.head).append(oStyle); 
```

我尝试使用单行方法附加到 document.head - 在 IE 10 和 Chrome 中工作，但在 Safari 中没有。上述方法适用于所有 3。

# c# - Memcached 与 Windows 和 .NET

> ID：351635
> 
> 赞同：83
> 
> 时间：2008-12-09T02:41:10.517
> 
> 标签：c#, .net-3.5, memcached, distributed-caching

是否有人已经在 Windows 环境中实现了 memcached 以供生产使用？因为我读过很多博客，所以不建议在 Windows 中运行 memcached，尤其是用于生产用途，例如[在 windows 上运行 memcached](http://latebound.blogspot.com/2008/10/running-memcached-on-windows.html)。

还有一件事，哪个 memcached 客户端适合与 c# 和 .net 3.5 一起使用？我发现了许多替代方案，例如[Memcached Providers @ Codeplex](http://www.codeplex.com/memcachedproviders)、[Beitmemcached](http://code.google.com/p/beitmemcached/)和[memcached 提供程序 @ Sourceforge](http://sourceforge.net/projects/memcacheddotnet)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-12-09T12:08:59.187

为什么需要在 windows 上运行 memcached？在生产环境中这是一件昂贵的事情。

如果您的代码需要在 Windows 环境中运行，请获取 Windows memcached 客户端并与基于 *nix 的 memcached 机器通信。

在 Server 2003 或 2008 上运行 memcached 的生产环境中，意味着您可以获得所有这些设备的许可证。Linux 将为您提供所有 OSS 的好处。TCO 将随着 Windows 上的 memcached 线性上升

**编辑：**

我写这个答案已经过去了大约 1.5 年，从那以后很多事情都发生了变化。你必须注意，尤其是当像达斯汀这样的人发表评论时。
所以这里是你如何在 Windows 运行时获取 memcached 的方法。[从 Couchbase（以前称为 Northscale）下载用于 windows 的 memcached](http://blog.couchbase.com/memcached-144-windows-32-bit-binary-now-available)。
通常，如果您计划在同一台生产机器上运行 memcached，您会希望在有限的内存中启动它，即定义 memcached 允许使用的最大内存。

> c:\Program Files\memcached>memcached.exe -m 128。

*这里 memcached 的最大使用量为 128 mb。您不希望 memcached 占用您网络服务器上的所有内存。*

在您决定[扩展](http://en.wikipedia.org/wiki/Scale_out#Scale_horizontally_.28scale_out.29)memcached 的那一刻，您需要考虑我之前所说的内容。此外，在键值组合中压缩您的值。Web 服务器通常消耗很少的 CPU (2-3%) 使用率，与 CPU 使用率相比，压缩为整个网络带来了很多价值。如果你太在意正常压缩，试试[LZO](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Oberhumer)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2010-03-31T18:51:44.563

我很惊讶这里没有人提到[Redis](http://code.google.com/p/redis/) - 它是功能最丰富和最快的（在入门级 Linux 机器上每秒 110,000 SET）键值数据存储之一，具有对字符串的丰富数据结构支持，集、列表、排序集和散列。

虽然 windows 不是官方支持的平台，但它在 windows 下完美运行，所有测试都通过了。我在这里有 Windows 构建（使用 Cygwin）： [https ://github.com/ServiceStack/ServiceStack.Redis#redis-server-builds-for-windows](https://github.com/ServiceStack/ServiceStack.Redis#redis-server-builds-for-windows)

它还为当今使用的几乎所有编程语言提供客户端绑定。我维护了一个丰富的开源 C# Redis 客户端，该客户端具有对任何 C# POCO 类型、事务支持和线程安全的客户端管理器的原生 API 支持，这些客户端管理器可以随时放入任何 IOC： [https://github.com/ServiceStack/ServiceStack。雷迪斯](https://github.com/ServiceStack/ServiceStack.Redis)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-07-11T01:30:23.030

由于当时还没有 Velocity，因此我为我工作的公司 Skiviez 使用了 Windows 的 memcached 端口。它的存在主要只是为了为同一台机器上的多个工作进程提供一个集中的缓存。它在一个使用量不大的电子商务网站上已经运行了大约 18 个月（约 18,500 次点击/天）。我使用的客户端是集成为[iBATIS.NET](https://github.com/enyim/EnyimMemcached)的缓存提供程序的 Enyim。那个客户似乎工作得很好；memcached 客户端一开始也不是很复杂。

如果我必须再做一次，如果我致力于留在 Windows 上为我的分布式缓存解决方案，我可能会考虑 Velocity。但它现在正在工作，所以我不会碰它。

（旁白：从那时起，我通过将某些`Cache*`列添加到数据库中的关键表中来消除对缓存的大部分需求，这些表每天晚上由计划任务更新。这最终减少了对资源的压力，从最初通过将缓存的结果保留在 memcached 中查询数据库来降低内存可用性的后续压力，从而降低 CPU 时间。当访问数据的缓存版本时，它在代码中也更加明确。 the-fly 版本。我相信你有很多理由使用分布式缓存，但总是值得一试，退后一步，质疑你是否真的需要它！）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-09T02:50:01.577

我不知道您正在从事的项目是什么，但您可能想看看[Microsoft Velocity 项目](http://www.microsoft.com/downloads/details.aspx?FamilyId=B24C3708-EEFF-4055-A867-19B5851E7CD2&displaylang=en) 从页面：

> “Velocity”是一个分布式内存应用程序缓存平台，用于开发可扩展的高性能应用程序。“速度”可用于缓存任何公共语言运行时 (CLR) 对象，并通过简单的 API 提供访问。“速度”的关键方面是分布式缓存性能、可扩展性和可用性。

我看过几个演示，看起来它与 .net 框架的集成非常好。

客户端 API 的问题是，您仍然必须使用 LAMP 堆栈在另一个盒子上运行一个 memcached 实例，最好是您已经注意到的某个地方。使用速度意味着您仍将在同一个堆栈上运行，并且跨 .net 平台的集成更加紧密。

话虽如此，如果您想将velocity用作其他.net应用程序的缓存，您可能会发现自己必须编写自己的API来公开velocity数据以供使用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-29T17:52:16.797

Velocity 管理起来有点复杂，但它比 memcached 强大得多。我不是反memcached，一点也没有，这很棒。但展望未来，纯基于 .NET 的新项目如果不利用 Velocity，即使在其当前未发布状态下也是如此。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-07-11T07:02:39.667

看看[SharedCache](http://www.codeplex.com/SharedCache)。它是开源的，易于使用且非常可靠。

> 高性能、分布式内存对象缓存系统，本质上是通用的，但旨在通过减轻数据库负载来加速动态 Web 和/或赢得应用程序。不要忘记访问我们[http://www.sharedcache.com](http://www.sharedcache.com)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-24T23:19:51.843

> 客户端 API 的问题是，您仍然必须使用 LAMP 堆栈在另一个盒子上运行一个 memcached 实例，最好是您已经注意到的某个地方。

一点也不真实。运行 Memcached 不需要 LAMP（Linux、Apache、MySQL、PHP）堆栈。我目前更喜欢 memcached 而不是速度，直到速度超出 CTP。我已经玩了一段时间的速度，但发现它太笨拙了。我遵循整个 KISS 的事情，你知道...保持简单。没有什么比缓存更简单了... Get(key)... Put(key, value)... Destroy(Key)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-06-09T02:51:10.197

作为上面提到的 Velocity 的附录，[这是由 Microsoft 作为 AppFabric 的一部分发布的](http://msdn.microsoft.com/en-us/magazine/ff714581.aspx)。[更多细节在这里。](http://msdn.microsoft.com/en-us/library/ff383731.aspx)

[在 StackOverflow 上查看涉及 AppFabric 和缓存的各种问题。](https://stackoverflow.com/search?q=%5Bappfabric%5D%20cache)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-09-23T17:17:32.720

我知道我在这里聚会有点晚了，而且已经有很多好的答案了。

我们在 Windows Server 上使用 Membase 取得了巨大成功。它与 Memcached 100% 兼容，并且有一个不错的 GUI 安装程序和 Web 配置服务器构建它。它非常容易管理。

还包括其他 NoSQL 功能，这些功能超出了本线程的范围，但值得一看。他们确实拥有开发、测试和（有限）生产服务器的免费许可证。

[Membase 下载](http://www.couchbase.com/downloads#source)

如果您不想要 Membase 中的任何额外功能，则同一页面仅具有用于 Memcached 的 Windows 安装。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-16T11:36:41.023

请按照下面提到的链接查看此问题的解决方案。

我可以在 Windows 环境中实现 memcached 以供生产使用。

[http://www.codeproject.com/Articles/96698/Implementing-Distributed-Caching-using-Memcached](http://www.codeproject.com/Articles/96698/Implementing-Distributed-Caching-using-Memcached) http://www.deanhume.com/Home/BlogPost/object-caching----net-4/37 [http ://latebound.blogspot.com/2008/10/using-memcached-from-c.html](http://latebound.blogspot.com/2008/10/using-memcached-from-c.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-01-13T15:30:20.880

如果您对在 Windows 上运行 memcached 客户端感兴趣，那么还有两个额外的开源服务器可以完成这项工作。两者都实现了标准的 memcached 服务器协议，并且都是用 Java 编写的，因此它们可以在 Windows 上运行。

*   [jmemcached](http://code.google.com/p/jmemcache-daemon/)
*   [快速缓存](http://code.google.com/p/quickcached/)

# eclipse - 如何在 Eclipse 中安装 Hibernate 工具？

> ID：351640
> 
> 赞同：129
> 
> 时间：2008-12-09T02:49:10.737
> 
> 标签：eclipse, hibernate, eclipse-plugin, hibernate-tools

在 Eclipse 中作为插件安装 Hibernate Tools 的正确方法是什么？[Hibernate 站点](http://www.hibernate.org/255.html "休眠站点")并没有真正给出任何说明。

查看 Hibernate Tools 二进制文件`HibernateTools-3.2.4.Beta1-R200810311334.zip`，看来我可以将其解压缩到我的 eclipse 目录中。我只是将它解压缩到我的eclipse目录中吗？这似乎是一个hacky来安装它。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-01-27T14:11:25.550

好吧，最方便和最安全的方法是在 Eclipse 软件更新中使用 JBoss 更新站点（帮助 -> 软件更新... -> 添加站点...）：

[JBoss Tools 的最新稳定版本更新站点](http://download.jboss.org/jbosstools/updates/stable/)

在那里您可以找到 Hibernate 工具以及其他方便的 JBoss 插件。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2011-05-12T06:58:33.513

在下面的 URL 中找到休眠插件的稳定版本（Zip 或 URL 用于自动更新）。 [http://www.jboss.org/tools/download](http://www.jboss.org/tools/download)

但是不要安装所有东西。您只需：

1.  整个**All JBoss Tools 3.2.0**部分
2.  来自**应用程序开发**的Hibernate 工具 ( **HT )**
***   **来自**数据服务的****HT*********   **来自**Maven 支持的****JBoss Maven Hibernate 配置器**和*****   **来自**Web 和 Java EE 开发的****HT************

 ******就这样！

在 2013 年，您可能会使用最新版本的 Eclipse 和 Hibernate。对于 Eclipse-4.2.2。和您需要的 JBoss Tools 4.0：

1.  来自**Abridged JBoss Tools 4.0**，**JBoss Hibenate Tools**部分
2.  来自**应用程序开发**的Hibernate 工具 ( **HT )**
***   **来自**JBoss 数据服务的****HT*********   **来自**Maven 支持的****JBoss Maven Hibernate 配置器**和*****   **来自**Web 和 Java EE 开发的****HT************

 ******然后你准备好了！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-24T08:55:22.767

Eclipse Indigo 使用说明：

*   *帮助 -> 安装新软件*
*   点击*添加*。位置：http: [//download.jboss.org/jbosstools/updates/stable/](http://download.jboss.org/jbosstools/updates/stable/)
*   在*JBoss Web 和 Java EE Development*文件夹中，选择*Hibernate Tools*
*   点击*下一步*

安装后点击*Window -> Show View -> Others*。弹出一个新窗口。单击文件夹*Hibernate*并选择*Hibernate Configurations*以设置数据库连接。可以使用现有的 Hiberbate 属性文件或创建 JDBC 连接来设置新连接。

设置好数据库连接后，单击 Ping 以测试一切是否正确。

最后，单击*Open HQL Editor*按钮（顶部 Hibernate Configurations 菜单上的第三个按钮）运行 HQL 查询。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-19T13:23:19.867

# 在 Eclipse Neon (4.6) 上安装 Hibernate 工具

转到菜单`Help`>`Install New Software`并单击`Add`按钮。

使用*JBoss Hibernate*之类的名称作为名称，并为位置插入以下 URL：

```
http://download.jboss.org/jbosstools/neon/stable/updates/ 
```

等待产品树加载，然后展开`JBoss Web and Java EE Development`文件夹并选择`Hibernate Tools`产品并单击`Next >`按钮。然后继续接受所有后续问题，许可证等。

安装完成后，根据需要重新启动 Eclipse。之后，要打开 Hibernate 透视图，请转到菜单`Window`> `Perspective`> `Open Perspective`>`Others`并搜索*Hibernate*。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-03-01T02:47:23.483

分步教程：

[http://shivasoft.in/blog/sql/myqsl/step-by-step-hibernate-tutorial-using-eclipse-wtp/](http://shivasoft.in/blog/sql/myqsl/step-by-step-hibernate-tutorial-using-eclipse-wtp/)

逆向工程方法：

[http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables](http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-09T11:22:48.373

由于它适用于 Ganymede（eclipse 3.4），我建议解压缩在归档名称后创建的 HibernateTools-3.2.4.Beta1-R20081031133 目录中的**dropins中的 zip。**

完成后，在`[eclipse\dropins\HibernateTools-3.2.4.Beta1-R20081031133]`“eclipse”目录中创建，您将在其中移动在提取存档文件时创建的插件和功能目录。

在 .exclipseeextension 中添加`[eclipse\dropins\HibernateTools-3.2.4.Beta1-R20081031133\eclipse]`：

```
name=QuickRex
id=org.hibernate.eclipse
version=3.2.4b1 
```

所以：

```
eclipse
    dropins
         HibernateTools-3.2.4.Beta1-R20081031133
             eclipse
                 .eclipseextension
                 features
                 plugins 
```

重新启动 eclipse 并且应该检测到插件 Hibernate。

如果您安装另一个 Eclipse，只需将您的 dropins 目录的内容复制到新的`eclipse\dropins`，您的插件集将再次被检测到。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-30T07:17:51.657

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-10-09T09:31:04.267

菜单帮助 > 安装新软件

使用这个网址：http: [//download.jboss.org/jbosstools/updates/stable/](http://download.jboss.org/jbosstools/updates/stable/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-17T20:49:22.427

我在 Windows 7 64 位上运行 Eclipse Indigo 64 位，并且使用 JBoss Tools 3.3.X 最新下载，我一直缺少与 Maven 和其他插件相关的依赖错误。这是[链接](https://www.jboss.org/tools)。

因此，我选择只安装 Hibernate Tools，方法是在 Eclipse 的安装软件对话框顶部输入“hibernate”。只显示了 4 个项目，所以这就是我安装的所有项目。它运行良好，没有任何问题。这是我在几次尝试失败后用来正确安装它的[教程。](http://www.mkyong.com/hibernate/how-to-install-hibernate-tools-in-eclipse-ide/)

我不知道这是否部分是由于已经安装了很多插件，或者这是否是最好的解决方案，但我想我会与大家分享。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-15T13:40:22.230

解压 zip HibernateTools-3.2.4.Beta1-R20081031133 稍后在 eclipse --> menu Help -> Update Sofwate -> add site -> local add，然后选择 de folder uncompress an install automatic

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-03-17T10:32:15.743

> 我一辈子都无法让“下一步”或“完成”按钮不变灰

这是屁股 UI 中的日食痛苦。如果您之前取消了某些组件，因为它们具有破坏的依赖关系，它会在许可证中阻塞。您必须在第一步中取消选择它们。

请注意，避免使用 Eclipse 的更新功能它破坏了我所有的插件，我不得不删除我的 ./eclipse 文件夹并重新安装所有。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-28T11:34:44.820

将插件和功能文件夹复制到 Eclipse 后（例如，c:\program files\eclipse（或安装它的任何位置）。您将在那里看到一个功能和插件文件夹），您可以检查 hibernate 是否已安装：帮助 > 软件更新 > 已安装的软件。如果没有列出休眠状态，请关闭 Eclipse 并使用此命令“eclipse -clean”通过命令窗口再次启动它。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2008-12-09T02:51:38.093

对于 Eclipse 插件，您只需解压缩它们并将文件夹放到 Eclipse\Plugins 目录中。就那么简单。

# silverlight - Silverlight 中的同步 ADO.NET 数据服务调用

> ID：351644
> 
> 赞同：2
> 
> 时间：2008-12-09T02:50:49.330
> 
> 标签：silverlight, wcf-data-services

我在 Silverlight 应用程序中使用 ADO.NET 数据服务，由于 silverlight 库不支持对 IQueryable 的 ToList() 调用，我认为可以围绕此创建一个名为 SilverlightToList() 的扩展方法。所以在这个方法中，我在我的上下文中调用 BeginExecute 方法，如下所示：

```
 var result = context.BeginExecute<T>(currentRequestUri,null,context);
            result.AsyncWaitHandle.WaitOne();
            return context.EndExecute<T>(result).ToList(); 
```

问题是当我调用 WaitOne() 方法时，这会导致死锁。这是 Silverlight 中 ADO.NET 数据服务的限制吗？是否有解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-08T08:23:28.503

我已经成功地击败了（ :P ）silverlight 中的异步怪物，如下所示：

```
var ctx = new ModelEntities(new Uri("http://localhost:2115/Data.svc"));

ManualResetEvent m1 = new ManualResetEvent(false);
ManualResetEvent m2 = new ManualResetEvent(false);

var q1 = (DataServiceQuery<Department>)(from e in ctx.Department select e);
var q2 = (DataServiceQuery<Person>)(from e in ctx.Person select e);

Department[] r1 = null;
Person[] r2 = null;

q1.BeginExecute(r =>
{
    try { r1 = q1.EndExecute(r).ToArray(); }
    finally { m1.Set(); }
}, null);
q2.BeginExecute(r =>
{
    try { r2 = q2.EndExecute(r).ToArray(); }
    finally { m2.Set(); }
}, null);

ThreadPool.QueueUserWorkItem((o) =>
{
    WaitHandle.WaitAll(new WaitHandle[] { m1, m2 });
    // do your thing..
}); 
```

基本的想法是产生一个服务员线程（最后一个块），它会引用等待对象。不要将您的 WaitAll 调用放在调用方方法/线程中，因为这将导致死锁，正如本网站或其他网站前面提到的其他人一样。

发生死锁是因为线程直到方法结束才开始，并且方法没有结束，因为 WaitAll 调用等待子线程结束。

但是，在我上面的情况下不是，因为 WaitAll 在另一个线程上。

PS：而不是 // do your thing 行放置代码，它使用 r1 和 r2 捕获的引用，如果结果失败，它将保存数据或 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T02:53:23.630

Silverlight 可能不喜欢同步的任何东西，因为它旨在在浏览器中运行，并且它只能使用一个线程来玩——而且它必须共享它。主机可用的唯一线程是浏览器提供的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T03:09:32.490

从那以后，我在 MSDN 论坛上发现[了这篇文章](http://forums.microsoft.com/msdn/ShowPost.aspx?PostID=3981405&SiteID=1)，上面说任何托管->非托管->托管编组都发生在 UI 线程上，这解释了为什么 WaitOne 方法调用挂起......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T04:51:12.033

Silverlight 中的所有服务调用都必须是异步的。所以你必须定义一个回调来获得结果——像这样：

```
context.BeginExecute<T>(currentRequestUri, resultCallback, context);

private void resultCallback(IAsyncResult asyncResult)
{
    DataServiceContext context = asyncResult.AsyncState as DataServiceContext;
    var result = context.EndExecute<T>(asyncResult);
    // Do whatever you need with the result here
} 
```

这是 MSDN 上的一个很好的参考：[http://msdn.microsoft.com/en-us/library/cc838191(VS.95).aspx](http://msdn.microsoft.com/en-us/library/cc838191(VS.95).aspx)

# login - 内部注册与 OpenID 与 Google 朋友群与 Facebook 连接与（等）

> ID：351651
> 
> 赞同：22
> 
> 时间：2008-12-09T02:53:41.617
> 
> 标签：login, openid, registration

我正在尝试决定如何允许用户注册我的网站...有 openID、clickpass、facebook connect、google friend connect 等，或者是老式的内部“输入用户名、电子邮件、密码等。”

简要[了解如何设置 OpenID](http://www.plaxo.com/api/openid_recipe)似乎需要做很多工作才能使 openID 正常工作。

有没有人有为 OpenID（或其他）设置站点的经验？另外，有谁知道这些方法的注册周转率是否比经典的“内部”注册更高？例如.. 如果您同时允许内部注册和 openID，那么您的用户中有多少百分比正在使用 OpenID？

一如既往，感谢您的意见。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-09T04:28:51.223

It really depends on the type of site and who your users are.

We looked at the possibility of using OpenID for our e-commerce store (we sell apparel), and the conclusion was that we would be flat out nuts to implement it. I'm not the smartest software developer in the world by any means, but if **I** could barely wrap my mind around it enough just to get an account for StackOverflow (Why do I have to go to some third party provider? Why should I trust them? What happens to my account if they go under? As a business, what do I do if a customer asks me to reset their password?), then it's not just anecdotal to say that our customers would have problems with it. In addition, for any e-commerce business, it's usually unwise to take on a third-party dependency unless carefully considered, and especially for something as critical as logging in. If a major OpenID provider were to go down, you'd be losing sales. If we implemented OpenID, it would definitely be an alternative, red-headed step child implementation when compared to the native sign in mechanism.

Even with our in-house registration of e-mail addresses and passwords, we had to use an Amazon.com style login form because users kept filling out the "new customer" form even when they already had an account:

> Login screen. Amazon's sign-in screen remains a model to be emulated, minimizing the common problem of new customers who try to log in without having registered. Amazon presents two questions in linear order: (1) "What is your email address?" and (2) "Do you have an Amazon.com password?" For the second question, users can select one of two radio buttons: "No, I am a new customer," or "Yes, I have a password." Many other sites present the new- and established-user sections side-by-side, and thereby divert new users to the established-user section through the magnetic attraction of type-in fields. -- Jakob Niesen, [useit.com](http://www.useit.com/alertbox/20050725.html)

When users have trouble navigating two fields and a radio button, you can imagine the hilarity that ensues when they are presented with multiple authentication mechanisms.

If you're implementing a social-oriented Web site that is designed to integrate with Facebook or some of the Web-2.0-savvy consumers, then these alternative authentication mechanisms may make sense. Until the dust settles on OpenID, though, I wouldn't add it to a commercial site: nobody has asked for it. They *have* asked for PayPal and Google Checkout, which we implemented, but there's only a small amount of overlap there.

My general recommendation would be to have the usual in house username and password mechanism that can be supplemented by these alternative identification mechanisms. But realize that each alternative identification mechanism runs the risk of customer confusion and increased customer support.

Just my two cents; hope that helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T06:24:22.977

@Nicolas 有一些非常好的观点。

我建议从标准用户名/密码开始，如果有足够多的用户要求，稍后添加 OpenID 等作为选项（就像 Plaxo 教程一样）。

现在拥有一个工作站点总是更好，而不是一个项目以 90% 的成绩被罐头。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-22T19:00:34.633

> 简要了解如何设置 OpenID 似乎需要做很多工作才能使 openID 正常工作。

这真的不是很多工作。对于一个还没有接近公开的项目，我下载了[Dope OpenID](http://stevelove.org/projects/dope-openid/)，在玩了几个小时（大部分时间花在做我非常讨厌的 CSS/HTML 工作）之后，我有了一个看起来和工作起来都像你的登录程序设置登录到 SO 时查看。

> 例如.. 如果您同时允许内部注册和 openID，那么您的用户中有多少百分比正在使用 OpenID？

现在，当您可以将 yahoo、AIM 和 GMail 登录用作 OpenID 时，创建您自己的用户验证真的没有什么意义，并且不必担心是否正确地加盐哈希，以及如果用户未能登录 3 次/秒应该被禁止几分钟，当用户忘记密码时恢复密码等。

当然，您也可以提供一个普通的登录名，但是您仍然必须携带 OpenID 从您的肩上举起的所有好东西。要求用户注册他们可以使用的 gmail 或 yahoo 帐户并不可怕，他们中的大多数人可能已经拥有一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T04:40:40.700

If you will need to maintain state information about your users (preferences and such) then you probably should provide your own user/password mechanism. This does not stop you from allowing users to take advantage of OpenID and its ilk. The question you need to answer is how much time should you devote in your project to supporting more than one method. Like all design decisions, there is a cost and a benefit to everything. Weight them both and pick the answer that fits your budget.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-09T11:39:02.790

[另一个可能的选择是使用像RPX](http://rpxnow.com)这样的 SaaS 服务，而不是自己使用库来编写 OpenID 代码。您可以在几个小时内获得 OpenID、facebook 和 myspace 登录。您的应用只需要能够生成 HTTPS 并解析 JSON 或 XML 响应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-22T18:45:06.600

我打算在我的社交网站上做一些类似的事情，但与其他网站做的有点不同。大多数网站允许用户使用这些服务登录，我计划将这些服务添加到我的注册表单中，然后他们选择服务、openID、facebook connect、myspace ID，然后我打算做的是获取这些服务提供的所有信息和将它们作为变量存储在我的 php 脚本中，然后保存到 DB，其概念是允许他们在注册时从其他服务导入信息，以使他们更容易注册，这意味着他们以后必须填写的配置文件字段更少，并且这样的

# python - 尽管极度懒惰，我如何在 Python 中模拟 IMAP 服务器？

> ID：351656
> 
> 赞同：11
> 
> 时间：2008-12-09T02:57:49.517
> 
> 标签：python, testing, imap, mocking

我很想知道是否有一种简单的方法可以`imaplib`在 Python 中模拟 IMAP 服务器（一个模块），*而无需*做很多工作。

有预先存在的解决方案吗？理想情况下，我可以连接到现有的 IMAP 服务器，进行转储，然后让模拟服务器脱离真实的邮箱/电子邮件结构。

懒惰的一些背景：我有一种讨厌的感觉，我正在编写的这个小脚本会随着时间的推移而增长，并且想*创建*一个合适的测试环境，但考虑到它可能*不会*随着时间的推移而增长，我不想这样做让模拟服务器运行需要做很多工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-09T03:14:39.407

我发现上次尝试用扭曲的方式编写 IMAP 服务器非常容易。它支持编写 IMAP 服务器，你有很大的灵活性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-09T15:41:57.213

对于任何一项测试，您真正需要多少？如果您开始按照真实服务器的复杂程度构建一些东西，以便您可以在所有测试中使用它，那么您已经出错了。只需模拟任何测试所需的位。

不要费心尝试分享一个模拟实现。它们不应该是资产，而是可丢弃的点数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-18T17:48:13.917

由于我在 python 3 中没有找到适合我需要的东西（twisted 的邮件部分没有在 python 3 中运行），所以我用 asyncio 做了一个小模拟，如果你愿意，你可以改进：

我定义了一个扩展 asyncio.Protocol 的 ImapProtocol。然后像这样启动服务器：

```
factory = loop.create_server(lambda: ImapProtocol(mailbox_map), 'localhost', 1143)
server = loop.run_until_complete(factory) 
```

邮箱映射是映射的映射：电子邮件 -> 邮箱映射 -> 消息集。所以所有的消息/邮箱都在内存中。

每次客户端连接时，都会创建一个新的 ImapProtocol 实例。然后，ImapProtocol 为每个客户端执行和回答，实现能力/登录/获取/选择/搜索/存储：

```
class ImapHandler(object):
    def __init__(self, mailbox_map):
        self.mailbox_map = mailbox_map
        self.user_login = None
        # ...

    def connection_made(self, transport):
        self.transport = transport
        transport.write('* OK IMAP4rev1 MockIMAP Server ready\r\n'.encode())

    def data_received(self, data):
        command_array = data.decode().rstrip().split()
        tag = command_array[0]
        self.by_uid = False
        self.exec_command(tag, command_array[1:])

    def connection_lost(self, error):
        if error:
            log.error(error)
        else:
            log.debug('closing')
            self.transport.close()
        super().connection_lost(error)

    def exec_command(self, tag, command_array):
        command = command_array[0].lower()
        if not hasattr(self, command):
            return self.error(tag, 'Command "%s" not implemented' % command)
        getattr(self, command)(tag, *command_array[1:])

    def capability(self, tag, *args):
        # code for it...
    def login(self, tag, *args):
        # code for it... 
```

然后在我的测试中，我在设置过程中启动服务器：

```
self.loop = asyncio.get_event_loop()
self.server = self.loop.run_until_complete(self.loop.create_server(create_imap_protocol, 'localhost', 12345)) 
```

当我想模拟一条新消息时：

```
imap_receive(Mail(to='dest@fakemail.org', mail_from='exp@pouet.com', subject='hello')) 
```

并在拆卸时停止：

```
self.server.close()
asyncio.wait_for(self.server.wait_closed(), 1) 
```

cf [https://github.com/bamthomas/aioimaplib/blob/master/aioimaplib/tests/imapserver.py](https://github.com/bamthomas/aioimaplib/blob/master/aioimaplib/tests/imapserver.py)

* * *

***编辑***：我有一个错误的服务器停止，我用 asyncio.Protocol 重写它并修改答案以反映更改

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T09:12:17.717

我从未尝试过，但如果必须，我会从现有的 SMTP 服务器开始。

# oracle - Preventing sqlplus truncation of column names, without individual column formatting

> ID：351657
> 
> 赞同：8
> 
> 时间：2008-12-09T02:59:51.697
> 
> 标签：oracle, sqlplus

By default sqlplus truncates column names to the length of the underlying data type. Many of the column names in our database are prefixed by the table name, and therefore look identical when truncated.

I need to specify select * queries to remote DBAs in a locked down production environment, and drag back spooled results for diagnosis. There are too many columns to specify individual column formatting. Does sqlplus offer any option to uniformly defeat column name truncation?

(I am using SET MARKUP HTML ON, though I could use some other modality, csv, etc. as long as it yields unabbreviated output.)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T22:56:52.560

您可以尝试的一件事是动态生成“column x format a20”命令。类似于以下内容：

```
set termout off
set feedback off

spool t1.sql
select 'column ' || column_name || ' format a' || data_length
from all_tab_cols
where table_name='YOUR_TABLE'
/
spool off

@t1.sql
set pagesize 24
set heading on
spool result.txt
select * 
from  YOUR_TABLE;
and   rownum < 30;
spool off 
```

请注意，此示例仅适用于 VARCHAR2。例如，您需要添加 decode 以更改为 DATE 或 NUMBER 生成的“列”命令。

更新：原来的 SQL 并没有真正改变 SQL*Plus 的行为。我唯一能想到的是将字段名称重命名为一个字符值 A、B、C 等，方法如下：

```
select 'column ' || column_name ||
       ' heading "' ||
       chr(ascii('A') - 1 + column_id) ||
       '"'
from all_tab_cols
where table_name='YOUR_TAB_NAME' 
```

它将生成类似于以下内容的输出：

```
column DEPT_NO heading "A"
column NAME heading "B"
column SUPERVIS_ID heading "C"
column ADD_DATE heading "D"
column REPORT_TYPE heading "E" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-26T16:51:48.737

提议的解决方案都不能显示原始列名，所以我不确定人们为什么要对它们进行投票......我确实有一个适用于原始请求的“hack”，但我真的不喜欢它...也就是说，您实际上是在每列的查询中附加或前缀一个字符串，因此它们对于列标题总是足够长。如果您处于 HTML 模式（如海报所示），那么额外的空白间距几乎没有什么害处……它当然会减慢您的查询速度……

例如

```
SET ECHO OFF
SET PAGESIZE 32766
SET LINESIZE 32766
SET NUMW 20
SET VERIFY OFF
SET TERM OFF
SET UNDERLINE OFF
SET MARKUP HTML ON
SET PREFORMAT ON
SET WORD_WRAP ON
SET WRAP ON
SET ENTMAP ON
spool '/tmp/Example.html'
select 
   (s.ID||'                  ') AS ID,
   (s.ORDER_ID||'                  ') AS ORDER_ID,
   (s.ORDER_NUMBER||'                  ') AS ORDER_NUMBER,
   (s.CONTRACT_ID||'                  ') AS CONTRACT_ID,
   (s.CONTRACT_NUMBER||'                  ') AS CONTRACT_NUMBER,
   (s.CONTRACT_START_DATE||'                  ') AS CONTRACT_START_DATE,
   (s.CONTRACT_END_DATE||'                  ') AS CONTRACT_END_DATE,
   (s.CURRENCY_ISO_CODE||'                  ') AS CURRENCY_ISO_CODE,
from Example s
order  by s.order_number, s.contract_number;
spool off; 
```

当然，您可以编写一个存储过程来做一些更好的事情，但对于这个简单的场景来说，这似乎有点矫枉过正。

这仍然不符合原始海报的要求。因为它需要在列上手动列出，而不是使用 select *。但至少当您愿意详细说明这些字段时，它是有效的解决方案。

但是，由于 HTML 中的字段过长确实没有问题，因此有一种相当简单的方法可以修复 Chris 的解决方案来处理这个示例。那只是选择使用oracle允许的最大值。遗憾的是，这仍然不适用于每个表的每个字段，除非您为每种数据类型显式添加格式。此解决方案也不适用于连接，因为不同的表可以使用相同的列名但不同的数据类型。

```
SET ECHO OFF
SET TERMOUT OFF
SET FEEDBACK OFF
SET PAGESIZE 32766
SET LINESIZE 32766
SET MARKUP HTML OFF
SET HEADING OFF

spool /tmp/columns_EXAMPLE.sql
select 'column ' || column_name || ' format A32766' 
from all_tab_cols
where data_type = 'VARCHAR2' and table_name = 'EXAMPLE'
/
spool off

SET HEADING ON
SET NUMW 40
SET VERIFY OFF
SET TERM OFF
SET UNDERLINE OFF
SET MARKUP HTML ON
SET PREFORMAT ON
SET WORD_WRAP ON
SET WRAP ON
SET ENTMAP ON
@/tmp/columns_EXAMPLE.sql
spool '/tmp/Example.html'
select *
from Example s
order  by s.order_number, s.contract_number;
spool off; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-04-19T20:49:02.150

这应该提供一些合理的格式。当然，您可以自由地将自己的偏好替换为 char 列的最大宽度，以及如何处理 LONG、RAW 和 LOB 列。

```
SELECT 'COLUMN ' || column_name || ' FORMAT ' ||
       CASE
          WHEN data_type = 'DATE' THEN
           'A9'
          WHEN data_type LIKE '%CHAR%' THEN
           'A' ||
           TRIM(TO_CHAR(LEAST(GREATEST(LENGTH(column_name),
                        data_length), 40))) ||
           CASE
              WHEN data_length > 40 THEN
               ' TRUNC'
              ELSE
               NULL
           END
          WHEN data_type = 'NUMBER' THEN
           LPAD('0', GREATEST(LENGTH(column_name),
           NVL(data_precision, data_length)), '9') ||
           DECODE(data_scale, 0, NULL, NULL, NULL, '.' ||
           LPAD('0', data_scale, '0'))
          WHEN data_type IN ('RAW', 'LONG') THEN
           'A1 NOPRINT'
          WHEN data_type LIKE '%LOB' THEN
           'A1 NOPRINT'
          ELSE
           'A' || TRIM(TO_CHAR(GREATEST(LENGTH(column_name), data_length)))
       END AS format_cols
  FROM dba_tab_columns
 WHERE owner = 'SYS'
   AND table_name = 'DBA_TAB_COLUMNS'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T16:18:17.717

我不认为 sqlplus 提供您要求的功能。您可以使用某种脚本语言（例如 Perl 或 Python）来自动格式化。换句话说，查询`ALL_TAB_COLS`视图以获取模式和表，然后使用格式列属性动态创建脚本。当然，这只有在您有权查询 ALL_TAB_COLS 视图（或其他等效视图）时才有效。

这是我拼凑起来的一个快速概念验证：

```
#!/usr/bin/python

import sys
import cx_Oracle

response=raw_input("Enter schema.table_name:  ")
(schema, table) = response.split('.')
schema = schema.upper()
table = table.upper()
sqlstr = """select column_name,
                   data_type,
                   data_length
              from all_tab_cols
             where owner      = '%s'
               and table_name = '%s'""" % ( schema, table )

## open a connection to databases...
try:
    oracle = cx_Oracle.Connection( oracleLogin )
    oracle_cursor = oracle.cursor()

except cx_Oracle.DatabaseError, exc:
    print "Cannot connect to Oracle database as", oracleLogin
    print "Oracle Error %d:  %s" % ( exc.args[0].code, exc.args[0].message )
    sys.exit(1)

try:
    oracle_cursor.execute( sqlstr )

    # fetch resultset from cursor
    for column_name, data_type, data_length in oracle_cursor.fetchmany(256):
        data_length = data_length + 0
        if data_length < len(column_name):
            if data_type == "CHAR" or data_type == "VARCHAR2":
                print "column %s format a%d" % ( column_name.upper(), len(column_name) )
            else:
                print "-- Handle %s, %s, %d" % (column_name, data_type, data_length)

except cx_Oracle.DatabaseError, e:
    print "[Oracle Error %d: %s]:  %s" % (e.args[0].code, e.args[0].message, sqlstr)
    sys.exit(1)

try:
    oracle_cursor.close()
    oracle.close()
except cx_Oracle.DatabaseError, exc:
    print "Warning: Oracle Error %d:  %s" % ( exc.args[0].code, exc.args[0].message )

print "select *"
print "from %s.%s" % ( schema, table ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-04-19T21:02:26.980

如果您不需要或不需要 XML 格式，这有点麻烦，但您应该能够使用[DBMS_XMLGEN 包](http://download.oracle.com/docs/cd/B10500_01/appdev.920/a96620/xdb12gen.htm#1025388)。该脚本应该为您提供一个 XML 文件，用于以完整列名作为标记名的任意查询。

```
VARIABLE resultXML clob;
SET LONG 100000; -- Set to the maximum size of the XML you want to display (in bytes) 
SET PAGESIZE 0;

DECLARE
   qryCtx DBMS_XMLGEN.ctxHandle;
BEGIN
  qryCtx := dbms_xmlgen.newContext('SELECT * from scott.emp');

  -- now get the result
  :resultXML := DBMS_XMLGEN.getXML(qryCtx);

  --close context
  DBMS_XMLGEN.closeContext(qryCtx);
END;
/

print resultXML 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-05-18T09:23:59.523

[我在尝试在VoraX](http://code.google.com/p/vorax/)中实现此功能时遇到了同样的问题。在下一个版本中，我想到了以下解决方案：

```
set feedback off 
set serveroutput on
declare
  l_c number;
  l_col_cnt number;
  l_rec_tab DBMS_SQL.DESC_TAB2;
  l_col_metadata DBMS_SQL.DESC_REC2;
  l_col_num number;
begin
  l_c := dbms_sql.open_cursor;
  dbms_sql.parse(l_c, '<YOUR QUERY HERE>', DBMS_SQL.NATIVE);
  DBMS_SQL.DESCRIBE_COLUMNS2(l_c, l_col_cnt, l_rec_tab);
  for colidx in l_rec_tab.first .. l_rec_tab.last loop
    l_col_metadata := l_rec_tab(colidx);
    dbms_output.put_line('column ' || l_col_metadata.col_name || ' heading ' || l_col_metadata.col_name);
  end loop;
  DBMS_SQL.CLOSE_CURSOR(l_c);
end; 
```

无需调整列大小、格式和内容，只需使用您想要的列名强制列标题。我认为同样的方法也适用于 DBA_TAB_COLUMNS 解决方案，但我更喜欢 DBMS_SQL 解决方案，因为它也考虑别名并且它只获取您查询的列。

**编辑：**仅使用“列标题”是行不通的。仍然需要使用“列格式”语句。所以，请忽略我之前的回答。

# cocoa - Using a NSMutableArray to store data

> ID：351661
> 
> 赞同：1
> 
> 时间：2008-12-09T03:05:31.420
> 
> 标签：cocoa

Can you store an Array ( that contains another two subarrays one being a string and another another array) into a single MutableArray object?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T03:11:29.803

Please read the documentation on NSArray. It can contain any number of arbitrary objects.

That said, without knowing more about what you're doing, I'd suggest you look at NSDictionary and its mutable subclass.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-09T03:11:46.150

Yes, you can store any type of object into one of the NSArray classes. The only difficulty is in conceptually dealing with how to access this data structure; complex nesting of arrays within arrays can be hard to manage and lead to bugs. Make sure your needs aren't better solved by another data structure, or a custom class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T03:12:12.703

Yes. You can use the following (enormous) line of code:

```
NSMutableArray * completeArray =
    [NSMutableArray arrayWithArray:
        [[myArray objectAtIndex:0] arrayByAddingObjectsFromArray:
            [myArray objectAtIndex:1]]];
```

**edit:** Assuming that `myArray` is defined as follows:

```
 NSArray * stringArray = [NSArray arrayWithObjects:
                         @"one", @"two", @"three", nil];
NSArray * otherArray = [NSArray arrayWithObjects:
                        someObj, otherObj, thirdObj, nil];
NSArray * myArray = [NSArray arrayWithObjects:
                     stringArray, otherArray, nil];
```

The line of code I posted above will give you one big `NSMutableArray` which contains:

> `@"one, @"two", @"three", someObj, otherObj, thirdObj`

# eclipse - How to see SQL query using Hibernate Tools in Eclipse?

> ID：351665
> 
> 赞同：1
> 
> 时间：2008-12-09T03:08:32.320
> 
> 标签：eclipse, hibernate, jpa, hibernate-tools

Having installed Hibernate Tools in Eclipse, how can I view the would-be generated SQL query of from the JPA query language? (I'm using Hibernate as my JPA implementation)

My Java DAO class looks something like:

```
public List<Person> findById(int id)
{
    return entityManager.find(Person.class, id);
}
public List<Person> find(String name)
{
    Query q = entityManager.createQuery("SELECT p FROM Person p WHERE name=?");
    q.setParameter(1, name);
    return q.getResultList();
} 
```

I want to see what the corresponding SQL query will be. I've heard that Hibernate Tools has some kind of support for this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T07:01:52.957

In order to see the SQL query you can just configure hibernate.show_sql=true in your hibernate.cfg.xml file. Then you should see the queries in the console window during application execution.

That's the feature of the hibernate runtime, when Tools provide you with HQL editor, so you can test the queries before you put them into the code.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-08-19T08:03:35.627

Hibernate Tools 确实支持这一点：

1) 使用 HQL 编辑器（您可以通过将光标放在查询上并按 Ctrl+1 来自动获取查询，然后有一个在 HQL 编辑器中打开的选项）。

2) 确保您打开/可见动态 SQL 预览视图，然后它将显示 SQL Hibernate 将从您的 HQL 生成。

3）完成；）

# asp.net-mvc - How can I trick MVC into rendering links based on a different virtual path?

> ID：351677
> 
> 赞同：1
> 
> 时间：2008-12-09T03:15:58.983
> 
> 标签：asp.net-mvc, subdomain, asp.net-mvc-routing, virtual-path

I'm running a bunch of apps on discountasp.net with the subdomain addon. Since with shared hosting I can't have multiple IIS sites, I've also written an HTTP module that allows sites in subfolders to operate as if they are running in the root directory. So for example, instead of hosting my blog at dandoes.net/blog, I can host it at blog.dandoes.net (which is really actually dandoes.net). This has been working famously until now, when I'm trying to use it along with MVC.

The HtmlHelper generates its urls based on the virtual path of the application rather than the path data in the URL. So, if I'm on blog.dandoes.net and I want to link to blog.dandoes.net/Samples, I might have this code:

```
<%=Html.ActionLink("Samples", "Index", "Samples")%> 
```

In normal circumstances, this would generate the url blog.dandoes.net/Samples, but instead, it generates blog.dandoes.net/Blog/Samples because the virtual directory is /Blog.

I could probably take 5 minutes and write something really hacky to do what I want, but I think it would be really interesting if I could get the MVC framework to do what I want.

So, is there any way I could get it to render the correct urls?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-22T21:11:31.747

HTML 帮助器只是一个将字符串返回到您的代码的类。您需要做的就是编写自己的帮助程序类，以您需要的格式输出字符串。

# xml - 具有超大数据表的客户端表渲染

> ID：351683
> 
> 赞同：1
> 
> 时间：2008-12-09T03:20:58.223
> 
> 标签：xml, internet-explorer, firefox, data-binding, cross-browser

*问题：*客户 X 已请求重构 MSIE 中使用 XML DataBinding 和 Databound 表的页面以跨浏览器工作。

**问题：**模仿MSIE 跨浏览器（即在 MSIE 和 Firefox 中）的[MSIE DataBinding功能的最佳实践方法是什么。](http://www.globalguideline.com/xml/XML_Data_Island.php)

*特点：*客户 X 已经在单个网页中使用[MSIE DataBinding获得以下内容...](http://www.globalguideline.com/xml/XML_Data_Island.php)

*   一个完整的[单 url xml 转储](http://simile.mit.edu/timeline/examples/jfk/jfk.xml)作为数据源（假设没有服务器端分页和跨域问题）
*   只指定数据源 URL 的网页标记（就像 MSIE）
*   能够加载非常大的表（例如，最少 3k 条记录）而不会在客户端触发 javascript“内存不足”或“延迟”错误
*   能够在普通 HTML 表格元素中执行此操作，并可能进行行分割（可选但不是必需的，因为 MSIE 尚未执行此操作）

*背景：*您可能必须熟悉[MSIE DataBinding](http://www.globalguideline.com/xml/XML_Data_Island.php)才能与这个特定问题保持同步。MSIE 的这一特性允许您指向单个 XML 数据源（没有特定的模式，只要它在标准“表”中），并且浏览器以可视化和异步方式呈现数据。

这样做的好处是页面渲染速度很快，因为页面加载不会在向用户显示一些输出之前等待整个表格被填充。表格行逐渐填充。

*错误开始：*客户 X 已尝试并拒绝了以下内容。

*   JQuery：非常适合加载数据和干净可维护的 HTML 标记，但大型数据源在呈现客户端时会导致延迟和内存问题
*   XSLT：这让客户 X 感到害怕，因为它涉及的不仅仅是在 <table> 标记上指定“数据源”属性，因此在他看来似乎不太易于维护
*   服务器端数据分页：这不是一个选项，因为客户 X 非常希望避免对 XML 数据进行分段或在服务器端进行任何“数据转换”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T04:04:58.710

除了 Javascript/XSLT 和服务器端之外，您真的没有任何其他选择。

我可能会选择 XSLT，反对它的论点完全没有实际意义——“因为它涉及的不仅仅是在 < *table* > 标签上指定一个“数据源”属性”—— **ANY**解决方案将更加复杂然后只需指定一个“数据源”。

但是，我不确定页面是否会使用 XSLT 逐步加载，蜘蛛感知会提示其他情况。任何人？

如果您无法始终使用服务器端选项，也可以取消任何分页。您仍然会逐渐加载页面。就浏览器而言，它只是普通的 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-29T21:30:35.390

您最好的选择可能是使用 CSS 来根据需要格式化输出。

# compiler-construction - How much of the compiler should we know?

> ID：351690
> 
> 赞同：10
> 
> 时间：2008-12-09T03:27:21.580
> 
> 标签：compiler-construction

In order to write better code, is it worth to know deeply what the compiler does?

Just how much would be enough? I'm not a bit scrubber, but I was thinking that knowing how the compiler operates would make me a better programmer. Am I wrong?

If so, what resources would you recommend?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-09T03:35:16.323

Probably wouldn't hurt to know how the compiler will optimize your code, but **don't write for the compiler, but write for people to read**.

Writing code in a way that is more optimized for the compiler may make it more difficult for people to read it, and these days the **compiler probably knows better to optimize the code for you**.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-09T03:36:41.780

Without any proof of effectiveness at all, I feel better about understanding what happens to my code for knowing just a little about compilers and a bit of assembly. You can learn a lot by reading the [Jack Crenshaw's **Let's Build a Compiler**](http://compilers.iecc.com/crenshaw/).

Then you might look into more sophisticated compiler methods if you find yourself interested.

* * *

**Edit:** It is also worth noting that a lot of problems that don't call for a "compiler" are still best served by compiler methods. Parsing any modestly complicated command language is a compiler problem, even if you are not writing an executable.

* * *

**Edit2:** Many of the usual texts take a fairly abstract, mathematical approach to the compiler problem, which can be intimidating or confusing at first. The Crenshaw tutorial takes a "start banging out code" approach that is informed by the author's more subtle understanding. Nice intro, but if you are serious your *should* follow up with a more formal study.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-09T08:37:19.393

我教过编程语言和高级编译器。以下是我认为了解编译器功能的两个最有用的理由：

1.  如果您不知道编译器在做什么，您可能会无意中编写出比您预期的要昂贵得多的代码。如果您在不知情的情况下分配内存，则尤其如此。一个经典的例子是在一个循环中连接字符串，例如，如

    答案=“”

    对于 i = 1 到 n 做

    ```
     answer = answer .. strings[i]    -- .. is string concatenation 
    ```

    这段代码是二次的，进行二次分配和复制。坏消息。

2.  了解编译器的另一个重要原因是，一个问题通常需要一点语言。如果您对编译器有所了解（解释器在这里也一样好，可能更好），那么您可以构建一点语言。如果您可以选择语言的外观，最好让其他人为您构建语言。 [Lua](http://www.lua.org/)是一种特别擅长被其他程序用作组件的语言。

Crenshaw 的教程还不错。另一本不错的书，如果您可以亲身体验的话，那就是 PJ Brown 关于交互式编译器和解释器的书。它早已绝版，但您可能会在图书馆找到它。

我会避免使用许多关于编译器的胖本科教科书。*Michael Scott 的Programming-Language Pragmatics*可能对编译器感兴趣的人更有价值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-09T09:24:01.750

我认为它肯定会以一种微妙的方式让你成为一个更好的程序员。

对其工作原理的一般理解将帮助您更加了解您正在编写的代码。我见过很多有经验的开发人员在学习一门新语言时很难理解一些基本概念。如果您大致了解编译器的工作原理以及（可能更重要）代码的执行方式，您将更好地理解这些概念。我在谈论堆与堆栈，指针等。

如果您需要编写代码来分析或翻译某些文本，它也可能会派上用场。我曾经编写了一个程序来将一些 sql 条件转换为另一种自定义格式，并为此编写一个小型解析器是最简单、最优雅的方法（或者我认为 :)）

此外，对编译器的深入了解可能会帮助您专门针对它进行优化，但这可能非常困难，并不总是推荐的，正如 coobird 所说。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-09T03:31:38.733

I think every programmer should have a basic understanding of how a compiler turns your high-level code into machine instructions, optimizations that can be performed, how memory works, and how your code executes on the hardware. I think it helps to be aware of this so you understand the performance of your program better and it may help you make better implementation choices.

It's probably not critical that you be able to actually write machine code or know exactly what virtual memory architecture your system uses, but a basic idea of these concepts I think is important.

**EDIT**

For example: C compilers store data in arrays in row major format so you should iterate over multidimensional arrays varying the highest dimension (right-most index) first and then proceeding to the lowest dimension (left-most index). Fortran does exactly the opposite, storing arrays in column major format. This means that in Fortran you should vary the lowest dimension first, proceeding to the highest dimension. This will improve the cache hit ratio of your code and significantly improve performance for large multidimensional arrays.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-09T19:00:01.383

您对有效使用调试器有兴趣吗？好的。你对编写可靠或高效的代码有兴趣吗？好的。

就我个人而言，我更关心后端而不是前端。我建议为 ARM 而不是 x86 进行编译，在这种情况下，您不必学习汇编程序（我建议您编写自己的反汇编程序），因此如果您使用 gcc，它有一个反汇编程序，您可以看到您的高级代码所做的更改最终结果，以及您可以使用编译器选项进行多少更改。对于大多数高级语言程序员来说，这是一种大开眼界的体验，他们意识到相同的代码可能会根据所使用的编译器和命令行选项产生截然不同的结果。

对于编译器的中间部分，我推荐 lcc 和 sdcc。您可能想也可能不想购买 lcc 书：

[ [http://www.cs.princeton.edu/software/lcc/][1]](http://www.cs.princeton.edu/software/lcc/][1])

不过，您不需要，来源在网上（以多种形式）。和 sdcc 一样（小型设备 c 编译器，最初是为 8051 和其他 8 位微控制器创建的）。我的建议是进入编译器与后端的接口，你会发现你的代码已经变成了一系列原子部分，有时像反向抛光一样。a = b + 7; 最终可能会加载常量整数 7\. 从内存中将变量 b 读取到下一个可用寄存器中。将 7 加上寄存器 b 并保存在下一个可用寄存器中。将寄存器中的值存储到内存中a的位置。

您也可以使用 gcc 来做到这一点，但您最终可能会意识到 gcc 并没有您想象的那么好。由于语言的数量和后端的数量以及混合的手数等，它庞大而复杂。不过，它确实可以通过，并且确实适用于有专家维护的语言和平台。gcc 可以教给你的，其他人无法做到的是，前端的各种语言会归结为一种通用的中间语言，后端会变成针对每个平台的特定指令。

最后是前端。在大多数情况下，人们使用 bison/yacc，这是一个为高级语言创建描述的工具，该工具可以根据你的描述解析用户输入，如果你愿意，可以将其转换为这种中间语言。

如果你打算将你的爱好或职业与编写软件有关，我会说你必须完成这个练习一次，如果不是很多次的话。你的代码的整体质量、代码的可靠性、代码的性能以及编写代码的效率都会受到这些知识的影响。

我会小心“不要为编译器编写，而是为人们阅读而编写”这句话。那里有很多糟糕的代码，因为这种语句被滥用了。为可维护性编写代码会导致必须维护的错误代码。可维护性与可靠性和性能是相互排斥的。我个人会比任何大学毕业生都可以维护的糟糕代码具有可靠性和性能。

随着时间的推移，您将学会不要太努力地为编译器编写代码。只是不要浪费您的代码，不要使用该语言的 gee whiz 功能。如果你不得不做额外的研究来找出一些编译器特性，你可以确定世界上大多数人都不理解它，包括应该在编译器中实现它的人。因此，您可以预期该功能不会在编译器中始终如一地工作，因此您应该首先使用它。这也意味着不要尝试为一个特定的编译器编写代码，不要太依赖 gcc 及其功能，尝试 sdcc 和 lcc 以及 microsoft 和 borland 和 kiel 等。使您的代码干净、简单、可读且可移植。

最重要的是，如果您认真编写软件，那么您绝对需要知道编译器是如何工作的。gcc、sdcc、lcc（如果你能找到的话，还有 vbcc）都是免费的、开源的，并且提供了一种学习体验，可以提高你的编码技能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-09T03:40:51.333

I think what the compiler does is the important thing here ( it creates an explication with x,y,z characteristics ) That is translated into know the platform you're targeting.

The way it does that task are irrelevant ( unless you're writing compilers of course )

The most important thing we should know about a compiler are the errors messages it display.

:) Seems obvious but I'm astonished by the number of developer I've met that didn't even look at the compiler output.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-09T03:46:08.470

Don't learn compilers, learn the problems solved by them.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-09T09:08:31.983

作为一名真正全面的开发人员，我认为您应该对编译器及其工作原理有相当多的了解，甚至可能尝试编写一个简单的编译器。

然而，对于特定的编译器，大多数开发人员只需知道一件事就可以逃脱：编译器切换到输出汇编语言而不是二进制代码。检查输出的汇编语言将准确地告诉您编译器正在做什么来优化您的代码，并且可以帮助您弄清楚如何重新编写代码以使其更好地工作。
另外，有趣的“程序员练习”可以刷新您的低级知识。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-09T06:15:45.220

我认为了解编译器的工作原理并不像不断提高人们的编程知识那样有必要。现在，学习编写编译器（或其背后的原理）恰好是扩展知识的好方法。

如果您有兴趣，我建议您购买 Dragon Book，也称为[编译器：原理、技术和工具](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools)。第一次可能会有点沉重，但它肯定会让你思考。如果您没有完全通过或卡在某些部分，我建议您将其搁置一段时间然后再返回-第二次通过会容易得多。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-08-17T12:03:48.160

在一篇博文中，[Steve Yegge](http://steve-yegge.blogspot.com/)断言所有程序员[都应该知道编译器是如何工作](http://steve-yegge.blogspot.com/2007/06/rich-programmer-food.html)的。他甚至说：

> 温和而坚定的执行摘要：如果你不知道编译器是如何工作的，那么你就不知道计算机是如何工作的。如果你不能 100% 确定你是否知道编译器是如何工作的，那么你就不知道它们是如何工作的。

在文章中，他提出了一个令人信服的论点，即需要了解编译器。他还提供了现实世界示例的列表，了解如何解析和分析会很有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-09T03:56:37.073

I think that what is really really important is to make an interpreter: it gives you more insight of programming languages, and that's what you use... In scheme it is actually rnot hard at to make an interpeter! But actually I would greatly encourage reading parts of [SICP](http://en.wikipedia.org/wiki/Structure_and_Interpretation_of_Computer_Programs) for great enlightment).

Concerning compilers, it's more complex as the focus here is getting some performance/doing it for an actual machine. As a programmer, what is important there is to know at least what tasks they globally perform and when do they run rather than the details, because nowadays they have grown into really complex systems especially with JIT's etc...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-09T04:45:20.377

At a minimum, you should be familiar with the language features at an abstract level. If you don't know whether or not variable names are case-sensitive, or how numbers are converted to boolean, then you probably can't even write a simple 'if' clause reliably.

Mostly, I've found that any other knowledge about the inner workings of a compiler just helps me to write more efficient code.

# cocoa-touch - 单击导航栏“后退”按钮时的哪种方法？

> ID：351693
> 
> 赞同：0
> 
> 时间：2008-12-09T03:29:49.407
> 
> 标签：cocoa-touch

我正在使用 UINavigationController 推送和弹出视图。

我曾经`[[self navigationController] pushViewController:myView animated:YES]`推入一个视图。然后我单击左上角的返回按钮返回，我收到错误：

```
*** -[NSCFDictionary superview]: unrecognized selector sent to instance 0x1451a0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSCFDictionary superview]: unrecognized selector sent to instance 0x1451a0' 
```

我想知道`-popViewController`调用后退按钮时调用的是哪个方法。这个错误是发生在第一个视图还是推入的第二个视图中。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T03:43:36.977

后退按钮应称为 -popViewControllerAnimated:。但是，听起来您在这里遇到了类过度发布错误。基本上，你有一个视图，它被分配到某个地方。这个视图只是内存中的一个地址。在某些时候，您会一直释放此视图，直到 retainCount 为 0。发生这种情况时，视图将被释放。在此之后的某个时间点，正在创建一个 NSDictionary *，其内存地址*与您之前的、现在已解除分配的视图相同。现在有些东西正试图向您的视图发送消息，但它不再存在，相反，那里有一个 NSDictionary。它说的内容类似于：[view superview]，但是*view*现在指向一个字典，它不响应 superview。

底线：检查您的保留/释放/自动释放调用，并确保您没有过度释放您的视图之一（或视图控制器，尽管这不太可能）。

# c# - LINQ 子查询

> ID：351707
> 
> 赞同：2
> 
> 时间：2008-12-09T03:42:10.927
> 
> 标签：c#, linq

我需要对来自数据库表 (Period) 的时间段和来自表 (Invoice) 的属于该期间的开始日期和结束日期的发票列表执行 LINQ 查询。两个表之间没有键引用，如何进行 Invoice 子查询？

我正在尝试做类似以下的事情：

```
var query = (from p in db.DataContext.Periods
             // Subquery i in db.DataContext.Invoices
             let InvoiceAmount = i.Where(t => t.InvoiceDate >= p.StartDate && t.InvoiceDate <= p.EndDate)
             select new PeriodView
             (
                p.Name,
                p.StartDate,
                p.EndDate,
                InvoiceAmount.Count()
              )); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T04:11:30.680

```
var periodViewList = 
    (from p in db.DataContext.Periods
    select new PeriodView(
      p.Name,
      p.StartDate,
      p.EndDate,
      db.DataContext.Invoices.Where(i => i.InvoiceDate >= p.StartDate && i.InvoiceDate <= p.EndDate).Count()
    )).ToList(); 
```

我假设 PeriodView 构造函数看起来像这样

```
public PeriodView (string name, DateTime startDate, DateTime endDate, int invoiceCount) {
...
} 
```

# windows - Windows 服务器监控软件

> ID：351709
> 
> 赞同：7
> 
> 时间：2008-12-09T03:43:16.710
> 
> 标签：windows, monitoring

谁能推荐一个windows环境的监控软件？

我们已经在资源和可用性方面进行了监控。我想知道谁登录并更改了设置、添加了文件等。

我们已将 IT 外包，我希望能够追踪系统的所有更改。

我对键盘记录或会话记录持开放态度。

开源/免费是最佳选择，但我们也愿意为解决方案付费。

* * *

### 编辑：

看起来我们还没有系统管理员技能集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-01T03:54:24.410

哦，一定要看看EventSentry，它应该能够以合理的价格做你想做的大部分事情。还有一个“精简版”免费版本，当然它的限制更大。当然，您知道监控文件更改会产生大量的审计数据并占用大量开销......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-01T02:50:12.247

我认为您正在寻找的解决方案直接来自 MS：[System Center Operations Manager](http://technet.microsoft.com/en-us/opsmgr/default.aspx)。它非常漂亮，但可能比您需要的更多（系统和预算方面）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-01T04:24:06.410

你可能想看看zabbix www.zabbix.com。开源做利用率/资源的事情，但也有可定制的代理和做事件通知的能力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-13T07:34:00.087

只有几个......顶部的最爱......

[http://www.microsoft.com/systemcenter/en/us/operations-manager.aspx](http://www.microsoft.com/systemcenter/en/us/operations-manager.aspx)

[http://www.solarwinds.com/](http://www.solarwinds.com/)

[http://www.whatsupgold.com/](http://www.whatsupgold.com/)

[http://www.nagios.org/](http://www.nagios.org/)

[http://www.manageengine.com/datacenter-and-server-management.html](http://www.manageengine.com/datacenter-and-server-management.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T18:32:48.893

您还可以使用免费服务[http://www.owlerts.com](http://www.owlerts.com)

# asp.net-mvc - 在不同控制器之间共享视图

> ID：351720
> 
> 赞同：2
> 
> 时间：2008-12-09T03:49:41.427
> 
> 标签：asp.net-mvc

*在不同的控制器之间共享视图（使用Views/Shared*文件夹）是个好主意吗？

我正在创建我的第一个 MVC 应用程序，它需要一些彼此相似的数据。它们“解释”不同的东西（因此将存储在不同的表中），但它们每个都有一个`Id`,`Name`和`Status`。因此，我可以使用不同的控制器，然后使用相同的视图在下拉列表中显示数据，允许用户选择一个进行编辑或通过文本框添加一个新的。

显然，我失去了拥有强类型 ViewPage 数据的能力，但除此之外，这是否被认为是这样做的好方法，或者我最好为每个控制器创建一个 View 以使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T04:10:44.020

就个人而言，如果视图足够通用以用于多种场景，那么我会这样使用它。干燥！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T04:43:36.840

如果您创建自己的中间类来处理视图数据，您仍然可以在这种情况下使用强类型的 ViewPage。

为您的视图页面定义一个自定义类：

```
public class MyCustomViewData
{
    public int Id {get; set;}
    public string Name {get; set;}
    public int Status {get; set;}
} 
```

从您的页面中：

```
<% Html.RenderPartial("MyCustomView", new MyCustomViewData ()
{
    Id = ViewData.Model.SomeIdField,
    Name = ViewData.Model.SomeNameField,
    Status = ViewData.Model.SomeStatusField
}); 
```

或从控制器

```
public ActionResult Foo()
{
    // get your model data

    return View("MyCustomView", new MyCustomViewData ()
    {
        Id = model.SomeIdField,
        Name = model.SomeNameField,
        Status = model.SomeStatusField
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T12:48:40.167

在我们的项目中，我们将大部分视图与控制器隔离开来，并且不会重复使用其中的许多视图，但我们确实使用了很多用户控件和部分视图，这样我们最终不会重复自己。这让我们也可以将所有内容都保持为强类型，也许它可能适合您的场景？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-10T22:58:35.880

如果您有一个通用的页面格式，比如一个表格，那么您可以在 Shared 文件夹中创建一个通用视图。此 ViewData 必须包含列信息以及数据，以及有关任何链接的一些信息。

细节不难，如果有很多类似的页面会节省时间。

# sql-server - 在报表生成器中使用超过 2 个实体关系 (SQL Server 2005)

> ID：351722
> 
> 赞同：3
> 
> 时间：2008-12-09T03:51:07.630
> 
> 标签：sql-server, sql-server-2005, reporting-services

我使用 SQL Server Reporting Services 创建了一个模型。当我尝试使用报表生成器创建报表时，我可以将一个实体拖到报表中，然后是一个嵌套的子实体。我按预期得到了两级分组。

但是，无论我尝试哪种组合，我都无法将第三级实体添加到关系中。

如何在报表生成器中启用多级实体关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-23T07:21:39.320

我有很多时间在这里玩。我还没有找到使用标准角色关系的方法。相反，我创建了一个将多个表连接在一起的命名查询。然后我在模型中为每一列创建文件夹，具体取决于它们来自哪个表。这或多或少地模仿了拥有多个实体的效果。

我发现这一点，并且在 Report Builder 2.0 中使用表格向导和灵活的 tablix 分组工作得很好。

# java - 了解 Sun JVM

> ID：351729
> 
> 赞同：4
> 
> 时间：2008-12-09T04:01:04.257
> 
> 标签：java, jvm

我正在为想要更好地了解 Sun JVM 的初学者寻找一些有用的书籍

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T04:17:19.310

不特定于 Sun Java 虚拟机实现，但 Sun[的 Java 虚拟机规范](http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html)可能是一本有趣的读物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-09T05:29:35.827

你可以试试这个。

Ivor Horton 的 Java 2 SDK 1.5 入门版

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T04:17:48.920

这里有一些基本的东西。

[http://javabeanz.wordpress.com/2007/07/09/understanding-jvm/](http://javabeanz.wordpress.com/2007/07/09/understanding-jvm/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T08:39:11.747

Bill Venners 的“Java 虚拟机内部”

[http://www.artima.com/insidejvm/ed2/](http://www.artima.com/insidejvm/ed2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T04:14:44.370

[维基百科 - JVM](http://en.wikipedia.org/wiki/Java_Virtual_Machine)

> Java 虚拟机 (JVM) 是一组计算机软件程序和数据结构，它们使用虚拟机模型来执行其他计算机程序和脚本。JVM 使用的模型接受一种通常称为 Java 字节码的计算机中间语言。这种语言在概念上代表了面向堆栈的能力架构的指令集。截至 2006 年，全球估计有 40 亿台启用 JVM 的设备。
> 
> Java 虚拟机在 Java 字节码上运行，该字节码通常（但不一定）从 Java 源代码生成；JVM 也可用于实现 Java 以外的编程语言。例如，Ada 源代码可以编译为 Java 字节码，然后可以由 JVM 执行。JVM 也可以由 Sun（Java 的开发者）以外的其他公司发布——使用“Java”商标的 JVM 可以由其他公司开发，只要它们遵守 Sun 发布的 JVM 规范（以及相关的合同义务）。
> 
> JVM 是 Java 平台的关键组件。由于 JVM 可用于许多硬件和软件平台，Java 本身既可以是中间件，也可以是一个平台——因此商标是一次编写，随处运行。对所有平台使用相同的字节码允许 Java 被描述为“编译一次，随处运行”，而不是描述跨平台编译语言的“编写一次，随处编译”。JVM 还启用了诸如自动异常处理之类的独特功能，它为独立于源代码的每个软件错误（异常）提供“根本原因”调试信息。
> 
> JVM 与一组实现 Java API（应用程序编程接口）的标准类库一起分发。虚拟机和 API 必须相互一致[可疑 – 讨论]，因此作为 Java 运行时环境捆绑在一起。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-09T23:09:33.303

我发现 Brian Goetz 关于[JVM](http://www.briangoetz.com/pubs.html)的文章在这里非常好

# asp.net - How to convert line breaks in input form in ASP.NET?

> ID：351732
> 
> 赞同：3
> 
> 时间：2008-12-09T04:01:57.047
> 
> 标签：asp.net

How do you usually convert line breaks in a form textbox or input=text element to html line breaks?

Thanks

Edit: Is it always \r\n with all browsers?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-09T04:06:27.180

Or in C#:

```
myString.Replace("\r\n", "<br />"); 
```

If you're worried about it being different on different platforms, you could also do:

```
myString.Replace("\r\n", "<br />");
myString.Replace("\n", "<br />");
myString.Replace("\r", "<br />"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-09T04:15:00.750

> Is it always \r\n with all browsers?

This is handled on the server, it has nothing to do with browser. However I would suggest using:

```
System.Environment.NewLine 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T04:03:46.233

```
Replace(vbcrlf, "<br />") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T01:25:08.523

```
Regex.Replace(urString, "\r?\n", "< br/>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-10T02:13:36.627

根据场景，这也可以工作：

```
MyString.Replace(Chr(10), "<br/>") 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-12-03T16:06:32.240

您很可能必须转义反斜杠才能使其行为符合您的预期。

```
MyString.Replace("\\r\\n", "<br />") 
```

或者

```
MyString.Replace("\\r\\n", Environment.NewLine) 
```

# c - 如何用 C 编写面向对象的代码？

> ID：351733
> 
> 赞同：524
> 
> 时间：2008-12-09T04:02:40.557
> 
> 标签：c, oop, object

用 C 编写面向对象的代码有哪些方法？特别是关于多态性。

* * *

另请参阅此 Stack Overflow 问题*[Object-orientation in C](https://stackoverflow.com/questions/415452/object-orientation-in-c)*。

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2008-12-09T04:12:20.740

是的。事实上，Axel Schreiner 免费提供[了他的书](http://www.cs.rit.edu/~ats/books/ooc.pdf)“ANSI-C 中的面向对象编程”，其中涵盖了相当全面的主题。

* * *

## 回答 #2

> 赞同：371
> 
> 时间：2008-12-09T04:06:09.987

既然您在谈论多态性，那么是的，您可以，我们在 C++ 出现之前几年就在做这种事情。

基本上，您使用 a`struct`来保存数据和函数指针列表，以指向该数据的相关函数。

因此，在通信类中，您将有一个 open、read、write 和 close 调用，该调用将作为结构中的四个函数指针以及对象的数据进行维护，例如：

```
typedef struct {
    int (*open)(void *self, char *fspec);
    int (*close)(void *self);
    int (*read)(void *self, void *buff, size_t max_sz, size_t *p_act_sz);
    int (*write)(void *self, void *buff, size_t max_sz, size_t *p_act_sz);
    // And data goes here.
} tCommClass;

tCommClass commRs232;
commRs232.open = &rs232Open;
: :
commRs232.write = &rs232Write;

tCommClass commTcp;
commTcp.open = &tcpOpen;
: :
commTcp.write = &tcpWrite; 
```

当然，上面的那些代码段实际上是在一个“构造函数”中，例如`rs232Init()`.

当您从该类“继承”时，您只需更改指针以指向您自己的函数。调用这些函数的每个人都会通过函数指针来完成，给你你的多态性：

```
int stat = (commTcp.open)(commTcp, "bigiron.box.com:5000"); 
```

有点像手动vtable。

您甚至可以通过将指针设置为 NULL 来拥有虚拟类 - 行为与 C++ 略有不同（运行时的核心转储而不是编译时的错误）。

这是一段演示它的示例代码。首先是顶层类结构：

```
#include <stdio.h>

// The top-level class.

typedef struct sCommClass {
    int (*open)(struct sCommClass *self, char *fspec);
} tCommClass; 
```

然后我们有 TCP“子类”的函数：

```
// Function for the TCP 'class'.

static int tcpOpen (tCommClass *tcp, char *fspec) {
    printf ("Opening TCP: %s\n", fspec);
    return 0;
}
static int tcpInit (tCommClass *tcp) {
    tcp->open = &tcpOpen;
    return 0;
} 
```

还有 HTTP：

```
// Function for the HTTP 'class'.

static int httpOpen (tCommClass *http, char *fspec) {
    printf ("Opening HTTP: %s\n", fspec);
    return 0;
}
static int httpInit (tCommClass *http) {
    http->open = &httpOpen;
    return 0;
} 
```

最后是一个测试程序来展示它的实际效果：

```
// Test program.

int main (void) {
    int status;
    tCommClass commTcp, commHttp;

    // Same 'base' class but initialised to different sub-classes.

    tcpInit (&commTcp);
    httpInit (&commHttp);

    // Called in exactly the same manner.

    status = (commTcp.open)(&commTcp, "bigiron.box.com:5000");
    status = (commHttp.open)(&commHttp, "http://www.microsoft.com");

    return 0;
} 
```

这将产生输出：

```
Opening TCP: bigiron.box.com:5000
Opening HTTP: http://www.microsoft.com 
```

所以你可以看到不同的函数被调用，这取决于子类。

* * *

## 回答 #3

> 赞同：94
> 
> 时间：2010-04-28T20:42:29.897

命名空间通常通过以下方式完成：

```
stack_push(thing *) 
```

代替

```
stack::push(thing *) 
```

要将[C](http://en.wikipedia.org/wiki/C_%28programming_language%29)结构变成类似于[C++](http://en.wikipedia.org/wiki/C%2B%2B)类的东西，您可以：

```
class stack {
     public:
        stack();
        void push(thing *);
        thing * pop();
        static int this_is_here_as_an_example_only;
     private:
        ...
}; 
```

进入

```
struct stack {
     struct stack_type * my_type;
     // Put the stuff that you put after private: here
};
struct stack_type {
     void (* construct)(struct stack * this); // This takes uninitialized memory
     struct stack * (* operator_new)(); // This allocates a new struct, passes it to construct, and then returns it
     void (*push)(struct stack * this, thing * t); // Pushing t onto this stack
     thing * (*pop)(struct stack * this); // Pops the top thing off the stack and returns it
     int this_is_here_as_an_example_only;
}Stack = {
    .construct = stack_construct,
    .operator_new = stack_operator_new,
    .push = stack_push,
    .pop = stack_pop
};
// All of these functions are assumed to be defined somewhere else 
```

并做：

```
struct stack * st = Stack.operator_new(); // Make a new stack
if (!st) {
   // Do something about it
} else {
   // You can use the stack
   stack_push(st, thing0); // This is a non-virtual call
   Stack.push(st, thing1); // This is like casting *st to a Stack (which it already is) and doing the push
   st->my_type.push(st, thing2); // This is a virtual call
} 
```

我没有做析构函数或删除，但它遵循相同的模式。

this_is_here_as_an_example_only 就像一个静态类变量——在一个类型的所有实例之间共享。所有方法实际上都是静态的，除了有些采用 this *

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2010-04-29T00:25:37.677

我相信，除了本身有用之外，在 C 中实现 OOP 也是**学习**OOP 和了解其内部工作原理的绝佳方式。许多程序员的经验表明，要有效和自信地使用一项技术，程序员必须了解底层概念最终是如何实现的。在 C 中模拟类、继承和多态性正是在教导这一点。

为了回答最初的问题，这里有几个资源可以教如何在 C 中进行 OOP：

EmbeddedGurus.com 博客文章“C 中基于对象的编程”展示了如何在可移植 C 中实现类和单一继承：http: [//embeddedgurus.com/state-space/2008/01/object-based-programming-in-c /](http://embeddedgurus.com/state-space/2008/01/object-based-programming-in-c/)

应用笔记“C+”——C 中的面向对象编程“展示了如何使用预处理器宏在 C 中实现类、单一继承和后期绑定（多态性）：http: [//www.state-machine.com/resources/cplus_3。 0_manual.pdf](http://www.state-machine.com/resources/cplus_3.0_manual.pdf)，示例代码可从[http://www.state-machine.com/resources/cplus_3.0.zip获得](http://www.state-machine.com/resources/cplus_3.0.zip)

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2008-12-09T04:04:02.880

我已经看到它完成了。我不会推荐它。C++ 最初是以这种方式作为预处理器开始的，它生成 C 代码作为中间步骤。

本质上，您最终要做的是为存储函数引用的所有方法创建一个调度表。派生一个类将需要复制此调度表并替换您想要覆盖的条目，如果您的新“方法”想要调用基方法，则必须调用原始方法。最终，你最终会重写 C++。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2008-12-09T04:16:45.303

当然这是可能的。这就是所有[GTK+](https://en.wikipedia.org/wiki/GTK%2B)和[GNOME](http://en.wikipedia.org/wiki/GNOME)所基于的框架[GObject所做的。](https://en.wikipedia.org/wiki/GObject)

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2010-04-29T03:09:35.157

C stdio FILE 子库是一个很好的例子，说明了如何在纯 C 中创建抽象、封装和模块化。

继承和多态性——通常被认为对 OOP 至关重要的其他方面——并不一定能提供它们所承诺的生产力收益，并且已经[提出了](http://en.wikipedia.org/wiki/Circle-ellipse_problem)[合理的](http://www.faqs.org/docs/artu/unix_and_oo.html) [论点](http://web.archive.org/web/20110913071213/http://codingexperiments.com/why-i-dislike-c/)，即它们实际上会阻碍开发和对问题域的思考。

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2008-12-09T10:45:21.587

一个动物和狗的小例子：你反映了 C++ 的 vtable 机制（基本上无论如何）。您还将分配和实例化 (Animal_Alloc, Animal_New) 分开，因此我们不会多次调用 malloc()。我们还必须明确地传递`this`指针。

如果您要执行非虚拟功能，那很简单。您只是不将它们添加到 vtable 和静态函数不需要`this`指针。多重继承通常需要多个 vtable 来解决歧义。

此外，您应该能够使用 setjmp/longjmp 进行异常处理。

```
struct Animal_Vtable{
    typedef void (*Walk_Fun)(struct Animal *a_This);
    typedef struct Animal * (*Dtor_Fun)(struct Animal *a_This);

    Walk_Fun Walk;
    Dtor_Fun Dtor;
};

struct Animal{
    Animal_Vtable vtable;

    char *Name;
};

struct Dog{
    Animal_Vtable vtable;

    char *Name; // Mirror member variables for easy access
    char *Type;
};

void Animal_Walk(struct Animal *a_This){
    printf("Animal (%s) walking\n", a_This->Name);
}

struct Animal* Animal_Dtor(struct Animal *a_This){
    printf("animal::dtor\n");
    return a_This;
}

Animal *Animal_Alloc(){
    return (Animal*)malloc(sizeof(Animal));
}

Animal *Animal_New(Animal *a_Animal){
    a_Animal->vtable.Walk = Animal_Walk;
    a_Animal->vtable.Dtor = Animal_Dtor;
    a_Animal->Name = "Anonymous";
    return a_Animal;
}

void Animal_Free(Animal *a_This){
    a_This->vtable.Dtor(a_This);

    free(a_This);
}

void Dog_Walk(struct Dog *a_This){
    printf("Dog walking %s (%s)\n", a_This->Type, a_This->Name);
}

Dog* Dog_Dtor(struct Dog *a_This){
    // Explicit call to parent destructor
    Animal_Dtor((Animal*)a_This);

    printf("dog::dtor\n");

    return a_This;
}

Dog *Dog_Alloc(){
    return (Dog*)malloc(sizeof(Dog));
}

Dog *Dog_New(Dog *a_Dog){
    // Explict call to parent constructor
    Animal_New((Animal*)a_Dog);

    a_Dog->Type = "Dog type";
    a_Dog->vtable.Walk = (Animal_Vtable::Walk_Fun) Dog_Walk;
    a_Dog->vtable.Dtor = (Animal_Vtable::Dtor_Fun) Dog_Dtor;

    return a_Dog;
}

int main(int argc, char **argv){
    /*
      Base class:

        Animal *a_Animal = Animal_New(Animal_Alloc());
    */
    Animal *a_Animal = (Animal*)Dog_New(Dog_Alloc());

    a_Animal->vtable.Walk(a_Animal);

    Animal_Free(a_Animal);
} 
```

PS。这是在 C++ 编译器上测试的，但它应该很容易在 C 编译器上工作。

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2010-04-28T19:53:40.463

查看[GObject](http://library.gnome.org/devel/gobject/stable/)。它意味着在 C 中是面向对象的，并且是您正在寻找的一种实现。但是，如果您真的想要 OO，请使用 C++ 或其他一些 OOP 语言。如果您习惯于处理 OO 语言，那么有时使用 GObject 可能会非常困难，但就像任何事情一样，您会习惯于约定和流程。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2011-06-16T20:56:28.297

这读起来很有趣。我自己也一直在思考同样的问题，思考它的好处是：

*   尝试想象如何在非 OOP 语言中实现 OOP 概念有助于我理解 OOp 语言（在我的例子中是 C++）的优势。这有助于我更好地判断是否将 C 或 C++ 用于给定类型的应用程序——其中一个的好处胜过另一个。

*   在我浏览网页以获取有关这方面的信息和意见时，我发现一位正在为嵌入式处理器编写代码并且只有 C 编译器可用的作者： [http ://www.eetimes.com/discussion/other/4024626/Object-Oriented -C-Creating-Foundation-Classes-Part-1](http://www.eetimes.com/discussion/other/4024626/Object-Oriented-C-Creating-Foundation-Classes-Part-1)

在他的案例中，用纯 C 语言分析和调整 OOP 概念是一个有效的追求。看来他愿意牺牲一些 OOP 概念，因为尝试在 C 中实现它们会导致性能开销受到影响。

我吸取的教训是，是的，它可以在一定程度上做到，是的，有一些很好的理由来尝试它。

最后，机器在旋转堆栈指针位，使程序计数器跳来跳去并计算内存访问操作。从效率的角度来看，您的程序执行的这些计算越少越好……但有时我们必须简单地支付这笔税，以便我们可以以一种最不容易受到人为错误影响的方式组织我们的程序。OOP 语言编译器努力优化这两个方面。程序员必须更加小心地用 C 等语言实现这些概念。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2010-04-28T20:26:05.913

有几种技术可以使用。最重要的是更多如何拆分项目。我们在项目中使用在 .h 文件中声明的接口，并在 .c 文件中使用对象的实现。重要的部分是所有包含 .h 文件的模块只将对象视为 a `void *`，而 .c 文件是唯一知道结构内部的模块。

对于一个我们命名为 FOO 的类来说，像这样的例子：

在 .h 文件中

```
#ifndef FOO_H_
#define FOO_H_

...
 typedef struct FOO_type FOO_type;     /* That's all the rest of the program knows about FOO */

/* Declaration of accessors, functions */
FOO_type *FOO_new(void);
void FOO_free(FOO_type *this);
...
void FOO_dosomething(FOO_type *this, param ...):
char *FOO_getName(FOO_type *this, etc);
#endif 
```

C 实现文件将是这样的。

```
#include <stdlib.h>
...
#include "FOO.h"

struct FOO_type {
    whatever...
};

FOO_type *FOO_new(void)
{
    FOO_type *this = calloc(1, sizeof (FOO_type));

    ...
    FOO_dosomething(this, );
    return this;
} 
```

因此，我将指针显式地指向该模块的每个函数的对象。C++ 编译器隐式执行它，而在 C 中我们显式地写出来。

我真的`this`在我的程序中使用，以确保我的程序不会在 C++ 中编译，并且它具有在我的语法突出显示编辑器中以另一种颜色显示的优良属性。

FOO_struct 的字段可以在一个模块中修改，另一个模块甚至不需要重新编译即可使用。

有了这种风格，我已经掌握了 OOP（数据封装）的大部分优势。通过使用函数指针，甚至可以很容易地实现继承之类的东西，但老实说，它真的很少有用。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2010-04-28T19:58:36.117

您可能会发现查看 Apple 的核心基础 API 文档很有帮助。它是一个纯 C API，但许多类型都桥接到了 Objective-C 对象等价物。

您可能还会发现查看 Objective-C 本身的设计很有帮助。它与 C++ 有点不同，因为对象系统是根据 C 函数定义的，例如`objc_msg_send`调用对象上的方法。编译器将方括号语法转换为这些函数调用，因此您不必知道它，但考虑到您的问题，您可能会发现了解它在幕后的工作原理很有用。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2008-12-09T04:05:56.243

你可以使用函数指针来伪造它，事实上，我认为理论上可以将 C++ 程序编译成 C。

但是，将范式强加于语言而不是选择使用范式的语言几乎没有意义。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2008-12-09T04:09:17.983

面向对象的 C，可以做到，我在韩国的生产环境中看到过这种类型的代码，这是我多年来见过的最可怕的怪物（就像去年（2007 年）我看到的代码一样）。所以是的，它可以做到，是的，人们以前做过，即使在这个时代仍然这样做。但我推荐 C++ 或 Objective-C，它们都是从 C 诞生的语言，目的是为面向对象提供不同的范式。

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2008-12-09T04:17:14.677

是的你可以。[在 C++ 或Objective-C](http://en.wikipedia.org/wiki/Objective-C)出现之前，人们就在编写面向对象的 C。C++ 和 Objective-C 都部分地尝试采用 C 中使用的一些 OO 概念并将它们形式化为语言的一部分。

这是一个非常简单的程序，它展示了如何制作看起来像/是方法调用的东西（有更好的方法可以做到这一点。这只是证明语言支持这些概念）：

```
#include<stdio.h>

struct foobarbaz{
    int one;
    int two;
    int three;
    int (*exampleMethod)(int, int);
};

int addTwoNumbers(int a, int b){
    return a+b;
}

int main()
{
    // Define the function pointer
    int (*pointerToFunction)(int, int) = addTwoNumbers;

    // Let's make sure we can call the pointer
    int test = (*pointerToFunction)(12,12);
    printf ("test: %u \n",  test);

    // Now, define an instance of our struct
    // and add some default values.
    struct foobarbaz fbb;
    fbb.one   = 1;
    fbb.two   = 2;
    fbb.three = 3;

    // Now add a "method"
    fbb.exampleMethod = addTwoNumbers;

    // Try calling the method
    int test2 = fbb.exampleMethod(13,36);
    printf ("test2: %u \n",  test2);

    printf("\nDone\n");
    return 0;
} 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2009-01-06T18:51:37.020

当然，它不会像使用具有内置支持的语言那么漂亮。我什至写过“面向对象的汇编程序”。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2010-04-28T19:43:35.487

如果您确信 OOP 方法更适合您要解决的问题，为什么还要尝试使用非 OOP 语言来解决它？似乎您使用了错误的工具来完成这项工作。使用 C++ 或其他一些面向对象的 C 变体语言。

如果您之所以问，是因为您开始在一个已经存在的用 C 编写的大型项目上进行编码，那么您不应该尝试将您自己（或其他任何人）的 OOP 范例强加到项目的基础架构中。遵循项目中已经存在的指导方针。一般来说，干净的 API 和独立的库和模块将大大有助于实现干净的 OOP 式**设计**。

如果，毕竟，你真的准备做 OOP C，阅读[这个](http://www.cs.rit.edu/~ats/books/ooc.pdf)(PDF)。

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2011-08-31T21:18:59.287

添加一点OOC代码：

```
#include <stdio.h>

struct Node {
    int somevar;
};

void print() {
    printf("Hello from an object-oriented C method!");
};

struct Tree {
    struct Node * NIL;
    void (*FPprint)(void);
    struct Node *root;
    struct Node NIL_t;
} TreeA = {&TreeA.NIL_t,print};

int main()
{
    struct Tree TreeB;
    TreeB = TreeA;
    TreeB.FPprint();
    return 0;
} 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2011-12-05T12:02:27.227

我已经研究了一年：

由于 GObject 系统很难与纯 C 一起使用，我尝试编写一些不错的宏来简化 C 的 OO 风格。

```
#include "OOStd.h"

CLASS(Animal) {
    char *name;
    STATIC(Animal);
    vFn talk;
};
static int Animal_load(Animal *THIS,void *name) {
    THIS->name = name;
    return 0;
}
ASM(Animal, Animal_load, NULL, NULL, NULL)

CLASS_EX(Cat,Animal) {
    STATIC_EX(Cat, Animal);
};
static void Meow(Animal *THIS){
    printf("Meow!My name is %s!\n", THIS->name);
}

static int Cat_loadSt(StAnimal *THIS, void *PARAM){
    THIS->talk = (void *)Meow;
    return 0;
}
ASM_EX(Cat,Animal, NULL, NULL, Cat_loadSt, NULL)

CLASS_EX(Dog,Animal){
    STATIC_EX(Dog, Animal);
};

static void Woof(Animal *THIS){
    printf("Woof!My name is %s!\n", THIS->name);
}

static int Dog_loadSt(StAnimal *THIS, void *PARAM) {
    THIS->talk = (void *)Woof;
    return 0;
}
ASM_EX(Dog, Animal, NULL, NULL, Dog_loadSt, NULL)

int main(){
    Animal *animals[4000];
    StAnimal *f;
    int i = 0;
    for (i=0; i<4000; i++)
    {
        if(i%2==0)
            animals[i] = NEW(Dog,"Jack");
        else
            animals[i] = NEW(Cat,"Lily");
    };
    f = ST(animals[0]);
    for(i=0; i<4000; ++i) {
        f->talk(animals[i]);
    }
    for (i=0; i<4000; ++i) {
        DELETE0(animals[i]);
    }
    return 0;
} 
```

这是我的项目网站（我没有足够的时间来写en.doc，但是中文的文档要好得多）。

[OOC-GCC](http://code.google.com/p/ooc-gcc/)

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2008-12-09T04:12:48.697

[Jim Larson 1996 年在第 312 节编程午餐时间研讨会](http://www.jetcafe.org/~jim/index.html)上发表的演讲中有一个使用 C 继承的示例：[High and Low-Level](http://www.jetcafe.org/~jim/highlowc.html) C。

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2010-04-28T21:17:23.433

您可能想要做的一件事是研究[Xt](https://en.wikipedia.org/wiki/X_Toolkit_Intrinsics)工具包的[X Window](http://en.wikipedia.org/wiki/X_Window_System)的实现。当然，它正在变得越来越长，但是使用的许多结构被设计为在传统 C 中以 OO 方式工作。通常这意味着在这里和那里添加额外的间接层，并设计结构以相互叠加。

你真的可以用这种方式在 C 中以 OO 的方式做很多事情，即使有时感觉像这样，OO 概念并没有完全从`#include<favorite_OO_Guru.h>`. 它们确实构成了当时许多既定的最佳实践。OO 语言和系统只是提炼和放大了当时编程时代精神的一部分。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2010-04-29T02:38:33.617

> 哪些文章或书籍适合在 C 中使用 OOP 概念？

Dave Hanson 的[C Interfaces and Implementations](http://www.cs.princeton.edu/software/cii/)在封装和命名方面非常出色，在函数指针的使用方面也非常出色*。*Dave 不尝试模拟继承。

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2012-01-15T23:50:59.277

OOP 只是一种将数据置于程序中比代码更重要的范式。OOP 不是一种语言。因此，就像纯 C 是一门简单的语言一样，纯 C 中的 OOP 也很简单。

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2012-03-27T08:27:21.633

问题的答案是“是的，你可以”。

**面向对象的 C (OOC) 工具包适用于那些想要以面向对象的方式编程，但也坚持使用良好的旧 C 语言的人。OOC 实现类、单继承和多继承、异常处理。**

**特征**

• 仅使用C 宏和函数，无需语言扩展！(ANSI-C)

• 易于阅读的应用程序源代码。小心翼翼地使事情尽可能简单。

• 类的单一继承

• 接口和mixin 的多重继承（从1.3 版开始）

• 实现异常（在纯 C 中！）

• 类的虚函数

• 便于类实施的外部工具

有关详细信息，请访问[http://ooc-coding.sourceforge.net/](http://ooc-coding.sourceforge.net/)。

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2014-11-05T20:10:46.167

似乎人们正在尝试使用 C 来模拟 C++ 风格。我的看法是，进行面向对象编程 C 确实是在进行面向结构的编程。但是，您可以实现后期绑定、封装和继承等功能。对于继承，您在子结构中显式定义指向基本结构的指针，这显然是多重继承的一种形式。您还需要确定您的

```
//private_class.h
struct private_class;
extern struct private_class * new_private_class();
extern int ret_a_value(struct private_class *, int a, int b);
extern void delete_private_class(struct private_class *);
void (*late_bind_function)(struct private_class *p);

//private_class.c
struct inherited_class_1;
struct inherited_class_2;

struct private_class {
  int a;
  int b;
  struct inherited_class_1 *p1;
  struct inherited_class_2 *p2;
};

struct inherited_class_1 * new_inherited_class_1();
struct inherited_class_2 * new_inherited_class_2();

struct private_class * new_private_class() {
  struct private_class *p;
  p = (struct private_class*) malloc(sizeof(struct private_class));
  p->a = 0;
  p->b = 0;
  p->p1 = new_inherited_class_1();
  p->p2 = new_inherited_class_2();
  return p;
}

    int ret_a_value(struct private_class *p, int a, int b) {
      return p->a + p->b + a + b;
    }

    void delete_private_class(struct private_class *p) {
      //release any resources
      //call delete methods for inherited classes
      free(p);
    }
    //main.c
    struct private_class *p;
    p = new_private_class();
    late_bind_function = &implementation_function;
    delete_private_class(p); 
```

编译`c_compiler main.c inherited_class_1.obj inherited_class_2.obj private_class.obj`。

所以建议是坚持纯 C 风格，而不是试图强行进入 C++ 风格。此外，这种方式也适用于构建 API 的非常干净的方式。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2012-07-05T18:21:29.310

请参阅[http://slkpg.byethost7.com/instance.html](http://slkpg.byethost7.com/instance.html)以了解 C 中 OOP 的另一个转折点。它强调仅使用本机 C 可重入的实例数据。多重继承是使用函数包装器手动完成的。保持类型安全。这是一个小样本：

```
typedef struct _peeker
{
    log_t     *log;
    symbols_t *sym;
    scanner_t  scan;            // inherited instance
    peek_t     pk;
    int        trace;

    void    (*push) ( SELF *d, symbol_t *symbol );
    short   (*peek) ( SELF *d, int level );
    short   (*get)  ( SELF *d );
    int     (*get_line_number) ( SELF *d );

} peeker_t, SlkToken;

#define push(self,a)            (*self).push(self, a)
#define peek(self,a)            (*self).peek(self, a)
#define get(self)               (*self).get(self)
#define get_line_number(self)   (*self).get_line_number(self)

INSTANCE_METHOD
int
(get_line_number) ( peeker_t *d )
{
    return  d->scan.line_number;
}

PUBLIC
void
InitializePeeker ( peeker_t  *peeker,
                   int        trace,
                   symbols_t *symbols,
                   log_t     *log,
                   list_t    *list )
{
    InitializeScanner ( &peeker->scan, trace, symbols, log, list );
    peeker->log = log;
    peeker->sym = symbols;
    peeker->pk.current = peeker->pk.buffer;
    peeker->pk.count = 0;
    peeker->trace = trace;

    peeker->get_line_number = get_line_number;
    peeker->push = push;
    peeker->get = get;
    peeker->peek = peek;
} 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2015-03-19T01:10:54.430

我参加聚会有点晚了，但我想分享我在这个话题上的经验：这些天我使用嵌入式东西，我唯一（可靠）的编译器是 C，所以我想应用面向对象我用 C 编写的嵌入式项目中的方法。

到目前为止，我看到的大多数解决方案都大量使用类型转换，因此我们失去了类型安全性：如果你犯了错误，编译器将无济于事。这是完全不能接受的。

我有的要求：

*   尽可能避免类型转换，这样我们就不会失去类型安全；
*   多态性：我们应该能够使用虚方法，并且类的用户不应该知道某些特定方法是否是虚方法；
*   多重继承：我不经常使用它，但有时我真的希望某个类实现多个接口（或扩展多个超类）。

我在这篇文章中详细解释了我的方法：[C 中的面向对象编程](http://goo.gl/ceYMwp)；另外，还有一个用于为基类和派生类自动生成样板代码的实用程序。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2016-03-02T08:38:39.817

我建立了一个小图书馆，在那里我尝试过，对我来说它工作得很好。所以我想我分享一下经验。

[https://github.com/thomasfuhringer/oxygen](https://github.com/thomasfuhringer/oxygen)

单继承可以很容易地使用一个结构来实现，并为每个其他子类扩展它。对父结构的简单转换使得可以在所有后代上使用父方法。只要您知道变量指向包含此类对象的结构，您就可以始终将其强制转换为根类并进行自省。

如前所述，虚方法有些棘手。但它们是可行的。为了简单起见，我只是在类描述结构中使用了一组函数，每个子类在需要时复制并重新填充各个插槽。

多重继承实现起来会相当复杂，并且会对性能产生重大影响。所以我离开它。我确实认为在很多情况下清晰地模拟现实生活环境是可取和有用的，但在 90% 的情况下，单继承可能满足需求。而且单继承很简单，而且不花钱。

我也不关心类型安全。我认为你不应该依赖编译器来防止你编程错误。无论如何，它只能保护您免受一小部分错误的影响。

通常，在面向对象的环境中，您还希望实现引用计数以尽可能自动化内存管理。所以我还在“Object”根类中加入了一个引用计数，以及一些封装堆内存分配和释放的功能。

这一切都非常简单和精简，并为我提供了 OO 的基本要素，而无需强迫我处理 C++ 这个怪物。而且我保留了留在 C 领域的灵活性，这使得集成第三方库变得更加容易。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2010-08-27T22:42:13.957

我建议使用 Objective-C，它是 C 的超集。

虽然 Objective-C 已有 30 年的历史，但它允许编写优雅的代码。

[http://en.wikipedia.org/wiki/Objective-C](http://en.wikipedia.org/wiki/Objective-C)

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2012-07-24T10:05:25.717

是的，有可能。

这是纯 C，没有宏预处理。它具有继承、多态、数据封装（包括私有数据）。它没有等效的受保护限定符，这意味着私有数据在继承链中也是私有的。

```
#include "triangle.h"
#include "rectangle.h"
#include "polygon.h"

#include <stdio.h>

int main()
{
    Triangle tr1= CTriangle->new();
    Rectangle rc1= CRectangle->new();

    tr1->width= rc1->width= 3.2;
    tr1->height= rc1->height= 4.1;

    CPolygon->printArea((Polygon)tr1);

    printf("\n");

    CPolygon->printArea((Polygon)rc1);
}

/*output:
6.56
13.12
*/ 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-12-09T04:06:03.843

是的，但我从未见过有人尝试用 C 实现任何类型的多态性。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2010-04-28T21:37:54.513

我认为首先要说的是（至少恕我直言）C 的函数指针实现真的很难使用。我会跳过一大堆箍来避免函数指针......

就是说，我觉得别人说的还不错。你有结构，你有模块，而不是`foo->method(a,b,c)`，你最终会得到`method(foo,a,b,c)` 如果你有多个类型的“方法”方法，那么你可以在它前面加上类型，所以`FOO_method(foo,a,b,c)`，正如其他人所说......很好用.h 文件，您可以获得私有和公共等。

现在，有一些东西是这种技术不会给你的。它不会为您提供私有数据字段。我认为，这与意志力和良好的编码卫生有关......而且，没有一种简单的方法可以用它进行继承。

这些至少是简单的部分……其余的，我认为是90/10的情况。10% 的收益将需要 90% 的工作...

# eclipse - Centralize Eclipse Configuration

> ID：351736
> 
> 赞同：2
> 
> 时间：2008-12-09T04:03:55.813
> 
> 标签：eclipse, configuration, editor

Does anybody have a system that they use to maintain the same eclipse configuration between computers? How well does it work?

I am getting to a point where I have a reasonable setup to get a new Eclipse installation to the same point as my others, and I miss the emacs functionality of having all your customizations in a centralized store.

I use largely Flex Builder 3, with the Mercurial plug in. But also use it for anything else that I am developing, so at the moment I am considering doing a re-setup with aptana studio and adding the flex builder plugin.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T08:31:31.217

如果您想使用预配置的发行版，但仍想让您的开发人员选择，从一组受限制的插件中选择要额外安装的插件，那么值得创建一个公司内部更新站点，该站点**反映选定的功能**和插件，所以您的开发人员可以安装它们（而且只有它们！）。

[Eclipse 帮助](http://help.eclipse.org/stable/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/update_sitemap.html)对如何镜像更新站点（从命令行）进行了完整描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T06:33:05.900

我们没有*完全*通用的 eclipse 配置，而是通用的 eclipse**发行版**。

新的开发人员复制了该发行版，并通过自定义“eclipse.exe”启动它：

*   调用脚本检查自上次启动以来我是否设置了任何内部更新（如新的增强 eclipse.ini、新插件、新配置文件……）
*   调用真正的 eclipse.exe 并实际启动 IDE

这样，所有开发人员都有一个平台，该平台会根据*我*对全球通用开发系统的共同添加而发展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T07:25:23.373

您可以使用这个 Eclipse 插件[“Workspace mechanic”](https://marketplace.eclipse.org/content/workspace-mechanic)，它可以让您调整偏好（根据其文档）：

*   在整个公司、您的本地团队甚至您自己的许多工作空间中创建一个一致的环境
*   节省设置新工作区的时间
*   创建任务以确保将您最喜欢的新首选项应用到您当前和未来的所有工作区。

它几乎与每个版本的 Eclipse 兼容。值得一试。

# multithreading - 在 Octave 中使用线程运行代码

> ID：351754
> 
> 赞同：2
> 
> 时间：2008-12-09T04:10:48.963
> 
> 标签：multithreading, matlab, octave

我有几个以下代码块，每个代码块都使用自己的矩阵。有没有办法在它自己的线程中运行每个块，而不是按顺序运行它们？

```
对于 i=1：长度（DJI）
DJI2(:,1) = reshape(datenum(strvcat(DJI(:,2)(:)), length(DJI(:,2)),'yyyy-mm-dd'));
DJI2(:,2:6) = reshape(str2num(strvcat(DJI(:,3:7)(:)), 长度(DJI(:,3:7))));
结尾

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-12T14:34:24.950

根据 Octave 电子邮件列表中的成员，唯一的方法是使用以下库。 [http://atc.ugr.es/javier-bin/mpitb](http://atc.ugr.es/javier-bin/mpitb) 它被设计为在多台机器上使用，但看起来它也可以在单独的机器上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-15T17:30:27.663

我知道这个问题是关于 Octave 的，但只是为了让您知道，MATLAB 通过[PARFOR](http://www.mathworks.com/access/helpdesk/help/toolbox/distcomp/parfor.html)提供此功能。

PS我对你的代码片段感到困惑，因为循环变量“i”实际上并没有出现在循环中的任何地方。

# c# - 数据库中的应用程序设置

> ID：351758
> 
> 赞同：1
> 
> 时间：2008-12-09T04:14:40.157
> 
> 标签：c#, .net, settings

我想在数据库中集中定位我的所有应用程序设置。我有一个将 app.settings 存储在 XML 列中的数据库对象。我想让我的应用程序读取该对象，然后将 XML 列解析为它自己的应用程序设置。是否有任何简单的方法可以将 XML 对象任意读取到您当前的 appsettings 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-09T04:40:08.720

我不知道你是否可以在运行时更改 appsettings 我知道你可以做的是创建 appsettings 部分，如此处所示[，](http://msmvps.com/blogs/simpleman/archive/2005/06/23/54733.aspx)并有一个中继应用程序为你加载正确的 xml appsettings 保存文件，然后启动所需的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T04:47:49.030

这可能是可能的，但如果不是，我喜欢在这里做的是：

1.  永远不要直接调用 ConfigurationaManager - 将所有这些东西包装到自定义设置类中并改为调用它。
2.  然后，您可以将您的设置放在任何您想要的地方，并灵活地更改策略。您可以在数据库表中进行每个设置，使用普通的 web.config appsettings，或者切换到其他一些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T06:50:57.957

从您的 XML 对象中读取对象，然后通过您的代码，您可以将配置文件保存为：

> 配置 configFile = WebConfigurationManager.OpenWebConfiguration("~");
> 
> AppSettingsSection AppSection = configFile.GetSection("appSettings") as AppSettingsSection;
> 
> AppSection.Settings.Add(new KeyValueConfigurationElement("SMTP", "mail.bhaidar.net"));
> 
> configFile.Save();

上面的代码将以下行添加到 appSettings 部分。

> <应用设置>
> 
> ```
> < add key="SMTP" value="mail.bhaidar.net" / > 
> ```
> 
> </ 应用设置 >

# python - 带空格的 Python 方法参数

> ID：351760
> 
> 赞同：1
> 
> 时间：2008-12-09T04:14:45.307
> 
> 标签：python, dsl

我想创建一个简单的文件格式/DSL，它允许我的用户输入数据。我的系统在 python 中，使用 python 的解析器很有吸引力。像这样定义数据元素的语法似乎很方便。

```
Allocation(Param1 = Val1, Param2 = Val2 ) 
```

但是，它不支持带空格的参数名称。

```
Allocation(Param 1 = Val1, Param 2 = Val2 ) 
```

Python 解析器友好版本可以如下所示，但不是非常用户友好。

```
Allocation(("Param 1",Val1), ("Param 2",Val1) )
Allocation(**{"Param 1":Val1, "Param 2":Val1} ) 
```

有没有办法让这在 python 中更具可读性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T04:42:47.137

我想会有一些方法可以做到这一点。但我不得不问，这在可读性上真的有足够大的差异吗？

```
Allocation(Param1 = Val1, Param2 = Val2 ) 
```

对此：

```
Allocation(Param 1 = Val1, Param 2 = Val2 ) 
```

做出那么大的改变？我确信有一种方法可以做你想做的事，但我首先担心的是所涉及的努力是否值得结果。

> 我的目标是提供可用于将数据输入系统的 DSL。在上述场景中，参数是人名，值是百分比。

我对你现在想要做什么有了更好的理解，但我仍然认为你最终可能不得不牺牲一些可读性来获得你想要的东西。就个人而言，我会选择类似的东西：

```
Allocation(
    { 'name1' : value1,
      'name1' : value2, }
) 
```

如果这不是您可以使用的东西，那么您可能需要重新考虑是否要将 Python 用于您的 DSL 或使用本地开发的东西。对于大多数编程语言来说，允许空格允许太多歧义。

如果您仍想使用 python 来实现这一点，您可能需要考虑发布到 C-API SIG ( [SIGS](http://www.python.org/community/sigs/) ) 或[python-dev 列表](http://mail.python.org/mailman/listinfo/python-dev)（作为最后的手段）。我能看到的唯一方法是将 python 解释器嵌入到 C/C++ 程序中并对其进行某种黑客攻击（这可能很困难！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T04:22:03.577

你可以这样做：

```
def Allocation(**kwargs):
    print kwargs

myargs = {"Param 1":Val1, "Param 2":Val1}
Allocation(**myargs) 
```

**编辑：** 您的编辑现在包括我的答案，所以不，没有更简单的方法可以在关键字参数中包含空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T04:40:19.780

除非我在这里误解了您的基本前提，否则没有什么可以阻止您编写一个解析您自己的自定义语法的类，然后将该自定义语法用作单参数字符串：

```
Allocation("Param 1=Check Up; Param 2=Mean Value Theorem;") 
```

在此示例中，分号充当名称-值-对分隔符，等号表示名称-值分隔符。此外，您可以轻松地将解析器配置为接受自定义分隔符作为对象构造函数的一部分。

如果编写解析器似乎太令人生畏，请考虑（对于这样的语法）您可以通过简单地将字符串拆分来获取您的值

```
/\s*;\s*/ 
```

然后继续

```
/\s*=\s*/ 
```

快速获取名称-值对。您还可以从已经为 Python 编写的多个参数解析器中进行选择。

诚然，这并没有使用 Python 作为参数解析器，这是您必须权衡的一个考虑因素，例如这种方法的简单性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T16:36:00.380

这是我的偏好。

```
AllocationSet(
    Alloc( name="some name", value=1.23 ),
    Alloc( name="another name", value=2.34 ),
    Alloc( name="yet another name", value=4.56 ),
) 
```

这些是相对容易创建的类声明。由此产生的结构也易于加工。

# java - 使用休眠连接到远程数据库时出现问题

> ID：351769
> 
> 赞同：2
> 
> 时间：2008-12-09T04:19:10.790
> 
> 标签：java, database, hibernate

我正在尝试使用休眠连接到远程数据库（如果有人好奇，托管在 Netfirms [www.netfirms.ca上）。](http://www.netfirms.ca)我的映射文件如下：

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://mysql.netfirms.ca:3306/d60549476</property>
        <property name="hibernate.connection.username">u70612250</property>
        <property name="hibernate.connection.password">******</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</property>

        <!-- Use the C3P0 connection pool provider -->
        <property name="hibernate.c3p0.min_size">5</property>
        <property name="hibernate.c3p0.max_size">20</property>
        <property name="hibernate.c3p0.timeout">300</property>
        <property name="hibernate.c3p0.max_statements">50</property>
        <property name="hibernate.c3p0.idle_test_period">3000</property>

        <property name="show_sql">true</property>
        <property name="format_sql">true</property>

        <!-- List of XML mapping files -->
        <mapping resource="customer.hbm.xml"/>
        <mapping resource="customerSummary.hbm.xml"/>
        <mapping resource="charity.hbm.xml"/>
        <mapping resource="charitySummary.hbm.xml"/>

    </session-factory>
</hibernate-configuration> 
```

当我启动我的应用程序时，我得到以下打印输出：

```
 16 [main] INFO org.hibernate.cfg.Environment - hibernate.properties not found
    ....
    94 [main] INFO org.hibernate.cfg.Configuration - configuring from resource: /hibernate.cfg.xml
    ....
    485 [main] INFO org.hibernate.cfg.Configuration - Configured SessionFactory: null
532 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - Using Hibernate built-in connection pool (not for production use!)
532 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - Hibernate connection pool size: 20
547 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - autocommit mode: false
547 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://mysql.netfirms.ca:3306/d60549476
547 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - connection properties: {user=u70612250, password=****}
168719 [main] WARN org.hibernate.cfg.SettingsFactory - Could not obtain connection metadata
com.mysql.jdbc.CommunicationsException: Communications link failure due to underlying exception: 

** BEGIN NESTED EXCEPTION **

java.net.NoRouteToHostException
MESSAGE: No route to host: connect

STACKTRACE:

java.net.NoRouteToHostException: No route to host: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source) 
```

我确保我的数据库配置为允许远程访问。我想知道这是什么原因造成的。显然，我无法与主机建立连接，但我不确定为什么。假设主机名、用户和密码正确，我是否遗漏了什么？

附录：我尝试使用与 Squirrel 相同的驱动程序进行连接，并得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-11T02:00:03.657

事实证明，连接存在几个问题：

1.  虽然该网站说在控制面板上使用 mysql.netfirms.ca，但他们的通用说明是正确的，我应该像前面提到的其他人一样使用 mysql.netfirms.com。
2.  Netfirms 在他们的网站上遇到了一些问题，显然我是唯一一个注意到来自远程机器的连接不可用的人。他们早些时候发了道歉，现在我可以正常连接了。

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T04:50:33.970

我想第一步是检查（因为你没有说你已经尝试过），如果你可以使用一些 SQL 工具连接到数据库。以松鼠为例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T10:19:22.030

异常说，没有通往主机的路线。这意味着您很可能甚至无法 ping 您的数据库服务器。

阅读[http://support.netfirms.com/article.php?id=694](http://support.netfirms.com/article.php?id=694)你应该在你的 jdbc url 中放置另一个主机

jdbc:mysql://mysql.netfirms。**通讯**：3306/d60549476

# .net - NHibernate FK是CHAR(6)，由于子表PK是CHAR(6)各种查询失败

> ID：351779
> 
> 赞同：0
> 
> 时间：2008-12-09T04:27:49.710
> 
> 标签：.net, oracle, nhibernate, mapping, char

我有一个旧版 Oracle 数据库，它有多个 1:n 查找表，这些查找表基于子表中的 CHAR(6) 主键。不幸的是，我不是唯一一个对 NHibernate 如何处理 char 字段（尤其是作为主键的字段）有问题的人。看：

*   [http://forum.hibernate.org/viewtopic.php?t=984281](http://forum.hibernate.org/viewtopic.php?t=984281)
*   [http://forum.hibernate.org/viewtopic.php?t=975743](http://forum.hibernate.org/viewtopic.php?t=975743)
*   [http://forum.hibernate.org/viewtopic.php?p=2382974](http://forum.hibernate.org/viewtopic.php?p=2382974)
*   [http://www.hibernate.org/388.html](http://www.hibernate.org/388.html)
*   ...还有很多....

我即将实现一个自定义用户类型来处理这些问题，但想检查是否有更好的方法，因为对于如何处理 char 字段作为 session.Get() 中的键似乎仍然存在一些困惑。 . 和 session.Load()... （因此，由于这些表是我们应用程序的核心，我想确保它不必重做）。我确信我不是唯一遇到此问题的人，我非常感谢更有经验的 NHibernate 用户提供的任何建议。

为了让事情变得更有趣，将 NHibernate 与 Oracle 结合使用确实会引发一些我没想到的曲线球。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-09T19:15:20.217

看起来 2.0.1 GA 的更新解决了大部分问题（如果它们不是我错误配置的问题的话）。延迟加载可以很好地加载外键，即使它们是 char(6)，但长度小于 6。如果包含尾随空格，则 session.Get 和 session.Load 在本机上也可以正常工作。

我可能仍然会实现一个 UserType 来摆脱显示的尾随空格。

# regex - 如何用 Perl 中的另一组替换文件中的一组单词？

> ID：351784
> 
> 赞同：3
> 
> 时间：2008-12-09T04:33:00.463
> 
> 标签：regex, perl

我的要求是用第二组单词替换给定文本文件中的一组单词，这可能是从命令行或其他文件中给出的。想要使用 Perl 来做到这一点，因为我的其余代码也在 Perl 中。

所以，如果我有以下情况：

```
server name="${server1}" host="abc.com"
server name="${server2}" host="webcs.com"
server name="${server5}" host="httpvcs1.com"
server name="${server6}" host="xyz.com"
server name="${server7}" host="msg.com" 
```

我希望用一组不同的单词替换字符串“server1”、“server2”、“server5”等。这些可以放在另一个文件中或从命令行给出（以更可行的为准）。

另外，如果我想用“文件”替换“服务器”一词，而不仅仅是“服务器1”、“服务器2”等，我将如何为这个替换做一个正则表达式？

```
perl -pie 's/server\d{1-3}/myword/g' loginOut.txt > loginOut1.txt 
```

以上将用“myword”替换所有单词。但我只想替换子字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T05:09:58.893

您的第二个问题的正则表达式是`s/server/myword/g;`. 这匹配（并替换）任何出现的“服务器”。

要使用不同的字符串替换 server1、server2 等，您可以拥有一个包含替换规则的文本文件，例如：

```
server1 abcd
server2 bcde
server3 cdef
etc. 
```

然后，您会将文件中的日期读入哈希，例如，

```
my %dict;
while(<DICTFILE>){
    /(\S+)\s+(\S+)/;
    $dict{$1}={$2};
} 
```

然后继续更换：

```
while(my $line = <>){
    foreach my $s (keys %dict){
        $line =~ s/$s/$dict{$s}/g;
    }
    print $line;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T09:04:29.653

以上所有答案都有一些缺陷。你问了一些方法

> 我希望将 'server1'、'server2'、'server5' 等替换为 'file1'、'file2'、'file5'、..

该命令是（在 Windows 中提示它的 -pe，而不是 -pie）：

```
perl -pe "s/\{server/\{file/g" in.txt > out.txt 
```

out.txt 是：

```
server name="${file1}" host="abc.com"
server name="${file2}" host="webcs.com"
server name="${file5}" host="httpvcs1.com"
server name="${file6}" host="xyz.com"
server name="${file7}" host="msg.com" 
```

根据您的最新评论，我相信这正是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T09:24:07.773

您只需要尽可能多地使用它，使其适合您的情况。

在这种情况下，您可以这样做：

s/{服务器/{文件/g;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T04:59:00.910

将您的正则表达式更改为以下内容：

```
perl -pie 's/\{server/myword/g' loginOut.txt > loginOut1.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T10:16:58.507

尝试以下操作：

```
$what = 'server'; # The word to be replaced
$with = 'file';   # Replacement
s/(?<=\${)$what(?=[^}]*})/$with/g; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-09T19:27:13.310

您可能想尝试一下[Template Toolkit](http://template-toolkit.org/)。

*[以下是 Template Toolkit Intro, Manual page](http://template-toolkit.org/docs/manual/Intro.html)**的摘录*：

Template Toolkit 是 Perl 模块的集合，它们实现了一个快速、灵活、强大和可扩展的模板处理系统。它最常用于生成动态 Web 内容，尽管它同样可以很好地用于处理任何类型的文本文档。

在最简单的层面上，它提供了一种处理模板文件的简单方法，用它们的等效值填充嵌入式变量引用。这是一个模板示例。

```
亲爱的 [% 姓名 %]，

我们注意到您的帐户在
拖欠总额为 [% 债务 %]。

请在 [% 最后期限 %] 之前结清您的帐户，否则我们将
将被迫撤销您的惊险许可证。

管理。

```

默认情况下，模板指令嵌入在字符序列中**`[% ... %]`**，但您可以更改这些选项和其他各种选项来配置模板工具包的外观、感觉和工作方式。您可以设置该**`INTERPOLATE`**选项，例如，如果您希望以 Perl 样式嵌入变量：

```
亲爱的$name，

我们注意到您的帐户在
拖欠债务总额。

```

*[Perldoc 页面](http://search.cpan.org/perldoc?Template::Toolkit)*

# javascript - Firebug 在使用“网络”选项卡列出下载的方式上总是正确的吗？

> ID：351791
> 
> 赞同：2
> 
> 时间：2008-12-09T04:38:37.817
> 
> 标签：javascript, firebug

当可以从缓存中加载内容时，Firebug 是否可能错误地将下载添加到“网络”选项卡？

我在 Javascript 库中有一些代码，用于在单击缩略图时延迟下载图像，然后在下载后显示它。它的目的是确定它是否已经被首先下载（通过一个带有布尔值的数组），如果它之前已经下载过，只需从缓存中显示。

我认为它可以正常工作一段时间（因为单击两次时它们会出现的速度），但我最近查看了 Firebug 的“网络”选项卡，它似乎每次都在下载大图像（总文件大小得到每次点击都会变大）。

我不确定我做错了什么，因为一些调试告诉我布尔值正在正确更新。

所以我的问题是，Firebug 是否不正确（我对此表示怀疑），或者有什么方法可以强制它从缓存中显示（我认为使用与 image.src 完全相同的图像路径可以做到这一点）

这是我第一次在 Javascript 中使用对象，所以我对我的代码不是 100% 有信心，所以请善待！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-09T08:45:40.690

firebug 中 net 选项卡中出现的图像并不意味着它是从服务器下载的。检查萤火虫报告的图像的 HTTP 响应代码 - 对我来说，一次访问后，它一直返回“304 - 未修改”，这意味着它正在从缓存中加载。

您可以通过为您想要硬缓存的组件发送[遥远的未来标头来](http://www.askapache.com/htaccess/apache-speed-expires.html)避免检查缓存是否仍然新鲜的额外 HTTP 请求。但请记住，为了强制客户端重新下载以这种方式缓存的组件，您必须更改文件名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-09T06:44:45.347

Firebug 可能不是 100% 正确的，或者至少，如果 Firebug 被关闭，那可能不会完全正确。

我会尝试使用 Fiddler 或 WireShark 来检查网络活动，看看它是否看起来有什么不同。[Fiddler](http://www.fiddlertool.com/fiddler/)是 IE 的调试代理，[WireShark](http://www.wireshark.org/)是数据包嗅探器。

我不能确切地说 Firebug 网络监视器是如何工作的，因为我从来没有深入过引擎盖，但是我经历了一些我认为是我做的错误的事情，当 Firebug 关闭时这些事情就消失了。

似乎 Firebug 在测量事物的行为中，以一种“看着你的量子猫”的方式改变事物。Firebug 仍然很稳定，但它确实有一些限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-15T12:07:55.210

我检查了您的网站并使用 CacheViewer 确认它确实在缓存它并从磁盘中获取它，从今天起一个月到期。如果您愿意，您也可以通过将所有图像组合成一个大图像并仅显示感兴趣的区域来使用拼接，尽管我通常对小图像使用拼接，例如分页图标等。无论如何，您的网站看起来很棒并且喜欢这种方式你延迟加载大图像。

# c# - 解析用户的查询

> ID：351793
> 
> 赞同：5
> 
> 时间：2008-12-09T04:40:03.320
> 
> 标签：c#, parsing, tokenize

所以这就是我想要实现的目标。我想给我的用户一个类似谷歌的文本框，他们可以在其中输入查询。我希望他们能够表达半自然语言，例如

```
"view all between 1/1/2008 and 1/2/2008" 
```

如果语法必须是相当结构化的并且仅限于这个特定的域，那没关系......这些是将使用它的专家用户。

最终，我想我希望解析结果可以作为某种表达式树使用。但是，如果您对哪种数据结构可能更好有其他想法。

这是在 C# 中:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T06:07:35.983

您正在描述一种编程语言。当然它是一种小语言（通常称为小语言，或领域特定语言 (DSL)）。如果您从未听说过递归下降解析器这个术语，那么您最好听从 Paul 的建议并使用一些描述的下拉框。

然而，我不得不再次同意他的观点，如果你想这样做，Antlr 就是你要走的路。网站上有一些教程可以帮助您入门。基本上，您将需要描述如何使用[Backus-Naur 格式](http://en.wikipedia.org/wiki/Backus-Naur_form)表示法的语法。

然后，您将通过语法运行 Antlr，它会生成您的解析器。然后，您可以将教科书中的输入输入到抽象语法树中。然后，您可以使用该树来生成您的查询。这并不像听起来那么难，但有一点。

如果您真的对此感兴趣和/或想稍微扩展您的编程能力，您可以阅读 Dragon Book，AKA 编译器：原理、技术和工具，了解更多关于该主题的信息。

祝你好运，我的朋友。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-09T05:38:17.417

对于一种非常简单的语言，我会使用正则表达式。主要好处是您不必处理任何代码生成。不过，模式匹配的调试基本上为零。

如果您的语言比较复杂（您不介意在单个语法文件中指定整个内容），我会选择[Coco/R——](http://www.ssw.uni-linz.ac.at/Research/Projects/Coco/)它速度快、易于使用，并且代码可调试性极强。

对于更复杂的语言，我目前最喜欢的是[Antlr v3](http://www.antlr.org/)。支持多文件语法（通过'import'语句），非常好。生成的代码是可调试的，但在调试被认为“简单”之前需要一些时间来适应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T05:20:21.633

我以前也遇到过这种情况。经过多次讨论，我们认为上下文相关的下拉菜单是一个比文本框更好的解决方案。

例如，有 4 个下拉菜单，但最后 3 个被禁用。然后，当用户从第一个选项中选择一个选项时，它会填充并启用其他选项。所以他们会选择“查看全部”然后选择“介于”，然后可能会弹出最后两个的文本框或日历。

[这是一个有点像我正在谈论的例子](http://www.nvidia.com/Download/index.aspx?lang=en-us)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-09T05:10:10.623

表达式树是个好主意。有许多优秀的通用解析器和解析器生成器，开源的和商业的，它们可以将正确的查询字符串转换为表达式树。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-12T20:12:45.397

使用[Oslo](http://www.microsoft.com/soa/products/oslo.aspx)，它是专门为此设计的......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-09T06:47:02.720

我不知道这是否会对您有所帮助，但我们所做的是：我们为用户提供了预定义的标准，例如日期选择我们为他们提供了两个日历弹出窗口，以便他们可以选择日期范围和日期范围......我们做到了不是强制性的..所以日期过滤器仅在用户指定日期时才应用...同样，您也可以为用户提供预定义的标准选择...除此之外，表达式树似乎是一个很好的解决方法.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-12T20:19:10.267

[GOLD Parser Generator](http://www.devincook.com/goldparser/)具有用于设计和测试语法的有用 UI、相当不错的教程和文档，并且易于从 C# 中使用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-09T05:05:11.163

试图解析这些东西将是一场灾难，并且最终对用户非常有限，因此让他们感到沮丧而不是帮助他们。我建议使用预定义的查询子句，以及某种查询构建器工具，该工具具有下拉形式的所有可用选项。您可以为不同的数据类型使用不同的布尔运算符（大于、小于数字，例如字符串等），但是我认为这比实际尝试解析用户可能键入的内容更有意义。

# c# - 我应该对这个类进行单元测试吗？

> ID：351797
> 
> 赞同：1
> 
> 时间：2008-12-09T04:40:35.253
> 
> 标签：c#, unit-testing, testing

我知道这可能是一个非常基本的问题，但我现在脑子里有点空白。我应该对这个类进行单元测试吗？

```
public class MapinfoWindowHandle : IWin32Window
    {
        IntPtr handle;

        public MapinfoWindowHandle(IntPtr mapinfoHandle)
        {
            this.handle = mapinfoHandle;     
        }

        #region IWin32Window Members

        IntPtr IWin32Window.Handle
        {
            get { return this.handle; }
        }

        #endregion
    } 
```

如果我应该是我应该测试什么？
我这样使用它：

```
IntPtr handle = new IntPtr(100);
myform.show(new MapinfoWindowHandle(handle)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T04:44:39.410

我能看到的唯一一件事是确保您取出通过构造函数放入的句柄。我知道很明显您以这种方式实现了它，但测试会向您保证它会保持这种方式。我会测试这个只是因为你是通过构造函数注入它的。如果只是 { get; 放; 我可能不会。

```
 [TestMethod]
 public void ConstructorTest()
 {
      IntPtr handle = new IntPtr(100);
      MapinfoWindowHandle winHandle = new MapinfoWindowHandle(handle);
      Assert.AreEqual( handle, ((IWin32Window)winHandle).Handle );
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T04:57:49.040

我当然会测试尝试用 NULL (0) 或 INVALID_HANDLE_VALUE (-1) 构造它，如果合适的话，可能会在其中一个/两个上抛出它（目前还不清楚是否可以用 IntPtr.Zero 初始化类，但是几乎可以肯定 -1 是无效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T06:17:33.407

是的。如果一个类值得写，那么它就值得测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T04:45:16.697

我内心的实用主义者说不，因为班级“什么都不做”，所以没有“什么”要测试。但可以肯定的是，您仍然可以对其进行测试，仅用于文档目的，并作为未来开发人员的合同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T04:48:53.693

众所周知，GUI 代码很难进行单元测试。我从来没有发现它在我自己的应用程序中太有用了。只需将您的业务逻辑保留在 GUI 之外，这样您就可以轻松地对其进行测试。我通常使用手动或自动集成/验收测试来测试 gui 代码。很难编写测试来验证某件事“看起来正确”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-09T07:16:57.670

是的，写测试。如果后来有人更改了代码或添加了一些新代码，您至少有一个测试来确保该类按预期工作。

# vb.net - 你如何像 c# 一样在 vb.net 中做内联委托？

> ID：351800
> 
> 赞同：20
> 
> 时间：2008-12-09T04:41:31.353
> 
> 标签：vb.net

是否可以像在 c# 中一样在 vb.net 中创建内联委托？

例如，我希望能够像这样内联地做一些事情：

```
myObjects.RemoveAll(delegate (MyObject m) { return m.X >= 10; }); 
```

仅在 VB 中，无需执行此类操作

```
myObjects.RemoveAll(AddressOf GreaterOrEqaulToTen) 

Private Function GreaterOrEqaulToTen(ByVal m as MyObject)
    If m.x >= 10 Then 
         Return true
    Else
         Return False
    End If
End Function 
```

-- 编辑 -- 我应该提到我仍在使用 .net 2.0，所以我将无法使用 lambda。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-09T04:56:49.450

```
myObjects.RemoveAll(Function(m As MyObject) m.X >= 10) 
```

请参阅[MSDN 上的 Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb531253.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-09T04:52:54.590

尝试：

```
myObjects.RemoveAll(Function(m) m.X >= 10) 
```

这适用于 3.5，不确定 2.0 的语法。

# mysql - Rails + MySQL Unicode

> ID：351801
> 
> 赞同：4
> 
> 时间：2008-12-09T04:41:40.743
> 
> 标签：mysql, ruby-on-rails, unicode, utf-8

I'm trying to get Unicode working properly in rails using MySQL. Now, Rails displays the text correctly, but it shows up as ??? in MySQL. Additionally, I am not able to filter the text.

My MySQL database has been configured with the utf8 character set. My client character is also UTF8\. Likewise, rails is set to use UTF8\.

If I enter the Unicode string directly from the MySQL client, it is stored properly in the table, but Rails does not correctly display it.

How do I get the data in, properly formatted in the database?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-06T13:41:28.473

您是否尝试过在您的环境下将此添加到您的 database.yml 中？

`encoding: utf8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T04:54:20.313

Perhaps whatever you're using to view your database isn't configured properly for unicode. For instance, if you're using a terminal in some linux distro: the terminal shell may not be configured correctly to display unicode characters.

# jquery - 即使使用 pageLoad，jquery 脚本在回发后也无法正常工作

> ID：351804
> 
> 赞同：0
> 
> 时间：2008-12-09T04:44:03.140
> 
> 标签：jquery, asp.net-2.0, postback

`jQuery`我的 Asp.net 页面上的脚本遇到了一些问题。在第一次加载期间它运行良好，在回发后它不会。最初我认为这是因为脚本没有再次加载，但警报告诉我脚本在我使用 function`pageLoad()`而不是`$(document).ready(function()`. 在脚本中，我只是从一个文本区域读取值并将长度值设置为下一个文本输入。我将脚本放入这样的页面：

```
<script type="text/javascript" src="../js/smsanywhere.js"></script> 
```

我试图直接放入页面，但我猜没有区别。

脚本如下所示。

```
 function pageLoad()
    {
       alert('pageLoad is there');
       var textBox  = "textarea[id*='txtMessage']";
       var counterBox  = "input[id*='txtCharLeft']";

       $(textBox).keydown(function(){ 
          alert(this);
          var length = 70 - $(this).val().length;
          $(counterBox).val(length);
          $(counterBox).attr("style",function(){
             return "width:30px;" + (length < 0 ? "background-color:Red;" : "");
         });
       });
    } 
```

我在这个页面上没有使用任何`ajax`东西，它只是 master page 、 content page 和`jQuery`.

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T05:53:15.670

我发现了问题....当我像这样添加对 jquery 的引用时：

```
HtmlGenericControl myJs = new HtmlGenericControl();
myJs.TagName = "script";
myJs.Attributes.Add("type", "text/javascript");
myJs.Attributes.Add("language", "javascript"); //don't need it usually but for cross browser.
myJs.Attributes.Add("src", ResolveUrl("~/js/jquery/jquery-1.2.6.min.js"));
Page.Header.Controls.Add(myJs); 
```

但是我把 if (!IsPostBack){ ... } 放在里面，所以我是...。解决方案只是将它从这种情况中删除并每次运行它... uff。

谜底就这么解开了……

# c++ - IP 标志的不分段位在哪里使用？

> ID：351806
> 
> 赞同：9
> 
> 时间：2008-12-09T04:45:07.867
> 
> 标签：c++, c, networking, network-programming, network-protocols

我很想知道 IP 标志的“不分段”[DF] 位在哪里使用。因为碎片对更高层是不可见的，他们也不在乎。

我也在寻找一个例子。

提前非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-09T05:41:39.220

碎片并不总是对所有上层都是不可见的。一些早期的（甚至可能是当前的）微控制器 TCP/IP 堆栈没有实现完整的功能，例如碎片处理。在这种情况下使用标志将确保数据包以其原始形式到达，而不是另一端无法处理的大量片段。

此外，当使用 UDP 时，不需要所有分片都到达目的地，因此，防止分片意味着消息到达或未到达 - 不可能只有一小部分 UDP 数据报到达目的地. 我不记得 TCP/IP 堆栈在等待丢失片段的未组装 IP 数据包上保留了多长时间，但是使用 DF 标志意味着在那段时间没有占用不必要的资源。

最后，您可以使用它来测试网络基础设施的行为，例如当您收到一个大于最大传输单元的数据包时会发生什么（DF 将防止该数据包被分段以“挤过”孔）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-09T07:29:35.273

除了[@Pax 的回答](https://stackoverflow.com/questions/351806/where-is-the-dont-fragment-bit-of-the-ip-flags-used/351894#351894)（或者可能作为他提到的测试的一部分）之外，DP 标志还用于[路径 MTU 发现](http://www.netheaven.com/pmtu.html)。这是当您尝试找出对于给定链接而言，可以在不被分段的情况下发送的最大数据包是多少。

避免碎片化通常很有用，即使更高级别的协议在理论上与它的机制隔离，它们仍然可以“感受到”后果。如果网络套接字的单个应用程序级`write()`由于太大而最终被分片，并且其中一个分片在网络中丢失，则整个 IP 数据包将丢失。这当然会影响吞吐量。

由于这个原因，通常希望知道*最大传输单元*，即可以发送到目的地而不被分段的最大数据包。路径 MTU 发现用于查找此大小，方法是简单地设置 DF 位并连续发送更大的数据包，直到网络报告（通过[ICMP](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)）失败。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-10T09:42:03.053

请注意，在 C 中设置 DF 没有标准方法。在 Linux 上，此代码有效：

```
result = setsockopt(mysocket, IPPROTO_IP, 
                IP_MTU_DISCOVER, IP_PMTUDISC_DO, sizeof(int)); 
```

但它不在 FreeBSD 6 上

此外，路径 MTU 发现在真实 Internet 上极其不可靠。太多损坏的防火墙和中间盒过滤掉了 ICMP“数据包太大”消息（这是在面试期间测试候选人网络管理员的好方法：让他/她停止 ping，他/她可能会完全阻止 ICMP。）请参阅RFC 2923：“路径 MTU 发现的 TCP 问题”

这就是为什么 IETF 现在建议使用一种新方法来测试 MTU，而不依赖于路径 MTU 发现：RFC 4821：“分组层路径 MTU 发现”

# captcha - Problem with Recaptcha

> ID：351810
> 
> 赞同：0
> 
> 时间：2008-12-09T04:47:05.100
> 
> 标签：captcha, recaptcha

I have a problem with the form I'm using in my webpage.

It allows the recaptcha but It also sends the email without validating the fields in the recaptcha box. This form is using Ajax and PHP.

I've pasted the code next:

```
<br> <br> <div id="fields">

<form action="javascript:alert('success!');">
<label>Nombre</label><INPUT class="textbox" type="text" name="name" value=""><br />

<label>eMail</label><INPUT class="textbox" type="text" name="email" value=""><br />

<label>Asunto</label><INPUT class="textbox" type="text" name="subject" value=""><br />

<label>Mensaje</label><TEXTAREA class="textbox" NAME="message" ROWS="5" COLS="25"></TEXTAREA><br />

<?php

require_once('recaptchalib.php');

// Get a key from http://recaptcha.net/api/getkey
$publickey = "6LekPAQAAAAAAFoAJRfRtd9vmlzA9m-********";
$privatekey = "6LekPAQAAAAAAFqNcNsrnZba0-ZMg-********";

# the response from reCAPTCHA
$resp = null;
# the error code from reCAPTCHA, if any
$error = null;

# was there a reCAPTCHA response?
if ($_POST["recaptcha_response_field"]) {
        $resp = recaptcha_check_answer ($privatekey,
                                        $_SERVER["REMOTE_ADDR"],
                                        $_POST["recaptcha_challenge_field"],
                                        $_POST["recaptcha_response_field"]);

        if ($resp->is_valid) {
                echo "Bien escrito!";
        } else {
                # set the error code so that we can display it
                $error = $resp->error;
        }
}
echo recaptcha_get_html($publickey, $error);
?>
    <br/>

<label>&nbsp;</label><INPUT class="button" type="submit" name="submit" value="Enviar">
</form>
</div>

</fieldset> 
```

Thanks a lot.

David.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T18:00:10.200

问题是您需要在再次显示表单之前检查 reCAPTCHA。PHP 代码会出现在表单的第一行之上，最好是在生成任何 HTML 之前，这样用户就可以被重定向到感谢页面。

# python - 在 python 中破坏顶层 tk 窗口

> ID：351821
> 
> 赞同：1
> 
> 时间：2008-12-09T04:53:58.817
> 
> 标签：python, tkinter

我试图编写可以在 Python 中自动关闭 Toplevel Tk 窗口的代码。

我最终让它工作了，但在这个过程中遇到了一个我无法弄清楚的小问题。

后两个按钮起作用，但第一个不起作用，我不明白为什么......

有任何想法吗？

```
from Tkinter import *

root = Tk()
def doDestroy ():
    TL.destroy()

TL = Toplevel()
TL.b = Button (TL, text="lambda destroy", command=lambda: TL.destroy)
TL.b.pack()

TL.b2 = Button (TL, text="callback destroy", command=doDestroy)
TL.b2.pack()

de = lambda: TL.destroy()
TL.b3 = Button (TL, text="lambda that works", command=de)
TL.b3.pack()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-09T04:59:40.207

因为它返回一个函数而不是它的结果。

你应该把：

```
command=TL.destroy 
```

或者如果你使用 lambda：

```
command=lambda: TL.destroy() 
```

# c - ANSI C: Assigning arrays and pointers to arrays

> ID：351823
> 
> 赞同：2
> 
> 时间：2008-12-09T04:55:40.560
> 
> 标签：c, performance, arrays, pointers

The following is a simplified version of what I'm trying to do, because I'm sure you don't want to wade through an entire set of structs and function prototypes for a particle system.

```
float const materials[24][4][4] = {{{...}}};
typedef struct EmitterStruct  { float *material[4][4]; } Emitter;
typedef struct ParticleStruct { float material[4][4]; } Particle;
Emitter *myEmitter;

Emitter * createEmitter(float *material[4][4])
{
    Emitter * newEmitter;
    newEmitter = (Emitter *)malloc(sizeof(Emitter));
    newEmitter->material = materal; /* Returns "incompatable types in assignment" */
    return newEmitter;              /* I also tried newEmitter->material = &material */
}

int main(char *argv, int argc)
{
    myEmitter = createEmitter(materials[0]);
} 
```

In essence, as the comment shows, I get a compile error. I've tried this several different ways, even using "float material[4][4]" in the Emitter struct and the signature of createEmitter. However, then later on when I try to copy values into a particle for modificaitons using:

```
for (i=0; i++; i<4)
{
    for (j=0; j++; j<4)
    {
        particle->material[i][j] = emitter->material[i][j];
    }
} 
```

I get another type mismatch when copying, even though *everything* is declared as type float[4][4]. In essence, I want to get a 4x4 array out of an array of 4x4 arrays, keep note of it in the emitter struct, then copy it into the particle struct. But I only want to actually copy the values one time.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-09T06:00:08.573

我正在回答您更新的问题（出现在您自己的答案中）。首先你的代码：

```
float const materials[24][4][4] = {{{...}}};
typedef struct EmitterStruct  { float *material; } Emitter; /*Use just a plain pointer*/
typedef struct ParticleStruct { float material[4][4]; } Particle;
Emitter *myEmitter;

Emitter * createEmitter(float *material) /*Use a plain pointer here*/
{
    Emitter * newEmitter;
    newEmitter = (Emitter *)malloc(sizeof(Emitter));
    newEmitter->material = material; 
    return newEmitter;               
}

int main(char *argv, int argc)
{
    myEmitter = createEmitter(materials[0]);/*This decays into a pointer*/
} 
```

不！那不是正确的方法。它衰减为指针 - 是的，但不是指向浮点数的指针！如果您传递材料[0]，您将得到一个`float const[4][4]`衰减到`float const(*)[4]`（指向其第一个元素的指针），并且该指针就是传递的内容。因此，您想将其更改为：

```
float const materials[24][4][4] = {{{...}}};
/*Use just a plain pointer to an array */
typedef struct EmitterStruct  { float const (*material)[4]; } Emitter; 
typedef struct ParticleStruct { float material[4][4]; } Particle;
Emitter *myEmitter;

/*Use a plain pointer here. Bet keep it float const, not only float!*/
Emitter * createEmitter(float const (*material)[4])
{
    Emitter * newEmitter;
    newEmitter = (Emitter *)malloc(sizeof(Emitter));
    newEmitter->material = material; 
    return newEmitter;               
}

int main(int argc, char ** argv) /* you swapped args here */
{
    myEmitter = createEmitter(materials[0]); /* This decays into a pointer */
} 
```

在这里阅读它：[`int *userMask[3][4]` 指向什么？](https://stackoverflow.com/questions/274865/pointer-question-in-c#274943). 在此处阅读有关如何正确传递数组的信息：[C++ 字符串：[] vs. *](https://stackoverflow.com/questions/308279/c-vs#308724)。我会推荐你​​一个好的 C 或 C++ 书友:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T05:05:57.277

In regard to the first snippet, you get that error because arrays in C are not assignable. You have to perform a `memcpy` to copy arrays.

In regard to the second snippet, you have an issue with the following line:

```
particle->material[i][j] = emitter->material[i][j]; 
```

The member `material` in `Emitter` is a 2d array of type `float*`. The member `material` in `Particle` is of type `float`. Note that one is a pointer and one is not, which is why they are not assignable.

You could write the following:

```
particle->material[i][j] = *(emitter->material[i][j]); 
```

But that is assuming you've assigned those pointers to *point* at something. Alternatively, you can change `material` in `Emitter` to be a non-pointer. I can't tell you which you should do for sure because it is hard for me to decipher what your exact intentions are based on the code you've given.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T05:08:44.153

Of course, the second I ask for help, I figure out exactly what I needed to do.

```
float const materials[24][4][4] = {{{...}}};
typedef struct EmitterStruct  { float *material; } Emitter; /*Use just a plain pointer*/
typedef struct ParticleStruct { float material[4][4]; } Particle;
Emitter *myEmitter;

Emitter * createEmitter(float *material) /*Use a plain pointer here*/
{
    Emitter * newEmitter;
    newEmitter = (Emitter *)malloc(sizeof(Emitter));
    newEmitter->material = material; 
    return newEmitter;               
}

int main(char *argv, int argc)
{
    myEmitter = createEmitter(materials[0]);/*This decays into a pointer*/
} 
```

And then for the copy:

```
for (i=0; i++; i<4)
{
    for (j=0; j++; j<4)
    {
        particle->material[i][j] = *(emitter->material[i * 4 + j];
    }
} 
```

Doh...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T05:12:37.420

我曾经是这方面的专家。不幸的是，我已经离开它太久了。所以这是我大约 6 年前写的一个工作代码片段。我认为它可能会为您指明正确的方向。

```
// get a color histogram of an image
int ***colorHistogram(PIXEL *inputImage, HEADER *imageHeader)
{
    int x, y, z;

    // a color histogram
    int ***histo;

    // allocate space for the histogram
    histo = (int ***)malloc(256 * sizeof(int**));
    for(x=0; x<256; x++)
    {
        histo[x]=(int **)malloc(256 * sizeof(int*));
        for(y=0; y<256; y++)
        {
            histo[x][y]=(int *)malloc(256 * sizeof(int));

            // initialize the histogram
            for(z=0; z<256; z++)
                histo[x][y][z] = 0;
        }
    }

    // fill the histogram
    for (x = 0; x < imageHeader->width * imageHeader->height; x++)
    {
        histo[((int) inputImage[x].r)][((int) inputImage[x].g)][((int) inputImage[x].b)]++;
    }

return histo; 
```

}

无论如何，我希望这会有所帮助。

# asp.net - Session management for a load balanced website

> ID：351835
> 
> 赞同：1
> 
> 时间：2008-12-09T05:01:25.383
> 
> 标签：asp.net, session, load-balancing

We are currently using database to maintain state information (in a separate table) for the user. We fetch that information from the database every time user access the application (sends request) and update it in the database back after processing the request.

This has worked very well for us in many of our projects and is very easy to implement but this adds an overhead to call the database and save state information.

Are there any other ways available that would work better in this case?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T05:23:08.537

MS 提供了开箱即用的[StateServer 模式](http://msdn.microsoft.com/en-us/library/ms178586(VS.80).aspx)。这使您可以将会话数据存储在由一个或多个 Web 服务器共享的单个服务器上的内存中。在某些情况下（如果您的会话状态 SQL Server 负载很大），这可能会给您带来提升。

默认情况下，SQL Server 会话提供程序获取并保存每个项目的会话项目。如果您知道您的会话使用并且这似乎效率低下（您获取并保存每个请求的多个项目），您可以在 SQL Server 上实现一个自定义[SessionState 存储提供程序](http://msdn.microsoft.com/en-us/library/ms178587(VS.80).aspx)，它在请求开始时获取所有 Session 项目并在最后保存它们的请求。

其他资源：

*   [memcached](http://www.danga.com/memcached/) - 久经考验、流行的非 MS 缓存
*   [indeXus.Net Shared Cache](http://www.sharedcache.com/cms/) - 100% 托管代码缓存库
*   [indeXus.Net 共享缓存与 StateServer](http://netrsc.blogspot.com/2008/01/performance-average-comparsion-between.html)
*   [Memcached 可以与 ASP.NET 状态服务器互换吗？](https://stackoverflow.com/questions/290966/is-memcached-interchangeable-with-aspnet-state-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T05:39:38.787

有很多策略。我希望你的会话是粘性的（即在它启动时一直路由到同一台机器）。在这种情况下，您可以在本地（在内存中）缓存数据并仅使用 DB 进行备份（“只写”）。此外，还有提供分布式缓存的*memcached等解决方案。*

# c# - Windows 窗体应用程序的身份验证和授权的任何框架？

> ID：351837
> 
> 赞同：7
> 
> 时间：2008-12-09T05:03:15.833
> 
> 标签：c#, .net, winforms, authentication, authorization

我是一名 C# 开发人员。我同时开发 Windows 和 Web 应用程序。我想构建一个具有基于角色的系统的 Winforms 应用程序。所有用户必须在角色/组中。然后我们将“查看、添加、更新……”等权限分配给角色/组。角色/组是动态的，所以我们让用户定义它。

是否有任何框架和好的示例项目来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T05:07:36.603

我通常自己动手，因为 .NET 框架在这方面功能非常齐全，但您可以尝试[MS Authorization and Profile Application Block](http://www.microsoft.com/downloads/details.aspx?familyid=ba983ad5-e74f-4be9-b146-9d2d2c6f8e81&displaylang=en)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T05:31:10.097

对于蹩脚的实现细节，你看过“校长”吗？[在这里](https://stackoverflow.com/questions/351415/how-do-you-find-the-users-nameidentity-in-c#351876)查看我的回复。使用这种方法，您可以在代码中使用基于角色的安全性 - 例如：

```
 [PrincipalPermission(SecurityAction.Demand, Role="ADMIN")]
    static void SomeMethod()
    {...} 
```

运行时本身现在将验证用户是否必须具有您的“ADMIN”角色才能进入该方法（显然您也可以通过选中来禁用 UI 中的选项`IsInRole(...)`）。很强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T05:36:20.993

如果您不太热衷于重新发明轮子，请查看名为[Visual Guard](http://www.visual-guard.com/)的产品。它允许您以最少的工作轻松地为您的应用程序添加安全性，并拥有一套功能齐全的工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-12T05:04:46.390

如果您已经使用过 ASP.NET，那么您可能熟悉 ASP.NET 成员资格/角色/配置文件系统，具有默认提供程序以及添加您自己的提供程序而无需太多麻烦的能力。

如果您可以在 Windows 窗体或 WPF 应用程序中使用所有这些，那不是很好吗？是的？那么看看[ASP.NET 应用程序服务](http://msdn.microsoft.com/en-us/library/bb547119.aspx)吧！您只需设置一个网站以提供身份验证 URL，然后告诉您的应用程序使用它。您可以创建自己的自定义登录窗口并在需要时让应用服务打开它，或者使用自己的逻辑并自己调用方法。

它完全支持“离线模式”，它缓存密码的哈希值以进行比较，它还可以缓存角色并允许您使用配置文件设置。

# sql - 如何使用 LAMBDA 表达式在 LINQ 中执行 IN 或 CONTAINS？

> ID：351840
> 
> 赞同：6
> 
> 时间：2008-12-09T05:05:48.933
> 
> 标签：sql, linq-to-sql, lambda

我有以下 Transact-Sql 正在尝试转换为 LINQ ...并且正在苦苦挣扎。

```
SELECT * FROM Project
WHERE Project.ProjectId IN (SELECT ProjectId FROM ProjectMember Where MemberId = 'a45bd16d-9be0-421b-b5bf-143d334c8155') 
```

任何帮助将不胜感激......如果可能的话，我想用 Lambda 表达式来做。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-09T05:43:10.837

GFrizzle 打败了我。但这是一个 C# 版本

```
var projectsMemberWorkedOn = from p in Projects
                    join projectMember in ProjectMembers on
                        p.ProjectId equals projectMember.ProjectId
                    where projectMember.MemberId == "a45bd16d-9be0-421b-b5bf-143d334c8155"
                    select p; 
```

作为奖励，还有一个纯 LINQ 方法链版本：

```
var projectsMemberWorkedOn =
            Projects.Join( ProjectMembers, p => p.ProjectId, projectMember => projectMember.ProjectId,
                ( p, projectMember ) => new { p, projectMember } )
                .Where( @t => @t.projectMember.MemberId == "a45bd16d-9be0-421b-b5bf-143d334c8155" )
                .Select(@t => @t.p ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-09T05:11:50.153

在这种情况下，您可以只使用 .Contains()，如下所示：

```
var projects = 
from p in db.Projects
where db.ProjectMembers.Where(m => m.MemberId == "a45bd16d-9be0-421b-b5bf-143d334c8155").Select(pp => pp.ProjectID).Contains(p.ProjectID)
select p; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-09T05:36:01.040

不需要 lambda，您只需在此处获得一个简单的 LINQ 连接：

```
From p in db.Projects _
Join m in db.ProjectMember On p.ProjectId Equals m.ProjectId _
Where m.MemberId = "a45bd16d-9be0-421b-b5bf-143d334c8155" _
Select p 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-09T05:52:39.227

您可能需要**Any()**运算符：

```
var q = db.Projects
          .Where(p => db.ProjectMembers
                        .Where(pm => pm.MemberId == memberId)
                        .Any  (pm => p.ProjectId == pm.ProjectId)); 
```

由于结果集`db.ProjectMembers.Where(...)`总是相同的，您可以将其拆分，使其只执行一次：

```
var projectMembers = db.ProjectMembers.Where(pm => pm.MemberId == memberId);
var q              = db.Projects
                       .Where(p  => projectMembers
                                    .Any(pm => p.ProjectId == pm.ProjectId)); 
```

# c++ - 在 C++ 中查找对象的类型

> ID：351845
> 
> 赞同：166
> 
> 时间：2008-12-09T05:06:51.877
> 
> 标签：c++, types

我有一个类 A 和另一个继承自它的类 B。我正在重写一个接受 A 类型的对象作为参数的函数，所以我必须接受一个 A。但是，我稍后调用只有 B 具有的函数，所以如果传递的对象不是B类型，我想返回false并且不继续。

找出传递给我的函数的对象是哪种类型的最佳方法是什么？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2008-12-09T05:14:14.657

dynamic_cast 应该可以解决问题

```
TYPE& dynamic_cast<TYPE&> (object);
TYPE* dynamic_cast<TYPE*> (object); 
```

[`dynamic_cast`](http://en.cppreference.com/w/cpp/language/dynamic_cast)关键字将数据从一种指针或引用类型转换为另一种，执行运行时检查以确保转换的有效性。

如果您尝试将指针转换为不是实际对象类型的类型，则转换结果将为 NULL。如果您尝试强制转换以引用不是实际对象类型的类型，则强制转换将引发[`bad_cast`](http://en.cppreference.com/w/cpp/types/bad_cast)异常。

**确保基类中至少有一个虚函数来使 dynamic_cast 工作。**

维基百科主题[运行时类型信息](https://en.wikipedia.org/wiki/Run-time_type_information)

> RTTI 仅适用于多态类，这意味着它们至少有一个虚拟方法。实际上，这不是限制，因为基类必须具有虚拟析构函数，以允许派生类的对象在从基指针中删除时执行适当的清理。

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2010-12-01T14:04:39.757

动态转换最适合您描述问题，但我只想补充一点，您可以通过以下方式找到类类型：

```
#include <typeinfo>

...
string s = typeid(YourClass).name() 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2008-12-09T05:09:06.303

这称为[RTTI](https://en.wikipedia.org/wiki/Run-time_type_information)，但您几乎肯定要在这里重新考虑您的设计，因为找到类型并基于它做一些特殊的事情会使您的代码更加脆弱。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-03-31T18:53:28.403

为了完整起见，我将构建 Robocide 并指出`typeid`可以单独使用而不使用 name()：

```
#include <typeinfo>
#include <iostream>

using namespace std;

class A {
public:
    virtual ~A() = default; // We're not polymorphic unless we
                            // have a virtual function.
};
class B : public A { } ;
class C : public A { } ;

int
main(int argc, char* argv[])
{
    B b;
    A& a = b;

    cout << "a is B: " << boolalpha << (typeid(a) == typeid(B)) << endl;
    cout << "a is C: " << boolalpha << (typeid(a) == typeid(C)) << endl;
    cout << "b is B: " << boolalpha << (typeid(b) == typeid(B)) << endl;
    cout << "b is A: " << boolalpha << (typeid(b) == typeid(A)) << endl;
    cout << "b is C: " << boolalpha << (typeid(b) == typeid(C)) << endl;
} 
```

输出：

```
a is B: true
a is C: false
b is B: true
b is A: false
b is C: false 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-12-09T05:09:36.927

你正在寻找`dynamic_cast<B*>(pointer)`

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-12-09T05:13:20.697

可能会在您的对象中嵌入一个 ID“标签”，并使用它来区分 A 类对象和 B 类对象。

然而，这显示了设计中的缺陷。理想情况下，B 中 A 没有的那些方法应该是 A 的一部分但留空，然后 B 会覆盖它们。这消除了特定于类的代码，并且更符合 OOP 的精神。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-01-27T14:08:25.663

因为你的类不是多态的。尝试：

```
struct BaseClas { int base; virtual ~BaseClas(){} };
class Derived1 : public BaseClas { int derived1; }; 
```

现在`BaseClas`是多态的。我将类更改为结构，因为结构的成员默认情况下是公共的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-09T05:10:22.450

你的描述有点混乱。

一般来说，虽然一些 C++ 实现有它的机制，但你不应该询问类型。相反，您应该对指向 A 的指针执行 dynamic_cast。这将在运行时检查指向 A 的指针的实际内容。如果您有 B，您将获得指向 B 的指针。否则，您将获得异常或 null。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-09T06:51:02.527

正如其他人指出的那样，您可以使用 dynamic_cast。但通常使用 dynamic_cast 来找出您正在处理的派生类的类型表明设计不好。如果您要覆盖一个将 A 的指针作为参数的函数，那么它应该能够使用 A 类本身的方法/数据，并且不应该依赖于 B 类的数据。确定您正在编写的方法仅适用于 B 类，那么您应该在 B 类中编写一个新方法。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-12-04T09:07:33.867

如果你可以访问 boost 库，也许***type_id_with_cvr()***函数就是你需要的，它可以[提供数据类型而无需删除***const、volatile、& 和 && 修饰符***](http://www.boost.org/doc/libs/1_57_0/doc/html/boost/typeindex/type_id_with_cvr.html)。这是 C++11 中的一个简单示例：

```
#include <iostream>
#include <boost/type_index.hpp>

int a;
int& ff() 
{
    return a;
}

int main() {
    ff() = 10;
    using boost::typeindex::type_id_with_cvr;
    std::cout << type_id_with_cvr<int&>().pretty_name() << std::endl;
    std::cout << type_id_with_cvr<decltype(ff())>().pretty_name() << std::endl;
    std::cout << typeid(ff()).name() << std::endl;
} 
```

希望这是有用的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-12-09T07:05:18.130

使用重载函数。不需要 dynamic_cast 甚至 RTTI 支持：

```
class A {};
class B : public A {};

class Foo {
public:
    void Bar(A& a) {
        // do something
    }
    void Bar(B& b) {
        Bar(static_cast<A&>(b));
        // do B specific stuff
    }
}; 
```

# wpf - WPF - 使用 XMLTextReader 在 XML 文档中搜索值

> ID：351848
> 
> 赞同：0
> 
> 时间：2008-12-09T05:08:19.880
> 
> 标签：wpf, xml, xmltextreader, xpathdocument

好的另一个WPF问题，我想这只是一般的.NET。我有一个从 URL 检索的 xml 文档。

我想从文档中获取多个值（天气数据、位置、其他一些字符串）。

当我使用 XmlTextReader 时，我可以调用我的方法来提取值。第一次通过方法来搜索 xml 节点并获取值（XMLTextReader 对象）时，我得到了正确的数据，但随后 XMLTextReader 死了。不知道为什么它会被取消。所以我不得不在下面的 FindTags... 方法中执行这个 UGLY 代码。我只想继续将 xtr (XMLTextreader) 传递回我的 find 方法。这是读者的本性吗？我也不想每次都点击 URL ......这似乎也是错误的。

帮助..这一切都感觉不对。

谢谢。

```
 GetWeatherFeed("97229", "//weather//loc//dnam", "//weather//cc//tmp", "/weather/cc/icon"); 
```

获取 WeatherFeed 方法（截图）

```
 System.Xml.XmlTextReader xtr = new System.Xml.XmlTextReader(Url that retuns xm);
        System.Collections.Hashtable ht = new System.Collections.Hashtable();

        ht = FindTagsUsingXPthNaviatorAndXPathDocumentNew(xtr, location, temperature, iconid);
        lblLocation.Content = ht["Location"].ToString();
        lblWeatherCondition.Content = ht["Weather"].ToString();

public System.Collections.Hashtable FindTagsUsingXPthNaviatorAndXPathDocumentNew(System.Xml.XmlTextReader xtr, string nodeToLocate1, string nodeToLocate2, string nodeToLocate3)
{
    System.Xml.XPath.XPathDocument xpDoc = new System.Xml.XPath.XPathDocument(xtr);
    System.Xml.XPath.XPathNavigator xpNav = xpDoc.CreateNavigator();
    System.Xml.XPath.XPathExpression xpExpression = xpNav.Compile(nodeToLocate1);

    System.Xml.XPath.XPathNodeIterator xpIter = xpNav.Select(xpExpression);
    System.Collections.Hashtable ht = new System.Collections.Hashtable();

    while (xpIter.MoveNext())
    {
        ht.Add("Location", xpIter.Current.Value);
    }

    xpExpression = xpNav.Compile(nodeToLocate2);

    xpIter = xpNav.Select(xpExpression);
    while (xpIter.MoveNext())
    {
        ht.Add("Weather", xpIter.Current.Value);
    }

    xpExpression = xpNav.Compile(nodeToLocate3);

    xpIter = xpNav.Select(xpExpression);
    while (xpIter.MoveNext())
    {
        ht.Add("Icon", xpIter.Current.Value);
    }

    return ht;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T06:21:51.213

这就是我所做的......很好的答案。

```
 System.Xml.XmlTextReader xtr = new System.Xml.XmlTextReader(my xml url);
            System.Xml.XPath.XPathDocument xdoc = new System.Xml.XPath.XPathDocument(xtr);

            lblLocation.Content = getXmlNodeValue(xdoc, location);
            lblWeatherCondition.Content = getXmlNodeValue(xdoc, temperature); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T05:10:12.387

XMLTextReader 不是 SAX 阅读器吗？您不必倒带流以再次读取文件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T05:16:10.050

XmlTextReader 无法重置为开头。首先下载您的内容，然后使用多个 XmlTextReader（如果必须）。

如果您下载的文档很小，我会使用 XmlDocument（如果您使用的是 .NET 3.5，则使用 XDocument）

# c++ - 在 android 上移植 C++ lib/app

> ID：351864
> 
> 赞同：8
> 
> 时间：2008-12-09T05:14:13.643
> 
> 标签：c++, c, android, linux, embedded

我想将几个 C/C++ 库移植到 Android，这有多可行

例如，OpenSSL 可以移植还是假设一个依赖于 OpenSSL 的应用程序，当我认为 Android 本身有 libssl.so 时，将它移植到 Android 的最佳方法是什么

有哪些可用的工具，例如 Scratchbox，还有其他选择吗？有人有经验吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-09T14:34:11.530

[android internals wiki](http://groups.google.com/group/android-internals)是一个很好的起点，它包含[一个](http://benno.id.au/blog/2007/11/13/android-native-apps)解释如何编译简单本机应用程序的链接。

[正如您可能已经知道的那样， Scratchbox](http://www.macrobug.com/blog/2007/11/25/using-scratchbox-to-build-complex-arm-binaries-for-android/)似乎确实是编译更复杂的应用程序和库的方法。我建议联系这些人以了解您的 OpenSSL 项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-29T19:44:29.227

现在随着[Android NDK](http://developer.android.com/sdk/ndk/index.html)的发布，这应该是非常可行的。从他们的网站：

> Android NDK 是 Android SDK 的配套工具，可让 Android 应用程序开发人员在本机代码中构建其应用程序的性能关键部分......
> 
> NDK 提供：
> 
> *   一组用于从 C 和 C++ 源代码生成本机代码库的工具和构建文件
> *   一种将相应的原生库嵌入到可部署在 Android 设备上的应用程序包文件 (.apks) 中的方法
> *   从 Android 1.5 开始，Android 平台的所有未来版本都将支持一组原生系统头文件和库
> *   文档、示例和教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T11:30:25.800

显然有很多爱好者正在致力于改进 Android 的开发环境。但目前还没有什么能接近生产质量。

Dalvik 及其基于 java 的环境是目前唯一可以使用的东西。

希望这种情况在未来几年内会逐渐改变。

由于您现在可以购买可重新闪光的 G1 手机，因此该领域的进展应该会加快。

# security - 在站点之间传递凭据

> ID：351873
> 
> 赞同：5
> 
> 时间：2008-12-09T05:19:18.500
> 
> 标签：security, joomla, passwords, single-sign-on, moodle

我在具有两个不同域的两个不同服务器上运行两个不同站点。一个站点正在运行 Joomla，另一个站点正在运行 Moodle。我已将 Moodle 服务器配置为基于 Joomla 站点上的用户表进行身份验证，因此我们拥有用户信息的权威来源。

我想做的是：在有人登录 Joomla 站点后，提供一个指向 Moodle 站点的链接，该站点将静默登录，有点假装单点登录解决方案。Joomla 中的密码是 MD5 的，每个都有自己的秘密盐。

如何解决这个问题的第一个想法是告诉 Moodle 密码是以纯文本形式存储的，然后通过隐藏的表单输入，在他们点击链接时发送加密的密码。除了明显的安全问题外，这还意味着如果他们尝试通过 Moodle 界面登录，他们需要输入一个巨大的 MD5 字符串，因为这就是 Moodle 认为他们的密码。

我一直在考虑更改 Moodle 中的身份验证模块，以便如果提交的密码符合某些标准（例如：它是 32 个十六进制字符），那么在与 Joomla 版本进行比较之前不要对其进行 MD5 处理——问题是任何人都可以（在发现加密密码后）然后使用它登录。我需要一些特殊的方式将加密密码从 Joomla 发送到 Moodle，并向 Moodle 发出信号以区别对待该登录请求。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T09:52:52.737

您可以对安全单点登录解决方案执行以下操作：

*   为 Joomla 用户生成一个随机（使用 PRNG）令牌（存储这个）
*   在内部（通过 Web 服务等，通过 HTTPS 或本地数据源保存）将此令牌发送到 Moodle
*   在发送此令牌时，您还应告知 Moodle 属于哪个令牌的用户 ID（因此发送令牌 + 用户 ID）
*   将此令牌 + 用户 ID 存储在 Moodle 中
*   使用此令牌在 Joomla 中创建带有此令牌的链接（您可以在首次使用后令牌过期后立即使用查询字符串，但 POST 是一个更好的主意）
*   当您在 Moodle 中看到此令牌时，请登录相关用户并使令牌过期（这样就可以安全地防止回复攻击等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T15:03:52.957

您能否使用 Pro Moodle ( [http://www.promoodle.com/](http://www.promoodle.com/) ) 或 JFusion ( [http://www.jfusion.org/](http://www.jfusion.org/) ) 来为 Joomla / Moodle 系统创建单点登录系统。

这里还有一个指南：http: [//myjoomlaextensions.com/images/fbfiles/files/MoodleBridge.pdf](http://myjoomlaextensions.com/images/fbfiles/files/MoodleBridge.pdf)到“Moodle 和 Joomla 之间的桥梁。

此处有修改 Moodle 代码以创建单点登录系统的指南：http: //moodle.org/mod/forum/discuss.php?d=45126# [211486](http://moodle.org/mod/forum/discuss.php?d=45126#211486)（谨慎使用！）。

尝试跨不同域使用这些解决方案时，您的经验可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T14:32:14.467

如果您使用的是 Joomla！1.5，别忘了用户插件。看看 plugins/user/example.php。您可以在 onLoginUser 事件期间捕获密码，这可以帮助您桥接系统。

# .net - XAML 中的单个字符填充

> ID：351878
> 
> 赞同：3
> 
> 时间：2008-12-09T05:28:51.710
> 
> 标签：.net, xaml, textbox, padding

XAML 中有没有办法在单个字符周围添加填充？最好在字符之前和之后。

我有一个文本框，我希望输入的间隔更大一些（因此它与背景图像对齐）。能够执行以下操作将是理想的：

有什么想法可以做到这一点吗？

看起来人们可以在 MS-Word 中做到这一点（详情请[点击此处](http://office.microsoft.com/en-us/frontpage/HP052633841033.aspx)），所以希望这意味着它在 XAML 中是可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-01-22T16:34:27.697

[通过使用Glyphs](http://msdn.microsoft.com/en-us/library/system.windows.documents.glyphs.aspx)类，特别是[Indices](http://msdn.microsoft.com/en-us/library/system.windows.documents.glyphs.indices.aspx)属性，可以在 XAML 中调整字符间距。这是一个非常低级的文本 API，因此您必须指定字体 URI（而不是姓氏），并且您需要自己计算所有间距。

以下 XAML 使用 Glyph.Indices 应用字符间距：

```
<Glyphs UnicodeString="Expanded" Indices=",100;,100;,100;,100;,100;,100;,100"
    FontUri="file://c:/windows/fonts/arial.ttf"
    Fill="Black" FontRenderingEmSize="24" />
<Glyphs UnicodeString="Normal"
    FontUri="file://c:/windows/fonts/arial.ttf"
    Fill="Black" FontRenderingEmSize="24" />
<Glyphs UnicodeString="Condensed" Indices=",60;,50;,50;,50;,45;,50;,40;,45"
    FontUri="file://c:/windows/fonts/arial.ttf"
    Fill="Black" FontRenderingEmSize="24" /> 
```

如此[处](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/789c3e1b-e3ae-476f-b37f-d93ef6d0cb7b/#965f33ac-e557-4687-b960-1f1ffce070b5)所述，Indices 属性包含以分号分隔的`chr,off`对列表。`chr`是字体中字形的索引；如果省略，WPF 将使用与当前字符对应的字形`UnicodeString`。`off`是这个字形和下一个字形之间的间距；0 将两者重叠显示，任何正值都会增加间距。“正常”间距取决于您使用的字体；正如您在“压缩”示例中看到的那样，我为不同的字符对使用了不同的间距，以使输出看起来更好。

显然，这仅适用于您正在显示的静态文本，而不是从用户那里收集的输入（在 a 中`TextBox`）；我不知道有什么方法可以调整“标准”文本对象（、、、等）中的字符间距`TextBlock`，`TextBox`所以`Run`答案可能是“不，在 XAML 中没有办法做到这一点”。

# c# - c# 的 DirectoryEntry 类从哪里获取数据？

> ID：351885
> 
> 赞同：-1
> 
> 时间：2008-12-09T05:34:31.417
> 
> 标签：c#, directoryentry

DirectoryEntry 类从哪里获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-12T06:53:44.733

Arun I think you are very new to this area. Use google and msdn. You can also use articles or books related with active directory and c#

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T08:49:23.910

一个非常不清楚的问题；简短的回答是 AD - 你看过[MSDN](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx)吗？

# asp.net - 使用 XMLHttpRequest 和 SOAP 访问 ASP.Net WebService

> ID：351898
> 
> 赞同：0
> 
> 时间：2008-12-09T05:48:00.407
> 
> 标签：asp.net, web-services, asmx

我有一个托管在[http://recpushdata.cyndigo.com/jobs.asmx](http://recpushdata.cyndigo.com/jobs.asmx)的 webService 。我想使用 XMLHttpRequest 和 SOAP 来调用这个网络服务。我想这样做的原因是我已经托管了一个客户端应用程序，它可以完美地访问 Web 服务，但是当客户端尝试访问同一个 Web 服务时，它会给出一些错误，例如：-

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
- <soap:Body>
- <soap:Fault>
  <faultcode>soap:Server</faultcode> 
  <faultstring>Server was unable to process request. ---> Object reference not set to an instance of an object.</faultstring> 
  <detail /> 
  </soap:Fault>
  </soap:Body>
  </soap:Envelope> 
```

不幸的是，我无法弄清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-09T05:54:38.070

[在这里](http://blogs.msdn.com/kaevans/archive/2007/04/27/a-nostalgic-look-at-using-xmlhttprequest-with-soap.aspx)检查。但是 XmlHttpRequest 和 SOAP 很*痛苦*，因为您必须手动构建 SOAP 主体。

# c# - 将 GridView 标题文本设置为按指示换行

> ID：351903
> 
> 赞同：5
> 
> 时间：2008-12-09T05:53:00.723
> 
> 标签：c#, asp.net, html, gridview

我有一个 GridView，其中包含以下列：

```
|    A    |    B C    |    D E / F   | 
```

我希望这些以特定方式包装 - 也就是说，我不想让浏览器根据列宽来决定是否包装。所以在上面的例子中，我可能想要以下内容：

```
|    A    |    B      |    D         |
|         |    C      |    E / F     | 
```

我尝试过使用`\n`并且也使用过，`<br/>`但是这两种方法都不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-09T20:10:43.177

你可以在没有模板的情况下做到这一点。`<br />`只需在带有标签的标题上设置 HtmlEncode="False"即可。

例子：

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="Data">
<Columns>
    <asp:BoundField HeaderText="First Line<br />Second Line" DataField="ContactID"
                HtmlEncode="False" />
    <asp:BoundField HeaderText="Second" DataField="FirstName" />
    <asp:BoundField HeaderText="Third<br />Extra" DataField="Title" />
</Columns>
</asp:GridView> 
```

渲染：

```
第一行 | 第二 | 第三<br />额外 |
二线 | | |
---------------------------------------------
1 | 古斯塔沃 | 先生|
---------------------------------------------
2 | 凯瑟琳 | 女士 |
---------------------------------------------

```

**注意：如果您使用设计器而不是直接编辑 aspx，当您单击确定时，它会将您的“ `<`”更改为“ ”。`&lt;`**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-09T14:51:32.383

如果您使用模板字段，则可以对标题模板中的标题内容进行细粒度控制：

```
<asp:templatefield>
    <headertemplate>
      D<br />
      E / F
    </headertemplate>
    <itemtemplate>
        <%#Eval("MyField")%>
    </itemtemplate>
</asp:templatefield> 
```

# c# - 私有构造函数的奇怪智能行为

> ID：351911
> 
> 赞同：3
> 
> 时间：2008-12-09T05:57:42.993
> 
> 标签：c#, .net, visual-studio, visual-studio-2008, intellisense

例子：

```
public class Name {

    public string FirstName { get; private set; }
    public string LastName { get; private set; }

    private Name() { }

    public Name(string firstName, string lastName) {

        FirstName = firstName;
        LastName = lastName;

    }  
} 
```

当试图实例化这个 c# 类时，intellisense 会同时显示 new 关键字的私有和公共构造函数，即使其中一个构造函数是私有的！

更奇怪的是，当我从公共构造函数中删除第二个参数（删除 lastName 作为公共构造函数的参数）时，智能感知现在只显示带有 new 关键字的公共构造函数，正确。

这是一个错误还是我在这里遗漏了什么？我正在使用 VS2008 SP1。

编辑：代码清晰度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T06:06:02.990

哇，这很奇怪。我只是在我的 VS2008 副本上自己尝试过（我也在运行 SP1）并且得到了完全相同的结果。当有多个参数时，私有构造函数会出现在 Intellisense 中，但只有一个时不会出现。我的猜测是，这是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T06:06:48.637

不知道为什么智能感知会向您显示奇怪的东西。但是你应该有一个带有公共构造函数的域对象的抽象基类，所以你不必用私有的对象来填充你的对象。您还应该将诸如主键的属性之类的东西放在那里。

```
public abstract class BaseDomainObject{
  public BaseDomainObject() { }

  private int _id;

  public virtual int Id { get { return _id; } set { _id = value; } }

}

public SomeDomainObject : BaseDomainObject{
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T06:09:00.753

这可能是一个错误，但不值得努力修复。即因为在许多情况下访问私有构造函数是合法的。采取以下代码片段。所有私有构造函数访问都是合法的

```
class Outer {
  private Outer() {
  }
  public Outer Create() { return new Outer(); }
  class Inner() { 
    void Function1() { new Outer(); }
    class DoubleInner() {
       void Function2() { new Outer(); }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T10:17:46.530

即使私有构造函数出现在 Intellisense 中，如果您尝试编译在不允许的地方使用它的代码，编译器仍然会出现“由于保护级别而无法访问”错误

# c# - 自定义 Linq 扩展语法

> ID：351915
> 
> 赞同：2
> 
> 时间：2008-12-09T06:02:36.337
> 
> 标签：c#, linq, generics, extension-methods

我编写了一个从列表中获取给定数量的随机记录的函数。目前我可以做类似的事情：

```
IEnumerable<City> cities = db.Cites.GetRandom(5); 
```

（其中 db 是我的 DataContext 连接到 SQL Server DB）

目前，我在每个需要随机记录的实体中都有这样的功能：

```
public partial class City
{

    public static IEnumerable<City> GetRandom(int count)
    {
        Random random = new Random();
        IEnumerable<City> cities = DB.Context.Cities.OrderBy( c => random.Next() ).Take(count);

        return cities;
    }

} 
```

它工作得很好，但我希望它是通用的，所以它可以适用于任何表格，甚至任何项目列表。我尝试了一种扩展方法，例如：

```
 public static IEnumerable<T> GetRandom<T>( this Table<T> table, int count)
    {
        Random random = new Random();
        IEnumerable<T> records = table.OrderBy(r => random.Next()).Take(count);

        return records;
    } 
```

但我得到：

```
  错误 1 ​​类型“T”必须是引用类型才能在泛型类型或方法“System.Data.Linq.Table”中用作参数“TEntity” 

```

其中突出显示`GetRandom<T>`。

我不明白这里有什么问题。有人可以清除正确的语法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-09T08:00:08.533

我喜欢随机顺序函数的想法，它可以应用于任何 IEnumerable，如下所示：

```
public static IEnumerable<T> Randomize<T>(this IEnumerable<T> source)
{
    Random rnd = new Random();
    return source.OrderBy(t => rnd.Next());
}

...

IEnumerable<City> cities = db.Cites.Randomize().Take(5); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-09T08:42:54.843

如果您正在与数据库交谈，您可能希望*在*数据库中进行随机提取。使用 LINQ-to-SQL，您可以（对于较小的卷）通过指向 NEWID（在数据上下文中）的 [Function] 执行此操作：

```
 [Function(Name="NEWID", IsComposable=true)] 
     public Guid Random() 
     { 
         return Guid.NewGuid(); 
     } 
```

然后通过以下方式进行查询：

```
 ctx.Log = Console.Out; 
     var query = from x in ctx.Suppliers 
                 orderby ctx.Random() 
                 select x; 
     var results = query.ToArray(); 
```

这给出了 TSQL（这里使用 Northwind）：

```
SELECT [t0].[SupplierID], [t0].[CompanyName], [t0].[ContactName], 
[t0].[ContactTitle], [t0].[Address], [t0].[City], [t0].[Region], 
[t0].[PostalCode], [t0].[Country], [t0].[Phone], [t0].[Fax], [t0].[HomePage] 
FROM [dbo].[Suppliers] AS [t0] 
ORDER BY NEWID() 
```

您显然可以将其与 Take(1) 等混合使用。

但是，它在实体框架中不起作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-09T06:13:19.263

JaredPar，我认为您不能使用通用定义中的 :class 来做到这一点。

我认为这是定义类型约束的正确方法：

```
public static IEnumerable<T> GetRandom<T>( this Table<T> table, int count) where T : class {
  ...
} 
```

有关类型约束的更多信息在[这里](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T06:06:19.153

试试这个

```
public static IEnumerable<T> GetRandom<T>( this Table<T> table, int count) where T : class {
  ...
} 
```

# cocoa-touch - 如何以编程方式突出显示 UIButton？

> ID：351919
> 
> 赞同：4
> 
> 时间：2008-12-09T06:05:25.770
> 
> 标签：cocoa-touch

我有很多用户抱怨 iPhone 上的小“i”信息按钮很难触摸。好的，很简单——我只是在它后面贴了一个大而隐蔽的按钮，即使是最随意的手指触摸也不会错过，当你触摸它时，它会执行 infoButtonAction。

问题是，我想让信息按钮本身闪烁大约 0.25 秒，只是为了提供视觉上的“这就是正在发生的事情”类型的反馈。我的意思是，我已经假设你打算点击“i”按钮，所以我只是把它当作你*确实*点击了它。

我试过这个，但它不起作用：

```
 UIImage* normalImage = [_infoButton imageForState:UIControlStateNormal];
    UIImage* highlighted = [_infoButton imageForState:UIControlStateHighlighted];
    _infoButton.highlighted = YES;                                          // flash the button
    [_infoButton setImage:highlighted forState:UIControlStateNormal];
    [_infoButton setNeedsDisplay];                                          //* FIXME: No flash?!

    [(AppDelegate*)[[UIApplication sharedApplication] delegate] infoTap];   // do the info action

    _infoButton.highlighted = NO;   
    [_infoButton setImage:normalImage forState:UIControlStateNormal];
    [_infoButton setNeedsDisplay]; 
```

关于如何获得我想要的行为的任何想法？

（我也愿意接受关于用户反馈的其他想法，但仍然很好奇我会如何做到这一点。想象一下，相反，我有一个“游戏”/恶作剧，你按下“确定”按钮和“取消”闪烁，反之亦然，或者同样愚蠢的事情。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T16:03:36.157

“i”按钮的大小应为 44x44（Apple 标准手指大小），这可以在 Interface Builder 中完成。

对于某些动画，我建议查看 Core Animation。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T15:57:19.647

问题是您将按钮标记为需要显示（调用`-setNeedsDisplay`是不必要的；按钮在内部调用它），但是永远不允许运行循环有机会显示新图像。

在 Cocoa 中，您可以使用类似`-performClick:`但在 iPhone 上不可用的东西。

相反，我建议您尝试调用`-setSelected:`或`-setHighlighted:`在两者之间延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T06:24:51.223

我不知道你的`infotap`方法到底发生了什么，但似乎没有任何东西会导致你的第一个`setImage:`电话和第二个电话之间有很大的延迟。我的猜测是，事情发生的速度比眼睛看到的要快。我建议看看`NSTimer`尝试在那里放一个特定的延迟。

# python - Python imaplib Gmail 身份验证失败

> ID：351927
> 
> 赞同：7
> 
> 时间：2008-12-09T06:07:50.820
> 
> 标签：python, gmail, imap

我刚刚遇到了 Python 的 imaplib 和 Gmail 的身份验证机制的问题：

```
>>> import imaplib
>>> imap = imaplib.IMAP4_SSL('imap.gmail.com', 993)
>>> imap.authenticate('bobdole@gmail.com', 'Bob Dole likes your style!')
Traceback (most recent call last):
  ...
imaplib.error: AUTHENTICATE command error: BAD ['TODO (not supported yet) 31if3458825wff.5'] 
```

如果不支持身份验证，如何登录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-09T06:10:52.310

代替

```
>>> imap.authenticate('bobdole@gmail.com', 'Bob Dole likes your style!') 
```

采用

```
>>> imap.login('bobdole@gmail.com', 'Bob Dole likes your style!') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T06:10:34.183

以下对我有用：

```
srv = imaplib.IMAP4_SSL("imap.gmail.com")
srv.login(account, password) 
```

我认为使用`login()`是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T06:10:14.247

我在[这篇有用的博客文章](http://codeclimber.blogspot.com/2008/06/using-ruby-for-imap-with-gmail.html)中找到了解决方案。尽管 Gmail 不支持 AUTHENTICATE，但它支持 LOGIN 功能，如下所示：

```
>>> imap.login('bobdole@gmail.com', 'Bob Dole likes your style!')
('OK', ['bobdole@gmail.com authenticated (Success)']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-05T07:05:06.117

这将在 Python 中工作

`import imaplib imap = imaplib.IMAP4_SSL('imap.gmail.com', 993) imap.login('bobdole@gmail.com', 'Bob Dole likes your style!')`

您也不一定需要使用端口号，创建 imap 会话也将像这样工作： `imap = imaplib.IMAP4_SSL('imap.gmail.com')`

# cocoa - MouseUp 和 NSArrayController

> ID：351932
> 
> 赞同：1
> 
> 时间：2008-12-09T06:10:31.500
> 
> 标签：cocoa

如何将`-mouseUp:`事件与`-add:`NSArrayController 的方法相关联？该`-mouseUp:`事件存在于不同的对象中，但`#import`在保存受控数组的对象中被编辑和实例化。

通常，使用 NSButton，您可以从按钮命令拖动到 NSArrayController 的`-add:`方法，但显然这对于​​鼠标事件是不可能的。

-- 附加内容 --
马特：感谢您的回答，第一次阅读时它是有道理的。作为具有过程和非 GUI 语言（用于嵌入式控制器的 PLM51 和 C51）背景的 Obj-C/Cocoa 的初学者，我很难掌握 IBOutlets 和连接的实际实现。我对按钮等（即在 IB 中可见的东西）没有任何问题，但这是我的理解：我需要`-IBOutlet NSArrayControler * arryCtrl;`在 myDocuments.h 文件中声明。现在请记住，我覆盖该`-mouseUp`方法的对象称为 Canvas 并且在 myDocuments.h 中我有一个`Canvas * canvas`因此，我有一个由 myDocument 在运行时实例化的画布对象。在 IB 中，我从 File's Owner（myDocument 权限）拖动到 ArrayController 并建立了一个链接，但`-add:`由于该选项不可用，因此没有建立链接。在 nib (myDocument) 中没有 Canvas 的对象但是，在 mouseUp (canvas 方法) 中，如果我向 IBOutput 发送消息，即`[arrayCtrl add:self]`arrayCtrl 是未知的。

无论如何，我相信你们都在傻笑，因为答案可能很明显。但是，我真的很想理解这一切，并意识到问题出在我的新手编码上。感谢您为这个新手指出正确的方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T06:31:37.713

在您要覆盖其`mouseUp:`方法的类中，您需要有某种方式来引用 NSArrayController。这通常通过`IBOutlets`. 因此，在类中创建一个插座并将其连接到 IB 中的阵列控制器。这样，您可以简单地在`mouseUp:`方法中做任何您想做的事情：

```
- (void)mouseUp:(NSEvent *)theEvent
{
    [arrayControllerOutlet add:self];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-10T05:37:32.533

这里的典型模式是让您的控制器成为您的画布对象的委托。当您创建画布时，您还会向它发送一条`setDelegate:self`消息。

然后，您可以使用一些消息定义您的委托协议：

```
@protocol MyCanvasProtocol
@optional
-(void)canvas:(Canvas *)canvas mouseUp:(NSEvent *)event;
-(void)canvas:(Canvas *)canvas objectSelected:(id)theObject;
@end 
```

然后在您`-mouseUp:`的画布方法中，您只需将适当的消息发送给画布的代表。

```
- (void)mouseUp:(NSEvent *)event {
    // some mouse up code

    if ([delegate respondsToSelector:@selector(canvas:mouseUp:)])
        [delegate canvas:self mouseUp:event];
} 
```

以这种方式构建代码可以让您轻松地在其他地方重用该 Canvas 对象，并且不会将其与控制器的实现联系起来。然后，您的控制器可以自由地以任何需要的方式在画布上创建它需要的任何对象。

# asp.net - 在 ASP.NET MVC 中，如何使用来自 C# 代码的 Razor @Url.Content() 助手？

> ID：351937
> 
> 赞同：52
> 
> 时间：2008-12-09T06:13:20.043
> 
> 标签：asp.net, asp.net-mvc

我正在尝试编写一个输出图像标签的 html 帮助程序扩展。我需要访问（在 C# 代码中）类似 Razor 的 @Url.Content() 帮助程序来获取当前上下文的正确 URL。如何做到这一点？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-02-27T23:44:28.810

使用以下内容在代码中模仿 Url.Content。

```
VirtualPathUtility.ToAbsolute("~/url/"); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2008-12-12T20:12:26.720

您可以`UrlHelper`通过传入适当的`ViewContext`. 例如，要从图像助手执行此操作：

```
public static string CustomImage(this HtmlHelper html)
{
    var Url = new UrlHelper(html.ViewContext.RequestContext);
} 
```

此时您可以调用`Url.Content()`或任何其他`UrlHelper`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-09T15:10:20.303

大概是这样的？

```
public static string MyHelper(this HtmlHelper h)
{
      string url = h.ViewContext.HttpContext.Request.Url.AbsoluteUri;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-09-13T03:56:42.873

是的你可以。

您可以从控制器调用：

`this.Url.Content("~/Somerelativepath?somethingelse=true");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-21T05:08:59.770

是的，使用此代码添加`Url.Content`到您的代码中：

```
var img_btn_edit = VirtualPathUtility.ToAbsolute("~/Content/images/pencil.png"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-12-09T06:30:08.933

您可以访问 Request 对象，从而访问 URL，如下所示：

```
string fullUrl = HttpContext.Current.Request.Url.AbsoluteUri; 
```

# web-services - 负载测试/压力测试网络服务

> ID：351938
> 
> 赞同：23
> 
> 时间：2008-12-09T06:13:34.397
> 
> 标签：web-services, load-testing, stress-testing

有谁知道测试 Web 服务负载和压力的好工具吗？我一直在看 Watir 和 Selenium，但有更多的网页居中。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-09T06:17:14.653

以下是一些常见的负载测试工具：

*   [HTTP_Load](http://www.acme.com/software/http_load/)
*   [阿帕奇 JMeter](http://jmeter.apache.org/)
*   [磨床](http://grinder.sourceforge.net/)
*   [HTTPperf](https://github.com/httperf/httperf)
*   [AB](http://httpd.apache.org/docs/2.0/programs/ab.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-09T18:52:38.077

您绝对应该看一下[SoapUI](http://www.soapui.org/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-09T18:46:23.270

我其实很喜欢[Pylot](http://www.pylot.org/)

它是免费的、开源的，我已经能够将它用于许多项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-09T18:40:48.427

我用过[openSTA](http://www.opensta.org/)。

这使用了一种相对简单的脚本语言。

您可以轻松地测试 Web 服务并编写自己的脚本。

它允许您以任何您想要的方式将脚本放在测试中，并配置迭代次数、每次迭代中的用户数、引入每个新用户的加速时间以及每次迭代之间的延迟。将来也可以安排测试。

它是开源和免费的。

它会生成许多报告，这些报告可以保存到电子表格中。然后，我们使用数据透视表轻松分析和绘制结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-10T20:20:13.657

我不认为 Selenium 和 Watir 实际上是为负载测试而设计的。也许你应该看看 httperf 和 ab 之类的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T08:47:28.193

我之前使用过[WebLOAD](http://www.radview.com)进行 Web 服务测试

# iphone - 通过 SDK 访问 iPhone WiFi 信息

> ID：351954
> 
> 赞同：25
> 
> 时间：2008-12-09T06:29:30.883
> 
> 标签：iphone, cocoa-touch, wifi

有没有办法使用 iPhone SDK 获取 WiFi 信息？信号强度、WiFi 频道和 SSID 之类的东西是我正在寻找的主要内容。

只对 Wifi 信息感兴趣，对蜂窝电话不感兴趣。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2011-12-01T12:11:51.217

据此，自 iOS 4.1 以来[它](https://stackoverflow.com/questions/4304942/cncopycurrentnetworkinfo-is-returning-bad-data)实际上是可能的。

函数调用：[CNCopyCurrentNetworkInfo](https://developer.apple.com/reference/systemconfiguration/1614126-cncopycurrentnetworkinfo) ()

希望有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-01-05T08:11:16.750

基于[这个](http://openradar.appspot.com/radar?id=306)错误报告和[这个](https://stackoverflow.com/questions/339089/can-the-iphone-sdk-obtain-the-wi-fi-ssid-currently-connected-to)SO question，我猜没有支持的方式来做这个 atm。

编辑：克里斯提到了 WiFinder，这促使我做更多的挖掘工作。根据 WiFinder 作者的[博客](http://larsbergstrom.wordpress.com/2008/11/03/on-the-lack-of-wifinder-updates/)，他使用了私有 Apple80211.framework 中的方法。（上面链接的 SO 问题中提到的框架。）显然，Apple 将不再允许在应用程序中调用这些私有 API，这阻止了他更新 WiFinder。

但是，如果您无论如何都想使用它们，一些好心人已将已发现的 Apple80211 函数列表发布到[google code](http://code.google.com/p/iphone-wireless/wiki/Apple80211Functions)。

看起来[`Apple80211GetInfoCopy`](http://code.google.com/p/iphone-wireless/wiki/Apple80211GetInfoCopy)可能会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T15:07:04.243

WiFinder iPhone应用程序以某种方式做到了......

# .net - .NET Winforms 是否有任何好的 MVC/MVP 框架或其他应用程序框架？

> ID：351959
> 
> 赞同：1
> 
> 时间：2008-12-09T06:32:46.977
> 
> 标签：.net, winforms, frameworks

我不确定为什么要找到任何用于开发 Windows 应用程序的框架或好的示例项目如此困难。我敢肯定，对于 Web 应用程序框架，我们有 Castle Project 或 ASP.NET MVC，它们都是非常棒的东西，并且有许多遵循 IoC、缓存等最佳实践的示例。

Winforms 是否已经存在这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-09T08:52:46.150

MS的[Smart Client](http://msdn.microsoft.com/en-us/library/aa480450.aspx)使用 MVP 模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T23:20:21.040

在我看来，[MVC#](http://www.mvcsharp.org/)是开发 Winforms 应用程序的最佳框架之一。掌握框架的窍门需要一点时间，但是一旦你了解了 MVC# 的工作原理，它就是小孩子的东西了。

要从 MVC# 开始，请查看提供的示例：[http](http://www.mvcsharp.org/Examples.aspx) ://www.mvcsharp.org/Examples.aspx （这是该框架的优势之一！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T04:30:54.010

[MVC#](http://mvcsharp.org/Default.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-26T20:44:55.370

您可能想尝试[Claymore](http://claymore.codeplex.com/)；我试图将其构建得尽可能简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-11-28T19:54:12.223

有[Paul Stovell的](http://www.paulstovell.com/blog)[Magellan](http://code.google.com/p/magellan-framework/)框架。Winform 细节在[这里](http://code.google.com/p/magellan-framework/wiki/WinForms)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-04T17:57:59.640

如果您还没有，请尝试 WPF。它使用 XAML 进行布局并使用 MVVM。使用 imo 真的很容易，并且可以创建良好的分离。我假设您使用的是传统的 WebForms？

# linux - 使用 mono-service 在 linux 上封装一个 windows 服务

> ID：351971
> 
> 赞同：13
> 
> 时间：2008-12-09T06:39:17.620
> 
> 标签：linux, mono, mono-service

嗨，我正在尝试使用 mono-service2 从 Visual Studio 运行股票 Windows 服务项目。我正在使用 mono 2.0 在 debian 上运行它并进行编译。

```
gmcs *.cs -pkg:dotnet 
```

我尝试从这个开始（我尝试将 -d 设置为应用程序的目录并设置 -n,-m ）

```
mono-service2 -l:service.lock --debug Program.exe 
```

唯一的代码更改是添加用于测试的写行

**服务1.cs**

```
using System;
using System.ServiceProcess;

namespace spikes
{
    public partial class Service1 : ServiceBase
    {
        public Service1()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            Console.WriteLine("starting...");
        }

        protected override void OnStop()
        {
            Console.WriteLine("stopping....");
        }
    }
} 
```

结果就是这个错误

```
Unhandled Exception: System.TypeInitializationException: An exception was thrown by the type initializer for Mono.Unix.Native.Syscall ---> System.DllNotFoundException: libMonoPosixHelper.so
  at (wrapper managed-to-native) Mono.Unix.Native.Syscall:_L_ctermid ()
  at Mono.Unix.Native.Syscall..cctor () [0x00000]
  --- End of inner exception stack trace ---
  at MonoServiceRunner.Main (System.String[] args) [0x00000] 
```

谢谢你的帮助

**回答**

我错过了 LD____LIBRARY____PATH 环境变量，所以我将它添加到 csh 中进行测试

```
#!/bin/csh
setenv LD_LIBRARY_PATH .:/usr/local/lib
mono-service2 -l:service.lock --debug Program.exe 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-09T07:50:35.247

你的 LD_LIBRARY_PATH 指向哪里？`libMonoPosixHelper.so`在里面吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T09:11:52.693

确保已安装*libmono0*。

# unit-testing - 你如何测试视觉组件？

> ID：351975
> 
> 赞同：6
> 
> 时间：2008-12-09T06:41:05.760
> 
> 标签：unit-testing, user-interface, testing

我想我理解单元测试。但我想知道：有没有办法自动化视觉效果，比如确保抗锯齿工作或网站上的圆角看起来应该如何？我觉得它不实用，但我在 QA 领域几乎没有经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-11T00:03:48.790

> “抗锯齿工作还是网站上的圆角看起来应该如何？”

理论上，您可以编写自动化工具来拍摄渲染快照并以某种方式解析它们并与模型进行比较。

您需要某种“锚定”机制来将模型答案与渲染输出对齐，然后对其进行颜色差异，其中生成的输出是完整的黑色图像 == 完美合规。

然而，这样做无疑是极其复杂的，并且无法弥补*感知*上的失败，例如色盲人如何在屏幕上用校准不佳的颜色图看到它。

相反，您需要做的是创建应用程序中所有可能的导航路径的完整树（以编程方式/测试套件驱动更容易一些），然后将规范交给一组人通过并执行各种的平台。

> 这将在本周处理，但您是否会在每次更改代码时重复手动测试？还是每次发布？手动测试根本无法扩展。它们在短期内很便宜，但从长远来看却非常昂贵。——蒂姆·奥廷格

FWIW，即使 Firefox 仍然有一个人工驱动的测试套件。人类更擅长识别在满足定义标准的同时不满足其他一些尚未被任意定义的标准的行为，因此还没有为其编写测试用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-09T07:28:03.310

做走廊可用性测试。;)

[http://www.joelonsoftware.com/articles/fog0000000043.html](http://www.joelonsoftware.com/articles/fog0000000043.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T07:53:01.870

您还可以考虑使用诸如[TestComplete](http://www.automatedqa.com/products/testcomplete/)之类的工具在 GUI 级别进行自动化。有很多这样的工具，价格不等，功能范围很广。查看[SQAF 自动化论坛](http://www.sqaforums.com/postlist.php?Cat=0&Board=UBB34)，了解有关此主题的一些很好的讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-11T00:35:01.613

这是单元测试的一个难题，没有好的答案。从技术上讲，检查屏幕上显示的结果不再是单元测试（它更像是功能测试）。

我发现的最佳方法是构建代码以使视图层最终尽可能*薄。*像 MVC 和 Presentation Model 这样的模式对此很有用。完成后，您可以以编程方式测试视图的业务逻辑（如在视图组件之间的特定交互中），而无需实际显示任何内容。

# testing - 场景测试是顺序单元测试组吗？

> ID：351983
> 
> 赞同：4
> 
> 时间：2008-12-09T06:45:36.593
> 
> 标签：testing

我阅读了关于场景测试的[Wikipedia](http://en.wikipedia.org/wiki/Scenario_testing)文章，但我很遗憾地说它很短。我想知道：场景测试是顺序单元测试的集合吗？或者，也许，就像一个多步骤的单元测试？许多框架是否支持场景测试，或者它们是否包含在单元测试中？

如果它们与自动化无关，它们是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-09T07:37:03.650

我认为测试和场景测试的数量和分布之间没有任何固定的关系。

我认为场景最常见的代码表示是支持特定故事（场景）所需的一组特定业务数据。这通常以数据库数据、假存根数据或两者结合的形式提供。

这个想法是该数据集具有已知且定义明确的特征，这些特征将在给定的业务流程中提供明确定义的结果。

对于一个 Web 应用程序，我可以有一个 Web 测试（或多个变体）来点击整个场景。在其他情况下，场景在较低级别使用，可能在功能测试或单元测试中测试场景的一部分。在这种情况下，我通常从不按场景对测试进行分组，而是选择我通常用于单元/功能测试的测试功能分组。在“Subsystem1Test”中经常有一个称为“testScenario1”或“testScenarioInsufficientCredit”的方法。我更喜欢给我的场景命名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T07:50:22.733

除了 korsenvoid 的响应之外，根据我的经验，基于场景的测试通常会自动化，因为它将包含在回归测试中。回归测试通常是自动化的，因为手动执行它不能很好地适应常规版本。

在商业软件中，很好的场景测试示例是包含在用户文档中的教程。这些显然必须在每个版本中工作或从文档中删除，因此必须进行测试。

虽然您可以使用顺序单元测试来进行场景测试，但我的猜测是使用基于 GUI 的自动化工具更为常见。比如我在这个角色中使用[TestComplete](http://www.automatedqa.com/products/testcomplete/)配合一个脚本框架效果很好。场景测试通常从用户/客户的角度进行，很难在单元级别准确复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T06:59:19.000

恕我直言，场景测试是一种测试活动，而不是开发活动；因此，它是关于测试产品，而不是该产品的单元。测试场景是端到端场景，使用产品的**自然接口**。如果产品具有编程接口，那么您可以使用单元测试框架或[Fitnesse](http://fitnesse.org/)。

# php - Call to a member function xpath() on a non-object?

> ID：351987
> 
> 赞同：2
> 
> 时间：2008-12-09T06:49:29.720
> 
> 标签：php, object, dom, xpath, simplexml

I'm trying to grab an image from a web site using simpleXML and am getting a PHP error saying that I'm trying to call to a member function `xpath()` on a non-object.

Below are the lines I'm trying to use to get the image's source tag:

```
$xpath = '/html/body/div/div/div[5]/div/div/div[2]/div/div[2]/img';          
$html = new DOMDocument();
@$html->loadHTMLFile($target_URL);
$xml = simplexml_import_dom($html);   
$source_image = $xml->xpath($xpath);
$source_image = $source_image[0]['src']; 
```

What am I doing wrong? It's pretty clear the second to last line has a problem, but I'm not sure what it is.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-09T07:24:13.020

Try this code to first make sure that the document is being parsed correctly.

```
$xpath = '/html/body/div/div/div[5]/div/div/div[2]/div/div[2]/img';          
$html = new DOMDocument();
@$html->loadHTMLFile($target_URL);
$xml = simplexml_import_dom($html);   
if (!$xml) {
    echo 'Error while parsing the document';
    exit;
}
$source_image = $xml->xpath($xpath);
$source_image = $source_image[0]['src']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-09T07:20:58.893

Problem solved. Was funning xpath on an empty string.

# openid - OpenID：在非极客社区接受注册

> ID：351989
> 
> 赞同：3
> 
> 时间：2008-12-09T06:50:02.340
> 
> 标签：openid

如果我们要为非极客开发一个社区网站，我们是否可以实现openid注册。非极客社区可以接受多少 openid。任何对此有任何想法的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-09T06:52:08.763

两者都做 - 为那些想要使用它的人提供 OpenID，并为那些不想使用它的人提供常规用户帐户注册。您甚至可以一路成为 OpenID 提供者，并允许在您的系统上拥有常规帐户的用户将它们用作其他系统上的 OpenID。

简而言之，只要不是唯一的选择，OpenID 就可以。

一个小提示：如果您决定提供 OpenID 身份验证，您需要为用户[锁定自己的帐户](https://web.archive.org/web/20090407063154/http://stackoverflow.com:80/questions/347019/regaining-access-to-a-stackoverflow-profile)做好准备。您还应该提供一种机制来[更改关联的 OpenID](https://web.archive.org/web/20090424075552/http://stackoverflow.uservoice.com:80/pages/general/suggestions/16685)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-09T11:40:24.063

我认为您应该坚持使用标准的电子邮件地址和密码，这是每个人都知道的，并为您提供与用户建立自动外部联系点的好处，以防您需要通知他们某些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-09T08:41:37.623

您可以选择开放 ID 和传统登录功能。它在非极客中也变得非常适应。您甚至可以查找 Google 的[朋友连接](http://www.google.com/friendconnect/)以供进一步参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-09T08:47:12.853

我们只是将一个旧网站迁移到一个新的（基于 WordPress 的）平台。我们正面临这个问题，我们知道我们希望将凭证管理外包给 OpenID 之类的东西，尽管目前 FaceBook Connect 是我们计划的领导者。主要是因为我们的很大一部分用户已经在那里了。

我们可以考虑两者都做，但如果你的基础中相当一部分还没有 OpenIDed，那么对于非 Geek 来说，它就没有吸引力。同样，我确实相信 OpenID 模型从根本上说是一件好事，因此您可以争辩说，向世界传授更多关于它的知识会带来一些道德上的好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T18:20:18.173

我认为非极客看不到使用 OpenId 的好处，而且大多数 OpenID 登录在说明他们所做的工作方面做得很差。

为了解决您的顾虑，如果您要实施 OID，请做好解释它的作用和好处的工作。**************``***************